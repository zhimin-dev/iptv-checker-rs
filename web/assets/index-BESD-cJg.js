function fH(r,e){for(var t=0;t<e.length;t++){const n=e[t];if(typeof n!="string"&&!Array.isArray(n)){for(const i in n)if(i!=="default"&&!(i in r)){const s=Object.getOwnPropertyDescriptor(n,i);s&&Object.defineProperty(r,i,s.get?s:{enumerable:!0,get:()=>n[i]})}}}return Object.freeze(Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function t(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(i){if(i.ep)return;i.ep=!0;const s=t(i);fetch(i.href,s)}})();var Gh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function da(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}function pH(r){if(Object.prototype.hasOwnProperty.call(r,"__esModule"))return r;var e=r.default;if(typeof e=="function"){var t=function n(){var i=!1;try{i=this instanceof n}catch{}return i?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(r).forEach(function(n){var i=Object.getOwnPropertyDescriptor(r,n);Object.defineProperty(t,n,i.get?i:{enumerable:!0,get:function(){return r[n]}})}),t}var g1={exports:{}},c0={},v1={exports:{}},Jr={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pP;function mH(){if(pP)return Jr;pP=1;var r=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),a=Symbol.for("react.context"),o=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),u=Symbol.for("react.memo"),c=Symbol.for("react.lazy"),h=Symbol.iterator;function f(ee){return ee===null||typeof ee!="object"?null:(ee=h&&ee[h]||ee["@@iterator"],typeof ee=="function"?ee:null)}var g={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v=Object.assign,y={};function _(ee,pe,me){this.props=ee,this.context=pe,this.refs=y,this.updater=me||g}_.prototype.isReactComponent={},_.prototype.setState=function(ee,pe){if(typeof ee!="object"&&typeof ee!="function"&&ee!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,ee,pe,"setState")},_.prototype.forceUpdate=function(ee){this.updater.enqueueForceUpdate(this,ee,"forceUpdate")};function C(){}C.prototype=_.prototype;function E(ee,pe,me){this.props=ee,this.context=pe,this.refs=y,this.updater=me||g}var D=E.prototype=new C;D.constructor=E,v(D,_.prototype),D.isPureReactComponent=!0;var I=Array.isArray,k=Object.prototype.hasOwnProperty,P={current:null},N={key:!0,ref:!0,__self:!0,__source:!0};function U(ee,pe,me){var ye,Oe={},Le=null,st=null;if(pe!=null)for(ye in pe.ref!==void 0&&(st=pe.ref),pe.key!==void 0&&(Le=""+pe.key),pe)k.call(pe,ye)&&!N.hasOwnProperty(ye)&&(Oe[ye]=pe[ye]);var ze=arguments.length-2;if(ze===1)Oe.children=me;else if(1<ze){for(var pt=Array(ze),Ye=0;Ye<ze;Ye++)pt[Ye]=arguments[Ye+2];Oe.children=pt}if(ee&&ee.defaultProps)for(ye in ze=ee.defaultProps,ze)Oe[ye]===void 0&&(Oe[ye]=ze[ye]);return{$$typeof:r,type:ee,key:Le,ref:st,props:Oe,_owner:P.current}}function B(ee,pe){return{$$typeof:r,type:ee.type,key:pe,ref:ee.ref,props:ee.props,_owner:ee._owner}}function A(ee){return typeof ee=="object"&&ee!==null&&ee.$$typeof===r}function $(ee){var pe={"=":"=0",":":"=2"};return"$"+ee.replace(/[=:]/g,function(me){return pe[me]})}var W=/\/+/g;function V(ee,pe){return typeof ee=="object"&&ee!==null&&ee.key!=null?$(""+ee.key):pe.toString(36)}function Q(ee,pe,me,ye,Oe){var Le=typeof ee;(Le==="undefined"||Le==="boolean")&&(ee=null);var st=!1;if(ee===null)st=!0;else switch(Le){case"string":case"number":st=!0;break;case"object":switch(ee.$$typeof){case r:case e:st=!0}}if(st)return st=ee,Oe=Oe(st),ee=ye===""?"."+V(st,0):ye,I(Oe)?(me="",ee!=null&&(me=ee.replace(W,"$&/")+"/"),Q(Oe,pe,me,"",function(Ye){return Ye})):Oe!=null&&(A(Oe)&&(Oe=B(Oe,me+(!Oe.key||st&&st.key===Oe.key?"":(""+Oe.key).replace(W,"$&/")+"/")+ee)),pe.push(Oe)),1;if(st=0,ye=ye===""?".":ye+":",I(ee))for(var ze=0;ze<ee.length;ze++){Le=ee[ze];var pt=ye+V(Le,ze);st+=Q(Le,pe,me,pt,Oe)}else if(pt=f(ee),typeof pt=="function")for(ee=pt.call(ee),ze=0;!(Le=ee.next()).done;)Le=Le.value,pt=ye+V(Le,ze++),st+=Q(Le,pe,me,pt,Oe);else if(Le==="object")throw pe=String(ee),Error("Objects are not valid as a React child (found: "+(pe==="[object Object]"?"object with keys {"+Object.keys(ee).join(", ")+"}":pe)+"). If you meant to render a collection of children, use an array instead.");return st}function ie(ee,pe,me){if(ee==null)return ee;var ye=[],Oe=0;return Q(ee,ye,"","",function(Le){return pe.call(me,Le,Oe++)}),ye}function ne(ee){if(ee._status===-1){var pe=ee._result;pe=pe(),pe.then(function(me){(ee._status===0||ee._status===-1)&&(ee._status=1,ee._result=me)},function(me){(ee._status===0||ee._status===-1)&&(ee._status=2,ee._result=me)}),ee._status===-1&&(ee._status=0,ee._result=pe)}if(ee._status===1)return ee._result.default;throw ee._result}var ue={current:null},se={transition:null},ae={ReactCurrentDispatcher:ue,ReactCurrentBatchConfig:se,ReactCurrentOwner:P};function ce(){throw Error("act(...) is not supported in production builds of React.")}return Jr.Children={map:ie,forEach:function(ee,pe,me){ie(ee,function(){pe.apply(this,arguments)},me)},count:function(ee){var pe=0;return ie(ee,function(){pe++}),pe},toArray:function(ee){return ie(ee,function(pe){return pe})||[]},only:function(ee){if(!A(ee))throw Error("React.Children.only expected to receive a single React element child.");return ee}},Jr.Component=_,Jr.Fragment=t,Jr.Profiler=i,Jr.PureComponent=E,Jr.StrictMode=n,Jr.Suspense=l,Jr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ae,Jr.act=ce,Jr.cloneElement=function(ee,pe,me){if(ee==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+ee+".");var ye=v({},ee.props),Oe=ee.key,Le=ee.ref,st=ee._owner;if(pe!=null){if(pe.ref!==void 0&&(Le=pe.ref,st=P.current),pe.key!==void 0&&(Oe=""+pe.key),ee.type&&ee.type.defaultProps)var ze=ee.type.defaultProps;for(pt in pe)k.call(pe,pt)&&!N.hasOwnProperty(pt)&&(ye[pt]=pe[pt]===void 0&&ze!==void 0?ze[pt]:pe[pt])}var pt=arguments.length-2;if(pt===1)ye.children=me;else if(1<pt){ze=Array(pt);for(var Ye=0;Ye<pt;Ye++)ze[Ye]=arguments[Ye+2];ye.children=ze}return{$$typeof:r,type:ee.type,key:Oe,ref:Le,props:ye,_owner:st}},Jr.createContext=function(ee){return ee={$$typeof:a,_currentValue:ee,_currentValue2:ee,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},ee.Provider={$$typeof:s,_context:ee},ee.Consumer=ee},Jr.createElement=U,Jr.createFactory=function(ee){var pe=U.bind(null,ee);return pe.type=ee,pe},Jr.createRef=function(){return{current:null}},Jr.forwardRef=function(ee){return{$$typeof:o,render:ee}},Jr.isValidElement=A,Jr.lazy=function(ee){return{$$typeof:c,_payload:{_status:-1,_result:ee},_init:ne}},Jr.memo=function(ee,pe){return{$$typeof:u,type:ee,compare:pe===void 0?null:pe}},Jr.startTransition=function(ee){var pe=se.transition;se.transition={};try{ee()}finally{se.transition=pe}},Jr.unstable_act=ce,Jr.useCallback=function(ee,pe){return ue.current.useCallback(ee,pe)},Jr.useContext=function(ee){return ue.current.useContext(ee)},Jr.useDebugValue=function(){},Jr.useDeferredValue=function(ee){return ue.current.useDeferredValue(ee)},Jr.useEffect=function(ee,pe){return ue.current.useEffect(ee,pe)},Jr.useId=function(){return ue.current.useId()},Jr.useImperativeHandle=function(ee,pe,me){return ue.current.useImperativeHandle(ee,pe,me)},Jr.useInsertionEffect=function(ee,pe){return ue.current.useInsertionEffect(ee,pe)},Jr.useLayoutEffect=function(ee,pe){return ue.current.useLayoutEffect(ee,pe)},Jr.useMemo=function(ee,pe){return ue.current.useMemo(ee,pe)},Jr.useReducer=function(ee,pe,me){return ue.current.useReducer(ee,pe,me)},Jr.useRef=function(ee){return ue.current.useRef(ee)},Jr.useState=function(ee){return ue.current.useState(ee)},Jr.useSyncExternalStore=function(ee,pe,me){return ue.current.useSyncExternalStore(ee,pe,me)},Jr.useTransition=function(){return ue.current.useTransition()},Jr.version="18.3.1",Jr}var mP;function AE(){return mP||(mP=1,v1.exports=mH()),v1.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gP;function gH(){if(gP)return c0;gP=1;var r=AE(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),n=Object.prototype.hasOwnProperty,i=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function a(o,l,u){var c,h={},f=null,g=null;u!==void 0&&(f=""+u),l.key!==void 0&&(f=""+l.key),l.ref!==void 0&&(g=l.ref);for(c in l)n.call(l,c)&&!s.hasOwnProperty(c)&&(h[c]=l[c]);if(o&&o.defaultProps)for(c in l=o.defaultProps,l)h[c]===void 0&&(h[c]=l[c]);return{$$typeof:e,type:o,key:f,ref:g,props:h,_owner:i.current}}return c0.Fragment=t,c0.jsx=a,c0.jsxs=a,c0}var vP;function vH(){return vP||(vP=1,g1.exports=gH()),g1.exports}var O=vH(),M=AE();const Qr=da(M),y_=fH({__proto__:null,default:Qr},[M]);var by={},y1={exports:{}},Aa={},x1={exports:{}},_1={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yP;function yH(){return yP||(yP=1,(function(r){function e(se,ae){var ce=se.length;se.push(ae);e:for(;0<ce;){var ee=ce-1>>>1,pe=se[ee];if(0<i(pe,ae))se[ee]=ae,se[ce]=pe,ce=ee;else break e}}function t(se){return se.length===0?null:se[0]}function n(se){if(se.length===0)return null;var ae=se[0],ce=se.pop();if(ce!==ae){se[0]=ce;e:for(var ee=0,pe=se.length,me=pe>>>1;ee<me;){var ye=2*(ee+1)-1,Oe=se[ye],Le=ye+1,st=se[Le];if(0>i(Oe,ce))Le<pe&&0>i(st,Oe)?(se[ee]=st,se[Le]=ce,ee=Le):(se[ee]=Oe,se[ye]=ce,ee=ye);else if(Le<pe&&0>i(st,ce))se[ee]=st,se[Le]=ce,ee=Le;else break e}}return ae}function i(se,ae){var ce=se.sortIndex-ae.sortIndex;return ce!==0?ce:se.id-ae.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;r.unstable_now=function(){return s.now()}}else{var a=Date,o=a.now();r.unstable_now=function(){return a.now()-o}}var l=[],u=[],c=1,h=null,f=3,g=!1,v=!1,y=!1,_=typeof setTimeout=="function"?setTimeout:null,C=typeof clearTimeout=="function"?clearTimeout:null,E=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function D(se){for(var ae=t(u);ae!==null;){if(ae.callback===null)n(u);else if(ae.startTime<=se)n(u),ae.sortIndex=ae.expirationTime,e(l,ae);else break;ae=t(u)}}function I(se){if(y=!1,D(se),!v)if(t(l)!==null)v=!0,ne(k);else{var ae=t(u);ae!==null&&ue(I,ae.startTime-se)}}function k(se,ae){v=!1,y&&(y=!1,C(U),U=-1),g=!0;var ce=f;try{for(D(ae),h=t(l);h!==null&&(!(h.expirationTime>ae)||se&&!$());){var ee=h.callback;if(typeof ee=="function"){h.callback=null,f=h.priorityLevel;var pe=ee(h.expirationTime<=ae);ae=r.unstable_now(),typeof pe=="function"?h.callback=pe:h===t(l)&&n(l),D(ae)}else n(l);h=t(l)}if(h!==null)var me=!0;else{var ye=t(u);ye!==null&&ue(I,ye.startTime-ae),me=!1}return me}finally{h=null,f=ce,g=!1}}var P=!1,N=null,U=-1,B=5,A=-1;function $(){return!(r.unstable_now()-A<B)}function W(){if(N!==null){var se=r.unstable_now();A=se;var ae=!0;try{ae=N(!0,se)}finally{ae?V():(P=!1,N=null)}}else P=!1}var V;if(typeof E=="function")V=function(){E(W)};else if(typeof MessageChannel<"u"){var Q=new MessageChannel,ie=Q.port2;Q.port1.onmessage=W,V=function(){ie.postMessage(null)}}else V=function(){_(W,0)};function ne(se){N=se,P||(P=!0,V())}function ue(se,ae){U=_(function(){se(r.unstable_now())},ae)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(se){se.callback=null},r.unstable_continueExecution=function(){v||g||(v=!0,ne(k))},r.unstable_forceFrameRate=function(se){0>se||125<se?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):B=0<se?Math.floor(1e3/se):5},r.unstable_getCurrentPriorityLevel=function(){return f},r.unstable_getFirstCallbackNode=function(){return t(l)},r.unstable_next=function(se){switch(f){case 1:case 2:case 3:var ae=3;break;default:ae=f}var ce=f;f=ae;try{return se()}finally{f=ce}},r.unstable_pauseExecution=function(){},r.unstable_requestPaint=function(){},r.unstable_runWithPriority=function(se,ae){switch(se){case 1:case 2:case 3:case 4:case 5:break;default:se=3}var ce=f;f=se;try{return ae()}finally{f=ce}},r.unstable_scheduleCallback=function(se,ae,ce){var ee=r.unstable_now();switch(typeof ce=="object"&&ce!==null?(ce=ce.delay,ce=typeof ce=="number"&&0<ce?ee+ce:ee):ce=ee,se){case 1:var pe=-1;break;case 2:pe=250;break;case 5:pe=1073741823;break;case 4:pe=1e4;break;default:pe=5e3}return pe=ce+pe,se={id:c++,callback:ae,priorityLevel:se,startTime:ce,expirationTime:pe,sortIndex:-1},ce>ee?(se.sortIndex=ce,e(u,se),t(l)===null&&se===t(u)&&(y?(C(U),U=-1):y=!0,ue(I,ce-ee))):(se.sortIndex=pe,e(l,se),v||g||(v=!0,ne(k))),se},r.unstable_shouldYield=$,r.unstable_wrapCallback=function(se){var ae=f;return function(){var ce=f;f=ae;try{return se.apply(this,arguments)}finally{f=ce}}}})(_1)),_1}var xP;function xH(){return xP||(xP=1,x1.exports=yH()),x1.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _P;function _H(){if(_P)return Aa;_P=1;var r=AE(),e=xH();function t(d){for(var m="https://reactjs.org/docs/error-decoder.html?invariant="+d,T=1;T<arguments.length;T++)m+="&args[]="+encodeURIComponent(arguments[T]);return"Minified React error #"+d+"; visit "+m+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var n=new Set,i={};function s(d,m){a(d,m),a(d+"Capture",m)}function a(d,m){for(i[d]=m,d=0;d<m.length;d++)n.add(m[d])}var o=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),l=Object.prototype.hasOwnProperty,u=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,c={},h={};function f(d){return l.call(h,d)?!0:l.call(c,d)?!1:u.test(d)?h[d]=!0:(c[d]=!0,!1)}function g(d,m,T,L){if(T!==null&&T.type===0)return!1;switch(typeof m){case"function":case"symbol":return!0;case"boolean":return L?!1:T!==null?!T.acceptsBooleans:(d=d.toLowerCase().slice(0,5),d!=="data-"&&d!=="aria-");default:return!1}}function v(d,m,T,L){if(m===null||typeof m>"u"||g(d,m,T,L))return!0;if(L)return!1;if(T!==null)switch(T.type){case 3:return!m;case 4:return m===!1;case 5:return isNaN(m);case 6:return isNaN(m)||1>m}return!1}function y(d,m,T,L,j,K,de){this.acceptsBooleans=m===2||m===3||m===4,this.attributeName=L,this.attributeNamespace=j,this.mustUseProperty=T,this.propertyName=d,this.type=m,this.sanitizeURL=K,this.removeEmptyString=de}var _={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(d){_[d]=new y(d,0,!1,d,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(d){var m=d[0];_[m]=new y(m,1,!1,d[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(d){_[d]=new y(d,2,!1,d.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(d){_[d]=new y(d,2,!1,d,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(d){_[d]=new y(d,3,!1,d.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(d){_[d]=new y(d,3,!0,d,null,!1,!1)}),["capture","download"].forEach(function(d){_[d]=new y(d,4,!1,d,null,!1,!1)}),["cols","rows","size","span"].forEach(function(d){_[d]=new y(d,6,!1,d,null,!1,!1)}),["rowSpan","start"].forEach(function(d){_[d]=new y(d,5,!1,d.toLowerCase(),null,!1,!1)});var C=/[\-:]([a-z])/g;function E(d){return d[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(d){var m=d.replace(C,E);_[m]=new y(m,1,!1,d,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(d){var m=d.replace(C,E);_[m]=new y(m,1,!1,d,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(d){var m=d.replace(C,E);_[m]=new y(m,1,!1,d,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(d){_[d]=new y(d,1,!1,d.toLowerCase(),null,!1,!1)}),_.xlinkHref=new y("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(d){_[d]=new y(d,1,!1,d.toLowerCase(),null,!0,!0)});function D(d,m,T,L){var j=_.hasOwnProperty(m)?_[m]:null;(j!==null?j.type!==0:L||!(2<m.length)||m[0]!=="o"&&m[0]!=="O"||m[1]!=="n"&&m[1]!=="N")&&(v(m,T,j,L)&&(T=null),L||j===null?f(m)&&(T===null?d.removeAttribute(m):d.setAttribute(m,""+T)):j.mustUseProperty?d[j.propertyName]=T===null?j.type===3?!1:"":T:(m=j.attributeName,L=j.attributeNamespace,T===null?d.removeAttribute(m):(j=j.type,T=j===3||j===4&&T===!0?"":""+T,L?d.setAttributeNS(L,m,T):d.setAttribute(m,T))))}var I=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,k=Symbol.for("react.element"),P=Symbol.for("react.portal"),N=Symbol.for("react.fragment"),U=Symbol.for("react.strict_mode"),B=Symbol.for("react.profiler"),A=Symbol.for("react.provider"),$=Symbol.for("react.context"),W=Symbol.for("react.forward_ref"),V=Symbol.for("react.suspense"),Q=Symbol.for("react.suspense_list"),ie=Symbol.for("react.memo"),ne=Symbol.for("react.lazy"),ue=Symbol.for("react.offscreen"),se=Symbol.iterator;function ae(d){return d===null||typeof d!="object"?null:(d=se&&d[se]||d["@@iterator"],typeof d=="function"?d:null)}var ce=Object.assign,ee;function pe(d){if(ee===void 0)try{throw Error()}catch(T){var m=T.stack.trim().match(/\n( *(at )?)/);ee=m&&m[1]||""}return`
`+ee+d}var me=!1;function ye(d,m){if(!d||me)return"";me=!0;var T=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(m)if(m=function(){throw Error()},Object.defineProperty(m.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(m,[])}catch(Ze){var L=Ze}Reflect.construct(d,[],m)}else{try{m.call()}catch(Ze){L=Ze}d.call(m.prototype)}else{try{throw Error()}catch(Ze){L=Ze}d()}}catch(Ze){if(Ze&&L&&typeof Ze.stack=="string"){for(var j=Ze.stack.split(`
`),K=L.stack.split(`
`),de=j.length-1,Ce=K.length-1;1<=de&&0<=Ce&&j[de]!==K[Ce];)Ce--;for(;1<=de&&0<=Ce;de--,Ce--)if(j[de]!==K[Ce]){if(de!==1||Ce!==1)do if(de--,Ce--,0>Ce||j[de]!==K[Ce]){var Pe=`
`+j[de].replace(" at new "," at ");return d.displayName&&Pe.includes("<anonymous>")&&(Pe=Pe.replace("<anonymous>",d.displayName)),Pe}while(1<=de&&0<=Ce);break}}}finally{me=!1,Error.prepareStackTrace=T}return(d=d?d.displayName||d.name:"")?pe(d):""}function Oe(d){switch(d.tag){case 5:return pe(d.type);case 16:return pe("Lazy");case 13:return pe("Suspense");case 19:return pe("SuspenseList");case 0:case 2:case 15:return d=ye(d.type,!1),d;case 11:return d=ye(d.type.render,!1),d;case 1:return d=ye(d.type,!0),d;default:return""}}function Le(d){if(d==null)return null;if(typeof d=="function")return d.displayName||d.name||null;if(typeof d=="string")return d;switch(d){case N:return"Fragment";case P:return"Portal";case B:return"Profiler";case U:return"StrictMode";case V:return"Suspense";case Q:return"SuspenseList"}if(typeof d=="object")switch(d.$$typeof){case $:return(d.displayName||"Context")+".Consumer";case A:return(d._context.displayName||"Context")+".Provider";case W:var m=d.render;return d=d.displayName,d||(d=m.displayName||m.name||"",d=d!==""?"ForwardRef("+d+")":"ForwardRef"),d;case ie:return m=d.displayName||null,m!==null?m:Le(d.type)||"Memo";case ne:m=d._payload,d=d._init;try{return Le(d(m))}catch{}}return null}function st(d){var m=d.type;switch(d.tag){case 24:return"Cache";case 9:return(m.displayName||"Context")+".Consumer";case 10:return(m._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return d=m.render,d=d.displayName||d.name||"",m.displayName||(d!==""?"ForwardRef("+d+")":"ForwardRef");case 7:return"Fragment";case 5:return m;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Le(m);case 8:return m===U?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof m=="function")return m.displayName||m.name||null;if(typeof m=="string")return m}return null}function ze(d){switch(typeof d){case"boolean":case"number":case"string":case"undefined":return d;case"object":return d;default:return""}}function pt(d){var m=d.type;return(d=d.nodeName)&&d.toLowerCase()==="input"&&(m==="checkbox"||m==="radio")}function Ye(d){var m=pt(d)?"checked":"value",T=Object.getOwnPropertyDescriptor(d.constructor.prototype,m),L=""+d[m];if(!d.hasOwnProperty(m)&&typeof T<"u"&&typeof T.get=="function"&&typeof T.set=="function"){var j=T.get,K=T.set;return Object.defineProperty(d,m,{configurable:!0,get:function(){return j.call(this)},set:function(de){L=""+de,K.call(this,de)}}),Object.defineProperty(d,m,{enumerable:T.enumerable}),{getValue:function(){return L},setValue:function(de){L=""+de},stopTracking:function(){d._valueTracker=null,delete d[m]}}}}function Pt(d){d._valueTracker||(d._valueTracker=Ye(d))}function Rt(d){if(!d)return!1;var m=d._valueTracker;if(!m)return!0;var T=m.getValue(),L="";return d&&(L=pt(d)?d.checked?"true":"false":d.value),d=L,d!==T?(m.setValue(d),!0):!1}function Ve(d){if(d=d||(typeof document<"u"?document:void 0),typeof d>"u")return null;try{return d.activeElement||d.body}catch{return d.body}}function Ne(d,m){var T=m.checked;return ce({},m,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:T??d._wrapperState.initialChecked})}function Ie(d,m){var T=m.defaultValue==null?"":m.defaultValue,L=m.checked!=null?m.checked:m.defaultChecked;T=ze(m.value!=null?m.value:T),d._wrapperState={initialChecked:L,initialValue:T,controlled:m.type==="checkbox"||m.type==="radio"?m.checked!=null:m.value!=null}}function Ue(d,m){m=m.checked,m!=null&&D(d,"checked",m,!1)}function et(d,m){Ue(d,m);var T=ze(m.value),L=m.type;if(T!=null)L==="number"?(T===0&&d.value===""||d.value!=T)&&(d.value=""+T):d.value!==""+T&&(d.value=""+T);else if(L==="submit"||L==="reset"){d.removeAttribute("value");return}m.hasOwnProperty("value")?dt(d,m.type,T):m.hasOwnProperty("defaultValue")&&dt(d,m.type,ze(m.defaultValue)),m.checked==null&&m.defaultChecked!=null&&(d.defaultChecked=!!m.defaultChecked)}function ot(d,m,T){if(m.hasOwnProperty("value")||m.hasOwnProperty("defaultValue")){var L=m.type;if(!(L!=="submit"&&L!=="reset"||m.value!==void 0&&m.value!==null))return;m=""+d._wrapperState.initialValue,T||m===d.value||(d.value=m),d.defaultValue=m}T=d.name,T!==""&&(d.name=""),d.defaultChecked=!!d._wrapperState.initialChecked,T!==""&&(d.name=T)}function dt(d,m,T){(m!=="number"||Ve(d.ownerDocument)!==d)&&(T==null?d.defaultValue=""+d._wrapperState.initialValue:d.defaultValue!==""+T&&(d.defaultValue=""+T))}var it=Array.isArray;function bt(d,m,T,L){if(d=d.options,m){m={};for(var j=0;j<T.length;j++)m["$"+T[j]]=!0;for(T=0;T<d.length;T++)j=m.hasOwnProperty("$"+d[T].value),d[T].selected!==j&&(d[T].selected=j),j&&L&&(d[T].defaultSelected=!0)}else{for(T=""+ze(T),m=null,j=0;j<d.length;j++){if(d[j].value===T){d[j].selected=!0,L&&(d[j].defaultSelected=!0);return}m!==null||d[j].disabled||(m=d[j])}m!==null&&(m.selected=!0)}}function lt(d,m){if(m.dangerouslySetInnerHTML!=null)throw Error(t(91));return ce({},m,{value:void 0,defaultValue:void 0,children:""+d._wrapperState.initialValue})}function gr(d,m){var T=m.value;if(T==null){if(T=m.children,m=m.defaultValue,T!=null){if(m!=null)throw Error(t(92));if(it(T)){if(1<T.length)throw Error(t(93));T=T[0]}m=T}m==null&&(m=""),T=m}d._wrapperState={initialValue:ze(T)}}function hr(d,m){var T=ze(m.value),L=ze(m.defaultValue);T!=null&&(T=""+T,T!==d.value&&(d.value=T),m.defaultValue==null&&d.defaultValue!==T&&(d.defaultValue=T)),L!=null&&(d.defaultValue=""+L)}function Rr(d){var m=d.textContent;m===d._wrapperState.initialValue&&m!==""&&m!==null&&(d.value=m)}function nr(d){switch(d){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function qt(d,m){return d==null||d==="http://www.w3.org/1999/xhtml"?nr(m):d==="http://www.w3.org/2000/svg"&&m==="foreignObject"?"http://www.w3.org/1999/xhtml":d}var fr,yr=(function(d){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(m,T,L,j){MSApp.execUnsafeLocalFunction(function(){return d(m,T,L,j)})}:d})(function(d,m){if(d.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in d)d.innerHTML=m;else{for(fr=fr||document.createElement("div"),fr.innerHTML="<svg>"+m.valueOf().toString()+"</svg>",m=fr.firstChild;d.firstChild;)d.removeChild(d.firstChild);for(;m.firstChild;)d.appendChild(m.firstChild)}});function Lr(d,m){if(m){var T=d.firstChild;if(T&&T===d.lastChild&&T.nodeType===3){T.nodeValue=m;return}}d.textContent=m}var vt={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Ut=["Webkit","ms","Moz","O"];Object.keys(vt).forEach(function(d){Ut.forEach(function(m){m=m+d.charAt(0).toUpperCase()+d.substring(1),vt[m]=vt[d]})});function rn(d,m,T){return m==null||typeof m=="boolean"||m===""?"":T||typeof m!="number"||m===0||vt.hasOwnProperty(d)&&vt[d]?(""+m).trim():m+"px"}function jt(d,m){d=d.style;for(var T in m)if(m.hasOwnProperty(T)){var L=T.indexOf("--")===0,j=rn(T,m[T],L);T==="float"&&(T="cssFloat"),L?d.setProperty(T,j):d[T]=j}}var br=ce({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Or(d,m){if(m){if(br[d]&&(m.children!=null||m.dangerouslySetInnerHTML!=null))throw Error(t(137,d));if(m.dangerouslySetInnerHTML!=null){if(m.children!=null)throw Error(t(60));if(typeof m.dangerouslySetInnerHTML!="object"||!("__html"in m.dangerouslySetInnerHTML))throw Error(t(61))}if(m.style!=null&&typeof m.style!="object")throw Error(t(62))}}function Hr(d,m){if(d.indexOf("-")===-1)return typeof m.is=="string";switch(d){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ln=null;function Cn(d){return d=d.target||d.srcElement||window,d.correspondingUseElement&&(d=d.correspondingUseElement),d.nodeType===3?d.parentNode:d}var wn=null,Fr=null,oe=null;function fe(d){if(d=gi(d)){if(typeof wn!="function")throw Error(t(280));var m=d.stateNode;m&&(m=iu(m),wn(d.stateNode,d.type,m))}}function Te(d){Fr?oe?oe.push(d):oe=[d]:Fr=d}function je(){if(Fr){var d=Fr,m=oe;if(oe=Fr=null,fe(d),m)for(d=0;d<m.length;d++)fe(m[d])}}function mt(d,m){return d(m)}function St(){}var be=!1;function xe(d,m,T){if(be)return d(m,T);be=!0;try{return mt(d,m,T)}finally{be=!1,(Fr!==null||oe!==null)&&(St(),je())}}function Ae(d,m){var T=d.stateNode;if(T===null)return null;var L=iu(T);if(L===null)return null;T=L[m];e:switch(m){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(L=!L.disabled)||(d=d.type,L=!(d==="button"||d==="input"||d==="select"||d==="textarea")),d=!L;break e;default:d=!1}if(d)return null;if(T&&typeof T!="function")throw Error(t(231,m,typeof T));return T}var Ke=!1;if(o)try{var Xe={};Object.defineProperty(Xe,"passive",{get:function(){Ke=!0}}),window.addEventListener("test",Xe,Xe),window.removeEventListener("test",Xe,Xe)}catch{Ke=!1}function _t(d,m,T,L,j,K,de,Ce,Pe){var Ze=Array.prototype.slice.call(arguments,3);try{m.apply(T,Ze)}catch(It){this.onError(It)}}var Lt=!1,ct=null,yt=!1,Vt=null,Kt={onError:function(d){Lt=!0,ct=d}};function Nt(d,m,T,L,j,K,de,Ce,Pe){Lt=!1,ct=null,_t.apply(Kt,arguments)}function vr(d,m,T,L,j,K,de,Ce,Pe){if(Nt.apply(this,arguments),Lt){if(Lt){var Ze=ct;Lt=!1,ct=null}else throw Error(t(198));yt||(yt=!0,Vt=Ze)}}function Tt(d){var m=d,T=d;if(d.alternate)for(;m.return;)m=m.return;else{d=m;do m=d,(m.flags&4098)!==0&&(T=m.return),d=m.return;while(d)}return m.tag===3?T:null}function xr(d){if(d.tag===13){var m=d.memoizedState;if(m===null&&(d=d.alternate,d!==null&&(m=d.memoizedState)),m!==null)return m.dehydrated}return null}function Zr(d){if(Tt(d)!==d)throw Error(t(188))}function Br(d){var m=d.alternate;if(!m){if(m=Tt(d),m===null)throw Error(t(188));return m!==d?null:d}for(var T=d,L=m;;){var j=T.return;if(j===null)break;var K=j.alternate;if(K===null){if(L=j.return,L!==null){T=L;continue}break}if(j.child===K.child){for(K=j.child;K;){if(K===T)return Zr(j),d;if(K===L)return Zr(j),m;K=K.sibling}throw Error(t(188))}if(T.return!==L.return)T=j,L=K;else{for(var de=!1,Ce=j.child;Ce;){if(Ce===T){de=!0,T=j,L=K;break}if(Ce===L){de=!0,L=j,T=K;break}Ce=Ce.sibling}if(!de){for(Ce=K.child;Ce;){if(Ce===T){de=!0,T=K,L=j;break}if(Ce===L){de=!0,L=K,T=j;break}Ce=Ce.sibling}if(!de)throw Error(t(189))}}if(T.alternate!==L)throw Error(t(190))}if(T.tag!==3)throw Error(t(188));return T.stateNode.current===T?d:m}function jr(d){return d=Br(d),d!==null?Pn(d):null}function Pn(d){if(d.tag===5||d.tag===6)return d;for(d=d.child;d!==null;){var m=Pn(d);if(m!==null)return m;d=d.sibling}return null}var ir=e.unstable_scheduleCallback,Ti=e.unstable_cancelCallback,yn=e.unstable_shouldYield,Cs=e.unstable_requestPaint,nn=e.unstable_now,ws=e.unstable_getCurrentPriorityLevel,hi=e.unstable_ImmediatePriority,si=e.unstable_UserBlockingPriority,Mr=e.unstable_NormalPriority,ke=e.unstable_LowPriority,$e=e.unstable_IdlePriority,Je=null,tt=null;function xt(d){if(tt&&typeof tt.onCommitFiberRoot=="function")try{tt.onCommitFiberRoot(Je,d,void 0,(d.current.flags&128)===128)}catch{}}var kt=Math.clz32?Math.clz32:Wr,Bt=Math.log,Tr=Math.LN2;function Wr(d){return d>>>=0,d===0?32:31-(Bt(d)/Tr|0)|0}var xn=64,Er=4194304;function fi(d){switch(d&-d){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return d&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return d&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return d}}function zr(d,m){var T=d.pendingLanes;if(T===0)return 0;var L=0,j=d.suspendedLanes,K=d.pingedLanes,de=T&268435455;if(de!==0){var Ce=de&~j;Ce!==0?L=fi(Ce):(K&=de,K!==0&&(L=fi(K)))}else de=T&~j,de!==0?L=fi(de):K!==0&&(L=fi(K));if(L===0)return 0;if(m!==0&&m!==L&&(m&j)===0&&(j=L&-L,K=m&-m,j>=K||j===16&&(K&4194240)!==0))return m;if((L&4)!==0&&(L|=T&16),m=d.entangledLanes,m!==0)for(d=d.entanglements,m&=L;0<m;)T=31-kt(m),j=1<<T,L|=d[T],m&=~j;return L}function On(d,m){switch(d){case 1:case 2:case 4:return m+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return m+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function $n(d,m){for(var T=d.suspendedLanes,L=d.pingedLanes,j=d.expirationTimes,K=d.pendingLanes;0<K;){var de=31-kt(K),Ce=1<<de,Pe=j[de];Pe===-1?((Ce&T)===0||(Ce&L)!==0)&&(j[de]=On(Ce,m)):Pe<=m&&(d.expiredLanes|=Ce),K&=~Ce}}function Es(d){return d=d.pendingLanes&-1073741825,d!==0?d:d&1073741824?1073741824:0}function Hc(){var d=xn;return xn<<=1,(xn&4194240)===0&&(xn=64),d}function ks(d){for(var m=[],T=0;31>T;T++)m.push(d);return m}function zi(d,m,T){d.pendingLanes|=m,m!==536870912&&(d.suspendedLanes=0,d.pingedLanes=0),d=d.eventTimes,m=31-kt(m),d[m]=T}function Rn(d,m){var T=d.pendingLanes&~m;d.pendingLanes=m,d.suspendedLanes=0,d.pingedLanes=0,d.expiredLanes&=m,d.mutableReadLanes&=m,d.entangledLanes&=m,m=d.entanglements;var L=d.eventTimes;for(d=d.expirationTimes;0<T;){var j=31-kt(T),K=1<<j;m[j]=0,L[j]=-1,d[j]=-1,T&=~K}}function Xu(d,m){var T=d.entangledLanes|=m;for(d=d.entanglements;T;){var L=31-kt(T),j=1<<L;j&m|d[L]&m&&(d[L]|=m),T&=~j}}var qr=0;function ls(d){return d&=-d,1<d?4<d?(d&268435455)!==0?16:536870912:4:1}var fa,Pi,Wa,Hl,To,Yu=!1,Vl=[],pa=null,Ci=null,Ri=null,ma=new Map,qa=new Map,ga=[],Wl="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Vc(d,m){switch(d){case"focusin":case"focusout":pa=null;break;case"dragenter":case"dragleave":Ci=null;break;case"mouseover":case"mouseout":Ri=null;break;case"pointerover":case"pointerout":ma.delete(m.pointerId);break;case"gotpointercapture":case"lostpointercapture":qa.delete(m.pointerId)}}function Hi(d,m,T,L,j,K){return d===null||d.nativeEvent!==K?(d={blockedOn:m,domEventName:T,eventSystemFlags:L,nativeEvent:K,targetContainers:[j]},m!==null&&(m=gi(m),m!==null&&Pi(m)),d):(d.eventSystemFlags|=L,m=d.targetContainers,j!==null&&m.indexOf(j)===-1&&m.push(j),d)}function Ga(d,m,T,L,j){switch(m){case"focusin":return pa=Hi(pa,d,m,T,L,j),!0;case"dragenter":return Ci=Hi(Ci,d,m,T,L,j),!0;case"mouseover":return Ri=Hi(Ri,d,m,T,L,j),!0;case"pointerover":var K=j.pointerId;return ma.set(K,Hi(ma.get(K)||null,d,m,T,L,j)),!0;case"gotpointercapture":return K=j.pointerId,qa.set(K,Hi(qa.get(K)||null,d,m,T,L,j)),!0}return!1}function ql(d){var m=pn(d.target);if(m!==null){var T=Tt(m);if(T!==null){if(m=T.tag,m===13){if(m=xr(T),m!==null){d.blockedOn=m,To(d.priority,function(){Wa(T)});return}}else if(m===3&&T.stateNode.current.memoizedState.isDehydrated){d.blockedOn=T.tag===3?T.stateNode.containerInfo:null;return}}}d.blockedOn=null}function Gl(d){if(d.blockedOn!==null)return!1;for(var m=d.targetContainers;0<m.length;){var T=Ju(d.domEventName,d.eventSystemFlags,m[0],d.nativeEvent);if(T===null){T=d.nativeEvent;var L=new T.constructor(T.type,T);ln=L,T.target.dispatchEvent(L),ln=null}else return m=gi(T),m!==null&&Pi(m),d.blockedOn=T,!1;m.shift()}return!0}function dl(d,m,T){Gl(d)&&T.delete(m)}function Ka(){Yu=!1,pa!==null&&Gl(pa)&&(pa=null),Ci!==null&&Gl(Ci)&&(Ci=null),Ri!==null&&Gl(Ri)&&(Ri=null),ma.forEach(dl),qa.forEach(dl)}function As(d,m){d.blockedOn===m&&(d.blockedOn=null,Yu||(Yu=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Ka)))}function us(d){function m(j){return As(j,d)}if(0<Vl.length){As(Vl[0],d);for(var T=1;T<Vl.length;T++){var L=Vl[T];L.blockedOn===d&&(L.blockedOn=null)}}for(pa!==null&&As(pa,d),Ci!==null&&As(Ci,d),Ri!==null&&As(Ri,d),ma.forEach(m),qa.forEach(m),T=0;T<ga.length;T++)L=ga[T],L.blockedOn===d&&(L.blockedOn=null);for(;0<ga.length&&(T=ga[0],T.blockedOn===null);)ql(T),T.blockedOn===null&&ga.shift()}var va=I.ReactCurrentBatchConfig,hl=!0;function Wc(d,m,T,L){var j=qr,K=va.transition;va.transition=null;try{qr=1,Qu(d,m,T,L)}finally{qr=j,va.transition=K}}function qc(d,m,T,L){var j=qr,K=va.transition;va.transition=null;try{qr=4,Qu(d,m,T,L)}finally{qr=j,va.transition=K}}function Qu(d,m,T,L){if(hl){var j=Ju(d,m,T,L);if(j===null)Vn(d,m,L,Kl,T),Vc(d,L);else if(Ga(j,d,m,T,L))L.stopPropagation();else if(Vc(d,L),m&4&&-1<Wl.indexOf(d)){for(;j!==null;){var K=gi(j);if(K!==null&&fa(K),K=Ju(d,m,T,L),K===null&&Vn(d,m,L,Kl,T),K===j)break;j=K}j!==null&&L.stopPropagation()}else Vn(d,m,L,null,T)}}var Kl=null;function Ju(d,m,T,L){if(Kl=null,d=Cn(L),d=pn(d),d!==null)if(m=Tt(d),m===null)d=null;else if(T=m.tag,T===13){if(d=xr(m),d!==null)return d;d=null}else if(T===3){if(m.stateNode.current.memoizedState.isDehydrated)return m.tag===3?m.stateNode.containerInfo:null;d=null}else m!==d&&(d=null);return Kl=d,null}function Vs(d){switch(d){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ws()){case hi:return 1;case si:return 4;case Mr:case ke:return 16;case $e:return 536870912;default:return 16}default:return 16}}var ya=null,cs=null,Ds=null;function Gc(){if(Ds)return Ds;var d,m=cs,T=m.length,L,j="value"in ya?ya.value:ya.textContent,K=j.length;for(d=0;d<T&&m[d]===j[d];d++);var de=T-d;for(L=1;L<=de&&m[T-L]===j[K-L];L++);return Ds=j.slice(d,1<L?1-L:void 0)}function un(d){var m=d.keyCode;return"charCode"in d?(d=d.charCode,d===0&&m===13&&(d=13)):d=m,d===10&&(d=13),32<=d||d===13?d:0}function Xl(){return!0}function Kc(){return!1}function Li(d){function m(T,L,j,K,de){this._reactName=T,this._targetInst=j,this.type=L,this.nativeEvent=K,this.target=de,this.currentTarget=null;for(var Ce in d)d.hasOwnProperty(Ce)&&(T=d[Ce],this[Ce]=T?T(K):K[Ce]);return this.isDefaultPrevented=(K.defaultPrevented!=null?K.defaultPrevented:K.returnValue===!1)?Xl:Kc,this.isPropagationStopped=Kc,this}return ce(m.prototype,{preventDefault:function(){this.defaultPrevented=!0;var T=this.nativeEvent;T&&(T.preventDefault?T.preventDefault():typeof T.returnValue!="unknown"&&(T.returnValue=!1),this.isDefaultPrevented=Xl)},stopPropagation:function(){var T=this.nativeEvent;T&&(T.stopPropagation?T.stopPropagation():typeof T.cancelBubble!="unknown"&&(T.cancelBubble=!0),this.isPropagationStopped=Xl)},persist:function(){},isPersistent:Xl}),m}var Oi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(d){return d.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ds=Li(Oi),wi=ce({},Oi,{view:0,detail:0}),Xa=Li(wi),En,Hn,Vi,Ya=ce({},wi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Yl,button:0,buttons:0,relatedTarget:function(d){return d.relatedTarget===void 0?d.fromElement===d.srcElement?d.toElement:d.fromElement:d.relatedTarget},movementX:function(d){return"movementX"in d?d.movementX:(d!==Vi&&(Vi&&d.type==="mousemove"?(En=d.screenX-Vi.screenX,Hn=d.screenY-Vi.screenY):Hn=En=0,Vi=d),En)},movementY:function(d){return"movementY"in d?d.movementY:Hn}}),Co=Li(Ya),fl=ce({},Ya,{dataTransfer:0}),ih=Li(fl),sh=ce({},wi,{relatedTarget:0}),pl=Li(sh),Zu=ce({},Oi,{animationName:0,elapsedTime:0,pseudoElement:0}),Qa=Li(Zu),Ws=ce({},Oi,{clipboardData:function(d){return"clipboardData"in d?d.clipboardData:window.clipboardData}}),Ja=Li(Ws),Mi=ce({},Oi,{data:0}),Xc=Li(Mi),wo={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Za={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ec={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Yc(d){var m=this.nativeEvent;return m.getModifierState?m.getModifierState(d):(d=ec[d])?!!m[d]:!1}function Yl(){return Yc}var Qc=ce({},wi,{key:function(d){if(d.key){var m=wo[d.key]||d.key;if(m!=="Unidentified")return m}return d.type==="keypress"?(d=un(d),d===13?"Enter":String.fromCharCode(d)):d.type==="keydown"||d.type==="keyup"?Za[d.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Yl,charCode:function(d){return d.type==="keypress"?un(d):0},keyCode:function(d){return d.type==="keydown"||d.type==="keyup"?d.keyCode:0},which:function(d){return d.type==="keypress"?un(d):d.type==="keydown"||d.type==="keyup"?d.keyCode:0}}),xa=Li(Qc),Jc=ce({},Ya,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Eo=Li(Jc),Zc=ce({},wi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Yl}),ed=Li(Zc),ko=ce({},Oi,{propertyName:0,elapsedTime:0,pseudoElement:0}),Ao=Li(ko),ah=ce({},Ya,{deltaX:function(d){return"deltaX"in d?d.deltaX:"wheelDeltaX"in d?-d.wheelDeltaX:0},deltaY:function(d){return"deltaY"in d?d.deltaY:"wheelDeltaY"in d?-d.wheelDeltaY:"wheelDelta"in d?-d.wheelDelta:0},deltaZ:0,deltaMode:0}),oh=Li(ah),lh=[9,13,27,32],ml=o&&"CompositionEvent"in window,gl=null;o&&"documentMode"in document&&(gl=document.documentMode);var tc=o&&"TextEvent"in window&&!gl,Ql=o&&(!ml||gl&&8<gl&&11>=gl),td=" ",qs=!1;function sn(d,m){switch(d){case"keyup":return lh.indexOf(m.keyCode)!==-1;case"keydown":return m.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Is(d){return d=d.detail,typeof d=="object"&&"data"in d?d.data:null}var cn=!1;function Wi(d,m){switch(d){case"compositionend":return Is(m);case"keypress":return m.which!==32?null:(qs=!0,td);case"textInput":return d=m.data,d===td&&qs?null:d;default:return null}}function uh(d,m){if(cn)return d==="compositionend"||!ml&&sn(d,m)?(d=Gc(),Ds=cs=ya=null,cn=!1,d):null;switch(d){case"paste":return null;case"keypress":if(!(m.ctrlKey||m.altKey||m.metaKey)||m.ctrlKey&&m.altKey){if(m.char&&1<m.char.length)return m.char;if(m.which)return String.fromCharCode(m.which)}return null;case"compositionend":return Ql&&m.locale!=="ko"?null:m.data;default:return null}}var rd={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ps(d){var m=d&&d.nodeName&&d.nodeName.toLowerCase();return m==="input"?!!rd[d.type]:m==="textarea"}function nd(d,m,T,L){Te(L),m=ru(m,"onChange"),0<m.length&&(T=new ds("onChange","change",null,T,L),d.push({event:T,listeners:m}))}var vl=null,yl=null;function rc(d){wf(d,0)}function Jl(d){var m=Ro(d);if(Rt(m))return d}function ch(d,m){if(d==="change")return m}var nc=!1;if(o){var le;if(o){var F="oninput"in document;if(!F){var H=document.createElement("div");H.setAttribute("oninput","return;"),F=typeof H.oninput=="function"}le=F}else le=!1;nc=le&&(!document.documentMode||9<document.documentMode)}function z(){vl&&(vl.detachEvent("onpropertychange",q),yl=vl=null)}function q(d){if(d.propertyName==="value"&&Jl(yl)){var m=[];nd(m,yl,d,Cn(d)),xe(rc,m)}}function Z(d,m,T){d==="focusin"?(z(),vl=m,yl=T,vl.attachEvent("onpropertychange",q)):d==="focusout"&&z()}function te(d){if(d==="selectionchange"||d==="keyup"||d==="keydown")return Jl(yl)}function ge(d,m){if(d==="click")return Jl(m)}function _e(d,m){if(d==="input"||d==="change")return Jl(m)}function De(d,m){return d===m&&(d!==0||1/d===1/m)||d!==d&&m!==m}var we=typeof Object.is=="function"?Object.is:De;function Re(d,m){if(we(d,m))return!0;if(typeof d!="object"||d===null||typeof m!="object"||m===null)return!1;var T=Object.keys(d),L=Object.keys(m);if(T.length!==L.length)return!1;for(L=0;L<T.length;L++){var j=T[L];if(!l.call(m,j)||!we(d[j],m[j]))return!1}return!0}function at(d){for(;d&&d.firstChild;)d=d.firstChild;return d}function Mt(d,m){var T=at(d);d=0;for(var L;T;){if(T.nodeType===3){if(L=d+T.textContent.length,d<=m&&L>=m)return{node:T,offset:m-d};d=L}e:{for(;T;){if(T.nextSibling){T=T.nextSibling;break e}T=T.parentNode}T=void 0}T=at(T)}}function zt(d,m){return d&&m?d===m?!0:d&&d.nodeType===3?!1:m&&m.nodeType===3?zt(d,m.parentNode):"contains"in d?d.contains(m):d.compareDocumentPosition?!!(d.compareDocumentPosition(m)&16):!1:!1}function nt(){for(var d=window,m=Ve();m instanceof d.HTMLIFrameElement;){try{var T=typeof m.contentWindow.location.href=="string"}catch{T=!1}if(T)d=m.contentWindow;else break;m=Ve(d.document)}return m}function ar(d){var m=d&&d.nodeName&&d.nodeName.toLowerCase();return m&&(m==="input"&&(d.type==="text"||d.type==="search"||d.type==="tel"||d.type==="url"||d.type==="password")||m==="textarea"||d.contentEditable==="true")}function In(d){var m=nt(),T=d.focusedElem,L=d.selectionRange;if(m!==T&&T&&T.ownerDocument&&zt(T.ownerDocument.documentElement,T)){if(L!==null&&ar(T)){if(m=L.start,d=L.end,d===void 0&&(d=m),"selectionStart"in T)T.selectionStart=m,T.selectionEnd=Math.min(d,T.value.length);else if(d=(m=T.ownerDocument||document)&&m.defaultView||window,d.getSelection){d=d.getSelection();var j=T.textContent.length,K=Math.min(L.start,j);L=L.end===void 0?K:Math.min(L.end,j),!d.extend&&K>L&&(j=L,L=K,K=j),j=Mt(T,K);var de=Mt(T,L);j&&de&&(d.rangeCount!==1||d.anchorNode!==j.node||d.anchorOffset!==j.offset||d.focusNode!==de.node||d.focusOffset!==de.offset)&&(m=m.createRange(),m.setStart(j.node,j.offset),d.removeAllRanges(),K>L?(d.addRange(m),d.extend(de.node,de.offset)):(m.setEnd(de.node,de.offset),d.addRange(m)))}}for(m=[],d=T;d=d.parentNode;)d.nodeType===1&&m.push({element:d,left:d.scrollLeft,top:d.scrollTop});for(typeof T.focus=="function"&&T.focus(),T=0;T<m.length;T++)d=m[T],d.element.scrollLeft=d.left,d.element.scrollTop=d.top}}var pi=o&&"documentMode"in document&&11>=document.documentMode,qi=null,xl=null,Do=null,Io=!1;function _l(d,m,T){var L=T.window===T?T.document:T.nodeType===9?T:T.ownerDocument;Io||qi==null||qi!==Ve(L)||(L=qi,"selectionStart"in L&&ar(L)?L={start:L.selectionStart,end:L.selectionEnd}:(L=(L.ownerDocument&&L.ownerDocument.defaultView||window).getSelection(),L={anchorNode:L.anchorNode,anchorOffset:L.anchorOffset,focusNode:L.focusNode,focusOffset:L.focusOffset}),Do&&Re(Do,L)||(Do=L,L=ru(xl,"onSelect"),0<L.length&&(m=new ds("onSelect","select",null,m,T),d.push({event:m,listeners:L}),m.target=qi)))}function _a(d,m){var T={};return T[d.toLowerCase()]=m.toLowerCase(),T["Webkit"+d]="webkit"+m,T["Moz"+d]="moz"+m,T}var Gs={animationend:_a("Animation","AnimationEnd"),animationiteration:_a("Animation","AnimationIteration"),animationstart:_a("Animation","AnimationStart"),transitionend:_a("Transition","TransitionEnd")},_n={},eo={};o&&(eo=document.createElement("div").style,"AnimationEvent"in window||(delete Gs.animationend.animation,delete Gs.animationiteration.animation,delete Gs.animationstart.animation),"TransitionEvent"in window||delete Gs.transitionend.transition);function Gi(d){if(_n[d])return _n[d];if(!Gs[d])return d;var m=Gs[d],T;for(T in m)if(m.hasOwnProperty(T)&&T in eo)return _n[d]=m[T];return d}var Zl=Gi("animationend"),Tf=Gi("animationiteration"),eu=Gi("animationstart"),tu=Gi("transitionend"),id=new Map,Po="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ki(d,m){id.set(d,m),s(m,[d])}for(var dh=0;dh<Po.length;dh++){var hh=Po[dh],qm=hh.toLowerCase(),Gm=hh[0].toUpperCase()+hh.slice(1);Ki(qm,"on"+Gm)}Ki(Zl,"onAnimationEnd"),Ki(Tf,"onAnimationIteration"),Ki(eu,"onAnimationStart"),Ki("dblclick","onDoubleClick"),Ki("focusin","onFocus"),Ki("focusout","onBlur"),Ki(tu,"onTransitionEnd"),a("onMouseEnter",["mouseout","mouseover"]),a("onMouseLeave",["mouseout","mouseover"]),a("onPointerEnter",["pointerout","pointerover"]),a("onPointerLeave",["pointerout","pointerover"]),s("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),s("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),s("onBeforeInput",["compositionend","keypress","textInput","paste"]),s("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ic="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),sc=new Set("cancel close invalid load scroll toggle".split(" ").concat(ic));function Cf(d,m,T){var L=d.type||"unknown-event";d.currentTarget=T,vr(L,m,void 0,d),d.currentTarget=null}function wf(d,m){m=(m&4)!==0;for(var T=0;T<d.length;T++){var L=d[T],j=L.event;L=L.listeners;e:{var K=void 0;if(m)for(var de=L.length-1;0<=de;de--){var Ce=L[de],Pe=Ce.instance,Ze=Ce.currentTarget;if(Ce=Ce.listener,Pe!==K&&j.isPropagationStopped())break e;Cf(j,Ce,Ze),K=Pe}else for(de=0;de<L.length;de++){if(Ce=L[de],Pe=Ce.instance,Ze=Ce.currentTarget,Ce=Ce.listener,Pe!==K&&j.isPropagationStopped())break e;Cf(j,Ce,Ze),K=Pe}}}if(yt)throw d=Vt,yt=!1,Vt=null,d}function bn(d,m){var T=m[Ct];T===void 0&&(T=m[Ct]=new Set);var L=d+"__bubble";T.has(L)||(dn(m,d,2,!1),T.add(L))}function hs(d,m,T){var L=0;m&&(L|=4),dn(T,d,L,m)}var or="_reactListening"+Math.random().toString(36).slice(2);function mi(d){if(!d[or]){d[or]=!0,n.forEach(function(T){T!=="selectionchange"&&(sc.has(T)||hs(T,!1,d),hs(T,!0,d))});var m=d.nodeType===9?d:d.ownerDocument;m===null||m[or]||(m[or]=!0,hs("selectionchange",!1,m))}}function dn(d,m,T,L){switch(Vs(m)){case 1:var j=Wc;break;case 4:j=qc;break;default:j=Qu}T=j.bind(null,m,T,d),j=void 0,!Ke||m!=="touchstart"&&m!=="touchmove"&&m!=="wheel"||(j=!0),L?j!==void 0?d.addEventListener(m,T,{capture:!0,passive:j}):d.addEventListener(m,T,!0):j!==void 0?d.addEventListener(m,T,{passive:j}):d.addEventListener(m,T,!1)}function Vn(d,m,T,L,j){var K=L;if((m&1)===0&&(m&2)===0&&L!==null)e:for(;;){if(L===null)return;var de=L.tag;if(de===3||de===4){var Ce=L.stateNode.containerInfo;if(Ce===j||Ce.nodeType===8&&Ce.parentNode===j)break;if(de===4)for(de=L.return;de!==null;){var Pe=de.tag;if((Pe===3||Pe===4)&&(Pe=de.stateNode.containerInfo,Pe===j||Pe.nodeType===8&&Pe.parentNode===j))return;de=de.return}for(;Ce!==null;){if(de=pn(Ce),de===null)return;if(Pe=de.tag,Pe===5||Pe===6){L=K=de;continue e}Ce=Ce.parentNode}}L=L.return}xe(function(){var Ze=K,It=Cn(T),Ft=[];e:{var At=id.get(d);if(At!==void 0){var Xt=ds,lr=d;switch(d){case"keypress":if(un(T)===0)break e;case"keydown":case"keyup":Xt=xa;break;case"focusin":lr="focus",Xt=pl;break;case"focusout":lr="blur",Xt=pl;break;case"beforeblur":case"afterblur":Xt=pl;break;case"click":if(T.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Xt=Co;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Xt=ih;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Xt=ed;break;case Zl:case Tf:case eu:Xt=Qa;break;case tu:Xt=Ao;break;case"scroll":Xt=Xa;break;case"wheel":Xt=oh;break;case"copy":case"cut":case"paste":Xt=Ja;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Xt=Eo}var dr=(m&4)!==0,vi=!dr&&d==="scroll",He=dr?At!==null?At+"Capture":null:At;dr=[];for(var Fe=Ze,Ge;Fe!==null;){Ge=Fe;var $t=Ge.stateNode;if(Ge.tag===5&&$t!==null&&(Ge=$t,He!==null&&($t=Ae(Fe,He),$t!=null&&dr.push(ac(Fe,$t,Ge)))),vi)break;Fe=Fe.return}0<dr.length&&(At=new Xt(At,lr,null,T,It),Ft.push({event:At,listeners:dr}))}}if((m&7)===0){e:{if(At=d==="mouseover"||d==="pointerover",Xt=d==="mouseout"||d==="pointerout",At&&T!==ln&&(lr=T.relatedTarget||T.fromElement)&&(pn(lr)||lr[Ee]))break e;if((Xt||At)&&(At=It.window===It?It:(At=It.ownerDocument)?At.defaultView||At.parentWindow:window,Xt?(lr=T.relatedTarget||T.toElement,Xt=Ze,lr=lr?pn(lr):null,lr!==null&&(vi=Tt(lr),lr!==vi||lr.tag!==5&&lr.tag!==6)&&(lr=null)):(Xt=null,lr=Ze),Xt!==lr)){if(dr=Co,$t="onMouseLeave",He="onMouseEnter",Fe="mouse",(d==="pointerout"||d==="pointerover")&&(dr=Eo,$t="onPointerLeave",He="onPointerEnter",Fe="pointer"),vi=Xt==null?At:Ro(Xt),Ge=lr==null?At:Ro(lr),At=new dr($t,Fe+"leave",Xt,T,It),At.target=vi,At.relatedTarget=Ge,$t=null,pn(It)===Ze&&(dr=new dr(He,Fe+"enter",lr,T,It),dr.target=Ge,dr.relatedTarget=vi,$t=dr),vi=$t,Xt&&lr)t:{for(dr=Xt,He=lr,Fe=0,Ge=dr;Ge;Ge=nu(Ge))Fe++;for(Ge=0,$t=He;$t;$t=nu($t))Ge++;for(;0<Fe-Ge;)dr=nu(dr),Fe--;for(;0<Ge-Fe;)He=nu(He),Ge--;for(;Fe--;){if(dr===He||He!==null&&dr===He.alternate)break t;dr=nu(dr),He=nu(He)}dr=null}else dr=null;Xt!==null&&Ef(Ft,At,Xt,dr,!1),lr!==null&&vi!==null&&Ef(Ft,vi,lr,dr,!0)}}e:{if(At=Ze?Ro(Ze):window,Xt=At.nodeName&&At.nodeName.toLowerCase(),Xt==="select"||Xt==="input"&&At.type==="file")var pr=ch;else if(Ps(At))if(nc)pr=_e;else{pr=te;var Cr=Z}else(Xt=At.nodeName)&&Xt.toLowerCase()==="input"&&(At.type==="checkbox"||At.type==="radio")&&(pr=ge);if(pr&&(pr=pr(d,Ze))){nd(Ft,pr,T,It);break e}Cr&&Cr(d,At,Ze),d==="focusout"&&(Cr=At._wrapperState)&&Cr.controlled&&At.type==="number"&&dt(At,"number",At.value)}switch(Cr=Ze?Ro(Ze):window,d){case"focusin":(Ps(Cr)||Cr.contentEditable==="true")&&(qi=Cr,xl=Ze,Do=null);break;case"focusout":Do=xl=qi=null;break;case"mousedown":Io=!0;break;case"contextmenu":case"mouseup":case"dragend":Io=!1,_l(Ft,T,It);break;case"selectionchange":if(pi)break;case"keydown":case"keyup":_l(Ft,T,It)}var wr;if(ml)e:{switch(d){case"compositionstart":var Pr="onCompositionStart";break e;case"compositionend":Pr="onCompositionEnd";break e;case"compositionupdate":Pr="onCompositionUpdate";break e}Pr=void 0}else cn?sn(d,T)&&(Pr="onCompositionEnd"):d==="keydown"&&T.keyCode===229&&(Pr="onCompositionStart");Pr&&(Ql&&T.locale!=="ko"&&(cn||Pr!=="onCompositionStart"?Pr==="onCompositionEnd"&&cn&&(wr=Gc()):(ya=It,cs="value"in ya?ya.value:ya.textContent,cn=!0)),Cr=ru(Ze,Pr),0<Cr.length&&(Pr=new Xc(Pr,d,null,T,It),Ft.push({event:Pr,listeners:Cr}),wr?Pr.data=wr:(wr=Is(T),wr!==null&&(Pr.data=wr)))),(wr=tc?Wi(d,T):uh(d,T))&&(Ze=ru(Ze,"onBeforeInput"),0<Ze.length&&(It=new Xc("onBeforeInput","beforeinput",null,T,It),Ft.push({event:It,listeners:Ze}),It.data=wr))}wf(Ft,m)})}function ac(d,m,T){return{instance:d,listener:m,currentTarget:T}}function ru(d,m){for(var T=m+"Capture",L=[];d!==null;){var j=d,K=j.stateNode;j.tag===5&&K!==null&&(j=K,K=Ae(d,T),K!=null&&L.unshift(ac(d,K,j)),K=Ae(d,m),K!=null&&L.push(ac(d,K,j))),d=d.return}return L}function nu(d){if(d===null)return null;do d=d.return;while(d&&d.tag!==5);return d||null}function Ef(d,m,T,L,j){for(var K=m._reactName,de=[];T!==null&&T!==L;){var Ce=T,Pe=Ce.alternate,Ze=Ce.stateNode;if(Pe!==null&&Pe===L)break;Ce.tag===5&&Ze!==null&&(Ce=Ze,j?(Pe=Ae(T,K),Pe!=null&&de.unshift(ac(T,Pe,Ce))):j||(Pe=Ae(T,K),Pe!=null&&de.push(ac(T,Pe,Ce)))),T=T.return}de.length!==0&&d.push({event:m,listeners:de})}var Km=/\r\n?/g,Xm=/\u0000|\uFFFD/g;function kf(d){return(typeof d=="string"?d:""+d).replace(Km,`
`).replace(Xm,"")}function sd(d,m,T){if(m=kf(m),kf(d)!==m&&T)throw Error(t(425))}function ad(){}var oc=null,p=null;function x(d,m){return d==="textarea"||d==="noscript"||typeof m.children=="string"||typeof m.children=="number"||typeof m.dangerouslySetInnerHTML=="object"&&m.dangerouslySetInnerHTML!==null&&m.dangerouslySetInnerHTML.__html!=null}var S=typeof setTimeout=="function"?setTimeout:void 0,b=typeof clearTimeout=="function"?clearTimeout:void 0,w=typeof Promise=="function"?Promise:void 0,R=typeof queueMicrotask=="function"?queueMicrotask:typeof w<"u"?function(d){return w.resolve(null).then(d).catch(G)}:S;function G(d){setTimeout(function(){throw d})}function Y(d,m){var T=m,L=0;do{var j=T.nextSibling;if(d.removeChild(T),j&&j.nodeType===8)if(T=j.data,T==="/$"){if(L===0){d.removeChild(j),us(m);return}L--}else T!=="$"&&T!=="$?"&&T!=="$!"||L++;T=j}while(T);us(m)}function J(d){for(;d!=null;d=d.nextSibling){var m=d.nodeType;if(m===1||m===3)break;if(m===8){if(m=d.data,m==="$"||m==="$!"||m==="$?")break;if(m==="/$")return null}}return d}function re(d){d=d.previousSibling;for(var m=0;d;){if(d.nodeType===8){var T=d.data;if(T==="$"||T==="$!"||T==="$?"){if(m===0)return d;m--}else T==="/$"&&m++}d=d.previousSibling}return null}var he=Math.random().toString(36).slice(2),ve="__reactFiber$"+he,qe="__reactProps$"+he,Ee="__reactContainer$"+he,Ct="__reactEvents$"+he,Wt="__reactListeners$"+he,Gr="__reactHandles$"+he;function pn(d){var m=d[ve];if(m)return m;for(var T=d.parentNode;T;){if(m=T[Ee]||T[ve]){if(T=m.alternate,m.child!==null||T!==null&&T.child!==null)for(d=re(d);d!==null;){if(T=d[ve])return T;d=re(d)}return m}d=T,T=d.parentNode}return null}function gi(d){return d=d[ve]||d[Ee],!d||d.tag!==5&&d.tag!==6&&d.tag!==13&&d.tag!==3?null:d}function Ro(d){if(d.tag===5||d.tag===6)return d.stateNode;throw Error(t(33))}function iu(d){return d[qe]||null}var lc=[],ba=-1;function Sa(d){return{current:d}}function Jt(d){0>ba||(d.current=lc[ba],lc[ba]=null,ba--)}function gn(d,m){ba++,lc[ba]=d.current,d.current=m}var Kn={},Rs=Sa(Kn),Ta=Sa(!1),fh=Kn;function Af(d,m){var T=d.type.contextTypes;if(!T)return Kn;var L=d.stateNode;if(L&&L.__reactInternalMemoizedUnmaskedChildContext===m)return L.__reactInternalMemoizedMaskedChildContext;var j={},K;for(K in T)j[K]=m[K];return L&&(d=d.stateNode,d.__reactInternalMemoizedUnmaskedChildContext=m,d.__reactInternalMemoizedMaskedChildContext=j),j}function Ca(d){return d=d.childContextTypes,d!=null}function Bv(){Jt(Ta),Jt(Rs)}function FD(d,m,T){if(Rs.current!==Kn)throw Error(t(168));gn(Rs,m),gn(Ta,T)}function BD(d,m,T){var L=d.stateNode;if(m=m.childContextTypes,typeof L.getChildContext!="function")return T;L=L.getChildContext();for(var j in L)if(!(j in m))throw Error(t(108,st(d)||"Unknown",j));return ce({},T,L)}function Nv(d){return d=(d=d.stateNode)&&d.__reactInternalMemoizedMergedChildContext||Kn,fh=Rs.current,gn(Rs,d),gn(Ta,Ta.current),!0}function ND(d,m,T){var L=d.stateNode;if(!L)throw Error(t(169));T?(d=BD(d,m,fh),L.__reactInternalMemoizedMergedChildContext=d,Jt(Ta),Jt(Rs),gn(Rs,d)):Jt(Ta),gn(Ta,T)}var uc=null,Uv=!1,pT=!1;function UD(d){uc===null?uc=[d]:uc.push(d)}function Rz(d){Uv=!0,UD(d)}function od(){if(!pT&&uc!==null){pT=!0;var d=0,m=qr;try{var T=uc;for(qr=1;d<T.length;d++){var L=T[d];do L=L(!0);while(L!==null)}uc=null,Uv=!1}catch(j){throw uc!==null&&(uc=uc.slice(d+1)),ir(hi,od),j}finally{qr=m,pT=!1}}return null}var Df=[],If=0,$v=null,jv=0,Lo=[],Oo=0,ph=null,cc=1,dc="";function mh(d,m){Df[If++]=jv,Df[If++]=$v,$v=d,jv=m}function $D(d,m,T){Lo[Oo++]=cc,Lo[Oo++]=dc,Lo[Oo++]=ph,ph=d;var L=cc;d=dc;var j=32-kt(L)-1;L&=~(1<<j),T+=1;var K=32-kt(m)+j;if(30<K){var de=j-j%5;K=(L&(1<<de)-1).toString(32),L>>=de,j-=de,cc=1<<32-kt(m)+j|T<<j|L,dc=K+d}else cc=1<<K|T<<j|L,dc=d}function mT(d){d.return!==null&&(mh(d,1),$D(d,1,0))}function gT(d){for(;d===$v;)$v=Df[--If],Df[If]=null,jv=Df[--If],Df[If]=null;for(;d===ph;)ph=Lo[--Oo],Lo[Oo]=null,dc=Lo[--Oo],Lo[Oo]=null,cc=Lo[--Oo],Lo[Oo]=null}var to=null,ro=null,Xn=!1,bl=null;function jD(d,m){var T=No(5,null,null,0);T.elementType="DELETED",T.stateNode=m,T.return=d,m=d.deletions,m===null?(d.deletions=[T],d.flags|=16):m.push(T)}function zD(d,m){switch(d.tag){case 5:var T=d.type;return m=m.nodeType!==1||T.toLowerCase()!==m.nodeName.toLowerCase()?null:m,m!==null?(d.stateNode=m,to=d,ro=J(m.firstChild),!0):!1;case 6:return m=d.pendingProps===""||m.nodeType!==3?null:m,m!==null?(d.stateNode=m,to=d,ro=null,!0):!1;case 13:return m=m.nodeType!==8?null:m,m!==null?(T=ph!==null?{id:cc,overflow:dc}:null,d.memoizedState={dehydrated:m,treeContext:T,retryLane:1073741824},T=No(18,null,null,0),T.stateNode=m,T.return=d,d.child=T,to=d,ro=null,!0):!1;default:return!1}}function vT(d){return(d.mode&1)!==0&&(d.flags&128)===0}function yT(d){if(Xn){var m=ro;if(m){var T=m;if(!zD(d,m)){if(vT(d))throw Error(t(418));m=J(T.nextSibling);var L=to;m&&zD(d,m)?jD(L,T):(d.flags=d.flags&-4097|2,Xn=!1,to=d)}}else{if(vT(d))throw Error(t(418));d.flags=d.flags&-4097|2,Xn=!1,to=d}}}function HD(d){for(d=d.return;d!==null&&d.tag!==5&&d.tag!==3&&d.tag!==13;)d=d.return;to=d}function zv(d){if(d!==to)return!1;if(!Xn)return HD(d),Xn=!0,!1;var m;if((m=d.tag!==3)&&!(m=d.tag!==5)&&(m=d.type,m=m!=="head"&&m!=="body"&&!x(d.type,d.memoizedProps)),m&&(m=ro)){if(vT(d))throw VD(),Error(t(418));for(;m;)jD(d,m),m=J(m.nextSibling)}if(HD(d),d.tag===13){if(d=d.memoizedState,d=d!==null?d.dehydrated:null,!d)throw Error(t(317));e:{for(d=d.nextSibling,m=0;d;){if(d.nodeType===8){var T=d.data;if(T==="/$"){if(m===0){ro=J(d.nextSibling);break e}m--}else T!=="$"&&T!=="$!"&&T!=="$?"||m++}d=d.nextSibling}ro=null}}else ro=to?J(d.stateNode.nextSibling):null;return!0}function VD(){for(var d=ro;d;)d=J(d.nextSibling)}function Pf(){ro=to=null,Xn=!1}function xT(d){bl===null?bl=[d]:bl.push(d)}var Lz=I.ReactCurrentBatchConfig;function Ym(d,m,T){if(d=T.ref,d!==null&&typeof d!="function"&&typeof d!="object"){if(T._owner){if(T=T._owner,T){if(T.tag!==1)throw Error(t(309));var L=T.stateNode}if(!L)throw Error(t(147,d));var j=L,K=""+d;return m!==null&&m.ref!==null&&typeof m.ref=="function"&&m.ref._stringRef===K?m.ref:(m=function(de){var Ce=j.refs;de===null?delete Ce[K]:Ce[K]=de},m._stringRef=K,m)}if(typeof d!="string")throw Error(t(284));if(!T._owner)throw Error(t(290,d))}return d}function Hv(d,m){throw d=Object.prototype.toString.call(m),Error(t(31,d==="[object Object]"?"object with keys {"+Object.keys(m).join(", ")+"}":d))}function WD(d){var m=d._init;return m(d._payload)}function qD(d){function m(He,Fe){if(d){var Ge=He.deletions;Ge===null?(He.deletions=[Fe],He.flags|=16):Ge.push(Fe)}}function T(He,Fe){if(!d)return null;for(;Fe!==null;)m(He,Fe),Fe=Fe.sibling;return null}function L(He,Fe){for(He=new Map;Fe!==null;)Fe.key!==null?He.set(Fe.key,Fe):He.set(Fe.index,Fe),Fe=Fe.sibling;return He}function j(He,Fe){return He=md(He,Fe),He.index=0,He.sibling=null,He}function K(He,Fe,Ge){return He.index=Ge,d?(Ge=He.alternate,Ge!==null?(Ge=Ge.index,Ge<Fe?(He.flags|=2,Fe):Ge):(He.flags|=2,Fe)):(He.flags|=1048576,Fe)}function de(He){return d&&He.alternate===null&&(He.flags|=2),He}function Ce(He,Fe,Ge,$t){return Fe===null||Fe.tag!==6?(Fe=c1(Ge,He.mode,$t),Fe.return=He,Fe):(Fe=j(Fe,Ge),Fe.return=He,Fe)}function Pe(He,Fe,Ge,$t){var pr=Ge.type;return pr===N?It(He,Fe,Ge.props.children,$t,Ge.key):Fe!==null&&(Fe.elementType===pr||typeof pr=="object"&&pr!==null&&pr.$$typeof===ne&&WD(pr)===Fe.type)?($t=j(Fe,Ge.props),$t.ref=Ym(He,Fe,Ge),$t.return=He,$t):($t=fy(Ge.type,Ge.key,Ge.props,null,He.mode,$t),$t.ref=Ym(He,Fe,Ge),$t.return=He,$t)}function Ze(He,Fe,Ge,$t){return Fe===null||Fe.tag!==4||Fe.stateNode.containerInfo!==Ge.containerInfo||Fe.stateNode.implementation!==Ge.implementation?(Fe=d1(Ge,He.mode,$t),Fe.return=He,Fe):(Fe=j(Fe,Ge.children||[]),Fe.return=He,Fe)}function It(He,Fe,Ge,$t,pr){return Fe===null||Fe.tag!==7?(Fe=Th(Ge,He.mode,$t,pr),Fe.return=He,Fe):(Fe=j(Fe,Ge),Fe.return=He,Fe)}function Ft(He,Fe,Ge){if(typeof Fe=="string"&&Fe!==""||typeof Fe=="number")return Fe=c1(""+Fe,He.mode,Ge),Fe.return=He,Fe;if(typeof Fe=="object"&&Fe!==null){switch(Fe.$$typeof){case k:return Ge=fy(Fe.type,Fe.key,Fe.props,null,He.mode,Ge),Ge.ref=Ym(He,null,Fe),Ge.return=He,Ge;case P:return Fe=d1(Fe,He.mode,Ge),Fe.return=He,Fe;case ne:var $t=Fe._init;return Ft(He,$t(Fe._payload),Ge)}if(it(Fe)||ae(Fe))return Fe=Th(Fe,He.mode,Ge,null),Fe.return=He,Fe;Hv(He,Fe)}return null}function At(He,Fe,Ge,$t){var pr=Fe!==null?Fe.key:null;if(typeof Ge=="string"&&Ge!==""||typeof Ge=="number")return pr!==null?null:Ce(He,Fe,""+Ge,$t);if(typeof Ge=="object"&&Ge!==null){switch(Ge.$$typeof){case k:return Ge.key===pr?Pe(He,Fe,Ge,$t):null;case P:return Ge.key===pr?Ze(He,Fe,Ge,$t):null;case ne:return pr=Ge._init,At(He,Fe,pr(Ge._payload),$t)}if(it(Ge)||ae(Ge))return pr!==null?null:It(He,Fe,Ge,$t,null);Hv(He,Ge)}return null}function Xt(He,Fe,Ge,$t,pr){if(typeof $t=="string"&&$t!==""||typeof $t=="number")return He=He.get(Ge)||null,Ce(Fe,He,""+$t,pr);if(typeof $t=="object"&&$t!==null){switch($t.$$typeof){case k:return He=He.get($t.key===null?Ge:$t.key)||null,Pe(Fe,He,$t,pr);case P:return He=He.get($t.key===null?Ge:$t.key)||null,Ze(Fe,He,$t,pr);case ne:var Cr=$t._init;return Xt(He,Fe,Ge,Cr($t._payload),pr)}if(it($t)||ae($t))return He=He.get(Ge)||null,It(Fe,He,$t,pr,null);Hv(Fe,$t)}return null}function lr(He,Fe,Ge,$t){for(var pr=null,Cr=null,wr=Fe,Pr=Fe=0,Qi=null;wr!==null&&Pr<Ge.length;Pr++){wr.index>Pr?(Qi=wr,wr=null):Qi=wr.sibling;var vn=At(He,wr,Ge[Pr],$t);if(vn===null){wr===null&&(wr=Qi);break}d&&wr&&vn.alternate===null&&m(He,wr),Fe=K(vn,Fe,Pr),Cr===null?pr=vn:Cr.sibling=vn,Cr=vn,wr=Qi}if(Pr===Ge.length)return T(He,wr),Xn&&mh(He,Pr),pr;if(wr===null){for(;Pr<Ge.length;Pr++)wr=Ft(He,Ge[Pr],$t),wr!==null&&(Fe=K(wr,Fe,Pr),Cr===null?pr=wr:Cr.sibling=wr,Cr=wr);return Xn&&mh(He,Pr),pr}for(wr=L(He,wr);Pr<Ge.length;Pr++)Qi=Xt(wr,He,Pr,Ge[Pr],$t),Qi!==null&&(d&&Qi.alternate!==null&&wr.delete(Qi.key===null?Pr:Qi.key),Fe=K(Qi,Fe,Pr),Cr===null?pr=Qi:Cr.sibling=Qi,Cr=Qi);return d&&wr.forEach(function(gd){return m(He,gd)}),Xn&&mh(He,Pr),pr}function dr(He,Fe,Ge,$t){var pr=ae(Ge);if(typeof pr!="function")throw Error(t(150));if(Ge=pr.call(Ge),Ge==null)throw Error(t(151));for(var Cr=pr=null,wr=Fe,Pr=Fe=0,Qi=null,vn=Ge.next();wr!==null&&!vn.done;Pr++,vn=Ge.next()){wr.index>Pr?(Qi=wr,wr=null):Qi=wr.sibling;var gd=At(He,wr,vn.value,$t);if(gd===null){wr===null&&(wr=Qi);break}d&&wr&&gd.alternate===null&&m(He,wr),Fe=K(gd,Fe,Pr),Cr===null?pr=gd:Cr.sibling=gd,Cr=gd,wr=Qi}if(vn.done)return T(He,wr),Xn&&mh(He,Pr),pr;if(wr===null){for(;!vn.done;Pr++,vn=Ge.next())vn=Ft(He,vn.value,$t),vn!==null&&(Fe=K(vn,Fe,Pr),Cr===null?pr=vn:Cr.sibling=vn,Cr=vn);return Xn&&mh(He,Pr),pr}for(wr=L(He,wr);!vn.done;Pr++,vn=Ge.next())vn=Xt(wr,He,Pr,vn.value,$t),vn!==null&&(d&&vn.alternate!==null&&wr.delete(vn.key===null?Pr:vn.key),Fe=K(vn,Fe,Pr),Cr===null?pr=vn:Cr.sibling=vn,Cr=vn);return d&&wr.forEach(function(hH){return m(He,hH)}),Xn&&mh(He,Pr),pr}function vi(He,Fe,Ge,$t){if(typeof Ge=="object"&&Ge!==null&&Ge.type===N&&Ge.key===null&&(Ge=Ge.props.children),typeof Ge=="object"&&Ge!==null){switch(Ge.$$typeof){case k:e:{for(var pr=Ge.key,Cr=Fe;Cr!==null;){if(Cr.key===pr){if(pr=Ge.type,pr===N){if(Cr.tag===7){T(He,Cr.sibling),Fe=j(Cr,Ge.props.children),Fe.return=He,He=Fe;break e}}else if(Cr.elementType===pr||typeof pr=="object"&&pr!==null&&pr.$$typeof===ne&&WD(pr)===Cr.type){T(He,Cr.sibling),Fe=j(Cr,Ge.props),Fe.ref=Ym(He,Cr,Ge),Fe.return=He,He=Fe;break e}T(He,Cr);break}else m(He,Cr);Cr=Cr.sibling}Ge.type===N?(Fe=Th(Ge.props.children,He.mode,$t,Ge.key),Fe.return=He,He=Fe):($t=fy(Ge.type,Ge.key,Ge.props,null,He.mode,$t),$t.ref=Ym(He,Fe,Ge),$t.return=He,He=$t)}return de(He);case P:e:{for(Cr=Ge.key;Fe!==null;){if(Fe.key===Cr)if(Fe.tag===4&&Fe.stateNode.containerInfo===Ge.containerInfo&&Fe.stateNode.implementation===Ge.implementation){T(He,Fe.sibling),Fe=j(Fe,Ge.children||[]),Fe.return=He,He=Fe;break e}else{T(He,Fe);break}else m(He,Fe);Fe=Fe.sibling}Fe=d1(Ge,He.mode,$t),Fe.return=He,He=Fe}return de(He);case ne:return Cr=Ge._init,vi(He,Fe,Cr(Ge._payload),$t)}if(it(Ge))return lr(He,Fe,Ge,$t);if(ae(Ge))return dr(He,Fe,Ge,$t);Hv(He,Ge)}return typeof Ge=="string"&&Ge!==""||typeof Ge=="number"?(Ge=""+Ge,Fe!==null&&Fe.tag===6?(T(He,Fe.sibling),Fe=j(Fe,Ge),Fe.return=He,He=Fe):(T(He,Fe),Fe=c1(Ge,He.mode,$t),Fe.return=He,He=Fe),de(He)):T(He,Fe)}return vi}var Rf=qD(!0),GD=qD(!1),Vv=Sa(null),Wv=null,Lf=null,_T=null;function bT(){_T=Lf=Wv=null}function ST(d){var m=Vv.current;Jt(Vv),d._currentValue=m}function TT(d,m,T){for(;d!==null;){var L=d.alternate;if((d.childLanes&m)!==m?(d.childLanes|=m,L!==null&&(L.childLanes|=m)):L!==null&&(L.childLanes&m)!==m&&(L.childLanes|=m),d===T)break;d=d.return}}function Of(d,m){Wv=d,_T=Lf=null,d=d.dependencies,d!==null&&d.firstContext!==null&&((d.lanes&m)!==0&&(wa=!0),d.firstContext=null)}function Mo(d){var m=d._currentValue;if(_T!==d)if(d={context:d,memoizedValue:m,next:null},Lf===null){if(Wv===null)throw Error(t(308));Lf=d,Wv.dependencies={lanes:0,firstContext:d}}else Lf=Lf.next=d;return m}var gh=null;function CT(d){gh===null?gh=[d]:gh.push(d)}function KD(d,m,T,L){var j=m.interleaved;return j===null?(T.next=T,CT(m)):(T.next=j.next,j.next=T),m.interleaved=T,hc(d,L)}function hc(d,m){d.lanes|=m;var T=d.alternate;for(T!==null&&(T.lanes|=m),T=d,d=d.return;d!==null;)d.childLanes|=m,T=d.alternate,T!==null&&(T.childLanes|=m),T=d,d=d.return;return T.tag===3?T.stateNode:null}var ld=!1;function wT(d){d.updateQueue={baseState:d.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function XD(d,m){d=d.updateQueue,m.updateQueue===d&&(m.updateQueue={baseState:d.baseState,firstBaseUpdate:d.firstBaseUpdate,lastBaseUpdate:d.lastBaseUpdate,shared:d.shared,effects:d.effects})}function fc(d,m){return{eventTime:d,lane:m,tag:0,payload:null,callback:null,next:null}}function ud(d,m,T){var L=d.updateQueue;if(L===null)return null;if(L=L.shared,(mn&2)!==0){var j=L.pending;return j===null?m.next=m:(m.next=j.next,j.next=m),L.pending=m,hc(d,T)}return j=L.interleaved,j===null?(m.next=m,CT(L)):(m.next=j.next,j.next=m),L.interleaved=m,hc(d,T)}function qv(d,m,T){if(m=m.updateQueue,m!==null&&(m=m.shared,(T&4194240)!==0)){var L=m.lanes;L&=d.pendingLanes,T|=L,m.lanes=T,Xu(d,T)}}function YD(d,m){var T=d.updateQueue,L=d.alternate;if(L!==null&&(L=L.updateQueue,T===L)){var j=null,K=null;if(T=T.firstBaseUpdate,T!==null){do{var de={eventTime:T.eventTime,lane:T.lane,tag:T.tag,payload:T.payload,callback:T.callback,next:null};K===null?j=K=de:K=K.next=de,T=T.next}while(T!==null);K===null?j=K=m:K=K.next=m}else j=K=m;T={baseState:L.baseState,firstBaseUpdate:j,lastBaseUpdate:K,shared:L.shared,effects:L.effects},d.updateQueue=T;return}d=T.lastBaseUpdate,d===null?T.firstBaseUpdate=m:d.next=m,T.lastBaseUpdate=m}function Gv(d,m,T,L){var j=d.updateQueue;ld=!1;var K=j.firstBaseUpdate,de=j.lastBaseUpdate,Ce=j.shared.pending;if(Ce!==null){j.shared.pending=null;var Pe=Ce,Ze=Pe.next;Pe.next=null,de===null?K=Ze:de.next=Ze,de=Pe;var It=d.alternate;It!==null&&(It=It.updateQueue,Ce=It.lastBaseUpdate,Ce!==de&&(Ce===null?It.firstBaseUpdate=Ze:Ce.next=Ze,It.lastBaseUpdate=Pe))}if(K!==null){var Ft=j.baseState;de=0,It=Ze=Pe=null,Ce=K;do{var At=Ce.lane,Xt=Ce.eventTime;if((L&At)===At){It!==null&&(It=It.next={eventTime:Xt,lane:0,tag:Ce.tag,payload:Ce.payload,callback:Ce.callback,next:null});e:{var lr=d,dr=Ce;switch(At=m,Xt=T,dr.tag){case 1:if(lr=dr.payload,typeof lr=="function"){Ft=lr.call(Xt,Ft,At);break e}Ft=lr;break e;case 3:lr.flags=lr.flags&-65537|128;case 0:if(lr=dr.payload,At=typeof lr=="function"?lr.call(Xt,Ft,At):lr,At==null)break e;Ft=ce({},Ft,At);break e;case 2:ld=!0}}Ce.callback!==null&&Ce.lane!==0&&(d.flags|=64,At=j.effects,At===null?j.effects=[Ce]:At.push(Ce))}else Xt={eventTime:Xt,lane:At,tag:Ce.tag,payload:Ce.payload,callback:Ce.callback,next:null},It===null?(Ze=It=Xt,Pe=Ft):It=It.next=Xt,de|=At;if(Ce=Ce.next,Ce===null){if(Ce=j.shared.pending,Ce===null)break;At=Ce,Ce=At.next,At.next=null,j.lastBaseUpdate=At,j.shared.pending=null}}while(!0);if(It===null&&(Pe=Ft),j.baseState=Pe,j.firstBaseUpdate=Ze,j.lastBaseUpdate=It,m=j.shared.interleaved,m!==null){j=m;do de|=j.lane,j=j.next;while(j!==m)}else K===null&&(j.shared.lanes=0);xh|=de,d.lanes=de,d.memoizedState=Ft}}function QD(d,m,T){if(d=m.effects,m.effects=null,d!==null)for(m=0;m<d.length;m++){var L=d[m],j=L.callback;if(j!==null){if(L.callback=null,L=T,typeof j!="function")throw Error(t(191,j));j.call(L)}}}var Qm={},su=Sa(Qm),Jm=Sa(Qm),Zm=Sa(Qm);function vh(d){if(d===Qm)throw Error(t(174));return d}function ET(d,m){switch(gn(Zm,m),gn(Jm,d),gn(su,Qm),d=m.nodeType,d){case 9:case 11:m=(m=m.documentElement)?m.namespaceURI:qt(null,"");break;default:d=d===8?m.parentNode:m,m=d.namespaceURI||null,d=d.tagName,m=qt(m,d)}Jt(su),gn(su,m)}function Mf(){Jt(su),Jt(Jm),Jt(Zm)}function JD(d){vh(Zm.current);var m=vh(su.current),T=qt(m,d.type);m!==T&&(gn(Jm,d),gn(su,T))}function kT(d){Jm.current===d&&(Jt(su),Jt(Jm))}var ei=Sa(0);function Kv(d){for(var m=d;m!==null;){if(m.tag===13){var T=m.memoizedState;if(T!==null&&(T=T.dehydrated,T===null||T.data==="$?"||T.data==="$!"))return m}else if(m.tag===19&&m.memoizedProps.revealOrder!==void 0){if((m.flags&128)!==0)return m}else if(m.child!==null){m.child.return=m,m=m.child;continue}if(m===d)break;for(;m.sibling===null;){if(m.return===null||m.return===d)return null;m=m.return}m.sibling.return=m.return,m=m.sibling}return null}var AT=[];function DT(){for(var d=0;d<AT.length;d++)AT[d]._workInProgressVersionPrimary=null;AT.length=0}var Xv=I.ReactCurrentDispatcher,IT=I.ReactCurrentBatchConfig,yh=0,ti=null,Fi=null,Xi=null,Yv=!1,e0=!1,t0=0,Oz=0;function Ls(){throw Error(t(321))}function PT(d,m){if(m===null)return!1;for(var T=0;T<m.length&&T<d.length;T++)if(!we(d[T],m[T]))return!1;return!0}function RT(d,m,T,L,j,K){if(yh=K,ti=m,m.memoizedState=null,m.updateQueue=null,m.lanes=0,Xv.current=d===null||d.memoizedState===null?Nz:Uz,d=T(L,j),e0){K=0;do{if(e0=!1,t0=0,25<=K)throw Error(t(301));K+=1,Xi=Fi=null,m.updateQueue=null,Xv.current=$z,d=T(L,j)}while(e0)}if(Xv.current=Zv,m=Fi!==null&&Fi.next!==null,yh=0,Xi=Fi=ti=null,Yv=!1,m)throw Error(t(300));return d}function LT(){var d=t0!==0;return t0=0,d}function au(){var d={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Xi===null?ti.memoizedState=Xi=d:Xi=Xi.next=d,Xi}function Fo(){if(Fi===null){var d=ti.alternate;d=d!==null?d.memoizedState:null}else d=Fi.next;var m=Xi===null?ti.memoizedState:Xi.next;if(m!==null)Xi=m,Fi=d;else{if(d===null)throw Error(t(310));Fi=d,d={memoizedState:Fi.memoizedState,baseState:Fi.baseState,baseQueue:Fi.baseQueue,queue:Fi.queue,next:null},Xi===null?ti.memoizedState=Xi=d:Xi=Xi.next=d}return Xi}function r0(d,m){return typeof m=="function"?m(d):m}function OT(d){var m=Fo(),T=m.queue;if(T===null)throw Error(t(311));T.lastRenderedReducer=d;var L=Fi,j=L.baseQueue,K=T.pending;if(K!==null){if(j!==null){var de=j.next;j.next=K.next,K.next=de}L.baseQueue=j=K,T.pending=null}if(j!==null){K=j.next,L=L.baseState;var Ce=de=null,Pe=null,Ze=K;do{var It=Ze.lane;if((yh&It)===It)Pe!==null&&(Pe=Pe.next={lane:0,action:Ze.action,hasEagerState:Ze.hasEagerState,eagerState:Ze.eagerState,next:null}),L=Ze.hasEagerState?Ze.eagerState:d(L,Ze.action);else{var Ft={lane:It,action:Ze.action,hasEagerState:Ze.hasEagerState,eagerState:Ze.eagerState,next:null};Pe===null?(Ce=Pe=Ft,de=L):Pe=Pe.next=Ft,ti.lanes|=It,xh|=It}Ze=Ze.next}while(Ze!==null&&Ze!==K);Pe===null?de=L:Pe.next=Ce,we(L,m.memoizedState)||(wa=!0),m.memoizedState=L,m.baseState=de,m.baseQueue=Pe,T.lastRenderedState=L}if(d=T.interleaved,d!==null){j=d;do K=j.lane,ti.lanes|=K,xh|=K,j=j.next;while(j!==d)}else j===null&&(T.lanes=0);return[m.memoizedState,T.dispatch]}function MT(d){var m=Fo(),T=m.queue;if(T===null)throw Error(t(311));T.lastRenderedReducer=d;var L=T.dispatch,j=T.pending,K=m.memoizedState;if(j!==null){T.pending=null;var de=j=j.next;do K=d(K,de.action),de=de.next;while(de!==j);we(K,m.memoizedState)||(wa=!0),m.memoizedState=K,m.baseQueue===null&&(m.baseState=K),T.lastRenderedState=K}return[K,L]}function ZD(){}function eI(d,m){var T=ti,L=Fo(),j=m(),K=!we(L.memoizedState,j);if(K&&(L.memoizedState=j,wa=!0),L=L.queue,FT(nI.bind(null,T,L,d),[d]),L.getSnapshot!==m||K||Xi!==null&&Xi.memoizedState.tag&1){if(T.flags|=2048,n0(9,rI.bind(null,T,L,j,m),void 0,null),Yi===null)throw Error(t(349));(yh&30)!==0||tI(T,m,j)}return j}function tI(d,m,T){d.flags|=16384,d={getSnapshot:m,value:T},m=ti.updateQueue,m===null?(m={lastEffect:null,stores:null},ti.updateQueue=m,m.stores=[d]):(T=m.stores,T===null?m.stores=[d]:T.push(d))}function rI(d,m,T,L){m.value=T,m.getSnapshot=L,iI(m)&&sI(d)}function nI(d,m,T){return T(function(){iI(m)&&sI(d)})}function iI(d){var m=d.getSnapshot;d=d.value;try{var T=m();return!we(d,T)}catch{return!0}}function sI(d){var m=hc(d,1);m!==null&&wl(m,d,1,-1)}function aI(d){var m=au();return typeof d=="function"&&(d=d()),m.memoizedState=m.baseState=d,d={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:r0,lastRenderedState:d},m.queue=d,d=d.dispatch=Bz.bind(null,ti,d),[m.memoizedState,d]}function n0(d,m,T,L){return d={tag:d,create:m,destroy:T,deps:L,next:null},m=ti.updateQueue,m===null?(m={lastEffect:null,stores:null},ti.updateQueue=m,m.lastEffect=d.next=d):(T=m.lastEffect,T===null?m.lastEffect=d.next=d:(L=T.next,T.next=d,d.next=L,m.lastEffect=d)),d}function oI(){return Fo().memoizedState}function Qv(d,m,T,L){var j=au();ti.flags|=d,j.memoizedState=n0(1|m,T,void 0,L===void 0?null:L)}function Jv(d,m,T,L){var j=Fo();L=L===void 0?null:L;var K=void 0;if(Fi!==null){var de=Fi.memoizedState;if(K=de.destroy,L!==null&&PT(L,de.deps)){j.memoizedState=n0(m,T,K,L);return}}ti.flags|=d,j.memoizedState=n0(1|m,T,K,L)}function lI(d,m){return Qv(8390656,8,d,m)}function FT(d,m){return Jv(2048,8,d,m)}function uI(d,m){return Jv(4,2,d,m)}function cI(d,m){return Jv(4,4,d,m)}function dI(d,m){if(typeof m=="function")return d=d(),m(d),function(){m(null)};if(m!=null)return d=d(),m.current=d,function(){m.current=null}}function hI(d,m,T){return T=T!=null?T.concat([d]):null,Jv(4,4,dI.bind(null,m,d),T)}function BT(){}function fI(d,m){var T=Fo();m=m===void 0?null:m;var L=T.memoizedState;return L!==null&&m!==null&&PT(m,L[1])?L[0]:(T.memoizedState=[d,m],d)}function pI(d,m){var T=Fo();m=m===void 0?null:m;var L=T.memoizedState;return L!==null&&m!==null&&PT(m,L[1])?L[0]:(d=d(),T.memoizedState=[d,m],d)}function mI(d,m,T){return(yh&21)===0?(d.baseState&&(d.baseState=!1,wa=!0),d.memoizedState=T):(we(T,m)||(T=Hc(),ti.lanes|=T,xh|=T,d.baseState=!0),m)}function Mz(d,m){var T=qr;qr=T!==0&&4>T?T:4,d(!0);var L=IT.transition;IT.transition={};try{d(!1),m()}finally{qr=T,IT.transition=L}}function gI(){return Fo().memoizedState}function Fz(d,m,T){var L=fd(d);if(T={lane:L,action:T,hasEagerState:!1,eagerState:null,next:null},vI(d))yI(m,T);else if(T=KD(d,m,T,L),T!==null){var j=Xs();wl(T,d,L,j),xI(T,m,L)}}function Bz(d,m,T){var L=fd(d),j={lane:L,action:T,hasEagerState:!1,eagerState:null,next:null};if(vI(d))yI(m,j);else{var K=d.alternate;if(d.lanes===0&&(K===null||K.lanes===0)&&(K=m.lastRenderedReducer,K!==null))try{var de=m.lastRenderedState,Ce=K(de,T);if(j.hasEagerState=!0,j.eagerState=Ce,we(Ce,de)){var Pe=m.interleaved;Pe===null?(j.next=j,CT(m)):(j.next=Pe.next,Pe.next=j),m.interleaved=j;return}}catch{}finally{}T=KD(d,m,j,L),T!==null&&(j=Xs(),wl(T,d,L,j),xI(T,m,L))}}function vI(d){var m=d.alternate;return d===ti||m!==null&&m===ti}function yI(d,m){e0=Yv=!0;var T=d.pending;T===null?m.next=m:(m.next=T.next,T.next=m),d.pending=m}function xI(d,m,T){if((T&4194240)!==0){var L=m.lanes;L&=d.pendingLanes,T|=L,m.lanes=T,Xu(d,T)}}var Zv={readContext:Mo,useCallback:Ls,useContext:Ls,useEffect:Ls,useImperativeHandle:Ls,useInsertionEffect:Ls,useLayoutEffect:Ls,useMemo:Ls,useReducer:Ls,useRef:Ls,useState:Ls,useDebugValue:Ls,useDeferredValue:Ls,useTransition:Ls,useMutableSource:Ls,useSyncExternalStore:Ls,useId:Ls,unstable_isNewReconciler:!1},Nz={readContext:Mo,useCallback:function(d,m){return au().memoizedState=[d,m===void 0?null:m],d},useContext:Mo,useEffect:lI,useImperativeHandle:function(d,m,T){return T=T!=null?T.concat([d]):null,Qv(4194308,4,dI.bind(null,m,d),T)},useLayoutEffect:function(d,m){return Qv(4194308,4,d,m)},useInsertionEffect:function(d,m){return Qv(4,2,d,m)},useMemo:function(d,m){var T=au();return m=m===void 0?null:m,d=d(),T.memoizedState=[d,m],d},useReducer:function(d,m,T){var L=au();return m=T!==void 0?T(m):m,L.memoizedState=L.baseState=m,d={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:d,lastRenderedState:m},L.queue=d,d=d.dispatch=Fz.bind(null,ti,d),[L.memoizedState,d]},useRef:function(d){var m=au();return d={current:d},m.memoizedState=d},useState:aI,useDebugValue:BT,useDeferredValue:function(d){return au().memoizedState=d},useTransition:function(){var d=aI(!1),m=d[0];return d=Mz.bind(null,d[1]),au().memoizedState=d,[m,d]},useMutableSource:function(){},useSyncExternalStore:function(d,m,T){var L=ti,j=au();if(Xn){if(T===void 0)throw Error(t(407));T=T()}else{if(T=m(),Yi===null)throw Error(t(349));(yh&30)!==0||tI(L,m,T)}j.memoizedState=T;var K={value:T,getSnapshot:m};return j.queue=K,lI(nI.bind(null,L,K,d),[d]),L.flags|=2048,n0(9,rI.bind(null,L,K,T,m),void 0,null),T},useId:function(){var d=au(),m=Yi.identifierPrefix;if(Xn){var T=dc,L=cc;T=(L&~(1<<32-kt(L)-1)).toString(32)+T,m=":"+m+"R"+T,T=t0++,0<T&&(m+="H"+T.toString(32)),m+=":"}else T=Oz++,m=":"+m+"r"+T.toString(32)+":";return d.memoizedState=m},unstable_isNewReconciler:!1},Uz={readContext:Mo,useCallback:fI,useContext:Mo,useEffect:FT,useImperativeHandle:hI,useInsertionEffect:uI,useLayoutEffect:cI,useMemo:pI,useReducer:OT,useRef:oI,useState:function(){return OT(r0)},useDebugValue:BT,useDeferredValue:function(d){var m=Fo();return mI(m,Fi.memoizedState,d)},useTransition:function(){var d=OT(r0)[0],m=Fo().memoizedState;return[d,m]},useMutableSource:ZD,useSyncExternalStore:eI,useId:gI,unstable_isNewReconciler:!1},$z={readContext:Mo,useCallback:fI,useContext:Mo,useEffect:FT,useImperativeHandle:hI,useInsertionEffect:uI,useLayoutEffect:cI,useMemo:pI,useReducer:MT,useRef:oI,useState:function(){return MT(r0)},useDebugValue:BT,useDeferredValue:function(d){var m=Fo();return Fi===null?m.memoizedState=d:mI(m,Fi.memoizedState,d)},useTransition:function(){var d=MT(r0)[0],m=Fo().memoizedState;return[d,m]},useMutableSource:ZD,useSyncExternalStore:eI,useId:gI,unstable_isNewReconciler:!1};function Sl(d,m){if(d&&d.defaultProps){m=ce({},m),d=d.defaultProps;for(var T in d)m[T]===void 0&&(m[T]=d[T]);return m}return m}function NT(d,m,T,L){m=d.memoizedState,T=T(L,m),T=T==null?m:ce({},m,T),d.memoizedState=T,d.lanes===0&&(d.updateQueue.baseState=T)}var ey={isMounted:function(d){return(d=d._reactInternals)?Tt(d)===d:!1},enqueueSetState:function(d,m,T){d=d._reactInternals;var L=Xs(),j=fd(d),K=fc(L,j);K.payload=m,T!=null&&(K.callback=T),m=ud(d,K,j),m!==null&&(wl(m,d,j,L),qv(m,d,j))},enqueueReplaceState:function(d,m,T){d=d._reactInternals;var L=Xs(),j=fd(d),K=fc(L,j);K.tag=1,K.payload=m,T!=null&&(K.callback=T),m=ud(d,K,j),m!==null&&(wl(m,d,j,L),qv(m,d,j))},enqueueForceUpdate:function(d,m){d=d._reactInternals;var T=Xs(),L=fd(d),j=fc(T,L);j.tag=2,m!=null&&(j.callback=m),m=ud(d,j,L),m!==null&&(wl(m,d,L,T),qv(m,d,L))}};function _I(d,m,T,L,j,K,de){return d=d.stateNode,typeof d.shouldComponentUpdate=="function"?d.shouldComponentUpdate(L,K,de):m.prototype&&m.prototype.isPureReactComponent?!Re(T,L)||!Re(j,K):!0}function bI(d,m,T){var L=!1,j=Kn,K=m.contextType;return typeof K=="object"&&K!==null?K=Mo(K):(j=Ca(m)?fh:Rs.current,L=m.contextTypes,K=(L=L!=null)?Af(d,j):Kn),m=new m(T,K),d.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,m.updater=ey,d.stateNode=m,m._reactInternals=d,L&&(d=d.stateNode,d.__reactInternalMemoizedUnmaskedChildContext=j,d.__reactInternalMemoizedMaskedChildContext=K),m}function SI(d,m,T,L){d=m.state,typeof m.componentWillReceiveProps=="function"&&m.componentWillReceiveProps(T,L),typeof m.UNSAFE_componentWillReceiveProps=="function"&&m.UNSAFE_componentWillReceiveProps(T,L),m.state!==d&&ey.enqueueReplaceState(m,m.state,null)}function UT(d,m,T,L){var j=d.stateNode;j.props=T,j.state=d.memoizedState,j.refs={},wT(d);var K=m.contextType;typeof K=="object"&&K!==null?j.context=Mo(K):(K=Ca(m)?fh:Rs.current,j.context=Af(d,K)),j.state=d.memoizedState,K=m.getDerivedStateFromProps,typeof K=="function"&&(NT(d,m,K,T),j.state=d.memoizedState),typeof m.getDerivedStateFromProps=="function"||typeof j.getSnapshotBeforeUpdate=="function"||typeof j.UNSAFE_componentWillMount!="function"&&typeof j.componentWillMount!="function"||(m=j.state,typeof j.componentWillMount=="function"&&j.componentWillMount(),typeof j.UNSAFE_componentWillMount=="function"&&j.UNSAFE_componentWillMount(),m!==j.state&&ey.enqueueReplaceState(j,j.state,null),Gv(d,T,j,L),j.state=d.memoizedState),typeof j.componentDidMount=="function"&&(d.flags|=4194308)}function Ff(d,m){try{var T="",L=m;do T+=Oe(L),L=L.return;while(L);var j=T}catch(K){j=`
Error generating stack: `+K.message+`
`+K.stack}return{value:d,source:m,stack:j,digest:null}}function $T(d,m,T){return{value:d,source:null,stack:T??null,digest:m??null}}function jT(d,m){try{console.error(m.value)}catch(T){setTimeout(function(){throw T})}}var jz=typeof WeakMap=="function"?WeakMap:Map;function TI(d,m,T){T=fc(-1,T),T.tag=3,T.payload={element:null};var L=m.value;return T.callback=function(){oy||(oy=!0,r1=L),jT(d,m)},T}function CI(d,m,T){T=fc(-1,T),T.tag=3;var L=d.type.getDerivedStateFromError;if(typeof L=="function"){var j=m.value;T.payload=function(){return L(j)},T.callback=function(){jT(d,m)}}var K=d.stateNode;return K!==null&&typeof K.componentDidCatch=="function"&&(T.callback=function(){jT(d,m),typeof L!="function"&&(dd===null?dd=new Set([this]):dd.add(this));var de=m.stack;this.componentDidCatch(m.value,{componentStack:de!==null?de:""})}),T}function wI(d,m,T){var L=d.pingCache;if(L===null){L=d.pingCache=new jz;var j=new Set;L.set(m,j)}else j=L.get(m),j===void 0&&(j=new Set,L.set(m,j));j.has(T)||(j.add(T),d=tH.bind(null,d,m,T),m.then(d,d))}function EI(d){do{var m;if((m=d.tag===13)&&(m=d.memoizedState,m=m!==null?m.dehydrated!==null:!0),m)return d;d=d.return}while(d!==null);return null}function kI(d,m,T,L,j){return(d.mode&1)===0?(d===m?d.flags|=65536:(d.flags|=128,T.flags|=131072,T.flags&=-52805,T.tag===1&&(T.alternate===null?T.tag=17:(m=fc(-1,1),m.tag=2,ud(T,m,1))),T.lanes|=1),d):(d.flags|=65536,d.lanes=j,d)}var zz=I.ReactCurrentOwner,wa=!1;function Ks(d,m,T,L){m.child=d===null?GD(m,null,T,L):Rf(m,d.child,T,L)}function AI(d,m,T,L,j){T=T.render;var K=m.ref;return Of(m,j),L=RT(d,m,T,L,K,j),T=LT(),d!==null&&!wa?(m.updateQueue=d.updateQueue,m.flags&=-2053,d.lanes&=~j,pc(d,m,j)):(Xn&&T&&mT(m),m.flags|=1,Ks(d,m,L,j),m.child)}function DI(d,m,T,L,j){if(d===null){var K=T.type;return typeof K=="function"&&!u1(K)&&K.defaultProps===void 0&&T.compare===null&&T.defaultProps===void 0?(m.tag=15,m.type=K,II(d,m,K,L,j)):(d=fy(T.type,null,L,m,m.mode,j),d.ref=m.ref,d.return=m,m.child=d)}if(K=d.child,(d.lanes&j)===0){var de=K.memoizedProps;if(T=T.compare,T=T!==null?T:Re,T(de,L)&&d.ref===m.ref)return pc(d,m,j)}return m.flags|=1,d=md(K,L),d.ref=m.ref,d.return=m,m.child=d}function II(d,m,T,L,j){if(d!==null){var K=d.memoizedProps;if(Re(K,L)&&d.ref===m.ref)if(wa=!1,m.pendingProps=L=K,(d.lanes&j)!==0)(d.flags&131072)!==0&&(wa=!0);else return m.lanes=d.lanes,pc(d,m,j)}return zT(d,m,T,L,j)}function PI(d,m,T){var L=m.pendingProps,j=L.children,K=d!==null?d.memoizedState:null;if(L.mode==="hidden")if((m.mode&1)===0)m.memoizedState={baseLanes:0,cachePool:null,transitions:null},gn(Nf,no),no|=T;else{if((T&1073741824)===0)return d=K!==null?K.baseLanes|T:T,m.lanes=m.childLanes=1073741824,m.memoizedState={baseLanes:d,cachePool:null,transitions:null},m.updateQueue=null,gn(Nf,no),no|=d,null;m.memoizedState={baseLanes:0,cachePool:null,transitions:null},L=K!==null?K.baseLanes:T,gn(Nf,no),no|=L}else K!==null?(L=K.baseLanes|T,m.memoizedState=null):L=T,gn(Nf,no),no|=L;return Ks(d,m,j,T),m.child}function RI(d,m){var T=m.ref;(d===null&&T!==null||d!==null&&d.ref!==T)&&(m.flags|=512,m.flags|=2097152)}function zT(d,m,T,L,j){var K=Ca(T)?fh:Rs.current;return K=Af(m,K),Of(m,j),T=RT(d,m,T,L,K,j),L=LT(),d!==null&&!wa?(m.updateQueue=d.updateQueue,m.flags&=-2053,d.lanes&=~j,pc(d,m,j)):(Xn&&L&&mT(m),m.flags|=1,Ks(d,m,T,j),m.child)}function LI(d,m,T,L,j){if(Ca(T)){var K=!0;Nv(m)}else K=!1;if(Of(m,j),m.stateNode===null)ry(d,m),bI(m,T,L),UT(m,T,L,j),L=!0;else if(d===null){var de=m.stateNode,Ce=m.memoizedProps;de.props=Ce;var Pe=de.context,Ze=T.contextType;typeof Ze=="object"&&Ze!==null?Ze=Mo(Ze):(Ze=Ca(T)?fh:Rs.current,Ze=Af(m,Ze));var It=T.getDerivedStateFromProps,Ft=typeof It=="function"||typeof de.getSnapshotBeforeUpdate=="function";Ft||typeof de.UNSAFE_componentWillReceiveProps!="function"&&typeof de.componentWillReceiveProps!="function"||(Ce!==L||Pe!==Ze)&&SI(m,de,L,Ze),ld=!1;var At=m.memoizedState;de.state=At,Gv(m,L,de,j),Pe=m.memoizedState,Ce!==L||At!==Pe||Ta.current||ld?(typeof It=="function"&&(NT(m,T,It,L),Pe=m.memoizedState),(Ce=ld||_I(m,T,Ce,L,At,Pe,Ze))?(Ft||typeof de.UNSAFE_componentWillMount!="function"&&typeof de.componentWillMount!="function"||(typeof de.componentWillMount=="function"&&de.componentWillMount(),typeof de.UNSAFE_componentWillMount=="function"&&de.UNSAFE_componentWillMount()),typeof de.componentDidMount=="function"&&(m.flags|=4194308)):(typeof de.componentDidMount=="function"&&(m.flags|=4194308),m.memoizedProps=L,m.memoizedState=Pe),de.props=L,de.state=Pe,de.context=Ze,L=Ce):(typeof de.componentDidMount=="function"&&(m.flags|=4194308),L=!1)}else{de=m.stateNode,XD(d,m),Ce=m.memoizedProps,Ze=m.type===m.elementType?Ce:Sl(m.type,Ce),de.props=Ze,Ft=m.pendingProps,At=de.context,Pe=T.contextType,typeof Pe=="object"&&Pe!==null?Pe=Mo(Pe):(Pe=Ca(T)?fh:Rs.current,Pe=Af(m,Pe));var Xt=T.getDerivedStateFromProps;(It=typeof Xt=="function"||typeof de.getSnapshotBeforeUpdate=="function")||typeof de.UNSAFE_componentWillReceiveProps!="function"&&typeof de.componentWillReceiveProps!="function"||(Ce!==Ft||At!==Pe)&&SI(m,de,L,Pe),ld=!1,At=m.memoizedState,de.state=At,Gv(m,L,de,j);var lr=m.memoizedState;Ce!==Ft||At!==lr||Ta.current||ld?(typeof Xt=="function"&&(NT(m,T,Xt,L),lr=m.memoizedState),(Ze=ld||_I(m,T,Ze,L,At,lr,Pe)||!1)?(It||typeof de.UNSAFE_componentWillUpdate!="function"&&typeof de.componentWillUpdate!="function"||(typeof de.componentWillUpdate=="function"&&de.componentWillUpdate(L,lr,Pe),typeof de.UNSAFE_componentWillUpdate=="function"&&de.UNSAFE_componentWillUpdate(L,lr,Pe)),typeof de.componentDidUpdate=="function"&&(m.flags|=4),typeof de.getSnapshotBeforeUpdate=="function"&&(m.flags|=1024)):(typeof de.componentDidUpdate!="function"||Ce===d.memoizedProps&&At===d.memoizedState||(m.flags|=4),typeof de.getSnapshotBeforeUpdate!="function"||Ce===d.memoizedProps&&At===d.memoizedState||(m.flags|=1024),m.memoizedProps=L,m.memoizedState=lr),de.props=L,de.state=lr,de.context=Pe,L=Ze):(typeof de.componentDidUpdate!="function"||Ce===d.memoizedProps&&At===d.memoizedState||(m.flags|=4),typeof de.getSnapshotBeforeUpdate!="function"||Ce===d.memoizedProps&&At===d.memoizedState||(m.flags|=1024),L=!1)}return HT(d,m,T,L,K,j)}function HT(d,m,T,L,j,K){RI(d,m);var de=(m.flags&128)!==0;if(!L&&!de)return j&&ND(m,T,!1),pc(d,m,K);L=m.stateNode,zz.current=m;var Ce=de&&typeof T.getDerivedStateFromError!="function"?null:L.render();return m.flags|=1,d!==null&&de?(m.child=Rf(m,d.child,null,K),m.child=Rf(m,null,Ce,K)):Ks(d,m,Ce,K),m.memoizedState=L.state,j&&ND(m,T,!0),m.child}function OI(d){var m=d.stateNode;m.pendingContext?FD(d,m.pendingContext,m.pendingContext!==m.context):m.context&&FD(d,m.context,!1),ET(d,m.containerInfo)}function MI(d,m,T,L,j){return Pf(),xT(j),m.flags|=256,Ks(d,m,T,L),m.child}var VT={dehydrated:null,treeContext:null,retryLane:0};function WT(d){return{baseLanes:d,cachePool:null,transitions:null}}function FI(d,m,T){var L=m.pendingProps,j=ei.current,K=!1,de=(m.flags&128)!==0,Ce;if((Ce=de)||(Ce=d!==null&&d.memoizedState===null?!1:(j&2)!==0),Ce?(K=!0,m.flags&=-129):(d===null||d.memoizedState!==null)&&(j|=1),gn(ei,j&1),d===null)return yT(m),d=m.memoizedState,d!==null&&(d=d.dehydrated,d!==null)?((m.mode&1)===0?m.lanes=1:d.data==="$!"?m.lanes=8:m.lanes=1073741824,null):(de=L.children,d=L.fallback,K?(L=m.mode,K=m.child,de={mode:"hidden",children:de},(L&1)===0&&K!==null?(K.childLanes=0,K.pendingProps=de):K=py(de,L,0,null),d=Th(d,L,T,null),K.return=m,d.return=m,K.sibling=d,m.child=K,m.child.memoizedState=WT(T),m.memoizedState=VT,d):qT(m,de));if(j=d.memoizedState,j!==null&&(Ce=j.dehydrated,Ce!==null))return Hz(d,m,de,L,Ce,j,T);if(K){K=L.fallback,de=m.mode,j=d.child,Ce=j.sibling;var Pe={mode:"hidden",children:L.children};return(de&1)===0&&m.child!==j?(L=m.child,L.childLanes=0,L.pendingProps=Pe,m.deletions=null):(L=md(j,Pe),L.subtreeFlags=j.subtreeFlags&14680064),Ce!==null?K=md(Ce,K):(K=Th(K,de,T,null),K.flags|=2),K.return=m,L.return=m,L.sibling=K,m.child=L,L=K,K=m.child,de=d.child.memoizedState,de=de===null?WT(T):{baseLanes:de.baseLanes|T,cachePool:null,transitions:de.transitions},K.memoizedState=de,K.childLanes=d.childLanes&~T,m.memoizedState=VT,L}return K=d.child,d=K.sibling,L=md(K,{mode:"visible",children:L.children}),(m.mode&1)===0&&(L.lanes=T),L.return=m,L.sibling=null,d!==null&&(T=m.deletions,T===null?(m.deletions=[d],m.flags|=16):T.push(d)),m.child=L,m.memoizedState=null,L}function qT(d,m){return m=py({mode:"visible",children:m},d.mode,0,null),m.return=d,d.child=m}function ty(d,m,T,L){return L!==null&&xT(L),Rf(m,d.child,null,T),d=qT(m,m.pendingProps.children),d.flags|=2,m.memoizedState=null,d}function Hz(d,m,T,L,j,K,de){if(T)return m.flags&256?(m.flags&=-257,L=$T(Error(t(422))),ty(d,m,de,L)):m.memoizedState!==null?(m.child=d.child,m.flags|=128,null):(K=L.fallback,j=m.mode,L=py({mode:"visible",children:L.children},j,0,null),K=Th(K,j,de,null),K.flags|=2,L.return=m,K.return=m,L.sibling=K,m.child=L,(m.mode&1)!==0&&Rf(m,d.child,null,de),m.child.memoizedState=WT(de),m.memoizedState=VT,K);if((m.mode&1)===0)return ty(d,m,de,null);if(j.data==="$!"){if(L=j.nextSibling&&j.nextSibling.dataset,L)var Ce=L.dgst;return L=Ce,K=Error(t(419)),L=$T(K,L,void 0),ty(d,m,de,L)}if(Ce=(de&d.childLanes)!==0,wa||Ce){if(L=Yi,L!==null){switch(de&-de){case 4:j=2;break;case 16:j=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:j=32;break;case 536870912:j=268435456;break;default:j=0}j=(j&(L.suspendedLanes|de))!==0?0:j,j!==0&&j!==K.retryLane&&(K.retryLane=j,hc(d,j),wl(L,d,j,-1))}return l1(),L=$T(Error(t(421))),ty(d,m,de,L)}return j.data==="$?"?(m.flags|=128,m.child=d.child,m=rH.bind(null,d),j._reactRetry=m,null):(d=K.treeContext,ro=J(j.nextSibling),to=m,Xn=!0,bl=null,d!==null&&(Lo[Oo++]=cc,Lo[Oo++]=dc,Lo[Oo++]=ph,cc=d.id,dc=d.overflow,ph=m),m=qT(m,L.children),m.flags|=4096,m)}function BI(d,m,T){d.lanes|=m;var L=d.alternate;L!==null&&(L.lanes|=m),TT(d.return,m,T)}function GT(d,m,T,L,j){var K=d.memoizedState;K===null?d.memoizedState={isBackwards:m,rendering:null,renderingStartTime:0,last:L,tail:T,tailMode:j}:(K.isBackwards=m,K.rendering=null,K.renderingStartTime=0,K.last=L,K.tail=T,K.tailMode=j)}function NI(d,m,T){var L=m.pendingProps,j=L.revealOrder,K=L.tail;if(Ks(d,m,L.children,T),L=ei.current,(L&2)!==0)L=L&1|2,m.flags|=128;else{if(d!==null&&(d.flags&128)!==0)e:for(d=m.child;d!==null;){if(d.tag===13)d.memoizedState!==null&&BI(d,T,m);else if(d.tag===19)BI(d,T,m);else if(d.child!==null){d.child.return=d,d=d.child;continue}if(d===m)break e;for(;d.sibling===null;){if(d.return===null||d.return===m)break e;d=d.return}d.sibling.return=d.return,d=d.sibling}L&=1}if(gn(ei,L),(m.mode&1)===0)m.memoizedState=null;else switch(j){case"forwards":for(T=m.child,j=null;T!==null;)d=T.alternate,d!==null&&Kv(d)===null&&(j=T),T=T.sibling;T=j,T===null?(j=m.child,m.child=null):(j=T.sibling,T.sibling=null),GT(m,!1,j,T,K);break;case"backwards":for(T=null,j=m.child,m.child=null;j!==null;){if(d=j.alternate,d!==null&&Kv(d)===null){m.child=j;break}d=j.sibling,j.sibling=T,T=j,j=d}GT(m,!0,T,null,K);break;case"together":GT(m,!1,null,null,void 0);break;default:m.memoizedState=null}return m.child}function ry(d,m){(m.mode&1)===0&&d!==null&&(d.alternate=null,m.alternate=null,m.flags|=2)}function pc(d,m,T){if(d!==null&&(m.dependencies=d.dependencies),xh|=m.lanes,(T&m.childLanes)===0)return null;if(d!==null&&m.child!==d.child)throw Error(t(153));if(m.child!==null){for(d=m.child,T=md(d,d.pendingProps),m.child=T,T.return=m;d.sibling!==null;)d=d.sibling,T=T.sibling=md(d,d.pendingProps),T.return=m;T.sibling=null}return m.child}function Vz(d,m,T){switch(m.tag){case 3:OI(m),Pf();break;case 5:JD(m);break;case 1:Ca(m.type)&&Nv(m);break;case 4:ET(m,m.stateNode.containerInfo);break;case 10:var L=m.type._context,j=m.memoizedProps.value;gn(Vv,L._currentValue),L._currentValue=j;break;case 13:if(L=m.memoizedState,L!==null)return L.dehydrated!==null?(gn(ei,ei.current&1),m.flags|=128,null):(T&m.child.childLanes)!==0?FI(d,m,T):(gn(ei,ei.current&1),d=pc(d,m,T),d!==null?d.sibling:null);gn(ei,ei.current&1);break;case 19:if(L=(T&m.childLanes)!==0,(d.flags&128)!==0){if(L)return NI(d,m,T);m.flags|=128}if(j=m.memoizedState,j!==null&&(j.rendering=null,j.tail=null,j.lastEffect=null),gn(ei,ei.current),L)break;return null;case 22:case 23:return m.lanes=0,PI(d,m,T)}return pc(d,m,T)}var UI,KT,$I,jI;UI=function(d,m){for(var T=m.child;T!==null;){if(T.tag===5||T.tag===6)d.appendChild(T.stateNode);else if(T.tag!==4&&T.child!==null){T.child.return=T,T=T.child;continue}if(T===m)break;for(;T.sibling===null;){if(T.return===null||T.return===m)return;T=T.return}T.sibling.return=T.return,T=T.sibling}},KT=function(){},$I=function(d,m,T,L){var j=d.memoizedProps;if(j!==L){d=m.stateNode,vh(su.current);var K=null;switch(T){case"input":j=Ne(d,j),L=Ne(d,L),K=[];break;case"select":j=ce({},j,{value:void 0}),L=ce({},L,{value:void 0}),K=[];break;case"textarea":j=lt(d,j),L=lt(d,L),K=[];break;default:typeof j.onClick!="function"&&typeof L.onClick=="function"&&(d.onclick=ad)}Or(T,L);var de;T=null;for(Ze in j)if(!L.hasOwnProperty(Ze)&&j.hasOwnProperty(Ze)&&j[Ze]!=null)if(Ze==="style"){var Ce=j[Ze];for(de in Ce)Ce.hasOwnProperty(de)&&(T||(T={}),T[de]="")}else Ze!=="dangerouslySetInnerHTML"&&Ze!=="children"&&Ze!=="suppressContentEditableWarning"&&Ze!=="suppressHydrationWarning"&&Ze!=="autoFocus"&&(i.hasOwnProperty(Ze)?K||(K=[]):(K=K||[]).push(Ze,null));for(Ze in L){var Pe=L[Ze];if(Ce=j?.[Ze],L.hasOwnProperty(Ze)&&Pe!==Ce&&(Pe!=null||Ce!=null))if(Ze==="style")if(Ce){for(de in Ce)!Ce.hasOwnProperty(de)||Pe&&Pe.hasOwnProperty(de)||(T||(T={}),T[de]="");for(de in Pe)Pe.hasOwnProperty(de)&&Ce[de]!==Pe[de]&&(T||(T={}),T[de]=Pe[de])}else T||(K||(K=[]),K.push(Ze,T)),T=Pe;else Ze==="dangerouslySetInnerHTML"?(Pe=Pe?Pe.__html:void 0,Ce=Ce?Ce.__html:void 0,Pe!=null&&Ce!==Pe&&(K=K||[]).push(Ze,Pe)):Ze==="children"?typeof Pe!="string"&&typeof Pe!="number"||(K=K||[]).push(Ze,""+Pe):Ze!=="suppressContentEditableWarning"&&Ze!=="suppressHydrationWarning"&&(i.hasOwnProperty(Ze)?(Pe!=null&&Ze==="onScroll"&&bn("scroll",d),K||Ce===Pe||(K=[])):(K=K||[]).push(Ze,Pe))}T&&(K=K||[]).push("style",T);var Ze=K;(m.updateQueue=Ze)&&(m.flags|=4)}},jI=function(d,m,T,L){T!==L&&(m.flags|=4)};function i0(d,m){if(!Xn)switch(d.tailMode){case"hidden":m=d.tail;for(var T=null;m!==null;)m.alternate!==null&&(T=m),m=m.sibling;T===null?d.tail=null:T.sibling=null;break;case"collapsed":T=d.tail;for(var L=null;T!==null;)T.alternate!==null&&(L=T),T=T.sibling;L===null?m||d.tail===null?d.tail=null:d.tail.sibling=null:L.sibling=null}}function Os(d){var m=d.alternate!==null&&d.alternate.child===d.child,T=0,L=0;if(m)for(var j=d.child;j!==null;)T|=j.lanes|j.childLanes,L|=j.subtreeFlags&14680064,L|=j.flags&14680064,j.return=d,j=j.sibling;else for(j=d.child;j!==null;)T|=j.lanes|j.childLanes,L|=j.subtreeFlags,L|=j.flags,j.return=d,j=j.sibling;return d.subtreeFlags|=L,d.childLanes=T,m}function Wz(d,m,T){var L=m.pendingProps;switch(gT(m),m.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Os(m),null;case 1:return Ca(m.type)&&Bv(),Os(m),null;case 3:return L=m.stateNode,Mf(),Jt(Ta),Jt(Rs),DT(),L.pendingContext&&(L.context=L.pendingContext,L.pendingContext=null),(d===null||d.child===null)&&(zv(m)?m.flags|=4:d===null||d.memoizedState.isDehydrated&&(m.flags&256)===0||(m.flags|=1024,bl!==null&&(s1(bl),bl=null))),KT(d,m),Os(m),null;case 5:kT(m);var j=vh(Zm.current);if(T=m.type,d!==null&&m.stateNode!=null)$I(d,m,T,L,j),d.ref!==m.ref&&(m.flags|=512,m.flags|=2097152);else{if(!L){if(m.stateNode===null)throw Error(t(166));return Os(m),null}if(d=vh(su.current),zv(m)){L=m.stateNode,T=m.type;var K=m.memoizedProps;switch(L[ve]=m,L[qe]=K,d=(m.mode&1)!==0,T){case"dialog":bn("cancel",L),bn("close",L);break;case"iframe":case"object":case"embed":bn("load",L);break;case"video":case"audio":for(j=0;j<ic.length;j++)bn(ic[j],L);break;case"source":bn("error",L);break;case"img":case"image":case"link":bn("error",L),bn("load",L);break;case"details":bn("toggle",L);break;case"input":Ie(L,K),bn("invalid",L);break;case"select":L._wrapperState={wasMultiple:!!K.multiple},bn("invalid",L);break;case"textarea":gr(L,K),bn("invalid",L)}Or(T,K),j=null;for(var de in K)if(K.hasOwnProperty(de)){var Ce=K[de];de==="children"?typeof Ce=="string"?L.textContent!==Ce&&(K.suppressHydrationWarning!==!0&&sd(L.textContent,Ce,d),j=["children",Ce]):typeof Ce=="number"&&L.textContent!==""+Ce&&(K.suppressHydrationWarning!==!0&&sd(L.textContent,Ce,d),j=["children",""+Ce]):i.hasOwnProperty(de)&&Ce!=null&&de==="onScroll"&&bn("scroll",L)}switch(T){case"input":Pt(L),ot(L,K,!0);break;case"textarea":Pt(L),Rr(L);break;case"select":case"option":break;default:typeof K.onClick=="function"&&(L.onclick=ad)}L=j,m.updateQueue=L,L!==null&&(m.flags|=4)}else{de=j.nodeType===9?j:j.ownerDocument,d==="http://www.w3.org/1999/xhtml"&&(d=nr(T)),d==="http://www.w3.org/1999/xhtml"?T==="script"?(d=de.createElement("div"),d.innerHTML="<script><\/script>",d=d.removeChild(d.firstChild)):typeof L.is=="string"?d=de.createElement(T,{is:L.is}):(d=de.createElement(T),T==="select"&&(de=d,L.multiple?de.multiple=!0:L.size&&(de.size=L.size))):d=de.createElementNS(d,T),d[ve]=m,d[qe]=L,UI(d,m,!1,!1),m.stateNode=d;e:{switch(de=Hr(T,L),T){case"dialog":bn("cancel",d),bn("close",d),j=L;break;case"iframe":case"object":case"embed":bn("load",d),j=L;break;case"video":case"audio":for(j=0;j<ic.length;j++)bn(ic[j],d);j=L;break;case"source":bn("error",d),j=L;break;case"img":case"image":case"link":bn("error",d),bn("load",d),j=L;break;case"details":bn("toggle",d),j=L;break;case"input":Ie(d,L),j=Ne(d,L),bn("invalid",d);break;case"option":j=L;break;case"select":d._wrapperState={wasMultiple:!!L.multiple},j=ce({},L,{value:void 0}),bn("invalid",d);break;case"textarea":gr(d,L),j=lt(d,L),bn("invalid",d);break;default:j=L}Or(T,j),Ce=j;for(K in Ce)if(Ce.hasOwnProperty(K)){var Pe=Ce[K];K==="style"?jt(d,Pe):K==="dangerouslySetInnerHTML"?(Pe=Pe?Pe.__html:void 0,Pe!=null&&yr(d,Pe)):K==="children"?typeof Pe=="string"?(T!=="textarea"||Pe!=="")&&Lr(d,Pe):typeof Pe=="number"&&Lr(d,""+Pe):K!=="suppressContentEditableWarning"&&K!=="suppressHydrationWarning"&&K!=="autoFocus"&&(i.hasOwnProperty(K)?Pe!=null&&K==="onScroll"&&bn("scroll",d):Pe!=null&&D(d,K,Pe,de))}switch(T){case"input":Pt(d),ot(d,L,!1);break;case"textarea":Pt(d),Rr(d);break;case"option":L.value!=null&&d.setAttribute("value",""+ze(L.value));break;case"select":d.multiple=!!L.multiple,K=L.value,K!=null?bt(d,!!L.multiple,K,!1):L.defaultValue!=null&&bt(d,!!L.multiple,L.defaultValue,!0);break;default:typeof j.onClick=="function"&&(d.onclick=ad)}switch(T){case"button":case"input":case"select":case"textarea":L=!!L.autoFocus;break e;case"img":L=!0;break e;default:L=!1}}L&&(m.flags|=4)}m.ref!==null&&(m.flags|=512,m.flags|=2097152)}return Os(m),null;case 6:if(d&&m.stateNode!=null)jI(d,m,d.memoizedProps,L);else{if(typeof L!="string"&&m.stateNode===null)throw Error(t(166));if(T=vh(Zm.current),vh(su.current),zv(m)){if(L=m.stateNode,T=m.memoizedProps,L[ve]=m,(K=L.nodeValue!==T)&&(d=to,d!==null))switch(d.tag){case 3:sd(L.nodeValue,T,(d.mode&1)!==0);break;case 5:d.memoizedProps.suppressHydrationWarning!==!0&&sd(L.nodeValue,T,(d.mode&1)!==0)}K&&(m.flags|=4)}else L=(T.nodeType===9?T:T.ownerDocument).createTextNode(L),L[ve]=m,m.stateNode=L}return Os(m),null;case 13:if(Jt(ei),L=m.memoizedState,d===null||d.memoizedState!==null&&d.memoizedState.dehydrated!==null){if(Xn&&ro!==null&&(m.mode&1)!==0&&(m.flags&128)===0)VD(),Pf(),m.flags|=98560,K=!1;else if(K=zv(m),L!==null&&L.dehydrated!==null){if(d===null){if(!K)throw Error(t(318));if(K=m.memoizedState,K=K!==null?K.dehydrated:null,!K)throw Error(t(317));K[ve]=m}else Pf(),(m.flags&128)===0&&(m.memoizedState=null),m.flags|=4;Os(m),K=!1}else bl!==null&&(s1(bl),bl=null),K=!0;if(!K)return m.flags&65536?m:null}return(m.flags&128)!==0?(m.lanes=T,m):(L=L!==null,L!==(d!==null&&d.memoizedState!==null)&&L&&(m.child.flags|=8192,(m.mode&1)!==0&&(d===null||(ei.current&1)!==0?Bi===0&&(Bi=3):l1())),m.updateQueue!==null&&(m.flags|=4),Os(m),null);case 4:return Mf(),KT(d,m),d===null&&mi(m.stateNode.containerInfo),Os(m),null;case 10:return ST(m.type._context),Os(m),null;case 17:return Ca(m.type)&&Bv(),Os(m),null;case 19:if(Jt(ei),K=m.memoizedState,K===null)return Os(m),null;if(L=(m.flags&128)!==0,de=K.rendering,de===null)if(L)i0(K,!1);else{if(Bi!==0||d!==null&&(d.flags&128)!==0)for(d=m.child;d!==null;){if(de=Kv(d),de!==null){for(m.flags|=128,i0(K,!1),L=de.updateQueue,L!==null&&(m.updateQueue=L,m.flags|=4),m.subtreeFlags=0,L=T,T=m.child;T!==null;)K=T,d=L,K.flags&=14680066,de=K.alternate,de===null?(K.childLanes=0,K.lanes=d,K.child=null,K.subtreeFlags=0,K.memoizedProps=null,K.memoizedState=null,K.updateQueue=null,K.dependencies=null,K.stateNode=null):(K.childLanes=de.childLanes,K.lanes=de.lanes,K.child=de.child,K.subtreeFlags=0,K.deletions=null,K.memoizedProps=de.memoizedProps,K.memoizedState=de.memoizedState,K.updateQueue=de.updateQueue,K.type=de.type,d=de.dependencies,K.dependencies=d===null?null:{lanes:d.lanes,firstContext:d.firstContext}),T=T.sibling;return gn(ei,ei.current&1|2),m.child}d=d.sibling}K.tail!==null&&nn()>Uf&&(m.flags|=128,L=!0,i0(K,!1),m.lanes=4194304)}else{if(!L)if(d=Kv(de),d!==null){if(m.flags|=128,L=!0,T=d.updateQueue,T!==null&&(m.updateQueue=T,m.flags|=4),i0(K,!0),K.tail===null&&K.tailMode==="hidden"&&!de.alternate&&!Xn)return Os(m),null}else 2*nn()-K.renderingStartTime>Uf&&T!==1073741824&&(m.flags|=128,L=!0,i0(K,!1),m.lanes=4194304);K.isBackwards?(de.sibling=m.child,m.child=de):(T=K.last,T!==null?T.sibling=de:m.child=de,K.last=de)}return K.tail!==null?(m=K.tail,K.rendering=m,K.tail=m.sibling,K.renderingStartTime=nn(),m.sibling=null,T=ei.current,gn(ei,L?T&1|2:T&1),m):(Os(m),null);case 22:case 23:return o1(),L=m.memoizedState!==null,d!==null&&d.memoizedState!==null!==L&&(m.flags|=8192),L&&(m.mode&1)!==0?(no&1073741824)!==0&&(Os(m),m.subtreeFlags&6&&(m.flags|=8192)):Os(m),null;case 24:return null;case 25:return null}throw Error(t(156,m.tag))}function qz(d,m){switch(gT(m),m.tag){case 1:return Ca(m.type)&&Bv(),d=m.flags,d&65536?(m.flags=d&-65537|128,m):null;case 3:return Mf(),Jt(Ta),Jt(Rs),DT(),d=m.flags,(d&65536)!==0&&(d&128)===0?(m.flags=d&-65537|128,m):null;case 5:return kT(m),null;case 13:if(Jt(ei),d=m.memoizedState,d!==null&&d.dehydrated!==null){if(m.alternate===null)throw Error(t(340));Pf()}return d=m.flags,d&65536?(m.flags=d&-65537|128,m):null;case 19:return Jt(ei),null;case 4:return Mf(),null;case 10:return ST(m.type._context),null;case 22:case 23:return o1(),null;case 24:return null;default:return null}}var ny=!1,Ms=!1,Gz=typeof WeakSet=="function"?WeakSet:Set,rr=null;function Bf(d,m){var T=d.ref;if(T!==null)if(typeof T=="function")try{T(null)}catch(L){ai(d,m,L)}else T.current=null}function XT(d,m,T){try{T()}catch(L){ai(d,m,L)}}var zI=!1;function Kz(d,m){if(oc=hl,d=nt(),ar(d)){if("selectionStart"in d)var T={start:d.selectionStart,end:d.selectionEnd};else e:{T=(T=d.ownerDocument)&&T.defaultView||window;var L=T.getSelection&&T.getSelection();if(L&&L.rangeCount!==0){T=L.anchorNode;var j=L.anchorOffset,K=L.focusNode;L=L.focusOffset;try{T.nodeType,K.nodeType}catch{T=null;break e}var de=0,Ce=-1,Pe=-1,Ze=0,It=0,Ft=d,At=null;t:for(;;){for(var Xt;Ft!==T||j!==0&&Ft.nodeType!==3||(Ce=de+j),Ft!==K||L!==0&&Ft.nodeType!==3||(Pe=de+L),Ft.nodeType===3&&(de+=Ft.nodeValue.length),(Xt=Ft.firstChild)!==null;)At=Ft,Ft=Xt;for(;;){if(Ft===d)break t;if(At===T&&++Ze===j&&(Ce=de),At===K&&++It===L&&(Pe=de),(Xt=Ft.nextSibling)!==null)break;Ft=At,At=Ft.parentNode}Ft=Xt}T=Ce===-1||Pe===-1?null:{start:Ce,end:Pe}}else T=null}T=T||{start:0,end:0}}else T=null;for(p={focusedElem:d,selectionRange:T},hl=!1,rr=m;rr!==null;)if(m=rr,d=m.child,(m.subtreeFlags&1028)!==0&&d!==null)d.return=m,rr=d;else for(;rr!==null;){m=rr;try{var lr=m.alternate;if((m.flags&1024)!==0)switch(m.tag){case 0:case 11:case 15:break;case 1:if(lr!==null){var dr=lr.memoizedProps,vi=lr.memoizedState,He=m.stateNode,Fe=He.getSnapshotBeforeUpdate(m.elementType===m.type?dr:Sl(m.type,dr),vi);He.__reactInternalSnapshotBeforeUpdate=Fe}break;case 3:var Ge=m.stateNode.containerInfo;Ge.nodeType===1?Ge.textContent="":Ge.nodeType===9&&Ge.documentElement&&Ge.removeChild(Ge.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch($t){ai(m,m.return,$t)}if(d=m.sibling,d!==null){d.return=m.return,rr=d;break}rr=m.return}return lr=zI,zI=!1,lr}function s0(d,m,T){var L=m.updateQueue;if(L=L!==null?L.lastEffect:null,L!==null){var j=L=L.next;do{if((j.tag&d)===d){var K=j.destroy;j.destroy=void 0,K!==void 0&&XT(m,T,K)}j=j.next}while(j!==L)}}function iy(d,m){if(m=m.updateQueue,m=m!==null?m.lastEffect:null,m!==null){var T=m=m.next;do{if((T.tag&d)===d){var L=T.create;T.destroy=L()}T=T.next}while(T!==m)}}function YT(d){var m=d.ref;if(m!==null){var T=d.stateNode;switch(d.tag){case 5:d=T;break;default:d=T}typeof m=="function"?m(d):m.current=d}}function HI(d){var m=d.alternate;m!==null&&(d.alternate=null,HI(m)),d.child=null,d.deletions=null,d.sibling=null,d.tag===5&&(m=d.stateNode,m!==null&&(delete m[ve],delete m[qe],delete m[Ct],delete m[Wt],delete m[Gr])),d.stateNode=null,d.return=null,d.dependencies=null,d.memoizedProps=null,d.memoizedState=null,d.pendingProps=null,d.stateNode=null,d.updateQueue=null}function VI(d){return d.tag===5||d.tag===3||d.tag===4}function WI(d){e:for(;;){for(;d.sibling===null;){if(d.return===null||VI(d.return))return null;d=d.return}for(d.sibling.return=d.return,d=d.sibling;d.tag!==5&&d.tag!==6&&d.tag!==18;){if(d.flags&2||d.child===null||d.tag===4)continue e;d.child.return=d,d=d.child}if(!(d.flags&2))return d.stateNode}}function QT(d,m,T){var L=d.tag;if(L===5||L===6)d=d.stateNode,m?T.nodeType===8?T.parentNode.insertBefore(d,m):T.insertBefore(d,m):(T.nodeType===8?(m=T.parentNode,m.insertBefore(d,T)):(m=T,m.appendChild(d)),T=T._reactRootContainer,T!=null||m.onclick!==null||(m.onclick=ad));else if(L!==4&&(d=d.child,d!==null))for(QT(d,m,T),d=d.sibling;d!==null;)QT(d,m,T),d=d.sibling}function JT(d,m,T){var L=d.tag;if(L===5||L===6)d=d.stateNode,m?T.insertBefore(d,m):T.appendChild(d);else if(L!==4&&(d=d.child,d!==null))for(JT(d,m,T),d=d.sibling;d!==null;)JT(d,m,T),d=d.sibling}var fs=null,Tl=!1;function cd(d,m,T){for(T=T.child;T!==null;)qI(d,m,T),T=T.sibling}function qI(d,m,T){if(tt&&typeof tt.onCommitFiberUnmount=="function")try{tt.onCommitFiberUnmount(Je,T)}catch{}switch(T.tag){case 5:Ms||Bf(T,m);case 6:var L=fs,j=Tl;fs=null,cd(d,m,T),fs=L,Tl=j,fs!==null&&(Tl?(d=fs,T=T.stateNode,d.nodeType===8?d.parentNode.removeChild(T):d.removeChild(T)):fs.removeChild(T.stateNode));break;case 18:fs!==null&&(Tl?(d=fs,T=T.stateNode,d.nodeType===8?Y(d.parentNode,T):d.nodeType===1&&Y(d,T),us(d)):Y(fs,T.stateNode));break;case 4:L=fs,j=Tl,fs=T.stateNode.containerInfo,Tl=!0,cd(d,m,T),fs=L,Tl=j;break;case 0:case 11:case 14:case 15:if(!Ms&&(L=T.updateQueue,L!==null&&(L=L.lastEffect,L!==null))){j=L=L.next;do{var K=j,de=K.destroy;K=K.tag,de!==void 0&&((K&2)!==0||(K&4)!==0)&&XT(T,m,de),j=j.next}while(j!==L)}cd(d,m,T);break;case 1:if(!Ms&&(Bf(T,m),L=T.stateNode,typeof L.componentWillUnmount=="function"))try{L.props=T.memoizedProps,L.state=T.memoizedState,L.componentWillUnmount()}catch(Ce){ai(T,m,Ce)}cd(d,m,T);break;case 21:cd(d,m,T);break;case 22:T.mode&1?(Ms=(L=Ms)||T.memoizedState!==null,cd(d,m,T),Ms=L):cd(d,m,T);break;default:cd(d,m,T)}}function GI(d){var m=d.updateQueue;if(m!==null){d.updateQueue=null;var T=d.stateNode;T===null&&(T=d.stateNode=new Gz),m.forEach(function(L){var j=nH.bind(null,d,L);T.has(L)||(T.add(L),L.then(j,j))})}}function Cl(d,m){var T=m.deletions;if(T!==null)for(var L=0;L<T.length;L++){var j=T[L];try{var K=d,de=m,Ce=de;e:for(;Ce!==null;){switch(Ce.tag){case 5:fs=Ce.stateNode,Tl=!1;break e;case 3:fs=Ce.stateNode.containerInfo,Tl=!0;break e;case 4:fs=Ce.stateNode.containerInfo,Tl=!0;break e}Ce=Ce.return}if(fs===null)throw Error(t(160));qI(K,de,j),fs=null,Tl=!1;var Pe=j.alternate;Pe!==null&&(Pe.return=null),j.return=null}catch(Ze){ai(j,m,Ze)}}if(m.subtreeFlags&12854)for(m=m.child;m!==null;)KI(m,d),m=m.sibling}function KI(d,m){var T=d.alternate,L=d.flags;switch(d.tag){case 0:case 11:case 14:case 15:if(Cl(m,d),ou(d),L&4){try{s0(3,d,d.return),iy(3,d)}catch(dr){ai(d,d.return,dr)}try{s0(5,d,d.return)}catch(dr){ai(d,d.return,dr)}}break;case 1:Cl(m,d),ou(d),L&512&&T!==null&&Bf(T,T.return);break;case 5:if(Cl(m,d),ou(d),L&512&&T!==null&&Bf(T,T.return),d.flags&32){var j=d.stateNode;try{Lr(j,"")}catch(dr){ai(d,d.return,dr)}}if(L&4&&(j=d.stateNode,j!=null)){var K=d.memoizedProps,de=T!==null?T.memoizedProps:K,Ce=d.type,Pe=d.updateQueue;if(d.updateQueue=null,Pe!==null)try{Ce==="input"&&K.type==="radio"&&K.name!=null&&Ue(j,K),Hr(Ce,de);var Ze=Hr(Ce,K);for(de=0;de<Pe.length;de+=2){var It=Pe[de],Ft=Pe[de+1];It==="style"?jt(j,Ft):It==="dangerouslySetInnerHTML"?yr(j,Ft):It==="children"?Lr(j,Ft):D(j,It,Ft,Ze)}switch(Ce){case"input":et(j,K);break;case"textarea":hr(j,K);break;case"select":var At=j._wrapperState.wasMultiple;j._wrapperState.wasMultiple=!!K.multiple;var Xt=K.value;Xt!=null?bt(j,!!K.multiple,Xt,!1):At!==!!K.multiple&&(K.defaultValue!=null?bt(j,!!K.multiple,K.defaultValue,!0):bt(j,!!K.multiple,K.multiple?[]:"",!1))}j[qe]=K}catch(dr){ai(d,d.return,dr)}}break;case 6:if(Cl(m,d),ou(d),L&4){if(d.stateNode===null)throw Error(t(162));j=d.stateNode,K=d.memoizedProps;try{j.nodeValue=K}catch(dr){ai(d,d.return,dr)}}break;case 3:if(Cl(m,d),ou(d),L&4&&T!==null&&T.memoizedState.isDehydrated)try{us(m.containerInfo)}catch(dr){ai(d,d.return,dr)}break;case 4:Cl(m,d),ou(d);break;case 13:Cl(m,d),ou(d),j=d.child,j.flags&8192&&(K=j.memoizedState!==null,j.stateNode.isHidden=K,!K||j.alternate!==null&&j.alternate.memoizedState!==null||(t1=nn())),L&4&&GI(d);break;case 22:if(It=T!==null&&T.memoizedState!==null,d.mode&1?(Ms=(Ze=Ms)||It,Cl(m,d),Ms=Ze):Cl(m,d),ou(d),L&8192){if(Ze=d.memoizedState!==null,(d.stateNode.isHidden=Ze)&&!It&&(d.mode&1)!==0)for(rr=d,It=d.child;It!==null;){for(Ft=rr=It;rr!==null;){switch(At=rr,Xt=At.child,At.tag){case 0:case 11:case 14:case 15:s0(4,At,At.return);break;case 1:Bf(At,At.return);var lr=At.stateNode;if(typeof lr.componentWillUnmount=="function"){L=At,T=At.return;try{m=L,lr.props=m.memoizedProps,lr.state=m.memoizedState,lr.componentWillUnmount()}catch(dr){ai(L,T,dr)}}break;case 5:Bf(At,At.return);break;case 22:if(At.memoizedState!==null){QI(Ft);continue}}Xt!==null?(Xt.return=At,rr=Xt):QI(Ft)}It=It.sibling}e:for(It=null,Ft=d;;){if(Ft.tag===5){if(It===null){It=Ft;try{j=Ft.stateNode,Ze?(K=j.style,typeof K.setProperty=="function"?K.setProperty("display","none","important"):K.display="none"):(Ce=Ft.stateNode,Pe=Ft.memoizedProps.style,de=Pe!=null&&Pe.hasOwnProperty("display")?Pe.display:null,Ce.style.display=rn("display",de))}catch(dr){ai(d,d.return,dr)}}}else if(Ft.tag===6){if(It===null)try{Ft.stateNode.nodeValue=Ze?"":Ft.memoizedProps}catch(dr){ai(d,d.return,dr)}}else if((Ft.tag!==22&&Ft.tag!==23||Ft.memoizedState===null||Ft===d)&&Ft.child!==null){Ft.child.return=Ft,Ft=Ft.child;continue}if(Ft===d)break e;for(;Ft.sibling===null;){if(Ft.return===null||Ft.return===d)break e;It===Ft&&(It=null),Ft=Ft.return}It===Ft&&(It=null),Ft.sibling.return=Ft.return,Ft=Ft.sibling}}break;case 19:Cl(m,d),ou(d),L&4&&GI(d);break;case 21:break;default:Cl(m,d),ou(d)}}function ou(d){var m=d.flags;if(m&2){try{e:{for(var T=d.return;T!==null;){if(VI(T)){var L=T;break e}T=T.return}throw Error(t(160))}switch(L.tag){case 5:var j=L.stateNode;L.flags&32&&(Lr(j,""),L.flags&=-33);var K=WI(d);JT(d,K,j);break;case 3:case 4:var de=L.stateNode.containerInfo,Ce=WI(d);QT(d,Ce,de);break;default:throw Error(t(161))}}catch(Pe){ai(d,d.return,Pe)}d.flags&=-3}m&4096&&(d.flags&=-4097)}function Xz(d,m,T){rr=d,XI(d)}function XI(d,m,T){for(var L=(d.mode&1)!==0;rr!==null;){var j=rr,K=j.child;if(j.tag===22&&L){var de=j.memoizedState!==null||ny;if(!de){var Ce=j.alternate,Pe=Ce!==null&&Ce.memoizedState!==null||Ms;Ce=ny;var Ze=Ms;if(ny=de,(Ms=Pe)&&!Ze)for(rr=j;rr!==null;)de=rr,Pe=de.child,de.tag===22&&de.memoizedState!==null?JI(j):Pe!==null?(Pe.return=de,rr=Pe):JI(j);for(;K!==null;)rr=K,XI(K),K=K.sibling;rr=j,ny=Ce,Ms=Ze}YI(d)}else(j.subtreeFlags&8772)!==0&&K!==null?(K.return=j,rr=K):YI(d)}}function YI(d){for(;rr!==null;){var m=rr;if((m.flags&8772)!==0){var T=m.alternate;try{if((m.flags&8772)!==0)switch(m.tag){case 0:case 11:case 15:Ms||iy(5,m);break;case 1:var L=m.stateNode;if(m.flags&4&&!Ms)if(T===null)L.componentDidMount();else{var j=m.elementType===m.type?T.memoizedProps:Sl(m.type,T.memoizedProps);L.componentDidUpdate(j,T.memoizedState,L.__reactInternalSnapshotBeforeUpdate)}var K=m.updateQueue;K!==null&&QD(m,K,L);break;case 3:var de=m.updateQueue;if(de!==null){if(T=null,m.child!==null)switch(m.child.tag){case 5:T=m.child.stateNode;break;case 1:T=m.child.stateNode}QD(m,de,T)}break;case 5:var Ce=m.stateNode;if(T===null&&m.flags&4){T=Ce;var Pe=m.memoizedProps;switch(m.type){case"button":case"input":case"select":case"textarea":Pe.autoFocus&&T.focus();break;case"img":Pe.src&&(T.src=Pe.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(m.memoizedState===null){var Ze=m.alternate;if(Ze!==null){var It=Ze.memoizedState;if(It!==null){var Ft=It.dehydrated;Ft!==null&&us(Ft)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}Ms||m.flags&512&&YT(m)}catch(At){ai(m,m.return,At)}}if(m===d){rr=null;break}if(T=m.sibling,T!==null){T.return=m.return,rr=T;break}rr=m.return}}function QI(d){for(;rr!==null;){var m=rr;if(m===d){rr=null;break}var T=m.sibling;if(T!==null){T.return=m.return,rr=T;break}rr=m.return}}function JI(d){for(;rr!==null;){var m=rr;try{switch(m.tag){case 0:case 11:case 15:var T=m.return;try{iy(4,m)}catch(Pe){ai(m,T,Pe)}break;case 1:var L=m.stateNode;if(typeof L.componentDidMount=="function"){var j=m.return;try{L.componentDidMount()}catch(Pe){ai(m,j,Pe)}}var K=m.return;try{YT(m)}catch(Pe){ai(m,K,Pe)}break;case 5:var de=m.return;try{YT(m)}catch(Pe){ai(m,de,Pe)}}}catch(Pe){ai(m,m.return,Pe)}if(m===d){rr=null;break}var Ce=m.sibling;if(Ce!==null){Ce.return=m.return,rr=Ce;break}rr=m.return}}var Yz=Math.ceil,sy=I.ReactCurrentDispatcher,ZT=I.ReactCurrentOwner,Bo=I.ReactCurrentBatchConfig,mn=0,Yi=null,Ei=null,ps=0,no=0,Nf=Sa(0),Bi=0,a0=null,xh=0,ay=0,e1=0,o0=null,Ea=null,t1=0,Uf=1/0,mc=null,oy=!1,r1=null,dd=null,ly=!1,hd=null,uy=0,l0=0,n1=null,cy=-1,dy=0;function Xs(){return(mn&6)!==0?nn():cy!==-1?cy:cy=nn()}function fd(d){return(d.mode&1)===0?1:(mn&2)!==0&&ps!==0?ps&-ps:Lz.transition!==null?(dy===0&&(dy=Hc()),dy):(d=qr,d!==0||(d=window.event,d=d===void 0?16:Vs(d.type)),d)}function wl(d,m,T,L){if(50<l0)throw l0=0,n1=null,Error(t(185));zi(d,T,L),((mn&2)===0||d!==Yi)&&(d===Yi&&((mn&2)===0&&(ay|=T),Bi===4&&pd(d,ps)),ka(d,L),T===1&&mn===0&&(m.mode&1)===0&&(Uf=nn()+500,Uv&&od()))}function ka(d,m){var T=d.callbackNode;$n(d,m);var L=zr(d,d===Yi?ps:0);if(L===0)T!==null&&Ti(T),d.callbackNode=null,d.callbackPriority=0;else if(m=L&-L,d.callbackPriority!==m){if(T!=null&&Ti(T),m===1)d.tag===0?Rz(eP.bind(null,d)):UD(eP.bind(null,d)),R(function(){(mn&6)===0&&od()}),T=null;else{switch(ls(L)){case 1:T=hi;break;case 4:T=si;break;case 16:T=Mr;break;case 536870912:T=$e;break;default:T=Mr}T=lP(T,ZI.bind(null,d))}d.callbackPriority=m,d.callbackNode=T}}function ZI(d,m){if(cy=-1,dy=0,(mn&6)!==0)throw Error(t(327));var T=d.callbackNode;if($f()&&d.callbackNode!==T)return null;var L=zr(d,d===Yi?ps:0);if(L===0)return null;if((L&30)!==0||(L&d.expiredLanes)!==0||m)m=hy(d,L);else{m=L;var j=mn;mn|=2;var K=rP();(Yi!==d||ps!==m)&&(mc=null,Uf=nn()+500,bh(d,m));do try{Zz();break}catch(Ce){tP(d,Ce)}while(!0);bT(),sy.current=K,mn=j,Ei!==null?m=0:(Yi=null,ps=0,m=Bi)}if(m!==0){if(m===2&&(j=Es(d),j!==0&&(L=j,m=i1(d,j))),m===1)throw T=a0,bh(d,0),pd(d,L),ka(d,nn()),T;if(m===6)pd(d,L);else{if(j=d.current.alternate,(L&30)===0&&!Qz(j)&&(m=hy(d,L),m===2&&(K=Es(d),K!==0&&(L=K,m=i1(d,K))),m===1))throw T=a0,bh(d,0),pd(d,L),ka(d,nn()),T;switch(d.finishedWork=j,d.finishedLanes=L,m){case 0:case 1:throw Error(t(345));case 2:Sh(d,Ea,mc);break;case 3:if(pd(d,L),(L&130023424)===L&&(m=t1+500-nn(),10<m)){if(zr(d,0)!==0)break;if(j=d.suspendedLanes,(j&L)!==L){Xs(),d.pingedLanes|=d.suspendedLanes&j;break}d.timeoutHandle=S(Sh.bind(null,d,Ea,mc),m);break}Sh(d,Ea,mc);break;case 4:if(pd(d,L),(L&4194240)===L)break;for(m=d.eventTimes,j=-1;0<L;){var de=31-kt(L);K=1<<de,de=m[de],de>j&&(j=de),L&=~K}if(L=j,L=nn()-L,L=(120>L?120:480>L?480:1080>L?1080:1920>L?1920:3e3>L?3e3:4320>L?4320:1960*Yz(L/1960))-L,10<L){d.timeoutHandle=S(Sh.bind(null,d,Ea,mc),L);break}Sh(d,Ea,mc);break;case 5:Sh(d,Ea,mc);break;default:throw Error(t(329))}}}return ka(d,nn()),d.callbackNode===T?ZI.bind(null,d):null}function i1(d,m){var T=o0;return d.current.memoizedState.isDehydrated&&(bh(d,m).flags|=256),d=hy(d,m),d!==2&&(m=Ea,Ea=T,m!==null&&s1(m)),d}function s1(d){Ea===null?Ea=d:Ea.push.apply(Ea,d)}function Qz(d){for(var m=d;;){if(m.flags&16384){var T=m.updateQueue;if(T!==null&&(T=T.stores,T!==null))for(var L=0;L<T.length;L++){var j=T[L],K=j.getSnapshot;j=j.value;try{if(!we(K(),j))return!1}catch{return!1}}}if(T=m.child,m.subtreeFlags&16384&&T!==null)T.return=m,m=T;else{if(m===d)break;for(;m.sibling===null;){if(m.return===null||m.return===d)return!0;m=m.return}m.sibling.return=m.return,m=m.sibling}}return!0}function pd(d,m){for(m&=~e1,m&=~ay,d.suspendedLanes|=m,d.pingedLanes&=~m,d=d.expirationTimes;0<m;){var T=31-kt(m),L=1<<T;d[T]=-1,m&=~L}}function eP(d){if((mn&6)!==0)throw Error(t(327));$f();var m=zr(d,0);if((m&1)===0)return ka(d,nn()),null;var T=hy(d,m);if(d.tag!==0&&T===2){var L=Es(d);L!==0&&(m=L,T=i1(d,L))}if(T===1)throw T=a0,bh(d,0),pd(d,m),ka(d,nn()),T;if(T===6)throw Error(t(345));return d.finishedWork=d.current.alternate,d.finishedLanes=m,Sh(d,Ea,mc),ka(d,nn()),null}function a1(d,m){var T=mn;mn|=1;try{return d(m)}finally{mn=T,mn===0&&(Uf=nn()+500,Uv&&od())}}function _h(d){hd!==null&&hd.tag===0&&(mn&6)===0&&$f();var m=mn;mn|=1;var T=Bo.transition,L=qr;try{if(Bo.transition=null,qr=1,d)return d()}finally{qr=L,Bo.transition=T,mn=m,(mn&6)===0&&od()}}function o1(){no=Nf.current,Jt(Nf)}function bh(d,m){d.finishedWork=null,d.finishedLanes=0;var T=d.timeoutHandle;if(T!==-1&&(d.timeoutHandle=-1,b(T)),Ei!==null)for(T=Ei.return;T!==null;){var L=T;switch(gT(L),L.tag){case 1:L=L.type.childContextTypes,L!=null&&Bv();break;case 3:Mf(),Jt(Ta),Jt(Rs),DT();break;case 5:kT(L);break;case 4:Mf();break;case 13:Jt(ei);break;case 19:Jt(ei);break;case 10:ST(L.type._context);break;case 22:case 23:o1()}T=T.return}if(Yi=d,Ei=d=md(d.current,null),ps=no=m,Bi=0,a0=null,e1=ay=xh=0,Ea=o0=null,gh!==null){for(m=0;m<gh.length;m++)if(T=gh[m],L=T.interleaved,L!==null){T.interleaved=null;var j=L.next,K=T.pending;if(K!==null){var de=K.next;K.next=j,L.next=de}T.pending=L}gh=null}return d}function tP(d,m){do{var T=Ei;try{if(bT(),Xv.current=Zv,Yv){for(var L=ti.memoizedState;L!==null;){var j=L.queue;j!==null&&(j.pending=null),L=L.next}Yv=!1}if(yh=0,Xi=Fi=ti=null,e0=!1,t0=0,ZT.current=null,T===null||T.return===null){Bi=1,a0=m,Ei=null;break}e:{var K=d,de=T.return,Ce=T,Pe=m;if(m=ps,Ce.flags|=32768,Pe!==null&&typeof Pe=="object"&&typeof Pe.then=="function"){var Ze=Pe,It=Ce,Ft=It.tag;if((It.mode&1)===0&&(Ft===0||Ft===11||Ft===15)){var At=It.alternate;At?(It.updateQueue=At.updateQueue,It.memoizedState=At.memoizedState,It.lanes=At.lanes):(It.updateQueue=null,It.memoizedState=null)}var Xt=EI(de);if(Xt!==null){Xt.flags&=-257,kI(Xt,de,Ce,K,m),Xt.mode&1&&wI(K,Ze,m),m=Xt,Pe=Ze;var lr=m.updateQueue;if(lr===null){var dr=new Set;dr.add(Pe),m.updateQueue=dr}else lr.add(Pe);break e}else{if((m&1)===0){wI(K,Ze,m),l1();break e}Pe=Error(t(426))}}else if(Xn&&Ce.mode&1){var vi=EI(de);if(vi!==null){(vi.flags&65536)===0&&(vi.flags|=256),kI(vi,de,Ce,K,m),xT(Ff(Pe,Ce));break e}}K=Pe=Ff(Pe,Ce),Bi!==4&&(Bi=2),o0===null?o0=[K]:o0.push(K),K=de;do{switch(K.tag){case 3:K.flags|=65536,m&=-m,K.lanes|=m;var He=TI(K,Pe,m);YD(K,He);break e;case 1:Ce=Pe;var Fe=K.type,Ge=K.stateNode;if((K.flags&128)===0&&(typeof Fe.getDerivedStateFromError=="function"||Ge!==null&&typeof Ge.componentDidCatch=="function"&&(dd===null||!dd.has(Ge)))){K.flags|=65536,m&=-m,K.lanes|=m;var $t=CI(K,Ce,m);YD(K,$t);break e}}K=K.return}while(K!==null)}iP(T)}catch(pr){m=pr,Ei===T&&T!==null&&(Ei=T=T.return);continue}break}while(!0)}function rP(){var d=sy.current;return sy.current=Zv,d===null?Zv:d}function l1(){(Bi===0||Bi===3||Bi===2)&&(Bi=4),Yi===null||(xh&268435455)===0&&(ay&268435455)===0||pd(Yi,ps)}function hy(d,m){var T=mn;mn|=2;var L=rP();(Yi!==d||ps!==m)&&(mc=null,bh(d,m));do try{Jz();break}catch(j){tP(d,j)}while(!0);if(bT(),mn=T,sy.current=L,Ei!==null)throw Error(t(261));return Yi=null,ps=0,Bi}function Jz(){for(;Ei!==null;)nP(Ei)}function Zz(){for(;Ei!==null&&!yn();)nP(Ei)}function nP(d){var m=oP(d.alternate,d,no);d.memoizedProps=d.pendingProps,m===null?iP(d):Ei=m,ZT.current=null}function iP(d){var m=d;do{var T=m.alternate;if(d=m.return,(m.flags&32768)===0){if(T=Wz(T,m,no),T!==null){Ei=T;return}}else{if(T=qz(T,m),T!==null){T.flags&=32767,Ei=T;return}if(d!==null)d.flags|=32768,d.subtreeFlags=0,d.deletions=null;else{Bi=6,Ei=null;return}}if(m=m.sibling,m!==null){Ei=m;return}Ei=m=d}while(m!==null);Bi===0&&(Bi=5)}function Sh(d,m,T){var L=qr,j=Bo.transition;try{Bo.transition=null,qr=1,eH(d,m,T,L)}finally{Bo.transition=j,qr=L}return null}function eH(d,m,T,L){do $f();while(hd!==null);if((mn&6)!==0)throw Error(t(327));T=d.finishedWork;var j=d.finishedLanes;if(T===null)return null;if(d.finishedWork=null,d.finishedLanes=0,T===d.current)throw Error(t(177));d.callbackNode=null,d.callbackPriority=0;var K=T.lanes|T.childLanes;if(Rn(d,K),d===Yi&&(Ei=Yi=null,ps=0),(T.subtreeFlags&2064)===0&&(T.flags&2064)===0||ly||(ly=!0,lP(Mr,function(){return $f(),null})),K=(T.flags&15990)!==0,(T.subtreeFlags&15990)!==0||K){K=Bo.transition,Bo.transition=null;var de=qr;qr=1;var Ce=mn;mn|=4,ZT.current=null,Kz(d,T),KI(T,d),In(p),hl=!!oc,p=oc=null,d.current=T,Xz(T),Cs(),mn=Ce,qr=de,Bo.transition=K}else d.current=T;if(ly&&(ly=!1,hd=d,uy=j),K=d.pendingLanes,K===0&&(dd=null),xt(T.stateNode),ka(d,nn()),m!==null)for(L=d.onRecoverableError,T=0;T<m.length;T++)j=m[T],L(j.value,{componentStack:j.stack,digest:j.digest});if(oy)throw oy=!1,d=r1,r1=null,d;return(uy&1)!==0&&d.tag!==0&&$f(),K=d.pendingLanes,(K&1)!==0?d===n1?l0++:(l0=0,n1=d):l0=0,od(),null}function $f(){if(hd!==null){var d=ls(uy),m=Bo.transition,T=qr;try{if(Bo.transition=null,qr=16>d?16:d,hd===null)var L=!1;else{if(d=hd,hd=null,uy=0,(mn&6)!==0)throw Error(t(331));var j=mn;for(mn|=4,rr=d.current;rr!==null;){var K=rr,de=K.child;if((rr.flags&16)!==0){var Ce=K.deletions;if(Ce!==null){for(var Pe=0;Pe<Ce.length;Pe++){var Ze=Ce[Pe];for(rr=Ze;rr!==null;){var It=rr;switch(It.tag){case 0:case 11:case 15:s0(8,It,K)}var Ft=It.child;if(Ft!==null)Ft.return=It,rr=Ft;else for(;rr!==null;){It=rr;var At=It.sibling,Xt=It.return;if(HI(It),It===Ze){rr=null;break}if(At!==null){At.return=Xt,rr=At;break}rr=Xt}}}var lr=K.alternate;if(lr!==null){var dr=lr.child;if(dr!==null){lr.child=null;do{var vi=dr.sibling;dr.sibling=null,dr=vi}while(dr!==null)}}rr=K}}if((K.subtreeFlags&2064)!==0&&de!==null)de.return=K,rr=de;else e:for(;rr!==null;){if(K=rr,(K.flags&2048)!==0)switch(K.tag){case 0:case 11:case 15:s0(9,K,K.return)}var He=K.sibling;if(He!==null){He.return=K.return,rr=He;break e}rr=K.return}}var Fe=d.current;for(rr=Fe;rr!==null;){de=rr;var Ge=de.child;if((de.subtreeFlags&2064)!==0&&Ge!==null)Ge.return=de,rr=Ge;else e:for(de=Fe;rr!==null;){if(Ce=rr,(Ce.flags&2048)!==0)try{switch(Ce.tag){case 0:case 11:case 15:iy(9,Ce)}}catch(pr){ai(Ce,Ce.return,pr)}if(Ce===de){rr=null;break e}var $t=Ce.sibling;if($t!==null){$t.return=Ce.return,rr=$t;break e}rr=Ce.return}}if(mn=j,od(),tt&&typeof tt.onPostCommitFiberRoot=="function")try{tt.onPostCommitFiberRoot(Je,d)}catch{}L=!0}return L}finally{qr=T,Bo.transition=m}}return!1}function sP(d,m,T){m=Ff(T,m),m=TI(d,m,1),d=ud(d,m,1),m=Xs(),d!==null&&(zi(d,1,m),ka(d,m))}function ai(d,m,T){if(d.tag===3)sP(d,d,T);else for(;m!==null;){if(m.tag===3){sP(m,d,T);break}else if(m.tag===1){var L=m.stateNode;if(typeof m.type.getDerivedStateFromError=="function"||typeof L.componentDidCatch=="function"&&(dd===null||!dd.has(L))){d=Ff(T,d),d=CI(m,d,1),m=ud(m,d,1),d=Xs(),m!==null&&(zi(m,1,d),ka(m,d));break}}m=m.return}}function tH(d,m,T){var L=d.pingCache;L!==null&&L.delete(m),m=Xs(),d.pingedLanes|=d.suspendedLanes&T,Yi===d&&(ps&T)===T&&(Bi===4||Bi===3&&(ps&130023424)===ps&&500>nn()-t1?bh(d,0):e1|=T),ka(d,m)}function aP(d,m){m===0&&((d.mode&1)===0?m=1:(m=Er,Er<<=1,(Er&130023424)===0&&(Er=4194304)));var T=Xs();d=hc(d,m),d!==null&&(zi(d,m,T),ka(d,T))}function rH(d){var m=d.memoizedState,T=0;m!==null&&(T=m.retryLane),aP(d,T)}function nH(d,m){var T=0;switch(d.tag){case 13:var L=d.stateNode,j=d.memoizedState;j!==null&&(T=j.retryLane);break;case 19:L=d.stateNode;break;default:throw Error(t(314))}L!==null&&L.delete(m),aP(d,T)}var oP;oP=function(d,m,T){if(d!==null)if(d.memoizedProps!==m.pendingProps||Ta.current)wa=!0;else{if((d.lanes&T)===0&&(m.flags&128)===0)return wa=!1,Vz(d,m,T);wa=(d.flags&131072)!==0}else wa=!1,Xn&&(m.flags&1048576)!==0&&$D(m,jv,m.index);switch(m.lanes=0,m.tag){case 2:var L=m.type;ry(d,m),d=m.pendingProps;var j=Af(m,Rs.current);Of(m,T),j=RT(null,m,L,d,j,T);var K=LT();return m.flags|=1,typeof j=="object"&&j!==null&&typeof j.render=="function"&&j.$$typeof===void 0?(m.tag=1,m.memoizedState=null,m.updateQueue=null,Ca(L)?(K=!0,Nv(m)):K=!1,m.memoizedState=j.state!==null&&j.state!==void 0?j.state:null,wT(m),j.updater=ey,m.stateNode=j,j._reactInternals=m,UT(m,L,d,T),m=HT(null,m,L,!0,K,T)):(m.tag=0,Xn&&K&&mT(m),Ks(null,m,j,T),m=m.child),m;case 16:L=m.elementType;e:{switch(ry(d,m),d=m.pendingProps,j=L._init,L=j(L._payload),m.type=L,j=m.tag=sH(L),d=Sl(L,d),j){case 0:m=zT(null,m,L,d,T);break e;case 1:m=LI(null,m,L,d,T);break e;case 11:m=AI(null,m,L,d,T);break e;case 14:m=DI(null,m,L,Sl(L.type,d),T);break e}throw Error(t(306,L,""))}return m;case 0:return L=m.type,j=m.pendingProps,j=m.elementType===L?j:Sl(L,j),zT(d,m,L,j,T);case 1:return L=m.type,j=m.pendingProps,j=m.elementType===L?j:Sl(L,j),LI(d,m,L,j,T);case 3:e:{if(OI(m),d===null)throw Error(t(387));L=m.pendingProps,K=m.memoizedState,j=K.element,XD(d,m),Gv(m,L,null,T);var de=m.memoizedState;if(L=de.element,K.isDehydrated)if(K={element:L,isDehydrated:!1,cache:de.cache,pendingSuspenseBoundaries:de.pendingSuspenseBoundaries,transitions:de.transitions},m.updateQueue.baseState=K,m.memoizedState=K,m.flags&256){j=Ff(Error(t(423)),m),m=MI(d,m,L,T,j);break e}else if(L!==j){j=Ff(Error(t(424)),m),m=MI(d,m,L,T,j);break e}else for(ro=J(m.stateNode.containerInfo.firstChild),to=m,Xn=!0,bl=null,T=GD(m,null,L,T),m.child=T;T;)T.flags=T.flags&-3|4096,T=T.sibling;else{if(Pf(),L===j){m=pc(d,m,T);break e}Ks(d,m,L,T)}m=m.child}return m;case 5:return JD(m),d===null&&yT(m),L=m.type,j=m.pendingProps,K=d!==null?d.memoizedProps:null,de=j.children,x(L,j)?de=null:K!==null&&x(L,K)&&(m.flags|=32),RI(d,m),Ks(d,m,de,T),m.child;case 6:return d===null&&yT(m),null;case 13:return FI(d,m,T);case 4:return ET(m,m.stateNode.containerInfo),L=m.pendingProps,d===null?m.child=Rf(m,null,L,T):Ks(d,m,L,T),m.child;case 11:return L=m.type,j=m.pendingProps,j=m.elementType===L?j:Sl(L,j),AI(d,m,L,j,T);case 7:return Ks(d,m,m.pendingProps,T),m.child;case 8:return Ks(d,m,m.pendingProps.children,T),m.child;case 12:return Ks(d,m,m.pendingProps.children,T),m.child;case 10:e:{if(L=m.type._context,j=m.pendingProps,K=m.memoizedProps,de=j.value,gn(Vv,L._currentValue),L._currentValue=de,K!==null)if(we(K.value,de)){if(K.children===j.children&&!Ta.current){m=pc(d,m,T);break e}}else for(K=m.child,K!==null&&(K.return=m);K!==null;){var Ce=K.dependencies;if(Ce!==null){de=K.child;for(var Pe=Ce.firstContext;Pe!==null;){if(Pe.context===L){if(K.tag===1){Pe=fc(-1,T&-T),Pe.tag=2;var Ze=K.updateQueue;if(Ze!==null){Ze=Ze.shared;var It=Ze.pending;It===null?Pe.next=Pe:(Pe.next=It.next,It.next=Pe),Ze.pending=Pe}}K.lanes|=T,Pe=K.alternate,Pe!==null&&(Pe.lanes|=T),TT(K.return,T,m),Ce.lanes|=T;break}Pe=Pe.next}}else if(K.tag===10)de=K.type===m.type?null:K.child;else if(K.tag===18){if(de=K.return,de===null)throw Error(t(341));de.lanes|=T,Ce=de.alternate,Ce!==null&&(Ce.lanes|=T),TT(de,T,m),de=K.sibling}else de=K.child;if(de!==null)de.return=K;else for(de=K;de!==null;){if(de===m){de=null;break}if(K=de.sibling,K!==null){K.return=de.return,de=K;break}de=de.return}K=de}Ks(d,m,j.children,T),m=m.child}return m;case 9:return j=m.type,L=m.pendingProps.children,Of(m,T),j=Mo(j),L=L(j),m.flags|=1,Ks(d,m,L,T),m.child;case 14:return L=m.type,j=Sl(L,m.pendingProps),j=Sl(L.type,j),DI(d,m,L,j,T);case 15:return II(d,m,m.type,m.pendingProps,T);case 17:return L=m.type,j=m.pendingProps,j=m.elementType===L?j:Sl(L,j),ry(d,m),m.tag=1,Ca(L)?(d=!0,Nv(m)):d=!1,Of(m,T),bI(m,L,j),UT(m,L,j,T),HT(null,m,L,!0,d,T);case 19:return NI(d,m,T);case 22:return PI(d,m,T)}throw Error(t(156,m.tag))};function lP(d,m){return ir(d,m)}function iH(d,m,T,L){this.tag=d,this.key=T,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=m,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=L,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function No(d,m,T,L){return new iH(d,m,T,L)}function u1(d){return d=d.prototype,!(!d||!d.isReactComponent)}function sH(d){if(typeof d=="function")return u1(d)?1:0;if(d!=null){if(d=d.$$typeof,d===W)return 11;if(d===ie)return 14}return 2}function md(d,m){var T=d.alternate;return T===null?(T=No(d.tag,m,d.key,d.mode),T.elementType=d.elementType,T.type=d.type,T.stateNode=d.stateNode,T.alternate=d,d.alternate=T):(T.pendingProps=m,T.type=d.type,T.flags=0,T.subtreeFlags=0,T.deletions=null),T.flags=d.flags&14680064,T.childLanes=d.childLanes,T.lanes=d.lanes,T.child=d.child,T.memoizedProps=d.memoizedProps,T.memoizedState=d.memoizedState,T.updateQueue=d.updateQueue,m=d.dependencies,T.dependencies=m===null?null:{lanes:m.lanes,firstContext:m.firstContext},T.sibling=d.sibling,T.index=d.index,T.ref=d.ref,T}function fy(d,m,T,L,j,K){var de=2;if(L=d,typeof d=="function")u1(d)&&(de=1);else if(typeof d=="string")de=5;else e:switch(d){case N:return Th(T.children,j,K,m);case U:de=8,j|=8;break;case B:return d=No(12,T,m,j|2),d.elementType=B,d.lanes=K,d;case V:return d=No(13,T,m,j),d.elementType=V,d.lanes=K,d;case Q:return d=No(19,T,m,j),d.elementType=Q,d.lanes=K,d;case ue:return py(T,j,K,m);default:if(typeof d=="object"&&d!==null)switch(d.$$typeof){case A:de=10;break e;case $:de=9;break e;case W:de=11;break e;case ie:de=14;break e;case ne:de=16,L=null;break e}throw Error(t(130,d==null?d:typeof d,""))}return m=No(de,T,m,j),m.elementType=d,m.type=L,m.lanes=K,m}function Th(d,m,T,L){return d=No(7,d,L,m),d.lanes=T,d}function py(d,m,T,L){return d=No(22,d,L,m),d.elementType=ue,d.lanes=T,d.stateNode={isHidden:!1},d}function c1(d,m,T){return d=No(6,d,null,m),d.lanes=T,d}function d1(d,m,T){return m=No(4,d.children!==null?d.children:[],d.key,m),m.lanes=T,m.stateNode={containerInfo:d.containerInfo,pendingChildren:null,implementation:d.implementation},m}function aH(d,m,T,L,j){this.tag=m,this.containerInfo=d,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ks(0),this.expirationTimes=ks(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ks(0),this.identifierPrefix=L,this.onRecoverableError=j,this.mutableSourceEagerHydrationData=null}function h1(d,m,T,L,j,K,de,Ce,Pe){return d=new aH(d,m,T,Ce,Pe),m===1?(m=1,K===!0&&(m|=8)):m=0,K=No(3,null,null,m),d.current=K,K.stateNode=d,K.memoizedState={element:L,isDehydrated:T,cache:null,transitions:null,pendingSuspenseBoundaries:null},wT(K),d}function oH(d,m,T){var L=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:P,key:L==null?null:""+L,children:d,containerInfo:m,implementation:T}}function uP(d){if(!d)return Kn;d=d._reactInternals;e:{if(Tt(d)!==d||d.tag!==1)throw Error(t(170));var m=d;do{switch(m.tag){case 3:m=m.stateNode.context;break e;case 1:if(Ca(m.type)){m=m.stateNode.__reactInternalMemoizedMergedChildContext;break e}}m=m.return}while(m!==null);throw Error(t(171))}if(d.tag===1){var T=d.type;if(Ca(T))return BD(d,T,m)}return m}function cP(d,m,T,L,j,K,de,Ce,Pe){return d=h1(T,L,!0,d,j,K,de,Ce,Pe),d.context=uP(null),T=d.current,L=Xs(),j=fd(T),K=fc(L,j),K.callback=m??null,ud(T,K,j),d.current.lanes=j,zi(d,j,L),ka(d,L),d}function my(d,m,T,L){var j=m.current,K=Xs(),de=fd(j);return T=uP(T),m.context===null?m.context=T:m.pendingContext=T,m=fc(K,de),m.payload={element:d},L=L===void 0?null:L,L!==null&&(m.callback=L),d=ud(j,m,de),d!==null&&(wl(d,j,de,K),qv(d,j,de)),de}function gy(d){if(d=d.current,!d.child)return null;switch(d.child.tag){case 5:return d.child.stateNode;default:return d.child.stateNode}}function dP(d,m){if(d=d.memoizedState,d!==null&&d.dehydrated!==null){var T=d.retryLane;d.retryLane=T!==0&&T<m?T:m}}function f1(d,m){dP(d,m),(d=d.alternate)&&dP(d,m)}function lH(){return null}var hP=typeof reportError=="function"?reportError:function(d){console.error(d)};function p1(d){this._internalRoot=d}vy.prototype.render=p1.prototype.render=function(d){var m=this._internalRoot;if(m===null)throw Error(t(409));my(d,m,null,null)},vy.prototype.unmount=p1.prototype.unmount=function(){var d=this._internalRoot;if(d!==null){this._internalRoot=null;var m=d.containerInfo;_h(function(){my(null,d,null,null)}),m[Ee]=null}};function vy(d){this._internalRoot=d}vy.prototype.unstable_scheduleHydration=function(d){if(d){var m=Hl();d={blockedOn:null,target:d,priority:m};for(var T=0;T<ga.length&&m!==0&&m<ga[T].priority;T++);ga.splice(T,0,d),T===0&&ql(d)}};function m1(d){return!(!d||d.nodeType!==1&&d.nodeType!==9&&d.nodeType!==11)}function yy(d){return!(!d||d.nodeType!==1&&d.nodeType!==9&&d.nodeType!==11&&(d.nodeType!==8||d.nodeValue!==" react-mount-point-unstable "))}function fP(){}function uH(d,m,T,L,j){if(j){if(typeof L=="function"){var K=L;L=function(){var Ze=gy(de);K.call(Ze)}}var de=cP(m,L,d,0,null,!1,!1,"",fP);return d._reactRootContainer=de,d[Ee]=de.current,mi(d.nodeType===8?d.parentNode:d),_h(),de}for(;j=d.lastChild;)d.removeChild(j);if(typeof L=="function"){var Ce=L;L=function(){var Ze=gy(Pe);Ce.call(Ze)}}var Pe=h1(d,0,!1,null,null,!1,!1,"",fP);return d._reactRootContainer=Pe,d[Ee]=Pe.current,mi(d.nodeType===8?d.parentNode:d),_h(function(){my(m,Pe,T,L)}),Pe}function xy(d,m,T,L,j){var K=T._reactRootContainer;if(K){var de=K;if(typeof j=="function"){var Ce=j;j=function(){var Pe=gy(de);Ce.call(Pe)}}my(m,de,d,j)}else de=uH(T,m,d,j,L);return gy(de)}fa=function(d){switch(d.tag){case 3:var m=d.stateNode;if(m.current.memoizedState.isDehydrated){var T=fi(m.pendingLanes);T!==0&&(Xu(m,T|1),ka(m,nn()),(mn&6)===0&&(Uf=nn()+500,od()))}break;case 13:_h(function(){var L=hc(d,1);if(L!==null){var j=Xs();wl(L,d,1,j)}}),f1(d,1)}},Pi=function(d){if(d.tag===13){var m=hc(d,134217728);if(m!==null){var T=Xs();wl(m,d,134217728,T)}f1(d,134217728)}},Wa=function(d){if(d.tag===13){var m=fd(d),T=hc(d,m);if(T!==null){var L=Xs();wl(T,d,m,L)}f1(d,m)}},Hl=function(){return qr},To=function(d,m){var T=qr;try{return qr=d,m()}finally{qr=T}},wn=function(d,m,T){switch(m){case"input":if(et(d,T),m=T.name,T.type==="radio"&&m!=null){for(T=d;T.parentNode;)T=T.parentNode;for(T=T.querySelectorAll("input[name="+JSON.stringify(""+m)+'][type="radio"]'),m=0;m<T.length;m++){var L=T[m];if(L!==d&&L.form===d.form){var j=iu(L);if(!j)throw Error(t(90));Rt(L),et(L,j)}}}break;case"textarea":hr(d,T);break;case"select":m=T.value,m!=null&&bt(d,!!T.multiple,m,!1)}},mt=a1,St=_h;var cH={usingClientEntryPoint:!1,Events:[gi,Ro,iu,Te,je,a1]},u0={findFiberByHostInstance:pn,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},dH={bundleType:u0.bundleType,version:u0.version,rendererPackageName:u0.rendererPackageName,rendererConfig:u0.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:I.ReactCurrentDispatcher,findHostInstanceByFiber:function(d){return d=jr(d),d===null?null:d.stateNode},findFiberByHostInstance:u0.findFiberByHostInstance||lH,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var _y=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!_y.isDisabled&&_y.supportsFiber)try{Je=_y.inject(dH),tt=_y}catch{}}return Aa.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=cH,Aa.createPortal=function(d,m){var T=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!m1(m))throw Error(t(200));return oH(d,m,null,T)},Aa.createRoot=function(d,m){if(!m1(d))throw Error(t(299));var T=!1,L="",j=hP;return m!=null&&(m.unstable_strictMode===!0&&(T=!0),m.identifierPrefix!==void 0&&(L=m.identifierPrefix),m.onRecoverableError!==void 0&&(j=m.onRecoverableError)),m=h1(d,1,!1,null,null,T,!1,L,j),d[Ee]=m.current,mi(d.nodeType===8?d.parentNode:d),new p1(m)},Aa.findDOMNode=function(d){if(d==null)return null;if(d.nodeType===1)return d;var m=d._reactInternals;if(m===void 0)throw typeof d.render=="function"?Error(t(188)):(d=Object.keys(d).join(","),Error(t(268,d)));return d=jr(m),d=d===null?null:d.stateNode,d},Aa.flushSync=function(d){return _h(d)},Aa.hydrate=function(d,m,T){if(!yy(m))throw Error(t(200));return xy(null,d,m,!0,T)},Aa.hydrateRoot=function(d,m,T){if(!m1(d))throw Error(t(405));var L=T!=null&&T.hydratedSources||null,j=!1,K="",de=hP;if(T!=null&&(T.unstable_strictMode===!0&&(j=!0),T.identifierPrefix!==void 0&&(K=T.identifierPrefix),T.onRecoverableError!==void 0&&(de=T.onRecoverableError)),m=cP(m,null,d,1,T??null,j,!1,K,de),d[Ee]=m.current,mi(d),L)for(d=0;d<L.length;d++)T=L[d],j=T._getVersion,j=j(T._source),m.mutableSourceEagerHydrationData==null?m.mutableSourceEagerHydrationData=[T,j]:m.mutableSourceEagerHydrationData.push(T,j);return new vy(m)},Aa.render=function(d,m,T){if(!yy(m))throw Error(t(200));return xy(null,d,m,!1,T)},Aa.unmountComponentAtNode=function(d){if(!yy(d))throw Error(t(40));return d._reactRootContainer?(_h(function(){xy(null,null,d,!1,function(){d._reactRootContainer=null,d[Ee]=null})}),!0):!1},Aa.unstable_batchedUpdates=a1,Aa.unstable_renderSubtreeIntoContainer=function(d,m,T,L){if(!yy(T))throw Error(t(200));if(d==null||d._reactInternals===void 0)throw Error(t(38));return xy(d,m,T,!1,L)},Aa.version="18.3.1-next-f1338f8080-20240426",Aa}var bP;function bB(){if(bP)return y1.exports;bP=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),y1.exports=_H(),y1.exports}var SP;function bH(){if(SP)return by;SP=1;var r=bB();return by.createRoot=r.createRoot,by.hydrateRoot=r.hydrateRoot,by}var SH=bH();const TH=da(SH);function SB(r,e){return function(){return r.apply(e,arguments)}}const{toString:CH}=Object.prototype,{getPrototypeOf:DE}=Object,Vb=(r=>e=>{const t=CH.call(e);return r[t]||(r[t]=t.slice(8,-1).toLowerCase())})(Object.create(null)),Nl=r=>(r=r.toLowerCase(),e=>Vb(e)===r),Wb=r=>e=>typeof e===r,{isArray:vm}=Array,bg=Wb("undefined");function wH(r){return r!==null&&!bg(r)&&r.constructor!==null&&!bg(r.constructor)&&mo(r.constructor.isBuffer)&&r.constructor.isBuffer(r)}const TB=Nl("ArrayBuffer");function EH(r){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(r):e=r&&r.buffer&&TB(r.buffer),e}const kH=Wb("string"),mo=Wb("function"),CB=Wb("number"),qb=r=>r!==null&&typeof r=="object",AH=r=>r===!0||r===!1,cx=r=>{if(Vb(r)!=="object")return!1;const e=DE(r);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in r)&&!(Symbol.iterator in r)},DH=Nl("Date"),IH=Nl("File"),PH=Nl("Blob"),RH=Nl("FileList"),LH=r=>qb(r)&&mo(r.pipe),OH=r=>{let e;return r&&(typeof FormData=="function"&&r instanceof FormData||mo(r.append)&&((e=Vb(r))==="formdata"||e==="object"&&mo(r.toString)&&r.toString()==="[object FormData]"))},MH=Nl("URLSearchParams"),[FH,BH,NH,UH]=["ReadableStream","Request","Response","Headers"].map(Nl),$H=r=>r.trim?r.trim():r.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Xg(r,e,{allOwnKeys:t=!1}={}){if(r===null||typeof r>"u")return;let n,i;if(typeof r!="object"&&(r=[r]),vm(r))for(n=0,i=r.length;n<i;n++)e.call(null,r[n],n,r);else{const s=t?Object.getOwnPropertyNames(r):Object.keys(r),a=s.length;let o;for(n=0;n<a;n++)o=s[n],e.call(null,r[o],o,r)}}function wB(r,e){e=e.toLowerCase();const t=Object.keys(r);let n=t.length,i;for(;n-- >0;)if(i=t[n],e===i.toLowerCase())return i;return null}const jh=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,EB=r=>!bg(r)&&r!==jh;function Cw(){const{caseless:r}=EB(this)&&this||{},e={},t=(n,i)=>{const s=r&&wB(e,i)||i;cx(e[s])&&cx(n)?e[s]=Cw(e[s],n):cx(n)?e[s]=Cw({},n):vm(n)?e[s]=n.slice():e[s]=n};for(let n=0,i=arguments.length;n<i;n++)arguments[n]&&Xg(arguments[n],t);return e}const jH=(r,e,t,{allOwnKeys:n}={})=>(Xg(e,(i,s)=>{t&&mo(i)?r[s]=SB(i,t):r[s]=i},{allOwnKeys:n}),r),zH=r=>(r.charCodeAt(0)===65279&&(r=r.slice(1)),r),HH=(r,e,t,n)=>{r.prototype=Object.create(e.prototype,n),r.prototype.constructor=r,Object.defineProperty(r,"super",{value:e.prototype}),t&&Object.assign(r.prototype,t)},VH=(r,e,t,n)=>{let i,s,a;const o={};if(e=e||{},r==null)return e;do{for(i=Object.getOwnPropertyNames(r),s=i.length;s-- >0;)a=i[s],(!n||n(a,r,e))&&!o[a]&&(e[a]=r[a],o[a]=!0);r=t!==!1&&DE(r)}while(r&&(!t||t(r,e))&&r!==Object.prototype);return e},WH=(r,e,t)=>{r=String(r),(t===void 0||t>r.length)&&(t=r.length),t-=e.length;const n=r.indexOf(e,t);return n!==-1&&n===t},qH=r=>{if(!r)return null;if(vm(r))return r;let e=r.length;if(!CB(e))return null;const t=new Array(e);for(;e-- >0;)t[e]=r[e];return t},GH=(r=>e=>r&&e instanceof r)(typeof Uint8Array<"u"&&DE(Uint8Array)),KH=(r,e)=>{const n=(r&&r[Symbol.iterator]).call(r);let i;for(;(i=n.next())&&!i.done;){const s=i.value;e.call(r,s[0],s[1])}},XH=(r,e)=>{let t;const n=[];for(;(t=r.exec(e))!==null;)n.push(t);return n},YH=Nl("HTMLFormElement"),QH=r=>r.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(t,n,i){return n.toUpperCase()+i}),TP=(({hasOwnProperty:r})=>(e,t)=>r.call(e,t))(Object.prototype),JH=Nl("RegExp"),kB=(r,e)=>{const t=Object.getOwnPropertyDescriptors(r),n={};Xg(t,(i,s)=>{let a;(a=e(i,s,r))!==!1&&(n[s]=a||i)}),Object.defineProperties(r,n)},ZH=r=>{kB(r,(e,t)=>{if(mo(r)&&["arguments","caller","callee"].indexOf(t)!==-1)return!1;const n=r[t];if(mo(n)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+t+"'")})}})},eV=(r,e)=>{const t={},n=i=>{i.forEach(s=>{t[s]=!0})};return vm(r)?n(r):n(String(r).split(e)),t},tV=()=>{},rV=(r,e)=>r!=null&&Number.isFinite(r=+r)?r:e,b1="abcdefghijklmnopqrstuvwxyz",CP="0123456789",AB={DIGIT:CP,ALPHA:b1,ALPHA_DIGIT:b1+b1.toUpperCase()+CP},nV=(r=16,e=AB.ALPHA_DIGIT)=>{let t="";const{length:n}=e;for(;r--;)t+=e[Math.random()*n|0];return t};function iV(r){return!!(r&&mo(r.append)&&r[Symbol.toStringTag]==="FormData"&&r[Symbol.iterator])}const sV=r=>{const e=new Array(10),t=(n,i)=>{if(qb(n)){if(e.indexOf(n)>=0)return;if(!("toJSON"in n)){e[i]=n;const s=vm(n)?[]:{};return Xg(n,(a,o)=>{const l=t(a,i+1);!bg(l)&&(s[o]=l)}),e[i]=void 0,s}}return n};return t(r,0)},aV=Nl("AsyncFunction"),oV=r=>r&&(qb(r)||mo(r))&&mo(r.then)&&mo(r.catch),DB=((r,e)=>r?setImmediate:e?((t,n)=>(jh.addEventListener("message",({source:i,data:s})=>{i===jh&&s===t&&n.length&&n.shift()()},!1),i=>{n.push(i),jh.postMessage(t,"*")}))(`axios@${Math.random()}`,[]):t=>setTimeout(t))(typeof setImmediate=="function",mo(jh.postMessage)),lV=typeof queueMicrotask<"u"?queueMicrotask.bind(jh):typeof process<"u"&&process.nextTick||DB,ut={isArray:vm,isArrayBuffer:TB,isBuffer:wH,isFormData:OH,isArrayBufferView:EH,isString:kH,isNumber:CB,isBoolean:AH,isObject:qb,isPlainObject:cx,isReadableStream:FH,isRequest:BH,isResponse:NH,isHeaders:UH,isUndefined:bg,isDate:DH,isFile:IH,isBlob:PH,isRegExp:JH,isFunction:mo,isStream:LH,isURLSearchParams:MH,isTypedArray:GH,isFileList:RH,forEach:Xg,merge:Cw,extend:jH,trim:$H,stripBOM:zH,inherits:HH,toFlatObject:VH,kindOf:Vb,kindOfTest:Nl,endsWith:WH,toArray:qH,forEachEntry:KH,matchAll:XH,isHTMLForm:YH,hasOwnProperty:TP,hasOwnProp:TP,reduceDescriptors:kB,freezeMethods:ZH,toObjectSet:eV,toCamelCase:QH,noop:tV,toFiniteNumber:rV,findKey:wB,global:jh,isContextDefined:EB,ALPHABET:AB,generateString:nV,isSpecCompliantForm:iV,toJSONObject:sV,isAsyncFn:aV,isThenable:oV,setImmediate:DB,asap:lV};function Vr(r,e,t,n,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=r,this.name="AxiosError",e&&(this.code=e),t&&(this.config=t),n&&(this.request=n),i&&(this.response=i,this.status=i.status?i.status:null)}ut.inherits(Vr,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:ut.toJSONObject(this.config),code:this.code,status:this.status}}});const IB=Vr.prototype,PB={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(r=>{PB[r]={value:r}});Object.defineProperties(Vr,PB);Object.defineProperty(IB,"isAxiosError",{value:!0});Vr.from=(r,e,t,n,i,s)=>{const a=Object.create(IB);return ut.toFlatObject(r,a,function(l){return l!==Error.prototype},o=>o!=="isAxiosError"),Vr.call(a,r.message,e,t,n,i),a.cause=r,a.name=r.name,s&&Object.assign(a,s),a};const uV=null;function ww(r){return ut.isPlainObject(r)||ut.isArray(r)}function RB(r){return ut.endsWith(r,"[]")?r.slice(0,-2):r}function wP(r,e,t){return r?r.concat(e).map(function(i,s){return i=RB(i),!t&&s?"["+i+"]":i}).join(t?".":""):e}function cV(r){return ut.isArray(r)&&!r.some(ww)}const dV=ut.toFlatObject(ut,{},null,function(e){return/^is[A-Z]/.test(e)});function Gb(r,e,t){if(!ut.isObject(r))throw new TypeError("target must be an object");e=e||new FormData,t=ut.toFlatObject(t,{metaTokens:!0,dots:!1,indexes:!1},!1,function(y,_){return!ut.isUndefined(_[y])});const n=t.metaTokens,i=t.visitor||c,s=t.dots,a=t.indexes,l=(t.Blob||typeof Blob<"u"&&Blob)&&ut.isSpecCompliantForm(e);if(!ut.isFunction(i))throw new TypeError("visitor must be a function");function u(v){if(v===null)return"";if(ut.isDate(v))return v.toISOString();if(!l&&ut.isBlob(v))throw new Vr("Blob is not supported. Use a Buffer instead.");return ut.isArrayBuffer(v)||ut.isTypedArray(v)?l&&typeof Blob=="function"?new Blob([v]):Buffer.from(v):v}function c(v,y,_){let C=v;if(v&&!_&&typeof v=="object"){if(ut.endsWith(y,"{}"))y=n?y:y.slice(0,-2),v=JSON.stringify(v);else if(ut.isArray(v)&&cV(v)||(ut.isFileList(v)||ut.endsWith(y,"[]"))&&(C=ut.toArray(v)))return y=RB(y),C.forEach(function(D,I){!(ut.isUndefined(D)||D===null)&&e.append(a===!0?wP([y],I,s):a===null?y:y+"[]",u(D))}),!1}return ww(v)?!0:(e.append(wP(_,y,s),u(v)),!1)}const h=[],f=Object.assign(dV,{defaultVisitor:c,convertValue:u,isVisitable:ww});function g(v,y){if(!ut.isUndefined(v)){if(h.indexOf(v)!==-1)throw Error("Circular reference detected in "+y.join("."));h.push(v),ut.forEach(v,function(C,E){(!(ut.isUndefined(C)||C===null)&&i.call(e,C,ut.isString(E)?E.trim():E,y,f))===!0&&g(C,y?y.concat(E):[E])}),h.pop()}}if(!ut.isObject(r))throw new TypeError("data must be an object");return g(r),e}function EP(r){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(r).replace(/[!'()~]|%20|%00/g,function(n){return e[n]})}function IE(r,e){this._pairs=[],r&&Gb(r,this,e)}const LB=IE.prototype;LB.append=function(e,t){this._pairs.push([e,t])};LB.toString=function(e){const t=e?function(n){return e.call(this,n,EP)}:EP;return this._pairs.map(function(i){return t(i[0])+"="+t(i[1])},"").join("&")};function hV(r){return encodeURIComponent(r).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function OB(r,e,t){if(!e)return r;const n=t&&t.encode||hV,i=t&&t.serialize;let s;if(i?s=i(e,t):s=ut.isURLSearchParams(e)?e.toString():new IE(e,t).toString(n),s){const a=r.indexOf("#");a!==-1&&(r=r.slice(0,a)),r+=(r.indexOf("?")===-1?"?":"&")+s}return r}class kP{constructor(){this.handlers=[]}use(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){ut.forEach(this.handlers,function(n){n!==null&&e(n)})}}const MB={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},fV=typeof URLSearchParams<"u"?URLSearchParams:IE,pV=typeof FormData<"u"?FormData:null,mV=typeof Blob<"u"?Blob:null,gV={isBrowser:!0,classes:{URLSearchParams:fV,FormData:pV,Blob:mV},protocols:["http","https","file","blob","url","data"]},PE=typeof window<"u"&&typeof document<"u",Ew=typeof navigator=="object"&&navigator||void 0,vV=PE&&(!Ew||["ReactNative","NativeScript","NS"].indexOf(Ew.product)<0),yV=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",xV=PE&&window.location.href||"http://localhost",_V=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:PE,hasStandardBrowserEnv:vV,hasStandardBrowserWebWorkerEnv:yV,navigator:Ew,origin:xV},Symbol.toStringTag,{value:"Module"})),Na={..._V,...gV};function bV(r,e){return Gb(r,new Na.classes.URLSearchParams,Object.assign({visitor:function(t,n,i,s){return Na.isNode&&ut.isBuffer(t)?(this.append(n,t.toString("base64")),!1):s.defaultVisitor.apply(this,arguments)}},e))}function SV(r){return ut.matchAll(/\w+|\[(\w*)]/g,r).map(e=>e[0]==="[]"?"":e[1]||e[0])}function TV(r){const e={},t=Object.keys(r);let n;const i=t.length;let s;for(n=0;n<i;n++)s=t[n],e[s]=r[s];return e}function FB(r){function e(t,n,i,s){let a=t[s++];if(a==="__proto__")return!0;const o=Number.isFinite(+a),l=s>=t.length;return a=!a&&ut.isArray(i)?i.length:a,l?(ut.hasOwnProp(i,a)?i[a]=[i[a],n]:i[a]=n,!o):((!i[a]||!ut.isObject(i[a]))&&(i[a]=[]),e(t,n,i[a],s)&&ut.isArray(i[a])&&(i[a]=TV(i[a])),!o)}if(ut.isFormData(r)&&ut.isFunction(r.entries)){const t={};return ut.forEachEntry(r,(n,i)=>{e(SV(n),i,t,0)}),t}return null}function CV(r,e,t){if(ut.isString(r))try{return(e||JSON.parse)(r),ut.trim(r)}catch(n){if(n.name!=="SyntaxError")throw n}return(t||JSON.stringify)(r)}const Yg={transitional:MB,adapter:["xhr","http","fetch"],transformRequest:[function(e,t){const n=t.getContentType()||"",i=n.indexOf("application/json")>-1,s=ut.isObject(e);if(s&&ut.isHTMLForm(e)&&(e=new FormData(e)),ut.isFormData(e))return i?JSON.stringify(FB(e)):e;if(ut.isArrayBuffer(e)||ut.isBuffer(e)||ut.isStream(e)||ut.isFile(e)||ut.isBlob(e)||ut.isReadableStream(e))return e;if(ut.isArrayBufferView(e))return e.buffer;if(ut.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let o;if(s){if(n.indexOf("application/x-www-form-urlencoded")>-1)return bV(e,this.formSerializer).toString();if((o=ut.isFileList(e))||n.indexOf("multipart/form-data")>-1){const l=this.env&&this.env.FormData;return Gb(o?{"files[]":e}:e,l&&new l,this.formSerializer)}}return s||i?(t.setContentType("application/json",!1),CV(e)):e}],transformResponse:[function(e){const t=this.transitional||Yg.transitional,n=t&&t.forcedJSONParsing,i=this.responseType==="json";if(ut.isResponse(e)||ut.isReadableStream(e))return e;if(e&&ut.isString(e)&&(n&&!this.responseType||i)){const a=!(t&&t.silentJSONParsing)&&i;try{return JSON.parse(e)}catch(o){if(a)throw o.name==="SyntaxError"?Vr.from(o,Vr.ERR_BAD_RESPONSE,this,null,this.response):o}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Na.classes.FormData,Blob:Na.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};ut.forEach(["delete","get","head","post","put","patch"],r=>{Yg.headers[r]={}});const wV=ut.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),EV=r=>{const e={};let t,n,i;return r&&r.split(`
`).forEach(function(a){i=a.indexOf(":"),t=a.substring(0,i).trim().toLowerCase(),n=a.substring(i+1).trim(),!(!t||e[t]&&wV[t])&&(t==="set-cookie"?e[t]?e[t].push(n):e[t]=[n]:e[t]=e[t]?e[t]+", "+n:n)}),e},AP=Symbol("internals");function d0(r){return r&&String(r).trim().toLowerCase()}function dx(r){return r===!1||r==null?r:ut.isArray(r)?r.map(dx):String(r)}function kV(r){const e=Object.create(null),t=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let n;for(;n=t.exec(r);)e[n[1]]=n[2];return e}const AV=r=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(r.trim());function S1(r,e,t,n,i){if(ut.isFunction(n))return n.call(this,e,t);if(i&&(e=t),!!ut.isString(e)){if(ut.isString(n))return e.indexOf(n)!==-1;if(ut.isRegExp(n))return n.test(e)}}function DV(r){return r.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,t,n)=>t.toUpperCase()+n)}function IV(r,e){const t=ut.toCamelCase(" "+e);["get","set","has"].forEach(n=>{Object.defineProperty(r,n+t,{value:function(i,s,a){return this[n].call(this,e,i,s,a)},configurable:!0})})}let Ua=class{constructor(e){e&&this.set(e)}set(e,t,n){const i=this;function s(o,l,u){const c=d0(l);if(!c)throw new Error("header name must be a non-empty string");const h=ut.findKey(i,c);(!h||i[h]===void 0||u===!0||u===void 0&&i[h]!==!1)&&(i[h||l]=dx(o))}const a=(o,l)=>ut.forEach(o,(u,c)=>s(u,c,l));if(ut.isPlainObject(e)||e instanceof this.constructor)a(e,t);else if(ut.isString(e)&&(e=e.trim())&&!AV(e))a(EV(e),t);else if(ut.isHeaders(e))for(const[o,l]of e.entries())s(l,o,n);else e!=null&&s(t,e,n);return this}get(e,t){if(e=d0(e),e){const n=ut.findKey(this,e);if(n){const i=this[n];if(!t)return i;if(t===!0)return kV(i);if(ut.isFunction(t))return t.call(this,i,n);if(ut.isRegExp(t))return t.exec(i);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=d0(e),e){const n=ut.findKey(this,e);return!!(n&&this[n]!==void 0&&(!t||S1(this,this[n],n,t)))}return!1}delete(e,t){const n=this;let i=!1;function s(a){if(a=d0(a),a){const o=ut.findKey(n,a);o&&(!t||S1(n,n[o],o,t))&&(delete n[o],i=!0)}}return ut.isArray(e)?e.forEach(s):s(e),i}clear(e){const t=Object.keys(this);let n=t.length,i=!1;for(;n--;){const s=t[n];(!e||S1(this,this[s],s,e,!0))&&(delete this[s],i=!0)}return i}normalize(e){const t=this,n={};return ut.forEach(this,(i,s)=>{const a=ut.findKey(n,s);if(a){t[a]=dx(i),delete t[s];return}const o=e?DV(s):String(s).trim();o!==s&&delete t[s],t[o]=dx(i),n[o]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const t=Object.create(null);return ut.forEach(this,(n,i)=>{n!=null&&n!==!1&&(t[i]=e&&ut.isArray(n)?n.join(", "):n)}),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,t])=>e+": "+t).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...t){const n=new this(e);return t.forEach(i=>n.set(i)),n}static accessor(e){const n=(this[AP]=this[AP]={accessors:{}}).accessors,i=this.prototype;function s(a){const o=d0(a);n[o]||(IV(i,a),n[o]=!0)}return ut.isArray(e)?e.forEach(s):s(e),this}};Ua.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);ut.reduceDescriptors(Ua.prototype,({value:r},e)=>{let t=e[0].toUpperCase()+e.slice(1);return{get:()=>r,set(n){this[t]=n}}});ut.freezeMethods(Ua);function T1(r,e){const t=this||Yg,n=e||t,i=Ua.from(n.headers);let s=n.data;return ut.forEach(r,function(o){s=o.call(t,s,i.normalize(),e?e.status:void 0)}),i.normalize(),s}function BB(r){return!!(r&&r.__CANCEL__)}function ym(r,e,t){Vr.call(this,r??"canceled",Vr.ERR_CANCELED,e,t),this.name="CanceledError"}ut.inherits(ym,Vr,{__CANCEL__:!0});function NB(r,e,t){const n=t.config.validateStatus;!t.status||!n||n(t.status)?r(t):e(new Vr("Request failed with status code "+t.status,[Vr.ERR_BAD_REQUEST,Vr.ERR_BAD_RESPONSE][Math.floor(t.status/100)-4],t.config,t.request,t))}function PV(r){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(r);return e&&e[1]||""}function RV(r,e){r=r||10;const t=new Array(r),n=new Array(r);let i=0,s=0,a;return e=e!==void 0?e:1e3,function(l){const u=Date.now(),c=n[s];a||(a=u),t[i]=l,n[i]=u;let h=s,f=0;for(;h!==i;)f+=t[h++],h=h%r;if(i=(i+1)%r,i===s&&(s=(s+1)%r),u-a<e)return;const g=c&&u-c;return g?Math.round(f*1e3/g):void 0}}function LV(r,e){let t=0,n=1e3/e,i,s;const a=(u,c=Date.now())=>{t=c,i=null,s&&(clearTimeout(s),s=null),r.apply(null,u)};return[(...u)=>{const c=Date.now(),h=c-t;h>=n?a(u,c):(i=u,s||(s=setTimeout(()=>{s=null,a(i)},n-h)))},()=>i&&a(i)]}const x_=(r,e,t=3)=>{let n=0;const i=RV(50,250);return LV(s=>{const a=s.loaded,o=s.lengthComputable?s.total:void 0,l=a-n,u=i(l),c=a<=o;n=a;const h={loaded:a,total:o,progress:o?a/o:void 0,bytes:l,rate:u||void 0,estimated:u&&o&&c?(o-a)/u:void 0,event:s,lengthComputable:o!=null,[e?"download":"upload"]:!0};r(h)},t)},DP=(r,e)=>{const t=r!=null;return[n=>e[0]({lengthComputable:t,total:r,loaded:n}),e[1]]},IP=r=>(...e)=>ut.asap(()=>r(...e)),OV=Na.hasStandardBrowserEnv?(function(){const e=Na.navigator&&/(msie|trident)/i.test(Na.navigator.userAgent),t=document.createElement("a");let n;function i(s){let a=s;return e&&(t.setAttribute("href",a),a=t.href),t.setAttribute("href",a),{href:t.href,protocol:t.protocol?t.protocol.replace(/:$/,""):"",host:t.host,search:t.search?t.search.replace(/^\?/,""):"",hash:t.hash?t.hash.replace(/^#/,""):"",hostname:t.hostname,port:t.port,pathname:t.pathname.charAt(0)==="/"?t.pathname:"/"+t.pathname}}return n=i(window.location.href),function(a){const o=ut.isString(a)?i(a):a;return o.protocol===n.protocol&&o.host===n.host}})():(function(){return function(){return!0}})(),MV=Na.hasStandardBrowserEnv?{write(r,e,t,n,i,s){const a=[r+"="+encodeURIComponent(e)];ut.isNumber(t)&&a.push("expires="+new Date(t).toGMTString()),ut.isString(n)&&a.push("path="+n),ut.isString(i)&&a.push("domain="+i),s===!0&&a.push("secure"),document.cookie=a.join("; ")},read(r){const e=document.cookie.match(new RegExp("(^|;\\s*)("+r+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(r){this.write(r,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function FV(r){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(r)}function BV(r,e){return e?r.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):r}function UB(r,e){return r&&!FV(e)?BV(r,e):e}const PP=r=>r instanceof Ua?{...r}:r;function uf(r,e){e=e||{};const t={};function n(u,c,h){return ut.isPlainObject(u)&&ut.isPlainObject(c)?ut.merge.call({caseless:h},u,c):ut.isPlainObject(c)?ut.merge({},c):ut.isArray(c)?c.slice():c}function i(u,c,h){if(ut.isUndefined(c)){if(!ut.isUndefined(u))return n(void 0,u,h)}else return n(u,c,h)}function s(u,c){if(!ut.isUndefined(c))return n(void 0,c)}function a(u,c){if(ut.isUndefined(c)){if(!ut.isUndefined(u))return n(void 0,u)}else return n(void 0,c)}function o(u,c,h){if(h in e)return n(u,c);if(h in r)return n(void 0,u)}const l={url:s,method:s,data:s,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,withXSRFToken:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,beforeRedirect:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:o,headers:(u,c)=>i(PP(u),PP(c),!0)};return ut.forEach(Object.keys(Object.assign({},r,e)),function(c){const h=l[c]||i,f=h(r[c],e[c],c);ut.isUndefined(f)&&h!==o||(t[c]=f)}),t}const $B=r=>{const e=uf({},r);let{data:t,withXSRFToken:n,xsrfHeaderName:i,xsrfCookieName:s,headers:a,auth:o}=e;e.headers=a=Ua.from(a),e.url=OB(UB(e.baseURL,e.url),r.params,r.paramsSerializer),o&&a.set("Authorization","Basic "+btoa((o.username||"")+":"+(o.password?unescape(encodeURIComponent(o.password)):"")));let l;if(ut.isFormData(t)){if(Na.hasStandardBrowserEnv||Na.hasStandardBrowserWebWorkerEnv)a.setContentType(void 0);else if((l=a.getContentType())!==!1){const[u,...c]=l?l.split(";").map(h=>h.trim()).filter(Boolean):[];a.setContentType([u||"multipart/form-data",...c].join("; "))}}if(Na.hasStandardBrowserEnv&&(n&&ut.isFunction(n)&&(n=n(e)),n||n!==!1&&OV(e.url))){const u=i&&s&&MV.read(s);u&&a.set(i,u)}return e},NV=typeof XMLHttpRequest<"u",UV=NV&&function(r){return new Promise(function(t,n){const i=$B(r);let s=i.data;const a=Ua.from(i.headers).normalize();let{responseType:o,onUploadProgress:l,onDownloadProgress:u}=i,c,h,f,g,v;function y(){g&&g(),v&&v(),i.cancelToken&&i.cancelToken.unsubscribe(c),i.signal&&i.signal.removeEventListener("abort",c)}let _=new XMLHttpRequest;_.open(i.method.toUpperCase(),i.url,!0),_.timeout=i.timeout;function C(){if(!_)return;const D=Ua.from("getAllResponseHeaders"in _&&_.getAllResponseHeaders()),k={data:!o||o==="text"||o==="json"?_.responseText:_.response,status:_.status,statusText:_.statusText,headers:D,config:r,request:_};NB(function(N){t(N),y()},function(N){n(N),y()},k),_=null}"onloadend"in _?_.onloadend=C:_.onreadystatechange=function(){!_||_.readyState!==4||_.status===0&&!(_.responseURL&&_.responseURL.indexOf("file:")===0)||setTimeout(C)},_.onabort=function(){_&&(n(new Vr("Request aborted",Vr.ECONNABORTED,r,_)),_=null)},_.onerror=function(){n(new Vr("Network Error",Vr.ERR_NETWORK,r,_)),_=null},_.ontimeout=function(){let I=i.timeout?"timeout of "+i.timeout+"ms exceeded":"timeout exceeded";const k=i.transitional||MB;i.timeoutErrorMessage&&(I=i.timeoutErrorMessage),n(new Vr(I,k.clarifyTimeoutError?Vr.ETIMEDOUT:Vr.ECONNABORTED,r,_)),_=null},s===void 0&&a.setContentType(null),"setRequestHeader"in _&&ut.forEach(a.toJSON(),function(I,k){_.setRequestHeader(k,I)}),ut.isUndefined(i.withCredentials)||(_.withCredentials=!!i.withCredentials),o&&o!=="json"&&(_.responseType=i.responseType),u&&([f,v]=x_(u,!0),_.addEventListener("progress",f)),l&&_.upload&&([h,g]=x_(l),_.upload.addEventListener("progress",h),_.upload.addEventListener("loadend",g)),(i.cancelToken||i.signal)&&(c=D=>{_&&(n(!D||D.type?new ym(null,r,_):D),_.abort(),_=null)},i.cancelToken&&i.cancelToken.subscribe(c),i.signal&&(i.signal.aborted?c():i.signal.addEventListener("abort",c)));const E=PV(i.url);if(E&&Na.protocols.indexOf(E)===-1){n(new Vr("Unsupported protocol "+E+":",Vr.ERR_BAD_REQUEST,r));return}_.send(s||null)})},$V=(r,e)=>{const{length:t}=r=r?r.filter(Boolean):[];if(e||t){let n=new AbortController,i;const s=function(u){if(!i){i=!0,o();const c=u instanceof Error?u:this.reason;n.abort(c instanceof Vr?c:new ym(c instanceof Error?c.message:c))}};let a=e&&setTimeout(()=>{a=null,s(new Vr(`timeout ${e} of ms exceeded`,Vr.ETIMEDOUT))},e);const o=()=>{r&&(a&&clearTimeout(a),a=null,r.forEach(u=>{u.unsubscribe?u.unsubscribe(s):u.removeEventListener("abort",s)}),r=null)};r.forEach(u=>u.addEventListener("abort",s));const{signal:l}=n;return l.unsubscribe=()=>ut.asap(o),l}},jV=function*(r,e){let t=r.byteLength;if(t<e){yield r;return}let n=0,i;for(;n<t;)i=n+e,yield r.slice(n,i),n=i},zV=async function*(r,e){for await(const t of HV(r))yield*jV(t,e)},HV=async function*(r){if(r[Symbol.asyncIterator]){yield*r;return}const e=r.getReader();try{for(;;){const{done:t,value:n}=await e.read();if(t)break;yield n}}finally{await e.cancel()}},RP=(r,e,t,n)=>{const i=zV(r,e);let s=0,a,o=l=>{a||(a=!0,n&&n(l))};return new ReadableStream({async pull(l){try{const{done:u,value:c}=await i.next();if(u){o(),l.close();return}let h=c.byteLength;if(t){let f=s+=h;t(f)}l.enqueue(new Uint8Array(c))}catch(u){throw o(u),u}},cancel(l){return o(l),i.return()}},{highWaterMark:2})},Kb=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",jB=Kb&&typeof ReadableStream=="function",VV=Kb&&(typeof TextEncoder=="function"?(r=>e=>r.encode(e))(new TextEncoder):async r=>new Uint8Array(await new Response(r).arrayBuffer())),zB=(r,...e)=>{try{return!!r(...e)}catch{return!1}},WV=jB&&zB(()=>{let r=!1;const e=new Request(Na.origin,{body:new ReadableStream,method:"POST",get duplex(){return r=!0,"half"}}).headers.has("Content-Type");return r&&!e}),LP=64*1024,kw=jB&&zB(()=>ut.isReadableStream(new Response("").body)),__={stream:kw&&(r=>r.body)};Kb&&(r=>{["text","arrayBuffer","blob","formData","stream"].forEach(e=>{!__[e]&&(__[e]=ut.isFunction(r[e])?t=>t[e]():(t,n)=>{throw new Vr(`Response type '${e}' is not supported`,Vr.ERR_NOT_SUPPORT,n)})})})(new Response);const qV=async r=>{if(r==null)return 0;if(ut.isBlob(r))return r.size;if(ut.isSpecCompliantForm(r))return(await new Request(Na.origin,{method:"POST",body:r}).arrayBuffer()).byteLength;if(ut.isArrayBufferView(r)||ut.isArrayBuffer(r))return r.byteLength;if(ut.isURLSearchParams(r)&&(r=r+""),ut.isString(r))return(await VV(r)).byteLength},GV=async(r,e)=>{const t=ut.toFiniteNumber(r.getContentLength());return t??qV(e)},KV=Kb&&(async r=>{let{url:e,method:t,data:n,signal:i,cancelToken:s,timeout:a,onDownloadProgress:o,onUploadProgress:l,responseType:u,headers:c,withCredentials:h="same-origin",fetchOptions:f}=$B(r);u=u?(u+"").toLowerCase():"text";let g=$V([i,s&&s.toAbortSignal()],a),v;const y=g&&g.unsubscribe&&(()=>{g.unsubscribe()});let _;try{if(l&&WV&&t!=="get"&&t!=="head"&&(_=await GV(c,n))!==0){let k=new Request(e,{method:"POST",body:n,duplex:"half"}),P;if(ut.isFormData(n)&&(P=k.headers.get("content-type"))&&c.setContentType(P),k.body){const[N,U]=DP(_,x_(IP(l)));n=RP(k.body,LP,N,U)}}ut.isString(h)||(h=h?"include":"omit");const C="credentials"in Request.prototype;v=new Request(e,{...f,signal:g,method:t.toUpperCase(),headers:c.normalize().toJSON(),body:n,duplex:"half",credentials:C?h:void 0});let E=await fetch(v);const D=kw&&(u==="stream"||u==="response");if(kw&&(o||D&&y)){const k={};["status","statusText","headers"].forEach(B=>{k[B]=E[B]});const P=ut.toFiniteNumber(E.headers.get("content-length")),[N,U]=o&&DP(P,x_(IP(o),!0))||[];E=new Response(RP(E.body,LP,N,()=>{U&&U(),y&&y()}),k)}u=u||"text";let I=await __[ut.findKey(__,u)||"text"](E,r);return!D&&y&&y(),await new Promise((k,P)=>{NB(k,P,{data:I,headers:Ua.from(E.headers),status:E.status,statusText:E.statusText,config:r,request:v})})}catch(C){throw y&&y(),C&&C.name==="TypeError"&&/fetch/i.test(C.message)?Object.assign(new Vr("Network Error",Vr.ERR_NETWORK,r,v),{cause:C.cause||C}):Vr.from(C,C&&C.code,r,v)}}),Aw={http:uV,xhr:UV,fetch:KV};ut.forEach(Aw,(r,e)=>{if(r){try{Object.defineProperty(r,"name",{value:e})}catch{}Object.defineProperty(r,"adapterName",{value:e})}});const OP=r=>`- ${r}`,XV=r=>ut.isFunction(r)||r===null||r===!1,HB={getAdapter:r=>{r=ut.isArray(r)?r:[r];const{length:e}=r;let t,n;const i={};for(let s=0;s<e;s++){t=r[s];let a;if(n=t,!XV(t)&&(n=Aw[(a=String(t)).toLowerCase()],n===void 0))throw new Vr(`Unknown adapter '${a}'`);if(n)break;i[a||"#"+s]=n}if(!n){const s=Object.entries(i).map(([o,l])=>`adapter ${o} `+(l===!1?"is not supported by the environment":"is not available in the build"));let a=e?s.length>1?`since :
`+s.map(OP).join(`
`):" "+OP(s[0]):"as no adapter specified";throw new Vr("There is no suitable adapter to dispatch the request "+a,"ERR_NOT_SUPPORT")}return n},adapters:Aw};function C1(r){if(r.cancelToken&&r.cancelToken.throwIfRequested(),r.signal&&r.signal.aborted)throw new ym(null,r)}function MP(r){return C1(r),r.headers=Ua.from(r.headers),r.data=T1.call(r,r.transformRequest),["post","put","patch"].indexOf(r.method)!==-1&&r.headers.setContentType("application/x-www-form-urlencoded",!1),HB.getAdapter(r.adapter||Yg.adapter)(r).then(function(n){return C1(r),n.data=T1.call(r,r.transformResponse,n),n.headers=Ua.from(n.headers),n},function(n){return BB(n)||(C1(r),n&&n.response&&(n.response.data=T1.call(r,r.transformResponse,n.response),n.response.headers=Ua.from(n.response.headers))),Promise.reject(n)})}const VB="1.7.7",RE={};["object","boolean","number","function","string","symbol"].forEach((r,e)=>{RE[r]=function(n){return typeof n===r||"a"+(e<1?"n ":" ")+r}});const FP={};RE.transitional=function(e,t,n){function i(s,a){return"[Axios v"+VB+"] Transitional option '"+s+"'"+a+(n?". "+n:"")}return(s,a,o)=>{if(e===!1)throw new Vr(i(a," has been removed"+(t?" in "+t:"")),Vr.ERR_DEPRECATED);return t&&!FP[a]&&(FP[a]=!0,console.warn(i(a," has been deprecated since v"+t+" and will be removed in the near future"))),e?e(s,a,o):!0}};function YV(r,e,t){if(typeof r!="object")throw new Vr("options must be an object",Vr.ERR_BAD_OPTION_VALUE);const n=Object.keys(r);let i=n.length;for(;i-- >0;){const s=n[i],a=e[s];if(a){const o=r[s],l=o===void 0||a(o,s,r);if(l!==!0)throw new Vr("option "+s+" must be "+l,Vr.ERR_BAD_OPTION_VALUE);continue}if(t!==!0)throw new Vr("Unknown option "+s,Vr.ERR_BAD_OPTION)}}const Dw={assertOptions:YV,validators:RE},vd=Dw.validators;let Kh=class{constructor(e){this.defaults=e,this.interceptors={request:new kP,response:new kP}}async request(e,t){try{return await this._request(e,t)}catch(n){if(n instanceof Error){let i;Error.captureStackTrace?Error.captureStackTrace(i={}):i=new Error;const s=i.stack?i.stack.replace(/^.+\n/,""):"";try{n.stack?s&&!String(n.stack).endsWith(s.replace(/^.+\n.+\n/,""))&&(n.stack+=`
`+s):n.stack=s}catch{}}throw n}}_request(e,t){typeof e=="string"?(t=t||{},t.url=e):t=e||{},t=uf(this.defaults,t);const{transitional:n,paramsSerializer:i,headers:s}=t;n!==void 0&&Dw.assertOptions(n,{silentJSONParsing:vd.transitional(vd.boolean),forcedJSONParsing:vd.transitional(vd.boolean),clarifyTimeoutError:vd.transitional(vd.boolean)},!1),i!=null&&(ut.isFunction(i)?t.paramsSerializer={serialize:i}:Dw.assertOptions(i,{encode:vd.function,serialize:vd.function},!0)),t.method=(t.method||this.defaults.method||"get").toLowerCase();let a=s&&ut.merge(s.common,s[t.method]);s&&ut.forEach(["delete","get","head","post","put","patch","common"],v=>{delete s[v]}),t.headers=Ua.concat(a,s);const o=[];let l=!0;this.interceptors.request.forEach(function(y){typeof y.runWhen=="function"&&y.runWhen(t)===!1||(l=l&&y.synchronous,o.unshift(y.fulfilled,y.rejected))});const u=[];this.interceptors.response.forEach(function(y){u.push(y.fulfilled,y.rejected)});let c,h=0,f;if(!l){const v=[MP.bind(this),void 0];for(v.unshift.apply(v,o),v.push.apply(v,u),f=v.length,c=Promise.resolve(t);h<f;)c=c.then(v[h++],v[h++]);return c}f=o.length;let g=t;for(h=0;h<f;){const v=o[h++],y=o[h++];try{g=v(g)}catch(_){y.call(this,_);break}}try{c=MP.call(this,g)}catch(v){return Promise.reject(v)}for(h=0,f=u.length;h<f;)c=c.then(u[h++],u[h++]);return c}getUri(e){e=uf(this.defaults,e);const t=UB(e.baseURL,e.url);return OB(t,e.params,e.paramsSerializer)}};ut.forEach(["delete","get","head","options"],function(e){Kh.prototype[e]=function(t,n){return this.request(uf(n||{},{method:e,url:t,data:(n||{}).data}))}});ut.forEach(["post","put","patch"],function(e){function t(n){return function(s,a,o){return this.request(uf(o||{},{method:e,headers:n?{"Content-Type":"multipart/form-data"}:{},url:s,data:a}))}}Kh.prototype[e]=t(),Kh.prototype[e+"Form"]=t(!0)});let QV=class WB{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let t;this.promise=new Promise(function(s){t=s});const n=this;this.promise.then(i=>{if(!n._listeners)return;let s=n._listeners.length;for(;s-- >0;)n._listeners[s](i);n._listeners=null}),this.promise.then=i=>{let s;const a=new Promise(o=>{n.subscribe(o),s=o}).then(i);return a.cancel=function(){n.unsubscribe(s)},a},e(function(s,a,o){n.reason||(n.reason=new ym(s,a,o),t(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);t!==-1&&this._listeners.splice(t,1)}toAbortSignal(){const e=new AbortController,t=n=>{e.abort(n)};return this.subscribe(t),e.signal.unsubscribe=()=>this.unsubscribe(t),e.signal}static source(){let e;return{token:new WB(function(i){e=i}),cancel:e}}};function JV(r){return function(t){return r.apply(null,t)}}function ZV(r){return ut.isObject(r)&&r.isAxiosError===!0}const Iw={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Iw).forEach(([r,e])=>{Iw[e]=r});function qB(r){const e=new Kh(r),t=SB(Kh.prototype.request,e);return ut.extend(t,Kh.prototype,e,{allOwnKeys:!0}),ut.extend(t,e,null,{allOwnKeys:!0}),t.create=function(i){return qB(uf(r,i))},t}const Ar=qB(Yg);Ar.Axios=Kh;Ar.CanceledError=ym;Ar.CancelToken=QV;Ar.isCancel=BB;Ar.VERSION=VB;Ar.toFormData=Gb;Ar.AxiosError=Vr;Ar.Cancel=Ar.CanceledError;Ar.all=function(e){return Promise.all(e)};Ar.spread=JV;Ar.isAxiosError=ZV;Ar.mergeConfig=uf;Ar.AxiosHeaders=Ua;Ar.formToJSON=r=>FB(ut.isHTMLForm(r)?new FormData(r):r);Ar.getAdapter=HB.getAdapter;Ar.HttpStatusCode=Iw;Ar.default=Ar;const{Axios:XCe,AxiosError:YCe,CanceledError:QCe,isCancel:JCe,CancelToken:ZCe,VERSION:ewe,all:twe,Cancel:rwe,isAxiosError:nwe,spread:iwe,toFormData:swe,AxiosHeaders:awe,HttpStatusCode:owe,formToJSON:lwe,getAdapter:uwe,mergeConfig:cwe}=Ar,an={parseOneM3uData:r=>{let e=r.split(`
`);if(e.length>0){let t={};t.url=e[e.length-1];let n=[];if(e.length>2)for(let i=1;i<e.length-1;i++){let o=e[i].replace("#EXTVLCOPT:","").split("="),l=[];for(let v=0;v<o.length;v++)v!==0&&l.push(o[v]);let c=o[0].replace("http-","").split("-"),h=[];for(let v=0;v<c.length;v++)h.push(c[v].charAt(0).toUpperCase()+c[v].slice(1));let f=h.join("-"),g=l.join(":");n.push({key:f,value:g})}return t.tvgId=an.pregValue(e[0],"tvg-id"),t.copt=n,t.name=an.parseName(e[0]),t.logoUrl=an.pregValue(e[0],"tvg-logo"),t.exist=!0,t}return[]},parseM3uBody:(r,e=!1)=>{if(!r)return[];let t=r.split(`
`),n=[],i=null,s=1;for(let a=0;a<t.length;a++){let o=t[a].trim();if(o.startsWith("#EXTINF:")){i&&n.push(i),i=an.buildM3uBaseObject(),i.index=s;let l=an.parseName(o);e&&(l=l.replace(/[\[].*?[\]]/g,"").trim()),i.name=l,i.tvgName=an.pregValue(o,"tvg-name"),i.tvgId=an.pregValue(o,"tvg-id"),i.groupTitle=an.pregValue(o,"group-title"),i.tvgLogo=an.pregValue(o,"tvg-logo"),i.tvgLanguage=an.pregValue(o,"tvg-language"),i.tvgCountry=an.pregValue(o,"tvg-country")}else if(o.startsWith("#EXTVLCOPT:")){if(i){let l=o.replace("#EXTVLCOPT:","").split("=");l.length>=2&&i.copt.push({key:l[0],value:l.slice(1).join("=")})}}else o.startsWith("http")&&i&&(i.url=o,i.exist=!0,n.push(i),s++,i=null)}return i&&i.url&&n.push(i),n},parseOriginalBodyToList:(r,e)=>{const t=/#EXTINF:(.*)\n(#EXTVLCOPT:.*\n)*(http[s]*)(.*)/gm;let n=[],i;for(;(i=t.exec(r))!==null;){i.index===t.lastIndex&&t.lastIndex++;let a=[];i.forEach((o,l)=>{a.push(o)}),n.push(a)}let s=[];for(let a=0;a<n.length;a+=1)s.push(an.parseRowToData(a+1,"#EXTINF:"+n[a][1],n[a][3]+""+n[a][4],n[a][0]));return s.length===0?an.removeRepeatList(an.parseQuoteFormat(r),e):an.removeRepeatList(s,e)},removeRepeatList(r,e){let t={},n=[];for(let i=0;i<r.length;i++)if(t[r[i].url]===void 0){let s=r[i];e!==void 0&&e[r[i].url]!==void 0&&e[r[i].url]!==null&&(s={...s,...e[r[i].url]}),n.push(s),t[r[i].url]=!0}return n},parseQuoteFormat(r){let e=[],t="Undefined",n=r.split(`
`);for(let i=0;i<n.length;i++)if(n[i]!==""){let s=n[i].split(",");if(s!=="")if(s.length>=2&&an.checkStrIsLink(s[1])&&!an.checkStrIsLink(s[0])){let a='#EXTINF:-1 tvg-id="" tvg-logo="" group-title="Undefined",'+s[0]+`
`+s[1],o='#EXTINF:-1 tvg-id="" tvg-logo="" group-title="Undefined",'+s[0]+`
`+s[1],l=this.buildM3uBaseObject(i+1,s[1],t,"","","","",s[0],a,o);e.push(l)}else t=s[0];else t="Undefined"}if(e.length===0)throw new Error("");return e},buildM3uBaseObject(r,e,t,n,i,s,a,o,l,u){return o==null&&(o=""),{index:r,url:e,groupTitle:t,tvgLogo:n,tvgName:o,tvgLanguage:i,tvgCountry:s,tvgId:a,name:o,sName:an.removeNameExtraInfo(o.toLowerCase()).trim(),originalData:l,raw:u,copt:[],status:0,checked:!1,video:null,audio:null,videoType:"",delay:0}},getVideoResolutionList(){return[{name:"",value:"SD"},{name:"720P",value:"HD"},{name:"1080P",value:"FHD"},{name:"4K",value:"UHD"},{name:"8K",value:"FUHD"}]},getVideoResolution(r,e){return r<1280||e<720?"SD":r<1920||e<1080?"HD":r<3840||e<2160?"FHD":r<8192||e<4320?"UHD":"FUHD"},checkStrIsLink(r){const e=/(http|https|lwb|P2p|p2p|p9p|rmtp):\/\/([\w.]+\/?)\S*/;let t=[];return(t=e.exec(r))!==null&&t.forEach((n,i)=>{t.push(n)}),t!==null&&t.length>0},parseRowToData(r,e,t,n){let i=an.pregValue(e,"group-title");i===""&&(i="Undefined");let s=`${e}
${t}`;return this.buildM3uBaseObject(r,t,i,an.pregValue(e,"tvg-logo"),an.parseLanguages(an.pregValue(e,"tvg-language")),an.pregValue(e,"tvg-country"),an.pregValue(e,"tvg-id"),an.parseName(e),s,n)},parseName:r=>{const e=r.split(",");return e[e.length-1]},parseLanguages:r=>r!==""?r.split(";"):[],pregValue:(r,e)=>{let t;e==="group-title"?t=/group-title="(.*)"/gm:e==="tvg-logo"?t=/tvg-logo="(.*)"/gm:e==="tvg-language"?t=/tvg-language="(.*)"/gm:e==="tvg-country"?t=/tvg-country="(.*)"/gm:e==="tvg-id"?t=/tvg-id="(.*)"/gm:e==="tvg-name"&&(t=/tvg-name="(.*)"/gm);let n,i="";for(;(n=t.exec(r))!==null;)n.index===t.lastIndex&&(t.lastIndex+=1),n.forEach((s,a)=>{a===1&&(i=s)});return i!==""?i.split('" ')[0]:""},checkRespIsValudM3u8Data:r=>r.split(`
`)[0].indexOf("#EXTM3U")!==-1,removeNameExtraInfo:r=>{const e=/\((.*)/gm;let t,n=[];for(;(t=e.exec(r))!==null;)t.index===e.lastIndex&&e.lastIndex++,t.forEach((i,s)=>{n.push(i)});return n.length>=2?r.replace(n[0],""):r}};function eW(r,e,t,n){if(typeof e=="function"?r!==e||!n:!e.has(r))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?n:t==="a"?n.call(r):n?n.value:e.get(r)}function tW(r,e,t,n,i){if(typeof e=="function"?r!==e||!0:!e.has(r))throw new TypeError("Cannot write private member to an object whose class did not declare it");return e.set(r,t),t}var hx;const Zo="__TAURI_TO_IPC_KEY__";function rW(r,e=!1){return window.__TAURI_INTERNALS__.transformCallback(r,e)}async function Ot(r,e={},t){return window.__TAURI_INTERNALS__.invoke(r,e,t)}class nW{get rid(){return eW(this,hx,"f")}constructor(e){hx.set(this,void 0),tW(this,hx,e)}async close(){return Ot("plugin:resources|close",{rid:this.rid})}}hx=new WeakMap;const Nr=r=>typeof r=="string",h0=()=>{let r,e;const t=new Promise((n,i)=>{r=n,e=i});return t.resolve=r,t.reject=e,t},BP=r=>r==null?"":""+r,iW=(r,e,t)=>{r.forEach(n=>{e[n]&&(t[n]=e[n])})},sW=/###/g,NP=r=>r&&r.indexOf("###")>-1?r.replace(sW,"."):r,UP=r=>!r||Nr(r),J0=(r,e,t)=>{const n=Nr(e)?e.split("."):e;let i=0;for(;i<n.length-1;){if(UP(r))return{};const s=NP(n[i]);!r[s]&&t&&(r[s]=new t),Object.prototype.hasOwnProperty.call(r,s)?r=r[s]:r={},++i}return UP(r)?{}:{obj:r,k:NP(n[i])}},$P=(r,e,t)=>{const{obj:n,k:i}=J0(r,e,Object);if(n!==void 0||e.length===1){n[i]=t;return}let s=e[e.length-1],a=e.slice(0,e.length-1),o=J0(r,a,Object);for(;o.obj===void 0&&a.length;)s=`${a[a.length-1]}.${s}`,a=a.slice(0,a.length-1),o=J0(r,a,Object),o&&o.obj&&typeof o.obj[`${o.k}.${s}`]<"u"&&(o.obj=void 0);o.obj[`${o.k}.${s}`]=t},aW=(r,e,t,n)=>{const{obj:i,k:s}=J0(r,e,Object);i[s]=i[s]||[],i[s].push(t)},b_=(r,e)=>{const{obj:t,k:n}=J0(r,e);if(t)return t[n]},oW=(r,e,t)=>{const n=b_(r,t);return n!==void 0?n:b_(e,t)},GB=(r,e,t)=>{for(const n in e)n!=="__proto__"&&n!=="constructor"&&(n in r?Nr(r[n])||r[n]instanceof String||Nr(e[n])||e[n]instanceof String?t&&(r[n]=e[n]):GB(r[n],e[n],t):r[n]=e[n]);return r},jf=r=>r.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");var lW={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};const uW=r=>Nr(r)?r.replace(/[&<>"'\/]/g,e=>lW[e]):r;class cW{constructor(e){this.capacity=e,this.regExpMap=new Map,this.regExpQueue=[]}getRegExp(e){const t=this.regExpMap.get(e);if(t!==void 0)return t;const n=new RegExp(e);return this.regExpQueue.length===this.capacity&&this.regExpMap.delete(this.regExpQueue.shift()),this.regExpMap.set(e,n),this.regExpQueue.push(e),n}}const dW=[" ",",","?","!",";"],hW=new cW(20),fW=(r,e,t)=>{e=e||"",t=t||"";const n=dW.filter(a=>e.indexOf(a)<0&&t.indexOf(a)<0);if(n.length===0)return!0;const i=hW.getRegExp(`(${n.map(a=>a==="?"?"\\?":a).join("|")})`);let s=!i.test(r);if(!s){const a=r.indexOf(t);a>0&&!i.test(r.substring(0,a))&&(s=!0)}return s},Pw=function(r,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:".";if(!r)return;if(r[e])return r[e];const n=e.split(t);let i=r;for(let s=0;s<n.length;){if(!i||typeof i!="object")return;let a,o="";for(let l=s;l<n.length;++l)if(l!==s&&(o+=t),o+=n[l],a=i[o],a!==void 0){if(["string","number","boolean"].indexOf(typeof a)>-1&&l<n.length-1)continue;s+=l-s+1;break}i=a}return i},S_=r=>r&&r.replace("_","-"),pW={type:"logger",log(r){this.output("log",r)},warn(r){this.output("warn",r)},error(r){this.output("error",r)},output(r,e){console&&console[r]&&console[r].apply(console,e)}};class T_{constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.init(e,t)}init(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.prefix=t.prefix||"i18next:",this.logger=e||pW,this.options=t,this.debug=t.debug}log(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.forward(t,"log","",!0)}warn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.forward(t,"warn","",!0)}error(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.forward(t,"error","")}deprecate(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.forward(t,"warn","WARNING DEPRECATED: ",!0)}forward(e,t,n,i){return i&&!this.debug?null:(Nr(e[0])&&(e[0]=`${n}${this.prefix} ${e[0]}`),this.logger[t](e))}create(e){return new T_(this.logger,{prefix:`${this.prefix}:${e}:`,...this.options})}clone(e){return e=e||this.options,e.prefix=e.prefix||this.prefix,new T_(this.logger,e)}}var yu=new T_;class Xb{constructor(){this.observers={}}on(e,t){return e.split(" ").forEach(n=>{this.observers[n]||(this.observers[n]=new Map);const i=this.observers[n].get(t)||0;this.observers[n].set(t,i+1)}),this}off(e,t){if(this.observers[e]){if(!t){delete this.observers[e];return}this.observers[e].delete(t)}}emit(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];this.observers[e]&&Array.from(this.observers[e].entries()).forEach(a=>{let[o,l]=a;for(let u=0;u<l;u++)o(...n)}),this.observers["*"]&&Array.from(this.observers["*"].entries()).forEach(a=>{let[o,l]=a;for(let u=0;u<l;u++)o.apply(o,[e,...n])})}}class jP extends Xb{constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{ns:["translation"],defaultNS:"translation"};super(),this.data=e||{},this.options=t,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.options.ignoreJSONStructure===void 0&&(this.options.ignoreJSONStructure=!0)}addNamespaces(e){this.options.ns.indexOf(e)<0&&this.options.ns.push(e)}removeNamespaces(e){const t=this.options.ns.indexOf(e);t>-1&&this.options.ns.splice(t,1)}getResource(e,t,n){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const s=i.keySeparator!==void 0?i.keySeparator:this.options.keySeparator,a=i.ignoreJSONStructure!==void 0?i.ignoreJSONStructure:this.options.ignoreJSONStructure;let o;e.indexOf(".")>-1?o=e.split("."):(o=[e,t],n&&(Array.isArray(n)?o.push(...n):Nr(n)&&s?o.push(...n.split(s)):o.push(n)));const l=b_(this.data,o);return!l&&!t&&!n&&e.indexOf(".")>-1&&(e=o[0],t=o[1],n=o.slice(2).join(".")),l||!a||!Nr(n)?l:Pw(this.data&&this.data[e]&&this.data[e][t],n,s)}addResource(e,t,n,i){let s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{silent:!1};const a=s.keySeparator!==void 0?s.keySeparator:this.options.keySeparator;let o=[e,t];n&&(o=o.concat(a?n.split(a):n)),e.indexOf(".")>-1&&(o=e.split("."),i=t,t=o[1]),this.addNamespaces(t),$P(this.data,o,i),s.silent||this.emit("added",e,t,n,i)}addResources(e,t,n){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{silent:!1};for(const s in n)(Nr(n[s])||Array.isArray(n[s]))&&this.addResource(e,t,s,n[s],{silent:!0});i.silent||this.emit("added",e,t,n)}addResourceBundle(e,t,n,i,s){let a=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{silent:!1,skipCopy:!1},o=[e,t];e.indexOf(".")>-1&&(o=e.split("."),i=n,n=t,t=o[1]),this.addNamespaces(t);let l=b_(this.data,o)||{};a.skipCopy||(n=JSON.parse(JSON.stringify(n))),i?GB(l,n,s):l={...l,...n},$P(this.data,o,l),a.silent||this.emit("added",e,t,n)}removeResourceBundle(e,t){this.hasResourceBundle(e,t)&&delete this.data[e][t],this.removeNamespaces(t),this.emit("removed",e,t)}hasResourceBundle(e,t){return this.getResource(e,t)!==void 0}getResourceBundle(e,t){return t||(t=this.options.defaultNS),this.options.compatibilityAPI==="v1"?{...this.getResource(e,t)}:this.getResource(e,t)}getDataByLanguage(e){return this.data[e]}hasLanguageSomeTranslations(e){const t=this.getDataByLanguage(e);return!!(t&&Object.keys(t)||[]).find(i=>t[i]&&Object.keys(t[i]).length>0)}toJSON(){return this.data}}var KB={processors:{},addPostProcessor(r){this.processors[r.name]=r},handle(r,e,t,n,i){return r.forEach(s=>{this.processors[s]&&(e=this.processors[s].process(e,t,n,i))}),e}};const zP={};class C_ extends Xb{constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),iW(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],e,this),this.options=t,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.logger=yu.create("translator")}changeLanguage(e){e&&(this.language=e)}exists(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}};if(e==null)return!1;const n=this.resolve(e,t);return n&&n.res!==void 0}extractFromKey(e,t){let n=t.nsSeparator!==void 0?t.nsSeparator:this.options.nsSeparator;n===void 0&&(n=":");const i=t.keySeparator!==void 0?t.keySeparator:this.options.keySeparator;let s=t.ns||this.options.defaultNS||[];const a=n&&e.indexOf(n)>-1,o=!this.options.userDefinedKeySeparator&&!t.keySeparator&&!this.options.userDefinedNsSeparator&&!t.nsSeparator&&!fW(e,n,i);if(a&&!o){const l=e.match(this.interpolator.nestingRegexp);if(l&&l.length>0)return{key:e,namespaces:Nr(s)?[s]:s};const u=e.split(n);(n!==i||n===i&&this.options.ns.indexOf(u[0])>-1)&&(s=u.shift()),e=u.join(i)}return{key:e,namespaces:Nr(s)?[s]:s}}translate(e,t,n){if(typeof t!="object"&&this.options.overloadTranslationOptionHandler&&(t=this.options.overloadTranslationOptionHandler(arguments)),typeof t=="object"&&(t={...t}),t||(t={}),e==null)return"";Array.isArray(e)||(e=[String(e)]);const i=t.returnDetails!==void 0?t.returnDetails:this.options.returnDetails,s=t.keySeparator!==void 0?t.keySeparator:this.options.keySeparator,{key:a,namespaces:o}=this.extractFromKey(e[e.length-1],t),l=o[o.length-1],u=t.lng||this.language,c=t.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(u&&u.toLowerCase()==="cimode"){if(c){const I=t.nsSeparator||this.options.nsSeparator;return i?{res:`${l}${I}${a}`,usedKey:a,exactUsedKey:a,usedLng:u,usedNS:l,usedParams:this.getUsedParamsDetails(t)}:`${l}${I}${a}`}return i?{res:a,usedKey:a,exactUsedKey:a,usedLng:u,usedNS:l,usedParams:this.getUsedParamsDetails(t)}:a}const h=this.resolve(e,t);let f=h&&h.res;const g=h&&h.usedKey||a,v=h&&h.exactUsedKey||a,y=Object.prototype.toString.apply(f),_=["[object Number]","[object Function]","[object RegExp]"],C=t.joinArrays!==void 0?t.joinArrays:this.options.joinArrays,E=!this.i18nFormat||this.i18nFormat.handleAsObject,D=!Nr(f)&&typeof f!="boolean"&&typeof f!="number";if(E&&f&&D&&_.indexOf(y)<0&&!(Nr(C)&&Array.isArray(f))){if(!t.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");const I=this.options.returnedObjectHandler?this.options.returnedObjectHandler(g,f,{...t,ns:o}):`key '${a} (${this.language})' returned an object instead of string.`;return i?(h.res=I,h.usedParams=this.getUsedParamsDetails(t),h):I}if(s){const I=Array.isArray(f),k=I?[]:{},P=I?v:g;for(const N in f)if(Object.prototype.hasOwnProperty.call(f,N)){const U=`${P}${s}${N}`;k[N]=this.translate(U,{...t,joinArrays:!1,ns:o}),k[N]===U&&(k[N]=f[N])}f=k}}else if(E&&Nr(C)&&Array.isArray(f))f=f.join(C),f&&(f=this.extendTranslation(f,e,t,n));else{let I=!1,k=!1;const P=t.count!==void 0&&!Nr(t.count),N=C_.hasDefaultValue(t),U=P?this.pluralResolver.getSuffix(u,t.count,t):"",B=t.ordinal&&P?this.pluralResolver.getSuffix(u,t.count,{ordinal:!1}):"",A=P&&!t.ordinal&&t.count===0&&this.pluralResolver.shouldUseIntlApi(),$=A&&t[`defaultValue${this.options.pluralSeparator}zero`]||t[`defaultValue${U}`]||t[`defaultValue${B}`]||t.defaultValue;!this.isValidLookup(f)&&N&&(I=!0,f=$),this.isValidLookup(f)||(k=!0,f=a);const V=(t.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&k?void 0:f,Q=N&&$!==f&&this.options.updateMissing;if(k||I||Q){if(this.logger.log(Q?"updateKey":"missingKey",u,l,a,Q?$:f),s){const se=this.resolve(a,{...t,keySeparator:!1});se&&se.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let ie=[];const ne=this.languageUtils.getFallbackCodes(this.options.fallbackLng,t.lng||this.language);if(this.options.saveMissingTo==="fallback"&&ne&&ne[0])for(let se=0;se<ne.length;se++)ie.push(ne[se]);else this.options.saveMissingTo==="all"?ie=this.languageUtils.toResolveHierarchy(t.lng||this.language):ie.push(t.lng||this.language);const ue=(se,ae,ce)=>{const ee=N&&ce!==f?ce:V;this.options.missingKeyHandler?this.options.missingKeyHandler(se,l,ae,ee,Q,t):this.backendConnector&&this.backendConnector.saveMissing&&this.backendConnector.saveMissing(se,l,ae,ee,Q,t),this.emit("missingKey",se,l,ae,f)};this.options.saveMissing&&(this.options.saveMissingPlurals&&P?ie.forEach(se=>{const ae=this.pluralResolver.getSuffixes(se,t);A&&t[`defaultValue${this.options.pluralSeparator}zero`]&&ae.indexOf(`${this.options.pluralSeparator}zero`)<0&&ae.push(`${this.options.pluralSeparator}zero`),ae.forEach(ce=>{ue([se],a+ce,t[`defaultValue${ce}`]||$)})}):ue(ie,a,$))}f=this.extendTranslation(f,e,t,h,n),k&&f===a&&this.options.appendNamespaceToMissingKey&&(f=`${l}:${a}`),(k||I)&&this.options.parseMissingKeyHandler&&(this.options.compatibilityAPI!=="v1"?f=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?`${l}:${a}`:a,I?f:void 0):f=this.options.parseMissingKeyHandler(f))}return i?(h.res=f,h.usedParams=this.getUsedParamsDetails(t),h):f}extendTranslation(e,t,n,i,s){var a=this;if(this.i18nFormat&&this.i18nFormat.parse)e=this.i18nFormat.parse(e,{...this.options.interpolation.defaultVariables,...n},n.lng||this.language||i.usedLng,i.usedNS,i.usedKey,{resolved:i});else if(!n.skipInterpolation){n.interpolation&&this.interpolator.init({...n,interpolation:{...this.options.interpolation,...n.interpolation}});const u=Nr(e)&&(n&&n.interpolation&&n.interpolation.skipOnVariables!==void 0?n.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);let c;if(u){const f=e.match(this.interpolator.nestingRegexp);c=f&&f.length}let h=n.replace&&!Nr(n.replace)?n.replace:n;if(this.options.interpolation.defaultVariables&&(h={...this.options.interpolation.defaultVariables,...h}),e=this.interpolator.interpolate(e,h,n.lng||this.language||i.usedLng,n),u){const f=e.match(this.interpolator.nestingRegexp),g=f&&f.length;c<g&&(n.nest=!1)}!n.lng&&this.options.compatibilityAPI!=="v1"&&i&&i.res&&(n.lng=this.language||i.usedLng),n.nest!==!1&&(e=this.interpolator.nest(e,function(){for(var f=arguments.length,g=new Array(f),v=0;v<f;v++)g[v]=arguments[v];return s&&s[0]===g[0]&&!n.context?(a.logger.warn(`It seems you are nesting recursively key: ${g[0]} in key: ${t[0]}`),null):a.translate(...g,t)},n)),n.interpolation&&this.interpolator.reset()}const o=n.postProcess||this.options.postProcess,l=Nr(o)?[o]:o;return e!=null&&l&&l.length&&n.applyPostProcessor!==!1&&(e=KB.handle(l,e,t,this.options&&this.options.postProcessPassResolved?{i18nResolved:{...i,usedParams:this.getUsedParamsDetails(n)},...n}:n,this)),e}resolve(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n,i,s,a,o;return Nr(e)&&(e=[e]),e.forEach(l=>{if(this.isValidLookup(n))return;const u=this.extractFromKey(l,t),c=u.key;i=c;let h=u.namespaces;this.options.fallbackNS&&(h=h.concat(this.options.fallbackNS));const f=t.count!==void 0&&!Nr(t.count),g=f&&!t.ordinal&&t.count===0&&this.pluralResolver.shouldUseIntlApi(),v=t.context!==void 0&&(Nr(t.context)||typeof t.context=="number")&&t.context!=="",y=t.lngs?t.lngs:this.languageUtils.toResolveHierarchy(t.lng||this.language,t.fallbackLng);h.forEach(_=>{this.isValidLookup(n)||(o=_,!zP[`${y[0]}-${_}`]&&this.utils&&this.utils.hasLoadedNamespace&&!this.utils.hasLoadedNamespace(o)&&(zP[`${y[0]}-${_}`]=!0,this.logger.warn(`key "${i}" for languages "${y.join(", ")}" won't get resolved as namespace "${o}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),y.forEach(C=>{if(this.isValidLookup(n))return;a=C;const E=[c];if(this.i18nFormat&&this.i18nFormat.addLookupKeys)this.i18nFormat.addLookupKeys(E,c,C,_,t);else{let I;f&&(I=this.pluralResolver.getSuffix(C,t.count,t));const k=`${this.options.pluralSeparator}zero`,P=`${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;if(f&&(E.push(c+I),t.ordinal&&I.indexOf(P)===0&&E.push(c+I.replace(P,this.options.pluralSeparator)),g&&E.push(c+k)),v){const N=`${c}${this.options.contextSeparator}${t.context}`;E.push(N),f&&(E.push(N+I),t.ordinal&&I.indexOf(P)===0&&E.push(N+I.replace(P,this.options.pluralSeparator)),g&&E.push(N+k))}}let D;for(;D=E.pop();)this.isValidLookup(n)||(s=D,n=this.getResource(C,_,D,t))}))})}),{res:n,usedKey:i,exactUsedKey:s,usedLng:a,usedNS:o}}isValidLookup(e){return e!==void 0&&!(!this.options.returnNull&&e===null)&&!(!this.options.returnEmptyString&&e==="")}getResource(e,t,n){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return this.i18nFormat&&this.i18nFormat.getResource?this.i18nFormat.getResource(e,t,n,i):this.resourceStore.getResource(e,t,n,i)}getUsedParamsDetails(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const t=["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"],n=e.replace&&!Nr(e.replace);let i=n?e.replace:e;if(n&&typeof e.count<"u"&&(i.count=e.count),this.options.interpolation.defaultVariables&&(i={...this.options.interpolation.defaultVariables,...i}),!n){i={...i};for(const s of t)delete i[s]}return i}static hasDefaultValue(e){const t="defaultValue";for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&t===n.substring(0,t.length)&&e[n]!==void 0)return!0;return!1}}const w1=r=>r.charAt(0).toUpperCase()+r.slice(1);class HP{constructor(e){this.options=e,this.supportedLngs=this.options.supportedLngs||!1,this.logger=yu.create("languageUtils")}getScriptPartFromCode(e){if(e=S_(e),!e||e.indexOf("-")<0)return null;const t=e.split("-");return t.length===2||(t.pop(),t[t.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(t.join("-"))}getLanguagePartFromCode(e){if(e=S_(e),!e||e.indexOf("-")<0)return e;const t=e.split("-");return this.formatLanguageCode(t[0])}formatLanguageCode(e){if(Nr(e)&&e.indexOf("-")>-1){if(typeof Intl<"u"&&typeof Intl.getCanonicalLocales<"u")try{let i=Intl.getCanonicalLocales(e)[0];if(i&&this.options.lowerCaseLng&&(i=i.toLowerCase()),i)return i}catch{}const t=["hans","hant","latn","cyrl","cans","mong","arab"];let n=e.split("-");return this.options.lowerCaseLng?n=n.map(i=>i.toLowerCase()):n.length===2?(n[0]=n[0].toLowerCase(),n[1]=n[1].toUpperCase(),t.indexOf(n[1].toLowerCase())>-1&&(n[1]=w1(n[1].toLowerCase()))):n.length===3&&(n[0]=n[0].toLowerCase(),n[1].length===2&&(n[1]=n[1].toUpperCase()),n[0]!=="sgn"&&n[2].length===2&&(n[2]=n[2].toUpperCase()),t.indexOf(n[1].toLowerCase())>-1&&(n[1]=w1(n[1].toLowerCase())),t.indexOf(n[2].toLowerCase())>-1&&(n[2]=w1(n[2].toLowerCase()))),n.join("-")}return this.options.cleanCode||this.options.lowerCaseLng?e.toLowerCase():e}isSupportedCode(e){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(e=this.getLanguagePartFromCode(e)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(e)>-1}getBestMatchFromCodes(e){if(!e)return null;let t;return e.forEach(n=>{if(t)return;const i=this.formatLanguageCode(n);(!this.options.supportedLngs||this.isSupportedCode(i))&&(t=i)}),!t&&this.options.supportedLngs&&e.forEach(n=>{if(t)return;const i=this.getLanguagePartFromCode(n);if(this.isSupportedCode(i))return t=i;t=this.options.supportedLngs.find(s=>{if(s===i)return s;if(!(s.indexOf("-")<0&&i.indexOf("-")<0)&&(s.indexOf("-")>0&&i.indexOf("-")<0&&s.substring(0,s.indexOf("-"))===i||s.indexOf(i)===0&&i.length>1))return s})}),t||(t=this.getFallbackCodes(this.options.fallbackLng)[0]),t}getFallbackCodes(e,t){if(!e)return[];if(typeof e=="function"&&(e=e(t)),Nr(e)&&(e=[e]),Array.isArray(e))return e;if(!t)return e.default||[];let n=e[t];return n||(n=e[this.getScriptPartFromCode(t)]),n||(n=e[this.formatLanguageCode(t)]),n||(n=e[this.getLanguagePartFromCode(t)]),n||(n=e.default),n||[]}toResolveHierarchy(e,t){const n=this.getFallbackCodes(t||this.options.fallbackLng||[],e),i=[],s=a=>{a&&(this.isSupportedCode(a)?i.push(a):this.logger.warn(`rejecting language code not found in supportedLngs: ${a}`))};return Nr(e)&&(e.indexOf("-")>-1||e.indexOf("_")>-1)?(this.options.load!=="languageOnly"&&s(this.formatLanguageCode(e)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&s(this.getScriptPartFromCode(e)),this.options.load!=="currentOnly"&&s(this.getLanguagePartFromCode(e))):Nr(e)&&s(this.formatLanguageCode(e)),n.forEach(a=>{i.indexOf(a)<0&&s(this.formatLanguageCode(a))}),i}}let mW=[{lngs:["ach","ak","am","arn","br","fil","gun","ln","mfe","mg","mi","oc","pt","pt-BR","tg","tl","ti","tr","uz","wa"],nr:[1,2],fc:1},{lngs:["af","an","ast","az","bg","bn","ca","da","de","dev","el","en","eo","es","et","eu","fi","fo","fur","fy","gl","gu","ha","hi","hu","hy","ia","it","kk","kn","ku","lb","mai","ml","mn","mr","nah","nap","nb","ne","nl","nn","no","nso","pa","pap","pms","ps","pt-PT","rm","sco","se","si","so","son","sq","sv","sw","ta","te","tk","ur","yo"],nr:[1,2],fc:2},{lngs:["ay","bo","cgg","fa","ht","id","ja","jbo","ka","km","ko","ky","lo","ms","sah","su","th","tt","ug","vi","wo","zh"],nr:[1],fc:3},{lngs:["be","bs","cnr","dz","hr","ru","sr","uk"],nr:[1,2,5],fc:4},{lngs:["ar"],nr:[0,1,2,3,11,100],fc:5},{lngs:["cs","sk"],nr:[1,2,5],fc:6},{lngs:["csb","pl"],nr:[1,2,5],fc:7},{lngs:["cy"],nr:[1,2,3,8],fc:8},{lngs:["fr"],nr:[1,2],fc:9},{lngs:["ga"],nr:[1,2,3,7,11],fc:10},{lngs:["gd"],nr:[1,2,3,20],fc:11},{lngs:["is"],nr:[1,2],fc:12},{lngs:["jv"],nr:[0,1],fc:13},{lngs:["kw"],nr:[1,2,3,4],fc:14},{lngs:["lt"],nr:[1,2,10],fc:15},{lngs:["lv"],nr:[1,2,0],fc:16},{lngs:["mk"],nr:[1,2],fc:17},{lngs:["mnk"],nr:[0,1,2],fc:18},{lngs:["mt"],nr:[1,2,11,20],fc:19},{lngs:["or"],nr:[2,1],fc:2},{lngs:["ro"],nr:[1,2,20],fc:20},{lngs:["sl"],nr:[5,1,2,3],fc:21},{lngs:["he","iw"],nr:[1,2,20,21],fc:22}],gW={1:r=>+(r>1),2:r=>+(r!=1),3:r=>0,4:r=>r%10==1&&r%100!=11?0:r%10>=2&&r%10<=4&&(r%100<10||r%100>=20)?1:2,5:r=>r==0?0:r==1?1:r==2?2:r%100>=3&&r%100<=10?3:r%100>=11?4:5,6:r=>r==1?0:r>=2&&r<=4?1:2,7:r=>r==1?0:r%10>=2&&r%10<=4&&(r%100<10||r%100>=20)?1:2,8:r=>r==1?0:r==2?1:r!=8&&r!=11?2:3,9:r=>+(r>=2),10:r=>r==1?0:r==2?1:r<7?2:r<11?3:4,11:r=>r==1||r==11?0:r==2||r==12?1:r>2&&r<20?2:3,12:r=>+(r%10!=1||r%100==11),13:r=>+(r!==0),14:r=>r==1?0:r==2?1:r==3?2:3,15:r=>r%10==1&&r%100!=11?0:r%10>=2&&(r%100<10||r%100>=20)?1:2,16:r=>r%10==1&&r%100!=11?0:r!==0?1:2,17:r=>r==1||r%10==1&&r%100!=11?0:1,18:r=>r==0?0:r==1?1:2,19:r=>r==1?0:r==0||r%100>1&&r%100<11?1:r%100>10&&r%100<20?2:3,20:r=>r==1?0:r==0||r%100>0&&r%100<20?1:2,21:r=>r%100==1?1:r%100==2?2:r%100==3||r%100==4?3:0,22:r=>r==1?0:r==2?1:(r<0||r>10)&&r%10==0?2:3};const vW=["v1","v2","v3"],yW=["v4"],VP={zero:0,one:1,two:2,few:3,many:4,other:5},xW=()=>{const r={};return mW.forEach(e=>{e.lngs.forEach(t=>{r[t]={numbers:e.nr,plurals:gW[e.fc]}})}),r};class _W{constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.languageUtils=e,this.options=t,this.logger=yu.create("pluralResolver"),(!this.options.compatibilityJSON||yW.includes(this.options.compatibilityJSON))&&(typeof Intl>"u"||!Intl.PluralRules)&&(this.options.compatibilityJSON="v3",this.logger.error("Your environment seems not to be Intl API compatible, use an Intl.PluralRules polyfill. Will fallback to the compatibilityJSON v3 format handling.")),this.rules=xW(),this.pluralRulesCache={}}addRule(e,t){this.rules[e]=t}clearCache(){this.pluralRulesCache={}}getRule(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(this.shouldUseIntlApi()){const n=S_(e==="dev"?"en":e),i=t.ordinal?"ordinal":"cardinal",s=JSON.stringify({cleanedCode:n,type:i});if(s in this.pluralRulesCache)return this.pluralRulesCache[s];let a;try{a=new Intl.PluralRules(n,{type:i})}catch{if(!e.match(/-|_/))return;const l=this.languageUtils.getLanguagePartFromCode(e);a=this.getRule(l,t)}return this.pluralRulesCache[s]=a,a}return this.rules[e]||this.rules[this.languageUtils.getLanguagePartFromCode(e)]}needsPlural(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const n=this.getRule(e,t);return this.shouldUseIntlApi()?n&&n.resolvedOptions().pluralCategories.length>1:n&&n.numbers.length>1}getPluralFormsOfKey(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.getSuffixes(e,n).map(i=>`${t}${i}`)}getSuffixes(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const n=this.getRule(e,t);return n?this.shouldUseIntlApi()?n.resolvedOptions().pluralCategories.sort((i,s)=>VP[i]-VP[s]).map(i=>`${this.options.prepend}${t.ordinal?`ordinal${this.options.prepend}`:""}${i}`):n.numbers.map(i=>this.getSuffix(e,i,t)):[]}getSuffix(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const i=this.getRule(e,n);return i?this.shouldUseIntlApi()?`${this.options.prepend}${n.ordinal?`ordinal${this.options.prepend}`:""}${i.select(t)}`:this.getSuffixRetroCompatible(i,t):(this.logger.warn(`no plural rule found for: ${e}`),"")}getSuffixRetroCompatible(e,t){const n=e.noAbs?e.plurals(t):e.plurals(Math.abs(t));let i=e.numbers[n];this.options.simplifyPluralSuffix&&e.numbers.length===2&&e.numbers[0]===1&&(i===2?i="plural":i===1&&(i=""));const s=()=>this.options.prepend&&i.toString()?this.options.prepend+i.toString():i.toString();return this.options.compatibilityJSON==="v1"?i===1?"":typeof i=="number"?`_plural_${i.toString()}`:s():this.options.compatibilityJSON==="v2"||this.options.simplifyPluralSuffix&&e.numbers.length===2&&e.numbers[0]===1?s():this.options.prepend&&n.toString()?this.options.prepend+n.toString():n.toString()}shouldUseIntlApi(){return!vW.includes(this.options.compatibilityJSON)}}const WP=function(r,e,t){let n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:".",i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,s=oW(r,e,t);return!s&&i&&Nr(t)&&(s=Pw(r,t,n),s===void 0&&(s=Pw(e,t,n))),s},E1=r=>r.replace(/\$/g,"$$$$");class bW{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.logger=yu.create("interpolator"),this.options=e,this.format=e.interpolation&&e.interpolation.format||(t=>t),this.init(e)}init(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};e.interpolation||(e.interpolation={escapeValue:!0});const{escape:t,escapeValue:n,useRawValueToEscape:i,prefix:s,prefixEscaped:a,suffix:o,suffixEscaped:l,formatSeparator:u,unescapeSuffix:c,unescapePrefix:h,nestingPrefix:f,nestingPrefixEscaped:g,nestingSuffix:v,nestingSuffixEscaped:y,nestingOptionsSeparator:_,maxReplaces:C,alwaysFormat:E}=e.interpolation;this.escape=t!==void 0?t:uW,this.escapeValue=n!==void 0?n:!0,this.useRawValueToEscape=i!==void 0?i:!1,this.prefix=s?jf(s):a||"{{",this.suffix=o?jf(o):l||"}}",this.formatSeparator=u||",",this.unescapePrefix=c?"":h||"-",this.unescapeSuffix=this.unescapePrefix?"":c||"",this.nestingPrefix=f?jf(f):g||jf("$t("),this.nestingSuffix=v?jf(v):y||jf(")"),this.nestingOptionsSeparator=_||",",this.maxReplaces=C||1e3,this.alwaysFormat=E!==void 0?E:!1,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){const e=(t,n)=>t&&t.source===n?(t.lastIndex=0,t):new RegExp(n,"g");this.regexp=e(this.regexp,`${this.prefix}(.+?)${this.suffix}`),this.regexpUnescape=e(this.regexpUnescape,`${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`),this.nestingRegexp=e(this.nestingRegexp,`${this.nestingPrefix}(.+?)${this.nestingSuffix}`)}interpolate(e,t,n,i){let s,a,o;const l=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{},u=g=>{if(g.indexOf(this.formatSeparator)<0){const C=WP(t,l,g,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(C,void 0,n,{...i,...t,interpolationkey:g}):C}const v=g.split(this.formatSeparator),y=v.shift().trim(),_=v.join(this.formatSeparator).trim();return this.format(WP(t,l,y,this.options.keySeparator,this.options.ignoreJSONStructure),_,n,{...i,...t,interpolationkey:y})};this.resetRegExp();const c=i&&i.missingInterpolationHandler||this.options.missingInterpolationHandler,h=i&&i.interpolation&&i.interpolation.skipOnVariables!==void 0?i.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:g=>E1(g)},{regex:this.regexp,safeValue:g=>this.escapeValue?E1(this.escape(g)):E1(g)}].forEach(g=>{for(o=0;s=g.regex.exec(e);){const v=s[1].trim();if(a=u(v),a===void 0)if(typeof c=="function"){const _=c(e,s,i);a=Nr(_)?_:""}else if(i&&Object.prototype.hasOwnProperty.call(i,v))a="";else if(h){a=s[0];continue}else this.logger.warn(`missed to pass in variable ${v} for interpolating ${e}`),a="";else!Nr(a)&&!this.useRawValueToEscape&&(a=BP(a));const y=g.safeValue(a);if(e=e.replace(s[0],y),h?(g.regex.lastIndex+=a.length,g.regex.lastIndex-=s[0].length):g.regex.lastIndex=0,o++,o>=this.maxReplaces)break}}),e}nest(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i,s,a;const o=(l,u)=>{const c=this.nestingOptionsSeparator;if(l.indexOf(c)<0)return l;const h=l.split(new RegExp(`${c}[ ]*{`));let f=`{${h[1]}`;l=h[0],f=this.interpolate(f,a);const g=f.match(/'/g),v=f.match(/"/g);(g&&g.length%2===0&&!v||v.length%2!==0)&&(f=f.replace(/'/g,'"'));try{a=JSON.parse(f),u&&(a={...u,...a})}catch(y){return this.logger.warn(`failed parsing options string in nesting for key ${l}`,y),`${l}${c}${f}`}return a.defaultValue&&a.defaultValue.indexOf(this.prefix)>-1&&delete a.defaultValue,l};for(;i=this.nestingRegexp.exec(e);){let l=[];a={...n},a=a.replace&&!Nr(a.replace)?a.replace:a,a.applyPostProcessor=!1,delete a.defaultValue;let u=!1;if(i[0].indexOf(this.formatSeparator)!==-1&&!/{.*}/.test(i[1])){const c=i[1].split(this.formatSeparator).map(h=>h.trim());i[1]=c.shift(),l=c,u=!0}if(s=t(o.call(this,i[1].trim(),a),a),s&&i[0]===e&&!Nr(s))return s;Nr(s)||(s=BP(s)),s||(this.logger.warn(`missed to resolve ${i[1]} for nesting ${e}`),s=""),u&&(s=l.reduce((c,h)=>this.format(c,h,n.lng,{...n,interpolationkey:i[1].trim()}),s.trim())),e=e.replace(i[0],s),this.regexp.lastIndex=0}return e}}const SW=r=>{let e=r.toLowerCase().trim();const t={};if(r.indexOf("(")>-1){const n=r.split("(");e=n[0].toLowerCase().trim();const i=n[1].substring(0,n[1].length-1);e==="currency"&&i.indexOf(":")<0?t.currency||(t.currency=i.trim()):e==="relativetime"&&i.indexOf(":")<0?t.range||(t.range=i.trim()):i.split(";").forEach(a=>{if(a){const[o,...l]=a.split(":"),u=l.join(":").trim().replace(/^'+|'+$/g,""),c=o.trim();t[c]||(t[c]=u),u==="false"&&(t[c]=!1),u==="true"&&(t[c]=!0),isNaN(u)||(t[c]=parseInt(u,10))}})}return{formatName:e,formatOptions:t}},zf=r=>{const e={};return(t,n,i)=>{let s=i;i&&i.interpolationkey&&i.formatParams&&i.formatParams[i.interpolationkey]&&i[i.interpolationkey]&&(s={...s,[i.interpolationkey]:void 0});const a=n+JSON.stringify(s);let o=e[a];return o||(o=r(S_(n),i),e[a]=o),o(t)}};class TW{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.logger=yu.create("formatter"),this.options=e,this.formats={number:zf((t,n)=>{const i=new Intl.NumberFormat(t,{...n});return s=>i.format(s)}),currency:zf((t,n)=>{const i=new Intl.NumberFormat(t,{...n,style:"currency"});return s=>i.format(s)}),datetime:zf((t,n)=>{const i=new Intl.DateTimeFormat(t,{...n});return s=>i.format(s)}),relativetime:zf((t,n)=>{const i=new Intl.RelativeTimeFormat(t,{...n});return s=>i.format(s,n.range||"day")}),list:zf((t,n)=>{const i=new Intl.ListFormat(t,{...n});return s=>i.format(s)})},this.init(e)}init(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}};this.formatSeparator=t.interpolation.formatSeparator||","}add(e,t){this.formats[e.toLowerCase().trim()]=t}addCached(e,t){this.formats[e.toLowerCase().trim()]=zf(t)}format(e,t,n){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const s=t.split(this.formatSeparator);if(s.length>1&&s[0].indexOf("(")>1&&s[0].indexOf(")")<0&&s.find(o=>o.indexOf(")")>-1)){const o=s.findIndex(l=>l.indexOf(")")>-1);s[0]=[s[0],...s.splice(1,o)].join(this.formatSeparator)}return s.reduce((o,l)=>{const{formatName:u,formatOptions:c}=SW(l);if(this.formats[u]){let h=o;try{const f=i&&i.formatParams&&i.formatParams[i.interpolationkey]||{},g=f.locale||f.lng||i.locale||i.lng||n;h=this.formats[u](o,g,{...c,...i,...f})}catch(f){this.logger.warn(f)}return h}else this.logger.warn(`there was no format function for ${u}`);return o},e)}}const CW=(r,e)=>{r.pending[e]!==void 0&&(delete r.pending[e],r.pendingCount--)};class wW extends Xb{constructor(e,t,n){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};super(),this.backend=e,this.store=t,this.services=n,this.languageUtils=n.languageUtils,this.options=i,this.logger=yu.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=i.maxParallelReads||10,this.readingCalls=0,this.maxRetries=i.maxRetries>=0?i.maxRetries:5,this.retryTimeout=i.retryTimeout>=1?i.retryTimeout:350,this.state={},this.queue=[],this.backend&&this.backend.init&&this.backend.init(n,i.backend,i)}queueLoad(e,t,n,i){const s={},a={},o={},l={};return e.forEach(u=>{let c=!0;t.forEach(h=>{const f=`${u}|${h}`;!n.reload&&this.store.hasResourceBundle(u,h)?this.state[f]=2:this.state[f]<0||(this.state[f]===1?a[f]===void 0&&(a[f]=!0):(this.state[f]=1,c=!1,a[f]===void 0&&(a[f]=!0),s[f]===void 0&&(s[f]=!0),l[h]===void 0&&(l[h]=!0)))}),c||(o[u]=!0)}),(Object.keys(s).length||Object.keys(a).length)&&this.queue.push({pending:a,pendingCount:Object.keys(a).length,loaded:{},errors:[],callback:i}),{toLoad:Object.keys(s),pending:Object.keys(a),toLoadLanguages:Object.keys(o),toLoadNamespaces:Object.keys(l)}}loaded(e,t,n){const i=e.split("|"),s=i[0],a=i[1];t&&this.emit("failedLoading",s,a,t),!t&&n&&this.store.addResourceBundle(s,a,n,void 0,void 0,{skipCopy:!0}),this.state[e]=t?-1:2,t&&n&&(this.state[e]=0);const o={};this.queue.forEach(l=>{aW(l.loaded,[s],a),CW(l,e),t&&l.errors.push(t),l.pendingCount===0&&!l.done&&(Object.keys(l.loaded).forEach(u=>{o[u]||(o[u]={});const c=l.loaded[u];c.length&&c.forEach(h=>{o[u][h]===void 0&&(o[u][h]=!0)})}),l.done=!0,l.errors.length?l.callback(l.errors):l.callback())}),this.emit("loaded",o),this.queue=this.queue.filter(l=>!l.done)}read(e,t,n){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:this.retryTimeout,a=arguments.length>5?arguments[5]:void 0;if(!e.length)return a(null,{});if(this.readingCalls>=this.maxParallelReads){this.waitingReads.push({lng:e,ns:t,fcName:n,tried:i,wait:s,callback:a});return}this.readingCalls++;const o=(u,c)=>{if(this.readingCalls--,this.waitingReads.length>0){const h=this.waitingReads.shift();this.read(h.lng,h.ns,h.fcName,h.tried,h.wait,h.callback)}if(u&&c&&i<this.maxRetries){setTimeout(()=>{this.read.call(this,e,t,n,i+1,s*2,a)},s);return}a(u,c)},l=this.backend[n].bind(this.backend);if(l.length===2){try{const u=l(e,t);u&&typeof u.then=="function"?u.then(c=>o(null,c)).catch(o):o(null,u)}catch(u){o(u)}return}return l(e,t,o)}prepareLoading(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i=arguments.length>3?arguments[3]:void 0;if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),i&&i();Nr(e)&&(e=this.languageUtils.toResolveHierarchy(e)),Nr(t)&&(t=[t]);const s=this.queueLoad(e,t,n,i);if(!s.toLoad.length)return s.pending.length||i(),null;s.toLoad.forEach(a=>{this.loadOne(a)})}load(e,t,n){this.prepareLoading(e,t,{},n)}reload(e,t,n){this.prepareLoading(e,t,{reload:!0},n)}loadOne(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";const n=e.split("|"),i=n[0],s=n[1];this.read(i,s,"read",void 0,void 0,(a,o)=>{a&&this.logger.warn(`${t}loading namespace ${s} for language ${i} failed`,a),!a&&o&&this.logger.log(`${t}loaded namespace ${s} for language ${i}`,o),this.loaded(e,a,o)})}saveMissing(e,t,n,i,s){let a=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{},o=arguments.length>6&&arguments[6]!==void 0?arguments[6]:()=>{};if(this.services.utils&&this.services.utils.hasLoadedNamespace&&!this.services.utils.hasLoadedNamespace(t)){this.logger.warn(`did not save key "${n}" as the namespace "${t}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}if(!(n==null||n==="")){if(this.backend&&this.backend.create){const l={...a,isUpdate:s},u=this.backend.create.bind(this.backend);if(u.length<6)try{let c;u.length===5?c=u(e,t,n,i,l):c=u(e,t,n,i),c&&typeof c.then=="function"?c.then(h=>o(null,h)).catch(o):o(null,c)}catch(c){o(c)}else u(e,t,n,i,o,l)}!e||!e[0]||this.store.addResource(e[0],t,n,i)}}}const qP=()=>({debug:!1,initImmediate:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:r=>{let e={};if(typeof r[1]=="object"&&(e=r[1]),Nr(r[1])&&(e.defaultValue=r[1]),Nr(r[2])&&(e.tDescription=r[2]),typeof r[2]=="object"||typeof r[3]=="object"){const t=r[3]||r[2];Object.keys(t).forEach(n=>{e[n]=t[n]})}return e},interpolation:{escapeValue:!0,format:r=>r,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0}}),GP=r=>(Nr(r.ns)&&(r.ns=[r.ns]),Nr(r.fallbackLng)&&(r.fallbackLng=[r.fallbackLng]),Nr(r.fallbackNS)&&(r.fallbackNS=[r.fallbackNS]),r.supportedLngs&&r.supportedLngs.indexOf("cimode")<0&&(r.supportedLngs=r.supportedLngs.concat(["cimode"])),r),Sy=()=>{},EW=r=>{Object.getOwnPropertyNames(Object.getPrototypeOf(r)).forEach(t=>{typeof r[t]=="function"&&(r[t]=r[t].bind(r))})};class Sg extends Xb{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;if(super(),this.options=GP(e),this.services={},this.logger=yu,this.modules={external:[]},EW(this),t&&!this.isInitialized&&!e.isClone){if(!this.options.initImmediate)return this.init(e,t),this;setTimeout(()=>{this.init(e,t)},0)}}init(){var e=this;let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;this.isInitializing=!0,typeof t=="function"&&(n=t,t={}),!t.defaultNS&&t.defaultNS!==!1&&t.ns&&(Nr(t.ns)?t.defaultNS=t.ns:t.ns.indexOf("translation")<0&&(t.defaultNS=t.ns[0]));const i=qP();this.options={...i,...this.options,...GP(t)},this.options.compatibilityAPI!=="v1"&&(this.options.interpolation={...i.interpolation,...this.options.interpolation}),t.keySeparator!==void 0&&(this.options.userDefinedKeySeparator=t.keySeparator),t.nsSeparator!==void 0&&(this.options.userDefinedNsSeparator=t.nsSeparator);const s=c=>c?typeof c=="function"?new c:c:null;if(!this.options.isClone){this.modules.logger?yu.init(s(this.modules.logger),this.options):yu.init(null,this.options);let c;this.modules.formatter?c=this.modules.formatter:typeof Intl<"u"&&(c=TW);const h=new HP(this.options);this.store=new jP(this.options.resources,this.options);const f=this.services;f.logger=yu,f.resourceStore=this.store,f.languageUtils=h,f.pluralResolver=new _W(h,{prepend:this.options.pluralSeparator,compatibilityJSON:this.options.compatibilityJSON,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),c&&(!this.options.interpolation.format||this.options.interpolation.format===i.interpolation.format)&&(f.formatter=s(c),f.formatter.init(f,this.options),this.options.interpolation.format=f.formatter.format.bind(f.formatter)),f.interpolator=new bW(this.options),f.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},f.backendConnector=new wW(s(this.modules.backend),f.resourceStore,f,this.options),f.backendConnector.on("*",function(g){for(var v=arguments.length,y=new Array(v>1?v-1:0),_=1;_<v;_++)y[_-1]=arguments[_];e.emit(g,...y)}),this.modules.languageDetector&&(f.languageDetector=s(this.modules.languageDetector),f.languageDetector.init&&f.languageDetector.init(f,this.options.detection,this.options)),this.modules.i18nFormat&&(f.i18nFormat=s(this.modules.i18nFormat),f.i18nFormat.init&&f.i18nFormat.init(this)),this.translator=new C_(this.services,this.options),this.translator.on("*",function(g){for(var v=arguments.length,y=new Array(v>1?v-1:0),_=1;_<v;_++)y[_-1]=arguments[_];e.emit(g,...y)}),this.modules.external.forEach(g=>{g.init&&g.init(this)})}if(this.format=this.options.interpolation.format,n||(n=Sy),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){const c=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);c.length>0&&c[0]!=="dev"&&(this.options.lng=c[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined"),["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach(c=>{this[c]=function(){return e.store[c](...arguments)}}),["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach(c=>{this[c]=function(){return e.store[c](...arguments),e}});const l=h0(),u=()=>{const c=(h,f)=>{this.isInitializing=!1,this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),l.resolve(f),n(h,f)};if(this.languages&&this.options.compatibilityAPI!=="v1"&&!this.isInitialized)return c(null,this.t.bind(this));this.changeLanguage(this.options.lng,c)};return this.options.resources||!this.options.initImmediate?u():setTimeout(u,0),l}loadResources(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Sy;const i=Nr(e)?e:this.language;if(typeof e=="function"&&(n=e),!this.options.resources||this.options.partialBundledLanguages){if(i&&i.toLowerCase()==="cimode"&&(!this.options.preload||this.options.preload.length===0))return n();const s=[],a=o=>{if(!o||o==="cimode")return;this.services.languageUtils.toResolveHierarchy(o).forEach(u=>{u!=="cimode"&&s.indexOf(u)<0&&s.push(u)})};i?a(i):this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach(l=>a(l)),this.options.preload&&this.options.preload.forEach(o=>a(o)),this.services.backendConnector.load(s,this.options.ns,o=>{!o&&!this.resolvedLanguage&&this.language&&this.setResolvedLanguage(this.language),n(o)})}else n(null)}reloadResources(e,t,n){const i=h0();return typeof e=="function"&&(n=e,e=void 0),typeof t=="function"&&(n=t,t=void 0),e||(e=this.languages),t||(t=this.options.ns),n||(n=Sy),this.services.backendConnector.reload(e,t,s=>{i.resolve(),n(s)}),i}use(e){if(!e)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!e.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return e.type==="backend"&&(this.modules.backend=e),(e.type==="logger"||e.log&&e.warn&&e.error)&&(this.modules.logger=e),e.type==="languageDetector"&&(this.modules.languageDetector=e),e.type==="i18nFormat"&&(this.modules.i18nFormat=e),e.type==="postProcessor"&&KB.addPostProcessor(e),e.type==="formatter"&&(this.modules.formatter=e),e.type==="3rdParty"&&this.modules.external.push(e),this}setResolvedLanguage(e){if(!(!e||!this.languages)&&!(["cimode","dev"].indexOf(e)>-1))for(let t=0;t<this.languages.length;t++){const n=this.languages[t];if(!(["cimode","dev"].indexOf(n)>-1)&&this.store.hasLanguageSomeTranslations(n)){this.resolvedLanguage=n;break}}}changeLanguage(e,t){var n=this;this.isLanguageChangingTo=e;const i=h0();this.emit("languageChanging",e);const s=l=>{this.language=l,this.languages=this.services.languageUtils.toResolveHierarchy(l),this.resolvedLanguage=void 0,this.setResolvedLanguage(l)},a=(l,u)=>{u?(s(u),this.translator.changeLanguage(u),this.isLanguageChangingTo=void 0,this.emit("languageChanged",u),this.logger.log("languageChanged",u)):this.isLanguageChangingTo=void 0,i.resolve(function(){return n.t(...arguments)}),t&&t(l,function(){return n.t(...arguments)})},o=l=>{!e&&!l&&this.services.languageDetector&&(l=[]);const u=Nr(l)?l:this.services.languageUtils.getBestMatchFromCodes(l);u&&(this.language||s(u),this.translator.language||this.translator.changeLanguage(u),this.services.languageDetector&&this.services.languageDetector.cacheUserLanguage&&this.services.languageDetector.cacheUserLanguage(u)),this.loadResources(u,c=>{a(c,u)})};return!e&&this.services.languageDetector&&!this.services.languageDetector.async?o(this.services.languageDetector.detect()):!e&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect.length===0?this.services.languageDetector.detect().then(o):this.services.languageDetector.detect(o):o(e),i}getFixedT(e,t,n){var i=this;const s=function(a,o){let l;if(typeof o!="object"){for(var u=arguments.length,c=new Array(u>2?u-2:0),h=2;h<u;h++)c[h-2]=arguments[h];l=i.options.overloadTranslationOptionHandler([a,o].concat(c))}else l={...o};l.lng=l.lng||s.lng,l.lngs=l.lngs||s.lngs,l.ns=l.ns||s.ns,l.keyPrefix!==""&&(l.keyPrefix=l.keyPrefix||n||s.keyPrefix);const f=i.options.keySeparator||".";let g;return l.keyPrefix&&Array.isArray(a)?g=a.map(v=>`${l.keyPrefix}${f}${v}`):g=l.keyPrefix?`${l.keyPrefix}${f}${a}`:a,i.t(g,l)};return Nr(e)?s.lng=e:s.lngs=e,s.ns=t,s.keyPrefix=n,s}t(){return this.translator&&this.translator.translate(...arguments)}exists(){return this.translator&&this.translator.exists(...arguments)}setDefaultNamespace(e){this.options.defaultNS=e}hasLoadedNamespace(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;const n=t.lng||this.resolvedLanguage||this.languages[0],i=this.options?this.options.fallbackLng:!1,s=this.languages[this.languages.length-1];if(n.toLowerCase()==="cimode")return!0;const a=(o,l)=>{const u=this.services.backendConnector.state[`${o}|${l}`];return u===-1||u===0||u===2};if(t.precheck){const o=t.precheck(this,a);if(o!==void 0)return o}return!!(this.hasResourceBundle(n,e)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||a(n,e)&&(!i||a(s,e)))}loadNamespaces(e,t){const n=h0();return this.options.ns?(Nr(e)&&(e=[e]),e.forEach(i=>{this.options.ns.indexOf(i)<0&&this.options.ns.push(i)}),this.loadResources(i=>{n.resolve(),t&&t(i)}),n):(t&&t(),Promise.resolve())}loadLanguages(e,t){const n=h0();Nr(e)&&(e=[e]);const i=this.options.preload||[],s=e.filter(a=>i.indexOf(a)<0&&this.services.languageUtils.isSupportedCode(a));return s.length?(this.options.preload=i.concat(s),this.loadResources(a=>{n.resolve(),t&&t(a)}),n):(t&&t(),Promise.resolve())}dir(e){if(e||(e=this.resolvedLanguage||(this.languages&&this.languages.length>0?this.languages[0]:this.language)),!e)return"rtl";const t=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"],n=this.services&&this.services.languageUtils||new HP(qP());return t.indexOf(n.getLanguagePartFromCode(e))>-1||e.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return new Sg(e,t)}cloneInstance(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Sy;const n=e.forkResourceStore;n&&delete e.forkResourceStore;const i={...this.options,...e,isClone:!0},s=new Sg(i);return(e.debug!==void 0||e.prefix!==void 0)&&(s.logger=s.logger.clone(e)),["store","services","language"].forEach(o=>{s[o]=this[o]}),s.services={...this.services},s.services.utils={hasLoadedNamespace:s.hasLoadedNamespace.bind(s)},n&&(s.store=new jP(this.store.data,i),s.services.resourceStore=s.store),s.translator=new C_(s.services,i),s.translator.on("*",function(o){for(var l=arguments.length,u=new Array(l>1?l-1:0),c=1;c<l;c++)u[c-1]=arguments[c];s.emit(o,...u)}),s.init(i,t),s.translator.options=i,s.translator.backendConnector.services.utils={hasLoadedNamespace:s.hasLoadedNamespace.bind(s)},s}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}const Ts=Sg.createInstance();Ts.createInstance=Sg.createInstance;Ts.createInstance;Ts.dir;Ts.init;Ts.loadResources;Ts.reloadResources;Ts.use;Ts.changeLanguage;Ts.getFixedT;Ts.t;Ts.exists;Ts.setDefaultNamespace;Ts.hasLoadedNamespace;Ts.loadNamespaces;Ts.loadLanguages;class LE{constructor(...e){this.type="Logical",e.length===1?"Logical"in e[0]?(this.width=e[0].Logical.width,this.height=e[0].Logical.height):(this.width=e[0].width,this.height=e[0].height):(this.width=e[0],this.height=e[1])}toPhysical(e){return new _p(this.width*e,this.height*e)}[Zo](){return{width:this.width,height:this.height}}toJSON(){return this[Zo]()}}class _p{constructor(...e){this.type="Physical",e.length===1?"Physical"in e[0]?(this.width=e[0].Physical.width,this.height=e[0].Physical.height):(this.width=e[0].width,this.height=e[0].height):(this.width=e[0],this.height=e[1])}toLogical(e){return new LE(this.width/e,this.height/e)}[Zo](){return{width:this.width,height:this.height}}toJSON(){return this[Zo]()}}class wd{constructor(e){this.size=e}toLogical(e){return this.size instanceof LE?this.size:this.size.toLogical(e)}toPhysical(e){return this.size instanceof _p?this.size:this.size.toPhysical(e)}[Zo](){return{[`${this.size.type}`]:{width:this.size.width,height:this.size.height}}}toJSON(){return this[Zo]()}}class XB{constructor(...e){this.type="Logical",e.length===1?"Logical"in e[0]?(this.x=e[0].Logical.x,this.y=e[0].Logical.y):(this.x=e[0].x,this.y=e[0].y):(this.x=e[0],this.y=e[1])}toPhysical(e){return new Wo(this.x*e,this.y*e)}[Zo](){return{x:this.x,y:this.y}}toJSON(){return this[Zo]()}}class Wo{constructor(...e){this.type="Physical",e.length===1?"Physical"in e[0]?(this.x=e[0].Physical.x,this.y=e[0].Physical.y):(this.x=e[0].x,this.y=e[0].y):(this.x=e[0],this.y=e[1])}toLogical(e){return new XB(this.x/e,this.y/e)}[Zo](){return{x:this.x,y:this.y}}toJSON(){return this[Zo]()}}class lp{constructor(e){this.position=e}toLogical(e){return this.position instanceof XB?this.position:this.position.toLogical(e)}toPhysical(e){return this.position instanceof Wo?this.position:this.position.toPhysical(e)}[Zo](){return{[`${this.position.type}`]:{x:this.position.x,y:this.position.y}}}toJSON(){return this[Zo]()}}var ms;(function(r){r.WINDOW_RESIZED="tauri://resize",r.WINDOW_MOVED="tauri://move",r.WINDOW_CLOSE_REQUESTED="tauri://close-requested",r.WINDOW_DESTROYED="tauri://destroyed",r.WINDOW_FOCUS="tauri://focus",r.WINDOW_BLUR="tauri://blur",r.WINDOW_SCALE_FACTOR_CHANGED="tauri://scale-change",r.WINDOW_THEME_CHANGED="tauri://theme-changed",r.WINDOW_CREATED="tauri://window-created",r.WEBVIEW_CREATED="tauri://webview-created",r.DRAG_ENTER="tauri://drag-enter",r.DRAG_OVER="tauri://drag-over",r.DRAG_DROP="tauri://drag-drop",r.DRAG_LEAVE="tauri://drag-leave"})(ms||(ms={}));async function YB(r,e){await Ot("plugin:event|unlisten",{event:r,eventId:e})}async function Qg(r,e,t){var n;const i=typeof t?.target=="string"?{kind:"AnyLabel",label:t.target}:(n=t?.target)!==null&&n!==void 0?n:{kind:"Any"};return Ot("plugin:event|listen",{event:r,target:i,handler:rW(e)}).then(s=>async()=>YB(r,s))}async function OE(r,e,t){return Qg(r,n=>{YB(r,n.id),e(n)},t)}async function ME(r,e){await Ot("plugin:event|emit",{event:r,payload:e})}async function QB(r,e,t){await Ot("plugin:event|emit_to",{target:typeof r=="string"?{kind:"AnyLabel",label:r}:r,event:e,payload:t})}let kW=class fx extends nW{constructor(e){super(e)}static async new(e,t,n){return Ot("plugin:image|new",{rgba:Rw(e),width:t,height:n}).then(i=>new fx(i))}static async fromBytes(e){return Ot("plugin:image|from_bytes",{bytes:Rw(e)}).then(t=>new fx(t))}static async fromPath(e){return Ot("plugin:image|from_path",{path:e}).then(t=>new fx(t))}async rgba(){return Ot("plugin:image|rgba",{rid:this.rid}).then(e=>new Uint8Array(e))}async size(){return Ot("plugin:image|size",{rid:this.rid})}};function Rw(r){return r==null?null:typeof r=="string"?r:r instanceof kW?r.rid:r}var Lw;(function(r){r[r.Critical=1]="Critical",r[r.Informational=2]="Informational"})(Lw||(Lw={}));class AW{constructor(e){this._preventDefault=!1,this.event=e.event,this.id=e.id}preventDefault(){this._preventDefault=!0}isPreventDefault(){return this._preventDefault}}var KP;(function(r){r.None="none",r.Normal="normal",r.Indeterminate="indeterminate",r.Paused="paused",r.Error="error"})(KP||(KP={}));function JB(){return new Yb(window.__TAURI_INTERNALS__.metadata.currentWindow.label,{skip:!0})}async function k1(){return Ot("plugin:window|get_all_windows").then(r=>r.map(e=>new Yb(e,{skip:!0})))}const A1=["tauri://created","tauri://error"];class Yb{constructor(e,t={}){var n;this.label=e,this.listeners=Object.create(null),t?.skip||Ot("plugin:window|create",{options:{...t,parent:typeof t.parent=="string"?t.parent:(n=t.parent)===null||n===void 0?void 0:n.label,label:e}}).then(async()=>this.emit("tauri://created")).catch(async i=>this.emit("tauri://error",i))}static async getByLabel(e){var t;return(t=(await k1()).find(n=>n.label===e))!==null&&t!==void 0?t:null}static getCurrent(){return JB()}static async getAll(){return k1()}static async getFocusedWindow(){for(const e of await k1())if(await e.isFocused())return e;return null}async listen(e,t){return this._handleTauriEvent(e,t)?()=>{const n=this.listeners[e];n.splice(n.indexOf(t),1)}:Qg(e,t,{target:{kind:"Window",label:this.label}})}async once(e,t){return this._handleTauriEvent(e,t)?()=>{const n=this.listeners[e];n.splice(n.indexOf(t),1)}:OE(e,t,{target:{kind:"Window",label:this.label}})}async emit(e,t){if(A1.includes(e)){for(const n of this.listeners[e]||[])n({event:e,id:-1,payload:t});return}return ME(e,t)}async emitTo(e,t,n){if(A1.includes(t)){for(const i of this.listeners[t]||[])i({event:t,id:-1,payload:n});return}return QB(e,t,n)}_handleTauriEvent(e,t){return A1.includes(e)?(e in this.listeners?this.listeners[e].push(t):this.listeners[e]=[t],!0):!1}async scaleFactor(){return Ot("plugin:window|scale_factor",{label:this.label})}async innerPosition(){return Ot("plugin:window|inner_position",{label:this.label}).then(e=>new Wo(e))}async outerPosition(){return Ot("plugin:window|outer_position",{label:this.label}).then(e=>new Wo(e))}async innerSize(){return Ot("plugin:window|inner_size",{label:this.label}).then(e=>new _p(e))}async outerSize(){return Ot("plugin:window|outer_size",{label:this.label}).then(e=>new _p(e))}async isFullscreen(){return Ot("plugin:window|is_fullscreen",{label:this.label})}async isMinimized(){return Ot("plugin:window|is_minimized",{label:this.label})}async isMaximized(){return Ot("plugin:window|is_maximized",{label:this.label})}async isFocused(){return Ot("plugin:window|is_focused",{label:this.label})}async isDecorated(){return Ot("plugin:window|is_decorated",{label:this.label})}async isResizable(){return Ot("plugin:window|is_resizable",{label:this.label})}async isMaximizable(){return Ot("plugin:window|is_maximizable",{label:this.label})}async isMinimizable(){return Ot("plugin:window|is_minimizable",{label:this.label})}async isClosable(){return Ot("plugin:window|is_closable",{label:this.label})}async isVisible(){return Ot("plugin:window|is_visible",{label:this.label})}async title(){return Ot("plugin:window|title",{label:this.label})}async theme(){return Ot("plugin:window|theme",{label:this.label})}async center(){return Ot("plugin:window|center",{label:this.label})}async requestUserAttention(e){let t=null;return e&&(e===Lw.Critical?t={type:"Critical"}:t={type:"Informational"}),Ot("plugin:window|request_user_attention",{label:this.label,value:t})}async setResizable(e){return Ot("plugin:window|set_resizable",{label:this.label,value:e})}async setEnabled(e){return Ot("plugin:window|set_enabled",{label:this.label,value:e})}async isEnabled(){return Ot("plugin:window|is_enabled",{label:this.label})}async setMaximizable(e){return Ot("plugin:window|set_maximizable",{label:this.label,value:e})}async setMinimizable(e){return Ot("plugin:window|set_minimizable",{label:this.label,value:e})}async setClosable(e){return Ot("plugin:window|set_closable",{label:this.label,value:e})}async setTitle(e){return Ot("plugin:window|set_title",{label:this.label,value:e})}async maximize(){return Ot("plugin:window|maximize",{label:this.label})}async unmaximize(){return Ot("plugin:window|unmaximize",{label:this.label})}async toggleMaximize(){return Ot("plugin:window|toggle_maximize",{label:this.label})}async minimize(){return Ot("plugin:window|minimize",{label:this.label})}async unminimize(){return Ot("plugin:window|unminimize",{label:this.label})}async show(){return Ot("plugin:window|show",{label:this.label})}async hide(){return Ot("plugin:window|hide",{label:this.label})}async close(){return Ot("plugin:window|close",{label:this.label})}async destroy(){return Ot("plugin:window|destroy",{label:this.label})}async setDecorations(e){return Ot("plugin:window|set_decorations",{label:this.label,value:e})}async setShadow(e){return Ot("plugin:window|set_shadow",{label:this.label,value:e})}async setEffects(e){return Ot("plugin:window|set_effects",{label:this.label,value:e})}async clearEffects(){return Ot("plugin:window|set_effects",{label:this.label,value:null})}async setAlwaysOnTop(e){return Ot("plugin:window|set_always_on_top",{label:this.label,value:e})}async setAlwaysOnBottom(e){return Ot("plugin:window|set_always_on_bottom",{label:this.label,value:e})}async setContentProtected(e){return Ot("plugin:window|set_content_protected",{label:this.label,value:e})}async setSize(e){return Ot("plugin:window|set_size",{label:this.label,value:e instanceof wd?e:new wd(e)})}async setMinSize(e){return Ot("plugin:window|set_min_size",{label:this.label,value:e instanceof wd?e:e?new wd(e):null})}async setMaxSize(e){return Ot("plugin:window|set_max_size",{label:this.label,value:e instanceof wd?e:e?new wd(e):null})}async setSizeConstraints(e){function t(n){return n?{Logical:n}:null}return Ot("plugin:window|set_size_constraints",{label:this.label,value:{minWidth:t(e?.minWidth),minHeight:t(e?.minHeight),maxWidth:t(e?.maxWidth),maxHeight:t(e?.maxHeight)}})}async setPosition(e){return Ot("plugin:window|set_position",{label:this.label,value:e instanceof lp?e:new lp(e)})}async setFullscreen(e){return Ot("plugin:window|set_fullscreen",{label:this.label,value:e})}async setFocus(){return Ot("plugin:window|set_focus",{label:this.label})}async setIcon(e){return Ot("plugin:window|set_icon",{label:this.label,value:Rw(e)})}async setSkipTaskbar(e){return Ot("plugin:window|set_skip_taskbar",{label:this.label,value:e})}async setCursorGrab(e){return Ot("plugin:window|set_cursor_grab",{label:this.label,value:e})}async setCursorVisible(e){return Ot("plugin:window|set_cursor_visible",{label:this.label,value:e})}async setCursorIcon(e){return Ot("plugin:window|set_cursor_icon",{label:this.label,value:e})}async setBackgroundColor(e){return Ot("plugin:window|set_background_color",{color:e})}async setCursorPosition(e){return Ot("plugin:window|set_cursor_position",{label:this.label,value:e instanceof lp?e:new lp(e)})}async setIgnoreCursorEvents(e){return Ot("plugin:window|set_ignore_cursor_events",{label:this.label,value:e})}async startDragging(){return Ot("plugin:window|start_dragging",{label:this.label})}async startResizeDragging(e){return Ot("plugin:window|start_resize_dragging",{label:this.label,value:e})}async setProgressBar(e){return Ot("plugin:window|set_progress_bar",{label:this.label,value:e})}async setVisibleOnAllWorkspaces(e){return Ot("plugin:window|set_visible_on_all_workspaces",{label:this.label,value:e})}async setTitleBarStyle(e){return Ot("plugin:window|set_title_bar_style",{label:this.label,value:e})}async setTheme(e){return Ot("plugin:window|set_theme",{label:this.label,value:e})}async onResized(e){return this.listen(ms.WINDOW_RESIZED,t=>{t.payload=new _p(t.payload),e(t)})}async onMoved(e){return this.listen(ms.WINDOW_MOVED,t=>{t.payload=new Wo(t.payload),e(t)})}async onCloseRequested(e){return this.listen(ms.WINDOW_CLOSE_REQUESTED,async t=>{const n=new AW(t);await e(n),n.isPreventDefault()||await this.destroy()})}async onDragDropEvent(e){const t=await this.listen(ms.DRAG_ENTER,a=>{e({...a,payload:{type:"enter",paths:a.payload.paths,position:new Wo(a.payload.position)}})}),n=await this.listen(ms.DRAG_OVER,a=>{e({...a,payload:{type:"over",position:new Wo(a.payload.position)}})}),i=await this.listen(ms.DRAG_DROP,a=>{e({...a,payload:{type:"drop",paths:a.payload.paths,position:new Wo(a.payload.position)}})}),s=await this.listen(ms.DRAG_LEAVE,a=>{e({...a,payload:{type:"leave"}})});return()=>{t(),i(),n(),s()}}async onFocusChanged(e){const t=await this.listen(ms.WINDOW_FOCUS,i=>{e({...i,payload:!0})}),n=await this.listen(ms.WINDOW_BLUR,i=>{e({...i,payload:!1})});return()=>{t(),n()}}async onScaleChanged(e){return this.listen(ms.WINDOW_SCALE_FACTOR_CHANGED,e)}async onThemeChanged(e){return this.listen(ms.WINDOW_THEME_CHANGED,e)}}var XP;(function(r){r.AppearanceBased="appearanceBased",r.Light="light",r.Dark="dark",r.MediumLight="mediumLight",r.UltraDark="ultraDark",r.Titlebar="titlebar",r.Selection="selection",r.Menu="menu",r.Popover="popover",r.Sidebar="sidebar",r.HeaderView="headerView",r.Sheet="sheet",r.WindowBackground="windowBackground",r.HudWindow="hudWindow",r.FullScreenUI="fullScreenUI",r.Tooltip="tooltip",r.ContentBackground="contentBackground",r.UnderWindowBackground="underWindowBackground",r.UnderPageBackground="underPageBackground",r.Mica="mica",r.Blur="blur",r.Acrylic="acrylic",r.Tabbed="tabbed",r.TabbedDark="tabbedDark",r.TabbedLight="tabbedLight"})(XP||(XP={}));var YP;(function(r){r.FollowsWindowActiveState="followsWindowActiveState",r.Active="active",r.Inactive="inactive"})(YP||(YP={}));function ZB(){return new FE(JB(),window.__TAURI_INTERNALS__.metadata.currentWebview.label,{skip:!0})}async function QP(){return Ot("plugin:webview|get_all_webviews").then(r=>r.map(e=>new FE(new Yb(e.windowLabel,{skip:!0}),e.label,{skip:!0})))}const D1=["tauri://created","tauri://error"];class FE{constructor(e,t,n){this.window=e,this.label=t,this.listeners=Object.create(null),n?.skip||Ot("plugin:webview|create_webview",{windowLabel:e.label,label:t,options:n}).then(async()=>this.emit("tauri://created")).catch(async i=>this.emit("tauri://error",i))}static async getByLabel(e){var t;return(t=(await QP()).find(n=>n.label===e))!==null&&t!==void 0?t:null}static getCurrent(){return ZB()}static async getAll(){return QP()}async listen(e,t){return this._handleTauriEvent(e,t)?()=>{const n=this.listeners[e];n.splice(n.indexOf(t),1)}:Qg(e,t,{target:{kind:"Webview",label:this.label}})}async once(e,t){return this._handleTauriEvent(e,t)?()=>{const n=this.listeners[e];n.splice(n.indexOf(t),1)}:OE(e,t,{target:{kind:"Webview",label:this.label}})}async emit(e,t){if(D1.includes(e)){for(const n of this.listeners[e]||[])n({event:e,id:-1,payload:t});return}return ME(e,t)}async emitTo(e,t,n){if(D1.includes(t)){for(const i of this.listeners[t]||[])i({event:t,id:-1,payload:n});return}return QB(e,t,n)}_handleTauriEvent(e,t){return D1.includes(e)?(e in this.listeners?this.listeners[e].push(t):this.listeners[e]=[t],!0):!1}async position(){return Ot("plugin:webview|webview_position",{label:this.label}).then(e=>new Wo(e))}async size(){return Ot("plugin:webview|webview_size",{label:this.label}).then(e=>new _p(e))}async close(){return Ot("plugin:webview|close",{label:this.label})}async setSize(e){return Ot("plugin:webview|set_webview_size",{label:this.label,value:e instanceof wd?e:new wd(e)})}async setPosition(e){return Ot("plugin:webview|set_webview_position",{label:this.label,value:e instanceof lp?e:new lp(e)})}async setFocus(){return Ot("plugin:webview|set_webview_focus",{label:this.label})}async hide(){return Ot("plugin:webview|webview_hide",{label:this.label})}async show(){return Ot("plugin:webview|webview_show",{label:this.label})}async setZoom(e){return Ot("plugin:webview|set_webview_zoom",{label:this.label,value:e})}async reparent(e){return Ot("plugin:webview|reparent",{label:this.label,window:typeof e=="string"?e:e.label})}async clearAllBrowsingData(){return Ot("plugin:webview|clear_all_browsing_data")}async setBackgroundColor(e){return Ot("plugin:webview|set_webview_background_color",{color:e})}async onDragDropEvent(e){const t=await this.listen(ms.DRAG_ENTER,a=>{e({...a,payload:{type:"enter",paths:a.payload.paths,position:new Wo(a.payload.position)}})}),n=await this.listen(ms.DRAG_OVER,a=>{e({...a,payload:{type:"over",position:new Wo(a.payload.position)}})}),i=await this.listen(ms.DRAG_DROP,a=>{e({...a,payload:{type:"drop",paths:a.payload.paths,position:new Wo(a.payload.position)}})}),s=await this.listen(ms.DRAG_LEAVE,a=>{e({...a,payload:{type:"leave"}})});return()=>{t(),i(),n(),s()}}}function w_(){const r=ZB();return new cf(r.label,{skip:!0})}async function JP(){return Ot("plugin:window|get_all_windows").then(r=>r.map(e=>new cf(e,{skip:!0})))}class cf{constructor(e,t={}){var n;this.label=e,this.listeners=Object.create(null),t?.skip||Ot("plugin:webview|create_webview_window",{options:{...t,parent:typeof t.parent=="string"?t.parent:(n=t.parent)===null||n===void 0?void 0:n.label,label:e}}).then(async()=>this.emit("tauri://created")).catch(async i=>this.emit("tauri://error",i))}static async getByLabel(e){var t;const n=(t=(await JP()).find(i=>i.label===e))!==null&&t!==void 0?t:null;return n?new cf(n.label,{skip:!0}):null}static getCurrent(){return w_()}static async getAll(){return JP()}async listen(e,t){return this._handleTauriEvent(e,t)?()=>{const n=this.listeners[e];n.splice(n.indexOf(t),1)}:Qg(e,t,{target:{kind:"WebviewWindow",label:this.label}})}async once(e,t){return this._handleTauriEvent(e,t)?()=>{const n=this.listeners[e];n.splice(n.indexOf(t),1)}:OE(e,t,{target:{kind:"WebviewWindow",label:this.label}})}async setBackgroundColor(e){return Ot("plugin:window|set_background_color",{color:e}).then(()=>Ot("plugin:webview|set_webview_background_color",{color:e}))}}DW(cf,[Yb,FE]);function DW(r,e){(Array.isArray(e)?e:[e]).forEach(t=>{Object.getOwnPropertyNames(t.prototype).forEach(n=>{var i;typeof r.prototype=="object"&&r.prototype&&n in r.prototype||Object.defineProperty(r.prototype,n,(i=Object.getOwnPropertyDescriptor(t.prototype,n))!==null&&i!==void 0?i:Object.create(null))})})}var Ch={},wh={},I1={},P1={},f0={},ZP;function IW(){if(ZP)return f0;ZP=1;function r(){return window.crypto.getRandomValues(new Uint32Array(1))[0]}function e(i,s=!1){const a=r(),o=`_${a}`;return Object.defineProperty(window,o,{value:l=>(s&&Reflect.deleteProperty(window,o),i?.(l)),writable:!1,configurable:!0}),a}async function t(i,s={}){return new Promise((a,o)=>{const l=e(c=>{a(c),Reflect.deleteProperty(window,`_${u}`)},!0),u=e(c=>{o(c),Reflect.deleteProperty(window,`_${l}`)},!0);window.__TAURI_IPC__({cmd:i,callback:l,error:u,...s})})}function n(i,s="asset"){return window.__TAURI__.convertFileSrc(i,s)}return f0.convertFileSrc=n,f0.invoke=t,f0.transformCallback=e,f0}var eR;function PW(){if(eR)return P1;eR=1;var r=IW();async function e(t){return r.invoke("tauri",t)}return P1.invokeTauriCommand=e,P1}var tR;function RW(){return tR||(tR=1,(function(r){var e=PW();r.ResponseType=void 0,(function(u){u[u.JSON=1]="JSON",u[u.Text=2]="Text",u[u.Binary=3]="Binary"})(r.ResponseType||(r.ResponseType={}));async function t(u){const c={},h=async(f,g)=>{if(g!==null){let v;typeof g=="string"?v=g:g instanceof Uint8Array||Array.isArray(g)?v=Array.from(g):g instanceof File?v={file:Array.from(new Uint8Array(await g.arrayBuffer())),mime:g.type,fileName:g.name}:typeof g.file=="string"?v={file:g.file,mime:g.mime,fileName:g.fileName}:v={file:Array.from(g.file),mime:g.mime,fileName:g.fileName},c[String(f)]=v}};if(u instanceof FormData)for(const[f,g]of u)await h(f,g);else for(const[f,g]of Object.entries(u))await h(f,g);return c}class n{constructor(c,h){this.type=c,this.payload=h}static form(c){return new n("Form",c)}static json(c){return new n("Json",c)}static text(c){return new n("Text",c)}static bytes(c){return new n("Bytes",Array.from(c instanceof ArrayBuffer?new Uint8Array(c):c))}}class i{constructor(c){this.url=c.url,this.status=c.status,this.ok=this.status>=200&&this.status<300,this.headers=c.headers,this.rawHeaders=c.rawHeaders,this.data=c.data}}class s{constructor(c){this.id=c}async drop(){return e.invokeTauriCommand({__tauriModule:"Http",message:{cmd:"dropClient",client:this.id}})}async request(c){var h;const f=!c.responseType||c.responseType===r.ResponseType.JSON;return f&&(c.responseType=r.ResponseType.Text),((h=c.body)===null||h===void 0?void 0:h.type)==="Form"&&(c.body.payload=await t(c.body.payload)),e.invokeTauriCommand({__tauriModule:"Http",message:{cmd:"httpRequest",client:this.id,options:c}}).then(g=>{const v=new i(g);if(f){try{v.data=JSON.parse(v.data)}catch(y){if(v.ok&&v.data==="")v.data={};else if(v.ok)throw Error(`Failed to parse response \`${v.data}\` as JSON: ${y};
              try setting the \`responseType\` option to \`ResponseType.Text\` or \`ResponseType.Binary\` if the API does not return a JSON response.`)}return v}return v})}async get(c,h){return this.request({method:"GET",url:c,...h})}async post(c,h,f){return this.request({method:"POST",url:c,body:h,...f})}async put(c,h,f){return this.request({method:"PUT",url:c,body:h,...f})}async patch(c,h){return this.request({method:"PATCH",url:c,...h})}async delete(c,h){return this.request({method:"DELETE",url:c,...h})}}async function a(u){return e.invokeTauriCommand({__tauriModule:"Http",message:{cmd:"createClient",options:u}}).then(c=>new s(c))}let o=null;async function l(u,c){var h;return o===null&&(o=await a()),o.request({url:u,method:(h=c?.method)!==null&&h!==void 0?h:"GET",...c})}r.Body=n,r.Client=s,r.Response=i,r.fetch=l,r.getClient=a})(I1)),I1}var rR;function LW(){if(rR)return wh;rR=1,Object.defineProperty(wh,"__esModule",{value:!0}),wh.overrideGlobalXHR=wh.TauriXMLHttpRequest=void 0;const r=RW();var e;(function(i){i[i.Unsent=0]="Unsent",i[i.Opened=1]="Opened",i[i.HeadersReceived=2]="HeadersReceived",i[i.Loading=3]="Loading",i[i.Done=4]="Done"})(e||(e={}));class t extends EventTarget{method;url="";headers={};responseHeaders={};_readyState=e.Unsent;_response;_status=0;responseType="";timeout=0;withCredentials=!1;onabort=null;onerror=null;onload=null;onloadend=null;onloadstart=null;onprogress=null;ontimeout=null;onreadystatechange=null;UNSENT=e.Unsent;OPENED=e.Opened;HEADERS_RECEIVED=e.HeadersReceived;LOADING=e.Loading;DONE=e.Done;constructor(){super(),this.addEventListener("abort",s=>{this.onabort?.(s)}),this.addEventListener("error",s=>{this.onerror?.(s)}),this.addEventListener("load",s=>{this.onload?.(s)}),this.addEventListener("loadend",s=>{this.onloadend?.(s)}),this.addEventListener("loadstart",s=>{this.onloadstart?.(s)}),this.addEventListener("progress",s=>{this.onprogress?.(s)}),this.addEventListener("timeout",s=>{this.ontimeout?.(s)}),this.addEventListener("readystatechange",s=>{this.onreadystatechange?.(s)})}set readyState(s){this._readyState=s,this.dispatchEvent(new Event("readystatechange"))}get readyState(){return this._readyState}get response(){return this._response}get responseText(){if(typeof this._response!="string")throw new DOMException("response is not a string");return this._response}get responseURL(){return this.url}get responseXML(){throw new DOMException("git responseXML not implemented")}get status(){return this._status}get statusText(){return String(this._status)}get upload(){throw new DOMException("upload is not implemented")}abort(){throw new DOMException("abort is not implemented")}getAllResponseHeaders(){return Object.entries(this.responseHeaders).map(([s,a])=>`${s}: ${a}`).join(`
`)}getResponseHeader(s){return this.responseHeaders[s]??null}open(s,a){console.debug("open",s,a),this.method=s,this.url=a,this.readyState=e.Opened}overrideMimeType(s){throw new DOMException("overrideMimeType is not implemented")}send(s){console.debug("send",s);const{method:a,url:o,readyState:l}=this;if(!a||!o)throw new Error("method or url is not set");if(l!==e.Opened)throw new DOMException("readyState is not opened");if(s===null&&(s=""),typeof s!="string")throw new DOMException("using non-string body is not implemented");(async()=>{try{const u=await(0,r.getClient)();this.readyState=e.HeadersReceived,this.readyState=e.Loading,this.dispatchEvent(new ProgressEvent("loadstart",{lengthComputable:!0,loaded:0,total:0}));const c=await u.request({method:a,url:o,headers:this.headers,body:r.Body.text(s),responseType:r.ResponseType.Text});console.debug(`response of ${this.url}`,c),this._response=c.data,this._status=c.status,this.responseHeaders=c.headers;const h={lengthComputable:!0,loaded:c.data.length,total:c.data.length};this.dispatchEvent(new ProgressEvent("progress",h)),this.dispatchEvent(new ProgressEvent("load",h)),this.dispatchEvent(new ProgressEvent("loadend",h))}catch(u){console.error(u),this.dispatchEvent(new ErrorEvent("error",{error:u}))}finally{this.readyState=e.Done}})()}setRequestHeader(s,a){this.headers[s]=a}}wh.TauriXMLHttpRequest=t;const n=()=>{window.XMLHttpRequest=t};return wh.overrideGlobalXHR=n,wh}var nR;function OW(){return nR||(nR=1,(function(r){var e=Ch&&Ch.__createBinding||(Object.create?(function(n,i,s,a){a===void 0&&(a=s);var o=Object.getOwnPropertyDescriptor(i,s);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[s]}}),Object.defineProperty(n,a,o)}):(function(n,i,s,a){a===void 0&&(a=s),n[a]=i[s]})),t=Ch&&Ch.__exportStar||function(n,i){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(i,s)&&e(i,n,s)};Object.defineProperty(r,"__esModule",{value:!0}),t(LW(),r)})(Ch)),Ch}OW();var Ow;(function(r){r[r.Audio=1]="Audio",r[r.Cache=2]="Cache",r[r.Config=3]="Config",r[r.Data=4]="Data",r[r.LocalData=5]="LocalData",r[r.Document=6]="Document",r[r.Download=7]="Download",r[r.Picture=8]="Picture",r[r.Public=9]="Public",r[r.Video=10]="Video",r[r.Resource=11]="Resource",r[r.Temp=12]="Temp",r[r.AppConfig=13]="AppConfig",r[r.AppData=14]="AppData",r[r.AppLocalData=15]="AppLocalData",r[r.AppCache=16]="AppCache",r[r.AppLog=17]="AppLog",r[r.Desktop=18]="Desktop",r[r.Executable=19]="Executable",r[r.Font=20]="Font",r[r.Home=21]="Home",r[r.Runtime=22]="Runtime",r[r.Template=23]="Template"})(Ow||(Ow={}));async function MW(){return Ot("plugin:path|resolve_directory",{directory:Ow.Download})}var iR;(function(r){r[r.Start=0]="Start",r[r.Current=1]="Current",r[r.End=2]="End"})(iR||(iR={}));async function FW(r,e,t){if(r instanceof URL&&r.protocol!=="file:")throw new TypeError("Must be a file URL.");const n=new TextEncoder;await Ot("plugin:fs|write_text_file",n.encode(e),{headers:{path:encodeURIComponent(r instanceof URL?r.toString():r),options:JSON.stringify(t)}})}async function BW(r={}){return typeof r=="object"&&Object.freeze(r),await Ot("plugin:dialog|save",{options:r})}function NW(){return window.__TAURI_OS_PLUGIN_INTERNALS__.os_type}var px={exports:{}};function UW(r){throw new Error('Could not dynamically require "'+r+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var mx={exports:{}};const $W={},jW=Object.freeze(Object.defineProperty({__proto__:null,default:$W},Symbol.toStringTag,{value:"Module"})),e8=pH(jW);var zW=mx.exports,sR;function on(){return sR||(sR=1,(function(r,e){(function(t,n){r.exports=n()})(zW,function(){var t=t||(function(n,i){var s;if(typeof window<"u"&&window.crypto&&(s=window.crypto),typeof self<"u"&&self.crypto&&(s=self.crypto),typeof globalThis<"u"&&globalThis.crypto&&(s=globalThis.crypto),!s&&typeof window<"u"&&window.msCrypto&&(s=window.msCrypto),!s&&typeof Gh<"u"&&Gh.crypto&&(s=Gh.crypto),!s&&typeof UW=="function")try{s=e8}catch{}var a=function(){if(s){if(typeof s.getRandomValues=="function")try{return s.getRandomValues(new Uint32Array(1))[0]}catch{}if(typeof s.randomBytes=="function")try{return s.randomBytes(4).readInt32LE()}catch{}}throw new Error("Native crypto module could not be used to get secure random number.")},o=Object.create||(function(){function E(){}return function(D){var I;return E.prototype=D,I=new E,E.prototype=null,I}})(),l={},u=l.lib={},c=u.Base=(function(){return{extend:function(E){var D=o(this);return E&&D.mixIn(E),(!D.hasOwnProperty("init")||this.init===D.init)&&(D.init=function(){D.$super.init.apply(this,arguments)}),D.init.prototype=D,D.$super=this,D},create:function(){var E=this.extend();return E.init.apply(E,arguments),E},init:function(){},mixIn:function(E){for(var D in E)E.hasOwnProperty(D)&&(this[D]=E[D]);E.hasOwnProperty("toString")&&(this.toString=E.toString)},clone:function(){return this.init.prototype.extend(this)}}})(),h=u.WordArray=c.extend({init:function(E,D){E=this.words=E||[],D!=i?this.sigBytes=D:this.sigBytes=E.length*4},toString:function(E){return(E||g).stringify(this)},concat:function(E){var D=this.words,I=E.words,k=this.sigBytes,P=E.sigBytes;if(this.clamp(),k%4)for(var N=0;N<P;N++){var U=I[N>>>2]>>>24-N%4*8&255;D[k+N>>>2]|=U<<24-(k+N)%4*8}else for(var B=0;B<P;B+=4)D[k+B>>>2]=I[B>>>2];return this.sigBytes+=P,this},clamp:function(){var E=this.words,D=this.sigBytes;E[D>>>2]&=4294967295<<32-D%4*8,E.length=n.ceil(D/4)},clone:function(){var E=c.clone.call(this);return E.words=this.words.slice(0),E},random:function(E){for(var D=[],I=0;I<E;I+=4)D.push(a());return new h.init(D,E)}}),f=l.enc={},g=f.Hex={stringify:function(E){for(var D=E.words,I=E.sigBytes,k=[],P=0;P<I;P++){var N=D[P>>>2]>>>24-P%4*8&255;k.push((N>>>4).toString(16)),k.push((N&15).toString(16))}return k.join("")},parse:function(E){for(var D=E.length,I=[],k=0;k<D;k+=2)I[k>>>3]|=parseInt(E.substr(k,2),16)<<24-k%8*4;return new h.init(I,D/2)}},v=f.Latin1={stringify:function(E){for(var D=E.words,I=E.sigBytes,k=[],P=0;P<I;P++){var N=D[P>>>2]>>>24-P%4*8&255;k.push(String.fromCharCode(N))}return k.join("")},parse:function(E){for(var D=E.length,I=[],k=0;k<D;k++)I[k>>>2]|=(E.charCodeAt(k)&255)<<24-k%4*8;return new h.init(I,D)}},y=f.Utf8={stringify:function(E){try{return decodeURIComponent(escape(v.stringify(E)))}catch{throw new Error("Malformed UTF-8 data")}},parse:function(E){return v.parse(unescape(encodeURIComponent(E)))}},_=u.BufferedBlockAlgorithm=c.extend({reset:function(){this._data=new h.init,this._nDataBytes=0},_append:function(E){typeof E=="string"&&(E=y.parse(E)),this._data.concat(E),this._nDataBytes+=E.sigBytes},_process:function(E){var D,I=this._data,k=I.words,P=I.sigBytes,N=this.blockSize,U=N*4,B=P/U;E?B=n.ceil(B):B=n.max((B|0)-this._minBufferSize,0);var A=B*N,$=n.min(A*4,P);if(A){for(var W=0;W<A;W+=N)this._doProcessBlock(k,W);D=k.splice(0,A),I.sigBytes-=$}return new h.init(D,$)},clone:function(){var E=c.clone.call(this);return E._data=this._data.clone(),E},_minBufferSize:0});u.Hasher=_.extend({cfg:c.extend(),init:function(E){this.cfg=this.cfg.extend(E),this.reset()},reset:function(){_.reset.call(this),this._doReset()},update:function(E){return this._append(E),this._process(),this},finalize:function(E){E&&this._append(E);var D=this._doFinalize();return D},blockSize:16,_createHelper:function(E){return function(D,I){return new E.init(I).finalize(D)}},_createHmacHelper:function(E){return function(D,I){return new C.HMAC.init(E,I).finalize(D)}}});var C=l.algo={};return l})(Math);return t})})(mx)),mx.exports}var gx={exports:{}},HW=gx.exports,aR;function Qb(){return aR||(aR=1,(function(r,e){(function(t,n){r.exports=n(on())})(HW,function(t){return(function(n){var i=t,s=i.lib,a=s.Base,o=s.WordArray,l=i.x64={};l.Word=a.extend({init:function(u,c){this.high=u,this.low=c}}),l.WordArray=a.extend({init:function(u,c){u=this.words=u||[],c!=n?this.sigBytes=c:this.sigBytes=u.length*8},toX32:function(){for(var u=this.words,c=u.length,h=[],f=0;f<c;f++){var g=u[f];h.push(g.high),h.push(g.low)}return o.create(h,this.sigBytes)},clone:function(){for(var u=a.clone.call(this),c=u.words=this.words.slice(0),h=c.length,f=0;f<h;f++)c[f]=c[f].clone();return u}})})(),t})})(gx)),gx.exports}var vx={exports:{}},VW=vx.exports,oR;function WW(){return oR||(oR=1,(function(r,e){(function(t,n){r.exports=n(on())})(VW,function(t){return(function(){if(typeof ArrayBuffer=="function"){var n=t,i=n.lib,s=i.WordArray,a=s.init,o=s.init=function(l){if(l instanceof ArrayBuffer&&(l=new Uint8Array(l)),(l instanceof Int8Array||typeof Uint8ClampedArray<"u"&&l instanceof Uint8ClampedArray||l instanceof Int16Array||l instanceof Uint16Array||l instanceof Int32Array||l instanceof Uint32Array||l instanceof Float32Array||l instanceof Float64Array)&&(l=new Uint8Array(l.buffer,l.byteOffset,l.byteLength)),l instanceof Uint8Array){for(var u=l.byteLength,c=[],h=0;h<u;h++)c[h>>>2]|=l[h]<<24-h%4*8;a.call(this,c,u)}else a.apply(this,arguments)};o.prototype=s}})(),t.lib.WordArray})})(vx)),vx.exports}var yx={exports:{}},qW=yx.exports,lR;function GW(){return lR||(lR=1,(function(r,e){(function(t,n){r.exports=n(on())})(qW,function(t){return(function(){var n=t,i=n.lib,s=i.WordArray,a=n.enc;a.Utf16=a.Utf16BE={stringify:function(l){for(var u=l.words,c=l.sigBytes,h=[],f=0;f<c;f+=2){var g=u[f>>>2]>>>16-f%4*8&65535;h.push(String.fromCharCode(g))}return h.join("")},parse:function(l){for(var u=l.length,c=[],h=0;h<u;h++)c[h>>>1]|=l.charCodeAt(h)<<16-h%2*16;return s.create(c,u*2)}},a.Utf16LE={stringify:function(l){for(var u=l.words,c=l.sigBytes,h=[],f=0;f<c;f+=2){var g=o(u[f>>>2]>>>16-f%4*8&65535);h.push(String.fromCharCode(g))}return h.join("")},parse:function(l){for(var u=l.length,c=[],h=0;h<u;h++)c[h>>>1]|=o(l.charCodeAt(h)<<16-h%2*16);return s.create(c,u*2)}};function o(l){return l<<8&4278255360|l>>>8&16711935}})(),t.enc.Utf16})})(yx)),yx.exports}var xx={exports:{}},KW=xx.exports,uR;function vf(){return uR||(uR=1,(function(r,e){(function(t,n){r.exports=n(on())})(KW,function(t){return(function(){var n=t,i=n.lib,s=i.WordArray,a=n.enc;a.Base64={stringify:function(l){var u=l.words,c=l.sigBytes,h=this._map;l.clamp();for(var f=[],g=0;g<c;g+=3)for(var v=u[g>>>2]>>>24-g%4*8&255,y=u[g+1>>>2]>>>24-(g+1)%4*8&255,_=u[g+2>>>2]>>>24-(g+2)%4*8&255,C=v<<16|y<<8|_,E=0;E<4&&g+E*.75<c;E++)f.push(h.charAt(C>>>6*(3-E)&63));var D=h.charAt(64);if(D)for(;f.length%4;)f.push(D);return f.join("")},parse:function(l){var u=l.length,c=this._map,h=this._reverseMap;if(!h){h=this._reverseMap=[];for(var f=0;f<c.length;f++)h[c.charCodeAt(f)]=f}var g=c.charAt(64);if(g){var v=l.indexOf(g);v!==-1&&(u=v)}return o(l,u,h)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="};function o(l,u,c){for(var h=[],f=0,g=0;g<u;g++)if(g%4){var v=c[l.charCodeAt(g-1)]<<g%4*2,y=c[l.charCodeAt(g)]>>>6-g%4*2,_=v|y;h[f>>>2]|=_<<24-f%4*8,f++}return s.create(h,f)}})(),t.enc.Base64})})(xx)),xx.exports}var _x={exports:{}},XW=_x.exports,cR;function YW(){return cR||(cR=1,(function(r,e){(function(t,n){r.exports=n(on())})(XW,function(t){return(function(){var n=t,i=n.lib,s=i.WordArray,a=n.enc;a.Base64url={stringify:function(l,u){u===void 0&&(u=!0);var c=l.words,h=l.sigBytes,f=u?this._safe_map:this._map;l.clamp();for(var g=[],v=0;v<h;v+=3)for(var y=c[v>>>2]>>>24-v%4*8&255,_=c[v+1>>>2]>>>24-(v+1)%4*8&255,C=c[v+2>>>2]>>>24-(v+2)%4*8&255,E=y<<16|_<<8|C,D=0;D<4&&v+D*.75<h;D++)g.push(f.charAt(E>>>6*(3-D)&63));var I=f.charAt(64);if(I)for(;g.length%4;)g.push(I);return g.join("")},parse:function(l,u){u===void 0&&(u=!0);var c=l.length,h=u?this._safe_map:this._map,f=this._reverseMap;if(!f){f=this._reverseMap=[];for(var g=0;g<h.length;g++)f[h.charCodeAt(g)]=g}var v=h.charAt(64);if(v){var y=l.indexOf(v);y!==-1&&(c=y)}return o(l,c,f)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",_safe_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"};function o(l,u,c){for(var h=[],f=0,g=0;g<u;g++)if(g%4){var v=c[l.charCodeAt(g-1)]<<g%4*2,y=c[l.charCodeAt(g)]>>>6-g%4*2,_=v|y;h[f>>>2]|=_<<24-f%4*8,f++}return s.create(h,f)}})(),t.enc.Base64url})})(_x)),_x.exports}var bx={exports:{}},QW=bx.exports,dR;function yf(){return dR||(dR=1,(function(r,e){(function(t,n){r.exports=n(on())})(QW,function(t){return(function(n){var i=t,s=i.lib,a=s.WordArray,o=s.Hasher,l=i.algo,u=[];(function(){for(var y=0;y<64;y++)u[y]=n.abs(n.sin(y+1))*4294967296|0})();var c=l.MD5=o.extend({_doReset:function(){this._hash=new a.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(y,_){for(var C=0;C<16;C++){var E=_+C,D=y[E];y[E]=(D<<8|D>>>24)&16711935|(D<<24|D>>>8)&4278255360}var I=this._hash.words,k=y[_+0],P=y[_+1],N=y[_+2],U=y[_+3],B=y[_+4],A=y[_+5],$=y[_+6],W=y[_+7],V=y[_+8],Q=y[_+9],ie=y[_+10],ne=y[_+11],ue=y[_+12],se=y[_+13],ae=y[_+14],ce=y[_+15],ee=I[0],pe=I[1],me=I[2],ye=I[3];ee=h(ee,pe,me,ye,k,7,u[0]),ye=h(ye,ee,pe,me,P,12,u[1]),me=h(me,ye,ee,pe,N,17,u[2]),pe=h(pe,me,ye,ee,U,22,u[3]),ee=h(ee,pe,me,ye,B,7,u[4]),ye=h(ye,ee,pe,me,A,12,u[5]),me=h(me,ye,ee,pe,$,17,u[6]),pe=h(pe,me,ye,ee,W,22,u[7]),ee=h(ee,pe,me,ye,V,7,u[8]),ye=h(ye,ee,pe,me,Q,12,u[9]),me=h(me,ye,ee,pe,ie,17,u[10]),pe=h(pe,me,ye,ee,ne,22,u[11]),ee=h(ee,pe,me,ye,ue,7,u[12]),ye=h(ye,ee,pe,me,se,12,u[13]),me=h(me,ye,ee,pe,ae,17,u[14]),pe=h(pe,me,ye,ee,ce,22,u[15]),ee=f(ee,pe,me,ye,P,5,u[16]),ye=f(ye,ee,pe,me,$,9,u[17]),me=f(me,ye,ee,pe,ne,14,u[18]),pe=f(pe,me,ye,ee,k,20,u[19]),ee=f(ee,pe,me,ye,A,5,u[20]),ye=f(ye,ee,pe,me,ie,9,u[21]),me=f(me,ye,ee,pe,ce,14,u[22]),pe=f(pe,me,ye,ee,B,20,u[23]),ee=f(ee,pe,me,ye,Q,5,u[24]),ye=f(ye,ee,pe,me,ae,9,u[25]),me=f(me,ye,ee,pe,U,14,u[26]),pe=f(pe,me,ye,ee,V,20,u[27]),ee=f(ee,pe,me,ye,se,5,u[28]),ye=f(ye,ee,pe,me,N,9,u[29]),me=f(me,ye,ee,pe,W,14,u[30]),pe=f(pe,me,ye,ee,ue,20,u[31]),ee=g(ee,pe,me,ye,A,4,u[32]),ye=g(ye,ee,pe,me,V,11,u[33]),me=g(me,ye,ee,pe,ne,16,u[34]),pe=g(pe,me,ye,ee,ae,23,u[35]),ee=g(ee,pe,me,ye,P,4,u[36]),ye=g(ye,ee,pe,me,B,11,u[37]),me=g(me,ye,ee,pe,W,16,u[38]),pe=g(pe,me,ye,ee,ie,23,u[39]),ee=g(ee,pe,me,ye,se,4,u[40]),ye=g(ye,ee,pe,me,k,11,u[41]),me=g(me,ye,ee,pe,U,16,u[42]),pe=g(pe,me,ye,ee,$,23,u[43]),ee=g(ee,pe,me,ye,Q,4,u[44]),ye=g(ye,ee,pe,me,ue,11,u[45]),me=g(me,ye,ee,pe,ce,16,u[46]),pe=g(pe,me,ye,ee,N,23,u[47]),ee=v(ee,pe,me,ye,k,6,u[48]),ye=v(ye,ee,pe,me,W,10,u[49]),me=v(me,ye,ee,pe,ae,15,u[50]),pe=v(pe,me,ye,ee,A,21,u[51]),ee=v(ee,pe,me,ye,ue,6,u[52]),ye=v(ye,ee,pe,me,U,10,u[53]),me=v(me,ye,ee,pe,ie,15,u[54]),pe=v(pe,me,ye,ee,P,21,u[55]),ee=v(ee,pe,me,ye,V,6,u[56]),ye=v(ye,ee,pe,me,ce,10,u[57]),me=v(me,ye,ee,pe,$,15,u[58]),pe=v(pe,me,ye,ee,se,21,u[59]),ee=v(ee,pe,me,ye,B,6,u[60]),ye=v(ye,ee,pe,me,ne,10,u[61]),me=v(me,ye,ee,pe,N,15,u[62]),pe=v(pe,me,ye,ee,Q,21,u[63]),I[0]=I[0]+ee|0,I[1]=I[1]+pe|0,I[2]=I[2]+me|0,I[3]=I[3]+ye|0},_doFinalize:function(){var y=this._data,_=y.words,C=this._nDataBytes*8,E=y.sigBytes*8;_[E>>>5]|=128<<24-E%32;var D=n.floor(C/4294967296),I=C;_[(E+64>>>9<<4)+15]=(D<<8|D>>>24)&16711935|(D<<24|D>>>8)&4278255360,_[(E+64>>>9<<4)+14]=(I<<8|I>>>24)&16711935|(I<<24|I>>>8)&4278255360,y.sigBytes=(_.length+1)*4,this._process();for(var k=this._hash,P=k.words,N=0;N<4;N++){var U=P[N];P[N]=(U<<8|U>>>24)&16711935|(U<<24|U>>>8)&4278255360}return k},clone:function(){var y=o.clone.call(this);return y._hash=this._hash.clone(),y}});function h(y,_,C,E,D,I,k){var P=y+(_&C|~_&E)+D+k;return(P<<I|P>>>32-I)+_}function f(y,_,C,E,D,I,k){var P=y+(_&E|C&~E)+D+k;return(P<<I|P>>>32-I)+_}function g(y,_,C,E,D,I,k){var P=y+(_^C^E)+D+k;return(P<<I|P>>>32-I)+_}function v(y,_,C,E,D,I,k){var P=y+(C^(_|~E))+D+k;return(P<<I|P>>>32-I)+_}i.MD5=o._createHelper(c),i.HmacMD5=o._createHmacHelper(c)})(Math),t.MD5})})(bx)),bx.exports}var Sx={exports:{}},JW=Sx.exports,hR;function t8(){return hR||(hR=1,(function(r,e){(function(t,n){r.exports=n(on())})(JW,function(t){return(function(){var n=t,i=n.lib,s=i.WordArray,a=i.Hasher,o=n.algo,l=[],u=o.SHA1=a.extend({_doReset:function(){this._hash=new s.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(c,h){for(var f=this._hash.words,g=f[0],v=f[1],y=f[2],_=f[3],C=f[4],E=0;E<80;E++){if(E<16)l[E]=c[h+E]|0;else{var D=l[E-3]^l[E-8]^l[E-14]^l[E-16];l[E]=D<<1|D>>>31}var I=(g<<5|g>>>27)+C+l[E];E<20?I+=(v&y|~v&_)+1518500249:E<40?I+=(v^y^_)+1859775393:E<60?I+=(v&y|v&_|y&_)-1894007588:I+=(v^y^_)-899497514,C=_,_=y,y=v<<30|v>>>2,v=g,g=I}f[0]=f[0]+g|0,f[1]=f[1]+v|0,f[2]=f[2]+y|0,f[3]=f[3]+_|0,f[4]=f[4]+C|0},_doFinalize:function(){var c=this._data,h=c.words,f=this._nDataBytes*8,g=c.sigBytes*8;return h[g>>>5]|=128<<24-g%32,h[(g+64>>>9<<4)+14]=Math.floor(f/4294967296),h[(g+64>>>9<<4)+15]=f,c.sigBytes=h.length*4,this._process(),this._hash},clone:function(){var c=a.clone.call(this);return c._hash=this._hash.clone(),c}});n.SHA1=a._createHelper(u),n.HmacSHA1=a._createHmacHelper(u)})(),t.SHA1})})(Sx)),Sx.exports}var Tx={exports:{}},ZW=Tx.exports,fR;function BE(){return fR||(fR=1,(function(r,e){(function(t,n){r.exports=n(on())})(ZW,function(t){return(function(n){var i=t,s=i.lib,a=s.WordArray,o=s.Hasher,l=i.algo,u=[],c=[];(function(){function g(C){for(var E=n.sqrt(C),D=2;D<=E;D++)if(!(C%D))return!1;return!0}function v(C){return(C-(C|0))*4294967296|0}for(var y=2,_=0;_<64;)g(y)&&(_<8&&(u[_]=v(n.pow(y,1/2))),c[_]=v(n.pow(y,1/3)),_++),y++})();var h=[],f=l.SHA256=o.extend({_doReset:function(){this._hash=new a.init(u.slice(0))},_doProcessBlock:function(g,v){for(var y=this._hash.words,_=y[0],C=y[1],E=y[2],D=y[3],I=y[4],k=y[5],P=y[6],N=y[7],U=0;U<64;U++){if(U<16)h[U]=g[v+U]|0;else{var B=h[U-15],A=(B<<25|B>>>7)^(B<<14|B>>>18)^B>>>3,$=h[U-2],W=($<<15|$>>>17)^($<<13|$>>>19)^$>>>10;h[U]=A+h[U-7]+W+h[U-16]}var V=I&k^~I&P,Q=_&C^_&E^C&E,ie=(_<<30|_>>>2)^(_<<19|_>>>13)^(_<<10|_>>>22),ne=(I<<26|I>>>6)^(I<<21|I>>>11)^(I<<7|I>>>25),ue=N+ne+V+c[U]+h[U],se=ie+Q;N=P,P=k,k=I,I=D+ue|0,D=E,E=C,C=_,_=ue+se|0}y[0]=y[0]+_|0,y[1]=y[1]+C|0,y[2]=y[2]+E|0,y[3]=y[3]+D|0,y[4]=y[4]+I|0,y[5]=y[5]+k|0,y[6]=y[6]+P|0,y[7]=y[7]+N|0},_doFinalize:function(){var g=this._data,v=g.words,y=this._nDataBytes*8,_=g.sigBytes*8;return v[_>>>5]|=128<<24-_%32,v[(_+64>>>9<<4)+14]=n.floor(y/4294967296),v[(_+64>>>9<<4)+15]=y,g.sigBytes=v.length*4,this._process(),this._hash},clone:function(){var g=o.clone.call(this);return g._hash=this._hash.clone(),g}});i.SHA256=o._createHelper(f),i.HmacSHA256=o._createHmacHelper(f)})(Math),t.SHA256})})(Tx)),Tx.exports}var Cx={exports:{}},eq=Cx.exports,pR;function tq(){return pR||(pR=1,(function(r,e){(function(t,n,i){r.exports=n(on(),BE())})(eq,function(t){return(function(){var n=t,i=n.lib,s=i.WordArray,a=n.algo,o=a.SHA256,l=a.SHA224=o.extend({_doReset:function(){this._hash=new s.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},_doFinalize:function(){var u=o._doFinalize.call(this);return u.sigBytes-=4,u}});n.SHA224=o._createHelper(l),n.HmacSHA224=o._createHmacHelper(l)})(),t.SHA224})})(Cx)),Cx.exports}var wx={exports:{}},rq=wx.exports,mR;function r8(){return mR||(mR=1,(function(r,e){(function(t,n,i){r.exports=n(on(),Qb())})(rq,function(t){return(function(){var n=t,i=n.lib,s=i.Hasher,a=n.x64,o=a.Word,l=a.WordArray,u=n.algo;function c(){return o.create.apply(o,arguments)}var h=[c(1116352408,3609767458),c(1899447441,602891725),c(3049323471,3964484399),c(3921009573,2173295548),c(961987163,4081628472),c(1508970993,3053834265),c(2453635748,2937671579),c(2870763221,3664609560),c(3624381080,2734883394),c(310598401,1164996542),c(607225278,1323610764),c(1426881987,3590304994),c(1925078388,4068182383),c(2162078206,991336113),c(2614888103,633803317),c(3248222580,3479774868),c(3835390401,2666613458),c(4022224774,944711139),c(264347078,2341262773),c(604807628,2007800933),c(770255983,1495990901),c(1249150122,1856431235),c(1555081692,3175218132),c(1996064986,2198950837),c(2554220882,3999719339),c(2821834349,766784016),c(2952996808,2566594879),c(3210313671,3203337956),c(3336571891,1034457026),c(3584528711,2466948901),c(113926993,3758326383),c(338241895,168717936),c(666307205,1188179964),c(773529912,1546045734),c(1294757372,1522805485),c(1396182291,2643833823),c(1695183700,2343527390),c(1986661051,1014477480),c(2177026350,1206759142),c(2456956037,344077627),c(2730485921,1290863460),c(2820302411,3158454273),c(3259730800,3505952657),c(3345764771,106217008),c(3516065817,3606008344),c(3600352804,1432725776),c(4094571909,1467031594),c(275423344,851169720),c(430227734,3100823752),c(506948616,1363258195),c(659060556,3750685593),c(883997877,3785050280),c(958139571,3318307427),c(1322822218,3812723403),c(1537002063,2003034995),c(1747873779,3602036899),c(1955562222,1575990012),c(2024104815,1125592928),c(2227730452,2716904306),c(2361852424,442776044),c(2428436474,593698344),c(2756734187,3733110249),c(3204031479,2999351573),c(3329325298,3815920427),c(3391569614,3928383900),c(3515267271,566280711),c(3940187606,3454069534),c(4118630271,4000239992),c(116418474,1914138554),c(174292421,2731055270),c(289380356,3203993006),c(460393269,320620315),c(685471733,587496836),c(852142971,1086792851),c(1017036298,365543100),c(1126000580,2618297676),c(1288033470,3409855158),c(1501505948,4234509866),c(1607167915,987167468),c(1816402316,1246189591)],f=[];(function(){for(var v=0;v<80;v++)f[v]=c()})();var g=u.SHA512=s.extend({_doReset:function(){this._hash=new l.init([new o.init(1779033703,4089235720),new o.init(3144134277,2227873595),new o.init(1013904242,4271175723),new o.init(2773480762,1595750129),new o.init(1359893119,2917565137),new o.init(2600822924,725511199),new o.init(528734635,4215389547),new o.init(1541459225,327033209)])},_doProcessBlock:function(v,y){for(var _=this._hash.words,C=_[0],E=_[1],D=_[2],I=_[3],k=_[4],P=_[5],N=_[6],U=_[7],B=C.high,A=C.low,$=E.high,W=E.low,V=D.high,Q=D.low,ie=I.high,ne=I.low,ue=k.high,se=k.low,ae=P.high,ce=P.low,ee=N.high,pe=N.low,me=U.high,ye=U.low,Oe=B,Le=A,st=$,ze=W,pt=V,Ye=Q,Pt=ie,Rt=ne,Ve=ue,Ne=se,Ie=ae,Ue=ce,et=ee,ot=pe,dt=me,it=ye,bt=0;bt<80;bt++){var lt,gr,hr=f[bt];if(bt<16)gr=hr.high=v[y+bt*2]|0,lt=hr.low=v[y+bt*2+1]|0;else{var Rr=f[bt-15],nr=Rr.high,qt=Rr.low,fr=(nr>>>1|qt<<31)^(nr>>>8|qt<<24)^nr>>>7,yr=(qt>>>1|nr<<31)^(qt>>>8|nr<<24)^(qt>>>7|nr<<25),Lr=f[bt-2],vt=Lr.high,Ut=Lr.low,rn=(vt>>>19|Ut<<13)^(vt<<3|Ut>>>29)^vt>>>6,jt=(Ut>>>19|vt<<13)^(Ut<<3|vt>>>29)^(Ut>>>6|vt<<26),br=f[bt-7],Or=br.high,Hr=br.low,ln=f[bt-16],Cn=ln.high,wn=ln.low;lt=yr+Hr,gr=fr+Or+(lt>>>0<yr>>>0?1:0),lt=lt+jt,gr=gr+rn+(lt>>>0<jt>>>0?1:0),lt=lt+wn,gr=gr+Cn+(lt>>>0<wn>>>0?1:0),hr.high=gr,hr.low=lt}var Fr=Ve&Ie^~Ve&et,oe=Ne&Ue^~Ne&ot,fe=Oe&st^Oe&pt^st&pt,Te=Le&ze^Le&Ye^ze&Ye,je=(Oe>>>28|Le<<4)^(Oe<<30|Le>>>2)^(Oe<<25|Le>>>7),mt=(Le>>>28|Oe<<4)^(Le<<30|Oe>>>2)^(Le<<25|Oe>>>7),St=(Ve>>>14|Ne<<18)^(Ve>>>18|Ne<<14)^(Ve<<23|Ne>>>9),be=(Ne>>>14|Ve<<18)^(Ne>>>18|Ve<<14)^(Ne<<23|Ve>>>9),xe=h[bt],Ae=xe.high,Ke=xe.low,Xe=it+be,_t=dt+St+(Xe>>>0<it>>>0?1:0),Xe=Xe+oe,_t=_t+Fr+(Xe>>>0<oe>>>0?1:0),Xe=Xe+Ke,_t=_t+Ae+(Xe>>>0<Ke>>>0?1:0),Xe=Xe+lt,_t=_t+gr+(Xe>>>0<lt>>>0?1:0),Lt=mt+Te,ct=je+fe+(Lt>>>0<mt>>>0?1:0);dt=et,it=ot,et=Ie,ot=Ue,Ie=Ve,Ue=Ne,Ne=Rt+Xe|0,Ve=Pt+_t+(Ne>>>0<Rt>>>0?1:0)|0,Pt=pt,Rt=Ye,pt=st,Ye=ze,st=Oe,ze=Le,Le=Xe+Lt|0,Oe=_t+ct+(Le>>>0<Xe>>>0?1:0)|0}A=C.low=A+Le,C.high=B+Oe+(A>>>0<Le>>>0?1:0),W=E.low=W+ze,E.high=$+st+(W>>>0<ze>>>0?1:0),Q=D.low=Q+Ye,D.high=V+pt+(Q>>>0<Ye>>>0?1:0),ne=I.low=ne+Rt,I.high=ie+Pt+(ne>>>0<Rt>>>0?1:0),se=k.low=se+Ne,k.high=ue+Ve+(se>>>0<Ne>>>0?1:0),ce=P.low=ce+Ue,P.high=ae+Ie+(ce>>>0<Ue>>>0?1:0),pe=N.low=pe+ot,N.high=ee+et+(pe>>>0<ot>>>0?1:0),ye=U.low=ye+it,U.high=me+dt+(ye>>>0<it>>>0?1:0)},_doFinalize:function(){var v=this._data,y=v.words,_=this._nDataBytes*8,C=v.sigBytes*8;y[C>>>5]|=128<<24-C%32,y[(C+128>>>10<<5)+30]=Math.floor(_/4294967296),y[(C+128>>>10<<5)+31]=_,v.sigBytes=y.length*4,this._process();var E=this._hash.toX32();return E},clone:function(){var v=s.clone.call(this);return v._hash=this._hash.clone(),v},blockSize:1024/32});n.SHA512=s._createHelper(g),n.HmacSHA512=s._createHmacHelper(g)})(),t.SHA512})})(wx)),wx.exports}var Ex={exports:{}},nq=Ex.exports,gR;function iq(){return gR||(gR=1,(function(r,e){(function(t,n,i){r.exports=n(on(),Qb(),r8())})(nq,function(t){return(function(){var n=t,i=n.x64,s=i.Word,a=i.WordArray,o=n.algo,l=o.SHA512,u=o.SHA384=l.extend({_doReset:function(){this._hash=new a.init([new s.init(3418070365,3238371032),new s.init(1654270250,914150663),new s.init(2438529370,812702999),new s.init(355462360,4144912697),new s.init(1731405415,4290775857),new s.init(2394180231,1750603025),new s.init(3675008525,1694076839),new s.init(1203062813,3204075428)])},_doFinalize:function(){var c=l._doFinalize.call(this);return c.sigBytes-=16,c}});n.SHA384=l._createHelper(u),n.HmacSHA384=l._createHmacHelper(u)})(),t.SHA384})})(Ex)),Ex.exports}var kx={exports:{}},sq=kx.exports,vR;function aq(){return vR||(vR=1,(function(r,e){(function(t,n,i){r.exports=n(on(),Qb())})(sq,function(t){return(function(n){var i=t,s=i.lib,a=s.WordArray,o=s.Hasher,l=i.x64,u=l.Word,c=i.algo,h=[],f=[],g=[];(function(){for(var _=1,C=0,E=0;E<24;E++){h[_+5*C]=(E+1)*(E+2)/2%64;var D=C%5,I=(2*_+3*C)%5;_=D,C=I}for(var _=0;_<5;_++)for(var C=0;C<5;C++)f[_+5*C]=C+(2*_+3*C)%5*5;for(var k=1,P=0;P<24;P++){for(var N=0,U=0,B=0;B<7;B++){if(k&1){var A=(1<<B)-1;A<32?U^=1<<A:N^=1<<A-32}k&128?k=k<<1^113:k<<=1}g[P]=u.create(N,U)}})();var v=[];(function(){for(var _=0;_<25;_++)v[_]=u.create()})();var y=c.SHA3=o.extend({cfg:o.cfg.extend({outputLength:512}),_doReset:function(){for(var _=this._state=[],C=0;C<25;C++)_[C]=new u.init;this.blockSize=(1600-2*this.cfg.outputLength)/32},_doProcessBlock:function(_,C){for(var E=this._state,D=this.blockSize/2,I=0;I<D;I++){var k=_[C+2*I],P=_[C+2*I+1];k=(k<<8|k>>>24)&16711935|(k<<24|k>>>8)&4278255360,P=(P<<8|P>>>24)&16711935|(P<<24|P>>>8)&4278255360;var N=E[I];N.high^=P,N.low^=k}for(var U=0;U<24;U++){for(var B=0;B<5;B++){for(var A=0,$=0,W=0;W<5;W++){var N=E[B+5*W];A^=N.high,$^=N.low}var V=v[B];V.high=A,V.low=$}for(var B=0;B<5;B++)for(var Q=v[(B+4)%5],ie=v[(B+1)%5],ne=ie.high,ue=ie.low,A=Q.high^(ne<<1|ue>>>31),$=Q.low^(ue<<1|ne>>>31),W=0;W<5;W++){var N=E[B+5*W];N.high^=A,N.low^=$}for(var se=1;se<25;se++){var A,$,N=E[se],ae=N.high,ce=N.low,ee=h[se];ee<32?(A=ae<<ee|ce>>>32-ee,$=ce<<ee|ae>>>32-ee):(A=ce<<ee-32|ae>>>64-ee,$=ae<<ee-32|ce>>>64-ee);var pe=v[f[se]];pe.high=A,pe.low=$}var me=v[0],ye=E[0];me.high=ye.high,me.low=ye.low;for(var B=0;B<5;B++)for(var W=0;W<5;W++){var se=B+5*W,N=E[se],Oe=v[se],Le=v[(B+1)%5+5*W],st=v[(B+2)%5+5*W];N.high=Oe.high^~Le.high&st.high,N.low=Oe.low^~Le.low&st.low}var N=E[0],ze=g[U];N.high^=ze.high,N.low^=ze.low}},_doFinalize:function(){var _=this._data,C=_.words;this._nDataBytes*8;var E=_.sigBytes*8,D=this.blockSize*32;C[E>>>5]|=1<<24-E%32,C[(n.ceil((E+1)/D)*D>>>5)-1]|=128,_.sigBytes=C.length*4,this._process();for(var I=this._state,k=this.cfg.outputLength/8,P=k/8,N=[],U=0;U<P;U++){var B=I[U],A=B.high,$=B.low;A=(A<<8|A>>>24)&16711935|(A<<24|A>>>8)&4278255360,$=($<<8|$>>>24)&16711935|($<<24|$>>>8)&4278255360,N.push($),N.push(A)}return new a.init(N,k)},clone:function(){for(var _=o.clone.call(this),C=_._state=this._state.slice(0),E=0;E<25;E++)C[E]=C[E].clone();return _}});i.SHA3=o._createHelper(y),i.HmacSHA3=o._createHmacHelper(y)})(Math),t.SHA3})})(kx)),kx.exports}var Ax={exports:{}},oq=Ax.exports,yR;function lq(){return yR||(yR=1,(function(r,e){(function(t,n){r.exports=n(on())})(oq,function(t){/** @preserve
			(c) 2012 by Cdric Mesnil. All rights reserved.

			Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:

			    - Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.
			    - Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.

			THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
			*/return(function(n){var i=t,s=i.lib,a=s.WordArray,o=s.Hasher,l=i.algo,u=a.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),c=a.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),h=a.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),f=a.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),g=a.create([0,1518500249,1859775393,2400959708,2840853838]),v=a.create([1352829926,1548603684,1836072691,2053994217,0]),y=l.RIPEMD160=o.extend({_doReset:function(){this._hash=a.create([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(P,N){for(var U=0;U<16;U++){var B=N+U,A=P[B];P[B]=(A<<8|A>>>24)&16711935|(A<<24|A>>>8)&4278255360}var $=this._hash.words,W=g.words,V=v.words,Q=u.words,ie=c.words,ne=h.words,ue=f.words,se,ae,ce,ee,pe,me,ye,Oe,Le,st;me=se=$[0],ye=ae=$[1],Oe=ce=$[2],Le=ee=$[3],st=pe=$[4];for(var ze,U=0;U<80;U+=1)ze=se+P[N+Q[U]]|0,U<16?ze+=_(ae,ce,ee)+W[0]:U<32?ze+=C(ae,ce,ee)+W[1]:U<48?ze+=E(ae,ce,ee)+W[2]:U<64?ze+=D(ae,ce,ee)+W[3]:ze+=I(ae,ce,ee)+W[4],ze=ze|0,ze=k(ze,ne[U]),ze=ze+pe|0,se=pe,pe=ee,ee=k(ce,10),ce=ae,ae=ze,ze=me+P[N+ie[U]]|0,U<16?ze+=I(ye,Oe,Le)+V[0]:U<32?ze+=D(ye,Oe,Le)+V[1]:U<48?ze+=E(ye,Oe,Le)+V[2]:U<64?ze+=C(ye,Oe,Le)+V[3]:ze+=_(ye,Oe,Le)+V[4],ze=ze|0,ze=k(ze,ue[U]),ze=ze+st|0,me=st,st=Le,Le=k(Oe,10),Oe=ye,ye=ze;ze=$[1]+ce+Le|0,$[1]=$[2]+ee+st|0,$[2]=$[3]+pe+me|0,$[3]=$[4]+se+ye|0,$[4]=$[0]+ae+Oe|0,$[0]=ze},_doFinalize:function(){var P=this._data,N=P.words,U=this._nDataBytes*8,B=P.sigBytes*8;N[B>>>5]|=128<<24-B%32,N[(B+64>>>9<<4)+14]=(U<<8|U>>>24)&16711935|(U<<24|U>>>8)&4278255360,P.sigBytes=(N.length+1)*4,this._process();for(var A=this._hash,$=A.words,W=0;W<5;W++){var V=$[W];$[W]=(V<<8|V>>>24)&16711935|(V<<24|V>>>8)&4278255360}return A},clone:function(){var P=o.clone.call(this);return P._hash=this._hash.clone(),P}});function _(P,N,U){return P^N^U}function C(P,N,U){return P&N|~P&U}function E(P,N,U){return(P|~N)^U}function D(P,N,U){return P&U|N&~U}function I(P,N,U){return P^(N|~U)}function k(P,N){return P<<N|P>>>32-N}i.RIPEMD160=o._createHelper(y),i.HmacRIPEMD160=o._createHmacHelper(y)})(),t.RIPEMD160})})(Ax)),Ax.exports}var Dx={exports:{}},uq=Dx.exports,xR;function NE(){return xR||(xR=1,(function(r,e){(function(t,n){r.exports=n(on())})(uq,function(t){(function(){var n=t,i=n.lib,s=i.Base,a=n.enc,o=a.Utf8,l=n.algo;l.HMAC=s.extend({init:function(u,c){u=this._hasher=new u.init,typeof c=="string"&&(c=o.parse(c));var h=u.blockSize,f=h*4;c.sigBytes>f&&(c=u.finalize(c)),c.clamp();for(var g=this._oKey=c.clone(),v=this._iKey=c.clone(),y=g.words,_=v.words,C=0;C<h;C++)y[C]^=1549556828,_[C]^=909522486;g.sigBytes=v.sigBytes=f,this.reset()},reset:function(){var u=this._hasher;u.reset(),u.update(this._iKey)},update:function(u){return this._hasher.update(u),this},finalize:function(u){var c=this._hasher,h=c.finalize(u);c.reset();var f=c.finalize(this._oKey.clone().concat(h));return f}})})()})})(Dx)),Dx.exports}var Ix={exports:{}},cq=Ix.exports,_R;function dq(){return _R||(_R=1,(function(r,e){(function(t,n,i){r.exports=n(on(),BE(),NE())})(cq,function(t){return(function(){var n=t,i=n.lib,s=i.Base,a=i.WordArray,o=n.algo,l=o.SHA256,u=o.HMAC,c=o.PBKDF2=s.extend({cfg:s.extend({keySize:128/32,hasher:l,iterations:25e4}),init:function(h){this.cfg=this.cfg.extend(h)},compute:function(h,f){for(var g=this.cfg,v=u.create(g.hasher,h),y=a.create(),_=a.create([1]),C=y.words,E=_.words,D=g.keySize,I=g.iterations;C.length<D;){var k=v.update(f).finalize(_);v.reset();for(var P=k.words,N=P.length,U=k,B=1;B<I;B++){U=v.finalize(U),v.reset();for(var A=U.words,$=0;$<N;$++)P[$]^=A[$]}y.concat(k),E[0]++}return y.sigBytes=D*4,y}});n.PBKDF2=function(h,f,g){return c.create(g).compute(h,f)}})(),t.PBKDF2})})(Ix)),Ix.exports}var Px={exports:{}},hq=Px.exports,bR;function Qd(){return bR||(bR=1,(function(r,e){(function(t,n,i){r.exports=n(on(),t8(),NE())})(hq,function(t){return(function(){var n=t,i=n.lib,s=i.Base,a=i.WordArray,o=n.algo,l=o.MD5,u=o.EvpKDF=s.extend({cfg:s.extend({keySize:128/32,hasher:l,iterations:1}),init:function(c){this.cfg=this.cfg.extend(c)},compute:function(c,h){for(var f,g=this.cfg,v=g.hasher.create(),y=a.create(),_=y.words,C=g.keySize,E=g.iterations;_.length<C;){f&&v.update(f),f=v.update(c).finalize(h),v.reset();for(var D=1;D<E;D++)f=v.finalize(f),v.reset();y.concat(f)}return y.sigBytes=C*4,y}});n.EvpKDF=function(c,h,f){return u.create(f).compute(c,h)}})(),t.EvpKDF})})(Px)),Px.exports}var Rx={exports:{}},fq=Rx.exports,SR;function ss(){return SR||(SR=1,(function(r,e){(function(t,n,i){r.exports=n(on(),Qd())})(fq,function(t){t.lib.Cipher||(function(n){var i=t,s=i.lib,a=s.Base,o=s.WordArray,l=s.BufferedBlockAlgorithm,u=i.enc;u.Utf8;var c=u.Base64,h=i.algo,f=h.EvpKDF,g=s.Cipher=l.extend({cfg:a.extend(),createEncryptor:function(A,$){return this.create(this._ENC_XFORM_MODE,A,$)},createDecryptor:function(A,$){return this.create(this._DEC_XFORM_MODE,A,$)},init:function(A,$,W){this.cfg=this.cfg.extend(W),this._xformMode=A,this._key=$,this.reset()},reset:function(){l.reset.call(this),this._doReset()},process:function(A){return this._append(A),this._process()},finalize:function(A){A&&this._append(A);var $=this._doFinalize();return $},keySize:128/32,ivSize:128/32,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:(function(){function A($){return typeof $=="string"?B:P}return function($){return{encrypt:function(W,V,Q){return A(V).encrypt($,W,V,Q)},decrypt:function(W,V,Q){return A(V).decrypt($,W,V,Q)}}}})()});s.StreamCipher=g.extend({_doFinalize:function(){var A=this._process(!0);return A},blockSize:1});var v=i.mode={},y=s.BlockCipherMode=a.extend({createEncryptor:function(A,$){return this.Encryptor.create(A,$)},createDecryptor:function(A,$){return this.Decryptor.create(A,$)},init:function(A,$){this._cipher=A,this._iv=$}}),_=v.CBC=(function(){var A=y.extend();A.Encryptor=A.extend({processBlock:function(W,V){var Q=this._cipher,ie=Q.blockSize;$.call(this,W,V,ie),Q.encryptBlock(W,V),this._prevBlock=W.slice(V,V+ie)}}),A.Decryptor=A.extend({processBlock:function(W,V){var Q=this._cipher,ie=Q.blockSize,ne=W.slice(V,V+ie);Q.decryptBlock(W,V),$.call(this,W,V,ie),this._prevBlock=ne}});function $(W,V,Q){var ie,ne=this._iv;ne?(ie=ne,this._iv=n):ie=this._prevBlock;for(var ue=0;ue<Q;ue++)W[V+ue]^=ie[ue]}return A})(),C=i.pad={},E=C.Pkcs7={pad:function(A,$){for(var W=$*4,V=W-A.sigBytes%W,Q=V<<24|V<<16|V<<8|V,ie=[],ne=0;ne<V;ne+=4)ie.push(Q);var ue=o.create(ie,V);A.concat(ue)},unpad:function(A){var $=A.words[A.sigBytes-1>>>2]&255;A.sigBytes-=$}};s.BlockCipher=g.extend({cfg:g.cfg.extend({mode:_,padding:E}),reset:function(){var A;g.reset.call(this);var $=this.cfg,W=$.iv,V=$.mode;this._xformMode==this._ENC_XFORM_MODE?A=V.createEncryptor:(A=V.createDecryptor,this._minBufferSize=1),this._mode&&this._mode.__creator==A?this._mode.init(this,W&&W.words):(this._mode=A.call(V,this,W&&W.words),this._mode.__creator=A)},_doProcessBlock:function(A,$){this._mode.processBlock(A,$)},_doFinalize:function(){var A,$=this.cfg.padding;return this._xformMode==this._ENC_XFORM_MODE?($.pad(this._data,this.blockSize),A=this._process(!0)):(A=this._process(!0),$.unpad(A)),A},blockSize:128/32});var D=s.CipherParams=a.extend({init:function(A){this.mixIn(A)},toString:function(A){return(A||this.formatter).stringify(this)}}),I=i.format={},k=I.OpenSSL={stringify:function(A){var $,W=A.ciphertext,V=A.salt;return V?$=o.create([1398893684,1701076831]).concat(V).concat(W):$=W,$.toString(c)},parse:function(A){var $,W=c.parse(A),V=W.words;return V[0]==1398893684&&V[1]==1701076831&&($=o.create(V.slice(2,4)),V.splice(0,4),W.sigBytes-=16),D.create({ciphertext:W,salt:$})}},P=s.SerializableCipher=a.extend({cfg:a.extend({format:k}),encrypt:function(A,$,W,V){V=this.cfg.extend(V);var Q=A.createEncryptor(W,V),ie=Q.finalize($),ne=Q.cfg;return D.create({ciphertext:ie,key:W,iv:ne.iv,algorithm:A,mode:ne.mode,padding:ne.padding,blockSize:A.blockSize,formatter:V.format})},decrypt:function(A,$,W,V){V=this.cfg.extend(V),$=this._parse($,V.format);var Q=A.createDecryptor(W,V).finalize($.ciphertext);return Q},_parse:function(A,$){return typeof A=="string"?$.parse(A,this):A}}),N=i.kdf={},U=N.OpenSSL={execute:function(A,$,W,V,Q){if(V||(V=o.random(64/8)),Q)var ie=f.create({keySize:$+W,hasher:Q}).compute(A,V);else var ie=f.create({keySize:$+W}).compute(A,V);var ne=o.create(ie.words.slice($),W*4);return ie.sigBytes=$*4,D.create({key:ie,iv:ne,salt:V})}},B=s.PasswordBasedCipher=P.extend({cfg:P.cfg.extend({kdf:U}),encrypt:function(A,$,W,V){V=this.cfg.extend(V);var Q=V.kdf.execute(W,A.keySize,A.ivSize,V.salt,V.hasher);V.iv=Q.iv;var ie=P.encrypt.call(this,A,$,Q.key,V);return ie.mixIn(Q),ie},decrypt:function(A,$,W,V){V=this.cfg.extend(V),$=this._parse($,V.format);var Q=V.kdf.execute(W,A.keySize,A.ivSize,$.salt,V.hasher);V.iv=Q.iv;var ie=P.decrypt.call(this,A,$,Q.key,V);return ie}})})()})})(Rx)),Rx.exports}var Lx={exports:{}},pq=Lx.exports,TR;function mq(){return TR||(TR=1,(function(r,e){(function(t,n,i){r.exports=n(on(),ss())})(pq,function(t){return t.mode.CFB=(function(){var n=t.lib.BlockCipherMode.extend();n.Encryptor=n.extend({processBlock:function(s,a){var o=this._cipher,l=o.blockSize;i.call(this,s,a,l,o),this._prevBlock=s.slice(a,a+l)}}),n.Decryptor=n.extend({processBlock:function(s,a){var o=this._cipher,l=o.blockSize,u=s.slice(a,a+l);i.call(this,s,a,l,o),this._prevBlock=u}});function i(s,a,o,l){var u,c=this._iv;c?(u=c.slice(0),this._iv=void 0):u=this._prevBlock,l.encryptBlock(u,0);for(var h=0;h<o;h++)s[a+h]^=u[h]}return n})(),t.mode.CFB})})(Lx)),Lx.exports}var Ox={exports:{}},gq=Ox.exports,CR;function vq(){return CR||(CR=1,(function(r,e){(function(t,n,i){r.exports=n(on(),ss())})(gq,function(t){return t.mode.CTR=(function(){var n=t.lib.BlockCipherMode.extend(),i=n.Encryptor=n.extend({processBlock:function(s,a){var o=this._cipher,l=o.blockSize,u=this._iv,c=this._counter;u&&(c=this._counter=u.slice(0),this._iv=void 0);var h=c.slice(0);o.encryptBlock(h,0),c[l-1]=c[l-1]+1|0;for(var f=0;f<l;f++)s[a+f]^=h[f]}});return n.Decryptor=i,n})(),t.mode.CTR})})(Ox)),Ox.exports}var Mx={exports:{}},yq=Mx.exports,wR;function xq(){return wR||(wR=1,(function(r,e){(function(t,n,i){r.exports=n(on(),ss())})(yq,function(t){/** @preserve
 * Counter block mode compatible with  Dr Brian Gladman fileenc.c
 * derived from CryptoJS.mode.CTR
 * Jan Hruby jhruby.web@gmail.com
 */return t.mode.CTRGladman=(function(){var n=t.lib.BlockCipherMode.extend();function i(o){if((o>>24&255)===255){var l=o>>16&255,u=o>>8&255,c=o&255;l===255?(l=0,u===255?(u=0,c===255?c=0:++c):++u):++l,o=0,o+=l<<16,o+=u<<8,o+=c}else o+=1<<24;return o}function s(o){return(o[0]=i(o[0]))===0&&(o[1]=i(o[1])),o}var a=n.Encryptor=n.extend({processBlock:function(o,l){var u=this._cipher,c=u.blockSize,h=this._iv,f=this._counter;h&&(f=this._counter=h.slice(0),this._iv=void 0),s(f);var g=f.slice(0);u.encryptBlock(g,0);for(var v=0;v<c;v++)o[l+v]^=g[v]}});return n.Decryptor=a,n})(),t.mode.CTRGladman})})(Mx)),Mx.exports}var Fx={exports:{}},_q=Fx.exports,ER;function bq(){return ER||(ER=1,(function(r,e){(function(t,n,i){r.exports=n(on(),ss())})(_q,function(t){return t.mode.OFB=(function(){var n=t.lib.BlockCipherMode.extend(),i=n.Encryptor=n.extend({processBlock:function(s,a){var o=this._cipher,l=o.blockSize,u=this._iv,c=this._keystream;u&&(c=this._keystream=u.slice(0),this._iv=void 0),o.encryptBlock(c,0);for(var h=0;h<l;h++)s[a+h]^=c[h]}});return n.Decryptor=i,n})(),t.mode.OFB})})(Fx)),Fx.exports}var Bx={exports:{}},Sq=Bx.exports,kR;function Tq(){return kR||(kR=1,(function(r,e){(function(t,n,i){r.exports=n(on(),ss())})(Sq,function(t){return t.mode.ECB=(function(){var n=t.lib.BlockCipherMode.extend();return n.Encryptor=n.extend({processBlock:function(i,s){this._cipher.encryptBlock(i,s)}}),n.Decryptor=n.extend({processBlock:function(i,s){this._cipher.decryptBlock(i,s)}}),n})(),t.mode.ECB})})(Bx)),Bx.exports}var Nx={exports:{}},Cq=Nx.exports,AR;function wq(){return AR||(AR=1,(function(r,e){(function(t,n,i){r.exports=n(on(),ss())})(Cq,function(t){return t.pad.AnsiX923={pad:function(n,i){var s=n.sigBytes,a=i*4,o=a-s%a,l=s+o-1;n.clamp(),n.words[l>>>2]|=o<<24-l%4*8,n.sigBytes+=o},unpad:function(n){var i=n.words[n.sigBytes-1>>>2]&255;n.sigBytes-=i}},t.pad.Ansix923})})(Nx)),Nx.exports}var Ux={exports:{}},Eq=Ux.exports,DR;function kq(){return DR||(DR=1,(function(r,e){(function(t,n,i){r.exports=n(on(),ss())})(Eq,function(t){return t.pad.Iso10126={pad:function(n,i){var s=i*4,a=s-n.sigBytes%s;n.concat(t.lib.WordArray.random(a-1)).concat(t.lib.WordArray.create([a<<24],1))},unpad:function(n){var i=n.words[n.sigBytes-1>>>2]&255;n.sigBytes-=i}},t.pad.Iso10126})})(Ux)),Ux.exports}var $x={exports:{}},Aq=$x.exports,IR;function Dq(){return IR||(IR=1,(function(r,e){(function(t,n,i){r.exports=n(on(),ss())})(Aq,function(t){return t.pad.Iso97971={pad:function(n,i){n.concat(t.lib.WordArray.create([2147483648],1)),t.pad.ZeroPadding.pad(n,i)},unpad:function(n){t.pad.ZeroPadding.unpad(n),n.sigBytes--}},t.pad.Iso97971})})($x)),$x.exports}var jx={exports:{}},Iq=jx.exports,PR;function Pq(){return PR||(PR=1,(function(r,e){(function(t,n,i){r.exports=n(on(),ss())})(Iq,function(t){return t.pad.ZeroPadding={pad:function(n,i){var s=i*4;n.clamp(),n.sigBytes+=s-(n.sigBytes%s||s)},unpad:function(n){for(var i=n.words,s=n.sigBytes-1,s=n.sigBytes-1;s>=0;s--)if(i[s>>>2]>>>24-s%4*8&255){n.sigBytes=s+1;break}}},t.pad.ZeroPadding})})(jx)),jx.exports}var zx={exports:{}},Rq=zx.exports,RR;function Lq(){return RR||(RR=1,(function(r,e){(function(t,n,i){r.exports=n(on(),ss())})(Rq,function(t){return t.pad.NoPadding={pad:function(){},unpad:function(){}},t.pad.NoPadding})})(zx)),zx.exports}var Hx={exports:{}},Oq=Hx.exports,LR;function Mq(){return LR||(LR=1,(function(r,e){(function(t,n,i){r.exports=n(on(),ss())})(Oq,function(t){return(function(n){var i=t,s=i.lib,a=s.CipherParams,o=i.enc,l=o.Hex,u=i.format;u.Hex={stringify:function(c){return c.ciphertext.toString(l)},parse:function(c){var h=l.parse(c);return a.create({ciphertext:h})}}})(),t.format.Hex})})(Hx)),Hx.exports}var Vx={exports:{}},Fq=Vx.exports,OR;function Bq(){return OR||(OR=1,(function(r,e){(function(t,n,i){r.exports=n(on(),vf(),yf(),Qd(),ss())})(Fq,function(t){return(function(){var n=t,i=n.lib,s=i.BlockCipher,a=n.algo,o=[],l=[],u=[],c=[],h=[],f=[],g=[],v=[],y=[],_=[];(function(){for(var D=[],I=0;I<256;I++)I<128?D[I]=I<<1:D[I]=I<<1^283;for(var k=0,P=0,I=0;I<256;I++){var N=P^P<<1^P<<2^P<<3^P<<4;N=N>>>8^N&255^99,o[k]=N,l[N]=k;var U=D[k],B=D[U],A=D[B],$=D[N]*257^N*16843008;u[k]=$<<24|$>>>8,c[k]=$<<16|$>>>16,h[k]=$<<8|$>>>24,f[k]=$;var $=A*16843009^B*65537^U*257^k*16843008;g[N]=$<<24|$>>>8,v[N]=$<<16|$>>>16,y[N]=$<<8|$>>>24,_[N]=$,k?(k=U^D[D[D[A^U]]],P^=D[D[P]]):k=P=1}})();var C=[0,1,2,4,8,16,32,64,128,27,54],E=a.AES=s.extend({_doReset:function(){var D;if(!(this._nRounds&&this._keyPriorReset===this._key)){for(var I=this._keyPriorReset=this._key,k=I.words,P=I.sigBytes/4,N=this._nRounds=P+6,U=(N+1)*4,B=this._keySchedule=[],A=0;A<U;A++)A<P?B[A]=k[A]:(D=B[A-1],A%P?P>6&&A%P==4&&(D=o[D>>>24]<<24|o[D>>>16&255]<<16|o[D>>>8&255]<<8|o[D&255]):(D=D<<8|D>>>24,D=o[D>>>24]<<24|o[D>>>16&255]<<16|o[D>>>8&255]<<8|o[D&255],D^=C[A/P|0]<<24),B[A]=B[A-P]^D);for(var $=this._invKeySchedule=[],W=0;W<U;W++){var A=U-W;if(W%4)var D=B[A];else var D=B[A-4];W<4||A<=4?$[W]=D:$[W]=g[o[D>>>24]]^v[o[D>>>16&255]]^y[o[D>>>8&255]]^_[o[D&255]]}}},encryptBlock:function(D,I){this._doCryptBlock(D,I,this._keySchedule,u,c,h,f,o)},decryptBlock:function(D,I){var k=D[I+1];D[I+1]=D[I+3],D[I+3]=k,this._doCryptBlock(D,I,this._invKeySchedule,g,v,y,_,l);var k=D[I+1];D[I+1]=D[I+3],D[I+3]=k},_doCryptBlock:function(D,I,k,P,N,U,B,A){for(var $=this._nRounds,W=D[I]^k[0],V=D[I+1]^k[1],Q=D[I+2]^k[2],ie=D[I+3]^k[3],ne=4,ue=1;ue<$;ue++){var se=P[W>>>24]^N[V>>>16&255]^U[Q>>>8&255]^B[ie&255]^k[ne++],ae=P[V>>>24]^N[Q>>>16&255]^U[ie>>>8&255]^B[W&255]^k[ne++],ce=P[Q>>>24]^N[ie>>>16&255]^U[W>>>8&255]^B[V&255]^k[ne++],ee=P[ie>>>24]^N[W>>>16&255]^U[V>>>8&255]^B[Q&255]^k[ne++];W=se,V=ae,Q=ce,ie=ee}var se=(A[W>>>24]<<24|A[V>>>16&255]<<16|A[Q>>>8&255]<<8|A[ie&255])^k[ne++],ae=(A[V>>>24]<<24|A[Q>>>16&255]<<16|A[ie>>>8&255]<<8|A[W&255])^k[ne++],ce=(A[Q>>>24]<<24|A[ie>>>16&255]<<16|A[W>>>8&255]<<8|A[V&255])^k[ne++],ee=(A[ie>>>24]<<24|A[W>>>16&255]<<16|A[V>>>8&255]<<8|A[Q&255])^k[ne++];D[I]=se,D[I+1]=ae,D[I+2]=ce,D[I+3]=ee},keySize:256/32});n.AES=s._createHelper(E)})(),t.AES})})(Vx)),Vx.exports}var Wx={exports:{}},Nq=Wx.exports,MR;function Uq(){return MR||(MR=1,(function(r,e){(function(t,n,i){r.exports=n(on(),vf(),yf(),Qd(),ss())})(Nq,function(t){return(function(){var n=t,i=n.lib,s=i.WordArray,a=i.BlockCipher,o=n.algo,l=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],u=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],c=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],h=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],f=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],g=o.DES=a.extend({_doReset:function(){for(var C=this._key,E=C.words,D=[],I=0;I<56;I++){var k=l[I]-1;D[I]=E[k>>>5]>>>31-k%32&1}for(var P=this._subKeys=[],N=0;N<16;N++){for(var U=P[N]=[],B=c[N],I=0;I<24;I++)U[I/6|0]|=D[(u[I]-1+B)%28]<<31-I%6,U[4+(I/6|0)]|=D[28+(u[I+24]-1+B)%28]<<31-I%6;U[0]=U[0]<<1|U[0]>>>31;for(var I=1;I<7;I++)U[I]=U[I]>>>(I-1)*4+3;U[7]=U[7]<<5|U[7]>>>27}for(var A=this._invSubKeys=[],I=0;I<16;I++)A[I]=P[15-I]},encryptBlock:function(C,E){this._doCryptBlock(C,E,this._subKeys)},decryptBlock:function(C,E){this._doCryptBlock(C,E,this._invSubKeys)},_doCryptBlock:function(C,E,D){this._lBlock=C[E],this._rBlock=C[E+1],v.call(this,4,252645135),v.call(this,16,65535),y.call(this,2,858993459),y.call(this,8,16711935),v.call(this,1,1431655765);for(var I=0;I<16;I++){for(var k=D[I],P=this._lBlock,N=this._rBlock,U=0,B=0;B<8;B++)U|=h[B][((N^k[B])&f[B])>>>0];this._lBlock=N,this._rBlock=P^U}var A=this._lBlock;this._lBlock=this._rBlock,this._rBlock=A,v.call(this,1,1431655765),y.call(this,8,16711935),y.call(this,2,858993459),v.call(this,16,65535),v.call(this,4,252645135),C[E]=this._lBlock,C[E+1]=this._rBlock},keySize:64/32,ivSize:64/32,blockSize:64/32});function v(C,E){var D=(this._lBlock>>>C^this._rBlock)&E;this._rBlock^=D,this._lBlock^=D<<C}function y(C,E){var D=(this._rBlock>>>C^this._lBlock)&E;this._lBlock^=D,this._rBlock^=D<<C}n.DES=a._createHelper(g);var _=o.TripleDES=a.extend({_doReset:function(){var C=this._key,E=C.words;if(E.length!==2&&E.length!==4&&E.length<6)throw new Error("Invalid key length - 3DES requires the key length to be 64, 128, 192 or >192.");var D=E.slice(0,2),I=E.length<4?E.slice(0,2):E.slice(2,4),k=E.length<6?E.slice(0,2):E.slice(4,6);this._des1=g.createEncryptor(s.create(D)),this._des2=g.createEncryptor(s.create(I)),this._des3=g.createEncryptor(s.create(k))},encryptBlock:function(C,E){this._des1.encryptBlock(C,E),this._des2.decryptBlock(C,E),this._des3.encryptBlock(C,E)},decryptBlock:function(C,E){this._des3.decryptBlock(C,E),this._des2.encryptBlock(C,E),this._des1.decryptBlock(C,E)},keySize:192/32,ivSize:64/32,blockSize:64/32});n.TripleDES=a._createHelper(_)})(),t.TripleDES})})(Wx)),Wx.exports}var qx={exports:{}},$q=qx.exports,FR;function jq(){return FR||(FR=1,(function(r,e){(function(t,n,i){r.exports=n(on(),vf(),yf(),Qd(),ss())})($q,function(t){return(function(){var n=t,i=n.lib,s=i.StreamCipher,a=n.algo,o=a.RC4=s.extend({_doReset:function(){for(var c=this._key,h=c.words,f=c.sigBytes,g=this._S=[],v=0;v<256;v++)g[v]=v;for(var v=0,y=0;v<256;v++){var _=v%f,C=h[_>>>2]>>>24-_%4*8&255;y=(y+g[v]+C)%256;var E=g[v];g[v]=g[y],g[y]=E}this._i=this._j=0},_doProcessBlock:function(c,h){c[h]^=l.call(this)},keySize:256/32,ivSize:0});function l(){for(var c=this._S,h=this._i,f=this._j,g=0,v=0;v<4;v++){h=(h+1)%256,f=(f+c[h])%256;var y=c[h];c[h]=c[f],c[f]=y,g|=c[(c[h]+c[f])%256]<<24-v*8}return this._i=h,this._j=f,g}n.RC4=s._createHelper(o);var u=a.RC4Drop=o.extend({cfg:o.cfg.extend({drop:192}),_doReset:function(){o._doReset.call(this);for(var c=this.cfg.drop;c>0;c--)l.call(this)}});n.RC4Drop=s._createHelper(u)})(),t.RC4})})(qx)),qx.exports}var Gx={exports:{}},zq=Gx.exports,BR;function Hq(){return BR||(BR=1,(function(r,e){(function(t,n,i){r.exports=n(on(),vf(),yf(),Qd(),ss())})(zq,function(t){return(function(){var n=t,i=n.lib,s=i.StreamCipher,a=n.algo,o=[],l=[],u=[],c=a.Rabbit=s.extend({_doReset:function(){for(var f=this._key.words,g=this.cfg.iv,v=0;v<4;v++)f[v]=(f[v]<<8|f[v]>>>24)&16711935|(f[v]<<24|f[v]>>>8)&4278255360;var y=this._X=[f[0],f[3]<<16|f[2]>>>16,f[1],f[0]<<16|f[3]>>>16,f[2],f[1]<<16|f[0]>>>16,f[3],f[2]<<16|f[1]>>>16],_=this._C=[f[2]<<16|f[2]>>>16,f[0]&4294901760|f[1]&65535,f[3]<<16|f[3]>>>16,f[1]&4294901760|f[2]&65535,f[0]<<16|f[0]>>>16,f[2]&4294901760|f[3]&65535,f[1]<<16|f[1]>>>16,f[3]&4294901760|f[0]&65535];this._b=0;for(var v=0;v<4;v++)h.call(this);for(var v=0;v<8;v++)_[v]^=y[v+4&7];if(g){var C=g.words,E=C[0],D=C[1],I=(E<<8|E>>>24)&16711935|(E<<24|E>>>8)&4278255360,k=(D<<8|D>>>24)&16711935|(D<<24|D>>>8)&4278255360,P=I>>>16|k&4294901760,N=k<<16|I&65535;_[0]^=I,_[1]^=P,_[2]^=k,_[3]^=N,_[4]^=I,_[5]^=P,_[6]^=k,_[7]^=N;for(var v=0;v<4;v++)h.call(this)}},_doProcessBlock:function(f,g){var v=this._X;h.call(this),o[0]=v[0]^v[5]>>>16^v[3]<<16,o[1]=v[2]^v[7]>>>16^v[5]<<16,o[2]=v[4]^v[1]>>>16^v[7]<<16,o[3]=v[6]^v[3]>>>16^v[1]<<16;for(var y=0;y<4;y++)o[y]=(o[y]<<8|o[y]>>>24)&16711935|(o[y]<<24|o[y]>>>8)&4278255360,f[g+y]^=o[y]},blockSize:128/32,ivSize:64/32});function h(){for(var f=this._X,g=this._C,v=0;v<8;v++)l[v]=g[v];g[0]=g[0]+1295307597+this._b|0,g[1]=g[1]+3545052371+(g[0]>>>0<l[0]>>>0?1:0)|0,g[2]=g[2]+886263092+(g[1]>>>0<l[1]>>>0?1:0)|0,g[3]=g[3]+1295307597+(g[2]>>>0<l[2]>>>0?1:0)|0,g[4]=g[4]+3545052371+(g[3]>>>0<l[3]>>>0?1:0)|0,g[5]=g[5]+886263092+(g[4]>>>0<l[4]>>>0?1:0)|0,g[6]=g[6]+1295307597+(g[5]>>>0<l[5]>>>0?1:0)|0,g[7]=g[7]+3545052371+(g[6]>>>0<l[6]>>>0?1:0)|0,this._b=g[7]>>>0<l[7]>>>0?1:0;for(var v=0;v<8;v++){var y=f[v]+g[v],_=y&65535,C=y>>>16,E=((_*_>>>17)+_*C>>>15)+C*C,D=((y&4294901760)*y|0)+((y&65535)*y|0);u[v]=E^D}f[0]=u[0]+(u[7]<<16|u[7]>>>16)+(u[6]<<16|u[6]>>>16)|0,f[1]=u[1]+(u[0]<<8|u[0]>>>24)+u[7]|0,f[2]=u[2]+(u[1]<<16|u[1]>>>16)+(u[0]<<16|u[0]>>>16)|0,f[3]=u[3]+(u[2]<<8|u[2]>>>24)+u[1]|0,f[4]=u[4]+(u[3]<<16|u[3]>>>16)+(u[2]<<16|u[2]>>>16)|0,f[5]=u[5]+(u[4]<<8|u[4]>>>24)+u[3]|0,f[6]=u[6]+(u[5]<<16|u[5]>>>16)+(u[4]<<16|u[4]>>>16)|0,f[7]=u[7]+(u[6]<<8|u[6]>>>24)+u[5]|0}n.Rabbit=s._createHelper(c)})(),t.Rabbit})})(Gx)),Gx.exports}var Kx={exports:{}},Vq=Kx.exports,NR;function Wq(){return NR||(NR=1,(function(r,e){(function(t,n,i){r.exports=n(on(),vf(),yf(),Qd(),ss())})(Vq,function(t){return(function(){var n=t,i=n.lib,s=i.StreamCipher,a=n.algo,o=[],l=[],u=[],c=a.RabbitLegacy=s.extend({_doReset:function(){var f=this._key.words,g=this.cfg.iv,v=this._X=[f[0],f[3]<<16|f[2]>>>16,f[1],f[0]<<16|f[3]>>>16,f[2],f[1]<<16|f[0]>>>16,f[3],f[2]<<16|f[1]>>>16],y=this._C=[f[2]<<16|f[2]>>>16,f[0]&4294901760|f[1]&65535,f[3]<<16|f[3]>>>16,f[1]&4294901760|f[2]&65535,f[0]<<16|f[0]>>>16,f[2]&4294901760|f[3]&65535,f[1]<<16|f[1]>>>16,f[3]&4294901760|f[0]&65535];this._b=0;for(var _=0;_<4;_++)h.call(this);for(var _=0;_<8;_++)y[_]^=v[_+4&7];if(g){var C=g.words,E=C[0],D=C[1],I=(E<<8|E>>>24)&16711935|(E<<24|E>>>8)&4278255360,k=(D<<8|D>>>24)&16711935|(D<<24|D>>>8)&4278255360,P=I>>>16|k&4294901760,N=k<<16|I&65535;y[0]^=I,y[1]^=P,y[2]^=k,y[3]^=N,y[4]^=I,y[5]^=P,y[6]^=k,y[7]^=N;for(var _=0;_<4;_++)h.call(this)}},_doProcessBlock:function(f,g){var v=this._X;h.call(this),o[0]=v[0]^v[5]>>>16^v[3]<<16,o[1]=v[2]^v[7]>>>16^v[5]<<16,o[2]=v[4]^v[1]>>>16^v[7]<<16,o[3]=v[6]^v[3]>>>16^v[1]<<16;for(var y=0;y<4;y++)o[y]=(o[y]<<8|o[y]>>>24)&16711935|(o[y]<<24|o[y]>>>8)&4278255360,f[g+y]^=o[y]},blockSize:128/32,ivSize:64/32});function h(){for(var f=this._X,g=this._C,v=0;v<8;v++)l[v]=g[v];g[0]=g[0]+1295307597+this._b|0,g[1]=g[1]+3545052371+(g[0]>>>0<l[0]>>>0?1:0)|0,g[2]=g[2]+886263092+(g[1]>>>0<l[1]>>>0?1:0)|0,g[3]=g[3]+1295307597+(g[2]>>>0<l[2]>>>0?1:0)|0,g[4]=g[4]+3545052371+(g[3]>>>0<l[3]>>>0?1:0)|0,g[5]=g[5]+886263092+(g[4]>>>0<l[4]>>>0?1:0)|0,g[6]=g[6]+1295307597+(g[5]>>>0<l[5]>>>0?1:0)|0,g[7]=g[7]+3545052371+(g[6]>>>0<l[6]>>>0?1:0)|0,this._b=g[7]>>>0<l[7]>>>0?1:0;for(var v=0;v<8;v++){var y=f[v]+g[v],_=y&65535,C=y>>>16,E=((_*_>>>17)+_*C>>>15)+C*C,D=((y&4294901760)*y|0)+((y&65535)*y|0);u[v]=E^D}f[0]=u[0]+(u[7]<<16|u[7]>>>16)+(u[6]<<16|u[6]>>>16)|0,f[1]=u[1]+(u[0]<<8|u[0]>>>24)+u[7]|0,f[2]=u[2]+(u[1]<<16|u[1]>>>16)+(u[0]<<16|u[0]>>>16)|0,f[3]=u[3]+(u[2]<<8|u[2]>>>24)+u[1]|0,f[4]=u[4]+(u[3]<<16|u[3]>>>16)+(u[2]<<16|u[2]>>>16)|0,f[5]=u[5]+(u[4]<<8|u[4]>>>24)+u[3]|0,f[6]=u[6]+(u[5]<<16|u[5]>>>16)+(u[4]<<16|u[4]>>>16)|0,f[7]=u[7]+(u[6]<<8|u[6]>>>24)+u[5]|0}n.RabbitLegacy=s._createHelper(c)})(),t.RabbitLegacy})})(Kx)),Kx.exports}var Xx={exports:{}},qq=Xx.exports,UR;function Gq(){return UR||(UR=1,(function(r,e){(function(t,n,i){r.exports=n(on(),vf(),yf(),Qd(),ss())})(qq,function(t){return(function(){var n=t,i=n.lib,s=i.BlockCipher,a=n.algo;const o=16,l=[608135816,2242054355,320440878,57701188,2752067618,698298832,137296536,3964562569,1160258022,953160567,3193202383,887688300,3232508343,3380367581,1065670069,3041331479,2450970073,2306472731],u=[[3509652390,2564797868,805139163,3491422135,3101798381,1780907670,3128725573,4046225305,614570311,3012652279,134345442,2240740374,1667834072,1901547113,2757295779,4103290238,227898511,1921955416,1904987480,2182433518,2069144605,3260701109,2620446009,720527379,3318853667,677414384,3393288472,3101374703,2390351024,1614419982,1822297739,2954791486,3608508353,3174124327,2024746970,1432378464,3864339955,2857741204,1464375394,1676153920,1439316330,715854006,3033291828,289532110,2706671279,2087905683,3018724369,1668267050,732546397,1947742710,3462151702,2609353502,2950085171,1814351708,2050118529,680887927,999245976,1800124847,3300911131,1713906067,1641548236,4213287313,1216130144,1575780402,4018429277,3917837745,3693486850,3949271944,596196993,3549867205,258830323,2213823033,772490370,2760122372,1774776394,2652871518,566650946,4142492826,1728879713,2882767088,1783734482,3629395816,2517608232,2874225571,1861159788,326777828,3124490320,2130389656,2716951837,967770486,1724537150,2185432712,2364442137,1164943284,2105845187,998989502,3765401048,2244026483,1075463327,1455516326,1322494562,910128902,469688178,1117454909,936433444,3490320968,3675253459,1240580251,122909385,2157517691,634681816,4142456567,3825094682,3061402683,2540495037,79693498,3249098678,1084186820,1583128258,426386531,1761308591,1047286709,322548459,995290223,1845252383,2603652396,3431023940,2942221577,3202600964,3727903485,1712269319,422464435,3234572375,1170764815,3523960633,3117677531,1434042557,442511882,3600875718,1076654713,1738483198,4213154764,2393238008,3677496056,1014306527,4251020053,793779912,2902807211,842905082,4246964064,1395751752,1040244610,2656851899,3396308128,445077038,3742853595,3577915638,679411651,2892444358,2354009459,1767581616,3150600392,3791627101,3102740896,284835224,4246832056,1258075500,768725851,2589189241,3069724005,3532540348,1274779536,3789419226,2764799539,1660621633,3471099624,4011903706,913787905,3497959166,737222580,2514213453,2928710040,3937242737,1804850592,3499020752,2949064160,2386320175,2390070455,2415321851,4061277028,2290661394,2416832540,1336762016,1754252060,3520065937,3014181293,791618072,3188594551,3933548030,2332172193,3852520463,3043980520,413987798,3465142937,3030929376,4245938359,2093235073,3534596313,375366246,2157278981,2479649556,555357303,3870105701,2008414854,3344188149,4221384143,3956125452,2067696032,3594591187,2921233993,2428461,544322398,577241275,1471733935,610547355,4027169054,1432588573,1507829418,2025931657,3646575487,545086370,48609733,2200306550,1653985193,298326376,1316178497,3007786442,2064951626,458293330,2589141269,3591329599,3164325604,727753846,2179363840,146436021,1461446943,4069977195,705550613,3059967265,3887724982,4281599278,3313849956,1404054877,2845806497,146425753,1854211946],[1266315497,3048417604,3681880366,3289982499,290971e4,1235738493,2632868024,2414719590,3970600049,1771706367,1449415276,3266420449,422970021,1963543593,2690192192,3826793022,1062508698,1531092325,1804592342,2583117782,2714934279,4024971509,1294809318,4028980673,1289560198,2221992742,1669523910,35572830,157838143,1052438473,1016535060,1802137761,1753167236,1386275462,3080475397,2857371447,1040679964,2145300060,2390574316,1461121720,2956646967,4031777805,4028374788,33600511,2920084762,1018524850,629373528,3691585981,3515945977,2091462646,2486323059,586499841,988145025,935516892,3367335476,2599673255,2839830854,265290510,3972581182,2759138881,3795373465,1005194799,847297441,406762289,1314163512,1332590856,1866599683,4127851711,750260880,613907577,1450815602,3165620655,3734664991,3650291728,3012275730,3704569646,1427272223,778793252,1343938022,2676280711,2052605720,1946737175,3164576444,3914038668,3967478842,3682934266,1661551462,3294938066,4011595847,840292616,3712170807,616741398,312560963,711312465,1351876610,322626781,1910503582,271666773,2175563734,1594956187,70604529,3617834859,1007753275,1495573769,4069517037,2549218298,2663038764,504708206,2263041392,3941167025,2249088522,1514023603,1998579484,1312622330,694541497,2582060303,2151582166,1382467621,776784248,2618340202,3323268794,2497899128,2784771155,503983604,4076293799,907881277,423175695,432175456,1378068232,4145222326,3954048622,3938656102,3820766613,2793130115,2977904593,26017576,3274890735,3194772133,1700274565,1756076034,4006520079,3677328699,720338349,1533947780,354530856,688349552,3973924725,1637815568,332179504,3949051286,53804574,2852348879,3044236432,1282449977,3583942155,3416972820,4006381244,1617046695,2628476075,3002303598,1686838959,431878346,2686675385,1700445008,1080580658,1009431731,832498133,3223435511,2605976345,2271191193,2516031870,1648197032,4164389018,2548247927,300782431,375919233,238389289,3353747414,2531188641,2019080857,1475708069,455242339,2609103871,448939670,3451063019,1395535956,2413381860,1841049896,1491858159,885456874,4264095073,4001119347,1565136089,3898914787,1108368660,540939232,1173283510,2745871338,3681308437,4207628240,3343053890,4016749493,1699691293,1103962373,3625875870,2256883143,3830138730,1031889488,3479347698,1535977030,4236805024,3251091107,2132092099,1774941330,1199868427,1452454533,157007616,2904115357,342012276,595725824,1480756522,206960106,497939518,591360097,863170706,2375253569,3596610801,1814182875,2094937945,3421402208,1082520231,3463918190,2785509508,435703966,3908032597,1641649973,2842273706,3305899714,1510255612,2148256476,2655287854,3276092548,4258621189,236887753,3681803219,274041037,1734335097,3815195456,3317970021,1899903192,1026095262,4050517792,356393447,2410691914,3873677099,3682840055],[3913112168,2491498743,4132185628,2489919796,1091903735,1979897079,3170134830,3567386728,3557303409,857797738,1136121015,1342202287,507115054,2535736646,337727348,3213592640,1301675037,2528481711,1895095763,1721773893,3216771564,62756741,2142006736,835421444,2531993523,1442658625,3659876326,2882144922,676362277,1392781812,170690266,3921047035,1759253602,3611846912,1745797284,664899054,1329594018,3901205900,3045908486,2062866102,2865634940,3543621612,3464012697,1080764994,553557557,3656615353,3996768171,991055499,499776247,1265440854,648242737,3940784050,980351604,3713745714,1749149687,3396870395,4211799374,3640570775,1161844396,3125318951,1431517754,545492359,4268468663,3499529547,1437099964,2702547544,3433638243,2581715763,2787789398,1060185593,1593081372,2418618748,4260947970,69676912,2159744348,86519011,2512459080,3838209314,1220612927,3339683548,133810670,1090789135,1078426020,1569222167,845107691,3583754449,4072456591,1091646820,628848692,1613405280,3757631651,526609435,236106946,48312990,2942717905,3402727701,1797494240,859738849,992217954,4005476642,2243076622,3870952857,3732016268,765654824,3490871365,2511836413,1685915746,3888969200,1414112111,2273134842,3281911079,4080962846,172450625,2569994100,980381355,4109958455,2819808352,2716589560,2568741196,3681446669,3329971472,1835478071,660984891,3704678404,4045999559,3422617507,3040415634,1762651403,1719377915,3470491036,2693910283,3642056355,3138596744,1364962596,2073328063,1983633131,926494387,3423689081,2150032023,4096667949,1749200295,3328846651,309677260,2016342300,1779581495,3079819751,111262694,1274766160,443224088,298511866,1025883608,3806446537,1145181785,168956806,3641502830,3584813610,1689216846,3666258015,3200248200,1692713982,2646376535,4042768518,1618508792,1610833997,3523052358,4130873264,2001055236,3610705100,2202168115,4028541809,2961195399,1006657119,2006996926,3186142756,1430667929,3210227297,1314452623,4074634658,4101304120,2273951170,1399257539,3367210612,3027628629,1190975929,2062231137,2333990788,2221543033,2438960610,1181637006,548689776,2362791313,3372408396,3104550113,3145860560,296247880,1970579870,3078560182,3769228297,1714227617,3291629107,3898220290,166772364,1251581989,493813264,448347421,195405023,2709975567,677966185,3703036547,1463355134,2715995803,1338867538,1343315457,2802222074,2684532164,233230375,2599980071,2000651841,3277868038,1638401717,4028070440,3237316320,6314154,819756386,300326615,590932579,1405279636,3267499572,3150704214,2428286686,3959192993,3461946742,1862657033,1266418056,963775037,2089974820,2263052895,1917689273,448879540,3550394620,3981727096,150775221,3627908307,1303187396,508620638,2975983352,2726630617,1817252668,1876281319,1457606340,908771278,3720792119,3617206836,2455994898,1729034894,1080033504],[976866871,3556439503,2881648439,1522871579,1555064734,1336096578,3548522304,2579274686,3574697629,3205460757,3593280638,3338716283,3079412587,564236357,2993598910,1781952180,1464380207,3163844217,3332601554,1699332808,1393555694,1183702653,3581086237,1288719814,691649499,2847557200,2895455976,3193889540,2717570544,1781354906,1676643554,2592534050,3230253752,1126444790,2770207658,2633158820,2210423226,2615765581,2414155088,3127139286,673620729,2805611233,1269405062,4015350505,3341807571,4149409754,1057255273,2012875353,2162469141,2276492801,2601117357,993977747,3918593370,2654263191,753973209,36408145,2530585658,25011837,3520020182,2088578344,530523599,2918365339,1524020338,1518925132,3760827505,3759777254,1202760957,3985898139,3906192525,674977740,4174734889,2031300136,2019492241,3983892565,4153806404,3822280332,352677332,2297720250,60907813,90501309,3286998549,1016092578,2535922412,2839152426,457141659,509813237,4120667899,652014361,1966332200,2975202805,55981186,2327461051,676427537,3255491064,2882294119,3433927263,1307055953,942726286,933058658,2468411793,3933900994,4215176142,1361170020,2001714738,2830558078,3274259782,1222529897,1679025792,2729314320,3714953764,1770335741,151462246,3013232138,1682292957,1483529935,471910574,1539241949,458788160,3436315007,1807016891,3718408830,978976581,1043663428,3165965781,1927990952,4200891579,2372276910,3208408903,3533431907,1412390302,2931980059,4132332400,1947078029,3881505623,4168226417,2941484381,1077988104,1320477388,886195818,18198404,3786409e3,2509781533,112762804,3463356488,1866414978,891333506,18488651,661792760,1628790961,3885187036,3141171499,876946877,2693282273,1372485963,791857591,2686433993,3759982718,3167212022,3472953795,2716379847,445679433,3561995674,3504004811,3574258232,54117162,3331405415,2381918588,3769707343,4154350007,1140177722,4074052095,668550556,3214352940,367459370,261225585,2610173221,4209349473,3468074219,3265815641,314222801,3066103646,3808782860,282218597,3406013506,3773591054,379116347,1285071038,846784868,2669647154,3771962079,3550491691,2305946142,453669953,1268987020,3317592352,3279303384,3744833421,2610507566,3859509063,266596637,3847019092,517658769,3462560207,3443424879,370717030,4247526661,2224018117,4143653529,4112773975,2788324899,2477274417,1456262402,2901442914,1517677493,1846949527,2295493580,3734397586,2176403920,1280348187,1908823572,3871786941,846861322,1172426758,3287448474,3383383037,1655181056,3139813346,901632758,1897031941,2986607138,3066810236,3447102507,1393639104,373351379,950779232,625454576,3124240540,4148612726,2007998917,544563296,2244738638,2330496472,2058025392,1291430526,424198748,50039436,29584100,3605783033,2429876329,2791104160,1057563949,3255363231,3075367218,3463963227,1469046755,985887462]];var c={pbox:[],sbox:[]};function h(_,C){let E=C>>24&255,D=C>>16&255,I=C>>8&255,k=C&255,P=_.sbox[0][E]+_.sbox[1][D];return P=P^_.sbox[2][I],P=P+_.sbox[3][k],P}function f(_,C,E){let D=C,I=E,k;for(let P=0;P<o;++P)D=D^_.pbox[P],I=h(_,D)^I,k=D,D=I,I=k;return k=D,D=I,I=k,I=I^_.pbox[o],D=D^_.pbox[o+1],{left:D,right:I}}function g(_,C,E){let D=C,I=E,k;for(let P=o+1;P>1;--P)D=D^_.pbox[P],I=h(_,D)^I,k=D,D=I,I=k;return k=D,D=I,I=k,I=I^_.pbox[1],D=D^_.pbox[0],{left:D,right:I}}function v(_,C,E){for(let N=0;N<4;N++){_.sbox[N]=[];for(let U=0;U<256;U++)_.sbox[N][U]=u[N][U]}let D=0;for(let N=0;N<o+2;N++)_.pbox[N]=l[N]^C[D],D++,D>=E&&(D=0);let I=0,k=0,P=0;for(let N=0;N<o+2;N+=2)P=f(_,I,k),I=P.left,k=P.right,_.pbox[N]=I,_.pbox[N+1]=k;for(let N=0;N<4;N++)for(let U=0;U<256;U+=2)P=f(_,I,k),I=P.left,k=P.right,_.sbox[N][U]=I,_.sbox[N][U+1]=k;return!0}var y=a.Blowfish=s.extend({_doReset:function(){if(this._keyPriorReset!==this._key){var _=this._keyPriorReset=this._key,C=_.words,E=_.sigBytes/4;v(c,C,E)}},encryptBlock:function(_,C){var E=f(c,_[C],_[C+1]);_[C]=E.left,_[C+1]=E.right},decryptBlock:function(_,C){var E=g(c,_[C],_[C+1]);_[C]=E.left,_[C+1]=E.right},blockSize:64/32,keySize:128/32,ivSize:64/32});n.Blowfish=s._createHelper(y)})(),t.Blowfish})})(Xx)),Xx.exports}var Kq=px.exports,$R;function Xq(){return $R||($R=1,(function(r,e){(function(t,n,i){r.exports=n(on(),Qb(),WW(),GW(),vf(),YW(),yf(),t8(),BE(),tq(),r8(),iq(),aq(),lq(),NE(),dq(),Qd(),ss(),mq(),vq(),xq(),bq(),Tq(),wq(),kq(),Dq(),Pq(),Lq(),Mq(),Bq(),Uq(),jq(),Hq(),Wq(),Gq())})(Kq,function(t){return t})})(px)),px.exports}var Yq=Xq();const Qq=da(Yq),Jq="https://github.com/zhimin-dev/iptv-checker",Zq="4.2.0",UE={homepage_url:Jq,version:Zq},Ha=M.createContext(),eG="https://static.zmis.me/public/iptv-checker/init.json",tG=function({children:r}){const[t,n]=M.useState(""),[i,s]=M.useState([]),[a,o]=M.useState(""),[l,u]=M.useState([]),[c,h]=M.useState(!1),[f,g]=M.useState(0),[v,y]=M.useState(""),[_,C]=M.useState(!0),[E,D]=M.useState([]),[I,k]=M.useState(!1),[P,N]=M.useState(0),[U,B]=M.useState({version:"",sponsor:[]}),[A,$]=M.useState(""),[W,V]=M.useState(null),[Q,ie]=M.useState({groups:[""],videoRevolution:[]}),[ne,ue]=M.useState(null),[se,ae]=M.useState([]),[ce,ee]=M.useState([]),pe=[{name:"mac",value:"application/x-mpegURL"},{name:"windows",value:"video/mp2t"}],me=[{code:"zh",name:""},{code:"en",name:"English"}],[ye,Oe]=M.useState({checkSleepTime:300,httpRequestTimeout:8e3,customLink:[],concurrent:1,language:"zh",privateHost:"",playerSource:"application/x-mpegURL"}),Le=(...ke)=>{console.log(...ke)},st=ke=>{Ts.changeLanguage(ke)},ze=()=>{const ke=new Date,$e=ke.getFullYear(),Je=ke.getMonth()+1,tt=ke.getDate(),xt=ke.getHours();return`${$e}${Je}${tt}${xt}`},pt=()=>{Ar.get(eG+"?date="+ze()).then(ke=>{if(ke.status===200)try{B(ke.data)}catch($e){console.log($e)}})},Ye=()=>{},Pt=()=>{let ke=U.version;f===1&&(ke=U.app_version),Rt(ke,UE.version)>0?k(!0):k(!1)},Rt=(ke,$e)=>{const Je=ke.split(".").map(Number),tt=$e.split(".").map(Number),xt=Math.max(Je.length,tt.length);for(let kt=0;kt<xt;kt++){const Bt=Je[kt]||0,Tr=tt[kt]||0;if(Bt>Tr)return 1;if(Bt<Tr)return-1}return 0},Ve=()=>{Ot("check_ffmpeg").then(ke=>{ke&&(N(1),console.log("FFmpeg is installed"))}).catch(ke=>{console.log("invoke error",ke)})},Ne=(ke,$e)=>{document.getElementById("titlebar-minimize")?.addEventListener("click",()=>ke.minimize()),document.getElementById("titlebar-maximize")?.addEventListener("click",()=>{ke.isFullscreen().then(Je=>{console.log("isfull",Je),Je?ke.setSize(new LE(1024,800)).then(()=>{}):(ke.setTitleBarStyle("transparent"),ke.setFullscreen(!0),ke.center(),C(!1))})}),document.getElementById("titlebar-close")?.addEventListener("click",()=>ke.close())},Ie=()=>{const ke=w_();Ne(ke)},Ue=async(ke,$e)=>{let tt=await MW()+"/iptv-checker-file-"+new Date().getTime()+"."+$e,xt="";$e==="txt"?xt=yt(ke):xt=ct(ke);const kt=await BW({defaultPath:tt,filters:[{name:tt,extensions:[$e]}]});console.log("filePath---",kt),kt&&await FW(kt,xt)},et=async(ke,$e)=>{var Je=document.createElement("a");let tt="";$e==="txt"?tt=yt(ke):tt=ct(ke);var xt=new Blob([tt]),kt=window.URL.createObjectURL(xt);Je.href=kt,Je.download="iptv-checker-"+new Date().getTime()+"."+$e,Je.click()},ot=ke=>Qq.MD5(ke).toString();M.useEffect(()=>{Ve(),pt(),Br(),Ti(),Ot("now_mod",{}).then($e=>{g($e),Ie(),console.log("now mod",$e);let Je=NW();Je!==""&&(console.log("now os type",Je),y(Je))}).catch($e=>{console.log("invoke---",$e)});let ke=localStorage.getItem("settings")??"";if(ke!=="")try{let $e=JSON.parse(ke);st($e.language),Oe($e)}catch($e){console.log($e)}},[]);const dt=ke=>{h(ke)},it=async ke=>{let $e=ke.split(","),Je=[];for(let tt=0;tt<$e.length;tt++)if(lt($e[tt])&&$e[tt].includes(".m3u8")){let xt="channel "+tt,kt='#EXTINF:-1 tvg-id="" tvg-logo="" group-title="Undefined",'+xt+`
`+$e[tt],Bt='#EXTINF:-1 tvg-id="" tvg-logo="" group-title="Undefined",'+xt+`
`+$e[tt],Tr=an.buildM3uBaseObject(tt,$e[tt],"Undefined","","","","",xt,kt,Bt);Je.push(Tr)}return Je.length===0?[]:bt(Je)},bt=ke=>{let $e=[];for(let Je=0;Je<ke.length;Je++)$e.push(ke[Je].raw);return $e},lt=ke=>new RegExp("^(https?:\\/\\/)?((([a-z\\d]([a-z\\d-]*[a-z\\d])*)\\.)+[a-z]{2,}|((\\d{1,3}\\.){3}\\d{1,3}))(\\:\\d+)?(\\/[-a-z\\d%_.~+]*)*(\\?[;&a-z\\d%_.~+=-]*)?(\\#[-a-z\\d_]*)?$","i").test(ke),gr=async ke=>{let $e=ke.split(","),Je=[];for(let Bt=0;Bt<$e.length;Bt++)lt($e[Bt])&&$e[Bt].includes(".m3u")&&Je.push($e[Bt]);let tt=[];for(let Bt=0;Bt<Je.length;Bt++){let Tr=xe(Je[Bt]);tt.push(Ar.get(Tr,{timeout:ye.httpRequestTimeout}))}const xt=await Promise.allSettled(tt);let kt=[];return xt.forEach((Bt,Tr)=>{if(Bt.status==="fulfilled"){const Wr=Bt.value.data;try{let xn=an.parseOriginalBodyToList(Wr);for(let Er=0;Er<xn.length;Er++)kt.push(xn[Er])}catch(xn){console.log("err",xn)}}}),bt(kt)},hr=async ke=>{try{let $e=an.parseQuoteFormat(ke);return bt($e)}catch{return[]}},Rr=ke=>{try{return an.parseOriginalBodyToList(ke)}catch{return[]}},nr=async ke=>{let $e=[it,gr,hr],Je=[],tt=!1;for(const xt of $e)if(!tt){let kt=await xt(ke);kt.length>0&&(tt=!0,Je=kt)}return Je.length>0?`#EXTM3U
`+Je.join(`
`):ke},qt=ke=>{localStorage.setItem("settings",JSON.stringify(ke)),Oe(ke)},fr=ke=>{u(ke)},yr=()=>{o(""),ae([]),n("")},Lr=(ke,$e)=>ke.indexOf($e)!==-1,vt=ke=>{let $e=[];for(let tt=0;tt<se.length;tt++){let xt=!0;for(let kt=0;kt<ke.length;kt++)ke[kt]===se[tt].index&&(xt=!1);xt&&$e.push(se[tt])}ae(tt=>tt.filter(function(xt,kt){for(let Bt=0;Bt<ke.length;Bt++)if(ke[Bt]===xt.index)return!1;return!0})),console.log("detailList---",$e,se);let Je=Ut(A);Je!==null&&(Je.data=$e,console.log("updateOriginalData data---",Je),rn(Je))},Ut=ke=>{for(let $e=0;$e<ce.length;$e++)if(ce[$e].md5===ke)return ce[$e];return null},rn=ke=>{let $e=[];for(let Je=0;Je<ce.length;Je++){let tt=ce[Je];ce[Je].md5===A&&(tt=ke),$e.push(tt)}yn($e)},jt=(ke,$e)=>{for(let Je=0;Je<ke.length;Je++)if(ke[Je]===$e)return!0;return!1},br=(ke,$e,Je)=>{if(console.log("filterM3u",ke,$e,Je),ke.length===0&&$e.length===0&&Je.length===0)return;let tt=Te();console.log("temp",tt);let xt=[],kt=1;for(let Bt=0;Bt<tt.length;Bt++){let Tr=!0;if(Je.length>0&&tt[Bt].videoType!==""){Tr=!1;for(let Er=0;Er<Je.length;Er++)tt[Bt].videoType===Je[Er]&&(Tr=!0)}let Wr=!0;if(ke.length>0){Wr=!1;for(let Er=0;Er<ke.length;Er++)Lr(tt[Bt].sName,ke[Er].toLowerCase())&&(Wr=!0)}let xn=!0;if($e.length>0&&(xn=!1,jt($e,tt[Bt].groupTitle)&&(xn=!0)),xn&&Tr&&Wr){let Er=tt[Bt];Er.index=kt,xt.push(Er),kt++}}Le("setShowM3uBody---",xt),ae(xt)},Or=ke=>{let $e=an.parseOriginalBodyToList(ke),Je=[];Je.push(["","","",""]);for(let tt=0;tt<$e.length;tt++)Je.push([$e[tt].name,$e[tt].url,$e[tt].groupTitle,$e[tt].tvgLogo]);return Je},Hr=ke=>{yr(),n(ke);let $e=an.parseOriginalBodyToList(ke);ae($e)},ln=ke=>{let $e=!1;for(let Je=0;Je<Q.groups.length;Je++)Q.groups[Je]===ke&&($e=!0);if(!$e){let Je=wn(Q.groups);Je.push(ke),ie({...Q,groups:Je})}},Cn=ke=>{let $e=[],Je="",tt=1;for(let xt=0;xt<ke.length;xt++){Je+=ke[xt]+`
`;let kt=an.parseOriginalBodyToList(ke[xt]);for(let Bt=0;Bt<kt.length;Bt++)kt[Bt].index=tt,$e.push(kt[Bt]),tt++}yr(),ae($e),n(Je)},wn=ke=>JSON.parse(JSON.stringify(ke)),Fr=(ke,$e,Je,tt,xt,kt)=>{console.log("data",ke);for(let Bt=0;Bt<ke.length;Bt++)if(ke[Bt].index===$e){let Tr="";tt!==null&&(Tr=an.getVideoResolution(tt.width,tt.height));let Wr={...ke[Bt],status:Je,video:tt,audio:xt,videoType:Tr,delay:kt};ke[Bt]=Wr}return ke},oe=()=>{let ke=[];for(let $e=0;$e<se.length;$e+=1)se[$e].checked&&ke.push(se[$e]);s(ke)},fe=()=>{let ke=Te();o(ct(ke))},Te=()=>{let ke=null;for(let $e=0;$e<ce.length;$e++)ce[$e].md5===A&&(ke=ce[$e].data);return ke},je=ke=>{let $e=[...se];const Je=$e.findIndex(tt=>tt.index===ke);$e[Je].checked=!$e[Je].checked,ae($e)},mt=(ke,$e)=>{const tt=[...ke].findIndex(xt=>xt.index===$e);return ke[tt]},St=ke=>{ae(ke===1?$e=>$e.map((Je,tt)=>({...Je,checked:!0})):$e=>$e.map((Je,tt)=>({...Je,checked:!1})))},be=(ke,$e)=>{if(f===1)return ke;let Je=parseInt($e,10);return"/check/url-is-available?url="+ke+"&timeout="+(isNaN(Je)?"-1":Je)},xe=(ke,$e)=>{if(f===1)return ke;let Je=parseInt($e,10);return Le(ke,Je),"/fetch/m3u-body?url="+ke+"&timeout="+(isNaN(Je)?"-1":Je)},Ae=(ke,$e)=>{const Je=[];for(let tt=0;tt<ke.length;tt+=$e)Je.push(ke.slice(tt,tt+$e));return Je},Ke=async(ke,$e,Je)=>{let tt={},xt={},kt=Ae(ke,$e.concurrent);if(f===1){console.log("start check");for(let Bt=0;Bt<kt.length;Bt++){let Tr=[],Wr=[];for(let Er=0;Er<kt[Bt].length;Er++){let fi=kt[Bt][Er];if(mt(wn(ke),fi.index).status!==0){Le("do check status != 0");continue}Tr.push(kt[Bt][Er]),Wr.push(Ar.get(kt[Bt][Er].url,{timeout:$e.httpRequestTimeout}))}if(Wr.length===0)continue;(await Promise.allSettled(Wr)).forEach((Er,fi)=>{let zr=Tr[fi];if(Er.status==="fulfilled"){Er.value;let On=-1;tt[zr.url]={video:null,audio:null,videoType:null,status:1,delay:On},xt[zr.sName]===void 0||xt[zr.sName]===null?xt[zr.sName]={index:zr.index,delay:On}:xt[zr.sName].delay>=On&&(xt[zr.sName]={index:zr.index,delay:On}),ke=Fr(ke,zr.index,1,null,null,On),Je(200,zr.index)}else tt[zr.url]={status:2},ke=Fr(ke,zr.index,2,null,null,0),Je(500,zr.index)})}console.log("end check")}else{console.log("start server check");for(let Bt=0;Bt<kt.length;Bt++){console.log("----now",kt[Bt]);let Tr=[],Wr=[];for(let Er=0;Er<kt[Bt].length;Er++){let fi=kt[Bt][Er];if(mt(ke,fi.index).status!==0){Le("do check status != 0");continue}Tr.push(kt[Bt][Er]);let On=be(kt[Bt][Er].url,$e.httpRequestTimeout);Wr.push(Ar.get(On,{timeout:$e.httpRequestTimeout}))}if(Wr.length===0)continue;(await Promise.allSettled(Wr)).forEach((Er,fi)=>{let zr=Tr[fi];if(Er.status==="fulfilled"){const On=Er.value;console.log("resp",On);let $n=On.data.delay;tt[zr.url]={video:On.data.video,audio:On.data.audio,videoType:an.getVideoResolution(On.data.video.width,On.data.video.height),status:1,delay:On.data.delay},xt[zr.sName]===void 0||xt[zr.sName]===null?xt[zr.sName]={index:zr.index,delay:$n}:xt[zr.sName].delay>=$n&&(xt[zr.sName]={index:zr.index,delay:$n}),ke=Fr(ke,zr.index,1,On.data.video,On.data.audio,On.data.delay),Je(200,zr.index)}else tt[zr.url]={status:2},ke=Fr(ke,zr.index,2,null,null,0),Je(500,zr.index)})}}return ke},Xe=async(ke,$e,Je,tt)=>{let xt=wn(ke);return Je(xt.length),await Ke(xt,$e,tt)},_t=ke=>{ae(ke)},Lt=()=>{o(vr(se))},ct=ke=>vr(ke),yt=ke=>{let $e=[];for(let Je=0;Je<ke.length;Je++)$e.push(ke[Je].name+","+ke[Je].url);return $e.join(`
`)},Vt=(ke,$e)=>{Nt(ke,{groupTitle:$e})},Kt=ke=>{ln(ke)},Nt=(ke,$e)=>{let Je=wn(se);$e.groupTitle!==void 0&&$e.groupTitle!==null&&ln($e.groupTitle);for(let xt=0;xt<Je.length;xt++)if(jt(ke,Je[xt].index))for(let kt in $e)kt==="name"&&(Je[xt].sName=$e[kt]),Je[xt][kt]=$e[kt];let tt=se;for(let xt=0;xt<tt.length;xt++)if(jt(ke,tt[xt].index))for(let kt in $e)kt==="name"&&(tt[xt].sName=$e[kt].toLowerCase()),tt[xt][kt]=$e[kt];ae(Je)},vr=ke=>{let $e=`#EXTM3U
`;for(let Je=0;Je<ke.length;Je+=1)$e+=`#EXTINF:-1 tvg-name="${ke[Je].tvgName}" tvg-id="${ke[Je].tvgId}" tvg-logo="${ke[Je].tvgLogo}" group-title="${ke[Je].groupTitle}",${ke[Je].name}
${ke[Je].url}
`;return $e},Tt=ke=>{let $e=ot(JSON.stringify(ke)),Je={urls:ke,md5:$e},tt=wn(E),xt=!1;for(let kt=0;kt<tt.length;kt++)tt[kt].md5===$e&&(xt=!0);xt||(tt.length>=5&&tt.splice(0,1),tt.push(Je),jr(tt))},xr="checkHistory",Zr="subCheckMenuList",Br=()=>{let ke=localStorage.getItem(xr);try{let $e=JSON.parse(ke)??[];D($e)}catch{console.log("read checkHistory from local error")}},jr=ke=>{D(ke),localStorage.setItem(xr,JSON.stringify(ke))},Pn=(ke,$e)=>{const Je=/(\D+)(\d+)/;if(ke===null||$e===null)return-1;console.log("----a",ke),console.log("----b",$e);let tt="",xt="",kt=-1,Bt=-1,Tr=ke.sName.match(Je);Tr&&Tr.length>=3&&(tt=Tr[1],xt=Tr[2]);let Wr=$e.sName.match(Je);return Wr&&Wr.length>=3&&(kt=Wr[1],Bt=Wr[2]),tt<kt?-1:tt>kt?1:parseInt(xt)-parseInt(Bt)},ir=(ke,$e,Je,tt,xt)=>{xt&&(console.log("addDetail----sort----",ke),ke.sort(Pn));let kt=wn(ce);console.log("dataList--",kt);let Bt=ot(JSON.stringify($e)),Tr=!1;for(let Wr=0;Wr<kt.length;Wr++)kt[Wr].md5===Bt&&(Tr=!0);return Tr||(kt.push({md5:Bt,data:ke,original:{urls:$e,local:Je,ffmpeg:0,sort:xt,check:tt},menu:{groups:Cs(ke)},query:{needFast:!1,searchName:[],group:""}}),yn(kt)),Bt},Ti=()=>{let ke=localStorage.getItem(Zr);try{let $e=JSON.parse(ke)??[];ee($e)}catch{console.log("read checkHistory from local error")}},yn=ke=>{ee(ke),localStorage.setItem(Zr,JSON.stringify(ke))},Cs=ke=>{let $e={};for(let tt=0;tt<ke.length;tt++)ke[tt].groupTitle!==""&&($e[ke[tt].groupTitle]=ke[tt].groupTitle);let Je=[];for(let tt in $e)Je.push($e[tt]);return Je},nn=async ke=>{let $e=[];for(let tt=0;tt<ke.length;tt++){let xt=xe(ke[tt].url);$e.push(Ar.get(xt,{timeout:ye.httpRequestTimeout}))}return(await Promise.allSettled($e)).forEach((tt,xt)=>{let kt=!0,Bt="";if(tt.status==="fulfilled"){const Tr=tt.value.data;ws(Tr)?(kt=!1,Bt=Tr):(kt=!0,Bt=Tr)}else kt=!0,Bt=tt.reason.message;kt?ke[xt].status=500:ke[xt].status=200,ke[xt].body=Bt}),ke},ws=ke=>ke.substr(0,7)==="#EXTM3U",hi=ke=>{let $e=[];for(let Je=0;Je<ce.length;Je++)ce[Je].md5!==ke&&$e.push(ce[Je]);yn($e),Mr()},si=ke=>{$(ke);let $e=Ut(ke);$e&&(ae($e.data),V($e.query),ie($e.menu),ue($e))},Mr=()=>{$(""),ae([]),V(null),ie(null),ue([])};return O.jsx(Ha.Provider,{value:{originalM3uBody:t,changeOriginalM3uBody:Hr,exportDataStr:a,setExportDataStr:o,exportData:i,onChangeExportData:_t,videoResolution:l,changeVideoResolution:fr,settings:ye,onChangeSettings:qt,headerHeight:145,filterM3u:br,deleteShowM3uRow:vt,onExportValidM3uData:oe,onSelectedRow:je,onSelectedOrNotAll:St,changeDialogBodyData:fe,changeOriginalM3uBodies:Cn,updateDataByIndex:Nt,onChangeExportStr:Lt,batchChangeGroupName:Vt,addGroupName:Kt,getCheckUrl:be,strToCsv:Or,clearDetailData:yr,getM3uBody:xe,needFastSource:c,onChangeNeedFastSource:dt,nowMod:f,getBodyType:nr,changeLanguage:st,languageList:me,clientSaveFile:Ue,nowPlatform:v,videoPlayTypes:pe,initControlBar:Ne,showWindowsTopBar:_,doFastCheck:Xe,subCheckMenuList:ce,checkHistory:E,saveDataToHistory:Tt,addDetail:ir,get_m3u_body:nn,get_m3u8_info_by_m3u_ori_data:Rr,m3uObjectToM3uBody:ct,m3uObjectToTxtBody:yt,webSaveFile:et,detailList:se,detailQuery:W,detailMenu:Q,ffmepgCheck:P,detailOriginal:ne,updateDetailMd5:si,delDetailData:hi,detailMd5:A,configInfo:U,showNewVersion:I,check_version:Pt,saveFile:Ye},children:r})};var p0={},jR;function rG(){if(jR)return p0;jR=1,Object.defineProperty(p0,"__esModule",{value:!0}),p0.parse=a,p0.serialize=u;const r=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,e=/^[\u0021-\u003A\u003C-\u007E]*$/,t=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,n=/^[\u0020-\u003A\u003D-\u007E]*$/,i=Object.prototype.toString,s=(()=>{const f=function(){};return f.prototype=Object.create(null),f})();function a(f,g){const v=new s,y=f.length;if(y<2)return v;const _=g?.decode||c;let C=0;do{const E=f.indexOf("=",C);if(E===-1)break;const D=f.indexOf(";",C),I=D===-1?y:D;if(E>I){C=f.lastIndexOf(";",E-1)+1;continue}const k=o(f,C,E),P=l(f,E,k),N=f.slice(k,P);if(v[N]===void 0){let U=o(f,E+1,I),B=l(f,I,U);const A=_(f.slice(U,B));v[N]=A}C=I+1}while(C<y);return v}function o(f,g,v){do{const y=f.charCodeAt(g);if(y!==32&&y!==9)return g}while(++g<v);return v}function l(f,g,v){for(;g>v;){const y=f.charCodeAt(--g);if(y!==32&&y!==9)return g+1}return v}function u(f,g,v){const y=v?.encode||encodeURIComponent;if(!r.test(f))throw new TypeError(`argument name is invalid: ${f}`);const _=y(g);if(!e.test(_))throw new TypeError(`argument val is invalid: ${g}`);let C=f+"="+_;if(!v)return C;if(v.maxAge!==void 0){if(!Number.isInteger(v.maxAge))throw new TypeError(`option maxAge is invalid: ${v.maxAge}`);C+="; Max-Age="+v.maxAge}if(v.domain){if(!t.test(v.domain))throw new TypeError(`option domain is invalid: ${v.domain}`);C+="; Domain="+v.domain}if(v.path){if(!n.test(v.path))throw new TypeError(`option path is invalid: ${v.path}`);C+="; Path="+v.path}if(v.expires){if(!h(v.expires)||!Number.isFinite(v.expires.valueOf()))throw new TypeError(`option expires is invalid: ${v.expires}`);C+="; Expires="+v.expires.toUTCString()}if(v.httpOnly&&(C+="; HttpOnly"),v.secure&&(C+="; Secure"),v.partitioned&&(C+="; Partitioned"),v.priority)switch(typeof v.priority=="string"?v.priority.toLowerCase():void 0){case"low":C+="; Priority=Low";break;case"medium":C+="; Priority=Medium";break;case"high":C+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${v.priority}`)}if(v.sameSite)switch(typeof v.sameSite=="string"?v.sameSite.toLowerCase():v.sameSite){case!0:case"strict":C+="; SameSite=Strict";break;case"lax":C+="; SameSite=Lax";break;case"none":C+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${v.sameSite}`)}return C}function c(f){if(f.indexOf("%")===-1)return f;try{return decodeURIComponent(f)}catch{return f}}function h(f){return i.call(f)==="[object Date]"}return p0}rG();/**
 * react-router v7.6.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var n8=r=>{throw TypeError(r)},nG=(r,e,t)=>e.has(r)||n8("Cannot "+t),R1=(r,e,t)=>(nG(r,e,"read from private field"),t?t.call(r):e.get(r)),iG=(r,e,t)=>e.has(r)?n8("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(r):e.set(r,t),zR="popstate";function sG(r={}){function e(i,s){let{pathname:a="/",search:o="",hash:l=""}=Uc(i.location.hash.substring(1));return!a.startsWith("/")&&!a.startsWith(".")&&(a="/"+a),Tg("",{pathname:a,search:o,hash:l},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function t(i,s){let a=i.document.querySelector("base"),o="";if(a&&a.getAttribute("href")){let l=i.location.href,u=l.indexOf("#");o=u===-1?l:l.slice(0,u)}return o+"#"+(typeof s=="string"?s:Ud(s))}function n(i,s){bi(i.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(s)})`)}return oG(e,t,n,r)}function tn(r,e){if(r===!1||r===null||typeof r>"u")throw new Error(e)}function bi(r,e){if(!r){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function aG(){return Math.random().toString(36).substring(2,10)}function HR(r,e){return{usr:r.state,key:r.key,idx:e}}function Tg(r,e,t=null,n){return{pathname:typeof r=="string"?r:r.pathname,search:"",hash:"",...typeof e=="string"?Uc(e):e,state:t,key:e&&e.key||n||aG()}}function Ud({pathname:r="/",search:e="",hash:t=""}){return e&&e!=="?"&&(r+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(r+=t.charAt(0)==="#"?t:"#"+t),r}function Uc(r){let e={};if(r){let t=r.indexOf("#");t>=0&&(e.hash=r.substring(t),r=r.substring(0,t));let n=r.indexOf("?");n>=0&&(e.search=r.substring(n),r=r.substring(0,n)),r&&(e.pathname=r)}return e}function oG(r,e,t,n={}){let{window:i=document.defaultView,v5Compat:s=!1}=n,a=i.history,o="POP",l=null,u=c();u==null&&(u=0,a.replaceState({...a.state,idx:u},""));function c(){return(a.state||{idx:null}).idx}function h(){o="POP";let _=c(),C=_==null?null:_-u;u=_,l&&l({action:o,location:y.location,delta:C})}function f(_,C){o="PUSH";let E=Tg(y.location,_,C);t&&t(E,_),u=c()+1;let D=HR(E,u),I=y.createHref(E);try{a.pushState(D,"",I)}catch(k){if(k instanceof DOMException&&k.name==="DataCloneError")throw k;i.location.assign(I)}s&&l&&l({action:o,location:y.location,delta:1})}function g(_,C){o="REPLACE";let E=Tg(y.location,_,C);t&&t(E,_),u=c();let D=HR(E,u),I=y.createHref(E);a.replaceState(D,"",I),s&&l&&l({action:o,location:y.location,delta:0})}function v(_){return i8(_)}let y={get action(){return o},get location(){return r(i,a)},listen(_){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(zR,h),l=_,()=>{i.removeEventListener(zR,h),l=null}},createHref(_){return e(i,_)},createURL:v,encodeLocation(_){let C=v(_);return{pathname:C.pathname,search:C.search,hash:C.hash}},push:f,replace:g,go(_){return a.go(_)}};return y}function i8(r,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),tn(t,"No window.location.(origin|href) available to create URL");let n=typeof r=="string"?r:Ud(r);return n=n.replace(/ $/,"%20"),!e&&n.startsWith("//")&&(n=t+n),new URL(n,t)}var N0,VR=class{constructor(r){if(iG(this,N0,new Map),r)for(let[e,t]of r)this.set(e,t)}get(r){if(R1(this,N0).has(r))return R1(this,N0).get(r);if(r.defaultValue!==void 0)return r.defaultValue;throw new Error("No value found for context")}set(r,e){R1(this,N0).set(r,e)}};N0=new WeakMap;var lG=new Set(["lazy","caseSensitive","path","id","index","children"]);function uG(r){return lG.has(r)}var cG=new Set(["lazy","caseSensitive","path","id","index","unstable_middleware","children"]);function dG(r){return cG.has(r)}function hG(r){return r.index===!0}function E_(r,e,t=[],n={}){return r.map((i,s)=>{let a=[...t,String(s)],o=typeof i.id=="string"?i.id:a.join("-");if(tn(i.index!==!0||!i.children,"Cannot specify children on an index route"),tn(!n[o],`Found a route id collision on id "${o}".  Route id's must be globally unique within Data Router usages`),hG(i)){let l={...i,...e(i),id:o};return n[o]=l,l}else{let l={...i,...e(i),id:o,children:void 0};return n[o]=l,i.children&&(l.children=E_(i.children,e,a,n)),l}})}function Id(r,e,t="/"){return Yx(r,e,t,!1)}function Yx(r,e,t,n){let i=typeof e=="string"?Uc(e):e,s=el(i.pathname||"/",t);if(s==null)return null;let a=a8(r);fG(a);let o=null;for(let l=0;o==null&&l<a.length;++l){let u=CG(s);o=SG(a[l],u,n)}return o}function s8(r,e){let{route:t,pathname:n,params:i}=r;return{id:t.id,pathname:n,params:i,data:e[t.id],handle:t.handle}}function a8(r,e=[],t=[],n=""){let i=(s,a,o)=>{let l={relativePath:o===void 0?s.path||"":o,caseSensitive:s.caseSensitive===!0,childrenIndex:a,route:s};l.relativePath.startsWith("/")&&(tn(l.relativePath.startsWith(n),`Absolute route path "${l.relativePath}" nested under path "${n}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),l.relativePath=l.relativePath.slice(n.length));let u=Du([n,l.relativePath]),c=t.concat(l);s.children&&s.children.length>0&&(tn(s.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${u}".`),a8(s.children,e,c,u)),!(s.path==null&&!s.index)&&e.push({path:u,score:_G(u,s.index),routesMeta:c})};return r.forEach((s,a)=>{if(s.path===""||!s.path?.includes("?"))i(s,a);else for(let o of o8(s.path))i(s,a,o)}),e}function o8(r){let e=r.split("/");if(e.length===0)return[];let[t,...n]=e,i=t.endsWith("?"),s=t.replace(/\?$/,"");if(n.length===0)return i?[s,""]:[s];let a=o8(n.join("/")),o=[];return o.push(...a.map(l=>l===""?s:[s,l].join("/"))),i&&o.push(...a),o.map(l=>r.startsWith("/")&&l===""?"/":l)}function fG(r){r.sort((e,t)=>e.score!==t.score?t.score-e.score:bG(e.routesMeta.map(n=>n.childrenIndex),t.routesMeta.map(n=>n.childrenIndex)))}var pG=/^:[\w-]+$/,mG=3,gG=2,vG=1,yG=10,xG=-2,WR=r=>r==="*";function _G(r,e){let t=r.split("/"),n=t.length;return t.some(WR)&&(n+=xG),e&&(n+=gG),t.filter(i=>!WR(i)).reduce((i,s)=>i+(pG.test(s)?mG:s===""?vG:yG),n)}function bG(r,e){return r.length===e.length&&r.slice(0,-1).every((n,i)=>n===e[i])?r[r.length-1]-e[e.length-1]:0}function SG(r,e,t=!1){let{routesMeta:n}=r,i={},s="/",a=[];for(let o=0;o<n.length;++o){let l=n[o],u=o===n.length-1,c=s==="/"?e:e.slice(s.length)||"/",h=k_({path:l.relativePath,caseSensitive:l.caseSensitive,end:u},c),f=l.route;if(!h&&u&&t&&!n[n.length-1].route.index&&(h=k_({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},c)),!h)return null;Object.assign(i,h.params),a.push({params:i,pathname:Du([s,h.pathname]),pathnameBase:kG(Du([s,h.pathnameBase])),route:f}),h.pathnameBase!=="/"&&(s=Du([s,h.pathnameBase]))}return a}function k_(r,e){typeof r=="string"&&(r={path:r,caseSensitive:!1,end:!0});let[t,n]=TG(r.path,r.caseSensitive,r.end),i=e.match(t);if(!i)return null;let s=i[0],a=s.replace(/(.)\/+$/,"$1"),o=i.slice(1);return{params:n.reduce((u,{paramName:c,isOptional:h},f)=>{if(c==="*"){let v=o[f]||"";a=s.slice(0,s.length-v.length).replace(/(.)\/+$/,"$1")}const g=o[f];return h&&!g?u[c]=void 0:u[c]=(g||"").replace(/%2F/g,"/"),u},{}),pathname:s,pathnameBase:a,pattern:r}}function TG(r,e=!1,t=!0){bi(r==="*"||!r.endsWith("*")||r.endsWith("/*"),`Route path "${r}" will be treated as if it were "${r.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${r.replace(/\*$/,"/*")}".`);let n=[],i="^"+r.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,o,l)=>(n.push({paramName:o,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return r.endsWith("*")?(n.push({paramName:"*"}),i+=r==="*"||r==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?i+="\\/*$":r!==""&&r!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),n]}function CG(r){try{return r.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return bi(!1,`The URL path "${r}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),r}}function el(r,e){if(e==="/")return r;if(!r.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,n=r.charAt(t);return n&&n!=="/"?null:r.slice(t)||"/"}function wG(r,e="/"){let{pathname:t,search:n="",hash:i=""}=typeof r=="string"?Uc(r):r;return{pathname:t?t.startsWith("/")?t:EG(t,e):e,search:AG(n),hash:DG(i)}}function EG(r,e){let t=e.replace(/\/+$/,"").split("/");return r.split("/").forEach(i=>{i===".."?t.length>1&&t.pop():i!=="."&&t.push(i)}),t.length>1?t.join("/"):"/"}function L1(r,e,t,n){return`Cannot include a '${r}' character in a manually specified \`to.${e}\` field [${JSON.stringify(n)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function l8(r){return r.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function $E(r){let e=l8(r);return e.map((t,n)=>n===e.length-1?t.pathname:t.pathnameBase)}function jE(r,e,t,n=!1){let i;typeof r=="string"?i=Uc(r):(i={...r},tn(!i.pathname||!i.pathname.includes("?"),L1("?","pathname","search",i)),tn(!i.pathname||!i.pathname.includes("#"),L1("#","pathname","hash",i)),tn(!i.search||!i.search.includes("#"),L1("#","search","hash",i)));let s=r===""||i.pathname==="",a=s?"/":i.pathname,o;if(a==null)o=t;else{let h=e.length-1;if(!n&&a.startsWith("..")){let f=a.split("/");for(;f[0]==="..";)f.shift(),h-=1;i.pathname=f.join("/")}o=h>=0?e[h]:"/"}let l=wG(i,o),u=a&&a!=="/"&&a.endsWith("/"),c=(s||a===".")&&t.endsWith("/");return!l.pathname.endsWith("/")&&(u||c)&&(l.pathname+="/"),l}var Du=r=>r.join("/").replace(/\/\/+/g,"/"),kG=r=>r.replace(/\/+$/,"").replace(/^\/*/,"/"),AG=r=>!r||r==="?"?"":r.startsWith("?")?r:"?"+r,DG=r=>!r||r==="#"?"":r.startsWith("#")?r:"#"+r,A_=class{constructor(r,e,t,n=!1){this.status=r,this.statusText=e||"",this.internal=n,t instanceof Error?(this.data=t.toString(),this.error=t):this.data=t}};function Cg(r){return r!=null&&typeof r.status=="number"&&typeof r.statusText=="string"&&typeof r.internal=="boolean"&&"data"in r}var u8=["POST","PUT","PATCH","DELETE"],IG=new Set(u8),PG=["GET",...u8],RG=new Set(PG),LG=new Set([301,302,303,307,308]),OG=new Set([307,308]),O1={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},MG={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},m0={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},zE=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,FG=r=>({hasErrorBoundary:!!r.hasErrorBoundary}),c8="remix-router-transitions",d8=Symbol("ResetLoaderData");function BG(r){const e=r.window?r.window:typeof window<"u"?window:void 0,t=typeof e<"u"&&typeof e.document<"u"&&typeof e.document.createElement<"u";tn(r.routes.length>0,"You must provide a non-empty routes array to createRouter");let n=r.hydrationRouteProperties||[],i=r.mapRouteProperties||FG,s={},a=E_(r.routes,i,void 0,s),o,l=r.basename||"/",u=r.dataStrategy||zG,c={unstable_middleware:!1,...r.future},h=null,f=new Set,g=null,v=null,y=null,_=r.hydrationData!=null,C=Id(a,r.history.location,l),E=!1,D=null,I;if(C==null&&!r.patchRoutesOnNavigation){let be=zo(404,{pathname:r.history.location.pathname}),{matches:xe,route:Ae}=nL(a);I=!0,C=xe,D={[Ae.id]:be}}else if(C&&!r.hydrationData&&Te(C,a,r.history.location.pathname).active&&(C=null),C)if(C.some(be=>be.route.lazy))I=!1;else if(!C.some(be=>be.route.loader))I=!0;else{let be=r.hydrationData?r.hydrationData.loaderData:null,xe=r.hydrationData?r.hydrationData.errors:null;if(xe){let Ae=C.findIndex(Ke=>xe[Ke.route.id]!==void 0);I=C.slice(0,Ae+1).every(Ke=>!Fw(Ke.route,be,xe))}else I=C.every(Ae=>!Fw(Ae.route,be,xe))}else{I=!1,C=[];let be=Te(null,a,r.history.location.pathname);be.active&&be.matches&&(E=!0,C=be.matches)}let k,P={historyAction:r.history.action,location:r.history.location,matches:C,initialized:I,navigation:O1,restoreScrollPosition:r.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:r.hydrationData&&r.hydrationData.loaderData||{},actionData:r.hydrationData&&r.hydrationData.actionData||null,errors:r.hydrationData&&r.hydrationData.errors||D,fetchers:new Map,blockers:new Map},N="POP",U=!1,B,A=!1,$=new Map,W=null,V=!1,Q=!1,ie=new Set,ne=new Map,ue=0,se=-1,ae=new Map,ce=new Set,ee=new Map,pe=new Map,me=new Set,ye=new Map,Oe,Le=null;function st(){if(h=r.history.listen(({action:be,location:xe,delta:Ae})=>{if(Oe){Oe(),Oe=void 0;return}bi(ye.size===0||Ae!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let Ke=ln({currentLocation:P.location,nextLocation:xe,historyAction:be});if(Ke&&Ae!=null){let Xe=new Promise(_t=>{Oe=_t});r.history.go(Ae*-1),Hr(Ke,{state:"blocked",location:xe,proceed(){Hr(Ke,{state:"proceeding",proceed:void 0,reset:void 0,location:xe}),Xe.then(()=>r.history.go(Ae))},reset(){let _t=new Map(P.blockers);_t.set(Ke,m0),Ye({blockers:_t})}});return}return Ne(be,xe)}),t){ZG(e,$);let be=()=>eK(e,$);e.addEventListener("pagehide",be),W=()=>e.removeEventListener("pagehide",be)}return P.initialized||Ne("POP",P.location,{initialHydration:!0}),k}function ze(){h&&h(),W&&W(),f.clear(),B&&B.abort(),P.fetchers.forEach((be,xe)=>yr(xe)),P.blockers.forEach((be,xe)=>Or(xe))}function pt(be){return f.add(be),()=>f.delete(be)}function Ye(be,xe={}){P={...P,...be};let Ae=[],Ke=[];P.fetchers.forEach((Xe,_t)=>{Xe.state==="idle"&&(me.has(_t)?Ae.push(_t):Ke.push(_t))}),me.forEach(Xe=>{!P.fetchers.has(Xe)&&!ne.has(Xe)&&Ae.push(Xe)}),[...f].forEach(Xe=>Xe(P,{deletedFetchers:Ae,viewTransitionOpts:xe.viewTransitionOpts,flushSync:xe.flushSync===!0})),Ae.forEach(Xe=>yr(Xe)),Ke.forEach(Xe=>P.fetchers.delete(Xe))}function Pt(be,xe,{flushSync:Ae}={}){let Ke=P.actionData!=null&&P.navigation.formMethod!=null&&fo(P.navigation.formMethod)&&P.navigation.state==="loading"&&be.state?._isRedirect!==!0,Xe;xe.actionData?Object.keys(xe.actionData).length>0?Xe=xe.actionData:Xe=null:Ke?Xe=P.actionData:Xe=null;let _t=xe.loaderData?tL(P.loaderData,xe.loaderData,xe.matches||[],xe.errors):P.loaderData,Lt=P.blockers;Lt.size>0&&(Lt=new Map(Lt),Lt.forEach((Vt,Kt)=>Lt.set(Kt,m0)));let ct=U===!0||P.navigation.formMethod!=null&&fo(P.navigation.formMethod)&&be.state?._isRedirect!==!0;o&&(a=o,o=void 0),V||N==="POP"||(N==="PUSH"?r.history.push(be,be.state):N==="REPLACE"&&r.history.replace(be,be.state));let yt;if(N==="POP"){let Vt=$.get(P.location.pathname);Vt&&Vt.has(be.pathname)?yt={currentLocation:P.location,nextLocation:be}:$.has(be.pathname)&&(yt={currentLocation:be,nextLocation:P.location})}else if(A){let Vt=$.get(P.location.pathname);Vt?Vt.add(be.pathname):(Vt=new Set([be.pathname]),$.set(P.location.pathname,Vt)),yt={currentLocation:P.location,nextLocation:be}}Ye({...xe,actionData:Xe,loaderData:_t,historyAction:N,location:be,initialized:!0,navigation:O1,revalidation:"idle",restoreScrollPosition:fe(be,xe.matches||P.matches),preventScrollReset:ct,blockers:Lt},{viewTransitionOpts:yt,flushSync:Ae===!0}),N="POP",U=!1,A=!1,V=!1,Q=!1,Le?.resolve(),Le=null}async function Rt(be,xe){if(typeof be=="number"){r.history.go(be);return}let Ae=Mw(P.location,P.matches,l,be,xe?.fromRouteId,xe?.relative),{path:Ke,submission:Xe,error:_t}=qR(!1,Ae,xe),Lt=P.location,ct=Tg(P.location,Ke,xe&&xe.state);ct={...ct,...r.history.encodeLocation(ct)};let yt=xe&&xe.replace!=null?xe.replace:void 0,Vt="PUSH";yt===!0?Vt="REPLACE":yt===!1||Xe!=null&&fo(Xe.formMethod)&&Xe.formAction===P.location.pathname+P.location.search&&(Vt="REPLACE");let Kt=xe&&"preventScrollReset"in xe?xe.preventScrollReset===!0:void 0,Nt=(xe&&xe.flushSync)===!0,vr=ln({currentLocation:Lt,nextLocation:ct,historyAction:Vt});if(vr){Hr(vr,{state:"blocked",location:ct,proceed(){Hr(vr,{state:"proceeding",proceed:void 0,reset:void 0,location:ct}),Rt(be,xe)},reset(){let Tt=new Map(P.blockers);Tt.set(vr,m0),Ye({blockers:Tt})}});return}await Ne(Vt,ct,{submission:Xe,pendingError:_t,preventScrollReset:Kt,replace:xe&&xe.replace,enableViewTransition:xe&&xe.viewTransition,flushSync:Nt})}function Ve(){Le||(Le=tK()),Rr(),Ye({revalidation:"loading"});let be=Le.promise;return P.navigation.state==="submitting"?be:P.navigation.state==="idle"?(Ne(P.historyAction,P.location,{startUninterruptedRevalidation:!0}),be):(Ne(N||P.historyAction,P.navigation.location,{overrideNavigation:P.navigation,enableViewTransition:A===!0}),be)}async function Ne(be,xe,Ae){B&&B.abort(),B=null,N=be,V=(Ae&&Ae.startUninterruptedRevalidation)===!0,oe(P.location,P.matches),U=(Ae&&Ae.preventScrollReset)===!0,A=(Ae&&Ae.enableViewTransition)===!0;let Ke=o||a,Xe=Ae&&Ae.overrideNavigation,_t=Ae?.initialHydration&&P.matches&&P.matches.length>0&&!E?P.matches:Id(Ke,xe,l),Lt=(Ae&&Ae.flushSync)===!0;if(_t&&P.initialized&&!Q&&KG(P.location,xe)&&!(Ae&&Ae.submission&&fo(Ae.submission.formMethod))){Pt(xe,{matches:_t},{flushSync:Lt});return}let ct=Te(_t,Ke,xe.pathname);if(ct.active&&ct.matches&&(_t=ct.matches),!_t){let{error:Zr,notFoundMatches:Br,route:jr}=Cn(xe.pathname);Pt(xe,{matches:Br,loaderData:{},errors:{[jr.id]:Zr}},{flushSync:Lt});return}B=new AbortController;let yt=ip(r.history,xe,B.signal,Ae&&Ae.submission),Vt=new VR(r.unstable_getContext?await r.unstable_getContext():void 0),Kt;if(Ae&&Ae.pendingError)Kt=[Bh(_t).route.id,{type:"error",error:Ae.pendingError}];else if(Ae&&Ae.submission&&fo(Ae.submission.formMethod)){let Zr=await Ie(yt,xe,Ae.submission,_t,Vt,ct.active,Ae&&Ae.initialHydration===!0,{replace:Ae.replace,flushSync:Lt});if(Zr.shortCircuited)return;if(Zr.pendingActionResult){let[Br,jr]=Zr.pendingActionResult;if(ho(jr)&&Cg(jr.error)&&jr.error.status===404){B=null,Pt(xe,{matches:Zr.matches,loaderData:{},errors:{[Br]:jr.error}});return}}_t=Zr.matches||_t,Kt=Zr.pendingActionResult,Xe=M1(xe,Ae.submission),Lt=!1,ct.active=!1,yt=ip(r.history,yt.url,yt.signal)}let{shortCircuited:Nt,matches:vr,loaderData:Tt,errors:xr}=await Ue(yt,xe,_t,Vt,ct.active,Xe,Ae&&Ae.submission,Ae&&Ae.fetcherSubmission,Ae&&Ae.replace,Ae&&Ae.initialHydration===!0,Lt,Kt);Nt||(B=null,Pt(xe,{matches:vr||_t,...rL(Kt),loaderData:Tt,errors:xr}))}async function Ie(be,xe,Ae,Ke,Xe,_t,Lt,ct={}){Rr();let yt=QG(xe,Ae);if(Ye({navigation:yt},{flushSync:ct.flushSync===!0}),_t){let Nt=await je(Ke,xe.pathname,be.signal);if(Nt.type==="aborted")return{shortCircuited:!0};if(Nt.type==="error"){let vr=Bh(Nt.partialMatches).route.id;return{matches:Nt.partialMatches,pendingActionResult:[vr,{type:"error",error:Nt.error}]}}else if(Nt.matches)Ke=Nt.matches;else{let{notFoundMatches:vr,error:Tt,route:xr}=Cn(xe.pathname);return{matches:vr,pendingActionResult:[xr.id,{type:"error",error:Tt}]}}}let Vt,Kt=U0(Ke,xe);if(!Kt.route.action&&!Kt.route.lazy)Vt={type:"error",error:zo(405,{method:be.method,pathname:xe.pathname,routeId:Kt.route.id})};else{let Nt=bp(i,s,be,Ke,Kt,Lt?[]:n,Xe),vr=await gr(be,Nt,Xe,null);if(Vt=vr[Kt.route.id],!Vt){for(let Tt of Ke)if(vr[Tt.route.id]){Vt=vr[Tt.route.id];break}}if(be.signal.aborted)return{shortCircuited:!0}}if(zh(Vt)){let Nt;return ct&&ct.replace!=null?Nt=ct.replace:Nt=JR(Vt.response.headers.get("Location"),new URL(be.url),l)===P.location.pathname+P.location.search,await lt(be,Vt,!0,{submission:Ae,replace:Nt}),{shortCircuited:!0}}if(ho(Vt)){let Nt=Bh(Ke,Kt.route.id);return(ct&&ct.replace)!==!0&&(N="PUSH"),{matches:Ke,pendingActionResult:[Nt.route.id,Vt,Kt.route.id]}}return{matches:Ke,pendingActionResult:[Kt.route.id,Vt]}}async function Ue(be,xe,Ae,Ke,Xe,_t,Lt,ct,yt,Vt,Kt,Nt){let vr=_t||M1(xe,Lt),Tt=Lt||ct||sL(vr),xr=!V&&!Vt;if(Xe){if(xr){let ke=et(Nt);Ye({navigation:vr,...ke!==void 0?{actionData:ke}:{}},{flushSync:Kt})}let Mr=await je(Ae,xe.pathname,be.signal);if(Mr.type==="aborted")return{shortCircuited:!0};if(Mr.type==="error"){let ke=Bh(Mr.partialMatches).route.id;return{matches:Mr.partialMatches,loaderData:{},errors:{[ke]:Mr.error}}}else if(Mr.matches)Ae=Mr.matches;else{let{error:ke,notFoundMatches:$e,route:Je}=Cn(xe.pathname);return{matches:$e,loaderData:{},errors:{[Je.id]:ke}}}}let Zr=o||a,{dsMatches:Br,revalidatingFetchers:jr}=GR(be,Ke,i,s,r.history,P,Ae,Tt,xe,Vt?[]:n,Vt===!0,Q,ie,me,ee,ce,Zr,l,Nt);if(se=++ue,!r.dataStrategy&&!Br.some(Mr=>Mr.shouldLoad)&&jr.length===0){let Mr=rn();return Pt(xe,{matches:Ae,loaderData:{},errors:Nt&&ho(Nt[1])?{[Nt[0]]:Nt[1].error}:null,...rL(Nt),...Mr?{fetchers:new Map(P.fetchers)}:{}},{flushSync:Kt}),{shortCircuited:!0}}if(xr){let Mr={};if(!Xe){Mr.navigation=vr;let ke=et(Nt);ke!==void 0&&(Mr.actionData=ke)}jr.length>0&&(Mr.fetchers=ot(jr)),Ye(Mr,{flushSync:Kt})}jr.forEach(Mr=>{vt(Mr.key),Mr.controller&&ne.set(Mr.key,Mr.controller)});let Pn=()=>jr.forEach(Mr=>vt(Mr.key));B&&B.signal.addEventListener("abort",Pn);let{loaderResults:ir,fetcherResults:Ti}=await hr(Br,jr,be,Ke);if(be.signal.aborted)return{shortCircuited:!0};B&&B.signal.removeEventListener("abort",Pn),jr.forEach(Mr=>ne.delete(Mr.key));let yn=Ty(ir);if(yn)return await lt(be,yn.result,!0,{replace:yt}),{shortCircuited:!0};if(yn=Ty(Ti),yn)return ce.add(yn.key),await lt(be,yn.result,!0,{replace:yt}),{shortCircuited:!0};let{loaderData:Cs,errors:nn}=eL(P,Ae,ir,Nt,jr,Ti);Vt&&P.errors&&(nn={...P.errors,...nn});let ws=rn(),hi=jt(se),si=ws||hi||jr.length>0;return{matches:Ae,loaderData:Cs,errors:nn,...si?{fetchers:new Map(P.fetchers)}:{}}}function et(be){if(be&&!ho(be[1]))return{[be[0]]:be[1].data};if(P.actionData)return Object.keys(P.actionData).length===0?null:P.actionData}function ot(be){return be.forEach(xe=>{let Ae=P.fetchers.get(xe.key),Ke=g0(void 0,Ae?Ae.data:void 0);P.fetchers.set(xe.key,Ke)}),new Map(P.fetchers)}async function dt(be,xe,Ae,Ke){vt(be);let Xe=(Ke&&Ke.flushSync)===!0,_t=o||a,Lt=Mw(P.location,P.matches,l,Ae,xe,Ke?.relative),ct=Id(_t,Lt,l),yt=Te(ct,_t,Lt);if(yt.active&&yt.matches&&(ct=yt.matches),!ct){qt(be,xe,zo(404,{pathname:Lt}),{flushSync:Xe});return}let{path:Vt,submission:Kt,error:Nt}=qR(!0,Lt,Ke);if(Nt){qt(be,xe,Nt,{flushSync:Xe});return}let vr=U0(ct,Vt),Tt=new VR(r.unstable_getContext?await r.unstable_getContext():void 0),xr=(Ke&&Ke.preventScrollReset)===!0;if(Kt&&fo(Kt.formMethod)){await it(be,xe,Vt,vr,ct,Tt,yt.active,Xe,xr,Kt);return}ee.set(be,{routeId:xe,path:Vt}),await bt(be,xe,Vt,vr,ct,Tt,yt.active,Xe,xr,Kt)}async function it(be,xe,Ae,Ke,Xe,_t,Lt,ct,yt,Vt){Rr(),ee.delete(be);function Kt(xt){if(!xt.route.action&&!xt.route.lazy){let kt=zo(405,{method:Vt.formMethod,pathname:Ae,routeId:xe});return qt(be,xe,kt,{flushSync:ct}),!0}return!1}if(!Lt&&Kt(Ke))return;let Nt=P.fetchers.get(be);nr(be,JG(Vt,Nt),{flushSync:ct});let vr=new AbortController,Tt=ip(r.history,Ae,vr.signal,Vt);if(Lt){let xt=await je(Xe,Ae,Tt.signal,be);if(xt.type==="aborted")return;if(xt.type==="error"){qt(be,xe,xt.error,{flushSync:ct});return}else if(xt.matches){if(Xe=xt.matches,Ke=U0(Xe,Ae),Kt(Ke))return}else{qt(be,xe,zo(404,{pathname:Ae}),{flushSync:ct});return}}ne.set(be,vr);let xr=ue,Zr=bp(i,s,Tt,Xe,Ke,n,_t),jr=(await gr(Tt,Zr,_t,be))[Ke.route.id];if(Tt.signal.aborted){ne.get(be)===vr&&ne.delete(be);return}if(me.has(be)){if(zh(jr)||ho(jr)){nr(be,Td(void 0));return}}else{if(zh(jr))if(ne.delete(be),se>xr){nr(be,Td(void 0));return}else return ce.add(be),nr(be,g0(Vt)),lt(Tt,jr,!1,{fetcherSubmission:Vt,preventScrollReset:yt});if(ho(jr)){qt(be,xe,jr.error);return}}let Pn=P.navigation.location||P.location,ir=ip(r.history,Pn,vr.signal),Ti=o||a,yn=P.navigation.state!=="idle"?Id(Ti,P.navigation.location,l):P.matches;tn(yn,"Didn't find any matches after fetcher action");let Cs=++ue;ae.set(be,Cs);let nn=g0(Vt,jr.data);P.fetchers.set(be,nn);let{dsMatches:ws,revalidatingFetchers:hi}=GR(ir,_t,i,s,r.history,P,yn,Vt,Pn,n,!1,Q,ie,me,ee,ce,Ti,l,[Ke.route.id,jr]);hi.filter(xt=>xt.key!==be).forEach(xt=>{let kt=xt.key,Bt=P.fetchers.get(kt),Tr=g0(void 0,Bt?Bt.data:void 0);P.fetchers.set(kt,Tr),vt(kt),xt.controller&&ne.set(kt,xt.controller)}),Ye({fetchers:new Map(P.fetchers)});let si=()=>hi.forEach(xt=>vt(xt.key));vr.signal.addEventListener("abort",si);let{loaderResults:Mr,fetcherResults:ke}=await hr(ws,hi,ir,_t);if(vr.signal.aborted)return;if(vr.signal.removeEventListener("abort",si),ae.delete(be),ne.delete(be),hi.forEach(xt=>ne.delete(xt.key)),P.fetchers.has(be)){let xt=Td(jr.data);P.fetchers.set(be,xt)}let $e=Ty(Mr);if($e)return lt(ir,$e.result,!1,{preventScrollReset:yt});if($e=Ty(ke),$e)return ce.add($e.key),lt(ir,$e.result,!1,{preventScrollReset:yt});let{loaderData:Je,errors:tt}=eL(P,yn,Mr,void 0,hi,ke);jt(Cs),P.navigation.state==="loading"&&Cs>se?(tn(N,"Expected pending action"),B&&B.abort(),Pt(P.navigation.location,{matches:yn,loaderData:Je,errors:tt,fetchers:new Map(P.fetchers)})):(Ye({errors:tt,loaderData:tL(P.loaderData,Je,yn,tt),fetchers:new Map(P.fetchers)}),Q=!1)}async function bt(be,xe,Ae,Ke,Xe,_t,Lt,ct,yt,Vt){let Kt=P.fetchers.get(be);nr(be,g0(Vt,Kt?Kt.data:void 0),{flushSync:ct});let Nt=new AbortController,vr=ip(r.history,Ae,Nt.signal);if(Lt){let jr=await je(Xe,Ae,vr.signal,be);if(jr.type==="aborted")return;if(jr.type==="error"){qt(be,xe,jr.error,{flushSync:ct});return}else if(jr.matches)Xe=jr.matches,Ke=U0(Xe,Ae);else{qt(be,xe,zo(404,{pathname:Ae}),{flushSync:ct});return}}ne.set(be,Nt);let Tt=ue,xr=bp(i,s,vr,Xe,Ke,n,_t),Br=(await gr(vr,xr,_t,be))[Ke.route.id];if(ne.get(be)===Nt&&ne.delete(be),!vr.signal.aborted){if(me.has(be)){nr(be,Td(void 0));return}if(zh(Br))if(se>Tt){nr(be,Td(void 0));return}else{ce.add(be),await lt(vr,Br,!1,{preventScrollReset:yt});return}if(ho(Br)){qt(be,xe,Br.error);return}nr(be,Td(Br.data))}}async function lt(be,xe,Ae,{submission:Ke,fetcherSubmission:Xe,preventScrollReset:_t,replace:Lt}={}){xe.response.headers.has("X-Remix-Revalidate")&&(Q=!0);let ct=xe.response.headers.get("Location");tn(ct,"Expected a Location header on the redirect Response"),ct=JR(ct,new URL(be.url),l);let yt=Tg(P.location,ct,{_isRedirect:!0});if(t){let xr=!1;if(xe.response.headers.has("X-Remix-Reload-Document"))xr=!0;else if(zE.test(ct)){const Zr=i8(ct,!0);xr=Zr.origin!==e.location.origin||el(Zr.pathname,l)==null}if(xr){Lt?e.location.replace(ct):e.location.assign(ct);return}}B=null;let Vt=Lt===!0||xe.response.headers.has("X-Remix-Replace")?"REPLACE":"PUSH",{formMethod:Kt,formAction:Nt,formEncType:vr}=P.navigation;!Ke&&!Xe&&Kt&&Nt&&vr&&(Ke=sL(P.navigation));let Tt=Ke||Xe;if(OG.has(xe.response.status)&&Tt&&fo(Tt.formMethod))await Ne(Vt,yt,{submission:{...Tt,formAction:ct},preventScrollReset:_t||U,enableViewTransition:Ae?A:void 0});else{let xr=M1(yt,Ke);await Ne(Vt,yt,{overrideNavigation:xr,fetcherSubmission:Xe,preventScrollReset:_t||U,enableViewTransition:Ae?A:void 0})}}async function gr(be,xe,Ae,Ke){let Xe,_t={};try{Xe=await HG(u,be,xe,Ke,Ae,!1)}catch(Lt){return xe.filter(ct=>ct.shouldLoad).forEach(ct=>{_t[ct.route.id]={type:"error",error:Lt}}),_t}if(be.signal.aborted)return _t;for(let[Lt,ct]of Object.entries(Xe))if(XG(ct)){let yt=ct.result;_t[Lt]={type:"redirect",response:qG(yt,be,Lt,xe,l)}}else _t[Lt]=await WG(ct);return _t}async function hr(be,xe,Ae,Ke){let Xe=gr(Ae,be,Ke,null),_t=Promise.all(xe.map(async yt=>{if(yt.matches&&yt.match&&yt.request&&yt.controller){let Kt=(await gr(yt.request,yt.matches,Ke,yt.key))[yt.match.route.id];return{[yt.key]:Kt}}else return Promise.resolve({[yt.key]:{type:"error",error:zo(404,{pathname:yt.path})}})})),Lt=await Xe,ct=(await _t).reduce((yt,Vt)=>Object.assign(yt,Vt),{});return{loaderResults:Lt,fetcherResults:ct}}function Rr(){Q=!0,ee.forEach((be,xe)=>{ne.has(xe)&&ie.add(xe),vt(xe)})}function nr(be,xe,Ae={}){P.fetchers.set(be,xe),Ye({fetchers:new Map(P.fetchers)},{flushSync:(Ae&&Ae.flushSync)===!0})}function qt(be,xe,Ae,Ke={}){let Xe=Bh(P.matches,xe);yr(be),Ye({errors:{[Xe.route.id]:Ae},fetchers:new Map(P.fetchers)},{flushSync:(Ke&&Ke.flushSync)===!0})}function fr(be){return pe.set(be,(pe.get(be)||0)+1),me.has(be)&&me.delete(be),P.fetchers.get(be)||MG}function yr(be){let xe=P.fetchers.get(be);ne.has(be)&&!(xe&&xe.state==="loading"&&ae.has(be))&&vt(be),ee.delete(be),ae.delete(be),ce.delete(be),me.delete(be),ie.delete(be),P.fetchers.delete(be)}function Lr(be){let xe=(pe.get(be)||0)-1;xe<=0?(pe.delete(be),me.add(be)):pe.set(be,xe),Ye({fetchers:new Map(P.fetchers)})}function vt(be){let xe=ne.get(be);xe&&(xe.abort(),ne.delete(be))}function Ut(be){for(let xe of be){let Ae=fr(xe),Ke=Td(Ae.data);P.fetchers.set(xe,Ke)}}function rn(){let be=[],xe=!1;for(let Ae of ce){let Ke=P.fetchers.get(Ae);tn(Ke,`Expected fetcher: ${Ae}`),Ke.state==="loading"&&(ce.delete(Ae),be.push(Ae),xe=!0)}return Ut(be),xe}function jt(be){let xe=[];for(let[Ae,Ke]of ae)if(Ke<be){let Xe=P.fetchers.get(Ae);tn(Xe,`Expected fetcher: ${Ae}`),Xe.state==="loading"&&(vt(Ae),ae.delete(Ae),xe.push(Ae))}return Ut(xe),xe.length>0}function br(be,xe){let Ae=P.blockers.get(be)||m0;return ye.get(be)!==xe&&ye.set(be,xe),Ae}function Or(be){P.blockers.delete(be),ye.delete(be)}function Hr(be,xe){let Ae=P.blockers.get(be)||m0;tn(Ae.state==="unblocked"&&xe.state==="blocked"||Ae.state==="blocked"&&xe.state==="blocked"||Ae.state==="blocked"&&xe.state==="proceeding"||Ae.state==="blocked"&&xe.state==="unblocked"||Ae.state==="proceeding"&&xe.state==="unblocked",`Invalid blocker state transition: ${Ae.state} -> ${xe.state}`);let Ke=new Map(P.blockers);Ke.set(be,xe),Ye({blockers:Ke})}function ln({currentLocation:be,nextLocation:xe,historyAction:Ae}){if(ye.size===0)return;ye.size>1&&bi(!1,"A router only supports one blocker at a time");let Ke=Array.from(ye.entries()),[Xe,_t]=Ke[Ke.length-1],Lt=P.blockers.get(Xe);if(!(Lt&&Lt.state==="proceeding")&&_t({currentLocation:be,nextLocation:xe,historyAction:Ae}))return Xe}function Cn(be){let xe=zo(404,{pathname:be}),Ae=o||a,{matches:Ke,route:Xe}=nL(Ae);return{notFoundMatches:Ke,route:Xe,error:xe}}function wn(be,xe,Ae){if(g=be,y=xe,v=Ae||null,!_&&P.navigation===O1){_=!0;let Ke=fe(P.location,P.matches);Ke!=null&&Ye({restoreScrollPosition:Ke})}return()=>{g=null,y=null,v=null}}function Fr(be,xe){return v&&v(be,xe.map(Ke=>s8(Ke,P.loaderData)))||be.key}function oe(be,xe){if(g&&y){let Ae=Fr(be,xe);g[Ae]=y()}}function fe(be,xe){if(g){let Ae=Fr(be,xe),Ke=g[Ae];if(typeof Ke=="number")return Ke}return null}function Te(be,xe,Ae){if(r.patchRoutesOnNavigation)if(be){if(Object.keys(be[0].params).length>0)return{active:!0,matches:Yx(xe,Ae,l,!0)}}else return{active:!0,matches:Yx(xe,Ae,l,!0)||[]};return{active:!1,matches:null}}async function je(be,xe,Ae,Ke){if(!r.patchRoutesOnNavigation)return{type:"success",matches:be};let Xe=be;for(;;){let _t=o==null,Lt=o||a,ct=s;try{await r.patchRoutesOnNavigation({signal:Ae,path:xe,matches:Xe,fetcherKey:Ke,patch:(Kt,Nt)=>{Ae.aborted||KR(Kt,Nt,Lt,ct,i)}})}catch(Kt){return{type:"error",error:Kt,partialMatches:Xe}}finally{_t&&!Ae.aborted&&(a=[...a])}if(Ae.aborted)return{type:"aborted"};let yt=Id(Lt,xe,l);if(yt)return{type:"success",matches:yt};let Vt=Yx(Lt,xe,l,!0);if(!Vt||Xe.length===Vt.length&&Xe.every((Kt,Nt)=>Kt.route.id===Vt[Nt].route.id))return{type:"success",matches:null};Xe=Vt}}function mt(be){s={},o=E_(be,i,void 0,s)}function St(be,xe){let Ae=o==null;KR(be,xe,o||a,s,i),Ae&&(a=[...a],Ye({}))}return k={get basename(){return l},get future(){return c},get state(){return P},get routes(){return a},get window(){return e},initialize:st,subscribe:pt,enableScrollRestoration:wn,navigate:Rt,fetch:dt,revalidate:Ve,createHref:be=>r.history.createHref(be),encodeLocation:be=>r.history.encodeLocation(be),getFetcher:fr,deleteFetcher:Lr,dispose:ze,getBlocker:br,deleteBlocker:Or,patchRoutes:St,_internalFetchControllers:ne,_internalSetRoutes:mt},k}function NG(r){return r!=null&&("formData"in r&&r.formData!=null||"body"in r&&r.body!==void 0)}function Mw(r,e,t,n,i,s){let a,o;if(i){a=[];for(let u of e)if(a.push(u),u.route.id===i){o=u;break}}else a=e,o=e[e.length-1];let l=jE(n||".",$E(a),el(r.pathname,t)||r.pathname,s==="path");if(n==null&&(l.search=r.search,l.hash=r.hash),(n==null||n===""||n===".")&&o){let u=HE(l.search);if(o.route.index&&!u)l.search=l.search?l.search.replace(/^\?/,"?index&"):"?index";else if(!o.route.index&&u){let c=new URLSearchParams(l.search),h=c.getAll("index");c.delete("index"),h.filter(g=>g).forEach(g=>c.append("index",g));let f=c.toString();l.search=f?`?${f}`:""}}return t!=="/"&&(l.pathname=l.pathname==="/"?t:Du([t,l.pathname])),Ud(l)}function qR(r,e,t){if(!t||!NG(t))return{path:e};if(t.formMethod&&!YG(t.formMethod))return{path:e,error:zo(405,{method:t.formMethod})};let n=()=>({path:e,error:zo(400,{type:"invalid-body"})}),s=(t.formMethod||"get").toUpperCase(),a=v8(e);if(t.body!==void 0){if(t.formEncType==="text/plain"){if(!fo(s))return n();let h=typeof t.body=="string"?t.body:t.body instanceof FormData||t.body instanceof URLSearchParams?Array.from(t.body.entries()).reduce((f,[g,v])=>`${f}${g}=${v}
`,""):String(t.body);return{path:e,submission:{formMethod:s,formAction:a,formEncType:t.formEncType,formData:void 0,json:void 0,text:h}}}else if(t.formEncType==="application/json"){if(!fo(s))return n();try{let h=typeof t.body=="string"?JSON.parse(t.body):t.body;return{path:e,submission:{formMethod:s,formAction:a,formEncType:t.formEncType,formData:void 0,json:h,text:void 0}}}catch{return n()}}}tn(typeof FormData=="function","FormData is not available in this environment");let o,l;if(t.formData)o=Nw(t.formData),l=t.formData;else if(t.body instanceof FormData)o=Nw(t.body),l=t.body;else if(t.body instanceof URLSearchParams)o=t.body,l=ZR(o);else if(t.body==null)o=new URLSearchParams,l=new FormData;else try{o=new URLSearchParams(t.body),l=ZR(o)}catch{return n()}let u={formMethod:s,formAction:a,formEncType:t&&t.formEncType||"application/x-www-form-urlencoded",formData:l,json:void 0,text:void 0};if(fo(u.formMethod))return{path:e,submission:u};let c=Uc(e);return r&&c.search&&HE(c.search)&&o.append("index",""),c.search=`?${o}`,{path:Ud(c),submission:u}}function GR(r,e,t,n,i,s,a,o,l,u,c,h,f,g,v,y,_,C,E){let D=E?ho(E[1])?E[1].error:E[1].data:void 0,I=i.createURL(s.location),k=i.createURL(l),P;if(c&&s.errors){let W=Object.keys(s.errors)[0];P=a.findIndex(V=>V.route.id===W)}else if(E&&ho(E[1])){let W=E[0];P=a.findIndex(V=>V.route.id===W)-1}let N=E?E[1].statusCode:void 0,U=N&&N>=400,B={currentUrl:I,currentParams:s.matches[0]?.params||{},nextUrl:k,nextParams:a[0].params,...o,actionResult:D,actionStatus:N},A=a.map((W,V)=>{let{route:Q}=W,ie=null;if(P!=null&&V>P?ie=!1:Q.lazy?ie=!0:Q.loader==null?ie=!1:c?ie=Fw(Q,s.loaderData,s.errors):UG(s.loaderData,s.matches[V],W)&&(ie=!0),ie!==null)return Bw(t,n,r,W,u,e,ie);let ne=U?!1:h||I.pathname+I.search===k.pathname+k.search||I.search!==k.search||$G(s.matches[V],W),ue={...B,defaultShouldRevalidate:ne},se=D_(W,ue);return Bw(t,n,r,W,u,e,se,ue)}),$=[];return v.forEach((W,V)=>{if(c||!a.some(ce=>ce.route.id===W.routeId)||g.has(V))return;let Q=Id(_,W.path,C);if(!Q){$.push({key:V,routeId:W.routeId,path:W.path,matches:null,match:null,request:null,controller:null});return}if(y.has(V))return;let ie=s.fetchers.get(V),ne=U0(Q,W.path),ue=new AbortController,se=ip(i,W.path,ue.signal),ae=null;if(f.has(V))f.delete(V),ae=bp(t,n,se,Q,ne,u,e);else if(ie&&ie.state!=="idle"&&ie.data===void 0)h&&(ae=bp(t,n,se,Q,ne,u,e));else{let ce={...B,defaultShouldRevalidate:U?!1:h};D_(ne,ce)&&(ae=bp(t,n,se,Q,ne,u,e,ce))}ae&&$.push({key:V,routeId:W.routeId,path:W.path,matches:ae,match:ne,request:se,controller:ue})}),{dsMatches:A,revalidatingFetchers:$}}function Fw(r,e,t){if(r.lazy)return!0;if(!r.loader)return!1;let n=e!=null&&r.id in e,i=t!=null&&t[r.id]!==void 0;return!n&&i?!1:typeof r.loader=="function"&&r.loader.hydrate===!0?!0:!n&&!i}function UG(r,e,t){let n=!e||t.route.id!==e.route.id,i=!r.hasOwnProperty(t.route.id);return n||i}function $G(r,e){let t=r.route.path;return r.pathname!==e.pathname||t!=null&&t.endsWith("*")&&r.params["*"]!==e.params["*"]}function D_(r,e){if(r.route.shouldRevalidate){let t=r.route.shouldRevalidate(e);if(typeof t=="boolean")return t}return e.defaultShouldRevalidate}function KR(r,e,t,n,i){let s;if(r){let l=n[r];tn(l,`No route found to patch children into: routeId = ${r}`),l.children||(l.children=[]),s=l.children}else s=t;let a=e.filter(l=>!s.some(u=>h8(l,u))),o=E_(a,i,[r||"_","patch",String(s?.length||"0")],n);s.push(...o)}function h8(r,e){return"id"in r&&"id"in e&&r.id===e.id?!0:r.index===e.index&&r.path===e.path&&r.caseSensitive===e.caseSensitive?(!r.children||r.children.length===0)&&(!e.children||e.children.length===0)?!0:r.children.every((t,n)=>e.children?.some(i=>h8(t,i))):!1}var XR=new WeakMap,f8=({key:r,route:e,manifest:t,mapRouteProperties:n})=>{let i=t[e.id];if(tn(i,"No route found in manifest"),!i.lazy||typeof i.lazy!="object")return;let s=i.lazy[r];if(!s)return;let a=XR.get(i);a||(a={},XR.set(i,a));let o=a[r];if(o)return o;let l=(async()=>{let u=uG(r),h=i[r]!==void 0&&r!=="hasErrorBoundary";if(u)bi(!u,"Route property "+r+" is not a supported lazy route property. This property will be ignored."),a[r]=Promise.resolve();else if(h)bi(!1,`Route "${i.id}" has a static property "${r}" defined. The lazy property will be ignored.`);else{let f=await s();f!=null&&(Object.assign(i,{[r]:f}),Object.assign(i,n(i)))}typeof i.lazy=="object"&&(i.lazy[r]=void 0,Object.values(i.lazy).every(f=>f===void 0)&&(i.lazy=void 0))})();return a[r]=l,l},YR=new WeakMap;function jG(r,e,t,n,i){let s=t[r.id];if(tn(s,"No route found in manifest"),!r.lazy)return{lazyRoutePromise:void 0,lazyHandlerPromise:void 0};if(typeof r.lazy=="function"){let c=YR.get(s);if(c)return{lazyRoutePromise:c,lazyHandlerPromise:c};let h=(async()=>{tn(typeof r.lazy=="function","No lazy route function found");let f=await r.lazy(),g={};for(let v in f){let y=f[v];if(y===void 0)continue;let _=dG(v),E=s[v]!==void 0&&v!=="hasErrorBoundary";_?bi(!_,"Route property "+v+" is not a supported property to be returned from a lazy route function. This property will be ignored."):E?bi(!E,`Route "${s.id}" has a static property "${v}" defined but its lazy function is also returning a value for this property. The lazy route property "${v}" will be ignored.`):g[v]=y}Object.assign(s,g),Object.assign(s,{...n(s),lazy:void 0})})();return YR.set(s,h),h.catch(()=>{}),{lazyRoutePromise:h,lazyHandlerPromise:h}}let a=Object.keys(r.lazy),o=[],l;for(let c of a){if(i&&i.includes(c))continue;let h=f8({key:c,route:r,manifest:t,mapRouteProperties:n});h&&(o.push(h),c===e&&(l=h))}let u=o.length>0?Promise.all(o).then(()=>{}):void 0;return u?.catch(()=>{}),l?.catch(()=>{}),{lazyRoutePromise:u,lazyHandlerPromise:l}}async function QR(r){let e=r.matches.filter(i=>i.shouldLoad),t={};return(await Promise.all(e.map(i=>i.resolve()))).forEach((i,s)=>{t[e[s].route.id]=i}),t}async function zG(r){return r.matches.some(e=>e.route.unstable_middleware)?p8(r,!1,()=>QR(r),(e,t)=>({[t]:{type:"error",result:e}})):QR(r)}async function p8(r,e,t,n){let{matches:i,request:s,params:a,context:o}=r,l={handlerResult:void 0};try{let u=i.flatMap(h=>h.route.unstable_middleware?h.route.unstable_middleware.map(f=>[h.route.id,f]):[]),c=await m8({request:s,params:a,context:o},u,e,l,t);return e?c:l.handlerResult}catch(u){if(!l.middlewareError)throw u;let c=await n(l.middlewareError.error,l.middlewareError.routeId);return l.handlerResult?Object.assign(l.handlerResult,c):c}}async function m8(r,e,t,n,i,s=0){let{request:a}=r;if(a.signal.aborted)throw a.signal.reason?a.signal.reason:new Error(`Request aborted without an \`AbortSignal.reason\`: ${a.method} ${a.url}`);let o=e[s];if(!o)return n.handlerResult=await i(),n.handlerResult;let[l,u]=o,c=!1,h,f=async()=>{if(c)throw new Error("You may only call `next()` once per middleware");c=!0,await m8(r,e,t,n,i,s+1)};try{let g=await u({request:r.request,params:r.params,context:r.context},f);return c?g===void 0?h:g:f()}catch(g){throw n.middlewareError?n.middlewareError.error!==g&&(n.middlewareError={routeId:l,error:g}):n.middlewareError={routeId:l,error:g},g}}function g8(r,e,t,n,i){let s=f8({key:"unstable_middleware",route:n.route,manifest:e,mapRouteProperties:r}),a=jG(n.route,fo(t.method)?"action":"loader",e,r,i);return{middleware:s,route:a.lazyRoutePromise,handler:a.lazyHandlerPromise}}function Bw(r,e,t,n,i,s,a,o=null){let l=!1,u=g8(r,e,t,n,i);return{...n,_lazyPromises:u,shouldLoad:a,unstable_shouldRevalidateArgs:o,unstable_shouldCallHandler(c){return l=!0,o?typeof c=="boolean"?D_(n,{...o,defaultShouldRevalidate:c}):D_(n,o):a},resolve(c){return l||a||c&&t.method==="GET"&&(n.route.lazy||n.route.loader)?VG({request:t,match:n,lazyHandlerPromise:u?.handler,lazyRoutePromise:u?.route,handlerOverride:c,scopedContext:s}):Promise.resolve({type:"data",result:void 0})}}}function bp(r,e,t,n,i,s,a,o=null){return n.map(l=>l.route.id!==i.route.id?{...l,shouldLoad:!1,unstable_shouldRevalidateArgs:o,unstable_shouldCallHandler:()=>!1,_lazyPromises:g8(r,e,t,l,s),resolve:()=>Promise.resolve({type:"data",result:void 0})}:Bw(r,e,t,l,s,a,!0,o))}async function HG(r,e,t,n,i,s){t.some(u=>u._lazyPromises?.middleware)&&await Promise.all(t.map(u=>u._lazyPromises?.middleware));let a={request:e,params:t[0].params,context:i,matches:t},l=await r({...a,fetcherKey:n,unstable_runClientMiddleware:u=>{let c=a;return p8(c,!1,()=>u({...c,fetcherKey:n,unstable_runClientMiddleware:()=>{throw new Error("Cannot call `unstable_runClientMiddleware()` from within an `unstable_runClientMiddleware` handler")}}),(h,f)=>({[f]:{type:"error",result:h}}))}});try{await Promise.all(t.flatMap(u=>[u._lazyPromises?.handler,u._lazyPromises?.route]))}catch{}return l}async function VG({request:r,match:e,lazyHandlerPromise:t,lazyRoutePromise:n,handlerOverride:i,scopedContext:s}){let a,o,l=fo(r.method),u=l?"action":"loader",c=h=>{let f,g=new Promise((_,C)=>f=C);o=()=>f(),r.signal.addEventListener("abort",o);let v=_=>typeof h!="function"?Promise.reject(new Error(`You cannot call the handler for a route which defines a boolean "${u}" [routeId: ${e.route.id}]`)):h({request:r,params:e.params,context:s},..._!==void 0?[_]:[]),y=(async()=>{try{return{type:"data",result:await(i?i(C=>v(C)):v())}}catch(_){return{type:"error",result:_}}})();return Promise.race([y,g])};try{let h=l?e.route.action:e.route.loader;if(t||n)if(h){let f,[g]=await Promise.all([c(h).catch(v=>{f=v}),t,n]);if(f!==void 0)throw f;a=g}else{await t;let f=l?e.route.action:e.route.loader;if(f)[a]=await Promise.all([c(f),n]);else if(u==="action"){let g=new URL(r.url),v=g.pathname+g.search;throw zo(405,{method:r.method,pathname:v,routeId:e.route.id})}else return{type:"data",result:void 0}}else if(h)a=await c(h);else{let f=new URL(r.url),g=f.pathname+f.search;throw zo(404,{pathname:g})}}catch(h){return{type:"error",result:h}}finally{o&&r.signal.removeEventListener("abort",o)}return a}async function WG(r){let{result:e,type:t}=r;if(y8(e)){let n;try{let i=e.headers.get("Content-Type");i&&/\bapplication\/json\b/.test(i)?e.body==null?n=null:n=await e.json():n=await e.text()}catch(i){return{type:"error",error:i}}return t==="error"?{type:"error",error:new A_(e.status,e.statusText,n),statusCode:e.status,headers:e.headers}:{type:"data",data:n,statusCode:e.status,headers:e.headers}}return t==="error"?iL(e)?e.data instanceof Error?{type:"error",error:e.data,statusCode:e.init?.status,headers:e.init?.headers?new Headers(e.init.headers):void 0}:{type:"error",error:new A_(e.init?.status||500,void 0,e.data),statusCode:Cg(e)?e.status:void 0,headers:e.init?.headers?new Headers(e.init.headers):void 0}:{type:"error",error:e,statusCode:Cg(e)?e.status:void 0}:iL(e)?{type:"data",data:e.data,statusCode:e.init?.status,headers:e.init?.headers?new Headers(e.init.headers):void 0}:{type:"data",data:e}}function qG(r,e,t,n,i){let s=r.headers.get("Location");if(tn(s,"Redirects returned/thrown from loaders/actions must have a Location header"),!zE.test(s)){let a=n.slice(0,n.findIndex(o=>o.route.id===t)+1);s=Mw(new URL(e.url),a,i,s),r.headers.set("Location",s)}return r}function JR(r,e,t){if(zE.test(r)){let n=r,i=n.startsWith("//")?new URL(e.protocol+n):new URL(n),s=el(i.pathname,t)!=null;if(i.origin===e.origin&&s)return i.pathname+i.search+i.hash}return r}function ip(r,e,t,n){let i=r.createURL(v8(e)).toString(),s={signal:t};if(n&&fo(n.formMethod)){let{formMethod:a,formEncType:o}=n;s.method=a.toUpperCase(),o==="application/json"?(s.headers=new Headers({"Content-Type":o}),s.body=JSON.stringify(n.json)):o==="text/plain"?s.body=n.text:o==="application/x-www-form-urlencoded"&&n.formData?s.body=Nw(n.formData):s.body=n.formData}return new Request(i,s)}function Nw(r){let e=new URLSearchParams;for(let[t,n]of r.entries())e.append(t,typeof n=="string"?n:n.name);return e}function ZR(r){let e=new FormData;for(let[t,n]of r.entries())e.append(t,n);return e}function GG(r,e,t,n=!1,i=!1){let s={},a=null,o,l=!1,u={},c=t&&ho(t[1])?t[1].error:void 0;return r.forEach(h=>{if(!(h.route.id in e))return;let f=h.route.id,g=e[f];if(tn(!zh(g),"Cannot handle redirect results in processLoaderData"),ho(g)){let v=g.error;if(c!==void 0&&(v=c,c=void 0),a=a||{},i)a[f]=v;else{let y=Bh(r,f);a[y.route.id]==null&&(a[y.route.id]=v)}n||(s[f]=d8),l||(l=!0,o=Cg(g.error)?g.error.status:500),g.headers&&(u[f]=g.headers)}else s[f]=g.data,g.statusCode&&g.statusCode!==200&&!l&&(o=g.statusCode),g.headers&&(u[f]=g.headers)}),c!==void 0&&t&&(a={[t[0]]:c},t[2]&&(s[t[2]]=void 0)),{loaderData:s,errors:a,statusCode:o||200,loaderHeaders:u}}function eL(r,e,t,n,i,s){let{loaderData:a,errors:o}=GG(e,t,n);return i.filter(l=>!l.matches||l.matches.some(u=>u.shouldLoad)).forEach(l=>{let{key:u,match:c,controller:h}=l,f=s[u];if(tn(f,"Did not find corresponding fetcher result"),!(h&&h.signal.aborted))if(ho(f)){let g=Bh(r.matches,c?.route.id);o&&o[g.route.id]||(o={...o,[g.route.id]:f.error}),r.fetchers.delete(u)}else if(zh(f))tn(!1,"Unhandled fetcher revalidation redirect");else{let g=Td(f.data);r.fetchers.set(u,g)}}),{loaderData:a,errors:o}}function tL(r,e,t,n){let i=Object.entries(e).filter(([,s])=>s!==d8).reduce((s,[a,o])=>(s[a]=o,s),{});for(let s of t){let a=s.route.id;if(!e.hasOwnProperty(a)&&r.hasOwnProperty(a)&&s.route.loader&&(i[a]=r[a]),n&&n.hasOwnProperty(a))break}return i}function rL(r){return r?ho(r[1])?{actionData:{}}:{actionData:{[r[0]]:r[1].data}}:{}}function Bh(r,e){return(e?r.slice(0,r.findIndex(n=>n.route.id===e)+1):[...r]).reverse().find(n=>n.route.hasErrorBoundary===!0)||r[0]}function nL(r){let e=r.length===1?r[0]:r.find(t=>t.index||!t.path||t.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:e}],route:e}}function zo(r,{pathname:e,routeId:t,method:n,type:i,message:s}={}){let a="Unknown Server Error",o="Unknown @remix-run/router error";return r===400?(a="Bad Request",n&&e&&t?o=`You made a ${n} request to "${e}" but did not provide a \`loader\` for route "${t}", so there is no way to handle the request.`:i==="invalid-body"&&(o="Unable to encode submission body")):r===403?(a="Forbidden",o=`Route "${t}" does not match URL "${e}"`):r===404?(a="Not Found",o=`No route matches URL "${e}"`):r===405&&(a="Method Not Allowed",n&&e&&t?o=`You made a ${n.toUpperCase()} request to "${e}" but did not provide an \`action\` for route "${t}", so there is no way to handle the request.`:n&&(o=`Invalid request method "${n.toUpperCase()}"`)),new A_(r||500,a,new Error(o),!0)}function Ty(r){let e=Object.entries(r);for(let t=e.length-1;t>=0;t--){let[n,i]=e[t];if(zh(i))return{key:n,result:i}}}function v8(r){let e=typeof r=="string"?Uc(r):r;return Ud({...e,hash:""})}function KG(r,e){return r.pathname!==e.pathname||r.search!==e.search?!1:r.hash===""?e.hash!=="":r.hash===e.hash?!0:e.hash!==""}function XG(r){return y8(r.result)&&LG.has(r.result.status)}function ho(r){return r.type==="error"}function zh(r){return(r&&r.type)==="redirect"}function iL(r){return typeof r=="object"&&r!=null&&"type"in r&&"data"in r&&"init"in r&&r.type==="DataWithResponseInit"}function y8(r){return r!=null&&typeof r.status=="number"&&typeof r.statusText=="string"&&typeof r.headers=="object"&&typeof r.body<"u"}function YG(r){return RG.has(r.toUpperCase())}function fo(r){return IG.has(r.toUpperCase())}function HE(r){return new URLSearchParams(r).getAll("index").some(e=>e==="")}function U0(r,e){let t=typeof e=="string"?Uc(e).search:e.search;if(r[r.length-1].route.index&&HE(t||""))return r[r.length-1];let n=l8(r);return n[n.length-1]}function sL(r){let{formMethod:e,formAction:t,formEncType:n,text:i,formData:s,json:a}=r;if(!(!e||!t||!n)){if(i!=null)return{formMethod:e,formAction:t,formEncType:n,formData:void 0,json:void 0,text:i};if(s!=null)return{formMethod:e,formAction:t,formEncType:n,formData:s,json:void 0,text:void 0};if(a!==void 0)return{formMethod:e,formAction:t,formEncType:n,formData:void 0,json:a,text:void 0}}}function M1(r,e){return e?{state:"loading",location:r,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}:{state:"loading",location:r,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function QG(r,e){return{state:"submitting",location:r,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}}function g0(r,e){return r?{state:"loading",formMethod:r.formMethod,formAction:r.formAction,formEncType:r.formEncType,formData:r.formData,json:r.json,text:r.text,data:e}:{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:e}}function JG(r,e){return{state:"submitting",formMethod:r.formMethod,formAction:r.formAction,formEncType:r.formEncType,formData:r.formData,json:r.json,text:r.text,data:e?e.data:void 0}}function Td(r){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:r}}function ZG(r,e){try{let t=r.sessionStorage.getItem(c8);if(t){let n=JSON.parse(t);for(let[i,s]of Object.entries(n||{}))s&&Array.isArray(s)&&e.set(i,new Set(s||[]))}}catch{}}function eK(r,e){if(e.size>0){let t={};for(let[n,i]of e)t[n]=[...i];try{r.sessionStorage.setItem(c8,JSON.stringify(t))}catch(n){bi(!1,`Failed to save applied view transitions in sessionStorage (${n}).`)}}}function tK(){let r,e,t=new Promise((n,i)=>{r=async s=>{n(s);try{await t}catch{}},e=async s=>{i(s);try{await t}catch{}}});return{promise:t,resolve:r,reject:e}}var xf=M.createContext(null);xf.displayName="DataRouter";var Jg=M.createContext(null);Jg.displayName="DataRouterState";var VE=M.createContext({isTransitioning:!1});VE.displayName="ViewTransition";var x8=M.createContext(new Map);x8.displayName="Fetchers";var rK=M.createContext(null);rK.displayName="Await";var Wu=M.createContext(null);Wu.displayName="Navigation";var Jb=M.createContext(null);Jb.displayName="Location";var qu=M.createContext({outlet:null,matches:[],isDataRoute:!1});qu.displayName="Route";var WE=M.createContext(null);WE.displayName="RouteError";function nK(r,{relative:e}={}){tn(Zg(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:n}=M.useContext(Wu),{hash:i,pathname:s,search:a}=tv(r,{relative:e}),o=s;return t!=="/"&&(o=s==="/"?t:Du([t,s])),n.createHref({pathname:o,search:a,hash:i})}function Zg(){return M.useContext(Jb)!=null}function Gu(){return tn(Zg(),"useLocation() may be used only in the context of a <Router> component."),M.useContext(Jb).location}var _8="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function b8(r){M.useContext(Wu).static||M.useLayoutEffect(r)}function ev(){let{isDataRoute:r}=M.useContext(qu);return r?yK():iK()}function iK(){tn(Zg(),"useNavigate() may be used only in the context of a <Router> component.");let r=M.useContext(xf),{basename:e,navigator:t}=M.useContext(Wu),{matches:n}=M.useContext(qu),{pathname:i}=Gu(),s=JSON.stringify($E(n)),a=M.useRef(!1);return b8(()=>{a.current=!0}),M.useCallback((l,u={})=>{if(bi(a.current,_8),!a.current)return;if(typeof l=="number"){t.go(l);return}let c=jE(l,JSON.parse(s),i,u.relative==="path");r==null&&e!=="/"&&(c.pathname=c.pathname==="/"?e:Du([e,c.pathname])),(u.replace?t.replace:t.push)(c,u.state,u)},[e,t,s,i,r])}var sK=M.createContext(null);function aK(r){let e=M.useContext(qu).outlet;return e&&M.createElement(sK.Provider,{value:r},e)}function tv(r,{relative:e}={}){let{matches:t}=M.useContext(qu),{pathname:n}=Gu(),i=JSON.stringify($E(t));return M.useMemo(()=>jE(r,JSON.parse(i),n,e==="path"),[r,i,n,e])}function oK(r,e,t,n){tn(Zg(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:i,static:s}=M.useContext(Wu),{matches:a}=M.useContext(qu),o=a[a.length-1],l=o?o.params:{},u=o?o.pathname:"/",c=o?o.pathnameBase:"/",h=o&&o.route;{let E=h&&h.path||"";T8(u,!h||E.endsWith("*")||E.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${u}" (under <Route path="${E}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${E}"> to <Route path="${E==="/"?"*":`${E}/*`}">.`)}let f=Gu(),g;g=f;let v=g.pathname||"/",y=v;if(c!=="/"){let E=c.replace(/^\//,"").split("/");y="/"+v.replace(/^\//,"").split("/").slice(E.length).join("/")}let _=!s&&t&&t.matches&&t.matches.length>0?t.matches:Id(r,{pathname:y});return bi(h||_!=null,`No routes matched location "${g.pathname}${g.search}${g.hash}" `),bi(_==null||_[_.length-1].route.element!==void 0||_[_.length-1].route.Component!==void 0||_[_.length-1].route.lazy!==void 0,`Matched leaf route at location "${g.pathname}${g.search}${g.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`),hK(_&&_.map(E=>Object.assign({},E,{params:Object.assign({},l,E.params),pathname:Du([c,i.encodeLocation?i.encodeLocation(E.pathname).pathname:E.pathname]),pathnameBase:E.pathnameBase==="/"?c:Du([c,i.encodeLocation?i.encodeLocation(E.pathnameBase).pathname:E.pathnameBase])})),a,t,n)}function lK(){let r=vK(),e=Cg(r)?`${r.status} ${r.statusText}`:r instanceof Error?r.message:JSON.stringify(r),t=r instanceof Error?r.stack:null,n="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:n},s={padding:"2px 4px",backgroundColor:n},a=null;return console.error("Error handled by React Router default ErrorBoundary:",r),a=M.createElement(M.Fragment,null,M.createElement("p",null," Hey developer "),M.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",M.createElement("code",{style:s},"ErrorBoundary")," or"," ",M.createElement("code",{style:s},"errorElement")," prop on your route.")),M.createElement(M.Fragment,null,M.createElement("h2",null,"Unexpected Application Error!"),M.createElement("h3",{style:{fontStyle:"italic"}},e),t?M.createElement("pre",{style:i},t):null,a)}var uK=M.createElement(lK,null),cK=class extends M.Component{constructor(r){super(r),this.state={location:r.location,revalidation:r.revalidation,error:r.error}}static getDerivedStateFromError(r){return{error:r}}static getDerivedStateFromProps(r,e){return e.location!==r.location||e.revalidation!=="idle"&&r.revalidation==="idle"?{error:r.error,location:r.location,revalidation:r.revalidation}:{error:r.error!==void 0?r.error:e.error,location:e.location,revalidation:r.revalidation||e.revalidation}}componentDidCatch(r,e){console.error("React Router caught the following error during render",r,e)}render(){return this.state.error!==void 0?M.createElement(qu.Provider,{value:this.props.routeContext},M.createElement(WE.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function dK({routeContext:r,match:e,children:t}){let n=M.useContext(xf);return n&&n.static&&n.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=e.route.id),M.createElement(qu.Provider,{value:r},t)}function hK(r,e=[],t=null,n=null){if(r==null){if(!t)return null;if(t.errors)r=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)r=t.matches;else return null}let i=r,s=t?.errors;if(s!=null){let l=i.findIndex(u=>u.route.id&&s?.[u.route.id]!==void 0);tn(l>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(s).join(",")}`),i=i.slice(0,Math.min(i.length,l+1))}let a=!1,o=-1;if(t)for(let l=0;l<i.length;l++){let u=i[l];if((u.route.HydrateFallback||u.route.hydrateFallbackElement)&&(o=l),u.route.id){let{loaderData:c,errors:h}=t,f=u.route.loader&&!c.hasOwnProperty(u.route.id)&&(!h||h[u.route.id]===void 0);if(u.route.lazy||f){a=!0,o>=0?i=i.slice(0,o+1):i=[i[0]];break}}}return i.reduceRight((l,u,c)=>{let h,f=!1,g=null,v=null;t&&(h=s&&u.route.id?s[u.route.id]:void 0,g=u.route.errorElement||uK,a&&(o<0&&c===0?(T8("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),f=!0,v=null):o===c&&(f=!0,v=u.route.hydrateFallbackElement||null)));let y=e.concat(i.slice(0,c+1)),_=()=>{let C;return h?C=g:f?C=v:u.route.Component?C=M.createElement(u.route.Component,null):u.route.element?C=u.route.element:C=l,M.createElement(dK,{match:u,routeContext:{outlet:l,matches:y,isDataRoute:t!=null},children:C})};return t&&(u.route.ErrorBoundary||u.route.errorElement||c===0)?M.createElement(cK,{location:t.location,revalidation:t.revalidation,component:g,error:h,children:_(),routeContext:{outlet:null,matches:y,isDataRoute:!0}}):_()},null)}function qE(r){return`${r} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function fK(r){let e=M.useContext(xf);return tn(e,qE(r)),e}function S8(r){let e=M.useContext(Jg);return tn(e,qE(r)),e}function pK(r){let e=M.useContext(qu);return tn(e,qE(r)),e}function GE(r){let e=pK(r),t=e.matches[e.matches.length-1];return tn(t.route.id,`${r} can only be used on routes that contain a unique "id"`),t.route.id}function mK(){return GE("useRouteId")}function gK(){let{matches:r,loaderData:e}=S8("useMatches");return M.useMemo(()=>r.map(t=>s8(t,e)),[r,e])}function vK(){let r=M.useContext(WE),e=S8("useRouteError"),t=GE("useRouteError");return r!==void 0?r:e.errors?.[t]}function yK(){let{router:r}=fK("useNavigate"),e=GE("useNavigate"),t=M.useRef(!1);return b8(()=>{t.current=!0}),M.useCallback(async(i,s={})=>{bi(t.current,_8),t.current&&(typeof i=="number"?r.navigate(i):await r.navigate(i,{fromRouteId:e,...s}))},[r,e])}var aL={};function T8(r,e,t){!e&&!aL[r]&&(aL[r]=!0,bi(!1,t))}var oL={};function lL(r,e){!r&&!oL[e]&&(oL[e]=!0,console.warn(e))}function xK(r){let e={hasErrorBoundary:r.hasErrorBoundary||r.ErrorBoundary!=null||r.errorElement!=null};return r.Component&&(r.element&&bi(!1,"You should not include both `Component` and `element` on your route - `Component` will be used."),Object.assign(e,{element:M.createElement(r.Component),Component:void 0})),r.HydrateFallback&&(r.hydrateFallbackElement&&bi(!1,"You should not include both `HydrateFallback` and `hydrateFallbackElement` on your route - `HydrateFallback` will be used."),Object.assign(e,{hydrateFallbackElement:M.createElement(r.HydrateFallback),HydrateFallback:void 0})),r.ErrorBoundary&&(r.errorElement&&bi(!1,"You should not include both `ErrorBoundary` and `errorElement` on your route - `ErrorBoundary` will be used."),Object.assign(e,{errorElement:M.createElement(r.ErrorBoundary),ErrorBoundary:void 0})),e}var _K=["HydrateFallback","hydrateFallbackElement"],bK=class{constructor(){this.status="pending",this.promise=new Promise((r,e)=>{this.resolve=t=>{this.status==="pending"&&(this.status="resolved",r(t))},this.reject=t=>{this.status==="pending"&&(this.status="rejected",e(t))}})}};function SK({router:r,flushSync:e}){let[t,n]=M.useState(r.state),[i,s]=M.useState(),[a,o]=M.useState({isTransitioning:!1}),[l,u]=M.useState(),[c,h]=M.useState(),[f,g]=M.useState(),v=M.useRef(new Map),y=M.useCallback((D,{deletedFetchers:I,flushSync:k,viewTransitionOpts:P})=>{D.fetchers.forEach((U,B)=>{U.data!==void 0&&v.current.set(B,U.data)}),I.forEach(U=>v.current.delete(U)),lL(k===!1||e!=null,'You provided the `flushSync` option to a router update, but you are not using the `<RouterProvider>` from `react-router/dom` so `ReactDOM.flushSync()` is unavailable.  Please update your app to `import { RouterProvider } from "react-router/dom"` and ensure you have `react-dom` installed as a dependency to use the `flushSync` option.');let N=r.window!=null&&r.window.document!=null&&typeof r.window.document.startViewTransition=="function";if(lL(P==null||N,"You provided the `viewTransition` option to a router update, but you do not appear to be running in a DOM environment as `window.startViewTransition` is not available."),!P||!N){e&&k?e(()=>n(D)):M.startTransition(()=>n(D));return}if(e&&k){e(()=>{c&&(l&&l.resolve(),c.skipTransition()),o({isTransitioning:!0,flushSync:!0,currentLocation:P.currentLocation,nextLocation:P.nextLocation})});let U=r.window.document.startViewTransition(()=>{e(()=>n(D))});U.finished.finally(()=>{e(()=>{u(void 0),h(void 0),s(void 0),o({isTransitioning:!1})})}),e(()=>h(U));return}c?(l&&l.resolve(),c.skipTransition(),g({state:D,currentLocation:P.currentLocation,nextLocation:P.nextLocation})):(s(D),o({isTransitioning:!0,flushSync:!1,currentLocation:P.currentLocation,nextLocation:P.nextLocation}))},[r.window,e,c,l]);M.useLayoutEffect(()=>r.subscribe(y),[r,y]),M.useEffect(()=>{a.isTransitioning&&!a.flushSync&&u(new bK)},[a]),M.useEffect(()=>{if(l&&i&&r.window){let D=i,I=l.promise,k=r.window.document.startViewTransition(async()=>{M.startTransition(()=>n(D)),await I});k.finished.finally(()=>{u(void 0),h(void 0),s(void 0),o({isTransitioning:!1})}),h(k)}},[i,l,r.window]),M.useEffect(()=>{l&&i&&t.location.key===i.location.key&&l.resolve()},[l,c,t.location,i]),M.useEffect(()=>{!a.isTransitioning&&f&&(s(f.state),o({isTransitioning:!0,flushSync:!1,currentLocation:f.currentLocation,nextLocation:f.nextLocation}),g(void 0))},[a.isTransitioning,f]);let _=M.useMemo(()=>({createHref:r.createHref,encodeLocation:r.encodeLocation,go:D=>r.navigate(D),push:(D,I,k)=>r.navigate(D,{state:I,preventScrollReset:k?.preventScrollReset}),replace:(D,I,k)=>r.navigate(D,{replace:!0,state:I,preventScrollReset:k?.preventScrollReset})}),[r]),C=r.basename||"/",E=M.useMemo(()=>({router:r,navigator:_,static:!1,basename:C}),[r,_,C]);return M.createElement(M.Fragment,null,M.createElement(xf.Provider,{value:E},M.createElement(Jg.Provider,{value:t},M.createElement(x8.Provider,{value:v.current},M.createElement(VE.Provider,{value:a},M.createElement(EK,{basename:C,location:t.location,navigationType:t.historyAction,navigator:_},M.createElement(TK,{routes:r.routes,future:r.future,state:t})))))),null)}var TK=M.memo(CK);function CK({routes:r,future:e,state:t}){return oK(r,void 0,t,e)}function wK(r){return aK(r.context)}function EK({basename:r="/",children:e=null,location:t,navigationType:n="POP",navigator:i,static:s=!1}){tn(!Zg(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let a=r.replace(/^\/*/,"/"),o=M.useMemo(()=>({basename:a,navigator:i,static:s,future:{}}),[a,i,s]);typeof t=="string"&&(t=Uc(t));let{pathname:l="/",search:u="",hash:c="",state:h=null,key:f="default"}=t,g=M.useMemo(()=>{let v=el(l,a);return v==null?null:{location:{pathname:v,search:u,hash:c,state:h,key:f},navigationType:n}},[a,l,u,c,h,f,n]);return bi(g!=null,`<Router basename="${a}"> is not able to match the URL "${l}${u}${c}" because it does not start with the basename, so the <Router> won't render anything.`),g==null?null:M.createElement(Wu.Provider,{value:o},M.createElement(Jb.Provider,{children:e,value:g}))}var Qx="get",Jx="application/x-www-form-urlencoded";function Zb(r){return r!=null&&typeof r.tagName=="string"}function kK(r){return Zb(r)&&r.tagName.toLowerCase()==="button"}function AK(r){return Zb(r)&&r.tagName.toLowerCase()==="form"}function DK(r){return Zb(r)&&r.tagName.toLowerCase()==="input"}function IK(r){return!!(r.metaKey||r.altKey||r.ctrlKey||r.shiftKey)}function PK(r,e){return r.button===0&&(!e||e==="_self")&&!IK(r)}var Cy=null;function RK(){if(Cy===null)try{new FormData(document.createElement("form"),0),Cy=!1}catch{Cy=!0}return Cy}var LK=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function F1(r){return r!=null&&!LK.has(r)?(bi(!1,`"${r}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Jx}"`),null):r}function OK(r,e){let t,n,i,s,a;if(AK(r)){let o=r.getAttribute("action");n=o?el(o,e):null,t=r.getAttribute("method")||Qx,i=F1(r.getAttribute("enctype"))||Jx,s=new FormData(r)}else if(kK(r)||DK(r)&&(r.type==="submit"||r.type==="image")){let o=r.form;if(o==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let l=r.getAttribute("formaction")||o.getAttribute("action");if(n=l?el(l,e):null,t=r.getAttribute("formmethod")||o.getAttribute("method")||Qx,i=F1(r.getAttribute("formenctype"))||F1(o.getAttribute("enctype"))||Jx,s=new FormData(o,r),!RK()){let{name:u,type:c,value:h}=r;if(c==="image"){let f=u?`${u}.`:"";s.append(`${f}x`,"0"),s.append(`${f}y`,"0")}else u&&s.append(u,h)}}else{if(Zb(r))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=Qx,n=null,i=Jx,a=r}return s&&i==="text/plain"&&(a=s,s=void 0),{action:n,method:t.toLowerCase(),encType:i,formData:s,body:a}}function KE(r,e){if(r===!1||r===null||typeof r>"u")throw new Error(e)}async function MK(r,e){if(r.id in e)return e[r.id];try{let t=await import(r.module);return e[r.id]=t,t}catch(t){return console.error(`Error loading route module \`${r.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function FK(r){return r==null?!1:r.href==null?r.rel==="preload"&&typeof r.imageSrcSet=="string"&&typeof r.imageSizes=="string":typeof r.rel=="string"&&typeof r.href=="string"}async function BK(r,e,t){let n=await Promise.all(r.map(async i=>{let s=e.routes[i.route.id];if(s){let a=await MK(s,t);return a.links?a.links():[]}return[]}));return jK(n.flat(1).filter(FK).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function uL(r,e,t,n,i,s){let a=(l,u)=>t[u]?l.route.id!==t[u].route.id:!0,o=(l,u)=>t[u].pathname!==l.pathname||t[u].route.path?.endsWith("*")&&t[u].params["*"]!==l.params["*"];return s==="assets"?e.filter((l,u)=>a(l,u)||o(l,u)):s==="data"?e.filter((l,u)=>{let c=n.routes[l.route.id];if(!c||!c.hasLoader)return!1;if(a(l,u)||o(l,u))return!0;if(l.route.shouldRevalidate){let h=l.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:t[0]?.params||{},nextUrl:new URL(r,window.origin),nextParams:l.params,defaultShouldRevalidate:!0});if(typeof h=="boolean")return h}return!0}):[]}function NK(r,e,{includeHydrateFallback:t}={}){return UK(r.map(n=>{let i=e.routes[n.route.id];if(!i)return[];let s=[i.module];return i.clientActionModule&&(s=s.concat(i.clientActionModule)),i.clientLoaderModule&&(s=s.concat(i.clientLoaderModule)),t&&i.hydrateFallbackModule&&(s=s.concat(i.hydrateFallbackModule)),i.imports&&(s=s.concat(i.imports)),s}).flat(1))}function UK(r){return[...new Set(r)]}function $K(r){let e={},t=Object.keys(r).sort();for(let n of t)e[n]=r[n];return e}function jK(r,e){let t=new Set;return new Set(e),r.reduce((n,i)=>{let s=JSON.stringify($K(i));return t.has(s)||(t.add(s),n.push({key:s,link:i})),n},[])}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var zK=new Set([100,101,204,205]);function HK(r,e){let t=typeof r=="string"?new URL(r,typeof window>"u"?"server://singlefetch/":window.location.origin):r;return t.pathname==="/"?t.pathname="_root.data":e&&el(t.pathname,e)==="/"?t.pathname=`${e.replace(/\/$/,"")}/_root.data`:t.pathname=`${t.pathname.replace(/\/$/,"")}.data`,t}function C8(){let r=M.useContext(xf);return KE(r,"You must render this element inside a <DataRouterContext.Provider> element"),r}function VK(){let r=M.useContext(Jg);return KE(r,"You must render this element inside a <DataRouterStateContext.Provider> element"),r}var XE=M.createContext(void 0);XE.displayName="FrameworkContext";function w8(){let r=M.useContext(XE);return KE(r,"You must render this element inside a <HydratedRouter> element"),r}function WK(r,e){let t=M.useContext(XE),[n,i]=M.useState(!1),[s,a]=M.useState(!1),{onFocus:o,onBlur:l,onMouseEnter:u,onMouseLeave:c,onTouchStart:h}=e,f=M.useRef(null);M.useEffect(()=>{if(r==="render"&&a(!0),r==="viewport"){let y=C=>{C.forEach(E=>{a(E.isIntersecting)})},_=new IntersectionObserver(y,{threshold:.5});return f.current&&_.observe(f.current),()=>{_.disconnect()}}},[r]),M.useEffect(()=>{if(n){let y=setTimeout(()=>{a(!0)},100);return()=>{clearTimeout(y)}}},[n]);let g=()=>{i(!0)},v=()=>{i(!1),a(!1)};return t?r!=="intent"?[s,f,{}]:[s,f,{onFocus:v0(o,g),onBlur:v0(l,v),onMouseEnter:v0(u,g),onMouseLeave:v0(c,v),onTouchStart:v0(h,g)}]:[!1,f,{}]}function v0(r,e){return t=>{r&&r(t),t.defaultPrevented||e(t)}}function qK({page:r,...e}){let{router:t}=C8(),n=M.useMemo(()=>Id(t.routes,r,t.basename),[t.routes,r,t.basename]);return n?M.createElement(KK,{page:r,matches:n,...e}):null}function GK(r){let{manifest:e,routeModules:t}=w8(),[n,i]=M.useState([]);return M.useEffect(()=>{let s=!1;return BK(r,e,t).then(a=>{s||i(a)}),()=>{s=!0}},[r,e,t]),n}function KK({page:r,matches:e,...t}){let n=Gu(),{manifest:i,routeModules:s}=w8(),{basename:a}=C8(),{loaderData:o,matches:l}=VK(),u=M.useMemo(()=>uL(r,e,l,i,n,"data"),[r,e,l,i,n]),c=M.useMemo(()=>uL(r,e,l,i,n,"assets"),[r,e,l,i,n]),h=M.useMemo(()=>{if(r===n.pathname+n.search+n.hash)return[];let v=new Set,y=!1;if(e.forEach(C=>{let E=i.routes[C.route.id];!E||!E.hasLoader||(!u.some(D=>D.route.id===C.route.id)&&C.route.id in o&&s[C.route.id]?.shouldRevalidate||E.hasClientLoader?y=!0:v.add(C.route.id))}),v.size===0)return[];let _=HK(r,a);return y&&v.size>0&&_.searchParams.set("_routes",e.filter(C=>v.has(C.route.id)).map(C=>C.route.id).join(",")),[_.pathname+_.search]},[a,o,n,i,u,e,r,s]),f=M.useMemo(()=>NK(c,i),[c,i]),g=GK(c);return M.createElement(M.Fragment,null,h.map(v=>M.createElement("link",{key:v,rel:"prefetch",as:"fetch",href:v,...t})),f.map(v=>M.createElement("link",{key:v,rel:"modulepreload",href:v,...t})),g.map(({key:v,link:y})=>M.createElement("link",{key:v,...y})))}function XK(...r){return e=>{r.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var E8=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{E8&&(window.__reactRouterVersion="7.6.0")}catch{}function YK(r,e){return BG({basename:e?.basename,unstable_getContext:e?.unstable_getContext,future:e?.future,history:sG({window:e?.window}),hydrationData:QK(),routes:r,mapRouteProperties:xK,hydrationRouteProperties:_K,dataStrategy:e?.dataStrategy,patchRoutesOnNavigation:e?.patchRoutesOnNavigation,window:e?.window}).initialize()}function QK(){let r=window?.__staticRouterHydrationData;return r&&r.errors&&(r={...r,errors:JK(r.errors)}),r}function JK(r){if(!r)return null;let e=Object.entries(r),t={};for(let[n,i]of e)if(i&&i.__type==="RouteErrorResponse")t[n]=new A_(i.status,i.statusText,i.data,i.internal===!0);else if(i&&i.__type==="Error"){if(i.__subType){let s=window[i.__subType];if(typeof s=="function")try{let a=new s(i.message);a.stack="",t[n]=a}catch{}}if(t[n]==null){let s=new Error(i.message);s.stack="",t[n]=s}}else t[n]=i;return t}var k8=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,A8=M.forwardRef(function({onClick:e,discover:t="render",prefetch:n="none",relative:i,reloadDocument:s,replace:a,state:o,target:l,to:u,preventScrollReset:c,viewTransition:h,...f},g){let{basename:v}=M.useContext(Wu),y=typeof u=="string"&&k8.test(u),_,C=!1;if(typeof u=="string"&&y&&(_=u,E8))try{let B=new URL(window.location.href),A=u.startsWith("//")?new URL(B.protocol+u):new URL(u),$=el(A.pathname,v);A.origin===B.origin&&$!=null?u=$+A.search+A.hash:C=!0}catch{bi(!1,`<Link to="${u}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let E=nK(u,{relative:i}),[D,I,k]=WK(n,f),P=rX(u,{replace:a,state:o,target:l,preventScrollReset:c,relative:i,viewTransition:h});function N(B){e&&e(B),B.defaultPrevented||P(B)}let U=M.createElement("a",{...f,...k,href:_||E,onClick:C||s?e:N,ref:XK(g,I),target:l,"data-discover":!y&&t==="render"?"true":void 0});return D&&!y?M.createElement(M.Fragment,null,U,M.createElement(qK,{page:E})):U});A8.displayName="Link";var ZK=M.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:n="",end:i=!1,style:s,to:a,viewTransition:o,children:l,...u},c){let h=tv(a,{relative:u.relative}),f=Gu(),g=M.useContext(Jg),{navigator:v,basename:y}=M.useContext(Wu),_=g!=null&&oX(h)&&o===!0,C=v.encodeLocation?v.encodeLocation(h).pathname:h.pathname,E=f.pathname,D=g&&g.navigation&&g.navigation.location?g.navigation.location.pathname:null;t||(E=E.toLowerCase(),D=D?D.toLowerCase():null,C=C.toLowerCase()),D&&y&&(D=el(D,y)||D);const I=C!=="/"&&C.endsWith("/")?C.length-1:C.length;let k=E===C||!i&&E.startsWith(C)&&E.charAt(I)==="/",P=D!=null&&(D===C||!i&&D.startsWith(C)&&D.charAt(C.length)==="/"),N={isActive:k,isPending:P,isTransitioning:_},U=k?e:void 0,B;typeof n=="function"?B=n(N):B=[n,k?"active":null,P?"pending":null,_?"transitioning":null].filter(Boolean).join(" ");let A=typeof s=="function"?s(N):s;return M.createElement(A8,{...u,"aria-current":U,className:B,ref:c,style:A,to:a,viewTransition:o},typeof l=="function"?l(N):l)});ZK.displayName="NavLink";var eX=M.forwardRef(({discover:r="render",fetcherKey:e,navigate:t,reloadDocument:n,replace:i,state:s,method:a=Qx,action:o,onSubmit:l,relative:u,preventScrollReset:c,viewTransition:h,...f},g)=>{let v=sX(),y=aX(o,{relative:u}),_=a.toLowerCase()==="get"?"get":"post",C=typeof o=="string"&&k8.test(o),E=D=>{if(l&&l(D),D.defaultPrevented)return;D.preventDefault();let I=D.nativeEvent.submitter,k=I?.getAttribute("formmethod")||a;v(I||D.currentTarget,{fetcherKey:e,method:k,navigate:t,replace:i,state:s,relative:u,preventScrollReset:c,viewTransition:h})};return M.createElement("form",{ref:g,method:_,action:y,onSubmit:n?l:E,...f,"data-discover":!C&&r==="render"?"true":void 0})});eX.displayName="Form";function tX(r){return`${r} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function D8(r){let e=M.useContext(xf);return tn(e,tX(r)),e}function rX(r,{target:e,replace:t,state:n,preventScrollReset:i,relative:s,viewTransition:a}={}){let o=ev(),l=Gu(),u=tv(r,{relative:s});return M.useCallback(c=>{if(PK(c,e)){c.preventDefault();let h=t!==void 0?t:Ud(l)===Ud(u);o(r,{replace:h,state:n,preventScrollReset:i,relative:s,viewTransition:a})}},[l,o,u,t,n,e,r,i,s,a])}var nX=0,iX=()=>`__${String(++nX)}__`;function sX(){let{router:r}=D8("useSubmit"),{basename:e}=M.useContext(Wu),t=mK();return M.useCallback(async(n,i={})=>{let{action:s,method:a,encType:o,formData:l,body:u}=OK(n,e);if(i.navigate===!1){let c=i.fetcherKey||iX();await r.fetch(c,t,i.action||s,{preventScrollReset:i.preventScrollReset,formData:l,body:u,formMethod:i.method||a,formEncType:i.encType||o,flushSync:i.flushSync})}else await r.navigate(i.action||s,{preventScrollReset:i.preventScrollReset,formData:l,body:u,formMethod:i.method||a,formEncType:i.encType||o,replace:i.replace,state:i.state,fromRouteId:t,flushSync:i.flushSync,viewTransition:i.viewTransition})},[r,e,t])}function aX(r,{relative:e}={}){let{basename:t}=M.useContext(Wu),n=M.useContext(qu);tn(n,"useFormAction must be used inside a RouteContext");let[i]=n.matches.slice(-1),s={...tv(r||".",{relative:e})},a=Gu();if(r==null){s.search=a.search;let o=new URLSearchParams(s.search),l=o.getAll("index");if(l.some(c=>c==="")){o.delete("index"),l.filter(h=>h).forEach(h=>o.append("index",h));let c=o.toString();s.search=c?`?${c}`:""}}return(!r||r===".")&&i.route.index&&(s.search=s.search?s.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(s.pathname=s.pathname==="/"?t:Du([t,s.pathname])),Ud(s)}function oX(r,e={}){let t=M.useContext(VE);tn(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:n}=D8("useViewTransitionState"),i=tv(r,{relative:e.relative});if(!t.isTransitioning)return!1;let s=el(t.currentLocation.pathname,n)||t.currentLocation.pathname,a=el(t.nextLocation.pathname,n)||t.nextLocation.pathname;return k_(i.pathname,a)!=null||k_(i.pathname,s)!=null}[...zK];var Go=bB();const wy=da(Go);/**
 * react-router v7.6.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function lX(r){return M.createElement(SK,{flushSync:Go.flushSync,...r})}var B1={exports:{}},N1,cL;function uX(){if(cL)return N1;cL=1;var r="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return N1=r,N1}var U1,dL;function cX(){if(dL)return U1;dL=1;var r=uX();function e(){}function t(){}return t.resetWarningCache=e,U1=function(){function n(a,o,l,u,c,h){if(h!==r){var f=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw f.name="Invariant Violation",f}}n.isRequired=n;function i(){return n}var s={array:n,bigint:n,bool:n,func:n,number:n,object:n,string:n,symbol:n,any:n,arrayOf:i,element:n,elementType:n,instanceOf:i,node:n,objectOf:i,oneOf:i,oneOfType:i,shape:i,exact:i,checkPropTypes:t,resetWarningCache:e};return s.PropTypes=s,s},U1}var hL;function dX(){return hL||(hL=1,B1.exports=cX()()),B1.exports}var hX=dX();const kl=da(hX);function I8(r){var e,t,n="";if(typeof r=="string"||typeof r=="number")n+=r;else if(typeof r=="object")if(Array.isArray(r)){var i=r.length;for(e=0;e<i;e++)r[e]&&(t=I8(r[e]))&&(n&&(n+=" "),n+=t)}else for(t in r)r[t]&&(n&&(n+=" "),n+=t);return n}function Dt(){for(var r,e,t=0,n="",i=arguments.length;t<i;t++)(r=arguments[t])&&(e=I8(r))&&(n&&(n+=" "),n+=e);return n}function Zt(r,e,t=void 0){const n={};for(const i in r){const s=r[i];let a="",o=!0;for(let l=0;l<s.length;l+=1){const u=s[l];u&&(a+=(o===!0?"":" ")+e(u),o=!1,t&&t[u]&&(a+=" "+t[u]))}n[i]=a}return n}function Uw(r,...e){const t=new URL(`https://mui.com/production-error/?code=${r}`);return e.forEach(n=>t.searchParams.append("args[]",n)),`Minified MUI error #${r}; visit ${t} for the full message.`}function P8(r){if(typeof r!="string")throw new Error(Uw(7));return r.charAt(0).toUpperCase()+r.slice(1)}var $1={exports:{}},Ln={};/**
 * @license React
 * react-is.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fL;function fX(){if(fL)return Ln;fL=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),s=Symbol.for("react.consumer"),a=Symbol.for("react.context"),o=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),u=Symbol.for("react.suspense_list"),c=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),f=Symbol.for("react.view_transition"),g=Symbol.for("react.client.reference");function v(y){if(typeof y=="object"&&y!==null){var _=y.$$typeof;switch(_){case r:switch(y=y.type,y){case t:case i:case n:case l:case u:case f:return y;default:switch(y=y&&y.$$typeof,y){case a:case o:case h:case c:return y;case s:return y;default:return _}}case e:return _}}}return Ln.ContextConsumer=s,Ln.ContextProvider=a,Ln.Element=r,Ln.ForwardRef=o,Ln.Fragment=t,Ln.Lazy=h,Ln.Memo=c,Ln.Portal=e,Ln.Profiler=i,Ln.StrictMode=n,Ln.Suspense=l,Ln.SuspenseList=u,Ln.isContextConsumer=function(y){return v(y)===s},Ln.isContextProvider=function(y){return v(y)===a},Ln.isElement=function(y){return typeof y=="object"&&y!==null&&y.$$typeof===r},Ln.isForwardRef=function(y){return v(y)===o},Ln.isFragment=function(y){return v(y)===t},Ln.isLazy=function(y){return v(y)===h},Ln.isMemo=function(y){return v(y)===c},Ln.isPortal=function(y){return v(y)===e},Ln.isProfiler=function(y){return v(y)===i},Ln.isStrictMode=function(y){return v(y)===n},Ln.isSuspense=function(y){return v(y)===l},Ln.isSuspenseList=function(y){return v(y)===u},Ln.isValidElementType=function(y){return typeof y=="string"||typeof y=="function"||y===t||y===i||y===n||y===l||y===u||typeof y=="object"&&y!==null&&(y.$$typeof===h||y.$$typeof===c||y.$$typeof===a||y.$$typeof===s||y.$$typeof===o||y.$$typeof===g||y.getModuleId!==void 0)},Ln.typeOf=v,Ln}var pL;function pX(){return pL||(pL=1,$1.exports=fX()),$1.exports}var eS=pX();function Pd(r){if(typeof r!="object"||r===null)return!1;const e=Object.getPrototypeOf(r);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in r)&&!(Symbol.iterator in r)}function R8(r){if(M.isValidElement(r)||eS.isValidElementType(r)||!Pd(r))return r;const e={};return Object.keys(r).forEach(t=>{e[t]=R8(r[t])}),e}function Ic(r,e,t={clone:!0}){const n=t.clone?{...r}:r;return Pd(r)&&Pd(e)&&Object.keys(e).forEach(i=>{M.isValidElement(e[i])||eS.isValidElementType(e[i])?n[i]=e[i]:Pd(e[i])&&Object.prototype.hasOwnProperty.call(r,i)&&Pd(r[i])?n[i]=Ic(r[i],e[i],t):t.clone?n[i]=Pd(e[i])?R8(e[i]):e[i]:n[i]=e[i]}),n}function Z0(r,e){return e?Ic(r,e,{clone:!1}):r}function mX(r,e){if(!r.containerQueries)return e;const t=Object.keys(e).filter(n=>n.startsWith("@container")).sort((n,i)=>{const s=/min-width:\s*([0-9.]+)/;return+(n.match(s)?.[1]||0)-+(i.match(s)?.[1]||0)});return t.length?t.reduce((n,i)=>{const s=e[i];return delete n[i],n[i]=s,n},{...e}):e}function gX(r,e){return e==="@"||e.startsWith("@")&&(r.some(t=>e.startsWith(`@${t}`))||!!e.match(/^@\d/))}function vX(r,e){const t=e.match(/^@([^/]+)?\/?(.+)?$/);if(!t)return null;const[,n,i]=t,s=Number.isNaN(+n)?n||0:+n;return r.containerQueries(i).up(s)}function yX(r){const e=(s,a)=>s.replace("@media",a?`@container ${a}`:"@container");function t(s,a){s.up=(...o)=>e(r.breakpoints.up(...o),a),s.down=(...o)=>e(r.breakpoints.down(...o),a),s.between=(...o)=>e(r.breakpoints.between(...o),a),s.only=(...o)=>e(r.breakpoints.only(...o),a),s.not=(...o)=>{const l=e(r.breakpoints.not(...o),a);return l.includes("not all and")?l.replace("not all and ","").replace("min-width:","width<").replace("max-width:","width>").replace("and","or"):l}}const n={},i=s=>(t(n,s),n);return t(i),{...r,containerQueries:i}}const tS={xs:0,sm:600,md:900,lg:1200,xl:1536},mL={keys:["xs","sm","md","lg","xl"],up:r=>`@media (min-width:${tS[r]}px)`},xX={containerQueries:r=>({up:e=>{let t=typeof e=="number"?e:tS[e]||e;return typeof t=="number"&&(t=`${t}px`),r?`@container ${r} (min-width:${t})`:`@container (min-width:${t})`}})};function Ol(r,e,t){const n=r.theme||{};if(Array.isArray(e)){const s=n.breakpoints||mL;return e.reduce((a,o,l)=>(a[s.up(s.keys[l])]=t(e[l]),a),{})}if(typeof e=="object"){const s=n.breakpoints||mL;return Object.keys(e).reduce((a,o)=>{if(gX(s.keys,o)){const l=vX(n.containerQueries?n:xX,o);l&&(a[l]=t(e[o],o))}else if(Object.keys(s.values||tS).includes(o)){const l=s.up(o);a[l]=t(e[o],o)}else{const l=o;a[l]=e[l]}return a},{})}return t(e)}function L8(r={}){return r.keys?.reduce((t,n)=>{const i=r.up(n);return t[i]={},t},{})||{}}function O8(r,e){return r.reduce((t,n)=>{const i=t[n];return(!i||Object.keys(i).length===0)&&delete t[n],t},e)}function _X(r,...e){const t=L8(r),n=[t,...e].reduce((i,s)=>Ic(i,s),{});return O8(Object.keys(t),n)}function bX(r,e){if(typeof r!="object")return{};const t={},n=Object.keys(e);return Array.isArray(r)?n.forEach((i,s)=>{s<r.length&&(t[i]=!0)}):n.forEach(i=>{r[i]!=null&&(t[i]=!0)}),t}function j1({values:r,breakpoints:e,base:t}){const n=t||bX(r,e),i=Object.keys(n);if(i.length===0)return r;let s;return i.reduce((a,o,l)=>(Array.isArray(r)?(a[o]=r[l]!=null?r[l]:r[s],s=l):typeof r=="object"?(a[o]=r[o]!=null?r[o]:r[s],s=o):a[o]=r,a),{})}function rS(r,e,t=!0){if(!e||typeof e!="string")return null;if(r&&r.vars&&t){const n=`vars.${e}`.split(".").reduce((i,s)=>i&&i[s]?i[s]:null,r);if(n!=null)return n}return e.split(".").reduce((n,i)=>n&&n[i]!=null?n[i]:null,r)}function I_(r,e,t,n=t){let i;return typeof r=="function"?i=r(t):Array.isArray(r)?i=r[t]||n:i=rS(r,t)||n,e&&(i=e(i,n,r)),i}function Si(r){const{prop:e,cssProperty:t=r.prop,themeKey:n,transform:i}=r,s=a=>{if(a[e]==null)return null;const o=a[e],l=a.theme,u=rS(l,n)||{};return Ol(a,o,h=>{let f=I_(u,i,h);return h===f&&typeof h=="string"&&(f=I_(u,i,`${e}${h==="default"?"":P8(h)}`,h)),t===!1?f:{[t]:f}})};return s.propTypes={},s.filterProps=[e],s}function SX(r){const e={};return t=>(e[t]===void 0&&(e[t]=r(t)),e[t])}const TX={m:"margin",p:"padding"},CX={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},gL={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},wX=SX(r=>{if(r.length>2)if(gL[r])r=gL[r];else return[r];const[e,t]=r.split(""),n=TX[e],i=CX[t]||"";return Array.isArray(i)?i.map(s=>n+s):[n+i]}),YE=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],QE=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"];[...YE,...QE];function rv(r,e,t,n){const i=rS(r,e,!0)??t;return typeof i=="number"||typeof i=="string"?s=>typeof s=="string"?s:typeof i=="string"?i.startsWith("var(")&&s===0?0:i.startsWith("var(")&&s===1?i:`calc(${s} * ${i})`:i*s:Array.isArray(i)?s=>{if(typeof s=="string")return s;const a=Math.abs(s),o=i[a];return s>=0?o:typeof o=="number"?-o:typeof o=="string"&&o.startsWith("var(")?`calc(-1 * ${o})`:`-${o}`}:typeof i=="function"?i:()=>{}}function nS(r){return rv(r,"spacing",8)}function df(r,e){return typeof e=="string"||e==null?e:r(e)}function EX(r,e){return t=>r.reduce((n,i)=>(n[i]=df(e,t),n),{})}function kX(r,e,t,n){if(!e.includes(t))return null;const i=wX(t),s=EX(i,n),a=r[t];return Ol(r,a,s)}function M8(r,e){const t=nS(r.theme);return Object.keys(r).map(n=>kX(r,e,n,t)).reduce(Z0,{})}function oi(r){return M8(r,YE)}oi.propTypes={};oi.filterProps=YE;function li(r){return M8(r,QE)}li.propTypes={};li.filterProps=QE;function iS(...r){const e=r.reduce((n,i)=>(i.filterProps.forEach(s=>{n[s]=i}),n),{}),t=n=>Object.keys(n).reduce((i,s)=>e[s]?Z0(i,e[s](n)):i,{});return t.propTypes={},t.filterProps=r.reduce((n,i)=>n.concat(i.filterProps),[]),t}function qo(r){return typeof r!="number"?r:`${r}px solid`}function ol(r,e){return Si({prop:r,themeKey:"borders",transform:e})}const AX=ol("border",qo),DX=ol("borderTop",qo),IX=ol("borderRight",qo),PX=ol("borderBottom",qo),RX=ol("borderLeft",qo),LX=ol("borderColor"),OX=ol("borderTopColor"),MX=ol("borderRightColor"),FX=ol("borderBottomColor"),BX=ol("borderLeftColor"),NX=ol("outline",qo),UX=ol("outlineColor"),sS=r=>{if(r.borderRadius!==void 0&&r.borderRadius!==null){const e=rv(r.theme,"shape.borderRadius",4),t=n=>({borderRadius:df(e,n)});return Ol(r,r.borderRadius,t)}return null};sS.propTypes={};sS.filterProps=["borderRadius"];iS(AX,DX,IX,PX,RX,LX,OX,MX,FX,BX,sS,NX,UX);const aS=r=>{if(r.gap!==void 0&&r.gap!==null){const e=rv(r.theme,"spacing",8),t=n=>({gap:df(e,n)});return Ol(r,r.gap,t)}return null};aS.propTypes={};aS.filterProps=["gap"];const oS=r=>{if(r.columnGap!==void 0&&r.columnGap!==null){const e=rv(r.theme,"spacing",8),t=n=>({columnGap:df(e,n)});return Ol(r,r.columnGap,t)}return null};oS.propTypes={};oS.filterProps=["columnGap"];const lS=r=>{if(r.rowGap!==void 0&&r.rowGap!==null){const e=rv(r.theme,"spacing",8),t=n=>({rowGap:df(e,n)});return Ol(r,r.rowGap,t)}return null};lS.propTypes={};lS.filterProps=["rowGap"];const $X=Si({prop:"gridColumn"}),jX=Si({prop:"gridRow"}),zX=Si({prop:"gridAutoFlow"}),HX=Si({prop:"gridAutoColumns"}),VX=Si({prop:"gridAutoRows"}),WX=Si({prop:"gridTemplateColumns"}),qX=Si({prop:"gridTemplateRows"}),GX=Si({prop:"gridTemplateAreas"}),KX=Si({prop:"gridArea"});iS(aS,oS,lS,$X,jX,zX,HX,VX,WX,qX,GX,KX);function Sp(r,e){return e==="grey"?e:r}const XX=Si({prop:"color",themeKey:"palette",transform:Sp}),YX=Si({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette",transform:Sp}),QX=Si({prop:"backgroundColor",themeKey:"palette",transform:Sp});iS(XX,YX,QX);function po(r){return r<=1&&r!==0?`${r*100}%`:r}const JX=Si({prop:"width",transform:po}),JE=r=>{if(r.maxWidth!==void 0&&r.maxWidth!==null){const e=t=>{const n=r.theme?.breakpoints?.values?.[t]||tS[t];return n?r.theme?.breakpoints?.unit!=="px"?{maxWidth:`${n}${r.theme.breakpoints.unit}`}:{maxWidth:n}:{maxWidth:po(t)}};return Ol(r,r.maxWidth,e)}return null};JE.filterProps=["maxWidth"];const ZX=Si({prop:"minWidth",transform:po}),eY=Si({prop:"height",transform:po}),tY=Si({prop:"maxHeight",transform:po}),rY=Si({prop:"minHeight",transform:po});Si({prop:"size",cssProperty:"width",transform:po});Si({prop:"size",cssProperty:"height",transform:po});const nY=Si({prop:"boxSizing"});iS(JX,JE,ZX,eY,tY,rY,nY);const nv={border:{themeKey:"borders",transform:qo},borderTop:{themeKey:"borders",transform:qo},borderRight:{themeKey:"borders",transform:qo},borderBottom:{themeKey:"borders",transform:qo},borderLeft:{themeKey:"borders",transform:qo},borderColor:{themeKey:"palette"},borderTopColor:{themeKey:"palette"},borderRightColor:{themeKey:"palette"},borderBottomColor:{themeKey:"palette"},borderLeftColor:{themeKey:"palette"},outline:{themeKey:"borders",transform:qo},outlineColor:{themeKey:"palette"},borderRadius:{themeKey:"shape.borderRadius",style:sS},color:{themeKey:"palette",transform:Sp},bgcolor:{themeKey:"palette",cssProperty:"backgroundColor",transform:Sp},backgroundColor:{themeKey:"palette",transform:Sp},p:{style:li},pt:{style:li},pr:{style:li},pb:{style:li},pl:{style:li},px:{style:li},py:{style:li},padding:{style:li},paddingTop:{style:li},paddingRight:{style:li},paddingBottom:{style:li},paddingLeft:{style:li},paddingX:{style:li},paddingY:{style:li},paddingInline:{style:li},paddingInlineStart:{style:li},paddingInlineEnd:{style:li},paddingBlock:{style:li},paddingBlockStart:{style:li},paddingBlockEnd:{style:li},m:{style:oi},mt:{style:oi},mr:{style:oi},mb:{style:oi},ml:{style:oi},mx:{style:oi},my:{style:oi},margin:{style:oi},marginTop:{style:oi},marginRight:{style:oi},marginBottom:{style:oi},marginLeft:{style:oi},marginX:{style:oi},marginY:{style:oi},marginInline:{style:oi},marginInlineStart:{style:oi},marginInlineEnd:{style:oi},marginBlock:{style:oi},marginBlockStart:{style:oi},marginBlockEnd:{style:oi},displayPrint:{cssProperty:!1,transform:r=>({"@media print":{display:r}})},display:{},overflow:{},textOverflow:{},visibility:{},whiteSpace:{},flexBasis:{},flexDirection:{},flexWrap:{},justifyContent:{},alignItems:{},alignContent:{},order:{},flex:{},flexGrow:{},flexShrink:{},alignSelf:{},justifyItems:{},justifySelf:{},gap:{style:aS},rowGap:{style:lS},columnGap:{style:oS},gridColumn:{},gridRow:{},gridAutoFlow:{},gridAutoColumns:{},gridAutoRows:{},gridTemplateColumns:{},gridTemplateRows:{},gridTemplateAreas:{},gridArea:{},position:{},zIndex:{themeKey:"zIndex"},top:{},right:{},bottom:{},left:{},boxShadow:{themeKey:"shadows"},width:{transform:po},maxWidth:{style:JE},minWidth:{transform:po},height:{transform:po},maxHeight:{transform:po},minHeight:{transform:po},boxSizing:{},font:{themeKey:"font"},fontFamily:{themeKey:"typography"},fontSize:{themeKey:"typography"},fontStyle:{themeKey:"typography"},fontWeight:{themeKey:"typography"},letterSpacing:{},textTransform:{},lineHeight:{},textAlign:{},typography:{cssProperty:!1,themeKey:"typography"}};function iY(...r){const e=r.reduce((n,i)=>n.concat(Object.keys(i)),[]),t=new Set(e);return r.every(n=>t.size===Object.keys(n).length)}function sY(r,e){return typeof r=="function"?r(e):r}function aY(){function r(t,n,i,s){const a={[t]:n,theme:i},o=s[t];if(!o)return{[t]:n};const{cssProperty:l=t,themeKey:u,transform:c,style:h}=o;if(n==null)return null;if(u==="typography"&&n==="inherit")return{[t]:n};const f=rS(i,u)||{};return h?h(a):Ol(a,n,v=>{let y=I_(f,c,v);return v===y&&typeof v=="string"&&(y=I_(f,c,`${t}${v==="default"?"":P8(v)}`,v)),l===!1?y:{[l]:y}})}function e(t){const{sx:n,theme:i={}}=t||{};if(!n)return null;const s=i.unstable_sxConfig??nv;function a(o){let l=o;if(typeof o=="function")l=o(i);else if(typeof o!="object")return o;if(!l)return null;const u=L8(i.breakpoints),c=Object.keys(u);let h=u;return Object.keys(l).forEach(f=>{const g=sY(l[f],i);if(g!=null)if(typeof g=="object")if(s[f])h=Z0(h,r(f,g,i,s));else{const v=Ol({theme:i},g,y=>({[f]:y}));iY(v,g)?h[f]=e({sx:g,theme:i}):h=Z0(h,v)}else h=Z0(h,r(f,g,i,s))}),mX(i,O8(c,h))}return Array.isArray(n)?n.map(a):a(n)}return e}const $d=aY();$d.filterProps=["sx"];const oY=r=>{const e={systemProps:{},otherProps:{}},t=r?.theme?.unstable_sxConfig??nv;return Object.keys(r).forEach(n=>{t[n]?e.systemProps[n]=r[n]:e.otherProps[n]=r[n]}),e};function uS(r){const{sx:e,...t}=r,{systemProps:n,otherProps:i}=oY(t);let s;return Array.isArray(e)?s=[n,...e]:typeof e=="function"?s=(...a)=>{const o=e(...a);return Pd(o)?{...n,...o}:n}:s={...n,...e},{...i,sx:s}}function sr(){return sr=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)({}).hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},sr.apply(null,arguments)}function lY(r){if(r.sheet)return r.sheet;for(var e=0;e<document.styleSheets.length;e++)if(document.styleSheets[e].ownerNode===r)return document.styleSheets[e]}function uY(r){var e=document.createElement("style");return e.setAttribute("data-emotion",r.key),r.nonce!==void 0&&e.setAttribute("nonce",r.nonce),e.appendChild(document.createTextNode("")),e.setAttribute("data-s",""),e}var cY=(function(){function r(t){var n=this;this._insertTag=function(i){var s;n.tags.length===0?n.insertionPoint?s=n.insertionPoint.nextSibling:n.prepend?s=n.container.firstChild:s=n.before:s=n.tags[n.tags.length-1].nextSibling,n.container.insertBefore(i,s),n.tags.push(i)},this.isSpeedy=t.speedy===void 0?!0:t.speedy,this.tags=[],this.ctr=0,this.nonce=t.nonce,this.key=t.key,this.container=t.container,this.prepend=t.prepend,this.insertionPoint=t.insertionPoint,this.before=null}var e=r.prototype;return e.hydrate=function(n){n.forEach(this._insertTag)},e.insert=function(n){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(uY(this));var i=this.tags[this.tags.length-1];if(this.isSpeedy){var s=lY(i);try{s.insertRule(n,s.cssRules.length)}catch{}}else i.appendChild(document.createTextNode(n));this.ctr++},e.flush=function(){this.tags.forEach(function(n){var i;return(i=n.parentNode)==null?void 0:i.removeChild(n)}),this.tags=[],this.ctr=0},r})(),Bs="-ms-",P_="-moz-",Sn="-webkit-",F8="comm",ZE="rule",ek="decl",dY="@import",B8="@keyframes",hY="@layer",fY=Math.abs,cS=String.fromCharCode,pY=Object.assign;function mY(r,e){return ys(r,0)^45?(((e<<2^ys(r,0))<<2^ys(r,1))<<2^ys(r,2))<<2^ys(r,3):0}function N8(r){return r.trim()}function gY(r,e){return(r=e.exec(r))?r[0]:r}function Tn(r,e,t){return r.replace(e,t)}function $w(r,e){return r.indexOf(e)}function ys(r,e){return r.charCodeAt(e)|0}function wg(r,e,t){return r.slice(e,t)}function fu(r){return r.length}function tk(r){return r.length}function Ey(r,e){return e.push(r),r}function vY(r,e){return r.map(e).join("")}var dS=1,jp=1,U8=0,za=0,Ai=0,xm="";function hS(r,e,t,n,i,s,a){return{value:r,root:e,parent:t,type:n,props:i,children:s,line:dS,column:jp,length:a,return:""}}function y0(r,e){return pY(hS("",null,null,"",null,null,0),r,{length:-r.length},e)}function yY(){return Ai}function xY(){return Ai=za>0?ys(xm,--za):0,jp--,Ai===10&&(jp=1,dS--),Ai}function go(){return Ai=za<U8?ys(xm,za++):0,jp++,Ai===10&&(jp=1,dS++),Ai}function Iu(){return ys(xm,za)}function Zx(){return za}function iv(r,e){return wg(xm,r,e)}function Eg(r){switch(r){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function $8(r){return dS=jp=1,U8=fu(xm=r),za=0,[]}function j8(r){return xm="",r}function e_(r){return N8(iv(za-1,jw(r===91?r+2:r===40?r+1:r)))}function _Y(r){for(;(Ai=Iu())&&Ai<33;)go();return Eg(r)>2||Eg(Ai)>3?"":" "}function bY(r,e){for(;--e&&go()&&!(Ai<48||Ai>102||Ai>57&&Ai<65||Ai>70&&Ai<97););return iv(r,Zx()+(e<6&&Iu()==32&&go()==32))}function jw(r){for(;go();)switch(Ai){case r:return za;case 34:case 39:r!==34&&r!==39&&jw(Ai);break;case 40:r===41&&jw(r);break;case 92:go();break}return za}function SY(r,e){for(;go()&&r+Ai!==57;)if(r+Ai===84&&Iu()===47)break;return"/*"+iv(e,za-1)+"*"+cS(r===47?r:go())}function TY(r){for(;!Eg(Iu());)go();return iv(r,za)}function CY(r){return j8(t_("",null,null,null,[""],r=$8(r),0,[0],r))}function t_(r,e,t,n,i,s,a,o,l){for(var u=0,c=0,h=a,f=0,g=0,v=0,y=1,_=1,C=1,E=0,D="",I=i,k=s,P=n,N=D;_;)switch(v=E,E=go()){case 40:if(v!=108&&ys(N,h-1)==58){$w(N+=Tn(e_(E),"&","&\f"),"&\f")!=-1&&(C=-1);break}case 34:case 39:case 91:N+=e_(E);break;case 9:case 10:case 13:case 32:N+=_Y(v);break;case 92:N+=bY(Zx()-1,7);continue;case 47:switch(Iu()){case 42:case 47:Ey(wY(SY(go(),Zx()),e,t),l);break;default:N+="/"}break;case 123*y:o[u++]=fu(N)*C;case 125*y:case 59:case 0:switch(E){case 0:case 125:_=0;case 59+c:C==-1&&(N=Tn(N,/\f/g,"")),g>0&&fu(N)-h&&Ey(g>32?yL(N+";",n,t,h-1):yL(Tn(N," ","")+";",n,t,h-2),l);break;case 59:N+=";";default:if(Ey(P=vL(N,e,t,u,c,i,o,D,I=[],k=[],h),s),E===123)if(c===0)t_(N,e,P,P,I,s,h,o,k);else switch(f===99&&ys(N,3)===110?100:f){case 100:case 108:case 109:case 115:t_(r,P,P,n&&Ey(vL(r,P,P,0,0,i,o,D,i,I=[],h),k),i,k,h,o,n?I:k);break;default:t_(N,P,P,P,[""],k,0,o,k)}}u=c=g=0,y=C=1,D=N="",h=a;break;case 58:h=1+fu(N),g=v;default:if(y<1){if(E==123)--y;else if(E==125&&y++==0&&xY()==125)continue}switch(N+=cS(E),E*y){case 38:C=c>0?1:(N+="\f",-1);break;case 44:o[u++]=(fu(N)-1)*C,C=1;break;case 64:Iu()===45&&(N+=e_(go())),f=Iu(),c=h=fu(D=N+=TY(Zx())),E++;break;case 45:v===45&&fu(N)==2&&(y=0)}}return s}function vL(r,e,t,n,i,s,a,o,l,u,c){for(var h=i-1,f=i===0?s:[""],g=tk(f),v=0,y=0,_=0;v<n;++v)for(var C=0,E=wg(r,h+1,h=fY(y=a[v])),D=r;C<g;++C)(D=N8(y>0?f[C]+" "+E:Tn(E,/&\f/g,f[C])))&&(l[_++]=D);return hS(r,e,t,i===0?ZE:o,l,u,c)}function wY(r,e,t){return hS(r,e,t,F8,cS(yY()),wg(r,2,-2),0)}function yL(r,e,t,n){return hS(r,e,t,ek,wg(r,0,n),wg(r,n+1,-1),n)}function Tp(r,e){for(var t="",n=tk(r),i=0;i<n;i++)t+=e(r[i],i,r,e)||"";return t}function EY(r,e,t,n){switch(r.type){case hY:if(r.children.length)break;case dY:case ek:return r.return=r.return||r.value;case F8:return"";case B8:return r.return=r.value+"{"+Tp(r.children,n)+"}";case ZE:r.value=r.props.join(",")}return fu(t=Tp(r.children,n))?r.return=r.value+"{"+t+"}":""}function kY(r){var e=tk(r);return function(t,n,i,s){for(var a="",o=0;o<e;o++)a+=r[o](t,n,i,s)||"";return a}}function AY(r){return function(e){e.root||(e=e.return)&&r(e)}}function z8(r){var e=Object.create(null);return function(t){return e[t]===void 0&&(e[t]=r(t)),e[t]}}var DY=function(e,t,n){for(var i=0,s=0;i=s,s=Iu(),i===38&&s===12&&(t[n]=1),!Eg(s);)go();return iv(e,za)},IY=function(e,t){var n=-1,i=44;do switch(Eg(i)){case 0:i===38&&Iu()===12&&(t[n]=1),e[n]+=DY(za-1,t,n);break;case 2:e[n]+=e_(i);break;case 4:if(i===44){e[++n]=Iu()===58?"&\f":"",t[n]=e[n].length;break}default:e[n]+=cS(i)}while(i=go());return e},PY=function(e,t){return j8(IY($8(e),t))},xL=new WeakMap,RY=function(e){if(!(e.type!=="rule"||!e.parent||e.length<1)){for(var t=e.value,n=e.parent,i=e.column===n.column&&e.line===n.line;n.type!=="rule";)if(n=n.parent,!n)return;if(!(e.props.length===1&&t.charCodeAt(0)!==58&&!xL.get(n))&&!i){xL.set(e,!0);for(var s=[],a=PY(t,s),o=n.props,l=0,u=0;l<a.length;l++)for(var c=0;c<o.length;c++,u++)e.props[u]=s[l]?a[l].replace(/&\f/g,o[c]):o[c]+" "+a[l]}}},LY=function(e){if(e.type==="decl"){var t=e.value;t.charCodeAt(0)===108&&t.charCodeAt(2)===98&&(e.return="",e.value="")}};function H8(r,e){switch(mY(r,e)){case 5103:return Sn+"print-"+r+r;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return Sn+r+r;case 5349:case 4246:case 4810:case 6968:case 2756:return Sn+r+P_+r+Bs+r+r;case 6828:case 4268:return Sn+r+Bs+r+r;case 6165:return Sn+r+Bs+"flex-"+r+r;case 5187:return Sn+r+Tn(r,/(\w+).+(:[^]+)/,Sn+"box-$1$2"+Bs+"flex-$1$2")+r;case 5443:return Sn+r+Bs+"flex-item-"+Tn(r,/flex-|-self/,"")+r;case 4675:return Sn+r+Bs+"flex-line-pack"+Tn(r,/align-content|flex-|-self/,"")+r;case 5548:return Sn+r+Bs+Tn(r,"shrink","negative")+r;case 5292:return Sn+r+Bs+Tn(r,"basis","preferred-size")+r;case 6060:return Sn+"box-"+Tn(r,"-grow","")+Sn+r+Bs+Tn(r,"grow","positive")+r;case 4554:return Sn+Tn(r,/([^-])(transform)/g,"$1"+Sn+"$2")+r;case 6187:return Tn(Tn(Tn(r,/(zoom-|grab)/,Sn+"$1"),/(image-set)/,Sn+"$1"),r,"")+r;case 5495:case 3959:return Tn(r,/(image-set\([^]*)/,Sn+"$1$`$1");case 4968:return Tn(Tn(r,/(.+:)(flex-)?(.*)/,Sn+"box-pack:$3"+Bs+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+Sn+r+r;case 4095:case 3583:case 4068:case 2532:return Tn(r,/(.+)-inline(.+)/,Sn+"$1$2")+r;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(fu(r)-1-e>6)switch(ys(r,e+1)){case 109:if(ys(r,e+4)!==45)break;case 102:return Tn(r,/(.+:)(.+)-([^]+)/,"$1"+Sn+"$2-$3$1"+P_+(ys(r,e+3)==108?"$3":"$2-$3"))+r;case 115:return~$w(r,"stretch")?H8(Tn(r,"stretch","fill-available"),e)+r:r}break;case 4949:if(ys(r,e+1)!==115)break;case 6444:switch(ys(r,fu(r)-3-(~$w(r,"!important")&&10))){case 107:return Tn(r,":",":"+Sn)+r;case 101:return Tn(r,/(.+:)([^;!]+)(;|!.+)?/,"$1"+Sn+(ys(r,14)===45?"inline-":"")+"box$3$1"+Sn+"$2$3$1"+Bs+"$2box$3")+r}break;case 5936:switch(ys(r,e+11)){case 114:return Sn+r+Bs+Tn(r,/[svh]\w+-[tblr]{2}/,"tb")+r;case 108:return Sn+r+Bs+Tn(r,/[svh]\w+-[tblr]{2}/,"tb-rl")+r;case 45:return Sn+r+Bs+Tn(r,/[svh]\w+-[tblr]{2}/,"lr")+r}return Sn+r+Bs+r+r}return r}var OY=function(e,t,n,i){if(e.length>-1&&!e.return)switch(e.type){case ek:e.return=H8(e.value,e.length);break;case B8:return Tp([y0(e,{value:Tn(e.value,"@","@"+Sn)})],i);case ZE:if(e.length)return vY(e.props,function(s){switch(gY(s,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return Tp([y0(e,{props:[Tn(s,/:(read-\w+)/,":"+P_+"$1")]})],i);case"::placeholder":return Tp([y0(e,{props:[Tn(s,/:(plac\w+)/,":"+Sn+"input-$1")]}),y0(e,{props:[Tn(s,/:(plac\w+)/,":"+P_+"$1")]}),y0(e,{props:[Tn(s,/:(plac\w+)/,Bs+"input-$1")]})],i)}return""})}},MY=[OY],FY=function(e){var t=e.key;if(t==="css"){var n=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(n,function(y){var _=y.getAttribute("data-emotion");_.indexOf(" ")!==-1&&(document.head.appendChild(y),y.setAttribute("data-s",""))})}var i=e.stylisPlugins||MY,s={},a,o=[];a=e.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+t+' "]'),function(y){for(var _=y.getAttribute("data-emotion").split(" "),C=1;C<_.length;C++)s[_[C]]=!0;o.push(y)});var l,u=[RY,LY];{var c,h=[EY,AY(function(y){c.insert(y)})],f=kY(u.concat(i,h)),g=function(_){return Tp(CY(_),f)};l=function(_,C,E,D){c=E,g(_?_+"{"+C.styles+"}":C.styles),D&&(v.inserted[C.name]=!0)}}var v={key:t,sheet:new cY({key:t,container:a,nonce:e.nonce,speedy:e.speedy,prepend:e.prepend,insertionPoint:e.insertionPoint}),nonce:e.nonce,inserted:s,registered:{},insert:l};return v.sheet.hydrate(o),v},z1={exports:{}},kn={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _L;function BY(){if(_L)return kn;_L=1;var r=typeof Symbol=="function"&&Symbol.for,e=r?Symbol.for("react.element"):60103,t=r?Symbol.for("react.portal"):60106,n=r?Symbol.for("react.fragment"):60107,i=r?Symbol.for("react.strict_mode"):60108,s=r?Symbol.for("react.profiler"):60114,a=r?Symbol.for("react.provider"):60109,o=r?Symbol.for("react.context"):60110,l=r?Symbol.for("react.async_mode"):60111,u=r?Symbol.for("react.concurrent_mode"):60111,c=r?Symbol.for("react.forward_ref"):60112,h=r?Symbol.for("react.suspense"):60113,f=r?Symbol.for("react.suspense_list"):60120,g=r?Symbol.for("react.memo"):60115,v=r?Symbol.for("react.lazy"):60116,y=r?Symbol.for("react.block"):60121,_=r?Symbol.for("react.fundamental"):60117,C=r?Symbol.for("react.responder"):60118,E=r?Symbol.for("react.scope"):60119;function D(k){if(typeof k=="object"&&k!==null){var P=k.$$typeof;switch(P){case e:switch(k=k.type,k){case l:case u:case n:case s:case i:case h:return k;default:switch(k=k&&k.$$typeof,k){case o:case c:case v:case g:case a:return k;default:return P}}case t:return P}}}function I(k){return D(k)===u}return kn.AsyncMode=l,kn.ConcurrentMode=u,kn.ContextConsumer=o,kn.ContextProvider=a,kn.Element=e,kn.ForwardRef=c,kn.Fragment=n,kn.Lazy=v,kn.Memo=g,kn.Portal=t,kn.Profiler=s,kn.StrictMode=i,kn.Suspense=h,kn.isAsyncMode=function(k){return I(k)||D(k)===l},kn.isConcurrentMode=I,kn.isContextConsumer=function(k){return D(k)===o},kn.isContextProvider=function(k){return D(k)===a},kn.isElement=function(k){return typeof k=="object"&&k!==null&&k.$$typeof===e},kn.isForwardRef=function(k){return D(k)===c},kn.isFragment=function(k){return D(k)===n},kn.isLazy=function(k){return D(k)===v},kn.isMemo=function(k){return D(k)===g},kn.isPortal=function(k){return D(k)===t},kn.isProfiler=function(k){return D(k)===s},kn.isStrictMode=function(k){return D(k)===i},kn.isSuspense=function(k){return D(k)===h},kn.isValidElementType=function(k){return typeof k=="string"||typeof k=="function"||k===n||k===u||k===s||k===i||k===h||k===f||typeof k=="object"&&k!==null&&(k.$$typeof===v||k.$$typeof===g||k.$$typeof===a||k.$$typeof===o||k.$$typeof===c||k.$$typeof===_||k.$$typeof===C||k.$$typeof===E||k.$$typeof===y)},kn.typeOf=D,kn}var bL;function NY(){return bL||(bL=1,z1.exports=BY()),z1.exports}var H1,SL;function UY(){if(SL)return H1;SL=1;var r=NY(),e={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},t={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},n={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},i={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},s={};s[r.ForwardRef]=n,s[r.Memo]=i;function a(v){return r.isMemo(v)?i:s[v.$$typeof]||e}var o=Object.defineProperty,l=Object.getOwnPropertyNames,u=Object.getOwnPropertySymbols,c=Object.getOwnPropertyDescriptor,h=Object.getPrototypeOf,f=Object.prototype;function g(v,y,_){if(typeof y!="string"){if(f){var C=h(y);C&&C!==f&&g(v,C,_)}var E=l(y);u&&(E=E.concat(u(y)));for(var D=a(v),I=a(y),k=0;k<E.length;++k){var P=E[k];if(!t[P]&&!(_&&_[P])&&!(I&&I[P])&&!(D&&D[P])){var N=c(y,P);try{o(v,P,N)}catch{}}}}return v}return H1=g,H1}UY();var $Y=!0;function V8(r,e,t){var n="";return t.split(" ").forEach(function(i){r[i]!==void 0?e.push(r[i]+";"):i&&(n+=i+" ")}),n}var rk=function(e,t,n){var i=e.key+"-"+t.name;(n===!1||$Y===!1)&&e.registered[i]===void 0&&(e.registered[i]=t.styles)},nk=function(e,t,n){rk(e,t,n);var i=e.key+"-"+t.name;if(e.inserted[t.name]===void 0){var s=t;do e.insert(t===s?"."+i:"",s,e.sheet,!0),s=s.next;while(s!==void 0)}};function jY(r){for(var e=0,t,n=0,i=r.length;i>=4;++n,i-=4)t=r.charCodeAt(n)&255|(r.charCodeAt(++n)&255)<<8|(r.charCodeAt(++n)&255)<<16|(r.charCodeAt(++n)&255)<<24,t=(t&65535)*1540483477+((t>>>16)*59797<<16),t^=t>>>24,e=(t&65535)*1540483477+((t>>>16)*59797<<16)^(e&65535)*1540483477+((e>>>16)*59797<<16);switch(i){case 3:e^=(r.charCodeAt(n+2)&255)<<16;case 2:e^=(r.charCodeAt(n+1)&255)<<8;case 1:e^=r.charCodeAt(n)&255,e=(e&65535)*1540483477+((e>>>16)*59797<<16)}return e^=e>>>13,e=(e&65535)*1540483477+((e>>>16)*59797<<16),((e^e>>>15)>>>0).toString(36)}var zY={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,scale:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},HY=/[A-Z]|^ms/g,VY=/_EMO_([^_]+?)_([^]*?)_EMO_/g,W8=function(e){return e.charCodeAt(1)===45},TL=function(e){return e!=null&&typeof e!="boolean"},V1=z8(function(r){return W8(r)?r:r.replace(HY,"-$&").toLowerCase()}),CL=function(e,t){switch(e){case"animation":case"animationName":if(typeof t=="string")return t.replace(VY,function(n,i,s){return pu={name:i,styles:s,next:pu},i})}return zY[e]!==1&&!W8(e)&&typeof t=="number"&&t!==0?t+"px":t};function kg(r,e,t){if(t==null)return"";var n=t;if(n.__emotion_styles!==void 0)return n;switch(typeof t){case"boolean":return"";case"object":{var i=t;if(i.anim===1)return pu={name:i.name,styles:i.styles,next:pu},i.name;var s=t;if(s.styles!==void 0){var a=s.next;if(a!==void 0)for(;a!==void 0;)pu={name:a.name,styles:a.styles,next:pu},a=a.next;var o=s.styles+";";return o}return WY(r,e,t)}case"function":{if(r!==void 0){var l=pu,u=t(r);return pu=l,kg(r,e,u)}break}}var c=t;if(e==null)return c;var h=e[c];return h!==void 0?h:c}function WY(r,e,t){var n="";if(Array.isArray(t))for(var i=0;i<t.length;i++)n+=kg(r,e,t[i])+";";else for(var s in t){var a=t[s];if(typeof a!="object"){var o=a;e!=null&&e[o]!==void 0?n+=s+"{"+e[o]+"}":TL(o)&&(n+=V1(s)+":"+CL(s,o)+";")}else if(Array.isArray(a)&&typeof a[0]=="string"&&(e==null||e[a[0]]===void 0))for(var l=0;l<a.length;l++)TL(a[l])&&(n+=V1(s)+":"+CL(s,a[l])+";");else{var u=kg(r,e,a);switch(s){case"animation":case"animationName":{n+=V1(s)+":"+u+";";break}default:n+=s+"{"+u+"}"}}}return n}var wL=/label:\s*([^\s;{]+)\s*(;|$)/g,pu;function sv(r,e,t){if(r.length===1&&typeof r[0]=="object"&&r[0]!==null&&r[0].styles!==void 0)return r[0];var n=!0,i="";pu=void 0;var s=r[0];if(s==null||s.raw===void 0)n=!1,i+=kg(t,e,s);else{var a=s;i+=a[0]}for(var o=1;o<r.length;o++)if(i+=kg(t,e,r[o]),n){var l=s;i+=l[o]}wL.lastIndex=0;for(var u="",c;(c=wL.exec(i))!==null;)u+="-"+c[1];var h=jY(i)+u;return{name:h,styles:i,next:pu}}var qY=function(e){return e()},q8=y_.useInsertionEffect?y_.useInsertionEffect:!1,G8=q8||qY,EL=q8||M.useLayoutEffect,K8=M.createContext(typeof HTMLElement<"u"?FY({key:"css"}):null);K8.Provider;var ik=function(e){return M.forwardRef(function(t,n){var i=M.useContext(K8);return e(t,i,n)})},av=M.createContext({}),sk={}.hasOwnProperty,zw="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",GY=function(e,t){var n={};for(var i in t)sk.call(t,i)&&(n[i]=t[i]);return n[zw]=e,n},KY=function(e){var t=e.cache,n=e.serialized,i=e.isStringTag;return rk(t,n,i),G8(function(){return nk(t,n,i)}),null},XY=ik(function(r,e,t){var n=r.css;typeof n=="string"&&e.registered[n]!==void 0&&(n=e.registered[n]);var i=r[zw],s=[n],a="";typeof r.className=="string"?a=V8(e.registered,s,r.className):r.className!=null&&(a=r.className+" ");var o=sv(s,void 0,M.useContext(av));a+=e.key+"-"+o.name;var l={};for(var u in r)sk.call(r,u)&&u!=="css"&&u!==zw&&(l[u]=r[u]);return l.className=a,t&&(l.ref=t),M.createElement(M.Fragment,null,M.createElement(KY,{cache:e,serialized:o,isStringTag:typeof i=="string"}),M.createElement(i,l))}),YY=XY,kL=function(e,t){var n=arguments;if(t==null||!sk.call(t,"css"))return M.createElement.apply(void 0,n);var i=n.length,s=new Array(i);s[0]=YY,s[1]=GY(e,t);for(var a=2;a<i;a++)s[a]=n[a];return M.createElement.apply(null,s)};(function(r){var e;e||(e=r.JSX||(r.JSX={}))})(kL||(kL={}));var QY=ik(function(r,e){var t=r.styles,n=sv([t],void 0,M.useContext(av)),i=M.useRef();return EL(function(){var s=e.key+"-global",a=new e.sheet.constructor({key:s,nonce:e.sheet.nonce,container:e.sheet.container,speedy:e.sheet.isSpeedy}),o=!1,l=document.querySelector('style[data-emotion="'+s+" "+n.name+'"]');return e.sheet.tags.length&&(a.before=e.sheet.tags[0]),l!==null&&(o=!0,l.setAttribute("data-emotion",s),a.hydrate([l])),i.current=[a,o],function(){a.flush()}},[e]),EL(function(){var s=i.current,a=s[0],o=s[1];if(o){s[1]=!1;return}if(n.next!==void 0&&nk(e,n.next,!0),a.tags.length){var l=a.tags[a.tags.length-1].nextElementSibling;a.before=l,a.flush()}e.insert("",n,a,!1)},[e,n.name]),null});function ak(){for(var r=arguments.length,e=new Array(r),t=0;t<r;t++)e[t]=arguments[t];return sv(e)}function ov(){var r=ak.apply(void 0,arguments),e="animation-"+r.name;return{name:e,styles:"@keyframes "+e+"{"+r.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}}var JY=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|disableRemotePlayback|download|draggable|encType|enterKeyHint|fetchpriority|fetchPriority|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,ZY=z8(function(r){return JY.test(r)||r.charCodeAt(0)===111&&r.charCodeAt(1)===110&&r.charCodeAt(2)<91}),eQ=ZY,tQ=function(e){return e!=="theme"},AL=function(e){return typeof e=="string"&&e.charCodeAt(0)>96?eQ:tQ},DL=function(e,t,n){var i;if(t){var s=t.shouldForwardProp;i=e.__emotion_forwardProp&&s?function(a){return e.__emotion_forwardProp(a)&&s(a)}:s}return typeof i!="function"&&n&&(i=e.__emotion_forwardProp),i},rQ=function(e){var t=e.cache,n=e.serialized,i=e.isStringTag;return rk(t,n,i),G8(function(){return nk(t,n,i)}),null},nQ=function r(e,t){var n=e.__emotion_real===e,i=n&&e.__emotion_base||e,s,a;t!==void 0&&(s=t.label,a=t.target);var o=DL(e,t,n),l=o||AL(i),u=!l("as");return function(){var c=arguments,h=n&&e.__emotion_styles!==void 0?e.__emotion_styles.slice(0):[];if(s!==void 0&&h.push("label:"+s+";"),c[0]==null||c[0].raw===void 0)h.push.apply(h,c);else{var f=c[0];h.push(f[0]);for(var g=c.length,v=1;v<g;v++)h.push(c[v],f[v])}var y=ik(function(_,C,E){var D=u&&_.as||i,I="",k=[],P=_;if(_.theme==null){P={};for(var N in _)P[N]=_[N];P.theme=M.useContext(av)}typeof _.className=="string"?I=V8(C.registered,k,_.className):_.className!=null&&(I=_.className+" ");var U=sv(h.concat(k),C.registered,P);I+=C.key+"-"+U.name,a!==void 0&&(I+=" "+a);var B=u&&o===void 0?AL(D):l,A={};for(var $ in _)u&&$==="as"||B($)&&(A[$]=_[$]);return A.className=I,E&&(A.ref=E),M.createElement(M.Fragment,null,M.createElement(rQ,{cache:C,serialized:U,isStringTag:typeof D=="string"}),M.createElement(D,A))});return y.displayName=s!==void 0?s:"Styled("+(typeof i=="string"?i:i.displayName||i.name||"Component")+")",y.defaultProps=e.defaultProps,y.__emotion_real=y,y.__emotion_base=i,y.__emotion_styles=h,y.__emotion_forwardProp=o,Object.defineProperty(y,"toString",{value:function(){return"."+a}}),y.withComponent=function(_,C){var E=r(_,sr({},t,C,{shouldForwardProp:DL(y,C,!0)}));return E.apply(void 0,h)},y}},iQ=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"],Hw=nQ.bind(null);iQ.forEach(function(r){Hw[r]=Hw(r)});function sQ(r){return r==null||Object.keys(r).length===0}function X8(r){const{styles:e,defaultTheme:t={}}=r,n=typeof e=="function"?i=>e(sQ(i)?t:i):e;return O.jsx(QY,{styles:n})}function Y8(r,e){return Hw(r,e)}function aQ(r,e){Array.isArray(r.__emotion_styles)&&(r.__emotion_styles=e(r.__emotion_styles))}const IL=[];function PL(r){return IL[0]=r,sv(IL)}const oQ=r=>{const e=Object.keys(r).map(t=>({key:t,val:r[t]}))||[];return e.sort((t,n)=>t.val-n.val),e.reduce((t,n)=>({...t,[n.key]:n.val}),{})};function lQ(r){const{values:e={xs:0,sm:600,md:900,lg:1200,xl:1536},unit:t="px",step:n=5,...i}=r,s=oQ(e),a=Object.keys(s);function o(f){return`@media (min-width:${typeof e[f]=="number"?e[f]:f}${t})`}function l(f){return`@media (max-width:${(typeof e[f]=="number"?e[f]:f)-n/100}${t})`}function u(f,g){const v=a.indexOf(g);return`@media (min-width:${typeof e[f]=="number"?e[f]:f}${t}) and (max-width:${(v!==-1&&typeof e[a[v]]=="number"?e[a[v]]:g)-n/100}${t})`}function c(f){return a.indexOf(f)+1<a.length?u(f,a[a.indexOf(f)+1]):o(f)}function h(f){const g=a.indexOf(f);return g===0?o(a[1]):g===a.length-1?l(a[g]):u(f,a[a.indexOf(f)+1]).replace("@media","@media not all and")}return{keys:a,values:s,up:o,down:l,between:u,only:c,not:h,unit:t,...i}}const uQ={borderRadius:4};function Q8(r=8,e=nS({spacing:r})){if(r.mui)return r;const t=(...n)=>(n.length===0?[1]:n).map(s=>{const a=e(s);return typeof a=="number"?`${a}px`:a}).join(" ");return t.mui=!0,t}function cQ(r,e){const t=this;if(t.vars){if(!t.colorSchemes?.[r]||typeof t.getColorSchemeSelector!="function")return{};let n=t.getColorSchemeSelector(r);return n==="&"?e:((n.includes("data-")||n.includes("."))&&(n=`*:where(${n.replace(/\s*&$/,"")}) &`),{[n]:e})}return t.palette.mode===r?e:{}}function lv(r={},...e){const{breakpoints:t={},palette:n={},spacing:i,shape:s={},...a}=r,o=lQ(t),l=Q8(i);let u=Ic({breakpoints:o,direction:"ltr",components:{},palette:{mode:"light",...n},spacing:l,shape:{...uQ,...s}},a);return u=yX(u),u.applyStyles=cQ,u=e.reduce((c,h)=>Ic(c,h),u),u.unstable_sxConfig={...nv,...a?.unstable_sxConfig},u.unstable_sx=function(h){return $d({sx:h,theme:this})},u}function dQ(r){return Object.keys(r).length===0}function ok(r=null){const e=M.useContext(av);return!e||dQ(e)?r:e}const hQ=lv();function uv(r=hQ){return ok(r)}function fQ({styles:r,themeId:e,defaultTheme:t={}}){const n=uv(t),i=typeof r=="function"?r(e&&n[e]||n):r;return O.jsx(X8,{styles:i})}const RL=r=>r,pQ=()=>{let r=RL;return{configure(e){r=e},generate(e){return r(e)},reset(){r=RL}}},mQ=pQ();function gQ(r={}){const{themeId:e,defaultTheme:t,defaultClassName:n="MuiBox-root",generateClassName:i}=r,s=Y8("div",{shouldForwardProp:o=>o!=="theme"&&o!=="sx"&&o!=="as"})($d);return M.forwardRef(function(l,u){const c=uv(t),{className:h,component:f="div",...g}=uS(l);return O.jsx(s,{as:f,ref:u,className:Dt(h,i?i(n):n),theme:e&&c[e]||c,...g})})}const vQ={active:"active",checked:"checked",completed:"completed",disabled:"disabled",error:"error",expanded:"expanded",focused:"focused",focusVisible:"focusVisible",open:"open",readOnly:"readOnly",required:"required",selected:"selected"};function J8(r,e,t="Mui"){const n=vQ[e];return n?`${t}-${n}`:`${mQ.generate(r)}-${e}`}function Z8(r){const{variants:e,...t}=r,n={variants:e,style:PL(t),isProcessed:!0};return n.style===t||e&&e.forEach(i=>{typeof i.style!="function"&&(i.style=PL(i.style))}),n}const yQ=lv();function W1(r){return r!=="ownerState"&&r!=="theme"&&r!=="sx"&&r!=="as"}function xQ(r){return r?(e,t)=>t[r]:null}function _Q(r,e,t){r.theme=SQ(r.theme)?t:r.theme[e]||r.theme}function r_(r,e){const t=typeof e=="function"?e(r):e;if(Array.isArray(t))return t.flatMap(n=>r_(r,n));if(Array.isArray(t?.variants)){let n;if(t.isProcessed)n=t.style;else{const{variants:i,...s}=t;n=s}return eN(r,t.variants,[n])}return t?.isProcessed?t.style:t}function eN(r,e,t=[]){let n;e:for(let i=0;i<e.length;i+=1){const s=e[i];if(typeof s.props=="function"){if(n??={...r,...r.ownerState,ownerState:r.ownerState},!s.props(n))continue}else for(const a in s.props)if(r[a]!==s.props[a]&&r.ownerState?.[a]!==s.props[a])continue e;typeof s.style=="function"?(n??={...r,...r.ownerState,ownerState:r.ownerState},t.push(s.style(n))):t.push(s.style)}return t}function tN(r={}){const{themeId:e,defaultTheme:t=yQ,rootShouldForwardProp:n=W1,slotShouldForwardProp:i=W1}=r;function s(o){_Q(o,e,t)}return(o,l={})=>{aQ(o,k=>k.filter(P=>P!==$d));const{name:u,slot:c,skipVariantsResolver:h,skipSx:f,overridesResolver:g=xQ(CQ(c)),...v}=l,y=h!==void 0?h:c&&c!=="Root"&&c!=="root"||!1,_=f||!1;let C=W1;c==="Root"||c==="root"?C=n:c?C=i:TQ(o)&&(C=void 0);const E=Y8(o,{shouldForwardProp:C,label:bQ(),...v}),D=k=>{if(typeof k=="function"&&k.__emotion_real!==k)return function(N){return r_(N,k)};if(Pd(k)){const P=Z8(k);return P.variants?function(U){return r_(U,P)}:P.style}return k},I=(...k)=>{const P=[],N=k.map(D),U=[];if(P.push(s),u&&g&&U.push(function(W){const Q=W.theme.components?.[u]?.styleOverrides;if(!Q)return null;const ie={};for(const ne in Q)ie[ne]=r_(W,Q[ne]);return g(W,ie)}),u&&!y&&U.push(function(W){const Q=W.theme?.components?.[u]?.variants;return Q?eN(W,Q):null}),_||U.push($d),Array.isArray(N[0])){const $=N.shift(),W=new Array(P.length).fill(""),V=new Array(U.length).fill("");let Q;Q=[...W,...$,...V],Q.raw=[...W,...$.raw,...V],P.unshift(Q)}const B=[...P,...N,...U],A=E(...B);return o.muiName&&(A.muiName=o.muiName),A};return E.withConfig&&(I.withConfig=E.withConfig),I}}function bQ(r,e){return void 0}function SQ(r){for(const e in r)return!1;return!0}function TQ(r){return typeof r=="string"&&r.charCodeAt(0)>96}function CQ(r){return r&&r.charAt(0).toLowerCase()+r.slice(1)}const rN=tN();function R_(r,e){const t={...e};for(const n in r)if(Object.prototype.hasOwnProperty.call(r,n)){const i=n;if(i==="components"||i==="slots")t[i]={...r[i],...t[i]};else if(i==="componentsProps"||i==="slotProps"){const s=r[i],a=e[i];if(!a)t[i]=s||{};else if(!s)t[i]=a;else{t[i]={...a};for(const o in s)if(Object.prototype.hasOwnProperty.call(s,o)){const l=o;t[i][l]=R_(s[l],a[l])}}}else t[i]===void 0&&(t[i]=r[i])}return t}function nN(r){const{theme:e,name:t,props:n}=r;return!e||!e.components||!e.components[t]||!e.components[t].defaultProps?n:R_(e.components[t].defaultProps,n)}function iN({props:r,name:e,defaultTheme:t,themeId:n}){let i=uv(t);return n&&(i=i[n]||i),nN({theme:i,name:e,props:r})}const sN=typeof window<"u"?M.useLayoutEffect:M.useEffect;function wQ(r,e,t,n,i){const[s,a]=M.useState(()=>i&&t?t(r).matches:n?n(r).matches:e);return sN(()=>{if(!t)return;const o=t(r),l=()=>{a(o.matches)};return l(),o.addEventListener("change",l),()=>{o.removeEventListener("change",l)}},[r,t]),s}const EQ={...y_},aN=EQ.useSyncExternalStore;function kQ(r,e,t,n,i){const s=M.useCallback(()=>e,[e]),a=M.useMemo(()=>{if(i&&t)return()=>t(r).matches;if(n!==null){const{matches:c}=n(r);return()=>c}return s},[s,r,n,i,t]),[o,l]=M.useMemo(()=>{if(t===null)return[s,()=>()=>{}];const c=t(r);return[()=>c.matches,h=>(c.addEventListener("change",h),()=>{c.removeEventListener("change",h)})]},[s,t,r]);return aN(l,o,a)}function oN(r={}){const{themeId:e}=r;return function(n,i={}){let s=ok();s&&e&&(s=s[e]||s);const a=typeof window<"u"&&typeof window.matchMedia<"u",{defaultMatches:o=!1,matchMedia:l=a?window.matchMedia:null,ssrMatchMedia:u=null,noSsr:c=!1}=nN({name:"MuiUseMediaQuery",props:i,theme:s});let h=typeof n=="function"?n(s):n;return h=h.replace(/^@media( ?)/m,""),h.includes("print")&&console.warn(["MUI: You have provided a `print` query to the `useMediaQuery` hook.","Using the print media query to modify print styles can lead to unexpected results.","Consider using the `displayPrint` field in the `sx` prop instead.","More information about `displayPrint` on our docs: https://mui.com/system/display/#display-in-print."].join(`
`)),(aN!==void 0?kQ:wQ)(h,o,l,u,c)}}oN();function AQ(r,e=Number.MIN_SAFE_INTEGER,t=Number.MAX_SAFE_INTEGER){return Math.max(e,Math.min(r,t))}function lk(r,e=0,t=1){return AQ(r,e,t)}function DQ(r){r=r.slice(1);const e=new RegExp(`.{1,${r.length>=6?2:1}}`,"g");let t=r.match(e);return t&&t[0].length===1&&(t=t.map(n=>n+n)),t?`rgb${t.length===4?"a":""}(${t.map((n,i)=>i<3?parseInt(n,16):Math.round(parseInt(n,16)/255*1e3)/1e3).join(", ")})`:""}function jd(r){if(r.type)return r;if(r.charAt(0)==="#")return jd(DQ(r));const e=r.indexOf("("),t=r.substring(0,e);if(!["rgb","rgba","hsl","hsla","color"].includes(t))throw new Error(Uw(9,r));let n=r.substring(e+1,r.length-1),i;if(t==="color"){if(n=n.split(" "),i=n.shift(),n.length===4&&n[3].charAt(0)==="/"&&(n[3]=n[3].slice(1)),!["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].includes(i))throw new Error(Uw(10,i))}else n=n.split(",");return n=n.map(s=>parseFloat(s)),{type:t,values:n,colorSpace:i}}const IQ=r=>{const e=jd(r);return e.values.slice(0,3).map((t,n)=>e.type.includes("hsl")&&n!==0?`${t}%`:t).join(" ")},$0=(r,e)=>{try{return IQ(r)}catch{return r}};function fS(r){const{type:e,colorSpace:t}=r;let{values:n}=r;return e.includes("rgb")?n=n.map((i,s)=>s<3?parseInt(i,10):i):e.includes("hsl")&&(n[1]=`${n[1]}%`,n[2]=`${n[2]}%`),e.includes("color")?n=`${t} ${n.join(" ")}`:n=`${n.join(", ")}`,`${e}(${n})`}function lN(r){r=jd(r);const{values:e}=r,t=e[0],n=e[1]/100,i=e[2]/100,s=n*Math.min(i,1-i),a=(u,c=(u+t/30)%12)=>i-s*Math.max(Math.min(c-3,9-c,1),-1);let o="rgb";const l=[Math.round(a(0)*255),Math.round(a(8)*255),Math.round(a(4)*255)];return r.type==="hsla"&&(o+="a",l.push(e[3])),fS({type:o,values:l})}function Vw(r){r=jd(r);let e=r.type==="hsl"||r.type==="hsla"?jd(lN(r)).values:r.values;return e=e.map(t=>(r.type!=="color"&&(t/=255),t<=.03928?t/12.92:((t+.055)/1.055)**2.4)),Number((.2126*e[0]+.7152*e[1]+.0722*e[2]).toFixed(3))}function PQ(r,e){const t=Vw(r),n=Vw(e);return(Math.max(t,n)+.05)/(Math.min(t,n)+.05)}function Kr(r,e){return r=jd(r),e=lk(e),(r.type==="rgb"||r.type==="hsl")&&(r.type+="a"),r.type==="color"?r.values[3]=`/${e}`:r.values[3]=e,fS(r)}function ky(r,e,t){try{return Kr(r,e)}catch{return r}}function hf(r,e){if(r=jd(r),e=lk(e),r.type.includes("hsl"))r.values[2]*=1-e;else if(r.type.includes("rgb")||r.type.includes("color"))for(let t=0;t<3;t+=1)r.values[t]*=1-e;return fS(r)}function Mn(r,e,t){try{return hf(r,e)}catch{return r}}function ff(r,e){if(r=jd(r),e=lk(e),r.type.includes("hsl"))r.values[2]+=(100-r.values[2])*e;else if(r.type.includes("rgb"))for(let t=0;t<3;t+=1)r.values[t]+=(255-r.values[t])*e;else if(r.type.includes("color"))for(let t=0;t<3;t+=1)r.values[t]+=(1-r.values[t])*e;return fS(r)}function Fn(r,e,t){try{return ff(r,e)}catch{return r}}function uN(r,e=.15){return Vw(r)>.5?hf(r,e):ff(r,e)}function Ay(r,e,t){try{return uN(r,e)}catch{return r}}const cN=M.createContext(null);function uk(){return M.useContext(cN)}const RQ=typeof Symbol=="function"&&Symbol.for,LQ=RQ?Symbol.for("mui.nested"):"__THEME_NESTED__";function OQ(r,e){return typeof e=="function"?e(r):{...r,...e}}function MQ(r){const{children:e,theme:t}=r,n=uk(),i=M.useMemo(()=>{const s=n===null?{...t}:OQ(n,t);return s!=null&&(s[LQ]=n!==null),s},[t,n]);return O.jsx(cN.Provider,{value:i,children:e})}const dN=M.createContext();function FQ({value:r,...e}){return O.jsx(dN.Provider,{value:r??!0,...e})}const _m=()=>M.useContext(dN)??!1,hN=M.createContext(void 0);function BQ({value:r,children:e}){return O.jsx(hN.Provider,{value:r,children:e})}function NQ(r){const{theme:e,name:t,props:n}=r;if(!e||!e.components||!e.components[t])return n;const i=e.components[t];return i.defaultProps?R_(i.defaultProps,n):!i.styleOverrides&&!i.variants?R_(i,n):n}function UQ({props:r,name:e}){const t=M.useContext(hN);return NQ({props:r,name:e,theme:{components:t}})}const LL={};function OL(r,e,t,n=!1){return M.useMemo(()=>{const i=r&&e[r]||e;if(typeof t=="function"){const s=t(i),a=r?{...e,[r]:s}:s;return n?()=>a:a}return r?{...e,[r]:t}:{...e,...t}},[r,e,t,n])}function fN(r){const{children:e,theme:t,themeId:n}=r,i=ok(LL),s=uk()||LL,a=OL(n,i,t),o=OL(n,s,t,!0),l=(n?a[n]:a).direction==="rtl";return O.jsx(MQ,{theme:o,children:O.jsx(av.Provider,{value:a,children:O.jsx(FQ,{value:l,children:O.jsx(BQ,{value:n?a[n].components:a.components,children:e})})})})}const ML={theme:void 0};function $Q(r){let e,t;return function(i){let s=e;return(s===void 0||i.theme!==t)&&(ML.theme=i.theme,s=Z8(r(ML)),e=s,t=i.theme),s}}const ck="mode",dk="color-scheme",jQ="data-color-scheme";function zQ(r){const{defaultMode:e="system",defaultLightColorScheme:t="light",defaultDarkColorScheme:n="dark",modeStorageKey:i=ck,colorSchemeStorageKey:s=dk,attribute:a=jQ,colorSchemeNode:o="document.documentElement",nonce:l}=r||{};let u="",c=a;if(a==="class"&&(c=".%s"),a==="data"&&(c="[data-%s]"),c.startsWith(".")){const f=c.substring(1);u+=`${o}.classList.remove('${f}'.replace('%s', light), '${f}'.replace('%s', dark));
      ${o}.classList.add('${f}'.replace('%s', colorScheme));`}const h=c.match(/\[([^\]]+)\]/);if(h){const[f,g]=h[1].split("=");g||(u+=`${o}.removeAttribute('${f}'.replace('%s', light));
      ${o}.removeAttribute('${f}'.replace('%s', dark));`),u+=`
      ${o}.setAttribute('${f}'.replace('%s', colorScheme), ${g?`${g}.replace('%s', colorScheme)`:'""'});`}else u+=`${o}.setAttribute('${c}', colorScheme);`;return O.jsx("script",{suppressHydrationWarning:!0,nonce:typeof window>"u"?l:"",dangerouslySetInnerHTML:{__html:`(function() {
try {
  let colorScheme = '';
  const mode = localStorage.getItem('${i}') || '${e}';
  const dark = localStorage.getItem('${s}-dark') || '${n}';
  const light = localStorage.getItem('${s}-light') || '${t}';
  if (mode === 'system') {
    // handle system mode
    const mql = window.matchMedia('(prefers-color-scheme: dark)');
    if (mql.matches) {
      colorScheme = dark
    } else {
      colorScheme = light
    }
  }
  if (mode === 'light') {
    colorScheme = light;
  }
  if (mode === 'dark') {
    colorScheme = dark;
  }
  if (colorScheme) {
    ${u}
  }
} catch(e){}})();`}},"mui-color-scheme-init")}function HQ(){}const VQ=({key:r,storageWindow:e})=>(!e&&typeof window<"u"&&(e=window),{get(t){if(typeof window>"u")return;if(!e)return t;let n;try{n=e.localStorage.getItem(r)}catch{}return n||t},set:t=>{if(e)try{e.localStorage.setItem(r,t)}catch{}},subscribe:t=>{if(!e)return HQ;const n=i=>{const s=i.newValue;i.key===r&&t(s)};return e.addEventListener("storage",n),()=>{e.removeEventListener("storage",n)}}});function q1(){}function FL(r){if(typeof window<"u"&&typeof window.matchMedia=="function"&&r==="system")return window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}function pN(r,e){if(r.mode==="light"||r.mode==="system"&&r.systemMode==="light")return e("light");if(r.mode==="dark"||r.mode==="system"&&r.systemMode==="dark")return e("dark")}function WQ(r){return pN(r,e=>{if(e==="light")return r.lightColorScheme;if(e==="dark")return r.darkColorScheme})}function qQ(r){const{defaultMode:e="light",defaultLightColorScheme:t,defaultDarkColorScheme:n,supportedColorSchemes:i=[],modeStorageKey:s=ck,colorSchemeStorageKey:a=dk,storageWindow:o=typeof window>"u"?void 0:window,storageManager:l=VQ,noSsr:u=!1}=r,c=i.join(","),h=i.length>1,f=M.useMemo(()=>l?.({key:s,storageWindow:o}),[l,s,o]),g=M.useMemo(()=>l?.({key:`${a}-light`,storageWindow:o}),[l,a,o]),v=M.useMemo(()=>l?.({key:`${a}-dark`,storageWindow:o}),[l,a,o]),[y,_]=M.useState(()=>{const U=f?.get(e)||e,B=g?.get(t)||t,A=v?.get(n)||n;return{mode:U,systemMode:FL(U),lightColorScheme:B,darkColorScheme:A}}),[C,E]=M.useState(u||!h);M.useEffect(()=>{E(!0)},[]);const D=WQ(y),I=M.useCallback(U=>{_(B=>{if(U===B.mode)return B;const A=U??e;return f?.set(A),{...B,mode:A,systemMode:FL(A)}})},[f,e]),k=M.useCallback(U=>{U?typeof U=="string"?U&&!c.includes(U)?console.error(`\`${U}\` does not exist in \`theme.colorSchemes\`.`):_(B=>{const A={...B};return pN(B,$=>{$==="light"&&(g?.set(U),A.lightColorScheme=U),$==="dark"&&(v?.set(U),A.darkColorScheme=U)}),A}):_(B=>{const A={...B},$=U.light===null?t:U.light,W=U.dark===null?n:U.dark;return $&&(c.includes($)?(A.lightColorScheme=$,g?.set($)):console.error(`\`${$}\` does not exist in \`theme.colorSchemes\`.`)),W&&(c.includes(W)?(A.darkColorScheme=W,v?.set(W)):console.error(`\`${W}\` does not exist in \`theme.colorSchemes\`.`)),A}):_(B=>(g?.set(t),v?.set(n),{...B,lightColorScheme:t,darkColorScheme:n}))},[c,g,v,t,n]),P=M.useCallback(U=>{y.mode==="system"&&_(B=>{const A=U?.matches?"dark":"light";return B.systemMode===A?B:{...B,systemMode:A}})},[y.mode]),N=M.useRef(P);return N.current=P,M.useEffect(()=>{if(typeof window.matchMedia!="function"||!h)return;const U=(...A)=>N.current(...A),B=window.matchMedia("(prefers-color-scheme: dark)");return B.addListener(U),U(B),()=>{B.removeListener(U)}},[h]),M.useEffect(()=>{if(h){const U=f?.subscribe($=>{(!$||["light","dark","system"].includes($))&&I($||e)})||q1,B=g?.subscribe($=>{(!$||c.match($))&&k({light:$})})||q1,A=v?.subscribe($=>{(!$||c.match($))&&k({dark:$})})||q1;return()=>{U(),B(),A()}}},[k,I,c,e,o,h,f,g,v]),{...y,mode:C?y.mode:void 0,systemMode:C?y.systemMode:void 0,colorScheme:C?D:void 0,setMode:I,setColorScheme:k}}const GQ="*{-webkit-transition:none!important;-moz-transition:none!important;-o-transition:none!important;-ms-transition:none!important;transition:none!important}";function KQ(r){const{themeId:e,theme:t={},modeStorageKey:n=ck,colorSchemeStorageKey:i=dk,disableTransitionOnChange:s=!1,defaultColorScheme:a,resolveTheme:o}=r,l={allColorSchemes:[],colorScheme:void 0,darkColorScheme:void 0,lightColorScheme:void 0,mode:void 0,setColorScheme:()=>{},setMode:()=>{},systemMode:void 0},u=M.createContext(void 0),c=()=>M.useContext(u)||l,h={},f={};function g(C){const{children:E,theme:D,modeStorageKey:I=n,colorSchemeStorageKey:k=i,disableTransitionOnChange:P=s,storageManager:N,storageWindow:U=typeof window>"u"?void 0:window,documentNode:B=typeof document>"u"?void 0:document,colorSchemeNode:A=typeof document>"u"?void 0:document.documentElement,disableNestedContext:$=!1,disableStyleSheetGeneration:W=!1,defaultMode:V="system",forceThemeRerender:Q=!1,noSsr:ie}=C,ne=M.useRef(!1),ue=uk(),se=M.useContext(u),ae=!!se&&!$,ce=M.useMemo(()=>D||(typeof t=="function"?t():t),[D]),ee=ce[e],pe=ee||ce,{colorSchemes:me=h,components:ye=f,cssVarPrefix:Oe}=pe,Le=Object.keys(me).filter(nr=>!!me[nr]).join(","),st=M.useMemo(()=>Le.split(","),[Le]),ze=typeof a=="string"?a:a.light,pt=typeof a=="string"?a:a.dark,Ye=me[ze]&&me[pt]?V:me[pe.defaultColorScheme]?.palette?.mode||pe.palette?.mode,{mode:Pt,setMode:Rt,systemMode:Ve,lightColorScheme:Ne,darkColorScheme:Ie,colorScheme:Ue,setColorScheme:et}=qQ({supportedColorSchemes:st,defaultLightColorScheme:ze,defaultDarkColorScheme:pt,modeStorageKey:I,colorSchemeStorageKey:k,defaultMode:Ye,storageManager:N,storageWindow:U,noSsr:ie});let ot=Pt,dt=Ue;ae&&(ot=se.mode,dt=se.colorScheme);let it=dt||pe.defaultColorScheme;pe.vars&&!Q&&(it=pe.defaultColorScheme);const bt=M.useMemo(()=>{const nr=pe.generateThemeVars?.()||pe.vars,qt={...pe,components:ye,colorSchemes:me,cssVarPrefix:Oe,vars:nr};if(typeof qt.generateSpacing=="function"&&(qt.spacing=qt.generateSpacing()),it){const fr=me[it];fr&&typeof fr=="object"&&Object.keys(fr).forEach(yr=>{fr[yr]&&typeof fr[yr]=="object"?qt[yr]={...qt[yr],...fr[yr]}:qt[yr]=fr[yr]})}return o?o(qt):qt},[pe,it,ye,me,Oe]),lt=pe.colorSchemeSelector;sN(()=>{if(dt&&A&&lt&&lt!=="media"){const nr=lt;let qt=lt;if(nr==="class"&&(qt=".%s"),nr==="data"&&(qt="[data-%s]"),nr?.startsWith("data-")&&!nr.includes("%s")&&(qt=`[${nr}="%s"]`),qt.startsWith("."))A.classList.remove(...st.map(fr=>qt.substring(1).replace("%s",fr))),A.classList.add(qt.substring(1).replace("%s",dt));else{const fr=qt.replace("%s",dt).match(/\[([^\]]+)\]/);if(fr){const[yr,Lr]=fr[1].split("=");Lr||st.forEach(vt=>{A.removeAttribute(yr.replace(dt,vt))}),A.setAttribute(yr,Lr?Lr.replace(/"|'/g,""):"")}else A.setAttribute(qt,dt)}}},[dt,lt,A,st]),M.useEffect(()=>{let nr;if(P&&ne.current&&B){const qt=B.createElement("style");qt.appendChild(B.createTextNode(GQ)),B.head.appendChild(qt),window.getComputedStyle(B.body),nr=setTimeout(()=>{B.head.removeChild(qt)},1)}return()=>{clearTimeout(nr)}},[dt,P,B]),M.useEffect(()=>(ne.current=!0,()=>{ne.current=!1}),[]);const gr=M.useMemo(()=>({allColorSchemes:st,colorScheme:dt,darkColorScheme:Ie,lightColorScheme:Ne,mode:ot,setColorScheme:et,setMode:Rt,systemMode:Ve}),[st,dt,Ie,Ne,ot,et,Rt,Ve,bt.colorSchemeSelector]);let hr=!0;(W||pe.cssVariables===!1||ae&&ue?.cssVarPrefix===Oe)&&(hr=!1);const Rr=O.jsxs(M.Fragment,{children:[O.jsx(fN,{themeId:ee?e:void 0,theme:bt,children:E}),hr&&O.jsx(X8,{styles:bt.generateStyleSheets?.()||[]})]});return ae?Rr:O.jsx(u.Provider,{value:gr,children:Rr})}const v=typeof a=="string"?a:a.light,y=typeof a=="string"?a:a.dark;return{CssVarsProvider:g,useColorScheme:c,getInitColorSchemeScript:C=>zQ({colorSchemeStorageKey:i,defaultLightColorScheme:v,defaultDarkColorScheme:y,modeStorageKey:n,...C})}}function XQ(r=""){function e(...n){if(!n.length)return"";const i=n[0];return typeof i=="string"&&!i.match(/(#|\(|\)|(-?(\d*\.)?\d+)(px|em|%|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc))|^(-?(\d*\.)?\d+)$|(\d+ \d+ \d+)/)?`, var(--${r?`${r}-`:""}${i}${e(...n.slice(1))})`:`, ${i}`}return(n,...i)=>`var(--${r?`${r}-`:""}${n}${e(...i)})`}const BL=(r,e,t,n=[])=>{let i=r;e.forEach((s,a)=>{a===e.length-1?Array.isArray(i)?i[Number(s)]=t:i&&typeof i=="object"&&(i[s]=t):i&&typeof i=="object"&&(i[s]||(i[s]=n.includes(s)?[]:{}),i=i[s])})},YQ=(r,e,t)=>{function n(i,s=[],a=[]){Object.entries(i).forEach(([o,l])=>{(!t||t&&!t([...s,o]))&&l!=null&&(typeof l=="object"&&Object.keys(l).length>0?n(l,[...s,o],Array.isArray(l)?[...a,o]:a):e([...s,o],l,a))})}n(r)},QQ=(r,e)=>typeof e=="number"?["lineHeight","fontWeight","opacity","zIndex"].some(n=>r.includes(n))||r[r.length-1].toLowerCase().includes("opacity")?e:`${e}px`:e;function G1(r,e){const{prefix:t,shouldSkipGeneratingVar:n}=e||{},i={},s={},a={};return YQ(r,(o,l,u)=>{if((typeof l=="string"||typeof l=="number")&&(!n||!n(o,l))){const c=`--${t?`${t}-`:""}${o.join("-")}`,h=QQ(o,l);Object.assign(i,{[c]:h}),BL(s,o,`var(${c})`,u),BL(a,o,`var(${c}, ${h})`,u)}},o=>o[0]==="vars"),{css:i,vars:s,varsWithDefaults:a}}function JQ(r,e={}){const{getSelector:t=_,disableCssColorScheme:n,colorSchemeSelector:i}=e,{colorSchemes:s={},components:a,defaultColorScheme:o="light",...l}=r,{vars:u,css:c,varsWithDefaults:h}=G1(l,e);let f=h;const g={},{[o]:v,...y}=s;if(Object.entries(y||{}).forEach(([D,I])=>{const{vars:k,css:P,varsWithDefaults:N}=G1(I,e);f=Ic(f,N),g[D]={css:P,vars:k}}),v){const{css:D,vars:I,varsWithDefaults:k}=G1(v,e);f=Ic(f,k),g[o]={css:D,vars:I}}function _(D,I){let k=i;if(i==="class"&&(k=".%s"),i==="data"&&(k="[data-%s]"),i?.startsWith("data-")&&!i.includes("%s")&&(k=`[${i}="%s"]`),D){if(k==="media")return r.defaultColorScheme===D?":root":{[`@media (prefers-color-scheme: ${s[D]?.palette?.mode||D})`]:{":root":I}};if(k)return r.defaultColorScheme===D?`:root, ${k.replace("%s",String(D))}`:k.replace("%s",String(D))}return":root"}return{vars:f,generateThemeVars:()=>{let D={...u};return Object.entries(g).forEach(([,{vars:I}])=>{D=Ic(D,I)}),D},generateStyleSheets:()=>{const D=[],I=r.defaultColorScheme||"light";function k(U,B){Object.keys(B).length&&D.push(typeof U=="string"?{[U]:{...B}}:U)}k(t(void 0,{...c}),c);const{[I]:P,...N}=g;if(P){const{css:U}=P,B=s[I]?.palette?.mode,A=!n&&B?{colorScheme:B,...U}:{...U};k(t(I,{...A}),A)}return Object.entries(N).forEach(([U,{css:B}])=>{const A=s[U]?.palette?.mode,$=!n&&A?{colorScheme:A,...B}:{...B};k(t(U,{...$}),$)}),D}}}function ZQ(r){return function(t){return r==="media"?`@media (prefers-color-scheme: ${t})`:r?r.startsWith("data-")&&!r.includes("%s")?`[${r}="${t}"] &`:r==="class"?`.${t} &`:r==="data"?`[data-${t}] &`:`${r.replace("%s",t)} &`:"&"}}function mN(r,e,t=void 0){const n={};for(const i in r){const s=r[i];let a="",o=!0;for(let l=0;l<s.length;l+=1){const u=s[l];u&&(a+=(o===!0?"":" ")+e(u),o=!1,t&&t[u]&&(a+=" "+t[u]))}n[i]=a}return n}function eJ(r,e){return M.isValidElement(r)&&e.indexOf(r.type.muiName??r.type?._payload?.value?.muiName)!==-1}const tJ=(r,e)=>r.filter(t=>e.includes(t)),bm=(r,e,t)=>{const n=r.keys[0];Array.isArray(e)?e.forEach((i,s)=>{t((a,o)=>{s<=r.keys.length-1&&(s===0?Object.assign(a,o):a[r.up(r.keys[s])]=o)},i)}):e&&typeof e=="object"?(Object.keys(e).length>r.keys.length?r.keys:tJ(r.keys,Object.keys(e))).forEach(s=>{if(r.keys.includes(s)){const a=e[s];a!==void 0&&t((o,l)=>{n===s?Object.assign(o,l):o[r.up(s)]=l},a)}}):(typeof e=="number"||typeof e=="string")&&t((i,s)=>{Object.assign(i,s)},e)};function L_(r){return`--Grid-${r}Spacing`}function pS(r){return`--Grid-parent-${r}Spacing`}const NL="--Grid-columns",Cp="--Grid-parent-columns",rJ=({theme:r,ownerState:e})=>{const t={};return bm(r.breakpoints,e.size,(n,i)=>{let s={};i==="grow"&&(s={flexBasis:0,flexGrow:1,maxWidth:"100%"}),i==="auto"&&(s={flexBasis:"auto",flexGrow:0,flexShrink:0,maxWidth:"none",width:"auto"}),typeof i=="number"&&(s={flexGrow:0,flexBasis:"auto",width:`calc(100% * ${i} / var(${Cp}) - (var(${Cp}) - ${i}) * (var(${pS("column")}) / var(${Cp})))`}),n(t,s)}),t},nJ=({theme:r,ownerState:e})=>{const t={};return bm(r.breakpoints,e.offset,(n,i)=>{let s={};i==="auto"&&(s={marginLeft:"auto"}),typeof i=="number"&&(s={marginLeft:i===0?"0px":`calc(100% * ${i} / var(${Cp}) + var(${pS("column")}) * ${i} / var(${Cp}))`}),n(t,s)}),t},iJ=({theme:r,ownerState:e})=>{if(!e.container)return{};const t={[NL]:12};return bm(r.breakpoints,e.columns,(n,i)=>{const s=i??12;n(t,{[NL]:s,"> *":{[Cp]:s}})}),t},sJ=({theme:r,ownerState:e})=>{if(!e.container)return{};const t={};return bm(r.breakpoints,e.rowSpacing,(n,i)=>{const s=typeof i=="string"?i:r.spacing?.(i);n(t,{[L_("row")]:s,"> *":{[pS("row")]:s}})}),t},aJ=({theme:r,ownerState:e})=>{if(!e.container)return{};const t={};return bm(r.breakpoints,e.columnSpacing,(n,i)=>{const s=typeof i=="string"?i:r.spacing?.(i);n(t,{[L_("column")]:s,"> *":{[pS("column")]:s}})}),t},oJ=({theme:r,ownerState:e})=>{if(!e.container)return{};const t={};return bm(r.breakpoints,e.direction,(n,i)=>{n(t,{flexDirection:i})}),t},lJ=({ownerState:r})=>({minWidth:0,boxSizing:"border-box",...r.container&&{display:"flex",flexWrap:"wrap",...r.wrap&&r.wrap!=="wrap"&&{flexWrap:r.wrap},gap:`var(${L_("row")}) var(${L_("column")})`}}),uJ=r=>{const e=[];return Object.entries(r).forEach(([t,n])=>{n!==!1&&n!==void 0&&e.push(`grid-${t}-${String(n)}`)}),e},cJ=(r,e="xs")=>{function t(n){return n===void 0?!1:typeof n=="string"&&!Number.isNaN(Number(n))||typeof n=="number"&&n>0}if(t(r))return[`spacing-${e}-${String(r)}`];if(typeof r=="object"&&!Array.isArray(r)){const n=[];return Object.entries(r).forEach(([i,s])=>{t(s)&&n.push(`spacing-${i}-${String(s)}`)}),n}return[]},dJ=r=>r===void 0?[]:typeof r=="object"?Object.entries(r).map(([e,t])=>`direction-${e}-${t}`):[`direction-xs-${String(r)}`];function hJ(r,e){r.item!==void 0&&delete r.item,r.zeroMinWidth!==void 0&&delete r.zeroMinWidth,e.keys.forEach(t=>{r[t]!==void 0&&delete r[t]})}const fJ=lv(),pJ=rN("div",{name:"MuiGrid",slot:"Root"});function mJ(r){return iN({props:r,name:"MuiGrid",defaultTheme:fJ})}function gJ(r={}){const{createStyledComponent:e=pJ,useThemeProps:t=mJ,useTheme:n=uv,componentName:i="MuiGrid"}=r,s=(u,c)=>{const{container:h,direction:f,spacing:g,wrap:v,size:y}=u,_={root:["root",h&&"container",v!=="wrap"&&`wrap-xs-${String(v)}`,...dJ(f),...uJ(y),...h?cJ(g,c.breakpoints.keys[0]):[]]};return mN(_,C=>J8(i,C),{})};function a(u,c,h=()=>!0){const f={};return u===null||(Array.isArray(u)?u.forEach((g,v)=>{g!==null&&h(g)&&c.keys[v]&&(f[c.keys[v]]=g)}):typeof u=="object"?Object.keys(u).forEach(g=>{const v=u[g];v!=null&&h(v)&&(f[g]=v)}):f[c.keys[0]]=u),f}const o=e(iJ,aJ,sJ,rJ,oJ,lJ,nJ),l=M.forwardRef(function(c,h){const f=n(),g=t(c),v=uS(g);hJ(v,f.breakpoints);const{className:y,children:_,columns:C=12,container:E=!1,component:D="div",direction:I="row",wrap:k="wrap",size:P={},offset:N={},spacing:U=0,rowSpacing:B=U,columnSpacing:A=U,unstable_level:$=0,...W}=v,V=a(P,f.breakpoints,ee=>ee!==!1),Q=a(N,f.breakpoints),ie=c.columns??($?void 0:C),ne=c.spacing??($?void 0:U),ue=c.rowSpacing??c.spacing??($?void 0:B),se=c.columnSpacing??c.spacing??($?void 0:A),ae={...v,level:$,columns:ie,container:E,direction:I,wrap:k,spacing:ne,rowSpacing:ue,columnSpacing:se,size:V,offset:Q},ce=s(ae,f);return O.jsx(o,{ref:h,as:D,ownerState:ae,className:Dt(ce.root,y),...W,children:M.Children.map(_,ee=>M.isValidElement(ee)&&eJ(ee,["Grid"])&&E&&ee.props.container?M.cloneElement(ee,{unstable_level:ee.props?.unstable_level??$+1}):ee)})});return l.muiName="Grid",l}const vJ=lv(),yJ=rN("div",{name:"MuiStack",slot:"Root"});function xJ(r){return iN({props:r,name:"MuiStack",defaultTheme:vJ})}function _J(r,e){const t=M.Children.toArray(r).filter(Boolean);return t.reduce((n,i,s)=>(n.push(i),s<t.length-1&&n.push(M.cloneElement(e,{key:`separator-${s}`})),n),[])}const bJ=r=>({row:"Left","row-reverse":"Right",column:"Top","column-reverse":"Bottom"})[r],SJ=({ownerState:r,theme:e})=>{let t={display:"flex",flexDirection:"column",...Ol({theme:e},j1({values:r.direction,breakpoints:e.breakpoints.values}),n=>({flexDirection:n}))};if(r.spacing){const n=nS(e),i=Object.keys(e.breakpoints.values).reduce((l,u)=>((typeof r.spacing=="object"&&r.spacing[u]!=null||typeof r.direction=="object"&&r.direction[u]!=null)&&(l[u]=!0),l),{}),s=j1({values:r.direction,base:i}),a=j1({values:r.spacing,base:i});typeof s=="object"&&Object.keys(s).forEach((l,u,c)=>{if(!s[l]){const f=u>0?s[c[u-1]]:"column";s[l]=f}}),t=Ic(t,Ol({theme:e},a,(l,u)=>r.useFlexGap?{gap:df(n,l)}:{"& > :not(style):not(style)":{margin:0},"& > :not(style) ~ :not(style)":{[`margin${bJ(u?s[u]:r.direction)}`]:df(n,l)}}))}return t=_X(e.breakpoints,t),t};function TJ(r={}){const{createStyledComponent:e=yJ,useThemeProps:t=xJ,componentName:n="MuiStack"}=r,i=()=>mN({root:["root"]},l=>J8(n,l),{}),s=e(SJ);return M.forwardRef(function(l,u){const c=t(l),h=uS(c),{component:f="div",direction:g="column",spacing:v=0,divider:y,children:_,className:C,useFlexGap:E=!1,...D}=h,I={direction:g,spacing:v,useFlexGap:E},k=i();return O.jsx(s,{as:f,ownerState:I,ref:u,className:Dt(k.root,C),...D,children:y?_J(_,y):_})})}function pf(r,...e){const t=new URL(`https://mui.com/production-error/?code=${r}`);return e.forEach(n=>t.searchParams.append("args[]",n)),`Minified MUI error #${r}; visit ${t} for the full message.`}function Rd(r){if(typeof r!="object"||r===null)return!1;const e=Object.getPrototypeOf(r);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in r)&&!(Symbol.iterator in r)}function gN(r){if(M.isValidElement(r)||eS.isValidElementType(r)||!Rd(r))return r;const e={};return Object.keys(r).forEach(t=>{e[t]=gN(r[t])}),e}function Pu(r,e,t={clone:!0}){const n=t.clone?{...r}:r;return Rd(r)&&Rd(e)&&Object.keys(e).forEach(i=>{M.isValidElement(e[i])||eS.isValidElementType(e[i])?n[i]=e[i]:Rd(e[i])&&Object.prototype.hasOwnProperty.call(r,i)&&Rd(r[i])?n[i]=Pu(r[i],e[i],t):t.clone?n[i]=Rd(e[i])?gN(e[i]):e[i]:n[i]=e[i]}),n}const Ag={black:"#000",white:"#fff"},CJ={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"},Hf={50:"#f3e5f5",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",700:"#7b1fa2"},Vf={300:"#e57373",400:"#ef5350",500:"#f44336",700:"#d32f2f",800:"#c62828"},x0={300:"#ffb74d",400:"#ffa726",500:"#ff9800",700:"#f57c00",900:"#e65100"},Wf={50:"#e3f2fd",200:"#90caf9",400:"#42a5f5",700:"#1976d2",800:"#1565c0"},qf={300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",700:"#0288d1",900:"#01579b"},Ed={300:"#81c784",400:"#66bb6a",500:"#4caf50",700:"#388e3c",800:"#2e7d32",900:"#1b5e20"};function vN(){return{text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:Ag.white,default:Ag.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}}}const wJ=vN();function yN(){return{text:{primary:Ag.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:Ag.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}}}const UL=yN();function $L(r,e,t,n){const i=n.light||n,s=n.dark||n*1.5;r[e]||(r.hasOwnProperty(t)?r[e]=r[t]:e==="light"?r.light=ff(r.main,i):e==="dark"&&(r.dark=hf(r.main,s)))}function EJ(r="light"){return r==="dark"?{main:Wf[200],light:Wf[50],dark:Wf[400]}:{main:Wf[700],light:Wf[400],dark:Wf[800]}}function kJ(r="light"){return r==="dark"?{main:Hf[200],light:Hf[50],dark:Hf[400]}:{main:Hf[500],light:Hf[300],dark:Hf[700]}}function AJ(r="light"){return r==="dark"?{main:Vf[500],light:Vf[300],dark:Vf[700]}:{main:Vf[700],light:Vf[400],dark:Vf[800]}}function DJ(r="light"){return r==="dark"?{main:qf[400],light:qf[300],dark:qf[700]}:{main:qf[700],light:qf[500],dark:qf[900]}}function IJ(r="light"){return r==="dark"?{main:Ed[400],light:Ed[300],dark:Ed[700]}:{main:Ed[800],light:Ed[500],dark:Ed[900]}}function PJ(r="light"){return r==="dark"?{main:x0[400],light:x0[300],dark:x0[700]}:{main:"#ed6c02",light:x0[500],dark:x0[900]}}function hk(r){const{mode:e="light",contrastThreshold:t=3,tonalOffset:n=.2,...i}=r,s=r.primary||EJ(e),a=r.secondary||kJ(e),o=r.error||AJ(e),l=r.info||DJ(e),u=r.success||IJ(e),c=r.warning||PJ(e);function h(y){return PQ(y,UL.text.primary)>=t?UL.text.primary:wJ.text.primary}const f=({color:y,name:_,mainShade:C=500,lightShade:E=300,darkShade:D=700})=>{if(y={...y},!y.main&&y[C]&&(y.main=y[C]),!y.hasOwnProperty("main"))throw new Error(pf(11,_?` (${_})`:"",C));if(typeof y.main!="string")throw new Error(pf(12,_?` (${_})`:"",JSON.stringify(y.main)));return $L(y,"light",E,n),$L(y,"dark",D,n),y.contrastText||(y.contrastText=h(y.main)),y};let g;return e==="light"?g=vN():e==="dark"&&(g=yN()),Pu({common:{...Ag},mode:e,primary:f({color:s,name:"primary"}),secondary:f({color:a,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:f({color:o,name:"error"}),warning:f({color:c,name:"warning"}),info:f({color:l,name:"info"}),success:f({color:u,name:"success"}),grey:CJ,contrastThreshold:t,getContrastText:h,augmentColor:f,tonalOffset:n,...g},i)}function RJ(r){const e={};return Object.entries(r).forEach(n=>{const[i,s]=n;typeof s=="object"&&(e[i]=`${s.fontStyle?`${s.fontStyle} `:""}${s.fontVariant?`${s.fontVariant} `:""}${s.fontWeight?`${s.fontWeight} `:""}${s.fontStretch?`${s.fontStretch} `:""}${s.fontSize||""}${s.lineHeight?`/${s.lineHeight} `:""}${s.fontFamily||""}`)}),e}const jL=r=>r,LJ=()=>{let r=jL;return{configure(e){r=e},generate(e){return r(e)},reset(){r=jL}}},xN=LJ(),OJ={active:"active",checked:"checked",completed:"completed",disabled:"disabled",error:"error",expanded:"expanded",focused:"focused",focusVisible:"focusVisible",open:"open",readOnly:"readOnly",required:"required",selected:"selected"};function er(r,e,t="Mui"){const n=OJ[e];return n?`${t}-${n}`:`${xN.generate(r)}-${e}`}function MJ(r,e){return{toolbar:{minHeight:56,[r.up("xs")]:{"@media (orientation: landscape)":{minHeight:48}},[r.up("sm")]:{minHeight:64}},...e}}function FJ(r){return Math.round(r*1e5)/1e5}const zL={textTransform:"uppercase"},HL='"Roboto", "Helvetica", "Arial", sans-serif';function _N(r,e){const{fontFamily:t=HL,fontSize:n=14,fontWeightLight:i=300,fontWeightRegular:s=400,fontWeightMedium:a=500,fontWeightBold:o=700,htmlFontSize:l=16,allVariants:u,pxToRem:c,...h}=typeof e=="function"?e(r):e,f=n/14,g=c||(_=>`${_/l*f}rem`),v=(_,C,E,D,I)=>({fontFamily:t,fontWeight:_,fontSize:g(C),lineHeight:E,...t===HL?{letterSpacing:`${FJ(D/C)}em`}:{},...I,...u}),y={h1:v(i,96,1.167,-1.5),h2:v(i,60,1.2,-.5),h3:v(s,48,1.167,0),h4:v(s,34,1.235,.25),h5:v(s,24,1.334,0),h6:v(a,20,1.6,.15),subtitle1:v(s,16,1.75,.15),subtitle2:v(a,14,1.57,.1),body1:v(s,16,1.5,.15),body2:v(s,14,1.43,.15),button:v(a,14,1.75,.4,zL),caption:v(s,12,1.66,.4),overline:v(s,12,2.66,1,zL),inherit:{fontFamily:"inherit",fontWeight:"inherit",fontSize:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}};return Pu({htmlFontSize:l,pxToRem:g,fontFamily:t,fontSize:n,fontWeightLight:i,fontWeightRegular:s,fontWeightMedium:a,fontWeightBold:o,...y},h,{clone:!1})}const BJ=.2,NJ=.14,UJ=.12;function Yn(...r){return[`${r[0]}px ${r[1]}px ${r[2]}px ${r[3]}px rgba(0,0,0,${BJ})`,`${r[4]}px ${r[5]}px ${r[6]}px ${r[7]}px rgba(0,0,0,${NJ})`,`${r[8]}px ${r[9]}px ${r[10]}px ${r[11]}px rgba(0,0,0,${UJ})`].join(",")}const $J=["none",Yn(0,2,1,-1,0,1,1,0,0,1,3,0),Yn(0,3,1,-2,0,2,2,0,0,1,5,0),Yn(0,3,3,-2,0,3,4,0,0,1,8,0),Yn(0,2,4,-1,0,4,5,0,0,1,10,0),Yn(0,3,5,-1,0,5,8,0,0,1,14,0),Yn(0,3,5,-1,0,6,10,0,0,1,18,0),Yn(0,4,5,-2,0,7,10,1,0,2,16,1),Yn(0,5,5,-3,0,8,10,1,0,3,14,2),Yn(0,5,6,-3,0,9,12,1,0,3,16,2),Yn(0,6,6,-3,0,10,14,1,0,4,18,3),Yn(0,6,7,-4,0,11,15,1,0,4,20,3),Yn(0,7,8,-4,0,12,17,2,0,5,22,4),Yn(0,7,8,-4,0,13,19,2,0,5,24,4),Yn(0,7,9,-4,0,14,21,2,0,5,26,4),Yn(0,8,9,-5,0,15,22,2,0,6,28,5),Yn(0,8,10,-5,0,16,24,2,0,6,30,5),Yn(0,8,11,-5,0,17,26,2,0,6,32,5),Yn(0,9,11,-5,0,18,28,2,0,7,34,6),Yn(0,9,12,-6,0,19,29,2,0,7,36,6),Yn(0,10,13,-6,0,20,31,3,0,8,38,7),Yn(0,10,13,-6,0,21,33,3,0,8,40,7),Yn(0,10,14,-6,0,22,35,3,0,8,42,7),Yn(0,11,14,-7,0,23,36,3,0,9,44,8),Yn(0,11,15,-7,0,24,38,3,0,9,46,8)],jJ={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},bN={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function VL(r){return`${Math.round(r)}ms`}function zJ(r){if(!r)return 0;const e=r/36;return Math.min(Math.round((4+15*e**.25+e/5)*10),3e3)}function HJ(r){const e={...jJ,...r.easing},t={...bN,...r.duration};return{getAutoHeightDuration:zJ,create:(i=["all"],s={})=>{const{duration:a=t.standard,easing:o=e.easeInOut,delay:l=0,...u}=s;return(Array.isArray(i)?i:[i]).map(c=>`${c} ${typeof a=="string"?a:VL(a)} ${o} ${typeof l=="string"?l:VL(l)}`).join(",")},...r,easing:e,duration:t}}const VJ={mobileStepper:1e3,fab:1050,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500};function WJ(r){return Rd(r)||typeof r>"u"||typeof r=="string"||typeof r=="boolean"||typeof r=="number"||Array.isArray(r)}function SN(r={}){const e={...r};function t(n){const i=Object.entries(n);for(let s=0;s<i.length;s++){const[a,o]=i[s];!WJ(o)||a.startsWith("unstable_")?delete n[a]:Rd(o)&&(n[a]={...o},t(n[a]))}}return t(e),`import { unstable_createBreakpoints as createBreakpoints, createTransitions } from '@mui/material/styles';

const theme = ${JSON.stringify(e,null,2)};

theme.breakpoints = createBreakpoints(theme.breakpoints || {});
theme.transitions = createTransitions(theme.transitions || {});

export default theme;`}function Ww(r={},...e){const{breakpoints:t,mixins:n={},spacing:i,palette:s={},transitions:a={},typography:o={},shape:l,...u}=r;if(r.vars&&r.generateThemeVars===void 0)throw new Error(pf(20));const c=hk(s),h=lv(r);let f=Pu(h,{mixins:MJ(h.breakpoints,n),palette:c,shadows:$J.slice(),typography:_N(c,o),transitions:HJ(a),zIndex:{...VJ}});return f=Pu(f,u),f=e.reduce((g,v)=>Pu(g,v),f),f.unstable_sxConfig={...nv,...u?.unstable_sxConfig},f.unstable_sx=function(v){return $d({sx:v,theme:this})},f.toRuntimeSource=SN,f}function qw(r){let e;return r<1?e=5.11916*r**2:e=4.5*Math.log(r+1)+2,Math.round(e*10)/1e3}const qJ=[...Array(25)].map((r,e)=>{if(e===0)return"none";const t=qw(e);return`linear-gradient(rgba(255 255 255 / ${t}), rgba(255 255 255 / ${t}))`});function TN(r){return{inputPlaceholder:r==="dark"?.5:.42,inputUnderline:r==="dark"?.7:.42,switchTrackDisabled:r==="dark"?.2:.12,switchTrack:r==="dark"?.3:.38}}function CN(r){return r==="dark"?qJ:[]}function GJ(r){const{palette:e={mode:"light"},opacity:t,overlays:n,...i}=r,s=hk(e);return{palette:s,opacity:{...TN(s.mode),...t},overlays:n||CN(s.mode),...i}}function KJ(r){return!!r[0].match(/(cssVarPrefix|colorSchemeSelector|rootSelector|typography|mixins|breakpoints|direction|transitions)/)||!!r[0].match(/sxConfig$/)||r[0]==="palette"&&!!r[1]?.match(/(mode|contrastThreshold|tonalOffset)/)}const XJ=r=>[...[...Array(25)].map((e,t)=>`--${r?`${r}-`:""}overlays-${t}`),`--${r?`${r}-`:""}palette-AppBar-darkBg`,`--${r?`${r}-`:""}palette-AppBar-darkColor`],YJ=r=>(e,t)=>{const n=r.rootSelector||":root",i=r.colorSchemeSelector;let s=i;if(i==="class"&&(s=".%s"),i==="data"&&(s="[data-%s]"),i?.startsWith("data-")&&!i.includes("%s")&&(s=`[${i}="%s"]`),r.defaultColorScheme===e){if(e==="dark"){const a={};return XJ(r.cssVarPrefix).forEach(o=>{a[o]=t[o],delete t[o]}),s==="media"?{[n]:t,"@media (prefers-color-scheme: dark)":{[n]:a}}:s?{[s.replace("%s",e)]:a,[`${n}, ${s.replace("%s",e)}`]:t}:{[n]:{...t,...a}}}if(s&&s!=="media")return`${n}, ${s.replace("%s",String(e))}`}else if(e){if(s==="media")return{[`@media (prefers-color-scheme: ${String(e)})`]:{[n]:t}};if(s)return s.replace("%s",String(e))}return n};function QJ(r,e){e.forEach(t=>{r[t]||(r[t]={})})}function ht(r,e,t){!r[e]&&t&&(r[e]=t)}function j0(r){return typeof r!="string"||!r.startsWith("hsl")?r:lN(r)}function gc(r,e){`${e}Channel`in r||(r[`${e}Channel`]=$0(j0(r[e])))}function JJ(r){return typeof r=="number"?`${r}px`:typeof r=="string"||typeof r=="function"||Array.isArray(r)?r:"8px"}const lu=r=>{try{return r()}catch{}},ZJ=(r="mui")=>XQ(r);function K1(r,e,t,n){if(!e)return;e=e===!0?{}:e;const i=n==="dark"?"dark":"light";if(!t){r[n]=GJ({...e,palette:{mode:i,...e?.palette}});return}const{palette:s,...a}=Ww({...t,palette:{mode:i,...e?.palette}});return r[n]={...e,palette:s,opacity:{...TN(i),...e?.opacity},overlays:e?.overlays||CN(i)},a}function eZ(r={},...e){const{colorSchemes:t={light:!0},defaultColorScheme:n,disableCssColorScheme:i=!1,cssVarPrefix:s="mui",shouldSkipGeneratingVar:a=KJ,colorSchemeSelector:o=t.light&&t.dark?"media":void 0,rootSelector:l=":root",...u}=r,c=Object.keys(t)[0],h=n||(t.light&&c!=="light"?"light":c),f=ZJ(s),{[h]:g,light:v,dark:y,..._}=t,C={..._};let E=g;if((h==="dark"&&!("dark"in t)||h==="light"&&!("light"in t))&&(E=!0),!E)throw new Error(pf(21,h));const D=K1(C,E,u,h);v&&!C.light&&K1(C,v,void 0,"light"),y&&!C.dark&&K1(C,y,void 0,"dark");let I={defaultColorScheme:h,...D,cssVarPrefix:s,colorSchemeSelector:o,rootSelector:l,getCssVar:f,colorSchemes:C,font:{...RJ(D.typography),...D.font},spacing:JJ(u.spacing)};Object.keys(I.colorSchemes).forEach(B=>{const A=I.colorSchemes[B].palette,$=W=>{const V=W.split("-"),Q=V[1],ie=V[2];return f(W,A[Q][ie])};if(A.mode==="light"&&(ht(A.common,"background","#fff"),ht(A.common,"onBackground","#000")),A.mode==="dark"&&(ht(A.common,"background","#000"),ht(A.common,"onBackground","#fff")),QJ(A,["Alert","AppBar","Avatar","Button","Chip","FilledInput","LinearProgress","Skeleton","Slider","SnackbarContent","SpeedDialAction","StepConnector","StepContent","Switch","TableCell","Tooltip"]),A.mode==="light"){ht(A.Alert,"errorColor",Mn(A.error.light,.6)),ht(A.Alert,"infoColor",Mn(A.info.light,.6)),ht(A.Alert,"successColor",Mn(A.success.light,.6)),ht(A.Alert,"warningColor",Mn(A.warning.light,.6)),ht(A.Alert,"errorFilledBg",$("palette-error-main")),ht(A.Alert,"infoFilledBg",$("palette-info-main")),ht(A.Alert,"successFilledBg",$("palette-success-main")),ht(A.Alert,"warningFilledBg",$("palette-warning-main")),ht(A.Alert,"errorFilledColor",lu(()=>A.getContrastText(A.error.main))),ht(A.Alert,"infoFilledColor",lu(()=>A.getContrastText(A.info.main))),ht(A.Alert,"successFilledColor",lu(()=>A.getContrastText(A.success.main))),ht(A.Alert,"warningFilledColor",lu(()=>A.getContrastText(A.warning.main))),ht(A.Alert,"errorStandardBg",Fn(A.error.light,.9)),ht(A.Alert,"infoStandardBg",Fn(A.info.light,.9)),ht(A.Alert,"successStandardBg",Fn(A.success.light,.9)),ht(A.Alert,"warningStandardBg",Fn(A.warning.light,.9)),ht(A.Alert,"errorIconColor",$("palette-error-main")),ht(A.Alert,"infoIconColor",$("palette-info-main")),ht(A.Alert,"successIconColor",$("palette-success-main")),ht(A.Alert,"warningIconColor",$("palette-warning-main")),ht(A.AppBar,"defaultBg",$("palette-grey-100")),ht(A.Avatar,"defaultBg",$("palette-grey-400")),ht(A.Button,"inheritContainedBg",$("palette-grey-300")),ht(A.Button,"inheritContainedHoverBg",$("palette-grey-A100")),ht(A.Chip,"defaultBorder",$("palette-grey-400")),ht(A.Chip,"defaultAvatarColor",$("palette-grey-700")),ht(A.Chip,"defaultIconColor",$("palette-grey-700")),ht(A.FilledInput,"bg","rgba(0, 0, 0, 0.06)"),ht(A.FilledInput,"hoverBg","rgba(0, 0, 0, 0.09)"),ht(A.FilledInput,"disabledBg","rgba(0, 0, 0, 0.12)"),ht(A.LinearProgress,"primaryBg",Fn(A.primary.main,.62)),ht(A.LinearProgress,"secondaryBg",Fn(A.secondary.main,.62)),ht(A.LinearProgress,"errorBg",Fn(A.error.main,.62)),ht(A.LinearProgress,"infoBg",Fn(A.info.main,.62)),ht(A.LinearProgress,"successBg",Fn(A.success.main,.62)),ht(A.LinearProgress,"warningBg",Fn(A.warning.main,.62)),ht(A.Skeleton,"bg",`rgba(${$("palette-text-primaryChannel")} / 0.11)`),ht(A.Slider,"primaryTrack",Fn(A.primary.main,.62)),ht(A.Slider,"secondaryTrack",Fn(A.secondary.main,.62)),ht(A.Slider,"errorTrack",Fn(A.error.main,.62)),ht(A.Slider,"infoTrack",Fn(A.info.main,.62)),ht(A.Slider,"successTrack",Fn(A.success.main,.62)),ht(A.Slider,"warningTrack",Fn(A.warning.main,.62));const W=Ay(A.background.default,.8);ht(A.SnackbarContent,"bg",W),ht(A.SnackbarContent,"color",lu(()=>A.getContrastText(W))),ht(A.SpeedDialAction,"fabHoverBg",Ay(A.background.paper,.15)),ht(A.StepConnector,"border",$("palette-grey-400")),ht(A.StepContent,"border",$("palette-grey-400")),ht(A.Switch,"defaultColor",$("palette-common-white")),ht(A.Switch,"defaultDisabledColor",$("palette-grey-100")),ht(A.Switch,"primaryDisabledColor",Fn(A.primary.main,.62)),ht(A.Switch,"secondaryDisabledColor",Fn(A.secondary.main,.62)),ht(A.Switch,"errorDisabledColor",Fn(A.error.main,.62)),ht(A.Switch,"infoDisabledColor",Fn(A.info.main,.62)),ht(A.Switch,"successDisabledColor",Fn(A.success.main,.62)),ht(A.Switch,"warningDisabledColor",Fn(A.warning.main,.62)),ht(A.TableCell,"border",Fn(ky(A.divider,1),.88)),ht(A.Tooltip,"bg",ky(A.grey[700],.92))}if(A.mode==="dark"){ht(A.Alert,"errorColor",Fn(A.error.light,.6)),ht(A.Alert,"infoColor",Fn(A.info.light,.6)),ht(A.Alert,"successColor",Fn(A.success.light,.6)),ht(A.Alert,"warningColor",Fn(A.warning.light,.6)),ht(A.Alert,"errorFilledBg",$("palette-error-dark")),ht(A.Alert,"infoFilledBg",$("palette-info-dark")),ht(A.Alert,"successFilledBg",$("palette-success-dark")),ht(A.Alert,"warningFilledBg",$("palette-warning-dark")),ht(A.Alert,"errorFilledColor",lu(()=>A.getContrastText(A.error.dark))),ht(A.Alert,"infoFilledColor",lu(()=>A.getContrastText(A.info.dark))),ht(A.Alert,"successFilledColor",lu(()=>A.getContrastText(A.success.dark))),ht(A.Alert,"warningFilledColor",lu(()=>A.getContrastText(A.warning.dark))),ht(A.Alert,"errorStandardBg",Mn(A.error.light,.9)),ht(A.Alert,"infoStandardBg",Mn(A.info.light,.9)),ht(A.Alert,"successStandardBg",Mn(A.success.light,.9)),ht(A.Alert,"warningStandardBg",Mn(A.warning.light,.9)),ht(A.Alert,"errorIconColor",$("palette-error-main")),ht(A.Alert,"infoIconColor",$("palette-info-main")),ht(A.Alert,"successIconColor",$("palette-success-main")),ht(A.Alert,"warningIconColor",$("palette-warning-main")),ht(A.AppBar,"defaultBg",$("palette-grey-900")),ht(A.AppBar,"darkBg",$("palette-background-paper")),ht(A.AppBar,"darkColor",$("palette-text-primary")),ht(A.Avatar,"defaultBg",$("palette-grey-600")),ht(A.Button,"inheritContainedBg",$("palette-grey-800")),ht(A.Button,"inheritContainedHoverBg",$("palette-grey-700")),ht(A.Chip,"defaultBorder",$("palette-grey-700")),ht(A.Chip,"defaultAvatarColor",$("palette-grey-300")),ht(A.Chip,"defaultIconColor",$("palette-grey-300")),ht(A.FilledInput,"bg","rgba(255, 255, 255, 0.09)"),ht(A.FilledInput,"hoverBg","rgba(255, 255, 255, 0.13)"),ht(A.FilledInput,"disabledBg","rgba(255, 255, 255, 0.12)"),ht(A.LinearProgress,"primaryBg",Mn(A.primary.main,.5)),ht(A.LinearProgress,"secondaryBg",Mn(A.secondary.main,.5)),ht(A.LinearProgress,"errorBg",Mn(A.error.main,.5)),ht(A.LinearProgress,"infoBg",Mn(A.info.main,.5)),ht(A.LinearProgress,"successBg",Mn(A.success.main,.5)),ht(A.LinearProgress,"warningBg",Mn(A.warning.main,.5)),ht(A.Skeleton,"bg",`rgba(${$("palette-text-primaryChannel")} / 0.13)`),ht(A.Slider,"primaryTrack",Mn(A.primary.main,.5)),ht(A.Slider,"secondaryTrack",Mn(A.secondary.main,.5)),ht(A.Slider,"errorTrack",Mn(A.error.main,.5)),ht(A.Slider,"infoTrack",Mn(A.info.main,.5)),ht(A.Slider,"successTrack",Mn(A.success.main,.5)),ht(A.Slider,"warningTrack",Mn(A.warning.main,.5));const W=Ay(A.background.default,.98);ht(A.SnackbarContent,"bg",W),ht(A.SnackbarContent,"color",lu(()=>A.getContrastText(W))),ht(A.SpeedDialAction,"fabHoverBg",Ay(A.background.paper,.15)),ht(A.StepConnector,"border",$("palette-grey-600")),ht(A.StepContent,"border",$("palette-grey-600")),ht(A.Switch,"defaultColor",$("palette-grey-300")),ht(A.Switch,"defaultDisabledColor",$("palette-grey-600")),ht(A.Switch,"primaryDisabledColor",Mn(A.primary.main,.55)),ht(A.Switch,"secondaryDisabledColor",Mn(A.secondary.main,.55)),ht(A.Switch,"errorDisabledColor",Mn(A.error.main,.55)),ht(A.Switch,"infoDisabledColor",Mn(A.info.main,.55)),ht(A.Switch,"successDisabledColor",Mn(A.success.main,.55)),ht(A.Switch,"warningDisabledColor",Mn(A.warning.main,.55)),ht(A.TableCell,"border",Mn(ky(A.divider,1),.68)),ht(A.Tooltip,"bg",ky(A.grey[700],.92))}gc(A.background,"default"),gc(A.background,"paper"),gc(A.common,"background"),gc(A.common,"onBackground"),gc(A,"divider"),Object.keys(A).forEach(W=>{const V=A[W];W!=="tonalOffset"&&V&&typeof V=="object"&&(V.main&&ht(A[W],"mainChannel",$0(j0(V.main))),V.light&&ht(A[W],"lightChannel",$0(j0(V.light))),V.dark&&ht(A[W],"darkChannel",$0(j0(V.dark))),V.contrastText&&ht(A[W],"contrastTextChannel",$0(j0(V.contrastText))),W==="text"&&(gc(A[W],"primary"),gc(A[W],"secondary")),W==="action"&&(V.active&&gc(A[W],"active"),V.selected&&gc(A[W],"selected")))})}),I=e.reduce((B,A)=>Pu(B,A),I);const k={prefix:s,disableCssColorScheme:i,shouldSkipGeneratingVar:a,getSelector:YJ(I)},{vars:P,generateThemeVars:N,generateStyleSheets:U}=JQ(I,k);return I.vars=P,Object.entries(I.colorSchemes[I.defaultColorScheme]).forEach(([B,A])=>{I[B]=A}),I.generateThemeVars=N,I.generateStyleSheets=U,I.generateSpacing=function(){return Q8(u.spacing,nS(this))},I.getColorSchemeSelector=ZQ(o),I.spacing=I.generateSpacing(),I.shouldSkipGeneratingVar=a,I.unstable_sxConfig={...nv,...u?.unstable_sxConfig},I.unstable_sx=function(A){return $d({sx:A,theme:this})},I.toRuntimeSource=SN,I}function WL(r,e,t){r.colorSchemes&&t&&(r.colorSchemes[e]={...t!==!0&&t,palette:hk({...t===!0?{}:t.palette,mode:e})})}function mS(r={},...e){const{palette:t,cssVariables:n=!1,colorSchemes:i=t?void 0:{light:!0},defaultColorScheme:s=t?.mode,...a}=r,o=s||"light",l=i?.[o],u={...i,...t?{[o]:{...typeof l!="boolean"&&l,palette:t}}:void 0};if(n===!1){if(!("colorSchemes"in r))return Ww(r,...e);let c=t;"palette"in r||u[o]&&(u[o]!==!0?c=u[o].palette:o==="dark"&&(c={mode:"dark"}));const h=Ww({...r,palette:c},...e);return h.defaultColorScheme=o,h.colorSchemes=u,h.palette.mode==="light"&&(h.colorSchemes.light={...u.light!==!0&&u.light,palette:h.palette},WL(h,"dark",u.dark)),h.palette.mode==="dark"&&(h.colorSchemes.dark={...u.dark!==!0&&u.dark,palette:h.palette},WL(h,"light",u.light)),h}return!t&&!("light"in u)&&o==="light"&&(u.light=!0),eZ({...a,colorSchemes:u,defaultColorScheme:o,...typeof n!="boolean"&&n},...e)}const fk=mS(),Il="$$material";function Ul(){const r=uv(fk);return r[Il]||r}function tZ(r){return O.jsx(fQ,{...r,defaultTheme:fk,themeId:Il})}function wN(r){return r!=="ownerState"&&r!=="theme"&&r!=="sx"&&r!=="as"}const as=r=>wN(r)&&r!=="classes",rt=tN({themeId:Il,defaultTheme:fk,rootShouldForwardProp:as});function pk(r){return function(t){return O.jsx(tZ,{styles:typeof r=="function"?n=>r({theme:n,...t}):r})}}function rZ(){return uS}const cr=$Q;function Yt(r){return UQ(r)}function ft(r){if(typeof r!="string")throw new Error(pf(7));return r.charAt(0).toUpperCase()+r.slice(1)}function nZ(r){return typeof r.main=="string"}function iZ(r,e=[]){if(!nZ(r))return!1;for(const t of e)if(!r.hasOwnProperty(t)||typeof r[t]!="string")return!1;return!0}function _i(r=[]){return([,e])=>e&&iZ(e,r)}function Qt(r,e,t="Mui"){const n={};return e.forEach(i=>{n[i]=er(r,i,t)}),n}function sZ(r){return er("MuiTypography",r)}const qL=Qt("MuiTypography",["root","h1","h2","h3","h4","h5","h6","subtitle1","subtitle2","body1","body2","inherit","button","caption","overline","alignLeft","alignRight","alignCenter","alignJustify","noWrap","gutterBottom","paragraph"]),aZ={primary:!0,secondary:!0,error:!0,info:!0,success:!0,warning:!0,textPrimary:!0,textSecondary:!0,textDisabled:!0},oZ=rZ(),lZ=r=>{const{align:e,gutterBottom:t,noWrap:n,paragraph:i,variant:s,classes:a}=r,o={root:["root",s,r.align!=="inherit"&&`align${ft(e)}`,t&&"gutterBottom",n&&"noWrap",i&&"paragraph"]};return Zt(o,sZ,a)},uZ=rt("span",{name:"MuiTypography",slot:"Root",overridesResolver:(r,e)=>{const{ownerState:t}=r;return[e.root,t.variant&&e[t.variant],t.align!=="inherit"&&e[`align${ft(t.align)}`],t.noWrap&&e.noWrap,t.gutterBottom&&e.gutterBottom,t.paragraph&&e.paragraph]}})(cr(({theme:r})=>({margin:0,variants:[{props:{variant:"inherit"},style:{font:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}},...Object.entries(r.typography).filter(([e,t])=>e!=="inherit"&&t&&typeof t=="object").map(([e,t])=>({props:{variant:e},style:t})),...Object.entries(r.palette).filter(_i()).map(([e])=>({props:{color:e},style:{color:(r.vars||r).palette[e].main}})),...Object.entries(r.palette?.text||{}).filter(([,e])=>typeof e=="string").map(([e])=>({props:{color:`text${ft(e)}`},style:{color:(r.vars||r).palette.text[e]}})),{props:({ownerState:e})=>e.align!=="inherit",style:{textAlign:"var(--Typography-textAlign)"}},{props:({ownerState:e})=>e.noWrap,style:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}},{props:({ownerState:e})=>e.gutterBottom,style:{marginBottom:"0.35em"}},{props:({ownerState:e})=>e.paragraph,style:{marginBottom:16}}]}))),GL={h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",subtitle1:"h6",subtitle2:"h6",body1:"p",body2:"p",inherit:"p"},kr=M.forwardRef(function(e,t){const{color:n,...i}=Yt({props:e,name:"MuiTypography"}),s=!aZ[n],a=oZ({...i,...s&&{color:n}}),{align:o="inherit",className:l,component:u,gutterBottom:c=!1,noWrap:h=!1,paragraph:f=!1,variant:g="body1",variantMapping:v=GL,...y}=a,_={...a,align:o,color:n,className:l,component:u,gutterBottom:c,noWrap:h,paragraph:f,variant:g,variantMapping:v},C=u||(f?"p":v[g]||GL[g])||"span",E=lZ(_);return O.jsx(uZ,{as:C,ref:t,className:Dt(E.root,l),...y,ownerState:_,style:{...o!=="inherit"&&{"--Typography-textAlign":o},...y.style}})});function cZ(r){return er("MuiDialogTitle",r)}const dZ=Qt("MuiDialogTitle",["root"]),EN=M.createContext({}),hZ=r=>{const{classes:e}=r;return Zt({root:["root"]},cZ,e)},fZ=rt(kr,{name:"MuiDialogTitle",slot:"Root"})({padding:"16px 24px",flex:"0 0 auto"}),Sm=M.forwardRef(function(e,t){const n=Yt({props:e,name:"MuiDialogTitle"}),{className:i,id:s,...a}=n,o=n,l=hZ(o),{titleId:u=s}=M.useContext(EN);return O.jsx(fZ,{component:"h2",className:Dt(l.root,i),ownerState:o,ref:t,variant:"h6",id:s??u,...a})});let KL=0;function pZ(r){const[e,t]=M.useState(r),n=r||e;return M.useEffect(()=>{e==null&&(KL+=1,t(`mui-${KL}`))},[e]),n}const mZ={...y_},XL=mZ.useId;function Jd(r){if(XL!==void 0){const e=XL();return r??e}return pZ(r)}function Ss(r){return r&&r.ownerDocument||document}function vo(r){return Ss(r).defaultView||window}function kN(r=window){const e=r.document.documentElement.clientWidth;return r.innerWidth-e}function gZ(r){const e=Ss(r);return e.body===r?vo(r).innerWidth>e.documentElement.clientWidth:r.scrollHeight>r.clientHeight}function eg(r,e){e?r.setAttribute("aria-hidden","true"):r.removeAttribute("aria-hidden")}function YL(r){return parseInt(vo(r).getComputedStyle(r).paddingRight,10)||0}function vZ(r){const t=["TEMPLATE","SCRIPT","STYLE","LINK","MAP","META","NOSCRIPT","PICTURE","COL","COLGROUP","PARAM","SLOT","SOURCE","TRACK"].includes(r.tagName),n=r.tagName==="INPUT"&&r.getAttribute("type")==="hidden";return t||n}function QL(r,e,t,n,i){const s=[e,t,...n];[].forEach.call(r.children,a=>{const o=!s.includes(a),l=!vZ(a);o&&l&&eg(a,i)})}function X1(r,e){let t=-1;return r.some((n,i)=>e(n)?(t=i,!0):!1),t}function yZ(r,e){const t=[],n=r.container;if(!e.disableScrollLock){if(gZ(n)){const a=kN(vo(n));t.push({value:n.style.paddingRight,property:"padding-right",el:n}),n.style.paddingRight=`${YL(n)+a}px`;const o=Ss(n).querySelectorAll(".mui-fixed");[].forEach.call(o,l=>{t.push({value:l.style.paddingRight,property:"padding-right",el:l}),l.style.paddingRight=`${YL(l)+a}px`})}let s;if(n.parentNode instanceof DocumentFragment)s=Ss(n).body;else{const a=n.parentElement,o=vo(n);s=a?.nodeName==="HTML"&&o.getComputedStyle(a).overflowY==="scroll"?a:n}t.push({value:s.style.overflow,property:"overflow",el:s},{value:s.style.overflowX,property:"overflow-x",el:s},{value:s.style.overflowY,property:"overflow-y",el:s}),s.style.overflow="hidden"}return()=>{t.forEach(({value:s,el:a,property:o})=>{s?a.style.setProperty(o,s):a.style.removeProperty(o)})}}function xZ(r){const e=[];return[].forEach.call(r.children,t=>{t.getAttribute("aria-hidden")==="true"&&e.push(t)}),e}class _Z{constructor(){this.modals=[],this.containers=[]}add(e,t){let n=this.modals.indexOf(e);if(n!==-1)return n;n=this.modals.length,this.modals.push(e),e.modalRef&&eg(e.modalRef,!1);const i=xZ(t);QL(t,e.mount,e.modalRef,i,!0);const s=X1(this.containers,a=>a.container===t);return s!==-1?(this.containers[s].modals.push(e),n):(this.containers.push({modals:[e],container:t,restore:null,hiddenSiblings:i}),n)}mount(e,t){const n=X1(this.containers,s=>s.modals.includes(e)),i=this.containers[n];i.restore||(i.restore=yZ(i,t))}remove(e,t=!0){const n=this.modals.indexOf(e);if(n===-1)return n;const i=X1(this.containers,a=>a.modals.includes(e)),s=this.containers[i];if(s.modals.splice(s.modals.indexOf(e),1),this.modals.splice(n,1),s.modals.length===0)s.restore&&s.restore(),e.modalRef&&eg(e.modalRef,t),QL(s.container,e.mount,e.modalRef,s.hiddenSiblings,!1),this.containers.splice(i,1);else{const a=s.modals[s.modals.length-1];a.modalRef&&eg(a.modalRef,!1)}return n}isTopModal(e){return this.modals.length>0&&this.modals[this.modals.length-1]===e}}function Gn(...r){const e=M.useRef(void 0),t=M.useCallback(n=>{const i=r.map(s=>{if(s==null)return null;if(typeof s=="function"){const a=s,o=a(n);return typeof o=="function"?o:()=>{a(null)}}return s.current=n,()=>{s.current=null}});return()=>{i.forEach(s=>s?.())}},r);return M.useMemo(()=>r.every(n=>n==null)?null:n=>{e.current&&(e.current(),e.current=void 0),n!=null&&(e.current=t(n))},r)}function Zd(r){return parseInt(M.version,10)>=19?r?.props?.ref||null:r?.ref||null}const bZ=["input","select","textarea","a[href]","button","[tabindex]","audio[controls]","video[controls]",'[contenteditable]:not([contenteditable="false"])'].join(",");function SZ(r){const e=parseInt(r.getAttribute("tabindex")||"",10);return Number.isNaN(e)?r.contentEditable==="true"||(r.nodeName==="AUDIO"||r.nodeName==="VIDEO"||r.nodeName==="DETAILS")&&r.getAttribute("tabindex")===null?0:r.tabIndex:e}function TZ(r){if(r.tagName!=="INPUT"||r.type!=="radio"||!r.name)return!1;const e=n=>r.ownerDocument.querySelector(`input[type="radio"]${n}`);let t=e(`[name="${r.name}"]:checked`);return t||(t=e(`[name="${r.name}"]`)),t!==r}function CZ(r){return!(r.disabled||r.tagName==="INPUT"&&r.type==="hidden"||TZ(r))}function wZ(r){const e=[],t=[];return Array.from(r.querySelectorAll(bZ)).forEach((n,i)=>{const s=SZ(n);s===-1||!CZ(n)||(s===0?e.push(n):t.push({documentOrder:i,tabIndex:s,node:n}))}),t.sort((n,i)=>n.tabIndex===i.tabIndex?n.documentOrder-i.documentOrder:n.tabIndex-i.tabIndex).map(n=>n.node).concat(e)}function EZ(){return!0}function kZ(r){const{children:e,disableAutoFocus:t=!1,disableEnforceFocus:n=!1,disableRestoreFocus:i=!1,getTabbable:s=wZ,isEnabled:a=EZ,open:o}=r,l=M.useRef(!1),u=M.useRef(null),c=M.useRef(null),h=M.useRef(null),f=M.useRef(null),g=M.useRef(!1),v=M.useRef(null),y=Gn(Zd(e),v),_=M.useRef(null);M.useEffect(()=>{!o||!v.current||(g.current=!t)},[t,o]),M.useEffect(()=>{if(!o||!v.current)return;const D=Ss(v.current);return v.current.contains(D.activeElement)||(v.current.hasAttribute("tabIndex")||v.current.setAttribute("tabIndex","-1"),g.current&&v.current.focus()),()=>{i||(h.current&&h.current.focus&&(l.current=!0,h.current.focus()),h.current=null)}},[o]),M.useEffect(()=>{if(!o||!v.current)return;const D=Ss(v.current),I=N=>{_.current=N,!(n||!a()||N.key!=="Tab")&&D.activeElement===v.current&&N.shiftKey&&(l.current=!0,c.current&&c.current.focus())},k=()=>{const N=v.current;if(N===null)return;if(!D.hasFocus()||!a()||l.current){l.current=!1;return}if(N.contains(D.activeElement)||n&&D.activeElement!==u.current&&D.activeElement!==c.current)return;if(D.activeElement!==f.current)f.current=null;else if(f.current!==null)return;if(!g.current)return;let U=[];if((D.activeElement===u.current||D.activeElement===c.current)&&(U=s(v.current)),U.length>0){const B=!!(_.current?.shiftKey&&_.current?.key==="Tab"),A=U[0],$=U[U.length-1];typeof A!="string"&&typeof $!="string"&&(B?$.focus():A.focus())}else N.focus()};D.addEventListener("focusin",k),D.addEventListener("keydown",I,!0);const P=setInterval(()=>{D.activeElement&&D.activeElement.tagName==="BODY"&&k()},50);return()=>{clearInterval(P),D.removeEventListener("focusin",k),D.removeEventListener("keydown",I,!0)}},[t,n,i,a,o,s]);const C=D=>{h.current===null&&(h.current=D.relatedTarget),g.current=!0,f.current=D.target;const I=e.props.onFocus;I&&I(D)},E=D=>{h.current===null&&(h.current=D.relatedTarget),g.current=!0};return O.jsxs(M.Fragment,{children:[O.jsx("div",{tabIndex:o?0:-1,onFocus:E,ref:u,"data-testid":"sentinelStart"}),M.cloneElement(e,{ref:y,onFocus:C}),O.jsx("div",{tabIndex:o?0:-1,onFocus:E,ref:c,"data-testid":"sentinelEnd"})]})}const tl=typeof window<"u"?M.useLayoutEffect:M.useEffect;function JL(r,e){typeof r=="function"?r(e):r&&(r.current=e)}function AZ(r){return typeof r=="function"?r():r}const AN=M.forwardRef(function(e,t){const{children:n,container:i,disablePortal:s=!1}=e,[a,o]=M.useState(null),l=Gn(M.isValidElement(n)?Zd(n):null,t);if(tl(()=>{s||o(AZ(i)||document.body)},[i,s]),tl(()=>{if(a&&!s)return JL(t,a),()=>{JL(t,null)}},[t,a,s]),s){if(M.isValidElement(n)){const u={ref:l};return M.cloneElement(n,u)}return n}return a&&Go.createPortal(n,a)});function DZ(r){return typeof r=="string"}function DN(r,e,t){return r===void 0||DZ(r)?e:{...e,ownerState:{...e.ownerState,...t}}}function IN(r,e,t){return typeof r=="function"?r(e,t):r}function O_(r,e=[]){if(r===void 0)return{};const t={};return Object.keys(r).filter(n=>n.match(/^on[A-Z]/)&&typeof r[n]=="function"&&!e.includes(n)).forEach(n=>{t[n]=r[n]}),t}function ZL(r){if(r===void 0)return{};const e={};return Object.keys(r).filter(t=>!(t.match(/^on[A-Z]/)&&typeof r[t]=="function")).forEach(t=>{e[t]=r[t]}),e}function PN(r){const{getSlotProps:e,additionalProps:t,externalSlotProps:n,externalForwardedProps:i,className:s}=r;if(!e){const g=Dt(t?.className,s,i?.className,n?.className),v={...t?.style,...i?.style,...n?.style},y={...t,...i,...n};return g.length>0&&(y.className=g),Object.keys(v).length>0&&(y.style=v),{props:y,internalRef:void 0}}const a=O_({...i,...n}),o=ZL(n),l=ZL(i),u=e(a),c=Dt(u?.className,t?.className,s,i?.className,n?.className),h={...u?.style,...t?.style,...i?.style,...n?.style},f={...u,...t,...l,...o};return c.length>0&&(f.className=c),Object.keys(h).length>0&&(f.style=h),{props:f,internalRef:u.ref}}function ur(r,e){const{className:t,elementType:n,ownerState:i,externalForwardedProps:s,internalForwardedProps:a,shouldForwardComponentProp:o=!1,...l}=e,{component:u,slots:c={[r]:void 0},slotProps:h={[r]:void 0},...f}=s,g=c[r]||n,v=IN(h[r],i),{props:{component:y,..._},internalRef:C}=PN({className:t,...l,externalForwardedProps:r==="root"?f:void 0,externalSlotProps:v}),E=Gn(C,v?.ref,e.ref),D=r==="root"?y||u:y,I=DN(g,{...r==="root"&&!u&&!c[r]&&a,...r!=="root"&&!c[r]&&a,..._,...D&&!o&&{as:D},...D&&o&&{component:D},ref:E},i);return[g,I]}function gS(r,e){if(r==null)return{};var t={};for(var n in r)if({}.hasOwnProperty.call(r,n)){if(e.indexOf(n)!==-1)continue;t[n]=r[n]}return t}function zp(r,e){return zp=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,n){return t.__proto__=n,t},zp(r,e)}function Ht(r,e){r.prototype=Object.create(e.prototype),r.prototype.constructor=r,zp(r,e)}const eO={disabled:!1},M_=Qr.createContext(null);var IZ=function(e){return e.scrollTop},z0="unmounted",Rh="exited",Lh="entering",sp="entered",Gw="exiting",ll=(function(r){Ht(e,r);function e(n,i){var s;s=r.call(this,n,i)||this;var a=i,o=a&&!a.isMounting?n.enter:n.appear,l;return s.appearStatus=null,n.in?o?(l=Rh,s.appearStatus=Lh):l=sp:n.unmountOnExit||n.mountOnEnter?l=z0:l=Rh,s.state={status:l},s.nextCallback=null,s}e.getDerivedStateFromProps=function(i,s){var a=i.in;return a&&s.status===z0?{status:Rh}:null};var t=e.prototype;return t.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},t.componentDidUpdate=function(i){var s=null;if(i!==this.props){var a=this.state.status;this.props.in?a!==Lh&&a!==sp&&(s=Lh):(a===Lh||a===sp)&&(s=Gw)}this.updateStatus(!1,s)},t.componentWillUnmount=function(){this.cancelNextCallback()},t.getTimeouts=function(){var i=this.props.timeout,s,a,o;return s=a=o=i,i!=null&&typeof i!="number"&&(s=i.exit,a=i.enter,o=i.appear!==void 0?i.appear:a),{exit:s,enter:a,appear:o}},t.updateStatus=function(i,s){if(i===void 0&&(i=!1),s!==null)if(this.cancelNextCallback(),s===Lh){if(this.props.unmountOnExit||this.props.mountOnEnter){var a=this.props.nodeRef?this.props.nodeRef.current:wy.findDOMNode(this);a&&IZ(a)}this.performEnter(i)}else this.performExit();else this.props.unmountOnExit&&this.state.status===Rh&&this.setState({status:z0})},t.performEnter=function(i){var s=this,a=this.props.enter,o=this.context?this.context.isMounting:i,l=this.props.nodeRef?[o]:[wy.findDOMNode(this),o],u=l[0],c=l[1],h=this.getTimeouts(),f=o?h.appear:h.enter;if(!i&&!a||eO.disabled){this.safeSetState({status:sp},function(){s.props.onEntered(u)});return}this.props.onEnter(u,c),this.safeSetState({status:Lh},function(){s.props.onEntering(u,c),s.onTransitionEnd(f,function(){s.safeSetState({status:sp},function(){s.props.onEntered(u,c)})})})},t.performExit=function(){var i=this,s=this.props.exit,a=this.getTimeouts(),o=this.props.nodeRef?void 0:wy.findDOMNode(this);if(!s||eO.disabled){this.safeSetState({status:Rh},function(){i.props.onExited(o)});return}this.props.onExit(o),this.safeSetState({status:Gw},function(){i.props.onExiting(o),i.onTransitionEnd(a.exit,function(){i.safeSetState({status:Rh},function(){i.props.onExited(o)})})})},t.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},t.safeSetState=function(i,s){s=this.setNextCallback(s),this.setState(i,s)},t.setNextCallback=function(i){var s=this,a=!0;return this.nextCallback=function(o){a&&(a=!1,s.nextCallback=null,i(o))},this.nextCallback.cancel=function(){a=!1},this.nextCallback},t.onTransitionEnd=function(i,s){this.setNextCallback(s);var a=this.props.nodeRef?this.props.nodeRef.current:wy.findDOMNode(this),o=i==null&&!this.props.addEndListener;if(!a||o){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var l=this.props.nodeRef?[this.nextCallback]:[a,this.nextCallback],u=l[0],c=l[1];this.props.addEndListener(u,c)}i!=null&&setTimeout(this.nextCallback,i)},t.render=function(){var i=this.state.status;if(i===z0)return null;var s=this.props,a=s.children;s.in,s.mountOnEnter,s.unmountOnExit,s.appear,s.enter,s.exit,s.timeout,s.addEndListener,s.onEnter,s.onEntering,s.onEntered,s.onExit,s.onExiting,s.onExited,s.nodeRef;var o=gS(s,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return Qr.createElement(M_.Provider,{value:null},typeof a=="function"?a(i,o):Qr.cloneElement(Qr.Children.only(a),o))},e})(Qr.Component);ll.contextType=M_;ll.propTypes={};function Gf(){}ll.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:Gf,onEntering:Gf,onEntered:Gf,onExit:Gf,onExiting:Gf,onExited:Gf};ll.UNMOUNTED=z0;ll.EXITED=Rh;ll.ENTERING=Lh;ll.ENTERED=sp;ll.EXITING=Gw;function We(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function mk(r,e){var t=function(s){return e&&M.isValidElement(s)?e(s):s},n=Object.create(null);return r&&M.Children.map(r,function(i){return i}).forEach(function(i){n[i.key]=t(i)}),n}function PZ(r,e){r=r||{},e=e||{};function t(c){return c in e?e[c]:r[c]}var n=Object.create(null),i=[];for(var s in r)s in e?i.length&&(n[s]=i,i=[]):i.push(s);var a,o={};for(var l in e){if(n[l])for(a=0;a<n[l].length;a++){var u=n[l][a];o[n[l][a]]=t(u)}o[l]=t(l)}for(a=0;a<i.length;a++)o[i[a]]=t(i[a]);return o}function Hh(r,e,t){return t[e]!=null?t[e]:r.props[e]}function RZ(r,e){return mk(r.children,function(t){return M.cloneElement(t,{onExited:e.bind(null,t),in:!0,appear:Hh(t,"appear",r),enter:Hh(t,"enter",r),exit:Hh(t,"exit",r)})})}function LZ(r,e,t){var n=mk(r.children),i=PZ(e,n);return Object.keys(i).forEach(function(s){var a=i[s];if(M.isValidElement(a)){var o=s in e,l=s in n,u=e[s],c=M.isValidElement(u)&&!u.props.in;l&&(!o||c)?i[s]=M.cloneElement(a,{onExited:t.bind(null,a),in:!0,exit:Hh(a,"exit",r),enter:Hh(a,"enter",r)}):!l&&o&&!c?i[s]=M.cloneElement(a,{in:!1}):l&&o&&M.isValidElement(u)&&(i[s]=M.cloneElement(a,{onExited:t.bind(null,a),in:u.props.in,exit:Hh(a,"exit",r),enter:Hh(a,"enter",r)}))}}),i}var OZ=Object.values||function(r){return Object.keys(r).map(function(e){return r[e]})},MZ={component:"div",childFactory:function(e){return e}},gk=(function(r){Ht(e,r);function e(n,i){var s;s=r.call(this,n,i)||this;var a=s.handleExited.bind(We(s));return s.state={contextValue:{isMounting:!0},handleExited:a,firstRender:!0},s}var t=e.prototype;return t.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},t.componentWillUnmount=function(){this.mounted=!1},e.getDerivedStateFromProps=function(i,s){var a=s.children,o=s.handleExited,l=s.firstRender;return{children:l?RZ(i,o):LZ(i,a,o),firstRender:!1}},t.handleExited=function(i,s){var a=mk(this.props.children);i.key in a||(i.props.onExited&&i.props.onExited(s),this.mounted&&this.setState(function(o){var l=sr({},o.children);return delete l[i.key],{children:l}}))},t.render=function(){var i=this.props,s=i.component,a=i.childFactory,o=gS(i,["component","childFactory"]),l=this.state.contextValue,u=OZ(this.state.children).map(a);return delete o.appear,delete o.enter,delete o.exit,s===null?Qr.createElement(M_.Provider,{value:l},u):Qr.createElement(M_.Provider,{value:l},Qr.createElement(s,o,u))},e})(Qr.Component);gk.propTypes={};gk.defaultProps=MZ;const vk=r=>r.scrollTop;function zd(r,e){const{timeout:t,easing:n,style:i={}}=r;return{duration:i.transitionDuration??(typeof t=="number"?t:t[e.mode]||0),easing:i.transitionTimingFunction??(typeof n=="object"?n[e.mode]:n),delay:i.transitionDelay}}const FZ={entering:{opacity:1},entered:{opacity:1}},Kw=M.forwardRef(function(e,t){const n=Ul(),i={enter:n.transitions.duration.enteringScreen,exit:n.transitions.duration.leavingScreen},{addEndListener:s,appear:a=!0,children:o,easing:l,in:u,onEnter:c,onEntered:h,onEntering:f,onExit:g,onExited:v,onExiting:y,style:_,timeout:C=i,TransitionComponent:E=ll,...D}=e,I=M.useRef(null),k=Gn(I,Zd(o),t),P=Q=>ie=>{if(Q){const ne=I.current;ie===void 0?Q(ne):Q(ne,ie)}},N=P(f),U=P((Q,ie)=>{vk(Q);const ne=zd({style:_,timeout:C,easing:l},{mode:"enter"});Q.style.webkitTransition=n.transitions.create("opacity",ne),Q.style.transition=n.transitions.create("opacity",ne),c&&c(Q,ie)}),B=P(h),A=P(y),$=P(Q=>{const ie=zd({style:_,timeout:C,easing:l},{mode:"exit"});Q.style.webkitTransition=n.transitions.create("opacity",ie),Q.style.transition=n.transitions.create("opacity",ie),g&&g(Q)}),W=P(v),V=Q=>{s&&s(I.current,Q)};return O.jsx(E,{appear:a,in:u,nodeRef:I,onEnter:U,onEntered:B,onEntering:N,onExit:$,onExited:W,onExiting:A,addEndListener:V,timeout:C,...D,children:(Q,{ownerState:ie,...ne})=>M.cloneElement(o,{style:{opacity:0,visibility:Q==="exited"&&!u?"hidden":void 0,...FZ[Q],..._,...o.props.style},ref:k,...ne})})});function BZ(r){return er("MuiBackdrop",r)}Qt("MuiBackdrop",["root","invisible"]);const NZ=r=>{const{classes:e,invisible:t}=r;return Zt({root:["root",t&&"invisible"]},BZ,e)},UZ=rt("div",{name:"MuiBackdrop",slot:"Root",overridesResolver:(r,e)=>{const{ownerState:t}=r;return[e.root,t.invisible&&e.invisible]}})({position:"fixed",display:"flex",alignItems:"center",justifyContent:"center",right:0,bottom:0,top:0,left:0,backgroundColor:"rgba(0, 0, 0, 0.5)",WebkitTapHighlightColor:"transparent",variants:[{props:{invisible:!0},style:{backgroundColor:"transparent"}}]}),RN=M.forwardRef(function(e,t){const n=Yt({props:e,name:"MuiBackdrop"}),{children:i,className:s,component:a="div",invisible:o=!1,open:l,components:u={},componentsProps:c={},slotProps:h={},slots:f={},TransitionComponent:g,transitionDuration:v,...y}=n,_={...n,component:a,invisible:o},C=NZ(_),E={transition:g,root:u.Root,...f},D={...c,...h},I={slots:E,slotProps:D},[k,P]=ur("root",{elementType:UZ,externalForwardedProps:I,className:Dt(C.root,s),ownerState:_}),[N,U]=ur("transition",{elementType:Kw,externalForwardedProps:I,ownerState:_});return O.jsx(N,{in:l,timeout:v,...y,...U,children:O.jsx(k,{"aria-hidden":!0,...P,classes:C,ref:t,children:i})})});function la(r){const e=M.useRef(r);return tl(()=>{e.current=r}),M.useRef((...t)=>(0,e.current)(...t)).current}function Xw(...r){return r.reduce((e,t)=>t==null?e:function(...i){e.apply(this,i),t.apply(this,i)},()=>{})}function $Z(r){return typeof r=="function"?r():r}function jZ(r){return r?r.props.hasOwnProperty("in"):!1}const tO=()=>{},Dy=new _Z;function zZ(r){const{container:e,disableEscapeKeyDown:t=!1,disableScrollLock:n=!1,closeAfterTransition:i=!1,onTransitionEnter:s,onTransitionExited:a,children:o,onClose:l,open:u,rootRef:c}=r,h=M.useRef({}),f=M.useRef(null),g=M.useRef(null),v=Gn(g,c),[y,_]=M.useState(!u),C=jZ(o);let E=!0;(r["aria-hidden"]==="false"||r["aria-hidden"]===!1)&&(E=!1);const D=()=>Ss(f.current),I=()=>(h.current.modalRef=g.current,h.current.mount=f.current,h.current),k=()=>{Dy.mount(I(),{disableScrollLock:n}),g.current&&(g.current.scrollTop=0)},P=la(()=>{const ie=$Z(e)||D().body;Dy.add(I(),ie),g.current&&k()}),N=()=>Dy.isTopModal(I()),U=la(ie=>{f.current=ie,ie&&(u&&N()?k():g.current&&eg(g.current,E))}),B=M.useCallback(()=>{Dy.remove(I(),E)},[E]);M.useEffect(()=>()=>{B()},[B]),M.useEffect(()=>{u?P():(!C||!i)&&B()},[u,B,C,i,P]);const A=ie=>ne=>{ie.onKeyDown?.(ne),!(ne.key!=="Escape"||ne.which===229||!N())&&(t||(ne.stopPropagation(),l&&l(ne,"escapeKeyDown")))},$=ie=>ne=>{ie.onClick?.(ne),ne.target===ne.currentTarget&&l&&l(ne,"backdropClick")};return{getRootProps:(ie={})=>{const ne=O_(r);delete ne.onTransitionEnter,delete ne.onTransitionExited;const ue={...ne,...ie};return{role:"presentation",...ue,onKeyDown:A(ue),ref:v}},getBackdropProps:(ie={})=>{const ne=ie;return{"aria-hidden":!0,...ne,onClick:$(ne),open:u}},getTransitionProps:()=>{const ie=()=>{_(!1),s&&s()},ne=()=>{_(!0),a&&a(),i&&B()};return{onEnter:Xw(ie,o?.props.onEnter??tO),onExited:Xw(ne,o?.props.onExited??tO)}},rootRef:v,portalRef:U,isTopModal:N,exited:y,hasTransition:C}}function HZ(r){return er("MuiModal",r)}Qt("MuiModal",["root","hidden","backdrop"]);const VZ=r=>{const{open:e,exited:t,classes:n}=r;return Zt({root:["root",!e&&t&&"hidden"],backdrop:["backdrop"]},HZ,n)},WZ=rt("div",{name:"MuiModal",slot:"Root",overridesResolver:(r,e)=>{const{ownerState:t}=r;return[e.root,!t.open&&t.exited&&e.hidden]}})(cr(({theme:r})=>({position:"fixed",zIndex:(r.vars||r).zIndex.modal,right:0,bottom:0,top:0,left:0,variants:[{props:({ownerState:e})=>!e.open&&e.exited,style:{visibility:"hidden"}}]}))),qZ=rt(RN,{name:"MuiModal",slot:"Backdrop"})({zIndex:-1}),yk=M.forwardRef(function(e,t){const n=Yt({name:"MuiModal",props:e}),{BackdropComponent:i=qZ,BackdropProps:s,classes:a,className:o,closeAfterTransition:l=!1,children:u,container:c,component:h,components:f={},componentsProps:g={},disableAutoFocus:v=!1,disableEnforceFocus:y=!1,disableEscapeKeyDown:_=!1,disablePortal:C=!1,disableRestoreFocus:E=!1,disableScrollLock:D=!1,hideBackdrop:I=!1,keepMounted:k=!1,onClose:P,onTransitionEnter:N,onTransitionExited:U,open:B,slotProps:A={},slots:$={},theme:W,...V}=n,Q={...n,closeAfterTransition:l,disableAutoFocus:v,disableEnforceFocus:y,disableEscapeKeyDown:_,disablePortal:C,disableRestoreFocus:E,disableScrollLock:D,hideBackdrop:I,keepMounted:k},{getRootProps:ie,getBackdropProps:ne,getTransitionProps:ue,portalRef:se,isTopModal:ae,exited:ce,hasTransition:ee}=zZ({...Q,rootRef:t}),pe={...Q,exited:ce},me=VZ(pe),ye={};if(u.props.tabIndex===void 0&&(ye.tabIndex="-1"),ee){const{onEnter:Ye,onExited:Pt}=ue();ye.onEnter=Ye,ye.onExited=Pt}const Oe={slots:{root:f.Root,backdrop:f.Backdrop,...$},slotProps:{...g,...A}},[Le,st]=ur("root",{ref:t,elementType:WZ,externalForwardedProps:{...Oe,...V,component:h},getSlotProps:ie,ownerState:pe,className:Dt(o,me?.root,!pe.open&&pe.exited&&me?.hidden)}),[ze,pt]=ur("backdrop",{ref:s?.ref,elementType:i,externalForwardedProps:Oe,shouldForwardComponentProp:!0,additionalProps:s,getSlotProps:Ye=>ne({...Ye,onClick:Pt=>{Ye?.onClick&&Ye.onClick(Pt)}}),className:Dt(s?.className,me?.backdrop),ownerState:pe});return!k&&!B&&(!ee||ce)?null:O.jsx(AN,{ref:se,container:c,disablePortal:C,children:O.jsxs(Le,{...st,children:[!I&&i?O.jsx(ze,{...pt}):null,O.jsx(kZ,{disableEnforceFocus:y,disableAutoFocus:v,disableRestoreFocus:E,isEnabled:ae,open:B,children:M.cloneElement(u,ye)})]})})});function GZ(r){return er("MuiPaper",r)}Qt("MuiPaper",["root","rounded","outlined","elevation","elevation0","elevation1","elevation2","elevation3","elevation4","elevation5","elevation6","elevation7","elevation8","elevation9","elevation10","elevation11","elevation12","elevation13","elevation14","elevation15","elevation16","elevation17","elevation18","elevation19","elevation20","elevation21","elevation22","elevation23","elevation24"]);const KZ=r=>{const{square:e,elevation:t,variant:n,classes:i}=r,s={root:["root",n,!e&&"rounded",n==="elevation"&&`elevation${t}`]};return Zt(s,GZ,i)},XZ=rt("div",{name:"MuiPaper",slot:"Root",overridesResolver:(r,e)=>{const{ownerState:t}=r;return[e.root,e[t.variant],!t.square&&e.rounded,t.variant==="elevation"&&e[`elevation${t.elevation}`]]}})(cr(({theme:r})=>({backgroundColor:(r.vars||r).palette.background.paper,color:(r.vars||r).palette.text.primary,transition:r.transitions.create("box-shadow"),variants:[{props:({ownerState:e})=>!e.square,style:{borderRadius:r.shape.borderRadius}},{props:{variant:"outlined"},style:{border:`1px solid ${(r.vars||r).palette.divider}`}},{props:{variant:"elevation"},style:{boxShadow:"var(--Paper-shadow)",backgroundImage:"var(--Paper-overlay)"}}]}))),Ku=M.forwardRef(function(e,t){const n=Yt({props:e,name:"MuiPaper"}),i=Ul(),{className:s,component:a="div",elevation:o=1,square:l=!1,variant:u="elevation",...c}=n,h={...n,component:a,elevation:o,square:l,variant:u},f=KZ(h);return O.jsx(XZ,{as:a,ownerState:h,className:Dt(f.root,s),ref:t,...c,style:{...u==="elevation"&&{"--Paper-shadow":(i.vars||i).shadows[o],...i.vars&&{"--Paper-overlay":i.vars.overlays?.[o]},...!i.vars&&i.palette.mode==="dark"&&{"--Paper-overlay":`linear-gradient(${Kr("#fff",qw(o))}, ${Kr("#fff",qw(o))})`}},...c.style}})});function YZ(r){return er("MuiDialog",r)}const Y1=Qt("MuiDialog",["root","scrollPaper","scrollBody","container","paper","paperScrollPaper","paperScrollBody","paperWidthFalse","paperWidthXs","paperWidthSm","paperWidthMd","paperWidthLg","paperWidthXl","paperFullWidth","paperFullScreen"]),QZ=rt(RN,{name:"MuiDialog",slot:"Backdrop",overrides:(r,e)=>e.backdrop})({zIndex:-1}),JZ=r=>{const{classes:e,scroll:t,maxWidth:n,fullWidth:i,fullScreen:s}=r,a={root:["root"],container:["container",`scroll${ft(t)}`],paper:["paper",`paperScroll${ft(t)}`,`paperWidth${ft(String(n))}`,i&&"paperFullWidth",s&&"paperFullScreen"]};return Zt(a,YZ,e)},ZZ=rt(yk,{name:"MuiDialog",slot:"Root"})({"@media print":{position:"absolute !important"}}),eee=rt("div",{name:"MuiDialog",slot:"Container",overridesResolver:(r,e)=>{const{ownerState:t}=r;return[e.container,e[`scroll${ft(t.scroll)}`]]}})({height:"100%","@media print":{height:"auto"},outline:0,variants:[{props:{scroll:"paper"},style:{display:"flex",justifyContent:"center",alignItems:"center"}},{props:{scroll:"body"},style:{overflowY:"auto",overflowX:"hidden",textAlign:"center","&::after":{content:'""',display:"inline-block",verticalAlign:"middle",height:"100%",width:"0"}}}]}),tee=rt(Ku,{name:"MuiDialog",slot:"Paper",overridesResolver:(r,e)=>{const{ownerState:t}=r;return[e.paper,e[`scrollPaper${ft(t.scroll)}`],e[`paperWidth${ft(String(t.maxWidth))}`],t.fullWidth&&e.paperFullWidth,t.fullScreen&&e.paperFullScreen]}})(cr(({theme:r})=>({margin:32,position:"relative",overflowY:"auto","@media print":{overflowY:"visible",boxShadow:"none"},variants:[{props:{scroll:"paper"},style:{display:"flex",flexDirection:"column",maxHeight:"calc(100% - 64px)"}},{props:{scroll:"body"},style:{display:"inline-block",verticalAlign:"middle",textAlign:"initial"}},{props:({ownerState:e})=>!e.maxWidth,style:{maxWidth:"calc(100% - 64px)"}},{props:{maxWidth:"xs"},style:{maxWidth:r.breakpoints.unit==="px"?Math.max(r.breakpoints.values.xs,444):`max(${r.breakpoints.values.xs}${r.breakpoints.unit}, 444px)`,[`&.${Y1.paperScrollBody}`]:{[r.breakpoints.down(Math.max(r.breakpoints.values.xs,444)+64)]:{maxWidth:"calc(100% - 64px)"}}}},...Object.keys(r.breakpoints.values).filter(e=>e!=="xs").map(e=>({props:{maxWidth:e},style:{maxWidth:`${r.breakpoints.values[e]}${r.breakpoints.unit}`,[`&.${Y1.paperScrollBody}`]:{[r.breakpoints.down(r.breakpoints.values[e]+64)]:{maxWidth:"calc(100% - 64px)"}}}})),{props:({ownerState:e})=>e.fullWidth,style:{width:"calc(100% - 64px)"}},{props:({ownerState:e})=>e.fullScreen,style:{margin:0,width:"100%",maxWidth:"100%",height:"100%",maxHeight:"none",borderRadius:0,[`&.${Y1.paperScrollBody}`]:{margin:0,maxWidth:"100%"}}}]}))),Ml=M.forwardRef(function(e,t){const n=Yt({props:e,name:"MuiDialog"}),i=Ul(),s={enter:i.transitions.duration.enteringScreen,exit:i.transitions.duration.leavingScreen},{"aria-describedby":a,"aria-labelledby":o,"aria-modal":l=!0,BackdropComponent:u,BackdropProps:c,children:h,className:f,disableEscapeKeyDown:g=!1,fullScreen:v=!1,fullWidth:y=!1,maxWidth:_="sm",onClick:C,onClose:E,open:D,PaperComponent:I=Ku,PaperProps:k={},scroll:P="paper",slots:N={},slotProps:U={},TransitionComponent:B=Kw,transitionDuration:A=s,TransitionProps:$,...W}=n,V={...n,disableEscapeKeyDown:g,fullScreen:v,fullWidth:y,maxWidth:_,scroll:P},Q=JZ(V),ie=M.useRef(),ne=Ve=>{ie.current=Ve.target===Ve.currentTarget},ue=Ve=>{C&&C(Ve),ie.current&&(ie.current=null,E&&E(Ve,"backdropClick"))},se=Jd(o),ae=M.useMemo(()=>({titleId:se}),[se]),ce={transition:B,...N},ee={transition:$,paper:k,backdrop:c,...U},pe={slots:ce,slotProps:ee},[me,ye]=ur("root",{elementType:ZZ,shouldForwardComponentProp:!0,externalForwardedProps:pe,ownerState:V,className:Dt(Q.root,f),ref:t}),[Oe,Le]=ur("backdrop",{elementType:QZ,shouldForwardComponentProp:!0,externalForwardedProps:pe,ownerState:V}),[st,ze]=ur("paper",{elementType:tee,shouldForwardComponentProp:!0,externalForwardedProps:pe,ownerState:V,className:Dt(Q.paper,k.className)}),[pt,Ye]=ur("container",{elementType:eee,externalForwardedProps:pe,ownerState:V,className:Q.container}),[Pt,Rt]=ur("transition",{elementType:Kw,externalForwardedProps:pe,ownerState:V,additionalProps:{appear:!0,in:D,timeout:A,role:"presentation"}});return O.jsx(me,{closeAfterTransition:!0,slots:{backdrop:Oe},slotProps:{backdrop:{transitionDuration:A,as:u,...Le}},disableEscapeKeyDown:g,onClose:E,open:D,onClick:ue,...ye,...W,children:O.jsx(Pt,{...Rt,children:O.jsx(pt,{onMouseDown:ne,...Ye,children:O.jsx(st,{as:I,elevation:24,role:"dialog","aria-describedby":a,"aria-labelledby":se,"aria-modal":l,...ze,children:O.jsx(EN.Provider,{value:ae,children:h})})})})})});function ree(r){return er("MuiSvgIcon",r)}Qt("MuiSvgIcon",["root","colorPrimary","colorSecondary","colorAction","colorError","colorDisabled","fontSizeInherit","fontSizeSmall","fontSizeMedium","fontSizeLarge"]);const nee=r=>{const{color:e,fontSize:t,classes:n}=r,i={root:["root",e!=="inherit"&&`color${ft(e)}`,`fontSize${ft(t)}`]};return Zt(i,ree,n)},iee=rt("svg",{name:"MuiSvgIcon",slot:"Root",overridesResolver:(r,e)=>{const{ownerState:t}=r;return[e.root,t.color!=="inherit"&&e[`color${ft(t.color)}`],e[`fontSize${ft(t.fontSize)}`]]}})(cr(({theme:r})=>({userSelect:"none",width:"1em",height:"1em",display:"inline-block",flexShrink:0,transition:r.transitions?.create?.("fill",{duration:(r.vars??r).transitions?.duration?.shorter}),variants:[{props:e=>!e.hasSvgAsChild,style:{fill:"currentColor"}},{props:{fontSize:"inherit"},style:{fontSize:"inherit"}},{props:{fontSize:"small"},style:{fontSize:r.typography?.pxToRem?.(20)||"1.25rem"}},{props:{fontSize:"medium"},style:{fontSize:r.typography?.pxToRem?.(24)||"1.5rem"}},{props:{fontSize:"large"},style:{fontSize:r.typography?.pxToRem?.(35)||"2.1875rem"}},...Object.entries((r.vars??r).palette).filter(([,e])=>e&&e.main).map(([e])=>({props:{color:e},style:{color:(r.vars??r).palette?.[e]?.main}})),{props:{color:"action"},style:{color:(r.vars??r).palette?.action?.active}},{props:{color:"disabled"},style:{color:(r.vars??r).palette?.action?.disabled}},{props:{color:"inherit"},style:{color:void 0}}]}))),F_=M.forwardRef(function(e,t){const n=Yt({props:e,name:"MuiSvgIcon"}),{children:i,className:s,color:a="inherit",component:o="svg",fontSize:l="medium",htmlColor:u,inheritViewBox:c=!1,titleAccess:h,viewBox:f="0 0 24 24",...g}=n,v=M.isValidElement(i)&&i.type==="svg",y={...n,color:a,component:o,fontSize:l,instanceFontSize:e.fontSize,inheritViewBox:c,viewBox:f,hasSvgAsChild:v},_={};c||(_.viewBox=f);const C=nee(y);return O.jsxs(iee,{as:o,className:Dt(C.root,s),focusable:"false",color:u,"aria-hidden":h?void 0:!0,role:h?"img":void 0,ref:t,..._,...g,...v&&i.props,ownerState:y,children:[v?i.props.children:i,h?O.jsx("title",{children:h}):null]})});F_.muiName="SvgIcon";function mr(r,e){function t(n,i){return O.jsx(F_,{"data-testid":void 0,ref:i,...n,children:r})}return t.muiName=F_.muiName,M.memo(M.forwardRef(t))}function cv(r,e=166){let t;function n(...i){const s=()=>{r.apply(this,i)};clearTimeout(t),t=setTimeout(s,e)}return n.clear=()=>{clearTimeout(t)},n}function n_(r,e){return M.isValidElement(r)&&e.indexOf(r.type.muiName??r.type?._payload?.value?.muiName)!==-1}function Dg(r){const{controlled:e,default:t,name:n,state:i="value"}=r,{current:s}=M.useRef(e!==void 0),[a,o]=M.useState(t),l=s?e:a,u=M.useCallback(c=>{s||o(c)},[]);return[l,u]}function see(r,e){const t=r.charCodeAt(2);return r[0]==="o"&&r[1]==="n"&&t>=65&&t<=90&&typeof e=="function"}function xk(r,e){if(!r)return e;function t(a,o){const l={};return Object.keys(o).forEach(u=>{see(u,o[u])&&typeof a[u]=="function"&&(l[u]=(...c)=>{a[u](...c),o[u](...c)})}),l}if(typeof r=="function"||typeof e=="function")return a=>{const o=typeof e=="function"?e(a):e,l=typeof r=="function"?r({...a,...o}):r,u=Dt(a?.className,o?.className,l?.className),c=t(l,o);return{...o,...l,...c,...!!u&&{className:u},...o?.style&&l?.style&&{style:{...o.style,...l.style}},...o?.sx&&l?.sx&&{sx:[...Array.isArray(o.sx)?o.sx:[o.sx],...Array.isArray(l.sx)?l.sx:[l.sx]]}}};const n=e,i=t(r,n),s=Dt(n?.className,r?.className);return{...e,...r,...i,...!!s&&{className:s},...n?.style&&r?.style&&{style:{...n.style,...r.style}},...n?.sx&&r?.sx&&{sx:[...Array.isArray(n.sx)?n.sx:[n.sx],...Array.isArray(r.sx)?r.sx:[r.sx]]}}}const aee=mr(O.jsx("path",{d:"M20 18c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2H4c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2H0v2h24v-2zM4 6h16v10H4z"}));function LN(r,e){const t=sr({},e);return Object.keys(r).forEach(n=>{if(n.toString().match(/^(components|slots)$/))t[n]=sr({},r[n],t[n]);else if(n.toString().match(/^(componentsProps|slotProps)$/)){const i=r[n]||{},s=e[n];t[n]={},!s||!Object.keys(s)?t[n]=i:!i||!Object.keys(i)?t[n]=s:(t[n]=sr({},s),Object.keys(i).forEach(a=>{t[n][a]=LN(i[a],s[a])}))}else t[n]===void 0&&(t[n]=r[n])}),t}function oee(r,e,t=void 0){const n={};return Object.keys(r).forEach(i=>{n[i]=r[i].reduce((s,a)=>{if(a){const o=e(a);o!==""&&s.push(o),t&&t[a]&&s.push(t[a])}return s},[]).join(" ")}),n}const rO=r=>r,lee=()=>{let r=rO;return{configure(e){r=e},generate(e){return r(e)},reset(){r=rO}}},uee=lee(),cee={active:"active",checked:"checked",completed:"completed",disabled:"disabled",error:"error",expanded:"expanded",focused:"focused",focusVisible:"focusVisible",open:"open",readOnly:"readOnly",required:"required",selected:"selected"};function ON(r,e,t="Mui"){const n=cee[e];return n?`${t}-${n}`:`${uee.generate(r)}-${e}`}function dee(r,e,t="Mui"){const n={};return e.forEach(i=>{n[i]=ON(r,i,t)}),n}var $a="top",rl="bottom",nl="right",ja="left",_k="auto",dv=[$a,rl,nl,ja],Hp="start",Ig="end",hee="clippingParents",MN="viewport",_0="popper",fee="reference",nO=dv.reduce(function(r,e){return r.concat([e+"-"+Hp,e+"-"+Ig])},[]),FN=[].concat(dv,[_k]).reduce(function(r,e){return r.concat([e,e+"-"+Hp,e+"-"+Ig])},[]),pee="beforeRead",mee="read",gee="afterRead",vee="beforeMain",yee="main",xee="afterMain",_ee="beforeWrite",bee="write",See="afterWrite",Tee=[pee,mee,gee,vee,yee,xee,_ee,bee,See];function Ou(r){return r?(r.nodeName||"").toLowerCase():null}function yo(r){if(r==null)return window;if(r.toString()!=="[object Window]"){var e=r.ownerDocument;return e&&e.defaultView||window}return r}function mf(r){var e=yo(r).Element;return r instanceof e||r instanceof Element}function Yo(r){var e=yo(r).HTMLElement;return r instanceof e||r instanceof HTMLElement}function bk(r){if(typeof ShadowRoot>"u")return!1;var e=yo(r).ShadowRoot;return r instanceof e||r instanceof ShadowRoot}function Cee(r){var e=r.state;Object.keys(e.elements).forEach(function(t){var n=e.styles[t]||{},i=e.attributes[t]||{},s=e.elements[t];!Yo(s)||!Ou(s)||(Object.assign(s.style,n),Object.keys(i).forEach(function(a){var o=i[a];o===!1?s.removeAttribute(a):s.setAttribute(a,o===!0?"":o)}))})}function wee(r){var e=r.state,t={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(e.elements.popper.style,t.popper),e.styles=t,e.elements.arrow&&Object.assign(e.elements.arrow.style,t.arrow),function(){Object.keys(e.elements).forEach(function(n){var i=e.elements[n],s=e.attributes[n]||{},a=Object.keys(e.styles.hasOwnProperty(n)?e.styles[n]:t[n]),o=a.reduce(function(l,u){return l[u]="",l},{});!Yo(i)||!Ou(i)||(Object.assign(i.style,o),Object.keys(s).forEach(function(l){i.removeAttribute(l)}))})}}const Eee={name:"applyStyles",enabled:!0,phase:"write",fn:Cee,effect:wee,requires:["computeStyles"]};function Ru(r){return r.split("-")[0]}var Xh=Math.max,B_=Math.min,Vp=Math.round;function Yw(){var r=navigator.userAgentData;return r!=null&&r.brands&&Array.isArray(r.brands)?r.brands.map(function(e){return e.brand+"/"+e.version}).join(" "):navigator.userAgent}function BN(){return!/^((?!chrome|android).)*safari/i.test(Yw())}function Wp(r,e,t){e===void 0&&(e=!1),t===void 0&&(t=!1);var n=r.getBoundingClientRect(),i=1,s=1;e&&Yo(r)&&(i=r.offsetWidth>0&&Vp(n.width)/r.offsetWidth||1,s=r.offsetHeight>0&&Vp(n.height)/r.offsetHeight||1);var a=mf(r)?yo(r):window,o=a.visualViewport,l=!BN()&&t,u=(n.left+(l&&o?o.offsetLeft:0))/i,c=(n.top+(l&&o?o.offsetTop:0))/s,h=n.width/i,f=n.height/s;return{width:h,height:f,top:c,right:u+h,bottom:c+f,left:u,x:u,y:c}}function Sk(r){var e=Wp(r),t=r.offsetWidth,n=r.offsetHeight;return Math.abs(e.width-t)<=1&&(t=e.width),Math.abs(e.height-n)<=1&&(n=e.height),{x:r.offsetLeft,y:r.offsetTop,width:t,height:n}}function NN(r,e){var t=e.getRootNode&&e.getRootNode();if(r.contains(e))return!0;if(t&&bk(t)){var n=e;do{if(n&&r.isSameNode(n))return!0;n=n.parentNode||n.host}while(n)}return!1}function Mc(r){return yo(r).getComputedStyle(r)}function kee(r){return["table","td","th"].indexOf(Ou(r))>=0}function eh(r){return((mf(r)?r.ownerDocument:r.document)||window.document).documentElement}function vS(r){return Ou(r)==="html"?r:r.assignedSlot||r.parentNode||(bk(r)?r.host:null)||eh(r)}function iO(r){return!Yo(r)||Mc(r).position==="fixed"?null:r.offsetParent}function Aee(r){var e=/firefox/i.test(Yw()),t=/Trident/i.test(Yw());if(t&&Yo(r)){var n=Mc(r);if(n.position==="fixed")return null}var i=vS(r);for(bk(i)&&(i=i.host);Yo(i)&&["html","body"].indexOf(Ou(i))<0;){var s=Mc(i);if(s.transform!=="none"||s.perspective!=="none"||s.contain==="paint"||["transform","perspective"].indexOf(s.willChange)!==-1||e&&s.willChange==="filter"||e&&s.filter&&s.filter!=="none")return i;i=i.parentNode}return null}function hv(r){for(var e=yo(r),t=iO(r);t&&kee(t)&&Mc(t).position==="static";)t=iO(t);return t&&(Ou(t)==="html"||Ou(t)==="body"&&Mc(t).position==="static")?e:t||Aee(r)||e}function Tk(r){return["top","bottom"].indexOf(r)>=0?"x":"y"}function tg(r,e,t){return Xh(r,B_(e,t))}function Dee(r,e,t){var n=tg(r,e,t);return n>t?t:n}function UN(){return{top:0,right:0,bottom:0,left:0}}function $N(r){return Object.assign({},UN(),r)}function jN(r,e){return e.reduce(function(t,n){return t[n]=r,t},{})}var Iee=function(e,t){return e=typeof e=="function"?e(Object.assign({},t.rects,{placement:t.placement})):e,$N(typeof e!="number"?e:jN(e,dv))};function Pee(r){var e,t=r.state,n=r.name,i=r.options,s=t.elements.arrow,a=t.modifiersData.popperOffsets,o=Ru(t.placement),l=Tk(o),u=[ja,nl].indexOf(o)>=0,c=u?"height":"width";if(!(!s||!a)){var h=Iee(i.padding,t),f=Sk(s),g=l==="y"?$a:ja,v=l==="y"?rl:nl,y=t.rects.reference[c]+t.rects.reference[l]-a[l]-t.rects.popper[c],_=a[l]-t.rects.reference[l],C=hv(s),E=C?l==="y"?C.clientHeight||0:C.clientWidth||0:0,D=y/2-_/2,I=h[g],k=E-f[c]-h[v],P=E/2-f[c]/2+D,N=tg(I,P,k),U=l;t.modifiersData[n]=(e={},e[U]=N,e.centerOffset=N-P,e)}}function Ree(r){var e=r.state,t=r.options,n=t.element,i=n===void 0?"[data-popper-arrow]":n;i!=null&&(typeof i=="string"&&(i=e.elements.popper.querySelector(i),!i)||NN(e.elements.popper,i)&&(e.elements.arrow=i))}const Lee={name:"arrow",enabled:!0,phase:"main",fn:Pee,effect:Ree,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function qp(r){return r.split("-")[1]}var Oee={top:"auto",right:"auto",bottom:"auto",left:"auto"};function Mee(r,e){var t=r.x,n=r.y,i=e.devicePixelRatio||1;return{x:Vp(t*i)/i||0,y:Vp(n*i)/i||0}}function sO(r){var e,t=r.popper,n=r.popperRect,i=r.placement,s=r.variation,a=r.offsets,o=r.position,l=r.gpuAcceleration,u=r.adaptive,c=r.roundOffsets,h=r.isFixed,f=a.x,g=f===void 0?0:f,v=a.y,y=v===void 0?0:v,_=typeof c=="function"?c({x:g,y}):{x:g,y};g=_.x,y=_.y;var C=a.hasOwnProperty("x"),E=a.hasOwnProperty("y"),D=ja,I=$a,k=window;if(u){var P=hv(t),N="clientHeight",U="clientWidth";if(P===yo(t)&&(P=eh(t),Mc(P).position!=="static"&&o==="absolute"&&(N="scrollHeight",U="scrollWidth")),P=P,i===$a||(i===ja||i===nl)&&s===Ig){I=rl;var B=h&&P===k&&k.visualViewport?k.visualViewport.height:P[N];y-=B-n.height,y*=l?1:-1}if(i===ja||(i===$a||i===rl)&&s===Ig){D=nl;var A=h&&P===k&&k.visualViewport?k.visualViewport.width:P[U];g-=A-n.width,g*=l?1:-1}}var $=Object.assign({position:o},u&&Oee),W=c===!0?Mee({x:g,y},yo(t)):{x:g,y};if(g=W.x,y=W.y,l){var V;return Object.assign({},$,(V={},V[I]=E?"0":"",V[D]=C?"0":"",V.transform=(k.devicePixelRatio||1)<=1?"translate("+g+"px, "+y+"px)":"translate3d("+g+"px, "+y+"px, 0)",V))}return Object.assign({},$,(e={},e[I]=E?y+"px":"",e[D]=C?g+"px":"",e.transform="",e))}function Fee(r){var e=r.state,t=r.options,n=t.gpuAcceleration,i=n===void 0?!0:n,s=t.adaptive,a=s===void 0?!0:s,o=t.roundOffsets,l=o===void 0?!0:o,u={placement:Ru(e.placement),variation:qp(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:i,isFixed:e.options.strategy==="fixed"};e.modifiersData.popperOffsets!=null&&(e.styles.popper=Object.assign({},e.styles.popper,sO(Object.assign({},u,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:a,roundOffsets:l})))),e.modifiersData.arrow!=null&&(e.styles.arrow=Object.assign({},e.styles.arrow,sO(Object.assign({},u,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})}const Bee={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:Fee,data:{}};var Iy={passive:!0};function Nee(r){var e=r.state,t=r.instance,n=r.options,i=n.scroll,s=i===void 0?!0:i,a=n.resize,o=a===void 0?!0:a,l=yo(e.elements.popper),u=[].concat(e.scrollParents.reference,e.scrollParents.popper);return s&&u.forEach(function(c){c.addEventListener("scroll",t.update,Iy)}),o&&l.addEventListener("resize",t.update,Iy),function(){s&&u.forEach(function(c){c.removeEventListener("scroll",t.update,Iy)}),o&&l.removeEventListener("resize",t.update,Iy)}}const Uee={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:Nee,data:{}};var $ee={left:"right",right:"left",bottom:"top",top:"bottom"};function i_(r){return r.replace(/left|right|bottom|top/g,function(e){return $ee[e]})}var jee={start:"end",end:"start"};function aO(r){return r.replace(/start|end/g,function(e){return jee[e]})}function Ck(r){var e=yo(r),t=e.pageXOffset,n=e.pageYOffset;return{scrollLeft:t,scrollTop:n}}function wk(r){return Wp(eh(r)).left+Ck(r).scrollLeft}function zee(r,e){var t=yo(r),n=eh(r),i=t.visualViewport,s=n.clientWidth,a=n.clientHeight,o=0,l=0;if(i){s=i.width,a=i.height;var u=BN();(u||!u&&e==="fixed")&&(o=i.offsetLeft,l=i.offsetTop)}return{width:s,height:a,x:o+wk(r),y:l}}function Hee(r){var e,t=eh(r),n=Ck(r),i=(e=r.ownerDocument)==null?void 0:e.body,s=Xh(t.scrollWidth,t.clientWidth,i?i.scrollWidth:0,i?i.clientWidth:0),a=Xh(t.scrollHeight,t.clientHeight,i?i.scrollHeight:0,i?i.clientHeight:0),o=-n.scrollLeft+wk(r),l=-n.scrollTop;return Mc(i||t).direction==="rtl"&&(o+=Xh(t.clientWidth,i?i.clientWidth:0)-s),{width:s,height:a,x:o,y:l}}function Ek(r){var e=Mc(r),t=e.overflow,n=e.overflowX,i=e.overflowY;return/auto|scroll|overlay|hidden/.test(t+i+n)}function zN(r){return["html","body","#document"].indexOf(Ou(r))>=0?r.ownerDocument.body:Yo(r)&&Ek(r)?r:zN(vS(r))}function rg(r,e){var t;e===void 0&&(e=[]);var n=zN(r),i=n===((t=r.ownerDocument)==null?void 0:t.body),s=yo(n),a=i?[s].concat(s.visualViewport||[],Ek(n)?n:[]):n,o=e.concat(a);return i?o:o.concat(rg(vS(a)))}function Qw(r){return Object.assign({},r,{left:r.x,top:r.y,right:r.x+r.width,bottom:r.y+r.height})}function Vee(r,e){var t=Wp(r,!1,e==="fixed");return t.top=t.top+r.clientTop,t.left=t.left+r.clientLeft,t.bottom=t.top+r.clientHeight,t.right=t.left+r.clientWidth,t.width=r.clientWidth,t.height=r.clientHeight,t.x=t.left,t.y=t.top,t}function oO(r,e,t){return e===MN?Qw(zee(r,t)):mf(e)?Vee(e,t):Qw(Hee(eh(r)))}function Wee(r){var e=rg(vS(r)),t=["absolute","fixed"].indexOf(Mc(r).position)>=0,n=t&&Yo(r)?hv(r):r;return mf(n)?e.filter(function(i){return mf(i)&&NN(i,n)&&Ou(i)!=="body"}):[]}function qee(r,e,t,n){var i=e==="clippingParents"?Wee(r):[].concat(e),s=[].concat(i,[t]),a=s[0],o=s.reduce(function(l,u){var c=oO(r,u,n);return l.top=Xh(c.top,l.top),l.right=B_(c.right,l.right),l.bottom=B_(c.bottom,l.bottom),l.left=Xh(c.left,l.left),l},oO(r,a,n));return o.width=o.right-o.left,o.height=o.bottom-o.top,o.x=o.left,o.y=o.top,o}function HN(r){var e=r.reference,t=r.element,n=r.placement,i=n?Ru(n):null,s=n?qp(n):null,a=e.x+e.width/2-t.width/2,o=e.y+e.height/2-t.height/2,l;switch(i){case $a:l={x:a,y:e.y-t.height};break;case rl:l={x:a,y:e.y+e.height};break;case nl:l={x:e.x+e.width,y:o};break;case ja:l={x:e.x-t.width,y:o};break;default:l={x:e.x,y:e.y}}var u=i?Tk(i):null;if(u!=null){var c=u==="y"?"height":"width";switch(s){case Hp:l[u]=l[u]-(e[c]/2-t[c]/2);break;case Ig:l[u]=l[u]+(e[c]/2-t[c]/2);break}}return l}function Pg(r,e){e===void 0&&(e={});var t=e,n=t.placement,i=n===void 0?r.placement:n,s=t.strategy,a=s===void 0?r.strategy:s,o=t.boundary,l=o===void 0?hee:o,u=t.rootBoundary,c=u===void 0?MN:u,h=t.elementContext,f=h===void 0?_0:h,g=t.altBoundary,v=g===void 0?!1:g,y=t.padding,_=y===void 0?0:y,C=$N(typeof _!="number"?_:jN(_,dv)),E=f===_0?fee:_0,D=r.rects.popper,I=r.elements[v?E:f],k=qee(mf(I)?I:I.contextElement||eh(r.elements.popper),l,c,a),P=Wp(r.elements.reference),N=HN({reference:P,element:D,placement:i}),U=Qw(Object.assign({},D,N)),B=f===_0?U:P,A={top:k.top-B.top+C.top,bottom:B.bottom-k.bottom+C.bottom,left:k.left-B.left+C.left,right:B.right-k.right+C.right},$=r.modifiersData.offset;if(f===_0&&$){var W=$[i];Object.keys(A).forEach(function(V){var Q=[nl,rl].indexOf(V)>=0?1:-1,ie=[$a,rl].indexOf(V)>=0?"y":"x";A[V]+=W[ie]*Q})}return A}function Gee(r,e){e===void 0&&(e={});var t=e,n=t.placement,i=t.boundary,s=t.rootBoundary,a=t.padding,o=t.flipVariations,l=t.allowedAutoPlacements,u=l===void 0?FN:l,c=qp(n),h=c?o?nO:nO.filter(function(v){return qp(v)===c}):dv,f=h.filter(function(v){return u.indexOf(v)>=0});f.length===0&&(f=h);var g=f.reduce(function(v,y){return v[y]=Pg(r,{placement:y,boundary:i,rootBoundary:s,padding:a})[Ru(y)],v},{});return Object.keys(g).sort(function(v,y){return g[v]-g[y]})}function Kee(r){if(Ru(r)===_k)return[];var e=i_(r);return[aO(r),e,aO(e)]}function Xee(r){var e=r.state,t=r.options,n=r.name;if(!e.modifiersData[n]._skip){for(var i=t.mainAxis,s=i===void 0?!0:i,a=t.altAxis,o=a===void 0?!0:a,l=t.fallbackPlacements,u=t.padding,c=t.boundary,h=t.rootBoundary,f=t.altBoundary,g=t.flipVariations,v=g===void 0?!0:g,y=t.allowedAutoPlacements,_=e.options.placement,C=Ru(_),E=C===_,D=l||(E||!v?[i_(_)]:Kee(_)),I=[_].concat(D).reduce(function(ye,Oe){return ye.concat(Ru(Oe)===_k?Gee(e,{placement:Oe,boundary:c,rootBoundary:h,padding:u,flipVariations:v,allowedAutoPlacements:y}):Oe)},[]),k=e.rects.reference,P=e.rects.popper,N=new Map,U=!0,B=I[0],A=0;A<I.length;A++){var $=I[A],W=Ru($),V=qp($)===Hp,Q=[$a,rl].indexOf(W)>=0,ie=Q?"width":"height",ne=Pg(e,{placement:$,boundary:c,rootBoundary:h,altBoundary:f,padding:u}),ue=Q?V?nl:ja:V?rl:$a;k[ie]>P[ie]&&(ue=i_(ue));var se=i_(ue),ae=[];if(s&&ae.push(ne[W]<=0),o&&ae.push(ne[ue]<=0,ne[se]<=0),ae.every(function(ye){return ye})){B=$,U=!1;break}N.set($,ae)}if(U)for(var ce=v?3:1,ee=function(Oe){var Le=I.find(function(st){var ze=N.get(st);if(ze)return ze.slice(0,Oe).every(function(pt){return pt})});if(Le)return B=Le,"break"},pe=ce;pe>0;pe--){var me=ee(pe);if(me==="break")break}e.placement!==B&&(e.modifiersData[n]._skip=!0,e.placement=B,e.reset=!0)}}const Yee={name:"flip",enabled:!0,phase:"main",fn:Xee,requiresIfExists:["offset"],data:{_skip:!1}};function lO(r,e,t){return t===void 0&&(t={x:0,y:0}),{top:r.top-e.height-t.y,right:r.right-e.width+t.x,bottom:r.bottom-e.height+t.y,left:r.left-e.width-t.x}}function uO(r){return[$a,nl,rl,ja].some(function(e){return r[e]>=0})}function Qee(r){var e=r.state,t=r.name,n=e.rects.reference,i=e.rects.popper,s=e.modifiersData.preventOverflow,a=Pg(e,{elementContext:"reference"}),o=Pg(e,{altBoundary:!0}),l=lO(a,n),u=lO(o,i,s),c=uO(l),h=uO(u);e.modifiersData[t]={referenceClippingOffsets:l,popperEscapeOffsets:u,isReferenceHidden:c,hasPopperEscaped:h},e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-reference-hidden":c,"data-popper-escaped":h})}const Jee={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:Qee};function Zee(r,e,t){var n=Ru(r),i=[ja,$a].indexOf(n)>=0?-1:1,s=typeof t=="function"?t(Object.assign({},e,{placement:r})):t,a=s[0],o=s[1];return a=a||0,o=(o||0)*i,[ja,nl].indexOf(n)>=0?{x:o,y:a}:{x:a,y:o}}function ete(r){var e=r.state,t=r.options,n=r.name,i=t.offset,s=i===void 0?[0,0]:i,a=FN.reduce(function(c,h){return c[h]=Zee(h,e.rects,s),c},{}),o=a[e.placement],l=o.x,u=o.y;e.modifiersData.popperOffsets!=null&&(e.modifiersData.popperOffsets.x+=l,e.modifiersData.popperOffsets.y+=u),e.modifiersData[n]=a}const tte={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:ete};function rte(r){var e=r.state,t=r.name;e.modifiersData[t]=HN({reference:e.rects.reference,element:e.rects.popper,placement:e.placement})}const nte={name:"popperOffsets",enabled:!0,phase:"read",fn:rte,data:{}};function ite(r){return r==="x"?"y":"x"}function ste(r){var e=r.state,t=r.options,n=r.name,i=t.mainAxis,s=i===void 0?!0:i,a=t.altAxis,o=a===void 0?!1:a,l=t.boundary,u=t.rootBoundary,c=t.altBoundary,h=t.padding,f=t.tether,g=f===void 0?!0:f,v=t.tetherOffset,y=v===void 0?0:v,_=Pg(e,{boundary:l,rootBoundary:u,padding:h,altBoundary:c}),C=Ru(e.placement),E=qp(e.placement),D=!E,I=Tk(C),k=ite(I),P=e.modifiersData.popperOffsets,N=e.rects.reference,U=e.rects.popper,B=typeof y=="function"?y(Object.assign({},e.rects,{placement:e.placement})):y,A=typeof B=="number"?{mainAxis:B,altAxis:B}:Object.assign({mainAxis:0,altAxis:0},B),$=e.modifiersData.offset?e.modifiersData.offset[e.placement]:null,W={x:0,y:0};if(P){if(s){var V,Q=I==="y"?$a:ja,ie=I==="y"?rl:nl,ne=I==="y"?"height":"width",ue=P[I],se=ue+_[Q],ae=ue-_[ie],ce=g?-U[ne]/2:0,ee=E===Hp?N[ne]:U[ne],pe=E===Hp?-U[ne]:-N[ne],me=e.elements.arrow,ye=g&&me?Sk(me):{width:0,height:0},Oe=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:UN(),Le=Oe[Q],st=Oe[ie],ze=tg(0,N[ne],ye[ne]),pt=D?N[ne]/2-ce-ze-Le-A.mainAxis:ee-ze-Le-A.mainAxis,Ye=D?-N[ne]/2+ce+ze+st+A.mainAxis:pe+ze+st+A.mainAxis,Pt=e.elements.arrow&&hv(e.elements.arrow),Rt=Pt?I==="y"?Pt.clientTop||0:Pt.clientLeft||0:0,Ve=(V=$?.[I])!=null?V:0,Ne=ue+pt-Ve-Rt,Ie=ue+Ye-Ve,Ue=tg(g?B_(se,Ne):se,ue,g?Xh(ae,Ie):ae);P[I]=Ue,W[I]=Ue-ue}if(o){var et,ot=I==="x"?$a:ja,dt=I==="x"?rl:nl,it=P[k],bt=k==="y"?"height":"width",lt=it+_[ot],gr=it-_[dt],hr=[$a,ja].indexOf(C)!==-1,Rr=(et=$?.[k])!=null?et:0,nr=hr?lt:it-N[bt]-U[bt]-Rr+A.altAxis,qt=hr?it+N[bt]+U[bt]-Rr-A.altAxis:gr,fr=g&&hr?Dee(nr,it,qt):tg(g?nr:lt,it,g?qt:gr);P[k]=fr,W[k]=fr-it}e.modifiersData[n]=W}}const ate={name:"preventOverflow",enabled:!0,phase:"main",fn:ste,requiresIfExists:["offset"]};function ote(r){return{scrollLeft:r.scrollLeft,scrollTop:r.scrollTop}}function lte(r){return r===yo(r)||!Yo(r)?Ck(r):ote(r)}function ute(r){var e=r.getBoundingClientRect(),t=Vp(e.width)/r.offsetWidth||1,n=Vp(e.height)/r.offsetHeight||1;return t!==1||n!==1}function cte(r,e,t){t===void 0&&(t=!1);var n=Yo(e),i=Yo(e)&&ute(e),s=eh(e),a=Wp(r,i,t),o={scrollLeft:0,scrollTop:0},l={x:0,y:0};return(n||!n&&!t)&&((Ou(e)!=="body"||Ek(s))&&(o=lte(e)),Yo(e)?(l=Wp(e,!0),l.x+=e.clientLeft,l.y+=e.clientTop):s&&(l.x=wk(s))),{x:a.left+o.scrollLeft-l.x,y:a.top+o.scrollTop-l.y,width:a.width,height:a.height}}function dte(r){var e=new Map,t=new Set,n=[];r.forEach(function(s){e.set(s.name,s)});function i(s){t.add(s.name);var a=[].concat(s.requires||[],s.requiresIfExists||[]);a.forEach(function(o){if(!t.has(o)){var l=e.get(o);l&&i(l)}}),n.push(s)}return r.forEach(function(s){t.has(s.name)||i(s)}),n}function hte(r){var e=dte(r);return Tee.reduce(function(t,n){return t.concat(e.filter(function(i){return i.phase===n}))},[])}function fte(r){var e;return function(){return e||(e=new Promise(function(t){Promise.resolve().then(function(){e=void 0,t(r())})})),e}}function pte(r){var e=r.reduce(function(t,n){var i=t[n.name];return t[n.name]=i?Object.assign({},i,n,{options:Object.assign({},i.options,n.options),data:Object.assign({},i.data,n.data)}):n,t},{});return Object.keys(e).map(function(t){return e[t]})}var cO={placement:"bottom",modifiers:[],strategy:"absolute"};function dO(){for(var r=arguments.length,e=new Array(r),t=0;t<r;t++)e[t]=arguments[t];return!e.some(function(n){return!(n&&typeof n.getBoundingClientRect=="function")})}function mte(r){r===void 0&&(r={});var e=r,t=e.defaultModifiers,n=t===void 0?[]:t,i=e.defaultOptions,s=i===void 0?cO:i;return function(o,l,u){u===void 0&&(u=s);var c={placement:"bottom",orderedModifiers:[],options:Object.assign({},cO,s),modifiersData:{},elements:{reference:o,popper:l},attributes:{},styles:{}},h=[],f=!1,g={state:c,setOptions:function(C){var E=typeof C=="function"?C(c.options):C;y(),c.options=Object.assign({},s,c.options,E),c.scrollParents={reference:mf(o)?rg(o):o.contextElement?rg(o.contextElement):[],popper:rg(l)};var D=hte(pte([].concat(n,c.options.modifiers)));return c.orderedModifiers=D.filter(function(I){return I.enabled}),v(),g.update()},forceUpdate:function(){if(!f){var C=c.elements,E=C.reference,D=C.popper;if(dO(E,D)){c.rects={reference:cte(E,hv(D),c.options.strategy==="fixed"),popper:Sk(D)},c.reset=!1,c.placement=c.options.placement,c.orderedModifiers.forEach(function(A){return c.modifiersData[A.name]=Object.assign({},A.data)});for(var I=0;I<c.orderedModifiers.length;I++){if(c.reset===!0){c.reset=!1,I=-1;continue}var k=c.orderedModifiers[I],P=k.fn,N=k.options,U=N===void 0?{}:N,B=k.name;typeof P=="function"&&(c=P({state:c,options:U,name:B,instance:g})||c)}}}},update:fte(function(){return new Promise(function(_){g.forceUpdate(),_(c)})}),destroy:function(){y(),f=!0}};if(!dO(o,l))return g;g.setOptions(u).then(function(_){!f&&u.onFirstUpdate&&u.onFirstUpdate(_)});function v(){c.orderedModifiers.forEach(function(_){var C=_.name,E=_.options,D=E===void 0?{}:E,I=_.effect;if(typeof I=="function"){var k=I({state:c,name:C,instance:g,options:D}),P=function(){};h.push(k||P)}})}function y(){h.forEach(function(_){return _()}),h=[]}return g}}var gte=[Uee,nte,Bee,Eee,tte,Yee,ate,Lee,Jee],vte=mte({defaultModifiers:gte});function yte({theme:r,...e}){const t=Il in r?r[Il]:void 0;return O.jsx(fN,{...e,themeId:t?Il:void 0,theme:t||r})}const Py={colorSchemeStorageKey:"mui-color-scheme",defaultLightColorScheme:"light",defaultDarkColorScheme:"dark",modeStorageKey:"mui-mode"},{CssVarsProvider:xte}=KQ({themeId:Il,theme:()=>mS({cssVariables:!0}),colorSchemeStorageKey:Py.colorSchemeStorageKey,modeStorageKey:Py.modeStorageKey,defaultColorScheme:{light:Py.defaultLightColorScheme,dark:Py.defaultDarkColorScheme},resolveTheme:r=>{const e={...r,typography:_N(r.palette,r.typography)};return e.unstable_sx=function(n){return $d({sx:n,theme:this})},e}}),_te=xte;function bte({theme:r,...e}){const t=M.useMemo(()=>{if(typeof r=="function")return r;const n=Il in r?r[Il]:r;return"colorSchemes"in n?null:"vars"in n?r:{...r,vars:null}},[r]);return t?O.jsx(yte,{theme:t,...e}):O.jsx(_te,{theme:r,...e})}function VN(r,e){const t={...e};for(const n in r)if(Object.prototype.hasOwnProperty.call(r,n)){const i=n;if(i==="components"||i==="slots")t[i]={...r[i],...t[i]};else if(i==="componentsProps"||i==="slotProps"){const s=r[i],a=e[i];if(!a)t[i]=s||{};else if(!s)t[i]=a;else{t[i]={...a};for(const o in s)if(Object.prototype.hasOwnProperty.call(s,o)){const l=o;t[i][l]=VN(s[l],a[l])}}}else t[i]===void 0&&(t[i]=r[i])}return t}function N_(r){try{return r.matches(":focus-visible")}catch{}return!1}const hO={};function WN(r,e){const t=M.useRef(hO);return t.current===hO&&(t.current=r(e)),t}class U_{static create(){return new U_}static use(){const e=WN(U_.create).current,[t,n]=M.useState(!1);return e.shouldMount=t,e.setShouldMount=n,M.useEffect(e.mountEffect,[t]),e}constructor(){this.ref={current:null},this.mounted=null,this.didMount=!1,this.shouldMount=!1,this.setShouldMount=null}mount(){return this.mounted||(this.mounted=Tte(),this.shouldMount=!0,this.setShouldMount(this.shouldMount)),this.mounted}mountEffect=()=>{this.shouldMount&&!this.didMount&&this.ref.current!==null&&(this.didMount=!0,this.mounted.resolve())};start(...e){this.mount().then(()=>this.ref.current?.start(...e))}stop(...e){this.mount().then(()=>this.ref.current?.stop(...e))}pulsate(...e){this.mount().then(()=>this.ref.current?.pulsate(...e))}}function Ste(){return U_.use()}function Tte(){let r,e;const t=new Promise((n,i)=>{r=n,e=i});return t.resolve=r,t.reject=e,t}const Cte=[];function wte(r){M.useEffect(r,Cte)}class yS{static create(){return new yS}currentId=null;start(e,t){this.clear(),this.currentId=setTimeout(()=>{this.currentId=null,t()},e)}clear=()=>{this.currentId!==null&&(clearTimeout(this.currentId),this.currentId=null)};disposeEffect=()=>this.clear}function Ld(){const r=WN(yS.create).current;return wte(r.disposeEffect),r}function Ete(r){const{className:e,classes:t,pulsate:n=!1,rippleX:i,rippleY:s,rippleSize:a,in:o,onExited:l,timeout:u}=r,[c,h]=M.useState(!1),f=Dt(e,t.ripple,t.rippleVisible,n&&t.ripplePulsate),g={width:a,height:a,top:-(a/2)+s,left:-(a/2)+i},v=Dt(t.child,c&&t.childLeaving,n&&t.childPulsate);return!o&&!c&&h(!0),M.useEffect(()=>{if(!o&&l!=null){const y=setTimeout(l,u);return()=>{clearTimeout(y)}}},[l,o,u]),O.jsx("span",{className:f,style:g,children:O.jsx("span",{className:v})})}const Ho=Qt("MuiTouchRipple",["root","ripple","rippleVisible","ripplePulsate","child","childLeaving","childPulsate"]),Jw=550,kte=80,Ate=ov`
  0% {
    transform: scale(0);
    opacity: 0.1;
  }

  100% {
    transform: scale(1);
    opacity: 0.3;
  }
`,Dte=ov`
  0% {
    opacity: 1;
  }

  100% {
    opacity: 0;
  }
`,Ite=ov`
  0% {
    transform: scale(1);
  }

  50% {
    transform: scale(0.92);
  }

  100% {
    transform: scale(1);
  }
`,Pte=rt("span",{name:"MuiTouchRipple",slot:"Root"})({overflow:"hidden",pointerEvents:"none",position:"absolute",zIndex:0,top:0,right:0,bottom:0,left:0,borderRadius:"inherit"}),Rte=rt(Ete,{name:"MuiTouchRipple",slot:"Ripple"})`
  opacity: 0;
  position: absolute;

  &.${Ho.rippleVisible} {
    opacity: 0.3;
    transform: scale(1);
    animation-name: ${Ate};
    animation-duration: ${Jw}ms;
    animation-timing-function: ${({theme:r})=>r.transitions.easing.easeInOut};
  }

  &.${Ho.ripplePulsate} {
    animation-duration: ${({theme:r})=>r.transitions.duration.shorter}ms;
  }

  & .${Ho.child} {
    opacity: 1;
    display: block;
    width: 100%;
    height: 100%;
    border-radius: 50%;
    background-color: currentColor;
  }

  & .${Ho.childLeaving} {
    opacity: 0;
    animation-name: ${Dte};
    animation-duration: ${Jw}ms;
    animation-timing-function: ${({theme:r})=>r.transitions.easing.easeInOut};
  }

  & .${Ho.childPulsate} {
    position: absolute;
    /* @noflip */
    left: 0px;
    top: 0;
    animation-name: ${Ite};
    animation-duration: 2500ms;
    animation-timing-function: ${({theme:r})=>r.transitions.easing.easeInOut};
    animation-iteration-count: infinite;
    animation-delay: 200ms;
  }
`,Lte=M.forwardRef(function(e,t){const n=Yt({props:e,name:"MuiTouchRipple"}),{center:i=!1,classes:s={},className:a,...o}=n,[l,u]=M.useState([]),c=M.useRef(0),h=M.useRef(null);M.useEffect(()=>{h.current&&(h.current(),h.current=null)},[l]);const f=M.useRef(!1),g=Ld(),v=M.useRef(null),y=M.useRef(null),_=M.useCallback(I=>{const{pulsate:k,rippleX:P,rippleY:N,rippleSize:U,cb:B}=I;u(A=>[...A,O.jsx(Rte,{classes:{ripple:Dt(s.ripple,Ho.ripple),rippleVisible:Dt(s.rippleVisible,Ho.rippleVisible),ripplePulsate:Dt(s.ripplePulsate,Ho.ripplePulsate),child:Dt(s.child,Ho.child),childLeaving:Dt(s.childLeaving,Ho.childLeaving),childPulsate:Dt(s.childPulsate,Ho.childPulsate)},timeout:Jw,pulsate:k,rippleX:P,rippleY:N,rippleSize:U},c.current)]),c.current+=1,h.current=B},[s]),C=M.useCallback((I={},k={},P=()=>{})=>{const{pulsate:N=!1,center:U=i||k.pulsate,fakeElement:B=!1}=k;if(I?.type==="mousedown"&&f.current){f.current=!1;return}I?.type==="touchstart"&&(f.current=!0);const A=B?null:y.current,$=A?A.getBoundingClientRect():{width:0,height:0,left:0,top:0};let W,V,Q;if(U||I===void 0||I.clientX===0&&I.clientY===0||!I.clientX&&!I.touches)W=Math.round($.width/2),V=Math.round($.height/2);else{const{clientX:ie,clientY:ne}=I.touches&&I.touches.length>0?I.touches[0]:I;W=Math.round(ie-$.left),V=Math.round(ne-$.top)}if(U)Q=Math.sqrt((2*$.width**2+$.height**2)/3),Q%2===0&&(Q+=1);else{const ie=Math.max(Math.abs((A?A.clientWidth:0)-W),W)*2+2,ne=Math.max(Math.abs((A?A.clientHeight:0)-V),V)*2+2;Q=Math.sqrt(ie**2+ne**2)}I?.touches?v.current===null&&(v.current=()=>{_({pulsate:N,rippleX:W,rippleY:V,rippleSize:Q,cb:P})},g.start(kte,()=>{v.current&&(v.current(),v.current=null)})):_({pulsate:N,rippleX:W,rippleY:V,rippleSize:Q,cb:P})},[i,_,g]),E=M.useCallback(()=>{C({},{pulsate:!0})},[C]),D=M.useCallback((I,k)=>{if(g.clear(),I?.type==="touchend"&&v.current){v.current(),v.current=null,g.start(0,()=>{D(I,k)});return}v.current=null,u(P=>P.length>0?P.slice(1):P),h.current=k},[g]);return M.useImperativeHandle(t,()=>({pulsate:E,start:C,stop:D}),[E,C,D]),O.jsx(Pte,{className:Dt(Ho.root,s.root,a),ref:y,...o,children:O.jsx(gk,{component:null,exit:!0,children:l})})});function Ote(r){return er("MuiButtonBase",r)}const Mte=Qt("MuiButtonBase",["root","disabled","focusVisible"]),Fte=r=>{const{disabled:e,focusVisible:t,focusVisibleClassName:n,classes:i}=r,a=Zt({root:["root",e&&"disabled",t&&"focusVisible"]},Ote,i);return t&&n&&(a.root+=` ${n}`),a},Bte=rt("button",{name:"MuiButtonBase",slot:"Root"})({display:"inline-flex",alignItems:"center",justifyContent:"center",position:"relative",boxSizing:"border-box",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none",textDecoration:"none",color:"inherit","&::-moz-focus-inner":{borderStyle:"none"},[`&.${Mte.disabled}`]:{pointerEvents:"none",cursor:"default"},"@media print":{colorAdjust:"exact"}}),Mu=M.forwardRef(function(e,t){const n=Yt({props:e,name:"MuiButtonBase"}),{action:i,centerRipple:s=!1,children:a,className:o,component:l="button",disabled:u=!1,disableRipple:c=!1,disableTouchRipple:h=!1,focusRipple:f=!1,focusVisibleClassName:g,LinkComponent:v="a",onBlur:y,onClick:_,onContextMenu:C,onDragLeave:E,onFocus:D,onFocusVisible:I,onKeyDown:k,onKeyUp:P,onMouseDown:N,onMouseLeave:U,onMouseUp:B,onTouchEnd:A,onTouchMove:$,onTouchStart:W,tabIndex:V=0,TouchRippleProps:Q,touchRippleRef:ie,type:ne,...ue}=n,se=M.useRef(null),ae=Ste(),ce=Gn(ae.ref,ie),[ee,pe]=M.useState(!1);u&&ee&&pe(!1),M.useImperativeHandle(i,()=>({focusVisible:()=>{pe(!0),se.current.focus()}}),[]);const me=ae.shouldMount&&!c&&!u;M.useEffect(()=>{ee&&f&&!c&&ae.pulsate()},[c,f,ee,ae]);const ye=vc(ae,"start",N,h),Oe=vc(ae,"stop",C,h),Le=vc(ae,"stop",E,h),st=vc(ae,"stop",B,h),ze=vc(ae,"stop",lt=>{ee&&lt.preventDefault(),U&&U(lt)},h),pt=vc(ae,"start",W,h),Ye=vc(ae,"stop",A,h),Pt=vc(ae,"stop",$,h),Rt=vc(ae,"stop",lt=>{N_(lt.target)||pe(!1),y&&y(lt)},!1),Ve=la(lt=>{se.current||(se.current=lt.currentTarget),N_(lt.target)&&(pe(!0),I&&I(lt)),D&&D(lt)}),Ne=()=>{const lt=se.current;return l&&l!=="button"&&!(lt.tagName==="A"&&lt.href)},Ie=la(lt=>{f&&!lt.repeat&&ee&&lt.key===" "&&ae.stop(lt,()=>{ae.start(lt)}),lt.target===lt.currentTarget&&Ne()&&lt.key===" "&&lt.preventDefault(),k&&k(lt),lt.target===lt.currentTarget&&Ne()&&lt.key==="Enter"&&!u&&(lt.preventDefault(),_&&_(lt))}),Ue=la(lt=>{f&&lt.key===" "&&ee&&!lt.defaultPrevented&&ae.stop(lt,()=>{ae.pulsate(lt)}),P&&P(lt),_&&lt.target===lt.currentTarget&&Ne()&&lt.key===" "&&!lt.defaultPrevented&&_(lt)});let et=l;et==="button"&&(ue.href||ue.to)&&(et=v);const ot={};et==="button"?(ot.type=ne===void 0?"button":ne,ot.disabled=u):(!ue.href&&!ue.to&&(ot.role="button"),u&&(ot["aria-disabled"]=u));const dt=Gn(t,se),it={...n,centerRipple:s,component:l,disabled:u,disableRipple:c,disableTouchRipple:h,focusRipple:f,tabIndex:V,focusVisible:ee},bt=Fte(it);return O.jsxs(Bte,{as:et,className:Dt(bt.root,o),ownerState:it,onBlur:Rt,onClick:_,onContextMenu:Oe,onFocus:Ve,onKeyDown:Ie,onKeyUp:Ue,onMouseDown:ye,onMouseLeave:ze,onMouseUp:st,onDragLeave:Le,onTouchEnd:Ye,onTouchMove:Pt,onTouchStart:pt,ref:dt,tabIndex:u?-1:V,type:ne,...ot,...ue,children:[a,me?O.jsx(Lte,{ref:ce,center:s,...Q}):null]})});function vc(r,e,t,n=!1){return la(i=>(t&&t(i),n||r[e](i),!0))}function Nte(r){return er("MuiCircularProgress",r)}Qt("MuiCircularProgress",["root","determinate","indeterminate","colorPrimary","colorSecondary","svg","circle","circleDeterminate","circleIndeterminate","circleDisableShrink"]);const yd=44,Zw=ov`
  0% {
    transform: rotate(0deg);
  }

  100% {
    transform: rotate(360deg);
  }
`,e2=ov`
  0% {
    stroke-dasharray: 1px, 200px;
    stroke-dashoffset: 0;
  }

  50% {
    stroke-dasharray: 100px, 200px;
    stroke-dashoffset: -15px;
  }

  100% {
    stroke-dasharray: 1px, 200px;
    stroke-dashoffset: -126px;
  }
`,Ute=typeof Zw!="string"?ak`
        animation: ${Zw} 1.4s linear infinite;
      `:null,$te=typeof e2!="string"?ak`
        animation: ${e2} 1.4s ease-in-out infinite;
      `:null,jte=r=>{const{classes:e,variant:t,color:n,disableShrink:i}=r,s={root:["root",t,`color${ft(n)}`],svg:["svg"],circle:["circle",`circle${ft(t)}`,i&&"circleDisableShrink"]};return Zt(s,Nte,e)},zte=rt("span",{name:"MuiCircularProgress",slot:"Root",overridesResolver:(r,e)=>{const{ownerState:t}=r;return[e.root,e[t.variant],e[`color${ft(t.color)}`]]}})(cr(({theme:r})=>({display:"inline-block",variants:[{props:{variant:"determinate"},style:{transition:r.transitions.create("transform")}},{props:{variant:"indeterminate"},style:Ute||{animation:`${Zw} 1.4s linear infinite`}},...Object.entries(r.palette).filter(_i()).map(([e])=>({props:{color:e},style:{color:(r.vars||r).palette[e].main}}))]}))),Hte=rt("svg",{name:"MuiCircularProgress",slot:"Svg"})({display:"block"}),Vte=rt("circle",{name:"MuiCircularProgress",slot:"Circle",overridesResolver:(r,e)=>{const{ownerState:t}=r;return[e.circle,e[`circle${ft(t.variant)}`],t.disableShrink&&e.circleDisableShrink]}})(cr(({theme:r})=>({stroke:"currentColor",variants:[{props:{variant:"determinate"},style:{transition:r.transitions.create("stroke-dashoffset")}},{props:{variant:"indeterminate"},style:{strokeDasharray:"80px, 200px",strokeDashoffset:0}},{props:({ownerState:e})=>e.variant==="indeterminate"&&!e.disableShrink,style:$te||{animation:`${e2} 1.4s ease-in-out infinite`}}]}))),Gp=M.forwardRef(function(e,t){const n=Yt({props:e,name:"MuiCircularProgress"}),{className:i,color:s="primary",disableShrink:a=!1,size:o=40,style:l,thickness:u=3.6,value:c=0,variant:h="indeterminate",...f}=n,g={...n,color:s,disableShrink:a,size:o,thickness:u,value:c,variant:h},v=jte(g),y={},_={},C={};if(h==="determinate"){const E=2*Math.PI*((yd-u)/2);y.strokeDasharray=E.toFixed(3),C["aria-valuenow"]=Math.round(c),y.strokeDashoffset=`${((100-c)/100*E).toFixed(3)}px`,_.transform="rotate(-90deg)"}return O.jsx(zte,{className:Dt(v.root,i),style:{width:o,height:o,..._,...l},ownerState:g,ref:t,role:"progressbar",...C,...f,children:O.jsx(Hte,{className:v.svg,ownerState:g,viewBox:`${yd/2} ${yd/2} ${yd} ${yd}`,children:O.jsx(Vte,{className:v.circle,style:y,ownerState:g,cx:yd,cy:yd,r:(yd-u)/2,fill:"none",strokeWidth:u})})})});function Wte(r){return er("MuiButton",r)}const Eh=Qt("MuiButton",["root","text","textInherit","textPrimary","textSecondary","textSuccess","textError","textInfo","textWarning","outlined","outlinedInherit","outlinedPrimary","outlinedSecondary","outlinedSuccess","outlinedError","outlinedInfo","outlinedWarning","contained","containedInherit","containedPrimary","containedSecondary","containedSuccess","containedError","containedInfo","containedWarning","disableElevation","focusVisible","disabled","colorInherit","colorPrimary","colorSecondary","colorSuccess","colorError","colorInfo","colorWarning","textSizeSmall","textSizeMedium","textSizeLarge","outlinedSizeSmall","outlinedSizeMedium","outlinedSizeLarge","containedSizeSmall","containedSizeMedium","containedSizeLarge","sizeMedium","sizeSmall","sizeLarge","fullWidth","startIcon","endIcon","icon","iconSizeSmall","iconSizeMedium","iconSizeLarge","loading","loadingWrapper","loadingIconPlaceholder","loadingIndicator","loadingPositionCenter","loadingPositionStart","loadingPositionEnd"]),qN=M.createContext({}),qte=M.createContext(void 0),Gte=r=>{const{color:e,disableElevation:t,fullWidth:n,size:i,variant:s,loading:a,loadingPosition:o,classes:l}=r,u={root:["root",a&&"loading",s,`${s}${ft(e)}`,`size${ft(i)}`,`${s}Size${ft(i)}`,`color${ft(e)}`,t&&"disableElevation",n&&"fullWidth",a&&`loadingPosition${ft(o)}`],startIcon:["icon","startIcon",`iconSize${ft(i)}`],endIcon:["icon","endIcon",`iconSize${ft(i)}`],loadingIndicator:["loadingIndicator"],loadingWrapper:["loadingWrapper"]},c=Zt(u,Wte,l);return{...l,...c}},GN=[{props:{size:"small"},style:{"& > *:nth-of-type(1)":{fontSize:18}}},{props:{size:"medium"},style:{"& > *:nth-of-type(1)":{fontSize:20}}},{props:{size:"large"},style:{"& > *:nth-of-type(1)":{fontSize:22}}}],Kte=rt(Mu,{shouldForwardProp:r=>as(r)||r==="classes",name:"MuiButton",slot:"Root",overridesResolver:(r,e)=>{const{ownerState:t}=r;return[e.root,e[t.variant],e[`${t.variant}${ft(t.color)}`],e[`size${ft(t.size)}`],e[`${t.variant}Size${ft(t.size)}`],t.color==="inherit"&&e.colorInherit,t.disableElevation&&e.disableElevation,t.fullWidth&&e.fullWidth,t.loading&&e.loading]}})(cr(({theme:r})=>{const e=r.palette.mode==="light"?r.palette.grey[300]:r.palette.grey[800],t=r.palette.mode==="light"?r.palette.grey.A100:r.palette.grey[700];return{...r.typography.button,minWidth:64,padding:"6px 16px",border:0,borderRadius:(r.vars||r).shape.borderRadius,transition:r.transitions.create(["background-color","box-shadow","border-color","color"],{duration:r.transitions.duration.short}),"&:hover":{textDecoration:"none"},[`&.${Eh.disabled}`]:{color:(r.vars||r).palette.action.disabled},variants:[{props:{variant:"contained"},style:{color:"var(--variant-containedColor)",backgroundColor:"var(--variant-containedBg)",boxShadow:(r.vars||r).shadows[2],"&:hover":{boxShadow:(r.vars||r).shadows[4],"@media (hover: none)":{boxShadow:(r.vars||r).shadows[2]}},"&:active":{boxShadow:(r.vars||r).shadows[8]},[`&.${Eh.focusVisible}`]:{boxShadow:(r.vars||r).shadows[6]},[`&.${Eh.disabled}`]:{color:(r.vars||r).palette.action.disabled,boxShadow:(r.vars||r).shadows[0],backgroundColor:(r.vars||r).palette.action.disabledBackground}}},{props:{variant:"outlined"},style:{padding:"5px 15px",border:"1px solid currentColor",borderColor:"var(--variant-outlinedBorder, currentColor)",backgroundColor:"var(--variant-outlinedBg)",color:"var(--variant-outlinedColor)",[`&.${Eh.disabled}`]:{border:`1px solid ${(r.vars||r).palette.action.disabledBackground}`}}},{props:{variant:"text"},style:{padding:"6px 8px",color:"var(--variant-textColor)",backgroundColor:"var(--variant-textBg)"}},...Object.entries(r.palette).filter(_i()).map(([n])=>({props:{color:n},style:{"--variant-textColor":(r.vars||r).palette[n].main,"--variant-outlinedColor":(r.vars||r).palette[n].main,"--variant-outlinedBorder":r.vars?`rgba(${r.vars.palette[n].mainChannel} / 0.5)`:Kr(r.palette[n].main,.5),"--variant-containedColor":(r.vars||r).palette[n].contrastText,"--variant-containedBg":(r.vars||r).palette[n].main,"@media (hover: hover)":{"&:hover":{"--variant-containedBg":(r.vars||r).palette[n].dark,"--variant-textBg":r.vars?`rgba(${r.vars.palette[n].mainChannel} / ${r.vars.palette.action.hoverOpacity})`:Kr(r.palette[n].main,r.palette.action.hoverOpacity),"--variant-outlinedBorder":(r.vars||r).palette[n].main,"--variant-outlinedBg":r.vars?`rgba(${r.vars.palette[n].mainChannel} / ${r.vars.palette.action.hoverOpacity})`:Kr(r.palette[n].main,r.palette.action.hoverOpacity)}}}})),{props:{color:"inherit"},style:{color:"inherit",borderColor:"currentColor","--variant-containedBg":r.vars?r.vars.palette.Button.inheritContainedBg:e,"@media (hover: hover)":{"&:hover":{"--variant-containedBg":r.vars?r.vars.palette.Button.inheritContainedHoverBg:t,"--variant-textBg":r.vars?`rgba(${r.vars.palette.text.primaryChannel} / ${r.vars.palette.action.hoverOpacity})`:Kr(r.palette.text.primary,r.palette.action.hoverOpacity),"--variant-outlinedBg":r.vars?`rgba(${r.vars.palette.text.primaryChannel} / ${r.vars.palette.action.hoverOpacity})`:Kr(r.palette.text.primary,r.palette.action.hoverOpacity)}}}},{props:{size:"small",variant:"text"},style:{padding:"4px 5px",fontSize:r.typography.pxToRem(13)}},{props:{size:"large",variant:"text"},style:{padding:"8px 11px",fontSize:r.typography.pxToRem(15)}},{props:{size:"small",variant:"outlined"},style:{padding:"3px 9px",fontSize:r.typography.pxToRem(13)}},{props:{size:"large",variant:"outlined"},style:{padding:"7px 21px",fontSize:r.typography.pxToRem(15)}},{props:{size:"small",variant:"contained"},style:{padding:"4px 10px",fontSize:r.typography.pxToRem(13)}},{props:{size:"large",variant:"contained"},style:{padding:"8px 22px",fontSize:r.typography.pxToRem(15)}},{props:{disableElevation:!0},style:{boxShadow:"none","&:hover":{boxShadow:"none"},[`&.${Eh.focusVisible}`]:{boxShadow:"none"},"&:active":{boxShadow:"none"},[`&.${Eh.disabled}`]:{boxShadow:"none"}}},{props:{fullWidth:!0},style:{width:"100%"}},{props:{loadingPosition:"center"},style:{transition:r.transitions.create(["background-color","box-shadow","border-color"],{duration:r.transitions.duration.short}),[`&.${Eh.loading}`]:{color:"transparent"}}}]}})),Xte=rt("span",{name:"MuiButton",slot:"StartIcon",overridesResolver:(r,e)=>{const{ownerState:t}=r;return[e.startIcon,t.loading&&e.startIconLoadingStart,e[`iconSize${ft(t.size)}`]]}})(({theme:r})=>({display:"inherit",marginRight:8,marginLeft:-4,variants:[{props:{size:"small"},style:{marginLeft:-2}},{props:{loadingPosition:"start",loading:!0},style:{transition:r.transitions.create(["opacity"],{duration:r.transitions.duration.short}),opacity:0}},{props:{loadingPosition:"start",loading:!0,fullWidth:!0},style:{marginRight:-8}},...GN]})),Yte=rt("span",{name:"MuiButton",slot:"EndIcon",overridesResolver:(r,e)=>{const{ownerState:t}=r;return[e.endIcon,t.loading&&e.endIconLoadingEnd,e[`iconSize${ft(t.size)}`]]}})(({theme:r})=>({display:"inherit",marginRight:-4,marginLeft:8,variants:[{props:{size:"small"},style:{marginRight:-2}},{props:{loadingPosition:"end",loading:!0},style:{transition:r.transitions.create(["opacity"],{duration:r.transitions.duration.short}),opacity:0}},{props:{loadingPosition:"end",loading:!0,fullWidth:!0},style:{marginLeft:-8}},...GN]})),Qte=rt("span",{name:"MuiButton",slot:"LoadingIndicator"})(({theme:r})=>({display:"none",position:"absolute",visibility:"visible",variants:[{props:{loading:!0},style:{display:"flex"}},{props:{loadingPosition:"start"},style:{left:14}},{props:{loadingPosition:"start",size:"small"},style:{left:10}},{props:{variant:"text",loadingPosition:"start"},style:{left:6}},{props:{loadingPosition:"center"},style:{left:"50%",transform:"translate(-50%)",color:(r.vars||r).palette.action.disabled}},{props:{loadingPosition:"end"},style:{right:14}},{props:{loadingPosition:"end",size:"small"},style:{right:10}},{props:{variant:"text",loadingPosition:"end"},style:{right:6}},{props:{loadingPosition:"start",fullWidth:!0},style:{position:"relative",left:-10}},{props:{loadingPosition:"end",fullWidth:!0},style:{position:"relative",right:-10}}]})),fO=rt("span",{name:"MuiButton",slot:"LoadingIconPlaceholder"})({display:"inline-block",width:"1em",height:"1em"}),Dr=M.forwardRef(function(e,t){const n=M.useContext(qN),i=M.useContext(qte),s=VN(n,e),a=Yt({props:s,name:"MuiButton"}),{children:o,color:l="primary",component:u="button",className:c,disabled:h=!1,disableElevation:f=!1,disableFocusRipple:g=!1,endIcon:v,focusVisibleClassName:y,fullWidth:_=!1,id:C,loading:E=null,loadingIndicator:D,loadingPosition:I="center",size:k="medium",startIcon:P,type:N,variant:U="text",...B}=a,A=Jd(C),$=D??O.jsx(Gp,{"aria-labelledby":A,color:"inherit",size:16}),W={...a,color:l,component:u,disabled:h,disableElevation:f,disableFocusRipple:g,fullWidth:_,loading:E,loadingIndicator:$,loadingPosition:I,size:k,type:N,variant:U},V=Gte(W),Q=(P||E&&I==="start")&&O.jsx(Xte,{className:V.startIcon,ownerState:W,children:P||O.jsx(fO,{className:V.loadingIconPlaceholder,ownerState:W})}),ie=(v||E&&I==="end")&&O.jsx(Yte,{className:V.endIcon,ownerState:W,children:v||O.jsx(fO,{className:V.loadingIconPlaceholder,ownerState:W})}),ne=i||"",ue=typeof E=="boolean"?O.jsx("span",{className:V.loadingWrapper,style:{display:"contents"},children:E&&O.jsx(Qte,{className:V.loadingIndicator,ownerState:W,children:$})}):null;return O.jsxs(Kte,{ownerState:W,className:Dt(n.className,V.root,c,ne),component:u,disabled:h||E,focusRipple:!g,focusVisibleClassName:Dt(V.focusVisible,y),ref:t,type:N,id:E?A:C,...B,classes:V,children:[Q,I!=="end"&&ue,o,I==="end"&&ue,ie]})});function Jte(r){return ON("MuiLoadingButton",r)}const yc=dee("MuiLoadingButton",["root","loading","loadingIndicator","loadingIndicatorCenter","loadingIndicatorStart","loadingIndicatorEnd","endIconLoadingEnd","startIconLoadingStart"]),Zte=["children","disabled","id","loading","loadingIndicator","loadingPosition","variant"],ere=r=>{const{loading:e,loadingPosition:t,classes:n}=r,i={root:["root",e&&"loading"],startIcon:[e&&`startIconLoading${ft(t)}`],endIcon:[e&&`endIconLoading${ft(t)}`],loadingIndicator:["loadingIndicator",e&&`loadingIndicator${ft(t)}`]},s=oee(i,Jte,n);return sr({},n,s)},tre=r=>r!=="ownerState"&&r!=="theme"&&r!=="sx"&&r!=="as"&&r!=="classes",rre=rt(Dr,{shouldForwardProp:r=>tre(r)||r==="classes",name:"MuiLoadingButton",slot:"Root",overridesResolver:(r,e)=>[e.root,e.startIconLoadingStart&&{[`& .${yc.startIconLoadingStart}`]:e.startIconLoadingStart},e.endIconLoadingEnd&&{[`& .${yc.endIconLoadingEnd}`]:e.endIconLoadingEnd}]})(({ownerState:r,theme:e})=>sr({[`& .${yc.startIconLoadingStart}, & .${yc.endIconLoadingEnd}`]:{transition:e.transitions.create(["opacity"],{duration:e.transitions.duration.short}),opacity:0}},r.loadingPosition==="center"&&{transition:e.transitions.create(["background-color","box-shadow","border-color"],{duration:e.transitions.duration.short}),[`&.${yc.loading}`]:{color:"transparent"}},r.loadingPosition==="start"&&r.fullWidth&&{[`& .${yc.startIconLoadingStart}, & .${yc.endIconLoadingEnd}`]:{transition:e.transitions.create(["opacity"],{duration:e.transitions.duration.short}),opacity:0,marginRight:-8}},r.loadingPosition==="end"&&r.fullWidth&&{[`& .${yc.startIconLoadingStart}, & .${yc.endIconLoadingEnd}`]:{transition:e.transitions.create(["opacity"],{duration:e.transitions.duration.short}),opacity:0,marginLeft:-8}})),nre=rt("span",{name:"MuiLoadingButton",slot:"LoadingIndicator",overridesResolver:(r,e)=>{const{ownerState:t}=r;return[e.loadingIndicator,e[`loadingIndicator${ft(t.loadingPosition)}`]]}})(({theme:r,ownerState:e})=>sr({position:"absolute",visibility:"visible",display:"flex"},e.loadingPosition==="start"&&(e.variant==="outlined"||e.variant==="contained")&&{left:e.size==="small"?10:14},e.loadingPosition==="start"&&e.variant==="text"&&{left:6},e.loadingPosition==="center"&&{left:"50%",transform:"translate(-50%)",color:(r.vars||r).palette.action.disabled},e.loadingPosition==="end"&&(e.variant==="outlined"||e.variant==="contained")&&{right:e.size==="small"?10:14},e.loadingPosition==="end"&&e.variant==="text"&&{right:6},e.loadingPosition==="start"&&e.fullWidth&&{position:"relative",left:-10},e.loadingPosition==="end"&&e.fullWidth&&{position:"relative",right:-10})),Xo=M.forwardRef(function(e,t){const n=M.useContext(qN),i=LN(n,e),s=Yt({props:i,name:"MuiLoadingButton"}),{children:a,disabled:o=!1,id:l,loading:u=!1,loadingIndicator:c,loadingPosition:h="center",variant:f="text"}=s,g=gS(s,Zte),v=Jd(l),y=c??O.jsx(Gp,{"aria-labelledby":v,color:"inherit",size:16}),_=sr({},s,{disabled:o,loading:u,loadingIndicator:y,loadingPosition:h,variant:f}),C=ere(_),E=u?O.jsx(nre,{className:C.loadingIndicator,ownerState:_,children:y}):null;return O.jsxs(rre,sr({disabled:o||u,id:v,ref:t},g,{variant:f,classes:C,ownerState:_,children:[_.loadingPosition==="end"?a:E,_.loadingPosition==="end"?E:a]}))}),t2=mr(O.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m-1 17.93c-3.95-.49-7-3.85-7-7.93 0-.62.08-1.21.21-1.79L9 15v1c0 1.1.9 2 2 2zm6.9-2.54c-.26-.81-1-1.39-1.9-1.39h-1v-3c0-.55-.45-1-1-1H8v-2h2c.55 0 1-.45 1-1V7h2c1.1 0 2-.9 2-2v-.41c2.93 1.19 5 4.06 5 7.41 0 2.08-.8 3.97-2.1 5.39"})),ire="/assets/icon-BiexIA3y.png",sre=Qt("MuiBox",["root"]),are=mS(),wt=gQ({themeId:Il,defaultTheme:are,defaultClassName:sre.root,generateClassName:xN.generate}),pO=mr(O.jsx("path",{d:"M19 3H4.99C3.89 3 3 3.9 3 5l.01 14c0 1.1.89 2 1.99 2h10l6-6V5c0-1.1-.9-2-2-2M7 8h10v2H7zm5 6H7v-2h5zm2 5.5V14h5.5z"})),Pl=M.createContext({});function ore(r){return er("MuiList",r)}Qt("MuiList",["root","padding","dense","subheader"]);const lre=r=>{const{classes:e,disablePadding:t,dense:n,subheader:i}=r;return Zt({root:["root",!t&&"padding",n&&"dense",i&&"subheader"]},ore,e)},ure=rt("ul",{name:"MuiList",slot:"Root",overridesResolver:(r,e)=>{const{ownerState:t}=r;return[e.root,!t.disablePadding&&e.padding,t.dense&&e.dense,t.subheader&&e.subheader]}})({listStyle:"none",margin:0,padding:0,position:"relative",variants:[{props:({ownerState:r})=>!r.disablePadding,style:{paddingTop:8,paddingBottom:8}},{props:({ownerState:r})=>r.subheader,style:{paddingTop:0}}]}),r2=M.forwardRef(function(e,t){const n=Yt({props:e,name:"MuiList"}),{children:i,className:s,component:a="ul",dense:o=!1,disablePadding:l=!1,subheader:u,...c}=n,h=M.useMemo(()=>({dense:o}),[o]),f={...n,component:a,dense:o,disablePadding:l},g=lre(f);return O.jsx(Pl.Provider,{value:h,children:O.jsxs(ure,{as:a,className:Dt(g.root,s),ref:t,ownerState:f,...c,children:[u,i]})})});function Rg(r){return typeof r=="string"}function cre(r){return er("MuiListItem",r)}Qt("MuiListItem",["root","container","dense","alignItemsFlexStart","divider","gutters","padding","secondaryAction"]);function dre(r){return er("MuiListItemButton",r)}const ap=Qt("MuiListItemButton",["root","focusVisible","dense","alignItemsFlexStart","disabled","divider","gutters","selected"]),hre=(r,e)=>{const{ownerState:t}=r;return[e.root,t.dense&&e.dense,t.alignItems==="flex-start"&&e.alignItemsFlexStart,t.divider&&e.divider,!t.disableGutters&&e.gutters]},fre=r=>{const{alignItems:e,classes:t,dense:n,disabled:i,disableGutters:s,divider:a,selected:o}=r,u=Zt({root:["root",n&&"dense",!s&&"gutters",a&&"divider",i&&"disabled",e==="flex-start"&&"alignItemsFlexStart",o&&"selected"]},dre,t);return{...t,...u}},pre=rt(Mu,{shouldForwardProp:r=>as(r)||r==="classes",name:"MuiListItemButton",slot:"Root",overridesResolver:hre})(cr(({theme:r})=>({display:"flex",flexGrow:1,justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",minWidth:0,boxSizing:"border-box",textAlign:"left",paddingTop:8,paddingBottom:8,transition:r.transitions.create("background-color",{duration:r.transitions.duration.shortest}),"&:hover":{textDecoration:"none",backgroundColor:(r.vars||r).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${ap.selected}`]:{backgroundColor:r.vars?`rgba(${r.vars.palette.primary.mainChannel} / ${r.vars.palette.action.selectedOpacity})`:Kr(r.palette.primary.main,r.palette.action.selectedOpacity),[`&.${ap.focusVisible}`]:{backgroundColor:r.vars?`rgba(${r.vars.palette.primary.mainChannel} / calc(${r.vars.palette.action.selectedOpacity} + ${r.vars.palette.action.focusOpacity}))`:Kr(r.palette.primary.main,r.palette.action.selectedOpacity+r.palette.action.focusOpacity)}},[`&.${ap.selected}:hover`]:{backgroundColor:r.vars?`rgba(${r.vars.palette.primary.mainChannel} / calc(${r.vars.palette.action.selectedOpacity} + ${r.vars.palette.action.hoverOpacity}))`:Kr(r.palette.primary.main,r.palette.action.selectedOpacity+r.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:r.vars?`rgba(${r.vars.palette.primary.mainChannel} / ${r.vars.palette.action.selectedOpacity})`:Kr(r.palette.primary.main,r.palette.action.selectedOpacity)}},[`&.${ap.focusVisible}`]:{backgroundColor:(r.vars||r).palette.action.focus},[`&.${ap.disabled}`]:{opacity:(r.vars||r).palette.action.disabledOpacity},variants:[{props:({ownerState:e})=>e.divider,style:{borderBottom:`1px solid ${(r.vars||r).palette.divider}`,backgroundClip:"padding-box"}},{props:{alignItems:"flex-start"},style:{alignItems:"flex-start"}},{props:({ownerState:e})=>!e.disableGutters,style:{paddingLeft:16,paddingRight:16}},{props:({ownerState:e})=>e.dense,style:{paddingTop:4,paddingBottom:4}}]}))),mO=M.forwardRef(function(e,t){const n=Yt({props:e,name:"MuiListItemButton"}),{alignItems:i="center",autoFocus:s=!1,component:a="div",children:o,dense:l=!1,disableGutters:u=!1,divider:c=!1,focusVisibleClassName:h,selected:f=!1,className:g,...v}=n,y=M.useContext(Pl),_=M.useMemo(()=>({dense:l||y.dense||!1,alignItems:i,disableGutters:u}),[i,y.dense,l,u]),C=M.useRef(null);tl(()=>{s&&C.current&&C.current.focus()},[s]);const E={...n,alignItems:i,dense:_.dense,disableGutters:u,divider:c,selected:f},D=fre(E),I=Gn(C,t);return O.jsx(Pl.Provider,{value:_,children:O.jsx(pre,{ref:I,href:v.href||v.to,component:(v.href||v.to)&&a==="div"?"button":a,focusVisibleClassName:Dt(D.focusVisible,h),ownerState:E,className:Dt(D.root,g),...v,classes:D,children:o})})});function mre(r){return er("MuiListItemSecondaryAction",r)}Qt("MuiListItemSecondaryAction",["root","disableGutters"]);const gre=r=>{const{disableGutters:e,classes:t}=r;return Zt({root:["root",e&&"disableGutters"]},mre,t)},vre=rt("div",{name:"MuiListItemSecondaryAction",slot:"Root",overridesResolver:(r,e)=>{const{ownerState:t}=r;return[e.root,t.disableGutters&&e.disableGutters]}})({position:"absolute",right:16,top:"50%",transform:"translateY(-50%)",variants:[{props:({ownerState:r})=>r.disableGutters,style:{right:0}}]}),KN=M.forwardRef(function(e,t){const n=Yt({props:e,name:"MuiListItemSecondaryAction"}),{className:i,...s}=n,a=M.useContext(Pl),o={...n,disableGutters:a.disableGutters},l=gre(o);return O.jsx(vre,{className:Dt(l.root,i),ownerState:o,ref:t,...s})});KN.muiName="ListItemSecondaryAction";const yre=(r,e)=>{const{ownerState:t}=r;return[e.root,t.dense&&e.dense,t.alignItems==="flex-start"&&e.alignItemsFlexStart,t.divider&&e.divider,!t.disableGutters&&e.gutters,!t.disablePadding&&e.padding,t.hasSecondaryAction&&e.secondaryAction]},xre=r=>{const{alignItems:e,classes:t,dense:n,disableGutters:i,disablePadding:s,divider:a,hasSecondaryAction:o}=r;return Zt({root:["root",n&&"dense",!i&&"gutters",!s&&"padding",a&&"divider",e==="flex-start"&&"alignItemsFlexStart",o&&"secondaryAction"],container:["container"]},cre,t)},_re=rt("div",{name:"MuiListItem",slot:"Root",overridesResolver:yre})(cr(({theme:r})=>({display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",width:"100%",boxSizing:"border-box",textAlign:"left",variants:[{props:({ownerState:e})=>!e.disablePadding,style:{paddingTop:8,paddingBottom:8}},{props:({ownerState:e})=>!e.disablePadding&&e.dense,style:{paddingTop:4,paddingBottom:4}},{props:({ownerState:e})=>!e.disablePadding&&!e.disableGutters,style:{paddingLeft:16,paddingRight:16}},{props:({ownerState:e})=>!e.disablePadding&&!!e.secondaryAction,style:{paddingRight:48}},{props:({ownerState:e})=>!!e.secondaryAction,style:{[`& > .${ap.root}`]:{paddingRight:48}}},{props:{alignItems:"flex-start"},style:{alignItems:"flex-start"}},{props:({ownerState:e})=>e.divider,style:{borderBottom:`1px solid ${(r.vars||r).palette.divider}`,backgroundClip:"padding-box"}},{props:({ownerState:e})=>e.button,style:{transition:r.transitions.create("background-color",{duration:r.transitions.duration.shortest}),"&:hover":{textDecoration:"none",backgroundColor:(r.vars||r).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}}}},{props:({ownerState:e})=>e.hasSecondaryAction,style:{paddingRight:48}}]}))),bre=rt("li",{name:"MuiListItem",slot:"Container"})({position:"relative"}),Sre=M.forwardRef(function(e,t){const n=Yt({props:e,name:"MuiListItem"}),{alignItems:i="center",children:s,className:a,component:o,components:l={},componentsProps:u={},ContainerComponent:c="li",ContainerProps:{className:h,...f}={},dense:g=!1,disableGutters:v=!1,disablePadding:y=!1,divider:_=!1,secondaryAction:C,slotProps:E={},slots:D={},...I}=n,k=M.useContext(Pl),P=M.useMemo(()=>({dense:g||k.dense||!1,alignItems:i,disableGutters:v}),[i,k.dense,g,v]),N=M.useRef(null),U=M.Children.toArray(s),B=U.length&&n_(U[U.length-1],["ListItemSecondaryAction"]),A={...n,alignItems:i,dense:P.dense,disableGutters:v,disablePadding:y,divider:_,hasSecondaryAction:B},$=xre(A),W=Gn(N,t),V=D.root||l.Root||_re,Q=E.root||u.root||{},ie={className:Dt($.root,Q.className,a),...I};let ne=o||"li";return B?(ne=!ie.component&&!o?"div":ne,c==="li"&&(ne==="li"?ne="div":ie.component==="li"&&(ie.component="div")),O.jsx(Pl.Provider,{value:P,children:O.jsxs(bre,{as:c,className:Dt($.container,h),ref:W,ownerState:A,...f,children:[O.jsx(V,{...Q,...!Rg(V)&&{as:ne,ownerState:{...A,...Q.ownerState}},...ie,children:U}),U.pop()]})})):O.jsx(Pl.Provider,{value:P,children:O.jsxs(V,{...Q,as:ne,ref:W,...!Rg(V)&&{ownerState:{...A,...Q.ownerState}},...ie,children:[U,C&&O.jsx(KN,{children:C})]})})});function Tre(r){return er("MuiListItemIcon",r)}const gO=Qt("MuiListItemIcon",["root","alignItemsFlexStart"]),Cre=r=>{const{alignItems:e,classes:t}=r;return Zt({root:["root",e==="flex-start"&&"alignItemsFlexStart"]},Tre,t)},wre=rt("div",{name:"MuiListItemIcon",slot:"Root",overridesResolver:(r,e)=>{const{ownerState:t}=r;return[e.root,t.alignItems==="flex-start"&&e.alignItemsFlexStart]}})(cr(({theme:r})=>({minWidth:56,color:(r.vars||r).palette.action.active,flexShrink:0,display:"inline-flex",variants:[{props:{alignItems:"flex-start"},style:{marginTop:8}}]}))),vO=M.forwardRef(function(e,t){const n=Yt({props:e,name:"MuiListItemIcon"}),{className:i,...s}=n,a=M.useContext(Pl),o={...n,alignItems:a.alignItems},l=Cre(o);return O.jsx(wre,{className:Dt(l.root,i),ownerState:o,ref:t,...s})});function Ere(r){return er("MuiListItemText",r)}const up=Qt("MuiListItemText",["root","multiline","dense","inset","primary","secondary"]),kre=r=>{const{classes:e,inset:t,primary:n,secondary:i,dense:s}=r;return Zt({root:["root",t&&"inset",s&&"dense",n&&i&&"multiline"],primary:["primary"],secondary:["secondary"]},Ere,e)},Are=rt("div",{name:"MuiListItemText",slot:"Root",overridesResolver:(r,e)=>{const{ownerState:t}=r;return[{[`& .${up.primary}`]:e.primary},{[`& .${up.secondary}`]:e.secondary},e.root,t.inset&&e.inset,t.primary&&t.secondary&&e.multiline,t.dense&&e.dense]}})({flex:"1 1 auto",minWidth:0,marginTop:4,marginBottom:4,[`.${qL.root}:where(& .${up.primary})`]:{display:"block"},[`.${qL.root}:where(& .${up.secondary})`]:{display:"block"},variants:[{props:({ownerState:r})=>r.primary&&r.secondary,style:{marginTop:6,marginBottom:6}},{props:({ownerState:r})=>r.inset,style:{paddingLeft:56}}]}),$_=M.forwardRef(function(e,t){const n=Yt({props:e,name:"MuiListItemText"}),{children:i,className:s,disableTypography:a=!1,inset:o=!1,primary:l,primaryTypographyProps:u,secondary:c,secondaryTypographyProps:h,slots:f={},slotProps:g={},...v}=n,{dense:y}=M.useContext(Pl);let _=l??i,C=c;const E={...n,disableTypography:a,inset:o,primary:!!_,secondary:!!C,dense:y},D=kre(E),I={slots:f,slotProps:{primary:u,secondary:h,...g}},[k,P]=ur("root",{className:Dt(D.root,s),elementType:Are,externalForwardedProps:{...I,...v},ownerState:E,ref:t}),[N,U]=ur("primary",{className:D.primary,elementType:kr,externalForwardedProps:I,ownerState:E}),[B,A]=ur("secondary",{className:D.secondary,elementType:kr,externalForwardedProps:I,ownerState:E});return _!=null&&_.type!==kr&&!a&&(_=O.jsx(N,{variant:y?"body2":"body1",component:U?.variant?void 0:"span",...U,children:_})),C!=null&&C.type!==kr&&!a&&(C=O.jsx(B,{variant:"body2",color:"textSecondary",...A,children:C})),O.jsxs(k,{...P,children:[_,C]})}),Dre=mr(O.jsx("path",{d:"M11 21h-1l1-7H7.5c-.58 0-.57-.32-.38-.66s.05-.08.07-.12C8.48 10.94 10.42 7.54 13 3h1l-1 7h3.5c.49 0 .56.33.47.51l-.07.15C12.96 17.55 11 21 11 21"})),yO=mr(O.jsx("path",{d:"M19.14 12.94c.04-.3.06-.61.06-.94 0-.32-.02-.64-.07-.94l2.03-1.58c.18-.14.23-.41.12-.61l-1.92-3.32c-.12-.22-.37-.29-.59-.22l-2.39.96c-.5-.38-1.03-.7-1.62-.94l-.36-2.54c-.04-.24-.24-.41-.48-.41h-3.84c-.24 0-.43.17-.47.41l-.36 2.54c-.59.24-1.13.57-1.62.94l-2.39-.96c-.22-.08-.47 0-.59.22L2.74 8.87c-.12.21-.08.47.12.61l2.03 1.58c-.05.3-.09.63-.09.94s.02.64.07.94l-2.03 1.58c-.18.14-.23.41-.12.61l1.92 3.32c.12.22.37.29.59.22l2.39-.96c.5.38 1.03.7 1.62.94l.36 2.54c.05.24.24.41.48.41h3.84c.24 0 .44-.17.47-.41l.36-2.54c.59-.24 1.13-.56 1.62-.94l2.39.96c.22.08.47 0 .59-.22l1.92-3.32c.12-.22.07-.47-.12-.61zM12 15.6c-1.98 0-3.6-1.62-3.6-3.6s1.62-3.6 3.6-3.6 3.6 1.62 3.6 3.6-1.62 3.6-3.6 3.6"})),Ire=mr(O.jsx("path",{d:"M12 2C6.49 2 2 6.49 2 12s4.49 10 10 10 10-4.49 10-10S17.51 2 12 2m0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8m3-8c0 1.66-1.34 3-3 3s-3-1.34-3-3 1.34-3 3-3 3 1.34 3 3"})),Pre=mr(O.jsx("path",{d:"M19.35 10.04C18.67 6.59 15.64 4 12 4 9.11 4 6.6 5.64 5.35 8.04 2.34 8.36 0 10.91 0 14c0 3.31 2.69 6 6 6h13c2.76 0 5-2.24 5-5 0-2.64-2.05-4.78-4.65-4.96M19 18H6c-2.21 0-4-1.79-4-4s1.79-4 4-4h.71C7.37 7.69 9.48 6 12 6c3.04 0 5.5 2.46 5.5 5.5v.5H19c1.66 0 3 1.34 3 3s-1.34 3-3 3"})),XN=mr(O.jsx("path",{d:"M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5M12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5m0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3"})),kk=mr(O.jsx("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14"})),Rre=mr(O.jsx("path",{d:"M7 9H2V7h5zm0 3H2v2h5zm13.59 7-3.83-3.83c-.8.52-1.74.83-2.76.83-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5c0 1.02-.31 1.96-.83 2.75L22 17.59zM17 11c0-1.65-1.35-3-3-3s-3 1.35-3 3 1.35 3 3 3 3-1.35 3-3M2 19h10v-2H2z"})),Lre=mr(O.jsx("path",{d:"M22 16V4c0-1.1-.9-2-2-2H8c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2m-11-4 2.03 2.71L16 11l4 5H8zM2 6v14c0 1.1.9 2 2 2h14v-2H4V6z"})),Ore=mr(O.jsx("path",{d:"M16.5 3c-1.74 0-3.41.81-4.5 2.09C10.91 3.81 9.24 3 7.5 3 4.42 3 2 5.42 2 8.5c0 3.78 3.4 6.86 8.55 11.54L12 21.35l1.45-1.32C18.6 15.36 22 12.28 22 8.5 22 5.42 19.58 3 16.5 3m-4.4 15.55-.1.1-.1-.1C7.14 14.24 4 11.39 4 8.5 4 6.5 5.5 5 7.5 5c1.54 0 3.04.99 3.57 2.36h1.87C13.46 5.99 14.96 5 16.5 5c2 0 3.5 1.5 3.5 3.5 0 2.89-3.14 5.74-7.9 10.05"})),xO=mr(O.jsx("path",{d:"m12 21.35-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54z"}));function Mre(r){return er("MuiCollapse",r)}Qt("MuiCollapse",["root","horizontal","vertical","entered","hidden","wrapper","wrapperInner"]);const Fre=r=>{const{orientation:e,classes:t}=r,n={root:["root",`${e}`],entered:["entered"],hidden:["hidden"],wrapper:["wrapper",`${e}`],wrapperInner:["wrapperInner",`${e}`]};return Zt(n,Mre,t)},Bre=rt("div",{name:"MuiCollapse",slot:"Root",overridesResolver:(r,e)=>{const{ownerState:t}=r;return[e.root,e[t.orientation],t.state==="entered"&&e.entered,t.state==="exited"&&!t.in&&t.collapsedSize==="0px"&&e.hidden]}})(cr(({theme:r})=>({height:0,overflow:"hidden",transition:r.transitions.create("height"),variants:[{props:{orientation:"horizontal"},style:{height:"auto",width:0,transition:r.transitions.create("width")}},{props:{state:"entered"},style:{height:"auto",overflow:"visible"}},{props:{state:"entered",orientation:"horizontal"},style:{width:"auto"}},{props:({ownerState:e})=>e.state==="exited"&&!e.in&&e.collapsedSize==="0px",style:{visibility:"hidden"}}]}))),Nre=rt("div",{name:"MuiCollapse",slot:"Wrapper"})({display:"flex",width:"100%",variants:[{props:{orientation:"horizontal"},style:{width:"auto",height:"100%"}}]}),Ure=rt("div",{name:"MuiCollapse",slot:"WrapperInner"})({width:"100%",variants:[{props:{orientation:"horizontal"},style:{width:"auto",height:"100%"}}]}),n2=M.forwardRef(function(e,t){const n=Yt({props:e,name:"MuiCollapse"}),{addEndListener:i,children:s,className:a,collapsedSize:o="0px",component:l,easing:u,in:c,onEnter:h,onEntered:f,onEntering:g,onExit:v,onExited:y,onExiting:_,orientation:C="vertical",style:E,timeout:D=bN.standard,TransitionComponent:I=ll,...k}=n,P={...n,orientation:C,collapsedSize:o},N=Fre(P),U=Ul(),B=Ld(),A=M.useRef(null),$=M.useRef(),W=typeof o=="number"?`${o}px`:o,V=C==="horizontal",Q=V?"width":"height",ie=M.useRef(null),ne=Gn(t,ie),ue=Le=>st=>{if(Le){const ze=ie.current;st===void 0?Le(ze):Le(ze,st)}},se=()=>A.current?A.current[V?"clientWidth":"clientHeight"]:0,ae=ue((Le,st)=>{A.current&&V&&(A.current.style.position="absolute"),Le.style[Q]=W,h&&h(Le,st)}),ce=ue((Le,st)=>{const ze=se();A.current&&V&&(A.current.style.position="");const{duration:pt,easing:Ye}=zd({style:E,timeout:D,easing:u},{mode:"enter"});if(D==="auto"){const Pt=U.transitions.getAutoHeightDuration(ze);Le.style.transitionDuration=`${Pt}ms`,$.current=Pt}else Le.style.transitionDuration=typeof pt=="string"?pt:`${pt}ms`;Le.style[Q]=`${ze}px`,Le.style.transitionTimingFunction=Ye,g&&g(Le,st)}),ee=ue((Le,st)=>{Le.style[Q]="auto",f&&f(Le,st)}),pe=ue(Le=>{Le.style[Q]=`${se()}px`,v&&v(Le)}),me=ue(y),ye=ue(Le=>{const st=se(),{duration:ze,easing:pt}=zd({style:E,timeout:D,easing:u},{mode:"exit"});if(D==="auto"){const Ye=U.transitions.getAutoHeightDuration(st);Le.style.transitionDuration=`${Ye}ms`,$.current=Ye}else Le.style.transitionDuration=typeof ze=="string"?ze:`${ze}ms`;Le.style[Q]=W,Le.style.transitionTimingFunction=pt,_&&_(Le)}),Oe=Le=>{D==="auto"&&B.start($.current||0,Le),i&&i(ie.current,Le)};return O.jsx(I,{in:c,onEnter:ae,onEntered:ee,onEntering:ce,onExit:pe,onExited:me,onExiting:ye,addEndListener:Oe,nodeRef:ie,timeout:D==="auto"?null:D,...k,children:(Le,{ownerState:st,...ze})=>O.jsx(Bre,{as:l,className:Dt(N.root,a,{entered:N.entered,exited:!c&&W==="0px"&&N.hidden}[Le]),style:{[V?"minWidth":"minHeight"]:W,...E},ref:ne,ownerState:{...P,state:Le},...ze,children:O.jsx(Nre,{ownerState:{...P,state:Le},className:N.wrapper,ref:A,children:O.jsx(Ure,{ownerState:{...P,state:Le},className:N.wrapperInner,children:s})})})})});n2&&(n2.muiSupportAuto=!0);const $re=mr(O.jsx("path",{d:"M19.43 12.98c.04-.32.07-.64.07-.98s-.03-.66-.07-.98l2.11-1.65c.19-.15.24-.42.12-.64l-2-3.46c-.09-.16-.26-.25-.44-.25-.06 0-.12.01-.17.03l-2.49 1c-.52-.4-1.08-.73-1.69-.98l-.38-2.65C14.46 2.18 14.25 2 14 2h-4c-.25 0-.46.18-.49.42l-.38 2.65c-.61.25-1.17.59-1.69.98l-2.49-1q-.09-.03-.18-.03c-.17 0-.34.09-.43.25l-2 3.46c-.13.22-.07.49.12.64l2.11 1.65c-.04.32-.07.65-.07.98s.03.66.07.98l-2.11 1.65c-.19.15-.24.42-.12.64l2 3.46c.09.16.26.25.44.25.06 0 .12-.01.17-.03l2.49-1c.52.4 1.08.73 1.69.98l.38 2.65c.03.24.24.42.49.42h4c.25 0 .46-.18.49-.42l.38-2.65c.61-.25 1.17-.59 1.69-.98l2.49 1q.09.03.18.03c.17 0 .34-.09.43-.25l2-3.46c.12-.22.07-.49-.12-.64zm-1.98-1.71c.04.31.05.52.05.73s-.02.43-.05.73l-.14 1.13.89.7 1.08.84-.7 1.21-1.27-.51-1.04-.42-.9.68c-.43.32-.84.56-1.25.73l-1.06.43-.16 1.13-.2 1.35h-1.4l-.19-1.35-.16-1.13-1.06-.43c-.43-.18-.83-.41-1.23-.71l-.91-.7-1.06.43-1.27.51-.7-1.21 1.08-.84.89-.7-.14-1.13c-.03-.31-.05-.54-.05-.74s.02-.43.05-.73l.14-1.13-.89-.7-1.08-.84.7-1.21 1.27.51 1.04.42.9-.68c.43-.32.84-.56 1.25-.73l1.06-.43.16-1.13.2-1.35h1.39l.19 1.35.16 1.13 1.06.43c.43.18.83.41 1.23.71l.91.7 1.06-.43 1.27-.51.7 1.21-1.07.85-.89.7zM12 8c-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4-1.79-4-4-4m0 6c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2"})),jre=mr(O.jsx("path",{d:"M1 11h4v11H1zm15-7.75C16.65 2.49 17.66 2 18.7 2 20.55 2 22 3.45 22 5.3c0 2.27-2.91 4.9-6 7.7-3.09-2.81-6-5.44-6-7.7C10 3.45 11.45 2 13.3 2c1.04 0 2.05.49 2.7 1.25M20 17h-7l-2.09-.73.33-.94L13 16h2.82c.65 0 1.18-.53 1.18-1.18 0-.49-.31-.93-.77-1.11L8.97 11H7v9.02L14 22l8.01-3c-.01-1.1-.9-2-2.01-2"})),zre=mr(O.jsx("path",{d:"M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"})),Hre=mr(O.jsx("path",{d:"m12 5.69 5 4.5V18h-2v-6H9v6H7v-7.81zM12 3 2 12h3v8h6v-6h2v6h6v-8h3z"}));function Vre(){if(console&&console.warn){for(var r=arguments.length,e=new Array(r),t=0;t<r;t++)e[t]=arguments[t];Yh(e[0])&&(e[0]=`react-i18next:: ${e[0]}`),console.warn(...e)}}const _O={};function i2(){for(var r=arguments.length,e=new Array(r),t=0;t<r;t++)e[t]=arguments[t];Yh(e[0])&&_O[e[0]]||(Yh(e[0])&&(_O[e[0]]=new Date),Vre(...e))}const YN=(r,e)=>()=>{if(r.isInitialized)e();else{const t=()=>{setTimeout(()=>{r.off("initialized",t)},0),e()};r.on("initialized",t)}},bO=(r,e,t)=>{r.loadNamespaces(e,YN(r,t))},SO=(r,e,t,n)=>{Yh(t)&&(t=[t]),t.forEach(i=>{r.options.ns.indexOf(i)<0&&r.options.ns.push(i)}),r.loadLanguages(e,YN(r,n))},Wre=function(r,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const n=e.languages[0],i=e.options?e.options.fallbackLng:!1,s=e.languages[e.languages.length-1];if(n.toLowerCase()==="cimode")return!0;const a=(o,l)=>{const u=e.services.backendConnector.state[`${o}|${l}`];return u===-1||u===2};return t.bindI18n&&t.bindI18n.indexOf("languageChanging")>-1&&e.services.backendConnector.backend&&e.isLanguageChangingTo&&!a(e.isLanguageChangingTo,r)?!1:!!(e.hasResourceBundle(n,r)||!e.services.backendConnector.backend||e.options.resources&&!e.options.partialBundledLanguages||a(n,r)&&(!i||a(s,r)))},qre=function(r,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return!e.languages||!e.languages.length?(i2("i18n.languages were undefined or empty",e.languages),!0):e.options.ignoreJSONStructure!==void 0?e.hasLoadedNamespace(r,{lng:t.lng,precheck:(i,s)=>{if(t.bindI18n&&t.bindI18n.indexOf("languageChanging")>-1&&i.services.backendConnector.backend&&i.isLanguageChangingTo&&!s(i.isLanguageChangingTo,r))return!1}}):Wre(r,e,t)},Yh=r=>typeof r=="string",Gre=r=>typeof r=="object"&&r!==null,Kre=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34|nbsp|#160|copy|#169|reg|#174|hellip|#8230|#x2F|#47);/g,Xre={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"',"&nbsp;":" ","&#160;":" ","&copy;":"","&#169;":"","&reg;":"","&#174;":"","&hellip;":"","&#8230;":"","&#x2F;":"/","&#47;":"/"},Yre=r=>Xre[r],Qre=r=>r.replace(Kre,Yre);let s2={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transWrapTextNodes:"",transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0,unescape:Qre};const Jre=function(){let r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};s2={...s2,...r}},Zre=()=>s2;let QN;const ene=r=>{QN=r},tne=()=>QN,rne={type:"3rdParty",init(r){Jre(r.options.react),ene(r)}},nne=M.createContext();class ine{constructor(){this.usedNamespaces={}}addUsedNamespaces(e){e.forEach(t=>{this.usedNamespaces[t]||(this.usedNamespaces[t]=!0)})}getUsedNamespaces=()=>Object.keys(this.usedNamespaces)}const sne=(r,e)=>{const t=M.useRef();return M.useEffect(()=>{t.current=r},[r,e]),t.current},JN=(r,e,t,n)=>r.getFixedT(e,t,n),ane=(r,e,t,n)=>M.useCallback(JN(r,e,t,n),[r,e,t,n]),Ii=function(r){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{i18n:t}=e,{i18n:n,defaultNS:i}=M.useContext(nne)||{},s=t||n||tne();if(s&&!s.reportNamespaces&&(s.reportNamespaces=new ine),!s){i2("You will need to pass in an i18next instance by using initReactI18next");const I=(P,N)=>Yh(N)?N:Gre(N)&&Yh(N.defaultValue)?N.defaultValue:Array.isArray(P)?P[P.length-1]:P,k=[I,{},!1];return k.t=I,k.i18n={},k.ready=!1,k}s.options.react&&s.options.react.wait!==void 0&&i2("It seems you are still using the old wait option, you may migrate to the new useSuspense behaviour.");const a={...Zre(),...s.options.react,...e},{useSuspense:o,keyPrefix:l}=a;let u=i||s.options&&s.options.defaultNS;u=Yh(u)?[u]:u||["translation"],s.reportNamespaces.addUsedNamespaces&&s.reportNamespaces.addUsedNamespaces(u);const c=(s.isInitialized||s.initializedStoreOnce)&&u.every(I=>qre(I,s,a)),h=ane(s,e.lng||null,a.nsMode==="fallback"?u:u[0],l),f=()=>h,g=()=>JN(s,e.lng||null,a.nsMode==="fallback"?u:u[0],l),[v,y]=M.useState(f);let _=u.join();e.lng&&(_=`${e.lng}${_}`);const C=sne(_),E=M.useRef(!0);M.useEffect(()=>{const{bindI18n:I,bindI18nStore:k}=a;E.current=!0,!c&&!o&&(e.lng?SO(s,e.lng,u,()=>{E.current&&y(g)}):bO(s,u,()=>{E.current&&y(g)})),c&&C&&C!==_&&E.current&&y(g);const P=()=>{E.current&&y(g)};return I&&s&&s.on(I,P),k&&s&&s.store.on(k,P),()=>{E.current=!1,I&&s&&I.split(" ").forEach(N=>s.off(N,P)),k&&s&&k.split(" ").forEach(N=>s.store.off(N,P))}},[s,_]),M.useEffect(()=>{E.current&&c&&y(f)},[s,l,c]);const D=[v,s,c];if(D.t=v,D.i18n=s,D.ready=c,c||!c&&!o)return D;throw new Promise(I=>{e.lng?SO(s,e.lng,u,()=>I()):bO(s,u,()=>I())})};function one(r){return er("MuiDivider",r)}const TO=Qt("MuiDivider",["root","absolute","fullWidth","inset","middle","flexItem","light","vertical","withChildren","withChildrenVertical","textAlignRight","textAlignLeft","wrapper","wrapperVertical"]),lne=r=>{const{absolute:e,children:t,classes:n,flexItem:i,light:s,orientation:a,textAlign:o,variant:l}=r;return Zt({root:["root",e&&"absolute",l,s&&"light",a==="vertical"&&"vertical",i&&"flexItem",t&&"withChildren",t&&a==="vertical"&&"withChildrenVertical",o==="right"&&a!=="vertical"&&"textAlignRight",o==="left"&&a!=="vertical"&&"textAlignLeft"],wrapper:["wrapper",a==="vertical"&&"wrapperVertical"]},one,n)},une=rt("div",{name:"MuiDivider",slot:"Root",overridesResolver:(r,e)=>{const{ownerState:t}=r;return[e.root,t.absolute&&e.absolute,e[t.variant],t.light&&e.light,t.orientation==="vertical"&&e.vertical,t.flexItem&&e.flexItem,t.children&&e.withChildren,t.children&&t.orientation==="vertical"&&e.withChildrenVertical,t.textAlign==="right"&&t.orientation!=="vertical"&&e.textAlignRight,t.textAlign==="left"&&t.orientation!=="vertical"&&e.textAlignLeft]}})(cr(({theme:r})=>({margin:0,flexShrink:0,borderWidth:0,borderStyle:"solid",borderColor:(r.vars||r).palette.divider,borderBottomWidth:"thin",variants:[{props:{absolute:!0},style:{position:"absolute",bottom:0,left:0,width:"100%"}},{props:{light:!0},style:{borderColor:r.vars?`rgba(${r.vars.palette.dividerChannel} / 0.08)`:Kr(r.palette.divider,.08)}},{props:{variant:"inset"},style:{marginLeft:72}},{props:{variant:"middle",orientation:"horizontal"},style:{marginLeft:r.spacing(2),marginRight:r.spacing(2)}},{props:{variant:"middle",orientation:"vertical"},style:{marginTop:r.spacing(1),marginBottom:r.spacing(1)}},{props:{orientation:"vertical"},style:{height:"100%",borderBottomWidth:0,borderRightWidth:"thin"}},{props:{flexItem:!0},style:{alignSelf:"stretch",height:"auto"}},{props:({ownerState:e})=>!!e.children,style:{display:"flex",textAlign:"center",border:0,borderTopStyle:"solid",borderLeftStyle:"solid","&::before, &::after":{content:'""',alignSelf:"center"}}},{props:({ownerState:e})=>e.children&&e.orientation!=="vertical",style:{"&::before, &::after":{width:"100%",borderTop:`thin solid ${(r.vars||r).palette.divider}`,borderTopStyle:"inherit"}}},{props:({ownerState:e})=>e.orientation==="vertical"&&e.children,style:{flexDirection:"column","&::before, &::after":{height:"100%",borderLeft:`thin solid ${(r.vars||r).palette.divider}`,borderLeftStyle:"inherit"}}},{props:({ownerState:e})=>e.textAlign==="right"&&e.orientation!=="vertical",style:{"&::before":{width:"90%"},"&::after":{width:"10%"}}},{props:({ownerState:e})=>e.textAlign==="left"&&e.orientation!=="vertical",style:{"&::before":{width:"10%"},"&::after":{width:"90%"}}}]}))),cne=rt("span",{name:"MuiDivider",slot:"Wrapper",overridesResolver:(r,e)=>{const{ownerState:t}=r;return[e.wrapper,t.orientation==="vertical"&&e.wrapperVertical]}})(cr(({theme:r})=>({display:"inline-block",paddingLeft:`calc(${r.spacing(1)} * 1.2)`,paddingRight:`calc(${r.spacing(1)} * 1.2)`,whiteSpace:"nowrap",variants:[{props:{orientation:"vertical"},style:{paddingTop:`calc(${r.spacing(1)} * 1.2)`,paddingBottom:`calc(${r.spacing(1)} * 1.2)`}}]}))),a2=M.forwardRef(function(e,t){const n=Yt({props:e,name:"MuiDivider"}),{absolute:i=!1,children:s,className:a,orientation:o="horizontal",component:l=s||o==="vertical"?"div":"hr",flexItem:u=!1,light:c=!1,role:h=l!=="hr"?"separator":void 0,textAlign:f="center",variant:g="fullWidth",...v}=n,y={...n,absolute:i,component:l,flexItem:u,light:c,orientation:o,role:h,textAlign:f,variant:g},_=lne(y);return O.jsx(une,{as:l,className:Dt(_.root,a),role:h,ref:t,ownerState:y,"aria-orientation":h==="separator"&&(l!=="hr"||o==="vertical")?o:void 0,...v,children:s?O.jsx(cne,{className:_.wrapper,ownerState:y,children:s}):null})});a2&&(a2.muiSkipListHighlight=!0);const CO=mr(O.jsx("path",{d:"m12 8-6 6 1.41 1.41L12 10.83l4.59 4.58L18 14z"})),wO=mr(O.jsx("path",{d:"M16.59 8.59 12 13.17 7.41 8.59 6 10l6 6 6-6z"}));function dne(r,e,t){const n=e.getBoundingClientRect(),i=t&&t.getBoundingClientRect(),s=vo(e);let a;if(e.fakeTransform)a=e.fakeTransform;else{const u=s.getComputedStyle(e);a=u.getPropertyValue("-webkit-transform")||u.getPropertyValue("transform")}let o=0,l=0;if(a&&a!=="none"&&typeof a=="string"){const u=a.split("(")[1].split(")")[0].split(",");o=parseInt(u[4],10),l=parseInt(u[5],10)}return r==="left"?i?`translateX(${i.right+o-n.left}px)`:`translateX(${s.innerWidth+o-n.left}px)`:r==="right"?i?`translateX(-${n.right-i.left-o}px)`:`translateX(-${n.left+n.width-o}px)`:r==="up"?i?`translateY(${i.bottom+l-n.top}px)`:`translateY(${s.innerHeight+l-n.top}px)`:i?`translateY(-${n.top-i.top+n.height-l}px)`:`translateY(-${n.top+n.height-l}px)`}function hne(r){return typeof r=="function"?r():r}function Ry(r,e,t){const n=hne(t),i=dne(r,e,n);i&&(e.style.webkitTransform=i,e.style.transform=i)}const fne=M.forwardRef(function(e,t){const n=Ul(),i={enter:n.transitions.easing.easeOut,exit:n.transitions.easing.sharp},s={enter:n.transitions.duration.enteringScreen,exit:n.transitions.duration.leavingScreen},{addEndListener:a,appear:o=!0,children:l,container:u,direction:c="down",easing:h=i,in:f,onEnter:g,onEntered:v,onEntering:y,onExit:_,onExited:C,onExiting:E,style:D,timeout:I=s,TransitionComponent:k=ll,...P}=e,N=M.useRef(null),U=Gn(Zd(l),N,t),B=se=>ae=>{se&&(ae===void 0?se(N.current):se(N.current,ae))},A=B((se,ae)=>{Ry(c,se,u),vk(se),g&&g(se,ae)}),$=B((se,ae)=>{const ce=zd({timeout:I,style:D,easing:h},{mode:"enter"});se.style.webkitTransition=n.transitions.create("-webkit-transform",{...ce}),se.style.transition=n.transitions.create("transform",{...ce}),se.style.webkitTransform="none",se.style.transform="none",y&&y(se,ae)}),W=B(v),V=B(E),Q=B(se=>{const ae=zd({timeout:I,style:D,easing:h},{mode:"exit"});se.style.webkitTransition=n.transitions.create("-webkit-transform",ae),se.style.transition=n.transitions.create("transform",ae),Ry(c,se,u),_&&_(se)}),ie=B(se=>{se.style.webkitTransition="",se.style.transition="",C&&C(se)}),ne=se=>{a&&a(N.current,se)},ue=M.useCallback(()=>{N.current&&Ry(c,N.current,u)},[c,u]);return M.useEffect(()=>{if(f||c==="down"||c==="right")return;const se=cv(()=>{N.current&&Ry(c,N.current,u)}),ae=vo(N.current);return ae.addEventListener("resize",se),()=>{se.clear(),ae.removeEventListener("resize",se)}},[c,f,u]),M.useEffect(()=>{f||ue()},[f,ue]),O.jsx(k,{nodeRef:N,onEnter:A,onEntered:W,onEntering:$,onExit:Q,onExited:ie,onExiting:V,addEndListener:ne,appear:o,in:f,timeout:I,...P,children:(se,{ownerState:ae,...ce})=>M.cloneElement(l,{ref:U,style:{visibility:se==="exited"&&!f?"hidden":void 0,...D,...l.props.style},...ce})})});function pne(r){return er("MuiDrawer",r)}Qt("MuiDrawer",["root","docked","paper","anchorLeft","anchorRight","anchorTop","anchorBottom","paperAnchorLeft","paperAnchorRight","paperAnchorTop","paperAnchorBottom","paperAnchorDockedLeft","paperAnchorDockedRight","paperAnchorDockedTop","paperAnchorDockedBottom","modal"]);const ZN=(r,e)=>{const{ownerState:t}=r;return[e.root,(t.variant==="permanent"||t.variant==="persistent")&&e.docked,e.modal]},mne=r=>{const{classes:e,anchor:t,variant:n}=r,i={root:["root",`anchor${ft(t)}`],docked:[(n==="permanent"||n==="persistent")&&"docked"],modal:["modal"],paper:["paper",`paperAnchor${ft(t)}`,n!=="temporary"&&`paperAnchorDocked${ft(t)}`]};return Zt(i,pne,e)},gne=rt(yk,{name:"MuiDrawer",slot:"Root",overridesResolver:ZN})(cr(({theme:r})=>({zIndex:(r.vars||r).zIndex.drawer}))),vne=rt("div",{shouldForwardProp:as,name:"MuiDrawer",slot:"Docked",skipVariantsResolver:!1,overridesResolver:ZN})({flex:"0 0 auto"}),yne=rt(Ku,{name:"MuiDrawer",slot:"Paper",overridesResolver:(r,e)=>{const{ownerState:t}=r;return[e.paper,e[`paperAnchor${ft(t.anchor)}`],t.variant!=="temporary"&&e[`paperAnchorDocked${ft(t.anchor)}`]]}})(cr(({theme:r})=>({overflowY:"auto",display:"flex",flexDirection:"column",height:"100%",flex:"1 0 auto",zIndex:(r.vars||r).zIndex.drawer,WebkitOverflowScrolling:"touch",position:"fixed",top:0,outline:0,variants:[{props:{anchor:"left"},style:{left:0}},{props:{anchor:"top"},style:{top:0,left:0,right:0,height:"auto",maxHeight:"100%"}},{props:{anchor:"right"},style:{right:0}},{props:{anchor:"bottom"},style:{top:"auto",left:0,bottom:0,right:0,height:"auto",maxHeight:"100%"}},{props:({ownerState:e})=>e.anchor==="left"&&e.variant!=="temporary",style:{borderRight:`1px solid ${(r.vars||r).palette.divider}`}},{props:({ownerState:e})=>e.anchor==="top"&&e.variant!=="temporary",style:{borderBottom:`1px solid ${(r.vars||r).palette.divider}`}},{props:({ownerState:e})=>e.anchor==="right"&&e.variant!=="temporary",style:{borderLeft:`1px solid ${(r.vars||r).palette.divider}`}},{props:({ownerState:e})=>e.anchor==="bottom"&&e.variant!=="temporary",style:{borderTop:`1px solid ${(r.vars||r).palette.divider}`}}]}))),e5={left:"right",right:"left",top:"down",bottom:"up"};function xne(r){return["left","right"].includes(r)}function _ne({direction:r},e){return r==="rtl"&&xne(e)?e5[e]:e}const bne=M.forwardRef(function(e,t){const n=Yt({props:e,name:"MuiDrawer"}),i=Ul(),s=_m(),a={enter:i.transitions.duration.enteringScreen,exit:i.transitions.duration.leavingScreen},{anchor:o="left",BackdropProps:l,children:u,className:c,elevation:h=16,hideBackdrop:f=!1,ModalProps:{BackdropProps:g,...v}={},onClose:y,open:_=!1,PaperProps:C={},SlideProps:E,TransitionComponent:D,transitionDuration:I=a,variant:k="temporary",slots:P={},slotProps:N={},...U}=n,B=M.useRef(!1);M.useEffect(()=>{B.current=!0},[]);const A=_ne({direction:s?"rtl":"ltr"},o),W={...n,anchor:o,elevation:h,open:_,variant:k,...U},V=mne(W),Q={slots:{transition:D,...P},slotProps:{paper:C,transition:E,...N,backdrop:xk(N.backdrop||{...l,...g},{transitionDuration:I})}},[ie,ne]=ur("root",{ref:t,elementType:gne,className:Dt(V.root,V.modal,c),shouldForwardComponentProp:!0,ownerState:W,externalForwardedProps:{...Q,...U,...v},additionalProps:{open:_,onClose:y,hideBackdrop:f,slots:{backdrop:Q.slots.backdrop},slotProps:{backdrop:Q.slotProps.backdrop}}}),[ue,se]=ur("paper",{elementType:yne,shouldForwardComponentProp:!0,className:Dt(V.paper,C.className),ownerState:W,externalForwardedProps:Q,additionalProps:{elevation:k==="temporary"?h:0,square:!0}}),[ae,ce]=ur("docked",{elementType:vne,ref:t,className:Dt(V.root,V.docked,c),ownerState:W,externalForwardedProps:Q,additionalProps:U}),[ee,pe]=ur("transition",{elementType:fne,ownerState:W,externalForwardedProps:Q,additionalProps:{in:_,direction:e5[A],timeout:I,appear:B.current}}),me=O.jsx(ue,{...se,children:u});if(k==="permanent")return O.jsx(ae,{...ce,children:me});const ye=O.jsx(ee,{...pe,children:me});return k==="persistent"?O.jsx(ae,{...ce,children:ye}):O.jsx(ie,{...ne,children:ye})});function Sne(r){return er("MuiIconButton",r)}const EO=Qt("MuiIconButton",["root","disabled","colorInherit","colorPrimary","colorSecondary","colorError","colorInfo","colorSuccess","colorWarning","edgeStart","edgeEnd","sizeSmall","sizeMedium","sizeLarge","loading","loadingIndicator","loadingWrapper"]),Tne=r=>{const{classes:e,disabled:t,color:n,edge:i,size:s,loading:a}=r,o={root:["root",a&&"loading",t&&"disabled",n!=="default"&&`color${ft(n)}`,i&&`edge${ft(i)}`,`size${ft(s)}`],loadingIndicator:["loadingIndicator"],loadingWrapper:["loadingWrapper"]};return Zt(o,Sne,e)},Cne=rt(Mu,{name:"MuiIconButton",slot:"Root",overridesResolver:(r,e)=>{const{ownerState:t}=r;return[e.root,t.loading&&e.loading,t.color!=="default"&&e[`color${ft(t.color)}`],t.edge&&e[`edge${ft(t.edge)}`],e[`size${ft(t.size)}`]]}})(cr(({theme:r})=>({textAlign:"center",flex:"0 0 auto",fontSize:r.typography.pxToRem(24),padding:8,borderRadius:"50%",color:(r.vars||r).palette.action.active,transition:r.transitions.create("background-color",{duration:r.transitions.duration.shortest}),variants:[{props:e=>!e.disableRipple,style:{"--IconButton-hoverBg":r.vars?`rgba(${r.vars.palette.action.activeChannel} / ${r.vars.palette.action.hoverOpacity})`:Kr(r.palette.action.active,r.palette.action.hoverOpacity),"&:hover":{backgroundColor:"var(--IconButton-hoverBg)","@media (hover: none)":{backgroundColor:"transparent"}}}},{props:{edge:"start"},style:{marginLeft:-12}},{props:{edge:"start",size:"small"},style:{marginLeft:-3}},{props:{edge:"end"},style:{marginRight:-12}},{props:{edge:"end",size:"small"},style:{marginRight:-3}}]})),cr(({theme:r})=>({variants:[{props:{color:"inherit"},style:{color:"inherit"}},...Object.entries(r.palette).filter(_i()).map(([e])=>({props:{color:e},style:{color:(r.vars||r).palette[e].main}})),...Object.entries(r.palette).filter(_i()).map(([e])=>({props:{color:e},style:{"--IconButton-hoverBg":r.vars?`rgba(${(r.vars||r).palette[e].mainChannel} / ${r.vars.palette.action.hoverOpacity})`:Kr((r.vars||r).palette[e].main,r.palette.action.hoverOpacity)}})),{props:{size:"small"},style:{padding:5,fontSize:r.typography.pxToRem(18)}},{props:{size:"large"},style:{padding:12,fontSize:r.typography.pxToRem(28)}}],[`&.${EO.disabled}`]:{backgroundColor:"transparent",color:(r.vars||r).palette.action.disabled},[`&.${EO.loading}`]:{color:"transparent"}}))),wne=rt("span",{name:"MuiIconButton",slot:"LoadingIndicator"})(({theme:r})=>({display:"none",position:"absolute",visibility:"visible",top:"50%",left:"50%",transform:"translate(-50%, -50%)",color:(r.vars||r).palette.action.disabled,variants:[{props:{loading:!0},style:{display:"flex"}}]})),th=M.forwardRef(function(e,t){const n=Yt({props:e,name:"MuiIconButton"}),{edge:i=!1,children:s,className:a,color:o="default",disabled:l=!1,disableFocusRipple:u=!1,size:c="medium",id:h,loading:f=null,loadingIndicator:g,...v}=n,y=Jd(h),_=g??O.jsx(Gp,{"aria-labelledby":y,color:"inherit",size:16}),C={...n,edge:i,color:o,disabled:l,disableFocusRipple:u,loading:f,loadingIndicator:_,size:c},E=Tne(C);return O.jsxs(Cne,{id:f?y:h,className:Dt(E.root,a),centerRipple:!0,focusRipple:!u,disabled:l||f,ref:t,...v,ownerState:C,children:[typeof f=="boolean"&&O.jsx("span",{className:E.loadingWrapper,style:{display:"contents"},children:O.jsx(wne,{className:E.loadingIndicator,ownerState:C,children:f&&_})}),s]})}),Ene=mr(O.jsx("path",{d:"M2 15.5v2h20v-2zm0-5v2h20v-2zm0-5v2h20v-2z"})),kne=oN({themeId:Il}),o2=typeof pk({})=="function",Ane=(r,e)=>({WebkitFontSmoothing:"antialiased",MozOsxFontSmoothing:"grayscale",boxSizing:"border-box",WebkitTextSizeAdjust:"100%",...e&&!r.vars&&{colorScheme:r.palette.mode}}),Dne=r=>({color:(r.vars||r).palette.text.primary,...r.typography.body1,backgroundColor:(r.vars||r).palette.background.default,"@media print":{backgroundColor:(r.vars||r).palette.common.white}}),t5=(r,e=!1)=>{const t={};e&&r.colorSchemes&&typeof r.getColorSchemeSelector=="function"&&Object.entries(r.colorSchemes).forEach(([s,a])=>{const o=r.getColorSchemeSelector(s);o.startsWith("@")?t[o]={":root":{colorScheme:a.palette?.mode}}:t[o.replace(/\s*&/,"")]={colorScheme:a.palette?.mode}});let n={html:Ane(r,e),"*, *::before, *::after":{boxSizing:"inherit"},"strong, b":{fontWeight:r.typography.fontWeightBold},body:{margin:0,...Dne(r),"&::backdrop":{backgroundColor:(r.vars||r).palette.background.default}},...t};const i=r.components?.MuiCssBaseline?.styleOverrides;return i&&(n=[n,i]),n},s_="mui-ecs",Ine=r=>{const e=t5(r,!1),t=Array.isArray(e)?e[0]:e;return!r.vars&&t&&(t.html[`:root:has(${s_})`]={colorScheme:r.palette.mode}),r.colorSchemes&&Object.entries(r.colorSchemes).forEach(([n,i])=>{const s=r.getColorSchemeSelector(n);s.startsWith("@")?t[s]={[`:root:not(:has(.${s_}))`]:{colorScheme:i.palette?.mode}}:t[s.replace(/\s*&/,"")]={[`&:not(:has(.${s_}))`]:{colorScheme:i.palette?.mode}}}),e},Pne=pk(o2?({theme:r,enableColorScheme:e})=>t5(r,e):({theme:r})=>Ine(r));function Rne(r){const e=Yt({props:r,name:"MuiCssBaseline"}),{children:t,enableColorScheme:n=!1}=e;return O.jsxs(M.Fragment,{children:[o2&&O.jsx(Pne,{enableColorScheme:n}),!o2&&!n&&O.jsx("span",{className:s_,style:{display:"none"}}),t]})}const xS=M.createContext(void 0);function $l(){return M.useContext(xS)}function Lne(r){return er("PrivateSwitchBase",r)}Qt("PrivateSwitchBase",["root","checked","disabled","input","edgeStart","edgeEnd"]);const One=r=>{const{classes:e,checked:t,disabled:n,edge:i}=r,s={root:["root",t&&"checked",n&&"disabled",i&&`edge${ft(i)}`],input:["input"]};return Zt(s,Lne,e)},Mne=rt(Mu)({padding:9,borderRadius:"50%",variants:[{props:{edge:"start",size:"small"},style:{marginLeft:-3}},{props:({edge:r,ownerState:e})=>r==="start"&&e.size!=="small",style:{marginLeft:-12}},{props:{edge:"end",size:"small"},style:{marginRight:-3}},{props:({edge:r,ownerState:e})=>r==="end"&&e.size!=="small",style:{marginRight:-12}}]}),Fne=rt("input",{shouldForwardProp:as})({cursor:"inherit",position:"absolute",opacity:0,width:"100%",height:"100%",top:0,left:0,margin:0,padding:0,zIndex:1}),Ak=M.forwardRef(function(e,t){const{autoFocus:n,checked:i,checkedIcon:s,defaultChecked:a,disabled:o,disableFocusRipple:l=!1,edge:u=!1,icon:c,id:h,inputProps:f,inputRef:g,name:v,onBlur:y,onChange:_,onFocus:C,readOnly:E,required:D=!1,tabIndex:I,type:k,value:P,slots:N={},slotProps:U={},...B}=e,[A,$]=Dg({controlled:i,default:!!a,name:"SwitchBase",state:"checked"}),W=$l(),V=Oe=>{C&&C(Oe),W&&W.onFocus&&W.onFocus(Oe)},Q=Oe=>{y&&y(Oe),W&&W.onBlur&&W.onBlur(Oe)},ie=Oe=>{if(Oe.nativeEvent.defaultPrevented)return;const Le=Oe.target.checked;$(Le),_&&_(Oe,Le)};let ne=o;W&&typeof ne>"u"&&(ne=W.disabled);const ue=k==="checkbox"||k==="radio",se={...e,checked:A,disabled:ne,disableFocusRipple:l,edge:u},ae=One(se),ce={slots:N,slotProps:{input:f,...U}},[ee,pe]=ur("root",{ref:t,elementType:Mne,className:ae.root,shouldForwardComponentProp:!0,externalForwardedProps:{...ce,component:"span",...B},getSlotProps:Oe=>({...Oe,onFocus:Le=>{Oe.onFocus?.(Le),V(Le)},onBlur:Le=>{Oe.onBlur?.(Le),Q(Le)}}),ownerState:se,additionalProps:{centerRipple:!0,focusRipple:!l,disabled:ne,role:void 0,tabIndex:null}}),[me,ye]=ur("input",{ref:g,elementType:Fne,className:ae.input,externalForwardedProps:ce,getSlotProps:Oe=>({...Oe,onChange:Le=>{Oe.onChange?.(Le),ie(Le)}}),ownerState:se,additionalProps:{autoFocus:n,checked:i,defaultChecked:a,disabled:ne,id:ue?h:void 0,name:v,readOnly:E,required:D,tabIndex:I,type:k,...k==="checkbox"&&P===void 0?{}:{value:P}}});return O.jsxs(ee,{...pe,children:[O.jsx(me,{...ye}),A?s:c]})}),Bne=mr(O.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"})),Nne=mr(O.jsx("path",{d:"M8.465 8.465C9.37 7.56 10.62 7 12 7C14.76 7 17 9.24 17 12C17 13.38 16.44 14.63 15.535 15.535C14.63 16.44 13.38 17 12 17C9.24 17 7 14.76 7 12C7 10.62 7.56 9.37 8.465 8.465Z"})),Une=rt("span",{shouldForwardProp:as})({position:"relative",display:"flex"}),$ne=rt(Bne)({transform:"scale(1)"}),jne=rt(Nne)(cr(({theme:r})=>({left:0,position:"absolute",transform:"scale(0)",transition:r.transitions.create("transform",{easing:r.transitions.easing.easeIn,duration:r.transitions.duration.shortest}),variants:[{props:{checked:!0},style:{transform:"scale(1)",transition:r.transitions.create("transform",{easing:r.transitions.easing.easeOut,duration:r.transitions.duration.shortest})}}]})));function r5(r){const{checked:e=!1,classes:t={},fontSize:n}=r,i={...r,checked:e};return O.jsxs(Une,{className:t.root,ownerState:i,children:[O.jsx($ne,{fontSize:n,className:t.background,ownerState:i}),O.jsx(jne,{fontSize:n,className:t.dot,ownerState:i})]})}const n5=M.createContext(void 0);function zne(){return M.useContext(n5)}function Hne(r){return er("MuiRadio",r)}const kO=Qt("MuiRadio",["root","checked","disabled","colorPrimary","colorSecondary","sizeSmall"]),Vne=r=>{const{classes:e,color:t,size:n}=r,i={root:["root",`color${ft(t)}`,n!=="medium"&&`size${ft(n)}`]};return{...e,...Zt(i,Hne,e)}},Wne=rt(Ak,{shouldForwardProp:r=>as(r)||r==="classes",name:"MuiRadio",slot:"Root",overridesResolver:(r,e)=>{const{ownerState:t}=r;return[e.root,t.size!=="medium"&&e[`size${ft(t.size)}`],e[`color${ft(t.color)}`]]}})(cr(({theme:r})=>({color:(r.vars||r).palette.text.secondary,[`&.${kO.disabled}`]:{color:(r.vars||r).palette.action.disabled},variants:[{props:{color:"default",disabled:!1,disableRipple:!1},style:{"&:hover":{backgroundColor:r.vars?`rgba(${r.vars.palette.action.activeChannel} / ${r.vars.palette.action.hoverOpacity})`:Kr(r.palette.action.active,r.palette.action.hoverOpacity)}}},...Object.entries(r.palette).filter(_i()).map(([e])=>({props:{color:e,disabled:!1,disableRipple:!1},style:{"&:hover":{backgroundColor:r.vars?`rgba(${r.vars.palette[e].mainChannel} / ${r.vars.palette.action.hoverOpacity})`:Kr(r.palette[e].main,r.palette.action.hoverOpacity)}}})),...Object.entries(r.palette).filter(_i()).map(([e])=>({props:{color:e,disabled:!1},style:{[`&.${kO.checked}`]:{color:(r.vars||r).palette[e].main}}})),{props:{disableRipple:!1},style:{"&:hover":{"@media (hover: none)":{backgroundColor:"transparent"}}}}]})));function qne(r,e){return typeof e=="object"&&e!==null?r===e:String(r)===String(e)}const Gne=O.jsx(r5,{checked:!0}),Kne=O.jsx(r5,{}),uu=M.forwardRef(function(e,t){const n=Yt({props:e,name:"MuiRadio"}),{checked:i,checkedIcon:s=Gne,color:a="primary",icon:o=Kne,name:l,onChange:u,size:c="medium",className:h,disabled:f,disableRipple:g=!1,slots:v={},slotProps:y={},inputProps:_,...C}=n,E=$l();let D=f;E&&typeof D>"u"&&(D=E.disabled),D??=!1;const I={...n,disabled:D,disableRipple:g,color:a,size:c},k=Vne(I),P=zne();let N=i;const U=Xw(u,P&&P.onChange);let B=l;P&&(typeof N>"u"&&(N=qne(P.value,n.value)),typeof B>"u"&&(B=P.name));const A=y.input??_,[$,W]=ur("root",{ref:t,elementType:Wne,className:Dt(k.root,h),shouldForwardComponentProp:!0,externalForwardedProps:{slots:v,slotProps:y,...C},getSlotProps:V=>({...V,onChange:(Q,...ie)=>{V.onChange?.(Q,...ie),U(Q,...ie)}}),ownerState:I,additionalProps:{type:"radio",icon:M.cloneElement(o,{fontSize:o.props.fontSize??c}),checkedIcon:M.cloneElement(s,{fontSize:s.props.fontSize??c}),disabled:D,name:B,checked:N,slots:v,slotProps:{input:typeof A=="function"?A(I):A}}});return O.jsx($,{...W,classes:k})});function Xne(r){return er("MuiFormGroup",r)}Qt("MuiFormGroup",["root","row","error"]);function rh({props:r,states:e,muiFormControl:t}){return e.reduce((n,i)=>(n[i]=r[i],t&&typeof r[i]>"u"&&(n[i]=t[i]),n),{})}const Yne=r=>{const{classes:e,row:t,error:n}=r;return Zt({root:["root",t&&"row",n&&"error"]},Xne,e)},Qne=rt("div",{name:"MuiFormGroup",slot:"Root",overridesResolver:(r,e)=>{const{ownerState:t}=r;return[e.root,t.row&&e.row]}})({display:"flex",flexDirection:"column",flexWrap:"wrap",variants:[{props:{row:!0},style:{flexDirection:"row"}}]}),i5=M.forwardRef(function(e,t){const n=Yt({props:e,name:"MuiFormGroup"}),{className:i,row:s=!1,...a}=n,o=$l(),l=rh({props:n,muiFormControl:o,states:["error"]}),u={...n,row:s,error:l.error},c=Yne(u);return O.jsx(Qne,{className:Dt(c.root,i),ownerState:u,ref:t,...a})});function Jne(r){return er("MuiRadioGroup",r)}Qt("MuiRadioGroup",["root","row","error"]);const Zne=r=>{const{classes:e,row:t,error:n}=r;return Zt({root:["root",t&&"row",n&&"error"]},Jne,e)},b0=M.forwardRef(function(e,t){const{actions:n,children:i,className:s,defaultValue:a,name:o,onChange:l,value:u,...c}=e,h=M.useRef(null),f=Zne(e),[g,v]=Dg({controlled:u,default:a,name:"RadioGroup"});M.useImperativeHandle(n,()=>({focus:()=>{let E=h.current.querySelector("input:not(:disabled):checked");E||(E=h.current.querySelector("input:not(:disabled)")),E&&E.focus()}}),[]);const y=Gn(t,h),_=Jd(o),C=M.useMemo(()=>({name:_,onChange(E){v(E.target.value),l&&l(E,E.target.value)},value:g}),[_,l,v,g]);return O.jsx(n5.Provider,{value:C,children:O.jsx(i5,{role:"radiogroup",ref:y,className:Dt(f.root,s),...c,children:i})})});function AO(r){return r!=null&&!(Array.isArray(r)&&r.length===0)}function j_(r,e=!1){return r&&(AO(r.value)&&r.value!==""||e&&AO(r.defaultValue)&&r.defaultValue!=="")}function eie(r){return r.startAdornment}function tie(r){return er("MuiFormControl",r)}Qt("MuiFormControl",["root","marginNone","marginNormal","marginDense","fullWidth","disabled"]);const rie=r=>{const{classes:e,margin:t,fullWidth:n}=r,i={root:["root",t!=="none"&&`margin${ft(t)}`,n&&"fullWidth"]};return Zt(i,tie,e)},nie=rt("div",{name:"MuiFormControl",slot:"Root",overridesResolver:(r,e)=>{const{ownerState:t}=r;return[e.root,e[`margin${ft(t.margin)}`],t.fullWidth&&e.fullWidth]}})({display:"inline-flex",flexDirection:"column",position:"relative",minWidth:0,padding:0,margin:0,border:0,verticalAlign:"top",variants:[{props:{margin:"normal"},style:{marginTop:16,marginBottom:8}},{props:{margin:"dense"},style:{marginTop:8,marginBottom:4}},{props:{fullWidth:!0},style:{width:"100%"}}]}),Ur=M.forwardRef(function(e,t){const n=Yt({props:e,name:"MuiFormControl"}),{children:i,className:s,color:a="primary",component:o="div",disabled:l=!1,error:u=!1,focused:c,fullWidth:h=!1,hiddenLabel:f=!1,margin:g="none",required:v=!1,size:y="medium",variant:_="outlined",...C}=n,E={...n,color:a,component:o,disabled:l,error:u,fullWidth:h,hiddenLabel:f,margin:g,required:v,size:y,variant:_},D=rie(E),[I,k]=M.useState(()=>{let ie=!1;return i&&M.Children.forEach(i,ne=>{if(!n_(ne,["Input","Select"]))return;const ue=n_(ne,["Select"])?ne.props.input:ne;ue&&eie(ue.props)&&(ie=!0)}),ie}),[P,N]=M.useState(()=>{let ie=!1;return i&&M.Children.forEach(i,ne=>{n_(ne,["Input","Select"])&&(j_(ne.props,!0)||j_(ne.props.inputProps,!0))&&(ie=!0)}),ie}),[U,B]=M.useState(!1);l&&U&&B(!1);const A=c!==void 0&&!l?c:U;let $;M.useRef(!1);const W=M.useCallback(()=>{N(!0)},[]),V=M.useCallback(()=>{N(!1)},[]),Q=M.useMemo(()=>({adornedStart:I,setAdornedStart:k,color:a,disabled:l,error:u,filled:P,focused:A,fullWidth:h,hiddenLabel:f,size:y,onBlur:()=>{B(!1)},onFocus:()=>{B(!0)},onEmpty:V,onFilled:W,registerEffect:$,required:v,variant:_}),[I,a,l,u,P,A,h,f,$,V,W,v,y,_]);return O.jsx(xS.Provider,{value:Q,children:O.jsx(nie,{as:o,ownerState:E,className:Dt(D.root,s),ref:t,...C,children:i})})});function iie(r){return er("MuiFormControlLabel",r)}const H0=Qt("MuiFormControlLabel",["root","labelPlacementStart","labelPlacementTop","labelPlacementBottom","disabled","label","error","required","asterisk"]),sie=r=>{const{classes:e,disabled:t,labelPlacement:n,error:i,required:s}=r,a={root:["root",t&&"disabled",`labelPlacement${ft(n)}`,i&&"error",s&&"required"],label:["label",t&&"disabled"],asterisk:["asterisk",i&&"error"]};return Zt(a,iie,e)},aie=rt("label",{name:"MuiFormControlLabel",slot:"Root",overridesResolver:(r,e)=>{const{ownerState:t}=r;return[{[`& .${H0.label}`]:e.label},e.root,e[`labelPlacement${ft(t.labelPlacement)}`]]}})(cr(({theme:r})=>({display:"inline-flex",alignItems:"center",cursor:"pointer",verticalAlign:"middle",WebkitTapHighlightColor:"transparent",marginLeft:-11,marginRight:16,[`&.${H0.disabled}`]:{cursor:"default"},[`& .${H0.label}`]:{[`&.${H0.disabled}`]:{color:(r.vars||r).palette.text.disabled}},variants:[{props:{labelPlacement:"start"},style:{flexDirection:"row-reverse",marginRight:-11}},{props:{labelPlacement:"top"},style:{flexDirection:"column-reverse"}},{props:{labelPlacement:"bottom"},style:{flexDirection:"column"}},{props:({labelPlacement:e})=>e==="start"||e==="top"||e==="bottom",style:{marginLeft:16}}]}))),oie=rt("span",{name:"MuiFormControlLabel",slot:"Asterisk"})(cr(({theme:r})=>({[`&.${H0.error}`]:{color:(r.vars||r).palette.error.main}}))),co=M.forwardRef(function(e,t){const n=Yt({props:e,name:"MuiFormControlLabel"}),{checked:i,className:s,componentsProps:a={},control:o,disabled:l,disableTypography:u,inputRef:c,label:h,labelPlacement:f="end",name:g,onChange:v,required:y,slots:_={},slotProps:C={},value:E,...D}=n,I=$l(),k=l??o.props.disabled??I?.disabled,P=y??o.props.required,N={disabled:k,required:P};["checked","name","onChange","value","inputRef"].forEach(ie=>{typeof o.props[ie]>"u"&&typeof n[ie]<"u"&&(N[ie]=n[ie])});const U=rh({props:n,muiFormControl:I,states:["error"]}),B={...n,disabled:k,labelPlacement:f,required:P,error:U.error},A=sie(B),$={slots:_,slotProps:{...a,...C}},[W,V]=ur("typography",{elementType:kr,externalForwardedProps:$,ownerState:B});let Q=h;return Q!=null&&Q.type!==kr&&!u&&(Q=O.jsx(W,{component:"span",...V,className:Dt(A.label,V?.className),children:Q})),O.jsxs(aie,{className:Dt(A.root,s),ownerState:B,ref:t,...D,children:[M.cloneElement(o,N),P?O.jsxs("div",{children:[Q,O.jsxs(oie,{ownerState:B,"aria-hidden":!0,className:A.asterisk,children:["","*"]})]}):Q]})});function lie(r){return er("MuiFormLabel",r)}const ng=Qt("MuiFormLabel",["root","colorSecondary","focused","disabled","error","filled","required","asterisk"]),uie=r=>{const{classes:e,color:t,focused:n,disabled:i,error:s,filled:a,required:o}=r,l={root:["root",`color${ft(t)}`,i&&"disabled",s&&"error",a&&"filled",n&&"focused",o&&"required"],asterisk:["asterisk",s&&"error"]};return Zt(l,lie,e)},cie=rt("label",{name:"MuiFormLabel",slot:"Root",overridesResolver:(r,e)=>{const{ownerState:t}=r;return[e.root,t.color==="secondary"&&e.colorSecondary,t.filled&&e.filled]}})(cr(({theme:r})=>({color:(r.vars||r).palette.text.secondary,...r.typography.body1,lineHeight:"1.4375em",padding:0,position:"relative",variants:[...Object.entries(r.palette).filter(_i()).map(([e])=>({props:{color:e},style:{[`&.${ng.focused}`]:{color:(r.vars||r).palette[e].main}}})),{props:{},style:{[`&.${ng.disabled}`]:{color:(r.vars||r).palette.text.disabled},[`&.${ng.error}`]:{color:(r.vars||r).palette.error.main}}}]}))),die=rt("span",{name:"MuiFormLabel",slot:"Asterisk"})(cr(({theme:r})=>({[`&.${ng.error}`]:{color:(r.vars||r).palette.error.main}}))),hie=M.forwardRef(function(e,t){const n=Yt({props:e,name:"MuiFormLabel"}),{children:i,className:s,color:a,component:o="label",disabled:l,error:u,filled:c,focused:h,required:f,...g}=n,v=$l(),y=rh({props:n,muiFormControl:v,states:["color","required","focused","disabled","error","filled"]}),_={...n,color:y.color||"primary",component:o,disabled:y.disabled,error:y.error,filled:y.filled,focused:y.focused,required:y.required},C=uie(_);return O.jsxs(cie,{as:o,ownerState:_,className:Dt(C.root,s),ref:t,...g,children:[i,y.required&&O.jsxs(die,{ownerState:_,"aria-hidden":!0,className:C.asterisk,children:["","*"]})]})});class Cd{static STORAGE_KEY="local_tasks";static getTasks(){try{const e=localStorage.getItem(this.STORAGE_KEY);return e?JSON.parse(e):[]}catch(e){return console.error("Error getting tasks from localStorage:",e),[]}}static addTask(e){try{const t=this.getTasks(),n={...e,id:this.generateTaskId(),create_time:Date.now(),task_info:{run_type:e.original.run_type,last_run_time:0,next_run_time:0,is_running:!1,task_status:"Prepare"}};return t.push(n),localStorage.setItem(this.STORAGE_KEY,JSON.stringify(t)),n}catch(t){throw console.error("Error adding task to localStorage:",t),new Error("Failed to add task")}}static updateTask(e,t){try{const n=this.getTasks(),i=n.findIndex(a=>a.id===e);if(i===-1)throw new Error("Task not found");const s={...t,id:e,task_info:{...n[i].task_info,...t.task_info}};return n[i]=s,localStorage.setItem(this.STORAGE_KEY,JSON.stringify(n)),s}catch(n){throw console.error("Error updating task in localStorage:",n),new Error("Failed to update task")}}static deleteTask(e){try{const t=this.getTasks(),n=t.filter(i=>i.id!==e);if(n.length===t.length)throw new Error("Task not found");return localStorage.setItem(this.STORAGE_KEY,JSON.stringify(n)),!0}catch(t){throw console.error("Error deleting task from localStorage:",t),new Error("Failed to delete task")}}static generateTaskId(){return"task_"+Date.now()+"_"+Math.random().toString(36).substr(2,9)}static clearAllTasks(){try{localStorage.removeItem(this.STORAGE_KEY)}catch(e){throw console.error("Error clearing tasks from localStorage:",e),new Error("Failed to clear tasks")}}}const s5=M.createContext(),fie=({children:r})=>{const[e,t]=M.useState(0),[n,i]=M.useState(4),[s,a]=M.useState(""),[o,l]=M.useState([]),[u,c]=M.useState([]),[h,f]=M.useState(new Set),g=M.useRef([]);M.useRef(0);const v=M.useRef([]),y=M.useRef(""),_=M.useRef([]),C=M.useRef(null),E=M.useRef(null),D=M.useRef(0),I="local_tasks",k="nowTaskId",P="nowTaskList",N=(Ve,Ne)=>{localStorage.setItem(Ne,JSON.stringify(Ve))},U=()=>{console.log("start load data"),B(),A();const Ve=localStorage.getItem(k);if(Ve!==""){for(let Ne=0;Ne<_.current.length;Ne++)_.current[Ne].id===Ve&&(E.current=_.current[Ne]);Q(Ve,!1)}else Q("",!1)},B=()=>{let Ve=Cd.getTasks();c(Ve),_.current=Ve},A=()=>{const Ve=localStorage.getItem(P);if(Ve)try{let Ne=JSON.parse(Ve);V(Ne)}catch{V([])}else V([])},$=Ve=>{try{return an.parseM3uBody(Ve)}catch(Ne){return console.log("m3u8BodyToStructList err",Ne),[]}},W=(Ve,Ne)=>{c(Ie=>{const Ue=Ie.map(et=>et.id===Ve?{...et,task_info:{...et.task_info,task_status:"Completed"},list:Ne}:et);return N(Ue,I),_.current=Ue,Ue}),V([]),Q("",!0)},V=Ve=>{l(Ve),N(Ve,P),v.current=Ve},Q=(Ve,Ne)=>{a(Ve),Ne&&localStorage.setItem(k,Ve),y.current=Ve},ie=(Ve,Ne)=>{c(Ie=>{const Ue=Ie.map(et=>et.id===Ve?{...et,list:Ne}:et);return N(Ue,I),_.current=Ue,Ue})},ne=()=>{C.current||(C.current=setInterval(pe,1e4))},ue=async(Ve,Ne)=>{console.log(`Checking URL: ${Ve.url}`);let Ie=!1;Ne.no_check&&(Ie=!0);let Ue=null;return Ie?Ue={status:300,audio:null,video:null,error:""}:Ne.ffmpeg_check?Ue=await se(Ve):Ue=await ae(Ve,Ne),console.log("checkUrl result",Ue),Ue},se=async(Ve,Ne)=>{try{let Ie=await Ot("get_video_info",{url:Ve.url});if(console.log("checkUrlByCmd",Ie),Ie?.streams?.length>0){let Ue=[],et=[];for(let ot=0;ot<Ie.streams.length;ot++)Ie.streams[ot].codec_type==="video"&&Ue.push(Ie.streams[ot]);for(let ot=0;ot<Ie.streams.length;ot++)Ie.streams[ot].codec_type==="audio"&&et.push(Ie.streams[ot]);return{status:200,audio:et,video:Ue,error:""}}else return console.log("checkUrlByCmd error empty"),{status:500,audio:null,video:null,error:"empty data"}}catch(Ie){return console.log("checkUrlByCmd error",Ie),{status:500,audio:null,video:null,error:Ie}}},ae=async(Ve,Ne)=>{try{let Ie=!1;if(!Ve.url.startsWith("http://")&&!Ve.url.startsWith("https://")&&(Ie=!0),Ie)return{status:300,audio:null,video:null,error:""};console.log("checkUrlByWeb, task timout ",Ne.http_timeout);const Ue=new AbortController,et=setTimeout(()=>Ue.abort(),Ne.http_timeout),ot=await fetch(Ve.url,{method:"HEAD",signal:Ue.signal});if(!ot.ok||ot.bodyUsed)return console.log(`Request failed for ${Ve.url}:`,{ok:ot.ok,bodyUsed:ot.bodyUsed}),clearTimeout(et),Ue.abort(),{status:500,audio:null,video:null};clearTimeout(et);const dt=ot.headers.get("content-type");return console.log(`Content-Type for ${Ve.url}:`,dt),!dt||!(dt.includes("application/vnd.apple.mpegurl")||dt.includes("application/x-mpegurl")||dt.includes("audio/mpegurl")||dt.includes("audio/x-mpegurl")||dt.includes("text/plain")||dt.includes("application/x-mpegURL")||dt.includes("application/vnd.apple.mpegURL"))?{status:500,audio:null,video:null,contentType:dt}:{status:200,audio:null,video:null,contentType:dt}}catch(Ie){return console.log(`Error checking ${Ve.url}:`,Ie),{status:500,audio:null,video:null,contentType:""}}},ce=async Ve=>{for(;;){console.log("createTaskProcessor, nowIndex:",Ve);let Ne=null;for(let Ie=0;Ie<v.current.length;Ie++)if(v.current[Ie].status===0){Ne=v.current[Ie];break}if(!Ne)break;v.current=v.current.map(Ie=>Ie.index===Ne.index?{...Ie,status:1}:Ie),Oe(v.current);try{const Ie=await ue(Ne,E.current.original);console.log("checkUrl result",Ie),console.log(Ie.status),v.current=v.current.map(Ue=>Ue.index===Ne.index?{...Ue,status:Ie.status,audio:Ie.audio,video:Ie.video}:Ue),Oe(v.current)}catch(Ie){console.error(`Task processor ${Ve} error:`,Ie),v.current=v.current.map(Ue=>Ue.index===Ne.index?{...Ue,status:500}:Ue),Oe(v.current)}}},ee=()=>{const Ve=[];if(console.log("startJobWorker, nowTaskRef.current",E.current),E.current!==null){D.current=1;for(let Ne=0;Ne<E.current.original.concurrent;Ne++)Ve.push(ce(Ne));Promise.all(Ve).then(()=>{D.current=0,console.log("All task processors completed"),g.current=[]}).catch(Ne=>{D.current=0,console.error("Task processor error:",Ne),g.current=[]})}},pe=async()=>{await ze();let Ve=!1,Ne="";if(y.current!==""&&v.current.length>0||y.current===""&&v.current.length>0){let Ie=!1;for(let Ue=0;Ue<_.current.length;Ue++)_.current[Ue].id===y.current&&(Ie=!0);(!Ie||y.current==="")&&(Q("",!0),V([]))}if(v.current.length===0){let Ie="",Ue=[],et=null;for(let ot=0;ot<_.current.length;ot++)_.current[ot].task_info.task_status.toLowerCase()==="pending"&&Ie===""&&_.current[ot].id!==Ne&&(Ie=_.current[ot].id,Ue=_.current[ot].list,et=_.current[ot]);E.current=et,console.log("----- task list reset",Ie,Ue),V(Ue),Q(Ie,!0),Ue.length>0&&(Ve=!0)}else{let Ie=!0;for(let Ue=0;Ue<v.current.length;Ue++)v.current[Ue].status==0&&(Ie=!1);Ie?(Ne=y.current,console.log("set task complate",Ne,v.current),W(Ne,v.current)):Ve=!0}if(console.log("nowTaskIdRef.current",y.current),y.current!==""&&E.current!==null)for(let Ie=0;Ie<_.current.length;Ie++)_.current[Ie].id===y.current&&(E.current=_.current[Ie]);Ve&&D.current===0&&(console.log("startJobWorker"),ee())},me=()=>{ye(),C.current&&(clearInterval(C.current),C.current=null)},ye=()=>{g.current.forEach(Ve=>Ve.terminate())};M.useEffect(()=>(U(),console.log("-----task start--",u,_.current),ne(),()=>{me()}),[]);const Oe=Ve=>{l(Ve),N(Ve,P)},Le=(Ve,Ne)=>{c(Ie=>{const Ue=Ie.map(et=>et.id===Ve?Ne==="Prepare"?{...et,task_info:{...et.task_info,task_status:Ne},list:[],bodies:[]}:{...et,task_info:{...et.task_info,task_status:Ne}}:et);return N(Ue,I),_.current=Ue,Ue})},st=(Ve,Ne)=>{c(Ie=>{const Ue=Ie.map(et=>et.id===Ve?{...et,bodies:Ne}:et);return N(Ue,I),_.current=Ue,Ue})},ze=async()=>{console.log("------prepare");for(const Ve of _.current)if(Ve.task_info.task_status==="Prepare")try{let Ne=await Pt(Ve.original.urls),Ie="Pending",Ue=!1,et=!1;for(let ot=0;ot<Ne.length;ot++)Ne[ot].status===200&&(et=!0),Ne[ot].status!==200&&(Ue=!0);if(Ue&&et&&(Ie="FetchSomeDataError"),Ue&&!et&&(Ie="FetchDataError"),et){let ot=[];for(let dt=0;dt<Ne.length;dt++)if(Ne[dt].status===200){let it=$(Ne[dt].body,Ve.original.rename);for(let bt=0;bt<it.length;bt++)ot.push(it[bt])}ot=ot.filter((dt,it,bt)=>it===bt.findIndex(lt=>lt.url===dt.url)),ie(Ve.id,ot)}st(Ve.id,Ne),Le(Ve.id,Ie)}catch(Ne){console.error("Error preparing task:",Ne)}},pt=(Ve,Ne)=>{if(e===0)return Ve;let Ie=parseInt(Ne,10);return"/fetch/m3u-body?url="+Ve+"&timeout="+(isNaN(Ie)?"-1":Ie)},Ye=Ve=>Ve.substr(0,7)==="#EXTM3U",Pt=async Ve=>{let Ne=[],Ie=[];for(let Ue=0;Ue<Ve.length;Ue++){let et=Ve[Ue];if(!et.startsWith("localstorage/")){let ot=2e3;et=pt(et,ot),Ne.push(Ar.get(et,{timeout:ot}))}}for(let Ue=0;Ue<Ve.length;Ue++){let et=Ve[Ue];if(et.startsWith("localstorage/")){const ot=localStorage.getItem(et);if(ot){let dt={status:200,url:et,body:ot};Ie.push(dt)}else{let dt={status:404,url:et,body:"Data not found in localStorage"};Ie.push(dt)}}}return Ne.length>0&&(await Promise.allSettled(Ne)).forEach((et,ot)=>{let dt=!0,it="";if(et.status==="fulfilled"){const lt=et.value.data;Ye(lt)?(dt=!1,it=lt):(dt=!0,it=lt)}else dt=!0,it=et.reason.message;let bt=Ve[ot];dt?Ie.push({status:500,url:bt,body:it}):Ie.push({status:200,url:bt,body:it})}),Ie},Rt={tasks:u,runningTasks:h,freshTaskList:B,updateTaskStatus:Le};return O.jsx(s5.Provider,{value:Rt,children:r})},a5=M.createContext();function pie(r){return er("MuiTable",r)}Qt("MuiTable",["root","stickyHeader"]);const mie=r=>{const{classes:e,stickyHeader:t}=r;return Zt({root:["root",t&&"stickyHeader"]},pie,e)},gie=rt("table",{name:"MuiTable",slot:"Root",overridesResolver:(r,e)=>{const{ownerState:t}=r;return[e.root,t.stickyHeader&&e.stickyHeader]}})(cr(({theme:r})=>({display:"table",width:"100%",borderCollapse:"collapse",borderSpacing:0,"& caption":{...r.typography.body2,padding:r.spacing(2),color:(r.vars||r).palette.text.secondary,textAlign:"left",captionSide:"bottom"},variants:[{props:({ownerState:e})=>e.stickyHeader,style:{borderCollapse:"separate"}}]}))),DO="table",o5=M.forwardRef(function(e,t){const n=Yt({props:e,name:"MuiTable"}),{className:i,component:s=DO,padding:a="normal",size:o="medium",stickyHeader:l=!1,...u}=n,c={...n,component:s,padding:a,size:o,stickyHeader:l},h=mie(c),f=M.useMemo(()=>({padding:a,size:o,stickyHeader:l}),[a,o,l]);return O.jsx(a5.Provider,{value:f,children:O.jsx(gie,{as:s,role:s===DO?null:"table",ref:t,className:Dt(h.root,i),ownerState:c,...u})})}),_S=M.createContext();function vie(r){return er("MuiTableBody",r)}Qt("MuiTableBody",["root"]);const yie=r=>{const{classes:e}=r;return Zt({root:["root"]},vie,e)},xie=rt("tbody",{name:"MuiTableBody",slot:"Root"})({display:"table-row-group"}),_ie={variant:"body"},IO="tbody",l5=M.forwardRef(function(e,t){const n=Yt({props:e,name:"MuiTableBody"}),{className:i,component:s=IO,...a}=n,o={...n,component:s},l=yie(o);return O.jsx(_S.Provider,{value:_ie,children:O.jsx(xie,{className:Dt(l.root,i),as:s,ref:t,role:s===IO?null:"rowgroup",ownerState:o,...a})})});function bie(r){return er("MuiTableCell",r)}const Sie=Qt("MuiTableCell",["root","head","body","footer","sizeSmall","sizeMedium","paddingCheckbox","paddingNone","alignLeft","alignCenter","alignRight","alignJustify","stickyHeader"]),Tie=r=>{const{classes:e,variant:t,align:n,padding:i,size:s,stickyHeader:a}=r,o={root:["root",t,a&&"stickyHeader",n!=="inherit"&&`align${ft(n)}`,i!=="normal"&&`padding${ft(i)}`,`size${ft(s)}`]};return Zt(o,bie,e)},Cie=rt("td",{name:"MuiTableCell",slot:"Root",overridesResolver:(r,e)=>{const{ownerState:t}=r;return[e.root,e[t.variant],e[`size${ft(t.size)}`],t.padding!=="normal"&&e[`padding${ft(t.padding)}`],t.align!=="inherit"&&e[`align${ft(t.align)}`],t.stickyHeader&&e.stickyHeader]}})(cr(({theme:r})=>({...r.typography.body2,display:"table-cell",verticalAlign:"inherit",borderBottom:r.vars?`1px solid ${r.vars.palette.TableCell.border}`:`1px solid
    ${r.palette.mode==="light"?ff(Kr(r.palette.divider,1),.88):hf(Kr(r.palette.divider,1),.68)}`,textAlign:"left",padding:16,variants:[{props:{variant:"head"},style:{color:(r.vars||r).palette.text.primary,lineHeight:r.typography.pxToRem(24),fontWeight:r.typography.fontWeightMedium}},{props:{variant:"body"},style:{color:(r.vars||r).palette.text.primary}},{props:{variant:"footer"},style:{color:(r.vars||r).palette.text.secondary,lineHeight:r.typography.pxToRem(21),fontSize:r.typography.pxToRem(12)}},{props:{size:"small"},style:{padding:"6px 16px",[`&.${Sie.paddingCheckbox}`]:{width:24,padding:"0 12px 0 16px","& > *":{padding:0}}}},{props:{padding:"checkbox"},style:{width:48,padding:"0 0 0 4px"}},{props:{padding:"none"},style:{padding:0}},{props:{align:"left"},style:{textAlign:"left"}},{props:{align:"center"},style:{textAlign:"center"}},{props:{align:"right"},style:{textAlign:"right",flexDirection:"row-reverse"}},{props:{align:"justify"},style:{textAlign:"justify"}},{props:({ownerState:e})=>e.stickyHeader,style:{position:"sticky",top:0,zIndex:2,backgroundColor:(r.vars||r).palette.background.default}}]}))),Hd=M.forwardRef(function(e,t){const n=Yt({props:e,name:"MuiTableCell"}),{align:i="inherit",className:s,component:a,padding:o,scope:l,size:u,sortDirection:c,variant:h,...f}=n,g=M.useContext(a5),v=M.useContext(_S),y=v&&v.variant==="head";let _;a?_=a:_=y?"th":"td";let C=l;_==="td"?C=void 0:!C&&y&&(C="col");const E=h||v&&v.variant,D={...n,align:i,component:_,padding:o||(g&&g.padding?g.padding:"normal"),size:u||(g&&g.size?g.size:"medium"),sortDirection:c,stickyHeader:E==="head"&&g&&g.stickyHeader,variant:E},I=Tie(D);let k=null;return c&&(k=c==="asc"?"ascending":"descending"),O.jsx(Cie,{as:_,ref:t,className:Dt(I.root,s),"aria-sort":k,scope:C,ownerState:D,...f})});function wie(r){return er("MuiTableContainer",r)}Qt("MuiTableContainer",["root"]);const Eie=r=>{const{classes:e}=r;return Zt({root:["root"]},wie,e)},kie=rt("div",{name:"MuiTableContainer",slot:"Root"})({width:"100%",overflowX:"auto"}),u5=M.forwardRef(function(e,t){const n=Yt({props:e,name:"MuiTableContainer"}),{className:i,component:s="div",...a}=n,o={...n,component:s},l=Eie(o);return O.jsx(kie,{ref:t,as:s,className:Dt(l.root,i),ownerState:o,...a})});function Aie(r){return er("MuiTableHead",r)}Qt("MuiTableHead",["root"]);const Die=r=>{const{classes:e}=r;return Zt({root:["root"]},Aie,e)},Iie=rt("thead",{name:"MuiTableHead",slot:"Root"})({display:"table-header-group"}),Pie={variant:"head"},PO="thead",c5=M.forwardRef(function(e,t){const n=Yt({props:e,name:"MuiTableHead"}),{className:i,component:s=PO,...a}=n,o={...n,component:s},l=Die(o);return O.jsx(_S.Provider,{value:Pie,children:O.jsx(Iie,{as:s,className:Dt(l.root,i),ref:t,role:s===PO?null:"rowgroup",ownerState:o,...a})})});function Rie(r){return er("MuiTableRow",r)}const RO=Qt("MuiTableRow",["root","selected","hover","head","footer"]),Lie=r=>{const{classes:e,selected:t,hover:n,head:i,footer:s}=r;return Zt({root:["root",t&&"selected",n&&"hover",i&&"head",s&&"footer"]},Rie,e)},Oie=rt("tr",{name:"MuiTableRow",slot:"Root",overridesResolver:(r,e)=>{const{ownerState:t}=r;return[e.root,t.head&&e.head,t.footer&&e.footer]}})(cr(({theme:r})=>({color:"inherit",display:"table-row",verticalAlign:"middle",outline:0,[`&.${RO.hover}:hover`]:{backgroundColor:(r.vars||r).palette.action.hover},[`&.${RO.selected}`]:{backgroundColor:r.vars?`rgba(${r.vars.palette.primary.mainChannel} / ${r.vars.palette.action.selectedOpacity})`:Kr(r.palette.primary.main,r.palette.action.selectedOpacity),"&:hover":{backgroundColor:r.vars?`rgba(${r.vars.palette.primary.mainChannel} / calc(${r.vars.palette.action.selectedOpacity} + ${r.vars.palette.action.hoverOpacity}))`:Kr(r.palette.primary.main,r.palette.action.selectedOpacity+r.palette.action.hoverOpacity)}}}))),LO="tr",Dk=M.forwardRef(function(e,t){const n=Yt({props:e,name:"MuiTableRow"}),{className:i,component:s=LO,hover:a=!1,selected:o=!1,...l}=n,u=M.useContext(_S),c={...n,component:s,hover:a,selected:o,head:u&&u.variant==="head",footer:u&&u.variant==="footer"},h=Lie(c);return O.jsx(Oie,{as:s,ref:t,className:Dt(h.root,i),role:s===LO?null:"row",ownerState:c,...l})});function Mie(r={}){const{autoHideDuration:e=null,disableWindowBlurListener:t=!1,onClose:n,open:i,resumeHideDuration:s}=r,a=Ld();M.useEffect(()=>{if(!i)return;function C(E){E.defaultPrevented||E.key==="Escape"&&n?.(E,"escapeKeyDown")}return document.addEventListener("keydown",C),()=>{document.removeEventListener("keydown",C)}},[i,n]);const o=la((C,E)=>{n?.(C,E)}),l=la(C=>{!n||C==null||a.start(C,()=>{o(null,"timeout")})});M.useEffect(()=>(i&&l(e),a.clear),[i,e,l,a]);const u=C=>{n?.(C,"clickaway")},c=a.clear,h=M.useCallback(()=>{e!=null&&l(s??e*.5)},[e,s,l]),f=C=>E=>{const D=C.onBlur;D?.(E),h()},g=C=>E=>{const D=C.onFocus;D?.(E),c()},v=C=>E=>{const D=C.onMouseEnter;D?.(E),c()},y=C=>E=>{const D=C.onMouseLeave;D?.(E),h()};return M.useEffect(()=>{if(!t&&i)return window.addEventListener("focus",h),window.addEventListener("blur",c),()=>{window.removeEventListener("focus",h),window.removeEventListener("blur",c)}},[t,i,h,c]),{getRootProps:(C={})=>{const E={...O_(r),...O_(C)};return{role:"presentation",...C,...E,onBlur:f(E),onFocus:g(E),onMouseEnter:v(E),onMouseLeave:y(E)}},onClickAway:u}}function OO(r){return r.substring(2).toLowerCase()}function Fie(r,e){return e.documentElement.clientWidth<r.clientX||e.documentElement.clientHeight<r.clientY}function Bie(r){const{children:e,disableReactTree:t=!1,mouseEvent:n="onClick",onClickAway:i,touchEvent:s="onTouchEnd"}=r,a=M.useRef(!1),o=M.useRef(null),l=M.useRef(!1),u=M.useRef(!1);M.useEffect(()=>(setTimeout(()=>{l.current=!0},0),()=>{l.current=!1}),[]);const c=Gn(Zd(e),o),h=la(v=>{const y=u.current;u.current=!1;const _=Ss(o.current);if(!l.current||!o.current||"clientX"in v&&Fie(v,_))return;if(a.current){a.current=!1;return}let C;v.composedPath?C=v.composedPath().includes(o.current):C=!_.documentElement.contains(v.target)||o.current.contains(v.target),!C&&(t||!y)&&i(v)}),f=v=>y=>{u.current=!0;const _=e.props[v];_&&_(y)},g={ref:c};return s!==!1&&(g[s]=f(s)),M.useEffect(()=>{if(s!==!1){const v=OO(s),y=Ss(o.current),_=()=>{a.current=!0};return y.addEventListener(v,h),y.addEventListener("touchmove",_),()=>{y.removeEventListener(v,h),y.removeEventListener("touchmove",_)}}},[h,s]),n!==!1&&(g[n]=f(n)),M.useEffect(()=>{if(n!==!1){const v=OO(n),y=Ss(o.current);return y.addEventListener(v,h),()=>{y.removeEventListener(v,h)}}},[h,n]),M.cloneElement(e,g)}function l2(r){return`scale(${r}, ${r**2})`}const Nie={entering:{opacity:1,transform:l2(1)},entered:{opacity:1,transform:"none"}},Q1=typeof navigator<"u"&&/^((?!chrome|android).)*(safari|mobile)/i.test(navigator.userAgent)&&/(os |version\/)15(.|_)4/i.test(navigator.userAgent),Lg=M.forwardRef(function(e,t){const{addEndListener:n,appear:i=!0,children:s,easing:a,in:o,onEnter:l,onEntered:u,onEntering:c,onExit:h,onExited:f,onExiting:g,style:v,timeout:y="auto",TransitionComponent:_=ll,...C}=e,E=Ld(),D=M.useRef(),I=Ul(),k=M.useRef(null),P=Gn(k,Zd(s),t),N=ie=>ne=>{if(ie){const ue=k.current;ne===void 0?ie(ue):ie(ue,ne)}},U=N(c),B=N((ie,ne)=>{vk(ie);const{duration:ue,delay:se,easing:ae}=zd({style:v,timeout:y,easing:a},{mode:"enter"});let ce;y==="auto"?(ce=I.transitions.getAutoHeightDuration(ie.clientHeight),D.current=ce):ce=ue,ie.style.transition=[I.transitions.create("opacity",{duration:ce,delay:se}),I.transitions.create("transform",{duration:Q1?ce:ce*.666,delay:se,easing:ae})].join(","),l&&l(ie,ne)}),A=N(u),$=N(g),W=N(ie=>{const{duration:ne,delay:ue,easing:se}=zd({style:v,timeout:y,easing:a},{mode:"exit"});let ae;y==="auto"?(ae=I.transitions.getAutoHeightDuration(ie.clientHeight),D.current=ae):ae=ne,ie.style.transition=[I.transitions.create("opacity",{duration:ae,delay:ue}),I.transitions.create("transform",{duration:Q1?ae:ae*.666,delay:Q1?ue:ue||ae*.333,easing:se})].join(","),ie.style.opacity=0,ie.style.transform=l2(.75),h&&h(ie)}),V=N(f),Q=ie=>{y==="auto"&&E.start(D.current||0,ie),n&&n(k.current,ie)};return O.jsx(_,{appear:i,in:o,nodeRef:k,onEnter:B,onEntered:A,onEntering:U,onExit:W,onExited:V,onExiting:$,addEndListener:Q,timeout:y==="auto"?null:y,...C,children:(ie,{ownerState:ne,...ue})=>M.cloneElement(s,{style:{opacity:0,transform:l2(.75),visibility:ie==="exited"&&!o?"hidden":void 0,...Nie[ie],...v,...s.props.style},ref:P,...ue})})});Lg&&(Lg.muiSupportAuto=!0);function Uie(r){return er("MuiSnackbarContent",r)}Qt("MuiSnackbarContent",["root","message","action"]);const $ie=r=>{const{classes:e}=r;return Zt({root:["root"],action:["action"],message:["message"]},Uie,e)},jie=rt(Ku,{name:"MuiSnackbarContent",slot:"Root"})(cr(({theme:r})=>{const e=r.palette.mode==="light"?.8:.98,t=uN(r.palette.background.default,e);return{...r.typography.body2,color:r.vars?r.vars.palette.SnackbarContent.color:r.palette.getContrastText(t),backgroundColor:r.vars?r.vars.palette.SnackbarContent.bg:t,display:"flex",alignItems:"center",flexWrap:"wrap",padding:"6px 16px",borderRadius:(r.vars||r).shape.borderRadius,flexGrow:1,[r.breakpoints.up("sm")]:{flexGrow:"initial",minWidth:288}}})),zie=rt("div",{name:"MuiSnackbarContent",slot:"Message"})({padding:"8px 0"}),Hie=rt("div",{name:"MuiSnackbarContent",slot:"Action"})({display:"flex",alignItems:"center",marginLeft:"auto",paddingLeft:16,marginRight:-8}),Vie=M.forwardRef(function(e,t){const n=Yt({props:e,name:"MuiSnackbarContent"}),{action:i,className:s,message:a,role:o="alert",...l}=n,u=n,c=$ie(u);return O.jsxs(jie,{role:o,square:!0,elevation:6,className:Dt(c.root,s),ownerState:u,ref:t,...l,children:[O.jsx(zie,{className:c.message,ownerState:u,children:a}),i?O.jsx(Hie,{className:c.action,ownerState:u,children:i}):null]})});function Wie(r){return er("MuiSnackbar",r)}Qt("MuiSnackbar",["root","anchorOriginTopCenter","anchorOriginBottomCenter","anchorOriginTopRight","anchorOriginBottomRight","anchorOriginTopLeft","anchorOriginBottomLeft"]);const qie=r=>{const{classes:e,anchorOrigin:t}=r,n={root:["root",`anchorOrigin${ft(t.vertical)}${ft(t.horizontal)}`]};return Zt(n,Wie,e)},Gie=rt("div",{name:"MuiSnackbar",slot:"Root",overridesResolver:(r,e)=>{const{ownerState:t}=r;return[e.root,e[`anchorOrigin${ft(t.anchorOrigin.vertical)}${ft(t.anchorOrigin.horizontal)}`]]}})(cr(({theme:r})=>({zIndex:(r.vars||r).zIndex.snackbar,position:"fixed",display:"flex",left:8,right:8,justifyContent:"center",alignItems:"center",variants:[{props:({ownerState:e})=>e.anchorOrigin.vertical==="top",style:{top:8,[r.breakpoints.up("sm")]:{top:24}}},{props:({ownerState:e})=>e.anchorOrigin.vertical!=="top",style:{bottom:8,[r.breakpoints.up("sm")]:{bottom:24}}},{props:({ownerState:e})=>e.anchorOrigin.horizontal==="left",style:{justifyContent:"flex-start",[r.breakpoints.up("sm")]:{left:24,right:"auto"}}},{props:({ownerState:e})=>e.anchorOrigin.horizontal==="right",style:{justifyContent:"flex-end",[r.breakpoints.up("sm")]:{right:24,left:"auto"}}},{props:({ownerState:e})=>e.anchorOrigin.horizontal==="center",style:{[r.breakpoints.up("sm")]:{left:"50%",right:"auto",transform:"translateX(-50%)"}}}]}))),_f=M.forwardRef(function(e,t){const n=Yt({props:e,name:"MuiSnackbar"}),i=Ul(),s={enter:i.transitions.duration.enteringScreen,exit:i.transitions.duration.leavingScreen},{action:a,anchorOrigin:{vertical:o,horizontal:l}={vertical:"bottom",horizontal:"left"},autoHideDuration:u=null,children:c,className:h,ClickAwayListenerProps:f,ContentProps:g,disableWindowBlurListener:v=!1,message:y,onBlur:_,onClose:C,onFocus:E,onMouseEnter:D,onMouseLeave:I,open:k,resumeHideDuration:P,slots:N={},slotProps:U={},TransitionComponent:B,transitionDuration:A=s,TransitionProps:{onEnter:$,onExited:W,...V}={},...Q}=n,ie={...n,anchorOrigin:{vertical:o,horizontal:l},autoHideDuration:u,disableWindowBlurListener:v,TransitionComponent:B,transitionDuration:A},ne=qie(ie),{getRootProps:ue,onClickAway:se}=Mie({...ie}),[ae,ce]=M.useState(!0),ee=Ve=>{ce(!0),W&&W(Ve)},pe=(Ve,Ne)=>{ce(!1),$&&$(Ve,Ne)},me={slots:{transition:B,...N},slotProps:{content:g,clickAwayListener:f,transition:V,...U}},[ye,Oe]=ur("root",{ref:t,className:[ne.root,h],elementType:Gie,getSlotProps:ue,externalForwardedProps:{...me,...Q},ownerState:ie}),[Le,{ownerState:st,...ze}]=ur("clickAwayListener",{elementType:Bie,externalForwardedProps:me,getSlotProps:Ve=>({onClickAway:(...Ne)=>{const Ie=Ne[0];Ve.onClickAway?.(...Ne),!Ie?.defaultMuiPrevented&&se(...Ne)}}),ownerState:ie}),[pt,Ye]=ur("content",{elementType:Vie,shouldForwardComponentProp:!0,externalForwardedProps:me,additionalProps:{message:y,action:a},ownerState:ie}),[Pt,Rt]=ur("transition",{elementType:Lg,externalForwardedProps:me,getSlotProps:Ve=>({onEnter:(...Ne)=>{Ve.onEnter?.(...Ne),pe(...Ne)},onExited:(...Ne)=>{Ve.onExited?.(...Ne),ee(...Ne)}}),additionalProps:{appear:!0,in:k,timeout:A,direction:o==="top"?"down":"up"},ownerState:ie});return!k&&ae?null:O.jsx(Le,{...ze,...N.clickAwayListener&&{ownerState:st},children:O.jsx(ye,{...Oe,children:O.jsx(Pt,{...Rt,children:c||O.jsx(pt,{...Ye})})})})}),fv=mr(O.jsx("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6z"})),Kie=mr(O.jsx("path",{d:"M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4z"})),u2=mr(O.jsx("path",{d:"M19 9h-4V3H9v6H5l7 7zM5 18v2h14v-2z"})),Xie=mr(O.jsx("path",{d:"M5 4v2h14V4zm0 10h4v6h6v-6h4l-7-7z"}));class Yie{static STORAGE_PREFIX="localstorage/";static saveFile(e,t){const n=this.STORAGE_PREFIX+e;try{return localStorage.setItem(n,t),n}catch(i){throw console.error("Error saving file to localStorage:",i),new Error("Failed to save file to localStorage")}}static getFile(e){const t=this.STORAGE_PREFIX+e;try{return localStorage.getItem(t)}catch(n){return console.error("Error reading file from localStorage:",n),null}}static deleteFile(e){const t=this.STORAGE_PREFIX+e;try{localStorage.removeItem(t)}catch(n){console.error("Error deleting file from localStorage:",n)}}static async readAndSaveFile(e){return new Promise((t,n)=>{if(!e||!(e instanceof Blob)){n(new Error("Invalid file object"));return}const i=new FileReader;i.onload=s=>{try{const a=s.target.result,o=e.name||`file_${Date.now()}`,l=this.saveFile(o,a);t(l)}catch(a){n(a)}},i.onerror=s=>{n(new Error("Failed to read file: "+s.message))};try{i.readAsText(e)}catch(s){n(new Error("Failed to read file: "+s.message))}})}static hasFile(e){const t=this.STORAGE_PREFIX+e;return localStorage.getItem(t)!==null}static getAllFileKeys(){const e=[];for(let t=0;t<localStorage.length;t++){const n=localStorage.key(t);n.startsWith(this.STORAGE_PREFIX)&&e.push(n.replace(this.STORAGE_PREFIX,""))}return e}}class Qie{constructor(e=""){this.baseUrl=e}async getTaskList(){try{return{list:Cd.getTasks()}}catch(e){return console.error("Error getting task list:",e),{list:[]}}}async addTask(e){try{return{code:"200",msg:"Success",data:Cd.addTask(e)}}catch(t){return console.error("Error adding task:",t),{code:"500",msg:t.message}}}async uploadFile(e){try{const t=e.get("file");if(!t)throw new Error("No file found in FormData");return{code:"200",msg:"Success",url:await Yie.readAndSaveFile(t)}}catch(t){throw console.error("File upload failed:",t),t}}async updateTask(e,t){try{return{code:"200",msg:"Success",data:Cd.updateTask(e,t)}}catch(n){return console.error("Error updating task:",n),{code:"500",msg:n.message}}}async deleteTask(e){try{return Cd.deleteTask(e),{code:"200",msg:"Success"}}catch(t){return console.error("Error deleting task:",t),{code:"500",msg:t.message}}}async runTask(e){return{code:"200",msg:"Success"}}async getDownloadBody(e){return{content:"",url:""}}async exportTasks(){try{return Cd.getTasks()}catch(e){return console.error("Error exporting tasks:",e),[]}}async importTasks(e){try{return Cd.clearAllTasks(),e.forEach(t=>{Cd.addTask(t)}),{code:"200",msg:"Success"}}catch(t){return console.error("Error importing tasks:",t),{code:"500",msg:t.message}}}}const Jie={500:"#e91e63"};function Zie(r){return er("MuiAlert",r)}const MO=Qt("MuiAlert",["root","action","icon","message","filled","colorSuccess","colorInfo","colorWarning","colorError","filledSuccess","filledInfo","filledWarning","filledError","outlined","outlinedSuccess","outlinedInfo","outlinedWarning","outlinedError","standard","standardSuccess","standardInfo","standardWarning","standardError"]),ese=mr(O.jsx("path",{d:"M20,12A8,8 0 0,1 12,20A8,8 0 0,1 4,12A8,8 0 0,1 12,4C12.76,4 13.5,4.11 14.2, 4.31L15.77,2.74C14.61,2.26 13.34,2 12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0, 0 22,12M7.91,10.08L6.5,11.5L11,16L21,6L19.59,4.58L11,13.17L7.91,10.08Z"})),tse=mr(O.jsx("path",{d:"M12 5.99L19.53 19H4.47L12 5.99M12 2L1 21h22L12 2zm1 14h-2v2h2v-2zm0-6h-2v4h2v-4z"})),rse=mr(O.jsx("path",{d:"M11 15h2v2h-2zm0-8h2v6h-2zm.99-5C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"})),nse=mr(O.jsx("path",{d:"M11,9H13V7H11M12,20C7.59,20 4,16.41 4,12C4,7.59 7.59,4 12,4C16.41,4 20,7.59 20, 12C20,16.41 16.41,20 12,20M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10, 10 0 0,0 12,2M11,17H13V11H11V17Z"})),ise=mr(O.jsx("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"})),sse=r=>{const{variant:e,color:t,severity:n,classes:i}=r,s={root:["root",`color${ft(t||n)}`,`${e}${ft(t||n)}`,`${e}`],icon:["icon"],message:["message"],action:["action"]};return Zt(s,Zie,i)},ase=rt(Ku,{name:"MuiAlert",slot:"Root",overridesResolver:(r,e)=>{const{ownerState:t}=r;return[e.root,e[t.variant],e[`${t.variant}${ft(t.color||t.severity)}`]]}})(cr(({theme:r})=>{const e=r.palette.mode==="light"?hf:ff,t=r.palette.mode==="light"?ff:hf;return{...r.typography.body2,backgroundColor:"transparent",display:"flex",padding:"6px 16px",variants:[...Object.entries(r.palette).filter(_i(["light"])).map(([n])=>({props:{colorSeverity:n,variant:"standard"},style:{color:r.vars?r.vars.palette.Alert[`${n}Color`]:e(r.palette[n].light,.6),backgroundColor:r.vars?r.vars.palette.Alert[`${n}StandardBg`]:t(r.palette[n].light,.9),[`& .${MO.icon}`]:r.vars?{color:r.vars.palette.Alert[`${n}IconColor`]}:{color:r.palette[n].main}}})),...Object.entries(r.palette).filter(_i(["light"])).map(([n])=>({props:{colorSeverity:n,variant:"outlined"},style:{color:r.vars?r.vars.palette.Alert[`${n}Color`]:e(r.palette[n].light,.6),border:`1px solid ${(r.vars||r).palette[n].light}`,[`& .${MO.icon}`]:r.vars?{color:r.vars.palette.Alert[`${n}IconColor`]}:{color:r.palette[n].main}}})),...Object.entries(r.palette).filter(_i(["dark"])).map(([n])=>({props:{colorSeverity:n,variant:"filled"},style:{fontWeight:r.typography.fontWeightMedium,...r.vars?{color:r.vars.palette.Alert[`${n}FilledColor`],backgroundColor:r.vars.palette.Alert[`${n}FilledBg`]}:{backgroundColor:r.palette.mode==="dark"?r.palette[n].dark:r.palette[n].main,color:r.palette.getContrastText(r.palette[n].main)}}}))]}})),ose=rt("div",{name:"MuiAlert",slot:"Icon"})({marginRight:12,padding:"7px 0",display:"flex",fontSize:22,opacity:.9}),lse=rt("div",{name:"MuiAlert",slot:"Message"})({padding:"8px 0",minWidth:0,overflow:"auto"}),use=rt("div",{name:"MuiAlert",slot:"Action"})({display:"flex",alignItems:"flex-start",padding:"4px 0 0 16px",marginLeft:"auto",marginRight:-8}),FO={success:O.jsx(ese,{fontSize:"inherit"}),warning:O.jsx(tse,{fontSize:"inherit"}),error:O.jsx(rse,{fontSize:"inherit"}),info:O.jsx(nse,{fontSize:"inherit"})},cse=M.forwardRef(function(e,t){const n=Yt({props:e,name:"MuiAlert"}),{action:i,children:s,className:a,closeText:o="Close",color:l,components:u={},componentsProps:c={},icon:h,iconMapping:f=FO,onClose:g,role:v="alert",severity:y="success",slotProps:_={},slots:C={},variant:E="standard",...D}=n,I={...n,color:l,severity:y,variant:E,colorSeverity:l||y},k=sse(I),P={slots:{closeButton:u.CloseButton,closeIcon:u.CloseIcon,...C},slotProps:{...c,..._}},[N,U]=ur("root",{ref:t,shouldForwardComponentProp:!0,className:Dt(k.root,a),elementType:ase,externalForwardedProps:{...P,...D},ownerState:I,additionalProps:{role:v,elevation:0}}),[B,A]=ur("icon",{className:k.icon,elementType:ose,externalForwardedProps:P,ownerState:I}),[$,W]=ur("message",{className:k.message,elementType:lse,externalForwardedProps:P,ownerState:I}),[V,Q]=ur("action",{className:k.action,elementType:use,externalForwardedProps:P,ownerState:I}),[ie,ne]=ur("closeButton",{elementType:th,externalForwardedProps:P,ownerState:I}),[ue,se]=ur("closeIcon",{elementType:ise,externalForwardedProps:P,ownerState:I});return O.jsxs(N,{...U,children:[h!==!1?O.jsx(B,{...A,children:h||f[y]||FO[y]}):null,O.jsx($,{...W,children:s}),i!=null?O.jsx(V,{...Q,children:i}):null,i==null&&g?O.jsx(V,{...Q,children:O.jsx(ie,{size:"small","aria-label":o,title:o,color:"inherit",onClick:g,...ne,children:O.jsx(ue,{fontSize:"small",...se})})}):null]})});function Kp(r){const{elementType:e,externalSlotProps:t,ownerState:n,skipResolvingSlotProps:i=!1,...s}=r,a=i?{}:IN(t,n),{props:o,internalRef:l}=PN({...s,externalSlotProps:a}),u=Gn(l,a?.ref,r.additionalProps?.ref);return DN(e,{...o,ref:u},n)}function dse(r){return er("MuiPopper",r)}Qt("MuiPopper",["root"]);function hse(r,e){if(e==="ltr")return r;switch(r){case"bottom-end":return"bottom-start";case"bottom-start":return"bottom-end";case"top-end":return"top-start";case"top-start":return"top-end";default:return r}}function c2(r){return typeof r=="function"?r():r}function fse(r){return r.nodeType!==void 0}const pse=r=>{const{classes:e}=r;return Zt({root:["root"]},dse,e)},mse={},gse=M.forwardRef(function(e,t){const{anchorEl:n,children:i,direction:s,disablePortal:a,modifiers:o,open:l,placement:u,popperOptions:c,popperRef:h,slotProps:f={},slots:g={},TransitionProps:v,ownerState:y,..._}=e,C=M.useRef(null),E=Gn(C,t),D=M.useRef(null),I=Gn(D,h),k=M.useRef(I);tl(()=>{k.current=I},[I]),M.useImperativeHandle(h,()=>D.current,[]);const P=hse(u,s),[N,U]=M.useState(P),[B,A]=M.useState(c2(n));M.useEffect(()=>{D.current&&D.current.forceUpdate()}),M.useEffect(()=>{n&&A(c2(n))},[n]),tl(()=>{if(!B||!l)return;const ie=se=>{U(se.placement)};let ne=[{name:"preventOverflow",options:{altBoundary:a}},{name:"flip",options:{altBoundary:a}},{name:"onUpdate",enabled:!0,phase:"afterWrite",fn:({state:se})=>{ie(se)}}];o!=null&&(ne=ne.concat(o)),c&&c.modifiers!=null&&(ne=ne.concat(c.modifiers));const ue=vte(B,C.current,{placement:P,...c,modifiers:ne});return k.current(ue),()=>{ue.destroy(),k.current(null)}},[B,a,o,l,c,P]);const $={placement:N};v!==null&&($.TransitionProps=v);const W=pse(e),V=g.root??"div",Q=Kp({elementType:V,externalSlotProps:f.root,externalForwardedProps:_,additionalProps:{role:"tooltip",ref:E},ownerState:e,className:W.root});return O.jsx(V,{...Q,children:typeof i=="function"?i($):i})}),vse=M.forwardRef(function(e,t){const{anchorEl:n,children:i,container:s,direction:a="ltr",disablePortal:o=!1,keepMounted:l=!1,modifiers:u,open:c,placement:h="bottom",popperOptions:f=mse,popperRef:g,style:v,transition:y=!1,slotProps:_={},slots:C={},...E}=e,[D,I]=M.useState(!0),k=()=>{I(!1)},P=()=>{I(!0)};if(!l&&!c&&(!y||D))return null;let N;if(s)N=s;else if(n){const A=c2(n);N=A&&fse(A)?Ss(A).body:Ss(null).body}const U=!c&&l&&(!y||D)?"none":void 0,B=y?{in:c,onEnter:k,onExited:P}:void 0;return O.jsx(AN,{disablePortal:o,container:N,children:O.jsx(gse,{anchorEl:n,direction:a,disablePortal:o,modifiers:u,ref:t,open:y?!D:c,placement:h,popperOptions:f,popperRef:g,slotProps:_,slots:C,...E,style:{position:"fixed",top:0,left:0,display:U,...v},TransitionProps:B,children:i})})}),yse=rt(vse,{name:"MuiPopper",slot:"Root"})({}),d5=M.forwardRef(function(e,t){const n=_m(),i=Yt({props:e,name:"MuiPopper"}),{anchorEl:s,component:a,components:o,componentsProps:l,container:u,disablePortal:c,keepMounted:h,modifiers:f,open:g,placement:v,popperOptions:y,popperRef:_,transition:C,slots:E,slotProps:D,...I}=i,k=E?.root??o?.Root,P={anchorEl:s,container:u,disablePortal:c,keepMounted:h,modifiers:f,open:g,placement:v,popperOptions:y,popperRef:_,transition:C,...I};return O.jsx(yse,{as:a,direction:n?"rtl":"ltr",slots:{root:k},slotProps:D??l,...P,ref:t})}),xse=mr(O.jsx("path",{d:"M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm5 13.59L15.59 17 12 13.41 8.41 17 7 15.59 10.59 12 7 8.41 8.41 7 12 10.59 15.59 7 17 8.41 13.41 12 17 15.59z"}));function _se(r){return er("MuiChip",r)}const en=Qt("MuiChip",["root","sizeSmall","sizeMedium","colorDefault","colorError","colorInfo","colorPrimary","colorSecondary","colorSuccess","colorWarning","disabled","clickable","clickableColorPrimary","clickableColorSecondary","deletable","deletableColorPrimary","deletableColorSecondary","outlined","filled","outlinedPrimary","outlinedSecondary","filledPrimary","filledSecondary","avatar","avatarSmall","avatarMedium","avatarColorPrimary","avatarColorSecondary","icon","iconSmall","iconMedium","iconColorPrimary","iconColorSecondary","label","labelSmall","labelMedium","deleteIcon","deleteIconSmall","deleteIconMedium","deleteIconColorPrimary","deleteIconColorSecondary","deleteIconOutlinedColorPrimary","deleteIconOutlinedColorSecondary","deleteIconFilledColorPrimary","deleteIconFilledColorSecondary","focusVisible"]),bse=r=>{const{classes:e,disabled:t,size:n,color:i,iconColor:s,onDelete:a,clickable:o,variant:l}=r,u={root:["root",l,t&&"disabled",`size${ft(n)}`,`color${ft(i)}`,o&&"clickable",o&&`clickableColor${ft(i)}`,a&&"deletable",a&&`deletableColor${ft(i)}`,`${l}${ft(i)}`],label:["label",`label${ft(n)}`],avatar:["avatar",`avatar${ft(n)}`,`avatarColor${ft(i)}`],icon:["icon",`icon${ft(n)}`,`iconColor${ft(s)}`],deleteIcon:["deleteIcon",`deleteIcon${ft(n)}`,`deleteIconColor${ft(i)}`,`deleteIcon${ft(l)}Color${ft(i)}`]};return Zt(u,_se,e)},Sse=rt("div",{name:"MuiChip",slot:"Root",overridesResolver:(r,e)=>{const{ownerState:t}=r,{color:n,iconColor:i,clickable:s,onDelete:a,size:o,variant:l}=t;return[{[`& .${en.avatar}`]:e.avatar},{[`& .${en.avatar}`]:e[`avatar${ft(o)}`]},{[`& .${en.avatar}`]:e[`avatarColor${ft(n)}`]},{[`& .${en.icon}`]:e.icon},{[`& .${en.icon}`]:e[`icon${ft(o)}`]},{[`& .${en.icon}`]:e[`iconColor${ft(i)}`]},{[`& .${en.deleteIcon}`]:e.deleteIcon},{[`& .${en.deleteIcon}`]:e[`deleteIcon${ft(o)}`]},{[`& .${en.deleteIcon}`]:e[`deleteIconColor${ft(n)}`]},{[`& .${en.deleteIcon}`]:e[`deleteIcon${ft(l)}Color${ft(n)}`]},e.root,e[`size${ft(o)}`],e[`color${ft(n)}`],s&&e.clickable,s&&n!=="default"&&e[`clickableColor${ft(n)})`],a&&e.deletable,a&&n!=="default"&&e[`deletableColor${ft(n)}`],e[l],e[`${l}${ft(n)}`]]}})(cr(({theme:r})=>{const e=r.palette.mode==="light"?r.palette.grey[700]:r.palette.grey[300];return{maxWidth:"100%",fontFamily:r.typography.fontFamily,fontSize:r.typography.pxToRem(13),display:"inline-flex",alignItems:"center",justifyContent:"center",height:32,color:(r.vars||r).palette.text.primary,backgroundColor:(r.vars||r).palette.action.selected,borderRadius:32/2,whiteSpace:"nowrap",transition:r.transitions.create(["background-color","box-shadow"]),cursor:"unset",outline:0,textDecoration:"none",border:0,padding:0,verticalAlign:"middle",boxSizing:"border-box",[`&.${en.disabled}`]:{opacity:(r.vars||r).palette.action.disabledOpacity,pointerEvents:"none"},[`& .${en.avatar}`]:{marginLeft:5,marginRight:-6,width:24,height:24,color:r.vars?r.vars.palette.Chip.defaultAvatarColor:e,fontSize:r.typography.pxToRem(12)},[`& .${en.avatarColorPrimary}`]:{color:(r.vars||r).palette.primary.contrastText,backgroundColor:(r.vars||r).palette.primary.dark},[`& .${en.avatarColorSecondary}`]:{color:(r.vars||r).palette.secondary.contrastText,backgroundColor:(r.vars||r).palette.secondary.dark},[`& .${en.avatarSmall}`]:{marginLeft:4,marginRight:-4,width:18,height:18,fontSize:r.typography.pxToRem(10)},[`& .${en.icon}`]:{marginLeft:5,marginRight:-6},[`& .${en.deleteIcon}`]:{WebkitTapHighlightColor:"transparent",color:r.vars?`rgba(${r.vars.palette.text.primaryChannel} / 0.26)`:Kr(r.palette.text.primary,.26),fontSize:22,cursor:"pointer",margin:"0 5px 0 -6px","&:hover":{color:r.vars?`rgba(${r.vars.palette.text.primaryChannel} / 0.4)`:Kr(r.palette.text.primary,.4)}},variants:[{props:{size:"small"},style:{height:24,[`& .${en.icon}`]:{fontSize:18,marginLeft:4,marginRight:-4},[`& .${en.deleteIcon}`]:{fontSize:16,marginRight:4,marginLeft:-4}}},...Object.entries(r.palette).filter(_i(["contrastText"])).map(([t])=>({props:{color:t},style:{backgroundColor:(r.vars||r).palette[t].main,color:(r.vars||r).palette[t].contrastText,[`& .${en.deleteIcon}`]:{color:r.vars?`rgba(${r.vars.palette[t].contrastTextChannel} / 0.7)`:Kr(r.palette[t].contrastText,.7),"&:hover, &:active":{color:(r.vars||r).palette[t].contrastText}}}})),{props:t=>t.iconColor===t.color,style:{[`& .${en.icon}`]:{color:r.vars?r.vars.palette.Chip.defaultIconColor:e}}},{props:t=>t.iconColor===t.color&&t.color!=="default",style:{[`& .${en.icon}`]:{color:"inherit"}}},{props:{onDelete:!0},style:{[`&.${en.focusVisible}`]:{backgroundColor:r.vars?`rgba(${r.vars.palette.action.selectedChannel} / calc(${r.vars.palette.action.selectedOpacity} + ${r.vars.palette.action.focusOpacity}))`:Kr(r.palette.action.selected,r.palette.action.selectedOpacity+r.palette.action.focusOpacity)}}},...Object.entries(r.palette).filter(_i(["dark"])).map(([t])=>({props:{color:t,onDelete:!0},style:{[`&.${en.focusVisible}`]:{background:(r.vars||r).palette[t].dark}}})),{props:{clickable:!0},style:{userSelect:"none",WebkitTapHighlightColor:"transparent",cursor:"pointer","&:hover":{backgroundColor:r.vars?`rgba(${r.vars.palette.action.selectedChannel} / calc(${r.vars.palette.action.selectedOpacity} + ${r.vars.palette.action.hoverOpacity}))`:Kr(r.palette.action.selected,r.palette.action.selectedOpacity+r.palette.action.hoverOpacity)},[`&.${en.focusVisible}`]:{backgroundColor:r.vars?`rgba(${r.vars.palette.action.selectedChannel} / calc(${r.vars.palette.action.selectedOpacity} + ${r.vars.palette.action.focusOpacity}))`:Kr(r.palette.action.selected,r.palette.action.selectedOpacity+r.palette.action.focusOpacity)},"&:active":{boxShadow:(r.vars||r).shadows[1]}}},...Object.entries(r.palette).filter(_i(["dark"])).map(([t])=>({props:{color:t,clickable:!0},style:{[`&:hover, &.${en.focusVisible}`]:{backgroundColor:(r.vars||r).palette[t].dark}}})),{props:{variant:"outlined"},style:{backgroundColor:"transparent",border:r.vars?`1px solid ${r.vars.palette.Chip.defaultBorder}`:`1px solid ${r.palette.mode==="light"?r.palette.grey[400]:r.palette.grey[700]}`,[`&.${en.clickable}:hover`]:{backgroundColor:(r.vars||r).palette.action.hover},[`&.${en.focusVisible}`]:{backgroundColor:(r.vars||r).palette.action.focus},[`& .${en.avatar}`]:{marginLeft:4},[`& .${en.avatarSmall}`]:{marginLeft:2},[`& .${en.icon}`]:{marginLeft:4},[`& .${en.iconSmall}`]:{marginLeft:2},[`& .${en.deleteIcon}`]:{marginRight:5},[`& .${en.deleteIconSmall}`]:{marginRight:3}}},...Object.entries(r.palette).filter(_i()).map(([t])=>({props:{variant:"outlined",color:t},style:{color:(r.vars||r).palette[t].main,border:`1px solid ${r.vars?`rgba(${r.vars.palette[t].mainChannel} / 0.7)`:Kr(r.palette[t].main,.7)}`,[`&.${en.clickable}:hover`]:{backgroundColor:r.vars?`rgba(${r.vars.palette[t].mainChannel} / ${r.vars.palette.action.hoverOpacity})`:Kr(r.palette[t].main,r.palette.action.hoverOpacity)},[`&.${en.focusVisible}`]:{backgroundColor:r.vars?`rgba(${r.vars.palette[t].mainChannel} / ${r.vars.palette.action.focusOpacity})`:Kr(r.palette[t].main,r.palette.action.focusOpacity)},[`& .${en.deleteIcon}`]:{color:r.vars?`rgba(${r.vars.palette[t].mainChannel} / 0.7)`:Kr(r.palette[t].main,.7),"&:hover, &:active":{color:(r.vars||r).palette[t].main}}}}))]}})),Tse=rt("span",{name:"MuiChip",slot:"Label",overridesResolver:(r,e)=>{const{ownerState:t}=r,{size:n}=t;return[e.label,e[`label${ft(n)}`]]}})({overflow:"hidden",textOverflow:"ellipsis",paddingLeft:12,paddingRight:12,whiteSpace:"nowrap",variants:[{props:{variant:"outlined"},style:{paddingLeft:11,paddingRight:11}},{props:{size:"small"},style:{paddingLeft:8,paddingRight:8}},{props:{size:"small",variant:"outlined"},style:{paddingLeft:7,paddingRight:7}}]});function BO(r){return r.key==="Backspace"||r.key==="Delete"}const NO=M.forwardRef(function(e,t){const n=Yt({props:e,name:"MuiChip"}),{avatar:i,className:s,clickable:a,color:o="default",component:l,deleteIcon:u,disabled:c=!1,icon:h,label:f,onClick:g,onDelete:v,onKeyDown:y,onKeyUp:_,size:C="medium",variant:E="filled",tabIndex:D,skipFocusWhenDisabled:I=!1,...k}=n,P=M.useRef(null),N=Gn(P,t),U=ae=>{ae.stopPropagation(),v&&v(ae)},B=ae=>{ae.currentTarget===ae.target&&BO(ae)&&ae.preventDefault(),y&&y(ae)},A=ae=>{ae.currentTarget===ae.target&&v&&BO(ae)&&v(ae),_&&_(ae)},$=a!==!1&&g?!0:a,W=$||v?Mu:l||"div",V={...n,component:W,disabled:c,size:C,color:o,iconColor:M.isValidElement(h)&&h.props.color||o,onDelete:!!v,clickable:$,variant:E},Q=bse(V),ie=W===Mu?{component:l||"div",focusVisibleClassName:Q.focusVisible,...v&&{disableRipple:!0}}:{};let ne=null;v&&(ne=u&&M.isValidElement(u)?M.cloneElement(u,{className:Dt(u.props.className,Q.deleteIcon),onClick:U}):O.jsx(xse,{className:Q.deleteIcon,onClick:U}));let ue=null;i&&M.isValidElement(i)&&(ue=M.cloneElement(i,{className:Dt(Q.avatar,i.props.className)}));let se=null;return h&&M.isValidElement(h)&&(se=M.cloneElement(h,{className:Dt(Q.icon,h.props.className)})),O.jsxs(Sse,{as:W,className:Dt(Q.root,s),disabled:$&&c?!0:void 0,onClick:g,onKeyDown:B,onKeyUp:A,ref:N,tabIndex:I&&c?-1:D,ownerState:V,...ie,...k,children:[ue||se,O.jsx(Tse,{className:Q.label,ownerState:V,children:f}),ne]})});function Ly(r){return parseInt(r,10)||0}const Cse={shadow:{visibility:"hidden",position:"absolute",overflow:"hidden",height:0,top:0,left:0,transform:"translateZ(0)"}};function wse(r){for(const e in r)return!1;return!0}function UO(r){return wse(r)||r.outerHeightStyle===0&&!r.overflowing}const Ese=M.forwardRef(function(e,t){const{onChange:n,maxRows:i,minRows:s=1,style:a,value:o,...l}=e,{current:u}=M.useRef(o!=null),c=M.useRef(null),h=Gn(t,c),f=M.useRef(null),g=M.useRef(null),v=M.useCallback(()=>{const D=c.current,I=g.current;if(!D||!I)return;const P=vo(D).getComputedStyle(D);if(P.width==="0px")return{outerHeightStyle:0,overflowing:!1};I.style.width=P.width,I.value=D.value||e.placeholder||"x",I.value.slice(-1)===`
`&&(I.value+=" ");const N=P.boxSizing,U=Ly(P.paddingBottom)+Ly(P.paddingTop),B=Ly(P.borderBottomWidth)+Ly(P.borderTopWidth),A=I.scrollHeight;I.value="x";const $=I.scrollHeight;let W=A;s&&(W=Math.max(Number(s)*$,W)),i&&(W=Math.min(Number(i)*$,W)),W=Math.max(W,$);const V=W+(N==="border-box"?U+B:0),Q=Math.abs(W-A)<=1;return{outerHeightStyle:V,overflowing:Q}},[i,s,e.placeholder]),y=la(()=>{const D=c.current,I=v();if(!D||!I||UO(I))return!1;const k=I.outerHeightStyle;return f.current!=null&&f.current!==k}),_=M.useCallback(()=>{const D=c.current,I=v();if(!D||!I||UO(I))return;const k=I.outerHeightStyle;f.current!==k&&(f.current=k,D.style.height=`${k}px`),D.style.overflow=I.overflowing?"hidden":""},[v]),C=M.useRef(-1);tl(()=>{const D=cv(_),I=c?.current;if(!I)return;const k=vo(I);k.addEventListener("resize",D);let P;return typeof ResizeObserver<"u"&&(P=new ResizeObserver(()=>{y()&&(P.unobserve(I),cancelAnimationFrame(C.current),_(),C.current=requestAnimationFrame(()=>{P.observe(I)}))}),P.observe(I)),()=>{D.clear(),cancelAnimationFrame(C.current),k.removeEventListener("resize",D),P&&P.disconnect()}},[v,_,y]),tl(()=>{_()});const E=D=>{u||_();const I=D.target,k=I.value.length,P=I.value.endsWith(`
`),N=I.selectionStart===k;P&&N&&I.setSelectionRange(k,k),n&&n(D)};return O.jsxs(M.Fragment,{children:[O.jsx("textarea",{value:o,onChange:E,ref:h,rows:s,style:a,...l}),O.jsx("textarea",{"aria-hidden":!0,className:e.className,readOnly:!0,ref:g,tabIndex:-1,style:{...Cse.shadow,...a,paddingTop:0,paddingBottom:0}})]})});function kse(r){return er("MuiInputBase",r)}const Xp=Qt("MuiInputBase",["root","formControl","focused","disabled","adornedStart","adornedEnd","error","sizeSmall","multiline","colorSecondary","fullWidth","hiddenLabel","readOnly","input","inputSizeSmall","inputMultiline","inputTypeSearch","inputAdornedStart","inputAdornedEnd","inputHiddenLabel"]);var $O;const bS=(r,e)=>{const{ownerState:t}=r;return[e.root,t.formControl&&e.formControl,t.startAdornment&&e.adornedStart,t.endAdornment&&e.adornedEnd,t.error&&e.error,t.size==="small"&&e.sizeSmall,t.multiline&&e.multiline,t.color&&e[`color${ft(t.color)}`],t.fullWidth&&e.fullWidth,t.hiddenLabel&&e.hiddenLabel]},SS=(r,e)=>{const{ownerState:t}=r;return[e.input,t.size==="small"&&e.inputSizeSmall,t.multiline&&e.inputMultiline,t.type==="search"&&e.inputTypeSearch,t.startAdornment&&e.inputAdornedStart,t.endAdornment&&e.inputAdornedEnd,t.hiddenLabel&&e.inputHiddenLabel]},Ase=r=>{const{classes:e,color:t,disabled:n,error:i,endAdornment:s,focused:a,formControl:o,fullWidth:l,hiddenLabel:u,multiline:c,readOnly:h,size:f,startAdornment:g,type:v}=r,y={root:["root",`color${ft(t)}`,n&&"disabled",i&&"error",l&&"fullWidth",a&&"focused",o&&"formControl",f&&f!=="medium"&&`size${ft(f)}`,c&&"multiline",g&&"adornedStart",s&&"adornedEnd",u&&"hiddenLabel",h&&"readOnly"],input:["input",n&&"disabled",v==="search"&&"inputTypeSearch",c&&"inputMultiline",f==="small"&&"inputSizeSmall",u&&"inputHiddenLabel",g&&"inputAdornedStart",s&&"inputAdornedEnd",h&&"readOnly"]};return Zt(y,kse,e)},TS=rt("div",{name:"MuiInputBase",slot:"Root",overridesResolver:bS})(cr(({theme:r})=>({...r.typography.body1,color:(r.vars||r).palette.text.primary,lineHeight:"1.4375em",boxSizing:"border-box",position:"relative",cursor:"text",display:"inline-flex",alignItems:"center",[`&.${Xp.disabled}`]:{color:(r.vars||r).palette.text.disabled,cursor:"default"},variants:[{props:({ownerState:e})=>e.multiline,style:{padding:"4px 0 5px"}},{props:({ownerState:e,size:t})=>e.multiline&&t==="small",style:{paddingTop:1}},{props:({ownerState:e})=>e.fullWidth,style:{width:"100%"}}]}))),CS=rt("input",{name:"MuiInputBase",slot:"Input",overridesResolver:SS})(cr(({theme:r})=>{const e=r.palette.mode==="light",t={color:"currentColor",...r.vars?{opacity:r.vars.opacity.inputPlaceholder}:{opacity:e?.42:.5},transition:r.transitions.create("opacity",{duration:r.transitions.duration.shorter})},n={opacity:"0 !important"},i=r.vars?{opacity:r.vars.opacity.inputPlaceholder}:{opacity:e?.42:.5};return{font:"inherit",letterSpacing:"inherit",color:"currentColor",padding:"4px 0 5px",border:0,boxSizing:"content-box",background:"none",height:"1.4375em",margin:0,WebkitTapHighlightColor:"transparent",display:"block",minWidth:0,width:"100%","&::-webkit-input-placeholder":t,"&::-moz-placeholder":t,"&::-ms-input-placeholder":t,"&:focus":{outline:0},"&:invalid":{boxShadow:"none"},"&::-webkit-search-decoration":{WebkitAppearance:"none"},[`label[data-shrink=false] + .${Xp.formControl} &`]:{"&::-webkit-input-placeholder":n,"&::-moz-placeholder":n,"&::-ms-input-placeholder":n,"&:focus::-webkit-input-placeholder":i,"&:focus::-moz-placeholder":i,"&:focus::-ms-input-placeholder":i},[`&.${Xp.disabled}`]:{opacity:1,WebkitTextFillColor:(r.vars||r).palette.text.disabled},variants:[{props:({ownerState:s})=>!s.disableInjectingGlobalStyles,style:{animationName:"mui-auto-fill-cancel",animationDuration:"10ms","&:-webkit-autofill":{animationDuration:"5000s",animationName:"mui-auto-fill"}}},{props:{size:"small"},style:{paddingTop:1}},{props:({ownerState:s})=>s.multiline,style:{height:"auto",resize:"none",padding:0,paddingTop:0}},{props:{type:"search"},style:{MozAppearance:"textfield"}}]}})),jO=pk({"@keyframes mui-auto-fill":{from:{display:"block"}},"@keyframes mui-auto-fill-cancel":{from:{display:"block"}}}),Ik=M.forwardRef(function(e,t){const n=Yt({props:e,name:"MuiInputBase"}),{"aria-describedby":i,autoComplete:s,autoFocus:a,className:o,color:l,components:u={},componentsProps:c={},defaultValue:h,disabled:f,disableInjectingGlobalStyles:g,endAdornment:v,error:y,fullWidth:_=!1,id:C,inputComponent:E="input",inputProps:D={},inputRef:I,margin:k,maxRows:P,minRows:N,multiline:U=!1,name:B,onBlur:A,onChange:$,onClick:W,onFocus:V,onKeyDown:Q,onKeyUp:ie,placeholder:ne,readOnly:ue,renderSuffix:se,rows:ae,size:ce,slotProps:ee={},slots:pe={},startAdornment:me,type:ye="text",value:Oe,...Le}=n,st=D.value!=null?D.value:Oe,{current:ze}=M.useRef(st!=null),pt=M.useRef(),Ye=M.useCallback(vt=>{},[]),Pt=Gn(pt,I,D.ref,Ye),[Rt,Ve]=M.useState(!1),Ne=$l(),Ie=rh({props:n,muiFormControl:Ne,states:["color","disabled","error","hiddenLabel","size","required","filled"]});Ie.focused=Ne?Ne.focused:Rt,M.useEffect(()=>{!Ne&&f&&Rt&&(Ve(!1),A&&A())},[Ne,f,Rt,A]);const Ue=Ne&&Ne.onFilled,et=Ne&&Ne.onEmpty,ot=M.useCallback(vt=>{j_(vt)?Ue&&Ue():et&&et()},[Ue,et]);tl(()=>{ze&&ot({value:st})},[st,ot,ze]);const dt=vt=>{V&&V(vt),D.onFocus&&D.onFocus(vt),Ne&&Ne.onFocus?Ne.onFocus(vt):Ve(!0)},it=vt=>{A&&A(vt),D.onBlur&&D.onBlur(vt),Ne&&Ne.onBlur?Ne.onBlur(vt):Ve(!1)},bt=(vt,...Ut)=>{if(!ze){const rn=vt.target||pt.current;if(rn==null)throw new Error(pf(1));ot({value:rn.value})}D.onChange&&D.onChange(vt,...Ut),$&&$(vt,...Ut)};M.useEffect(()=>{ot(pt.current)},[]);const lt=vt=>{pt.current&&vt.currentTarget===vt.target&&pt.current.focus(),W&&W(vt)};let gr=E,hr=D;U&&gr==="input"&&(ae?hr={type:void 0,minRows:ae,maxRows:ae,...hr}:hr={type:void 0,maxRows:P,minRows:N,...hr},gr=Ese);const Rr=vt=>{ot(vt.animationName==="mui-auto-fill-cancel"?pt.current:{value:"x"})};M.useEffect(()=>{Ne&&Ne.setAdornedStart(!!me)},[Ne,me]);const nr={...n,color:Ie.color||"primary",disabled:Ie.disabled,endAdornment:v,error:Ie.error,focused:Ie.focused,formControl:Ne,fullWidth:_,hiddenLabel:Ie.hiddenLabel,multiline:U,size:Ie.size,startAdornment:me,type:ye},qt=Ase(nr),fr=pe.root||u.Root||TS,yr=ee.root||c.root||{},Lr=pe.input||u.Input||CS;return hr={...hr,...ee.input??c.input},O.jsxs(M.Fragment,{children:[!g&&typeof jO=="function"&&($O||($O=O.jsx(jO,{}))),O.jsxs(fr,{...yr,ref:t,onClick:lt,...Le,...!Rg(fr)&&{ownerState:{...nr,...yr.ownerState}},className:Dt(qt.root,yr.className,o,ue&&"MuiInputBase-readOnly"),children:[me,O.jsx(xS.Provider,{value:null,children:O.jsx(Lr,{"aria-invalid":Ie.error,"aria-describedby":i,autoComplete:s,autoFocus:a,defaultValue:h,disabled:Ie.disabled,id:C,onAnimationStart:Rr,name:B,placeholder:ne,readOnly:ue,required:Ie.required,rows:ae,value:st,onKeyDown:Q,onKeyUp:ie,type:ye,...hr,...!Rg(Lr)&&{as:gr,ownerState:{...nr,...hr.ownerState}},ref:Pt,className:Dt(qt.input,hr.className,ue&&"MuiInputBase-readOnly"),onBlur:it,onChange:bt,onFocus:dt})}),v,se?se({...Ie,startAdornment:me}):null]})]})});function Dse(r){return er("MuiInput",r)}const S0={...Xp,...Qt("MuiInput",["root","underline","input"])};function Ise(r){return er("MuiOutlinedInput",r)}const cu={...Xp,...Qt("MuiOutlinedInput",["root","notchedOutline","input"])};function Pse(r){return er("MuiFilledInput",r)}const kh={...Xp,...Qt("MuiFilledInput",["root","underline","input","adornedStart","adornedEnd","sizeSmall","multiline","hiddenLabel"])},Rse=mr(O.jsx("path",{d:"M7 10l5 5 5-5z"})),Lse=mr(O.jsx("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"}));function Ose(r){return er("MuiAvatar",r)}Qt("MuiAvatar",["root","colorDefault","circular","rounded","square","img","fallback"]);const Mse=r=>{const{classes:e,variant:t,colorDefault:n}=r;return Zt({root:["root",t,n&&"colorDefault"],img:["img"],fallback:["fallback"]},Ose,e)},Fse=rt("div",{name:"MuiAvatar",slot:"Root",overridesResolver:(r,e)=>{const{ownerState:t}=r;return[e.root,e[t.variant],t.colorDefault&&e.colorDefault]}})(cr(({theme:r})=>({position:"relative",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,width:40,height:40,fontFamily:r.typography.fontFamily,fontSize:r.typography.pxToRem(20),lineHeight:1,borderRadius:"50%",overflow:"hidden",userSelect:"none",variants:[{props:{variant:"rounded"},style:{borderRadius:(r.vars||r).shape.borderRadius}},{props:{variant:"square"},style:{borderRadius:0}},{props:{colorDefault:!0},style:{color:(r.vars||r).palette.background.default,...r.vars?{backgroundColor:r.vars.palette.Avatar.defaultBg}:{backgroundColor:r.palette.grey[400],...r.applyStyles("dark",{backgroundColor:r.palette.grey[600]})}}}]}))),Bse=rt("img",{name:"MuiAvatar",slot:"Img"})({width:"100%",height:"100%",textAlign:"center",objectFit:"cover",color:"transparent",textIndent:1e4}),Nse=rt(Lse,{name:"MuiAvatar",slot:"Fallback"})({width:"75%",height:"75%"});function Use({crossOrigin:r,referrerPolicy:e,src:t,srcSet:n}){const[i,s]=M.useState(!1);return M.useEffect(()=>{if(!t&&!n)return;s(!1);let a=!0;const o=new Image;return o.onload=()=>{a&&s("loaded")},o.onerror=()=>{a&&s("error")},o.crossOrigin=r,o.referrerPolicy=e,o.src=t,n&&(o.srcset=n),()=>{a=!1}},[r,e,t,n]),i}const J1=M.forwardRef(function(e,t){const n=Yt({props:e,name:"MuiAvatar"}),{alt:i,children:s,className:a,component:o="div",slots:l={},slotProps:u={},imgProps:c,sizes:h,src:f,srcSet:g,variant:v="circular",...y}=n;let _=null;const C={...n,component:o,variant:v},E=Use({...c,...typeof u.img=="function"?u.img(C):u.img,src:f,srcSet:g}),D=f||g,I=D&&E!=="error";C.colorDefault=!I,delete C.ownerState;const k=Mse(C),[P,N]=ur("root",{ref:t,className:Dt(k.root,a),elementType:Fse,externalForwardedProps:{slots:l,slotProps:u,component:o,...y},ownerState:C}),[U,B]=ur("img",{className:k.img,elementType:Bse,externalForwardedProps:{slots:l,slotProps:{img:{...c,...u.img}}},additionalProps:{alt:i,src:f,srcSet:g,sizes:h},ownerState:C}),[A,$]=ur("fallback",{className:k.fallback,elementType:Nse,externalForwardedProps:{slots:l,slotProps:u},shouldForwardComponentProp:!0,ownerState:C});return I?_=O.jsx(U,{...B}):s||s===0?_=s:D&&i?_=i[0]:_=O.jsx(A,{...$}),O.jsx(P,{...N,children:_})});function $se(r){return er("MuiCard",r)}Qt("MuiCard",["root"]);const jse=r=>{const{classes:e}=r;return Zt({root:["root"]},$se,e)},zse=rt(Ku,{name:"MuiCard",slot:"Root"})({overflow:"hidden"}),Pc=M.forwardRef(function(e,t){const n=Yt({props:e,name:"MuiCard"}),{className:i,raised:s=!1,...a}=n,o={...n,raised:s},l=jse(o);return O.jsx(zse,{className:Dt(l.root,i),elevation:s?8:void 0,ref:t,ownerState:o,...a})});function Hse(r){return er("MuiCardActionArea",r)}const Z1=Qt("MuiCardActionArea",["root","focusVisible","focusHighlight"]),Vse=r=>{const{classes:e}=r;return Zt({root:["root"],focusHighlight:["focusHighlight"]},Hse,e)},Wse=rt(Mu,{name:"MuiCardActionArea",slot:"Root"})(cr(({theme:r})=>({display:"block",textAlign:"inherit",borderRadius:"inherit",width:"100%",[`&:hover .${Z1.focusHighlight}`]:{opacity:(r.vars||r).palette.action.hoverOpacity,"@media (hover: none)":{opacity:0}},[`&.${Z1.focusVisible} .${Z1.focusHighlight}`]:{opacity:(r.vars||r).palette.action.focusOpacity}}))),qse=rt("span",{name:"MuiCardActionArea",slot:"FocusHighlight"})(cr(({theme:r})=>({overflow:"hidden",pointerEvents:"none",position:"absolute",top:0,right:0,bottom:0,left:0,borderRadius:"inherit",opacity:0,backgroundColor:"currentcolor",transition:r.transitions.create("opacity",{duration:r.transitions.duration.short})}))),zO=M.forwardRef(function(e,t){const n=Yt({props:e,name:"MuiCardActionArea"}),{children:i,className:s,focusVisibleClassName:a,slots:o={},slotProps:l={},...u}=n,c=n,h=Vse(c),f={slots:o,slotProps:l},[g,v]=ur("root",{elementType:Wse,externalForwardedProps:{...f,...u},shouldForwardComponentProp:!0,ownerState:c,ref:t,className:Dt(h.root,s),additionalProps:{focusVisibleClassName:Dt(a,h.focusVisible)}}),[y,_]=ur("focusHighlight",{elementType:qse,externalForwardedProps:f,ownerState:c,ref:t,className:h.focusHighlight});return O.jsxs(g,{...v,children:[i,O.jsx(y,{..._})]})});function Gse(r){return er("MuiCardContent",r)}Qt("MuiCardContent",["root"]);const Kse=r=>{const{classes:e}=r;return Zt({root:["root"]},Gse,e)},Xse=rt("div",{name:"MuiCardContent",slot:"Root"})({padding:16,"&:last-child":{paddingBottom:24}}),Bd=M.forwardRef(function(e,t){const n=Yt({props:e,name:"MuiCardContent"}),{className:i,component:s="div",...a}=n,o={...n,component:s},l=Kse(o);return O.jsx(Xse,{as:s,className:Dt(l.root,i),ownerState:o,ref:t,...a})}),Yse=mr(O.jsx("path",{d:"M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"})),Qse=mr(O.jsx("path",{d:"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm-9 14l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"})),Jse=mr(O.jsx("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-2 10H7v-2h10v2z"}));function Zse(r){return er("MuiCheckbox",r)}const eC=Qt("MuiCheckbox",["root","checked","disabled","indeterminate","colorPrimary","colorSecondary","sizeSmall","sizeMedium"]),eae=r=>{const{classes:e,indeterminate:t,color:n,size:i}=r,s={root:["root",t&&"indeterminate",`color${ft(n)}`,`size${ft(i)}`]},a=Zt(s,Zse,e);return{...e,...a}},tae=rt(Ak,{shouldForwardProp:r=>as(r)||r==="classes",name:"MuiCheckbox",slot:"Root",overridesResolver:(r,e)=>{const{ownerState:t}=r;return[e.root,t.indeterminate&&e.indeterminate,e[`size${ft(t.size)}`],t.color!=="default"&&e[`color${ft(t.color)}`]]}})(cr(({theme:r})=>({color:(r.vars||r).palette.text.secondary,variants:[{props:{color:"default",disableRipple:!1},style:{"&:hover":{backgroundColor:r.vars?`rgba(${r.vars.palette.action.activeChannel} / ${r.vars.palette.action.hoverOpacity})`:Kr(r.palette.action.active,r.palette.action.hoverOpacity)}}},...Object.entries(r.palette).filter(_i()).map(([e])=>({props:{color:e,disableRipple:!1},style:{"&:hover":{backgroundColor:r.vars?`rgba(${r.vars.palette[e].mainChannel} / ${r.vars.palette.action.hoverOpacity})`:Kr(r.palette[e].main,r.palette.action.hoverOpacity)}}})),...Object.entries(r.palette).filter(_i()).map(([e])=>({props:{color:e},style:{[`&.${eC.checked}, &.${eC.indeterminate}`]:{color:(r.vars||r).palette[e].main},[`&.${eC.disabled}`]:{color:(r.vars||r).palette.action.disabled}}})),{props:{disableRipple:!1},style:{"&:hover":{"@media (hover: none)":{backgroundColor:"transparent"}}}}]}))),rae=O.jsx(Qse,{}),nae=O.jsx(Yse,{}),iae=O.jsx(Jse,{}),wp=M.forwardRef(function(e,t){const n=Yt({props:e,name:"MuiCheckbox"}),{checkedIcon:i=rae,color:s="primary",icon:a=nae,indeterminate:o=!1,indeterminateIcon:l=iae,inputProps:u,size:c="medium",disableRipple:h=!1,className:f,slots:g={},slotProps:v={},...y}=n,_=o?l:a,C=o?l:i,E={...n,disableRipple:h,color:s,indeterminate:o,size:c},D=eae(E),I=v.input??u,[k,P]=ur("root",{ref:t,elementType:tae,className:Dt(D.root,f),shouldForwardComponentProp:!0,externalForwardedProps:{slots:g,slotProps:v,...y},ownerState:E,additionalProps:{type:"checkbox",icon:M.cloneElement(_,{fontSize:_.props.fontSize??c}),checkedIcon:M.cloneElement(C,{fontSize:C.props.fontSize??c}),disableRipple:h,slots:g,slotProps:{input:xk(typeof I=="function"?I(E):I,{"data-indeterminate":o})}}});return O.jsx(k,{...P,classes:D})});function sae(r){return er("MuiDialogActions",r)}Qt("MuiDialogActions",["root","spacing"]);const aae=r=>{const{classes:e,disableSpacing:t}=r;return Zt({root:["root",!t&&"spacing"]},sae,e)},oae=rt("div",{name:"MuiDialogActions",slot:"Root",overridesResolver:(r,e)=>{const{ownerState:t}=r;return[e.root,!t.disableSpacing&&e.spacing]}})({display:"flex",alignItems:"center",padding:8,justifyContent:"flex-end",flex:"0 0 auto",variants:[{props:({ownerState:r})=>!r.disableSpacing,style:{"& > :not(style) ~ :not(style)":{marginLeft:8}}}]}),lae=M.forwardRef(function(e,t){const n=Yt({props:e,name:"MuiDialogActions"}),{className:i,disableSpacing:s=!1,...a}=n,o={...n,disableSpacing:s},l=aae(o);return O.jsx(oae,{className:Dt(l.root,i),ownerState:o,ref:t,...a})});function uae(r){return er("MuiDialogContent",r)}Qt("MuiDialogContent",["root","dividers"]);const cae=r=>{const{classes:e,dividers:t}=r;return Zt({root:["root",t&&"dividers"]},uae,e)},dae=rt("div",{name:"MuiDialogContent",slot:"Root",overridesResolver:(r,e)=>{const{ownerState:t}=r;return[e.root,t.dividers&&e.dividers]}})(cr(({theme:r})=>({flex:"1 1 auto",WebkitOverflowScrolling:"touch",overflowY:"auto",padding:"20px 24px",variants:[{props:({ownerState:e})=>e.dividers,style:{padding:"16px 24px",borderTop:`1px solid ${(r.vars||r).palette.divider}`,borderBottom:`1px solid ${(r.vars||r).palette.divider}`}},{props:({ownerState:e})=>!e.dividers,style:{[`.${dZ.root} + &`]:{paddingTop:0}}}]}))),Pk=M.forwardRef(function(e,t){const n=Yt({props:e,name:"MuiDialogContent"}),{className:i,dividers:s=!1,...a}=n,o={...n,dividers:s},l=cae(o);return O.jsx(dae,{className:Dt(l.root,i),ownerState:o,ref:t,...a})}),hae=r=>{const{classes:e,disableUnderline:t,startAdornment:n,endAdornment:i,size:s,hiddenLabel:a,multiline:o}=r,l={root:["root",!t&&"underline",n&&"adornedStart",i&&"adornedEnd",s==="small"&&`size${ft(s)}`,a&&"hiddenLabel",o&&"multiline"],input:["input"]},u=Zt(l,Pse,e);return{...e,...u}},fae=rt(TS,{shouldForwardProp:r=>as(r)||r==="classes",name:"MuiFilledInput",slot:"Root",overridesResolver:(r,e)=>{const{ownerState:t}=r;return[...bS(r,e),!t.disableUnderline&&e.underline]}})(cr(({theme:r})=>{const e=r.palette.mode==="light",t=e?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)",n=e?"rgba(0, 0, 0, 0.06)":"rgba(255, 255, 255, 0.09)",i=e?"rgba(0, 0, 0, 0.09)":"rgba(255, 255, 255, 0.13)",s=e?"rgba(0, 0, 0, 0.12)":"rgba(255, 255, 255, 0.12)";return{position:"relative",backgroundColor:r.vars?r.vars.palette.FilledInput.bg:n,borderTopLeftRadius:(r.vars||r).shape.borderRadius,borderTopRightRadius:(r.vars||r).shape.borderRadius,transition:r.transitions.create("background-color",{duration:r.transitions.duration.shorter,easing:r.transitions.easing.easeOut}),"&:hover":{backgroundColor:r.vars?r.vars.palette.FilledInput.hoverBg:i,"@media (hover: none)":{backgroundColor:r.vars?r.vars.palette.FilledInput.bg:n}},[`&.${kh.focused}`]:{backgroundColor:r.vars?r.vars.palette.FilledInput.bg:n},[`&.${kh.disabled}`]:{backgroundColor:r.vars?r.vars.palette.FilledInput.disabledBg:s},variants:[{props:({ownerState:a})=>!a.disableUnderline,style:{"&::after":{left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:r.transitions.create("transform",{duration:r.transitions.duration.shorter,easing:r.transitions.easing.easeOut}),pointerEvents:"none"},[`&.${kh.focused}:after`]:{transform:"scaleX(1) translateX(0)"},[`&.${kh.error}`]:{"&::before, &::after":{borderBottomColor:(r.vars||r).palette.error.main}},"&::before":{borderBottom:`1px solid ${r.vars?`rgba(${r.vars.palette.common.onBackgroundChannel} / ${r.vars.opacity.inputUnderline})`:t}`,left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:r.transitions.create("border-bottom-color",{duration:r.transitions.duration.shorter}),pointerEvents:"none"},[`&:hover:not(.${kh.disabled}, .${kh.error}):before`]:{borderBottom:`1px solid ${(r.vars||r).palette.text.primary}`},[`&.${kh.disabled}:before`]:{borderBottomStyle:"dotted"}}},...Object.entries(r.palette).filter(_i()).map(([a])=>({props:{disableUnderline:!1,color:a},style:{"&::after":{borderBottom:`2px solid ${(r.vars||r).palette[a]?.main}`}}})),{props:({ownerState:a})=>a.startAdornment,style:{paddingLeft:12}},{props:({ownerState:a})=>a.endAdornment,style:{paddingRight:12}},{props:({ownerState:a})=>a.multiline,style:{padding:"25px 12px 8px"}},{props:({ownerState:a,size:o})=>a.multiline&&o==="small",style:{paddingTop:21,paddingBottom:4}},{props:({ownerState:a})=>a.multiline&&a.hiddenLabel,style:{paddingTop:16,paddingBottom:17}},{props:({ownerState:a})=>a.multiline&&a.hiddenLabel&&a.size==="small",style:{paddingTop:8,paddingBottom:9}}]}})),pae=rt(CS,{name:"MuiFilledInput",slot:"Input",overridesResolver:SS})(cr(({theme:r})=>({paddingTop:25,paddingRight:12,paddingBottom:8,paddingLeft:12,...!r.vars&&{"&:-webkit-autofill":{WebkitBoxShadow:r.palette.mode==="light"?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:r.palette.mode==="light"?null:"#fff",caretColor:r.palette.mode==="light"?null:"#fff",borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"}},...r.vars&&{"&:-webkit-autofill":{borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"},[r.getColorSchemeSelector("dark")]:{"&:-webkit-autofill":{WebkitBoxShadow:"0 0 0 100px #266798 inset",WebkitTextFillColor:"#fff",caretColor:"#fff"}}},variants:[{props:{size:"small"},style:{paddingTop:21,paddingBottom:4}},{props:({ownerState:e})=>e.hiddenLabel,style:{paddingTop:16,paddingBottom:17}},{props:({ownerState:e})=>e.startAdornment,style:{paddingLeft:0}},{props:({ownerState:e})=>e.endAdornment,style:{paddingRight:0}},{props:({ownerState:e})=>e.hiddenLabel&&e.size==="small",style:{paddingTop:8,paddingBottom:9}},{props:({ownerState:e})=>e.multiline,style:{paddingTop:0,paddingBottom:0,paddingLeft:0,paddingRight:0}}]}))),Rk=M.forwardRef(function(e,t){const n=Yt({props:e,name:"MuiFilledInput"}),{disableUnderline:i=!1,components:s={},componentsProps:a,fullWidth:o=!1,hiddenLabel:l,inputComponent:u="input",multiline:c=!1,slotProps:h,slots:f={},type:g="text",...v}=n,y={...n,disableUnderline:i,fullWidth:o,inputComponent:u,multiline:c,type:g},_=hae(n),C={root:{ownerState:y},input:{ownerState:y}},E=h??a?Pu(C,h??a):C,D=f.root??s.Root??fae,I=f.input??s.Input??pae;return O.jsx(Ik,{slots:{root:D,input:I},slotProps:E,fullWidth:o,inputComponent:u,multiline:c,ref:t,type:g,...v,classes:_})});Rk.muiName="Input";function mae(r){return er("MuiFormHelperText",r)}const HO=Qt("MuiFormHelperText",["root","error","disabled","sizeSmall","sizeMedium","contained","focused","filled","required"]);var VO;const gae=r=>{const{classes:e,contained:t,size:n,disabled:i,error:s,filled:a,focused:o,required:l}=r,u={root:["root",i&&"disabled",s&&"error",n&&`size${ft(n)}`,t&&"contained",o&&"focused",a&&"filled",l&&"required"]};return Zt(u,mae,e)},vae=rt("p",{name:"MuiFormHelperText",slot:"Root",overridesResolver:(r,e)=>{const{ownerState:t}=r;return[e.root,t.size&&e[`size${ft(t.size)}`],t.contained&&e.contained,t.filled&&e.filled]}})(cr(({theme:r})=>({color:(r.vars||r).palette.text.secondary,...r.typography.caption,textAlign:"left",marginTop:3,marginRight:0,marginBottom:0,marginLeft:0,[`&.${HO.disabled}`]:{color:(r.vars||r).palette.text.disabled},[`&.${HO.error}`]:{color:(r.vars||r).palette.error.main},variants:[{props:{size:"small"},style:{marginTop:4}},{props:({ownerState:e})=>e.contained,style:{marginLeft:14,marginRight:14}}]}))),yae=M.forwardRef(function(e,t){const n=Yt({props:e,name:"MuiFormHelperText"}),{children:i,className:s,component:a="p",disabled:o,error:l,filled:u,focused:c,margin:h,required:f,variant:g,...v}=n,y=$l(),_=rh({props:n,muiFormControl:y,states:["variant","size","disabled","error","filled","focused","required"]}),C={...n,component:a,contained:_.variant==="filled"||_.variant==="outlined",variant:_.variant,size:_.size,disabled:_.disabled,error:_.error,filled:_.filled,focused:_.focused,required:_.required};delete C.ownerState;const E=gae(C);return O.jsx(vae,{as:a,className:Dt(E.root,s),ref:t,...v,ownerState:C,children:i===" "?VO||(VO=O.jsx("span",{className:"notranslate","aria-hidden":!0,children:""})):i})}),Ko=gJ({createStyledComponent:rt("div",{name:"MuiGrid",slot:"Root",overridesResolver:(r,e)=>{const{ownerState:t}=r;return[e.root,t.container&&e.container]}}),componentName:"MuiGrid",useThemeProps:r=>Yt({props:r,name:"MuiGrid"}),useTheme:Ul}),xae=r=>{const{classes:e,disableUnderline:t}=r,i=Zt({root:["root",!t&&"underline"],input:["input"]},Dse,e);return{...e,...i}},_ae=rt(TS,{shouldForwardProp:r=>as(r)||r==="classes",name:"MuiInput",slot:"Root",overridesResolver:(r,e)=>{const{ownerState:t}=r;return[...bS(r,e),!t.disableUnderline&&e.underline]}})(cr(({theme:r})=>{let t=r.palette.mode==="light"?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)";return r.vars&&(t=`rgba(${r.vars.palette.common.onBackgroundChannel} / ${r.vars.opacity.inputUnderline})`),{position:"relative",variants:[{props:({ownerState:n})=>n.formControl,style:{"label + &":{marginTop:16}}},{props:({ownerState:n})=>!n.disableUnderline,style:{"&::after":{left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:r.transitions.create("transform",{duration:r.transitions.duration.shorter,easing:r.transitions.easing.easeOut}),pointerEvents:"none"},[`&.${S0.focused}:after`]:{transform:"scaleX(1) translateX(0)"},[`&.${S0.error}`]:{"&::before, &::after":{borderBottomColor:(r.vars||r).palette.error.main}},"&::before":{borderBottom:`1px solid ${t}`,left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:r.transitions.create("border-bottom-color",{duration:r.transitions.duration.shorter}),pointerEvents:"none"},[`&:hover:not(.${S0.disabled}, .${S0.error}):before`]:{borderBottom:`2px solid ${(r.vars||r).palette.text.primary}`,"@media (hover: none)":{borderBottom:`1px solid ${t}`}},[`&.${S0.disabled}:before`]:{borderBottomStyle:"dotted"}}},...Object.entries(r.palette).filter(_i()).map(([n])=>({props:{color:n,disableUnderline:!1},style:{"&::after":{borderBottom:`2px solid ${(r.vars||r).palette[n].main}`}}}))]}})),bae=rt(CS,{name:"MuiInput",slot:"Input",overridesResolver:SS})({}),Lk=M.forwardRef(function(e,t){const n=Yt({props:e,name:"MuiInput"}),{disableUnderline:i=!1,components:s={},componentsProps:a,fullWidth:o=!1,inputComponent:l="input",multiline:u=!1,slotProps:c,slots:h={},type:f="text",...g}=n,v=xae(n),_={root:{ownerState:{disableUnderline:i}}},C=c??a?Pu(c??a,_):_,E=h.root??s.Root??_ae,D=h.input??s.Input??bae;return O.jsx(Ik,{slots:{root:E,input:D},slotProps:C,fullWidth:o,inputComponent:l,multiline:u,ref:t,type:f,...g,classes:v})});Lk.muiName="Input";function Sae(r){return er("MuiInputAdornment",r)}const WO=Qt("MuiInputAdornment",["root","filled","standard","outlined","positionStart","positionEnd","disablePointerEvents","hiddenLabel","sizeSmall"]);var qO;const Tae=(r,e)=>{const{ownerState:t}=r;return[e.root,e[`position${ft(t.position)}`],t.disablePointerEvents===!0&&e.disablePointerEvents,e[t.variant]]},Cae=r=>{const{classes:e,disablePointerEvents:t,hiddenLabel:n,position:i,size:s,variant:a}=r,o={root:["root",t&&"disablePointerEvents",i&&`position${ft(i)}`,a,n&&"hiddenLabel",s&&`size${ft(s)}`]};return Zt(o,Sae,e)},wae=rt("div",{name:"MuiInputAdornment",slot:"Root",overridesResolver:Tae})(cr(({theme:r})=>({display:"flex",maxHeight:"2em",alignItems:"center",whiteSpace:"nowrap",color:(r.vars||r).palette.action.active,variants:[{props:{variant:"filled"},style:{[`&.${WO.positionStart}&:not(.${WO.hiddenLabel})`]:{marginTop:16}}},{props:{position:"start"},style:{marginRight:8}},{props:{position:"end"},style:{marginLeft:8}},{props:{disablePointerEvents:!0},style:{pointerEvents:"none"}}]}))),d2=M.forwardRef(function(e,t){const n=Yt({props:e,name:"MuiInputAdornment"}),{children:i,className:s,component:a="div",disablePointerEvents:o=!1,disableTypography:l=!1,position:u,variant:c,...h}=n,f=$l()||{};let g=c;c&&f.variant,f&&!g&&(g=f.variant);const v={...n,hiddenLabel:f.hiddenLabel,size:f.size,disablePointerEvents:o,position:u,variant:g},y=Cae(v);return O.jsx(xS.Provider,{value:null,children:O.jsx(wae,{as:a,ownerState:v,className:Dt(y.root,s),ref:t,...h,children:typeof i=="string"&&!l?O.jsx(kr,{color:"textSecondary",children:i}):O.jsxs(M.Fragment,{children:[u==="start"?qO||(qO=O.jsx("span",{className:"notranslate","aria-hidden":!0,children:""})):null,i]})})})});function Eae(r){return er("MuiInputLabel",r)}Qt("MuiInputLabel",["root","focused","disabled","error","required","asterisk","formControl","sizeSmall","shrink","animated","standard","filled","outlined"]);const kae=r=>{const{classes:e,formControl:t,size:n,shrink:i,disableAnimation:s,variant:a,required:o}=r,l={root:["root",t&&"formControl",!s&&"animated",i&&"shrink",n&&n!=="medium"&&`size${ft(n)}`,a],asterisk:[o&&"asterisk"]},u=Zt(l,Eae,e);return{...e,...u}},Aae=rt(hie,{shouldForwardProp:r=>as(r)||r==="classes",name:"MuiInputLabel",slot:"Root",overridesResolver:(r,e)=>{const{ownerState:t}=r;return[{[`& .${ng.asterisk}`]:e.asterisk},e.root,t.formControl&&e.formControl,t.size==="small"&&e.sizeSmall,t.shrink&&e.shrink,!t.disableAnimation&&e.animated,t.focused&&e.focused,e[t.variant]]}})(cr(({theme:r})=>({display:"block",transformOrigin:"top left",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:"100%",variants:[{props:({ownerState:e})=>e.formControl,style:{position:"absolute",left:0,top:0,transform:"translate(0, 20px) scale(1)"}},{props:{size:"small"},style:{transform:"translate(0, 17px) scale(1)"}},{props:({ownerState:e})=>e.shrink,style:{transform:"translate(0, -1.5px) scale(0.75)",transformOrigin:"top left",maxWidth:"133%"}},{props:({ownerState:e})=>!e.disableAnimation,style:{transition:r.transitions.create(["color","transform","max-width"],{duration:r.transitions.duration.shorter,easing:r.transitions.easing.easeOut})}},{props:{variant:"filled"},style:{zIndex:1,pointerEvents:"none",transform:"translate(12px, 16px) scale(1)",maxWidth:"calc(100% - 24px)"}},{props:{variant:"filled",size:"small"},style:{transform:"translate(12px, 13px) scale(1)"}},{props:({variant:e,ownerState:t})=>e==="filled"&&t.shrink,style:{userSelect:"none",pointerEvents:"auto",transform:"translate(12px, 7px) scale(0.75)",maxWidth:"calc(133% - 24px)"}},{props:({variant:e,ownerState:t,size:n})=>e==="filled"&&t.shrink&&n==="small",style:{transform:"translate(12px, 4px) scale(0.75)"}},{props:{variant:"outlined"},style:{zIndex:1,pointerEvents:"none",transform:"translate(14px, 16px) scale(1)",maxWidth:"calc(100% - 24px)"}},{props:{variant:"outlined",size:"small"},style:{transform:"translate(14px, 9px) scale(1)"}},{props:({variant:e,ownerState:t})=>e==="outlined"&&t.shrink,style:{userSelect:"none",pointerEvents:"auto",maxWidth:"calc(133% - 32px)",transform:"translate(14px, -9px) scale(0.75)"}}]}))),Fu=M.forwardRef(function(e,t){const n=Yt({name:"MuiInputLabel",props:e}),{disableAnimation:i=!1,margin:s,shrink:a,variant:o,className:l,...u}=n,c=$l();let h=a;typeof h>"u"&&c&&(h=c.filled||c.focused||c.adornedStart);const f=rh({props:n,muiFormControl:c,states:["size","variant","required","focused"]}),g={...n,disableAnimation:i,formControl:c,shrink:h,size:f.size,variant:f.variant,required:f.required,focused:f.focused},v=kae(g);return O.jsx(Aae,{"data-shrink":h,ref:t,className:Dt(v.root,l),...u,ownerState:g,classes:v})});function tC(r,e,t){return r===e?r.firstChild:e&&e.nextElementSibling?e.nextElementSibling:t?null:r.firstChild}function GO(r,e,t){return r===e?t?r.firstChild:r.lastChild:e&&e.previousElementSibling?e.previousElementSibling:t?null:r.lastChild}function h5(r,e){if(e===void 0)return!0;let t=r.innerText;return t===void 0&&(t=r.textContent),t=t.trim().toLowerCase(),t.length===0?!1:e.repeating?t[0]===e.keys[0]:t.startsWith(e.keys.join(""))}function T0(r,e,t,n,i,s){let a=!1,o=i(r,e,e?t:!1);for(;o;){if(o===r.firstChild){if(a)return!1;a=!0}const l=n?!1:o.disabled||o.getAttribute("aria-disabled")==="true";if(!o.hasAttribute("tabindex")||!h5(o,s)||l)o=i(r,o,t);else return o.focus(),!0}return!1}const Dae=M.forwardRef(function(e,t){const{actions:n,autoFocus:i=!1,autoFocusItem:s=!1,children:a,className:o,disabledItemsFocusable:l=!1,disableListWrap:u=!1,onKeyDown:c,variant:h="selectedMenu",...f}=e,g=M.useRef(null),v=M.useRef({keys:[],repeating:!0,previousKeyMatched:!0,lastTime:null});tl(()=>{i&&g.current.focus()},[i]),M.useImperativeHandle(n,()=>({adjustStyleForScrollbar:(D,{direction:I})=>{const k=!g.current.style.width;if(D.clientHeight<g.current.clientHeight&&k){const P=`${kN(vo(D))}px`;g.current.style[I==="rtl"?"paddingLeft":"paddingRight"]=P,g.current.style.width=`calc(100% + ${P})`}return g.current}}),[]);const y=D=>{const I=g.current,k=D.key;if(D.ctrlKey||D.metaKey||D.altKey){c&&c(D);return}const N=Ss(I).activeElement;if(k==="ArrowDown")D.preventDefault(),T0(I,N,u,l,tC);else if(k==="ArrowUp")D.preventDefault(),T0(I,N,u,l,GO);else if(k==="Home")D.preventDefault(),T0(I,null,u,l,tC);else if(k==="End")D.preventDefault(),T0(I,null,u,l,GO);else if(k.length===1){const U=v.current,B=k.toLowerCase(),A=performance.now();U.keys.length>0&&(A-U.lastTime>500?(U.keys=[],U.repeating=!0,U.previousKeyMatched=!0):U.repeating&&B!==U.keys[0]&&(U.repeating=!1)),U.lastTime=A,U.keys.push(B);const $=N&&!U.repeating&&h5(N,U);U.previousKeyMatched&&($||T0(I,N,!1,l,tC,U))?D.preventDefault():U.previousKeyMatched=!1}c&&c(D)},_=Gn(g,t);let C=-1;M.Children.forEach(a,(D,I)=>{if(!M.isValidElement(D)){C===I&&(C+=1,C>=a.length&&(C=-1));return}D.props.disabled||(h==="selectedMenu"&&D.props.selected||C===-1)&&(C=I),C===I&&(D.props.disabled||D.props.muiSkipListHighlight||D.type.muiSkipListHighlight)&&(C+=1,C>=a.length&&(C=-1))});const E=M.Children.map(a,(D,I)=>{if(I===C){const k={};return s&&(k.autoFocus=!0),D.props.tabIndex===void 0&&h==="selectedMenu"&&(k.tabIndex=0),M.cloneElement(D,k)}return D});return O.jsx(r2,{role:"menu",ref:_,className:o,onKeyDown:y,tabIndex:i?0:-1,...f,children:E})});function Iae(r){return er("MuiPopover",r)}Qt("MuiPopover",["root","paper"]);function KO(r,e){let t=0;return typeof e=="number"?t=e:e==="center"?t=r.height/2:e==="bottom"&&(t=r.height),t}function XO(r,e){let t=0;return typeof e=="number"?t=e:e==="center"?t=r.width/2:e==="right"&&(t=r.width),t}function YO(r){return[r.horizontal,r.vertical].map(e=>typeof e=="number"?`${e}px`:e).join(" ")}function Oy(r){return typeof r=="function"?r():r}const Pae=r=>{const{classes:e}=r;return Zt({root:["root"],paper:["paper"]},Iae,e)},Rae=rt(yk,{name:"MuiPopover",slot:"Root"})({}),f5=rt(Ku,{name:"MuiPopover",slot:"Paper"})({position:"absolute",overflowY:"auto",overflowX:"hidden",minWidth:16,minHeight:16,maxWidth:"calc(100% - 32px)",maxHeight:"calc(100% - 32px)",outline:0}),Lae=M.forwardRef(function(e,t){const n=Yt({props:e,name:"MuiPopover"}),{action:i,anchorEl:s,anchorOrigin:a={vertical:"top",horizontal:"left"},anchorPosition:o,anchorReference:l="anchorEl",children:u,className:c,container:h,elevation:f=8,marginThreshold:g=16,open:v,PaperProps:y={},slots:_={},slotProps:C={},transformOrigin:E={vertical:"top",horizontal:"left"},TransitionComponent:D,transitionDuration:I="auto",TransitionProps:k={},disableScrollLock:P=!1,...N}=n,U=M.useRef(),B={...n,anchorOrigin:a,anchorReference:l,elevation:f,marginThreshold:g,transformOrigin:E,TransitionComponent:D,transitionDuration:I,TransitionProps:k},A=Pae(B),$=M.useCallback(()=>{if(l==="anchorPosition")return o;const Ye=Oy(s),Rt=(Ye&&Ye.nodeType===1?Ye:Ss(U.current).body).getBoundingClientRect();return{top:Rt.top+KO(Rt,a.vertical),left:Rt.left+XO(Rt,a.horizontal)}},[s,a.horizontal,a.vertical,o,l]),W=M.useCallback(Ye=>({vertical:KO(Ye,E.vertical),horizontal:XO(Ye,E.horizontal)}),[E.horizontal,E.vertical]),V=M.useCallback(Ye=>{const Pt={width:Ye.offsetWidth,height:Ye.offsetHeight},Rt=W(Pt);if(l==="none")return{top:null,left:null,transformOrigin:YO(Rt)};const Ve=$();let Ne=Ve.top-Rt.vertical,Ie=Ve.left-Rt.horizontal;const Ue=Ne+Pt.height,et=Ie+Pt.width,ot=vo(Oy(s)),dt=ot.innerHeight-g,it=ot.innerWidth-g;if(g!==null&&Ne<g){const bt=Ne-g;Ne-=bt,Rt.vertical+=bt}else if(g!==null&&Ue>dt){const bt=Ue-dt;Ne-=bt,Rt.vertical+=bt}if(g!==null&&Ie<g){const bt=Ie-g;Ie-=bt,Rt.horizontal+=bt}else if(et>it){const bt=et-it;Ie-=bt,Rt.horizontal+=bt}return{top:`${Math.round(Ne)}px`,left:`${Math.round(Ie)}px`,transformOrigin:YO(Rt)}},[s,l,$,W,g]),[Q,ie]=M.useState(v),ne=M.useCallback(()=>{const Ye=U.current;if(!Ye)return;const Pt=V(Ye);Pt.top!==null&&Ye.style.setProperty("top",Pt.top),Pt.left!==null&&(Ye.style.left=Pt.left),Ye.style.transformOrigin=Pt.transformOrigin,ie(!0)},[V]);M.useEffect(()=>(P&&window.addEventListener("scroll",ne),()=>window.removeEventListener("scroll",ne)),[s,P,ne]);const ue=()=>{ne()},se=()=>{ie(!1)};M.useEffect(()=>{v&&ne()}),M.useImperativeHandle(i,()=>v?{updatePosition:()=>{ne()}}:null,[v,ne]),M.useEffect(()=>{if(!v)return;const Ye=cv(()=>{ne()}),Pt=vo(Oy(s));return Pt.addEventListener("resize",Ye),()=>{Ye.clear(),Pt.removeEventListener("resize",Ye)}},[s,v,ne]);let ae=I;const ce={slots:{transition:D,..._},slotProps:{transition:k,paper:y,...C}},[ee,pe]=ur("transition",{elementType:Lg,externalForwardedProps:ce,ownerState:B,getSlotProps:Ye=>({...Ye,onEntering:(Pt,Rt)=>{Ye.onEntering?.(Pt,Rt),ue()},onExited:Pt=>{Ye.onExited?.(Pt),se()}}),additionalProps:{appear:!0,in:v}});I==="auto"&&!ee.muiSupportAuto&&(ae=void 0);const me=h||(s?Ss(Oy(s)).body:void 0),[ye,{slots:Oe,slotProps:Le,...st}]=ur("root",{ref:t,elementType:Rae,externalForwardedProps:{...ce,...N},shouldForwardComponentProp:!0,additionalProps:{slots:{backdrop:_.backdrop},slotProps:{backdrop:xk(typeof C.backdrop=="function"?C.backdrop(B):C.backdrop,{invisible:!0})},container:me,open:v},ownerState:B,className:Dt(A.root,c)}),[ze,pt]=ur("paper",{ref:U,className:A.paper,elementType:f5,externalForwardedProps:ce,shouldForwardComponentProp:!0,additionalProps:{elevation:f,style:Q?void 0:{opacity:0}},ownerState:B});return O.jsx(ye,{...st,...!Rg(ye)&&{slots:Oe,slotProps:Le,disableScrollLock:P},children:O.jsx(ee,{...pe,timeout:ae,children:O.jsx(ze,{...pt,children:u})})})});function Oae(r){return er("MuiMenu",r)}Qt("MuiMenu",["root","paper","list"]);const Mae={vertical:"top",horizontal:"right"},Fae={vertical:"top",horizontal:"left"},Bae=r=>{const{classes:e}=r;return Zt({root:["root"],paper:["paper"],list:["list"]},Oae,e)},Nae=rt(Lae,{shouldForwardProp:r=>as(r)||r==="classes",name:"MuiMenu",slot:"Root"})({}),Uae=rt(f5,{name:"MuiMenu",slot:"Paper"})({maxHeight:"calc(100% - 96px)",WebkitOverflowScrolling:"touch"}),$ae=rt(Dae,{name:"MuiMenu",slot:"List"})({outline:0}),jae=M.forwardRef(function(e,t){const n=Yt({props:e,name:"MuiMenu"}),{autoFocus:i=!0,children:s,className:a,disableAutoFocusItem:o=!1,MenuListProps:l={},onClose:u,open:c,PaperProps:h={},PopoverClasses:f,transitionDuration:g="auto",TransitionProps:{onEntering:v,...y}={},variant:_="selectedMenu",slots:C={},slotProps:E={},...D}=n,I=_m(),k={...n,autoFocus:i,disableAutoFocusItem:o,MenuListProps:l,onEntering:v,PaperProps:h,transitionDuration:g,TransitionProps:y,variant:_},P=Bae(k),N=i&&!o&&c,U=M.useRef(null),B=(ae,ce)=>{U.current&&U.current.adjustStyleForScrollbar(ae,{direction:I?"rtl":"ltr"}),v&&v(ae,ce)},A=ae=>{ae.key==="Tab"&&(ae.preventDefault(),u&&u(ae,"tabKeyDown"))};let $=-1;M.Children.map(s,(ae,ce)=>{M.isValidElement(ae)&&(ae.props.disabled||(_==="selectedMenu"&&ae.props.selected||$===-1)&&($=ce))});const W={slots:C,slotProps:{list:l,transition:y,paper:h,...E}},V=Kp({elementType:C.root,externalSlotProps:E.root,ownerState:k,className:[P.root,a]}),[Q,ie]=ur("paper",{className:P.paper,elementType:Uae,externalForwardedProps:W,shouldForwardComponentProp:!0,ownerState:k}),[ne,ue]=ur("list",{className:Dt(P.list,l.className),elementType:$ae,shouldForwardComponentProp:!0,externalForwardedProps:W,getSlotProps:ae=>({...ae,onKeyDown:ce=>{A(ce),ae.onKeyDown?.(ce)}}),ownerState:k}),se=typeof W.slotProps.transition=="function"?W.slotProps.transition(k):W.slotProps.transition;return O.jsx(Nae,{onClose:u,anchorOrigin:{vertical:"bottom",horizontal:I?"right":"left"},transformOrigin:I?Mae:Fae,slots:{root:C.root,paper:Q,backdrop:C.backdrop,...C.transition&&{transition:C.transition}},slotProps:{root:V,paper:ie,backdrop:typeof E.backdrop=="function"?E.backdrop(k):E.backdrop,transition:{...se,onEntering:(...ae)=>{B(...ae),se?.onEntering?.(...ae)}}},open:c,ref:t,transitionDuration:g,ownerState:k,...D,classes:f,children:O.jsx(ne,{actions:U,autoFocus:i&&($===-1||o),autoFocusItem:N,variant:_,...ue,children:s})})});function zae(r){return er("MuiMenuItem",r)}const C0=Qt("MuiMenuItem",["root","focusVisible","dense","disabled","divider","gutters","selected"]),Hae=(r,e)=>{const{ownerState:t}=r;return[e.root,t.dense&&e.dense,t.divider&&e.divider,!t.disableGutters&&e.gutters]},Vae=r=>{const{disabled:e,dense:t,divider:n,disableGutters:i,selected:s,classes:a}=r,l=Zt({root:["root",t&&"dense",e&&"disabled",!i&&"gutters",n&&"divider",s&&"selected"]},zae,a);return{...a,...l}},Wae=rt(Mu,{shouldForwardProp:r=>as(r)||r==="classes",name:"MuiMenuItem",slot:"Root",overridesResolver:Hae})(cr(({theme:r})=>({...r.typography.body1,display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",minHeight:48,paddingTop:6,paddingBottom:6,boxSizing:"border-box",whiteSpace:"nowrap","&:hover":{textDecoration:"none",backgroundColor:(r.vars||r).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${C0.selected}`]:{backgroundColor:r.vars?`rgba(${r.vars.palette.primary.mainChannel} / ${r.vars.palette.action.selectedOpacity})`:Kr(r.palette.primary.main,r.palette.action.selectedOpacity),[`&.${C0.focusVisible}`]:{backgroundColor:r.vars?`rgba(${r.vars.palette.primary.mainChannel} / calc(${r.vars.palette.action.selectedOpacity} + ${r.vars.palette.action.focusOpacity}))`:Kr(r.palette.primary.main,r.palette.action.selectedOpacity+r.palette.action.focusOpacity)}},[`&.${C0.selected}:hover`]:{backgroundColor:r.vars?`rgba(${r.vars.palette.primary.mainChannel} / calc(${r.vars.palette.action.selectedOpacity} + ${r.vars.palette.action.hoverOpacity}))`:Kr(r.palette.primary.main,r.palette.action.selectedOpacity+r.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:r.vars?`rgba(${r.vars.palette.primary.mainChannel} / ${r.vars.palette.action.selectedOpacity})`:Kr(r.palette.primary.main,r.palette.action.selectedOpacity)}},[`&.${C0.focusVisible}`]:{backgroundColor:(r.vars||r).palette.action.focus},[`&.${C0.disabled}`]:{opacity:(r.vars||r).palette.action.disabledOpacity},[`& + .${TO.root}`]:{marginTop:r.spacing(1),marginBottom:r.spacing(1)},[`& + .${TO.inset}`]:{marginLeft:52},[`& .${up.root}`]:{marginTop:0,marginBottom:0},[`& .${up.inset}`]:{paddingLeft:36},[`& .${gO.root}`]:{minWidth:36},variants:[{props:({ownerState:e})=>!e.disableGutters,style:{paddingLeft:16,paddingRight:16}},{props:({ownerState:e})=>e.divider,style:{borderBottom:`1px solid ${(r.vars||r).palette.divider}`,backgroundClip:"padding-box"}},{props:({ownerState:e})=>!e.dense,style:{[r.breakpoints.up("sm")]:{minHeight:"auto"}}},{props:({ownerState:e})=>e.dense,style:{minHeight:32,paddingTop:4,paddingBottom:4,...r.typography.body2,[`& .${gO.root} svg`]:{fontSize:"1.25rem"}}}]}))),Fc=M.forwardRef(function(e,t){const n=Yt({props:e,name:"MuiMenuItem"}),{autoFocus:i=!1,component:s="li",dense:a=!1,divider:o=!1,disableGutters:l=!1,focusVisibleClassName:u,role:c="menuitem",tabIndex:h,className:f,...g}=n,v=M.useContext(Pl),y=M.useMemo(()=>({dense:a||v.dense||!1,disableGutters:l}),[v.dense,a,l]),_=M.useRef(null);tl(()=>{i&&_.current&&_.current.focus()},[i]);const C={...n,dense:y.dense,divider:o,disableGutters:l},E=Vae(n),D=Gn(_,t);let I;return n.disabled||(I=h!==void 0?h:-1),O.jsx(Pl.Provider,{value:y,children:O.jsx(Wae,{ref:D,role:c,tabIndex:I,component:s,focusVisibleClassName:Dt(E.focusVisible,u),className:Dt(E.root,f),...g,ownerState:C,classes:E})})});function qae(r){return er("MuiNativeSelect",r)}const Ok=Qt("MuiNativeSelect",["root","select","multiple","filled","outlined","standard","disabled","icon","iconOpen","iconFilled","iconOutlined","iconStandard","nativeInput","error"]),Gae=r=>{const{classes:e,variant:t,disabled:n,multiple:i,open:s,error:a}=r,o={select:["select",t,n&&"disabled",i&&"multiple",a&&"error"],icon:["icon",`icon${ft(t)}`,s&&"iconOpen",n&&"disabled"]};return Zt(o,qae,e)},p5=rt("select")(({theme:r})=>({MozAppearance:"none",WebkitAppearance:"none",userSelect:"none",borderRadius:0,cursor:"pointer","&:focus":{borderRadius:0},[`&.${Ok.disabled}`]:{cursor:"default"},"&[multiple]":{height:"auto"},"&:not([multiple]) option, &:not([multiple]) optgroup":{backgroundColor:(r.vars||r).palette.background.paper},variants:[{props:({ownerState:e})=>e.variant!=="filled"&&e.variant!=="outlined",style:{"&&&":{paddingRight:24,minWidth:16}}},{props:{variant:"filled"},style:{"&&&":{paddingRight:32}}},{props:{variant:"outlined"},style:{borderRadius:(r.vars||r).shape.borderRadius,"&:focus":{borderRadius:(r.vars||r).shape.borderRadius},"&&&":{paddingRight:32}}}]})),Kae=rt(p5,{name:"MuiNativeSelect",slot:"Select",shouldForwardProp:as,overridesResolver:(r,e)=>{const{ownerState:t}=r;return[e.select,e[t.variant],t.error&&e.error,{[`&.${Ok.multiple}`]:e.multiple}]}})({}),m5=rt("svg")(({theme:r})=>({position:"absolute",right:0,top:"calc(50% - .5em)",pointerEvents:"none",color:(r.vars||r).palette.action.active,[`&.${Ok.disabled}`]:{color:(r.vars||r).palette.action.disabled},variants:[{props:({ownerState:e})=>e.open,style:{transform:"rotate(180deg)"}},{props:{variant:"filled"},style:{right:7}},{props:{variant:"outlined"},style:{right:7}}]})),Xae=rt(m5,{name:"MuiNativeSelect",slot:"Icon",overridesResolver:(r,e)=>{const{ownerState:t}=r;return[e.icon,t.variant&&e[`icon${ft(t.variant)}`],t.open&&e.iconOpen]}})({}),Yae=M.forwardRef(function(e,t){const{className:n,disabled:i,error:s,IconComponent:a,inputRef:o,variant:l="standard",...u}=e,c={...e,disabled:i,variant:l,error:s},h=Gae(c);return O.jsxs(M.Fragment,{children:[O.jsx(Kae,{ownerState:c,className:Dt(h.select,n),disabled:i,ref:o||t,...u}),e.multiple?null:O.jsx(Xae,{as:a,ownerState:c,className:h.icon})]})});var QO;const Qae=rt("fieldset",{shouldForwardProp:as})({textAlign:"left",position:"absolute",bottom:0,right:0,top:-5,left:0,margin:0,padding:"0 8px",pointerEvents:"none",borderRadius:"inherit",borderStyle:"solid",borderWidth:1,overflow:"hidden",minWidth:"0%"}),Jae=rt("legend",{shouldForwardProp:as})(cr(({theme:r})=>({float:"unset",width:"auto",overflow:"hidden",variants:[{props:({ownerState:e})=>!e.withLabel,style:{padding:0,lineHeight:"11px",transition:r.transitions.create("width",{duration:150,easing:r.transitions.easing.easeOut})}},{props:({ownerState:e})=>e.withLabel,style:{display:"block",padding:0,height:11,fontSize:"0.75em",visibility:"hidden",maxWidth:.01,transition:r.transitions.create("max-width",{duration:50,easing:r.transitions.easing.easeOut}),whiteSpace:"nowrap","& > span":{paddingLeft:5,paddingRight:5,display:"inline-block",opacity:0,visibility:"visible"}}},{props:({ownerState:e})=>e.withLabel&&e.notched,style:{maxWidth:"100%",transition:r.transitions.create("max-width",{duration:100,easing:r.transitions.easing.easeOut,delay:50})}}]})));function Zae(r){const{children:e,classes:t,className:n,label:i,notched:s,...a}=r,o=i!=null&&i!=="",l={...r,notched:s,withLabel:o};return O.jsx(Qae,{"aria-hidden":!0,className:n,ownerState:l,...a,children:O.jsx(Jae,{ownerState:l,children:o?O.jsx("span",{children:i}):QO||(QO=O.jsx("span",{className:"notranslate","aria-hidden":!0,children:""}))})})}const eoe=r=>{const{classes:e}=r,n=Zt({root:["root"],notchedOutline:["notchedOutline"],input:["input"]},Ise,e);return{...e,...n}},toe=rt(TS,{shouldForwardProp:r=>as(r)||r==="classes",name:"MuiOutlinedInput",slot:"Root",overridesResolver:bS})(cr(({theme:r})=>{const e=r.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return{position:"relative",borderRadius:(r.vars||r).shape.borderRadius,[`&:hover .${cu.notchedOutline}`]:{borderColor:(r.vars||r).palette.text.primary},"@media (hover: none)":{[`&:hover .${cu.notchedOutline}`]:{borderColor:r.vars?`rgba(${r.vars.palette.common.onBackgroundChannel} / 0.23)`:e}},[`&.${cu.focused} .${cu.notchedOutline}`]:{borderWidth:2},variants:[...Object.entries(r.palette).filter(_i()).map(([t])=>({props:{color:t},style:{[`&.${cu.focused} .${cu.notchedOutline}`]:{borderColor:(r.vars||r).palette[t].main}}})),{props:{},style:{[`&.${cu.error} .${cu.notchedOutline}`]:{borderColor:(r.vars||r).palette.error.main},[`&.${cu.disabled} .${cu.notchedOutline}`]:{borderColor:(r.vars||r).palette.action.disabled}}},{props:({ownerState:t})=>t.startAdornment,style:{paddingLeft:14}},{props:({ownerState:t})=>t.endAdornment,style:{paddingRight:14}},{props:({ownerState:t})=>t.multiline,style:{padding:"16.5px 14px"}},{props:({ownerState:t,size:n})=>t.multiline&&n==="small",style:{padding:"8.5px 14px"}}]}})),roe=rt(Zae,{name:"MuiOutlinedInput",slot:"NotchedOutline"})(cr(({theme:r})=>{const e=r.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return{borderColor:r.vars?`rgba(${r.vars.palette.common.onBackgroundChannel} / 0.23)`:e}})),noe=rt(CS,{name:"MuiOutlinedInput",slot:"Input",overridesResolver:SS})(cr(({theme:r})=>({padding:"16.5px 14px",...!r.vars&&{"&:-webkit-autofill":{WebkitBoxShadow:r.palette.mode==="light"?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:r.palette.mode==="light"?null:"#fff",caretColor:r.palette.mode==="light"?null:"#fff",borderRadius:"inherit"}},...r.vars&&{"&:-webkit-autofill":{borderRadius:"inherit"},[r.getColorSchemeSelector("dark")]:{"&:-webkit-autofill":{WebkitBoxShadow:"0 0 0 100px #266798 inset",WebkitTextFillColor:"#fff",caretColor:"#fff"}}},variants:[{props:{size:"small"},style:{padding:"8.5px 14px"}},{props:({ownerState:e})=>e.multiline,style:{padding:0}},{props:({ownerState:e})=>e.startAdornment,style:{paddingLeft:0}},{props:({ownerState:e})=>e.endAdornment,style:{paddingRight:0}}]}))),Yp=M.forwardRef(function(e,t){const n=Yt({props:e,name:"MuiOutlinedInput"}),{components:i={},fullWidth:s=!1,inputComponent:a="input",label:o,multiline:l=!1,notched:u,slots:c={},slotProps:h={},type:f="text",...g}=n,v=eoe(n),y=$l(),_=rh({props:n,muiFormControl:y,states:["color","disabled","error","focused","hiddenLabel","size","required"]}),C={...n,color:_.color||"primary",disabled:_.disabled,error:_.error,focused:_.focused,formControl:y,fullWidth:s,hiddenLabel:_.hiddenLabel,multiline:l,size:_.size,type:f},E=c.root??i.Root??toe,D=c.input??i.Input??noe,[I,k]=ur("notchedOutline",{elementType:roe,className:v.notchedOutline,shouldForwardComponentProp:!0,ownerState:C,externalForwardedProps:{slots:c,slotProps:h},additionalProps:{label:o!=null&&o!==""&&_.required?O.jsxs(M.Fragment,{children:[o,"","*"]}):o}});return O.jsx(Ik,{slots:{root:E,input:D},slotProps:h,renderSuffix:P=>O.jsx(I,{...k,notched:typeof u<"u"?u:!!(P.startAdornment||P.filled||P.focused)}),fullWidth:s,inputComponent:a,multiline:l,ref:t,type:f,...g,classes:{...v,notchedOutline:null}})});Yp.muiName="Input";function g5(r){return er("MuiSelect",r)}const w0=Qt("MuiSelect",["root","select","multiple","filled","outlined","standard","disabled","focused","icon","iconOpen","iconFilled","iconOutlined","iconStandard","nativeInput","error"]);var JO;const ioe=rt(p5,{name:"MuiSelect",slot:"Select",overridesResolver:(r,e)=>{const{ownerState:t}=r;return[{[`&.${w0.select}`]:e.select},{[`&.${w0.select}`]:e[t.variant]},{[`&.${w0.error}`]:e.error},{[`&.${w0.multiple}`]:e.multiple}]}})({[`&.${w0.select}`]:{height:"auto",minHeight:"1.4375em",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"}}),soe=rt(m5,{name:"MuiSelect",slot:"Icon",overridesResolver:(r,e)=>{const{ownerState:t}=r;return[e.icon,t.variant&&e[`icon${ft(t.variant)}`],t.open&&e.iconOpen]}})({}),aoe=rt("input",{shouldForwardProp:r=>wN(r)&&r!=="classes",name:"MuiSelect",slot:"NativeInput"})({bottom:0,left:0,position:"absolute",opacity:0,pointerEvents:"none",width:"100%",boxSizing:"border-box"});function ZO(r,e){return typeof e=="object"&&e!==null?r===e:String(r)===String(e)}function ooe(r){return r==null||typeof r=="string"&&!r.trim()}const loe=r=>{const{classes:e,variant:t,disabled:n,multiple:i,open:s,error:a}=r,o={select:["select",t,n&&"disabled",i&&"multiple",a&&"error"],icon:["icon",`icon${ft(t)}`,s&&"iconOpen",n&&"disabled"],nativeInput:["nativeInput"]};return Zt(o,g5,e)},uoe=M.forwardRef(function(e,t){const{"aria-describedby":n,"aria-label":i,autoFocus:s,autoWidth:a,children:o,className:l,defaultOpen:u,defaultValue:c,disabled:h,displayEmpty:f,error:g=!1,IconComponent:v,inputRef:y,labelId:_,MenuProps:C={},multiple:E,name:D,onBlur:I,onChange:k,onClose:P,onFocus:N,onOpen:U,open:B,readOnly:A,renderValue:$,required:W,SelectDisplayProps:V={},tabIndex:Q,type:ie,value:ne,variant:ue="standard",...se}=e,[ae,ce]=Dg({controlled:ne,default:c,name:"Select"}),[ee,pe]=Dg({controlled:B,default:u,name:"Select"}),me=M.useRef(null),ye=M.useRef(null),[Oe,Le]=M.useState(null),{current:st}=M.useRef(B!=null),[ze,pt]=M.useState(),Ye=Gn(t,y),Pt=M.useCallback(jt=>{ye.current=jt,jt&&Le(jt)},[]),Rt=Oe?.parentNode;M.useImperativeHandle(Ye,()=>({focus:()=>{ye.current.focus()},node:me.current,value:ae}),[ae]),M.useEffect(()=>{u&&ee&&Oe&&!st&&(pt(a?null:Rt.clientWidth),ye.current.focus())},[Oe,a]),M.useEffect(()=>{s&&ye.current.focus()},[s]),M.useEffect(()=>{if(!_)return;const jt=Ss(ye.current).getElementById(_);if(jt){const br=()=>{getSelection().isCollapsed&&ye.current.focus()};return jt.addEventListener("click",br),()=>{jt.removeEventListener("click",br)}}},[_]);const Ve=(jt,br)=>{jt?U&&U(br):P&&P(br),st||(pt(a?null:Rt.clientWidth),pe(jt))},Ne=jt=>{jt.button===0&&(jt.preventDefault(),ye.current.focus(),Ve(!0,jt))},Ie=jt=>{Ve(!1,jt)},Ue=M.Children.toArray(o),et=jt=>{const br=Ue.find(Or=>Or.props.value===jt.target.value);br!==void 0&&(ce(br.props.value),k&&k(jt,br))},ot=jt=>br=>{let Or;if(br.currentTarget.hasAttribute("tabindex")){if(E){Or=Array.isArray(ae)?ae.slice():[];const Hr=ae.indexOf(jt.props.value);Hr===-1?Or.push(jt.props.value):Or.splice(Hr,1)}else Or=jt.props.value;if(jt.props.onClick&&jt.props.onClick(br),ae!==Or&&(ce(Or),k)){const Hr=br.nativeEvent||br,ln=new Hr.constructor(Hr.type,Hr);Object.defineProperty(ln,"target",{writable:!0,value:{value:Or,name:D}}),k(ln,jt)}E||Ve(!1,br)}},dt=jt=>{A||[" ","ArrowUp","ArrowDown","Enter"].includes(jt.key)&&(jt.preventDefault(),Ve(!0,jt))},it=Oe!==null&&ee,bt=jt=>{!it&&I&&(Object.defineProperty(jt,"target",{writable:!0,value:{value:ae,name:D}}),I(jt))};delete se["aria-invalid"];let lt,gr;const hr=[];let Rr=!1;(j_({value:ae})||f)&&($?lt=$(ae):Rr=!0);const nr=Ue.map(jt=>{if(!M.isValidElement(jt))return null;let br;if(E){if(!Array.isArray(ae))throw new Error(pf(2));br=ae.some(Or=>ZO(Or,jt.props.value)),br&&Rr&&hr.push(jt.props.children)}else br=ZO(ae,jt.props.value),br&&Rr&&(gr=jt.props.children);return M.cloneElement(jt,{"aria-selected":br?"true":"false",onClick:ot(jt),onKeyUp:Or=>{Or.key===" "&&Or.preventDefault(),jt.props.onKeyUp&&jt.props.onKeyUp(Or)},role:"option",selected:br,value:void 0,"data-value":jt.props.value})});Rr&&(E?hr.length===0?lt=null:lt=hr.reduce((jt,br,Or)=>(jt.push(br),Or<hr.length-1&&jt.push(", "),jt),[]):lt=gr);let qt=ze;!a&&st&&Oe&&(qt=Rt.clientWidth);let fr;typeof Q<"u"?fr=Q:fr=h?null:0;const yr=V.id||(D?`mui-component-select-${D}`:void 0),Lr={...e,variant:ue,value:ae,open:it,error:g},vt=loe(Lr),Ut={...C.PaperProps,...C.slotProps?.paper},rn=Jd();return O.jsxs(M.Fragment,{children:[O.jsx(ioe,{as:"div",ref:Pt,tabIndex:fr,role:"combobox","aria-controls":it?rn:void 0,"aria-disabled":h?"true":void 0,"aria-expanded":it?"true":"false","aria-haspopup":"listbox","aria-label":i,"aria-labelledby":[_,yr].filter(Boolean).join(" ")||void 0,"aria-describedby":n,"aria-required":W?"true":void 0,"aria-invalid":g?"true":void 0,onKeyDown:dt,onMouseDown:h||A?null:Ne,onBlur:bt,onFocus:N,...V,ownerState:Lr,className:Dt(V.className,vt.select,l),id:yr,children:ooe(lt)?JO||(JO=O.jsx("span",{className:"notranslate","aria-hidden":!0,children:""})):lt}),O.jsx(aoe,{"aria-invalid":g,value:Array.isArray(ae)?ae.join(","):ae,name:D,ref:me,"aria-hidden":!0,onChange:et,tabIndex:-1,disabled:h,className:vt.nativeInput,autoFocus:s,required:W,...se,ownerState:Lr}),O.jsx(soe,{as:v,className:vt.icon,ownerState:Lr}),O.jsx(jae,{id:`menu-${D||""}`,anchorEl:Rt,open:it,onClose:Ie,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"},...C,slotProps:{...C.slotProps,list:{"aria-labelledby":_,role:"listbox","aria-multiselectable":E?"true":void 0,disableListWrap:!0,id:rn,...C.MenuListProps},paper:{...Ut,style:{minWidth:qt,...Ut!=null?Ut.style:null}}},children:nr})]})}),coe=r=>{const{classes:e}=r,n=Zt({root:["root"]},g5,e);return{...e,...n}},Mk={name:"MuiSelect",slot:"Root",shouldForwardProp:r=>as(r)&&r!=="variant"},doe=rt(Lk,Mk)(""),hoe=rt(Yp,Mk)(""),foe=rt(Rk,Mk)(""),Bu=M.forwardRef(function(e,t){const n=Yt({name:"MuiSelect",props:e}),{autoWidth:i=!1,children:s,classes:a={},className:o,defaultOpen:l=!1,displayEmpty:u=!1,IconComponent:c=Rse,id:h,input:f,inputProps:g,label:v,labelId:y,MenuProps:_,multiple:C=!1,native:E=!1,onClose:D,onOpen:I,open:k,renderValue:P,SelectDisplayProps:N,variant:U="outlined",...B}=n,A=E?Yae:uoe,$=$l(),W=rh({props:n,muiFormControl:$,states:["variant","error"]}),V=W.variant||U,Q={...n,variant:V,classes:a},ie=coe(Q),{root:ne,...ue}=ie,se=f||{standard:O.jsx(doe,{ownerState:Q}),outlined:O.jsx(hoe,{label:v,ownerState:Q}),filled:O.jsx(foe,{ownerState:Q})}[V],ae=Gn(t,Zd(se));return O.jsx(M.Fragment,{children:M.cloneElement(se,{inputComponent:A,inputProps:{children:s,error:W.error,IconComponent:c,variant:V,type:void 0,multiple:C,...E?{id:h}:{autoWidth:i,defaultOpen:l,displayEmpty:u,labelId:y,MenuProps:_,onClose:D,onOpen:I,open:k,renderValue:P,SelectDisplayProps:{id:h,...N}},...g,classes:g?Pu(ue,g.classes):ue,...f?f.props.inputProps:{}},...(C&&E||u)&&V==="outlined"?{notched:!0}:{},ref:ae,className:Dt(se.props.className,o,ie.root),...!f&&{variant:V},...B})})});Bu.muiName="Select";function poe(r){return er("MuiTooltip",r)}const ui=Qt("MuiTooltip",["popper","popperInteractive","popperArrow","popperClose","tooltip","tooltipArrow","touch","tooltipPlacementLeft","tooltipPlacementRight","tooltipPlacementTop","tooltipPlacementBottom","arrow"]);function moe(r){return Math.round(r*1e5)/1e5}const goe=r=>{const{classes:e,disableInteractive:t,arrow:n,touch:i,placement:s}=r,a={popper:["popper",!t&&"popperInteractive",n&&"popperArrow"],tooltip:["tooltip",n&&"tooltipArrow",i&&"touch",`tooltipPlacement${ft(s.split("-")[0])}`],arrow:["arrow"]};return Zt(a,poe,e)},voe=rt(d5,{name:"MuiTooltip",slot:"Popper",overridesResolver:(r,e)=>{const{ownerState:t}=r;return[e.popper,!t.disableInteractive&&e.popperInteractive,t.arrow&&e.popperArrow,!t.open&&e.popperClose]}})(cr(({theme:r})=>({zIndex:(r.vars||r).zIndex.tooltip,pointerEvents:"none",variants:[{props:({ownerState:e})=>!e.disableInteractive,style:{pointerEvents:"auto"}},{props:({open:e})=>!e,style:{pointerEvents:"none"}},{props:({ownerState:e})=>e.arrow,style:{[`&[data-popper-placement*="bottom"] .${ui.arrow}`]:{top:0,marginTop:"-0.71em","&::before":{transformOrigin:"0 100%"}},[`&[data-popper-placement*="top"] .${ui.arrow}`]:{bottom:0,marginBottom:"-0.71em","&::before":{transformOrigin:"100% 0"}},[`&[data-popper-placement*="right"] .${ui.arrow}`]:{height:"1em",width:"0.71em","&::before":{transformOrigin:"100% 100%"}},[`&[data-popper-placement*="left"] .${ui.arrow}`]:{height:"1em",width:"0.71em","&::before":{transformOrigin:"0 0"}}}},{props:({ownerState:e})=>e.arrow&&!e.isRtl,style:{[`&[data-popper-placement*="right"] .${ui.arrow}`]:{left:0,marginLeft:"-0.71em"}}},{props:({ownerState:e})=>e.arrow&&!!e.isRtl,style:{[`&[data-popper-placement*="right"] .${ui.arrow}`]:{right:0,marginRight:"-0.71em"}}},{props:({ownerState:e})=>e.arrow&&!e.isRtl,style:{[`&[data-popper-placement*="left"] .${ui.arrow}`]:{right:0,marginRight:"-0.71em"}}},{props:({ownerState:e})=>e.arrow&&!!e.isRtl,style:{[`&[data-popper-placement*="left"] .${ui.arrow}`]:{left:0,marginLeft:"-0.71em"}}}]}))),yoe=rt("div",{name:"MuiTooltip",slot:"Tooltip",overridesResolver:(r,e)=>{const{ownerState:t}=r;return[e.tooltip,t.touch&&e.touch,t.arrow&&e.tooltipArrow,e[`tooltipPlacement${ft(t.placement.split("-")[0])}`]]}})(cr(({theme:r})=>({backgroundColor:r.vars?r.vars.palette.Tooltip.bg:Kr(r.palette.grey[700],.92),borderRadius:(r.vars||r).shape.borderRadius,color:(r.vars||r).palette.common.white,fontFamily:r.typography.fontFamily,padding:"4px 8px",fontSize:r.typography.pxToRem(11),maxWidth:300,margin:2,wordWrap:"break-word",fontWeight:r.typography.fontWeightMedium,[`.${ui.popper}[data-popper-placement*="left"] &`]:{transformOrigin:"right center"},[`.${ui.popper}[data-popper-placement*="right"] &`]:{transformOrigin:"left center"},[`.${ui.popper}[data-popper-placement*="top"] &`]:{transformOrigin:"center bottom",marginBottom:"14px"},[`.${ui.popper}[data-popper-placement*="bottom"] &`]:{transformOrigin:"center top",marginTop:"14px"},variants:[{props:({ownerState:e})=>e.arrow,style:{position:"relative",margin:0}},{props:({ownerState:e})=>e.touch,style:{padding:"8px 16px",fontSize:r.typography.pxToRem(14),lineHeight:`${moe(16/14)}em`,fontWeight:r.typography.fontWeightRegular}},{props:({ownerState:e})=>!e.isRtl,style:{[`.${ui.popper}[data-popper-placement*="left"] &`]:{marginRight:"14px"},[`.${ui.popper}[data-popper-placement*="right"] &`]:{marginLeft:"14px"}}},{props:({ownerState:e})=>!e.isRtl&&e.touch,style:{[`.${ui.popper}[data-popper-placement*="left"] &`]:{marginRight:"24px"},[`.${ui.popper}[data-popper-placement*="right"] &`]:{marginLeft:"24px"}}},{props:({ownerState:e})=>!!e.isRtl,style:{[`.${ui.popper}[data-popper-placement*="left"] &`]:{marginLeft:"14px"},[`.${ui.popper}[data-popper-placement*="right"] &`]:{marginRight:"14px"}}},{props:({ownerState:e})=>!!e.isRtl&&e.touch,style:{[`.${ui.popper}[data-popper-placement*="left"] &`]:{marginLeft:"24px"},[`.${ui.popper}[data-popper-placement*="right"] &`]:{marginRight:"24px"}}},{props:({ownerState:e})=>e.touch,style:{[`.${ui.popper}[data-popper-placement*="top"] &`]:{marginBottom:"24px"}}},{props:({ownerState:e})=>e.touch,style:{[`.${ui.popper}[data-popper-placement*="bottom"] &`]:{marginTop:"24px"}}}]}))),xoe=rt("span",{name:"MuiTooltip",slot:"Arrow"})(cr(({theme:r})=>({overflow:"hidden",position:"absolute",width:"1em",height:"0.71em",boxSizing:"border-box",color:r.vars?r.vars.palette.Tooltip.bg:Kr(r.palette.grey[700],.9),"&::before":{content:'""',margin:"auto",display:"block",width:"100%",height:"100%",backgroundColor:"currentColor",transform:"rotate(45deg)"}})));let My=!1;const e4=new yS;let E0={x:0,y:0};function Fy(r,e){return(t,...n)=>{e&&e(t,...n),r(t,...n)}}const _oe=M.forwardRef(function(e,t){const n=Yt({props:e,name:"MuiTooltip"}),{arrow:i=!1,children:s,classes:a,components:o={},componentsProps:l={},describeChild:u=!1,disableFocusListener:c=!1,disableHoverListener:h=!1,disableInteractive:f=!1,disableTouchListener:g=!1,enterDelay:v=100,enterNextDelay:y=0,enterTouchDelay:_=700,followCursor:C=!1,id:E,leaveDelay:D=0,leaveTouchDelay:I=1500,onClose:k,onOpen:P,open:N,placement:U="bottom",PopperComponent:B,PopperProps:A={},slotProps:$={},slots:W={},title:V,TransitionComponent:Q,TransitionProps:ie,...ne}=n,ue=M.isValidElement(s)?s:O.jsx("span",{children:s}),se=Ul(),ae=_m(),[ce,ee]=M.useState(),[pe,me]=M.useState(null),ye=M.useRef(!1),Oe=f||C,Le=Ld(),st=Ld(),ze=Ld(),pt=Ld(),[Ye,Pt]=Dg({controlled:N,default:!1,name:"Tooltip",state:"open"});let Rt=Ye;const Ve=Jd(E),Ne=M.useRef(),Ie=la(()=>{Ne.current!==void 0&&(document.body.style.WebkitUserSelect=Ne.current,Ne.current=void 0),pt.clear()});M.useEffect(()=>Ie,[Ie]);const Ue=St=>{e4.clear(),My=!0,Pt(!0),P&&!Rt&&P(St)},et=la(St=>{e4.start(800+D,()=>{My=!1}),Pt(!1),k&&Rt&&k(St),Le.start(se.transitions.duration.shortest,()=>{ye.current=!1})}),ot=St=>{ye.current&&St.type!=="touchstart"||(ce&&ce.removeAttribute("title"),st.clear(),ze.clear(),v||My&&y?st.start(My?y:v,()=>{Ue(St)}):Ue(St))},dt=St=>{st.clear(),ze.start(D,()=>{et(St)})},[,it]=M.useState(!1),bt=St=>{N_(St.target)||(it(!1),dt(St))},lt=St=>{ce||ee(St.currentTarget),N_(St.target)&&(it(!0),ot(St))},gr=St=>{ye.current=!0;const be=ue.props;be.onTouchStart&&be.onTouchStart(St)},hr=St=>{gr(St),ze.clear(),Le.clear(),Ie(),Ne.current=document.body.style.WebkitUserSelect,document.body.style.WebkitUserSelect="none",pt.start(_,()=>{document.body.style.WebkitUserSelect=Ne.current,ot(St)})},Rr=St=>{ue.props.onTouchEnd&&ue.props.onTouchEnd(St),Ie(),ze.start(I,()=>{et(St)})};M.useEffect(()=>{if(!Rt)return;function St(be){be.key==="Escape"&&et(be)}return document.addEventListener("keydown",St),()=>{document.removeEventListener("keydown",St)}},[et,Rt]);const nr=Gn(Zd(ue),ee,t);!V&&V!==0&&(Rt=!1);const qt=M.useRef(),fr=St=>{const be=ue.props;be.onMouseMove&&be.onMouseMove(St),E0={x:St.clientX,y:St.clientY},qt.current&&qt.current.update()},yr={},Lr=typeof V=="string";u?(yr.title=!Rt&&Lr&&!h?V:null,yr["aria-describedby"]=Rt?Ve:null):(yr["aria-label"]=Lr?V:null,yr["aria-labelledby"]=Rt&&!Lr?Ve:null);const vt={...yr,...ne,...ue.props,className:Dt(ne.className,ue.props.className),onTouchStart:gr,ref:nr,...C?{onMouseMove:fr}:{}},Ut={};g||(vt.onTouchStart=hr,vt.onTouchEnd=Rr),h||(vt.onMouseOver=Fy(ot,vt.onMouseOver),vt.onMouseLeave=Fy(dt,vt.onMouseLeave),Oe||(Ut.onMouseOver=ot,Ut.onMouseLeave=dt)),c||(vt.onFocus=Fy(lt,vt.onFocus),vt.onBlur=Fy(bt,vt.onBlur),Oe||(Ut.onFocus=lt,Ut.onBlur=bt));const rn={...n,isRtl:ae,arrow:i,disableInteractive:Oe,placement:U,PopperComponentProp:B,touch:ye.current},jt=typeof $.popper=="function"?$.popper(rn):$.popper,br=M.useMemo(()=>{let St=[{name:"arrow",enabled:!!pe,options:{element:pe,padding:4}}];return A.popperOptions?.modifiers&&(St=St.concat(A.popperOptions.modifiers)),jt?.popperOptions?.modifiers&&(St=St.concat(jt.popperOptions.modifiers)),{...A.popperOptions,...jt?.popperOptions,modifiers:St}},[pe,A.popperOptions,jt?.popperOptions]),Or=goe(rn),Hr=typeof $.transition=="function"?$.transition(rn):$.transition,ln={slots:{popper:o.Popper,transition:o.Transition??Q,tooltip:o.Tooltip,arrow:o.Arrow,...W},slotProps:{arrow:$.arrow??l.arrow,popper:{...A,...jt??l.popper},tooltip:$.tooltip??l.tooltip,transition:{...ie,...Hr??l.transition}}},[Cn,wn]=ur("popper",{elementType:voe,externalForwardedProps:ln,ownerState:rn,className:Dt(Or.popper,A?.className)}),[Fr,oe]=ur("transition",{elementType:Lg,externalForwardedProps:ln,ownerState:rn}),[fe,Te]=ur("tooltip",{elementType:yoe,className:Or.tooltip,externalForwardedProps:ln,ownerState:rn}),[je,mt]=ur("arrow",{elementType:xoe,className:Or.arrow,externalForwardedProps:ln,ownerState:rn,ref:me});return O.jsxs(M.Fragment,{children:[M.cloneElement(ue,vt),O.jsx(Cn,{as:B??d5,placement:U,anchorEl:C?{getBoundingClientRect:()=>({top:E0.y,left:E0.x,right:E0.x,bottom:E0.y,width:0,height:0})}:ce,popperRef:qt,open:ce?Rt:!1,id:Ve,transition:!0,...Ut,...wn,popperOptions:br,children:({TransitionProps:St})=>O.jsx(Fr,{timeout:se.transitions.duration.shorter,...St,...oe,children:O.jsxs(fe,{...Te,children:[V,i?O.jsx(je,{...mt}):null]})})})]})}),k0=TJ({createStyledComponent:rt("div",{name:"MuiStack",slot:"Root"}),useThemeProps:r=>Yt({props:r,name:"MuiStack"})}),wS=M.createContext({}),Fk=M.createContext({});function boe(r){return er("MuiStep",r)}Qt("MuiStep",["root","horizontal","vertical","alternativeLabel","completed"]);const Soe=r=>{const{classes:e,orientation:t,alternativeLabel:n,completed:i}=r;return Zt({root:["root",t,n&&"alternativeLabel",i&&"completed"]},boe,e)},Toe=rt("div",{name:"MuiStep",slot:"Root",overridesResolver:(r,e)=>{const{ownerState:t}=r;return[e.root,e[t.orientation],t.alternativeLabel&&e.alternativeLabel,t.completed&&e.completed]}})({variants:[{props:{orientation:"horizontal"},style:{paddingLeft:8,paddingRight:8}},{props:{alternativeLabel:!0},style:{flex:1,position:"relative"}}]}),Coe=M.forwardRef(function(e,t){const n=Yt({props:e,name:"MuiStep"}),{active:i,children:s,className:a,component:o="div",completed:l,disabled:u,expanded:c=!1,index:h,last:f,...g}=n,{activeStep:v,connector:y,alternativeLabel:_,orientation:C,nonLinear:E}=M.useContext(wS);let[D=!1,I=!1,k=!1]=[i,l,u];v===h?D=i!==void 0?i:!0:!E&&v>h?I=l!==void 0?l:!0:!E&&v<h&&(k=u!==void 0?u:!0);const P=M.useMemo(()=>({index:h,last:f,expanded:c,icon:h+1,active:D,completed:I,disabled:k}),[h,f,c,D,I,k]),N={...n,active:D,orientation:C,alternativeLabel:_,completed:I,disabled:k,expanded:c,component:o},U=Soe(N),B=O.jsxs(Toe,{as:o,className:Dt(U.root,a),ref:t,ownerState:N,...g,children:[y&&_&&h!==0?y:null,s]});return O.jsx(Fk.Provider,{value:P,children:y&&!_&&h!==0?O.jsxs(M.Fragment,{children:[y,B]}):B})}),woe=mr(O.jsx("path",{d:"M12 0a12 12 0 1 0 0 24 12 12 0 0 0 0-24zm-2 17l-5-5 1.4-1.4 3.6 3.6 7.6-7.6L19 8l-9 9z"})),Eoe=mr(O.jsx("path",{d:"M1 21h22L12 2 1 21zm12-3h-2v-2h2v2zm0-4h-2v-4h2v4z"}));function koe(r){return er("MuiStepIcon",r)}const rC=Qt("MuiStepIcon",["root","active","completed","error","text"]);var t4;const Aoe=r=>{const{classes:e,active:t,completed:n,error:i}=r;return Zt({root:["root",t&&"active",n&&"completed",i&&"error"],text:["text"]},koe,e)},nC=rt(F_,{name:"MuiStepIcon",slot:"Root"})(cr(({theme:r})=>({display:"block",transition:r.transitions.create("color",{duration:r.transitions.duration.shortest}),color:(r.vars||r).palette.text.disabled,[`&.${rC.completed}`]:{color:(r.vars||r).palette.primary.main},[`&.${rC.active}`]:{color:(r.vars||r).palette.primary.main},[`&.${rC.error}`]:{color:(r.vars||r).palette.error.main}}))),Doe=rt("text",{name:"MuiStepIcon",slot:"Text"})(cr(({theme:r})=>({fill:(r.vars||r).palette.primary.contrastText,fontSize:r.typography.caption.fontSize,fontFamily:r.typography.fontFamily}))),Ioe=M.forwardRef(function(e,t){const n=Yt({props:e,name:"MuiStepIcon"}),{active:i=!1,className:s,completed:a=!1,error:o=!1,icon:l,...u}=n,c={...n,active:i,completed:a,error:o},h=Aoe(c);if(typeof l=="number"||typeof l=="string"){const f=Dt(s,h.root);return o?O.jsx(nC,{as:Eoe,className:f,ref:t,ownerState:c,...u}):a?O.jsx(nC,{as:woe,className:f,ref:t,ownerState:c,...u}):O.jsxs(nC,{className:f,ref:t,ownerState:c,...u,children:[t4||(t4=O.jsx("circle",{cx:"12",cy:"12",r:"12"})),O.jsx(Doe,{className:h.text,x:"12",y:"12",textAnchor:"middle",dominantBaseline:"central",ownerState:c,children:l})]})}return l});function Poe(r){return er("MuiStepLabel",r)}const Od=Qt("MuiStepLabel",["root","horizontal","vertical","label","active","completed","error","disabled","iconContainer","alternativeLabel","labelContainer"]),Roe=r=>{const{classes:e,orientation:t,active:n,completed:i,error:s,disabled:a,alternativeLabel:o}=r;return Zt({root:["root",t,s&&"error",a&&"disabled",o&&"alternativeLabel"],label:["label",n&&"active",i&&"completed",s&&"error",a&&"disabled",o&&"alternativeLabel"],iconContainer:["iconContainer",n&&"active",i&&"completed",s&&"error",a&&"disabled",o&&"alternativeLabel"],labelContainer:["labelContainer",o&&"alternativeLabel"]},Poe,e)},Loe=rt("span",{name:"MuiStepLabel",slot:"Root",overridesResolver:(r,e)=>{const{ownerState:t}=r;return[e.root,e[t.orientation]]}})({display:"flex",alignItems:"center",[`&.${Od.alternativeLabel}`]:{flexDirection:"column"},[`&.${Od.disabled}`]:{cursor:"default"},variants:[{props:{orientation:"vertical"},style:{textAlign:"left",padding:"8px 0"}}]}),Ooe=rt("span",{name:"MuiStepLabel",slot:"Label"})(cr(({theme:r})=>({...r.typography.body2,display:"block",transition:r.transitions.create("color",{duration:r.transitions.duration.shortest}),[`&.${Od.active}`]:{color:(r.vars||r).palette.text.primary,fontWeight:500},[`&.${Od.completed}`]:{color:(r.vars||r).palette.text.primary,fontWeight:500},[`&.${Od.alternativeLabel}`]:{marginTop:16},[`&.${Od.error}`]:{color:(r.vars||r).palette.error.main}}))),Moe=rt("span",{name:"MuiStepLabel",slot:"IconContainer"})({flexShrink:0,display:"flex",paddingRight:8,[`&.${Od.alternativeLabel}`]:{paddingRight:0}}),Foe=rt("span",{name:"MuiStepLabel",slot:"LabelContainer"})(cr(({theme:r})=>({width:"100%",color:(r.vars||r).palette.text.secondary,[`&.${Od.alternativeLabel}`]:{textAlign:"center"}}))),v5=M.forwardRef(function(e,t){const n=Yt({props:e,name:"MuiStepLabel"}),{children:i,className:s,componentsProps:a={},error:o=!1,icon:l,optional:u,slots:c={},slotProps:h={},StepIconComponent:f,StepIconProps:g,...v}=n,{alternativeLabel:y,orientation:_}=M.useContext(wS),{active:C,disabled:E,completed:D,icon:I}=M.useContext(Fk),k=l||I;let P=f;k&&!P&&(P=Ioe);const N={...n,active:C,alternativeLabel:y,completed:D,disabled:E,error:o,orientation:_},U=Roe(N),B={slots:c,slotProps:{stepIcon:g,...a,...h}},[A,$]=ur("root",{elementType:Loe,externalForwardedProps:{...B,...v},ownerState:N,ref:t,className:Dt(U.root,s)}),[W,V]=ur("label",{elementType:Ooe,externalForwardedProps:B,ownerState:N}),[Q,ie]=ur("stepIcon",{elementType:P,externalForwardedProps:B,ownerState:N});return O.jsxs(A,{...$,children:[k||Q?O.jsx(Moe,{className:U.iconContainer,ownerState:N,children:O.jsx(Q,{completed:D,active:C,error:o,icon:k,...ie})}):null,O.jsxs(Foe,{className:U.labelContainer,ownerState:N,children:[i?O.jsx(W,{...V,className:Dt(U.label,V?.className),children:i}):null,u]})]})});v5.muiName="StepLabel";function Boe(r){return er("MuiStepConnector",r)}Qt("MuiStepConnector",["root","horizontal","vertical","alternativeLabel","active","completed","disabled","line","lineHorizontal","lineVertical"]);const Noe=r=>{const{classes:e,orientation:t,alternativeLabel:n,active:i,completed:s,disabled:a}=r,o={root:["root",t,n&&"alternativeLabel",i&&"active",s&&"completed",a&&"disabled"],line:["line",`line${ft(t)}`]};return Zt(o,Boe,e)},Uoe=rt("div",{name:"MuiStepConnector",slot:"Root",overridesResolver:(r,e)=>{const{ownerState:t}=r;return[e.root,e[t.orientation],t.alternativeLabel&&e.alternativeLabel,t.completed&&e.completed]}})({flex:"1 1 auto",variants:[{props:{orientation:"vertical"},style:{marginLeft:12}},{props:{alternativeLabel:!0},style:{position:"absolute",top:12,left:"calc(-50% + 20px)",right:"calc(50% + 20px)"}}]}),$oe=rt("span",{name:"MuiStepConnector",slot:"Line",overridesResolver:(r,e)=>{const{ownerState:t}=r;return[e.line,e[`line${ft(t.orientation)}`]]}})(cr(({theme:r})=>{const e=r.palette.mode==="light"?r.palette.grey[400]:r.palette.grey[600];return{display:"block",borderColor:r.vars?r.vars.palette.StepConnector.border:e,variants:[{props:{orientation:"horizontal"},style:{borderTopStyle:"solid",borderTopWidth:1}},{props:{orientation:"vertical"},style:{borderLeftStyle:"solid",borderLeftWidth:1,minHeight:24}}]}})),joe=M.forwardRef(function(e,t){const n=Yt({props:e,name:"MuiStepConnector"}),{className:i,...s}=n,{alternativeLabel:a,orientation:o="horizontal"}=M.useContext(wS),{active:l,disabled:u,completed:c}=M.useContext(Fk),h={...n,alternativeLabel:a,orientation:o,active:l,completed:c,disabled:u},f=Noe(h);return O.jsx(Uoe,{className:Dt(f.root,i),ref:t,ownerState:h,...s,children:O.jsx($oe,{className:f.line,ownerState:h})})});function zoe(r){return er("MuiStepper",r)}Qt("MuiStepper",["root","horizontal","vertical","nonLinear","alternativeLabel"]);const Hoe=r=>{const{orientation:e,nonLinear:t,alternativeLabel:n,classes:i}=r;return Zt({root:["root",e,t&&"nonLinear",n&&"alternativeLabel"]},zoe,i)},Voe=rt("div",{name:"MuiStepper",slot:"Root",overridesResolver:(r,e)=>{const{ownerState:t}=r;return[e.root,e[t.orientation],t.alternativeLabel&&e.alternativeLabel,t.nonLinear&&e.nonLinear]}})({display:"flex",variants:[{props:{orientation:"horizontal"},style:{flexDirection:"row",alignItems:"center"}},{props:{orientation:"vertical"},style:{flexDirection:"column"}},{props:{alternativeLabel:!0},style:{alignItems:"flex-start"}}]}),Woe=O.jsx(joe,{}),qoe=M.forwardRef(function(e,t){const n=Yt({props:e,name:"MuiStepper"}),{activeStep:i=0,alternativeLabel:s=!1,children:a,className:o,component:l="div",connector:u=Woe,nonLinear:c=!1,orientation:h="horizontal",...f}=n,g={...n,nonLinear:c,alternativeLabel:s,orientation:h,component:l},v=Hoe(g),y=M.Children.toArray(a).filter(Boolean),_=y.map((E,D)=>M.cloneElement(E,{index:D,last:D+1===y.length,...E.props})),C=M.useMemo(()=>({activeStep:i,alternativeLabel:s,connector:u,nonLinear:c,orientation:h}),[i,s,u,c,h]);return O.jsx(wS.Provider,{value:C,children:O.jsx(Voe,{as:l,ownerState:g,className:Dt(v.root,o),ref:t,...f,children:_})})});function Goe(r){return er("MuiSwitch",r)}const Zs=Qt("MuiSwitch",["root","edgeStart","edgeEnd","switchBase","colorPrimary","colorSecondary","sizeSmall","sizeMedium","checked","disabled","input","thumb","track"]),Koe=r=>{const{classes:e,edge:t,size:n,color:i,checked:s,disabled:a}=r,o={root:["root",t&&`edge${ft(t)}`,`size${ft(n)}`],switchBase:["switchBase",`color${ft(i)}`,s&&"checked",a&&"disabled"],thumb:["thumb"],track:["track"],input:["input"]},l=Zt(o,Goe,e);return{...e,...l}},Xoe=rt("span",{name:"MuiSwitch",slot:"Root",overridesResolver:(r,e)=>{const{ownerState:t}=r;return[e.root,t.edge&&e[`edge${ft(t.edge)}`],e[`size${ft(t.size)}`]]}})({display:"inline-flex",width:58,height:38,overflow:"hidden",padding:12,boxSizing:"border-box",position:"relative",flexShrink:0,zIndex:0,verticalAlign:"middle","@media print":{colorAdjust:"exact"},variants:[{props:{edge:"start"},style:{marginLeft:-8}},{props:{edge:"end"},style:{marginRight:-8}},{props:{size:"small"},style:{width:40,height:24,padding:7,[`& .${Zs.thumb}`]:{width:16,height:16},[`& .${Zs.switchBase}`]:{padding:4,[`&.${Zs.checked}`]:{transform:"translateX(16px)"}}}}]}),Yoe=rt(Ak,{name:"MuiSwitch",slot:"SwitchBase",overridesResolver:(r,e)=>{const{ownerState:t}=r;return[e.switchBase,{[`& .${Zs.input}`]:e.input},t.color!=="default"&&e[`color${ft(t.color)}`]]}})(cr(({theme:r})=>({position:"absolute",top:0,left:0,zIndex:1,color:r.vars?r.vars.palette.Switch.defaultColor:`${r.palette.mode==="light"?r.palette.common.white:r.palette.grey[300]}`,transition:r.transitions.create(["left","transform"],{duration:r.transitions.duration.shortest}),[`&.${Zs.checked}`]:{transform:"translateX(20px)"},[`&.${Zs.disabled}`]:{color:r.vars?r.vars.palette.Switch.defaultDisabledColor:`${r.palette.mode==="light"?r.palette.grey[100]:r.palette.grey[600]}`},[`&.${Zs.checked} + .${Zs.track}`]:{opacity:.5},[`&.${Zs.disabled} + .${Zs.track}`]:{opacity:r.vars?r.vars.opacity.switchTrackDisabled:`${r.palette.mode==="light"?.12:.2}`},[`& .${Zs.input}`]:{left:"-100%",width:"300%"}})),cr(({theme:r})=>({"&:hover":{backgroundColor:r.vars?`rgba(${r.vars.palette.action.activeChannel} / ${r.vars.palette.action.hoverOpacity})`:Kr(r.palette.action.active,r.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},variants:[...Object.entries(r.palette).filter(_i(["light"])).map(([e])=>({props:{color:e},style:{[`&.${Zs.checked}`]:{color:(r.vars||r).palette[e].main,"&:hover":{backgroundColor:r.vars?`rgba(${r.vars.palette[e].mainChannel} / ${r.vars.palette.action.hoverOpacity})`:Kr(r.palette[e].main,r.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${Zs.disabled}`]:{color:r.vars?r.vars.palette.Switch[`${e}DisabledColor`]:`${r.palette.mode==="light"?ff(r.palette[e].main,.62):hf(r.palette[e].main,.55)}`}},[`&.${Zs.checked} + .${Zs.track}`]:{backgroundColor:(r.vars||r).palette[e].main}}}))]}))),Qoe=rt("span",{name:"MuiSwitch",slot:"Track"})(cr(({theme:r})=>({height:"100%",width:"100%",borderRadius:14/2,zIndex:-1,transition:r.transitions.create(["opacity","background-color"],{duration:r.transitions.duration.shortest}),backgroundColor:r.vars?r.vars.palette.common.onBackground:`${r.palette.mode==="light"?r.palette.common.black:r.palette.common.white}`,opacity:r.vars?r.vars.opacity.switchTrack:`${r.palette.mode==="light"?.38:.3}`}))),Joe=rt("span",{name:"MuiSwitch",slot:"Thumb"})(cr(({theme:r})=>({boxShadow:(r.vars||r).shadows[1],backgroundColor:"currentColor",width:20,height:20,borderRadius:"50%"}))),Zoe=M.forwardRef(function(e,t){const n=Yt({props:e,name:"MuiSwitch"}),{className:i,color:s="primary",edge:a=!1,size:o="medium",sx:l,slots:u={},slotProps:c={},...h}=n,f={...n,color:s,edge:a,size:o},g=Koe(f),v={slots:u,slotProps:c},[y,_]=ur("root",{className:Dt(g.root,i),elementType:Xoe,externalForwardedProps:v,ownerState:f,additionalProps:{sx:l}}),[C,E]=ur("thumb",{className:g.thumb,elementType:Joe,externalForwardedProps:v,ownerState:f}),D=O.jsx(C,{...E}),[I,k]=ur("track",{className:g.track,elementType:Qoe,externalForwardedProps:v,ownerState:f});return O.jsxs(y,{..._,children:[O.jsx(Yoe,{type:"checkbox",icon:D,checkedIcon:D,ref:t,ownerState:f,...h,classes:{...g,root:g.switchBase},slots:{...u.switchBase&&{root:u.switchBase},...u.input&&{input:u.input}},slotProps:{...c.switchBase&&{root:typeof c.switchBase=="function"?c.switchBase(f):c.switchBase},...c.input&&{input:typeof c.input=="function"?c.input(f):c.input}}}),O.jsx(I,{...k})]})});function ele(r){return er("MuiTab",r)}const Uo=Qt("MuiTab",["root","labelIcon","textColorInherit","textColorPrimary","textColorSecondary","selected","disabled","fullWidth","wrapped","iconWrapper","icon"]),tle=r=>{const{classes:e,textColor:t,fullWidth:n,wrapped:i,icon:s,label:a,selected:o,disabled:l}=r,u={root:["root",s&&a&&"labelIcon",`textColor${ft(t)}`,n&&"fullWidth",i&&"wrapped",o&&"selected",l&&"disabled"],icon:["iconWrapper","icon"]};return Zt(u,ele,e)},rle=rt(Mu,{name:"MuiTab",slot:"Root",overridesResolver:(r,e)=>{const{ownerState:t}=r;return[e.root,t.label&&t.icon&&e.labelIcon,e[`textColor${ft(t.textColor)}`],t.fullWidth&&e.fullWidth,t.wrapped&&e.wrapped,{[`& .${Uo.iconWrapper}`]:e.iconWrapper},{[`& .${Uo.icon}`]:e.icon}]}})(cr(({theme:r})=>({...r.typography.button,maxWidth:360,minWidth:90,position:"relative",minHeight:48,flexShrink:0,padding:"12px 16px",overflow:"hidden",whiteSpace:"normal",textAlign:"center",lineHeight:1.25,variants:[{props:({ownerState:e})=>e.label&&(e.iconPosition==="top"||e.iconPosition==="bottom"),style:{flexDirection:"column"}},{props:({ownerState:e})=>e.label&&e.iconPosition!=="top"&&e.iconPosition!=="bottom",style:{flexDirection:"row"}},{props:({ownerState:e})=>e.icon&&e.label,style:{minHeight:72,paddingTop:9,paddingBottom:9}},{props:({ownerState:e,iconPosition:t})=>e.icon&&e.label&&t==="top",style:{[`& > .${Uo.icon}`]:{marginBottom:6}}},{props:({ownerState:e,iconPosition:t})=>e.icon&&e.label&&t==="bottom",style:{[`& > .${Uo.icon}`]:{marginTop:6}}},{props:({ownerState:e,iconPosition:t})=>e.icon&&e.label&&t==="start",style:{[`& > .${Uo.icon}`]:{marginRight:r.spacing(1)}}},{props:({ownerState:e,iconPosition:t})=>e.icon&&e.label&&t==="end",style:{[`& > .${Uo.icon}`]:{marginLeft:r.spacing(1)}}},{props:{textColor:"inherit"},style:{color:"inherit",opacity:.6,[`&.${Uo.selected}`]:{opacity:1},[`&.${Uo.disabled}`]:{opacity:(r.vars||r).palette.action.disabledOpacity}}},{props:{textColor:"primary"},style:{color:(r.vars||r).palette.text.secondary,[`&.${Uo.selected}`]:{color:(r.vars||r).palette.primary.main},[`&.${Uo.disabled}`]:{color:(r.vars||r).palette.text.disabled}}},{props:{textColor:"secondary"},style:{color:(r.vars||r).palette.text.secondary,[`&.${Uo.selected}`]:{color:(r.vars||r).palette.secondary.main},[`&.${Uo.disabled}`]:{color:(r.vars||r).palette.text.disabled}}},{props:({ownerState:e})=>e.fullWidth,style:{flexShrink:1,flexGrow:1,flexBasis:0,maxWidth:"none"}},{props:({ownerState:e})=>e.wrapped,style:{fontSize:r.typography.pxToRem(12)}}]}))),h2=M.forwardRef(function(e,t){const n=Yt({props:e,name:"MuiTab"}),{className:i,disabled:s=!1,disableFocusRipple:a=!1,fullWidth:o,icon:l,iconPosition:u="top",indicator:c,label:h,onChange:f,onClick:g,onFocus:v,selected:y,selectionFollowsFocus:_,textColor:C="inherit",value:E,wrapped:D=!1,...I}=n,k={...n,disabled:s,disableFocusRipple:a,selected:y,icon:!!l,iconPosition:u,label:!!h,fullWidth:o,textColor:C,wrapped:D},P=tle(k),N=l&&h&&M.isValidElement(l)?M.cloneElement(l,{className:Dt(P.icon,l.props.className)}):l,U=A=>{!y&&f&&f(A,E),g&&g(A)},B=A=>{_&&!y&&f&&f(A,E),v&&v(A)};return O.jsxs(rle,{focusRipple:!a,className:Dt(P.root,i),ref:t,role:"tab","aria-selected":y,disabled:s,onClick:U,onFocus:B,ownerState:k,tabIndex:y?0:-1,...I,children:[u==="top"||u==="start"?O.jsxs(M.Fragment,{children:[N,h]}):O.jsxs(M.Fragment,{children:[h,N]}),c]})}),nle=mr(O.jsx("path",{d:"M15.41 16.09l-4.58-4.59 4.58-4.59L14 5.5l-6 6 6 6z"})),ile=mr(O.jsx("path",{d:"M8.59 16.34l4.58-4.59-4.58-4.59L10 5.75l6 6-6 6z"}));function sle(r){return(1+Math.sin(Math.PI*r-Math.PI/2))/2}function ale(r,e,t,n={},i=()=>{}){const{ease:s=sle,duration:a=300}=n;let o=null;const l=e[r];let u=!1;const c=()=>{u=!0},h=f=>{if(u){i(new Error("Animation cancelled"));return}o===null&&(o=f);const g=Math.min(1,(f-o)/a);if(e[r]=s(g)*(t-l)+l,g>=1){requestAnimationFrame(()=>{i(null)});return}requestAnimationFrame(h)};return l===t?(i(new Error("Element already at target position")),c):(requestAnimationFrame(h),c)}const ole={width:99,height:99,position:"absolute",top:-9999,overflow:"scroll"};function lle(r){const{onChange:e,...t}=r,n=M.useRef(),i=M.useRef(null),s=()=>{n.current=i.current.offsetHeight-i.current.clientHeight};return tl(()=>{const a=cv(()=>{const l=n.current;s(),l!==n.current&&e(n.current)}),o=vo(i.current);return o.addEventListener("resize",a),()=>{a.clear(),o.removeEventListener("resize",a)}},[e]),M.useEffect(()=>{s(),e(n.current)},[e]),O.jsx("div",{style:ole,...t,ref:i})}function ule(r){return er("MuiTabScrollButton",r)}const cle=Qt("MuiTabScrollButton",["root","vertical","horizontal","disabled"]),dle=r=>{const{classes:e,orientation:t,disabled:n}=r;return Zt({root:["root",t,n&&"disabled"]},ule,e)},hle=rt(Mu,{name:"MuiTabScrollButton",slot:"Root",overridesResolver:(r,e)=>{const{ownerState:t}=r;return[e.root,t.orientation&&e[t.orientation]]}})({width:40,flexShrink:0,opacity:.8,[`&.${cle.disabled}`]:{opacity:0},variants:[{props:{orientation:"vertical"},style:{width:"100%",height:40,"& svg":{transform:"var(--TabScrollButton-svgRotate)"}}}]}),fle=M.forwardRef(function(e,t){const n=Yt({props:e,name:"MuiTabScrollButton"}),{className:i,slots:s={},slotProps:a={},direction:o,orientation:l,disabled:u,...c}=n,h=_m(),f={isRtl:h,...n},g=dle(f),v=s.StartScrollButtonIcon??nle,y=s.EndScrollButtonIcon??ile,_=Kp({elementType:v,externalSlotProps:a.startScrollButtonIcon,additionalProps:{fontSize:"small"},ownerState:f}),C=Kp({elementType:y,externalSlotProps:a.endScrollButtonIcon,additionalProps:{fontSize:"small"},ownerState:f});return O.jsx(hle,{component:"div",className:Dt(g.root,i),ref:t,role:null,ownerState:f,tabIndex:null,...c,style:{...c.style,...l==="vertical"&&{"--TabScrollButton-svgRotate":`rotate(${h?-90:90}deg)`}},children:o==="left"?O.jsx(v,{..._}):O.jsx(y,{...C})})});function ple(r){return er("MuiTabs",r)}const iC=Qt("MuiTabs",["root","vertical","list","flexContainer","flexContainerVertical","centered","scroller","fixed","scrollableX","scrollableY","hideScrollbar","scrollButtons","scrollButtonsHideMobile","indicator"]),r4=(r,e)=>r===e?r.firstChild:e&&e.nextElementSibling?e.nextElementSibling:r.firstChild,n4=(r,e)=>r===e?r.lastChild:e&&e.previousElementSibling?e.previousElementSibling:r.lastChild,By=(r,e,t)=>{let n=!1,i=t(r,e);for(;i;){if(i===r.firstChild){if(n)return;n=!0}const s=i.disabled||i.getAttribute("aria-disabled")==="true";if(!i.hasAttribute("tabindex")||s)i=t(r,i);else{i.focus();return}}},mle=r=>{const{vertical:e,fixed:t,hideScrollbar:n,scrollableX:i,scrollableY:s,centered:a,scrollButtonsHideMobile:o,classes:l}=r;return Zt({root:["root",e&&"vertical"],scroller:["scroller",t&&"fixed",n&&"hideScrollbar",i&&"scrollableX",s&&"scrollableY"],list:["list","flexContainer",e&&"flexContainerVertical",e&&"vertical",a&&"centered"],indicator:["indicator"],scrollButtons:["scrollButtons",o&&"scrollButtonsHideMobile"],scrollableX:[i&&"scrollableX"],hideScrollbar:[n&&"hideScrollbar"]},ple,l)},gle=rt("div",{name:"MuiTabs",slot:"Root",overridesResolver:(r,e)=>{const{ownerState:t}=r;return[{[`& .${iC.scrollButtons}`]:e.scrollButtons},{[`& .${iC.scrollButtons}`]:t.scrollButtonsHideMobile&&e.scrollButtonsHideMobile},e.root,t.vertical&&e.vertical]}})(cr(({theme:r})=>({overflow:"hidden",minHeight:48,WebkitOverflowScrolling:"touch",display:"flex",variants:[{props:({ownerState:e})=>e.vertical,style:{flexDirection:"column"}},{props:({ownerState:e})=>e.scrollButtonsHideMobile,style:{[`& .${iC.scrollButtons}`]:{[r.breakpoints.down("sm")]:{display:"none"}}}}]}))),vle=rt("div",{name:"MuiTabs",slot:"Scroller",overridesResolver:(r,e)=>{const{ownerState:t}=r;return[e.scroller,t.fixed&&e.fixed,t.hideScrollbar&&e.hideScrollbar,t.scrollableX&&e.scrollableX,t.scrollableY&&e.scrollableY]}})({position:"relative",display:"inline-block",flex:"1 1 auto",whiteSpace:"nowrap",variants:[{props:({ownerState:r})=>r.fixed,style:{overflowX:"hidden",width:"100%"}},{props:({ownerState:r})=>r.hideScrollbar,style:{scrollbarWidth:"none","&::-webkit-scrollbar":{display:"none"}}},{props:({ownerState:r})=>r.scrollableX,style:{overflowX:"auto",overflowY:"hidden"}},{props:({ownerState:r})=>r.scrollableY,style:{overflowY:"auto",overflowX:"hidden"}}]}),yle=rt("div",{name:"MuiTabs",slot:"List",overridesResolver:(r,e)=>{const{ownerState:t}=r;return[e.list,e.flexContainer,t.vertical&&e.flexContainerVertical,t.centered&&e.centered]}})({display:"flex",variants:[{props:({ownerState:r})=>r.vertical,style:{flexDirection:"column"}},{props:({ownerState:r})=>r.centered,style:{justifyContent:"center"}}]}),xle=rt("span",{name:"MuiTabs",slot:"Indicator"})(cr(({theme:r})=>({position:"absolute",height:2,bottom:0,width:"100%",transition:r.transitions.create(),variants:[{props:{indicatorColor:"primary"},style:{backgroundColor:(r.vars||r).palette.primary.main}},{props:{indicatorColor:"secondary"},style:{backgroundColor:(r.vars||r).palette.secondary.main}},{props:({ownerState:e})=>e.vertical,style:{height:"100%",width:2,right:0}}]}))),_le=rt(lle)({overflowX:"auto",overflowY:"hidden",scrollbarWidth:"none","&::-webkit-scrollbar":{display:"none"}}),i4={},y5=M.forwardRef(function(e,t){const n=Yt({props:e,name:"MuiTabs"}),i=Ul(),s=_m(),{"aria-label":a,"aria-labelledby":o,action:l,centered:u=!1,children:c,className:h,component:f="div",allowScrollButtonsMobile:g=!1,indicatorColor:v="primary",onChange:y,orientation:_="horizontal",ScrollButtonComponent:C,scrollButtons:E="auto",selectionFollowsFocus:D,slots:I={},slotProps:k={},TabIndicatorProps:P={},TabScrollButtonProps:N={},textColor:U="primary",value:B,variant:A="standard",visibleScrollbar:$=!1,...W}=n,V=A==="scrollable",Q=_==="vertical",ie=Q?"scrollTop":"scrollLeft",ne=Q?"top":"left",ue=Q?"bottom":"right",se=Q?"clientHeight":"clientWidth",ae=Q?"height":"width",ce={...n,component:f,allowScrollButtonsMobile:g,indicatorColor:v,orientation:_,vertical:Q,scrollButtons:E,textColor:U,variant:A,visibleScrollbar:$,fixed:!V,hideScrollbar:V&&!$,scrollableX:V&&!Q,scrollableY:V&&Q,centered:u&&!V,scrollButtonsHideMobile:!g},ee=mle(ce),pe=Kp({elementType:I.StartScrollButtonIcon,externalSlotProps:k.startScrollButtonIcon,ownerState:ce}),me=Kp({elementType:I.EndScrollButtonIcon,externalSlotProps:k.endScrollButtonIcon,ownerState:ce}),[ye,Oe]=M.useState(!1),[Le,st]=M.useState(i4),[ze,pt]=M.useState(!1),[Ye,Pt]=M.useState(!1),[Rt,Ve]=M.useState(!1),[Ne,Ie]=M.useState({overflow:"hidden",scrollbarWidth:0}),Ue=new Map,et=M.useRef(null),ot=M.useRef(null),dt={slots:I,slotProps:{indicator:P,scrollButton:N,...k}},it=()=>{const xe=et.current;let Ae;if(xe){const Xe=xe.getBoundingClientRect();Ae={clientWidth:xe.clientWidth,scrollLeft:xe.scrollLeft,scrollTop:xe.scrollTop,scrollWidth:xe.scrollWidth,top:Xe.top,bottom:Xe.bottom,left:Xe.left,right:Xe.right}}let Ke;if(xe&&B!==!1){const Xe=ot.current.children;if(Xe.length>0){const _t=Xe[Ue.get(B)];Ke=_t?_t.getBoundingClientRect():null}}return{tabsMeta:Ae,tabMeta:Ke}},bt=la(()=>{const{tabsMeta:xe,tabMeta:Ae}=it();let Ke=0,Xe;Q?(Xe="top",Ae&&xe&&(Ke=Ae.top-xe.top+xe.scrollTop)):(Xe=s?"right":"left",Ae&&xe&&(Ke=(s?-1:1)*(Ae[Xe]-xe[Xe]+xe.scrollLeft)));const _t={[Xe]:Ke,[ae]:Ae?Ae[ae]:0};if(typeof Le[Xe]!="number"||typeof Le[ae]!="number")st(_t);else{const Lt=Math.abs(Le[Xe]-_t[Xe]),ct=Math.abs(Le[ae]-_t[ae]);(Lt>=1||ct>=1)&&st(_t)}}),lt=(xe,{animation:Ae=!0}={})=>{Ae?ale(ie,et.current,xe,{duration:i.transitions.duration.standard}):et.current[ie]=xe},gr=xe=>{let Ae=et.current[ie];Q?Ae+=xe:Ae+=xe*(s?-1:1),lt(Ae)},hr=()=>{const xe=et.current[se];let Ae=0;const Ke=Array.from(ot.current.children);for(let Xe=0;Xe<Ke.length;Xe+=1){const _t=Ke[Xe];if(Ae+_t[se]>xe){Xe===0&&(Ae=xe);break}Ae+=_t[se]}return Ae},Rr=()=>{gr(-1*hr())},nr=()=>{gr(hr())},[qt,{onChange:fr,...yr}]=ur("scrollbar",{className:Dt(ee.scrollableX,ee.hideScrollbar),elementType:_le,shouldForwardComponentProp:!0,externalForwardedProps:dt,ownerState:ce}),Lr=M.useCallback(xe=>{fr?.(xe),Ie({overflow:null,scrollbarWidth:xe})},[fr]),[vt,Ut]=ur("scrollButtons",{className:Dt(ee.scrollButtons,N.className),elementType:fle,externalForwardedProps:dt,ownerState:ce,additionalProps:{orientation:_,slots:{StartScrollButtonIcon:I.startScrollButtonIcon||I.StartScrollButtonIcon,EndScrollButtonIcon:I.endScrollButtonIcon||I.EndScrollButtonIcon},slotProps:{startScrollButtonIcon:pe,endScrollButtonIcon:me}}}),rn=()=>{const xe={};xe.scrollbarSizeListener=V?O.jsx(qt,{...yr,onChange:Lr}):null;const Ke=V&&(E==="auto"&&(ze||Ye)||E===!0);return xe.scrollButtonStart=Ke?O.jsx(vt,{direction:s?"right":"left",onClick:Rr,disabled:!ze,...Ut}):null,xe.scrollButtonEnd=Ke?O.jsx(vt,{direction:s?"left":"right",onClick:nr,disabled:!Ye,...Ut}):null,xe},jt=la(xe=>{const{tabsMeta:Ae,tabMeta:Ke}=it();if(!(!Ke||!Ae)){if(Ke[ne]<Ae[ne]){const Xe=Ae[ie]+(Ke[ne]-Ae[ne]);lt(Xe,{animation:xe})}else if(Ke[ue]>Ae[ue]){const Xe=Ae[ie]+(Ke[ue]-Ae[ue]);lt(Xe,{animation:xe})}}}),br=la(()=>{V&&E!==!1&&Ve(!Rt)});M.useEffect(()=>{const xe=cv(()=>{et.current&&bt()});let Ae;const Ke=Lt=>{Lt.forEach(ct=>{ct.removedNodes.forEach(yt=>{Ae?.unobserve(yt)}),ct.addedNodes.forEach(yt=>{Ae?.observe(yt)})}),xe(),br()},Xe=vo(et.current);Xe.addEventListener("resize",xe);let _t;return typeof ResizeObserver<"u"&&(Ae=new ResizeObserver(xe),Array.from(ot.current.children).forEach(Lt=>{Ae.observe(Lt)})),typeof MutationObserver<"u"&&(_t=new MutationObserver(Ke),_t.observe(ot.current,{childList:!0})),()=>{xe.clear(),Xe.removeEventListener("resize",xe),_t?.disconnect(),Ae?.disconnect()}},[bt,br]),M.useEffect(()=>{const xe=Array.from(ot.current.children),Ae=xe.length;if(typeof IntersectionObserver<"u"&&Ae>0&&V&&E!==!1){const Ke=xe[0],Xe=xe[Ae-1],_t={root:et.current,threshold:.99},Lt=Kt=>{pt(!Kt[0].isIntersecting)},ct=new IntersectionObserver(Lt,_t);ct.observe(Ke);const yt=Kt=>{Pt(!Kt[0].isIntersecting)},Vt=new IntersectionObserver(yt,_t);return Vt.observe(Xe),()=>{ct.disconnect(),Vt.disconnect()}}},[V,E,Rt,c?.length]),M.useEffect(()=>{Oe(!0)},[]),M.useEffect(()=>{bt()}),M.useEffect(()=>{jt(i4!==Le)},[jt,Le]),M.useImperativeHandle(l,()=>({updateIndicator:bt,updateScrollButtons:br}),[bt,br]);const[Or,Hr]=ur("indicator",{className:Dt(ee.indicator,P.className),elementType:xle,externalForwardedProps:dt,ownerState:ce,additionalProps:{style:Le}}),ln=O.jsx(Or,{...Hr});let Cn=0;const wn=M.Children.map(c,xe=>{if(!M.isValidElement(xe))return null;const Ae=xe.props.value===void 0?Cn:xe.props.value;Ue.set(Ae,Cn);const Ke=Ae===B;return Cn+=1,M.cloneElement(xe,{fullWidth:A==="fullWidth",indicator:Ke&&!ye&&ln,selected:Ke,selectionFollowsFocus:D,onChange:y,textColor:U,value:Ae,...Cn===1&&B===!1&&!xe.props.tabIndex?{tabIndex:0}:{}})}),Fr=xe=>{if(xe.altKey||xe.shiftKey||xe.ctrlKey||xe.metaKey)return;const Ae=ot.current,Ke=Ss(Ae).activeElement;if(Ke.getAttribute("role")!=="tab")return;let _t=_==="horizontal"?"ArrowLeft":"ArrowUp",Lt=_==="horizontal"?"ArrowRight":"ArrowDown";switch(_==="horizontal"&&s&&(_t="ArrowRight",Lt="ArrowLeft"),xe.key){case _t:xe.preventDefault(),By(Ae,Ke,n4);break;case Lt:xe.preventDefault(),By(Ae,Ke,r4);break;case"Home":xe.preventDefault(),By(Ae,null,r4);break;case"End":xe.preventDefault(),By(Ae,null,n4);break}},oe=rn(),[fe,Te]=ur("root",{ref:t,className:Dt(ee.root,h),elementType:gle,externalForwardedProps:{...dt,...W,component:f},ownerState:ce}),[je,mt]=ur("scroller",{ref:et,className:ee.scroller,elementType:vle,externalForwardedProps:dt,ownerState:ce,additionalProps:{style:{overflow:Ne.overflow,[Q?`margin${s?"Left":"Right"}`:"marginBottom"]:$?void 0:-Ne.scrollbarWidth}}}),[St,be]=ur("list",{ref:ot,className:Dt(ee.list,ee.flexContainer),elementType:yle,externalForwardedProps:dt,ownerState:ce,getSlotProps:xe=>({...xe,onKeyDown:Ae=>{Fr(Ae),xe.onKeyDown?.(Ae)}})});return O.jsxs(fe,{...Te,children:[oe.scrollButtonStart,oe.scrollbarSizeListener,O.jsxs(je,{...mt,children:[O.jsx(St,{"aria-label":a,"aria-labelledby":o,"aria-orientation":_==="vertical"?"vertical":null,role:"tablist",...be,children:wn}),ye&&ln]}),oe.scrollButtonEnd]})});function ble(r){return er("MuiTextField",r)}Qt("MuiTextField",["root"]);const Sle={standard:Lk,filled:Rk,outlined:Yp},Tle=r=>{const{classes:e}=r;return Zt({root:["root"]},ble,e)},Cle=rt(Ur,{name:"MuiTextField",slot:"Root"})({}),jn=M.forwardRef(function(e,t){const n=Yt({props:e,name:"MuiTextField"}),{autoComplete:i,autoFocus:s=!1,children:a,className:o,color:l="primary",defaultValue:u,disabled:c=!1,error:h=!1,FormHelperTextProps:f,fullWidth:g=!1,helperText:v,id:y,InputLabelProps:_,inputProps:C,InputProps:E,inputRef:D,label:I,maxRows:k,minRows:P,multiline:N=!1,name:U,onBlur:B,onChange:A,onFocus:$,placeholder:W,required:V=!1,rows:Q,select:ie=!1,SelectProps:ne,slots:ue={},slotProps:se={},type:ae,value:ce,variant:ee="outlined",...pe}=n,me={...n,autoFocus:s,color:l,disabled:c,error:h,fullWidth:g,multiline:N,required:V,select:ie,variant:ee},ye=Tle(me),Oe=Jd(y),Le=v&&Oe?`${Oe}-helper-text`:void 0,st=I&&Oe?`${Oe}-label`:void 0,ze=Sle[ee],pt={slots:ue,slotProps:{input:E,inputLabel:_,htmlInput:C,formHelperText:f,select:ne,...se}},Ye={},Pt=pt.slotProps.inputLabel;ee==="outlined"&&(Pt&&typeof Pt.shrink<"u"&&(Ye.notched=Pt.shrink),Ye.label=I),ie&&((!ne||!ne.native)&&(Ye.id=void 0),Ye["aria-describedby"]=void 0);const[Rt,Ve]=ur("root",{elementType:Cle,shouldForwardComponentProp:!0,externalForwardedProps:{...pt,...pe},ownerState:me,className:Dt(ye.root,o),ref:t,additionalProps:{disabled:c,error:h,fullWidth:g,required:V,color:l,variant:ee}}),[Ne,Ie]=ur("input",{elementType:ze,externalForwardedProps:pt,additionalProps:Ye,ownerState:me}),[Ue,et]=ur("inputLabel",{elementType:Fu,externalForwardedProps:pt,ownerState:me}),[ot,dt]=ur("htmlInput",{elementType:"input",externalForwardedProps:pt,ownerState:me}),[it,bt]=ur("formHelperText",{elementType:yae,externalForwardedProps:pt,ownerState:me}),[lt,gr]=ur("select",{elementType:Bu,externalForwardedProps:pt,ownerState:me}),hr=O.jsx(Ne,{"aria-describedby":Le,autoComplete:i,autoFocus:s,defaultValue:u,fullWidth:g,multiline:N,name:U,rows:Q,maxRows:k,minRows:P,type:ae,value:ce,id:Oe,inputRef:D,onBlur:B,onChange:A,onFocus:$,placeholder:W,inputProps:dt,slots:{input:ue.htmlInput?ot:void 0},...Ie});return O.jsxs(Rt,{...Ve,children:[I!=null&&I!==""&&O.jsx(Ue,{htmlFor:Oe,id:st,...et,children:I}),ie?O.jsx(lt,{"aria-describedby":Le,id:Oe,labelId:st,value:ce,input:hr,...gr,children:a}):hr,v&&O.jsx(it,{id:Le,...bt,children:v})]})}),Vd=mr(O.jsx("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6zM19 4h-3.5l-1-1h-5l-1 1H5v2h14z"})),wle=mr(O.jsx("path",{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2M12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8m3.5-9c.83 0 1.5-.67 1.5-1.5S16.33 8 15.5 8 14 8.67 14 9.5s.67 1.5 1.5 1.5m-7 0c.83 0 1.5-.67 1.5-1.5S9.33 8 8.5 8 7 8.67 7 9.5 7.67 11 8.5 11m3.5 6.5c2.33 0 4.31-1.46 5.11-3.5H6.89c.8 2.04 2.78 3.5 5.11 3.5"})),Ele=mr(O.jsx("path",{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2M12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8m3.5-9c.83 0 1.5-.67 1.5-1.5S16.33 8 15.5 8 14 8.67 14 9.5s.67 1.5 1.5 1.5m-7 0c.83 0 1.5-.67 1.5-1.5S9.33 8 8.5 8 7 8.67 7 9.5 7.67 11 8.5 11m3.5 3c-2.33 0-4.31 1.46-5.11 3.5h10.22c-.8-2.04-2.78-3.5-5.11-3.5"})),kle=mr(O.jsx("path",{d:"M5 20h14v-2H5zm0-10h4v6h6v-6h4l-7-7z"})),Ale=[{value:"EveryDay",name:""},{value:"EveryHour",name:""}],s4=".m3u",sC={original:{urls:[],result_name:"",md5:"",run_type:"EveryDay",keyword_dislike:[],keyword_like:[],http_timeout:2e4,check_timeout:2e4,concurrent:30,sort:!1,no_check:!1,rename:!1,ffmpeg_check:!1,not_http_skip:!1,same_save_num:0},id:"",create_time:0,task_info:{run_type:"EveryDay",last_run_time:0,next_run_time:0,is_running:!1,task_status:"Pending"}},x5=({onClose:r,formValue:e,open:t,onSave:n,handleSave:i,handleDelete:s,taskService:a,checkType:o,output_folder:l})=>{const{t:u}=Ii(),c=M.useContext(Ha),[h,f]=M.useState(sC),[g,v]=M.useState(""),[y,_]=M.useState(""),[C,E]=M.useState(0),[D,I]=M.useState(!1),k=["","",""];M.useEffect(()=>{if(!t){let Ie=JSON.parse(JSON.stringify(sC));Ie.original.result_name===""&&(Ie.original.result_name=P(10)),f(Ie),_(""),v(""),E(0),I(!1)}},[t]),M.useEffect(()=>{if(E(0),e!==null){const Ie={...e,original:{...e.original,result_name:e.original.result_name.replace(l,"").replace(s4,""),http_timeout:e.original.http_timeout??0,check_timeout:e.original.check_timeout??0,concurrent:e.original.concurrent??0,sort:e.original.sort??!1,no_check:e.original.no_check??!1,rename:e.original.rename??!1,ffmpeg_check:e.original.ffmpeg_check??!1,not_http_skip:e.original.not_http_skip??!1,same_save_num:e.original.same_save_num??0}};f(Ie)}else{let Ie=JSON.parse(JSON.stringify(sC));Ie.original.result_name===""&&(Ie.original.result_name=P(10)),f(Ie)}},[e]);const P=Ie=>{Ie=Ie||32;const Ue="ABCDEFGHJKMNPQRSTWXYZabcdefhijkmnprstwxyz2345678",et=Ue.length;let ot="";for(let dt=0;dt<Ie;dt++)ot+=Ue.charAt(Math.floor(Math.random()*et));return ot},N=()=>{E(Ie=>Ie+1)},U=()=>{E(Ie=>Ie-1)},B=()=>{if(h.original.urls.length===0){let Ie=u("");alert(Ie)}else i(h),r()},A=()=>{s(h),ie(),r()},$=Ie=>{const Ue=[...h.original.urls,Ie];f({...h,original:{...h.original,urls:Ue}})},W=Ie=>parseInt(Ie.replace("url-",""),10),V=()=>{$("")},Q=()=>{I(!0)},ie=()=>{I(!1)},ne=Ie=>{f(Ue=>({...Ue,original:{...Ue.original,urls:Ue.original.urls.filter((et,ot)=>ot!==Ie)}}))},ue=Ie=>{f({...h,original:{...h.original,check_timeout:parseInt(Ie.target.value,10)}})},se=async Ie=>{const Ue=Ie.target.files[0];if(Ue)try{const et=new FormData;et.append("file",Ue);let ot=await a.uploadFile(et);$(ot.url)}catch(et){console.error("",et)}},ae=Ie=>{f({...h,original:{...h.original,http_timeout:parseInt(Ie.target.value,10)}})},ce=Ie=>{if(Ie===1&&g!=""){let Ue=h.original.keyword_like??[];Ue.push(g),f({...h,original:{...h.original,keyword_like:ee(Ue)}}),v("")}else if(Ie===2&&y!=""){let Ue=h.original.keyword_dislike??[];Ue.push(y),f({...h,original:{...h.original,keyword_dislike:ee(Ue)}}),_("")}},ee=Ie=>Ie.filter((Ue,et)=>Ie.indexOf(Ue)===et),pe=Ie=>{v(Ie.target.value)},me=Ie=>{_(Ie.target.value)},ye=Ie=>{const Ue=W(Ie.target.name),et=[...h.original.urls];et[Ue]=Ie.target.value;const ot={...h,original:{...h.original,urls:et}};f(ot)},Oe=Ie=>{f({...h,original:{...h.original,result_name:Ie.target.value}})},Le=Ie=>{f({...h,original:{...h.original,run_type:Ie.target.value}})},st=Ie=>{f({...h,original:{...h.original,concurrent:parseInt(Ie.target.value,10)}})},ze=Ie=>{let Ue=!1;Ie.target.defaultValue==="false"?Ue=!1:Ue=!0,f({...h,original:{...h.original,sort:Ue}})},pt=Ie=>{f({...h,original:{...h.original,same_save_num:parseInt(Ie.target.value,10)}})},Ye=Ie=>{let Ue=!1;Ie.target.defaultValue==="false"?Ue=!1:Ue=!0,f({...h,original:{...h.original,rename:Ue}})},Pt=Ie=>{let Ue=!1;Ie.target.defaultValue==="false"?Ue=!1:Ue=!0,f({...h,original:{...h.original,not_http_skip:Ue}})},Rt=Ie=>{let Ue=!1;Ie.target.defaultValue==="false"?Ue=!1:Ue=!0,f({...h,original:{...h.original,ffmpeg_check:Ue}})},Ve=Ie=>{let Ue=!1;Ie.target.defaultValue==="false"?Ue=!1:Ue=!0,f({...h,original:{...h.original,no_check:Ue}})},Ne=Ie=>{switch(Ie){case 0:return O.jsxs(wt,{sx:{mt:2},children:[h.original.urls.length>0?O.jsxs(Ur,{fullWidth:!0,style:{padding:"0 0 20px"},children:[O.jsx(kr,{variant:"subtitle1",component:"div",children:u("")}),h.original.urls.map((Ue,et)=>O.jsxs(k0,{direction:"row",spacing:1,children:[O.jsx(jn,{style:{width:"100%"},disabled:Ue.startsWith("static")||Ue.startsWith("localstorage"),id:"standard-basic",variant:"standard",name:"url-"+et,value:Ue,onChange:ye}),O.jsx(th,{"aria-label":"delete",onClick:()=>ne(et),children:O.jsx(Vd,{})})]},et))]}):"",O.jsxs(Ur,{fullWidth:!0,style:{padding:"20px 0 20px",display:"flex",flexDirection:"row",justifyContent:"space-between"},children:[O.jsx(Dr,{variant:"outlined",onClick:()=>V(),startIcon:O.jsx(t2,{}),children:u("")}),O.jsxs(Dr,{variant:"contained",component:"label",startIcon:O.jsx(kle,{}),children:[u(""),O.jsx("input",{hidden:!0,accept:"*",multiple:!0,type:"file",onChange:se})]})]}),o==="server"?O.jsxs(Ur,{fullWidth:!0,style:{margin:"0 0 20px"},children:[O.jsx(Fu,{id:"demo-simple-select-standard-label",children:u("")}),O.jsx(Bu,{labelId:"demo-simple-select-standard-label",id:"demo-simple-select-standard",value:h.original.run_type,label:u(""),onChange:Le,children:Ale.map((Ue,et)=>O.jsx(Fc,{value:Ue.value,children:u(Ue.name)},et))})]}):"",o==="server"?O.jsxs(Ur,{fullWidth:!0,style:{margin:"20px 0 20px"},children:[O.jsx(Fu,{htmlFor:"outlined-adornment-amount",children:u("")}),O.jsx(Yp,{style:{width:"100%"},name:"resultName",endAdornment:O.jsx(d2,{position:"end",children:s4}),startAdornment:O.jsx(d2,{position:"start",children:l}),"aria-describedby":"outlined-weight-helper-text",label:u(""),value:h.original.result_name,onChange:Oe})]}):""]});case 1:return O.jsxs(wt,{sx:{mt:2},children:[O.jsx(Ur,{fullWidth:!0,style:{margin:"10px 0 20px"},children:O.jsxs(k0,{direction:"row",spacing:2,children:[O.jsx(jn,{id:"standard-basic",label:u(""),variant:"standard",fullWidth:!0,value:g,onChange:pe}),O.jsx(Dr,{size:"small",variant:"outlined",onClick:()=>ce(1),startIcon:O.jsx(wle,{}),children:u("")})]})}),h.original.keyword_like!==null&&h.original.keyword_like.length>0?O.jsxs(Ur,{fullWidth:!0,style:{padding:"0 0 20px"},children:[O.jsx(kr,{variant:"subtitle1",component:"div",children:u("")}),O.jsx(k0,{direction:"row",spacing:1,style:{display:"flex",flexWrap:"wrap"},children:h.original.keyword_like!==null&&h.original.keyword_like.map((Ue,et)=>O.jsx(NO,{label:Ue,onDelete:()=>deleteThisLikeKw(et),variant:"outlined",style:{margin:"5px"}},et))})]}):"",O.jsx(Ur,{fullWidth:!0,style:{margin:"10px 0 20px"},children:O.jsxs(k0,{direction:"row",spacing:2,children:[O.jsx(jn,{id:"standard-basic",label:u(""),variant:"standard",fullWidth:!0,value:y,onChange:me}),O.jsx(Dr,{size:"small",variant:"outlined",onClick:()=>ce(2),startIcon:O.jsx(Ele,{}),children:u("")})]})}),h.original.keyword_dislike!==null&&h.original.keyword_dislike.length>0?O.jsxs(Ur,{fullWidth:!0,style:{padding:"0 0 10px"},children:[O.jsx(kr,{variant:"subtitle1",component:"div",children:u("")}),O.jsx(k0,{direction:"row",spacing:1,style:{display:"flex",flexWrap:"wrap"},children:h.original.keyword_dislike.map((Ue,et)=>O.jsx(NO,{label:Ue,variant:"outlined",onDelete:()=>deleteThisDislikeKw(et),style:{margin:"5px"}},et))})]}):""]});case 2:return O.jsxs(wt,{sx:{mt:2},children:[O.jsxs(Ur,{fullWidth:!0,style:{margin:"20px 0 20px"},children:[O.jsx(kr,{variant:"subtitle1",component:"div",children:u("http(ms)")}),O.jsx(jn,{id:"standard-basic",variant:"standard",value:h.original.http_timeout,onChange:ae})]}),O.jsxs(Ur,{fullWidth:!0,style:{margin:"20px 0 20px"},children:[O.jsx(kr,{variant:"subtitle1",component:"div",children:u("(ms)")}),O.jsx(jn,{id:"standard-basic",variant:"standard",value:h.original.check_timeout,onChange:ue})]}),O.jsxs(Ur,{fullWidth:!0,style:{margin:"10px 0 20px"},children:[O.jsx(kr,{variant:"subtitle1",component:"div",children:u("")}),O.jsxs(b0,{row:!0,"aria-labelledby":"demo-row-radio-buttons-group-label",name:"row-radio-buttons-group",value:h.original.no_check,onChange:Ve,children:[O.jsx(co,{value:"false",control:O.jsx(uu,{}),label:u("")}),O.jsx(co,{value:"true",control:O.jsx(uu,{}),label:u("")})]})]}),h.original.no_check===!1?O.jsxs(O.Fragment,{children:[O.jsxs(Ur,{fullWidth:!0,style:{margin:"10px 0 20px"},children:[O.jsx(kr,{variant:"subtitle1",component:"div",children:u("")}),O.jsx(jn,{id:"standard-basic",variant:"standard",value:h.original.concurrent,onChange:st})]}),O.jsxs(Ur,{fullWidth:!0,style:{margin:"10px 0 20px"},children:[O.jsx(kr,{variant:"subtitle1",component:"div",children:u("")}),O.jsxs(b0,{row:!0,"aria-labelledby":"demo-row-radio-buttons-group-label",name:"row-radio-buttons-group",value:h.original.ffmpeg_check,onChange:Rt,children:[O.jsx(co,{value:"false",control:O.jsx(uu,{}),label:u("http")}),O.jsx(co,{value:"true",disabled:c.ffmepgCheck==0&&c.nowMod===1,control:O.jsx(uu,{}),label:u("ffmpeg")})]})]}),h.original.ffmpeg_check===!1?O.jsxs(Ur,{fullWidth:!0,style:{margin:"10px 0 20px"},children:[O.jsx(kr,{variant:"subtitle1",component:"div",children:u("http")}),O.jsxs(b0,{row:!0,"aria-labelledby":"demo-row-radio-buttons-group-label",name:"row-radio-buttons-group",value:h.original.not_http_skip,onChange:Pt,children:[O.jsx(co,{value:"false",control:O.jsx(uu,{}),label:u("")}),O.jsx(co,{value:"true",control:O.jsx(uu,{}),label:u("")})]})]}):""]}):"",O.jsxs(Ur,{fullWidth:!0,style:{margin:"10px 0 20px"},children:[O.jsx(kr,{variant:"subtitle1",component:"div",children:u('("[HD]CCTV1""[HD]")')}),O.jsxs(b0,{row:!0,"aria-labelledby":"demo-row-radio-buttons-group-label",name:"row-radio-buttons-group",value:h.original.rename,onChange:Ye,children:[O.jsx(co,{value:"false",control:O.jsx(uu,{}),label:u("")}),O.jsx(co,{value:"true",control:O.jsx(uu,{}),label:u("")})]})]}),O.jsxs(Ur,{fullWidth:!0,style:{margin:"10px 0 20px"},children:[O.jsx(kr,{variant:"subtitle1",component:"div",children:u("")}),O.jsxs(b0,{row:!0,"aria-labelledby":"demo-row-radio-buttons-group-label",name:"row-radio-buttons-group",value:h.original.sort,onChange:ze,children:[O.jsx(co,{value:"false",control:O.jsx(uu,{}),label:u("")}),O.jsx(co,{value:"true",control:O.jsx(uu,{}),label:u("")})]})]}),O.jsxs(Ur,{fullWidth:!0,style:{margin:"10px 0 20px"},children:[O.jsx(kr,{variant:"subtitle1",component:"div",children:u("(0 0)")}),O.jsx(jn,{id:"standard-basic",variant:"standard",value:h.original.same_save_num,onChange:pt})]})]});default:return null}};return O.jsxs(O.Fragment,{children:[O.jsxs(Ml,{open:D,onClose:ie,"aria-describedby":"alert-dialog-slide-description",children:[O.jsx(Sm,{children:""}),O.jsxs(lae,{children:[O.jsx(Dr,{onClick:ie,children:"No"}),O.jsx(Dr,{onClick:A,children:"Yes"})]})]}),O.jsx(Ml,{onClose:r,open:t,disableEnforceFocus:!0,disableAutoFocus:!0,disableRestoreFocus:!0,children:O.jsxs(wt,{sx:{width:"100%",padding:"40px"},children:[O.jsx(qoe,{activeStep:C,children:k.map(Ie=>O.jsx(Coe,{children:O.jsx(v5,{children:u(Ie)})},Ie))}),O.jsxs(M.Fragment,{children:[Ne(C),O.jsxs(wt,{sx:{display:"flex",flexDirection:"row",pt:2},children:[C!==0&&O.jsx(Dr,{color:"inherit",onClick:U,sx:{mr:1},children:u("")}),C===0&&h.id!==""&&O.jsx(Dr,{color:"error",onClick:Q,startIcon:O.jsx(Vd,{}),children:u("")}),O.jsx(wt,{sx:{flex:"1 1 auto"}}),C===k.length-1?o==="server"||h.id===""?O.jsx(Dr,{onClick:B,children:u("")}):"":O.jsx(Dr,{onClick:N,children:u("")})]})]})]})})]})},a4=mr(O.jsx("path",{d:"M19 9h-4V3H9v6H5l7 7zM5 18v2h14v-2z"})),_5=({isNowHandle:r,row:e,clickTask:t,doTaskRightNow:n,source:i,showDownloadDialog:s,checkTaskRefetch:a,checkTaskContinue:o,checkTaskAgain:l})=>{const u=M.useContext(Ha),{t:c}=Ii(),h=C=>{n(C)},f=C=>{s(C)},g=C=>{console.log("handleTaskRefetch",C),a(C)},v=C=>{console.log("handleTaskContinue",C),o(C)},y=C=>{console.log("handleTaskContinue",C),l(C)},_=(C,E)=>{let D=[],I=e.original.same_save_num;for(let k=0;k<e.list.length;k++)e.list[k].status===200&&D.push(e.list[k]);if(I>0){const k={};D.forEach(P=>{k[P.name]||(k[P.name]=[]),k[P.name].push(P)}),D=Object.values(k).flatMap(P=>P.slice(0,I))}i==="ltask"&&u.nowMod===1?u.clientSaveFile(D,E==="txt"?"txt":"m3u"):u.webSaveFile(D,E==="txt"?"txt":"m3u")};return O.jsx(M.Fragment,{children:O.jsxs(Dk,{children:[O.jsxs(Hd,{width:400,children:[O.jsx(Dr,{onClick:()=>t(),variant:"text",children:e.id}),O.jsx(wt,{children:i==="task"?O.jsxs(wt,{children:[O.jsx(Dr,{color:"success",onClick:()=>f(e.id),size:"small",startIcon:O.jsx(XN,{}),children:c("")}),!r&&e.task_info.next_run_time>0&&e.task_info.next_run_time-new Date().getTime()/1e3>=120?O.jsx(Dr,{color:"success",onClick:()=>h(e.id),children:c("")}):""]}):O.jsxs(wt,{style:{display:"flex"},children:[O.jsx(Dr,{size:"small",color:"success",startIcon:O.jsx(a4,{}),onClick:()=>_(e.id,"m3u"),children:".m3u"}),O.jsx(Dr,{size:"small",color:"success",startIcon:O.jsx(a4,{}),onClick:()=>_(e.id,"txt"),children:".txt"})]})})]}),O.jsxs(Hd,{align:"right",width:300,children:[O.jsxs("div",{children:[c(""),"",e.create_time>0?new Date(e.create_time*1e3).toLocaleTimeString("zh-CN",{month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",hour12:!1}):""]}),e.task_info.last_run_time>0?O.jsxs("div",{children:[c(""),"",new Date(e.task_info.last_run_time*1e3).toLocaleTimeString("zh-CN",{month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",hour12:!1})]}):"",O.jsxs("div",{children:[c(""),"",c(r?"":"")]}),i==="task"&&e.task_info.next_run_time>0?O.jsxs("div",{children:[c(""),"",new Date(e.task_info.next_run_time*1e3).toLocaleTimeString("zh-CN",{month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",hour12:!1})]}):"",i==="task"?O.jsxs("div",{children:[c(""),"",e.task_info.run_type==="EveryHour"?c(""):c("")]}):"",O.jsxs("div",{children:[e.task_info.task_status==="FetchDataError"?O.jsx(Dr,{onClick:()=>g(e.id),style:{color:"red",cursor:"pointer"},children:c("")}):"",e.task_info.task_status==="FetchSomeDataError"?O.jsx(Dr,{onClick:()=>v(e.id),style:{color:"orange",cursor:"pointer"},children:c("")}):"",e.task_info.task_status==="Completed"?O.jsx(Dr,{onClick:()=>y(e.id),style:{color:"green",cursor:"pointer"},children:c("")}):""]})]})]})})},b5=({onClose:r,formValue:e,open:t})=>{const{t:n}=Ii(),[i,s]=M.useState([]),[a,o]=M.useState(""),[l,u]=M.useState(""),c=M.useContext(Ha);M.useEffect(()=>{o(window.document.location.origin+"/"+e.url),u(window.document.location.origin+"/q?url=./"+e.url+"&host="+window.document.location.host),e.content!==""?s(e.content):s("")},[e]);const h=async()=>{c.saveFile(),c.nowMod===0?window.open(a):c.clientSaveFile(e.content,"m3u")};return O.jsx(Ml,{onClose:()=>r(!1),open:t,children:O.jsx("div",{style:{width:"960px",minHeight:"400px"},children:O.jsxs("div",{style:{overflow:"hidden"},children:[O.jsxs("div",{style:{backgroundColor:"#fff",zIndex:9},children:[O.jsxs("div",{children:[n(""),"",O.jsx("b",{children:a})]}),O.jsxs("div",{children:[n("Logo"),"",O.jsx("b",{children:l})]}),i!=""&&O.jsx("div",{children:O.jsx(Dr,{variant:"text",onClick:()=>h(e.url),children:n("")})})]}),i!=""?O.jsx(jn,{multiline:!0,fullWidth:!0,minRows:15,maxRows:25,value:i,variant:"outlined",InputProps:{readOnly:!0}}):O.jsx("div",{style:{padding:"60px 0",position:"relative"},children:O.jsx("div",{children:n("")})})]})})})},S5=({onClose:r,open:e,onSave:t})=>{const{t:n}=Ii(),[i,s]=M.useState(""),a=()=>{s(""),r(!1)},o=()=>{t(i)},l=u=>{s(u.target.value)};return O.jsxs(Ml,{onClose:a,open:e,children:[O.jsx(wt,{sx:{width:500,padding:"20px"},children:O.jsx(jn,{id:"outlined-multiline-flexible",multiline:!0,value:i,maxRows:4,style:{width:"500px"},onChange:l})}),O.jsx(Dr,{variant:"text",onClick:o,children:n("")})]})},T5=({onClose:r,formValue:e,open:t})=>{const n=()=>{r(!1)};return O.jsx(Ml,{onClose:n,open:t,children:O.jsx(wt,{sx:{width:500,padding:"20px"},children:O.jsx(jn,{id:"outlined-multiline-flexible",multiline:!0,value:e,maxRows:4,style:{width:"500px"}})})})};function Dle(){const r=M.useContext(s5),{t:e}=Ii(),[t]=M.useState(()=>new Qie),[n,i]=M.useState(!1),[s,a]=M.useState(null),[o,l]=M.useState(!1),[u,c]=M.useState(""),[h,f]=M.useState(!1),[g,v]=M.useState({content:"",url:""}),[y,_]=M.useState(!1),[C,E]=M.useState(!1),[D,I]=M.useState(""),k=ce=>{a(ce),i(!0)},P=()=>{i(!1),a(null)},N=async ce=>{try{ce.id===""?await t.addTask(ce):await t.updateTask(ce.id,ce),r.freshTaskList()}catch(ee){B(ee.message)}},U=async ce=>{try{await t.deleteTask(ce.id),r.freshTaskList()}catch(ee){B(ee.message)}},B=ce=>{c(ce),l(!0)},A=()=>{c(""),l(!1)},$=async ce=>{try{await t.runTask(ce)}catch{B(e(""))}},W=async ce=>{r.updateTaskStatus(ce,"Prepare")},V=async ce=>{r.updateTaskStatus(ce,"Pending")},Q=async ce=>{r.updateTaskStatus(ce,"Prepare")},ie=async ce=>{try{const ee=await t.getDownloadBody(ce);f(!0),v({content:ee.content,url:ee.url})}catch{B(e(""))}},ne=ce=>{f(ce)},ue=ce=>{_(ce)},se=async ce=>{if(ce)try{const ee=await t.exportTasks();E(!0),I(JSON.stringify(ee))}catch{B(e(""))}else E(!1)},ae=async ce=>{try{const ee=JSON.parse(ce);await t.importTasks(ee),_(!1)}catch{B(e(""))}};return O.jsx(wt,{style:{padding:"0 20px"},children:O.jsxs(O.Fragment,{children:[O.jsx(wt,{style:{marginBottom:"10px",display:"flex",justifyContent:"space-between"},children:O.jsx(wt,{children:O.jsx(Dr,{variant:"contained",startIcon:O.jsx(fv,{}),onClick:()=>k(null),style:{marginRight:"10px"},size:"small",children:e("")})})}),O.jsx(_f,{open:o,autoHideDuration:6e3,onClose:A,message:u}),O.jsx(x5,{taskService:t,formValue:s,open:n,onClose:P,handleSave:N,handleDelete:U,checkType:"local",output_folder:""}),O.jsx(b5,{formValue:g,open:h,onClose:ne}),O.jsx(S5,{open:y,onClose:ue,onSave:ae}),O.jsx(T5,{open:C,formValue:D,onClose:se}),O.jsx(Ku,{sx:{overflow:"hidden"},children:O.jsx(u5,{children:O.jsxs(o5,{"aria-label":"simple table",children:[O.jsx(c5,{children:O.jsxs(Dk,{children:[O.jsx(Hd,{children:e("id")}),O.jsx(Hd,{align:"right",children:e("")})]})}),O.jsx(l5,{children:r.tasks.map(ce=>O.jsx(_5,{row:ce,doTaskRightNow:$,showDownloadDialog:ie,clickTask:()=>k(ce),checkTaskRefetch:W,checkTaskContinue:V,checkTaskAgain:Q,source:"ltask"},ce.id))})]})})})]})})}const Ile=mr(O.jsx("path",{d:"m10 16.5 6-4.5-6-4.5zM12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8"})),Ple=mr(O.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m4 14H8V8h8z"}));var aC,o4;function Tm(){if(o4)return aC;o4=1;var r;return typeof window<"u"?r=window:typeof Gh<"u"?r=Gh:typeof self<"u"?r=self:r={},aC=r,aC}var Rle=Tm();const X=da(Rle);var oC,l4;function C5(){if(l4)return oC;l4=1;var r=typeof Gh<"u"?Gh:typeof window<"u"?window:{},e=e8,t;return typeof document<"u"?t=document:(t=r["__GLOBAL_DOCUMENT_CACHE@4"],t||(t=r["__GLOBAL_DOCUMENT_CACHE@4"]=e)),oC=t,oC}var Lle=C5();const Be=da(Lle);var Ny={exports:{}},lC={exports:{}},u4;function w5(){return u4||(u4=1,(function(r){function e(){return r.exports=e=Object.assign?Object.assign.bind():function(t){for(var n=1;n<arguments.length;n++){var i=arguments[n];for(var s in i)({}).hasOwnProperty.call(i,s)&&(t[s]=i[s])}return t},r.exports.__esModule=!0,r.exports.default=r.exports,e.apply(null,arguments)}r.exports=e,r.exports.__esModule=!0,r.exports.default=r.exports})(lC)),lC.exports}var uC,c4;function E5(){if(c4)return uC;c4=1,uC=e;var r=Object.prototype.toString;function e(t){if(!t)return!1;var n=r.call(t);return n==="[object Function]"||typeof t=="function"&&n!=="[object RegExp]"||typeof window<"u"&&(t===window.setTimeout||t===window.alert||t===window.confirm||t===window.prompt)}return uC}var cC,d4;function Ole(){if(d4)return cC;d4=1;function r(i,s){var a=typeof Symbol<"u"&&i[Symbol.iterator]||i["@@iterator"];if(a)return(a=a.call(i)).next.bind(a);if(Array.isArray(i)||(a=e(i))||s){a&&(i=a);var o=0;return function(){return o>=i.length?{done:!0}:{done:!1,value:i[o++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function e(i,s){if(i){if(typeof i=="string")return t(i,s);var a=Object.prototype.toString.call(i).slice(8,-1);if(a==="Object"&&i.constructor&&(a=i.constructor.name),a==="Map"||a==="Set")return Array.from(i);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return t(i,s)}}function t(i,s){(s==null||s>i.length)&&(s=i.length);for(var a=0,o=new Array(s);a<s;a++)o[a]=i[a];return o}var n=(function(){function i(){this.typeToInterceptorsMap_=new Map,this.enabled_=!1}var s=i.prototype;return s.getIsEnabled=function(){return this.enabled_},s.enable=function(){this.enabled_=!0},s.disable=function(){this.enabled_=!1},s.reset=function(){this.typeToInterceptorsMap_=new Map,this.enabled_=!1},s.addInterceptor=function(o,l){this.typeToInterceptorsMap_.has(o)||this.typeToInterceptorsMap_.set(o,new Set);var u=this.typeToInterceptorsMap_.get(o);return u.has(l)?!1:(u.add(l),!0)},s.removeInterceptor=function(o,l){var u=this.typeToInterceptorsMap_.get(o);return u&&u.has(l)?(u.delete(l),!0):!1},s.clearInterceptorsByType=function(o){var l=this.typeToInterceptorsMap_.get(o);return l?(this.typeToInterceptorsMap_.delete(o),this.typeToInterceptorsMap_.set(o,new Set),!0):!1},s.clear=function(){return this.typeToInterceptorsMap_.size?(this.typeToInterceptorsMap_=new Map,!0):!1},s.getForType=function(o){return this.typeToInterceptorsMap_.get(o)||new Set},s.execute=function(o,l){for(var u=this.getForType(o),c=r(u),h;!(h=c()).done;){var f=h.value;try{l=f(l)}catch{}}return l},i})();return cC=n,cC}var dC,h4;function Mle(){if(h4)return dC;h4=1;var r=(function(){function t(){this.maxAttempts_=1,this.delayFactor_=.1,this.fuzzFactor_=.1,this.initialDelay_=1e3,this.enabled_=!1}var n=t.prototype;return n.getIsEnabled=function(){return this.enabled_},n.enable=function(){this.enabled_=!0},n.disable=function(){this.enabled_=!1},n.reset=function(){this.maxAttempts_=1,this.delayFactor_=.1,this.fuzzFactor_=.1,this.initialDelay_=1e3,this.enabled_=!1},n.getMaxAttempts=function(){return this.maxAttempts_},n.setMaxAttempts=function(s){this.maxAttempts_=s},n.getDelayFactor=function(){return this.delayFactor_},n.setDelayFactor=function(s){this.delayFactor_=s},n.getFuzzFactor=function(){return this.fuzzFactor_},n.setFuzzFactor=function(s){this.fuzzFactor_=s},n.getInitialDelay=function(){return this.initialDelay_},n.setInitialDelay=function(s){this.initialDelay_=s},n.createRetry=function(s){var a=s===void 0?{}:s,o=a.maxAttempts,l=a.delayFactor,u=a.fuzzFactor,c=a.initialDelay;return new e({maxAttempts:o||this.maxAttempts_,delayFactor:l||this.delayFactor_,fuzzFactor:u||this.fuzzFactor_,initialDelay:c||this.initialDelay_})},t})(),e=(function(){function t(i){this.maxAttempts_=i.maxAttempts,this.delayFactor_=i.delayFactor,this.fuzzFactor_=i.fuzzFactor,this.currentDelay_=i.initialDelay,this.currentAttempt_=1}var n=t.prototype;return n.moveToNextAttempt=function(){this.currentAttempt_++;var s=this.currentDelay_*this.delayFactor_;this.currentDelay_=this.currentDelay_+s},n.shouldRetry=function(){return this.currentAttempt_<this.maxAttempts_},n.getCurrentDelay=function(){return this.currentDelay_},n.getCurrentMinPossibleDelay=function(){return(1-this.fuzzFactor_)*this.currentDelay_},n.getCurrentMaxPossibleDelay=function(){return(1+this.fuzzFactor_)*this.currentDelay_},n.getCurrentFuzzedDelay=function(){var s=this.getCurrentMinPossibleDelay(),a=this.getCurrentMaxPossibleDelay();return s+Math.random()*(a-s)},t})();return dC=r,dC}var hC,f4;function Fle(){if(f4)return hC;f4=1;var r=Tm(),e=function(i,s){return s===void 0&&(s=!1),function(a,o,l){if(a){i(a);return}if(o.statusCode>=400&&o.statusCode<=599){var u=l;if(s)if(r.TextDecoder){var c=t(o.headers&&o.headers["content-type"]);try{u=new TextDecoder(c).decode(l)}catch{}}else u=String.fromCharCode.apply(null,new Uint8Array(l));i({cause:u});return}i(null,l)}};function t(n){return n===void 0&&(n=""),n.toLowerCase().split(";").reduce(function(i,s){var a=s.split("="),o=a[0],l=a[1];return o.trim()==="charset"?l.trim():i},"utf-8")}return hC=e,hC}var p4;function Ble(){if(p4)return Ny.exports;p4=1;var r=Tm(),e=w5(),t=E5(),n=Ole(),i=Mle();u.httpHandler=Fle(),u.requestInterceptorsStorage=new n,u.responseInterceptorsStorage=new n,u.retryManager=new i;/**
 * @license
 * slighly modified parse-headers 2.0.2 <https://github.com/kesla/parse-headers/>
 * Copyright (c) 2014 David Bjrklund
 * Available under the MIT license
 * <https://github.com/kesla/parse-headers/blob/master/LICENCE>
 */var s=function(v){var y={};return v&&v.trim().split(`
`).forEach(function(_){var C=_.indexOf(":"),E=_.slice(0,C).trim().toLowerCase(),D=_.slice(C+1).trim();typeof y[E]>"u"?y[E]=D:Array.isArray(y[E])?y[E].push(D):y[E]=[y[E],D]}),y};Ny.exports=u,Ny.exports.default=u,u.XMLHttpRequest=r.XMLHttpRequest||f,u.XDomainRequest="withCredentials"in new u.XMLHttpRequest?u.XMLHttpRequest:r.XDomainRequest,a(["get","put","post","patch","head","delete"],function(g){u[g==="delete"?"del":g]=function(v,y,_){return y=l(v,y,_),y.method=g.toUpperCase(),c(y)}});function a(g,v){for(var y=0;y<g.length;y++)v(g[y])}function o(g){for(var v in g)if(g.hasOwnProperty(v))return!1;return!0}function l(g,v,y){var _=g;return t(v)?(y=v,typeof g=="string"&&(_={uri:g})):_=e({},v,{uri:g}),_.callback=y,_}function u(g,v,y){return v=l(g,v,y),c(v)}function c(g){if(typeof g.callback>"u")throw new Error("callback argument missing");if(g.requestType&&u.requestInterceptorsStorage.getIsEnabled()){var v={uri:g.uri||g.url,headers:g.headers||{},body:g.body,metadata:g.metadata||{},retry:g.retry,timeout:g.timeout},y=u.requestInterceptorsStorage.execute(g.requestType,v);g.uri=y.uri,g.headers=y.headers,g.body=y.body,g.metadata=y.metadata,g.retry=y.retry,g.timeout=y.timeout}var _=!1,C=function(se,ae,ce){_||(_=!0,g.callback(se,ae,ce))};function E(){P.readyState===4&&!u.responseInterceptorsStorage.getIsEnabled()&&setTimeout(k,0)}function D(){var ue=void 0;if(P.response?ue=P.response:ue=P.responseText||h(P),Q)try{ue=JSON.parse(ue)}catch{}return ue}function I(ue){if(clearTimeout(ie),clearTimeout(g.retryTimeout),ue instanceof Error||(ue=new Error(""+(ue||"Unknown XMLHttpRequest Error"))),ue.statusCode=0,!U&&u.retryManager.getIsEnabled()&&g.retry&&g.retry.shouldRetry()){g.retryTimeout=setTimeout(function(){g.retry.moveToNextAttempt(),g.xhr=P,c(g)},g.retry.getCurrentFuzzedDelay());return}if(g.requestType&&u.responseInterceptorsStorage.getIsEnabled()){var se={headers:ne.headers||{},body:ne.body,responseUrl:P.responseURL,responseType:P.responseType},ae=u.responseInterceptorsStorage.execute(g.requestType,se);ne.body=ae.body,ne.headers=ae.headers}return C(ue,ne)}function k(){if(!U){var ue;clearTimeout(ie),clearTimeout(g.retryTimeout),g.useXDR&&P.status===void 0?ue=200:ue=P.status===1223?204:P.status;var se=ne,ae=null;if(ue!==0?(se={body:D(),statusCode:ue,method:A,headers:{},url:B,rawRequest:P},P.getAllResponseHeaders&&(se.headers=s(P.getAllResponseHeaders()))):ae=new Error("Internal XMLHttpRequest Error"),g.requestType&&u.responseInterceptorsStorage.getIsEnabled()){var ce={headers:se.headers||{},body:se.body,responseUrl:P.responseURL,responseType:P.responseType},ee=u.responseInterceptorsStorage.execute(g.requestType,ce);se.body=ee.body,se.headers=ee.headers}return C(ae,se,se.body)}}var P=g.xhr||null;P||(g.cors||g.useXDR?P=new u.XDomainRequest:P=new u.XMLHttpRequest);var N,U,B=P.url=g.uri||g.url,A=P.method=g.method||"GET",$=g.body||g.data,W=P.headers=g.headers||{},V=!!g.sync,Q=!1,ie,ne={body:void 0,headers:{},statusCode:0,method:A,url:B,rawRequest:P};if("json"in g&&g.json!==!1&&(Q=!0,W.accept||W.Accept||(W.Accept="application/json"),A!=="GET"&&A!=="HEAD"&&(W["content-type"]||W["Content-Type"]||(W["Content-Type"]="application/json"),$=JSON.stringify(g.json===!0?$:g.json))),P.onreadystatechange=E,P.onload=k,P.onerror=I,P.onprogress=function(){},P.onabort=function(){U=!0,clearTimeout(g.retryTimeout)},P.ontimeout=I,P.open(A,B,!V,g.username,g.password),V||(P.withCredentials=!!g.withCredentials),!V&&g.timeout>0&&(ie=setTimeout(function(){if(!U){U=!0,P.abort("timeout");var ue=new Error("XMLHttpRequest timeout");ue.code="ETIMEDOUT",I(ue)}},g.timeout)),P.setRequestHeader)for(N in W)W.hasOwnProperty(N)&&P.setRequestHeader(N,W[N]);else if(g.headers&&!o(g.headers))throw new Error("Headers cannot be set on an XDomainRequest object");return"responseType"in g&&(P.responseType=g.responseType),"beforeSend"in g&&typeof g.beforeSend=="function"&&g.beforeSend(P),P.send($||null),P}function h(g){try{if(g.responseType==="document")return g.responseXML;var v=g.responseXML&&g.responseXML.documentElement.nodeName==="parsererror";if(g.responseType===""&&!v)return g.responseXML}catch{}return null}function f(){}return Ny.exports}var Nle=Ble();const k5=da(Nle);var fC={exports:{}},pC,m4;function Ule(){if(m4)return pC;m4=1;var r=C5(),e=Object.create||(function(){function B(){}return function(A){if(arguments.length!==1)throw new Error("Object.create shim only accepts one parameter.");return B.prototype=A,new B}})();function t(B,A){this.name="ParsingError",this.code=B.code,this.message=A||B.message}t.prototype=e(Error.prototype),t.prototype.constructor=t,t.Errors={BadSignature:{code:0,message:"Malformed WebVTT signature."},BadTimeStamp:{code:1,message:"Malformed time stamp."}};function n(B){function A(W,V,Q,ie){return(W|0)*3600+(V|0)*60+(Q|0)+(ie|0)/1e3}var $=B.match(/^(\d+):(\d{1,2})(:\d{1,2})?\.(\d{3})/);return $?$[3]?A($[1],$[2],$[3].replace(":",""),$[4]):$[1]>59?A($[1],$[2],0,$[4]):A(0,$[1],$[2],$[4]):null}function i(){this.values=e(null)}i.prototype={set:function(B,A){!this.get(B)&&A!==""&&(this.values[B]=A)},get:function(B,A,$){return $?this.has(B)?this.values[B]:A[$]:this.has(B)?this.values[B]:A},has:function(B){return B in this.values},alt:function(B,A,$){for(var W=0;W<$.length;++W)if(A===$[W]){this.set(B,A);break}},integer:function(B,A){/^-?\d+$/.test(A)&&this.set(B,parseInt(A,10))},percent:function(B,A){return A.match(/^([\d]{1,3})(\.[\d]*)?%$/)&&(A=parseFloat(A),A>=0&&A<=100)?(this.set(B,A),!0):!1}};function s(B,A,$,W){var V=W?B.split(W):[B];for(var Q in V)if(typeof V[Q]=="string"){var ie=V[Q].split($);if(ie.length===2){var ne=ie[0].trim(),ue=ie[1].trim();A(ne,ue)}}}function a(B,A,$){var W=B;function V(){var ne=n(B);if(ne===null)throw new t(t.Errors.BadTimeStamp,"Malformed timestamp: "+W);return B=B.replace(/^[^\sa-zA-Z-]+/,""),ne}function Q(ne,ue){var se=new i;s(ne,function(ae,ce){switch(ae){case"region":for(var ee=$.length-1;ee>=0;ee--)if($[ee].id===ce){se.set(ae,$[ee].region);break}break;case"vertical":se.alt(ae,ce,["rl","lr"]);break;case"line":var pe=ce.split(","),me=pe[0];se.integer(ae,me),se.percent(ae,me)&&se.set("snapToLines",!1),se.alt(ae,me,["auto"]),pe.length===2&&se.alt("lineAlign",pe[1],["start","center","end"]);break;case"position":pe=ce.split(","),se.percent(ae,pe[0]),pe.length===2&&se.alt("positionAlign",pe[1],["start","center","end"]);break;case"size":se.percent(ae,ce);break;case"align":se.alt(ae,ce,["start","center","end","left","right"]);break}},/:/,/\s/),ue.region=se.get("region",null),ue.vertical=se.get("vertical","");try{ue.line=se.get("line","auto")}catch{}ue.lineAlign=se.get("lineAlign","start"),ue.snapToLines=se.get("snapToLines",!0),ue.size=se.get("size",100);try{ue.align=se.get("align","center")}catch{ue.align=se.get("align","middle")}try{ue.position=se.get("position","auto")}catch{ue.position=se.get("position",{start:0,left:0,center:50,middle:50,end:100,right:100},ue.align)}ue.positionAlign=se.get("positionAlign",{start:"start",left:"start",center:"center",middle:"center",end:"end",right:"end"},ue.align)}function ie(){B=B.replace(/^\s+/,"")}if(ie(),A.startTime=V(),ie(),B.substr(0,3)!=="-->")throw new t(t.Errors.BadTimeStamp,"Malformed time stamp (time stamps must be separated by '-->'): "+W);B=B.substr(3),ie(),A.endTime=V(),ie(),Q(B,A)}var o=r.createElement&&r.createElement("textarea"),l={c:"span",i:"i",b:"b",u:"u",ruby:"ruby",rt:"rt",v:"span",lang:"span"},u={white:"rgba(255,255,255,1)",lime:"rgba(0,255,0,1)",cyan:"rgba(0,255,255,1)",red:"rgba(255,0,0,1)",yellow:"rgba(255,255,0,1)",magenta:"rgba(255,0,255,1)",blue:"rgba(0,0,255,1)",black:"rgba(0,0,0,1)"},c={v:"title",lang:"lang"},h={rt:"ruby"};function f(B,A){function $(){if(!A)return null;function me(Oe){return A=A.substr(Oe.length),Oe}var ye=A.match(/^([^<]*)(<[^>]*>?)?/);return me(ye[1]?ye[1]:ye[2])}function W(me){return o.innerHTML=me,me=o.textContent,o.textContent="",me}function V(me,ye){return!h[ye.localName]||h[ye.localName]===me.localName}function Q(me,ye){var Oe=l[me];if(!Oe)return null;var Le=B.document.createElement(Oe),st=c[me];return st&&ye&&(Le[st]=ye.trim()),Le}for(var ie=B.document.createElement("div"),ne=ie,ue,se=[];(ue=$())!==null;){if(ue[0]==="<"){if(ue[1]==="/"){se.length&&se[se.length-1]===ue.substr(2).replace(">","")&&(se.pop(),ne=ne.parentNode);continue}var ae=n(ue.substr(1,ue.length-2)),ce;if(ae){ce=B.document.createProcessingInstruction("timestamp",ae),ne.appendChild(ce);continue}var ee=ue.match(/^<([^.\s/0-9>]+)(\.[^\s\\>]+)?([^>\\]+)?(\\?)>?$/);if(!ee||(ce=Q(ee[1],ee[3]),!ce)||!V(ne,ce))continue;if(ee[2]){var pe=ee[2].split(".");pe.forEach(function(me){var ye=/^bg_/.test(me),Oe=ye?me.slice(3):me;if(u.hasOwnProperty(Oe)){var Le=ye?"background-color":"color",st=u[Oe];ce.style[Le]=st}}),ce.className=pe.join(" ")}se.push(ee[1]),ne.appendChild(ce),ne=ce;continue}ne.appendChild(B.document.createTextNode(W(ue)))}return ie}var g=[[1470,1470],[1472,1472],[1475,1475],[1478,1478],[1488,1514],[1520,1524],[1544,1544],[1547,1547],[1549,1549],[1563,1563],[1566,1610],[1645,1647],[1649,1749],[1765,1766],[1774,1775],[1786,1805],[1807,1808],[1810,1839],[1869,1957],[1969,1969],[1984,2026],[2036,2037],[2042,2042],[2048,2069],[2074,2074],[2084,2084],[2088,2088],[2096,2110],[2112,2136],[2142,2142],[2208,2208],[2210,2220],[8207,8207],[64285,64285],[64287,64296],[64298,64310],[64312,64316],[64318,64318],[64320,64321],[64323,64324],[64326,64449],[64467,64829],[64848,64911],[64914,64967],[65008,65020],[65136,65140],[65142,65276],[67584,67589],[67592,67592],[67594,67637],[67639,67640],[67644,67644],[67647,67669],[67671,67679],[67840,67867],[67872,67897],[67903,67903],[67968,68023],[68030,68031],[68096,68096],[68112,68115],[68117,68119],[68121,68147],[68160,68167],[68176,68184],[68192,68223],[68352,68405],[68416,68437],[68440,68466],[68472,68479],[68608,68680],[126464,126467],[126469,126495],[126497,126498],[126500,126500],[126503,126503],[126505,126514],[126516,126519],[126521,126521],[126523,126523],[126530,126530],[126535,126535],[126537,126537],[126539,126539],[126541,126543],[126545,126546],[126548,126548],[126551,126551],[126553,126553],[126555,126555],[126557,126557],[126559,126559],[126561,126562],[126564,126564],[126567,126570],[126572,126578],[126580,126583],[126585,126588],[126590,126590],[126592,126601],[126603,126619],[126625,126627],[126629,126633],[126635,126651],[1114109,1114109]];function v(B){for(var A=0;A<g.length;A++){var $=g[A];if(B>=$[0]&&B<=$[1])return!0}return!1}function y(B){var A=[],$="",W;if(!B||!B.childNodes)return"ltr";function V(ne,ue){for(var se=ue.childNodes.length-1;se>=0;se--)ne.push(ue.childNodes[se])}function Q(ne){if(!ne||!ne.length)return null;var ue=ne.pop(),se=ue.textContent||ue.innerText;if(se){var ae=se.match(/^.*(\n|\r)/);return ae?(ne.length=0,ae[0]):se}if(ue.tagName==="ruby")return Q(ne);if(ue.childNodes)return V(ne,ue),Q(ne)}for(V(A,B);$=Q(A);)for(var ie=0;ie<$.length;ie++)if(W=$.charCodeAt(ie),v(W))return"rtl";return"ltr"}function _(B){if(typeof B.line=="number"&&(B.snapToLines||B.line>=0&&B.line<=100))return B.line;if(!B.track||!B.track.textTrackList||!B.track.textTrackList.mediaElement)return-1;for(var A=B.track,$=A.textTrackList,W=0,V=0;V<$.length&&$[V]!==A;V++)$[V].mode==="showing"&&W++;return++W*-1}function C(){}C.prototype.applyStyles=function(B,A){A=A||this.div;for(var $ in B)B.hasOwnProperty($)&&(A.style[$]=B[$])},C.prototype.formatStyle=function(B,A){return B===0?0:B+A};function E(B,A,$){C.call(this),this.cue=A,this.cueDiv=f(B,A.text);var W={color:"rgba(255, 255, 255, 1)",backgroundColor:"rgba(0, 0, 0, 0.8)",position:"relative",left:0,right:0,top:0,bottom:0,display:"inline",writingMode:A.vertical===""?"horizontal-tb":A.vertical==="lr"?"vertical-lr":"vertical-rl",unicodeBidi:"plaintext"};this.applyStyles(W,this.cueDiv),this.div=B.document.createElement("div"),W={direction:y(this.cueDiv),writingMode:A.vertical===""?"horizontal-tb":A.vertical==="lr"?"vertical-lr":"vertical-rl",unicodeBidi:"plaintext",textAlign:A.align==="middle"?"center":A.align,font:$.font,whiteSpace:"pre-line",position:"absolute"},this.applyStyles(W),this.div.appendChild(this.cueDiv);var V=0;switch(A.positionAlign){case"start":case"line-left":V=A.position;break;case"center":V=A.position-A.size/2;break;case"end":case"line-right":V=A.position-A.size;break}A.vertical===""?this.applyStyles({left:this.formatStyle(V,"%"),width:this.formatStyle(A.size,"%")}):this.applyStyles({top:this.formatStyle(V,"%"),height:this.formatStyle(A.size,"%")}),this.move=function(Q){this.applyStyles({top:this.formatStyle(Q.top,"px"),bottom:this.formatStyle(Q.bottom,"px"),left:this.formatStyle(Q.left,"px"),right:this.formatStyle(Q.right,"px"),height:this.formatStyle(Q.height,"px"),width:this.formatStyle(Q.width,"px")})}}E.prototype=e(C.prototype),E.prototype.constructor=E;function D(B){var A,$,W,V;if(B.div){$=B.div.offsetHeight,W=B.div.offsetWidth,V=B.div.offsetTop;var Q=(Q=B.div.childNodes)&&(Q=Q[0])&&Q.getClientRects&&Q.getClientRects();B=B.div.getBoundingClientRect(),A=Q?Math.max(Q[0]&&Q[0].height||0,B.height/Q.length):0}this.left=B.left,this.right=B.right,this.top=B.top||V,this.height=B.height||$,this.bottom=B.bottom||V+(B.height||$),this.width=B.width||W,this.lineHeight=A!==void 0?A:B.lineHeight}D.prototype.move=function(B,A){switch(A=A!==void 0?A:this.lineHeight,B){case"+x":this.left+=A,this.right+=A;break;case"-x":this.left-=A,this.right-=A;break;case"+y":this.top+=A,this.bottom+=A;break;case"-y":this.top-=A,this.bottom-=A;break}},D.prototype.overlaps=function(B){return this.left<B.right&&this.right>B.left&&this.top<B.bottom&&this.bottom>B.top},D.prototype.overlapsAny=function(B){for(var A=0;A<B.length;A++)if(this.overlaps(B[A]))return!0;return!1},D.prototype.within=function(B){return this.top>=B.top&&this.bottom<=B.bottom&&this.left>=B.left&&this.right<=B.right},D.prototype.overlapsOppositeAxis=function(B,A){switch(A){case"+x":return this.left<B.left;case"-x":return this.right>B.right;case"+y":return this.top<B.top;case"-y":return this.bottom>B.bottom}},D.prototype.intersectPercentage=function(B){var A=Math.max(0,Math.min(this.right,B.right)-Math.max(this.left,B.left)),$=Math.max(0,Math.min(this.bottom,B.bottom)-Math.max(this.top,B.top)),W=A*$;return W/(this.height*this.width)},D.prototype.toCSSCompatValues=function(B){return{top:this.top-B.top,bottom:B.bottom-this.bottom,left:this.left-B.left,right:B.right-this.right,height:this.height,width:this.width}},D.getSimpleBoxPosition=function(B){var A=B.div?B.div.offsetHeight:B.tagName?B.offsetHeight:0,$=B.div?B.div.offsetWidth:B.tagName?B.offsetWidth:0,W=B.div?B.div.offsetTop:B.tagName?B.offsetTop:0;B=B.div?B.div.getBoundingClientRect():B.tagName?B.getBoundingClientRect():B;var V={left:B.left,right:B.right,top:B.top||W,height:B.height||A,bottom:B.bottom||W+(B.height||A),width:B.width||$};return V};function I(B,A,$,W){function V(Oe,Le){for(var st,ze=new D(Oe),pt=1,Ye=0;Ye<Le.length;Ye++){for(;Oe.overlapsOppositeAxis($,Le[Ye])||Oe.within($)&&Oe.overlapsAny(W);)Oe.move(Le[Ye]);if(Oe.within($))return Oe;var Pt=Oe.intersectPercentage($);pt>Pt&&(st=new D(Oe),pt=Pt),Oe=new D(ze)}return st||ze}var Q=new D(A),ie=A.cue,ne=_(ie),ue=[];if(ie.snapToLines){var se;switch(ie.vertical){case"":ue=["+y","-y"],se="height";break;case"rl":ue=["+x","-x"],se="width";break;case"lr":ue=["-x","+x"],se="width";break}var ae=Q.lineHeight,ce=ae*Math.round(ne),ee=$[se]+ae,pe=ue[0];Math.abs(ce)>ee&&(ce=ce<0?-1:1,ce*=Math.ceil(ee/ae)*ae),ne<0&&(ce+=ie.vertical===""?$.height:$.width,ue=ue.reverse()),Q.move(pe,ce)}else{var me=Q.lineHeight/$.height*100;switch(ie.lineAlign){case"center":ne-=me/2;break;case"end":ne-=me;break}switch(ie.vertical){case"":A.applyStyles({top:A.formatStyle(ne,"%")});break;case"rl":A.applyStyles({left:A.formatStyle(ne,"%")});break;case"lr":A.applyStyles({right:A.formatStyle(ne,"%")});break}ue=["+y","-x","+x","-y"],Q=new D(A)}var ye=V(Q,ue);A.move(ye.toCSSCompatValues($))}function k(){}k.StringDecoder=function(){return{decode:function(B){if(!B)return"";if(typeof B!="string")throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(B))}}},k.convertCueToDOMTree=function(B,A){return!B||!A?null:f(B,A)};var P=.05,N="sans-serif",U="1.5%";return k.processCues=function(B,A,$){if(!B||!A||!$)return null;for(;$.firstChild;)$.removeChild($.firstChild);var W=B.document.createElement("div");W.style.position="absolute",W.style.left="0",W.style.right="0",W.style.top="0",W.style.bottom="0",W.style.margin=U,$.appendChild(W);function V(ae){for(var ce=0;ce<ae.length;ce++)if(ae[ce].hasBeenReset||!ae[ce].displayState)return!0;return!1}if(!V(A)){for(var Q=0;Q<A.length;Q++)W.appendChild(A[Q].displayState);return}var ie=[],ne=D.getSimpleBoxPosition(W),ue=Math.round(ne.height*P*100)/100,se={font:ue+"px "+N};(function(){for(var ae,ce,ee=0;ee<A.length;ee++)ce=A[ee],ae=new E(B,ce,se),W.appendChild(ae.div),I(B,ae,ne,ie),ce.displayState=ae.div,ie.push(D.getSimpleBoxPosition(ae))})()},k.Parser=function(B,A,$){$||($=A,A={}),A||(A={}),this.window=B,this.vttjs=A,this.state="INITIAL",this.buffer="",this.decoder=$||new TextDecoder("utf8"),this.regionList=[]},k.Parser.prototype={reportOrThrowError:function(B){if(B instanceof t)this.onparsingerror&&this.onparsingerror(B);else throw B},parse:function(B){var A=this;B&&(A.buffer+=A.decoder.decode(B,{stream:!0}));function $(){for(var ae=A.buffer,ce=0;ce<ae.length&&ae[ce]!=="\r"&&ae[ce]!==`
`;)++ce;var ee=ae.substr(0,ce);return ae[ce]==="\r"&&++ce,ae[ce]===`
`&&++ce,A.buffer=ae.substr(ce),ee}function W(ae){var ce=new i;if(s(ae,function(pe,me){switch(pe){case"id":ce.set(pe,me);break;case"width":ce.percent(pe,me);break;case"lines":ce.integer(pe,me);break;case"regionanchor":case"viewportanchor":var ye=me.split(",");if(ye.length!==2)break;var Oe=new i;if(Oe.percent("x",ye[0]),Oe.percent("y",ye[1]),!Oe.has("x")||!Oe.has("y"))break;ce.set(pe+"X",Oe.get("x")),ce.set(pe+"Y",Oe.get("y"));break;case"scroll":ce.alt(pe,me,["up"]);break}},/=/,/\s/),ce.has("id")){var ee=new(A.vttjs.VTTRegion||A.window.VTTRegion);ee.width=ce.get("width",100),ee.lines=ce.get("lines",3),ee.regionAnchorX=ce.get("regionanchorX",0),ee.regionAnchorY=ce.get("regionanchorY",100),ee.viewportAnchorX=ce.get("viewportanchorX",0),ee.viewportAnchorY=ce.get("viewportanchorY",100),ee.scroll=ce.get("scroll",""),A.onregion&&A.onregion(ee),A.regionList.push({id:ce.get("id"),region:ee})}}function V(ae){var ce=new i;s(ae,function(ee,pe){switch(ee){case"MPEGT":ce.integer(ee+"S",pe);break;case"LOCA":ce.set(ee+"L",n(pe));break}},/[^\d]:/,/,/),A.ontimestampmap&&A.ontimestampmap({MPEGTS:ce.get("MPEGTS"),LOCAL:ce.get("LOCAL")})}function Q(ae){ae.match(/X-TIMESTAMP-MAP/)?s(ae,function(ce,ee){switch(ce){case"X-TIMESTAMP-MAP":V(ee);break}},/=/):s(ae,function(ce,ee){switch(ce){case"Region":W(ee);break}},/:/)}try{var ie;if(A.state==="INITIAL"){if(!/\r\n|\n/.test(A.buffer))return this;ie=$();var ne=ie.match(/^WEBVTT([ \t].*)?$/);if(!ne||!ne[0])throw new t(t.Errors.BadSignature);A.state="HEADER"}for(var ue=!1;A.buffer;){if(!/\r\n|\n/.test(A.buffer))return this;switch(ue?ue=!1:ie=$(),A.state){case"HEADER":/:/.test(ie)?Q(ie):ie||(A.state="ID");continue;case"NOTE":ie||(A.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(ie)){A.state="NOTE";break}if(!ie)continue;A.cue=new(A.vttjs.VTTCue||A.window.VTTCue)(0,0,"");try{A.cue.align="center"}catch{A.cue.align="middle"}if(A.state="CUE",ie.indexOf("-->")===-1){A.cue.id=ie;continue}case"CUE":try{a(ie,A.cue,A.regionList)}catch(ae){A.reportOrThrowError(ae),A.cue=null,A.state="BADCUE";continue}A.state="CUETEXT";continue;case"CUETEXT":var se=ie.indexOf("-->")!==-1;if(!ie||se&&(ue=!0)){A.oncue&&A.oncue(A.cue),A.cue=null,A.state="ID";continue}A.cue.text&&(A.cue.text+=`
`),A.cue.text+=ie.replace(/\u2028/g,`
`).replace(/u2029/g,`
`);continue;case"BADCUE":ie||(A.state="ID");continue}}}catch(ae){A.reportOrThrowError(ae),A.state==="CUETEXT"&&A.cue&&A.oncue&&A.oncue(A.cue),A.cue=null,A.state=A.state==="INITIAL"?"BADWEBVTT":"BADCUE"}return this},flush:function(){var B=this;try{if(B.buffer+=B.decoder.decode(),(B.cue||B.state==="HEADER")&&(B.buffer+=`

`,B.parse()),B.state==="INITIAL")throw new t(t.Errors.BadSignature)}catch(A){B.reportOrThrowError(A)}return B.onflush&&B.onflush(),this}},pC=k,pC}var mC,g4;function $le(){if(g4)return mC;g4=1;var r="auto",e={"":1,lr:1,rl:1},t={start:1,center:1,end:1,left:1,right:1,auto:1,"line-left":1,"line-right":1};function n(a){if(typeof a!="string")return!1;var o=e[a.toLowerCase()];return o?a.toLowerCase():!1}function i(a){if(typeof a!="string")return!1;var o=t[a.toLowerCase()];return o?a.toLowerCase():!1}function s(a,o,l){this.hasBeenReset=!1;var u="",c=!1,h=a,f=o,g=l,v=null,y="",_=!0,C="auto",E="start",D="auto",I="auto",k=100,P="center";Object.defineProperties(this,{id:{enumerable:!0,get:function(){return u},set:function(N){u=""+N}},pauseOnExit:{enumerable:!0,get:function(){return c},set:function(N){c=!!N}},startTime:{enumerable:!0,get:function(){return h},set:function(N){if(typeof N!="number")throw new TypeError("Start time must be set to a number.");h=N,this.hasBeenReset=!0}},endTime:{enumerable:!0,get:function(){return f},set:function(N){if(typeof N!="number")throw new TypeError("End time must be set to a number.");f=N,this.hasBeenReset=!0}},text:{enumerable:!0,get:function(){return g},set:function(N){g=""+N,this.hasBeenReset=!0}},region:{enumerable:!0,get:function(){return v},set:function(N){v=N,this.hasBeenReset=!0}},vertical:{enumerable:!0,get:function(){return y},set:function(N){var U=n(N);if(U===!1)throw new SyntaxError("Vertical: an invalid or illegal direction string was specified.");y=U,this.hasBeenReset=!0}},snapToLines:{enumerable:!0,get:function(){return _},set:function(N){_=!!N,this.hasBeenReset=!0}},line:{enumerable:!0,get:function(){return C},set:function(N){if(typeof N!="number"&&N!==r)throw new SyntaxError("Line: an invalid number or illegal string was specified.");C=N,this.hasBeenReset=!0}},lineAlign:{enumerable:!0,get:function(){return E},set:function(N){var U=i(N);U?(E=U,this.hasBeenReset=!0):console.warn("lineAlign: an invalid or illegal string was specified.")}},position:{enumerable:!0,get:function(){return D},set:function(N){if(N<0||N>100)throw new Error("Position must be between 0 and 100.");D=N,this.hasBeenReset=!0}},positionAlign:{enumerable:!0,get:function(){return I},set:function(N){var U=i(N);U?(I=U,this.hasBeenReset=!0):console.warn("positionAlign: an invalid or illegal string was specified.")}},size:{enumerable:!0,get:function(){return k},set:function(N){if(N<0||N>100)throw new Error("Size must be between 0 and 100.");k=N,this.hasBeenReset=!0}},align:{enumerable:!0,get:function(){return P},set:function(N){var U=i(N);if(!U)throw new SyntaxError("align: an invalid or illegal alignment string was specified.");P=U,this.hasBeenReset=!0}}}),this.displayState=void 0}return s.prototype.getCueAsHTML=function(){return WebVTT.convertCueToDOMTree(window,this.text)},mC=s,mC}var gC,v4;function jle(){if(v4)return gC;v4=1;var r={"":!0,up:!0};function e(i){if(typeof i!="string")return!1;var s=r[i.toLowerCase()];return s?i.toLowerCase():!1}function t(i){return typeof i=="number"&&i>=0&&i<=100}function n(){var i=100,s=3,a=0,o=100,l=0,u=100,c="";Object.defineProperties(this,{width:{enumerable:!0,get:function(){return i},set:function(h){if(!t(h))throw new Error("Width must be between 0 and 100.");i=h}},lines:{enumerable:!0,get:function(){return s},set:function(h){if(typeof h!="number")throw new TypeError("Lines must be set to a number.");s=h}},regionAnchorY:{enumerable:!0,get:function(){return o},set:function(h){if(!t(h))throw new Error("RegionAnchorX must be between 0 and 100.");o=h}},regionAnchorX:{enumerable:!0,get:function(){return a},set:function(h){if(!t(h))throw new Error("RegionAnchorY must be between 0 and 100.");a=h}},viewportAnchorY:{enumerable:!0,get:function(){return u},set:function(h){if(!t(h))throw new Error("ViewportAnchorY must be between 0 and 100.");u=h}},viewportAnchorX:{enumerable:!0,get:function(){return l},set:function(h){if(!t(h))throw new Error("ViewportAnchorX must be between 0 and 100.");l=h}},scroll:{enumerable:!0,get:function(){return c},set:function(h){var f=e(h);f===!1?console.warn("Scroll: an invalid or illegal string was specified."):c=f}}})}return gC=n,gC}var y4;function zle(){if(y4)return fC.exports;y4=1;var r=Tm(),e=fC.exports={WebVTT:Ule(),VTTCue:$le(),VTTRegion:jle()};r.vttjs=e,r.WebVTT=e.WebVTT;var t=e.VTTCue,n=e.VTTRegion,i=r.VTTCue,s=r.VTTRegion;return e.shim=function(){r.VTTCue=t,r.VTTRegion=n},e.restore=function(){r.VTTCue=i,r.VTTRegion=s},r.VTTCue||e.shim(),fC.exports}var Hle=zle();const z_=da(Hle);var x4="https://example.com",pv=function(e,t){if(/^[a-z]+:/i.test(t))return t;/^data:/.test(e)&&(e=X.location&&X.location.href||"");var n=/^\/\//.test(e),i=!X.location&&!/\/\//i.test(e);e=new X.URL(e,X.location||x4);var s=new URL(t,e);return i?s.href.slice(x4.length):n?s.href.slice(s.protocol.length):s.href},Bk=(function(){function r(){this.listeners={}}var e=r.prototype;return e.on=function(n,i){this.listeners[n]||(this.listeners[n]=[]),this.listeners[n].push(i)},e.off=function(n,i){if(!this.listeners[n])return!1;var s=this.listeners[n].indexOf(i);return this.listeners[n]=this.listeners[n].slice(0),this.listeners[n].splice(s,1),s>-1},e.trigger=function(n){var i=this.listeners[n];if(i)if(arguments.length===2)for(var s=i.length,a=0;a<s;++a)i[a].call(this,arguments[1]);else for(var o=Array.prototype.slice.call(arguments,1),l=i.length,u=0;u<l;++u)i[u].apply(this,o)},e.dispose=function(){this.listeners={}},e.pipe=function(n){this.on("data",function(i){n.push(i)})},r})(),Vle=function(e){return X.atob?X.atob(e):Buffer.from(e,"base64").toString("binary")};function A5(r){for(var e=Vle(r),t=new Uint8Array(e.length),n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}/*! @name m3u8-parser @version 7.2.0 @license Apache-2.0 */let Wle=class extends Bk{constructor(){super(),this.buffer=""}push(e){let t;for(this.buffer+=e,t=this.buffer.indexOf(`
`);t>-1;t=this.buffer.indexOf(`
`))this.trigger("data",this.buffer.substring(0,t)),this.buffer=this.buffer.substring(t+1)}};const qle="	",vC=function(r){const e=/([0-9.]*)?@?([0-9.]*)?/.exec(r||""),t={};return e[1]&&(t.length=parseInt(e[1],10)),e[2]&&(t.offset=parseInt(e[2],10)),t},Gle=function(){const t="(?:"+"[^=]*"+")=(?:"+'"[^"]*"|[^,]*'+")";return new RegExp("(?:^|,)("+t+")")},Ys=function(r){const e={};if(!r)return e;const t=r.split(Gle());let n=t.length,i;for(;n--;)t[n]!==""&&(i=/([^=]*)=(.*)/.exec(t[n]).slice(1),i[0]=i[0].replace(/^\s+|\s+$/g,""),i[1]=i[1].replace(/^\s+|\s+$/g,""),i[1]=i[1].replace(/^['"](.*)['"]$/g,"$1"),e[i[0]]=i[1]);return e},_4=r=>{const e=r.split("x"),t={};return e[0]&&(t.width=parseInt(e[0],10)),e[1]&&(t.height=parseInt(e[1],10)),t};let Kle=class extends Bk{constructor(){super(),this.customParsers=[],this.tagMappers=[]}push(e){let t,n;if(e=e.trim(),e.length===0)return;if(e[0]!=="#"){this.trigger("data",{type:"uri",uri:e});return}this.tagMappers.reduce((s,a)=>{const o=a(e);return o===e?s:s.concat([o])},[e]).forEach(s=>{for(let a=0;a<this.customParsers.length;a++)if(this.customParsers[a].call(this,s))return;if(s.indexOf("#EXT")!==0){this.trigger("data",{type:"comment",text:s.slice(1)});return}if(s=s.replace("\r",""),t=/^#EXTM3U/.exec(s),t){this.trigger("data",{type:"tag",tagType:"m3u"});return}if(t=/^#EXTINF:([0-9\.]*)?,?(.*)?$/.exec(s),t){n={type:"tag",tagType:"inf"},t[1]&&(n.duration=parseFloat(t[1])),t[2]&&(n.title=t[2]),this.trigger("data",n);return}if(t=/^#EXT-X-TARGETDURATION:([0-9.]*)?/.exec(s),t){n={type:"tag",tagType:"targetduration"},t[1]&&(n.duration=parseInt(t[1],10)),this.trigger("data",n);return}if(t=/^#EXT-X-VERSION:([0-9.]*)?/.exec(s),t){n={type:"tag",tagType:"version"},t[1]&&(n.version=parseInt(t[1],10)),this.trigger("data",n);return}if(t=/^#EXT-X-MEDIA-SEQUENCE:(\-?[0-9.]*)?/.exec(s),t){n={type:"tag",tagType:"media-sequence"},t[1]&&(n.number=parseInt(t[1],10)),this.trigger("data",n);return}if(t=/^#EXT-X-DISCONTINUITY-SEQUENCE:(\-?[0-9.]*)?/.exec(s),t){n={type:"tag",tagType:"discontinuity-sequence"},t[1]&&(n.number=parseInt(t[1],10)),this.trigger("data",n);return}if(t=/^#EXT-X-PLAYLIST-TYPE:(.*)?$/.exec(s),t){n={type:"tag",tagType:"playlist-type"},t[1]&&(n.playlistType=t[1]),this.trigger("data",n);return}if(t=/^#EXT-X-BYTERANGE:(.*)?$/.exec(s),t){n=sr(vC(t[1]),{type:"tag",tagType:"byterange"}),this.trigger("data",n);return}if(t=/^#EXT-X-ALLOW-CACHE:(YES|NO)?/.exec(s),t){n={type:"tag",tagType:"allow-cache"},t[1]&&(n.allowed=!/NO/.test(t[1])),this.trigger("data",n);return}if(t=/^#EXT-X-MAP:(.*)$/.exec(s),t){if(n={type:"tag",tagType:"map"},t[1]){const a=Ys(t[1]);a.URI&&(n.uri=a.URI),a.BYTERANGE&&(n.byterange=vC(a.BYTERANGE))}this.trigger("data",n);return}if(t=/^#EXT-X-STREAM-INF:(.*)$/.exec(s),t){n={type:"tag",tagType:"stream-inf"},t[1]&&(n.attributes=Ys(t[1]),n.attributes.RESOLUTION&&(n.attributes.RESOLUTION=_4(n.attributes.RESOLUTION)),n.attributes.BANDWIDTH&&(n.attributes.BANDWIDTH=parseInt(n.attributes.BANDWIDTH,10)),n.attributes["FRAME-RATE"]&&(n.attributes["FRAME-RATE"]=parseFloat(n.attributes["FRAME-RATE"])),n.attributes["PROGRAM-ID"]&&(n.attributes["PROGRAM-ID"]=parseInt(n.attributes["PROGRAM-ID"],10))),this.trigger("data",n);return}if(t=/^#EXT-X-MEDIA:(.*)$/.exec(s),t){n={type:"tag",tagType:"media"},t[1]&&(n.attributes=Ys(t[1])),this.trigger("data",n);return}if(t=/^#EXT-X-ENDLIST/.exec(s),t){this.trigger("data",{type:"tag",tagType:"endlist"});return}if(t=/^#EXT-X-DISCONTINUITY/.exec(s),t){this.trigger("data",{type:"tag",tagType:"discontinuity"});return}if(t=/^#EXT-X-PROGRAM-DATE-TIME:(.*)$/.exec(s),t){n={type:"tag",tagType:"program-date-time"},t[1]&&(n.dateTimeString=t[1],n.dateTimeObject=new Date(t[1])),this.trigger("data",n);return}if(t=/^#EXT-X-KEY:(.*)$/.exec(s),t){n={type:"tag",tagType:"key"},t[1]&&(n.attributes=Ys(t[1]),n.attributes.IV&&(n.attributes.IV.substring(0,2).toLowerCase()==="0x"&&(n.attributes.IV=n.attributes.IV.substring(2)),n.attributes.IV=n.attributes.IV.match(/.{8}/g),n.attributes.IV[0]=parseInt(n.attributes.IV[0],16),n.attributes.IV[1]=parseInt(n.attributes.IV[1],16),n.attributes.IV[2]=parseInt(n.attributes.IV[2],16),n.attributes.IV[3]=parseInt(n.attributes.IV[3],16),n.attributes.IV=new Uint32Array(n.attributes.IV))),this.trigger("data",n);return}if(t=/^#EXT-X-START:(.*)$/.exec(s),t){n={type:"tag",tagType:"start"},t[1]&&(n.attributes=Ys(t[1]),n.attributes["TIME-OFFSET"]=parseFloat(n.attributes["TIME-OFFSET"]),n.attributes.PRECISE=/YES/.test(n.attributes.PRECISE)),this.trigger("data",n);return}if(t=/^#EXT-X-CUE-OUT-CONT:(.*)?$/.exec(s),t){n={type:"tag",tagType:"cue-out-cont"},t[1]?n.data=t[1]:n.data="",this.trigger("data",n);return}if(t=/^#EXT-X-CUE-OUT:(.*)?$/.exec(s),t){n={type:"tag",tagType:"cue-out"},t[1]?n.data=t[1]:n.data="",this.trigger("data",n);return}if(t=/^#EXT-X-CUE-IN:?(.*)?$/.exec(s),t){n={type:"tag",tagType:"cue-in"},t[1]?n.data=t[1]:n.data="",this.trigger("data",n);return}if(t=/^#EXT-X-SKIP:(.*)$/.exec(s),t&&t[1]){n={type:"tag",tagType:"skip"},n.attributes=Ys(t[1]),n.attributes.hasOwnProperty("SKIPPED-SEGMENTS")&&(n.attributes["SKIPPED-SEGMENTS"]=parseInt(n.attributes["SKIPPED-SEGMENTS"],10)),n.attributes.hasOwnProperty("RECENTLY-REMOVED-DATERANGES")&&(n.attributes["RECENTLY-REMOVED-DATERANGES"]=n.attributes["RECENTLY-REMOVED-DATERANGES"].split(qle)),this.trigger("data",n);return}if(t=/^#EXT-X-PART:(.*)$/.exec(s),t&&t[1]){n={type:"tag",tagType:"part"},n.attributes=Ys(t[1]),["DURATION"].forEach(function(a){n.attributes.hasOwnProperty(a)&&(n.attributes[a]=parseFloat(n.attributes[a]))}),["INDEPENDENT","GAP"].forEach(function(a){n.attributes.hasOwnProperty(a)&&(n.attributes[a]=/YES/.test(n.attributes[a]))}),n.attributes.hasOwnProperty("BYTERANGE")&&(n.attributes.byterange=vC(n.attributes.BYTERANGE)),this.trigger("data",n);return}if(t=/^#EXT-X-SERVER-CONTROL:(.*)$/.exec(s),t&&t[1]){n={type:"tag",tagType:"server-control"},n.attributes=Ys(t[1]),["CAN-SKIP-UNTIL","PART-HOLD-BACK","HOLD-BACK"].forEach(function(a){n.attributes.hasOwnProperty(a)&&(n.attributes[a]=parseFloat(n.attributes[a]))}),["CAN-SKIP-DATERANGES","CAN-BLOCK-RELOAD"].forEach(function(a){n.attributes.hasOwnProperty(a)&&(n.attributes[a]=/YES/.test(n.attributes[a]))}),this.trigger("data",n);return}if(t=/^#EXT-X-PART-INF:(.*)$/.exec(s),t&&t[1]){n={type:"tag",tagType:"part-inf"},n.attributes=Ys(t[1]),["PART-TARGET"].forEach(function(a){n.attributes.hasOwnProperty(a)&&(n.attributes[a]=parseFloat(n.attributes[a]))}),this.trigger("data",n);return}if(t=/^#EXT-X-PRELOAD-HINT:(.*)$/.exec(s),t&&t[1]){n={type:"tag",tagType:"preload-hint"},n.attributes=Ys(t[1]),["BYTERANGE-START","BYTERANGE-LENGTH"].forEach(function(a){if(n.attributes.hasOwnProperty(a)){n.attributes[a]=parseInt(n.attributes[a],10);const o=a==="BYTERANGE-LENGTH"?"length":"offset";n.attributes.byterange=n.attributes.byterange||{},n.attributes.byterange[o]=n.attributes[a],delete n.attributes[a]}}),this.trigger("data",n);return}if(t=/^#EXT-X-RENDITION-REPORT:(.*)$/.exec(s),t&&t[1]){n={type:"tag",tagType:"rendition-report"},n.attributes=Ys(t[1]),["LAST-MSN","LAST-PART"].forEach(function(a){n.attributes.hasOwnProperty(a)&&(n.attributes[a]=parseInt(n.attributes[a],10))}),this.trigger("data",n);return}if(t=/^#EXT-X-DATERANGE:(.*)$/.exec(s),t&&t[1]){n={type:"tag",tagType:"daterange"},n.attributes=Ys(t[1]),["ID","CLASS"].forEach(function(o){n.attributes.hasOwnProperty(o)&&(n.attributes[o]=String(n.attributes[o]))}),["START-DATE","END-DATE"].forEach(function(o){n.attributes.hasOwnProperty(o)&&(n.attributes[o]=new Date(n.attributes[o]))}),["DURATION","PLANNED-DURATION"].forEach(function(o){n.attributes.hasOwnProperty(o)&&(n.attributes[o]=parseFloat(n.attributes[o]))}),["END-ON-NEXT"].forEach(function(o){n.attributes.hasOwnProperty(o)&&(n.attributes[o]=/YES/i.test(n.attributes[o]))}),["SCTE35-CMD"," SCTE35-OUT","SCTE35-IN"].forEach(function(o){n.attributes.hasOwnProperty(o)&&(n.attributes[o]=n.attributes[o].toString(16))});const a=/^X-([A-Z]+-)+[A-Z]+$/;for(const o in n.attributes){if(!a.test(o))continue;const l=/[0-9A-Fa-f]{6}/g.test(n.attributes[o]),u=/^\d+(\.\d+)?$/.test(n.attributes[o]);n.attributes[o]=l?n.attributes[o].toString(16):u?parseFloat(n.attributes[o]):String(n.attributes[o])}this.trigger("data",n);return}if(t=/^#EXT-X-INDEPENDENT-SEGMENTS/.exec(s),t){this.trigger("data",{type:"tag",tagType:"independent-segments"});return}if(t=/^#EXT-X-I-FRAMES-ONLY/.exec(s),t){this.trigger("data",{type:"tag",tagType:"i-frames-only"});return}if(t=/^#EXT-X-CONTENT-STEERING:(.*)$/.exec(s),t){n={type:"tag",tagType:"content-steering"},n.attributes=Ys(t[1]),this.trigger("data",n);return}if(t=/^#EXT-X-I-FRAME-STREAM-INF:(.*)$/.exec(s),t){n={type:"tag",tagType:"i-frame-playlist"},n.attributes=Ys(t[1]),n.attributes.URI&&(n.uri=n.attributes.URI),n.attributes.BANDWIDTH&&(n.attributes.BANDWIDTH=parseInt(n.attributes.BANDWIDTH,10)),n.attributes.RESOLUTION&&(n.attributes.RESOLUTION=_4(n.attributes.RESOLUTION)),n.attributes["AVERAGE-BANDWIDTH"]&&(n.attributes["AVERAGE-BANDWIDTH"]=parseInt(n.attributes["AVERAGE-BANDWIDTH"],10)),n.attributes["FRAME-RATE"]&&(n.attributes["FRAME-RATE"]=parseFloat(n.attributes["FRAME-RATE"])),this.trigger("data",n);return}if(t=/^#EXT-X-DEFINE:(.*)$/.exec(s),t){n={type:"tag",tagType:"define"},n.attributes=Ys(t[1]),this.trigger("data",n);return}this.trigger("data",{type:"tag",data:s.slice(4)})})}addParser({expression:e,customType:t,dataParser:n,segment:i}){typeof n!="function"&&(n=s=>s),this.customParsers.push(s=>{if(e.exec(s))return this.trigger("data",{type:"custom",data:n(s),customType:t,segment:i}),!0})}addTagMapper({expression:e,map:t}){const n=i=>e.test(i)?t(i):i;this.tagMappers.push(n)}};const Xle=r=>r.toLowerCase().replace(/-(\w)/g,e=>e[1].toUpperCase()),xd=function(r){const e={};return Object.keys(r).forEach(function(t){e[Xle(t)]=r[t]}),e},yC=function(r){const{serverControl:e,targetDuration:t,partTargetDuration:n}=r;if(!e)return;const i="#EXT-X-SERVER-CONTROL",s="holdBack",a="partHoldBack",o=t&&t*3,l=n&&n*2;t&&!e.hasOwnProperty(s)&&(e[s]=o,this.trigger("info",{message:`${i} defaulting HOLD-BACK to targetDuration * 3 (${o}).`})),o&&e[s]<o&&(this.trigger("warn",{message:`${i} clamping HOLD-BACK (${e[s]}) to targetDuration * 3 (${o})`}),e[s]=o),n&&!e.hasOwnProperty(a)&&(e[a]=n*3,this.trigger("info",{message:`${i} defaulting PART-HOLD-BACK to partTargetDuration * 3 (${e[a]}).`})),n&&e[a]<l&&(this.trigger("warn",{message:`${i} clamping PART-HOLD-BACK (${e[a]}) to partTargetDuration * 2 (${l}).`}),e[a]=l)};let D5=class extends Bk{constructor(e={}){super(),this.lineStream=new Wle,this.parseStream=new Kle,this.lineStream.pipe(this.parseStream),this.mainDefinitions=e.mainDefinitions||{},this.params=new URL(e.uri,"https://a.com").searchParams,this.lastProgramDateTime=null;const t=this,n=[];let i={},s,a,o=!1;const l=function(){},u={AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},c="urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed";let h=0;this.manifest={allowCache:!0,discontinuityStarts:[],dateRanges:[],iFramePlaylists:[],segments:[]};let f=0,g=0;const v={};this.on("end",()=>{i.uri||!i.parts&&!i.preloadHints||(!i.map&&s&&(i.map=s),!i.key&&a&&(i.key=a),!i.timeline&&typeof h=="number"&&(i.timeline=h),this.manifest.preloadSegment=i)}),this.parseStream.on("data",function(y){let _,C;if(t.manifest.definitions){for(const E in t.manifest.definitions)if(y.uri&&(y.uri=y.uri.replace(`{$${E}}`,t.manifest.definitions[E])),y.attributes)for(const D in y.attributes)typeof y.attributes[D]=="string"&&(y.attributes[D]=y.attributes[D].replace(`{$${E}}`,t.manifest.definitions[E]))}({tag(){({version(){y.version&&(this.manifest.version=y.version)},"allow-cache"(){this.manifest.allowCache=y.allowed,"allowed"in y||(this.trigger("info",{message:"defaulting allowCache to YES"}),this.manifest.allowCache=!0)},byterange(){const E={};"length"in y&&(i.byterange=E,E.length=y.length,"offset"in y||(y.offset=f)),"offset"in y&&(i.byterange=E,E.offset=y.offset),f=E.offset+E.length},endlist(){this.manifest.endList=!0},inf(){"mediaSequence"in this.manifest||(this.manifest.mediaSequence=0,this.trigger("info",{message:"defaulting media sequence to zero"})),"discontinuitySequence"in this.manifest||(this.manifest.discontinuitySequence=0,this.trigger("info",{message:"defaulting discontinuity sequence to zero"})),y.title&&(i.title=y.title),y.duration>0&&(i.duration=y.duration),y.duration===0&&(i.duration=.01,this.trigger("info",{message:"updating zero segment duration to a small value"})),this.manifest.segments=n},key(){if(!y.attributes){this.trigger("warn",{message:"ignoring key declaration without attribute list"});return}if(y.attributes.METHOD==="NONE"){a=null;return}if(!y.attributes.URI){this.trigger("warn",{message:"ignoring key declaration without URI"});return}if(y.attributes.KEYFORMAT==="com.apple.streamingkeydelivery"){this.manifest.contentProtection=this.manifest.contentProtection||{},this.manifest.contentProtection["com.apple.fps.1_0"]={attributes:y.attributes};return}if(y.attributes.KEYFORMAT==="com.microsoft.playready"){this.manifest.contentProtection=this.manifest.contentProtection||{},this.manifest.contentProtection["com.microsoft.playready"]={uri:y.attributes.URI};return}if(y.attributes.KEYFORMAT===c){if(["SAMPLE-AES","SAMPLE-AES-CTR","SAMPLE-AES-CENC"].indexOf(y.attributes.METHOD)===-1){this.trigger("warn",{message:"invalid key method provided for Widevine"});return}if(y.attributes.METHOD==="SAMPLE-AES-CENC"&&this.trigger("warn",{message:"SAMPLE-AES-CENC is deprecated, please use SAMPLE-AES-CTR instead"}),y.attributes.URI.substring(0,23)!=="data:text/plain;base64,"){this.trigger("warn",{message:"invalid key URI provided for Widevine"});return}if(!(y.attributes.KEYID&&y.attributes.KEYID.substring(0,2)==="0x")){this.trigger("warn",{message:"invalid key ID provided for Widevine"});return}this.manifest.contentProtection=this.manifest.contentProtection||{},this.manifest.contentProtection["com.widevine.alpha"]={attributes:{schemeIdUri:y.attributes.KEYFORMAT,keyId:y.attributes.KEYID.substring(2)},pssh:A5(y.attributes.URI.split(",")[1])};return}y.attributes.METHOD||this.trigger("warn",{message:"defaulting key method to AES-128"}),a={method:y.attributes.METHOD||"AES-128",uri:y.attributes.URI},typeof y.attributes.IV<"u"&&(a.iv=y.attributes.IV)},"media-sequence"(){if(!isFinite(y.number)){this.trigger("warn",{message:"ignoring invalid media sequence: "+y.number});return}this.manifest.mediaSequence=y.number},"discontinuity-sequence"(){if(!isFinite(y.number)){this.trigger("warn",{message:"ignoring invalid discontinuity sequence: "+y.number});return}this.manifest.discontinuitySequence=y.number,h=y.number},"playlist-type"(){if(!/VOD|EVENT/.test(y.playlistType)){this.trigger("warn",{message:"ignoring unknown playlist type: "+y.playlist});return}this.manifest.playlistType=y.playlistType},map(){s={},y.uri&&(s.uri=y.uri),y.byterange&&(s.byterange=y.byterange),a&&(s.key=a)},"stream-inf"(){if(this.manifest.playlists=n,this.manifest.mediaGroups=this.manifest.mediaGroups||u,!y.attributes){this.trigger("warn",{message:"ignoring empty stream-inf attributes"});return}i.attributes||(i.attributes={}),sr(i.attributes,y.attributes)},media(){if(this.manifest.mediaGroups=this.manifest.mediaGroups||u,!(y.attributes&&y.attributes.TYPE&&y.attributes["GROUP-ID"]&&y.attributes.NAME)){this.trigger("warn",{message:"ignoring incomplete or missing media group"});return}const E=this.manifest.mediaGroups[y.attributes.TYPE];E[y.attributes["GROUP-ID"]]=E[y.attributes["GROUP-ID"]]||{},_=E[y.attributes["GROUP-ID"]],C={default:/yes/i.test(y.attributes.DEFAULT)},C.default?C.autoselect=!0:C.autoselect=/yes/i.test(y.attributes.AUTOSELECT),y.attributes.LANGUAGE&&(C.language=y.attributes.LANGUAGE),y.attributes.URI&&(C.uri=y.attributes.URI),y.attributes["INSTREAM-ID"]&&(C.instreamId=y.attributes["INSTREAM-ID"]),y.attributes.CHARACTERISTICS&&(C.characteristics=y.attributes.CHARACTERISTICS),y.attributes.FORCED&&(C.forced=/yes/i.test(y.attributes.FORCED)),_[y.attributes.NAME]=C},discontinuity(){h+=1,i.discontinuity=!0,this.manifest.discontinuityStarts.push(n.length)},"program-date-time"(){typeof this.manifest.dateTimeString>"u"&&(this.manifest.dateTimeString=y.dateTimeString,this.manifest.dateTimeObject=y.dateTimeObject),i.dateTimeString=y.dateTimeString,i.dateTimeObject=y.dateTimeObject;const{lastProgramDateTime:E}=this;this.lastProgramDateTime=new Date(y.dateTimeString).getTime(),E===null&&this.manifest.segments.reduceRight((D,I)=>(I.programDateTime=D-I.duration*1e3,I.programDateTime),this.lastProgramDateTime)},targetduration(){if(!isFinite(y.duration)||y.duration<0){this.trigger("warn",{message:"ignoring invalid target duration: "+y.duration});return}this.manifest.targetDuration=y.duration,yC.call(this,this.manifest)},start(){if(!y.attributes||isNaN(y.attributes["TIME-OFFSET"])){this.trigger("warn",{message:"ignoring start declaration without appropriate attribute list"});return}this.manifest.start={timeOffset:y.attributes["TIME-OFFSET"],precise:y.attributes.PRECISE}},"cue-out"(){i.cueOut=y.data},"cue-out-cont"(){i.cueOutCont=y.data},"cue-in"(){i.cueIn=y.data},skip(){this.manifest.skip=xd(y.attributes),this.warnOnMissingAttributes_("#EXT-X-SKIP",y.attributes,["SKIPPED-SEGMENTS"])},part(){o=!0;const E=this.manifest.segments.length,D=xd(y.attributes);i.parts=i.parts||[],i.parts.push(D),D.byterange&&(D.byterange.hasOwnProperty("offset")||(D.byterange.offset=g),g=D.byterange.offset+D.byterange.length);const I=i.parts.length-1;this.warnOnMissingAttributes_(`#EXT-X-PART #${I} for segment #${E}`,y.attributes,["URI","DURATION"]),this.manifest.renditionReports&&this.manifest.renditionReports.forEach((k,P)=>{k.hasOwnProperty("lastPart")||this.trigger("warn",{message:`#EXT-X-RENDITION-REPORT #${P} lacks required attribute(s): LAST-PART`})})},"server-control"(){const E=this.manifest.serverControl=xd(y.attributes);E.hasOwnProperty("canBlockReload")||(E.canBlockReload=!1,this.trigger("info",{message:"#EXT-X-SERVER-CONTROL defaulting CAN-BLOCK-RELOAD to false"})),yC.call(this,this.manifest),E.canSkipDateranges&&!E.hasOwnProperty("canSkipUntil")&&this.trigger("warn",{message:"#EXT-X-SERVER-CONTROL lacks required attribute CAN-SKIP-UNTIL which is required when CAN-SKIP-DATERANGES is set"})},"preload-hint"(){const E=this.manifest.segments.length,D=xd(y.attributes),I=D.type&&D.type==="PART";i.preloadHints=i.preloadHints||[],i.preloadHints.push(D),D.byterange&&(D.byterange.hasOwnProperty("offset")||(D.byterange.offset=I?g:0,I&&(g=D.byterange.offset+D.byterange.length)));const k=i.preloadHints.length-1;if(this.warnOnMissingAttributes_(`#EXT-X-PRELOAD-HINT #${k} for segment #${E}`,y.attributes,["TYPE","URI"]),!!D.type)for(let P=0;P<i.preloadHints.length-1;P++){const N=i.preloadHints[P];N.type&&N.type===D.type&&this.trigger("warn",{message:`#EXT-X-PRELOAD-HINT #${k} for segment #${E} has the same TYPE ${D.type} as preload hint #${P}`})}},"rendition-report"(){const E=xd(y.attributes);this.manifest.renditionReports=this.manifest.renditionReports||[],this.manifest.renditionReports.push(E);const D=this.manifest.renditionReports.length-1,I=["LAST-MSN","URI"];o&&I.push("LAST-PART"),this.warnOnMissingAttributes_(`#EXT-X-RENDITION-REPORT #${D}`,y.attributes,I)},"part-inf"(){this.manifest.partInf=xd(y.attributes),this.warnOnMissingAttributes_("#EXT-X-PART-INF",y.attributes,["PART-TARGET"]),this.manifest.partInf.partTarget&&(this.manifest.partTargetDuration=this.manifest.partInf.partTarget),yC.call(this,this.manifest)},daterange(){this.manifest.dateRanges.push(xd(y.attributes));const E=this.manifest.dateRanges.length-1;this.warnOnMissingAttributes_(`#EXT-X-DATERANGE #${E}`,y.attributes,["ID","START-DATE"]);const D=this.manifest.dateRanges[E];D.endDate&&D.startDate&&new Date(D.endDate)<new Date(D.startDate)&&this.trigger("warn",{message:"EXT-X-DATERANGE END-DATE must be equal to or later than the value of the START-DATE"}),D.duration&&D.duration<0&&this.trigger("warn",{message:"EXT-X-DATERANGE DURATION must not be negative"}),D.plannedDuration&&D.plannedDuration<0&&this.trigger("warn",{message:"EXT-X-DATERANGE PLANNED-DURATION must not be negative"});const I=!!D.endOnNext;if(I&&!D.class&&this.trigger("warn",{message:"EXT-X-DATERANGE with an END-ON-NEXT=YES attribute must have a CLASS attribute"}),I&&(D.duration||D.endDate)&&this.trigger("warn",{message:"EXT-X-DATERANGE with an END-ON-NEXT=YES attribute must not contain DURATION or END-DATE attributes"}),D.duration&&D.endDate){const P=D.startDate.getTime()+D.duration*1e3;this.manifest.dateRanges[E].endDate=new Date(P)}if(!v[D.id])v[D.id]=D;else{for(const P in v[D.id])if(D[P]&&JSON.stringify(v[D.id][P])!==JSON.stringify(D[P])){this.trigger("warn",{message:"EXT-X-DATERANGE tags with the same ID in a playlist must have the same attributes values"});break}const k=this.manifest.dateRanges.findIndex(P=>P.id===D.id);this.manifest.dateRanges[k]=sr(this.manifest.dateRanges[k],D),v[D.id]=sr(v[D.id],D),this.manifest.dateRanges.pop()}},"independent-segments"(){this.manifest.independentSegments=!0},"i-frames-only"(){this.manifest.iFramesOnly=!0,this.requiredCompatibilityversion(this.manifest.version,4)},"content-steering"(){this.manifest.contentSteering=xd(y.attributes),this.warnOnMissingAttributes_("#EXT-X-CONTENT-STEERING",y.attributes,["SERVER-URI"])},define(){this.manifest.definitions=this.manifest.definitions||{};const E=(D,I)=>{if(D in this.manifest.definitions){this.trigger("error",{message:`EXT-X-DEFINE: Duplicate name ${D}`});return}this.manifest.definitions[D]=I};if("QUERYPARAM"in y.attributes){if("NAME"in y.attributes||"IMPORT"in y.attributes){this.trigger("error",{message:"EXT-X-DEFINE: Invalid attributes"});return}const D=this.params.get(y.attributes.QUERYPARAM);if(!D){this.trigger("error",{message:`EXT-X-DEFINE: No query param ${y.attributes.QUERYPARAM}`});return}E(y.attributes.QUERYPARAM,decodeURIComponent(D));return}if("NAME"in y.attributes){if("IMPORT"in y.attributes){this.trigger("error",{message:"EXT-X-DEFINE: Invalid attributes"});return}if(!("VALUE"in y.attributes)||typeof y.attributes.VALUE!="string"){this.trigger("error",{message:`EXT-X-DEFINE: No value for ${y.attributes.NAME}`});return}E(y.attributes.NAME,y.attributes.VALUE);return}if("IMPORT"in y.attributes){if(!this.mainDefinitions[y.attributes.IMPORT]){this.trigger("error",{message:`EXT-X-DEFINE: No value ${y.attributes.IMPORT} to import, or IMPORT used on main playlist`});return}E(y.attributes.IMPORT,this.mainDefinitions[y.attributes.IMPORT]);return}this.trigger("error",{message:"EXT-X-DEFINE: No attribute"})},"i-frame-playlist"(){this.manifest.iFramePlaylists.push({attributes:y.attributes,uri:y.uri,timeline:h}),this.warnOnMissingAttributes_("#EXT-X-I-FRAME-STREAM-INF",y.attributes,["BANDWIDTH","URI"])}}[y.tagType]||l).call(t)},uri(){i.uri=y.uri,n.push(i),this.manifest.targetDuration&&!("duration"in i)&&(this.trigger("warn",{message:"defaulting segment duration to the target duration"}),i.duration=this.manifest.targetDuration),a&&(i.key=a),i.timeline=h,s&&(i.map=s),g=0,this.lastProgramDateTime!==null&&(i.programDateTime=this.lastProgramDateTime,this.lastProgramDateTime+=i.duration*1e3),i={}},comment(){},custom(){y.segment?(i.custom=i.custom||{},i.custom[y.customType]=y.data):(this.manifest.custom=this.manifest.custom||{},this.manifest.custom[y.customType]=y.data)}})[y.type].call(t)})}requiredCompatibilityversion(e,t){(e<t||!e)&&this.trigger("warn",{message:`manifest must be at least version ${t}`})}warnOnMissingAttributes_(e,t,n){const i=[];n.forEach(function(s){t.hasOwnProperty(s)||i.push(s)}),i.length&&this.trigger("warn",{message:`${e} lacks required attribute(s): ${i.join(", ")}`})}push(e){this.lineStream.push(e)}end(){this.lineStream.push(`
`),this.manifest.dateRanges.length&&this.lastProgramDateTime===null&&this.trigger("warn",{message:"A playlist with EXT-X-DATERANGE tag must contain atleast one EXT-X-PROGRAM-DATE-TIME tag"}),this.lastProgramDateTime=null,this.trigger("end")}addParser(e){this.parseStream.addParser(e)}addTagMapper(e){this.parseStream.addTagMapper(e)}};var Qh={mp4:/^(av0?1|avc0?[1234]|vp0?9|flac|opus|mp3|mp4a|mp4v|stpp.ttml.im1t)/,webm:/^(vp0?[89]|av0?1|opus|vorbis)/,ogg:/^(vp0?[89]|theora|flac|opus|vorbis)/,video:/^(av0?1|avc0?[1234]|vp0?[89]|hvc1|hev1|theora|mp4v)/,audio:/^(mp4a|flac|vorbis|opus|ac-[34]|ec-3|alac|mp3|speex|aac)/,text:/^(stpp.ttml.im1t)/,muxerVideo:/^(avc0?1)/,muxerAudio:/^(mp4a)/,muxerText:/a^/},Yle=["video","audio","text"],b4=["Video","Audio","Text"],Nk=function(e){return e&&e.replace(/avc1\.(\d+)\.(\d+)/i,function(t,n,i){var s=("00"+Number(n).toString(16)).slice(-2),a=("00"+Number(i).toString(16)).slice(-2);return"avc1."+s+"00"+a})},Ni=function(e){e===void 0&&(e="");var t=e.split(","),n=[];return t.forEach(function(i){i=i.trim();var s;Yle.forEach(function(a){var o=Qh[a].exec(i.toLowerCase());if(!(!o||o.length<=1)){s=a;var l=i.substring(0,o[1].length),u=i.replace(l,"");n.push({type:l,details:u,mediaType:a})}}),s||n.push({type:i,details:"",mediaType:"unknown"})}),n},I5=function(e,t){if(!e.mediaGroups.AUDIO||!t)return null;var n=e.mediaGroups.AUDIO[t];if(!n)return null;for(var i in n){var s=n[i];if(s.default&&s.playlists)return Ni(s.playlists[0].attributes.CODECS)}return null},Uk=function(e){return e===void 0&&(e=""),Qh.audio.test(e.trim().toLowerCase())},Qle=function(e){return e===void 0&&(e=""),Qh.text.test(e.trim().toLowerCase())},Nu=function(e){if(!(!e||typeof e!="string")){var t=e.toLowerCase().split(",").map(function(s){return Nk(s.trim())}),n="video";t.length===1&&Uk(t[0])?n="audio":t.length===1&&Qle(t[0])&&(n="application");var i="mp4";return t.every(function(s){return Qh.mp4.test(s)})?i="mp4":t.every(function(s){return Qh.webm.test(s)})?i="webm":t.every(function(s){return Qh.ogg.test(s)})&&(i="ogg"),n+"/"+i+';codecs="'+e+'"'}},Lu=function(e,t){return e===void 0&&(e=""),t===void 0&&(t=!1),X.MediaSource&&X.MediaSource.isTypeSupported&&X.MediaSource.isTypeSupported(Nu(e))||t&&X.ManagedMediaSource&&X.ManagedMediaSource.isTypeSupported&&X.ManagedMediaSource.isTypeSupported(Nu(e))||!1},Ep=function(e){return e===void 0&&(e=""),e.toLowerCase().split(",").every(function(t){t=t.trim();for(var n=0;n<b4.length;n++){var i=b4[n];if(Qh["muxer"+i].test(t))return!0}return!1})},H_="mp4a.40.2",P5="avc1.4d400d",Jle=/^(audio|video|application)\/(x-|vnd\.apple\.)?mpegurl/i,Zle=/^application\/dash\+xml/i,ES=function(e){return Jle.test(e)?"hls":Zle.test(e)?"dash":e==="application/vnd.videojs.vhs+json"?"vhs-json":null},eue=function(e){return e.toString(2).length},tue=function(e){return Math.ceil(eue(e)/8)},$k=function(e){return ArrayBuffer.isView==="function"?ArrayBuffer.isView(e):e&&e.buffer instanceof ArrayBuffer},rue=function(e){return $k(e)},_r=function(e){return e instanceof Uint8Array?e:(!Array.isArray(e)&&!rue(e)&&!(e instanceof ArrayBuffer)&&(typeof e!="number"||typeof e=="number"&&e!==e?e=0:e=[e]),new Uint8Array(e&&e.buffer||e,e&&e.byteOffset||0,e&&e.byteLength||0))},gs=X.BigInt||Number,f2=[gs("0x1"),gs("0x100"),gs("0x10000"),gs("0x1000000"),gs("0x100000000"),gs("0x10000000000"),gs("0x1000000000000"),gs("0x100000000000000"),gs("0x10000000000000000")];(function(){var r=new Uint16Array([65484]),e=new Uint8Array(r.buffer,r.byteOffset,r.byteLength);return e[0]===255?"big":e[0]===204?"little":"unknown"})();var nue=function(e,t){var n=t===void 0?{}:t,i=n.signed,s=i===void 0?!1:i,a=n.le,o=a===void 0?!1:a;e=_r(e);var l=o?"reduce":"reduceRight",u=e[l]?e[l]:Array.prototype[l],c=u.call(e,function(f,g,v){var y=o?v:Math.abs(v+1-e.length);return f+gs(g)*f2[y]},gs(0));if(s){var h=f2[e.length]/gs(2)-gs(1);c=gs(c),c>h&&(c-=h,c-=h,c-=gs(2))}return Number(c)},iue=function(e,t){var n={},i=n.le,s=i===void 0?!1:i;(typeof e!="bigint"&&typeof e!="number"||typeof e=="number"&&e!==e)&&(e=0),e=gs(e);for(var a=tue(e),o=new Uint8Array(new ArrayBuffer(a)),l=0;l<a;l++){var u=s?l:Math.abs(l+1-o.length);o[u]=Number(e/f2[l]&gs(255)),e<0&&(o[u]=Math.abs(~o[u]),o[u]-=l===0?1:2)}return o},jk=function(e,t){if(typeof e!="string"&&e&&typeof e.toString=="function"&&(e=e.toString()),typeof e!="string")return new Uint8Array;t||(e=unescape(encodeURIComponent(e)));for(var n=new Uint8Array(e.length),i=0;i<e.length;i++)n[i]=e.charCodeAt(i);return n},R5=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(t=t.filter(function(o){return o&&(o.byteLength||o.length)&&typeof o!="string"}),t.length<=1)return _r(t[0]);var i=t.reduce(function(o,l,u){return o+(l.byteLength||l.length)},0),s=new Uint8Array(i),a=0;return t.forEach(function(o){o=_r(o),s.set(o,a),a+=o.byteLength}),s},Qn=function(e,t,n){var i=n===void 0?{}:n,s=i.offset,a=s===void 0?0:s,o=i.mask,l=o===void 0?[]:o;e=_r(e),t=_r(t);var u=t.every?t.every:Array.prototype.every;return t.length&&e.length-a>=t.length&&u.call(t,function(c,h){var f=l[h]?l[h]&e[a+h]:e[a+h];return c===f})},sue=function(e,t,n){t.forEach(function(i){for(var s in e.mediaGroups[i])for(var a in e.mediaGroups[i][s]){var o=e.mediaGroups[i][s][a];n(o,i,s,a)}})},A0={},xc={},Ah={},S4;function kS(){if(S4)return Ah;S4=1;function r(s,a,o){if(o===void 0&&(o=Array.prototype),s&&typeof o.find=="function")return o.find.call(s,a);for(var l=0;l<s.length;l++)if(Object.prototype.hasOwnProperty.call(s,l)){var u=s[l];if(a.call(void 0,u,l,s))return u}}function e(s,a){return a===void 0&&(a=Object),a&&typeof a.freeze=="function"?a.freeze(s):s}function t(s,a){if(s===null||typeof s!="object")throw new TypeError("target is not an object");for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(s[o]=a[o]);return s}var n=e({HTML:"text/html",isHTML:function(s){return s===n.HTML},XML_APPLICATION:"application/xml",XML_TEXT:"text/xml",XML_XHTML_APPLICATION:"application/xhtml+xml",XML_SVG_IMAGE:"image/svg+xml"}),i=e({HTML:"http://www.w3.org/1999/xhtml",isHTML:function(s){return s===i.HTML},SVG:"http://www.w3.org/2000/svg",XML:"http://www.w3.org/XML/1998/namespace",XMLNS:"http://www.w3.org/2000/xmlns/"});return Ah.assign=t,Ah.find=r,Ah.freeze=e,Ah.MIME_TYPE=n,Ah.NAMESPACE=i,Ah}var T4;function L5(){if(T4)return xc;T4=1;var r=kS(),e=r.find,t=r.NAMESPACE;function n(oe){return oe!==""}function i(oe){return oe?oe.split(/[\t\n\f\r ]+/).filter(n):[]}function s(oe,fe){return oe.hasOwnProperty(fe)||(oe[fe]=!0),oe}function a(oe){if(!oe)return[];var fe=i(oe);return Object.keys(fe.reduce(s,{}))}function o(oe){return function(fe){return oe&&oe.indexOf(fe)!==-1}}function l(oe,fe){for(var Te in oe)Object.prototype.hasOwnProperty.call(oe,Te)&&(fe[Te]=oe[Te])}function u(oe,fe){var Te=oe.prototype;if(!(Te instanceof fe)){let mt=function(){};var je=mt;mt.prototype=fe.prototype,mt=new mt,l(Te,mt),oe.prototype=Te=mt}Te.constructor!=oe&&(typeof oe!="function"&&console.error("unknown Class:"+oe),Te.constructor=oe)}var c={},h=c.ELEMENT_NODE=1,f=c.ATTRIBUTE_NODE=2,g=c.TEXT_NODE=3,v=c.CDATA_SECTION_NODE=4,y=c.ENTITY_REFERENCE_NODE=5,_=c.ENTITY_NODE=6,C=c.PROCESSING_INSTRUCTION_NODE=7,E=c.COMMENT_NODE=8,D=c.DOCUMENT_NODE=9,I=c.DOCUMENT_TYPE_NODE=10,k=c.DOCUMENT_FRAGMENT_NODE=11,P=c.NOTATION_NODE=12,N={},U={};N.INDEX_SIZE_ERR=(U[1]="Index size error",1),N.DOMSTRING_SIZE_ERR=(U[2]="DOMString size error",2);var B=N.HIERARCHY_REQUEST_ERR=(U[3]="Hierarchy request error",3);N.WRONG_DOCUMENT_ERR=(U[4]="Wrong document",4),N.INVALID_CHARACTER_ERR=(U[5]="Invalid character",5),N.NO_DATA_ALLOWED_ERR=(U[6]="No data allowed",6),N.NO_MODIFICATION_ALLOWED_ERR=(U[7]="No modification allowed",7);var A=N.NOT_FOUND_ERR=(U[8]="Not found",8);N.NOT_SUPPORTED_ERR=(U[9]="Not supported",9);var $=N.INUSE_ATTRIBUTE_ERR=(U[10]="Attribute in use",10);N.INVALID_STATE_ERR=(U[11]="Invalid state",11),N.SYNTAX_ERR=(U[12]="Syntax error",12),N.INVALID_MODIFICATION_ERR=(U[13]="Invalid modification",13),N.NAMESPACE_ERR=(U[14]="Invalid namespace",14),N.INVALID_ACCESS_ERR=(U[15]="Invalid access",15);function W(oe,fe){if(fe instanceof Error)var Te=fe;else Te=this,Error.call(this,U[oe]),this.message=U[oe],Error.captureStackTrace&&Error.captureStackTrace(this,W);return Te.code=oe,fe&&(this.message=this.message+": "+fe),Te}W.prototype=Error.prototype,l(N,W);function V(){}V.prototype={length:0,item:function(oe){return oe>=0&&oe<this.length?this[oe]:null},toString:function(oe,fe){for(var Te=[],je=0;je<this.length;je++)Hr(this[je],Te,oe,fe);return Te.join("")},filter:function(oe){return Array.prototype.filter.call(this,oe)},indexOf:function(oe){return Array.prototype.indexOf.call(this,oe)}};function Q(oe,fe){this._node=oe,this._refresh=fe,ie(this)}function ie(oe){var fe=oe._node._inc||oe._node.ownerDocument._inc;if(oe._inc!==fe){var Te=oe._refresh(oe._node);if(wn(oe,"length",Te.length),!oe.$$length||Te.length<oe.$$length)for(var je=Te.length;je in oe;je++)Object.prototype.hasOwnProperty.call(oe,je)&&delete oe[je];l(Te,oe),oe._inc=fe}}Q.prototype.item=function(oe){return ie(this),this[oe]||null},u(Q,V);function ne(){}function ue(oe,fe){for(var Te=oe.length;Te--;)if(oe[Te]===fe)return Te}function se(oe,fe,Te,je){if(je?fe[ue(fe,je)]=Te:fe[fe.length++]=Te,oe){Te.ownerElement=oe;var mt=oe.ownerDocument;mt&&(je&&Le(mt,oe,je),Oe(mt,oe,Te))}}function ae(oe,fe,Te){var je=ue(fe,Te);if(je>=0){for(var mt=fe.length-1;je<mt;)fe[je]=fe[++je];if(fe.length=mt,oe){var St=oe.ownerDocument;St&&(Le(St,oe,Te),Te.ownerElement=null)}}else throw new W(A,new Error(oe.tagName+"@"+Te))}ne.prototype={length:0,item:V.prototype.item,getNamedItem:function(oe){for(var fe=this.length;fe--;){var Te=this[fe];if(Te.nodeName==oe)return Te}},setNamedItem:function(oe){var fe=oe.ownerElement;if(fe&&fe!=this._ownerElement)throw new W($);var Te=this.getNamedItem(oe.nodeName);return se(this._ownerElement,this,oe,Te),Te},setNamedItemNS:function(oe){var fe=oe.ownerElement,Te;if(fe&&fe!=this._ownerElement)throw new W($);return Te=this.getNamedItemNS(oe.namespaceURI,oe.localName),se(this._ownerElement,this,oe,Te),Te},removeNamedItem:function(oe){var fe=this.getNamedItem(oe);return ae(this._ownerElement,this,fe),fe},removeNamedItemNS:function(oe,fe){var Te=this.getNamedItemNS(oe,fe);return ae(this._ownerElement,this,Te),Te},getNamedItemNS:function(oe,fe){for(var Te=this.length;Te--;){var je=this[Te];if(je.localName==fe&&je.namespaceURI==oe)return je}return null}};function ce(){}ce.prototype={hasFeature:function(oe,fe){return!0},createDocument:function(oe,fe,Te){var je=new ye;if(je.implementation=this,je.childNodes=new V,je.doctype=Te||null,Te&&je.appendChild(Te),fe){var mt=je.createElementNS(oe,fe);je.appendChild(mt)}return je},createDocumentType:function(oe,fe,Te){var je=new qt;return je.name=oe,je.nodeName=oe,je.publicId=fe||"",je.systemId=Te||"",je}};function ee(){}ee.prototype={firstChild:null,lastChild:null,previousSibling:null,nextSibling:null,attributes:null,parentNode:null,childNodes:null,ownerDocument:null,nodeValue:null,namespaceURI:null,prefix:null,localName:null,insertBefore:function(oe,fe){return dt(this,oe,fe)},replaceChild:function(oe,fe){dt(this,oe,fe,ot),fe&&this.removeChild(fe)},removeChild:function(oe){return ze(this,oe)},appendChild:function(oe){return this.insertBefore(oe,null)},hasChildNodes:function(){return this.firstChild!=null},cloneNode:function(oe){return Cn(this.ownerDocument||this,this,oe)},normalize:function(){for(var oe=this.firstChild;oe;){var fe=oe.nextSibling;fe&&fe.nodeType==g&&oe.nodeType==g?(this.removeChild(fe),oe.appendData(fe.data)):(oe.normalize(),oe=fe)}},isSupported:function(oe,fe){return this.ownerDocument.implementation.hasFeature(oe,fe)},hasAttributes:function(){return this.attributes.length>0},lookupPrefix:function(oe){for(var fe=this;fe;){var Te=fe._nsMap;if(Te){for(var je in Te)if(Object.prototype.hasOwnProperty.call(Te,je)&&Te[je]===oe)return je}fe=fe.nodeType==f?fe.ownerDocument:fe.parentNode}return null},lookupNamespaceURI:function(oe){for(var fe=this;fe;){var Te=fe._nsMap;if(Te&&Object.prototype.hasOwnProperty.call(Te,oe))return Te[oe];fe=fe.nodeType==f?fe.ownerDocument:fe.parentNode}return null},isDefaultNamespace:function(oe){var fe=this.lookupPrefix(oe);return fe==null}};function pe(oe){return oe=="<"&&"&lt;"||oe==">"&&"&gt;"||oe=="&"&&"&amp;"||oe=='"'&&"&quot;"||"&#"+oe.charCodeAt()+";"}l(c,ee),l(c,ee.prototype);function me(oe,fe){if(fe(oe))return!0;if(oe=oe.firstChild)do if(me(oe,fe))return!0;while(oe=oe.nextSibling)}function ye(){this.ownerDocument=this}function Oe(oe,fe,Te){oe&&oe._inc++;var je=Te.namespaceURI;je===t.XMLNS&&(fe._nsMap[Te.prefix?Te.localName:""]=Te.value)}function Le(oe,fe,Te,je){oe&&oe._inc++;var mt=Te.namespaceURI;mt===t.XMLNS&&delete fe._nsMap[Te.prefix?Te.localName:""]}function st(oe,fe,Te){if(oe&&oe._inc){oe._inc++;var je=fe.childNodes;if(Te)je[je.length++]=Te;else{for(var mt=fe.firstChild,St=0;mt;)je[St++]=mt,mt=mt.nextSibling;je.length=St,delete je[je.length]}}}function ze(oe,fe){var Te=fe.previousSibling,je=fe.nextSibling;return Te?Te.nextSibling=je:oe.firstChild=je,je?je.previousSibling=Te:oe.lastChild=Te,fe.parentNode=null,fe.previousSibling=null,fe.nextSibling=null,st(oe.ownerDocument,oe),fe}function pt(oe){return oe&&(oe.nodeType===ee.DOCUMENT_NODE||oe.nodeType===ee.DOCUMENT_FRAGMENT_NODE||oe.nodeType===ee.ELEMENT_NODE)}function Ye(oe){return oe&&(Rt(oe)||Ve(oe)||Pt(oe)||oe.nodeType===ee.DOCUMENT_FRAGMENT_NODE||oe.nodeType===ee.COMMENT_NODE||oe.nodeType===ee.PROCESSING_INSTRUCTION_NODE)}function Pt(oe){return oe&&oe.nodeType===ee.DOCUMENT_TYPE_NODE}function Rt(oe){return oe&&oe.nodeType===ee.ELEMENT_NODE}function Ve(oe){return oe&&oe.nodeType===ee.TEXT_NODE}function Ne(oe,fe){var Te=oe.childNodes||[];if(e(Te,Rt)||Pt(fe))return!1;var je=e(Te,Pt);return!(fe&&je&&Te.indexOf(je)>Te.indexOf(fe))}function Ie(oe,fe){var Te=oe.childNodes||[];function je(St){return Rt(St)&&St!==fe}if(e(Te,je))return!1;var mt=e(Te,Pt);return!(fe&&mt&&Te.indexOf(mt)>Te.indexOf(fe))}function Ue(oe,fe,Te){if(!pt(oe))throw new W(B,"Unexpected parent node type "+oe.nodeType);if(Te&&Te.parentNode!==oe)throw new W(A,"child not in parent");if(!Ye(fe)||Pt(fe)&&oe.nodeType!==ee.DOCUMENT_NODE)throw new W(B,"Unexpected node type "+fe.nodeType+" for parent node type "+oe.nodeType)}function et(oe,fe,Te){var je=oe.childNodes||[],mt=fe.childNodes||[];if(fe.nodeType===ee.DOCUMENT_FRAGMENT_NODE){var St=mt.filter(Rt);if(St.length>1||e(mt,Ve))throw new W(B,"More than one element or text in fragment");if(St.length===1&&!Ne(oe,Te))throw new W(B,"Element in fragment can not be inserted before doctype")}if(Rt(fe)&&!Ne(oe,Te))throw new W(B,"Only one element can be added and only after doctype");if(Pt(fe)){if(e(je,Pt))throw new W(B,"Only one doctype is allowed");var be=e(je,Rt);if(Te&&je.indexOf(be)<je.indexOf(Te))throw new W(B,"Doctype can only be inserted before an element");if(!Te&&be)throw new W(B,"Doctype can not be appended since element is present")}}function ot(oe,fe,Te){var je=oe.childNodes||[],mt=fe.childNodes||[];if(fe.nodeType===ee.DOCUMENT_FRAGMENT_NODE){var St=mt.filter(Rt);if(St.length>1||e(mt,Ve))throw new W(B,"More than one element or text in fragment");if(St.length===1&&!Ie(oe,Te))throw new W(B,"Element in fragment can not be inserted before doctype")}if(Rt(fe)&&!Ie(oe,Te))throw new W(B,"Only one element can be added and only after doctype");if(Pt(fe)){let Ae=function(Ke){return Pt(Ke)&&Ke!==Te};var xe=Ae;if(e(je,Ae))throw new W(B,"Only one doctype is allowed");var be=e(je,Rt);if(Te&&je.indexOf(be)<je.indexOf(Te))throw new W(B,"Doctype can only be inserted before an element")}}function dt(oe,fe,Te,je){Ue(oe,fe,Te),oe.nodeType===ee.DOCUMENT_NODE&&(je||et)(oe,fe,Te);var mt=fe.parentNode;if(mt&&mt.removeChild(fe),fe.nodeType===k){var St=fe.firstChild;if(St==null)return fe;var be=fe.lastChild}else St=be=fe;var xe=Te?Te.previousSibling:oe.lastChild;St.previousSibling=xe,be.nextSibling=Te,xe?xe.nextSibling=St:oe.firstChild=St,Te==null?oe.lastChild=be:Te.previousSibling=be;do St.parentNode=oe;while(St!==be&&(St=St.nextSibling));return st(oe.ownerDocument||oe,oe),fe.nodeType==k&&(fe.firstChild=fe.lastChild=null),fe}function it(oe,fe){return fe.parentNode&&fe.parentNode.removeChild(fe),fe.parentNode=oe,fe.previousSibling=oe.lastChild,fe.nextSibling=null,fe.previousSibling?fe.previousSibling.nextSibling=fe:oe.firstChild=fe,oe.lastChild=fe,st(oe.ownerDocument,oe,fe),fe}ye.prototype={nodeName:"#document",nodeType:D,doctype:null,documentElement:null,_inc:1,insertBefore:function(oe,fe){if(oe.nodeType==k){for(var Te=oe.firstChild;Te;){var je=Te.nextSibling;this.insertBefore(Te,fe),Te=je}return oe}return dt(this,oe,fe),oe.ownerDocument=this,this.documentElement===null&&oe.nodeType===h&&(this.documentElement=oe),oe},removeChild:function(oe){return this.documentElement==oe&&(this.documentElement=null),ze(this,oe)},replaceChild:function(oe,fe){dt(this,oe,fe,ot),oe.ownerDocument=this,fe&&this.removeChild(fe),Rt(oe)&&(this.documentElement=oe)},importNode:function(oe,fe){return ln(this,oe,fe)},getElementById:function(oe){var fe=null;return me(this.documentElement,function(Te){if(Te.nodeType==h&&Te.getAttribute("id")==oe)return fe=Te,!0}),fe},getElementsByClassName:function(oe){var fe=a(oe);return new Q(this,function(Te){var je=[];return fe.length>0&&me(Te.documentElement,function(mt){if(mt!==Te&&mt.nodeType===h){var St=mt.getAttribute("class");if(St){var be=oe===St;if(!be){var xe=a(St);be=fe.every(o(xe))}be&&je.push(mt)}}}),je})},createElement:function(oe){var fe=new bt;fe.ownerDocument=this,fe.nodeName=oe,fe.tagName=oe,fe.localName=oe,fe.childNodes=new V;var Te=fe.attributes=new ne;return Te._ownerElement=fe,fe},createDocumentFragment:function(){var oe=new vt;return oe.ownerDocument=this,oe.childNodes=new V,oe},createTextNode:function(oe){var fe=new hr;return fe.ownerDocument=this,fe.appendData(oe),fe},createComment:function(oe){var fe=new Rr;return fe.ownerDocument=this,fe.appendData(oe),fe},createCDATASection:function(oe){var fe=new nr;return fe.ownerDocument=this,fe.appendData(oe),fe},createProcessingInstruction:function(oe,fe){var Te=new Ut;return Te.ownerDocument=this,Te.tagName=Te.nodeName=Te.target=oe,Te.nodeValue=Te.data=fe,Te},createAttribute:function(oe){var fe=new lt;return fe.ownerDocument=this,fe.name=oe,fe.nodeName=oe,fe.localName=oe,fe.specified=!0,fe},createEntityReference:function(oe){var fe=new Lr;return fe.ownerDocument=this,fe.nodeName=oe,fe},createElementNS:function(oe,fe){var Te=new bt,je=fe.split(":"),mt=Te.attributes=new ne;return Te.childNodes=new V,Te.ownerDocument=this,Te.nodeName=fe,Te.tagName=fe,Te.namespaceURI=oe,je.length==2?(Te.prefix=je[0],Te.localName=je[1]):Te.localName=fe,mt._ownerElement=Te,Te},createAttributeNS:function(oe,fe){var Te=new lt,je=fe.split(":");return Te.ownerDocument=this,Te.nodeName=fe,Te.name=fe,Te.namespaceURI=oe,Te.specified=!0,je.length==2?(Te.prefix=je[0],Te.localName=je[1]):Te.localName=fe,Te}},u(ye,ee);function bt(){this._nsMap={}}bt.prototype={nodeType:h,hasAttribute:function(oe){return this.getAttributeNode(oe)!=null},getAttribute:function(oe){var fe=this.getAttributeNode(oe);return fe&&fe.value||""},getAttributeNode:function(oe){return this.attributes.getNamedItem(oe)},setAttribute:function(oe,fe){var Te=this.ownerDocument.createAttribute(oe);Te.value=Te.nodeValue=""+fe,this.setAttributeNode(Te)},removeAttribute:function(oe){var fe=this.getAttributeNode(oe);fe&&this.removeAttributeNode(fe)},appendChild:function(oe){return oe.nodeType===k?this.insertBefore(oe,null):it(this,oe)},setAttributeNode:function(oe){return this.attributes.setNamedItem(oe)},setAttributeNodeNS:function(oe){return this.attributes.setNamedItemNS(oe)},removeAttributeNode:function(oe){return this.attributes.removeNamedItem(oe.nodeName)},removeAttributeNS:function(oe,fe){var Te=this.getAttributeNodeNS(oe,fe);Te&&this.removeAttributeNode(Te)},hasAttributeNS:function(oe,fe){return this.getAttributeNodeNS(oe,fe)!=null},getAttributeNS:function(oe,fe){var Te=this.getAttributeNodeNS(oe,fe);return Te&&Te.value||""},setAttributeNS:function(oe,fe,Te){var je=this.ownerDocument.createAttributeNS(oe,fe);je.value=je.nodeValue=""+Te,this.setAttributeNode(je)},getAttributeNodeNS:function(oe,fe){return this.attributes.getNamedItemNS(oe,fe)},getElementsByTagName:function(oe){return new Q(this,function(fe){var Te=[];return me(fe,function(je){je!==fe&&je.nodeType==h&&(oe==="*"||je.tagName==oe)&&Te.push(je)}),Te})},getElementsByTagNameNS:function(oe,fe){return new Q(this,function(Te){var je=[];return me(Te,function(mt){mt!==Te&&mt.nodeType===h&&(oe==="*"||mt.namespaceURI===oe)&&(fe==="*"||mt.localName==fe)&&je.push(mt)}),je})}},ye.prototype.getElementsByTagName=bt.prototype.getElementsByTagName,ye.prototype.getElementsByTagNameNS=bt.prototype.getElementsByTagNameNS,u(bt,ee);function lt(){}lt.prototype.nodeType=f,u(lt,ee);function gr(){}gr.prototype={data:"",substringData:function(oe,fe){return this.data.substring(oe,oe+fe)},appendData:function(oe){oe=this.data+oe,this.nodeValue=this.data=oe,this.length=oe.length},insertData:function(oe,fe){this.replaceData(oe,0,fe)},appendChild:function(oe){throw new Error(U[B])},deleteData:function(oe,fe){this.replaceData(oe,fe,"")},replaceData:function(oe,fe,Te){var je=this.data.substring(0,oe),mt=this.data.substring(oe+fe);Te=je+Te+mt,this.nodeValue=this.data=Te,this.length=Te.length}},u(gr,ee);function hr(){}hr.prototype={nodeName:"#text",nodeType:g,splitText:function(oe){var fe=this.data,Te=fe.substring(oe);fe=fe.substring(0,oe),this.data=this.nodeValue=fe,this.length=fe.length;var je=this.ownerDocument.createTextNode(Te);return this.parentNode&&this.parentNode.insertBefore(je,this.nextSibling),je}},u(hr,gr);function Rr(){}Rr.prototype={nodeName:"#comment",nodeType:E},u(Rr,gr);function nr(){}nr.prototype={nodeName:"#cdata-section",nodeType:v},u(nr,gr);function qt(){}qt.prototype.nodeType=I,u(qt,ee);function fr(){}fr.prototype.nodeType=P,u(fr,ee);function yr(){}yr.prototype.nodeType=_,u(yr,ee);function Lr(){}Lr.prototype.nodeType=y,u(Lr,ee);function vt(){}vt.prototype.nodeName="#document-fragment",vt.prototype.nodeType=k,u(vt,ee);function Ut(){}Ut.prototype.nodeType=C,u(Ut,ee);function rn(){}rn.prototype.serializeToString=function(oe,fe,Te){return jt.call(oe,fe,Te)},ee.prototype.toString=jt;function jt(oe,fe){var Te=[],je=this.nodeType==9&&this.documentElement||this,mt=je.prefix,St=je.namespaceURI;if(St&&mt==null){var mt=je.lookupPrefix(St);if(mt==null)var be=[{namespace:St,prefix:null}]}return Hr(this,Te,oe,fe,be),Te.join("")}function br(oe,fe,Te){var je=oe.prefix||"",mt=oe.namespaceURI;if(!mt||je==="xml"&&mt===t.XML||mt===t.XMLNS)return!1;for(var St=Te.length;St--;){var be=Te[St];if(be.prefix===je)return be.namespace!==mt}return!0}function Or(oe,fe,Te){oe.push(" ",fe,'="',Te.replace(/[<>&"\t\n\r]/g,pe),'"')}function Hr(oe,fe,Te,je,mt){if(mt||(mt=[]),je)if(oe=je(oe),oe){if(typeof oe=="string"){fe.push(oe);return}}else return;switch(oe.nodeType){case h:var St=oe.attributes,be=St.length,Nt=oe.firstChild,xe=oe.tagName;Te=t.isHTML(oe.namespaceURI)||Te;var Ae=xe;if(!Te&&!oe.prefix&&oe.namespaceURI){for(var Ke,Xe=0;Xe<St.length;Xe++)if(St.item(Xe).name==="xmlns"){Ke=St.item(Xe).value;break}if(!Ke)for(var _t=mt.length-1;_t>=0;_t--){var Lt=mt[_t];if(Lt.prefix===""&&Lt.namespace===oe.namespaceURI){Ke=Lt.namespace;break}}if(Ke!==oe.namespaceURI)for(var _t=mt.length-1;_t>=0;_t--){var Lt=mt[_t];if(Lt.namespace===oe.namespaceURI){Lt.prefix&&(Ae=Lt.prefix+":"+xe);break}}}fe.push("<",Ae);for(var ct=0;ct<be;ct++){var yt=St.item(ct);yt.prefix=="xmlns"?mt.push({prefix:yt.localName,namespace:yt.value}):yt.nodeName=="xmlns"&&mt.push({prefix:"",namespace:yt.value})}for(var ct=0;ct<be;ct++){var yt=St.item(ct);if(br(yt,Te,mt)){var Vt=yt.prefix||"",Kt=yt.namespaceURI;Or(fe,Vt?"xmlns:"+Vt:"xmlns",Kt),mt.push({prefix:Vt,namespace:Kt})}Hr(yt,fe,Te,je,mt)}if(xe===Ae&&br(oe,Te,mt)){var Vt=oe.prefix||"",Kt=oe.namespaceURI;Or(fe,Vt?"xmlns:"+Vt:"xmlns",Kt),mt.push({prefix:Vt,namespace:Kt})}if(Nt||Te&&!/^(?:meta|link|img|br|hr|input)$/i.test(xe)){if(fe.push(">"),Te&&/^script$/i.test(xe))for(;Nt;)Nt.data?fe.push(Nt.data):Hr(Nt,fe,Te,je,mt.slice()),Nt=Nt.nextSibling;else for(;Nt;)Hr(Nt,fe,Te,je,mt.slice()),Nt=Nt.nextSibling;fe.push("</",Ae,">")}else fe.push("/>");return;case D:case k:for(var Nt=oe.firstChild;Nt;)Hr(Nt,fe,Te,je,mt.slice()),Nt=Nt.nextSibling;return;case f:return Or(fe,oe.name,oe.value);case g:return fe.push(oe.data.replace(/[<&>]/g,pe));case v:return fe.push("<![CDATA[",oe.data,"]]>");case E:return fe.push("<!--",oe.data,"-->");case I:var vr=oe.publicId,Tt=oe.systemId;if(fe.push("<!DOCTYPE ",oe.name),vr)fe.push(" PUBLIC ",vr),Tt&&Tt!="."&&fe.push(" ",Tt),fe.push(">");else if(Tt&&Tt!=".")fe.push(" SYSTEM ",Tt,">");else{var xr=oe.internalSubset;xr&&fe.push(" [",xr,"]"),fe.push(">")}return;case C:return fe.push("<?",oe.target," ",oe.data,"?>");case y:return fe.push("&",oe.nodeName,";");default:fe.push("??",oe.nodeName)}}function ln(oe,fe,Te){var je;switch(fe.nodeType){case h:je=fe.cloneNode(!1),je.ownerDocument=oe;case k:break;case f:Te=!0;break}if(je||(je=fe.cloneNode(!1)),je.ownerDocument=oe,je.parentNode=null,Te)for(var mt=fe.firstChild;mt;)je.appendChild(ln(oe,mt,Te)),mt=mt.nextSibling;return je}function Cn(oe,fe,Te){var je=new fe.constructor;for(var mt in fe)if(Object.prototype.hasOwnProperty.call(fe,mt)){var St=fe[mt];typeof St!="object"&&St!=je[mt]&&(je[mt]=St)}switch(fe.childNodes&&(je.childNodes=new V),je.ownerDocument=oe,je.nodeType){case h:var be=fe.attributes,xe=je.attributes=new ne,Ae=be.length;xe._ownerElement=je;for(var Ke=0;Ke<Ae;Ke++)je.setAttributeNode(Cn(oe,be.item(Ke),!0));break;case f:Te=!0}if(Te)for(var Xe=fe.firstChild;Xe;)je.appendChild(Cn(oe,Xe,Te)),Xe=Xe.nextSibling;return je}function wn(oe,fe,Te){oe[fe]=Te}try{if(Object.defineProperty){let oe=function(fe){switch(fe.nodeType){case h:case k:var Te=[];for(fe=fe.firstChild;fe;)fe.nodeType!==7&&fe.nodeType!==8&&Te.push(oe(fe)),fe=fe.nextSibling;return Te.join("");default:return fe.nodeValue}};var Fr=oe;Object.defineProperty(Q.prototype,"length",{get:function(){return ie(this),this.$$length}}),Object.defineProperty(ee.prototype,"textContent",{get:function(){return oe(this)},set:function(fe){switch(this.nodeType){case h:case k:for(;this.firstChild;)this.removeChild(this.firstChild);(fe||String(fe))&&this.appendChild(this.ownerDocument.createTextNode(fe));break;default:this.data=fe,this.value=fe,this.nodeValue=fe}}}),wn=function(fe,Te,je){fe["$$"+Te]=je}}}catch{}return xc.DocumentType=qt,xc.DOMException=W,xc.DOMImplementation=ce,xc.Element=bt,xc.Node=ee,xc.NodeList=V,xc.XMLSerializer=rn,xc}var D0={},xC={},C4;function aue(){return C4||(C4=1,(function(r){var e=kS().freeze;r.XML_ENTITIES=e({amp:"&",apos:"'",gt:">",lt:"<",quot:'"'}),r.HTML_ENTITIES=e({Aacute:"",aacute:"",Abreve:"",abreve:"",ac:"",acd:"",acE:"",Acirc:"",acirc:"",acute:"",Acy:"",acy:"",AElig:"",aelig:"",af:"",Afr:"",afr:"",Agrave:"",agrave:"",alefsym:"",aleph:"",Alpha:"",alpha:"",Amacr:"",amacr:"",amalg:"",AMP:"&",amp:"&",And:"",and:"",andand:"",andd:"",andslope:"",andv:"",ang:"",ange:"",angle:"",angmsd:"",angmsdaa:"",angmsdab:"",angmsdac:"",angmsdad:"",angmsdae:"",angmsdaf:"",angmsdag:"",angmsdah:"",angrt:"",angrtvb:"",angrtvbd:"",angsph:"",angst:"",angzarr:"",Aogon:"",aogon:"",Aopf:"",aopf:"",ap:"",apacir:"",apE:"",ape:"",apid:"",apos:"'",ApplyFunction:"",approx:"",approxeq:"",Aring:"",aring:"",Ascr:"",ascr:"",Assign:"",ast:"*",asymp:"",asympeq:"",Atilde:"",atilde:"",Auml:"",auml:"",awconint:"",awint:"",backcong:"",backepsilon:"",backprime:"",backsim:"",backsimeq:"",Backslash:"",Barv:"",barvee:"",Barwed:"",barwed:"",barwedge:"",bbrk:"",bbrktbrk:"",bcong:"",Bcy:"",bcy:"",bdquo:"",becaus:"",Because:"",because:"",bemptyv:"",bepsi:"",bernou:"",Bernoullis:"",Beta:"",beta:"",beth:"",between:"",Bfr:"",bfr:"",bigcap:"",bigcirc:"",bigcup:"",bigodot:"",bigoplus:"",bigotimes:"",bigsqcup:"",bigstar:"",bigtriangledown:"",bigtriangleup:"",biguplus:"",bigvee:"",bigwedge:"",bkarow:"",blacklozenge:"",blacksquare:"",blacktriangle:"",blacktriangledown:"",blacktriangleleft:"",blacktriangleright:"",blank:"",blk12:"",blk14:"",blk34:"",block:"",bne:"=",bnequiv:"",bNot:"",bnot:"",Bopf:"",bopf:"",bot:"",bottom:"",bowtie:"",boxbox:"",boxDL:"",boxDl:"",boxdL:"",boxdl:"",boxDR:"",boxDr:"",boxdR:"",boxdr:"",boxH:"",boxh:"",boxHD:"",boxHd:"",boxhD:"",boxhd:"",boxHU:"",boxHu:"",boxhU:"",boxhu:"",boxminus:"",boxplus:"",boxtimes:"",boxUL:"",boxUl:"",boxuL:"",boxul:"",boxUR:"",boxUr:"",boxuR:"",boxur:"",boxV:"",boxv:"",boxVH:"",boxVh:"",boxvH:"",boxvh:"",boxVL:"",boxVl:"",boxvL:"",boxvl:"",boxVR:"",boxVr:"",boxvR:"",boxvr:"",bprime:"",Breve:"",breve:"",brvbar:"",Bscr:"",bscr:"",bsemi:"",bsim:"",bsime:"",bsol:"\\",bsolb:"",bsolhsub:"",bull:"",bullet:"",bump:"",bumpE:"",bumpe:"",Bumpeq:"",bumpeq:"",Cacute:"",cacute:"",Cap:"",cap:"",capand:"",capbrcup:"",capcap:"",capcup:"",capdot:"",CapitalDifferentialD:"",caps:"",caret:"",caron:"",Cayleys:"",ccaps:"",Ccaron:"",ccaron:"",Ccedil:"",ccedil:"",Ccirc:"",ccirc:"",Cconint:"",ccups:"",ccupssm:"",Cdot:"",cdot:"",cedil:"",Cedilla:"",cemptyv:"",cent:"",CenterDot:"",centerdot:"",Cfr:"",cfr:"",CHcy:"",chcy:"",check:"",checkmark:"",Chi:"",chi:"",cir:"",circ:"",circeq:"",circlearrowleft:"",circlearrowright:"",circledast:"",circledcirc:"",circleddash:"",CircleDot:"",circledR:"",circledS:"",CircleMinus:"",CirclePlus:"",CircleTimes:"",cirE:"",cire:"",cirfnint:"",cirmid:"",cirscir:"",ClockwiseContourIntegral:"",CloseCurlyDoubleQuote:"",CloseCurlyQuote:"",clubs:"",clubsuit:"",Colon:"",colon:":",Colone:"",colone:"",coloneq:"",comma:",",commat:"@",comp:"",compfn:"",complement:"",complexes:"",cong:"",congdot:"",Congruent:"",Conint:"",conint:"",ContourIntegral:"",Copf:"",copf:"",coprod:"",Coproduct:"",COPY:"",copy:"",copysr:"",CounterClockwiseContourIntegral:"",crarr:"",Cross:"",cross:"",Cscr:"",cscr:"",csub:"",csube:"",csup:"",csupe:"",ctdot:"",cudarrl:"",cudarrr:"",cuepr:"",cuesc:"",cularr:"",cularrp:"",Cup:"",cup:"",cupbrcap:"",CupCap:"",cupcap:"",cupcup:"",cupdot:"",cupor:"",cups:"",curarr:"",curarrm:"",curlyeqprec:"",curlyeqsucc:"",curlyvee:"",curlywedge:"",curren:"",curvearrowleft:"",curvearrowright:"",cuvee:"",cuwed:"",cwconint:"",cwint:"",cylcty:"",Dagger:"",dagger:"",daleth:"",Darr:"",dArr:"",darr:"",dash:"",Dashv:"",dashv:"",dbkarow:"",dblac:"",Dcaron:"",dcaron:"",Dcy:"",dcy:"",DD:"",dd:"",ddagger:"",ddarr:"",DDotrahd:"",ddotseq:"",deg:"",Del:"",Delta:"",delta:"",demptyv:"",dfisht:"",Dfr:"",dfr:"",dHar:"",dharl:"",dharr:"",DiacriticalAcute:"",DiacriticalDot:"",DiacriticalDoubleAcute:"",DiacriticalGrave:"`",DiacriticalTilde:"",diam:"",Diamond:"",diamond:"",diamondsuit:"",diams:"",die:"",DifferentialD:"",digamma:"",disin:"",div:"",divide:"",divideontimes:"",divonx:"",DJcy:"",djcy:"",dlcorn:"",dlcrop:"",dollar:"$",Dopf:"",dopf:"",Dot:"",dot:"",DotDot:"",doteq:"",doteqdot:"",DotEqual:"",dotminus:"",dotplus:"",dotsquare:"",doublebarwedge:"",DoubleContourIntegral:"",DoubleDot:"",DoubleDownArrow:"",DoubleLeftArrow:"",DoubleLeftRightArrow:"",DoubleLeftTee:"",DoubleLongLeftArrow:"",DoubleLongLeftRightArrow:"",DoubleLongRightArrow:"",DoubleRightArrow:"",DoubleRightTee:"",DoubleUpArrow:"",DoubleUpDownArrow:"",DoubleVerticalBar:"",DownArrow:"",Downarrow:"",downarrow:"",DownArrowBar:"",DownArrowUpArrow:"",DownBreve:"",downdownarrows:"",downharpoonleft:"",downharpoonright:"",DownLeftRightVector:"",DownLeftTeeVector:"",DownLeftVector:"",DownLeftVectorBar:"",DownRightTeeVector:"",DownRightVector:"",DownRightVectorBar:"",DownTee:"",DownTeeArrow:"",drbkarow:"",drcorn:"",drcrop:"",Dscr:"",dscr:"",DScy:"",dscy:"",dsol:"",Dstrok:"",dstrok:"",dtdot:"",dtri:"",dtrif:"",duarr:"",duhar:"",dwangle:"",DZcy:"",dzcy:"",dzigrarr:"",Eacute:"",eacute:"",easter:"",Ecaron:"",ecaron:"",ecir:"",Ecirc:"",ecirc:"",ecolon:"",Ecy:"",ecy:"",eDDot:"",Edot:"",eDot:"",edot:"",ee:"",efDot:"",Efr:"",efr:"",eg:"",Egrave:"",egrave:"",egs:"",egsdot:"",el:"",Element:"",elinters:"",ell:"",els:"",elsdot:"",Emacr:"",emacr:"",empty:"",emptyset:"",EmptySmallSquare:"",emptyv:"",EmptyVerySmallSquare:"",emsp:"",emsp13:"",emsp14:"",ENG:"",eng:"",ensp:"",Eogon:"",eogon:"",Eopf:"",eopf:"",epar:"",eparsl:"",eplus:"",epsi:"",Epsilon:"",epsilon:"",epsiv:"",eqcirc:"",eqcolon:"",eqsim:"",eqslantgtr:"",eqslantless:"",Equal:"",equals:"=",EqualTilde:"",equest:"",Equilibrium:"",equiv:"",equivDD:"",eqvparsl:"",erarr:"",erDot:"",Escr:"",escr:"",esdot:"",Esim:"",esim:"",Eta:"",eta:"",ETH:"",eth:"",Euml:"",euml:"",euro:"",excl:"!",exist:"",Exists:"",expectation:"",ExponentialE:"",exponentiale:"",fallingdotseq:"",Fcy:"",fcy:"",female:"",ffilig:"",fflig:"",ffllig:"",Ffr:"",ffr:"",filig:"",FilledSmallSquare:"",FilledVerySmallSquare:"",fjlig:"fj",flat:"",fllig:"",fltns:"",fnof:"",Fopf:"",fopf:"",ForAll:"",forall:"",fork:"",forkv:"",Fouriertrf:"",fpartint:"",frac12:"",frac13:"",frac14:"",frac15:"",frac16:"",frac18:"",frac23:"",frac25:"",frac34:"",frac35:"",frac38:"",frac45:"",frac56:"",frac58:"",frac78:"",frasl:"",frown:"",Fscr:"",fscr:"",gacute:"",Gamma:"",gamma:"",Gammad:"",gammad:"",gap:"",Gbreve:"",gbreve:"",Gcedil:"",Gcirc:"",gcirc:"",Gcy:"",gcy:"",Gdot:"",gdot:"",gE:"",ge:"",gEl:"",gel:"",geq:"",geqq:"",geqslant:"",ges:"",gescc:"",gesdot:"",gesdoto:"",gesdotol:"",gesl:"",gesles:"",Gfr:"",gfr:"",Gg:"",gg:"",ggg:"",gimel:"",GJcy:"",gjcy:"",gl:"",gla:"",glE:"",glj:"",gnap:"",gnapprox:"",gnE:"",gne:"",gneq:"",gneqq:"",gnsim:"",Gopf:"",gopf:"",grave:"`",GreaterEqual:"",GreaterEqualLess:"",GreaterFullEqual:"",GreaterGreater:"",GreaterLess:"",GreaterSlantEqual:"",GreaterTilde:"",Gscr:"",gscr:"",gsim:"",gsime:"",gsiml:"",Gt:"",GT:">",gt:">",gtcc:"",gtcir:"",gtdot:"",gtlPar:"",gtquest:"",gtrapprox:"",gtrarr:"",gtrdot:"",gtreqless:"",gtreqqless:"",gtrless:"",gtrsim:"",gvertneqq:"",gvnE:"",Hacek:"",hairsp:"",half:"",hamilt:"",HARDcy:"",hardcy:"",hArr:"",harr:"",harrcir:"",harrw:"",Hat:"^",hbar:"",Hcirc:"",hcirc:"",hearts:"",heartsuit:"",hellip:"",hercon:"",Hfr:"",hfr:"",HilbertSpace:"",hksearow:"",hkswarow:"",hoarr:"",homtht:"",hookleftarrow:"",hookrightarrow:"",Hopf:"",hopf:"",horbar:"",HorizontalLine:"",Hscr:"",hscr:"",hslash:"",Hstrok:"",hstrok:"",HumpDownHump:"",HumpEqual:"",hybull:"",hyphen:"",Iacute:"",iacute:"",ic:"",Icirc:"",icirc:"",Icy:"",icy:"",Idot:"",IEcy:"",iecy:"",iexcl:"",iff:"",Ifr:"",ifr:"",Igrave:"",igrave:"",ii:"",iiiint:"",iiint:"",iinfin:"",iiota:"",IJlig:"",ijlig:"",Im:"",Imacr:"",imacr:"",image:"",ImaginaryI:"",imagline:"",imagpart:"",imath:"",imof:"",imped:"",Implies:"",in:"",incare:"",infin:"",infintie:"",inodot:"",Int:"",int:"",intcal:"",integers:"",Integral:"",intercal:"",Intersection:"",intlarhk:"",intprod:"",InvisibleComma:"",InvisibleTimes:"",IOcy:"",iocy:"",Iogon:"",iogon:"",Iopf:"",iopf:"",Iota:"",iota:"",iprod:"",iquest:"",Iscr:"",iscr:"",isin:"",isindot:"",isinE:"",isins:"",isinsv:"",isinv:"",it:"",Itilde:"",itilde:"",Iukcy:"",iukcy:"",Iuml:"",iuml:"",Jcirc:"",jcirc:"",Jcy:"",jcy:"",Jfr:"",jfr:"",jmath:"",Jopf:"",jopf:"",Jscr:"",jscr:"",Jsercy:"",jsercy:"",Jukcy:"",jukcy:"",Kappa:"",kappa:"",kappav:"",Kcedil:"",kcedil:"",Kcy:"",kcy:"",Kfr:"",kfr:"",kgreen:"",KHcy:"",khcy:"",KJcy:"",kjcy:"",Kopf:"",kopf:"",Kscr:"",kscr:"",lAarr:"",Lacute:"",lacute:"",laemptyv:"",lagran:"",Lambda:"",lambda:"",Lang:"",lang:"",langd:"",langle:"",lap:"",Laplacetrf:"",laquo:"",Larr:"",lArr:"",larr:"",larrb:"",larrbfs:"",larrfs:"",larrhk:"",larrlp:"",larrpl:"",larrsim:"",larrtl:"",lat:"",lAtail:"",latail:"",late:"",lates:"",lBarr:"",lbarr:"",lbbrk:"",lbrace:"{",lbrack:"[",lbrke:"",lbrksld:"",lbrkslu:"",Lcaron:"",lcaron:"",Lcedil:"",lcedil:"",lceil:"",lcub:"{",Lcy:"",lcy:"",ldca:"",ldquo:"",ldquor:"",ldrdhar:"",ldrushar:"",ldsh:"",lE:"",le:"",LeftAngleBracket:"",LeftArrow:"",Leftarrow:"",leftarrow:"",LeftArrowBar:"",LeftArrowRightArrow:"",leftarrowtail:"",LeftCeiling:"",LeftDoubleBracket:"",LeftDownTeeVector:"",LeftDownVector:"",LeftDownVectorBar:"",LeftFloor:"",leftharpoondown:"",leftharpoonup:"",leftleftarrows:"",LeftRightArrow:"",Leftrightarrow:"",leftrightarrow:"",leftrightarrows:"",leftrightharpoons:"",leftrightsquigarrow:"",LeftRightVector:"",LeftTee:"",LeftTeeArrow:"",LeftTeeVector:"",leftthreetimes:"",LeftTriangle:"",LeftTriangleBar:"",LeftTriangleEqual:"",LeftUpDownVector:"",LeftUpTeeVector:"",LeftUpVector:"",LeftUpVectorBar:"",LeftVector:"",LeftVectorBar:"",lEg:"",leg:"",leq:"",leqq:"",leqslant:"",les:"",lescc:"",lesdot:"",lesdoto:"",lesdotor:"",lesg:"",lesges:"",lessapprox:"",lessdot:"",lesseqgtr:"",lesseqqgtr:"",LessEqualGreater:"",LessFullEqual:"",LessGreater:"",lessgtr:"",LessLess:"",lesssim:"",LessSlantEqual:"",LessTilde:"",lfisht:"",lfloor:"",Lfr:"",lfr:"",lg:"",lgE:"",lHar:"",lhard:"",lharu:"",lharul:"",lhblk:"",LJcy:"",ljcy:"",Ll:"",ll:"",llarr:"",llcorner:"",Lleftarrow:"",llhard:"",lltri:"",Lmidot:"",lmidot:"",lmoust:"",lmoustache:"",lnap:"",lnapprox:"",lnE:"",lne:"",lneq:"",lneqq:"",lnsim:"",loang:"",loarr:"",lobrk:"",LongLeftArrow:"",Longleftarrow:"",longleftarrow:"",LongLeftRightArrow:"",Longleftrightarrow:"",longleftrightarrow:"",longmapsto:"",LongRightArrow:"",Longrightarrow:"",longrightarrow:"",looparrowleft:"",looparrowright:"",lopar:"",Lopf:"",lopf:"",loplus:"",lotimes:"",lowast:"",lowbar:"_",LowerLeftArrow:"",LowerRightArrow:"",loz:"",lozenge:"",lozf:"",lpar:"(",lparlt:"",lrarr:"",lrcorner:"",lrhar:"",lrhard:"",lrm:"",lrtri:"",lsaquo:"",Lscr:"",lscr:"",Lsh:"",lsh:"",lsim:"",lsime:"",lsimg:"",lsqb:"[",lsquo:"",lsquor:"",Lstrok:"",lstrok:"",Lt:"",LT:"<",lt:"<",ltcc:"",ltcir:"",ltdot:"",lthree:"",ltimes:"",ltlarr:"",ltquest:"",ltri:"",ltrie:"",ltrif:"",ltrPar:"",lurdshar:"",luruhar:"",lvertneqq:"",lvnE:"",macr:"",male:"",malt:"",maltese:"",Map:"",map:"",mapsto:"",mapstodown:"",mapstoleft:"",mapstoup:"",marker:"",mcomma:"",Mcy:"",mcy:"",mdash:"",mDDot:"",measuredangle:"",MediumSpace:"",Mellintrf:"",Mfr:"",mfr:"",mho:"",micro:"",mid:"",midast:"*",midcir:"",middot:"",minus:"",minusb:"",minusd:"",minusdu:"",MinusPlus:"",mlcp:"",mldr:"",mnplus:"",models:"",Mopf:"",mopf:"",mp:"",Mscr:"",mscr:"",mstpos:"",Mu:"",mu:"",multimap:"",mumap:"",nabla:"",Nacute:"",nacute:"",nang:"",nap:"",napE:"",napid:"",napos:"",napprox:"",natur:"",natural:"",naturals:"",nbsp:"",nbump:"",nbumpe:"",ncap:"",Ncaron:"",ncaron:"",Ncedil:"",ncedil:"",ncong:"",ncongdot:"",ncup:"",Ncy:"",ncy:"",ndash:"",ne:"",nearhk:"",neArr:"",nearr:"",nearrow:"",nedot:"",NegativeMediumSpace:"",NegativeThickSpace:"",NegativeThinSpace:"",NegativeVeryThinSpace:"",nequiv:"",nesear:"",nesim:"",NestedGreaterGreater:"",NestedLessLess:"",NewLine:`
`,nexist:"",nexists:"",Nfr:"",nfr:"",ngE:"",nge:"",ngeq:"",ngeqq:"",ngeqslant:"",nges:"",nGg:"",ngsim:"",nGt:"",ngt:"",ngtr:"",nGtv:"",nhArr:"",nharr:"",nhpar:"",ni:"",nis:"",nisd:"",niv:"",NJcy:"",njcy:"",nlArr:"",nlarr:"",nldr:"",nlE:"",nle:"",nLeftarrow:"",nleftarrow:"",nLeftrightarrow:"",nleftrightarrow:"",nleq:"",nleqq:"",nleqslant:"",nles:"",nless:"",nLl:"",nlsim:"",nLt:"",nlt:"",nltri:"",nltrie:"",nLtv:"",nmid:"",NoBreak:"",NonBreakingSpace:"",Nopf:"",nopf:"",Not:"",not:"",NotCongruent:"",NotCupCap:"",NotDoubleVerticalBar:"",NotElement:"",NotEqual:"",NotEqualTilde:"",NotExists:"",NotGreater:"",NotGreaterEqual:"",NotGreaterFullEqual:"",NotGreaterGreater:"",NotGreaterLess:"",NotGreaterSlantEqual:"",NotGreaterTilde:"",NotHumpDownHump:"",NotHumpEqual:"",notin:"",notindot:"",notinE:"",notinva:"",notinvb:"",notinvc:"",NotLeftTriangle:"",NotLeftTriangleBar:"",NotLeftTriangleEqual:"",NotLess:"",NotLessEqual:"",NotLessGreater:"",NotLessLess:"",NotLessSlantEqual:"",NotLessTilde:"",NotNestedGreaterGreater:"",NotNestedLessLess:"",notni:"",notniva:"",notnivb:"",notnivc:"",NotPrecedes:"",NotPrecedesEqual:"",NotPrecedesSlantEqual:"",NotReverseElement:"",NotRightTriangle:"",NotRightTriangleBar:"",NotRightTriangleEqual:"",NotSquareSubset:"",NotSquareSubsetEqual:"",NotSquareSuperset:"",NotSquareSupersetEqual:"",NotSubset:"",NotSubsetEqual:"",NotSucceeds:"",NotSucceedsEqual:"",NotSucceedsSlantEqual:"",NotSucceedsTilde:"",NotSuperset:"",NotSupersetEqual:"",NotTilde:"",NotTildeEqual:"",NotTildeFullEqual:"",NotTildeTilde:"",NotVerticalBar:"",npar:"",nparallel:"",nparsl:"",npart:"",npolint:"",npr:"",nprcue:"",npre:"",nprec:"",npreceq:"",nrArr:"",nrarr:"",nrarrc:"",nrarrw:"",nRightarrow:"",nrightarrow:"",nrtri:"",nrtrie:"",nsc:"",nsccue:"",nsce:"",Nscr:"",nscr:"",nshortmid:"",nshortparallel:"",nsim:"",nsime:"",nsimeq:"",nsmid:"",nspar:"",nsqsube:"",nsqsupe:"",nsub:"",nsubE:"",nsube:"",nsubset:"",nsubseteq:"",nsubseteqq:"",nsucc:"",nsucceq:"",nsup:"",nsupE:"",nsupe:"",nsupset:"",nsupseteq:"",nsupseteqq:"",ntgl:"",Ntilde:"",ntilde:"",ntlg:"",ntriangleleft:"",ntrianglelefteq:"",ntriangleright:"",ntrianglerighteq:"",Nu:"",nu:"",num:"#",numero:"",numsp:"",nvap:"",nVDash:"",nVdash:"",nvDash:"",nvdash:"",nvge:"",nvgt:">",nvHarr:"",nvinfin:"",nvlArr:"",nvle:"",nvlt:"<",nvltrie:"",nvrArr:"",nvrtrie:"",nvsim:"",nwarhk:"",nwArr:"",nwarr:"",nwarrow:"",nwnear:"",Oacute:"",oacute:"",oast:"",ocir:"",Ocirc:"",ocirc:"",Ocy:"",ocy:"",odash:"",Odblac:"",odblac:"",odiv:"",odot:"",odsold:"",OElig:"",oelig:"",ofcir:"",Ofr:"",ofr:"",ogon:"",Ograve:"",ograve:"",ogt:"",ohbar:"",ohm:"",oint:"",olarr:"",olcir:"",olcross:"",oline:"",olt:"",Omacr:"",omacr:"",Omega:"",omega:"",Omicron:"",omicron:"",omid:"",ominus:"",Oopf:"",oopf:"",opar:"",OpenCurlyDoubleQuote:"",OpenCurlyQuote:"",operp:"",oplus:"",Or:"",or:"",orarr:"",ord:"",order:"",orderof:"",ordf:"",ordm:"",origof:"",oror:"",orslope:"",orv:"",oS:"",Oscr:"",oscr:"",Oslash:"",oslash:"",osol:"",Otilde:"",otilde:"",Otimes:"",otimes:"",otimesas:"",Ouml:"",ouml:"",ovbar:"",OverBar:"",OverBrace:"",OverBracket:"",OverParenthesis:"",par:"",para:"",parallel:"",parsim:"",parsl:"",part:"",PartialD:"",Pcy:"",pcy:"",percnt:"%",period:".",permil:"",perp:"",pertenk:"",Pfr:"",pfr:"",Phi:"",phi:"",phiv:"",phmmat:"",phone:"",Pi:"",pi:"",pitchfork:"",piv:"",planck:"",planckh:"",plankv:"",plus:"+",plusacir:"",plusb:"",pluscir:"",plusdo:"",plusdu:"",pluse:"",PlusMinus:"",plusmn:"",plussim:"",plustwo:"",pm:"",Poincareplane:"",pointint:"",Popf:"",popf:"",pound:"",Pr:"",pr:"",prap:"",prcue:"",prE:"",pre:"",prec:"",precapprox:"",preccurlyeq:"",Precedes:"",PrecedesEqual:"",PrecedesSlantEqual:"",PrecedesTilde:"",preceq:"",precnapprox:"",precneqq:"",precnsim:"",precsim:"",Prime:"",prime:"",primes:"",prnap:"",prnE:"",prnsim:"",prod:"",Product:"",profalar:"",profline:"",profsurf:"",prop:"",Proportion:"",Proportional:"",propto:"",prsim:"",prurel:"",Pscr:"",pscr:"",Psi:"",psi:"",puncsp:"",Qfr:"",qfr:"",qint:"",Qopf:"",qopf:"",qprime:"",Qscr:"",qscr:"",quaternions:"",quatint:"",quest:"?",questeq:"",QUOT:'"',quot:'"',rAarr:"",race:"",Racute:"",racute:"",radic:"",raemptyv:"",Rang:"",rang:"",rangd:"",range:"",rangle:"",raquo:"",Rarr:"",rArr:"",rarr:"",rarrap:"",rarrb:"",rarrbfs:"",rarrc:"",rarrfs:"",rarrhk:"",rarrlp:"",rarrpl:"",rarrsim:"",Rarrtl:"",rarrtl:"",rarrw:"",rAtail:"",ratail:"",ratio:"",rationals:"",RBarr:"",rBarr:"",rbarr:"",rbbrk:"",rbrace:"}",rbrack:"]",rbrke:"",rbrksld:"",rbrkslu:"",Rcaron:"",rcaron:"",Rcedil:"",rcedil:"",rceil:"",rcub:"}",Rcy:"",rcy:"",rdca:"",rdldhar:"",rdquo:"",rdquor:"",rdsh:"",Re:"",real:"",realine:"",realpart:"",reals:"",rect:"",REG:"",reg:"",ReverseElement:"",ReverseEquilibrium:"",ReverseUpEquilibrium:"",rfisht:"",rfloor:"",Rfr:"",rfr:"",rHar:"",rhard:"",rharu:"",rharul:"",Rho:"",rho:"",rhov:"",RightAngleBracket:"",RightArrow:"",Rightarrow:"",rightarrow:"",RightArrowBar:"",RightArrowLeftArrow:"",rightarrowtail:"",RightCeiling:"",RightDoubleBracket:"",RightDownTeeVector:"",RightDownVector:"",RightDownVectorBar:"",RightFloor:"",rightharpoondown:"",rightharpoonup:"",rightleftarrows:"",rightleftharpoons:"",rightrightarrows:"",rightsquigarrow:"",RightTee:"",RightTeeArrow:"",RightTeeVector:"",rightthreetimes:"",RightTriangle:"",RightTriangleBar:"",RightTriangleEqual:"",RightUpDownVector:"",RightUpTeeVector:"",RightUpVector:"",RightUpVectorBar:"",RightVector:"",RightVectorBar:"",ring:"",risingdotseq:"",rlarr:"",rlhar:"",rlm:"",rmoust:"",rmoustache:"",rnmid:"",roang:"",roarr:"",robrk:"",ropar:"",Ropf:"",ropf:"",roplus:"",rotimes:"",RoundImplies:"",rpar:")",rpargt:"",rppolint:"",rrarr:"",Rrightarrow:"",rsaquo:"",Rscr:"",rscr:"",Rsh:"",rsh:"",rsqb:"]",rsquo:"",rsquor:"",rthree:"",rtimes:"",rtri:"",rtrie:"",rtrif:"",rtriltri:"",RuleDelayed:"",ruluhar:"",rx:"",Sacute:"",sacute:"",sbquo:"",Sc:"",sc:"",scap:"",Scaron:"",scaron:"",sccue:"",scE:"",sce:"",Scedil:"",scedil:"",Scirc:"",scirc:"",scnap:"",scnE:"",scnsim:"",scpolint:"",scsim:"",Scy:"",scy:"",sdot:"",sdotb:"",sdote:"",searhk:"",seArr:"",searr:"",searrow:"",sect:"",semi:";",seswar:"",setminus:"",setmn:"",sext:"",Sfr:"",sfr:"",sfrown:"",sharp:"",SHCHcy:"",shchcy:"",SHcy:"",shcy:"",ShortDownArrow:"",ShortLeftArrow:"",shortmid:"",shortparallel:"",ShortRightArrow:"",ShortUpArrow:"",shy:"",Sigma:"",sigma:"",sigmaf:"",sigmav:"",sim:"",simdot:"",sime:"",simeq:"",simg:"",simgE:"",siml:"",simlE:"",simne:"",simplus:"",simrarr:"",slarr:"",SmallCircle:"",smallsetminus:"",smashp:"",smeparsl:"",smid:"",smile:"",smt:"",smte:"",smtes:"",SOFTcy:"",softcy:"",sol:"/",solb:"",solbar:"",Sopf:"",sopf:"",spades:"",spadesuit:"",spar:"",sqcap:"",sqcaps:"",sqcup:"",sqcups:"",Sqrt:"",sqsub:"",sqsube:"",sqsubset:"",sqsubseteq:"",sqsup:"",sqsupe:"",sqsupset:"",sqsupseteq:"",squ:"",Square:"",square:"",SquareIntersection:"",SquareSubset:"",SquareSubsetEqual:"",SquareSuperset:"",SquareSupersetEqual:"",SquareUnion:"",squarf:"",squf:"",srarr:"",Sscr:"",sscr:"",ssetmn:"",ssmile:"",sstarf:"",Star:"",star:"",starf:"",straightepsilon:"",straightphi:"",strns:"",Sub:"",sub:"",subdot:"",subE:"",sube:"",subedot:"",submult:"",subnE:"",subne:"",subplus:"",subrarr:"",Subset:"",subset:"",subseteq:"",subseteqq:"",SubsetEqual:"",subsetneq:"",subsetneqq:"",subsim:"",subsub:"",subsup:"",succ:"",succapprox:"",succcurlyeq:"",Succeeds:"",SucceedsEqual:"",SucceedsSlantEqual:"",SucceedsTilde:"",succeq:"",succnapprox:"",succneqq:"",succnsim:"",succsim:"",SuchThat:"",Sum:"",sum:"",sung:"",Sup:"",sup:"",sup1:"",sup2:"",sup3:"",supdot:"",supdsub:"",supE:"",supe:"",supedot:"",Superset:"",SupersetEqual:"",suphsol:"",suphsub:"",suplarr:"",supmult:"",supnE:"",supne:"",supplus:"",Supset:"",supset:"",supseteq:"",supseteqq:"",supsetneq:"",supsetneqq:"",supsim:"",supsub:"",supsup:"",swarhk:"",swArr:"",swarr:"",swarrow:"",swnwar:"",szlig:"",Tab:"	",target:"",Tau:"",tau:"",tbrk:"",Tcaron:"",tcaron:"",Tcedil:"",tcedil:"",Tcy:"",tcy:"",tdot:"",telrec:"",Tfr:"",tfr:"",there4:"",Therefore:"",therefore:"",Theta:"",theta:"",thetasym:"",thetav:"",thickapprox:"",thicksim:"",ThickSpace:"",thinsp:"",ThinSpace:"",thkap:"",thksim:"",THORN:"",thorn:"",Tilde:"",tilde:"",TildeEqual:"",TildeFullEqual:"",TildeTilde:"",times:"",timesb:"",timesbar:"",timesd:"",tint:"",toea:"",top:"",topbot:"",topcir:"",Topf:"",topf:"",topfork:"",tosa:"",tprime:"",TRADE:"",trade:"",triangle:"",triangledown:"",triangleleft:"",trianglelefteq:"",triangleq:"",triangleright:"",trianglerighteq:"",tridot:"",trie:"",triminus:"",TripleDot:"",triplus:"",trisb:"",tritime:"",trpezium:"",Tscr:"",tscr:"",TScy:"",tscy:"",TSHcy:"",tshcy:"",Tstrok:"",tstrok:"",twixt:"",twoheadleftarrow:"",twoheadrightarrow:"",Uacute:"",uacute:"",Uarr:"",uArr:"",uarr:"",Uarrocir:"",Ubrcy:"",ubrcy:"",Ubreve:"",ubreve:"",Ucirc:"",ucirc:"",Ucy:"",ucy:"",udarr:"",Udblac:"",udblac:"",udhar:"",ufisht:"",Ufr:"",ufr:"",Ugrave:"",ugrave:"",uHar:"",uharl:"",uharr:"",uhblk:"",ulcorn:"",ulcorner:"",ulcrop:"",ultri:"",Umacr:"",umacr:"",uml:"",UnderBar:"_",UnderBrace:"",UnderBracket:"",UnderParenthesis:"",Union:"",UnionPlus:"",Uogon:"",uogon:"",Uopf:"",uopf:"",UpArrow:"",Uparrow:"",uparrow:"",UpArrowBar:"",UpArrowDownArrow:"",UpDownArrow:"",Updownarrow:"",updownarrow:"",UpEquilibrium:"",upharpoonleft:"",upharpoonright:"",uplus:"",UpperLeftArrow:"",UpperRightArrow:"",Upsi:"",upsi:"",upsih:"",Upsilon:"",upsilon:"",UpTee:"",UpTeeArrow:"",upuparrows:"",urcorn:"",urcorner:"",urcrop:"",Uring:"",uring:"",urtri:"",Uscr:"",uscr:"",utdot:"",Utilde:"",utilde:"",utri:"",utrif:"",uuarr:"",Uuml:"",uuml:"",uwangle:"",vangrt:"",varepsilon:"",varkappa:"",varnothing:"",varphi:"",varpi:"",varpropto:"",vArr:"",varr:"",varrho:"",varsigma:"",varsubsetneq:"",varsubsetneqq:"",varsupsetneq:"",varsupsetneqq:"",vartheta:"",vartriangleleft:"",vartriangleright:"",Vbar:"",vBar:"",vBarv:"",Vcy:"",vcy:"",VDash:"",Vdash:"",vDash:"",vdash:"",Vdashl:"",Vee:"",vee:"",veebar:"",veeeq:"",vellip:"",Verbar:"",verbar:"|",Vert:"",vert:"|",VerticalBar:"",VerticalLine:"|",VerticalSeparator:"",VerticalTilde:"",VeryThinSpace:"",Vfr:"",vfr:"",vltri:"",vnsub:"",vnsup:"",Vopf:"",vopf:"",vprop:"",vrtri:"",Vscr:"",vscr:"",vsubnE:"",vsubne:"",vsupnE:"",vsupne:"",Vvdash:"",vzigzag:"",Wcirc:"",wcirc:"",wedbar:"",Wedge:"",wedge:"",wedgeq:"",weierp:"",Wfr:"",wfr:"",Wopf:"",wopf:"",wp:"",wr:"",wreath:"",Wscr:"",wscr:"",xcap:"",xcirc:"",xcup:"",xdtri:"",Xfr:"",xfr:"",xhArr:"",xharr:"",Xi:"",xi:"",xlArr:"",xlarr:"",xmap:"",xnis:"",xodot:"",Xopf:"",xopf:"",xoplus:"",xotime:"",xrArr:"",xrarr:"",Xscr:"",xscr:"",xsqcup:"",xuplus:"",xutri:"",xvee:"",xwedge:"",Yacute:"",yacute:"",YAcy:"",yacy:"",Ycirc:"",ycirc:"",Ycy:"",ycy:"",yen:"",Yfr:"",yfr:"",YIcy:"",yicy:"",Yopf:"",yopf:"",Yscr:"",yscr:"",YUcy:"",yucy:"",Yuml:"",yuml:"",Zacute:"",zacute:"",Zcaron:"",zcaron:"",Zcy:"",zcy:"",Zdot:"",zdot:"",zeetrf:"",ZeroWidthSpace:"",Zeta:"",zeta:"",Zfr:"",zfr:"",ZHcy:"",zhcy:"",zigrarr:"",Zopf:"",zopf:"",Zscr:"",zscr:"",zwj:"",zwnj:""}),r.entityMap=r.HTML_ENTITIES})(xC)),xC}var Uy={},w4;function oue(){if(w4)return Uy;w4=1;var r=kS().NAMESPACE,e=/[A-Z_a-z\xC0-\xD6\xD8-\xF6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,t=new RegExp("[\\-\\.0-9"+e.source.slice(1,-1)+"\\u00B7\\u0300-\\u036F\\u203F-\\u2040]"),n=new RegExp("^"+e.source+t.source+"*(?::"+e.source+t.source+"*)?$"),i=0,s=1,a=2,o=3,l=4,u=5,c=6,h=7;function f(B,A){this.message=B,this.locator=A,Error.captureStackTrace&&Error.captureStackTrace(this,f)}f.prototype=new Error,f.prototype.name=f.name;function g(){}g.prototype={parse:function(B,A,$){var W=this.domBuilder;W.startDocument(),I(A,A={}),v(B,A,$,W,this.errorHandler),W.endDocument()}};function v(B,A,$,W,V){function Q(bt){if(bt>65535){bt-=65536;var lt=55296+(bt>>10),gr=56320+(bt&1023);return String.fromCharCode(lt,gr)}else return String.fromCharCode(bt)}function ie(bt){var lt=bt.slice(1,-1);return Object.hasOwnProperty.call($,lt)?$[lt]:lt.charAt(0)==="#"?Q(parseInt(lt.substr(1).replace("x","0x"))):(V.error("entity not found:"+bt),bt)}function ne(bt){if(bt>ye){var lt=B.substring(ye,bt).replace(/&#?\w+;/g,ie);ee&&ue(ye),W.characters(lt,0,bt-ye),ye=bt}}function ue(bt,lt){for(;bt>=ae&&(lt=ce.exec(B));)se=lt.index,ae=se+lt[0].length,ee.lineNumber++;ee.columnNumber=bt-se+1}for(var se=0,ae=0,ce=/.*(?:\r\n?|\n)|.*$/g,ee=W.locator,pe=[{currentNSMap:A}],me={},ye=0;;){try{var Oe=B.indexOf("<",ye);if(Oe<0){if(!B.substr(ye).match(/^\s*$/)){var Le=W.doc,st=Le.createTextNode(B.substr(ye));Le.appendChild(st),W.currentElement=st}return}switch(Oe>ye&&ne(Oe),B.charAt(Oe+1)){case"/":var Ue=B.indexOf(">",Oe+3),ze=B.substring(Oe+2,Ue).replace(/[ \t\n\r]+$/g,""),pt=pe.pop();Ue<0?(ze=B.substring(Oe+2).replace(/[\s<].*/,""),V.error("end tag name: "+ze+" is not complete:"+pt.tagName),Ue=Oe+1+ze.length):ze.match(/\s</)&&(ze=ze.replace(/[\s<].*/,""),V.error("end tag name: "+ze+" maybe not complete"),Ue=Oe+1+ze.length);var Ye=pt.localNSMap,Pt=pt.tagName==ze,Rt=Pt||pt.tagName&&pt.tagName.toLowerCase()==ze.toLowerCase();if(Rt){if(W.endElement(pt.uri,pt.localName,ze),Ye)for(var Ve in Ye)Object.prototype.hasOwnProperty.call(Ye,Ve)&&W.endPrefixMapping(Ve);Pt||V.fatalError("end tag name: "+ze+" is not match the current start tagName:"+pt.tagName)}else pe.push(pt);Ue++;break;case"?":ee&&ue(Oe),Ue=P(B,Oe,W);break;case"!":ee&&ue(Oe),Ue=k(B,Oe,W,V);break;default:ee&&ue(Oe);var Ne=new N,Ie=pe[pe.length-1].currentNSMap,Ue=_(B,Oe,Ne,Ie,ie,V),et=Ne.length;if(!Ne.closed&&D(B,Ue,Ne.tagName,me)&&(Ne.closed=!0,$.nbsp||V.warning("unclosed xml attribute")),ee&&et){for(var ot=y(ee,{}),dt=0;dt<et;dt++){var it=Ne[dt];ue(it.offset),it.locator=y(ee,{})}W.locator=ot,C(Ne,W,Ie)&&pe.push(Ne),W.locator=ee}else C(Ne,W,Ie)&&pe.push(Ne);r.isHTML(Ne.uri)&&!Ne.closed?Ue=E(B,Ue,Ne.tagName,ie,W):Ue++}}catch(bt){if(bt instanceof f)throw bt;V.error("element parse error: "+bt),Ue=-1}Ue>ye?ye=Ue:ne(Math.max(Oe,ye)+1)}}function y(B,A){return A.lineNumber=B.lineNumber,A.columnNumber=B.columnNumber,A}function _(B,A,$,W,V,Q){function ie(ee,pe,me){$.attributeNames.hasOwnProperty(ee)&&Q.fatalError("Attribute "+ee+" redefined"),$.addValue(ee,pe.replace(/[\t\n\r]/g," ").replace(/&#?\w+;/g,V),me)}for(var ne,ue,se=++A,ae=i;;){var ce=B.charAt(se);switch(ce){case"=":if(ae===s)ne=B.slice(A,se),ae=o;else if(ae===a)ae=o;else throw new Error("attribute equal must after attrName");break;case"'":case'"':if(ae===o||ae===s)if(ae===s&&(Q.warning('attribute value must after "="'),ne=B.slice(A,se)),A=se+1,se=B.indexOf(ce,A),se>0)ue=B.slice(A,se),ie(ne,ue,A-1),ae=u;else throw new Error("attribute value no end '"+ce+"' match");else if(ae==l)ue=B.slice(A,se),ie(ne,ue,A),Q.warning('attribute "'+ne+'" missed start quot('+ce+")!!"),A=se+1,ae=u;else throw new Error('attribute value must after "="');break;case"/":switch(ae){case i:$.setTagName(B.slice(A,se));case u:case c:case h:ae=h,$.closed=!0;case l:case s:break;case a:$.closed=!0;break;default:throw new Error("attribute invalid close char('/')")}break;case"":return Q.error("unexpected end of input"),ae==i&&$.setTagName(B.slice(A,se)),se;case">":switch(ae){case i:$.setTagName(B.slice(A,se));case u:case c:case h:break;case l:case s:ue=B.slice(A,se),ue.slice(-1)==="/"&&($.closed=!0,ue=ue.slice(0,-1));case a:ae===a&&(ue=ne),ae==l?(Q.warning('attribute "'+ue+'" missed quot(")!'),ie(ne,ue,A)):((!r.isHTML(W[""])||!ue.match(/^(?:disabled|checked|selected)$/i))&&Q.warning('attribute "'+ue+'" missed value!! "'+ue+'" instead!!'),ie(ue,ue,A));break;case o:throw new Error("attribute value missed!!")}return se;case"":ce=" ";default:if(ce<=" ")switch(ae){case i:$.setTagName(B.slice(A,se)),ae=c;break;case s:ne=B.slice(A,se),ae=a;break;case l:var ue=B.slice(A,se);Q.warning('attribute "'+ue+'" missed quot(")!!'),ie(ne,ue,A);case u:ae=c;break}else switch(ae){case a:$.tagName,(!r.isHTML(W[""])||!ne.match(/^(?:disabled|checked|selected)$/i))&&Q.warning('attribute "'+ne+'" missed value!! "'+ne+'" instead2!!'),ie(ne,ne,A),A=se,ae=s;break;case u:Q.warning('attribute space is required"'+ne+'"!!');case c:ae=s,A=se;break;case o:ae=l,A=se;break;case h:throw new Error("elements closed character '/' and '>' must be connected to")}}se++}}function C(B,A,$){for(var W=B.tagName,V=null,ce=B.length;ce--;){var Q=B[ce],ie=Q.qName,ne=Q.value,ee=ie.indexOf(":");if(ee>0)var ue=Q.prefix=ie.slice(0,ee),se=ie.slice(ee+1),ae=ue==="xmlns"&&se;else se=ie,ue=null,ae=ie==="xmlns"&&"";Q.localName=se,ae!==!1&&(V==null&&(V={},I($,$={})),$[ae]=V[ae]=ne,Q.uri=r.XMLNS,A.startPrefixMapping(ae,ne))}for(var ce=B.length;ce--;){Q=B[ce];var ue=Q.prefix;ue&&(ue==="xml"&&(Q.uri=r.XML),ue!=="xmlns"&&(Q.uri=$[ue||""]))}var ee=W.indexOf(":");ee>0?(ue=B.prefix=W.slice(0,ee),se=B.localName=W.slice(ee+1)):(ue=null,se=B.localName=W);var pe=B.uri=$[ue||""];if(A.startElement(pe,se,W,B),B.closed){if(A.endElement(pe,se,W),V)for(ue in V)Object.prototype.hasOwnProperty.call(V,ue)&&A.endPrefixMapping(ue)}else return B.currentNSMap=$,B.localNSMap=V,!0}function E(B,A,$,W,V){if(/^(?:script|textarea)$/i.test($)){var Q=B.indexOf("</"+$+">",A),ie=B.substring(A+1,Q);if(/[&<]/.test(ie))return/^script$/i.test($)?(V.characters(ie,0,ie.length),Q):(ie=ie.replace(/&#?\w+;/g,W),V.characters(ie,0,ie.length),Q)}return A+1}function D(B,A,$,W){var V=W[$];return V==null&&(V=B.lastIndexOf("</"+$+">"),V<A&&(V=B.lastIndexOf("</"+$)),W[$]=V),V<A}function I(B,A){for(var $ in B)Object.prototype.hasOwnProperty.call(B,$)&&(A[$]=B[$])}function k(B,A,$,W){var V=B.charAt(A+2);switch(V){case"-":if(B.charAt(A+3)==="-"){var Q=B.indexOf("-->",A+4);return Q>A?($.comment(B,A+4,Q-A-4),Q+3):(W.error("Unclosed comment"),-1)}else return-1;default:if(B.substr(A+3,6)=="CDATA["){var Q=B.indexOf("]]>",A+9);return $.startCDATA(),$.characters(B,A+9,Q-A-9),$.endCDATA(),Q+3}var ie=U(B,A),ne=ie.length;if(ne>1&&/!doctype/i.test(ie[0][0])){var ue=ie[1][0],se=!1,ae=!1;ne>3&&(/^public$/i.test(ie[2][0])?(se=ie[3][0],ae=ne>4&&ie[4][0]):/^system$/i.test(ie[2][0])&&(ae=ie[3][0]));var ce=ie[ne-1];return $.startDTD(ue,se,ae),$.endDTD(),ce.index+ce[0].length}}return-1}function P(B,A,$){var W=B.indexOf("?>",A);if(W){var V=B.substring(A,W).match(/^<\?(\S*)\s*([\s\S]*?)\s*$/);return V?(V[0].length,$.processingInstruction(V[1],V[2]),W+2):-1}return-1}function N(){this.attributeNames={}}N.prototype={setTagName:function(B){if(!n.test(B))throw new Error("invalid tagName:"+B);this.tagName=B},addValue:function(B,A,$){if(!n.test(B))throw new Error("invalid attribute:"+B);this.attributeNames[B]=this.length,this[this.length++]={qName:B,value:A,offset:$}},length:0,getLocalName:function(B){return this[B].localName},getLocator:function(B){return this[B].locator},getQName:function(B){return this[B].qName},getURI:function(B){return this[B].uri},getValue:function(B){return this[B].value}};function U(B,A){var $,W=[],V=/'[^']+'|"[^"]+"|[^\s<>\/=]+=?|(\/?\s*>|<)/g;for(V.lastIndex=A,V.exec(B);$=V.exec(B);)if(W.push($),$[1])return W}return Uy.XMLReader=g,Uy.ParseError=f,Uy}var E4;function lue(){if(E4)return D0;E4=1;var r=kS(),e=L5(),t=aue(),n=oue(),i=e.DOMImplementation,s=r.NAMESPACE,a=n.ParseError,o=n.XMLReader;function l(_){return _.replace(/\r[\n\u0085]/g,`
`).replace(/[\r\u0085\u2028]/g,`
`)}function u(_){this.options=_||{locator:{}}}u.prototype.parseFromString=function(_,C){var E=this.options,D=new o,I=E.domBuilder||new h,k=E.errorHandler,P=E.locator,N=E.xmlns||{},U=/\/x?html?$/.test(C),B=U?t.HTML_ENTITIES:t.XML_ENTITIES;P&&I.setDocumentLocator(P),D.errorHandler=c(k,I,P),D.domBuilder=E.domBuilder||I,U&&(N[""]=s.HTML),N.xml=N.xml||s.XML;var A=E.normalizeLineEndings||l;return _&&typeof _=="string"?D.parse(A(_),N,B):D.errorHandler.error("invalid doc source"),I.doc};function c(_,C,E){if(!_){if(C instanceof h)return C;_=C}var D={},I=_ instanceof Function;E=E||{};function k(P){var N=_[P];!N&&I&&(N=_.length==2?function(U){_(P,U)}:_),D[P]=N&&function(U){N("[xmldom "+P+"]	"+U+g(E))}||function(){}}return k("warning"),k("error"),k("fatalError"),D}function h(){this.cdata=!1}function f(_,C){C.lineNumber=_.lineNumber,C.columnNumber=_.columnNumber}h.prototype={startDocument:function(){this.doc=new i().createDocument(null,null,null),this.locator&&(this.doc.documentURI=this.locator.systemId)},startElement:function(_,C,E,D){var I=this.doc,k=I.createElementNS(_,E||C),P=D.length;y(this,k),this.currentElement=k,this.locator&&f(this.locator,k);for(var N=0;N<P;N++){var _=D.getURI(N),U=D.getValue(N),E=D.getQName(N),B=I.createAttributeNS(_,E);this.locator&&f(D.getLocator(N),B),B.value=B.nodeValue=U,k.setAttributeNode(B)}},endElement:function(_,C,E){var D=this.currentElement;D.tagName,this.currentElement=D.parentNode},startPrefixMapping:function(_,C){},endPrefixMapping:function(_){},processingInstruction:function(_,C){var E=this.doc.createProcessingInstruction(_,C);this.locator&&f(this.locator,E),y(this,E)},ignorableWhitespace:function(_,C,E){},characters:function(_,C,E){if(_=v.apply(this,arguments),_){if(this.cdata)var D=this.doc.createCDATASection(_);else var D=this.doc.createTextNode(_);this.currentElement?this.currentElement.appendChild(D):/^\s*$/.test(_)&&this.doc.appendChild(D),this.locator&&f(this.locator,D)}},skippedEntity:function(_){},endDocument:function(){this.doc.normalize()},setDocumentLocator:function(_){(this.locator=_)&&(_.lineNumber=0)},comment:function(_,C,E){_=v.apply(this,arguments);var D=this.doc.createComment(_);this.locator&&f(this.locator,D),y(this,D)},startCDATA:function(){this.cdata=!0},endCDATA:function(){this.cdata=!1},startDTD:function(_,C,E){var D=this.doc.implementation;if(D&&D.createDocumentType){var I=D.createDocumentType(_,C,E);this.locator&&f(this.locator,I),y(this,I),this.doc.doctype=I}},warning:function(_){console.warn("[xmldom warning]	"+_,g(this.locator))},error:function(_){console.error("[xmldom error]	"+_,g(this.locator))},fatalError:function(_){throw new a(_,this.locator)}};function g(_){if(_)return`
@`+(_.systemId||"")+"#[line:"+_.lineNumber+",col:"+_.columnNumber+"]"}function v(_,C,E){return typeof _=="string"?_.substr(C,E):_.length>=C+E||C?new java.lang.String(_,C,E)+"":_}"endDTD,startEntity,endEntity,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,resolveEntity,getExternalSubset,notationDecl,unparsedEntityDecl".replace(/\w+/g,function(_){h.prototype[_]=function(){return null}});function y(_,C){_.currentElement?_.currentElement.appendChild(C):_.doc.appendChild(C)}return D0.__DOMHandler=h,D0.normalizeLineEndings=l,D0.DOMParser=u,D0}var k4;function uue(){if(k4)return A0;k4=1;var r=L5();return A0.DOMImplementation=r.DOMImplementation,A0.XMLSerializer=r.XMLSerializer,A0.DOMParser=lue().DOMParser,A0}var O5=uue();/*! @name mpd-parser @version 1.3.1 @license Apache-2.0 */const A4=r=>!!r&&typeof r=="object",rs=(...r)=>r.reduce((e,t)=>(typeof t!="object"||Object.keys(t).forEach(n=>{Array.isArray(e[n])&&Array.isArray(t[n])?e[n]=e[n].concat(t[n]):A4(e[n])&&A4(t[n])?e[n]=rs(e[n],t[n]):e[n]=t[n]}),e),{}),M5=r=>Object.keys(r).map(e=>r[e]),cue=(r,e)=>{const t=[];for(let n=r;n<e;n++)t.push(n);return t},Qp=r=>r.reduce((e,t)=>e.concat(t),[]),F5=r=>{if(!r.length)return[];const e=[];for(let t=0;t<r.length;t++)e.push(r[t]);return e},due=(r,e)=>r.reduce((t,n,i)=>(n[e]&&t.push(i),t),[]),hue=(r,e)=>M5(r.reduce((t,n)=>(n.forEach(i=>{t[e(i)]=i}),t),{}));var Jp={INVALID_NUMBER_OF_PERIOD:"INVALID_NUMBER_OF_PERIOD",DASH_EMPTY_MANIFEST:"DASH_EMPTY_MANIFEST",DASH_INVALID_XML:"DASH_INVALID_XML",NO_BASE_URL:"NO_BASE_URL",SEGMENT_TIME_UNSPECIFIED:"SEGMENT_TIME_UNSPECIFIED",UNSUPPORTED_UTC_TIMING_SCHEME:"UNSUPPORTED_UTC_TIMING_SCHEME"};const Og=({baseUrl:r="",source:e="",range:t="",indexRange:n=""})=>{const i={uri:e,resolvedUri:pv(r||"",e)};if(t||n){const a=(t||n).split("-");let o=X.BigInt?X.BigInt(a[0]):parseInt(a[0],10),l=X.BigInt?X.BigInt(a[1]):parseInt(a[1],10);o<Number.MAX_SAFE_INTEGER&&typeof o=="bigint"&&(o=Number(o)),l<Number.MAX_SAFE_INTEGER&&typeof l=="bigint"&&(l=Number(l));let u;typeof l=="bigint"||typeof o=="bigint"?u=X.BigInt(l)-X.BigInt(o)+X.BigInt(1):u=l-o+1,typeof u=="bigint"&&u<Number.MAX_SAFE_INTEGER&&(u=Number(u)),i.byterange={length:u,offset:o}}return i},fue=r=>{let e;return typeof r.offset=="bigint"||typeof r.length=="bigint"?e=X.BigInt(r.offset)+X.BigInt(r.length)-X.BigInt(1):e=r.offset+r.length-1,`${r.offset}-${e}`},D4=r=>(r&&typeof r!="number"&&(r=parseInt(r,10)),isNaN(r)?null:r),pue={static(r){const{duration:e,timescale:t=1,sourceDuration:n,periodDuration:i}=r,s=D4(r.endNumber),a=e/t;return typeof s=="number"?{start:0,end:s}:typeof i=="number"?{start:0,end:i/a}:{start:0,end:n/a}},dynamic(r){const{NOW:e,clientOffset:t,availabilityStartTime:n,timescale:i=1,duration:s,periodStart:a=0,minimumUpdatePeriod:o=0,timeShiftBufferDepth:l=1/0}=r,u=D4(r.endNumber),c=(e+t)/1e3,h=n+a,g=c+o-h,v=Math.ceil(g*i/s),y=Math.floor((c-h-l)*i/s),_=Math.floor((c-h)*i/s);return{start:Math.max(0,y),end:typeof u=="number"?u:Math.min(v,_)}}},mue=r=>e=>{const{duration:t,timescale:n=1,periodStart:i,startNumber:s=1}=r;return{number:s+e,duration:t/n,timeline:i,time:e*t}},zk=r=>{const{type:e,duration:t,timescale:n=1,periodDuration:i,sourceDuration:s}=r,{start:a,end:o}=pue[e](r),l=cue(a,o).map(mue(r));if(e==="static"){const u=l.length-1,c=typeof i=="number"?i:s;l[u].duration=c-t/n*u}return l},B5=r=>{const{baseUrl:e,initialization:t={},sourceDuration:n,indexRange:i="",periodStart:s,presentationTime:a,number:o=0,duration:l}=r;if(!e)throw new Error(Jp.NO_BASE_URL);const u=Og({baseUrl:e,source:t.sourceURL,range:t.range}),c=Og({baseUrl:e,source:e,indexRange:i});if(c.map=u,l){const h=zk(r);h.length&&(c.duration=h[0].duration,c.timeline=h[0].timeline)}else n&&(c.duration=n,c.timeline=s);return c.presentationTime=a||s,c.number=o,[c]},mv=(r,e,t)=>{const n=r.sidx.map?r.sidx.map:null,i=r.sidx.duration,s=r.timeline||0,a=r.sidx.byterange,o=a.offset+a.length,l=e.timescale,u=e.references.filter(_=>_.referenceType!==1),c=[],h=r.endList?"static":"dynamic",f=r.sidx.timeline;let g=f,v=r.mediaSequence||0,y;typeof e.firstOffset=="bigint"?y=X.BigInt(o)+e.firstOffset:y=o+e.firstOffset;for(let _=0;_<u.length;_++){const C=e.references[_],E=C.referencedSize,D=C.subsegmentDuration;let I;typeof y=="bigint"?I=y+X.BigInt(E)-X.BigInt(1):I=y+E-1;const k=`${y}-${I}`,N=B5({baseUrl:t,timescale:l,timeline:s,periodStart:f,presentationTime:g,number:v,duration:D,sourceDuration:i,indexRange:k,type:h})[0];n&&(N.map=n),c.push(N),typeof y=="bigint"?y+=X.BigInt(E):y+=E,g+=D/l,v++}return r.segments=c,r},gue=["AUDIO","SUBTITLES"],vue=1/60,N5=r=>hue(r,({timeline:e})=>e).sort((e,t)=>e.timeline>t.timeline?1:-1),yue=(r,e)=>{for(let t=0;t<r.length;t++)if(r[t].attributes.NAME===e)return r[t];return null},I4=r=>{let e=[];return sue(r,gue,(t,n,i,s)=>{e=e.concat(t.playlists||[])}),e},P4=({playlist:r,mediaSequence:e})=>{r.mediaSequence=e,r.segments.forEach((t,n)=>{t.number=r.mediaSequence+n})},xue=({oldPlaylists:r,newPlaylists:e,timelineStarts:t})=>{e.forEach(n=>{n.discontinuitySequence=t.findIndex(function({timeline:l}){return l===n.timeline});const i=yue(r,n.attributes.NAME);if(!i||n.sidx)return;const s=n.segments[0],a=i.segments.findIndex(function(l){return Math.abs(l.presentationTime-s.presentationTime)<vue});if(a===-1){P4({playlist:n,mediaSequence:i.mediaSequence+i.segments.length}),n.segments[0].discontinuity=!0,n.discontinuityStarts.unshift(0),(!i.segments.length&&n.timeline>i.timeline||i.segments.length&&n.timeline>i.segments[i.segments.length-1].timeline)&&n.discontinuitySequence--;return}i.segments[a].discontinuity&&!s.discontinuity&&(s.discontinuity=!0,n.discontinuityStarts.unshift(0),n.discontinuitySequence--),P4({playlist:n,mediaSequence:i.segments[a].number})})},_ue=({oldManifest:r,newManifest:e})=>{const t=r.playlists.concat(I4(r)),n=e.playlists.concat(I4(e));return e.timelineStarts=N5([r.timelineStarts,e.timelineStarts]),xue({oldPlaylists:t,newPlaylists:n,timelineStarts:e.timelineStarts}),e},bf=r=>r&&r.uri+"-"+fue(r.byterange),_C=r=>{const e=r.reduce(function(n,i){return n[i.attributes.baseUrl]||(n[i.attributes.baseUrl]=[]),n[i.attributes.baseUrl].push(i),n},{});let t=[];return Object.values(e).forEach(n=>{const i=M5(n.reduce((s,a)=>{const o=a.attributes.id+(a.attributes.lang||"");return s[o]?(a.segments&&(a.segments[0]&&(a.segments[0].discontinuity=!0),s[o].segments.push(...a.segments)),a.attributes.contentProtection&&(s[o].attributes.contentProtection=a.attributes.contentProtection)):(s[o]=a,s[o].attributes.timelineStarts=[]),s[o].attributes.timelineStarts.push({start:a.attributes.periodStart,timeline:a.attributes.periodStart}),s},{}));t=t.concat(i)}),t.map(n=>(n.discontinuityStarts=due(n.segments||[],"discontinuity"),n))},Hk=(r,e)=>{const t=bf(r.sidx),n=t&&e[t]&&e[t].sidx;return n&&mv(r,n,r.sidx.resolvedUri),r},bue=(r,e={})=>{if(!Object.keys(e).length)return r;for(const t in r)r[t]=Hk(r[t],e);return r},Sue=({attributes:r,segments:e,sidx:t,mediaSequence:n,discontinuitySequence:i,discontinuityStarts:s},a)=>{const o={attributes:{NAME:r.id,BANDWIDTH:r.bandwidth,CODECS:r.codecs,"PROGRAM-ID":1},uri:"",endList:r.type==="static",timeline:r.periodStart,resolvedUri:r.baseUrl||"",targetDuration:r.duration,discontinuitySequence:i,discontinuityStarts:s,timelineStarts:r.timelineStarts,mediaSequence:n,segments:e};return r.contentProtection&&(o.contentProtection=r.contentProtection),r.serviceLocation&&(o.attributes.serviceLocation=r.serviceLocation),t&&(o.sidx=t),a&&(o.attributes.AUDIO="audio",o.attributes.SUBTITLES="subs"),o},Tue=({attributes:r,segments:e,mediaSequence:t,discontinuityStarts:n,discontinuitySequence:i})=>{typeof e>"u"&&(e=[{uri:r.baseUrl,timeline:r.periodStart,resolvedUri:r.baseUrl||"",duration:r.sourceDuration,number:0}],r.duration=r.sourceDuration);const s={NAME:r.id,BANDWIDTH:r.bandwidth,"PROGRAM-ID":1};r.codecs&&(s.CODECS=r.codecs);const a={attributes:s,uri:"",endList:r.type==="static",timeline:r.periodStart,resolvedUri:r.baseUrl||"",targetDuration:r.duration,timelineStarts:r.timelineStarts,discontinuityStarts:n,discontinuitySequence:i,mediaSequence:t,segments:e};return r.serviceLocation&&(a.attributes.serviceLocation=r.serviceLocation),a},Cue=(r,e={},t=!1)=>{let n;const i=r.reduce((s,a)=>{const o=a.attributes.role&&a.attributes.role.value||"",l=a.attributes.lang||"";let u=a.attributes.label||"main";if(l&&!a.attributes.label){const h=o?` (${o})`:"";u=`${a.attributes.lang}${h}`}s[u]||(s[u]={language:l,autoselect:!0,default:o==="main",playlists:[],uri:""});const c=Hk(Sue(a,t),e);return s[u].playlists.push(c),typeof n>"u"&&o==="main"&&(n=a,n.default=!0),s},{});if(!n){const s=Object.keys(i)[0];i[s].default=!0}return i},wue=(r,e={})=>r.reduce((t,n)=>{const i=n.attributes.label||n.attributes.lang||"text",s=n.attributes.lang||"und";return t[i]||(t[i]={language:s,default:!1,autoselect:!1,playlists:[],uri:""}),t[i].playlists.push(Hk(Tue(n),e)),t},{}),Eue=r=>r.reduce((e,t)=>(t&&t.forEach(n=>{const{channel:i,language:s}=n;e[s]={autoselect:!1,default:!1,instreamId:i,language:s},n.hasOwnProperty("aspectRatio")&&(e[s].aspectRatio=n.aspectRatio),n.hasOwnProperty("easyReader")&&(e[s].easyReader=n.easyReader),n.hasOwnProperty("3D")&&(e[s]["3D"]=n["3D"])}),e),{}),kue=({attributes:r,segments:e,sidx:t,discontinuityStarts:n})=>{const i={attributes:{NAME:r.id,AUDIO:"audio",SUBTITLES:"subs",RESOLUTION:{width:r.width,height:r.height},CODECS:r.codecs,BANDWIDTH:r.bandwidth,"PROGRAM-ID":1},uri:"",endList:r.type==="static",timeline:r.periodStart,resolvedUri:r.baseUrl||"",targetDuration:r.duration,discontinuityStarts:n,timelineStarts:r.timelineStarts,segments:e};return r.frameRate&&(i.attributes["FRAME-RATE"]=r.frameRate),r.contentProtection&&(i.contentProtection=r.contentProtection),r.serviceLocation&&(i.attributes.serviceLocation=r.serviceLocation),t&&(i.sidx=t),i},Aue=({attributes:r})=>r.mimeType==="video/mp4"||r.mimeType==="video/webm"||r.contentType==="video",Due=({attributes:r})=>r.mimeType==="audio/mp4"||r.mimeType==="audio/webm"||r.contentType==="audio",Iue=({attributes:r})=>r.mimeType==="text/vtt"||r.contentType==="text",Pue=(r,e)=>{r.forEach(t=>{t.mediaSequence=0,t.discontinuitySequence=e.findIndex(function({timeline:n}){return n===t.timeline}),t.segments&&t.segments.forEach((n,i)=>{n.number=i})})},R4=r=>r?Object.keys(r).reduce((e,t)=>{const n=r[t];return e.concat(n.playlists)},[]):[],Rue=({dashPlaylists:r,locations:e,contentSteering:t,sidxMapping:n={},previousManifest:i,eventStream:s})=>{if(!r.length)return{};const{sourceDuration:a,type:o,suggestedPresentationDelay:l,minimumUpdatePeriod:u}=r[0].attributes,c=_C(r.filter(Aue)).map(kue),h=_C(r.filter(Due)),f=_C(r.filter(Iue)),g=r.map(I=>I.attributes.captionServices).filter(Boolean),v={allowCache:!0,discontinuityStarts:[],segments:[],endList:!0,mediaGroups:{AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},uri:"",duration:a,playlists:bue(c,n)};u>=0&&(v.minimumUpdatePeriod=u*1e3),e&&(v.locations=e),t&&(v.contentSteering=t),o==="dynamic"&&(v.suggestedPresentationDelay=l),s&&s.length>0&&(v.eventStream=s);const y=v.playlists.length===0,_=h.length?Cue(h,n,y):null,C=f.length?wue(f,n):null,E=c.concat(R4(_),R4(C)),D=E.map(({timelineStarts:I})=>I);return v.timelineStarts=N5(D),Pue(E,v.timelineStarts),_&&(v.mediaGroups.AUDIO.audio=_),C&&(v.mediaGroups.SUBTITLES.subs=C),g.length&&(v.mediaGroups["CLOSED-CAPTIONS"].cc=Eue(g)),i?_ue({oldManifest:i,newManifest:v}):v},Lue=(r,e,t)=>{const{NOW:n,clientOffset:i,availabilityStartTime:s,timescale:a=1,periodStart:o=0,minimumUpdatePeriod:l=0}=r,u=(n+i)/1e3,c=s+o,f=u+l-c;return Math.ceil((f*a-e)/t)},U5=(r,e)=>{const{type:t,minimumUpdatePeriod:n=0,media:i="",sourceDuration:s,timescale:a=1,startNumber:o=1,periodStart:l}=r,u=[];let c=-1;for(let h=0;h<e.length;h++){const f=e[h],g=f.d,v=f.r||0,y=f.t||0;c<0&&(c=y),y&&y>c&&(c=y);let _;if(v<0){const D=h+1;D===e.length?t==="dynamic"&&n>0&&i.indexOf("$Number$")>0?_=Lue(r,c,g):_=(s*a-c)/g:_=(e[D].t-c)/g}else _=v+1;const C=o+u.length+_;let E=o+u.length;for(;E<C;)u.push({number:E,duration:g/a,time:c,timeline:l}),c+=g,E++}return u},Oue=/\$([A-z]*)(?:(%0)([0-9]+)d)?\$/g,Mue=r=>(e,t,n,i)=>{if(e==="$$")return"$";if(typeof r[t]>"u")return e;const s=""+r[t];return t==="RepresentationID"||(n?i=parseInt(i,10):i=1,s.length>=i)?s:`${new Array(i-s.length+1).join("0")}${s}`},L4=(r,e)=>r.replace(Oue,Mue(e)),Fue=(r,e)=>!r.duration&&!e?[{number:r.startNumber||1,duration:r.sourceDuration,time:0,timeline:r.periodStart}]:r.duration?zk(r):U5(r,e),Bue=(r,e)=>{const t={RepresentationID:r.id,Bandwidth:r.bandwidth||0},{initialization:n={sourceURL:"",range:""}}=r,i=Og({baseUrl:r.baseUrl,source:L4(n.sourceURL,t),range:n.range});return Fue(r,e).map(a=>{t.Number=a.number,t.Time=a.time;const o=L4(r.media||"",t),l=r.timescale||1,u=r.presentationTimeOffset||0,c=r.periodStart+(a.time-u)/l;return{uri:o,timeline:a.timeline,duration:a.duration,resolvedUri:pv(r.baseUrl||"",o),map:i,number:a.number,presentationTime:c}})},Nue=(r,e)=>{const{baseUrl:t,initialization:n={}}=r,i=Og({baseUrl:t,source:n.sourceURL,range:n.range}),s=Og({baseUrl:t,source:e.media,range:e.mediaRange});return s.map=i,s},Uue=(r,e)=>{const{duration:t,segmentUrls:n=[],periodStart:i}=r;if(!t&&!e||t&&e)throw new Error(Jp.SEGMENT_TIME_UNSPECIFIED);const s=n.map(l=>Nue(r,l));let a;return t&&(a=zk(r)),e&&(a=U5(r,e)),a.map((l,u)=>{if(s[u]){const c=s[u],h=r.timescale||1,f=r.presentationTimeOffset||0;return c.timeline=l.timeline,c.duration=l.duration,c.number=l.number,c.presentationTime=i+(l.time-f)/h,c}}).filter(l=>l)},$ue=({attributes:r,segmentInfo:e})=>{let t,n;e.template?(n=Bue,t=rs(r,e.template)):e.base?(n=B5,t=rs(r,e.base)):e.list&&(n=Uue,t=rs(r,e.list));const i={attributes:r};if(!n)return i;const s=n(t,e.segmentTimeline);if(t.duration){const{duration:a,timescale:o=1}=t;t.duration=a/o}else s.length?t.duration=s.reduce((a,o)=>Math.max(a,Math.ceil(o.duration)),0):t.duration=0;return i.attributes=t,i.segments=s,e.base&&t.indexRange&&(i.sidx=s[0],i.segments=[]),i},jue=r=>r.map($ue),Zn=(r,e)=>F5(r.childNodes).filter(({tagName:t})=>t===e),gv=r=>r.textContent.trim(),zue=r=>parseFloat(r.split("/").reduce((e,t)=>e/t)),Kf=r=>{const o=/P(?:(\d*)Y)?(?:(\d*)M)?(?:(\d*)D)?(?:T(?:(\d*)H)?(?:(\d*)M)?(?:([\d.]*)S)?)?/.exec(r);if(!o)return 0;const[l,u,c,h,f,g]=o.slice(1);return parseFloat(l||0)*31536e3+parseFloat(u||0)*2592e3+parseFloat(c||0)*86400+parseFloat(h||0)*3600+parseFloat(f||0)*60+parseFloat(g||0)},Hue=r=>(/^\d+-\d+-\d+T\d+:\d+:\d+(\.\d+)?$/.test(r)&&(r+="Z"),Date.parse(r)),O4={mediaPresentationDuration(r){return Kf(r)},availabilityStartTime(r){return Hue(r)/1e3},minimumUpdatePeriod(r){return Kf(r)},suggestedPresentationDelay(r){return Kf(r)},type(r){return r},timeShiftBufferDepth(r){return Kf(r)},start(r){return Kf(r)},width(r){return parseInt(r,10)},height(r){return parseInt(r,10)},bandwidth(r){return parseInt(r,10)},frameRate(r){return zue(r)},startNumber(r){return parseInt(r,10)},timescale(r){return parseInt(r,10)},presentationTimeOffset(r){return parseInt(r,10)},duration(r){const e=parseInt(r,10);return isNaN(e)?Kf(r):e},d(r){return parseInt(r,10)},t(r){return parseInt(r,10)},r(r){return parseInt(r,10)},presentationTime(r){return parseInt(r,10)},DEFAULT(r){return r}},ki=r=>r&&r.attributes?F5(r.attributes).reduce((e,t)=>{const n=O4[t.name]||O4.DEFAULT;return e[t.name]=n(t.value),e},{}):{},Vue={"urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b":"org.w3.clearkey","urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":"com.widevine.alpha","urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95":"com.microsoft.playready","urn:uuid:f239e769-efa3-4850-9c16-a903c6932efb":"com.adobe.primetime","urn:mpeg:dash:mp4protection:2011":"mp4protection"},AS=(r,e)=>e.length?Qp(r.map(function(t){return e.map(function(n){const i=gv(n),s=pv(t.baseUrl,i),a=rs(ki(n),{baseUrl:s});return s!==i&&!a.serviceLocation&&t.serviceLocation&&(a.serviceLocation=t.serviceLocation),a})})):r,Vk=r=>{const e=Zn(r,"SegmentTemplate")[0],t=Zn(r,"SegmentList")[0],n=t&&Zn(t,"SegmentURL").map(h=>rs({tag:"SegmentURL"},ki(h))),i=Zn(r,"SegmentBase")[0],s=t||e,a=s&&Zn(s,"SegmentTimeline")[0],o=t||i||e,l=o&&Zn(o,"Initialization")[0],u=e&&ki(e);u&&l?u.initialization=l&&ki(l):u&&u.initialization&&(u.initialization={sourceURL:u.initialization});const c={template:u,segmentTimeline:a&&Zn(a,"S").map(h=>ki(h)),list:t&&rs(ki(t),{segmentUrls:n,initialization:ki(l)}),base:i&&rs(ki(i),{initialization:ki(l)})};return Object.keys(c).forEach(h=>{c[h]||delete c[h]}),c},Wue=(r,e,t)=>n=>{const i=Zn(n,"BaseURL"),s=AS(e,i),a=rs(r,ki(n)),o=Vk(n);return s.map(l=>({segmentInfo:rs(t,o),attributes:rs(a,l)}))},que=r=>r.reduce((e,t)=>{const n=ki(t);n.schemeIdUri&&(n.schemeIdUri=n.schemeIdUri.toLowerCase());const i=Vue[n.schemeIdUri];if(i){e[i]={attributes:n};const s=Zn(t,"cenc:pssh")[0];if(s){const a=gv(s);e[i].pssh=a&&A5(a)}}return e},{}),Gue=r=>{if(r.schemeIdUri==="urn:scte:dash:cc:cea-608:2015")return(typeof r.value!="string"?[]:r.value.split(";")).map(t=>{let n,i;return i=t,/^CC\d=/.test(t)?[n,i]=t.split("="):/^CC\d$/.test(t)&&(n=t),{channel:n,language:i}});if(r.schemeIdUri==="urn:scte:dash:cc:cea-708:2015")return(typeof r.value!="string"?[]:r.value.split(";")).map(t=>{const n={channel:void 0,language:void 0,aspectRatio:1,easyReader:0,"3D":0};if(/=/.test(t)){const[i,s=""]=t.split("=");n.channel=i,n.language=t,s.split(",").forEach(a=>{const[o,l]=a.split(":");o==="lang"?n.language=l:o==="er"?n.easyReader=Number(l):o==="war"?n.aspectRatio=Number(l):o==="3D"&&(n["3D"]=Number(l))})}else n.language=t;return n.channel&&(n.channel="SERVICE"+n.channel),n})},Kue=r=>Qp(Zn(r.node,"EventStream").map(e=>{const t=ki(e),n=t.schemeIdUri;return Zn(e,"Event").map(i=>{const s=ki(i),a=s.presentationTime||0,o=t.timescale||1,l=s.duration||0,u=a/o+r.attributes.start;return{schemeIdUri:n,value:t.value,id:s.id,start:u,end:u+l/o,messageData:gv(i)||s.messageData,contentEncoding:t.contentEncoding,presentationTimeOffset:t.presentationTimeOffset||0}})})),Xue=(r,e,t)=>n=>{const i=ki(n),s=AS(e,Zn(n,"BaseURL")),a=Zn(n,"Role")[0],o={role:ki(a)};let l=rs(r,i,o);const u=Zn(n,"Accessibility")[0],c=Gue(ki(u));c&&(l=rs(l,{captionServices:c}));const h=Zn(n,"Label")[0];if(h&&h.childNodes.length){const _=h.childNodes[0].nodeValue.trim();l=rs(l,{label:_})}const f=que(Zn(n,"ContentProtection"));Object.keys(f).length&&(l=rs(l,{contentProtection:f}));const g=Vk(n),v=Zn(n,"Representation"),y=rs(t,g);return Qp(v.map(Wue(l,s,y)))},Yue=(r,e)=>(t,n)=>{const i=AS(e,Zn(t.node,"BaseURL")),s=rs(r,{periodStart:t.attributes.start});typeof t.attributes.duration=="number"&&(s.periodDuration=t.attributes.duration);const a=Zn(t.node,"AdaptationSet"),o=Vk(t.node);return Qp(a.map(Xue(s,i,o)))},Que=(r,e)=>{if(r.length>1&&e({type:"warn",message:"The MPD manifest should contain no more than one ContentSteering tag"}),!r.length)return null;const t=rs({serverURL:gv(r[0])},ki(r[0]));return t.queryBeforeStart=t.queryBeforeStart==="true",t},Jue=({attributes:r,priorPeriodAttributes:e,mpdType:t})=>typeof r.start=="number"?r.start:e&&typeof e.start=="number"&&typeof e.duration=="number"?e.start+e.duration:!e&&t==="static"?0:null,Zue=(r,e={})=>{const{manifestUri:t="",NOW:n=Date.now(),clientOffset:i=0,eventHandler:s=function(){}}=e,a=Zn(r,"Period");if(!a.length)throw new Error(Jp.INVALID_NUMBER_OF_PERIOD);const o=Zn(r,"Location"),l=ki(r),u=AS([{baseUrl:t}],Zn(r,"BaseURL")),c=Zn(r,"ContentSteering");l.type=l.type||"static",l.sourceDuration=l.mediaPresentationDuration||0,l.NOW=n,l.clientOffset=i,o.length&&(l.locations=o.map(gv));const h=[];return a.forEach((f,g)=>{const v=ki(f),y=h[g-1];v.start=Jue({attributes:v,priorPeriodAttributes:y?y.attributes:null,mpdType:l.type}),h.push({node:f,attributes:v})}),{locations:l.locations,contentSteeringInfo:Que(c,s),representationInfo:Qp(h.map(Yue(l,u))),eventStream:Qp(h.map(Kue))}},$5=r=>{if(r==="")throw new Error(Jp.DASH_EMPTY_MANIFEST);const e=new O5.DOMParser;let t,n;try{t=e.parseFromString(r,"application/xml"),n=t&&t.documentElement.tagName==="MPD"?t.documentElement:null}catch{}if(!n||n&&n.getElementsByTagName("parsererror").length>0)throw new Error(Jp.DASH_INVALID_XML);return n},ece=r=>{const e=Zn(r,"UTCTiming")[0];if(!e)return null;const t=ki(e);switch(t.schemeIdUri){case"urn:mpeg:dash:utc:http-head:2014":case"urn:mpeg:dash:utc:http-head:2012":t.method="HEAD";break;case"urn:mpeg:dash:utc:http-xsdate:2014":case"urn:mpeg:dash:utc:http-iso:2014":case"urn:mpeg:dash:utc:http-xsdate:2012":case"urn:mpeg:dash:utc:http-iso:2012":t.method="GET";break;case"urn:mpeg:dash:utc:direct:2014":case"urn:mpeg:dash:utc:direct:2012":t.method="DIRECT",t.value=Date.parse(t.value);break;case"urn:mpeg:dash:utc:http-ntp:2014":case"urn:mpeg:dash:utc:ntp:2014":case"urn:mpeg:dash:utc:sntp:2014":default:throw new Error(Jp.UNSUPPORTED_UTC_TIMING_SCHEME)}return t},j5=(r,e={})=>{const t=Zue($5(r),e),n=jue(t.representationInfo);return Rue({dashPlaylists:n,locations:t.locations,contentSteering:t.contentSteeringInfo,sidxMapping:e.sidxMapping,previousManifest:e.previousManifest,eventStream:t.eventStream})},z5=r=>ece($5(r));var bC,M4;function tce(){if(M4)return bC;M4=1;var r=Math.pow(2,32),e=function(t){var n=new DataView(t.buffer,t.byteOffset,t.byteLength),i;return n.getBigUint64?(i=n.getBigUint64(0),i<Number.MAX_SAFE_INTEGER?Number(i):i):n.getUint32(0)*r+n.getUint32(4)};return bC={getUint64:e,MAX_UINT32:r},bC}var SC,F4;function rce(){if(F4)return SC;F4=1;var r=tce().getUint64,e=function(t){var n=new DataView(t.buffer,t.byteOffset,t.byteLength),i={version:t[0],flags:new Uint8Array(t.subarray(1,4)),references:[],referenceId:n.getUint32(4),timescale:n.getUint32(8)},s=12;i.version===0?(i.earliestPresentationTime=n.getUint32(s),i.firstOffset=n.getUint32(s+4),s+=8):(i.earliestPresentationTime=r(t.subarray(s)),i.firstOffset=r(t.subarray(s+8)),s+=16),s+=2;var a=n.getUint16(s);for(s+=2;a>0;s+=12,a--)i.references.push({referenceType:(t[s]&128)>>>7,referencedSize:n.getUint32(s)&2147483647,subsegmentDuration:n.getUint32(s+4),startsWithSap:!!(t[s+8]&128),sapType:(t[s+8]&112)>>>4,sapDeltaTime:n.getUint32(s+8)&268435455});return i};return SC=e,SC}var nce=rce();const H5=da(nce);var ice=_r([73,68,51]),sce=function(e,t){t===void 0&&(t=0),e=_r(e);var n=e[t+5],i=e[t+6]<<21|e[t+7]<<14|e[t+8]<<7|e[t+9],s=(n&16)>>4;return s?i+20:i+10},cp=function r(e,t){return t===void 0&&(t=0),e=_r(e),e.length-t<10||!Qn(e,ice,{offset:t})?t:(t+=sce(e,t),r(e,t))},B4=function(e){return typeof e=="string"?jk(e):e},ace=function(e){return Array.isArray(e)?e.map(function(t){return B4(t)}):[B4(e)]},oce=function r(e,t,n){n===void 0&&(n=!1),t=ace(t),e=_r(e);var i=[];if(!t.length)return i;for(var s=0;s<e.length;){var a=(e[s]<<24|e[s+1]<<16|e[s+2]<<8|e[s+3])>>>0,o=e.subarray(s+4,s+8);if(a===0)break;var l=s+a;if(l>e.length){if(n)break;l=e.length}var u=e.subarray(s+8,l);Qn(o,t[0])&&(t.length===1?i.push(u):i.push.apply(i,r(u,t.slice(1),n))),s=l}return i},$y={EBML:_r([26,69,223,163]),DocType:_r([66,130]),Segment:_r([24,83,128,103]),SegmentInfo:_r([21,73,169,102]),Tracks:_r([22,84,174,107]),Track:_r([174]),TrackNumber:_r([215]),DefaultDuration:_r([35,227,131]),TrackEntry:_r([174]),TrackType:_r([131]),FlagDefault:_r([136]),CodecID:_r([134]),CodecPrivate:_r([99,162]),VideoTrack:_r([224]),AudioTrack:_r([225]),Cluster:_r([31,67,182,117]),Timestamp:_r([231]),TimestampScale:_r([42,215,177]),BlockGroup:_r([160]),BlockDuration:_r([155]),Block:_r([161]),SimpleBlock:_r([163])},p2=[128,64,32,16,8,4,2,1],lce=function(e){for(var t=1,n=0;n<p2.length&&!(e&p2[n]);n++)t++;return t},V_=function(e,t,n,i){n===void 0&&(n=!0),i===void 0&&(i=!1);var s=lce(e[t]),a=e.subarray(t,t+s);return n&&(a=Array.prototype.slice.call(e,t,t+s),a[0]^=p2[s-1]),{length:s,value:nue(a,{signed:i}),bytes:a}},N4=function r(e){return typeof e=="string"?e.match(/.{1,2}/g).map(function(t){return r(t)}):typeof e=="number"?iue(e):e},uce=function(e){return Array.isArray(e)?e.map(function(t){return N4(t)}):[N4(e)]},cce=function r(e,t,n){if(n>=t.length)return t.length;var i=V_(t,n,!1);if(Qn(e.bytes,i.bytes))return n;var s=V_(t,n+i.length);return r(e,t,n+s.length+s.value+i.length)},U4=function r(e,t){t=uce(t),e=_r(e);var n=[];if(!t.length)return n;for(var i=0;i<e.length;){var s=V_(e,i,!1),a=V_(e,i+s.length),o=i+s.length+a.length;a.value===127&&(a.value=cce(s,e,o),a.value!==e.length&&(a.value-=o));var l=o+a.value>e.length?e.length:o+a.value,u=e.subarray(o,l);Qn(t[0],s.bytes)&&(t.length===1?n.push(u):n=n.concat(r(u,t.slice(1))));var c=s.length+a.length+u.length;i+=c}return n},dce=_r([0,0,0,1]),hce=_r([0,0,1]),fce=_r([0,0,3]),pce=function(e){for(var t=[],n=1;n<e.length-2;)Qn(e.subarray(n,n+3),fce)&&(t.push(n+2),n++),n++;if(t.length===0)return e;var i=e.length-t.length,s=new Uint8Array(i),a=0;for(n=0;n<i;a++,n++)a===t[0]&&(a++,t.shift()),s[n]=e[a];return s},V5=function(e,t,n,i){e=_r(e),n=[].concat(n);for(var s=0,a,o=0;s<e.length&&(o<i||a);){var l=void 0;if(Qn(e.subarray(s),dce)?l=4:Qn(e.subarray(s),hce)&&(l=3),!l){s++;continue}if(o++,a)return pce(e.subarray(a,s));var u=void 0;t==="h264"?u=e[s+l]&31:t==="h265"&&(u=e[s+l]>>1&63),n.indexOf(u)!==-1&&(a=s+l),s+=l+(t==="h264"?1:2)}return e.subarray(0,0)},mce=function(e,t,n){return V5(e,"h264",t,n)},gce=function(e,t,n){return V5(e,"h265",t,n)},Qs={webm:_r([119,101,98,109]),matroska:_r([109,97,116,114,111,115,107,97]),flac:_r([102,76,97,67]),ogg:_r([79,103,103,83]),ac3:_r([11,119]),riff:_r([82,73,70,70]),avi:_r([65,86,73]),wav:_r([87,65,86,69]),"3gp":_r([102,116,121,112,51,103]),mp4:_r([102,116,121,112]),fmp4:_r([115,116,121,112]),mov:_r([102,116,121,112,113,116]),moov:_r([109,111,111,118]),moof:_r([109,111,111,102])},Zp={aac:function(e){var t=cp(e);return Qn(e,[255,16],{offset:t,mask:[255,22]})},mp3:function(e){var t=cp(e);return Qn(e,[255,2],{offset:t,mask:[255,6]})},webm:function(e){var t=U4(e,[$y.EBML,$y.DocType])[0];return Qn(t,Qs.webm)},mkv:function(e){var t=U4(e,[$y.EBML,$y.DocType])[0];return Qn(t,Qs.matroska)},mp4:function(e){if(Zp["3gp"](e)||Zp.mov(e))return!1;if(Qn(e,Qs.mp4,{offset:4})||Qn(e,Qs.fmp4,{offset:4})||Qn(e,Qs.moof,{offset:4})||Qn(e,Qs.moov,{offset:4}))return!0},mov:function(e){return Qn(e,Qs.mov,{offset:4})},"3gp":function(e){return Qn(e,Qs["3gp"],{offset:4})},ac3:function(e){var t=cp(e);return Qn(e,Qs.ac3,{offset:t})},ts:function(e){if(e.length<189&&e.length>=1)return e[0]===71;for(var t=0;t+188<e.length&&t<188;){if(e[t]===71&&e[t+188]===71)return!0;t+=1}return!1},flac:function(e){var t=cp(e);return Qn(e,Qs.flac,{offset:t})},ogg:function(e){return Qn(e,Qs.ogg)},avi:function(e){return Qn(e,Qs.riff)&&Qn(e,Qs.avi,{offset:8})},wav:function(e){return Qn(e,Qs.riff)&&Qn(e,Qs.wav,{offset:8})},h264:function(e){return mce(e,7,3).length},h265:function(e){return gce(e,[32,33],3).length}},m2=Object.keys(Zp).filter(function(r){return r!=="ts"&&r!=="h264"&&r!=="h265"}).concat(["ts","h264","h265"]);m2.forEach(function(r){var e=Zp[r];Zp[r]=function(t){return e(_r(t))}});var vce=Zp,Cm=function(e){e=_r(e);for(var t=0;t<m2.length;t++){var n=m2[t];if(vce[n](e))return n}return""},W5=function(e){return oce(e,["moof"]).length>0},TC,$4;function yce(){if($4)return TC;$4=1;var r=9e4,e,t,n,i,s,a,o;return e=function(l){return l*r},t=function(l,u){return l*u},n=function(l){return l/r},i=function(l,u){return l/u},s=function(l,u){return e(i(l,u))},a=function(l,u){return t(n(l),u)},o=function(l,u,c){return n(c?l:l-u)},TC={ONE_SECOND_IN_TS:r,secondsToVideoTs:e,secondsToAudioTs:t,videoTsToSeconds:n,audioTsToSeconds:i,audioTsToVideoTs:s,videoTsToAudioTs:a,metadataTsToSeconds:o},TC}var Ba=yce();/**
 * @license
 * Video.js 8.19.1 <http://videojs.com/>
 * Copyright Brightcove, Inc. <https://www.brightcove.com/>
 * Available under Apache License Version 2.0
 * <https://github.com/videojs/video.js/blob/main/LICENSE>
 *
 * Includes vtt.js <https://github.com/mozilla/vtt.js>
 * Available under Apache License Version 2.0
 * <https://github.com/mozilla/vtt.js/blob/main/LICENSE>
 */var g2="8.19.1";const wc={},Wd=function(r,e){return wc[r]=wc[r]||[],e&&(wc[r]=wc[r].concat(e)),wc[r]},xce=function(r,e){Wd(r,e)},q5=function(r,e){const t=Wd(r).indexOf(e);return t<=-1?!1:(wc[r]=wc[r].slice(),wc[r].splice(t,1),!0)},_ce=function(r,e){Wd(r,[].concat(e).map(t=>{const n=(...i)=>(q5(r,n),t(...i));return n}))},W_={prefixed:!0},a_=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror","fullscreen"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror","-webkit-full-screen"]],j4=a_[0];let V0;for(let r=0;r<a_.length;r++)if(a_[r][1]in Be){V0=a_[r];break}if(V0){for(let r=0;r<V0.length;r++)W_[j4[r]]=V0[r];W_.prefixed=V0[0]!==j4[0]}let Ia=[];const bce=(r,e,t)=>(n,i,s)=>{const a=e.levels[i],o=new RegExp(`^(${a})$`);let l=r;if(n!=="log"&&s.unshift(n.toUpperCase()+":"),t&&(l=`%c${r}`,s.unshift(t)),s.unshift(l+":"),Ia){Ia.push([].concat(s));const c=Ia.length-1e3;Ia.splice(0,c>0?c:0)}if(!X.console)return;let u=X.console[n];!u&&n==="debug"&&(u=X.console.info||X.console.log),!(!u||!a||!o.test(n))&&u[Array.isArray(s)?"apply":"call"](X.console,s)};function v2(r,e=":",t=""){let n="info",i;function s(...a){i("log",n,a)}return i=bce(r,s,t),s.createLogger=(a,o,l)=>{const u=o!==void 0?o:e,c=l!==void 0?l:t,h=`${r} ${u} ${a}`;return v2(h,u,c)},s.createNewLogger=(a,o,l)=>v2(a,o,l),s.levels={all:"debug|log|warn|error",off:"",debug:"debug|log|warn|error",info:"log|warn|error",warn:"warn|error",error:"error",DEFAULT:n},s.level=a=>{if(typeof a=="string"){if(!s.levels.hasOwnProperty(a))throw new Error(`"${a}" in not a valid log level`);n=a}return n},s.history=()=>Ia?[].concat(Ia):[],s.history.filter=a=>(Ia||[]).filter(o=>new RegExp(`.*${a}.*`).test(o[0])),s.history.clear=()=>{Ia&&(Ia.length=0)},s.history.disable=()=>{Ia!==null&&(Ia.length=0,Ia=null)},s.history.enable=()=>{Ia===null&&(Ia=[])},s.error=(...a)=>i("error",n,a),s.warn=(...a)=>i("warn",n,a),s.debug=(...a)=>i("debug",n,a),s}const Yr=v2("VIDEOJS"),G5=Yr.createLogger,Sce=Object.prototype.toString,K5=function(r){return Uu(r)?Object.keys(r):[]};function kp(r,e){K5(r).forEach(t=>e(r[t],t))}function X5(r,e,t=0){return K5(r).reduce((n,i)=>e(n,r[i],i),t)}function Uu(r){return!!r&&typeof r=="object"}function em(r){return Uu(r)&&Sce.call(r)==="[object Object]"&&r.constructor===Object}function Bn(...r){const e={};return r.forEach(t=>{t&&kp(t,(n,i)=>{if(!em(n)){e[i]=n;return}em(e[i])||(e[i]={}),e[i]=Bn(e[i],n)})}),e}function Y5(r={}){const e=[];for(const t in r)if(r.hasOwnProperty(t)){const n=r[t];e.push(n)}return e}function DS(r,e,t,n=!0){const i=a=>Object.defineProperty(r,e,{value:a,enumerable:!0,writable:!0}),s={configurable:!0,enumerable:!0,get(){const a=t();return i(a),a}};return n&&(s.set=i),Object.defineProperty(r,e,s)}var Tce=Object.freeze({__proto__:null,each:kp,reduce:X5,isObject:Uu,isPlain:em,merge:Bn,values:Y5,defineLazyProperty:DS});let Wk=!1,Q5=null,$u=!1,J5,Z5=!1,Ap=!1,Dp=!1,ju=!1,qk=null,IS=null;const Cce=!!(X.cast&&X.cast.framework&&X.cast.framework.CastReceiverContext);let e6=null,q_=!1,PS=!1,G_=!1,RS=!1,K_=!1,X_=!1,Y_=!1;const Mg=!!(wm()&&("ontouchstart"in X||X.navigator.maxTouchPoints||X.DocumentTouch&&X.document instanceof X.DocumentTouch)),_d=X.navigator&&X.navigator.userAgentData;_d&&_d.platform&&_d.brands&&($u=_d.platform==="Android",Ap=!!_d.brands.find(r=>r.brand==="Microsoft Edge"),Dp=!!_d.brands.find(r=>r.brand==="Chromium"),ju=!Ap&&Dp,qk=IS=(_d.brands.find(r=>r.brand==="Chromium")||{}).version||null,PS=_d.platform==="Windows");if(!Dp){const r=X.navigator&&X.navigator.userAgent||"";Wk=/iPod/i.test(r),Q5=(function(){const e=r.match(/OS (\d+)_/i);return e&&e[1]?e[1]:null})(),$u=/Android/i.test(r),J5=(function(){const e=r.match(/Android (\d+)(?:\.(\d+))?(?:\.(\d+))*/i);if(!e)return null;const t=e[1]&&parseFloat(e[1]),n=e[2]&&parseFloat(e[2]);return t&&n?parseFloat(e[1]+"."+e[2]):t||null})(),Z5=/Firefox/i.test(r),Ap=/Edg/i.test(r),Dp=/Chrome/i.test(r)||/CriOS/i.test(r),ju=!Ap&&Dp,qk=IS=(function(){const e=r.match(/(Chrome|CriOS)\/(\d+)/);return e&&e[2]?parseFloat(e[2]):null})(),e6=(function(){const e=/MSIE\s(\d+)\.\d/.exec(r);let t=e&&parseFloat(e[1]);return!t&&/Trident\/7.0/i.test(r)&&/rv:11.0/.test(r)&&(t=11),t})(),K_=/Tizen/i.test(r),X_=/Web0S/i.test(r),Y_=K_||X_,q_=/Safari/i.test(r)&&!ju&&!$u&&!Ap&&!Y_,PS=/Windows/i.test(r),G_=/iPad/i.test(r)||q_&&Mg&&!/iPhone/i.test(r),RS=/iPhone/i.test(r)&&!G_}const ua=RS||G_||Wk,LS=(q_||ua)&&!ju;var t6=Object.freeze({__proto__:null,get IS_IPOD(){return Wk},get IOS_VERSION(){return Q5},get IS_ANDROID(){return $u},get ANDROID_VERSION(){return J5},get IS_FIREFOX(){return Z5},get IS_EDGE(){return Ap},get IS_CHROMIUM(){return Dp},get IS_CHROME(){return ju},get CHROMIUM_VERSION(){return qk},get CHROME_VERSION(){return IS},IS_CHROMECAST_RECEIVER:Cce,get IE_VERSION(){return e6},get IS_SAFARI(){return q_},get IS_WINDOWS(){return PS},get IS_IPAD(){return G_},get IS_IPHONE(){return RS},get IS_TIZEN(){return K_},get IS_WEBOS(){return X_},get IS_SMART_TV(){return Y_},TOUCH_ENABLED:Mg,IS_IOS:ua,IS_ANY_SAFARI:LS});function z4(r){return typeof r=="string"&&!!r.trim()}function wce(r){if(r.indexOf(" ")>=0)throw new Error("class has illegal whitespace characters")}function wm(){return Be===X.document}function Em(r){return Uu(r)&&r.nodeType===1}function r6(){try{return X.parent!==X.self}catch{return!0}}function n6(r){return function(e,t){if(!z4(e))return Be[r](null);z4(t)&&(t=Be.querySelector(t));const n=Em(t)?t:Be;return n[r]&&n[r](e)}}function Ir(r="div",e={},t={},n){const i=Be.createElement(r);return Object.getOwnPropertyNames(e).forEach(function(s){const a=e[s];s==="textContent"?nh(i,a):(i[s]!==a||s==="tabIndex")&&(i[s]=a)}),Object.getOwnPropertyNames(t).forEach(function(s){i.setAttribute(s,t[s])}),n&&Gk(i,n),i}function nh(r,e){return typeof r.textContent>"u"?r.innerText=e:r.textContent=e,r}function y2(r,e){e.firstChild?e.insertBefore(r,e.firstChild):e.appendChild(r)}function ig(r,e){return wce(e),r.classList.contains(e)}function Jh(r,...e){return r.classList.add(...e.reduce((t,n)=>t.concat(n.split(/\s+/)),[])),r}function OS(r,...e){return r?(r.classList.remove(...e.reduce((t,n)=>t.concat(n.split(/\s+/)),[])),r):(Yr.warn("removeClass was called with an element that doesn't exist"),null)}function i6(r,e,t){return typeof t=="function"&&(t=t(r,e)),typeof t!="boolean"&&(t=void 0),e.split(/\s+/).forEach(n=>r.classList.toggle(n,t)),r}function s6(r,e){Object.getOwnPropertyNames(e).forEach(function(t){const n=e[t];n===null||typeof n>"u"||n===!1?r.removeAttribute(t):r.setAttribute(t,n===!0?"":n)})}function kd(r){const e={},t=["autoplay","controls","playsinline","loop","muted","default","defaultMuted"];if(r&&r.attributes&&r.attributes.length>0){const n=r.attributes;for(let i=n.length-1;i>=0;i--){const s=n[i].name;let a=n[i].value;t.includes(s)&&(a=a!==null),e[s]=a}}return e}function a6(r,e){return r.getAttribute(e)}function tm(r,e,t){r.setAttribute(e,t)}function MS(r,e){r.removeAttribute(e)}function o6(){Be.body.focus(),Be.onselectstart=function(){return!1}}function l6(){Be.onselectstart=function(){return!0}}function rm(r){if(r&&r.getBoundingClientRect&&r.parentNode){const e=r.getBoundingClientRect(),t={};return["bottom","height","left","right","top","width"].forEach(n=>{e[n]!==void 0&&(t[n]=e[n])}),t.height||(t.height=parseFloat(nm(r,"height"))),t.width||(t.width=parseFloat(nm(r,"width"))),t}}function Fg(r){if(!r||r&&!r.offsetParent)return{left:0,top:0,width:0,height:0};const e=r.offsetWidth,t=r.offsetHeight;let n=0,i=0;for(;r.offsetParent&&r!==Be[W_.fullscreenElement];)n+=r.offsetLeft,i+=r.offsetTop,r=r.offsetParent;return{left:n,top:i,width:e,height:t}}function FS(r,e){const t={x:0,y:0};if(ua){let c=r;for(;c&&c.nodeName.toLowerCase()!=="html";){const h=nm(c,"transform");if(/^matrix/.test(h)){const f=h.slice(7,-1).split(/,\s/).map(Number);t.x+=f[4],t.y+=f[5]}else if(/^matrix3d/.test(h)){const f=h.slice(9,-1).split(/,\s/).map(Number);t.x+=f[12],t.y+=f[13]}if(c.assignedSlot&&c.assignedSlot.parentElement&&X.WebKitCSSMatrix){const f=X.getComputedStyle(c.assignedSlot.parentElement).transform,g=new X.WebKitCSSMatrix(f);t.x+=g.m41,t.y+=g.m42}c=c.parentNode||c.host}}const n={},i=Fg(e.target),s=Fg(r),a=s.width,o=s.height;let l=e.offsetY-(s.top-i.top),u=e.offsetX-(s.left-i.left);return e.changedTouches&&(u=e.changedTouches[0].pageX-s.left,l=e.changedTouches[0].pageY+s.top,ua&&(u-=t.x,l-=t.y)),n.y=1-Math.max(0,Math.min(1,l/o)),n.x=Math.max(0,Math.min(1,u/a)),n}function u6(r){return Uu(r)&&r.nodeType===3}function BS(r){for(;r.firstChild;)r.removeChild(r.firstChild);return r}function c6(r){return typeof r=="function"&&(r=r()),(Array.isArray(r)?r:[r]).map(e=>{if(typeof e=="function"&&(e=e()),Em(e)||u6(e))return e;if(typeof e=="string"&&/\S/.test(e))return Be.createTextNode(e)}).filter(e=>e)}function Gk(r,e){return c6(e).forEach(t=>r.appendChild(t)),r}function d6(r,e){return Gk(BS(r),e)}function Bg(r){return r.button===void 0&&r.buttons===void 0||r.button===0&&r.buttons===void 0||r.type==="mouseup"&&r.button===0&&r.buttons===0||r.type==="mousedown"&&r.button===0&&r.buttons===0?!0:!(r.button!==0||r.buttons!==1)}const qd=n6("querySelector"),h6=n6("querySelectorAll");function nm(r,e){if(!r||!e)return"";if(typeof X.getComputedStyle=="function"){let t;try{t=X.getComputedStyle(r)}catch{return""}return t?t.getPropertyValue(e)||t[e]:""}return""}function f6(r){[...Be.styleSheets].forEach(e=>{try{const t=[...e.cssRules].map(i=>i.cssText).join(""),n=Be.createElement("style");n.textContent=t,r.document.head.appendChild(n)}catch{const n=Be.createElement("link");n.rel="stylesheet",n.type=e.type,n.media=e.media.mediaText,n.href=e.href,r.document.head.appendChild(n)}})}var p6=Object.freeze({__proto__:null,isReal:wm,isEl:Em,isInFrame:r6,createEl:Ir,textContent:nh,prependTo:y2,hasClass:ig,addClass:Jh,removeClass:OS,toggleClass:i6,setAttributes:s6,getAttributes:kd,getAttribute:a6,setAttribute:tm,removeAttribute:MS,blockTextSelection:o6,unblockTextSelection:l6,getBoundingClientRect:rm,findPosition:Fg,getPointerPosition:FS,isTextNode:u6,emptyEl:BS,normalizeContent:c6,appendContent:Gk,insertContent:d6,isSingleLeftClick:Bg,$:qd,$$:h6,computedStyle:nm,copyStyleSheetsToWindow:f6});let m6=!1,x2;const Ece=function(){if(x2.options.autoSetup===!1)return;const r=Array.prototype.slice.call(Be.getElementsByTagName("video")),e=Array.prototype.slice.call(Be.getElementsByTagName("audio")),t=Array.prototype.slice.call(Be.getElementsByTagName("video-js")),n=r.concat(e,t);if(n&&n.length>0)for(let i=0,s=n.length;i<s;i++){const a=n[i];if(a&&a.getAttribute)a.player===void 0&&a.getAttribute("data-setup")!==null&&x2(a);else{_2(1);break}}else m6||_2(1)};function _2(r,e){wm()&&(e&&(x2=e),X.setTimeout(Ece,r))}function b2(){m6=!0,X.removeEventListener("load",b2)}wm()&&(Be.readyState==="complete"?b2():X.addEventListener("load",b2));const g6=function(r){const e=Be.createElement("style");return e.className=r,e},v6=function(r,e){r.styleSheet?r.styleSheet.cssText=e:r.textContent=e};var ia=new WeakMap;const kce=3;let Ace=kce;function il(){return Ace++}function H4(r,e){if(!ia.has(r))return;const t=ia.get(r);t.handlers[e].length===0&&(delete t.handlers[e],r.removeEventListener?r.removeEventListener(e,t.dispatcher,!1):r.detachEvent&&r.detachEvent("on"+e,t.dispatcher)),Object.getOwnPropertyNames(t.handlers).length<=0&&(delete t.handlers,delete t.dispatcher,delete t.disabled),Object.getOwnPropertyNames(t).length===0&&ia.delete(r)}function Kk(r,e,t,n){t.forEach(function(i){r(e,i,n)})}function NS(r){if(r.fixed_)return r;function e(){return!0}function t(){return!1}if(!r||!r.isPropagationStopped||!r.isImmediatePropagationStopped){const n=r||X.event;r={};const i=["layerX","layerY","keyLocation","path","webkitMovementX","webkitMovementY","mozPressure","mozInputSource"];for(const s in n)i.includes(s)||s==="returnValue"&&n.preventDefault||(r[s]=n[s]);if(r.target||(r.target=r.srcElement||Be),r.relatedTarget||(r.relatedTarget=r.fromElement===r.target?r.toElement:r.fromElement),r.preventDefault=function(){n.preventDefault&&n.preventDefault(),r.returnValue=!1,n.returnValue=!1,r.defaultPrevented=!0},r.defaultPrevented=!1,r.stopPropagation=function(){n.stopPropagation&&n.stopPropagation(),r.cancelBubble=!0,n.cancelBubble=!0,r.isPropagationStopped=e},r.isPropagationStopped=t,r.stopImmediatePropagation=function(){n.stopImmediatePropagation&&n.stopImmediatePropagation(),r.isImmediatePropagationStopped=e,r.stopPropagation()},r.isImmediatePropagationStopped=t,r.clientX!==null&&r.clientX!==void 0){const s=Be.documentElement,a=Be.body;r.pageX=r.clientX+(s&&s.scrollLeft||a&&a.scrollLeft||0)-(s&&s.clientLeft||a&&a.clientLeft||0),r.pageY=r.clientY+(s&&s.scrollTop||a&&a.scrollTop||0)-(s&&s.clientTop||a&&a.clientTop||0)}r.which=r.charCode||r.keyCode,r.button!==null&&r.button!==void 0&&(r.button=r.button&1?0:r.button&4?1:r.button&2?2:0)}return r.fixed_=!0,r}let jy;const Dce=function(){if(typeof jy!="boolean"){jy=!1;try{const r=Object.defineProperty({},"passive",{get(){jy=!0}});X.addEventListener("test",null,r),X.removeEventListener("test",null,r)}catch{}}return jy},Ice=["touchstart","touchmove"];function xo(r,e,t){if(Array.isArray(e))return Kk(xo,r,e,t);ia.has(r)||ia.set(r,{});const n=ia.get(r);if(n.handlers||(n.handlers={}),n.handlers[e]||(n.handlers[e]=[]),t.guid||(t.guid=il()),n.handlers[e].push(t),n.dispatcher||(n.disabled=!1,n.dispatcher=function(i,s){if(n.disabled)return;i=NS(i);const a=n.handlers[i.type];if(a){const o=a.slice(0);for(let l=0,u=o.length;l<u&&!i.isImmediatePropagationStopped();l++)try{o[l].call(r,i,s)}catch(c){Yr.error(c)}}}),n.handlers[e].length===1)if(r.addEventListener){let i=!1;Dce()&&Ice.indexOf(e)>-1&&(i={passive:!0}),r.addEventListener(e,n.dispatcher,i)}else r.attachEvent&&r.attachEvent("on"+e,n.dispatcher)}function $s(r,e,t){if(!ia.has(r))return;const n=ia.get(r);if(!n.handlers)return;if(Array.isArray(e))return Kk($s,r,e,t);const i=function(a,o){n.handlers[o]=[],H4(a,o)};if(e===void 0){for(const a in n.handlers)Object.prototype.hasOwnProperty.call(n.handlers||{},a)&&i(r,a);return}const s=n.handlers[e];if(s){if(!t){i(r,e);return}if(t.guid)for(let a=0;a<s.length;a++)s[a].guid===t.guid&&s.splice(a--,1);H4(r,e)}}function km(r,e,t){const n=ia.has(r)?ia.get(r):{},i=r.parentNode||r.ownerDocument;if(typeof e=="string"?e={type:e,target:r}:e.target||(e.target=r),e=NS(e),n.dispatcher&&n.dispatcher.call(r,e,t),i&&!e.isPropagationStopped()&&e.bubbles===!0)km.call(null,i,e,t);else if(!i&&!e.defaultPrevented&&e.target&&e.target[e.type]){ia.has(e.target)||ia.set(e.target,{});const s=ia.get(e.target);e.target[e.type]&&(s.disabled=!0,typeof e.target[e.type]=="function"&&e.target[e.type](),s.disabled=!1)}return!e.defaultPrevented}function US(r,e,t){if(Array.isArray(e))return Kk(US,r,e,t);const n=function(){$s(r,e,n),t.apply(this,arguments)};n.guid=t.guid=t.guid||il(),xo(r,e,n)}function Xk(r,e,t){const n=function(){$s(r,e,n),t.apply(this,arguments)};n.guid=t.guid=t.guid||il(),xo(r,e,n)}var Pce=Object.freeze({__proto__:null,fixEvent:NS,on:xo,off:$s,trigger:km,one:US,any:Xk});const sl=30,zn=function(r,e,t){e.guid||(e.guid=il());const n=e.bind(r);return n.guid=t?t+"_"+e.guid:e.guid,n},zu=function(r,e){let t=X.performance.now();return function(...i){const s=X.performance.now();s-t>=e&&(r(...i),t=s)}},y6=function(r,e,t,n=X){let i;const s=()=>{n.clearTimeout(i),i=null},a=function(){const o=this,l=arguments;let u=function(){i=null,u=null,t||r.apply(o,l)};!i&&t&&r.apply(o,l),n.clearTimeout(i),i=n.setTimeout(u,e)};return a.cancel=s,a};var Rce=Object.freeze({__proto__:null,UPDATE_REFRESH_INTERVAL:sl,bind_:zn,throttle:zu,debounce:y6});let I0,_o=class{on(e,t){const n=this.addEventListener;this.addEventListener=()=>{},xo(this,e,t),this.addEventListener=n}off(e,t){$s(this,e,t)}one(e,t){const n=this.addEventListener;this.addEventListener=()=>{},US(this,e,t),this.addEventListener=n}any(e,t){const n=this.addEventListener;this.addEventListener=()=>{},Xk(this,e,t),this.addEventListener=n}trigger(e){const t=e.type||e;typeof e=="string"&&(e={type:t}),e=NS(e),this.allowedEvents_[t]&&this["on"+t]&&this["on"+t](e),km(this,e)}queueTrigger(e){I0||(I0=new Map);const t=e.type||e;let n=I0.get(this);n||(n=new Map,I0.set(this,n));const i=n.get(t);n.delete(t),X.clearTimeout(i);const s=X.setTimeout(()=>{n.delete(t),n.size===0&&(n=null,I0.delete(this)),this.trigger(e)},0);n.set(t,s)}};_o.prototype.allowedEvents_={};_o.prototype.addEventListener=_o.prototype.on;_o.prototype.removeEventListener=_o.prototype.off;_o.prototype.dispatchEvent=_o.prototype.trigger;const $S=r=>typeof r.name=="function"?r.name():typeof r.name=="string"?r.name:r.name_?r.name_:r.constructor&&r.constructor.name?r.constructor.name:typeof r,Rc=r=>r instanceof _o||!!r.eventBusEl_&&["on","one","off","trigger"].every(e=>typeof r[e]=="function"),Lce=(r,e)=>{Rc(r)?e():(r.eventedCallbacks||(r.eventedCallbacks=[]),r.eventedCallbacks.push(e))},S2=r=>typeof r=="string"&&/\S/.test(r)||Array.isArray(r)&&!!r.length,Q_=(r,e,t)=>{if(!r||!r.nodeName&&!Rc(r))throw new Error(`Invalid target for ${$S(e)}#${t}; must be a DOM node or evented object.`)},x6=(r,e,t)=>{if(!S2(r))throw new Error(`Invalid event type for ${$S(e)}#${t}; must be a non-empty string or array.`)},_6=(r,e,t)=>{if(typeof r!="function")throw new Error(`Invalid listener for ${$S(e)}#${t}; must be a function.`)},CC=(r,e,t)=>{const n=e.length<3||e[0]===r||e[0]===r.eventBusEl_;let i,s,a;return n?(i=r.eventBusEl_,e.length>=3&&e.shift(),[s,a]=e):(i=e[0],s=e[1],a=e[2]),Q_(i,r,t),x6(s,r,t),_6(a,r,t),a=zn(r,a),{isTargetingSelf:n,target:i,type:s,listener:a}},Dh=(r,e,t,n)=>{Q_(r,r,e),r.nodeName?Pce[e](r,t,n):r[e](t,n)},Oce={on(...r){const{isTargetingSelf:e,target:t,type:n,listener:i}=CC(this,r,"on");if(Dh(t,"on",n,i),!e){const s=()=>this.off(t,n,i);s.guid=i.guid;const a=()=>this.off("dispose",s);a.guid=i.guid,Dh(this,"on","dispose",s),Dh(t,"on","dispose",a)}},one(...r){const{isTargetingSelf:e,target:t,type:n,listener:i}=CC(this,r,"one");if(e)Dh(t,"one",n,i);else{const s=(...a)=>{this.off(t,n,s),i.apply(null,a)};s.guid=i.guid,Dh(t,"one",n,s)}},any(...r){const{isTargetingSelf:e,target:t,type:n,listener:i}=CC(this,r,"any");if(e)Dh(t,"any",n,i);else{const s=(...a)=>{this.off(t,n,s),i.apply(null,a)};s.guid=i.guid,Dh(t,"any",n,s)}},off(r,e,t){if(!r||S2(r))$s(this.eventBusEl_,r,e);else{const n=r,i=e;Q_(n,this,"off"),x6(i,this,"off"),_6(t,this,"off"),t=zn(this,t),this.off("dispose",t),n.nodeName?($s(n,i,t),$s(n,"dispose",t)):Rc(n)&&(n.off(i,t),n.off("dispose",t))}},trigger(r,e){Q_(this.eventBusEl_,this,"trigger");const t=r&&typeof r!="string"?r.type:r;if(!S2(t))throw new Error(`Invalid event type for ${$S(this)}#trigger; must be a non-empty string or object with a type key that has a non-empty value.`);return km(this.eventBusEl_,r,e)}};function Yk(r,e={}){const{eventBusKey:t}=e;if(t){if(!r[t].nodeName)throw new Error(`The eventBusKey "${t}" does not refer to an element.`);r.eventBusEl_=r[t]}else r.eventBusEl_=Ir("span",{className:"vjs-event-bus"});return Object.assign(r,Oce),r.eventedCallbacks&&r.eventedCallbacks.forEach(n=>{n()}),r.on("dispose",()=>{r.off(),[r,r.el_,r.eventBusEl_].forEach(function(n){n&&ia.has(n)&&ia.delete(n)}),X.setTimeout(()=>{r.eventBusEl_=null},0)}),r}const Mce={state:{},setState(r){typeof r=="function"&&(r=r());let e;return kp(r,(t,n)=>{this.state[n]!==t&&(e=e||{},e[n]={from:this.state[n],to:t}),this.state[n]=t}),e&&Rc(this)&&this.trigger({changes:e,type:"statechanged"}),e}};function b6(r,e){return Object.assign(r,Mce),r.state=Object.assign({},r.state,e),typeof r.handleStateChanged=="function"&&Rc(r)&&r.on("statechanged",r.handleStateChanged),r}const sg=function(r){return typeof r!="string"?r:r.replace(/./,e=>e.toLowerCase())},di=function(r){return typeof r!="string"?r:r.replace(/./,e=>e.toUpperCase())},S6=function(r,e){return di(r)===di(e)};var Fce=Object.freeze({__proto__:null,toLowerCase:sg,toTitleCase:di,titleCaseEquals:S6});let gt=class Da{constructor(e,t,n){if(!e&&this.play?this.player_=e=this:this.player_=e,this.isDisposed_=!1,this.parentComponent_=null,this.options_=Bn({},this.options_),t=this.options_=Bn(this.options_,t),this.id_=t.id||t.el&&t.el.id,!this.id_){const i=e&&e.id&&e.id()||"no_player";this.id_=`${i}_component_${il()}`}this.name_=t.name||null,t.el?this.el_=t.el:t.createEl!==!1&&(this.el_=this.createEl()),t.className&&this.el_&&t.className.split(" ").forEach(i=>this.addClass(i)),["on","off","one","any","trigger"].forEach(i=>{this[i]=void 0}),t.evented!==!1&&(Yk(this,{eventBusKey:this.el_?"el_":null}),this.handleLanguagechange=this.handleLanguagechange.bind(this),this.on(this.player_,"languagechange",this.handleLanguagechange)),b6(this,this.constructor.defaultState),this.children_=[],this.childIndex_={},this.childNameIndex_={},this.setTimeoutIds_=new Set,this.setIntervalIds_=new Set,this.rafIds_=new Set,this.namedRafs_=new Map,this.clearingTimersOnDispose_=!1,t.initChildren!==!1&&this.initChildren(),this.ready(n),t.reportTouchActivity!==!1&&this.enableTouchActivity()}dispose(e={}){if(!this.isDisposed_){if(this.readyQueue_&&(this.readyQueue_.length=0),this.trigger({type:"dispose",bubbles:!1}),this.isDisposed_=!0,this.children_)for(let t=this.children_.length-1;t>=0;t--)this.children_[t].dispose&&this.children_[t].dispose();this.children_=null,this.childIndex_=null,this.childNameIndex_=null,this.parentComponent_=null,this.el_&&(this.el_.parentNode&&(e.restoreEl?this.el_.parentNode.replaceChild(e.restoreEl,this.el_):this.el_.parentNode.removeChild(this.el_)),this.el_=null),this.player_=null}}isDisposed(){return!!this.isDisposed_}player(){return this.player_}options(e){return e?(this.options_=Bn(this.options_,e),this.options_):this.options_}el(){return this.el_}createEl(e,t,n){return Ir(e,t,n)}localize(e,t,n=e){const i=this.player_.language&&this.player_.language(),s=this.player_.languages&&this.player_.languages(),a=s&&s[i],o=i&&i.split("-")[0],l=s&&s[o];let u=n;return a&&a[e]?u=a[e]:l&&l[e]&&(u=l[e]),t&&(u=u.replace(/\{(\d+)\}/g,function(c,h){const f=t[h-1];let g=f;return typeof f>"u"&&(g=c),g})),u}handleLanguagechange(){}contentEl(){return this.contentEl_||this.el_}id(){return this.id_}name(){return this.name_}children(){return this.children_}getChildById(e){return this.childIndex_[e]}getChild(e){if(e)return this.childNameIndex_[e]}getDescendant(...e){e=e.reduce((n,i)=>n.concat(i),[]);let t=this;for(let n=0;n<e.length;n++)if(t=t.getChild(e[n]),!t||!t.getChild)return;return t}setIcon(e,t=this.el()){if(!this.player_.options_.experimentalSvgIcons)return;const n="http://www.w3.org/2000/svg",i=Ir("span",{className:"vjs-icon-placeholder vjs-svg-icon"},{"aria-hidden":"true"}),s=Be.createElementNS(n,"svg");s.setAttributeNS(null,"viewBox","0 0 512 512");const a=Be.createElementNS(n,"use");return s.appendChild(a),a.setAttributeNS(null,"href",`#vjs-icon-${e}`),i.appendChild(s),this.iconIsSet_?t.replaceChild(i,t.querySelector(".vjs-icon-placeholder")):t.appendChild(i),this.iconIsSet_=!0,i}addChild(e,t={},n=this.children_.length){let i,s;if(typeof e=="string"){s=di(e);const a=t.componentClass||s;t.name=s;const o=Da.getComponent(a);if(!o)throw new Error(`Component ${a} does not exist`);if(typeof o!="function")return null;i=new o(this.player_||this,t)}else i=e;if(i.parentComponent_&&i.parentComponent_.removeChild(i),this.children_.splice(n,0,i),i.parentComponent_=this,typeof i.id=="function"&&(this.childIndex_[i.id()]=i),s=s||i.name&&di(i.name()),s&&(this.childNameIndex_[s]=i,this.childNameIndex_[sg(s)]=i),typeof i.el=="function"&&i.el()){let a=null;this.children_[n+1]&&(this.children_[n+1].el_?a=this.children_[n+1].el_:Em(this.children_[n+1])&&(a=this.children_[n+1])),this.contentEl().insertBefore(i.el(),a)}return i}removeChild(e){if(typeof e=="string"&&(e=this.getChild(e)),!e||!this.children_)return;let t=!1;for(let i=this.children_.length-1;i>=0;i--)if(this.children_[i]===e){t=!0,this.children_.splice(i,1);break}if(!t)return;e.parentComponent_=null,this.childIndex_[e.id()]=null,this.childNameIndex_[di(e.name())]=null,this.childNameIndex_[sg(e.name())]=null;const n=e.el();n&&n.parentNode===this.contentEl()&&this.contentEl().removeChild(e.el())}initChildren(){const e=this.options_.children;if(e){const t=this.options_,n=a=>{const o=a.name;let l=a.opts;if(t[o]!==void 0&&(l=t[o]),l===!1)return;l===!0&&(l={}),l.playerOptions=this.options_.playerOptions;const u=this.addChild(o,l);u&&(this[o]=u)};let i;const s=Da.getComponent("Tech");Array.isArray(e)?i=e:i=Object.keys(e),i.concat(Object.keys(this.options_).filter(function(a){return!i.some(function(o){return typeof o=="string"?a===o:a===o.name})})).map(a=>{let o,l;return typeof a=="string"?(o=a,l=e[o]||this.options_[o]||{}):(o=a.name,l=a),{name:o,opts:l}}).filter(a=>{const o=Da.getComponent(a.opts.componentClass||di(a.name));return o&&!s.isTech(o)}).forEach(n)}}buildCSSClass(){return""}ready(e,t=!1){if(e){if(!this.isReady_){this.readyQueue_=this.readyQueue_||[],this.readyQueue_.push(e);return}t?e.call(this):this.setTimeout(e,1)}}triggerReady(){this.isReady_=!0,this.setTimeout(function(){const e=this.readyQueue_;this.readyQueue_=[],e&&e.length>0&&e.forEach(function(t){t.call(this)},this),this.trigger("ready")},1)}$(e,t){return qd(e,t||this.contentEl())}$$(e,t){return h6(e,t||this.contentEl())}hasClass(e){return ig(this.el_,e)}addClass(...e){Jh(this.el_,...e)}removeClass(...e){OS(this.el_,...e)}toggleClass(e,t){i6(this.el_,e,t)}show(){this.removeClass("vjs-hidden")}hide(){this.addClass("vjs-hidden")}lockShowing(){this.addClass("vjs-lock-showing")}unlockShowing(){this.removeClass("vjs-lock-showing")}getAttribute(e){return a6(this.el_,e)}setAttribute(e,t){tm(this.el_,e,t)}removeAttribute(e){MS(this.el_,e)}width(e,t){return this.dimension("width",e,t)}height(e,t){return this.dimension("height",e,t)}dimensions(e,t){this.width(e,!0),this.height(t)}dimension(e,t,n){if(t!==void 0){(t===null||t!==t)&&(t=0),(""+t).indexOf("%")!==-1||(""+t).indexOf("px")!==-1?this.el_.style[e]=t:t==="auto"?this.el_.style[e]="":this.el_.style[e]=t+"px",n||this.trigger("componentresize");return}if(!this.el_)return 0;const i=this.el_.style[e],s=i.indexOf("px");return parseInt(s!==-1?i.slice(0,s):this.el_["offset"+di(e)],10)}currentDimension(e){let t=0;if(e!=="width"&&e!=="height")throw new Error("currentDimension only accepts width or height value");if(t=nm(this.el_,e),t=parseFloat(t),t===0||isNaN(t)){const n=`offset${di(e)}`;t=this.el_[n]}return t}currentDimensions(){return{width:this.currentDimension("width"),height:this.currentDimension("height")}}currentWidth(){return this.currentDimension("width")}currentHeight(){return this.currentDimension("height")}getPositions(){const e=this.el_.getBoundingClientRect(),t={x:e.x,y:e.y,width:e.width,height:e.height,top:e.top,right:e.right,bottom:e.bottom,left:e.left},n={x:e.left+e.width/2,y:e.top+e.height/2,width:0,height:0,top:e.top+e.height/2,right:e.left+e.width/2,bottom:e.top+e.height/2,left:e.left+e.width/2};return{boundingClientRect:t,center:n}}focus(){this.el_.focus()}blur(){this.el_.blur()}handleKeyDown(e){this.player_&&(e.key!=="Tab"&&!(this.player_.options_.playerOptions.spatialNavigation&&this.player_.options_.playerOptions.spatialNavigation.enabled)&&e.stopPropagation(),this.player_.handleKeyDown(e))}handleKeyPress(e){this.handleKeyDown(e)}emitTapEvents(){let e=0,t=null;const n=10,i=200;let s;this.on("touchstart",function(o){o.touches.length===1&&(t={pageX:o.touches[0].pageX,pageY:o.touches[0].pageY},e=X.performance.now(),s=!0)}),this.on("touchmove",function(o){if(o.touches.length>1)s=!1;else if(t){const l=o.touches[0].pageX-t.pageX,u=o.touches[0].pageY-t.pageY;Math.sqrt(l*l+u*u)>n&&(s=!1)}});const a=function(){s=!1};this.on("touchleave",a),this.on("touchcancel",a),this.on("touchend",function(o){t=null,s===!0&&X.performance.now()-e<i&&(o.preventDefault(),this.trigger("tap"))})}enableTouchActivity(){if(!this.player()||!this.player().reportUserActivity)return;const e=zn(this.player(),this.player().reportUserActivity);let t;this.on("touchstart",function(){e(),this.clearInterval(t),t=this.setInterval(e,250)});const n=function(i){e(),this.clearInterval(t)};this.on("touchmove",e),this.on("touchend",n),this.on("touchcancel",n)}setTimeout(e,t){var n;return e=zn(this,e),this.clearTimersOnDispose_(),n=X.setTimeout(()=>{this.setTimeoutIds_.has(n)&&this.setTimeoutIds_.delete(n),e()},t),this.setTimeoutIds_.add(n),n}clearTimeout(e){return this.setTimeoutIds_.has(e)&&(this.setTimeoutIds_.delete(e),X.clearTimeout(e)),e}setInterval(e,t){e=zn(this,e),this.clearTimersOnDispose_();const n=X.setInterval(e,t);return this.setIntervalIds_.add(n),n}clearInterval(e){return this.setIntervalIds_.has(e)&&(this.setIntervalIds_.delete(e),X.clearInterval(e)),e}requestAnimationFrame(e){this.clearTimersOnDispose_();var t;return e=zn(this,e),t=X.requestAnimationFrame(()=>{this.rafIds_.has(t)&&this.rafIds_.delete(t),e()}),this.rafIds_.add(t),t}requestNamedAnimationFrame(e,t){this.namedRafs_.has(e)&&this.cancelNamedAnimationFrame(e),this.clearTimersOnDispose_(),t=zn(this,t);const n=this.requestAnimationFrame(()=>{t(),this.namedRafs_.has(e)&&this.namedRafs_.delete(e)});return this.namedRafs_.set(e,n),e}cancelNamedAnimationFrame(e){this.namedRafs_.has(e)&&(this.cancelAnimationFrame(this.namedRafs_.get(e)),this.namedRafs_.delete(e))}cancelAnimationFrame(e){return this.rafIds_.has(e)&&(this.rafIds_.delete(e),X.cancelAnimationFrame(e)),e}clearTimersOnDispose_(){this.clearingTimersOnDispose_||(this.clearingTimersOnDispose_=!0,this.one("dispose",()=>{[["namedRafs_","cancelNamedAnimationFrame"],["rafIds_","cancelAnimationFrame"],["setTimeoutIds_","clearTimeout"],["setIntervalIds_","clearInterval"]].forEach(([e,t])=>{this[e].forEach((n,i)=>this[t](i))}),this.clearingTimersOnDispose_=!1}))}getIsDisabled(){return!!this.el_.disabled}getIsExpresslyInert(){return this.el_.inert&&!this.el_.ownerDocument.documentElement.inert}getIsFocusable(e){return(e||this.el_).tabIndex>=0&&!(this.getIsDisabled()||this.getIsExpresslyInert())}getIsAvailableToBeFocused(e){function t(s){const a=X.getComputedStyle(s,null),o=a.getPropertyValue("visibility");return a.getPropertyValue("display")!=="none"&&!["hidden","collapse"].includes(o)}function n(s){return!(!t(s.parentElement)||!t(s)||s.style.opacity==="0"||X.getComputedStyle(s).height==="0px"||X.getComputedStyle(s).width==="0px")}function i(s){if(s.offsetWidth+s.offsetHeight+s.getBoundingClientRect().height+s.getBoundingClientRect().width===0)return!1;const a={x:s.getBoundingClientRect().left+s.offsetWidth/2,y:s.getBoundingClientRect().top+s.offsetHeight/2};if(a.x<0||a.x>(Be.documentElement.clientWidth||X.innerWidth)||a.y<0||a.y>(Be.documentElement.clientHeight||X.innerHeight))return!1;let o=Be.elementFromPoint(a.x,a.y);for(;o;){if(o===s)return!0;if(o.parentNode)o=o.parentNode;else return!1}}return e||(e=this.el()),!!(i(e)&&n(e)&&(!e.parentElement||e.tabIndex>=0))}static registerComponent(e,t){if(typeof e!="string"||!e)throw new Error(`Illegal component name, "${e}"; must be a non-empty string.`);const n=Da.getComponent("Tech"),i=n&&n.isTech(t),s=Da===t||Da.prototype.isPrototypeOf(t.prototype);if(i||!s){let o;throw i?o="techs must be registered using Tech.registerTech()":o="must be a Component subclass",new Error(`Illegal component, "${e}"; ${o}.`)}e=di(e),Da.components_||(Da.components_={});const a=Da.getComponent("Player");if(e==="Player"&&a&&a.players){const o=a.players,l=Object.keys(o);if(o&&l.length>0&&l.map(u=>o[u]).every(Boolean))throw new Error("Can not register Player component after player has been created.")}return Da.components_[e]=t,Da.components_[sg(e)]=t,t}static getComponent(e){if(!(!e||!Da.components_))return Da.components_[e]}};gt.registerComponent("Component",gt);function Bce(r,e,t){if(typeof e!="number"||e<0||e>t)throw new Error(`Failed to execute '${r}' on 'TimeRanges': The index provided (${e}) is non-numeric or out of bounds (0-${t}).`)}function V4(r,e,t,n){return Bce(r,n,t.length-1),t[n][e]}function wC(r){let e;return r===void 0||r.length===0?e={length:0,start(){throw new Error("This TimeRanges object is empty")},end(){throw new Error("This TimeRanges object is empty")}}:e={length:r.length,start:V4.bind(null,"start",0,r),end:V4.bind(null,"end",1,r)},X.Symbol&&X.Symbol.iterator&&(e[X.Symbol.iterator]=()=>(r||[]).values()),e}function Rl(r,e){return Array.isArray(r)?wC(r):r===void 0||e===void 0?wC():wC([[r,e]])}const T6=function(r,e){r=r<0?0:r;let t=Math.floor(r%60),n=Math.floor(r/60%60),i=Math.floor(r/3600);const s=Math.floor(e/60%60),a=Math.floor(e/3600);return(isNaN(r)||r===1/0)&&(i=n=t="-"),i=i>0||a>0?i+":":"",n=((i||s>=10)&&n<10?"0"+n:n)+":",t=t<10?"0"+t:t,i+n+t};let Qk=T6;function C6(r){Qk=r}function w6(){Qk=T6}function gf(r,e=r){return Qk(r,e)}var Nce=Object.freeze({__proto__:null,createTimeRanges:Rl,createTimeRange:Rl,setFormatTime:C6,resetFormatTime:w6,formatTime:gf});function E6(r,e){let t=0,n,i;if(!e)return 0;(!r||!r.length)&&(r=Rl(0,0));for(let s=0;s<r.length;s++)n=r.start(s),i=r.end(s),i>e&&(i=e),t+=i-n;return t/e}function ii(r){if(r instanceof ii)return r;typeof r=="number"?this.code=r:typeof r=="string"?this.message=r:Uu(r)&&(typeof r.code=="number"&&(this.code=r.code),Object.assign(this,r)),this.message||(this.message=ii.defaultMessages[this.code]||"")}ii.prototype.code=0;ii.prototype.message="";ii.prototype.status=null;ii.prototype.metadata=null;ii.errorTypes=["MEDIA_ERR_CUSTOM","MEDIA_ERR_ABORTED","MEDIA_ERR_NETWORK","MEDIA_ERR_DECODE","MEDIA_ERR_SRC_NOT_SUPPORTED","MEDIA_ERR_ENCRYPTED"];ii.defaultMessages={1:"You aborted the media playback",2:"A network error caused the media download to fail part-way.",3:"The media playback was aborted due to a corruption problem or because the media used features your browser did not support.",4:"The media could not be loaded, either because the server or network failed or because the format is not supported.",5:"The media is encrypted and we do not have the keys to decrypt it."};ii.MEDIA_ERR_CUSTOM=0;ii.prototype.MEDIA_ERR_CUSTOM=0;ii.MEDIA_ERR_ABORTED=1;ii.prototype.MEDIA_ERR_ABORTED=1;ii.MEDIA_ERR_NETWORK=2;ii.prototype.MEDIA_ERR_NETWORK=2;ii.MEDIA_ERR_DECODE=3;ii.prototype.MEDIA_ERR_DECODE=3;ii.MEDIA_ERR_SRC_NOT_SUPPORTED=4;ii.prototype.MEDIA_ERR_SRC_NOT_SUPPORTED=4;ii.MEDIA_ERR_ENCRYPTED=5;ii.prototype.MEDIA_ERR_ENCRYPTED=5;function ag(r){return r!=null&&typeof r.then=="function"}function xu(r){ag(r)&&r.then(null,e=>{})}const T2=function(r){return["kind","label","language","id","inBandMetadataTrackDispatchType","mode","src"].reduce((t,n,i)=>(r[n]&&(t[n]=r[n]),t),{cues:r.cues&&Array.prototype.map.call(r.cues,function(t){return{startTime:t.startTime,endTime:t.endTime,text:t.text,id:t.id}})})},Uce=function(r){const e=r.$$("track"),t=Array.prototype.map.call(e,i=>i.track);return Array.prototype.map.call(e,function(i){const s=T2(i.track);return i.src&&(s.src=i.src),s}).concat(Array.prototype.filter.call(r.textTracks(),function(i){return t.indexOf(i)===-1}).map(T2))},$ce=function(r,e){return r.forEach(function(t){const n=e.addRemoteTextTrack(t).track;!t.src&&t.cues&&t.cues.forEach(i=>n.addCue(i))}),e.textTracks()};var W4={textTracksToJson:Uce,jsonToTextTracks:$ce,trackToJson_:T2};const EC="vjs-modal-dialog";let Am=class extends gt{constructor(e,t){super(e,t),this.handleKeyDown_=n=>this.handleKeyDown(n),this.close_=n=>this.close(n),this.opened_=this.hasBeenOpened_=this.hasBeenFilled_=!1,this.closeable(!this.options_.uncloseable),this.content(this.options_.content),this.contentEl_=Ir("div",{className:`${EC}-content`},{role:"document"}),this.descEl_=Ir("p",{className:`${EC}-description vjs-control-text`,id:this.el().getAttribute("aria-describedby")}),nh(this.descEl_,this.description()),this.el_.appendChild(this.descEl_),this.el_.appendChild(this.contentEl_)}createEl(){return super.createEl("div",{className:this.buildCSSClass(),tabIndex:-1},{"aria-describedby":`${this.id()}_description`,"aria-hidden":"true","aria-label":this.label(),role:"dialog","aria-live":"polite"})}dispose(){this.contentEl_=null,this.descEl_=null,this.previouslyActiveEl_=null,super.dispose()}buildCSSClass(){return`${EC} vjs-hidden ${super.buildCSSClass()}`}label(){return this.localize(this.options_.label||"Modal Window")}description(){let e=this.options_.description||this.localize("This is a modal window.");return this.closeable()&&(e+=" "+this.localize("This modal can be closed by pressing the Escape key or activating the close button.")),e}open(){if(this.opened_){this.options_.fillAlways&&this.fill();return}const e=this.player();this.trigger("beforemodalopen"),this.opened_=!0,(this.options_.fillAlways||!this.hasBeenOpened_&&!this.hasBeenFilled_)&&this.fill(),this.wasPlaying_=!e.paused(),this.options_.pauseOnOpen&&this.wasPlaying_&&e.pause(),this.on("keydown",this.handleKeyDown_),this.hadControls_=e.controls(),e.controls(!1),this.show(),this.conditionalFocus_(),this.el().setAttribute("aria-hidden","false"),this.trigger("modalopen"),this.hasBeenOpened_=!0}opened(e){return typeof e=="boolean"&&this[e?"open":"close"](),this.opened_}close(){if(!this.opened_)return;const e=this.player();this.trigger("beforemodalclose"),this.opened_=!1,this.wasPlaying_&&this.options_.pauseOnOpen&&e.play(),this.off("keydown",this.handleKeyDown_),this.hadControls_&&e.controls(!0),this.hide(),this.el().setAttribute("aria-hidden","true"),this.trigger({type:"modalclose",bubbles:!0}),this.conditionalBlur_(),this.options_.temporary&&this.dispose()}closeable(e){if(typeof e=="boolean"){const t=this.closeable_=!!e;let n=this.getChild("closeButton");if(t&&!n){const i=this.contentEl_;this.contentEl_=this.el_,n=this.addChild("closeButton",{controlText:"Close Modal Dialog"}),this.contentEl_=i,this.on(n,"close",this.close_)}!t&&n&&(this.off(n,"close",this.close_),this.removeChild(n),n.dispose())}return this.closeable_}fill(){this.fillWith(this.content())}fillWith(e){const t=this.contentEl(),n=t.parentNode,i=t.nextSibling;this.trigger("beforemodalfill"),this.hasBeenFilled_=!0,n.removeChild(t),this.empty(),d6(t,e),this.trigger("modalfill"),i?n.insertBefore(t,i):n.appendChild(t);const s=this.getChild("closeButton");s&&n.appendChild(s.el_),this.trigger("aftermodalfill")}empty(){this.trigger("beforemodalempty"),BS(this.contentEl()),this.trigger("modalempty")}content(e){return typeof e<"u"&&(this.content_=e),this.content_}conditionalFocus_(){const e=Be.activeElement,t=this.player_.el_;this.previouslyActiveEl_=null,(t.contains(e)||t===e)&&(this.previouslyActiveEl_=e,this.focus())}conditionalBlur_(){this.previouslyActiveEl_&&(this.previouslyActiveEl_.focus(),this.previouslyActiveEl_=null)}handleKeyDown(e){if(this.trigger({type:"modalKeydown",originalEvent:e,target:this,bubbles:!0}),e.stopPropagation(),e.key==="Escape"&&this.closeable()){e.preventDefault(),this.close();return}if(e.key!=="Tab")return;const t=this.focusableEls_(),n=this.el_.querySelector(":focus");let i;for(let s=0;s<t.length;s++)if(n===t[s]){i=s;break}Be.activeElement===this.el_&&(i=0),e.shiftKey&&i===0?(t[t.length-1].focus(),e.preventDefault()):!e.shiftKey&&i===t.length-1&&(t[0].focus(),e.preventDefault())}focusableEls_(){const e=this.el_.querySelectorAll("*");return Array.prototype.filter.call(e,t=>(t instanceof X.HTMLAnchorElement||t instanceof X.HTMLAreaElement)&&t.hasAttribute("href")||(t instanceof X.HTMLInputElement||t instanceof X.HTMLSelectElement||t instanceof X.HTMLTextAreaElement||t instanceof X.HTMLButtonElement)&&!t.hasAttribute("disabled")||t instanceof X.HTMLIFrameElement||t instanceof X.HTMLObjectElement||t instanceof X.HTMLEmbedElement||t.hasAttribute("tabindex")&&t.getAttribute("tabindex")!==-1||t.hasAttribute("contenteditable"))}};Am.prototype.options_={pauseOnOpen:!0,temporary:!0};gt.registerComponent("ModalDialog",Am);let im=class extends _o{constructor(e=[]){super(),this.tracks_=[],Object.defineProperty(this,"length",{get(){return this.tracks_.length}});for(let t=0;t<e.length;t++)this.addTrack(e[t])}addTrack(e){const t=this.tracks_.length;""+t in this||Object.defineProperty(this,t,{get(){return this.tracks_[t]}}),this.tracks_.indexOf(e)===-1&&(this.tracks_.push(e),this.trigger({track:e,type:"addtrack",target:this})),e.labelchange_=()=>{this.trigger({track:e,type:"labelchange",target:this})},Rc(e)&&e.addEventListener("labelchange",e.labelchange_)}removeTrack(e){let t;for(let n=0,i=this.length;n<i;n++)if(this[n]===e){t=this[n],t.off&&t.off(),this.tracks_.splice(n,1);break}t&&this.trigger({track:t,type:"removetrack",target:this})}getTrackById(e){let t=null;for(let n=0,i=this.length;n<i;n++){const s=this[n];if(s.id===e){t=s;break}}return t}};im.prototype.allowedEvents_={change:"change",addtrack:"addtrack",removetrack:"removetrack",labelchange:"labelchange"};for(const r in im.prototype.allowedEvents_)im.prototype["on"+r]=null;const kC=function(r,e){for(let t=0;t<r.length;t++)!Object.keys(r[t]).length||e.id===r[t].id||(r[t].enabled=!1)};let jce=class extends im{constructor(e=[]){for(let t=e.length-1;t>=0;t--)if(e[t].enabled){kC(e,e[t]);break}super(e),this.changing_=!1}addTrack(e){e.enabled&&kC(this,e),super.addTrack(e),e.addEventListener&&(e.enabledChange_=()=>{this.changing_||(this.changing_=!0,kC(this,e),this.changing_=!1,this.trigger("change"))},e.addEventListener("enabledchange",e.enabledChange_))}removeTrack(e){super.removeTrack(e),e.removeEventListener&&e.enabledChange_&&(e.removeEventListener("enabledchange",e.enabledChange_),e.enabledChange_=null)}};const AC=function(r,e){for(let t=0;t<r.length;t++)!Object.keys(r[t]).length||e.id===r[t].id||(r[t].selected=!1)};let zce=class extends im{constructor(e=[]){for(let t=e.length-1;t>=0;t--)if(e[t].selected){AC(e,e[t]);break}super(e),this.changing_=!1,Object.defineProperty(this,"selectedIndex",{get(){for(let t=0;t<this.length;t++)if(this[t].selected)return t;return-1},set(){}})}addTrack(e){e.selected&&AC(this,e),super.addTrack(e),e.addEventListener&&(e.selectedChange_=()=>{this.changing_||(this.changing_=!0,AC(this,e),this.changing_=!1,this.trigger("change"))},e.addEventListener("selectedchange",e.selectedChange_))}removeTrack(e){super.removeTrack(e),e.removeEventListener&&e.selectedChange_&&(e.removeEventListener("selectedchange",e.selectedChange_),e.selectedChange_=null)}},k6=class extends im{addTrack(e){super.addTrack(e),this.queueChange_||(this.queueChange_=()=>this.queueTrigger("change")),this.triggerSelectedlanguagechange||(this.triggerSelectedlanguagechange_=()=>this.trigger("selectedlanguagechange")),e.addEventListener("modechange",this.queueChange_),["metadata","chapters"].indexOf(e.kind)===-1&&e.addEventListener("modechange",this.triggerSelectedlanguagechange_)}removeTrack(e){super.removeTrack(e),e.removeEventListener&&(this.queueChange_&&e.removeEventListener("modechange",this.queueChange_),this.selectedlanguagechange_&&e.removeEventListener("modechange",this.triggerSelectedlanguagechange_))}},Hce=class{constructor(e=[]){this.trackElements_=[],Object.defineProperty(this,"length",{get(){return this.trackElements_.length}});for(let t=0,n=e.length;t<n;t++)this.addTrackElement_(e[t])}addTrackElement_(e){const t=this.trackElements_.length;""+t in this||Object.defineProperty(this,t,{get(){return this.trackElements_[t]}}),this.trackElements_.indexOf(e)===-1&&this.trackElements_.push(e)}getTrackElementByTrack_(e){let t;for(let n=0,i=this.trackElements_.length;n<i;n++)if(e===this.trackElements_[n].track){t=this.trackElements_[n];break}return t}removeTrackElement_(e){for(let t=0,n=this.trackElements_.length;t<n;t++)if(e===this.trackElements_[t]){this.trackElements_[t].track&&typeof this.trackElements_[t].track.off=="function"&&this.trackElements_[t].track.off(),typeof this.trackElements_[t].off=="function"&&this.trackElements_[t].off(),this.trackElements_.splice(t,1);break}}},q4=class A6{constructor(e){A6.prototype.setCues_.call(this,e),Object.defineProperty(this,"length",{get(){return this.length_}})}setCues_(e){const t=this.length||0;let n=0;const i=e.length;this.cues_=e,this.length_=e.length;const s=function(a){""+a in this||Object.defineProperty(this,""+a,{get(){return this.cues_[a]}})};if(t<i)for(n=t;n<i;n++)s.call(this,n)}getCueById(e){let t=null;for(let n=0,i=this.length;n<i;n++){const s=this[n];if(s.id===e){t=s;break}}return t}};const Vce={alternative:"alternative",captions:"captions",main:"main",sign:"sign",subtitles:"subtitles",commentary:"commentary"},Wce={alternative:"alternative",descriptions:"descriptions",main:"main","main-desc":"main-desc",translation:"translation",commentary:"commentary"},qce={subtitles:"subtitles",captions:"captions",descriptions:"descriptions",chapters:"chapters",metadata:"metadata"},G4={disabled:"disabled",hidden:"hidden",showing:"showing"};let Jk=class extends _o{constructor(e={}){super();const t={id:e.id||"vjs_track_"+il(),kind:e.kind||"",language:e.language||""};let n=e.label||"";for(const i in t)Object.defineProperty(this,i,{get(){return t[i]},set(){}});Object.defineProperty(this,"label",{get(){return n},set(i){i!==n&&(n=i,this.trigger("labelchange"))}})}};const Zk=function(r){return new URL(r,Be.baseURI)},D6=function(r){return new URL(r,Be.baseURI).href},eA=function(r){if(typeof r=="string"){const t=/^(\/?)([\s\S]*?)((?:\.{1,2}|[^\/]+?)(\.([^\.\/\?]+)))(?:[\/]*|[\?].*)$/.exec(r);if(t)return t.pop().toLowerCase()}return""},jS=function(r,e=X.location){return Zk(r).origin!==e.origin};var Gce=Object.freeze({__proto__:null,parseUrl:Zk,getAbsoluteURL:D6,getFileExtension:eA,isCrossOrigin:jS});const K4=function(r,e){const t=new X.WebVTT.Parser(X,X.vttjs,X.WebVTT.StringDecoder()),n=[];t.oncue=function(i){e.addCue(i)},t.onparsingerror=function(i){n.push(i)},t.onflush=function(){e.trigger({type:"loadeddata",target:e})},t.parse(r),n.length>0&&(X.console&&X.console.groupCollapsed&&X.console.groupCollapsed(`Text Track parsing errors for ${e.src}`),n.forEach(i=>Yr.error(i)),X.console&&X.console.groupEnd&&X.console.groupEnd()),t.flush()},X4=function(r,e){const t={uri:r},n=jS(r);n&&(t.cors=n);const i=e.tech_.crossOrigin()==="use-credentials";i&&(t.withCredentials=i),k5(t,zn(this,function(s,a,o){if(s)return Yr.error(s,a);e.loaded_=!0,typeof X.WebVTT!="function"?e.tech_&&e.tech_.any(["vttjsloaded","vttjserror"],l=>{if(l.type==="vttjserror"){Yr.error(`vttjs failed to load, stopping trying to process ${e.src}`);return}return K4(o,e)}):K4(o,e)}))};let vv=class extends Jk{constructor(e={}){if(!e.tech)throw new Error("A tech was not provided.");const t=Bn(e,{kind:qce[e.kind]||"subtitles",language:e.language||e.srclang||""});let n=G4[t.mode]||"disabled";const i=t.default;(t.kind==="metadata"||t.kind==="chapters")&&(n="hidden"),super(t),this.tech_=t.tech,this.cues_=[],this.activeCues_=[],this.preload_=this.tech_.preloadTextTracks!==!1;const s=new q4(this.cues_),a=new q4(this.activeCues_);let o=!1;this.timeupdateHandler=zn(this,function(u={}){if(!this.tech_.isDisposed()){if(!this.tech_.isReady_){u.type!=="timeupdate"&&(this.rvf_=this.tech_.requestVideoFrameCallback(this.timeupdateHandler));return}this.activeCues=this.activeCues,o&&(this.trigger("cuechange"),o=!1),u.type!=="timeupdate"&&(this.rvf_=this.tech_.requestVideoFrameCallback(this.timeupdateHandler))}});const l=()=>{this.stopTracking()};this.tech_.one("dispose",l),n!=="disabled"&&this.startTracking(),Object.defineProperties(this,{default:{get(){return i},set(){}},mode:{get(){return n},set(u){G4[u]&&n!==u&&(n=u,!this.preload_&&n!=="disabled"&&this.cues.length===0&&X4(this.src,this),this.stopTracking(),n!=="disabled"&&this.startTracking(),this.trigger("modechange"))}},cues:{get(){return this.loaded_?s:null},set(){}},activeCues:{get(){if(!this.loaded_)return null;if(this.cues.length===0)return a;const u=this.tech_.currentTime(),c=[];for(let h=0,f=this.cues.length;h<f;h++){const g=this.cues[h];g.startTime<=u&&g.endTime>=u&&c.push(g)}if(o=!1,c.length!==this.activeCues_.length)o=!0;else for(let h=0;h<c.length;h++)this.activeCues_.indexOf(c[h])===-1&&(o=!0);return this.activeCues_=c,a.setCues_(this.activeCues_),a},set(){}}}),t.src?(this.src=t.src,this.preload_||(this.loaded_=!0),(this.preload_||t.kind!=="subtitles"&&t.kind!=="captions")&&X4(this.src,this)):this.loaded_=!0}startTracking(){this.rvf_=this.tech_.requestVideoFrameCallback(this.timeupdateHandler),this.tech_.on("timeupdate",this.timeupdateHandler)}stopTracking(){this.rvf_&&(this.tech_.cancelVideoFrameCallback(this.rvf_),this.rvf_=void 0),this.tech_.off("timeupdate",this.timeupdateHandler)}addCue(e){let t=e;if(!("getCueAsHTML"in t)){t=new X.vttjs.VTTCue(e.startTime,e.endTime,e.text);for(const i in e)i in t||(t[i]=e[i]);t.id=e.id,t.originalCue_=e}const n=this.tech_.textTracks();for(let i=0;i<n.length;i++)n[i]!==this&&n[i].removeCue(t);this.cues_.push(t),this.cues.setCues_(this.cues_)}removeCue(e){let t=this.cues_.length;for(;t--;){const n=this.cues_[t];if(n===e||n.originalCue_&&n.originalCue_===e){this.cues_.splice(t,1),this.cues.setCues_(this.cues_);break}}}};vv.prototype.allowedEvents_={cuechange:"cuechange"};let I6=class extends Jk{constructor(e={}){const t=Bn(e,{kind:Wce[e.kind]||""});super(t);let n=!1;Object.defineProperty(this,"enabled",{get(){return n},set(i){typeof i!="boolean"||i===n||(n=i,this.trigger("enabledchange"))}}),t.enabled&&(this.enabled=t.enabled),this.loaded_=!0}},P6=class extends Jk{constructor(e={}){const t=Bn(e,{kind:Vce[e.kind]||""});super(t);let n=!1;Object.defineProperty(this,"selected",{get(){return n},set(i){typeof i!="boolean"||i===n||(n=i,this.trigger("selectedchange"))}}),t.selected&&(this.selected=t.selected)}},Dm=class C2 extends _o{constructor(e={}){super();let t;const n=new vv(e);this.kind=n.kind,this.src=n.src,this.srclang=n.language,this.label=n.label,this.default=n.default,Object.defineProperties(this,{readyState:{get(){return t}},track:{get(){return n}}}),t=C2.NONE,n.addEventListener("loadeddata",()=>{t=C2.LOADED,this.trigger({type:"load",target:this})})}};Dm.prototype.allowedEvents_={load:"load"};Dm.NONE=0;Dm.LOADING=1;Dm.LOADED=2;Dm.ERROR=3;const Qo={audio:{ListClass:jce,TrackClass:I6,capitalName:"Audio"},video:{ListClass:zce,TrackClass:P6,capitalName:"Video"},text:{ListClass:k6,TrackClass:vv,capitalName:"Text"}};Object.keys(Qo).forEach(function(r){Qo[r].getterName=`${r}Tracks`,Qo[r].privateName=`${r}Tracks_`});const sm={remoteText:{ListClass:k6,TrackClass:vv,capitalName:"RemoteText",getterName:"remoteTextTracks",privateName:"remoteTextTracks_"},remoteTextEl:{ListClass:Hce,TrackClass:Dm,capitalName:"RemoteTextTrackEls",getterName:"remoteTextTrackEls",privateName:"remoteTextTrackEls_"}},ta=Object.assign({},Qo,sm);sm.names=Object.keys(sm);Qo.names=Object.keys(Qo);ta.names=[].concat(sm.names).concat(Qo.names);function Kce(r,e,t,n,i={}){const s=r.textTracks();i.kind=e,t&&(i.label=t),n&&(i.language=n),i.tech=r;const a=new ta.text.TrackClass(i);return s.addTrack(a),a}let Nn=class Ns extends gt{constructor(e={},t=function(){}){e.reportTouchActivity=!1,super(null,e,t),this.onDurationChange_=n=>this.onDurationChange(n),this.trackProgress_=n=>this.trackProgress(n),this.trackCurrentTime_=n=>this.trackCurrentTime(n),this.stopTrackingCurrentTime_=n=>this.stopTrackingCurrentTime(n),this.disposeSourceHandler_=n=>this.disposeSourceHandler(n),this.queuedHanders_=new Set,this.hasStarted_=!1,this.on("playing",function(){this.hasStarted_=!0}),this.on("loadstart",function(){this.hasStarted_=!1}),ta.names.forEach(n=>{const i=ta[n];e&&e[i.getterName]&&(this[i.privateName]=e[i.getterName])}),this.featuresProgressEvents||this.manualProgressOn(),this.featuresTimeupdateEvents||this.manualTimeUpdatesOn(),["Text","Audio","Video"].forEach(n=>{e[`native${n}Tracks`]===!1&&(this[`featuresNative${n}Tracks`]=!1)}),e.nativeCaptions===!1||e.nativeTextTracks===!1?this.featuresNativeTextTracks=!1:(e.nativeCaptions===!0||e.nativeTextTracks===!0)&&(this.featuresNativeTextTracks=!0),this.featuresNativeTextTracks||this.emulateTextTracks(),this.preloadTextTracks=e.preloadTextTracks!==!1,this.autoRemoteTextTracks_=new ta.text.ListClass,this.initTrackListeners(),e.nativeControlsForTouch||this.emitTapEvents(),this.constructor&&(this.name_=this.constructor.name||"Unknown Tech")}triggerSourceset(e){this.isReady_||this.one("ready",()=>this.setTimeout(()=>this.triggerSourceset(e),1)),this.trigger({src:e,type:"sourceset"})}manualProgressOn(){this.on("durationchange",this.onDurationChange_),this.manualProgress=!0,this.one("ready",this.trackProgress_)}manualProgressOff(){this.manualProgress=!1,this.stopTrackingProgress(),this.off("durationchange",this.onDurationChange_)}trackProgress(e){this.stopTrackingProgress(),this.progressInterval=this.setInterval(zn(this,function(){const t=this.bufferedPercent();this.bufferedPercent_!==t&&this.trigger("progress"),this.bufferedPercent_=t,t===1&&this.stopTrackingProgress()}),500)}onDurationChange(e){this.duration_=this.duration()}buffered(){return Rl(0,0)}bufferedPercent(){return E6(this.buffered(),this.duration_)}stopTrackingProgress(){this.clearInterval(this.progressInterval)}manualTimeUpdatesOn(){this.manualTimeUpdates=!0,this.on("play",this.trackCurrentTime_),this.on("pause",this.stopTrackingCurrentTime_)}manualTimeUpdatesOff(){this.manualTimeUpdates=!1,this.stopTrackingCurrentTime(),this.off("play",this.trackCurrentTime_),this.off("pause",this.stopTrackingCurrentTime_)}trackCurrentTime(){this.currentTimeInterval&&this.stopTrackingCurrentTime(),this.currentTimeInterval=this.setInterval(function(){this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},250)}stopTrackingCurrentTime(){this.clearInterval(this.currentTimeInterval),this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})}dispose(){this.clearTracks(Qo.names),this.manualProgress&&this.manualProgressOff(),this.manualTimeUpdates&&this.manualTimeUpdatesOff(),super.dispose()}clearTracks(e){e=[].concat(e),e.forEach(t=>{const n=this[`${t}Tracks`]()||[];let i=n.length;for(;i--;){const s=n[i];t==="text"&&this.removeRemoteTextTrack(s),n.removeTrack(s)}})}cleanupAutoTextTracks(){const e=this.autoRemoteTextTracks_||[];let t=e.length;for(;t--;){const n=e[t];this.removeRemoteTextTrack(n)}}reset(){}crossOrigin(){}setCrossOrigin(){}error(e){return e!==void 0&&(this.error_=new ii(e),this.trigger("error")),this.error_}played(){return this.hasStarted_?Rl(0,0):Rl()}play(){}setScrubbing(e){}scrubbing(){}setCurrentTime(e){this.manualTimeUpdates&&this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})}initTrackListeners(){Qo.names.forEach(e=>{const t=Qo[e],n=()=>{this.trigger(`${e}trackchange`)},i=this[t.getterName]();i.addEventListener("removetrack",n),i.addEventListener("addtrack",n),this.on("dispose",()=>{i.removeEventListener("removetrack",n),i.removeEventListener("addtrack",n)})})}addWebVttScript_(){if(!X.WebVTT)if(Be.body.contains(this.el())){if(!this.options_["vtt.js"]&&em(z_)&&Object.keys(z_).length>0){this.trigger("vttjsloaded");return}const e=Be.createElement("script");e.src=this.options_["vtt.js"]||"https://vjs.zencdn.net/vttjs/0.14.1/vtt.min.js",e.onload=()=>{this.trigger("vttjsloaded")},e.onerror=()=>{this.trigger("vttjserror")},this.on("dispose",()=>{e.onload=null,e.onerror=null}),X.WebVTT=!0,this.el().parentNode.appendChild(e)}else this.ready(this.addWebVttScript_)}emulateTextTracks(){const e=this.textTracks(),t=this.remoteTextTracks(),n=o=>e.addTrack(o.track),i=o=>e.removeTrack(o.track);t.on("addtrack",n),t.on("removetrack",i),this.addWebVttScript_();const s=()=>this.trigger("texttrackchange"),a=()=>{s();for(let o=0;o<e.length;o++){const l=e[o];l.removeEventListener("cuechange",s),l.mode==="showing"&&l.addEventListener("cuechange",s)}};a(),e.addEventListener("change",a),e.addEventListener("addtrack",a),e.addEventListener("removetrack",a),this.on("dispose",function(){t.off("addtrack",n),t.off("removetrack",i),e.removeEventListener("change",a),e.removeEventListener("addtrack",a),e.removeEventListener("removetrack",a);for(let o=0;o<e.length;o++)e[o].removeEventListener("cuechange",s)})}addTextTrack(e,t,n){if(!e)throw new Error("TextTrack kind is required but was not provided");return Kce(this,e,t,n)}createRemoteTextTrack(e){const t=Bn(e,{tech:this});return new sm.remoteTextEl.TrackClass(t)}addRemoteTextTrack(e={},t){const n=this.createRemoteTextTrack(e);return typeof t!="boolean"&&(t=!1),this.remoteTextTrackEls().addTrackElement_(n),this.remoteTextTracks().addTrack(n.track),t===!1&&this.ready(()=>this.autoRemoteTextTracks_.addTrack(n.track)),n}removeRemoteTextTrack(e){const t=this.remoteTextTrackEls().getTrackElementByTrack_(e);this.remoteTextTrackEls().removeTrackElement_(t),this.remoteTextTracks().removeTrack(e),this.autoRemoteTextTracks_.removeTrack(e)}getVideoPlaybackQuality(){return{}}requestPictureInPicture(){return Promise.reject()}disablePictureInPicture(){return!0}setDisablePictureInPicture(){}requestVideoFrameCallback(e){const t=il();return!this.isReady_||this.paused()?(this.queuedHanders_.add(t),this.one("playing",()=>{this.queuedHanders_.has(t)&&(this.queuedHanders_.delete(t),e())})):this.requestNamedAnimationFrame(t,e),t}cancelVideoFrameCallback(e){this.queuedHanders_.has(e)?this.queuedHanders_.delete(e):this.cancelNamedAnimationFrame(e)}setPoster(){}playsinline(){}setPlaysinline(){}overrideNativeAudioTracks(e){}overrideNativeVideoTracks(e){}canPlayType(e){return""}static canPlayType(e){return""}static canPlaySource(e,t){return Ns.canPlayType(e.type)}static isTech(e){return e.prototype instanceof Ns||e instanceof Ns||e===Ns}static registerTech(e,t){if(Ns.techs_||(Ns.techs_={}),!Ns.isTech(t))throw new Error(`Tech ${e} must be a Tech`);if(!Ns.canPlayType)throw new Error("Techs must have a static canPlayType method on them");if(!Ns.canPlaySource)throw new Error("Techs must have a static canPlaySource method on them");return e=di(e),Ns.techs_[e]=t,Ns.techs_[sg(e)]=t,e!=="Tech"&&Ns.defaultTechOrder_.push(e),t}static getTech(e){if(e){if(Ns.techs_&&Ns.techs_[e])return Ns.techs_[e];if(e=di(e),X&&X.videojs&&X.videojs[e])return Yr.warn(`The ${e} tech was added to the videojs object when it should be registered using videojs.registerTech(name, tech)`),X.videojs[e]}}};ta.names.forEach(function(r){const e=ta[r];Nn.prototype[e.getterName]=function(){return this[e.privateName]=this[e.privateName]||new e.ListClass,this[e.privateName]}});Nn.prototype.featuresVolumeControl=!0;Nn.prototype.featuresMuteControl=!0;Nn.prototype.featuresFullscreenResize=!1;Nn.prototype.featuresPlaybackRate=!1;Nn.prototype.featuresProgressEvents=!1;Nn.prototype.featuresSourceset=!1;Nn.prototype.featuresTimeupdateEvents=!1;Nn.prototype.featuresNativeTextTracks=!1;Nn.prototype.featuresVideoFrameCallback=!1;Nn.withSourceHandlers=function(r){r.registerSourceHandler=function(t,n){let i=r.sourceHandlers;i||(i=r.sourceHandlers=[]),n===void 0&&(n=i.length),i.splice(n,0,t)},r.canPlayType=function(t){const n=r.sourceHandlers||[];let i;for(let s=0;s<n.length;s++)if(i=n[s].canPlayType(t),i)return i;return""},r.selectSourceHandler=function(t,n){const i=r.sourceHandlers||[];let s;for(let a=0;a<i.length;a++)if(s=i[a].canHandleSource(t,n),s)return i[a];return null},r.canPlaySource=function(t,n){const i=r.selectSourceHandler(t,n);return i?i.canHandleSource(t,n):""},["seekable","seeking","duration"].forEach(function(t){const n=this[t];typeof n=="function"&&(this[t]=function(){return this.sourceHandler_&&this.sourceHandler_[t]?this.sourceHandler_[t].apply(this.sourceHandler_,arguments):n.apply(this,arguments)})},r.prototype),r.prototype.setSource=function(t){let n=r.selectSourceHandler(t,this.options_);n||(r.nativeSourceHandler?n=r.nativeSourceHandler:Yr.error("No source handler found for the current source.")),this.disposeSourceHandler(),this.off("dispose",this.disposeSourceHandler_),n!==r.nativeSourceHandler&&(this.currentSource_=t),this.sourceHandler_=n.handleSource(t,this,this.options_),this.one("dispose",this.disposeSourceHandler_)},r.prototype.disposeSourceHandler=function(){this.currentSource_&&(this.clearTracks(["audio","video"]),this.currentSource_=null),this.cleanupAutoTextTracks(),this.sourceHandler_&&(this.sourceHandler_.dispose&&this.sourceHandler_.dispose(),this.sourceHandler_=null)}};gt.registerComponent("Tech",Nn);Nn.registerTech("Tech",Nn);Nn.defaultTechOrder_=[];const Zh={},J_={},Z_={};function Xce(r,e){Zh[r]=Zh[r]||[],Zh[r].push(e)}function Yce(r,e,t){r.setTimeout(()=>Oh(e,Zh[e.type],t,r),1)}function Qce(r,e){r.forEach(t=>t.setTech&&t.setTech(e))}function Jce(r,e,t){return r.reduceRight(tA(t),e[t]())}function Zce(r,e,t,n){return e[t](r.reduce(tA(t),n))}function Y4(r,e,t,n=null){const i="call"+di(t),s=r.reduce(tA(i),n),a=s===Z_,o=a?null:e[t](s);return rde(r,t,o,a),o}const ede={buffered:1,currentTime:1,duration:1,muted:1,played:1,paused:1,seekable:1,volume:1,ended:1},tde={setCurrentTime:1,setMuted:1,setVolume:1},Q4={play:1,pause:1};function tA(r){return(e,t)=>e===Z_?Z_:t[r]?t[r](e):e}function rde(r,e,t,n){for(let i=r.length-1;i>=0;i--){const s=r[i];s[e]&&s[e](n,t)}}function nde(r){J_.hasOwnProperty(r.id())&&delete J_[r.id()]}function ide(r,e){const t=J_[r.id()];let n=null;if(t==null)return n=e(r),J_[r.id()]=[[e,n]],n;for(let i=0;i<t.length;i++){const[s,a]=t[i];s===e&&(n=a)}return n===null&&(n=e(r),t.push([e,n])),n}function Oh(r={},e=[],t,n,i=[],s=!1){const[a,...o]=e;if(typeof a=="string")Oh(r,Zh[a],t,n,i,s);else if(a){const l=ide(n,a);if(!l.setSource)return i.push(l),Oh(r,o,t,n,i,s);l.setSource(Object.assign({},r),function(u,c){if(u)return Oh(r,o,t,n,i,s);i.push(l),Oh(c,r.type===c.type?o:Zh[c.type],t,n,i,s)})}else o.length?Oh(r,o,t,n,i,s):s?t(r,i):Oh(r,Zh["*"],t,n,i,!0)}const sde={opus:"video/ogg",ogv:"video/ogg",mp4:"video/mp4",mov:"video/mp4",m4v:"video/mp4",mkv:"video/x-matroska",m4a:"audio/mp4",mp3:"audio/mpeg",aac:"audio/aac",caf:"audio/x-caf",flac:"audio/flac",oga:"audio/ogg",wav:"audio/wav",m3u8:"application/x-mpegURL",mpd:"application/dash+xml",jpg:"image/jpeg",jpeg:"image/jpeg",gif:"image/gif",png:"image/png",svg:"image/svg+xml",webp:"image/webp"},eb=function(r=""){const e=eA(r);return sde[e.toLowerCase()]||""},ade=(r,e)=>{if(!e)return"";if(r.cache_.source.src===e&&r.cache_.source.type)return r.cache_.source.type;const t=r.cache_.sources.filter(i=>i.src===e);if(t.length)return t[0].type;const n=r.$$("source");for(let i=0;i<n.length;i++){const s=n[i];if(s.type&&s.src&&s.src===e)return s.type}return eb(e)},R6=function(r){if(Array.isArray(r)){let e=[];r.forEach(function(t){t=R6(t),Array.isArray(t)?e=e.concat(t):Uu(t)&&e.push(t)}),r=e}else typeof r=="string"&&r.trim()?r=[J4({src:r})]:Uu(r)&&typeof r.src=="string"&&r.src&&r.src.trim()?r=[J4(r)]:r=[];return r};function J4(r){if(!r.type){const e=eb(r.src);e&&(r.type=e)}return r}var ode=`<svg xmlns="http://www.w3.org/2000/svg">
  <defs>
    <symbol viewBox="0 0 48 48" id="vjs-icon-play">
      <path d="M16 10v28l22-14z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-pause">
      <path d="M12 38h8V10h-8v28zm16-28v28h8V10h-8z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-audio">
      <path d="M24 2C14.06 2 6 10.06 6 20v14c0 3.31 2.69 6 6 6h6V24h-8v-4c0-7.73 6.27-14 14-14s14 6.27 14 14v4h-8v16h6c3.31 0 6-2.69 6-6V20c0-9.94-8.06-18-18-18z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-captions">
      <path d="M38 8H10c-2.21 0-4 1.79-4 4v24c0 2.21 1.79 4 4 4h28c2.21 0 4-1.79 4-4V12c0-2.21-1.79-4-4-4zM22 22h-3v-1h-4v6h4v-1h3v2a2 2 0 0 1-2 2h-6a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v2zm14 0h-3v-1h-4v6h4v-1h3v2a2 2 0 0 1-2 2h-6a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v2z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-subtitles">
      <path d="M40 8H8c-2.21 0-4 1.79-4 4v24c0 2.21 1.79 4 4 4h32c2.21 0 4-1.79 4-4V12c0-2.21-1.79-4-4-4zM8 24h8v4H8v-4zm20 12H8v-4h20v4zm12 0h-8v-4h8v4zm0-8H20v-4h20v4z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-fullscreen-enter">
      <path d="M14 28h-4v10h10v-4h-6v-6zm-4-8h4v-6h6v-4H10v10zm24 14h-6v4h10V28h-4v6zm-6-24v4h6v6h4V10H28z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-fullscreen-exit">
      <path d="M10 32h6v6h4V28H10v4zm6-16h-6v4h10V10h-4v6zm12 22h4v-6h6v-4H28v10zm4-22v-6h-4v10h10v-4h-6z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-play-circle">
      <path d="M20 33l12-9-12-9v18zm4-29C12.95 4 4 12.95 4 24s8.95 20 20 20 20-8.95 20-20S35.05 4 24 4zm0 36c-8.82 0-16-7.18-16-16S15.18 8 24 8s16 7.18 16 16-7.18 16-16 16z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-volume-mute">
      <path d="M33 24c0-3.53-2.04-6.58-5-8.05v4.42l4.91 4.91c.06-.42.09-.85.09-1.28zm5 0c0 1.88-.41 3.65-1.08 5.28l3.03 3.03C41.25 29.82 42 27 42 24c0-8.56-5.99-15.72-14-17.54v4.13c5.78 1.72 10 7.07 10 13.41zM8.55 6L6 8.55 15.45 18H6v12h8l10 10V26.55l8.51 8.51c-1.34 1.03-2.85 1.86-4.51 2.36v4.13a17.94 17.94 0 0 0 7.37-3.62L39.45 42 42 39.45l-18-18L8.55 6zM24 8l-4.18 4.18L24 16.36V8z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-volume-low">
      <path d="M14 18v12h8l10 10V8L22 18h-8z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-volume-medium">
      <path d="M37 24c0-3.53-2.04-6.58-5-8.05v16.11c2.96-1.48 5-4.53 5-8.06zm-27-6v12h8l10 10V8L18 18h-8z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-volume-high">
      <path d="M6 18v12h8l10 10V8L14 18H6zm27 6c0-3.53-2.04-6.58-5-8.05v16.11c2.96-1.48 5-4.53 5-8.06zM28 6.46v4.13c5.78 1.72 10 7.07 10 13.41s-4.22 11.69-10 13.41v4.13c8.01-1.82 14-8.97 14-17.54S36.01 8.28 28 6.46z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-spinner">
      <path d="M18.8 21l9.53-16.51C26.94 4.18 25.49 4 24 4c-4.8 0-9.19 1.69-12.64 4.51l7.33 12.69.11-.2zm24.28-3c-1.84-5.85-6.3-10.52-11.99-12.68L23.77 18h19.31zm.52 2H28.62l.58 1 9.53 16.5C41.99 33.94 44 29.21 44 24c0-1.37-.14-2.71-.4-4zm-26.53 4l-7.8-13.5C6.01 14.06 4 18.79 4 24c0 1.37.14 2.71.4 4h14.98l-2.31-4zM4.92 30c1.84 5.85 6.3 10.52 11.99 12.68L24.23 30H4.92zm22.54 0l-7.8 13.51c1.4.31 2.85.49 4.34.49 4.8 0 9.19-1.69 12.64-4.51L29.31 26.8 27.46 30z"></path>
    </symbol>
    <symbol viewBox="0 0 24 24" id="vjs-icon-hd">
      <path d="M19 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-8 12H9.5v-2h-2v2H6V9h1.5v2.5h2V9H11v6zm2-6h4c.55 0 1 .45 1 1v4c0 .55-.45 1-1 1h-4V9zm1.5 4.5h2v-3h-2v3z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-chapters">
      <path d="M6 26h4v-4H6v4zm0 8h4v-4H6v4zm0-16h4v-4H6v4zm8 8h28v-4H14v4zm0 8h28v-4H14v4zm0-20v4h28v-4H14z"></path>
    </symbol>
    <symbol viewBox="0 0 40 40" id="vjs-icon-downloading">
      <path d="M18.208 36.875q-3.208-.292-5.979-1.729-2.771-1.438-4.812-3.729-2.042-2.292-3.188-5.229-1.146-2.938-1.146-6.23 0-6.583 4.334-11.416 4.333-4.834 10.833-5.5v3.166q-5.167.75-8.583 4.646Q6.25 14.75 6.25 19.958q0 5.209 3.396 9.104 3.396 3.896 8.562 4.646zM20 28.417L11.542 20l2.083-2.083 4.917 4.916v-11.25h2.916v11.25l4.875-4.916L28.417 20zm1.792 8.458v-3.167q1.833-.25 3.541-.958 1.709-.708 3.167-1.875l2.333 2.292q-1.958 1.583-4.25 2.541-2.291.959-4.791 1.167zm6.791-27.792q-1.541-1.125-3.25-1.854-1.708-.729-3.541-1.021V3.042q2.5.25 4.77 1.208 2.271.958 4.271 2.5zm4.584 21.584l-2.25-2.25q1.166-1.5 1.854-3.209.687-1.708.937-3.541h3.209q-.292 2.5-1.229 4.791-.938 2.292-2.521 4.209zm.541-12.417q-.291-1.833-.958-3.562-.667-1.73-1.833-3.188l2.375-2.208q1.541 1.916 2.458 4.208.917 2.292 1.167 4.75z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-file-download">
      <path d="M10.8 40.55q-1.35 0-2.375-1T7.4 37.15v-7.7h3.4v7.7h26.35v-7.7h3.4v7.7q0 1.4-1 2.4t-2.4 1zM24 32.1L13.9 22.05l2.45-2.45 5.95 5.95V7.15h3.4v18.4l5.95-5.95 2.45 2.45z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-file-download-done">
      <path d="M9.8 40.5v-3.45h28.4v3.45zm9.2-9.05L7.4 19.85l2.45-2.35L19 26.65l19.2-19.2 2.4 2.4z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-file-download-off">
      <path d="M4.9 4.75L43.25 43.1 41 45.3l-4.75-4.75q-.05.05-.075.025-.025-.025-.075-.025H10.8q-1.35 0-2.375-1T7.4 37.15v-7.7h3.4v7.7h22.05l-7-7-1.85 1.8L13.9 21.9l1.85-1.85L2.7 7zm26.75 14.7l2.45 2.45-3.75 3.8-2.45-2.5zM25.7 7.15V21.1l-3.4-3.45V7.15z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-share">
      <path d="M36 32.17c-1.52 0-2.89.59-3.93 1.54L17.82 25.4c.11-.45.18-.92.18-1.4s-.07-.95-.18-1.4l14.1-8.23c1.07 1 2.5 1.62 4.08 1.62 3.31 0 6-2.69 6-6s-2.69-6-6-6-6 2.69-6 6c0 .48.07.95.18 1.4l-14.1 8.23c-1.07-1-2.5-1.62-4.08-1.62-3.31 0-6 2.69-6 6s2.69 6 6 6c1.58 0 3.01-.62 4.08-1.62l14.25 8.31c-.1.42-.16.86-.16 1.31A5.83 5.83 0 1 0 36 32.17z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-cog">
      <path d="M38.86 25.95c.08-.64.14-1.29.14-1.95s-.06-1.31-.14-1.95l4.23-3.31c.38-.3.49-.84.24-1.28l-4-6.93c-.25-.43-.77-.61-1.22-.43l-4.98 2.01c-1.03-.79-2.16-1.46-3.38-1.97L29 4.84c-.09-.47-.5-.84-1-.84h-8c-.5 0-.91.37-.99.84l-.75 5.3a14.8 14.8 0 0 0-3.38 1.97L9.9 10.1a1 1 0 0 0-1.22.43l-4 6.93c-.25.43-.14.97.24 1.28l4.22 3.31C9.06 22.69 9 23.34 9 24s.06 1.31.14 1.95l-4.22 3.31c-.38.3-.49.84-.24 1.28l4 6.93c.25.43.77.61 1.22.43l4.98-2.01c1.03.79 2.16 1.46 3.38 1.97l.75 5.3c.08.47.49.84.99.84h8c.5 0 .91-.37.99-.84l.75-5.3a14.8 14.8 0 0 0 3.38-1.97l4.98 2.01a1 1 0 0 0 1.22-.43l4-6.93c.25-.43.14-.97-.24-1.28l-4.22-3.31zM24 31c-3.87 0-7-3.13-7-7s3.13-7 7-7 7 3.13 7 7-3.13 7-7 7z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-square">
      <path d="M36 8H12c-2.21 0-4 1.79-4 4v24c0 2.21 1.79 4 4 4h24c2.21 0 4-1.79 4-4V12c0-2.21-1.79-4-4-4zm0 28H12V12h24v24z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-circle">
      <circle cx="24" cy="24" r="20"></circle>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-circle-outline">
      <path d="M24 4C12.95 4 4 12.95 4 24s8.95 20 20 20 20-8.95 20-20S35.05 4 24 4zm0 36c-8.82 0-16-7.18-16-16S15.18 8 24 8s16 7.18 16 16-7.18 16-16 16z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-circle-inner-circle">
      <path d="M24 4C12.97 4 4 12.97 4 24s8.97 20 20 20 20-8.97 20-20S35.03 4 24 4zm0 36c-8.82 0-16-7.18-16-16S15.18 8 24 8s16 7.18 16 16-7.18 16-16 16zm6-16c0 3.31-2.69 6-6 6s-6-2.69-6-6 2.69-6 6-6 6 2.69 6 6z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-cancel">
      <path d="M24 4C12.95 4 4 12.95 4 24s8.95 20 20 20 20-8.95 20-20S35.05 4 24 4zm10 27.17L31.17 34 24 26.83 16.83 34 14 31.17 21.17 24 14 16.83 16.83 14 24 21.17 31.17 14 34 16.83 26.83 24 34 31.17z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-replay">
      <path d="M24 10V2L14 12l10 10v-8c6.63 0 12 5.37 12 12s-5.37 12-12 12-12-5.37-12-12H8c0 8.84 7.16 16 16 16s16-7.16 16-16-7.16-16-16-16z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-repeat">
      <path d="M14 14h20v6l8-8-8-8v6H10v12h4v-8zm20 20H14v-6l-8 8 8 8v-6h24V26h-4v8z"></path>
    </symbol>
    <symbol viewBox="0 96 48 48" id="vjs-icon-replay-5">
      <path d="M17.689 98l-8.697 8.696 8.697 8.697 2.486-2.485-4.32-4.319h1.302c4.93 0 9.071 1.722 12.424 5.165 3.352 3.443 5.029 7.638 5.029 12.584h3.55c0-2.958-.553-5.73-1.658-8.313-1.104-2.583-2.622-4.841-4.555-6.774-1.932-1.932-4.19-3.45-6.773-4.555-2.584-1.104-5.355-1.657-8.313-1.657H15.5l4.615-4.615zm-8.08 21.659v13.861h11.357v5.008H9.609V143h12.7c.834 0 1.55-.298 2.146-.894.596-.597.895-1.31.895-2.145v-7.781c0-.835-.299-1.55-.895-2.147a2.929 2.929 0 0 0-2.147-.894h-8.227v-5.096H25.35v-4.384z"></path>
    </symbol>
    <symbol viewBox="0 96 48 48" id="vjs-icon-replay-10">
      <path d="M42.315 125.63c0-4.997-1.694-9.235-5.08-12.713-3.388-3.479-7.571-5.218-12.552-5.218h-1.315l4.363 4.363-2.51 2.51-8.787-8.786L25.221 97l2.45 2.45-4.662 4.663h1.375c2.988 0 5.788.557 8.397 1.673 2.61 1.116 4.892 2.65 6.844 4.602 1.953 1.953 3.487 4.234 4.602 6.844 1.116 2.61 1.674 5.41 1.674 8.398zM8.183 142v-19.657H3.176V117.8h9.643V142zm13.63 0c-1.156 0-2.127-.393-2.912-1.178-.778-.778-1.168-1.746-1.168-2.902v-16.04c0-1.156.393-2.127 1.178-2.912.779-.779 1.746-1.168 2.902-1.168h7.696c1.156 0 2.126.392 2.911 1.177.779.78 1.168 1.747 1.168 2.903v16.04c0 1.156-.392 2.127-1.177 2.912-.779.779-1.746 1.168-2.902 1.168zm.556-4.636h6.583v-15.02H22.37z"></path>
    </symbol>
    <symbol viewBox="0 96 48 48" id="vjs-icon-replay-30">
      <path d="M26.047 97l-8.733 8.732 8.733 8.733 2.496-2.494-4.336-4.338h1.307c4.95 0 9.108 1.73 12.474 5.187 3.367 3.458 5.051 7.668 5.051 12.635h3.565c0-2.97-.556-5.751-1.665-8.346-1.109-2.594-2.633-4.862-4.574-6.802-1.94-1.941-4.208-3.466-6.803-4.575-2.594-1.109-5.375-1.664-8.345-1.664H23.85l4.634-4.634zM2.555 117.531v4.688h10.297v5.25H5.873v4.687h6.979v5.156H2.555V142H13.36c1.061 0 1.95-.395 2.668-1.186.718-.79 1.076-1.772 1.076-2.94v-16.218c0-1.168-.358-2.149-1.076-2.94-.717-.79-1.607-1.185-2.668-1.185zm22.482.14c-1.149 0-2.11.39-2.885 1.165-.78.78-1.172 1.744-1.172 2.893v15.943c0 1.149.388 2.11 1.163 2.885.78.78 1.745 1.172 2.894 1.172h7.649c1.148 0 2.11-.388 2.884-1.163.78-.78 1.17-1.745 1.17-2.894v-15.943c0-1.15-.386-2.111-1.16-2.885-.78-.78-1.746-1.172-2.894-1.172zm.553 4.518h6.545v14.93H25.59z"></path>
    </symbol>
    <symbol viewBox="0 96 48 48" id="vjs-icon-forward-5">
      <path d="M29.508 97l-2.431 2.43 4.625 4.625h-1.364c-2.965 0-5.742.554-8.332 1.66-2.589 1.107-4.851 2.629-6.788 4.566-1.937 1.937-3.458 4.2-4.565 6.788-1.107 2.59-1.66 5.367-1.66 8.331h3.557c0-4.957 1.68-9.16 5.04-12.611 3.36-3.45 7.51-5.177 12.451-5.177h1.304l-4.326 4.33 2.49 2.49 8.715-8.716zm-9.783 21.61v13.89h11.382v5.018H19.725V142h12.727a2.93 2.93 0 0 0 2.15-.896 2.93 2.93 0 0 0 .896-2.15v-7.798c0-.837-.299-1.554-.896-2.152a2.93 2.93 0 0 0-2.15-.896h-8.245V123h11.29v-4.392z"></path>
    </symbol>
    <symbol viewBox="0 96 48 48" id="vjs-icon-forward-10">
      <path d="M23.119 97l-2.386 2.383 4.538 4.538h-1.339c-2.908 0-5.633.543-8.173 1.63-2.54 1.085-4.76 2.577-6.66 4.478-1.9 1.9-3.392 4.12-4.478 6.66-1.085 2.54-1.629 5.264-1.629 8.172h3.49c0-4.863 1.648-8.986 4.944-12.372 3.297-3.385 7.368-5.078 12.216-5.078h1.279l-4.245 4.247 2.443 2.442 8.55-8.55zm-9.52 21.45v4.42h4.871V142h4.513v-23.55zm18.136 0c-1.125 0-2.066.377-2.824 1.135-.764.764-1.148 1.709-1.148 2.834v15.612c0 1.124.38 2.066 1.139 2.824.764.764 1.708 1.145 2.833 1.145h7.489c1.125 0 2.066-.378 2.824-1.136.764-.764 1.145-1.709 1.145-2.833v-15.612c0-1.125-.378-2.067-1.136-2.825-.764-.764-1.708-1.145-2.833-1.145zm.54 4.42h6.408v14.617h-6.407z"></path>
    </symbol>
    <symbol viewBox="0 96 48 48" id="vjs-icon-forward-30">
      <path d="M25.549 97l-2.437 2.434 4.634 4.635H26.38c-2.97 0-5.753.555-8.347 1.664-2.594 1.109-4.861 2.633-6.802 4.574-1.94 1.94-3.465 4.207-4.574 6.802-1.109 2.594-1.664 5.377-1.664 8.347h3.565c0-4.967 1.683-9.178 5.05-12.636 3.366-3.458 7.525-5.187 12.475-5.187h1.307l-4.335 4.338 2.495 2.494 8.732-8.732zm-11.553 20.53v4.689h10.297v5.249h-6.978v4.688h6.978v5.156H13.996V142h10.808c1.06 0 1.948-.395 2.666-1.186.718-.79 1.077-1.771 1.077-2.94v-16.217c0-1.169-.36-2.15-1.077-2.94-.718-.79-1.605-1.186-2.666-1.186zm21.174.168c-1.149 0-2.11.389-2.884 1.163-.78.78-1.172 1.745-1.172 2.894v15.942c0 1.15.388 2.11 1.162 2.885.78.78 1.745 1.17 2.894 1.17h7.649c1.149 0 2.11-.386 2.885-1.16.78-.78 1.17-1.746 1.17-2.895v-15.942c0-1.15-.387-2.11-1.161-2.885-.78-.78-1.745-1.172-2.894-1.172zm.552 4.516h6.542v14.931h-6.542z"></path>
    </symbol>
    <symbol viewBox="0 0 512 512" id="vjs-icon-audio-description">
      <g fill-rule="evenodd"><path d="M227.29 381.351V162.993c50.38-1.017 89.108-3.028 117.631 17.126 27.374 19.342 48.734 56.965 44.89 105.325-4.067 51.155-41.335 94.139-89.776 98.475-24.085 2.155-71.972 0-71.972 0s-.84-1.352-.773-2.568m48.755-54.804c31.43 1.26 53.208-16.633 56.495-45.386 4.403-38.51-21.188-63.552-58.041-60.796v103.612c-.036 1.466.575 2.22 1.546 2.57"></path><path d="M383.78 381.328c13.336 3.71 17.387-11.06 23.215-21.408 12.722-22.571 22.294-51.594 22.445-84.774.221-47.594-18.343-82.517-35.6-106.182h-8.51c-.587 3.874 2.226 7.315 3.865 10.276 13.166 23.762 25.367 56.553 25.54 94.194.2 43.176-14.162 79.278-30.955 107.894"></path><path d="M425.154 381.328c13.336 3.71 17.384-11.061 23.215-21.408 12.721-22.571 22.291-51.594 22.445-84.774.221-47.594-18.343-82.517-35.6-106.182h-8.511c-.586 3.874 2.226 7.315 3.866 10.276 13.166 23.762 25.367 56.553 25.54 94.194.2 43.176-14.162 79.278-30.955 107.894"></path><path d="M466.26 381.328c13.337 3.71 17.385-11.061 23.216-21.408 12.722-22.571 22.292-51.594 22.445-84.774.221-47.594-18.343-82.517-35.6-106.182h-8.51c-.587 3.874 2.225 7.315 3.865 10.276 13.166 23.762 25.367 56.553 25.54 94.194.2 43.176-14.162 79.278-30.955 107.894M4.477 383.005H72.58l18.573-28.484 64.169-.135s.065 19.413.065 28.62h48.756V160.307h-58.816c-5.653 9.537-140.85 222.697-140.85 222.697zm152.667-145.282v71.158l-40.453-.27 40.453-70.888z"></path></g>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-next-item">
      <path d="M12 36l17-12-17-12v24zm20-24v24h4V12h-4z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-previous-item">
      <path d="M12 12h4v24h-4zm7 12l17 12V12z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-shuffle">
      <path d="M21.17 18.34L10.83 8 8 10.83l10.34 10.34 2.83-2.83zM29 8l4.09 4.09L8 37.17 10.83 40l25.09-25.09L40 19V8H29zm.66 18.83l-2.83 2.83 6.26 6.26L29 40h11V29l-4.09 4.09-6.25-6.26z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-cast">
      <path d="M42 6H6c-2.21 0-4 1.79-4 4v6h4v-6h36v28H28v4h14c2.21 0 4-1.79 4-4V10c0-2.21-1.79-4-4-4zM2 36v6h6c0-3.31-2.69-6-6-6zm0-8v4c5.52 0 10 4.48 10 10h4c0-7.73-6.27-14-14-14zm0-8v4c9.94 0 18 8.06 18 18h4c0-12.15-9.85-22-22-22z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-picture-in-picture-enter">
      <path d="M38 22H22v11.99h16V22zm8 16V9.96C46 7.76 44.2 6 42 6H6C3.8 6 2 7.76 2 9.96V38c0 2.2 1.8 4 4 4h36c2.2 0 4-1.8 4-4zm-4 .04H6V9.94h36v28.1z"></path>
    </symbol>
    <symbol viewBox="0 0 22 18" id="vjs-icon-picture-in-picture-exit">
      <path d="M18 4H4v10h14V4zm4 12V1.98C22 .88 21.1 0 20 0H2C.9 0 0 .88 0 1.98V16c0 1.1.9 2 2 2h18c1.1 0 2-.9 2-2zm-2 .02H2V1.97h18v14.05z"></path>
      <path fill="none" d="M-1-3h24v24H-1z"></path>
    </symbol>
    <symbol viewBox="0 0 1792 1792" id="vjs-icon-facebook">
      <path d="M1343 12v264h-157q-86 0-116 36t-30 108v189h293l-39 296h-254v759H734V905H479V609h255V391q0-186 104-288.5T1115 0q147 0 228 12z"></path>
    </symbol>
    <symbol viewBox="0 0 1792 1792" id="vjs-icon-linkedin">
      <path d="M477 625v991H147V625h330zm21-306q1 73-50.5 122T312 490h-2q-82 0-132-49t-50-122q0-74 51.5-122.5T314 148t133 48.5T498 319zm1166 729v568h-329v-530q0-105-40.5-164.5T1168 862q-63 0-105.5 34.5T999 982q-11 30-11 81v553H659q2-399 2-647t-1-296l-1-48h329v144h-2q20-32 41-56t56.5-52 87-43.5T1285 602q171 0 275 113.5t104 332.5z"></path>
    </symbol>
    <symbol viewBox="0 0 1200 1227" id="vjs-icon-twitter">
      <path d="M714.163 519.284L1160.89 0H1055.03L667.137 450.887L357.328 0H0L468.492 681.821L0 1226.37H105.866L515.491 750.218L842.672 1226.37H1200L714.137 519.284H714.163ZM569.165 687.828L521.697 619.934L144.011 79.6944H306.615L611.412 515.685L658.88 583.579L1055.08 1150.3H892.476L569.165 687.854V687.828Z"/>
    </symbol>
    <symbol viewBox="0 0 1792 1792" id="vjs-icon-tumblr">
      <path d="M1328 1329l80 237q-23 35-111 66t-177 32q-104 2-190.5-26T787 1564t-95-106-55.5-120-16.5-118V676H452V461q72-26 129-69.5t91-90 58-102 34-99T779 12q1-5 4.5-8.5T791 0h244v424h333v252h-334v518q0 30 6.5 56t22.5 52.5 49.5 41.5 81.5 14q78-2 134-29z"></path>
    </symbol>
    <symbol viewBox="0 0 1792 1792" id="vjs-icon-pinterest">
      <path d="M1664 896q0 209-103 385.5T1281.5 1561 896 1664q-111 0-218-32 59-93 78-164 9-34 54-211 20 39 73 67.5t114 28.5q121 0 216-68.5t147-188.5 52-270q0-114-59.5-214T1180 449t-255-63q-105 0-196 29t-154.5 77-109 110.5-67 129.5T377 866q0 104 40 183t117 111q30 12 38-20 2-7 8-31t8-30q6-23-11-43-51-61-51-151 0-151 104.5-259.5T904 517q151 0 235.5 82t84.5 213q0 170-68.5 289T980 1220q-61 0-98-43.5T859 1072q8-35 26.5-93.5t30-103T927 800q0-50-27-83t-77-33q-62 0-105 57t-43 142q0 73 25 122l-99 418q-17 70-13 177-206-91-333-281T128 896q0-209 103-385.5T510.5 231 896 128t385.5 103T1561 510.5 1664 896z"></path>
    </symbol>
  </defs>
</svg>`;const Z4=K_?10009:X_?461:8,Xf={codes:{play:415,pause:19,ff:417,rw:412,back:Z4},names:{415:"play",19:"pause",417:"ff",412:"rw",[Z4]:"back"},isEventKey(r,e){return e=e.toLowerCase(),!!(this.names[r.keyCode]&&this.names[r.keyCode]===e)},getEventName(r){if(this.names[r.keyCode])return this.names[r.keyCode];if(this.codes[r.code]){const e=this.codes[r.code];return this.names[e]}return null}},eM=5;class lde extends _o{constructor(e){super(),this.player_=e,this.focusableComponents=[],this.isListening_=!1,this.isPaused_=!1,this.onKeyDown_=this.onKeyDown_.bind(this),this.lastFocusedComponent_=null}start(){this.isListening_||(this.player_.on("keydown",this.onKeyDown_),this.player_.on("modalKeydown",this.onKeyDown_),this.player_.on("loadedmetadata",()=>{this.focus(this.updateFocusableComponents()[0])}),this.player_.on("modalclose",()=>{this.refocusComponent()}),this.player_.on("focusin",this.handlePlayerFocus_.bind(this)),this.player_.on("focusout",this.handlePlayerBlur_.bind(this)),this.isListening_=!0,this.player_.errorDisplay&&this.player_.errorDisplay.on("aftermodalfill",()=>{this.updateFocusableComponents(),this.focusableComponents.length&&(this.focusableComponents.length>1?this.focusableComponents[1].focus():this.focusableComponents[0].focus())}))}stop(){this.player_.off("keydown",this.onKeyDown_),this.isListening_=!1}onKeyDown_(e){const t=e.originalEvent?e.originalEvent:e;if(["ArrowLeft","ArrowRight","ArrowUp","ArrowDown"].includes(t.key)){if(this.isPaused_)return;t.preventDefault();const n=t.key.substring(5).toLowerCase();this.move(n)}else if(Xf.isEventKey(t,"play")||Xf.isEventKey(t,"pause")||Xf.isEventKey(t,"ff")||Xf.isEventKey(t,"rw")){t.preventDefault();const n=Xf.getEventName(t);this.performMediaAction_(n)}else Xf.isEventKey(t,"Back")&&e.target&&typeof e.target.closeable=="function"&&e.target.closeable()&&(t.preventDefault(),e.target.close())}performMediaAction_(e){if(this.player_)switch(e){case"play":this.player_.paused()&&this.player_.play();break;case"pause":this.player_.paused()||this.player_.pause();break;case"ff":this.userSeek_(this.player_.currentTime()+eM);break;case"rw":this.userSeek_(this.player_.currentTime()-eM);break}}userSeek_(e){this.player_.liveTracker&&this.player_.liveTracker.isLive()&&this.player_.liveTracker.nextSeekedFromUser(),this.player_.currentTime(e)}pause(){this.isPaused_=!0}resume(){this.isPaused_=!1}handlePlayerBlur_(e){const t=e.relatedTarget;let n=null;const i=this.getCurrentComponent(e.target);t&&(n=!!t.closest(".video-js"),t.classList.contains("vjs-text-track-settings")&&!this.isPaused_&&this.searchForTrackSelect_()),(!e.currentTarget.contains(e.relatedTarget)&&!n||!t)&&(i&&i.name()==="CloseButton"?this.refocusComponent():(this.pause(),i&&i.el()&&(this.lastFocusedComponent_=i)))}handlePlayerFocus_(){this.getCurrentComponent()&&this.getCurrentComponent().getIsFocusable()&&this.resume()}updateFocusableComponents(){const e=this.player_,t=[];function n(i){for(const s of i)s.hasOwnProperty("el_")&&s.getIsFocusable()&&s.getIsAvailableToBeFocused(s.el())&&t.push(s),s.hasOwnProperty("children_")&&s.children_.length>0&&n(s.children_)}return e.children_.forEach(i=>{if(i.hasOwnProperty("el_"))if(i.getIsFocusable&&i.getIsAvailableToBeFocused&&i.getIsFocusable()&&i.getIsAvailableToBeFocused(i.el())){t.push(i);return}else i.hasOwnProperty("children_")&&i.children_.length>0?n(i.children_):i.hasOwnProperty("items")&&i.items.length>0?n(i.items):this.findSuitableDOMChild(i)&&t.push(i);if(i.name_==="ErrorDisplay"&&i.opened_){const s=i.el_.querySelector(".vjs-errors-ok-button-container");s&&s.querySelectorAll("button").forEach((o,l)=>{t.push({name:()=>"ModalButton"+(l+1),el:()=>o,getPositions:()=>{const u=o.getBoundingClientRect(),c={x:u.x,y:u.y,width:u.width,height:u.height,top:u.top,right:u.right,bottom:u.bottom,left:u.left},h={x:u.left+u.width/2,y:u.top+u.height/2,width:0,height:0,top:u.top+u.height/2,right:u.left+u.width/2,bottom:u.top+u.height/2,left:u.left+u.width/2};return{boundingClientRect:c,center:h}},getIsAvailableToBeFocused:()=>!0,getIsFocusable:u=>!0,focus:()=>o.focus()})})}}),this.focusableComponents=t,this.focusableComponents}findSuitableDOMChild(e){function t(n){if(e.getIsFocusable(n)&&e.getIsAvailableToBeFocused(n))return n;for(let i=0;i<n.children.length;i++){const s=n.children[i],a=t(s);if(a)return a}return null}return e.el()?t(e.el()):null}getCurrentComponent(e){this.updateFocusableComponents();const t=e||document.activeElement;if(this.focusableComponents.length){for(const n of this.focusableComponents)if(n.el()===t)return n}}add(e){const t=[...this.focusableComponents];e.hasOwnProperty("el_")&&e.getIsFocusable()&&e.getIsAvailableToBeFocused(e.el())&&t.push(e),this.focusableComponents=t,this.trigger({type:"focusableComponentsChanged",focusableComponents:this.focusableComponents})}remove(e){for(let t=0;t<this.focusableComponents.length;t++)if(this.focusableComponents[t].name()===e.name()){this.focusableComponents.splice(t,1),this.trigger({type:"focusableComponentsChanged",focusableComponents:this.focusableComponents});return}}clear(){this.focusableComponents.length>0&&(this.focusableComponents=[],this.trigger({type:"focusableComponentsChanged",focusableComponents:this.focusableComponents}))}move(e){const t=this.getCurrentComponent();if(!t)return;const n=t.getPositions(),i=this.focusableComponents.filter(a=>a!==t&&this.isInDirection_(n.boundingClientRect,a.getPositions().boundingClientRect,e)),s=this.findBestCandidate_(n.center,i,e);s?this.focus(s):this.trigger({type:"endOfFocusableComponents",direction:e,focusedComponent:t})}findBestCandidate_(e,t,n){let i=1/0,s=null;for(const a of t){const o=a.getPositions().center,l=this.calculateDistance_(e,o,n);l<i&&(i=l,s=a)}return s}isInDirection_(e,t,n){switch(n){case"right":return t.left>=e.right;case"left":return t.right<=e.left;case"down":return t.top>=e.bottom;case"up":return t.bottom<=e.top;default:return!1}}refocusComponent(){if(this.lastFocusedComponent_){this.player_.userActive()||this.player_.userActive(!0),this.updateFocusableComponents();for(let e=0;e<this.focusableComponents.length;e++)if(this.focusableComponents[e].name()===this.lastFocusedComponent_.name()){this.focus(this.focusableComponents[e]);return}}else this.focus(this.updateFocusableComponents()[0])}focus(e){typeof e=="object"&&(e.getIsAvailableToBeFocused(e.el())?e.focus():this.findSuitableDOMChild(e)&&this.findSuitableDOMChild(e).focus())}calculateDistance_(e,t,n){const i=Math.abs(e.x-t.x),s=Math.abs(e.y-t.y);let a;switch(n){case"right":case"left":a=i+s*100;break;case"up":a=s*2+i*.5;break;case"down":a=s*5+i;break;default:a=i+s}return a}searchForTrackSelect_(){const e=this;for(const t of e.updateFocusableComponents())if(t.constructor.name==="TextTrackSelect"){e.focus(t);break}}}let ude=class extends gt{constructor(e,t,n){const i=Bn({createEl:!1},t);if(super(e,i,n),!t.playerOptions.sources||t.playerOptions.sources.length===0)for(let s=0,a=t.playerOptions.techOrder;s<a.length;s++){const o=di(a[s]);let l=Nn.getTech(o);if(o||(l=gt.getComponent(o)),l&&l.isSupported()){e.loadTech_(o);break}}else e.src(t.playerOptions.sources)}};gt.registerComponent("MediaLoader",ude);let zS=class extends gt{constructor(e,t){super(e,t),this.options_.controlText&&this.controlText(this.options_.controlText),this.handleMouseOver_=n=>this.handleMouseOver(n),this.handleMouseOut_=n=>this.handleMouseOut(n),this.handleClick_=n=>this.handleClick(n),this.handleKeyDown_=n=>this.handleKeyDown(n),this.emitTapEvents(),this.enable()}createEl(e="div",t={},n={}){t=Object.assign({className:this.buildCSSClass(),tabIndex:0},t),e==="button"&&Yr.error(`Creating a ClickableComponent with an HTML element of ${e} is not supported; use a Button instead.`),n=Object.assign({role:"button"},n),this.tabIndex_=t.tabIndex;const i=Ir(e,t,n);return this.player_.options_.experimentalSvgIcons||i.appendChild(Ir("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),this.createControlTextEl(i),i}dispose(){this.controlTextEl_=null,super.dispose()}createControlTextEl(e){return this.controlTextEl_=Ir("span",{className:"vjs-control-text"},{"aria-live":"polite"}),e&&e.appendChild(this.controlTextEl_),this.controlText(this.controlText_,e),this.controlTextEl_}controlText(e,t=this.el()){if(e===void 0)return this.controlText_||"Need Text";const n=this.localize(e);this.controlText_=e,nh(this.controlTextEl_,n),!this.nonIconControl&&!this.player_.options_.noUITitleAttributes&&t.setAttribute("title",n)}buildCSSClass(){return`vjs-control vjs-button ${super.buildCSSClass()}`}enable(){this.enabled_||(this.enabled_=!0,this.removeClass("vjs-disabled"),this.el_.setAttribute("aria-disabled","false"),typeof this.tabIndex_<"u"&&this.el_.setAttribute("tabIndex",this.tabIndex_),this.on(["tap","click"],this.handleClick_),this.on("keydown",this.handleKeyDown_))}disable(){this.enabled_=!1,this.addClass("vjs-disabled"),this.el_.setAttribute("aria-disabled","true"),typeof this.tabIndex_<"u"&&this.el_.removeAttribute("tabIndex"),this.off("mouseover",this.handleMouseOver_),this.off("mouseout",this.handleMouseOut_),this.off(["tap","click"],this.handleClick_),this.off("keydown",this.handleKeyDown_)}handleLanguagechange(){this.controlText(this.controlText_)}handleClick(e){this.options_.clickHandler&&this.options_.clickHandler.call(this,arguments)}handleKeyDown(e){e.key===" "||e.key==="Enter"?(e.preventDefault(),e.stopPropagation(),this.trigger("click")):super.handleKeyDown(e)}};gt.registerComponent("ClickableComponent",zS);let w2=class extends zS{constructor(e,t){super(e,t),this.update(),this.update_=n=>this.update(n),e.on("posterchange",this.update_)}dispose(){this.player().off("posterchange",this.update_),super.dispose()}createEl(){return Ir("div",{className:"vjs-poster"})}crossOrigin(e){if(typeof e>"u")return this.$("img")?this.$("img").crossOrigin:this.player_.tech_&&this.player_.tech_.isReady_?this.player_.crossOrigin():this.player_.options_.crossOrigin||this.player_.options_.crossorigin||null;if(e!==null&&e!=="anonymous"&&e!=="use-credentials"){this.player_.log.warn(`crossOrigin must be null,  "anonymous" or "use-credentials", given "${e}"`);return}this.$("img")&&(this.$("img").crossOrigin=e)}update(e){const t=this.player().poster();this.setSrc(t),t?this.show():this.hide()}setSrc(e){if(!e){this.el_.textContent="";return}this.$("img")||this.el_.appendChild(Ir("picture",{className:"vjs-poster",tabIndex:-1},{},Ir("img",{loading:"lazy",crossOrigin:this.crossOrigin()},{alt:""}))),this.$("img").src=e}handleClick(e){this.player_.controls()&&(this.player_.tech(!0)&&this.player_.tech(!0).focus(),this.player_.paused()?xu(this.player_.play()):this.player_.pause())}};w2.prototype.crossorigin=w2.prototype.crossOrigin;gt.registerComponent("PosterImage",w2);const $o="#222",tM="#ccc",cde={monospace:"monospace",sansSerif:"sans-serif",serif:"serif",monospaceSansSerif:'"Andale Mono", "Lucida Console", monospace',monospaceSerif:'"Courier New", monospace',proportionalSansSerif:"sans-serif",proportionalSerif:"serif",casual:'"Comic Sans MS", Impact, fantasy',script:'"Monotype Corsiva", cursive',smallcaps:'"Andale Mono", "Lucida Console", monospace, sans-serif'};function DC(r,e){let t;if(r.length===4)t=r[1]+r[1]+r[2]+r[2]+r[3]+r[3];else if(r.length===7)t=r.slice(1);else throw new Error("Invalid color code provided, "+r+"; must be formatted as e.g. #f0e or #f604e2.");return"rgba("+parseInt(t.slice(0,2),16)+","+parseInt(t.slice(2,4),16)+","+parseInt(t.slice(4,6),16)+","+e+")"}function du(r,e,t){try{r.style[e]=t}catch{return}}function rM(r){return r?`${r}px`:""}let dde=class extends gt{constructor(e,t,n){super(e,t,n);const i=a=>this.updateDisplay(a),s=a=>{this.updateDisplayOverlay(),this.updateDisplay(a)};e.on("loadstart",a=>this.toggleDisplay(a)),e.on("texttrackchange",i),e.on("loadedmetadata",a=>{this.updateDisplayOverlay(),this.preselectTrack(a)}),e.ready(zn(this,function(){if(e.tech_&&e.tech_.featuresNativeTextTracks){this.hide();return}e.on("fullscreenchange",s),e.on("playerresize",s);const a=X.screen.orientation||X,o=X.screen.orientation?"change":"orientationchange";a.addEventListener(o,s),e.on("dispose",()=>a.removeEventListener(o,s));const l=this.options_.playerOptions.tracks||[];for(let u=0;u<l.length;u++)this.player_.addRemoteTextTrack(l[u],!0);this.preselectTrack()}))}preselectTrack(){const e={captions:1,subtitles:1},t=this.player_.textTracks(),n=this.player_.cache_.selectedLanguage;let i,s,a;for(let o=0;o<t.length;o++){const l=t[o];n&&n.enabled&&n.language&&n.language===l.language&&l.kind in e?l.kind===n.kind?a=l:a||(a=l):n&&!n.enabled?(a=null,i=null,s=null):l.default&&(l.kind==="descriptions"&&!i?i=l:l.kind in e&&!s&&(s=l))}a?a.mode="showing":s?s.mode="showing":i&&(i.mode="showing")}toggleDisplay(){this.player_.tech_&&this.player_.tech_.featuresNativeTextTracks?this.hide():this.show()}createEl(){return super.createEl("div",{className:"vjs-text-track-display"},{translate:"yes","aria-live":"off","aria-atomic":"true"})}clearDisplay(){typeof X.WebVTT=="function"&&X.WebVTT.processCues(X,[],this.el_)}updateDisplay(){const e=this.player_.textTracks(),t=this.options_.allowMultipleShowingTracks;if(this.clearDisplay(),t){const a=[];for(let o=0;o<e.length;++o){const l=e[o];l.mode==="showing"&&a.push(l)}this.updateForTrack(a);return}let n=null,i=null,s=e.length;for(;s--;){const a=e[s];a.mode==="showing"&&(a.kind==="descriptions"?n=a:i=a)}if(i?(this.getAttribute("aria-live")!=="off"&&this.setAttribute("aria-live","off"),this.updateForTrack(i)):n&&(this.getAttribute("aria-live")!=="assertive"&&this.setAttribute("aria-live","assertive"),this.updateForTrack(n)),!X.CSS.supports("inset","10px")){const a=this.el_,o=a.querySelectorAll(".vjs-text-track-cue"),l=this.player_.controlBar.el_.getBoundingClientRect().height,u=this.player_.el_.getBoundingClientRect().height;a.style="",du(a,"position","relative"),du(a,"height",u-l+"px"),du(a,"top","unset"),Y_?du(a,"bottom",u+"px"):du(a,"bottom","0px"),o.length>0&&o.forEach(c=>{if(c.style.inset){const h=c.style.inset.split(" ");h.length===3&&Object.assign(c.style,{top:h[0],right:h[1],bottom:h[2],left:"unset"})}})}}updateDisplayOverlay(){if(!this.player_.videoHeight()||!X.CSS.supports("inset-inline: 10px"))return;const e=this.player_.currentWidth(),t=this.player_.currentHeight(),n=e/t,i=this.player_.videoWidth()/this.player_.videoHeight();let s=0,a=0;Math.abs(n-i)>.1&&(n>i?s=Math.round((e-t*i)/2):a=Math.round((t-e/i)/2)),du(this.el_,"insetInline",rM(s)),du(this.el_,"insetBlock",rM(a))}updateDisplayState(e){const t=this.player_.textTrackSettings.getValues(),n=e.activeCues;let i=n.length;for(;i--;){const s=n[i];if(!s)continue;const a=s.displayState;if(t.color&&(a.firstChild.style.color=t.color),t.textOpacity&&du(a.firstChild,"color",DC(t.color||"#fff",t.textOpacity)),t.backgroundColor&&(a.firstChild.style.backgroundColor=t.backgroundColor),t.backgroundOpacity&&du(a.firstChild,"backgroundColor",DC(t.backgroundColor||"#000",t.backgroundOpacity)),t.windowColor&&(t.windowOpacity?du(a,"backgroundColor",DC(t.windowColor,t.windowOpacity)):a.style.backgroundColor=t.windowColor),t.edgeStyle&&(t.edgeStyle==="dropshadow"?a.firstChild.style.textShadow=`2px 2px 3px ${$o}, 2px 2px 4px ${$o}, 2px 2px 5px ${$o}`:t.edgeStyle==="raised"?a.firstChild.style.textShadow=`1px 1px ${$o}, 2px 2px ${$o}, 3px 3px ${$o}`:t.edgeStyle==="depressed"?a.firstChild.style.textShadow=`1px 1px ${tM}, 0 1px ${tM}, -1px -1px ${$o}, 0 -1px ${$o}`:t.edgeStyle==="uniform"&&(a.firstChild.style.textShadow=`0 0 4px ${$o}, 0 0 4px ${$o}, 0 0 4px ${$o}, 0 0 4px ${$o}`)),t.fontPercent&&t.fontPercent!==1){const o=X.parseFloat(a.style.fontSize);a.style.fontSize=o*t.fontPercent+"px",a.style.height="auto",a.style.top="auto"}t.fontFamily&&t.fontFamily!=="default"&&(t.fontFamily==="small-caps"?a.firstChild.style.fontVariant="small-caps":a.firstChild.style.fontFamily=cde[t.fontFamily])}}updateForTrack(e){if(Array.isArray(e)||(e=[e]),typeof X.WebVTT!="function"||e.every(n=>!n.activeCues))return;const t=[];for(let n=0;n<e.length;++n){const i=e[n];for(let s=0;s<i.activeCues.length;++s)t.push(i.activeCues[s])}X.WebVTT.processCues(X,t,this.el_);for(let n=0;n<e.length;++n){const i=e[n];for(let s=0;s<i.activeCues.length;++s){const a=i.activeCues[s].displayState;Jh(a,"vjs-text-track-cue","vjs-text-track-cue-"+(i.language?i.language:n)),i.language&&tm(a,"lang",i.language)}this.player_.textTrackSettings&&this.updateDisplayState(i)}}};gt.registerComponent("TextTrackDisplay",dde);let hde=class extends gt{createEl(){const e=this.player_.isAudio(),t=this.localize(e?"Audio Player":"Video Player"),n=Ir("span",{className:"vjs-control-text",textContent:this.localize("{1} is loading.",[t])}),i=super.createEl("div",{className:"vjs-loading-spinner",dir:"ltr"});return i.appendChild(n),i}handleLanguagechange(){this.$(".vjs-control-text").textContent=this.localize("{1} is loading.",[this.player_.isAudio()?"Audio Player":"Video Player"])}};gt.registerComponent("LoadingSpinner",hde);let js=class extends zS{createEl(e,t={},n={}){e="button",t=Object.assign({className:this.buildCSSClass()},t),n=Object.assign({type:"button"},n);const i=Ir(e,t,n);return this.player_.options_.experimentalSvgIcons||i.appendChild(Ir("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),this.createControlTextEl(i),i}addChild(e,t={}){const n=this.constructor.name;return Yr.warn(`Adding an actionable (user controllable) child to a Button (${n}) is not supported; use a ClickableComponent instead.`),gt.prototype.addChild.call(this,e,t)}enable(){super.enable(),this.el_.removeAttribute("disabled")}disable(){super.disable(),this.el_.setAttribute("disabled","disabled")}handleKeyDown(e){if(e.key===" "||e.key==="Enter"){e.stopPropagation();return}super.handleKeyDown(e)}};gt.registerComponent("Button",js);let L6=class extends js{constructor(e,t){super(e,t),this.mouseused_=!1,this.setIcon("play"),this.on("mousedown",n=>this.handleMouseDown(n))}buildCSSClass(){return"vjs-big-play-button"}handleClick(e){const t=this.player_.play();if(this.mouseused_&&"clientX"in e&&"clientY"in e){xu(t),this.player_.tech(!0)&&this.player_.tech(!0).focus();return}const n=this.player_.getChild("controlBar"),i=n&&n.getChild("playToggle");if(!i){this.player_.tech(!0).focus();return}const s=()=>i.focus();ag(t)?t.then(s,()=>{}):this.setTimeout(s,1)}handleKeyDown(e){this.mouseused_=!1,super.handleKeyDown(e)}handleMouseDown(e){this.mouseused_=!0}};L6.prototype.controlText_="Play Video";gt.registerComponent("BigPlayButton",L6);let fde=class extends js{constructor(e,t){super(e,t),this.setIcon("cancel"),this.controlText(t&&t.controlText||this.localize("Close"))}buildCSSClass(){return`vjs-close-button ${super.buildCSSClass()}`}handleClick(e){this.trigger({type:"close",bubbles:!1})}handleKeyDown(e){e.key==="Escape"?(e.preventDefault(),e.stopPropagation(),this.trigger("click")):super.handleKeyDown(e)}};gt.registerComponent("CloseButton",fde);let O6=class extends js{constructor(e,t={}){super(e,t),t.replay=t.replay===void 0||t.replay,this.setIcon("play"),this.on(e,"play",n=>this.handlePlay(n)),this.on(e,"pause",n=>this.handlePause(n)),t.replay&&this.on(e,"ended",n=>this.handleEnded(n))}buildCSSClass(){return`vjs-play-control ${super.buildCSSClass()}`}handleClick(e){this.player_.paused()?xu(this.player_.play()):this.player_.pause()}handleSeeked(e){this.removeClass("vjs-ended"),this.player_.paused()?this.handlePause(e):this.handlePlay(e)}handlePlay(e){this.removeClass("vjs-ended","vjs-paused"),this.addClass("vjs-playing"),this.setIcon("pause"),this.controlText("Pause")}handlePause(e){this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.setIcon("play"),this.controlText("Play")}handleEnded(e){this.removeClass("vjs-playing"),this.addClass("vjs-ended"),this.setIcon("replay"),this.controlText("Replay"),this.one(this.player_,"seeked",t=>this.handleSeeked(t))}};O6.prototype.controlText_="Play";gt.registerComponent("PlayToggle",O6);let Im=class extends gt{constructor(e,t){super(e,t),this.on(e,["timeupdate","ended","seeking"],n=>this.update(n)),this.updateTextNode_()}createEl(){const e=this.buildCSSClass(),t=super.createEl("div",{className:`${e} vjs-time-control vjs-control`}),n=Ir("span",{className:"vjs-control-text",textContent:`${this.localize(this.labelText_)}`},{role:"presentation"});return t.appendChild(n),this.contentEl_=Ir("span",{className:`${e}-display`},{role:"presentation"}),t.appendChild(this.contentEl_),t}dispose(){this.contentEl_=null,this.textNode_=null,super.dispose()}update(e){!this.player_.options_.enableSmoothSeeking&&e.type==="seeking"||this.updateContent(e)}updateTextNode_(e=0){e=gf(e),this.formattedTime_!==e&&(this.formattedTime_=e,this.requestNamedAnimationFrame("TimeDisplay#updateTextNode_",()=>{if(!this.contentEl_)return;let t=this.textNode_;t&&this.contentEl_.firstChild!==t&&(t=null,Yr.warn("TimeDisplay#updateTextnode_: Prevented replacement of text node element since it was no longer a child of this node. Appending a new node instead.")),this.textNode_=Be.createTextNode(this.formattedTime_),this.textNode_&&(t?this.contentEl_.replaceChild(this.textNode_,t):this.contentEl_.appendChild(this.textNode_))}))}updateContent(e){}};Im.prototype.labelText_="Time";Im.prototype.controlText_="Time";gt.registerComponent("TimeDisplay",Im);let rA=class extends Im{buildCSSClass(){return"vjs-current-time"}updateContent(e){let t;this.player_.ended()?t=this.player_.duration():t=this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime(),this.updateTextNode_(t)}};rA.prototype.labelText_="Current Time";rA.prototype.controlText_="Current Time";gt.registerComponent("CurrentTimeDisplay",rA);let nA=class extends Im{constructor(e,t){super(e,t);const n=i=>this.updateContent(i);this.on(e,"durationchange",n),this.on(e,"loadstart",n),this.on(e,"loadedmetadata",n)}buildCSSClass(){return"vjs-duration"}updateContent(e){const t=this.player_.duration();this.updateTextNode_(t)}};nA.prototype.labelText_="Duration";nA.prototype.controlText_="Duration";gt.registerComponent("DurationDisplay",nA);let pde=class extends gt{createEl(){const e=super.createEl("div",{className:"vjs-time-control vjs-time-divider"},{"aria-hidden":!0}),t=super.createEl("div"),n=super.createEl("span",{textContent:"/"});return t.appendChild(n),e.appendChild(t),e}};gt.registerComponent("TimeDivider",pde);let iA=class extends Im{constructor(e,t){super(e,t),this.on(e,"durationchange",n=>this.updateContent(n))}buildCSSClass(){return"vjs-remaining-time"}createEl(){const e=super.createEl();return this.options_.displayNegative!==!1&&e.insertBefore(Ir("span",{},{"aria-hidden":!0},"-"),this.contentEl_),e}updateContent(e){if(typeof this.player_.duration()!="number")return;let t;this.player_.ended()?t=0:this.player_.remainingTimeDisplay?t=this.player_.remainingTimeDisplay():t=this.player_.remainingTime(),this.updateTextNode_(t)}};iA.prototype.labelText_="Remaining Time";iA.prototype.controlText_="Remaining Time";gt.registerComponent("RemainingTimeDisplay",iA);let mde=class extends gt{constructor(e,t){super(e,t),this.updateShowing(),this.on(this.player(),"durationchange",n=>this.updateShowing(n))}createEl(){const e=super.createEl("div",{className:"vjs-live-control vjs-control"});return this.contentEl_=Ir("div",{className:"vjs-live-display"},{"aria-live":"off"}),this.contentEl_.appendChild(Ir("span",{className:"vjs-control-text",textContent:`${this.localize("Stream Type")}`})),this.contentEl_.appendChild(Be.createTextNode(this.localize("LIVE"))),e.appendChild(this.contentEl_),e}dispose(){this.contentEl_=null,super.dispose()}updateShowing(e){this.player().duration()===1/0?this.show():this.hide()}};gt.registerComponent("LiveDisplay",mde);let M6=class extends js{constructor(e,t){super(e,t),this.updateLiveEdgeStatus(),this.player_.liveTracker&&(this.updateLiveEdgeStatusHandler_=n=>this.updateLiveEdgeStatus(n),this.on(this.player_.liveTracker,"liveedgechange",this.updateLiveEdgeStatusHandler_))}createEl(){const e=super.createEl("button",{className:"vjs-seek-to-live-control vjs-control"});return this.setIcon("circle",e),this.textEl_=Ir("span",{className:"vjs-seek-to-live-text",textContent:this.localize("LIVE")},{"aria-hidden":"true"}),e.appendChild(this.textEl_),e}updateLiveEdgeStatus(){!this.player_.liveTracker||this.player_.liveTracker.atLiveEdge()?(this.setAttribute("aria-disabled",!0),this.addClass("vjs-at-live-edge"),this.controlText("Seek to live, currently playing live")):(this.setAttribute("aria-disabled",!1),this.removeClass("vjs-at-live-edge"),this.controlText("Seek to live, currently behind live"))}handleClick(){this.player_.liveTracker.seekToLiveEdge()}dispose(){this.player_.liveTracker&&this.off(this.player_.liveTracker,"liveedgechange",this.updateLiveEdgeStatusHandler_),this.textEl_=null,super.dispose()}};M6.prototype.controlText_="Seek to live, currently playing live";gt.registerComponent("SeekToLive",M6);function yv(r,e,t){return r=Number(r),Math.min(t,Math.max(e,isNaN(r)?e:r))}var gde=Object.freeze({__proto__:null,clamp:yv});let sA=class extends gt{constructor(e,t){super(e,t),this.handleMouseDown_=n=>this.handleMouseDown(n),this.handleMouseUp_=n=>this.handleMouseUp(n),this.handleKeyDown_=n=>this.handleKeyDown(n),this.handleClick_=n=>this.handleClick(n),this.handleMouseMove_=n=>this.handleMouseMove(n),this.update_=n=>this.update(n),this.bar=this.getChild(this.options_.barName),this.vertical(!!this.options_.vertical),this.enable()}enabled(){return this.enabled_}enable(){this.enabled()||(this.on("mousedown",this.handleMouseDown_),this.on("touchstart",this.handleMouseDown_),this.on("keydown",this.handleKeyDown_),this.on("click",this.handleClick_),this.on(this.player_,"controlsvisible",this.update),this.playerEvent&&this.on(this.player_,this.playerEvent,this.update),this.removeClass("disabled"),this.setAttribute("tabindex",0),this.enabled_=!0)}disable(){if(!this.enabled())return;const e=this.bar.el_.ownerDocument;this.off("mousedown",this.handleMouseDown_),this.off("touchstart",this.handleMouseDown_),this.off("keydown",this.handleKeyDown_),this.off("click",this.handleClick_),this.off(this.player_,"controlsvisible",this.update_),this.off(e,"mousemove",this.handleMouseMove_),this.off(e,"mouseup",this.handleMouseUp_),this.off(e,"touchmove",this.handleMouseMove_),this.off(e,"touchend",this.handleMouseUp_),this.removeAttribute("tabindex"),this.addClass("disabled"),this.playerEvent&&this.off(this.player_,this.playerEvent,this.update),this.enabled_=!1}createEl(e,t={},n={}){return t.className=t.className+" vjs-slider",t=Object.assign({tabIndex:0},t),n=Object.assign({role:"slider","aria-valuenow":0,"aria-valuemin":0,"aria-valuemax":100},n),super.createEl(e,t,n)}handleMouseDown(e){const t=this.bar.el_.ownerDocument;e.type==="mousedown"&&e.preventDefault(),e.type==="touchstart"&&!ju&&e.preventDefault(),o6(),this.addClass("vjs-sliding"),this.trigger("slideractive"),this.on(t,"mousemove",this.handleMouseMove_),this.on(t,"mouseup",this.handleMouseUp_),this.on(t,"touchmove",this.handleMouseMove_),this.on(t,"touchend",this.handleMouseUp_),this.handleMouseMove(e,!0)}handleMouseMove(e){}handleMouseUp(e){const t=this.bar.el_.ownerDocument;l6(),this.removeClass("vjs-sliding"),this.trigger("sliderinactive"),this.off(t,"mousemove",this.handleMouseMove_),this.off(t,"mouseup",this.handleMouseUp_),this.off(t,"touchmove",this.handleMouseMove_),this.off(t,"touchend",this.handleMouseUp_),this.update()}update(){if(!this.el_||!this.bar)return;const e=this.getProgress();return e===this.progress_||(this.progress_=e,this.requestNamedAnimationFrame("Slider#update",()=>{const t=this.vertical()?"height":"width";this.bar.el().style[t]=(e*100).toFixed(2)+"%"})),e}getProgress(){return Number(yv(this.getPercent(),0,1).toFixed(4))}calculateDistance(e){const t=FS(this.el_,e);return this.vertical()?t.y:t.x}handleKeyDown(e){const t=this.options_.playerOptions.spatialNavigation,n=t&&t.enabled,i=t&&t.horizontalSeek;n?i&&e.key==="ArrowLeft"||!i&&e.key==="ArrowDown"?(e.preventDefault(),e.stopPropagation(),this.stepBack()):i&&e.key==="ArrowRight"||!i&&e.key==="ArrowUp"?(e.preventDefault(),e.stopPropagation(),this.stepForward()):super.handleKeyDown(e):e.key==="ArrowLeft"||e.key==="ArrowDown"?(e.preventDefault(),e.stopPropagation(),this.stepBack()):e.key==="ArrowUp"||e.key==="ArrowRight"?(e.preventDefault(),e.stopPropagation(),this.stepForward()):super.handleKeyDown(e)}handleClick(e){e.stopPropagation(),e.preventDefault()}vertical(e){if(e===void 0)return this.vertical_||!1;this.vertical_=!!e,this.vertical_?this.addClass("vjs-slider-vertical"):this.addClass("vjs-slider-horizontal")}};gt.registerComponent("Slider",sA);const IC=(r,e)=>yv(r/e*100,0,100).toFixed(2)+"%";let vde=class extends gt{constructor(e,t){super(e,t),this.partEls_=[],this.on(e,"progress",n=>this.update(n))}createEl(){const e=super.createEl("div",{className:"vjs-load-progress"}),t=Ir("span",{className:"vjs-control-text"}),n=Ir("span",{textContent:this.localize("Loaded")}),i=Be.createTextNode(": ");return this.percentageEl_=Ir("span",{className:"vjs-control-text-loaded-percentage",textContent:"0%"}),e.appendChild(t),t.appendChild(n),t.appendChild(i),t.appendChild(this.percentageEl_),e}dispose(){this.partEls_=null,this.percentageEl_=null,super.dispose()}update(e){this.requestNamedAnimationFrame("LoadProgressBar#update",()=>{const t=this.player_.liveTracker,n=this.player_.buffered(),i=t&&t.isLive()?t.seekableEnd():this.player_.duration(),s=this.player_.bufferedEnd(),a=this.partEls_,o=IC(s,i);this.percent_!==o&&(this.el_.style.width=o,nh(this.percentageEl_,o),this.percent_=o);for(let l=0;l<n.length;l++){const u=n.start(l),c=n.end(l);let h=a[l];h||(h=this.el_.appendChild(Ir()),a[l]=h),!(h.dataset.start===u&&h.dataset.end===c)&&(h.dataset.start=u,h.dataset.end=c,h.style.left=IC(u,s),h.style.width=IC(c-u,s))}for(let l=a.length;l>n.length;l--)this.el_.removeChild(a[l-1]);a.length=n.length})}};gt.registerComponent("LoadProgressBar",vde);let yde=class extends gt{constructor(e,t){super(e,t),this.update=zu(zn(this,this.update),sl)}createEl(){return super.createEl("div",{className:"vjs-time-tooltip"},{"aria-hidden":"true"})}update(e,t,n){const i=Fg(this.el_),s=rm(this.player_.el()),a=e.width*t;if(!s||!i)return;let o=e.left-s.left+a,l=e.width-a+(s.right-e.right);l||(l=e.width-a,o=a);let u=i.width/2;o<u?u+=u-o:l<u&&(u=l),u<0?u=0:u>i.width&&(u=i.width),u=Math.round(u),this.el_.style.right=`-${u}px`,this.write(n)}write(e){nh(this.el_,e)}updateTime(e,t,n,i){this.requestNamedAnimationFrame("TimeTooltip#updateTime",()=>{let s;const a=this.player_.duration();if(this.player_.liveTracker&&this.player_.liveTracker.isLive()){const o=this.player_.liveTracker.liveWindow(),l=o-t*o;s=(l<1?"":"-")+gf(l,o)}else s=gf(n,a);this.update(e,t,s),i&&i()})}};gt.registerComponent("TimeTooltip",yde);let aA=class extends gt{constructor(e,t){super(e,t),this.setIcon("circle"),this.update=zu(zn(this,this.update),sl)}createEl(){return super.createEl("div",{className:"vjs-play-progress vjs-slider-bar"},{"aria-hidden":"true"})}update(e,t){const n=this.getChild("timeTooltip");if(!n)return;const i=this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime();n.updateTime(e,t,i)}};aA.prototype.options_={children:[]};!ua&&!$u&&aA.prototype.options_.children.push("timeTooltip");gt.registerComponent("PlayProgressBar",aA);let F6=class extends gt{constructor(e,t){super(e,t),this.update=zu(zn(this,this.update),sl)}createEl(){return super.createEl("div",{className:"vjs-mouse-display"})}update(e,t){const n=t*this.player_.duration();this.getChild("timeTooltip").updateTime(e,t,n,()=>{this.el_.style.left=`${e.width*t}px`})}};F6.prototype.options_={children:["timeTooltip"]};gt.registerComponent("MouseTimeDisplay",F6);const zy=5,nM=12;let oA=class extends sA{constructor(e,t){super(e,t),this.setEventHandlers_()}setEventHandlers_(){this.update_=zn(this,this.update),this.update=zu(this.update_,sl),this.on(this.player_,["durationchange","timeupdate"],this.update),this.on(this.player_,["ended"],this.update_),this.player_.liveTracker&&this.on(this.player_.liveTracker,"liveedgechange",this.update),this.updateInterval=null,this.enableIntervalHandler_=e=>this.enableInterval_(e),this.disableIntervalHandler_=e=>this.disableInterval_(e),this.on(this.player_,["playing"],this.enableIntervalHandler_),this.on(this.player_,["ended","pause","waiting"],this.disableIntervalHandler_),"hidden"in Be&&"visibilityState"in Be&&this.on(Be,"visibilitychange",this.toggleVisibility_)}toggleVisibility_(e){Be.visibilityState==="hidden"?(this.cancelNamedAnimationFrame("SeekBar#update"),this.cancelNamedAnimationFrame("Slider#update"),this.disableInterval_(e)):(!this.player_.ended()&&!this.player_.paused()&&this.enableInterval_(),this.update())}enableInterval_(){this.updateInterval||(this.updateInterval=this.setInterval(this.update,sl))}disableInterval_(e){this.player_.liveTracker&&this.player_.liveTracker.isLive()&&e&&e.type!=="ended"||this.updateInterval&&(this.clearInterval(this.updateInterval),this.updateInterval=null)}createEl(){return super.createEl("div",{className:"vjs-progress-holder"},{"aria-label":this.localize("Progress Bar")})}update(e){if(Be.visibilityState==="hidden")return;const t=super.update();return this.requestNamedAnimationFrame("SeekBar#update",()=>{const n=this.player_.ended()?this.player_.duration():this.getCurrentTime_(),i=this.player_.liveTracker;let s=this.player_.duration();i&&i.isLive()&&(s=this.player_.liveTracker.liveCurrentTime()),this.percent_!==t&&(this.el_.setAttribute("aria-valuenow",(t*100).toFixed(2)),this.percent_=t),(this.currentTime_!==n||this.duration_!==s)&&(this.el_.setAttribute("aria-valuetext",this.localize("progress bar timing: currentTime={1} duration={2}",[gf(n,s),gf(s,s)],"{1} of {2}")),this.currentTime_=n,this.duration_=s),this.bar&&this.bar.update(rm(this.el()),this.getProgress())}),t}userSeek_(e){this.player_.liveTracker&&this.player_.liveTracker.isLive()&&this.player_.liveTracker.nextSeekedFromUser(),this.player_.currentTime(e)}getCurrentTime_(){return this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime()}getPercent(){const e=this.getCurrentTime_();let t;const n=this.player_.liveTracker;return n&&n.isLive()?(t=(e-n.seekableStart())/n.liveWindow(),n.atLiveEdge()&&(t=1)):t=e/this.player_.duration(),t}handleMouseDown(e){Bg(e)&&(e.stopPropagation(),this.videoWasPlaying=!this.player_.paused(),this.player_.pause(),super.handleMouseDown(e))}handleMouseMove(e,t=!1){if(!Bg(e)||isNaN(this.player_.duration()))return;!t&&!this.player_.scrubbing()&&this.player_.scrubbing(!0);let n;const i=this.calculateDistance(e),s=this.player_.liveTracker;if(!s||!s.isLive())n=i*this.player_.duration(),n===this.player_.duration()&&(n=n-.1);else{if(i>=.99){s.seekToLiveEdge();return}const a=s.seekableStart(),o=s.liveCurrentTime();if(n=a+i*s.liveWindow(),n>=o&&(n=o),n<=a&&(n=a+.1),n===1/0)return}this.userSeek_(n),this.player_.options_.enableSmoothSeeking&&this.update()}enable(){super.enable();const e=this.getChild("mouseTimeDisplay");e&&e.show()}disable(){super.disable();const e=this.getChild("mouseTimeDisplay");e&&e.hide()}handleMouseUp(e){super.handleMouseUp(e),e&&e.stopPropagation(),this.player_.scrubbing(!1),this.player_.trigger({type:"timeupdate",target:this,manuallyTriggered:!0}),this.videoWasPlaying?xu(this.player_.play()):this.update_()}stepForward(){this.userSeek_(this.player_.currentTime()+zy)}stepBack(){this.userSeek_(this.player_.currentTime()-zy)}handleAction(e){this.player_.paused()?this.player_.play():this.player_.pause()}handleKeyDown(e){const t=this.player_.liveTracker;if(e.key===" "||e.key==="Enter")e.preventDefault(),e.stopPropagation(),this.handleAction(e);else if(e.key==="Home")e.preventDefault(),e.stopPropagation(),this.userSeek_(0);else if(e.key==="End")e.preventDefault(),e.stopPropagation(),t&&t.isLive()?this.userSeek_(t.liveCurrentTime()):this.userSeek_(this.player_.duration());else if(/^[0-9]$/.test(e.key)){e.preventDefault(),e.stopPropagation();const n=parseInt(e.key,10)*.1;t&&t.isLive()?this.userSeek_(t.seekableStart()+t.liveWindow()*n):this.userSeek_(this.player_.duration()*n)}else e.key==="PageDown"?(e.preventDefault(),e.stopPropagation(),this.userSeek_(this.player_.currentTime()-zy*nM)):e.key==="PageUp"?(e.preventDefault(),e.stopPropagation(),this.userSeek_(this.player_.currentTime()+zy*nM)):super.handleKeyDown(e)}dispose(){this.disableInterval_(),this.off(this.player_,["durationchange","timeupdate"],this.update),this.off(this.player_,["ended"],this.update_),this.player_.liveTracker&&this.off(this.player_.liveTracker,"liveedgechange",this.update),this.off(this.player_,["playing"],this.enableIntervalHandler_),this.off(this.player_,["ended","pause","waiting"],this.disableIntervalHandler_),"hidden"in Be&&"visibilityState"in Be&&this.off(Be,"visibilitychange",this.toggleVisibility_),super.dispose()}};oA.prototype.options_={children:["loadProgressBar","playProgressBar"],barName:"playProgressBar"};!ua&&!$u&&oA.prototype.options_.children.splice(1,0,"mouseTimeDisplay");gt.registerComponent("SeekBar",oA);let B6=class extends gt{constructor(e,t){super(e,t),this.handleMouseMove=zu(zn(this,this.handleMouseMove),sl),this.throttledHandleMouseSeek=zu(zn(this,this.handleMouseSeek),sl),this.handleMouseUpHandler_=n=>this.handleMouseUp(n),this.handleMouseDownHandler_=n=>this.handleMouseDown(n),this.enable()}createEl(){return super.createEl("div",{className:"vjs-progress-control vjs-control"})}handleMouseMove(e){const t=this.getChild("seekBar");if(!t)return;const n=t.getChild("playProgressBar"),i=t.getChild("mouseTimeDisplay");if(!n&&!i)return;const s=t.el(),a=Fg(s);let o=FS(s,e).x;o=yv(o,0,1),i&&i.update(a,o),n&&n.update(a,t.getProgress())}handleMouseSeek(e){const t=this.getChild("seekBar");t&&t.handleMouseMove(e)}enabled(){return this.enabled_}disable(){if(this.children().forEach(e=>e.disable&&e.disable()),!!this.enabled()&&(this.off(["mousedown","touchstart"],this.handleMouseDownHandler_),this.off(this.el_,"mousemove",this.handleMouseMove),this.removeListenersAddedOnMousedownAndTouchstart(),this.addClass("disabled"),this.enabled_=!1,this.player_.scrubbing())){const e=this.getChild("seekBar");this.player_.scrubbing(!1),e.videoWasPlaying&&xu(this.player_.play())}}enable(){this.children().forEach(e=>e.enable&&e.enable()),!this.enabled()&&(this.on(["mousedown","touchstart"],this.handleMouseDownHandler_),this.on(this.el_,"mousemove",this.handleMouseMove),this.removeClass("disabled"),this.enabled_=!0)}removeListenersAddedOnMousedownAndTouchstart(){const e=this.el_.ownerDocument;this.off(e,"mousemove",this.throttledHandleMouseSeek),this.off(e,"touchmove",this.throttledHandleMouseSeek),this.off(e,"mouseup",this.handleMouseUpHandler_),this.off(e,"touchend",this.handleMouseUpHandler_)}handleMouseDown(e){const t=this.el_.ownerDocument,n=this.getChild("seekBar");n&&n.handleMouseDown(e),this.on(t,"mousemove",this.throttledHandleMouseSeek),this.on(t,"touchmove",this.throttledHandleMouseSeek),this.on(t,"mouseup",this.handleMouseUpHandler_),this.on(t,"touchend",this.handleMouseUpHandler_)}handleMouseUp(e){const t=this.getChild("seekBar");t&&t.handleMouseUp(e),this.removeListenersAddedOnMousedownAndTouchstart()}};B6.prototype.options_={children:["seekBar"]};gt.registerComponent("ProgressControl",B6);let N6=class extends js{constructor(e,t){super(e,t),this.setIcon("picture-in-picture-enter"),this.on(e,["enterpictureinpicture","leavepictureinpicture"],n=>this.handlePictureInPictureChange(n)),this.on(e,["disablepictureinpicturechanged","loadedmetadata"],n=>this.handlePictureInPictureEnabledChange(n)),this.on(e,["loadedmetadata","audioonlymodechange","audiopostermodechange"],()=>this.handlePictureInPictureAudioModeChange()),this.disable()}buildCSSClass(){return`vjs-picture-in-picture-control vjs-hidden ${super.buildCSSClass()}`}handlePictureInPictureAudioModeChange(){if(!(this.player_.currentType().substring(0,5)==="audio"||this.player_.audioPosterMode()||this.player_.audioOnlyMode())){this.show();return}this.player_.isInPictureInPicture()&&this.player_.exitPictureInPicture(),this.hide()}handlePictureInPictureEnabledChange(){Be.pictureInPictureEnabled&&this.player_.disablePictureInPicture()===!1||this.player_.options_.enableDocumentPictureInPicture&&"documentPictureInPicture"in X?this.enable():this.disable()}handlePictureInPictureChange(e){this.player_.isInPictureInPicture()?(this.setIcon("picture-in-picture-exit"),this.controlText("Exit Picture-in-Picture")):(this.setIcon("picture-in-picture-enter"),this.controlText("Picture-in-Picture")),this.handlePictureInPictureEnabledChange()}handleClick(e){this.player_.isInPictureInPicture()?this.player_.exitPictureInPicture():this.player_.requestPictureInPicture()}show(){typeof Be.exitPictureInPicture=="function"&&super.show()}};N6.prototype.controlText_="Picture-in-Picture";gt.registerComponent("PictureInPictureToggle",N6);let U6=class extends js{constructor(e,t){super(e,t),this.setIcon("fullscreen-enter"),this.on(e,"fullscreenchange",n=>this.handleFullscreenChange(n)),Be[e.fsApi_.fullscreenEnabled]===!1&&this.disable()}buildCSSClass(){return`vjs-fullscreen-control ${super.buildCSSClass()}`}handleFullscreenChange(e){this.player_.isFullscreen()?(this.controlText("Exit Fullscreen"),this.setIcon("fullscreen-exit")):(this.controlText("Fullscreen"),this.setIcon("fullscreen-enter"))}handleClick(e){this.player_.isFullscreen()?this.player_.exitFullscreen():this.player_.requestFullscreen()}};U6.prototype.controlText_="Fullscreen";gt.registerComponent("FullscreenToggle",U6);const xde=function(r,e){e.tech_&&!e.tech_.featuresVolumeControl&&r.addClass("vjs-hidden"),r.on(e,"loadstart",function(){e.tech_.featuresVolumeControl?r.removeClass("vjs-hidden"):r.addClass("vjs-hidden")})};let _de=class extends gt{createEl(){const e=super.createEl("div",{className:"vjs-volume-level"});return this.setIcon("circle",e),e.appendChild(super.createEl("span",{className:"vjs-control-text"})),e}};gt.registerComponent("VolumeLevel",_de);let bde=class extends gt{constructor(e,t){super(e,t),this.update=zu(zn(this,this.update),sl)}createEl(){return super.createEl("div",{className:"vjs-volume-tooltip"},{"aria-hidden":"true"})}update(e,t,n,i){if(!n){const s=rm(this.el_),a=rm(this.player_.el()),o=e.width*t;if(!a||!s)return;const l=e.left-a.left+o,u=e.width-o+(a.right-e.right);let c=s.width/2;l<c?c+=c-l:u<c&&(c=u),c<0?c=0:c>s.width&&(c=s.width),this.el_.style.right=`-${c}px`}this.write(`${i}%`)}write(e){nh(this.el_,e)}updateVolume(e,t,n,i,s){this.requestNamedAnimationFrame("VolumeLevelTooltip#updateVolume",()=>{this.update(e,t,n,i.toFixed(0)),s&&s()})}};gt.registerComponent("VolumeLevelTooltip",bde);let $6=class extends gt{constructor(e,t){super(e,t),this.update=zu(zn(this,this.update),sl)}createEl(){return super.createEl("div",{className:"vjs-mouse-display"})}update(e,t,n){const i=100*t;this.getChild("volumeLevelTooltip").updateVolume(e,t,n,i,()=>{n?this.el_.style.bottom=`${e.height*t}px`:this.el_.style.left=`${e.width*t}px`})}};$6.prototype.options_={children:["volumeLevelTooltip"]};gt.registerComponent("MouseVolumeLevelDisplay",$6);let HS=class extends sA{constructor(e,t){super(e,t),this.on("slideractive",n=>this.updateLastVolume_(n)),this.on(e,"volumechange",n=>this.updateARIAAttributes(n)),e.ready(()=>this.updateARIAAttributes())}createEl(){return super.createEl("div",{className:"vjs-volume-bar vjs-slider-bar"},{"aria-label":this.localize("Volume Level"),"aria-live":"polite"})}handleMouseDown(e){Bg(e)&&super.handleMouseDown(e)}handleMouseMove(e){const t=this.getChild("mouseVolumeLevelDisplay");if(t){const n=this.el(),i=rm(n),s=this.vertical();let a=FS(n,e);a=s?a.y:a.x,a=yv(a,0,1),t.update(i,a,s)}Bg(e)&&(this.checkMuted(),this.player_.volume(this.calculateDistance(e)))}checkMuted(){this.player_.muted()&&this.player_.muted(!1)}getPercent(){return this.player_.muted()?0:this.player_.volume()}stepForward(){this.checkMuted(),this.player_.volume(this.player_.volume()+.1)}stepBack(){this.checkMuted(),this.player_.volume(this.player_.volume()-.1)}updateARIAAttributes(e){const t=this.player_.muted()?0:this.volumeAsPercentage_();this.el_.setAttribute("aria-valuenow",t),this.el_.setAttribute("aria-valuetext",t+"%")}volumeAsPercentage_(){return Math.round(this.player_.volume()*100)}updateLastVolume_(){const e=this.player_.volume();this.one("sliderinactive",()=>{this.player_.volume()===0&&this.player_.lastVolume_(e)})}};HS.prototype.options_={children:["volumeLevel"],barName:"volumeLevel"};!ua&&!$u&&HS.prototype.options_.children.splice(0,0,"mouseVolumeLevelDisplay");HS.prototype.playerEvent="volumechange";gt.registerComponent("VolumeBar",HS);let j6=class extends gt{constructor(e,t={}){t.vertical=t.vertical||!1,(typeof t.volumeBar>"u"||em(t.volumeBar))&&(t.volumeBar=t.volumeBar||{},t.volumeBar.vertical=t.vertical),super(e,t),xde(this,e),this.throttledHandleMouseMove=zu(zn(this,this.handleMouseMove),sl),this.handleMouseUpHandler_=n=>this.handleMouseUp(n),this.on("mousedown",n=>this.handleMouseDown(n)),this.on("touchstart",n=>this.handleMouseDown(n)),this.on("mousemove",n=>this.handleMouseMove(n)),this.on(this.volumeBar,["focus","slideractive"],()=>{this.volumeBar.addClass("vjs-slider-active"),this.addClass("vjs-slider-active"),this.trigger("slideractive")}),this.on(this.volumeBar,["blur","sliderinactive"],()=>{this.volumeBar.removeClass("vjs-slider-active"),this.removeClass("vjs-slider-active"),this.trigger("sliderinactive")})}createEl(){let e="vjs-volume-horizontal";return this.options_.vertical&&(e="vjs-volume-vertical"),super.createEl("div",{className:`vjs-volume-control vjs-control ${e}`})}handleMouseDown(e){const t=this.el_.ownerDocument;this.on(t,"mousemove",this.throttledHandleMouseMove),this.on(t,"touchmove",this.throttledHandleMouseMove),this.on(t,"mouseup",this.handleMouseUpHandler_),this.on(t,"touchend",this.handleMouseUpHandler_)}handleMouseUp(e){const t=this.el_.ownerDocument;this.off(t,"mousemove",this.throttledHandleMouseMove),this.off(t,"touchmove",this.throttledHandleMouseMove),this.off(t,"mouseup",this.handleMouseUpHandler_),this.off(t,"touchend",this.handleMouseUpHandler_)}handleMouseMove(e){this.volumeBar.handleMouseMove(e)}};j6.prototype.options_={children:["volumeBar"]};gt.registerComponent("VolumeControl",j6);const Sde=function(r,e){e.tech_&&!e.tech_.featuresMuteControl&&r.addClass("vjs-hidden"),r.on(e,"loadstart",function(){e.tech_.featuresMuteControl?r.removeClass("vjs-hidden"):r.addClass("vjs-hidden")})};let z6=class extends js{constructor(e,t){super(e,t),Sde(this,e),this.on(e,["loadstart","volumechange"],n=>this.update(n))}buildCSSClass(){return`vjs-mute-control ${super.buildCSSClass()}`}handleClick(e){const t=this.player_.volume(),n=this.player_.lastVolume_();if(t===0){const i=n<.1?.1:n;this.player_.volume(i),this.player_.muted(!1)}else this.player_.muted(!this.player_.muted())}update(e){this.updateIcon_(),this.updateControlText_()}updateIcon_(){const e=this.player_.volume();let t=3;this.setIcon("volume-high"),ua&&this.player_.tech_&&this.player_.tech_.el_&&this.player_.muted(this.player_.tech_.el_.muted),e===0||this.player_.muted()?(this.setIcon("volume-mute"),t=0):e<.33?(this.setIcon("volume-low"),t=1):e<.67&&(this.setIcon("volume-medium"),t=2),OS(this.el_,[0,1,2,3].reduce((n,i)=>n+`${i?" ":""}vjs-vol-${i}`,"")),Jh(this.el_,`vjs-vol-${t}`)}updateControlText_(){const t=this.player_.muted()||this.player_.volume()===0?"Unmute":"Mute";this.controlText()!==t&&this.controlText(t)}};z6.prototype.controlText_="Mute";gt.registerComponent("MuteToggle",z6);let H6=class extends gt{constructor(e,t={}){typeof t.inline<"u"?t.inline=t.inline:t.inline=!0,(typeof t.volumeControl>"u"||em(t.volumeControl))&&(t.volumeControl=t.volumeControl||{},t.volumeControl.vertical=!t.inline),super(e,t),this.handleKeyPressHandler_=n=>this.handleKeyPress(n),this.on(e,["loadstart"],n=>this.volumePanelState_(n)),this.on(this.muteToggle,"keyup",n=>this.handleKeyPress(n)),this.on(this.volumeControl,"keyup",n=>this.handleVolumeControlKeyUp(n)),this.on("keydown",n=>this.handleKeyPress(n)),this.on("mouseover",n=>this.handleMouseOver(n)),this.on("mouseout",n=>this.handleMouseOut(n)),this.on(this.volumeControl,["slideractive"],this.sliderActive_),this.on(this.volumeControl,["sliderinactive"],this.sliderInactive_)}sliderActive_(){this.addClass("vjs-slider-active")}sliderInactive_(){this.removeClass("vjs-slider-active")}volumePanelState_(){this.volumeControl.hasClass("vjs-hidden")&&this.muteToggle.hasClass("vjs-hidden")&&this.addClass("vjs-hidden"),this.volumeControl.hasClass("vjs-hidden")&&!this.muteToggle.hasClass("vjs-hidden")&&this.addClass("vjs-mute-toggle-only")}createEl(){let e="vjs-volume-panel-horizontal";return this.options_.inline||(e="vjs-volume-panel-vertical"),super.createEl("div",{className:`vjs-volume-panel vjs-control ${e}`})}dispose(){this.handleMouseOut(),super.dispose()}handleVolumeControlKeyUp(e){e.key==="Escape"&&this.muteToggle.focus()}handleMouseOver(e){this.addClass("vjs-hover"),xo(Be,"keyup",this.handleKeyPressHandler_)}handleMouseOut(e){this.removeClass("vjs-hover"),$s(Be,"keyup",this.handleKeyPressHandler_)}handleKeyPress(e){e.key==="Escape"&&this.handleMouseOut()}};H6.prototype.options_={children:["muteToggle","volumeControl"]};gt.registerComponent("VolumePanel",H6);class V6 extends js{constructor(e,t){super(e,t),this.validOptions=[5,10,30],this.skipTime=this.getSkipForwardTime(),this.skipTime&&this.validOptions.includes(this.skipTime)?(this.setIcon(`forward-${this.skipTime}`),this.controlText(this.localize("Skip forward {1} seconds",[this.skipTime.toLocaleString(e.language())])),this.show()):this.hide()}getSkipForwardTime(){const e=this.options_.playerOptions;return e.controlBar&&e.controlBar.skipButtons&&e.controlBar.skipButtons.forward}buildCSSClass(){return`vjs-skip-forward-${this.getSkipForwardTime()} ${super.buildCSSClass()}`}handleClick(e){if(isNaN(this.player_.duration()))return;const t=this.player_.currentTime(),n=this.player_.liveTracker,i=n&&n.isLive()?n.seekableEnd():this.player_.duration();let s;t+this.skipTime<=i?s=t+this.skipTime:s=i,this.player_.currentTime(s)}handleLanguagechange(){this.controlText(this.localize("Skip forward {1} seconds",[this.skipTime]))}}V6.prototype.controlText_="Skip Forward";gt.registerComponent("SkipForward",V6);class W6 extends js{constructor(e,t){super(e,t),this.validOptions=[5,10,30],this.skipTime=this.getSkipBackwardTime(),this.skipTime&&this.validOptions.includes(this.skipTime)?(this.setIcon(`replay-${this.skipTime}`),this.controlText(this.localize("Skip backward {1} seconds",[this.skipTime.toLocaleString(e.language())])),this.show()):this.hide()}getSkipBackwardTime(){const e=this.options_.playerOptions;return e.controlBar&&e.controlBar.skipButtons&&e.controlBar.skipButtons.backward}buildCSSClass(){return`vjs-skip-backward-${this.getSkipBackwardTime()} ${super.buildCSSClass()}`}handleClick(e){const t=this.player_.currentTime(),n=this.player_.liveTracker,i=n&&n.isLive()&&n.seekableStart();let s;i&&t-this.skipTime<=i?s=i:t>=this.skipTime?s=t-this.skipTime:s=0,this.player_.currentTime(s)}handleLanguagechange(){this.controlText(this.localize("Skip backward {1} seconds",[this.skipTime]))}}W6.prototype.controlText_="Skip Backward";gt.registerComponent("SkipBackward",W6);let q6=class extends gt{constructor(e,t){super(e,t),t&&(this.menuButton_=t.menuButton),this.focusedChild_=-1,this.on("keydown",n=>this.handleKeyDown(n)),this.boundHandleBlur_=n=>this.handleBlur(n),this.boundHandleTapClick_=n=>this.handleTapClick(n)}addEventListenerForItem(e){e instanceof gt&&(this.on(e,"blur",this.boundHandleBlur_),this.on(e,["tap","click"],this.boundHandleTapClick_))}removeEventListenerForItem(e){e instanceof gt&&(this.off(e,"blur",this.boundHandleBlur_),this.off(e,["tap","click"],this.boundHandleTapClick_))}removeChild(e){typeof e=="string"&&(e=this.getChild(e)),this.removeEventListenerForItem(e),super.removeChild(e)}addItem(e){const t=this.addChild(e);t&&this.addEventListenerForItem(t)}createEl(){const e=this.options_.contentElType||"ul";this.contentEl_=Ir(e,{className:"vjs-menu-content"}),this.contentEl_.setAttribute("role","menu");const t=super.createEl("div",{append:this.contentEl_,className:"vjs-menu"});return t.appendChild(this.contentEl_),xo(t,"click",function(n){n.preventDefault(),n.stopImmediatePropagation()}),t}dispose(){this.contentEl_=null,this.boundHandleBlur_=null,this.boundHandleTapClick_=null,super.dispose()}handleBlur(e){const t=e.relatedTarget||Be.activeElement;if(!this.children().some(n=>n.el()===t)){const n=this.menuButton_;n&&n.buttonPressed_&&t!==n.el().firstChild&&n.unpressButton()}}handleTapClick(e){if(this.menuButton_){this.menuButton_.unpressButton();const t=this.children();if(!Array.isArray(t))return;const n=t.filter(i=>i.el()===e.target)[0];if(!n)return;n.name()!=="CaptionSettingsMenuItem"&&this.menuButton_.focus()}}handleKeyDown(e){e.key==="ArrowLeft"||e.key==="ArrowDown"?(e.preventDefault(),e.stopPropagation(),this.stepForward()):(e.key==="ArrowRight"||e.key==="ArrowUp")&&(e.preventDefault(),e.stopPropagation(),this.stepBack())}stepForward(){let e=0;this.focusedChild_!==void 0&&(e=this.focusedChild_+1),this.focus(e)}stepBack(){let e=0;this.focusedChild_!==void 0&&(e=this.focusedChild_-1),this.focus(e)}focus(e=0){const t=this.children().slice();t.length&&t[0].hasClass("vjs-menu-title")&&t.shift(),t.length>0&&(e<0?e=0:e>=t.length&&(e=t.length-1),this.focusedChild_=e,t[e].el_.focus())}};gt.registerComponent("Menu",q6);let lA=class extends gt{constructor(e,t={}){super(e,t),this.menuButton_=new js(e,t),this.menuButton_.controlText(this.controlText_),this.menuButton_.el_.setAttribute("aria-haspopup","true");const n=js.prototype.buildCSSClass();this.menuButton_.el_.className=this.buildCSSClass()+" "+n,this.menuButton_.removeClass("vjs-control"),this.addChild(this.menuButton_),this.update(),this.enabled_=!0;const i=s=>this.handleClick(s);this.handleMenuKeyUp_=s=>this.handleMenuKeyUp(s),this.on(this.menuButton_,"tap",i),this.on(this.menuButton_,"click",i),this.on(this.menuButton_,"keydown",s=>this.handleKeyDown(s)),this.on(this.menuButton_,"mouseenter",()=>{this.addClass("vjs-hover"),this.menu.show(),xo(Be,"keyup",this.handleMenuKeyUp_)}),this.on("mouseleave",s=>this.handleMouseLeave(s)),this.on("keydown",s=>this.handleSubmenuKeyDown(s))}update(){const e=this.createMenu();this.menu&&(this.menu.dispose(),this.removeChild(this.menu)),this.menu=e,this.addChild(e),this.buttonPressed_=!1,this.menuButton_.el_.setAttribute("aria-expanded","false"),this.items&&this.items.length<=this.hideThreshold_?(this.hide(),this.menu.contentEl_.removeAttribute("role")):(this.show(),this.menu.contentEl_.setAttribute("role","menu"))}createMenu(){const e=new q6(this.player_,{menuButton:this});if(this.hideThreshold_=0,this.options_.title){const t=Ir("li",{className:"vjs-menu-title",textContent:di(this.options_.title),tabIndex:-1}),n=new gt(this.player_,{el:t});e.addItem(n)}if(this.items=this.createItems(),this.items)for(let t=0;t<this.items.length;t++)e.addItem(this.items[t]);return e}createItems(){}createEl(){return super.createEl("div",{className:this.buildWrapperCSSClass()},{})}setIcon(e){super.setIcon(e,this.menuButton_.el_)}buildWrapperCSSClass(){let e="vjs-menu-button";this.options_.inline===!0?e+="-inline":e+="-popup";const t=js.prototype.buildCSSClass();return`vjs-menu-button ${e} ${t} ${super.buildCSSClass()}`}buildCSSClass(){let e="vjs-menu-button";return this.options_.inline===!0?e+="-inline":e+="-popup",`vjs-menu-button ${e} ${super.buildCSSClass()}`}controlText(e,t=this.menuButton_.el()){return this.menuButton_.controlText(e,t)}dispose(){this.handleMouseLeave(),super.dispose()}handleClick(e){this.buttonPressed_?this.unpressButton():this.pressButton()}handleMouseLeave(e){this.removeClass("vjs-hover"),$s(Be,"keyup",this.handleMenuKeyUp_)}focus(){this.menuButton_.focus()}blur(){this.menuButton_.blur()}handleKeyDown(e){e.key==="Esc"||e.key==="Tab"?(this.buttonPressed_&&this.unpressButton(),!e.key==="Tab"&&(e.preventDefault(),this.menuButton_.focus())):(e.key==="Up"||e.key==="Down"&&!(this.player_.options_.playerOptions.spatialNavigation&&this.player_.options_.playerOptions.spatialNavigation.enabled))&&(this.buttonPressed_||(e.preventDefault(),this.pressButton()))}handleMenuKeyUp(e){(e.key==="Esc"||e.key==="Tab")&&this.removeClass("vjs-hover")}handleSubmenuKeyPress(e){this.handleSubmenuKeyDown(e)}handleSubmenuKeyDown(e){(e.key==="Esc"||e.key==="Tab")&&(this.buttonPressed_&&this.unpressButton(),!e.key==="Tab"&&(e.preventDefault(),this.menuButton_.focus()))}pressButton(){if(this.enabled_){if(this.buttonPressed_=!0,this.menu.show(),this.menu.lockShowing(),this.menuButton_.el_.setAttribute("aria-expanded","true"),ua&&r6())return;this.menu.focus()}}unpressButton(){this.enabled_&&(this.buttonPressed_=!1,this.menu.unlockShowing(),this.menu.hide(),this.menuButton_.el_.setAttribute("aria-expanded","false"))}disable(){this.unpressButton(),this.enabled_=!1,this.addClass("vjs-disabled"),this.menuButton_.disable()}enable(){this.enabled_=!0,this.removeClass("vjs-disabled"),this.menuButton_.enable()}};gt.registerComponent("MenuButton",lA);let uA=class extends lA{constructor(e,t){const n=t.tracks;if(super(e,t),this.items.length<=1&&this.hide(),!n)return;const i=zn(this,this.update);n.addEventListener("removetrack",i),n.addEventListener("addtrack",i),n.addEventListener("labelchange",i),this.player_.on("ready",i),this.player_.on("dispose",function(){n.removeEventListener("removetrack",i),n.removeEventListener("addtrack",i),n.removeEventListener("labelchange",i)})}};gt.registerComponent("TrackButton",uA);let xv=class extends zS{constructor(e,t){super(e,t),this.selectable=t.selectable,this.isSelected_=t.selected||!1,this.multiSelectable=t.multiSelectable,this.selected(this.isSelected_),this.selectable?this.multiSelectable?this.el_.setAttribute("role","menuitemcheckbox"):this.el_.setAttribute("role","menuitemradio"):this.el_.setAttribute("role","menuitem")}createEl(e,t,n){this.nonIconControl=!0;const i=super.createEl("li",Object.assign({className:"vjs-menu-item",tabIndex:-1},t),n),s=Ir("span",{className:"vjs-menu-item-text",textContent:this.localize(this.options_.label)});return this.player_.options_.experimentalSvgIcons?i.appendChild(s):i.replaceChild(s,i.querySelector(".vjs-icon-placeholder")),i}handleKeyDown(e){["Tab","Escape","ArrowUp","ArrowLeft","ArrowRight","ArrowDown"].includes(e.key)||super.handleKeyDown(e)}handleClick(e){this.selected(!0)}selected(e){this.selectable&&(e?(this.addClass("vjs-selected"),this.el_.setAttribute("aria-checked","true"),this.controlText(", selected"),this.isSelected_=!0):(this.removeClass("vjs-selected"),this.el_.setAttribute("aria-checked","false"),this.controlText(""),this.isSelected_=!1))}};gt.registerComponent("MenuItem",xv);let _v=class extends xv{constructor(e,t){const n=t.track,i=e.textTracks();t.label=n.label||n.language||"Unknown",t.selected=n.mode==="showing",super(e,t),this.track=n,this.kinds=(t.kinds||[t.kind||this.track.kind]).filter(Boolean);const s=(...o)=>{this.handleTracksChange.apply(this,o)},a=(...o)=>{this.handleSelectedLanguageChange.apply(this,o)};if(e.on(["loadstart","texttrackchange"],s),i.addEventListener("change",s),i.addEventListener("selectedlanguagechange",a),this.on("dispose",function(){e.off(["loadstart","texttrackchange"],s),i.removeEventListener("change",s),i.removeEventListener("selectedlanguagechange",a)}),i.onchange===void 0){let o;this.on(["tap","click"],function(){if(typeof X.Event!="object")try{o=new X.Event("change")}catch{}o||(o=Be.createEvent("Event"),o.initEvent("change",!0,!0)),i.dispatchEvent(o)})}this.handleTracksChange()}handleClick(e){const t=this.track,n=this.player_.textTracks();if(super.handleClick(e),!!n)for(let i=0;i<n.length;i++){const s=n[i];this.kinds.indexOf(s.kind)!==-1&&(s===t?s.mode!=="showing"&&(s.mode="showing"):s.mode!=="disabled"&&(s.mode="disabled"))}}handleTracksChange(e){const t=this.track.mode==="showing";t!==this.isSelected_&&this.selected(t)}handleSelectedLanguageChange(e){if(this.track.mode==="showing"){const t=this.player_.cache_.selectedLanguage;if(t&&t.enabled&&t.language===this.track.language&&t.kind!==this.track.kind)return;this.player_.cache_.selectedLanguage={enabled:!0,language:this.track.language,kind:this.track.kind}}}dispose(){this.track=null,super.dispose()}};gt.registerComponent("TextTrackMenuItem",_v);let G6=class extends _v{constructor(e,t){t.track={player:e,kind:t.kind,kinds:t.kinds,default:!1,mode:"disabled"},t.kinds||(t.kinds=[t.kind]),t.label?t.track.label=t.label:t.track.label=t.kinds.join(" and ")+" off",t.selectable=!0,t.multiSelectable=!1,super(e,t)}handleTracksChange(e){const t=this.player().textTracks();let n=!0;for(let i=0,s=t.length;i<s;i++){const a=t[i];if(this.options_.kinds.indexOf(a.kind)>-1&&a.mode==="showing"){n=!1;break}}n!==this.isSelected_&&this.selected(n)}handleSelectedLanguageChange(e){const t=this.player().textTracks();let n=!0;for(let i=0,s=t.length;i<s;i++){const a=t[i];if(["captions","descriptions","subtitles"].indexOf(a.kind)>-1&&a.mode==="showing"){n=!1;break}}n&&(this.player_.cache_.selectedLanguage={enabled:!1})}handleLanguagechange(){this.$(".vjs-menu-item-text").textContent=this.player_.localize(this.options_.label),super.handleLanguagechange()}};gt.registerComponent("OffTextTrackMenuItem",G6);let Pm=class extends uA{constructor(e,t={}){t.tracks=e.textTracks(),super(e,t)}createItems(e=[],t=_v){let n;this.label_&&(n=`${this.label_} off`),e.push(new G6(this.player_,{kinds:this.kinds_,kind:this.kind_,label:n})),this.hideThreshold_+=1;const i=this.player_.textTracks();Array.isArray(this.kinds_)||(this.kinds_=[this.kind_]);for(let s=0;s<i.length;s++){const a=i[s];if(this.kinds_.indexOf(a.kind)>-1){const o=new t(this.player_,{track:a,kinds:this.kinds_,kind:this.kind_,selectable:!0,multiSelectable:!1});o.addClass(`vjs-${a.kind}-menu-item`),e.push(o)}}return e}};gt.registerComponent("TextTrackButton",Pm);let K6=class extends xv{constructor(e,t){const n=t.track,i=t.cue,s=e.currentTime();t.selectable=!0,t.multiSelectable=!1,t.label=i.text,t.selected=i.startTime<=s&&s<i.endTime,super(e,t),this.track=n,this.cue=i}handleClick(e){super.handleClick(),this.player_.currentTime(this.cue.startTime)}};gt.registerComponent("ChaptersTrackMenuItem",K6);let cA=class extends Pm{constructor(e,t,n){super(e,t,n),this.setIcon("chapters"),this.selectCurrentItem_=()=>{this.items.forEach(i=>{i.selected(this.track_.activeCues[0]===i.cue)})}}buildCSSClass(){return`vjs-chapters-button ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-chapters-button ${super.buildWrapperCSSClass()}`}update(e){if(e&&e.track&&e.track.kind!=="chapters")return;const t=this.findChaptersTrack();t!==this.track_?(this.setTrack(t),super.update()):(!this.items||t&&t.cues&&t.cues.length!==this.items.length)&&super.update()}setTrack(e){if(this.track_!==e){if(this.updateHandler_||(this.updateHandler_=this.update.bind(this)),this.track_){const t=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_);t&&t.removeEventListener("load",this.updateHandler_),this.track_.removeEventListener("cuechange",this.selectCurrentItem_),this.track_=null}if(this.track_=e,this.track_){this.track_.mode="hidden";const t=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_);t&&t.addEventListener("load",this.updateHandler_),this.track_.addEventListener("cuechange",this.selectCurrentItem_)}}}findChaptersTrack(){const e=this.player_.textTracks()||[];for(let t=e.length-1;t>=0;t--){const n=e[t];if(n.kind===this.kind_)return n}}getMenuCaption(){return this.track_&&this.track_.label?this.track_.label:this.localize(di(this.kind_))}createMenu(){return this.options_.title=this.getMenuCaption(),super.createMenu()}createItems(){const e=[];if(!this.track_)return e;const t=this.track_.cues;if(!t)return e;for(let n=0,i=t.length;n<i;n++){const s=t[n],a=new K6(this.player_,{track:this.track_,cue:s});e.push(a)}return e}};cA.prototype.kind_="chapters";cA.prototype.controlText_="Chapters";gt.registerComponent("ChaptersButton",cA);let dA=class extends Pm{constructor(e,t,n){super(e,t,n),this.setIcon("audio-description");const i=e.textTracks(),s=zn(this,this.handleTracksChange);i.addEventListener("change",s),this.on("dispose",function(){i.removeEventListener("change",s)})}handleTracksChange(e){const t=this.player().textTracks();let n=!1;for(let i=0,s=t.length;i<s;i++){const a=t[i];if(a.kind!==this.kind_&&a.mode==="showing"){n=!0;break}}n?this.disable():this.enable()}buildCSSClass(){return`vjs-descriptions-button ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-descriptions-button ${super.buildWrapperCSSClass()}`}};dA.prototype.kind_="descriptions";dA.prototype.controlText_="Descriptions";gt.registerComponent("DescriptionsButton",dA);let hA=class extends Pm{constructor(e,t,n){super(e,t,n),this.setIcon("subtitles")}buildCSSClass(){return`vjs-subtitles-button ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-subtitles-button ${super.buildWrapperCSSClass()}`}};hA.prototype.kind_="subtitles";hA.prototype.controlText_="Subtitles";gt.registerComponent("SubtitlesButton",hA);let fA=class extends _v{constructor(e,t){t.track={player:e,kind:t.kind,label:t.kind+" settings",selectable:!1,default:!1,mode:"disabled"},t.selectable=!1,t.name="CaptionSettingsMenuItem",super(e,t),this.addClass("vjs-texttrack-settings"),this.controlText(", opens "+t.kind+" settings dialog")}handleClick(e){this.player().getChild("textTrackSettings").open()}handleLanguagechange(){this.$(".vjs-menu-item-text").textContent=this.player_.localize(this.options_.kind+" settings"),super.handleLanguagechange()}};gt.registerComponent("CaptionSettingsMenuItem",fA);let pA=class extends Pm{constructor(e,t,n){super(e,t,n),this.setIcon("captions")}buildCSSClass(){return`vjs-captions-button ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-captions-button ${super.buildWrapperCSSClass()}`}createItems(){const e=[];return!(this.player().tech_&&this.player().tech_.featuresNativeTextTracks)&&this.player().getChild("textTrackSettings")&&(e.push(new fA(this.player_,{kind:this.kind_})),this.hideThreshold_+=1),super.createItems(e)}};pA.prototype.kind_="captions";pA.prototype.controlText_="Captions";gt.registerComponent("CaptionsButton",pA);let X6=class extends _v{createEl(e,t,n){const i=super.createEl(e,t,n),s=i.querySelector(".vjs-menu-item-text");return this.options_.track.kind==="captions"&&(this.player_.options_.experimentalSvgIcons?this.setIcon("captions",i):s.appendChild(Ir("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),s.appendChild(Ir("span",{className:"vjs-control-text",textContent:` ${this.localize("Captions")}`}))),i}};gt.registerComponent("SubsCapsMenuItem",X6);let mA=class extends Pm{constructor(e,t={}){super(e,t),this.label_="subtitles",this.setIcon("subtitles"),["en","en-us","en-ca","fr-ca"].indexOf(this.player_.language_)>-1&&(this.label_="captions",this.setIcon("captions")),this.menuButton_.controlText(di(this.label_))}buildCSSClass(){return`vjs-subs-caps-button ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-subs-caps-button ${super.buildWrapperCSSClass()}`}createItems(){let e=[];return!(this.player().tech_&&this.player().tech_.featuresNativeTextTracks)&&this.player().getChild("textTrackSettings")&&(e.push(new fA(this.player_,{kind:this.label_})),this.hideThreshold_+=1),e=super.createItems(e,X6),e}};mA.prototype.kinds_=["captions","subtitles"];mA.prototype.controlText_="Subtitles";gt.registerComponent("SubsCapsButton",mA);let Y6=class extends xv{constructor(e,t){const n=t.track,i=e.audioTracks();t.label=n.label||n.language||"Unknown",t.selected=n.enabled,super(e,t),this.track=n,this.addClass(`vjs-${n.kind}-menu-item`);const s=(...a)=>{this.handleTracksChange.apply(this,a)};i.addEventListener("change",s),this.on("dispose",()=>{i.removeEventListener("change",s)})}createEl(e,t,n){const i=super.createEl(e,t,n),s=i.querySelector(".vjs-menu-item-text");return["main-desc","descriptions"].indexOf(this.options_.track.kind)>=0&&(s.appendChild(Ir("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),s.appendChild(Ir("span",{className:"vjs-control-text",textContent:" "+this.localize("Descriptions")}))),i}handleClick(e){if(super.handleClick(e),this.track.enabled=!0,this.player_.tech_.featuresNativeAudioTracks){const t=this.player_.audioTracks();for(let n=0;n<t.length;n++){const i=t[n];i!==this.track&&(i.enabled=i===this.track)}}}handleTracksChange(e){this.selected(this.track.enabled)}};gt.registerComponent("AudioTrackMenuItem",Y6);let Q6=class extends uA{constructor(e,t={}){t.tracks=e.audioTracks(),super(e,t),this.setIcon("audio")}buildCSSClass(){return`vjs-audio-button ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-audio-button ${super.buildWrapperCSSClass()}`}createItems(e=[]){this.hideThreshold_=1;const t=this.player_.audioTracks();for(let n=0;n<t.length;n++){const i=t[n];e.push(new Y6(this.player_,{track:i,selectable:!0,multiSelectable:!1}))}return e}};Q6.prototype.controlText_="Audio Track";gt.registerComponent("AudioTrackButton",Q6);let gA=class extends xv{constructor(e,t){const n=t.rate,i=parseFloat(n,10);t.label=n,t.selected=i===e.playbackRate(),t.selectable=!0,t.multiSelectable=!1,super(e,t),this.label=n,this.rate=i,this.on(e,"ratechange",s=>this.update(s))}handleClick(e){super.handleClick(),this.player().playbackRate(this.rate)}update(e){this.selected(this.player().playbackRate()===this.rate)}};gA.prototype.contentElType="button";gt.registerComponent("PlaybackRateMenuItem",gA);let J6=class extends lA{constructor(e,t){super(e,t),this.menuButton_.el_.setAttribute("aria-describedby",this.labelElId_),this.updateVisibility(),this.updateLabel(),this.on(e,"loadstart",n=>this.updateVisibility(n)),this.on(e,"ratechange",n=>this.updateLabel(n)),this.on(e,"playbackrateschange",n=>this.handlePlaybackRateschange(n))}createEl(){const e=super.createEl();return this.labelElId_="vjs-playback-rate-value-label-"+this.id_,this.labelEl_=Ir("div",{className:"vjs-playback-rate-value",id:this.labelElId_,textContent:"1x"}),e.appendChild(this.labelEl_),e}dispose(){this.labelEl_=null,super.dispose()}buildCSSClass(){return`vjs-playback-rate ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-playback-rate ${super.buildWrapperCSSClass()}`}createItems(){const e=this.playbackRates(),t=[];for(let n=e.length-1;n>=0;n--)t.push(new gA(this.player(),{rate:e[n]+"x"}));return t}handlePlaybackRateschange(e){this.update()}playbackRates(){const e=this.player();return e.playbackRates&&e.playbackRates()||[]}playbackRateSupported(){return this.player().tech_&&this.player().tech_.featuresPlaybackRate&&this.playbackRates()&&this.playbackRates().length>0}updateVisibility(e){this.playbackRateSupported()?this.removeClass("vjs-hidden"):this.addClass("vjs-hidden")}updateLabel(e){this.playbackRateSupported()&&(this.labelEl_.textContent=this.player().playbackRate()+"x")}};J6.prototype.controlText_="Playback Rate";gt.registerComponent("PlaybackRateMenuButton",J6);let Z6=class extends gt{buildCSSClass(){return`vjs-spacer ${super.buildCSSClass()}`}createEl(e="div",t={},n={}){return t.className||(t.className=this.buildCSSClass()),super.createEl(e,t,n)}};gt.registerComponent("Spacer",Z6);let Tde=class extends Z6{buildCSSClass(){return`vjs-custom-control-spacer ${super.buildCSSClass()}`}createEl(){return super.createEl("div",{className:this.buildCSSClass(),textContent:""})}};gt.registerComponent("CustomControlSpacer",Tde);let eU=class extends gt{createEl(){return super.createEl("div",{className:"vjs-control-bar",dir:"ltr"})}};eU.prototype.options_={children:["playToggle","skipBackward","skipForward","volumePanel","currentTimeDisplay","timeDivider","durationDisplay","progressControl","liveDisplay","seekToLive","remainingTimeDisplay","customControlSpacer","playbackRateMenuButton","chaptersButton","descriptionsButton","subsCapsButton","audioTrackButton","pictureInPictureToggle","fullscreenToggle"]};gt.registerComponent("ControlBar",eU);let tU=class extends Am{constructor(e,t){super(e,t),this.on(e,"error",n=>{this.open(n)})}buildCSSClass(){return`vjs-error-display ${super.buildCSSClass()}`}content(){const e=this.player().error();return e?this.localize(e.message):""}};tU.prototype.options_=Object.assign({},Am.prototype.options_,{pauseOnOpen:!1,fillAlways:!0,temporary:!1,uncloseable:!0});gt.registerComponent("ErrorDisplay",tU);class rU extends gt{constructor(e,t={}){super(e,t),this.el_.setAttribute("aria-labelledby",this.selectLabelledbyIds)}createEl(){return this.selectLabelledbyIds=[this.options_.legendId,this.options_.labelId].join(" ").trim(),Ir("select",{id:this.options_.id},{},this.options_.SelectOptions.map(t=>{const n=(this.options_.labelId?this.options_.labelId:`vjs-track-option-${il()}`)+"-"+t[1].replace(/\W+/g,""),i=Ir("option",{id:n,value:this.localize(t[0]),textContent:t[1]});return i.setAttribute("aria-labelledby",`${this.selectLabelledbyIds} ${n}`),i}))}}gt.registerComponent("TextTrackSelect",rU);class ef extends gt{constructor(e,t={}){super(e,t);const n=Ir("legend",{textContent:this.localize(this.options_.legendText),id:this.options_.legendId});this.el().appendChild(n);const i=this.options_.selects;for(const s of i){const a=this.options_.selectConfigs[s],o=a.className,l=a.id.replace("%s",this.options_.id_);let u=null;const c=`vjs_select_${il()}`;if(this.options_.type==="colors"){u=Ir("span",{className:o});const f=Ir("label",{id:l,className:"vjs-label",textContent:a.label});f.setAttribute("for",c),u.appendChild(f)}const h=new rU(e,{SelectOptions:a.options,legendId:this.options_.legendId,id:c,labelId:l});this.addChild(h),this.options_.type==="colors"&&(u.appendChild(h.el()),this.el().appendChild(u))}}createEl(){return Ir("fieldset",{className:this.options_.className})}}gt.registerComponent("TextTrackFieldset",ef);class nU extends gt{constructor(e,t={}){super(e,t);const n=this.options_.textTrackComponentid,i=new ef(e,{id_:n,legendId:`captions-text-legend-${n}`,legendText:this.localize("Text"),className:"vjs-fg vjs-track-setting",selects:this.options_.fieldSets[0],selectConfigs:this.options_.selectConfigs,type:"colors"});this.addChild(i);const s=new ef(e,{id_:n,legendId:`captions-background-${n}`,legendText:this.localize("Text Background"),className:"vjs-bg vjs-track-setting",selects:this.options_.fieldSets[1],selectConfigs:this.options_.selectConfigs,type:"colors"});this.addChild(s);const a=new ef(e,{id_:n,legendId:`captions-window-${n}`,legendText:this.localize("Caption Area Background"),className:"vjs-window vjs-track-setting",selects:this.options_.fieldSets[2],selectConfigs:this.options_.selectConfigs,type:"colors"});this.addChild(a)}createEl(){return Ir("div",{className:"vjs-track-settings-colors"})}}gt.registerComponent("TextTrackSettingsColors",nU);class iU extends gt{constructor(e,t={}){super(e,t);const n=this.options_.textTrackComponentid,i=new ef(e,{id_:n,legendId:`captions-font-size-${n}`,legendText:"Font Size",className:"vjs-font-percent vjs-track-setting",selects:this.options_.fieldSets[0],selectConfigs:this.options_.selectConfigs,type:"font"});this.addChild(i);const s=new ef(e,{id_:n,legendId:`captions-edge-style-${n}`,legendText:this.localize("Text Edge Style"),className:"vjs-edge-style vjs-track-setting",selects:this.options_.fieldSets[1],selectConfigs:this.options_.selectConfigs,type:"font"});this.addChild(s);const a=new ef(e,{id_:n,legendId:`captions-font-family-${n}`,legendText:this.localize("Font Family"),className:"vjs-font-family vjs-track-setting",selects:this.options_.fieldSets[2],selectConfigs:this.options_.selectConfigs,type:"font"});this.addChild(a)}createEl(){return Ir("div",{className:"vjs-track-settings-font"})}}gt.registerComponent("TextTrackSettingsFont",iU);class sU extends gt{constructor(e,t={}){super(e,t);const n=this.localize("restore all settings to the default values"),i=new js(e,{controlText:n,className:"vjs-default-button"});i.el().classList.remove("vjs-control","vjs-button"),i.el().textContent=this.localize("Reset"),this.addChild(i);const s=new js(e,{controlText:n,className:"vjs-done-button"});s.el().classList.remove("vjs-control","vjs-button"),s.el().textContent=this.localize("Done"),this.addChild(s)}createEl(){return Ir("div",{className:"vjs-track-settings-controls"})}}gt.registerComponent("TrackSettingsControls",sU);const PC="vjs-text-track-settings",iM=["#000","Black"],sM=["#00F","Blue"],aM=["#0FF","Cyan"],oM=["#0F0","Green"],lM=["#F0F","Magenta"],uM=["#F00","Red"],cM=["#FFF","White"],dM=["#FF0","Yellow"],RC=["1","Opaque"],LC=["0.5","Semi-Transparent"],hM=["0","Transparent"],Ad={backgroundColor:{selector:".vjs-bg-color > select",id:"captions-background-color-%s",label:"Color",options:[iM,cM,uM,oM,sM,dM,lM,aM],className:"vjs-bg-color"},backgroundOpacity:{selector:".vjs-bg-opacity > select",id:"captions-background-opacity-%s",label:"Opacity",options:[RC,LC,hM],className:"vjs-bg-opacity vjs-opacity"},color:{selector:".vjs-text-color > select",id:"captions-foreground-color-%s",label:"Color",options:[cM,iM,uM,oM,sM,dM,lM,aM],className:"vjs-text-color"},edgeStyle:{selector:".vjs-edge-style > select",id:"",label:"Text Edge Style",options:[["none","None"],["raised","Raised"],["depressed","Depressed"],["uniform","Uniform"],["dropshadow","Drop shadow"]]},fontFamily:{selector:".vjs-font-family > select",id:"",label:"Font Family",options:[["proportionalSansSerif","Proportional Sans-Serif"],["monospaceSansSerif","Monospace Sans-Serif"],["proportionalSerif","Proportional Serif"],["monospaceSerif","Monospace Serif"],["casual","Casual"],["script","Script"],["small-caps","Small Caps"]]},fontPercent:{selector:".vjs-font-percent > select",id:"",label:"Font Size",options:[["0.50","50%"],["0.75","75%"],["1.00","100%"],["1.25","125%"],["1.50","150%"],["1.75","175%"],["2.00","200%"],["3.00","300%"],["4.00","400%"]],default:2,parser:r=>r==="1.00"?null:Number(r)},textOpacity:{selector:".vjs-text-opacity > select",id:"captions-foreground-opacity-%s",label:"Opacity",options:[RC,LC],className:"vjs-text-opacity vjs-opacity"},windowColor:{selector:".vjs-window-color > select",id:"captions-window-color-%s",label:"Color",className:"vjs-window-color"},windowOpacity:{selector:".vjs-window-opacity > select",id:"captions-window-opacity-%s",label:"Opacity",options:[hM,LC,RC],className:"vjs-window-opacity vjs-opacity"}};Ad.windowColor.options=Ad.backgroundColor.options;function aU(r,e){if(e&&(r=e(r)),r&&r!=="none")return r}function Cde(r,e){const t=r.options[r.options.selectedIndex].value;return aU(t,e)}function wde(r,e,t){if(e){for(let n=0;n<r.options.length;n++)if(aU(r.options[n].value,t)===e){r.selectedIndex=n;break}}}let Ede=class extends Am{constructor(e,t){t.temporary=!1,super(e,t),this.updateDisplay=this.updateDisplay.bind(this),this.fill(),this.hasBeenOpened_=this.hasBeenFilled_=!0,this.renderModalComponents(e),this.endDialog=Ir("p",{className:"vjs-control-text",textContent:this.localize("End of dialog window.")}),this.el().appendChild(this.endDialog),this.setDefaults(),t.persistTextTrackSettings===void 0&&(this.options_.persistTextTrackSettings=this.options_.playerOptions.persistTextTrackSettings),this.bindFunctionsToSelectsAndButtons(),this.options_.persistTextTrackSettings&&this.restoreSettings()}renderModalComponents(e){const t=new nU(e,{textTrackComponentid:this.id_,selectConfigs:Ad,fieldSets:[["color","textOpacity"],["backgroundColor","backgroundOpacity"],["windowColor","windowOpacity"]]});this.addChild(t);const n=new iU(e,{textTrackComponentid:this.id_,selectConfigs:Ad,fieldSets:[["fontPercent"],["edgeStyle"],["fontFamily"]]});this.addChild(n);const i=new sU(e);this.addChild(i)}bindFunctionsToSelectsAndButtons(){this.on(this.$(".vjs-done-button"),["click","tap"],()=>{this.saveSettings(),this.close()}),this.on(this.$(".vjs-default-button"),["click","tap"],()=>{this.setDefaults(),this.updateDisplay()}),kp(Ad,e=>{this.on(this.$(e.selector),"change",this.updateDisplay)})}dispose(){this.endDialog=null,super.dispose()}label(){return this.localize("Caption Settings Dialog")}description(){return this.localize("Beginning of dialog window. Escape will cancel and close the window.")}buildCSSClass(){return super.buildCSSClass()+" vjs-text-track-settings"}getValues(){return X5(Ad,(e,t,n)=>{const i=Cde(this.$(t.selector),t.parser);return i!==void 0&&(e[n]=i),e},{})}setValues(e){kp(Ad,(t,n)=>{wde(this.$(t.selector),e[n],t.parser)})}setDefaults(){kp(Ad,e=>{const t=e.hasOwnProperty("default")?e.default:0;this.$(e.selector).selectedIndex=t})}restoreSettings(){let e;try{e=JSON.parse(X.localStorage.getItem(PC))}catch(t){Yr.warn(t)}e&&this.setValues(e)}saveSettings(){if(!this.options_.persistTextTrackSettings)return;const e=this.getValues();try{Object.keys(e).length?X.localStorage.setItem(PC,JSON.stringify(e)):X.localStorage.removeItem(PC)}catch(t){Yr.warn(t)}}updateDisplay(){const e=this.player_.getChild("textTrackDisplay");e&&e.updateDisplay()}handleLanguagechange(){this.fill(),this.renderModalComponents(this.player_),this.bindFunctionsToSelectsAndButtons()}};gt.registerComponent("TextTrackSettings",Ede);let kde=class extends gt{constructor(e,t){let n=t.ResizeObserver||X.ResizeObserver;t.ResizeObserver===null&&(n=!1);const i=Bn({createEl:!n,reportTouchActivity:!1},t);super(e,i),this.ResizeObserver=t.ResizeObserver||X.ResizeObserver,this.loadListener_=null,this.resizeObserver_=null,this.debouncedHandler_=y6(()=>{this.resizeHandler()},100,!1,this),n?(this.resizeObserver_=new this.ResizeObserver(this.debouncedHandler_),this.resizeObserver_.observe(e.el())):(this.loadListener_=()=>{if(!this.el_||!this.el_.contentWindow)return;const s=this.debouncedHandler_;let a=this.unloadListener_=function(){$s(this,"resize",s),$s(this,"unload",a),a=null};xo(this.el_.contentWindow,"unload",a),xo(this.el_.contentWindow,"resize",s)},this.one("load",this.loadListener_))}createEl(){return super.createEl("iframe",{className:"vjs-resize-manager",tabIndex:-1,title:this.localize("No content")},{"aria-hidden":"true"})}resizeHandler(){!this.player_||!this.player_.trigger||this.player_.trigger("playerresize")}dispose(){this.debouncedHandler_&&this.debouncedHandler_.cancel(),this.resizeObserver_&&(this.player_.el()&&this.resizeObserver_.unobserve(this.player_.el()),this.resizeObserver_.disconnect()),this.loadListener_&&this.off("load",this.loadListener_),this.el_&&this.el_.contentWindow&&this.unloadListener_&&this.unloadListener_.call(this.el_.contentWindow),this.ResizeObserver=null,this.resizeObserver=null,this.debouncedHandler_=null,this.loadListener_=null,super.dispose()}};gt.registerComponent("ResizeManager",kde);const Ade={trackingThreshold:20,liveTolerance:15};let Dde=class extends gt{constructor(e,t){const n=Bn(Ade,t,{createEl:!1});super(e,n),this.trackLiveHandler_=()=>this.trackLive_(),this.handlePlay_=i=>this.handlePlay(i),this.handleFirstTimeupdate_=i=>this.handleFirstTimeupdate(i),this.handleSeeked_=i=>this.handleSeeked(i),this.seekToLiveEdge_=i=>this.seekToLiveEdge(i),this.reset_(),this.on(this.player_,"durationchange",i=>this.handleDurationchange(i)),this.on(this.player_,"canplay",()=>this.toggleTracking())}trackLive_(){const e=this.player_.seekable();if(!e||!e.length)return;const t=Number(X.performance.now().toFixed(4)),n=this.lastTime_===-1?0:(t-this.lastTime_)/1e3;this.lastTime_=t,this.pastSeekEnd_=this.pastSeekEnd()+n;const i=this.liveCurrentTime(),s=this.player_.currentTime();let a=this.player_.paused()||this.seekedBehindLive_||Math.abs(i-s)>this.options_.liveTolerance;(!this.timeupdateSeen_||i===1/0)&&(a=!1),a!==this.behindLiveEdge_&&(this.behindLiveEdge_=a,this.trigger("liveedgechange"))}handleDurationchange(){this.toggleTracking()}toggleTracking(){this.player_.duration()===1/0&&this.liveWindow()>=this.options_.trackingThreshold?(this.player_.options_.liveui&&this.player_.addClass("vjs-liveui"),this.startTracking()):(this.player_.removeClass("vjs-liveui"),this.stopTracking())}startTracking(){this.isTracking()||(this.timeupdateSeen_||(this.timeupdateSeen_=this.player_.hasStarted()),this.trackingInterval_=this.setInterval(this.trackLiveHandler_,sl),this.trackLive_(),this.on(this.player_,["play","pause"],this.trackLiveHandler_),this.timeupdateSeen_?this.on(this.player_,"seeked",this.handleSeeked_):(this.one(this.player_,"play",this.handlePlay_),this.one(this.player_,"timeupdate",this.handleFirstTimeupdate_)))}handleFirstTimeupdate(){this.timeupdateSeen_=!0,this.on(this.player_,"seeked",this.handleSeeked_)}handleSeeked(){const e=Math.abs(this.liveCurrentTime()-this.player_.currentTime());this.seekedBehindLive_=this.nextSeekedFromUser_&&e>2,this.nextSeekedFromUser_=!1,this.trackLive_()}handlePlay(){this.one(this.player_,"timeupdate",this.seekToLiveEdge_)}reset_(){this.lastTime_=-1,this.pastSeekEnd_=0,this.lastSeekEnd_=-1,this.behindLiveEdge_=!0,this.timeupdateSeen_=!1,this.seekedBehindLive_=!1,this.nextSeekedFromUser_=!1,this.clearInterval(this.trackingInterval_),this.trackingInterval_=null,this.off(this.player_,["play","pause"],this.trackLiveHandler_),this.off(this.player_,"seeked",this.handleSeeked_),this.off(this.player_,"play",this.handlePlay_),this.off(this.player_,"timeupdate",this.handleFirstTimeupdate_),this.off(this.player_,"timeupdate",this.seekToLiveEdge_)}nextSeekedFromUser(){this.nextSeekedFromUser_=!0}stopTracking(){this.isTracking()&&(this.reset_(),this.trigger("liveedgechange"))}seekableEnd(){const e=this.player_.seekable(),t=[];let n=e?e.length:0;for(;n--;)t.push(e.end(n));return t.length?t.sort()[t.length-1]:1/0}seekableStart(){const e=this.player_.seekable(),t=[];let n=e?e.length:0;for(;n--;)t.push(e.start(n));return t.length?t.sort()[0]:0}liveWindow(){const e=this.liveCurrentTime();return e===1/0?0:e-this.seekableStart()}isLive(){return this.isTracking()}atLiveEdge(){return!this.behindLiveEdge()}liveCurrentTime(){return this.pastSeekEnd()+this.seekableEnd()}pastSeekEnd(){const e=this.seekableEnd();return this.lastSeekEnd_!==-1&&e!==this.lastSeekEnd_&&(this.pastSeekEnd_=0),this.lastSeekEnd_=e,this.pastSeekEnd_}behindLiveEdge(){return this.behindLiveEdge_}isTracking(){return typeof this.trackingInterval_=="number"}seekToLiveEdge(){this.seekedBehindLive_=!1,!this.atLiveEdge()&&(this.nextSeekedFromUser_=!1,this.player_.currentTime(this.liveCurrentTime()))}dispose(){this.stopTracking(),super.dispose()}};gt.registerComponent("LiveTracker",Dde);class Ide extends gt{constructor(e,t){super(e,t),this.on("statechanged",n=>this.updateDom_()),this.updateDom_()}createEl(){return this.els={title:Ir("div",{className:"vjs-title-bar-title",id:`vjs-title-bar-title-${il()}`}),description:Ir("div",{className:"vjs-title-bar-description",id:`vjs-title-bar-description-${il()}`})},Ir("div",{className:"vjs-title-bar"},{},Y5(this.els))}updateDom_(){const e=this.player_.tech_,t=e&&e.el_,n={title:"aria-labelledby",description:"aria-describedby"};["title","description"].forEach(i=>{const s=this.state[i],a=this.els[i],o=n[i];BS(a),s&&nh(a,s),t&&(t.removeAttribute(o),s&&t.setAttribute(o,a.id))}),this.state.title||this.state.description?this.show():this.hide()}update(e){this.setState(e)}dispose(){const e=this.player_.tech_,t=e&&e.el_;t&&(t.removeAttribute("aria-labelledby"),t.removeAttribute("aria-describedby")),super.dispose(),this.els=null}}gt.registerComponent("TitleBar",Ide);const Pde={initialDisplay:4e3,position:[],takeFocus:!1};class Rde extends js{constructor(e,t){t=Bn(Pde,t),super(e,t),this.controlText(t.controlText),this.hide(),this.on(this.player_,["useractive","userinactive"],n=>{this.removeClass("force-display")})}buildCSSClass(){return`vjs-transient-button focus-visible ${this.options_.position.map(e=>`vjs-${e}`).join(" ")}`}createEl(){const e=Ir("button",{},{type:"button",class:this.buildCSSClass()},Ir("span"));return this.controlTextEl_=e.querySelector("span"),e}show(){super.show(),this.addClass("force-display"),this.options_.takeFocus&&this.el().focus({preventScroll:!0}),this.forceDisplayTimeout=this.player_.setTimeout(()=>{this.removeClass("force-display")},this.options_.initialDisplay)}hide(){this.removeClass("force-display"),super.hide()}dispose(){this.player_.clearTimeout(this.forceDisplayTimeout),super.dispose()}}gt.registerComponent("TransientButton",Rde);const E2=r=>{const e=r.el();if(e.hasAttribute("src"))return r.triggerSourceset(e.src),!0;const t=r.$$("source"),n=[];let i="";if(!t.length)return!1;for(let s=0;s<t.length;s++){const a=t[s].src;a&&n.indexOf(a)===-1&&n.push(a)}return n.length?(n.length===1&&(i=n[0]),r.triggerSourceset(i),!0):!1},Lde=Object.defineProperty({},"innerHTML",{get(){return this.cloneNode(!0).innerHTML},set(r){const e=Be.createElement(this.nodeName.toLowerCase());e.innerHTML=r;const t=Be.createDocumentFragment();for(;e.childNodes.length;)t.appendChild(e.childNodes[0]);return this.innerText="",X.Element.prototype.appendChild.call(this,t),this.innerHTML}}),oU=(r,e)=>{let t={};for(let n=0;n<r.length&&(t=Object.getOwnPropertyDescriptor(r[n],e),!(t&&t.set&&t.get));n++);return t.enumerable=!0,t.configurable=!0,t},Ode=r=>oU([r.el(),X.HTMLMediaElement.prototype,X.Element.prototype,Lde],"innerHTML"),fM=function(r){const e=r.el();if(e.resetSourceWatch_)return;const t={},n=Ode(r),i=s=>(...a)=>{const o=s.apply(e,a);return E2(r),o};["append","appendChild","insertAdjacentHTML"].forEach(s=>{e[s]&&(t[s]=e[s],e[s]=i(t[s]))}),Object.defineProperty(e,"innerHTML",Bn(n,{set:i(n.set)})),e.resetSourceWatch_=()=>{e.resetSourceWatch_=null,Object.keys(t).forEach(s=>{e[s]=t[s]}),Object.defineProperty(e,"innerHTML",n)},r.one("sourceset",e.resetSourceWatch_)},Mde=Object.defineProperty({},"src",{get(){return this.hasAttribute("src")?D6(X.Element.prototype.getAttribute.call(this,"src")):""},set(r){return X.Element.prototype.setAttribute.call(this,"src",r),r}}),Fde=r=>oU([r.el(),X.HTMLMediaElement.prototype,Mde],"src"),Bde=function(r){if(!r.featuresSourceset)return;const e=r.el();if(e.resetSourceset_)return;const t=Fde(r),n=e.setAttribute,i=e.load;Object.defineProperty(e,"src",Bn(t,{set:s=>{const a=t.set.call(e,s);return r.triggerSourceset(e.src),a}})),e.setAttribute=(s,a)=>{const o=n.call(e,s,a);return/src/i.test(s)&&r.triggerSourceset(e.src),o},e.load=()=>{const s=i.call(e);return E2(r)||(r.triggerSourceset(""),fM(r)),s},e.currentSrc?r.triggerSourceset(e.currentSrc):E2(r)||fM(r),e.resetSourceset_=()=>{e.resetSourceset_=null,e.load=i,e.setAttribute=n,Object.defineProperty(e,"src",t),e.resetSourceWatch_&&e.resetSourceWatch_()}};let tr=class o_ extends Nn{constructor(e,t){super(e,t);const n=e.source;let i=!1;if(this.featuresVideoFrameCallback=this.featuresVideoFrameCallback&&this.el_.tagName==="VIDEO",n&&(this.el_.currentSrc!==n.src||e.tag&&e.tag.initNetworkState_===3)?this.setSource(n):this.handleLateInit_(this.el_),e.enableSourceset&&this.setupSourcesetHandling_(),this.isScrubbing_=!1,this.el_.hasChildNodes()){const s=this.el_.childNodes;let a=s.length;const o=[];for(;a--;){const l=s[a];l.nodeName.toLowerCase()==="track"&&(this.featuresNativeTextTracks?(this.remoteTextTrackEls().addTrackElement_(l),this.remoteTextTracks().addTrack(l.track),this.textTracks().addTrack(l.track),!i&&!this.el_.hasAttribute("crossorigin")&&jS(l.src)&&(i=!0)):o.push(l))}for(let l=0;l<o.length;l++)this.el_.removeChild(o[l])}this.proxyNativeTracks_(),this.featuresNativeTextTracks&&i&&Yr.warn(`Text Tracks are being loaded from another origin but the crossorigin attribute isn't used.
This may prevent text tracks from loading.`),this.restoreMetadataTracksInIOSNativePlayer_(),(Mg||RS)&&e.nativeControlsForTouch===!0&&this.setControls(!0),this.proxyWebkitFullscreen_(),this.triggerReady()}dispose(){this.el_&&this.el_.resetSourceset_&&this.el_.resetSourceset_(),o_.disposeMediaElement(this.el_),this.options_=null,super.dispose()}setupSourcesetHandling_(){Bde(this)}restoreMetadataTracksInIOSNativePlayer_(){const e=this.textTracks();let t;const n=()=>{t=[];for(let s=0;s<e.length;s++){const a=e[s];a.kind==="metadata"&&t.push({track:a,storedMode:a.mode})}};n(),e.addEventListener("change",n),this.on("dispose",()=>e.removeEventListener("change",n));const i=()=>{for(let s=0;s<t.length;s++){const a=t[s];a.track.mode==="disabled"&&a.track.mode!==a.storedMode&&(a.track.mode=a.storedMode)}e.removeEventListener("change",i)};this.on("webkitbeginfullscreen",()=>{e.removeEventListener("change",n),e.removeEventListener("change",i),e.addEventListener("change",i)}),this.on("webkitendfullscreen",()=>{e.removeEventListener("change",n),e.addEventListener("change",n),e.removeEventListener("change",i)})}overrideNative_(e,t){if(t!==this[`featuresNative${e}Tracks`])return;const n=e.toLowerCase();this[`${n}TracksListeners_`]&&Object.keys(this[`${n}TracksListeners_`]).forEach(i=>{this.el()[`${n}Tracks`].removeEventListener(i,this[`${n}TracksListeners_`][i])}),this[`featuresNative${e}Tracks`]=!t,this[`${n}TracksListeners_`]=null,this.proxyNativeTracksForType_(n)}overrideNativeAudioTracks(e){this.overrideNative_("Audio",e)}overrideNativeVideoTracks(e){this.overrideNative_("Video",e)}proxyNativeTracksForType_(e){const t=Qo[e],n=this.el()[t.getterName],i=this[t.getterName]();if(!this[`featuresNative${t.capitalName}Tracks`]||!n||!n.addEventListener)return;const s={change:o=>{const l={type:"change",target:i,currentTarget:i,srcElement:i};i.trigger(l),e==="text"&&this[sm.remoteText.getterName]().trigger(l)},addtrack(o){i.addTrack(o.track)},removetrack(o){i.removeTrack(o.track)}},a=function(){const o=[];for(let l=0;l<i.length;l++){let u=!1;for(let c=0;c<n.length;c++)if(n[c]===i[l]){u=!0;break}u||o.push(i[l])}for(;o.length;)i.removeTrack(o.shift())};this[t.getterName+"Listeners_"]=s,Object.keys(s).forEach(o=>{const l=s[o];n.addEventListener(o,l),this.on("dispose",u=>n.removeEventListener(o,l))}),this.on("loadstart",a),this.on("dispose",o=>this.off("loadstart",a))}proxyNativeTracks_(){Qo.names.forEach(e=>{this.proxyNativeTracksForType_(e)})}createEl(){let e=this.options_.tag;if(!e||!(this.options_.playerElIngest||this.movingMediaElementInDOM)){if(e){const n=e.cloneNode(!0);e.parentNode&&e.parentNode.insertBefore(n,e),o_.disposeMediaElement(e),e=n}else{e=Be.createElement("video");const n=this.options_.tag&&kd(this.options_.tag),i=Bn({},n);(!Mg||this.options_.nativeControlsForTouch!==!0)&&delete i.controls,s6(e,Object.assign(i,{id:this.options_.techId,class:"vjs-tech"}))}e.playerId=this.options_.playerId}typeof this.options_.preload<"u"&&tm(e,"preload",this.options_.preload),this.options_.disablePictureInPicture!==void 0&&(e.disablePictureInPicture=this.options_.disablePictureInPicture);const t=["loop","muted","playsinline","autoplay"];for(let n=0;n<t.length;n++){const i=t[n],s=this.options_[i];typeof s<"u"&&(s?tm(e,i,i):MS(e,i),e[i]=s)}return e}handleLateInit_(e){if(e.networkState===0||e.networkState===3)return;if(e.readyState===0){let n=!1;const i=function(){n=!0};this.on("loadstart",i);const s=function(){n||this.trigger("loadstart")};this.on("loadedmetadata",s),this.ready(function(){this.off("loadstart",i),this.off("loadedmetadata",s),n||this.trigger("loadstart")});return}const t=["loadstart"];t.push("loadedmetadata"),e.readyState>=2&&t.push("loadeddata"),e.readyState>=3&&t.push("canplay"),e.readyState>=4&&t.push("canplaythrough"),this.ready(function(){t.forEach(function(n){this.trigger(n)},this)})}setScrubbing(e){this.isScrubbing_=e}scrubbing(){return this.isScrubbing_}setCurrentTime(e){try{this.isScrubbing_&&this.el_.fastSeek&&LS?this.el_.fastSeek(e):this.el_.currentTime=e}catch(t){Yr(t,"Video is not ready. (Video.js)")}}duration(){if(this.el_.duration===1/0&&$u&&ju&&this.el_.currentTime===0){const e=()=>{this.el_.currentTime>0&&(this.el_.duration===1/0&&this.trigger("durationchange"),this.off("timeupdate",e))};return this.on("timeupdate",e),NaN}return this.el_.duration||NaN}width(){return this.el_.offsetWidth}height(){return this.el_.offsetHeight}proxyWebkitFullscreen_(){if(!("webkitDisplayingFullscreen"in this.el_))return;const e=function(){this.trigger("fullscreenchange",{isFullscreen:!1}),this.el_.controls&&!this.options_.nativeControlsForTouch&&this.controls()&&(this.el_.controls=!1)},t=function(){"webkitPresentationMode"in this.el_&&this.el_.webkitPresentationMode!=="picture-in-picture"&&(this.one("webkitendfullscreen",e),this.trigger("fullscreenchange",{isFullscreen:!0,nativeIOSFullscreen:!0}))};this.on("webkitbeginfullscreen",t),this.on("dispose",()=>{this.off("webkitbeginfullscreen",t),this.off("webkitendfullscreen",e)})}supportsFullScreen(){return typeof this.el_.webkitEnterFullScreen=="function"}enterFullScreen(){const e=this.el_;if(e.paused&&e.networkState<=e.HAVE_METADATA)xu(this.el_.play()),this.setTimeout(function(){e.pause();try{e.webkitEnterFullScreen()}catch(t){this.trigger("fullscreenerror",t)}},0);else try{e.webkitEnterFullScreen()}catch(t){this.trigger("fullscreenerror",t)}}exitFullScreen(){if(!this.el_.webkitDisplayingFullscreen){this.trigger("fullscreenerror",new Error("The video is not fullscreen"));return}this.el_.webkitExitFullScreen()}requestPictureInPicture(){return this.el_.requestPictureInPicture()}requestVideoFrameCallback(e){return this.featuresVideoFrameCallback&&!this.el_.webkitKeys?this.el_.requestVideoFrameCallback(e):super.requestVideoFrameCallback(e)}cancelVideoFrameCallback(e){this.featuresVideoFrameCallback&&!this.el_.webkitKeys?this.el_.cancelVideoFrameCallback(e):super.cancelVideoFrameCallback(e)}src(e){if(e===void 0)return this.el_.src;this.setSrc(e)}addSourceElement(e,t){if(!e)return Yr.error("Invalid source URL."),!1;const n={src:e};t&&(n.type=t);const i=Ir("source",{},n);return this.el_.appendChild(i),!0}removeSourceElement(e){if(!e)return Yr.error("Source URL is required to remove the source element."),!1;const t=this.el_.querySelectorAll("source");for(const n of t)if(n.src===e)return this.el_.removeChild(n),!0;return Yr.warn(`No matching source element found with src: ${e}`),!1}reset(){o_.resetMediaElement(this.el_)}currentSrc(){return this.currentSource_?this.currentSource_.src:this.el_.currentSrc}setControls(e){this.el_.controls=!!e}addTextTrack(e,t,n){return this.featuresNativeTextTracks?this.el_.addTextTrack(e,t,n):super.addTextTrack(e,t,n)}createRemoteTextTrack(e){if(!this.featuresNativeTextTracks)return super.createRemoteTextTrack(e);const t=Be.createElement("track");return e.kind&&(t.kind=e.kind),e.label&&(t.label=e.label),(e.language||e.srclang)&&(t.srclang=e.language||e.srclang),e.default&&(t.default=e.default),e.id&&(t.id=e.id),e.src&&(t.src=e.src),t}addRemoteTextTrack(e,t){const n=super.addRemoteTextTrack(e,t);return this.featuresNativeTextTracks&&this.el().appendChild(n),n}removeRemoteTextTrack(e){if(super.removeRemoteTextTrack(e),this.featuresNativeTextTracks){const t=this.$$("track");let n=t.length;for(;n--;)(e===t[n]||e===t[n].track)&&this.el().removeChild(t[n])}}getVideoPlaybackQuality(){if(typeof this.el().getVideoPlaybackQuality=="function")return this.el().getVideoPlaybackQuality();const e={};return typeof this.el().webkitDroppedFrameCount<"u"&&typeof this.el().webkitDecodedFrameCount<"u"&&(e.droppedVideoFrames=this.el().webkitDroppedFrameCount,e.totalVideoFrames=this.el().webkitDecodedFrameCount),X.performance&&(e.creationTime=X.performance.now()),e}};DS(tr,"TEST_VID",function(){if(!wm())return;const r=Be.createElement("video"),e=Be.createElement("track");return e.kind="captions",e.srclang="en",e.label="English",r.appendChild(e),r});tr.isSupported=function(){try{tr.TEST_VID.volume=.5}catch{return!1}return!!(tr.TEST_VID&&tr.TEST_VID.canPlayType)};tr.canPlayType=function(r){return tr.TEST_VID.canPlayType(r)};tr.canPlaySource=function(r,e){return tr.canPlayType(r.type)};tr.canControlVolume=function(){try{const r=tr.TEST_VID.volume;tr.TEST_VID.volume=r/2+.1;const e=r!==tr.TEST_VID.volume;return e&&ua?(X.setTimeout(()=>{tr&&tr.prototype&&(tr.prototype.featuresVolumeControl=r!==tr.TEST_VID.volume)}),!1):e}catch{return!1}};tr.canMuteVolume=function(){try{const r=tr.TEST_VID.muted;return tr.TEST_VID.muted=!r,tr.TEST_VID.muted?tm(tr.TEST_VID,"muted","muted"):MS(tr.TEST_VID,"muted","muted"),r!==tr.TEST_VID.muted}catch{return!1}};tr.canControlPlaybackRate=function(){if($u&&ju&&IS<58)return!1;try{const r=tr.TEST_VID.playbackRate;return tr.TEST_VID.playbackRate=r/2+.1,r!==tr.TEST_VID.playbackRate}catch{return!1}};tr.canOverrideAttributes=function(){try{const r=()=>{};Object.defineProperty(Be.createElement("video"),"src",{get:r,set:r}),Object.defineProperty(Be.createElement("audio"),"src",{get:r,set:r}),Object.defineProperty(Be.createElement("video"),"innerHTML",{get:r,set:r}),Object.defineProperty(Be.createElement("audio"),"innerHTML",{get:r,set:r})}catch{return!1}return!0};tr.supportsNativeTextTracks=function(){return LS||ua&&ju};tr.supportsNativeVideoTracks=function(){return!!(tr.TEST_VID&&tr.TEST_VID.videoTracks)};tr.supportsNativeAudioTracks=function(){return!!(tr.TEST_VID&&tr.TEST_VID.audioTracks)};tr.Events=["loadstart","suspend","abort","error","emptied","stalled","loadedmetadata","loadeddata","canplay","canplaythrough","playing","waiting","seeking","seeked","ended","durationchange","timeupdate","progress","play","pause","ratechange","resize","volumechange"];[["featuresMuteControl","canMuteVolume"],["featuresPlaybackRate","canControlPlaybackRate"],["featuresSourceset","canOverrideAttributes"],["featuresNativeTextTracks","supportsNativeTextTracks"],["featuresNativeVideoTracks","supportsNativeVideoTracks"],["featuresNativeAudioTracks","supportsNativeAudioTracks"]].forEach(function([r,e]){DS(tr.prototype,r,()=>tr[e](),!0)});tr.prototype.featuresVolumeControl=tr.canControlVolume();tr.prototype.movingMediaElementInDOM=!ua;tr.prototype.featuresFullscreenResize=!0;tr.prototype.featuresProgressEvents=!0;tr.prototype.featuresTimeupdateEvents=!0;tr.prototype.featuresVideoFrameCallback=!!(tr.TEST_VID&&tr.TEST_VID.requestVideoFrameCallback);tr.disposeMediaElement=function(r){if(r){for(r.parentNode&&r.parentNode.removeChild(r);r.hasChildNodes();)r.removeChild(r.firstChild);r.removeAttribute("src"),typeof r.load=="function"&&(function(){try{r.load()}catch{}})()}};tr.resetMediaElement=function(r){if(!r)return;const e=r.querySelectorAll("source");let t=e.length;for(;t--;)r.removeChild(e[t]);r.removeAttribute("src"),typeof r.load=="function"&&(function(){try{r.load()}catch{}})()};["muted","defaultMuted","autoplay","controls","loop","playsinline"].forEach(function(r){tr.prototype[r]=function(){return this.el_[r]||this.el_.hasAttribute(r)}});["muted","defaultMuted","autoplay","loop","playsinline"].forEach(function(r){tr.prototype["set"+di(r)]=function(e){this.el_[r]=e,e?this.el_.setAttribute(r,r):this.el_.removeAttribute(r)}});["paused","currentTime","buffered","volume","poster","preload","error","seeking","seekable","ended","playbackRate","defaultPlaybackRate","disablePictureInPicture","played","networkState","readyState","videoWidth","videoHeight","crossOrigin"].forEach(function(r){tr.prototype[r]=function(){return this.el_[r]}});["volume","src","poster","preload","playbackRate","defaultPlaybackRate","disablePictureInPicture","crossOrigin"].forEach(function(r){tr.prototype["set"+di(r)]=function(e){this.el_[r]=e}});["pause","load","play"].forEach(function(r){tr.prototype[r]=function(){return this.el_[r]()}});Nn.withSourceHandlers(tr);tr.nativeSourceHandler={};tr.nativeSourceHandler.canPlayType=function(r){try{return tr.TEST_VID.canPlayType(r)}catch{return""}};tr.nativeSourceHandler.canHandleSource=function(r,e){if(r.type)return tr.nativeSourceHandler.canPlayType(r.type);if(r.src){const t=eA(r.src);return tr.nativeSourceHandler.canPlayType(`video/${t}`)}return""};tr.nativeSourceHandler.handleSource=function(r,e,t){e.setSrc(r.src)};tr.nativeSourceHandler.dispose=function(){};tr.registerSourceHandler(tr.nativeSourceHandler);Nn.registerTech("Html5",tr);const lU=["progress","abort","suspend","emptied","stalled","loadedmetadata","loadeddata","timeupdate","resize","volumechange","texttrackchange"],OC={canplay:"CanPlay",canplaythrough:"CanPlayThrough",playing:"Playing",seeked:"Seeked"},k2=["tiny","xsmall","small","medium","large","xlarge","huge"],l_={};k2.forEach(r=>{const e=r.charAt(0)==="x"?`x-${r.substring(1)}`:r;l_[r]=`vjs-layout-${e}`});const Nde={tiny:210,xsmall:320,small:425,medium:768,large:1440,xlarge:2560,huge:1/0};let $i=class op extends gt{constructor(e,t,n){if(e.id=e.id||t.id||`vjs_video_${il()}`,t=Object.assign(op.getTagSettings(e),t),t.initChildren=!1,t.createEl=!1,t.evented=!1,t.reportTouchActivity=!1,!t.language){const a=e.closest("[lang]");a&&(t.language=a.getAttribute("lang"))}if(super(null,t,n),this.boundDocumentFullscreenChange_=a=>this.documentFullscreenChange_(a),this.boundFullWindowOnEscKey_=a=>this.fullWindowOnEscKey(a),this.boundUpdateStyleEl_=a=>this.updateStyleEl_(a),this.boundApplyInitTime_=a=>this.applyInitTime_(a),this.boundUpdateCurrentBreakpoint_=a=>this.updateCurrentBreakpoint_(a),this.boundHandleTechClick_=a=>this.handleTechClick_(a),this.boundHandleTechDoubleClick_=a=>this.handleTechDoubleClick_(a),this.boundHandleTechTouchStart_=a=>this.handleTechTouchStart_(a),this.boundHandleTechTouchMove_=a=>this.handleTechTouchMove_(a),this.boundHandleTechTouchEnd_=a=>this.handleTechTouchEnd_(a),this.boundHandleTechTap_=a=>this.handleTechTap_(a),this.boundUpdatePlayerHeightOnAudioOnlyMode_=a=>this.updatePlayerHeightOnAudioOnlyMode_(a),this.isFullscreen_=!1,this.log=G5(this.id_),this.fsApi_=W_,this.isPosterFromTech_=!1,this.queuedCallbacks_=[],this.isReady_=!1,this.hasStarted_=!1,this.userActive_=!1,this.debugEnabled_=!1,this.audioOnlyMode_=!1,this.audioPosterMode_=!1,this.audioOnlyCache_={controlBarHeight:null,playerHeight:null,hiddenChildren:[]},!this.options_||!this.options_.techOrder||!this.options_.techOrder.length)throw new Error("No techOrder specified. Did you overwrite videojs.options instead of just changing the properties you want to override?");if(this.tag=e,this.tagAttributes=e&&kd(e),this.language(this.options_.language),t.languages){const a={};Object.getOwnPropertyNames(t.languages).forEach(function(o){a[o.toLowerCase()]=t.languages[o]}),this.languages_=a}else this.languages_=op.prototype.options_.languages;this.resetCache_(),this.poster_=t.poster||"",this.controls_=!!t.controls,e.controls=!1,e.removeAttribute("controls"),this.changingSrc_=!1,this.playCallbacks_=[],this.playTerminatedQueue_=[],e.hasAttribute("autoplay")?this.autoplay(!0):this.autoplay(this.options_.autoplay),t.plugins&&Object.keys(t.plugins).forEach(a=>{if(typeof this[a]!="function")throw new Error(`plugin "${a}" does not exist`)}),this.scrubbing_=!1,this.el_=this.createEl(),Yk(this,{eventBusKey:"el_"}),this.fsApi_.requestFullscreen&&(xo(Be,this.fsApi_.fullscreenchange,this.boundDocumentFullscreenChange_),this.on(this.fsApi_.fullscreenchange,this.boundDocumentFullscreenChange_)),this.fluid_&&this.on(["playerreset","resize"],this.boundUpdateStyleEl_);const i=Bn(this.options_);if(t.plugins&&Object.keys(t.plugins).forEach(a=>{this[a](t.plugins[a])}),t.debug&&this.debug(!0),this.options_.playerOptions=i,this.middleware_=[],this.playbackRates(t.playbackRates),t.experimentalSvgIcons){const o=new X.DOMParser().parseFromString(ode,"image/svg+xml");if(o.querySelector("parsererror"))Yr.warn("Failed to load SVG Icons. Falling back to Font Icons."),this.options_.experimentalSvgIcons=null;else{const u=o.documentElement;u.style.display="none",this.el_.appendChild(u),this.addClass("vjs-svg-icons-enabled")}}this.initChildren(),this.isAudio(e.nodeName.toLowerCase()==="audio"),this.controls()?this.addClass("vjs-controls-enabled"):this.addClass("vjs-controls-disabled"),this.el_.setAttribute("role","region"),this.isAudio()?this.el_.setAttribute("aria-label",this.localize("Audio Player")):this.el_.setAttribute("aria-label",this.localize("Video Player")),this.isAudio()&&this.addClass("vjs-audio"),t.spatialNavigation&&t.spatialNavigation.enabled&&(this.spatialNavigation=new lde(this),this.addClass("vjs-spatial-navigation-enabled")),Mg&&this.addClass("vjs-touch-enabled"),ua||this.addClass("vjs-workinghover"),op.players[this.id_]=this;const s=g2.split(".")[0];this.addClass(`vjs-v${s}`),this.userActive(!0),this.reportUserActivity(),this.one("play",a=>this.listenForUserActivity_(a)),this.on("keydown",a=>this.handleKeyDown(a)),this.on("languagechange",a=>this.handleLanguagechange(a)),this.breakpoints(this.options_.breakpoints),this.responsive(this.options_.responsive),this.on("ready",()=>{this.audioPosterMode(this.options_.audioPosterMode),this.audioOnlyMode(this.options_.audioOnlyMode)})}dispose(){this.trigger("dispose"),this.off("dispose"),$s(Be,this.fsApi_.fullscreenchange,this.boundDocumentFullscreenChange_),$s(Be,"keydown",this.boundFullWindowOnEscKey_),this.styleEl_&&this.styleEl_.parentNode&&(this.styleEl_.parentNode.removeChild(this.styleEl_),this.styleEl_=null),op.players[this.id_]=null,this.tag&&this.tag.player&&(this.tag.player=null),this.el_&&this.el_.player&&(this.el_.player=null),this.tech_&&(this.tech_.dispose(),this.isPosterFromTech_=!1,this.poster_=""),this.playerElIngest_&&(this.playerElIngest_=null),this.tag&&(this.tag=null),nde(this),ta.names.forEach(e=>{const t=ta[e],n=this[t.getterName]();n&&n.off&&n.off()}),super.dispose({restoreEl:this.options_.restoreEl})}createEl(){let e=this.tag,t,n=this.playerElIngest_=e.parentNode&&e.parentNode.hasAttribute&&e.parentNode.hasAttribute("data-vjs-player");const i=this.tag.tagName.toLowerCase()==="video-js";n?t=this.el_=e.parentNode:i||(t=this.el_=super.createEl("div"));const s=kd(e);if(i){for(t=this.el_=e,e=this.tag=Be.createElement("video");t.children.length;)e.appendChild(t.firstChild);ig(t,"video-js")||Jh(t,"video-js"),t.appendChild(e),n=this.playerElIngest_=t,Object.keys(t).forEach(l=>{try{e[l]=t[l]}catch{}})}e.setAttribute("tabindex","-1"),s.tabindex="-1",ju&&PS&&(e.setAttribute("role","application"),s.role="application"),e.removeAttribute("width"),e.removeAttribute("height"),"width"in s&&delete s.width,"height"in s&&delete s.height,Object.getOwnPropertyNames(s).forEach(function(l){i&&l==="class"||t.setAttribute(l,s[l]),i&&e.setAttribute(l,s[l])}),e.playerId=e.id,e.id+="_html5_api",e.className="vjs-tech",e.player=t.player=this,this.addClass("vjs-paused");const a=["IS_SMART_TV","IS_TIZEN","IS_WEBOS","IS_ANDROID","IS_IPAD","IS_IPHONE","IS_CHROMECAST_RECEIVER"].filter(l=>t6[l]).map(l=>"vjs-device-"+l.substring(3).toLowerCase().replace(/\_/g,"-"));if(this.addClass(...a),X.VIDEOJS_NO_DYNAMIC_STYLE!==!0){this.styleEl_=g6("vjs-styles-dimensions");const l=qd(".vjs-styles-defaults"),u=qd("head");u.insertBefore(this.styleEl_,l?l.nextSibling:u.firstChild)}this.fill_=!1,this.fluid_=!1,this.width(this.options_.width),this.height(this.options_.height),this.fill(this.options_.fill),this.fluid(this.options_.fluid),this.aspectRatio(this.options_.aspectRatio),this.crossOrigin(this.options_.crossOrigin||this.options_.crossorigin);const o=e.getElementsByTagName("a");for(let l=0;l<o.length;l++){const u=o.item(l);Jh(u,"vjs-hidden"),u.setAttribute("hidden","hidden")}return e.initNetworkState_=e.networkState,e.parentNode&&!n&&e.parentNode.insertBefore(t,e),y2(e,t),this.children_.unshift(e),this.el_.setAttribute("lang",this.language_),this.el_.setAttribute("translate","no"),this.el_=t,t}crossOrigin(e){if(typeof e>"u")return this.techGet_("crossOrigin");if(e!==null&&e!=="anonymous"&&e!=="use-credentials"){Yr.warn(`crossOrigin must be null,  "anonymous" or "use-credentials", given "${e}"`);return}this.techCall_("setCrossOrigin",e),this.posterImage&&this.posterImage.crossOrigin(e)}width(e){return this.dimension("width",e)}height(e){return this.dimension("height",e)}dimension(e,t){const n=e+"_";if(t===void 0)return this[n]||0;if(t===""||t==="auto"){this[n]=void 0,this.updateStyleEl_();return}const i=parseFloat(t);if(isNaN(i)){Yr.error(`Improper value "${t}" supplied for for ${e}`);return}this[n]=i,this.updateStyleEl_()}fluid(e){if(e===void 0)return!!this.fluid_;this.fluid_=!!e,Rc(this)&&this.off(["playerreset","resize"],this.boundUpdateStyleEl_),e?(this.addClass("vjs-fluid"),this.fill(!1),Lce(this,()=>{this.on(["playerreset","resize"],this.boundUpdateStyleEl_)})):this.removeClass("vjs-fluid"),this.updateStyleEl_()}fill(e){if(e===void 0)return!!this.fill_;this.fill_=!!e,e?(this.addClass("vjs-fill"),this.fluid(!1)):this.removeClass("vjs-fill")}aspectRatio(e){if(e===void 0)return this.aspectRatio_;if(!/^\d+\:\d+$/.test(e))throw new Error("Improper value supplied for aspect ratio. The format should be width:height, for example 16:9.");this.aspectRatio_=e,this.fluid(!0),this.updateStyleEl_()}updateStyleEl_(){if(X.VIDEOJS_NO_DYNAMIC_STYLE===!0){const o=typeof this.width_=="number"?this.width_:this.options_.width,l=typeof this.height_=="number"?this.height_:this.options_.height,u=this.tech_&&this.tech_.el();u&&(o>=0&&(u.width=o),l>=0&&(u.height=l));return}let e,t,n,i;this.aspectRatio_!==void 0&&this.aspectRatio_!=="auto"?n=this.aspectRatio_:this.videoWidth()>0?n=this.videoWidth()+":"+this.videoHeight():n="16:9";const s=n.split(":"),a=s[1]/s[0];this.width_!==void 0?e=this.width_:this.height_!==void 0?e=this.height_/a:e=this.videoWidth()||300,this.height_!==void 0?t=this.height_:t=e*a,/^[^a-zA-Z]/.test(this.id())?i="dimensions-"+this.id():i=this.id()+"-dimensions",this.addClass(i),v6(this.styleEl_,`
      .${i} {
        width: ${e}px;
        height: ${t}px;
      }

      .${i}.vjs-fluid:not(.vjs-audio-only-mode) {
        padding-top: ${a*100}%;
      }
    `)}loadTech_(e,t){this.tech_&&this.unloadTech_();const n=di(e),i=e.charAt(0).toLowerCase()+e.slice(1);n!=="Html5"&&this.tag&&(Nn.getTech("Html5").disposeMediaElement(this.tag),this.tag.player=null,this.tag=null),this.techName_=n,this.isReady_=!1;let s=this.autoplay();(typeof this.autoplay()=="string"||this.autoplay()===!0&&this.options_.normalizeAutoplay)&&(s=!1);const a={source:t,autoplay:s,nativeControlsForTouch:this.options_.nativeControlsForTouch,playerId:this.id(),techId:`${this.id()}_${i}_api`,playsinline:this.options_.playsinline,preload:this.options_.preload,loop:this.options_.loop,disablePictureInPicture:this.options_.disablePictureInPicture,muted:this.options_.muted,poster:this.poster(),language:this.language(),playerElIngest:this.playerElIngest_||!1,"vtt.js":this.options_["vtt.js"],canOverridePoster:!!this.options_.techCanOverridePoster,enableSourceset:this.options_.enableSourceset};ta.names.forEach(l=>{const u=ta[l];a[u.getterName]=this[u.privateName]}),Object.assign(a,this.options_[n]),Object.assign(a,this.options_[i]),Object.assign(a,this.options_[e.toLowerCase()]),this.tag&&(a.tag=this.tag),t&&t.src===this.cache_.src&&this.cache_.currentTime>0&&(a.startTime=this.cache_.currentTime);const o=Nn.getTech(e);if(!o)throw new Error(`No Tech named '${n}' exists! '${n}' should be registered using videojs.registerTech()'`);this.tech_=new o(a),this.tech_.ready(zn(this,this.handleTechReady_),!0),W4.jsonToTextTracks(this.textTracksJson_||[],this.tech_),lU.forEach(l=>{this.on(this.tech_,l,u=>this[`handleTech${di(l)}_`](u))}),Object.keys(OC).forEach(l=>{this.on(this.tech_,l,u=>{if(this.tech_.playbackRate()===0&&this.tech_.seeking()){this.queuedCallbacks_.push({callback:this[`handleTech${OC[l]}_`].bind(this),event:u});return}this[`handleTech${OC[l]}_`](u)})}),this.on(this.tech_,"loadstart",l=>this.handleTechLoadStart_(l)),this.on(this.tech_,"sourceset",l=>this.handleTechSourceset_(l)),this.on(this.tech_,"waiting",l=>this.handleTechWaiting_(l)),this.on(this.tech_,"ended",l=>this.handleTechEnded_(l)),this.on(this.tech_,"seeking",l=>this.handleTechSeeking_(l)),this.on(this.tech_,"play",l=>this.handleTechPlay_(l)),this.on(this.tech_,"pause",l=>this.handleTechPause_(l)),this.on(this.tech_,"durationchange",l=>this.handleTechDurationChange_(l)),this.on(this.tech_,"fullscreenchange",(l,u)=>this.handleTechFullscreenChange_(l,u)),this.on(this.tech_,"fullscreenerror",(l,u)=>this.handleTechFullscreenError_(l,u)),this.on(this.tech_,"enterpictureinpicture",l=>this.handleTechEnterPictureInPicture_(l)),this.on(this.tech_,"leavepictureinpicture",l=>this.handleTechLeavePictureInPicture_(l)),this.on(this.tech_,"error",l=>this.handleTechError_(l)),this.on(this.tech_,"posterchange",l=>this.handleTechPosterChange_(l)),this.on(this.tech_,"textdata",l=>this.handleTechTextData_(l)),this.on(this.tech_,"ratechange",l=>this.handleTechRateChange_(l)),this.on(this.tech_,"loadedmetadata",this.boundUpdateStyleEl_),this.usingNativeControls(this.techGet_("controls")),this.controls()&&!this.usingNativeControls()&&this.addTechControlsListeners_(),this.tech_.el().parentNode!==this.el()&&(n!=="Html5"||!this.tag)&&y2(this.tech_.el(),this.el()),this.tag&&(this.tag.player=null,this.tag=null)}unloadTech_(){ta.names.forEach(e=>{const t=ta[e];this[t.privateName]=this[t.getterName]()}),this.textTracksJson_=W4.textTracksToJson(this.tech_),this.isReady_=!1,this.tech_.dispose(),this.tech_=!1,this.isPosterFromTech_&&(this.poster_="",this.trigger("posterchange")),this.isPosterFromTech_=!1}tech(e){return e===void 0&&Yr.warn(`Using the tech directly can be dangerous. I hope you know what you're doing.
See https://github.com/videojs/video.js/issues/2617 for more info.
`),this.tech_}version(){return{"video.js":g2}}addTechControlsListeners_(){this.removeTechControlsListeners_(),this.on(this.tech_,"click",this.boundHandleTechClick_),this.on(this.tech_,"dblclick",this.boundHandleTechDoubleClick_),this.on(this.tech_,"touchstart",this.boundHandleTechTouchStart_),this.on(this.tech_,"touchmove",this.boundHandleTechTouchMove_),this.on(this.tech_,"touchend",this.boundHandleTechTouchEnd_),this.on(this.tech_,"tap",this.boundHandleTechTap_)}removeTechControlsListeners_(){this.off(this.tech_,"tap",this.boundHandleTechTap_),this.off(this.tech_,"touchstart",this.boundHandleTechTouchStart_),this.off(this.tech_,"touchmove",this.boundHandleTechTouchMove_),this.off(this.tech_,"touchend",this.boundHandleTechTouchEnd_),this.off(this.tech_,"click",this.boundHandleTechClick_),this.off(this.tech_,"dblclick",this.boundHandleTechDoubleClick_)}handleTechReady_(){this.triggerReady(),this.cache_.volume&&this.techCall_("setVolume",this.cache_.volume),this.handleTechPosterChange_(),this.handleTechDurationChange_()}handleTechLoadStart_(){this.removeClass("vjs-ended","vjs-seeking"),this.error(null),this.handleTechDurationChange_(),this.paused()?(this.hasStarted(!1),this.trigger("loadstart")):this.trigger("loadstart"),this.manualAutoplay_(this.autoplay()===!0&&this.options_.normalizeAutoplay?"play":this.autoplay())}manualAutoplay_(e){if(!this.tech_||typeof e!="string")return;const t=()=>{const i=this.muted();this.muted(!0);const s=()=>{this.muted(i)};this.playTerminatedQueue_.push(s);const a=this.play();if(ag(a))return a.catch(o=>{throw s(),new Error(`Rejection at manualAutoplay. Restoring muted value. ${o||""}`)})};let n;if(e==="any"&&!this.muted()?(n=this.play(),ag(n)&&(n=n.catch(t))):e==="muted"&&!this.muted()?n=t():n=this.play(),!!ag(n))return n.then(()=>{this.trigger({type:"autoplay-success",autoplay:e})}).catch(()=>{this.trigger({type:"autoplay-failure",autoplay:e})})}updateSourceCaches_(e=""){let t=e,n="";typeof t!="string"&&(t=e.src,n=e.type),this.cache_.source=this.cache_.source||{},this.cache_.sources=this.cache_.sources||[],t&&!n&&(n=ade(this,t)),this.cache_.source=Bn({},e,{src:t,type:n});const i=this.cache_.sources.filter(l=>l.src&&l.src===t),s=[],a=this.$$("source"),o=[];for(let l=0;l<a.length;l++){const u=kd(a[l]);s.push(u),u.src&&u.src===t&&o.push(u.src)}o.length&&!i.length?this.cache_.sources=s:i.length||(this.cache_.sources=[this.cache_.source]),this.cache_.src=t}handleTechSourceset_(e){if(!this.changingSrc_){let t=s=>this.updateSourceCaches_(s);const n=this.currentSource().src,i=e.src;n&&!/^blob:/.test(n)&&/^blob:/.test(i)&&(!this.lastSource_||this.lastSource_.tech!==i&&this.lastSource_.player!==n)&&(t=()=>{}),t(i),e.src||this.tech_.any(["sourceset","loadstart"],s=>{if(s.type==="sourceset")return;const a=this.techGet_("currentSrc");this.lastSource_.tech=a,this.updateSourceCaches_(a)})}this.lastSource_={player:this.currentSource().src,tech:e.src},this.trigger({src:e.src,type:"sourceset"})}hasStarted(e){if(e===void 0)return this.hasStarted_;e!==this.hasStarted_&&(this.hasStarted_=e,this.hasStarted_?this.addClass("vjs-has-started"):this.removeClass("vjs-has-started"))}handleTechPlay_(){this.removeClass("vjs-ended","vjs-paused"),this.addClass("vjs-playing"),this.hasStarted(!0),this.trigger("play")}handleTechRateChange_(){this.tech_.playbackRate()>0&&this.cache_.lastPlaybackRate===0&&(this.queuedCallbacks_.forEach(e=>e.callback(e.event)),this.queuedCallbacks_=[]),this.cache_.lastPlaybackRate=this.tech_.playbackRate(),this.trigger("ratechange")}handleTechWaiting_(){this.addClass("vjs-waiting"),this.trigger("waiting");const e=this.currentTime(),t=()=>{e!==this.currentTime()&&(this.removeClass("vjs-waiting"),this.off("timeupdate",t))};this.on("timeupdate",t)}handleTechCanPlay_(){this.removeClass("vjs-waiting"),this.trigger("canplay")}handleTechCanPlayThrough_(){this.removeClass("vjs-waiting"),this.trigger("canplaythrough")}handleTechPlaying_(){this.removeClass("vjs-waiting"),this.trigger("playing")}handleTechSeeking_(){this.addClass("vjs-seeking"),this.trigger("seeking")}handleTechSeeked_(){this.removeClass("vjs-seeking","vjs-ended"),this.trigger("seeked")}handleTechPause_(){this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.trigger("pause")}handleTechEnded_(){this.addClass("vjs-ended"),this.removeClass("vjs-waiting"),this.options_.loop?(this.currentTime(0),this.play()):this.paused()||this.pause(),this.trigger("ended")}handleTechDurationChange_(){this.duration(this.techGet_("duration"))}handleTechClick_(e){this.controls_&&(this.options_===void 0||this.options_.userActions===void 0||this.options_.userActions.click===void 0||this.options_.userActions.click!==!1)&&(this.options_!==void 0&&this.options_.userActions!==void 0&&typeof this.options_.userActions.click=="function"?this.options_.userActions.click.call(this,e):this.paused()?xu(this.play()):this.pause())}handleTechDoubleClick_(e){if(!this.controls_)return;Array.prototype.some.call(this.$$(".vjs-control-bar, .vjs-modal-dialog"),n=>n.contains(e.target))||(this.options_===void 0||this.options_.userActions===void 0||this.options_.userActions.doubleClick===void 0||this.options_.userActions.doubleClick!==!1)&&(this.options_!==void 0&&this.options_.userActions!==void 0&&typeof this.options_.userActions.doubleClick=="function"?this.options_.userActions.doubleClick.call(this,e):this.isInPictureInPicture()&&!Be.pictureInPictureElement?this.exitPictureInPicture():this.isFullscreen()?this.exitFullscreen():this.requestFullscreen())}handleTechTap_(){this.userActive(!this.userActive())}handleTechTouchStart_(){this.userWasActive=this.userActive()}handleTechTouchMove_(){this.userWasActive&&this.reportUserActivity()}handleTechTouchEnd_(e){e.cancelable&&e.preventDefault()}toggleFullscreenClass_(){this.isFullscreen()?this.addClass("vjs-fullscreen"):this.removeClass("vjs-fullscreen")}documentFullscreenChange_(e){const t=e.target.player;if(t&&t!==this)return;const n=this.el();let i=Be[this.fsApi_.fullscreenElement]===n;!i&&n.matches&&(i=n.matches(":"+this.fsApi_.fullscreen)),this.isFullscreen(i)}handleTechFullscreenChange_(e,t){t&&(t.nativeIOSFullscreen&&(this.addClass("vjs-ios-native-fs"),this.tech_.one("webkitendfullscreen",()=>{this.removeClass("vjs-ios-native-fs")})),this.isFullscreen(t.isFullscreen))}handleTechFullscreenError_(e,t){this.trigger("fullscreenerror",t)}togglePictureInPictureClass_(){this.isInPictureInPicture()?this.addClass("vjs-picture-in-picture"):this.removeClass("vjs-picture-in-picture")}handleTechEnterPictureInPicture_(e){this.isInPictureInPicture(!0)}handleTechLeavePictureInPicture_(e){this.isInPictureInPicture(!1)}handleTechError_(){const e=this.tech_.error();e&&this.error(e)}handleTechTextData_(){let e=null;arguments.length>1&&(e=arguments[1]),this.trigger("textdata",e)}getCache(){return this.cache_}resetCache_(){this.cache_={currentTime:0,initTime:0,inactivityTimeout:this.options_.inactivityTimeout,duration:NaN,lastVolume:1,lastPlaybackRate:this.defaultPlaybackRate(),media:null,src:"",source:{},sources:[],playbackRates:[],volume:1}}techCall_(e,t){this.ready(function(){if(e in tde)return Zce(this.middleware_,this.tech_,e,t);if(e in Q4)return Y4(this.middleware_,this.tech_,e,t);try{this.tech_&&this.tech_[e](t)}catch(n){throw Yr(n),n}},!0)}techGet_(e){if(!(!this.tech_||!this.tech_.isReady_)){if(e in ede)return Jce(this.middleware_,this.tech_,e);if(e in Q4)return Y4(this.middleware_,this.tech_,e);try{return this.tech_[e]()}catch(t){throw this.tech_[e]===void 0?(Yr(`Video.js: ${e} method not defined for ${this.techName_} playback technology.`,t),t):t.name==="TypeError"?(Yr(`Video.js: ${e} unavailable on ${this.techName_} playback technology element.`,t),this.tech_.isReady_=!1,t):(Yr(t),t)}}}play(){return new Promise(e=>{this.play_(e)})}play_(e=xu){this.playCallbacks_.push(e);const t=!!(!this.changingSrc_&&(this.src()||this.currentSrc())),n=!!(LS||ua);if(this.waitToPlay_&&(this.off(["ready","loadstart"],this.waitToPlay_),this.waitToPlay_=null),!this.isReady_||!t){this.waitToPlay_=a=>{this.play_()},this.one(["ready","loadstart"],this.waitToPlay_),!t&&n&&this.load();return}const i=this.techGet_("play");n&&this.hasClass("vjs-ended")&&this.resetProgressBar_(),i===null?this.runPlayTerminatedQueue_():this.runPlayCallbacks_(i)}runPlayTerminatedQueue_(){const e=this.playTerminatedQueue_.slice(0);this.playTerminatedQueue_=[],e.forEach(function(t){t()})}runPlayCallbacks_(e){const t=this.playCallbacks_.slice(0);this.playCallbacks_=[],this.playTerminatedQueue_=[],t.forEach(function(n){n(e)})}pause(){this.techCall_("pause")}paused(){return this.techGet_("paused")!==!1}played(){return this.techGet_("played")||Rl(0,0)}scrubbing(e){if(typeof e>"u")return this.scrubbing_;this.scrubbing_=!!e,this.techCall_("setScrubbing",this.scrubbing_),e?this.addClass("vjs-scrubbing"):this.removeClass("vjs-scrubbing")}currentTime(e){if(e===void 0)return this.cache_.currentTime=this.techGet_("currentTime")||0,this.cache_.currentTime;if(e<0&&(e=0),!this.isReady_||this.changingSrc_||!this.tech_||!this.tech_.isReady_){this.cache_.initTime=e,this.off("canplay",this.boundApplyInitTime_),this.one("canplay",this.boundApplyInitTime_);return}this.techCall_("setCurrentTime",e),this.cache_.initTime=0,isFinite(e)&&(this.cache_.currentTime=Number(e))}applyInitTime_(){this.currentTime(this.cache_.initTime)}duration(e){if(e===void 0)return this.cache_.duration!==void 0?this.cache_.duration:NaN;e=parseFloat(e),e<0&&(e=1/0),e!==this.cache_.duration&&(this.cache_.duration=e,e===1/0?this.addClass("vjs-live"):this.removeClass("vjs-live"),isNaN(e)||this.trigger("durationchange"))}remainingTime(){return this.duration()-this.currentTime()}remainingTimeDisplay(){return Math.floor(this.duration())-Math.floor(this.currentTime())}buffered(){let e=this.techGet_("buffered");return(!e||!e.length)&&(e=Rl(0,0)),e}seekable(){let e=this.techGet_("seekable");return(!e||!e.length)&&(e=Rl(0,0)),e}seeking(){return this.techGet_("seeking")}ended(){return this.techGet_("ended")}networkState(){return this.techGet_("networkState")}readyState(){return this.techGet_("readyState")}bufferedPercent(){return E6(this.buffered(),this.duration())}bufferedEnd(){const e=this.buffered(),t=this.duration();let n=e.end(e.length-1);return n>t&&(n=t),n}volume(e){let t;if(e!==void 0){t=Math.max(0,Math.min(1,e)),this.cache_.volume=t,this.techCall_("setVolume",t),t>0&&this.lastVolume_(t);return}return t=parseFloat(this.techGet_("volume")),isNaN(t)?1:t}muted(e){if(e!==void 0){this.techCall_("setMuted",e);return}return this.techGet_("muted")||!1}defaultMuted(e){return e!==void 0&&this.techCall_("setDefaultMuted",e),this.techGet_("defaultMuted")||!1}lastVolume_(e){if(e!==void 0&&e!==0){this.cache_.lastVolume=e;return}return this.cache_.lastVolume}supportsFullScreen(){return this.techGet_("supportsFullScreen")||!1}isFullscreen(e){if(e!==void 0){const t=this.isFullscreen_;this.isFullscreen_=!!e,this.isFullscreen_!==t&&this.fsApi_.prefixed&&this.trigger("fullscreenchange"),this.toggleFullscreenClass_();return}return this.isFullscreen_}requestFullscreen(e){this.isInPictureInPicture()&&this.exitPictureInPicture();const t=this;return new Promise((n,i)=>{function s(){t.off("fullscreenerror",o),t.off("fullscreenchange",a)}function a(){s(),n()}function o(u,c){s(),i(c)}t.one("fullscreenchange",a),t.one("fullscreenerror",o);const l=t.requestFullscreenHelper_(e);l&&(l.then(s,s),l.then(n,i))})}requestFullscreenHelper_(e){let t;if(this.fsApi_.prefixed||(t=this.options_.fullscreen&&this.options_.fullscreen.options||{},e!==void 0&&(t=e)),this.fsApi_.requestFullscreen){const n=this.el_[this.fsApi_.requestFullscreen](t);return n&&n.then(()=>this.isFullscreen(!0),()=>this.isFullscreen(!1)),n}else this.tech_.supportsFullScreen()&&!this.options_.preferFullWindow?this.techCall_("enterFullScreen"):this.enterFullWindow()}exitFullscreen(){const e=this;return new Promise((t,n)=>{function i(){e.off("fullscreenerror",a),e.off("fullscreenchange",s)}function s(){i(),t()}function a(l,u){i(),n(u)}e.one("fullscreenchange",s),e.one("fullscreenerror",a);const o=e.exitFullscreenHelper_();o&&(o.then(i,i),o.then(t,n))})}exitFullscreenHelper_(){if(this.fsApi_.requestFullscreen){const e=Be[this.fsApi_.exitFullscreen]();return e&&xu(e.then(()=>this.isFullscreen(!1))),e}else this.tech_.supportsFullScreen()&&!this.options_.preferFullWindow?this.techCall_("exitFullScreen"):this.exitFullWindow()}enterFullWindow(){this.isFullscreen(!0),this.isFullWindow=!0,this.docOrigOverflow=Be.documentElement.style.overflow,xo(Be,"keydown",this.boundFullWindowOnEscKey_),Be.documentElement.style.overflow="hidden",Jh(Be.body,"vjs-full-window"),this.trigger("enterFullWindow")}fullWindowOnEscKey(e){e.key==="Escape"&&this.isFullscreen()===!0&&(this.isFullWindow?this.exitFullWindow():this.exitFullscreen())}exitFullWindow(){this.isFullscreen(!1),this.isFullWindow=!1,$s(Be,"keydown",this.boundFullWindowOnEscKey_),Be.documentElement.style.overflow=this.docOrigOverflow,OS(Be.body,"vjs-full-window"),this.trigger("exitFullWindow")}disablePictureInPicture(e){if(e===void 0)return this.techGet_("disablePictureInPicture");this.techCall_("setDisablePictureInPicture",e),this.options_.disablePictureInPicture=e,this.trigger("disablepictureinpicturechanged")}isInPictureInPicture(e){if(e!==void 0){this.isInPictureInPicture_=!!e,this.togglePictureInPictureClass_();return}return!!this.isInPictureInPicture_}requestPictureInPicture(){if(this.options_.enableDocumentPictureInPicture&&X.documentPictureInPicture){const e=Be.createElement(this.el().tagName);return e.classList=this.el().classList,e.classList.add("vjs-pip-container"),this.posterImage&&e.appendChild(this.posterImage.el().cloneNode(!0)),this.titleBar&&e.appendChild(this.titleBar.el().cloneNode(!0)),e.appendChild(Ir("p",{className:"vjs-pip-text"},{},this.localize("Playing in picture-in-picture"))),X.documentPictureInPicture.requestWindow({width:this.videoWidth(),height:this.videoHeight()}).then(t=>(f6(t),this.el_.parentNode.insertBefore(e,this.el_),t.document.body.appendChild(this.el_),t.document.body.classList.add("vjs-pip-window"),this.player_.isInPictureInPicture(!0),this.player_.trigger({type:"enterpictureinpicture",pipWindow:t}),t.addEventListener("pagehide",n=>{const i=n.target.querySelector(".video-js");e.parentNode.replaceChild(i,e),this.player_.isInPictureInPicture(!1),this.player_.trigger("leavepictureinpicture")}),t))}return"pictureInPictureEnabled"in Be&&this.disablePictureInPicture()===!1?this.techGet_("requestPictureInPicture"):Promise.reject("No PiP mode is available")}exitPictureInPicture(){if(X.documentPictureInPicture&&X.documentPictureInPicture.window)return X.documentPictureInPicture.window.close(),Promise.resolve();if("pictureInPictureEnabled"in Be)return Be.exitPictureInPicture()}handleKeyDown(e){const{userActions:t}=this.options_;!t||!t.hotkeys||(i=>{const s=i.tagName.toLowerCase();if(i.isContentEditable)return!0;const a=["button","checkbox","hidden","radio","reset","submit"];return s==="input"?a.indexOf(i.type)===-1:["textarea"].indexOf(s)!==-1})(this.el_.ownerDocument.activeElement)||(typeof t.hotkeys=="function"?t.hotkeys.call(this,e):this.handleHotkeys(e))}handleHotkeys(e){const t=this.options_.userActions?this.options_.userActions.hotkeys:{},{fullscreenKey:n=a=>e.key.toLowerCase()==="f",muteKey:i=a=>e.key.toLowerCase()==="m",playPauseKey:s=a=>e.key.toLowerCase()==="k"||e.key.toLowerCase()===" "}=t;if(n.call(this,e)){e.preventDefault(),e.stopPropagation();const a=gt.getComponent("FullscreenToggle");Be[this.fsApi_.fullscreenEnabled]!==!1&&a.prototype.handleClick.call(this,e)}else i.call(this,e)?(e.preventDefault(),e.stopPropagation(),gt.getComponent("MuteToggle").prototype.handleClick.call(this,e)):s.call(this,e)&&(e.preventDefault(),e.stopPropagation(),gt.getComponent("PlayToggle").prototype.handleClick.call(this,e))}canPlayType(e){let t;for(let n=0,i=this.options_.techOrder;n<i.length;n++){const s=i[n];let a=Nn.getTech(s);if(a||(a=gt.getComponent(s)),!a){Yr.error(`The "${s}" tech is undefined. Skipped browser support check for that tech.`);continue}if(a.isSupported()&&(t=a.canPlayType(e),t))return t}return""}selectSource(e){const t=this.options_.techOrder.map(o=>[o,Nn.getTech(o)]).filter(([o,l])=>l?l.isSupported():(Yr.error(`The "${o}" tech is undefined. Skipped browser support check for that tech.`),!1)),n=function(o,l,u){let c;return o.some(h=>l.some(f=>{if(c=u(h,f),c)return!0})),c};let i;const s=o=>(l,u)=>o(u,l),a=([o,l],u)=>{if(l.canPlaySource(u,this.options_[o.toLowerCase()]))return{source:u,tech:o}};return this.options_.sourceOrder?i=n(e,t,s(a)):i=n(t,e,a),i||!1}handleSrc_(e,t){if(typeof e>"u")return this.cache_.src||"";this.resetRetryOnError_&&this.resetRetryOnError_();const n=R6(e);if(!n.length){this.setTimeout(function(){this.error({code:4,message:this.options_.notSupportedMessage})},0);return}if(this.changingSrc_=!0,t||(this.cache_.sources=n),this.updateSourceCaches_(n[0]),Yce(this,n[0],(i,s)=>{if(this.middleware_=s,t||(this.cache_.sources=n),this.updateSourceCaches_(i),this.src_(i)){if(n.length>1)return this.handleSrc_(n.slice(1));this.changingSrc_=!1,this.setTimeout(function(){this.error({code:4,message:this.options_.notSupportedMessage})},0),this.triggerReady();return}Qce(s,this.tech_)}),n.length>1){const i=()=>{this.error(null),this.handleSrc_(n.slice(1),!0)},s=()=>{this.off("error",i)};this.one("error",i),this.one("playing",s),this.resetRetryOnError_=()=>{this.off("error",i),this.off("playing",s)}}}src(e){return this.handleSrc_(e,!1)}src_(e){const t=this.selectSource([e]);return t?S6(t.tech,this.techName_)?(this.ready(function(){this.tech_.constructor.prototype.hasOwnProperty("setSource")?this.techCall_("setSource",e):this.techCall_("src",e.src),this.changingSrc_=!1},!0),!1):(this.changingSrc_=!0,this.loadTech_(t.tech,t.source),this.tech_.ready(()=>{this.changingSrc_=!1}),!1):!0}addSourceElement(e,t){return this.tech_?this.tech_.addSourceElement(e,t):!1}removeSourceElement(e){return this.tech_?this.tech_.removeSourceElement(e):!1}load(){if(this.tech_&&this.tech_.vhs){this.src(this.currentSource());return}this.techCall_("load")}reset(){if(this.paused())this.doReset_();else{const e=this.play();xu(e.then(()=>this.doReset_()))}}doReset_(){this.tech_&&this.tech_.clearTracks("text"),this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.resetCache_(),this.poster(""),this.loadTech_(this.options_.techOrder[0],null),this.techCall_("reset"),this.resetControlBarUI_(),this.error(null),this.titleBar&&this.titleBar.update({title:void 0,description:void 0}),Rc(this)&&this.trigger("playerreset")}resetControlBarUI_(){this.resetProgressBar_(),this.resetPlaybackRate_(),this.resetVolumeBar_()}resetProgressBar_(){this.currentTime(0);const{currentTimeDisplay:e,durationDisplay:t,progressControl:n,remainingTimeDisplay:i}=this.controlBar||{},{seekBar:s}=n||{};e&&e.updateContent(),t&&t.updateContent(),i&&i.updateContent(),s&&(s.update(),s.loadProgressBar&&s.loadProgressBar.update())}resetPlaybackRate_(){this.playbackRate(this.defaultPlaybackRate()),this.handleTechRateChange_()}resetVolumeBar_(){this.volume(1),this.trigger("volumechange")}currentSources(){const e=this.currentSource(),t=[];return Object.keys(e).length!==0&&t.push(e),this.cache_.sources||t}currentSource(){return this.cache_.source||{}}currentSrc(){return this.currentSource()&&this.currentSource().src||""}currentType(){return this.currentSource()&&this.currentSource().type||""}preload(e){if(e!==void 0){this.techCall_("setPreload",e),this.options_.preload=e;return}return this.techGet_("preload")}autoplay(e){if(e===void 0)return this.options_.autoplay||!1;let t;typeof e=="string"&&/(any|play|muted)/.test(e)||e===!0&&this.options_.normalizeAutoplay?(this.options_.autoplay=e,this.manualAutoplay_(typeof e=="string"?e:"play"),t=!1):e?this.options_.autoplay=!0:this.options_.autoplay=!1,t=typeof t>"u"?this.options_.autoplay:t,this.tech_&&this.techCall_("setAutoplay",t)}playsinline(e){return e!==void 0&&(this.techCall_("setPlaysinline",e),this.options_.playsinline=e),this.techGet_("playsinline")}loop(e){if(e!==void 0){this.techCall_("setLoop",e),this.options_.loop=e;return}return this.techGet_("loop")}poster(e){if(e===void 0)return this.poster_;e||(e=""),e!==this.poster_&&(this.poster_=e,this.techCall_("setPoster",e),this.isPosterFromTech_=!1,this.trigger("posterchange"))}handleTechPosterChange_(){if((!this.poster_||this.options_.techCanOverridePoster)&&this.tech_&&this.tech_.poster){const e=this.tech_.poster()||"";e!==this.poster_&&(this.poster_=e,this.isPosterFromTech_=!0,this.trigger("posterchange"))}}controls(e){if(e===void 0)return!!this.controls_;e=!!e,this.controls_!==e&&(this.controls_=e,this.usingNativeControls()&&this.techCall_("setControls",e),this.controls_?(this.removeClass("vjs-controls-disabled"),this.addClass("vjs-controls-enabled"),this.trigger("controlsenabled"),this.usingNativeControls()||this.addTechControlsListeners_()):(this.removeClass("vjs-controls-enabled"),this.addClass("vjs-controls-disabled"),this.trigger("controlsdisabled"),this.usingNativeControls()||this.removeTechControlsListeners_()))}usingNativeControls(e){if(e===void 0)return!!this.usingNativeControls_;e=!!e,this.usingNativeControls_!==e&&(this.usingNativeControls_=e,this.usingNativeControls_?(this.addClass("vjs-using-native-controls"),this.trigger("usingnativecontrols")):(this.removeClass("vjs-using-native-controls"),this.trigger("usingcustomcontrols")))}error(e){if(e===void 0)return this.error_||null;if(Wd("beforeerror").forEach(t=>{const n=t(this,e);if(!(Uu(n)&&!Array.isArray(n)||typeof n=="string"||typeof n=="number"||n===null)){this.log.error("please return a value that MediaError expects in beforeerror hooks");return}e=n}),this.options_.suppressNotSupportedError&&e&&e.code===4){const t=function(){this.error(e)};this.options_.suppressNotSupportedError=!1,this.any(["click","touchstart"],t),this.one("loadstart",function(){this.off(["click","touchstart"],t)});return}if(e===null){this.error_=null,this.removeClass("vjs-error"),this.errorDisplay&&this.errorDisplay.close();return}this.error_=new ii(e),this.addClass("vjs-error"),Yr.error(`(CODE:${this.error_.code} ${ii.errorTypes[this.error_.code]})`,this.error_.message,this.error_),this.trigger("error"),Wd("error").forEach(t=>t(this,this.error_))}reportUserActivity(e){this.userActivity_=!0}userActive(e){if(e===void 0)return this.userActive_;if(e=!!e,e!==this.userActive_){if(this.userActive_=e,this.userActive_){this.userActivity_=!0,this.removeClass("vjs-user-inactive"),this.addClass("vjs-user-active"),this.trigger("useractive");return}this.tech_&&this.tech_.one("mousemove",function(t){t.stopPropagation(),t.preventDefault()}),this.userActivity_=!1,this.removeClass("vjs-user-active"),this.addClass("vjs-user-inactive"),this.trigger("userinactive")}}listenForUserActivity_(){let e,t,n;const i=zn(this,this.reportUserActivity),s=function(h){(h.screenX!==t||h.screenY!==n)&&(t=h.screenX,n=h.screenY,i())},a=function(){i(),this.clearInterval(e),e=this.setInterval(i,250)},o=function(h){i(),this.clearInterval(e)};this.on("mousedown",a),this.on("mousemove",s),this.on("mouseup",o),this.on("mouseleave",o);const l=this.getChild("controlBar");l&&!ua&&!$u&&(l.on("mouseenter",function(h){this.player().options_.inactivityTimeout!==0&&(this.player().cache_.inactivityTimeout=this.player().options_.inactivityTimeout),this.player().options_.inactivityTimeout=0}),l.on("mouseleave",function(h){this.player().options_.inactivityTimeout=this.player().cache_.inactivityTimeout})),this.on("keydown",i),this.on("keyup",i);let u;const c=function(){if(!this.userActivity_)return;this.userActivity_=!1,this.userActive(!0),this.clearTimeout(u);const h=this.options_.inactivityTimeout;h<=0||(u=this.setTimeout(function(){this.userActivity_||this.userActive(!1)},h))};this.setInterval(c,250)}playbackRate(e){if(e!==void 0){this.techCall_("setPlaybackRate",e);return}return this.tech_&&this.tech_.featuresPlaybackRate?this.cache_.lastPlaybackRate||this.techGet_("playbackRate"):1}defaultPlaybackRate(e){return e!==void 0?this.techCall_("setDefaultPlaybackRate",e):this.tech_&&this.tech_.featuresPlaybackRate?this.techGet_("defaultPlaybackRate"):1}isAudio(e){if(e!==void 0){this.isAudio_=!!e;return}return!!this.isAudio_}updatePlayerHeightOnAudioOnlyMode_(){const e=this.getChild("ControlBar");!e||this.audioOnlyCache_.controlBarHeight===e.currentHeight()||(this.audioOnlyCache_.controlBarHeight=e.currentHeight(),this.height(this.audioOnlyCache_.controlBarHeight))}enableAudioOnlyUI_(){this.addClass("vjs-audio-only-mode");const e=this.children(),t=this.getChild("ControlBar"),n=t&&t.currentHeight();e.forEach(i=>{i!==t&&i.el_&&!i.hasClass("vjs-hidden")&&(i.hide(),this.audioOnlyCache_.hiddenChildren.push(i))}),this.audioOnlyCache_.playerHeight=this.currentHeight(),this.audioOnlyCache_.controlBarHeight=n,this.on("playerresize",this.boundUpdatePlayerHeightOnAudioOnlyMode_),this.height(n),this.trigger("audioonlymodechange")}disableAudioOnlyUI_(){this.removeClass("vjs-audio-only-mode"),this.off("playerresize",this.boundUpdatePlayerHeightOnAudioOnlyMode_),this.audioOnlyCache_.hiddenChildren.forEach(e=>e.show()),this.height(this.audioOnlyCache_.playerHeight),this.trigger("audioonlymodechange")}audioOnlyMode(e){if(typeof e!="boolean"||e===this.audioOnlyMode_)return this.audioOnlyMode_;if(this.audioOnlyMode_=e,e){const t=[];return this.isInPictureInPicture()&&t.push(this.exitPictureInPicture()),this.isFullscreen()&&t.push(this.exitFullscreen()),this.audioPosterMode()&&t.push(this.audioPosterMode(!1)),Promise.all(t).then(()=>this.enableAudioOnlyUI_())}return Promise.resolve().then(()=>this.disableAudioOnlyUI_())}enablePosterModeUI_(){(this.tech_&&this.tech_).hide(),this.addClass("vjs-audio-poster-mode"),this.trigger("audiopostermodechange")}disablePosterModeUI_(){(this.tech_&&this.tech_).show(),this.removeClass("vjs-audio-poster-mode"),this.trigger("audiopostermodechange")}audioPosterMode(e){return typeof e!="boolean"||e===this.audioPosterMode_?this.audioPosterMode_:(this.audioPosterMode_=e,e?this.audioOnlyMode()?this.audioOnlyMode(!1).then(()=>{this.enablePosterModeUI_()}):Promise.resolve().then(()=>{this.enablePosterModeUI_()}):Promise.resolve().then(()=>{this.disablePosterModeUI_()}))}addTextTrack(e,t,n){if(this.tech_)return this.tech_.addTextTrack(e,t,n)}addRemoteTextTrack(e,t){if(this.tech_)return this.tech_.addRemoteTextTrack(e,t)}removeRemoteTextTrack(e={}){let{track:t}=e;if(t||(t=e),this.tech_)return this.tech_.removeRemoteTextTrack(t)}getVideoPlaybackQuality(){return this.techGet_("getVideoPlaybackQuality")}videoWidth(){return this.tech_&&this.tech_.videoWidth&&this.tech_.videoWidth()||0}videoHeight(){return this.tech_&&this.tech_.videoHeight&&this.tech_.videoHeight()||0}language(e){if(e===void 0)return this.language_;this.language_!==String(e).toLowerCase()&&(this.language_=String(e).toLowerCase(),Rc(this)&&this.trigger("languagechange"))}languages(){return Bn(op.prototype.options_.languages,this.languages_)}toJSON(){const e=Bn(this.options_),t=e.tracks;e.tracks=[];for(let n=0;n<t.length;n++){let i=t[n];i=Bn(i),i.player=void 0,e.tracks[n]=i}return e}createModal(e,t){t=t||{},t.content=e||"";const n=new Am(this,t);return this.addChild(n),n.on("dispose",()=>{this.removeChild(n)}),n.open(),n}updateCurrentBreakpoint_(){if(!this.responsive())return;const e=this.currentBreakpoint(),t=this.currentWidth();for(let n=0;n<k2.length;n++){const i=k2[n],s=this.breakpoints_[i];if(t<=s){if(e===i)return;e&&this.removeClass(l_[e]),this.addClass(l_[i]),this.breakpoint_=i;break}}}removeCurrentBreakpoint_(){const e=this.currentBreakpointClass();this.breakpoint_="",e&&this.removeClass(e)}breakpoints(e){return e===void 0?Object.assign(this.breakpoints_):(this.breakpoint_="",this.breakpoints_=Object.assign({},Nde,e),this.updateCurrentBreakpoint_(),Object.assign(this.breakpoints_))}responsive(e){if(e===void 0)return this.responsive_;e=!!e;const t=this.responsive_;if(e!==t)return this.responsive_=e,e?(this.on("playerresize",this.boundUpdateCurrentBreakpoint_),this.updateCurrentBreakpoint_()):(this.off("playerresize",this.boundUpdateCurrentBreakpoint_),this.removeCurrentBreakpoint_()),e}currentBreakpoint(){return this.breakpoint_}currentBreakpointClass(){return l_[this.breakpoint_]||""}loadMedia(e,t){if(!e||typeof e!="object")return;const n=this.crossOrigin();this.reset(),this.cache_.media=Bn(e);const{artist:i,artwork:s,description:a,poster:o,src:l,textTracks:u,title:c}=this.cache_.media;!s&&o&&(this.cache_.media.artwork=[{src:o,type:eb(o)}]),n&&this.crossOrigin(n),l&&this.src(l),o&&this.poster(o),Array.isArray(u)&&u.forEach(h=>this.addRemoteTextTrack(h,!1)),this.titleBar&&this.titleBar.update({title:c,description:a||i||""}),this.ready(t)}getMedia(){if(!this.cache_.media){const e=this.poster(),t=this.currentSources(),n=Array.prototype.map.call(this.remoteTextTracks(),s=>({kind:s.kind,label:s.label,language:s.language,src:s.src})),i={src:t,textTracks:n};return e&&(i.poster=e,i.artwork=[{src:i.poster,type:eb(i.poster)}]),i}return Bn(this.cache_.media)}static getTagSettings(e){const t={sources:[],tracks:[]},n=kd(e),i=n["data-setup"];if(ig(e,"vjs-fill")&&(n.fill=!0),ig(e,"vjs-fluid")&&(n.fluid=!0),i!==null)try{Object.assign(n,JSON.parse(i||"{}"))}catch(s){Yr.error("data-setup",s)}if(Object.assign(t,n),e.hasChildNodes()){const s=e.childNodes;for(let a=0,o=s.length;a<o;a++){const l=s[a],u=l.nodeName.toLowerCase();u==="source"?t.sources.push(kd(l)):u==="track"&&t.tracks.push(kd(l))}}return t}debug(e){if(e===void 0)return this.debugEnabled_;e?(this.trigger("debugon"),this.previousLogLevel_=this.log.level,this.log.level("debug"),this.debugEnabled_=!0):(this.trigger("debugoff"),this.log.level(this.previousLogLevel_),this.previousLogLevel_=void 0,this.debugEnabled_=!1)}playbackRates(e){if(e===void 0)return this.cache_.playbackRates;Array.isArray(e)&&e.every(t=>typeof t=="number")&&(this.cache_.playbackRates=e,this.trigger("playbackrateschange"))}};ta.names.forEach(function(r){const e=ta[r];$i.prototype[e.getterName]=function(){return this.tech_?this.tech_[e.getterName]():(this[e.privateName]=this[e.privateName]||new e.ListClass,this[e.privateName])}});$i.prototype.crossorigin=$i.prototype.crossOrigin;$i.players={};const P0=X.navigator;$i.prototype.options_={techOrder:Nn.defaultTechOrder_,html5:{},enableSourceset:!0,inactivityTimeout:2e3,playbackRates:[],liveui:!1,children:["mediaLoader","posterImage","titleBar","textTrackDisplay","loadingSpinner","bigPlayButton","liveTracker","controlBar","errorDisplay","textTrackSettings","resizeManager"],language:P0&&(P0.languages&&P0.languages[0]||P0.userLanguage||P0.language)||"en",languages:{},notSupportedMessage:"No compatible source was found for this media.",normalizeAutoplay:!1,fullscreen:{options:{navigationUI:"hide"}},breakpoints:{},responsive:!1,audioOnlyMode:!1,audioPosterMode:!1,spatialNavigation:{enabled:!1,horizontalSeek:!1},enableSmoothSeeking:!1};lU.forEach(function(r){$i.prototype[`handleTech${di(r)}_`]=function(){return this.trigger(r)}});gt.registerComponent("Player",$i);const tb="plugin",Ip="activePlugins_",dp={},rb=r=>dp.hasOwnProperty(r),u_=r=>rb(r)?dp[r]:void 0,uU=(r,e)=>{r[Ip]=r[Ip]||{},r[Ip][e]=!0},nb=(r,e,t)=>{const n=(t?"before":"")+"pluginsetup";r.trigger(n,e),r.trigger(n+":"+e.name,e)},Ude=function(r,e){const t=function(){nb(this,{name:r,plugin:e,instance:null},!0);const n=e.apply(this,arguments);return uU(this,r),nb(this,{name:r,plugin:e,instance:n}),n};return Object.keys(e).forEach(function(n){t[n]=e[n]}),t},pM=(r,e)=>(e.prototype.name=r,function(...t){nb(this,{name:r,plugin:e,instance:null},!0);const n=new e(this,...t);return this[r]=()=>n,nb(this,n.getEventHash()),n});let Hu=class c_{constructor(e){if(this.constructor===c_)throw new Error("Plugin must be sub-classed; not directly instantiated.");this.player=e,this.log||(this.log=this.player.log.createLogger(this.name)),Yk(this),delete this.trigger,b6(this,this.constructor.defaultState),uU(e,this.name),this.dispose=this.dispose.bind(this),e.on("dispose",this.dispose)}version(){return this.constructor.VERSION}getEventHash(e={}){return e.name=this.name,e.plugin=this.constructor,e.instance=this,e}trigger(e,t={}){return km(this.eventBusEl_,e,this.getEventHash(t))}handleStateChanged(e){}dispose(){const{name:e,player:t}=this;this.trigger("dispose"),this.off(),t.off("dispose",this.dispose),t[Ip][e]=!1,this.player=this.state=null,t[e]=pM(e,dp[e])}static isBasic(e){const t=typeof e=="string"?u_(e):e;return typeof t=="function"&&!c_.prototype.isPrototypeOf(t.prototype)}static registerPlugin(e,t){if(typeof e!="string")throw new Error(`Illegal plugin name, "${e}", must be a string, was ${typeof e}.`);if(rb(e))Yr.warn(`A plugin named "${e}" already exists. You may want to avoid re-registering plugins!`);else if($i.prototype.hasOwnProperty(e))throw new Error(`Illegal plugin name, "${e}", cannot share a name with an existing player method!`);if(typeof t!="function")throw new Error(`Illegal plugin for "${e}", must be a function, was ${typeof t}.`);return dp[e]=t,e!==tb&&(c_.isBasic(t)?$i.prototype[e]=Ude(e,t):$i.prototype[e]=pM(e,t)),t}static deregisterPlugin(e){if(e===tb)throw new Error("Cannot de-register base plugin.");rb(e)&&(delete dp[e],delete $i.prototype[e])}static getPlugins(e=Object.keys(dp)){let t;return e.forEach(n=>{const i=u_(n);i&&(t=t||{},t[n]=i)}),t}static getPluginVersion(e){const t=u_(e);return t&&t.VERSION||""}};Hu.getPlugin=u_;Hu.BASE_PLUGIN_NAME=tb;Hu.registerPlugin(tb,Hu);$i.prototype.usingPlugin=function(r){return!!this[Ip]&&this[Ip][r]===!0};$i.prototype.hasPlugin=function(r){return!!rb(r)};function $de(r,e){let t=!1;return function(...n){return t||Yr.warn(r),t=!0,e.apply(this,n)}}function jl(r,e,t,n){return $de(`${e} is deprecated and will be removed in ${r}.0; please use ${t} instead.`,n)}var jde={NetworkBadStatus:"networkbadstatus",NetworkRequestFailed:"networkrequestfailed",NetworkRequestAborted:"networkrequestaborted",NetworkRequestTimeout:"networkrequesttimeout",NetworkBodyParserFailed:"networkbodyparserfailed",StreamingHlsPlaylistParserError:"streaminghlsplaylistparsererror",StreamingDashManifestParserError:"streamingdashmanifestparsererror",StreamingContentSteeringParserError:"streamingcontentsteeringparsererror",StreamingVttParserError:"streamingvttparsererror",StreamingFailedToSelectNextSegment:"streamingfailedtoselectnextsegment",StreamingFailedToDecryptSegment:"streamingfailedtodecryptsegment",StreamingFailedToTransmuxSegment:"streamingfailedtotransmuxsegment",StreamingFailedToAppendSegment:"streamingfailedtoappendsegment",StreamingCodecsChangeError:"streamingcodecschangeerror"};const cU=r=>r.indexOf("#")===0?r.slice(1):r;function Se(r,e,t){let n=Se.getPlayer(r);if(n)return e&&Yr.warn(`Player "${r}" is already initialised. Options will not be applied.`),t&&n.ready(t),n;const i=typeof r=="string"?qd("#"+cU(r)):r;if(!Em(i))throw new TypeError("The element or ID supplied is not valid. (videojs)");const a=("getRootNode"in i?i.getRootNode()instanceof X.ShadowRoot:!1)?i.getRootNode():i.ownerDocument.body;(!i.ownerDocument.defaultView||!a.contains(i))&&Yr.warn("The element supplied is not included in the DOM"),e=e||{},e.restoreEl===!0&&(e.restoreEl=(i.parentNode&&i.parentNode.hasAttribute&&i.parentNode.hasAttribute("data-vjs-player")?i.parentNode:i).cloneNode(!0)),Wd("beforesetup").forEach(l=>{const u=l(i,Bn(e));if(!Uu(u)||Array.isArray(u)){Yr.error("please return an object in beforesetup hooks");return}e=Bn(e,u)});const o=gt.getComponent("Player");return n=new o(i,e,t),Wd("setup").forEach(l=>l(n)),n}Se.hooks_=wc;Se.hooks=Wd;Se.hook=xce;Se.hookOnce=_ce;Se.removeHook=q5;if(X.VIDEOJS_NO_DYNAMIC_STYLE!==!0&&wm()){let r=qd(".vjs-styles-defaults");if(!r){r=g6("vjs-styles-defaults");const e=qd("head");e&&e.insertBefore(r,e.firstChild),v6(r,`
      .video-js {
        width: 300px;
        height: 150px;
      }

      .vjs-fluid:not(.vjs-audio-only-mode) {
        padding-top: 56.25%
      }
    `)}}_2(1,Se);Se.VERSION=g2;Se.options=$i.prototype.options_;Se.getPlayers=()=>$i.players;Se.getPlayer=r=>{const e=$i.players;let t;if(typeof r=="string"){const n=cU(r),i=e[n];if(i)return i;t=qd("#"+n)}else t=r;if(Em(t)){const{player:n,playerId:i}=t;if(n||e[i])return n||e[i]}};Se.getAllPlayers=()=>Object.keys($i.players).map(r=>$i.players[r]).filter(Boolean);Se.players=$i.players;Se.getComponent=gt.getComponent;Se.registerComponent=(r,e)=>(Nn.isTech(e)&&Yr.warn(`The ${r} tech was registered as a component. It should instead be registered using videojs.registerTech(name, tech)`),gt.registerComponent.call(gt,r,e));Se.getTech=Nn.getTech;Se.registerTech=Nn.registerTech;Se.use=Xce;Object.defineProperty(Se,"middleware",{value:{},writeable:!1,enumerable:!0});Object.defineProperty(Se.middleware,"TERMINATOR",{value:Z_,writeable:!1,enumerable:!0});Se.browser=t6;Se.obj=Tce;Se.mergeOptions=jl(9,"videojs.mergeOptions","videojs.obj.merge",Bn);Se.defineLazyProperty=jl(9,"videojs.defineLazyProperty","videojs.obj.defineLazyProperty",DS);Se.bind=jl(9,"videojs.bind","native Function.prototype.bind",zn);Se.registerPlugin=Hu.registerPlugin;Se.deregisterPlugin=Hu.deregisterPlugin;Se.plugin=(r,e)=>(Yr.warn("videojs.plugin() is deprecated; use videojs.registerPlugin() instead"),Hu.registerPlugin(r,e));Se.getPlugins=Hu.getPlugins;Se.getPlugin=Hu.getPlugin;Se.getPluginVersion=Hu.getPluginVersion;Se.addLanguage=function(r,e){return r=(""+r).toLowerCase(),Se.options.languages=Bn(Se.options.languages,{[r]:e}),Se.options.languages[r]};Se.log=Yr;Se.createLogger=G5;Se.time=Nce;Se.createTimeRange=jl(9,"videojs.createTimeRange","videojs.time.createTimeRanges",Rl);Se.createTimeRanges=jl(9,"videojs.createTimeRanges","videojs.time.createTimeRanges",Rl);Se.formatTime=jl(9,"videojs.formatTime","videojs.time.formatTime",gf);Se.setFormatTime=jl(9,"videojs.setFormatTime","videojs.time.setFormatTime",C6);Se.resetFormatTime=jl(9,"videojs.resetFormatTime","videojs.time.resetFormatTime",w6);Se.parseUrl=jl(9,"videojs.parseUrl","videojs.url.parseUrl",Zk);Se.isCrossOrigin=jl(9,"videojs.isCrossOrigin","videojs.url.isCrossOrigin",jS);Se.EventTarget=_o;Se.any=Xk;Se.on=xo;Se.one=US;Se.off=$s;Se.trigger=km;Se.xhr=k5;Se.TextTrack=vv;Se.AudioTrack=I6;Se.VideoTrack=P6;["isEl","isTextNode","createEl","hasClass","addClass","removeClass","toggleClass","setAttributes","getAttributes","emptyEl","appendContent","insertContent"].forEach(r=>{Se[r]=function(){return Yr.warn(`videojs.${r}() is deprecated; use videojs.dom.${r}() instead`),p6[r].apply(null,arguments)}});Se.computedStyle=jl(9,"videojs.computedStyle","videojs.dom.computedStyle",nm);Se.dom=p6;Se.fn=Rce;Se.num=gde;Se.str=Fce;Se.url=Gce;Se.Error=jde;/*! @name videojs-contrib-quality-levels @version 4.1.0 @license Apache-2.0 */class zde{constructor(e){let t=this;return t.id=e.id,t.label=t.id,t.width=e.width,t.height=e.height,t.bitrate=e.bandwidth,t.frameRate=e.frameRate,t.enabled_=e.enabled,Object.defineProperty(t,"enabled",{get(){return t.enabled_()},set(n){t.enabled_(n)}}),t}}class ib extends Se.EventTarget{constructor(){super();let e=this;return e.levels_=[],e.selectedIndex_=-1,Object.defineProperty(e,"selectedIndex",{get(){return e.selectedIndex_}}),Object.defineProperty(e,"length",{get(){return e.levels_.length}}),e[Symbol.iterator]=()=>e.levels_.values(),e}addQualityLevel(e){let t=this.getQualityLevelById(e.id);if(t)return t;const n=this.levels_.length;return t=new zde(e),""+n in this||Object.defineProperty(this,n,{get(){return this.levels_[n]}}),this.levels_.push(t),this.trigger({qualityLevel:t,type:"addqualitylevel"}),t}removeQualityLevel(e){let t=null;for(let n=0,i=this.length;n<i;n++)if(this[n]===e){t=this.levels_.splice(n,1)[0],this.selectedIndex_===n?this.selectedIndex_=-1:this.selectedIndex_>n&&this.selectedIndex_--;break}return t&&this.trigger({qualityLevel:e,type:"removequalitylevel"}),t}getQualityLevelById(e){for(let t=0,n=this.length;t<n;t++){const i=this[t];if(i.id===e)return i}return null}dispose(){this.selectedIndex_=-1,this.levels_.length=0}}ib.prototype.allowedEvents_={change:"change",addqualitylevel:"addqualitylevel",removequalitylevel:"removequalitylevel"};for(const r in ib.prototype.allowedEvents_)ib.prototype["on"+r]=null;var dU="4.1.0";const Hde=function(r,e){const t=r.qualityLevels,n=new ib,i=function(){n.dispose(),r.qualityLevels=t,r.off("dispose",i)};return r.on("dispose",i),r.qualityLevels=()=>n,r.qualityLevels.VERSION=dU,n},hU=function(r){return Hde(this,Se.obj.merge({},r))};Se.registerPlugin("qualityLevels",hU);hU.VERSION=dU;/*! @name @videojs/http-streaming @version 3.15.0 @license Apache-2.0 */const Ra=pv,sb=(r,e)=>e&&e.responseURL&&r!==e.responseURL?e.responseURL:r,ul=r=>Se.log.debug?Se.log.debug.bind(Se,"VHS:",`${r} >`):function(){};function An(...r){const e=Se.obj||Se;return(e.merge||e.mergeOptions).apply(e,r)}function xs(...r){const e=Se.time||Se;return(e.createTimeRanges||e.createTimeRanges).apply(e,r)}function Vde(r){if(r.length===0)return"Buffered Ranges are empty";let e=`Buffered Ranges: 
`;for(let t=0;t<r.length;t++){const n=r.start(t),i=r.end(t);e+=`${n} --> ${i}. Duration (${i-n})
`}return e}const _u=1/30,bu=_u*3,fU=function(r,e){const t=[];let n;if(r&&r.length)for(n=0;n<r.length;n++)e(r.start(n),r.end(n))&&t.push([r.start(n),r.end(n)]);return xs(t)},hp=function(r,e){return fU(r,function(t,n){return t-bu<=e&&n+bu>=e})},Hy=function(r,e){return fU(r,function(t){return t-_u>=e})},Wde=function(r){if(r.length<2)return xs();const e=[];for(let t=1;t<r.length;t++){const n=r.end(t-1),i=r.start(t);e.push([n,i])}return xs(e)},qde=function(r,e){let t=null,n=null,i=0;const s=[],a=[];if(!r||!r.length||!e||!e.length)return xs();let o=r.length;for(;o--;)s.push({time:r.start(o),type:"start"}),s.push({time:r.end(o),type:"end"});for(o=e.length;o--;)s.push({time:e.start(o),type:"start"}),s.push({time:e.end(o),type:"end"});for(s.sort(function(l,u){return l.time-u.time}),o=0;o<s.length;o++)s[o].type==="start"?(i++,i===2&&(t=s[o].time)):s[o].type==="end"&&(i--,i===1&&(n=s[o].time)),t!==null&&n!==null&&(a.push([t,n]),t=null,n=null);return xs(a)},pU=r=>{const e=[];if(!r||!r.length)return"";for(let t=0;t<r.length;t++)e.push(r.start(t)+" => "+r.end(t));return e.join(", ")},Gde=function(r,e,t=1){return((r.length?r.end(r.length-1):0)-e)/t},Vh=r=>{const e=[];for(let t=0;t<r.length;t++)e.push({start:r.start(t),end:r.end(t)});return e},Kde=function(r,e){if(r===e)return!1;if(!r&&e||!e&&r||r.length!==e.length)return!0;for(let t=0;t<r.length;t++)if(r.start(t)!==e.start(t)||r.end(t)!==e.end(t))return!0;return!1},MC=function(r){if(!(!r||!r.length||!r.end))return r.end(r.length-1)},vA=function(r,e){let t=0;if(!r||!r.length)return t;for(let n=0;n<r.length;n++){const i=r.start(n),s=r.end(n);if(!(e>s)){if(e>i&&e<=s){t+=s-e;continue}t+=s-i}}return t},yA=(r,e)=>{if(!e.preload)return e.duration;let t=0;return(e.parts||[]).forEach(function(n){t+=n.duration}),(e.preloadHints||[]).forEach(function(n){n.type==="PART"&&(t+=r.partTargetDuration)}),t},A2=r=>(r.segments||[]).reduce((e,t,n)=>(t.parts?t.parts.forEach(function(i,s){e.push({duration:i.duration,segmentIndex:n,partIndex:s,part:i,segment:t})}):e.push({duration:t.duration,segmentIndex:n,partIndex:null,segment:t,part:null}),e),[]),mU=r=>{const e=r.segments&&r.segments.length&&r.segments[r.segments.length-1];return e&&e.parts||[]},gU=({preloadSegment:r})=>{if(!r)return;const{parts:e,preloadHints:t}=r;let n=(t||[]).reduce((i,s)=>i+(s.type==="PART"?1:0),0);return n+=e&&e.length?e.length:0,n},vU=(r,e)=>{if(e.endList)return 0;if(r&&r.suggestedPresentationDelay)return r.suggestedPresentationDelay;const t=mU(e).length>0;return t&&e.serverControl&&e.serverControl.partHoldBack?e.serverControl.partHoldBack:t&&e.partTargetDuration?e.partTargetDuration*3:e.serverControl&&e.serverControl.holdBack?e.serverControl.holdBack:e.targetDuration?e.targetDuration*3:0},Xde=function(r,e){let t=0,n=e-r.mediaSequence,i=r.segments[n];if(i){if(typeof i.start<"u")return{result:i.start,precise:!0};if(typeof i.end<"u")return{result:i.end-i.duration,precise:!0}}for(;n--;){if(i=r.segments[n],typeof i.end<"u")return{result:t+i.end,precise:!0};if(t+=yA(r,i),typeof i.start<"u")return{result:t+i.start,precise:!0}}return{result:t,precise:!1}},Yde=function(r,e){let t=0,n,i=e-r.mediaSequence;for(;i<r.segments.length;i++){if(n=r.segments[i],typeof n.start<"u")return{result:n.start-t,precise:!0};if(t+=yA(r,n),typeof n.end<"u")return{result:n.end-t,precise:!0}}return{result:-1,precise:!1}},yU=function(r,e,t){if(typeof e>"u"&&(e=r.mediaSequence+r.segments.length),e<r.mediaSequence)return 0;const n=Xde(r,e);if(n.precise)return n.result;const i=Yde(r,e);return i.precise?i.result:n.result+t},xU=function(r,e,t){if(!r)return 0;if(typeof t!="number"&&(t=0),typeof e>"u"){if(r.totalDuration)return r.totalDuration;if(!r.endList)return X.Infinity}return yU(r,e,t)},og=function({defaultDuration:r,durationList:e,startIndex:t,endIndex:n}){let i=0;if(t>n&&([t,n]=[n,t]),t<0){for(let s=t;s<Math.min(0,n);s++)i+=r;t=0}for(let s=t;s<n;s++)i+=e[s].duration;return i},_U=function(r,e,t,n){if(!r||!r.segments)return null;if(r.endList)return xU(r);if(e===null)return null;e=e||0;let i=yU(r,r.mediaSequence+r.segments.length,e);return t&&(n=typeof n=="number"?n:vU(null,r),i-=n),Math.max(0,i)},Qde=function(r,e,t){const i=e||0;let s=_U(r,e,!0,t);return s===null?xs():(s<i&&(s=i),xs(i,s))},Jde=function({playlist:r,currentTime:e,startingSegmentIndex:t,startingPartIndex:n,startTime:i,exactManifestTimings:s}){let a=e-i;const o=A2(r);let l=0;for(let u=0;u<o.length;u++){const c=o[u];if(t===c.segmentIndex&&!(typeof n=="number"&&typeof c.partIndex=="number"&&n!==c.partIndex)){l=u;break}}if(a<0){if(l>0)for(let u=l-1;u>=0;u--){const c=o[u];if(a+=c.duration,s){if(a<0)continue}else if(a+_u<=0)continue;return{partIndex:c.partIndex,segmentIndex:c.segmentIndex,startTime:i-og({defaultDuration:r.targetDuration,durationList:o,startIndex:l,endIndex:u})}}return{partIndex:o[0]&&o[0].partIndex||null,segmentIndex:o[0]&&o[0].segmentIndex||0,startTime:e}}if(l<0){for(let u=l;u<0;u++)if(a-=r.targetDuration,a<0)return{partIndex:o[0]&&o[0].partIndex||null,segmentIndex:o[0]&&o[0].segmentIndex||0,startTime:e};l=0}for(let u=l;u<o.length;u++){const c=o[u];a-=c.duration;const h=c.duration>_u,f=a===0,g=h&&a+_u>=0;if(!((f||g)&&u!==o.length-1)){if(s){if(a>0)continue}else if(a-_u>=0)continue;return{partIndex:c.partIndex,segmentIndex:c.segmentIndex,startTime:i+og({defaultDuration:r.targetDuration,durationList:o,startIndex:l,endIndex:u})}}}return{segmentIndex:o[o.length-1].segmentIndex,partIndex:o[o.length-1].partIndex,startTime:e}},bU=function(r){return r.excludeUntil&&r.excludeUntil>Date.now()},xA=function(r){return r.excludeUntil&&r.excludeUntil===1/0},VS=function(r){const e=bU(r);return!r.disabled&&!e},Zde=function(r){return r.disabled},ehe=function(r){for(let e=0;e<r.segments.length;e++)if(r.segments[e].key)return!0;return!1},SU=function(r,e){return e.attributes&&e.attributes[r]},the=function(r,e,t,n=0){return SU("BANDWIDTH",t)?(r*t.attributes.BANDWIDTH-n*8)/e:NaN},D2=(r,e)=>{if(r.playlists.length===1)return!0;const t=e.attributes.BANDWIDTH||Number.MAX_VALUE;return r.playlists.filter(n=>VS(n)?(n.attributes.BANDWIDTH||0)<t:!1).length===0},_A=(r,e)=>!r&&!e||!r&&e||r&&!e?!1:!!(r===e||r.id&&e.id&&r.id===e.id||r.resolvedUri&&e.resolvedUri&&r.resolvedUri===e.resolvedUri||r.uri&&e.uri&&r.uri===e.uri),mM=function(r,e){const t=r&&r.mediaGroups&&r.mediaGroups.AUDIO||{};let n=!1;for(const i in t){for(const s in t[i])if(n=e(t[i][s]),n)break;if(n)break}return!!n},bv=r=>{if(!r||!r.playlists||!r.playlists.length)return mM(r,t=>t.playlists&&t.playlists.length||t.uri);for(let e=0;e<r.playlists.length;e++){const t=r.playlists[e],n=t.attributes&&t.attributes.CODECS;if(!(n&&n.split(",").every(s=>Uk(s))||mM(r,s=>_A(t,s))))return!1}return!0};var Oa={liveEdgeDelay:vU,duration:xU,seekable:Qde,getMediaInfoForTime:Jde,isEnabled:VS,isDisabled:Zde,isExcluded:bU,isIncompatible:xA,playlistEnd:_U,isAes:ehe,hasAttribute:SU,estimateSegmentRequestTime:the,isLowestEnabledRendition:D2,isAudioOnly:bv,playlistMatch:_A,segmentDurationWithParts:yA};const{log:TU}=Se,Pp=(r,e)=>`${r}-${e}`,CU=(r,e,t)=>`placeholder-uri-${r}-${e}-${t}`,rhe=({onwarn:r,oninfo:e,manifestString:t,customTagParsers:n=[],customTagMappers:i=[],llhls:s})=>{const a=new D5;r&&a.on("warn",r),e&&a.on("info",e),n.forEach(u=>a.addParser(u)),i.forEach(u=>a.addTagMapper(u)),a.push(t),a.end();const o=a.manifest;if(s||(["preloadSegment","skip","serverControl","renditionReports","partInf","partTargetDuration"].forEach(function(u){o.hasOwnProperty(u)&&delete o[u]}),o.segments&&o.segments.forEach(function(u){["parts","preloadHints"].forEach(function(c){u.hasOwnProperty(c)&&delete u[c]})})),!o.targetDuration){let u=10;o.segments&&o.segments.length&&(u=o.segments.reduce((c,h)=>Math.max(c,h.duration),0)),r&&r({message:`manifest has no targetDuration defaulting to ${u}`}),o.targetDuration=u}const l=mU(o);if(l.length&&!o.partTargetDuration){const u=l.reduce((c,h)=>Math.max(c,h.duration),0);r&&(r({message:`manifest has no partTargetDuration defaulting to ${u}`}),TU.error("LL-HLS manifest has parts but lacks required #EXT-X-PART-INF:PART-TARGET value. See https://datatracker.ietf.org/doc/html/draft-pantos-hls-rfc8216bis-09#section-4.4.3.7. Playback is not guaranteed.")),o.partTargetDuration=u}return o},Rm=(r,e)=>{r.mediaGroups&&["AUDIO","SUBTITLES"].forEach(t=>{if(r.mediaGroups[t])for(const n in r.mediaGroups[t])for(const i in r.mediaGroups[t][n]){const s=r.mediaGroups[t][n][i];e(s,t,n,i)}})},wU=({playlist:r,uri:e,id:t})=>{r.id=t,r.playlistErrors_=0,e&&(r.uri=e),r.attributes=r.attributes||{}},nhe=r=>{let e=r.playlists.length;for(;e--;){const t=r.playlists[e];wU({playlist:t,id:Pp(e,t.uri)}),t.resolvedUri=Ra(r.uri,t.uri),r.playlists[t.id]=t,r.playlists[t.uri]=t,t.attributes.BANDWIDTH||TU.warn("Invalid playlist STREAM-INF detected. Missing BANDWIDTH attribute.")}},ihe=r=>{Rm(r,e=>{e.uri&&(e.resolvedUri=Ra(r.uri,e.uri))})},she=(r,e)=>{const t=Pp(0,e),n={mediaGroups:{AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},uri:X.location.href,resolvedUri:X.location.href,playlists:[{uri:e,id:t,resolvedUri:e,attributes:{}}]};return n.playlists[t]=n.playlists[0],n.playlists[e]=n.playlists[0],n},EU=(r,e,t=CU)=>{r.uri=e;for(let i=0;i<r.playlists.length;i++)if(!r.playlists[i].uri){const s=`placeholder-uri-${i}`;r.playlists[i].uri=s}const n=bv(r);Rm(r,(i,s,a,o)=>{if(!i.playlists||!i.playlists.length){if(n&&s==="AUDIO"&&!i.uri)for(let l=0;l<r.playlists.length;l++){const u=r.playlists[l];if(u.attributes&&u.attributes.AUDIO&&u.attributes.AUDIO===a)return}i.playlists=[sr({},i)]}i.playlists.forEach(function(l,u){const c=t(s,a,o,l),h=Pp(u,c);l.uri?l.resolvedUri=l.resolvedUri||Ra(r.uri,l.uri):(l.uri=u===0?c:h,l.resolvedUri=l.uri),l.id=l.id||h,l.attributes=l.attributes||{},r.playlists[l.id]=l,r.playlists[l.uri]=l})}),nhe(r),ihe(r)};let gM=class{constructor(){this.offset_=null,this.pendingDateRanges_=new Map,this.processedDateRanges_=new Map}setOffset(e=[]){if(this.offset_!==null||!e.length)return;const[t]=e;t.programDateTime!==void 0&&(this.offset_=t.programDateTime/1e3)}setPendingDateRanges(e=[]){if(!e.length)return;const[t]=e,n=t.startDate.getTime();this.trimProcessedDateRanges_(n),this.pendingDateRanges_=e.reduce((i,s)=>(i.set(s.id,s),i),new Map)}processDateRange(e){this.pendingDateRanges_.delete(e.id),this.processedDateRanges_.set(e.id,e)}getDateRangesToProcess(){if(this.offset_===null)return[];const e={},t=[];this.pendingDateRanges_.forEach((n,i)=>{if(!this.processedDateRanges_.has(i)&&(n.startTime=n.startDate.getTime()/1e3-this.offset_,n.processDateRange=()=>this.processDateRange(n),t.push(n),!!n.class))if(e[n.class]){const s=e[n.class].push(n);n.classListIndex=s-1}else e[n.class]=[n],n.classListIndex=0});for(const n of t){const i=e[n.class]||[];n.endDate?n.endTime=n.endDate.getTime()/1e3-this.offset_:n.endOnNext&&i[n.classListIndex+1]?n.endTime=i[n.classListIndex+1].startTime:n.duration?n.endTime=n.startTime+n.duration:n.plannedDuration?n.endTime=n.startTime+n.plannedDuration:n.endTime=n.startTime}return t}trimProcessedDateRanges_(e){new Map(this.processedDateRanges_).forEach((n,i)=>{n.startDate.getTime()<e&&this.processedDateRanges_.delete(i)})}};const kU=22,tf=({requestType:r,request:e,error:t,parseFailure:n})=>{const i=e.status<200||e.status>299,s=e.status>=400&&e.status<=499,a={uri:e.uri,requestType:r},o=i&&!s||n;if(t&&s)a.error=sr({},t),a.errorType=Se.Error.NetworkRequestFailed;else if(e.aborted)a.errorType=Se.Error.NetworkRequestAborted;else if(e.timedout)a.erroType=Se.Error.NetworkRequestTimeout;else if(o){const l=n?Se.Error.NetworkBodyParserFailed:Se.Error.NetworkBadStatus;a.errorType=l,a.status=e.status,a.headers=e.headers}return a},{EventTarget:ahe}=Se,ohe=(r,e)=>{if(e.endList||!e.serverControl)return r;const t={};if(e.serverControl.canBlockReload){const{preloadSegment:n}=e;let i=e.mediaSequence+e.segments.length;if(n){const s=n.parts||[],a=gU(e)-1;a>-1&&a!==s.length-1&&(t._HLS_part=a),(a>-1||s.length)&&i--}t._HLS_msn=i}if(e.serverControl&&e.serverControl.canSkipUntil&&(t._HLS_skip=e.serverControl.canSkipDateranges?"v2":"YES"),Object.keys(t).length){const n=new X.URL(r);["_HLS_skip","_HLS_msn","_HLS_part"].forEach(function(i){t.hasOwnProperty(i)&&n.searchParams.set(i,t[i])}),r=n.toString()}return r},lhe=(r,e)=>{if(!r)return e;const t=An(r,e);if(r.preloadHints&&!e.preloadHints&&delete t.preloadHints,r.parts&&!e.parts)delete t.parts;else if(r.parts&&e.parts)for(let n=0;n<e.parts.length;n++)r.parts&&r.parts[n]&&(t.parts[n]=An(r.parts[n],e.parts[n]));return!r.skipped&&e.skipped&&(t.skipped=!1),r.preload&&!e.preload&&(t.preload=!1),t},uhe=(r,e,t)=>{const n=r.slice(),i=e.slice();t=t||0;const s=[];let a;for(let o=0;o<i.length;o++){const l=n[o+t],u=i[o];l?(a=l.map||a,s.push(lhe(l,u))):(a&&!u.map&&(u.map=a),s.push(u))}return s},AU=(r,e)=>{!r.resolvedUri&&r.uri&&(r.resolvedUri=Ra(e,r.uri)),r.key&&!r.key.resolvedUri&&(r.key.resolvedUri=Ra(e,r.key.uri)),r.map&&!r.map.resolvedUri&&(r.map.resolvedUri=Ra(e,r.map.uri)),r.map&&r.map.key&&!r.map.key.resolvedUri&&(r.map.key.resolvedUri=Ra(e,r.map.key.uri)),r.parts&&r.parts.length&&r.parts.forEach(t=>{t.resolvedUri||(t.resolvedUri=Ra(e,t.uri))}),r.preloadHints&&r.preloadHints.length&&r.preloadHints.forEach(t=>{t.resolvedUri||(t.resolvedUri=Ra(e,t.uri))})},DU=function(r){const e=r.segments||[],t=r.preloadSegment;if(t&&t.parts&&t.parts.length){if(t.preloadHints){for(let n=0;n<t.preloadHints.length;n++)if(t.preloadHints[n].type==="MAP")return e}t.duration=r.targetDuration,t.preload=!0,e.push(t)}return e},IU=(r,e)=>r===e||r.segments&&e.segments&&r.segments.length===e.segments.length&&r.endList===e.endList&&r.mediaSequence===e.mediaSequence&&r.preloadSegment===e.preloadSegment,I2=(r,e,t=IU)=>{const n=An(r,{}),i=n.playlists[e.id];if(!i||t(i,e))return null;e.segments=DU(e);const s=An(i,e);if(s.preloadSegment&&!e.preloadSegment&&delete s.preloadSegment,i.segments){if(e.skip){e.segments=e.segments||[];for(let a=0;a<e.skip.skippedSegments;a++)e.segments.unshift({skipped:!0})}s.segments=uhe(i.segments,e.segments,e.mediaSequence-i.mediaSequence)}s.segments.forEach(a=>{AU(a,s.resolvedUri)});for(let a=0;a<n.playlists.length;a++)n.playlists[a].id===e.id&&(n.playlists[a]=s);return n.playlists[e.id]=s,n.playlists[e.uri]=s,Rm(r,(a,o,l,u)=>{if(a.playlists)for(let c=0;c<a.playlists.length;c++)e.id===a.playlists[c].id&&(a.playlists[c]=s)}),n},P2=(r,e)=>{const t=r.segments||[],n=t[t.length-1],i=n&&n.parts&&n.parts[n.parts.length-1],s=i&&i.duration||n&&n.duration;return e&&s?s*1e3:(r.partTargetDuration||r.targetDuration||10)*500},vM=(r,e,t)=>{if(!r)return;const n=[];return r.forEach(i=>{if(!i.attributes)return;const{BANDWIDTH:s,RESOLUTION:a,CODECS:o}=i.attributes;n.push({id:i.id,bandwidth:s,resolution:a,codecs:o})}),{type:e,isLive:t,renditions:n}};let fp=class extends ahe{constructor(e,t,n={}){if(super(),!e)throw new Error("A non-empty playlist URL or object is required");this.logger_=ul("PlaylistLoader");const{withCredentials:i=!1}=n;this.src=e,this.vhs_=t,this.withCredentials=i,this.addDateRangesToTextTrack_=n.addDateRangesToTextTrack;const s=t.options_;this.customTagParsers=s&&s.customTagParsers||[],this.customTagMappers=s&&s.customTagMappers||[],this.llhls=s&&s.llhls,this.dateRangesStorage_=new gM,this.state="HAVE_NOTHING",this.handleMediaupdatetimeout_=this.handleMediaupdatetimeout_.bind(this),this.on("mediaupdatetimeout",this.handleMediaupdatetimeout_),this.on("loadedplaylist",this.handleLoadedPlaylist_.bind(this))}handleLoadedPlaylist_(){const e=this.media();if(!e)return;this.dateRangesStorage_.setOffset(e.segments),this.dateRangesStorage_.setPendingDateRanges(e.dateRanges);const t=this.dateRangesStorage_.getDateRangesToProcess();!t.length||!this.addDateRangesToTextTrack_||this.addDateRangesToTextTrack_(t)}handleMediaupdatetimeout_(){if(this.state!=="HAVE_METADATA")return;const e=this.media();let t=Ra(this.main.uri,e.uri);this.llhls&&(t=ohe(t,e)),this.state="HAVE_CURRENT_METADATA",this.request=this.vhs_.xhr({uri:t,withCredentials:this.withCredentials,requestType:"hls-playlist"},(n,i)=>{if(this.request){if(n)return this.playlistRequestError(this.request,this.media(),"HAVE_METADATA");this.haveMetadata({playlistString:this.request.responseText,url:this.media().uri,id:this.media().id})}})}playlistRequestError(e,t,n){const{uri:i,id:s}=t;this.request=null,n&&(this.state=n),this.error={playlist:this.main.playlists[s],status:e.status,message:`HLS playlist request error at URL: ${i}.`,responseText:e.responseText,code:e.status>=500?4:2,metadata:tf({requestType:e.requestType,request:e,error:e.error})},this.trigger("error")}parseManifest_({url:e,manifestString:t}){try{return rhe({onwarn:({message:n})=>this.logger_(`m3u8-parser warn for ${e}: ${n}`),oninfo:({message:n})=>this.logger_(`m3u8-parser info for ${e}: ${n}`),manifestString:t,customTagParsers:this.customTagParsers,customTagMappers:this.customTagMappers,llhls:this.llhls})}catch(n){this.error=n,this.error.metadata={errorType:Se.Error.StreamingHlsPlaylistParserError,error:n}}}haveMetadata({playlistString:e,playlistObject:t,url:n,id:i}){this.request=null,this.state="HAVE_METADATA";const s={playlistInfo:{type:"media",uri:n}};this.trigger({type:"playlistparsestart",metadata:s});const a=t||this.parseManifest_({url:n,manifestString:e});a.lastRequest=Date.now(),wU({playlist:a,uri:n,id:i});const o=I2(this.main,a);this.targetDuration=a.partTargetDuration||a.targetDuration,this.pendingMedia_=null,o?(this.main=o,this.media_=this.main.playlists[i]):this.trigger("playlistunchanged"),this.updateMediaUpdateTimeout_(P2(this.media(),!!o)),s.parsedPlaylist=vM(this.main.playlists,s.playlistInfo.type,!this.media_.endList),this.trigger({type:"playlistparsecomplete",metadata:s}),this.trigger("loadedplaylist")}dispose(){this.trigger("dispose"),this.stopRequest(),X.clearTimeout(this.mediaUpdateTimeout),X.clearTimeout(this.finalRenditionTimeout),this.dateRangesStorage_=new gM,this.off()}stopRequest(){if(this.request){const e=this.request;this.request=null,e.onreadystatechange=null,e.abort()}}media(e,t){if(!e)return this.media_;if(this.state==="HAVE_NOTHING")throw new Error("Cannot switch media playlist from "+this.state);if(typeof e=="string"){if(!this.main.playlists[e])throw new Error("Unknown playlist URI: "+e);e=this.main.playlists[e]}if(X.clearTimeout(this.finalRenditionTimeout),t){const o=(e.partTargetDuration||e.targetDuration)/2*1e3||5e3;this.finalRenditionTimeout=X.setTimeout(this.media.bind(this,e,!1),o);return}const n=this.state,i=!this.media_||e.id!==this.media_.id,s=this.main.playlists[e.id];if(s&&s.endList||e.endList&&e.segments.length){this.request&&(this.request.onreadystatechange=null,this.request.abort(),this.request=null),this.state="HAVE_METADATA",this.media_=e,i&&(this.trigger("mediachanging"),n==="HAVE_MAIN_MANIFEST"?this.trigger("loadedmetadata"):this.trigger("mediachange"));return}if(this.updateMediaUpdateTimeout_(P2(e,!0)),!i)return;if(this.state="SWITCHING_MEDIA",this.request){if(e.resolvedUri===this.request.url)return;this.request.onreadystatechange=null,this.request.abort(),this.request=null}this.media_&&this.trigger("mediachanging"),this.pendingMedia_=e;const a={playlistInfo:{type:"media",uri:e.uri}};this.trigger({type:"playlistrequeststart",metadata:a}),this.request=this.vhs_.xhr({uri:e.resolvedUri,withCredentials:this.withCredentials,requestType:"hls-playlist"},(o,l)=>{if(this.request){if(e.lastRequest=Date.now(),e.resolvedUri=sb(e.resolvedUri,l),o)return this.playlistRequestError(this.request,e,n);this.trigger({type:"playlistrequestcomplete",metadata:a}),this.haveMetadata({playlistString:l.responseText,url:e.uri,id:e.id}),n==="HAVE_MAIN_MANIFEST"?this.trigger("loadedmetadata"):this.trigger("mediachange")}})}pause(){this.mediaUpdateTimeout&&(X.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null),this.stopRequest(),this.state==="HAVE_NOTHING"&&(this.started=!1),this.state==="SWITCHING_MEDIA"?this.media_?this.state="HAVE_METADATA":this.state="HAVE_MAIN_MANIFEST":this.state==="HAVE_CURRENT_METADATA"&&(this.state="HAVE_METADATA")}load(e){this.mediaUpdateTimeout&&(X.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null);const t=this.media();if(e){const n=t?(t.partTargetDuration||t.targetDuration)/2*1e3:5e3;this.mediaUpdateTimeout=X.setTimeout(()=>{this.mediaUpdateTimeout=null,this.load()},n);return}if(!this.started){this.start();return}t&&!t.endList?this.trigger("mediaupdatetimeout"):this.trigger("loadedplaylist")}updateMediaUpdateTimeout_(e){this.mediaUpdateTimeout&&(X.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null),!(!this.media()||this.media().endList)&&(this.mediaUpdateTimeout=X.setTimeout(()=>{this.mediaUpdateTimeout=null,this.trigger("mediaupdatetimeout"),this.updateMediaUpdateTimeout_(e)},e))}start(){if(this.started=!0,typeof this.src=="object"){this.src.uri||(this.src.uri=X.location.href),this.src.resolvedUri=this.src.uri,setTimeout(()=>{this.setupInitialPlaylist(this.src)},0);return}const e={playlistInfo:{type:"multivariant",uri:this.src}};this.trigger({type:"playlistrequeststart",metadata:e}),this.request=this.vhs_.xhr({uri:this.src,withCredentials:this.withCredentials,requestType:"hls-playlist"},(t,n)=>{if(!this.request)return;if(this.request=null,t)return this.error={status:n.status,message:`HLS playlist request error at URL: ${this.src}.`,responseText:n.responseText,code:2,metadata:tf({requestType:n.requestType,request:n,error:t})},this.state==="HAVE_NOTHING"&&(this.started=!1),this.trigger("error");this.trigger({type:"playlistrequestcomplete",metadata:e}),this.src=sb(this.src,n),this.trigger({type:"playlistparsestart",metadata:e});const i=this.parseManifest_({manifestString:n.responseText,url:this.src});e.parsedPlaylist=vM(i.playlists,e.playlistInfo.type,!1),this.trigger({type:"playlistparsecomplete",metadata:e}),this.setupInitialPlaylist(i)})}srcUri(){return typeof this.src=="string"?this.src:this.src.uri}setupInitialPlaylist(e){if(this.state="HAVE_MAIN_MANIFEST",e.playlists){this.main=e,EU(this.main,this.srcUri()),e.playlists.forEach(n=>{n.segments=DU(n),n.segments.forEach(i=>{AU(i,n.resolvedUri)})}),this.trigger("loadedplaylist"),this.request||this.media(this.main.playlists[0]);return}const t=this.srcUri()||X.location.href;this.main=she(e,t),this.haveMetadata({playlistObject:e,url:t,id:this.main.playlists[0].id}),this.trigger("loadedmetadata")}updateOrDeleteClone(e,t){const n=this.main,i=e.ID;let s=n.playlists.length;for(;s--;){const a=n.playlists[s];if(a.attributes["PATHWAY-ID"]===i){const o=a.resolvedUri,l=a.id;if(t){const u=this.createCloneURI_(a.resolvedUri,e),c=Pp(i,u),h=this.createCloneAttributes_(i,a.attributes),f=this.createClonePlaylist_(a,c,e,h);n.playlists[s]=f,n.playlists[c]=f,n.playlists[u]=f}else n.playlists.splice(s,1);delete n.playlists[l],delete n.playlists[o]}}this.updateOrDeleteCloneMedia(e,t)}updateOrDeleteCloneMedia(e,t){const n=this.main,i=e.ID;["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(s=>{if(!(!n.mediaGroups[s]||!n.mediaGroups[s][i])){for(const a in n.mediaGroups[s])if(a===i){for(const o in n.mediaGroups[s][a])n.mediaGroups[s][a][o].playlists.forEach((u,c)=>{const h=n.playlists[u.id],f=h.id,g=h.resolvedUri;delete n.playlists[f],delete n.playlists[g]});delete n.mediaGroups[s][a]}}}),t&&this.createClonedMediaGroups_(e)}addClonePathway(e,t={}){const n=this.main,i=n.playlists.length,s=this.createCloneURI_(t.resolvedUri,e),a=Pp(e.ID,s),o=this.createCloneAttributes_(e.ID,t.attributes),l=this.createClonePlaylist_(t,a,e,o);n.playlists[i]=l,n.playlists[a]=l,n.playlists[s]=l,this.createClonedMediaGroups_(e)}createClonedMediaGroups_(e){const t=e.ID,n=e["BASE-ID"],i=this.main;["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(s=>{if(!(!i.mediaGroups[s]||i.mediaGroups[s][t]))for(const a in i.mediaGroups[s]){if(a===n)i.mediaGroups[s][t]={};else continue;for(const o in i.mediaGroups[s][a]){const l=i.mediaGroups[s][a][o];i.mediaGroups[s][t][o]=sr({},l);const u=i.mediaGroups[s][t][o],c=this.createCloneURI_(l.resolvedUri,e);u.resolvedUri=c,u.uri=c,u.playlists=[],l.playlists.forEach((h,f)=>{const g=i.playlists[h.id],v=CU(s,t,o),y=Pp(t,v);if(g&&!i.playlists[y]){const _=this.createClonePlaylist_(g,y,e),C=_.resolvedUri;i.playlists[y]=_,i.playlists[C]=_}u.playlists[f]=this.createClonePlaylist_(h,y,e)})}}})}createClonePlaylist_(e,t,n,i){const s=this.createCloneURI_(e.resolvedUri,n),a={resolvedUri:s,uri:s,id:t};return e.segments&&(a.segments=[]),i&&(a.attributes=i),An(e,a)}createCloneURI_(e,t){const n=new URL(e);n.hostname=t["URI-REPLACEMENT"].HOST;const i=t["URI-REPLACEMENT"].PARAMS;for(const s of Object.keys(i))n.searchParams.set(s,i[s]);return n.href}createCloneAttributes_(e,t){const n={"PATHWAY-ID":e};return["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(i=>{t[i]&&(n[i]=e)}),n}getKeyIdSet(e){if(e.contentProtection){const t=new Set;for(const n in e.contentProtection){const i=e.contentProtection[n].attributes.keyId;i&&t.add(i.toLowerCase())}return t}}};const R2=function(r,e,t,n){const i=r.responseType==="arraybuffer"?r.response:r.responseText;!e&&i&&(r.responseTime=Date.now(),r.roundTripTime=r.responseTime-r.requestTime,r.bytesReceived=i.byteLength||i.length,r.bandwidth||(r.bandwidth=Math.floor(r.bytesReceived/r.roundTripTime*8*1e3))),t.headers&&(r.responseHeaders=t.headers),e&&e.code==="ETIMEDOUT"&&(r.timedout=!0),!e&&!r.aborted&&t.statusCode!==200&&t.statusCode!==206&&t.statusCode!==0&&(e=new Error("XHR Failed with a response of: "+(r&&(i||r.responseText)))),n(e,r)},che=(r,e)=>{if(!r||!r.size)return;let t=e;return r.forEach(n=>{t=n(t)}),t},dhe=(r,e,t,n)=>{!r||!r.size||r.forEach(i=>{i(e,t,n)})},PU=function(){const r=function e(t,n){t=An({timeout:45e3},t);const i=e.beforeRequest||Se.Vhs.xhr.beforeRequest,s=e._requestCallbackSet||Se.Vhs.xhr._requestCallbackSet||new Set,a=e._responseCallbackSet||Se.Vhs.xhr._responseCallbackSet;i&&typeof i=="function"&&(Se.log.warn("beforeRequest is deprecated, use onRequest instead."),s.add(i));const o=Se.Vhs.xhr.original===!0?Se.xhr:Se.Vhs.xhr,l=che(s,t);s.delete(i);const u=o(l||t,function(h,f){return dhe(a,u,h,f),R2(u,h,f,n)}),c=u.abort;return u.abort=function(){return u.aborted=!0,c.apply(u,arguments)},u.uri=t.uri,u.requestType=t.requestType,u.requestTime=Date.now(),u};return r.original=!0,r},hhe=function(r){let e;const t=r.offset;return typeof r.offset=="bigint"||typeof r.length=="bigint"?e=X.BigInt(r.offset)+X.BigInt(r.length)-X.BigInt(1):e=r.offset+r.length-1,"bytes="+t+"-"+e},L2=function(r){const e={};return r.byterange&&(e.Range=hhe(r.byterange)),e},fhe=function(r,e){return r.start(e)+"-"+r.end(e)},phe=function(r,e){const t=r.toString(16);return"00".substring(0,2-t.length)+t+(e%2?" ":"")},mhe=function(r){return r>=32&&r<126?String.fromCharCode(r):"."},RU=function(r){const e={};return Object.keys(r).forEach(t=>{const n=r[t];$k(n)?e[t]={bytes:n.buffer,byteOffset:n.byteOffset,byteLength:n.byteLength}:e[t]=n}),e},ab=function(r){const e=r.byterange||{length:1/0,offset:0};return[e.length,e.offset,r.resolvedUri].join(",")},LU=function(r){return r.resolvedUri},OU=r=>{const e=Array.prototype.slice.call(r),t=16;let n="",i,s;for(let a=0;a<e.length/t;a++)i=e.slice(a*t,a*t+t).map(phe).join(""),s=e.slice(a*t,a*t+t).map(mhe).join(""),n+=i+" "+s+`
`;return n},ghe=({bytes:r})=>OU(r),vhe=r=>{let e="",t;for(t=0;t<r.length;t++)e+=fhe(r,t)+" ";return e};var yhe=Object.freeze({__proto__:null,createTransferableMessage:RU,initSegmentId:ab,segmentKeyId:LU,hexDump:OU,tagDump:ghe,textRanges:vhe});const MU=.25,xhe=(r,e)=>{if(!e.dateTimeObject)return null;const t=e.videoTimingInfo.transmuxerPrependedSeconds,i=e.videoTimingInfo.transmuxedPresentationStart+t,s=r-i;return new Date(e.dateTimeObject.getTime()+s*1e3)},_he=r=>r.transmuxedPresentationEnd-r.transmuxedPresentationStart-r.transmuxerPrependedSeconds,bhe=(r,e)=>{let t;try{t=new Date(r)}catch{return null}if(!e||!e.segments||e.segments.length===0)return null;let n=e.segments[0];if(t<new Date(n.dateTimeObject))return null;for(let l=0;l<e.segments.length-1;l++){n=e.segments[l];const u=new Date(e.segments[l+1].dateTimeObject);if(t<u)break}const i=e.segments[e.segments.length-1],s=i.dateTimeObject,a=i.videoTimingInfo?_he(i.videoTimingInfo):i.duration+i.duration*MU,o=new Date(s.getTime()+a*1e3);return t>o?null:(t>new Date(s)&&(n=i),{segment:n,estimatedStart:n.videoTimingInfo?n.videoTimingInfo.transmuxedPresentationStart:Oa.duration(e,e.mediaSequence+e.segments.indexOf(n)),type:n.videoTimingInfo?"accurate":"estimate"})},She=(r,e)=>{if(!e||!e.segments||e.segments.length===0)return null;let t=0,n;for(let s=0;s<e.segments.length&&(n=e.segments[s],t=n.videoTimingInfo?n.videoTimingInfo.transmuxedPresentationEnd:t+n.duration,!(r<=t));s++);const i=e.segments[e.segments.length-1];if(i.videoTimingInfo&&i.videoTimingInfo.transmuxedPresentationEnd<r)return null;if(r>t){if(r>t+i.duration*MU)return null;n=i}return{segment:n,estimatedStart:n.videoTimingInfo?n.videoTimingInfo.transmuxedPresentationStart:t-n.duration,type:n.videoTimingInfo?"accurate":"estimate"}},The=(r,e)=>{let t,n;try{t=new Date(r),n=new Date(e)}catch{}const i=t.getTime();return(n.getTime()-i)/1e3},Che=r=>{if(!r.segments||r.segments.length===0)return!1;for(let e=0;e<r.segments.length;e++)if(!r.segments[e].dateTimeObject)return!1;return!0},whe=({playlist:r,time:e=void 0,callback:t})=>{if(!t)throw new Error("getProgramTime: callback must be provided");if(!r||e===void 0)return t({message:"getProgramTime: playlist and time must be provided"});const n=She(e,r);if(!n)return t({message:"valid programTime was not found"});if(n.type==="estimate")return t({message:"Accurate programTime could not be determined. Please seek to e.seekTime and try again",seekTime:n.estimatedStart});const i={mediaSeconds:e},s=xhe(e,n.segment);return s&&(i.programDateTime=s.toISOString()),t(null,i)},FU=({programTime:r,playlist:e,retryCount:t=2,seekTo:n,pauseAfterSeek:i=!0,tech:s,callback:a})=>{if(!a)throw new Error("seekToProgramTime: callback must be provided");if(typeof r>"u"||!e||!n)return a({message:"seekToProgramTime: programTime, seekTo and playlist must be provided"});if(!e.endList&&!s.hasStarted_)return a({message:"player must be playing a live stream to start buffering"});if(!Che(e))return a({message:"programDateTime tags must be provided in the manifest "+e.resolvedUri});const o=bhe(r,e);if(!o)return a({message:`${r} was not found in the stream`});const l=o.segment,u=The(l.dateTimeObject,r);if(o.type==="estimate"){if(t===0)return a({message:`${r} is not buffered yet. Try again`});n(o.estimatedStart+u),s.one("seeked",()=>{FU({programTime:r,playlist:e,retryCount:t-1,seekTo:n,pauseAfterSeek:i,tech:s,callback:a})});return}const c=l.start+u,h=()=>a(null,s.currentTime());s.one("seeked",h),i&&s.pause(),n(c)},FC=(r,e)=>{if(r.readyState===4)return e()},Ehe=(r,e,t,n)=>{let i=[],s,a=!1;const o=function(h,f,g,v){return f.abort(),a=!0,t(h,f,g,v)},l=function(h,f){if(a)return;if(h)return h.metadata=tf({requestType:n,request:f,error:h}),o(h,f,"",i);const g=f.responseText.substring(i&&i.byteLength||0,f.responseText.length);if(i=R5(i,jk(g,!0)),s=s||cp(i),i.length<10||s&&i.length<s+2)return FC(f,()=>o(h,f,"",i));const v=Cm(i);return v==="ts"&&i.length<188?FC(f,()=>o(h,f,"",i)):!v&&i.length<376?FC(f,()=>o(h,f,"",i)):o(null,f,v,i)},c=e({uri:r,beforeSend(h){h.overrideMimeType("text/plain; charset=x-user-defined"),h.addEventListener("progress",function({total:f,loaded:g}){return R2(h,null,{statusCode:h.status},l)})}},function(h,f){return R2(c,h,f,l)});return c},{EventTarget:khe}=Se,yM=function(r,e){if(!IU(r,e)||r.sidx&&e.sidx&&(r.sidx.offset!==e.sidx.offset||r.sidx.length!==e.sidx.length))return!1;if(!r.sidx&&e.sidx||r.sidx&&!e.sidx||r.segments&&!e.segments||!r.segments&&e.segments)return!1;if(!r.segments&&!e.segments)return!0;for(let t=0;t<r.segments.length;t++){const n=r.segments[t],i=e.segments[t];if(n.uri!==i.uri)return!1;if(!n.byterange&&!i.byterange)continue;const s=n.byterange,a=i.byterange;if(s&&!a||!s&&a||s.offset!==a.offset||s.length!==a.length)return!1}return!0},Ahe=(r,e,t,n)=>{const i=n.attributes.NAME||t;return`placeholder-uri-${r}-${e}-${i}`},Dhe=({mainXml:r,srcUrl:e,clientOffset:t,sidxMapping:n,previousManifest:i})=>{const s=j5(r,{manifestUri:e,clientOffset:t,sidxMapping:n,previousManifest:i});return EU(s,e,Ahe),s},Ihe=(r,e)=>{Rm(r,(t,n,i,s)=>{(!e.mediaGroups[n][i]||!(s in e.mediaGroups[n][i]))&&delete r.mediaGroups[n][i][s]})},Phe=(r,e,t)=>{let n=!0,i=An(r,{duration:e.duration,minimumUpdatePeriod:e.minimumUpdatePeriod,timelineStarts:e.timelineStarts});for(let s=0;s<e.playlists.length;s++){const a=e.playlists[s];if(a.sidx){const l=bf(a.sidx);t&&t[l]&&t[l].sidx&&mv(a,t[l].sidx,a.sidx.resolvedUri)}const o=I2(i,a,yM);o&&(i=o,n=!1)}return Rm(e,(s,a,o,l)=>{if(s.playlists&&s.playlists.length){const u=s.playlists[0].id,c=I2(i,s.playlists[0],yM);c&&(i=c,l in i.mediaGroups[a][o]||(i.mediaGroups[a][o][l]=s),i.mediaGroups[a][o][l].playlists[0]=i.playlists[u],n=!1)}}),Ihe(i,e),e.minimumUpdatePeriod!==r.minimumUpdatePeriod&&(n=!1),n?null:i},Rhe=(r,e)=>(!r.map&&!e.map||!!(r.map&&e.map&&r.map.byterange.offset===e.map.byterange.offset&&r.map.byterange.length===e.map.byterange.length))&&r.uri===e.uri&&r.byterange.offset===e.byterange.offset&&r.byterange.length===e.byterange.length,xM=(r,e)=>{const t={};for(const n in r){const s=r[n].sidx;if(s){const a=bf(s);if(!e[a])break;const o=e[a].sidxInfo;Rhe(o,s)&&(t[a]=e[a])}}return t},Lhe=(r,e)=>{let n=xM(r.playlists,e);return Rm(r,(i,s,a,o)=>{if(i.playlists&&i.playlists.length){const l=i.playlists;n=An(n,xM(l,e))}}),n};let O2=class extends khe{constructor(e,t,n={},i){super(),this.mainPlaylistLoader_=i||this,i||(this.isMain_=!0);const{withCredentials:s=!1}=n;if(this.vhs_=t,this.withCredentials=s,this.addMetadataToTextTrack=n.addMetadataToTextTrack,!e)throw new Error("A non-empty playlist URL or object is required");this.on("minimumUpdatePeriod",()=>{this.refreshXml_()}),this.on("mediaupdatetimeout",()=>{this.refreshMedia_(this.media().id)}),this.state="HAVE_NOTHING",this.loadedPlaylists_={},this.logger_=ul("DashPlaylistLoader"),this.isMain_?(this.mainPlaylistLoader_.srcUrl=e,this.mainPlaylistLoader_.sidxMapping_={}):this.childPlaylist_=e}requestErrored_(e,t,n){if(!this.request)return!0;if(this.request=null,e)return this.error=typeof e=="object"&&!(e instanceof Error)?e:{status:t.status,message:"DASH request error at URL: "+t.uri,response:t.response,code:2,metadata:e.metadata},n&&(this.state=n),this.trigger("error"),!0}addSidxSegments_(e,t,n){const i=e.sidx&&bf(e.sidx);if(!e.sidx||!i||this.mainPlaylistLoader_.sidxMapping_[i]){this.mediaRequest_=X.setTimeout(()=>n(!1),0);return}const s=sb(e.sidx.resolvedUri),a=(l,u)=>{if(this.requestErrored_(l,u,t))return;const c=this.mainPlaylistLoader_.sidxMapping_,{requestType:h}=u;let f;try{f=H5(_r(u.response).subarray(8))}catch(g){g.metadata=tf({requestType:h,request:u,parseFailure:!0}),this.requestErrored_(g,u,t);return}return c[i]={sidxInfo:e.sidx,sidx:f},mv(e,f,e.sidx.resolvedUri),n(!0)},o="dash-sidx";this.request=Ehe(s,this.vhs_.xhr,(l,u,c,h)=>{if(l)return a(l,u);if(!c||c!=="mp4"){const v=c||"unknown";return a({status:u.status,message:`Unsupported ${v} container type for sidx segment at URL: ${s}`,response:"",playlist:e,internal:!0,playlistExclusionDuration:1/0,code:2},u)}const{offset:f,length:g}=e.sidx.byterange;if(h.length>=g+f)return a(l,{response:h.subarray(f,f+g),status:u.status,uri:u.uri});this.request=this.vhs_.xhr({uri:s,responseType:"arraybuffer",requestType:"dash-sidx",headers:L2({byterange:e.sidx.byterange})},a)},o)}dispose(){this.trigger("dispose"),this.stopRequest(),this.loadedPlaylists_={},X.clearTimeout(this.minimumUpdatePeriodTimeout_),X.clearTimeout(this.mediaRequest_),X.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null,this.mediaRequest_=null,this.minimumUpdatePeriodTimeout_=null,this.mainPlaylistLoader_.createMupOnMedia_&&(this.off("loadedmetadata",this.mainPlaylistLoader_.createMupOnMedia_),this.mainPlaylistLoader_.createMupOnMedia_=null),this.off()}hasPendingRequest(){return this.request||this.mediaRequest_}stopRequest(){if(this.request){const e=this.request;this.request=null,e.onreadystatechange=null,e.abort()}}media(e){if(!e)return this.media_;if(this.state==="HAVE_NOTHING")throw new Error("Cannot switch media playlist from "+this.state);const t=this.state;if(typeof e=="string"){if(!this.mainPlaylistLoader_.main.playlists[e])throw new Error("Unknown playlist URI: "+e);e=this.mainPlaylistLoader_.main.playlists[e]}const n=!this.media_||e.id!==this.media_.id;if(n&&this.loadedPlaylists_[e.id]&&this.loadedPlaylists_[e.id].endList){this.state="HAVE_METADATA",this.media_=e,n&&(this.trigger("mediachanging"),this.trigger("mediachange"));return}n&&(this.media_&&this.trigger("mediachanging"),this.addSidxSegments_(e,t,i=>{this.haveMetadata({startingState:t,playlist:e})}))}haveMetadata({startingState:e,playlist:t}){this.state="HAVE_METADATA",this.loadedPlaylists_[t.id]=t,this.mediaRequest_=null,this.refreshMedia_(t.id),e==="HAVE_MAIN_MANIFEST"?this.trigger("loadedmetadata"):this.trigger("mediachange")}pause(){this.mainPlaylistLoader_.createMupOnMedia_&&(this.off("loadedmetadata",this.mainPlaylistLoader_.createMupOnMedia_),this.mainPlaylistLoader_.createMupOnMedia_=null),this.stopRequest(),X.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null,this.isMain_&&(X.clearTimeout(this.mainPlaylistLoader_.minimumUpdatePeriodTimeout_),this.mainPlaylistLoader_.minimumUpdatePeriodTimeout_=null),this.state==="HAVE_NOTHING"&&(this.started=!1)}load(e){X.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null;const t=this.media();if(e){const n=t?t.targetDuration/2*1e3:5e3;this.mediaUpdateTimeout=X.setTimeout(()=>this.load(),n);return}if(!this.started){this.start();return}t&&!t.endList?(this.isMain_&&!this.minimumUpdatePeriodTimeout_&&(this.trigger("minimumUpdatePeriod"),this.updateMinimumUpdatePeriodTimeout_()),this.trigger("mediaupdatetimeout")):this.trigger("loadedplaylist")}start(){if(this.started=!0,!this.isMain_){this.mediaRequest_=X.setTimeout(()=>this.haveMain_(),0);return}this.requestMain_((e,t)=>{this.haveMain_(),!this.hasPendingRequest()&&!this.media_&&this.media(this.mainPlaylistLoader_.main.playlists[0])})}requestMain_(e){const t={manifestInfo:{uri:this.mainPlaylistLoader_.srcUrl}};this.trigger({type:"manifestrequeststart",metadata:t}),this.request=this.vhs_.xhr({uri:this.mainPlaylistLoader_.srcUrl,withCredentials:this.withCredentials,requestType:"dash-manifest"},(n,i)=>{if(n){const{requestType:a}=i;n.metadata=tf({requestType:a,request:i,error:n})}if(this.requestErrored_(n,i)){this.state==="HAVE_NOTHING"&&(this.started=!1);return}this.trigger({type:"manifestrequestcomplete",metadata:t});const s=i.responseText!==this.mainPlaylistLoader_.mainXml_;if(this.mainPlaylistLoader_.mainXml_=i.responseText,i.responseHeaders&&i.responseHeaders.date?this.mainLoaded_=Date.parse(i.responseHeaders.date):this.mainLoaded_=Date.now(),this.mainPlaylistLoader_.srcUrl=sb(this.mainPlaylistLoader_.srcUrl,i),s){this.handleMain_(),this.syncClientServerClock_(()=>e(i,s));return}return e(i,s)})}syncClientServerClock_(e){const t=z5(this.mainPlaylistLoader_.mainXml_);if(t===null)return this.mainPlaylistLoader_.clientOffset_=this.mainLoaded_-Date.now(),e();if(t.method==="DIRECT")return this.mainPlaylistLoader_.clientOffset_=t.value-Date.now(),e();this.request=this.vhs_.xhr({uri:Ra(this.mainPlaylistLoader_.srcUrl,t.value),method:t.method,withCredentials:this.withCredentials,requestType:"dash-clock-sync"},(n,i)=>{if(!this.request)return;if(n){const{requestType:a}=i;return this.error.metadata=tf({requestType:a,request:i,error:n}),this.mainPlaylistLoader_.clientOffset_=this.mainLoaded_-Date.now(),e()}let s;t.method==="HEAD"?!i.responseHeaders||!i.responseHeaders.date?s=this.mainLoaded_:s=Date.parse(i.responseHeaders.date):s=Date.parse(i.responseText),this.mainPlaylistLoader_.clientOffset_=s-Date.now(),e()})}haveMain_(){this.state="HAVE_MAIN_MANIFEST",this.isMain_?this.trigger("loadedplaylist"):this.media_||this.media(this.childPlaylist_)}handleMain_(){this.mediaRequest_=null;const e=this.mainPlaylistLoader_.main,t={manifestInfo:{uri:this.mainPlaylistLoader_.srcUrl}};this.trigger({type:"manifestparsestart",metadata:t});let n;try{n=Dhe({mainXml:this.mainPlaylistLoader_.mainXml_,srcUrl:this.mainPlaylistLoader_.srcUrl,clientOffset:this.mainPlaylistLoader_.clientOffset_,sidxMapping:this.mainPlaylistLoader_.sidxMapping_,previousManifest:e})}catch(s){this.error=s,this.error.metadata={errorType:Se.Error.StreamingDashManifestParserError,error:s},this.trigger("error")}e&&(n=Phe(e,n,this.mainPlaylistLoader_.sidxMapping_)),this.mainPlaylistLoader_.main=n||e;const i=this.mainPlaylistLoader_.main.locations&&this.mainPlaylistLoader_.main.locations[0];if(i&&i!==this.mainPlaylistLoader_.srcUrl&&(this.mainPlaylistLoader_.srcUrl=i),(!e||n&&n.minimumUpdatePeriod!==e.minimumUpdatePeriod)&&this.updateMinimumUpdatePeriodTimeout_(),this.addEventStreamToMetadataTrack_(n),n){const{duration:s,endList:a}=n,o=[];n.playlists.forEach(u=>{o.push({id:u.id,bandwidth:u.attributes.BANDWIDTH,resolution:u.attributes.RESOLUTION,codecs:u.attributes.CODECS})});const l={duration:s,isLive:!a,renditions:o};t.parsedManifest=l,this.trigger({type:"manifestparsecomplete",metadata:t})}return!!n}updateMinimumUpdatePeriodTimeout_(){const e=this.mainPlaylistLoader_;e.createMupOnMedia_&&(e.off("loadedmetadata",e.createMupOnMedia_),e.createMupOnMedia_=null),e.minimumUpdatePeriodTimeout_&&(X.clearTimeout(e.minimumUpdatePeriodTimeout_),e.minimumUpdatePeriodTimeout_=null);let t=e.main&&e.main.minimumUpdatePeriod;if(t===0&&(e.media()?t=e.media().targetDuration*1e3:(e.createMupOnMedia_=e.updateMinimumUpdatePeriodTimeout_,e.one("loadedmetadata",e.createMupOnMedia_))),typeof t!="number"||t<=0){t<0&&this.logger_(`found invalid minimumUpdatePeriod of ${t}, not setting a timeout`);return}this.createMUPTimeout_(t)}createMUPTimeout_(e){const t=this.mainPlaylistLoader_;t.minimumUpdatePeriodTimeout_=X.setTimeout(()=>{t.minimumUpdatePeriodTimeout_=null,t.trigger("minimumUpdatePeriod"),t.createMUPTimeout_(e)},e)}refreshXml_(){this.requestMain_((e,t)=>{t&&(this.media_&&(this.media_=this.mainPlaylistLoader_.main.playlists[this.media_.id]),this.mainPlaylistLoader_.sidxMapping_=Lhe(this.mainPlaylistLoader_.main,this.mainPlaylistLoader_.sidxMapping_),this.addSidxSegments_(this.media(),this.state,n=>{this.refreshMedia_(this.media().id)}))})}refreshMedia_(e){if(!e)throw new Error("refreshMedia_ must take a media id");this.media_&&this.isMain_&&this.handleMain_();const t=this.mainPlaylistLoader_.main.playlists,n=!this.media_||this.media_!==t[e];if(n?this.media_=t[e]:this.trigger("playlistunchanged"),!this.mediaUpdateTimeout){const i=()=>{this.media().endList||(this.mediaUpdateTimeout=X.setTimeout(()=>{this.trigger("mediaupdatetimeout"),i()},P2(this.media(),!!n)))};i()}this.trigger("loadedplaylist")}addEventStreamToMetadataTrack_(e){if(e&&this.mainPlaylistLoader_.main.eventStream){const t=this.mainPlaylistLoader_.main.eventStream.map(n=>({cueTime:n.start,frames:[{data:n.messageData}]}));this.addMetadataToTextTrack("EventStream",t,this.mainPlaylistLoader_.main.duration)}}getKeyIdSet(e){if(e.contentProtection){const t=new Set;for(const n in e.contentProtection){const i=e.contentProtection[n].attributes["cenc:default_KID"];i&&t.add(i.replace(/-/g,"").toLowerCase())}return t}}};var Ji={GOAL_BUFFER_LENGTH:30,MAX_GOAL_BUFFER_LENGTH:60,BACK_BUFFER_LENGTH:30,GOAL_BUFFER_LENGTH_RATE:1,INITIAL_BANDWIDTH:4194304,BANDWIDTH_VARIANCE:1.2,BUFFER_LOW_WATER_LINE:0,MAX_BUFFER_LOW_WATER_LINE:30,EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE:16,BUFFER_LOW_WATER_LINE_RATE:1,BUFFER_HIGH_WATER_LINE:30};const Ohe=r=>{const e=new Uint8Array(new ArrayBuffer(r.length));for(let t=0;t<r.length;t++)e[t]=r.charCodeAt(t);return e.buffer},BU=function(r){return r.on=r.addEventListener,r.off=r.removeEventListener,r},Mhe=function(r){try{return URL.createObjectURL(new Blob([r],{type:"application/javascript"}))}catch{const t=new BlobBuilder;return t.append(r),URL.createObjectURL(t.getBlob())}},NU=function(r){return function(){const e=Mhe(r),t=BU(new Worker(e));t.objURL=e;const n=t.terminate;return t.on=t.addEventListener,t.off=t.removeEventListener,t.terminate=function(){return URL.revokeObjectURL(e),n.call(this)},t}},UU=function(r){return`var browserWorkerPolyFill = ${BU.toString()};
browserWorkerPolyFill(self);
`+r},$U=function(r){return r.toString().replace(/^function.+?{/,"").slice(0,-1)},Fhe=UU($U(function(){var r=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},e=function(){this.init=function(){var p={};this.on=function(x,S){p[x]||(p[x]=[]),p[x]=p[x].concat(S)},this.off=function(x,S){var b;return p[x]?(b=p[x].indexOf(S),p[x]=p[x].slice(),p[x].splice(b,1),b>-1):!1},this.trigger=function(x){var S,b,w,R;if(S=p[x],!!S)if(arguments.length===2)for(w=S.length,b=0;b<w;++b)S[b].call(this,arguments[1]);else{for(R=[],b=arguments.length,b=1;b<arguments.length;++b)R.push(arguments[b]);for(w=S.length,b=0;b<w;++b)S[b].apply(this,R)}},this.dispose=function(){p={}}}};e.prototype.pipe=function(p){return this.on("data",function(x){p.push(x)}),this.on("done",function(x){p.flush(x)}),this.on("partialdone",function(x){p.partialFlush(x)}),this.on("endedtimeline",function(x){p.endTimeline(x)}),this.on("reset",function(x){p.reset(x)}),p},e.prototype.push=function(p){this.trigger("data",p)},e.prototype.flush=function(p){this.trigger("done",p)},e.prototype.partialFlush=function(p){this.trigger("partialdone",p)},e.prototype.endTimeline=function(p){this.trigger("endedtimeline",p)},e.prototype.reset=function(p){this.trigger("reset",p)};var t=e,n=Math.pow(2,32),i=function(p){var x=new DataView(p.buffer,p.byteOffset,p.byteLength),S;return x.getBigUint64?(S=x.getBigUint64(0),S<Number.MAX_SAFE_INTEGER?Number(S):S):x.getUint32(0)*n+x.getUint32(4)},s={getUint64:i,MAX_UINT32:n},a=s.MAX_UINT32,o,l,u,c,h,f,g,v,y,_,C,E,D,I,k,P,N,U,B,A,$,W,V,Q,ie,ne,ue,se,ae,ce,ee,pe,me,ye,Oe,Le;(function(){var p;if(V={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],mvex:[],mvhd:[],pasp:[],sdtp:[],smhd:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],styp:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[]},!(typeof Uint8Array>"u")){for(p in V)V.hasOwnProperty(p)&&(V[p]=[p.charCodeAt(0),p.charCodeAt(1),p.charCodeAt(2),p.charCodeAt(3)]);Q=new Uint8Array([105,115,111,109]),ne=new Uint8Array([97,118,99,49]),ie=new Uint8Array([0,0,0,1]),ue=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),se=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]),ae={video:ue,audio:se},pe=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),ee=new Uint8Array([0,0,0,0,0,0,0,0]),me=new Uint8Array([0,0,0,0,0,0,0,0]),ye=me,Oe=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),Le=me,ce=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0])}})(),o=function(p){var x=[],S=0,b,w,R;for(b=1;b<arguments.length;b++)x.push(arguments[b]);for(b=x.length;b--;)S+=x[b].byteLength;for(w=new Uint8Array(S+8),R=new DataView(w.buffer,w.byteOffset,w.byteLength),R.setUint32(0,w.byteLength),w.set(p,4),b=0,S=8;b<x.length;b++)w.set(x[b],S),S+=x[b].byteLength;return w},l=function(){return o(V.dinf,o(V.dref,pe))},u=function(p){return o(V.esds,new Uint8Array([0,0,0,0,3,25,0,0,0,4,17,64,21,0,6,0,0,0,218,192,0,0,218,192,5,2,p.audioobjecttype<<3|p.samplingfrequencyindex>>>1,p.samplingfrequencyindex<<7|p.channelcount<<3,6,1,2]))},c=function(){return o(V.ftyp,Q,ie,Q,ne)},P=function(p){return o(V.hdlr,ae[p])},h=function(p){return o(V.mdat,p)},k=function(p){var x=new Uint8Array([0,0,0,0,0,0,0,2,0,0,0,3,0,1,95,144,p.duration>>>24&255,p.duration>>>16&255,p.duration>>>8&255,p.duration&255,85,196,0,0]);return p.samplerate&&(x[12]=p.samplerate>>>24&255,x[13]=p.samplerate>>>16&255,x[14]=p.samplerate>>>8&255,x[15]=p.samplerate&255),o(V.mdhd,x)},I=function(p){return o(V.mdia,k(p),P(p.type),g(p))},f=function(p){return o(V.mfhd,new Uint8Array([0,0,0,0,(p&4278190080)>>24,(p&16711680)>>16,(p&65280)>>8,p&255]))},g=function(p){return o(V.minf,p.type==="video"?o(V.vmhd,ce):o(V.smhd,ee),l(),U(p))},v=function(p,x){for(var S=[],b=x.length;b--;)S[b]=A(x[b]);return o.apply(null,[V.moof,f(p)].concat(S))},y=function(p){for(var x=p.length,S=[];x--;)S[x]=E(p[x]);return o.apply(null,[V.moov,C(4294967295)].concat(S).concat(_(p)))},_=function(p){for(var x=p.length,S=[];x--;)S[x]=$(p[x]);return o.apply(null,[V.mvex].concat(S))},C=function(p){var x=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,2,0,1,95,144,(p&4278190080)>>24,(p&16711680)>>16,(p&65280)>>8,p&255,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return o(V.mvhd,x)},N=function(p){var x=p.samples||[],S=new Uint8Array(4+x.length),b,w;for(w=0;w<x.length;w++)b=x[w].flags,S[w+4]=b.dependsOn<<4|b.isDependedOn<<2|b.hasRedundancy;return o(V.sdtp,S)},U=function(p){return o(V.stbl,B(p),o(V.stts,Le),o(V.stsc,ye),o(V.stsz,Oe),o(V.stco,me))},(function(){var p,x;B=function(S){return o(V.stsd,new Uint8Array([0,0,0,0,0,0,0,1]),S.type==="video"?p(S):x(S))},p=function(S){var b=S.sps||[],w=S.pps||[],R=[],G=[],Y,J;for(Y=0;Y<b.length;Y++)R.push((b[Y].byteLength&65280)>>>8),R.push(b[Y].byteLength&255),R=R.concat(Array.prototype.slice.call(b[Y]));for(Y=0;Y<w.length;Y++)G.push((w[Y].byteLength&65280)>>>8),G.push(w[Y].byteLength&255),G=G.concat(Array.prototype.slice.call(w[Y]));if(J=[V.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,(S.width&65280)>>8,S.width&255,(S.height&65280)>>8,S.height&255,0,72,0,0,0,72,0,0,0,0,0,0,0,1,19,118,105,100,101,111,106,115,45,99,111,110,116,114,105,98,45,104,108,115,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),o(V.avcC,new Uint8Array([1,S.profileIdc,S.profileCompatibility,S.levelIdc,255].concat([b.length],R,[w.length],G))),o(V.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192]))],S.sarRatio){var re=S.sarRatio[0],he=S.sarRatio[1];J.push(o(V.pasp,new Uint8Array([(re&4278190080)>>24,(re&16711680)>>16,(re&65280)>>8,re&255,(he&4278190080)>>24,(he&16711680)>>16,(he&65280)>>8,he&255])))}return o.apply(null,J)},x=function(S){return o(V.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,(S.channelcount&65280)>>8,S.channelcount&255,(S.samplesize&65280)>>8,S.samplesize&255,0,0,0,0,(S.samplerate&65280)>>8,S.samplerate&255,0,0]),u(S))}})(),D=function(p){var x=new Uint8Array([0,0,0,7,0,0,0,0,0,0,0,0,(p.id&4278190080)>>24,(p.id&16711680)>>16,(p.id&65280)>>8,p.id&255,0,0,0,0,(p.duration&4278190080)>>24,(p.duration&16711680)>>16,(p.duration&65280)>>8,p.duration&255,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,(p.width&65280)>>8,p.width&255,0,0,(p.height&65280)>>8,p.height&255,0,0]);return o(V.tkhd,x)},A=function(p){var x,S,b,w,R,G,Y;return x=o(V.tfhd,new Uint8Array([0,0,0,58,(p.id&4278190080)>>24,(p.id&16711680)>>16,(p.id&65280)>>8,p.id&255,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0])),G=Math.floor(p.baseMediaDecodeTime/a),Y=Math.floor(p.baseMediaDecodeTime%a),S=o(V.tfdt,new Uint8Array([1,0,0,0,G>>>24&255,G>>>16&255,G>>>8&255,G&255,Y>>>24&255,Y>>>16&255,Y>>>8&255,Y&255])),R=92,p.type==="audio"?(b=W(p,R),o(V.traf,x,S,b)):(w=N(p),b=W(p,w.length+R),o(V.traf,x,S,b,w))},E=function(p){return p.duration=p.duration||4294967295,o(V.trak,D(p),I(p))},$=function(p){var x=new Uint8Array([0,0,0,0,(p.id&4278190080)>>24,(p.id&16711680)>>16,(p.id&65280)>>8,p.id&255,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]);return p.type!=="video"&&(x[x.length-1]=0),o(V.trex,x)},(function(){var p,x,S;S=function(b,w){var R=0,G=0,Y=0,J=0;return b.length&&(b[0].duration!==void 0&&(R=1),b[0].size!==void 0&&(G=2),b[0].flags!==void 0&&(Y=4),b[0].compositionTimeOffset!==void 0&&(J=8)),[0,0,R|G|Y|J,1,(b.length&4278190080)>>>24,(b.length&16711680)>>>16,(b.length&65280)>>>8,b.length&255,(w&4278190080)>>>24,(w&16711680)>>>16,(w&65280)>>>8,w&255]},x=function(b,w){var R,G,Y,J,re,he;for(J=b.samples||[],w+=20+16*J.length,Y=S(J,w),G=new Uint8Array(Y.length+J.length*16),G.set(Y),R=Y.length,he=0;he<J.length;he++)re=J[he],G[R++]=(re.duration&4278190080)>>>24,G[R++]=(re.duration&16711680)>>>16,G[R++]=(re.duration&65280)>>>8,G[R++]=re.duration&255,G[R++]=(re.size&4278190080)>>>24,G[R++]=(re.size&16711680)>>>16,G[R++]=(re.size&65280)>>>8,G[R++]=re.size&255,G[R++]=re.flags.isLeading<<2|re.flags.dependsOn,G[R++]=re.flags.isDependedOn<<6|re.flags.hasRedundancy<<4|re.flags.paddingValue<<1|re.flags.isNonSyncSample,G[R++]=re.flags.degradationPriority&61440,G[R++]=re.flags.degradationPriority&15,G[R++]=(re.compositionTimeOffset&4278190080)>>>24,G[R++]=(re.compositionTimeOffset&16711680)>>>16,G[R++]=(re.compositionTimeOffset&65280)>>>8,G[R++]=re.compositionTimeOffset&255;return o(V.trun,G)},p=function(b,w){var R,G,Y,J,re,he;for(J=b.samples||[],w+=20+8*J.length,Y=S(J,w),R=new Uint8Array(Y.length+J.length*8),R.set(Y),G=Y.length,he=0;he<J.length;he++)re=J[he],R[G++]=(re.duration&4278190080)>>>24,R[G++]=(re.duration&16711680)>>>16,R[G++]=(re.duration&65280)>>>8,R[G++]=re.duration&255,R[G++]=(re.size&4278190080)>>>24,R[G++]=(re.size&16711680)>>>16,R[G++]=(re.size&65280)>>>8,R[G++]=re.size&255;return o(V.trun,R)},W=function(b,w){return b.type==="audio"?p(b,w):x(b,w)}})();var st={ftyp:c,mdat:h,moof:v,moov:y,initSegment:function(p){var x=c(),S=y(p),b;return b=new Uint8Array(x.byteLength+S.byteLength),b.set(x),b.set(S,x.byteLength),b}},ze=function(p){var x,S,b=[],w=[];for(w.byteLength=0,w.nalCount=0,w.duration=0,b.byteLength=0,x=0;x<p.length;x++)S=p[x],S.nalUnitType==="access_unit_delimiter_rbsp"?(b.length&&(b.duration=S.dts-b.dts,w.byteLength+=b.byteLength,w.nalCount+=b.length,w.duration+=b.duration,w.push(b)),b=[S],b.byteLength=S.data.byteLength,b.pts=S.pts,b.dts=S.dts):(S.nalUnitType==="slice_layer_without_partitioning_rbsp_idr"&&(b.keyFrame=!0),b.duration=S.dts-b.dts,b.byteLength+=S.data.byteLength,b.push(S));return w.length&&(!b.duration||b.duration<=0)&&(b.duration=w[w.length-1].duration),w.byteLength+=b.byteLength,w.nalCount+=b.length,w.duration+=b.duration,w.push(b),w},pt=function(p){var x,S,b=[],w=[];for(b.byteLength=0,b.nalCount=0,b.duration=0,b.pts=p[0].pts,b.dts=p[0].dts,w.byteLength=0,w.nalCount=0,w.duration=0,w.pts=p[0].pts,w.dts=p[0].dts,x=0;x<p.length;x++)S=p[x],S.keyFrame?(b.length&&(w.push(b),w.byteLength+=b.byteLength,w.nalCount+=b.nalCount,w.duration+=b.duration),b=[S],b.nalCount=S.length,b.byteLength=S.byteLength,b.pts=S.pts,b.dts=S.dts,b.duration=S.duration):(b.duration+=S.duration,b.nalCount+=S.length,b.byteLength+=S.byteLength,b.push(S));return w.length&&b.duration<=0&&(b.duration=w[w.length-1].duration),w.byteLength+=b.byteLength,w.nalCount+=b.nalCount,w.duration+=b.duration,w.push(b),w},Ye=function(p){var x;return!p[0][0].keyFrame&&p.length>1&&(x=p.shift(),p.byteLength-=x.byteLength,p.nalCount-=x.nalCount,p[0][0].dts=x.dts,p[0][0].pts=x.pts,p[0][0].duration+=x.duration),p},Pt=function(){return{size:0,flags:{isLeading:0,dependsOn:1,isDependedOn:0,hasRedundancy:0,degradationPriority:0,isNonSyncSample:1}}},Rt=function(p,x){var S=Pt();return S.dataOffset=x,S.compositionTimeOffset=p.pts-p.dts,S.duration=p.duration,S.size=4*p.length,S.size+=p.byteLength,p.keyFrame&&(S.flags.dependsOn=2,S.flags.isNonSyncSample=0),S},Ve=function(p,x){var S,b,w,R,G,Y=x||0,J=[];for(S=0;S<p.length;S++)for(R=p[S],b=0;b<R.length;b++)G=R[b],w=Rt(G,Y),Y+=w.size,J.push(w);return J},Ne=function(p){var x,S,b,w,R,G,Y=0,J=p.byteLength,re=p.nalCount,he=J+4*re,ve=new Uint8Array(he),qe=new DataView(ve.buffer);for(x=0;x<p.length;x++)for(w=p[x],S=0;S<w.length;S++)for(R=w[S],b=0;b<R.length;b++)G=R[b],qe.setUint32(Y,G.data.byteLength),Y+=4,ve.set(G.data,Y),Y+=G.data.byteLength;return ve},Ie=function(p,x){var S,b=x||0,w=[];return S=Rt(p,b),w.push(S),w},Ue=function(p){var x,S,b=0,w=p.byteLength,R=p.length,G=w+4*R,Y=new Uint8Array(G),J=new DataView(Y.buffer);for(x=0;x<p.length;x++)S=p[x],J.setUint32(b,S.data.byteLength),b+=4,Y.set(S.data,b),b+=S.data.byteLength;return Y},et={groupNalsIntoFrames:ze,groupFramesIntoGops:pt,extendFirstKeyFrame:Ye,generateSampleTable:Ve,concatenateNalData:Ne,generateSampleTableForFrame:Ie,concatenateNalDataForFrame:Ue},ot=[33,16,5,32,164,27],dt=[33,65,108,84,1,2,4,8,168,2,4,8,17,191,252],it=function(p){for(var x=[];p--;)x.push(0);return x},bt=function(p){return Object.keys(p).reduce(function(x,S){return x[S]=new Uint8Array(p[S].reduce(function(b,w){return b.concat(w)},[])),x},{})},lt,gr=function(){if(!lt){var p={96e3:[ot,[227,64],it(154),[56]],88200:[ot,[231],it(170),[56]],64e3:[ot,[248,192],it(240),[56]],48e3:[ot,[255,192],it(268),[55,148,128],it(54),[112]],44100:[ot,[255,192],it(268),[55,163,128],it(84),[112]],32e3:[ot,[255,192],it(268),[55,234],it(226),[112]],24e3:[ot,[255,192],it(268),[55,255,128],it(268),[111,112],it(126),[224]],16e3:[ot,[255,192],it(268),[55,255,128],it(268),[111,255],it(269),[223,108],it(195),[1,192]],12e3:[dt,it(268),[3,127,248],it(268),[6,255,240],it(268),[13,255,224],it(268),[27,253,128],it(259),[56]],11025:[dt,it(268),[3,127,248],it(268),[6,255,240],it(268),[13,255,224],it(268),[27,255,192],it(268),[55,175,128],it(108),[112]],8e3:[dt,it(268),[3,121,16],it(47),[7]]};lt=bt(p)}return lt},hr=9e4,Rr,nr,qt,fr,yr,Lr,vt;Rr=function(p){return p*hr},nr=function(p,x){return p*x},qt=function(p){return p/hr},fr=function(p,x){return p/x},yr=function(p,x){return Rr(fr(p,x))},Lr=function(p,x){return nr(qt(p),x)},vt=function(p,x,S){return qt(S?p:p-x)};var Ut={ONE_SECOND_IN_TS:hr,secondsToVideoTs:Rr,secondsToAudioTs:nr,videoTsToSeconds:qt,audioTsToSeconds:fr,audioTsToVideoTs:yr,videoTsToAudioTs:Lr,metadataTsToSeconds:vt},rn=gr,jt=Ut,br=function(p){var x,S,b=0;for(x=0;x<p.length;x++)S=p[x],b+=S.data.byteLength;return b},Or=function(p,x,S,b){var w,R=0,G=0,Y=0,J=0,re,he,ve;if(x.length&&(w=jt.audioTsToVideoTs(p.baseMediaDecodeTime,p.samplerate),R=Math.ceil(jt.ONE_SECOND_IN_TS/(p.samplerate/1024)),S&&b&&(G=w-Math.max(S,b),Y=Math.floor(G/R),J=Y*R),!(Y<1||J>jt.ONE_SECOND_IN_TS/2))){for(re=rn()[p.samplerate],re||(re=x[0].data),he=0;he<Y;he++)ve=x[0],x.splice(0,0,{data:re,dts:ve.dts-R,pts:ve.pts-R});return p.baseMediaDecodeTime-=Math.floor(jt.videoTsToAudioTs(J,p.samplerate)),J}},Hr=function(p,x,S){return x.minSegmentDts>=S?p:(x.minSegmentDts=1/0,p.filter(function(b){return b.dts>=S?(x.minSegmentDts=Math.min(x.minSegmentDts,b.dts),x.minSegmentPts=x.minSegmentDts,!0):!1}))},ln=function(p){var x,S,b=[];for(x=0;x<p.length;x++)S=p[x],b.push({size:S.data.byteLength,duration:1024});return b},Cn=function(p){var x,S,b=0,w=new Uint8Array(br(p));for(x=0;x<p.length;x++)S=p[x],w.set(S.data,b),b+=S.data.byteLength;return w},wn={prefixWithSilence:Or,trimAdtsFramesByEarliestDts:Hr,generateSampleTable:ln,concatenateFrameData:Cn},Fr=Ut.ONE_SECOND_IN_TS,oe=function(p,x){typeof x.pts=="number"&&(p.timelineStartInfo.pts===void 0&&(p.timelineStartInfo.pts=x.pts),p.minSegmentPts===void 0?p.minSegmentPts=x.pts:p.minSegmentPts=Math.min(p.minSegmentPts,x.pts),p.maxSegmentPts===void 0?p.maxSegmentPts=x.pts:p.maxSegmentPts=Math.max(p.maxSegmentPts,x.pts)),typeof x.dts=="number"&&(p.timelineStartInfo.dts===void 0&&(p.timelineStartInfo.dts=x.dts),p.minSegmentDts===void 0?p.minSegmentDts=x.dts:p.minSegmentDts=Math.min(p.minSegmentDts,x.dts),p.maxSegmentDts===void 0?p.maxSegmentDts=x.dts:p.maxSegmentDts=Math.max(p.maxSegmentDts,x.dts))},fe=function(p){delete p.minSegmentDts,delete p.maxSegmentDts,delete p.minSegmentPts,delete p.maxSegmentPts},Te=function(p,x){var S,b,w=p.minSegmentDts;return x||(w-=p.timelineStartInfo.dts),S=p.timelineStartInfo.baseMediaDecodeTime,S+=w,S=Math.max(0,S),p.type==="audio"&&(b=p.samplerate/Fr,S*=b,S=Math.floor(S)),S},je={clearDtsInfo:fe,calculateTrackBaseMediaDecodeTime:Te,collectDtsInfo:oe},mt=4,St=128,be=function(p){for(var x=0,S={payloadType:-1,payloadSize:0},b=0,w=0;x<p.byteLength&&p[x]!==St;){for(;p[x]===255;)b+=255,x++;for(b+=p[x++];p[x]===255;)w+=255,x++;if(w+=p[x++],!S.payload&&b===mt){var R=String.fromCharCode(p[x+3],p[x+4],p[x+5],p[x+6]);if(R==="GA94"){S.payloadType=b,S.payloadSize=w,S.payload=p.subarray(x,x+w);break}else S.payload=void 0}x+=w,b=0,w=0}return S},xe=function(p){return p.payload[0]!==181||(p.payload[1]<<8|p.payload[2])!==49||String.fromCharCode(p.payload[3],p.payload[4],p.payload[5],p.payload[6])!=="GA94"||p.payload[7]!==3?null:p.payload.subarray(8,p.payload.length-1)},Ae=function(p,x){var S=[],b,w,R,G;if(!(x[0]&64))return S;for(w=x[0]&31,b=0;b<w;b++)R=b*3,G={type:x[R+2]&3,pts:p},x[R+2]&4&&(G.ccData=x[R+3]<<8|x[R+4],S.push(G));return S},Ke=function(p){for(var x=p.byteLength,S=[],b=1,w,R;b<x-2;)p[b]===0&&p[b+1]===0&&p[b+2]===3?(S.push(b+2),b+=2):b++;if(S.length===0)return p;w=x-S.length,R=new Uint8Array(w);var G=0;for(b=0;b<w;G++,b++)G===S[0]&&(G++,S.shift()),R[b]=p[G];return R},Xe={parseSei:be,parseUserData:xe,parseCaptionPackets:Ae,discardEmulationPreventionBytes:Ke,USER_DATA_REGISTERED_ITU_T_T35:mt},_t=t,Lt=Xe,ct=function(p){p=p||{},ct.prototype.init.call(this),this.parse708captions_=typeof p.parse708captions=="boolean"?p.parse708captions:!0,this.captionPackets_=[],this.ccStreams_=[new ir(0,0),new ir(0,1),new ir(1,0),new ir(1,1)],this.parse708captions_&&(this.cc708Stream_=new Tt({captionServices:p.captionServices})),this.reset(),this.ccStreams_.forEach(function(x){x.on("data",this.trigger.bind(this,"data")),x.on("partialdone",this.trigger.bind(this,"partialdone")),x.on("done",this.trigger.bind(this,"done"))},this),this.parse708captions_&&(this.cc708Stream_.on("data",this.trigger.bind(this,"data")),this.cc708Stream_.on("partialdone",this.trigger.bind(this,"partialdone")),this.cc708Stream_.on("done",this.trigger.bind(this,"done")))};ct.prototype=new _t,ct.prototype.push=function(p){var x,S,b;if(p.nalUnitType==="sei_rbsp"&&(x=Lt.parseSei(p.escapedRBSP),!!x.payload&&x.payloadType===Lt.USER_DATA_REGISTERED_ITU_T_T35&&(S=Lt.parseUserData(x),!!S))){if(p.dts<this.latestDts_){this.ignoreNextEqualDts_=!0;return}else if(p.dts===this.latestDts_&&this.ignoreNextEqualDts_){this.numSameDts_--,this.numSameDts_||(this.ignoreNextEqualDts_=!1);return}b=Lt.parseCaptionPackets(p.pts,S),this.captionPackets_=this.captionPackets_.concat(b),this.latestDts_!==p.dts&&(this.numSameDts_=0),this.numSameDts_++,this.latestDts_=p.dts}},ct.prototype.flushCCStreams=function(p){this.ccStreams_.forEach(function(x){return p==="flush"?x.flush():x.partialFlush()},this)},ct.prototype.flushStream=function(p){if(!this.captionPackets_.length){this.flushCCStreams(p);return}this.captionPackets_.forEach(function(x,S){x.presortIndex=S}),this.captionPackets_.sort(function(x,S){return x.pts===S.pts?x.presortIndex-S.presortIndex:x.pts-S.pts}),this.captionPackets_.forEach(function(x){x.type<2?this.dispatchCea608Packet(x):this.dispatchCea708Packet(x)},this),this.captionPackets_.length=0,this.flushCCStreams(p)},ct.prototype.flush=function(){return this.flushStream("flush")},ct.prototype.partialFlush=function(){return this.flushStream("partialFlush")},ct.prototype.reset=function(){this.latestDts_=null,this.ignoreNextEqualDts_=!1,this.numSameDts_=0,this.activeCea608Channel_=[null,null],this.ccStreams_.forEach(function(p){p.reset()})},ct.prototype.dispatchCea608Packet=function(p){this.setsTextOrXDSActive(p)?this.activeCea608Channel_[p.type]=null:this.setsChannel1Active(p)?this.activeCea608Channel_[p.type]=0:this.setsChannel2Active(p)&&(this.activeCea608Channel_[p.type]=1),this.activeCea608Channel_[p.type]!==null&&this.ccStreams_[(p.type<<1)+this.activeCea608Channel_[p.type]].push(p)},ct.prototype.setsChannel1Active=function(p){return(p.ccData&30720)===4096},ct.prototype.setsChannel2Active=function(p){return(p.ccData&30720)===6144},ct.prototype.setsTextOrXDSActive=function(p){return(p.ccData&28928)===256||(p.ccData&30974)===4138||(p.ccData&30974)===6186},ct.prototype.dispatchCea708Packet=function(p){this.parse708captions_&&this.cc708Stream_.push(p)};var yt={127:9834,4128:32,4129:160,4133:8230,4138:352,4140:338,4144:9608,4145:8216,4146:8217,4147:8220,4148:8221,4149:8226,4153:8482,4154:353,4156:339,4157:8480,4159:376,4214:8539,4215:8540,4216:8541,4217:8542,4218:9168,4219:9124,4220:9123,4221:9135,4222:9126,4223:9121,4256:12600},Vt=function(p){var x=yt[p]||p;return p&4096&&p===x?"":String.fromCharCode(x)},Kt=function(p){return 32<=p&&p<=127||160<=p&&p<=255},Nt=function(p){this.windowNum=p,this.reset()};Nt.prototype.reset=function(){this.clearText(),this.pendingNewLine=!1,this.winAttr={},this.penAttr={},this.penLoc={},this.penColor={},this.visible=0,this.rowLock=0,this.columnLock=0,this.priority=0,this.relativePositioning=0,this.anchorVertical=0,this.anchorHorizontal=0,this.anchorPoint=0,this.rowCount=1,this.virtualRowCount=this.rowCount+1,this.columnCount=41,this.windowStyle=0,this.penStyle=0},Nt.prototype.getText=function(){return this.rows.join(`
`)},Nt.prototype.clearText=function(){this.rows=[""],this.rowIdx=0},Nt.prototype.newLine=function(p){for(this.rows.length>=this.virtualRowCount&&typeof this.beforeRowOverflow=="function"&&this.beforeRowOverflow(p),this.rows.length>0&&(this.rows.push(""),this.rowIdx++);this.rows.length>this.virtualRowCount;)this.rows.shift(),this.rowIdx--},Nt.prototype.isEmpty=function(){return this.rows.length===0?!0:this.rows.length===1?this.rows[0]==="":!1},Nt.prototype.addText=function(p){this.rows[this.rowIdx]+=p},Nt.prototype.backspace=function(){if(!this.isEmpty()){var p=this.rows[this.rowIdx];this.rows[this.rowIdx]=p.substr(0,p.length-1)}};var vr=function(p,x,S){this.serviceNum=p,this.text="",this.currentWindow=new Nt(-1),this.windows=[],this.stream=S,typeof x=="string"&&this.createTextDecoder(x)};vr.prototype.init=function(p,x){this.startPts=p;for(var S=0;S<8;S++)this.windows[S]=new Nt(S),typeof x=="function"&&(this.windows[S].beforeRowOverflow=x)},vr.prototype.setCurrentWindow=function(p){this.currentWindow=this.windows[p]},vr.prototype.createTextDecoder=function(p){if(typeof TextDecoder>"u")this.stream.trigger("log",{level:"warn",message:"The `encoding` option is unsupported without TextDecoder support"});else try{this.textDecoder_=new TextDecoder(p)}catch(x){this.stream.trigger("log",{level:"warn",message:"TextDecoder could not be created with "+p+" encoding. "+x})}};var Tt=function(p){p=p||{},Tt.prototype.init.call(this);var x=this,S=p.captionServices||{},b={},w;Object.keys(S).forEach(R=>{w=S[R],/^SERVICE/.test(R)&&(b[R]=w.encoding)}),this.serviceEncodings=b,this.current708Packet=null,this.services={},this.push=function(R){R.type===3?(x.new708Packet(),x.add708Bytes(R)):(x.current708Packet===null&&x.new708Packet(),x.add708Bytes(R))}};Tt.prototype=new _t,Tt.prototype.new708Packet=function(){this.current708Packet!==null&&this.push708Packet(),this.current708Packet={data:[],ptsVals:[]}},Tt.prototype.add708Bytes=function(p){var x=p.ccData,S=x>>>8,b=x&255;this.current708Packet.ptsVals.push(p.pts),this.current708Packet.data.push(S),this.current708Packet.data.push(b)},Tt.prototype.push708Packet=function(){var p=this.current708Packet,x=p.data,S=null,b=null,w=0,R=x[w++];for(p.seq=R>>6,p.sizeCode=R&63;w<x.length;w++)R=x[w++],S=R>>5,b=R&31,S===7&&b>0&&(R=x[w++],S=R),this.pushServiceBlock(S,w,b),b>0&&(w+=b-1)},Tt.prototype.pushServiceBlock=function(p,x,S){var b,w=x,R=this.current708Packet.data,G=this.services[p];for(G||(G=this.initService(p,w));w<x+S&&w<R.length;w++)b=R[w],Kt(b)?w=this.handleText(w,G):b===24?w=this.multiByteCharacter(w,G):b===16?w=this.extendedCommands(w,G):128<=b&&b<=135?w=this.setCurrentWindow(w,G):152<=b&&b<=159?w=this.defineWindow(w,G):b===136?w=this.clearWindows(w,G):b===140?w=this.deleteWindows(w,G):b===137?w=this.displayWindows(w,G):b===138?w=this.hideWindows(w,G):b===139?w=this.toggleWindows(w,G):b===151?w=this.setWindowAttributes(w,G):b===144?w=this.setPenAttributes(w,G):b===145?w=this.setPenColor(w,G):b===146?w=this.setPenLocation(w,G):b===143?G=this.reset(w,G):b===8?G.currentWindow.backspace():b===12?G.currentWindow.clearText():b===13?G.currentWindow.pendingNewLine=!0:b===14?G.currentWindow.clearText():b===141&&w++},Tt.prototype.extendedCommands=function(p,x){var S=this.current708Packet.data,b=S[++p];return Kt(b)&&(p=this.handleText(p,x,{isExtended:!0})),p},Tt.prototype.getPts=function(p){return this.current708Packet.ptsVals[Math.floor(p/2)]},Tt.prototype.initService=function(p,x){var b="SERVICE"+p,S=this,b,w;return b in this.serviceEncodings&&(w=this.serviceEncodings[b]),this.services[p]=new vr(p,w,S),this.services[p].init(this.getPts(x),function(R){S.flushDisplayed(R,S.services[p])}),this.services[p]},Tt.prototype.handleText=function(p,x,S){var b=S&&S.isExtended,w=S&&S.isMultiByte,R=this.current708Packet.data,G=b?4096:0,Y=R[p],J=R[p+1],re=x.currentWindow,he,ve;function qe(Ee){return Ee.map(Ct=>("0"+(Ct&255).toString(16)).slice(-2)).join("")}if(w?(ve=[Y,J],p++):ve=[Y],x.textDecoder_&&!b)he=x.textDecoder_.decode(new Uint8Array(ve));else if(w){const Ee=qe(ve);he=String.fromCharCode(parseInt(Ee,16))}else he=Vt(G|Y);return re.pendingNewLine&&!re.isEmpty()&&re.newLine(this.getPts(p)),re.pendingNewLine=!1,re.addText(he),p},Tt.prototype.multiByteCharacter=function(p,x){var S=this.current708Packet.data,b=S[p+1],w=S[p+2];return Kt(b)&&Kt(w)&&(p=this.handleText(++p,x,{isMultiByte:!0})),p},Tt.prototype.setCurrentWindow=function(p,x){var S=this.current708Packet.data,b=S[p],w=b&7;return x.setCurrentWindow(w),p},Tt.prototype.defineWindow=function(p,x){var S=this.current708Packet.data,b=S[p],w=b&7;x.setCurrentWindow(w);var R=x.currentWindow;return b=S[++p],R.visible=(b&32)>>5,R.rowLock=(b&16)>>4,R.columnLock=(b&8)>>3,R.priority=b&7,b=S[++p],R.relativePositioning=(b&128)>>7,R.anchorVertical=b&127,b=S[++p],R.anchorHorizontal=b,b=S[++p],R.anchorPoint=(b&240)>>4,R.rowCount=b&15,b=S[++p],R.columnCount=b&63,b=S[++p],R.windowStyle=(b&56)>>3,R.penStyle=b&7,R.virtualRowCount=R.rowCount+1,p},Tt.prototype.setWindowAttributes=function(p,x){var S=this.current708Packet.data,b=S[p],w=x.currentWindow.winAttr;return b=S[++p],w.fillOpacity=(b&192)>>6,w.fillRed=(b&48)>>4,w.fillGreen=(b&12)>>2,w.fillBlue=b&3,b=S[++p],w.borderType=(b&192)>>6,w.borderRed=(b&48)>>4,w.borderGreen=(b&12)>>2,w.borderBlue=b&3,b=S[++p],w.borderType+=(b&128)>>5,w.wordWrap=(b&64)>>6,w.printDirection=(b&48)>>4,w.scrollDirection=(b&12)>>2,w.justify=b&3,b=S[++p],w.effectSpeed=(b&240)>>4,w.effectDirection=(b&12)>>2,w.displayEffect=b&3,p},Tt.prototype.flushDisplayed=function(p,x){for(var S=[],b=0;b<8;b++)x.windows[b].visible&&!x.windows[b].isEmpty()&&S.push(x.windows[b].getText());x.endPts=p,x.text=S.join(`

`),this.pushCaption(x),x.startPts=p},Tt.prototype.pushCaption=function(p){p.text!==""&&(this.trigger("data",{startPts:p.startPts,endPts:p.endPts,text:p.text,stream:"cc708_"+p.serviceNum}),p.text="",p.startPts=p.endPts)},Tt.prototype.displayWindows=function(p,x){var S=this.current708Packet.data,b=S[++p],w=this.getPts(p);this.flushDisplayed(w,x);for(var R=0;R<8;R++)b&1<<R&&(x.windows[R].visible=1);return p},Tt.prototype.hideWindows=function(p,x){var S=this.current708Packet.data,b=S[++p],w=this.getPts(p);this.flushDisplayed(w,x);for(var R=0;R<8;R++)b&1<<R&&(x.windows[R].visible=0);return p},Tt.prototype.toggleWindows=function(p,x){var S=this.current708Packet.data,b=S[++p],w=this.getPts(p);this.flushDisplayed(w,x);for(var R=0;R<8;R++)b&1<<R&&(x.windows[R].visible^=1);return p},Tt.prototype.clearWindows=function(p,x){var S=this.current708Packet.data,b=S[++p],w=this.getPts(p);this.flushDisplayed(w,x);for(var R=0;R<8;R++)b&1<<R&&x.windows[R].clearText();return p},Tt.prototype.deleteWindows=function(p,x){var S=this.current708Packet.data,b=S[++p],w=this.getPts(p);this.flushDisplayed(w,x);for(var R=0;R<8;R++)b&1<<R&&x.windows[R].reset();return p},Tt.prototype.setPenAttributes=function(p,x){var S=this.current708Packet.data,b=S[p],w=x.currentWindow.penAttr;return b=S[++p],w.textTag=(b&240)>>4,w.offset=(b&12)>>2,w.penSize=b&3,b=S[++p],w.italics=(b&128)>>7,w.underline=(b&64)>>6,w.edgeType=(b&56)>>3,w.fontStyle=b&7,p},Tt.prototype.setPenColor=function(p,x){var S=this.current708Packet.data,b=S[p],w=x.currentWindow.penColor;return b=S[++p],w.fgOpacity=(b&192)>>6,w.fgRed=(b&48)>>4,w.fgGreen=(b&12)>>2,w.fgBlue=b&3,b=S[++p],w.bgOpacity=(b&192)>>6,w.bgRed=(b&48)>>4,w.bgGreen=(b&12)>>2,w.bgBlue=b&3,b=S[++p],w.edgeRed=(b&48)>>4,w.edgeGreen=(b&12)>>2,w.edgeBlue=b&3,p},Tt.prototype.setPenLocation=function(p,x){var S=this.current708Packet.data,b=S[p],w=x.currentWindow.penLoc;return x.currentWindow.pendingNewLine=!0,b=S[++p],w.row=b&15,b=S[++p],w.column=b&63,p},Tt.prototype.reset=function(p,x){var S=this.getPts(p);return this.flushDisplayed(S,x),this.initService(x.serviceNum,p)};var xr={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,304:174,305:176,306:189,307:191,308:8482,309:162,310:163,311:9834,312:224,313:160,314:232,315:226,316:234,317:238,318:244,319:251,544:193,545:201,546:211,547:218,548:220,549:252,550:8216,551:161,552:42,553:39,554:8212,555:169,556:8480,557:8226,558:8220,559:8221,560:192,561:194,562:199,563:200,564:202,565:203,566:235,567:206,568:207,569:239,570:212,571:217,572:249,573:219,574:171,575:187,800:195,801:227,802:205,803:204,804:236,805:210,806:242,807:213,808:245,809:123,810:125,811:92,812:94,813:95,814:124,815:126,816:196,817:228,818:214,819:246,820:223,821:165,822:164,823:9474,824:197,825:229,826:216,827:248,828:9484,829:9488,830:9492,831:9496},Zr=function(p){return p===null?"":(p=xr[p]||p,String.fromCharCode(p))},Br=14,jr=[4352,4384,4608,4640,5376,5408,5632,5664,5888,5920,4096,4864,4896,5120,5152],Pn=function(){for(var p=[],x=Br+1;x--;)p.push({text:"",indent:0,offset:0});return p},ir=function(p,x){ir.prototype.init.call(this),this.field_=p||0,this.dataChannel_=x||0,this.name_="CC"+((this.field_<<1|this.dataChannel_)+1),this.setConstants(),this.reset(),this.push=function(S){var b,w,R,G,Y;if(b=S.ccData&32639,b===this.lastControlCode_){this.lastControlCode_=null;return}if((b&61440)===4096?this.lastControlCode_=b:b!==this.PADDING_&&(this.lastControlCode_=null),R=b>>>8,G=b&255,b!==this.PADDING_)if(b===this.RESUME_CAPTION_LOADING_)this.mode_="popOn";else if(b===this.END_OF_CAPTION_)this.mode_="popOn",this.clearFormatting(S.pts),this.flushDisplayed(S.pts),w=this.displayed_,this.displayed_=this.nonDisplayed_,this.nonDisplayed_=w,this.startPts_=S.pts;else if(b===this.ROLL_UP_2_ROWS_)this.rollUpRows_=2,this.setRollUp(S.pts);else if(b===this.ROLL_UP_3_ROWS_)this.rollUpRows_=3,this.setRollUp(S.pts);else if(b===this.ROLL_UP_4_ROWS_)this.rollUpRows_=4,this.setRollUp(S.pts);else if(b===this.CARRIAGE_RETURN_)this.clearFormatting(S.pts),this.flushDisplayed(S.pts),this.shiftRowsUp_(),this.startPts_=S.pts;else if(b===this.BACKSPACE_)this.mode_==="popOn"?this.nonDisplayed_[this.row_].text=this.nonDisplayed_[this.row_].text.slice(0,-1):this.displayed_[this.row_].text=this.displayed_[this.row_].text.slice(0,-1);else if(b===this.ERASE_DISPLAYED_MEMORY_)this.flushDisplayed(S.pts),this.displayed_=Pn();else if(b===this.ERASE_NON_DISPLAYED_MEMORY_)this.nonDisplayed_=Pn();else if(b===this.RESUME_DIRECT_CAPTIONING_)this.mode_!=="paintOn"&&(this.flushDisplayed(S.pts),this.displayed_=Pn()),this.mode_="paintOn",this.startPts_=S.pts;else if(this.isSpecialCharacter(R,G))R=(R&3)<<8,Y=Zr(R|G),this[this.mode_](S.pts,Y),this.column_++;else if(this.isExtCharacter(R,G))this.mode_==="popOn"?this.nonDisplayed_[this.row_].text=this.nonDisplayed_[this.row_].text.slice(0,-1):this.displayed_[this.row_].text=this.displayed_[this.row_].text.slice(0,-1),R=(R&3)<<8,Y=Zr(R|G),this[this.mode_](S.pts,Y),this.column_++;else if(this.isMidRowCode(R,G))this.clearFormatting(S.pts),this[this.mode_](S.pts," "),this.column_++,(G&14)===14&&this.addFormatting(S.pts,["i"]),(G&1)===1&&this.addFormatting(S.pts,["u"]);else if(this.isOffsetControlCode(R,G)){const re=G&3;this.nonDisplayed_[this.row_].offset=re,this.column_+=re}else if(this.isPAC(R,G)){var J=jr.indexOf(b&7968);if(this.mode_==="rollUp"&&(J-this.rollUpRows_+1<0&&(J=this.rollUpRows_-1),this.setRollUp(S.pts,J)),J!==this.row_&&J>=0&&J<=14&&(this.clearFormatting(S.pts),this.row_=J),G&1&&this.formatting_.indexOf("u")===-1&&this.addFormatting(S.pts,["u"]),(b&16)===16){const re=(b&14)>>1;this.column_=re*4,this.nonDisplayed_[this.row_].indent+=re}this.isColorPAC(G)&&(G&14)===14&&this.addFormatting(S.pts,["i"])}else this.isNormalChar(R)&&(G===0&&(G=null),Y=Zr(R),Y+=Zr(G),this[this.mode_](S.pts,Y),this.column_+=Y.length)}};ir.prototype=new _t,ir.prototype.flushDisplayed=function(p){const x=b=>{this.trigger("log",{level:"warn",message:"Skipping a malformed 608 caption at index "+b+"."})},S=[];this.displayed_.forEach((b,w)=>{if(b&&b.text&&b.text.length){try{b.text=b.text.trim()}catch{x(w)}b.text.length&&S.push({text:b.text,line:w+1,position:10+Math.min(70,b.indent*10)+b.offset*2.5})}else b==null&&x(w)}),S.length&&this.trigger("data",{startPts:this.startPts_,endPts:p,content:S,stream:this.name_})},ir.prototype.reset=function(){this.mode_="popOn",this.topRow_=0,this.startPts_=0,this.displayed_=Pn(),this.nonDisplayed_=Pn(),this.lastControlCode_=null,this.column_=0,this.row_=Br,this.rollUpRows_=2,this.formatting_=[]},ir.prototype.setConstants=function(){this.dataChannel_===0?(this.BASE_=16,this.EXT_=17,this.CONTROL_=(20|this.field_)<<8,this.OFFSET_=23):this.dataChannel_===1&&(this.BASE_=24,this.EXT_=25,this.CONTROL_=(28|this.field_)<<8,this.OFFSET_=31),this.PADDING_=0,this.RESUME_CAPTION_LOADING_=this.CONTROL_|32,this.END_OF_CAPTION_=this.CONTROL_|47,this.ROLL_UP_2_ROWS_=this.CONTROL_|37,this.ROLL_UP_3_ROWS_=this.CONTROL_|38,this.ROLL_UP_4_ROWS_=this.CONTROL_|39,this.CARRIAGE_RETURN_=this.CONTROL_|45,this.RESUME_DIRECT_CAPTIONING_=this.CONTROL_|41,this.BACKSPACE_=this.CONTROL_|33,this.ERASE_DISPLAYED_MEMORY_=this.CONTROL_|44,this.ERASE_NON_DISPLAYED_MEMORY_=this.CONTROL_|46},ir.prototype.isSpecialCharacter=function(p,x){return p===this.EXT_&&x>=48&&x<=63},ir.prototype.isExtCharacter=function(p,x){return(p===this.EXT_+1||p===this.EXT_+2)&&x>=32&&x<=63},ir.prototype.isMidRowCode=function(p,x){return p===this.EXT_&&x>=32&&x<=47},ir.prototype.isOffsetControlCode=function(p,x){return p===this.OFFSET_&&x>=33&&x<=35},ir.prototype.isPAC=function(p,x){return p>=this.BASE_&&p<this.BASE_+8&&x>=64&&x<=127},ir.prototype.isColorPAC=function(p){return p>=64&&p<=79||p>=96&&p<=127},ir.prototype.isNormalChar=function(p){return p>=32&&p<=127},ir.prototype.setRollUp=function(p,x){if(this.mode_!=="rollUp"&&(this.row_=Br,this.mode_="rollUp",this.flushDisplayed(p),this.nonDisplayed_=Pn(),this.displayed_=Pn()),x!==void 0&&x!==this.row_)for(var S=0;S<this.rollUpRows_;S++)this.displayed_[x-S]=this.displayed_[this.row_-S],this.displayed_[this.row_-S]={text:"",indent:0,offset:0};x===void 0&&(x=this.row_),this.topRow_=x-this.rollUpRows_+1},ir.prototype.addFormatting=function(p,x){this.formatting_=this.formatting_.concat(x);var S=x.reduce(function(b,w){return b+"<"+w+">"},"");this[this.mode_](p,S)},ir.prototype.clearFormatting=function(p){if(this.formatting_.length){var x=this.formatting_.reverse().reduce(function(S,b){return S+"</"+b+">"},"");this.formatting_=[],this[this.mode_](p,x)}},ir.prototype.popOn=function(p,x){var S=this.nonDisplayed_[this.row_].text;S+=x,this.nonDisplayed_[this.row_].text=S},ir.prototype.rollUp=function(p,x){var S=this.displayed_[this.row_].text;S+=x,this.displayed_[this.row_].text=S},ir.prototype.shiftRowsUp_=function(){var p;for(p=0;p<this.topRow_;p++)this.displayed_[p]={text:"",indent:0,offset:0};for(p=this.row_+1;p<Br+1;p++)this.displayed_[p]={text:"",indent:0,offset:0};for(p=this.topRow_;p<this.row_;p++)this.displayed_[p]=this.displayed_[p+1];this.displayed_[this.row_]={text:"",indent:0,offset:0}},ir.prototype.paintOn=function(p,x){var S=this.displayed_[this.row_].text;S+=x,this.displayed_[this.row_].text=S};var Ti={CaptionStream:ct,Cea608Stream:ir,Cea708Stream:Tt},yn={H264_STREAM_TYPE:27,ADTS_STREAM_TYPE:15,METADATA_STREAM_TYPE:21},Cs=t,nn=8589934592,ws=4294967296,hi="shared",si=function(p,x){var S=1;for(p>x&&(S=-1);Math.abs(x-p)>ws;)p+=S*nn;return p},Mr=function(p){var x,S;Mr.prototype.init.call(this),this.type_=p||hi,this.push=function(b){if(b.type==="metadata"){this.trigger("data",b);return}this.type_!==hi&&b.type!==this.type_||(S===void 0&&(S=b.dts),b.dts=si(b.dts,S),b.pts=si(b.pts,S),x=b.dts,this.trigger("data",b))},this.flush=function(){S=x,this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")},this.discontinuity=function(){S=void 0,x=void 0},this.reset=function(){this.discontinuity(),this.trigger("reset")}};Mr.prototype=new Cs;var ke={TimestampRolloverStream:Mr,handleRollover:si},$e=(p,x,S)=>{if(!p)return-1;for(var b=S;b<p.length;b++)if(p[b]===x)return b;return-1},Je={typedArrayIndexOf:$e},tt=Je.typedArrayIndexOf,xt={Utf8:3},kt=function(p,x,S){var b,w="";for(b=x;b<S;b++)w+="%"+("00"+p[b].toString(16)).slice(-2);return w},Bt=function(p,x,S){return decodeURIComponent(kt(p,x,S))},Tr=function(p,x,S){return unescape(kt(p,x,S))},Wr=function(p){return p[0]<<21|p[1]<<14|p[2]<<7|p[3]},xn={APIC:function(p){var x=1,S,b,w="-->";p.data[0]===xt.Utf8&&(S=tt(p.data,0,x),!(S<0)&&(p.mimeType=Tr(p.data,x,S),x=S+1,p.pictureType=p.data[x],x++,b=tt(p.data,0,x),!(b<0)&&(p.description=Bt(p.data,x,b),x=b+1,p.mimeType===w?p.url=Tr(p.data,x,p.data.length):p.pictureData=p.data.subarray(x,p.data.length))))},"T*":function(p){p.data[0]===xt.Utf8&&(p.value=Bt(p.data,1,p.data.length).replace(/\0*$/,""),p.values=p.value.split("\0"))},TXXX:function(p){var x;p.data[0]===xt.Utf8&&(x=tt(p.data,0,1),x!==-1&&(p.description=Bt(p.data,1,x),p.value=Bt(p.data,x+1,p.data.length).replace(/\0*$/,""),p.data=p.value))},"W*":function(p){p.url=Tr(p.data,0,p.data.length).replace(/\0.*$/,"")},WXXX:function(p){var x;p.data[0]===xt.Utf8&&(x=tt(p.data,0,1),x!==-1&&(p.description=Bt(p.data,1,x),p.url=Tr(p.data,x+1,p.data.length).replace(/\0.*$/,"")))},PRIV:function(p){var x;for(x=0;x<p.data.length;x++)if(p.data[x]===0){p.owner=Tr(p.data,0,x);break}p.privateData=p.data.subarray(x+1),p.data=p.privateData}},Er=function(p){var x,S,b=10,w=0,R=[];if(!(p.length<10||p[0]!==73||p[1]!==68||p[2]!==51)){w=Wr(p.subarray(6,10)),w+=10;var G=p[5]&64;G&&(b+=4,b+=Wr(p.subarray(10,14)),w-=Wr(p.subarray(16,20)));do{if(x=Wr(p.subarray(b+4,b+8)),x<1)break;S=String.fromCharCode(p[b],p[b+1],p[b+2],p[b+3]);var Y={id:S,data:p.subarray(b+10,b+x+10)};Y.key=Y.id,xn[Y.id]?xn[Y.id](Y):Y.id[0]==="T"?xn["T*"](Y):Y.id[0]==="W"&&xn["W*"](Y),R.push(Y),b+=10,b+=x}while(b<w);return R}},fi={parseId3Frames:Er,parseSyncSafeInteger:Wr,frameParsers:xn},zr=t,On=yn,$n=fi,Es;Es=function(p){var x={descriptor:p&&p.descriptor},S=0,b=[],w=0,R;if(Es.prototype.init.call(this),this.dispatchType=On.METADATA_STREAM_TYPE.toString(16),x.descriptor)for(R=0;R<x.descriptor.length;R++)this.dispatchType+=("00"+x.descriptor[R].toString(16)).slice(-2);this.push=function(G){var Y,J,re,he,ve,qe;if(G.type==="timed-metadata"){if(G.dataAlignmentIndicator&&(w=0,b.length=0),b.length===0&&(G.data.length<10||G.data[0]!==73||G.data[1]!==68||G.data[2]!==51)){this.trigger("log",{level:"warn",message:"Skipping unrecognized metadata packet"});return}if(b.push(G),w+=G.data.byteLength,b.length===1&&(S=$n.parseSyncSafeInteger(G.data.subarray(6,10)),S+=10),!(w<S)){for(Y={data:new Uint8Array(S),frames:[],pts:b[0].pts,dts:b[0].dts},ve=0;ve<S;)Y.data.set(b[0].data.subarray(0,S-ve),ve),ve+=b[0].data.byteLength,w-=b[0].data.byteLength,b.shift();J=10,Y.data[5]&64&&(J+=4,J+=$n.parseSyncSafeInteger(Y.data.subarray(10,14)),S-=$n.parseSyncSafeInteger(Y.data.subarray(16,20)));do{if(re=$n.parseSyncSafeInteger(Y.data.subarray(J+4,J+8)),re<1){this.trigger("log",{level:"warn",message:"Malformed ID3 frame encountered. Skipping remaining metadata parsing."});break}if(qe=String.fromCharCode(Y.data[J],Y.data[J+1],Y.data[J+2],Y.data[J+3]),he={id:qe,data:Y.data.subarray(J+10,J+re+10)},he.key=he.id,$n.frameParsers[he.id]?$n.frameParsers[he.id](he):he.id[0]==="T"?$n.frameParsers["T*"](he):he.id[0]==="W"&&$n.frameParsers["W*"](he),he.owner==="com.apple.streaming.transportStreamTimestamp"){var Ee=he.data,Ct=(Ee[3]&1)<<30|Ee[4]<<22|Ee[5]<<14|Ee[6]<<6|Ee[7]>>>2;Ct*=4,Ct+=Ee[7]&3,he.timeStamp=Ct,Y.pts===void 0&&Y.dts===void 0&&(Y.pts=he.timeStamp,Y.dts=he.timeStamp),this.trigger("timestamp",he)}Y.frames.push(he),J+=10,J+=re}while(J<S);this.trigger("data",Y)}}}},Es.prototype=new zr;var Hc=Es,ks=t,zi=Ti,Rn=yn,Xu=ke.TimestampRolloverStream,qr,ls,fa,Pi=188,Wa=71;qr=function(){var p=new Uint8Array(Pi),x=0;qr.prototype.init.call(this),this.push=function(S){var b=0,w=Pi,R;for(x?(R=new Uint8Array(S.byteLength+x),R.set(p.subarray(0,x)),R.set(S,x),x=0):R=S;w<R.byteLength;){if(R[b]===Wa&&R[w]===Wa){this.trigger("data",R.subarray(b,w)),b+=Pi,w+=Pi;continue}b++,w++}b<R.byteLength&&(p.set(R.subarray(b),0),x=R.byteLength-b)},this.flush=function(){x===Pi&&p[0]===Wa&&(this.trigger("data",p),x=0),this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")},this.reset=function(){x=0,this.trigger("reset")}},qr.prototype=new ks,ls=function(){var p,x,S,b;ls.prototype.init.call(this),b=this,this.packetsWaitingForPmt=[],this.programMapTable=void 0,p=function(w,R){var G=0;R.payloadUnitStartIndicator&&(G+=w[G]+1),R.type==="pat"?x(w.subarray(G),R):S(w.subarray(G),R)},x=function(w,R){R.section_number=w[7],R.last_section_number=w[8],b.pmtPid=(w[10]&31)<<8|w[11],R.pmtPid=b.pmtPid},S=function(w,R){var G,Y,J,re;if(w[5]&1){for(b.programMapTable={video:null,audio:null,"timed-metadata":{}},G=(w[1]&15)<<8|w[2],Y=3+G-4,J=(w[10]&15)<<8|w[11],re=12+J;re<Y;){var he=w[re],ve=(w[re+1]&31)<<8|w[re+2];he===Rn.H264_STREAM_TYPE&&b.programMapTable.video===null?b.programMapTable.video=ve:he===Rn.ADTS_STREAM_TYPE&&b.programMapTable.audio===null?b.programMapTable.audio=ve:he===Rn.METADATA_STREAM_TYPE&&(b.programMapTable["timed-metadata"][ve]=he),re+=((w[re+3]&15)<<8|w[re+4])+5}R.programMapTable=b.programMapTable}},this.push=function(w){var R={},G=4;if(R.payloadUnitStartIndicator=!!(w[1]&64),R.pid=w[1]&31,R.pid<<=8,R.pid|=w[2],(w[3]&48)>>>4>1&&(G+=w[G]+1),R.pid===0)R.type="pat",p(w.subarray(G),R),this.trigger("data",R);else if(R.pid===this.pmtPid)for(R.type="pmt",p(w.subarray(G),R),this.trigger("data",R);this.packetsWaitingForPmt.length;)this.processPes_.apply(this,this.packetsWaitingForPmt.shift());else this.programMapTable===void 0?this.packetsWaitingForPmt.push([w,G,R]):this.processPes_(w,G,R)},this.processPes_=function(w,R,G){G.pid===this.programMapTable.video?G.streamType=Rn.H264_STREAM_TYPE:G.pid===this.programMapTable.audio?G.streamType=Rn.ADTS_STREAM_TYPE:G.streamType=this.programMapTable["timed-metadata"][G.pid],G.type="pes",G.data=w.subarray(R),this.trigger("data",G)}},ls.prototype=new ks,ls.STREAM_TYPES={h264:27,adts:15},fa=function(){var p=this,x=!1,S={data:[],size:0},b={data:[],size:0},w={data:[],size:0},R,G=function(J,re){var he;const ve=J[0]<<16|J[1]<<8|J[2];re.data=new Uint8Array,ve===1&&(re.packetLength=6+(J[4]<<8|J[5]),re.dataAlignmentIndicator=(J[6]&4)!==0,he=J[7],he&192&&(re.pts=(J[9]&14)<<27|(J[10]&255)<<20|(J[11]&254)<<12|(J[12]&255)<<5|(J[13]&254)>>>3,re.pts*=4,re.pts+=(J[13]&6)>>>1,re.dts=re.pts,he&64&&(re.dts=(J[14]&14)<<27|(J[15]&255)<<20|(J[16]&254)<<12|(J[17]&255)<<5|(J[18]&254)>>>3,re.dts*=4,re.dts+=(J[18]&6)>>>1)),re.data=J.subarray(9+J[8]))},Y=function(J,re,he){var ve=new Uint8Array(J.size),qe={type:re},Ee=0,Ct=0,Wt=!1,Gr;if(!(!J.data.length||J.size<9)){for(qe.trackId=J.data[0].pid,Ee=0;Ee<J.data.length;Ee++)Gr=J.data[Ee],ve.set(Gr.data,Ct),Ct+=Gr.data.byteLength;G(ve,qe),Wt=re==="video"||qe.packetLength<=J.size,(he||Wt)&&(J.size=0,J.data.length=0),Wt&&p.trigger("data",qe)}};fa.prototype.init.call(this),this.push=function(J){({pat:function(){},pes:function(){var re,he;switch(J.streamType){case Rn.H264_STREAM_TYPE:re=S,he="video";break;case Rn.ADTS_STREAM_TYPE:re=b,he="audio";break;case Rn.METADATA_STREAM_TYPE:re=w,he="timed-metadata";break;default:return}J.payloadUnitStartIndicator&&Y(re,he,!0),re.data.push(J),re.size+=J.data.byteLength},pmt:function(){var re={type:"metadata",tracks:[]};R=J.programMapTable,R.video!==null&&re.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+R.video,codec:"avc",type:"video"}),R.audio!==null&&re.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+R.audio,codec:"adts",type:"audio"}),x=!0,p.trigger("data",re)}})[J.type]()},this.reset=function(){S.size=0,S.data.length=0,b.size=0,b.data.length=0,this.trigger("reset")},this.flushStreams_=function(){Y(S,"video"),Y(b,"audio"),Y(w,"timed-metadata")},this.flush=function(){if(!x&&R){var J={type:"metadata",tracks:[]};R.video!==null&&J.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+R.video,codec:"avc",type:"video"}),R.audio!==null&&J.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+R.audio,codec:"adts",type:"audio"}),p.trigger("data",J)}x=!1,this.flushStreams_(),this.trigger("done")}},fa.prototype=new ks;var Hl={PAT_PID:0,MP2T_PACKET_LENGTH:Pi,TransportPacketStream:qr,TransportParseStream:ls,ElementaryStream:fa,TimestampRolloverStream:Xu,CaptionStream:zi.CaptionStream,Cea608Stream:zi.Cea608Stream,Cea708Stream:zi.Cea708Stream,MetadataStream:Hc};for(var To in Rn)Rn.hasOwnProperty(To)&&(Hl[To]=Rn[To]);var Yu=Hl,Vl=t,pa=Ut.ONE_SECOND_IN_TS,Ci,Ri=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];Ci=function(p){var x,S=0;Ci.prototype.init.call(this),this.skipWarn_=function(b,w){this.trigger("log",{level:"warn",message:`adts skiping bytes ${b} to ${w} in frame ${S} outside syncword`})},this.push=function(b){var w=0,R,G,Y,J,re;if(p||(S=0),b.type==="audio"){x&&x.length?(Y=x,x=new Uint8Array(Y.byteLength+b.data.byteLength),x.set(Y),x.set(b.data,Y.byteLength)):x=b.data;for(var he;w+7<x.length;){if(x[w]!==255||(x[w+1]&246)!==240){typeof he!="number"&&(he=w),w++;continue}if(typeof he=="number"&&(this.skipWarn_(he,w),he=null),G=(~x[w+1]&1)*2,R=(x[w+3]&3)<<11|x[w+4]<<3|(x[w+5]&224)>>5,J=((x[w+6]&3)+1)*1024,re=J*pa/Ri[(x[w+2]&60)>>>2],x.byteLength-w<R)break;this.trigger("data",{pts:b.pts+S*re,dts:b.dts+S*re,sampleCount:J,audioobjecttype:(x[w+2]>>>6&3)+1,channelcount:(x[w+2]&1)<<2|(x[w+3]&192)>>>6,samplerate:Ri[(x[w+2]&60)>>>2],samplingfrequencyindex:(x[w+2]&60)>>>2,samplesize:16,data:x.subarray(w+7+G,w+R)}),S++,w+=R}typeof he=="number"&&(this.skipWarn_(he,w),he=null),x=x.subarray(w)}},this.flush=function(){S=0,this.trigger("done")},this.reset=function(){x=void 0,this.trigger("reset")},this.endTimeline=function(){x=void 0,this.trigger("endedtimeline")}},Ci.prototype=new Vl;var ma=Ci,qa;qa=function(p){var x=p.byteLength,S=0,b=0;this.length=function(){return 8*x},this.bitsAvailable=function(){return 8*x+b},this.loadWord=function(){var w=p.byteLength-x,R=new Uint8Array(4),G=Math.min(4,x);if(G===0)throw new Error("no bytes available");R.set(p.subarray(w,w+G)),S=new DataView(R.buffer).getUint32(0),b=G*8,x-=G},this.skipBits=function(w){var R;b>w?(S<<=w,b-=w):(w-=b,R=Math.floor(w/8),w-=R*8,x-=R,this.loadWord(),S<<=w,b-=w)},this.readBits=function(w){var R=Math.min(b,w),G=S>>>32-R;return b-=R,b>0?S<<=R:x>0&&this.loadWord(),R=w-R,R>0?G<<R|this.readBits(R):G},this.skipLeadingZeros=function(){var w;for(w=0;w<b;++w)if((S&2147483648>>>w)!==0)return S<<=w,b-=w,w;return this.loadWord(),w+this.skipLeadingZeros()},this.skipUnsignedExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.skipExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.readUnsignedExpGolomb=function(){var w=this.skipLeadingZeros();return this.readBits(w+1)-1},this.readExpGolomb=function(){var w=this.readUnsignedExpGolomb();return 1&w?1+w>>>1:-1*(w>>>1)},this.readBoolean=function(){return this.readBits(1)===1},this.readUnsignedByte=function(){return this.readBits(8)},this.loadWord()};var ga=qa,Wl=t,Vc=ga,Hi,Ga,ql;Ga=function(){var p=0,x,S;Ga.prototype.init.call(this),this.push=function(b){var w;S?(w=new Uint8Array(S.byteLength+b.data.byteLength),w.set(S),w.set(b.data,S.byteLength),S=w):S=b.data;for(var R=S.byteLength;p<R-3;p++)if(S[p+2]===1){x=p+5;break}for(;x<R;)switch(S[x]){case 0:if(S[x-1]!==0){x+=2;break}else if(S[x-2]!==0){x++;break}p+3!==x-2&&this.trigger("data",S.subarray(p+3,x-2));do x++;while(S[x]!==1&&x<R);p=x-2,x+=3;break;case 1:if(S[x-1]!==0||S[x-2]!==0){x+=3;break}this.trigger("data",S.subarray(p+3,x-2)),p=x-2,x+=3;break;default:x+=3;break}S=S.subarray(p),x-=p,p=0},this.reset=function(){S=null,p=0,this.trigger("reset")},this.flush=function(){S&&S.byteLength>3&&this.trigger("data",S.subarray(p+3)),S=null,p=0,this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")}},Ga.prototype=new Wl,ql={100:!0,110:!0,122:!0,244:!0,44:!0,83:!0,86:!0,118:!0,128:!0,138:!0,139:!0,134:!0},Hi=function(){var p=new Ga,x,S,b,w,R,G,Y;Hi.prototype.init.call(this),x=this,this.push=function(J){J.type==="video"&&(S=J.trackId,b=J.pts,w=J.dts,p.push(J))},p.on("data",function(J){var re={trackId:S,pts:b,dts:w,data:J,nalUnitTypeCode:J[0]&31};switch(re.nalUnitTypeCode){case 5:re.nalUnitType="slice_layer_without_partitioning_rbsp_idr";break;case 6:re.nalUnitType="sei_rbsp",re.escapedRBSP=R(J.subarray(1));break;case 7:re.nalUnitType="seq_parameter_set_rbsp",re.escapedRBSP=R(J.subarray(1)),re.config=G(re.escapedRBSP);break;case 8:re.nalUnitType="pic_parameter_set_rbsp";break;case 9:re.nalUnitType="access_unit_delimiter_rbsp";break}x.trigger("data",re)}),p.on("done",function(){x.trigger("done")}),p.on("partialdone",function(){x.trigger("partialdone")}),p.on("reset",function(){x.trigger("reset")}),p.on("endedtimeline",function(){x.trigger("endedtimeline")}),this.flush=function(){p.flush()},this.partialFlush=function(){p.partialFlush()},this.reset=function(){p.reset()},this.endTimeline=function(){p.endTimeline()},Y=function(J,re){var he=8,ve=8,qe,Ee;for(qe=0;qe<J;qe++)ve!==0&&(Ee=re.readExpGolomb(),ve=(he+Ee+256)%256),he=ve===0?he:ve},R=function(J){for(var re=J.byteLength,he=[],ve=1,qe,Ee;ve<re-2;)J[ve]===0&&J[ve+1]===0&&J[ve+2]===3?(he.push(ve+2),ve+=2):ve++;if(he.length===0)return J;qe=re-he.length,Ee=new Uint8Array(qe);var Ct=0;for(ve=0;ve<qe;Ct++,ve++)Ct===he[0]&&(Ct++,he.shift()),Ee[ve]=J[Ct];return Ee},G=function(J){var re=0,he=0,ve=0,qe=0,Ee,Ct,Wt,Gr,pn,gi,Ro,iu,lc,ba,Sa,Jt=[1,1],gn,Kn;if(Ee=new Vc(J),Ct=Ee.readUnsignedByte(),Gr=Ee.readUnsignedByte(),Wt=Ee.readUnsignedByte(),Ee.skipUnsignedExpGolomb(),ql[Ct]&&(pn=Ee.readUnsignedExpGolomb(),pn===3&&Ee.skipBits(1),Ee.skipUnsignedExpGolomb(),Ee.skipUnsignedExpGolomb(),Ee.skipBits(1),Ee.readBoolean()))for(Sa=pn!==3?8:12,Kn=0;Kn<Sa;Kn++)Ee.readBoolean()&&(Kn<6?Y(16,Ee):Y(64,Ee));if(Ee.skipUnsignedExpGolomb(),gi=Ee.readUnsignedExpGolomb(),gi===0)Ee.readUnsignedExpGolomb();else if(gi===1)for(Ee.skipBits(1),Ee.skipExpGolomb(),Ee.skipExpGolomb(),Ro=Ee.readUnsignedExpGolomb(),Kn=0;Kn<Ro;Kn++)Ee.skipExpGolomb();if(Ee.skipUnsignedExpGolomb(),Ee.skipBits(1),iu=Ee.readUnsignedExpGolomb(),lc=Ee.readUnsignedExpGolomb(),ba=Ee.readBits(1),ba===0&&Ee.skipBits(1),Ee.skipBits(1),Ee.readBoolean()&&(re=Ee.readUnsignedExpGolomb(),he=Ee.readUnsignedExpGolomb(),ve=Ee.readUnsignedExpGolomb(),qe=Ee.readUnsignedExpGolomb()),Ee.readBoolean()&&Ee.readBoolean()){switch(gn=Ee.readUnsignedByte(),gn){case 1:Jt=[1,1];break;case 2:Jt=[12,11];break;case 3:Jt=[10,11];break;case 4:Jt=[16,11];break;case 5:Jt=[40,33];break;case 6:Jt=[24,11];break;case 7:Jt=[20,11];break;case 8:Jt=[32,11];break;case 9:Jt=[80,33];break;case 10:Jt=[18,11];break;case 11:Jt=[15,11];break;case 12:Jt=[64,33];break;case 13:Jt=[160,99];break;case 14:Jt=[4,3];break;case 15:Jt=[3,2];break;case 16:Jt=[2,1];break;case 255:{Jt=[Ee.readUnsignedByte()<<8|Ee.readUnsignedByte(),Ee.readUnsignedByte()<<8|Ee.readUnsignedByte()];break}}Jt&&Jt[0]/Jt[1]}return{profileIdc:Ct,levelIdc:Wt,profileCompatibility:Gr,width:(iu+1)*16-re*2-he*2,height:(2-ba)*(lc+1)*16-ve*2-qe*2,sarRatio:Jt}}},Hi.prototype=new Wl;var Gl={H264Stream:Hi},dl=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],Ka=function(p,x){var S=p[x+6]<<21|p[x+7]<<14|p[x+8]<<7|p[x+9],b=p[x+5],w=(b&16)>>4;return S=S>=0?S:0,w?S+20:S+10},As=function(p,x){return p.length-x<10||p[x]!==73||p[x+1]!==68||p[x+2]!==51?x:(x+=Ka(p,x),As(p,x))},us=function(p){var x=As(p,0);return p.length>=x+2&&(p[x]&255)===255&&(p[x+1]&240)===240&&(p[x+1]&22)===16},va=function(p){return p[0]<<21|p[1]<<14|p[2]<<7|p[3]},hl=function(p,x,S){var b,w="";for(b=x;b<S;b++)w+="%"+("00"+p[b].toString(16)).slice(-2);return w},Wc=function(p,x,S){return unescape(hl(p,x,S))},qc=function(p,x){var S=(p[x+5]&224)>>5,b=p[x+4]<<3,w=p[x+3]&6144;return w|b|S},Qu=function(p,x){return p[x]===73&&p[x+1]===68&&p[x+2]===51?"timed-metadata":p[x]&!0&&(p[x+1]&240)===240?"audio":null},Kl=function(p){for(var x=0;x+5<p.length;){if(p[x]!==255||(p[x+1]&246)!==240){x++;continue}return dl[(p[x+2]&60)>>>2]}return null},Ju=function(p){var x,S,b,w;x=10,p[5]&64&&(x+=4,x+=va(p.subarray(10,14)));do{if(S=va(p.subarray(x+4,x+8)),S<1)return null;if(w=String.fromCharCode(p[x],p[x+1],p[x+2],p[x+3]),w==="PRIV"){b=p.subarray(x+10,x+S+10);for(var R=0;R<b.byteLength;R++)if(b[R]===0){var G=Wc(b,0,R);if(G==="com.apple.streaming.transportStreamTimestamp"){var Y=b.subarray(R+1),J=(Y[3]&1)<<30|Y[4]<<22|Y[5]<<14|Y[6]<<6|Y[7]>>>2;return J*=4,J+=Y[7]&3,J}break}}x+=10,x+=S}while(x<p.byteLength);return null},Vs={isLikelyAacData:us,parseId3TagSize:Ka,parseAdtsSize:qc,parseType:Qu,parseSampleRate:Kl,parseAacTimestamp:Ju},ya=t,cs=Vs,Ds;Ds=function(){var p=new Uint8Array,x=0;Ds.prototype.init.call(this),this.setTimestamp=function(S){x=S},this.push=function(S){var b=0,w=0,R,G,Y,J;for(p.length?(J=p.length,p=new Uint8Array(S.byteLength+J),p.set(p.subarray(0,J)),p.set(S,J)):p=S;p.length-w>=3;){if(p[w]===73&&p[w+1]===68&&p[w+2]===51){if(p.length-w<10||(b=cs.parseId3TagSize(p,w),w+b>p.length))break;G={type:"timed-metadata",data:p.subarray(w,w+b)},this.trigger("data",G),w+=b;continue}else if((p[w]&255)===255&&(p[w+1]&240)===240){if(p.length-w<7||(b=cs.parseAdtsSize(p,w),w+b>p.length))break;Y={type:"audio",data:p.subarray(w,w+b),pts:x,dts:x},this.trigger("data",Y),w+=b;continue}w++}R=p.length-w,R>0?p=p.subarray(w):p=new Uint8Array},this.reset=function(){p=new Uint8Array,this.trigger("reset")},this.endTimeline=function(){p=new Uint8Array,this.trigger("endedtimeline")}},Ds.prototype=new ya;var Gc=Ds,un=["audioobjecttype","channelcount","samplerate","samplingfrequencyindex","samplesize"],Xl=un,Kc=["width","height","profileIdc","levelIdc","profileCompatibility","sarRatio"],Li=Kc,Oi=t,ds=st,wi=et,Xa=wn,En=je,Hn=Yu,Vi=Ut,Ya=ma,Co=Gl.H264Stream,fl=Gc,ih=Vs.isLikelyAacData,sh=Ut.ONE_SECOND_IN_TS,pl=Xl,Zu=Li,Qa,Ws,Ja,Mi,Xc=function(p,x){x.stream=p,this.trigger("log",x)},wo=function(p,x){for(var S=Object.keys(x),b=0;b<S.length;b++){var w=S[b];w==="headOfPipeline"||!x[w].on||x[w].on("log",Xc.bind(p,w))}},Za=function(p,x){var S;if(p.length!==x.length)return!1;for(S=0;S<p.length;S++)if(p[S]!==x[S])return!1;return!0},ec=function(p,x,S,b,w,R){var G=S-x,Y=b-x,J=w-S;return{start:{dts:p,pts:p+G},end:{dts:p+Y,pts:p+J},prependedContentDuration:R,baseMediaDecodeTime:p}};Ws=function(p,x){var S=[],b,w=0,R=0,G=1/0;x=x||{},b=x.firstSequenceNumber||0,Ws.prototype.init.call(this),this.push=function(Y){En.collectDtsInfo(p,Y),p&&pl.forEach(function(J){p[J]=Y[J]}),S.push(Y)},this.setEarliestDts=function(Y){w=Y},this.setVideoBaseMediaDecodeTime=function(Y){G=Y},this.setAudioAppendStart=function(Y){R=Y},this.flush=function(){var Y,J,re,he,ve,qe,Ee;if(S.length===0){this.trigger("done","AudioSegmentStream");return}Y=Xa.trimAdtsFramesByEarliestDts(S,p,w),p.baseMediaDecodeTime=En.calculateTrackBaseMediaDecodeTime(p,x.keepOriginalTimestamps),Ee=Xa.prefixWithSilence(p,Y,R,G),p.samples=Xa.generateSampleTable(Y),re=ds.mdat(Xa.concatenateFrameData(Y)),S=[],J=ds.moof(b,[p]),he=new Uint8Array(J.byteLength+re.byteLength),b++,he.set(J),he.set(re,J.byteLength),En.clearDtsInfo(p),ve=Math.ceil(sh*1024/p.samplerate),Y.length&&(qe=Y.length*ve,this.trigger("segmentTimingInfo",ec(Vi.audioTsToVideoTs(p.baseMediaDecodeTime,p.samplerate),Y[0].dts,Y[0].pts,Y[0].dts+qe,Y[0].pts+qe,Ee||0)),this.trigger("timingInfo",{start:Y[0].pts,end:Y[0].pts+qe})),this.trigger("data",{track:p,boxes:he}),this.trigger("done","AudioSegmentStream")},this.reset=function(){En.clearDtsInfo(p),S=[],this.trigger("reset")}},Ws.prototype=new Oi,Qa=function(p,x){var S,b=[],w=[],R,G;x=x||{},S=x.firstSequenceNumber||0,Qa.prototype.init.call(this),delete p.minPTS,this.gopCache_=[],this.push=function(Y){En.collectDtsInfo(p,Y),Y.nalUnitType==="seq_parameter_set_rbsp"&&!R&&(R=Y.config,p.sps=[Y.data],Zu.forEach(function(J){p[J]=R[J]},this)),Y.nalUnitType==="pic_parameter_set_rbsp"&&!G&&(G=Y.data,p.pps=[Y.data]),b.push(Y)},this.flush=function(){for(var Y,J,re,he,ve,qe,Ee=0,Ct,Wt;b.length&&b[0].nalUnitType!=="access_unit_delimiter_rbsp";)b.shift();if(b.length===0){this.resetStream_(),this.trigger("done","VideoSegmentStream");return}if(Y=wi.groupNalsIntoFrames(b),re=wi.groupFramesIntoGops(Y),re[0][0].keyFrame||(J=this.getGopForFusion_(b[0],p),J?(Ee=J.duration,re.unshift(J),re.byteLength+=J.byteLength,re.nalCount+=J.nalCount,re.pts=J.pts,re.dts=J.dts,re.duration+=J.duration):re=wi.extendFirstKeyFrame(re)),w.length){var Gr;if(x.alignGopsAtEnd?Gr=this.alignGopsAtEnd_(re):Gr=this.alignGopsAtStart_(re),!Gr){this.gopCache_.unshift({gop:re.pop(),pps:p.pps,sps:p.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),b=[],this.resetStream_(),this.trigger("done","VideoSegmentStream");return}En.clearDtsInfo(p),re=Gr}En.collectDtsInfo(p,re),p.samples=wi.generateSampleTable(re),ve=ds.mdat(wi.concatenateNalData(re)),p.baseMediaDecodeTime=En.calculateTrackBaseMediaDecodeTime(p,x.keepOriginalTimestamps),this.trigger("processedGopsInfo",re.map(function(pn){return{pts:pn.pts,dts:pn.dts,byteLength:pn.byteLength}})),Ct=re[0],Wt=re[re.length-1],this.trigger("segmentTimingInfo",ec(p.baseMediaDecodeTime,Ct.dts,Ct.pts,Wt.dts+Wt.duration,Wt.pts+Wt.duration,Ee)),this.trigger("timingInfo",{start:re[0].pts,end:re[re.length-1].pts+re[re.length-1].duration}),this.gopCache_.unshift({gop:re.pop(),pps:p.pps,sps:p.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),b=[],this.trigger("baseMediaDecodeTime",p.baseMediaDecodeTime),this.trigger("timelineStartInfo",p.timelineStartInfo),he=ds.moof(S,[p]),qe=new Uint8Array(he.byteLength+ve.byteLength),S++,qe.set(he),qe.set(ve,he.byteLength),this.trigger("data",{track:p,boxes:qe}),this.resetStream_(),this.trigger("done","VideoSegmentStream")},this.reset=function(){this.resetStream_(),b=[],this.gopCache_.length=0,w.length=0,this.trigger("reset")},this.resetStream_=function(){En.clearDtsInfo(p),R=void 0,G=void 0},this.getGopForFusion_=function(Y){var J=45e3,re=1/0,he,ve,qe,Ee,Ct;for(Ct=0;Ct<this.gopCache_.length;Ct++)Ee=this.gopCache_[Ct],qe=Ee.gop,!(!(p.pps&&Za(p.pps[0],Ee.pps[0]))||!(p.sps&&Za(p.sps[0],Ee.sps[0])))&&(qe.dts<p.timelineStartInfo.dts||(he=Y.dts-qe.dts-qe.duration,he>=-1e4&&he<=J&&(!ve||re>he)&&(ve=Ee,re=he)));return ve?ve.gop:null},this.alignGopsAtStart_=function(Y){var J,re,he,ve,qe,Ee,Ct,Wt;for(qe=Y.byteLength,Ee=Y.nalCount,Ct=Y.duration,J=re=0;J<w.length&&re<Y.length&&(he=w[J],ve=Y[re],he.pts!==ve.pts);){if(ve.pts>he.pts){J++;continue}re++,qe-=ve.byteLength,Ee-=ve.nalCount,Ct-=ve.duration}return re===0?Y:re===Y.length?null:(Wt=Y.slice(re),Wt.byteLength=qe,Wt.duration=Ct,Wt.nalCount=Ee,Wt.pts=Wt[0].pts,Wt.dts=Wt[0].dts,Wt)},this.alignGopsAtEnd_=function(Y){var J,re,he,ve,qe,Ee;for(J=w.length-1,re=Y.length-1,qe=null,Ee=!1;J>=0&&re>=0;){if(he=w[J],ve=Y[re],he.pts===ve.pts){Ee=!0;break}if(he.pts>ve.pts){J--;continue}J===w.length-1&&(qe=re),re--}if(!Ee&&qe===null)return null;var Ct;if(Ee?Ct=re:Ct=qe,Ct===0)return Y;var Wt=Y.slice(Ct),Gr=Wt.reduce(function(pn,gi){return pn.byteLength+=gi.byteLength,pn.duration+=gi.duration,pn.nalCount+=gi.nalCount,pn},{byteLength:0,duration:0,nalCount:0});return Wt.byteLength=Gr.byteLength,Wt.duration=Gr.duration,Wt.nalCount=Gr.nalCount,Wt.pts=Wt[0].pts,Wt.dts=Wt[0].dts,Wt},this.alignGopsWith=function(Y){w=Y}},Qa.prototype=new Oi,Mi=function(p,x){this.numberOfTracks=0,this.metadataStream=x,p=p||{},typeof p.remux<"u"?this.remuxTracks=!!p.remux:this.remuxTracks=!0,typeof p.keepOriginalTimestamps=="boolean"?this.keepOriginalTimestamps=p.keepOriginalTimestamps:this.keepOriginalTimestamps=!1,this.pendingTracks=[],this.videoTrack=null,this.pendingBoxes=[],this.pendingCaptions=[],this.pendingMetadata=[],this.pendingBytes=0,this.emittedTracks=0,Mi.prototype.init.call(this),this.push=function(S){if(S.content||S.text)return this.pendingCaptions.push(S);if(S.frames)return this.pendingMetadata.push(S);this.pendingTracks.push(S.track),this.pendingBytes+=S.boxes.byteLength,S.track.type==="video"&&(this.videoTrack=S.track,this.pendingBoxes.push(S.boxes)),S.track.type==="audio"&&(this.audioTrack=S.track,this.pendingBoxes.unshift(S.boxes))}},Mi.prototype=new Oi,Mi.prototype.flush=function(p){var x=0,S={captions:[],captionStreams:{},metadata:[],info:{}},b,w,R,G=0,Y;if(this.pendingTracks.length<this.numberOfTracks){if(p!=="VideoSegmentStream"&&p!=="AudioSegmentStream")return;if(this.remuxTracks)return;if(this.pendingTracks.length===0){this.emittedTracks++,this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0);return}}if(this.videoTrack?(G=this.videoTrack.timelineStartInfo.pts,Zu.forEach(function(J){S.info[J]=this.videoTrack[J]},this)):this.audioTrack&&(G=this.audioTrack.timelineStartInfo.pts,pl.forEach(function(J){S.info[J]=this.audioTrack[J]},this)),this.videoTrack||this.audioTrack){for(this.pendingTracks.length===1?S.type=this.pendingTracks[0].type:S.type="combined",this.emittedTracks+=this.pendingTracks.length,R=ds.initSegment(this.pendingTracks),S.initSegment=new Uint8Array(R.byteLength),S.initSegment.set(R),S.data=new Uint8Array(this.pendingBytes),Y=0;Y<this.pendingBoxes.length;Y++)S.data.set(this.pendingBoxes[Y],x),x+=this.pendingBoxes[Y].byteLength;for(Y=0;Y<this.pendingCaptions.length;Y++)b=this.pendingCaptions[Y],b.startTime=Vi.metadataTsToSeconds(b.startPts,G,this.keepOriginalTimestamps),b.endTime=Vi.metadataTsToSeconds(b.endPts,G,this.keepOriginalTimestamps),S.captionStreams[b.stream]=!0,S.captions.push(b);for(Y=0;Y<this.pendingMetadata.length;Y++)w=this.pendingMetadata[Y],w.cueTime=Vi.metadataTsToSeconds(w.pts,G,this.keepOriginalTimestamps),S.metadata.push(w);for(S.metadata.dispatchType=this.metadataStream.dispatchType,this.pendingTracks.length=0,this.videoTrack=null,this.pendingBoxes.length=0,this.pendingCaptions.length=0,this.pendingBytes=0,this.pendingMetadata.length=0,this.trigger("data",S),Y=0;Y<S.captions.length;Y++)b=S.captions[Y],this.trigger("caption",b);for(Y=0;Y<S.metadata.length;Y++)w=S.metadata[Y],this.trigger("id3Frame",w)}this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0)},Mi.prototype.setRemux=function(p){this.remuxTracks=p},Ja=function(p){var x=this,S=!0,b,w;Ja.prototype.init.call(this),p=p||{},this.baseMediaDecodeTime=p.baseMediaDecodeTime||0,this.transmuxPipeline_={},this.setupAacPipeline=function(){var R={};this.transmuxPipeline_=R,R.type="aac",R.metadataStream=new Hn.MetadataStream,R.aacStream=new fl,R.audioTimestampRolloverStream=new Hn.TimestampRolloverStream("audio"),R.timedMetadataTimestampRolloverStream=new Hn.TimestampRolloverStream("timed-metadata"),R.adtsStream=new Ya,R.coalesceStream=new Mi(p,R.metadataStream),R.headOfPipeline=R.aacStream,R.aacStream.pipe(R.audioTimestampRolloverStream).pipe(R.adtsStream),R.aacStream.pipe(R.timedMetadataTimestampRolloverStream).pipe(R.metadataStream).pipe(R.coalesceStream),R.metadataStream.on("timestamp",function(G){R.aacStream.setTimestamp(G.timeStamp)}),R.aacStream.on("data",function(G){G.type!=="timed-metadata"&&G.type!=="audio"||R.audioSegmentStream||(w=w||{timelineStartInfo:{baseMediaDecodeTime:x.baseMediaDecodeTime},codec:"adts",type:"audio"},R.coalesceStream.numberOfTracks++,R.audioSegmentStream=new Ws(w,p),R.audioSegmentStream.on("log",x.getLogTrigger_("audioSegmentStream")),R.audioSegmentStream.on("timingInfo",x.trigger.bind(x,"audioTimingInfo")),R.adtsStream.pipe(R.audioSegmentStream).pipe(R.coalesceStream),x.trigger("trackinfo",{hasAudio:!!w,hasVideo:!!b}))}),R.coalesceStream.on("data",this.trigger.bind(this,"data")),R.coalesceStream.on("done",this.trigger.bind(this,"done")),wo(this,R)},this.setupTsPipeline=function(){var R={};this.transmuxPipeline_=R,R.type="ts",R.metadataStream=new Hn.MetadataStream,R.packetStream=new Hn.TransportPacketStream,R.parseStream=new Hn.TransportParseStream,R.elementaryStream=new Hn.ElementaryStream,R.timestampRolloverStream=new Hn.TimestampRolloverStream,R.adtsStream=new Ya,R.h264Stream=new Co,R.captionStream=new Hn.CaptionStream(p),R.coalesceStream=new Mi(p,R.metadataStream),R.headOfPipeline=R.packetStream,R.packetStream.pipe(R.parseStream).pipe(R.elementaryStream).pipe(R.timestampRolloverStream),R.timestampRolloverStream.pipe(R.h264Stream),R.timestampRolloverStream.pipe(R.adtsStream),R.timestampRolloverStream.pipe(R.metadataStream).pipe(R.coalesceStream),R.h264Stream.pipe(R.captionStream).pipe(R.coalesceStream),R.elementaryStream.on("data",function(G){var Y;if(G.type==="metadata"){for(Y=G.tracks.length;Y--;)!b&&G.tracks[Y].type==="video"?(b=G.tracks[Y],b.timelineStartInfo.baseMediaDecodeTime=x.baseMediaDecodeTime):!w&&G.tracks[Y].type==="audio"&&(w=G.tracks[Y],w.timelineStartInfo.baseMediaDecodeTime=x.baseMediaDecodeTime);b&&!R.videoSegmentStream&&(R.coalesceStream.numberOfTracks++,R.videoSegmentStream=new Qa(b,p),R.videoSegmentStream.on("log",x.getLogTrigger_("videoSegmentStream")),R.videoSegmentStream.on("timelineStartInfo",function(J){w&&!p.keepOriginalTimestamps&&(w.timelineStartInfo=J,R.audioSegmentStream.setEarliestDts(J.dts-x.baseMediaDecodeTime))}),R.videoSegmentStream.on("processedGopsInfo",x.trigger.bind(x,"gopInfo")),R.videoSegmentStream.on("segmentTimingInfo",x.trigger.bind(x,"videoSegmentTimingInfo")),R.videoSegmentStream.on("baseMediaDecodeTime",function(J){w&&R.audioSegmentStream.setVideoBaseMediaDecodeTime(J)}),R.videoSegmentStream.on("timingInfo",x.trigger.bind(x,"videoTimingInfo")),R.h264Stream.pipe(R.videoSegmentStream).pipe(R.coalesceStream)),w&&!R.audioSegmentStream&&(R.coalesceStream.numberOfTracks++,R.audioSegmentStream=new Ws(w,p),R.audioSegmentStream.on("log",x.getLogTrigger_("audioSegmentStream")),R.audioSegmentStream.on("timingInfo",x.trigger.bind(x,"audioTimingInfo")),R.audioSegmentStream.on("segmentTimingInfo",x.trigger.bind(x,"audioSegmentTimingInfo")),R.adtsStream.pipe(R.audioSegmentStream).pipe(R.coalesceStream)),x.trigger("trackinfo",{hasAudio:!!w,hasVideo:!!b})}}),R.coalesceStream.on("data",this.trigger.bind(this,"data")),R.coalesceStream.on("id3Frame",function(G){G.dispatchType=R.metadataStream.dispatchType,x.trigger("id3Frame",G)}),R.coalesceStream.on("caption",this.trigger.bind(this,"caption")),R.coalesceStream.on("done",this.trigger.bind(this,"done")),wo(this,R)},this.setBaseMediaDecodeTime=function(R){var G=this.transmuxPipeline_;p.keepOriginalTimestamps||(this.baseMediaDecodeTime=R),w&&(w.timelineStartInfo.dts=void 0,w.timelineStartInfo.pts=void 0,En.clearDtsInfo(w),G.audioTimestampRolloverStream&&G.audioTimestampRolloverStream.discontinuity()),b&&(G.videoSegmentStream&&(G.videoSegmentStream.gopCache_=[]),b.timelineStartInfo.dts=void 0,b.timelineStartInfo.pts=void 0,En.clearDtsInfo(b),G.captionStream.reset()),G.timestampRolloverStream&&G.timestampRolloverStream.discontinuity()},this.setAudioAppendStart=function(R){w&&this.transmuxPipeline_.audioSegmentStream.setAudioAppendStart(R)},this.setRemux=function(R){var G=this.transmuxPipeline_;p.remux=R,G&&G.coalesceStream&&G.coalesceStream.setRemux(R)},this.alignGopsWith=function(R){b&&this.transmuxPipeline_.videoSegmentStream&&this.transmuxPipeline_.videoSegmentStream.alignGopsWith(R)},this.getLogTrigger_=function(R){var G=this;return function(Y){Y.stream=R,G.trigger("log",Y)}},this.push=function(R){if(S){var G=ih(R);G&&this.transmuxPipeline_.type!=="aac"?this.setupAacPipeline():!G&&this.transmuxPipeline_.type!=="ts"&&this.setupTsPipeline(),S=!1}this.transmuxPipeline_.headOfPipeline.push(R)},this.flush=function(){S=!0,this.transmuxPipeline_.headOfPipeline.flush()},this.endTimeline=function(){this.transmuxPipeline_.headOfPipeline.endTimeline()},this.reset=function(){this.transmuxPipeline_.headOfPipeline&&this.transmuxPipeline_.headOfPipeline.reset()},this.resetCaptions=function(){this.transmuxPipeline_.captionStream&&this.transmuxPipeline_.captionStream.reset()}},Ja.prototype=new Oi;var Yc={Transmuxer:Ja},Yl=function(p){return p>>>0},Qc=function(p){return("00"+p.toString(16)).slice(-2)},xa={toUnsigned:Yl,toHexString:Qc},Jc=function(p){var x="";return x+=String.fromCharCode(p[0]),x+=String.fromCharCode(p[1]),x+=String.fromCharCode(p[2]),x+=String.fromCharCode(p[3]),x},Eo=Jc,Zc=xa.toUnsigned,ed=Eo,ko=function(p,x){var S=[],b,w,R,G,Y;if(!x.length)return null;for(b=0;b<p.byteLength;)w=Zc(p[b]<<24|p[b+1]<<16|p[b+2]<<8|p[b+3]),R=ed(p.subarray(b+4,b+8)),G=w>1?b+w:p.byteLength,R===x[0]&&(x.length===1?S.push(p.subarray(b+8,G)):(Y=ko(p.subarray(b+8,G),x.slice(1)),Y.length&&(S=S.concat(Y)))),b=G;return S},Ao=ko,ah=xa.toUnsigned,oh=s.getUint64,lh=function(p){var x={version:p[0],flags:new Uint8Array(p.subarray(1,4))};return x.version===1?x.baseMediaDecodeTime=oh(p.subarray(4)):x.baseMediaDecodeTime=ah(p[4]<<24|p[5]<<16|p[6]<<8|p[7]),x},ml=lh,gl=function(p){return{isLeading:(p[0]&12)>>>2,dependsOn:p[0]&3,isDependedOn:(p[1]&192)>>>6,hasRedundancy:(p[1]&48)>>>4,paddingValue:(p[1]&14)>>>1,isNonSyncSample:p[1]&1,degradationPriority:p[2]<<8|p[3]}},tc=gl,Ql=tc,td=function(p){var x={version:p[0],flags:new Uint8Array(p.subarray(1,4)),samples:[]},S=new DataView(p.buffer,p.byteOffset,p.byteLength),b=x.flags[2]&1,w=x.flags[2]&4,R=x.flags[1]&1,G=x.flags[1]&2,Y=x.flags[1]&4,J=x.flags[1]&8,re=S.getUint32(4),he=8,ve;for(b&&(x.dataOffset=S.getInt32(he),he+=4),w&&re&&(ve={flags:Ql(p.subarray(he,he+4))},he+=4,R&&(ve.duration=S.getUint32(he),he+=4),G&&(ve.size=S.getUint32(he),he+=4),J&&(x.version===1?ve.compositionTimeOffset=S.getInt32(he):ve.compositionTimeOffset=S.getUint32(he),he+=4),x.samples.push(ve),re--);re--;)ve={},R&&(ve.duration=S.getUint32(he),he+=4),G&&(ve.size=S.getUint32(he),he+=4),Y&&(ve.flags=Ql(p.subarray(he,he+4)),he+=4),J&&(x.version===1?ve.compositionTimeOffset=S.getInt32(he):ve.compositionTimeOffset=S.getUint32(he),he+=4),x.samples.push(ve);return x},qs=td,sn=function(p){var x=new DataView(p.buffer,p.byteOffset,p.byteLength),S={version:p[0],flags:new Uint8Array(p.subarray(1,4)),trackId:x.getUint32(4)},b=S.flags[2]&1,w=S.flags[2]&2,R=S.flags[2]&8,G=S.flags[2]&16,Y=S.flags[2]&32,J=S.flags[0]&65536,re=S.flags[0]&131072,he;return he=8,b&&(he+=4,S.baseDataOffset=x.getUint32(12),he+=4),w&&(S.sampleDescriptionIndex=x.getUint32(he),he+=4),R&&(S.defaultSampleDuration=x.getUint32(he),he+=4),G&&(S.defaultSampleSize=x.getUint32(he),he+=4),Y&&(S.defaultSampleFlags=x.getUint32(he)),J&&(S.durationIsEmpty=!0),!b&&re&&(S.baseDataOffsetIsMoof=!0),S},Is=sn,cn;typeof window<"u"?cn=window:typeof r<"u"?cn=r:typeof self<"u"?cn=self:cn={};var Wi=cn,uh=Xe.discardEmulationPreventionBytes,rd=Ti.CaptionStream,Ps=Ao,nd=ml,vl=qs,yl=Is,rc=Wi,Jl=function(p,x){for(var S=p,b=0;b<x.length;b++){var w=x[b];if(S<w.size)return w;S-=w.size}return null},ch=function(p,x,S){var b=new DataView(p.buffer,p.byteOffset,p.byteLength),w={logs:[],seiNals:[]},R,G,Y,J;for(G=0;G+4<p.length;G+=Y)if(Y=b.getUint32(G),G+=4,!(Y<=0))switch(p[G]&31){case 6:var re=p.subarray(G+1,G+1+Y),he=Jl(G,x);if(R={nalUnitType:"sei_rbsp",size:Y,data:re,escapedRBSP:uh(re),trackId:S},he)R.pts=he.pts,R.dts=he.dts,J=he;else if(J)R.pts=J.pts,R.dts=J.dts;else{w.logs.push({level:"warn",message:"We've encountered a nal unit without data at "+G+" for trackId "+S+". See mux.js#223."});break}w.seiNals.push(R);break}return w},nc=function(p,x,S){var b=x,w=S.defaultSampleDuration||0,R=S.defaultSampleSize||0,G=S.trackId,Y=[];return p.forEach(function(J){var re=vl(J),he=re.samples;he.forEach(function(ve){ve.duration===void 0&&(ve.duration=w),ve.size===void 0&&(ve.size=R),ve.trackId=G,ve.dts=b,ve.compositionTimeOffset===void 0&&(ve.compositionTimeOffset=0),typeof b=="bigint"?(ve.pts=b+rc.BigInt(ve.compositionTimeOffset),b+=rc.BigInt(ve.duration)):(ve.pts=b+ve.compositionTimeOffset,b+=ve.duration)}),Y=Y.concat(he)}),Y},le=function(p,x){var S=Ps(p,["moof","traf"]),b=Ps(p,["mdat"]),w={},R=[];return b.forEach(function(G,Y){var J=S[Y];R.push({mdat:G,traf:J})}),R.forEach(function(G){var Y=G.mdat,J=G.traf,re=Ps(J,["tfhd"]),he=yl(re[0]),ve=he.trackId,qe=Ps(J,["tfdt"]),Ee=qe.length>0?nd(qe[0]).baseMediaDecodeTime:0,Ct=Ps(J,["trun"]),Wt,Gr;x===ve&&Ct.length>0&&(Wt=nc(Ct,Ee,he),Gr=ch(Y,Wt,ve),w[ve]||(w[ve]={seiNals:[],logs:[]}),w[ve].seiNals=w[ve].seiNals.concat(Gr.seiNals),w[ve].logs=w[ve].logs.concat(Gr.logs))}),w},F=function(p,x,S){var b;if(x===null)return null;b=le(p,x);var w=b[x]||{};return{seiNals:w.seiNals,logs:w.logs,timescale:S}},H=function(){var p=!1,x,S,b,w,R,G;this.isInitialized=function(){return p},this.init=function(Y){x=new rd,p=!0,G=Y?Y.isPartial:!1,x.on("data",function(J){J.startTime=J.startPts/w,J.endTime=J.endPts/w,R.captions.push(J),R.captionStreams[J.stream]=!0}),x.on("log",function(J){R.logs.push(J)})},this.isNewInit=function(Y,J){return Y&&Y.length===0||J&&typeof J=="object"&&Object.keys(J).length===0?!1:b!==Y[0]||w!==J[b]},this.parse=function(Y,J,re){var he;if(this.isInitialized()){if(!J||!re)return null;if(this.isNewInit(J,re))b=J[0],w=re[b];else if(b===null||!w)return S.push(Y),null}else return null;for(;S.length>0;){var ve=S.shift();this.parse(ve,J,re)}return he=F(Y,b,w),he&&he.logs&&(R.logs=R.logs.concat(he.logs)),he===null||!he.seiNals?R.logs.length?{logs:R.logs,captions:[],captionStreams:[]}:null:(this.pushNals(he.seiNals),this.flushStream(),R)},this.pushNals=function(Y){if(!this.isInitialized()||!Y||Y.length===0)return null;Y.forEach(function(J){x.push(J)})},this.flushStream=function(){if(!this.isInitialized())return null;G?x.partialFlush():x.flush()},this.clearParsedCaptions=function(){R.captions=[],R.captionStreams={},R.logs=[]},this.resetCaptionStream=function(){if(!this.isInitialized())return null;x.reset()},this.clearAllCaptions=function(){this.clearParsedCaptions(),this.resetCaptionStream()},this.reset=function(){S=[],b=null,w=null,R?this.clearParsedCaptions():R={captions:[],captionStreams:{},logs:[]},this.resetCaptionStream()},this.reset()},z=H,q=function(p){for(var x=0,S=String.fromCharCode(p[x]),b="";S!=="\0";)b+=S,x++,S=String.fromCharCode(p[x]);return b+=S,b},Z={uint8ToCString:q},te=Z.uint8ToCString,ge=s.getUint64,_e=function(p){var x=4,S=p[0],b,w,R,G,Y,J,re,he;if(S===0){b=te(p.subarray(x)),x+=b.length,w=te(p.subarray(x)),x+=w.length;var ve=new DataView(p.buffer);R=ve.getUint32(x),x+=4,Y=ve.getUint32(x),x+=4,J=ve.getUint32(x),x+=4,re=ve.getUint32(x),x+=4}else if(S===1){var ve=new DataView(p.buffer);R=ve.getUint32(x),x+=4,G=ge(p.subarray(x)),x+=8,J=ve.getUint32(x),x+=4,re=ve.getUint32(x),x+=4,b=te(p.subarray(x)),x+=b.length,w=te(p.subarray(x)),x+=w.length}he=new Uint8Array(p.subarray(x,p.byteLength));var qe={scheme_id_uri:b,value:w,timescale:R||1,presentation_time:G,presentation_time_delta:Y,event_duration:J,id:re,message_data:he};return we(S,qe)?qe:void 0},De=function(p,x,S,b){return p||p===0?p/x:b+S/x},we=function(p,x){var S=x.scheme_id_uri!=="\0",b=p===0&&Re(x.presentation_time_delta)&&S,w=p===1&&Re(x.presentation_time)&&S;return!(p>1)&&b||w},Re=function(p){return p!==void 0||p!==null},at={parseEmsgBox:_e,scaleTime:De},Mt=xa.toUnsigned,zt=xa.toHexString,nt=Ao,ar=Eo,In=at,pi=Is,qi=qs,xl=ml,Do=s.getUint64,Io,_l,_a,Gs,_n,eo,Gi,Zl=Wi,Tf=fi.parseId3Frames;Io=function(p){var x={},S=nt(p,["moov","trak"]);return S.reduce(function(b,w){var R,G,Y,J,re;return R=nt(w,["tkhd"])[0],!R||(G=R[0],Y=G===0?12:20,J=Mt(R[Y]<<24|R[Y+1]<<16|R[Y+2]<<8|R[Y+3]),re=nt(w,["mdia","mdhd"])[0],!re)?null:(G=re[0],Y=G===0?12:20,b[J]=Mt(re[Y]<<24|re[Y+1]<<16|re[Y+2]<<8|re[Y+3]),b)},x)},_l=function(p,x){var S;S=nt(x,["moof","traf"]);var b=S.reduce(function(w,R){var G=nt(R,["tfhd"])[0],Y=Mt(G[4]<<24|G[5]<<16|G[6]<<8|G[7]),J=p[Y]||9e4,re=nt(R,["tfdt"])[0],he=new DataView(re.buffer,re.byteOffset,re.byteLength),ve;re[0]===1?ve=Do(re.subarray(4,12)):ve=he.getUint32(4);let qe;return typeof ve=="bigint"?qe=ve/Zl.BigInt(J):typeof ve=="number"&&!isNaN(ve)&&(qe=ve/J),qe<Number.MAX_SAFE_INTEGER&&(qe=Number(qe)),qe<w&&(w=qe),w},1/0);return typeof b=="bigint"||isFinite(b)?b:0},_a=function(p,x){var S=nt(x,["moof","traf"]),b=0,w=0,R;if(S&&S.length){var G=nt(S[0],["tfhd"])[0],Y=nt(S[0],["trun"])[0],J=nt(S[0],["tfdt"])[0];if(G){var re=pi(G);R=re.trackId}if(J){var he=xl(J);b=he.baseMediaDecodeTime}if(Y){var ve=qi(Y);ve.samples&&ve.samples.length&&(w=ve.samples[0].compositionTimeOffset||0)}}var qe=p[R]||9e4;typeof b=="bigint"&&(w=Zl.BigInt(w),qe=Zl.BigInt(qe));var Ee=(b+w)/qe;return typeof Ee=="bigint"&&Ee<Number.MAX_SAFE_INTEGER&&(Ee=Number(Ee)),Ee},Gs=function(p){var x=nt(p,["moov","trak"]),S=[];return x.forEach(function(b){var w=nt(b,["mdia","hdlr"]),R=nt(b,["tkhd"]);w.forEach(function(G,Y){var J=ar(G.subarray(8,12)),re=R[Y],he,ve,qe;J==="vide"&&(he=new DataView(re.buffer,re.byteOffset,re.byteLength),ve=he.getUint8(0),qe=ve===0?he.getUint32(12):he.getUint32(20),S.push(qe))})}),S},eo=function(p){var x=p[0],S=x===0?12:20;return Mt(p[S]<<24|p[S+1]<<16|p[S+2]<<8|p[S+3])},_n=function(p){var x=nt(p,["moov","trak"]),S=[];return x.forEach(function(b){var w={},R=nt(b,["tkhd"])[0],G,Y;R&&(G=new DataView(R.buffer,R.byteOffset,R.byteLength),Y=G.getUint8(0),w.id=Y===0?G.getUint32(12):G.getUint32(20));var J=nt(b,["mdia","hdlr"])[0];if(J){var re=ar(J.subarray(8,12));re==="vide"?w.type="video":re==="soun"?w.type="audio":w.type=re}var he=nt(b,["mdia","minf","stbl","stsd"])[0];if(he){var ve=he.subarray(8);w.codec=ar(ve.subarray(4,8));var qe=nt(ve,[w.codec])[0],Ee,Ct;qe&&(/^[asm]vc[1-9]$/i.test(w.codec)?(Ee=qe.subarray(78),Ct=ar(Ee.subarray(4,8)),Ct==="avcC"&&Ee.length>11?(w.codec+=".",w.codec+=zt(Ee[9]),w.codec+=zt(Ee[10]),w.codec+=zt(Ee[11])):w.codec="avc1.4d400d"):/^mp4[a,v]$/i.test(w.codec)?(Ee=qe.subarray(28),Ct=ar(Ee.subarray(4,8)),Ct==="esds"&&Ee.length>20&&Ee[19]!==0?(w.codec+="."+zt(Ee[19]),w.codec+="."+zt(Ee[20]>>>2&63).replace(/^0/,"")):w.codec="mp4a.40.2"):w.codec=w.codec.toLowerCase())}var Wt=nt(b,["mdia","mdhd"])[0];Wt&&(w.timescale=eo(Wt)),S.push(w)}),S},Gi=function(p,x=0){var S=nt(p,["emsg"]);return S.map(b=>{var w=In.parseEmsgBox(new Uint8Array(b)),R=Tf(w.message_data);return{cueTime:In.scaleTime(w.presentation_time,w.timescale,w.presentation_time_delta,x),duration:In.scaleTime(w.event_duration,w.timescale),frames:R}})};var eu={findBox:nt,parseType:ar,timescale:Io,startTime:_l,compositionStartTime:_a,videoTrackIds:Gs,tracks:_n,getTimescaleFromMediaHeader:eo,getEmsgID3:Gi},tu=yn,id=function(p){var x=p[1]&31;return x<<=8,x|=p[2],x},Po=function(p){return!!(p[1]&64)},Ki=function(p){var x=0;return(p[3]&48)>>>4>1&&(x+=p[4]+1),x},dh=function(p,x){var S=id(p);return S===0?"pat":S===x?"pmt":x?"pes":null},hh=function(p){var x=Po(p),S=4+Ki(p);return x&&(S+=p[S]+1),(p[S+10]&31)<<8|p[S+11]},qm=function(p){var x={},S=Po(p),b=4+Ki(p);if(S&&(b+=p[b]+1),!!(p[b+5]&1)){var w,R,G;w=(p[b+1]&15)<<8|p[b+2],R=3+w-4,G=(p[b+10]&15)<<8|p[b+11];for(var Y=12+G;Y<R;){var J=b+Y;x[(p[J+1]&31)<<8|p[J+2]]=p[J],Y+=((p[J+3]&15)<<8|p[J+4])+5}return x}},Gm=function(p,x){var S=id(p),b=x[S];switch(b){case tu.H264_STREAM_TYPE:return"video";case tu.ADTS_STREAM_TYPE:return"audio";case tu.METADATA_STREAM_TYPE:return"timed-metadata";default:return null}},ic=function(p){var x=Po(p);if(!x)return null;var S=4+Ki(p);if(S>=p.byteLength)return null;var b=null,w;return w=p[S+7],w&192&&(b={},b.pts=(p[S+9]&14)<<27|(p[S+10]&255)<<20|(p[S+11]&254)<<12|(p[S+12]&255)<<5|(p[S+13]&254)>>>3,b.pts*=4,b.pts+=(p[S+13]&6)>>>1,b.dts=b.pts,w&64&&(b.dts=(p[S+14]&14)<<27|(p[S+15]&255)<<20|(p[S+16]&254)<<12|(p[S+17]&255)<<5|(p[S+18]&254)>>>3,b.dts*=4,b.dts+=(p[S+18]&6)>>>1)),b},sc=function(p){switch(p){case 5:return"slice_layer_without_partitioning_rbsp_idr";case 6:return"sei_rbsp";case 7:return"seq_parameter_set_rbsp";case 8:return"pic_parameter_set_rbsp";case 9:return"access_unit_delimiter_rbsp";default:return null}},Cf=function(p){for(var x=4+Ki(p),S=p.subarray(x),b=0,w=0,R=!1,G;w<S.byteLength-3;w++)if(S[w+2]===1){b=w+5;break}for(;b<S.byteLength;)switch(S[b]){case 0:if(S[b-1]!==0){b+=2;break}else if(S[b-2]!==0){b++;break}w+3!==b-2&&(G=sc(S[w+3]&31),G==="slice_layer_without_partitioning_rbsp_idr"&&(R=!0));do b++;while(S[b]!==1&&b<S.length);w=b-2,b+=3;break;case 1:if(S[b-1]!==0||S[b-2]!==0){b+=3;break}G=sc(S[w+3]&31),G==="slice_layer_without_partitioning_rbsp_idr"&&(R=!0),w=b-2,b+=3;break;default:b+=3;break}return S=S.subarray(w),b-=w,w=0,S&&S.byteLength>3&&(G=sc(S[w+3]&31),G==="slice_layer_without_partitioning_rbsp_idr"&&(R=!0)),R},wf={parseType:dh,parsePat:hh,parsePmt:qm,parsePayloadUnitStartIndicator:Po,parsePesType:Gm,parsePesTime:ic,videoPacketContainsKeyFrame:Cf},bn=yn,hs=ke.handleRollover,or={};or.ts=wf,or.aac=Vs;var mi=Ut.ONE_SECOND_IN_TS,dn=188,Vn=71,ac=function(p,x){for(var S=0,b=dn,w,R;b<p.byteLength;){if(p[S]===Vn&&p[b]===Vn){switch(w=p.subarray(S,b),R=or.ts.parseType(w,x.pid),R){case"pat":x.pid=or.ts.parsePat(w);break;case"pmt":var G=or.ts.parsePmt(w);x.table=x.table||{},Object.keys(G).forEach(function(Y){x.table[Y]=G[Y]});break}S+=dn,b+=dn;continue}S++,b++}},ru=function(p,x,S){for(var b=0,w=dn,R,G,Y,J,re,he=!1;w<=p.byteLength;){if(p[b]===Vn&&(p[w]===Vn||w===p.byteLength)){switch(R=p.subarray(b,w),G=or.ts.parseType(R,x.pid),G){case"pes":Y=or.ts.parsePesType(R,x.table),J=or.ts.parsePayloadUnitStartIndicator(R),Y==="audio"&&J&&(re=or.ts.parsePesTime(R),re&&(re.type="audio",S.audio.push(re),he=!0));break}if(he)break;b+=dn,w+=dn;continue}b++,w++}for(w=p.byteLength,b=w-dn,he=!1;b>=0;){if(p[b]===Vn&&(p[w]===Vn||w===p.byteLength)){switch(R=p.subarray(b,w),G=or.ts.parseType(R,x.pid),G){case"pes":Y=or.ts.parsePesType(R,x.table),J=or.ts.parsePayloadUnitStartIndicator(R),Y==="audio"&&J&&(re=or.ts.parsePesTime(R),re&&(re.type="audio",S.audio.push(re),he=!0));break}if(he)break;b-=dn,w-=dn;continue}b--,w--}},nu=function(p,x,S){for(var b=0,w=dn,R,G,Y,J,re,he,ve,qe,Ee=!1,Ct={data:[],size:0};w<p.byteLength;){if(p[b]===Vn&&p[w]===Vn){switch(R=p.subarray(b,w),G=or.ts.parseType(R,x.pid),G){case"pes":if(Y=or.ts.parsePesType(R,x.table),J=or.ts.parsePayloadUnitStartIndicator(R),Y==="video"&&(J&&!Ee&&(re=or.ts.parsePesTime(R),re&&(re.type="video",S.video.push(re),Ee=!0)),!S.firstKeyFrame)){if(J&&Ct.size!==0){for(he=new Uint8Array(Ct.size),ve=0;Ct.data.length;)qe=Ct.data.shift(),he.set(qe,ve),ve+=qe.byteLength;if(or.ts.videoPacketContainsKeyFrame(he)){var Wt=or.ts.parsePesTime(he);Wt?(S.firstKeyFrame=Wt,S.firstKeyFrame.type="video"):console.warn("Failed to extract PTS/DTS from PES at first keyframe. This could be an unusual TS segment, or else mux.js did not parse your TS segment correctly. If you know your TS segments do contain PTS/DTS on keyframes please file a bug report! You can try ffprobe to double check for yourself.")}Ct.size=0}Ct.data.push(R),Ct.size+=R.byteLength}break}if(Ee&&S.firstKeyFrame)break;b+=dn,w+=dn;continue}b++,w++}for(w=p.byteLength,b=w-dn,Ee=!1;b>=0;){if(p[b]===Vn&&p[w]===Vn){switch(R=p.subarray(b,w),G=or.ts.parseType(R,x.pid),G){case"pes":Y=or.ts.parsePesType(R,x.table),J=or.ts.parsePayloadUnitStartIndicator(R),Y==="video"&&J&&(re=or.ts.parsePesTime(R),re&&(re.type="video",S.video.push(re),Ee=!0));break}if(Ee)break;b-=dn,w-=dn;continue}b--,w--}},Ef=function(p,x){if(p.audio&&p.audio.length){var S=x;(typeof S>"u"||isNaN(S))&&(S=p.audio[0].dts),p.audio.forEach(function(R){R.dts=hs(R.dts,S),R.pts=hs(R.pts,S),R.dtsTime=R.dts/mi,R.ptsTime=R.pts/mi})}if(p.video&&p.video.length){var b=x;if((typeof b>"u"||isNaN(b))&&(b=p.video[0].dts),p.video.forEach(function(R){R.dts=hs(R.dts,b),R.pts=hs(R.pts,b),R.dtsTime=R.dts/mi,R.ptsTime=R.pts/mi}),p.firstKeyFrame){var w=p.firstKeyFrame;w.dts=hs(w.dts,b),w.pts=hs(w.pts,b),w.dtsTime=w.dts/mi,w.ptsTime=w.pts/mi}}},Km=function(p){for(var x=!1,S=0,b=null,w=null,R=0,G=0,Y;p.length-G>=3;){var J=or.aac.parseType(p,G);switch(J){case"timed-metadata":if(p.length-G<10){x=!0;break}if(R=or.aac.parseId3TagSize(p,G),R>p.length){x=!0;break}w===null&&(Y=p.subarray(G,G+R),w=or.aac.parseAacTimestamp(Y)),G+=R;break;case"audio":if(p.length-G<7){x=!0;break}if(R=or.aac.parseAdtsSize(p,G),R>p.length){x=!0;break}b===null&&(Y=p.subarray(G,G+R),b=or.aac.parseSampleRate(Y)),S++,G+=R;break;default:G++;break}if(x)return null}if(b===null||w===null)return null;var re=mi/b,he={audio:[{type:"audio",dts:w,pts:w},{type:"audio",dts:w+S*1024*re,pts:w+S*1024*re}]};return he},Xm=function(p){var x={pid:null,table:null},S={};ac(p,x);for(var b in x.table)if(x.table.hasOwnProperty(b)){var w=x.table[b];switch(w){case bn.H264_STREAM_TYPE:S.video=[],nu(p,x,S),S.video.length===0&&delete S.video;break;case bn.ADTS_STREAM_TYPE:S.audio=[],ru(p,x,S),S.audio.length===0&&delete S.audio;break}}return S},kf=function(p,x){var S=or.aac.isLikelyAacData(p),b;return S?b=Km(p):b=Xm(p),!b||!b.audio&&!b.video?null:(Ef(b,x),b)},sd={inspect:kf,parseAudioPes_:ru};const ad=function(p,x){x.on("data",function(S){const b=S.initSegment;S.initSegment={data:b.buffer,byteOffset:b.byteOffset,byteLength:b.byteLength};const w=S.data;S.data=w.buffer,p.postMessage({action:"data",segment:S,byteOffset:w.byteOffset,byteLength:w.byteLength},[S.data])}),x.on("done",function(S){p.postMessage({action:"done"})}),x.on("gopInfo",function(S){p.postMessage({action:"gopInfo",gopInfo:S})}),x.on("videoSegmentTimingInfo",function(S){const b={start:{decode:Ut.videoTsToSeconds(S.start.dts),presentation:Ut.videoTsToSeconds(S.start.pts)},end:{decode:Ut.videoTsToSeconds(S.end.dts),presentation:Ut.videoTsToSeconds(S.end.pts)},baseMediaDecodeTime:Ut.videoTsToSeconds(S.baseMediaDecodeTime)};S.prependedContentDuration&&(b.prependedContentDuration=Ut.videoTsToSeconds(S.prependedContentDuration)),p.postMessage({action:"videoSegmentTimingInfo",videoSegmentTimingInfo:b})}),x.on("audioSegmentTimingInfo",function(S){const b={start:{decode:Ut.videoTsToSeconds(S.start.dts),presentation:Ut.videoTsToSeconds(S.start.pts)},end:{decode:Ut.videoTsToSeconds(S.end.dts),presentation:Ut.videoTsToSeconds(S.end.pts)},baseMediaDecodeTime:Ut.videoTsToSeconds(S.baseMediaDecodeTime)};S.prependedContentDuration&&(b.prependedContentDuration=Ut.videoTsToSeconds(S.prependedContentDuration)),p.postMessage({action:"audioSegmentTimingInfo",audioSegmentTimingInfo:b})}),x.on("id3Frame",function(S){p.postMessage({action:"id3Frame",id3Frame:S})}),x.on("caption",function(S){p.postMessage({action:"caption",caption:S})}),x.on("trackinfo",function(S){p.postMessage({action:"trackinfo",trackInfo:S})}),x.on("audioTimingInfo",function(S){p.postMessage({action:"audioTimingInfo",audioTimingInfo:{start:Ut.videoTsToSeconds(S.start),end:Ut.videoTsToSeconds(S.end)}})}),x.on("videoTimingInfo",function(S){p.postMessage({action:"videoTimingInfo",videoTimingInfo:{start:Ut.videoTsToSeconds(S.start),end:Ut.videoTsToSeconds(S.end)}})}),x.on("log",function(S){p.postMessage({action:"log",log:S})})};class oc{constructor(x,S){this.options=S||{},this.self=x,this.init()}init(){this.transmuxer&&this.transmuxer.dispose(),this.transmuxer=new Yc.Transmuxer(this.options),ad(this.self,this.transmuxer)}pushMp4Captions(x){this.captionParser||(this.captionParser=new z,this.captionParser.init());const S=new Uint8Array(x.data,x.byteOffset,x.byteLength),b=this.captionParser.parse(S,x.trackIds,x.timescales);this.self.postMessage({action:"mp4Captions",captions:b&&b.captions||[],logs:b&&b.logs||[],data:S.buffer},[S.buffer])}probeMp4StartTime({timescales:x,data:S}){const b=eu.startTime(x,S);this.self.postMessage({action:"probeMp4StartTime",startTime:b,data:S},[S.buffer])}probeMp4Tracks({data:x}){const S=eu.tracks(x);this.self.postMessage({action:"probeMp4Tracks",tracks:S,data:x},[x.buffer])}probeEmsgID3({data:x,offset:S}){const b=eu.getEmsgID3(x,S);this.self.postMessage({action:"probeEmsgID3",id3Frames:b,emsgData:x},[x.buffer])}probeTs({data:x,baseStartTime:S}){const b=typeof S=="number"&&!isNaN(S)?S*Ut.ONE_SECOND_IN_TS:void 0,w=sd.inspect(x,b);let R=null;w&&(R={hasVideo:w.video&&w.video.length===2||!1,hasAudio:w.audio&&w.audio.length===2||!1},R.hasVideo&&(R.videoStart=w.video[0].ptsTime),R.hasAudio&&(R.audioStart=w.audio[0].ptsTime)),this.self.postMessage({action:"probeTs",result:R,data:x},[x.buffer])}clearAllMp4Captions(){this.captionParser&&this.captionParser.clearAllCaptions()}clearParsedMp4Captions(){this.captionParser&&this.captionParser.clearParsedCaptions()}push(x){const S=new Uint8Array(x.data,x.byteOffset,x.byteLength);this.transmuxer.push(S)}reset(){this.transmuxer.reset()}setTimestampOffset(x){const S=x.timestampOffset||0;this.transmuxer.setBaseMediaDecodeTime(Math.round(Ut.secondsToVideoTs(S)))}setAudioAppendStart(x){this.transmuxer.setAudioAppendStart(Math.ceil(Ut.secondsToVideoTs(x.appendStart)))}setRemux(x){this.transmuxer.setRemux(x.remux)}flush(x){this.transmuxer.flush(),self.postMessage({action:"done",type:"transmuxed"})}endTimeline(){this.transmuxer.endTimeline(),self.postMessage({action:"endedtimeline",type:"transmuxed"})}alignGopsWith(x){this.transmuxer.alignGopsWith(x.gopsToAlignWith.slice())}}self.onmessage=function(p){if(p.data.action==="init"&&p.data.options){this.messageHandlers=new oc(self,p.data.options);return}this.messageHandlers||(this.messageHandlers=new oc(self)),p.data&&p.data.action&&p.data.action!=="init"&&this.messageHandlers[p.data.action]&&this.messageHandlers[p.data.action](p.data)}}));var Bhe=NU(Fhe);const Nhe=(r,e,t)=>{const{type:n,initSegment:i,captions:s,captionStreams:a,metadata:o,videoFrameDtsTime:l,videoFramePtsTime:u}=r.data.segment;e.buffer.push({captions:s,captionStreams:a,metadata:o});const c=r.data.segment.boxes||{data:r.data.segment.data},h={type:n,data:new Uint8Array(c.data,c.data.byteOffset,c.data.byteLength),initSegment:new Uint8Array(i.data,i.byteOffset,i.byteLength)};typeof l<"u"&&(h.videoFrameDtsTime=l),typeof u<"u"&&(h.videoFramePtsTime=u),t(h)},Uhe=({transmuxedData:r,callback:e})=>{r.buffer=[],e(r)},$he=(r,e)=>{e.gopInfo=r.data.gopInfo},jU=r=>{const{transmuxer:e,bytes:t,audioAppendStart:n,gopsToAlignWith:i,remux:s,onData:a,onTrackInfo:o,onAudioTimingInfo:l,onVideoTimingInfo:u,onVideoSegmentTimingInfo:c,onAudioSegmentTimingInfo:h,onId3:f,onCaptions:g,onDone:v,onEndedTimeline:y,onTransmuxerLog:_,isEndOfTimeline:C,segment:E,triggerSegmentEventFn:D}=r,I={buffer:[]};let k=C;const P=U=>{e.currentTransmux===r&&(U.data.action==="data"&&Nhe(U,I,a),U.data.action==="trackinfo"&&o(U.data.trackInfo),U.data.action==="gopInfo"&&$he(U,I),U.data.action==="audioTimingInfo"&&l(U.data.audioTimingInfo),U.data.action==="videoTimingInfo"&&u(U.data.videoTimingInfo),U.data.action==="videoSegmentTimingInfo"&&c(U.data.videoSegmentTimingInfo),U.data.action==="audioSegmentTimingInfo"&&h(U.data.audioSegmentTimingInfo),U.data.action==="id3Frame"&&f([U.data.id3Frame],U.data.id3Frame.dispatchType),U.data.action==="caption"&&g(U.data.caption),U.data.action==="endedtimeline"&&(k=!1,y()),U.data.action==="log"&&_(U.data.log),U.data.type==="transmuxed"&&(k||(e.onmessage=null,Uhe({transmuxedData:I,callback:v}),zU(e))))},N=()=>{const U={message:"Received an error message from the transmuxer worker",metadata:{errorType:Se.Error.StreamingFailedToTransmuxSegment,segmentInfo:Nh({segment:E})}};v(null,U)};if(e.onmessage=P,e.onerror=N,n&&e.postMessage({action:"setAudioAppendStart",appendStart:n}),Array.isArray(i)&&e.postMessage({action:"alignGopsWith",gopsToAlignWith:i}),typeof s<"u"&&e.postMessage({action:"setRemux",remux:s}),t.byteLength){const U=t instanceof ArrayBuffer?t:t.buffer,B=t instanceof ArrayBuffer?0:t.byteOffset;D({type:"segmenttransmuxingstart",segment:E}),e.postMessage({action:"push",data:U,byteOffset:B,byteLength:t.byteLength},[U])}C&&e.postMessage({action:"endTimeline"}),e.postMessage({action:"flush"})},zU=r=>{r.currentTransmux=null,r.transmuxQueue.length&&(r.currentTransmux=r.transmuxQueue.shift(),typeof r.currentTransmux=="function"?r.currentTransmux():jU(r.currentTransmux))},_M=(r,e)=>{r.postMessage({action:e}),zU(r)},HU=(r,e)=>{if(!e.currentTransmux){e.currentTransmux=r,_M(e,r);return}e.transmuxQueue.push(_M.bind(null,e,r))},jhe=r=>{HU("reset",r)},zhe=r=>{HU("endTimeline",r)},VU=r=>{if(!r.transmuxer.currentTransmux){r.transmuxer.currentTransmux=r,jU(r);return}r.transmuxer.transmuxQueue.push(r)},Hhe=r=>{const e=new Bhe;e.currentTransmux=null,e.transmuxQueue=[];const t=e.terminate;return e.terminate=()=>(e.currentTransmux=null,e.transmuxQueue.length=0,t.call(e)),e.postMessage({action:"init",options:r}),e};var BC={reset:jhe,endTimeline:zhe,transmux:VU,createTransmuxer:Hhe};const lg=function(r){const e=r.transmuxer,t=r.endAction||r.action,n=r.callback,i=sr({},r,{endAction:null,transmuxer:null,callback:null}),s=a=>{a.data.action===t&&(e.removeEventListener("message",s),a.data.data&&(a.data.data=new Uint8Array(a.data.data,r.byteOffset||0,r.byteLength||a.data.data.byteLength),r.data&&(r.data=a.data.data)),n(a.data))};if(e.addEventListener("message",s),r.data){const a=r.data instanceof ArrayBuffer;i.byteOffset=a?0:r.data.byteOffset,i.byteLength=r.data.byteLength;const o=[a?r.data:r.data.buffer];e.postMessage(i,o)}else e.postMessage(i)},Su={FAILURE:2,TIMEOUT:-101,ABORTED:-102},M2=r=>{r.forEach(e=>{e.abort()})},Vhe=r=>({bandwidth:r.bandwidth,bytesReceived:r.bytesReceived||0,roundTripTime:r.roundTripTime||0}),Whe=r=>{const e=r.target,n={bandwidth:1/0,bytesReceived:0,roundTripTime:Date.now()-e.requestTime||0};return n.bytesReceived=r.loaded,n.bandwidth=Math.floor(n.bytesReceived/n.roundTripTime*8*1e3),n},bA=(r,e)=>{const{requestType:t}=e,n=tf({requestType:t,request:e,error:r});return e.timedout?{status:e.status,message:"HLS request timed-out at URL: "+e.uri,code:Su.TIMEOUT,xhr:e,metadata:n}:e.aborted?{status:e.status,message:"HLS request aborted at URL: "+e.uri,code:Su.ABORTED,xhr:e,metadata:n}:r?{status:e.status,message:"HLS request errored at URL: "+e.uri,code:Su.FAILURE,xhr:e,metadata:n}:e.responseType==="arraybuffer"&&e.response.byteLength===0?{status:e.status,message:"Empty HLS response at URL: "+e.uri,code:Su.FAILURE,xhr:e,metadata:n}:null},bM=(r,e,t,n)=>(i,s)=>{const a=s.response,o=bA(i,s);if(o)return t(o,r);if(a.byteLength!==16)return t({status:s.status,message:"Invalid HLS key at URL: "+s.uri,code:Su.FAILURE,xhr:s},r);const l=new DataView(a),u=new Uint32Array([l.getUint32(0),l.getUint32(4),l.getUint32(8),l.getUint32(12)]);for(let h=0;h<e.length;h++)e[h].bytes=u;const c={uri:s.uri};return n({type:"segmentkeyloadcomplete",segment:r,keyInfo:c}),t(null,r)},WU=(r,e)=>{const t=Cm(r.map.bytes);if(t!=="mp4"){const n=r.map.resolvedUri||r.map.uri,i=t||"unknown";return e({internal:!0,message:`Found unsupported ${i} container for initialization segment at URL: ${n}`,code:Su.FAILURE,metadata:{mediaType:i}})}lg({action:"probeMp4Tracks",data:r.map.bytes,transmuxer:r.transmuxer,callback:({tracks:n,data:i})=>(r.map.bytes=i,n.forEach(function(s){r.map.tracks=r.map.tracks||{},!r.map.tracks[s.type]&&(r.map.tracks[s.type]=s,typeof s.id=="number"&&s.timescale&&(r.map.timescales=r.map.timescales||{},r.map.timescales[s.id]=s.timescale))}),e(null))})},qhe=({segment:r,finishProcessingFn:e,triggerSegmentEventFn:t})=>(n,i)=>{const s=bA(n,i);if(s)return e(s,r);const a=new Uint8Array(i.response);if(t({type:"segmentloaded",segment:r}),r.map.key)return r.map.encryptedBytes=a,e(null,r);r.map.bytes=a,WU(r,function(o){if(o)return o.xhr=i,o.status=i.status,e(o,r);e(null,r)})},Ghe=({segment:r,finishProcessingFn:e,responseType:t,triggerSegmentEventFn:n})=>(i,s)=>{const a=bA(i,s);if(a)return e(a,r);n({type:"segmentloaded",segment:r});const o=t==="arraybuffer"||!s.responseText?s.response:Ohe(s.responseText.substring(r.lastReachedChar||0));return r.stats=Vhe(s),r.key?r.encryptedBytes=new Uint8Array(o):r.bytes=new Uint8Array(o),e(null,r)},Khe=({segment:r,bytes:e,trackInfoFn:t,timingInfoFn:n,videoSegmentTimingInfoFn:i,audioSegmentTimingInfoFn:s,id3Fn:a,captionsFn:o,isEndOfTimeline:l,endedTimelineFn:u,dataFn:c,doneFn:h,onTransmuxerLog:f,triggerSegmentEventFn:g})=>{const v=r.map&&r.map.tracks||{},y=!!(v.audio&&v.video);let _=n.bind(null,r,"audio","start");const C=n.bind(null,r,"audio","end");let E=n.bind(null,r,"video","start");const D=n.bind(null,r,"video","end"),I=()=>VU({bytes:e,transmuxer:r.transmuxer,audioAppendStart:r.audioAppendStart,gopsToAlignWith:r.gopsToAlignWith,remux:y,onData:k=>{k.type=k.type==="combined"?"video":k.type,c(r,k)},onTrackInfo:k=>{t&&(y&&(k.isMuxed=!0),t(r,k))},onAudioTimingInfo:k=>{_&&typeof k.start<"u"&&(_(k.start),_=null),C&&typeof k.end<"u"&&C(k.end)},onVideoTimingInfo:k=>{E&&typeof k.start<"u"&&(E(k.start),E=null),D&&typeof k.end<"u"&&D(k.end)},onVideoSegmentTimingInfo:k=>{const P={pts:{start:k.start.presentation,end:k.end.presentation},dts:{start:k.start.decode,end:k.end.decode}};g({type:"segmenttransmuxingtiminginfoavailable",segment:r,timingInfo:P}),i(k)},onAudioSegmentTimingInfo:k=>{const P={pts:{start:k.start.pts,end:k.end.pts},dts:{start:k.start.dts,end:k.end.dts}};g({type:"segmenttransmuxingtiminginfoavailable",segment:r,timingInfo:P}),s(k)},onId3:(k,P)=>{a(r,k,P)},onCaptions:k=>{o(r,[k])},isEndOfTimeline:l,onEndedTimeline:()=>{u()},onTransmuxerLog:f,onDone:(k,P)=>{h&&(k.type=k.type==="combined"?"video":k.type,g({type:"segmenttransmuxingcomplete",segment:r}),h(P,r,k))},segment:r,triggerSegmentEventFn:g});lg({action:"probeTs",transmuxer:r.transmuxer,data:e,baseStartTime:r.baseStartTime,callback:k=>{r.bytes=e=k.data;const P=k.result;P&&(t(r,{hasAudio:P.hasAudio,hasVideo:P.hasVideo,isMuxed:y}),t=null),I()}})},qU=({segment:r,bytes:e,trackInfoFn:t,timingInfoFn:n,videoSegmentTimingInfoFn:i,audioSegmentTimingInfoFn:s,id3Fn:a,captionsFn:o,isEndOfTimeline:l,endedTimelineFn:u,dataFn:c,doneFn:h,onTransmuxerLog:f,triggerSegmentEventFn:g})=>{let v=new Uint8Array(e);if(W5(v)){r.isFmp4=!0;const{tracks:y}=r.map,_={isFmp4:!0,hasVideo:!!y.video,hasAudio:!!y.audio};y.audio&&y.audio.codec&&y.audio.codec!=="enca"&&(_.audioCodec=y.audio.codec),y.video&&y.video.codec&&y.video.codec!=="encv"&&(_.videoCodec=y.video.codec),y.video&&y.audio&&(_.isMuxed=!0),t(r,_);const C=(E,D)=>{c(r,{data:v,type:_.hasAudio&&!_.isMuxed?"audio":"video"}),D&&D.length&&a(r,D),E&&E.length&&o(r,E),h(null,r,{})};lg({action:"probeMp4StartTime",timescales:r.map.timescales,data:v,transmuxer:r.transmuxer,callback:({data:E,startTime:D})=>{e=E.buffer,r.bytes=v=E,_.hasAudio&&!_.isMuxed&&n(r,"audio","start",D),_.hasVideo&&n(r,"video","start",D),lg({action:"probeEmsgID3",data:v,transmuxer:r.transmuxer,offset:D,callback:({emsgData:I,id3Frames:k})=>{if(e=I.buffer,r.bytes=v=I,!y.video||!I.byteLength||!r.transmuxer){C(void 0,k);return}lg({action:"pushMp4Captions",endAction:"mp4Captions",transmuxer:r.transmuxer,data:v,timescales:r.map.timescales,trackIds:[y.video.id],callback:P=>{e=P.data.buffer,r.bytes=v=P.data,P.logs.forEach(function(N){f(An(N,{stream:"mp4CaptionParser"}))}),C(P.captions,k)}})}})}});return}if(!r.transmuxer){h(null,r,{});return}if(typeof r.container>"u"&&(r.container=Cm(v)),r.container!=="ts"&&r.container!=="aac"){t(r,{hasAudio:!1,hasVideo:!1}),h(null,r,{});return}Khe({segment:r,bytes:e,trackInfoFn:t,timingInfoFn:n,videoSegmentTimingInfoFn:i,audioSegmentTimingInfoFn:s,id3Fn:a,captionsFn:o,isEndOfTimeline:l,endedTimelineFn:u,dataFn:c,doneFn:h,onTransmuxerLog:f,triggerSegmentEventFn:g})},GU=function({id:r,key:e,encryptedBytes:t,decryptionWorker:n,segment:i,doneFn:s},a){const o=u=>{if(u.data.source===r){n.removeEventListener("message",o);const c=u.data.decrypted;a(new Uint8Array(c.bytes,c.byteOffset,c.byteLength))}};n.onerror=()=>{const u="An error occurred in the decryption worker",c=Nh({segment:i}),h={message:u,metadata:{error:new Error(u),errorType:Se.Error.StreamingFailedToDecryptSegment,segmentInfo:c,keyInfo:{uri:i.key.resolvedUri||i.map.key.resolvedUri}}};s(h,i)},n.addEventListener("message",o);let l;e.bytes.slice?l=e.bytes.slice():l=new Uint32Array(Array.prototype.slice.call(e.bytes)),n.postMessage(RU({source:r,encrypted:t,key:l,iv:e.iv}),[t.buffer,l.buffer])},Xhe=({decryptionWorker:r,segment:e,trackInfoFn:t,timingInfoFn:n,videoSegmentTimingInfoFn:i,audioSegmentTimingInfoFn:s,id3Fn:a,captionsFn:o,isEndOfTimeline:l,endedTimelineFn:u,dataFn:c,doneFn:h,onTransmuxerLog:f,triggerSegmentEventFn:g})=>{g({type:"segmentdecryptionstart"}),GU({id:e.requestId,key:e.key,encryptedBytes:e.encryptedBytes,decryptionWorker:r,segment:e,doneFn:h},v=>{e.bytes=v,g({type:"segmentdecryptioncomplete",segment:e}),qU({segment:e,bytes:e.bytes,trackInfoFn:t,timingInfoFn:n,videoSegmentTimingInfoFn:i,audioSegmentTimingInfoFn:s,id3Fn:a,captionsFn:o,isEndOfTimeline:l,endedTimelineFn:u,dataFn:c,doneFn:h,onTransmuxerLog:f,triggerSegmentEventFn:g})})},Yhe=({activeXhrs:r,decryptionWorker:e,trackInfoFn:t,timingInfoFn:n,videoSegmentTimingInfoFn:i,audioSegmentTimingInfoFn:s,id3Fn:a,captionsFn:o,isEndOfTimeline:l,endedTimelineFn:u,dataFn:c,doneFn:h,onTransmuxerLog:f,triggerSegmentEventFn:g})=>{let v=0,y=!1;return(_,C)=>{if(!y){if(_)return y=!0,M2(r),h(_,C);if(v+=1,v===r.length){const E=function(){if(C.encryptedBytes)return Xhe({decryptionWorker:e,segment:C,trackInfoFn:t,timingInfoFn:n,videoSegmentTimingInfoFn:i,audioSegmentTimingInfoFn:s,id3Fn:a,captionsFn:o,isEndOfTimeline:l,endedTimelineFn:u,dataFn:c,doneFn:h,onTransmuxerLog:f,triggerSegmentEventFn:g});qU({segment:C,bytes:C.bytes,trackInfoFn:t,timingInfoFn:n,videoSegmentTimingInfoFn:i,audioSegmentTimingInfoFn:s,id3Fn:a,captionsFn:o,isEndOfTimeline:l,endedTimelineFn:u,dataFn:c,doneFn:h,onTransmuxerLog:f,triggerSegmentEventFn:g})};if(C.endOfAllRequests=Date.now(),C.map&&C.map.encryptedBytes&&!C.map.bytes)return g({type:"segmentdecryptionstart",segment:C}),GU({decryptionWorker:e,id:C.requestId+"-init",encryptedBytes:C.map.encryptedBytes,key:C.map.key,segment:C,doneFn:h},D=>{C.map.bytes=D,g({type:"segmentdecryptioncomplete",segment:C}),WU(C,I=>{if(I)return M2(r),h(I,C);E()})});E()}}}},Qhe=({loadendState:r,abortFn:e})=>t=>{t.target.aborted&&e&&!r.calledAbortFn&&(e(),r.calledAbortFn=!0)},Jhe=({segment:r,progressFn:e,trackInfoFn:t,timingInfoFn:n,videoSegmentTimingInfoFn:i,audioSegmentTimingInfoFn:s,id3Fn:a,captionsFn:o,isEndOfTimeline:l,endedTimelineFn:u,dataFn:c})=>h=>{if(!h.target.aborted)return r.stats=An(r.stats,Whe(h)),!r.stats.firstBytesReceivedAt&&r.stats.bytesReceived&&(r.stats.firstBytesReceivedAt=Date.now()),e(h,r)},Zhe=({xhr:r,xhrOptions:e,decryptionWorker:t,segment:n,abortFn:i,progressFn:s,trackInfoFn:a,timingInfoFn:o,videoSegmentTimingInfoFn:l,audioSegmentTimingInfoFn:u,id3Fn:c,captionsFn:h,isEndOfTimeline:f,endedTimelineFn:g,dataFn:v,doneFn:y,onTransmuxerLog:_,triggerSegmentEventFn:C})=>{const E=[],D=Yhe({activeXhrs:E,decryptionWorker:t,trackInfoFn:a,timingInfoFn:o,videoSegmentTimingInfoFn:l,audioSegmentTimingInfoFn:u,id3Fn:c,captionsFn:h,isEndOfTimeline:f,endedTimelineFn:g,dataFn:v,doneFn:y,onTransmuxerLog:_,triggerSegmentEventFn:C});if(n.key&&!n.key.bytes){const U=[n.key];n.map&&!n.map.bytes&&n.map.key&&n.map.key.resolvedUri===n.key.resolvedUri&&U.push(n.map.key);const B=An(e,{uri:n.key.resolvedUri,responseType:"arraybuffer",requestType:"segment-key"}),A=bM(n,U,D,C),$={uri:n.key.resolvedUri};C({type:"segmentkeyloadstart",segment:n,keyInfo:$});const W=r(B,A);E.push(W)}if(n.map&&!n.map.bytes){if(n.map.key&&(!n.key||n.key.resolvedUri!==n.map.key.resolvedUri)){const W=An(e,{uri:n.map.key.resolvedUri,responseType:"arraybuffer",requestType:"segment-key"}),V=bM(n,[n.map.key],D,C),Q={uri:n.map.key.resolvedUri};C({type:"segmentkeyloadstart",segment:n,keyInfo:Q});const ie=r(W,V);E.push(ie)}const B=An(e,{uri:n.map.resolvedUri,responseType:"arraybuffer",headers:L2(n.map),requestType:"segment-media-initialization"}),A=qhe({segment:n,finishProcessingFn:D,triggerSegmentEventFn:C});C({type:"segmentloadstart",segment:n});const $=r(B,A);E.push($)}const I=An(e,{uri:n.part&&n.part.resolvedUri||n.resolvedUri,responseType:"arraybuffer",headers:L2(n),requestType:"segment"}),k=Ghe({segment:n,finishProcessingFn:D,responseType:I.responseType,triggerSegmentEventFn:C});C({type:"segmentloadstart",segment:n});const P=r(I,k);P.addEventListener("progress",Jhe({segment:n,progressFn:s,trackInfoFn:a,timingInfoFn:o,videoSegmentTimingInfoFn:l,audioSegmentTimingInfoFn:u,id3Fn:c,captionsFn:h,isEndOfTimeline:f,endedTimelineFn:g,dataFn:v})),E.push(P);const N={};return E.forEach(U=>{U.addEventListener("loadend",Qhe({loadendState:N,abortFn:i}))}),()=>M2(E)},efe=ul("CodecUtils"),tfe=function(r){const e=r.attributes||{};if(e.CODECS)return Ni(e.CODECS)},KU=(r,e)=>{const t=e.attributes||{};return r&&r.mediaGroups&&r.mediaGroups.AUDIO&&t.AUDIO&&r.mediaGroups.AUDIO[t.AUDIO]},rfe=(r,e)=>{if(!KU(r,e))return!0;const t=e.attributes||{},n=r.mediaGroups.AUDIO[t.AUDIO];for(const i in n)if(!n[i].uri&&!n[i].playlists)return!0;return!1},ob=function(r){const e={};return r.forEach(({mediaType:t,type:n,details:i})=>{e[t]=e[t]||[],e[t].push(Nk(`${n}${i}`))}),Object.keys(e).forEach(function(t){if(e[t].length>1){efe(`multiple ${t} codecs found as attributes: ${e[t].join(", ")}. Setting playlist codecs to null so that we wait for mux.js to probe segments for real codecs.`),e[t]=null;return}e[t]=e[t][0]}),e},SM=function(r){let e=0;return r.audio&&e++,r.video&&e++,e},ug=function(r,e){const t=e.attributes||{},n=ob(tfe(e)||[]);if(KU(r,e)&&!n.audio&&!rfe(r,e)){const i=ob(I5(r,t.AUDIO)||[]);i.audio&&(n.audio=i.audio)}return n},Vy=ul("PlaylistSelector"),TM=function(r){if(!r||!r.playlist)return;const e=r.playlist;return JSON.stringify({id:e.id,bandwidth:r.bandwidth,width:r.width,height:r.height,codecs:e.attributes&&e.attributes.CODECS||""})},lb=function(r,e){if(!r)return"";const t=X.getComputedStyle(r);return t?t[e]:""},Rp=function(r,e){const t=r.slice();r.sort(function(n,i){const s=e(n,i);return s===0?t.indexOf(n)-t.indexOf(i):s})},SA=function(r,e){let t,n;return r.attributes.BANDWIDTH&&(t=r.attributes.BANDWIDTH),t=t||X.Number.MAX_VALUE,e.attributes.BANDWIDTH&&(n=e.attributes.BANDWIDTH),n=n||X.Number.MAX_VALUE,t-n},nfe=function(r,e){let t,n;return r.attributes.RESOLUTION&&r.attributes.RESOLUTION.width&&(t=r.attributes.RESOLUTION.width),t=t||X.Number.MAX_VALUE,e.attributes.RESOLUTION&&e.attributes.RESOLUTION.width&&(n=e.attributes.RESOLUTION.width),n=n||X.Number.MAX_VALUE,t===n&&r.attributes.BANDWIDTH&&e.attributes.BANDWIDTH?r.attributes.BANDWIDTH-e.attributes.BANDWIDTH:t-n};let XU=function(r,e,t,n,i,s){if(!r)return;const a={bandwidth:e,width:t,height:n,limitRenditionByPlayerDimensions:i};let o=r.playlists;Oa.isAudioOnly(r)&&(o=s.getAudioTrackPlaylists_(),a.audioOnly=!0);let l=o.map(k=>{let P;const N=k.attributes&&k.attributes.RESOLUTION&&k.attributes.RESOLUTION.width,U=k.attributes&&k.attributes.RESOLUTION&&k.attributes.RESOLUTION.height;return P=k.attributes&&k.attributes.BANDWIDTH,P=P||X.Number.MAX_VALUE,{bandwidth:P,width:N,height:U,playlist:k}});Rp(l,(k,P)=>k.bandwidth-P.bandwidth),l=l.filter(k=>!Oa.isIncompatible(k.playlist));let u=l.filter(k=>Oa.isEnabled(k.playlist));u.length||(u=l.filter(k=>!Oa.isDisabled(k.playlist)));const c=u.filter(k=>k.bandwidth*Ji.BANDWIDTH_VARIANCE<e);let h=c[c.length-1];const f=c.filter(k=>k.bandwidth===h.bandwidth)[0];if(i===!1){const k=f||u[0]||l[0];if(k&&k.playlist){let P="sortedPlaylistReps";return f&&(P="bandwidthBestRep"),u[0]&&(P="enabledPlaylistReps"),Vy(`choosing ${TM(k)} using ${P} with options`,a),k.playlist}return Vy("could not choose a playlist with options",a),null}const g=c.filter(k=>k.width&&k.height);Rp(g,(k,P)=>k.width-P.width);const v=g.filter(k=>k.width===t&&k.height===n);h=v[v.length-1];const y=v.filter(k=>k.bandwidth===h.bandwidth)[0];let _,C,E;y||(_=g.filter(k=>k.width>t||k.height>n),C=_.filter(k=>k.width===_[0].width&&k.height===_[0].height),h=C[C.length-1],E=C.filter(k=>k.bandwidth===h.bandwidth)[0]);let D;if(s.leastPixelDiffSelector){const k=g.map(P=>(P.pixelDiff=Math.abs(P.width-t)+Math.abs(P.height-n),P));Rp(k,(P,N)=>P.pixelDiff===N.pixelDiff?N.bandwidth-P.bandwidth:P.pixelDiff-N.pixelDiff),D=k[0]}const I=D||E||y||f||u[0]||l[0];if(I&&I.playlist){let k="sortedPlaylistReps";return D?k="leastPixelDiffRep":E?k="resolutionPlusOneRep":y?k="resolutionBestRep":f?k="bandwidthBestRep":u[0]&&(k="enabledPlaylistReps"),Vy(`choosing ${TM(I)} using ${k} with options`,a),I.playlist}return Vy("could not choose a playlist with options",a),null};const CM=function(){let r=this.useDevicePixelRatio&&X.devicePixelRatio||1;return isNaN(this.customPixelRatio)||(r=this.customPixelRatio),XU(this.playlists.main,this.systemBandwidth,parseInt(lb(this.tech_.el(),"width"),10)*r,parseInt(lb(this.tech_.el(),"height"),10)*r,this.limitRenditionByPlayerDimensions,this.playlistController_)},ife=function(r){let e=-1,t=-1;if(r<0||r>1)throw new Error("Moving average bandwidth decay must be between 0 and 1.");return function(){let n=this.useDevicePixelRatio&&X.devicePixelRatio||1;return isNaN(this.customPixelRatio)||(n=this.customPixelRatio),e<0&&(e=this.systemBandwidth,t=this.systemBandwidth),this.systemBandwidth>0&&this.systemBandwidth!==t&&(e=r*this.systemBandwidth+(1-r)*e,t=this.systemBandwidth),XU(this.playlists.main,e,parseInt(lb(this.tech_.el(),"width"),10)*n,parseInt(lb(this.tech_.el(),"height"),10)*n,this.limitRenditionByPlayerDimensions,this.playlistController_)}},sfe=function(r){const{main:e,currentTime:t,bandwidth:n,duration:i,segmentDuration:s,timeUntilRebuffer:a,currentTimeline:o,syncController:l}=r,u=e.playlists.filter(v=>!Oa.isIncompatible(v));let c=u.filter(Oa.isEnabled);c.length||(c=u.filter(v=>!Oa.isDisabled(v)));const f=c.filter(Oa.hasAttribute.bind(null,"BANDWIDTH")).map(v=>{const _=l.getSyncPoint(v,i,o,t)?1:2,E=Oa.estimateSegmentRequestTime(s,n,v)*_-a;return{playlist:v,rebufferingImpact:E}}),g=f.filter(v=>v.rebufferingImpact<=0);return Rp(g,(v,y)=>SA(y.playlist,v.playlist)),g.length?g[0]:(Rp(f,(v,y)=>v.rebufferingImpact-y.rebufferingImpact),f[0]||null)},afe=function(){const r=this.playlists.main.playlists.filter(Oa.isEnabled);return Rp(r,(t,n)=>SA(t,n)),r.filter(t=>!!ug(this.playlists.main,t).video)[0]||null},ofe=r=>{let e=0,t;return r.bytes&&(t=new Uint8Array(r.bytes),r.segments.forEach(n=>{t.set(n,e),e+=n.byteLength})),t};function YU(r){try{return new URL(r).pathname.split("/").slice(-2).join("/")}catch{return""}}const lfe=function(r,e,t){if(!r[t]){e.trigger({type:"usage",name:"vhs-608"});let n=t;/^cc708_/.test(t)&&(n="SERVICE"+t.split("_")[1]);const i=e.textTracks().getTrackById(n);if(i)r[t]=i;else{const s=e.options_.vhs&&e.options_.vhs.captionServices||{};let a=t,o=t,l=!1;const u=s[n];u&&(a=u.label,o=u.language,l=u.default),r[t]=e.addRemoteTextTrack({kind:"captions",id:n,default:l,label:a,language:o},!1).track}}},ufe=function({inbandTextTracks:r,captionArray:e,timestampOffset:t}){if(!e)return;const n=X.WebKitDataCue||X.VTTCue;e.forEach(i=>{const s=i.stream;i.content?i.content.forEach(a=>{const o=new n(i.startTime+t,i.endTime+t,a.text);o.line=a.line,o.align="left",o.position=a.position,o.positionAlign="line-left",r[s].addCue(o)}):r[s].addCue(new n(i.startTime+t,i.endTime+t,i.text))})},cfe=function(r){Object.defineProperties(r.frame,{id:{get(){return Se.log.warn("cue.frame.id is deprecated. Use cue.value.key instead."),r.value.key}},value:{get(){return Se.log.warn("cue.frame.value is deprecated. Use cue.value.data instead."),r.value.data}},privateData:{get(){return Se.log.warn("cue.frame.privateData is deprecated. Use cue.value.data instead."),r.value.data}}})},dfe=({inbandTextTracks:r,metadataArray:e,timestampOffset:t,videoDuration:n})=>{if(!e)return;const i=X.WebKitDataCue||X.VTTCue,s=r.metadataTrack_;if(!s||(e.forEach(c=>{const h=c.cueTime+t;typeof h!="number"||X.isNaN(h)||h<0||!(h<1/0)||!c.frames||!c.frames.length||c.frames.forEach(f=>{const g=new i(h,h,f.value||f.url||f.data||"");g.frame=f,g.value=f,cfe(g),s.addCue(g)})}),!s.cues||!s.cues.length))return;const a=s.cues,o=[];for(let c=0;c<a.length;c++)a[c]&&o.push(a[c]);const l=o.reduce((c,h)=>{const f=c[h.startTime]||[];return f.push(h),c[h.startTime]=f,c},{}),u=Object.keys(l).sort((c,h)=>Number(c)-Number(h));u.forEach((c,h)=>{const f=l[c],g=isFinite(n)?n:c,v=Number(u[h+1])||g;f.forEach(y=>{y.endTime=v})})},hfe={id:"ID",class:"CLASS",startDate:"START-DATE",duration:"DURATION",endDate:"END-DATE",endOnNext:"END-ON-NEXT",plannedDuration:"PLANNED-DURATION",scte35Out:"SCTE35-OUT",scte35In:"SCTE35-IN"},ffe=new Set(["id","class","startDate","duration","endDate","endOnNext","startTime","endTime","processDateRange"]),pfe=({inbandTextTracks:r,dateRanges:e})=>{const t=r.metadataTrack_;if(!t)return;const n=X.WebKitDataCue||X.VTTCue;e.forEach(i=>{for(const s of Object.keys(i)){if(ffe.has(s))continue;const a=new n(i.startTime,i.endTime,"");a.id=i.id,a.type="com.apple.quicktime.HLS",a.value={key:hfe[s],data:i[s]},(s==="scte35Out"||s==="scte35In")&&(a.value.data=new Uint8Array(a.value.data.match(/[\da-f]{2}/gi)).buffer),t.addCue(a)}i.processDateRange()})},wM=(r,e,t)=>{r.metadataTrack_||(r.metadataTrack_=t.addRemoteTextTrack({kind:"metadata",label:"Timed Metadata"},!1).track,Se.browser.IS_ANY_SAFARI||(r.metadataTrack_.inBandMetadataTrackDispatchType=e))},W0=function(r,e,t){let n,i;if(t&&t.cues)for(n=t.cues.length;n--;)i=t.cues[n],i.startTime>=r&&i.endTime<=e&&t.removeCue(i)},mfe=function(r){const e=r.cues;if(!e)return;const t={};for(let n=e.length-1;n>=0;n--){const i=e[n],s=`${i.startTime}-${i.endTime}-${i.text}`;t[s]?r.removeCue(i):t[s]=i}},gfe=(r,e,t)=>{if(typeof e>"u"||e===null||!r.length)return[];const n=Math.ceil((e-t+3)*Ba.ONE_SECOND_IN_TS);let i;for(i=0;i<r.length&&!(r[i].pts>n);i++);return r.slice(i)},vfe=(r,e,t)=>{if(!e.length)return r;if(t)return e.slice();const n=e[0].pts;let i=0;for(i;i<r.length&&!(r[i].pts>=n);i++);return r.slice(0,i).concat(e)},yfe=(r,e,t,n)=>{const i=Math.ceil((e-n)*Ba.ONE_SECOND_IN_TS),s=Math.ceil((t-n)*Ba.ONE_SECOND_IN_TS),a=r.slice();let o=r.length;for(;o--&&!(r[o].pts<=s););if(o===-1)return a;let l=o+1;for(;l--&&!(r[l].pts<=i););return l=Math.max(l,0),a.splice(l,o-l+1),a},xfe=function(r,e){if(!r&&!e||!r&&e||r&&!e)return!1;if(r===e)return!0;const t=Object.keys(r).sort(),n=Object.keys(e).sort();if(t.length!==n.length)return!1;for(let i=0;i<t.length;i++){const s=t[i];if(s!==n[i]||r[s]!==e[s])return!1}return!0},_fe=function(r,e,t){e=e||[];const n=[];let i=0;for(let s=0;s<e.length;s++){const a=e[s];if(r===a.timeline&&(n.push(s),i+=a.duration,i>t))return s}return n.length===0?0:n[n.length-1]},R0=1,bfe=500,EM=r=>typeof r=="number"&&isFinite(r),Wy=1/60,Sfe=(r,e,t)=>r!=="main"||!e||!t?null:!t.hasAudio&&!t.hasVideo?"Neither audio nor video found in segment.":e.hasVideo&&!t.hasVideo?"Only audio found in segment when we expected video. We can't switch to audio only from a stream that had video. To get rid of this message, please add codec information to the manifest.":!e.hasVideo&&t.hasVideo?"Video found in segment when we expected only audio. We can't switch to a stream with video from an audio only stream. To get rid of this message, please add codec information to the manifest.":null,Tfe=(r,e,t)=>{let n=e-Ji.BACK_BUFFER_LENGTH;r.length&&(n=Math.max(n,r.start(0)));const i=e-t;return Math.min(i,n)},Yf=r=>{const{startOfSegment:e,duration:t,segment:n,part:i,playlist:{mediaSequence:s,id:a,segments:o=[]},mediaIndex:l,partIndex:u,timeline:c}=r,h=o.length-1;let f="mediaIndex/partIndex increment";r.getMediaInfoForTime?f=`getMediaInfoForTime (${r.getMediaInfoForTime})`:r.isSyncRequest&&(f="getSyncSegmentCandidate (isSyncRequest)"),r.independent&&(f+=` with independent ${r.independent}`);const g=typeof u=="number",v=r.segment.uri?"segment":"pre-segment",y=g?gU({preloadSegment:n})-1:0;return`${v} [${s+l}/${s+h}]`+(g?` part [${u}/${y}]`:"")+` segment start/end [${n.start} => ${n.end}]`+(g?` part start/end [${i.start} => ${i.end}]`:"")+` startOfSegment [${e}] duration [${t}] timeline [${c}] selected by [${f}] playlist [${a}]`},kM=r=>`${r}TimingInfo`,Cfe=({segmentTimeline:r,currentTimeline:e,startOfSegment:t,buffered:n,overrideCheck:i})=>!i&&r===e?null:r<e?t:n.length?n.end(n.length-1):t,F2=({timelineChangeController:r,currentTimeline:e,segmentTimeline:t,loaderType:n,audioDisabled:i})=>{if(e===t)return!1;if(n==="audio"){const s=r.lastTimelineChange({type:"main"});return!s||s.to!==t}if(n==="main"&&i){const s=r.pendingTimelineChange({type:"audio"});return!(s&&s.to===t)}return!1},wfe=r=>{if(!r)return!1;const e=r.pendingTimelineChange({type:"audio"}),t=r.pendingTimelineChange({type:"main"}),n=e&&t,i=n&&e.to!==t.to;return!!(n&&e.from!==-1&&t.from!==-1&&i)},Efe=r=>{r&&(r.pause(),r.resetEverything(),r.load())},kfe=r=>{const e=r.timelineChangeController_.pendingTimelineChange({type:"audio"}),t=r.timelineChangeController_.pendingTimelineChange({type:"main"});return e&&t&&e.to<t.to},bd=r=>{const e=r.pendingSegment_;if(!e)return;if(F2({timelineChangeController:r.timelineChangeController_,currentTimeline:r.currentTimeline_,segmentTimeline:e.timeline,loaderType:r.loaderType_,audioDisabled:r.audioDisabled_})&&wfe(r.timelineChangeController_)){if(kfe(r)){r.timelineChangeController_.trigger("audioTimelineBehind");return}Efe(r)}},Afe=r=>{let e=0;return["video","audio"].forEach(function(t){const n=r[`${t}TimingInfo`];if(!n)return;const{start:i,end:s}=n;let a;typeof i=="bigint"||typeof s=="bigint"?a=X.BigInt(s)-X.BigInt(i):typeof i=="number"&&typeof s=="number"&&(a=s-i),typeof a<"u"&&a>e&&(e=a)}),typeof e=="bigint"&&e<Number.MAX_SAFE_INTEGER&&(e=Number(e)),e},AM=({segmentDuration:r,maxDuration:e})=>r?Math.round(r)>e+_u:!1,Dfe=(r,e)=>{if(e!=="hls")return null;const t=Afe({audioTimingInfo:r.audioTimingInfo,videoTimingInfo:r.videoTimingInfo});if(!t)return null;const n=r.playlist.targetDuration,i=AM({segmentDuration:t,maxDuration:n*2}),s=AM({segmentDuration:t,maxDuration:n}),a=`Segment with index ${r.mediaIndex} from playlist ${r.playlist.id} has a duration of ${t} when the reported duration is ${r.duration} and the target duration is ${n}. For HLS content, a duration in excess of the target duration may result in playback issues. See the HLS specification section on EXT-X-TARGETDURATION for more details: https://tools.ietf.org/html/draft-pantos-http-live-streaming-23#section-4.3.3.1`;return i||s?{severity:i?"warn":"info",message:a}:null},Nh=({type:r,segment:e})=>{if(!e)return;const t=!!(e.key||e.map&&e.map.ke),n=!!(e.map&&!e.map.bytes),i=e.startOfSegment===void 0?e.start:e.startOfSegment;return{type:r||e.type,uri:e.resolvedUri||e.uri,start:i,duration:e.duration,isEncrypted:t,isMediaInitialization:n}};let B2=class extends Se.EventTarget{constructor(e,t={}){if(super(),!e)throw new TypeError("Initialization settings are required");if(typeof e.currentTime!="function")throw new TypeError("No currentTime getter specified");if(!e.mediaSource)throw new TypeError("No MediaSource specified");this.bandwidth=e.bandwidth,this.throughput={rate:0,count:0},this.roundTrip=NaN,this.resetStats_(),this.mediaIndex=null,this.partIndex=null,this.hasPlayed_=e.hasPlayed,this.currentTime_=e.currentTime,this.seekable_=e.seekable,this.seeking_=e.seeking,this.duration_=e.duration,this.mediaSource_=e.mediaSource,this.vhs_=e.vhs,this.loaderType_=e.loaderType,this.currentMediaInfo_=void 0,this.startingMediaInfo_=void 0,this.segmentMetadataTrack_=e.segmentMetadataTrack,this.goalBufferLength_=e.goalBufferLength,this.sourceType_=e.sourceType,this.sourceUpdater_=e.sourceUpdater,this.inbandTextTracks_=e.inbandTextTracks,this.state_="INIT",this.timelineChangeController_=e.timelineChangeController,this.shouldSaveSegmentTimingInfo_=!0,this.parse708captions_=e.parse708captions,this.useDtsForTimestampOffset_=e.useDtsForTimestampOffset,this.captionServices_=e.captionServices,this.exactManifestTimings=e.exactManifestTimings,this.addMetadataToTextTrack=e.addMetadataToTextTrack,this.checkBufferTimeout_=null,this.error_=void 0,this.currentTimeline_=-1,this.shouldForceTimestampOffsetAfterResync_=!1,this.pendingSegment_=null,this.xhrOptions_=null,this.pendingSegments_=[],this.audioDisabled_=!1,this.isPendingTimestampOffset_=!1,this.gopBuffer_=[],this.timeMapping_=0,this.safeAppend_=!1,this.appendInitSegment_={audio:!0,video:!0},this.playlistOfLastInitSegment_={audio:null,video:null},this.callQueue_=[],this.loadQueue_=[],this.metadataQueue_={id3:[],caption:[]},this.waitingOnRemove_=!1,this.quotaExceededErrorRetryTimeout_=null,this.activeInitSegmentId_=null,this.initSegments_={},this.cacheEncryptionKeys_=e.cacheEncryptionKeys,this.keyCache_={},this.decrypter_=e.decrypter,this.syncController_=e.syncController,this.syncPoint_={segmentIndex:0,time:0},this.transmuxer_=this.createTransmuxer_(),this.triggerSyncInfoUpdate_=()=>this.trigger("syncinfoupdate"),this.syncController_.on("syncinfoupdate",this.triggerSyncInfoUpdate_),this.mediaSource_.addEventListener("sourceopen",()=>{this.isEndOfStream_()||(this.ended_=!1)}),this.fetchAtBuffer_=!1,this.logger_=ul(`SegmentLoader[${this.loaderType_}]`),Object.defineProperty(this,"state",{get(){return this.state_},set(n){n!==this.state_&&(this.logger_(`${this.state_} -> ${n}`),this.state_=n,this.trigger("statechange"))}}),this.sourceUpdater_.on("ready",()=>{this.hasEnoughInfoToAppend_()?this.processCallQueue_():bd(this)}),this.sourceUpdater_.on("codecschange",n=>{this.trigger(sr({type:"codecschange"},n))}),this.loaderType_==="main"&&this.timelineChangeController_.on("pendingtimelinechange",()=>{this.hasEnoughInfoToAppend_()?this.processCallQueue_():bd(this)}),this.loaderType_==="audio"&&this.timelineChangeController_.on("timelinechange",n=>{this.trigger(sr({type:"timelinechange"},n)),this.hasEnoughInfoToLoad_()?this.processLoadQueue_():bd(this),this.hasEnoughInfoToAppend_()?this.processCallQueue_():bd(this)})}get mediaSequenceSync_(){return this.syncController_.getMediaSequenceSync(this.loaderType_)}createTransmuxer_(){return BC.createTransmuxer({remux:!1,alignGopsAtEnd:this.safeAppend_,keepOriginalTimestamps:!0,parse708captions:this.parse708captions_,captionServices:this.captionServices_})}resetStats_(){this.mediaBytesTransferred=0,this.mediaRequests=0,this.mediaRequestsAborted=0,this.mediaRequestsTimedout=0,this.mediaRequestsErrored=0,this.mediaTransferDuration=0,this.mediaSecondsLoaded=0,this.mediaAppends=0}dispose(){this.trigger("dispose"),this.state="DISPOSED",this.pause(),this.abort_(),this.transmuxer_&&this.transmuxer_.terminate(),this.resetStats_(),this.checkBufferTimeout_&&X.clearTimeout(this.checkBufferTimeout_),this.syncController_&&this.triggerSyncInfoUpdate_&&this.syncController_.off("syncinfoupdate",this.triggerSyncInfoUpdate_),this.off()}setAudio(e){this.audioDisabled_=!e,e?this.appendInitSegment_.audio=!0:this.sourceUpdater_.removeAudio(0,this.duration_())}abort(){if(this.state!=="WAITING"){this.pendingSegment_&&(this.pendingSegment_=null);return}this.abort_(),this.state="READY",this.paused()||this.monitorBuffer_()}abort_(){this.pendingSegment_&&this.pendingSegment_.abortRequests&&this.pendingSegment_.abortRequests(),this.pendingSegment_=null,this.callQueue_=[],this.loadQueue_=[],this.metadataQueue_.id3=[],this.metadataQueue_.caption=[],this.timelineChangeController_.clearPendingTimelineChange(this.loaderType_),this.waitingOnRemove_=!1,X.clearTimeout(this.quotaExceededErrorRetryTimeout_),this.quotaExceededErrorRetryTimeout_=null}checkForAbort_(e){return this.state==="APPENDING"&&!this.pendingSegment_?(this.state="READY",!0):!this.pendingSegment_||this.pendingSegment_.requestId!==e}error(e){return typeof e<"u"&&(this.logger_("error occurred:",e),this.error_=e),this.pendingSegment_=null,this.error_}endOfStream(){this.ended_=!0,this.transmuxer_&&BC.reset(this.transmuxer_),this.gopBuffer_.length=0,this.pause(),this.trigger("ended")}buffered_(){const e=this.getMediaInfo_();if(!this.sourceUpdater_||!e)return xs();if(this.loaderType_==="main"){const{hasAudio:t,hasVideo:n,isMuxed:i}=e;if(n&&t&&!this.audioDisabled_&&!i)return this.sourceUpdater_.buffered();if(n)return this.sourceUpdater_.videoBuffered()}return this.sourceUpdater_.audioBuffered()}initSegmentForMap(e,t=!1){if(!e)return null;const n=ab(e);let i=this.initSegments_[n];return t&&!i&&e.bytes&&(this.initSegments_[n]=i={resolvedUri:e.resolvedUri,byterange:e.byterange,bytes:e.bytes,tracks:e.tracks,timescales:e.timescales}),i||e}segmentKey(e,t=!1){if(!e)return null;const n=LU(e);let i=this.keyCache_[n];this.cacheEncryptionKeys_&&t&&!i&&e.bytes&&(this.keyCache_[n]=i={resolvedUri:e.resolvedUri,bytes:e.bytes});const s={resolvedUri:(i||e).resolvedUri};return i&&(s.bytes=i.bytes),s}couldBeginLoading_(){return this.playlist_&&!this.paused()}load(){if(this.monitorBuffer_(),!!this.playlist_){if(this.state==="INIT"&&this.couldBeginLoading_())return this.init_();!this.couldBeginLoading_()||this.state!=="READY"&&this.state!=="INIT"||(this.state="READY")}}init_(){return this.state="READY",this.resetEverything(),this.monitorBuffer_()}playlist(e,t={}){if(!e)return;const n=this.playlist_,i=this.pendingSegment_;this.playlist_=e,this.xhrOptions_=t,this.state==="INIT"&&(e.syncInfo={mediaSequence:e.mediaSequence,time:0},this.loaderType_==="main"&&this.syncController_.setDateTimeMappingForStart(e));let s=null;if(n&&(n.id?s=n.id:n.uri&&(s=n.uri)),this.logger_(`playlist update [${s} => ${e.id||e.uri}]`),this.mediaSequenceSync_&&(this.mediaSequenceSync_.update(e,this.currentTime_()),this.logger_(`Playlist update:
currentTime: ${this.currentTime_()}
bufferedEnd: ${MC(this.buffered_())}
`,this.mediaSequenceSync_.diagnostics)),this.trigger("syncinfoupdate"),this.state==="INIT"&&this.couldBeginLoading_())return this.init_();if(!n||n.uri!==e.uri){this.mediaIndex!==null&&(!e.endList&&typeof e.partTargetDuration=="number"?this.resetLoader():this.resyncLoader()),this.currentMediaInfo_=void 0,this.trigger("playlistupdate");return}const a=e.mediaSequence-n.mediaSequence;if(this.logger_(`live window shift [${a}]`),this.mediaIndex!==null)if(this.mediaIndex-=a,this.mediaIndex<0)this.mediaIndex=null,this.partIndex=null;else{const o=this.playlist_.segments[this.mediaIndex];if(this.partIndex&&(!o.parts||!o.parts.length||!o.parts[this.partIndex])){const l=this.mediaIndex;this.logger_(`currently processing part (index ${this.partIndex}) no longer exists.`),this.resetLoader(),this.mediaIndex=l}}i&&(i.mediaIndex-=a,i.mediaIndex<0?(i.mediaIndex=null,i.partIndex=null):(i.mediaIndex>=0&&(i.segment=e.segments[i.mediaIndex]),i.partIndex>=0&&i.segment.parts&&(i.part=i.segment.parts[i.partIndex]))),this.syncController_.saveExpiredSegmentInfo(n,e)}pause(){this.checkBufferTimeout_&&(X.clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=null)}paused(){return this.checkBufferTimeout_===null}resetEverything(e){this.ended_=!1,this.activeInitSegmentId_=null,this.appendInitSegment_={audio:!0,video:!0},this.resetLoader(),this.remove(0,1/0,e),this.transmuxer_&&(this.transmuxer_.postMessage({action:"clearAllMp4Captions"}),this.transmuxer_.postMessage({action:"reset"}))}resetLoader(){this.fetchAtBuffer_=!1,this.mediaSequenceSync_&&this.mediaSequenceSync_.resetAppendedStatus(),this.resyncLoader()}resyncLoader(){this.transmuxer_&&BC.reset(this.transmuxer_),this.mediaIndex=null,this.partIndex=null,this.syncPoint_=null,this.isPendingTimestampOffset_=!1;const e=this.currentMediaInfo_&&this.currentMediaInfo_.isFmp4;this.sourceType_==="hls"&&!e&&(this.shouldForceTimestampOffsetAfterResync_=!0),this.callQueue_=[],this.loadQueue_=[],this.metadataQueue_.id3=[],this.metadataQueue_.caption=[],this.abort(),this.transmuxer_&&this.transmuxer_.postMessage({action:"clearParsedMp4Captions"})}remove(e,t,n=()=>{},i=!1){if(t===1/0&&(t=this.duration_()),t<=e){this.logger_("skipping remove because end ${end} is <= start ${start}");return}if(!this.sourceUpdater_||!this.getMediaInfo_()){this.logger_("skipping remove because no source updater or starting media info");return}let s=1;const a=()=>{s--,s===0&&n()};(i||!this.audioDisabled_)&&(s++,this.sourceUpdater_.removeAudio(e,t,a)),(i||this.loaderType_==="main")&&(this.gopBuffer_=yfe(this.gopBuffer_,e,t,this.timeMapping_),s++,this.sourceUpdater_.removeVideo(e,t,a));for(const o in this.inbandTextTracks_)W0(e,t,this.inbandTextTracks_[o]);W0(e,t,this.segmentMetadataTrack_),a()}monitorBuffer_(){this.checkBufferTimeout_&&X.clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=X.setTimeout(this.monitorBufferTick_.bind(this),1)}monitorBufferTick_(){this.state==="READY"&&this.fillBuffer_(),this.checkBufferTimeout_&&X.clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=X.setTimeout(this.monitorBufferTick_.bind(this),bfe)}fillBuffer_(){if(this.sourceUpdater_.updating())return;const e=this.chooseNextRequest_();if(!e)return;const t={segmentInfo:Nh({type:this.loaderType_,segment:e})};this.trigger({type:"segmentselected",metadata:t}),typeof e.timestampOffset=="number"&&(this.isPendingTimestampOffset_=!1,this.timelineChangeController_.pendingTimelineChange({type:this.loaderType_,from:this.currentTimeline_,to:e.timeline})),this.loadSegment_(e)}isEndOfStream_(e=this.mediaIndex,t=this.playlist_,n=this.partIndex){if(!t||!this.mediaSource_)return!1;const i=typeof e=="number"&&t.segments[e],s=e+1===t.segments.length,a=!i||!i.parts||n+1===i.parts.length;return t.endList&&this.mediaSource_.readyState==="open"&&s&&a}chooseNextRequest_(){const e=this.buffered_(),t=MC(e)||0,n=vA(e,this.currentTime_()),i=!this.hasPlayed_()&&n>=1,s=n>=this.goalBufferLength_(),a=this.playlist_.segments;if(!a.length||i||s)return null;this.syncPoint_=this.syncPoint_||this.syncController_.getSyncPoint(this.playlist_,this.duration_(),this.currentTimeline_,this.currentTime_(),this.loaderType_);const o={partIndex:null,mediaIndex:null,startOfSegment:null,playlist:this.playlist_,isSyncRequest:!this.syncPoint_};if(o.isSyncRequest)o.mediaIndex=_fe(this.currentTimeline_,a,t),this.logger_(`choose next request. Can not find sync point. Fallback to media Index: ${o.mediaIndex}`);else if(this.mediaIndex!==null){const f=a[this.mediaIndex],g=typeof this.partIndex=="number"?this.partIndex:-1;o.startOfSegment=f.end?f.end:t,f.parts&&f.parts[g+1]?(o.mediaIndex=this.mediaIndex,o.partIndex=g+1):o.mediaIndex=this.mediaIndex+1}else{let f,g,v;const y=this.fetchAtBuffer_?t:this.currentTime_();if(this.mediaSequenceSync_&&this.logger_(`chooseNextRequest_ request after Quality Switch:
For TargetTime: ${y}.
CurrentTime: ${this.currentTime_()}
BufferedEnd: ${t}
Fetch At Buffer: ${this.fetchAtBuffer_}
`,this.mediaSequenceSync_.diagnostics),this.mediaSequenceSync_&&this.mediaSequenceSync_.isReliable){const _=this.getSyncInfoFromMediaSequenceSync_(y);if(!_){const C="No sync info found while using media sequence sync";return this.error({message:C,metadata:{errorType:Se.Error.StreamingFailedToSelectNextSegment,error:new Error(C)}}),this.logger_("chooseNextRequest_ - no sync info found using media sequence sync"),null}this.logger_(`chooseNextRequest_ mediaSequence syncInfo (${_.start} --> ${_.end})`),f=_.segmentIndex,g=_.partIndex,v=_.start}else{this.logger_("chooseNextRequest_ - fallback to a regular segment selection algorithm, based on a syncPoint.");const _=Oa.getMediaInfoForTime({exactManifestTimings:this.exactManifestTimings,playlist:this.playlist_,currentTime:y,startingPartIndex:this.syncPoint_.partIndex,startingSegmentIndex:this.syncPoint_.segmentIndex,startTime:this.syncPoint_.time});f=_.segmentIndex,g=_.partIndex,v=_.startTime}o.getMediaInfoForTime=this.fetchAtBuffer_?`bufferedEnd ${y}`:`currentTime ${y}`,o.mediaIndex=f,o.startOfSegment=v,o.partIndex=g,this.logger_(`choose next request. Playlist switched and we have a sync point. Media Index: ${o.mediaIndex} `)}const l=a[o.mediaIndex];let u=l&&typeof o.partIndex=="number"&&l.parts&&l.parts[o.partIndex];if(!l||typeof o.partIndex=="number"&&!u)return null;typeof o.partIndex!="number"&&l.parts&&(o.partIndex=0,u=l.parts[0]);const c=this.vhs_.playlists&&this.vhs_.playlists.main&&this.vhs_.playlists.main.independentSegments||this.playlist_.independentSegments;if(!n&&u&&!c&&!u.independent)if(o.partIndex===0){const f=a[o.mediaIndex-1],g=f.parts&&f.parts.length&&f.parts[f.parts.length-1];g&&g.independent&&(o.mediaIndex-=1,o.partIndex=f.parts.length-1,o.independent="previous segment")}else l.parts[o.partIndex-1].independent&&(o.partIndex-=1,o.independent="previous part");const h=this.mediaSource_&&this.mediaSource_.readyState==="ended";return o.mediaIndex>=a.length-1&&h&&!this.seeking_()?null:(this.shouldForceTimestampOffsetAfterResync_&&(this.shouldForceTimestampOffsetAfterResync_=!1,o.forceTimestampOffset=!0,this.logger_("choose next request. Force timestamp offset after loader resync")),this.generateSegmentInfo_(o))}getSyncInfoFromMediaSequenceSync_(e){if(!this.mediaSequenceSync_)return null;const t=Math.max(e,this.mediaSequenceSync_.start);e!==t&&this.logger_(`getSyncInfoFromMediaSequenceSync_. Pulled target time from ${e} to ${t}`);const n=this.mediaSequenceSync_.getSyncInfoForTime(t);if(!n)return null;if(!n.isAppended)return n;const i=this.mediaSequenceSync_.getSyncInfoForTime(n.end);return i?(i.isAppended&&this.logger_("getSyncInfoFromMediaSequenceSync_: We encounter unexpected scenario where next media sequence sync info is also appended!"),i):null}generateSegmentInfo_(e){const{independent:t,playlist:n,mediaIndex:i,startOfSegment:s,isSyncRequest:a,partIndex:o,forceTimestampOffset:l,getMediaInfoForTime:u}=e,c=n.segments[i],h=typeof o=="number"&&c.parts[o],f={requestId:"segment-loader-"+Math.random(),uri:h&&h.resolvedUri||c.resolvedUri,mediaIndex:i,partIndex:h?o:null,isSyncRequest:a,startOfSegment:s,playlist:n,bytes:null,encryptedBytes:null,timestampOffset:null,timeline:c.timeline,duration:h&&h.duration||c.duration,segment:c,part:h,byteLength:0,transmuxer:this.transmuxer_,getMediaInfoForTime:u,independent:t},g=typeof l<"u"?l:this.isPendingTimestampOffset_;f.timestampOffset=this.timestampOffsetForSegment_({segmentTimeline:c.timeline,currentTimeline:this.currentTimeline_,startOfSegment:s,buffered:this.buffered_(),overrideCheck:g});const v=MC(this.sourceUpdater_.audioBuffered());return typeof v=="number"&&(f.audioAppendStart=v-this.sourceUpdater_.audioTimestampOffset()),this.sourceUpdater_.videoBuffered().length&&(f.gopsToAlignWith=gfe(this.gopBuffer_,this.currentTime_()-this.sourceUpdater_.videoTimestampOffset(),this.timeMapping_)),f}timestampOffsetForSegment_(e){return Cfe(e)}earlyAbortWhenNeeded_(e){if(this.vhs_.tech_.paused()||!this.xhrOptions_.timeout||!this.playlist_.attributes.BANDWIDTH||Date.now()-(e.firstBytesReceivedAt||Date.now())<1e3)return;const t=this.currentTime_(),n=e.bandwidth,i=this.pendingSegment_.duration,s=Oa.estimateSegmentRequestTime(i,n,this.playlist_,e.bytesReceived),a=Gde(this.buffered_(),t,this.vhs_.tech_.playbackRate())-1;if(s<=a)return;const o=sfe({main:this.vhs_.playlists.main,currentTime:t,bandwidth:n,duration:this.duration_(),segmentDuration:i,timeUntilRebuffer:a,currentTimeline:this.currentTimeline_,syncController:this.syncController_});if(!o)return;const u=s-a-o.rebufferingImpact;let c=.5;a<=_u&&(c=1),!(!o.playlist||o.playlist.uri===this.playlist_.uri||u<c)&&(this.bandwidth=o.playlist.attributes.BANDWIDTH*Ji.BANDWIDTH_VARIANCE+1,this.trigger("earlyabort"))}handleAbort_(e){this.logger_(`Aborting ${Yf(e)}`),this.mediaRequestsAborted+=1}handleProgress_(e,t){this.earlyAbortWhenNeeded_(t.stats),!this.checkForAbort_(t.requestId)&&this.trigger("progress")}handleTrackInfo_(e,t){const{hasAudio:n,hasVideo:i}=t,s={segmentInfo:Nh({type:this.loaderType_,segment:e}),trackInfo:{hasAudio:n,hasVideo:i}};this.trigger({type:"segmenttransmuxingtrackinfoavailable",metadata:s}),this.earlyAbortWhenNeeded_(e.stats),!this.checkForAbort_(e.requestId)&&(this.checkForIllegalMediaSwitch(t)||(t=t||{},xfe(this.currentMediaInfo_,t)||(this.appendInitSegment_={audio:!0,video:!0},this.startingMediaInfo_=t,this.currentMediaInfo_=t,this.logger_("trackinfo update",t),this.trigger("trackinfo")),!this.checkForAbort_(e.requestId)&&(this.pendingSegment_.trackInfo=t,this.hasEnoughInfoToAppend_()?this.processCallQueue_():bd(this))))}handleTimingInfo_(e,t,n,i){if(this.earlyAbortWhenNeeded_(e.stats),this.checkForAbort_(e.requestId))return;const s=this.pendingSegment_,a=kM(t);s[a]=s[a]||{},s[a][n]=i,this.logger_(`timinginfo: ${t} - ${n} - ${i}`),this.hasEnoughInfoToAppend_()?this.processCallQueue_():bd(this)}handleCaptions_(e,t){if(this.earlyAbortWhenNeeded_(e.stats),this.checkForAbort_(e.requestId))return;if(t.length===0){this.logger_("SegmentLoader received no captions from a caption event");return}if(!this.pendingSegment_.hasAppendedData_){this.metadataQueue_.caption.push(this.handleCaptions_.bind(this,e,t));return}const i=this.sourceUpdater_.videoTimestampOffset()===null?this.sourceUpdater_.audioTimestampOffset():this.sourceUpdater_.videoTimestampOffset(),s={};t.forEach(a=>{s[a.stream]=s[a.stream]||{startTime:1/0,captions:[],endTime:0};const o=s[a.stream];o.startTime=Math.min(o.startTime,a.startTime+i),o.endTime=Math.max(o.endTime,a.endTime+i),o.captions.push(a)}),Object.keys(s).forEach(a=>{const{startTime:o,endTime:l,captions:u}=s[a],c=this.inbandTextTracks_;this.logger_(`adding cues from ${o} -> ${l} for ${a}`),lfe(c,this.vhs_.tech_,a),W0(o,l,c[a]),ufe({captionArray:u,inbandTextTracks:c,timestampOffset:i})}),this.transmuxer_&&this.transmuxer_.postMessage({action:"clearParsedMp4Captions"})}handleId3_(e,t,n){if(this.earlyAbortWhenNeeded_(e.stats),this.checkForAbort_(e.requestId))return;if(!this.pendingSegment_.hasAppendedData_){this.metadataQueue_.id3.push(this.handleId3_.bind(this,e,t,n));return}this.addMetadataToTextTrack(n,t,this.duration_())}processMetadataQueue_(){this.metadataQueue_.id3.forEach(e=>e()),this.metadataQueue_.caption.forEach(e=>e()),this.metadataQueue_.id3=[],this.metadataQueue_.caption=[]}processCallQueue_(){const e=this.callQueue_;this.callQueue_=[],e.forEach(t=>t())}processLoadQueue_(){const e=this.loadQueue_;this.loadQueue_=[],e.forEach(t=>t())}hasEnoughInfoToLoad_(){if(this.loaderType_!=="audio")return!0;const e=this.pendingSegment_;return e?this.getCurrentMediaInfo_()?!F2({timelineChangeController:this.timelineChangeController_,currentTimeline:this.currentTimeline_,segmentTimeline:e.timeline,loaderType:this.loaderType_,audioDisabled:this.audioDisabled_}):!0:!1}getCurrentMediaInfo_(e=this.pendingSegment_){return e&&e.trackInfo||this.currentMediaInfo_}getMediaInfo_(e=this.pendingSegment_){return this.getCurrentMediaInfo_(e)||this.startingMediaInfo_}getPendingSegmentPlaylist(){return this.pendingSegment_?this.pendingSegment_.playlist:null}hasEnoughInfoToAppend_(){if(!this.sourceUpdater_.ready()||this.waitingOnRemove_||this.quotaExceededErrorRetryTimeout_)return!1;const e=this.pendingSegment_,t=this.getCurrentMediaInfo_();if(!e||!t)return!1;const{hasAudio:n,hasVideo:i,isMuxed:s}=t;return!(i&&!e.videoTimingInfo||n&&!this.audioDisabled_&&!s&&!e.audioTimingInfo||F2({timelineChangeController:this.timelineChangeController_,currentTimeline:this.currentTimeline_,segmentTimeline:e.timeline,loaderType:this.loaderType_,audioDisabled:this.audioDisabled_}))}handleData_(e,t){if(this.earlyAbortWhenNeeded_(e.stats),this.checkForAbort_(e.requestId))return;if(this.callQueue_.length||!this.hasEnoughInfoToAppend_()){bd(this),this.callQueue_.push(this.handleData_.bind(this,e,t));return}const n=this.pendingSegment_;if(this.setTimeMapping_(n.timeline),this.updateMediaSecondsLoaded_(n.part||n.segment),this.mediaSource_.readyState!=="closed"){if(e.map&&(e.map=this.initSegmentForMap(e.map,!0),n.segment.map=e.map),e.key&&this.segmentKey(e.key,!0),n.isFmp4=e.isFmp4,n.timingInfo=n.timingInfo||{},n.isFmp4)this.trigger("fmp4"),n.timingInfo.start=n[kM(t.type)].start;else{const i=this.getCurrentMediaInfo_(),s=this.loaderType_==="main"&&i&&i.hasVideo;let a;s&&(a=n.videoTimingInfo.start),n.timingInfo.start=this.trueSegmentStart_({currentStart:n.timingInfo.start,playlist:n.playlist,mediaIndex:n.mediaIndex,currentVideoTimestampOffset:this.sourceUpdater_.videoTimestampOffset(),useVideoTimingInfo:s,firstVideoFrameTimeForData:a,videoTimingInfo:n.videoTimingInfo,audioTimingInfo:n.audioTimingInfo})}if(this.updateAppendInitSegmentStatus(n,t.type),this.updateSourceBufferTimestampOffset_(n),n.isSyncRequest){this.updateTimingInfoEnd_(n),this.syncController_.saveSegmentTimingInfo({segmentInfo:n,shouldSaveTimelineMapping:this.loaderType_==="main"});const i=this.chooseNextRequest_();if(i.mediaIndex!==n.mediaIndex||i.partIndex!==n.partIndex){this.logger_("sync segment was incorrect, not appending");return}this.logger_("sync segment was correct, appending")}n.hasAppendedData_=!0,this.processMetadataQueue_(),this.appendData_(n,t)}}updateAppendInitSegmentStatus(e,t){this.loaderType_==="main"&&typeof e.timestampOffset=="number"&&!e.changedTimestampOffset&&(this.appendInitSegment_={audio:!0,video:!0}),this.playlistOfLastInitSegment_[t]!==e.playlist&&(this.appendInitSegment_[t]=!0)}getInitSegmentAndUpdateState_({type:e,initSegment:t,map:n,playlist:i}){if(n){const s=ab(n);if(this.activeInitSegmentId_===s)return null;t=this.initSegmentForMap(n,!0).bytes,this.activeInitSegmentId_=s}return t&&this.appendInitSegment_[e]?(this.playlistOfLastInitSegment_[e]=i,this.appendInitSegment_[e]=!1,this.activeInitSegmentId_=null,t):null}handleQuotaExceededError_({segmentInfo:e,type:t,bytes:n},i){const s=this.sourceUpdater_.audioBuffered(),a=this.sourceUpdater_.videoBuffered();s.length>1&&this.logger_("On QUOTA_EXCEEDED_ERR, found gaps in the audio buffer: "+Vh(s).join(", ")),a.length>1&&this.logger_("On QUOTA_EXCEEDED_ERR, found gaps in the video buffer: "+Vh(a).join(", "));const o=s.length?s.start(0):0,l=s.length?s.end(s.length-1):0,u=a.length?a.start(0):0,c=a.length?a.end(a.length-1):0;if(l-o<=R0&&c-u<=R0){this.logger_(`On QUOTA_EXCEEDED_ERR, single segment too large to append to buffer, triggering an error. Appended byte length: ${n.byteLength}, audio buffer: ${Vh(s).join(", ")}, video buffer: ${Vh(a).join(", ")}, `),this.error({message:"Quota exceeded error with append of a single segment of content",excludeUntil:1/0}),this.trigger("error");return}this.waitingOnRemove_=!0,this.callQueue_.push(this.appendToSourceBuffer_.bind(this,{segmentInfo:e,type:t,bytes:n}));const f=this.currentTime_()-R0;this.logger_(`On QUOTA_EXCEEDED_ERR, removing audio/video from 0 to ${f}`),this.remove(0,f,()=>{this.logger_(`On QUOTA_EXCEEDED_ERR, retrying append in ${R0}s`),this.waitingOnRemove_=!1,this.quotaExceededErrorRetryTimeout_=X.setTimeout(()=>{this.logger_("On QUOTA_EXCEEDED_ERR, re-processing call queue"),this.quotaExceededErrorRetryTimeout_=null,this.processCallQueue_()},R0*1e3)},!0)}handleAppendError_({segmentInfo:e,type:t,bytes:n},i){if(i){if(i.code===kU){this.handleQuotaExceededError_({segmentInfo:e,type:t,bytes:n});return}this.logger_("Received non QUOTA_EXCEEDED_ERR on append",i),this.error({message:`${t} append of ${n.length}b failed for segment #${e.mediaIndex} in playlist ${e.playlist.id}`,metadata:{errorType:Se.Error.StreamingFailedToAppendSegment}}),this.trigger("appenderror")}}appendToSourceBuffer_({segmentInfo:e,type:t,initSegment:n,data:i,bytes:s}){if(!s){const o=[i];let l=i.byteLength;n&&(o.unshift(n),l+=n.byteLength),s=ofe({bytes:l,segments:o})}const a={segmentInfo:Nh({type:this.loaderType_,segment:e})};this.trigger({type:"segmentappendstart",metadata:a}),this.sourceUpdater_.appendBuffer({segmentInfo:e,type:t,bytes:s},this.handleAppendError_.bind(this,{segmentInfo:e,type:t,bytes:s}))}handleSegmentTimingInfo_(e,t,n){if(!this.pendingSegment_||t!==this.pendingSegment_.requestId)return;const i=this.pendingSegment_.segment,s=`${e}TimingInfo`;i[s]||(i[s]={}),i[s].transmuxerPrependedSeconds=n.prependedContentDuration||0,i[s].transmuxedPresentationStart=n.start.presentation,i[s].transmuxedDecodeStart=n.start.decode,i[s].transmuxedPresentationEnd=n.end.presentation,i[s].transmuxedDecodeEnd=n.end.decode,i[s].baseMediaDecodeTime=n.baseMediaDecodeTime}appendData_(e,t){const{type:n,data:i}=t;if(!i||!i.byteLength||n==="audio"&&this.audioDisabled_)return;const s=this.getInitSegmentAndUpdateState_({type:n,initSegment:t.initSegment,playlist:e.playlist,map:e.isFmp4?e.segment.map:null});this.appendToSourceBuffer_({segmentInfo:e,type:n,initSegment:s,data:i})}loadSegment_(e){if(this.state="WAITING",this.pendingSegment_=e,this.trimBackBuffer_(e),typeof e.timestampOffset=="number"&&this.transmuxer_&&this.transmuxer_.postMessage({action:"clearAllMp4Captions"}),!this.hasEnoughInfoToLoad_()){bd(this),this.loadQueue_.push(()=>{const t=sr({},e,{forceTimestampOffset:!0});sr(e,this.generateSegmentInfo_(t)),this.isPendingTimestampOffset_=!1,this.updateTransmuxerAndRequestSegment_(e)});return}this.updateTransmuxerAndRequestSegment_(e)}updateTransmuxerAndRequestSegment_(e){this.shouldUpdateTransmuxerTimestampOffset_(e.timestampOffset)&&(this.gopBuffer_.length=0,e.gopsToAlignWith=[],this.timeMapping_=0,this.transmuxer_.postMessage({action:"reset"}),this.transmuxer_.postMessage({action:"setTimestampOffset",timestampOffset:e.timestampOffset}));const t=this.createSimplifiedSegmentObj_(e),n=this.isEndOfStream_(e.mediaIndex,e.playlist,e.partIndex),i=this.mediaIndex!==null,s=e.timeline!==this.currentTimeline_&&e.timeline>0,a=n||i&&s;this.logger_(`Requesting
${YU(e.uri)}
${Yf(e)}`),t.map&&!t.map.bytes&&(this.logger_("going to request init segment."),this.appendInitSegment_={video:!0,audio:!0}),e.abortRequests=Zhe({xhr:this.vhs_.xhr,xhrOptions:this.xhrOptions_,decryptionWorker:this.decrypter_,segment:t,abortFn:this.handleAbort_.bind(this,e),progressFn:this.handleProgress_.bind(this),trackInfoFn:this.handleTrackInfo_.bind(this),timingInfoFn:this.handleTimingInfo_.bind(this),videoSegmentTimingInfoFn:this.handleSegmentTimingInfo_.bind(this,"video",e.requestId),audioSegmentTimingInfoFn:this.handleSegmentTimingInfo_.bind(this,"audio",e.requestId),captionsFn:this.handleCaptions_.bind(this),isEndOfTimeline:a,endedTimelineFn:()=>{this.logger_("received endedtimeline callback")},id3Fn:this.handleId3_.bind(this),dataFn:this.handleData_.bind(this),doneFn:this.segmentRequestFinished_.bind(this),onTransmuxerLog:({message:o,level:l,stream:u})=>{this.logger_(`${Yf(e)} logged from transmuxer stream ${u} as a ${l}: ${o}`)},triggerSegmentEventFn:({type:o,segment:l,keyInfo:u,trackInfo:c,timingInfo:h})=>{const g={segmentInfo:Nh({segment:l})};u&&(g.keyInfo=u),c&&(g.trackInfo=c),h&&(g.timingInfo=h),this.trigger({type:o,metadata:g})}})}trimBackBuffer_(e){const t=Tfe(this.seekable_(),this.currentTime_(),this.playlist_.targetDuration||10);t>0&&this.remove(0,t)}createSimplifiedSegmentObj_(e){const t=e.segment,n=e.part,i=e.segment.key||e.segment.map&&e.segment.map.key,s=e.segment.map&&!e.segment.map.bytes,a={resolvedUri:n?n.resolvedUri:t.resolvedUri,byterange:n?n.byterange:t.byterange,requestId:e.requestId,transmuxer:e.transmuxer,audioAppendStart:e.audioAppendStart,gopsToAlignWith:e.gopsToAlignWith,part:e.part,type:this.loaderType_,start:e.startOfSegment,duration:e.duration,isEncrypted:i,isMediaInitialization:s},o=e.playlist.segments[e.mediaIndex-1];if(o&&o.timeline===t.timeline&&(o.videoTimingInfo?a.baseStartTime=o.videoTimingInfo.transmuxedDecodeEnd:o.audioTimingInfo&&(a.baseStartTime=o.audioTimingInfo.transmuxedDecodeEnd)),t.key){const l=t.key.iv||new Uint32Array([0,0,0,e.mediaIndex+e.playlist.mediaSequence]);a.key=this.segmentKey(t.key),a.key.iv=l}return t.map&&(a.map=this.initSegmentForMap(t.map)),a}saveTransferStats_(e){this.mediaRequests+=1,e&&(this.mediaBytesTransferred+=e.bytesReceived,this.mediaTransferDuration+=e.roundTripTime)}saveBandwidthRelatedStats_(e,t){if(this.pendingSegment_.byteLength=t.bytesReceived,e<Wy){this.logger_(`Ignoring segment's bandwidth because its duration of ${e} is less than the min to record ${Wy}`);return}const n={bandwidthInfo:{from:this.bandwidth,to:t.bandwidth}};this.trigger({type:"bandwidthupdated",metadata:n}),this.bandwidth=t.bandwidth,this.roundTrip=t.roundTripTime}handleTimeout_(){this.mediaRequestsTimedout+=1,this.bandwidth=1,this.roundTrip=NaN,this.trigger("bandwidthupdate"),this.trigger("timeout")}segmentRequestFinished_(e,t,n){if(this.callQueue_.length){this.callQueue_.push(this.segmentRequestFinished_.bind(this,e,t,n));return}if(this.saveTransferStats_(t.stats),!this.pendingSegment_||t.requestId!==this.pendingSegment_.requestId)return;if(e){if(this.pendingSegment_=null,this.state="READY",e.code===Su.ABORTED)return;if(this.pause(),e.code===Su.TIMEOUT){this.handleTimeout_();return}this.mediaRequestsErrored+=1,this.error(e),this.trigger("error");return}const i=this.pendingSegment_;this.saveBandwidthRelatedStats_(i.duration,t.stats),i.endOfAllRequests=t.endOfAllRequests,n.gopInfo&&(this.gopBuffer_=vfe(this.gopBuffer_,n.gopInfo,this.safeAppend_)),this.state="APPENDING",this.trigger("appending"),this.waitForAppendsToComplete_(i)}setTimeMapping_(e){const t=this.syncController_.mappingForTimeline(e);t!==null&&(this.timeMapping_=t)}updateMediaSecondsLoaded_(e){typeof e.start=="number"&&typeof e.end=="number"?this.mediaSecondsLoaded+=e.end-e.start:this.mediaSecondsLoaded+=e.duration}shouldUpdateTransmuxerTimestampOffset_(e){return e===null?!1:this.loaderType_==="main"&&e!==this.sourceUpdater_.videoTimestampOffset()||!this.audioDisabled_&&e!==this.sourceUpdater_.audioTimestampOffset()}trueSegmentStart_({currentStart:e,playlist:t,mediaIndex:n,firstVideoFrameTimeForData:i,currentVideoTimestampOffset:s,useVideoTimingInfo:a,videoTimingInfo:o,audioTimingInfo:l}){if(typeof e<"u")return e;if(!a)return l.start;const u=t.segments[n-1];return n===0||!u||typeof u.start>"u"||u.end!==i+s?i:o.start}waitForAppendsToComplete_(e){const t=this.getCurrentMediaInfo_(e);if(!t){this.error({message:"No starting media returned, likely due to an unsupported media format.",playlistExclusionDuration:1/0}),this.trigger("error");return}const{hasAudio:n,hasVideo:i,isMuxed:s}=t,a=this.loaderType_==="main"&&i,o=!this.audioDisabled_&&n&&!s;if(e.waitingOnAppends=0,!e.hasAppendedData_){!e.timingInfo&&typeof e.timestampOffset=="number"&&(this.isPendingTimestampOffset_=!0),e.timingInfo={start:0},e.waitingOnAppends++,this.isPendingTimestampOffset_||(this.updateSourceBufferTimestampOffset_(e),this.processMetadataQueue_()),this.checkAppendsDone_(e);return}a&&e.waitingOnAppends++,o&&e.waitingOnAppends++,a&&this.sourceUpdater_.videoQueueCallback(this.checkAppendsDone_.bind(this,e)),o&&this.sourceUpdater_.audioQueueCallback(this.checkAppendsDone_.bind(this,e))}checkAppendsDone_(e){this.checkForAbort_(e.requestId)||(e.waitingOnAppends--,e.waitingOnAppends===0&&this.handleAppendsDone_())}checkForIllegalMediaSwitch(e){const t=Sfe(this.loaderType_,this.getCurrentMediaInfo_(),e);return t?(this.error({message:t,playlistExclusionDuration:1/0}),this.trigger("error"),!0):!1}updateSourceBufferTimestampOffset_(e){if(e.timestampOffset===null||typeof e.timingInfo.start!="number"||e.changedTimestampOffset||this.loaderType_!=="main")return;let t=!1;e.timestampOffset-=this.getSegmentStartTimeForTimestampOffsetCalculation_({videoTimingInfo:e.segment.videoTimingInfo,audioTimingInfo:e.segment.audioTimingInfo,timingInfo:e.timingInfo}),e.changedTimestampOffset=!0,e.timestampOffset!==this.sourceUpdater_.videoTimestampOffset()&&(this.sourceUpdater_.videoTimestampOffset(e.timestampOffset),t=!0),e.timestampOffset!==this.sourceUpdater_.audioTimestampOffset()&&(this.sourceUpdater_.audioTimestampOffset(e.timestampOffset),t=!0),t&&this.trigger("timestampoffset")}getSegmentStartTimeForTimestampOffsetCalculation_({videoTimingInfo:e,audioTimingInfo:t,timingInfo:n}){return this.useDtsForTimestampOffset_?e&&typeof e.transmuxedDecodeStart=="number"?e.transmuxedDecodeStart:t&&typeof t.transmuxedDecodeStart=="number"?t.transmuxedDecodeStart:n.start:n.start}updateTimingInfoEnd_(e){e.timingInfo=e.timingInfo||{};const t=this.getMediaInfo_(),i=this.loaderType_==="main"&&t&&t.hasVideo&&e.videoTimingInfo?e.videoTimingInfo:e.audioTimingInfo;i&&(e.timingInfo.end=typeof i.end=="number"?i.end:i.start+e.duration)}handleAppendsDone_(){if(this.pendingSegment_){const l={segmentInfo:Nh({type:this.loaderType_,segment:this.pendingSegment_})};this.trigger({type:"appendsdone",metadata:l})}if(!this.pendingSegment_){this.state="READY",this.paused()||this.monitorBuffer_();return}const e=this.pendingSegment_;e.part&&e.part.syncInfo?e.part.syncInfo.markAppended():e.segment.syncInfo&&e.segment.syncInfo.markAppended(),this.updateTimingInfoEnd_(e),this.shouldSaveSegmentTimingInfo_&&this.syncController_.saveSegmentTimingInfo({segmentInfo:e,shouldSaveTimelineMapping:this.loaderType_==="main"});const t=Dfe(e,this.sourceType_);if(t&&(t.severity==="warn"?Se.log.warn(t.message):this.logger_(t.message)),this.recordThroughput_(e),this.pendingSegment_=null,this.state="READY",e.isSyncRequest&&(this.trigger("syncinfoupdate"),!e.hasAppendedData_)){this.logger_(`Throwing away un-appended sync request ${Yf(e)}`);return}this.logger_(`Appended ${Yf(e)}`),this.addSegmentMetadataCue_(e),this.fetchAtBuffer_=!0,this.currentTimeline_!==e.timeline&&(this.timelineChangeController_.lastTimelineChange({type:this.loaderType_,from:this.currentTimeline_,to:e.timeline}),this.loaderType_==="main"&&!this.audioDisabled_&&this.timelineChangeController_.lastTimelineChange({type:"audio",from:this.currentTimeline_,to:e.timeline})),this.currentTimeline_=e.timeline,this.trigger("syncinfoupdate");const n=e.segment,i=e.part,s=n.end&&this.currentTime_()-n.end>e.playlist.targetDuration*3,a=i&&i.end&&this.currentTime_()-i.end>e.playlist.partTargetDuration*3;if(s||a){this.logger_(`bad ${s?"segment":"part"} ${Yf(e)}`),this.resetEverything();return}this.mediaIndex!==null&&this.trigger("bandwidthupdate"),this.trigger("progress"),this.mediaIndex=e.mediaIndex,this.partIndex=e.partIndex,this.isEndOfStream_(e.mediaIndex,e.playlist,e.partIndex)&&this.endOfStream(),this.trigger("appended"),e.hasAppendedData_&&this.mediaAppends++,this.paused()||this.monitorBuffer_()}recordThroughput_(e){if(e.duration<Wy){this.logger_(`Ignoring segment's throughput because its duration of ${e.duration} is less than the min to record ${Wy}`);return}const t=this.throughput.rate,n=Date.now()-e.endOfAllRequests+1,i=Math.floor(e.byteLength/n*8*1e3);this.throughput.rate+=(i-t)/++this.throughput.count}addSegmentMetadataCue_(e){if(!this.segmentMetadataTrack_)return;const t=e.segment,n=t.start,i=t.end;if(!EM(n)||!EM(i))return;W0(n,i,this.segmentMetadataTrack_);const s=X.WebKitDataCue||X.VTTCue,a={custom:t.custom,dateTimeObject:t.dateTimeObject,dateTimeString:t.dateTimeString,programDateTime:t.programDateTime,bandwidth:e.playlist.attributes.BANDWIDTH,resolution:e.playlist.attributes.RESOLUTION,codecs:e.playlist.attributes.CODECS,byteLength:e.byteLength,uri:e.uri,timeline:e.timeline,playlist:e.playlist.id,start:n,end:i},o=JSON.stringify(a),l=new s(n,i,o);l.value=a,this.segmentMetadataTrack_.addCue(l)}};function Ec(){}const QU=function(r){return typeof r!="string"?r:r.replace(/./,e=>e.toUpperCase())},Ife=["video","audio"],N2=(r,e)=>{const t=e[`${r}Buffer`];return t&&t.updating||e.queuePending[r]},Pfe=(r,e)=>{for(let t=0;t<e.length;t++){const n=e[t];if(n.type==="mediaSource")return null;if(n.type===r)return t}return null},Lp=(r,e)=>{if(e.queue.length===0)return;let t=0,n=e.queue[t];if(n.type==="mediaSource"){!e.updating()&&e.mediaSource.readyState!=="closed"&&(e.queue.shift(),n.action(e),n.doneFn&&n.doneFn(),Lp("audio",e),Lp("video",e));return}if(r!=="mediaSource"&&!(!e.ready()||e.mediaSource.readyState==="closed"||N2(r,e))){if(n.type!==r){if(t=Pfe(r,e.queue),t===null)return;n=e.queue[t]}if(e.queue.splice(t,1),e.queuePending[r]=n,n.action(r,e),!n.doneFn){e.queuePending[r]=null,Lp(r,e);return}}},JU=(r,e)=>{const t=e[`${r}Buffer`],n=QU(r);t&&(t.removeEventListener("updateend",e[`on${n}UpdateEnd_`]),t.removeEventListener("error",e[`on${n}Error_`]),e.codecs[r]=null,e[`${r}Buffer`]=null)},mu=(r,e)=>r&&e&&Array.prototype.indexOf.call(r.sourceBuffers,e)!==-1,io={appendBuffer:(r,e,t)=>(n,i)=>{const s=i[`${n}Buffer`];if(mu(i.mediaSource,s)){i.logger_(`Appending segment ${e.mediaIndex}'s ${r.length} bytes to ${n}Buffer`);try{s.appendBuffer(r)}catch(a){i.logger_(`Error with code ${a.code} `+(a.code===kU?"(QUOTA_EXCEEDED_ERR) ":"")+`when appending segment ${e.mediaIndex} to ${n}Buffer`),i.queuePending[n]=null,t(a)}}},remove:(r,e)=>(t,n)=>{const i=n[`${t}Buffer`];if(mu(n.mediaSource,i)){n.logger_(`Removing ${r} to ${e} from ${t}Buffer`);try{i.remove(r,e)}catch{n.logger_(`Remove ${r} to ${e} from ${t}Buffer failed`)}}},timestampOffset:r=>(e,t)=>{const n=t[`${e}Buffer`];mu(t.mediaSource,n)&&(t.logger_(`Setting ${e}timestampOffset to ${r}`),n.timestampOffset=r)},callback:r=>(e,t)=>{r()},endOfStream:r=>e=>{if(e.mediaSource.readyState==="open"){e.logger_(`Calling mediaSource endOfStream(${r||""})`);try{e.mediaSource.endOfStream(r)}catch(t){Se.log.warn("Failed to call media source endOfStream",t)}}},duration:r=>e=>{e.logger_(`Setting mediaSource duration to ${r}`);try{e.mediaSource.duration=r}catch(t){Se.log.warn("Failed to set media source duration",t)}},abort:()=>(r,e)=>{if(e.mediaSource.readyState!=="open")return;const t=e[`${r}Buffer`];if(mu(e.mediaSource,t)){e.logger_(`calling abort on ${r}Buffer`);try{t.abort()}catch(n){Se.log.warn(`Failed to abort on ${r}Buffer`,n)}}},addSourceBuffer:(r,e)=>t=>{const n=QU(r),i=Nu(e);t.logger_(`Adding ${r}Buffer with codec ${e} to mediaSource`);const s=t.mediaSource.addSourceBuffer(i);s.addEventListener("updateend",t[`on${n}UpdateEnd_`]),s.addEventListener("error",t[`on${n}Error_`]),t.codecs[r]=e,t[`${r}Buffer`]=s},removeSourceBuffer:r=>e=>{const t=e[`${r}Buffer`];if(JU(r,e),!!mu(e.mediaSource,t)){e.logger_(`Removing ${r}Buffer with codec ${e.codecs[r]} from mediaSource`);try{e.mediaSource.removeSourceBuffer(t)}catch(n){Se.log.warn(`Failed to removeSourceBuffer ${r}Buffer`,n)}}},changeType:r=>(e,t)=>{const n=t[`${e}Buffer`],i=Nu(r);if(!mu(t.mediaSource,n))return;const s=r.substring(0,r.indexOf(".")),a=t.codecs[e];if(a.substring(0,a.indexOf("."))===s)return;const l={codecsChangeInfo:{from:a,to:r}};t.trigger({type:"codecschange",metadata:l}),t.logger_(`changing ${e}Buffer codec from ${a} to ${r}`);try{n.changeType(i),t.codecs[e]=r}catch(u){l.errorType=Se.Error.StreamingCodecsChangeError,l.error=u,u.metadata=l,t.error_=u,t.trigger("error"),Se.log.warn(`Failed to changeType on ${e}Buffer`,u)}}},so=({type:r,sourceUpdater:e,action:t,doneFn:n,name:i})=>{e.queue.push({type:r,action:t,doneFn:n,name:i}),Lp(r,e)},DM=(r,e)=>t=>{const n=e[`${r}Buffered`](),i=Vde(n);if(e.logger_(`received "updateend" event for ${r} Source Buffer: `,i),e.queuePending[r]){const s=e.queuePending[r].doneFn;e.queuePending[r]=null,s&&s(e[`${r}Error_`])}Lp(r,e)};let ZU=class extends Se.EventTarget{constructor(e){super(),this.mediaSource=e,this.sourceopenListener_=()=>Lp("mediaSource",this),this.mediaSource.addEventListener("sourceopen",this.sourceopenListener_),this.logger_=ul("SourceUpdater"),this.audioTimestampOffset_=0,this.videoTimestampOffset_=0,this.queue=[],this.queuePending={audio:null,video:null},this.delayedAudioAppendQueue_=[],this.videoAppendQueued_=!1,this.codecs={},this.onVideoUpdateEnd_=DM("video",this),this.onAudioUpdateEnd_=DM("audio",this),this.onVideoError_=t=>{this.videoError_=t},this.onAudioError_=t=>{this.audioError_=t},this.createdSourceBuffers_=!1,this.initializedEme_=!1,this.triggeredReady_=!1}initializedEme(){this.initializedEme_=!0,this.triggerReady()}hasCreatedSourceBuffers(){return this.createdSourceBuffers_}hasInitializedAnyEme(){return this.initializedEme_}ready(){return this.hasCreatedSourceBuffers()&&this.hasInitializedAnyEme()}createSourceBuffers(e){this.hasCreatedSourceBuffers()||(this.addOrChangeSourceBuffers(e),this.createdSourceBuffers_=!0,this.trigger("createdsourcebuffers"),this.triggerReady())}triggerReady(){this.ready()&&!this.triggeredReady_&&(this.triggeredReady_=!0,this.trigger("ready"))}addSourceBuffer(e,t){so({type:"mediaSource",sourceUpdater:this,action:io.addSourceBuffer(e,t),name:"addSourceBuffer"})}abort(e){so({type:e,sourceUpdater:this,action:io.abort(e),name:"abort"})}removeSourceBuffer(e){if(!this.canRemoveSourceBuffer()){Se.log.error("removeSourceBuffer is not supported!");return}so({type:"mediaSource",sourceUpdater:this,action:io.removeSourceBuffer(e),name:"removeSourceBuffer"})}canRemoveSourceBuffer(){return!Se.browser.IS_FIREFOX&&X.MediaSource&&X.MediaSource.prototype&&typeof X.MediaSource.prototype.removeSourceBuffer=="function"}static canChangeType(){return X.SourceBuffer&&X.SourceBuffer.prototype&&typeof X.SourceBuffer.prototype.changeType=="function"}canChangeType(){return this.constructor.canChangeType()}changeType(e,t){if(!this.canChangeType()){Se.log.error("changeType is not supported!");return}so({type:e,sourceUpdater:this,action:io.changeType(t),name:"changeType"})}addOrChangeSourceBuffers(e){if(!e||typeof e!="object"||Object.keys(e).length===0)throw new Error("Cannot addOrChangeSourceBuffers to undefined codecs");Object.keys(e).forEach(t=>{const n=e[t];if(!this.hasCreatedSourceBuffers())return this.addSourceBuffer(t,n);this.canChangeType()&&this.changeType(t,n)})}appendBuffer(e,t){const{segmentInfo:n,type:i,bytes:s}=e;if(this.processedAppend_=!0,i==="audio"&&this.videoBuffer&&!this.videoAppendQueued_){this.delayedAudioAppendQueue_.push([e,t]),this.logger_(`delayed audio append of ${s.length} until video append`);return}const a=t;if(so({type:i,sourceUpdater:this,action:io.appendBuffer(s,n||{mediaIndex:-1},a),doneFn:t,name:"appendBuffer"}),i==="video"){if(this.videoAppendQueued_=!0,!this.delayedAudioAppendQueue_.length)return;const o=this.delayedAudioAppendQueue_.slice();this.logger_(`queuing delayed audio ${o.length} appendBuffers`),this.delayedAudioAppendQueue_.length=0,o.forEach(l=>{this.appendBuffer.apply(this,l)})}}audioBuffered(){return mu(this.mediaSource,this.audioBuffer)&&this.audioBuffer.buffered?this.audioBuffer.buffered:xs()}videoBuffered(){return mu(this.mediaSource,this.videoBuffer)&&this.videoBuffer.buffered?this.videoBuffer.buffered:xs()}buffered(){const e=mu(this.mediaSource,this.videoBuffer)?this.videoBuffer:null,t=mu(this.mediaSource,this.audioBuffer)?this.audioBuffer:null;return t&&!e?this.audioBuffered():e&&!t?this.videoBuffered():qde(this.audioBuffered(),this.videoBuffered())}setDuration(e,t=Ec){so({type:"mediaSource",sourceUpdater:this,action:io.duration(e),name:"duration",doneFn:t})}endOfStream(e=null,t=Ec){typeof e!="string"&&(e=void 0),so({type:"mediaSource",sourceUpdater:this,action:io.endOfStream(e),name:"endOfStream",doneFn:t})}removeAudio(e,t,n=Ec){if(!this.audioBuffered().length||this.audioBuffered().end(0)===0){n();return}so({type:"audio",sourceUpdater:this,action:io.remove(e,t),doneFn:n,name:"remove"})}removeVideo(e,t,n=Ec){if(!this.videoBuffered().length||this.videoBuffered().end(0)===0){n();return}so({type:"video",sourceUpdater:this,action:io.remove(e,t),doneFn:n,name:"remove"})}updating(){return!!(N2("audio",this)||N2("video",this))}audioTimestampOffset(e){return typeof e<"u"&&this.audioBuffer&&this.audioTimestampOffset_!==e&&(so({type:"audio",sourceUpdater:this,action:io.timestampOffset(e),name:"timestampOffset"}),this.audioTimestampOffset_=e),this.audioTimestampOffset_}videoTimestampOffset(e){return typeof e<"u"&&this.videoBuffer&&this.videoTimestampOffset_!==e&&(so({type:"video",sourceUpdater:this,action:io.timestampOffset(e),name:"timestampOffset"}),this.videoTimestampOffset_=e),this.videoTimestampOffset_}audioQueueCallback(e){this.audioBuffer&&so({type:"audio",sourceUpdater:this,action:io.callback(e),name:"callback"})}videoQueueCallback(e){this.videoBuffer&&so({type:"video",sourceUpdater:this,action:io.callback(e),name:"callback"})}dispose(){this.trigger("dispose"),Ife.forEach(e=>{this.abort(e),this.canRemoveSourceBuffer()?this.removeSourceBuffer(e):this[`${e}QueueCallback`](()=>JU(e,this))}),this.videoAppendQueued_=!1,this.delayedAudioAppendQueue_.length=0,this.sourceopenListener_&&this.mediaSource.removeEventListener("sourceopen",this.sourceopenListener_),this.off()}};const IM=r=>decodeURIComponent(escape(String.fromCharCode.apply(null,r))),Rfe=r=>{const e=new Uint8Array(r);return Array.from(e).map(t=>t.toString(16).padStart(2,"0")).join("")},PM=new Uint8Array(`

`.split("").map(r=>r.charCodeAt(0)));let Lfe=class extends Error{constructor(){super("Trying to parse received VTT cues, but there is no WebVTT. Make sure vtt.js is loaded.")}},Ofe=class extends B2{constructor(e,t={}){super(e,t),this.mediaSource_=null,this.subtitlesTrack_=null,this.featuresNativeTextTracks_=e.featuresNativeTextTracks,this.loadVttJs=e.loadVttJs,this.shouldSaveSegmentTimingInfo_=!1}createTransmuxer_(){return null}buffered_(){if(!this.subtitlesTrack_||!this.subtitlesTrack_.cues||!this.subtitlesTrack_.cues.length)return xs();const e=this.subtitlesTrack_.cues,t=e[0].startTime,n=e[e.length-1].startTime;return xs([[t,n]])}initSegmentForMap(e,t=!1){if(!e)return null;const n=ab(e);let i=this.initSegments_[n];if(t&&!i&&e.bytes){const s=PM.byteLength+e.bytes.byteLength,a=new Uint8Array(s);a.set(e.bytes),a.set(PM,e.bytes.byteLength),this.initSegments_[n]=i={resolvedUri:e.resolvedUri,byterange:e.byterange,bytes:a}}return i||e}couldBeginLoading_(){return this.playlist_&&this.subtitlesTrack_&&!this.paused()}init_(){return this.state="READY",this.resetEverything(),this.monitorBuffer_()}track(e){return typeof e>"u"?this.subtitlesTrack_:(this.subtitlesTrack_=e,this.state==="INIT"&&this.couldBeginLoading_()&&this.init_(),this.subtitlesTrack_)}remove(e,t){W0(e,t,this.subtitlesTrack_)}fillBuffer_(){const e=this.chooseNextRequest_();if(e){if(this.syncController_.timestampOffsetForTimeline(e.timeline)===null){const t=()=>{this.state="READY",this.paused()||this.monitorBuffer_()};this.syncController_.one("timestampoffset",t),this.state="WAITING_ON_TIMELINE";return}this.loadSegment_(e)}}timestampOffsetForSegment_(){return null}chooseNextRequest_(){return this.skipEmptySegments_(super.chooseNextRequest_())}skipEmptySegments_(e){for(;e&&e.segment.empty;){if(e.mediaIndex+1>=e.playlist.segments.length){e=null;break}e=this.generateSegmentInfo_({playlist:e.playlist,mediaIndex:e.mediaIndex+1,startOfSegment:e.startOfSegment+e.duration,isSyncRequest:e.isSyncRequest})}return e}stopForError(e){this.error(e),this.state="READY",this.pause(),this.trigger("error")}segmentRequestFinished_(e,t,n){if(!this.subtitlesTrack_){this.state="READY";return}if(this.saveTransferStats_(t.stats),!this.pendingSegment_){this.state="READY",this.mediaRequestsAborted+=1;return}if(e){e.code===Su.TIMEOUT&&this.handleTimeout_(),e.code===Su.ABORTED?this.mediaRequestsAborted+=1:this.mediaRequestsErrored+=1,this.stopForError(e);return}const i=this.pendingSegment_;this.saveBandwidthRelatedStats_(i.duration,t.stats),t.key&&this.segmentKey(t.key,!0),this.state="APPENDING",this.trigger("appending");const s=i.segment;if(s.map&&(s.map.bytes=t.map.bytes),i.bytes=t.bytes,typeof X.WebVTT!="function"&&typeof this.loadVttJs=="function"){this.state="WAITING_ON_VTTJS",this.loadVttJs().then(()=>this.segmentRequestFinished_(e,t,n),()=>this.stopForError({message:"Error loading vtt.js"}));return}s.requested=!0;try{this.parseVTTCues_(i)}catch(a){this.stopForError({message:a.message,metadata:{errorType:Se.Error.StreamingVttParserError,error:a}});return}if(this.updateTimeMapping_(i,this.syncController_.timelines[i.timeline],this.playlist_),i.cues.length?i.timingInfo={start:i.cues[0].startTime,end:i.cues[i.cues.length-1].endTime}:i.timingInfo={start:i.startOfSegment,end:i.startOfSegment+i.duration},i.isSyncRequest){this.trigger("syncinfoupdate"),this.pendingSegment_=null,this.state="READY";return}i.byteLength=i.bytes.byteLength,this.mediaSecondsLoaded+=s.duration,i.cues.forEach(a=>{this.subtitlesTrack_.addCue(this.featuresNativeTextTracks_?new X.VTTCue(a.startTime,a.endTime,a.text):a)}),mfe(this.subtitlesTrack_),this.handleAppendsDone_()}handleData_(){}updateTimingInfoEnd_(){}parseVTTCues_(e){let t,n=!1;if(typeof X.WebVTT!="function")throw new Lfe;typeof X.TextDecoder=="function"?t=new X.TextDecoder("utf8"):(t=X.WebVTT.StringDecoder(),n=!0);const i=new X.WebVTT.Parser(X,X.vttjs,t);if(e.cues=[],e.timestampmap={MPEGTS:0,LOCAL:0},i.oncue=e.cues.push.bind(e.cues),i.ontimestampmap=a=>{e.timestampmap=a},i.onparsingerror=a=>{Se.log.warn("Error encountered when parsing cues: "+a.message)},e.segment.map){let a=e.segment.map.bytes;n&&(a=IM(a)),i.parse(a)}let s=e.bytes;n&&(s=IM(s)),i.parse(s),i.flush()}updateTimeMapping_(e,t,n){const i=e.segment;if(!t)return;if(!e.cues.length){i.empty=!0;return}const{MPEGTS:s,LOCAL:a}=e.timestampmap,l=s/Ba.ONE_SECOND_IN_TS-a+t.mapping;if(e.cues.forEach(u=>{const c=u.endTime-u.startTime,h=this.handleRollover_(u.startTime+l,t.time);u.startTime=Math.max(h,0),u.endTime=Math.max(h+c,0)}),!n.syncInfo){const u=e.cues[0].startTime,c=e.cues[e.cues.length-1].startTime;n.syncInfo={mediaSequence:n.mediaSequence+e.mediaIndex,time:Math.min(u,c-i.duration)}}}handleRollover_(e,t){if(t===null)return e;let n=e*Ba.ONE_SECOND_IN_TS;const i=t*Ba.ONE_SECOND_IN_TS;let s;for(i<n?s=-8589934592:s=8589934592;Math.abs(n-i)>4294967296;)n+=s;return n/Ba.ONE_SECOND_IN_TS}};const Mfe=function(r,e){const t=r.cues;for(let n=0;n<t.length;n++){const i=t[n];if(e>=i.adStartTime&&e<=i.adEndTime)return i}return null},Ffe=function(r,e,t=0){if(!r.segments)return;let n=t,i;for(let s=0;s<r.segments.length;s++){const a=r.segments[s];if(i||(i=Mfe(e,n+a.duration/2)),i){if("cueIn"in a){i.endTime=n,i.adEndTime=n,n+=a.duration,i=null;continue}if(n<i.endTime){n+=a.duration;continue}i.endTime+=a.duration}else if("cueOut"in a&&(i=new X.VTTCue(n,n+a.duration,a.cueOut),i.adStartTime=n,i.adEndTime=n+parseFloat(a.cueOut),e.addCue(i)),"cueOutCont"in a){const[o,l]=a.cueOutCont.split("/").map(parseFloat);i=new X.VTTCue(n,n+a.duration,""),i.adStartTime=n-o,i.adEndTime=i.adStartTime+l,e.addCue(i)}n+=a.duration}};let RM=class{constructor({start:e,end:t,segmentIndex:n,partIndex:i=null,appended:s=!1}){this.start_=e,this.end_=t,this.segmentIndex_=n,this.partIndex_=i,this.appended_=s}isInRange(e){return e>=this.start&&e<this.end}markAppended(){this.appended_=!0}resetAppendedStatus(){this.appended_=!1}get isAppended(){return this.appended_}get start(){return this.start_}get end(){return this.end_}get segmentIndex(){return this.segmentIndex_}get partIndex(){return this.partIndex_}},Bfe=class{constructor(e,t=[]){this.segmentSyncInfo_=e,this.partsSyncInfo_=t}get segmentSyncInfo(){return this.segmentSyncInfo_}get partsSyncInfo(){return this.partsSyncInfo_}get hasPartsSyncInfo(){return this.partsSyncInfo_.length>0}resetAppendStatus(){this.segmentSyncInfo_.resetAppendedStatus(),this.partsSyncInfo_.forEach(e=>e.resetAppendedStatus())}},e$=class{constructor(){this.storage_=new Map,this.diagnostics_="",this.isReliable_=!1,this.start_=-1/0,this.end_=1/0}get start(){return this.start_}get end(){return this.end_}get diagnostics(){return this.diagnostics_}get isReliable(){return this.isReliable_}resetAppendedStatus(){this.storage_.forEach(e=>e.resetAppendStatus())}update(e,t){const{mediaSequence:n,segments:i}=e;if(this.isReliable_=this.isReliablePlaylist_(n,i),!!this.isReliable_)return this.updateStorage_(i,n,this.calculateBaseTime_(n,t))}getSyncInfoForTime(e){for(const{segmentSyncInfo:t,partsSyncInfo:n}of this.storage_.values())if(n.length){for(const i of n)if(i.isInRange(e))return i}else if(t.isInRange(e))return t;return null}getSyncInfoForMediaSequence(e){return this.storage_.get(e)}updateStorage_(e,t,n){const i=new Map;let s=`
`,a=n,o=t;this.start_=a,e.forEach((l,u)=>{const c=this.storage_.get(o),h=a,f=h+l.duration,g=!!(c&&c.segmentSyncInfo&&c.segmentSyncInfo.isAppended),v=new RM({start:h,end:f,appended:g,segmentIndex:u});l.syncInfo=v;let y=a;const _=(l.parts||[]).map((C,E)=>{const D=y,I=y+C.duration,k=!!(c&&c.partsSyncInfo&&c.partsSyncInfo[E]&&c.partsSyncInfo[E].isAppended),P=new RM({start:D,end:I,appended:k,segmentIndex:u,partIndex:E});return y=I,s+=`Media Sequence: ${o}.${E} | Range: ${D} --> ${I} | Appended: ${k}
`,C.syncInfo=P,P});i.set(o,new Bfe(v,_)),s+=`${YU(l.resolvedUri)} | Media Sequence: ${o} | Range: ${h} --> ${f} | Appended: ${g}
`,o++,a=f}),this.end_=a,this.storage_=i,this.diagnostics_=s}calculateBaseTime_(e,t){return this.storage_.size?this.storage_.has(e)?this.storage_.get(e).segmentSyncInfo.start:t:0}isReliablePlaylist_(e,t){return e!=null&&Array.isArray(t)&&t.length}},LM=class extends e${constructor(e){super(),this.parent_=e}calculateBaseTime_(e,t){if(!this.storage_.size){const n=this.parent_.getSyncInfoForMediaSequence(e);return n?n.segmentSyncInfo.start:0}return super.calculateBaseTime_(e,t)}};const Nfe=86400,NC=[{name:"VOD",run:(r,e,t,n,i)=>t!==1/0?{time:0,segmentIndex:0,partIndex:null}:null},{name:"MediaSequence",run:(r,e,t,n,i,s)=>{const a=r.getMediaSequenceSync(s);if(!a||!a.isReliable)return null;const o=a.getSyncInfoForTime(i);return o?{time:o.start,partIndex:o.partIndex,segmentIndex:o.segmentIndex}:null}},{name:"ProgramDateTime",run:(r,e,t,n,i)=>{if(!Object.keys(r.timelineToDatetimeMappings).length)return null;let s=null,a=null;const o=A2(e);i=i||0;for(let l=0;l<o.length;l++){const u=e.endList||i===0?l:o.length-(l+1),c=o[u],h=c.segment,f=r.timelineToDatetimeMappings[h.timeline];if(!f||!h.dateTimeObject)continue;let v=h.dateTimeObject.getTime()/1e3+f;if(h.parts&&typeof c.partIndex=="number")for(let _=0;_<c.partIndex;_++)v+=h.parts[_].duration;const y=Math.abs(i-v);if(a!==null&&(y===0||a<y))break;a=y,s={time:v,segmentIndex:c.segmentIndex,partIndex:c.partIndex}}return s}},{name:"Segment",run:(r,e,t,n,i)=>{let s=null,a=null;i=i||0;const o=A2(e);for(let l=0;l<o.length;l++){const u=e.endList||i===0?l:o.length-(l+1),c=o[u],h=c.segment,f=c.part&&c.part.start||h&&h.start;if(h.timeline===n&&typeof f<"u"){const g=Math.abs(i-f);if(a!==null&&a<g)break;(!s||a===null||a>=g)&&(a=g,s={time:f,segmentIndex:c.segmentIndex,partIndex:c.partIndex})}}return s}},{name:"Discontinuity",run:(r,e,t,n,i)=>{let s=null;if(i=i||0,e.discontinuityStarts&&e.discontinuityStarts.length){let a=null;for(let o=0;o<e.discontinuityStarts.length;o++){const l=e.discontinuityStarts[o],u=e.discontinuitySequence+o+1,c=r.discontinuities[u];if(c){const h=Math.abs(i-c.time);if(a!==null&&a<h)break;(!s||a===null||a>=h)&&(a=h,s={time:c.time,segmentIndex:l,partIndex:null})}}}return s}},{name:"Playlist",run:(r,e,t,n,i)=>e.syncInfo?{time:e.syncInfo.time,segmentIndex:e.syncInfo.mediaSequence-e.mediaSequence,partIndex:null}:null}];let Ufe=class extends Se.EventTarget{constructor(e={}){super(),this.timelines=[],this.discontinuities=[],this.timelineToDatetimeMappings={};const t=new e$,n=new LM(t),i=new LM(t);this.mediaSequenceStorage_={main:t,audio:n,vtt:i},this.logger_=ul("SyncController")}getMediaSequenceSync(e){return this.mediaSequenceStorage_[e]||null}getSyncPoint(e,t,n,i,s){if(t!==1/0)return NC.find(({name:l})=>l==="VOD").run(this,e,t);const a=this.runStrategies_(e,t,n,i,s);if(!a.length)return null;for(const o of a){const{syncPoint:l,strategy:u}=o,{segmentIndex:c,time:h}=l;if(c<0)continue;const f=e.segments[c],g=h,v=g+f.duration;if(this.logger_(`Strategy: ${u}. Current time: ${i}. selected segment: ${c}. Time: [${g} -> ${v}]}`),i>=g&&i<v)return this.logger_("Found sync point with exact match: ",l),l}return this.selectSyncPoint_(a,{key:"time",value:i})}getExpiredTime(e,t){if(!e||!e.segments)return null;const n=this.runStrategies_(e,t,e.discontinuitySequence,0);if(!n.length)return null;const i=this.selectSyncPoint_(n,{key:"segmentIndex",value:0});return i.segmentIndex>0&&(i.time*=-1),Math.abs(i.time+og({defaultDuration:e.targetDuration,durationList:e.segments,startIndex:i.segmentIndex,endIndex:0}))}runStrategies_(e,t,n,i,s){const a=[];for(let o=0;o<NC.length;o++){const l=NC[o],u=l.run(this,e,t,n,i,s);u&&(u.strategy=l.name,a.push({strategy:l.name,syncPoint:u}))}return a}selectSyncPoint_(e,t){let n=e[0].syncPoint,i=Math.abs(e[0].syncPoint[t.key]-t.value),s=e[0].strategy;for(let a=1;a<e.length;a++){const o=Math.abs(e[a].syncPoint[t.key]-t.value);o<i&&(i=o,n=e[a].syncPoint,s=e[a].strategy)}return this.logger_(`syncPoint for [${t.key}: ${t.value}] chosen with strategy [${s}]: [time:${n.time}, segmentIndex:${n.segmentIndex}`+(typeof n.partIndex=="number"?`,partIndex:${n.partIndex}`:"")+"]"),n}saveExpiredSegmentInfo(e,t){const n=t.mediaSequence-e.mediaSequence;if(n>Nfe){Se.log.warn(`Not saving expired segment info. Media sequence gap ${n} is too large.`);return}for(let i=n-1;i>=0;i--){const s=e.segments[i];if(s&&typeof s.start<"u"){t.syncInfo={mediaSequence:e.mediaSequence+i,time:s.start},this.logger_(`playlist refresh sync: [time:${t.syncInfo.time}, mediaSequence: ${t.syncInfo.mediaSequence}]`),this.trigger("syncinfoupdate");break}}}setDateTimeMappingForStart(e){if(this.timelineToDatetimeMappings={},e.segments&&e.segments.length&&e.segments[0].dateTimeObject){const t=e.segments[0],n=t.dateTimeObject.getTime()/1e3;this.timelineToDatetimeMappings[t.timeline]=-n}}saveSegmentTimingInfo({segmentInfo:e,shouldSaveTimelineMapping:t}){const n=this.calculateSegmentTimeMapping_(e,e.timingInfo,t),i=e.segment;n&&(this.saveDiscontinuitySyncInfo_(e),e.playlist.syncInfo||(e.playlist.syncInfo={mediaSequence:e.playlist.mediaSequence+e.mediaIndex,time:i.start}));const s=i.dateTimeObject;i.discontinuity&&t&&s&&(this.timelineToDatetimeMappings[i.timeline]=-(s.getTime()/1e3))}timestampOffsetForTimeline(e){return typeof this.timelines[e]>"u"?null:this.timelines[e].time}mappingForTimeline(e){return typeof this.timelines[e]>"u"?null:this.timelines[e].mapping}calculateSegmentTimeMapping_(e,t,n){const i=e.segment,s=e.part;let a=this.timelines[e.timeline],o,l;if(typeof e.timestampOffset=="number")a={time:e.startOfSegment,mapping:e.startOfSegment-t.start},n&&(this.timelines[e.timeline]=a,this.trigger("timestampoffset"),this.logger_(`time mapping for timeline ${e.timeline}: [time: ${a.time}] [mapping: ${a.mapping}]`)),o=e.startOfSegment,l=t.end+a.mapping;else if(a)o=t.start+a.mapping,l=t.end+a.mapping;else return!1;return s&&(s.start=o,s.end=l),(!i.start||o<i.start)&&(i.start=o),i.end=l,!0}saveDiscontinuitySyncInfo_(e){const t=e.playlist,n=e.segment;if(n.discontinuity)this.discontinuities[n.timeline]={time:n.start,accuracy:0};else if(t.discontinuityStarts&&t.discontinuityStarts.length)for(let i=0;i<t.discontinuityStarts.length;i++){const s=t.discontinuityStarts[i],a=t.discontinuitySequence+i+1,o=s-e.mediaIndex,l=Math.abs(o);if(!this.discontinuities[a]||this.discontinuities[a].accuracy>l){let u;o<0?u=n.start-og({defaultDuration:t.targetDuration,durationList:t.segments,startIndex:e.mediaIndex,endIndex:s}):u=n.end+og({defaultDuration:t.targetDuration,durationList:t.segments,startIndex:e.mediaIndex+1,endIndex:s}),this.discontinuities[a]={time:u,accuracy:l}}}}dispose(){this.trigger("dispose"),this.off()}},$fe=class extends Se.EventTarget{constructor(){super(),this.pendingTimelineChanges_={},this.lastTimelineChanges_={}}clearPendingTimelineChange(e){this.pendingTimelineChanges_[e]=null,this.trigger("pendingtimelinechange")}pendingTimelineChange({type:e,from:t,to:n}){return typeof t=="number"&&typeof n=="number"&&(this.pendingTimelineChanges_[e]={type:e,from:t,to:n},this.trigger("pendingtimelinechange")),this.pendingTimelineChanges_[e]}lastTimelineChange({type:e,from:t,to:n}){if(typeof t=="number"&&typeof n=="number"){this.lastTimelineChanges_[e]={type:e,from:t,to:n},delete this.pendingTimelineChanges_[e];const i={timelineChangeInfo:{from:t,to:n}};this.trigger({type:"timelinechange",metadata:i})}return this.lastTimelineChanges_[e]}dispose(){this.trigger("dispose"),this.pendingTimelineChanges_={},this.lastTimelineChanges_={},this.off()}};const jfe=UU($U(function(){var r=(function(){function y(){this.listeners={}}var _=y.prototype;return _.on=function(E,D){this.listeners[E]||(this.listeners[E]=[]),this.listeners[E].push(D)},_.off=function(E,D){if(!this.listeners[E])return!1;var I=this.listeners[E].indexOf(D);return this.listeners[E]=this.listeners[E].slice(0),this.listeners[E].splice(I,1),I>-1},_.trigger=function(E){var D=this.listeners[E];if(D)if(arguments.length===2)for(var I=D.length,k=0;k<I;++k)D[k].call(this,arguments[1]);else for(var P=Array.prototype.slice.call(arguments,1),N=D.length,U=0;U<N;++U)D[U].apply(this,P)},_.dispose=function(){this.listeners={}},_.pipe=function(E){this.on("data",function(D){E.push(D)})},y})();/*! @name pkcs7 @version 1.0.4 @license Apache-2.0 */function e(y){return y.subarray(0,y.byteLength-y[y.byteLength-1])}/*! @name aes-decrypter @version 4.0.2 @license Apache-2.0 */const t=function(){const y=[[[],[],[],[],[]],[[],[],[],[],[]]],_=y[0],C=y[1],E=_[4],D=C[4];let I,k,P;const N=[],U=[];let B,A,$,W,V,Q;for(I=0;I<256;I++)U[(N[I]=I<<1^(I>>7)*283)^I]=I;for(k=P=0;!E[k];k^=B||1,P=U[P]||1)for(W=P^P<<1^P<<2^P<<3^P<<4,W=W>>8^W&255^99,E[k]=W,D[W]=k,$=N[A=N[B=N[k]]],Q=$*16843009^A*65537^B*257^k*16843008,V=N[W]*257^W*16843008,I=0;I<4;I++)_[I][k]=V=V<<24^V>>>8,C[I][W]=Q=Q<<24^Q>>>8;for(I=0;I<5;I++)_[I]=_[I].slice(0),C[I]=C[I].slice(0);return y};let n=null;class i{constructor(_){n||(n=t()),this._tables=[[n[0][0].slice(),n[0][1].slice(),n[0][2].slice(),n[0][3].slice(),n[0][4].slice()],[n[1][0].slice(),n[1][1].slice(),n[1][2].slice(),n[1][3].slice(),n[1][4].slice()]];let C,E,D;const I=this._tables[0][4],k=this._tables[1],P=_.length;let N=1;if(P!==4&&P!==6&&P!==8)throw new Error("Invalid aes key size");const U=_.slice(0),B=[];for(this._key=[U,B],C=P;C<4*P+28;C++)D=U[C-1],(C%P===0||P===8&&C%P===4)&&(D=I[D>>>24]<<24^I[D>>16&255]<<16^I[D>>8&255]<<8^I[D&255],C%P===0&&(D=D<<8^D>>>24^N<<24,N=N<<1^(N>>7)*283)),U[C]=U[C-P]^D;for(E=0;C;E++,C--)D=U[E&3?C:C-4],C<=4||E<4?B[E]=D:B[E]=k[0][I[D>>>24]]^k[1][I[D>>16&255]]^k[2][I[D>>8&255]]^k[3][I[D&255]]}decrypt(_,C,E,D,I,k){const P=this._key[1];let N=_^P[0],U=D^P[1],B=E^P[2],A=C^P[3],$,W,V;const Q=P.length/4-2;let ie,ne=4;const ue=this._tables[1],se=ue[0],ae=ue[1],ce=ue[2],ee=ue[3],pe=ue[4];for(ie=0;ie<Q;ie++)$=se[N>>>24]^ae[U>>16&255]^ce[B>>8&255]^ee[A&255]^P[ne],W=se[U>>>24]^ae[B>>16&255]^ce[A>>8&255]^ee[N&255]^P[ne+1],V=se[B>>>24]^ae[A>>16&255]^ce[N>>8&255]^ee[U&255]^P[ne+2],A=se[A>>>24]^ae[N>>16&255]^ce[U>>8&255]^ee[B&255]^P[ne+3],ne+=4,N=$,U=W,B=V;for(ie=0;ie<4;ie++)I[(3&-ie)+k]=pe[N>>>24]<<24^pe[U>>16&255]<<16^pe[B>>8&255]<<8^pe[A&255]^P[ne++],$=N,N=U,U=B,B=A,A=$}}class s extends r{constructor(){super(r),this.jobs=[],this.delay=1,this.timeout_=null}processJob_(){this.jobs.shift()(),this.jobs.length?this.timeout_=setTimeout(this.processJob_.bind(this),this.delay):this.timeout_=null}push(_){this.jobs.push(_),this.timeout_||(this.timeout_=setTimeout(this.processJob_.bind(this),this.delay))}}const a=function(y){return y<<24|(y&65280)<<8|(y&16711680)>>8|y>>>24},o=function(y,_,C){const E=new Int32Array(y.buffer,y.byteOffset,y.byteLength>>2),D=new i(Array.prototype.slice.call(_)),I=new Uint8Array(y.byteLength),k=new Int32Array(I.buffer);let P,N,U,B,A,$,W,V,Q;for(P=C[0],N=C[1],U=C[2],B=C[3],Q=0;Q<E.length;Q+=4)A=a(E[Q]),$=a(E[Q+1]),W=a(E[Q+2]),V=a(E[Q+3]),D.decrypt(A,$,W,V,k,Q),k[Q]=a(k[Q]^P),k[Q+1]=a(k[Q+1]^N),k[Q+2]=a(k[Q+2]^U),k[Q+3]=a(k[Q+3]^B),P=A,N=$,U=W,B=V;return I};class l{constructor(_,C,E,D){const I=l.STEP,k=new Int32Array(_.buffer),P=new Uint8Array(_.byteLength);let N=0;for(this.asyncStream_=new s,this.asyncStream_.push(this.decryptChunk_(k.subarray(N,N+I),C,E,P)),N=I;N<k.length;N+=I)E=new Uint32Array([a(k[N-4]),a(k[N-3]),a(k[N-2]),a(k[N-1])]),this.asyncStream_.push(this.decryptChunk_(k.subarray(N,N+I),C,E,P));this.asyncStream_.push(function(){D(null,e(P))})}static get STEP(){return 32e3}decryptChunk_(_,C,E,D){return function(){const I=o(_,C,E);D.set(I,_.byteOffset)}}}var u=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},c;typeof window<"u"?c=window:typeof u<"u"?c=u:typeof self<"u"?c=self:c={};var h=c,f=function(_){return ArrayBuffer.isView==="function"?ArrayBuffer.isView(_):_&&_.buffer instanceof ArrayBuffer},g=h.BigInt||Number;g("0x1"),g("0x100"),g("0x10000"),g("0x1000000"),g("0x100000000"),g("0x10000000000"),g("0x1000000000000"),g("0x100000000000000"),g("0x10000000000000000"),(function(){var y=new Uint16Array([65484]),_=new Uint8Array(y.buffer,y.byteOffset,y.byteLength);return _[0]===255?"big":_[0]===204?"little":"unknown"})();const v=function(y){const _={};return Object.keys(y).forEach(C=>{const E=y[C];f(E)?_[C]={bytes:E.buffer,byteOffset:E.byteOffset,byteLength:E.byteLength}:_[C]=E}),_};self.onmessage=function(y){const _=y.data,C=new Uint8Array(_.encrypted.bytes,_.encrypted.byteOffset,_.encrypted.byteLength),E=new Uint32Array(_.key.bytes,_.key.byteOffset,_.key.byteLength/4),D=new Uint32Array(_.iv.bytes,_.iv.byteOffset,_.iv.byteLength/4);new l(C,E,D,function(I,k){self.postMessage(v({source:_.source,decrypted:k}),[k.buffer])})}}));var zfe=NU(jfe);const Hfe=r=>{let e=r.default?"main":"alternative";return r.characteristics&&r.characteristics.indexOf("public.accessibility.describes-video")>=0&&(e="main-desc"),e},t$=(r,e)=>{r.abort(),r.pause(),e&&e.activePlaylistLoader&&(e.activePlaylistLoader.pause(),e.activePlaylistLoader=null)},U2=(r,e)=>{e.activePlaylistLoader=r,r.load()},Vfe=(r,e)=>()=>{const{segmentLoaders:{[r]:t,main:n},mediaTypes:{[r]:i}}=e,s=i.activeTrack(),a=i.getActiveGroup(),o=i.activePlaylistLoader,l=i.lastGroup_;if(!(a&&l&&a.id===l.id)&&(i.lastGroup_=a,i.lastTrack_=s,t$(t,i),!(!a||a.isMainPlaylist))){if(!a.playlistLoader){o&&n.resetEverything();return}t.resyncLoader(),U2(a.playlistLoader,i)}},Wfe=(r,e)=>()=>{const{segmentLoaders:{[r]:t},mediaTypes:{[r]:n}}=e;n.lastGroup_=null,t.abort(),t.pause()},qfe=(r,e)=>()=>{const{mainPlaylistLoader:t,segmentLoaders:{[r]:n,main:i},mediaTypes:{[r]:s}}=e,a=s.activeTrack(),o=s.getActiveGroup(),l=s.activePlaylistLoader,u=s.lastTrack_;if(!(u&&a&&u.id===a.id)&&(s.lastGroup_=o,s.lastTrack_=a,t$(n,s),!!o)){if(o.isMainPlaylist){if(!a||!u||a.id===u.id)return;const c=e.vhs.playlistController_,h=c.selectPlaylist();if(c.media()===h)return;s.logger_(`track change. Switching main audio from ${u.id} to ${a.id}`),t.pause(),i.resetEverything(),c.fastQualityChange_(h);return}if(r==="AUDIO"){if(!o.playlistLoader){i.setAudio(!0),i.resetEverything();return}n.setAudio(!0),i.setAudio(!1)}if(l===o.playlistLoader){U2(o.playlistLoader,s);return}n.track&&n.track(a),n.resetEverything(),U2(o.playlistLoader,s)}},ub={AUDIO:(r,e)=>()=>{const{mediaTypes:{[r]:t},excludePlaylist:n}=e,i=t.activeTrack(),s=t.activeGroup(),a=(s.filter(l=>l.default)[0]||s[0]).id,o=t.tracks[a];if(i===o){n({error:{message:"Problem encountered loading the default audio track."}});return}Se.log.warn("Problem encountered loading the alternate audio track.Switching back to default.");for(const l in t.tracks)t.tracks[l].enabled=t.tracks[l]===o;t.onTrackChanged()},SUBTITLES:(r,e)=>()=>{const{mediaTypes:{[r]:t}}=e;Se.log.warn("Problem encountered loading the subtitle track.Disabling subtitle track.");const n=t.activeTrack();n&&(n.mode="disabled"),t.onTrackChanged()}},OM={AUDIO:(r,e,t)=>{if(!e)return;const{tech:n,requestOptions:i,segmentLoaders:{[r]:s}}=t;e.on("loadedmetadata",()=>{const a=e.media();s.playlist(a,i),(!n.paused()||a.endList&&n.preload()!=="none")&&s.load()}),e.on("loadedplaylist",()=>{s.playlist(e.media(),i),n.paused()||s.load()}),e.on("error",ub[r](r,t))},SUBTITLES:(r,e,t)=>{const{tech:n,requestOptions:i,segmentLoaders:{[r]:s},mediaTypes:{[r]:a}}=t;e.on("loadedmetadata",()=>{const o=e.media();s.playlist(o,i),s.track(a.activeTrack()),(!n.paused()||o.endList&&n.preload()!=="none")&&s.load()}),e.on("loadedplaylist",()=>{s.playlist(e.media(),i),n.paused()||s.load()}),e.on("error",ub[r](r,t))}},Gfe={AUDIO:(r,e)=>{const{vhs:t,sourceType:n,segmentLoaders:{[r]:i},requestOptions:s,main:{mediaGroups:a},mediaTypes:{[r]:{groups:o,tracks:l,logger_:u}},mainPlaylistLoader:c}=e,h=bv(c.main);(!a[r]||Object.keys(a[r]).length===0)&&(a[r]={main:{default:{default:!0}}},h&&(a[r].main.default.playlists=c.main.playlists));for(const f in a[r]){o[f]||(o[f]=[]);for(const g in a[r][f]){let v=a[r][f][g],y;if(h?(u(`AUDIO group '${f}' label '${g}' is a main playlist`),v.isMainPlaylist=!0,y=null):n==="vhs-json"&&v.playlists?y=new fp(v.playlists[0],t,s):v.resolvedUri?y=new fp(v.resolvedUri,t,s):v.playlists&&n==="dash"?y=new O2(v.playlists[0],t,s,c):y=null,v=An({id:g,playlistLoader:y},v),OM[r](r,v.playlistLoader,e),o[f].push(v),typeof l[g]>"u"){const _=new Se.AudioTrack({id:g,kind:Hfe(v),enabled:!1,language:v.language,default:v.default,label:g});l[g]=_}}}i.on("error",ub[r](r,e))},SUBTITLES:(r,e)=>{const{tech:t,vhs:n,sourceType:i,segmentLoaders:{[r]:s},requestOptions:a,main:{mediaGroups:o},mediaTypes:{[r]:{groups:l,tracks:u}},mainPlaylistLoader:c}=e;for(const h in o[r]){l[h]||(l[h]=[]);for(const f in o[r][h]){if(!n.options_.useForcedSubtitles&&o[r][h][f].forced)continue;let g=o[r][h][f],v;if(i==="hls")v=new fp(g.resolvedUri,n,a);else if(i==="dash"){if(!g.playlists.filter(_=>_.excludeUntil!==1/0).length)return;v=new O2(g.playlists[0],n,a,c)}else i==="vhs-json"&&(v=new fp(g.playlists?g.playlists[0]:g.resolvedUri,n,a));if(g=An({id:f,playlistLoader:v},g),OM[r](r,g.playlistLoader,e),l[h].push(g),typeof u[f]>"u"){const y=t.addRemoteTextTrack({id:f,kind:"subtitles",default:g.default&&g.autoselect,language:g.language,label:f},!1).track;u[f]=y}}}s.on("error",ub[r](r,e))},"CLOSED-CAPTIONS":(r,e)=>{const{tech:t,main:{mediaGroups:n},mediaTypes:{[r]:{groups:i,tracks:s}}}=e;for(const a in n[r]){i[a]||(i[a]=[]);for(const o in n[r][a]){const l=n[r][a][o];if(!/^(?:CC|SERVICE)/.test(l.instreamId))continue;const u=t.options_.vhs&&t.options_.vhs.captionServices||{};let c={label:o,language:l.language,instreamId:l.instreamId,default:l.default&&l.autoselect};if(u[c.instreamId]&&(c=An(c,u[c.instreamId])),c.default===void 0&&delete c.default,i[a].push(An({id:o},l)),typeof s[o]>"u"){const h=t.addRemoteTextTrack({id:c.instreamId,kind:"captions",default:c.default,language:c.language,label:c.label},!1).track;s[o]=h}}}}},r$=(r,e)=>{for(let t=0;t<r.length;t++)if(_A(e,r[t])||r[t].playlists&&r$(r[t].playlists,e))return!0;return!1},Kfe=(r,e)=>t=>{const{mainPlaylistLoader:n,mediaTypes:{[r]:{groups:i}}}=e,s=n.media();if(!s)return null;let a=null;s.attributes[r]&&(a=i[s.attributes[r]]);const o=Object.keys(i);if(!a)if(r==="AUDIO"&&o.length>1&&bv(e.main))for(let l=0;l<o.length;l++){const u=i[o[l]];if(r$(u,s)){a=u;break}}else i.main?a=i.main:o.length===1&&(a=i[o[0]]);return typeof t>"u"?a:t===null||!a?null:a.filter(l=>l.id===t.id)[0]||null},Xfe={AUDIO:(r,e)=>()=>{const{mediaTypes:{[r]:{tracks:t}}}=e;for(const n in t)if(t[n].enabled)return t[n];return null},SUBTITLES:(r,e)=>()=>{const{mediaTypes:{[r]:{tracks:t}}}=e;for(const n in t)if(t[n].mode==="showing"||t[n].mode==="hidden")return t[n];return null}},Yfe=(r,{mediaTypes:e})=>()=>{const t=e[r].activeTrack();return t?e[r].activeGroup(t):null},Qfe=r=>{["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(u=>{Gfe[u](u,r)});const{mediaTypes:e,mainPlaylistLoader:t,tech:n,vhs:i,segmentLoaders:{["AUDIO"]:s,main:a}}=r;["AUDIO","SUBTITLES"].forEach(u=>{e[u].activeGroup=Kfe(u,r),e[u].activeTrack=Xfe[u](u,r),e[u].onGroupChanged=Vfe(u,r),e[u].onGroupChanging=Wfe(u,r),e[u].onTrackChanged=qfe(u,r),e[u].getActiveGroup=Yfe(u,r)});const o=e.AUDIO.activeGroup();if(o){const u=(o.filter(h=>h.default)[0]||o[0]).id;e.AUDIO.tracks[u].enabled=!0,e.AUDIO.onGroupChanged(),e.AUDIO.onTrackChanged(),e.AUDIO.getActiveGroup().playlistLoader?(a.setAudio(!1),s.setAudio(!0)):a.setAudio(!0)}t.on("mediachange",()=>{["AUDIO","SUBTITLES"].forEach(u=>e[u].onGroupChanged())}),t.on("mediachanging",()=>{["AUDIO","SUBTITLES"].forEach(u=>e[u].onGroupChanging())});const l=()=>{e.AUDIO.onTrackChanged(),n.trigger({type:"usage",name:"vhs-audio-change"})};n.audioTracks().addEventListener("change",l),n.remoteTextTracks().addEventListener("change",e.SUBTITLES.onTrackChanged),i.on("dispose",()=>{n.audioTracks().removeEventListener("change",l),n.remoteTextTracks().removeEventListener("change",e.SUBTITLES.onTrackChanged)}),n.clearTracks("audio");for(const u in e.AUDIO.tracks)n.audioTracks().addTrack(e.AUDIO.tracks[u])},Jfe=()=>{const r={};return["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(e=>{r[e]={groups:{},tracks:{},activePlaylistLoader:null,activeGroup:Ec,activeTrack:Ec,getActiveGroup:Ec,onGroupChanged:Ec,onTrackChanged:Ec,lastTrack_:null,logger_:ul(`MediaGroups[${e}]`)}}),r};let MM=class{constructor(){this.priority_=[],this.pathwayClones_=new Map}set version(e){e===1&&(this.version_=e)}set ttl(e){this.ttl_=e||300}set reloadUri(e){e&&(this.reloadUri_=Ra(this.reloadUri_,e))}set priority(e){e&&e.length&&(this.priority_=e)}set pathwayClones(e){e&&e.length&&(this.pathwayClones_=new Map(e.map(t=>[t.ID,t])))}get version(){return this.version_}get ttl(){return this.ttl_}get reloadUri(){return this.reloadUri_}get priority(){return this.priority_}get pathwayClones(){return this.pathwayClones_}},Zfe=class extends Se.EventTarget{constructor(e,t){super(),this.currentPathway=null,this.defaultPathway=null,this.queryBeforeStart=!1,this.availablePathways_=new Set,this.steeringManifest=new MM,this.proxyServerUrl_=null,this.manifestType_=null,this.ttlTimeout_=null,this.request_=null,this.currentPathwayClones=new Map,this.nextPathwayClones=new Map,this.excludedSteeringManifestURLs=new Set,this.logger_=ul("Content Steering"),this.xhr_=e,this.getBandwidth_=t}assignTagProperties(e,t){this.manifestType_=t.serverUri?"HLS":"DASH";const n=t.serverUri||t.serverURL;if(!n){this.logger_(`steering manifest URL is ${n}, cannot request steering manifest.`),this.trigger("error");return}if(n.startsWith("data:")){this.decodeDataUriManifest_(n.substring(n.indexOf(",")+1));return}this.steeringManifest.reloadUri=Ra(e,n),this.defaultPathway=t.pathwayId||t.defaultServiceLocation,this.queryBeforeStart=t.queryBeforeStart,this.proxyServerUrl_=t.proxyServerURL,this.defaultPathway&&!this.queryBeforeStart&&this.trigger("content-steering")}requestSteeringManifest(e){const t=this.steeringManifest.reloadUri;if(!t)return;const n=e?t:this.getRequestURI(t);if(!n){this.logger_("No valid content steering manifest URIs. Stopping content steering."),this.trigger("error"),this.dispose();return}const i={contentSteeringInfo:{uri:n}};this.trigger({type:"contentsteeringloadstart",metadata:i}),this.request_=this.xhr_({uri:n,requestType:"content-steering-manifest"},(s,a)=>{if(s){if(a.status===410){this.logger_(`manifest request 410 ${s}.`),this.logger_(`There will be no more content steering requests to ${n} this session.`),this.excludedSteeringManifestURLs.add(n);return}if(a.status===429){const u=a.responseHeaders["retry-after"];this.logger_(`manifest request 429 ${s}.`),this.logger_(`content steering will retry in ${u} seconds.`),this.startTTLTimeout_(parseInt(u,10));return}this.logger_(`manifest failed to load ${s}.`),this.startTTLTimeout_();return}this.trigger({type:"contentsteeringloadcomplete",metadata:i});let o;try{o=JSON.parse(this.request_.responseText)}catch(u){const c={errorType:Se.Error.StreamingContentSteeringParserError,error:u};this.trigger({type:"error",metadata:c})}this.assignSteeringProperties_(o);const l={contentSteeringInfo:i.contentSteeringInfo,contentSteeringManifest:{version:this.steeringManifest.version,reloadUri:this.steeringManifest.reloadUri,priority:this.steeringManifest.priority}};this.trigger({type:"contentsteeringparsed",metadata:l}),this.startTTLTimeout_()})}setProxyServerUrl_(e){const t=new X.URL(e),n=new X.URL(this.proxyServerUrl_);return n.searchParams.set("url",encodeURI(t.toString())),this.setSteeringParams_(n.toString())}decodeDataUriManifest_(e){const t=JSON.parse(X.atob(e));this.assignSteeringProperties_(t)}setSteeringParams_(e){const t=new X.URL(e),n=this.getPathway(),i=this.getBandwidth_();if(n){const s=`_${this.manifestType_}_pathway`;t.searchParams.set(s,n)}if(i){const s=`_${this.manifestType_}_throughput`;t.searchParams.set(s,i)}return t.toString()}assignSteeringProperties_(e){if(this.steeringManifest.version=e.VERSION,!this.steeringManifest.version){this.logger_(`manifest version is ${e.VERSION}, which is not supported.`),this.trigger("error");return}this.steeringManifest.ttl=e.TTL,this.steeringManifest.reloadUri=e["RELOAD-URI"],this.steeringManifest.priority=e["PATHWAY-PRIORITY"]||e["SERVICE-LOCATION-PRIORITY"],this.steeringManifest.pathwayClones=e["PATHWAY-CLONES"],this.nextPathwayClones=this.steeringManifest.pathwayClones,this.availablePathways_.size||(this.logger_("There are no available pathways for content steering. Ending content steering."),this.trigger("error"),this.dispose());const n=(i=>{for(const s of i)if(this.availablePathways_.has(s))return s;return[...this.availablePathways_][0]})(this.steeringManifest.priority);this.currentPathway!==n&&(this.currentPathway=n,this.trigger("content-steering"))}getPathway(){return this.currentPathway||this.defaultPathway}getRequestURI(e){if(!e)return null;const t=i=>this.excludedSteeringManifestURLs.has(i);if(this.proxyServerUrl_){const i=this.setProxyServerUrl_(e);if(!t(i))return i}const n=this.setSteeringParams_(e);return t(n)?null:n}startTTLTimeout_(e=this.steeringManifest.ttl){const t=e*1e3;this.ttlTimeout_=X.setTimeout(()=>{this.requestSteeringManifest()},t)}clearTTLTimeout_(){X.clearTimeout(this.ttlTimeout_),this.ttlTimeout_=null}abort(){this.request_&&this.request_.abort(),this.request_=null}dispose(){this.off("content-steering"),this.off("error"),this.abort(),this.clearTTLTimeout_(),this.currentPathway=null,this.defaultPathway=null,this.queryBeforeStart=null,this.proxyServerUrl_=null,this.manifestType_=null,this.ttlTimeout_=null,this.request_=null,this.excludedSteeringManifestURLs=new Set,this.availablePathways_=new Set,this.steeringManifest=new MM}addAvailablePathway(e){e&&this.availablePathways_.add(e)}clearAvailablePathways(){this.availablePathways_.clear()}excludePathway(e){return this.availablePathways_.delete(e)}didDASHTagChange(e,t){return!t&&this.steeringManifest.reloadUri||t&&(Ra(e,t.serverURL)!==this.steeringManifest.reloadUri||t.defaultServiceLocation!==this.defaultPathway||t.queryBeforeStart!==this.queryBeforeStart||t.proxyServerURL!==this.proxyServerUrl_)}getAvailablePathways(){return this.availablePathways_}};const epe=10;let _c;const tpe=["mediaRequests","mediaRequestsAborted","mediaRequestsTimedout","mediaRequestsErrored","mediaTransferDuration","mediaBytesTransferred","mediaAppends"],rpe=function(r){return this.audioSegmentLoader_[r]+this.mainSegmentLoader_[r]},npe=function({currentPlaylist:r,buffered:e,currentTime:t,nextPlaylist:n,bufferLowWaterLine:i,bufferHighWaterLine:s,duration:a,bufferBasedABR:o,log:l}){if(!n)return Se.log.warn("We received no playlist to switch to. Please check your stream."),!1;const u=`allowing switch ${r&&r.id||"null"} -> ${n.id}`;if(!r)return l(`${u} as current playlist is not set`),!0;if(n.id===r.id)return!1;const c=!!hp(e,t).length;if(!r.endList)return!c&&typeof r.partTargetDuration=="number"?(l(`not ${u} as current playlist is live llhls, but currentTime isn't in buffered.`),!1):(l(`${u} as current playlist is live`),!0);const h=vA(e,t),f=o?Ji.EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE:Ji.MAX_BUFFER_LOW_WATER_LINE;if(a<f)return l(`${u} as duration < max low water line (${a} < ${f})`),!0;const g=n.attributes.BANDWIDTH,v=r.attributes.BANDWIDTH;if(g<v&&(!o||h<s)){let y=`${u} as next bandwidth < current bandwidth (${g} < ${v})`;return o&&(y+=` and forwardBuffer < bufferHighWaterLine (${h} < ${s})`),l(y),!0}if((!o||g>v)&&h>=i){let y=`${u} as forwardBuffer >= bufferLowWaterLine (${h} >= ${i})`;return o&&(y+=` and next bandwidth > current bandwidth (${g} > ${v})`),l(y),!0}return l(`not ${u} as no switching criteria met`),!1};let ipe=class extends Se.EventTarget{constructor(e){super();const{src:t,withCredentials:n,tech:i,bandwidth:s,externVhs:a,useCueTags:o,playlistExclusionDuration:l,enableLowInitialPlaylist:u,sourceType:c,cacheEncryptionKeys:h,bufferBasedABR:f,leastPixelDiffSelector:g,captionServices:v,experimentalUseMMS:y}=e;if(!t)throw new Error("A non-empty playlist URL or JSON manifest string is required");let{maxPlaylistRetries:_}=e;(_===null||typeof _>"u")&&(_=1/0),_c=a,this.bufferBasedABR=!!f,this.leastPixelDiffSelector=!!g,this.withCredentials=n,this.tech_=i,this.vhs_=i.vhs,this.player_=e.player_,this.sourceType_=c,this.useCueTags_=o,this.playlistExclusionDuration=l,this.maxPlaylistRetries=_,this.enableLowInitialPlaylist=u,this.useCueTags_&&(this.cueTagsTrack_=this.tech_.addTextTrack("metadata","ad-cues"),this.cueTagsTrack_.inBandMetadataTrackDispatchType=""),this.requestOptions_={withCredentials:n,maxPlaylistRetries:_,timeout:null},this.on("error",this.pauseLoading),this.mediaTypes_=Jfe(),y&&X.ManagedMediaSource?(this.tech_.el_.disableRemotePlayback=!0,this.mediaSource=new X.ManagedMediaSource,Se.log("Using ManagedMediaSource")):X.MediaSource&&(this.mediaSource=new X.MediaSource),this.handleDurationChange_=this.handleDurationChange_.bind(this),this.handleSourceOpen_=this.handleSourceOpen_.bind(this),this.handleSourceEnded_=this.handleSourceEnded_.bind(this),this.load=this.load.bind(this),this.pause=this.pause.bind(this),this.mediaSource.addEventListener("durationchange",this.handleDurationChange_),this.mediaSource.addEventListener("sourceopen",this.handleSourceOpen_),this.mediaSource.addEventListener("sourceended",this.handleSourceEnded_),this.mediaSource.addEventListener("startstreaming",this.load),this.mediaSource.addEventListener("endstreaming",this.pause),this.seekable_=xs(),this.hasPlayed_=!1,this.syncController_=new Ufe(e),this.segmentMetadataTrack_=i.addRemoteTextTrack({kind:"metadata",label:"segment-metadata"},!1).track,this.decrypter_=new zfe,this.sourceUpdater_=new ZU(this.mediaSource),this.inbandTextTracks_={},this.timelineChangeController_=new $fe,this.keyStatusMap_=new Map;const C={vhs:this.vhs_,parse708captions:e.parse708captions,useDtsForTimestampOffset:e.useDtsForTimestampOffset,captionServices:v,mediaSource:this.mediaSource,currentTime:this.tech_.currentTime.bind(this.tech_),seekable:()=>this.seekable(),seeking:()=>this.tech_.seeking(),duration:()=>this.duration(),hasPlayed:()=>this.hasPlayed_,goalBufferLength:()=>this.goalBufferLength(),bandwidth:s,syncController:this.syncController_,decrypter:this.decrypter_,sourceType:this.sourceType_,inbandTextTracks:this.inbandTextTracks_,cacheEncryptionKeys:h,sourceUpdater:this.sourceUpdater_,timelineChangeController:this.timelineChangeController_,exactManifestTimings:e.exactManifestTimings,addMetadataToTextTrack:this.addMetadataToTextTrack.bind(this)};this.mainPlaylistLoader_=this.sourceType_==="dash"?new O2(t,this.vhs_,An(this.requestOptions_,{addMetadataToTextTrack:this.addMetadataToTextTrack.bind(this)})):new fp(t,this.vhs_,An(this.requestOptions_,{addDateRangesToTextTrack:this.addDateRangesToTextTrack_.bind(this)})),this.setupMainPlaylistLoaderListeners_(),this.mainSegmentLoader_=new B2(An(C,{segmentMetadataTrack:this.segmentMetadataTrack_,loaderType:"main"}),e),this.audioSegmentLoader_=new B2(An(C,{loaderType:"audio"}),e),this.subtitleSegmentLoader_=new Ofe(An(C,{loaderType:"vtt",featuresNativeTextTracks:this.tech_.featuresNativeTextTracks,loadVttJs:()=>new Promise((I,k)=>{function P(){i.off("vttjserror",N),I()}function N(){i.off("vttjsloaded",P),k()}i.one("vttjsloaded",P),i.one("vttjserror",N),i.addWebVttScript_()})}),e);const E=()=>this.mainSegmentLoader_.bandwidth;this.contentSteeringController_=new Zfe(this.vhs_.xhr,E),this.setupSegmentLoaderListeners_(),this.bufferBasedABR&&(this.mainPlaylistLoader_.one("loadedplaylist",()=>this.startABRTimer_()),this.tech_.on("pause",()=>this.stopABRTimer_()),this.tech_.on("play",()=>this.startABRTimer_())),tpe.forEach(I=>{this[I+"_"]=rpe.bind(this,I)}),this.logger_=ul("pc"),this.triggeredFmp4Usage=!1,this.tech_.preload()==="none"?(this.loadOnPlay_=()=>{this.loadOnPlay_=null,this.mainPlaylistLoader_.load()},this.tech_.one("play",this.loadOnPlay_)):this.mainPlaylistLoader_.load(),this.timeToLoadedData__=-1,this.mainAppendsToLoadedData__=-1,this.audioAppendsToLoadedData__=-1;const D=this.tech_.preload()==="none"?"play":"loadstart";this.tech_.one(D,()=>{const I=Date.now();this.tech_.one("loadeddata",()=>{this.timeToLoadedData__=Date.now()-I,this.mainAppendsToLoadedData__=this.mainSegmentLoader_.mediaAppends,this.audioAppendsToLoadedData__=this.audioSegmentLoader_.mediaAppends})})}mainAppendsToLoadedData_(){return this.mainAppendsToLoadedData__}audioAppendsToLoadedData_(){return this.audioAppendsToLoadedData__}appendsToLoadedData_(){const e=this.mainAppendsToLoadedData_(),t=this.audioAppendsToLoadedData_();return e===-1||t===-1?-1:e+t}timeToLoadedData_(){return this.timeToLoadedData__}checkABR_(e="abr"){const t=this.selectPlaylist();t&&this.shouldSwitchToMedia_(t)&&this.switchMedia_(t,e)}switchMedia_(e,t,n){const i=this.media(),s=i&&(i.id||i.uri),a=e&&(e.id||e.uri);if(s&&s!==a){this.logger_(`switch media ${s} -> ${a} from ${t}`);const o={renditionInfo:{id:a,bandwidth:e.attributes.BANDWIDTH,resolution:e.attributes.RESOLUTION,codecs:e.attributes.CODECS},cause:t};this.trigger({type:"renditionselected",metadata:o}),this.tech_.trigger({type:"usage",name:`vhs-rendition-change-${t}`})}this.mainPlaylistLoader_.media(e,n)}switchMediaForDASHContentSteering_(){["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(e=>{const t=this.mediaTypes_[e],n=t?t.activeGroup():null,i=this.contentSteeringController_.getPathway();if(n&&i){const a=(n.length?n[0].playlists:n.playlists).filter(o=>o.attributes.serviceLocation===i);a.length&&this.mediaTypes_[e].activePlaylistLoader.media(a[0])}})}startABRTimer_(){this.stopABRTimer_(),this.abrTimer_=X.setInterval(()=>this.checkABR_(),250)}stopABRTimer_(){this.tech_.scrubbing&&this.tech_.scrubbing()||(X.clearInterval(this.abrTimer_),this.abrTimer_=null)}getAudioTrackPlaylists_(){const e=this.main(),t=e&&e.playlists||[];if(!e||!e.mediaGroups||!e.mediaGroups.AUDIO)return t;const n=e.mediaGroups.AUDIO,i=Object.keys(n);let s;if(Object.keys(this.mediaTypes_.AUDIO.groups).length)s=this.mediaTypes_.AUDIO.activeTrack();else{const o=n.main||i.length&&n[i[0]];for(const l in o)if(o[l].default){s={label:l};break}}if(!s)return t;const a=[];for(const o in n)if(n[o][s.label]){const l=n[o][s.label];if(l.playlists&&l.playlists.length)a.push.apply(a,l.playlists);else if(l.uri)a.push(l);else if(e.playlists.length)for(let u=0;u<e.playlists.length;u++){const c=e.playlists[u];c.attributes&&c.attributes.AUDIO&&c.attributes.AUDIO===o&&a.push(c)}}return a.length?a:t}setupMainPlaylistLoaderListeners_(){this.mainPlaylistLoader_.on("loadedmetadata",()=>{const t=this.mainPlaylistLoader_.media(),n=t.targetDuration*1.5*1e3;D2(this.mainPlaylistLoader_.main,this.mainPlaylistLoader_.media())?this.requestOptions_.timeout=0:this.requestOptions_.timeout=n,t.endList&&this.tech_.preload()!=="none"&&(this.mainSegmentLoader_.playlist(t,this.requestOptions_),this.mainSegmentLoader_.load()),Qfe({sourceType:this.sourceType_,segmentLoaders:{AUDIO:this.audioSegmentLoader_,SUBTITLES:this.subtitleSegmentLoader_,main:this.mainSegmentLoader_},tech:this.tech_,requestOptions:this.requestOptions_,mainPlaylistLoader:this.mainPlaylistLoader_,vhs:this.vhs_,main:this.main(),mediaTypes:this.mediaTypes_,excludePlaylist:this.excludePlaylist.bind(this)}),this.triggerPresenceUsage_(this.main(),t),this.setupFirstPlay(),!this.mediaTypes_.AUDIO.activePlaylistLoader||this.mediaTypes_.AUDIO.activePlaylistLoader.media()?this.trigger("selectedinitialmedia"):this.mediaTypes_.AUDIO.activePlaylistLoader.one("loadedmetadata",()=>{this.trigger("selectedinitialmedia")})}),this.mainPlaylistLoader_.on("loadedplaylist",()=>{this.loadOnPlay_&&this.tech_.off("play",this.loadOnPlay_);let t=this.mainPlaylistLoader_.media();if(!t){this.attachContentSteeringListeners_(),this.initContentSteeringController_(),this.excludeUnsupportedVariants_();let n;if(this.enableLowInitialPlaylist&&(n=this.selectInitialPlaylist()),n||(n=this.selectPlaylist()),!n||!this.shouldSwitchToMedia_(n)||(this.initialMedia_=n,this.switchMedia_(this.initialMedia_,"initial"),!(this.sourceType_==="vhs-json"&&this.initialMedia_.segments)))return;t=this.initialMedia_}this.handleUpdatedMediaPlaylist(t)}),this.mainPlaylistLoader_.on("error",()=>{const t=this.mainPlaylistLoader_.error;this.excludePlaylist({playlistToExclude:t.playlist,error:t})}),this.mainPlaylistLoader_.on("mediachanging",()=>{this.mainSegmentLoader_.abort(),this.mainSegmentLoader_.pause()}),this.mainPlaylistLoader_.on("mediachange",()=>{const t=this.mainPlaylistLoader_.media(),n=t.targetDuration*1.5*1e3;D2(this.mainPlaylistLoader_.main,this.mainPlaylistLoader_.media())?this.requestOptions_.timeout=0:this.requestOptions_.timeout=n,this.sourceType_==="dash"&&this.mainPlaylistLoader_.load(),this.mainSegmentLoader_.pause(),this.mainSegmentLoader_.playlist(t,this.requestOptions_),this.waitingForFastQualityPlaylistReceived_?this.runFastQualitySwitch_():this.mainSegmentLoader_.load(),this.tech_.trigger({type:"mediachange",bubbles:!0})}),this.mainPlaylistLoader_.on("playlistunchanged",()=>{const t=this.mainPlaylistLoader_.media();if(t.lastExcludeReason_==="playlist-unchanged")return;this.stuckAtPlaylistEnd_(t)&&(this.excludePlaylist({error:{message:"Playlist no longer updating.",reason:"playlist-unchanged"}}),this.tech_.trigger("playliststuck"))}),this.mainPlaylistLoader_.on("renditiondisabled",()=>{this.tech_.trigger({type:"usage",name:"vhs-rendition-disabled"})}),this.mainPlaylistLoader_.on("renditionenabled",()=>{this.tech_.trigger({type:"usage",name:"vhs-rendition-enabled"})}),["manifestrequeststart","manifestrequestcomplete","manifestparsestart","manifestparsecomplete","playlistrequeststart","playlistrequestcomplete","playlistparsestart","playlistparsecomplete","renditiondisabled","renditionenabled"].forEach(t=>{this.mainPlaylistLoader_.on(t,n=>{this.player_.trigger(sr({},n))})})}handleUpdatedMediaPlaylist(e){this.useCueTags_&&this.updateAdCues_(e),this.mainSegmentLoader_.pause(),this.mainSegmentLoader_.playlist(e,this.requestOptions_),this.waitingForFastQualityPlaylistReceived_&&this.runFastQualitySwitch_(),this.updateDuration(!e.endList),this.tech_.paused()||(this.mainSegmentLoader_.load(),this.audioSegmentLoader_&&this.audioSegmentLoader_.load())}triggerPresenceUsage_(e,t){const n=e.mediaGroups||{};let i=!0;const s=Object.keys(n.AUDIO);for(const a in n.AUDIO)for(const o in n.AUDIO[a])n.AUDIO[a][o].uri||(i=!1);i&&this.tech_.trigger({type:"usage",name:"vhs-demuxed"}),Object.keys(n.SUBTITLES).length&&this.tech_.trigger({type:"usage",name:"vhs-webvtt"}),_c.Playlist.isAes(t)&&this.tech_.trigger({type:"usage",name:"vhs-aes"}),s.length&&Object.keys(n.AUDIO[s[0]]).length>1&&this.tech_.trigger({type:"usage",name:"vhs-alternate-audio"}),this.useCueTags_&&this.tech_.trigger({type:"usage",name:"vhs-playlist-cue-tags"})}shouldSwitchToMedia_(e){const t=this.mainPlaylistLoader_.media()||this.mainPlaylistLoader_.pendingMedia_,n=this.tech_.currentTime(),i=this.bufferLowWaterLine(),s=this.bufferHighWaterLine(),a=this.tech_.buffered();return npe({buffered:a,currentTime:n,currentPlaylist:t,nextPlaylist:e,bufferLowWaterLine:i,bufferHighWaterLine:s,duration:this.duration(),bufferBasedABR:this.bufferBasedABR,log:this.logger_})}setupSegmentLoaderListeners_(){this.mainSegmentLoader_.on("bandwidthupdate",()=>{this.checkABR_("bandwidthupdate"),this.tech_.trigger("bandwidthupdate")}),this.mainSegmentLoader_.on("timeout",()=>{this.bufferBasedABR&&this.mainSegmentLoader_.load()}),this.bufferBasedABR||this.mainSegmentLoader_.on("progress",()=>{this.trigger("progress")}),this.mainSegmentLoader_.on("error",()=>{const n=this.mainSegmentLoader_.error();this.excludePlaylist({playlistToExclude:n.playlist,error:n})}),this.mainSegmentLoader_.on("appenderror",()=>{this.error=this.mainSegmentLoader_.error_,this.trigger("error")}),this.mainSegmentLoader_.on("syncinfoupdate",()=>{this.onSyncInfoUpdate_()}),this.mainSegmentLoader_.on("timestampoffset",()=>{this.tech_.trigger({type:"usage",name:"vhs-timestamp-offset"})}),this.audioSegmentLoader_.on("syncinfoupdate",()=>{this.onSyncInfoUpdate_()}),this.audioSegmentLoader_.on("appenderror",()=>{this.error=this.audioSegmentLoader_.error_,this.trigger("error")}),this.mainSegmentLoader_.on("ended",()=>{this.logger_("main segment loader ended"),this.onEndOfStream()}),this.timelineChangeController_.on("audioTimelineBehind",()=>{const n=this.audioSegmentLoader_.pendingSegment_;if(!n||!n.segment||!n.segment.syncInfo)return;const i=n.segment.syncInfo.end+.01;this.tech_.setCurrentTime(i)}),this.mainSegmentLoader_.on("earlyabort",n=>{this.bufferBasedABR||(this.delegateLoaders_("all",["abort"]),this.excludePlaylist({error:{message:"Aborted early because there isn't enough bandwidth to complete the request without rebuffering."},playlistExclusionDuration:epe}))});const e=()=>{if(!this.sourceUpdater_.hasCreatedSourceBuffers())return this.tryToCreateSourceBuffers_();const n=this.getCodecsOrExclude_();n&&this.sourceUpdater_.addOrChangeSourceBuffers(n)};this.mainSegmentLoader_.on("trackinfo",e),this.audioSegmentLoader_.on("trackinfo",e),this.mainSegmentLoader_.on("fmp4",()=>{this.triggeredFmp4Usage||(this.tech_.trigger({type:"usage",name:"vhs-fmp4"}),this.triggeredFmp4Usage=!0)}),this.audioSegmentLoader_.on("fmp4",()=>{this.triggeredFmp4Usage||(this.tech_.trigger({type:"usage",name:"vhs-fmp4"}),this.triggeredFmp4Usage=!0)}),this.audioSegmentLoader_.on("ended",()=>{this.logger_("audioSegmentLoader ended"),this.onEndOfStream()}),["segmentselected","segmentloadstart","segmentloaded","segmentkeyloadstart","segmentkeyloadcomplete","segmentdecryptionstart","segmentdecryptioncomplete","segmenttransmuxingstart","segmenttransmuxingcomplete","segmenttransmuxingtrackinfoavailable","segmenttransmuxingtiminginfoavailable","segmentappendstart","appendsdone","bandwidthupdated","timelinechange","codecschange"].forEach(n=>{this.mainSegmentLoader_.on(n,i=>{this.player_.trigger(sr({},i))}),this.audioSegmentLoader_.on(n,i=>{this.player_.trigger(sr({},i))}),this.subtitleSegmentLoader_.on(n,i=>{this.player_.trigger(sr({},i))})})}mediaSecondsLoaded_(){return Math.max(this.audioSegmentLoader_.mediaSecondsLoaded+this.mainSegmentLoader_.mediaSecondsLoaded)}load(){this.mainSegmentLoader_.load(),this.mediaTypes_.AUDIO.activePlaylistLoader&&this.audioSegmentLoader_.load(),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&this.subtitleSegmentLoader_.load()}pause(){this.mainSegmentLoader_.pause(),this.mediaTypes_.AUDIO.activePlaylistLoader&&this.audioSegmentLoader_.pause(),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&this.subtitleSegmentLoader_.pause()}fastQualityChange_(e=this.selectPlaylist()){if(e&&e===this.mainPlaylistLoader_.media()){this.logger_("skipping fastQualityChange because new media is same as old");return}this.switchMedia_(e,"fast-quality"),this.waitingForFastQualityPlaylistReceived_=!0}runFastQualitySwitch_(){this.waitingForFastQualityPlaylistReceived_=!1,this.mainSegmentLoader_.pause(),this.mainSegmentLoader_.resetEverything(()=>{this.mainSegmentLoader_.load()})}play(){if(this.setupFirstPlay())return;this.tech_.ended()&&this.tech_.setCurrentTime(0),this.hasPlayed_&&this.load();const e=this.tech_.seekable();if(this.tech_.duration()===1/0&&this.tech_.currentTime()<e.start(0))return this.tech_.setCurrentTime(e.end(e.length-1))}setupFirstPlay(){const e=this.mainPlaylistLoader_.media();if(!e||this.tech_.paused()||this.hasPlayed_)return!1;if(!e.endList||e.start){const t=this.seekable();if(!t.length)return!1;const n=t.end(0);let i=n;if(e.start){const s=e.start.timeOffset;s<0?i=Math.max(n+s,t.start(0)):i=Math.min(n,s)}this.trigger("firstplay"),this.tech_.setCurrentTime(i)}return this.hasPlayed_=!0,this.load(),!0}handleSourceOpen_(){if(this.tryToCreateSourceBuffers_(),this.tech_.autoplay()){const e=this.tech_.play();typeof e<"u"&&typeof e.then=="function"&&e.then(null,t=>{})}this.trigger("sourceopen")}handleSourceEnded_(){if(!this.inbandTextTracks_.metadataTrack_)return;const e=this.inbandTextTracks_.metadataTrack_.cues;if(!e||!e.length)return;const t=this.duration();e[e.length-1].endTime=isNaN(t)||Math.abs(t)===1/0?Number.MAX_VALUE:t}handleDurationChange_(){this.tech_.trigger("durationchange")}onEndOfStream(){let e=this.mainSegmentLoader_.ended_;if(this.mediaTypes_.AUDIO.activePlaylistLoader){const t=this.mainSegmentLoader_.getCurrentMediaInfo_();!t||t.hasVideo?e=e&&this.audioSegmentLoader_.ended_:e=this.audioSegmentLoader_.ended_}e&&(this.stopABRTimer_(),this.sourceUpdater_.endOfStream())}stuckAtPlaylistEnd_(e){if(!this.seekable().length)return!1;const n=this.syncController_.getExpiredTime(e,this.duration());if(n===null)return!1;const i=_c.Playlist.playlistEnd(e,n),s=this.tech_.currentTime(),a=this.tech_.buffered();if(!a.length)return i-s<=bu;const o=a.end(a.length-1);return o-s<=bu&&i-o<=bu}excludePlaylist({playlistToExclude:e=this.mainPlaylistLoader_.media(),error:t={},playlistExclusionDuration:n}){if(e=e||this.mainPlaylistLoader_.media(),n=n||t.playlistExclusionDuration||this.playlistExclusionDuration,!e){this.error=t,this.mediaSource.readyState!=="open"?this.trigger("error"):this.sourceUpdater_.endOfStream("network");return}e.playlistErrors_++;const i=this.mainPlaylistLoader_.main.playlists,s=i.filter(VS),a=s.length===1&&s[0]===e;if(i.length===1&&n!==1/0)return Se.log.warn(`Problem encountered with playlist ${e.id}. Trying again since it is the only playlist.`),this.tech_.trigger("retryplaylist"),this.mainPlaylistLoader_.load(a);if(a){if(this.main().contentSteering){const v=this.pathwayAttribute_(e),y=this.contentSteeringController_.steeringManifest.ttl*1e3;this.contentSteeringController_.excludePathway(v),this.excludeThenChangePathway_(),setTimeout(()=>{this.contentSteeringController_.addAvailablePathway(v)},y);return}let g=!1;i.forEach(v=>{if(v===e)return;const y=v.excludeUntil;typeof y<"u"&&y!==1/0&&(g=!0,delete v.excludeUntil)}),g&&(Se.log.warn("Removing other playlists from the exclusion list because the last rendition is about to be excluded."),this.tech_.trigger("retryplaylist"))}let o;e.playlistErrors_>this.maxPlaylistRetries?o=1/0:o=Date.now()+n*1e3,e.excludeUntil=o,t.reason&&(e.lastExcludeReason_=t.reason),this.tech_.trigger("excludeplaylist"),this.tech_.trigger({type:"usage",name:"vhs-rendition-excluded"});const l=this.selectPlaylist();if(!l){this.error="Playback cannot continue. No available working or supported playlists.",this.trigger("error");return}const u=t.internal?this.logger_:Se.log.warn,c=t.message?" "+t.message:"";u(`${t.internal?"Internal problem":"Problem"} encountered with playlist ${e.id}.${c} Switching to playlist ${l.id}.`),l.attributes.AUDIO!==e.attributes.AUDIO&&this.delegateLoaders_("audio",["abort","pause"]),l.attributes.SUBTITLES!==e.attributes.SUBTITLES&&this.delegateLoaders_("subtitle",["abort","pause"]),this.delegateLoaders_("main",["abort","pause"]);const h=l.targetDuration/2*1e3||5*1e3,f=typeof l.lastRequest=="number"&&Date.now()-l.lastRequest<=h;return this.switchMedia_(l,"exclude",a||f)}pauseLoading(){this.delegateLoaders_("all",["abort","pause"]),this.stopABRTimer_()}delegateLoaders_(e,t){const n=[],i=e==="all";(i||e==="main")&&n.push(this.mainPlaylistLoader_);const s=[];(i||e==="audio")&&s.push("AUDIO"),(i||e==="subtitle")&&(s.push("CLOSED-CAPTIONS"),s.push("SUBTITLES")),s.forEach(a=>{const o=this.mediaTypes_[a]&&this.mediaTypes_[a].activePlaylistLoader;o&&n.push(o)}),["main","audio","subtitle"].forEach(a=>{const o=this[`${a}SegmentLoader_`];o&&(e===a||e==="all")&&n.push(o)}),n.forEach(a=>t.forEach(o=>{typeof a[o]=="function"&&a[o]()}))}setCurrentTime(e){const t=hp(this.tech_.buffered(),e);if(!(this.mainPlaylistLoader_&&this.mainPlaylistLoader_.media())||!this.mainPlaylistLoader_.media().segments)return 0;if(t&&t.length)return e;this.mainSegmentLoader_.pause(),this.mainSegmentLoader_.resetEverything(),this.mediaTypes_.AUDIO.activePlaylistLoader&&(this.audioSegmentLoader_.pause(),this.audioSegmentLoader_.resetEverything()),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&(this.subtitleSegmentLoader_.pause(),this.subtitleSegmentLoader_.resetEverything()),this.load()}duration(){if(!this.mainPlaylistLoader_)return 0;const e=this.mainPlaylistLoader_.media();return e?e.endList?this.mediaSource?this.mediaSource.duration:_c.Playlist.duration(e):1/0:0}seekable(){return this.seekable_}onSyncInfoUpdate_(){let e;if(!this.mainPlaylistLoader_)return;let t=this.mainPlaylistLoader_.media();if(!t)return;let n=this.syncController_.getExpiredTime(t,this.duration());if(n===null)return;const i=this.mainPlaylistLoader_.main,s=_c.Playlist.seekable(t,n,_c.Playlist.liveEdgeDelay(i,t));if(s.length===0||this.mediaTypes_.AUDIO.activePlaylistLoader&&(t=this.mediaTypes_.AUDIO.activePlaylistLoader.media(),n=this.syncController_.getExpiredTime(t,this.duration()),n===null||(e=_c.Playlist.seekable(t,n,_c.Playlist.liveEdgeDelay(i,t)),e.length===0)))return;let a,o;if(this.seekable_&&this.seekable_.length&&(a=this.seekable_.end(0),o=this.seekable_.start(0)),e?e.start(0)>s.end(0)||s.start(0)>e.end(0)?this.seekable_=s:this.seekable_=xs([[e.start(0)>s.start(0)?e.start(0):s.start(0),e.end(0)<s.end(0)?e.end(0):s.end(0)]]):this.seekable_=s,this.seekable_&&this.seekable_.length&&this.seekable_.end(0)===a&&this.seekable_.start(0)===o)return;this.logger_(`seekable updated [${pU(this.seekable_)}]`);const l={seekableRanges:this.seekable_};this.trigger({type:"seekablerangeschanged",metadata:l}),this.tech_.trigger("seekablechanged")}updateDuration(e){if(this.updateDuration_&&(this.mediaSource.removeEventListener("sourceopen",this.updateDuration_),this.updateDuration_=null),this.mediaSource.readyState!=="open"){this.updateDuration_=this.updateDuration.bind(this,e),this.mediaSource.addEventListener("sourceopen",this.updateDuration_);return}if(e){const i=this.seekable();if(!i.length)return;(isNaN(this.mediaSource.duration)||this.mediaSource.duration<i.end(i.length-1))&&this.sourceUpdater_.setDuration(i.end(i.length-1));return}const t=this.tech_.buffered();let n=_c.Playlist.duration(this.mainPlaylistLoader_.media());t.length>0&&(n=Math.max(n,t.end(t.length-1))),this.mediaSource.duration!==n&&this.sourceUpdater_.setDuration(n)}dispose(){this.trigger("dispose"),this.decrypter_.terminate(),this.mainPlaylistLoader_.dispose(),this.mainSegmentLoader_.dispose(),this.contentSteeringController_.dispose(),this.keyStatusMap_.clear(),this.loadOnPlay_&&this.tech_.off("play",this.loadOnPlay_),["AUDIO","SUBTITLES"].forEach(e=>{const t=this.mediaTypes_[e].groups;for(const n in t)t[n].forEach(i=>{i.playlistLoader&&i.playlistLoader.dispose()})}),this.audioSegmentLoader_.dispose(),this.subtitleSegmentLoader_.dispose(),this.sourceUpdater_.dispose(),this.timelineChangeController_.dispose(),this.stopABRTimer_(),this.updateDuration_&&this.mediaSource.removeEventListener("sourceopen",this.updateDuration_),this.mediaSource.removeEventListener("durationchange",this.handleDurationChange_),this.mediaSource.removeEventListener("sourceopen",this.handleSourceOpen_),this.mediaSource.removeEventListener("sourceended",this.handleSourceEnded_),this.off()}main(){return this.mainPlaylistLoader_.main}media(){return this.mainPlaylistLoader_.media()||this.initialMedia_}areMediaTypesKnown_(){const e=!!this.mediaTypes_.AUDIO.activePlaylistLoader,t=!!this.mainSegmentLoader_.getCurrentMediaInfo_(),n=e?!!this.audioSegmentLoader_.getCurrentMediaInfo_():!0;return!(!t||!n)}getCodecsOrExclude_(){const e={main:this.mainSegmentLoader_.getCurrentMediaInfo_()||{},audio:this.audioSegmentLoader_.getCurrentMediaInfo_()||{}},t=this.mainSegmentLoader_.getPendingSegmentPlaylist()||this.media();e.video=e.main;const n=ug(this.main(),t),i={},s=!!this.mediaTypes_.AUDIO.activePlaylistLoader;if(e.main.hasVideo&&(i.video=n.video||e.main.videoCodec||P5),e.main.isMuxed&&(i.video+=`,${n.audio||e.main.audioCodec||H_}`),(e.main.hasAudio&&!e.main.isMuxed||e.audio.hasAudio||s)&&(i.audio=n.audio||e.main.audioCodec||e.audio.audioCodec||H_,e.audio.isFmp4=e.main.hasAudio&&!e.main.isMuxed?e.main.isFmp4:e.audio.isFmp4),!i.audio&&!i.video){this.excludePlaylist({playlistToExclude:t,error:{message:"Could not determine codecs for playlist."},playlistExclusionDuration:1/0});return}const a=(u,c)=>u?Lu(c):Ep(c),o={};let l;if(["video","audio"].forEach(function(u){if(i.hasOwnProperty(u)&&!a(e[u].isFmp4,i[u])){const c=e[u].isFmp4?"browser":"muxer";o[c]=o[c]||[],o[c].push(i[u]),u==="audio"&&(l=c)}}),s&&l&&t.attributes.AUDIO){const u=t.attributes.AUDIO;this.main().playlists.forEach(c=>{(c.attributes&&c.attributes.AUDIO)===u&&c!==t&&(c.excludeUntil=1/0)}),this.logger_(`excluding audio group ${u} as ${l} does not support codec(s): "${i.audio}"`)}if(Object.keys(o).length){const u=Object.keys(o).reduce((c,h)=>(c&&(c+=", "),c+=`${h} does not support codec(s): "${o[h].join(",")}"`,c),"")+".";this.excludePlaylist({playlistToExclude:t,error:{internal:!0,message:u},playlistExclusionDuration:1/0});return}if(this.sourceUpdater_.hasCreatedSourceBuffers()&&!this.sourceUpdater_.canChangeType()){const u=[];if(["video","audio"].forEach(c=>{const h=(Ni(this.sourceUpdater_.codecs[c]||"")[0]||{}).type,f=(Ni(i[c]||"")[0]||{}).type;h&&f&&h.toLowerCase()!==f.toLowerCase()&&u.push(`"${this.sourceUpdater_.codecs[c]}" -> "${i[c]}"`)}),u.length){this.excludePlaylist({playlistToExclude:t,error:{message:`Codec switching not supported: ${u.join(", ")}.`,internal:!0},playlistExclusionDuration:1/0});return}}return i}tryToCreateSourceBuffers_(){if(this.mediaSource.readyState!=="open"||this.sourceUpdater_.hasCreatedSourceBuffers()||!this.areMediaTypesKnown_())return;const e=this.getCodecsOrExclude_();if(!e)return;this.sourceUpdater_.createSourceBuffers(e);const t=[e.video,e.audio].filter(Boolean).join(",");this.excludeIncompatibleVariants_(t)}excludeUnsupportedVariants_(){const e=this.main().playlists,t=[];Object.keys(e).forEach(n=>{const i=e[n];if(t.indexOf(i.id)!==-1)return;t.push(i.id);const s=ug(this.main,i),a=[];s.audio&&!Ep(s.audio)&&!Lu(s.audio)&&a.push(`audio codec ${s.audio}`),s.video&&!Ep(s.video)&&!Lu(s.video)&&a.push(`video codec ${s.video}`),s.text&&s.text==="stpp.ttml.im1t"&&a.push(`text codec ${s.text}`),a.length&&(i.excludeUntil=1/0,this.logger_(`excluding ${i.id} for unsupported: ${a.join(", ")}`))})}excludeIncompatibleVariants_(e){const t=[],n=this.main().playlists,i=ob(Ni(e)),s=SM(i),a=i.video&&Ni(i.video)[0]||null,o=i.audio&&Ni(i.audio)[0]||null;Object.keys(n).forEach(l=>{const u=n[l];if(t.indexOf(u.id)!==-1||u.excludeUntil===1/0)return;t.push(u.id);const c=[],h=ug(this.mainPlaylistLoader_.main,u),f=SM(h);if(!(!h.audio&&!h.video)){if(f!==s&&c.push(`codec count "${f}" !== "${s}"`),!this.sourceUpdater_.canChangeType()){const g=h.video&&Ni(h.video)[0]||null,v=h.audio&&Ni(h.audio)[0]||null;g&&a&&g.type.toLowerCase()!==a.type.toLowerCase()&&c.push(`video codec "${g.type}" !== "${a.type}"`),v&&o&&v.type.toLowerCase()!==o.type.toLowerCase()&&c.push(`audio codec "${v.type}" !== "${o.type}"`)}c.length&&(u.excludeUntil=1/0,this.logger_(`excluding ${u.id}: ${c.join(" && ")}`))}})}updateAdCues_(e){let t=0;const n=this.seekable();n.length&&(t=n.start(0)),Ffe(e,this.cueTagsTrack_,t)}goalBufferLength(){const e=this.tech_.currentTime(),t=Ji.GOAL_BUFFER_LENGTH,n=Ji.GOAL_BUFFER_LENGTH_RATE,i=Math.max(t,Ji.MAX_GOAL_BUFFER_LENGTH);return Math.min(t+e*n,i)}bufferLowWaterLine(){const e=this.tech_.currentTime(),t=Ji.BUFFER_LOW_WATER_LINE,n=Ji.BUFFER_LOW_WATER_LINE_RATE,i=Math.max(t,Ji.MAX_BUFFER_LOW_WATER_LINE),s=Math.max(t,Ji.EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE);return Math.min(t+e*n,this.bufferBasedABR?s:i)}bufferHighWaterLine(){return Ji.BUFFER_HIGH_WATER_LINE}addDateRangesToTextTrack_(e){wM(this.inbandTextTracks_,"com.apple.streaming",this.tech_),pfe({inbandTextTracks:this.inbandTextTracks_,dateRanges:e})}addMetadataToTextTrack(e,t,n){const i=this.sourceUpdater_.videoBuffer?this.sourceUpdater_.videoTimestampOffset():this.sourceUpdater_.audioTimestampOffset();wM(this.inbandTextTracks_,e,this.tech_),dfe({inbandTextTracks:this.inbandTextTracks_,metadataArray:t,timestampOffset:i,videoDuration:n})}pathwayAttribute_(e){return e.attributes["PATHWAY-ID"]||e.attributes.serviceLocation}initContentSteeringController_(){const e=this.main();if(e.contentSteering){for(const t of e.playlists)this.contentSteeringController_.addAvailablePathway(this.pathwayAttribute_(t));if(this.contentSteeringController_.assignTagProperties(e.uri,e.contentSteering),this.contentSteeringController_.queryBeforeStart){this.contentSteeringController_.requestSteeringManifest(!0);return}this.tech_.one("canplay",()=>{this.contentSteeringController_.requestSteeringManifest()})}}resetContentSteeringController_(){this.contentSteeringController_.clearAvailablePathways(),this.contentSteeringController_.dispose(),this.initContentSteeringController_()}attachContentSteeringListeners_(){this.contentSteeringController_.on("content-steering",this.excludeThenChangePathway_.bind(this)),["contentsteeringloadstart","contentsteeringloadcomplete","contentsteeringparsed"].forEach(t=>{this.contentSteeringController_.on(t,n=>{this.trigger(sr({},n))})}),this.sourceType_==="dash"&&this.mainPlaylistLoader_.on("loadedplaylist",()=>{const t=this.main();(this.contentSteeringController_.didDASHTagChange(t.uri,t.contentSteering)||(()=>{const s=this.contentSteeringController_.getAvailablePathways(),a=[];for(const o of t.playlists){const l=o.attributes.serviceLocation;if(l&&(a.push(l),!s.has(l)))return!0}return!!(!a.length&&s.size)})())&&this.resetContentSteeringController_()})}excludeThenChangePathway_(){const e=this.contentSteeringController_.getPathway();if(!e)return;this.handlePathwayClones_();const n=this.main().playlists,i=new Set;let s=!1;Object.keys(n).forEach(a=>{const o=n[a],l=this.pathwayAttribute_(o),u=l&&e!==l;o.excludeUntil===1/0&&o.lastExcludeReason_==="content-steering"&&!u&&(delete o.excludeUntil,delete o.lastExcludeReason_,s=!0);const h=!o.excludeUntil&&o.excludeUntil!==1/0;!i.has(o.id)&&u&&h&&(i.add(o.id),o.excludeUntil=1/0,o.lastExcludeReason_="content-steering",this.logger_(`excluding ${o.id} for ${o.lastExcludeReason_}`))}),this.contentSteeringController_.manifestType_==="DASH"&&Object.keys(this.mediaTypes_).forEach(a=>{const o=this.mediaTypes_[a];if(o.activePlaylistLoader){const l=o.activePlaylistLoader.media_;l&&l.attributes.serviceLocation!==e&&(s=!0)}}),s&&this.changeSegmentPathway_()}handlePathwayClones_(){const t=this.main().playlists,n=this.contentSteeringController_.currentPathwayClones,i=this.contentSteeringController_.nextPathwayClones;if(n&&n.size||i&&i.size){for(const[a,o]of n.entries())i.get(a)||(this.mainPlaylistLoader_.updateOrDeleteClone(o),this.contentSteeringController_.excludePathway(a));for(const[a,o]of i.entries()){const l=n.get(a);if(!l){t.filter(c=>c.attributes["PATHWAY-ID"]===o["BASE-ID"]).forEach(c=>{this.mainPlaylistLoader_.addClonePathway(o,c)}),this.contentSteeringController_.addAvailablePathway(a);continue}this.equalPathwayClones_(l,o)||(this.mainPlaylistLoader_.updateOrDeleteClone(o,!0),this.contentSteeringController_.addAvailablePathway(a))}this.contentSteeringController_.currentPathwayClones=new Map(JSON.parse(JSON.stringify([...i])))}}equalPathwayClones_(e,t){if(e["BASE-ID"]!==t["BASE-ID"]||e.ID!==t.ID||e["URI-REPLACEMENT"].HOST!==t["URI-REPLACEMENT"].HOST)return!1;const n=e["URI-REPLACEMENT"].PARAMS,i=t["URI-REPLACEMENT"].PARAMS;for(const s in n)if(n[s]!==i[s])return!1;for(const s in i)if(n[s]!==i[s])return!1;return!0}changeSegmentPathway_(){const e=this.selectPlaylist();this.pauseLoading(),this.contentSteeringController_.manifestType_==="DASH"&&this.switchMediaForDASHContentSteering_(),this.switchMedia_(e,"content-steering")}excludeNonUsablePlaylistsByKeyId_(){if(!this.mainPlaylistLoader_||!this.mainPlaylistLoader_.main)return;let e=0;const t="non-usable";this.mainPlaylistLoader_.main.playlists.forEach(n=>{const i=this.mainPlaylistLoader_.getKeyIdSet(n);!i||!i.size||i.forEach(s=>{const a="usable",o=this.keyStatusMap_.has(s)&&this.keyStatusMap_.get(s)===a,l=n.lastExcludeReason_===t&&n.excludeUntil===1/0;o?o&&l&&(delete n.excludeUntil,delete n.lastExcludeReason_,this.logger_(`enabling playlist ${n.id} because key ID ${s} is ${a}`)):(n.excludeUntil!==1/0&&n.lastExcludeReason_!==t&&(n.excludeUntil=1/0,n.lastExcludeReason_=t,this.logger_(`excluding playlist ${n.id} because the key ID ${s} doesn't exist in the keyStatusMap or is not ${a}`)),e++)})}),e>=this.mainPlaylistLoader_.main.playlists.length&&this.mainPlaylistLoader_.main.playlists.forEach(n=>{const i=n&&n.attributes&&n.attributes.RESOLUTION&&n.attributes.RESOLUTION.height<720,s=n.excludeUntil===1/0&&n.lastExcludeReason_===t;i&&s&&(delete n.excludeUntil,Se.log.warn(`enabling non-HD playlist ${n.id} because all playlists were excluded due to ${t} key IDs`))})}addKeyStatus_(e,t){const s=(typeof e=="string"?e:Rfe(e)).slice(0,32).toLowerCase();this.logger_(`KeyStatus '${t}' with key ID ${s} added to the keyStatusMap`),this.keyStatusMap_.set(s,t)}updatePlaylistByKeyStatus(e,t){this.addKeyStatus_(e,t),this.waitingForFastQualityPlaylistReceived_||this.excludeNonUsableThenChangePlaylist_(),this.mainPlaylistLoader_.off("loadedplaylist",this.excludeNonUsableThenChangePlaylist_.bind(this)),this.mainPlaylistLoader_.on("loadedplaylist",this.excludeNonUsableThenChangePlaylist_.bind(this))}excludeNonUsableThenChangePlaylist_(){this.excludeNonUsablePlaylistsByKeyId_(),this.fastQualityChange_()}};const spe=(r,e,t)=>n=>{const i=r.main.playlists[e],s=xA(i),a=VS(i);if(typeof n>"u")return a;n?delete i.disabled:i.disabled=!0;const o={renditionInfo:{id:e,bandwidth:i.attributes.BANDWIDTH,resolution:i.attributes.RESOLUTION,codecs:i.attributes.CODECS},cause:"fast-quality"};return n!==a&&!s&&(t(i),n?r.trigger({type:"renditionenabled",metadata:o}):r.trigger({type:"renditiondisabled",metadata:o})),n};let ape=class{constructor(e,t,n){const{playlistController_:i}=e,s=i.fastQualityChange_.bind(i);if(t.attributes){const a=t.attributes.RESOLUTION;this.width=a&&a.width,this.height=a&&a.height,this.bandwidth=t.attributes.BANDWIDTH,this.frameRate=t.attributes["FRAME-RATE"]}this.codecs=ug(i.main(),t),this.playlist=t,this.id=n,this.enabled=spe(e.playlists,t.id,s)}};const ope=function(r){r.representations=()=>{const e=r.playlistController_.main(),t=bv(e)?r.playlistController_.getAudioTrackPlaylists_():e.playlists;return t?t.filter(n=>!xA(n)).map((n,i)=>new ape(r,n,n.id)):[]}},FM=["seeking","seeked","pause","playing","error"];let lpe=class extends Se.EventTarget{constructor(e){super(),this.playlistController_=e.playlistController,this.tech_=e.tech,this.seekable=e.seekable,this.allowSeeksWithinUnsafeLiveWindow=e.allowSeeksWithinUnsafeLiveWindow,this.liveRangeSafeTimeDelta=e.liveRangeSafeTimeDelta,this.media=e.media,this.playedRanges_=[],this.consecutiveUpdates=0,this.lastRecordedTime=null,this.checkCurrentTimeTimeout_=null,this.logger_=ul("PlaybackWatcher"),this.logger_("initialize");const t=()=>this.monitorCurrentTime_(),n=()=>this.monitorCurrentTime_(),i=()=>this.techWaiting_(),s=()=>this.resetTimeUpdate_(),a=this.playlistController_,o=["main","subtitle","audio"],l={};o.forEach(c=>{l[c]={reset:()=>this.resetSegmentDownloads_(c),updateend:()=>this.checkSegmentDownloads_(c)},a[`${c}SegmentLoader_`].on("appendsdone",l[c].updateend),a[`${c}SegmentLoader_`].on("playlistupdate",l[c].reset),this.tech_.on(["seeked","seeking"],l[c].reset)});const u=c=>{["main","audio"].forEach(h=>{a[`${h}SegmentLoader_`][c]("appended",this.seekingAppendCheck_)})};this.seekingAppendCheck_=()=>{this.fixesBadSeeks_()&&(this.consecutiveUpdates=0,this.lastRecordedTime=this.tech_.currentTime(),u("off"))},this.clearSeekingAppendCheck_=()=>u("off"),this.watchForBadSeeking_=()=>{this.clearSeekingAppendCheck_(),u("on")},this.tech_.on("seeked",this.clearSeekingAppendCheck_),this.tech_.on("seeking",this.watchForBadSeeking_),this.tech_.on("waiting",i),this.tech_.on(FM,s),this.tech_.on("canplay",n),this.tech_.one("play",t),this.dispose=()=>{this.clearSeekingAppendCheck_(),this.logger_("dispose"),this.tech_.off("waiting",i),this.tech_.off(FM,s),this.tech_.off("canplay",n),this.tech_.off("play",t),this.tech_.off("seeking",this.watchForBadSeeking_),this.tech_.off("seeked",this.clearSeekingAppendCheck_),o.forEach(c=>{a[`${c}SegmentLoader_`].off("appendsdone",l[c].updateend),a[`${c}SegmentLoader_`].off("playlistupdate",l[c].reset),this.tech_.off(["seeked","seeking"],l[c].reset)}),this.checkCurrentTimeTimeout_&&X.clearTimeout(this.checkCurrentTimeTimeout_),this.resetTimeUpdate_()}}monitorCurrentTime_(){this.checkCurrentTime_(),this.checkCurrentTimeTimeout_&&X.clearTimeout(this.checkCurrentTimeTimeout_),this.checkCurrentTimeTimeout_=X.setTimeout(this.monitorCurrentTime_.bind(this),250)}resetSegmentDownloads_(e){const t=this.playlistController_[`${e}SegmentLoader_`];this[`${e}StalledDownloads_`]>0&&this.logger_(`resetting possible stalled download count for ${e} loader`),this[`${e}StalledDownloads_`]=0,this[`${e}Buffered_`]=t.buffered_()}checkSegmentDownloads_(e){const t=this.playlistController_,n=t[`${e}SegmentLoader_`],i=n.buffered_(),s=Kde(this[`${e}Buffered_`],i);if(this[`${e}Buffered_`]=i,s){const a={bufferedRanges:i};t.trigger({type:"bufferedrangeschanged",metadata:a}),this.resetSegmentDownloads_(e);return}this[`${e}StalledDownloads_`]++,this.logger_(`found #${this[`${e}StalledDownloads_`]} ${e} appends that did not increase buffer (possible stalled download)`,{playlistId:n.playlist_&&n.playlist_.id,buffered:Vh(i)}),!(this[`${e}StalledDownloads_`]<10)&&(this.logger_(`${e} loader stalled download exclusion`),this.resetSegmentDownloads_(e),this.tech_.trigger({type:"usage",name:`vhs-${e}-download-exclusion`}),e!=="subtitle"&&t.excludePlaylist({error:{message:`Excessive ${e} segment downloading detected.`},playlistExclusionDuration:1/0}))}checkCurrentTime_(){if(this.tech_.paused()||this.tech_.seeking())return;const e=this.tech_.currentTime(),t=this.tech_.buffered();if(this.lastRecordedTime===e&&(!t.length||e+bu>=t.end(t.length-1)))return this.techWaiting_();if(this.consecutiveUpdates>=5&&e===this.lastRecordedTime)this.consecutiveUpdates++,this.waiting_();else if(e===this.lastRecordedTime)this.consecutiveUpdates++;else{this.playedRanges_.push(xs([this.lastRecordedTime,e]));const n={playedRanges:this.playedRanges_};this.playlistController_.trigger({type:"playedrangeschanged",metadata:n}),this.consecutiveUpdates=0,this.lastRecordedTime=e}}resetTimeUpdate_(){this.consecutiveUpdates=0}fixesBadSeeks_(){if(!this.tech_.seeking())return!1;const t=this.seekable(),n=this.tech_.currentTime(),i=this.afterSeekableWindow_(t,n,this.media(),this.allowSeeksWithinUnsafeLiveWindow);let s;if(i&&(s=t.end(t.length-1)),this.beforeSeekableWindow_(t,n)){const v=t.start(0);s=v+(v===t.end(0)?0:bu)}if(typeof s<"u")return this.logger_(`Trying to seek outside of seekable at time ${n} with seekable range ${pU(t)}. Seeking to ${s}.`),this.tech_.setCurrentTime(s),!0;const a=this.playlistController_.sourceUpdater_,o=this.tech_.buffered(),l=a.audioBuffer?a.audioBuffered():null,u=a.videoBuffer?a.videoBuffered():null,c=this.media(),h=c.partTargetDuration?c.partTargetDuration:(c.targetDuration-_u)*2,f=[l,u];for(let v=0;v<f.length;v++){if(!f[v])continue;if(vA(f[v],n)<h)return!1}const g=Hy(o,n);return g.length===0?!1:(s=g.start(0)+bu,this.logger_(`Buffered region starts (${g.start(0)})  just beyond seek point (${n}). Seeking to ${s}.`),this.tech_.setCurrentTime(s),!0)}waiting_(){if(this.techWaiting_())return;const e=this.tech_.currentTime(),t=this.tech_.buffered(),n=hp(t,e);if(n.length&&e+3<=n.end(0)){this.resetTimeUpdate_(),this.tech_.setCurrentTime(e),this.logger_(`Stopped at ${e} while inside a buffered region [${n.start(0)} -> ${n.end(0)}]. Attempting to resume playback by seeking to the current time.`),this.tech_.trigger({type:"usage",name:"vhs-unknown-waiting"});return}}techWaiting_(){const e=this.seekable(),t=this.tech_.currentTime();if(this.tech_.seeking())return!0;if(this.beforeSeekableWindow_(e,t)){const o=e.end(e.length-1);return this.logger_(`Fell out of live window at time ${t}. Seeking to live point (seekable end) ${o}`),this.resetTimeUpdate_(),this.tech_.setCurrentTime(o),this.tech_.trigger({type:"usage",name:"vhs-live-resync"}),!0}const n=this.tech_.vhs.playlistController_.sourceUpdater_,i=this.tech_.buffered();if(this.videoUnderflow_({audioBuffered:n.audioBuffered(),videoBuffered:n.videoBuffered(),currentTime:t}))return this.resetTimeUpdate_(),this.tech_.setCurrentTime(t),this.tech_.trigger({type:"usage",name:"vhs-video-underflow"}),!0;const a=Hy(i,t);return a.length>0?(this.logger_(`Stopped at ${t} and seeking to ${a.start(0)}`),this.resetTimeUpdate_(),this.skipTheGap_(t),!0):!1}afterSeekableWindow_(e,t,n,i=!1){if(!e.length)return!1;let s=e.end(e.length-1)+bu;const a=!n.endList,o=typeof n.partTargetDuration=="number";return a&&(o||i)&&(s=e.end(e.length-1)+n.targetDuration*3),t>s}beforeSeekableWindow_(e,t){return!!(e.length&&e.start(0)>0&&t<e.start(0)-this.liveRangeSafeTimeDelta)}videoUnderflow_({videoBuffered:e,audioBuffered:t,currentTime:n}){if(!e)return;let i;if(e.length&&t.length){const s=hp(e,n-3),a=hp(e,n),o=hp(t,n);o.length&&!a.length&&s.length&&(i={start:s.end(0),end:o.end(0)})}else Hy(e,n).length||(i=this.gapFromVideoUnderflow_(e,n));return i?(this.logger_(`Encountered a gap in video from ${i.start} to ${i.end}. Seeking to current time ${n}`),!0):!1}skipTheGap_(e){const t=this.tech_.buffered(),n=this.tech_.currentTime(),i=Hy(t,n);if(this.resetTimeUpdate_(),i.length===0||n!==e)return;this.logger_("skipTheGap_:","currentTime:",n,"scheduled currentTime:",e,"nextRange start:",i.start(0)),this.tech_.setCurrentTime(i.start(0)+_u);const s={gapInfo:{from:n,to:i.start(0)}};this.playlistController_.trigger({type:"gapjumped",metadata:s}),this.tech_.trigger({type:"usage",name:"vhs-gap-skip"})}gapFromVideoUnderflow_(e,t){const n=Wde(e);for(let i=0;i<n.length;i++){const s=n.start(i),a=n.end(i);if(t-s<4&&t-s>2)return{start:s,end:a}}return null}};const upe={errorInterval:30,getSource(r){const t=this.tech({IWillNotUseThisInPlugins:!0}).currentSource_||this.currentSource();return r(t)}},n$=function(r,e){let t=0,n=0;const i=An(upe,e);r.ready(()=>{r.trigger({type:"usage",name:"vhs-error-reload-initialized"})});const s=function(){n&&r.currentTime(n)},a=function(c){c!=null&&(n=r.duration()!==1/0&&r.currentTime()||0,r.one("loadedmetadata",s),r.src(c),r.trigger({type:"usage",name:"vhs-error-reload"}),r.play())},o=function(){if(Date.now()-t<i.errorInterval*1e3){r.trigger({type:"usage",name:"vhs-error-reload-canceled"});return}if(!i.getSource||typeof i.getSource!="function"){Se.log.error("ERROR: reloadSourceOnError - The option getSource must be a function!");return}return t=Date.now(),i.getSource.call(r,a)},l=function(){r.off("loadedmetadata",s),r.off("error",o),r.off("dispose",l)},u=function(c){l(),n$(r,c)};r.on("error",o),r.on("dispose",l),r.reloadSourceOnError=u},cpe=function(r){n$(this,r)};var i$="3.15.0",dpe="7.0.3",hpe="1.3.1",fpe="7.2.0",ppe="4.0.2";const ri={PlaylistLoader:fp,Playlist:Oa,utils:yhe,STANDARD_PLAYLIST_SELECTOR:CM,INITIAL_PLAYLIST_SELECTOR:afe,lastBandwidthSelector:CM,movingAverageBandwidthSelector:ife,comparePlaylistBandwidth:SA,comparePlaylistResolution:nfe,xhr:PU()};Object.keys(Ji).forEach(r=>{Object.defineProperty(ri,r,{get(){return Se.log.warn(`using Vhs.${r} is UNSAFE be sure you know what you are doing`),Ji[r]},set(e){if(Se.log.warn(`using Vhs.${r} is UNSAFE be sure you know what you are doing`),typeof e!="number"||e<0){Se.log.warn(`value of Vhs.${r} must be greater than or equal to 0`);return}Ji[r]=e}})});const s$="videojs-vhs",a$=function(r,e){const t=e.media();let n=-1;for(let i=0;i<r.length;i++)if(r[i].id===t.id){n=i;break}r.selectedIndex_=n,r.trigger({selectedIndex:n,type:"change"})},mpe=function(r,e){e.representations().forEach(t=>{r.addQualityLevel(t)}),a$(r,e.playlists)};ri.canPlaySource=function(){return Se.log.warn("VHS is no longer a tech. Please remove it from your player's techOrder.")};const gpe=(r,e,t)=>{if(!r)return r;let n={};e&&e.attributes&&e.attributes.CODECS&&(n=ob(Ni(e.attributes.CODECS))),t&&t.attributes&&t.attributes.CODECS&&(n.audio=t.attributes.CODECS);const i=Nu(n.video),s=Nu(n.audio),a={};for(const o in r)a[o]={},s&&(a[o].audioContentType=s),i&&(a[o].videoContentType=i),e.contentProtection&&e.contentProtection[o]&&e.contentProtection[o].pssh&&(a[o].pssh=e.contentProtection[o].pssh),typeof r[o]=="string"&&(a[o].url=r[o]);return An(r,a)},vpe=(r,e)=>r.reduce((t,n)=>{if(!n.contentProtection)return t;const i=e.reduce((s,a)=>{const o=n.contentProtection[a];return o&&o.pssh&&(s[a]={pssh:o.pssh}),s},{});return Object.keys(i).length&&t.push(i),t},[]),ype=({player:r,sourceKeySystems:e,audioMedia:t,mainPlaylists:n})=>{if(!r.eme.initializeMediaKeys)return Promise.resolve();const i=t?n.concat([t]):n,s=vpe(i,Object.keys(e)),a=[],o=[];return s.forEach(l=>{o.push(new Promise((u,c)=>{r.tech_.one("keysessioncreated",u)})),a.push(new Promise((u,c)=>{r.eme.initializeMediaKeys({keySystems:l},h=>{if(h){c(h);return}u()})}))}),Promise.race([Promise.all(a),Promise.race(o)])},xpe=({player:r,sourceKeySystems:e,media:t,audioMedia:n})=>{const i=gpe(e,t,n);return i?(r.currentSource().keySystems=i,i&&!r.eme?(Se.log.warn("DRM encrypted source cannot be decrypted without a DRM plugin"),!1):!0):!1},o$=()=>{if(!X.localStorage)return null;const r=X.localStorage.getItem(s$);if(!r)return null;try{return JSON.parse(r)}catch{return null}},_pe=r=>{if(!X.localStorage)return!1;let e=o$();e=e?An(e,r):r;try{X.localStorage.setItem(s$,JSON.stringify(e))}catch{return!1}return e},bpe=r=>r.toLowerCase().indexOf("data:application/vnd.videojs.vhs+json,")===0?JSON.parse(r.substring(r.indexOf(",")+1)):r,l$=(r,e)=>{r._requestCallbackSet||(r._requestCallbackSet=new Set),r._requestCallbackSet.add(e)},u$=(r,e)=>{r._responseCallbackSet||(r._responseCallbackSet=new Set),r._responseCallbackSet.add(e)},c$=(r,e)=>{r._requestCallbackSet&&(r._requestCallbackSet.delete(e),r._requestCallbackSet.size||delete r._requestCallbackSet)},d$=(r,e)=>{r._responseCallbackSet&&(r._responseCallbackSet.delete(e),r._responseCallbackSet.size||delete r._responseCallbackSet)};ri.supportsNativeHls=(function(){if(!Be||!Be.createElement)return!1;const r=Be.createElement("video");return Se.getTech("Html5").isSupported()?["application/vnd.apple.mpegurl","audio/mpegurl","audio/x-mpegurl","application/x-mpegurl","video/x-mpegurl","video/mpegurl","application/mpegurl"].some(function(t){return/maybe|probably/i.test(r.canPlayType(t))}):!1})();ri.supportsNativeDash=(function(){return!Be||!Be.createElement||!Se.getTech("Html5").isSupported()?!1:/maybe|probably/i.test(Be.createElement("video").canPlayType("application/dash+xml"))})();ri.supportsTypeNatively=r=>r==="hls"?ri.supportsNativeHls:r==="dash"?ri.supportsNativeDash:!1;ri.isSupported=function(){return Se.log.warn("VHS is no longer a tech. Please remove it from your player's techOrder.")};ri.xhr.onRequest=function(r){l$(ri.xhr,r)};ri.xhr.onResponse=function(r){u$(ri.xhr,r)};ri.xhr.offRequest=function(r){c$(ri.xhr,r)};ri.xhr.offResponse=function(r){d$(ri.xhr,r)};const Spe=Se.getComponent("Component");let h$=class extends Spe{constructor(e,t,n){if(super(t,n.vhs),typeof n.initialBandwidth=="number"&&(this.options_.bandwidth=n.initialBandwidth),this.logger_=ul("VhsHandler"),t.options_&&t.options_.playerId){const i=Se.getPlayer(t.options_.playerId);this.player_=i}if(this.tech_=t,this.source_=e,this.stats={},this.ignoreNextSeekingEvent_=!1,this.setOptions_(),this.options_.overrideNative&&t.overrideNativeAudioTracks&&t.overrideNativeVideoTracks)t.overrideNativeAudioTracks(!0),t.overrideNativeVideoTracks(!0);else if(this.options_.overrideNative&&(t.featuresNativeVideoTracks||t.featuresNativeAudioTracks))throw new Error("Overriding native VHS requires emulated tracks. See https://git.io/vMpjB");this.on(Be,["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","MSFullscreenChange"],i=>{const s=Be.fullscreenElement||Be.webkitFullscreenElement||Be.mozFullScreenElement||Be.msFullscreenElement;s&&s.contains(this.tech_.el())?this.playlistController_.fastQualityChange_():this.playlistController_.checkABR_()}),this.on(this.tech_,"seeking",function(){if(this.ignoreNextSeekingEvent_){this.ignoreNextSeekingEvent_=!1;return}this.setCurrentTime(this.tech_.currentTime())}),this.on(this.tech_,"error",function(){this.tech_.error()&&this.playlistController_&&this.playlistController_.pauseLoading()}),this.on(this.tech_,"play",this.play)}setOptions_(e={}){if(this.options_=An(this.options_,e),this.options_.withCredentials=this.options_.withCredentials||!1,this.options_.limitRenditionByPlayerDimensions=this.options_.limitRenditionByPlayerDimensions!==!1,this.options_.useDevicePixelRatio=this.options_.useDevicePixelRatio||!1,this.options_.useBandwidthFromLocalStorage=typeof this.source_.useBandwidthFromLocalStorage<"u"?this.source_.useBandwidthFromLocalStorage:this.options_.useBandwidthFromLocalStorage||!1,this.options_.useForcedSubtitles=this.options_.useForcedSubtitles||!1,this.options_.useNetworkInformationApi=this.options_.useNetworkInformationApi||!1,this.options_.useDtsForTimestampOffset=this.options_.useDtsForTimestampOffset||!1,this.options_.customTagParsers=this.options_.customTagParsers||[],this.options_.customTagMappers=this.options_.customTagMappers||[],this.options_.cacheEncryptionKeys=this.options_.cacheEncryptionKeys||!1,this.options_.llhls=this.options_.llhls!==!1,this.options_.bufferBasedABR=this.options_.bufferBasedABR||!1,typeof this.options_.playlistExclusionDuration!="number"&&(this.options_.playlistExclusionDuration=60),typeof this.options_.bandwidth!="number"&&this.options_.useBandwidthFromLocalStorage){const n=o$();n&&n.bandwidth&&(this.options_.bandwidth=n.bandwidth,this.tech_.trigger({type:"usage",name:"vhs-bandwidth-from-local-storage"})),n&&n.throughput&&(this.options_.throughput=n.throughput,this.tech_.trigger({type:"usage",name:"vhs-throughput-from-local-storage"}))}typeof this.options_.bandwidth!="number"&&(this.options_.bandwidth=Ji.INITIAL_BANDWIDTH),this.options_.enableLowInitialPlaylist=this.options_.enableLowInitialPlaylist&&this.options_.bandwidth===Ji.INITIAL_BANDWIDTH,["withCredentials","useDevicePixelRatio","customPixelRatio","limitRenditionByPlayerDimensions","bandwidth","customTagParsers","customTagMappers","cacheEncryptionKeys","playlistSelector","initialPlaylistSelector","bufferBasedABR","liveRangeSafeTimeDelta","llhls","useForcedSubtitles","useNetworkInformationApi","useDtsForTimestampOffset","exactManifestTimings","leastPixelDiffSelector"].forEach(n=>{typeof this.source_[n]<"u"&&(this.options_[n]=this.source_[n])}),this.limitRenditionByPlayerDimensions=this.options_.limitRenditionByPlayerDimensions,this.useDevicePixelRatio=this.options_.useDevicePixelRatio;const t=this.options_.customPixelRatio;typeof t=="number"&&t>=0&&(this.customPixelRatio=t)}setOptions(e={}){this.setOptions_(e)}src(e,t){if(!e)return;this.setOptions_(),this.options_.src=bpe(this.source_.src),this.options_.tech=this.tech_,this.options_.externVhs=ri,this.options_.sourceType=ES(t),this.options_.seekTo=s=>{this.tech_.setCurrentTime(s)},this.options_.player_=this.player_,this.playlistController_=new ipe(this.options_);const n=An({liveRangeSafeTimeDelta:bu},this.options_,{seekable:()=>this.seekable(),media:()=>this.playlistController_.media(),playlistController:this.playlistController_});this.playbackWatcher_=new lpe(n),this.attachStreamingEventListeners_(),this.playlistController_.on("error",()=>{const s=Se.players[this.tech_.options_.playerId];let a=this.playlistController_.error;typeof a=="object"&&!a.code?a.code=3:typeof a=="string"&&(a={message:a,code:3}),s.error(a)});const i=this.options_.bufferBasedABR?ri.movingAverageBandwidthSelector(.55):ri.STANDARD_PLAYLIST_SELECTOR;this.playlistController_.selectPlaylist=this.selectPlaylist?this.selectPlaylist.bind(this):i.bind(this),this.playlistController_.selectInitialPlaylist=ri.INITIAL_PLAYLIST_SELECTOR.bind(this),this.playlists=this.playlistController_.mainPlaylistLoader_,this.mediaSource=this.playlistController_.mediaSource,Object.defineProperties(this,{selectPlaylist:{get(){return this.playlistController_.selectPlaylist},set(s){this.playlistController_.selectPlaylist=s.bind(this)}},throughput:{get(){return this.playlistController_.mainSegmentLoader_.throughput.rate},set(s){this.playlistController_.mainSegmentLoader_.throughput.rate=s,this.playlistController_.mainSegmentLoader_.throughput.count=1}},bandwidth:{get(){let s=this.playlistController_.mainSegmentLoader_.bandwidth;const a=X.navigator.connection||X.navigator.mozConnection||X.navigator.webkitConnection,o=1e7;if(this.options_.useNetworkInformationApi&&a){const l=a.downlink*1e3*1e3;l>=o&&s>=o?s=Math.max(s,l):s=l}return s},set(s){this.playlistController_.mainSegmentLoader_.bandwidth=s,this.playlistController_.mainSegmentLoader_.throughput={rate:0,count:0}}},systemBandwidth:{get(){const s=1/(this.bandwidth||1);let a;return this.throughput>0?a=1/this.throughput:a=0,Math.floor(1/(s+a))},set(){Se.log.error('The "systemBandwidth" property is read-only')}}}),this.options_.bandwidth&&(this.bandwidth=this.options_.bandwidth),this.options_.throughput&&(this.throughput=this.options_.throughput),Object.defineProperties(this.stats,{bandwidth:{get:()=>this.bandwidth||0,enumerable:!0},mediaRequests:{get:()=>this.playlistController_.mediaRequests_()||0,enumerable:!0},mediaRequestsAborted:{get:()=>this.playlistController_.mediaRequestsAborted_()||0,enumerable:!0},mediaRequestsTimedout:{get:()=>this.playlistController_.mediaRequestsTimedout_()||0,enumerable:!0},mediaRequestsErrored:{get:()=>this.playlistController_.mediaRequestsErrored_()||0,enumerable:!0},mediaTransferDuration:{get:()=>this.playlistController_.mediaTransferDuration_()||0,enumerable:!0},mediaBytesTransferred:{get:()=>this.playlistController_.mediaBytesTransferred_()||0,enumerable:!0},mediaSecondsLoaded:{get:()=>this.playlistController_.mediaSecondsLoaded_()||0,enumerable:!0},mediaAppends:{get:()=>this.playlistController_.mediaAppends_()||0,enumerable:!0},mainAppendsToLoadedData:{get:()=>this.playlistController_.mainAppendsToLoadedData_()||0,enumerable:!0},audioAppendsToLoadedData:{get:()=>this.playlistController_.audioAppendsToLoadedData_()||0,enumerable:!0},appendsToLoadedData:{get:()=>this.playlistController_.appendsToLoadedData_()||0,enumerable:!0},timeToLoadedData:{get:()=>this.playlistController_.timeToLoadedData_()||0,enumerable:!0},buffered:{get:()=>Vh(this.tech_.buffered()),enumerable:!0},currentTime:{get:()=>this.tech_.currentTime(),enumerable:!0},currentSource:{get:()=>this.tech_.currentSource_,enumerable:!0},currentTech:{get:()=>this.tech_.name_,enumerable:!0},duration:{get:()=>this.tech_.duration(),enumerable:!0},main:{get:()=>this.playlists.main,enumerable:!0},playerDimensions:{get:()=>this.tech_.currentDimensions(),enumerable:!0},seekable:{get:()=>Vh(this.tech_.seekable()),enumerable:!0},timestamp:{get:()=>Date.now(),enumerable:!0},videoPlaybackQuality:{get:()=>this.tech_.getVideoPlaybackQuality(),enumerable:!0}}),this.tech_.one("canplay",this.playlistController_.setupFirstPlay.bind(this.playlistController_)),this.tech_.on("bandwidthupdate",()=>{this.options_.useBandwidthFromLocalStorage&&_pe({bandwidth:this.bandwidth,throughput:Math.round(this.throughput)})}),this.playlistController_.on("selectedinitialmedia",()=>{ope(this)}),this.playlistController_.sourceUpdater_.on("createdsourcebuffers",()=>{this.setupEme_()}),this.on(this.playlistController_,"progress",function(){this.tech_.trigger("progress")}),this.on(this.playlistController_,"firstplay",function(){this.ignoreNextSeekingEvent_=!0}),this.setupQualityLevels_(),this.tech_.el()&&(this.mediaSourceUrl_=X.URL.createObjectURL(this.playlistController_.mediaSource),(Se.browser.IS_ANY_SAFARI||Se.browser.IS_IOS)&&this.options_.overrideNative&&this.options_.sourceType==="hls"&&typeof this.tech_.addSourceElement=="function"?(this.tech_.addSourceElement(this.mediaSourceUrl_),this.tech_.addSourceElement(this.source_.src)):this.tech_.src(this.mediaSourceUrl_))}createKeySessions_(){const e=this.playlistController_.mediaTypes_.AUDIO.activePlaylistLoader;this.logger_("waiting for EME key session creation"),ype({player:this.player_,sourceKeySystems:this.source_.keySystems,audioMedia:e&&e.media(),mainPlaylists:this.playlists.main.playlists}).then(()=>{this.logger_("created EME key session"),this.playlistController_.sourceUpdater_.initializedEme()}).catch(t=>{this.logger_("error while creating EME key session",t),this.player_.error({message:"Failed to initialize media keys for EME",code:3})})}handleWaitingForKey_(){this.logger_("waitingforkey fired, attempting to create any new key sessions"),this.createKeySessions_()}setupEme_(){const e=this.playlistController_.mediaTypes_.AUDIO.activePlaylistLoader,t=xpe({player:this.player_,sourceKeySystems:this.source_.keySystems,media:this.playlists.media(),audioMedia:e&&e.media()});if(this.player_.tech_.on("keystatuschange",n=>{this.playlistController_.updatePlaylistByKeyStatus(n.keyId,n.status)}),this.handleWaitingForKey_=this.handleWaitingForKey_.bind(this),this.player_.tech_.on("waitingforkey",this.handleWaitingForKey_),!t){this.playlistController_.sourceUpdater_.initializedEme();return}this.createKeySessions_()}setupQualityLevels_(){const e=Se.players[this.tech_.options_.playerId];!e||!e.qualityLevels||this.qualityLevels_||(this.qualityLevels_=e.qualityLevels(),this.playlistController_.on("selectedinitialmedia",()=>{mpe(this.qualityLevels_,this)}),this.playlists.on("mediachange",()=>{a$(this.qualityLevels_,this.playlists)}))}static version(){return{"@videojs/http-streaming":i$,"mux.js":dpe,"mpd-parser":hpe,"m3u8-parser":fpe,"aes-decrypter":ppe}}version(){return this.constructor.version()}canChangeType(){return ZU.canChangeType()}play(){this.playlistController_.play()}setCurrentTime(e){this.playlistController_.setCurrentTime(e)}duration(){return this.playlistController_.duration()}seekable(){return this.playlistController_.seekable()}dispose(){this.playbackWatcher_&&this.playbackWatcher_.dispose(),this.playlistController_&&this.playlistController_.dispose(),this.qualityLevels_&&this.qualityLevels_.dispose(),this.tech_&&this.tech_.vhs&&delete this.tech_.vhs,this.mediaSourceUrl_&&X.URL.revokeObjectURL&&(X.URL.revokeObjectURL(this.mediaSourceUrl_),this.mediaSourceUrl_=null),this.tech_&&this.tech_.off("waitingforkey",this.handleWaitingForKey_),super.dispose()}convertToProgramTime(e,t){return whe({playlist:this.playlistController_.media(),time:e,callback:t})}seekToProgramTime(e,t,n=!0,i=2){return FU({programTime:e,playlist:this.playlistController_.media(),retryCount:i,pauseAfterSeek:n,seekTo:this.options_.seekTo,tech:this.options_.tech,callback:t})}setupXhrHooks_(){this.xhr.onRequest=e=>{l$(this.xhr,e)},this.xhr.onResponse=e=>{u$(this.xhr,e)},this.xhr.offRequest=e=>{c$(this.xhr,e)},this.xhr.offResponse=e=>{d$(this.xhr,e)},this.player_.trigger("xhr-hooks-ready")}attachStreamingEventListeners_(){const e=["seekablerangeschanged","bufferedrangeschanged","contentsteeringloadstart","contentsteeringloadcomplete","contentsteeringparsed"],t=["gapjumped","playedrangeschanged"];e.forEach(n=>{this.playlistController_.on(n,i=>{this.player_.trigger(sr({},i))})}),t.forEach(n=>{this.playbackWatcher_.on(n,i=>{this.player_.trigger(sr({},i))})})}};const cb={name:"videojs-http-streaming",VERSION:i$,canHandleSource(r,e={}){const t=An(Se.options,e);return!t.vhs.experimentalUseMMS&&!Lu("avc1.4d400d,mp4a.40.2",!1)?!1:cb.canPlayType(r.type,t)},handleSource(r,e,t={}){const n=An(Se.options,t);return e.vhs=new h$(r,e,n),e.vhs.xhr=PU(),e.vhs.setupXhrHooks_(),e.vhs.src(r.src,r.type),e.vhs},canPlayType(r,e){const t=ES(r);if(!t)return"";const n=cb.getOverrideNative(e);return!ri.supportsTypeNatively(t)||n?"maybe":""},getOverrideNative(r={}){const{vhs:e={}}=r,t=!(Se.browser.IS_ANY_SAFARI||Se.browser.IS_IOS),{overrideNative:n=t}=e;return n}},Tpe=()=>Lu("avc1.4d400d,mp4a.40.2",!0);Tpe()&&Se.getTech("Html5").registerSourceHandler(cb,0);Se.VhsHandler=h$;Se.VhsSourceHandler=cb;Se.Vhs=ri;Se.use||Se.registerComponent("Vhs",ri);Se.options.vhs=Se.options.vhs||{};(!Se.getPlugin||!Se.getPlugin("reloadSourceOnError"))&&Se.registerPlugin("reloadSourceOnError",cpe);/*! @name @videojs/http-streaming @version 3.15.0 @license Apache-2.0 */const La=pv,db=(r,e)=>e&&e.responseURL&&r!==e.responseURL?e.responseURL:r,cl=r=>Se.log.debug?Se.log.debug.bind(Se,"VHS:",`${r} >`):function(){};function Dn(...r){const e=Se.obj||Se;return(e.merge||e.mergeOptions).apply(e,r)}function _s(...r){const e=Se.time||Se;return(e.createTimeRanges||e.createTimeRanges).apply(e,r)}function Cpe(r){if(r.length===0)return"Buffered Ranges are empty";let e=`Buffered Ranges: 
`;for(let t=0;t<r.length;t++){const n=r.start(t),i=r.end(t);e+=`${n} --> ${i}. Duration (${i-n})
`}return e}const Tu=1/30,Cu=Tu*3,f$=function(r,e){const t=[];let n;if(r&&r.length)for(n=0;n<r.length;n++)e(r.start(n),r.end(n))&&t.push([r.start(n),r.end(n)]);return _s(t)},pp=function(r,e){return f$(r,function(t,n){return t-Cu<=e&&n+Cu>=e})},qy=function(r,e){return f$(r,function(t){return t-Tu>=e})},wpe=function(r){if(r.length<2)return _s();const e=[];for(let t=1;t<r.length;t++){const n=r.end(t-1),i=r.start(t);e.push([n,i])}return _s(e)},Epe=function(r,e){let t=null,n=null,i=0;const s=[],a=[];if(!r||!r.length||!e||!e.length)return _s();let o=r.length;for(;o--;)s.push({time:r.start(o),type:"start"}),s.push({time:r.end(o),type:"end"});for(o=e.length;o--;)s.push({time:e.start(o),type:"start"}),s.push({time:e.end(o),type:"end"});for(s.sort(function(l,u){return l.time-u.time}),o=0;o<s.length;o++)s[o].type==="start"?(i++,i===2&&(t=s[o].time)):s[o].type==="end"&&(i--,i===1&&(n=s[o].time)),t!==null&&n!==null&&(a.push([t,n]),t=null,n=null);return _s(a)},p$=r=>{const e=[];if(!r||!r.length)return"";for(let t=0;t<r.length;t++)e.push(r.start(t)+" => "+r.end(t));return e.join(", ")},kpe=function(r,e,t=1){return((r.length?r.end(r.length-1):0)-e)/t},Wh=r=>{const e=[];for(let t=0;t<r.length;t++)e.push({start:r.start(t),end:r.end(t)});return e},Ape=function(r,e){if(r===e)return!1;if(!r&&e||!e&&r||r.length!==e.length)return!0;for(let t=0;t<r.length;t++)if(r.start(t)!==e.start(t)||r.end(t)!==e.end(t))return!0;return!1},UC=function(r){if(!(!r||!r.length||!r.end))return r.end(r.length-1)},TA=function(r,e){let t=0;if(!r||!r.length)return t;for(let n=0;n<r.length;n++){const i=r.start(n),s=r.end(n);if(!(e>s)){if(e>i&&e<=s){t+=s-e;continue}t+=s-i}}return t},CA=(r,e)=>{if(!e.preload)return e.duration;let t=0;return(e.parts||[]).forEach(function(n){t+=n.duration}),(e.preloadHints||[]).forEach(function(n){n.type==="PART"&&(t+=r.partTargetDuration)}),t},$2=r=>(r.segments||[]).reduce((e,t,n)=>(t.parts?t.parts.forEach(function(i,s){e.push({duration:i.duration,segmentIndex:n,partIndex:s,part:i,segment:t})}):e.push({duration:t.duration,segmentIndex:n,partIndex:null,segment:t,part:null}),e),[]),m$=r=>{const e=r.segments&&r.segments.length&&r.segments[r.segments.length-1];return e&&e.parts||[]},g$=({preloadSegment:r})=>{if(!r)return;const{parts:e,preloadHints:t}=r;let n=(t||[]).reduce((i,s)=>i+(s.type==="PART"?1:0),0);return n+=e&&e.length?e.length:0,n},v$=(r,e)=>{if(e.endList)return 0;if(r&&r.suggestedPresentationDelay)return r.suggestedPresentationDelay;const t=m$(e).length>0;return t&&e.serverControl&&e.serverControl.partHoldBack?e.serverControl.partHoldBack:t&&e.partTargetDuration?e.partTargetDuration*3:e.serverControl&&e.serverControl.holdBack?e.serverControl.holdBack:e.targetDuration?e.targetDuration*3:0},Dpe=function(r,e){let t=0,n=e-r.mediaSequence,i=r.segments[n];if(i){if(typeof i.start<"u")return{result:i.start,precise:!0};if(typeof i.end<"u")return{result:i.end-i.duration,precise:!0}}for(;n--;){if(i=r.segments[n],typeof i.end<"u")return{result:t+i.end,precise:!0};if(t+=CA(r,i),typeof i.start<"u")return{result:t+i.start,precise:!0}}return{result:t,precise:!1}},Ipe=function(r,e){let t=0,n,i=e-r.mediaSequence;for(;i<r.segments.length;i++){if(n=r.segments[i],typeof n.start<"u")return{result:n.start-t,precise:!0};if(t+=CA(r,n),typeof n.end<"u")return{result:n.end-t,precise:!0}}return{result:-1,precise:!1}},y$=function(r,e,t){if(typeof e>"u"&&(e=r.mediaSequence+r.segments.length),e<r.mediaSequence)return 0;const n=Dpe(r,e);if(n.precise)return n.result;const i=Ipe(r,e);return i.precise?i.result:n.result+t},x$=function(r,e,t){if(!r)return 0;if(typeof t!="number"&&(t=0),typeof e>"u"){if(r.totalDuration)return r.totalDuration;if(!r.endList)return X.Infinity}return y$(r,e,t)},cg=function({defaultDuration:r,durationList:e,startIndex:t,endIndex:n}){let i=0;if(t>n&&([t,n]=[n,t]),t<0){for(let s=t;s<Math.min(0,n);s++)i+=r;t=0}for(let s=t;s<n;s++)i+=e[s].duration;return i},_$=function(r,e,t,n){if(!r||!r.segments)return null;if(r.endList)return x$(r);if(e===null)return null;e=e||0;let i=y$(r,r.mediaSequence+r.segments.length,e);return t&&(n=typeof n=="number"?n:v$(null,r),i-=n),Math.max(0,i)},Ppe=function(r,e,t){const i=e||0;let s=_$(r,e,!0,t);return s===null?_s():(s<i&&(s=i),_s(i,s))},Rpe=function({playlist:r,currentTime:e,startingSegmentIndex:t,startingPartIndex:n,startTime:i,exactManifestTimings:s}){let a=e-i;const o=$2(r);let l=0;for(let u=0;u<o.length;u++){const c=o[u];if(t===c.segmentIndex&&!(typeof n=="number"&&typeof c.partIndex=="number"&&n!==c.partIndex)){l=u;break}}if(a<0){if(l>0)for(let u=l-1;u>=0;u--){const c=o[u];if(a+=c.duration,s){if(a<0)continue}else if(a+Tu<=0)continue;return{partIndex:c.partIndex,segmentIndex:c.segmentIndex,startTime:i-cg({defaultDuration:r.targetDuration,durationList:o,startIndex:l,endIndex:u})}}return{partIndex:o[0]&&o[0].partIndex||null,segmentIndex:o[0]&&o[0].segmentIndex||0,startTime:e}}if(l<0){for(let u=l;u<0;u++)if(a-=r.targetDuration,a<0)return{partIndex:o[0]&&o[0].partIndex||null,segmentIndex:o[0]&&o[0].segmentIndex||0,startTime:e};l=0}for(let u=l;u<o.length;u++){const c=o[u];a-=c.duration;const h=c.duration>Tu,f=a===0,g=h&&a+Tu>=0;if(!((f||g)&&u!==o.length-1)){if(s){if(a>0)continue}else if(a-Tu>=0)continue;return{partIndex:c.partIndex,segmentIndex:c.segmentIndex,startTime:i+cg({defaultDuration:r.targetDuration,durationList:o,startIndex:l,endIndex:u})}}}return{segmentIndex:o[o.length-1].segmentIndex,partIndex:o[o.length-1].partIndex,startTime:e}},b$=function(r){return r.excludeUntil&&r.excludeUntil>Date.now()},wA=function(r){return r.excludeUntil&&r.excludeUntil===1/0},WS=function(r){const e=b$(r);return!r.disabled&&!e},Lpe=function(r){return r.disabled},Ope=function(r){for(let e=0;e<r.segments.length;e++)if(r.segments[e].key)return!0;return!1},S$=function(r,e){return e.attributes&&e.attributes[r]},Mpe=function(r,e,t,n=0){return S$("BANDWIDTH",t)?(r*t.attributes.BANDWIDTH-n*8)/e:NaN},j2=(r,e)=>{if(r.playlists.length===1)return!0;const t=e.attributes.BANDWIDTH||Number.MAX_VALUE;return r.playlists.filter(n=>WS(n)?(n.attributes.BANDWIDTH||0)<t:!1).length===0},EA=(r,e)=>!r&&!e||!r&&e||r&&!e?!1:!!(r===e||r.id&&e.id&&r.id===e.id||r.resolvedUri&&e.resolvedUri&&r.resolvedUri===e.resolvedUri||r.uri&&e.uri&&r.uri===e.uri),BM=function(r,e){const t=r&&r.mediaGroups&&r.mediaGroups.AUDIO||{};let n=!1;for(const i in t){for(const s in t[i])if(n=e(t[i][s]),n)break;if(n)break}return!!n},Sv=r=>{if(!r||!r.playlists||!r.playlists.length)return BM(r,t=>t.playlists&&t.playlists.length||t.uri);for(let e=0;e<r.playlists.length;e++){const t=r.playlists[e],n=t.attributes&&t.attributes.CODECS;if(!(n&&n.split(",").every(s=>Uk(s))||BM(r,s=>EA(t,s))))return!1}return!0};var Ma={liveEdgeDelay:v$,duration:x$,seekable:Ppe,getMediaInfoForTime:Rpe,isEnabled:WS,isDisabled:Lpe,isExcluded:b$,isIncompatible:wA,playlistEnd:_$,isAes:Ope,hasAttribute:S$,estimateSegmentRequestTime:Mpe,isLowestEnabledRendition:j2,isAudioOnly:Sv,playlistMatch:EA,segmentDurationWithParts:CA};const{log:T$}=Se,Op=(r,e)=>`${r}-${e}`,C$=(r,e,t)=>`placeholder-uri-${r}-${e}-${t}`,Fpe=({onwarn:r,oninfo:e,manifestString:t,customTagParsers:n=[],customTagMappers:i=[],llhls:s})=>{const a=new D5;r&&a.on("warn",r),e&&a.on("info",e),n.forEach(u=>a.addParser(u)),i.forEach(u=>a.addTagMapper(u)),a.push(t),a.end();const o=a.manifest;if(s||(["preloadSegment","skip","serverControl","renditionReports","partInf","partTargetDuration"].forEach(function(u){o.hasOwnProperty(u)&&delete o[u]}),o.segments&&o.segments.forEach(function(u){["parts","preloadHints"].forEach(function(c){u.hasOwnProperty(c)&&delete u[c]})})),!o.targetDuration){let u=10;o.segments&&o.segments.length&&(u=o.segments.reduce((c,h)=>Math.max(c,h.duration),0)),r&&r({message:`manifest has no targetDuration defaulting to ${u}`}),o.targetDuration=u}const l=m$(o);if(l.length&&!o.partTargetDuration){const u=l.reduce((c,h)=>Math.max(c,h.duration),0);r&&(r({message:`manifest has no partTargetDuration defaulting to ${u}`}),T$.error("LL-HLS manifest has parts but lacks required #EXT-X-PART-INF:PART-TARGET value. See https://datatracker.ietf.org/doc/html/draft-pantos-hls-rfc8216bis-09#section-4.4.3.7. Playback is not guaranteed.")),o.partTargetDuration=u}return o},Lm=(r,e)=>{r.mediaGroups&&["AUDIO","SUBTITLES"].forEach(t=>{if(r.mediaGroups[t])for(const n in r.mediaGroups[t])for(const i in r.mediaGroups[t][n]){const s=r.mediaGroups[t][n][i];e(s,t,n,i)}})},w$=({playlist:r,uri:e,id:t})=>{r.id=t,r.playlistErrors_=0,e&&(r.uri=e),r.attributes=r.attributes||{}},Bpe=r=>{let e=r.playlists.length;for(;e--;){const t=r.playlists[e];w$({playlist:t,id:Op(e,t.uri)}),t.resolvedUri=La(r.uri,t.uri),r.playlists[t.id]=t,r.playlists[t.uri]=t,t.attributes.BANDWIDTH||T$.warn("Invalid playlist STREAM-INF detected. Missing BANDWIDTH attribute.")}},Npe=r=>{Lm(r,e=>{e.uri&&(e.resolvedUri=La(r.uri,e.uri))})},Upe=(r,e)=>{const t=Op(0,e),n={mediaGroups:{AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},uri:X.location.href,resolvedUri:X.location.href,playlists:[{uri:e,id:t,resolvedUri:e,attributes:{}}]};return n.playlists[t]=n.playlists[0],n.playlists[e]=n.playlists[0],n},E$=(r,e,t=C$)=>{r.uri=e;for(let i=0;i<r.playlists.length;i++)if(!r.playlists[i].uri){const s=`placeholder-uri-${i}`;r.playlists[i].uri=s}const n=Sv(r);Lm(r,(i,s,a,o)=>{if(!i.playlists||!i.playlists.length){if(n&&s==="AUDIO"&&!i.uri)for(let l=0;l<r.playlists.length;l++){const u=r.playlists[l];if(u.attributes&&u.attributes.AUDIO&&u.attributes.AUDIO===a)return}i.playlists=[sr({},i)]}i.playlists.forEach(function(l,u){const c=t(s,a,o,l),h=Op(u,c);l.uri?l.resolvedUri=l.resolvedUri||La(r.uri,l.uri):(l.uri=u===0?c:h,l.resolvedUri=l.uri),l.id=l.id||h,l.attributes=l.attributes||{},r.playlists[l.id]=l,r.playlists[l.uri]=l})}),Bpe(r),Npe(r)};class NM{constructor(){this.offset_=null,this.pendingDateRanges_=new Map,this.processedDateRanges_=new Map}setOffset(e=[]){if(this.offset_!==null||!e.length)return;const[t]=e;t.programDateTime!==void 0&&(this.offset_=t.programDateTime/1e3)}setPendingDateRanges(e=[]){if(!e.length)return;const[t]=e,n=t.startDate.getTime();this.trimProcessedDateRanges_(n),this.pendingDateRanges_=e.reduce((i,s)=>(i.set(s.id,s),i),new Map)}processDateRange(e){this.pendingDateRanges_.delete(e.id),this.processedDateRanges_.set(e.id,e)}getDateRangesToProcess(){if(this.offset_===null)return[];const e={},t=[];this.pendingDateRanges_.forEach((n,i)=>{if(!this.processedDateRanges_.has(i)&&(n.startTime=n.startDate.getTime()/1e3-this.offset_,n.processDateRange=()=>this.processDateRange(n),t.push(n),!!n.class))if(e[n.class]){const s=e[n.class].push(n);n.classListIndex=s-1}else e[n.class]=[n],n.classListIndex=0});for(const n of t){const i=e[n.class]||[];n.endDate?n.endTime=n.endDate.getTime()/1e3-this.offset_:n.endOnNext&&i[n.classListIndex+1]?n.endTime=i[n.classListIndex+1].startTime:n.duration?n.endTime=n.startTime+n.duration:n.plannedDuration?n.endTime=n.startTime+n.plannedDuration:n.endTime=n.startTime}return t}trimProcessedDateRanges_(e){new Map(this.processedDateRanges_).forEach((n,i)=>{n.startDate.getTime()<e&&this.processedDateRanges_.delete(i)})}}const k$=22,rf=({requestType:r,request:e,error:t,parseFailure:n})=>{const i=e.status<200||e.status>299,s=e.status>=400&&e.status<=499,a={uri:e.uri,requestType:r},o=i&&!s||n;if(t&&s)a.error=sr({},t),a.errorType=Se.Error.NetworkRequestFailed;else if(e.aborted)a.errorType=Se.Error.NetworkRequestAborted;else if(e.timedout)a.erroType=Se.Error.NetworkRequestTimeout;else if(o){const l=n?Se.Error.NetworkBodyParserFailed:Se.Error.NetworkBadStatus;a.errorType=l,a.status=e.status,a.headers=e.headers}return a},{EventTarget:$pe}=Se,jpe=(r,e)=>{if(e.endList||!e.serverControl)return r;const t={};if(e.serverControl.canBlockReload){const{preloadSegment:n}=e;let i=e.mediaSequence+e.segments.length;if(n){const s=n.parts||[],a=g$(e)-1;a>-1&&a!==s.length-1&&(t._HLS_part=a),(a>-1||s.length)&&i--}t._HLS_msn=i}if(e.serverControl&&e.serverControl.canSkipUntil&&(t._HLS_skip=e.serverControl.canSkipDateranges?"v2":"YES"),Object.keys(t).length){const n=new X.URL(r);["_HLS_skip","_HLS_msn","_HLS_part"].forEach(function(i){t.hasOwnProperty(i)&&n.searchParams.set(i,t[i])}),r=n.toString()}return r},zpe=(r,e)=>{if(!r)return e;const t=Dn(r,e);if(r.preloadHints&&!e.preloadHints&&delete t.preloadHints,r.parts&&!e.parts)delete t.parts;else if(r.parts&&e.parts)for(let n=0;n<e.parts.length;n++)r.parts&&r.parts[n]&&(t.parts[n]=Dn(r.parts[n],e.parts[n]));return!r.skipped&&e.skipped&&(t.skipped=!1),r.preload&&!e.preload&&(t.preload=!1),t},Hpe=(r,e,t)=>{const n=r.slice(),i=e.slice();t=t||0;const s=[];let a;for(let o=0;o<i.length;o++){const l=n[o+t],u=i[o];l?(a=l.map||a,s.push(zpe(l,u))):(a&&!u.map&&(u.map=a),s.push(u))}return s},A$=(r,e)=>{!r.resolvedUri&&r.uri&&(r.resolvedUri=La(e,r.uri)),r.key&&!r.key.resolvedUri&&(r.key.resolvedUri=La(e,r.key.uri)),r.map&&!r.map.resolvedUri&&(r.map.resolvedUri=La(e,r.map.uri)),r.map&&r.map.key&&!r.map.key.resolvedUri&&(r.map.key.resolvedUri=La(e,r.map.key.uri)),r.parts&&r.parts.length&&r.parts.forEach(t=>{t.resolvedUri||(t.resolvedUri=La(e,t.uri))}),r.preloadHints&&r.preloadHints.length&&r.preloadHints.forEach(t=>{t.resolvedUri||(t.resolvedUri=La(e,t.uri))})},D$=function(r){const e=r.segments||[],t=r.preloadSegment;if(t&&t.parts&&t.parts.length){if(t.preloadHints){for(let n=0;n<t.preloadHints.length;n++)if(t.preloadHints[n].type==="MAP")return e}t.duration=r.targetDuration,t.preload=!0,e.push(t)}return e},I$=(r,e)=>r===e||r.segments&&e.segments&&r.segments.length===e.segments.length&&r.endList===e.endList&&r.mediaSequence===e.mediaSequence&&r.preloadSegment===e.preloadSegment,z2=(r,e,t=I$)=>{const n=Dn(r,{}),i=n.playlists[e.id];if(!i||t(i,e))return null;e.segments=D$(e);const s=Dn(i,e);if(s.preloadSegment&&!e.preloadSegment&&delete s.preloadSegment,i.segments){if(e.skip){e.segments=e.segments||[];for(let a=0;a<e.skip.skippedSegments;a++)e.segments.unshift({skipped:!0})}s.segments=Hpe(i.segments,e.segments,e.mediaSequence-i.mediaSequence)}s.segments.forEach(a=>{A$(a,s.resolvedUri)});for(let a=0;a<n.playlists.length;a++)n.playlists[a].id===e.id&&(n.playlists[a]=s);return n.playlists[e.id]=s,n.playlists[e.uri]=s,Lm(r,(a,o,l,u)=>{if(a.playlists)for(let c=0;c<a.playlists.length;c++)e.id===a.playlists[c].id&&(a.playlists[c]=s)}),n},H2=(r,e)=>{const t=r.segments||[],n=t[t.length-1],i=n&&n.parts&&n.parts[n.parts.length-1],s=i&&i.duration||n&&n.duration;return e&&s?s*1e3:(r.partTargetDuration||r.targetDuration||10)*500},UM=(r,e,t)=>{if(!r)return;const n=[];return r.forEach(i=>{if(!i.attributes)return;const{BANDWIDTH:s,RESOLUTION:a,CODECS:o}=i.attributes;n.push({id:i.id,bandwidth:s,resolution:a,codecs:o})}),{type:e,isLive:t,renditions:n}};let mp=class extends $pe{constructor(e,t,n={}){if(super(),!e)throw new Error("A non-empty playlist URL or object is required");this.logger_=cl("PlaylistLoader");const{withCredentials:i=!1}=n;this.src=e,this.vhs_=t,this.withCredentials=i,this.addDateRangesToTextTrack_=n.addDateRangesToTextTrack;const s=t.options_;this.customTagParsers=s&&s.customTagParsers||[],this.customTagMappers=s&&s.customTagMappers||[],this.llhls=s&&s.llhls,this.dateRangesStorage_=new NM,this.state="HAVE_NOTHING",this.handleMediaupdatetimeout_=this.handleMediaupdatetimeout_.bind(this),this.on("mediaupdatetimeout",this.handleMediaupdatetimeout_),this.on("loadedplaylist",this.handleLoadedPlaylist_.bind(this))}handleLoadedPlaylist_(){const e=this.media();if(!e)return;this.dateRangesStorage_.setOffset(e.segments),this.dateRangesStorage_.setPendingDateRanges(e.dateRanges);const t=this.dateRangesStorage_.getDateRangesToProcess();!t.length||!this.addDateRangesToTextTrack_||this.addDateRangesToTextTrack_(t)}handleMediaupdatetimeout_(){if(this.state!=="HAVE_METADATA")return;const e=this.media();let t=La(this.main.uri,e.uri);this.llhls&&(t=jpe(t,e)),this.state="HAVE_CURRENT_METADATA",this.request=this.vhs_.xhr({uri:t,withCredentials:this.withCredentials,requestType:"hls-playlist"},(n,i)=>{if(this.request){if(n)return this.playlistRequestError(this.request,this.media(),"HAVE_METADATA");this.haveMetadata({playlistString:this.request.responseText,url:this.media().uri,id:this.media().id})}})}playlistRequestError(e,t,n){const{uri:i,id:s}=t;this.request=null,n&&(this.state=n),this.error={playlist:this.main.playlists[s],status:e.status,message:`HLS playlist request error at URL: ${i}.`,responseText:e.responseText,code:e.status>=500?4:2,metadata:rf({requestType:e.requestType,request:e,error:e.error})},this.trigger("error")}parseManifest_({url:e,manifestString:t}){try{return Fpe({onwarn:({message:n})=>this.logger_(`m3u8-parser warn for ${e}: ${n}`),oninfo:({message:n})=>this.logger_(`m3u8-parser info for ${e}: ${n}`),manifestString:t,customTagParsers:this.customTagParsers,customTagMappers:this.customTagMappers,llhls:this.llhls})}catch(n){this.error=n,this.error.metadata={errorType:Se.Error.StreamingHlsPlaylistParserError,error:n}}}haveMetadata({playlistString:e,playlistObject:t,url:n,id:i}){this.request=null,this.state="HAVE_METADATA";const s={playlistInfo:{type:"media",uri:n}};this.trigger({type:"playlistparsestart",metadata:s});const a=t||this.parseManifest_({url:n,manifestString:e});a.lastRequest=Date.now(),w$({playlist:a,uri:n,id:i});const o=z2(this.main,a);this.targetDuration=a.partTargetDuration||a.targetDuration,this.pendingMedia_=null,o?(this.main=o,this.media_=this.main.playlists[i]):this.trigger("playlistunchanged"),this.updateMediaUpdateTimeout_(H2(this.media(),!!o)),s.parsedPlaylist=UM(this.main.playlists,s.playlistInfo.type,!this.media_.endList),this.trigger({type:"playlistparsecomplete",metadata:s}),this.trigger("loadedplaylist")}dispose(){this.trigger("dispose"),this.stopRequest(),X.clearTimeout(this.mediaUpdateTimeout),X.clearTimeout(this.finalRenditionTimeout),this.dateRangesStorage_=new NM,this.off()}stopRequest(){if(this.request){const e=this.request;this.request=null,e.onreadystatechange=null,e.abort()}}media(e,t){if(!e)return this.media_;if(this.state==="HAVE_NOTHING")throw new Error("Cannot switch media playlist from "+this.state);if(typeof e=="string"){if(!this.main.playlists[e])throw new Error("Unknown playlist URI: "+e);e=this.main.playlists[e]}if(X.clearTimeout(this.finalRenditionTimeout),t){const o=(e.partTargetDuration||e.targetDuration)/2*1e3||5e3;this.finalRenditionTimeout=X.setTimeout(this.media.bind(this,e,!1),o);return}const n=this.state,i=!this.media_||e.id!==this.media_.id,s=this.main.playlists[e.id];if(s&&s.endList||e.endList&&e.segments.length){this.request&&(this.request.onreadystatechange=null,this.request.abort(),this.request=null),this.state="HAVE_METADATA",this.media_=e,i&&(this.trigger("mediachanging"),n==="HAVE_MAIN_MANIFEST"?this.trigger("loadedmetadata"):this.trigger("mediachange"));return}if(this.updateMediaUpdateTimeout_(H2(e,!0)),!i)return;if(this.state="SWITCHING_MEDIA",this.request){if(e.resolvedUri===this.request.url)return;this.request.onreadystatechange=null,this.request.abort(),this.request=null}this.media_&&this.trigger("mediachanging"),this.pendingMedia_=e;const a={playlistInfo:{type:"media",uri:e.uri}};this.trigger({type:"playlistrequeststart",metadata:a}),this.request=this.vhs_.xhr({uri:e.resolvedUri,withCredentials:this.withCredentials,requestType:"hls-playlist"},(o,l)=>{if(this.request){if(e.lastRequest=Date.now(),e.resolvedUri=db(e.resolvedUri,l),o)return this.playlistRequestError(this.request,e,n);this.trigger({type:"playlistrequestcomplete",metadata:a}),this.haveMetadata({playlistString:l.responseText,url:e.uri,id:e.id}),n==="HAVE_MAIN_MANIFEST"?this.trigger("loadedmetadata"):this.trigger("mediachange")}})}pause(){this.mediaUpdateTimeout&&(X.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null),this.stopRequest(),this.state==="HAVE_NOTHING"&&(this.started=!1),this.state==="SWITCHING_MEDIA"?this.media_?this.state="HAVE_METADATA":this.state="HAVE_MAIN_MANIFEST":this.state==="HAVE_CURRENT_METADATA"&&(this.state="HAVE_METADATA")}load(e){this.mediaUpdateTimeout&&(X.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null);const t=this.media();if(e){const n=t?(t.partTargetDuration||t.targetDuration)/2*1e3:5e3;this.mediaUpdateTimeout=X.setTimeout(()=>{this.mediaUpdateTimeout=null,this.load()},n);return}if(!this.started){this.start();return}t&&!t.endList?this.trigger("mediaupdatetimeout"):this.trigger("loadedplaylist")}updateMediaUpdateTimeout_(e){this.mediaUpdateTimeout&&(X.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null),!(!this.media()||this.media().endList)&&(this.mediaUpdateTimeout=X.setTimeout(()=>{this.mediaUpdateTimeout=null,this.trigger("mediaupdatetimeout"),this.updateMediaUpdateTimeout_(e)},e))}start(){if(this.started=!0,typeof this.src=="object"){this.src.uri||(this.src.uri=X.location.href),this.src.resolvedUri=this.src.uri,setTimeout(()=>{this.setupInitialPlaylist(this.src)},0);return}const e={playlistInfo:{type:"multivariant",uri:this.src}};this.trigger({type:"playlistrequeststart",metadata:e}),this.request=this.vhs_.xhr({uri:this.src,withCredentials:this.withCredentials,requestType:"hls-playlist"},(t,n)=>{if(!this.request)return;if(this.request=null,t)return this.error={status:n.status,message:`HLS playlist request error at URL: ${this.src}.`,responseText:n.responseText,code:2,metadata:rf({requestType:n.requestType,request:n,error:t})},this.state==="HAVE_NOTHING"&&(this.started=!1),this.trigger("error");this.trigger({type:"playlistrequestcomplete",metadata:e}),this.src=db(this.src,n),this.trigger({type:"playlistparsestart",metadata:e});const i=this.parseManifest_({manifestString:n.responseText,url:this.src});e.parsedPlaylist=UM(i.playlists,e.playlistInfo.type,!1),this.trigger({type:"playlistparsecomplete",metadata:e}),this.setupInitialPlaylist(i)})}srcUri(){return typeof this.src=="string"?this.src:this.src.uri}setupInitialPlaylist(e){if(this.state="HAVE_MAIN_MANIFEST",e.playlists){this.main=e,E$(this.main,this.srcUri()),e.playlists.forEach(n=>{n.segments=D$(n),n.segments.forEach(i=>{A$(i,n.resolvedUri)})}),this.trigger("loadedplaylist"),this.request||this.media(this.main.playlists[0]);return}const t=this.srcUri()||X.location.href;this.main=Upe(e,t),this.haveMetadata({playlistObject:e,url:t,id:this.main.playlists[0].id}),this.trigger("loadedmetadata")}updateOrDeleteClone(e,t){const n=this.main,i=e.ID;let s=n.playlists.length;for(;s--;){const a=n.playlists[s];if(a.attributes["PATHWAY-ID"]===i){const o=a.resolvedUri,l=a.id;if(t){const u=this.createCloneURI_(a.resolvedUri,e),c=Op(i,u),h=this.createCloneAttributes_(i,a.attributes),f=this.createClonePlaylist_(a,c,e,h);n.playlists[s]=f,n.playlists[c]=f,n.playlists[u]=f}else n.playlists.splice(s,1);delete n.playlists[l],delete n.playlists[o]}}this.updateOrDeleteCloneMedia(e,t)}updateOrDeleteCloneMedia(e,t){const n=this.main,i=e.ID;["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(s=>{if(!(!n.mediaGroups[s]||!n.mediaGroups[s][i])){for(const a in n.mediaGroups[s])if(a===i){for(const o in n.mediaGroups[s][a])n.mediaGroups[s][a][o].playlists.forEach((u,c)=>{const h=n.playlists[u.id],f=h.id,g=h.resolvedUri;delete n.playlists[f],delete n.playlists[g]});delete n.mediaGroups[s][a]}}}),t&&this.createClonedMediaGroups_(e)}addClonePathway(e,t={}){const n=this.main,i=n.playlists.length,s=this.createCloneURI_(t.resolvedUri,e),a=Op(e.ID,s),o=this.createCloneAttributes_(e.ID,t.attributes),l=this.createClonePlaylist_(t,a,e,o);n.playlists[i]=l,n.playlists[a]=l,n.playlists[s]=l,this.createClonedMediaGroups_(e)}createClonedMediaGroups_(e){const t=e.ID,n=e["BASE-ID"],i=this.main;["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(s=>{if(!(!i.mediaGroups[s]||i.mediaGroups[s][t]))for(const a in i.mediaGroups[s]){if(a===n)i.mediaGroups[s][t]={};else continue;for(const o in i.mediaGroups[s][a]){const l=i.mediaGroups[s][a][o];i.mediaGroups[s][t][o]=sr({},l);const u=i.mediaGroups[s][t][o],c=this.createCloneURI_(l.resolvedUri,e);u.resolvedUri=c,u.uri=c,u.playlists=[],l.playlists.forEach((h,f)=>{const g=i.playlists[h.id],v=C$(s,t,o),y=Op(t,v);if(g&&!i.playlists[y]){const _=this.createClonePlaylist_(g,y,e),C=_.resolvedUri;i.playlists[y]=_,i.playlists[C]=_}u.playlists[f]=this.createClonePlaylist_(h,y,e)})}}})}createClonePlaylist_(e,t,n,i){const s=this.createCloneURI_(e.resolvedUri,n),a={resolvedUri:s,uri:s,id:t};return e.segments&&(a.segments=[]),i&&(a.attributes=i),Dn(e,a)}createCloneURI_(e,t){const n=new URL(e);n.hostname=t["URI-REPLACEMENT"].HOST;const i=t["URI-REPLACEMENT"].PARAMS;for(const s of Object.keys(i))n.searchParams.set(s,i[s]);return n.href}createCloneAttributes_(e,t){const n={"PATHWAY-ID":e};return["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(i=>{t[i]&&(n[i]=e)}),n}getKeyIdSet(e){if(e.contentProtection){const t=new Set;for(const n in e.contentProtection){const i=e.contentProtection[n].attributes.keyId;i&&t.add(i.toLowerCase())}return t}}};const V2=function(r,e,t,n){const i=r.responseType==="arraybuffer"?r.response:r.responseText;!e&&i&&(r.responseTime=Date.now(),r.roundTripTime=r.responseTime-r.requestTime,r.bytesReceived=i.byteLength||i.length,r.bandwidth||(r.bandwidth=Math.floor(r.bytesReceived/r.roundTripTime*8*1e3))),t.headers&&(r.responseHeaders=t.headers),e&&e.code==="ETIMEDOUT"&&(r.timedout=!0),!e&&!r.aborted&&t.statusCode!==200&&t.statusCode!==206&&t.statusCode!==0&&(e=new Error("XHR Failed with a response of: "+(r&&(i||r.responseText)))),n(e,r)},Vpe=(r,e)=>{if(!r||!r.size)return;let t=e;return r.forEach(n=>{t=n(t)}),t},Wpe=(r,e,t,n)=>{!r||!r.size||r.forEach(i=>{i(e,t,n)})},P$=function(){const r=function e(t,n){t=Dn({timeout:45e3},t);const i=e.beforeRequest||Se.Vhs.xhr.beforeRequest,s=e._requestCallbackSet||Se.Vhs.xhr._requestCallbackSet||new Set,a=e._responseCallbackSet||Se.Vhs.xhr._responseCallbackSet;i&&typeof i=="function"&&(Se.log.warn("beforeRequest is deprecated, use onRequest instead."),s.add(i));const o=Se.Vhs.xhr.original===!0?Se.xhr:Se.Vhs.xhr,l=Vpe(s,t);s.delete(i);const u=o(l||t,function(h,f){return Wpe(a,u,h,f),V2(u,h,f,n)}),c=u.abort;return u.abort=function(){return u.aborted=!0,c.apply(u,arguments)},u.uri=t.uri,u.requestType=t.requestType,u.requestTime=Date.now(),u};return r.original=!0,r},qpe=function(r){let e;const t=r.offset;return typeof r.offset=="bigint"||typeof r.length=="bigint"?e=X.BigInt(r.offset)+X.BigInt(r.length)-X.BigInt(1):e=r.offset+r.length-1,"bytes="+t+"-"+e},W2=function(r){const e={};return r.byterange&&(e.Range=qpe(r.byterange)),e},Gpe=function(r,e){return r.start(e)+"-"+r.end(e)},Kpe=function(r,e){const t=r.toString(16);return"00".substring(0,2-t.length)+t+(e%2?" ":"")},Xpe=function(r){return r>=32&&r<126?String.fromCharCode(r):"."},R$=function(r){const e={};return Object.keys(r).forEach(t=>{const n=r[t];$k(n)?e[t]={bytes:n.buffer,byteOffset:n.byteOffset,byteLength:n.byteLength}:e[t]=n}),e},hb=function(r){const e=r.byterange||{length:1/0,offset:0};return[e.length,e.offset,r.resolvedUri].join(",")},L$=function(r){return r.resolvedUri},O$=r=>{const e=Array.prototype.slice.call(r),t=16;let n="",i,s;for(let a=0;a<e.length/t;a++)i=e.slice(a*t,a*t+t).map(Kpe).join(""),s=e.slice(a*t,a*t+t).map(Xpe).join(""),n+=i+" "+s+`
`;return n},Ype=({bytes:r})=>O$(r),Qpe=r=>{let e="",t;for(t=0;t<r.length;t++)e+=Gpe(r,t)+" ";return e};var Jpe=Object.freeze({__proto__:null,createTransferableMessage:R$,initSegmentId:hb,segmentKeyId:L$,hexDump:O$,tagDump:Ype,textRanges:Qpe});const M$=.25,Zpe=(r,e)=>{if(!e.dateTimeObject)return null;const t=e.videoTimingInfo.transmuxerPrependedSeconds,i=e.videoTimingInfo.transmuxedPresentationStart+t,s=r-i;return new Date(e.dateTimeObject.getTime()+s*1e3)},eme=r=>r.transmuxedPresentationEnd-r.transmuxedPresentationStart-r.transmuxerPrependedSeconds,tme=(r,e)=>{let t;try{t=new Date(r)}catch{return null}if(!e||!e.segments||e.segments.length===0)return null;let n=e.segments[0];if(t<new Date(n.dateTimeObject))return null;for(let l=0;l<e.segments.length-1;l++){n=e.segments[l];const u=new Date(e.segments[l+1].dateTimeObject);if(t<u)break}const i=e.segments[e.segments.length-1],s=i.dateTimeObject,a=i.videoTimingInfo?eme(i.videoTimingInfo):i.duration+i.duration*M$,o=new Date(s.getTime()+a*1e3);return t>o?null:(t>new Date(s)&&(n=i),{segment:n,estimatedStart:n.videoTimingInfo?n.videoTimingInfo.transmuxedPresentationStart:Ma.duration(e,e.mediaSequence+e.segments.indexOf(n)),type:n.videoTimingInfo?"accurate":"estimate"})},rme=(r,e)=>{if(!e||!e.segments||e.segments.length===0)return null;let t=0,n;for(let s=0;s<e.segments.length&&(n=e.segments[s],t=n.videoTimingInfo?n.videoTimingInfo.transmuxedPresentationEnd:t+n.duration,!(r<=t));s++);const i=e.segments[e.segments.length-1];if(i.videoTimingInfo&&i.videoTimingInfo.transmuxedPresentationEnd<r)return null;if(r>t){if(r>t+i.duration*M$)return null;n=i}return{segment:n,estimatedStart:n.videoTimingInfo?n.videoTimingInfo.transmuxedPresentationStart:t-n.duration,type:n.videoTimingInfo?"accurate":"estimate"}},nme=(r,e)=>{let t,n;try{t=new Date(r),n=new Date(e)}catch{}const i=t.getTime();return(n.getTime()-i)/1e3},ime=r=>{if(!r.segments||r.segments.length===0)return!1;for(let e=0;e<r.segments.length;e++)if(!r.segments[e].dateTimeObject)return!1;return!0},sme=({playlist:r,time:e=void 0,callback:t})=>{if(!t)throw new Error("getProgramTime: callback must be provided");if(!r||e===void 0)return t({message:"getProgramTime: playlist and time must be provided"});const n=rme(e,r);if(!n)return t({message:"valid programTime was not found"});if(n.type==="estimate")return t({message:"Accurate programTime could not be determined. Please seek to e.seekTime and try again",seekTime:n.estimatedStart});const i={mediaSeconds:e},s=Zpe(e,n.segment);return s&&(i.programDateTime=s.toISOString()),t(null,i)},F$=({programTime:r,playlist:e,retryCount:t=2,seekTo:n,pauseAfterSeek:i=!0,tech:s,callback:a})=>{if(!a)throw new Error("seekToProgramTime: callback must be provided");if(typeof r>"u"||!e||!n)return a({message:"seekToProgramTime: programTime, seekTo and playlist must be provided"});if(!e.endList&&!s.hasStarted_)return a({message:"player must be playing a live stream to start buffering"});if(!ime(e))return a({message:"programDateTime tags must be provided in the manifest "+e.resolvedUri});const o=tme(r,e);if(!o)return a({message:`${r} was not found in the stream`});const l=o.segment,u=nme(l.dateTimeObject,r);if(o.type==="estimate"){if(t===0)return a({message:`${r} is not buffered yet. Try again`});n(o.estimatedStart+u),s.one("seeked",()=>{F$({programTime:r,playlist:e,retryCount:t-1,seekTo:n,pauseAfterSeek:i,tech:s,callback:a})});return}const c=l.start+u,h=()=>a(null,s.currentTime());s.one("seeked",h),i&&s.pause(),n(c)},$C=(r,e)=>{if(r.readyState===4)return e()},ame=(r,e,t,n)=>{let i=[],s,a=!1;const o=function(h,f,g,v){return f.abort(),a=!0,t(h,f,g,v)},l=function(h,f){if(a)return;if(h)return h.metadata=rf({requestType:n,request:f,error:h}),o(h,f,"",i);const g=f.responseText.substring(i&&i.byteLength||0,f.responseText.length);if(i=R5(i,jk(g,!0)),s=s||cp(i),i.length<10||s&&i.length<s+2)return $C(f,()=>o(h,f,"",i));const v=Cm(i);return v==="ts"&&i.length<188?$C(f,()=>o(h,f,"",i)):!v&&i.length<376?$C(f,()=>o(h,f,"",i)):o(null,f,v,i)},c=e({uri:r,beforeSend(h){h.overrideMimeType("text/plain; charset=x-user-defined"),h.addEventListener("progress",function({total:f,loaded:g}){return V2(h,null,{statusCode:h.status},l)})}},function(h,f){return V2(c,h,f,l)});return c},{EventTarget:ome}=Se,$M=function(r,e){if(!I$(r,e)||r.sidx&&e.sidx&&(r.sidx.offset!==e.sidx.offset||r.sidx.length!==e.sidx.length))return!1;if(!r.sidx&&e.sidx||r.sidx&&!e.sidx||r.segments&&!e.segments||!r.segments&&e.segments)return!1;if(!r.segments&&!e.segments)return!0;for(let t=0;t<r.segments.length;t++){const n=r.segments[t],i=e.segments[t];if(n.uri!==i.uri)return!1;if(!n.byterange&&!i.byterange)continue;const s=n.byterange,a=i.byterange;if(s&&!a||!s&&a||s.offset!==a.offset||s.length!==a.length)return!1}return!0},lme=(r,e,t,n)=>{const i=n.attributes.NAME||t;return`placeholder-uri-${r}-${e}-${i}`},ume=({mainXml:r,srcUrl:e,clientOffset:t,sidxMapping:n,previousManifest:i})=>{const s=j5(r,{manifestUri:e,clientOffset:t,sidxMapping:n,previousManifest:i});return E$(s,e,lme),s},cme=(r,e)=>{Lm(r,(t,n,i,s)=>{(!e.mediaGroups[n][i]||!(s in e.mediaGroups[n][i]))&&delete r.mediaGroups[n][i][s]})},dme=(r,e,t)=>{let n=!0,i=Dn(r,{duration:e.duration,minimumUpdatePeriod:e.minimumUpdatePeriod,timelineStarts:e.timelineStarts});for(let s=0;s<e.playlists.length;s++){const a=e.playlists[s];if(a.sidx){const l=bf(a.sidx);t&&t[l]&&t[l].sidx&&mv(a,t[l].sidx,a.sidx.resolvedUri)}const o=z2(i,a,$M);o&&(i=o,n=!1)}return Lm(e,(s,a,o,l)=>{if(s.playlists&&s.playlists.length){const u=s.playlists[0].id,c=z2(i,s.playlists[0],$M);c&&(i=c,l in i.mediaGroups[a][o]||(i.mediaGroups[a][o][l]=s),i.mediaGroups[a][o][l].playlists[0]=i.playlists[u],n=!1)}}),cme(i,e),e.minimumUpdatePeriod!==r.minimumUpdatePeriod&&(n=!1),n?null:i},hme=(r,e)=>(!r.map&&!e.map||!!(r.map&&e.map&&r.map.byterange.offset===e.map.byterange.offset&&r.map.byterange.length===e.map.byterange.length))&&r.uri===e.uri&&r.byterange.offset===e.byterange.offset&&r.byterange.length===e.byterange.length,jM=(r,e)=>{const t={};for(const n in r){const s=r[n].sidx;if(s){const a=bf(s);if(!e[a])break;const o=e[a].sidxInfo;hme(o,s)&&(t[a]=e[a])}}return t},fme=(r,e)=>{let n=jM(r.playlists,e);return Lm(r,(i,s,a,o)=>{if(i.playlists&&i.playlists.length){const l=i.playlists;n=Dn(n,jM(l,e))}}),n};let q2=class extends ome{constructor(e,t,n={},i){super(),this.mainPlaylistLoader_=i||this,i||(this.isMain_=!0);const{withCredentials:s=!1}=n;if(this.vhs_=t,this.withCredentials=s,this.addMetadataToTextTrack=n.addMetadataToTextTrack,!e)throw new Error("A non-empty playlist URL or object is required");this.on("minimumUpdatePeriod",()=>{this.refreshXml_()}),this.on("mediaupdatetimeout",()=>{this.refreshMedia_(this.media().id)}),this.state="HAVE_NOTHING",this.loadedPlaylists_={},this.logger_=cl("DashPlaylistLoader"),this.isMain_?(this.mainPlaylistLoader_.srcUrl=e,this.mainPlaylistLoader_.sidxMapping_={}):this.childPlaylist_=e}requestErrored_(e,t,n){if(!this.request)return!0;if(this.request=null,e)return this.error=typeof e=="object"&&!(e instanceof Error)?e:{status:t.status,message:"DASH request error at URL: "+t.uri,response:t.response,code:2,metadata:e.metadata},n&&(this.state=n),this.trigger("error"),!0}addSidxSegments_(e,t,n){const i=e.sidx&&bf(e.sidx);if(!e.sidx||!i||this.mainPlaylistLoader_.sidxMapping_[i]){this.mediaRequest_=X.setTimeout(()=>n(!1),0);return}const s=db(e.sidx.resolvedUri),a=(l,u)=>{if(this.requestErrored_(l,u,t))return;const c=this.mainPlaylistLoader_.sidxMapping_,{requestType:h}=u;let f;try{f=H5(_r(u.response).subarray(8))}catch(g){g.metadata=rf({requestType:h,request:u,parseFailure:!0}),this.requestErrored_(g,u,t);return}return c[i]={sidxInfo:e.sidx,sidx:f},mv(e,f,e.sidx.resolvedUri),n(!0)},o="dash-sidx";this.request=ame(s,this.vhs_.xhr,(l,u,c,h)=>{if(l)return a(l,u);if(!c||c!=="mp4"){const v=c||"unknown";return a({status:u.status,message:`Unsupported ${v} container type for sidx segment at URL: ${s}`,response:"",playlist:e,internal:!0,playlistExclusionDuration:1/0,code:2},u)}const{offset:f,length:g}=e.sidx.byterange;if(h.length>=g+f)return a(l,{response:h.subarray(f,f+g),status:u.status,uri:u.uri});this.request=this.vhs_.xhr({uri:s,responseType:"arraybuffer",requestType:"dash-sidx",headers:W2({byterange:e.sidx.byterange})},a)},o)}dispose(){this.trigger("dispose"),this.stopRequest(),this.loadedPlaylists_={},X.clearTimeout(this.minimumUpdatePeriodTimeout_),X.clearTimeout(this.mediaRequest_),X.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null,this.mediaRequest_=null,this.minimumUpdatePeriodTimeout_=null,this.mainPlaylistLoader_.createMupOnMedia_&&(this.off("loadedmetadata",this.mainPlaylistLoader_.createMupOnMedia_),this.mainPlaylistLoader_.createMupOnMedia_=null),this.off()}hasPendingRequest(){return this.request||this.mediaRequest_}stopRequest(){if(this.request){const e=this.request;this.request=null,e.onreadystatechange=null,e.abort()}}media(e){if(!e)return this.media_;if(this.state==="HAVE_NOTHING")throw new Error("Cannot switch media playlist from "+this.state);const t=this.state;if(typeof e=="string"){if(!this.mainPlaylistLoader_.main.playlists[e])throw new Error("Unknown playlist URI: "+e);e=this.mainPlaylistLoader_.main.playlists[e]}const n=!this.media_||e.id!==this.media_.id;if(n&&this.loadedPlaylists_[e.id]&&this.loadedPlaylists_[e.id].endList){this.state="HAVE_METADATA",this.media_=e,n&&(this.trigger("mediachanging"),this.trigger("mediachange"));return}n&&(this.media_&&this.trigger("mediachanging"),this.addSidxSegments_(e,t,i=>{this.haveMetadata({startingState:t,playlist:e})}))}haveMetadata({startingState:e,playlist:t}){this.state="HAVE_METADATA",this.loadedPlaylists_[t.id]=t,this.mediaRequest_=null,this.refreshMedia_(t.id),e==="HAVE_MAIN_MANIFEST"?this.trigger("loadedmetadata"):this.trigger("mediachange")}pause(){this.mainPlaylistLoader_.createMupOnMedia_&&(this.off("loadedmetadata",this.mainPlaylistLoader_.createMupOnMedia_),this.mainPlaylistLoader_.createMupOnMedia_=null),this.stopRequest(),X.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null,this.isMain_&&(X.clearTimeout(this.mainPlaylistLoader_.minimumUpdatePeriodTimeout_),this.mainPlaylistLoader_.minimumUpdatePeriodTimeout_=null),this.state==="HAVE_NOTHING"&&(this.started=!1)}load(e){X.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null;const t=this.media();if(e){const n=t?t.targetDuration/2*1e3:5e3;this.mediaUpdateTimeout=X.setTimeout(()=>this.load(),n);return}if(!this.started){this.start();return}t&&!t.endList?(this.isMain_&&!this.minimumUpdatePeriodTimeout_&&(this.trigger("minimumUpdatePeriod"),this.updateMinimumUpdatePeriodTimeout_()),this.trigger("mediaupdatetimeout")):this.trigger("loadedplaylist")}start(){if(this.started=!0,!this.isMain_){this.mediaRequest_=X.setTimeout(()=>this.haveMain_(),0);return}this.requestMain_((e,t)=>{this.haveMain_(),!this.hasPendingRequest()&&!this.media_&&this.media(this.mainPlaylistLoader_.main.playlists[0])})}requestMain_(e){const t={manifestInfo:{uri:this.mainPlaylistLoader_.srcUrl}};this.trigger({type:"manifestrequeststart",metadata:t}),this.request=this.vhs_.xhr({uri:this.mainPlaylistLoader_.srcUrl,withCredentials:this.withCredentials,requestType:"dash-manifest"},(n,i)=>{if(n){const{requestType:a}=i;n.metadata=rf({requestType:a,request:i,error:n})}if(this.requestErrored_(n,i)){this.state==="HAVE_NOTHING"&&(this.started=!1);return}this.trigger({type:"manifestrequestcomplete",metadata:t});const s=i.responseText!==this.mainPlaylistLoader_.mainXml_;if(this.mainPlaylistLoader_.mainXml_=i.responseText,i.responseHeaders&&i.responseHeaders.date?this.mainLoaded_=Date.parse(i.responseHeaders.date):this.mainLoaded_=Date.now(),this.mainPlaylistLoader_.srcUrl=db(this.mainPlaylistLoader_.srcUrl,i),s){this.handleMain_(),this.syncClientServerClock_(()=>e(i,s));return}return e(i,s)})}syncClientServerClock_(e){const t=z5(this.mainPlaylistLoader_.mainXml_);if(t===null)return this.mainPlaylistLoader_.clientOffset_=this.mainLoaded_-Date.now(),e();if(t.method==="DIRECT")return this.mainPlaylistLoader_.clientOffset_=t.value-Date.now(),e();this.request=this.vhs_.xhr({uri:La(this.mainPlaylistLoader_.srcUrl,t.value),method:t.method,withCredentials:this.withCredentials,requestType:"dash-clock-sync"},(n,i)=>{if(!this.request)return;if(n){const{requestType:a}=i;return this.error.metadata=rf({requestType:a,request:i,error:n}),this.mainPlaylistLoader_.clientOffset_=this.mainLoaded_-Date.now(),e()}let s;t.method==="HEAD"?!i.responseHeaders||!i.responseHeaders.date?s=this.mainLoaded_:s=Date.parse(i.responseHeaders.date):s=Date.parse(i.responseText),this.mainPlaylistLoader_.clientOffset_=s-Date.now(),e()})}haveMain_(){this.state="HAVE_MAIN_MANIFEST",this.isMain_?this.trigger("loadedplaylist"):this.media_||this.media(this.childPlaylist_)}handleMain_(){this.mediaRequest_=null;const e=this.mainPlaylistLoader_.main,t={manifestInfo:{uri:this.mainPlaylistLoader_.srcUrl}};this.trigger({type:"manifestparsestart",metadata:t});let n;try{n=ume({mainXml:this.mainPlaylistLoader_.mainXml_,srcUrl:this.mainPlaylistLoader_.srcUrl,clientOffset:this.mainPlaylistLoader_.clientOffset_,sidxMapping:this.mainPlaylistLoader_.sidxMapping_,previousManifest:e})}catch(s){this.error=s,this.error.metadata={errorType:Se.Error.StreamingDashManifestParserError,error:s},this.trigger("error")}e&&(n=dme(e,n,this.mainPlaylistLoader_.sidxMapping_)),this.mainPlaylistLoader_.main=n||e;const i=this.mainPlaylistLoader_.main.locations&&this.mainPlaylistLoader_.main.locations[0];if(i&&i!==this.mainPlaylistLoader_.srcUrl&&(this.mainPlaylistLoader_.srcUrl=i),(!e||n&&n.minimumUpdatePeriod!==e.minimumUpdatePeriod)&&this.updateMinimumUpdatePeriodTimeout_(),this.addEventStreamToMetadataTrack_(n),n){const{duration:s,endList:a}=n,o=[];n.playlists.forEach(u=>{o.push({id:u.id,bandwidth:u.attributes.BANDWIDTH,resolution:u.attributes.RESOLUTION,codecs:u.attributes.CODECS})});const l={duration:s,isLive:!a,renditions:o};t.parsedManifest=l,this.trigger({type:"manifestparsecomplete",metadata:t})}return!!n}updateMinimumUpdatePeriodTimeout_(){const e=this.mainPlaylistLoader_;e.createMupOnMedia_&&(e.off("loadedmetadata",e.createMupOnMedia_),e.createMupOnMedia_=null),e.minimumUpdatePeriodTimeout_&&(X.clearTimeout(e.minimumUpdatePeriodTimeout_),e.minimumUpdatePeriodTimeout_=null);let t=e.main&&e.main.minimumUpdatePeriod;if(t===0&&(e.media()?t=e.media().targetDuration*1e3:(e.createMupOnMedia_=e.updateMinimumUpdatePeriodTimeout_,e.one("loadedmetadata",e.createMupOnMedia_))),typeof t!="number"||t<=0){t<0&&this.logger_(`found invalid minimumUpdatePeriod of ${t}, not setting a timeout`);return}this.createMUPTimeout_(t)}createMUPTimeout_(e){const t=this.mainPlaylistLoader_;t.minimumUpdatePeriodTimeout_=X.setTimeout(()=>{t.minimumUpdatePeriodTimeout_=null,t.trigger("minimumUpdatePeriod"),t.createMUPTimeout_(e)},e)}refreshXml_(){this.requestMain_((e,t)=>{t&&(this.media_&&(this.media_=this.mainPlaylistLoader_.main.playlists[this.media_.id]),this.mainPlaylistLoader_.sidxMapping_=fme(this.mainPlaylistLoader_.main,this.mainPlaylistLoader_.sidxMapping_),this.addSidxSegments_(this.media(),this.state,n=>{this.refreshMedia_(this.media().id)}))})}refreshMedia_(e){if(!e)throw new Error("refreshMedia_ must take a media id");this.media_&&this.isMain_&&this.handleMain_();const t=this.mainPlaylistLoader_.main.playlists,n=!this.media_||this.media_!==t[e];if(n?this.media_=t[e]:this.trigger("playlistunchanged"),!this.mediaUpdateTimeout){const i=()=>{this.media().endList||(this.mediaUpdateTimeout=X.setTimeout(()=>{this.trigger("mediaupdatetimeout"),i()},H2(this.media(),!!n)))};i()}this.trigger("loadedplaylist")}addEventStreamToMetadataTrack_(e){if(e&&this.mainPlaylistLoader_.main.eventStream){const t=this.mainPlaylistLoader_.main.eventStream.map(n=>({cueTime:n.start,frames:[{data:n.messageData}]}));this.addMetadataToTextTrack("EventStream",t,this.mainPlaylistLoader_.main.duration)}}getKeyIdSet(e){if(e.contentProtection){const t=new Set;for(const n in e.contentProtection){const i=e.contentProtection[n].attributes["cenc:default_KID"];i&&t.add(i.replace(/-/g,"").toLowerCase())}return t}}};var Zi={GOAL_BUFFER_LENGTH:30,MAX_GOAL_BUFFER_LENGTH:60,BACK_BUFFER_LENGTH:30,GOAL_BUFFER_LENGTH_RATE:1,INITIAL_BANDWIDTH:4194304,BANDWIDTH_VARIANCE:1.2,BUFFER_LOW_WATER_LINE:0,MAX_BUFFER_LOW_WATER_LINE:30,EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE:16,BUFFER_LOW_WATER_LINE_RATE:1,BUFFER_HIGH_WATER_LINE:30};const pme=r=>{const e=new Uint8Array(new ArrayBuffer(r.length));for(let t=0;t<r.length;t++)e[t]=r.charCodeAt(t);return e.buffer},B$=function(r){return r.on=r.addEventListener,r.off=r.removeEventListener,r},mme=function(r){try{return URL.createObjectURL(new Blob([r],{type:"application/javascript"}))}catch{const t=new BlobBuilder;return t.append(r),URL.createObjectURL(t.getBlob())}},N$=function(r){return function(){const e=mme(r),t=B$(new Worker(e));t.objURL=e;const n=t.terminate;return t.on=t.addEventListener,t.off=t.removeEventListener,t.terminate=function(){return URL.revokeObjectURL(e),n.call(this)},t}},U$=function(r){return`var browserWorkerPolyFill = ${B$.toString()};
browserWorkerPolyFill(self);
`+r},$$=function(r){return r.toString().replace(/^function.+?{/,"").slice(0,-1)},gme=U$($$(function(){var r=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},e=function(){this.init=function(){var p={};this.on=function(x,S){p[x]||(p[x]=[]),p[x]=p[x].concat(S)},this.off=function(x,S){var b;return p[x]?(b=p[x].indexOf(S),p[x]=p[x].slice(),p[x].splice(b,1),b>-1):!1},this.trigger=function(x){var S,b,w,R;if(S=p[x],!!S)if(arguments.length===2)for(w=S.length,b=0;b<w;++b)S[b].call(this,arguments[1]);else{for(R=[],b=arguments.length,b=1;b<arguments.length;++b)R.push(arguments[b]);for(w=S.length,b=0;b<w;++b)S[b].apply(this,R)}},this.dispose=function(){p={}}}};e.prototype.pipe=function(p){return this.on("data",function(x){p.push(x)}),this.on("done",function(x){p.flush(x)}),this.on("partialdone",function(x){p.partialFlush(x)}),this.on("endedtimeline",function(x){p.endTimeline(x)}),this.on("reset",function(x){p.reset(x)}),p},e.prototype.push=function(p){this.trigger("data",p)},e.prototype.flush=function(p){this.trigger("done",p)},e.prototype.partialFlush=function(p){this.trigger("partialdone",p)},e.prototype.endTimeline=function(p){this.trigger("endedtimeline",p)},e.prototype.reset=function(p){this.trigger("reset",p)};var t=e,n=Math.pow(2,32),i=function(p){var x=new DataView(p.buffer,p.byteOffset,p.byteLength),S;return x.getBigUint64?(S=x.getBigUint64(0),S<Number.MAX_SAFE_INTEGER?Number(S):S):x.getUint32(0)*n+x.getUint32(4)},s={getUint64:i,MAX_UINT32:n},a=s.MAX_UINT32,o,l,u,c,h,f,g,v,y,_,C,E,D,I,k,P,N,U,B,A,$,W,V,Q,ie,ne,ue,se,ae,ce,ee,pe,me,ye,Oe,Le;(function(){var p;if(V={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],mvex:[],mvhd:[],pasp:[],sdtp:[],smhd:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],styp:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[]},!(typeof Uint8Array>"u")){for(p in V)V.hasOwnProperty(p)&&(V[p]=[p.charCodeAt(0),p.charCodeAt(1),p.charCodeAt(2),p.charCodeAt(3)]);Q=new Uint8Array([105,115,111,109]),ne=new Uint8Array([97,118,99,49]),ie=new Uint8Array([0,0,0,1]),ue=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),se=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]),ae={video:ue,audio:se},pe=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),ee=new Uint8Array([0,0,0,0,0,0,0,0]),me=new Uint8Array([0,0,0,0,0,0,0,0]),ye=me,Oe=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),Le=me,ce=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0])}})(),o=function(p){var x=[],S=0,b,w,R;for(b=1;b<arguments.length;b++)x.push(arguments[b]);for(b=x.length;b--;)S+=x[b].byteLength;for(w=new Uint8Array(S+8),R=new DataView(w.buffer,w.byteOffset,w.byteLength),R.setUint32(0,w.byteLength),w.set(p,4),b=0,S=8;b<x.length;b++)w.set(x[b],S),S+=x[b].byteLength;return w},l=function(){return o(V.dinf,o(V.dref,pe))},u=function(p){return o(V.esds,new Uint8Array([0,0,0,0,3,25,0,0,0,4,17,64,21,0,6,0,0,0,218,192,0,0,218,192,5,2,p.audioobjecttype<<3|p.samplingfrequencyindex>>>1,p.samplingfrequencyindex<<7|p.channelcount<<3,6,1,2]))},c=function(){return o(V.ftyp,Q,ie,Q,ne)},P=function(p){return o(V.hdlr,ae[p])},h=function(p){return o(V.mdat,p)},k=function(p){var x=new Uint8Array([0,0,0,0,0,0,0,2,0,0,0,3,0,1,95,144,p.duration>>>24&255,p.duration>>>16&255,p.duration>>>8&255,p.duration&255,85,196,0,0]);return p.samplerate&&(x[12]=p.samplerate>>>24&255,x[13]=p.samplerate>>>16&255,x[14]=p.samplerate>>>8&255,x[15]=p.samplerate&255),o(V.mdhd,x)},I=function(p){return o(V.mdia,k(p),P(p.type),g(p))},f=function(p){return o(V.mfhd,new Uint8Array([0,0,0,0,(p&4278190080)>>24,(p&16711680)>>16,(p&65280)>>8,p&255]))},g=function(p){return o(V.minf,p.type==="video"?o(V.vmhd,ce):o(V.smhd,ee),l(),U(p))},v=function(p,x){for(var S=[],b=x.length;b--;)S[b]=A(x[b]);return o.apply(null,[V.moof,f(p)].concat(S))},y=function(p){for(var x=p.length,S=[];x--;)S[x]=E(p[x]);return o.apply(null,[V.moov,C(4294967295)].concat(S).concat(_(p)))},_=function(p){for(var x=p.length,S=[];x--;)S[x]=$(p[x]);return o.apply(null,[V.mvex].concat(S))},C=function(p){var x=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,2,0,1,95,144,(p&4278190080)>>24,(p&16711680)>>16,(p&65280)>>8,p&255,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return o(V.mvhd,x)},N=function(p){var x=p.samples||[],S=new Uint8Array(4+x.length),b,w;for(w=0;w<x.length;w++)b=x[w].flags,S[w+4]=b.dependsOn<<4|b.isDependedOn<<2|b.hasRedundancy;return o(V.sdtp,S)},U=function(p){return o(V.stbl,B(p),o(V.stts,Le),o(V.stsc,ye),o(V.stsz,Oe),o(V.stco,me))},(function(){var p,x;B=function(S){return o(V.stsd,new Uint8Array([0,0,0,0,0,0,0,1]),S.type==="video"?p(S):x(S))},p=function(S){var b=S.sps||[],w=S.pps||[],R=[],G=[],Y,J;for(Y=0;Y<b.length;Y++)R.push((b[Y].byteLength&65280)>>>8),R.push(b[Y].byteLength&255),R=R.concat(Array.prototype.slice.call(b[Y]));for(Y=0;Y<w.length;Y++)G.push((w[Y].byteLength&65280)>>>8),G.push(w[Y].byteLength&255),G=G.concat(Array.prototype.slice.call(w[Y]));if(J=[V.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,(S.width&65280)>>8,S.width&255,(S.height&65280)>>8,S.height&255,0,72,0,0,0,72,0,0,0,0,0,0,0,1,19,118,105,100,101,111,106,115,45,99,111,110,116,114,105,98,45,104,108,115,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),o(V.avcC,new Uint8Array([1,S.profileIdc,S.profileCompatibility,S.levelIdc,255].concat([b.length],R,[w.length],G))),o(V.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192]))],S.sarRatio){var re=S.sarRatio[0],he=S.sarRatio[1];J.push(o(V.pasp,new Uint8Array([(re&4278190080)>>24,(re&16711680)>>16,(re&65280)>>8,re&255,(he&4278190080)>>24,(he&16711680)>>16,(he&65280)>>8,he&255])))}return o.apply(null,J)},x=function(S){return o(V.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,(S.channelcount&65280)>>8,S.channelcount&255,(S.samplesize&65280)>>8,S.samplesize&255,0,0,0,0,(S.samplerate&65280)>>8,S.samplerate&255,0,0]),u(S))}})(),D=function(p){var x=new Uint8Array([0,0,0,7,0,0,0,0,0,0,0,0,(p.id&4278190080)>>24,(p.id&16711680)>>16,(p.id&65280)>>8,p.id&255,0,0,0,0,(p.duration&4278190080)>>24,(p.duration&16711680)>>16,(p.duration&65280)>>8,p.duration&255,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,(p.width&65280)>>8,p.width&255,0,0,(p.height&65280)>>8,p.height&255,0,0]);return o(V.tkhd,x)},A=function(p){var x,S,b,w,R,G,Y;return x=o(V.tfhd,new Uint8Array([0,0,0,58,(p.id&4278190080)>>24,(p.id&16711680)>>16,(p.id&65280)>>8,p.id&255,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0])),G=Math.floor(p.baseMediaDecodeTime/a),Y=Math.floor(p.baseMediaDecodeTime%a),S=o(V.tfdt,new Uint8Array([1,0,0,0,G>>>24&255,G>>>16&255,G>>>8&255,G&255,Y>>>24&255,Y>>>16&255,Y>>>8&255,Y&255])),R=92,p.type==="audio"?(b=W(p,R),o(V.traf,x,S,b)):(w=N(p),b=W(p,w.length+R),o(V.traf,x,S,b,w))},E=function(p){return p.duration=p.duration||4294967295,o(V.trak,D(p),I(p))},$=function(p){var x=new Uint8Array([0,0,0,0,(p.id&4278190080)>>24,(p.id&16711680)>>16,(p.id&65280)>>8,p.id&255,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]);return p.type!=="video"&&(x[x.length-1]=0),o(V.trex,x)},(function(){var p,x,S;S=function(b,w){var R=0,G=0,Y=0,J=0;return b.length&&(b[0].duration!==void 0&&(R=1),b[0].size!==void 0&&(G=2),b[0].flags!==void 0&&(Y=4),b[0].compositionTimeOffset!==void 0&&(J=8)),[0,0,R|G|Y|J,1,(b.length&4278190080)>>>24,(b.length&16711680)>>>16,(b.length&65280)>>>8,b.length&255,(w&4278190080)>>>24,(w&16711680)>>>16,(w&65280)>>>8,w&255]},x=function(b,w){var R,G,Y,J,re,he;for(J=b.samples||[],w+=20+16*J.length,Y=S(J,w),G=new Uint8Array(Y.length+J.length*16),G.set(Y),R=Y.length,he=0;he<J.length;he++)re=J[he],G[R++]=(re.duration&4278190080)>>>24,G[R++]=(re.duration&16711680)>>>16,G[R++]=(re.duration&65280)>>>8,G[R++]=re.duration&255,G[R++]=(re.size&4278190080)>>>24,G[R++]=(re.size&16711680)>>>16,G[R++]=(re.size&65280)>>>8,G[R++]=re.size&255,G[R++]=re.flags.isLeading<<2|re.flags.dependsOn,G[R++]=re.flags.isDependedOn<<6|re.flags.hasRedundancy<<4|re.flags.paddingValue<<1|re.flags.isNonSyncSample,G[R++]=re.flags.degradationPriority&61440,G[R++]=re.flags.degradationPriority&15,G[R++]=(re.compositionTimeOffset&4278190080)>>>24,G[R++]=(re.compositionTimeOffset&16711680)>>>16,G[R++]=(re.compositionTimeOffset&65280)>>>8,G[R++]=re.compositionTimeOffset&255;return o(V.trun,G)},p=function(b,w){var R,G,Y,J,re,he;for(J=b.samples||[],w+=20+8*J.length,Y=S(J,w),R=new Uint8Array(Y.length+J.length*8),R.set(Y),G=Y.length,he=0;he<J.length;he++)re=J[he],R[G++]=(re.duration&4278190080)>>>24,R[G++]=(re.duration&16711680)>>>16,R[G++]=(re.duration&65280)>>>8,R[G++]=re.duration&255,R[G++]=(re.size&4278190080)>>>24,R[G++]=(re.size&16711680)>>>16,R[G++]=(re.size&65280)>>>8,R[G++]=re.size&255;return o(V.trun,R)},W=function(b,w){return b.type==="audio"?p(b,w):x(b,w)}})();var st={ftyp:c,mdat:h,moof:v,moov:y,initSegment:function(p){var x=c(),S=y(p),b;return b=new Uint8Array(x.byteLength+S.byteLength),b.set(x),b.set(S,x.byteLength),b}},ze=function(p){var x,S,b=[],w=[];for(w.byteLength=0,w.nalCount=0,w.duration=0,b.byteLength=0,x=0;x<p.length;x++)S=p[x],S.nalUnitType==="access_unit_delimiter_rbsp"?(b.length&&(b.duration=S.dts-b.dts,w.byteLength+=b.byteLength,w.nalCount+=b.length,w.duration+=b.duration,w.push(b)),b=[S],b.byteLength=S.data.byteLength,b.pts=S.pts,b.dts=S.dts):(S.nalUnitType==="slice_layer_without_partitioning_rbsp_idr"&&(b.keyFrame=!0),b.duration=S.dts-b.dts,b.byteLength+=S.data.byteLength,b.push(S));return w.length&&(!b.duration||b.duration<=0)&&(b.duration=w[w.length-1].duration),w.byteLength+=b.byteLength,w.nalCount+=b.length,w.duration+=b.duration,w.push(b),w},pt=function(p){var x,S,b=[],w=[];for(b.byteLength=0,b.nalCount=0,b.duration=0,b.pts=p[0].pts,b.dts=p[0].dts,w.byteLength=0,w.nalCount=0,w.duration=0,w.pts=p[0].pts,w.dts=p[0].dts,x=0;x<p.length;x++)S=p[x],S.keyFrame?(b.length&&(w.push(b),w.byteLength+=b.byteLength,w.nalCount+=b.nalCount,w.duration+=b.duration),b=[S],b.nalCount=S.length,b.byteLength=S.byteLength,b.pts=S.pts,b.dts=S.dts,b.duration=S.duration):(b.duration+=S.duration,b.nalCount+=S.length,b.byteLength+=S.byteLength,b.push(S));return w.length&&b.duration<=0&&(b.duration=w[w.length-1].duration),w.byteLength+=b.byteLength,w.nalCount+=b.nalCount,w.duration+=b.duration,w.push(b),w},Ye=function(p){var x;return!p[0][0].keyFrame&&p.length>1&&(x=p.shift(),p.byteLength-=x.byteLength,p.nalCount-=x.nalCount,p[0][0].dts=x.dts,p[0][0].pts=x.pts,p[0][0].duration+=x.duration),p},Pt=function(){return{size:0,flags:{isLeading:0,dependsOn:1,isDependedOn:0,hasRedundancy:0,degradationPriority:0,isNonSyncSample:1}}},Rt=function(p,x){var S=Pt();return S.dataOffset=x,S.compositionTimeOffset=p.pts-p.dts,S.duration=p.duration,S.size=4*p.length,S.size+=p.byteLength,p.keyFrame&&(S.flags.dependsOn=2,S.flags.isNonSyncSample=0),S},Ve=function(p,x){var S,b,w,R,G,Y=x||0,J=[];for(S=0;S<p.length;S++)for(R=p[S],b=0;b<R.length;b++)G=R[b],w=Rt(G,Y),Y+=w.size,J.push(w);return J},Ne=function(p){var x,S,b,w,R,G,Y=0,J=p.byteLength,re=p.nalCount,he=J+4*re,ve=new Uint8Array(he),qe=new DataView(ve.buffer);for(x=0;x<p.length;x++)for(w=p[x],S=0;S<w.length;S++)for(R=w[S],b=0;b<R.length;b++)G=R[b],qe.setUint32(Y,G.data.byteLength),Y+=4,ve.set(G.data,Y),Y+=G.data.byteLength;return ve},Ie=function(p,x){var S,b=x||0,w=[];return S=Rt(p,b),w.push(S),w},Ue=function(p){var x,S,b=0,w=p.byteLength,R=p.length,G=w+4*R,Y=new Uint8Array(G),J=new DataView(Y.buffer);for(x=0;x<p.length;x++)S=p[x],J.setUint32(b,S.data.byteLength),b+=4,Y.set(S.data,b),b+=S.data.byteLength;return Y},et={groupNalsIntoFrames:ze,groupFramesIntoGops:pt,extendFirstKeyFrame:Ye,generateSampleTable:Ve,concatenateNalData:Ne,generateSampleTableForFrame:Ie,concatenateNalDataForFrame:Ue},ot=[33,16,5,32,164,27],dt=[33,65,108,84,1,2,4,8,168,2,4,8,17,191,252],it=function(p){for(var x=[];p--;)x.push(0);return x},bt=function(p){return Object.keys(p).reduce(function(x,S){return x[S]=new Uint8Array(p[S].reduce(function(b,w){return b.concat(w)},[])),x},{})},lt,gr=function(){if(!lt){var p={96e3:[ot,[227,64],it(154),[56]],88200:[ot,[231],it(170),[56]],64e3:[ot,[248,192],it(240),[56]],48e3:[ot,[255,192],it(268),[55,148,128],it(54),[112]],44100:[ot,[255,192],it(268),[55,163,128],it(84),[112]],32e3:[ot,[255,192],it(268),[55,234],it(226),[112]],24e3:[ot,[255,192],it(268),[55,255,128],it(268),[111,112],it(126),[224]],16e3:[ot,[255,192],it(268),[55,255,128],it(268),[111,255],it(269),[223,108],it(195),[1,192]],12e3:[dt,it(268),[3,127,248],it(268),[6,255,240],it(268),[13,255,224],it(268),[27,253,128],it(259),[56]],11025:[dt,it(268),[3,127,248],it(268),[6,255,240],it(268),[13,255,224],it(268),[27,255,192],it(268),[55,175,128],it(108),[112]],8e3:[dt,it(268),[3,121,16],it(47),[7]]};lt=bt(p)}return lt},hr=9e4,Rr,nr,qt,fr,yr,Lr,vt;Rr=function(p){return p*hr},nr=function(p,x){return p*x},qt=function(p){return p/hr},fr=function(p,x){return p/x},yr=function(p,x){return Rr(fr(p,x))},Lr=function(p,x){return nr(qt(p),x)},vt=function(p,x,S){return qt(S?p:p-x)};var Ut={ONE_SECOND_IN_TS:hr,secondsToVideoTs:Rr,secondsToAudioTs:nr,videoTsToSeconds:qt,audioTsToSeconds:fr,audioTsToVideoTs:yr,videoTsToAudioTs:Lr,metadataTsToSeconds:vt},rn=gr,jt=Ut,br=function(p){var x,S,b=0;for(x=0;x<p.length;x++)S=p[x],b+=S.data.byteLength;return b},Or=function(p,x,S,b){var w,R=0,G=0,Y=0,J=0,re,he,ve;if(x.length&&(w=jt.audioTsToVideoTs(p.baseMediaDecodeTime,p.samplerate),R=Math.ceil(jt.ONE_SECOND_IN_TS/(p.samplerate/1024)),S&&b&&(G=w-Math.max(S,b),Y=Math.floor(G/R),J=Y*R),!(Y<1||J>jt.ONE_SECOND_IN_TS/2))){for(re=rn()[p.samplerate],re||(re=x[0].data),he=0;he<Y;he++)ve=x[0],x.splice(0,0,{data:re,dts:ve.dts-R,pts:ve.pts-R});return p.baseMediaDecodeTime-=Math.floor(jt.videoTsToAudioTs(J,p.samplerate)),J}},Hr=function(p,x,S){return x.minSegmentDts>=S?p:(x.minSegmentDts=1/0,p.filter(function(b){return b.dts>=S?(x.minSegmentDts=Math.min(x.minSegmentDts,b.dts),x.minSegmentPts=x.minSegmentDts,!0):!1}))},ln=function(p){var x,S,b=[];for(x=0;x<p.length;x++)S=p[x],b.push({size:S.data.byteLength,duration:1024});return b},Cn=function(p){var x,S,b=0,w=new Uint8Array(br(p));for(x=0;x<p.length;x++)S=p[x],w.set(S.data,b),b+=S.data.byteLength;return w},wn={prefixWithSilence:Or,trimAdtsFramesByEarliestDts:Hr,generateSampleTable:ln,concatenateFrameData:Cn},Fr=Ut.ONE_SECOND_IN_TS,oe=function(p,x){typeof x.pts=="number"&&(p.timelineStartInfo.pts===void 0&&(p.timelineStartInfo.pts=x.pts),p.minSegmentPts===void 0?p.minSegmentPts=x.pts:p.minSegmentPts=Math.min(p.minSegmentPts,x.pts),p.maxSegmentPts===void 0?p.maxSegmentPts=x.pts:p.maxSegmentPts=Math.max(p.maxSegmentPts,x.pts)),typeof x.dts=="number"&&(p.timelineStartInfo.dts===void 0&&(p.timelineStartInfo.dts=x.dts),p.minSegmentDts===void 0?p.minSegmentDts=x.dts:p.minSegmentDts=Math.min(p.minSegmentDts,x.dts),p.maxSegmentDts===void 0?p.maxSegmentDts=x.dts:p.maxSegmentDts=Math.max(p.maxSegmentDts,x.dts))},fe=function(p){delete p.minSegmentDts,delete p.maxSegmentDts,delete p.minSegmentPts,delete p.maxSegmentPts},Te=function(p,x){var S,b,w=p.minSegmentDts;return x||(w-=p.timelineStartInfo.dts),S=p.timelineStartInfo.baseMediaDecodeTime,S+=w,S=Math.max(0,S),p.type==="audio"&&(b=p.samplerate/Fr,S*=b,S=Math.floor(S)),S},je={clearDtsInfo:fe,calculateTrackBaseMediaDecodeTime:Te,collectDtsInfo:oe},mt=4,St=128,be=function(p){for(var x=0,S={payloadType:-1,payloadSize:0},b=0,w=0;x<p.byteLength&&p[x]!==St;){for(;p[x]===255;)b+=255,x++;for(b+=p[x++];p[x]===255;)w+=255,x++;if(w+=p[x++],!S.payload&&b===mt){var R=String.fromCharCode(p[x+3],p[x+4],p[x+5],p[x+6]);if(R==="GA94"){S.payloadType=b,S.payloadSize=w,S.payload=p.subarray(x,x+w);break}else S.payload=void 0}x+=w,b=0,w=0}return S},xe=function(p){return p.payload[0]!==181||(p.payload[1]<<8|p.payload[2])!==49||String.fromCharCode(p.payload[3],p.payload[4],p.payload[5],p.payload[6])!=="GA94"||p.payload[7]!==3?null:p.payload.subarray(8,p.payload.length-1)},Ae=function(p,x){var S=[],b,w,R,G;if(!(x[0]&64))return S;for(w=x[0]&31,b=0;b<w;b++)R=b*3,G={type:x[R+2]&3,pts:p},x[R+2]&4&&(G.ccData=x[R+3]<<8|x[R+4],S.push(G));return S},Ke=function(p){for(var x=p.byteLength,S=[],b=1,w,R;b<x-2;)p[b]===0&&p[b+1]===0&&p[b+2]===3?(S.push(b+2),b+=2):b++;if(S.length===0)return p;w=x-S.length,R=new Uint8Array(w);var G=0;for(b=0;b<w;G++,b++)G===S[0]&&(G++,S.shift()),R[b]=p[G];return R},Xe={parseSei:be,parseUserData:xe,parseCaptionPackets:Ae,discardEmulationPreventionBytes:Ke,USER_DATA_REGISTERED_ITU_T_T35:mt},_t=t,Lt=Xe,ct=function(p){p=p||{},ct.prototype.init.call(this),this.parse708captions_=typeof p.parse708captions=="boolean"?p.parse708captions:!0,this.captionPackets_=[],this.ccStreams_=[new ir(0,0),new ir(0,1),new ir(1,0),new ir(1,1)],this.parse708captions_&&(this.cc708Stream_=new Tt({captionServices:p.captionServices})),this.reset(),this.ccStreams_.forEach(function(x){x.on("data",this.trigger.bind(this,"data")),x.on("partialdone",this.trigger.bind(this,"partialdone")),x.on("done",this.trigger.bind(this,"done"))},this),this.parse708captions_&&(this.cc708Stream_.on("data",this.trigger.bind(this,"data")),this.cc708Stream_.on("partialdone",this.trigger.bind(this,"partialdone")),this.cc708Stream_.on("done",this.trigger.bind(this,"done")))};ct.prototype=new _t,ct.prototype.push=function(p){var x,S,b;if(p.nalUnitType==="sei_rbsp"&&(x=Lt.parseSei(p.escapedRBSP),!!x.payload&&x.payloadType===Lt.USER_DATA_REGISTERED_ITU_T_T35&&(S=Lt.parseUserData(x),!!S))){if(p.dts<this.latestDts_){this.ignoreNextEqualDts_=!0;return}else if(p.dts===this.latestDts_&&this.ignoreNextEqualDts_){this.numSameDts_--,this.numSameDts_||(this.ignoreNextEqualDts_=!1);return}b=Lt.parseCaptionPackets(p.pts,S),this.captionPackets_=this.captionPackets_.concat(b),this.latestDts_!==p.dts&&(this.numSameDts_=0),this.numSameDts_++,this.latestDts_=p.dts}},ct.prototype.flushCCStreams=function(p){this.ccStreams_.forEach(function(x){return p==="flush"?x.flush():x.partialFlush()},this)},ct.prototype.flushStream=function(p){if(!this.captionPackets_.length){this.flushCCStreams(p);return}this.captionPackets_.forEach(function(x,S){x.presortIndex=S}),this.captionPackets_.sort(function(x,S){return x.pts===S.pts?x.presortIndex-S.presortIndex:x.pts-S.pts}),this.captionPackets_.forEach(function(x){x.type<2?this.dispatchCea608Packet(x):this.dispatchCea708Packet(x)},this),this.captionPackets_.length=0,this.flushCCStreams(p)},ct.prototype.flush=function(){return this.flushStream("flush")},ct.prototype.partialFlush=function(){return this.flushStream("partialFlush")},ct.prototype.reset=function(){this.latestDts_=null,this.ignoreNextEqualDts_=!1,this.numSameDts_=0,this.activeCea608Channel_=[null,null],this.ccStreams_.forEach(function(p){p.reset()})},ct.prototype.dispatchCea608Packet=function(p){this.setsTextOrXDSActive(p)?this.activeCea608Channel_[p.type]=null:this.setsChannel1Active(p)?this.activeCea608Channel_[p.type]=0:this.setsChannel2Active(p)&&(this.activeCea608Channel_[p.type]=1),this.activeCea608Channel_[p.type]!==null&&this.ccStreams_[(p.type<<1)+this.activeCea608Channel_[p.type]].push(p)},ct.prototype.setsChannel1Active=function(p){return(p.ccData&30720)===4096},ct.prototype.setsChannel2Active=function(p){return(p.ccData&30720)===6144},ct.prototype.setsTextOrXDSActive=function(p){return(p.ccData&28928)===256||(p.ccData&30974)===4138||(p.ccData&30974)===6186},ct.prototype.dispatchCea708Packet=function(p){this.parse708captions_&&this.cc708Stream_.push(p)};var yt={127:9834,4128:32,4129:160,4133:8230,4138:352,4140:338,4144:9608,4145:8216,4146:8217,4147:8220,4148:8221,4149:8226,4153:8482,4154:353,4156:339,4157:8480,4159:376,4214:8539,4215:8540,4216:8541,4217:8542,4218:9168,4219:9124,4220:9123,4221:9135,4222:9126,4223:9121,4256:12600},Vt=function(p){var x=yt[p]||p;return p&4096&&p===x?"":String.fromCharCode(x)},Kt=function(p){return 32<=p&&p<=127||160<=p&&p<=255},Nt=function(p){this.windowNum=p,this.reset()};Nt.prototype.reset=function(){this.clearText(),this.pendingNewLine=!1,this.winAttr={},this.penAttr={},this.penLoc={},this.penColor={},this.visible=0,this.rowLock=0,this.columnLock=0,this.priority=0,this.relativePositioning=0,this.anchorVertical=0,this.anchorHorizontal=0,this.anchorPoint=0,this.rowCount=1,this.virtualRowCount=this.rowCount+1,this.columnCount=41,this.windowStyle=0,this.penStyle=0},Nt.prototype.getText=function(){return this.rows.join(`
`)},Nt.prototype.clearText=function(){this.rows=[""],this.rowIdx=0},Nt.prototype.newLine=function(p){for(this.rows.length>=this.virtualRowCount&&typeof this.beforeRowOverflow=="function"&&this.beforeRowOverflow(p),this.rows.length>0&&(this.rows.push(""),this.rowIdx++);this.rows.length>this.virtualRowCount;)this.rows.shift(),this.rowIdx--},Nt.prototype.isEmpty=function(){return this.rows.length===0?!0:this.rows.length===1?this.rows[0]==="":!1},Nt.prototype.addText=function(p){this.rows[this.rowIdx]+=p},Nt.prototype.backspace=function(){if(!this.isEmpty()){var p=this.rows[this.rowIdx];this.rows[this.rowIdx]=p.substr(0,p.length-1)}};var vr=function(p,x,S){this.serviceNum=p,this.text="",this.currentWindow=new Nt(-1),this.windows=[],this.stream=S,typeof x=="string"&&this.createTextDecoder(x)};vr.prototype.init=function(p,x){this.startPts=p;for(var S=0;S<8;S++)this.windows[S]=new Nt(S),typeof x=="function"&&(this.windows[S].beforeRowOverflow=x)},vr.prototype.setCurrentWindow=function(p){this.currentWindow=this.windows[p]},vr.prototype.createTextDecoder=function(p){if(typeof TextDecoder>"u")this.stream.trigger("log",{level:"warn",message:"The `encoding` option is unsupported without TextDecoder support"});else try{this.textDecoder_=new TextDecoder(p)}catch(x){this.stream.trigger("log",{level:"warn",message:"TextDecoder could not be created with "+p+" encoding. "+x})}};var Tt=function(p){p=p||{},Tt.prototype.init.call(this);var x=this,S=p.captionServices||{},b={},w;Object.keys(S).forEach(R=>{w=S[R],/^SERVICE/.test(R)&&(b[R]=w.encoding)}),this.serviceEncodings=b,this.current708Packet=null,this.services={},this.push=function(R){R.type===3?(x.new708Packet(),x.add708Bytes(R)):(x.current708Packet===null&&x.new708Packet(),x.add708Bytes(R))}};Tt.prototype=new _t,Tt.prototype.new708Packet=function(){this.current708Packet!==null&&this.push708Packet(),this.current708Packet={data:[],ptsVals:[]}},Tt.prototype.add708Bytes=function(p){var x=p.ccData,S=x>>>8,b=x&255;this.current708Packet.ptsVals.push(p.pts),this.current708Packet.data.push(S),this.current708Packet.data.push(b)},Tt.prototype.push708Packet=function(){var p=this.current708Packet,x=p.data,S=null,b=null,w=0,R=x[w++];for(p.seq=R>>6,p.sizeCode=R&63;w<x.length;w++)R=x[w++],S=R>>5,b=R&31,S===7&&b>0&&(R=x[w++],S=R),this.pushServiceBlock(S,w,b),b>0&&(w+=b-1)},Tt.prototype.pushServiceBlock=function(p,x,S){var b,w=x,R=this.current708Packet.data,G=this.services[p];for(G||(G=this.initService(p,w));w<x+S&&w<R.length;w++)b=R[w],Kt(b)?w=this.handleText(w,G):b===24?w=this.multiByteCharacter(w,G):b===16?w=this.extendedCommands(w,G):128<=b&&b<=135?w=this.setCurrentWindow(w,G):152<=b&&b<=159?w=this.defineWindow(w,G):b===136?w=this.clearWindows(w,G):b===140?w=this.deleteWindows(w,G):b===137?w=this.displayWindows(w,G):b===138?w=this.hideWindows(w,G):b===139?w=this.toggleWindows(w,G):b===151?w=this.setWindowAttributes(w,G):b===144?w=this.setPenAttributes(w,G):b===145?w=this.setPenColor(w,G):b===146?w=this.setPenLocation(w,G):b===143?G=this.reset(w,G):b===8?G.currentWindow.backspace():b===12?G.currentWindow.clearText():b===13?G.currentWindow.pendingNewLine=!0:b===14?G.currentWindow.clearText():b===141&&w++},Tt.prototype.extendedCommands=function(p,x){var S=this.current708Packet.data,b=S[++p];return Kt(b)&&(p=this.handleText(p,x,{isExtended:!0})),p},Tt.prototype.getPts=function(p){return this.current708Packet.ptsVals[Math.floor(p/2)]},Tt.prototype.initService=function(p,x){var b="SERVICE"+p,S=this,b,w;return b in this.serviceEncodings&&(w=this.serviceEncodings[b]),this.services[p]=new vr(p,w,S),this.services[p].init(this.getPts(x),function(R){S.flushDisplayed(R,S.services[p])}),this.services[p]},Tt.prototype.handleText=function(p,x,S){var b=S&&S.isExtended,w=S&&S.isMultiByte,R=this.current708Packet.data,G=b?4096:0,Y=R[p],J=R[p+1],re=x.currentWindow,he,ve;function qe(Ee){return Ee.map(Ct=>("0"+(Ct&255).toString(16)).slice(-2)).join("")}if(w?(ve=[Y,J],p++):ve=[Y],x.textDecoder_&&!b)he=x.textDecoder_.decode(new Uint8Array(ve));else if(w){const Ee=qe(ve);he=String.fromCharCode(parseInt(Ee,16))}else he=Vt(G|Y);return re.pendingNewLine&&!re.isEmpty()&&re.newLine(this.getPts(p)),re.pendingNewLine=!1,re.addText(he),p},Tt.prototype.multiByteCharacter=function(p,x){var S=this.current708Packet.data,b=S[p+1],w=S[p+2];return Kt(b)&&Kt(w)&&(p=this.handleText(++p,x,{isMultiByte:!0})),p},Tt.prototype.setCurrentWindow=function(p,x){var S=this.current708Packet.data,b=S[p],w=b&7;return x.setCurrentWindow(w),p},Tt.prototype.defineWindow=function(p,x){var S=this.current708Packet.data,b=S[p],w=b&7;x.setCurrentWindow(w);var R=x.currentWindow;return b=S[++p],R.visible=(b&32)>>5,R.rowLock=(b&16)>>4,R.columnLock=(b&8)>>3,R.priority=b&7,b=S[++p],R.relativePositioning=(b&128)>>7,R.anchorVertical=b&127,b=S[++p],R.anchorHorizontal=b,b=S[++p],R.anchorPoint=(b&240)>>4,R.rowCount=b&15,b=S[++p],R.columnCount=b&63,b=S[++p],R.windowStyle=(b&56)>>3,R.penStyle=b&7,R.virtualRowCount=R.rowCount+1,p},Tt.prototype.setWindowAttributes=function(p,x){var S=this.current708Packet.data,b=S[p],w=x.currentWindow.winAttr;return b=S[++p],w.fillOpacity=(b&192)>>6,w.fillRed=(b&48)>>4,w.fillGreen=(b&12)>>2,w.fillBlue=b&3,b=S[++p],w.borderType=(b&192)>>6,w.borderRed=(b&48)>>4,w.borderGreen=(b&12)>>2,w.borderBlue=b&3,b=S[++p],w.borderType+=(b&128)>>5,w.wordWrap=(b&64)>>6,w.printDirection=(b&48)>>4,w.scrollDirection=(b&12)>>2,w.justify=b&3,b=S[++p],w.effectSpeed=(b&240)>>4,w.effectDirection=(b&12)>>2,w.displayEffect=b&3,p},Tt.prototype.flushDisplayed=function(p,x){for(var S=[],b=0;b<8;b++)x.windows[b].visible&&!x.windows[b].isEmpty()&&S.push(x.windows[b].getText());x.endPts=p,x.text=S.join(`

`),this.pushCaption(x),x.startPts=p},Tt.prototype.pushCaption=function(p){p.text!==""&&(this.trigger("data",{startPts:p.startPts,endPts:p.endPts,text:p.text,stream:"cc708_"+p.serviceNum}),p.text="",p.startPts=p.endPts)},Tt.prototype.displayWindows=function(p,x){var S=this.current708Packet.data,b=S[++p],w=this.getPts(p);this.flushDisplayed(w,x);for(var R=0;R<8;R++)b&1<<R&&(x.windows[R].visible=1);return p},Tt.prototype.hideWindows=function(p,x){var S=this.current708Packet.data,b=S[++p],w=this.getPts(p);this.flushDisplayed(w,x);for(var R=0;R<8;R++)b&1<<R&&(x.windows[R].visible=0);return p},Tt.prototype.toggleWindows=function(p,x){var S=this.current708Packet.data,b=S[++p],w=this.getPts(p);this.flushDisplayed(w,x);for(var R=0;R<8;R++)b&1<<R&&(x.windows[R].visible^=1);return p},Tt.prototype.clearWindows=function(p,x){var S=this.current708Packet.data,b=S[++p],w=this.getPts(p);this.flushDisplayed(w,x);for(var R=0;R<8;R++)b&1<<R&&x.windows[R].clearText();return p},Tt.prototype.deleteWindows=function(p,x){var S=this.current708Packet.data,b=S[++p],w=this.getPts(p);this.flushDisplayed(w,x);for(var R=0;R<8;R++)b&1<<R&&x.windows[R].reset();return p},Tt.prototype.setPenAttributes=function(p,x){var S=this.current708Packet.data,b=S[p],w=x.currentWindow.penAttr;return b=S[++p],w.textTag=(b&240)>>4,w.offset=(b&12)>>2,w.penSize=b&3,b=S[++p],w.italics=(b&128)>>7,w.underline=(b&64)>>6,w.edgeType=(b&56)>>3,w.fontStyle=b&7,p},Tt.prototype.setPenColor=function(p,x){var S=this.current708Packet.data,b=S[p],w=x.currentWindow.penColor;return b=S[++p],w.fgOpacity=(b&192)>>6,w.fgRed=(b&48)>>4,w.fgGreen=(b&12)>>2,w.fgBlue=b&3,b=S[++p],w.bgOpacity=(b&192)>>6,w.bgRed=(b&48)>>4,w.bgGreen=(b&12)>>2,w.bgBlue=b&3,b=S[++p],w.edgeRed=(b&48)>>4,w.edgeGreen=(b&12)>>2,w.edgeBlue=b&3,p},Tt.prototype.setPenLocation=function(p,x){var S=this.current708Packet.data,b=S[p],w=x.currentWindow.penLoc;return x.currentWindow.pendingNewLine=!0,b=S[++p],w.row=b&15,b=S[++p],w.column=b&63,p},Tt.prototype.reset=function(p,x){var S=this.getPts(p);return this.flushDisplayed(S,x),this.initService(x.serviceNum,p)};var xr={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,304:174,305:176,306:189,307:191,308:8482,309:162,310:163,311:9834,312:224,313:160,314:232,315:226,316:234,317:238,318:244,319:251,544:193,545:201,546:211,547:218,548:220,549:252,550:8216,551:161,552:42,553:39,554:8212,555:169,556:8480,557:8226,558:8220,559:8221,560:192,561:194,562:199,563:200,564:202,565:203,566:235,567:206,568:207,569:239,570:212,571:217,572:249,573:219,574:171,575:187,800:195,801:227,802:205,803:204,804:236,805:210,806:242,807:213,808:245,809:123,810:125,811:92,812:94,813:95,814:124,815:126,816:196,817:228,818:214,819:246,820:223,821:165,822:164,823:9474,824:197,825:229,826:216,827:248,828:9484,829:9488,830:9492,831:9496},Zr=function(p){return p===null?"":(p=xr[p]||p,String.fromCharCode(p))},Br=14,jr=[4352,4384,4608,4640,5376,5408,5632,5664,5888,5920,4096,4864,4896,5120,5152],Pn=function(){for(var p=[],x=Br+1;x--;)p.push({text:"",indent:0,offset:0});return p},ir=function(p,x){ir.prototype.init.call(this),this.field_=p||0,this.dataChannel_=x||0,this.name_="CC"+((this.field_<<1|this.dataChannel_)+1),this.setConstants(),this.reset(),this.push=function(S){var b,w,R,G,Y;if(b=S.ccData&32639,b===this.lastControlCode_){this.lastControlCode_=null;return}if((b&61440)===4096?this.lastControlCode_=b:b!==this.PADDING_&&(this.lastControlCode_=null),R=b>>>8,G=b&255,b!==this.PADDING_)if(b===this.RESUME_CAPTION_LOADING_)this.mode_="popOn";else if(b===this.END_OF_CAPTION_)this.mode_="popOn",this.clearFormatting(S.pts),this.flushDisplayed(S.pts),w=this.displayed_,this.displayed_=this.nonDisplayed_,this.nonDisplayed_=w,this.startPts_=S.pts;else if(b===this.ROLL_UP_2_ROWS_)this.rollUpRows_=2,this.setRollUp(S.pts);else if(b===this.ROLL_UP_3_ROWS_)this.rollUpRows_=3,this.setRollUp(S.pts);else if(b===this.ROLL_UP_4_ROWS_)this.rollUpRows_=4,this.setRollUp(S.pts);else if(b===this.CARRIAGE_RETURN_)this.clearFormatting(S.pts),this.flushDisplayed(S.pts),this.shiftRowsUp_(),this.startPts_=S.pts;else if(b===this.BACKSPACE_)this.mode_==="popOn"?this.nonDisplayed_[this.row_].text=this.nonDisplayed_[this.row_].text.slice(0,-1):this.displayed_[this.row_].text=this.displayed_[this.row_].text.slice(0,-1);else if(b===this.ERASE_DISPLAYED_MEMORY_)this.flushDisplayed(S.pts),this.displayed_=Pn();else if(b===this.ERASE_NON_DISPLAYED_MEMORY_)this.nonDisplayed_=Pn();else if(b===this.RESUME_DIRECT_CAPTIONING_)this.mode_!=="paintOn"&&(this.flushDisplayed(S.pts),this.displayed_=Pn()),this.mode_="paintOn",this.startPts_=S.pts;else if(this.isSpecialCharacter(R,G))R=(R&3)<<8,Y=Zr(R|G),this[this.mode_](S.pts,Y),this.column_++;else if(this.isExtCharacter(R,G))this.mode_==="popOn"?this.nonDisplayed_[this.row_].text=this.nonDisplayed_[this.row_].text.slice(0,-1):this.displayed_[this.row_].text=this.displayed_[this.row_].text.slice(0,-1),R=(R&3)<<8,Y=Zr(R|G),this[this.mode_](S.pts,Y),this.column_++;else if(this.isMidRowCode(R,G))this.clearFormatting(S.pts),this[this.mode_](S.pts," "),this.column_++,(G&14)===14&&this.addFormatting(S.pts,["i"]),(G&1)===1&&this.addFormatting(S.pts,["u"]);else if(this.isOffsetControlCode(R,G)){const re=G&3;this.nonDisplayed_[this.row_].offset=re,this.column_+=re}else if(this.isPAC(R,G)){var J=jr.indexOf(b&7968);if(this.mode_==="rollUp"&&(J-this.rollUpRows_+1<0&&(J=this.rollUpRows_-1),this.setRollUp(S.pts,J)),J!==this.row_&&J>=0&&J<=14&&(this.clearFormatting(S.pts),this.row_=J),G&1&&this.formatting_.indexOf("u")===-1&&this.addFormatting(S.pts,["u"]),(b&16)===16){const re=(b&14)>>1;this.column_=re*4,this.nonDisplayed_[this.row_].indent+=re}this.isColorPAC(G)&&(G&14)===14&&this.addFormatting(S.pts,["i"])}else this.isNormalChar(R)&&(G===0&&(G=null),Y=Zr(R),Y+=Zr(G),this[this.mode_](S.pts,Y),this.column_+=Y.length)}};ir.prototype=new _t,ir.prototype.flushDisplayed=function(p){const x=b=>{this.trigger("log",{level:"warn",message:"Skipping a malformed 608 caption at index "+b+"."})},S=[];this.displayed_.forEach((b,w)=>{if(b&&b.text&&b.text.length){try{b.text=b.text.trim()}catch{x(w)}b.text.length&&S.push({text:b.text,line:w+1,position:10+Math.min(70,b.indent*10)+b.offset*2.5})}else b==null&&x(w)}),S.length&&this.trigger("data",{startPts:this.startPts_,endPts:p,content:S,stream:this.name_})},ir.prototype.reset=function(){this.mode_="popOn",this.topRow_=0,this.startPts_=0,this.displayed_=Pn(),this.nonDisplayed_=Pn(),this.lastControlCode_=null,this.column_=0,this.row_=Br,this.rollUpRows_=2,this.formatting_=[]},ir.prototype.setConstants=function(){this.dataChannel_===0?(this.BASE_=16,this.EXT_=17,this.CONTROL_=(20|this.field_)<<8,this.OFFSET_=23):this.dataChannel_===1&&(this.BASE_=24,this.EXT_=25,this.CONTROL_=(28|this.field_)<<8,this.OFFSET_=31),this.PADDING_=0,this.RESUME_CAPTION_LOADING_=this.CONTROL_|32,this.END_OF_CAPTION_=this.CONTROL_|47,this.ROLL_UP_2_ROWS_=this.CONTROL_|37,this.ROLL_UP_3_ROWS_=this.CONTROL_|38,this.ROLL_UP_4_ROWS_=this.CONTROL_|39,this.CARRIAGE_RETURN_=this.CONTROL_|45,this.RESUME_DIRECT_CAPTIONING_=this.CONTROL_|41,this.BACKSPACE_=this.CONTROL_|33,this.ERASE_DISPLAYED_MEMORY_=this.CONTROL_|44,this.ERASE_NON_DISPLAYED_MEMORY_=this.CONTROL_|46},ir.prototype.isSpecialCharacter=function(p,x){return p===this.EXT_&&x>=48&&x<=63},ir.prototype.isExtCharacter=function(p,x){return(p===this.EXT_+1||p===this.EXT_+2)&&x>=32&&x<=63},ir.prototype.isMidRowCode=function(p,x){return p===this.EXT_&&x>=32&&x<=47},ir.prototype.isOffsetControlCode=function(p,x){return p===this.OFFSET_&&x>=33&&x<=35},ir.prototype.isPAC=function(p,x){return p>=this.BASE_&&p<this.BASE_+8&&x>=64&&x<=127},ir.prototype.isColorPAC=function(p){return p>=64&&p<=79||p>=96&&p<=127},ir.prototype.isNormalChar=function(p){return p>=32&&p<=127},ir.prototype.setRollUp=function(p,x){if(this.mode_!=="rollUp"&&(this.row_=Br,this.mode_="rollUp",this.flushDisplayed(p),this.nonDisplayed_=Pn(),this.displayed_=Pn()),x!==void 0&&x!==this.row_)for(var S=0;S<this.rollUpRows_;S++)this.displayed_[x-S]=this.displayed_[this.row_-S],this.displayed_[this.row_-S]={text:"",indent:0,offset:0};x===void 0&&(x=this.row_),this.topRow_=x-this.rollUpRows_+1},ir.prototype.addFormatting=function(p,x){this.formatting_=this.formatting_.concat(x);var S=x.reduce(function(b,w){return b+"<"+w+">"},"");this[this.mode_](p,S)},ir.prototype.clearFormatting=function(p){if(this.formatting_.length){var x=this.formatting_.reverse().reduce(function(S,b){return S+"</"+b+">"},"");this.formatting_=[],this[this.mode_](p,x)}},ir.prototype.popOn=function(p,x){var S=this.nonDisplayed_[this.row_].text;S+=x,this.nonDisplayed_[this.row_].text=S},ir.prototype.rollUp=function(p,x){var S=this.displayed_[this.row_].text;S+=x,this.displayed_[this.row_].text=S},ir.prototype.shiftRowsUp_=function(){var p;for(p=0;p<this.topRow_;p++)this.displayed_[p]={text:"",indent:0,offset:0};for(p=this.row_+1;p<Br+1;p++)this.displayed_[p]={text:"",indent:0,offset:0};for(p=this.topRow_;p<this.row_;p++)this.displayed_[p]=this.displayed_[p+1];this.displayed_[this.row_]={text:"",indent:0,offset:0}},ir.prototype.paintOn=function(p,x){var S=this.displayed_[this.row_].text;S+=x,this.displayed_[this.row_].text=S};var Ti={CaptionStream:ct,Cea608Stream:ir,Cea708Stream:Tt},yn={H264_STREAM_TYPE:27,ADTS_STREAM_TYPE:15,METADATA_STREAM_TYPE:21},Cs=t,nn=8589934592,ws=4294967296,hi="shared",si=function(p,x){var S=1;for(p>x&&(S=-1);Math.abs(x-p)>ws;)p+=S*nn;return p},Mr=function(p){var x,S;Mr.prototype.init.call(this),this.type_=p||hi,this.push=function(b){if(b.type==="metadata"){this.trigger("data",b);return}this.type_!==hi&&b.type!==this.type_||(S===void 0&&(S=b.dts),b.dts=si(b.dts,S),b.pts=si(b.pts,S),x=b.dts,this.trigger("data",b))},this.flush=function(){S=x,this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")},this.discontinuity=function(){S=void 0,x=void 0},this.reset=function(){this.discontinuity(),this.trigger("reset")}};Mr.prototype=new Cs;var ke={TimestampRolloverStream:Mr,handleRollover:si},$e=(p,x,S)=>{if(!p)return-1;for(var b=S;b<p.length;b++)if(p[b]===x)return b;return-1},Je={typedArrayIndexOf:$e},tt=Je.typedArrayIndexOf,xt={Utf8:3},kt=function(p,x,S){var b,w="";for(b=x;b<S;b++)w+="%"+("00"+p[b].toString(16)).slice(-2);return w},Bt=function(p,x,S){return decodeURIComponent(kt(p,x,S))},Tr=function(p,x,S){return unescape(kt(p,x,S))},Wr=function(p){return p[0]<<21|p[1]<<14|p[2]<<7|p[3]},xn={APIC:function(p){var x=1,S,b,w="-->";p.data[0]===xt.Utf8&&(S=tt(p.data,0,x),!(S<0)&&(p.mimeType=Tr(p.data,x,S),x=S+1,p.pictureType=p.data[x],x++,b=tt(p.data,0,x),!(b<0)&&(p.description=Bt(p.data,x,b),x=b+1,p.mimeType===w?p.url=Tr(p.data,x,p.data.length):p.pictureData=p.data.subarray(x,p.data.length))))},"T*":function(p){p.data[0]===xt.Utf8&&(p.value=Bt(p.data,1,p.data.length).replace(/\0*$/,""),p.values=p.value.split("\0"))},TXXX:function(p){var x;p.data[0]===xt.Utf8&&(x=tt(p.data,0,1),x!==-1&&(p.description=Bt(p.data,1,x),p.value=Bt(p.data,x+1,p.data.length).replace(/\0*$/,""),p.data=p.value))},"W*":function(p){p.url=Tr(p.data,0,p.data.length).replace(/\0.*$/,"")},WXXX:function(p){var x;p.data[0]===xt.Utf8&&(x=tt(p.data,0,1),x!==-1&&(p.description=Bt(p.data,1,x),p.url=Tr(p.data,x+1,p.data.length).replace(/\0.*$/,"")))},PRIV:function(p){var x;for(x=0;x<p.data.length;x++)if(p.data[x]===0){p.owner=Tr(p.data,0,x);break}p.privateData=p.data.subarray(x+1),p.data=p.privateData}},Er=function(p){var x,S,b=10,w=0,R=[];if(!(p.length<10||p[0]!==73||p[1]!==68||p[2]!==51)){w=Wr(p.subarray(6,10)),w+=10;var G=p[5]&64;G&&(b+=4,b+=Wr(p.subarray(10,14)),w-=Wr(p.subarray(16,20)));do{if(x=Wr(p.subarray(b+4,b+8)),x<1)break;S=String.fromCharCode(p[b],p[b+1],p[b+2],p[b+3]);var Y={id:S,data:p.subarray(b+10,b+x+10)};Y.key=Y.id,xn[Y.id]?xn[Y.id](Y):Y.id[0]==="T"?xn["T*"](Y):Y.id[0]==="W"&&xn["W*"](Y),R.push(Y),b+=10,b+=x}while(b<w);return R}},fi={parseId3Frames:Er,parseSyncSafeInteger:Wr,frameParsers:xn},zr=t,On=yn,$n=fi,Es;Es=function(p){var x={descriptor:p&&p.descriptor},S=0,b=[],w=0,R;if(Es.prototype.init.call(this),this.dispatchType=On.METADATA_STREAM_TYPE.toString(16),x.descriptor)for(R=0;R<x.descriptor.length;R++)this.dispatchType+=("00"+x.descriptor[R].toString(16)).slice(-2);this.push=function(G){var Y,J,re,he,ve,qe;if(G.type==="timed-metadata"){if(G.dataAlignmentIndicator&&(w=0,b.length=0),b.length===0&&(G.data.length<10||G.data[0]!==73||G.data[1]!==68||G.data[2]!==51)){this.trigger("log",{level:"warn",message:"Skipping unrecognized metadata packet"});return}if(b.push(G),w+=G.data.byteLength,b.length===1&&(S=$n.parseSyncSafeInteger(G.data.subarray(6,10)),S+=10),!(w<S)){for(Y={data:new Uint8Array(S),frames:[],pts:b[0].pts,dts:b[0].dts},ve=0;ve<S;)Y.data.set(b[0].data.subarray(0,S-ve),ve),ve+=b[0].data.byteLength,w-=b[0].data.byteLength,b.shift();J=10,Y.data[5]&64&&(J+=4,J+=$n.parseSyncSafeInteger(Y.data.subarray(10,14)),S-=$n.parseSyncSafeInteger(Y.data.subarray(16,20)));do{if(re=$n.parseSyncSafeInteger(Y.data.subarray(J+4,J+8)),re<1){this.trigger("log",{level:"warn",message:"Malformed ID3 frame encountered. Skipping remaining metadata parsing."});break}if(qe=String.fromCharCode(Y.data[J],Y.data[J+1],Y.data[J+2],Y.data[J+3]),he={id:qe,data:Y.data.subarray(J+10,J+re+10)},he.key=he.id,$n.frameParsers[he.id]?$n.frameParsers[he.id](he):he.id[0]==="T"?$n.frameParsers["T*"](he):he.id[0]==="W"&&$n.frameParsers["W*"](he),he.owner==="com.apple.streaming.transportStreamTimestamp"){var Ee=he.data,Ct=(Ee[3]&1)<<30|Ee[4]<<22|Ee[5]<<14|Ee[6]<<6|Ee[7]>>>2;Ct*=4,Ct+=Ee[7]&3,he.timeStamp=Ct,Y.pts===void 0&&Y.dts===void 0&&(Y.pts=he.timeStamp,Y.dts=he.timeStamp),this.trigger("timestamp",he)}Y.frames.push(he),J+=10,J+=re}while(J<S);this.trigger("data",Y)}}}},Es.prototype=new zr;var Hc=Es,ks=t,zi=Ti,Rn=yn,Xu=ke.TimestampRolloverStream,qr,ls,fa,Pi=188,Wa=71;qr=function(){var p=new Uint8Array(Pi),x=0;qr.prototype.init.call(this),this.push=function(S){var b=0,w=Pi,R;for(x?(R=new Uint8Array(S.byteLength+x),R.set(p.subarray(0,x)),R.set(S,x),x=0):R=S;w<R.byteLength;){if(R[b]===Wa&&R[w]===Wa){this.trigger("data",R.subarray(b,w)),b+=Pi,w+=Pi;continue}b++,w++}b<R.byteLength&&(p.set(R.subarray(b),0),x=R.byteLength-b)},this.flush=function(){x===Pi&&p[0]===Wa&&(this.trigger("data",p),x=0),this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")},this.reset=function(){x=0,this.trigger("reset")}},qr.prototype=new ks,ls=function(){var p,x,S,b;ls.prototype.init.call(this),b=this,this.packetsWaitingForPmt=[],this.programMapTable=void 0,p=function(w,R){var G=0;R.payloadUnitStartIndicator&&(G+=w[G]+1),R.type==="pat"?x(w.subarray(G),R):S(w.subarray(G),R)},x=function(w,R){R.section_number=w[7],R.last_section_number=w[8],b.pmtPid=(w[10]&31)<<8|w[11],R.pmtPid=b.pmtPid},S=function(w,R){var G,Y,J,re;if(w[5]&1){for(b.programMapTable={video:null,audio:null,"timed-metadata":{}},G=(w[1]&15)<<8|w[2],Y=3+G-4,J=(w[10]&15)<<8|w[11],re=12+J;re<Y;){var he=w[re],ve=(w[re+1]&31)<<8|w[re+2];he===Rn.H264_STREAM_TYPE&&b.programMapTable.video===null?b.programMapTable.video=ve:he===Rn.ADTS_STREAM_TYPE&&b.programMapTable.audio===null?b.programMapTable.audio=ve:he===Rn.METADATA_STREAM_TYPE&&(b.programMapTable["timed-metadata"][ve]=he),re+=((w[re+3]&15)<<8|w[re+4])+5}R.programMapTable=b.programMapTable}},this.push=function(w){var R={},G=4;if(R.payloadUnitStartIndicator=!!(w[1]&64),R.pid=w[1]&31,R.pid<<=8,R.pid|=w[2],(w[3]&48)>>>4>1&&(G+=w[G]+1),R.pid===0)R.type="pat",p(w.subarray(G),R),this.trigger("data",R);else if(R.pid===this.pmtPid)for(R.type="pmt",p(w.subarray(G),R),this.trigger("data",R);this.packetsWaitingForPmt.length;)this.processPes_.apply(this,this.packetsWaitingForPmt.shift());else this.programMapTable===void 0?this.packetsWaitingForPmt.push([w,G,R]):this.processPes_(w,G,R)},this.processPes_=function(w,R,G){G.pid===this.programMapTable.video?G.streamType=Rn.H264_STREAM_TYPE:G.pid===this.programMapTable.audio?G.streamType=Rn.ADTS_STREAM_TYPE:G.streamType=this.programMapTable["timed-metadata"][G.pid],G.type="pes",G.data=w.subarray(R),this.trigger("data",G)}},ls.prototype=new ks,ls.STREAM_TYPES={h264:27,adts:15},fa=function(){var p=this,x=!1,S={data:[],size:0},b={data:[],size:0},w={data:[],size:0},R,G=function(J,re){var he;const ve=J[0]<<16|J[1]<<8|J[2];re.data=new Uint8Array,ve===1&&(re.packetLength=6+(J[4]<<8|J[5]),re.dataAlignmentIndicator=(J[6]&4)!==0,he=J[7],he&192&&(re.pts=(J[9]&14)<<27|(J[10]&255)<<20|(J[11]&254)<<12|(J[12]&255)<<5|(J[13]&254)>>>3,re.pts*=4,re.pts+=(J[13]&6)>>>1,re.dts=re.pts,he&64&&(re.dts=(J[14]&14)<<27|(J[15]&255)<<20|(J[16]&254)<<12|(J[17]&255)<<5|(J[18]&254)>>>3,re.dts*=4,re.dts+=(J[18]&6)>>>1)),re.data=J.subarray(9+J[8]))},Y=function(J,re,he){var ve=new Uint8Array(J.size),qe={type:re},Ee=0,Ct=0,Wt=!1,Gr;if(!(!J.data.length||J.size<9)){for(qe.trackId=J.data[0].pid,Ee=0;Ee<J.data.length;Ee++)Gr=J.data[Ee],ve.set(Gr.data,Ct),Ct+=Gr.data.byteLength;G(ve,qe),Wt=re==="video"||qe.packetLength<=J.size,(he||Wt)&&(J.size=0,J.data.length=0),Wt&&p.trigger("data",qe)}};fa.prototype.init.call(this),this.push=function(J){({pat:function(){},pes:function(){var re,he;switch(J.streamType){case Rn.H264_STREAM_TYPE:re=S,he="video";break;case Rn.ADTS_STREAM_TYPE:re=b,he="audio";break;case Rn.METADATA_STREAM_TYPE:re=w,he="timed-metadata";break;default:return}J.payloadUnitStartIndicator&&Y(re,he,!0),re.data.push(J),re.size+=J.data.byteLength},pmt:function(){var re={type:"metadata",tracks:[]};R=J.programMapTable,R.video!==null&&re.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+R.video,codec:"avc",type:"video"}),R.audio!==null&&re.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+R.audio,codec:"adts",type:"audio"}),x=!0,p.trigger("data",re)}})[J.type]()},this.reset=function(){S.size=0,S.data.length=0,b.size=0,b.data.length=0,this.trigger("reset")},this.flushStreams_=function(){Y(S,"video"),Y(b,"audio"),Y(w,"timed-metadata")},this.flush=function(){if(!x&&R){var J={type:"metadata",tracks:[]};R.video!==null&&J.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+R.video,codec:"avc",type:"video"}),R.audio!==null&&J.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+R.audio,codec:"adts",type:"audio"}),p.trigger("data",J)}x=!1,this.flushStreams_(),this.trigger("done")}},fa.prototype=new ks;var Hl={PAT_PID:0,MP2T_PACKET_LENGTH:Pi,TransportPacketStream:qr,TransportParseStream:ls,ElementaryStream:fa,TimestampRolloverStream:Xu,CaptionStream:zi.CaptionStream,Cea608Stream:zi.Cea608Stream,Cea708Stream:zi.Cea708Stream,MetadataStream:Hc};for(var To in Rn)Rn.hasOwnProperty(To)&&(Hl[To]=Rn[To]);var Yu=Hl,Vl=t,pa=Ut.ONE_SECOND_IN_TS,Ci,Ri=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];Ci=function(p){var x,S=0;Ci.prototype.init.call(this),this.skipWarn_=function(b,w){this.trigger("log",{level:"warn",message:`adts skiping bytes ${b} to ${w} in frame ${S} outside syncword`})},this.push=function(b){var w=0,R,G,Y,J,re;if(p||(S=0),b.type==="audio"){x&&x.length?(Y=x,x=new Uint8Array(Y.byteLength+b.data.byteLength),x.set(Y),x.set(b.data,Y.byteLength)):x=b.data;for(var he;w+7<x.length;){if(x[w]!==255||(x[w+1]&246)!==240){typeof he!="number"&&(he=w),w++;continue}if(typeof he=="number"&&(this.skipWarn_(he,w),he=null),G=(~x[w+1]&1)*2,R=(x[w+3]&3)<<11|x[w+4]<<3|(x[w+5]&224)>>5,J=((x[w+6]&3)+1)*1024,re=J*pa/Ri[(x[w+2]&60)>>>2],x.byteLength-w<R)break;this.trigger("data",{pts:b.pts+S*re,dts:b.dts+S*re,sampleCount:J,audioobjecttype:(x[w+2]>>>6&3)+1,channelcount:(x[w+2]&1)<<2|(x[w+3]&192)>>>6,samplerate:Ri[(x[w+2]&60)>>>2],samplingfrequencyindex:(x[w+2]&60)>>>2,samplesize:16,data:x.subarray(w+7+G,w+R)}),S++,w+=R}typeof he=="number"&&(this.skipWarn_(he,w),he=null),x=x.subarray(w)}},this.flush=function(){S=0,this.trigger("done")},this.reset=function(){x=void 0,this.trigger("reset")},this.endTimeline=function(){x=void 0,this.trigger("endedtimeline")}},Ci.prototype=new Vl;var ma=Ci,qa;qa=function(p){var x=p.byteLength,S=0,b=0;this.length=function(){return 8*x},this.bitsAvailable=function(){return 8*x+b},this.loadWord=function(){var w=p.byteLength-x,R=new Uint8Array(4),G=Math.min(4,x);if(G===0)throw new Error("no bytes available");R.set(p.subarray(w,w+G)),S=new DataView(R.buffer).getUint32(0),b=G*8,x-=G},this.skipBits=function(w){var R;b>w?(S<<=w,b-=w):(w-=b,R=Math.floor(w/8),w-=R*8,x-=R,this.loadWord(),S<<=w,b-=w)},this.readBits=function(w){var R=Math.min(b,w),G=S>>>32-R;return b-=R,b>0?S<<=R:x>0&&this.loadWord(),R=w-R,R>0?G<<R|this.readBits(R):G},this.skipLeadingZeros=function(){var w;for(w=0;w<b;++w)if((S&2147483648>>>w)!==0)return S<<=w,b-=w,w;return this.loadWord(),w+this.skipLeadingZeros()},this.skipUnsignedExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.skipExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.readUnsignedExpGolomb=function(){var w=this.skipLeadingZeros();return this.readBits(w+1)-1},this.readExpGolomb=function(){var w=this.readUnsignedExpGolomb();return 1&w?1+w>>>1:-1*(w>>>1)},this.readBoolean=function(){return this.readBits(1)===1},this.readUnsignedByte=function(){return this.readBits(8)},this.loadWord()};var ga=qa,Wl=t,Vc=ga,Hi,Ga,ql;Ga=function(){var p=0,x,S;Ga.prototype.init.call(this),this.push=function(b){var w;S?(w=new Uint8Array(S.byteLength+b.data.byteLength),w.set(S),w.set(b.data,S.byteLength),S=w):S=b.data;for(var R=S.byteLength;p<R-3;p++)if(S[p+2]===1){x=p+5;break}for(;x<R;)switch(S[x]){case 0:if(S[x-1]!==0){x+=2;break}else if(S[x-2]!==0){x++;break}p+3!==x-2&&this.trigger("data",S.subarray(p+3,x-2));do x++;while(S[x]!==1&&x<R);p=x-2,x+=3;break;case 1:if(S[x-1]!==0||S[x-2]!==0){x+=3;break}this.trigger("data",S.subarray(p+3,x-2)),p=x-2,x+=3;break;default:x+=3;break}S=S.subarray(p),x-=p,p=0},this.reset=function(){S=null,p=0,this.trigger("reset")},this.flush=function(){S&&S.byteLength>3&&this.trigger("data",S.subarray(p+3)),S=null,p=0,this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")}},Ga.prototype=new Wl,ql={100:!0,110:!0,122:!0,244:!0,44:!0,83:!0,86:!0,118:!0,128:!0,138:!0,139:!0,134:!0},Hi=function(){var p=new Ga,x,S,b,w,R,G,Y;Hi.prototype.init.call(this),x=this,this.push=function(J){J.type==="video"&&(S=J.trackId,b=J.pts,w=J.dts,p.push(J))},p.on("data",function(J){var re={trackId:S,pts:b,dts:w,data:J,nalUnitTypeCode:J[0]&31};switch(re.nalUnitTypeCode){case 5:re.nalUnitType="slice_layer_without_partitioning_rbsp_idr";break;case 6:re.nalUnitType="sei_rbsp",re.escapedRBSP=R(J.subarray(1));break;case 7:re.nalUnitType="seq_parameter_set_rbsp",re.escapedRBSP=R(J.subarray(1)),re.config=G(re.escapedRBSP);break;case 8:re.nalUnitType="pic_parameter_set_rbsp";break;case 9:re.nalUnitType="access_unit_delimiter_rbsp";break}x.trigger("data",re)}),p.on("done",function(){x.trigger("done")}),p.on("partialdone",function(){x.trigger("partialdone")}),p.on("reset",function(){x.trigger("reset")}),p.on("endedtimeline",function(){x.trigger("endedtimeline")}),this.flush=function(){p.flush()},this.partialFlush=function(){p.partialFlush()},this.reset=function(){p.reset()},this.endTimeline=function(){p.endTimeline()},Y=function(J,re){var he=8,ve=8,qe,Ee;for(qe=0;qe<J;qe++)ve!==0&&(Ee=re.readExpGolomb(),ve=(he+Ee+256)%256),he=ve===0?he:ve},R=function(J){for(var re=J.byteLength,he=[],ve=1,qe,Ee;ve<re-2;)J[ve]===0&&J[ve+1]===0&&J[ve+2]===3?(he.push(ve+2),ve+=2):ve++;if(he.length===0)return J;qe=re-he.length,Ee=new Uint8Array(qe);var Ct=0;for(ve=0;ve<qe;Ct++,ve++)Ct===he[0]&&(Ct++,he.shift()),Ee[ve]=J[Ct];return Ee},G=function(J){var re=0,he=0,ve=0,qe=0,Ee,Ct,Wt,Gr,pn,gi,Ro,iu,lc,ba,Sa,Jt=[1,1],gn,Kn;if(Ee=new Vc(J),Ct=Ee.readUnsignedByte(),Gr=Ee.readUnsignedByte(),Wt=Ee.readUnsignedByte(),Ee.skipUnsignedExpGolomb(),ql[Ct]&&(pn=Ee.readUnsignedExpGolomb(),pn===3&&Ee.skipBits(1),Ee.skipUnsignedExpGolomb(),Ee.skipUnsignedExpGolomb(),Ee.skipBits(1),Ee.readBoolean()))for(Sa=pn!==3?8:12,Kn=0;Kn<Sa;Kn++)Ee.readBoolean()&&(Kn<6?Y(16,Ee):Y(64,Ee));if(Ee.skipUnsignedExpGolomb(),gi=Ee.readUnsignedExpGolomb(),gi===0)Ee.readUnsignedExpGolomb();else if(gi===1)for(Ee.skipBits(1),Ee.skipExpGolomb(),Ee.skipExpGolomb(),Ro=Ee.readUnsignedExpGolomb(),Kn=0;Kn<Ro;Kn++)Ee.skipExpGolomb();if(Ee.skipUnsignedExpGolomb(),Ee.skipBits(1),iu=Ee.readUnsignedExpGolomb(),lc=Ee.readUnsignedExpGolomb(),ba=Ee.readBits(1),ba===0&&Ee.skipBits(1),Ee.skipBits(1),Ee.readBoolean()&&(re=Ee.readUnsignedExpGolomb(),he=Ee.readUnsignedExpGolomb(),ve=Ee.readUnsignedExpGolomb(),qe=Ee.readUnsignedExpGolomb()),Ee.readBoolean()&&Ee.readBoolean()){switch(gn=Ee.readUnsignedByte(),gn){case 1:Jt=[1,1];break;case 2:Jt=[12,11];break;case 3:Jt=[10,11];break;case 4:Jt=[16,11];break;case 5:Jt=[40,33];break;case 6:Jt=[24,11];break;case 7:Jt=[20,11];break;case 8:Jt=[32,11];break;case 9:Jt=[80,33];break;case 10:Jt=[18,11];break;case 11:Jt=[15,11];break;case 12:Jt=[64,33];break;case 13:Jt=[160,99];break;case 14:Jt=[4,3];break;case 15:Jt=[3,2];break;case 16:Jt=[2,1];break;case 255:{Jt=[Ee.readUnsignedByte()<<8|Ee.readUnsignedByte(),Ee.readUnsignedByte()<<8|Ee.readUnsignedByte()];break}}Jt&&Jt[0]/Jt[1]}return{profileIdc:Ct,levelIdc:Wt,profileCompatibility:Gr,width:(iu+1)*16-re*2-he*2,height:(2-ba)*(lc+1)*16-ve*2-qe*2,sarRatio:Jt}}},Hi.prototype=new Wl;var Gl={H264Stream:Hi},dl=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],Ka=function(p,x){var S=p[x+6]<<21|p[x+7]<<14|p[x+8]<<7|p[x+9],b=p[x+5],w=(b&16)>>4;return S=S>=0?S:0,w?S+20:S+10},As=function(p,x){return p.length-x<10||p[x]!==73||p[x+1]!==68||p[x+2]!==51?x:(x+=Ka(p,x),As(p,x))},us=function(p){var x=As(p,0);return p.length>=x+2&&(p[x]&255)===255&&(p[x+1]&240)===240&&(p[x+1]&22)===16},va=function(p){return p[0]<<21|p[1]<<14|p[2]<<7|p[3]},hl=function(p,x,S){var b,w="";for(b=x;b<S;b++)w+="%"+("00"+p[b].toString(16)).slice(-2);return w},Wc=function(p,x,S){return unescape(hl(p,x,S))},qc=function(p,x){var S=(p[x+5]&224)>>5,b=p[x+4]<<3,w=p[x+3]&6144;return w|b|S},Qu=function(p,x){return p[x]===73&&p[x+1]===68&&p[x+2]===51?"timed-metadata":p[x]&!0&&(p[x+1]&240)===240?"audio":null},Kl=function(p){for(var x=0;x+5<p.length;){if(p[x]!==255||(p[x+1]&246)!==240){x++;continue}return dl[(p[x+2]&60)>>>2]}return null},Ju=function(p){var x,S,b,w;x=10,p[5]&64&&(x+=4,x+=va(p.subarray(10,14)));do{if(S=va(p.subarray(x+4,x+8)),S<1)return null;if(w=String.fromCharCode(p[x],p[x+1],p[x+2],p[x+3]),w==="PRIV"){b=p.subarray(x+10,x+S+10);for(var R=0;R<b.byteLength;R++)if(b[R]===0){var G=Wc(b,0,R);if(G==="com.apple.streaming.transportStreamTimestamp"){var Y=b.subarray(R+1),J=(Y[3]&1)<<30|Y[4]<<22|Y[5]<<14|Y[6]<<6|Y[7]>>>2;return J*=4,J+=Y[7]&3,J}break}}x+=10,x+=S}while(x<p.byteLength);return null},Vs={isLikelyAacData:us,parseId3TagSize:Ka,parseAdtsSize:qc,parseType:Qu,parseSampleRate:Kl,parseAacTimestamp:Ju},ya=t,cs=Vs,Ds;Ds=function(){var p=new Uint8Array,x=0;Ds.prototype.init.call(this),this.setTimestamp=function(S){x=S},this.push=function(S){var b=0,w=0,R,G,Y,J;for(p.length?(J=p.length,p=new Uint8Array(S.byteLength+J),p.set(p.subarray(0,J)),p.set(S,J)):p=S;p.length-w>=3;){if(p[w]===73&&p[w+1]===68&&p[w+2]===51){if(p.length-w<10||(b=cs.parseId3TagSize(p,w),w+b>p.length))break;G={type:"timed-metadata",data:p.subarray(w,w+b)},this.trigger("data",G),w+=b;continue}else if((p[w]&255)===255&&(p[w+1]&240)===240){if(p.length-w<7||(b=cs.parseAdtsSize(p,w),w+b>p.length))break;Y={type:"audio",data:p.subarray(w,w+b),pts:x,dts:x},this.trigger("data",Y),w+=b;continue}w++}R=p.length-w,R>0?p=p.subarray(w):p=new Uint8Array},this.reset=function(){p=new Uint8Array,this.trigger("reset")},this.endTimeline=function(){p=new Uint8Array,this.trigger("endedtimeline")}},Ds.prototype=new ya;var Gc=Ds,un=["audioobjecttype","channelcount","samplerate","samplingfrequencyindex","samplesize"],Xl=un,Kc=["width","height","profileIdc","levelIdc","profileCompatibility","sarRatio"],Li=Kc,Oi=t,ds=st,wi=et,Xa=wn,En=je,Hn=Yu,Vi=Ut,Ya=ma,Co=Gl.H264Stream,fl=Gc,ih=Vs.isLikelyAacData,sh=Ut.ONE_SECOND_IN_TS,pl=Xl,Zu=Li,Qa,Ws,Ja,Mi,Xc=function(p,x){x.stream=p,this.trigger("log",x)},wo=function(p,x){for(var S=Object.keys(x),b=0;b<S.length;b++){var w=S[b];w==="headOfPipeline"||!x[w].on||x[w].on("log",Xc.bind(p,w))}},Za=function(p,x){var S;if(p.length!==x.length)return!1;for(S=0;S<p.length;S++)if(p[S]!==x[S])return!1;return!0},ec=function(p,x,S,b,w,R){var G=S-x,Y=b-x,J=w-S;return{start:{dts:p,pts:p+G},end:{dts:p+Y,pts:p+J},prependedContentDuration:R,baseMediaDecodeTime:p}};Ws=function(p,x){var S=[],b,w=0,R=0,G=1/0;x=x||{},b=x.firstSequenceNumber||0,Ws.prototype.init.call(this),this.push=function(Y){En.collectDtsInfo(p,Y),p&&pl.forEach(function(J){p[J]=Y[J]}),S.push(Y)},this.setEarliestDts=function(Y){w=Y},this.setVideoBaseMediaDecodeTime=function(Y){G=Y},this.setAudioAppendStart=function(Y){R=Y},this.flush=function(){var Y,J,re,he,ve,qe,Ee;if(S.length===0){this.trigger("done","AudioSegmentStream");return}Y=Xa.trimAdtsFramesByEarliestDts(S,p,w),p.baseMediaDecodeTime=En.calculateTrackBaseMediaDecodeTime(p,x.keepOriginalTimestamps),Ee=Xa.prefixWithSilence(p,Y,R,G),p.samples=Xa.generateSampleTable(Y),re=ds.mdat(Xa.concatenateFrameData(Y)),S=[],J=ds.moof(b,[p]),he=new Uint8Array(J.byteLength+re.byteLength),b++,he.set(J),he.set(re,J.byteLength),En.clearDtsInfo(p),ve=Math.ceil(sh*1024/p.samplerate),Y.length&&(qe=Y.length*ve,this.trigger("segmentTimingInfo",ec(Vi.audioTsToVideoTs(p.baseMediaDecodeTime,p.samplerate),Y[0].dts,Y[0].pts,Y[0].dts+qe,Y[0].pts+qe,Ee||0)),this.trigger("timingInfo",{start:Y[0].pts,end:Y[0].pts+qe})),this.trigger("data",{track:p,boxes:he}),this.trigger("done","AudioSegmentStream")},this.reset=function(){En.clearDtsInfo(p),S=[],this.trigger("reset")}},Ws.prototype=new Oi,Qa=function(p,x){var S,b=[],w=[],R,G;x=x||{},S=x.firstSequenceNumber||0,Qa.prototype.init.call(this),delete p.minPTS,this.gopCache_=[],this.push=function(Y){En.collectDtsInfo(p,Y),Y.nalUnitType==="seq_parameter_set_rbsp"&&!R&&(R=Y.config,p.sps=[Y.data],Zu.forEach(function(J){p[J]=R[J]},this)),Y.nalUnitType==="pic_parameter_set_rbsp"&&!G&&(G=Y.data,p.pps=[Y.data]),b.push(Y)},this.flush=function(){for(var Y,J,re,he,ve,qe,Ee=0,Ct,Wt;b.length&&b[0].nalUnitType!=="access_unit_delimiter_rbsp";)b.shift();if(b.length===0){this.resetStream_(),this.trigger("done","VideoSegmentStream");return}if(Y=wi.groupNalsIntoFrames(b),re=wi.groupFramesIntoGops(Y),re[0][0].keyFrame||(J=this.getGopForFusion_(b[0],p),J?(Ee=J.duration,re.unshift(J),re.byteLength+=J.byteLength,re.nalCount+=J.nalCount,re.pts=J.pts,re.dts=J.dts,re.duration+=J.duration):re=wi.extendFirstKeyFrame(re)),w.length){var Gr;if(x.alignGopsAtEnd?Gr=this.alignGopsAtEnd_(re):Gr=this.alignGopsAtStart_(re),!Gr){this.gopCache_.unshift({gop:re.pop(),pps:p.pps,sps:p.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),b=[],this.resetStream_(),this.trigger("done","VideoSegmentStream");return}En.clearDtsInfo(p),re=Gr}En.collectDtsInfo(p,re),p.samples=wi.generateSampleTable(re),ve=ds.mdat(wi.concatenateNalData(re)),p.baseMediaDecodeTime=En.calculateTrackBaseMediaDecodeTime(p,x.keepOriginalTimestamps),this.trigger("processedGopsInfo",re.map(function(pn){return{pts:pn.pts,dts:pn.dts,byteLength:pn.byteLength}})),Ct=re[0],Wt=re[re.length-1],this.trigger("segmentTimingInfo",ec(p.baseMediaDecodeTime,Ct.dts,Ct.pts,Wt.dts+Wt.duration,Wt.pts+Wt.duration,Ee)),this.trigger("timingInfo",{start:re[0].pts,end:re[re.length-1].pts+re[re.length-1].duration}),this.gopCache_.unshift({gop:re.pop(),pps:p.pps,sps:p.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),b=[],this.trigger("baseMediaDecodeTime",p.baseMediaDecodeTime),this.trigger("timelineStartInfo",p.timelineStartInfo),he=ds.moof(S,[p]),qe=new Uint8Array(he.byteLength+ve.byteLength),S++,qe.set(he),qe.set(ve,he.byteLength),this.trigger("data",{track:p,boxes:qe}),this.resetStream_(),this.trigger("done","VideoSegmentStream")},this.reset=function(){this.resetStream_(),b=[],this.gopCache_.length=0,w.length=0,this.trigger("reset")},this.resetStream_=function(){En.clearDtsInfo(p),R=void 0,G=void 0},this.getGopForFusion_=function(Y){var J=45e3,re=1/0,he,ve,qe,Ee,Ct;for(Ct=0;Ct<this.gopCache_.length;Ct++)Ee=this.gopCache_[Ct],qe=Ee.gop,!(!(p.pps&&Za(p.pps[0],Ee.pps[0]))||!(p.sps&&Za(p.sps[0],Ee.sps[0])))&&(qe.dts<p.timelineStartInfo.dts||(he=Y.dts-qe.dts-qe.duration,he>=-1e4&&he<=J&&(!ve||re>he)&&(ve=Ee,re=he)));return ve?ve.gop:null},this.alignGopsAtStart_=function(Y){var J,re,he,ve,qe,Ee,Ct,Wt;for(qe=Y.byteLength,Ee=Y.nalCount,Ct=Y.duration,J=re=0;J<w.length&&re<Y.length&&(he=w[J],ve=Y[re],he.pts!==ve.pts);){if(ve.pts>he.pts){J++;continue}re++,qe-=ve.byteLength,Ee-=ve.nalCount,Ct-=ve.duration}return re===0?Y:re===Y.length?null:(Wt=Y.slice(re),Wt.byteLength=qe,Wt.duration=Ct,Wt.nalCount=Ee,Wt.pts=Wt[0].pts,Wt.dts=Wt[0].dts,Wt)},this.alignGopsAtEnd_=function(Y){var J,re,he,ve,qe,Ee;for(J=w.length-1,re=Y.length-1,qe=null,Ee=!1;J>=0&&re>=0;){if(he=w[J],ve=Y[re],he.pts===ve.pts){Ee=!0;break}if(he.pts>ve.pts){J--;continue}J===w.length-1&&(qe=re),re--}if(!Ee&&qe===null)return null;var Ct;if(Ee?Ct=re:Ct=qe,Ct===0)return Y;var Wt=Y.slice(Ct),Gr=Wt.reduce(function(pn,gi){return pn.byteLength+=gi.byteLength,pn.duration+=gi.duration,pn.nalCount+=gi.nalCount,pn},{byteLength:0,duration:0,nalCount:0});return Wt.byteLength=Gr.byteLength,Wt.duration=Gr.duration,Wt.nalCount=Gr.nalCount,Wt.pts=Wt[0].pts,Wt.dts=Wt[0].dts,Wt},this.alignGopsWith=function(Y){w=Y}},Qa.prototype=new Oi,Mi=function(p,x){this.numberOfTracks=0,this.metadataStream=x,p=p||{},typeof p.remux<"u"?this.remuxTracks=!!p.remux:this.remuxTracks=!0,typeof p.keepOriginalTimestamps=="boolean"?this.keepOriginalTimestamps=p.keepOriginalTimestamps:this.keepOriginalTimestamps=!1,this.pendingTracks=[],this.videoTrack=null,this.pendingBoxes=[],this.pendingCaptions=[],this.pendingMetadata=[],this.pendingBytes=0,this.emittedTracks=0,Mi.prototype.init.call(this),this.push=function(S){if(S.content||S.text)return this.pendingCaptions.push(S);if(S.frames)return this.pendingMetadata.push(S);this.pendingTracks.push(S.track),this.pendingBytes+=S.boxes.byteLength,S.track.type==="video"&&(this.videoTrack=S.track,this.pendingBoxes.push(S.boxes)),S.track.type==="audio"&&(this.audioTrack=S.track,this.pendingBoxes.unshift(S.boxes))}},Mi.prototype=new Oi,Mi.prototype.flush=function(p){var x=0,S={captions:[],captionStreams:{},metadata:[],info:{}},b,w,R,G=0,Y;if(this.pendingTracks.length<this.numberOfTracks){if(p!=="VideoSegmentStream"&&p!=="AudioSegmentStream")return;if(this.remuxTracks)return;if(this.pendingTracks.length===0){this.emittedTracks++,this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0);return}}if(this.videoTrack?(G=this.videoTrack.timelineStartInfo.pts,Zu.forEach(function(J){S.info[J]=this.videoTrack[J]},this)):this.audioTrack&&(G=this.audioTrack.timelineStartInfo.pts,pl.forEach(function(J){S.info[J]=this.audioTrack[J]},this)),this.videoTrack||this.audioTrack){for(this.pendingTracks.length===1?S.type=this.pendingTracks[0].type:S.type="combined",this.emittedTracks+=this.pendingTracks.length,R=ds.initSegment(this.pendingTracks),S.initSegment=new Uint8Array(R.byteLength),S.initSegment.set(R),S.data=new Uint8Array(this.pendingBytes),Y=0;Y<this.pendingBoxes.length;Y++)S.data.set(this.pendingBoxes[Y],x),x+=this.pendingBoxes[Y].byteLength;for(Y=0;Y<this.pendingCaptions.length;Y++)b=this.pendingCaptions[Y],b.startTime=Vi.metadataTsToSeconds(b.startPts,G,this.keepOriginalTimestamps),b.endTime=Vi.metadataTsToSeconds(b.endPts,G,this.keepOriginalTimestamps),S.captionStreams[b.stream]=!0,S.captions.push(b);for(Y=0;Y<this.pendingMetadata.length;Y++)w=this.pendingMetadata[Y],w.cueTime=Vi.metadataTsToSeconds(w.pts,G,this.keepOriginalTimestamps),S.metadata.push(w);for(S.metadata.dispatchType=this.metadataStream.dispatchType,this.pendingTracks.length=0,this.videoTrack=null,this.pendingBoxes.length=0,this.pendingCaptions.length=0,this.pendingBytes=0,this.pendingMetadata.length=0,this.trigger("data",S),Y=0;Y<S.captions.length;Y++)b=S.captions[Y],this.trigger("caption",b);for(Y=0;Y<S.metadata.length;Y++)w=S.metadata[Y],this.trigger("id3Frame",w)}this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0)},Mi.prototype.setRemux=function(p){this.remuxTracks=p},Ja=function(p){var x=this,S=!0,b,w;Ja.prototype.init.call(this),p=p||{},this.baseMediaDecodeTime=p.baseMediaDecodeTime||0,this.transmuxPipeline_={},this.setupAacPipeline=function(){var R={};this.transmuxPipeline_=R,R.type="aac",R.metadataStream=new Hn.MetadataStream,R.aacStream=new fl,R.audioTimestampRolloverStream=new Hn.TimestampRolloverStream("audio"),R.timedMetadataTimestampRolloverStream=new Hn.TimestampRolloverStream("timed-metadata"),R.adtsStream=new Ya,R.coalesceStream=new Mi(p,R.metadataStream),R.headOfPipeline=R.aacStream,R.aacStream.pipe(R.audioTimestampRolloverStream).pipe(R.adtsStream),R.aacStream.pipe(R.timedMetadataTimestampRolloverStream).pipe(R.metadataStream).pipe(R.coalesceStream),R.metadataStream.on("timestamp",function(G){R.aacStream.setTimestamp(G.timeStamp)}),R.aacStream.on("data",function(G){G.type!=="timed-metadata"&&G.type!=="audio"||R.audioSegmentStream||(w=w||{timelineStartInfo:{baseMediaDecodeTime:x.baseMediaDecodeTime},codec:"adts",type:"audio"},R.coalesceStream.numberOfTracks++,R.audioSegmentStream=new Ws(w,p),R.audioSegmentStream.on("log",x.getLogTrigger_("audioSegmentStream")),R.audioSegmentStream.on("timingInfo",x.trigger.bind(x,"audioTimingInfo")),R.adtsStream.pipe(R.audioSegmentStream).pipe(R.coalesceStream),x.trigger("trackinfo",{hasAudio:!!w,hasVideo:!!b}))}),R.coalesceStream.on("data",this.trigger.bind(this,"data")),R.coalesceStream.on("done",this.trigger.bind(this,"done")),wo(this,R)},this.setupTsPipeline=function(){var R={};this.transmuxPipeline_=R,R.type="ts",R.metadataStream=new Hn.MetadataStream,R.packetStream=new Hn.TransportPacketStream,R.parseStream=new Hn.TransportParseStream,R.elementaryStream=new Hn.ElementaryStream,R.timestampRolloverStream=new Hn.TimestampRolloverStream,R.adtsStream=new Ya,R.h264Stream=new Co,R.captionStream=new Hn.CaptionStream(p),R.coalesceStream=new Mi(p,R.metadataStream),R.headOfPipeline=R.packetStream,R.packetStream.pipe(R.parseStream).pipe(R.elementaryStream).pipe(R.timestampRolloverStream),R.timestampRolloverStream.pipe(R.h264Stream),R.timestampRolloverStream.pipe(R.adtsStream),R.timestampRolloverStream.pipe(R.metadataStream).pipe(R.coalesceStream),R.h264Stream.pipe(R.captionStream).pipe(R.coalesceStream),R.elementaryStream.on("data",function(G){var Y;if(G.type==="metadata"){for(Y=G.tracks.length;Y--;)!b&&G.tracks[Y].type==="video"?(b=G.tracks[Y],b.timelineStartInfo.baseMediaDecodeTime=x.baseMediaDecodeTime):!w&&G.tracks[Y].type==="audio"&&(w=G.tracks[Y],w.timelineStartInfo.baseMediaDecodeTime=x.baseMediaDecodeTime);b&&!R.videoSegmentStream&&(R.coalesceStream.numberOfTracks++,R.videoSegmentStream=new Qa(b,p),R.videoSegmentStream.on("log",x.getLogTrigger_("videoSegmentStream")),R.videoSegmentStream.on("timelineStartInfo",function(J){w&&!p.keepOriginalTimestamps&&(w.timelineStartInfo=J,R.audioSegmentStream.setEarliestDts(J.dts-x.baseMediaDecodeTime))}),R.videoSegmentStream.on("processedGopsInfo",x.trigger.bind(x,"gopInfo")),R.videoSegmentStream.on("segmentTimingInfo",x.trigger.bind(x,"videoSegmentTimingInfo")),R.videoSegmentStream.on("baseMediaDecodeTime",function(J){w&&R.audioSegmentStream.setVideoBaseMediaDecodeTime(J)}),R.videoSegmentStream.on("timingInfo",x.trigger.bind(x,"videoTimingInfo")),R.h264Stream.pipe(R.videoSegmentStream).pipe(R.coalesceStream)),w&&!R.audioSegmentStream&&(R.coalesceStream.numberOfTracks++,R.audioSegmentStream=new Ws(w,p),R.audioSegmentStream.on("log",x.getLogTrigger_("audioSegmentStream")),R.audioSegmentStream.on("timingInfo",x.trigger.bind(x,"audioTimingInfo")),R.audioSegmentStream.on("segmentTimingInfo",x.trigger.bind(x,"audioSegmentTimingInfo")),R.adtsStream.pipe(R.audioSegmentStream).pipe(R.coalesceStream)),x.trigger("trackinfo",{hasAudio:!!w,hasVideo:!!b})}}),R.coalesceStream.on("data",this.trigger.bind(this,"data")),R.coalesceStream.on("id3Frame",function(G){G.dispatchType=R.metadataStream.dispatchType,x.trigger("id3Frame",G)}),R.coalesceStream.on("caption",this.trigger.bind(this,"caption")),R.coalesceStream.on("done",this.trigger.bind(this,"done")),wo(this,R)},this.setBaseMediaDecodeTime=function(R){var G=this.transmuxPipeline_;p.keepOriginalTimestamps||(this.baseMediaDecodeTime=R),w&&(w.timelineStartInfo.dts=void 0,w.timelineStartInfo.pts=void 0,En.clearDtsInfo(w),G.audioTimestampRolloverStream&&G.audioTimestampRolloverStream.discontinuity()),b&&(G.videoSegmentStream&&(G.videoSegmentStream.gopCache_=[]),b.timelineStartInfo.dts=void 0,b.timelineStartInfo.pts=void 0,En.clearDtsInfo(b),G.captionStream.reset()),G.timestampRolloverStream&&G.timestampRolloverStream.discontinuity()},this.setAudioAppendStart=function(R){w&&this.transmuxPipeline_.audioSegmentStream.setAudioAppendStart(R)},this.setRemux=function(R){var G=this.transmuxPipeline_;p.remux=R,G&&G.coalesceStream&&G.coalesceStream.setRemux(R)},this.alignGopsWith=function(R){b&&this.transmuxPipeline_.videoSegmentStream&&this.transmuxPipeline_.videoSegmentStream.alignGopsWith(R)},this.getLogTrigger_=function(R){var G=this;return function(Y){Y.stream=R,G.trigger("log",Y)}},this.push=function(R){if(S){var G=ih(R);G&&this.transmuxPipeline_.type!=="aac"?this.setupAacPipeline():!G&&this.transmuxPipeline_.type!=="ts"&&this.setupTsPipeline(),S=!1}this.transmuxPipeline_.headOfPipeline.push(R)},this.flush=function(){S=!0,this.transmuxPipeline_.headOfPipeline.flush()},this.endTimeline=function(){this.transmuxPipeline_.headOfPipeline.endTimeline()},this.reset=function(){this.transmuxPipeline_.headOfPipeline&&this.transmuxPipeline_.headOfPipeline.reset()},this.resetCaptions=function(){this.transmuxPipeline_.captionStream&&this.transmuxPipeline_.captionStream.reset()}},Ja.prototype=new Oi;var Yc={Transmuxer:Ja},Yl=function(p){return p>>>0},Qc=function(p){return("00"+p.toString(16)).slice(-2)},xa={toUnsigned:Yl,toHexString:Qc},Jc=function(p){var x="";return x+=String.fromCharCode(p[0]),x+=String.fromCharCode(p[1]),x+=String.fromCharCode(p[2]),x+=String.fromCharCode(p[3]),x},Eo=Jc,Zc=xa.toUnsigned,ed=Eo,ko=function(p,x){var S=[],b,w,R,G,Y;if(!x.length)return null;for(b=0;b<p.byteLength;)w=Zc(p[b]<<24|p[b+1]<<16|p[b+2]<<8|p[b+3]),R=ed(p.subarray(b+4,b+8)),G=w>1?b+w:p.byteLength,R===x[0]&&(x.length===1?S.push(p.subarray(b+8,G)):(Y=ko(p.subarray(b+8,G),x.slice(1)),Y.length&&(S=S.concat(Y)))),b=G;return S},Ao=ko,ah=xa.toUnsigned,oh=s.getUint64,lh=function(p){var x={version:p[0],flags:new Uint8Array(p.subarray(1,4))};return x.version===1?x.baseMediaDecodeTime=oh(p.subarray(4)):x.baseMediaDecodeTime=ah(p[4]<<24|p[5]<<16|p[6]<<8|p[7]),x},ml=lh,gl=function(p){return{isLeading:(p[0]&12)>>>2,dependsOn:p[0]&3,isDependedOn:(p[1]&192)>>>6,hasRedundancy:(p[1]&48)>>>4,paddingValue:(p[1]&14)>>>1,isNonSyncSample:p[1]&1,degradationPriority:p[2]<<8|p[3]}},tc=gl,Ql=tc,td=function(p){var x={version:p[0],flags:new Uint8Array(p.subarray(1,4)),samples:[]},S=new DataView(p.buffer,p.byteOffset,p.byteLength),b=x.flags[2]&1,w=x.flags[2]&4,R=x.flags[1]&1,G=x.flags[1]&2,Y=x.flags[1]&4,J=x.flags[1]&8,re=S.getUint32(4),he=8,ve;for(b&&(x.dataOffset=S.getInt32(he),he+=4),w&&re&&(ve={flags:Ql(p.subarray(he,he+4))},he+=4,R&&(ve.duration=S.getUint32(he),he+=4),G&&(ve.size=S.getUint32(he),he+=4),J&&(x.version===1?ve.compositionTimeOffset=S.getInt32(he):ve.compositionTimeOffset=S.getUint32(he),he+=4),x.samples.push(ve),re--);re--;)ve={},R&&(ve.duration=S.getUint32(he),he+=4),G&&(ve.size=S.getUint32(he),he+=4),Y&&(ve.flags=Ql(p.subarray(he,he+4)),he+=4),J&&(x.version===1?ve.compositionTimeOffset=S.getInt32(he):ve.compositionTimeOffset=S.getUint32(he),he+=4),x.samples.push(ve);return x},qs=td,sn=function(p){var x=new DataView(p.buffer,p.byteOffset,p.byteLength),S={version:p[0],flags:new Uint8Array(p.subarray(1,4)),trackId:x.getUint32(4)},b=S.flags[2]&1,w=S.flags[2]&2,R=S.flags[2]&8,G=S.flags[2]&16,Y=S.flags[2]&32,J=S.flags[0]&65536,re=S.flags[0]&131072,he;return he=8,b&&(he+=4,S.baseDataOffset=x.getUint32(12),he+=4),w&&(S.sampleDescriptionIndex=x.getUint32(he),he+=4),R&&(S.defaultSampleDuration=x.getUint32(he),he+=4),G&&(S.defaultSampleSize=x.getUint32(he),he+=4),Y&&(S.defaultSampleFlags=x.getUint32(he)),J&&(S.durationIsEmpty=!0),!b&&re&&(S.baseDataOffsetIsMoof=!0),S},Is=sn,cn;typeof window<"u"?cn=window:typeof r<"u"?cn=r:typeof self<"u"?cn=self:cn={};var Wi=cn,uh=Xe.discardEmulationPreventionBytes,rd=Ti.CaptionStream,Ps=Ao,nd=ml,vl=qs,yl=Is,rc=Wi,Jl=function(p,x){for(var S=p,b=0;b<x.length;b++){var w=x[b];if(S<w.size)return w;S-=w.size}return null},ch=function(p,x,S){var b=new DataView(p.buffer,p.byteOffset,p.byteLength),w={logs:[],seiNals:[]},R,G,Y,J;for(G=0;G+4<p.length;G+=Y)if(Y=b.getUint32(G),G+=4,!(Y<=0))switch(p[G]&31){case 6:var re=p.subarray(G+1,G+1+Y),he=Jl(G,x);if(R={nalUnitType:"sei_rbsp",size:Y,data:re,escapedRBSP:uh(re),trackId:S},he)R.pts=he.pts,R.dts=he.dts,J=he;else if(J)R.pts=J.pts,R.dts=J.dts;else{w.logs.push({level:"warn",message:"We've encountered a nal unit without data at "+G+" for trackId "+S+". See mux.js#223."});break}w.seiNals.push(R);break}return w},nc=function(p,x,S){var b=x,w=S.defaultSampleDuration||0,R=S.defaultSampleSize||0,G=S.trackId,Y=[];return p.forEach(function(J){var re=vl(J),he=re.samples;he.forEach(function(ve){ve.duration===void 0&&(ve.duration=w),ve.size===void 0&&(ve.size=R),ve.trackId=G,ve.dts=b,ve.compositionTimeOffset===void 0&&(ve.compositionTimeOffset=0),typeof b=="bigint"?(ve.pts=b+rc.BigInt(ve.compositionTimeOffset),b+=rc.BigInt(ve.duration)):(ve.pts=b+ve.compositionTimeOffset,b+=ve.duration)}),Y=Y.concat(he)}),Y},le=function(p,x){var S=Ps(p,["moof","traf"]),b=Ps(p,["mdat"]),w={},R=[];return b.forEach(function(G,Y){var J=S[Y];R.push({mdat:G,traf:J})}),R.forEach(function(G){var Y=G.mdat,J=G.traf,re=Ps(J,["tfhd"]),he=yl(re[0]),ve=he.trackId,qe=Ps(J,["tfdt"]),Ee=qe.length>0?nd(qe[0]).baseMediaDecodeTime:0,Ct=Ps(J,["trun"]),Wt,Gr;x===ve&&Ct.length>0&&(Wt=nc(Ct,Ee,he),Gr=ch(Y,Wt,ve),w[ve]||(w[ve]={seiNals:[],logs:[]}),w[ve].seiNals=w[ve].seiNals.concat(Gr.seiNals),w[ve].logs=w[ve].logs.concat(Gr.logs))}),w},F=function(p,x,S){var b;if(x===null)return null;b=le(p,x);var w=b[x]||{};return{seiNals:w.seiNals,logs:w.logs,timescale:S}},H=function(){var p=!1,x,S,b,w,R,G;this.isInitialized=function(){return p},this.init=function(Y){x=new rd,p=!0,G=Y?Y.isPartial:!1,x.on("data",function(J){J.startTime=J.startPts/w,J.endTime=J.endPts/w,R.captions.push(J),R.captionStreams[J.stream]=!0}),x.on("log",function(J){R.logs.push(J)})},this.isNewInit=function(Y,J){return Y&&Y.length===0||J&&typeof J=="object"&&Object.keys(J).length===0?!1:b!==Y[0]||w!==J[b]},this.parse=function(Y,J,re){var he;if(this.isInitialized()){if(!J||!re)return null;if(this.isNewInit(J,re))b=J[0],w=re[b];else if(b===null||!w)return S.push(Y),null}else return null;for(;S.length>0;){var ve=S.shift();this.parse(ve,J,re)}return he=F(Y,b,w),he&&he.logs&&(R.logs=R.logs.concat(he.logs)),he===null||!he.seiNals?R.logs.length?{logs:R.logs,captions:[],captionStreams:[]}:null:(this.pushNals(he.seiNals),this.flushStream(),R)},this.pushNals=function(Y){if(!this.isInitialized()||!Y||Y.length===0)return null;Y.forEach(function(J){x.push(J)})},this.flushStream=function(){if(!this.isInitialized())return null;G?x.partialFlush():x.flush()},this.clearParsedCaptions=function(){R.captions=[],R.captionStreams={},R.logs=[]},this.resetCaptionStream=function(){if(!this.isInitialized())return null;x.reset()},this.clearAllCaptions=function(){this.clearParsedCaptions(),this.resetCaptionStream()},this.reset=function(){S=[],b=null,w=null,R?this.clearParsedCaptions():R={captions:[],captionStreams:{},logs:[]},this.resetCaptionStream()},this.reset()},z=H,q=function(p){for(var x=0,S=String.fromCharCode(p[x]),b="";S!=="\0";)b+=S,x++,S=String.fromCharCode(p[x]);return b+=S,b},Z={uint8ToCString:q},te=Z.uint8ToCString,ge=s.getUint64,_e=function(p){var x=4,S=p[0],b,w,R,G,Y,J,re,he;if(S===0){b=te(p.subarray(x)),x+=b.length,w=te(p.subarray(x)),x+=w.length;var ve=new DataView(p.buffer);R=ve.getUint32(x),x+=4,Y=ve.getUint32(x),x+=4,J=ve.getUint32(x),x+=4,re=ve.getUint32(x),x+=4}else if(S===1){var ve=new DataView(p.buffer);R=ve.getUint32(x),x+=4,G=ge(p.subarray(x)),x+=8,J=ve.getUint32(x),x+=4,re=ve.getUint32(x),x+=4,b=te(p.subarray(x)),x+=b.length,w=te(p.subarray(x)),x+=w.length}he=new Uint8Array(p.subarray(x,p.byteLength));var qe={scheme_id_uri:b,value:w,timescale:R||1,presentation_time:G,presentation_time_delta:Y,event_duration:J,id:re,message_data:he};return we(S,qe)?qe:void 0},De=function(p,x,S,b){return p||p===0?p/x:b+S/x},we=function(p,x){var S=x.scheme_id_uri!=="\0",b=p===0&&Re(x.presentation_time_delta)&&S,w=p===1&&Re(x.presentation_time)&&S;return!(p>1)&&b||w},Re=function(p){return p!==void 0||p!==null},at={parseEmsgBox:_e,scaleTime:De},Mt=xa.toUnsigned,zt=xa.toHexString,nt=Ao,ar=Eo,In=at,pi=Is,qi=qs,xl=ml,Do=s.getUint64,Io,_l,_a,Gs,_n,eo,Gi,Zl=Wi,Tf=fi.parseId3Frames;Io=function(p){var x={},S=nt(p,["moov","trak"]);return S.reduce(function(b,w){var R,G,Y,J,re;return R=nt(w,["tkhd"])[0],!R||(G=R[0],Y=G===0?12:20,J=Mt(R[Y]<<24|R[Y+1]<<16|R[Y+2]<<8|R[Y+3]),re=nt(w,["mdia","mdhd"])[0],!re)?null:(G=re[0],Y=G===0?12:20,b[J]=Mt(re[Y]<<24|re[Y+1]<<16|re[Y+2]<<8|re[Y+3]),b)},x)},_l=function(p,x){var S;S=nt(x,["moof","traf"]);var b=S.reduce(function(w,R){var G=nt(R,["tfhd"])[0],Y=Mt(G[4]<<24|G[5]<<16|G[6]<<8|G[7]),J=p[Y]||9e4,re=nt(R,["tfdt"])[0],he=new DataView(re.buffer,re.byteOffset,re.byteLength),ve;re[0]===1?ve=Do(re.subarray(4,12)):ve=he.getUint32(4);let qe;return typeof ve=="bigint"?qe=ve/Zl.BigInt(J):typeof ve=="number"&&!isNaN(ve)&&(qe=ve/J),qe<Number.MAX_SAFE_INTEGER&&(qe=Number(qe)),qe<w&&(w=qe),w},1/0);return typeof b=="bigint"||isFinite(b)?b:0},_a=function(p,x){var S=nt(x,["moof","traf"]),b=0,w=0,R;if(S&&S.length){var G=nt(S[0],["tfhd"])[0],Y=nt(S[0],["trun"])[0],J=nt(S[0],["tfdt"])[0];if(G){var re=pi(G);R=re.trackId}if(J){var he=xl(J);b=he.baseMediaDecodeTime}if(Y){var ve=qi(Y);ve.samples&&ve.samples.length&&(w=ve.samples[0].compositionTimeOffset||0)}}var qe=p[R]||9e4;typeof b=="bigint"&&(w=Zl.BigInt(w),qe=Zl.BigInt(qe));var Ee=(b+w)/qe;return typeof Ee=="bigint"&&Ee<Number.MAX_SAFE_INTEGER&&(Ee=Number(Ee)),Ee},Gs=function(p){var x=nt(p,["moov","trak"]),S=[];return x.forEach(function(b){var w=nt(b,["mdia","hdlr"]),R=nt(b,["tkhd"]);w.forEach(function(G,Y){var J=ar(G.subarray(8,12)),re=R[Y],he,ve,qe;J==="vide"&&(he=new DataView(re.buffer,re.byteOffset,re.byteLength),ve=he.getUint8(0),qe=ve===0?he.getUint32(12):he.getUint32(20),S.push(qe))})}),S},eo=function(p){var x=p[0],S=x===0?12:20;return Mt(p[S]<<24|p[S+1]<<16|p[S+2]<<8|p[S+3])},_n=function(p){var x=nt(p,["moov","trak"]),S=[];return x.forEach(function(b){var w={},R=nt(b,["tkhd"])[0],G,Y;R&&(G=new DataView(R.buffer,R.byteOffset,R.byteLength),Y=G.getUint8(0),w.id=Y===0?G.getUint32(12):G.getUint32(20));var J=nt(b,["mdia","hdlr"])[0];if(J){var re=ar(J.subarray(8,12));re==="vide"?w.type="video":re==="soun"?w.type="audio":w.type=re}var he=nt(b,["mdia","minf","stbl","stsd"])[0];if(he){var ve=he.subarray(8);w.codec=ar(ve.subarray(4,8));var qe=nt(ve,[w.codec])[0],Ee,Ct;qe&&(/^[asm]vc[1-9]$/i.test(w.codec)?(Ee=qe.subarray(78),Ct=ar(Ee.subarray(4,8)),Ct==="avcC"&&Ee.length>11?(w.codec+=".",w.codec+=zt(Ee[9]),w.codec+=zt(Ee[10]),w.codec+=zt(Ee[11])):w.codec="avc1.4d400d"):/^mp4[a,v]$/i.test(w.codec)?(Ee=qe.subarray(28),Ct=ar(Ee.subarray(4,8)),Ct==="esds"&&Ee.length>20&&Ee[19]!==0?(w.codec+="."+zt(Ee[19]),w.codec+="."+zt(Ee[20]>>>2&63).replace(/^0/,"")):w.codec="mp4a.40.2"):w.codec=w.codec.toLowerCase())}var Wt=nt(b,["mdia","mdhd"])[0];Wt&&(w.timescale=eo(Wt)),S.push(w)}),S},Gi=function(p,x=0){var S=nt(p,["emsg"]);return S.map(b=>{var w=In.parseEmsgBox(new Uint8Array(b)),R=Tf(w.message_data);return{cueTime:In.scaleTime(w.presentation_time,w.timescale,w.presentation_time_delta,x),duration:In.scaleTime(w.event_duration,w.timescale),frames:R}})};var eu={findBox:nt,parseType:ar,timescale:Io,startTime:_l,compositionStartTime:_a,videoTrackIds:Gs,tracks:_n,getTimescaleFromMediaHeader:eo,getEmsgID3:Gi},tu=yn,id=function(p){var x=p[1]&31;return x<<=8,x|=p[2],x},Po=function(p){return!!(p[1]&64)},Ki=function(p){var x=0;return(p[3]&48)>>>4>1&&(x+=p[4]+1),x},dh=function(p,x){var S=id(p);return S===0?"pat":S===x?"pmt":x?"pes":null},hh=function(p){var x=Po(p),S=4+Ki(p);return x&&(S+=p[S]+1),(p[S+10]&31)<<8|p[S+11]},qm=function(p){var x={},S=Po(p),b=4+Ki(p);if(S&&(b+=p[b]+1),!!(p[b+5]&1)){var w,R,G;w=(p[b+1]&15)<<8|p[b+2],R=3+w-4,G=(p[b+10]&15)<<8|p[b+11];for(var Y=12+G;Y<R;){var J=b+Y;x[(p[J+1]&31)<<8|p[J+2]]=p[J],Y+=((p[J+3]&15)<<8|p[J+4])+5}return x}},Gm=function(p,x){var S=id(p),b=x[S];switch(b){case tu.H264_STREAM_TYPE:return"video";case tu.ADTS_STREAM_TYPE:return"audio";case tu.METADATA_STREAM_TYPE:return"timed-metadata";default:return null}},ic=function(p){var x=Po(p);if(!x)return null;var S=4+Ki(p);if(S>=p.byteLength)return null;var b=null,w;return w=p[S+7],w&192&&(b={},b.pts=(p[S+9]&14)<<27|(p[S+10]&255)<<20|(p[S+11]&254)<<12|(p[S+12]&255)<<5|(p[S+13]&254)>>>3,b.pts*=4,b.pts+=(p[S+13]&6)>>>1,b.dts=b.pts,w&64&&(b.dts=(p[S+14]&14)<<27|(p[S+15]&255)<<20|(p[S+16]&254)<<12|(p[S+17]&255)<<5|(p[S+18]&254)>>>3,b.dts*=4,b.dts+=(p[S+18]&6)>>>1)),b},sc=function(p){switch(p){case 5:return"slice_layer_without_partitioning_rbsp_idr";case 6:return"sei_rbsp";case 7:return"seq_parameter_set_rbsp";case 8:return"pic_parameter_set_rbsp";case 9:return"access_unit_delimiter_rbsp";default:return null}},Cf=function(p){for(var x=4+Ki(p),S=p.subarray(x),b=0,w=0,R=!1,G;w<S.byteLength-3;w++)if(S[w+2]===1){b=w+5;break}for(;b<S.byteLength;)switch(S[b]){case 0:if(S[b-1]!==0){b+=2;break}else if(S[b-2]!==0){b++;break}w+3!==b-2&&(G=sc(S[w+3]&31),G==="slice_layer_without_partitioning_rbsp_idr"&&(R=!0));do b++;while(S[b]!==1&&b<S.length);w=b-2,b+=3;break;case 1:if(S[b-1]!==0||S[b-2]!==0){b+=3;break}G=sc(S[w+3]&31),G==="slice_layer_without_partitioning_rbsp_idr"&&(R=!0),w=b-2,b+=3;break;default:b+=3;break}return S=S.subarray(w),b-=w,w=0,S&&S.byteLength>3&&(G=sc(S[w+3]&31),G==="slice_layer_without_partitioning_rbsp_idr"&&(R=!0)),R},wf={parseType:dh,parsePat:hh,parsePmt:qm,parsePayloadUnitStartIndicator:Po,parsePesType:Gm,parsePesTime:ic,videoPacketContainsKeyFrame:Cf},bn=yn,hs=ke.handleRollover,or={};or.ts=wf,or.aac=Vs;var mi=Ut.ONE_SECOND_IN_TS,dn=188,Vn=71,ac=function(p,x){for(var S=0,b=dn,w,R;b<p.byteLength;){if(p[S]===Vn&&p[b]===Vn){switch(w=p.subarray(S,b),R=or.ts.parseType(w,x.pid),R){case"pat":x.pid=or.ts.parsePat(w);break;case"pmt":var G=or.ts.parsePmt(w);x.table=x.table||{},Object.keys(G).forEach(function(Y){x.table[Y]=G[Y]});break}S+=dn,b+=dn;continue}S++,b++}},ru=function(p,x,S){for(var b=0,w=dn,R,G,Y,J,re,he=!1;w<=p.byteLength;){if(p[b]===Vn&&(p[w]===Vn||w===p.byteLength)){switch(R=p.subarray(b,w),G=or.ts.parseType(R,x.pid),G){case"pes":Y=or.ts.parsePesType(R,x.table),J=or.ts.parsePayloadUnitStartIndicator(R),Y==="audio"&&J&&(re=or.ts.parsePesTime(R),re&&(re.type="audio",S.audio.push(re),he=!0));break}if(he)break;b+=dn,w+=dn;continue}b++,w++}for(w=p.byteLength,b=w-dn,he=!1;b>=0;){if(p[b]===Vn&&(p[w]===Vn||w===p.byteLength)){switch(R=p.subarray(b,w),G=or.ts.parseType(R,x.pid),G){case"pes":Y=or.ts.parsePesType(R,x.table),J=or.ts.parsePayloadUnitStartIndicator(R),Y==="audio"&&J&&(re=or.ts.parsePesTime(R),re&&(re.type="audio",S.audio.push(re),he=!0));break}if(he)break;b-=dn,w-=dn;continue}b--,w--}},nu=function(p,x,S){for(var b=0,w=dn,R,G,Y,J,re,he,ve,qe,Ee=!1,Ct={data:[],size:0};w<p.byteLength;){if(p[b]===Vn&&p[w]===Vn){switch(R=p.subarray(b,w),G=or.ts.parseType(R,x.pid),G){case"pes":if(Y=or.ts.parsePesType(R,x.table),J=or.ts.parsePayloadUnitStartIndicator(R),Y==="video"&&(J&&!Ee&&(re=or.ts.parsePesTime(R),re&&(re.type="video",S.video.push(re),Ee=!0)),!S.firstKeyFrame)){if(J&&Ct.size!==0){for(he=new Uint8Array(Ct.size),ve=0;Ct.data.length;)qe=Ct.data.shift(),he.set(qe,ve),ve+=qe.byteLength;if(or.ts.videoPacketContainsKeyFrame(he)){var Wt=or.ts.parsePesTime(he);Wt?(S.firstKeyFrame=Wt,S.firstKeyFrame.type="video"):console.warn("Failed to extract PTS/DTS from PES at first keyframe. This could be an unusual TS segment, or else mux.js did not parse your TS segment correctly. If you know your TS segments do contain PTS/DTS on keyframes please file a bug report! You can try ffprobe to double check for yourself.")}Ct.size=0}Ct.data.push(R),Ct.size+=R.byteLength}break}if(Ee&&S.firstKeyFrame)break;b+=dn,w+=dn;continue}b++,w++}for(w=p.byteLength,b=w-dn,Ee=!1;b>=0;){if(p[b]===Vn&&p[w]===Vn){switch(R=p.subarray(b,w),G=or.ts.parseType(R,x.pid),G){case"pes":Y=or.ts.parsePesType(R,x.table),J=or.ts.parsePayloadUnitStartIndicator(R),Y==="video"&&J&&(re=or.ts.parsePesTime(R),re&&(re.type="video",S.video.push(re),Ee=!0));break}if(Ee)break;b-=dn,w-=dn;continue}b--,w--}},Ef=function(p,x){if(p.audio&&p.audio.length){var S=x;(typeof S>"u"||isNaN(S))&&(S=p.audio[0].dts),p.audio.forEach(function(R){R.dts=hs(R.dts,S),R.pts=hs(R.pts,S),R.dtsTime=R.dts/mi,R.ptsTime=R.pts/mi})}if(p.video&&p.video.length){var b=x;if((typeof b>"u"||isNaN(b))&&(b=p.video[0].dts),p.video.forEach(function(R){R.dts=hs(R.dts,b),R.pts=hs(R.pts,b),R.dtsTime=R.dts/mi,R.ptsTime=R.pts/mi}),p.firstKeyFrame){var w=p.firstKeyFrame;w.dts=hs(w.dts,b),w.pts=hs(w.pts,b),w.dtsTime=w.dts/mi,w.ptsTime=w.pts/mi}}},Km=function(p){for(var x=!1,S=0,b=null,w=null,R=0,G=0,Y;p.length-G>=3;){var J=or.aac.parseType(p,G);switch(J){case"timed-metadata":if(p.length-G<10){x=!0;break}if(R=or.aac.parseId3TagSize(p,G),R>p.length){x=!0;break}w===null&&(Y=p.subarray(G,G+R),w=or.aac.parseAacTimestamp(Y)),G+=R;break;case"audio":if(p.length-G<7){x=!0;break}if(R=or.aac.parseAdtsSize(p,G),R>p.length){x=!0;break}b===null&&(Y=p.subarray(G,G+R),b=or.aac.parseSampleRate(Y)),S++,G+=R;break;default:G++;break}if(x)return null}if(b===null||w===null)return null;var re=mi/b,he={audio:[{type:"audio",dts:w,pts:w},{type:"audio",dts:w+S*1024*re,pts:w+S*1024*re}]};return he},Xm=function(p){var x={pid:null,table:null},S={};ac(p,x);for(var b in x.table)if(x.table.hasOwnProperty(b)){var w=x.table[b];switch(w){case bn.H264_STREAM_TYPE:S.video=[],nu(p,x,S),S.video.length===0&&delete S.video;break;case bn.ADTS_STREAM_TYPE:S.audio=[],ru(p,x,S),S.audio.length===0&&delete S.audio;break}}return S},kf=function(p,x){var S=or.aac.isLikelyAacData(p),b;return S?b=Km(p):b=Xm(p),!b||!b.audio&&!b.video?null:(Ef(b,x),b)},sd={inspect:kf,parseAudioPes_:ru};const ad=function(p,x){x.on("data",function(S){const b=S.initSegment;S.initSegment={data:b.buffer,byteOffset:b.byteOffset,byteLength:b.byteLength};const w=S.data;S.data=w.buffer,p.postMessage({action:"data",segment:S,byteOffset:w.byteOffset,byteLength:w.byteLength},[S.data])}),x.on("done",function(S){p.postMessage({action:"done"})}),x.on("gopInfo",function(S){p.postMessage({action:"gopInfo",gopInfo:S})}),x.on("videoSegmentTimingInfo",function(S){const b={start:{decode:Ut.videoTsToSeconds(S.start.dts),presentation:Ut.videoTsToSeconds(S.start.pts)},end:{decode:Ut.videoTsToSeconds(S.end.dts),presentation:Ut.videoTsToSeconds(S.end.pts)},baseMediaDecodeTime:Ut.videoTsToSeconds(S.baseMediaDecodeTime)};S.prependedContentDuration&&(b.prependedContentDuration=Ut.videoTsToSeconds(S.prependedContentDuration)),p.postMessage({action:"videoSegmentTimingInfo",videoSegmentTimingInfo:b})}),x.on("audioSegmentTimingInfo",function(S){const b={start:{decode:Ut.videoTsToSeconds(S.start.dts),presentation:Ut.videoTsToSeconds(S.start.pts)},end:{decode:Ut.videoTsToSeconds(S.end.dts),presentation:Ut.videoTsToSeconds(S.end.pts)},baseMediaDecodeTime:Ut.videoTsToSeconds(S.baseMediaDecodeTime)};S.prependedContentDuration&&(b.prependedContentDuration=Ut.videoTsToSeconds(S.prependedContentDuration)),p.postMessage({action:"audioSegmentTimingInfo",audioSegmentTimingInfo:b})}),x.on("id3Frame",function(S){p.postMessage({action:"id3Frame",id3Frame:S})}),x.on("caption",function(S){p.postMessage({action:"caption",caption:S})}),x.on("trackinfo",function(S){p.postMessage({action:"trackinfo",trackInfo:S})}),x.on("audioTimingInfo",function(S){p.postMessage({action:"audioTimingInfo",audioTimingInfo:{start:Ut.videoTsToSeconds(S.start),end:Ut.videoTsToSeconds(S.end)}})}),x.on("videoTimingInfo",function(S){p.postMessage({action:"videoTimingInfo",videoTimingInfo:{start:Ut.videoTsToSeconds(S.start),end:Ut.videoTsToSeconds(S.end)}})}),x.on("log",function(S){p.postMessage({action:"log",log:S})})};class oc{constructor(x,S){this.options=S||{},this.self=x,this.init()}init(){this.transmuxer&&this.transmuxer.dispose(),this.transmuxer=new Yc.Transmuxer(this.options),ad(this.self,this.transmuxer)}pushMp4Captions(x){this.captionParser||(this.captionParser=new z,this.captionParser.init());const S=new Uint8Array(x.data,x.byteOffset,x.byteLength),b=this.captionParser.parse(S,x.trackIds,x.timescales);this.self.postMessage({action:"mp4Captions",captions:b&&b.captions||[],logs:b&&b.logs||[],data:S.buffer},[S.buffer])}probeMp4StartTime({timescales:x,data:S}){const b=eu.startTime(x,S);this.self.postMessage({action:"probeMp4StartTime",startTime:b,data:S},[S.buffer])}probeMp4Tracks({data:x}){const S=eu.tracks(x);this.self.postMessage({action:"probeMp4Tracks",tracks:S,data:x},[x.buffer])}probeEmsgID3({data:x,offset:S}){const b=eu.getEmsgID3(x,S);this.self.postMessage({action:"probeEmsgID3",id3Frames:b,emsgData:x},[x.buffer])}probeTs({data:x,baseStartTime:S}){const b=typeof S=="number"&&!isNaN(S)?S*Ut.ONE_SECOND_IN_TS:void 0,w=sd.inspect(x,b);let R=null;w&&(R={hasVideo:w.video&&w.video.length===2||!1,hasAudio:w.audio&&w.audio.length===2||!1},R.hasVideo&&(R.videoStart=w.video[0].ptsTime),R.hasAudio&&(R.audioStart=w.audio[0].ptsTime)),this.self.postMessage({action:"probeTs",result:R,data:x},[x.buffer])}clearAllMp4Captions(){this.captionParser&&this.captionParser.clearAllCaptions()}clearParsedMp4Captions(){this.captionParser&&this.captionParser.clearParsedCaptions()}push(x){const S=new Uint8Array(x.data,x.byteOffset,x.byteLength);this.transmuxer.push(S)}reset(){this.transmuxer.reset()}setTimestampOffset(x){const S=x.timestampOffset||0;this.transmuxer.setBaseMediaDecodeTime(Math.round(Ut.secondsToVideoTs(S)))}setAudioAppendStart(x){this.transmuxer.setAudioAppendStart(Math.ceil(Ut.secondsToVideoTs(x.appendStart)))}setRemux(x){this.transmuxer.setRemux(x.remux)}flush(x){this.transmuxer.flush(),self.postMessage({action:"done",type:"transmuxed"})}endTimeline(){this.transmuxer.endTimeline(),self.postMessage({action:"endedtimeline",type:"transmuxed"})}alignGopsWith(x){this.transmuxer.alignGopsWith(x.gopsToAlignWith.slice())}}self.onmessage=function(p){if(p.data.action==="init"&&p.data.options){this.messageHandlers=new oc(self,p.data.options);return}this.messageHandlers||(this.messageHandlers=new oc(self)),p.data&&p.data.action&&p.data.action!=="init"&&this.messageHandlers[p.data.action]&&this.messageHandlers[p.data.action](p.data)}}));var vme=N$(gme);const yme=(r,e,t)=>{const{type:n,initSegment:i,captions:s,captionStreams:a,metadata:o,videoFrameDtsTime:l,videoFramePtsTime:u}=r.data.segment;e.buffer.push({captions:s,captionStreams:a,metadata:o});const c=r.data.segment.boxes||{data:r.data.segment.data},h={type:n,data:new Uint8Array(c.data,c.data.byteOffset,c.data.byteLength),initSegment:new Uint8Array(i.data,i.byteOffset,i.byteLength)};typeof l<"u"&&(h.videoFrameDtsTime=l),typeof u<"u"&&(h.videoFramePtsTime=u),t(h)},xme=({transmuxedData:r,callback:e})=>{r.buffer=[],e(r)},_me=(r,e)=>{e.gopInfo=r.data.gopInfo},j$=r=>{const{transmuxer:e,bytes:t,audioAppendStart:n,gopsToAlignWith:i,remux:s,onData:a,onTrackInfo:o,onAudioTimingInfo:l,onVideoTimingInfo:u,onVideoSegmentTimingInfo:c,onAudioSegmentTimingInfo:h,onId3:f,onCaptions:g,onDone:v,onEndedTimeline:y,onTransmuxerLog:_,isEndOfTimeline:C,segment:E,triggerSegmentEventFn:D}=r,I={buffer:[]};let k=C;const P=U=>{e.currentTransmux===r&&(U.data.action==="data"&&yme(U,I,a),U.data.action==="trackinfo"&&o(U.data.trackInfo),U.data.action==="gopInfo"&&_me(U,I),U.data.action==="audioTimingInfo"&&l(U.data.audioTimingInfo),U.data.action==="videoTimingInfo"&&u(U.data.videoTimingInfo),U.data.action==="videoSegmentTimingInfo"&&c(U.data.videoSegmentTimingInfo),U.data.action==="audioSegmentTimingInfo"&&h(U.data.audioSegmentTimingInfo),U.data.action==="id3Frame"&&f([U.data.id3Frame],U.data.id3Frame.dispatchType),U.data.action==="caption"&&g(U.data.caption),U.data.action==="endedtimeline"&&(k=!1,y()),U.data.action==="log"&&_(U.data.log),U.data.type==="transmuxed"&&(k||(e.onmessage=null,xme({transmuxedData:I,callback:v}),z$(e))))},N=()=>{const U={message:"Received an error message from the transmuxer worker",metadata:{errorType:Se.Error.StreamingFailedToTransmuxSegment,segmentInfo:Uh({segment:E})}};v(null,U)};if(e.onmessage=P,e.onerror=N,n&&e.postMessage({action:"setAudioAppendStart",appendStart:n}),Array.isArray(i)&&e.postMessage({action:"alignGopsWith",gopsToAlignWith:i}),typeof s<"u"&&e.postMessage({action:"setRemux",remux:s}),t.byteLength){const U=t instanceof ArrayBuffer?t:t.buffer,B=t instanceof ArrayBuffer?0:t.byteOffset;D({type:"segmenttransmuxingstart",segment:E}),e.postMessage({action:"push",data:U,byteOffset:B,byteLength:t.byteLength},[U])}C&&e.postMessage({action:"endTimeline"}),e.postMessage({action:"flush"})},z$=r=>{r.currentTransmux=null,r.transmuxQueue.length&&(r.currentTransmux=r.transmuxQueue.shift(),typeof r.currentTransmux=="function"?r.currentTransmux():j$(r.currentTransmux))},zM=(r,e)=>{r.postMessage({action:e}),z$(r)},H$=(r,e)=>{if(!e.currentTransmux){e.currentTransmux=r,zM(e,r);return}e.transmuxQueue.push(zM.bind(null,e,r))},bme=r=>{H$("reset",r)},Sme=r=>{H$("endTimeline",r)},V$=r=>{if(!r.transmuxer.currentTransmux){r.transmuxer.currentTransmux=r,j$(r);return}r.transmuxer.transmuxQueue.push(r)},Tme=r=>{const e=new vme;e.currentTransmux=null,e.transmuxQueue=[];const t=e.terminate;return e.terminate=()=>(e.currentTransmux=null,e.transmuxQueue.length=0,t.call(e)),e.postMessage({action:"init",options:r}),e};var jC={reset:bme,endTimeline:Sme,transmux:V$,createTransmuxer:Tme};const dg=function(r){const e=r.transmuxer,t=r.endAction||r.action,n=r.callback,i=sr({},r,{endAction:null,transmuxer:null,callback:null}),s=a=>{a.data.action===t&&(e.removeEventListener("message",s),a.data.data&&(a.data.data=new Uint8Array(a.data.data,r.byteOffset||0,r.byteLength||a.data.data.byteLength),r.data&&(r.data=a.data.data)),n(a.data))};if(e.addEventListener("message",s),r.data){const a=r.data instanceof ArrayBuffer;i.byteOffset=a?0:r.data.byteOffset,i.byteLength=r.data.byteLength;const o=[a?r.data:r.data.buffer];e.postMessage(i,o)}else e.postMessage(i)},wu={FAILURE:2,TIMEOUT:-101,ABORTED:-102},G2=r=>{r.forEach(e=>{e.abort()})},Cme=r=>({bandwidth:r.bandwidth,bytesReceived:r.bytesReceived||0,roundTripTime:r.roundTripTime||0}),wme=r=>{const e=r.target,n={bandwidth:1/0,bytesReceived:0,roundTripTime:Date.now()-e.requestTime||0};return n.bytesReceived=r.loaded,n.bandwidth=Math.floor(n.bytesReceived/n.roundTripTime*8*1e3),n},kA=(r,e)=>{const{requestType:t}=e,n=rf({requestType:t,request:e,error:r});return e.timedout?{status:e.status,message:"HLS request timed-out at URL: "+e.uri,code:wu.TIMEOUT,xhr:e,metadata:n}:e.aborted?{status:e.status,message:"HLS request aborted at URL: "+e.uri,code:wu.ABORTED,xhr:e,metadata:n}:r?{status:e.status,message:"HLS request errored at URL: "+e.uri,code:wu.FAILURE,xhr:e,metadata:n}:e.responseType==="arraybuffer"&&e.response.byteLength===0?{status:e.status,message:"Empty HLS response at URL: "+e.uri,code:wu.FAILURE,xhr:e,metadata:n}:null},HM=(r,e,t,n)=>(i,s)=>{const a=s.response,o=kA(i,s);if(o)return t(o,r);if(a.byteLength!==16)return t({status:s.status,message:"Invalid HLS key at URL: "+s.uri,code:wu.FAILURE,xhr:s},r);const l=new DataView(a),u=new Uint32Array([l.getUint32(0),l.getUint32(4),l.getUint32(8),l.getUint32(12)]);for(let h=0;h<e.length;h++)e[h].bytes=u;const c={uri:s.uri};return n({type:"segmentkeyloadcomplete",segment:r,keyInfo:c}),t(null,r)},W$=(r,e)=>{const t=Cm(r.map.bytes);if(t!=="mp4"){const n=r.map.resolvedUri||r.map.uri,i=t||"unknown";return e({internal:!0,message:`Found unsupported ${i} container for initialization segment at URL: ${n}`,code:wu.FAILURE,metadata:{mediaType:i}})}dg({action:"probeMp4Tracks",data:r.map.bytes,transmuxer:r.transmuxer,callback:({tracks:n,data:i})=>(r.map.bytes=i,n.forEach(function(s){r.map.tracks=r.map.tracks||{},!r.map.tracks[s.type]&&(r.map.tracks[s.type]=s,typeof s.id=="number"&&s.timescale&&(r.map.timescales=r.map.timescales||{},r.map.timescales[s.id]=s.timescale))}),e(null))})},Eme=({segment:r,finishProcessingFn:e,triggerSegmentEventFn:t})=>(n,i)=>{const s=kA(n,i);if(s)return e(s,r);const a=new Uint8Array(i.response);if(t({type:"segmentloaded",segment:r}),r.map.key)return r.map.encryptedBytes=a,e(null,r);r.map.bytes=a,W$(r,function(o){if(o)return o.xhr=i,o.status=i.status,e(o,r);e(null,r)})},kme=({segment:r,finishProcessingFn:e,responseType:t,triggerSegmentEventFn:n})=>(i,s)=>{const a=kA(i,s);if(a)return e(a,r);n({type:"segmentloaded",segment:r});const o=t==="arraybuffer"||!s.responseText?s.response:pme(s.responseText.substring(r.lastReachedChar||0));return r.stats=Cme(s),r.key?r.encryptedBytes=new Uint8Array(o):r.bytes=new Uint8Array(o),e(null,r)},Ame=({segment:r,bytes:e,trackInfoFn:t,timingInfoFn:n,videoSegmentTimingInfoFn:i,audioSegmentTimingInfoFn:s,id3Fn:a,captionsFn:o,isEndOfTimeline:l,endedTimelineFn:u,dataFn:c,doneFn:h,onTransmuxerLog:f,triggerSegmentEventFn:g})=>{const v=r.map&&r.map.tracks||{},y=!!(v.audio&&v.video);let _=n.bind(null,r,"audio","start");const C=n.bind(null,r,"audio","end");let E=n.bind(null,r,"video","start");const D=n.bind(null,r,"video","end"),I=()=>V$({bytes:e,transmuxer:r.transmuxer,audioAppendStart:r.audioAppendStart,gopsToAlignWith:r.gopsToAlignWith,remux:y,onData:k=>{k.type=k.type==="combined"?"video":k.type,c(r,k)},onTrackInfo:k=>{t&&(y&&(k.isMuxed=!0),t(r,k))},onAudioTimingInfo:k=>{_&&typeof k.start<"u"&&(_(k.start),_=null),C&&typeof k.end<"u"&&C(k.end)},onVideoTimingInfo:k=>{E&&typeof k.start<"u"&&(E(k.start),E=null),D&&typeof k.end<"u"&&D(k.end)},onVideoSegmentTimingInfo:k=>{const P={pts:{start:k.start.presentation,end:k.end.presentation},dts:{start:k.start.decode,end:k.end.decode}};g({type:"segmenttransmuxingtiminginfoavailable",segment:r,timingInfo:P}),i(k)},onAudioSegmentTimingInfo:k=>{const P={pts:{start:k.start.pts,end:k.end.pts},dts:{start:k.start.dts,end:k.end.dts}};g({type:"segmenttransmuxingtiminginfoavailable",segment:r,timingInfo:P}),s(k)},onId3:(k,P)=>{a(r,k,P)},onCaptions:k=>{o(r,[k])},isEndOfTimeline:l,onEndedTimeline:()=>{u()},onTransmuxerLog:f,onDone:(k,P)=>{h&&(k.type=k.type==="combined"?"video":k.type,g({type:"segmenttransmuxingcomplete",segment:r}),h(P,r,k))},segment:r,triggerSegmentEventFn:g});dg({action:"probeTs",transmuxer:r.transmuxer,data:e,baseStartTime:r.baseStartTime,callback:k=>{r.bytes=e=k.data;const P=k.result;P&&(t(r,{hasAudio:P.hasAudio,hasVideo:P.hasVideo,isMuxed:y}),t=null),I()}})},q$=({segment:r,bytes:e,trackInfoFn:t,timingInfoFn:n,videoSegmentTimingInfoFn:i,audioSegmentTimingInfoFn:s,id3Fn:a,captionsFn:o,isEndOfTimeline:l,endedTimelineFn:u,dataFn:c,doneFn:h,onTransmuxerLog:f,triggerSegmentEventFn:g})=>{let v=new Uint8Array(e);if(W5(v)){r.isFmp4=!0;const{tracks:y}=r.map,_={isFmp4:!0,hasVideo:!!y.video,hasAudio:!!y.audio};y.audio&&y.audio.codec&&y.audio.codec!=="enca"&&(_.audioCodec=y.audio.codec),y.video&&y.video.codec&&y.video.codec!=="encv"&&(_.videoCodec=y.video.codec),y.video&&y.audio&&(_.isMuxed=!0),t(r,_);const C=(E,D)=>{c(r,{data:v,type:_.hasAudio&&!_.isMuxed?"audio":"video"}),D&&D.length&&a(r,D),E&&E.length&&o(r,E),h(null,r,{})};dg({action:"probeMp4StartTime",timescales:r.map.timescales,data:v,transmuxer:r.transmuxer,callback:({data:E,startTime:D})=>{e=E.buffer,r.bytes=v=E,_.hasAudio&&!_.isMuxed&&n(r,"audio","start",D),_.hasVideo&&n(r,"video","start",D),dg({action:"probeEmsgID3",data:v,transmuxer:r.transmuxer,offset:D,callback:({emsgData:I,id3Frames:k})=>{if(e=I.buffer,r.bytes=v=I,!y.video||!I.byteLength||!r.transmuxer){C(void 0,k);return}dg({action:"pushMp4Captions",endAction:"mp4Captions",transmuxer:r.transmuxer,data:v,timescales:r.map.timescales,trackIds:[y.video.id],callback:P=>{e=P.data.buffer,r.bytes=v=P.data,P.logs.forEach(function(N){f(Dn(N,{stream:"mp4CaptionParser"}))}),C(P.captions,k)}})}})}});return}if(!r.transmuxer){h(null,r,{});return}if(typeof r.container>"u"&&(r.container=Cm(v)),r.container!=="ts"&&r.container!=="aac"){t(r,{hasAudio:!1,hasVideo:!1}),h(null,r,{});return}Ame({segment:r,bytes:e,trackInfoFn:t,timingInfoFn:n,videoSegmentTimingInfoFn:i,audioSegmentTimingInfoFn:s,id3Fn:a,captionsFn:o,isEndOfTimeline:l,endedTimelineFn:u,dataFn:c,doneFn:h,onTransmuxerLog:f,triggerSegmentEventFn:g})},G$=function({id:r,key:e,encryptedBytes:t,decryptionWorker:n,segment:i,doneFn:s},a){const o=u=>{if(u.data.source===r){n.removeEventListener("message",o);const c=u.data.decrypted;a(new Uint8Array(c.bytes,c.byteOffset,c.byteLength))}};n.onerror=()=>{const u="An error occurred in the decryption worker",c=Uh({segment:i}),h={message:u,metadata:{error:new Error(u),errorType:Se.Error.StreamingFailedToDecryptSegment,segmentInfo:c,keyInfo:{uri:i.key.resolvedUri||i.map.key.resolvedUri}}};s(h,i)},n.addEventListener("message",o);let l;e.bytes.slice?l=e.bytes.slice():l=new Uint32Array(Array.prototype.slice.call(e.bytes)),n.postMessage(R$({source:r,encrypted:t,key:l,iv:e.iv}),[t.buffer,l.buffer])},Dme=({decryptionWorker:r,segment:e,trackInfoFn:t,timingInfoFn:n,videoSegmentTimingInfoFn:i,audioSegmentTimingInfoFn:s,id3Fn:a,captionsFn:o,isEndOfTimeline:l,endedTimelineFn:u,dataFn:c,doneFn:h,onTransmuxerLog:f,triggerSegmentEventFn:g})=>{g({type:"segmentdecryptionstart"}),G$({id:e.requestId,key:e.key,encryptedBytes:e.encryptedBytes,decryptionWorker:r,segment:e,doneFn:h},v=>{e.bytes=v,g({type:"segmentdecryptioncomplete",segment:e}),q$({segment:e,bytes:e.bytes,trackInfoFn:t,timingInfoFn:n,videoSegmentTimingInfoFn:i,audioSegmentTimingInfoFn:s,id3Fn:a,captionsFn:o,isEndOfTimeline:l,endedTimelineFn:u,dataFn:c,doneFn:h,onTransmuxerLog:f,triggerSegmentEventFn:g})})},Ime=({activeXhrs:r,decryptionWorker:e,trackInfoFn:t,timingInfoFn:n,videoSegmentTimingInfoFn:i,audioSegmentTimingInfoFn:s,id3Fn:a,captionsFn:o,isEndOfTimeline:l,endedTimelineFn:u,dataFn:c,doneFn:h,onTransmuxerLog:f,triggerSegmentEventFn:g})=>{let v=0,y=!1;return(_,C)=>{if(!y){if(_)return y=!0,G2(r),h(_,C);if(v+=1,v===r.length){const E=function(){if(C.encryptedBytes)return Dme({decryptionWorker:e,segment:C,trackInfoFn:t,timingInfoFn:n,videoSegmentTimingInfoFn:i,audioSegmentTimingInfoFn:s,id3Fn:a,captionsFn:o,isEndOfTimeline:l,endedTimelineFn:u,dataFn:c,doneFn:h,onTransmuxerLog:f,triggerSegmentEventFn:g});q$({segment:C,bytes:C.bytes,trackInfoFn:t,timingInfoFn:n,videoSegmentTimingInfoFn:i,audioSegmentTimingInfoFn:s,id3Fn:a,captionsFn:o,isEndOfTimeline:l,endedTimelineFn:u,dataFn:c,doneFn:h,onTransmuxerLog:f,triggerSegmentEventFn:g})};if(C.endOfAllRequests=Date.now(),C.map&&C.map.encryptedBytes&&!C.map.bytes)return g({type:"segmentdecryptionstart",segment:C}),G$({decryptionWorker:e,id:C.requestId+"-init",encryptedBytes:C.map.encryptedBytes,key:C.map.key,segment:C,doneFn:h},D=>{C.map.bytes=D,g({type:"segmentdecryptioncomplete",segment:C}),W$(C,I=>{if(I)return G2(r),h(I,C);E()})});E()}}}},Pme=({loadendState:r,abortFn:e})=>t=>{t.target.aborted&&e&&!r.calledAbortFn&&(e(),r.calledAbortFn=!0)},Rme=({segment:r,progressFn:e,trackInfoFn:t,timingInfoFn:n,videoSegmentTimingInfoFn:i,audioSegmentTimingInfoFn:s,id3Fn:a,captionsFn:o,isEndOfTimeline:l,endedTimelineFn:u,dataFn:c})=>h=>{if(!h.target.aborted)return r.stats=Dn(r.stats,wme(h)),!r.stats.firstBytesReceivedAt&&r.stats.bytesReceived&&(r.stats.firstBytesReceivedAt=Date.now()),e(h,r)},Lme=({xhr:r,xhrOptions:e,decryptionWorker:t,segment:n,abortFn:i,progressFn:s,trackInfoFn:a,timingInfoFn:o,videoSegmentTimingInfoFn:l,audioSegmentTimingInfoFn:u,id3Fn:c,captionsFn:h,isEndOfTimeline:f,endedTimelineFn:g,dataFn:v,doneFn:y,onTransmuxerLog:_,triggerSegmentEventFn:C})=>{const E=[],D=Ime({activeXhrs:E,decryptionWorker:t,trackInfoFn:a,timingInfoFn:o,videoSegmentTimingInfoFn:l,audioSegmentTimingInfoFn:u,id3Fn:c,captionsFn:h,isEndOfTimeline:f,endedTimelineFn:g,dataFn:v,doneFn:y,onTransmuxerLog:_,triggerSegmentEventFn:C});if(n.key&&!n.key.bytes){const U=[n.key];n.map&&!n.map.bytes&&n.map.key&&n.map.key.resolvedUri===n.key.resolvedUri&&U.push(n.map.key);const B=Dn(e,{uri:n.key.resolvedUri,responseType:"arraybuffer",requestType:"segment-key"}),A=HM(n,U,D,C),$={uri:n.key.resolvedUri};C({type:"segmentkeyloadstart",segment:n,keyInfo:$});const W=r(B,A);E.push(W)}if(n.map&&!n.map.bytes){if(n.map.key&&(!n.key||n.key.resolvedUri!==n.map.key.resolvedUri)){const W=Dn(e,{uri:n.map.key.resolvedUri,responseType:"arraybuffer",requestType:"segment-key"}),V=HM(n,[n.map.key],D,C),Q={uri:n.map.key.resolvedUri};C({type:"segmentkeyloadstart",segment:n,keyInfo:Q});const ie=r(W,V);E.push(ie)}const B=Dn(e,{uri:n.map.resolvedUri,responseType:"arraybuffer",headers:W2(n.map),requestType:"segment-media-initialization"}),A=Eme({segment:n,finishProcessingFn:D,triggerSegmentEventFn:C});C({type:"segmentloadstart",segment:n});const $=r(B,A);E.push($)}const I=Dn(e,{uri:n.part&&n.part.resolvedUri||n.resolvedUri,responseType:"arraybuffer",headers:W2(n),requestType:"segment"}),k=kme({segment:n,finishProcessingFn:D,responseType:I.responseType,triggerSegmentEventFn:C});C({type:"segmentloadstart",segment:n});const P=r(I,k);P.addEventListener("progress",Rme({segment:n,progressFn:s,trackInfoFn:a,timingInfoFn:o,videoSegmentTimingInfoFn:l,audioSegmentTimingInfoFn:u,id3Fn:c,captionsFn:h,isEndOfTimeline:f,endedTimelineFn:g,dataFn:v})),E.push(P);const N={};return E.forEach(U=>{U.addEventListener("loadend",Pme({loadendState:N,abortFn:i}))}),()=>G2(E)},Ome=cl("CodecUtils"),Mme=function(r){const e=r.attributes||{};if(e.CODECS)return Ni(e.CODECS)},K$=(r,e)=>{const t=e.attributes||{};return r&&r.mediaGroups&&r.mediaGroups.AUDIO&&t.AUDIO&&r.mediaGroups.AUDIO[t.AUDIO]},Fme=(r,e)=>{if(!K$(r,e))return!0;const t=e.attributes||{},n=r.mediaGroups.AUDIO[t.AUDIO];for(const i in n)if(!n[i].uri&&!n[i].playlists)return!0;return!1},fb=function(r){const e={};return r.forEach(({mediaType:t,type:n,details:i})=>{e[t]=e[t]||[],e[t].push(Nk(`${n}${i}`))}),Object.keys(e).forEach(function(t){if(e[t].length>1){Ome(`multiple ${t} codecs found as attributes: ${e[t].join(", ")}. Setting playlist codecs to null so that we wait for mux.js to probe segments for real codecs.`),e[t]=null;return}e[t]=e[t][0]}),e},VM=function(r){let e=0;return r.audio&&e++,r.video&&e++,e},hg=function(r,e){const t=e.attributes||{},n=fb(Mme(e)||[]);if(K$(r,e)&&!n.audio&&!Fme(r,e)){const i=fb(I5(r,t.AUDIO)||[]);i.audio&&(n.audio=i.audio)}return n},Gy=cl("PlaylistSelector"),WM=function(r){if(!r||!r.playlist)return;const e=r.playlist;return JSON.stringify({id:e.id,bandwidth:r.bandwidth,width:r.width,height:r.height,codecs:e.attributes&&e.attributes.CODECS||""})},pb=function(r,e){if(!r)return"";const t=X.getComputedStyle(r);return t?t[e]:""},Mp=function(r,e){const t=r.slice();r.sort(function(n,i){const s=e(n,i);return s===0?t.indexOf(n)-t.indexOf(i):s})},AA=function(r,e){let t,n;return r.attributes.BANDWIDTH&&(t=r.attributes.BANDWIDTH),t=t||X.Number.MAX_VALUE,e.attributes.BANDWIDTH&&(n=e.attributes.BANDWIDTH),n=n||X.Number.MAX_VALUE,t-n},Bme=function(r,e){let t,n;return r.attributes.RESOLUTION&&r.attributes.RESOLUTION.width&&(t=r.attributes.RESOLUTION.width),t=t||X.Number.MAX_VALUE,e.attributes.RESOLUTION&&e.attributes.RESOLUTION.width&&(n=e.attributes.RESOLUTION.width),n=n||X.Number.MAX_VALUE,t===n&&r.attributes.BANDWIDTH&&e.attributes.BANDWIDTH?r.attributes.BANDWIDTH-e.attributes.BANDWIDTH:t-n};let X$=function(r,e,t,n,i,s){if(!r)return;const a={bandwidth:e,width:t,height:n,limitRenditionByPlayerDimensions:i};let o=r.playlists;Ma.isAudioOnly(r)&&(o=s.getAudioTrackPlaylists_(),a.audioOnly=!0);let l=o.map(k=>{let P;const N=k.attributes&&k.attributes.RESOLUTION&&k.attributes.RESOLUTION.width,U=k.attributes&&k.attributes.RESOLUTION&&k.attributes.RESOLUTION.height;return P=k.attributes&&k.attributes.BANDWIDTH,P=P||X.Number.MAX_VALUE,{bandwidth:P,width:N,height:U,playlist:k}});Mp(l,(k,P)=>k.bandwidth-P.bandwidth),l=l.filter(k=>!Ma.isIncompatible(k.playlist));let u=l.filter(k=>Ma.isEnabled(k.playlist));u.length||(u=l.filter(k=>!Ma.isDisabled(k.playlist)));const c=u.filter(k=>k.bandwidth*Zi.BANDWIDTH_VARIANCE<e);let h=c[c.length-1];const f=c.filter(k=>k.bandwidth===h.bandwidth)[0];if(i===!1){const k=f||u[0]||l[0];if(k&&k.playlist){let P="sortedPlaylistReps";return f&&(P="bandwidthBestRep"),u[0]&&(P="enabledPlaylistReps"),Gy(`choosing ${WM(k)} using ${P} with options`,a),k.playlist}return Gy("could not choose a playlist with options",a),null}const g=c.filter(k=>k.width&&k.height);Mp(g,(k,P)=>k.width-P.width);const v=g.filter(k=>k.width===t&&k.height===n);h=v[v.length-1];const y=v.filter(k=>k.bandwidth===h.bandwidth)[0];let _,C,E;y||(_=g.filter(k=>k.width>t||k.height>n),C=_.filter(k=>k.width===_[0].width&&k.height===_[0].height),h=C[C.length-1],E=C.filter(k=>k.bandwidth===h.bandwidth)[0]);let D;if(s.leastPixelDiffSelector){const k=g.map(P=>(P.pixelDiff=Math.abs(P.width-t)+Math.abs(P.height-n),P));Mp(k,(P,N)=>P.pixelDiff===N.pixelDiff?N.bandwidth-P.bandwidth:P.pixelDiff-N.pixelDiff),D=k[0]}const I=D||E||y||f||u[0]||l[0];if(I&&I.playlist){let k="sortedPlaylistReps";return D?k="leastPixelDiffRep":E?k="resolutionPlusOneRep":y?k="resolutionBestRep":f?k="bandwidthBestRep":u[0]&&(k="enabledPlaylistReps"),Gy(`choosing ${WM(I)} using ${k} with options`,a),I.playlist}return Gy("could not choose a playlist with options",a),null};const qM=function(){let r=this.useDevicePixelRatio&&X.devicePixelRatio||1;return isNaN(this.customPixelRatio)||(r=this.customPixelRatio),X$(this.playlists.main,this.systemBandwidth,parseInt(pb(this.tech_.el(),"width"),10)*r,parseInt(pb(this.tech_.el(),"height"),10)*r,this.limitRenditionByPlayerDimensions,this.playlistController_)},Nme=function(r){let e=-1,t=-1;if(r<0||r>1)throw new Error("Moving average bandwidth decay must be between 0 and 1.");return function(){let n=this.useDevicePixelRatio&&X.devicePixelRatio||1;return isNaN(this.customPixelRatio)||(n=this.customPixelRatio),e<0&&(e=this.systemBandwidth,t=this.systemBandwidth),this.systemBandwidth>0&&this.systemBandwidth!==t&&(e=r*this.systemBandwidth+(1-r)*e,t=this.systemBandwidth),X$(this.playlists.main,e,parseInt(pb(this.tech_.el(),"width"),10)*n,parseInt(pb(this.tech_.el(),"height"),10)*n,this.limitRenditionByPlayerDimensions,this.playlistController_)}},Ume=function(r){const{main:e,currentTime:t,bandwidth:n,duration:i,segmentDuration:s,timeUntilRebuffer:a,currentTimeline:o,syncController:l}=r,u=e.playlists.filter(v=>!Ma.isIncompatible(v));let c=u.filter(Ma.isEnabled);c.length||(c=u.filter(v=>!Ma.isDisabled(v)));const f=c.filter(Ma.hasAttribute.bind(null,"BANDWIDTH")).map(v=>{const _=l.getSyncPoint(v,i,o,t)?1:2,E=Ma.estimateSegmentRequestTime(s,n,v)*_-a;return{playlist:v,rebufferingImpact:E}}),g=f.filter(v=>v.rebufferingImpact<=0);return Mp(g,(v,y)=>AA(y.playlist,v.playlist)),g.length?g[0]:(Mp(f,(v,y)=>v.rebufferingImpact-y.rebufferingImpact),f[0]||null)},$me=function(){const r=this.playlists.main.playlists.filter(Ma.isEnabled);return Mp(r,(t,n)=>AA(t,n)),r.filter(t=>!!hg(this.playlists.main,t).video)[0]||null},jme=r=>{let e=0,t;return r.bytes&&(t=new Uint8Array(r.bytes),r.segments.forEach(n=>{t.set(n,e),e+=n.byteLength})),t};function Y$(r){try{return new URL(r).pathname.split("/").slice(-2).join("/")}catch{return""}}const zme=function(r,e,t){if(!r[t]){e.trigger({type:"usage",name:"vhs-608"});let n=t;/^cc708_/.test(t)&&(n="SERVICE"+t.split("_")[1]);const i=e.textTracks().getTrackById(n);if(i)r[t]=i;else{const s=e.options_.vhs&&e.options_.vhs.captionServices||{};let a=t,o=t,l=!1;const u=s[n];u&&(a=u.label,o=u.language,l=u.default),r[t]=e.addRemoteTextTrack({kind:"captions",id:n,default:l,label:a,language:o},!1).track}}},Hme=function({inbandTextTracks:r,captionArray:e,timestampOffset:t}){if(!e)return;const n=X.WebKitDataCue||X.VTTCue;e.forEach(i=>{const s=i.stream;i.content?i.content.forEach(a=>{const o=new n(i.startTime+t,i.endTime+t,a.text);o.line=a.line,o.align="left",o.position=a.position,o.positionAlign="line-left",r[s].addCue(o)}):r[s].addCue(new n(i.startTime+t,i.endTime+t,i.text))})},Vme=function(r){Object.defineProperties(r.frame,{id:{get(){return Se.log.warn("cue.frame.id is deprecated. Use cue.value.key instead."),r.value.key}},value:{get(){return Se.log.warn("cue.frame.value is deprecated. Use cue.value.data instead."),r.value.data}},privateData:{get(){return Se.log.warn("cue.frame.privateData is deprecated. Use cue.value.data instead."),r.value.data}}})},Wme=({inbandTextTracks:r,metadataArray:e,timestampOffset:t,videoDuration:n})=>{if(!e)return;const i=X.WebKitDataCue||X.VTTCue,s=r.metadataTrack_;if(!s||(e.forEach(c=>{const h=c.cueTime+t;typeof h!="number"||X.isNaN(h)||h<0||!(h<1/0)||!c.frames||!c.frames.length||c.frames.forEach(f=>{const g=new i(h,h,f.value||f.url||f.data||"");g.frame=f,g.value=f,Vme(g),s.addCue(g)})}),!s.cues||!s.cues.length))return;const a=s.cues,o=[];for(let c=0;c<a.length;c++)a[c]&&o.push(a[c]);const l=o.reduce((c,h)=>{const f=c[h.startTime]||[];return f.push(h),c[h.startTime]=f,c},{}),u=Object.keys(l).sort((c,h)=>Number(c)-Number(h));u.forEach((c,h)=>{const f=l[c],g=isFinite(n)?n:c,v=Number(u[h+1])||g;f.forEach(y=>{y.endTime=v})})},qme={id:"ID",class:"CLASS",startDate:"START-DATE",duration:"DURATION",endDate:"END-DATE",endOnNext:"END-ON-NEXT",plannedDuration:"PLANNED-DURATION",scte35Out:"SCTE35-OUT",scte35In:"SCTE35-IN"},Gme=new Set(["id","class","startDate","duration","endDate","endOnNext","startTime","endTime","processDateRange"]),Kme=({inbandTextTracks:r,dateRanges:e})=>{const t=r.metadataTrack_;if(!t)return;const n=X.WebKitDataCue||X.VTTCue;e.forEach(i=>{for(const s of Object.keys(i)){if(Gme.has(s))continue;const a=new n(i.startTime,i.endTime,"");a.id=i.id,a.type="com.apple.quicktime.HLS",a.value={key:qme[s],data:i[s]},(s==="scte35Out"||s==="scte35In")&&(a.value.data=new Uint8Array(a.value.data.match(/[\da-f]{2}/gi)).buffer),t.addCue(a)}i.processDateRange()})},GM=(r,e,t)=>{r.metadataTrack_||(r.metadataTrack_=t.addRemoteTextTrack({kind:"metadata",label:"Timed Metadata"},!1).track,Se.browser.IS_ANY_SAFARI||(r.metadataTrack_.inBandMetadataTrackDispatchType=e))},q0=function(r,e,t){let n,i;if(t&&t.cues)for(n=t.cues.length;n--;)i=t.cues[n],i.startTime>=r&&i.endTime<=e&&t.removeCue(i)},Xme=function(r){const e=r.cues;if(!e)return;const t={};for(let n=e.length-1;n>=0;n--){const i=e[n],s=`${i.startTime}-${i.endTime}-${i.text}`;t[s]?r.removeCue(i):t[s]=i}},Yme=(r,e,t)=>{if(typeof e>"u"||e===null||!r.length)return[];const n=Math.ceil((e-t+3)*Ba.ONE_SECOND_IN_TS);let i;for(i=0;i<r.length&&!(r[i].pts>n);i++);return r.slice(i)},Qme=(r,e,t)=>{if(!e.length)return r;if(t)return e.slice();const n=e[0].pts;let i=0;for(i;i<r.length&&!(r[i].pts>=n);i++);return r.slice(0,i).concat(e)},Jme=(r,e,t,n)=>{const i=Math.ceil((e-n)*Ba.ONE_SECOND_IN_TS),s=Math.ceil((t-n)*Ba.ONE_SECOND_IN_TS),a=r.slice();let o=r.length;for(;o--&&!(r[o].pts<=s););if(o===-1)return a;let l=o+1;for(;l--&&!(r[l].pts<=i););return l=Math.max(l,0),a.splice(l,o-l+1),a},Zme=function(r,e){if(!r&&!e||!r&&e||r&&!e)return!1;if(r===e)return!0;const t=Object.keys(r).sort(),n=Object.keys(e).sort();if(t.length!==n.length)return!1;for(let i=0;i<t.length;i++){const s=t[i];if(s!==n[i]||r[s]!==e[s])return!1}return!0},e0e=function(r,e,t){e=e||[];const n=[];let i=0;for(let s=0;s<e.length;s++){const a=e[s];if(r===a.timeline&&(n.push(s),i+=a.duration,i>t))return s}return n.length===0?0:n[n.length-1]},L0=1,t0e=500,KM=r=>typeof r=="number"&&isFinite(r),Ky=1/60,r0e=(r,e,t)=>r!=="main"||!e||!t?null:!t.hasAudio&&!t.hasVideo?"Neither audio nor video found in segment.":e.hasVideo&&!t.hasVideo?"Only audio found in segment when we expected video. We can't switch to audio only from a stream that had video. To get rid of this message, please add codec information to the manifest.":!e.hasVideo&&t.hasVideo?"Video found in segment when we expected only audio. We can't switch to a stream with video from an audio only stream. To get rid of this message, please add codec information to the manifest.":null,n0e=(r,e,t)=>{let n=e-Zi.BACK_BUFFER_LENGTH;r.length&&(n=Math.max(n,r.start(0)));const i=e-t;return Math.min(i,n)},Qf=r=>{const{startOfSegment:e,duration:t,segment:n,part:i,playlist:{mediaSequence:s,id:a,segments:o=[]},mediaIndex:l,partIndex:u,timeline:c}=r,h=o.length-1;let f="mediaIndex/partIndex increment";r.getMediaInfoForTime?f=`getMediaInfoForTime (${r.getMediaInfoForTime})`:r.isSyncRequest&&(f="getSyncSegmentCandidate (isSyncRequest)"),r.independent&&(f+=` with independent ${r.independent}`);const g=typeof u=="number",v=r.segment.uri?"segment":"pre-segment",y=g?g$({preloadSegment:n})-1:0;return`${v} [${s+l}/${s+h}]`+(g?` part [${u}/${y}]`:"")+` segment start/end [${n.start} => ${n.end}]`+(g?` part start/end [${i.start} => ${i.end}]`:"")+` startOfSegment [${e}] duration [${t}] timeline [${c}] selected by [${f}] playlist [${a}]`},XM=r=>`${r}TimingInfo`,i0e=({segmentTimeline:r,currentTimeline:e,startOfSegment:t,buffered:n,overrideCheck:i})=>!i&&r===e?null:r<e?t:n.length?n.end(n.length-1):t,K2=({timelineChangeController:r,currentTimeline:e,segmentTimeline:t,loaderType:n,audioDisabled:i})=>{if(e===t)return!1;if(n==="audio"){const s=r.lastTimelineChange({type:"main"});return!s||s.to!==t}if(n==="main"&&i){const s=r.pendingTimelineChange({type:"audio"});return!(s&&s.to===t)}return!1},s0e=r=>{if(!r)return!1;const e=r.pendingTimelineChange({type:"audio"}),t=r.pendingTimelineChange({type:"main"}),n=e&&t,i=n&&e.to!==t.to;return!!(n&&e.from!==-1&&t.from!==-1&&i)},a0e=r=>{r&&(r.pause(),r.resetEverything(),r.load())},o0e=r=>{const e=r.timelineChangeController_.pendingTimelineChange({type:"audio"}),t=r.timelineChangeController_.pendingTimelineChange({type:"main"});return e&&t&&e.to<t.to},Sd=r=>{const e=r.pendingSegment_;if(!e)return;if(K2({timelineChangeController:r.timelineChangeController_,currentTimeline:r.currentTimeline_,segmentTimeline:e.timeline,loaderType:r.loaderType_,audioDisabled:r.audioDisabled_})&&s0e(r.timelineChangeController_)){if(o0e(r)){r.timelineChangeController_.trigger("audioTimelineBehind");return}a0e(r)}},l0e=r=>{let e=0;return["video","audio"].forEach(function(t){const n=r[`${t}TimingInfo`];if(!n)return;const{start:i,end:s}=n;let a;typeof i=="bigint"||typeof s=="bigint"?a=X.BigInt(s)-X.BigInt(i):typeof i=="number"&&typeof s=="number"&&(a=s-i),typeof a<"u"&&a>e&&(e=a)}),typeof e=="bigint"&&e<Number.MAX_SAFE_INTEGER&&(e=Number(e)),e},YM=({segmentDuration:r,maxDuration:e})=>r?Math.round(r)>e+Tu:!1,u0e=(r,e)=>{if(e!=="hls")return null;const t=l0e({audioTimingInfo:r.audioTimingInfo,videoTimingInfo:r.videoTimingInfo});if(!t)return null;const n=r.playlist.targetDuration,i=YM({segmentDuration:t,maxDuration:n*2}),s=YM({segmentDuration:t,maxDuration:n}),a=`Segment with index ${r.mediaIndex} from playlist ${r.playlist.id} has a duration of ${t} when the reported duration is ${r.duration} and the target duration is ${n}. For HLS content, a duration in excess of the target duration may result in playback issues. See the HLS specification section on EXT-X-TARGETDURATION for more details: https://tools.ietf.org/html/draft-pantos-http-live-streaming-23#section-4.3.3.1`;return i||s?{severity:i?"warn":"info",message:a}:null},Uh=({type:r,segment:e})=>{if(!e)return;const t=!!(e.key||e.map&&e.map.ke),n=!!(e.map&&!e.map.bytes),i=e.startOfSegment===void 0?e.start:e.startOfSegment;return{type:r||e.type,uri:e.resolvedUri||e.uri,start:i,duration:e.duration,isEncrypted:t,isMediaInitialization:n}};let X2=class extends Se.EventTarget{constructor(e,t={}){if(super(),!e)throw new TypeError("Initialization settings are required");if(typeof e.currentTime!="function")throw new TypeError("No currentTime getter specified");if(!e.mediaSource)throw new TypeError("No MediaSource specified");this.bandwidth=e.bandwidth,this.throughput={rate:0,count:0},this.roundTrip=NaN,this.resetStats_(),this.mediaIndex=null,this.partIndex=null,this.hasPlayed_=e.hasPlayed,this.currentTime_=e.currentTime,this.seekable_=e.seekable,this.seeking_=e.seeking,this.duration_=e.duration,this.mediaSource_=e.mediaSource,this.vhs_=e.vhs,this.loaderType_=e.loaderType,this.currentMediaInfo_=void 0,this.startingMediaInfo_=void 0,this.segmentMetadataTrack_=e.segmentMetadataTrack,this.goalBufferLength_=e.goalBufferLength,this.sourceType_=e.sourceType,this.sourceUpdater_=e.sourceUpdater,this.inbandTextTracks_=e.inbandTextTracks,this.state_="INIT",this.timelineChangeController_=e.timelineChangeController,this.shouldSaveSegmentTimingInfo_=!0,this.parse708captions_=e.parse708captions,this.useDtsForTimestampOffset_=e.useDtsForTimestampOffset,this.captionServices_=e.captionServices,this.exactManifestTimings=e.exactManifestTimings,this.addMetadataToTextTrack=e.addMetadataToTextTrack,this.checkBufferTimeout_=null,this.error_=void 0,this.currentTimeline_=-1,this.shouldForceTimestampOffsetAfterResync_=!1,this.pendingSegment_=null,this.xhrOptions_=null,this.pendingSegments_=[],this.audioDisabled_=!1,this.isPendingTimestampOffset_=!1,this.gopBuffer_=[],this.timeMapping_=0,this.safeAppend_=!1,this.appendInitSegment_={audio:!0,video:!0},this.playlistOfLastInitSegment_={audio:null,video:null},this.callQueue_=[],this.loadQueue_=[],this.metadataQueue_={id3:[],caption:[]},this.waitingOnRemove_=!1,this.quotaExceededErrorRetryTimeout_=null,this.activeInitSegmentId_=null,this.initSegments_={},this.cacheEncryptionKeys_=e.cacheEncryptionKeys,this.keyCache_={},this.decrypter_=e.decrypter,this.syncController_=e.syncController,this.syncPoint_={segmentIndex:0,time:0},this.transmuxer_=this.createTransmuxer_(),this.triggerSyncInfoUpdate_=()=>this.trigger("syncinfoupdate"),this.syncController_.on("syncinfoupdate",this.triggerSyncInfoUpdate_),this.mediaSource_.addEventListener("sourceopen",()=>{this.isEndOfStream_()||(this.ended_=!1)}),this.fetchAtBuffer_=!1,this.logger_=cl(`SegmentLoader[${this.loaderType_}]`),Object.defineProperty(this,"state",{get(){return this.state_},set(n){n!==this.state_&&(this.logger_(`${this.state_} -> ${n}`),this.state_=n,this.trigger("statechange"))}}),this.sourceUpdater_.on("ready",()=>{this.hasEnoughInfoToAppend_()?this.processCallQueue_():Sd(this)}),this.sourceUpdater_.on("codecschange",n=>{this.trigger(sr({type:"codecschange"},n))}),this.loaderType_==="main"&&this.timelineChangeController_.on("pendingtimelinechange",()=>{this.hasEnoughInfoToAppend_()?this.processCallQueue_():Sd(this)}),this.loaderType_==="audio"&&this.timelineChangeController_.on("timelinechange",n=>{this.trigger(sr({type:"timelinechange"},n)),this.hasEnoughInfoToLoad_()?this.processLoadQueue_():Sd(this),this.hasEnoughInfoToAppend_()?this.processCallQueue_():Sd(this)})}get mediaSequenceSync_(){return this.syncController_.getMediaSequenceSync(this.loaderType_)}createTransmuxer_(){return jC.createTransmuxer({remux:!1,alignGopsAtEnd:this.safeAppend_,keepOriginalTimestamps:!0,parse708captions:this.parse708captions_,captionServices:this.captionServices_})}resetStats_(){this.mediaBytesTransferred=0,this.mediaRequests=0,this.mediaRequestsAborted=0,this.mediaRequestsTimedout=0,this.mediaRequestsErrored=0,this.mediaTransferDuration=0,this.mediaSecondsLoaded=0,this.mediaAppends=0}dispose(){this.trigger("dispose"),this.state="DISPOSED",this.pause(),this.abort_(),this.transmuxer_&&this.transmuxer_.terminate(),this.resetStats_(),this.checkBufferTimeout_&&X.clearTimeout(this.checkBufferTimeout_),this.syncController_&&this.triggerSyncInfoUpdate_&&this.syncController_.off("syncinfoupdate",this.triggerSyncInfoUpdate_),this.off()}setAudio(e){this.audioDisabled_=!e,e?this.appendInitSegment_.audio=!0:this.sourceUpdater_.removeAudio(0,this.duration_())}abort(){if(this.state!=="WAITING"){this.pendingSegment_&&(this.pendingSegment_=null);return}this.abort_(),this.state="READY",this.paused()||this.monitorBuffer_()}abort_(){this.pendingSegment_&&this.pendingSegment_.abortRequests&&this.pendingSegment_.abortRequests(),this.pendingSegment_=null,this.callQueue_=[],this.loadQueue_=[],this.metadataQueue_.id3=[],this.metadataQueue_.caption=[],this.timelineChangeController_.clearPendingTimelineChange(this.loaderType_),this.waitingOnRemove_=!1,X.clearTimeout(this.quotaExceededErrorRetryTimeout_),this.quotaExceededErrorRetryTimeout_=null}checkForAbort_(e){return this.state==="APPENDING"&&!this.pendingSegment_?(this.state="READY",!0):!this.pendingSegment_||this.pendingSegment_.requestId!==e}error(e){return typeof e<"u"&&(this.logger_("error occurred:",e),this.error_=e),this.pendingSegment_=null,this.error_}endOfStream(){this.ended_=!0,this.transmuxer_&&jC.reset(this.transmuxer_),this.gopBuffer_.length=0,this.pause(),this.trigger("ended")}buffered_(){const e=this.getMediaInfo_();if(!this.sourceUpdater_||!e)return _s();if(this.loaderType_==="main"){const{hasAudio:t,hasVideo:n,isMuxed:i}=e;if(n&&t&&!this.audioDisabled_&&!i)return this.sourceUpdater_.buffered();if(n)return this.sourceUpdater_.videoBuffered()}return this.sourceUpdater_.audioBuffered()}initSegmentForMap(e,t=!1){if(!e)return null;const n=hb(e);let i=this.initSegments_[n];return t&&!i&&e.bytes&&(this.initSegments_[n]=i={resolvedUri:e.resolvedUri,byterange:e.byterange,bytes:e.bytes,tracks:e.tracks,timescales:e.timescales}),i||e}segmentKey(e,t=!1){if(!e)return null;const n=L$(e);let i=this.keyCache_[n];this.cacheEncryptionKeys_&&t&&!i&&e.bytes&&(this.keyCache_[n]=i={resolvedUri:e.resolvedUri,bytes:e.bytes});const s={resolvedUri:(i||e).resolvedUri};return i&&(s.bytes=i.bytes),s}couldBeginLoading_(){return this.playlist_&&!this.paused()}load(){if(this.monitorBuffer_(),!!this.playlist_){if(this.state==="INIT"&&this.couldBeginLoading_())return this.init_();!this.couldBeginLoading_()||this.state!=="READY"&&this.state!=="INIT"||(this.state="READY")}}init_(){return this.state="READY",this.resetEverything(),this.monitorBuffer_()}playlist(e,t={}){if(!e)return;const n=this.playlist_,i=this.pendingSegment_;this.playlist_=e,this.xhrOptions_=t,this.state==="INIT"&&(e.syncInfo={mediaSequence:e.mediaSequence,time:0},this.loaderType_==="main"&&this.syncController_.setDateTimeMappingForStart(e));let s=null;if(n&&(n.id?s=n.id:n.uri&&(s=n.uri)),this.logger_(`playlist update [${s} => ${e.id||e.uri}]`),this.mediaSequenceSync_&&(this.mediaSequenceSync_.update(e,this.currentTime_()),this.logger_(`Playlist update:
currentTime: ${this.currentTime_()}
bufferedEnd: ${UC(this.buffered_())}
`,this.mediaSequenceSync_.diagnostics)),this.trigger("syncinfoupdate"),this.state==="INIT"&&this.couldBeginLoading_())return this.init_();if(!n||n.uri!==e.uri){this.mediaIndex!==null&&(!e.endList&&typeof e.partTargetDuration=="number"?this.resetLoader():this.resyncLoader()),this.currentMediaInfo_=void 0,this.trigger("playlistupdate");return}const a=e.mediaSequence-n.mediaSequence;if(this.logger_(`live window shift [${a}]`),this.mediaIndex!==null)if(this.mediaIndex-=a,this.mediaIndex<0)this.mediaIndex=null,this.partIndex=null;else{const o=this.playlist_.segments[this.mediaIndex];if(this.partIndex&&(!o.parts||!o.parts.length||!o.parts[this.partIndex])){const l=this.mediaIndex;this.logger_(`currently processing part (index ${this.partIndex}) no longer exists.`),this.resetLoader(),this.mediaIndex=l}}i&&(i.mediaIndex-=a,i.mediaIndex<0?(i.mediaIndex=null,i.partIndex=null):(i.mediaIndex>=0&&(i.segment=e.segments[i.mediaIndex]),i.partIndex>=0&&i.segment.parts&&(i.part=i.segment.parts[i.partIndex]))),this.syncController_.saveExpiredSegmentInfo(n,e)}pause(){this.checkBufferTimeout_&&(X.clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=null)}paused(){return this.checkBufferTimeout_===null}resetEverything(e){this.ended_=!1,this.activeInitSegmentId_=null,this.appendInitSegment_={audio:!0,video:!0},this.resetLoader(),this.remove(0,1/0,e),this.transmuxer_&&(this.transmuxer_.postMessage({action:"clearAllMp4Captions"}),this.transmuxer_.postMessage({action:"reset"}))}resetLoader(){this.fetchAtBuffer_=!1,this.mediaSequenceSync_&&this.mediaSequenceSync_.resetAppendedStatus(),this.resyncLoader()}resyncLoader(){this.transmuxer_&&jC.reset(this.transmuxer_),this.mediaIndex=null,this.partIndex=null,this.syncPoint_=null,this.isPendingTimestampOffset_=!1;const e=this.currentMediaInfo_&&this.currentMediaInfo_.isFmp4;this.sourceType_==="hls"&&!e&&(this.shouldForceTimestampOffsetAfterResync_=!0),this.callQueue_=[],this.loadQueue_=[],this.metadataQueue_.id3=[],this.metadataQueue_.caption=[],this.abort(),this.transmuxer_&&this.transmuxer_.postMessage({action:"clearParsedMp4Captions"})}remove(e,t,n=()=>{},i=!1){if(t===1/0&&(t=this.duration_()),t<=e){this.logger_("skipping remove because end ${end} is <= start ${start}");return}if(!this.sourceUpdater_||!this.getMediaInfo_()){this.logger_("skipping remove because no source updater or starting media info");return}let s=1;const a=()=>{s--,s===0&&n()};(i||!this.audioDisabled_)&&(s++,this.sourceUpdater_.removeAudio(e,t,a)),(i||this.loaderType_==="main")&&(this.gopBuffer_=Jme(this.gopBuffer_,e,t,this.timeMapping_),s++,this.sourceUpdater_.removeVideo(e,t,a));for(const o in this.inbandTextTracks_)q0(e,t,this.inbandTextTracks_[o]);q0(e,t,this.segmentMetadataTrack_),a()}monitorBuffer_(){this.checkBufferTimeout_&&X.clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=X.setTimeout(this.monitorBufferTick_.bind(this),1)}monitorBufferTick_(){this.state==="READY"&&this.fillBuffer_(),this.checkBufferTimeout_&&X.clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=X.setTimeout(this.monitorBufferTick_.bind(this),t0e)}fillBuffer_(){if(this.sourceUpdater_.updating())return;const e=this.chooseNextRequest_();if(!e)return;const t={segmentInfo:Uh({type:this.loaderType_,segment:e})};this.trigger({type:"segmentselected",metadata:t}),typeof e.timestampOffset=="number"&&(this.isPendingTimestampOffset_=!1,this.timelineChangeController_.pendingTimelineChange({type:this.loaderType_,from:this.currentTimeline_,to:e.timeline})),this.loadSegment_(e)}isEndOfStream_(e=this.mediaIndex,t=this.playlist_,n=this.partIndex){if(!t||!this.mediaSource_)return!1;const i=typeof e=="number"&&t.segments[e],s=e+1===t.segments.length,a=!i||!i.parts||n+1===i.parts.length;return t.endList&&this.mediaSource_.readyState==="open"&&s&&a}chooseNextRequest_(){const e=this.buffered_(),t=UC(e)||0,n=TA(e,this.currentTime_()),i=!this.hasPlayed_()&&n>=1,s=n>=this.goalBufferLength_(),a=this.playlist_.segments;if(!a.length||i||s)return null;this.syncPoint_=this.syncPoint_||this.syncController_.getSyncPoint(this.playlist_,this.duration_(),this.currentTimeline_,this.currentTime_(),this.loaderType_);const o={partIndex:null,mediaIndex:null,startOfSegment:null,playlist:this.playlist_,isSyncRequest:!this.syncPoint_};if(o.isSyncRequest)o.mediaIndex=e0e(this.currentTimeline_,a,t),this.logger_(`choose next request. Can not find sync point. Fallback to media Index: ${o.mediaIndex}`);else if(this.mediaIndex!==null){const f=a[this.mediaIndex],g=typeof this.partIndex=="number"?this.partIndex:-1;o.startOfSegment=f.end?f.end:t,f.parts&&f.parts[g+1]?(o.mediaIndex=this.mediaIndex,o.partIndex=g+1):o.mediaIndex=this.mediaIndex+1}else{let f,g,v;const y=this.fetchAtBuffer_?t:this.currentTime_();if(this.mediaSequenceSync_&&this.logger_(`chooseNextRequest_ request after Quality Switch:
For TargetTime: ${y}.
CurrentTime: ${this.currentTime_()}
BufferedEnd: ${t}
Fetch At Buffer: ${this.fetchAtBuffer_}
`,this.mediaSequenceSync_.diagnostics),this.mediaSequenceSync_&&this.mediaSequenceSync_.isReliable){const _=this.getSyncInfoFromMediaSequenceSync_(y);if(!_){const C="No sync info found while using media sequence sync";return this.error({message:C,metadata:{errorType:Se.Error.StreamingFailedToSelectNextSegment,error:new Error(C)}}),this.logger_("chooseNextRequest_ - no sync info found using media sequence sync"),null}this.logger_(`chooseNextRequest_ mediaSequence syncInfo (${_.start} --> ${_.end})`),f=_.segmentIndex,g=_.partIndex,v=_.start}else{this.logger_("chooseNextRequest_ - fallback to a regular segment selection algorithm, based on a syncPoint.");const _=Ma.getMediaInfoForTime({exactManifestTimings:this.exactManifestTimings,playlist:this.playlist_,currentTime:y,startingPartIndex:this.syncPoint_.partIndex,startingSegmentIndex:this.syncPoint_.segmentIndex,startTime:this.syncPoint_.time});f=_.segmentIndex,g=_.partIndex,v=_.startTime}o.getMediaInfoForTime=this.fetchAtBuffer_?`bufferedEnd ${y}`:`currentTime ${y}`,o.mediaIndex=f,o.startOfSegment=v,o.partIndex=g,this.logger_(`choose next request. Playlist switched and we have a sync point. Media Index: ${o.mediaIndex} `)}const l=a[o.mediaIndex];let u=l&&typeof o.partIndex=="number"&&l.parts&&l.parts[o.partIndex];if(!l||typeof o.partIndex=="number"&&!u)return null;typeof o.partIndex!="number"&&l.parts&&(o.partIndex=0,u=l.parts[0]);const c=this.vhs_.playlists&&this.vhs_.playlists.main&&this.vhs_.playlists.main.independentSegments||this.playlist_.independentSegments;if(!n&&u&&!c&&!u.independent)if(o.partIndex===0){const f=a[o.mediaIndex-1],g=f.parts&&f.parts.length&&f.parts[f.parts.length-1];g&&g.independent&&(o.mediaIndex-=1,o.partIndex=f.parts.length-1,o.independent="previous segment")}else l.parts[o.partIndex-1].independent&&(o.partIndex-=1,o.independent="previous part");const h=this.mediaSource_&&this.mediaSource_.readyState==="ended";return o.mediaIndex>=a.length-1&&h&&!this.seeking_()?null:(this.shouldForceTimestampOffsetAfterResync_&&(this.shouldForceTimestampOffsetAfterResync_=!1,o.forceTimestampOffset=!0,this.logger_("choose next request. Force timestamp offset after loader resync")),this.generateSegmentInfo_(o))}getSyncInfoFromMediaSequenceSync_(e){if(!this.mediaSequenceSync_)return null;const t=Math.max(e,this.mediaSequenceSync_.start);e!==t&&this.logger_(`getSyncInfoFromMediaSequenceSync_. Pulled target time from ${e} to ${t}`);const n=this.mediaSequenceSync_.getSyncInfoForTime(t);if(!n)return null;if(!n.isAppended)return n;const i=this.mediaSequenceSync_.getSyncInfoForTime(n.end);return i?(i.isAppended&&this.logger_("getSyncInfoFromMediaSequenceSync_: We encounter unexpected scenario where next media sequence sync info is also appended!"),i):null}generateSegmentInfo_(e){const{independent:t,playlist:n,mediaIndex:i,startOfSegment:s,isSyncRequest:a,partIndex:o,forceTimestampOffset:l,getMediaInfoForTime:u}=e,c=n.segments[i],h=typeof o=="number"&&c.parts[o],f={requestId:"segment-loader-"+Math.random(),uri:h&&h.resolvedUri||c.resolvedUri,mediaIndex:i,partIndex:h?o:null,isSyncRequest:a,startOfSegment:s,playlist:n,bytes:null,encryptedBytes:null,timestampOffset:null,timeline:c.timeline,duration:h&&h.duration||c.duration,segment:c,part:h,byteLength:0,transmuxer:this.transmuxer_,getMediaInfoForTime:u,independent:t},g=typeof l<"u"?l:this.isPendingTimestampOffset_;f.timestampOffset=this.timestampOffsetForSegment_({segmentTimeline:c.timeline,currentTimeline:this.currentTimeline_,startOfSegment:s,buffered:this.buffered_(),overrideCheck:g});const v=UC(this.sourceUpdater_.audioBuffered());return typeof v=="number"&&(f.audioAppendStart=v-this.sourceUpdater_.audioTimestampOffset()),this.sourceUpdater_.videoBuffered().length&&(f.gopsToAlignWith=Yme(this.gopBuffer_,this.currentTime_()-this.sourceUpdater_.videoTimestampOffset(),this.timeMapping_)),f}timestampOffsetForSegment_(e){return i0e(e)}earlyAbortWhenNeeded_(e){if(this.vhs_.tech_.paused()||!this.xhrOptions_.timeout||!this.playlist_.attributes.BANDWIDTH||Date.now()-(e.firstBytesReceivedAt||Date.now())<1e3)return;const t=this.currentTime_(),n=e.bandwidth,i=this.pendingSegment_.duration,s=Ma.estimateSegmentRequestTime(i,n,this.playlist_,e.bytesReceived),a=kpe(this.buffered_(),t,this.vhs_.tech_.playbackRate())-1;if(s<=a)return;const o=Ume({main:this.vhs_.playlists.main,currentTime:t,bandwidth:n,duration:this.duration_(),segmentDuration:i,timeUntilRebuffer:a,currentTimeline:this.currentTimeline_,syncController:this.syncController_});if(!o)return;const u=s-a-o.rebufferingImpact;let c=.5;a<=Tu&&(c=1),!(!o.playlist||o.playlist.uri===this.playlist_.uri||u<c)&&(this.bandwidth=o.playlist.attributes.BANDWIDTH*Zi.BANDWIDTH_VARIANCE+1,this.trigger("earlyabort"))}handleAbort_(e){this.logger_(`Aborting ${Qf(e)}`),this.mediaRequestsAborted+=1}handleProgress_(e,t){this.earlyAbortWhenNeeded_(t.stats),!this.checkForAbort_(t.requestId)&&this.trigger("progress")}handleTrackInfo_(e,t){const{hasAudio:n,hasVideo:i}=t,s={segmentInfo:Uh({type:this.loaderType_,segment:e}),trackInfo:{hasAudio:n,hasVideo:i}};this.trigger({type:"segmenttransmuxingtrackinfoavailable",metadata:s}),this.earlyAbortWhenNeeded_(e.stats),!this.checkForAbort_(e.requestId)&&(this.checkForIllegalMediaSwitch(t)||(t=t||{},Zme(this.currentMediaInfo_,t)||(this.appendInitSegment_={audio:!0,video:!0},this.startingMediaInfo_=t,this.currentMediaInfo_=t,this.logger_("trackinfo update",t),this.trigger("trackinfo")),!this.checkForAbort_(e.requestId)&&(this.pendingSegment_.trackInfo=t,this.hasEnoughInfoToAppend_()?this.processCallQueue_():Sd(this))))}handleTimingInfo_(e,t,n,i){if(this.earlyAbortWhenNeeded_(e.stats),this.checkForAbort_(e.requestId))return;const s=this.pendingSegment_,a=XM(t);s[a]=s[a]||{},s[a][n]=i,this.logger_(`timinginfo: ${t} - ${n} - ${i}`),this.hasEnoughInfoToAppend_()?this.processCallQueue_():Sd(this)}handleCaptions_(e,t){if(this.earlyAbortWhenNeeded_(e.stats),this.checkForAbort_(e.requestId))return;if(t.length===0){this.logger_("SegmentLoader received no captions from a caption event");return}if(!this.pendingSegment_.hasAppendedData_){this.metadataQueue_.caption.push(this.handleCaptions_.bind(this,e,t));return}const i=this.sourceUpdater_.videoTimestampOffset()===null?this.sourceUpdater_.audioTimestampOffset():this.sourceUpdater_.videoTimestampOffset(),s={};t.forEach(a=>{s[a.stream]=s[a.stream]||{startTime:1/0,captions:[],endTime:0};const o=s[a.stream];o.startTime=Math.min(o.startTime,a.startTime+i),o.endTime=Math.max(o.endTime,a.endTime+i),o.captions.push(a)}),Object.keys(s).forEach(a=>{const{startTime:o,endTime:l,captions:u}=s[a],c=this.inbandTextTracks_;this.logger_(`adding cues from ${o} -> ${l} for ${a}`),zme(c,this.vhs_.tech_,a),q0(o,l,c[a]),Hme({captionArray:u,inbandTextTracks:c,timestampOffset:i})}),this.transmuxer_&&this.transmuxer_.postMessage({action:"clearParsedMp4Captions"})}handleId3_(e,t,n){if(this.earlyAbortWhenNeeded_(e.stats),this.checkForAbort_(e.requestId))return;if(!this.pendingSegment_.hasAppendedData_){this.metadataQueue_.id3.push(this.handleId3_.bind(this,e,t,n));return}this.addMetadataToTextTrack(n,t,this.duration_())}processMetadataQueue_(){this.metadataQueue_.id3.forEach(e=>e()),this.metadataQueue_.caption.forEach(e=>e()),this.metadataQueue_.id3=[],this.metadataQueue_.caption=[]}processCallQueue_(){const e=this.callQueue_;this.callQueue_=[],e.forEach(t=>t())}processLoadQueue_(){const e=this.loadQueue_;this.loadQueue_=[],e.forEach(t=>t())}hasEnoughInfoToLoad_(){if(this.loaderType_!=="audio")return!0;const e=this.pendingSegment_;return e?this.getCurrentMediaInfo_()?!K2({timelineChangeController:this.timelineChangeController_,currentTimeline:this.currentTimeline_,segmentTimeline:e.timeline,loaderType:this.loaderType_,audioDisabled:this.audioDisabled_}):!0:!1}getCurrentMediaInfo_(e=this.pendingSegment_){return e&&e.trackInfo||this.currentMediaInfo_}getMediaInfo_(e=this.pendingSegment_){return this.getCurrentMediaInfo_(e)||this.startingMediaInfo_}getPendingSegmentPlaylist(){return this.pendingSegment_?this.pendingSegment_.playlist:null}hasEnoughInfoToAppend_(){if(!this.sourceUpdater_.ready()||this.waitingOnRemove_||this.quotaExceededErrorRetryTimeout_)return!1;const e=this.pendingSegment_,t=this.getCurrentMediaInfo_();if(!e||!t)return!1;const{hasAudio:n,hasVideo:i,isMuxed:s}=t;return!(i&&!e.videoTimingInfo||n&&!this.audioDisabled_&&!s&&!e.audioTimingInfo||K2({timelineChangeController:this.timelineChangeController_,currentTimeline:this.currentTimeline_,segmentTimeline:e.timeline,loaderType:this.loaderType_,audioDisabled:this.audioDisabled_}))}handleData_(e,t){if(this.earlyAbortWhenNeeded_(e.stats),this.checkForAbort_(e.requestId))return;if(this.callQueue_.length||!this.hasEnoughInfoToAppend_()){Sd(this),this.callQueue_.push(this.handleData_.bind(this,e,t));return}const n=this.pendingSegment_;if(this.setTimeMapping_(n.timeline),this.updateMediaSecondsLoaded_(n.part||n.segment),this.mediaSource_.readyState!=="closed"){if(e.map&&(e.map=this.initSegmentForMap(e.map,!0),n.segment.map=e.map),e.key&&this.segmentKey(e.key,!0),n.isFmp4=e.isFmp4,n.timingInfo=n.timingInfo||{},n.isFmp4)this.trigger("fmp4"),n.timingInfo.start=n[XM(t.type)].start;else{const i=this.getCurrentMediaInfo_(),s=this.loaderType_==="main"&&i&&i.hasVideo;let a;s&&(a=n.videoTimingInfo.start),n.timingInfo.start=this.trueSegmentStart_({currentStart:n.timingInfo.start,playlist:n.playlist,mediaIndex:n.mediaIndex,currentVideoTimestampOffset:this.sourceUpdater_.videoTimestampOffset(),useVideoTimingInfo:s,firstVideoFrameTimeForData:a,videoTimingInfo:n.videoTimingInfo,audioTimingInfo:n.audioTimingInfo})}if(this.updateAppendInitSegmentStatus(n,t.type),this.updateSourceBufferTimestampOffset_(n),n.isSyncRequest){this.updateTimingInfoEnd_(n),this.syncController_.saveSegmentTimingInfo({segmentInfo:n,shouldSaveTimelineMapping:this.loaderType_==="main"});const i=this.chooseNextRequest_();if(i.mediaIndex!==n.mediaIndex||i.partIndex!==n.partIndex){this.logger_("sync segment was incorrect, not appending");return}this.logger_("sync segment was correct, appending")}n.hasAppendedData_=!0,this.processMetadataQueue_(),this.appendData_(n,t)}}updateAppendInitSegmentStatus(e,t){this.loaderType_==="main"&&typeof e.timestampOffset=="number"&&!e.changedTimestampOffset&&(this.appendInitSegment_={audio:!0,video:!0}),this.playlistOfLastInitSegment_[t]!==e.playlist&&(this.appendInitSegment_[t]=!0)}getInitSegmentAndUpdateState_({type:e,initSegment:t,map:n,playlist:i}){if(n){const s=hb(n);if(this.activeInitSegmentId_===s)return null;t=this.initSegmentForMap(n,!0).bytes,this.activeInitSegmentId_=s}return t&&this.appendInitSegment_[e]?(this.playlistOfLastInitSegment_[e]=i,this.appendInitSegment_[e]=!1,this.activeInitSegmentId_=null,t):null}handleQuotaExceededError_({segmentInfo:e,type:t,bytes:n},i){const s=this.sourceUpdater_.audioBuffered(),a=this.sourceUpdater_.videoBuffered();s.length>1&&this.logger_("On QUOTA_EXCEEDED_ERR, found gaps in the audio buffer: "+Wh(s).join(", ")),a.length>1&&this.logger_("On QUOTA_EXCEEDED_ERR, found gaps in the video buffer: "+Wh(a).join(", "));const o=s.length?s.start(0):0,l=s.length?s.end(s.length-1):0,u=a.length?a.start(0):0,c=a.length?a.end(a.length-1):0;if(l-o<=L0&&c-u<=L0){this.logger_(`On QUOTA_EXCEEDED_ERR, single segment too large to append to buffer, triggering an error. Appended byte length: ${n.byteLength}, audio buffer: ${Wh(s).join(", ")}, video buffer: ${Wh(a).join(", ")}, `),this.error({message:"Quota exceeded error with append of a single segment of content",excludeUntil:1/0}),this.trigger("error");return}this.waitingOnRemove_=!0,this.callQueue_.push(this.appendToSourceBuffer_.bind(this,{segmentInfo:e,type:t,bytes:n}));const f=this.currentTime_()-L0;this.logger_(`On QUOTA_EXCEEDED_ERR, removing audio/video from 0 to ${f}`),this.remove(0,f,()=>{this.logger_(`On QUOTA_EXCEEDED_ERR, retrying append in ${L0}s`),this.waitingOnRemove_=!1,this.quotaExceededErrorRetryTimeout_=X.setTimeout(()=>{this.logger_("On QUOTA_EXCEEDED_ERR, re-processing call queue"),this.quotaExceededErrorRetryTimeout_=null,this.processCallQueue_()},L0*1e3)},!0)}handleAppendError_({segmentInfo:e,type:t,bytes:n},i){if(i){if(i.code===k$){this.handleQuotaExceededError_({segmentInfo:e,type:t,bytes:n});return}this.logger_("Received non QUOTA_EXCEEDED_ERR on append",i),this.error({message:`${t} append of ${n.length}b failed for segment #${e.mediaIndex} in playlist ${e.playlist.id}`,metadata:{errorType:Se.Error.StreamingFailedToAppendSegment}}),this.trigger("appenderror")}}appendToSourceBuffer_({segmentInfo:e,type:t,initSegment:n,data:i,bytes:s}){if(!s){const o=[i];let l=i.byteLength;n&&(o.unshift(n),l+=n.byteLength),s=jme({bytes:l,segments:o})}const a={segmentInfo:Uh({type:this.loaderType_,segment:e})};this.trigger({type:"segmentappendstart",metadata:a}),this.sourceUpdater_.appendBuffer({segmentInfo:e,type:t,bytes:s},this.handleAppendError_.bind(this,{segmentInfo:e,type:t,bytes:s}))}handleSegmentTimingInfo_(e,t,n){if(!this.pendingSegment_||t!==this.pendingSegment_.requestId)return;const i=this.pendingSegment_.segment,s=`${e}TimingInfo`;i[s]||(i[s]={}),i[s].transmuxerPrependedSeconds=n.prependedContentDuration||0,i[s].transmuxedPresentationStart=n.start.presentation,i[s].transmuxedDecodeStart=n.start.decode,i[s].transmuxedPresentationEnd=n.end.presentation,i[s].transmuxedDecodeEnd=n.end.decode,i[s].baseMediaDecodeTime=n.baseMediaDecodeTime}appendData_(e,t){const{type:n,data:i}=t;if(!i||!i.byteLength||n==="audio"&&this.audioDisabled_)return;const s=this.getInitSegmentAndUpdateState_({type:n,initSegment:t.initSegment,playlist:e.playlist,map:e.isFmp4?e.segment.map:null});this.appendToSourceBuffer_({segmentInfo:e,type:n,initSegment:s,data:i})}loadSegment_(e){if(this.state="WAITING",this.pendingSegment_=e,this.trimBackBuffer_(e),typeof e.timestampOffset=="number"&&this.transmuxer_&&this.transmuxer_.postMessage({action:"clearAllMp4Captions"}),!this.hasEnoughInfoToLoad_()){Sd(this),this.loadQueue_.push(()=>{const t=sr({},e,{forceTimestampOffset:!0});sr(e,this.generateSegmentInfo_(t)),this.isPendingTimestampOffset_=!1,this.updateTransmuxerAndRequestSegment_(e)});return}this.updateTransmuxerAndRequestSegment_(e)}updateTransmuxerAndRequestSegment_(e){this.shouldUpdateTransmuxerTimestampOffset_(e.timestampOffset)&&(this.gopBuffer_.length=0,e.gopsToAlignWith=[],this.timeMapping_=0,this.transmuxer_.postMessage({action:"reset"}),this.transmuxer_.postMessage({action:"setTimestampOffset",timestampOffset:e.timestampOffset}));const t=this.createSimplifiedSegmentObj_(e),n=this.isEndOfStream_(e.mediaIndex,e.playlist,e.partIndex),i=this.mediaIndex!==null,s=e.timeline!==this.currentTimeline_&&e.timeline>0,a=n||i&&s;this.logger_(`Requesting
${Y$(e.uri)}
${Qf(e)}`),t.map&&!t.map.bytes&&(this.logger_("going to request init segment."),this.appendInitSegment_={video:!0,audio:!0}),e.abortRequests=Lme({xhr:this.vhs_.xhr,xhrOptions:this.xhrOptions_,decryptionWorker:this.decrypter_,segment:t,abortFn:this.handleAbort_.bind(this,e),progressFn:this.handleProgress_.bind(this),trackInfoFn:this.handleTrackInfo_.bind(this),timingInfoFn:this.handleTimingInfo_.bind(this),videoSegmentTimingInfoFn:this.handleSegmentTimingInfo_.bind(this,"video",e.requestId),audioSegmentTimingInfoFn:this.handleSegmentTimingInfo_.bind(this,"audio",e.requestId),captionsFn:this.handleCaptions_.bind(this),isEndOfTimeline:a,endedTimelineFn:()=>{this.logger_("received endedtimeline callback")},id3Fn:this.handleId3_.bind(this),dataFn:this.handleData_.bind(this),doneFn:this.segmentRequestFinished_.bind(this),onTransmuxerLog:({message:o,level:l,stream:u})=>{this.logger_(`${Qf(e)} logged from transmuxer stream ${u} as a ${l}: ${o}`)},triggerSegmentEventFn:({type:o,segment:l,keyInfo:u,trackInfo:c,timingInfo:h})=>{const g={segmentInfo:Uh({segment:l})};u&&(g.keyInfo=u),c&&(g.trackInfo=c),h&&(g.timingInfo=h),this.trigger({type:o,metadata:g})}})}trimBackBuffer_(e){const t=n0e(this.seekable_(),this.currentTime_(),this.playlist_.targetDuration||10);t>0&&this.remove(0,t)}createSimplifiedSegmentObj_(e){const t=e.segment,n=e.part,i=e.segment.key||e.segment.map&&e.segment.map.key,s=e.segment.map&&!e.segment.map.bytes,a={resolvedUri:n?n.resolvedUri:t.resolvedUri,byterange:n?n.byterange:t.byterange,requestId:e.requestId,transmuxer:e.transmuxer,audioAppendStart:e.audioAppendStart,gopsToAlignWith:e.gopsToAlignWith,part:e.part,type:this.loaderType_,start:e.startOfSegment,duration:e.duration,isEncrypted:i,isMediaInitialization:s},o=e.playlist.segments[e.mediaIndex-1];if(o&&o.timeline===t.timeline&&(o.videoTimingInfo?a.baseStartTime=o.videoTimingInfo.transmuxedDecodeEnd:o.audioTimingInfo&&(a.baseStartTime=o.audioTimingInfo.transmuxedDecodeEnd)),t.key){const l=t.key.iv||new Uint32Array([0,0,0,e.mediaIndex+e.playlist.mediaSequence]);a.key=this.segmentKey(t.key),a.key.iv=l}return t.map&&(a.map=this.initSegmentForMap(t.map)),a}saveTransferStats_(e){this.mediaRequests+=1,e&&(this.mediaBytesTransferred+=e.bytesReceived,this.mediaTransferDuration+=e.roundTripTime)}saveBandwidthRelatedStats_(e,t){if(this.pendingSegment_.byteLength=t.bytesReceived,e<Ky){this.logger_(`Ignoring segment's bandwidth because its duration of ${e} is less than the min to record ${Ky}`);return}const n={bandwidthInfo:{from:this.bandwidth,to:t.bandwidth}};this.trigger({type:"bandwidthupdated",metadata:n}),this.bandwidth=t.bandwidth,this.roundTrip=t.roundTripTime}handleTimeout_(){this.mediaRequestsTimedout+=1,this.bandwidth=1,this.roundTrip=NaN,this.trigger("bandwidthupdate"),this.trigger("timeout")}segmentRequestFinished_(e,t,n){if(this.callQueue_.length){this.callQueue_.push(this.segmentRequestFinished_.bind(this,e,t,n));return}if(this.saveTransferStats_(t.stats),!this.pendingSegment_||t.requestId!==this.pendingSegment_.requestId)return;if(e){if(this.pendingSegment_=null,this.state="READY",e.code===wu.ABORTED)return;if(this.pause(),e.code===wu.TIMEOUT){this.handleTimeout_();return}this.mediaRequestsErrored+=1,this.error(e),this.trigger("error");return}const i=this.pendingSegment_;this.saveBandwidthRelatedStats_(i.duration,t.stats),i.endOfAllRequests=t.endOfAllRequests,n.gopInfo&&(this.gopBuffer_=Qme(this.gopBuffer_,n.gopInfo,this.safeAppend_)),this.state="APPENDING",this.trigger("appending"),this.waitForAppendsToComplete_(i)}setTimeMapping_(e){const t=this.syncController_.mappingForTimeline(e);t!==null&&(this.timeMapping_=t)}updateMediaSecondsLoaded_(e){typeof e.start=="number"&&typeof e.end=="number"?this.mediaSecondsLoaded+=e.end-e.start:this.mediaSecondsLoaded+=e.duration}shouldUpdateTransmuxerTimestampOffset_(e){return e===null?!1:this.loaderType_==="main"&&e!==this.sourceUpdater_.videoTimestampOffset()||!this.audioDisabled_&&e!==this.sourceUpdater_.audioTimestampOffset()}trueSegmentStart_({currentStart:e,playlist:t,mediaIndex:n,firstVideoFrameTimeForData:i,currentVideoTimestampOffset:s,useVideoTimingInfo:a,videoTimingInfo:o,audioTimingInfo:l}){if(typeof e<"u")return e;if(!a)return l.start;const u=t.segments[n-1];return n===0||!u||typeof u.start>"u"||u.end!==i+s?i:o.start}waitForAppendsToComplete_(e){const t=this.getCurrentMediaInfo_(e);if(!t){this.error({message:"No starting media returned, likely due to an unsupported media format.",playlistExclusionDuration:1/0}),this.trigger("error");return}const{hasAudio:n,hasVideo:i,isMuxed:s}=t,a=this.loaderType_==="main"&&i,o=!this.audioDisabled_&&n&&!s;if(e.waitingOnAppends=0,!e.hasAppendedData_){!e.timingInfo&&typeof e.timestampOffset=="number"&&(this.isPendingTimestampOffset_=!0),e.timingInfo={start:0},e.waitingOnAppends++,this.isPendingTimestampOffset_||(this.updateSourceBufferTimestampOffset_(e),this.processMetadataQueue_()),this.checkAppendsDone_(e);return}a&&e.waitingOnAppends++,o&&e.waitingOnAppends++,a&&this.sourceUpdater_.videoQueueCallback(this.checkAppendsDone_.bind(this,e)),o&&this.sourceUpdater_.audioQueueCallback(this.checkAppendsDone_.bind(this,e))}checkAppendsDone_(e){this.checkForAbort_(e.requestId)||(e.waitingOnAppends--,e.waitingOnAppends===0&&this.handleAppendsDone_())}checkForIllegalMediaSwitch(e){const t=r0e(this.loaderType_,this.getCurrentMediaInfo_(),e);return t?(this.error({message:t,playlistExclusionDuration:1/0}),this.trigger("error"),!0):!1}updateSourceBufferTimestampOffset_(e){if(e.timestampOffset===null||typeof e.timingInfo.start!="number"||e.changedTimestampOffset||this.loaderType_!=="main")return;let t=!1;e.timestampOffset-=this.getSegmentStartTimeForTimestampOffsetCalculation_({videoTimingInfo:e.segment.videoTimingInfo,audioTimingInfo:e.segment.audioTimingInfo,timingInfo:e.timingInfo}),e.changedTimestampOffset=!0,e.timestampOffset!==this.sourceUpdater_.videoTimestampOffset()&&(this.sourceUpdater_.videoTimestampOffset(e.timestampOffset),t=!0),e.timestampOffset!==this.sourceUpdater_.audioTimestampOffset()&&(this.sourceUpdater_.audioTimestampOffset(e.timestampOffset),t=!0),t&&this.trigger("timestampoffset")}getSegmentStartTimeForTimestampOffsetCalculation_({videoTimingInfo:e,audioTimingInfo:t,timingInfo:n}){return this.useDtsForTimestampOffset_?e&&typeof e.transmuxedDecodeStart=="number"?e.transmuxedDecodeStart:t&&typeof t.transmuxedDecodeStart=="number"?t.transmuxedDecodeStart:n.start:n.start}updateTimingInfoEnd_(e){e.timingInfo=e.timingInfo||{};const t=this.getMediaInfo_(),i=this.loaderType_==="main"&&t&&t.hasVideo&&e.videoTimingInfo?e.videoTimingInfo:e.audioTimingInfo;i&&(e.timingInfo.end=typeof i.end=="number"?i.end:i.start+e.duration)}handleAppendsDone_(){if(this.pendingSegment_){const l={segmentInfo:Uh({type:this.loaderType_,segment:this.pendingSegment_})};this.trigger({type:"appendsdone",metadata:l})}if(!this.pendingSegment_){this.state="READY",this.paused()||this.monitorBuffer_();return}const e=this.pendingSegment_;e.part&&e.part.syncInfo?e.part.syncInfo.markAppended():e.segment.syncInfo&&e.segment.syncInfo.markAppended(),this.updateTimingInfoEnd_(e),this.shouldSaveSegmentTimingInfo_&&this.syncController_.saveSegmentTimingInfo({segmentInfo:e,shouldSaveTimelineMapping:this.loaderType_==="main"});const t=u0e(e,this.sourceType_);if(t&&(t.severity==="warn"?Se.log.warn(t.message):this.logger_(t.message)),this.recordThroughput_(e),this.pendingSegment_=null,this.state="READY",e.isSyncRequest&&(this.trigger("syncinfoupdate"),!e.hasAppendedData_)){this.logger_(`Throwing away un-appended sync request ${Qf(e)}`);return}this.logger_(`Appended ${Qf(e)}`),this.addSegmentMetadataCue_(e),this.fetchAtBuffer_=!0,this.currentTimeline_!==e.timeline&&(this.timelineChangeController_.lastTimelineChange({type:this.loaderType_,from:this.currentTimeline_,to:e.timeline}),this.loaderType_==="main"&&!this.audioDisabled_&&this.timelineChangeController_.lastTimelineChange({type:"audio",from:this.currentTimeline_,to:e.timeline})),this.currentTimeline_=e.timeline,this.trigger("syncinfoupdate");const n=e.segment,i=e.part,s=n.end&&this.currentTime_()-n.end>e.playlist.targetDuration*3,a=i&&i.end&&this.currentTime_()-i.end>e.playlist.partTargetDuration*3;if(s||a){this.logger_(`bad ${s?"segment":"part"} ${Qf(e)}`),this.resetEverything();return}this.mediaIndex!==null&&this.trigger("bandwidthupdate"),this.trigger("progress"),this.mediaIndex=e.mediaIndex,this.partIndex=e.partIndex,this.isEndOfStream_(e.mediaIndex,e.playlist,e.partIndex)&&this.endOfStream(),this.trigger("appended"),e.hasAppendedData_&&this.mediaAppends++,this.paused()||this.monitorBuffer_()}recordThroughput_(e){if(e.duration<Ky){this.logger_(`Ignoring segment's throughput because its duration of ${e.duration} is less than the min to record ${Ky}`);return}const t=this.throughput.rate,n=Date.now()-e.endOfAllRequests+1,i=Math.floor(e.byteLength/n*8*1e3);this.throughput.rate+=(i-t)/++this.throughput.count}addSegmentMetadataCue_(e){if(!this.segmentMetadataTrack_)return;const t=e.segment,n=t.start,i=t.end;if(!KM(n)||!KM(i))return;q0(n,i,this.segmentMetadataTrack_);const s=X.WebKitDataCue||X.VTTCue,a={custom:t.custom,dateTimeObject:t.dateTimeObject,dateTimeString:t.dateTimeString,programDateTime:t.programDateTime,bandwidth:e.playlist.attributes.BANDWIDTH,resolution:e.playlist.attributes.RESOLUTION,codecs:e.playlist.attributes.CODECS,byteLength:e.byteLength,uri:e.uri,timeline:e.timeline,playlist:e.playlist.id,start:n,end:i},o=JSON.stringify(a),l=new s(n,i,o);l.value=a,this.segmentMetadataTrack_.addCue(l)}};function kc(){}const Q$=function(r){return typeof r!="string"?r:r.replace(/./,e=>e.toUpperCase())},c0e=["video","audio"],Y2=(r,e)=>{const t=e[`${r}Buffer`];return t&&t.updating||e.queuePending[r]},d0e=(r,e)=>{for(let t=0;t<e.length;t++){const n=e[t];if(n.type==="mediaSource")return null;if(n.type===r)return t}return null},Fp=(r,e)=>{if(e.queue.length===0)return;let t=0,n=e.queue[t];if(n.type==="mediaSource"){!e.updating()&&e.mediaSource.readyState!=="closed"&&(e.queue.shift(),n.action(e),n.doneFn&&n.doneFn(),Fp("audio",e),Fp("video",e));return}if(r!=="mediaSource"&&!(!e.ready()||e.mediaSource.readyState==="closed"||Y2(r,e))){if(n.type!==r){if(t=d0e(r,e.queue),t===null)return;n=e.queue[t]}if(e.queue.splice(t,1),e.queuePending[r]=n,n.action(r,e),!n.doneFn){e.queuePending[r]=null,Fp(r,e);return}}},J$=(r,e)=>{const t=e[`${r}Buffer`],n=Q$(r);t&&(t.removeEventListener("updateend",e[`on${n}UpdateEnd_`]),t.removeEventListener("error",e[`on${n}Error_`]),e.codecs[r]=null,e[`${r}Buffer`]=null)},gu=(r,e)=>r&&e&&Array.prototype.indexOf.call(r.sourceBuffers,e)!==-1,ao={appendBuffer:(r,e,t)=>(n,i)=>{const s=i[`${n}Buffer`];if(gu(i.mediaSource,s)){i.logger_(`Appending segment ${e.mediaIndex}'s ${r.length} bytes to ${n}Buffer`);try{s.appendBuffer(r)}catch(a){i.logger_(`Error with code ${a.code} `+(a.code===k$?"(QUOTA_EXCEEDED_ERR) ":"")+`when appending segment ${e.mediaIndex} to ${n}Buffer`),i.queuePending[n]=null,t(a)}}},remove:(r,e)=>(t,n)=>{const i=n[`${t}Buffer`];if(gu(n.mediaSource,i)){n.logger_(`Removing ${r} to ${e} from ${t}Buffer`);try{i.remove(r,e)}catch{n.logger_(`Remove ${r} to ${e} from ${t}Buffer failed`)}}},timestampOffset:r=>(e,t)=>{const n=t[`${e}Buffer`];gu(t.mediaSource,n)&&(t.logger_(`Setting ${e}timestampOffset to ${r}`),n.timestampOffset=r)},callback:r=>(e,t)=>{r()},endOfStream:r=>e=>{if(e.mediaSource.readyState==="open"){e.logger_(`Calling mediaSource endOfStream(${r||""})`);try{e.mediaSource.endOfStream(r)}catch(t){Se.log.warn("Failed to call media source endOfStream",t)}}},duration:r=>e=>{e.logger_(`Setting mediaSource duration to ${r}`);try{e.mediaSource.duration=r}catch(t){Se.log.warn("Failed to set media source duration",t)}},abort:()=>(r,e)=>{if(e.mediaSource.readyState!=="open")return;const t=e[`${r}Buffer`];if(gu(e.mediaSource,t)){e.logger_(`calling abort on ${r}Buffer`);try{t.abort()}catch(n){Se.log.warn(`Failed to abort on ${r}Buffer`,n)}}},addSourceBuffer:(r,e)=>t=>{const n=Q$(r),i=Nu(e);t.logger_(`Adding ${r}Buffer with codec ${e} to mediaSource`);const s=t.mediaSource.addSourceBuffer(i);s.addEventListener("updateend",t[`on${n}UpdateEnd_`]),s.addEventListener("error",t[`on${n}Error_`]),t.codecs[r]=e,t[`${r}Buffer`]=s},removeSourceBuffer:r=>e=>{const t=e[`${r}Buffer`];if(J$(r,e),!!gu(e.mediaSource,t)){e.logger_(`Removing ${r}Buffer with codec ${e.codecs[r]} from mediaSource`);try{e.mediaSource.removeSourceBuffer(t)}catch(n){Se.log.warn(`Failed to removeSourceBuffer ${r}Buffer`,n)}}},changeType:r=>(e,t)=>{const n=t[`${e}Buffer`],i=Nu(r);if(!gu(t.mediaSource,n))return;const s=r.substring(0,r.indexOf(".")),a=t.codecs[e];if(a.substring(0,a.indexOf("."))===s)return;const l={codecsChangeInfo:{from:a,to:r}};t.trigger({type:"codecschange",metadata:l}),t.logger_(`changing ${e}Buffer codec from ${a} to ${r}`);try{n.changeType(i),t.codecs[e]=r}catch(u){l.errorType=Se.Error.StreamingCodecsChangeError,l.error=u,u.metadata=l,t.error_=u,t.trigger("error"),Se.log.warn(`Failed to changeType on ${e}Buffer`,u)}}},oo=({type:r,sourceUpdater:e,action:t,doneFn:n,name:i})=>{e.queue.push({type:r,action:t,doneFn:n,name:i}),Fp(r,e)},QM=(r,e)=>t=>{const n=e[`${r}Buffered`](),i=Cpe(n);if(e.logger_(`received "updateend" event for ${r} Source Buffer: `,i),e.queuePending[r]){const s=e.queuePending[r].doneFn;e.queuePending[r]=null,s&&s(e[`${r}Error_`])}Fp(r,e)};let Z$=class extends Se.EventTarget{constructor(e){super(),this.mediaSource=e,this.sourceopenListener_=()=>Fp("mediaSource",this),this.mediaSource.addEventListener("sourceopen",this.sourceopenListener_),this.logger_=cl("SourceUpdater"),this.audioTimestampOffset_=0,this.videoTimestampOffset_=0,this.queue=[],this.queuePending={audio:null,video:null},this.delayedAudioAppendQueue_=[],this.videoAppendQueued_=!1,this.codecs={},this.onVideoUpdateEnd_=QM("video",this),this.onAudioUpdateEnd_=QM("audio",this),this.onVideoError_=t=>{this.videoError_=t},this.onAudioError_=t=>{this.audioError_=t},this.createdSourceBuffers_=!1,this.initializedEme_=!1,this.triggeredReady_=!1}initializedEme(){this.initializedEme_=!0,this.triggerReady()}hasCreatedSourceBuffers(){return this.createdSourceBuffers_}hasInitializedAnyEme(){return this.initializedEme_}ready(){return this.hasCreatedSourceBuffers()&&this.hasInitializedAnyEme()}createSourceBuffers(e){this.hasCreatedSourceBuffers()||(this.addOrChangeSourceBuffers(e),this.createdSourceBuffers_=!0,this.trigger("createdsourcebuffers"),this.triggerReady())}triggerReady(){this.ready()&&!this.triggeredReady_&&(this.triggeredReady_=!0,this.trigger("ready"))}addSourceBuffer(e,t){oo({type:"mediaSource",sourceUpdater:this,action:ao.addSourceBuffer(e,t),name:"addSourceBuffer"})}abort(e){oo({type:e,sourceUpdater:this,action:ao.abort(e),name:"abort"})}removeSourceBuffer(e){if(!this.canRemoveSourceBuffer()){Se.log.error("removeSourceBuffer is not supported!");return}oo({type:"mediaSource",sourceUpdater:this,action:ao.removeSourceBuffer(e),name:"removeSourceBuffer"})}canRemoveSourceBuffer(){return!Se.browser.IS_FIREFOX&&X.MediaSource&&X.MediaSource.prototype&&typeof X.MediaSource.prototype.removeSourceBuffer=="function"}static canChangeType(){return X.SourceBuffer&&X.SourceBuffer.prototype&&typeof X.SourceBuffer.prototype.changeType=="function"}canChangeType(){return this.constructor.canChangeType()}changeType(e,t){if(!this.canChangeType()){Se.log.error("changeType is not supported!");return}oo({type:e,sourceUpdater:this,action:ao.changeType(t),name:"changeType"})}addOrChangeSourceBuffers(e){if(!e||typeof e!="object"||Object.keys(e).length===0)throw new Error("Cannot addOrChangeSourceBuffers to undefined codecs");Object.keys(e).forEach(t=>{const n=e[t];if(!this.hasCreatedSourceBuffers())return this.addSourceBuffer(t,n);this.canChangeType()&&this.changeType(t,n)})}appendBuffer(e,t){const{segmentInfo:n,type:i,bytes:s}=e;if(this.processedAppend_=!0,i==="audio"&&this.videoBuffer&&!this.videoAppendQueued_){this.delayedAudioAppendQueue_.push([e,t]),this.logger_(`delayed audio append of ${s.length} until video append`);return}const a=t;if(oo({type:i,sourceUpdater:this,action:ao.appendBuffer(s,n||{mediaIndex:-1},a),doneFn:t,name:"appendBuffer"}),i==="video"){if(this.videoAppendQueued_=!0,!this.delayedAudioAppendQueue_.length)return;const o=this.delayedAudioAppendQueue_.slice();this.logger_(`queuing delayed audio ${o.length} appendBuffers`),this.delayedAudioAppendQueue_.length=0,o.forEach(l=>{this.appendBuffer.apply(this,l)})}}audioBuffered(){return gu(this.mediaSource,this.audioBuffer)&&this.audioBuffer.buffered?this.audioBuffer.buffered:_s()}videoBuffered(){return gu(this.mediaSource,this.videoBuffer)&&this.videoBuffer.buffered?this.videoBuffer.buffered:_s()}buffered(){const e=gu(this.mediaSource,this.videoBuffer)?this.videoBuffer:null,t=gu(this.mediaSource,this.audioBuffer)?this.audioBuffer:null;return t&&!e?this.audioBuffered():e&&!t?this.videoBuffered():Epe(this.audioBuffered(),this.videoBuffered())}setDuration(e,t=kc){oo({type:"mediaSource",sourceUpdater:this,action:ao.duration(e),name:"duration",doneFn:t})}endOfStream(e=null,t=kc){typeof e!="string"&&(e=void 0),oo({type:"mediaSource",sourceUpdater:this,action:ao.endOfStream(e),name:"endOfStream",doneFn:t})}removeAudio(e,t,n=kc){if(!this.audioBuffered().length||this.audioBuffered().end(0)===0){n();return}oo({type:"audio",sourceUpdater:this,action:ao.remove(e,t),doneFn:n,name:"remove"})}removeVideo(e,t,n=kc){if(!this.videoBuffered().length||this.videoBuffered().end(0)===0){n();return}oo({type:"video",sourceUpdater:this,action:ao.remove(e,t),doneFn:n,name:"remove"})}updating(){return!!(Y2("audio",this)||Y2("video",this))}audioTimestampOffset(e){return typeof e<"u"&&this.audioBuffer&&this.audioTimestampOffset_!==e&&(oo({type:"audio",sourceUpdater:this,action:ao.timestampOffset(e),name:"timestampOffset"}),this.audioTimestampOffset_=e),this.audioTimestampOffset_}videoTimestampOffset(e){return typeof e<"u"&&this.videoBuffer&&this.videoTimestampOffset_!==e&&(oo({type:"video",sourceUpdater:this,action:ao.timestampOffset(e),name:"timestampOffset"}),this.videoTimestampOffset_=e),this.videoTimestampOffset_}audioQueueCallback(e){this.audioBuffer&&oo({type:"audio",sourceUpdater:this,action:ao.callback(e),name:"callback"})}videoQueueCallback(e){this.videoBuffer&&oo({type:"video",sourceUpdater:this,action:ao.callback(e),name:"callback"})}dispose(){this.trigger("dispose"),c0e.forEach(e=>{this.abort(e),this.canRemoveSourceBuffer()?this.removeSourceBuffer(e):this[`${e}QueueCallback`](()=>J$(e,this))}),this.videoAppendQueued_=!1,this.delayedAudioAppendQueue_.length=0,this.sourceopenListener_&&this.mediaSource.removeEventListener("sourceopen",this.sourceopenListener_),this.off()}};const JM=r=>decodeURIComponent(escape(String.fromCharCode.apply(null,r))),h0e=r=>{const e=new Uint8Array(r);return Array.from(e).map(t=>t.toString(16).padStart(2,"0")).join("")},ZM=new Uint8Array(`

`.split("").map(r=>r.charCodeAt(0)));let f0e=class extends Error{constructor(){super("Trying to parse received VTT cues, but there is no WebVTT. Make sure vtt.js is loaded.")}},p0e=class extends X2{constructor(e,t={}){super(e,t),this.mediaSource_=null,this.subtitlesTrack_=null,this.featuresNativeTextTracks_=e.featuresNativeTextTracks,this.loadVttJs=e.loadVttJs,this.shouldSaveSegmentTimingInfo_=!1}createTransmuxer_(){return null}buffered_(){if(!this.subtitlesTrack_||!this.subtitlesTrack_.cues||!this.subtitlesTrack_.cues.length)return _s();const e=this.subtitlesTrack_.cues,t=e[0].startTime,n=e[e.length-1].startTime;return _s([[t,n]])}initSegmentForMap(e,t=!1){if(!e)return null;const n=hb(e);let i=this.initSegments_[n];if(t&&!i&&e.bytes){const s=ZM.byteLength+e.bytes.byteLength,a=new Uint8Array(s);a.set(e.bytes),a.set(ZM,e.bytes.byteLength),this.initSegments_[n]=i={resolvedUri:e.resolvedUri,byterange:e.byterange,bytes:a}}return i||e}couldBeginLoading_(){return this.playlist_&&this.subtitlesTrack_&&!this.paused()}init_(){return this.state="READY",this.resetEverything(),this.monitorBuffer_()}track(e){return typeof e>"u"?this.subtitlesTrack_:(this.subtitlesTrack_=e,this.state==="INIT"&&this.couldBeginLoading_()&&this.init_(),this.subtitlesTrack_)}remove(e,t){q0(e,t,this.subtitlesTrack_)}fillBuffer_(){const e=this.chooseNextRequest_();if(e){if(this.syncController_.timestampOffsetForTimeline(e.timeline)===null){const t=()=>{this.state="READY",this.paused()||this.monitorBuffer_()};this.syncController_.one("timestampoffset",t),this.state="WAITING_ON_TIMELINE";return}this.loadSegment_(e)}}timestampOffsetForSegment_(){return null}chooseNextRequest_(){return this.skipEmptySegments_(super.chooseNextRequest_())}skipEmptySegments_(e){for(;e&&e.segment.empty;){if(e.mediaIndex+1>=e.playlist.segments.length){e=null;break}e=this.generateSegmentInfo_({playlist:e.playlist,mediaIndex:e.mediaIndex+1,startOfSegment:e.startOfSegment+e.duration,isSyncRequest:e.isSyncRequest})}return e}stopForError(e){this.error(e),this.state="READY",this.pause(),this.trigger("error")}segmentRequestFinished_(e,t,n){if(!this.subtitlesTrack_){this.state="READY";return}if(this.saveTransferStats_(t.stats),!this.pendingSegment_){this.state="READY",this.mediaRequestsAborted+=1;return}if(e){e.code===wu.TIMEOUT&&this.handleTimeout_(),e.code===wu.ABORTED?this.mediaRequestsAborted+=1:this.mediaRequestsErrored+=1,this.stopForError(e);return}const i=this.pendingSegment_;this.saveBandwidthRelatedStats_(i.duration,t.stats),t.key&&this.segmentKey(t.key,!0),this.state="APPENDING",this.trigger("appending");const s=i.segment;if(s.map&&(s.map.bytes=t.map.bytes),i.bytes=t.bytes,typeof X.WebVTT!="function"&&typeof this.loadVttJs=="function"){this.state="WAITING_ON_VTTJS",this.loadVttJs().then(()=>this.segmentRequestFinished_(e,t,n),()=>this.stopForError({message:"Error loading vtt.js"}));return}s.requested=!0;try{this.parseVTTCues_(i)}catch(a){this.stopForError({message:a.message,metadata:{errorType:Se.Error.StreamingVttParserError,error:a}});return}if(this.updateTimeMapping_(i,this.syncController_.timelines[i.timeline],this.playlist_),i.cues.length?i.timingInfo={start:i.cues[0].startTime,end:i.cues[i.cues.length-1].endTime}:i.timingInfo={start:i.startOfSegment,end:i.startOfSegment+i.duration},i.isSyncRequest){this.trigger("syncinfoupdate"),this.pendingSegment_=null,this.state="READY";return}i.byteLength=i.bytes.byteLength,this.mediaSecondsLoaded+=s.duration,i.cues.forEach(a=>{this.subtitlesTrack_.addCue(this.featuresNativeTextTracks_?new X.VTTCue(a.startTime,a.endTime,a.text):a)}),Xme(this.subtitlesTrack_),this.handleAppendsDone_()}handleData_(){}updateTimingInfoEnd_(){}parseVTTCues_(e){let t,n=!1;if(typeof X.WebVTT!="function")throw new f0e;typeof X.TextDecoder=="function"?t=new X.TextDecoder("utf8"):(t=X.WebVTT.StringDecoder(),n=!0);const i=new X.WebVTT.Parser(X,X.vttjs,t);if(e.cues=[],e.timestampmap={MPEGTS:0,LOCAL:0},i.oncue=e.cues.push.bind(e.cues),i.ontimestampmap=a=>{e.timestampmap=a},i.onparsingerror=a=>{Se.log.warn("Error encountered when parsing cues: "+a.message)},e.segment.map){let a=e.segment.map.bytes;n&&(a=JM(a)),i.parse(a)}let s=e.bytes;n&&(s=JM(s)),i.parse(s),i.flush()}updateTimeMapping_(e,t,n){const i=e.segment;if(!t)return;if(!e.cues.length){i.empty=!0;return}const{MPEGTS:s,LOCAL:a}=e.timestampmap,l=s/Ba.ONE_SECOND_IN_TS-a+t.mapping;if(e.cues.forEach(u=>{const c=u.endTime-u.startTime,h=this.handleRollover_(u.startTime+l,t.time);u.startTime=Math.max(h,0),u.endTime=Math.max(h+c,0)}),!n.syncInfo){const u=e.cues[0].startTime,c=e.cues[e.cues.length-1].startTime;n.syncInfo={mediaSequence:n.mediaSequence+e.mediaIndex,time:Math.min(u,c-i.duration)}}}handleRollover_(e,t){if(t===null)return e;let n=e*Ba.ONE_SECOND_IN_TS;const i=t*Ba.ONE_SECOND_IN_TS;let s;for(i<n?s=-8589934592:s=8589934592;Math.abs(n-i)>4294967296;)n+=s;return n/Ba.ONE_SECOND_IN_TS}};const m0e=function(r,e){const t=r.cues;for(let n=0;n<t.length;n++){const i=t[n];if(e>=i.adStartTime&&e<=i.adEndTime)return i}return null},g0e=function(r,e,t=0){if(!r.segments)return;let n=t,i;for(let s=0;s<r.segments.length;s++){const a=r.segments[s];if(i||(i=m0e(e,n+a.duration/2)),i){if("cueIn"in a){i.endTime=n,i.adEndTime=n,n+=a.duration,i=null;continue}if(n<i.endTime){n+=a.duration;continue}i.endTime+=a.duration}else if("cueOut"in a&&(i=new X.VTTCue(n,n+a.duration,a.cueOut),i.adStartTime=n,i.adEndTime=n+parseFloat(a.cueOut),e.addCue(i)),"cueOutCont"in a){const[o,l]=a.cueOutCont.split("/").map(parseFloat);i=new X.VTTCue(n,n+a.duration,""),i.adStartTime=n-o,i.adEndTime=i.adStartTime+l,e.addCue(i)}n+=a.duration}};class e3{constructor({start:e,end:t,segmentIndex:n,partIndex:i=null,appended:s=!1}){this.start_=e,this.end_=t,this.segmentIndex_=n,this.partIndex_=i,this.appended_=s}isInRange(e){return e>=this.start&&e<this.end}markAppended(){this.appended_=!0}resetAppendedStatus(){this.appended_=!1}get isAppended(){return this.appended_}get start(){return this.start_}get end(){return this.end_}get segmentIndex(){return this.segmentIndex_}get partIndex(){return this.partIndex_}}class v0e{constructor(e,t=[]){this.segmentSyncInfo_=e,this.partsSyncInfo_=t}get segmentSyncInfo(){return this.segmentSyncInfo_}get partsSyncInfo(){return this.partsSyncInfo_}get hasPartsSyncInfo(){return this.partsSyncInfo_.length>0}resetAppendStatus(){this.segmentSyncInfo_.resetAppendedStatus(),this.partsSyncInfo_.forEach(e=>e.resetAppendedStatus())}}class ej{constructor(){this.storage_=new Map,this.diagnostics_="",this.isReliable_=!1,this.start_=-1/0,this.end_=1/0}get start(){return this.start_}get end(){return this.end_}get diagnostics(){return this.diagnostics_}get isReliable(){return this.isReliable_}resetAppendedStatus(){this.storage_.forEach(e=>e.resetAppendStatus())}update(e,t){const{mediaSequence:n,segments:i}=e;if(this.isReliable_=this.isReliablePlaylist_(n,i),!!this.isReliable_)return this.updateStorage_(i,n,this.calculateBaseTime_(n,t))}getSyncInfoForTime(e){for(const{segmentSyncInfo:t,partsSyncInfo:n}of this.storage_.values())if(n.length){for(const i of n)if(i.isInRange(e))return i}else if(t.isInRange(e))return t;return null}getSyncInfoForMediaSequence(e){return this.storage_.get(e)}updateStorage_(e,t,n){const i=new Map;let s=`
`,a=n,o=t;this.start_=a,e.forEach((l,u)=>{const c=this.storage_.get(o),h=a,f=h+l.duration,g=!!(c&&c.segmentSyncInfo&&c.segmentSyncInfo.isAppended),v=new e3({start:h,end:f,appended:g,segmentIndex:u});l.syncInfo=v;let y=a;const _=(l.parts||[]).map((C,E)=>{const D=y,I=y+C.duration,k=!!(c&&c.partsSyncInfo&&c.partsSyncInfo[E]&&c.partsSyncInfo[E].isAppended),P=new e3({start:D,end:I,appended:k,segmentIndex:u,partIndex:E});return y=I,s+=`Media Sequence: ${o}.${E} | Range: ${D} --> ${I} | Appended: ${k}
`,C.syncInfo=P,P});i.set(o,new v0e(v,_)),s+=`${Y$(l.resolvedUri)} | Media Sequence: ${o} | Range: ${h} --> ${f} | Appended: ${g}
`,o++,a=f}),this.end_=a,this.storage_=i,this.diagnostics_=s}calculateBaseTime_(e,t){return this.storage_.size?this.storage_.has(e)?this.storage_.get(e).segmentSyncInfo.start:t:0}isReliablePlaylist_(e,t){return e!=null&&Array.isArray(t)&&t.length}}class t3 extends ej{constructor(e){super(),this.parent_=e}calculateBaseTime_(e,t){if(!this.storage_.size){const n=this.parent_.getSyncInfoForMediaSequence(e);return n?n.segmentSyncInfo.start:0}return super.calculateBaseTime_(e,t)}}const y0e=86400,zC=[{name:"VOD",run:(r,e,t,n,i)=>t!==1/0?{time:0,segmentIndex:0,partIndex:null}:null},{name:"MediaSequence",run:(r,e,t,n,i,s)=>{const a=r.getMediaSequenceSync(s);if(!a||!a.isReliable)return null;const o=a.getSyncInfoForTime(i);return o?{time:o.start,partIndex:o.partIndex,segmentIndex:o.segmentIndex}:null}},{name:"ProgramDateTime",run:(r,e,t,n,i)=>{if(!Object.keys(r.timelineToDatetimeMappings).length)return null;let s=null,a=null;const o=$2(e);i=i||0;for(let l=0;l<o.length;l++){const u=e.endList||i===0?l:o.length-(l+1),c=o[u],h=c.segment,f=r.timelineToDatetimeMappings[h.timeline];if(!f||!h.dateTimeObject)continue;let v=h.dateTimeObject.getTime()/1e3+f;if(h.parts&&typeof c.partIndex=="number")for(let _=0;_<c.partIndex;_++)v+=h.parts[_].duration;const y=Math.abs(i-v);if(a!==null&&(y===0||a<y))break;a=y,s={time:v,segmentIndex:c.segmentIndex,partIndex:c.partIndex}}return s}},{name:"Segment",run:(r,e,t,n,i)=>{let s=null,a=null;i=i||0;const o=$2(e);for(let l=0;l<o.length;l++){const u=e.endList||i===0?l:o.length-(l+1),c=o[u],h=c.segment,f=c.part&&c.part.start||h&&h.start;if(h.timeline===n&&typeof f<"u"){const g=Math.abs(i-f);if(a!==null&&a<g)break;(!s||a===null||a>=g)&&(a=g,s={time:f,segmentIndex:c.segmentIndex,partIndex:c.partIndex})}}return s}},{name:"Discontinuity",run:(r,e,t,n,i)=>{let s=null;if(i=i||0,e.discontinuityStarts&&e.discontinuityStarts.length){let a=null;for(let o=0;o<e.discontinuityStarts.length;o++){const l=e.discontinuityStarts[o],u=e.discontinuitySequence+o+1,c=r.discontinuities[u];if(c){const h=Math.abs(i-c.time);if(a!==null&&a<h)break;(!s||a===null||a>=h)&&(a=h,s={time:c.time,segmentIndex:l,partIndex:null})}}}return s}},{name:"Playlist",run:(r,e,t,n,i)=>e.syncInfo?{time:e.syncInfo.time,segmentIndex:e.syncInfo.mediaSequence-e.mediaSequence,partIndex:null}:null}];let x0e=class extends Se.EventTarget{constructor(e={}){super(),this.timelines=[],this.discontinuities=[],this.timelineToDatetimeMappings={};const t=new ej,n=new t3(t),i=new t3(t);this.mediaSequenceStorage_={main:t,audio:n,vtt:i},this.logger_=cl("SyncController")}getMediaSequenceSync(e){return this.mediaSequenceStorage_[e]||null}getSyncPoint(e,t,n,i,s){if(t!==1/0)return zC.find(({name:l})=>l==="VOD").run(this,e,t);const a=this.runStrategies_(e,t,n,i,s);if(!a.length)return null;for(const o of a){const{syncPoint:l,strategy:u}=o,{segmentIndex:c,time:h}=l;if(c<0)continue;const f=e.segments[c],g=h,v=g+f.duration;if(this.logger_(`Strategy: ${u}. Current time: ${i}. selected segment: ${c}. Time: [${g} -> ${v}]}`),i>=g&&i<v)return this.logger_("Found sync point with exact match: ",l),l}return this.selectSyncPoint_(a,{key:"time",value:i})}getExpiredTime(e,t){if(!e||!e.segments)return null;const n=this.runStrategies_(e,t,e.discontinuitySequence,0);if(!n.length)return null;const i=this.selectSyncPoint_(n,{key:"segmentIndex",value:0});return i.segmentIndex>0&&(i.time*=-1),Math.abs(i.time+cg({defaultDuration:e.targetDuration,durationList:e.segments,startIndex:i.segmentIndex,endIndex:0}))}runStrategies_(e,t,n,i,s){const a=[];for(let o=0;o<zC.length;o++){const l=zC[o],u=l.run(this,e,t,n,i,s);u&&(u.strategy=l.name,a.push({strategy:l.name,syncPoint:u}))}return a}selectSyncPoint_(e,t){let n=e[0].syncPoint,i=Math.abs(e[0].syncPoint[t.key]-t.value),s=e[0].strategy;for(let a=1;a<e.length;a++){const o=Math.abs(e[a].syncPoint[t.key]-t.value);o<i&&(i=o,n=e[a].syncPoint,s=e[a].strategy)}return this.logger_(`syncPoint for [${t.key}: ${t.value}] chosen with strategy [${s}]: [time:${n.time}, segmentIndex:${n.segmentIndex}`+(typeof n.partIndex=="number"?`,partIndex:${n.partIndex}`:"")+"]"),n}saveExpiredSegmentInfo(e,t){const n=t.mediaSequence-e.mediaSequence;if(n>y0e){Se.log.warn(`Not saving expired segment info. Media sequence gap ${n} is too large.`);return}for(let i=n-1;i>=0;i--){const s=e.segments[i];if(s&&typeof s.start<"u"){t.syncInfo={mediaSequence:e.mediaSequence+i,time:s.start},this.logger_(`playlist refresh sync: [time:${t.syncInfo.time}, mediaSequence: ${t.syncInfo.mediaSequence}]`),this.trigger("syncinfoupdate");break}}}setDateTimeMappingForStart(e){if(this.timelineToDatetimeMappings={},e.segments&&e.segments.length&&e.segments[0].dateTimeObject){const t=e.segments[0],n=t.dateTimeObject.getTime()/1e3;this.timelineToDatetimeMappings[t.timeline]=-n}}saveSegmentTimingInfo({segmentInfo:e,shouldSaveTimelineMapping:t}){const n=this.calculateSegmentTimeMapping_(e,e.timingInfo,t),i=e.segment;n&&(this.saveDiscontinuitySyncInfo_(e),e.playlist.syncInfo||(e.playlist.syncInfo={mediaSequence:e.playlist.mediaSequence+e.mediaIndex,time:i.start}));const s=i.dateTimeObject;i.discontinuity&&t&&s&&(this.timelineToDatetimeMappings[i.timeline]=-(s.getTime()/1e3))}timestampOffsetForTimeline(e){return typeof this.timelines[e]>"u"?null:this.timelines[e].time}mappingForTimeline(e){return typeof this.timelines[e]>"u"?null:this.timelines[e].mapping}calculateSegmentTimeMapping_(e,t,n){const i=e.segment,s=e.part;let a=this.timelines[e.timeline],o,l;if(typeof e.timestampOffset=="number")a={time:e.startOfSegment,mapping:e.startOfSegment-t.start},n&&(this.timelines[e.timeline]=a,this.trigger("timestampoffset"),this.logger_(`time mapping for timeline ${e.timeline}: [time: ${a.time}] [mapping: ${a.mapping}]`)),o=e.startOfSegment,l=t.end+a.mapping;else if(a)o=t.start+a.mapping,l=t.end+a.mapping;else return!1;return s&&(s.start=o,s.end=l),(!i.start||o<i.start)&&(i.start=o),i.end=l,!0}saveDiscontinuitySyncInfo_(e){const t=e.playlist,n=e.segment;if(n.discontinuity)this.discontinuities[n.timeline]={time:n.start,accuracy:0};else if(t.discontinuityStarts&&t.discontinuityStarts.length)for(let i=0;i<t.discontinuityStarts.length;i++){const s=t.discontinuityStarts[i],a=t.discontinuitySequence+i+1,o=s-e.mediaIndex,l=Math.abs(o);if(!this.discontinuities[a]||this.discontinuities[a].accuracy>l){let u;o<0?u=n.start-cg({defaultDuration:t.targetDuration,durationList:t.segments,startIndex:e.mediaIndex,endIndex:s}):u=n.end+cg({defaultDuration:t.targetDuration,durationList:t.segments,startIndex:e.mediaIndex+1,endIndex:s}),this.discontinuities[a]={time:u,accuracy:l}}}}dispose(){this.trigger("dispose"),this.off()}},_0e=class extends Se.EventTarget{constructor(){super(),this.pendingTimelineChanges_={},this.lastTimelineChanges_={}}clearPendingTimelineChange(e){this.pendingTimelineChanges_[e]=null,this.trigger("pendingtimelinechange")}pendingTimelineChange({type:e,from:t,to:n}){return typeof t=="number"&&typeof n=="number"&&(this.pendingTimelineChanges_[e]={type:e,from:t,to:n},this.trigger("pendingtimelinechange")),this.pendingTimelineChanges_[e]}lastTimelineChange({type:e,from:t,to:n}){if(typeof t=="number"&&typeof n=="number"){this.lastTimelineChanges_[e]={type:e,from:t,to:n},delete this.pendingTimelineChanges_[e];const i={timelineChangeInfo:{from:t,to:n}};this.trigger({type:"timelinechange",metadata:i})}return this.lastTimelineChanges_[e]}dispose(){this.trigger("dispose"),this.pendingTimelineChanges_={},this.lastTimelineChanges_={},this.off()}};const b0e=U$($$(function(){var r=(function(){function y(){this.listeners={}}var _=y.prototype;return _.on=function(E,D){this.listeners[E]||(this.listeners[E]=[]),this.listeners[E].push(D)},_.off=function(E,D){if(!this.listeners[E])return!1;var I=this.listeners[E].indexOf(D);return this.listeners[E]=this.listeners[E].slice(0),this.listeners[E].splice(I,1),I>-1},_.trigger=function(E){var D=this.listeners[E];if(D)if(arguments.length===2)for(var I=D.length,k=0;k<I;++k)D[k].call(this,arguments[1]);else for(var P=Array.prototype.slice.call(arguments,1),N=D.length,U=0;U<N;++U)D[U].apply(this,P)},_.dispose=function(){this.listeners={}},_.pipe=function(E){this.on("data",function(D){E.push(D)})},y})();/*! @name pkcs7 @version 1.0.4 @license Apache-2.0 */function e(y){return y.subarray(0,y.byteLength-y[y.byteLength-1])}/*! @name aes-decrypter @version 4.0.2 @license Apache-2.0 */const t=function(){const y=[[[],[],[],[],[]],[[],[],[],[],[]]],_=y[0],C=y[1],E=_[4],D=C[4];let I,k,P;const N=[],U=[];let B,A,$,W,V,Q;for(I=0;I<256;I++)U[(N[I]=I<<1^(I>>7)*283)^I]=I;for(k=P=0;!E[k];k^=B||1,P=U[P]||1)for(W=P^P<<1^P<<2^P<<3^P<<4,W=W>>8^W&255^99,E[k]=W,D[W]=k,$=N[A=N[B=N[k]]],Q=$*16843009^A*65537^B*257^k*16843008,V=N[W]*257^W*16843008,I=0;I<4;I++)_[I][k]=V=V<<24^V>>>8,C[I][W]=Q=Q<<24^Q>>>8;for(I=0;I<5;I++)_[I]=_[I].slice(0),C[I]=C[I].slice(0);return y};let n=null;class i{constructor(_){n||(n=t()),this._tables=[[n[0][0].slice(),n[0][1].slice(),n[0][2].slice(),n[0][3].slice(),n[0][4].slice()],[n[1][0].slice(),n[1][1].slice(),n[1][2].slice(),n[1][3].slice(),n[1][4].slice()]];let C,E,D;const I=this._tables[0][4],k=this._tables[1],P=_.length;let N=1;if(P!==4&&P!==6&&P!==8)throw new Error("Invalid aes key size");const U=_.slice(0),B=[];for(this._key=[U,B],C=P;C<4*P+28;C++)D=U[C-1],(C%P===0||P===8&&C%P===4)&&(D=I[D>>>24]<<24^I[D>>16&255]<<16^I[D>>8&255]<<8^I[D&255],C%P===0&&(D=D<<8^D>>>24^N<<24,N=N<<1^(N>>7)*283)),U[C]=U[C-P]^D;for(E=0;C;E++,C--)D=U[E&3?C:C-4],C<=4||E<4?B[E]=D:B[E]=k[0][I[D>>>24]]^k[1][I[D>>16&255]]^k[2][I[D>>8&255]]^k[3][I[D&255]]}decrypt(_,C,E,D,I,k){const P=this._key[1];let N=_^P[0],U=D^P[1],B=E^P[2],A=C^P[3],$,W,V;const Q=P.length/4-2;let ie,ne=4;const ue=this._tables[1],se=ue[0],ae=ue[1],ce=ue[2],ee=ue[3],pe=ue[4];for(ie=0;ie<Q;ie++)$=se[N>>>24]^ae[U>>16&255]^ce[B>>8&255]^ee[A&255]^P[ne],W=se[U>>>24]^ae[B>>16&255]^ce[A>>8&255]^ee[N&255]^P[ne+1],V=se[B>>>24]^ae[A>>16&255]^ce[N>>8&255]^ee[U&255]^P[ne+2],A=se[A>>>24]^ae[N>>16&255]^ce[U>>8&255]^ee[B&255]^P[ne+3],ne+=4,N=$,U=W,B=V;for(ie=0;ie<4;ie++)I[(3&-ie)+k]=pe[N>>>24]<<24^pe[U>>16&255]<<16^pe[B>>8&255]<<8^pe[A&255]^P[ne++],$=N,N=U,U=B,B=A,A=$}}class s extends r{constructor(){super(r),this.jobs=[],this.delay=1,this.timeout_=null}processJob_(){this.jobs.shift()(),this.jobs.length?this.timeout_=setTimeout(this.processJob_.bind(this),this.delay):this.timeout_=null}push(_){this.jobs.push(_),this.timeout_||(this.timeout_=setTimeout(this.processJob_.bind(this),this.delay))}}const a=function(y){return y<<24|(y&65280)<<8|(y&16711680)>>8|y>>>24},o=function(y,_,C){const E=new Int32Array(y.buffer,y.byteOffset,y.byteLength>>2),D=new i(Array.prototype.slice.call(_)),I=new Uint8Array(y.byteLength),k=new Int32Array(I.buffer);let P,N,U,B,A,$,W,V,Q;for(P=C[0],N=C[1],U=C[2],B=C[3],Q=0;Q<E.length;Q+=4)A=a(E[Q]),$=a(E[Q+1]),W=a(E[Q+2]),V=a(E[Q+3]),D.decrypt(A,$,W,V,k,Q),k[Q]=a(k[Q]^P),k[Q+1]=a(k[Q+1]^N),k[Q+2]=a(k[Q+2]^U),k[Q+3]=a(k[Q+3]^B),P=A,N=$,U=W,B=V;return I};class l{constructor(_,C,E,D){const I=l.STEP,k=new Int32Array(_.buffer),P=new Uint8Array(_.byteLength);let N=0;for(this.asyncStream_=new s,this.asyncStream_.push(this.decryptChunk_(k.subarray(N,N+I),C,E,P)),N=I;N<k.length;N+=I)E=new Uint32Array([a(k[N-4]),a(k[N-3]),a(k[N-2]),a(k[N-1])]),this.asyncStream_.push(this.decryptChunk_(k.subarray(N,N+I),C,E,P));this.asyncStream_.push(function(){D(null,e(P))})}static get STEP(){return 32e3}decryptChunk_(_,C,E,D){return function(){const I=o(_,C,E);D.set(I,_.byteOffset)}}}var u=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},c;typeof window<"u"?c=window:typeof u<"u"?c=u:typeof self<"u"?c=self:c={};var h=c,f=function(_){return ArrayBuffer.isView==="function"?ArrayBuffer.isView(_):_&&_.buffer instanceof ArrayBuffer},g=h.BigInt||Number;g("0x1"),g("0x100"),g("0x10000"),g("0x1000000"),g("0x100000000"),g("0x10000000000"),g("0x1000000000000"),g("0x100000000000000"),g("0x10000000000000000"),(function(){var y=new Uint16Array([65484]),_=new Uint8Array(y.buffer,y.byteOffset,y.byteLength);return _[0]===255?"big":_[0]===204?"little":"unknown"})();const v=function(y){const _={};return Object.keys(y).forEach(C=>{const E=y[C];f(E)?_[C]={bytes:E.buffer,byteOffset:E.byteOffset,byteLength:E.byteLength}:_[C]=E}),_};self.onmessage=function(y){const _=y.data,C=new Uint8Array(_.encrypted.bytes,_.encrypted.byteOffset,_.encrypted.byteLength),E=new Uint32Array(_.key.bytes,_.key.byteOffset,_.key.byteLength/4),D=new Uint32Array(_.iv.bytes,_.iv.byteOffset,_.iv.byteLength/4);new l(C,E,D,function(I,k){self.postMessage(v({source:_.source,decrypted:k}),[k.buffer])})}}));var S0e=N$(b0e);const T0e=r=>{let e=r.default?"main":"alternative";return r.characteristics&&r.characteristics.indexOf("public.accessibility.describes-video")>=0&&(e="main-desc"),e},tj=(r,e)=>{r.abort(),r.pause(),e&&e.activePlaylistLoader&&(e.activePlaylistLoader.pause(),e.activePlaylistLoader=null)},Q2=(r,e)=>{e.activePlaylistLoader=r,r.load()},C0e=(r,e)=>()=>{const{segmentLoaders:{[r]:t,main:n},mediaTypes:{[r]:i}}=e,s=i.activeTrack(),a=i.getActiveGroup(),o=i.activePlaylistLoader,l=i.lastGroup_;if(!(a&&l&&a.id===l.id)&&(i.lastGroup_=a,i.lastTrack_=s,tj(t,i),!(!a||a.isMainPlaylist))){if(!a.playlistLoader){o&&n.resetEverything();return}t.resyncLoader(),Q2(a.playlistLoader,i)}},w0e=(r,e)=>()=>{const{segmentLoaders:{[r]:t},mediaTypes:{[r]:n}}=e;n.lastGroup_=null,t.abort(),t.pause()},E0e=(r,e)=>()=>{const{mainPlaylistLoader:t,segmentLoaders:{[r]:n,main:i},mediaTypes:{[r]:s}}=e,a=s.activeTrack(),o=s.getActiveGroup(),l=s.activePlaylistLoader,u=s.lastTrack_;if(!(u&&a&&u.id===a.id)&&(s.lastGroup_=o,s.lastTrack_=a,tj(n,s),!!o)){if(o.isMainPlaylist){if(!a||!u||a.id===u.id)return;const c=e.vhs.playlistController_,h=c.selectPlaylist();if(c.media()===h)return;s.logger_(`track change. Switching main audio from ${u.id} to ${a.id}`),t.pause(),i.resetEverything(),c.fastQualityChange_(h);return}if(r==="AUDIO"){if(!o.playlistLoader){i.setAudio(!0),i.resetEverything();return}n.setAudio(!0),i.setAudio(!1)}if(l===o.playlistLoader){Q2(o.playlistLoader,s);return}n.track&&n.track(a),n.resetEverything(),Q2(o.playlistLoader,s)}},mb={AUDIO:(r,e)=>()=>{const{mediaTypes:{[r]:t},excludePlaylist:n}=e,i=t.activeTrack(),s=t.activeGroup(),a=(s.filter(l=>l.default)[0]||s[0]).id,o=t.tracks[a];if(i===o){n({error:{message:"Problem encountered loading the default audio track."}});return}Se.log.warn("Problem encountered loading the alternate audio track.Switching back to default.");for(const l in t.tracks)t.tracks[l].enabled=t.tracks[l]===o;t.onTrackChanged()},SUBTITLES:(r,e)=>()=>{const{mediaTypes:{[r]:t}}=e;Se.log.warn("Problem encountered loading the subtitle track.Disabling subtitle track.");const n=t.activeTrack();n&&(n.mode="disabled"),t.onTrackChanged()}},r3={AUDIO:(r,e,t)=>{if(!e)return;const{tech:n,requestOptions:i,segmentLoaders:{[r]:s}}=t;e.on("loadedmetadata",()=>{const a=e.media();s.playlist(a,i),(!n.paused()||a.endList&&n.preload()!=="none")&&s.load()}),e.on("loadedplaylist",()=>{s.playlist(e.media(),i),n.paused()||s.load()}),e.on("error",mb[r](r,t))},SUBTITLES:(r,e,t)=>{const{tech:n,requestOptions:i,segmentLoaders:{[r]:s},mediaTypes:{[r]:a}}=t;e.on("loadedmetadata",()=>{const o=e.media();s.playlist(o,i),s.track(a.activeTrack()),(!n.paused()||o.endList&&n.preload()!=="none")&&s.load()}),e.on("loadedplaylist",()=>{s.playlist(e.media(),i),n.paused()||s.load()}),e.on("error",mb[r](r,t))}},k0e={AUDIO:(r,e)=>{const{vhs:t,sourceType:n,segmentLoaders:{[r]:i},requestOptions:s,main:{mediaGroups:a},mediaTypes:{[r]:{groups:o,tracks:l,logger_:u}},mainPlaylistLoader:c}=e,h=Sv(c.main);(!a[r]||Object.keys(a[r]).length===0)&&(a[r]={main:{default:{default:!0}}},h&&(a[r].main.default.playlists=c.main.playlists));for(const f in a[r]){o[f]||(o[f]=[]);for(const g in a[r][f]){let v=a[r][f][g],y;if(h?(u(`AUDIO group '${f}' label '${g}' is a main playlist`),v.isMainPlaylist=!0,y=null):n==="vhs-json"&&v.playlists?y=new mp(v.playlists[0],t,s):v.resolvedUri?y=new mp(v.resolvedUri,t,s):v.playlists&&n==="dash"?y=new q2(v.playlists[0],t,s,c):y=null,v=Dn({id:g,playlistLoader:y},v),r3[r](r,v.playlistLoader,e),o[f].push(v),typeof l[g]>"u"){const _=new Se.AudioTrack({id:g,kind:T0e(v),enabled:!1,language:v.language,default:v.default,label:g});l[g]=_}}}i.on("error",mb[r](r,e))},SUBTITLES:(r,e)=>{const{tech:t,vhs:n,sourceType:i,segmentLoaders:{[r]:s},requestOptions:a,main:{mediaGroups:o},mediaTypes:{[r]:{groups:l,tracks:u}},mainPlaylistLoader:c}=e;for(const h in o[r]){l[h]||(l[h]=[]);for(const f in o[r][h]){if(!n.options_.useForcedSubtitles&&o[r][h][f].forced)continue;let g=o[r][h][f],v;if(i==="hls")v=new mp(g.resolvedUri,n,a);else if(i==="dash"){if(!g.playlists.filter(_=>_.excludeUntil!==1/0).length)return;v=new q2(g.playlists[0],n,a,c)}else i==="vhs-json"&&(v=new mp(g.playlists?g.playlists[0]:g.resolvedUri,n,a));if(g=Dn({id:f,playlistLoader:v},g),r3[r](r,g.playlistLoader,e),l[h].push(g),typeof u[f]>"u"){const y=t.addRemoteTextTrack({id:f,kind:"subtitles",default:g.default&&g.autoselect,language:g.language,label:f},!1).track;u[f]=y}}}s.on("error",mb[r](r,e))},"CLOSED-CAPTIONS":(r,e)=>{const{tech:t,main:{mediaGroups:n},mediaTypes:{[r]:{groups:i,tracks:s}}}=e;for(const a in n[r]){i[a]||(i[a]=[]);for(const o in n[r][a]){const l=n[r][a][o];if(!/^(?:CC|SERVICE)/.test(l.instreamId))continue;const u=t.options_.vhs&&t.options_.vhs.captionServices||{};let c={label:o,language:l.language,instreamId:l.instreamId,default:l.default&&l.autoselect};if(u[c.instreamId]&&(c=Dn(c,u[c.instreamId])),c.default===void 0&&delete c.default,i[a].push(Dn({id:o},l)),typeof s[o]>"u"){const h=t.addRemoteTextTrack({id:c.instreamId,kind:"captions",default:c.default,language:c.language,label:c.label},!1).track;s[o]=h}}}}},rj=(r,e)=>{for(let t=0;t<r.length;t++)if(EA(e,r[t])||r[t].playlists&&rj(r[t].playlists,e))return!0;return!1},A0e=(r,e)=>t=>{const{mainPlaylistLoader:n,mediaTypes:{[r]:{groups:i}}}=e,s=n.media();if(!s)return null;let a=null;s.attributes[r]&&(a=i[s.attributes[r]]);const o=Object.keys(i);if(!a)if(r==="AUDIO"&&o.length>1&&Sv(e.main))for(let l=0;l<o.length;l++){const u=i[o[l]];if(rj(u,s)){a=u;break}}else i.main?a=i.main:o.length===1&&(a=i[o[0]]);return typeof t>"u"?a:t===null||!a?null:a.filter(l=>l.id===t.id)[0]||null},D0e={AUDIO:(r,e)=>()=>{const{mediaTypes:{[r]:{tracks:t}}}=e;for(const n in t)if(t[n].enabled)return t[n];return null},SUBTITLES:(r,e)=>()=>{const{mediaTypes:{[r]:{tracks:t}}}=e;for(const n in t)if(t[n].mode==="showing"||t[n].mode==="hidden")return t[n];return null}},I0e=(r,{mediaTypes:e})=>()=>{const t=e[r].activeTrack();return t?e[r].activeGroup(t):null},P0e=r=>{["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(u=>{k0e[u](u,r)});const{mediaTypes:e,mainPlaylistLoader:t,tech:n,vhs:i,segmentLoaders:{["AUDIO"]:s,main:a}}=r;["AUDIO","SUBTITLES"].forEach(u=>{e[u].activeGroup=A0e(u,r),e[u].activeTrack=D0e[u](u,r),e[u].onGroupChanged=C0e(u,r),e[u].onGroupChanging=w0e(u,r),e[u].onTrackChanged=E0e(u,r),e[u].getActiveGroup=I0e(u,r)});const o=e.AUDIO.activeGroup();if(o){const u=(o.filter(h=>h.default)[0]||o[0]).id;e.AUDIO.tracks[u].enabled=!0,e.AUDIO.onGroupChanged(),e.AUDIO.onTrackChanged(),e.AUDIO.getActiveGroup().playlistLoader?(a.setAudio(!1),s.setAudio(!0)):a.setAudio(!0)}t.on("mediachange",()=>{["AUDIO","SUBTITLES"].forEach(u=>e[u].onGroupChanged())}),t.on("mediachanging",()=>{["AUDIO","SUBTITLES"].forEach(u=>e[u].onGroupChanging())});const l=()=>{e.AUDIO.onTrackChanged(),n.trigger({type:"usage",name:"vhs-audio-change"})};n.audioTracks().addEventListener("change",l),n.remoteTextTracks().addEventListener("change",e.SUBTITLES.onTrackChanged),i.on("dispose",()=>{n.audioTracks().removeEventListener("change",l),n.remoteTextTracks().removeEventListener("change",e.SUBTITLES.onTrackChanged)}),n.clearTracks("audio");for(const u in e.AUDIO.tracks)n.audioTracks().addTrack(e.AUDIO.tracks[u])},R0e=()=>{const r={};return["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(e=>{r[e]={groups:{},tracks:{},activePlaylistLoader:null,activeGroup:kc,activeTrack:kc,getActiveGroup:kc,onGroupChanged:kc,onTrackChanged:kc,lastTrack_:null,logger_:cl(`MediaGroups[${e}]`)}}),r};class n3{constructor(){this.priority_=[],this.pathwayClones_=new Map}set version(e){e===1&&(this.version_=e)}set ttl(e){this.ttl_=e||300}set reloadUri(e){e&&(this.reloadUri_=La(this.reloadUri_,e))}set priority(e){e&&e.length&&(this.priority_=e)}set pathwayClones(e){e&&e.length&&(this.pathwayClones_=new Map(e.map(t=>[t.ID,t])))}get version(){return this.version_}get ttl(){return this.ttl_}get reloadUri(){return this.reloadUri_}get priority(){return this.priority_}get pathwayClones(){return this.pathwayClones_}}class L0e extends Se.EventTarget{constructor(e,t){super(),this.currentPathway=null,this.defaultPathway=null,this.queryBeforeStart=!1,this.availablePathways_=new Set,this.steeringManifest=new n3,this.proxyServerUrl_=null,this.manifestType_=null,this.ttlTimeout_=null,this.request_=null,this.currentPathwayClones=new Map,this.nextPathwayClones=new Map,this.excludedSteeringManifestURLs=new Set,this.logger_=cl("Content Steering"),this.xhr_=e,this.getBandwidth_=t}assignTagProperties(e,t){this.manifestType_=t.serverUri?"HLS":"DASH";const n=t.serverUri||t.serverURL;if(!n){this.logger_(`steering manifest URL is ${n}, cannot request steering manifest.`),this.trigger("error");return}if(n.startsWith("data:")){this.decodeDataUriManifest_(n.substring(n.indexOf(",")+1));return}this.steeringManifest.reloadUri=La(e,n),this.defaultPathway=t.pathwayId||t.defaultServiceLocation,this.queryBeforeStart=t.queryBeforeStart,this.proxyServerUrl_=t.proxyServerURL,this.defaultPathway&&!this.queryBeforeStart&&this.trigger("content-steering")}requestSteeringManifest(e){const t=this.steeringManifest.reloadUri;if(!t)return;const n=e?t:this.getRequestURI(t);if(!n){this.logger_("No valid content steering manifest URIs. Stopping content steering."),this.trigger("error"),this.dispose();return}const i={contentSteeringInfo:{uri:n}};this.trigger({type:"contentsteeringloadstart",metadata:i}),this.request_=this.xhr_({uri:n,requestType:"content-steering-manifest"},(s,a)=>{if(s){if(a.status===410){this.logger_(`manifest request 410 ${s}.`),this.logger_(`There will be no more content steering requests to ${n} this session.`),this.excludedSteeringManifestURLs.add(n);return}if(a.status===429){const u=a.responseHeaders["retry-after"];this.logger_(`manifest request 429 ${s}.`),this.logger_(`content steering will retry in ${u} seconds.`),this.startTTLTimeout_(parseInt(u,10));return}this.logger_(`manifest failed to load ${s}.`),this.startTTLTimeout_();return}this.trigger({type:"contentsteeringloadcomplete",metadata:i});let o;try{o=JSON.parse(this.request_.responseText)}catch(u){const c={errorType:Se.Error.StreamingContentSteeringParserError,error:u};this.trigger({type:"error",metadata:c})}this.assignSteeringProperties_(o);const l={contentSteeringInfo:i.contentSteeringInfo,contentSteeringManifest:{version:this.steeringManifest.version,reloadUri:this.steeringManifest.reloadUri,priority:this.steeringManifest.priority}};this.trigger({type:"contentsteeringparsed",metadata:l}),this.startTTLTimeout_()})}setProxyServerUrl_(e){const t=new X.URL(e),n=new X.URL(this.proxyServerUrl_);return n.searchParams.set("url",encodeURI(t.toString())),this.setSteeringParams_(n.toString())}decodeDataUriManifest_(e){const t=JSON.parse(X.atob(e));this.assignSteeringProperties_(t)}setSteeringParams_(e){const t=new X.URL(e),n=this.getPathway(),i=this.getBandwidth_();if(n){const s=`_${this.manifestType_}_pathway`;t.searchParams.set(s,n)}if(i){const s=`_${this.manifestType_}_throughput`;t.searchParams.set(s,i)}return t.toString()}assignSteeringProperties_(e){if(this.steeringManifest.version=e.VERSION,!this.steeringManifest.version){this.logger_(`manifest version is ${e.VERSION}, which is not supported.`),this.trigger("error");return}this.steeringManifest.ttl=e.TTL,this.steeringManifest.reloadUri=e["RELOAD-URI"],this.steeringManifest.priority=e["PATHWAY-PRIORITY"]||e["SERVICE-LOCATION-PRIORITY"],this.steeringManifest.pathwayClones=e["PATHWAY-CLONES"],this.nextPathwayClones=this.steeringManifest.pathwayClones,this.availablePathways_.size||(this.logger_("There are no available pathways for content steering. Ending content steering."),this.trigger("error"),this.dispose());const n=(i=>{for(const s of i)if(this.availablePathways_.has(s))return s;return[...this.availablePathways_][0]})(this.steeringManifest.priority);this.currentPathway!==n&&(this.currentPathway=n,this.trigger("content-steering"))}getPathway(){return this.currentPathway||this.defaultPathway}getRequestURI(e){if(!e)return null;const t=i=>this.excludedSteeringManifestURLs.has(i);if(this.proxyServerUrl_){const i=this.setProxyServerUrl_(e);if(!t(i))return i}const n=this.setSteeringParams_(e);return t(n)?null:n}startTTLTimeout_(e=this.steeringManifest.ttl){const t=e*1e3;this.ttlTimeout_=X.setTimeout(()=>{this.requestSteeringManifest()},t)}clearTTLTimeout_(){X.clearTimeout(this.ttlTimeout_),this.ttlTimeout_=null}abort(){this.request_&&this.request_.abort(),this.request_=null}dispose(){this.off("content-steering"),this.off("error"),this.abort(),this.clearTTLTimeout_(),this.currentPathway=null,this.defaultPathway=null,this.queryBeforeStart=null,this.proxyServerUrl_=null,this.manifestType_=null,this.ttlTimeout_=null,this.request_=null,this.excludedSteeringManifestURLs=new Set,this.availablePathways_=new Set,this.steeringManifest=new n3}addAvailablePathway(e){e&&this.availablePathways_.add(e)}clearAvailablePathways(){this.availablePathways_.clear()}excludePathway(e){return this.availablePathways_.delete(e)}didDASHTagChange(e,t){return!t&&this.steeringManifest.reloadUri||t&&(La(e,t.serverURL)!==this.steeringManifest.reloadUri||t.defaultServiceLocation!==this.defaultPathway||t.queryBeforeStart!==this.queryBeforeStart||t.proxyServerURL!==this.proxyServerUrl_)}getAvailablePathways(){return this.availablePathways_}}const O0e=10;let bc;const M0e=["mediaRequests","mediaRequestsAborted","mediaRequestsTimedout","mediaRequestsErrored","mediaTransferDuration","mediaBytesTransferred","mediaAppends"],F0e=function(r){return this.audioSegmentLoader_[r]+this.mainSegmentLoader_[r]},B0e=function({currentPlaylist:r,buffered:e,currentTime:t,nextPlaylist:n,bufferLowWaterLine:i,bufferHighWaterLine:s,duration:a,bufferBasedABR:o,log:l}){if(!n)return Se.log.warn("We received no playlist to switch to. Please check your stream."),!1;const u=`allowing switch ${r&&r.id||"null"} -> ${n.id}`;if(!r)return l(`${u} as current playlist is not set`),!0;if(n.id===r.id)return!1;const c=!!pp(e,t).length;if(!r.endList)return!c&&typeof r.partTargetDuration=="number"?(l(`not ${u} as current playlist is live llhls, but currentTime isn't in buffered.`),!1):(l(`${u} as current playlist is live`),!0);const h=TA(e,t),f=o?Zi.EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE:Zi.MAX_BUFFER_LOW_WATER_LINE;if(a<f)return l(`${u} as duration < max low water line (${a} < ${f})`),!0;const g=n.attributes.BANDWIDTH,v=r.attributes.BANDWIDTH;if(g<v&&(!o||h<s)){let y=`${u} as next bandwidth < current bandwidth (${g} < ${v})`;return o&&(y+=` and forwardBuffer < bufferHighWaterLine (${h} < ${s})`),l(y),!0}if((!o||g>v)&&h>=i){let y=`${u} as forwardBuffer >= bufferLowWaterLine (${h} >= ${i})`;return o&&(y+=` and next bandwidth > current bandwidth (${g} > ${v})`),l(y),!0}return l(`not ${u} as no switching criteria met`),!1};class N0e extends Se.EventTarget{constructor(e){super();const{src:t,withCredentials:n,tech:i,bandwidth:s,externVhs:a,useCueTags:o,playlistExclusionDuration:l,enableLowInitialPlaylist:u,sourceType:c,cacheEncryptionKeys:h,bufferBasedABR:f,leastPixelDiffSelector:g,captionServices:v,experimentalUseMMS:y}=e;if(!t)throw new Error("A non-empty playlist URL or JSON manifest string is required");let{maxPlaylistRetries:_}=e;(_===null||typeof _>"u")&&(_=1/0),bc=a,this.bufferBasedABR=!!f,this.leastPixelDiffSelector=!!g,this.withCredentials=n,this.tech_=i,this.vhs_=i.vhs,this.player_=e.player_,this.sourceType_=c,this.useCueTags_=o,this.playlistExclusionDuration=l,this.maxPlaylistRetries=_,this.enableLowInitialPlaylist=u,this.useCueTags_&&(this.cueTagsTrack_=this.tech_.addTextTrack("metadata","ad-cues"),this.cueTagsTrack_.inBandMetadataTrackDispatchType=""),this.requestOptions_={withCredentials:n,maxPlaylistRetries:_,timeout:null},this.on("error",this.pauseLoading),this.mediaTypes_=R0e(),y&&X.ManagedMediaSource?(this.tech_.el_.disableRemotePlayback=!0,this.mediaSource=new X.ManagedMediaSource,Se.log("Using ManagedMediaSource")):X.MediaSource&&(this.mediaSource=new X.MediaSource),this.handleDurationChange_=this.handleDurationChange_.bind(this),this.handleSourceOpen_=this.handleSourceOpen_.bind(this),this.handleSourceEnded_=this.handleSourceEnded_.bind(this),this.load=this.load.bind(this),this.pause=this.pause.bind(this),this.mediaSource.addEventListener("durationchange",this.handleDurationChange_),this.mediaSource.addEventListener("sourceopen",this.handleSourceOpen_),this.mediaSource.addEventListener("sourceended",this.handleSourceEnded_),this.mediaSource.addEventListener("startstreaming",this.load),this.mediaSource.addEventListener("endstreaming",this.pause),this.seekable_=_s(),this.hasPlayed_=!1,this.syncController_=new x0e(e),this.segmentMetadataTrack_=i.addRemoteTextTrack({kind:"metadata",label:"segment-metadata"},!1).track,this.decrypter_=new S0e,this.sourceUpdater_=new Z$(this.mediaSource),this.inbandTextTracks_={},this.timelineChangeController_=new _0e,this.keyStatusMap_=new Map;const C={vhs:this.vhs_,parse708captions:e.parse708captions,useDtsForTimestampOffset:e.useDtsForTimestampOffset,captionServices:v,mediaSource:this.mediaSource,currentTime:this.tech_.currentTime.bind(this.tech_),seekable:()=>this.seekable(),seeking:()=>this.tech_.seeking(),duration:()=>this.duration(),hasPlayed:()=>this.hasPlayed_,goalBufferLength:()=>this.goalBufferLength(),bandwidth:s,syncController:this.syncController_,decrypter:this.decrypter_,sourceType:this.sourceType_,inbandTextTracks:this.inbandTextTracks_,cacheEncryptionKeys:h,sourceUpdater:this.sourceUpdater_,timelineChangeController:this.timelineChangeController_,exactManifestTimings:e.exactManifestTimings,addMetadataToTextTrack:this.addMetadataToTextTrack.bind(this)};this.mainPlaylistLoader_=this.sourceType_==="dash"?new q2(t,this.vhs_,Dn(this.requestOptions_,{addMetadataToTextTrack:this.addMetadataToTextTrack.bind(this)})):new mp(t,this.vhs_,Dn(this.requestOptions_,{addDateRangesToTextTrack:this.addDateRangesToTextTrack_.bind(this)})),this.setupMainPlaylistLoaderListeners_(),this.mainSegmentLoader_=new X2(Dn(C,{segmentMetadataTrack:this.segmentMetadataTrack_,loaderType:"main"}),e),this.audioSegmentLoader_=new X2(Dn(C,{loaderType:"audio"}),e),this.subtitleSegmentLoader_=new p0e(Dn(C,{loaderType:"vtt",featuresNativeTextTracks:this.tech_.featuresNativeTextTracks,loadVttJs:()=>new Promise((I,k)=>{function P(){i.off("vttjserror",N),I()}function N(){i.off("vttjsloaded",P),k()}i.one("vttjsloaded",P),i.one("vttjserror",N),i.addWebVttScript_()})}),e);const E=()=>this.mainSegmentLoader_.bandwidth;this.contentSteeringController_=new L0e(this.vhs_.xhr,E),this.setupSegmentLoaderListeners_(),this.bufferBasedABR&&(this.mainPlaylistLoader_.one("loadedplaylist",()=>this.startABRTimer_()),this.tech_.on("pause",()=>this.stopABRTimer_()),this.tech_.on("play",()=>this.startABRTimer_())),M0e.forEach(I=>{this[I+"_"]=F0e.bind(this,I)}),this.logger_=cl("pc"),this.triggeredFmp4Usage=!1,this.tech_.preload()==="none"?(this.loadOnPlay_=()=>{this.loadOnPlay_=null,this.mainPlaylistLoader_.load()},this.tech_.one("play",this.loadOnPlay_)):this.mainPlaylistLoader_.load(),this.timeToLoadedData__=-1,this.mainAppendsToLoadedData__=-1,this.audioAppendsToLoadedData__=-1;const D=this.tech_.preload()==="none"?"play":"loadstart";this.tech_.one(D,()=>{const I=Date.now();this.tech_.one("loadeddata",()=>{this.timeToLoadedData__=Date.now()-I,this.mainAppendsToLoadedData__=this.mainSegmentLoader_.mediaAppends,this.audioAppendsToLoadedData__=this.audioSegmentLoader_.mediaAppends})})}mainAppendsToLoadedData_(){return this.mainAppendsToLoadedData__}audioAppendsToLoadedData_(){return this.audioAppendsToLoadedData__}appendsToLoadedData_(){const e=this.mainAppendsToLoadedData_(),t=this.audioAppendsToLoadedData_();return e===-1||t===-1?-1:e+t}timeToLoadedData_(){return this.timeToLoadedData__}checkABR_(e="abr"){const t=this.selectPlaylist();t&&this.shouldSwitchToMedia_(t)&&this.switchMedia_(t,e)}switchMedia_(e,t,n){const i=this.media(),s=i&&(i.id||i.uri),a=e&&(e.id||e.uri);if(s&&s!==a){this.logger_(`switch media ${s} -> ${a} from ${t}`);const o={renditionInfo:{id:a,bandwidth:e.attributes.BANDWIDTH,resolution:e.attributes.RESOLUTION,codecs:e.attributes.CODECS},cause:t};this.trigger({type:"renditionselected",metadata:o}),this.tech_.trigger({type:"usage",name:`vhs-rendition-change-${t}`})}this.mainPlaylistLoader_.media(e,n)}switchMediaForDASHContentSteering_(){["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(e=>{const t=this.mediaTypes_[e],n=t?t.activeGroup():null,i=this.contentSteeringController_.getPathway();if(n&&i){const a=(n.length?n[0].playlists:n.playlists).filter(o=>o.attributes.serviceLocation===i);a.length&&this.mediaTypes_[e].activePlaylistLoader.media(a[0])}})}startABRTimer_(){this.stopABRTimer_(),this.abrTimer_=X.setInterval(()=>this.checkABR_(),250)}stopABRTimer_(){this.tech_.scrubbing&&this.tech_.scrubbing()||(X.clearInterval(this.abrTimer_),this.abrTimer_=null)}getAudioTrackPlaylists_(){const e=this.main(),t=e&&e.playlists||[];if(!e||!e.mediaGroups||!e.mediaGroups.AUDIO)return t;const n=e.mediaGroups.AUDIO,i=Object.keys(n);let s;if(Object.keys(this.mediaTypes_.AUDIO.groups).length)s=this.mediaTypes_.AUDIO.activeTrack();else{const o=n.main||i.length&&n[i[0]];for(const l in o)if(o[l].default){s={label:l};break}}if(!s)return t;const a=[];for(const o in n)if(n[o][s.label]){const l=n[o][s.label];if(l.playlists&&l.playlists.length)a.push.apply(a,l.playlists);else if(l.uri)a.push(l);else if(e.playlists.length)for(let u=0;u<e.playlists.length;u++){const c=e.playlists[u];c.attributes&&c.attributes.AUDIO&&c.attributes.AUDIO===o&&a.push(c)}}return a.length?a:t}setupMainPlaylistLoaderListeners_(){this.mainPlaylistLoader_.on("loadedmetadata",()=>{const t=this.mainPlaylistLoader_.media(),n=t.targetDuration*1.5*1e3;j2(this.mainPlaylistLoader_.main,this.mainPlaylistLoader_.media())?this.requestOptions_.timeout=0:this.requestOptions_.timeout=n,t.endList&&this.tech_.preload()!=="none"&&(this.mainSegmentLoader_.playlist(t,this.requestOptions_),this.mainSegmentLoader_.load()),P0e({sourceType:this.sourceType_,segmentLoaders:{AUDIO:this.audioSegmentLoader_,SUBTITLES:this.subtitleSegmentLoader_,main:this.mainSegmentLoader_},tech:this.tech_,requestOptions:this.requestOptions_,mainPlaylistLoader:this.mainPlaylistLoader_,vhs:this.vhs_,main:this.main(),mediaTypes:this.mediaTypes_,excludePlaylist:this.excludePlaylist.bind(this)}),this.triggerPresenceUsage_(this.main(),t),this.setupFirstPlay(),!this.mediaTypes_.AUDIO.activePlaylistLoader||this.mediaTypes_.AUDIO.activePlaylistLoader.media()?this.trigger("selectedinitialmedia"):this.mediaTypes_.AUDIO.activePlaylistLoader.one("loadedmetadata",()=>{this.trigger("selectedinitialmedia")})}),this.mainPlaylistLoader_.on("loadedplaylist",()=>{this.loadOnPlay_&&this.tech_.off("play",this.loadOnPlay_);let t=this.mainPlaylistLoader_.media();if(!t){this.attachContentSteeringListeners_(),this.initContentSteeringController_(),this.excludeUnsupportedVariants_();let n;if(this.enableLowInitialPlaylist&&(n=this.selectInitialPlaylist()),n||(n=this.selectPlaylist()),!n||!this.shouldSwitchToMedia_(n)||(this.initialMedia_=n,this.switchMedia_(this.initialMedia_,"initial"),!(this.sourceType_==="vhs-json"&&this.initialMedia_.segments)))return;t=this.initialMedia_}this.handleUpdatedMediaPlaylist(t)}),this.mainPlaylistLoader_.on("error",()=>{const t=this.mainPlaylistLoader_.error;this.excludePlaylist({playlistToExclude:t.playlist,error:t})}),this.mainPlaylistLoader_.on("mediachanging",()=>{this.mainSegmentLoader_.abort(),this.mainSegmentLoader_.pause()}),this.mainPlaylistLoader_.on("mediachange",()=>{const t=this.mainPlaylistLoader_.media(),n=t.targetDuration*1.5*1e3;j2(this.mainPlaylistLoader_.main,this.mainPlaylistLoader_.media())?this.requestOptions_.timeout=0:this.requestOptions_.timeout=n,this.sourceType_==="dash"&&this.mainPlaylistLoader_.load(),this.mainSegmentLoader_.pause(),this.mainSegmentLoader_.playlist(t,this.requestOptions_),this.waitingForFastQualityPlaylistReceived_?this.runFastQualitySwitch_():this.mainSegmentLoader_.load(),this.tech_.trigger({type:"mediachange",bubbles:!0})}),this.mainPlaylistLoader_.on("playlistunchanged",()=>{const t=this.mainPlaylistLoader_.media();if(t.lastExcludeReason_==="playlist-unchanged")return;this.stuckAtPlaylistEnd_(t)&&(this.excludePlaylist({error:{message:"Playlist no longer updating.",reason:"playlist-unchanged"}}),this.tech_.trigger("playliststuck"))}),this.mainPlaylistLoader_.on("renditiondisabled",()=>{this.tech_.trigger({type:"usage",name:"vhs-rendition-disabled"})}),this.mainPlaylistLoader_.on("renditionenabled",()=>{this.tech_.trigger({type:"usage",name:"vhs-rendition-enabled"})}),["manifestrequeststart","manifestrequestcomplete","manifestparsestart","manifestparsecomplete","playlistrequeststart","playlistrequestcomplete","playlistparsestart","playlistparsecomplete","renditiondisabled","renditionenabled"].forEach(t=>{this.mainPlaylistLoader_.on(t,n=>{this.player_.trigger(sr({},n))})})}handleUpdatedMediaPlaylist(e){this.useCueTags_&&this.updateAdCues_(e),this.mainSegmentLoader_.pause(),this.mainSegmentLoader_.playlist(e,this.requestOptions_),this.waitingForFastQualityPlaylistReceived_&&this.runFastQualitySwitch_(),this.updateDuration(!e.endList),this.tech_.paused()||(this.mainSegmentLoader_.load(),this.audioSegmentLoader_&&this.audioSegmentLoader_.load())}triggerPresenceUsage_(e,t){const n=e.mediaGroups||{};let i=!0;const s=Object.keys(n.AUDIO);for(const a in n.AUDIO)for(const o in n.AUDIO[a])n.AUDIO[a][o].uri||(i=!1);i&&this.tech_.trigger({type:"usage",name:"vhs-demuxed"}),Object.keys(n.SUBTITLES).length&&this.tech_.trigger({type:"usage",name:"vhs-webvtt"}),bc.Playlist.isAes(t)&&this.tech_.trigger({type:"usage",name:"vhs-aes"}),s.length&&Object.keys(n.AUDIO[s[0]]).length>1&&this.tech_.trigger({type:"usage",name:"vhs-alternate-audio"}),this.useCueTags_&&this.tech_.trigger({type:"usage",name:"vhs-playlist-cue-tags"})}shouldSwitchToMedia_(e){const t=this.mainPlaylistLoader_.media()||this.mainPlaylistLoader_.pendingMedia_,n=this.tech_.currentTime(),i=this.bufferLowWaterLine(),s=this.bufferHighWaterLine(),a=this.tech_.buffered();return B0e({buffered:a,currentTime:n,currentPlaylist:t,nextPlaylist:e,bufferLowWaterLine:i,bufferHighWaterLine:s,duration:this.duration(),bufferBasedABR:this.bufferBasedABR,log:this.logger_})}setupSegmentLoaderListeners_(){this.mainSegmentLoader_.on("bandwidthupdate",()=>{this.checkABR_("bandwidthupdate"),this.tech_.trigger("bandwidthupdate")}),this.mainSegmentLoader_.on("timeout",()=>{this.bufferBasedABR&&this.mainSegmentLoader_.load()}),this.bufferBasedABR||this.mainSegmentLoader_.on("progress",()=>{this.trigger("progress")}),this.mainSegmentLoader_.on("error",()=>{const n=this.mainSegmentLoader_.error();this.excludePlaylist({playlistToExclude:n.playlist,error:n})}),this.mainSegmentLoader_.on("appenderror",()=>{this.error=this.mainSegmentLoader_.error_,this.trigger("error")}),this.mainSegmentLoader_.on("syncinfoupdate",()=>{this.onSyncInfoUpdate_()}),this.mainSegmentLoader_.on("timestampoffset",()=>{this.tech_.trigger({type:"usage",name:"vhs-timestamp-offset"})}),this.audioSegmentLoader_.on("syncinfoupdate",()=>{this.onSyncInfoUpdate_()}),this.audioSegmentLoader_.on("appenderror",()=>{this.error=this.audioSegmentLoader_.error_,this.trigger("error")}),this.mainSegmentLoader_.on("ended",()=>{this.logger_("main segment loader ended"),this.onEndOfStream()}),this.timelineChangeController_.on("audioTimelineBehind",()=>{const n=this.audioSegmentLoader_.pendingSegment_;if(!n||!n.segment||!n.segment.syncInfo)return;const i=n.segment.syncInfo.end+.01;this.tech_.setCurrentTime(i)}),this.mainSegmentLoader_.on("earlyabort",n=>{this.bufferBasedABR||(this.delegateLoaders_("all",["abort"]),this.excludePlaylist({error:{message:"Aborted early because there isn't enough bandwidth to complete the request without rebuffering."},playlistExclusionDuration:O0e}))});const e=()=>{if(!this.sourceUpdater_.hasCreatedSourceBuffers())return this.tryToCreateSourceBuffers_();const n=this.getCodecsOrExclude_();n&&this.sourceUpdater_.addOrChangeSourceBuffers(n)};this.mainSegmentLoader_.on("trackinfo",e),this.audioSegmentLoader_.on("trackinfo",e),this.mainSegmentLoader_.on("fmp4",()=>{this.triggeredFmp4Usage||(this.tech_.trigger({type:"usage",name:"vhs-fmp4"}),this.triggeredFmp4Usage=!0)}),this.audioSegmentLoader_.on("fmp4",()=>{this.triggeredFmp4Usage||(this.tech_.trigger({type:"usage",name:"vhs-fmp4"}),this.triggeredFmp4Usage=!0)}),this.audioSegmentLoader_.on("ended",()=>{this.logger_("audioSegmentLoader ended"),this.onEndOfStream()}),["segmentselected","segmentloadstart","segmentloaded","segmentkeyloadstart","segmentkeyloadcomplete","segmentdecryptionstart","segmentdecryptioncomplete","segmenttransmuxingstart","segmenttransmuxingcomplete","segmenttransmuxingtrackinfoavailable","segmenttransmuxingtiminginfoavailable","segmentappendstart","appendsdone","bandwidthupdated","timelinechange","codecschange"].forEach(n=>{this.mainSegmentLoader_.on(n,i=>{this.player_.trigger(sr({},i))}),this.audioSegmentLoader_.on(n,i=>{this.player_.trigger(sr({},i))}),this.subtitleSegmentLoader_.on(n,i=>{this.player_.trigger(sr({},i))})})}mediaSecondsLoaded_(){return Math.max(this.audioSegmentLoader_.mediaSecondsLoaded+this.mainSegmentLoader_.mediaSecondsLoaded)}load(){this.mainSegmentLoader_.load(),this.mediaTypes_.AUDIO.activePlaylistLoader&&this.audioSegmentLoader_.load(),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&this.subtitleSegmentLoader_.load()}pause(){this.mainSegmentLoader_.pause(),this.mediaTypes_.AUDIO.activePlaylistLoader&&this.audioSegmentLoader_.pause(),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&this.subtitleSegmentLoader_.pause()}fastQualityChange_(e=this.selectPlaylist()){if(e&&e===this.mainPlaylistLoader_.media()){this.logger_("skipping fastQualityChange because new media is same as old");return}this.switchMedia_(e,"fast-quality"),this.waitingForFastQualityPlaylistReceived_=!0}runFastQualitySwitch_(){this.waitingForFastQualityPlaylistReceived_=!1,this.mainSegmentLoader_.pause(),this.mainSegmentLoader_.resetEverything(()=>{this.mainSegmentLoader_.load()})}play(){if(this.setupFirstPlay())return;this.tech_.ended()&&this.tech_.setCurrentTime(0),this.hasPlayed_&&this.load();const e=this.tech_.seekable();if(this.tech_.duration()===1/0&&this.tech_.currentTime()<e.start(0))return this.tech_.setCurrentTime(e.end(e.length-1))}setupFirstPlay(){const e=this.mainPlaylistLoader_.media();if(!e||this.tech_.paused()||this.hasPlayed_)return!1;if(!e.endList||e.start){const t=this.seekable();if(!t.length)return!1;const n=t.end(0);let i=n;if(e.start){const s=e.start.timeOffset;s<0?i=Math.max(n+s,t.start(0)):i=Math.min(n,s)}this.trigger("firstplay"),this.tech_.setCurrentTime(i)}return this.hasPlayed_=!0,this.load(),!0}handleSourceOpen_(){if(this.tryToCreateSourceBuffers_(),this.tech_.autoplay()){const e=this.tech_.play();typeof e<"u"&&typeof e.then=="function"&&e.then(null,t=>{})}this.trigger("sourceopen")}handleSourceEnded_(){if(!this.inbandTextTracks_.metadataTrack_)return;const e=this.inbandTextTracks_.metadataTrack_.cues;if(!e||!e.length)return;const t=this.duration();e[e.length-1].endTime=isNaN(t)||Math.abs(t)===1/0?Number.MAX_VALUE:t}handleDurationChange_(){this.tech_.trigger("durationchange")}onEndOfStream(){let e=this.mainSegmentLoader_.ended_;if(this.mediaTypes_.AUDIO.activePlaylistLoader){const t=this.mainSegmentLoader_.getCurrentMediaInfo_();!t||t.hasVideo?e=e&&this.audioSegmentLoader_.ended_:e=this.audioSegmentLoader_.ended_}e&&(this.stopABRTimer_(),this.sourceUpdater_.endOfStream())}stuckAtPlaylistEnd_(e){if(!this.seekable().length)return!1;const n=this.syncController_.getExpiredTime(e,this.duration());if(n===null)return!1;const i=bc.Playlist.playlistEnd(e,n),s=this.tech_.currentTime(),a=this.tech_.buffered();if(!a.length)return i-s<=Cu;const o=a.end(a.length-1);return o-s<=Cu&&i-o<=Cu}excludePlaylist({playlistToExclude:e=this.mainPlaylistLoader_.media(),error:t={},playlistExclusionDuration:n}){if(e=e||this.mainPlaylistLoader_.media(),n=n||t.playlistExclusionDuration||this.playlistExclusionDuration,!e){this.error=t,this.mediaSource.readyState!=="open"?this.trigger("error"):this.sourceUpdater_.endOfStream("network");return}e.playlistErrors_++;const i=this.mainPlaylistLoader_.main.playlists,s=i.filter(WS),a=s.length===1&&s[0]===e;if(i.length===1&&n!==1/0)return Se.log.warn(`Problem encountered with playlist ${e.id}. Trying again since it is the only playlist.`),this.tech_.trigger("retryplaylist"),this.mainPlaylistLoader_.load(a);if(a){if(this.main().contentSteering){const v=this.pathwayAttribute_(e),y=this.contentSteeringController_.steeringManifest.ttl*1e3;this.contentSteeringController_.excludePathway(v),this.excludeThenChangePathway_(),setTimeout(()=>{this.contentSteeringController_.addAvailablePathway(v)},y);return}let g=!1;i.forEach(v=>{if(v===e)return;const y=v.excludeUntil;typeof y<"u"&&y!==1/0&&(g=!0,delete v.excludeUntil)}),g&&(Se.log.warn("Removing other playlists from the exclusion list because the last rendition is about to be excluded."),this.tech_.trigger("retryplaylist"))}let o;e.playlistErrors_>this.maxPlaylistRetries?o=1/0:o=Date.now()+n*1e3,e.excludeUntil=o,t.reason&&(e.lastExcludeReason_=t.reason),this.tech_.trigger("excludeplaylist"),this.tech_.trigger({type:"usage",name:"vhs-rendition-excluded"});const l=this.selectPlaylist();if(!l){this.error="Playback cannot continue. No available working or supported playlists.",this.trigger("error");return}const u=t.internal?this.logger_:Se.log.warn,c=t.message?" "+t.message:"";u(`${t.internal?"Internal problem":"Problem"} encountered with playlist ${e.id}.${c} Switching to playlist ${l.id}.`),l.attributes.AUDIO!==e.attributes.AUDIO&&this.delegateLoaders_("audio",["abort","pause"]),l.attributes.SUBTITLES!==e.attributes.SUBTITLES&&this.delegateLoaders_("subtitle",["abort","pause"]),this.delegateLoaders_("main",["abort","pause"]);const h=l.targetDuration/2*1e3||5*1e3,f=typeof l.lastRequest=="number"&&Date.now()-l.lastRequest<=h;return this.switchMedia_(l,"exclude",a||f)}pauseLoading(){this.delegateLoaders_("all",["abort","pause"]),this.stopABRTimer_()}delegateLoaders_(e,t){const n=[],i=e==="all";(i||e==="main")&&n.push(this.mainPlaylistLoader_);const s=[];(i||e==="audio")&&s.push("AUDIO"),(i||e==="subtitle")&&(s.push("CLOSED-CAPTIONS"),s.push("SUBTITLES")),s.forEach(a=>{const o=this.mediaTypes_[a]&&this.mediaTypes_[a].activePlaylistLoader;o&&n.push(o)}),["main","audio","subtitle"].forEach(a=>{const o=this[`${a}SegmentLoader_`];o&&(e===a||e==="all")&&n.push(o)}),n.forEach(a=>t.forEach(o=>{typeof a[o]=="function"&&a[o]()}))}setCurrentTime(e){const t=pp(this.tech_.buffered(),e);if(!(this.mainPlaylistLoader_&&this.mainPlaylistLoader_.media())||!this.mainPlaylistLoader_.media().segments)return 0;if(t&&t.length)return e;this.mainSegmentLoader_.pause(),this.mainSegmentLoader_.resetEverything(),this.mediaTypes_.AUDIO.activePlaylistLoader&&(this.audioSegmentLoader_.pause(),this.audioSegmentLoader_.resetEverything()),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&(this.subtitleSegmentLoader_.pause(),this.subtitleSegmentLoader_.resetEverything()),this.load()}duration(){if(!this.mainPlaylistLoader_)return 0;const e=this.mainPlaylistLoader_.media();return e?e.endList?this.mediaSource?this.mediaSource.duration:bc.Playlist.duration(e):1/0:0}seekable(){return this.seekable_}onSyncInfoUpdate_(){let e;if(!this.mainPlaylistLoader_)return;let t=this.mainPlaylistLoader_.media();if(!t)return;let n=this.syncController_.getExpiredTime(t,this.duration());if(n===null)return;const i=this.mainPlaylistLoader_.main,s=bc.Playlist.seekable(t,n,bc.Playlist.liveEdgeDelay(i,t));if(s.length===0||this.mediaTypes_.AUDIO.activePlaylistLoader&&(t=this.mediaTypes_.AUDIO.activePlaylistLoader.media(),n=this.syncController_.getExpiredTime(t,this.duration()),n===null||(e=bc.Playlist.seekable(t,n,bc.Playlist.liveEdgeDelay(i,t)),e.length===0)))return;let a,o;if(this.seekable_&&this.seekable_.length&&(a=this.seekable_.end(0),o=this.seekable_.start(0)),e?e.start(0)>s.end(0)||s.start(0)>e.end(0)?this.seekable_=s:this.seekable_=_s([[e.start(0)>s.start(0)?e.start(0):s.start(0),e.end(0)<s.end(0)?e.end(0):s.end(0)]]):this.seekable_=s,this.seekable_&&this.seekable_.length&&this.seekable_.end(0)===a&&this.seekable_.start(0)===o)return;this.logger_(`seekable updated [${p$(this.seekable_)}]`);const l={seekableRanges:this.seekable_};this.trigger({type:"seekablerangeschanged",metadata:l}),this.tech_.trigger("seekablechanged")}updateDuration(e){if(this.updateDuration_&&(this.mediaSource.removeEventListener("sourceopen",this.updateDuration_),this.updateDuration_=null),this.mediaSource.readyState!=="open"){this.updateDuration_=this.updateDuration.bind(this,e),this.mediaSource.addEventListener("sourceopen",this.updateDuration_);return}if(e){const i=this.seekable();if(!i.length)return;(isNaN(this.mediaSource.duration)||this.mediaSource.duration<i.end(i.length-1))&&this.sourceUpdater_.setDuration(i.end(i.length-1));return}const t=this.tech_.buffered();let n=bc.Playlist.duration(this.mainPlaylistLoader_.media());t.length>0&&(n=Math.max(n,t.end(t.length-1))),this.mediaSource.duration!==n&&this.sourceUpdater_.setDuration(n)}dispose(){this.trigger("dispose"),this.decrypter_.terminate(),this.mainPlaylistLoader_.dispose(),this.mainSegmentLoader_.dispose(),this.contentSteeringController_.dispose(),this.keyStatusMap_.clear(),this.loadOnPlay_&&this.tech_.off("play",this.loadOnPlay_),["AUDIO","SUBTITLES"].forEach(e=>{const t=this.mediaTypes_[e].groups;for(const n in t)t[n].forEach(i=>{i.playlistLoader&&i.playlistLoader.dispose()})}),this.audioSegmentLoader_.dispose(),this.subtitleSegmentLoader_.dispose(),this.sourceUpdater_.dispose(),this.timelineChangeController_.dispose(),this.stopABRTimer_(),this.updateDuration_&&this.mediaSource.removeEventListener("sourceopen",this.updateDuration_),this.mediaSource.removeEventListener("durationchange",this.handleDurationChange_),this.mediaSource.removeEventListener("sourceopen",this.handleSourceOpen_),this.mediaSource.removeEventListener("sourceended",this.handleSourceEnded_),this.off()}main(){return this.mainPlaylistLoader_.main}media(){return this.mainPlaylistLoader_.media()||this.initialMedia_}areMediaTypesKnown_(){const e=!!this.mediaTypes_.AUDIO.activePlaylistLoader,t=!!this.mainSegmentLoader_.getCurrentMediaInfo_(),n=e?!!this.audioSegmentLoader_.getCurrentMediaInfo_():!0;return!(!t||!n)}getCodecsOrExclude_(){const e={main:this.mainSegmentLoader_.getCurrentMediaInfo_()||{},audio:this.audioSegmentLoader_.getCurrentMediaInfo_()||{}},t=this.mainSegmentLoader_.getPendingSegmentPlaylist()||this.media();e.video=e.main;const n=hg(this.main(),t),i={},s=!!this.mediaTypes_.AUDIO.activePlaylistLoader;if(e.main.hasVideo&&(i.video=n.video||e.main.videoCodec||P5),e.main.isMuxed&&(i.video+=`,${n.audio||e.main.audioCodec||H_}`),(e.main.hasAudio&&!e.main.isMuxed||e.audio.hasAudio||s)&&(i.audio=n.audio||e.main.audioCodec||e.audio.audioCodec||H_,e.audio.isFmp4=e.main.hasAudio&&!e.main.isMuxed?e.main.isFmp4:e.audio.isFmp4),!i.audio&&!i.video){this.excludePlaylist({playlistToExclude:t,error:{message:"Could not determine codecs for playlist."},playlistExclusionDuration:1/0});return}const a=(u,c)=>u?Lu(c):Ep(c),o={};let l;if(["video","audio"].forEach(function(u){if(i.hasOwnProperty(u)&&!a(e[u].isFmp4,i[u])){const c=e[u].isFmp4?"browser":"muxer";o[c]=o[c]||[],o[c].push(i[u]),u==="audio"&&(l=c)}}),s&&l&&t.attributes.AUDIO){const u=t.attributes.AUDIO;this.main().playlists.forEach(c=>{(c.attributes&&c.attributes.AUDIO)===u&&c!==t&&(c.excludeUntil=1/0)}),this.logger_(`excluding audio group ${u} as ${l} does not support codec(s): "${i.audio}"`)}if(Object.keys(o).length){const u=Object.keys(o).reduce((c,h)=>(c&&(c+=", "),c+=`${h} does not support codec(s): "${o[h].join(",")}"`,c),"")+".";this.excludePlaylist({playlistToExclude:t,error:{internal:!0,message:u},playlistExclusionDuration:1/0});return}if(this.sourceUpdater_.hasCreatedSourceBuffers()&&!this.sourceUpdater_.canChangeType()){const u=[];if(["video","audio"].forEach(c=>{const h=(Ni(this.sourceUpdater_.codecs[c]||"")[0]||{}).type,f=(Ni(i[c]||"")[0]||{}).type;h&&f&&h.toLowerCase()!==f.toLowerCase()&&u.push(`"${this.sourceUpdater_.codecs[c]}" -> "${i[c]}"`)}),u.length){this.excludePlaylist({playlistToExclude:t,error:{message:`Codec switching not supported: ${u.join(", ")}.`,internal:!0},playlistExclusionDuration:1/0});return}}return i}tryToCreateSourceBuffers_(){if(this.mediaSource.readyState!=="open"||this.sourceUpdater_.hasCreatedSourceBuffers()||!this.areMediaTypesKnown_())return;const e=this.getCodecsOrExclude_();if(!e)return;this.sourceUpdater_.createSourceBuffers(e);const t=[e.video,e.audio].filter(Boolean).join(",");this.excludeIncompatibleVariants_(t)}excludeUnsupportedVariants_(){const e=this.main().playlists,t=[];Object.keys(e).forEach(n=>{const i=e[n];if(t.indexOf(i.id)!==-1)return;t.push(i.id);const s=hg(this.main,i),a=[];s.audio&&!Ep(s.audio)&&!Lu(s.audio)&&a.push(`audio codec ${s.audio}`),s.video&&!Ep(s.video)&&!Lu(s.video)&&a.push(`video codec ${s.video}`),s.text&&s.text==="stpp.ttml.im1t"&&a.push(`text codec ${s.text}`),a.length&&(i.excludeUntil=1/0,this.logger_(`excluding ${i.id} for unsupported: ${a.join(", ")}`))})}excludeIncompatibleVariants_(e){const t=[],n=this.main().playlists,i=fb(Ni(e)),s=VM(i),a=i.video&&Ni(i.video)[0]||null,o=i.audio&&Ni(i.audio)[0]||null;Object.keys(n).forEach(l=>{const u=n[l];if(t.indexOf(u.id)!==-1||u.excludeUntil===1/0)return;t.push(u.id);const c=[],h=hg(this.mainPlaylistLoader_.main,u),f=VM(h);if(!(!h.audio&&!h.video)){if(f!==s&&c.push(`codec count "${f}" !== "${s}"`),!this.sourceUpdater_.canChangeType()){const g=h.video&&Ni(h.video)[0]||null,v=h.audio&&Ni(h.audio)[0]||null;g&&a&&g.type.toLowerCase()!==a.type.toLowerCase()&&c.push(`video codec "${g.type}" !== "${a.type}"`),v&&o&&v.type.toLowerCase()!==o.type.toLowerCase()&&c.push(`audio codec "${v.type}" !== "${o.type}"`)}c.length&&(u.excludeUntil=1/0,this.logger_(`excluding ${u.id}: ${c.join(" && ")}`))}})}updateAdCues_(e){let t=0;const n=this.seekable();n.length&&(t=n.start(0)),g0e(e,this.cueTagsTrack_,t)}goalBufferLength(){const e=this.tech_.currentTime(),t=Zi.GOAL_BUFFER_LENGTH,n=Zi.GOAL_BUFFER_LENGTH_RATE,i=Math.max(t,Zi.MAX_GOAL_BUFFER_LENGTH);return Math.min(t+e*n,i)}bufferLowWaterLine(){const e=this.tech_.currentTime(),t=Zi.BUFFER_LOW_WATER_LINE,n=Zi.BUFFER_LOW_WATER_LINE_RATE,i=Math.max(t,Zi.MAX_BUFFER_LOW_WATER_LINE),s=Math.max(t,Zi.EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE);return Math.min(t+e*n,this.bufferBasedABR?s:i)}bufferHighWaterLine(){return Zi.BUFFER_HIGH_WATER_LINE}addDateRangesToTextTrack_(e){GM(this.inbandTextTracks_,"com.apple.streaming",this.tech_),Kme({inbandTextTracks:this.inbandTextTracks_,dateRanges:e})}addMetadataToTextTrack(e,t,n){const i=this.sourceUpdater_.videoBuffer?this.sourceUpdater_.videoTimestampOffset():this.sourceUpdater_.audioTimestampOffset();GM(this.inbandTextTracks_,e,this.tech_),Wme({inbandTextTracks:this.inbandTextTracks_,metadataArray:t,timestampOffset:i,videoDuration:n})}pathwayAttribute_(e){return e.attributes["PATHWAY-ID"]||e.attributes.serviceLocation}initContentSteeringController_(){const e=this.main();if(e.contentSteering){for(const t of e.playlists)this.contentSteeringController_.addAvailablePathway(this.pathwayAttribute_(t));if(this.contentSteeringController_.assignTagProperties(e.uri,e.contentSteering),this.contentSteeringController_.queryBeforeStart){this.contentSteeringController_.requestSteeringManifest(!0);return}this.tech_.one("canplay",()=>{this.contentSteeringController_.requestSteeringManifest()})}}resetContentSteeringController_(){this.contentSteeringController_.clearAvailablePathways(),this.contentSteeringController_.dispose(),this.initContentSteeringController_()}attachContentSteeringListeners_(){this.contentSteeringController_.on("content-steering",this.excludeThenChangePathway_.bind(this)),["contentsteeringloadstart","contentsteeringloadcomplete","contentsteeringparsed"].forEach(t=>{this.contentSteeringController_.on(t,n=>{this.trigger(sr({},n))})}),this.sourceType_==="dash"&&this.mainPlaylistLoader_.on("loadedplaylist",()=>{const t=this.main();(this.contentSteeringController_.didDASHTagChange(t.uri,t.contentSteering)||(()=>{const s=this.contentSteeringController_.getAvailablePathways(),a=[];for(const o of t.playlists){const l=o.attributes.serviceLocation;if(l&&(a.push(l),!s.has(l)))return!0}return!!(!a.length&&s.size)})())&&this.resetContentSteeringController_()})}excludeThenChangePathway_(){const e=this.contentSteeringController_.getPathway();if(!e)return;this.handlePathwayClones_();const n=this.main().playlists,i=new Set;let s=!1;Object.keys(n).forEach(a=>{const o=n[a],l=this.pathwayAttribute_(o),u=l&&e!==l;o.excludeUntil===1/0&&o.lastExcludeReason_==="content-steering"&&!u&&(delete o.excludeUntil,delete o.lastExcludeReason_,s=!0);const h=!o.excludeUntil&&o.excludeUntil!==1/0;!i.has(o.id)&&u&&h&&(i.add(o.id),o.excludeUntil=1/0,o.lastExcludeReason_="content-steering",this.logger_(`excluding ${o.id} for ${o.lastExcludeReason_}`))}),this.contentSteeringController_.manifestType_==="DASH"&&Object.keys(this.mediaTypes_).forEach(a=>{const o=this.mediaTypes_[a];if(o.activePlaylistLoader){const l=o.activePlaylistLoader.media_;l&&l.attributes.serviceLocation!==e&&(s=!0)}}),s&&this.changeSegmentPathway_()}handlePathwayClones_(){const t=this.main().playlists,n=this.contentSteeringController_.currentPathwayClones,i=this.contentSteeringController_.nextPathwayClones;if(n&&n.size||i&&i.size){for(const[a,o]of n.entries())i.get(a)||(this.mainPlaylistLoader_.updateOrDeleteClone(o),this.contentSteeringController_.excludePathway(a));for(const[a,o]of i.entries()){const l=n.get(a);if(!l){t.filter(c=>c.attributes["PATHWAY-ID"]===o["BASE-ID"]).forEach(c=>{this.mainPlaylistLoader_.addClonePathway(o,c)}),this.contentSteeringController_.addAvailablePathway(a);continue}this.equalPathwayClones_(l,o)||(this.mainPlaylistLoader_.updateOrDeleteClone(o,!0),this.contentSteeringController_.addAvailablePathway(a))}this.contentSteeringController_.currentPathwayClones=new Map(JSON.parse(JSON.stringify([...i])))}}equalPathwayClones_(e,t){if(e["BASE-ID"]!==t["BASE-ID"]||e.ID!==t.ID||e["URI-REPLACEMENT"].HOST!==t["URI-REPLACEMENT"].HOST)return!1;const n=e["URI-REPLACEMENT"].PARAMS,i=t["URI-REPLACEMENT"].PARAMS;for(const s in n)if(n[s]!==i[s])return!1;for(const s in i)if(n[s]!==i[s])return!1;return!0}changeSegmentPathway_(){const e=this.selectPlaylist();this.pauseLoading(),this.contentSteeringController_.manifestType_==="DASH"&&this.switchMediaForDASHContentSteering_(),this.switchMedia_(e,"content-steering")}excludeNonUsablePlaylistsByKeyId_(){if(!this.mainPlaylistLoader_||!this.mainPlaylistLoader_.main)return;let e=0;const t="non-usable";this.mainPlaylistLoader_.main.playlists.forEach(n=>{const i=this.mainPlaylistLoader_.getKeyIdSet(n);!i||!i.size||i.forEach(s=>{const a="usable",o=this.keyStatusMap_.has(s)&&this.keyStatusMap_.get(s)===a,l=n.lastExcludeReason_===t&&n.excludeUntil===1/0;o?o&&l&&(delete n.excludeUntil,delete n.lastExcludeReason_,this.logger_(`enabling playlist ${n.id} because key ID ${s} is ${a}`)):(n.excludeUntil!==1/0&&n.lastExcludeReason_!==t&&(n.excludeUntil=1/0,n.lastExcludeReason_=t,this.logger_(`excluding playlist ${n.id} because the key ID ${s} doesn't exist in the keyStatusMap or is not ${a}`)),e++)})}),e>=this.mainPlaylistLoader_.main.playlists.length&&this.mainPlaylistLoader_.main.playlists.forEach(n=>{const i=n&&n.attributes&&n.attributes.RESOLUTION&&n.attributes.RESOLUTION.height<720,s=n.excludeUntil===1/0&&n.lastExcludeReason_===t;i&&s&&(delete n.excludeUntil,Se.log.warn(`enabling non-HD playlist ${n.id} because all playlists were excluded due to ${t} key IDs`))})}addKeyStatus_(e,t){const s=(typeof e=="string"?e:h0e(e)).slice(0,32).toLowerCase();this.logger_(`KeyStatus '${t}' with key ID ${s} added to the keyStatusMap`),this.keyStatusMap_.set(s,t)}updatePlaylistByKeyStatus(e,t){this.addKeyStatus_(e,t),this.waitingForFastQualityPlaylistReceived_||this.excludeNonUsableThenChangePlaylist_(),this.mainPlaylistLoader_.off("loadedplaylist",this.excludeNonUsableThenChangePlaylist_.bind(this)),this.mainPlaylistLoader_.on("loadedplaylist",this.excludeNonUsableThenChangePlaylist_.bind(this))}excludeNonUsableThenChangePlaylist_(){this.excludeNonUsablePlaylistsByKeyId_(),this.fastQualityChange_()}}const U0e=(r,e,t)=>n=>{const i=r.main.playlists[e],s=wA(i),a=WS(i);if(typeof n>"u")return a;n?delete i.disabled:i.disabled=!0;const o={renditionInfo:{id:e,bandwidth:i.attributes.BANDWIDTH,resolution:i.attributes.RESOLUTION,codecs:i.attributes.CODECS},cause:"fast-quality"};return n!==a&&!s&&(t(i),n?r.trigger({type:"renditionenabled",metadata:o}):r.trigger({type:"renditiondisabled",metadata:o})),n};let $0e=class{constructor(e,t,n){const{playlistController_:i}=e,s=i.fastQualityChange_.bind(i);if(t.attributes){const a=t.attributes.RESOLUTION;this.width=a&&a.width,this.height=a&&a.height,this.bandwidth=t.attributes.BANDWIDTH,this.frameRate=t.attributes["FRAME-RATE"]}this.codecs=hg(i.main(),t),this.playlist=t,this.id=n,this.enabled=U0e(e.playlists,t.id,s)}};const j0e=function(r){r.representations=()=>{const e=r.playlistController_.main(),t=Sv(e)?r.playlistController_.getAudioTrackPlaylists_():e.playlists;return t?t.filter(n=>!wA(n)).map((n,i)=>new $0e(r,n,n.id)):[]}},i3=["seeking","seeked","pause","playing","error"];let z0e=class extends Se.EventTarget{constructor(e){super(),this.playlistController_=e.playlistController,this.tech_=e.tech,this.seekable=e.seekable,this.allowSeeksWithinUnsafeLiveWindow=e.allowSeeksWithinUnsafeLiveWindow,this.liveRangeSafeTimeDelta=e.liveRangeSafeTimeDelta,this.media=e.media,this.playedRanges_=[],this.consecutiveUpdates=0,this.lastRecordedTime=null,this.checkCurrentTimeTimeout_=null,this.logger_=cl("PlaybackWatcher"),this.logger_("initialize");const t=()=>this.monitorCurrentTime_(),n=()=>this.monitorCurrentTime_(),i=()=>this.techWaiting_(),s=()=>this.resetTimeUpdate_(),a=this.playlistController_,o=["main","subtitle","audio"],l={};o.forEach(c=>{l[c]={reset:()=>this.resetSegmentDownloads_(c),updateend:()=>this.checkSegmentDownloads_(c)},a[`${c}SegmentLoader_`].on("appendsdone",l[c].updateend),a[`${c}SegmentLoader_`].on("playlistupdate",l[c].reset),this.tech_.on(["seeked","seeking"],l[c].reset)});const u=c=>{["main","audio"].forEach(h=>{a[`${h}SegmentLoader_`][c]("appended",this.seekingAppendCheck_)})};this.seekingAppendCheck_=()=>{this.fixesBadSeeks_()&&(this.consecutiveUpdates=0,this.lastRecordedTime=this.tech_.currentTime(),u("off"))},this.clearSeekingAppendCheck_=()=>u("off"),this.watchForBadSeeking_=()=>{this.clearSeekingAppendCheck_(),u("on")},this.tech_.on("seeked",this.clearSeekingAppendCheck_),this.tech_.on("seeking",this.watchForBadSeeking_),this.tech_.on("waiting",i),this.tech_.on(i3,s),this.tech_.on("canplay",n),this.tech_.one("play",t),this.dispose=()=>{this.clearSeekingAppendCheck_(),this.logger_("dispose"),this.tech_.off("waiting",i),this.tech_.off(i3,s),this.tech_.off("canplay",n),this.tech_.off("play",t),this.tech_.off("seeking",this.watchForBadSeeking_),this.tech_.off("seeked",this.clearSeekingAppendCheck_),o.forEach(c=>{a[`${c}SegmentLoader_`].off("appendsdone",l[c].updateend),a[`${c}SegmentLoader_`].off("playlistupdate",l[c].reset),this.tech_.off(["seeked","seeking"],l[c].reset)}),this.checkCurrentTimeTimeout_&&X.clearTimeout(this.checkCurrentTimeTimeout_),this.resetTimeUpdate_()}}monitorCurrentTime_(){this.checkCurrentTime_(),this.checkCurrentTimeTimeout_&&X.clearTimeout(this.checkCurrentTimeTimeout_),this.checkCurrentTimeTimeout_=X.setTimeout(this.monitorCurrentTime_.bind(this),250)}resetSegmentDownloads_(e){const t=this.playlistController_[`${e}SegmentLoader_`];this[`${e}StalledDownloads_`]>0&&this.logger_(`resetting possible stalled download count for ${e} loader`),this[`${e}StalledDownloads_`]=0,this[`${e}Buffered_`]=t.buffered_()}checkSegmentDownloads_(e){const t=this.playlistController_,n=t[`${e}SegmentLoader_`],i=n.buffered_(),s=Ape(this[`${e}Buffered_`],i);if(this[`${e}Buffered_`]=i,s){const a={bufferedRanges:i};t.trigger({type:"bufferedrangeschanged",metadata:a}),this.resetSegmentDownloads_(e);return}this[`${e}StalledDownloads_`]++,this.logger_(`found #${this[`${e}StalledDownloads_`]} ${e} appends that did not increase buffer (possible stalled download)`,{playlistId:n.playlist_&&n.playlist_.id,buffered:Wh(i)}),!(this[`${e}StalledDownloads_`]<10)&&(this.logger_(`${e} loader stalled download exclusion`),this.resetSegmentDownloads_(e),this.tech_.trigger({type:"usage",name:`vhs-${e}-download-exclusion`}),e!=="subtitle"&&t.excludePlaylist({error:{message:`Excessive ${e} segment downloading detected.`},playlistExclusionDuration:1/0}))}checkCurrentTime_(){if(this.tech_.paused()||this.tech_.seeking())return;const e=this.tech_.currentTime(),t=this.tech_.buffered();if(this.lastRecordedTime===e&&(!t.length||e+Cu>=t.end(t.length-1)))return this.techWaiting_();if(this.consecutiveUpdates>=5&&e===this.lastRecordedTime)this.consecutiveUpdates++,this.waiting_();else if(e===this.lastRecordedTime)this.consecutiveUpdates++;else{this.playedRanges_.push(_s([this.lastRecordedTime,e]));const n={playedRanges:this.playedRanges_};this.playlistController_.trigger({type:"playedrangeschanged",metadata:n}),this.consecutiveUpdates=0,this.lastRecordedTime=e}}resetTimeUpdate_(){this.consecutiveUpdates=0}fixesBadSeeks_(){if(!this.tech_.seeking())return!1;const t=this.seekable(),n=this.tech_.currentTime(),i=this.afterSeekableWindow_(t,n,this.media(),this.allowSeeksWithinUnsafeLiveWindow);let s;if(i&&(s=t.end(t.length-1)),this.beforeSeekableWindow_(t,n)){const v=t.start(0);s=v+(v===t.end(0)?0:Cu)}if(typeof s<"u")return this.logger_(`Trying to seek outside of seekable at time ${n} with seekable range ${p$(t)}. Seeking to ${s}.`),this.tech_.setCurrentTime(s),!0;const a=this.playlistController_.sourceUpdater_,o=this.tech_.buffered(),l=a.audioBuffer?a.audioBuffered():null,u=a.videoBuffer?a.videoBuffered():null,c=this.media(),h=c.partTargetDuration?c.partTargetDuration:(c.targetDuration-Tu)*2,f=[l,u];for(let v=0;v<f.length;v++){if(!f[v])continue;if(TA(f[v],n)<h)return!1}const g=qy(o,n);return g.length===0?!1:(s=g.start(0)+Cu,this.logger_(`Buffered region starts (${g.start(0)})  just beyond seek point (${n}). Seeking to ${s}.`),this.tech_.setCurrentTime(s),!0)}waiting_(){if(this.techWaiting_())return;const e=this.tech_.currentTime(),t=this.tech_.buffered(),n=pp(t,e);if(n.length&&e+3<=n.end(0)){this.resetTimeUpdate_(),this.tech_.setCurrentTime(e),this.logger_(`Stopped at ${e} while inside a buffered region [${n.start(0)} -> ${n.end(0)}]. Attempting to resume playback by seeking to the current time.`),this.tech_.trigger({type:"usage",name:"vhs-unknown-waiting"});return}}techWaiting_(){const e=this.seekable(),t=this.tech_.currentTime();if(this.tech_.seeking())return!0;if(this.beforeSeekableWindow_(e,t)){const o=e.end(e.length-1);return this.logger_(`Fell out of live window at time ${t}. Seeking to live point (seekable end) ${o}`),this.resetTimeUpdate_(),this.tech_.setCurrentTime(o),this.tech_.trigger({type:"usage",name:"vhs-live-resync"}),!0}const n=this.tech_.vhs.playlistController_.sourceUpdater_,i=this.tech_.buffered();if(this.videoUnderflow_({audioBuffered:n.audioBuffered(),videoBuffered:n.videoBuffered(),currentTime:t}))return this.resetTimeUpdate_(),this.tech_.setCurrentTime(t),this.tech_.trigger({type:"usage",name:"vhs-video-underflow"}),!0;const a=qy(i,t);return a.length>0?(this.logger_(`Stopped at ${t} and seeking to ${a.start(0)}`),this.resetTimeUpdate_(),this.skipTheGap_(t),!0):!1}afterSeekableWindow_(e,t,n,i=!1){if(!e.length)return!1;let s=e.end(e.length-1)+Cu;const a=!n.endList,o=typeof n.partTargetDuration=="number";return a&&(o||i)&&(s=e.end(e.length-1)+n.targetDuration*3),t>s}beforeSeekableWindow_(e,t){return!!(e.length&&e.start(0)>0&&t<e.start(0)-this.liveRangeSafeTimeDelta)}videoUnderflow_({videoBuffered:e,audioBuffered:t,currentTime:n}){if(!e)return;let i;if(e.length&&t.length){const s=pp(e,n-3),a=pp(e,n),o=pp(t,n);o.length&&!a.length&&s.length&&(i={start:s.end(0),end:o.end(0)})}else qy(e,n).length||(i=this.gapFromVideoUnderflow_(e,n));return i?(this.logger_(`Encountered a gap in video from ${i.start} to ${i.end}. Seeking to current time ${n}`),!0):!1}skipTheGap_(e){const t=this.tech_.buffered(),n=this.tech_.currentTime(),i=qy(t,n);if(this.resetTimeUpdate_(),i.length===0||n!==e)return;this.logger_("skipTheGap_:","currentTime:",n,"scheduled currentTime:",e,"nextRange start:",i.start(0)),this.tech_.setCurrentTime(i.start(0)+Tu);const s={gapInfo:{from:n,to:i.start(0)}};this.playlistController_.trigger({type:"gapjumped",metadata:s}),this.tech_.trigger({type:"usage",name:"vhs-gap-skip"})}gapFromVideoUnderflow_(e,t){const n=wpe(e);for(let i=0;i<n.length;i++){const s=n.start(i),a=n.end(i);if(t-s<4&&t-s>2)return{start:s,end:a}}return null}};const H0e={errorInterval:30,getSource(r){const t=this.tech({IWillNotUseThisInPlugins:!0}).currentSource_||this.currentSource();return r(t)}},nj=function(r,e){let t=0,n=0;const i=Dn(H0e,e);r.ready(()=>{r.trigger({type:"usage",name:"vhs-error-reload-initialized"})});const s=function(){n&&r.currentTime(n)},a=function(c){c!=null&&(n=r.duration()!==1/0&&r.currentTime()||0,r.one("loadedmetadata",s),r.src(c),r.trigger({type:"usage",name:"vhs-error-reload"}),r.play())},o=function(){if(Date.now()-t<i.errorInterval*1e3){r.trigger({type:"usage",name:"vhs-error-reload-canceled"});return}if(!i.getSource||typeof i.getSource!="function"){Se.log.error("ERROR: reloadSourceOnError - The option getSource must be a function!");return}return t=Date.now(),i.getSource.call(r,a)},l=function(){r.off("loadedmetadata",s),r.off("error",o),r.off("dispose",l)},u=function(c){l(),nj(r,c)};r.on("error",o),r.on("dispose",l),r.reloadSourceOnError=u},V0e=function(r){nj(this,r)};var ij="3.15.0",W0e="7.0.3",q0e="1.3.1",G0e="7.2.0",K0e="4.0.2";const ni={PlaylistLoader:mp,Playlist:Ma,utils:Jpe,STANDARD_PLAYLIST_SELECTOR:qM,INITIAL_PLAYLIST_SELECTOR:$me,lastBandwidthSelector:qM,movingAverageBandwidthSelector:Nme,comparePlaylistBandwidth:AA,comparePlaylistResolution:Bme,xhr:P$()};Object.keys(Zi).forEach(r=>{Object.defineProperty(ni,r,{get(){return Se.log.warn(`using Vhs.${r} is UNSAFE be sure you know what you are doing`),Zi[r]},set(e){if(Se.log.warn(`using Vhs.${r} is UNSAFE be sure you know what you are doing`),typeof e!="number"||e<0){Se.log.warn(`value of Vhs.${r} must be greater than or equal to 0`);return}Zi[r]=e}})});const sj="videojs-vhs",aj=function(r,e){const t=e.media();let n=-1;for(let i=0;i<r.length;i++)if(r[i].id===t.id){n=i;break}r.selectedIndex_=n,r.trigger({selectedIndex:n,type:"change"})},X0e=function(r,e){e.representations().forEach(t=>{r.addQualityLevel(t)}),aj(r,e.playlists)};ni.canPlaySource=function(){return Se.log.warn("VHS is no longer a tech. Please remove it from your player's techOrder.")};const Y0e=(r,e,t)=>{if(!r)return r;let n={};e&&e.attributes&&e.attributes.CODECS&&(n=fb(Ni(e.attributes.CODECS))),t&&t.attributes&&t.attributes.CODECS&&(n.audio=t.attributes.CODECS);const i=Nu(n.video),s=Nu(n.audio),a={};for(const o in r)a[o]={},s&&(a[o].audioContentType=s),i&&(a[o].videoContentType=i),e.contentProtection&&e.contentProtection[o]&&e.contentProtection[o].pssh&&(a[o].pssh=e.contentProtection[o].pssh),typeof r[o]=="string"&&(a[o].url=r[o]);return Dn(r,a)},Q0e=(r,e)=>r.reduce((t,n)=>{if(!n.contentProtection)return t;const i=e.reduce((s,a)=>{const o=n.contentProtection[a];return o&&o.pssh&&(s[a]={pssh:o.pssh}),s},{});return Object.keys(i).length&&t.push(i),t},[]),J0e=({player:r,sourceKeySystems:e,audioMedia:t,mainPlaylists:n})=>{if(!r.eme.initializeMediaKeys)return Promise.resolve();const i=t?n.concat([t]):n,s=Q0e(i,Object.keys(e)),a=[],o=[];return s.forEach(l=>{o.push(new Promise((u,c)=>{r.tech_.one("keysessioncreated",u)})),a.push(new Promise((u,c)=>{r.eme.initializeMediaKeys({keySystems:l},h=>{if(h){c(h);return}u()})}))}),Promise.race([Promise.all(a),Promise.race(o)])},Z0e=({player:r,sourceKeySystems:e,media:t,audioMedia:n})=>{const i=Y0e(e,t,n);return i?(r.currentSource().keySystems=i,i&&!r.eme?(Se.log.warn("DRM encrypted source cannot be decrypted without a DRM plugin"),!1):!0):!1},oj=()=>{if(!X.localStorage)return null;const r=X.localStorage.getItem(sj);if(!r)return null;try{return JSON.parse(r)}catch{return null}},ege=r=>{if(!X.localStorage)return!1;let e=oj();e=e?Dn(e,r):r;try{X.localStorage.setItem(sj,JSON.stringify(e))}catch{return!1}return e},tge=r=>r.toLowerCase().indexOf("data:application/vnd.videojs.vhs+json,")===0?JSON.parse(r.substring(r.indexOf(",")+1)):r,lj=(r,e)=>{r._requestCallbackSet||(r._requestCallbackSet=new Set),r._requestCallbackSet.add(e)},uj=(r,e)=>{r._responseCallbackSet||(r._responseCallbackSet=new Set),r._responseCallbackSet.add(e)},cj=(r,e)=>{r._requestCallbackSet&&(r._requestCallbackSet.delete(e),r._requestCallbackSet.size||delete r._requestCallbackSet)},dj=(r,e)=>{r._responseCallbackSet&&(r._responseCallbackSet.delete(e),r._responseCallbackSet.size||delete r._responseCallbackSet)};ni.supportsNativeHls=(function(){if(!Be||!Be.createElement)return!1;const r=Be.createElement("video");return Se.getTech("Html5").isSupported()?["application/vnd.apple.mpegurl","audio/mpegurl","audio/x-mpegurl","application/x-mpegurl","video/x-mpegurl","video/mpegurl","application/mpegurl"].some(function(t){return/maybe|probably/i.test(r.canPlayType(t))}):!1})();ni.supportsNativeDash=(function(){return!Be||!Be.createElement||!Se.getTech("Html5").isSupported()?!1:/maybe|probably/i.test(Be.createElement("video").canPlayType("application/dash+xml"))})();ni.supportsTypeNatively=r=>r==="hls"?ni.supportsNativeHls:r==="dash"?ni.supportsNativeDash:!1;ni.isSupported=function(){return Se.log.warn("VHS is no longer a tech. Please remove it from your player's techOrder.")};ni.xhr.onRequest=function(r){lj(ni.xhr,r)};ni.xhr.onResponse=function(r){uj(ni.xhr,r)};ni.xhr.offRequest=function(r){cj(ni.xhr,r)};ni.xhr.offResponse=function(r){dj(ni.xhr,r)};const rge=Se.getComponent("Component");let hj=class extends rge{constructor(e,t,n){if(super(t,n.vhs),typeof n.initialBandwidth=="number"&&(this.options_.bandwidth=n.initialBandwidth),this.logger_=cl("VhsHandler"),t.options_&&t.options_.playerId){const i=Se.getPlayer(t.options_.playerId);this.player_=i}if(this.tech_=t,this.source_=e,this.stats={},this.ignoreNextSeekingEvent_=!1,this.setOptions_(),this.options_.overrideNative&&t.overrideNativeAudioTracks&&t.overrideNativeVideoTracks)t.overrideNativeAudioTracks(!0),t.overrideNativeVideoTracks(!0);else if(this.options_.overrideNative&&(t.featuresNativeVideoTracks||t.featuresNativeAudioTracks))throw new Error("Overriding native VHS requires emulated tracks. See https://git.io/vMpjB");this.on(Be,["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","MSFullscreenChange"],i=>{const s=Be.fullscreenElement||Be.webkitFullscreenElement||Be.mozFullScreenElement||Be.msFullscreenElement;s&&s.contains(this.tech_.el())?this.playlistController_.fastQualityChange_():this.playlistController_.checkABR_()}),this.on(this.tech_,"seeking",function(){if(this.ignoreNextSeekingEvent_){this.ignoreNextSeekingEvent_=!1;return}this.setCurrentTime(this.tech_.currentTime())}),this.on(this.tech_,"error",function(){this.tech_.error()&&this.playlistController_&&this.playlistController_.pauseLoading()}),this.on(this.tech_,"play",this.play)}setOptions_(e={}){if(this.options_=Dn(this.options_,e),this.options_.withCredentials=this.options_.withCredentials||!1,this.options_.limitRenditionByPlayerDimensions=this.options_.limitRenditionByPlayerDimensions!==!1,this.options_.useDevicePixelRatio=this.options_.useDevicePixelRatio||!1,this.options_.useBandwidthFromLocalStorage=typeof this.source_.useBandwidthFromLocalStorage<"u"?this.source_.useBandwidthFromLocalStorage:this.options_.useBandwidthFromLocalStorage||!1,this.options_.useForcedSubtitles=this.options_.useForcedSubtitles||!1,this.options_.useNetworkInformationApi=this.options_.useNetworkInformationApi||!1,this.options_.useDtsForTimestampOffset=this.options_.useDtsForTimestampOffset||!1,this.options_.customTagParsers=this.options_.customTagParsers||[],this.options_.customTagMappers=this.options_.customTagMappers||[],this.options_.cacheEncryptionKeys=this.options_.cacheEncryptionKeys||!1,this.options_.llhls=this.options_.llhls!==!1,this.options_.bufferBasedABR=this.options_.bufferBasedABR||!1,typeof this.options_.playlistExclusionDuration!="number"&&(this.options_.playlistExclusionDuration=60),typeof this.options_.bandwidth!="number"&&this.options_.useBandwidthFromLocalStorage){const n=oj();n&&n.bandwidth&&(this.options_.bandwidth=n.bandwidth,this.tech_.trigger({type:"usage",name:"vhs-bandwidth-from-local-storage"})),n&&n.throughput&&(this.options_.throughput=n.throughput,this.tech_.trigger({type:"usage",name:"vhs-throughput-from-local-storage"}))}typeof this.options_.bandwidth!="number"&&(this.options_.bandwidth=Zi.INITIAL_BANDWIDTH),this.options_.enableLowInitialPlaylist=this.options_.enableLowInitialPlaylist&&this.options_.bandwidth===Zi.INITIAL_BANDWIDTH,["withCredentials","useDevicePixelRatio","customPixelRatio","limitRenditionByPlayerDimensions","bandwidth","customTagParsers","customTagMappers","cacheEncryptionKeys","playlistSelector","initialPlaylistSelector","bufferBasedABR","liveRangeSafeTimeDelta","llhls","useForcedSubtitles","useNetworkInformationApi","useDtsForTimestampOffset","exactManifestTimings","leastPixelDiffSelector"].forEach(n=>{typeof this.source_[n]<"u"&&(this.options_[n]=this.source_[n])}),this.limitRenditionByPlayerDimensions=this.options_.limitRenditionByPlayerDimensions,this.useDevicePixelRatio=this.options_.useDevicePixelRatio;const t=this.options_.customPixelRatio;typeof t=="number"&&t>=0&&(this.customPixelRatio=t)}setOptions(e={}){this.setOptions_(e)}src(e,t){if(!e)return;this.setOptions_(),this.options_.src=tge(this.source_.src),this.options_.tech=this.tech_,this.options_.externVhs=ni,this.options_.sourceType=ES(t),this.options_.seekTo=s=>{this.tech_.setCurrentTime(s)},this.options_.player_=this.player_,this.playlistController_=new N0e(this.options_);const n=Dn({liveRangeSafeTimeDelta:Cu},this.options_,{seekable:()=>this.seekable(),media:()=>this.playlistController_.media(),playlistController:this.playlistController_});this.playbackWatcher_=new z0e(n),this.attachStreamingEventListeners_(),this.playlistController_.on("error",()=>{const s=Se.players[this.tech_.options_.playerId];let a=this.playlistController_.error;typeof a=="object"&&!a.code?a.code=3:typeof a=="string"&&(a={message:a,code:3}),s.error(a)});const i=this.options_.bufferBasedABR?ni.movingAverageBandwidthSelector(.55):ni.STANDARD_PLAYLIST_SELECTOR;this.playlistController_.selectPlaylist=this.selectPlaylist?this.selectPlaylist.bind(this):i.bind(this),this.playlistController_.selectInitialPlaylist=ni.INITIAL_PLAYLIST_SELECTOR.bind(this),this.playlists=this.playlistController_.mainPlaylistLoader_,this.mediaSource=this.playlistController_.mediaSource,Object.defineProperties(this,{selectPlaylist:{get(){return this.playlistController_.selectPlaylist},set(s){this.playlistController_.selectPlaylist=s.bind(this)}},throughput:{get(){return this.playlistController_.mainSegmentLoader_.throughput.rate},set(s){this.playlistController_.mainSegmentLoader_.throughput.rate=s,this.playlistController_.mainSegmentLoader_.throughput.count=1}},bandwidth:{get(){let s=this.playlistController_.mainSegmentLoader_.bandwidth;const a=X.navigator.connection||X.navigator.mozConnection||X.navigator.webkitConnection,o=1e7;if(this.options_.useNetworkInformationApi&&a){const l=a.downlink*1e3*1e3;l>=o&&s>=o?s=Math.max(s,l):s=l}return s},set(s){this.playlistController_.mainSegmentLoader_.bandwidth=s,this.playlistController_.mainSegmentLoader_.throughput={rate:0,count:0}}},systemBandwidth:{get(){const s=1/(this.bandwidth||1);let a;return this.throughput>0?a=1/this.throughput:a=0,Math.floor(1/(s+a))},set(){Se.log.error('The "systemBandwidth" property is read-only')}}}),this.options_.bandwidth&&(this.bandwidth=this.options_.bandwidth),this.options_.throughput&&(this.throughput=this.options_.throughput),Object.defineProperties(this.stats,{bandwidth:{get:()=>this.bandwidth||0,enumerable:!0},mediaRequests:{get:()=>this.playlistController_.mediaRequests_()||0,enumerable:!0},mediaRequestsAborted:{get:()=>this.playlistController_.mediaRequestsAborted_()||0,enumerable:!0},mediaRequestsTimedout:{get:()=>this.playlistController_.mediaRequestsTimedout_()||0,enumerable:!0},mediaRequestsErrored:{get:()=>this.playlistController_.mediaRequestsErrored_()||0,enumerable:!0},mediaTransferDuration:{get:()=>this.playlistController_.mediaTransferDuration_()||0,enumerable:!0},mediaBytesTransferred:{get:()=>this.playlistController_.mediaBytesTransferred_()||0,enumerable:!0},mediaSecondsLoaded:{get:()=>this.playlistController_.mediaSecondsLoaded_()||0,enumerable:!0},mediaAppends:{get:()=>this.playlistController_.mediaAppends_()||0,enumerable:!0},mainAppendsToLoadedData:{get:()=>this.playlistController_.mainAppendsToLoadedData_()||0,enumerable:!0},audioAppendsToLoadedData:{get:()=>this.playlistController_.audioAppendsToLoadedData_()||0,enumerable:!0},appendsToLoadedData:{get:()=>this.playlistController_.appendsToLoadedData_()||0,enumerable:!0},timeToLoadedData:{get:()=>this.playlistController_.timeToLoadedData_()||0,enumerable:!0},buffered:{get:()=>Wh(this.tech_.buffered()),enumerable:!0},currentTime:{get:()=>this.tech_.currentTime(),enumerable:!0},currentSource:{get:()=>this.tech_.currentSource_,enumerable:!0},currentTech:{get:()=>this.tech_.name_,enumerable:!0},duration:{get:()=>this.tech_.duration(),enumerable:!0},main:{get:()=>this.playlists.main,enumerable:!0},playerDimensions:{get:()=>this.tech_.currentDimensions(),enumerable:!0},seekable:{get:()=>Wh(this.tech_.seekable()),enumerable:!0},timestamp:{get:()=>Date.now(),enumerable:!0},videoPlaybackQuality:{get:()=>this.tech_.getVideoPlaybackQuality(),enumerable:!0}}),this.tech_.one("canplay",this.playlistController_.setupFirstPlay.bind(this.playlistController_)),this.tech_.on("bandwidthupdate",()=>{this.options_.useBandwidthFromLocalStorage&&ege({bandwidth:this.bandwidth,throughput:Math.round(this.throughput)})}),this.playlistController_.on("selectedinitialmedia",()=>{j0e(this)}),this.playlistController_.sourceUpdater_.on("createdsourcebuffers",()=>{this.setupEme_()}),this.on(this.playlistController_,"progress",function(){this.tech_.trigger("progress")}),this.on(this.playlistController_,"firstplay",function(){this.ignoreNextSeekingEvent_=!0}),this.setupQualityLevels_(),this.tech_.el()&&(this.mediaSourceUrl_=X.URL.createObjectURL(this.playlistController_.mediaSource),(Se.browser.IS_ANY_SAFARI||Se.browser.IS_IOS)&&this.options_.overrideNative&&this.options_.sourceType==="hls"&&typeof this.tech_.addSourceElement=="function"?(this.tech_.addSourceElement(this.mediaSourceUrl_),this.tech_.addSourceElement(this.source_.src)):this.tech_.src(this.mediaSourceUrl_))}createKeySessions_(){const e=this.playlistController_.mediaTypes_.AUDIO.activePlaylistLoader;this.logger_("waiting for EME key session creation"),J0e({player:this.player_,sourceKeySystems:this.source_.keySystems,audioMedia:e&&e.media(),mainPlaylists:this.playlists.main.playlists}).then(()=>{this.logger_("created EME key session"),this.playlistController_.sourceUpdater_.initializedEme()}).catch(t=>{this.logger_("error while creating EME key session",t),this.player_.error({message:"Failed to initialize media keys for EME",code:3})})}handleWaitingForKey_(){this.logger_("waitingforkey fired, attempting to create any new key sessions"),this.createKeySessions_()}setupEme_(){const e=this.playlistController_.mediaTypes_.AUDIO.activePlaylistLoader,t=Z0e({player:this.player_,sourceKeySystems:this.source_.keySystems,media:this.playlists.media(),audioMedia:e&&e.media()});if(this.player_.tech_.on("keystatuschange",n=>{this.playlistController_.updatePlaylistByKeyStatus(n.keyId,n.status)}),this.handleWaitingForKey_=this.handleWaitingForKey_.bind(this),this.player_.tech_.on("waitingforkey",this.handleWaitingForKey_),!t){this.playlistController_.sourceUpdater_.initializedEme();return}this.createKeySessions_()}setupQualityLevels_(){const e=Se.players[this.tech_.options_.playerId];!e||!e.qualityLevels||this.qualityLevels_||(this.qualityLevels_=e.qualityLevels(),this.playlistController_.on("selectedinitialmedia",()=>{X0e(this.qualityLevels_,this)}),this.playlists.on("mediachange",()=>{aj(this.qualityLevels_,this.playlists)}))}static version(){return{"@videojs/http-streaming":ij,"mux.js":W0e,"mpd-parser":q0e,"m3u8-parser":G0e,"aes-decrypter":K0e}}version(){return this.constructor.version()}canChangeType(){return Z$.canChangeType()}play(){this.playlistController_.play()}setCurrentTime(e){this.playlistController_.setCurrentTime(e)}duration(){return this.playlistController_.duration()}seekable(){return this.playlistController_.seekable()}dispose(){this.playbackWatcher_&&this.playbackWatcher_.dispose(),this.playlistController_&&this.playlistController_.dispose(),this.qualityLevels_&&this.qualityLevels_.dispose(),this.tech_&&this.tech_.vhs&&delete this.tech_.vhs,this.mediaSourceUrl_&&X.URL.revokeObjectURL&&(X.URL.revokeObjectURL(this.mediaSourceUrl_),this.mediaSourceUrl_=null),this.tech_&&this.tech_.off("waitingforkey",this.handleWaitingForKey_),super.dispose()}convertToProgramTime(e,t){return sme({playlist:this.playlistController_.media(),time:e,callback:t})}seekToProgramTime(e,t,n=!0,i=2){return F$({programTime:e,playlist:this.playlistController_.media(),retryCount:i,pauseAfterSeek:n,seekTo:this.options_.seekTo,tech:this.options_.tech,callback:t})}setupXhrHooks_(){this.xhr.onRequest=e=>{lj(this.xhr,e)},this.xhr.onResponse=e=>{uj(this.xhr,e)},this.xhr.offRequest=e=>{cj(this.xhr,e)},this.xhr.offResponse=e=>{dj(this.xhr,e)},this.player_.trigger("xhr-hooks-ready")}attachStreamingEventListeners_(){const e=["seekablerangeschanged","bufferedrangeschanged","contentsteeringloadstart","contentsteeringloadcomplete","contentsteeringparsed"],t=["gapjumped","playedrangeschanged"];e.forEach(n=>{this.playlistController_.on(n,i=>{this.player_.trigger(sr({},i))})}),t.forEach(n=>{this.playbackWatcher_.on(n,i=>{this.player_.trigger(sr({},i))})})}};const gb={name:"videojs-http-streaming",VERSION:ij,canHandleSource(r,e={}){const t=Dn(Se.options,e);return!t.vhs.experimentalUseMMS&&!Lu("avc1.4d400d,mp4a.40.2",!1)?!1:gb.canPlayType(r.type,t)},handleSource(r,e,t={}){const n=Dn(Se.options,t);return e.vhs=new hj(r,e,n),e.vhs.xhr=P$(),e.vhs.setupXhrHooks_(),e.vhs.src(r.src,r.type),e.vhs},canPlayType(r,e){const t=ES(r);if(!t)return"";const n=gb.getOverrideNative(e);return!ni.supportsTypeNatively(t)||n?"maybe":""},getOverrideNative(r={}){const{vhs:e={}}=r,t=!(Se.browser.IS_ANY_SAFARI||Se.browser.IS_IOS),{overrideNative:n=t}=e;return n}},nge=()=>Lu("avc1.4d400d,mp4a.40.2",!0);nge()&&Se.getTech("Html5").registerSourceHandler(gb,0);Se.VhsHandler=hj;Se.VhsSourceHandler=gb;Se.Vhs=ni;Se.use||Se.registerComponent("Vhs",ni);Se.options.vhs=Se.options.vhs||{};(!Se.getPlugin||!Se.getPlugin("reloadSourceOnError"))&&Se.registerPlugin("reloadSourceOnError",V0e);var Xy={exports:{}},s3;function ige(){return s3||(s3=1,(function(r,e){function t(l){if(l&&typeof l=="object"){var u=l.which||l.keyCode||l.charCode;u&&(l=u)}if(typeof l=="number")return a[l];var c=String(l),h=n[c.toLowerCase()];if(h)return h;var h=i[c.toLowerCase()];if(h)return h;if(c.length===1)return c.charCodeAt(0)}t.isEventKey=function(u,c){if(u&&typeof u=="object"){var h=u.which||u.keyCode||u.charCode;if(h==null)return!1;if(typeof c=="string"){var f=n[c.toLowerCase()];if(f)return f===h;var f=i[c.toLowerCase()];if(f)return f===h}else if(typeof c=="number")return c===h;return!1}},e=r.exports=t;var n=e.code=e.codes={backspace:8,tab:9,enter:13,shift:16,ctrl:17,alt:18,"pause/break":19,"caps lock":20,esc:27,space:32,"page up":33,"page down":34,end:35,home:36,left:37,up:38,right:39,down:40,insert:45,delete:46,command:91,"left command":91,"right command":93,"numpad *":106,"numpad +":107,"numpad -":109,"numpad .":110,"numpad /":111,"num lock":144,"scroll lock":145,"my computer":182,"my calculator":183,";":186,"=":187,",":188,"-":189,".":190,"/":191,"`":192,"[":219,"\\":220,"]":221,"'":222},i=e.aliases={windows:91,"":16,"":18,"":17,"":91,ctl:17,control:17,option:18,pause:19,break:19,caps:20,return:13,escape:27,spc:32,spacebar:32,pgup:33,pgdn:34,ins:45,del:46,cmd:91};/*!
 * Programatically add the following
 */for(s=97;s<123;s++)n[String.fromCharCode(s)]=s-32;for(var s=48;s<58;s++)n[s-48]=s;for(s=1;s<13;s++)n["f"+s]=s+111;for(s=0;s<10;s++)n["numpad "+s]=s+96;var a=e.names=e.title={};for(s in n)a[n[s]]=s;for(var o in i)n[o]=i[o]})(Xy,Xy.exports)),Xy.exports}var sge=ige();const $r=da(sge);var HC,a3;function age(){if(a3)return HC;a3=1,HC=r;function r(e,t){var n,i=null;try{n=JSON.parse(e,t)}catch(s){i=s}return[i,n]}return HC}var oge=age();const lge=da(oge);var Yy={exports:{}},VC,o3;function uge(){if(o3)return VC;o3=1;var r=Tm(),e=function(i,s){return s===void 0&&(s=!1),function(a,o,l){if(a){i(a);return}if(o.statusCode>=400&&o.statusCode<=599){var u=l;if(s)if(r.TextDecoder){var c=t(o.headers&&o.headers["content-type"]);try{u=new TextDecoder(c).decode(l)}catch{}}else u=String.fromCharCode.apply(null,new Uint8Array(l));i({cause:u});return}i(null,l)}};function t(n){return n===void 0&&(n=""),n.toLowerCase().split(";").reduce(function(i,s){var a=s.split("="),o=a[0],l=a[1];return o.trim()==="charset"?l.trim():i},"utf-8")}return VC=e,VC}var l3;function cge(){if(l3)return Yy.exports;l3=1;var r=Tm(),e=w5(),t=E5();o.httpHandler=uge();/**
 * @license
 * slighly modified parse-headers 2.0.2 <https://github.com/kesla/parse-headers/>
 * Copyright (c) 2014 David Bjrklund
 * Available under the MIT license
 * <https://github.com/kesla/parse-headers/blob/master/LICENCE>
 */var n=function(f){var g={};return f&&f.trim().split(`
`).forEach(function(v){var y=v.indexOf(":"),_=v.slice(0,y).trim().toLowerCase(),C=v.slice(y+1).trim();typeof g[_]>"u"?g[_]=C:Array.isArray(g[_])?g[_].push(C):g[_]=[g[_],C]}),g};Yy.exports=o,Yy.exports.default=o,o.XMLHttpRequest=r.XMLHttpRequest||c,o.XDomainRequest="withCredentials"in new o.XMLHttpRequest?o.XMLHttpRequest:r.XDomainRequest,i(["get","put","post","patch","head","delete"],function(h){o[h==="delete"?"del":h]=function(f,g,v){return g=a(f,g,v),g.method=h.toUpperCase(),l(g)}});function i(h,f){for(var g=0;g<h.length;g++)f(h[g])}function s(h){for(var f in h)if(h.hasOwnProperty(f))return!1;return!0}function a(h,f,g){var v=h;return t(f)?(g=f,typeof h=="string"&&(v={uri:h})):v=e({},f,{uri:h}),v.callback=g,v}function o(h,f,g){return f=a(h,f,g),l(f)}function l(h){if(typeof h.callback>"u")throw new Error("callback argument missing");var f=!1,g=function(Q,ie,ne){f||(f=!0,h.callback(Q,ie,ne))};function v(){E.readyState===4&&setTimeout(C,0)}function y(){var V=void 0;if(E.response?V=E.response:V=E.responseText||u(E),A)try{V=JSON.parse(V)}catch{}return V}function _(V){return clearTimeout($),V instanceof Error||(V=new Error(""+(V||"Unknown XMLHttpRequest Error"))),V.statusCode=0,g(V,W)}function C(){if(!I){var V;clearTimeout($),h.useXDR&&E.status===void 0?V=200:V=E.status===1223?204:E.status;var Q=W,ie=null;return V!==0?(Q={body:y(),statusCode:V,method:P,headers:{},url:k,rawRequest:E},E.getAllResponseHeaders&&(Q.headers=n(E.getAllResponseHeaders()))):ie=new Error("Internal XMLHttpRequest Error"),g(ie,Q,Q.body)}}var E=h.xhr||null;E||(h.cors||h.useXDR?E=new o.XDomainRequest:E=new o.XMLHttpRequest);var D,I,k=E.url=h.uri||h.url,P=E.method=h.method||"GET",N=h.body||h.data,U=E.headers=h.headers||{},B=!!h.sync,A=!1,$,W={body:void 0,headers:{},statusCode:0,method:P,url:k,rawRequest:E};if("json"in h&&h.json!==!1&&(A=!0,U.accept||U.Accept||(U.Accept="application/json"),P!=="GET"&&P!=="HEAD"&&(U["content-type"]||U["Content-Type"]||(U["Content-Type"]="application/json"),N=JSON.stringify(h.json===!0?N:h.json))),E.onreadystatechange=v,E.onload=C,E.onerror=_,E.onprogress=function(){},E.onabort=function(){I=!0},E.ontimeout=_,E.open(P,k,!B,h.username,h.password),B||(E.withCredentials=!!h.withCredentials),!B&&h.timeout>0&&($=setTimeout(function(){if(!I){I=!0,E.abort("timeout");var V=new Error("XMLHttpRequest timeout");V.code="ETIMEDOUT",_(V)}},h.timeout)),E.setRequestHeader)for(D in U)U.hasOwnProperty(D)&&E.setRequestHeader(D,U[D]);else if(h.headers&&!s(h.headers))throw new Error("Headers cannot be set on an XDomainRequest object");return"responseType"in h&&(E.responseType=h.responseType),"beforeSend"in h&&typeof h.beforeSend=="function"&&h.beforeSend(E),E.send(N||null),E}function u(h){try{if(h.responseType==="document")return h.responseXML;var f=h.responseXML&&h.responseXML.documentElement.nodeName==="parsererror";if(h.responseType===""&&!f)return h.responseXML}catch{}return null}function c(){}return Yy.exports}var dge=cge();const fj=da(dge);function pj(){try{var r=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(pj=function(){return!!r})()}function mj(r,e,t){if(pj())return Reflect.construct.apply(null,arguments);var n=[null];n.push.apply(n,e);var i=new(r.bind.apply(r,n));return t&&zp(i,t.prototype),i}function Va(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(e&&e.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),Object.defineProperty(r,"prototype",{writable:!1}),e&&zp(r,e)}var WC={exports:{}},u3;function hge(){return u3||(u3=1,(function(r,e){(function(t){var n=/^(?=((?:[a-zA-Z0-9+\-.]+:)?))\1(?=((?:\/\/[^\/?#]*)?))\2(?=((?:(?:[^?#\/]*\/)*[^;?#\/]*)?))\3((?:;[^?#]*)?)(\?[^#]*)?(#[^]*)?$/,i=/^(?=([^\/?#]*))\1([^]*)$/,s=/(?:\/|^)\.(?=\/)/g,a=/(?:\/|^)\.\.\/(?!\.\.\/)[^\/]*(?=\/)/g,o={buildAbsoluteURL:function(l,u,c){if(c=c||{},l=l.trim(),u=u.trim(),!u){if(!c.alwaysNormalize)return l;var h=o.parseURL(l);if(!h)throw new Error("Error trying to parse base URL.");return h.path=o.normalizePath(h.path),o.buildURLFromParts(h)}var f=o.parseURL(u);if(!f)throw new Error("Error trying to parse relative URL.");if(f.scheme)return c.alwaysNormalize?(f.path=o.normalizePath(f.path),o.buildURLFromParts(f)):u;var g=o.parseURL(l);if(!g)throw new Error("Error trying to parse base URL.");if(!g.netLoc&&g.path&&g.path[0]!=="/"){var v=i.exec(g.path);g.netLoc=v[1],g.path=v[2]}g.netLoc&&!g.path&&(g.path="/");var y={scheme:g.scheme,netLoc:f.netLoc,path:null,params:f.params,query:f.query,fragment:f.fragment};if(!f.netLoc&&(y.netLoc=g.netLoc,f.path[0]!=="/"))if(!f.path)y.path=g.path,f.params||(y.params=g.params,f.query||(y.query=g.query));else{var _=g.path,C=_.substring(0,_.lastIndexOf("/")+1)+f.path;y.path=o.normalizePath(C)}return y.path===null&&(y.path=c.alwaysNormalize?o.normalizePath(f.path):f.path),o.buildURLFromParts(y)},parseURL:function(l){var u=n.exec(l);return u?{scheme:u[1]||"",netLoc:u[2]||"",path:u[3]||"",params:u[4]||"",query:u[5]||"",fragment:u[6]||""}:null},normalizePath:function(l){for(l=l.split("").reverse().join("").replace(s,"");l.length!==(l=l.replace(a,"")).length;);return l.split("").reverse().join("")},buildURLFromParts:function(l){return l.scheme+l.netLoc+l.path+l.params+l.query+l.fragment}};r.exports=o})()})(WC)),WC.exports}var fge=hge();const c3=da(fge);var d3="http://example.com",qS=function(e,t){if(/^[a-z]+:/i.test(t))return t;/^data:/.test(e)&&(e=X.location&&X.location.href||"");var n=typeof X.URL=="function",i=/^\/\//.test(e),s=!X.location&&!/\/\//i.test(e);if(n?e=new X.URL(e,X.location||d3):/\/\//i.test(e)||(e=c3.buildAbsoluteURL(X.location&&X.location.href||"",e)),n){var a=new URL(t,e);return s?a.href.slice(d3.length):i?a.href.slice(a.protocol.length):a.href}return c3.buildAbsoluteURL(e,t)},DA=(function(){function r(){this.listeners={}}var e=r.prototype;return e.on=function(n,i){this.listeners[n]||(this.listeners[n]=[]),this.listeners[n].push(i)},e.off=function(n,i){if(!this.listeners[n])return!1;var s=this.listeners[n].indexOf(i);return this.listeners[n]=this.listeners[n].slice(0),this.listeners[n].splice(s,1),s>-1},e.trigger=function(n){var i=this.listeners[n];if(i)if(arguments.length===2)for(var s=i.length,a=0;a<s;++a)i[a].call(this,arguments[1]);else for(var o=Array.prototype.slice.call(arguments,1),l=i.length,u=0;u<l;++u)i[u].apply(this,o)},e.dispose=function(){this.listeners={}},e.pipe=function(n){this.on("data",function(i){n.push(i)})},r})(),pge=function(e){return X.atob?X.atob(e):Buffer.from(e,"base64").toString("binary")};function gj(r){for(var e=pge(r),t=new Uint8Array(e.length),n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}/*! @name m3u8-parser @version 4.8.0 @license Apache-2.0 */var mge=(function(r){Ht(e,r);function e(){var n;return n=r.call(this)||this,n.buffer="",n}var t=e.prototype;return t.push=function(i){var s;for(this.buffer+=i,s=this.buffer.indexOf(`
`);s>-1;s=this.buffer.indexOf(`
`))this.trigger("data",this.buffer.substring(0,s)),this.buffer=this.buffer.substring(s+1)},e})(DA),gge="	",qC=function(e){var t=/([0-9.]*)?@?([0-9.]*)?/.exec(e||""),n={};return t[1]&&(n.length=parseInt(t[1],10)),t[2]&&(n.offset=parseInt(t[2],10)),n},vge=function(){var e="[^=]*",t='"[^"]*"|[^,]*',n="(?:"+e+")=(?:"+t+")";return new RegExp("(?:^|,)("+n+")")},El=function(e){for(var t=e.split(vge()),n={},i=t.length,s;i--;)t[i]!==""&&(s=/([^=]*)=(.*)/.exec(t[i]).slice(1),s[0]=s[0].replace(/^\s+|\s+$/g,""),s[1]=s[1].replace(/^\s+|\s+$/g,""),s[1]=s[1].replace(/^['"](.*)['"]$/g,"$1"),n[s[0]]=s[1]);return n},yge=(function(r){Ht(e,r);function e(){var n;return n=r.call(this)||this,n.customParsers=[],n.tagMappers=[],n}var t=e.prototype;return t.push=function(i){var s=this,a,o;if(i=i.trim(),i.length!==0){if(i[0]!=="#"){this.trigger("data",{type:"uri",uri:i});return}var l=this.tagMappers.reduce(function(u,c){var h=c(i);return h===i?u:u.concat([h])},[i]);l.forEach(function(u){for(var c=0;c<s.customParsers.length;c++)if(s.customParsers[c].call(s,u))return;if(u.indexOf("#EXT")!==0){s.trigger("data",{type:"comment",text:u.slice(1)});return}if(u=u.replace("\r",""),a=/^#EXTM3U/.exec(u),a){s.trigger("data",{type:"tag",tagType:"m3u"});return}if(a=/^#EXTINF:?([0-9\.]*)?,?(.*)?$/.exec(u),a){o={type:"tag",tagType:"inf"},a[1]&&(o.duration=parseFloat(a[1])),a[2]&&(o.title=a[2]),s.trigger("data",o);return}if(a=/^#EXT-X-TARGETDURATION:?([0-9.]*)?/.exec(u),a){o={type:"tag",tagType:"targetduration"},a[1]&&(o.duration=parseInt(a[1],10)),s.trigger("data",o);return}if(a=/^#EXT-X-VERSION:?([0-9.]*)?/.exec(u),a){o={type:"tag",tagType:"version"},a[1]&&(o.version=parseInt(a[1],10)),s.trigger("data",o);return}if(a=/^#EXT-X-MEDIA-SEQUENCE:?(\-?[0-9.]*)?/.exec(u),a){o={type:"tag",tagType:"media-sequence"},a[1]&&(o.number=parseInt(a[1],10)),s.trigger("data",o);return}if(a=/^#EXT-X-DISCONTINUITY-SEQUENCE:?(\-?[0-9.]*)?/.exec(u),a){o={type:"tag",tagType:"discontinuity-sequence"},a[1]&&(o.number=parseInt(a[1],10)),s.trigger("data",o);return}if(a=/^#EXT-X-PLAYLIST-TYPE:?(.*)?$/.exec(u),a){o={type:"tag",tagType:"playlist-type"},a[1]&&(o.playlistType=a[1]),s.trigger("data",o);return}if(a=/^#EXT-X-BYTERANGE:?(.*)?$/.exec(u),a){o=sr(qC(a[1]),{type:"tag",tagType:"byterange"}),s.trigger("data",o);return}if(a=/^#EXT-X-ALLOW-CACHE:?(YES|NO)?/.exec(u),a){o={type:"tag",tagType:"allow-cache"},a[1]&&(o.allowed=!/NO/.test(a[1])),s.trigger("data",o);return}if(a=/^#EXT-X-MAP:?(.*)$/.exec(u),a){if(o={type:"tag",tagType:"map"},a[1]){var h=El(a[1]);h.URI&&(o.uri=h.URI),h.BYTERANGE&&(o.byterange=qC(h.BYTERANGE))}s.trigger("data",o);return}if(a=/^#EXT-X-STREAM-INF:?(.*)$/.exec(u),a){if(o={type:"tag",tagType:"stream-inf"},a[1]){if(o.attributes=El(a[1]),o.attributes.RESOLUTION){var f=o.attributes.RESOLUTION.split("x"),g={};f[0]&&(g.width=parseInt(f[0],10)),f[1]&&(g.height=parseInt(f[1],10)),o.attributes.RESOLUTION=g}o.attributes.BANDWIDTH&&(o.attributes.BANDWIDTH=parseInt(o.attributes.BANDWIDTH,10)),o.attributes["FRAME-RATE"]&&(o.attributes["FRAME-RATE"]=parseFloat(o.attributes["FRAME-RATE"])),o.attributes["PROGRAM-ID"]&&(o.attributes["PROGRAM-ID"]=parseInt(o.attributes["PROGRAM-ID"],10))}s.trigger("data",o);return}if(a=/^#EXT-X-MEDIA:?(.*)$/.exec(u),a){o={type:"tag",tagType:"media"},a[1]&&(o.attributes=El(a[1])),s.trigger("data",o);return}if(a=/^#EXT-X-ENDLIST/.exec(u),a){s.trigger("data",{type:"tag",tagType:"endlist"});return}if(a=/^#EXT-X-DISCONTINUITY/.exec(u),a){s.trigger("data",{type:"tag",tagType:"discontinuity"});return}if(a=/^#EXT-X-PROGRAM-DATE-TIME:?(.*)$/.exec(u),a){o={type:"tag",tagType:"program-date-time"},a[1]&&(o.dateTimeString=a[1],o.dateTimeObject=new Date(a[1])),s.trigger("data",o);return}if(a=/^#EXT-X-KEY:?(.*)$/.exec(u),a){o={type:"tag",tagType:"key"},a[1]&&(o.attributes=El(a[1]),o.attributes.IV&&(o.attributes.IV.substring(0,2).toLowerCase()==="0x"&&(o.attributes.IV=o.attributes.IV.substring(2)),o.attributes.IV=o.attributes.IV.match(/.{8}/g),o.attributes.IV[0]=parseInt(o.attributes.IV[0],16),o.attributes.IV[1]=parseInt(o.attributes.IV[1],16),o.attributes.IV[2]=parseInt(o.attributes.IV[2],16),o.attributes.IV[3]=parseInt(o.attributes.IV[3],16),o.attributes.IV=new Uint32Array(o.attributes.IV))),s.trigger("data",o);return}if(a=/^#EXT-X-START:?(.*)$/.exec(u),a){o={type:"tag",tagType:"start"},a[1]&&(o.attributes=El(a[1]),o.attributes["TIME-OFFSET"]=parseFloat(o.attributes["TIME-OFFSET"]),o.attributes.PRECISE=/YES/.test(o.attributes.PRECISE)),s.trigger("data",o);return}if(a=/^#EXT-X-CUE-OUT-CONT:?(.*)?$/.exec(u),a){o={type:"tag",tagType:"cue-out-cont"},a[1]?o.data=a[1]:o.data="",s.trigger("data",o);return}if(a=/^#EXT-X-CUE-OUT:?(.*)?$/.exec(u),a){o={type:"tag",tagType:"cue-out"},a[1]?o.data=a[1]:o.data="",s.trigger("data",o);return}if(a=/^#EXT-X-CUE-IN:?(.*)?$/.exec(u),a){o={type:"tag",tagType:"cue-in"},a[1]?o.data=a[1]:o.data="",s.trigger("data",o);return}if(a=/^#EXT-X-SKIP:(.*)$/.exec(u),a&&a[1]){o={type:"tag",tagType:"skip"},o.attributes=El(a[1]),o.attributes.hasOwnProperty("SKIPPED-SEGMENTS")&&(o.attributes["SKIPPED-SEGMENTS"]=parseInt(o.attributes["SKIPPED-SEGMENTS"],10)),o.attributes.hasOwnProperty("RECENTLY-REMOVED-DATERANGES")&&(o.attributes["RECENTLY-REMOVED-DATERANGES"]=o.attributes["RECENTLY-REMOVED-DATERANGES"].split(gge)),s.trigger("data",o);return}if(a=/^#EXT-X-PART:(.*)$/.exec(u),a&&a[1]){o={type:"tag",tagType:"part"},o.attributes=El(a[1]),["DURATION"].forEach(function(v){o.attributes.hasOwnProperty(v)&&(o.attributes[v]=parseFloat(o.attributes[v]))}),["INDEPENDENT","GAP"].forEach(function(v){o.attributes.hasOwnProperty(v)&&(o.attributes[v]=/YES/.test(o.attributes[v]))}),o.attributes.hasOwnProperty("BYTERANGE")&&(o.attributes.byterange=qC(o.attributes.BYTERANGE)),s.trigger("data",o);return}if(a=/^#EXT-X-SERVER-CONTROL:(.*)$/.exec(u),a&&a[1]){o={type:"tag",tagType:"server-control"},o.attributes=El(a[1]),["CAN-SKIP-UNTIL","PART-HOLD-BACK","HOLD-BACK"].forEach(function(v){o.attributes.hasOwnProperty(v)&&(o.attributes[v]=parseFloat(o.attributes[v]))}),["CAN-SKIP-DATERANGES","CAN-BLOCK-RELOAD"].forEach(function(v){o.attributes.hasOwnProperty(v)&&(o.attributes[v]=/YES/.test(o.attributes[v]))}),s.trigger("data",o);return}if(a=/^#EXT-X-PART-INF:(.*)$/.exec(u),a&&a[1]){o={type:"tag",tagType:"part-inf"},o.attributes=El(a[1]),["PART-TARGET"].forEach(function(v){o.attributes.hasOwnProperty(v)&&(o.attributes[v]=parseFloat(o.attributes[v]))}),s.trigger("data",o);return}if(a=/^#EXT-X-PRELOAD-HINT:(.*)$/.exec(u),a&&a[1]){o={type:"tag",tagType:"preload-hint"},o.attributes=El(a[1]),["BYTERANGE-START","BYTERANGE-LENGTH"].forEach(function(v){if(o.attributes.hasOwnProperty(v)){o.attributes[v]=parseInt(o.attributes[v],10);var y=v==="BYTERANGE-LENGTH"?"length":"offset";o.attributes.byterange=o.attributes.byterange||{},o.attributes.byterange[y]=o.attributes[v],delete o.attributes[v]}}),s.trigger("data",o);return}if(a=/^#EXT-X-RENDITION-REPORT:(.*)$/.exec(u),a&&a[1]){o={type:"tag",tagType:"rendition-report"},o.attributes=El(a[1]),["LAST-MSN","LAST-PART"].forEach(function(v){o.attributes.hasOwnProperty(v)&&(o.attributes[v]=parseInt(o.attributes[v],10))}),s.trigger("data",o);return}s.trigger("data",{type:"tag",data:u.slice(4)})})}},t.addParser=function(i){var s=this,a=i.expression,o=i.customType,l=i.dataParser,u=i.segment;typeof l!="function"&&(l=function(h){return h}),this.customParsers.push(function(c){var h=a.exec(c);if(h)return s.trigger("data",{type:"custom",data:l(c),customType:o,segment:u}),!0})},t.addTagMapper=function(i){var s=i.expression,a=i.map,o=function(u){return s.test(u)?a(u):u};this.tagMappers.push(o)},e})(DA),xge=function(e){return e.toLowerCase().replace(/-(\w)/g,function(t){return t[1].toUpperCase()})},Jf=function(e){var t={};return Object.keys(e).forEach(function(n){t[xge(n)]=e[n]}),t},GC=function(e){var t=e.serverControl,n=e.targetDuration,i=e.partTargetDuration;if(t){var s="#EXT-X-SERVER-CONTROL",a="holdBack",o="partHoldBack",l=n&&n*3,u=i&&i*2;n&&!t.hasOwnProperty(a)&&(t[a]=l,this.trigger("info",{message:s+" defaulting HOLD-BACK to targetDuration * 3 ("+l+")."})),l&&t[a]<l&&(this.trigger("warn",{message:s+" clamping HOLD-BACK ("+t[a]+") to targetDuration * 3 ("+l+")"}),t[a]=l),i&&!t.hasOwnProperty(o)&&(t[o]=i*3,this.trigger("info",{message:s+" defaulting PART-HOLD-BACK to partTargetDuration * 3 ("+t[o]+")."})),i&&t[o]<u&&(this.trigger("warn",{message:s+" clamping PART-HOLD-BACK ("+t[o]+") to partTargetDuration * 2 ("+u+")."}),t[o]=u)}},_ge=(function(r){Ht(e,r);function e(){var n;n=r.call(this)||this,n.lineStream=new mge,n.parseStream=new yge,n.lineStream.pipe(n.parseStream);var i=We(n),s=[],a={},o,l,u=!1,c=function(){},h={AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},f="urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed",g=0;n.manifest={allowCache:!0,discontinuityStarts:[],segments:[]};var v=0,y=0;return n.on("end",function(){a.uri||!a.parts&&!a.preloadHints||(!a.map&&o&&(a.map=o),!a.key&&l&&(a.key=l),!a.timeline&&typeof g=="number"&&(a.timeline=g),n.manifest.preloadSegment=a)}),n.parseStream.on("data",function(_){var C,E;({tag:function(){({version:function(){_.version&&(this.manifest.version=_.version)},"allow-cache":function(){this.manifest.allowCache=_.allowed,"allowed"in _||(this.trigger("info",{message:"defaulting allowCache to YES"}),this.manifest.allowCache=!0)},byterange:function(){var k={};"length"in _&&(a.byterange=k,k.length=_.length,"offset"in _||(_.offset=v)),"offset"in _&&(a.byterange=k,k.offset=_.offset),v=k.offset+k.length},endlist:function(){this.manifest.endList=!0},inf:function(){"mediaSequence"in this.manifest||(this.manifest.mediaSequence=0,this.trigger("info",{message:"defaulting media sequence to zero"})),"discontinuitySequence"in this.manifest||(this.manifest.discontinuitySequence=0,this.trigger("info",{message:"defaulting discontinuity sequence to zero"})),_.duration>0&&(a.duration=_.duration),_.duration===0&&(a.duration=.01,this.trigger("info",{message:"updating zero segment duration to a small value"})),this.manifest.segments=s},key:function(){if(!_.attributes){this.trigger("warn",{message:"ignoring key declaration without attribute list"});return}if(_.attributes.METHOD==="NONE"){l=null;return}if(!_.attributes.URI){this.trigger("warn",{message:"ignoring key declaration without URI"});return}if(_.attributes.KEYFORMAT==="com.apple.streamingkeydelivery"){this.manifest.contentProtection=this.manifest.contentProtection||{},this.manifest.contentProtection["com.apple.fps.1_0"]={attributes:_.attributes};return}if(_.attributes.KEYFORMAT==="com.microsoft.playready"){this.manifest.contentProtection=this.manifest.contentProtection||{},this.manifest.contentProtection["com.microsoft.playready"]={uri:_.attributes.URI};return}if(_.attributes.KEYFORMAT===f){var k=["SAMPLE-AES","SAMPLE-AES-CTR","SAMPLE-AES-CENC"];if(k.indexOf(_.attributes.METHOD)===-1){this.trigger("warn",{message:"invalid key method provided for Widevine"});return}if(_.attributes.METHOD==="SAMPLE-AES-CENC"&&this.trigger("warn",{message:"SAMPLE-AES-CENC is deprecated, please use SAMPLE-AES-CTR instead"}),_.attributes.URI.substring(0,23)!=="data:text/plain;base64,"){this.trigger("warn",{message:"invalid key URI provided for Widevine"});return}if(!(_.attributes.KEYID&&_.attributes.KEYID.substring(0,2)==="0x")){this.trigger("warn",{message:"invalid key ID provided for Widevine"});return}this.manifest.contentProtection=this.manifest.contentProtection||{},this.manifest.contentProtection["com.widevine.alpha"]={attributes:{schemeIdUri:_.attributes.KEYFORMAT,keyId:_.attributes.KEYID.substring(2)},pssh:gj(_.attributes.URI.split(",")[1])};return}_.attributes.METHOD||this.trigger("warn",{message:"defaulting key method to AES-128"}),l={method:_.attributes.METHOD||"AES-128",uri:_.attributes.URI},typeof _.attributes.IV<"u"&&(l.iv=_.attributes.IV)},"media-sequence":function(){if(!isFinite(_.number)){this.trigger("warn",{message:"ignoring invalid media sequence: "+_.number});return}this.manifest.mediaSequence=_.number},"discontinuity-sequence":function(){if(!isFinite(_.number)){this.trigger("warn",{message:"ignoring invalid discontinuity sequence: "+_.number});return}this.manifest.discontinuitySequence=_.number,g=_.number},"playlist-type":function(){if(!/VOD|EVENT/.test(_.playlistType)){this.trigger("warn",{message:"ignoring unknown playlist type: "+_.playlist});return}this.manifest.playlistType=_.playlistType},map:function(){o={},_.uri&&(o.uri=_.uri),_.byterange&&(o.byterange=_.byterange),l&&(o.key=l)},"stream-inf":function(){if(this.manifest.playlists=s,this.manifest.mediaGroups=this.manifest.mediaGroups||h,!_.attributes){this.trigger("warn",{message:"ignoring empty stream-inf attributes"});return}a.attributes||(a.attributes={}),sr(a.attributes,_.attributes)},media:function(){if(this.manifest.mediaGroups=this.manifest.mediaGroups||h,!(_.attributes&&_.attributes.TYPE&&_.attributes["GROUP-ID"]&&_.attributes.NAME)){this.trigger("warn",{message:"ignoring incomplete or missing media group"});return}var k=this.manifest.mediaGroups[_.attributes.TYPE];k[_.attributes["GROUP-ID"]]=k[_.attributes["GROUP-ID"]]||{},C=k[_.attributes["GROUP-ID"]],E={default:/yes/i.test(_.attributes.DEFAULT)},E.default?E.autoselect=!0:E.autoselect=/yes/i.test(_.attributes.AUTOSELECT),_.attributes.LANGUAGE&&(E.language=_.attributes.LANGUAGE),_.attributes.URI&&(E.uri=_.attributes.URI),_.attributes["INSTREAM-ID"]&&(E.instreamId=_.attributes["INSTREAM-ID"]),_.attributes.CHARACTERISTICS&&(E.characteristics=_.attributes.CHARACTERISTICS),_.attributes.FORCED&&(E.forced=/yes/i.test(_.attributes.FORCED)),C[_.attributes.NAME]=E},discontinuity:function(){g+=1,a.discontinuity=!0,this.manifest.discontinuityStarts.push(s.length)},"program-date-time":function(){typeof this.manifest.dateTimeString>"u"&&(this.manifest.dateTimeString=_.dateTimeString,this.manifest.dateTimeObject=_.dateTimeObject),a.dateTimeString=_.dateTimeString,a.dateTimeObject=_.dateTimeObject},targetduration:function(){if(!isFinite(_.duration)||_.duration<0){this.trigger("warn",{message:"ignoring invalid target duration: "+_.duration});return}this.manifest.targetDuration=_.duration,GC.call(this,this.manifest)},start:function(){if(!_.attributes||isNaN(_.attributes["TIME-OFFSET"])){this.trigger("warn",{message:"ignoring start declaration without appropriate attribute list"});return}this.manifest.start={timeOffset:_.attributes["TIME-OFFSET"],precise:_.attributes.PRECISE}},"cue-out":function(){a.cueOut=_.data},"cue-out-cont":function(){a.cueOutCont=_.data},"cue-in":function(){a.cueIn=_.data},skip:function(){this.manifest.skip=Jf(_.attributes),this.warnOnMissingAttributes_("#EXT-X-SKIP",_.attributes,["SKIPPED-SEGMENTS"])},part:function(){var k=this;u=!0;var P=this.manifest.segments.length,N=Jf(_.attributes);a.parts=a.parts||[],a.parts.push(N),N.byterange&&(N.byterange.hasOwnProperty("offset")||(N.byterange.offset=y),y=N.byterange.offset+N.byterange.length);var U=a.parts.length-1;this.warnOnMissingAttributes_("#EXT-X-PART #"+U+" for segment #"+P,_.attributes,["URI","DURATION"]),this.manifest.renditionReports&&this.manifest.renditionReports.forEach(function(B,A){B.hasOwnProperty("lastPart")||k.trigger("warn",{message:"#EXT-X-RENDITION-REPORT #"+A+" lacks required attribute(s): LAST-PART"})})},"server-control":function(){var k=this.manifest.serverControl=Jf(_.attributes);k.hasOwnProperty("canBlockReload")||(k.canBlockReload=!1,this.trigger("info",{message:"#EXT-X-SERVER-CONTROL defaulting CAN-BLOCK-RELOAD to false"})),GC.call(this,this.manifest),k.canSkipDateranges&&!k.hasOwnProperty("canSkipUntil")&&this.trigger("warn",{message:"#EXT-X-SERVER-CONTROL lacks required attribute CAN-SKIP-UNTIL which is required when CAN-SKIP-DATERANGES is set"})},"preload-hint":function(){var k=this.manifest.segments.length,P=Jf(_.attributes),N=P.type&&P.type==="PART";a.preloadHints=a.preloadHints||[],a.preloadHints.push(P),P.byterange&&(P.byterange.hasOwnProperty("offset")||(P.byterange.offset=N?y:0,N&&(y=P.byterange.offset+P.byterange.length)));var U=a.preloadHints.length-1;if(this.warnOnMissingAttributes_("#EXT-X-PRELOAD-HINT #"+U+" for segment #"+k,_.attributes,["TYPE","URI"]),!!P.type)for(var B=0;B<a.preloadHints.length-1;B++){var A=a.preloadHints[B];A.type&&A.type===P.type&&this.trigger("warn",{message:"#EXT-X-PRELOAD-HINT #"+U+" for segment #"+k+" has the same TYPE "+P.type+" as preload hint #"+B})}},"rendition-report":function(){var k=Jf(_.attributes);this.manifest.renditionReports=this.manifest.renditionReports||[],this.manifest.renditionReports.push(k);var P=this.manifest.renditionReports.length-1,N=["LAST-MSN","URI"];u&&N.push("LAST-PART"),this.warnOnMissingAttributes_("#EXT-X-RENDITION-REPORT #"+P,_.attributes,N)},"part-inf":function(){this.manifest.partInf=Jf(_.attributes),this.warnOnMissingAttributes_("#EXT-X-PART-INF",_.attributes,["PART-TARGET"]),this.manifest.partInf.partTarget&&(this.manifest.partTargetDuration=this.manifest.partInf.partTarget),GC.call(this,this.manifest)}}[_.tagType]||c).call(i)},uri:function(){a.uri=_.uri,s.push(a),this.manifest.targetDuration&&!("duration"in a)&&(this.trigger("warn",{message:"defaulting segment duration to the target duration"}),a.duration=this.manifest.targetDuration),l&&(a.key=l),a.timeline=g,o&&(a.map=o),y=0,a={}},comment:function(){},custom:function(){_.segment?(a.custom=a.custom||{},a.custom[_.customType]=_.data):(this.manifest.custom=this.manifest.custom||{},this.manifest.custom[_.customType]=_.data)}})[_.type].call(i)}),n}var t=e.prototype;return t.warnOnMissingAttributes_=function(i,s,a){var o=[];a.forEach(function(l){s.hasOwnProperty(l)||o.push(l)}),o.length&&this.trigger("warn",{message:i+" lacks required attribute(s): "+o.join(", ")})},t.push=function(i){this.lineStream.push(i)},t.end=function(){this.lineStream.push(`
`),this.trigger("end")},t.addParser=function(i){this.parseStream.addParser(i)},t.addTagMapper=function(i){this.parseStream.addTagMapper(i)},e})(DA),nf={mp4:/^(av0?1|avc0?[1234]|vp0?9|flac|opus|mp3|mp4a|mp4v|stpp.ttml.im1t)/,webm:/^(vp0?[89]|av0?1|opus|vorbis)/,ogg:/^(vp0?[89]|theora|flac|opus|vorbis)/,video:/^(av0?1|avc0?[1234]|vp0?[89]|hvc1|hev1|theora|mp4v)/,audio:/^(mp4a|flac|vorbis|opus|ac-[34]|ec-3|alac|mp3|speex|aac)/,text:/^(stpp.ttml.im1t)/,muxerVideo:/^(avc0?1)/,muxerAudio:/^(mp4a)/,muxerText:/a^/},bge=["video","audio","text"],h3=["Video","Audio","Text"],vj=function(e){return e&&e.replace(/avc1\.(\d+)\.(\d+)/i,function(t,n,i){var s=("00"+Number(n).toString(16)).slice(-2),a=("00"+Number(i).toString(16)).slice(-2);return"avc1."+s+"00"+a})},hu=function(e){e===void 0&&(e="");var t=e.split(","),n=[];return t.forEach(function(i){i=i.trim();var s;bge.forEach(function(a){var o=nf[a].exec(i.toLowerCase());if(!(!o||o.length<=1)){s=a;var l=i.substring(0,o[1].length),u=i.replace(l,"");n.push({type:l,details:u,mediaType:a})}}),s||n.push({type:i,details:"",mediaType:"unknown"})}),n},Sge=function(e,t){if(!e.mediaGroups.AUDIO||!t)return null;var n=e.mediaGroups.AUDIO[t];if(!n)return null;for(var i in n){var s=n[i];if(s.default&&s.playlists)return hu(s.playlists[0].attributes.CODECS)}return null},yj=function(e){return e===void 0&&(e=""),nf.audio.test(e.trim().toLowerCase())},Tge=function(e){return e===void 0&&(e=""),nf.text.test(e.trim().toLowerCase())},Ng=function(e){if(!(!e||typeof e!="string")){var t=e.toLowerCase().split(",").map(function(s){return vj(s.trim())}),n="video";t.length===1&&yj(t[0])?n="audio":t.length===1&&Tge(t[0])&&(n="application");var i="mp4";return t.every(function(s){return nf.mp4.test(s)})?i="mp4":t.every(function(s){return nf.webm.test(s)})?i="webm":t.every(function(s){return nf.ogg.test(s)})&&(i="ogg"),n+"/"+i+';codecs="'+e+'"'}},d_=function(e){return e===void 0&&(e=""),X.MediaSource&&X.MediaSource.isTypeSupported&&X.MediaSource.isTypeSupported(Ng(e))||!1},KC=function(e){return e===void 0&&(e=""),e.toLowerCase().split(",").every(function(t){t=t.trim();for(var n=0;n<h3.length;n++){var i=h3[n];if(nf["muxer"+i].test(t))return!0}return!1})},f3="mp4a.40.2",Cge="avc1.4d400d",wge=/^(audio|video|application)\/(x-|vnd\.apple\.)?mpegurl/i,Ege=/^application\/dash\+xml/i,xj=function(e){return wge.test(e)?"hls":Ege.test(e)?"dash":e==="application/vnd.videojs.vhs+json"?"vhs-json":null},kge=function(e){return e.toString(2).length},Age=function(e){return Math.ceil(kge(e)/8)},_j=function(e){return ArrayBuffer.isView==="function"?ArrayBuffer.isView(e):e&&e.buffer instanceof ArrayBuffer},Dge=function(e){return _j(e)},Sr=function(e){return e instanceof Uint8Array?e:(!Array.isArray(e)&&!Dge(e)&&!(e instanceof ArrayBuffer)&&(typeof e!="number"||typeof e=="number"&&e!==e?e=0:e=[e]),new Uint8Array(e&&e.buffer||e,e&&e.byteOffset||0,e&&e.byteLength||0))},vs=X.BigInt||Number,J2=[vs("0x1"),vs("0x100"),vs("0x10000"),vs("0x1000000"),vs("0x100000000"),vs("0x10000000000"),vs("0x1000000000000"),vs("0x100000000000000"),vs("0x10000000000000000")];(function(){var r=new Uint16Array([65484]),e=new Uint8Array(r.buffer,r.byteOffset,r.byteLength);return e[0]===255?"big":e[0]===204?"little":"unknown"})();var Ige=function(e,t){var n=t===void 0?{}:t,i=n.signed,s=i===void 0?!1:i,a=n.le,o=a===void 0?!1:a;e=Sr(e);var l=o?"reduce":"reduceRight",u=e[l]?e[l]:Array.prototype[l],c=u.call(e,function(f,g,v){var y=o?v:Math.abs(v+1-e.length);return f+vs(g)*J2[y]},vs(0));if(s){var h=J2[e.length]/vs(2)-vs(1);c=vs(c),c>h&&(c-=h,c-=h,c-=vs(2))}return Number(c)},Pge=function(e,t){var n={},i=n.le,s=i===void 0?!1:i;(typeof e!="bigint"&&typeof e!="number"||typeof e=="number"&&e!==e)&&(e=0),e=vs(e);for(var a=Age(e),o=new Uint8Array(new ArrayBuffer(a)),l=0;l<a;l++){var u=s?l:Math.abs(l+1-o.length);o[u]=Number(e/J2[l]&vs(255)),e<0&&(o[u]=Math.abs(~o[u]),o[u]-=l===0?1:2)}return o},bj=function(e,t){if(typeof e!="string"&&e&&typeof e.toString=="function"&&(e=e.toString()),typeof e!="string")return new Uint8Array;t||(e=unescape(encodeURIComponent(e)));for(var n=new Uint8Array(e.length),i=0;i<e.length;i++)n[i]=e.charCodeAt(i);return n},Rge=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(t=t.filter(function(o){return o&&(o.byteLength||o.length)&&typeof o!="string"}),t.length<=1)return Sr(t[0]);var i=t.reduce(function(o,l,u){return o+(l.byteLength||l.length)},0),s=new Uint8Array(i),a=0;return t.forEach(function(o){o=Sr(o),s.set(o,a),a+=o.byteLength}),s},Jn=function(e,t,n){var i=n===void 0?{}:n,s=i.offset,a=s===void 0?0:s,o=i.mask,l=o===void 0?[]:o;e=Sr(e),t=Sr(t);var u=t.every?t.every:Array.prototype.every;return t.length&&e.length-a>=t.length&&u.call(t,function(c,h){var f=l[h]?l[h]&e[a+h]:e[a+h];return c===f})},Lge=function(e,t,n){t.forEach(function(i){for(var s in e.mediaGroups[i])for(var a in e.mediaGroups[i][s]){var o=e.mediaGroups[i][s][a];n(o,i,s,a)}})};/*! @name mpd-parser @version 0.22.1 @license Apache-2.0 */var p3=function(e){return!!e&&typeof e=="object"},sa=function r(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce(function(i,s){return typeof s!="object"||Object.keys(s).forEach(function(a){Array.isArray(i[a])&&Array.isArray(s[a])?i[a]=i[a].concat(s[a]):p3(i[a])&&p3(s[a])?i[a]=r(i[a],s[a]):i[a]=s[a]}),i},{})},Sj=function(e){return Object.keys(e).map(function(t){return e[t]})},Oge=function(e,t){for(var n=[],i=e;i<t;i++)n.push(i);return n},GS=function(e){return e.reduce(function(t,n){return t.concat(n)},[])},Tj=function(e){if(!e.length)return[];for(var t=[],n=0;n<e.length;n++)t.push(e[n]);return t},Mge=function(e,t){return e.reduce(function(n,i,s){return i[t]&&n.push(s),n},[])},Z2=function(e,t){for(var n=0;n<e.length;n++)if(t(e[n]))return n;return-1},Fge=function(e,t){return Sj(e.reduce(function(n,i){return i.forEach(function(s){n[t(s)]=s}),n},{}))},am={INVALID_NUMBER_OF_PERIOD:"INVALID_NUMBER_OF_PERIOD",DASH_EMPTY_MANIFEST:"DASH_EMPTY_MANIFEST",DASH_INVALID_XML:"DASH_INVALID_XML",NO_BASE_URL:"NO_BASE_URL",SEGMENT_TIME_UNSPECIFIED:"SEGMENT_TIME_UNSPECIFIED",UNSUPPORTED_UTC_TIMING_SCHEME:"UNSUPPORTED_UTC_TIMING_SCHEME"},Ug=function(e){var t=e.baseUrl,n=t===void 0?"":t,i=e.source,s=i===void 0?"":i,a=e.range,o=a===void 0?"":a,l=e.indexRange,u=l===void 0?"":l,c={uri:s,resolvedUri:qS(n||"",s)};if(o||u){var h=o||u,f=h.split("-"),g=X.BigInt?X.BigInt(f[0]):parseInt(f[0],10),v=X.BigInt?X.BigInt(f[1]):parseInt(f[1],10);g<Number.MAX_SAFE_INTEGER&&typeof g=="bigint"&&(g=Number(g)),v<Number.MAX_SAFE_INTEGER&&typeof v=="bigint"&&(v=Number(v));var y;typeof v=="bigint"||typeof g=="bigint"?y=X.BigInt(v)-X.BigInt(g)+X.BigInt(1):y=v-g+1,typeof y=="bigint"&&y<Number.MAX_SAFE_INTEGER&&(y=Number(y)),c.byterange={length:y,offset:g}}return c},Bge=function(e){var t;return typeof e.offset=="bigint"||typeof e.length=="bigint"?t=X.BigInt(e.offset)+X.BigInt(e.length)-X.BigInt(1):t=e.offset+e.length-1,e.offset+"-"+t},m3=function(e){return e&&typeof e!="number"&&(e=parseInt(e,10)),isNaN(e)?null:e},Nge={static:function(e){var t=e.duration,n=e.timescale,i=n===void 0?1:n,s=e.sourceDuration,a=e.periodDuration,o=m3(e.endNumber),l=t/i;return typeof o=="number"?{start:0,end:o}:typeof a=="number"?{start:0,end:a/l}:{start:0,end:s/l}},dynamic:function(e){var t=e.NOW,n=e.clientOffset,i=e.availabilityStartTime,s=e.timescale,a=s===void 0?1:s,o=e.duration,l=e.periodStart,u=l===void 0?0:l,c=e.minimumUpdatePeriod,h=c===void 0?0:c,f=e.timeShiftBufferDepth,g=f===void 0?1/0:f,v=m3(e.endNumber),y=(t+n)/1e3,_=i+u,C=y+h,E=C-_,D=Math.ceil(E*a/o),I=Math.floor((y-_-g)*a/o),k=Math.floor((y-_)*a/o);return{start:Math.max(0,I),end:typeof v=="number"?v:Math.min(D,k)}}},Uge=function(e){return function(t){var n=e.duration,i=e.timescale,s=i===void 0?1:i,a=e.periodStart,o=e.startNumber,l=o===void 0?1:o;return{number:l+t,duration:n/s,timeline:a,time:t*n}}},IA=function(e){var t=e.type,n=e.duration,i=e.timescale,s=i===void 0?1:i,a=e.periodDuration,o=e.sourceDuration,l=Nge[t](e),u=l.start,c=l.end,h=Oge(u,c).map(Uge(e));if(t==="static"){var f=h.length-1,g=typeof a=="number"?a:o;h[f].duration=g-n/s*f}return h},Cj=function(e){var t=e.baseUrl,n=e.initialization,i=n===void 0?{}:n,s=e.sourceDuration,a=e.indexRange,o=a===void 0?"":a,l=e.periodStart,u=e.presentationTime,c=e.number,h=c===void 0?0:c,f=e.duration;if(!t)throw new Error(am.NO_BASE_URL);var g=Ug({baseUrl:t,source:i.sourceURL,range:i.range}),v=Ug({baseUrl:t,source:t,indexRange:o});if(v.map=g,f){var y=IA(e);y.length&&(v.duration=y[0].duration,v.timeline=y[0].timeline)}else s&&(v.duration=s,v.timeline=l);return v.presentationTime=u||l,v.number=h,[v]},PA=function(e,t,n){var i=e.sidx.map?e.sidx.map:null,s=e.sidx.duration,a=e.timeline||0,o=e.sidx.byterange,l=o.offset+o.length,u=t.timescale,c=t.references.filter(function(B){return B.referenceType!==1}),h=[],f=e.endList?"static":"dynamic",g=e.sidx.timeline,v=g,y=e.mediaSequence||0,_;typeof t.firstOffset=="bigint"?_=X.BigInt(l)+t.firstOffset:_=l+t.firstOffset;for(var C=0;C<c.length;C++){var E=t.references[C],D=E.referencedSize,I=E.subsegmentDuration,k=void 0;typeof _=="bigint"?k=_+X.BigInt(D)-X.BigInt(1):k=_+D-1;var P=_+"-"+k,N={baseUrl:n,timescale:u,timeline:a,periodStart:g,presentationTime:v,number:y,duration:I,sourceDuration:s,indexRange:P,type:f},U=Cj(N)[0];i&&(U.map=i),h.push(U),typeof _=="bigint"?_+=X.BigInt(D):_+=D,v+=I/u,y++}return e.segments=h,e},$ge=["AUDIO","SUBTITLES"],jge=1/60,wj=function(e){return Fge(e,function(t){var n=t.timeline;return n}).sort(function(t,n){return t.timeline>n.timeline?1:-1})},zge=function(e,t){for(var n=0;n<e.length;n++)if(e[n].attributes.NAME===t)return e[n];return null},g3=function(e){var t=[];return Lge(e,$ge,function(n,i,s,a){t=t.concat(n.playlists||[])}),t},v3=function(e){var t=e.playlist,n=e.mediaSequence;t.mediaSequence=n,t.segments.forEach(function(i,s){i.number=t.mediaSequence+s})},Hge=function(e){var t=e.oldPlaylists,n=e.newPlaylists,i=e.timelineStarts;n.forEach(function(s){s.discontinuitySequence=Z2(i,function(c){var h=c.timeline;return h===s.timeline});var a=zge(t,s.attributes.NAME);if(a&&!s.sidx){var o=s.segments[0],l=Z2(a.segments,function(c){return Math.abs(c.presentationTime-o.presentationTime)<jge});if(l===-1){v3({playlist:s,mediaSequence:a.mediaSequence+a.segments.length}),s.segments[0].discontinuity=!0,s.discontinuityStarts.unshift(0),(!a.segments.length&&s.timeline>a.timeline||a.segments.length&&s.timeline>a.segments[a.segments.length-1].timeline)&&s.discontinuitySequence--;return}var u=a.segments[l];u.discontinuity&&!o.discontinuity&&(o.discontinuity=!0,s.discontinuityStarts.unshift(0),s.discontinuitySequence--),v3({playlist:s,mediaSequence:a.segments[l].number})}})},Vge=function(e){var t=e.oldManifest,n=e.newManifest,i=t.playlists.concat(g3(t)),s=n.playlists.concat(g3(n));return n.timelineStarts=wj([t.timelineStarts,n.timelineStarts]),Hge({oldPlaylists:i,newPlaylists:s,timelineStarts:n.timelineStarts}),n},KS=function(e){return e&&e.uri+"-"+Bge(e.byterange)},XC=function(e){var t=Sj(e.reduce(function(n,i){var s=i.attributes.id+(i.attributes.lang||"");if(!n[s])n[s]=i,n[s].attributes.timelineStarts=[];else{if(i.segments){var a;i.segments[0]&&(i.segments[0].discontinuity=!0),(a=n[s].segments).push.apply(a,i.segments)}i.attributes.contentProtection&&(n[s].attributes.contentProtection=i.attributes.contentProtection)}return n[s].attributes.timelineStarts.push({start:i.attributes.periodStart,timeline:i.attributes.periodStart}),n},{}));return t.map(function(n){return n.discontinuityStarts=Mge(n.segments||[],"discontinuity"),n})},RA=function(e,t){var n=KS(e.sidx),i=n&&t[n]&&t[n].sidx;return i&&PA(e,i,e.sidx.resolvedUri),e},Wge=function(e,t){if(t===void 0&&(t={}),!Object.keys(t).length)return e;for(var n in e)e[n]=RA(e[n],t);return e},qge=function(e,t){var n,i=e.attributes,s=e.segments,a=e.sidx,o=e.mediaSequence,l=e.discontinuitySequence,u=e.discontinuityStarts,c={attributes:(n={NAME:i.id,BANDWIDTH:i.bandwidth,CODECS:i.codecs},n["PROGRAM-ID"]=1,n),uri:"",endList:i.type==="static",timeline:i.periodStart,resolvedUri:"",targetDuration:i.duration,discontinuitySequence:l,discontinuityStarts:u,timelineStarts:i.timelineStarts,mediaSequence:o,segments:s};return i.contentProtection&&(c.contentProtection=i.contentProtection),a&&(c.sidx=a),t&&(c.attributes.AUDIO="audio",c.attributes.SUBTITLES="subs"),c},Gge=function(e){var t,n=e.attributes,i=e.segments,s=e.mediaSequence,a=e.discontinuityStarts,o=e.discontinuitySequence;typeof i>"u"&&(i=[{uri:n.baseUrl,timeline:n.periodStart,resolvedUri:n.baseUrl||"",duration:n.sourceDuration,number:0}],n.duration=n.sourceDuration);var l=(t={NAME:n.id,BANDWIDTH:n.bandwidth},t["PROGRAM-ID"]=1,t);return n.codecs&&(l.CODECS=n.codecs),{attributes:l,uri:"",endList:n.type==="static",timeline:n.periodStart,resolvedUri:n.baseUrl||"",targetDuration:n.duration,timelineStarts:n.timelineStarts,discontinuityStarts:a,discontinuitySequence:o,mediaSequence:s,segments:i}},Kge=function(e,t,n){t===void 0&&(t={}),n===void 0&&(n=!1);var i,s=e.reduce(function(o,l){var u=l.attributes.role&&l.attributes.role.value||"",c=l.attributes.lang||"",h=l.attributes.label||"main";if(c&&!l.attributes.label){var f=u?" ("+u+")":"";h=""+l.attributes.lang+f}o[h]||(o[h]={language:c,autoselect:!0,default:u==="main",playlists:[],uri:""});var g=RA(qge(l,n),t);return o[h].playlists.push(g),typeof i>"u"&&u==="main"&&(i=l,i.default=!0),o},{});if(!i){var a=Object.keys(s)[0];s[a].default=!0}return s},Xge=function(e,t){return t===void 0&&(t={}),e.reduce(function(n,i){var s=i.attributes.lang||"text";return n[s]||(n[s]={language:s,default:!1,autoselect:!1,playlists:[],uri:""}),n[s].playlists.push(RA(Gge(i),t)),n},{})},Yge=function(e){return e.reduce(function(t,n){return n&&n.forEach(function(i){var s=i.channel,a=i.language;t[a]={autoselect:!1,default:!1,instreamId:s,language:a},i.hasOwnProperty("aspectRatio")&&(t[a].aspectRatio=i.aspectRatio),i.hasOwnProperty("easyReader")&&(t[a].easyReader=i.easyReader),i.hasOwnProperty("3D")&&(t[a]["3D"]=i["3D"])}),t},{})},Qge=function(e){var t,n=e.attributes,i=e.segments,s=e.sidx,a=e.discontinuityStarts,o={attributes:(t={NAME:n.id,AUDIO:"audio",SUBTITLES:"subs",RESOLUTION:{width:n.width,height:n.height},CODECS:n.codecs,BANDWIDTH:n.bandwidth},t["PROGRAM-ID"]=1,t),uri:"",endList:n.type==="static",timeline:n.periodStart,resolvedUri:"",targetDuration:n.duration,discontinuityStarts:a,timelineStarts:n.timelineStarts,segments:i};return n.frameRate&&(o.attributes["FRAME-RATE"]=n.frameRate),n.contentProtection&&(o.contentProtection=n.contentProtection),s&&(o.sidx=s),o},Jge=function(e){var t=e.attributes;return t.mimeType==="video/mp4"||t.mimeType==="video/webm"||t.contentType==="video"},Zge=function(e){var t=e.attributes;return t.mimeType==="audio/mp4"||t.mimeType==="audio/webm"||t.contentType==="audio"},eve=function(e){var t=e.attributes;return t.mimeType==="text/vtt"||t.contentType==="text"},tve=function(e,t){e.forEach(function(n){n.mediaSequence=0,n.discontinuitySequence=Z2(t,function(i){var s=i.timeline;return s===n.timeline}),n.segments&&n.segments.forEach(function(i,s){i.number=s})})},y3=function(e){return e?Object.keys(e).reduce(function(t,n){var i=e[n];return t.concat(i.playlists)},[]):[]},rve=function(e){var t,n=e.dashPlaylists,i=e.locations,s=e.sidxMapping,a=s===void 0?{}:s,o=e.previousManifest;if(!n.length)return{};var l=n[0].attributes,u=l.sourceDuration,c=l.type,h=l.suggestedPresentationDelay,f=l.minimumUpdatePeriod,g=XC(n.filter(Jge)).map(Qge),v=XC(n.filter(Zge)),y=XC(n.filter(eve)),_=n.map(function(N){return N.attributes.captionServices}).filter(Boolean),C={allowCache:!0,discontinuityStarts:[],segments:[],endList:!0,mediaGroups:(t={AUDIO:{},VIDEO:{}},t["CLOSED-CAPTIONS"]={},t.SUBTITLES={},t),uri:"",duration:u,playlists:Wge(g,a)};f>=0&&(C.minimumUpdatePeriod=f*1e3),i&&(C.locations=i),c==="dynamic"&&(C.suggestedPresentationDelay=h);var E=C.playlists.length===0,D=v.length?Kge(v,a,E):null,I=y.length?Xge(y,a):null,k=g.concat(y3(D),y3(I)),P=k.map(function(N){var U=N.timelineStarts;return U});return C.timelineStarts=wj(P),tve(k,C.timelineStarts),D&&(C.mediaGroups.AUDIO.audio=D),I&&(C.mediaGroups.SUBTITLES.subs=I),_.length&&(C.mediaGroups["CLOSED-CAPTIONS"].cc=Yge(_)),o?Vge({oldManifest:o,newManifest:C}):C},nve=function(e,t,n){var i=e.NOW,s=e.clientOffset,a=e.availabilityStartTime,o=e.timescale,l=o===void 0?1:o,u=e.periodStart,c=u===void 0?0:u,h=e.minimumUpdatePeriod,f=h===void 0?0:h,g=(i+s)/1e3,v=a+c,y=g+f,_=y-v;return Math.ceil((_*l-t)/n)},Ej=function(e,t){for(var n=e.type,i=e.minimumUpdatePeriod,s=i===void 0?0:i,a=e.media,o=a===void 0?"":a,l=e.sourceDuration,u=e.timescale,c=u===void 0?1:u,h=e.startNumber,f=h===void 0?1:h,g=e.periodStart,v=[],y=-1,_=0;_<t.length;_++){var C=t[_],E=C.d,D=C.r||0,I=C.t||0;y<0&&(y=I),I&&I>y&&(y=I);var k=void 0;if(D<0){var P=_+1;P===t.length?n==="dynamic"&&s>0&&o.indexOf("$Number$")>0?k=nve(e,y,E):k=(l*c-y)/E:k=(t[P].t-y)/E}else k=D+1;for(var N=f+v.length+k,U=f+v.length;U<N;)v.push({number:U,duration:E/c,time:y,timeline:g}),y+=E,U++}return v},ive=/\$([A-z]*)(?:(%0)([0-9]+)d)?\$/g,sve=function(e){return function(t,n,i,s){if(t==="$$")return"$";if(typeof e[n]>"u")return t;var a=""+e[n];return n==="RepresentationID"||(i?s=parseInt(s,10):s=1,a.length>=s)?a:""+new Array(s-a.length+1).join("0")+a}},x3=function(e,t){return e.replace(ive,sve(t))},ave=function(e,t){return!e.duration&&!t?[{number:e.startNumber||1,duration:e.sourceDuration,time:0,timeline:e.periodStart}]:e.duration?IA(e):Ej(e,t)},ove=function(e,t){var n={RepresentationID:e.id,Bandwidth:e.bandwidth||0},i=e.initialization,s=i===void 0?{sourceURL:"",range:""}:i,a=Ug({baseUrl:e.baseUrl,source:x3(s.sourceURL,n),range:s.range}),o=ave(e,t);return o.map(function(l){n.Number=l.number,n.Time=l.time;var u=x3(e.media||"",n),c=e.timescale||1,h=e.presentationTimeOffset||0,f=e.periodStart+(l.time-h)/c,g={uri:u,timeline:l.timeline,duration:l.duration,resolvedUri:qS(e.baseUrl||"",u),map:a,number:l.number,presentationTime:f};return g})},lve=function(e,t){var n=e.baseUrl,i=e.initialization,s=i===void 0?{}:i,a=Ug({baseUrl:n,source:s.sourceURL,range:s.range}),o=Ug({baseUrl:n,source:t.media,range:t.mediaRange});return o.map=a,o},uve=function(e,t){var n=e.duration,i=e.segmentUrls,s=i===void 0?[]:i,a=e.periodStart;if(!n&&!t||n&&t)throw new Error(am.SEGMENT_TIME_UNSPECIFIED);var o=s.map(function(c){return lve(e,c)}),l;n&&(l=IA(e)),t&&(l=Ej(e,t));var u=l.map(function(c,h){if(o[h]){var f=o[h],g=e.timescale||1,v=e.presentationTimeOffset||0;return f.timeline=c.timeline,f.duration=c.duration,f.number=c.number,f.presentationTime=a+(c.time-v)/g,f}}).filter(function(c){return c});return u},cve=function(e){var t=e.attributes,n=e.segmentInfo,i,s;n.template?(s=ove,i=sa(t,n.template)):n.base?(s=Cj,i=sa(t,n.base)):n.list&&(s=uve,i=sa(t,n.list));var a={attributes:t};if(!s)return a;var o=s(i,n.segmentTimeline);if(i.duration){var l=i,u=l.duration,c=l.timescale,h=c===void 0?1:c;i.duration=u/h}else o.length?i.duration=o.reduce(function(f,g){return Math.max(f,Math.ceil(g.duration))},0):i.duration=0;return a.attributes=i,a.segments=o,n.base&&i.indexRange&&(a.sidx=o[0],a.segments=[]),a},dve=function(e){return e.map(cve)},yi=function(e,t){return Tj(e.childNodes).filter(function(n){var i=n.tagName;return i===t})},LA=function(e){return e.textContent.trim()},hve=function(e){return parseFloat(e.split("/").reduce(function(t,n){return t/n}))},Zf=function(e){var t=31536e3,n=720*60*60,i=1440*60,s=3600,a=60,o=/P(?:(\d*)Y)?(?:(\d*)M)?(?:(\d*)D)?(?:T(?:(\d*)H)?(?:(\d*)M)?(?:([\d.]*)S)?)?/,l=o.exec(e);if(!l)return 0;var u=l.slice(1),c=u[0],h=u[1],f=u[2],g=u[3],v=u[4],y=u[5];return parseFloat(c||0)*t+parseFloat(h||0)*n+parseFloat(f||0)*i+parseFloat(g||0)*s+parseFloat(v||0)*a+parseFloat(y||0)},fve=function(e){var t=/^\d+-\d+-\d+T\d+:\d+:\d+(\.\d+)?$/;return t.test(e)&&(e+="Z"),Date.parse(e)},_3={mediaPresentationDuration:function(e){return Zf(e)},availabilityStartTime:function(e){return fve(e)/1e3},minimumUpdatePeriod:function(e){return Zf(e)},suggestedPresentationDelay:function(e){return Zf(e)},type:function(e){return e},timeShiftBufferDepth:function(e){return Zf(e)},start:function(e){return Zf(e)},width:function(e){return parseInt(e,10)},height:function(e){return parseInt(e,10)},bandwidth:function(e){return parseInt(e,10)},frameRate:function(e){return hve(e)},startNumber:function(e){return parseInt(e,10)},timescale:function(e){return parseInt(e,10)},presentationTimeOffset:function(e){return parseInt(e,10)},duration:function(e){var t=parseInt(e,10);return isNaN(t)?Zf(e):t},d:function(e){return parseInt(e,10)},t:function(e){return parseInt(e,10)},r:function(e){return parseInt(e,10)},DEFAULT:function(e){return e}},Us=function(e){return e&&e.attributes?Tj(e.attributes).reduce(function(t,n){var i=_3[n.name]||_3.DEFAULT;return t[n.name]=i(n.value),t},{}):{}},pve={"urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b":"org.w3.clearkey","urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":"com.widevine.alpha","urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95":"com.microsoft.playready","urn:uuid:f239e769-efa3-4850-9c16-a903c6932efb":"com.adobe.primetime"},XS=function(e,t){return t.length?GS(e.map(function(n){return t.map(function(i){return qS(n,LA(i))})})):e},OA=function(e){var t=yi(e,"SegmentTemplate")[0],n=yi(e,"SegmentList")[0],i=n&&yi(n,"SegmentURL").map(function(f){return sa({tag:"SegmentURL"},Us(f))}),s=yi(e,"SegmentBase")[0],a=n||t,o=a&&yi(a,"SegmentTimeline")[0],l=n||s||t,u=l&&yi(l,"Initialization")[0],c=t&&Us(t);c&&u?c.initialization=u&&Us(u):c&&c.initialization&&(c.initialization={sourceURL:c.initialization});var h={template:c,segmentTimeline:o&&yi(o,"S").map(function(f){return Us(f)}),list:n&&sa(Us(n),{segmentUrls:i,initialization:Us(u)}),base:s&&sa(Us(s),{initialization:Us(u)})};return Object.keys(h).forEach(function(f){h[f]||delete h[f]}),h},mve=function(e,t,n){return function(i){var s=yi(i,"BaseURL"),a=XS(t,s),o=sa(e,Us(i)),l=OA(i);return a.map(function(u){return{segmentInfo:sa(n,l),attributes:sa(o,{baseUrl:u})}})}},gve=function(e){return e.reduce(function(t,n){var i=Us(n);i.schemeIdUri&&(i.schemeIdUri=i.schemeIdUri.toLowerCase());var s=pve[i.schemeIdUri];if(s){t[s]={attributes:i};var a=yi(n,"cenc:pssh")[0];if(a){var o=LA(a);t[s].pssh=o&&gj(o)}}return t},{})},vve=function(e){if(e.schemeIdUri==="urn:scte:dash:cc:cea-608:2015"){var t=typeof e.value!="string"?[]:e.value.split(";");return t.map(function(i){var s,a;if(a=i,/^CC\d=/.test(i)){var o=i.split("=");s=o[0],a=o[1]}else/^CC\d$/.test(i)&&(s=i);return{channel:s,language:a}})}else if(e.schemeIdUri==="urn:scte:dash:cc:cea-708:2015"){var n=typeof e.value!="string"?[]:e.value.split(";");return n.map(function(i){var s={channel:void 0,language:void 0,aspectRatio:1,easyReader:0,"3D":0};if(/=/.test(i)){var a=i.split("="),o=a[0],l=a[1],u=l===void 0?"":l;s.channel=o,s.language=i,u.split(",").forEach(function(c){var h=c.split(":"),f=h[0],g=h[1];f==="lang"?s.language=g:f==="er"?s.easyReader=Number(g):f==="war"?s.aspectRatio=Number(g):f==="3D"&&(s["3D"]=Number(g))})}else s.language=i;return s.channel&&(s.channel="SERVICE"+s.channel),s})}},yve=function(e,t,n){return function(i){var s=Us(i),a=XS(t,yi(i,"BaseURL")),o=yi(i,"Role")[0],l={role:Us(o)},u=sa(e,s,l),c=yi(i,"Accessibility")[0],h=vve(Us(c));h&&(u=sa(u,{captionServices:h}));var f=yi(i,"Label")[0];if(f&&f.childNodes.length){var g=f.childNodes[0].nodeValue.trim();u=sa(u,{label:g})}var v=gve(yi(i,"ContentProtection"));Object.keys(v).length&&(u=sa(u,{contentProtection:v}));var y=OA(i),_=yi(i,"Representation"),C=sa(n,y);return GS(_.map(mve(u,a,C)))}},xve=function(e,t){return function(n,i){var s=XS(t,yi(n.node,"BaseURL")),a=sa(e,{periodStart:n.attributes.start});typeof n.attributes.duration=="number"&&(a.periodDuration=n.attributes.duration);var o=yi(n.node,"AdaptationSet"),l=OA(n.node);return GS(o.map(yve(a,s,l)))}},_ve=function(e){var t=e.attributes,n=e.priorPeriodAttributes,i=e.mpdType;return typeof t.start=="number"?t.start:n&&typeof n.start=="number"&&typeof n.duration=="number"?n.start+n.duration:!n&&i==="static"?0:null},bve=function(e,t){t===void 0&&(t={});var n=t,i=n.manifestUri,s=i===void 0?"":i,a=n.NOW,o=a===void 0?Date.now():a,l=n.clientOffset,u=l===void 0?0:l,c=yi(e,"Period");if(!c.length)throw new Error(am.INVALID_NUMBER_OF_PERIOD);var h=yi(e,"Location"),f=Us(e),g=XS([s],yi(e,"BaseURL"));f.type=f.type||"static",f.sourceDuration=f.mediaPresentationDuration||0,f.NOW=o,f.clientOffset=u,h.length&&(f.locations=h.map(LA));var v=[];return c.forEach(function(y,_){var C=Us(y),E=v[_-1];C.start=_ve({attributes:C,priorPeriodAttributes:E?E.attributes:null,mpdType:f.type}),v.push({node:y,attributes:C})}),{locations:f.locations,representationInfo:GS(v.map(xve(f,g)))}},kj=function(e){if(e==="")throw new Error(am.DASH_EMPTY_MANIFEST);var t=new O5.DOMParser,n,i;try{n=t.parseFromString(e,"application/xml"),i=n&&n.documentElement.tagName==="MPD"?n.documentElement:null}catch{}if(!i||i&&i.getElementsByTagName("parsererror").length>0)throw new Error(am.DASH_INVALID_XML);return i},Sve=function(e){var t=yi(e,"UTCTiming")[0];if(!t)return null;var n=Us(t);switch(n.schemeIdUri){case"urn:mpeg:dash:utc:http-head:2014":case"urn:mpeg:dash:utc:http-head:2012":n.method="HEAD";break;case"urn:mpeg:dash:utc:http-xsdate:2014":case"urn:mpeg:dash:utc:http-iso:2014":case"urn:mpeg:dash:utc:http-xsdate:2012":case"urn:mpeg:dash:utc:http-iso:2012":n.method="GET";break;case"urn:mpeg:dash:utc:direct:2014":case"urn:mpeg:dash:utc:direct:2012":n.method="DIRECT",n.value=Date.parse(n.value);break;case"urn:mpeg:dash:utc:http-ntp:2014":case"urn:mpeg:dash:utc:ntp:2014":case"urn:mpeg:dash:utc:sntp:2014":default:throw new Error(am.UNSUPPORTED_UTC_TIMING_SCHEME)}return n},Tve=function(e,t){t===void 0&&(t={});var n=bve(kj(e),t),i=dve(n.representationInfo);return rve({dashPlaylists:i,locations:n.locations,sidxMapping:t.sidxMapping,previousManifest:t.previousManifest})},Cve=function(e){return Sve(kj(e))},YC,b3;function wve(){if(b3)return YC;b3=1;var r=Math.pow(2,32),e=function(t){var n=new DataView(t.buffer,t.byteOffset,t.byteLength),i;return n.getBigUint64?(i=n.getBigUint64(0),i<Number.MAX_SAFE_INTEGER?Number(i):i):n.getUint32(0)*r+n.getUint32(4)};return YC={getUint64:e,MAX_UINT32:r},YC}var QC,S3;function Eve(){if(S3)return QC;S3=1;var r=wve().getUint64,e=function(t){var n=new DataView(t.buffer,t.byteOffset,t.byteLength),i={version:t[0],flags:new Uint8Array(t.subarray(1,4)),references:[],referenceId:n.getUint32(4),timescale:n.getUint32(8)},s=12;i.version===0?(i.earliestPresentationTime=n.getUint32(s),i.firstOffset=n.getUint32(s+4),s+=8):(i.earliestPresentationTime=r(t.subarray(s)),i.firstOffset=r(t.subarray(s+8)),s+=16),s+=2;var a=n.getUint16(s);for(s+=2;a>0;s+=12,a--)i.references.push({referenceType:(t[s]&128)>>>7,referencedSize:n.getUint32(s)&2147483647,subsegmentDuration:n.getUint32(s+4),startsWithSap:!!(t[s+8]&128),sapType:(t[s+8]&112)>>>4,sapDeltaTime:n.getUint32(s+8)&268435455});return i};return QC=e,QC}var kve=Eve();const Ave=da(kve);var Dve=Sr([73,68,51]),Ive=function(e,t){t===void 0&&(t=0),e=Sr(e);var n=e[t+5],i=e[t+6]<<21|e[t+7]<<14|e[t+8]<<7|e[t+9],s=(n&16)>>4;return s?i+20:i+10},G0=function r(e,t){return t===void 0&&(t=0),e=Sr(e),e.length-t<10||!Jn(e,Dve,{offset:t})?t:(t+=Ive(e,t),r(e,t))},T3=function(e){return typeof e=="string"?bj(e):e},Pve=function(e){return Array.isArray(e)?e.map(function(t){return T3(t)}):[T3(e)]},Rve=function r(e,t,n){n===void 0&&(n=!1),t=Pve(t),e=Sr(e);var i=[];if(!t.length)return i;for(var s=0;s<e.length;){var a=(e[s]<<24|e[s+1]<<16|e[s+2]<<8|e[s+3])>>>0,o=e.subarray(s+4,s+8);if(a===0)break;var l=s+a;if(l>e.length){if(n)break;l=e.length}var u=e.subarray(s+8,l);Jn(o,t[0])&&(t.length===1?i.push(u):i.push.apply(i,r(u,t.slice(1),n))),s=l}return i},Qy={EBML:Sr([26,69,223,163]),DocType:Sr([66,130]),Segment:Sr([24,83,128,103]),SegmentInfo:Sr([21,73,169,102]),Tracks:Sr([22,84,174,107]),Track:Sr([174]),TrackNumber:Sr([215]),DefaultDuration:Sr([35,227,131]),TrackEntry:Sr([174]),TrackType:Sr([131]),FlagDefault:Sr([136]),CodecID:Sr([134]),CodecPrivate:Sr([99,162]),VideoTrack:Sr([224]),AudioTrack:Sr([225]),Cluster:Sr([31,67,182,117]),Timestamp:Sr([231]),TimestampScale:Sr([42,215,177]),BlockGroup:Sr([160]),BlockDuration:Sr([155]),Block:Sr([161]),SimpleBlock:Sr([163])},eE=[128,64,32,16,8,4,2,1],Lve=function(e){for(var t=1,n=0;n<eE.length&&!(e&eE[n]);n++)t++;return t},vb=function(e,t,n,i){n===void 0&&(n=!0),i===void 0&&(i=!1);var s=Lve(e[t]),a=e.subarray(t,t+s);return n&&(a=Array.prototype.slice.call(e,t,t+s),a[0]^=eE[s-1]),{length:s,value:Ige(a,{signed:i}),bytes:a}},C3=function r(e){return typeof e=="string"?e.match(/.{1,2}/g).map(function(t){return r(t)}):typeof e=="number"?Pge(e):e},Ove=function(e){return Array.isArray(e)?e.map(function(t){return C3(t)}):[C3(e)]},Mve=function r(e,t,n){if(n>=t.length)return t.length;var i=vb(t,n,!1);if(Jn(e.bytes,i.bytes))return n;var s=vb(t,n+i.length);return r(e,t,n+s.length+s.value+i.length)},w3=function r(e,t){t=Ove(t),e=Sr(e);var n=[];if(!t.length)return n;for(var i=0;i<e.length;){var s=vb(e,i,!1),a=vb(e,i+s.length),o=i+s.length+a.length;a.value===127&&(a.value=Mve(s,e,o),a.value!==e.length&&(a.value-=o));var l=o+a.value>e.length?e.length:o+a.value,u=e.subarray(o,l);Jn(t[0],s.bytes)&&(t.length===1?n.push(u):n=n.concat(r(u,t.slice(1))));var c=s.length+a.length+u.length;i+=c}return n},Fve=Sr([0,0,0,1]),Bve=Sr([0,0,1]),Nve=Sr([0,0,3]),Uve=function(e){for(var t=[],n=1;n<e.length-2;)Jn(e.subarray(n,n+3),Nve)&&(t.push(n+2),n++),n++;if(t.length===0)return e;var i=e.length-t.length,s=new Uint8Array(i),a=0;for(n=0;n<i;a++,n++)a===t[0]&&(a++,t.shift()),s[n]=e[a];return s},Aj=function(e,t,n,i){e=Sr(e),n=[].concat(n);for(var s=0,a,o=0;s<e.length&&(o<i||a);){var l=void 0;if(Jn(e.subarray(s),Fve)?l=4:Jn(e.subarray(s),Bve)&&(l=3),!l){s++;continue}if(o++,a)return Uve(e.subarray(a,s));var u=void 0;t==="h264"?u=e[s+l]&31:t==="h265"&&(u=e[s+l]>>1&63),n.indexOf(u)!==-1&&(a=s+l),s+=l+(t==="h264"?1:2)}return e.subarray(0,0)},$ve=function(e,t,n){return Aj(e,"h264",t,n)},jve=function(e,t,n){return Aj(e,"h265",t,n)},Js={webm:Sr([119,101,98,109]),matroska:Sr([109,97,116,114,111,115,107,97]),flac:Sr([102,76,97,67]),ogg:Sr([79,103,103,83]),ac3:Sr([11,119]),riff:Sr([82,73,70,70]),avi:Sr([65,86,73]),wav:Sr([87,65,86,69]),"3gp":Sr([102,116,121,112,51,103]),mp4:Sr([102,116,121,112]),fmp4:Sr([115,116,121,112]),mov:Sr([102,116,121,112,113,116]),moov:Sr([109,111,111,118]),moof:Sr([109,111,111,102])},om={aac:function(e){var t=G0(e);return Jn(e,[255,16],{offset:t,mask:[255,22]})},mp3:function(e){var t=G0(e);return Jn(e,[255,2],{offset:t,mask:[255,6]})},webm:function(e){var t=w3(e,[Qy.EBML,Qy.DocType])[0];return Jn(t,Js.webm)},mkv:function(e){var t=w3(e,[Qy.EBML,Qy.DocType])[0];return Jn(t,Js.matroska)},mp4:function(e){if(om["3gp"](e)||om.mov(e))return!1;if(Jn(e,Js.mp4,{offset:4})||Jn(e,Js.fmp4,{offset:4})||Jn(e,Js.moof,{offset:4})||Jn(e,Js.moov,{offset:4}))return!0},mov:function(e){return Jn(e,Js.mov,{offset:4})},"3gp":function(e){return Jn(e,Js["3gp"],{offset:4})},ac3:function(e){var t=G0(e);return Jn(e,Js.ac3,{offset:t})},ts:function(e){if(e.length<189&&e.length>=1)return e[0]===71;for(var t=0;t+188<e.length&&t<188;){if(e[t]===71&&e[t+188]===71)return!0;t+=1}return!1},flac:function(e){var t=G0(e);return Jn(e,Js.flac,{offset:t})},ogg:function(e){return Jn(e,Js.ogg)},avi:function(e){return Jn(e,Js.riff)&&Jn(e,Js.avi,{offset:8})},wav:function(e){return Jn(e,Js.riff)&&Jn(e,Js.wav,{offset:8})},h264:function(e){return $ve(e,7,3).length},h265:function(e){return jve(e,[32,33],3).length}},tE=Object.keys(om).filter(function(r){return r!=="ts"&&r!=="h264"&&r!=="h265"}).concat(["ts","h264","h265"]);tE.forEach(function(r){var e=om[r];om[r]=function(t){return e(Sr(t))}});var zve=om,MA=function(e){e=Sr(e);for(var t=0;t<tE.length;t++){var n=tE[t];if(zve[n](e))return n}return""},Hve=function(e){return Rve(e,["moof"]).length>0},JC,E3;function Vve(){if(E3)return JC;E3=1;var r=9e4,e,t,n,i,s,a,o;return e=function(l){return l*r},t=function(l,u){return l*u},n=function(l){return l/r},i=function(l,u){return l/u},s=function(l,u){return e(i(l,u))},a=function(l,u){return t(n(l),u)},o=function(l,u,c){return n(c?l:l-u)},JC={ONE_SECOND_IN_TS:r,secondsToVideoTs:e,secondsToAudioTs:t,videoTsToSeconds:n,audioTsToSeconds:i,audioTsToVideoTs:s,videoTsToAudioTs:a,metadataTsToSeconds:o},JC}var yb=Vve();function Hs(r){return Hs=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Hs(r)}function Wve(r){try{return Function.toString.call(r).indexOf("[native code]")!==-1}catch{return typeof r=="function"}}function rE(r){var e=typeof Map=="function"?new Map:void 0;return rE=function(n){if(n===null||!Wve(n))return n;if(typeof n!="function")throw new TypeError("Super expression must either be null or a function");if(e!==void 0){if(e.has(n))return e.get(n);e.set(n,i)}function i(){return mj(n,arguments,Hs(this).constructor)}return i.prototype=Object.create(n.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),zp(i,n)},rE(r)}/**
 * @license
 * Video.js 7.21.6 <http://videojs.com/>
 * Copyright Brightcove, Inc. <https://www.brightcove.com/>
 * Available under Apache License Version 2.0
 * <https://github.com/videojs/video.js/blob/main/LICENSE>
 *
 * Includes vtt.js <https://github.com/mozilla/vtt.js>
 * Available under Apache License Version 2.0
 * <https://github.com/mozilla/vtt.js/blob/main/LICENSE>
 */var Dj="7.21.6",Ac={},Gd=function(e,t){return Ac[e]=Ac[e]||[],t&&(Ac[e]=Ac[e].concat(t)),Ac[e]},qve=function(e,t){Gd(e,t)},Ij=function(e,t){var n=Gd(e).indexOf(t);return n<=-1?!1:(Ac[e]=Ac[e].slice(),Ac[e].splice(n,1),!0)},Gve=function(e,t){Gd(e,[].concat(t).map(function(n){var i=function s(){return Ij(e,s),n.apply(void 0,arguments)};return i}))},xb={prefixed:!0},h_=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror","fullscreen"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror","-webkit-full-screen"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror","-moz-full-screen"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError","-ms-fullscreen"]],k3=h_[0],K0;for(var Jy=0;Jy<h_.length;Jy++)if(h_[Jy][1]in Be){K0=h_[Jy];break}if(K0){for(var Zy=0;Zy<K0.length;Zy++)xb[k3[Zy]]=K0[Zy];xb.prefixed=K0[0]!==k3[0]}var Pa=[],Kve=function(e,t){return function(n,i,s){var a=t.levels[i],o=new RegExp("^("+a+")$");if(n!=="log"&&s.unshift(n.toUpperCase()+":"),s.unshift(e+":"),Pa){Pa.push([].concat(s));var l=Pa.length-1e3;Pa.splice(0,l>0?l:0)}if(X.console){var u=X.console[n];!u&&n==="debug"&&(u=X.console.info||X.console.log),!(!u||!a||!o.test(n))&&u[Array.isArray(s)?"apply":"call"](X.console,s)}}};function Pj(r){var e="info",t,n=function(){for(var s=arguments.length,a=new Array(s),o=0;o<s;o++)a[o]=arguments[o];t("log",e,a)};return t=Kve(r,n),n.createLogger=function(i){return Pj(r+": "+i)},n.levels={all:"debug|log|warn|error",off:"",debug:"debug|log|warn|error",info:"log|warn|error",warn:"warn|error",error:"error",DEFAULT:e},n.level=function(i){if(typeof i=="string"){if(!n.levels.hasOwnProperty(i))throw new Error('"'+i+'" in not a valid log level');e=i}return e},n.history=function(){return Pa?[].concat(Pa):[]},n.history.filter=function(i){return(Pa||[]).filter(function(s){return new RegExp(".*"+i+".*").test(s[0])})},n.history.clear=function(){Pa&&(Pa.length=0)},n.history.disable=function(){Pa!==null&&(Pa.length=0,Pa=null)},n.history.enable=function(){Pa===null&&(Pa=[])},n.error=function(){for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return t("error",e,s)},n.warn=function(){for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return t("warn",e,s)},n.debug=function(){for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return t("debug",e,s)},n}var Xr=Pj("VIDEOJS"),Rj=Xr.createLogger,Xve=Object.prototype.toString,Lj=function(e){return Bc(e)?Object.keys(e):[]};function Bp(r,e){Lj(r).forEach(function(t){return e(r[t],t)})}function Yve(r,e,t){return t===void 0&&(t=0),Lj(r).reduce(function(n,i){return e(n,r[i],i)},t)}function ci(r){for(var e=arguments.length,t=new Array(e>1?e-1:0),n=1;n<e;n++)t[n-1]=arguments[n];return Object.assign?sr.apply(void 0,[r].concat(t)):(t.forEach(function(i){i&&Bp(i,function(s,a){r[a]=s})}),r)}function Bc(r){return!!r&&typeof r=="object"}function $g(r){return Bc(r)&&Xve.call(r)==="[object Object]"&&r.constructor===Object}function jg(r,e){if(!r||!e)return"";if(typeof X.getComputedStyle=="function"){var t;try{t=X.getComputedStyle(r)}catch{return""}return t?t.getPropertyValue(e)||t[e]:""}return""}var ns=X.navigator&&X.navigator.userAgent||"",A3=/AppleWebKit\/([\d.]+)/i.exec(ns),Qve=A3?parseFloat(A3.pop()):null,Oj=/iPod/i.test(ns),Jve=(function(){var r=ns.match(/OS (\d+)_/i);return r&&r[1]?r[1]:null})(),$c=/Android/i.test(ns),FA=(function(){var r=ns.match(/Android (\d+)(?:\.(\d+))?(?:\.(\d+))*/i);if(!r)return null;var e=r[1]&&parseFloat(r[1]),t=r[2]&&parseFloat(r[2]);return e&&t?parseFloat(r[1]+"."+r[2]):e||null})(),Mj=$c&&FA<5&&Qve<537,Fj=/Firefox/i.test(ns),Tv=/Edg/i.test(ns),jc=!Tv&&(/Chrome/i.test(ns)||/CriOS/i.test(ns)),Bj=(function(){var r=ns.match(/(Chrome|CriOS)\/(\d+)/);return r&&r[2]?parseFloat(r[2]):null})(),Cv=(function(){var r=/MSIE\s(\d+)\.\d/.exec(ns),e=r&&parseFloat(r[1]);return!e&&/Trident\/7.0/i.test(ns)&&/rv:11.0/.test(ns)&&(e=11),e})(),BA=/Safari/i.test(ns)&&!jc&&!$c&&!Tv,Nj=/Windows/i.test(ns),lm=!!(Om()&&("ontouchstart"in X||X.navigator.maxTouchPoints||X.DocumentTouch&&X.document instanceof X.DocumentTouch)),NA=/iPad/i.test(ns)||BA&&lm&&!/iPhone/i.test(ns),UA=/iPhone/i.test(ns)&&!NA,ca=UA||NA||Oj,YS=(BA||ca)&&!jc,Zve=Object.freeze({__proto__:null,IS_IPOD:Oj,IOS_VERSION:Jve,IS_ANDROID:$c,ANDROID_VERSION:FA,IS_NATIVE_ANDROID:Mj,IS_FIREFOX:Fj,IS_EDGE:Tv,IS_CHROME:jc,CHROME_VERSION:Bj,IE_VERSION:Cv,IS_SAFARI:BA,IS_WINDOWS:Nj,TOUCH_ENABLED:lm,IS_IPAD:NA,IS_IPHONE:UA,IS_IOS:ca,IS_ANY_SAFARI:YS});function D3(r){return typeof r=="string"&&!!r.trim()}function Uj(r){if(r.indexOf(" ")>=0)throw new Error("class has illegal whitespace characters")}function eye(r){return new RegExp("(^|\\s)"+r+"($|\\s)")}function Om(){return Be===X.document}function Mm(r){return Bc(r)&&r.nodeType===1}function $j(){try{return X.parent!==X.self}catch{return!0}}function jj(r){return function(e,t){if(!D3(e))return Be[r](null);D3(t)&&(t=Be.querySelector(t));var n=Mm(t)?t:Be;return n[r]&&n[r](e)}}function fn(r,e,t,n){r===void 0&&(r="div"),e===void 0&&(e={}),t===void 0&&(t={});var i=Be.createElement(r);return Object.getOwnPropertyNames(e).forEach(function(s){var a=e[s];s.indexOf("aria-")!==-1||s==="role"||s==="type"?(Xr.warn(`Setting attributes in the second argument of createEl()
has been deprecated. Use the third argument instead.
`+("createEl(type, properties, attributes). Attempting to set "+s+" to "+a+".")),i.setAttribute(s,a)):s==="textContent"?Sf(i,a):(i[s]!==a||s==="tabIndex")&&(i[s]=a)}),Object.getOwnPropertyNames(t).forEach(function(s){i.setAttribute(s,t[s])}),n&&jA(i,n),i}function Sf(r,e){return typeof r.textContent>"u"?r.innerText=e:r.textContent=e,r}function nE(r,e){e.firstChild?e.insertBefore(r,e.firstChild):e.appendChild(r)}function sf(r,e){return Uj(e),r.classList?r.classList.contains(e):eye(e).test(r.className)}function Lc(r,e){return r.classList?r.classList.add(e):sf(r,e)||(r.className=(r.className+" "+e).trim()),r}function wv(r,e){return r?(r.classList?r.classList.remove(e):(Uj(e),r.className=r.className.split(/\s+/).filter(function(t){return t!==e}).join(" ")),r):(Xr.warn("removeClass was called with an element that doesn't exist"),null)}function zj(r,e,t){var n=sf(r,e);if(typeof t=="function"&&(t=t(r,e)),typeof t!="boolean"&&(t=!n),t!==n)return t?Lc(r,e):wv(r,e),r}function Hj(r,e){Object.getOwnPropertyNames(e).forEach(function(t){var n=e[t];n===null||typeof n>"u"||n===!1?r.removeAttribute(t):r.setAttribute(t,n===!0?"":n)})}function Cc(r){var e={},t=",autoplay,controls,playsinline,loop,muted,default,defaultMuted,";if(r&&r.attributes&&r.attributes.length>0)for(var n=r.attributes,i=n.length-1;i>=0;i--){var s=n[i].name,a=n[i].value;(typeof r[s]=="boolean"||t.indexOf(","+s+",")!==-1)&&(a=a!==null),e[s]=a}return e}function Vj(r,e){return r.getAttribute(e)}function um(r,e,t){r.setAttribute(e,t)}function QS(r,e){r.removeAttribute(e)}function Wj(){Be.body.focus(),Be.onselectstart=function(){return!1}}function qj(){Be.onselectstart=function(){return!0}}function cm(r){if(r&&r.getBoundingClientRect&&r.parentNode){var e=r.getBoundingClientRect(),t={};return["bottom","height","left","right","top","width"].forEach(function(n){e[n]!==void 0&&(t[n]=e[n])}),t.height||(t.height=parseFloat(jg(r,"height"))),t.width||(t.width=parseFloat(jg(r,"width"))),t}}function zg(r){if(!r||r&&!r.offsetParent)return{left:0,top:0,width:0,height:0};for(var e=r.offsetWidth,t=r.offsetHeight,n=0,i=0;r.offsetParent&&r!==Be[xb.fullscreenElement];)n+=r.offsetLeft,i+=r.offsetTop,r=r.offsetParent;return{left:n,top:i,width:e,height:t}}function JS(r,e){var t={x:0,y:0};if(ca)for(var n=r;n&&n.nodeName.toLowerCase()!=="html";){var i=jg(n,"transform");if(/^matrix/.test(i)){var s=i.slice(7,-1).split(/,\s/).map(Number);t.x+=s[4],t.y+=s[5]}else if(/^matrix3d/.test(i)){var a=i.slice(9,-1).split(/,\s/).map(Number);t.x+=a[12],t.y+=a[13]}n=n.parentNode}var o={},l=zg(e.target),u=zg(r),c=u.width,h=u.height,f=e.offsetY-(u.top-l.top),g=e.offsetX-(u.left-l.left);return e.changedTouches&&(g=e.changedTouches[0].pageX-u.left,f=e.changedTouches[0].pageY+u.top,ca&&(g-=t.x,f-=t.y)),o.y=1-Math.max(0,Math.min(1,f/h)),o.x=Math.max(0,Math.min(1,g/c)),o}function Gj(r){return Bc(r)&&r.nodeType===3}function $A(r){for(;r.firstChild;)r.removeChild(r.firstChild);return r}function Kj(r){return typeof r=="function"&&(r=r()),(Array.isArray(r)?r:[r]).map(function(e){if(typeof e=="function"&&(e=e()),Mm(e)||Gj(e))return e;if(typeof e=="string"&&/\S/.test(e))return Be.createTextNode(e)}).filter(function(e){return e})}function jA(r,e){return Kj(e).forEach(function(t){return r.appendChild(t)}),r}function Xj(r,e){return jA($A(r),e)}function Hg(r){return r.button===void 0&&r.buttons===void 0||r.button===0&&r.buttons===void 0||r.type==="mouseup"&&r.button===0&&r.buttons===0?!0:!(r.button!==0||r.buttons!==1)}var Kd=jj("querySelector"),Yj=jj("querySelectorAll"),Qj=Object.freeze({__proto__:null,isReal:Om,isEl:Mm,isInFrame:$j,createEl:fn,textContent:Sf,prependTo:nE,hasClass:sf,addClass:Lc,removeClass:wv,toggleClass:zj,setAttributes:Hj,getAttributes:Cc,getAttribute:Vj,setAttribute:um,removeAttribute:QS,blockTextSelection:Wj,unblockTextSelection:qj,getBoundingClientRect:cm,findPosition:zg,getPointerPosition:JS,isTextNode:Gj,emptyEl:$A,normalizeContent:Kj,appendContent:jA,insertContent:Xj,isSingleLeftClick:Hg,$:Kd,$$:Yj}),Jj=!1,iE,tye=function(){if(iE.options.autoSetup!==!1){var e=Array.prototype.slice.call(Be.getElementsByTagName("video")),t=Array.prototype.slice.call(Be.getElementsByTagName("audio")),n=Array.prototype.slice.call(Be.getElementsByTagName("video-js")),i=e.concat(t,n);if(i&&i.length>0)for(var s=0,a=i.length;s<a;s++){var o=i[s];if(o&&o.getAttribute){if(o.player===void 0){var l=o.getAttribute("data-setup");l!==null&&iE(o)}}else{sE(1);break}}else Jj||sE(1)}};function sE(r,e){Om()&&(e&&(iE=e),X.setTimeout(tye,r))}function aE(){Jj=!0,X.removeEventListener("load",aE)}Om()&&(Be.readyState==="complete"?aE():X.addEventListener("load",aE));var Zj=function(e){var t=Be.createElement("style");return t.className=e,t},e7=function(e,t){e.styleSheet?e.styleSheet.cssText=t:e.textContent=t},rye=3,nye=rye;function zc(){return nye++}var t7;X.WeakMap||(t7=(function(){function r(){this.vdata="vdata"+Math.floor(X.performance&&X.performance.now()||Date.now()),this.data={}}var e=r.prototype;return e.set=function(n,i){var s=n[this.vdata]||zc();return n[this.vdata]||(n[this.vdata]=s),this.data[s]=i,this},e.get=function(n){var i=n[this.vdata];if(i)return this.data[i];Xr("We have no data for this element",n)},e.has=function(n){var i=n[this.vdata];return i in this.data},e.delete=function(n){var i=n[this.vdata];i&&(delete this.data[i],delete n[this.vdata])},r})());var aa=X.WeakMap?new WeakMap:new t7;function I3(r,e){if(aa.has(r)){var t=aa.get(r);t.handlers[e].length===0&&(delete t.handlers[e],r.removeEventListener?r.removeEventListener(e,t.dispatcher,!1):r.detachEvent&&r.detachEvent("on"+e,t.dispatcher)),Object.getOwnPropertyNames(t.handlers).length<=0&&(delete t.handlers,delete t.dispatcher,delete t.disabled),Object.getOwnPropertyNames(t).length===0&&aa.delete(r)}}function zA(r,e,t,n){t.forEach(function(i){r(e,i,n)})}function ZS(r){if(r.fixed_)return r;function e(){return!0}function t(){return!1}if(!r||!r.isPropagationStopped||!r.isImmediatePropagationStopped){var n=r||X.event;r={};for(var i in n)i!=="layerX"&&i!=="layerY"&&i!=="keyLocation"&&i!=="webkitMovementX"&&i!=="webkitMovementY"&&i!=="path"&&(i==="returnValue"&&n.preventDefault||(r[i]=n[i]));if(r.target||(r.target=r.srcElement||Be),r.relatedTarget||(r.relatedTarget=r.fromElement===r.target?r.toElement:r.fromElement),r.preventDefault=function(){n.preventDefault&&n.preventDefault(),r.returnValue=!1,n.returnValue=!1,r.defaultPrevented=!0},r.defaultPrevented=!1,r.stopPropagation=function(){n.stopPropagation&&n.stopPropagation(),r.cancelBubble=!0,n.cancelBubble=!0,r.isPropagationStopped=e},r.isPropagationStopped=t,r.stopImmediatePropagation=function(){n.stopImmediatePropagation&&n.stopImmediatePropagation(),r.isImmediatePropagationStopped=e,r.stopPropagation()},r.isImmediatePropagationStopped=t,r.clientX!==null&&r.clientX!==void 0){var s=Be.documentElement,a=Be.body;r.pageX=r.clientX+(s&&s.scrollLeft||a&&a.scrollLeft||0)-(s&&s.clientLeft||a&&a.clientLeft||0),r.pageY=r.clientY+(s&&s.scrollTop||a&&a.scrollTop||0)-(s&&s.clientTop||a&&a.clientTop||0)}r.which=r.charCode||r.keyCode,r.button!==null&&r.button!==void 0&&(r.button=r.button&1?0:r.button&4?1:r.button&2?2:0)}return r.fixed_=!0,r}var ex,iye=function(){if(typeof ex!="boolean"){ex=!1;try{var e=Object.defineProperty({},"passive",{get:function(){ex=!0}});X.addEventListener("test",null,e),X.removeEventListener("test",null,e)}catch{}}return ex},sye=["touchstart","touchmove"];function bo(r,e,t){if(Array.isArray(e))return zA(bo,r,e,t);aa.has(r)||aa.set(r,{});var n=aa.get(r);if(n.handlers||(n.handlers={}),n.handlers[e]||(n.handlers[e]=[]),t.guid||(t.guid=zc()),n.handlers[e].push(t),n.dispatcher||(n.disabled=!1,n.dispatcher=function(s,a){if(!n.disabled){s=ZS(s);var o=n.handlers[s.type];if(o)for(var l=o.slice(0),u=0,c=l.length;u<c&&!s.isImmediatePropagationStopped();u++)try{l[u].call(r,s,a)}catch(h){Xr.error(h)}}}),n.handlers[e].length===1)if(r.addEventListener){var i=!1;iye()&&sye.indexOf(e)>-1&&(i={passive:!0}),r.addEventListener(e,n.dispatcher,i)}else r.attachEvent&&r.attachEvent("on"+e,n.dispatcher)}function zs(r,e,t){if(aa.has(r)){var n=aa.get(r);if(n.handlers){if(Array.isArray(e))return zA(zs,r,e,t);var i=function(u,c){n.handlers[c]=[],I3(u,c)};if(e===void 0){for(var s in n.handlers)Object.prototype.hasOwnProperty.call(n.handlers||{},s)&&i(r,s);return}var a=n.handlers[e];if(a){if(!t){i(r,e);return}if(t.guid)for(var o=0;o<a.length;o++)a[o].guid===t.guid&&a.splice(o--,1);I3(r,e)}}}}function Fm(r,e,t){var n=aa.has(r)?aa.get(r):{},i=r.parentNode||r.ownerDocument;if(typeof e=="string"?e={type:e,target:r}:e.target||(e.target=r),e=ZS(e),n.dispatcher&&n.dispatcher.call(r,e,t),i&&!e.isPropagationStopped()&&e.bubbles===!0)Fm.call(null,i,e,t);else if(!i&&!e.defaultPrevented&&e.target&&e.target[e.type]){aa.has(e.target)||aa.set(e.target,{});var s=aa.get(e.target);e.target[e.type]&&(s.disabled=!0,typeof e.target[e.type]=="function"&&e.target[e.type](),s.disabled=!1)}return!e.defaultPrevented}function eT(r,e,t){if(Array.isArray(e))return zA(eT,r,e,t);var n=function i(){zs(r,e,i),t.apply(this,arguments)};n.guid=t.guid=t.guid||zc(),bo(r,e,n)}function r7(r,e,t){var n=function i(){zs(r,e,i),t.apply(this,arguments)};n.guid=t.guid=t.guid||zc(),bo(r,e,n)}var aye=Object.freeze({__proto__:null,fixEvent:ZS,on:bo,off:zs,trigger:Fm,one:eT,any:r7}),Fl=30,qn=function(e,t,n){t.guid||(t.guid=zc());var i=t.bind(e);return i.guid=n?n+"_"+t.guid:t.guid,i},Nc=function(e,t){var n=X.performance.now(),i=function(){var a=X.performance.now();a-n>=t&&(e.apply(void 0,arguments),n=a)};return i},oye=function(e,t,n,i){i===void 0&&(i=X);var s,a=function(){i.clearTimeout(s),s=null},o=function(){var u=this,c=arguments,h=function(){s=null,h=null,e.apply(u,c)};i.clearTimeout(s),s=i.setTimeout(h,t)};return o.cancel=a,o},is=function(){};is.prototype.allowedEvents_={};is.prototype.on=function(r,e){var t=this.addEventListener;this.addEventListener=function(){},bo(this,r,e),this.addEventListener=t};is.prototype.addEventListener=is.prototype.on;is.prototype.off=function(r,e){zs(this,r,e)};is.prototype.removeEventListener=is.prototype.off;is.prototype.one=function(r,e){var t=this.addEventListener;this.addEventListener=function(){},eT(this,r,e),this.addEventListener=t};is.prototype.any=function(r,e){var t=this.addEventListener;this.addEventListener=function(){},r7(this,r,e),this.addEventListener=t};is.prototype.trigger=function(r){var e=r.type||r;typeof r=="string"&&(r={type:e}),r=ZS(r),this.allowedEvents_[e]&&this["on"+e]&&this["on"+e](r),Fm(this,r)};is.prototype.dispatchEvent=is.prototype.trigger;var O0;is.prototype.queueTrigger=function(r){var e=this;O0||(O0=new Map);var t=r.type||r,n=O0.get(this);n||(n=new Map,O0.set(this,n));var i=n.get(t);n.delete(t),X.clearTimeout(i);var s=X.setTimeout(function(){n.delete(t),n.size===0&&(n=null,O0.delete(e)),e.trigger(r)},0);n.set(t,s)};var tT=function(e){return typeof e.name=="function"?e.name():typeof e.name=="string"?e.name:e.name_?e.name_:e.constructor&&e.constructor.name?e.constructor.name:typeof e},Oc=function(e){return e instanceof is||!!e.eventBusEl_&&["on","one","off","trigger"].every(function(t){return typeof e[t]=="function"})},lye=function(e,t){Oc(e)?t():(e.eventedCallbacks||(e.eventedCallbacks=[]),e.eventedCallbacks.push(t))},oE=function(e){return typeof e=="string"&&/\S/.test(e)||Array.isArray(e)&&!!e.length},_b=function(e,t,n){if(!e||!e.nodeName&&!Oc(e))throw new Error("Invalid target for "+tT(t)+"#"+n+"; must be a DOM node or evented object.")},n7=function(e,t,n){if(!oE(e))throw new Error("Invalid event type for "+tT(t)+"#"+n+"; must be a non-empty string or array.")},i7=function(e,t,n){if(typeof e!="function")throw new Error("Invalid listener for "+tT(t)+"#"+n+"; must be a function.")},ZC=function(e,t,n){var i=t.length<3||t[0]===e||t[0]===e.eventBusEl_,s,a,o;return i?(s=e.eventBusEl_,t.length>=3&&t.shift(),a=t[0],o=t[1]):(s=t[0],a=t[1],o=t[2]),_b(s,e,n),n7(a,e,n),i7(o,e,n),o=qn(e,o),{isTargetingSelf:i,target:s,type:a,listener:o}},Ih=function(e,t,n,i){_b(e,e,t),e.nodeName?aye[t](e,n,i):e[t](n,i)},uye={on:function(){for(var e=this,t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];var s=ZC(this,n,"on"),a=s.isTargetingSelf,o=s.target,l=s.type,u=s.listener;if(Ih(o,"on",l,u),!a){var c=function(){return e.off(o,l,u)};c.guid=u.guid;var h=function(){return e.off("dispose",c)};h.guid=u.guid,Ih(this,"on","dispose",c),Ih(o,"on","dispose",h)}},one:function(){for(var e=this,t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];var s=ZC(this,n,"one"),a=s.isTargetingSelf,o=s.target,l=s.type,u=s.listener;if(a)Ih(o,"one",l,u);else{var c=function h(){e.off(o,l,h);for(var f=arguments.length,g=new Array(f),v=0;v<f;v++)g[v]=arguments[v];u.apply(null,g)};c.guid=u.guid,Ih(o,"one",l,c)}},any:function(){for(var e=this,t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];var s=ZC(this,n,"any"),a=s.isTargetingSelf,o=s.target,l=s.type,u=s.listener;if(a)Ih(o,"any",l,u);else{var c=function h(){e.off(o,l,h);for(var f=arguments.length,g=new Array(f),v=0;v<f;v++)g[v]=arguments[v];u.apply(null,g)};c.guid=u.guid,Ih(o,"any",l,c)}},off:function(e,t,n){if(!e||oE(e))zs(this.eventBusEl_,e,t);else{var i=e,s=t;_b(i,this,"off"),n7(s,this,"off"),i7(n,this,"off"),n=qn(this,n),this.off("dispose",n),i.nodeName?(zs(i,s,n),zs(i,"dispose",n)):Oc(i)&&(i.off(s,n),i.off("dispose",n))}},trigger:function(e,t){_b(this.eventBusEl_,this,"trigger");var n=e&&typeof e!="string"?e.type:e;if(!oE(n)){var i="Invalid event type for "+tT(this)+"#trigger; must be a non-empty string or object with a type key that has a non-empty value.";if(e)(this.log||Xr).error(i);else throw new Error(i)}return Fm(this.eventBusEl_,e,t)}};function HA(r,e){e===void 0&&(e={});var t=e,n=t.eventBusKey;if(n){if(!r[n].nodeName)throw new Error('The eventBusKey "'+n+'" does not refer to an element.');r.eventBusEl_=r[n]}else r.eventBusEl_=fn("span",{className:"vjs-event-bus"});return ci(r,uye),r.eventedCallbacks&&r.eventedCallbacks.forEach(function(i){i()}),r.on("dispose",function(){r.off(),[r,r.el_,r.eventBusEl_].forEach(function(i){i&&aa.has(i)&&aa.delete(i)}),X.setTimeout(function(){r.eventBusEl_=null},0)}),r}var cye={state:{},setState:function(e){var t=this;typeof e=="function"&&(e=e());var n;return Bp(e,function(i,s){t.state[s]!==i&&(n=n||{},n[s]={from:t.state[s],to:i}),t.state[s]=i}),n&&Oc(this)&&this.trigger({changes:n,type:"statechanged"}),n}};function s7(r,e){return ci(r,cye),r.state=ci({},r.state,e),typeof r.handleStateChanged=="function"&&Oc(r)&&r.on("statechanged",r.handleStateChanged),r}var f_=function(e){return typeof e!="string"?e:e.replace(/./,function(t){return t.toLowerCase()})},xi=function(e){return typeof e!="string"?e:e.replace(/./,function(t){return t.toUpperCase()})},dye=function(e,t){return xi(e)===xi(t)};function Wn(){for(var r={},e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.forEach(function(i){i&&Bp(i,function(s,a){if(!$g(s)){r[a]=s;return}$g(r[a])||(r[a]={}),r[a]=Wn(r[a],s)})}),r}var hye=(function(){function r(){this.map_={}}var e=r.prototype;return e.has=function(n){return n in this.map_},e.delete=function(n){var i=this.has(n);return delete this.map_[n],i},e.set=function(n,i){return this.map_[n]=i,this},e.forEach=function(n,i){for(var s in this.map_)n.call(i,this.map_[s],s,this)},r})(),fye=X.Map?X.Map:hye,pye=(function(){function r(){this.set_={}}var e=r.prototype;return e.has=function(n){return n in this.set_},e.delete=function(n){var i=this.has(n);return delete this.set_[n],i},e.add=function(n){return this.set_[n]=1,this},e.forEach=function(n,i){for(var s in this.set_)n.call(i,s,s,this)},r})(),ew=X.Set?X.Set:pye,Et=(function(){function r(t,n,i){var s=this;if(!t&&this.play?this.player_=t=this:this.player_=t,this.isDisposed_=!1,this.parentComponent_=null,this.options_=Wn({},this.options_),n=this.options_=Wn(this.options_,n),this.id_=n.id||n.el&&n.el.id,!this.id_){var a=t&&t.id&&t.id()||"no_player";this.id_=a+"_component_"+zc()}this.name_=n.name||null,n.el?this.el_=n.el:n.createEl!==!1&&(this.el_=this.createEl()),n.className&&this.el_&&n.className.split(" ").forEach(function(o){return s.addClass(o)}),n.evented!==!1&&(HA(this,{eventBusKey:this.el_?"el_":null}),this.handleLanguagechange=this.handleLanguagechange.bind(this),this.on(this.player_,"languagechange",this.handleLanguagechange)),s7(this,this.constructor.defaultState),this.children_=[],this.childIndex_={},this.childNameIndex_={},this.setTimeoutIds_=new ew,this.setIntervalIds_=new ew,this.rafIds_=new ew,this.namedRafs_=new fye,this.clearingTimersOnDispose_=!1,n.initChildren!==!1&&this.initChildren(),this.ready(i),n.reportTouchActivity!==!1&&this.enableTouchActivity()}var e=r.prototype;return e.dispose=function(n){if(n===void 0&&(n={}),!this.isDisposed_){if(this.readyQueue_&&(this.readyQueue_.length=0),this.trigger({type:"dispose",bubbles:!1}),this.isDisposed_=!0,this.children_)for(var i=this.children_.length-1;i>=0;i--)this.children_[i].dispose&&this.children_[i].dispose();this.children_=null,this.childIndex_=null,this.childNameIndex_=null,this.parentComponent_=null,this.el_&&(this.el_.parentNode&&(n.restoreEl?this.el_.parentNode.replaceChild(n.restoreEl,this.el_):this.el_.parentNode.removeChild(this.el_)),this.el_=null),this.player_=null}},e.isDisposed=function(){return!!this.isDisposed_},e.player=function(){return this.player_},e.options=function(n){return n?(this.options_=Wn(this.options_,n),this.options_):this.options_},e.el=function(){return this.el_},e.createEl=function(n,i,s){return fn(n,i,s)},e.localize=function(n,i,s){s===void 0&&(s=n);var a=this.player_.language&&this.player_.language(),o=this.player_.languages&&this.player_.languages(),l=o&&o[a],u=a&&a.split("-")[0],c=o&&o[u],h=s;return l&&l[n]?h=l[n]:c&&c[n]&&(h=c[n]),i&&(h=h.replace(/\{(\d+)\}/g,function(f,g){var v=i[g-1],y=v;return typeof v>"u"&&(y=f),y})),h},e.handleLanguagechange=function(){},e.contentEl=function(){return this.contentEl_||this.el_},e.id=function(){return this.id_},e.name=function(){return this.name_},e.children=function(){return this.children_},e.getChildById=function(n){return this.childIndex_[n]},e.getChild=function(n){if(n)return this.childNameIndex_[n]},e.getDescendant=function(){for(var n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];i=i.reduce(function(l,u){return l.concat(u)},[]);for(var a=this,o=0;o<i.length;o++)if(a=a.getChild(i[o]),!a||!a.getChild)return;return a},e.addChild=function(n,i,s){i===void 0&&(i={}),s===void 0&&(s=this.children_.length);var a,o;if(typeof n=="string"){o=xi(n);var l=i.componentClass||o;i.name=o;var u=r.getComponent(l);if(!u)throw new Error("Component "+l+" does not exist");if(typeof u!="function")return null;a=new u(this.player_||this,i)}else a=n;if(a.parentComponent_&&a.parentComponent_.removeChild(a),this.children_.splice(s,0,a),a.parentComponent_=this,typeof a.id=="function"&&(this.childIndex_[a.id()]=a),o=o||a.name&&xi(a.name()),o&&(this.childNameIndex_[o]=a,this.childNameIndex_[f_(o)]=a),typeof a.el=="function"&&a.el()){var c=null;this.children_[s+1]&&(this.children_[s+1].el_?c=this.children_[s+1].el_:Mm(this.children_[s+1])&&(c=this.children_[s+1])),this.contentEl().insertBefore(a.el(),c)}return a},e.removeChild=function(n){if(typeof n=="string"&&(n=this.getChild(n)),!(!n||!this.children_)){for(var i=!1,s=this.children_.length-1;s>=0;s--)if(this.children_[s]===n){i=!0,this.children_.splice(s,1);break}if(i){n.parentComponent_=null,this.childIndex_[n.id()]=null,this.childNameIndex_[xi(n.name())]=null,this.childNameIndex_[f_(n.name())]=null;var a=n.el();a&&a.parentNode===this.contentEl()&&this.contentEl().removeChild(n.el())}}},e.initChildren=function(){var n=this,i=this.options_.children;if(i){var s=this.options_,a=function(c){var h=c.name,f=c.opts;if(s[h]!==void 0&&(f=s[h]),f!==!1){f===!0&&(f={}),f.playerOptions=n.options_.playerOptions;var g=n.addChild(h,f);g&&(n[h]=g)}},o,l=r.getComponent("Tech");Array.isArray(i)?o=i:o=Object.keys(i),o.concat(Object.keys(this.options_).filter(function(u){return!o.some(function(c){return typeof c=="string"?u===c:u===c.name})})).map(function(u){var c,h;return typeof u=="string"?(c=u,h=i[c]||n.options_[c]||{}):(c=u.name,h=u),{name:c,opts:h}}).filter(function(u){var c=r.getComponent(u.opts.componentClass||xi(u.name));return c&&!l.isTech(c)}).forEach(a)}},e.buildCSSClass=function(){return""},e.ready=function(n,i){if(i===void 0&&(i=!1),!!n){if(!this.isReady_){this.readyQueue_=this.readyQueue_||[],this.readyQueue_.push(n);return}i?n.call(this):this.setTimeout(n,1)}},e.triggerReady=function(){this.isReady_=!0,this.setTimeout(function(){var n=this.readyQueue_;this.readyQueue_=[],n&&n.length>0&&n.forEach(function(i){i.call(this)},this),this.trigger("ready")},1)},e.$=function(n,i){return Kd(n,i||this.contentEl())},e.$$=function(n,i){return Yj(n,i||this.contentEl())},e.hasClass=function(n){return sf(this.el_,n)},e.addClass=function(n){Lc(this.el_,n)},e.removeClass=function(n){wv(this.el_,n)},e.toggleClass=function(n,i){zj(this.el_,n,i)},e.show=function(){this.removeClass("vjs-hidden")},e.hide=function(){this.addClass("vjs-hidden")},e.lockShowing=function(){this.addClass("vjs-lock-showing")},e.unlockShowing=function(){this.removeClass("vjs-lock-showing")},e.getAttribute=function(n){return Vj(this.el_,n)},e.setAttribute=function(n,i){um(this.el_,n,i)},e.removeAttribute=function(n){QS(this.el_,n)},e.width=function(n,i){return this.dimension("width",n,i)},e.height=function(n,i){return this.dimension("height",n,i)},e.dimensions=function(n,i){this.width(n,!0),this.height(i)},e.dimension=function(n,i,s){if(i!==void 0){(i===null||i!==i)&&(i=0),(""+i).indexOf("%")!==-1||(""+i).indexOf("px")!==-1?this.el_.style[n]=i:i==="auto"?this.el_.style[n]="":this.el_.style[n]=i+"px",s||this.trigger("componentresize");return}if(!this.el_)return 0;var a=this.el_.style[n],o=a.indexOf("px");return parseInt(o!==-1?a.slice(0,o):this.el_["offset"+xi(n)],10)},e.currentDimension=function(n){var i=0;if(n!=="width"&&n!=="height")throw new Error("currentDimension only accepts width or height value");if(i=jg(this.el_,n),i=parseFloat(i),i===0||isNaN(i)){var s="offset"+xi(n);i=this.el_[s]}return i},e.currentDimensions=function(){return{width:this.currentDimension("width"),height:this.currentDimension("height")}},e.currentWidth=function(){return this.currentDimension("width")},e.currentHeight=function(){return this.currentDimension("height")},e.focus=function(){this.el_.focus()},e.blur=function(){this.el_.blur()},e.handleKeyDown=function(n){this.player_&&($r.isEventKey(n,"Tab")||n.stopPropagation(),this.player_.handleKeyDown(n))},e.handleKeyPress=function(n){this.handleKeyDown(n)},e.emitTapEvents=function(){var n=0,i=null,s=10,a=200,o;this.on("touchstart",function(u){u.touches.length===1&&(i={pageX:u.touches[0].pageX,pageY:u.touches[0].pageY},n=X.performance.now(),o=!0)}),this.on("touchmove",function(u){if(u.touches.length>1)o=!1;else if(i){var c=u.touches[0].pageX-i.pageX,h=u.touches[0].pageY-i.pageY,f=Math.sqrt(c*c+h*h);f>s&&(o=!1)}});var l=function(){o=!1};this.on("touchleave",l),this.on("touchcancel",l),this.on("touchend",function(u){if(i=null,o===!0){var c=X.performance.now()-n;c<a&&(u.preventDefault(),this.trigger("tap"))}})},e.enableTouchActivity=function(){if(!(!this.player()||!this.player().reportUserActivity)){var n=qn(this.player(),this.player().reportUserActivity),i;this.on("touchstart",function(){n(),this.clearInterval(i),i=this.setInterval(n,250)});var s=function(o){n(),this.clearInterval(i)};this.on("touchmove",n),this.on("touchend",s),this.on("touchcancel",s)}},e.setTimeout=function(n,i){var s=this,a;return n=qn(this,n),this.clearTimersOnDispose_(),a=X.setTimeout(function(){s.setTimeoutIds_.has(a)&&s.setTimeoutIds_.delete(a),n()},i),this.setTimeoutIds_.add(a),a},e.clearTimeout=function(n){return this.setTimeoutIds_.has(n)&&(this.setTimeoutIds_.delete(n),X.clearTimeout(n)),n},e.setInterval=function(n,i){n=qn(this,n),this.clearTimersOnDispose_();var s=X.setInterval(n,i);return this.setIntervalIds_.add(s),s},e.clearInterval=function(n){return this.setIntervalIds_.has(n)&&(this.setIntervalIds_.delete(n),X.clearInterval(n)),n},e.requestAnimationFrame=function(n){var i=this;if(!this.supportsRaf_)return this.setTimeout(n,1e3/60);this.clearTimersOnDispose_();var s;return n=qn(this,n),s=X.requestAnimationFrame(function(){i.rafIds_.has(s)&&i.rafIds_.delete(s),n()}),this.rafIds_.add(s),s},e.requestNamedAnimationFrame=function(n,i){var s=this;if(!this.namedRafs_.has(n)){this.clearTimersOnDispose_(),i=qn(this,i);var a=this.requestAnimationFrame(function(){i(),s.namedRafs_.has(n)&&s.namedRafs_.delete(n)});return this.namedRafs_.set(n,a),n}},e.cancelNamedAnimationFrame=function(n){this.namedRafs_.has(n)&&(this.cancelAnimationFrame(this.namedRafs_.get(n)),this.namedRafs_.delete(n))},e.cancelAnimationFrame=function(n){return this.supportsRaf_?(this.rafIds_.has(n)&&(this.rafIds_.delete(n),X.cancelAnimationFrame(n)),n):this.clearTimeout(n)},e.clearTimersOnDispose_=function(){var n=this;this.clearingTimersOnDispose_||(this.clearingTimersOnDispose_=!0,this.one("dispose",function(){[["namedRafs_","cancelNamedAnimationFrame"],["rafIds_","cancelAnimationFrame"],["setTimeoutIds_","clearTimeout"],["setIntervalIds_","clearInterval"]].forEach(function(i){var s=i[0],a=i[1];n[s].forEach(function(o,l){return n[a](l)})}),n.clearingTimersOnDispose_=!1}))},r.registerComponent=function(n,i){if(typeof n!="string"||!n)throw new Error('Illegal component name, "'+n+'"; must be a non-empty string.');var s=r.getComponent("Tech"),a=s&&s.isTech(i),o=r===i||r.prototype.isPrototypeOf(i.prototype);if(a||!o){var l;throw a?l="techs must be registered using Tech.registerTech()":l="must be a Component subclass",new Error('Illegal component, "'+n+'"; '+l+".")}n=xi(n),r.components_||(r.components_={});var u=r.getComponent("Player");if(n==="Player"&&u&&u.players){var c=u.players,h=Object.keys(c);if(c&&h.length>0&&h.map(function(f){return c[f]}).every(Boolean))throw new Error("Can not register Player component after player has been created.")}return r.components_[n]=i,r.components_[f_(n)]=i,i},r.getComponent=function(n){if(!(!n||!r.components_))return r.components_[n]},r})();Et.prototype.supportsRaf_=typeof X.requestAnimationFrame=="function"&&typeof X.cancelAnimationFrame=="function";Et.registerComponent("Component",Et);function mye(r,e,t){if(typeof e!="number"||e<0||e>t)throw new Error("Failed to execute '"+r+"' on 'TimeRanges': The index provided ("+e+") is non-numeric or out of bounds (0-"+t+").")}function P3(r,e,t,n){return mye(r,n,t.length-1),t[n][e]}function tw(r){var e;return r===void 0||r.length===0?e={length:0,start:function(){throw new Error("This TimeRanges object is empty")},end:function(){throw new Error("This TimeRanges object is empty")}}:e={length:r.length,start:P3.bind(null,"start",0,r),end:P3.bind(null,"end",1,r)},X.Symbol&&X.Symbol.iterator&&(e[X.Symbol.iterator]=function(){return(r||[]).values()}),e}function af(r,e){return Array.isArray(r)?tw(r):r===void 0||e===void 0?tw():tw([[r,e]])}function a7(r,e){var t=0,n,i;if(!e)return 0;(!r||!r.length)&&(r=af(0,0));for(var s=0;s<r.length;s++)n=r.start(s),i=r.end(s),i>e&&(i=e),t+=i-n;return t/e}function oa(r){if(r instanceof oa)return r;typeof r=="number"?this.code=r:typeof r=="string"?this.message=r:Bc(r)&&(typeof r.code=="number"&&(this.code=r.code),ci(this,r)),this.message||(this.message=oa.defaultMessages[this.code]||"")}oa.prototype.code=0;oa.prototype.message="";oa.prototype.status=null;oa.errorTypes=["MEDIA_ERR_CUSTOM","MEDIA_ERR_ABORTED","MEDIA_ERR_NETWORK","MEDIA_ERR_DECODE","MEDIA_ERR_SRC_NOT_SUPPORTED","MEDIA_ERR_ENCRYPTED"];oa.defaultMessages={1:"You aborted the media playback",2:"A network error caused the media download to fail part-way.",3:"The media playback was aborted due to a corruption problem or because the media used features your browser did not support.",4:"The media could not be loaded, either because the server or network failed or because the format is not supported.",5:"The media is encrypted and we do not have the keys to decrypt it."};for(var ep=0;ep<oa.errorTypes.length;ep++)oa[oa.errorTypes[ep]]=ep,oa.prototype[oa.errorTypes[ep]]=ep;function fg(r){return r!=null&&typeof r.then=="function"}function Eu(r){fg(r)&&r.then(null,function(e){})}var lE=function(e){var t=["kind","label","language","id","inBandMetadataTrackDispatchType","mode","src"].reduce(function(n,i,s){return e[i]&&(n[i]=e[i]),n},{cues:e.cues&&Array.prototype.map.call(e.cues,function(n){return{startTime:n.startTime,endTime:n.endTime,text:n.text,id:n.id}})});return t},gye=function(e){var t=e.$$("track"),n=Array.prototype.map.call(t,function(s){return s.track}),i=Array.prototype.map.call(t,function(s){var a=lE(s.track);return s.src&&(a.src=s.src),a});return i.concat(Array.prototype.filter.call(e.textTracks(),function(s){return n.indexOf(s)===-1}).map(lE))},vye=function(e,t){return e.forEach(function(n){var i=t.addRemoteTextTrack(n).track;!n.src&&n.cues&&n.cues.forEach(function(s){return i.addCue(s)})}),t.textTracks()},R3={textTracksToJson:gye,jsonToTextTracks:vye,trackToJson_:lE},rw="vjs-modal-dialog",Bm=(function(r){Ht(e,r);function e(n,i){var s;return s=r.call(this,n,i)||this,s.handleKeyDown_=function(a){return s.handleKeyDown(a)},s.close_=function(a){return s.close(a)},s.opened_=s.hasBeenOpened_=s.hasBeenFilled_=!1,s.closeable(!s.options_.uncloseable),s.content(s.options_.content),s.contentEl_=fn("div",{className:rw+"-content"},{role:"document"}),s.descEl_=fn("p",{className:rw+"-description vjs-control-text",id:s.el().getAttribute("aria-describedby")}),Sf(s.descEl_,s.description()),s.el_.appendChild(s.descEl_),s.el_.appendChild(s.contentEl_),s}var t=e.prototype;return t.createEl=function(){return r.prototype.createEl.call(this,"div",{className:this.buildCSSClass(),tabIndex:-1},{"aria-describedby":this.id()+"_description","aria-hidden":"true","aria-label":this.label(),role:"dialog"})},t.dispose=function(){this.contentEl_=null,this.descEl_=null,this.previouslyActiveEl_=null,r.prototype.dispose.call(this)},t.buildCSSClass=function(){return rw+" vjs-hidden "+r.prototype.buildCSSClass.call(this)},t.label=function(){return this.localize(this.options_.label||"Modal Window")},t.description=function(){var i=this.options_.description||this.localize("This is a modal window.");return this.closeable()&&(i+=" "+this.localize("This modal can be closed by pressing the Escape key or activating the close button.")),i},t.open=function(){if(!this.opened_){var i=this.player();this.trigger("beforemodalopen"),this.opened_=!0,(this.options_.fillAlways||!this.hasBeenOpened_&&!this.hasBeenFilled_)&&this.fill(),this.wasPlaying_=!i.paused(),this.options_.pauseOnOpen&&this.wasPlaying_&&i.pause(),this.on("keydown",this.handleKeyDown_),this.hadControls_=i.controls(),i.controls(!1),this.show(),this.conditionalFocus_(),this.el().setAttribute("aria-hidden","false"),this.trigger("modalopen"),this.hasBeenOpened_=!0}},t.opened=function(i){return typeof i=="boolean"&&this[i?"open":"close"](),this.opened_},t.close=function(){if(this.opened_){var i=this.player();this.trigger("beforemodalclose"),this.opened_=!1,this.wasPlaying_&&this.options_.pauseOnOpen&&i.play(),this.off("keydown",this.handleKeyDown_),this.hadControls_&&i.controls(!0),this.hide(),this.el().setAttribute("aria-hidden","true"),this.trigger("modalclose"),this.conditionalBlur_(),this.options_.temporary&&this.dispose()}},t.closeable=function(i){if(typeof i=="boolean"){var s=this.closeable_=!!i,a=this.getChild("closeButton");if(s&&!a){var o=this.contentEl_;this.contentEl_=this.el_,a=this.addChild("closeButton",{controlText:"Close Modal Dialog"}),this.contentEl_=o,this.on(a,"close",this.close_)}!s&&a&&(this.off(a,"close",this.close_),this.removeChild(a),a.dispose())}return this.closeable_},t.fill=function(){this.fillWith(this.content())},t.fillWith=function(i){var s=this.contentEl(),a=s.parentNode,o=s.nextSibling;this.trigger("beforemodalfill"),this.hasBeenFilled_=!0,a.removeChild(s),this.empty(),Xj(s,i),this.trigger("modalfill"),o?a.insertBefore(s,o):a.appendChild(s);var l=this.getChild("closeButton");l&&a.appendChild(l.el_)},t.empty=function(){this.trigger("beforemodalempty"),$A(this.contentEl()),this.trigger("modalempty")},t.content=function(i){return typeof i<"u"&&(this.content_=i),this.content_},t.conditionalFocus_=function(){var i=Be.activeElement,s=this.player_.el_;this.previouslyActiveEl_=null,(s.contains(i)||s===i)&&(this.previouslyActiveEl_=i,this.focus())},t.conditionalBlur_=function(){this.previouslyActiveEl_&&(this.previouslyActiveEl_.focus(),this.previouslyActiveEl_=null)},t.handleKeyDown=function(i){if(i.stopPropagation(),$r.isEventKey(i,"Escape")&&this.closeable()){i.preventDefault(),this.close();return}if($r.isEventKey(i,"Tab")){for(var s=this.focusableEls_(),a=this.el_.querySelector(":focus"),o,l=0;l<s.length;l++)if(a===s[l]){o=l;break}Be.activeElement===this.el_&&(o=0),i.shiftKey&&o===0?(s[s.length-1].focus(),i.preventDefault()):!i.shiftKey&&o===s.length-1&&(s[0].focus(),i.preventDefault())}},t.focusableEls_=function(){var i=this.el_.querySelectorAll("*");return Array.prototype.filter.call(i,function(s){return(s instanceof X.HTMLAnchorElement||s instanceof X.HTMLAreaElement)&&s.hasAttribute("href")||(s instanceof X.HTMLInputElement||s instanceof X.HTMLSelectElement||s instanceof X.HTMLTextAreaElement||s instanceof X.HTMLButtonElement)&&!s.hasAttribute("disabled")||s instanceof X.HTMLIFrameElement||s instanceof X.HTMLObjectElement||s instanceof X.HTMLEmbedElement||s.hasAttribute("tabindex")&&s.getAttribute("tabindex")!==-1||s.hasAttribute("contenteditable")})},e})(Et);Bm.prototype.options_={pauseOnOpen:!0,temporary:!0};Et.registerComponent("ModalDialog",Bm);var dm=(function(r){Ht(e,r);function e(n){var i;n===void 0&&(n=[]),i=r.call(this)||this,i.tracks_=[],Object.defineProperty(We(i),"length",{get:function(){return this.tracks_.length}});for(var s=0;s<n.length;s++)i.addTrack(n[s]);return i}var t=e.prototype;return t.addTrack=function(i){var s=this,a=this.tracks_.length;""+a in this||Object.defineProperty(this,a,{get:function(){return this.tracks_[a]}}),this.tracks_.indexOf(i)===-1&&(this.tracks_.push(i),this.trigger({track:i,type:"addtrack",target:this})),i.labelchange_=function(){s.trigger({track:i,type:"labelchange",target:s})},Oc(i)&&i.addEventListener("labelchange",i.labelchange_)},t.removeTrack=function(i){for(var s,a=0,o=this.length;a<o;a++)if(this[a]===i){s=this[a],s.off&&s.off(),this.tracks_.splice(a,1);break}s&&this.trigger({track:s,type:"removetrack",target:this})},t.getTrackById=function(i){for(var s=null,a=0,o=this.length;a<o;a++){var l=this[a];if(l.id===i){s=l;break}}return s},e})(is);dm.prototype.allowedEvents_={change:"change",addtrack:"addtrack",removetrack:"removetrack",labelchange:"labelchange"};for(var yye in dm.prototype.allowedEvents_)dm.prototype["on"+yye]=null;var nw=function(e,t){for(var n=0;n<e.length;n++)!Object.keys(e[n]).length||t.id===e[n].id||(e[n].enabled=!1)},xye=(function(r){Ht(e,r);function e(n){var i;n===void 0&&(n=[]);for(var s=n.length-1;s>=0;s--)if(n[s].enabled){nw(n,n[s]);break}return i=r.call(this,n)||this,i.changing_=!1,i}var t=e.prototype;return t.addTrack=function(i){var s=this;i.enabled&&nw(this,i),r.prototype.addTrack.call(this,i),i.addEventListener&&(i.enabledChange_=function(){s.changing_||(s.changing_=!0,nw(s,i),s.changing_=!1,s.trigger("change"))},i.addEventListener("enabledchange",i.enabledChange_))},t.removeTrack=function(i){r.prototype.removeTrack.call(this,i),i.removeEventListener&&i.enabledChange_&&(i.removeEventListener("enabledchange",i.enabledChange_),i.enabledChange_=null)},e})(dm),iw=function(e,t){for(var n=0;n<e.length;n++)!Object.keys(e[n]).length||t.id===e[n].id||(e[n].selected=!1)},_ye=(function(r){Ht(e,r);function e(n){var i;n===void 0&&(n=[]);for(var s=n.length-1;s>=0;s--)if(n[s].selected){iw(n,n[s]);break}return i=r.call(this,n)||this,i.changing_=!1,Object.defineProperty(We(i),"selectedIndex",{get:function(){for(var o=0;o<this.length;o++)if(this[o].selected)return o;return-1},set:function(){}}),i}var t=e.prototype;return t.addTrack=function(i){var s=this;i.selected&&iw(this,i),r.prototype.addTrack.call(this,i),i.addEventListener&&(i.selectedChange_=function(){s.changing_||(s.changing_=!0,iw(s,i),s.changing_=!1,s.trigger("change"))},i.addEventListener("selectedchange",i.selectedChange_))},t.removeTrack=function(i){r.prototype.removeTrack.call(this,i),i.removeEventListener&&i.selectedChange_&&(i.removeEventListener("selectedchange",i.selectedChange_),i.selectedChange_=null)},e})(dm),o7=(function(r){Ht(e,r);function e(){return r.apply(this,arguments)||this}var t=e.prototype;return t.addTrack=function(i){var s=this;r.prototype.addTrack.call(this,i),this.queueChange_||(this.queueChange_=function(){return s.queueTrigger("change")}),this.triggerSelectedlanguagechange||(this.triggerSelectedlanguagechange_=function(){return s.trigger("selectedlanguagechange")}),i.addEventListener("modechange",this.queueChange_);var a=["metadata","chapters"];a.indexOf(i.kind)===-1&&i.addEventListener("modechange",this.triggerSelectedlanguagechange_)},t.removeTrack=function(i){r.prototype.removeTrack.call(this,i),i.removeEventListener&&(this.queueChange_&&i.removeEventListener("modechange",this.queueChange_),this.selectedlanguagechange_&&i.removeEventListener("modechange",this.triggerSelectedlanguagechange_))},e})(dm),bye=(function(){function r(t){t===void 0&&(t=[]),this.trackElements_=[],Object.defineProperty(this,"length",{get:function(){return this.trackElements_.length}});for(var n=0,i=t.length;n<i;n++)this.addTrackElement_(t[n])}var e=r.prototype;return e.addTrackElement_=function(n){var i=this.trackElements_.length;""+i in this||Object.defineProperty(this,i,{get:function(){return this.trackElements_[i]}}),this.trackElements_.indexOf(n)===-1&&this.trackElements_.push(n)},e.getTrackElementByTrack_=function(n){for(var i,s=0,a=this.trackElements_.length;s<a;s++)if(n===this.trackElements_[s].track){i=this.trackElements_[s];break}return i},e.removeTrackElement_=function(n){for(var i=0,s=this.trackElements_.length;i<s;i++)if(n===this.trackElements_[i]){this.trackElements_[i].track&&typeof this.trackElements_[i].track.off=="function"&&this.trackElements_[i].track.off(),typeof this.trackElements_[i].off=="function"&&this.trackElements_[i].off(),this.trackElements_.splice(i,1);break}},r})(),L3=(function(){function r(t){r.prototype.setCues_.call(this,t),Object.defineProperty(this,"length",{get:function(){return this.length_}})}var e=r.prototype;return e.setCues_=function(n){var i=this.length||0,s=0,a=n.length;this.cues_=n,this.length_=n.length;var o=function(u){""+u in this||Object.defineProperty(this,""+u,{get:function(){return this.cues_[u]}})};if(i<a)for(s=i;s<a;s++)o.call(this,s)},e.getCueById=function(n){for(var i=null,s=0,a=this.length;s<a;s++){var o=this[s];if(o.id===n){i=o;break}}return i},r})(),Sye={alternative:"alternative",captions:"captions",main:"main",sign:"sign",subtitles:"subtitles",commentary:"commentary"},Tye={alternative:"alternative",descriptions:"descriptions",main:"main","main-desc":"main-desc",translation:"translation",commentary:"commentary"},Cye={subtitles:"subtitles",captions:"captions",descriptions:"descriptions",chapters:"chapters",metadata:"metadata"},O3={disabled:"disabled",hidden:"hidden",showing:"showing"},VA=(function(r){Ht(e,r);function e(t){var n;t===void 0&&(t={}),n=r.call(this)||this;var i={id:t.id||"vjs_track_"+zc(),kind:t.kind||"",language:t.language||""},s=t.label||"",a=function(u){Object.defineProperty(We(n),u,{get:function(){return i[u]},set:function(){}})};for(var o in i)a(o);return Object.defineProperty(We(n),"label",{get:function(){return s},set:function(u){u!==s&&(s=u,this.trigger("labelchange"))}}),n}return e})(is),WA=function(e){var t=["protocol","hostname","port","pathname","search","hash","host"],n=Be.createElement("a");n.href=e;for(var i={},s=0;s<t.length;s++)i[t[s]]=n[t[s]];return i.protocol==="http:"&&(i.host=i.host.replace(/:80$/,"")),i.protocol==="https:"&&(i.host=i.host.replace(/:443$/,"")),i.protocol||(i.protocol=X.location.protocol),i.host||(i.host=X.location.host),i},l7=function(e){if(!e.match(/^https?:\/\//)){var t=Be.createElement("a");t.href=e,e=t.href}return e},qA=function(e){if(typeof e=="string"){var t=/^(\/?)([\s\S]*?)((?:\.{1,2}|[^\/]+?)(\.([^\.\/\?]+)))(?:[\/]*|[\?].*)$/,n=t.exec(e);if(n)return n.pop().toLowerCase()}return""},rT=function(e,t){t===void 0&&(t=X.location);var n=WA(e),i=n.protocol===":"?t.protocol:n.protocol,s=i+n.host!==t.protocol+t.host;return s},wye=Object.freeze({__proto__:null,parseUrl:WA,getAbsoluteURL:l7,getFileExtension:qA,isCrossOrigin:rT}),M3=function(e,t){var n=new X.WebVTT.Parser(X,X.vttjs,X.WebVTT.StringDecoder()),i=[];n.oncue=function(s){t.addCue(s)},n.onparsingerror=function(s){i.push(s)},n.onflush=function(){t.trigger({type:"loadeddata",target:t})},n.parse(e),i.length>0&&(X.console&&X.console.groupCollapsed&&X.console.groupCollapsed("Text Track parsing errors for "+t.src),i.forEach(function(s){return Xr.error(s)}),X.console&&X.console.groupEnd&&X.console.groupEnd()),n.flush()},F3=function(e,t){var n={uri:e},i=rT(e);i&&(n.cors=i);var s=t.tech_.crossOrigin()==="use-credentials";s&&(n.withCredentials=s),fj(n,qn(this,function(a,o,l){if(a)return Xr.error(a,o);t.loaded_=!0,typeof X.WebVTT!="function"?t.tech_&&t.tech_.any(["vttjsloaded","vttjserror"],function(u){if(u.type==="vttjserror"){Xr.error("vttjs failed to load, stopping trying to process "+t.src);return}return M3(l,t)}):M3(l,t)}))},Ev=(function(r){Ht(e,r);function e(n){var i;if(n===void 0&&(n={}),!n.tech)throw new Error("A tech was not provided.");var s=Wn(n,{kind:Cye[n.kind]||"subtitles",language:n.language||n.srclang||""}),a=O3[s.mode]||"disabled",o=s.default;(s.kind==="metadata"||s.kind==="chapters")&&(a="hidden"),i=r.call(this,s)||this,i.tech_=s.tech,i.cues_=[],i.activeCues_=[],i.preload_=i.tech_.preloadTextTracks!==!1;var l=new L3(i.cues_),u=new L3(i.activeCues_),c=!1;i.timeupdateHandler=qn(We(i),function(f){if(f===void 0&&(f={}),!this.tech_.isDisposed()){if(!this.tech_.isReady_){f.type!=="timeupdate"&&(this.rvf_=this.tech_.requestVideoFrameCallback(this.timeupdateHandler));return}this.activeCues=this.activeCues,c&&(this.trigger("cuechange"),c=!1),f.type!=="timeupdate"&&(this.rvf_=this.tech_.requestVideoFrameCallback(this.timeupdateHandler))}});var h=function(){i.stopTracking()};return i.tech_.one("dispose",h),a!=="disabled"&&i.startTracking(),Object.defineProperties(We(i),{default:{get:function(){return o},set:function(){}},mode:{get:function(){return a},set:function(g){O3[g]&&a!==g&&(a=g,!this.preload_&&a!=="disabled"&&this.cues.length===0&&F3(this.src,this),this.stopTracking(),a!=="disabled"&&this.startTracking(),this.trigger("modechange"))}},cues:{get:function(){return this.loaded_?l:null},set:function(){}},activeCues:{get:function(){if(!this.loaded_)return null;if(this.cues.length===0)return u;for(var g=this.tech_.currentTime(),v=[],y=0,_=this.cues.length;y<_;y++){var C=this.cues[y];(C.startTime<=g&&C.endTime>=g||C.startTime===C.endTime&&C.startTime<=g&&C.startTime+.5>=g)&&v.push(C)}if(c=!1,v.length!==this.activeCues_.length)c=!0;else for(var E=0;E<v.length;E++)this.activeCues_.indexOf(v[E])===-1&&(c=!0);return this.activeCues_=v,u.setCues_(this.activeCues_),u},set:function(){}}}),s.src?(i.src=s.src,i.preload_||(i.loaded_=!0),(i.preload_||s.kind!=="subtitles"&&s.kind!=="captions")&&F3(i.src,We(i))):i.loaded_=!0,i}var t=e.prototype;return t.startTracking=function(){this.rvf_=this.tech_.requestVideoFrameCallback(this.timeupdateHandler),this.tech_.on("timeupdate",this.timeupdateHandler)},t.stopTracking=function(){this.rvf_&&(this.tech_.cancelVideoFrameCallback(this.rvf_),this.rvf_=void 0),this.tech_.off("timeupdate",this.timeupdateHandler)},t.addCue=function(i){var s=i;if(s.constructor&&s.constructor.name!=="VTTCue"){s=new X.vttjs.VTTCue(i.startTime,i.endTime,i.text);for(var a in i)a in s||(s[a]=i[a]);s.id=i.id,s.originalCue_=i}for(var o=this.tech_.textTracks(),l=0;l<o.length;l++)o[l]!==this&&o[l].removeCue(s);this.cues_.push(s),this.cues.setCues_(this.cues_)},t.removeCue=function(i){for(var s=this.cues_.length;s--;){var a=this.cues_[s];if(a===i||a.originalCue_&&a.originalCue_===i){this.cues_.splice(s,1),this.cues.setCues_(this.cues_);break}}},e})(VA);Ev.prototype.allowedEvents_={cuechange:"cuechange"};var u7=(function(r){Ht(e,r);function e(t){var n;t===void 0&&(t={});var i=Wn(t,{kind:Tye[t.kind]||""});n=r.call(this,i)||this;var s=!1;return Object.defineProperty(We(n),"enabled",{get:function(){return s},set:function(o){typeof o!="boolean"||o===s||(s=o,this.trigger("enabledchange"))}}),i.enabled&&(n.enabled=i.enabled),n.loaded_=!0,n}return e})(VA),c7=(function(r){Ht(e,r);function e(t){var n;t===void 0&&(t={});var i=Wn(t,{kind:Sye[t.kind]||""});n=r.call(this,i)||this;var s=!1;return Object.defineProperty(We(n),"selected",{get:function(){return s},set:function(o){typeof o!="boolean"||o===s||(s=o,this.trigger("selectedchange"))}}),i.selected&&(n.selected=i.selected),n}return e})(VA),d7=0,Eye=1,h7=2,kye=3,Nm=(function(r){Ht(e,r);function e(t){var n;t===void 0&&(t={}),n=r.call(this)||this;var i,s=new Ev(t);return n.kind=s.kind,n.src=s.src,n.srclang=s.language,n.label=s.label,n.default=s.default,Object.defineProperties(We(n),{readyState:{get:function(){return i}},track:{get:function(){return s}}}),i=d7,s.addEventListener("loadeddata",function(){i=h7,n.trigger({type:"load",target:We(n)})}),n}return e})(is);Nm.prototype.allowedEvents_={load:"load"};Nm.NONE=d7;Nm.LOADING=Eye;Nm.LOADED=h7;Nm.ERROR=kye;var Jo={audio:{ListClass:xye,TrackClass:u7,capitalName:"Audio"},video:{ListClass:_ye,TrackClass:c7,capitalName:"Video"},text:{ListClass:o7,TrackClass:Ev,capitalName:"Text"}};Object.keys(Jo).forEach(function(r){Jo[r].getterName=r+"Tracks",Jo[r].privateName=r+"Tracks_"});var hm={remoteText:{ListClass:o7,TrackClass:Ev,capitalName:"RemoteText",getterName:"remoteTextTracks",privateName:"remoteTextTracks_"},remoteTextEl:{ListClass:bye,TrackClass:Nm,capitalName:"RemoteTextTrackEls",getterName:"remoteTextTrackEls",privateName:"remoteTextTrackEls_"}},ra=sr({},Jo,hm);hm.names=Object.keys(hm);Jo.names=Object.keys(Jo);ra.names=[].concat(hm.names).concat(Jo.names);function Aye(r,e,t,n,i){i===void 0&&(i={});var s=r.textTracks();i.kind=e,t&&(i.label=t),n&&(i.language=n),i.tech=r;var a=new ra.text.TrackClass(i);return s.addTrack(a),a}var Un=(function(r){Ht(e,r);function e(n,i){var s;return n===void 0&&(n={}),i===void 0&&(i=function(){}),n.reportTouchActivity=!1,s=r.call(this,null,n,i)||this,s.onDurationChange_=function(a){return s.onDurationChange(a)},s.trackProgress_=function(a){return s.trackProgress(a)},s.trackCurrentTime_=function(a){return s.trackCurrentTime(a)},s.stopTrackingCurrentTime_=function(a){return s.stopTrackingCurrentTime(a)},s.disposeSourceHandler_=function(a){return s.disposeSourceHandler(a)},s.queuedHanders_=new Set,s.hasStarted_=!1,s.on("playing",function(){this.hasStarted_=!0}),s.on("loadstart",function(){this.hasStarted_=!1}),ra.names.forEach(function(a){var o=ra[a];n&&n[o.getterName]&&(s[o.privateName]=n[o.getterName])}),s.featuresProgressEvents||s.manualProgressOn(),s.featuresTimeupdateEvents||s.manualTimeUpdatesOn(),["Text","Audio","Video"].forEach(function(a){n["native"+a+"Tracks"]===!1&&(s["featuresNative"+a+"Tracks"]=!1)}),n.nativeCaptions===!1||n.nativeTextTracks===!1?s.featuresNativeTextTracks=!1:(n.nativeCaptions===!0||n.nativeTextTracks===!0)&&(s.featuresNativeTextTracks=!0),s.featuresNativeTextTracks||s.emulateTextTracks(),s.preloadTextTracks=n.preloadTextTracks!==!1,s.autoRemoteTextTracks_=new ra.text.ListClass,s.initTrackListeners(),n.nativeControlsForTouch||s.emitTapEvents(),s.constructor&&(s.name_=s.constructor.name||"Unknown Tech"),s}var t=e.prototype;return t.triggerSourceset=function(i){var s=this;this.isReady_||this.one("ready",function(){return s.setTimeout(function(){return s.triggerSourceset(i)},1)}),this.trigger({src:i,type:"sourceset"})},t.manualProgressOn=function(){this.on("durationchange",this.onDurationChange_),this.manualProgress=!0,this.one("ready",this.trackProgress_)},t.manualProgressOff=function(){this.manualProgress=!1,this.stopTrackingProgress(),this.off("durationchange",this.onDurationChange_)},t.trackProgress=function(i){this.stopTrackingProgress(),this.progressInterval=this.setInterval(qn(this,function(){var s=this.bufferedPercent();this.bufferedPercent_!==s&&this.trigger("progress"),this.bufferedPercent_=s,s===1&&this.stopTrackingProgress()}),500)},t.onDurationChange=function(i){this.duration_=this.duration()},t.buffered=function(){return af(0,0)},t.bufferedPercent=function(){return a7(this.buffered(),this.duration_)},t.stopTrackingProgress=function(){this.clearInterval(this.progressInterval)},t.manualTimeUpdatesOn=function(){this.manualTimeUpdates=!0,this.on("play",this.trackCurrentTime_),this.on("pause",this.stopTrackingCurrentTime_)},t.manualTimeUpdatesOff=function(){this.manualTimeUpdates=!1,this.stopTrackingCurrentTime(),this.off("play",this.trackCurrentTime_),this.off("pause",this.stopTrackingCurrentTime_)},t.trackCurrentTime=function(){this.currentTimeInterval&&this.stopTrackingCurrentTime(),this.currentTimeInterval=this.setInterval(function(){this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},250)},t.stopTrackingCurrentTime=function(){this.clearInterval(this.currentTimeInterval),this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},t.dispose=function(){this.clearTracks(Jo.names),this.manualProgress&&this.manualProgressOff(),this.manualTimeUpdates&&this.manualTimeUpdatesOff(),r.prototype.dispose.call(this)},t.clearTracks=function(i){var s=this;i=[].concat(i),i.forEach(function(a){for(var o=s[a+"Tracks"]()||[],l=o.length;l--;){var u=o[l];a==="text"&&s.removeRemoteTextTrack(u),o.removeTrack(u)}})},t.cleanupAutoTextTracks=function(){for(var i=this.autoRemoteTextTracks_||[],s=i.length;s--;){var a=i[s];this.removeRemoteTextTrack(a)}},t.reset=function(){},t.crossOrigin=function(){},t.setCrossOrigin=function(){},t.error=function(i){return i!==void 0&&(this.error_=new oa(i),this.trigger("error")),this.error_},t.played=function(){return this.hasStarted_?af(0,0):af()},t.play=function(){},t.setScrubbing=function(){},t.scrubbing=function(){},t.setCurrentTime=function(){this.manualTimeUpdates&&this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},t.initTrackListeners=function(){var i=this;Jo.names.forEach(function(s){var a=Jo[s],o=function(){i.trigger(s+"trackchange")},l=i[a.getterName]();l.addEventListener("removetrack",o),l.addEventListener("addtrack",o),i.on("dispose",function(){l.removeEventListener("removetrack",o),l.removeEventListener("addtrack",o)})})},t.addWebVttScript_=function(){var i=this;if(!X.WebVTT)if(Be.body.contains(this.el())){if(!this.options_["vtt.js"]&&$g(z_)&&Object.keys(z_).length>0){this.trigger("vttjsloaded");return}var s=Be.createElement("script");s.src=this.options_["vtt.js"]||"https://vjs.zencdn.net/vttjs/0.14.1/vtt.min.js",s.onload=function(){i.trigger("vttjsloaded")},s.onerror=function(){i.trigger("vttjserror")},this.on("dispose",function(){s.onload=null,s.onerror=null}),X.WebVTT=!0,this.el().parentNode.appendChild(s)}else this.ready(this.addWebVttScript_)},t.emulateTextTracks=function(){var i=this,s=this.textTracks(),a=this.remoteTextTracks(),o=function(f){return s.addTrack(f.track)},l=function(f){return s.removeTrack(f.track)};a.on("addtrack",o),a.on("removetrack",l),this.addWebVttScript_();var u=function(){return i.trigger("texttrackchange")},c=function(){u();for(var f=0;f<s.length;f++){var g=s[f];g.removeEventListener("cuechange",u),g.mode==="showing"&&g.addEventListener("cuechange",u)}};c(),s.addEventListener("change",c),s.addEventListener("addtrack",c),s.addEventListener("removetrack",c),this.on("dispose",function(){a.off("addtrack",o),a.off("removetrack",l),s.removeEventListener("change",c),s.removeEventListener("addtrack",c),s.removeEventListener("removetrack",c);for(var h=0;h<s.length;h++){var f=s[h];f.removeEventListener("cuechange",u)}})},t.addTextTrack=function(i,s,a){if(!i)throw new Error("TextTrack kind is required but was not provided");return Aye(this,i,s,a)},t.createRemoteTextTrack=function(i){var s=Wn(i,{tech:this});return new hm.remoteTextEl.TrackClass(s)},t.addRemoteTextTrack=function(i,s){var a=this;i===void 0&&(i={});var o=this.createRemoteTextTrack(i);return s!==!0&&s!==!1&&(Xr.warn('Calling addRemoteTextTrack without explicitly setting the "manualCleanup" parameter to `true` is deprecated and default to `false` in future version of video.js'),s=!0),this.remoteTextTrackEls().addTrackElement_(o),this.remoteTextTracks().addTrack(o.track),s!==!0&&this.ready(function(){return a.autoRemoteTextTracks_.addTrack(o.track)}),o},t.removeRemoteTextTrack=function(i){var s=this.remoteTextTrackEls().getTrackElementByTrack_(i);this.remoteTextTrackEls().removeTrackElement_(s),this.remoteTextTracks().removeTrack(i),this.autoRemoteTextTracks_.removeTrack(i)},t.getVideoPlaybackQuality=function(){return{}},t.requestPictureInPicture=function(){var i=this.options_.Promise||X.Promise;if(i)return i.reject()},t.disablePictureInPicture=function(){return!0},t.setDisablePictureInPicture=function(){},t.requestVideoFrameCallback=function(i){var s=this,a=zc();return!this.isReady_||this.paused()?(this.queuedHanders_.add(a),this.one("playing",function(){s.queuedHanders_.has(a)&&(s.queuedHanders_.delete(a),i())})):this.requestNamedAnimationFrame(a,i),a},t.cancelVideoFrameCallback=function(i){this.queuedHanders_.has(i)?this.queuedHanders_.delete(i):this.cancelNamedAnimationFrame(i)},t.setPoster=function(){},t.playsinline=function(){},t.setPlaysinline=function(){},t.overrideNativeAudioTracks=function(){},t.overrideNativeVideoTracks=function(){},t.canPlayType=function(){return""},e.canPlayType=function(){return""},e.canPlaySource=function(i,s){return e.canPlayType(i.type)},e.isTech=function(i){return i.prototype instanceof e||i instanceof e||i===e},e.registerTech=function(i,s){if(e.techs_||(e.techs_={}),!e.isTech(s))throw new Error("Tech "+i+" must be a Tech");if(!e.canPlayType)throw new Error("Techs must have a static canPlayType method on them");if(!e.canPlaySource)throw new Error("Techs must have a static canPlaySource method on them");return i=xi(i),e.techs_[i]=s,e.techs_[f_(i)]=s,i!=="Tech"&&e.defaultTechOrder_.push(i),s},e.getTech=function(i){if(i){if(e.techs_&&e.techs_[i])return e.techs_[i];if(i=xi(i),X&&X.videojs&&X.videojs[i])return Xr.warn("The "+i+" tech was added to the videojs object when it should be registered using videojs.registerTech(name, tech)"),X.videojs[i]}},e})(Et);ra.names.forEach(function(r){var e=ra[r];Un.prototype[e.getterName]=function(){return this[e.privateName]=this[e.privateName]||new e.ListClass,this[e.privateName]}});Un.prototype.featuresVolumeControl=!0;Un.prototype.featuresMuteControl=!0;Un.prototype.featuresFullscreenResize=!1;Un.prototype.featuresPlaybackRate=!1;Un.prototype.featuresProgressEvents=!1;Un.prototype.featuresSourceset=!1;Un.prototype.featuresTimeupdateEvents=!1;Un.prototype.featuresNativeTextTracks=!1;Un.prototype.featuresVideoFrameCallback=!1;Un.withSourceHandlers=function(r){r.registerSourceHandler=function(t,n){var i=r.sourceHandlers;i||(i=r.sourceHandlers=[]),n===void 0&&(n=i.length),i.splice(n,0,t)},r.canPlayType=function(t){for(var n=r.sourceHandlers||[],i,s=0;s<n.length;s++)if(i=n[s].canPlayType(t),i)return i;return""},r.selectSourceHandler=function(t,n){for(var i=r.sourceHandlers||[],s,a=0;a<i.length;a++)if(s=i[a].canHandleSource(t,n),s)return i[a];return null},r.canPlaySource=function(t,n){var i=r.selectSourceHandler(t,n);return i?i.canHandleSource(t,n):""};var e=["seekable","seeking","duration"];e.forEach(function(t){var n=this[t];typeof n=="function"&&(this[t]=function(){return this.sourceHandler_&&this.sourceHandler_[t]?this.sourceHandler_[t].apply(this.sourceHandler_,arguments):n.apply(this,arguments)})},r.prototype),r.prototype.setSource=function(t){var n=r.selectSourceHandler(t,this.options_);n||(r.nativeSourceHandler?n=r.nativeSourceHandler:Xr.error("No source handler found for the current source.")),this.disposeSourceHandler(),this.off("dispose",this.disposeSourceHandler_),n!==r.nativeSourceHandler&&(this.currentSource_=t),this.sourceHandler_=n.handleSource(t,this,this.options_),this.one("dispose",this.disposeSourceHandler_)},r.prototype.disposeSourceHandler=function(){this.currentSource_&&(this.clearTracks(["audio","video"]),this.currentSource_=null),this.cleanupAutoTextTracks(),this.sourceHandler_&&(this.sourceHandler_.dispose&&this.sourceHandler_.dispose(),this.sourceHandler_=null)}};Et.registerComponent("Tech",Un);Un.registerTech("Tech",Un);Un.defaultTechOrder_=[];var of={},uE={},bb={};function Dye(r,e){of[r]=of[r]||[],of[r].push(e)}function Iye(r,e,t){r.setTimeout(function(){return Mh(e,of[e.type],t,r)},1)}function Pye(r,e){r.forEach(function(t){return t.setTech&&t.setTech(e)})}function Rye(r,e,t){return r.reduceRight(GA(t),e[t]())}function Lye(r,e,t,n){return e[t](r.reduce(GA(t),n))}function B3(r,e,t,n){n===void 0&&(n=null);var i="call"+xi(t),s=r.reduce(GA(i),n),a=s===bb,o=a?null:e[t](s);return Fye(r,t,o,a),o}var Oye={buffered:1,currentTime:1,duration:1,muted:1,played:1,paused:1,seekable:1,volume:1,ended:1},Mye={setCurrentTime:1,setMuted:1,setVolume:1},N3={play:1,pause:1};function GA(r){return function(e,t){return e===bb?bb:t[r]?t[r](e):e}}function Fye(r,e,t,n){for(var i=r.length-1;i>=0;i--){var s=r[i];s[e]&&s[e](n,t)}}function Bye(r){uE[r.id()]=null}function Nye(r,e){var t=uE[r.id()],n=null;if(t==null)return n=e(r),uE[r.id()]=[[e,n]],n;for(var i=0;i<t.length;i++){var s=t[i],a=s[0],o=s[1];a===e&&(n=o)}return n===null&&(n=e(r),t.push([e,n])),n}function Mh(r,e,t,n,i,s){r===void 0&&(r={}),e===void 0&&(e=[]),i===void 0&&(i=[]),s===void 0&&(s=!1);var a=e,o=a[0],l=a.slice(1);if(typeof o=="string")Mh(r,of[o],t,n,i,s);else if(o){var u=Nye(n,o);if(!u.setSource)return i.push(u),Mh(r,l,t,n,i,s);u.setSource(ci({},r),function(c,h){if(c)return Mh(r,l,t,n,i,s);i.push(u),Mh(h,r.type===h.type?l:of[h.type],t,n,i,s)})}else l.length?Mh(r,l,t,n,i,s):s?t(r,i):Mh(r,of["*"],t,n,i,!0)}var Uye={opus:"video/ogg",ogv:"video/ogg",mp4:"video/mp4",mov:"video/mp4",m4v:"video/mp4",mkv:"video/x-matroska",m4a:"audio/mp4",mp3:"audio/mpeg",aac:"audio/aac",caf:"audio/x-caf",flac:"audio/flac",oga:"audio/ogg",wav:"audio/wav",m3u8:"application/x-mpegURL",mpd:"application/dash+xml",jpg:"image/jpeg",jpeg:"image/jpeg",gif:"image/gif",png:"image/png",svg:"image/svg+xml",webp:"image/webp"},Sb=function(e){e===void 0&&(e="");var t=qA(e),n=Uye[t.toLowerCase()];return n||""},$ye=function(e,t){if(!t)return"";if(e.cache_.source.src===t&&e.cache_.source.type)return e.cache_.source.type;var n=e.cache_.sources.filter(function(o){return o.src===t});if(n.length)return n[0].type;for(var i=e.$$("source"),s=0;s<i.length;s++){var a=i[s];if(a.type&&a.src&&a.src===t)return a.type}return Sb(t)},jye=function r(e){if(Array.isArray(e)){var t=[];e.forEach(function(n){n=r(n),Array.isArray(n)?t=t.concat(n):Bc(n)&&t.push(n)}),e=t}else typeof e=="string"&&e.trim()?e=[U3({src:e})]:Bc(e)&&typeof e.src=="string"&&e.src&&e.src.trim()?e=[U3(e)]:e=[];return e};function U3(r){if(!r.type){var e=Sb(r.src);e&&(r.type=e)}return r}var zye=(function(r){Ht(e,r);function e(t,n,i){var s,a=Wn({createEl:!1},n);if(s=r.call(this,t,a,i)||this,!n.playerOptions.sources||n.playerOptions.sources.length===0)for(var o=0,l=n.playerOptions.techOrder;o<l.length;o++){var u=xi(l[o]),c=Un.getTech(u);if(u||(c=Et.getComponent(u)),c&&c.isSupported()){t.loadTech_(u);break}}else t.src(n.playerOptions.sources);return s}return e})(Et);Et.registerComponent("MediaLoader",zye);var nT=(function(r){Ht(e,r);function e(n,i){var s;return s=r.call(this,n,i)||this,s.options_.controlText&&s.controlText(s.options_.controlText),s.handleMouseOver_=function(a){return s.handleMouseOver(a)},s.handleMouseOut_=function(a){return s.handleMouseOut(a)},s.handleClick_=function(a){return s.handleClick(a)},s.handleKeyDown_=function(a){return s.handleKeyDown(a)},s.emitTapEvents(),s.enable(),s}var t=e.prototype;return t.createEl=function(i,s,a){i===void 0&&(i="div"),s===void 0&&(s={}),a===void 0&&(a={}),s=ci({className:this.buildCSSClass(),tabIndex:0},s),i==="button"&&Xr.error("Creating a ClickableComponent with an HTML element of "+i+" is not supported; use a Button instead."),a=ci({role:"button"},a),this.tabIndex_=s.tabIndex;var o=fn(i,s,a);return o.appendChild(fn("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),this.createControlTextEl(o),o},t.dispose=function(){this.controlTextEl_=null,r.prototype.dispose.call(this)},t.createControlTextEl=function(i){return this.controlTextEl_=fn("span",{className:"vjs-control-text"},{"aria-live":"polite"}),i&&i.appendChild(this.controlTextEl_),this.controlText(this.controlText_,i),this.controlTextEl_},t.controlText=function(i,s){if(s===void 0&&(s=this.el()),i===void 0)return this.controlText_||"Need Text";var a=this.localize(i);this.controlText_=i,Sf(this.controlTextEl_,a),!this.nonIconControl&&!this.player_.options_.noUITitleAttributes&&s.setAttribute("title",a)},t.buildCSSClass=function(){return"vjs-control vjs-button "+r.prototype.buildCSSClass.call(this)},t.enable=function(){this.enabled_||(this.enabled_=!0,this.removeClass("vjs-disabled"),this.el_.setAttribute("aria-disabled","false"),typeof this.tabIndex_<"u"&&this.el_.setAttribute("tabIndex",this.tabIndex_),this.on(["tap","click"],this.handleClick_),this.on("keydown",this.handleKeyDown_))},t.disable=function(){this.enabled_=!1,this.addClass("vjs-disabled"),this.el_.setAttribute("aria-disabled","true"),typeof this.tabIndex_<"u"&&this.el_.removeAttribute("tabIndex"),this.off("mouseover",this.handleMouseOver_),this.off("mouseout",this.handleMouseOut_),this.off(["tap","click"],this.handleClick_),this.off("keydown",this.handleKeyDown_)},t.handleLanguagechange=function(){this.controlText(this.controlText_)},t.handleClick=function(i){this.options_.clickHandler&&this.options_.clickHandler.call(this,arguments)},t.handleKeyDown=function(i){$r.isEventKey(i,"Space")||$r.isEventKey(i,"Enter")?(i.preventDefault(),i.stopPropagation(),this.trigger("click")):r.prototype.handleKeyDown.call(this,i)},e})(Et);Et.registerComponent("ClickableComponent",nT);var Hye=(function(r){Ht(e,r);function e(n,i){var s;return s=r.call(this,n,i)||this,s.update(),s.update_=function(a){return s.update(a)},n.on("posterchange",s.update_),s}var t=e.prototype;return t.dispose=function(){this.player().off("posterchange",this.update_),r.prototype.dispose.call(this)},t.createEl=function(){var i=fn("div",{className:"vjs-poster",tabIndex:-1});return i},t.update=function(i){var s=this.player().poster();this.setSrc(s),s?this.show():this.hide()},t.setSrc=function(i){var s="";i&&(s='url("'+i+'")'),this.el_.style.backgroundImage=s},t.handleClick=function(i){if(this.player_.controls()){var s=this.player_.usingPlugin("eme")&&this.player_.eme.sessions&&this.player_.eme.sessions.length>0;this.player_.tech(!0)&&!((Cv||Tv)&&s)&&this.player_.tech(!0).focus(),this.player_.paused()?Eu(this.player_.play()):this.player_.pause()}},e})(nT);Et.registerComponent("PosterImage",Hye);var jo="#222",$3="#ccc",Vye={monospace:"monospace",sansSerif:"sans-serif",serif:"serif",monospaceSansSerif:'"Andale Mono", "Lucida Console", monospace',monospaceSerif:'"Courier New", monospace',proportionalSansSerif:"sans-serif",proportionalSerif:"serif",casual:'"Comic Sans MS", Impact, fantasy',script:'"Monotype Corsiva", cursive',smallcaps:'"Andale Mono", "Lucida Console", monospace, sans-serif'};function sw(r,e){var t;if(r.length===4)t=r[1]+r[1]+r[2]+r[2]+r[3]+r[3];else if(r.length===7)t=r.slice(1);else throw new Error("Invalid color code provided, "+r+"; must be formatted as e.g. #f0e or #f604e2.");return"rgba("+parseInt(t.slice(0,2),16)+","+parseInt(t.slice(2,4),16)+","+parseInt(t.slice(4,6),16)+","+e+")"}function aw(r,e,t){try{r.style[e]=t}catch{return}}var Wye=(function(r){Ht(e,r);function e(n,i,s){var a;a=r.call(this,n,i,s)||this;var o=function(u){return a.updateDisplay(u)};return n.on("loadstart",function(l){return a.toggleDisplay(l)}),n.on("texttrackchange",o),n.on("loadedmetadata",function(l){return a.preselectTrack(l)}),n.ready(qn(We(a),function(){if(n.tech_&&n.tech_.featuresNativeTextTracks){this.hide();return}n.on("fullscreenchange",o),n.on("playerresize",o),X.addEventListener("orientationchange",o),n.on("dispose",function(){return X.removeEventListener("orientationchange",o)});for(var l=this.options_.playerOptions.tracks||[],u=0;u<l.length;u++)this.player_.addRemoteTextTrack(l[u],!0);this.preselectTrack()})),a}var t=e.prototype;return t.preselectTrack=function(){for(var i={captions:1,subtitles:1},s=this.player_.textTracks(),a=this.player_.cache_.selectedLanguage,o,l,u,c=0;c<s.length;c++){var h=s[c];a&&a.enabled&&a.language&&a.language===h.language&&h.kind in i?h.kind===a.kind?u=h:u||(u=h):a&&!a.enabled?(u=null,o=null,l=null):h.default&&(h.kind==="descriptions"&&!o?o=h:h.kind in i&&!l&&(l=h))}u?u.mode="showing":l?l.mode="showing":o&&(o.mode="showing")},t.toggleDisplay=function(){this.player_.tech_&&this.player_.tech_.featuresNativeTextTracks?this.hide():this.show()},t.createEl=function(){return r.prototype.createEl.call(this,"div",{className:"vjs-text-track-display"},{translate:"yes","aria-live":"off","aria-atomic":"true"})},t.clearDisplay=function(){typeof X.WebVTT=="function"&&X.WebVTT.processCues(X,[],this.el_)},t.updateDisplay=function(){var i=this.player_.textTracks(),s=this.options_.allowMultipleShowingTracks;if(this.clearDisplay(),s){for(var a=[],o=0;o<i.length;++o){var l=i[o];l.mode==="showing"&&a.push(l)}this.updateForTrack(a);return}for(var u=null,c=null,h=i.length;h--;){var f=i[h];f.mode==="showing"&&(f.kind==="descriptions"?u=f:c=f)}c?(this.getAttribute("aria-live")!=="off"&&this.setAttribute("aria-live","off"),this.updateForTrack(c)):u&&(this.getAttribute("aria-live")!=="assertive"&&this.setAttribute("aria-live","assertive"),this.updateForTrack(u))},t.updateDisplayState=function(i){for(var s=this.player_.textTrackSettings.getValues(),a=i.activeCues,o=a.length;o--;){var l=a[o];if(l){var u=l.displayState;if(s.color&&(u.firstChild.style.color=s.color),s.textOpacity&&aw(u.firstChild,"color",sw(s.color||"#fff",s.textOpacity)),s.backgroundColor&&(u.firstChild.style.backgroundColor=s.backgroundColor),s.backgroundOpacity&&aw(u.firstChild,"backgroundColor",sw(s.backgroundColor||"#000",s.backgroundOpacity)),s.windowColor&&(s.windowOpacity?aw(u,"backgroundColor",sw(s.windowColor,s.windowOpacity)):u.style.backgroundColor=s.windowColor),s.edgeStyle&&(s.edgeStyle==="dropshadow"?u.firstChild.style.textShadow="2px 2px 3px "+jo+", 2px 2px 4px "+jo+", 2px 2px 5px "+jo:s.edgeStyle==="raised"?u.firstChild.style.textShadow="1px 1px "+jo+", 2px 2px "+jo+", 3px 3px "+jo:s.edgeStyle==="depressed"?u.firstChild.style.textShadow="1px 1px "+$3+", 0 1px "+$3+", -1px -1px "+jo+", 0 -1px "+jo:s.edgeStyle==="uniform"&&(u.firstChild.style.textShadow="0 0 4px "+jo+", 0 0 4px "+jo+", 0 0 4px "+jo+", 0 0 4px "+jo)),s.fontPercent&&s.fontPercent!==1){var c=X.parseFloat(u.style.fontSize);u.style.fontSize=c*s.fontPercent+"px",u.style.height="auto",u.style.top="auto"}s.fontFamily&&s.fontFamily!=="default"&&(s.fontFamily==="small-caps"?u.firstChild.style.fontVariant="small-caps":u.firstChild.style.fontFamily=Vye[s.fontFamily])}}},t.updateForTrack=function(i){if(Array.isArray(i)||(i=[i]),!(typeof X.WebVTT!="function"||i.every(function(g){return!g.activeCues}))){for(var s=[],a=0;a<i.length;++a)for(var o=i[a],l=0;l<o.activeCues.length;++l)s.push(o.activeCues[l]);X.WebVTT.processCues(X,s,this.el_);for(var u=0;u<i.length;++u){for(var c=i[u],h=0;h<c.activeCues.length;++h){var f=c.activeCues[h].displayState;Lc(f,"vjs-text-track-cue"),Lc(f,"vjs-text-track-cue-"+(c.language?c.language:u)),c.language&&um(f,"lang",c.language)}this.player_.textTrackSettings&&this.updateDisplayState(c)}}},e})(Et);Et.registerComponent("TextTrackDisplay",Wye);var qye=(function(r){Ht(e,r);function e(){return r.apply(this,arguments)||this}var t=e.prototype;return t.createEl=function(){var i=this.player_.isAudio(),s=this.localize(i?"Audio Player":"Video Player"),a=fn("span",{className:"vjs-control-text",textContent:this.localize("{1} is loading.",[s])}),o=r.prototype.createEl.call(this,"div",{className:"vjs-loading-spinner",dir:"ltr"});return o.appendChild(a),o},e})(Et);Et.registerComponent("LoadingSpinner",qye);var Ll=(function(r){Ht(e,r);function e(){return r.apply(this,arguments)||this}var t=e.prototype;return t.createEl=function(i,s,a){s===void 0&&(s={}),a===void 0&&(a={}),i="button",s=ci({className:this.buildCSSClass()},s),a=ci({type:"button"},a);var o=fn(i,s,a);return o.appendChild(fn("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),this.createControlTextEl(o),o},t.addChild=function(i,s){s===void 0&&(s={});var a=this.constructor.name;return Xr.warn("Adding an actionable (user controllable) child to a Button ("+a+") is not supported; use a ClickableComponent instead."),Et.prototype.addChild.call(this,i,s)},t.enable=function(){r.prototype.enable.call(this),this.el_.removeAttribute("disabled")},t.disable=function(){r.prototype.disable.call(this),this.el_.setAttribute("disabled","disabled")},t.handleKeyDown=function(i){if($r.isEventKey(i,"Space")||$r.isEventKey(i,"Enter")){i.stopPropagation();return}r.prototype.handleKeyDown.call(this,i)},e})(nT);Et.registerComponent("Button",Ll);var f7=(function(r){Ht(e,r);function e(n,i){var s;return s=r.call(this,n,i)||this,s.mouseused_=!1,s.on("mousedown",function(a){return s.handleMouseDown(a)}),s}var t=e.prototype;return t.buildCSSClass=function(){return"vjs-big-play-button"},t.handleClick=function(i){var s=this.player_.play();if(this.mouseused_&&i.clientX&&i.clientY){var a=this.player_.usingPlugin("eme")&&this.player_.eme.sessions&&this.player_.eme.sessions.length>0;Eu(s),this.player_.tech(!0)&&!((Cv||Tv)&&a)&&this.player_.tech(!0).focus();return}var o=this.player_.getChild("controlBar"),l=o&&o.getChild("playToggle");if(!l){this.player_.tech(!0).focus();return}var u=function(){return l.focus()};fg(s)?s.then(u,function(){}):this.setTimeout(u,1)},t.handleKeyDown=function(i){this.mouseused_=!1,r.prototype.handleKeyDown.call(this,i)},t.handleMouseDown=function(i){this.mouseused_=!0},e})(Ll);f7.prototype.controlText_="Play Video";Et.registerComponent("BigPlayButton",f7);var Gye=(function(r){Ht(e,r);function e(n,i){var s;return s=r.call(this,n,i)||this,s.controlText(i&&i.controlText||s.localize("Close")),s}var t=e.prototype;return t.buildCSSClass=function(){return"vjs-close-button "+r.prototype.buildCSSClass.call(this)},t.handleClick=function(i){this.trigger({type:"close",bubbles:!1})},t.handleKeyDown=function(i){$r.isEventKey(i,"Esc")?(i.preventDefault(),i.stopPropagation(),this.trigger("click")):r.prototype.handleKeyDown.call(this,i)},e})(Ll);Et.registerComponent("CloseButton",Gye);var p7=(function(r){Ht(e,r);function e(n,i){var s;return i===void 0&&(i={}),s=r.call(this,n,i)||this,i.replay=i.replay===void 0||i.replay,s.on(n,"play",function(a){return s.handlePlay(a)}),s.on(n,"pause",function(a){return s.handlePause(a)}),i.replay&&s.on(n,"ended",function(a){return s.handleEnded(a)}),s}var t=e.prototype;return t.buildCSSClass=function(){return"vjs-play-control "+r.prototype.buildCSSClass.call(this)},t.handleClick=function(i){this.player_.paused()?Eu(this.player_.play()):this.player_.pause()},t.handleSeeked=function(i){this.removeClass("vjs-ended"),this.player_.paused()?this.handlePause(i):this.handlePlay(i)},t.handlePlay=function(i){this.removeClass("vjs-ended"),this.removeClass("vjs-paused"),this.addClass("vjs-playing"),this.controlText("Pause")},t.handlePause=function(i){this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.controlText("Play")},t.handleEnded=function(i){var s=this;this.removeClass("vjs-playing"),this.addClass("vjs-ended"),this.controlText("Replay"),this.one(this.player_,"seeked",function(a){return s.handleSeeked(a)})},e})(Ll);p7.prototype.controlText_="Play";Et.registerComponent("PlayToggle",p7);var m7=function(e,t){e=e<0?0:e;var n=Math.floor(e%60),i=Math.floor(e/60%60),s=Math.floor(e/3600),a=Math.floor(t/60%60),o=Math.floor(t/3600);return(isNaN(e)||e===1/0)&&(s=i=n="-"),s=s>0||o>0?s+":":"",i=((s||a>=10)&&i<10?"0"+i:i)+":",n=n<10?"0"+n:n,s+i+n},KA=m7;function Kye(r){KA=r}function Xye(){KA=m7}function fm(r,e){return e===void 0&&(e=r),KA(r,e)}var Um=(function(r){Ht(e,r);function e(n,i){var s;return s=r.call(this,n,i)||this,s.on(n,["timeupdate","ended"],function(a){return s.updateContent(a)}),s.updateTextNode_(),s}var t=e.prototype;return t.createEl=function(){var i=this.buildCSSClass(),s=r.prototype.createEl.call(this,"div",{className:i+" vjs-time-control vjs-control"}),a=fn("span",{className:"vjs-control-text",textContent:this.localize(this.labelText_)+""},{role:"presentation"});return s.appendChild(a),this.contentEl_=fn("span",{className:i+"-display"},{"aria-live":"off",role:"presentation"}),s.appendChild(this.contentEl_),s},t.dispose=function(){this.contentEl_=null,this.textNode_=null,r.prototype.dispose.call(this)},t.updateTextNode_=function(i){var s=this;i===void 0&&(i=0),i=fm(i),this.formattedTime_!==i&&(this.formattedTime_=i,this.requestNamedAnimationFrame("TimeDisplay#updateTextNode_",function(){if(s.contentEl_){var a=s.textNode_;a&&s.contentEl_.firstChild!==a&&(a=null,Xr.warn("TimeDisplay#updateTextnode_: Prevented replacement of text node element since it was no longer a child of this node. Appending a new node instead.")),s.textNode_=Be.createTextNode(s.formattedTime_),s.textNode_&&(a?s.contentEl_.replaceChild(s.textNode_,a):s.contentEl_.appendChild(s.textNode_))}}))},t.updateContent=function(i){},e})(Et);Um.prototype.labelText_="Time";Um.prototype.controlText_="Time";Et.registerComponent("TimeDisplay",Um);var XA=(function(r){Ht(e,r);function e(){return r.apply(this,arguments)||this}var t=e.prototype;return t.buildCSSClass=function(){return"vjs-current-time"},t.updateContent=function(i){var s;this.player_.ended()?s=this.player_.duration():s=this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime(),this.updateTextNode_(s)},e})(Um);XA.prototype.labelText_="Current Time";XA.prototype.controlText_="Current Time";Et.registerComponent("CurrentTimeDisplay",XA);var YA=(function(r){Ht(e,r);function e(n,i){var s;s=r.call(this,n,i)||this;var a=function(l){return s.updateContent(l)};return s.on(n,"durationchange",a),s.on(n,"loadstart",a),s.on(n,"loadedmetadata",a),s}var t=e.prototype;return t.buildCSSClass=function(){return"vjs-duration"},t.updateContent=function(i){var s=this.player_.duration();this.updateTextNode_(s)},e})(Um);YA.prototype.labelText_="Duration";YA.prototype.controlText_="Duration";Et.registerComponent("DurationDisplay",YA);var Yye=(function(r){Ht(e,r);function e(){return r.apply(this,arguments)||this}var t=e.prototype;return t.createEl=function(){var i=r.prototype.createEl.call(this,"div",{className:"vjs-time-control vjs-time-divider"},{"aria-hidden":!0}),s=r.prototype.createEl.call(this,"div"),a=r.prototype.createEl.call(this,"span",{textContent:"/"});return s.appendChild(a),i.appendChild(s),i},e})(Et);Et.registerComponent("TimeDivider",Yye);var QA=(function(r){Ht(e,r);function e(n,i){var s;return s=r.call(this,n,i)||this,s.on(n,"durationchange",function(a){return s.updateContent(a)}),s}var t=e.prototype;return t.buildCSSClass=function(){return"vjs-remaining-time"},t.createEl=function(){var i=r.prototype.createEl.call(this);return this.options_.displayNegative!==!1&&i.insertBefore(fn("span",{},{"aria-hidden":!0},"-"),this.contentEl_),i},t.updateContent=function(i){if(typeof this.player_.duration()=="number"){var s;this.player_.ended()?s=0:this.player_.remainingTimeDisplay?s=this.player_.remainingTimeDisplay():s=this.player_.remainingTime(),this.updateTextNode_(s)}},e})(Um);QA.prototype.labelText_="Remaining Time";QA.prototype.controlText_="Remaining Time";Et.registerComponent("RemainingTimeDisplay",QA);var Qye=(function(r){Ht(e,r);function e(n,i){var s;return s=r.call(this,n,i)||this,s.updateShowing(),s.on(s.player(),"durationchange",function(a){return s.updateShowing(a)}),s}var t=e.prototype;return t.createEl=function(){var i=r.prototype.createEl.call(this,"div",{className:"vjs-live-control vjs-control"});return this.contentEl_=fn("div",{className:"vjs-live-display"},{"aria-live":"off"}),this.contentEl_.appendChild(fn("span",{className:"vjs-control-text",textContent:this.localize("Stream Type")+""})),this.contentEl_.appendChild(Be.createTextNode(this.localize("LIVE"))),i.appendChild(this.contentEl_),i},t.dispose=function(){this.contentEl_=null,r.prototype.dispose.call(this)},t.updateShowing=function(i){this.player().duration()===1/0?this.show():this.hide()},e})(Et);Et.registerComponent("LiveDisplay",Qye);var g7=(function(r){Ht(e,r);function e(n,i){var s;return s=r.call(this,n,i)||this,s.updateLiveEdgeStatus(),s.player_.liveTracker&&(s.updateLiveEdgeStatusHandler_=function(a){return s.updateLiveEdgeStatus(a)},s.on(s.player_.liveTracker,"liveedgechange",s.updateLiveEdgeStatusHandler_)),s}var t=e.prototype;return t.createEl=function(){var i=r.prototype.createEl.call(this,"button",{className:"vjs-seek-to-live-control vjs-control"});return this.textEl_=fn("span",{className:"vjs-seek-to-live-text",textContent:this.localize("LIVE")},{"aria-hidden":"true"}),i.appendChild(this.textEl_),i},t.updateLiveEdgeStatus=function(){!this.player_.liveTracker||this.player_.liveTracker.atLiveEdge()?(this.setAttribute("aria-disabled",!0),this.addClass("vjs-at-live-edge"),this.controlText("Seek to live, currently playing live")):(this.setAttribute("aria-disabled",!1),this.removeClass("vjs-at-live-edge"),this.controlText("Seek to live, currently behind live"))},t.handleClick=function(){this.player_.liveTracker.seekToLiveEdge()},t.dispose=function(){this.player_.liveTracker&&this.off(this.player_.liveTracker,"liveedgechange",this.updateLiveEdgeStatusHandler_),this.textEl_=null,r.prototype.dispose.call(this)},e})(Ll);g7.prototype.controlText_="Seek to live, currently playing live";Et.registerComponent("SeekToLive",g7);var iT=function(e,t,n){return e=Number(e),Math.min(n,Math.max(t,isNaN(e)?t:e))},JA=(function(r){Ht(e,r);function e(n,i){var s;return s=r.call(this,n,i)||this,s.handleMouseDown_=function(a){return s.handleMouseDown(a)},s.handleMouseUp_=function(a){return s.handleMouseUp(a)},s.handleKeyDown_=function(a){return s.handleKeyDown(a)},s.handleClick_=function(a){return s.handleClick(a)},s.handleMouseMove_=function(a){return s.handleMouseMove(a)},s.update_=function(a){return s.update(a)},s.bar=s.getChild(s.options_.barName),s.vertical(!!s.options_.vertical),s.enable(),s}var t=e.prototype;return t.enabled=function(){return this.enabled_},t.enable=function(){this.enabled()||(this.on("mousedown",this.handleMouseDown_),this.on("touchstart",this.handleMouseDown_),this.on("keydown",this.handleKeyDown_),this.on("click",this.handleClick_),this.on(this.player_,"controlsvisible",this.update),this.playerEvent&&this.on(this.player_,this.playerEvent,this.update),this.removeClass("disabled"),this.setAttribute("tabindex",0),this.enabled_=!0)},t.disable=function(){if(this.enabled()){var i=this.bar.el_.ownerDocument;this.off("mousedown",this.handleMouseDown_),this.off("touchstart",this.handleMouseDown_),this.off("keydown",this.handleKeyDown_),this.off("click",this.handleClick_),this.off(this.player_,"controlsvisible",this.update_),this.off(i,"mousemove",this.handleMouseMove_),this.off(i,"mouseup",this.handleMouseUp_),this.off(i,"touchmove",this.handleMouseMove_),this.off(i,"touchend",this.handleMouseUp_),this.removeAttribute("tabindex"),this.addClass("disabled"),this.playerEvent&&this.off(this.player_,this.playerEvent,this.update),this.enabled_=!1}},t.createEl=function(i,s,a){return s===void 0&&(s={}),a===void 0&&(a={}),s.className=s.className+" vjs-slider",s=ci({tabIndex:0},s),a=ci({role:"slider","aria-valuenow":0,"aria-valuemin":0,"aria-valuemax":100,tabIndex:0},a),r.prototype.createEl.call(this,i,s,a)},t.handleMouseDown=function(i){var s=this.bar.el_.ownerDocument;i.type==="mousedown"&&i.preventDefault(),i.type==="touchstart"&&!jc&&i.preventDefault(),Wj(),this.addClass("vjs-sliding"),this.trigger("slideractive"),this.on(s,"mousemove",this.handleMouseMove_),this.on(s,"mouseup",this.handleMouseUp_),this.on(s,"touchmove",this.handleMouseMove_),this.on(s,"touchend",this.handleMouseUp_),this.handleMouseMove(i,!0)},t.handleMouseMove=function(i){},t.handleMouseUp=function(){var i=this.bar.el_.ownerDocument;qj(),this.removeClass("vjs-sliding"),this.trigger("sliderinactive"),this.off(i,"mousemove",this.handleMouseMove_),this.off(i,"mouseup",this.handleMouseUp_),this.off(i,"touchmove",this.handleMouseMove_),this.off(i,"touchend",this.handleMouseUp_),this.update()},t.update=function(){var i=this;if(!(!this.el_||!this.bar)){var s=this.getProgress();return s===this.progress_||(this.progress_=s,this.requestNamedAnimationFrame("Slider#update",function(){var a=i.vertical()?"height":"width";i.bar.el().style[a]=(s*100).toFixed(2)+"%"})),s}},t.getProgress=function(){return Number(iT(this.getPercent(),0,1).toFixed(4))},t.calculateDistance=function(i){var s=JS(this.el_,i);return this.vertical()?s.y:s.x},t.handleKeyDown=function(i){$r.isEventKey(i,"Left")||$r.isEventKey(i,"Down")?(i.preventDefault(),i.stopPropagation(),this.stepBack()):$r.isEventKey(i,"Right")||$r.isEventKey(i,"Up")?(i.preventDefault(),i.stopPropagation(),this.stepForward()):r.prototype.handleKeyDown.call(this,i)},t.handleClick=function(i){i.stopPropagation(),i.preventDefault()},t.vertical=function(i){if(i===void 0)return this.vertical_||!1;this.vertical_=!!i,this.vertical_?this.addClass("vjs-slider-vertical"):this.addClass("vjs-slider-horizontal")},e})(Et);Et.registerComponent("Slider",JA);var ow=function(e,t){return iT(e/t*100,0,100).toFixed(2)+"%"},Jye=(function(r){Ht(e,r);function e(n,i){var s;return s=r.call(this,n,i)||this,s.partEls_=[],s.on(n,"progress",function(a){return s.update(a)}),s}var t=e.prototype;return t.createEl=function(){var i=r.prototype.createEl.call(this,"div",{className:"vjs-load-progress"}),s=fn("span",{className:"vjs-control-text"}),a=fn("span",{textContent:this.localize("Loaded")}),o=Be.createTextNode(": ");return this.percentageEl_=fn("span",{className:"vjs-control-text-loaded-percentage",textContent:"0%"}),i.appendChild(s),s.appendChild(a),s.appendChild(o),s.appendChild(this.percentageEl_),i},t.dispose=function(){this.partEls_=null,this.percentageEl_=null,r.prototype.dispose.call(this)},t.update=function(i){var s=this;this.requestNamedAnimationFrame("LoadProgressBar#update",function(){var a=s.player_.liveTracker,o=s.player_.buffered(),l=a&&a.isLive()?a.seekableEnd():s.player_.duration(),u=s.player_.bufferedEnd(),c=s.partEls_,h=ow(u,l);s.percent_!==h&&(s.el_.style.width=h,Sf(s.percentageEl_,h),s.percent_=h);for(var f=0;f<o.length;f++){var g=o.start(f),v=o.end(f),y=c[f];y||(y=s.el_.appendChild(fn()),c[f]=y),!(y.dataset.start===g&&y.dataset.end===v)&&(y.dataset.start=g,y.dataset.end=v,y.style.left=ow(g,u),y.style.width=ow(v-g,u))}for(var _=c.length;_>o.length;_--)s.el_.removeChild(c[_-1]);c.length=o.length})},e})(Et);Et.registerComponent("LoadProgressBar",Jye);var Zye=(function(r){Ht(e,r);function e(n,i){var s;return s=r.call(this,n,i)||this,s.update=Nc(qn(We(s),s.update),Fl),s}var t=e.prototype;return t.createEl=function(){return r.prototype.createEl.call(this,"div",{className:"vjs-time-tooltip"},{"aria-hidden":"true"})},t.update=function(i,s,a){var o=zg(this.el_),l=cm(this.player_.el()),u=i.width*s;if(!(!l||!o)){var c=i.left-l.left+u,h=i.width-u+(l.right-i.right),f=o.width/2;c<f?f+=f-c:h<f&&(f=h),f<0?f=0:f>o.width&&(f=o.width),f=Math.round(f),this.el_.style.right="-"+f+"px",this.write(a)}},t.write=function(i){Sf(this.el_,i)},t.updateTime=function(i,s,a,o){var l=this;this.requestNamedAnimationFrame("TimeTooltip#updateTime",function(){var u,c=l.player_.duration();if(l.player_.liveTracker&&l.player_.liveTracker.isLive()){var h=l.player_.liveTracker.liveWindow(),f=h-s*h;u=(f<1?"":"-")+fm(f,h)}else u=fm(a,c);l.update(i,s,u),o&&o()})},e})(Et);Et.registerComponent("TimeTooltip",Zye);var ZA=(function(r){Ht(e,r);function e(n,i){var s;return s=r.call(this,n,i)||this,s.update=Nc(qn(We(s),s.update),Fl),s}var t=e.prototype;return t.createEl=function(){return r.prototype.createEl.call(this,"div",{className:"vjs-play-progress vjs-slider-bar"},{"aria-hidden":"true"})},t.update=function(i,s){var a=this.getChild("timeTooltip");if(a){var o=this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime();a.updateTime(i,s,o)}},e})(Et);ZA.prototype.options_={children:[]};!ca&&!$c&&ZA.prototype.options_.children.push("timeTooltip");Et.registerComponent("PlayProgressBar",ZA);var v7=(function(r){Ht(e,r);function e(n,i){var s;return s=r.call(this,n,i)||this,s.update=Nc(qn(We(s),s.update),Fl),s}var t=e.prototype;return t.createEl=function(){return r.prototype.createEl.call(this,"div",{className:"vjs-mouse-display"})},t.update=function(i,s){var a=this,o=s*this.player_.duration();this.getChild("timeTooltip").updateTime(i,s,o,function(){a.el_.style.left=i.width*s+"px"})},e})(Et);v7.prototype.options_={children:["timeTooltip"]};Et.registerComponent("MouseTimeDisplay",v7);var tx=5,j3=12,eD=(function(r){Ht(e,r);function e(n,i){var s;return s=r.call(this,n,i)||this,s.setEventHandlers_(),s}var t=e.prototype;return t.setEventHandlers_=function(){var i=this;this.update_=qn(this,this.update),this.update=Nc(this.update_,Fl),this.on(this.player_,["ended","durationchange","timeupdate"],this.update),this.player_.liveTracker&&this.on(this.player_.liveTracker,"liveedgechange",this.update),this.updateInterval=null,this.enableIntervalHandler_=function(s){return i.enableInterval_(s)},this.disableIntervalHandler_=function(s){return i.disableInterval_(s)},this.on(this.player_,["playing"],this.enableIntervalHandler_),this.on(this.player_,["ended","pause","waiting"],this.disableIntervalHandler_),"hidden"in Be&&"visibilityState"in Be&&this.on(Be,"visibilitychange",this.toggleVisibility_)},t.toggleVisibility_=function(i){Be.visibilityState==="hidden"?(this.cancelNamedAnimationFrame("SeekBar#update"),this.cancelNamedAnimationFrame("Slider#update"),this.disableInterval_(i)):(!this.player_.ended()&&!this.player_.paused()&&this.enableInterval_(),this.update())},t.enableInterval_=function(){this.updateInterval||(this.updateInterval=this.setInterval(this.update,Fl))},t.disableInterval_=function(i){this.player_.liveTracker&&this.player_.liveTracker.isLive()&&i&&i.type!=="ended"||this.updateInterval&&(this.clearInterval(this.updateInterval),this.updateInterval=null)},t.createEl=function(){return r.prototype.createEl.call(this,"div",{className:"vjs-progress-holder"},{"aria-label":this.localize("Progress Bar")})},t.update=function(i){var s=this;if(Be.visibilityState!=="hidden"){var a=r.prototype.update.call(this);return this.requestNamedAnimationFrame("SeekBar#update",function(){var o=s.player_.ended()?s.player_.duration():s.getCurrentTime_(),l=s.player_.liveTracker,u=s.player_.duration();l&&l.isLive()&&(u=s.player_.liveTracker.liveCurrentTime()),s.percent_!==a&&(s.el_.setAttribute("aria-valuenow",(a*100).toFixed(2)),s.percent_=a),(s.currentTime_!==o||s.duration_!==u)&&(s.el_.setAttribute("aria-valuetext",s.localize("progress bar timing: currentTime={1} duration={2}",[fm(o,u),fm(u,u)],"{1} of {2}")),s.currentTime_=o,s.duration_=u),s.bar&&s.bar.update(cm(s.el()),s.getProgress())}),a}},t.userSeek_=function(i){this.player_.liveTracker&&this.player_.liveTracker.isLive()&&this.player_.liveTracker.nextSeekedFromUser(),this.player_.currentTime(i)},t.getCurrentTime_=function(){return this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime()},t.getPercent=function(){var i=this.getCurrentTime_(),s,a=this.player_.liveTracker;return a&&a.isLive()?(s=(i-a.seekableStart())/a.liveWindow(),a.atLiveEdge()&&(s=1)):s=i/this.player_.duration(),s},t.handleMouseDown=function(i){Hg(i)&&(i.stopPropagation(),this.videoWasPlaying=!this.player_.paused(),this.player_.pause(),r.prototype.handleMouseDown.call(this,i))},t.handleMouseMove=function(i,s){if(s===void 0&&(s=!1),!!Hg(i)){!s&&!this.player_.scrubbing()&&this.player_.scrubbing(!0);var a,o=this.calculateDistance(i),l=this.player_.liveTracker;if(!l||!l.isLive())a=o*this.player_.duration(),a===this.player_.duration()&&(a=a-.1);else{if(o>=.99){l.seekToLiveEdge();return}var u=l.seekableStart(),c=l.liveCurrentTime();if(a=u+o*l.liveWindow(),a>=c&&(a=c),a<=u&&(a=u+.1),a===1/0)return}this.userSeek_(a)}},t.enable=function(){r.prototype.enable.call(this);var i=this.getChild("mouseTimeDisplay");i&&i.show()},t.disable=function(){r.prototype.disable.call(this);var i=this.getChild("mouseTimeDisplay");i&&i.hide()},t.handleMouseUp=function(i){r.prototype.handleMouseUp.call(this,i),i&&i.stopPropagation(),this.player_.scrubbing(!1),this.player_.trigger({type:"timeupdate",target:this,manuallyTriggered:!0}),this.videoWasPlaying?Eu(this.player_.play()):this.update_()},t.stepForward=function(){this.userSeek_(this.player_.currentTime()+tx)},t.stepBack=function(){this.userSeek_(this.player_.currentTime()-tx)},t.handleAction=function(i){this.player_.paused()?this.player_.play():this.player_.pause()},t.handleKeyDown=function(i){var s=this.player_.liveTracker;if($r.isEventKey(i,"Space")||$r.isEventKey(i,"Enter"))i.preventDefault(),i.stopPropagation(),this.handleAction(i);else if($r.isEventKey(i,"Home"))i.preventDefault(),i.stopPropagation(),this.userSeek_(0);else if($r.isEventKey(i,"End"))i.preventDefault(),i.stopPropagation(),s&&s.isLive()?this.userSeek_(s.liveCurrentTime()):this.userSeek_(this.player_.duration());else if(/^[0-9]$/.test($r(i))){i.preventDefault(),i.stopPropagation();var a=($r.codes[$r(i)]-$r.codes[0])*10/100;s&&s.isLive()?this.userSeek_(s.seekableStart()+s.liveWindow()*a):this.userSeek_(this.player_.duration()*a)}else $r.isEventKey(i,"PgDn")?(i.preventDefault(),i.stopPropagation(),this.userSeek_(this.player_.currentTime()-tx*j3)):$r.isEventKey(i,"PgUp")?(i.preventDefault(),i.stopPropagation(),this.userSeek_(this.player_.currentTime()+tx*j3)):r.prototype.handleKeyDown.call(this,i)},t.dispose=function(){this.disableInterval_(),this.off(this.player_,["ended","durationchange","timeupdate"],this.update),this.player_.liveTracker&&this.off(this.player_.liveTracker,"liveedgechange",this.update),this.off(this.player_,["playing"],this.enableIntervalHandler_),this.off(this.player_,["ended","pause","waiting"],this.disableIntervalHandler_),"hidden"in Be&&"visibilityState"in Be&&this.off(Be,"visibilitychange",this.toggleVisibility_),r.prototype.dispose.call(this)},e})(JA);eD.prototype.options_={children:["loadProgressBar","playProgressBar"],barName:"playProgressBar"};!ca&&!$c&&eD.prototype.options_.children.splice(1,0,"mouseTimeDisplay");Et.registerComponent("SeekBar",eD);var y7=(function(r){Ht(e,r);function e(n,i){var s;return s=r.call(this,n,i)||this,s.handleMouseMove=Nc(qn(We(s),s.handleMouseMove),Fl),s.throttledHandleMouseSeek=Nc(qn(We(s),s.handleMouseSeek),Fl),s.handleMouseUpHandler_=function(a){return s.handleMouseUp(a)},s.handleMouseDownHandler_=function(a){return s.handleMouseDown(a)},s.enable(),s}var t=e.prototype;return t.createEl=function(){return r.prototype.createEl.call(this,"div",{className:"vjs-progress-control vjs-control"})},t.handleMouseMove=function(i){var s=this.getChild("seekBar");if(s){var a=s.getChild("playProgressBar"),o=s.getChild("mouseTimeDisplay");if(!(!a&&!o)){var l=s.el(),u=zg(l),c=JS(l,i).x;c=iT(c,0,1),o&&o.update(u,c),a&&a.update(u,s.getProgress())}}},t.handleMouseSeek=function(i){var s=this.getChild("seekBar");s&&s.handleMouseMove(i)},t.enabled=function(){return this.enabled_},t.disable=function(){if(this.children().forEach(function(s){return s.disable&&s.disable()}),!!this.enabled()&&(this.off(["mousedown","touchstart"],this.handleMouseDownHandler_),this.off(this.el_,"mousemove",this.handleMouseMove),this.removeListenersAddedOnMousedownAndTouchstart(),this.addClass("disabled"),this.enabled_=!1,this.player_.scrubbing())){var i=this.getChild("seekBar");this.player_.scrubbing(!1),i.videoWasPlaying&&Eu(this.player_.play())}},t.enable=function(){this.children().forEach(function(i){return i.enable&&i.enable()}),!this.enabled()&&(this.on(["mousedown","touchstart"],this.handleMouseDownHandler_),this.on(this.el_,"mousemove",this.handleMouseMove),this.removeClass("disabled"),this.enabled_=!0)},t.removeListenersAddedOnMousedownAndTouchstart=function(){var i=this.el_.ownerDocument;this.off(i,"mousemove",this.throttledHandleMouseSeek),this.off(i,"touchmove",this.throttledHandleMouseSeek),this.off(i,"mouseup",this.handleMouseUpHandler_),this.off(i,"touchend",this.handleMouseUpHandler_)},t.handleMouseDown=function(i){var s=this.el_.ownerDocument,a=this.getChild("seekBar");a&&a.handleMouseDown(i),this.on(s,"mousemove",this.throttledHandleMouseSeek),this.on(s,"touchmove",this.throttledHandleMouseSeek),this.on(s,"mouseup",this.handleMouseUpHandler_),this.on(s,"touchend",this.handleMouseUpHandler_)},t.handleMouseUp=function(i){var s=this.getChild("seekBar");s&&s.handleMouseUp(i),this.removeListenersAddedOnMousedownAndTouchstart()},e})(Et);y7.prototype.options_={children:["seekBar"]};Et.registerComponent("ProgressControl",y7);var x7=(function(r){Ht(e,r);function e(n,i){var s;return s=r.call(this,n,i)||this,s.on(n,["enterpictureinpicture","leavepictureinpicture"],function(a){return s.handlePictureInPictureChange(a)}),s.on(n,["disablepictureinpicturechanged","loadedmetadata"],function(a){return s.handlePictureInPictureEnabledChange(a)}),s.on(n,["loadedmetadata","audioonlymodechange","audiopostermodechange"],function(){var a=n.currentType().substring(0,5)==="audio";a||n.audioPosterMode()||n.audioOnlyMode()?(n.isInPictureInPicture()&&n.exitPictureInPicture(),s.hide()):s.show()}),s.disable(),s}var t=e.prototype;return t.buildCSSClass=function(){return"vjs-picture-in-picture-control "+r.prototype.buildCSSClass.call(this)},t.handlePictureInPictureEnabledChange=function(){Be.pictureInPictureEnabled&&this.player_.disablePictureInPicture()===!1?this.enable():this.disable()},t.handlePictureInPictureChange=function(i){this.player_.isInPictureInPicture()?this.controlText("Exit Picture-in-Picture"):this.controlText("Picture-in-Picture"),this.handlePictureInPictureEnabledChange()},t.handleClick=function(i){this.player_.isInPictureInPicture()?this.player_.exitPictureInPicture():this.player_.requestPictureInPicture()},e})(Ll);x7.prototype.controlText_="Picture-in-Picture";Et.registerComponent("PictureInPictureToggle",x7);var _7=(function(r){Ht(e,r);function e(n,i){var s;return s=r.call(this,n,i)||this,s.on(n,"fullscreenchange",function(a){return s.handleFullscreenChange(a)}),Be[n.fsApi_.fullscreenEnabled]===!1&&s.disable(),s}var t=e.prototype;return t.buildCSSClass=function(){return"vjs-fullscreen-control "+r.prototype.buildCSSClass.call(this)},t.handleFullscreenChange=function(i){this.player_.isFullscreen()?this.controlText("Non-Fullscreen"):this.controlText("Fullscreen")},t.handleClick=function(i){this.player_.isFullscreen()?this.player_.exitFullscreen():this.player_.requestFullscreen()},e})(Ll);_7.prototype.controlText_="Fullscreen";Et.registerComponent("FullscreenToggle",_7);var exe=function(e,t){t.tech_&&!t.tech_.featuresVolumeControl&&e.addClass("vjs-hidden"),e.on(t,"loadstart",function(){t.tech_.featuresVolumeControl?e.removeClass("vjs-hidden"):e.addClass("vjs-hidden")})},txe=(function(r){Ht(e,r);function e(){return r.apply(this,arguments)||this}var t=e.prototype;return t.createEl=function(){var i=r.prototype.createEl.call(this,"div",{className:"vjs-volume-level"});return i.appendChild(r.prototype.createEl.call(this,"span",{className:"vjs-control-text"})),i},e})(Et);Et.registerComponent("VolumeLevel",txe);var rxe=(function(r){Ht(e,r);function e(n,i){var s;return s=r.call(this,n,i)||this,s.update=Nc(qn(We(s),s.update),Fl),s}var t=e.prototype;return t.createEl=function(){return r.prototype.createEl.call(this,"div",{className:"vjs-volume-tooltip"},{"aria-hidden":"true"})},t.update=function(i,s,a,o){if(!a){var l=cm(this.el_),u=cm(this.player_.el()),c=i.width*s;if(!u||!l)return;var h=i.left-u.left+c,f=i.width-c+(u.right-i.right),g=l.width/2;h<g?g+=g-h:f<g&&(g=f),g<0?g=0:g>l.width&&(g=l.width),this.el_.style.right="-"+g+"px"}this.write(o+"%")},t.write=function(i){Sf(this.el_,i)},t.updateVolume=function(i,s,a,o,l){var u=this;this.requestNamedAnimationFrame("VolumeLevelTooltip#updateVolume",function(){u.update(i,s,a,o.toFixed(0)),l&&l()})},e})(Et);Et.registerComponent("VolumeLevelTooltip",rxe);var b7=(function(r){Ht(e,r);function e(n,i){var s;return s=r.call(this,n,i)||this,s.update=Nc(qn(We(s),s.update),Fl),s}var t=e.prototype;return t.createEl=function(){return r.prototype.createEl.call(this,"div",{className:"vjs-mouse-display"})},t.update=function(i,s,a){var o=this,l=100*s;this.getChild("volumeLevelTooltip").updateVolume(i,s,a,l,function(){a?o.el_.style.bottom=i.height*s+"px":o.el_.style.left=i.width*s+"px"})},e})(Et);b7.prototype.options_={children:["volumeLevelTooltip"]};Et.registerComponent("MouseVolumeLevelDisplay",b7);var sT=(function(r){Ht(e,r);function e(n,i){var s;return s=r.call(this,n,i)||this,s.on("slideractive",function(a){return s.updateLastVolume_(a)}),s.on(n,"volumechange",function(a){return s.updateARIAAttributes(a)}),n.ready(function(){return s.updateARIAAttributes()}),s}var t=e.prototype;return t.createEl=function(){return r.prototype.createEl.call(this,"div",{className:"vjs-volume-bar vjs-slider-bar"},{"aria-label":this.localize("Volume Level"),"aria-live":"polite"})},t.handleMouseDown=function(i){Hg(i)&&r.prototype.handleMouseDown.call(this,i)},t.handleMouseMove=function(i){var s=this.getChild("mouseVolumeLevelDisplay");if(s){var a=this.el(),o=cm(a),l=this.vertical(),u=JS(a,i);u=l?u.y:u.x,u=iT(u,0,1),s.update(o,u,l)}Hg(i)&&(this.checkMuted(),this.player_.volume(this.calculateDistance(i)))},t.checkMuted=function(){this.player_.muted()&&this.player_.muted(!1)},t.getPercent=function(){return this.player_.muted()?0:this.player_.volume()},t.stepForward=function(){this.checkMuted(),this.player_.volume(this.player_.volume()+.1)},t.stepBack=function(){this.checkMuted(),this.player_.volume(this.player_.volume()-.1)},t.updateARIAAttributes=function(i){var s=this.player_.muted()?0:this.volumeAsPercentage_();this.el_.setAttribute("aria-valuenow",s),this.el_.setAttribute("aria-valuetext",s+"%")},t.volumeAsPercentage_=function(){return Math.round(this.player_.volume()*100)},t.updateLastVolume_=function(){var i=this,s=this.player_.volume();this.one("sliderinactive",function(){i.player_.volume()===0&&i.player_.lastVolume_(s)})},e})(JA);sT.prototype.options_={children:["volumeLevel"],barName:"volumeLevel"};!ca&&!$c&&sT.prototype.options_.children.splice(0,0,"mouseVolumeLevelDisplay");sT.prototype.playerEvent="volumechange";Et.registerComponent("VolumeBar",sT);var S7=(function(r){Ht(e,r);function e(n,i){var s;return i===void 0&&(i={}),i.vertical=i.vertical||!1,(typeof i.volumeBar>"u"||$g(i.volumeBar))&&(i.volumeBar=i.volumeBar||{},i.volumeBar.vertical=i.vertical),s=r.call(this,n,i)||this,exe(We(s),n),s.throttledHandleMouseMove=Nc(qn(We(s),s.handleMouseMove),Fl),s.handleMouseUpHandler_=function(a){return s.handleMouseUp(a)},s.on("mousedown",function(a){return s.handleMouseDown(a)}),s.on("touchstart",function(a){return s.handleMouseDown(a)}),s.on("mousemove",function(a){return s.handleMouseMove(a)}),s.on(s.volumeBar,["focus","slideractive"],function(){s.volumeBar.addClass("vjs-slider-active"),s.addClass("vjs-slider-active"),s.trigger("slideractive")}),s.on(s.volumeBar,["blur","sliderinactive"],function(){s.volumeBar.removeClass("vjs-slider-active"),s.removeClass("vjs-slider-active"),s.trigger("sliderinactive")}),s}var t=e.prototype;return t.createEl=function(){var i="vjs-volume-horizontal";return this.options_.vertical&&(i="vjs-volume-vertical"),r.prototype.createEl.call(this,"div",{className:"vjs-volume-control vjs-control "+i})},t.handleMouseDown=function(i){var s=this.el_.ownerDocument;this.on(s,"mousemove",this.throttledHandleMouseMove),this.on(s,"touchmove",this.throttledHandleMouseMove),this.on(s,"mouseup",this.handleMouseUpHandler_),this.on(s,"touchend",this.handleMouseUpHandler_)},t.handleMouseUp=function(i){var s=this.el_.ownerDocument;this.off(s,"mousemove",this.throttledHandleMouseMove),this.off(s,"touchmove",this.throttledHandleMouseMove),this.off(s,"mouseup",this.handleMouseUpHandler_),this.off(s,"touchend",this.handleMouseUpHandler_)},t.handleMouseMove=function(i){this.volumeBar.handleMouseMove(i)},e})(Et);S7.prototype.options_={children:["volumeBar"]};Et.registerComponent("VolumeControl",S7);var nxe=function(e,t){t.tech_&&!t.tech_.featuresMuteControl&&e.addClass("vjs-hidden"),e.on(t,"loadstart",function(){t.tech_.featuresMuteControl?e.removeClass("vjs-hidden"):e.addClass("vjs-hidden")})},T7=(function(r){Ht(e,r);function e(n,i){var s;return s=r.call(this,n,i)||this,nxe(We(s),n),s.on(n,["loadstart","volumechange"],function(a){return s.update(a)}),s}var t=e.prototype;return t.buildCSSClass=function(){return"vjs-mute-control "+r.prototype.buildCSSClass.call(this)},t.handleClick=function(i){var s=this.player_.volume(),a=this.player_.lastVolume_();if(s===0){var o=a<.1?.1:a;this.player_.volume(o),this.player_.muted(!1)}else this.player_.muted(!this.player_.muted())},t.update=function(i){this.updateIcon_(),this.updateControlText_()},t.updateIcon_=function(){var i=this.player_.volume(),s=3;ca&&this.player_.tech_&&this.player_.tech_.el_&&this.player_.muted(this.player_.tech_.el_.muted),i===0||this.player_.muted()?s=0:i<.33?s=1:i<.67&&(s=2);for(var a=0;a<4;a++)wv(this.el_,"vjs-vol-"+a);Lc(this.el_,"vjs-vol-"+s)},t.updateControlText_=function(){var i=this.player_.muted()||this.player_.volume()===0,s=i?"Unmute":"Mute";this.controlText()!==s&&this.controlText(s)},e})(Ll);T7.prototype.controlText_="Mute";Et.registerComponent("MuteToggle",T7);var C7=(function(r){Ht(e,r);function e(n,i){var s;return i===void 0&&(i={}),typeof i.inline<"u"?i.inline=i.inline:i.inline=!0,(typeof i.volumeControl>"u"||$g(i.volumeControl))&&(i.volumeControl=i.volumeControl||{},i.volumeControl.vertical=!i.inline),s=r.call(this,n,i)||this,s.handleKeyPressHandler_=function(a){return s.handleKeyPress(a)},s.on(n,["loadstart"],function(a){return s.volumePanelState_(a)}),s.on(s.muteToggle,"keyup",function(a){return s.handleKeyPress(a)}),s.on(s.volumeControl,"keyup",function(a){return s.handleVolumeControlKeyUp(a)}),s.on("keydown",function(a){return s.handleKeyPress(a)}),s.on("mouseover",function(a){return s.handleMouseOver(a)}),s.on("mouseout",function(a){return s.handleMouseOut(a)}),s.on(s.volumeControl,["slideractive"],s.sliderActive_),s.on(s.volumeControl,["sliderinactive"],s.sliderInactive_),s}var t=e.prototype;return t.sliderActive_=function(){this.addClass("vjs-slider-active")},t.sliderInactive_=function(){this.removeClass("vjs-slider-active")},t.volumePanelState_=function(){this.volumeControl.hasClass("vjs-hidden")&&this.muteToggle.hasClass("vjs-hidden")&&this.addClass("vjs-hidden"),this.volumeControl.hasClass("vjs-hidden")&&!this.muteToggle.hasClass("vjs-hidden")&&this.addClass("vjs-mute-toggle-only")},t.createEl=function(){var i="vjs-volume-panel-horizontal";return this.options_.inline||(i="vjs-volume-panel-vertical"),r.prototype.createEl.call(this,"div",{className:"vjs-volume-panel vjs-control "+i})},t.dispose=function(){this.handleMouseOut(),r.prototype.dispose.call(this)},t.handleVolumeControlKeyUp=function(i){$r.isEventKey(i,"Esc")&&this.muteToggle.focus()},t.handleMouseOver=function(i){this.addClass("vjs-hover"),bo(Be,"keyup",this.handleKeyPressHandler_)},t.handleMouseOut=function(i){this.removeClass("vjs-hover"),zs(Be,"keyup",this.handleKeyPressHandler_)},t.handleKeyPress=function(i){$r.isEventKey(i,"Esc")&&this.handleMouseOut()},e})(Et);C7.prototype.options_={children:["muteToggle","volumeControl"]};Et.registerComponent("VolumePanel",C7);var w7=(function(r){Ht(e,r);function e(n,i){var s;return s=r.call(this,n,i)||this,i&&(s.menuButton_=i.menuButton),s.focusedChild_=-1,s.on("keydown",function(a){return s.handleKeyDown(a)}),s.boundHandleBlur_=function(a){return s.handleBlur(a)},s.boundHandleTapClick_=function(a){return s.handleTapClick(a)},s}var t=e.prototype;return t.addEventListenerForItem=function(i){i instanceof Et&&(this.on(i,"blur",this.boundHandleBlur_),this.on(i,["tap","click"],this.boundHandleTapClick_))},t.removeEventListenerForItem=function(i){i instanceof Et&&(this.off(i,"blur",this.boundHandleBlur_),this.off(i,["tap","click"],this.boundHandleTapClick_))},t.removeChild=function(i){typeof i=="string"&&(i=this.getChild(i)),this.removeEventListenerForItem(i),r.prototype.removeChild.call(this,i)},t.addItem=function(i){var s=this.addChild(i);s&&this.addEventListenerForItem(s)},t.createEl=function(){var i=this.options_.contentElType||"ul";this.contentEl_=fn(i,{className:"vjs-menu-content"}),this.contentEl_.setAttribute("role","menu");var s=r.prototype.createEl.call(this,"div",{append:this.contentEl_,className:"vjs-menu"});return s.appendChild(this.contentEl_),bo(s,"click",function(a){a.preventDefault(),a.stopImmediatePropagation()}),s},t.dispose=function(){this.contentEl_=null,this.boundHandleBlur_=null,this.boundHandleTapClick_=null,r.prototype.dispose.call(this)},t.handleBlur=function(i){var s=i.relatedTarget||Be.activeElement;if(!this.children().some(function(o){return o.el()===s})){var a=this.menuButton_;a&&a.buttonPressed_&&s!==a.el().firstChild&&a.unpressButton()}},t.handleTapClick=function(i){if(this.menuButton_){this.menuButton_.unpressButton();var s=this.children();if(!Array.isArray(s))return;var a=s.filter(function(o){return o.el()===i.target})[0];if(!a)return;a.name()!=="CaptionSettingsMenuItem"&&this.menuButton_.focus()}},t.handleKeyDown=function(i){$r.isEventKey(i,"Left")||$r.isEventKey(i,"Down")?(i.preventDefault(),i.stopPropagation(),this.stepForward()):($r.isEventKey(i,"Right")||$r.isEventKey(i,"Up"))&&(i.preventDefault(),i.stopPropagation(),this.stepBack())},t.stepForward=function(){var i=0;this.focusedChild_!==void 0&&(i=this.focusedChild_+1),this.focus(i)},t.stepBack=function(){var i=0;this.focusedChild_!==void 0&&(i=this.focusedChild_-1),this.focus(i)},t.focus=function(i){i===void 0&&(i=0);var s=this.children().slice(),a=s.length&&s[0].hasClass("vjs-menu-title");a&&s.shift(),s.length>0&&(i<0?i=0:i>=s.length&&(i=s.length-1),this.focusedChild_=i,s[i].el_.focus())},e})(Et);Et.registerComponent("Menu",w7);var tD=(function(r){Ht(e,r);function e(n,i){var s;i===void 0&&(i={}),s=r.call(this,n,i)||this,s.menuButton_=new Ll(n,i),s.menuButton_.controlText(s.controlText_),s.menuButton_.el_.setAttribute("aria-haspopup","true");var a=Ll.prototype.buildCSSClass();s.menuButton_.el_.className=s.buildCSSClass()+" "+a,s.menuButton_.removeClass("vjs-control"),s.addChild(s.menuButton_),s.update(),s.enabled_=!0;var o=function(u){return s.handleClick(u)};return s.handleMenuKeyUp_=function(l){return s.handleMenuKeyUp(l)},s.on(s.menuButton_,"tap",o),s.on(s.menuButton_,"click",o),s.on(s.menuButton_,"keydown",function(l){return s.handleKeyDown(l)}),s.on(s.menuButton_,"mouseenter",function(){s.addClass("vjs-hover"),s.menu.show(),bo(Be,"keyup",s.handleMenuKeyUp_)}),s.on("mouseleave",function(l){return s.handleMouseLeave(l)}),s.on("keydown",function(l){return s.handleSubmenuKeyDown(l)}),s}var t=e.prototype;return t.update=function(){var i=this.createMenu();this.menu&&(this.menu.dispose(),this.removeChild(this.menu)),this.menu=i,this.addChild(i),this.buttonPressed_=!1,this.menuButton_.el_.setAttribute("aria-expanded","false"),this.items&&this.items.length<=this.hideThreshold_?(this.hide(),this.menu.contentEl_.removeAttribute("role")):(this.show(),this.menu.contentEl_.setAttribute("role","menu"))},t.createMenu=function(){var i=new w7(this.player_,{menuButton:this});if(this.hideThreshold_=0,this.options_.title){var s=fn("li",{className:"vjs-menu-title",textContent:xi(this.options_.title),tabIndex:-1}),a=new Et(this.player_,{el:s});i.addItem(a)}if(this.items=this.createItems(),this.items)for(var o=0;o<this.items.length;o++)i.addItem(this.items[o]);return i},t.createItems=function(){},t.createEl=function(){return r.prototype.createEl.call(this,"div",{className:this.buildWrapperCSSClass()},{})},t.buildWrapperCSSClass=function(){var i="vjs-menu-button";this.options_.inline===!0?i+="-inline":i+="-popup";var s=Ll.prototype.buildCSSClass();return"vjs-menu-button "+i+" "+s+" "+r.prototype.buildCSSClass.call(this)},t.buildCSSClass=function(){var i="vjs-menu-button";return this.options_.inline===!0?i+="-inline":i+="-popup","vjs-menu-button "+i+" "+r.prototype.buildCSSClass.call(this)},t.controlText=function(i,s){return s===void 0&&(s=this.menuButton_.el()),this.menuButton_.controlText(i,s)},t.dispose=function(){this.handleMouseLeave(),r.prototype.dispose.call(this)},t.handleClick=function(i){this.buttonPressed_?this.unpressButton():this.pressButton()},t.handleMouseLeave=function(i){this.removeClass("vjs-hover"),zs(Be,"keyup",this.handleMenuKeyUp_)},t.focus=function(){this.menuButton_.focus()},t.blur=function(){this.menuButton_.blur()},t.handleKeyDown=function(i){$r.isEventKey(i,"Esc")||$r.isEventKey(i,"Tab")?(this.buttonPressed_&&this.unpressButton(),$r.isEventKey(i,"Tab")||(i.preventDefault(),this.menuButton_.focus())):($r.isEventKey(i,"Up")||$r.isEventKey(i,"Down"))&&(this.buttonPressed_||(i.preventDefault(),this.pressButton()))},t.handleMenuKeyUp=function(i){($r.isEventKey(i,"Esc")||$r.isEventKey(i,"Tab"))&&this.removeClass("vjs-hover")},t.handleSubmenuKeyPress=function(i){this.handleSubmenuKeyDown(i)},t.handleSubmenuKeyDown=function(i){($r.isEventKey(i,"Esc")||$r.isEventKey(i,"Tab"))&&(this.buttonPressed_&&this.unpressButton(),$r.isEventKey(i,"Tab")||(i.preventDefault(),this.menuButton_.focus()))},t.pressButton=function(){if(this.enabled_){if(this.buttonPressed_=!0,this.menu.show(),this.menu.lockShowing(),this.menuButton_.el_.setAttribute("aria-expanded","true"),ca&&$j())return;this.menu.focus()}},t.unpressButton=function(){this.enabled_&&(this.buttonPressed_=!1,this.menu.unlockShowing(),this.menu.hide(),this.menuButton_.el_.setAttribute("aria-expanded","false"))},t.disable=function(){this.unpressButton(),this.enabled_=!1,this.addClass("vjs-disabled"),this.menuButton_.disable()},t.enable=function(){this.enabled_=!0,this.removeClass("vjs-disabled"),this.menuButton_.enable()},e})(Et);Et.registerComponent("MenuButton",tD);var rD=(function(r){Ht(e,r);function e(t,n){var i,s=n.tracks;if(i=r.call(this,t,n)||this,i.items.length<=1&&i.hide(),!s)return We(i);var a=qn(We(i),i.update);return s.addEventListener("removetrack",a),s.addEventListener("addtrack",a),s.addEventListener("labelchange",a),i.player_.on("ready",a),i.player_.on("dispose",function(){s.removeEventListener("removetrack",a),s.removeEventListener("addtrack",a),s.removeEventListener("labelchange",a)}),i}return e})(tD);Et.registerComponent("TrackButton",rD);var ixe=["Tab","Esc","Up","Down","Right","Left"],kv=(function(r){Ht(e,r);function e(n,i){var s;return s=r.call(this,n,i)||this,s.selectable=i.selectable,s.isSelected_=i.selected||!1,s.multiSelectable=i.multiSelectable,s.selected(s.isSelected_),s.selectable?s.multiSelectable?s.el_.setAttribute("role","menuitemcheckbox"):s.el_.setAttribute("role","menuitemradio"):s.el_.setAttribute("role","menuitem"),s}var t=e.prototype;return t.createEl=function(i,s,a){this.nonIconControl=!0;var o=r.prototype.createEl.call(this,"li",ci({className:"vjs-menu-item",tabIndex:-1},s),a);return o.replaceChild(fn("span",{className:"vjs-menu-item-text",textContent:this.localize(this.options_.label)}),o.querySelector(".vjs-icon-placeholder")),o},t.handleKeyDown=function(i){ixe.some(function(s){return $r.isEventKey(i,s)})||r.prototype.handleKeyDown.call(this,i)},t.handleClick=function(i){this.selected(!0)},t.selected=function(i){this.selectable&&(i?(this.addClass("vjs-selected"),this.el_.setAttribute("aria-checked","true"),this.controlText(", selected"),this.isSelected_=!0):(this.removeClass("vjs-selected"),this.el_.setAttribute("aria-checked","false"),this.controlText(""),this.isSelected_=!1))},e})(nT);Et.registerComponent("MenuItem",kv);var Av=(function(r){Ht(e,r);function e(n,i){var s,a=i.track,o=n.textTracks();i.label=a.label||a.language||"Unknown",i.selected=a.mode==="showing",s=r.call(this,n,i)||this,s.track=a,s.kinds=(i.kinds||[i.kind||s.track.kind]).filter(Boolean);var l=function(){for(var f=arguments.length,g=new Array(f),v=0;v<f;v++)g[v]=arguments[v];s.handleTracksChange.apply(We(s),g)},u=function(){for(var f=arguments.length,g=new Array(f),v=0;v<f;v++)g[v]=arguments[v];s.handleSelectedLanguageChange.apply(We(s),g)};if(n.on(["loadstart","texttrackchange"],l),o.addEventListener("change",l),o.addEventListener("selectedlanguagechange",u),s.on("dispose",function(){n.off(["loadstart","texttrackchange"],l),o.removeEventListener("change",l),o.removeEventListener("selectedlanguagechange",u)}),o.onchange===void 0){var c;s.on(["tap","click"],function(){if(typeof X.Event!="object")try{c=new X.Event("change")}catch{}c||(c=Be.createEvent("Event"),c.initEvent("change",!0,!0)),o.dispatchEvent(c)})}return s.handleTracksChange(),s}var t=e.prototype;return t.handleClick=function(i){var s=this.track,a=this.player_.textTracks();if(r.prototype.handleClick.call(this,i),!!a)for(var o=0;o<a.length;o++){var l=a[o];this.kinds.indexOf(l.kind)!==-1&&(l===s?l.mode!=="showing"&&(l.mode="showing"):l.mode!=="disabled"&&(l.mode="disabled"))}},t.handleTracksChange=function(i){var s=this.track.mode==="showing";s!==this.isSelected_&&this.selected(s)},t.handleSelectedLanguageChange=function(i){if(this.track.mode==="showing"){var s=this.player_.cache_.selectedLanguage;if(s&&s.enabled&&s.language===this.track.language&&s.kind!==this.track.kind)return;this.player_.cache_.selectedLanguage={enabled:!0,language:this.track.language,kind:this.track.kind}}},t.dispose=function(){this.track=null,r.prototype.dispose.call(this)},e})(kv);Et.registerComponent("TextTrackMenuItem",Av);var E7=(function(r){Ht(e,r);function e(n,i){return i.track={player:n,kind:i.kind,kinds:i.kinds,default:!1,mode:"disabled"},i.kinds||(i.kinds=[i.kind]),i.label?i.track.label=i.label:i.track.label=i.kinds.join(" and ")+" off",i.selectable=!0,i.multiSelectable=!1,r.call(this,n,i)||this}var t=e.prototype;return t.handleTracksChange=function(i){for(var s=this.player().textTracks(),a=!0,o=0,l=s.length;o<l;o++){var u=s[o];if(this.options_.kinds.indexOf(u.kind)>-1&&u.mode==="showing"){a=!1;break}}a!==this.isSelected_&&this.selected(a)},t.handleSelectedLanguageChange=function(i){for(var s=this.player().textTracks(),a=!0,o=0,l=s.length;o<l;o++){var u=s[o];if(["captions","descriptions","subtitles"].indexOf(u.kind)>-1&&u.mode==="showing"){a=!1;break}}a&&(this.player_.cache_.selectedLanguage={enabled:!1})},e})(Av);Et.registerComponent("OffTextTrackMenuItem",E7);var $m=(function(r){Ht(e,r);function e(n,i){return i===void 0&&(i={}),i.tracks=n.textTracks(),r.call(this,n,i)||this}var t=e.prototype;return t.createItems=function(i,s){i===void 0&&(i=[]),s===void 0&&(s=Av);var a;this.label_&&(a=this.label_+" off"),i.push(new E7(this.player_,{kinds:this.kinds_,kind:this.kind_,label:a})),this.hideThreshold_+=1;var o=this.player_.textTracks();Array.isArray(this.kinds_)||(this.kinds_=[this.kind_]);for(var l=0;l<o.length;l++){var u=o[l];if(this.kinds_.indexOf(u.kind)>-1){var c=new s(this.player_,{track:u,kinds:this.kinds_,kind:this.kind_,selectable:!0,multiSelectable:!1});c.addClass("vjs-"+u.kind+"-menu-item"),i.push(c)}}return i},e})(rD);Et.registerComponent("TextTrackButton",$m);var k7=(function(r){Ht(e,r);function e(n,i){var s,a=i.track,o=i.cue,l=n.currentTime();return i.selectable=!0,i.multiSelectable=!1,i.label=o.text,i.selected=o.startTime<=l&&l<o.endTime,s=r.call(this,n,i)||this,s.track=a,s.cue=o,s}var t=e.prototype;return t.handleClick=function(i){r.prototype.handleClick.call(this),this.player_.currentTime(this.cue.startTime)},e})(kv);Et.registerComponent("ChaptersTrackMenuItem",k7);var nD=(function(r){Ht(e,r);function e(n,i,s){var a;return a=r.call(this,n,i,s)||this,a.selectCurrentItem_=function(){a.items.forEach(function(o){o.selected(a.track_.activeCues[0]===o.cue)})},a}var t=e.prototype;return t.buildCSSClass=function(){return"vjs-chapters-button "+r.prototype.buildCSSClass.call(this)},t.buildWrapperCSSClass=function(){return"vjs-chapters-button "+r.prototype.buildWrapperCSSClass.call(this)},t.update=function(i){if(!(i&&i.track&&i.track.kind!=="chapters")){var s=this.findChaptersTrack();s!==this.track_?(this.setTrack(s),r.prototype.update.call(this)):(!this.items||s&&s.cues&&s.cues.length!==this.items.length)&&r.prototype.update.call(this)}},t.setTrack=function(i){if(this.track_!==i){if(this.updateHandler_||(this.updateHandler_=this.update.bind(this)),this.track_){var s=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_);s&&s.removeEventListener("load",this.updateHandler_),this.track_.removeEventListener("cuechange",this.selectCurrentItem_),this.track_=null}if(this.track_=i,this.track_){this.track_.mode="hidden";var a=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_);a&&a.addEventListener("load",this.updateHandler_),this.track_.addEventListener("cuechange",this.selectCurrentItem_)}}},t.findChaptersTrack=function(){for(var i=this.player_.textTracks()||[],s=i.length-1;s>=0;s--){var a=i[s];if(a.kind===this.kind_)return a}},t.getMenuCaption=function(){return this.track_&&this.track_.label?this.track_.label:this.localize(xi(this.kind_))},t.createMenu=function(){return this.options_.title=this.getMenuCaption(),r.prototype.createMenu.call(this)},t.createItems=function(){var i=[];if(!this.track_)return i;var s=this.track_.cues;if(!s)return i;for(var a=0,o=s.length;a<o;a++){var l=s[a],u=new k7(this.player_,{track:this.track_,cue:l});i.push(u)}return i},e})($m);nD.prototype.kind_="chapters";nD.prototype.controlText_="Chapters";Et.registerComponent("ChaptersButton",nD);var iD=(function(r){Ht(e,r);function e(n,i,s){var a;a=r.call(this,n,i,s)||this;var o=n.textTracks(),l=qn(We(a),a.handleTracksChange);return o.addEventListener("change",l),a.on("dispose",function(){o.removeEventListener("change",l)}),a}var t=e.prototype;return t.handleTracksChange=function(i){for(var s=this.player().textTracks(),a=!1,o=0,l=s.length;o<l;o++){var u=s[o];if(u.kind!==this.kind_&&u.mode==="showing"){a=!0;break}}a?this.disable():this.enable()},t.buildCSSClass=function(){return"vjs-descriptions-button "+r.prototype.buildCSSClass.call(this)},t.buildWrapperCSSClass=function(){return"vjs-descriptions-button "+r.prototype.buildWrapperCSSClass.call(this)},e})($m);iD.prototype.kind_="descriptions";iD.prototype.controlText_="Descriptions";Et.registerComponent("DescriptionsButton",iD);var sD=(function(r){Ht(e,r);function e(n,i,s){return r.call(this,n,i,s)||this}var t=e.prototype;return t.buildCSSClass=function(){return"vjs-subtitles-button "+r.prototype.buildCSSClass.call(this)},t.buildWrapperCSSClass=function(){return"vjs-subtitles-button "+r.prototype.buildWrapperCSSClass.call(this)},e})($m);sD.prototype.kind_="subtitles";sD.prototype.controlText_="Subtitles";Et.registerComponent("SubtitlesButton",sD);var aD=(function(r){Ht(e,r);function e(n,i){var s;return i.track={player:n,kind:i.kind,label:i.kind+" settings",selectable:!1,default:!1,mode:"disabled"},i.selectable=!1,i.name="CaptionSettingsMenuItem",s=r.call(this,n,i)||this,s.addClass("vjs-texttrack-settings"),s.controlText(", opens "+i.kind+" settings dialog"),s}var t=e.prototype;return t.handleClick=function(i){this.player().getChild("textTrackSettings").open()},e})(Av);Et.registerComponent("CaptionSettingsMenuItem",aD);var oD=(function(r){Ht(e,r);function e(n,i,s){return r.call(this,n,i,s)||this}var t=e.prototype;return t.buildCSSClass=function(){return"vjs-captions-button "+r.prototype.buildCSSClass.call(this)},t.buildWrapperCSSClass=function(){return"vjs-captions-button "+r.prototype.buildWrapperCSSClass.call(this)},t.createItems=function(){var i=[];return!(this.player().tech_&&this.player().tech_.featuresNativeTextTracks)&&this.player().getChild("textTrackSettings")&&(i.push(new aD(this.player_,{kind:this.kind_})),this.hideThreshold_+=1),r.prototype.createItems.call(this,i)},e})($m);oD.prototype.kind_="captions";oD.prototype.controlText_="Captions";Et.registerComponent("CaptionsButton",oD);var A7=(function(r){Ht(e,r);function e(){return r.apply(this,arguments)||this}var t=e.prototype;return t.createEl=function(i,s,a){var o=r.prototype.createEl.call(this,i,s,a),l=o.querySelector(".vjs-menu-item-text");return this.options_.track.kind==="captions"&&(l.appendChild(fn("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),l.appendChild(fn("span",{className:"vjs-control-text",textContent:" "+this.localize("Captions")}))),o},e})(Av);Et.registerComponent("SubsCapsMenuItem",A7);var lD=(function(r){Ht(e,r);function e(n,i){var s;return i===void 0&&(i={}),s=r.call(this,n,i)||this,s.label_="subtitles",["en","en-us","en-ca","fr-ca"].indexOf(s.player_.language_)>-1&&(s.label_="captions"),s.menuButton_.controlText(xi(s.label_)),s}var t=e.prototype;return t.buildCSSClass=function(){return"vjs-subs-caps-button "+r.prototype.buildCSSClass.call(this)},t.buildWrapperCSSClass=function(){return"vjs-subs-caps-button "+r.prototype.buildWrapperCSSClass.call(this)},t.createItems=function(){var i=[];return!(this.player().tech_&&this.player().tech_.featuresNativeTextTracks)&&this.player().getChild("textTrackSettings")&&(i.push(new aD(this.player_,{kind:this.label_})),this.hideThreshold_+=1),i=r.prototype.createItems.call(this,i,A7),i},e})($m);lD.prototype.kinds_=["captions","subtitles"];lD.prototype.controlText_="Subtitles";Et.registerComponent("SubsCapsButton",lD);var D7=(function(r){Ht(e,r);function e(n,i){var s,a=i.track,o=n.audioTracks();i.label=a.label||a.language||"Unknown",i.selected=a.enabled,s=r.call(this,n,i)||this,s.track=a,s.addClass("vjs-"+a.kind+"-menu-item");var l=function(){for(var c=arguments.length,h=new Array(c),f=0;f<c;f++)h[f]=arguments[f];s.handleTracksChange.apply(We(s),h)};return o.addEventListener("change",l),s.on("dispose",function(){o.removeEventListener("change",l)}),s}var t=e.prototype;return t.createEl=function(i,s,a){var o=r.prototype.createEl.call(this,i,s,a),l=o.querySelector(".vjs-menu-item-text");return this.options_.track.kind==="main-desc"&&(l.appendChild(fn("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),l.appendChild(fn("span",{className:"vjs-control-text",textContent:" "+this.localize("Descriptions")}))),o},t.handleClick=function(i){if(r.prototype.handleClick.call(this,i),this.track.enabled=!0,this.player_.tech_.featuresNativeAudioTracks)for(var s=this.player_.audioTracks(),a=0;a<s.length;a++){var o=s[a];o!==this.track&&(o.enabled=o===this.track)}},t.handleTracksChange=function(i){this.selected(this.track.enabled)},e})(kv);Et.registerComponent("AudioTrackMenuItem",D7);var I7=(function(r){Ht(e,r);function e(n,i){return i===void 0&&(i={}),i.tracks=n.audioTracks(),r.call(this,n,i)||this}var t=e.prototype;return t.buildCSSClass=function(){return"vjs-audio-button "+r.prototype.buildCSSClass.call(this)},t.buildWrapperCSSClass=function(){return"vjs-audio-button "+r.prototype.buildWrapperCSSClass.call(this)},t.createItems=function(i){i===void 0&&(i=[]),this.hideThreshold_=1;for(var s=this.player_.audioTracks(),a=0;a<s.length;a++){var o=s[a];i.push(new D7(this.player_,{track:o,selectable:!0,multiSelectable:!1}))}return i},e})(rD);I7.prototype.controlText_="Audio Track";Et.registerComponent("AudioTrackButton",I7);var uD=(function(r){Ht(e,r);function e(n,i){var s,a=i.rate,o=parseFloat(a,10);return i.label=a,i.selected=o===n.playbackRate(),i.selectable=!0,i.multiSelectable=!1,s=r.call(this,n,i)||this,s.label=a,s.rate=o,s.on(n,"ratechange",function(l){return s.update(l)}),s}var t=e.prototype;return t.handleClick=function(i){r.prototype.handleClick.call(this),this.player().playbackRate(this.rate)},t.update=function(i){this.selected(this.player().playbackRate()===this.rate)},e})(kv);uD.prototype.contentElType="button";Et.registerComponent("PlaybackRateMenuItem",uD);var P7=(function(r){Ht(e,r);function e(n,i){var s;return s=r.call(this,n,i)||this,s.menuButton_.el_.setAttribute("aria-describedby",s.labelElId_),s.updateVisibility(),s.updateLabel(),s.on(n,"loadstart",function(a){return s.updateVisibility(a)}),s.on(n,"ratechange",function(a){return s.updateLabel(a)}),s.on(n,"playbackrateschange",function(a){return s.handlePlaybackRateschange(a)}),s}var t=e.prototype;return t.createEl=function(){var i=r.prototype.createEl.call(this);return this.labelElId_="vjs-playback-rate-value-label-"+this.id_,this.labelEl_=fn("div",{className:"vjs-playback-rate-value",id:this.labelElId_,textContent:"1x"}),i.appendChild(this.labelEl_),i},t.dispose=function(){this.labelEl_=null,r.prototype.dispose.call(this)},t.buildCSSClass=function(){return"vjs-playback-rate "+r.prototype.buildCSSClass.call(this)},t.buildWrapperCSSClass=function(){return"vjs-playback-rate "+r.prototype.buildWrapperCSSClass.call(this)},t.createItems=function(){for(var i=this.playbackRates(),s=[],a=i.length-1;a>=0;a--)s.push(new uD(this.player(),{rate:i[a]+"x"}));return s},t.updateARIAAttributes=function(){this.el().setAttribute("aria-valuenow",this.player().playbackRate())},t.handleClick=function(i){var s=this.player().playbackRate(),a=this.playbackRates(),o=a.indexOf(s),l=(o+1)%a.length;this.player().playbackRate(a[l])},t.handlePlaybackRateschange=function(i){this.update()},t.playbackRates=function(){var i=this.player();return i.playbackRates&&i.playbackRates()||[]},t.playbackRateSupported=function(){return this.player().tech_&&this.player().tech_.featuresPlaybackRate&&this.playbackRates()&&this.playbackRates().length>0},t.updateVisibility=function(i){this.playbackRateSupported()?this.removeClass("vjs-hidden"):this.addClass("vjs-hidden")},t.updateLabel=function(i){this.playbackRateSupported()&&(this.labelEl_.textContent=this.player().playbackRate()+"x")},e})(tD);P7.prototype.controlText_="Playback Rate";Et.registerComponent("PlaybackRateMenuButton",P7);var R7=(function(r){Ht(e,r);function e(){return r.apply(this,arguments)||this}var t=e.prototype;return t.buildCSSClass=function(){return"vjs-spacer "+r.prototype.buildCSSClass.call(this)},t.createEl=function(i,s,a){return i===void 0&&(i="div"),s===void 0&&(s={}),a===void 0&&(a={}),s.className||(s.className=this.buildCSSClass()),r.prototype.createEl.call(this,i,s,a)},e})(Et);Et.registerComponent("Spacer",R7);var sxe=(function(r){Ht(e,r);function e(){return r.apply(this,arguments)||this}var t=e.prototype;return t.buildCSSClass=function(){return"vjs-custom-control-spacer "+r.prototype.buildCSSClass.call(this)},t.createEl=function(){return r.prototype.createEl.call(this,"div",{className:this.buildCSSClass(),textContent:""})},e})(R7);Et.registerComponent("CustomControlSpacer",sxe);var Tb=(function(r){Ht(e,r);function e(){return r.apply(this,arguments)||this}var t=e.prototype;return t.createEl=function(){return r.prototype.createEl.call(this,"div",{className:"vjs-control-bar",dir:"ltr"})},e})(Et);Tb.prototype.options_={children:["playToggle","volumePanel","currentTimeDisplay","timeDivider","durationDisplay","progressControl","liveDisplay","seekToLive","remainingTimeDisplay","customControlSpacer","playbackRateMenuButton","chaptersButton","descriptionsButton","subsCapsButton","audioTrackButton","fullscreenToggle"]};"exitPictureInPicture"in Be&&Tb.prototype.options_.children.splice(Tb.prototype.options_.children.length-1,0,"pictureInPictureToggle");Et.registerComponent("ControlBar",Tb);var L7=(function(r){Ht(e,r);function e(n,i){var s;return s=r.call(this,n,i)||this,s.on(n,"error",function(a){return s.open(a)}),s}var t=e.prototype;return t.buildCSSClass=function(){return"vjs-error-display "+r.prototype.buildCSSClass.call(this)},t.content=function(){var i=this.player().error();return i?this.localize(i.message):""},e})(Bm);L7.prototype.options_=sr({},Bm.prototype.options_,{pauseOnOpen:!1,fillAlways:!0,temporary:!1,uncloseable:!0});Et.registerComponent("ErrorDisplay",L7);var lw="vjs-text-track-settings",z3=["#000","Black"],H3=["#00F","Blue"],V3=["#0FF","Cyan"],W3=["#0F0","Green"],q3=["#F0F","Magenta"],G3=["#F00","Red"],K3=["#FFF","White"],X3=["#FF0","Yellow"],uw=["1","Opaque"],cw=["0.5","Semi-Transparent"],Y3=["0","Transparent"],$h={backgroundColor:{selector:".vjs-bg-color > select",id:"captions-background-color-%s",label:"Color",options:[z3,K3,G3,W3,H3,X3,q3,V3]},backgroundOpacity:{selector:".vjs-bg-opacity > select",id:"captions-background-opacity-%s",label:"Transparency",options:[uw,cw,Y3]},color:{selector:".vjs-fg-color > select",id:"captions-foreground-color-%s",label:"Color",options:[K3,z3,G3,W3,H3,X3,q3,V3]},edgeStyle:{selector:".vjs-edge-style > select",id:"%s",label:"Text Edge Style",options:[["none","None"],["raised","Raised"],["depressed","Depressed"],["uniform","Uniform"],["dropshadow","Dropshadow"]]},fontFamily:{selector:".vjs-font-family > select",id:"captions-font-family-%s",label:"Font Family",options:[["proportionalSansSerif","Proportional Sans-Serif"],["monospaceSansSerif","Monospace Sans-Serif"],["proportionalSerif","Proportional Serif"],["monospaceSerif","Monospace Serif"],["casual","Casual"],["script","Script"],["small-caps","Small Caps"]]},fontPercent:{selector:".vjs-font-percent > select",id:"captions-font-size-%s",label:"Font Size",options:[["0.50","50%"],["0.75","75%"],["1.00","100%"],["1.25","125%"],["1.50","150%"],["1.75","175%"],["2.00","200%"],["3.00","300%"],["4.00","400%"]],default:2,parser:function(e){return e==="1.00"?null:Number(e)}},textOpacity:{selector:".vjs-text-opacity > select",id:"captions-foreground-opacity-%s",label:"Transparency",options:[uw,cw]},windowColor:{selector:".vjs-window-color > select",id:"captions-window-color-%s",label:"Color"},windowOpacity:{selector:".vjs-window-opacity > select",id:"captions-window-opacity-%s",label:"Transparency",options:[Y3,cw,uw]}};$h.windowColor.options=$h.backgroundColor.options;function O7(r,e){if(e&&(r=e(r)),r&&r!=="none")return r}function axe(r,e){var t=r.options[r.options.selectedIndex].value;return O7(t,e)}function oxe(r,e,t){if(e){for(var n=0;n<r.options.length;n++)if(O7(r.options[n].value,t)===e){r.selectedIndex=n;break}}}var lxe=(function(r){Ht(e,r);function e(n,i){var s;return i.temporary=!1,s=r.call(this,n,i)||this,s.updateDisplay=s.updateDisplay.bind(We(s)),s.fill(),s.hasBeenOpened_=s.hasBeenFilled_=!0,s.endDialog=fn("p",{className:"vjs-control-text",textContent:s.localize("End of dialog window.")}),s.el().appendChild(s.endDialog),s.setDefaults(),i.persistTextTrackSettings===void 0&&(s.options_.persistTextTrackSettings=s.options_.playerOptions.persistTextTrackSettings),s.on(s.$(".vjs-done-button"),"click",function(){s.saveSettings(),s.close()}),s.on(s.$(".vjs-default-button"),"click",function(){s.setDefaults(),s.updateDisplay()}),Bp($h,function(a){s.on(s.$(a.selector),"change",s.updateDisplay)}),s.options_.persistTextTrackSettings&&s.restoreSettings(),s}var t=e.prototype;return t.dispose=function(){this.endDialog=null,r.prototype.dispose.call(this)},t.createElSelect_=function(i,s,a){var o=this;s===void 0&&(s=""),a===void 0&&(a="label");var l=$h[i],u=l.id.replace("%s",this.id_),c=[s,u].join(" ").trim();return["<"+a+' id="'+u+'" class="'+(a==="label"?"vjs-label":"")+'">',this.localize(l.label),"</"+a+">",'<select aria-labelledby="'+c+'">'].concat(l.options.map(function(h){var f=u+"-"+h[1].replace(/\W+/g,"");return['<option id="'+f+'" value="'+h[0]+'" ','aria-labelledby="'+c+" "+f+'">',o.localize(h[1]),"</option>"].join("")})).concat("</select>").join("")},t.createElFgColor_=function(){var i="captions-text-legend-"+this.id_;return['<fieldset class="vjs-fg-color vjs-track-setting">','<legend id="'+i+'">',this.localize("Text"),"</legend>",this.createElSelect_("color",i),'<span class="vjs-text-opacity vjs-opacity">',this.createElSelect_("textOpacity",i),"</span>","</fieldset>"].join("")},t.createElBgColor_=function(){var i="captions-background-"+this.id_;return['<fieldset class="vjs-bg-color vjs-track-setting">','<legend id="'+i+'">',this.localize("Background"),"</legend>",this.createElSelect_("backgroundColor",i),'<span class="vjs-bg-opacity vjs-opacity">',this.createElSelect_("backgroundOpacity",i),"</span>","</fieldset>"].join("")},t.createElWinColor_=function(){var i="captions-window-"+this.id_;return['<fieldset class="vjs-window-color vjs-track-setting">','<legend id="'+i+'">',this.localize("Window"),"</legend>",this.createElSelect_("windowColor",i),'<span class="vjs-window-opacity vjs-opacity">',this.createElSelect_("windowOpacity",i),"</span>","</fieldset>"].join("")},t.createElColors_=function(){return fn("div",{className:"vjs-track-settings-colors",innerHTML:[this.createElFgColor_(),this.createElBgColor_(),this.createElWinColor_()].join("")})},t.createElFont_=function(){return fn("div",{className:"vjs-track-settings-font",innerHTML:['<fieldset class="vjs-font-percent vjs-track-setting">',this.createElSelect_("fontPercent","","legend"),"</fieldset>",'<fieldset class="vjs-edge-style vjs-track-setting">',this.createElSelect_("edgeStyle","","legend"),"</fieldset>",'<fieldset class="vjs-font-family vjs-track-setting">',this.createElSelect_("fontFamily","","legend"),"</fieldset>"].join("")})},t.createElControls_=function(){var i=this.localize("restore all settings to the default values");return fn("div",{className:"vjs-track-settings-controls",innerHTML:['<button type="button" class="vjs-default-button" title="'+i+'">',this.localize("Reset"),'<span class="vjs-control-text"> '+i+"</span>","</button>",'<button type="button" class="vjs-done-button">'+this.localize("Done")+"</button>"].join("")})},t.content=function(){return[this.createElColors_(),this.createElFont_(),this.createElControls_()]},t.label=function(){return this.localize("Caption Settings Dialog")},t.description=function(){return this.localize("Beginning of dialog window. Escape will cancel and close the window.")},t.buildCSSClass=function(){return r.prototype.buildCSSClass.call(this)+" vjs-text-track-settings"},t.getValues=function(){var i=this;return Yve($h,function(s,a,o){var l=axe(i.$(a.selector),a.parser);return l!==void 0&&(s[o]=l),s},{})},t.setValues=function(i){var s=this;Bp($h,function(a,o){oxe(s.$(a.selector),i[o],a.parser)})},t.setDefaults=function(){var i=this;Bp($h,function(s){var a=s.hasOwnProperty("default")?s.default:0;i.$(s.selector).selectedIndex=a})},t.restoreSettings=function(){var i;try{i=JSON.parse(X.localStorage.getItem(lw))}catch(s){Xr.warn(s)}i&&this.setValues(i)},t.saveSettings=function(){if(this.options_.persistTextTrackSettings){var i=this.getValues();try{Object.keys(i).length?X.localStorage.setItem(lw,JSON.stringify(i)):X.localStorage.removeItem(lw)}catch(s){Xr.warn(s)}}},t.updateDisplay=function(){var i=this.player_.getChild("textTrackDisplay");i&&i.updateDisplay()},t.conditionalBlur_=function(){this.previouslyActiveEl_=null;var i=this.player_.controlBar,s=i&&i.subsCapsButton,a=i&&i.captionsButton;s?s.focus():a&&a.focus()},e})(Bm);Et.registerComponent("TextTrackSettings",lxe);var uxe=(function(r){Ht(e,r);function e(n,i){var s,a=i.ResizeObserver||X.ResizeObserver;i.ResizeObserver===null&&(a=!1);var o=Wn({createEl:!a,reportTouchActivity:!1},i);return s=r.call(this,n,o)||this,s.ResizeObserver=i.ResizeObserver||X.ResizeObserver,s.loadListener_=null,s.resizeObserver_=null,s.debouncedHandler_=oye(function(){s.resizeHandler()},100,!1,We(s)),a?(s.resizeObserver_=new s.ResizeObserver(s.debouncedHandler_),s.resizeObserver_.observe(n.el())):(s.loadListener_=function(){if(!(!s.el_||!s.el_.contentWindow)){var l=s.debouncedHandler_,u=s.unloadListener_=function(){zs(this,"resize",l),zs(this,"unload",u),u=null};bo(s.el_.contentWindow,"unload",u),bo(s.el_.contentWindow,"resize",l)}},s.one("load",s.loadListener_)),s}var t=e.prototype;return t.createEl=function(){return r.prototype.createEl.call(this,"iframe",{className:"vjs-resize-manager",tabIndex:-1,title:this.localize("No content")},{"aria-hidden":"true"})},t.resizeHandler=function(){!this.player_||!this.player_.trigger||this.player_.trigger("playerresize")},t.dispose=function(){this.debouncedHandler_&&this.debouncedHandler_.cancel(),this.resizeObserver_&&(this.player_.el()&&this.resizeObserver_.unobserve(this.player_.el()),this.resizeObserver_.disconnect()),this.loadListener_&&this.off("load",this.loadListener_),this.el_&&this.el_.contentWindow&&this.unloadListener_&&this.unloadListener_.call(this.el_.contentWindow),this.ResizeObserver=null,this.resizeObserver=null,this.debouncedHandler_=null,this.loadListener_=null,r.prototype.dispose.call(this)},e})(Et);Et.registerComponent("ResizeManager",uxe);var cxe={trackingThreshold:20,liveTolerance:15},dxe=(function(r){Ht(e,r);function e(n,i){var s,a=Wn(cxe,i,{createEl:!1});return s=r.call(this,n,a)||this,s.handleVisibilityChange_=function(o){return s.handleVisibilityChange(o)},s.trackLiveHandler_=function(){return s.trackLive_()},s.handlePlay_=function(o){return s.handlePlay(o)},s.handleFirstTimeupdate_=function(o){return s.handleFirstTimeupdate(o)},s.handleSeeked_=function(o){return s.handleSeeked(o)},s.seekToLiveEdge_=function(o){return s.seekToLiveEdge(o)},s.reset_(),s.on(s.player_,"durationchange",function(o){return s.handleDurationchange(o)}),s.on(s.player_,"canplay",function(){return s.toggleTracking()}),Cv&&"hidden"in Be&&"visibilityState"in Be&&s.on(Be,"visibilitychange",s.handleVisibilityChange_),s}var t=e.prototype;return t.handleVisibilityChange=function(){this.player_.duration()===1/0&&(Be.hidden?this.stopTracking():this.startTracking())},t.trackLive_=function(){var i=this.player_.seekable();if(!(!i||!i.length)){var s=Number(X.performance.now().toFixed(4)),a=this.lastTime_===-1?0:(s-this.lastTime_)/1e3;this.lastTime_=s,this.pastSeekEnd_=this.pastSeekEnd()+a;var o=this.liveCurrentTime(),l=this.player_.currentTime(),u=this.player_.paused()||this.seekedBehindLive_||Math.abs(o-l)>this.options_.liveTolerance;(!this.timeupdateSeen_||o===1/0)&&(u=!1),u!==this.behindLiveEdge_&&(this.behindLiveEdge_=u,this.trigger("liveedgechange"))}},t.handleDurationchange=function(){this.toggleTracking()},t.toggleTracking=function(){this.player_.duration()===1/0&&this.liveWindow()>=this.options_.trackingThreshold?(this.player_.options_.liveui&&this.player_.addClass("vjs-liveui"),this.startTracking()):(this.player_.removeClass("vjs-liveui"),this.stopTracking())},t.startTracking=function(){this.isTracking()||(this.timeupdateSeen_||(this.timeupdateSeen_=this.player_.hasStarted()),this.trackingInterval_=this.setInterval(this.trackLiveHandler_,Fl),this.trackLive_(),this.on(this.player_,["play","pause"],this.trackLiveHandler_),this.timeupdateSeen_?this.on(this.player_,"seeked",this.handleSeeked_):(this.one(this.player_,"play",this.handlePlay_),this.one(this.player_,"timeupdate",this.handleFirstTimeupdate_)))},t.handleFirstTimeupdate=function(){this.timeupdateSeen_=!0,this.on(this.player_,"seeked",this.handleSeeked_)},t.handleSeeked=function(){var i=Math.abs(this.liveCurrentTime()-this.player_.currentTime());this.seekedBehindLive_=this.nextSeekedFromUser_&&i>2,this.nextSeekedFromUser_=!1,this.trackLive_()},t.handlePlay=function(){this.one(this.player_,"timeupdate",this.seekToLiveEdge_)},t.reset_=function(){this.lastTime_=-1,this.pastSeekEnd_=0,this.lastSeekEnd_=-1,this.behindLiveEdge_=!0,this.timeupdateSeen_=!1,this.seekedBehindLive_=!1,this.nextSeekedFromUser_=!1,this.clearInterval(this.trackingInterval_),this.trackingInterval_=null,this.off(this.player_,["play","pause"],this.trackLiveHandler_),this.off(this.player_,"seeked",this.handleSeeked_),this.off(this.player_,"play",this.handlePlay_),this.off(this.player_,"timeupdate",this.handleFirstTimeupdate_),this.off(this.player_,"timeupdate",this.seekToLiveEdge_)},t.nextSeekedFromUser=function(){this.nextSeekedFromUser_=!0},t.stopTracking=function(){this.isTracking()&&(this.reset_(),this.trigger("liveedgechange"))},t.seekableEnd=function(){for(var i=this.player_.seekable(),s=[],a=i?i.length:0;a--;)s.push(i.end(a));return s.length?s.sort()[s.length-1]:1/0},t.seekableStart=function(){for(var i=this.player_.seekable(),s=[],a=i?i.length:0;a--;)s.push(i.start(a));return s.length?s.sort()[0]:0},t.liveWindow=function(){var i=this.liveCurrentTime();return i===1/0?0:i-this.seekableStart()},t.isLive=function(){return this.isTracking()},t.atLiveEdge=function(){return!this.behindLiveEdge()},t.liveCurrentTime=function(){return this.pastSeekEnd()+this.seekableEnd()},t.pastSeekEnd=function(){var i=this.seekableEnd();return this.lastSeekEnd_!==-1&&i!==this.lastSeekEnd_&&(this.pastSeekEnd_=0),this.lastSeekEnd_=i,this.pastSeekEnd_},t.behindLiveEdge=function(){return this.behindLiveEdge_},t.isTracking=function(){return typeof this.trackingInterval_=="number"},t.seekToLiveEdge=function(){this.seekedBehindLive_=!1,!this.atLiveEdge()&&(this.nextSeekedFromUser_=!1,this.player_.currentTime(this.liveCurrentTime()))},t.dispose=function(){this.off(Be,"visibilitychange",this.handleVisibilityChange_),this.stopTracking(),r.prototype.dispose.call(this)},e})(Et);Et.registerComponent("LiveTracker",dxe);var cE=function(e){var t=e.el();if(t.hasAttribute("src"))return e.triggerSourceset(t.src),!0;var n=e.$$("source"),i=[],s="";if(!n.length)return!1;for(var a=0;a<n.length;a++){var o=n[a].src;o&&i.indexOf(o)===-1&&i.push(o)}return i.length?(i.length===1&&(s=i[0]),e.triggerSourceset(s),!0):!1},hxe=Object.defineProperty({},"innerHTML",{get:function(){return this.cloneNode(!0).innerHTML},set:function(e){var t=Be.createElement(this.nodeName.toLowerCase());t.innerHTML=e;for(var n=Be.createDocumentFragment();t.childNodes.length;)n.appendChild(t.childNodes[0]);return this.innerText="",X.Element.prototype.appendChild.call(this,n),this.innerHTML}}),M7=function(e,t){for(var n={},i=0;i<e.length&&(n=Object.getOwnPropertyDescriptor(e[i],t),!(n&&n.set&&n.get));i++);return n.enumerable=!0,n.configurable=!0,n},fxe=function(e){return M7([e.el(),X.HTMLMediaElement.prototype,X.Element.prototype,hxe],"innerHTML")},Q3=function(e){var t=e.el();if(!t.resetSourceWatch_){var n={},i=fxe(e),s=function(o){return function(){for(var l=arguments.length,u=new Array(l),c=0;c<l;c++)u[c]=arguments[c];var h=o.apply(t,u);return cE(e),h}};["append","appendChild","insertAdjacentHTML"].forEach(function(a){t[a]&&(n[a]=t[a],t[a]=s(n[a]))}),Object.defineProperty(t,"innerHTML",Wn(i,{set:s(i.set)})),t.resetSourceWatch_=function(){t.resetSourceWatch_=null,Object.keys(n).forEach(function(a){t[a]=n[a]}),Object.defineProperty(t,"innerHTML",i)},e.one("sourceset",t.resetSourceWatch_)}},pxe=Object.defineProperty({},"src",{get:function(){return this.hasAttribute("src")?l7(X.Element.prototype.getAttribute.call(this,"src")):""},set:function(e){return X.Element.prototype.setAttribute.call(this,"src",e),e}}),mxe=function(e){return M7([e.el(),X.HTMLMediaElement.prototype,pxe],"src")},gxe=function(e){if(e.featuresSourceset){var t=e.el();if(!t.resetSourceset_){var n=mxe(e),i=t.setAttribute,s=t.load;Object.defineProperty(t,"src",Wn(n,{set:function(o){var l=n.set.call(t,o);return e.triggerSourceset(t.src),l}})),t.setAttribute=function(a,o){var l=i.call(t,a,o);return/src/i.test(a)&&e.triggerSourceset(t.src),l},t.load=function(){var a=s.call(t);return cE(e)||(e.triggerSourceset(""),Q3(e)),a},t.currentSrc?e.triggerSourceset(t.currentSrc):cE(e)||Q3(e),t.resetSourceset_=function(){t.resetSourceset_=null,t.load=s,t.setAttribute=i,Object.defineProperty(t,"src",n),t.resetSourceWatch_&&t.resetSourceWatch_()}}}},cD=function(e,t,n,i){i===void 0&&(i=!0);var s=function(l){return Object.defineProperty(e,t,{value:l,enumerable:!0,writable:!0})},a={configurable:!0,enumerable:!0,get:function(){var l=n();return s(l),l}};return i&&(a.set=s),Object.defineProperty(e,t,a)},Gt=(function(r){Ht(e,r);function e(n,i){var s;s=r.call(this,n,i)||this;var a=n.source,o=!1;if(s.featuresVideoFrameCallback=s.featuresVideoFrameCallback&&s.el_.tagName==="VIDEO",a&&(s.el_.currentSrc!==a.src||n.tag&&n.tag.initNetworkState_===3)?s.setSource(a):s.handleLateInit_(s.el_),n.enableSourceset&&s.setupSourcesetHandling_(),s.isScrubbing_=!1,s.el_.hasChildNodes()){for(var l=s.el_.childNodes,u=l.length,c=[];u--;){var h=l[u],f=h.nodeName.toLowerCase();f==="track"&&(s.featuresNativeTextTracks?(s.remoteTextTrackEls().addTrackElement_(h),s.remoteTextTracks().addTrack(h.track),s.textTracks().addTrack(h.track),!o&&!s.el_.hasAttribute("crossorigin")&&rT(h.src)&&(o=!0)):c.push(h))}for(var g=0;g<c.length;g++)s.el_.removeChild(c[g])}return s.proxyNativeTracks_(),s.featuresNativeTextTracks&&o&&Xr.warn(`Text Tracks are being loaded from another origin but the crossorigin attribute isn't used.
This may prevent text tracks from loading.`),s.restoreMetadataTracksInIOSNativePlayer_(),(lm||UA||Mj)&&n.nativeControlsForTouch===!0&&s.setControls(!0),s.proxyWebkitFullscreen_(),s.triggerReady(),s}var t=e.prototype;return t.dispose=function(){this.el_&&this.el_.resetSourceset_&&this.el_.resetSourceset_(),e.disposeMediaElement(this.el_),this.options_=null,r.prototype.dispose.call(this)},t.setupSourcesetHandling_=function(){gxe(this)},t.restoreMetadataTracksInIOSNativePlayer_=function(){var i=this.textTracks(),s,a=function(){s=[];for(var u=0;u<i.length;u++){var c=i[u];c.kind==="metadata"&&s.push({track:c,storedMode:c.mode})}};a(),i.addEventListener("change",a),this.on("dispose",function(){return i.removeEventListener("change",a)});var o=function l(){for(var u=0;u<s.length;u++){var c=s[u];c.track.mode==="disabled"&&c.track.mode!==c.storedMode&&(c.track.mode=c.storedMode)}i.removeEventListener("change",l)};this.on("webkitbeginfullscreen",function(){i.removeEventListener("change",a),i.removeEventListener("change",o),i.addEventListener("change",o)}),this.on("webkitendfullscreen",function(){i.removeEventListener("change",a),i.addEventListener("change",a),i.removeEventListener("change",o)})},t.overrideNative_=function(i,s){var a=this;if(s===this["featuresNative"+i+"Tracks"]){var o=i.toLowerCase();this[o+"TracksListeners_"]&&Object.keys(this[o+"TracksListeners_"]).forEach(function(l){var u=a.el()[o+"Tracks"];u.removeEventListener(l,a[o+"TracksListeners_"][l])}),this["featuresNative"+i+"Tracks"]=!s,this[o+"TracksListeners_"]=null,this.proxyNativeTracksForType_(o)}},t.overrideNativeAudioTracks=function(i){this.overrideNative_("Audio",i)},t.overrideNativeVideoTracks=function(i){this.overrideNative_("Video",i)},t.proxyNativeTracksForType_=function(i){var s=this,a=Jo[i],o=this.el()[a.getterName],l=this[a.getterName]();if(!(!this["featuresNative"+a.capitalName+"Tracks"]||!o||!o.addEventListener)){var u={change:function(f){var g={type:"change",target:l,currentTarget:l,srcElement:l};l.trigger(g),i==="text"&&s[hm.remoteText.getterName]().trigger(g)},addtrack:function(f){l.addTrack(f.track)},removetrack:function(f){l.removeTrack(f.track)}},c=function(){for(var f=[],g=0;g<l.length;g++){for(var v=!1,y=0;y<o.length;y++)if(o[y]===l[g]){v=!0;break}v||f.push(l[g])}for(;f.length;)l.removeTrack(f.shift())};this[a.getterName+"Listeners_"]=u,Object.keys(u).forEach(function(h){var f=u[h];o.addEventListener(h,f),s.on("dispose",function(g){return o.removeEventListener(h,f)})}),this.on("loadstart",c),this.on("dispose",function(h){return s.off("loadstart",c)})}},t.proxyNativeTracks_=function(){var i=this;Jo.names.forEach(function(s){i.proxyNativeTracksForType_(s)})},t.createEl=function(){var i=this.options_.tag;if(!i||!(this.options_.playerElIngest||this.movingMediaElementInDOM)){if(i){var s=i.cloneNode(!0);i.parentNode&&i.parentNode.insertBefore(s,i),e.disposeMediaElement(i),i=s}else{i=Be.createElement("video");var a=this.options_.tag&&Cc(this.options_.tag),o=Wn({},a);(!lm||this.options_.nativeControlsForTouch!==!0)&&delete o.controls,Hj(i,ci(o,{id:this.options_.techId,class:"vjs-tech"}))}i.playerId=this.options_.playerId}typeof this.options_.preload<"u"&&um(i,"preload",this.options_.preload),this.options_.disablePictureInPicture!==void 0&&(i.disablePictureInPicture=this.options_.disablePictureInPicture);for(var l=["loop","muted","playsinline","autoplay"],u=0;u<l.length;u++){var c=l[u],h=this.options_[c];typeof h<"u"&&(h?um(i,c,c):QS(i,c),i[c]=h)}return i},t.handleLateInit_=function(i){if(!(i.networkState===0||i.networkState===3)){if(i.readyState===0){var s=!1,a=function(){s=!0};this.on("loadstart",a);var o=function(){s||this.trigger("loadstart")};this.on("loadedmetadata",o),this.ready(function(){this.off("loadstart",a),this.off("loadedmetadata",o),s||this.trigger("loadstart")});return}var l=["loadstart"];l.push("loadedmetadata"),i.readyState>=2&&l.push("loadeddata"),i.readyState>=3&&l.push("canplay"),i.readyState>=4&&l.push("canplaythrough"),this.ready(function(){l.forEach(function(u){this.trigger(u)},this)})}},t.setScrubbing=function(i){this.isScrubbing_=i},t.scrubbing=function(){return this.isScrubbing_},t.setCurrentTime=function(i){try{this.isScrubbing_&&this.el_.fastSeek&&YS?this.el_.fastSeek(i):this.el_.currentTime=i}catch(s){Xr(s,"Video is not ready. (Video.js)")}},t.duration=function(){var i=this;if(this.el_.duration===1/0&&$c&&jc&&this.el_.currentTime===0){var s=function a(){i.el_.currentTime>0&&(i.el_.duration===1/0&&i.trigger("durationchange"),i.off("timeupdate",a))};return this.on("timeupdate",s),NaN}return this.el_.duration||NaN},t.width=function(){return this.el_.offsetWidth},t.height=function(){return this.el_.offsetHeight},t.proxyWebkitFullscreen_=function(){var i=this;if("webkitDisplayingFullscreen"in this.el_){var s=function(){this.trigger("fullscreenchange",{isFullscreen:!1}),this.el_.controls&&!this.options_.nativeControlsForTouch&&this.controls()&&(this.el_.controls=!1)},a=function(){"webkitPresentationMode"in this.el_&&this.el_.webkitPresentationMode!=="picture-in-picture"&&(this.one("webkitendfullscreen",s),this.trigger("fullscreenchange",{isFullscreen:!0,nativeIOSFullscreen:!0}))};this.on("webkitbeginfullscreen",a),this.on("dispose",function(){i.off("webkitbeginfullscreen",a),i.off("webkitendfullscreen",s)})}},t.supportsFullScreen=function(){if(typeof this.el_.webkitEnterFullScreen=="function"){var i=X.navigator&&X.navigator.userAgent||"";if(/Android/.test(i)||!/Chrome|Mac OS X 10.5/.test(i))return!0}return!1},t.enterFullScreen=function(){var i=this.el_;if(i.paused&&i.networkState<=i.HAVE_METADATA)Eu(this.el_.play()),this.setTimeout(function(){i.pause();try{i.webkitEnterFullScreen()}catch(s){this.trigger("fullscreenerror",s)}},0);else try{i.webkitEnterFullScreen()}catch(s){this.trigger("fullscreenerror",s)}},t.exitFullScreen=function(){if(!this.el_.webkitDisplayingFullscreen){this.trigger("fullscreenerror",new Error("The video is not fullscreen"));return}this.el_.webkitExitFullScreen()},t.requestPictureInPicture=function(){return this.el_.requestPictureInPicture()},t.requestVideoFrameCallback=function(i){return this.featuresVideoFrameCallback&&!this.el_.webkitKeys?this.el_.requestVideoFrameCallback(i):r.prototype.requestVideoFrameCallback.call(this,i)},t.cancelVideoFrameCallback=function(i){this.featuresVideoFrameCallback&&!this.el_.webkitKeys?this.el_.cancelVideoFrameCallback(i):r.prototype.cancelVideoFrameCallback.call(this,i)},t.src=function(i){if(i===void 0)return this.el_.src;this.setSrc(i)},t.reset=function(){e.resetMediaElement(this.el_)},t.currentSrc=function(){return this.currentSource_?this.currentSource_.src:this.el_.currentSrc},t.setControls=function(i){this.el_.controls=!!i},t.addTextTrack=function(i,s,a){return this.featuresNativeTextTracks?this.el_.addTextTrack(i,s,a):r.prototype.addTextTrack.call(this,i,s,a)},t.createRemoteTextTrack=function(i){if(!this.featuresNativeTextTracks)return r.prototype.createRemoteTextTrack.call(this,i);var s=Be.createElement("track");return i.kind&&(s.kind=i.kind),i.label&&(s.label=i.label),(i.language||i.srclang)&&(s.srclang=i.language||i.srclang),i.default&&(s.default=i.default),i.id&&(s.id=i.id),i.src&&(s.src=i.src),s},t.addRemoteTextTrack=function(i,s){var a=r.prototype.addRemoteTextTrack.call(this,i,s);return this.featuresNativeTextTracks&&this.el().appendChild(a),a},t.removeRemoteTextTrack=function(i){if(r.prototype.removeRemoteTextTrack.call(this,i),this.featuresNativeTextTracks)for(var s=this.$$("track"),a=s.length;a--;)(i===s[a]||i===s[a].track)&&this.el().removeChild(s[a])},t.getVideoPlaybackQuality=function(){if(typeof this.el().getVideoPlaybackQuality=="function")return this.el().getVideoPlaybackQuality();var i={};return typeof this.el().webkitDroppedFrameCount<"u"&&typeof this.el().webkitDecodedFrameCount<"u"&&(i.droppedVideoFrames=this.el().webkitDroppedFrameCount,i.totalVideoFrames=this.el().webkitDecodedFrameCount),X.performance&&typeof X.performance.now=="function"?i.creationTime=X.performance.now():X.performance&&X.performance.timing&&typeof X.performance.timing.navigationStart=="number"&&(i.creationTime=X.Date.now()-X.performance.timing.navigationStart),i},e})(Un);cD(Gt,"TEST_VID",function(){if(Om()){var r=Be.createElement("video"),e=Be.createElement("track");return e.kind="captions",e.srclang="en",e.label="English",r.appendChild(e),r}});Gt.isSupported=function(){try{Gt.TEST_VID.volume=.5}catch{return!1}return!!(Gt.TEST_VID&&Gt.TEST_VID.canPlayType)};Gt.canPlayType=function(r){return Gt.TEST_VID.canPlayType(r)};Gt.canPlaySource=function(r,e){return Gt.canPlayType(r.type)};Gt.canControlVolume=function(){try{var r=Gt.TEST_VID.volume;Gt.TEST_VID.volume=r/2+.1;var e=r!==Gt.TEST_VID.volume;return e&&ca?(X.setTimeout(function(){Gt&&Gt.prototype&&(Gt.prototype.featuresVolumeControl=r!==Gt.TEST_VID.volume)}),!1):e}catch{return!1}};Gt.canMuteVolume=function(){try{var r=Gt.TEST_VID.muted;return Gt.TEST_VID.muted=!r,Gt.TEST_VID.muted?um(Gt.TEST_VID,"muted","muted"):QS(Gt.TEST_VID,"muted","muted"),r!==Gt.TEST_VID.muted}catch{return!1}};Gt.canControlPlaybackRate=function(){if($c&&jc&&Bj<58)return!1;try{var r=Gt.TEST_VID.playbackRate;return Gt.TEST_VID.playbackRate=r/2+.1,r!==Gt.TEST_VID.playbackRate}catch{return!1}};Gt.canOverrideAttributes=function(){try{var r=function(){};Object.defineProperty(Be.createElement("video"),"src",{get:r,set:r}),Object.defineProperty(Be.createElement("audio"),"src",{get:r,set:r}),Object.defineProperty(Be.createElement("video"),"innerHTML",{get:r,set:r}),Object.defineProperty(Be.createElement("audio"),"innerHTML",{get:r,set:r})}catch{return!1}return!0};Gt.supportsNativeTextTracks=function(){return YS||ca&&jc};Gt.supportsNativeVideoTracks=function(){return!!(Gt.TEST_VID&&Gt.TEST_VID.videoTracks)};Gt.supportsNativeAudioTracks=function(){return!!(Gt.TEST_VID&&Gt.TEST_VID.audioTracks)};Gt.Events=["loadstart","suspend","abort","error","emptied","stalled","loadedmetadata","loadeddata","canplay","canplaythrough","playing","waiting","seeking","seeked","ended","durationchange","timeupdate","progress","play","pause","ratechange","resize","volumechange"];[["featuresMuteControl","canMuteVolume"],["featuresPlaybackRate","canControlPlaybackRate"],["featuresSourceset","canOverrideAttributes"],["featuresNativeTextTracks","supportsNativeTextTracks"],["featuresNativeVideoTracks","supportsNativeVideoTracks"],["featuresNativeAudioTracks","supportsNativeAudioTracks"]].forEach(function(r){var e=r[0],t=r[1];cD(Gt.prototype,e,function(){return Gt[t]()},!0)});Gt.prototype.featuresVolumeControl=Gt.canControlVolume();Gt.prototype.movingMediaElementInDOM=!ca;Gt.prototype.featuresFullscreenResize=!0;Gt.prototype.featuresProgressEvents=!0;Gt.prototype.featuresTimeupdateEvents=!0;Gt.prototype.featuresVideoFrameCallback=!!(Gt.TEST_VID&&Gt.TEST_VID.requestVideoFrameCallback);var Cb;Gt.patchCanPlayType=function(){FA>=4&&!Fj&&!jc&&(Cb=Gt.TEST_VID&&Gt.TEST_VID.constructor.prototype.canPlayType,Gt.TEST_VID.constructor.prototype.canPlayType=function(r){var e=/^application\/(?:x-|vnd\.apple\.)mpegurl/i;return r&&e.test(r)?"maybe":Cb.call(this,r)})};Gt.unpatchCanPlayType=function(){var r=Gt.TEST_VID.constructor.prototype.canPlayType;return Cb&&(Gt.TEST_VID.constructor.prototype.canPlayType=Cb),r};Gt.patchCanPlayType();Gt.disposeMediaElement=function(r){if(r){for(r.parentNode&&r.parentNode.removeChild(r);r.hasChildNodes();)r.removeChild(r.firstChild);r.removeAttribute("src"),typeof r.load=="function"&&(function(){try{r.load()}catch{}})()}};Gt.resetMediaElement=function(r){if(r){for(var e=r.querySelectorAll("source"),t=e.length;t--;)r.removeChild(e[t]);r.removeAttribute("src"),typeof r.load=="function"&&(function(){try{r.load()}catch{}})()}};["muted","defaultMuted","autoplay","controls","loop","playsinline"].forEach(function(r){Gt.prototype[r]=function(){return this.el_[r]||this.el_.hasAttribute(r)}});["muted","defaultMuted","autoplay","loop","playsinline"].forEach(function(r){Gt.prototype["set"+xi(r)]=function(e){this.el_[r]=e,e?this.el_.setAttribute(r,r):this.el_.removeAttribute(r)}});["paused","currentTime","buffered","volume","poster","preload","error","seeking","seekable","ended","playbackRate","defaultPlaybackRate","disablePictureInPicture","played","networkState","readyState","videoWidth","videoHeight","crossOrigin"].forEach(function(r){Gt.prototype[r]=function(){return this.el_[r]}});["volume","src","poster","preload","playbackRate","defaultPlaybackRate","disablePictureInPicture","crossOrigin"].forEach(function(r){Gt.prototype["set"+xi(r)]=function(e){this.el_[r]=e}});["pause","load","play"].forEach(function(r){Gt.prototype[r]=function(){return this.el_[r]()}});Un.withSourceHandlers(Gt);Gt.nativeSourceHandler={};Gt.nativeSourceHandler.canPlayType=function(r){try{return Gt.TEST_VID.canPlayType(r)}catch{return""}};Gt.nativeSourceHandler.canHandleSource=function(r,e){if(r.type)return Gt.nativeSourceHandler.canPlayType(r.type);if(r.src){var t=qA(r.src);return Gt.nativeSourceHandler.canPlayType("video/"+t)}return""};Gt.nativeSourceHandler.handleSource=function(r,e,t){e.setSrc(r.src)};Gt.nativeSourceHandler.dispose=function(){};Gt.registerSourceHandler(Gt.nativeSourceHandler);Un.registerTech("Html5",Gt);var F7=["progress","abort","suspend","emptied","stalled","loadedmetadata","loadeddata","timeupdate","resize","volumechange","texttrackchange"],dw={canplay:"CanPlay",canplaythrough:"CanPlayThrough",playing:"Playing",seeked:"Seeked"},dE=["tiny","xsmall","small","medium","large","xlarge","huge"],p_={};dE.forEach(function(r){var e=r.charAt(0)==="x"?"x-"+r.substring(1):r;p_[r]="vjs-layout-"+e});var vxe={tiny:210,xsmall:320,small:425,medium:768,large:1440,xlarge:2560,huge:1/0},Di=(function(r){Ht(e,r);function e(n,i,s){var a;if(n.id=n.id||i.id||"vjs_video_"+zc(),i=ci(e.getTagSettings(n),i),i.initChildren=!1,i.createEl=!1,i.evented=!1,i.reportTouchActivity=!1,!i.language)if(typeof n.closest=="function"){var o=n.closest("[lang]");o&&o.getAttribute&&(i.language=o.getAttribute("lang"))}else for(var l=n;l&&l.nodeType===1;){if(Cc(l).hasOwnProperty("lang")){i.language=l.getAttribute("lang");break}l=l.parentNode}if(a=r.call(this,null,i,s)||this,a.boundDocumentFullscreenChange_=function(f){return a.documentFullscreenChange_(f)},a.boundFullWindowOnEscKey_=function(f){return a.fullWindowOnEscKey(f)},a.boundUpdateStyleEl_=function(f){return a.updateStyleEl_(f)},a.boundApplyInitTime_=function(f){return a.applyInitTime_(f)},a.boundUpdateCurrentBreakpoint_=function(f){return a.updateCurrentBreakpoint_(f)},a.boundHandleTechClick_=function(f){return a.handleTechClick_(f)},a.boundHandleTechDoubleClick_=function(f){return a.handleTechDoubleClick_(f)},a.boundHandleTechTouchStart_=function(f){return a.handleTechTouchStart_(f)},a.boundHandleTechTouchMove_=function(f){return a.handleTechTouchMove_(f)},a.boundHandleTechTouchEnd_=function(f){return a.handleTechTouchEnd_(f)},a.boundHandleTechTap_=function(f){return a.handleTechTap_(f)},a.isFullscreen_=!1,a.log=Rj(a.id_),a.fsApi_=xb,a.isPosterFromTech_=!1,a.queuedCallbacks_=[],a.isReady_=!1,a.hasStarted_=!1,a.userActive_=!1,a.debugEnabled_=!1,a.audioOnlyMode_=!1,a.audioPosterMode_=!1,a.audioOnlyCache_={playerHeight:null,hiddenChildren:[]},!a.options_||!a.options_.techOrder||!a.options_.techOrder.length)throw new Error("No techOrder specified. Did you overwrite videojs.options instead of just changing the properties you want to override?");if(a.tag=n,a.tagAttributes=n&&Cc(n),a.language(a.options_.language),i.languages){var u={};Object.getOwnPropertyNames(i.languages).forEach(function(f){u[f.toLowerCase()]=i.languages[f]}),a.languages_=u}else a.languages_=e.prototype.options_.languages;a.resetCache_(),a.poster_=i.poster||"",a.controls_=!!i.controls,n.controls=!1,n.removeAttribute("controls"),a.changingSrc_=!1,a.playCallbacks_=[],a.playTerminatedQueue_=[],n.hasAttribute("autoplay")?a.autoplay(!0):a.autoplay(a.options_.autoplay),i.plugins&&Object.keys(i.plugins).forEach(function(f){if(typeof a[f]!="function")throw new Error('plugin "'+f+'" does not exist')}),a.scrubbing_=!1,a.el_=a.createEl(),HA(We(a),{eventBusKey:"el_"}),a.fsApi_.requestFullscreen&&(bo(Be,a.fsApi_.fullscreenchange,a.boundDocumentFullscreenChange_),a.on(a.fsApi_.fullscreenchange,a.boundDocumentFullscreenChange_)),a.fluid_&&a.on(["playerreset","resize"],a.boundUpdateStyleEl_);var c=Wn(a.options_);i.plugins&&Object.keys(i.plugins).forEach(function(f){a[f](i.plugins[f])}),i.debug&&a.debug(!0),a.options_.playerOptions=c,a.middleware_=[],a.playbackRates(i.playbackRates),a.initChildren(),a.isAudio(n.nodeName.toLowerCase()==="audio"),a.controls()?a.addClass("vjs-controls-enabled"):a.addClass("vjs-controls-disabled"),a.el_.setAttribute("role","region"),a.isAudio()?a.el_.setAttribute("aria-label",a.localize("Audio Player")):a.el_.setAttribute("aria-label",a.localize("Video Player")),a.isAudio()&&a.addClass("vjs-audio"),a.flexNotSupported_()&&a.addClass("vjs-no-flex"),lm&&a.addClass("vjs-touch-enabled"),ca||a.addClass("vjs-workinghover"),e.players[a.id_]=We(a);var h=Dj.split(".")[0];return a.addClass("vjs-v"+h),a.userActive(!0),a.reportUserActivity(),a.one("play",function(f){return a.listenForUserActivity_(f)}),a.on("stageclick",function(f){return a.handleStageClick_(f)}),a.on("keydown",function(f){return a.handleKeyDown(f)}),a.on("languagechange",function(f){return a.handleLanguagechange(f)}),a.breakpoints(a.options_.breakpoints),a.responsive(a.options_.responsive),a.on("ready",function(){a.audioPosterMode(a.options_.audioPosterMode),a.audioOnlyMode(a.options_.audioOnlyMode)}),a}var t=e.prototype;return t.dispose=function(){var i=this;this.trigger("dispose"),this.off("dispose"),zs(Be,this.fsApi_.fullscreenchange,this.boundDocumentFullscreenChange_),zs(Be,"keydown",this.boundFullWindowOnEscKey_),this.styleEl_&&this.styleEl_.parentNode&&(this.styleEl_.parentNode.removeChild(this.styleEl_),this.styleEl_=null),e.players[this.id_]=null,this.tag&&this.tag.player&&(this.tag.player=null),this.el_&&this.el_.player&&(this.el_.player=null),this.tech_&&(this.tech_.dispose(),this.isPosterFromTech_=!1,this.poster_=""),this.playerElIngest_&&(this.playerElIngest_=null),this.tag&&(this.tag=null),Bye(this),ra.names.forEach(function(s){var a=ra[s],o=i[a.getterName]();o&&o.off&&o.off()}),r.prototype.dispose.call(this,{restoreEl:this.options_.restoreEl})},t.createEl=function(){var i=this.tag,s,a=this.playerElIngest_=i.parentNode&&i.parentNode.hasAttribute&&i.parentNode.hasAttribute("data-vjs-player"),o=this.tag.tagName.toLowerCase()==="video-js";a?s=this.el_=i.parentNode:o||(s=this.el_=r.prototype.createEl.call(this,"div"));var l=Cc(i);if(o){for(s=this.el_=i,i=this.tag=Be.createElement("video");s.children.length;)i.appendChild(s.firstChild);sf(s,"video-js")||Lc(s,"video-js"),s.appendChild(i),a=this.playerElIngest_=s,Object.keys(s).forEach(function(v){try{i[v]=s[v]}catch{}})}if(i.setAttribute("tabindex","-1"),l.tabindex="-1",(Cv||jc&&Nj)&&(i.setAttribute("role","application"),l.role="application"),i.removeAttribute("width"),i.removeAttribute("height"),"width"in l&&delete l.width,"height"in l&&delete l.height,Object.getOwnPropertyNames(l).forEach(function(v){o&&v==="class"||s.setAttribute(v,l[v]),o&&i.setAttribute(v,l[v])}),i.playerId=i.id,i.id+="_html5_api",i.className="vjs-tech",i.player=s.player=this,this.addClass("vjs-paused"),X.VIDEOJS_NO_DYNAMIC_STYLE!==!0){this.styleEl_=Zj("vjs-styles-dimensions");var u=Kd(".vjs-styles-defaults"),c=Kd("head");c.insertBefore(this.styleEl_,u?u.nextSibling:c.firstChild)}this.fill_=!1,this.fluid_=!1,this.width(this.options_.width),this.height(this.options_.height),this.fill(this.options_.fill),this.fluid(this.options_.fluid),this.aspectRatio(this.options_.aspectRatio),this.crossOrigin(this.options_.crossOrigin||this.options_.crossorigin);for(var h=i.getElementsByTagName("a"),f=0;f<h.length;f++){var g=h.item(f);Lc(g,"vjs-hidden"),g.setAttribute("hidden","hidden")}return i.initNetworkState_=i.networkState,i.parentNode&&!a&&i.parentNode.insertBefore(s,i),nE(i,s),this.children_.unshift(i),this.el_.setAttribute("lang",this.language_),this.el_.setAttribute("translate","no"),this.el_=s,s},t.crossOrigin=function(i){if(!i)return this.techGet_("crossOrigin");if(i!=="anonymous"&&i!=="use-credentials"){Xr.warn('crossOrigin must be "anonymous" or "use-credentials", given "'+i+'"');return}this.techCall_("setCrossOrigin",i)},t.width=function(i){return this.dimension("width",i)},t.height=function(i){return this.dimension("height",i)},t.dimension=function(i,s){var a=i+"_";if(s===void 0)return this[a]||0;if(s===""||s==="auto"){this[a]=void 0,this.updateStyleEl_();return}var o=parseFloat(s);if(isNaN(o)){Xr.error('Improper value "'+s+'" supplied for for '+i);return}this[a]=o,this.updateStyleEl_()},t.fluid=function(i){var s=this;if(i===void 0)return!!this.fluid_;this.fluid_=!!i,Oc(this)&&this.off(["playerreset","resize"],this.boundUpdateStyleEl_),i?(this.addClass("vjs-fluid"),this.fill(!1),lye(this,function(){s.on(["playerreset","resize"],s.boundUpdateStyleEl_)})):this.removeClass("vjs-fluid"),this.updateStyleEl_()},t.fill=function(i){if(i===void 0)return!!this.fill_;this.fill_=!!i,i?(this.addClass("vjs-fill"),this.fluid(!1)):this.removeClass("vjs-fill")},t.aspectRatio=function(i){if(i===void 0)return this.aspectRatio_;if(!/^\d+\:\d+$/.test(i))throw new Error("Improper value supplied for aspect ratio. The format should be width:height, for example 16:9.");this.aspectRatio_=i,this.fluid(!0),this.updateStyleEl_()},t.updateStyleEl_=function(){if(X.VIDEOJS_NO_DYNAMIC_STYLE===!0){var i=typeof this.width_=="number"?this.width_:this.options_.width,s=typeof this.height_=="number"?this.height_:this.options_.height,a=this.tech_&&this.tech_.el();a&&(i>=0&&(a.width=i),s>=0&&(a.height=s));return}var o,l,u,c;this.aspectRatio_!==void 0&&this.aspectRatio_!=="auto"?u=this.aspectRatio_:this.videoWidth()>0?u=this.videoWidth()+":"+this.videoHeight():u="16:9";var h=u.split(":"),f=h[1]/h[0];this.width_!==void 0?o=this.width_:this.height_!==void 0?o=this.height_/f:o=this.videoWidth()||300,this.height_!==void 0?l=this.height_:l=o*f,/^[^a-zA-Z]/.test(this.id())?c="dimensions-"+this.id():c=this.id()+"-dimensions",this.addClass(c),e7(this.styleEl_,`
      .`+c+` {
        width: `+o+`px;
        height: `+l+`px;
      }

      .`+c+`.vjs-fluid:not(.vjs-audio-only-mode) {
        padding-top: `+f*100+`%;
      }
    `)},t.loadTech_=function(i,s){var a=this;this.tech_&&this.unloadTech_();var o=xi(i),l=i.charAt(0).toLowerCase()+i.slice(1);o!=="Html5"&&this.tag&&(Un.getTech("Html5").disposeMediaElement(this.tag),this.tag.player=null,this.tag=null),this.techName_=o,this.isReady_=!1;var u=this.autoplay();(typeof this.autoplay()=="string"||this.autoplay()===!0&&this.options_.normalizeAutoplay)&&(u=!1);var c={source:s,autoplay:u,nativeControlsForTouch:this.options_.nativeControlsForTouch,playerId:this.id(),techId:this.id()+"_"+l+"_api",playsinline:this.options_.playsinline,preload:this.options_.preload,loop:this.options_.loop,disablePictureInPicture:this.options_.disablePictureInPicture,muted:this.options_.muted,poster:this.poster(),language:this.language(),playerElIngest:this.playerElIngest_||!1,"vtt.js":this.options_["vtt.js"],canOverridePoster:!!this.options_.techCanOverridePoster,enableSourceset:this.options_.enableSourceset,Promise:this.options_.Promise};ra.names.forEach(function(f){var g=ra[f];c[g.getterName]=a[g.privateName]}),ci(c,this.options_[o]),ci(c,this.options_[l]),ci(c,this.options_[i.toLowerCase()]),this.tag&&(c.tag=this.tag),s&&s.src===this.cache_.src&&this.cache_.currentTime>0&&(c.startTime=this.cache_.currentTime);var h=Un.getTech(i);if(!h)throw new Error("No Tech named '"+o+"' exists! '"+o+"' should be registered using videojs.registerTech()'");this.tech_=new h(c),this.tech_.ready(qn(this,this.handleTechReady_),!0),R3.jsonToTextTracks(this.textTracksJson_||[],this.tech_),F7.forEach(function(f){a.on(a.tech_,f,function(g){return a["handleTech"+xi(f)+"_"](g)})}),Object.keys(dw).forEach(function(f){a.on(a.tech_,f,function(g){if(a.tech_.playbackRate()===0&&a.tech_.seeking()){a.queuedCallbacks_.push({callback:a["handleTech"+dw[f]+"_"].bind(a),event:g});return}a["handleTech"+dw[f]+"_"](g)})}),this.on(this.tech_,"loadstart",function(f){return a.handleTechLoadStart_(f)}),this.on(this.tech_,"sourceset",function(f){return a.handleTechSourceset_(f)}),this.on(this.tech_,"waiting",function(f){return a.handleTechWaiting_(f)}),this.on(this.tech_,"ended",function(f){return a.handleTechEnded_(f)}),this.on(this.tech_,"seeking",function(f){return a.handleTechSeeking_(f)}),this.on(this.tech_,"play",function(f){return a.handleTechPlay_(f)}),this.on(this.tech_,"firstplay",function(f){return a.handleTechFirstPlay_(f)}),this.on(this.tech_,"pause",function(f){return a.handleTechPause_(f)}),this.on(this.tech_,"durationchange",function(f){return a.handleTechDurationChange_(f)}),this.on(this.tech_,"fullscreenchange",function(f,g){return a.handleTechFullscreenChange_(f,g)}),this.on(this.tech_,"fullscreenerror",function(f,g){return a.handleTechFullscreenError_(f,g)}),this.on(this.tech_,"enterpictureinpicture",function(f){return a.handleTechEnterPictureInPicture_(f)}),this.on(this.tech_,"leavepictureinpicture",function(f){return a.handleTechLeavePictureInPicture_(f)}),this.on(this.tech_,"error",function(f){return a.handleTechError_(f)}),this.on(this.tech_,"posterchange",function(f){return a.handleTechPosterChange_(f)}),this.on(this.tech_,"textdata",function(f){return a.handleTechTextData_(f)}),this.on(this.tech_,"ratechange",function(f){return a.handleTechRateChange_(f)}),this.on(this.tech_,"loadedmetadata",this.boundUpdateStyleEl_),this.usingNativeControls(this.techGet_("controls")),this.controls()&&!this.usingNativeControls()&&this.addTechControlsListeners_(),this.tech_.el().parentNode!==this.el()&&(o!=="Html5"||!this.tag)&&nE(this.tech_.el(),this.el()),this.tag&&(this.tag.player=null,this.tag=null)},t.unloadTech_=function(){var i=this;ra.names.forEach(function(s){var a=ra[s];i[a.privateName]=i[a.getterName]()}),this.textTracksJson_=R3.textTracksToJson(this.tech_),this.isReady_=!1,this.tech_.dispose(),this.tech_=!1,this.isPosterFromTech_&&(this.poster_="",this.trigger("posterchange")),this.isPosterFromTech_=!1},t.tech=function(i){return i===void 0&&Xr.warn(`Using the tech directly can be dangerous. I hope you know what you're doing.
See https://github.com/videojs/video.js/issues/2617 for more info.
`),this.tech_},t.addTechControlsListeners_=function(){this.removeTechControlsListeners_(),this.on(this.tech_,"click",this.boundHandleTechClick_),this.on(this.tech_,"dblclick",this.boundHandleTechDoubleClick_),this.on(this.tech_,"touchstart",this.boundHandleTechTouchStart_),this.on(this.tech_,"touchmove",this.boundHandleTechTouchMove_),this.on(this.tech_,"touchend",this.boundHandleTechTouchEnd_),this.on(this.tech_,"tap",this.boundHandleTechTap_)},t.removeTechControlsListeners_=function(){this.off(this.tech_,"tap",this.boundHandleTechTap_),this.off(this.tech_,"touchstart",this.boundHandleTechTouchStart_),this.off(this.tech_,"touchmove",this.boundHandleTechTouchMove_),this.off(this.tech_,"touchend",this.boundHandleTechTouchEnd_),this.off(this.tech_,"click",this.boundHandleTechClick_),this.off(this.tech_,"dblclick",this.boundHandleTechDoubleClick_)},t.handleTechReady_=function(){this.triggerReady(),this.cache_.volume&&this.techCall_("setVolume",this.cache_.volume),this.handleTechPosterChange_(),this.handleTechDurationChange_()},t.handleTechLoadStart_=function(){this.removeClass("vjs-ended"),this.removeClass("vjs-seeking"),this.error(null),this.handleTechDurationChange_(),this.paused()?(this.hasStarted(!1),this.trigger("loadstart")):(this.trigger("loadstart"),this.trigger("firstplay")),this.manualAutoplay_(this.autoplay()===!0&&this.options_.normalizeAutoplay?"play":this.autoplay())},t.manualAutoplay_=function(i){var s=this;if(!(!this.tech_||typeof i!="string")){var a=function(){var u=s.muted();s.muted(!0);var c=function(){s.muted(u)};s.playTerminatedQueue_.push(c);var h=s.play();if(fg(h))return h.catch(function(f){throw c(),new Error("Rejection at manualAutoplay. Restoring muted value. "+(f||""))})},o;if(i==="any"&&!this.muted()?(o=this.play(),fg(o)&&(o=o.catch(a))):i==="muted"&&!this.muted()?o=a():o=this.play(),!!fg(o))return o.then(function(){s.trigger({type:"autoplay-success",autoplay:i})}).catch(function(){s.trigger({type:"autoplay-failure",autoplay:i})})}},t.updateSourceCaches_=function(i){i===void 0&&(i="");var s=i,a="";typeof s!="string"&&(s=i.src,a=i.type),this.cache_.source=this.cache_.source||{},this.cache_.sources=this.cache_.sources||[],s&&!a&&(a=$ye(this,s)),this.cache_.source=Wn({},i,{src:s,type:a});for(var o=this.cache_.sources.filter(function(g){return g.src&&g.src===s}),l=[],u=this.$$("source"),c=[],h=0;h<u.length;h++){var f=Cc(u[h]);l.push(f),f.src&&f.src===s&&c.push(f.src)}c.length&&!o.length?this.cache_.sources=l:o.length||(this.cache_.sources=[this.cache_.source]),this.cache_.src=s},t.handleTechSourceset_=function(i){var s=this;if(!this.changingSrc_){var a=function(c){return s.updateSourceCaches_(c)},o=this.currentSource().src,l=i.src;o&&!/^blob:/.test(o)&&/^blob:/.test(l)&&(!this.lastSource_||this.lastSource_.tech!==l&&this.lastSource_.player!==o)&&(a=function(){}),a(l),i.src||this.tech_.any(["sourceset","loadstart"],function(u){if(u.type!=="sourceset"){var c=s.techGet("currentSrc");s.lastSource_.tech=c,s.updateSourceCaches_(c)}})}this.lastSource_={player:this.currentSource().src,tech:i.src},this.trigger({src:i.src,type:"sourceset"})},t.hasStarted=function(i){if(i===void 0)return this.hasStarted_;i!==this.hasStarted_&&(this.hasStarted_=i,this.hasStarted_?(this.addClass("vjs-has-started"),this.trigger("firstplay")):this.removeClass("vjs-has-started"))},t.handleTechPlay_=function(){this.removeClass("vjs-ended"),this.removeClass("vjs-paused"),this.addClass("vjs-playing"),this.hasStarted(!0),this.trigger("play")},t.handleTechRateChange_=function(){this.tech_.playbackRate()>0&&this.cache_.lastPlaybackRate===0&&(this.queuedCallbacks_.forEach(function(i){return i.callback(i.event)}),this.queuedCallbacks_=[]),this.cache_.lastPlaybackRate=this.tech_.playbackRate(),this.trigger("ratechange")},t.handleTechWaiting_=function(){var i=this;this.addClass("vjs-waiting"),this.trigger("waiting");var s=this.currentTime(),a=function o(){s!==i.currentTime()&&(i.removeClass("vjs-waiting"),i.off("timeupdate",o))};this.on("timeupdate",a)},t.handleTechCanPlay_=function(){this.removeClass("vjs-waiting"),this.trigger("canplay")},t.handleTechCanPlayThrough_=function(){this.removeClass("vjs-waiting"),this.trigger("canplaythrough")},t.handleTechPlaying_=function(){this.removeClass("vjs-waiting"),this.trigger("playing")},t.handleTechSeeking_=function(){this.addClass("vjs-seeking"),this.trigger("seeking")},t.handleTechSeeked_=function(){this.removeClass("vjs-seeking"),this.removeClass("vjs-ended"),this.trigger("seeked")},t.handleTechFirstPlay_=function(){this.options_.starttime&&(Xr.warn("Passing the `starttime` option to the player will be deprecated in 6.0"),this.currentTime(this.options_.starttime)),this.addClass("vjs-has-started"),this.trigger("firstplay")},t.handleTechPause_=function(){this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.trigger("pause")},t.handleTechEnded_=function(){this.addClass("vjs-ended"),this.removeClass("vjs-waiting"),this.options_.loop?(this.currentTime(0),this.play()):this.paused()||this.pause(),this.trigger("ended")},t.handleTechDurationChange_=function(){this.duration(this.techGet_("duration"))},t.handleTechClick_=function(i){this.controls_&&(this.options_===void 0||this.options_.userActions===void 0||this.options_.userActions.click===void 0||this.options_.userActions.click!==!1)&&(this.options_!==void 0&&this.options_.userActions!==void 0&&typeof this.options_.userActions.click=="function"?this.options_.userActions.click.call(this,i):this.paused()?Eu(this.play()):this.pause())},t.handleTechDoubleClick_=function(i){if(this.controls_){var s=Array.prototype.some.call(this.$$(".vjs-control-bar, .vjs-modal-dialog"),function(a){return a.contains(i.target)});s||(this.options_===void 0||this.options_.userActions===void 0||this.options_.userActions.doubleClick===void 0||this.options_.userActions.doubleClick!==!1)&&(this.options_!==void 0&&this.options_.userActions!==void 0&&typeof this.options_.userActions.doubleClick=="function"?this.options_.userActions.doubleClick.call(this,i):this.isFullscreen()?this.exitFullscreen():this.requestFullscreen())}},t.handleTechTap_=function(){this.userActive(!this.userActive())},t.handleTechTouchStart_=function(){this.userWasActive=this.userActive()},t.handleTechTouchMove_=function(){this.userWasActive&&this.reportUserActivity()},t.handleTechTouchEnd_=function(i){i.cancelable&&i.preventDefault()},t.handleStageClick_=function(){this.reportUserActivity()},t.toggleFullscreenClass_=function(){this.isFullscreen()?this.addClass("vjs-fullscreen"):this.removeClass("vjs-fullscreen")},t.documentFullscreenChange_=function(i){var s=i.target.player;if(!(s&&s!==this)){var a=this.el(),o=Be[this.fsApi_.fullscreenElement]===a;!o&&a.matches?o=a.matches(":"+this.fsApi_.fullscreen):!o&&a.msMatchesSelector&&(o=a.msMatchesSelector(":"+this.fsApi_.fullscreen)),this.isFullscreen(o)}},t.handleTechFullscreenChange_=function(i,s){var a=this;s&&(s.nativeIOSFullscreen&&(this.addClass("vjs-ios-native-fs"),this.tech_.one("webkitendfullscreen",function(){a.removeClass("vjs-ios-native-fs")})),this.isFullscreen(s.isFullscreen))},t.handleTechFullscreenError_=function(i,s){this.trigger("fullscreenerror",s)},t.togglePictureInPictureClass_=function(){this.isInPictureInPicture()?this.addClass("vjs-picture-in-picture"):this.removeClass("vjs-picture-in-picture")},t.handleTechEnterPictureInPicture_=function(i){this.isInPictureInPicture(!0)},t.handleTechLeavePictureInPicture_=function(i){this.isInPictureInPicture(!1)},t.handleTechError_=function(){var i=this.tech_.error();this.error(i)},t.handleTechTextData_=function(){var i=null;arguments.length>1&&(i=arguments[1]),this.trigger("textdata",i)},t.getCache=function(){return this.cache_},t.resetCache_=function(){this.cache_={currentTime:0,initTime:0,inactivityTimeout:this.options_.inactivityTimeout,duration:NaN,lastVolume:1,lastPlaybackRate:this.defaultPlaybackRate(),media:null,src:"",source:{},sources:[],playbackRates:[],volume:1}},t.techCall_=function(i,s){this.ready(function(){if(i in Mye)return Lye(this.middleware_,this.tech_,i,s);if(i in N3)return B3(this.middleware_,this.tech_,i,s);try{this.tech_&&this.tech_[i](s)}catch(a){throw Xr(a),a}},!0)},t.techGet_=function(i){if(!(!this.tech_||!this.tech_.isReady_)){if(i in Oye)return Rye(this.middleware_,this.tech_,i);if(i in N3)return B3(this.middleware_,this.tech_,i);try{return this.tech_[i]()}catch(s){throw this.tech_[i]===void 0?(Xr("Video.js: "+i+" method not defined for "+this.techName_+" playback technology.",s),s):s.name==="TypeError"?(Xr("Video.js: "+i+" unavailable on "+this.techName_+" playback technology element.",s),this.tech_.isReady_=!1,s):(Xr(s),s)}}},t.play=function(){var i=this,s=this.options_.Promise||X.Promise;return s?new s(function(a){i.play_(a)}):this.play_()},t.play_=function(i){var s=this;i===void 0&&(i=Eu),this.playCallbacks_.push(i);var a=!!(!this.changingSrc_&&(this.src()||this.currentSrc())),o=!!(YS||ca);if(this.waitToPlay_&&(this.off(["ready","loadstart"],this.waitToPlay_),this.waitToPlay_=null),!this.isReady_||!a){this.waitToPlay_=function(c){s.play_()},this.one(["ready","loadstart"],this.waitToPlay_),!a&&o&&this.load();return}var l=this.techGet_("play"),u=o&&this.hasClass("vjs-ended");u&&this.resetProgressBar_(),l===null?this.runPlayTerminatedQueue_():this.runPlayCallbacks_(l)},t.runPlayTerminatedQueue_=function(){var i=this.playTerminatedQueue_.slice(0);this.playTerminatedQueue_=[],i.forEach(function(s){s()})},t.runPlayCallbacks_=function(i){var s=this.playCallbacks_.slice(0);this.playCallbacks_=[],this.playTerminatedQueue_=[],s.forEach(function(a){a(i)})},t.pause=function(){this.techCall_("pause")},t.paused=function(){return this.techGet_("paused")!==!1},t.played=function(){return this.techGet_("played")||af(0,0)},t.scrubbing=function(i){if(typeof i>"u")return this.scrubbing_;this.scrubbing_=!!i,this.techCall_("setScrubbing",this.scrubbing_),i?this.addClass("vjs-scrubbing"):this.removeClass("vjs-scrubbing")},t.currentTime=function(i){if(typeof i<"u"){if(i<0&&(i=0),!this.isReady_||this.changingSrc_||!this.tech_||!this.tech_.isReady_){this.cache_.initTime=i,this.off("canplay",this.boundApplyInitTime_),this.one("canplay",this.boundApplyInitTime_);return}this.techCall_("setCurrentTime",i),this.cache_.initTime=0;return}return this.cache_.currentTime=this.techGet_("currentTime")||0,this.cache_.currentTime},t.applyInitTime_=function(){this.currentTime(this.cache_.initTime)},t.duration=function(i){if(i===void 0)return this.cache_.duration!==void 0?this.cache_.duration:NaN;i=parseFloat(i),i<0&&(i=1/0),i!==this.cache_.duration&&(this.cache_.duration=i,i===1/0?this.addClass("vjs-live"):this.removeClass("vjs-live"),isNaN(i)||this.trigger("durationchange"))},t.remainingTime=function(){return this.duration()-this.currentTime()},t.remainingTimeDisplay=function(){return Math.floor(this.duration())-Math.floor(this.currentTime())},t.buffered=function(){var i=this.techGet_("buffered");return(!i||!i.length)&&(i=af(0,0)),i},t.bufferedPercent=function(){return a7(this.buffered(),this.duration())},t.bufferedEnd=function(){var i=this.buffered(),s=this.duration(),a=i.end(i.length-1);return a>s&&(a=s),a},t.volume=function(i){var s;if(i!==void 0){s=Math.max(0,Math.min(1,parseFloat(i))),this.cache_.volume=s,this.techCall_("setVolume",s),s>0&&this.lastVolume_(s);return}return s=parseFloat(this.techGet_("volume")),isNaN(s)?1:s},t.muted=function(i){if(i!==void 0){this.techCall_("setMuted",i);return}return this.techGet_("muted")||!1},t.defaultMuted=function(i){return i!==void 0?this.techCall_("setDefaultMuted",i):this.techGet_("defaultMuted")||!1},t.lastVolume_=function(i){if(i!==void 0&&i!==0){this.cache_.lastVolume=i;return}return this.cache_.lastVolume},t.supportsFullScreen=function(){return this.techGet_("supportsFullScreen")||!1},t.isFullscreen=function(i){if(i!==void 0){var s=this.isFullscreen_;this.isFullscreen_=!!i,this.isFullscreen_!==s&&this.fsApi_.prefixed&&this.trigger("fullscreenchange"),this.toggleFullscreenClass_();return}return this.isFullscreen_},t.requestFullscreen=function(i){var s=this.options_.Promise||X.Promise;if(s){var a=this;return new s(function(o,l){function u(){a.off("fullscreenerror",h),a.off("fullscreenchange",c)}function c(){u(),o()}function h(g,v){u(),l(v)}a.one("fullscreenchange",c),a.one("fullscreenerror",h);var f=a.requestFullscreenHelper_(i);f&&(f.then(u,u),f.then(o,l))})}return this.requestFullscreenHelper_()},t.requestFullscreenHelper_=function(i){var s=this,a;if(this.fsApi_.prefixed||(a=this.options_.fullscreen&&this.options_.fullscreen.options||{},i!==void 0&&(a=i)),this.fsApi_.requestFullscreen){var o=this.el_[this.fsApi_.requestFullscreen](a);return o&&o.then(function(){return s.isFullscreen(!0)},function(){return s.isFullscreen(!1)}),o}else this.tech_.supportsFullScreen()&&!this.options_.preferFullWindow?this.techCall_("enterFullScreen"):this.enterFullWindow()},t.exitFullscreen=function(){var i=this.options_.Promise||X.Promise;if(i){var s=this;return new i(function(a,o){function l(){s.off("fullscreenerror",c),s.off("fullscreenchange",u)}function u(){l(),a()}function c(f,g){l(),o(g)}s.one("fullscreenchange",u),s.one("fullscreenerror",c);var h=s.exitFullscreenHelper_();h&&(h.then(l,l),h.then(a,o))})}return this.exitFullscreenHelper_()},t.exitFullscreenHelper_=function(){var i=this;if(this.fsApi_.requestFullscreen){var s=Be[this.fsApi_.exitFullscreen]();return s&&Eu(s.then(function(){return i.isFullscreen(!1)})),s}else this.tech_.supportsFullScreen()&&!this.options_.preferFullWindow?this.techCall_("exitFullScreen"):this.exitFullWindow()},t.enterFullWindow=function(){this.isFullscreen(!0),this.isFullWindow=!0,this.docOrigOverflow=Be.documentElement.style.overflow,bo(Be,"keydown",this.boundFullWindowOnEscKey_),Be.documentElement.style.overflow="hidden",Lc(Be.body,"vjs-full-window"),this.trigger("enterFullWindow")},t.fullWindowOnEscKey=function(i){$r.isEventKey(i,"Esc")&&this.isFullscreen()===!0&&(this.isFullWindow?this.exitFullWindow():this.exitFullscreen())},t.exitFullWindow=function(){this.isFullscreen(!1),this.isFullWindow=!1,zs(Be,"keydown",this.boundFullWindowOnEscKey_),Be.documentElement.style.overflow=this.docOrigOverflow,wv(Be.body,"vjs-full-window"),this.trigger("exitFullWindow")},t.disablePictureInPicture=function(i){if(i===void 0)return this.techGet_("disablePictureInPicture");this.techCall_("setDisablePictureInPicture",i),this.options_.disablePictureInPicture=i,this.trigger("disablepictureinpicturechanged")},t.isInPictureInPicture=function(i){if(i!==void 0){this.isInPictureInPicture_=!!i,this.togglePictureInPictureClass_();return}return!!this.isInPictureInPicture_},t.requestPictureInPicture=function(){if("pictureInPictureEnabled"in Be&&this.disablePictureInPicture()===!1)return this.techGet_("requestPictureInPicture")},t.exitPictureInPicture=function(){if("pictureInPictureEnabled"in Be)return Be.exitPictureInPicture()},t.handleKeyDown=function(i){var s=this.options_.userActions;if(!(!s||!s.hotkeys)){var a=function(l){var u=l.tagName.toLowerCase();if(l.isContentEditable)return!0;var c=["button","checkbox","hidden","radio","reset","submit"];if(u==="input")return c.indexOf(l.type)===-1;var h=["textarea"];return h.indexOf(u)!==-1};a(this.el_.ownerDocument.activeElement)||(typeof s.hotkeys=="function"?s.hotkeys.call(this,i):this.handleHotkeys(i))}},t.handleHotkeys=function(i){var s=this.options_.userActions?this.options_.userActions.hotkeys:{},a=s.fullscreenKey,o=a===void 0?function(y){return $r.isEventKey(y,"f")}:a,l=s.muteKey,u=l===void 0?function(y){return $r.isEventKey(y,"m")}:l,c=s.playPauseKey,h=c===void 0?function(y){return $r.isEventKey(y,"k")||$r.isEventKey(y,"Space")}:c;if(o.call(this,i)){i.preventDefault(),i.stopPropagation();var f=Et.getComponent("FullscreenToggle");Be[this.fsApi_.fullscreenEnabled]!==!1&&f.prototype.handleClick.call(this,i)}else if(u.call(this,i)){i.preventDefault(),i.stopPropagation();var g=Et.getComponent("MuteToggle");g.prototype.handleClick.call(this,i)}else if(h.call(this,i)){i.preventDefault(),i.stopPropagation();var v=Et.getComponent("PlayToggle");v.prototype.handleClick.call(this,i)}},t.canPlayType=function(i){for(var s,a=0,o=this.options_.techOrder;a<o.length;a++){var l=o[a],u=Un.getTech(l);if(u||(u=Et.getComponent(l)),!u){Xr.error('The "'+l+'" tech is undefined. Skipped browser support check for that tech.');continue}if(u.isSupported()&&(s=u.canPlayType(i),s))return s}return""},t.selectSource=function(i){var s=this,a=this.options_.techOrder.map(function(h){return[h,Un.getTech(h)]}).filter(function(h){var f=h[0],g=h[1];return g?g.isSupported():(Xr.error('The "'+f+'" tech is undefined. Skipped browser support check for that tech.'),!1)}),o=function(f,g,v){var y;return f.some(function(_){return g.some(function(C){if(y=v(_,C),y)return!0})}),y},l,u=function(f){return function(g,v){return f(v,g)}},c=function(f,g){var v=f[0],y=f[1];if(y.canPlaySource(g,s.options_[v.toLowerCase()]))return{source:g,tech:v}};return this.options_.sourceOrder?l=o(i,a,u(c)):l=o(a,i,c),l||!1},t.handleSrc_=function(i,s){var a=this;if(typeof i>"u")return this.cache_.src||"";this.resetRetryOnError_&&this.resetRetryOnError_();var o=jye(i);if(!o.length){this.setTimeout(function(){this.error({code:4,message:this.options_.notSupportedMessage})},0);return}if(this.changingSrc_=!0,s||(this.cache_.sources=o),this.updateSourceCaches_(o[0]),Iye(this,o[0],function(c,h){a.middleware_=h,s||(a.cache_.sources=o),a.updateSourceCaches_(c);var f=a.src_(c);if(f){if(o.length>1)return a.handleSrc_(o.slice(1));a.changingSrc_=!1,a.setTimeout(function(){this.error({code:4,message:this.options_.notSupportedMessage})},0),a.triggerReady();return}Pye(h,a.tech_)}),this.options_.retryOnError&&o.length>1){var l=function(){a.error(null),a.handleSrc_(o.slice(1),!0)},u=function(){a.off("error",l)};this.one("error",l),this.one("playing",u),this.resetRetryOnError_=function(){a.off("error",l),a.off("playing",u)}}},t.src=function(i){return this.handleSrc_(i,!1)},t.src_=function(i){var s=this,a=this.selectSource([i]);return a?dye(a.tech,this.techName_)?(this.ready(function(){this.tech_.constructor.prototype.hasOwnProperty("setSource")?this.techCall_("setSource",i):this.techCall_("src",i.src),this.changingSrc_=!1},!0),!1):(this.changingSrc_=!0,this.loadTech_(a.tech,a.source),this.tech_.ready(function(){s.changingSrc_=!1}),!1):!0},t.load=function(){this.techCall_("load")},t.reset=function(){var i=this,s=this.options_.Promise||X.Promise;if(this.paused()||!s)this.doReset_();else{var a=this.play();Eu(a.then(function(){return i.doReset_()}))}},t.doReset_=function(){this.tech_&&this.tech_.clearTracks("text"),this.resetCache_(),this.poster(""),this.loadTech_(this.options_.techOrder[0],null),this.techCall_("reset"),this.resetControlBarUI_(),Oc(this)&&this.trigger("playerreset")},t.resetControlBarUI_=function(){this.resetProgressBar_(),this.resetPlaybackRate_(),this.resetVolumeBar_()},t.resetProgressBar_=function(){this.currentTime(0);var i=this.controlBar||{},s=i.durationDisplay,a=i.remainingTimeDisplay;s&&s.updateContent(),a&&a.updateContent()},t.resetPlaybackRate_=function(){this.playbackRate(this.defaultPlaybackRate()),this.handleTechRateChange_()},t.resetVolumeBar_=function(){this.volume(1),this.trigger("volumechange")},t.currentSources=function(){var i=this.currentSource(),s=[];return Object.keys(i).length!==0&&s.push(i),this.cache_.sources||s},t.currentSource=function(){return this.cache_.source||{}},t.currentSrc=function(){return this.currentSource()&&this.currentSource().src||""},t.currentType=function(){return this.currentSource()&&this.currentSource().type||""},t.preload=function(i){if(i!==void 0){this.techCall_("setPreload",i),this.options_.preload=i;return}return this.techGet_("preload")},t.autoplay=function(i){if(i===void 0)return this.options_.autoplay||!1;var s;typeof i=="string"&&/(any|play|muted)/.test(i)||i===!0&&this.options_.normalizeAutoplay?(this.options_.autoplay=i,this.manualAutoplay_(typeof i=="string"?i:"play"),s=!1):i?this.options_.autoplay=!0:this.options_.autoplay=!1,s=typeof s>"u"?this.options_.autoplay:s,this.tech_&&this.techCall_("setAutoplay",s)},t.playsinline=function(i){return i!==void 0?(this.techCall_("setPlaysinline",i),this.options_.playsinline=i,this):this.techGet_("playsinline")},t.loop=function(i){if(i!==void 0){this.techCall_("setLoop",i),this.options_.loop=i;return}return this.techGet_("loop")},t.poster=function(i){if(i===void 0)return this.poster_;i||(i=""),i!==this.poster_&&(this.poster_=i,this.techCall_("setPoster",i),this.isPosterFromTech_=!1,this.trigger("posterchange"))},t.handleTechPosterChange_=function(){if((!this.poster_||this.options_.techCanOverridePoster)&&this.tech_&&this.tech_.poster){var i=this.tech_.poster()||"";i!==this.poster_&&(this.poster_=i,this.isPosterFromTech_=!0,this.trigger("posterchange"))}},t.controls=function(i){if(i===void 0)return!!this.controls_;i=!!i,this.controls_!==i&&(this.controls_=i,this.usingNativeControls()&&this.techCall_("setControls",i),this.controls_?(this.removeClass("vjs-controls-disabled"),this.addClass("vjs-controls-enabled"),this.trigger("controlsenabled"),this.usingNativeControls()||this.addTechControlsListeners_()):(this.removeClass("vjs-controls-enabled"),this.addClass("vjs-controls-disabled"),this.trigger("controlsdisabled"),this.usingNativeControls()||this.removeTechControlsListeners_()))},t.usingNativeControls=function(i){if(i===void 0)return!!this.usingNativeControls_;i=!!i,this.usingNativeControls_!==i&&(this.usingNativeControls_=i,this.usingNativeControls_?(this.addClass("vjs-using-native-controls"),this.trigger("usingnativecontrols")):(this.removeClass("vjs-using-native-controls"),this.trigger("usingcustomcontrols")))},t.error=function(i){var s=this;if(i===void 0)return this.error_||null;if(Gd("beforeerror").forEach(function(o){var l=o(s,i);if(!(Bc(l)&&!Array.isArray(l)||typeof l=="string"||typeof l=="number"||l===null)){s.log.error("please return a value that MediaError expects in beforeerror hooks");return}i=l}),this.options_.suppressNotSupportedError&&i&&i.code===4){var a=function(){this.error(i)};this.options_.suppressNotSupportedError=!1,this.any(["click","touchstart"],a),this.one("loadstart",function(){this.off(["click","touchstart"],a)});return}if(i===null){this.error_=i,this.removeClass("vjs-error"),this.errorDisplay&&this.errorDisplay.close();return}this.error_=new oa(i),this.addClass("vjs-error"),Xr.error("(CODE:"+this.error_.code+" "+oa.errorTypes[this.error_.code]+")",this.error_.message,this.error_),this.trigger("error"),Gd("error").forEach(function(o){return o(s,s.error_)})},t.reportUserActivity=function(i){this.userActivity_=!0},t.userActive=function(i){if(i===void 0)return this.userActive_;if(i=!!i,i!==this.userActive_){if(this.userActive_=i,this.userActive_){this.userActivity_=!0,this.removeClass("vjs-user-inactive"),this.addClass("vjs-user-active"),this.trigger("useractive");return}this.tech_&&this.tech_.one("mousemove",function(s){s.stopPropagation(),s.preventDefault()}),this.userActivity_=!1,this.removeClass("vjs-user-active"),this.addClass("vjs-user-inactive"),this.trigger("userinactive")}},t.listenForUserActivity_=function(){var i,s,a,o=qn(this,this.reportUserActivity),l=function(v){(v.screenX!==s||v.screenY!==a)&&(s=v.screenX,a=v.screenY,o())},u=function(){o(),this.clearInterval(i),i=this.setInterval(o,250)},c=function(v){o(),this.clearInterval(i)};this.on("mousedown",u),this.on("mousemove",l),this.on("mouseup",c),this.on("mouseleave",c);var h=this.getChild("controlBar");h&&!ca&&!$c&&(h.on("mouseenter",function(g){this.player().options_.inactivityTimeout!==0&&(this.player().cache_.inactivityTimeout=this.player().options_.inactivityTimeout),this.player().options_.inactivityTimeout=0}),h.on("mouseleave",function(g){this.player().options_.inactivityTimeout=this.player().cache_.inactivityTimeout})),this.on("keydown",o),this.on("keyup",o);var f;this.setInterval(function(){if(this.userActivity_){this.userActivity_=!1,this.userActive(!0),this.clearTimeout(f);var g=this.options_.inactivityTimeout;g<=0||(f=this.setTimeout(function(){this.userActivity_||this.userActive(!1)},g))}},250)},t.playbackRate=function(i){if(i!==void 0){this.techCall_("setPlaybackRate",i);return}return this.tech_&&this.tech_.featuresPlaybackRate?this.cache_.lastPlaybackRate||this.techGet_("playbackRate"):1},t.defaultPlaybackRate=function(i){return i!==void 0?this.techCall_("setDefaultPlaybackRate",i):this.tech_&&this.tech_.featuresPlaybackRate?this.techGet_("defaultPlaybackRate"):1},t.isAudio=function(i){if(i!==void 0){this.isAudio_=!!i;return}return!!this.isAudio_},t.enableAudioOnlyUI_=function(){var i=this;this.addClass("vjs-audio-only-mode");var s=this.children(),a=this.getChild("ControlBar"),o=a&&a.currentHeight();s.forEach(function(l){l!==a&&l.el_&&!l.hasClass("vjs-hidden")&&(l.hide(),i.audioOnlyCache_.hiddenChildren.push(l))}),this.audioOnlyCache_.playerHeight=this.currentHeight(),this.height(o),this.trigger("audioonlymodechange")},t.disableAudioOnlyUI_=function(){this.removeClass("vjs-audio-only-mode"),this.audioOnlyCache_.hiddenChildren.forEach(function(i){return i.show()}),this.height(this.audioOnlyCache_.playerHeight),this.trigger("audioonlymodechange")},t.audioOnlyMode=function(i){var s=this;if(typeof i!="boolean"||i===this.audioOnlyMode_)return this.audioOnlyMode_;this.audioOnlyMode_=i;var a=this.options_.Promise||X.Promise;if(a){if(i){var o=[];return this.isInPictureInPicture()&&o.push(this.exitPictureInPicture()),this.isFullscreen()&&o.push(this.exitFullscreen()),this.audioPosterMode()&&o.push(this.audioPosterMode(!1)),a.all(o).then(function(){return s.enableAudioOnlyUI_()})}return a.resolve().then(function(){return s.disableAudioOnlyUI_()})}i?(this.isInPictureInPicture()&&this.exitPictureInPicture(),this.isFullscreen()&&this.exitFullscreen(),this.enableAudioOnlyUI_()):this.disableAudioOnlyUI_()},t.enablePosterModeUI_=function(){var i=this.tech_&&this.tech_;i.hide(),this.addClass("vjs-audio-poster-mode"),this.trigger("audiopostermodechange")},t.disablePosterModeUI_=function(){var i=this.tech_&&this.tech_;i.show(),this.removeClass("vjs-audio-poster-mode"),this.trigger("audiopostermodechange")},t.audioPosterMode=function(i){var s=this;if(typeof i!="boolean"||i===this.audioPosterMode_)return this.audioPosterMode_;this.audioPosterMode_=i;var a=this.options_.Promise||X.Promise;if(a){if(i){if(this.audioOnlyMode()){var o=this.audioOnlyMode(!1);return o.then(function(){s.enablePosterModeUI_()})}return a.resolve().then(function(){s.enablePosterModeUI_()})}return a.resolve().then(function(){s.disablePosterModeUI_()})}if(i){this.audioOnlyMode()&&this.audioOnlyMode(!1),this.enablePosterModeUI_();return}this.disablePosterModeUI_()},t.addTextTrack=function(i,s,a){if(this.tech_)return this.tech_.addTextTrack(i,s,a)},t.addRemoteTextTrack=function(i,s){if(this.tech_)return this.tech_.addRemoteTextTrack(i,s)},t.removeRemoteTextTrack=function(i){i===void 0&&(i={});var s=i,a=s.track;if(a||(a=i),this.tech_)return this.tech_.removeRemoteTextTrack(a)},t.getVideoPlaybackQuality=function(){return this.techGet_("getVideoPlaybackQuality")},t.videoWidth=function(){return this.tech_&&this.tech_.videoWidth&&this.tech_.videoWidth()||0},t.videoHeight=function(){return this.tech_&&this.tech_.videoHeight&&this.tech_.videoHeight()||0},t.language=function(i){if(i===void 0)return this.language_;this.language_!==String(i).toLowerCase()&&(this.language_=String(i).toLowerCase(),Oc(this)&&this.trigger("languagechange"))},t.languages=function(){return Wn(e.prototype.options_.languages,this.languages_)},t.toJSON=function(){var i=Wn(this.options_),s=i.tracks;i.tracks=[];for(var a=0;a<s.length;a++){var o=s[a];o=Wn(o),o.player=void 0,i.tracks[a]=o}return i},t.createModal=function(i,s){var a=this;s=s||{},s.content=i||"";var o=new Bm(this,s);return this.addChild(o),o.on("dispose",function(){a.removeChild(o)}),o.open(),o},t.updateCurrentBreakpoint_=function(){if(this.responsive())for(var i=this.currentBreakpoint(),s=this.currentWidth(),a=0;a<dE.length;a++){var o=dE[a],l=this.breakpoints_[o];if(s<=l){if(i===o)return;i&&this.removeClass(p_[i]),this.addClass(p_[o]),this.breakpoint_=o;break}}},t.removeCurrentBreakpoint_=function(){var i=this.currentBreakpointClass();this.breakpoint_="",i&&this.removeClass(i)},t.breakpoints=function(i){return i===void 0?ci(this.breakpoints_):(this.breakpoint_="",this.breakpoints_=ci({},vxe,i),this.updateCurrentBreakpoint_(),ci(this.breakpoints_))},t.responsive=function(i){if(i===void 0)return this.responsive_;i=!!i;var s=this.responsive_;if(i!==s)return this.responsive_=i,i?(this.on("playerresize",this.boundUpdateCurrentBreakpoint_),this.updateCurrentBreakpoint_()):(this.off("playerresize",this.boundUpdateCurrentBreakpoint_),this.removeCurrentBreakpoint_()),i},t.currentBreakpoint=function(){return this.breakpoint_},t.currentBreakpointClass=function(){return p_[this.breakpoint_]||""},t.loadMedia=function(i,s){var a=this;if(!(!i||typeof i!="object")){this.reset(),this.cache_.media=Wn(i);var o=this.cache_.media,l=o.artwork,u=o.poster,c=o.src,h=o.textTracks;!l&&u&&(this.cache_.media.artwork=[{src:u,type:Sb(u)}]),c&&this.src(c),u&&this.poster(u),Array.isArray(h)&&h.forEach(function(f){return a.addRemoteTextTrack(f,!1)}),this.ready(s)}},t.getMedia=function(){if(!this.cache_.media){var i=this.poster(),s=this.currentSources(),a=Array.prototype.map.call(this.remoteTextTracks(),function(l){return{kind:l.kind,label:l.label,language:l.language,src:l.src}}),o={src:s,textTracks:a};return i&&(o.poster=i,o.artwork=[{src:o.poster,type:Sb(o.poster)}]),o}return Wn(this.cache_.media)},e.getTagSettings=function(i){var s={sources:[],tracks:[]},a=Cc(i),o=a["data-setup"];if(sf(i,"vjs-fill")&&(a.fill=!0),sf(i,"vjs-fluid")&&(a.fluid=!0),o!==null){var l=lge(o||"{}"),u=l[0],c=l[1];u&&Xr.error(u),ci(a,c)}if(ci(s,a),i.hasChildNodes())for(var h=i.childNodes,f=0,g=h.length;f<g;f++){var v=h[f],y=v.nodeName.toLowerCase();y==="source"?s.sources.push(Cc(v)):y==="track"&&s.tracks.push(Cc(v))}return s},t.flexNotSupported_=function(){var i=Be.createElement("i");return!("flexBasis"in i.style||"webkitFlexBasis"in i.style||"mozFlexBasis"in i.style||"msFlexBasis"in i.style||"msFlexOrder"in i.style)},t.debug=function(i){if(i===void 0)return this.debugEnabled_;i?(this.trigger("debugon"),this.previousLogLevel_=this.log.level,this.log.level("debug"),this.debugEnabled_=!0):(this.trigger("debugoff"),this.log.level(this.previousLogLevel_),this.previousLogLevel_=void 0,this.debugEnabled_=!1)},t.playbackRates=function(i){if(i===void 0)return this.cache_.playbackRates;Array.isArray(i)&&i.every(function(s){return typeof s=="number"})&&(this.cache_.playbackRates=i,this.trigger("playbackrateschange"))},e})(Et);ra.names.forEach(function(r){var e=ra[r];Di.prototype[e.getterName]=function(){return this.tech_?this.tech_[e.getterName]():(this[e.privateName]=this[e.privateName]||new e.ListClass,this[e.privateName])}});Di.prototype.crossorigin=Di.prototype.crossOrigin;Di.players={};var M0=X.navigator;Di.prototype.options_={techOrder:Un.defaultTechOrder_,html5:{},inactivityTimeout:2e3,playbackRates:[],liveui:!1,children:["mediaLoader","posterImage","textTrackDisplay","loadingSpinner","bigPlayButton","liveTracker","controlBar","errorDisplay","textTrackSettings","resizeManager"],language:M0&&(M0.languages&&M0.languages[0]||M0.userLanguage||M0.language)||"en",languages:{},notSupportedMessage:"No compatible source was found for this media.",normalizeAutoplay:!1,fullscreen:{options:{navigationUI:"hide"}},breakpoints:{},responsive:!1,audioOnlyMode:!1,audioPosterMode:!1};["ended","seeking","seekable","networkState","readyState"].forEach(function(r){Di.prototype[r]=function(){return this.techGet_(r)}});F7.forEach(function(r){Di.prototype["handleTech"+xi(r)+"_"]=function(){return this.trigger(r)}});Et.registerComponent("Player",Di);var wb="plugin",Np="activePlugins_",gp={},Eb=function(e){return gp.hasOwnProperty(e)},m_=function(e){return Eb(e)?gp[e]:void 0},B7=function(e,t){e[Np]=e[Np]||{},e[Np][t]=!0},kb=function(e,t,n){var i=(n?"before":"")+"pluginsetup";e.trigger(i,t),e.trigger(i+":"+t.name,t)},yxe=function(e,t){var n=function(){kb(this,{name:e,plugin:t,instance:null},!0);var s=t.apply(this,arguments);return B7(this,e),kb(this,{name:e,plugin:t,instance:s}),s};return Object.keys(t).forEach(function(i){n[i]=t[i]}),n},J3=function(e,t){return t.prototype.name=e,function(){kb(this,{name:e,plugin:t,instance:null},!0);for(var n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];var a=mj(t,[this].concat(i));return this[e]=function(){return a},kb(this,a.getEventHash()),a}},Vu=(function(){function r(t){if(this.constructor===r)throw new Error("Plugin must be sub-classed; not directly instantiated.");this.player=t,this.log||(this.log=this.player.log.createLogger(this.name)),HA(this),delete this.trigger,s7(this,this.constructor.defaultState),B7(t,this.name),this.dispose=this.dispose.bind(this),t.on("dispose",this.dispose)}var e=r.prototype;return e.version=function(){return this.constructor.VERSION},e.getEventHash=function(n){return n===void 0&&(n={}),n.name=this.name,n.plugin=this.constructor,n.instance=this,n},e.trigger=function(n,i){return i===void 0&&(i={}),Fm(this.eventBusEl_,n,this.getEventHash(i))},e.handleStateChanged=function(n){},e.dispose=function(){var n=this.name,i=this.player;this.trigger("dispose"),this.off(),i.off("dispose",this.dispose),i[Np][n]=!1,this.player=this.state=null,i[n]=J3(n,gp[n])},r.isBasic=function(n){var i=typeof n=="string"?m_(n):n;return typeof i=="function"&&!r.prototype.isPrototypeOf(i.prototype)},r.registerPlugin=function(n,i){if(typeof n!="string")throw new Error('Illegal plugin name, "'+n+'", must be a string, was '+typeof n+".");if(Eb(n))Xr.warn('A plugin named "'+n+'" already exists. You may want to avoid re-registering plugins!');else if(Di.prototype.hasOwnProperty(n))throw new Error('Illegal plugin name, "'+n+'", cannot share a name with an existing player method!');if(typeof i!="function")throw new Error('Illegal plugin for "'+n+'", must be a function, was '+typeof i+".");return gp[n]=i,n!==wb&&(r.isBasic(i)?Di.prototype[n]=yxe(n,i):Di.prototype[n]=J3(n,i)),i},r.deregisterPlugin=function(n){if(n===wb)throw new Error("Cannot de-register base plugin.");Eb(n)&&(delete gp[n],delete Di.prototype[n])},r.getPlugins=function(n){n===void 0&&(n=Object.keys(gp));var i;return n.forEach(function(s){var a=m_(s);a&&(i=i||{},i[s]=a)}),i},r.getPluginVersion=function(n){var i=m_(n);return i&&i.VERSION||""},r})();Vu.getPlugin=m_;Vu.BASE_PLUGIN_NAME=wb;Vu.registerPlugin(wb,Vu);Di.prototype.usingPlugin=function(r){return!!this[Np]&&this[Np][r]===!0};Di.prototype.hasPlugin=function(r){return!!Eb(r)};var Z3=!1,xxe=function(e,t){t===void 0&&(t={}),Z3||(Xr.warn("videojs.extend is deprecated as of Video.js 7.22.0 and will be removed in Video.js 8.0.0"),Z3=!0);var n=function(){e.apply(this,arguments)},i={};typeof t=="object"?(t.constructor!==Object.prototype.constructor&&(n=t.constructor),i=t):typeof t=="function"&&(n=t),Va(n,e),e&&(n.super_=e);for(var s in i)i.hasOwnProperty(s)&&(n.prototype[s]=i[s]);return n},N7=function(e){return e.indexOf("#")===0?e.slice(1):e};function Me(r,e,t){var n=Me.getPlayer(r);if(n)return e&&Xr.warn('Player "'+r+'" is already initialised. Options will not be applied.'),t&&n.ready(t),n;var i=typeof r=="string"?Kd("#"+N7(r)):r;if(!Mm(i))throw new TypeError("The element or ID supplied is not valid. (videojs)");(!i.ownerDocument.defaultView||!i.ownerDocument.body.contains(i))&&Xr.warn("The element supplied is not included in the DOM"),e=e||{},e.restoreEl===!0&&(e.restoreEl=(i.parentNode&&i.parentNode.hasAttribute("data-vjs-player")?i.parentNode:i).cloneNode(!0)),Gd("beforesetup").forEach(function(a){var o=a(i,Wn(e));if(!Bc(o)||Array.isArray(o)){Xr.error("please return an object in beforesetup hooks");return}e=Wn(e,o)});var s=Et.getComponent("Player");return n=new s(i,e,t),Gd("setup").forEach(function(a){return a(n)}),n}Me.hooks_=Ac;Me.hooks=Gd;Me.hook=qve;Me.hookOnce=Gve;Me.removeHook=Ij;if(X.VIDEOJS_NO_DYNAMIC_STYLE!==!0&&Om()){var rx=Kd(".vjs-styles-defaults");if(!rx){rx=Zj("vjs-styles-defaults");var hw=Kd("head");hw&&hw.insertBefore(rx,hw.firstChild),e7(rx,`
      .video-js {
        width: 300px;
        height: 150px;
      }

      .vjs-fluid:not(.vjs-audio-only-mode) {
        padding-top: 56.25%
      }
    `)}}sE(1,Me);Me.VERSION=Dj;Me.options=Di.prototype.options_;Me.getPlayers=function(){return Di.players};Me.getPlayer=function(r){var e=Di.players,t;if(typeof r=="string"){var n=N7(r),i=e[n];if(i)return i;t=Kd("#"+n)}else t=r;if(Mm(t)){var s=t,a=s.player,o=s.playerId;if(a||e[o])return a||e[o]}};Me.getAllPlayers=function(){return Object.keys(Di.players).map(function(r){return Di.players[r]}).filter(Boolean)};Me.players=Di.players;Me.getComponent=Et.getComponent;Me.registerComponent=function(r,e){Un.isTech(e)&&Xr.warn("The "+r+" tech was registered as a component. It should instead be registered using videojs.registerTech(name, tech)"),Et.registerComponent.call(Et,r,e)};Me.getTech=Un.getTech;Me.registerTech=Un.registerTech;Me.use=Dye;Object.defineProperty(Me,"middleware",{value:{},writeable:!1,enumerable:!0});Object.defineProperty(Me.middleware,"TERMINATOR",{value:bb,writeable:!1,enumerable:!0});Me.browser=Zve;Me.TOUCH_ENABLED=lm;Me.extend=xxe;Me.mergeOptions=Wn;Me.bind=qn;Me.registerPlugin=Vu.registerPlugin;Me.deregisterPlugin=Vu.deregisterPlugin;Me.plugin=function(r,e){return Xr.warn("videojs.plugin() is deprecated; use videojs.registerPlugin() instead"),Vu.registerPlugin(r,e)};Me.getPlugins=Vu.getPlugins;Me.getPlugin=Vu.getPlugin;Me.getPluginVersion=Vu.getPluginVersion;Me.addLanguage=function(r,e){var t;return r=(""+r).toLowerCase(),Me.options.languages=Wn(Me.options.languages,(t={},t[r]=e,t)),Me.options.languages[r]};Me.log=Xr;Me.createLogger=Rj;Me.createTimeRange=Me.createTimeRanges=af;Me.formatTime=fm;Me.setFormatTime=Kye;Me.resetFormatTime=Xye;Me.parseUrl=WA;Me.isCrossOrigin=rT;Me.EventTarget=is;Me.on=bo;Me.one=eT;Me.off=zs;Me.trigger=Fm;Me.xhr=fj;Me.TextTrack=Ev;Me.AudioTrack=u7;Me.VideoTrack=c7;["isEl","isTextNode","createEl","hasClass","addClass","removeClass","toggleClass","setAttributes","getAttributes","emptyEl","appendContent","insertContent"].forEach(function(r){Me[r]=function(){return Xr.warn("videojs."+r+"() is deprecated; use videojs.dom."+r+"() instead"),Qj[r].apply(null,arguments)}});Me.computedStyle=jg;Me.dom=Qj;Me.url=wye;Me.defineLazyProperty=cD;Me.addLanguage("en",{"Non-Fullscreen":"Exit Fullscreen"});/*! @name @videojs/http-streaming @version 2.16.3 @license Apache-2.0 */var Al=qS,Ab=function(e,t,n){return e&&n&&n.responseURL&&t!==n.responseURL?n.responseURL:t},zl=function(e){return Me.log.debug?Me.log.debug.bind(Me,"VHS:",e+" >"):function(){}},Xd=1/30,ku=Xd*3,U7=function(e,t){var n=[],i;if(e&&e.length)for(i=0;i<e.length;i++)t(e.start(i),e.end(i))&&n.push([e.start(i),e.end(i)]);return Me.createTimeRanges(n)},vp=function(e,t){return U7(e,function(n,i){return n-ku<=t&&i+ku>=t})},nx=function(e,t){return U7(e,function(n){return n-Xd>=t})},_xe=function(e){if(e.length<2)return Me.createTimeRanges();for(var t=[],n=1;n<e.length;n++){var i=e.end(n-1),s=e.start(n);t.push([i,s])}return Me.createTimeRanges(t)},bxe=function(e,t){var n=null,i=null,s=0,a=[],o=[];if(!e||!e.length||!t||!t.length)return Me.createTimeRange();for(var l=e.length;l--;)a.push({time:e.start(l),type:"start"}),a.push({time:e.end(l),type:"end"});for(l=t.length;l--;)a.push({time:t.start(l),type:"start"}),a.push({time:t.end(l),type:"end"});for(a.sort(function(u,c){return u.time-c.time}),l=0;l<a.length;l++)a[l].type==="start"?(s++,s===2&&(n=a[l].time)):a[l].type==="end"&&(s--,s===1&&(i=a[l].time)),n!==null&&i!==null&&(o.push([n,i]),n=null,i=null);return Me.createTimeRanges(o)},$7=function(e){var t=[];if(!e||!e.length)return"";for(var n=0;n<e.length;n++)t.push(e.start(n)+" => "+e.end(n));return t.join(", ")},Sxe=function(e,t,n){n===void 0&&(n=1);var i=e.length?e.end(e.length-1):0;return(i-t)/n},qh=function(e){for(var t=[],n=0;n<e.length;n++)t.push({start:e.start(n),end:e.end(n)});return t},Txe=function(e,t){if(e===t)return!1;if(!e&&t||!t&&e||e.length!==t.length)return!0;for(var n=0;n<e.length;n++)if(e.start(n)!==t.start(n)||e.end(n)!==t.end(n))return!0;return!1},eF=function(e){if(!(!e||!e.length||!e.end))return e.end(e.length-1)},dD=function(e,t){var n=0;if(!e||!e.length)return n;for(var i=0;i<e.length;i++){var s=e.start(i),a=e.end(i);if(!(t>a)){if(t>s&&t<=a){n+=a-t;continue}n+=a-s}}return n},tF=Me.createTimeRange,hD=function(e,t){if(!t.preload)return t.duration;var n=0;return(t.parts||[]).forEach(function(i){n+=i.duration}),(t.preloadHints||[]).forEach(function(i){i.type==="PART"&&(n+=e.partTargetDuration)}),n},hE=function(e){return(e.segments||[]).reduce(function(t,n,i){return n.parts?n.parts.forEach(function(s,a){t.push({duration:s.duration,segmentIndex:i,partIndex:a,part:s,segment:n})}):t.push({duration:n.duration,segmentIndex:i,partIndex:null,segment:n,part:null}),t},[])},j7=function(e){var t=e.segments&&e.segments.length&&e.segments[e.segments.length-1];return t&&t.parts||[]},z7=function(e){var t=e.preloadSegment;if(t){var n=t.parts,i=t.preloadHints,s=(i||[]).reduce(function(a,o){return a+(o.type==="PART"?1:0)},0);return s+=n&&n.length?n.length:0,s}},H7=function(e,t){if(t.endList)return 0;if(e&&e.suggestedPresentationDelay)return e.suggestedPresentationDelay;var n=j7(t).length>0;return n&&t.serverControl&&t.serverControl.partHoldBack?t.serverControl.partHoldBack:n&&t.partTargetDuration?t.partTargetDuration*3:t.serverControl&&t.serverControl.holdBack?t.serverControl.holdBack:t.targetDuration?t.targetDuration*3:0},Cxe=function(e,t){var n=0,i=t-e.mediaSequence,s=e.segments[i];if(s){if(typeof s.start<"u")return{result:s.start,precise:!0};if(typeof s.end<"u")return{result:s.end-s.duration,precise:!0}}for(;i--;){if(s=e.segments[i],typeof s.end<"u")return{result:n+s.end,precise:!0};if(n+=hD(e,s),typeof s.start<"u")return{result:n+s.start,precise:!0}}return{result:n,precise:!1}},wxe=function(e,t){for(var n=0,i,s=t-e.mediaSequence;s<e.segments.length;s++){if(i=e.segments[s],typeof i.start<"u")return{result:i.start-n,precise:!0};if(n+=hD(e,i),typeof i.end<"u")return{result:i.end-n,precise:!0}}return{result:-1,precise:!1}},V7=function(e,t,n){if(typeof t>"u"&&(t=e.mediaSequence+e.segments.length),t<e.mediaSequence)return 0;var i=Cxe(e,t);if(i.precise)return i.result;var s=wxe(e,t);return s.precise?s.result:i.result+n},W7=function(e,t,n){if(!e)return 0;if(typeof n!="number"&&(n=0),typeof t>"u"){if(e.totalDuration)return e.totalDuration;if(!e.endList)return X.Infinity}return V7(e,t,n)},pg=function(e){var t=e.defaultDuration,n=e.durationList,i=e.startIndex,s=e.endIndex,a=0;if(i>s){var o=[s,i];i=o[0],s=o[1]}if(i<0){for(var l=i;l<Math.min(0,s);l++)a+=t;i=0}for(var u=i;u<s;u++)a+=n[u].duration;return a},q7=function(e,t,n,i){if(!e||!e.segments)return null;if(e.endList)return W7(e);if(t===null)return null;t=t||0;var s=V7(e,e.mediaSequence+e.segments.length,t);return n&&(i=typeof i=="number"?i:H7(null,e),s-=i),Math.max(0,s)},Exe=function(e,t,n){var i=!0,s=t||0,a=q7(e,t,i,n);return a===null?tF():tF(s,a)},kxe=function(e){for(var t=e.playlist,n=e.currentTime,i=e.startingSegmentIndex,s=e.startingPartIndex,a=e.startTime,o=e.experimentalExactManifestTimings,l=n-a,u=hE(t),c=0,h=0;h<u.length;h++){var f=u[h];if(i===f.segmentIndex&&!(typeof s=="number"&&typeof f.partIndex=="number"&&s!==f.partIndex)){c=h;break}}if(l<0){if(c>0)for(var g=c-1;g>=0;g--){var v=u[g];if(l+=v.duration,o){if(l<0)continue}else if(l+Xd<=0)continue;return{partIndex:v.partIndex,segmentIndex:v.segmentIndex,startTime:a-pg({defaultDuration:t.targetDuration,durationList:u,startIndex:c,endIndex:g})}}return{partIndex:u[0]&&u[0].partIndex||null,segmentIndex:u[0]&&u[0].segmentIndex||0,startTime:n}}if(c<0){for(var y=c;y<0;y++)if(l-=t.targetDuration,l<0)return{partIndex:u[0]&&u[0].partIndex||null,segmentIndex:u[0]&&u[0].segmentIndex||0,startTime:n};c=0}for(var _=c;_<u.length;_++){var C=u[_];if(l-=C.duration,o){if(l>0)continue}else if(l-Xd>=0)continue;return{partIndex:C.partIndex,segmentIndex:C.segmentIndex,startTime:a+pg({defaultDuration:t.targetDuration,durationList:u,startIndex:c,endIndex:_})}}return{segmentIndex:u[u.length-1].segmentIndex,partIndex:u[u.length-1].partIndex,startTime:n}},G7=function(e){return e.excludeUntil&&e.excludeUntil>Date.now()},fD=function(e){return e.excludeUntil&&e.excludeUntil===1/0},aT=function(e){var t=G7(e);return!e.disabled&&!t},Axe=function(e){return e.disabled},Dxe=function(e){for(var t=0;t<e.segments.length;t++)if(e.segments[t].key)return!0;return!1},K7=function(e,t){return t.attributes&&t.attributes[e]},Ixe=function(e,t,n,i){if(i===void 0&&(i=0),!K7("BANDWIDTH",n))return NaN;var s=e*n.attributes.BANDWIDTH;return(s-i*8)/t},fE=function(e,t){if(e.playlists.length===1)return!0;var n=t.attributes.BANDWIDTH||Number.MAX_VALUE;return e.playlists.filter(function(i){return aT(i)?(i.attributes.BANDWIDTH||0)<n:!1}).length===0},pD=function(e,t){return!e&&!t||!e&&t||e&&!t?!1:!!(e===t||e.id&&t.id&&e.id===t.id||e.resolvedUri&&t.resolvedUri&&e.resolvedUri===t.resolvedUri||e.uri&&t.uri&&e.uri===t.uri)},rF=function(e,t){var n=e&&e.mediaGroups&&e.mediaGroups.AUDIO||{},i=!1;for(var s in n){for(var a in n[s])if(i=t(n[s][a]),i)break;if(i)break}return!!i},Dv=function(e){if(!e||!e.playlists||!e.playlists.length){var t=rF(e,function(a){return a.playlists&&a.playlists.length||a.uri});return t}for(var n=function(o){var l=e.playlists[o],u=l.attributes&&l.attributes.CODECS;if(u&&u.split(",").every(function(h){return yj(h)}))return"continue";var c=rF(e,function(h){return pD(l,h)});return c?"continue":{v:!1}},i=0;i<e.playlists.length;i++){var s=n(i);if(s!=="continue"&&typeof s=="object")return s.v}return!0},Fa={liveEdgeDelay:H7,duration:W7,seekable:Exe,getMediaInfoForTime:kxe,isEnabled:aT,isDisabled:Axe,isBlacklisted:G7,isIncompatible:fD,playlistEnd:q7,isAes:Dxe,hasAttribute:K7,estimateSegmentRequestTime:Ixe,isLowestEnabledRendition:fE,isAudioOnly:Dv,playlistMatch:pD,segmentDurationWithParts:hD},X7=Me.log,mD=function(e,t){return e+"-"+t},Pxe=function(e,t,n){return"placeholder-uri-"+e+"-"+t+"-"+n},Rxe=function(e){var t=e.onwarn,n=e.oninfo,i=e.manifestString,s=e.customTagParsers,a=s===void 0?[]:s,o=e.customTagMappers,l=o===void 0?[]:o,u=e.experimentalLLHLS,c=new _ge;t&&c.on("warn",t),n&&c.on("info",n),a.forEach(function(y){return c.addParser(y)}),l.forEach(function(y){return c.addTagMapper(y)}),c.push(i),c.end();var h=c.manifest;if(u||(["preloadSegment","skip","serverControl","renditionReports","partInf","partTargetDuration"].forEach(function(y){h.hasOwnProperty(y)&&delete h[y]}),h.segments&&h.segments.forEach(function(y){["parts","preloadHints"].forEach(function(_){y.hasOwnProperty(_)&&delete y[_]})})),!h.targetDuration){var f=10;h.segments&&h.segments.length&&(f=h.segments.reduce(function(y,_){return Math.max(y,_.duration)},0)),t&&t("manifest has no targetDuration defaulting to "+f),h.targetDuration=f}var g=j7(h);if(g.length&&!h.partTargetDuration){var v=g.reduce(function(y,_){return Math.max(y,_.duration)},0);t&&(t("manifest has no partTargetDuration defaulting to "+v),X7.error("LL-HLS manifest has parts but lacks required #EXT-X-PART-INF:PART-TARGET value. See https://datatracker.ietf.org/doc/html/draft-pantos-hls-rfc8216bis-09#section-4.4.3.7. Playback is not guaranteed.")),h.partTargetDuration=v}return h},jm=function(e,t){e.mediaGroups&&["AUDIO","SUBTITLES"].forEach(function(n){if(e.mediaGroups[n])for(var i in e.mediaGroups[n])for(var s in e.mediaGroups[n][i]){var a=e.mediaGroups[n][i][s];t(a,n,i,s)}})},Y7=function(e){var t=e.playlist,n=e.uri,i=e.id;t.id=i,t.playlistErrors_=0,n&&(t.uri=n),t.attributes=t.attributes||{}},Lxe=function(e){for(var t=e.playlists.length;t--;){var n=e.playlists[t];Y7({playlist:n,id:mD(t,n.uri)}),n.resolvedUri=Al(e.uri,n.uri),e.playlists[n.id]=n,e.playlists[n.uri]=n,n.attributes.BANDWIDTH||X7.warn("Invalid playlist STREAM-INF detected. Missing BANDWIDTH attribute.")}},Oxe=function(e){jm(e,function(t){t.uri&&(t.resolvedUri=Al(e.uri,t.uri))})},Mxe=function(e,t){var n=mD(0,t),i={mediaGroups:{AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},uri:X.location.href,resolvedUri:X.location.href,playlists:[{uri:t,id:n,resolvedUri:t,attributes:{}}]};return i.playlists[n]=i.playlists[0],i.playlists[t]=i.playlists[0],i},Q7=function(e,t,n){n===void 0&&(n=Pxe),e.uri=t;for(var i=0;i<e.playlists.length;i++)if(!e.playlists[i].uri){var s="placeholder-uri-"+i;e.playlists[i].uri=s}var a=Dv(e);jm(e,function(o,l,u,c){if(!o.playlists||!o.playlists.length){if(a&&l==="AUDIO"&&!o.uri)for(var h=0;h<e.playlists.length;h++){var f=e.playlists[h];if(f.attributes&&f.attributes.AUDIO&&f.attributes.AUDIO===u)return}o.playlists=[sr({},o)]}o.playlists.forEach(function(g,v){var y=n(l,u,c,g),_=mD(v,y);g.uri?g.resolvedUri=g.resolvedUri||Al(e.uri,g.uri):(g.uri=v===0?y:_,g.resolvedUri=g.uri),g.id=g.id||_,g.attributes=g.attributes||{},e.playlists[g.id]=g,e.playlists[g.uri]=g})}),Lxe(e),Oxe(e)},Db=Me.mergeOptions,Fxe=Me.EventTarget,Bxe=function(e,t){if(t.endList||!t.serverControl)return e;var n={};if(t.serverControl.canBlockReload){var i=t.preloadSegment,s=t.mediaSequence+t.segments.length;if(i){var a=i.parts||[],o=z7(t)-1;o>-1&&o!==a.length-1&&(n._HLS_part=o),(o>-1||a.length)&&s--}n._HLS_msn=s}if(t.serverControl&&t.serverControl.canSkipUntil&&(n._HLS_skip=t.serverControl.canSkipDateranges?"v2":"YES"),Object.keys(n).length){var l=new X.URL(e);["_HLS_skip","_HLS_msn","_HLS_part"].forEach(function(u){n.hasOwnProperty(u)&&l.searchParams.set(u,n[u])}),e=l.toString()}return e},Nxe=function(e,t){if(!e)return t;var n=Db(e,t);if(e.preloadHints&&!t.preloadHints&&delete n.preloadHints,e.parts&&!t.parts)delete n.parts;else if(e.parts&&t.parts)for(var i=0;i<t.parts.length;i++)e.parts&&e.parts[i]&&(n.parts[i]=Db(e.parts[i],t.parts[i]));return!e.skipped&&t.skipped&&(n.skipped=!1),e.preload&&!t.preload&&(n.preload=!1),n},Uxe=function(e,t,n){var i=e.slice(),s=t.slice();n=n||0;for(var a=[],o,l=0;l<s.length;l++){var u=i[l+n],c=s[l];u?(o=u.map||o,a.push(Nxe(u,c))):(o&&!c.map&&(c.map=o),a.push(c))}return a},J7=function(e,t){!e.resolvedUri&&e.uri&&(e.resolvedUri=Al(t,e.uri)),e.key&&!e.key.resolvedUri&&(e.key.resolvedUri=Al(t,e.key.uri)),e.map&&!e.map.resolvedUri&&(e.map.resolvedUri=Al(t,e.map.uri)),e.map&&e.map.key&&!e.map.key.resolvedUri&&(e.map.key.resolvedUri=Al(t,e.map.key.uri)),e.parts&&e.parts.length&&e.parts.forEach(function(n){n.resolvedUri||(n.resolvedUri=Al(t,n.uri))}),e.preloadHints&&e.preloadHints.length&&e.preloadHints.forEach(function(n){n.resolvedUri||(n.resolvedUri=Al(t,n.uri))})},Z7=function(e){var t=e.segments||[],n=e.preloadSegment;if(n&&n.parts&&n.parts.length){if(n.preloadHints){for(var i=0;i<n.preloadHints.length;i++)if(n.preloadHints[i].type==="MAP")return t}n.duration=e.targetDuration,n.preload=!0,t.push(n)}return t},e9=function(e,t){return e===t||e.segments&&t.segments&&e.segments.length===t.segments.length&&e.endList===t.endList&&e.mediaSequence===t.mediaSequence&&e.preloadSegment===t.preloadSegment},pE=function(e,t,n){n===void 0&&(n=e9);var i=Db(e,{}),s=i.playlists[t.id];if(!s||n(s,t))return null;t.segments=Z7(t);var a=Db(s,t);if(a.preloadSegment&&!t.preloadSegment&&delete a.preloadSegment,s.segments){if(t.skip){t.segments=t.segments||[];for(var o=0;o<t.skip.skippedSegments;o++)t.segments.unshift({skipped:!0})}a.segments=Uxe(s.segments,t.segments,t.mediaSequence-s.mediaSequence)}a.segments.forEach(function(u){J7(u,a.resolvedUri)});for(var l=0;l<i.playlists.length;l++)i.playlists[l].id===t.id&&(i.playlists[l]=a);return i.playlists[t.id]=a,i.playlists[t.uri]=a,jm(e,function(u,c,h,f){if(u.playlists)for(var g=0;g<u.playlists.length;g++)t.id===u.playlists[g].id&&(u.playlists[g]=a)}),i},mE=function(e,t){var n=e.segments||[],i=n[n.length-1],s=i&&i.parts&&i.parts[i.parts.length-1],a=s&&s.duration||i&&i.duration;return t&&a?a*1e3:(e.partTargetDuration||e.targetDuration||10)*500},yp=(function(r){Ht(e,r);function e(n,i,s){var a;if(s===void 0&&(s={}),a=r.call(this)||this,!n)throw new Error("A non-empty playlist URL or object is required");a.logger_=zl("PlaylistLoader");var o=s,l=o.withCredentials,u=l===void 0?!1:l,c=o.handleManifestRedirects,h=c===void 0?!1:c;a.src=n,a.vhs_=i,a.withCredentials=u,a.handleManifestRedirects=h;var f=i.options_;return a.customTagParsers=f&&f.customTagParsers||[],a.customTagMappers=f&&f.customTagMappers||[],a.experimentalLLHLS=f&&f.experimentalLLHLS||!1,Me.browser.IE_VERSION&&(a.experimentalLLHLS=!1),a.state="HAVE_NOTHING",a.handleMediaupdatetimeout_=a.handleMediaupdatetimeout_.bind(We(a)),a.on("mediaupdatetimeout",a.handleMediaupdatetimeout_),a}var t=e.prototype;return t.handleMediaupdatetimeout_=function(){var i=this;if(this.state==="HAVE_METADATA"){var s=this.media(),a=Al(this.master.uri,s.uri);this.experimentalLLHLS&&(a=Bxe(a,s)),this.state="HAVE_CURRENT_METADATA",this.request=this.vhs_.xhr({uri:a,withCredentials:this.withCredentials},function(o,l){if(i.request){if(o)return i.playlistRequestError(i.request,i.media(),"HAVE_METADATA");i.haveMetadata({playlistString:i.request.responseText,url:i.media().uri,id:i.media().id})}})}},t.playlistRequestError=function(i,s,a){var o=s.uri,l=s.id;this.request=null,a&&(this.state=a),this.error={playlist:this.master.playlists[l],status:i.status,message:"HLS playlist request error at URL: "+o+".",responseText:i.responseText,code:i.status>=500?4:2},this.trigger("error")},t.parseManifest_=function(i){var s=this,a=i.url,o=i.manifestString;return Rxe({onwarn:function(u){var c=u.message;return s.logger_("m3u8-parser warn for "+a+": "+c)},oninfo:function(u){var c=u.message;return s.logger_("m3u8-parser info for "+a+": "+c)},manifestString:o,customTagParsers:this.customTagParsers,customTagMappers:this.customTagMappers,experimentalLLHLS:this.experimentalLLHLS})},t.haveMetadata=function(i){var s=i.playlistString,a=i.playlistObject,o=i.url,l=i.id;this.request=null,this.state="HAVE_METADATA";var u=a||this.parseManifest_({url:o,manifestString:s});u.lastRequest=Date.now(),Y7({playlist:u,uri:o,id:l});var c=pE(this.master,u);this.targetDuration=u.partTargetDuration||u.targetDuration,this.pendingMedia_=null,c?(this.master=c,this.media_=this.master.playlists[l]):this.trigger("playlistunchanged"),this.updateMediaUpdateTimeout_(mE(this.media(),!!c)),this.trigger("loadedplaylist")},t.dispose=function(){this.trigger("dispose"),this.stopRequest(),X.clearTimeout(this.mediaUpdateTimeout),X.clearTimeout(this.finalRenditionTimeout),this.off()},t.stopRequest=function(){if(this.request){var i=this.request;this.request=null,i.onreadystatechange=null,i.abort()}},t.media=function(i,s){var a=this;if(!i)return this.media_;if(this.state==="HAVE_NOTHING")throw new Error("Cannot switch media playlist from "+this.state);if(typeof i=="string"){if(!this.master.playlists[i])throw new Error("Unknown playlist URI: "+i);i=this.master.playlists[i]}if(X.clearTimeout(this.finalRenditionTimeout),s){var o=(i.partTargetDuration||i.targetDuration)/2*1e3||5e3;this.finalRenditionTimeout=X.setTimeout(this.media.bind(this,i,!1),o);return}var l=this.state,u=!this.media_||i.id!==this.media_.id,c=this.master.playlists[i.id];if(c&&c.endList||i.endList&&i.segments.length){this.request&&(this.request.onreadystatechange=null,this.request.abort(),this.request=null),this.state="HAVE_METADATA",this.media_=i,u&&(this.trigger("mediachanging"),l==="HAVE_MASTER"?this.trigger("loadedmetadata"):this.trigger("mediachange"));return}if(this.updateMediaUpdateTimeout_(mE(i,!0)),!!u){if(this.state="SWITCHING_MEDIA",this.request){if(i.resolvedUri===this.request.url)return;this.request.onreadystatechange=null,this.request.abort(),this.request=null}this.media_&&this.trigger("mediachanging"),this.pendingMedia_=i,this.request=this.vhs_.xhr({uri:i.resolvedUri,withCredentials:this.withCredentials},function(h,f){if(a.request){if(i.lastRequest=Date.now(),i.resolvedUri=Ab(a.handleManifestRedirects,i.resolvedUri,f),h)return a.playlistRequestError(a.request,i,l);a.haveMetadata({playlistString:f.responseText,url:i.uri,id:i.id}),l==="HAVE_MASTER"?a.trigger("loadedmetadata"):a.trigger("mediachange")}})}},t.pause=function(){this.mediaUpdateTimeout&&(X.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null),this.stopRequest(),this.state==="HAVE_NOTHING"&&(this.started=!1),this.state==="SWITCHING_MEDIA"?this.media_?this.state="HAVE_METADATA":this.state="HAVE_MASTER":this.state==="HAVE_CURRENT_METADATA"&&(this.state="HAVE_METADATA")},t.load=function(i){var s=this;this.mediaUpdateTimeout&&(X.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null);var a=this.media();if(i){var o=a?(a.partTargetDuration||a.targetDuration)/2*1e3:5e3;this.mediaUpdateTimeout=X.setTimeout(function(){s.mediaUpdateTimeout=null,s.load()},o);return}if(!this.started){this.start();return}a&&!a.endList?this.trigger("mediaupdatetimeout"):this.trigger("loadedplaylist")},t.updateMediaUpdateTimeout_=function(i){var s=this;this.mediaUpdateTimeout&&(X.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null),!(!this.media()||this.media().endList)&&(this.mediaUpdateTimeout=X.setTimeout(function(){s.mediaUpdateTimeout=null,s.trigger("mediaupdatetimeout"),s.updateMediaUpdateTimeout_(i)},i))},t.start=function(){var i=this;if(this.started=!0,typeof this.src=="object"){this.src.uri||(this.src.uri=X.location.href),this.src.resolvedUri=this.src.uri,setTimeout(function(){i.setupInitialPlaylist(i.src)},0);return}this.request=this.vhs_.xhr({uri:this.src,withCredentials:this.withCredentials},function(s,a){if(i.request){if(i.request=null,s)return i.error={status:a.status,message:"HLS playlist request error at URL: "+i.src+".",responseText:a.responseText,code:2},i.state==="HAVE_NOTHING"&&(i.started=!1),i.trigger("error");i.src=Ab(i.handleManifestRedirects,i.src,a);var o=i.parseManifest_({manifestString:a.responseText,url:i.src});i.setupInitialPlaylist(o)}})},t.srcUri=function(){return typeof this.src=="string"?this.src:this.src.uri},t.setupInitialPlaylist=function(i){if(this.state="HAVE_MASTER",i.playlists){this.master=i,Q7(this.master,this.srcUri()),i.playlists.forEach(function(a){a.segments=Z7(a),a.segments.forEach(function(o){J7(o,a.resolvedUri)})}),this.trigger("loadedplaylist"),this.request||this.media(this.master.playlists[0]);return}var s=this.srcUri()||X.location.href;this.master=Mxe(i,s),this.haveMetadata({playlistObject:i,url:s,id:this.master.playlists[0].id}),this.trigger("loadedmetadata")},e})(Fxe),$xe=Me.xhr,jxe=Me.mergeOptions,gE=function(e,t,n,i){var s=e.responseType==="arraybuffer"?e.response:e.responseText;!t&&s&&(e.responseTime=Date.now(),e.roundTripTime=e.responseTime-e.requestTime,e.bytesReceived=s.byteLength||s.length,e.bandwidth||(e.bandwidth=Math.floor(e.bytesReceived/e.roundTripTime*8*1e3))),n.headers&&(e.responseHeaders=n.headers),t&&t.code==="ETIMEDOUT"&&(e.timedout=!0),!t&&!e.aborted&&n.statusCode!==200&&n.statusCode!==206&&n.statusCode!==0&&(t=new Error("XHR Failed with a response of: "+(e&&(s||e.responseText)))),i(t,e)},t9=function(){var e=function t(n,i){n=jxe({timeout:45e3},n);var s=t.beforeRequest||Me.Vhs.xhr.beforeRequest;if(s&&typeof s=="function"){var a=s(n);a&&(n=a)}var o=Me.Vhs.xhr.original===!0?$xe:Me.Vhs.xhr,l=o(n,function(c,h){return gE(l,c,h,i)}),u=l.abort;return l.abort=function(){return l.aborted=!0,u.apply(l,arguments)},l.uri=n.uri,l.requestTime=Date.now(),l};return e.original=!0,e},zxe=function(e){var t,n=e.offset;return typeof e.offset=="bigint"||typeof e.length=="bigint"?t=X.BigInt(e.offset)+X.BigInt(e.length)-X.BigInt(1):t=e.offset+e.length-1,"bytes="+n+"-"+t},vE=function(e){var t={};return e.byterange&&(t.Range=zxe(e.byterange)),t},Hxe=function(e,t){return e.start(t)+"-"+e.end(t)},Vxe=function(e,t){var n=e.toString(16);return"00".substring(0,2-n.length)+n+(t%2?" ":"")},Wxe=function(e){return e>=32&&e<126?String.fromCharCode(e):"."},r9=function(e){var t={};return Object.keys(e).forEach(function(n){var i=e[n];_j(i)?t[n]={bytes:i.buffer,byteOffset:i.byteOffset,byteLength:i.byteLength}:t[n]=i}),t},Ib=function(e){var t=e.byterange||{length:1/0,offset:0};return[t.length,t.offset,e.resolvedUri].join(",")},n9=function(e){return e.resolvedUri},i9=function(e){for(var t=Array.prototype.slice.call(e),n=16,i="",s,a,o=0;o<t.length/n;o++)s=t.slice(o*n,o*n+n).map(Vxe).join(""),a=t.slice(o*n,o*n+n).map(Wxe).join(""),i+=s+" "+a+`
`;return i},qxe=function(e){var t=e.bytes;return i9(t)},Gxe=function(e){var t="",n;for(n=0;n<e.length;n++)t+=Hxe(e,n)+" ";return t},Kxe=Object.freeze({__proto__:null,createTransferableMessage:r9,initSegmentId:Ib,segmentKeyId:n9,hexDump:i9,tagDump:qxe,textRanges:Gxe}),s9=.25,Xxe=function(e,t){if(!t.dateTimeObject)return null;var n=t.videoTimingInfo.transmuxerPrependedSeconds,i=t.videoTimingInfo.transmuxedPresentationStart,s=i+n,a=e-s;return new Date(t.dateTimeObject.getTime()+a*1e3)},Yxe=function(e){return e.transmuxedPresentationEnd-e.transmuxedPresentationStart-e.transmuxerPrependedSeconds},Qxe=function(e,t){var n;try{n=new Date(e)}catch{return null}if(!t||!t.segments||t.segments.length===0)return null;var i=t.segments[0];if(n<i.dateTimeObject)return null;for(var s=0;s<t.segments.length-1;s++){i=t.segments[s];var a=t.segments[s+1].dateTimeObject;if(n<a)break}var o=t.segments[t.segments.length-1],l=o.dateTimeObject,u=o.videoTimingInfo?Yxe(o.videoTimingInfo):o.duration+o.duration*s9,c=new Date(l.getTime()+u*1e3);return n>c?null:(n>l&&(i=o),{segment:i,estimatedStart:i.videoTimingInfo?i.videoTimingInfo.transmuxedPresentationStart:Fa.duration(t,t.mediaSequence+t.segments.indexOf(i)),type:i.videoTimingInfo?"accurate":"estimate"})},Jxe=function(e,t){if(!t||!t.segments||t.segments.length===0)return null;for(var n=0,i,s=0;s<t.segments.length&&(i=t.segments[s],n=i.videoTimingInfo?i.videoTimingInfo.transmuxedPresentationEnd:n+i.duration,!(e<=n));s++);var a=t.segments[t.segments.length-1];if(a.videoTimingInfo&&a.videoTimingInfo.transmuxedPresentationEnd<e)return null;if(e>n){if(e>n+a.duration*s9)return null;i=a}return{segment:i,estimatedStart:i.videoTimingInfo?i.videoTimingInfo.transmuxedPresentationStart:n-i.duration,type:i.videoTimingInfo?"accurate":"estimate"}},Zxe=function(e,t){var n,i;try{n=new Date(e),i=new Date(t)}catch{}var s=n.getTime(),a=i.getTime();return(a-s)/1e3},e_e=function(e){if(!e.segments||e.segments.length===0)return!1;for(var t=0;t<e.segments.length;t++){var n=e.segments[t];if(!n.dateTimeObject)return!1}return!0},t_e=function(e){var t=e.playlist,n=e.time,i=n===void 0?void 0:n,s=e.callback;if(!s)throw new Error("getProgramTime: callback must be provided");if(!t||i===void 0)return s({message:"getProgramTime: playlist and time must be provided"});var a=Jxe(i,t);if(!a)return s({message:"valid programTime was not found"});if(a.type==="estimate")return s({message:"Accurate programTime could not be determined. Please seek to e.seekTime and try again",seekTime:a.estimatedStart});var o={mediaSeconds:i},l=Xxe(i,a.segment);return l&&(o.programDateTime=l.toISOString()),s(null,o)},r_e=function r(e){var t=e.programTime,n=e.playlist,i=e.retryCount,s=i===void 0?2:i,a=e.seekTo,o=e.pauseAfterSeek,l=o===void 0?!0:o,u=e.tech,c=e.callback;if(!c)throw new Error("seekToProgramTime: callback must be provided");if(typeof t>"u"||!n||!a)return c({message:"seekToProgramTime: programTime, seekTo and playlist must be provided"});if(!n.endList&&!u.hasStarted_)return c({message:"player must be playing a live stream to start buffering"});if(!e_e(n))return c({message:"programDateTime tags must be provided in the manifest "+n.resolvedUri});var h=Qxe(t,n);if(!h)return c({message:t+" was not found in the stream"});var f=h.segment,g=Zxe(f.dateTimeObject,t);if(h.type==="estimate"){if(s===0)return c({message:t+" is not buffered yet. Try again"});a(h.estimatedStart+g),u.one("seeked",function(){r({programTime:t,playlist:n,retryCount:s-1,seekTo:a,pauseAfterSeek:l,tech:u,callback:c})});return}var v=f.start+g,y=function(){return c(null,u.currentTime())};u.one("seeked",y),l&&u.pause(),a(v)},fw=function(e,t){if(e.readyState===4)return t()},n_e=function(e,t,n){var i=[],s,a=!1,o=function(f,g,v,y){return g.abort(),a=!0,n(f,g,v,y)},l=function(f,g){if(!a){if(f)return o(f,g,"",i);var v=g.responseText.substring(i&&i.byteLength||0,g.responseText.length);if(i=Rge(i,bj(v,!0)),s=s||G0(i),i.length<10||s&&i.length<s+2)return fw(g,function(){return o(f,g,"",i)});var y=MA(i);return y==="ts"&&i.length<188?fw(g,function(){return o(f,g,"",i)}):!y&&i.length<376?fw(g,function(){return o(f,g,"",i)}):o(null,g,y,i)}},u={uri:e,beforeSend:function(f){f.overrideMimeType("text/plain; charset=x-user-defined"),f.addEventListener("progress",function(g){return g.total,g.loaded,gE(f,null,{statusCode:f.status},l)})}},c=t(u,function(h,f){return gE(c,h,f,l)});return c},i_e=Me.EventTarget,a9=Me.mergeOptions,nF=function(e,t){if(!e9(e,t)||e.sidx&&t.sidx&&(e.sidx.offset!==t.sidx.offset||e.sidx.length!==t.sidx.length))return!1;if(!e.sidx&&t.sidx||e.sidx&&!t.sidx||e.segments&&!t.segments||!e.segments&&t.segments)return!1;if(!e.segments&&!t.segments)return!0;for(var n=0;n<e.segments.length;n++){var i=e.segments[n],s=t.segments[n];if(i.uri!==s.uri)return!1;if(!(!i.byterange&&!s.byterange)){var a=i.byterange,o=s.byterange;if(a&&!o||!a&&o||a.offset!==o.offset||a.length!==o.length)return!1}}return!0},s_e=function(e,t,n,i){var s=i.attributes.NAME||n;return"placeholder-uri-"+e+"-"+t+"-"+s},a_e=function(e){var t=e.masterXml,n=e.srcUrl,i=e.clientOffset,s=e.sidxMapping,a=e.previousManifest,o=Tve(t,{manifestUri:n,clientOffset:i,sidxMapping:s,previousManifest:a});return Q7(o,n,s_e),o},o_e=function(e,t){jm(e,function(n,i,s,a){a in t.mediaGroups[i][s]||delete e.mediaGroups[i][s][a]})},l_e=function(e,t,n){for(var i=!0,s=a9(e,{duration:t.duration,minimumUpdatePeriod:t.minimumUpdatePeriod,timelineStarts:t.timelineStarts}),a=0;a<t.playlists.length;a++){var o=t.playlists[a];if(o.sidx){var l=KS(o.sidx);n&&n[l]&&n[l].sidx&&PA(o,n[l].sidx,o.sidx.resolvedUri)}var u=pE(s,o,nF);u&&(s=u,i=!1)}return jm(t,function(c,h,f,g){if(c.playlists&&c.playlists.length){var v=c.playlists[0].id,y=pE(s,c.playlists[0],nF);y&&(s=y,g in s.mediaGroups[h][f]||(s.mediaGroups[h][f][g]=c),s.mediaGroups[h][f][g].playlists[0]=s.playlists[v],i=!1)}}),o_e(s,t),t.minimumUpdatePeriod!==e.minimumUpdatePeriod&&(i=!1),i?null:s},u_e=function(e,t){var n=!e.map&&!t.map,i=n||!!(e.map&&t.map&&e.map.byterange.offset===t.map.byterange.offset&&e.map.byterange.length===t.map.byterange.length);return i&&e.uri===t.uri&&e.byterange.offset===t.byterange.offset&&e.byterange.length===t.byterange.length},iF=function(e,t){var n={};for(var i in e){var s=e[i],a=s.sidx;if(a){var o=KS(a);if(!t[o])break;var l=t[o].sidxInfo;u_e(l,a)&&(n[o]=t[o])}}return n},c_e=function(e,t){var n=iF(e.playlists,t),i=n;return jm(e,function(s,a,o,l){if(s.playlists&&s.playlists.length){var u=s.playlists;i=a9(i,iF(u,t))}}),i},yE=(function(r){Ht(e,r);function e(n,i,s,a){var o;s===void 0&&(s={}),o=r.call(this)||this,o.masterPlaylistLoader_=a||We(o),a||(o.isMaster_=!0);var l=s,u=l.withCredentials,c=u===void 0?!1:u,h=l.handleManifestRedirects,f=h===void 0?!1:h;if(o.vhs_=i,o.withCredentials=c,o.handleManifestRedirects=f,!n)throw new Error("A non-empty playlist URL or object is required");return o.on("minimumUpdatePeriod",function(){o.refreshXml_()}),o.on("mediaupdatetimeout",function(){o.refreshMedia_(o.media().id)}),o.state="HAVE_NOTHING",o.loadedPlaylists_={},o.logger_=zl("DashPlaylistLoader"),o.isMaster_?(o.masterPlaylistLoader_.srcUrl=n,o.masterPlaylistLoader_.sidxMapping_={}):o.childPlaylist_=n,o}var t=e.prototype;return t.requestErrored_=function(i,s,a){if(!this.request)return!0;if(this.request=null,i)return this.error=typeof i=="object"&&!(i instanceof Error)?i:{status:s.status,message:"DASH request error at URL: "+s.uri,response:s.response,code:2},a&&(this.state=a),this.trigger("error"),!0},t.addSidxSegments_=function(i,s,a){var o=this,l=i.sidx&&KS(i.sidx);if(!i.sidx||!l||this.masterPlaylistLoader_.sidxMapping_[l]){this.mediaRequest_=X.setTimeout(function(){return a(!1)},0);return}var u=Ab(this.handleManifestRedirects,i.sidx.resolvedUri),c=function(f,g){if(!o.requestErrored_(f,g,s)){var v=o.masterPlaylistLoader_.sidxMapping_,y;try{y=Ave(Sr(g.response).subarray(8))}catch(_){o.requestErrored_(_,g,s);return}return v[l]={sidxInfo:i.sidx,sidx:y},PA(i,y,i.sidx.resolvedUri),a(!0)}};this.request=n_e(u,this.vhs_.xhr,function(h,f,g,v){if(h)return c(h,f);if(!g||g!=="mp4")return c({status:f.status,message:"Unsupported "+(g||"unknown")+" container type for sidx segment at URL: "+u,response:"",playlist:i,internal:!0,blacklistDuration:1/0,code:2},f);var y=i.sidx.byterange,_=y.offset,C=y.length;if(v.length>=C+_)return c(h,{response:v.subarray(_,_+C),status:f.status,uri:f.uri});o.request=o.vhs_.xhr({uri:u,responseType:"arraybuffer",headers:vE({byterange:i.sidx.byterange})},c)})},t.dispose=function(){this.trigger("dispose"),this.stopRequest(),this.loadedPlaylists_={},X.clearTimeout(this.minimumUpdatePeriodTimeout_),X.clearTimeout(this.mediaRequest_),X.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null,this.mediaRequest_=null,this.minimumUpdatePeriodTimeout_=null,this.masterPlaylistLoader_.createMupOnMedia_&&(this.off("loadedmetadata",this.masterPlaylistLoader_.createMupOnMedia_),this.masterPlaylistLoader_.createMupOnMedia_=null),this.off()},t.hasPendingRequest=function(){return this.request||this.mediaRequest_},t.stopRequest=function(){if(this.request){var i=this.request;this.request=null,i.onreadystatechange=null,i.abort()}},t.media=function(i){var s=this;if(!i)return this.media_;if(this.state==="HAVE_NOTHING")throw new Error("Cannot switch media playlist from "+this.state);var a=this.state;if(typeof i=="string"){if(!this.masterPlaylistLoader_.master.playlists[i])throw new Error("Unknown playlist URI: "+i);i=this.masterPlaylistLoader_.master.playlists[i]}var o=!this.media_||i.id!==this.media_.id;if(o&&this.loadedPlaylists_[i.id]&&this.loadedPlaylists_[i.id].endList){this.state="HAVE_METADATA",this.media_=i,o&&(this.trigger("mediachanging"),this.trigger("mediachange"));return}o&&(this.media_&&this.trigger("mediachanging"),this.addSidxSegments_(i,a,function(l){s.haveMetadata({startingState:a,playlist:i})}))},t.haveMetadata=function(i){var s=i.startingState,a=i.playlist;this.state="HAVE_METADATA",this.loadedPlaylists_[a.id]=a,this.mediaRequest_=null,this.refreshMedia_(a.id),s==="HAVE_MASTER"?this.trigger("loadedmetadata"):this.trigger("mediachange")},t.pause=function(){this.masterPlaylistLoader_.createMupOnMedia_&&(this.off("loadedmetadata",this.masterPlaylistLoader_.createMupOnMedia_),this.masterPlaylistLoader_.createMupOnMedia_=null),this.stopRequest(),X.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null,this.isMaster_&&(X.clearTimeout(this.masterPlaylistLoader_.minimumUpdatePeriodTimeout_),this.masterPlaylistLoader_.minimumUpdatePeriodTimeout_=null),this.state==="HAVE_NOTHING"&&(this.started=!1)},t.load=function(i){var s=this;X.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null;var a=this.media();if(i){var o=a?a.targetDuration/2*1e3:5e3;this.mediaUpdateTimeout=X.setTimeout(function(){return s.load()},o);return}if(!this.started){this.start();return}a&&!a.endList?(this.isMaster_&&!this.minimumUpdatePeriodTimeout_&&(this.trigger("minimumUpdatePeriod"),this.updateMinimumUpdatePeriodTimeout_()),this.trigger("mediaupdatetimeout")):this.trigger("loadedplaylist")},t.start=function(){var i=this;if(this.started=!0,!this.isMaster_){this.mediaRequest_=X.setTimeout(function(){return i.haveMaster_()},0);return}this.requestMaster_(function(s,a){i.haveMaster_(),!i.hasPendingRequest()&&!i.media_&&i.media(i.masterPlaylistLoader_.master.playlists[0])})},t.requestMaster_=function(i){var s=this;this.request=this.vhs_.xhr({uri:this.masterPlaylistLoader_.srcUrl,withCredentials:this.withCredentials},function(a,o){if(s.requestErrored_(a,o)){s.state==="HAVE_NOTHING"&&(s.started=!1);return}var l=o.responseText!==s.masterPlaylistLoader_.masterXml_;if(s.masterPlaylistLoader_.masterXml_=o.responseText,o.responseHeaders&&o.responseHeaders.date?s.masterLoaded_=Date.parse(o.responseHeaders.date):s.masterLoaded_=Date.now(),s.masterPlaylistLoader_.srcUrl=Ab(s.handleManifestRedirects,s.masterPlaylistLoader_.srcUrl,o),l){s.handleMaster_(),s.syncClientServerClock_(function(){return i(o,l)});return}return i(o,l)})},t.syncClientServerClock_=function(i){var s=this,a=Cve(this.masterPlaylistLoader_.masterXml_);if(a===null)return this.masterPlaylistLoader_.clientOffset_=this.masterLoaded_-Date.now(),i();if(a.method==="DIRECT")return this.masterPlaylistLoader_.clientOffset_=a.value-Date.now(),i();this.request=this.vhs_.xhr({uri:Al(this.masterPlaylistLoader_.srcUrl,a.value),method:a.method,withCredentials:this.withCredentials},function(o,l){if(s.request){if(o)return s.masterPlaylistLoader_.clientOffset_=s.masterLoaded_-Date.now(),i();var u;a.method==="HEAD"?!l.responseHeaders||!l.responseHeaders.date?u=s.masterLoaded_:u=Date.parse(l.responseHeaders.date):u=Date.parse(l.responseText),s.masterPlaylistLoader_.clientOffset_=u-Date.now(),i()}})},t.haveMaster_=function(){this.state="HAVE_MASTER",this.isMaster_?this.trigger("loadedplaylist"):this.media_||this.media(this.childPlaylist_)},t.handleMaster_=function(){this.mediaRequest_=null;var i=this.masterPlaylistLoader_.master,s=a_e({masterXml:this.masterPlaylistLoader_.masterXml_,srcUrl:this.masterPlaylistLoader_.srcUrl,clientOffset:this.masterPlaylistLoader_.clientOffset_,sidxMapping:this.masterPlaylistLoader_.sidxMapping_,previousManifest:i});i&&(s=l_e(i,s,this.masterPlaylistLoader_.sidxMapping_)),this.masterPlaylistLoader_.master=s||i;var a=this.masterPlaylistLoader_.master.locations&&this.masterPlaylistLoader_.master.locations[0];return a&&a!==this.masterPlaylistLoader_.srcUrl&&(this.masterPlaylistLoader_.srcUrl=a),(!i||s&&s.minimumUpdatePeriod!==i.minimumUpdatePeriod)&&this.updateMinimumUpdatePeriodTimeout_(),!!s},t.updateMinimumUpdatePeriodTimeout_=function(){var i=this.masterPlaylistLoader_;i.createMupOnMedia_&&(i.off("loadedmetadata",i.createMupOnMedia_),i.createMupOnMedia_=null),i.minimumUpdatePeriodTimeout_&&(X.clearTimeout(i.minimumUpdatePeriodTimeout_),i.minimumUpdatePeriodTimeout_=null);var s=i.master&&i.master.minimumUpdatePeriod;if(s===0&&(i.media()?s=i.media().targetDuration*1e3:(i.createMupOnMedia_=i.updateMinimumUpdatePeriodTimeout_,i.one("loadedmetadata",i.createMupOnMedia_))),typeof s!="number"||s<=0){s<0&&this.logger_("found invalid minimumUpdatePeriod of "+s+", not setting a timeout");return}this.createMUPTimeout_(s)},t.createMUPTimeout_=function(i){var s=this.masterPlaylistLoader_;s.minimumUpdatePeriodTimeout_=X.setTimeout(function(){s.minimumUpdatePeriodTimeout_=null,s.trigger("minimumUpdatePeriod"),s.createMUPTimeout_(i)},i)},t.refreshXml_=function(){var i=this;this.requestMaster_(function(s,a){a&&(i.media_&&(i.media_=i.masterPlaylistLoader_.master.playlists[i.media_.id]),i.masterPlaylistLoader_.sidxMapping_=c_e(i.masterPlaylistLoader_.master,i.masterPlaylistLoader_.sidxMapping_),i.addSidxSegments_(i.media(),i.state,function(o){i.refreshMedia_(i.media().id)}))})},t.refreshMedia_=function(i){var s=this;if(!i)throw new Error("refreshMedia_ must take a media id");this.media_&&this.isMaster_&&this.handleMaster_();var a=this.masterPlaylistLoader_.master.playlists,o=!this.media_||this.media_!==a[i];if(o?this.media_=a[i]:this.trigger("playlistunchanged"),!this.mediaUpdateTimeout){var l=function u(){s.media().endList||(s.mediaUpdateTimeout=X.setTimeout(function(){s.trigger("mediaupdatetimeout"),u()},mE(s.media(),!!o)))};l()}this.trigger("loadedplaylist")},e})(i_e),es={GOAL_BUFFER_LENGTH:30,MAX_GOAL_BUFFER_LENGTH:60,BACK_BUFFER_LENGTH:30,GOAL_BUFFER_LENGTH_RATE:1,INITIAL_BANDWIDTH:4194304,BANDWIDTH_VARIANCE:1.2,BUFFER_LOW_WATER_LINE:0,MAX_BUFFER_LOW_WATER_LINE:30,EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE:16,BUFFER_LOW_WATER_LINE_RATE:1,BUFFER_HIGH_WATER_LINE:30},d_e=function(e){for(var t=new Uint8Array(new ArrayBuffer(e.length)),n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t.buffer},o9=function(e){return e.on=e.addEventListener,e.off=e.removeEventListener,e},h_e=function(e){try{return URL.createObjectURL(new Blob([e],{type:"application/javascript"}))}catch{var t=new BlobBuilder;return t.append(e),URL.createObjectURL(t.getBlob())}},l9=function(e){return function(){var t=h_e(e),n=o9(new Worker(t));n.objURL=t;var i=n.terminate;return n.on=n.addEventListener,n.off=n.removeEventListener,n.terminate=function(){return URL.revokeObjectURL(t),i.call(this)},n}},u9=function(e){return"var browserWorkerPolyFill = "+o9.toString()+`;
browserWorkerPolyFill(self);
`+e},c9=function(e){return e.toString().replace(/^function.+?{/,"").slice(0,-1)},f_e=u9(c9(function(){var r=function(){this.init=function(){var F={};this.on=function(H,z){F[H]||(F[H]=[]),F[H]=F[H].concat(z)},this.off=function(H,z){var q;return F[H]?(q=F[H].indexOf(z),F[H]=F[H].slice(),F[H].splice(q,1),q>-1):!1},this.trigger=function(H){var z,q,Z,te;if(z=F[H],!!z)if(arguments.length===2)for(Z=z.length,q=0;q<Z;++q)z[q].call(this,arguments[1]);else{for(te=[],q=arguments.length,q=1;q<arguments.length;++q)te.push(arguments[q]);for(Z=z.length,q=0;q<Z;++q)z[q].apply(this,te)}},this.dispose=function(){F={}}}};r.prototype.pipe=function(le){return this.on("data",function(F){le.push(F)}),this.on("done",function(F){le.flush(F)}),this.on("partialdone",function(F){le.partialFlush(F)}),this.on("endedtimeline",function(F){le.endTimeline(F)}),this.on("reset",function(F){le.reset(F)}),le},r.prototype.push=function(le){this.trigger("data",le)},r.prototype.flush=function(le){this.trigger("done",le)},r.prototype.partialFlush=function(le){this.trigger("partialdone",le)},r.prototype.endTimeline=function(le){this.trigger("endedtimeline",le)},r.prototype.reset=function(le){this.trigger("reset",le)};var e=r,t=Math.pow(2,32),n=function(F){var H=new DataView(F.buffer,F.byteOffset,F.byteLength),z;return H.getBigUint64?(z=H.getBigUint64(0),z<Number.MAX_SAFE_INTEGER?Number(z):z):H.getUint32(0)*t+H.getUint32(4)},i={getUint64:n,MAX_UINT32:t},s=i.MAX_UINT32,a,o,l,u,c,h,f,g,v,y,_,C,E,D,I,k,P,N,U,B,A,$,W,V,Q,ie,ne,ue,se,ae,ce,ee,pe,me,ye,Oe;(function(){var le;if(W={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],mvex:[],mvhd:[],pasp:[],sdtp:[],smhd:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],styp:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[]},!(typeof Uint8Array>"u")){for(le in W)W.hasOwnProperty(le)&&(W[le]=[le.charCodeAt(0),le.charCodeAt(1),le.charCodeAt(2),le.charCodeAt(3)]);V=new Uint8Array([105,115,111,109]),ie=new Uint8Array([97,118,99,49]),Q=new Uint8Array([0,0,0,1]),ne=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),ue=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]),se={video:ne,audio:ue},ee=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),ce=new Uint8Array([0,0,0,0,0,0,0,0]),pe=new Uint8Array([0,0,0,0,0,0,0,0]),me=pe,ye=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),Oe=pe,ae=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0])}})(),a=function(F){var H=[],z=0,q,Z,te;for(q=1;q<arguments.length;q++)H.push(arguments[q]);for(q=H.length;q--;)z+=H[q].byteLength;for(Z=new Uint8Array(z+8),te=new DataView(Z.buffer,Z.byteOffset,Z.byteLength),te.setUint32(0,Z.byteLength),Z.set(F,4),q=0,z=8;q<H.length;q++)Z.set(H[q],z),z+=H[q].byteLength;return Z},o=function(){return a(W.dinf,a(W.dref,ee))},l=function(F){return a(W.esds,new Uint8Array([0,0,0,0,3,25,0,0,0,4,17,64,21,0,6,0,0,0,218,192,0,0,218,192,5,2,F.audioobjecttype<<3|F.samplingfrequencyindex>>>1,F.samplingfrequencyindex<<7|F.channelcount<<3,6,1,2]))},u=function(){return a(W.ftyp,V,Q,V,ie)},k=function(F){return a(W.hdlr,se[F])},c=function(F){return a(W.mdat,F)},I=function(F){var H=new Uint8Array([0,0,0,0,0,0,0,2,0,0,0,3,0,1,95,144,F.duration>>>24&255,F.duration>>>16&255,F.duration>>>8&255,F.duration&255,85,196,0,0]);return F.samplerate&&(H[12]=F.samplerate>>>24&255,H[13]=F.samplerate>>>16&255,H[14]=F.samplerate>>>8&255,H[15]=F.samplerate&255),a(W.mdhd,H)},D=function(F){return a(W.mdia,I(F),k(F.type),f(F))},h=function(F){return a(W.mfhd,new Uint8Array([0,0,0,0,(F&4278190080)>>24,(F&16711680)>>16,(F&65280)>>8,F&255]))},f=function(F){return a(W.minf,F.type==="video"?a(W.vmhd,ae):a(W.smhd,ce),o(),N(F))},g=function(F,H){for(var z=[],q=H.length;q--;)z[q]=B(H[q]);return a.apply(null,[W.moof,h(F)].concat(z))},v=function(F){for(var H=F.length,z=[];H--;)z[H]=C(F[H]);return a.apply(null,[W.moov,_(4294967295)].concat(z).concat(y(F)))},y=function(F){for(var H=F.length,z=[];H--;)z[H]=A(F[H]);return a.apply(null,[W.mvex].concat(z))},_=function(F){var H=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,2,0,1,95,144,(F&4278190080)>>24,(F&16711680)>>16,(F&65280)>>8,F&255,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return a(W.mvhd,H)},P=function(F){var H=F.samples||[],z=new Uint8Array(4+H.length),q,Z;for(Z=0;Z<H.length;Z++)q=H[Z].flags,z[Z+4]=q.dependsOn<<4|q.isDependedOn<<2|q.hasRedundancy;return a(W.sdtp,z)},N=function(F){return a(W.stbl,U(F),a(W.stts,Oe),a(W.stsc,me),a(W.stsz,ye),a(W.stco,pe))},(function(){var le,F;U=function(z){return a(W.stsd,new Uint8Array([0,0,0,0,0,0,0,1]),z.type==="video"?le(z):F(z))},le=function(z){var q=z.sps||[],Z=z.pps||[],te=[],ge=[],_e,De;for(_e=0;_e<q.length;_e++)te.push((q[_e].byteLength&65280)>>>8),te.push(q[_e].byteLength&255),te=te.concat(Array.prototype.slice.call(q[_e]));for(_e=0;_e<Z.length;_e++)ge.push((Z[_e].byteLength&65280)>>>8),ge.push(Z[_e].byteLength&255),ge=ge.concat(Array.prototype.slice.call(Z[_e]));if(De=[W.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,(z.width&65280)>>8,z.width&255,(z.height&65280)>>8,z.height&255,0,72,0,0,0,72,0,0,0,0,0,0,0,1,19,118,105,100,101,111,106,115,45,99,111,110,116,114,105,98,45,104,108,115,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),a(W.avcC,new Uint8Array([1,z.profileIdc,z.profileCompatibility,z.levelIdc,255].concat([q.length],te,[Z.length],ge))),a(W.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192]))],z.sarRatio){var we=z.sarRatio[0],Re=z.sarRatio[1];De.push(a(W.pasp,new Uint8Array([(we&4278190080)>>24,(we&16711680)>>16,(we&65280)>>8,we&255,(Re&4278190080)>>24,(Re&16711680)>>16,(Re&65280)>>8,Re&255])))}return a.apply(null,De)},F=function(z){return a(W.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,(z.channelcount&65280)>>8,z.channelcount&255,(z.samplesize&65280)>>8,z.samplesize&255,0,0,0,0,(z.samplerate&65280)>>8,z.samplerate&255,0,0]),l(z))}})(),E=function(F){var H=new Uint8Array([0,0,0,7,0,0,0,0,0,0,0,0,(F.id&4278190080)>>24,(F.id&16711680)>>16,(F.id&65280)>>8,F.id&255,0,0,0,0,(F.duration&4278190080)>>24,(F.duration&16711680)>>16,(F.duration&65280)>>8,F.duration&255,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,(F.width&65280)>>8,F.width&255,0,0,(F.height&65280)>>8,F.height&255,0,0]);return a(W.tkhd,H)},B=function(F){var H,z,q,Z,te,ge,_e;return H=a(W.tfhd,new Uint8Array([0,0,0,58,(F.id&4278190080)>>24,(F.id&16711680)>>16,(F.id&65280)>>8,F.id&255,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0])),ge=Math.floor(F.baseMediaDecodeTime/s),_e=Math.floor(F.baseMediaDecodeTime%s),z=a(W.tfdt,new Uint8Array([1,0,0,0,ge>>>24&255,ge>>>16&255,ge>>>8&255,ge&255,_e>>>24&255,_e>>>16&255,_e>>>8&255,_e&255])),te=92,F.type==="audio"?(q=$(F,te),a(W.traf,H,z,q)):(Z=P(F),q=$(F,Z.length+te),a(W.traf,H,z,q,Z))},C=function(F){return F.duration=F.duration||4294967295,a(W.trak,E(F),D(F))},A=function(F){var H=new Uint8Array([0,0,0,0,(F.id&4278190080)>>24,(F.id&16711680)>>16,(F.id&65280)>>8,F.id&255,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]);return F.type!=="video"&&(H[H.length-1]=0),a(W.trex,H)},(function(){var le,F,H;H=function(q,Z){var te=0,ge=0,_e=0,De=0;return q.length&&(q[0].duration!==void 0&&(te=1),q[0].size!==void 0&&(ge=2),q[0].flags!==void 0&&(_e=4),q[0].compositionTimeOffset!==void 0&&(De=8)),[0,0,te|ge|_e|De,1,(q.length&4278190080)>>>24,(q.length&16711680)>>>16,(q.length&65280)>>>8,q.length&255,(Z&4278190080)>>>24,(Z&16711680)>>>16,(Z&65280)>>>8,Z&255]},F=function(q,Z){var te,ge,_e,De,we,Re;for(De=q.samples||[],Z+=20+16*De.length,_e=H(De,Z),ge=new Uint8Array(_e.length+De.length*16),ge.set(_e),te=_e.length,Re=0;Re<De.length;Re++)we=De[Re],ge[te++]=(we.duration&4278190080)>>>24,ge[te++]=(we.duration&16711680)>>>16,ge[te++]=(we.duration&65280)>>>8,ge[te++]=we.duration&255,ge[te++]=(we.size&4278190080)>>>24,ge[te++]=(we.size&16711680)>>>16,ge[te++]=(we.size&65280)>>>8,ge[te++]=we.size&255,ge[te++]=we.flags.isLeading<<2|we.flags.dependsOn,ge[te++]=we.flags.isDependedOn<<6|we.flags.hasRedundancy<<4|we.flags.paddingValue<<1|we.flags.isNonSyncSample,ge[te++]=we.flags.degradationPriority&61440,ge[te++]=we.flags.degradationPriority&15,ge[te++]=(we.compositionTimeOffset&4278190080)>>>24,ge[te++]=(we.compositionTimeOffset&16711680)>>>16,ge[te++]=(we.compositionTimeOffset&65280)>>>8,ge[te++]=we.compositionTimeOffset&255;return a(W.trun,ge)},le=function(q,Z){var te,ge,_e,De,we,Re;for(De=q.samples||[],Z+=20+8*De.length,_e=H(De,Z),te=new Uint8Array(_e.length+De.length*8),te.set(_e),ge=_e.length,Re=0;Re<De.length;Re++)we=De[Re],te[ge++]=(we.duration&4278190080)>>>24,te[ge++]=(we.duration&16711680)>>>16,te[ge++]=(we.duration&65280)>>>8,te[ge++]=we.duration&255,te[ge++]=(we.size&4278190080)>>>24,te[ge++]=(we.size&16711680)>>>16,te[ge++]=(we.size&65280)>>>8,te[ge++]=we.size&255;return a(W.trun,te)},$=function(q,Z){return q.type==="audio"?le(q,Z):F(q,Z)}})();var Le={ftyp:u,mdat:c,moof:g,moov:v,initSegment:function(F){var H=u(),z=v(F),q;return q=new Uint8Array(H.byteLength+z.byteLength),q.set(H),q.set(z,H.byteLength),q}},st=function(F){var H,z,q=[],Z=[];for(Z.byteLength=0,Z.nalCount=0,Z.duration=0,q.byteLength=0,H=0;H<F.length;H++)z=F[H],z.nalUnitType==="access_unit_delimiter_rbsp"?(q.length&&(q.duration=z.dts-q.dts,Z.byteLength+=q.byteLength,Z.nalCount+=q.length,Z.duration+=q.duration,Z.push(q)),q=[z],q.byteLength=z.data.byteLength,q.pts=z.pts,q.dts=z.dts):(z.nalUnitType==="slice_layer_without_partitioning_rbsp_idr"&&(q.keyFrame=!0),q.duration=z.dts-q.dts,q.byteLength+=z.data.byteLength,q.push(z));return Z.length&&(!q.duration||q.duration<=0)&&(q.duration=Z[Z.length-1].duration),Z.byteLength+=q.byteLength,Z.nalCount+=q.length,Z.duration+=q.duration,Z.push(q),Z},ze=function(F){var H,z,q=[],Z=[];for(q.byteLength=0,q.nalCount=0,q.duration=0,q.pts=F[0].pts,q.dts=F[0].dts,Z.byteLength=0,Z.nalCount=0,Z.duration=0,Z.pts=F[0].pts,Z.dts=F[0].dts,H=0;H<F.length;H++)z=F[H],z.keyFrame?(q.length&&(Z.push(q),Z.byteLength+=q.byteLength,Z.nalCount+=q.nalCount,Z.duration+=q.duration),q=[z],q.nalCount=z.length,q.byteLength=z.byteLength,q.pts=z.pts,q.dts=z.dts,q.duration=z.duration):(q.duration+=z.duration,q.nalCount+=z.length,q.byteLength+=z.byteLength,q.push(z));return Z.length&&q.duration<=0&&(q.duration=Z[Z.length-1].duration),Z.byteLength+=q.byteLength,Z.nalCount+=q.nalCount,Z.duration+=q.duration,Z.push(q),Z},pt=function(F){var H;return!F[0][0].keyFrame&&F.length>1&&(H=F.shift(),F.byteLength-=H.byteLength,F.nalCount-=H.nalCount,F[0][0].dts=H.dts,F[0][0].pts=H.pts,F[0][0].duration+=H.duration),F},Ye=function(){return{size:0,flags:{isLeading:0,dependsOn:1,isDependedOn:0,hasRedundancy:0,degradationPriority:0,isNonSyncSample:1}}},Pt=function(F,H){var z=Ye();return z.dataOffset=H,z.compositionTimeOffset=F.pts-F.dts,z.duration=F.duration,z.size=4*F.length,z.size+=F.byteLength,F.keyFrame&&(z.flags.dependsOn=2,z.flags.isNonSyncSample=0),z},Rt=function(F,H){var z,q,Z,te,ge,_e=H||0,De=[];for(z=0;z<F.length;z++)for(te=F[z],q=0;q<te.length;q++)ge=te[q],Z=Pt(ge,_e),_e+=Z.size,De.push(Z);return De},Ve=function(F){var H,z,q,Z,te,ge,_e=0,De=F.byteLength,we=F.nalCount,Re=De+4*we,at=new Uint8Array(Re),Mt=new DataView(at.buffer);for(H=0;H<F.length;H++)for(Z=F[H],z=0;z<Z.length;z++)for(te=Z[z],q=0;q<te.length;q++)ge=te[q],Mt.setUint32(_e,ge.data.byteLength),_e+=4,at.set(ge.data,_e),_e+=ge.data.byteLength;return at},Ne=function(F,H){var z,q=H||0,Z=[];return z=Pt(F,q),Z.push(z),Z},Ie=function(F){var H,z,q=0,Z=F.byteLength,te=F.length,ge=Z+4*te,_e=new Uint8Array(ge),De=new DataView(_e.buffer);for(H=0;H<F.length;H++)z=F[H],De.setUint32(q,z.data.byteLength),q+=4,_e.set(z.data,q),q+=z.data.byteLength;return _e},Ue={groupNalsIntoFrames:st,groupFramesIntoGops:ze,extendFirstKeyFrame:pt,generateSampleTable:Rt,concatenateNalData:Ve,generateSampleTableForFrame:Ne,concatenateNalDataForFrame:Ie},et=[33,16,5,32,164,27],ot=[33,65,108,84,1,2,4,8,168,2,4,8,17,191,252],dt=function(F){for(var H=[];F--;)H.push(0);return H},it=function(F){return Object.keys(F).reduce(function(H,z){return H[z]=new Uint8Array(F[z].reduce(function(q,Z){return q.concat(Z)},[])),H},{})},bt,lt=function(){if(!bt){var F={96e3:[et,[227,64],dt(154),[56]],88200:[et,[231],dt(170),[56]],64e3:[et,[248,192],dt(240),[56]],48e3:[et,[255,192],dt(268),[55,148,128],dt(54),[112]],44100:[et,[255,192],dt(268),[55,163,128],dt(84),[112]],32e3:[et,[255,192],dt(268),[55,234],dt(226),[112]],24e3:[et,[255,192],dt(268),[55,255,128],dt(268),[111,112],dt(126),[224]],16e3:[et,[255,192],dt(268),[55,255,128],dt(268),[111,255],dt(269),[223,108],dt(195),[1,192]],12e3:[ot,dt(268),[3,127,248],dt(268),[6,255,240],dt(268),[13,255,224],dt(268),[27,253,128],dt(259),[56]],11025:[ot,dt(268),[3,127,248],dt(268),[6,255,240],dt(268),[13,255,224],dt(268),[27,255,192],dt(268),[55,175,128],dt(108),[112]],8e3:[ot,dt(268),[3,121,16],dt(47),[7]]};bt=it(F)}return bt},gr=9e4,hr,Rr,nr,qt,fr,yr,Lr;hr=function(F){return F*gr},Rr=function(F,H){return F*H},nr=function(F){return F/gr},qt=function(F,H){return F/H},fr=function(F,H){return hr(qt(F,H))},yr=function(F,H){return Rr(nr(F),H)},Lr=function(F,H,z){return nr(z?F:F-H)};var vt={ONE_SECOND_IN_TS:gr,secondsToVideoTs:hr,secondsToAudioTs:Rr,videoTsToSeconds:nr,audioTsToSeconds:qt,audioTsToVideoTs:fr,videoTsToAudioTs:yr,metadataTsToSeconds:Lr},Ut=function(F){var H,z,q=0;for(H=0;H<F.length;H++)z=F[H],q+=z.data.byteLength;return q},rn=function(F,H,z,q){var Z,te=0,ge=0,_e=0,De=0,we,Re,at;if(H.length&&(Z=vt.audioTsToVideoTs(F.baseMediaDecodeTime,F.samplerate),te=Math.ceil(vt.ONE_SECOND_IN_TS/(F.samplerate/1024)),z&&q&&(ge=Z-Math.max(z,q),_e=Math.floor(ge/te),De=_e*te),!(_e<1||De>vt.ONE_SECOND_IN_TS/2))){for(we=lt()[F.samplerate],we||(we=H[0].data),Re=0;Re<_e;Re++)at=H[0],H.splice(0,0,{data:we,dts:at.dts-te,pts:at.pts-te});return F.baseMediaDecodeTime-=Math.floor(vt.videoTsToAudioTs(De,F.samplerate)),De}},jt=function(F,H,z){return H.minSegmentDts>=z?F:(H.minSegmentDts=1/0,F.filter(function(q){return q.dts>=z?(H.minSegmentDts=Math.min(H.minSegmentDts,q.dts),H.minSegmentPts=H.minSegmentDts,!0):!1}))},br=function(F){var H,z,q=[];for(H=0;H<F.length;H++)z=F[H],q.push({size:z.data.byteLength,duration:1024});return q},Or=function(F){var H,z,q=0,Z=new Uint8Array(Ut(F));for(H=0;H<F.length;H++)z=F[H],Z.set(z.data,q),q+=z.data.byteLength;return Z},Hr={prefixWithSilence:rn,trimAdtsFramesByEarliestDts:jt,generateSampleTable:br,concatenateFrameData:Or},ln=vt.ONE_SECOND_IN_TS,Cn=function(F,H){typeof H.pts=="number"&&(F.timelineStartInfo.pts===void 0&&(F.timelineStartInfo.pts=H.pts),F.minSegmentPts===void 0?F.minSegmentPts=H.pts:F.minSegmentPts=Math.min(F.minSegmentPts,H.pts),F.maxSegmentPts===void 0?F.maxSegmentPts=H.pts:F.maxSegmentPts=Math.max(F.maxSegmentPts,H.pts)),typeof H.dts=="number"&&(F.timelineStartInfo.dts===void 0&&(F.timelineStartInfo.dts=H.dts),F.minSegmentDts===void 0?F.minSegmentDts=H.dts:F.minSegmentDts=Math.min(F.minSegmentDts,H.dts),F.maxSegmentDts===void 0?F.maxSegmentDts=H.dts:F.maxSegmentDts=Math.max(F.maxSegmentDts,H.dts))},wn=function(F){delete F.minSegmentDts,delete F.maxSegmentDts,delete F.minSegmentPts,delete F.maxSegmentPts},Fr=function(F,H){var z,q,Z=F.minSegmentDts;return H||(Z-=F.timelineStartInfo.dts),z=F.timelineStartInfo.baseMediaDecodeTime,z+=Z,z=Math.max(0,z),F.type==="audio"&&(q=F.samplerate/ln,z*=q,z=Math.floor(z)),z},oe={clearDtsInfo:wn,calculateTrackBaseMediaDecodeTime:Fr,collectDtsInfo:Cn},fe=4,Te=128,je=function(F){for(var H=0,z={payloadType:-1,payloadSize:0},q=0,Z=0;H<F.byteLength&&F[H]!==Te;){for(;F[H]===255;)q+=255,H++;for(q+=F[H++];F[H]===255;)Z+=255,H++;if(Z+=F[H++],!z.payload&&q===fe){var te=String.fromCharCode(F[H+3],F[H+4],F[H+5],F[H+6]);if(te==="GA94"){z.payloadType=q,z.payloadSize=Z,z.payload=F.subarray(H,H+Z);break}else z.payload=void 0}H+=Z,q=0,Z=0}return z},mt=function(F){return F.payload[0]!==181||(F.payload[1]<<8|F.payload[2])!==49||String.fromCharCode(F.payload[3],F.payload[4],F.payload[5],F.payload[6])!=="GA94"||F.payload[7]!==3?null:F.payload.subarray(8,F.payload.length-1)},St=function(F,H){var z=[],q,Z,te,ge;if(!(H[0]&64))return z;for(Z=H[0]&31,q=0;q<Z;q++)te=q*3,ge={type:H[te+2]&3,pts:F},H[te+2]&4&&(ge.ccData=H[te+3]<<8|H[te+4],z.push(ge));return z},be=function(F){for(var H=F.byteLength,z=[],q=1,Z,te;q<H-2;)F[q]===0&&F[q+1]===0&&F[q+2]===3?(z.push(q+2),q+=2):q++;if(z.length===0)return F;Z=H-z.length,te=new Uint8Array(Z);var ge=0;for(q=0;q<Z;ge++,q++)ge===z[0]&&(ge++,z.shift()),te[q]=F[ge];return te},xe={parseSei:je,parseUserData:mt,parseCaptionPackets:St,discardEmulationPreventionBytes:be,USER_DATA_REGISTERED_ITU_T_T35:fe},Ae=function le(F){F=F||{},le.prototype.init.call(this),this.parse708captions_=typeof F.parse708captions=="boolean"?F.parse708captions:!0,this.captionPackets_=[],this.ccStreams_=[new xr(0,0),new xr(0,1),new xr(1,0),new xr(1,1)],this.parse708captions_&&(this.cc708Stream_=new yt({captionServices:F.captionServices})),this.reset(),this.ccStreams_.forEach(function(H){H.on("data",this.trigger.bind(this,"data")),H.on("partialdone",this.trigger.bind(this,"partialdone")),H.on("done",this.trigger.bind(this,"done"))},this),this.parse708captions_&&(this.cc708Stream_.on("data",this.trigger.bind(this,"data")),this.cc708Stream_.on("partialdone",this.trigger.bind(this,"partialdone")),this.cc708Stream_.on("done",this.trigger.bind(this,"done")))};Ae.prototype=new e,Ae.prototype.push=function(le){var F,H,z;if(le.nalUnitType==="sei_rbsp"&&(F=xe.parseSei(le.escapedRBSP),!!F.payload&&F.payloadType===xe.USER_DATA_REGISTERED_ITU_T_T35&&(H=xe.parseUserData(F),!!H))){if(le.dts<this.latestDts_){this.ignoreNextEqualDts_=!0;return}else if(le.dts===this.latestDts_&&this.ignoreNextEqualDts_){this.numSameDts_--,this.numSameDts_||(this.ignoreNextEqualDts_=!1);return}z=xe.parseCaptionPackets(le.pts,H),this.captionPackets_=this.captionPackets_.concat(z),this.latestDts_!==le.dts&&(this.numSameDts_=0),this.numSameDts_++,this.latestDts_=le.dts}},Ae.prototype.flushCCStreams=function(le){this.ccStreams_.forEach(function(F){return le==="flush"?F.flush():F.partialFlush()},this)},Ae.prototype.flushStream=function(le){if(!this.captionPackets_.length){this.flushCCStreams(le);return}this.captionPackets_.forEach(function(F,H){F.presortIndex=H}),this.captionPackets_.sort(function(F,H){return F.pts===H.pts?F.presortIndex-H.presortIndex:F.pts-H.pts}),this.captionPackets_.forEach(function(F){F.type<2?this.dispatchCea608Packet(F):this.dispatchCea708Packet(F)},this),this.captionPackets_.length=0,this.flushCCStreams(le)},Ae.prototype.flush=function(){return this.flushStream("flush")},Ae.prototype.partialFlush=function(){return this.flushStream("partialFlush")},Ae.prototype.reset=function(){this.latestDts_=null,this.ignoreNextEqualDts_=!1,this.numSameDts_=0,this.activeCea608Channel_=[null,null],this.ccStreams_.forEach(function(le){le.reset()})},Ae.prototype.dispatchCea608Packet=function(le){this.setsTextOrXDSActive(le)?this.activeCea608Channel_[le.type]=null:this.setsChannel1Active(le)?this.activeCea608Channel_[le.type]=0:this.setsChannel2Active(le)&&(this.activeCea608Channel_[le.type]=1),this.activeCea608Channel_[le.type]!==null&&this.ccStreams_[(le.type<<1)+this.activeCea608Channel_[le.type]].push(le)},Ae.prototype.setsChannel1Active=function(le){return(le.ccData&30720)===4096},Ae.prototype.setsChannel2Active=function(le){return(le.ccData&30720)===6144},Ae.prototype.setsTextOrXDSActive=function(le){return(le.ccData&28928)===256||(le.ccData&30974)===4138||(le.ccData&30974)===6186},Ae.prototype.dispatchCea708Packet=function(le){this.parse708captions_&&this.cc708Stream_.push(le)};var Ke={127:9834,4128:32,4129:160,4133:8230,4138:352,4140:338,4144:9608,4145:8216,4146:8217,4147:8220,4148:8221,4149:8226,4153:8482,4154:353,4156:339,4157:8480,4159:376,4214:8539,4215:8540,4216:8541,4217:8542,4218:9168,4219:9124,4220:9123,4221:9135,4222:9126,4223:9121,4256:12600},Xe=function(F){var H=Ke[F]||F;return F&4096&&F===H?"":String.fromCharCode(H)},_t=function(F){return 32<=F&&F<=127||160<=F&&F<=255},Lt=function(F){this.windowNum=F,this.reset()};Lt.prototype.reset=function(){this.clearText(),this.pendingNewLine=!1,this.winAttr={},this.penAttr={},this.penLoc={},this.penColor={},this.visible=0,this.rowLock=0,this.columnLock=0,this.priority=0,this.relativePositioning=0,this.anchorVertical=0,this.anchorHorizontal=0,this.anchorPoint=0,this.rowCount=1,this.virtualRowCount=this.rowCount+1,this.columnCount=41,this.windowStyle=0,this.penStyle=0},Lt.prototype.getText=function(){return this.rows.join(`
`)},Lt.prototype.clearText=function(){this.rows=[""],this.rowIdx=0},Lt.prototype.newLine=function(le){for(this.rows.length>=this.virtualRowCount&&typeof this.beforeRowOverflow=="function"&&this.beforeRowOverflow(le),this.rows.length>0&&(this.rows.push(""),this.rowIdx++);this.rows.length>this.virtualRowCount;)this.rows.shift(),this.rowIdx--},Lt.prototype.isEmpty=function(){return this.rows.length===0?!0:this.rows.length===1?this.rows[0]==="":!1},Lt.prototype.addText=function(le){this.rows[this.rowIdx]+=le},Lt.prototype.backspace=function(){if(!this.isEmpty()){var le=this.rows[this.rowIdx];this.rows[this.rowIdx]=le.substr(0,le.length-1)}};var ct=function(F,H,z){this.serviceNum=F,this.text="",this.currentWindow=new Lt(-1),this.windows=[],this.stream=z,typeof H=="string"&&this.createTextDecoder(H)};ct.prototype.init=function(le,F){this.startPts=le;for(var H=0;H<8;H++)this.windows[H]=new Lt(H),typeof F=="function"&&(this.windows[H].beforeRowOverflow=F)},ct.prototype.setCurrentWindow=function(le){this.currentWindow=this.windows[le]},ct.prototype.createTextDecoder=function(le){if(typeof TextDecoder>"u")this.stream.trigger("log",{level:"warn",message:"The `encoding` option is unsupported without TextDecoder support"});else try{this.textDecoder_=new TextDecoder(le)}catch(F){this.stream.trigger("log",{level:"warn",message:"TextDecoder could not be created with "+le+" encoding. "+F})}};var yt=function le(F){F=F||{},le.prototype.init.call(this);var H=this,z=F.captionServices||{},q={},Z;Object.keys(z).forEach(function(te){Z=z[te],/^SERVICE/.test(te)&&(q[te]=Z.encoding)}),this.serviceEncodings=q,this.current708Packet=null,this.services={},this.push=function(te){te.type===3?(H.new708Packet(),H.add708Bytes(te)):(H.current708Packet===null&&H.new708Packet(),H.add708Bytes(te))}};yt.prototype=new e,yt.prototype.new708Packet=function(){this.current708Packet!==null&&this.push708Packet(),this.current708Packet={data:[],ptsVals:[]}},yt.prototype.add708Bytes=function(le){var F=le.ccData,H=F>>>8,z=F&255;this.current708Packet.ptsVals.push(le.pts),this.current708Packet.data.push(H),this.current708Packet.data.push(z)},yt.prototype.push708Packet=function(){var le=this.current708Packet,F=le.data,H=null,z=null,q=0,Z=F[q++];for(le.seq=Z>>6,le.sizeCode=Z&63;q<F.length;q++)Z=F[q++],H=Z>>5,z=Z&31,H===7&&z>0&&(Z=F[q++],H=Z),this.pushServiceBlock(H,q,z),z>0&&(q+=z-1)},yt.prototype.pushServiceBlock=function(le,F,H){var z,q=F,Z=this.current708Packet.data,te=this.services[le];for(te||(te=this.initService(le,q));q<F+H&&q<Z.length;q++)z=Z[q],_t(z)?q=this.handleText(q,te):z===24?q=this.multiByteCharacter(q,te):z===16?q=this.extendedCommands(q,te):128<=z&&z<=135?q=this.setCurrentWindow(q,te):152<=z&&z<=159?q=this.defineWindow(q,te):z===136?q=this.clearWindows(q,te):z===140?q=this.deleteWindows(q,te):z===137?q=this.displayWindows(q,te):z===138?q=this.hideWindows(q,te):z===139?q=this.toggleWindows(q,te):z===151?q=this.setWindowAttributes(q,te):z===144?q=this.setPenAttributes(q,te):z===145?q=this.setPenColor(q,te):z===146?q=this.setPenLocation(q,te):z===143?te=this.reset(q,te):z===8?te.currentWindow.backspace():z===12?te.currentWindow.clearText():z===13?te.currentWindow.pendingNewLine=!0:z===14?te.currentWindow.clearText():z===141&&q++},yt.prototype.extendedCommands=function(le,F){var H=this.current708Packet.data,z=H[++le];return _t(z)&&(le=this.handleText(le,F,{isExtended:!0})),le},yt.prototype.getPts=function(le){return this.current708Packet.ptsVals[Math.floor(le/2)]},yt.prototype.initService=function(le,F){var z="SERVICE"+le,H=this,z,q;return z in this.serviceEncodings&&(q=this.serviceEncodings[z]),this.services[le]=new ct(le,q,H),this.services[le].init(this.getPts(F),function(Z){H.flushDisplayed(Z,H.services[le])}),this.services[le]},yt.prototype.handleText=function(le,F,H){var z=H&&H.isExtended,q=H&&H.isMultiByte,Z=this.current708Packet.data,te=z?4096:0,ge=Z[le],_e=Z[le+1],De=F.currentWindow,we,Re;return F.textDecoder_&&!z?(q?(Re=[ge,_e],le++):Re=[ge],we=F.textDecoder_.decode(new Uint8Array(Re))):we=Xe(te|ge),De.pendingNewLine&&!De.isEmpty()&&De.newLine(this.getPts(le)),De.pendingNewLine=!1,De.addText(we),le},yt.prototype.multiByteCharacter=function(le,F){var H=this.current708Packet.data,z=H[le+1],q=H[le+2];return _t(z)&&_t(q)&&(le=this.handleText(++le,F,{isMultiByte:!0})),le},yt.prototype.setCurrentWindow=function(le,F){var H=this.current708Packet.data,z=H[le],q=z&7;return F.setCurrentWindow(q),le},yt.prototype.defineWindow=function(le,F){var H=this.current708Packet.data,z=H[le],q=z&7;F.setCurrentWindow(q);var Z=F.currentWindow;return z=H[++le],Z.visible=(z&32)>>5,Z.rowLock=(z&16)>>4,Z.columnLock=(z&8)>>3,Z.priority=z&7,z=H[++le],Z.relativePositioning=(z&128)>>7,Z.anchorVertical=z&127,z=H[++le],Z.anchorHorizontal=z,z=H[++le],Z.anchorPoint=(z&240)>>4,Z.rowCount=z&15,z=H[++le],Z.columnCount=z&63,z=H[++le],Z.windowStyle=(z&56)>>3,Z.penStyle=z&7,Z.virtualRowCount=Z.rowCount+1,le},yt.prototype.setWindowAttributes=function(le,F){var H=this.current708Packet.data,z=H[le],q=F.currentWindow.winAttr;return z=H[++le],q.fillOpacity=(z&192)>>6,q.fillRed=(z&48)>>4,q.fillGreen=(z&12)>>2,q.fillBlue=z&3,z=H[++le],q.borderType=(z&192)>>6,q.borderRed=(z&48)>>4,q.borderGreen=(z&12)>>2,q.borderBlue=z&3,z=H[++le],q.borderType+=(z&128)>>5,q.wordWrap=(z&64)>>6,q.printDirection=(z&48)>>4,q.scrollDirection=(z&12)>>2,q.justify=z&3,z=H[++le],q.effectSpeed=(z&240)>>4,q.effectDirection=(z&12)>>2,q.displayEffect=z&3,le},yt.prototype.flushDisplayed=function(le,F){for(var H=[],z=0;z<8;z++)F.windows[z].visible&&!F.windows[z].isEmpty()&&H.push(F.windows[z].getText());F.endPts=le,F.text=H.join(`

`),this.pushCaption(F),F.startPts=le},yt.prototype.pushCaption=function(le){le.text!==""&&(this.trigger("data",{startPts:le.startPts,endPts:le.endPts,text:le.text,stream:"cc708_"+le.serviceNum}),le.text="",le.startPts=le.endPts)},yt.prototype.displayWindows=function(le,F){var H=this.current708Packet.data,z=H[++le],q=this.getPts(le);this.flushDisplayed(q,F);for(var Z=0;Z<8;Z++)z&1<<Z&&(F.windows[Z].visible=1);return le},yt.prototype.hideWindows=function(le,F){var H=this.current708Packet.data,z=H[++le],q=this.getPts(le);this.flushDisplayed(q,F);for(var Z=0;Z<8;Z++)z&1<<Z&&(F.windows[Z].visible=0);return le},yt.prototype.toggleWindows=function(le,F){var H=this.current708Packet.data,z=H[++le],q=this.getPts(le);this.flushDisplayed(q,F);for(var Z=0;Z<8;Z++)z&1<<Z&&(F.windows[Z].visible^=1);return le},yt.prototype.clearWindows=function(le,F){var H=this.current708Packet.data,z=H[++le],q=this.getPts(le);this.flushDisplayed(q,F);for(var Z=0;Z<8;Z++)z&1<<Z&&F.windows[Z].clearText();return le},yt.prototype.deleteWindows=function(le,F){var H=this.current708Packet.data,z=H[++le],q=this.getPts(le);this.flushDisplayed(q,F);for(var Z=0;Z<8;Z++)z&1<<Z&&F.windows[Z].reset();return le},yt.prototype.setPenAttributes=function(le,F){var H=this.current708Packet.data,z=H[le],q=F.currentWindow.penAttr;return z=H[++le],q.textTag=(z&240)>>4,q.offset=(z&12)>>2,q.penSize=z&3,z=H[++le],q.italics=(z&128)>>7,q.underline=(z&64)>>6,q.edgeType=(z&56)>>3,q.fontStyle=z&7,le},yt.prototype.setPenColor=function(le,F){var H=this.current708Packet.data,z=H[le],q=F.currentWindow.penColor;return z=H[++le],q.fgOpacity=(z&192)>>6,q.fgRed=(z&48)>>4,q.fgGreen=(z&12)>>2,q.fgBlue=z&3,z=H[++le],q.bgOpacity=(z&192)>>6,q.bgRed=(z&48)>>4,q.bgGreen=(z&12)>>2,q.bgBlue=z&3,z=H[++le],q.edgeRed=(z&48)>>4,q.edgeGreen=(z&12)>>2,q.edgeBlue=z&3,le},yt.prototype.setPenLocation=function(le,F){var H=this.current708Packet.data,z=H[le],q=F.currentWindow.penLoc;return F.currentWindow.pendingNewLine=!0,z=H[++le],q.row=z&15,z=H[++le],q.column=z&63,le},yt.prototype.reset=function(le,F){var H=this.getPts(le);return this.flushDisplayed(H,F),this.initService(F.serviceNum,le)};var Vt={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,304:174,305:176,306:189,307:191,308:8482,309:162,310:163,311:9834,312:224,313:160,314:232,315:226,316:234,317:238,318:244,319:251,544:193,545:201,546:211,547:218,548:220,549:252,550:8216,551:161,552:42,553:39,554:8212,555:169,556:8480,557:8226,558:8220,559:8221,560:192,561:194,562:199,563:200,564:202,565:203,566:235,567:206,568:207,569:239,570:212,571:217,572:249,573:219,574:171,575:187,800:195,801:227,802:205,803:204,804:236,805:210,806:242,807:213,808:245,809:123,810:125,811:92,812:94,813:95,814:124,815:126,816:196,817:228,818:214,819:246,820:223,821:165,822:164,823:9474,824:197,825:229,826:216,827:248,828:9484,829:9488,830:9492,831:9496},Kt=function(F){return F===null?"":(F=Vt[F]||F,String.fromCharCode(F))},Nt=14,vr=[4352,4384,4608,4640,5376,5408,5632,5664,5888,5920,4096,4864,4896,5120,5152],Tt=function(){for(var F=[],H=Nt+1;H--;)F.push("");return F},xr=function le(F,H){le.prototype.init.call(this),this.field_=F||0,this.dataChannel_=H||0,this.name_="CC"+((this.field_<<1|this.dataChannel_)+1),this.setConstants(),this.reset(),this.push=function(z){var q,Z,te,ge,_e;if(q=z.ccData&32639,q===this.lastControlCode_){this.lastControlCode_=null;return}if((q&61440)===4096?this.lastControlCode_=q:q!==this.PADDING_&&(this.lastControlCode_=null),te=q>>>8,ge=q&255,q!==this.PADDING_)if(q===this.RESUME_CAPTION_LOADING_)this.mode_="popOn";else if(q===this.END_OF_CAPTION_)this.mode_="popOn",this.clearFormatting(z.pts),this.flushDisplayed(z.pts),Z=this.displayed_,this.displayed_=this.nonDisplayed_,this.nonDisplayed_=Z,this.startPts_=z.pts;else if(q===this.ROLL_UP_2_ROWS_)this.rollUpRows_=2,this.setRollUp(z.pts);else if(q===this.ROLL_UP_3_ROWS_)this.rollUpRows_=3,this.setRollUp(z.pts);else if(q===this.ROLL_UP_4_ROWS_)this.rollUpRows_=4,this.setRollUp(z.pts);else if(q===this.CARRIAGE_RETURN_)this.clearFormatting(z.pts),this.flushDisplayed(z.pts),this.shiftRowsUp_(),this.startPts_=z.pts;else if(q===this.BACKSPACE_)this.mode_==="popOn"?this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,-1):this.displayed_[this.row_]=this.displayed_[this.row_].slice(0,-1);else if(q===this.ERASE_DISPLAYED_MEMORY_)this.flushDisplayed(z.pts),this.displayed_=Tt();else if(q===this.ERASE_NON_DISPLAYED_MEMORY_)this.nonDisplayed_=Tt();else if(q===this.RESUME_DIRECT_CAPTIONING_)this.mode_!=="paintOn"&&(this.flushDisplayed(z.pts),this.displayed_=Tt()),this.mode_="paintOn",this.startPts_=z.pts;else if(this.isSpecialCharacter(te,ge))te=(te&3)<<8,_e=Kt(te|ge),this[this.mode_](z.pts,_e),this.column_++;else if(this.isExtCharacter(te,ge))this.mode_==="popOn"?this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,-1):this.displayed_[this.row_]=this.displayed_[this.row_].slice(0,-1),te=(te&3)<<8,_e=Kt(te|ge),this[this.mode_](z.pts,_e),this.column_++;else if(this.isMidRowCode(te,ge))this.clearFormatting(z.pts),this[this.mode_](z.pts," "),this.column_++,(ge&14)===14&&this.addFormatting(z.pts,["i"]),(ge&1)===1&&this.addFormatting(z.pts,["u"]);else if(this.isOffsetControlCode(te,ge))this.column_+=ge&3;else if(this.isPAC(te,ge)){var De=vr.indexOf(q&7968);this.mode_==="rollUp"&&(De-this.rollUpRows_+1<0&&(De=this.rollUpRows_-1),this.setRollUp(z.pts,De)),De!==this.row_&&(this.clearFormatting(z.pts),this.row_=De),ge&1&&this.formatting_.indexOf("u")===-1&&this.addFormatting(z.pts,["u"]),(q&16)===16&&(this.column_=((q&14)>>1)*4),this.isColorPAC(ge)&&(ge&14)===14&&this.addFormatting(z.pts,["i"])}else this.isNormalChar(te)&&(ge===0&&(ge=null),_e=Kt(te),_e+=Kt(ge),this[this.mode_](z.pts,_e),this.column_+=_e.length)}};xr.prototype=new e,xr.prototype.flushDisplayed=function(le){var F=this.displayed_.map(function(H,z){try{return H.trim()}catch{return this.trigger("log",{level:"warn",message:"Skipping a malformed 608 caption at index "+z+"."}),""}},this).join(`
`).replace(/^\n+|\n+$/g,"");F.length&&this.trigger("data",{startPts:this.startPts_,endPts:le,text:F,stream:this.name_})},xr.prototype.reset=function(){this.mode_="popOn",this.topRow_=0,this.startPts_=0,this.displayed_=Tt(),this.nonDisplayed_=Tt(),this.lastControlCode_=null,this.column_=0,this.row_=Nt,this.rollUpRows_=2,this.formatting_=[]},xr.prototype.setConstants=function(){this.dataChannel_===0?(this.BASE_=16,this.EXT_=17,this.CONTROL_=(20|this.field_)<<8,this.OFFSET_=23):this.dataChannel_===1&&(this.BASE_=24,this.EXT_=25,this.CONTROL_=(28|this.field_)<<8,this.OFFSET_=31),this.PADDING_=0,this.RESUME_CAPTION_LOADING_=this.CONTROL_|32,this.END_OF_CAPTION_=this.CONTROL_|47,this.ROLL_UP_2_ROWS_=this.CONTROL_|37,this.ROLL_UP_3_ROWS_=this.CONTROL_|38,this.ROLL_UP_4_ROWS_=this.CONTROL_|39,this.CARRIAGE_RETURN_=this.CONTROL_|45,this.RESUME_DIRECT_CAPTIONING_=this.CONTROL_|41,this.BACKSPACE_=this.CONTROL_|33,this.ERASE_DISPLAYED_MEMORY_=this.CONTROL_|44,this.ERASE_NON_DISPLAYED_MEMORY_=this.CONTROL_|46},xr.prototype.isSpecialCharacter=function(le,F){return le===this.EXT_&&F>=48&&F<=63},xr.prototype.isExtCharacter=function(le,F){return(le===this.EXT_+1||le===this.EXT_+2)&&F>=32&&F<=63},xr.prototype.isMidRowCode=function(le,F){return le===this.EXT_&&F>=32&&F<=47},xr.prototype.isOffsetControlCode=function(le,F){return le===this.OFFSET_&&F>=33&&F<=35},xr.prototype.isPAC=function(le,F){return le>=this.BASE_&&le<this.BASE_+8&&F>=64&&F<=127},xr.prototype.isColorPAC=function(le){return le>=64&&le<=79||le>=96&&le<=127},xr.prototype.isNormalChar=function(le){return le>=32&&le<=127},xr.prototype.setRollUp=function(le,F){if(this.mode_!=="rollUp"&&(this.row_=Nt,this.mode_="rollUp",this.flushDisplayed(le),this.nonDisplayed_=Tt(),this.displayed_=Tt()),F!==void 0&&F!==this.row_)for(var H=0;H<this.rollUpRows_;H++)this.displayed_[F-H]=this.displayed_[this.row_-H],this.displayed_[this.row_-H]="";F===void 0&&(F=this.row_),this.topRow_=F-this.rollUpRows_+1},xr.prototype.addFormatting=function(le,F){this.formatting_=this.formatting_.concat(F);var H=F.reduce(function(z,q){return z+"<"+q+">"},"");this[this.mode_](le,H)},xr.prototype.clearFormatting=function(le){if(this.formatting_.length){var F=this.formatting_.reverse().reduce(function(H,z){return H+"</"+z+">"},"");this.formatting_=[],this[this.mode_](le,F)}},xr.prototype.popOn=function(le,F){var H=this.nonDisplayed_[this.row_];H+=F,this.nonDisplayed_[this.row_]=H},xr.prototype.rollUp=function(le,F){var H=this.displayed_[this.row_];H+=F,this.displayed_[this.row_]=H},xr.prototype.shiftRowsUp_=function(){var le;for(le=0;le<this.topRow_;le++)this.displayed_[le]="";for(le=this.row_+1;le<Nt+1;le++)this.displayed_[le]="";for(le=this.topRow_;le<this.row_;le++)this.displayed_[le]=this.displayed_[le+1];this.displayed_[this.row_]=""},xr.prototype.paintOn=function(le,F){var H=this.displayed_[this.row_];H+=F,this.displayed_[this.row_]=H};var Zr={CaptionStream:Ae,Cea608Stream:xr,Cea708Stream:yt},Br={H264_STREAM_TYPE:27,ADTS_STREAM_TYPE:15,METADATA_STREAM_TYPE:21},jr=8589934592,Pn=4294967296,ir="shared",Ti=function(F,H){var z=1;for(F>H&&(z=-1);Math.abs(H-F)>Pn;)F+=z*jr;return F},yn=function le(F){var H,z;le.prototype.init.call(this),this.type_=F||ir,this.push=function(q){this.type_!==ir&&q.type!==this.type_||(z===void 0&&(z=q.dts),q.dts=Ti(q.dts,z),q.pts=Ti(q.pts,z),H=q.dts,this.trigger("data",q))},this.flush=function(){z=H,this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")},this.discontinuity=function(){z=void 0,H=void 0},this.reset=function(){this.discontinuity(),this.trigger("reset")}};yn.prototype=new e;var Cs={TimestampRolloverStream:yn,handleRollover:Ti},nn=function(F,H,z){var q,Z="";for(q=H;q<z;q++)Z+="%"+("00"+F[q].toString(16)).slice(-2);return Z},ws=function(F,H,z){return decodeURIComponent(nn(F,H,z))},hi=function(F,H,z){return unescape(nn(F,H,z))},si=function(F){return F[0]<<21|F[1]<<14|F[2]<<7|F[3]},Mr={TXXX:function(F){var H;if(F.data[0]===3){for(H=1;H<F.data.length;H++)if(F.data[H]===0){F.description=ws(F.data,1,H),F.value=ws(F.data,H+1,F.data.length).replace(/\0*$/,"");break}F.data=F.value}},WXXX:function(F){var H;if(F.data[0]===3){for(H=1;H<F.data.length;H++)if(F.data[H]===0){F.description=ws(F.data,1,H),F.url=ws(F.data,H+1,F.data.length);break}}},PRIV:function(F){var H;for(H=0;H<F.data.length;H++)if(F.data[H]===0){F.owner=hi(F.data,0,H);break}F.privateData=F.data.subarray(H+1),F.data=F.privateData}},ke;ke=function(F){var H={descriptor:F&&F.descriptor},z=0,q=[],Z=0,te;if(ke.prototype.init.call(this),this.dispatchType=Br.METADATA_STREAM_TYPE.toString(16),H.descriptor)for(te=0;te<H.descriptor.length;te++)this.dispatchType+=("00"+H.descriptor[te].toString(16)).slice(-2);this.push=function(ge){var _e,De,we,Re,at,Mt;if(ge.type==="timed-metadata"){if(ge.dataAlignmentIndicator&&(Z=0,q.length=0),q.length===0&&(ge.data.length<10||ge.data[0]!==73||ge.data[1]!==68||ge.data[2]!==51)){this.trigger("log",{level:"warn",message:"Skipping unrecognized metadata packet"});return}if(q.push(ge),Z+=ge.data.byteLength,q.length===1&&(z=si(ge.data.subarray(6,10)),z+=10),!(Z<z)){for(_e={data:new Uint8Array(z),frames:[],pts:q[0].pts,dts:q[0].dts},at=0;at<z;)_e.data.set(q[0].data.subarray(0,z-at),at),at+=q[0].data.byteLength,Z-=q[0].data.byteLength,q.shift();De=10,_e.data[5]&64&&(De+=4,De+=si(_e.data.subarray(10,14)),z-=si(_e.data.subarray(16,20)));do{if(we=si(_e.data.subarray(De+4,De+8)),we<1){this.trigger("log",{level:"warn",message:"Malformed ID3 frame encountered. Skipping metadata parsing."});return}if(Mt=String.fromCharCode(_e.data[De],_e.data[De+1],_e.data[De+2],_e.data[De+3]),Re={id:Mt,data:_e.data.subarray(De+10,De+we+10)},Re.key=Re.id,Mr[Re.id]&&(Mr[Re.id](Re),Re.owner==="com.apple.streaming.transportStreamTimestamp")){var zt=Re.data,nt=(zt[3]&1)<<30|zt[4]<<22|zt[5]<<14|zt[6]<<6|zt[7]>>>2;nt*=4,nt+=zt[7]&3,Re.timeStamp=nt,_e.pts===void 0&&_e.dts===void 0&&(_e.pts=Re.timeStamp,_e.dts=Re.timeStamp),this.trigger("timestamp",Re)}_e.frames.push(Re),De+=10,De+=we}while(De<z);this.trigger("data",_e)}}}},ke.prototype=new e;var $e=ke,Je=Cs.TimestampRolloverStream,tt,xt,kt,Bt=188,Tr=71;tt=function(){var F=new Uint8Array(Bt),H=0;tt.prototype.init.call(this),this.push=function(z){var q=0,Z=Bt,te;for(H?(te=new Uint8Array(z.byteLength+H),te.set(F.subarray(0,H)),te.set(z,H),H=0):te=z;Z<te.byteLength;){if(te[q]===Tr&&te[Z]===Tr){this.trigger("data",te.subarray(q,Z)),q+=Bt,Z+=Bt;continue}q++,Z++}q<te.byteLength&&(F.set(te.subarray(q),0),H=te.byteLength-q)},this.flush=function(){H===Bt&&F[0]===Tr&&(this.trigger("data",F),H=0),this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")},this.reset=function(){H=0,this.trigger("reset")}},tt.prototype=new e,xt=function(){var F,H,z,q;xt.prototype.init.call(this),q=this,this.packetsWaitingForPmt=[],this.programMapTable=void 0,F=function(te,ge){var _e=0;ge.payloadUnitStartIndicator&&(_e+=te[_e]+1),ge.type==="pat"?H(te.subarray(_e),ge):z(te.subarray(_e),ge)},H=function(te,ge){ge.section_number=te[7],ge.last_section_number=te[8],q.pmtPid=(te[10]&31)<<8|te[11],ge.pmtPid=q.pmtPid},z=function(te,ge){var _e,De,we,Re;if(te[5]&1){for(q.programMapTable={video:null,audio:null,"timed-metadata":{}},_e=(te[1]&15)<<8|te[2],De=3+_e-4,we=(te[10]&15)<<8|te[11],Re=12+we;Re<De;){var at=te[Re],Mt=(te[Re+1]&31)<<8|te[Re+2];at===Br.H264_STREAM_TYPE&&q.programMapTable.video===null?q.programMapTable.video=Mt:at===Br.ADTS_STREAM_TYPE&&q.programMapTable.audio===null?q.programMapTable.audio=Mt:at===Br.METADATA_STREAM_TYPE&&(q.programMapTable["timed-metadata"][Mt]=at),Re+=((te[Re+3]&15)<<8|te[Re+4])+5}ge.programMapTable=q.programMapTable}},this.push=function(Z){var te={},ge=4;if(te.payloadUnitStartIndicator=!!(Z[1]&64),te.pid=Z[1]&31,te.pid<<=8,te.pid|=Z[2],(Z[3]&48)>>>4>1&&(ge+=Z[ge]+1),te.pid===0)te.type="pat",F(Z.subarray(ge),te),this.trigger("data",te);else if(te.pid===this.pmtPid)for(te.type="pmt",F(Z.subarray(ge),te),this.trigger("data",te);this.packetsWaitingForPmt.length;)this.processPes_.apply(this,this.packetsWaitingForPmt.shift());else this.programMapTable===void 0?this.packetsWaitingForPmt.push([Z,ge,te]):this.processPes_(Z,ge,te)},this.processPes_=function(Z,te,ge){ge.pid===this.programMapTable.video?ge.streamType=Br.H264_STREAM_TYPE:ge.pid===this.programMapTable.audio?ge.streamType=Br.ADTS_STREAM_TYPE:ge.streamType=this.programMapTable["timed-metadata"][ge.pid],ge.type="pes",ge.data=Z.subarray(te),this.trigger("data",ge)}},xt.prototype=new e,xt.STREAM_TYPES={h264:27,adts:15},kt=function(){var F=this,H=!1,z={data:[],size:0},q={data:[],size:0},Z={data:[],size:0},te,ge=function(we,Re){var at,Mt=we[0]<<16|we[1]<<8|we[2];Re.data=new Uint8Array,Mt===1&&(Re.packetLength=6+(we[4]<<8|we[5]),Re.dataAlignmentIndicator=(we[6]&4)!==0,at=we[7],at&192&&(Re.pts=(we[9]&14)<<27|(we[10]&255)<<20|(we[11]&254)<<12|(we[12]&255)<<5|(we[13]&254)>>>3,Re.pts*=4,Re.pts+=(we[13]&6)>>>1,Re.dts=Re.pts,at&64&&(Re.dts=(we[14]&14)<<27|(we[15]&255)<<20|(we[16]&254)<<12|(we[17]&255)<<5|(we[18]&254)>>>3,Re.dts*=4,Re.dts+=(we[18]&6)>>>1)),Re.data=we.subarray(9+we[8]))},_e=function(we,Re,at){var Mt=new Uint8Array(we.size),zt={type:Re},nt=0,ar=0,In=!1,pi;if(!(!we.data.length||we.size<9)){for(zt.trackId=we.data[0].pid,nt=0;nt<we.data.length;nt++)pi=we.data[nt],Mt.set(pi.data,ar),ar+=pi.data.byteLength;ge(Mt,zt),In=Re==="video"||zt.packetLength<=we.size,(at||In)&&(we.size=0,we.data.length=0),In&&F.trigger("data",zt)}};kt.prototype.init.call(this),this.push=function(De){({pat:function(){},pes:function(){var Re,at;switch(De.streamType){case Br.H264_STREAM_TYPE:Re=z,at="video";break;case Br.ADTS_STREAM_TYPE:Re=q,at="audio";break;case Br.METADATA_STREAM_TYPE:Re=Z,at="timed-metadata";break;default:return}De.payloadUnitStartIndicator&&_e(Re,at,!0),Re.data.push(De),Re.size+=De.data.byteLength},pmt:function(){var Re={type:"metadata",tracks:[]};te=De.programMapTable,te.video!==null&&Re.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+te.video,codec:"avc",type:"video"}),te.audio!==null&&Re.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+te.audio,codec:"adts",type:"audio"}),H=!0,F.trigger("data",Re)}})[De.type]()},this.reset=function(){z.size=0,z.data.length=0,q.size=0,q.data.length=0,this.trigger("reset")},this.flushStreams_=function(){_e(z,"video"),_e(q,"audio"),_e(Z,"timed-metadata")},this.flush=function(){if(!H&&te){var De={type:"metadata",tracks:[]};te.video!==null&&De.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+te.video,codec:"avc",type:"video"}),te.audio!==null&&De.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+te.audio,codec:"adts",type:"audio"}),F.trigger("data",De)}H=!1,this.flushStreams_(),this.trigger("done")}},kt.prototype=new e;var Wr={PAT_PID:0,MP2T_PACKET_LENGTH:Bt,TransportPacketStream:tt,TransportParseStream:xt,ElementaryStream:kt,TimestampRolloverStream:Je,CaptionStream:Zr.CaptionStream,Cea608Stream:Zr.Cea608Stream,Cea708Stream:Zr.Cea708Stream,MetadataStream:$e};for(var xn in Br)Br.hasOwnProperty(xn)&&(Wr[xn]=Br[xn]);var Er=Wr,fi=vt.ONE_SECOND_IN_TS,zr,On=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];zr=function(F){var H,z=0;zr.prototype.init.call(this),this.skipWarn_=function(q,Z){this.trigger("log",{level:"warn",message:"adts skiping bytes "+q+" to "+Z+" in frame "+z+" outside syncword"})},this.push=function(q){var Z=0,te,ge,_e,De,we;if(F||(z=0),q.type==="audio"){H&&H.length?(_e=H,H=new Uint8Array(_e.byteLength+q.data.byteLength),H.set(_e),H.set(q.data,_e.byteLength)):H=q.data;for(var Re;Z+7<H.length;){if(H[Z]!==255||(H[Z+1]&246)!==240){typeof Re!="number"&&(Re=Z),Z++;continue}if(typeof Re=="number"&&(this.skipWarn_(Re,Z),Re=null),ge=(~H[Z+1]&1)*2,te=(H[Z+3]&3)<<11|H[Z+4]<<3|(H[Z+5]&224)>>5,De=((H[Z+6]&3)+1)*1024,we=De*fi/On[(H[Z+2]&60)>>>2],H.byteLength-Z<te)break;this.trigger("data",{pts:q.pts+z*we,dts:q.dts+z*we,sampleCount:De,audioobjecttype:(H[Z+2]>>>6&3)+1,channelcount:(H[Z+2]&1)<<2|(H[Z+3]&192)>>>6,samplerate:On[(H[Z+2]&60)>>>2],samplingfrequencyindex:(H[Z+2]&60)>>>2,samplesize:16,data:H.subarray(Z+7+ge,Z+te)}),z++,Z+=te}typeof Re=="number"&&(this.skipWarn_(Re,Z),Re=null),H=H.subarray(Z)}},this.flush=function(){z=0,this.trigger("done")},this.reset=function(){H=void 0,this.trigger("reset")},this.endTimeline=function(){H=void 0,this.trigger("endedtimeline")}},zr.prototype=new e;var $n=zr,Es;Es=function(F){var H=F.byteLength,z=0,q=0;this.length=function(){return 8*H},this.bitsAvailable=function(){return 8*H+q},this.loadWord=function(){var Z=F.byteLength-H,te=new Uint8Array(4),ge=Math.min(4,H);if(ge===0)throw new Error("no bytes available");te.set(F.subarray(Z,Z+ge)),z=new DataView(te.buffer).getUint32(0),q=ge*8,H-=ge},this.skipBits=function(Z){var te;q>Z?(z<<=Z,q-=Z):(Z-=q,te=Math.floor(Z/8),Z-=te*8,H-=te,this.loadWord(),z<<=Z,q-=Z)},this.readBits=function(Z){var te=Math.min(q,Z),ge=z>>>32-te;return q-=te,q>0?z<<=te:H>0&&this.loadWord(),te=Z-te,te>0?ge<<te|this.readBits(te):ge},this.skipLeadingZeros=function(){var Z;for(Z=0;Z<q;++Z)if((z&2147483648>>>Z)!==0)return z<<=Z,q-=Z,Z;return this.loadWord(),Z+this.skipLeadingZeros()},this.skipUnsignedExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.skipExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.readUnsignedExpGolomb=function(){var Z=this.skipLeadingZeros();return this.readBits(Z+1)-1},this.readExpGolomb=function(){var Z=this.readUnsignedExpGolomb();return 1&Z?1+Z>>>1:-1*(Z>>>1)},this.readBoolean=function(){return this.readBits(1)===1},this.readUnsignedByte=function(){return this.readBits(8)},this.loadWord()};var Hc=Es,ks,zi,Rn;zi=function(){var F=0,H,z;zi.prototype.init.call(this),this.push=function(q){var Z;z?(Z=new Uint8Array(z.byteLength+q.data.byteLength),Z.set(z),Z.set(q.data,z.byteLength),z=Z):z=q.data;for(var te=z.byteLength;F<te-3;F++)if(z[F+2]===1){H=F+5;break}for(;H<te;)switch(z[H]){case 0:if(z[H-1]!==0){H+=2;break}else if(z[H-2]!==0){H++;break}F+3!==H-2&&this.trigger("data",z.subarray(F+3,H-2));do H++;while(z[H]!==1&&H<te);F=H-2,H+=3;break;case 1:if(z[H-1]!==0||z[H-2]!==0){H+=3;break}this.trigger("data",z.subarray(F+3,H-2)),F=H-2,H+=3;break;default:H+=3;break}z=z.subarray(F),H-=F,F=0},this.reset=function(){z=null,F=0,this.trigger("reset")},this.flush=function(){z&&z.byteLength>3&&this.trigger("data",z.subarray(F+3)),z=null,F=0,this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")}},zi.prototype=new e,Rn={100:!0,110:!0,122:!0,244:!0,44:!0,83:!0,86:!0,118:!0,128:!0,138:!0,139:!0,134:!0},ks=function(){var F=new zi,H,z,q,Z,te,ge,_e;ks.prototype.init.call(this),H=this,this.push=function(De){De.type==="video"&&(z=De.trackId,q=De.pts,Z=De.dts,F.push(De))},F.on("data",function(De){var we={trackId:z,pts:q,dts:Z,data:De,nalUnitTypeCode:De[0]&31};switch(we.nalUnitTypeCode){case 5:we.nalUnitType="slice_layer_without_partitioning_rbsp_idr";break;case 6:we.nalUnitType="sei_rbsp",we.escapedRBSP=te(De.subarray(1));break;case 7:we.nalUnitType="seq_parameter_set_rbsp",we.escapedRBSP=te(De.subarray(1)),we.config=ge(we.escapedRBSP);break;case 8:we.nalUnitType="pic_parameter_set_rbsp";break;case 9:we.nalUnitType="access_unit_delimiter_rbsp";break}H.trigger("data",we)}),F.on("done",function(){H.trigger("done")}),F.on("partialdone",function(){H.trigger("partialdone")}),F.on("reset",function(){H.trigger("reset")}),F.on("endedtimeline",function(){H.trigger("endedtimeline")}),this.flush=function(){F.flush()},this.partialFlush=function(){F.partialFlush()},this.reset=function(){F.reset()},this.endTimeline=function(){F.endTimeline()},_e=function(we,Re){var at=8,Mt=8,zt,nt;for(zt=0;zt<we;zt++)Mt!==0&&(nt=Re.readExpGolomb(),Mt=(at+nt+256)%256),at=Mt===0?at:Mt},te=function(we){for(var Re=we.byteLength,at=[],Mt=1,zt,nt;Mt<Re-2;)we[Mt]===0&&we[Mt+1]===0&&we[Mt+2]===3?(at.push(Mt+2),Mt+=2):Mt++;if(at.length===0)return we;zt=Re-at.length,nt=new Uint8Array(zt);var ar=0;for(Mt=0;Mt<zt;ar++,Mt++)ar===at[0]&&(ar++,at.shift()),nt[Mt]=we[ar];return nt},ge=function(we){var Re=0,at=0,Mt=0,zt=0,nt,ar,In,pi,qi,xl,Do,Io,_l,_a,Gs,_n=[1,1],eo,Gi;if(nt=new Hc(we),ar=nt.readUnsignedByte(),pi=nt.readUnsignedByte(),In=nt.readUnsignedByte(),nt.skipUnsignedExpGolomb(),Rn[ar]&&(qi=nt.readUnsignedExpGolomb(),qi===3&&nt.skipBits(1),nt.skipUnsignedExpGolomb(),nt.skipUnsignedExpGolomb(),nt.skipBits(1),nt.readBoolean()))for(Gs=qi!==3?8:12,Gi=0;Gi<Gs;Gi++)nt.readBoolean()&&(Gi<6?_e(16,nt):_e(64,nt));if(nt.skipUnsignedExpGolomb(),xl=nt.readUnsignedExpGolomb(),xl===0)nt.readUnsignedExpGolomb();else if(xl===1)for(nt.skipBits(1),nt.skipExpGolomb(),nt.skipExpGolomb(),Do=nt.readUnsignedExpGolomb(),Gi=0;Gi<Do;Gi++)nt.skipExpGolomb();if(nt.skipUnsignedExpGolomb(),nt.skipBits(1),Io=nt.readUnsignedExpGolomb(),_l=nt.readUnsignedExpGolomb(),_a=nt.readBits(1),_a===0&&nt.skipBits(1),nt.skipBits(1),nt.readBoolean()&&(Re=nt.readUnsignedExpGolomb(),at=nt.readUnsignedExpGolomb(),Mt=nt.readUnsignedExpGolomb(),zt=nt.readUnsignedExpGolomb()),nt.readBoolean()&&nt.readBoolean()){switch(eo=nt.readUnsignedByte(),eo){case 1:_n=[1,1];break;case 2:_n=[12,11];break;case 3:_n=[10,11];break;case 4:_n=[16,11];break;case 5:_n=[40,33];break;case 6:_n=[24,11];break;case 7:_n=[20,11];break;case 8:_n=[32,11];break;case 9:_n=[80,33];break;case 10:_n=[18,11];break;case 11:_n=[15,11];break;case 12:_n=[64,33];break;case 13:_n=[160,99];break;case 14:_n=[4,3];break;case 15:_n=[3,2];break;case 16:_n=[2,1];break;case 255:{_n=[nt.readUnsignedByte()<<8|nt.readUnsignedByte(),nt.readUnsignedByte()<<8|nt.readUnsignedByte()];break}}_n&&_n[0]/_n[1]}return{profileIdc:ar,levelIdc:In,profileCompatibility:pi,width:(Io+1)*16-Re*2-at*2,height:(2-_a)*(_l+1)*16-Mt*2-zt*2,sarRatio:_n}}},ks.prototype=new e;var Xu={H264Stream:ks},qr=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],ls=function(F,H){var z=F[H+6]<<21|F[H+7]<<14|F[H+8]<<7|F[H+9],q=F[H+5],Z=(q&16)>>4;return z=z>=0?z:0,Z?z+20:z+10},fa=function le(F,H){return F.length-H<10||F[H]!==73||F[H+1]!==68||F[H+2]!==51?H:(H+=ls(F,H),le(F,H))},Pi=function(F){var H=fa(F,0);return F.length>=H+2&&(F[H]&255)===255&&(F[H+1]&240)===240&&(F[H+1]&22)===16},Wa=function(F){return F[0]<<21|F[1]<<14|F[2]<<7|F[3]},Hl=function(F,H,z){var q,Z="";for(q=H;q<z;q++)Z+="%"+("00"+F[q].toString(16)).slice(-2);return Z},To=function(F,H,z){return unescape(Hl(F,H,z))},Yu=function(F,H){var z=(F[H+5]&224)>>5,q=F[H+4]<<3,Z=F[H+3]&6144;return Z|q|z},Vl=function(F,H){return F[H]===73&&F[H+1]===68&&F[H+2]===51?"timed-metadata":F[H]&!0&&(F[H+1]&240)===240?"audio":null},pa=function(F){for(var H=0;H+5<F.length;){if(F[H]!==255||(F[H+1]&246)!==240){H++;continue}return qr[(F[H+2]&60)>>>2]}return null},Ci=function(F){var H,z,q,Z;H=10,F[5]&64&&(H+=4,H+=Wa(F.subarray(10,14)));do{if(z=Wa(F.subarray(H+4,H+8)),z<1)return null;if(Z=String.fromCharCode(F[H],F[H+1],F[H+2],F[H+3]),Z==="PRIV"){q=F.subarray(H+10,H+z+10);for(var te=0;te<q.byteLength;te++)if(q[te]===0){var ge=To(q,0,te);if(ge==="com.apple.streaming.transportStreamTimestamp"){var _e=q.subarray(te+1),De=(_e[3]&1)<<30|_e[4]<<22|_e[5]<<14|_e[6]<<6|_e[7]>>>2;return De*=4,De+=_e[7]&3,De}break}}H+=10,H+=z}while(H<F.byteLength);return null},Ri={isLikelyAacData:Pi,parseId3TagSize:ls,parseAdtsSize:Yu,parseType:Vl,parseSampleRate:pa,parseAacTimestamp:Ci},ma;ma=function(){var F=new Uint8Array,H=0;ma.prototype.init.call(this),this.setTimestamp=function(z){H=z},this.push=function(z){var q=0,Z=0,te,ge,_e,De;for(F.length?(De=F.length,F=new Uint8Array(z.byteLength+De),F.set(F.subarray(0,De)),F.set(z,De)):F=z;F.length-Z>=3;){if(F[Z]===73&&F[Z+1]===68&&F[Z+2]===51){if(F.length-Z<10||(q=Ri.parseId3TagSize(F,Z),Z+q>F.length))break;ge={type:"timed-metadata",data:F.subarray(Z,Z+q)},this.trigger("data",ge),Z+=q;continue}else if((F[Z]&255)===255&&(F[Z+1]&240)===240){if(F.length-Z<7||(q=Ri.parseAdtsSize(F,Z),Z+q>F.length))break;_e={type:"audio",data:F.subarray(Z,Z+q),pts:H,dts:H},this.trigger("data",_e),Z+=q;continue}Z++}te=F.length-Z,te>0?F=F.subarray(Z):F=new Uint8Array},this.reset=function(){F=new Uint8Array,this.trigger("reset")},this.endTimeline=function(){F=new Uint8Array,this.trigger("endedtimeline")}},ma.prototype=new e;var qa=ma,ga=["audioobjecttype","channelcount","samplerate","samplingfrequencyindex","samplesize"],Wl=ga,Vc=["width","height","profileIdc","levelIdc","profileCompatibility","sarRatio"],Hi=Vc,Ga=Xu.H264Stream,ql=Ri.isLikelyAacData,Gl=vt.ONE_SECOND_IN_TS,dl,Ka,As,us,va=function(F,H){H.stream=F,this.trigger("log",H)},hl=function(F,H){for(var z=Object.keys(H),q=0;q<z.length;q++){var Z=z[q];Z==="headOfPipeline"||!H[Z].on||H[Z].on("log",va.bind(F,Z))}},Wc=function(F,H){var z;if(F.length!==H.length)return!1;for(z=0;z<F.length;z++)if(F[z]!==H[z])return!1;return!0},qc=function(F,H,z,q,Z,te){var ge=z-H,_e=q-H,De=Z-z;return{start:{dts:F,pts:F+ge},end:{dts:F+_e,pts:F+De},prependedContentDuration:te,baseMediaDecodeTime:F}};Ka=function(F,H){var z=[],q,Z=0,te=0,ge=1/0;H=H||{},q=H.firstSequenceNumber||0,Ka.prototype.init.call(this),this.push=function(_e){oe.collectDtsInfo(F,_e),F&&Wl.forEach(function(De){F[De]=_e[De]}),z.push(_e)},this.setEarliestDts=function(_e){Z=_e},this.setVideoBaseMediaDecodeTime=function(_e){ge=_e},this.setAudioAppendStart=function(_e){te=_e},this.flush=function(){var _e,De,we,Re,at,Mt,zt;if(z.length===0){this.trigger("done","AudioSegmentStream");return}_e=Hr.trimAdtsFramesByEarliestDts(z,F,Z),F.baseMediaDecodeTime=oe.calculateTrackBaseMediaDecodeTime(F,H.keepOriginalTimestamps),zt=Hr.prefixWithSilence(F,_e,te,ge),F.samples=Hr.generateSampleTable(_e),we=Le.mdat(Hr.concatenateFrameData(_e)),z=[],De=Le.moof(q,[F]),Re=new Uint8Array(De.byteLength+we.byteLength),q++,Re.set(De),Re.set(we,De.byteLength),oe.clearDtsInfo(F),at=Math.ceil(Gl*1024/F.samplerate),_e.length&&(Mt=_e.length*at,this.trigger("segmentTimingInfo",qc(vt.audioTsToVideoTs(F.baseMediaDecodeTime,F.samplerate),_e[0].dts,_e[0].pts,_e[0].dts+Mt,_e[0].pts+Mt,zt||0)),this.trigger("timingInfo",{start:_e[0].pts,end:_e[0].pts+Mt})),this.trigger("data",{track:F,boxes:Re}),this.trigger("done","AudioSegmentStream")},this.reset=function(){oe.clearDtsInfo(F),z=[],this.trigger("reset")}},Ka.prototype=new e,dl=function(F,H){var z,q=[],Z=[],te,ge;H=H||{},z=H.firstSequenceNumber||0,dl.prototype.init.call(this),delete F.minPTS,this.gopCache_=[],this.push=function(_e){oe.collectDtsInfo(F,_e),_e.nalUnitType==="seq_parameter_set_rbsp"&&!te&&(te=_e.config,F.sps=[_e.data],Hi.forEach(function(De){F[De]=te[De]},this)),_e.nalUnitType==="pic_parameter_set_rbsp"&&!ge&&(ge=_e.data,F.pps=[_e.data]),q.push(_e)},this.flush=function(){for(var _e,De,we,Re,at,Mt,zt=0,nt,ar;q.length&&q[0].nalUnitType!=="access_unit_delimiter_rbsp";)q.shift();if(q.length===0){this.resetStream_(),this.trigger("done","VideoSegmentStream");return}if(_e=Ue.groupNalsIntoFrames(q),we=Ue.groupFramesIntoGops(_e),we[0][0].keyFrame||(De=this.getGopForFusion_(q[0],F),De?(zt=De.duration,we.unshift(De),we.byteLength+=De.byteLength,we.nalCount+=De.nalCount,we.pts=De.pts,we.dts=De.dts,we.duration+=De.duration):we=Ue.extendFirstKeyFrame(we)),Z.length){var In;if(H.alignGopsAtEnd?In=this.alignGopsAtEnd_(we):In=this.alignGopsAtStart_(we),!In){this.gopCache_.unshift({gop:we.pop(),pps:F.pps,sps:F.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),q=[],this.resetStream_(),this.trigger("done","VideoSegmentStream");return}oe.clearDtsInfo(F),we=In}oe.collectDtsInfo(F,we),F.samples=Ue.generateSampleTable(we),at=Le.mdat(Ue.concatenateNalData(we)),F.baseMediaDecodeTime=oe.calculateTrackBaseMediaDecodeTime(F,H.keepOriginalTimestamps),this.trigger("processedGopsInfo",we.map(function(pi){return{pts:pi.pts,dts:pi.dts,byteLength:pi.byteLength}})),nt=we[0],ar=we[we.length-1],this.trigger("segmentTimingInfo",qc(F.baseMediaDecodeTime,nt.dts,nt.pts,ar.dts+ar.duration,ar.pts+ar.duration,zt)),this.trigger("timingInfo",{start:we[0].pts,end:we[we.length-1].pts+we[we.length-1].duration}),this.gopCache_.unshift({gop:we.pop(),pps:F.pps,sps:F.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),q=[],this.trigger("baseMediaDecodeTime",F.baseMediaDecodeTime),this.trigger("timelineStartInfo",F.timelineStartInfo),Re=Le.moof(z,[F]),Mt=new Uint8Array(Re.byteLength+at.byteLength),z++,Mt.set(Re),Mt.set(at,Re.byteLength),this.trigger("data",{track:F,boxes:Mt}),this.resetStream_(),this.trigger("done","VideoSegmentStream")},this.reset=function(){this.resetStream_(),q=[],this.gopCache_.length=0,Z.length=0,this.trigger("reset")},this.resetStream_=function(){oe.clearDtsInfo(F),te=void 0,ge=void 0},this.getGopForFusion_=function(_e){var De=45e3,we=1/0,Re,at,Mt,zt,nt;for(nt=0;nt<this.gopCache_.length;nt++)zt=this.gopCache_[nt],Mt=zt.gop,!(!(F.pps&&Wc(F.pps[0],zt.pps[0]))||!(F.sps&&Wc(F.sps[0],zt.sps[0])))&&(Mt.dts<F.timelineStartInfo.dts||(Re=_e.dts-Mt.dts-Mt.duration,Re>=-1e4&&Re<=De&&(!at||we>Re)&&(at=zt,we=Re)));return at?at.gop:null},this.alignGopsAtStart_=function(_e){var De,we,Re,at,Mt,zt,nt,ar;for(Mt=_e.byteLength,zt=_e.nalCount,nt=_e.duration,De=we=0;De<Z.length&&we<_e.length&&(Re=Z[De],at=_e[we],Re.pts!==at.pts);){if(at.pts>Re.pts){De++;continue}we++,Mt-=at.byteLength,zt-=at.nalCount,nt-=at.duration}return we===0?_e:we===_e.length?null:(ar=_e.slice(we),ar.byteLength=Mt,ar.duration=nt,ar.nalCount=zt,ar.pts=ar[0].pts,ar.dts=ar[0].dts,ar)},this.alignGopsAtEnd_=function(_e){var De,we,Re,at,Mt,zt;for(De=Z.length-1,we=_e.length-1,Mt=null,zt=!1;De>=0&&we>=0;){if(Re=Z[De],at=_e[we],Re.pts===at.pts){zt=!0;break}if(Re.pts>at.pts){De--;continue}De===Z.length-1&&(Mt=we),we--}if(!zt&&Mt===null)return null;var nt;if(zt?nt=we:nt=Mt,nt===0)return _e;var ar=_e.slice(nt),In=ar.reduce(function(pi,qi){return pi.byteLength+=qi.byteLength,pi.duration+=qi.duration,pi.nalCount+=qi.nalCount,pi},{byteLength:0,duration:0,nalCount:0});return ar.byteLength=In.byteLength,ar.duration=In.duration,ar.nalCount=In.nalCount,ar.pts=ar[0].pts,ar.dts=ar[0].dts,ar},this.alignGopsWith=function(_e){Z=_e}},dl.prototype=new e,us=function(F,H){this.numberOfTracks=0,this.metadataStream=H,F=F||{},typeof F.remux<"u"?this.remuxTracks=!!F.remux:this.remuxTracks=!0,typeof F.keepOriginalTimestamps=="boolean"?this.keepOriginalTimestamps=F.keepOriginalTimestamps:this.keepOriginalTimestamps=!1,this.pendingTracks=[],this.videoTrack=null,this.pendingBoxes=[],this.pendingCaptions=[],this.pendingMetadata=[],this.pendingBytes=0,this.emittedTracks=0,us.prototype.init.call(this),this.push=function(z){if(z.text)return this.pendingCaptions.push(z);if(z.frames)return this.pendingMetadata.push(z);this.pendingTracks.push(z.track),this.pendingBytes+=z.boxes.byteLength,z.track.type==="video"&&(this.videoTrack=z.track,this.pendingBoxes.push(z.boxes)),z.track.type==="audio"&&(this.audioTrack=z.track,this.pendingBoxes.unshift(z.boxes))}},us.prototype=new e,us.prototype.flush=function(le){var F=0,H={captions:[],captionStreams:{},metadata:[],info:{}},z,q,Z,te=0,ge;if(this.pendingTracks.length<this.numberOfTracks){if(le!=="VideoSegmentStream"&&le!=="AudioSegmentStream")return;if(this.remuxTracks)return;if(this.pendingTracks.length===0){this.emittedTracks++,this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0);return}}if(this.videoTrack?(te=this.videoTrack.timelineStartInfo.pts,Hi.forEach(function(_e){H.info[_e]=this.videoTrack[_e]},this)):this.audioTrack&&(te=this.audioTrack.timelineStartInfo.pts,Wl.forEach(function(_e){H.info[_e]=this.audioTrack[_e]},this)),this.videoTrack||this.audioTrack){for(this.pendingTracks.length===1?H.type=this.pendingTracks[0].type:H.type="combined",this.emittedTracks+=this.pendingTracks.length,Z=Le.initSegment(this.pendingTracks),H.initSegment=new Uint8Array(Z.byteLength),H.initSegment.set(Z),H.data=new Uint8Array(this.pendingBytes),ge=0;ge<this.pendingBoxes.length;ge++)H.data.set(this.pendingBoxes[ge],F),F+=this.pendingBoxes[ge].byteLength;for(ge=0;ge<this.pendingCaptions.length;ge++)z=this.pendingCaptions[ge],z.startTime=vt.metadataTsToSeconds(z.startPts,te,this.keepOriginalTimestamps),z.endTime=vt.metadataTsToSeconds(z.endPts,te,this.keepOriginalTimestamps),H.captionStreams[z.stream]=!0,H.captions.push(z);for(ge=0;ge<this.pendingMetadata.length;ge++)q=this.pendingMetadata[ge],q.cueTime=vt.metadataTsToSeconds(q.pts,te,this.keepOriginalTimestamps),H.metadata.push(q);for(H.metadata.dispatchType=this.metadataStream.dispatchType,this.pendingTracks.length=0,this.videoTrack=null,this.pendingBoxes.length=0,this.pendingCaptions.length=0,this.pendingBytes=0,this.pendingMetadata.length=0,this.trigger("data",H),ge=0;ge<H.captions.length;ge++)z=H.captions[ge],this.trigger("caption",z);for(ge=0;ge<H.metadata.length;ge++)q=H.metadata[ge],this.trigger("id3Frame",q)}this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0)},us.prototype.setRemux=function(le){this.remuxTracks=le},As=function(F){var H=this,z=!0,q,Z;As.prototype.init.call(this),F=F||{},this.baseMediaDecodeTime=F.baseMediaDecodeTime||0,this.transmuxPipeline_={},this.setupAacPipeline=function(){var te={};this.transmuxPipeline_=te,te.type="aac",te.metadataStream=new Er.MetadataStream,te.aacStream=new qa,te.audioTimestampRolloverStream=new Er.TimestampRolloverStream("audio"),te.timedMetadataTimestampRolloverStream=new Er.TimestampRolloverStream("timed-metadata"),te.adtsStream=new $n,te.coalesceStream=new us(F,te.metadataStream),te.headOfPipeline=te.aacStream,te.aacStream.pipe(te.audioTimestampRolloverStream).pipe(te.adtsStream),te.aacStream.pipe(te.timedMetadataTimestampRolloverStream).pipe(te.metadataStream).pipe(te.coalesceStream),te.metadataStream.on("timestamp",function(ge){te.aacStream.setTimestamp(ge.timeStamp)}),te.aacStream.on("data",function(ge){ge.type!=="timed-metadata"&&ge.type!=="audio"||te.audioSegmentStream||(Z=Z||{timelineStartInfo:{baseMediaDecodeTime:H.baseMediaDecodeTime},codec:"adts",type:"audio"},te.coalesceStream.numberOfTracks++,te.audioSegmentStream=new Ka(Z,F),te.audioSegmentStream.on("log",H.getLogTrigger_("audioSegmentStream")),te.audioSegmentStream.on("timingInfo",H.trigger.bind(H,"audioTimingInfo")),te.adtsStream.pipe(te.audioSegmentStream).pipe(te.coalesceStream),H.trigger("trackinfo",{hasAudio:!!Z,hasVideo:!!q}))}),te.coalesceStream.on("data",this.trigger.bind(this,"data")),te.coalesceStream.on("done",this.trigger.bind(this,"done")),hl(this,te)},this.setupTsPipeline=function(){var te={};this.transmuxPipeline_=te,te.type="ts",te.metadataStream=new Er.MetadataStream,te.packetStream=new Er.TransportPacketStream,te.parseStream=new Er.TransportParseStream,te.elementaryStream=new Er.ElementaryStream,te.timestampRolloverStream=new Er.TimestampRolloverStream,te.adtsStream=new $n,te.h264Stream=new Ga,te.captionStream=new Er.CaptionStream(F),te.coalesceStream=new us(F,te.metadataStream),te.headOfPipeline=te.packetStream,te.packetStream.pipe(te.parseStream).pipe(te.elementaryStream).pipe(te.timestampRolloverStream),te.timestampRolloverStream.pipe(te.h264Stream),te.timestampRolloverStream.pipe(te.adtsStream),te.timestampRolloverStream.pipe(te.metadataStream).pipe(te.coalesceStream),te.h264Stream.pipe(te.captionStream).pipe(te.coalesceStream),te.elementaryStream.on("data",function(ge){var _e;if(ge.type==="metadata"){for(_e=ge.tracks.length;_e--;)!q&&ge.tracks[_e].type==="video"?(q=ge.tracks[_e],q.timelineStartInfo.baseMediaDecodeTime=H.baseMediaDecodeTime):!Z&&ge.tracks[_e].type==="audio"&&(Z=ge.tracks[_e],Z.timelineStartInfo.baseMediaDecodeTime=H.baseMediaDecodeTime);q&&!te.videoSegmentStream&&(te.coalesceStream.numberOfTracks++,te.videoSegmentStream=new dl(q,F),te.videoSegmentStream.on("log",H.getLogTrigger_("videoSegmentStream")),te.videoSegmentStream.on("timelineStartInfo",function(De){Z&&!F.keepOriginalTimestamps&&(Z.timelineStartInfo=De,te.audioSegmentStream.setEarliestDts(De.dts-H.baseMediaDecodeTime))}),te.videoSegmentStream.on("processedGopsInfo",H.trigger.bind(H,"gopInfo")),te.videoSegmentStream.on("segmentTimingInfo",H.trigger.bind(H,"videoSegmentTimingInfo")),te.videoSegmentStream.on("baseMediaDecodeTime",function(De){Z&&te.audioSegmentStream.setVideoBaseMediaDecodeTime(De)}),te.videoSegmentStream.on("timingInfo",H.trigger.bind(H,"videoTimingInfo")),te.h264Stream.pipe(te.videoSegmentStream).pipe(te.coalesceStream)),Z&&!te.audioSegmentStream&&(te.coalesceStream.numberOfTracks++,te.audioSegmentStream=new Ka(Z,F),te.audioSegmentStream.on("log",H.getLogTrigger_("audioSegmentStream")),te.audioSegmentStream.on("timingInfo",H.trigger.bind(H,"audioTimingInfo")),te.audioSegmentStream.on("segmentTimingInfo",H.trigger.bind(H,"audioSegmentTimingInfo")),te.adtsStream.pipe(te.audioSegmentStream).pipe(te.coalesceStream)),H.trigger("trackinfo",{hasAudio:!!Z,hasVideo:!!q})}}),te.coalesceStream.on("data",this.trigger.bind(this,"data")),te.coalesceStream.on("id3Frame",function(ge){ge.dispatchType=te.metadataStream.dispatchType,H.trigger("id3Frame",ge)}),te.coalesceStream.on("caption",this.trigger.bind(this,"caption")),te.coalesceStream.on("done",this.trigger.bind(this,"done")),hl(this,te)},this.setBaseMediaDecodeTime=function(te){var ge=this.transmuxPipeline_;F.keepOriginalTimestamps||(this.baseMediaDecodeTime=te),Z&&(Z.timelineStartInfo.dts=void 0,Z.timelineStartInfo.pts=void 0,oe.clearDtsInfo(Z),ge.audioTimestampRolloverStream&&ge.audioTimestampRolloverStream.discontinuity()),q&&(ge.videoSegmentStream&&(ge.videoSegmentStream.gopCache_=[]),q.timelineStartInfo.dts=void 0,q.timelineStartInfo.pts=void 0,oe.clearDtsInfo(q),ge.captionStream.reset()),ge.timestampRolloverStream&&ge.timestampRolloverStream.discontinuity()},this.setAudioAppendStart=function(te){Z&&this.transmuxPipeline_.audioSegmentStream.setAudioAppendStart(te)},this.setRemux=function(te){var ge=this.transmuxPipeline_;F.remux=te,ge&&ge.coalesceStream&&ge.coalesceStream.setRemux(te)},this.alignGopsWith=function(te){q&&this.transmuxPipeline_.videoSegmentStream&&this.transmuxPipeline_.videoSegmentStream.alignGopsWith(te)},this.getLogTrigger_=function(te){var ge=this;return function(_e){_e.stream=te,ge.trigger("log",_e)}},this.push=function(te){if(z){var ge=ql(te);ge&&this.transmuxPipeline_.type!=="aac"?this.setupAacPipeline():!ge&&this.transmuxPipeline_.type!=="ts"&&this.setupTsPipeline(),z=!1}this.transmuxPipeline_.headOfPipeline.push(te)},this.flush=function(){z=!0,this.transmuxPipeline_.headOfPipeline.flush()},this.endTimeline=function(){this.transmuxPipeline_.headOfPipeline.endTimeline()},this.reset=function(){this.transmuxPipeline_.headOfPipeline&&this.transmuxPipeline_.headOfPipeline.reset()},this.resetCaptions=function(){this.transmuxPipeline_.captionStream&&this.transmuxPipeline_.captionStream.reset()}},As.prototype=new e;var Qu={Transmuxer:As},Kl=function(F){return F>>>0},Ju=function(F){return("00"+F.toString(16)).slice(-2)},Vs={toUnsigned:Kl,toHexString:Ju},ya=function(F){var H="";return H+=String.fromCharCode(F[0]),H+=String.fromCharCode(F[1]),H+=String.fromCharCode(F[2]),H+=String.fromCharCode(F[3]),H},cs=ya,Ds=Vs.toUnsigned,Gc=function le(F,H){var z=[],q,Z,te,ge,_e;if(!H.length)return null;for(q=0;q<F.byteLength;)Z=Ds(F[q]<<24|F[q+1]<<16|F[q+2]<<8|F[q+3]),te=cs(F.subarray(q+4,q+8)),ge=Z>1?q+Z:F.byteLength,te===H[0]&&(H.length===1?z.push(F.subarray(q+8,ge)):(_e=le(F.subarray(q+8,ge),H.slice(1)),_e.length&&(z=z.concat(_e)))),q=ge;return z},un=Gc,Xl=Vs.toUnsigned,Kc=i.getUint64,Li=function(F){var H={version:F[0],flags:new Uint8Array(F.subarray(1,4))};return H.version===1?H.baseMediaDecodeTime=Kc(F.subarray(4)):H.baseMediaDecodeTime=Xl(F[4]<<24|F[5]<<16|F[6]<<8|F[7]),H},Oi=Li,ds=function(F){return{isLeading:(F[0]&12)>>>2,dependsOn:F[0]&3,isDependedOn:(F[1]&192)>>>6,hasRedundancy:(F[1]&48)>>>4,paddingValue:(F[1]&14)>>>1,isNonSyncSample:F[1]&1,degradationPriority:F[2]<<8|F[3]}},wi=ds,Xa=function(F){var H={version:F[0],flags:new Uint8Array(F.subarray(1,4)),samples:[]},z=new DataView(F.buffer,F.byteOffset,F.byteLength),q=H.flags[2]&1,Z=H.flags[2]&4,te=H.flags[1]&1,ge=H.flags[1]&2,_e=H.flags[1]&4,De=H.flags[1]&8,we=z.getUint32(4),Re=8,at;for(q&&(H.dataOffset=z.getInt32(Re),Re+=4),Z&&we&&(at={flags:wi(F.subarray(Re,Re+4))},Re+=4,te&&(at.duration=z.getUint32(Re),Re+=4),ge&&(at.size=z.getUint32(Re),Re+=4),De&&(H.version===1?at.compositionTimeOffset=z.getInt32(Re):at.compositionTimeOffset=z.getUint32(Re),Re+=4),H.samples.push(at),we--);we--;)at={},te&&(at.duration=z.getUint32(Re),Re+=4),ge&&(at.size=z.getUint32(Re),Re+=4),_e&&(at.flags=wi(F.subarray(Re,Re+4)),Re+=4),De&&(H.version===1?at.compositionTimeOffset=z.getInt32(Re):at.compositionTimeOffset=z.getUint32(Re),Re+=4),H.samples.push(at);return H},En=Xa,Hn=function(F){var H=new DataView(F.buffer,F.byteOffset,F.byteLength),z={version:F[0],flags:new Uint8Array(F.subarray(1,4)),trackId:H.getUint32(4)},q=z.flags[2]&1,Z=z.flags[2]&2,te=z.flags[2]&8,ge=z.flags[2]&16,_e=z.flags[2]&32,De=z.flags[0]&65536,we=z.flags[0]&131072,Re;return Re=8,q&&(Re+=4,z.baseDataOffset=H.getUint32(12),Re+=4),Z&&(z.sampleDescriptionIndex=H.getUint32(Re),Re+=4),te&&(z.defaultSampleDuration=H.getUint32(Re),Re+=4),ge&&(z.defaultSampleSize=H.getUint32(Re),Re+=4),_e&&(z.defaultSampleFlags=H.getUint32(Re)),De&&(z.durationIsEmpty=!0),!q&&we&&(z.baseDataOffsetIsMoof=!0),z},Vi=Hn,Ya=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Co;typeof window<"u"?Co=window:typeof Ya<"u"?Co=Ya:typeof self<"u"?Co=self:Co={};var fl=Co,ih=xe.discardEmulationPreventionBytes,sh=Zr.CaptionStream,pl=function(F,H){for(var z=F,q=0;q<H.length;q++){var Z=H[q];if(z<Z.size)return Z;z-=Z.size}return null},Zu=function(F,H,z){var q=new DataView(F.buffer,F.byteOffset,F.byteLength),Z={logs:[],seiNals:[]},te,ge,_e,De;for(ge=0;ge+4<F.length;ge+=_e)if(_e=q.getUint32(ge),ge+=4,!(_e<=0))switch(F[ge]&31){case 6:var we=F.subarray(ge+1,ge+1+_e),Re=pl(ge,H);if(te={nalUnitType:"sei_rbsp",size:_e,data:we,escapedRBSP:ih(we),trackId:z},Re)te.pts=Re.pts,te.dts=Re.dts,De=Re;else if(De)te.pts=De.pts,te.dts=De.dts;else{Z.logs.push({level:"warn",message:"We've encountered a nal unit without data at "+ge+" for trackId "+z+". See mux.js#223."});break}Z.seiNals.push(te);break}return Z},Qa=function(F,H,z){var q=H,Z=z.defaultSampleDuration||0,te=z.defaultSampleSize||0,ge=z.trackId,_e=[];return F.forEach(function(De){var we=En(De),Re=we.samples;Re.forEach(function(at){at.duration===void 0&&(at.duration=Z),at.size===void 0&&(at.size=te),at.trackId=ge,at.dts=q,at.compositionTimeOffset===void 0&&(at.compositionTimeOffset=0),typeof q=="bigint"?(at.pts=q+fl.BigInt(at.compositionTimeOffset),q+=fl.BigInt(at.duration)):(at.pts=q+at.compositionTimeOffset,q+=at.duration)}),_e=_e.concat(Re)}),_e},Ws=function(F,H){var z=un(F,["moof","traf"]),q=un(F,["mdat"]),Z={},te=[];return q.forEach(function(ge,_e){var De=z[_e];te.push({mdat:ge,traf:De})}),te.forEach(function(ge){var _e=ge.mdat,De=ge.traf,we=un(De,["tfhd"]),Re=Vi(we[0]),at=Re.trackId,Mt=un(De,["tfdt"]),zt=Mt.length>0?Oi(Mt[0]).baseMediaDecodeTime:0,nt=un(De,["trun"]),ar,In;H===at&&nt.length>0&&(ar=Qa(nt,zt,Re),In=Zu(_e,ar,at),Z[at]||(Z[at]={seiNals:[],logs:[]}),Z[at].seiNals=Z[at].seiNals.concat(In.seiNals),Z[at].logs=Z[at].logs.concat(In.logs))}),Z},Ja=function(F,H,z){var q;if(H===null)return null;q=Ws(F,H);var Z=q[H]||{};return{seiNals:Z.seiNals,logs:Z.logs,timescale:z}},Mi=function(){var F=!1,H,z,q,Z,te,ge;this.isInitialized=function(){return F},this.init=function(_e){H=new sh,F=!0,ge=_e?_e.isPartial:!1,H.on("data",function(De){De.startTime=De.startPts/Z,De.endTime=De.endPts/Z,te.captions.push(De),te.captionStreams[De.stream]=!0}),H.on("log",function(De){te.logs.push(De)})},this.isNewInit=function(_e,De){return _e&&_e.length===0||De&&typeof De=="object"&&Object.keys(De).length===0?!1:q!==_e[0]||Z!==De[q]},this.parse=function(_e,De,we){var Re;if(this.isInitialized()){if(!De||!we)return null;if(this.isNewInit(De,we))q=De[0],Z=we[q];else if(q===null||!Z)return z.push(_e),null}else return null;for(;z.length>0;){var at=z.shift();this.parse(at,De,we)}return Re=Ja(_e,q,Z),Re&&Re.logs&&(te.logs=te.logs.concat(Re.logs)),Re===null||!Re.seiNals?te.logs.length?{logs:te.logs,captions:[],captionStreams:[]}:null:(this.pushNals(Re.seiNals),this.flushStream(),te)},this.pushNals=function(_e){if(!this.isInitialized()||!_e||_e.length===0)return null;_e.forEach(function(De){H.push(De)})},this.flushStream=function(){if(!this.isInitialized())return null;ge?H.partialFlush():H.flush()},this.clearParsedCaptions=function(){te.captions=[],te.captionStreams={},te.logs=[]},this.resetCaptionStream=function(){if(!this.isInitialized())return null;H.reset()},this.clearAllCaptions=function(){this.clearParsedCaptions(),this.resetCaptionStream()},this.reset=function(){z=[],q=null,Z=null,te?this.clearParsedCaptions():te={captions:[],captionStreams:{},logs:[]},this.resetCaptionStream()},this.reset()},Xc=Mi,wo=Vs.toUnsigned,Za=Vs.toHexString,ec=i.getUint64,Yc,Yl,Qc,xa,Jc,Eo;Yc=function(F){var H={},z=un(F,["moov","trak"]);return z.reduce(function(q,Z){var te,ge,_e,De,we;return te=un(Z,["tkhd"])[0],!te||(ge=te[0],_e=ge===0?12:20,De=wo(te[_e]<<24|te[_e+1]<<16|te[_e+2]<<8|te[_e+3]),we=un(Z,["mdia","mdhd"])[0],!we)?null:(ge=we[0],_e=ge===0?12:20,q[De]=wo(we[_e]<<24|we[_e+1]<<16|we[_e+2]<<8|we[_e+3]),q)},H)},Yl=function(F,H){var z;z=un(H,["moof","traf"]);var q=z.reduce(function(Z,te){var ge=un(te,["tfhd"])[0],_e=wo(ge[4]<<24|ge[5]<<16|ge[6]<<8|ge[7]),De=F[_e]||9e4,we=un(te,["tfdt"])[0],Re=new DataView(we.buffer,we.byteOffset,we.byteLength),at;we[0]===1?at=ec(we.subarray(4,12)):at=Re.getUint32(4);var Mt;return typeof at=="bigint"?Mt=at/fl.BigInt(De):typeof at=="number"&&!isNaN(at)&&(Mt=at/De),Mt<Number.MAX_SAFE_INTEGER&&(Mt=Number(Mt)),Mt<Z&&(Z=Mt),Z},1/0);return typeof q=="bigint"||isFinite(q)?q:0},Qc=function(F,H){var z=un(H,["moof","traf"]),q=0,Z=0,te;if(z&&z.length){var ge=un(z[0],["tfhd"])[0],_e=un(z[0],["trun"])[0],De=un(z[0],["tfdt"])[0];if(ge){var we=Vi(ge);te=we.trackId}if(De){var Re=Oi(De);q=Re.baseMediaDecodeTime}if(_e){var at=En(_e);at.samples&&at.samples.length&&(Z=at.samples[0].compositionTimeOffset||0)}}var Mt=F[te]||9e4;typeof q=="bigint"&&(Z=fl.BigInt(Z),Mt=fl.BigInt(Mt));var zt=(q+Z)/Mt;return typeof zt=="bigint"&&zt<Number.MAX_SAFE_INTEGER&&(zt=Number(zt)),zt},xa=function(F){var H=un(F,["moov","trak"]),z=[];return H.forEach(function(q){var Z=un(q,["mdia","hdlr"]),te=un(q,["tkhd"]);Z.forEach(function(ge,_e){var De=cs(ge.subarray(8,12)),we=te[_e],Re,at,Mt;De==="vide"&&(Re=new DataView(we.buffer,we.byteOffset,we.byteLength),at=Re.getUint8(0),Mt=at===0?Re.getUint32(12):Re.getUint32(20),z.push(Mt))})}),z},Eo=function(F){var H=F[0],z=H===0?12:20;return wo(F[z]<<24|F[z+1]<<16|F[z+2]<<8|F[z+3])},Jc=function(F){var H=un(F,["moov","trak"]),z=[];return H.forEach(function(q){var Z={},te=un(q,["tkhd"])[0],ge,_e;te&&(ge=new DataView(te.buffer,te.byteOffset,te.byteLength),_e=ge.getUint8(0),Z.id=_e===0?ge.getUint32(12):ge.getUint32(20));var De=un(q,["mdia","hdlr"])[0];if(De){var we=cs(De.subarray(8,12));we==="vide"?Z.type="video":we==="soun"?Z.type="audio":Z.type=we}var Re=un(q,["mdia","minf","stbl","stsd"])[0];if(Re){var at=Re.subarray(8);Z.codec=cs(at.subarray(4,8));var Mt=un(at,[Z.codec])[0],zt,nt;Mt&&(/^[asm]vc[1-9]$/i.test(Z.codec)?(zt=Mt.subarray(78),nt=cs(zt.subarray(4,8)),nt==="avcC"&&zt.length>11?(Z.codec+=".",Z.codec+=Za(zt[9]),Z.codec+=Za(zt[10]),Z.codec+=Za(zt[11])):Z.codec="avc1.4d400d"):/^mp4[a,v]$/i.test(Z.codec)?(zt=Mt.subarray(28),nt=cs(zt.subarray(4,8)),nt==="esds"&&zt.length>20&&zt[19]!==0?(Z.codec+="."+Za(zt[19]),Z.codec+="."+Za(zt[20]>>>2&63).replace(/^0/,"")):Z.codec="mp4a.40.2"):Z.codec=Z.codec.toLowerCase())}var ar=un(q,["mdia","mdhd"])[0];ar&&(Z.timescale=Eo(ar)),z.push(Z)}),z};var Zc={findBox:un,parseType:cs,timescale:Yc,startTime:Yl,compositionStartTime:Qc,videoTrackIds:xa,tracks:Jc,getTimescaleFromMediaHeader:Eo},ed=function(F){var H=F[1]&31;return H<<=8,H|=F[2],H},ko=function(F){return!!(F[1]&64)},Ao=function(F){var H=0;return(F[3]&48)>>>4>1&&(H+=F[4]+1),H},ah=function(F,H){var z=ed(F);return z===0?"pat":z===H?"pmt":H?"pes":null},oh=function(F){var H=ko(F),z=4+Ao(F);return H&&(z+=F[z]+1),(F[z+10]&31)<<8|F[z+11]},lh=function(F){var H={},z=ko(F),q=4+Ao(F);if(z&&(q+=F[q]+1),!!(F[q+5]&1)){var Z,te,ge;Z=(F[q+1]&15)<<8|F[q+2],te=3+Z-4,ge=(F[q+10]&15)<<8|F[q+11];for(var _e=12+ge;_e<te;){var De=q+_e;H[(F[De+1]&31)<<8|F[De+2]]=F[De],_e+=((F[De+3]&15)<<8|F[De+4])+5}return H}},ml=function(F,H){var z=ed(F),q=H[z];switch(q){case Br.H264_STREAM_TYPE:return"video";case Br.ADTS_STREAM_TYPE:return"audio";case Br.METADATA_STREAM_TYPE:return"timed-metadata";default:return null}},gl=function(F){var H=ko(F);if(!H)return null;var z=4+Ao(F);if(z>=F.byteLength)return null;var q=null,Z;return Z=F[z+7],Z&192&&(q={},q.pts=(F[z+9]&14)<<27|(F[z+10]&255)<<20|(F[z+11]&254)<<12|(F[z+12]&255)<<5|(F[z+13]&254)>>>3,q.pts*=4,q.pts+=(F[z+13]&6)>>>1,q.dts=q.pts,Z&64&&(q.dts=(F[z+14]&14)<<27|(F[z+15]&255)<<20|(F[z+16]&254)<<12|(F[z+17]&255)<<5|(F[z+18]&254)>>>3,q.dts*=4,q.dts+=(F[z+18]&6)>>>1)),q},tc=function(F){switch(F){case 5:return"slice_layer_without_partitioning_rbsp_idr";case 6:return"sei_rbsp";case 7:return"seq_parameter_set_rbsp";case 8:return"pic_parameter_set_rbsp";case 9:return"access_unit_delimiter_rbsp";default:return null}},Ql=function(F){for(var H=4+Ao(F),z=F.subarray(H),q=0,Z=0,te=!1,ge;Z<z.byteLength-3;Z++)if(z[Z+2]===1){q=Z+5;break}for(;q<z.byteLength;)switch(z[q]){case 0:if(z[q-1]!==0){q+=2;break}else if(z[q-2]!==0){q++;break}Z+3!==q-2&&(ge=tc(z[Z+3]&31),ge==="slice_layer_without_partitioning_rbsp_idr"&&(te=!0));do q++;while(z[q]!==1&&q<z.length);Z=q-2,q+=3;break;case 1:if(z[q-1]!==0||z[q-2]!==0){q+=3;break}ge=tc(z[Z+3]&31),ge==="slice_layer_without_partitioning_rbsp_idr"&&(te=!0),Z=q-2,q+=3;break;default:q+=3;break}return z=z.subarray(Z),q-=Z,Z=0,z&&z.byteLength>3&&(ge=tc(z[Z+3]&31),ge==="slice_layer_without_partitioning_rbsp_idr"&&(te=!0)),te},td={parseType:ah,parsePat:oh,parsePmt:lh,parsePayloadUnitStartIndicator:ko,parsePesType:ml,parsePesTime:gl,videoPacketContainsKeyFrame:Ql},qs=Cs.handleRollover,sn={};sn.ts=td,sn.aac=Ri;var Is=vt.ONE_SECOND_IN_TS,cn=188,Wi=71,uh=function(F,H){for(var z=0,q=cn,Z,te;q<F.byteLength;){if(F[z]===Wi&&F[q]===Wi){switch(Z=F.subarray(z,q),te=sn.ts.parseType(Z,H.pid),te){case"pat":H.pid=sn.ts.parsePat(Z);break;case"pmt":var ge=sn.ts.parsePmt(Z);H.table=H.table||{},Object.keys(ge).forEach(function(_e){H.table[_e]=ge[_e]});break}z+=cn,q+=cn;continue}z++,q++}},rd=function(F,H,z){for(var q=0,Z=cn,te,ge,_e,De,we,Re=!1;Z<=F.byteLength;){if(F[q]===Wi&&(F[Z]===Wi||Z===F.byteLength)){switch(te=F.subarray(q,Z),ge=sn.ts.parseType(te,H.pid),ge){case"pes":_e=sn.ts.parsePesType(te,H.table),De=sn.ts.parsePayloadUnitStartIndicator(te),_e==="audio"&&De&&(we=sn.ts.parsePesTime(te),we&&(we.type="audio",z.audio.push(we),Re=!0));break}if(Re)break;q+=cn,Z+=cn;continue}q++,Z++}for(Z=F.byteLength,q=Z-cn,Re=!1;q>=0;){if(F[q]===Wi&&(F[Z]===Wi||Z===F.byteLength)){switch(te=F.subarray(q,Z),ge=sn.ts.parseType(te,H.pid),ge){case"pes":_e=sn.ts.parsePesType(te,H.table),De=sn.ts.parsePayloadUnitStartIndicator(te),_e==="audio"&&De&&(we=sn.ts.parsePesTime(te),we&&(we.type="audio",z.audio.push(we),Re=!0));break}if(Re)break;q-=cn,Z-=cn;continue}q--,Z--}},Ps=function(F,H,z){for(var q=0,Z=cn,te,ge,_e,De,we,Re,at,Mt,zt=!1,nt={data:[],size:0};Z<F.byteLength;){if(F[q]===Wi&&F[Z]===Wi){switch(te=F.subarray(q,Z),ge=sn.ts.parseType(te,H.pid),ge){case"pes":if(_e=sn.ts.parsePesType(te,H.table),De=sn.ts.parsePayloadUnitStartIndicator(te),_e==="video"&&(De&&!zt&&(we=sn.ts.parsePesTime(te),we&&(we.type="video",z.video.push(we),zt=!0)),!z.firstKeyFrame)){if(De&&nt.size!==0){for(Re=new Uint8Array(nt.size),at=0;nt.data.length;)Mt=nt.data.shift(),Re.set(Mt,at),at+=Mt.byteLength;if(sn.ts.videoPacketContainsKeyFrame(Re)){var ar=sn.ts.parsePesTime(Re);ar?(z.firstKeyFrame=ar,z.firstKeyFrame.type="video"):console.warn("Failed to extract PTS/DTS from PES at first keyframe. This could be an unusual TS segment, or else mux.js did not parse your TS segment correctly. If you know your TS segments do contain PTS/DTS on keyframes please file a bug report! You can try ffprobe to double check for yourself.")}nt.size=0}nt.data.push(te),nt.size+=te.byteLength}break}if(zt&&z.firstKeyFrame)break;q+=cn,Z+=cn;continue}q++,Z++}for(Z=F.byteLength,q=Z-cn,zt=!1;q>=0;){if(F[q]===Wi&&F[Z]===Wi){switch(te=F.subarray(q,Z),ge=sn.ts.parseType(te,H.pid),ge){case"pes":_e=sn.ts.parsePesType(te,H.table),De=sn.ts.parsePayloadUnitStartIndicator(te),_e==="video"&&De&&(we=sn.ts.parsePesTime(te),we&&(we.type="video",z.video.push(we),zt=!0));break}if(zt)break;q-=cn,Z-=cn;continue}q--,Z--}},nd=function(F,H){if(F.audio&&F.audio.length){var z=H;(typeof z>"u"||isNaN(z))&&(z=F.audio[0].dts),F.audio.forEach(function(te){te.dts=qs(te.dts,z),te.pts=qs(te.pts,z),te.dtsTime=te.dts/Is,te.ptsTime=te.pts/Is})}if(F.video&&F.video.length){var q=H;if((typeof q>"u"||isNaN(q))&&(q=F.video[0].dts),F.video.forEach(function(te){te.dts=qs(te.dts,q),te.pts=qs(te.pts,q),te.dtsTime=te.dts/Is,te.ptsTime=te.pts/Is}),F.firstKeyFrame){var Z=F.firstKeyFrame;Z.dts=qs(Z.dts,q),Z.pts=qs(Z.pts,q),Z.dtsTime=Z.dts/Is,Z.ptsTime=Z.pts/Is}}},vl=function(F){for(var H=!1,z=0,q=null,Z=null,te=0,ge=0,_e;F.length-ge>=3;){var De=sn.aac.parseType(F,ge);switch(De){case"timed-metadata":if(F.length-ge<10){H=!0;break}if(te=sn.aac.parseId3TagSize(F,ge),te>F.length){H=!0;break}Z===null&&(_e=F.subarray(ge,ge+te),Z=sn.aac.parseAacTimestamp(_e)),ge+=te;break;case"audio":if(F.length-ge<7){H=!0;break}if(te=sn.aac.parseAdtsSize(F,ge),te>F.length){H=!0;break}q===null&&(_e=F.subarray(ge,ge+te),q=sn.aac.parseSampleRate(_e)),z++,ge+=te;break;default:ge++;break}if(H)return null}if(q===null||Z===null)return null;var we=Is/q,Re={audio:[{type:"audio",dts:Z,pts:Z},{type:"audio",dts:Z+z*1024*we,pts:Z+z*1024*we}]};return Re},yl=function(F){var H={pid:null,table:null},z={};uh(F,H);for(var q in H.table)if(H.table.hasOwnProperty(q)){var Z=H.table[q];switch(Z){case Br.H264_STREAM_TYPE:z.video=[],Ps(F,H,z),z.video.length===0&&delete z.video;break;case Br.ADTS_STREAM_TYPE:z.audio=[],rd(F,H,z),z.audio.length===0&&delete z.audio;break}}return z},rc=function(F,H){var z=sn.aac.isLikelyAacData(F),q;return z?q=vl(F):q=yl(F),!q||!q.audio&&!q.video?null:(nd(q,H),q)},Jl={inspect:rc,parseAudioPes_:rd},ch=function(F,H){H.on("data",function(z){var q=z.initSegment;z.initSegment={data:q.buffer,byteOffset:q.byteOffset,byteLength:q.byteLength};var Z=z.data;z.data=Z.buffer,F.postMessage({action:"data",segment:z,byteOffset:Z.byteOffset,byteLength:Z.byteLength},[z.data])}),H.on("done",function(z){F.postMessage({action:"done"})}),H.on("gopInfo",function(z){F.postMessage({action:"gopInfo",gopInfo:z})}),H.on("videoSegmentTimingInfo",function(z){var q={start:{decode:vt.videoTsToSeconds(z.start.dts),presentation:vt.videoTsToSeconds(z.start.pts)},end:{decode:vt.videoTsToSeconds(z.end.dts),presentation:vt.videoTsToSeconds(z.end.pts)},baseMediaDecodeTime:vt.videoTsToSeconds(z.baseMediaDecodeTime)};z.prependedContentDuration&&(q.prependedContentDuration=vt.videoTsToSeconds(z.prependedContentDuration)),F.postMessage({action:"videoSegmentTimingInfo",videoSegmentTimingInfo:q})}),H.on("audioSegmentTimingInfo",function(z){var q={start:{decode:vt.videoTsToSeconds(z.start.dts),presentation:vt.videoTsToSeconds(z.start.pts)},end:{decode:vt.videoTsToSeconds(z.end.dts),presentation:vt.videoTsToSeconds(z.end.pts)},baseMediaDecodeTime:vt.videoTsToSeconds(z.baseMediaDecodeTime)};z.prependedContentDuration&&(q.prependedContentDuration=vt.videoTsToSeconds(z.prependedContentDuration)),F.postMessage({action:"audioSegmentTimingInfo",audioSegmentTimingInfo:q})}),H.on("id3Frame",function(z){F.postMessage({action:"id3Frame",id3Frame:z})}),H.on("caption",function(z){F.postMessage({action:"caption",caption:z})}),H.on("trackinfo",function(z){F.postMessage({action:"trackinfo",trackInfo:z})}),H.on("audioTimingInfo",function(z){F.postMessage({action:"audioTimingInfo",audioTimingInfo:{start:vt.videoTsToSeconds(z.start),end:vt.videoTsToSeconds(z.end)}})}),H.on("videoTimingInfo",function(z){F.postMessage({action:"videoTimingInfo",videoTimingInfo:{start:vt.videoTsToSeconds(z.start),end:vt.videoTsToSeconds(z.end)}})}),H.on("log",function(z){F.postMessage({action:"log",log:z})})},nc=(function(){function le(H,z){this.options=z||{},this.self=H,this.init()}var F=le.prototype;return F.init=function(){this.transmuxer&&this.transmuxer.dispose(),this.transmuxer=new Qu.Transmuxer(this.options),ch(this.self,this.transmuxer)},F.pushMp4Captions=function(z){this.captionParser||(this.captionParser=new Xc,this.captionParser.init());var q=new Uint8Array(z.data,z.byteOffset,z.byteLength),Z=this.captionParser.parse(q,z.trackIds,z.timescales);this.self.postMessage({action:"mp4Captions",captions:Z&&Z.captions||[],logs:Z&&Z.logs||[],data:q.buffer},[q.buffer])},F.probeMp4StartTime=function(z){var q=z.timescales,Z=z.data,te=Zc.startTime(q,Z);this.self.postMessage({action:"probeMp4StartTime",startTime:te,data:Z},[Z.buffer])},F.probeMp4Tracks=function(z){var q=z.data,Z=Zc.tracks(q);this.self.postMessage({action:"probeMp4Tracks",tracks:Z,data:q},[q.buffer])},F.probeTs=function(z){var q=z.data,Z=z.baseStartTime,te=typeof Z=="number"&&!isNaN(Z)?Z*vt.ONE_SECOND_IN_TS:void 0,ge=Jl.inspect(q,te),_e=null;ge&&(_e={hasVideo:ge.video&&ge.video.length===2||!1,hasAudio:ge.audio&&ge.audio.length===2||!1},_e.hasVideo&&(_e.videoStart=ge.video[0].ptsTime),_e.hasAudio&&(_e.audioStart=ge.audio[0].ptsTime)),this.self.postMessage({action:"probeTs",result:_e,data:q},[q.buffer])},F.clearAllMp4Captions=function(){this.captionParser&&this.captionParser.clearAllCaptions()},F.clearParsedMp4Captions=function(){this.captionParser&&this.captionParser.clearParsedCaptions()},F.push=function(z){var q=new Uint8Array(z.data,z.byteOffset,z.byteLength);this.transmuxer.push(q)},F.reset=function(){this.transmuxer.reset()},F.setTimestampOffset=function(z){var q=z.timestampOffset||0;this.transmuxer.setBaseMediaDecodeTime(Math.round(vt.secondsToVideoTs(q)))},F.setAudioAppendStart=function(z){this.transmuxer.setAudioAppendStart(Math.ceil(vt.secondsToVideoTs(z.appendStart)))},F.setRemux=function(z){this.transmuxer.setRemux(z.remux)},F.flush=function(z){this.transmuxer.flush(),self.postMessage({action:"done",type:"transmuxed"})},F.endTimeline=function(){this.transmuxer.endTimeline(),self.postMessage({action:"endedtimeline",type:"transmuxed"})},F.alignGopsWith=function(z){this.transmuxer.alignGopsWith(z.gopsToAlignWith.slice())},le})();self.onmessage=function(le){if(le.data.action==="init"&&le.data.options){this.messageHandlers=new nc(self,le.data.options);return}this.messageHandlers||(this.messageHandlers=new nc(self)),le.data&&le.data.action&&le.data.action!=="init"&&this.messageHandlers[le.data.action]&&this.messageHandlers[le.data.action](le.data)}})),p_e=l9(f_e),m_e=function(e,t,n){var i=e.data.segment,s=i.type,a=i.initSegment,o=i.captions,l=i.captionStreams,u=i.metadata,c=i.videoFrameDtsTime,h=i.videoFramePtsTime;t.buffer.push({captions:o,captionStreams:l,metadata:u});var f=e.data.segment.boxes||{data:e.data.segment.data},g={type:s,data:new Uint8Array(f.data,f.data.byteOffset,f.data.byteLength),initSegment:new Uint8Array(a.data,a.byteOffset,a.byteLength)};typeof c<"u"&&(g.videoFrameDtsTime=c),typeof h<"u"&&(g.videoFramePtsTime=h),n(g)},g_e=function(e){var t=e.transmuxedData,n=e.callback;t.buffer=[],n(t)},v_e=function(e,t){t.gopInfo=e.data.gopInfo},d9=function(e){var t=e.transmuxer,n=e.bytes,i=e.audioAppendStart,s=e.gopsToAlignWith,a=e.remux,o=e.onData,l=e.onTrackInfo,u=e.onAudioTimingInfo,c=e.onVideoTimingInfo,h=e.onVideoSegmentTimingInfo,f=e.onAudioSegmentTimingInfo,g=e.onId3,v=e.onCaptions,y=e.onDone,_=e.onEndedTimeline,C=e.onTransmuxerLog,E=e.isEndOfTimeline,D={buffer:[]},I=E,k=function(B){t.currentTransmux===e&&(B.data.action==="data"&&m_e(B,D,o),B.data.action==="trackinfo"&&l(B.data.trackInfo),B.data.action==="gopInfo"&&v_e(B,D),B.data.action==="audioTimingInfo"&&u(B.data.audioTimingInfo),B.data.action==="videoTimingInfo"&&c(B.data.videoTimingInfo),B.data.action==="videoSegmentTimingInfo"&&h(B.data.videoSegmentTimingInfo),B.data.action==="audioSegmentTimingInfo"&&f(B.data.audioSegmentTimingInfo),B.data.action==="id3Frame"&&g([B.data.id3Frame],B.data.id3Frame.dispatchType),B.data.action==="caption"&&v(B.data.caption),B.data.action==="endedtimeline"&&(I=!1,_()),B.data.action==="log"&&C(B.data.log),B.data.type==="transmuxed"&&(I||(t.onmessage=null,g_e({transmuxedData:D,callback:y}),h9(t))))};if(t.onmessage=k,i&&t.postMessage({action:"setAudioAppendStart",appendStart:i}),Array.isArray(s)&&t.postMessage({action:"alignGopsWith",gopsToAlignWith:s}),typeof a<"u"&&t.postMessage({action:"setRemux",remux:a}),n.byteLength){var P=n instanceof ArrayBuffer?n:n.buffer,N=n instanceof ArrayBuffer?0:n.byteOffset;t.postMessage({action:"push",data:P,byteOffset:N,byteLength:n.byteLength},[P])}E&&t.postMessage({action:"endTimeline"}),t.postMessage({action:"flush"})},h9=function(e){e.currentTransmux=null,e.transmuxQueue.length&&(e.currentTransmux=e.transmuxQueue.shift(),typeof e.currentTransmux=="function"?e.currentTransmux():d9(e.currentTransmux))},sF=function(e,t){e.postMessage({action:t}),h9(e)},f9=function(e,t){if(!t.currentTransmux){t.currentTransmux=e,sF(t,e);return}t.transmuxQueue.push(sF.bind(null,t,e))},y_e=function(e){f9("reset",e)},x_e=function(e){f9("endTimeline",e)},p9=function(e){if(!e.transmuxer.currentTransmux){e.transmuxer.currentTransmux=e,d9(e);return}e.transmuxer.transmuxQueue.push(e)},__e=function(e){var t=new p_e;t.currentTransmux=null,t.transmuxQueue=[];var n=t.terminate;return t.terminate=function(){return t.currentTransmux=null,t.transmuxQueue.length=0,n.call(t)},t.postMessage({action:"init",options:e}),t},pw={reset:y_e,endTimeline:x_e,transmux:p9,createTransmuxer:__e},Pb=function(e){var t=e.transmuxer,n=e.endAction||e.action,i=e.callback,s=sr({},e,{endAction:null,transmuxer:null,callback:null}),a=function u(c){c.data.action===n&&(t.removeEventListener("message",u),c.data.data&&(c.data.data=new Uint8Array(c.data.data,e.byteOffset||0,e.byteLength||c.data.data.byteLength),e.data&&(e.data=c.data.data)),i(c.data))};if(t.addEventListener("message",a),e.data){var o=e.data instanceof ArrayBuffer;s.byteOffset=o?0:e.data.byteOffset,s.byteLength=e.data.byteLength;var l=[o?e.data:e.data.buffer];t.postMessage(s,l)}else t.postMessage(s)},Au={FAILURE:2,TIMEOUT:-101,ABORTED:-102},xE=function(e){e.forEach(function(t){t.abort()})},b_e=function(e){return{bandwidth:e.bandwidth,bytesReceived:e.bytesReceived||0,roundTripTime:e.roundTripTime||0}},S_e=function(e){var t=e.target,n=Date.now()-t.requestTime,i={bandwidth:1/0,bytesReceived:0,roundTripTime:n||0};return i.bytesReceived=e.loaded,i.bandwidth=Math.floor(i.bytesReceived/i.roundTripTime*8*1e3),i},gD=function(e,t){return t.timedout?{status:t.status,message:"HLS request timed-out at URL: "+t.uri,code:Au.TIMEOUT,xhr:t}:t.aborted?{status:t.status,message:"HLS request aborted at URL: "+t.uri,code:Au.ABORTED,xhr:t}:e?{status:t.status,message:"HLS request errored at URL: "+t.uri,code:Au.FAILURE,xhr:t}:t.responseType==="arraybuffer"&&t.response.byteLength===0?{status:t.status,message:"Empty HLS response at URL: "+t.uri,code:Au.FAILURE,xhr:t}:null},aF=function(e,t,n){return function(i,s){var a=s.response,o=gD(i,s);if(o)return n(o,e);if(a.byteLength!==16)return n({status:s.status,message:"Invalid HLS key at URL: "+s.uri,code:Au.FAILURE,xhr:s},e);for(var l=new DataView(a),u=new Uint32Array([l.getUint32(0),l.getUint32(4),l.getUint32(8),l.getUint32(12)]),c=0;c<t.length;c++)t[c].bytes=u;return n(null,e)}},m9=function(e,t){var n=MA(e.map.bytes);if(n!=="mp4"){var i=e.map.resolvedUri||e.map.uri;return t({internal:!0,message:"Found unsupported "+(n||"unknown")+" container for initialization segment at URL: "+i,code:Au.FAILURE})}Pb({action:"probeMp4Tracks",data:e.map.bytes,transmuxer:e.transmuxer,callback:function(a){var o=a.tracks,l=a.data;return e.map.bytes=l,o.forEach(function(u){e.map.tracks=e.map.tracks||{},!e.map.tracks[u.type]&&(e.map.tracks[u.type]=u,typeof u.id=="number"&&u.timescale&&(e.map.timescales=e.map.timescales||{},e.map.timescales[u.id]=u.timescale))}),t(null)}})},T_e=function(e){var t=e.segment,n=e.finishProcessingFn;return function(i,s){var a=gD(i,s);if(a)return n(a,t);var o=new Uint8Array(s.response);if(t.map.key)return t.map.encryptedBytes=o,n(null,t);t.map.bytes=o,m9(t,function(l){if(l)return l.xhr=s,l.status=s.status,n(l,t);n(null,t)})}},C_e=function(e){var t=e.segment,n=e.finishProcessingFn,i=e.responseType;return function(s,a){var o=gD(s,a);if(o)return n(o,t);var l=i==="arraybuffer"||!a.responseText?a.response:d_e(a.responseText.substring(t.lastReachedChar||0));return t.stats=b_e(a),t.key?t.encryptedBytes=new Uint8Array(l):t.bytes=new Uint8Array(l),n(null,t)}},w_e=function(e){var t=e.segment,n=e.bytes,i=e.trackInfoFn,s=e.timingInfoFn,a=e.videoSegmentTimingInfoFn,o=e.audioSegmentTimingInfoFn,l=e.id3Fn,u=e.captionsFn,c=e.isEndOfTimeline,h=e.endedTimelineFn,f=e.dataFn,g=e.doneFn,v=e.onTransmuxerLog,y=t.map&&t.map.tracks||{},_=!!(y.audio&&y.video),C=s.bind(null,t,"audio","start"),E=s.bind(null,t,"audio","end"),D=s.bind(null,t,"video","start"),I=s.bind(null,t,"video","end"),k=function(){return p9({bytes:n,transmuxer:t.transmuxer,audioAppendStart:t.audioAppendStart,gopsToAlignWith:t.gopsToAlignWith,remux:_,onData:function(U){U.type=U.type==="combined"?"video":U.type,f(t,U)},onTrackInfo:function(U){i&&(_&&(U.isMuxed=!0),i(t,U))},onAudioTimingInfo:function(U){C&&typeof U.start<"u"&&(C(U.start),C=null),E&&typeof U.end<"u"&&E(U.end)},onVideoTimingInfo:function(U){D&&typeof U.start<"u"&&(D(U.start),D=null),I&&typeof U.end<"u"&&I(U.end)},onVideoSegmentTimingInfo:function(U){a(U)},onAudioSegmentTimingInfo:function(U){o(U)},onId3:function(U,B){l(t,U,B)},onCaptions:function(U){u(t,[U])},isEndOfTimeline:c,onEndedTimeline:function(){h()},onTransmuxerLog:v,onDone:function(U){g&&(U.type=U.type==="combined"?"video":U.type,g(null,t,U))}})};Pb({action:"probeTs",transmuxer:t.transmuxer,data:n,baseStartTime:t.baseStartTime,callback:function(N){t.bytes=n=N.data;var U=N.result;U&&(i(t,{hasAudio:U.hasAudio,hasVideo:U.hasVideo,isMuxed:_}),i=null,U.hasAudio&&!_&&C(U.audioStart),U.hasVideo&&D(U.videoStart),C=null,D=null),k()}})},g9=function(e){var t=e.segment,n=e.bytes,i=e.trackInfoFn,s=e.timingInfoFn,a=e.videoSegmentTimingInfoFn,o=e.audioSegmentTimingInfoFn,l=e.id3Fn,u=e.captionsFn,c=e.isEndOfTimeline,h=e.endedTimelineFn,f=e.dataFn,g=e.doneFn,v=e.onTransmuxerLog,y=new Uint8Array(n);if(Hve(y)){t.isFmp4=!0;var _=t.map.tracks,C={isFmp4:!0,hasVideo:!!_.video,hasAudio:!!_.audio};_.audio&&_.audio.codec&&_.audio.codec!=="enca"&&(C.audioCodec=_.audio.codec),_.video&&_.video.codec&&_.video.codec!=="encv"&&(C.videoCodec=_.video.codec),_.video&&_.audio&&(C.isMuxed=!0),i(t,C);var E=function(I){f(t,{data:y,type:C.hasAudio&&!C.isMuxed?"audio":"video"}),I&&I.length&&u(t,I),g(null,t,{})};Pb({action:"probeMp4StartTime",timescales:t.map.timescales,data:y,transmuxer:t.transmuxer,callback:function(I){var k=I.data,P=I.startTime;if(n=k.buffer,t.bytes=y=k,C.hasAudio&&!C.isMuxed&&s(t,"audio","start",P),C.hasVideo&&s(t,"video","start",P),!_.video||!k.byteLength||!t.transmuxer){E();return}Pb({action:"pushMp4Captions",endAction:"mp4Captions",transmuxer:t.transmuxer,data:y,timescales:t.map.timescales,trackIds:[_.video.id],callback:function(U){n=U.data.buffer,t.bytes=y=U.data,U.logs.forEach(function(B){v(Me.mergeOptions(B,{stream:"mp4CaptionParser"}))}),E(U.captions)}})}});return}if(!t.transmuxer){g(null,t,{});return}if(typeof t.container>"u"&&(t.container=MA(y)),t.container!=="ts"&&t.container!=="aac"){i(t,{hasAudio:!1,hasVideo:!1}),g(null,t,{});return}w_e({segment:t,bytes:n,trackInfoFn:i,timingInfoFn:s,videoSegmentTimingInfoFn:a,audioSegmentTimingInfoFn:o,id3Fn:l,captionsFn:u,isEndOfTimeline:c,endedTimelineFn:h,dataFn:f,doneFn:g,onTransmuxerLog:v})},v9=function(e,t){var n=e.id,i=e.key,s=e.encryptedBytes,a=e.decryptionWorker,o=function u(c){if(c.data.source===n){a.removeEventListener("message",u);var h=c.data.decrypted;t(new Uint8Array(h.bytes,h.byteOffset,h.byteLength))}};a.addEventListener("message",o);var l;i.bytes.slice?l=i.bytes.slice():l=new Uint32Array(Array.prototype.slice.call(i.bytes)),a.postMessage(r9({source:n,encrypted:s,key:l,iv:i.iv}),[s.buffer,l.buffer])},E_e=function(e){var t=e.decryptionWorker,n=e.segment,i=e.trackInfoFn,s=e.timingInfoFn,a=e.videoSegmentTimingInfoFn,o=e.audioSegmentTimingInfoFn,l=e.id3Fn,u=e.captionsFn,c=e.isEndOfTimeline,h=e.endedTimelineFn,f=e.dataFn,g=e.doneFn,v=e.onTransmuxerLog;v9({id:n.requestId,key:n.key,encryptedBytes:n.encryptedBytes,decryptionWorker:t},function(y){n.bytes=y,g9({segment:n,bytes:n.bytes,trackInfoFn:i,timingInfoFn:s,videoSegmentTimingInfoFn:a,audioSegmentTimingInfoFn:o,id3Fn:l,captionsFn:u,isEndOfTimeline:c,endedTimelineFn:h,dataFn:f,doneFn:g,onTransmuxerLog:v})})},k_e=function(e){var t=e.activeXhrs,n=e.decryptionWorker,i=e.trackInfoFn,s=e.timingInfoFn,a=e.videoSegmentTimingInfoFn,o=e.audioSegmentTimingInfoFn,l=e.id3Fn,u=e.captionsFn,c=e.isEndOfTimeline,h=e.endedTimelineFn,f=e.dataFn,g=e.doneFn,v=e.onTransmuxerLog,y=0,_=!1;return function(C,E){if(!_){if(C)return _=!0,xE(t),g(C,E);if(y+=1,y===t.length){var D=function(){if(E.encryptedBytes)return E_e({decryptionWorker:n,segment:E,trackInfoFn:i,timingInfoFn:s,videoSegmentTimingInfoFn:a,audioSegmentTimingInfoFn:o,id3Fn:l,captionsFn:u,isEndOfTimeline:c,endedTimelineFn:h,dataFn:f,doneFn:g,onTransmuxerLog:v});g9({segment:E,bytes:E.bytes,trackInfoFn:i,timingInfoFn:s,videoSegmentTimingInfoFn:a,audioSegmentTimingInfoFn:o,id3Fn:l,captionsFn:u,isEndOfTimeline:c,endedTimelineFn:h,dataFn:f,doneFn:g,onTransmuxerLog:v})};if(E.endOfAllRequests=Date.now(),E.map&&E.map.encryptedBytes&&!E.map.bytes)return v9({decryptionWorker:n,id:E.requestId+"-init",encryptedBytes:E.map.encryptedBytes,key:E.map.key},function(I){E.map.bytes=I,m9(E,function(k){if(k)return xE(t),g(k,E);D()})});D()}}}},A_e=function(e){var t=e.loadendState,n=e.abortFn;return function(i){var s=i.target;s.aborted&&n&&!t.calledAbortFn&&(n(),t.calledAbortFn=!0)}},D_e=function(e){var t=e.segment,n=e.progressFn;return function(i){var s=i.target;if(!s.aborted)return t.stats=Me.mergeOptions(t.stats,S_e(i)),!t.stats.firstBytesReceivedAt&&t.stats.bytesReceived&&(t.stats.firstBytesReceivedAt=Date.now()),n(i,t)}},I_e=function(e){var t=e.xhr,n=e.xhrOptions,i=e.decryptionWorker,s=e.segment,a=e.abortFn,o=e.progressFn,l=e.trackInfoFn,u=e.timingInfoFn,c=e.videoSegmentTimingInfoFn,h=e.audioSegmentTimingInfoFn,f=e.id3Fn,g=e.captionsFn,v=e.isEndOfTimeline,y=e.endedTimelineFn,_=e.dataFn,C=e.doneFn,E=e.onTransmuxerLog,D=[],I=k_e({activeXhrs:D,decryptionWorker:i,trackInfoFn:l,timingInfoFn:u,videoSegmentTimingInfoFn:c,audioSegmentTimingInfoFn:h,id3Fn:f,captionsFn:g,isEndOfTimeline:v,endedTimelineFn:y,dataFn:_,doneFn:C,onTransmuxerLog:E});if(s.key&&!s.key.bytes){var k=[s.key];s.map&&!s.map.bytes&&s.map.key&&s.map.key.resolvedUri===s.key.resolvedUri&&k.push(s.map.key);var P=Me.mergeOptions(n,{uri:s.key.resolvedUri,responseType:"arraybuffer"}),N=aF(s,k,I),U=t(P,N);D.push(U)}if(s.map&&!s.map.bytes){var B=s.map.key&&(!s.key||s.key.resolvedUri!==s.map.key.resolvedUri);if(B){var A=Me.mergeOptions(n,{uri:s.map.key.resolvedUri,responseType:"arraybuffer"}),$=aF(s,[s.map.key],I),W=t(A,$);D.push(W)}var V=Me.mergeOptions(n,{uri:s.map.resolvedUri,responseType:"arraybuffer",headers:vE(s.map)}),Q=T_e({segment:s,finishProcessingFn:I}),ie=t(V,Q);D.push(ie)}var ne=Me.mergeOptions(n,{uri:s.part&&s.part.resolvedUri||s.resolvedUri,responseType:"arraybuffer",headers:vE(s)}),ue=C_e({segment:s,finishProcessingFn:I,responseType:ne.responseType}),se=t(ne,ue);se.addEventListener("progress",D_e({segment:s,progressFn:o})),D.push(se);var ae={};return D.forEach(function(ce){ce.addEventListener("loadend",A_e({loadendState:ae,abortFn:a}))}),function(){return xE(D)}},P_e=zl("CodecUtils"),R_e=function(e){var t=e.attributes||{};if(t.CODECS)return hu(t.CODECS)},y9=function(e,t){var n=t.attributes||{};return e&&e.mediaGroups&&e.mediaGroups.AUDIO&&n.AUDIO&&e.mediaGroups.AUDIO[n.AUDIO]},L_e=function(e,t){if(!y9(e,t))return!0;var n=t.attributes||{},i=e.mediaGroups.AUDIO[n.AUDIO];for(var s in i)if(!i[s].uri&&!i[s].playlists)return!0;return!1},Rb=function(e){var t={};return e.forEach(function(n){var i=n.mediaType,s=n.type,a=n.details;t[i]=t[i]||[],t[i].push(vj(""+s+a))}),Object.keys(t).forEach(function(n){if(t[n].length>1){P_e("multiple "+n+" codecs found as attributes: "+t[n].join(", ")+". Setting playlist codecs to null so that we wait for mux.js to probe segments for real codecs."),t[n]=null;return}t[n]=t[n][0]}),t},oF=function(e){var t=0;return e.audio&&t++,e.video&&t++,t},mg=function(e,t){var n=t.attributes||{},i=Rb(R_e(t)||[]);if(y9(e,t)&&!i.audio&&!L_e(e,t)){var s=Rb(Sge(e,n.AUDIO)||[]);s.audio&&(i.audio=s.audio)}return i},ix=zl("PlaylistSelector"),lF=function(e){if(!(!e||!e.playlist)){var t=e.playlist;return JSON.stringify({id:t.id,bandwidth:e.bandwidth,width:e.width,height:e.height,codecs:t.attributes&&t.attributes.CODECS||""})}},Lb=function(e,t){if(!e)return"";var n=X.getComputedStyle(e);return n?n[t]:""},Up=function(e,t){var n=e.slice();e.sort(function(i,s){var a=t(i,s);return a===0?n.indexOf(i)-n.indexOf(s):a})},vD=function(e,t){var n,i;return e.attributes.BANDWIDTH&&(n=e.attributes.BANDWIDTH),n=n||X.Number.MAX_VALUE,t.attributes.BANDWIDTH&&(i=t.attributes.BANDWIDTH),i=i||X.Number.MAX_VALUE,n-i},O_e=function(e,t){var n,i;return e.attributes.RESOLUTION&&e.attributes.RESOLUTION.width&&(n=e.attributes.RESOLUTION.width),n=n||X.Number.MAX_VALUE,t.attributes.RESOLUTION&&t.attributes.RESOLUTION.width&&(i=t.attributes.RESOLUTION.width),i=i||X.Number.MAX_VALUE,n===i&&e.attributes.BANDWIDTH&&t.attributes.BANDWIDTH?e.attributes.BANDWIDTH-t.attributes.BANDWIDTH:n-i},x9=function(e,t,n,i,s,a){if(e){var o={bandwidth:t,width:n,height:i,limitRenditionByPlayerDimensions:s},l=e.playlists;Fa.isAudioOnly(e)&&(l=a.getAudioTrackPlaylists_(),o.audioOnly=!0);var u=l.map(function(A){var $,W=A.attributes&&A.attributes.RESOLUTION&&A.attributes.RESOLUTION.width,V=A.attributes&&A.attributes.RESOLUTION&&A.attributes.RESOLUTION.height;return $=A.attributes&&A.attributes.BANDWIDTH,$=$||X.Number.MAX_VALUE,{bandwidth:$,width:W,height:V,playlist:A}});Up(u,function(A,$){return A.bandwidth-$.bandwidth}),u=u.filter(function(A){return!Fa.isIncompatible(A.playlist)});var c=u.filter(function(A){return Fa.isEnabled(A.playlist)});c.length||(c=u.filter(function(A){return!Fa.isDisabled(A.playlist)}));var h=c.filter(function(A){return A.bandwidth*es.BANDWIDTH_VARIANCE<t}),f=h[h.length-1],g=h.filter(function(A){return A.bandwidth===f.bandwidth})[0];if(s===!1){var v=g||c[0]||u[0];if(v&&v.playlist){var y="sortedPlaylistReps";return g&&(y="bandwidthBestRep"),c[0]&&(y="enabledPlaylistReps"),ix("choosing "+lF(v)+" using "+y+" with options",o),v.playlist}return ix("could not choose a playlist with options",o),null}var _=h.filter(function(A){return A.width&&A.height});Up(_,function(A,$){return A.width-$.width});var C=_.filter(function(A){return A.width===n&&A.height===i});f=C[C.length-1];var E=C.filter(function(A){return A.bandwidth===f.bandwidth})[0],D,I,k;E||(D=_.filter(function(A){return A.width>n||A.height>i}),I=D.filter(function(A){return A.width===D[0].width&&A.height===D[0].height}),f=I[I.length-1],k=I.filter(function(A){return A.bandwidth===f.bandwidth})[0]);var P;if(a.experimentalLeastPixelDiffSelector){var N=_.map(function(A){return A.pixelDiff=Math.abs(A.width-n)+Math.abs(A.height-i),A});Up(N,function(A,$){return A.pixelDiff===$.pixelDiff?$.bandwidth-A.bandwidth:A.pixelDiff-$.pixelDiff}),P=N[0]}var U=P||k||E||g||c[0]||u[0];if(U&&U.playlist){var B="sortedPlaylistReps";return P?B="leastPixelDiffRep":k?B="resolutionPlusOneRep":E?B="resolutionBestRep":g?B="bandwidthBestRep":c[0]&&(B="enabledPlaylistReps"),ix("choosing "+lF(U)+" using "+B+" with options",o),U.playlist}return ix("could not choose a playlist with options",o),null}},uF=function(){var e=this.useDevicePixelRatio&&X.devicePixelRatio||1;return x9(this.playlists.master,this.systemBandwidth,parseInt(Lb(this.tech_.el(),"width"),10)*e,parseInt(Lb(this.tech_.el(),"height"),10)*e,this.limitRenditionByPlayerDimensions,this.masterPlaylistController_)},M_e=function(e){var t=-1,n=-1;if(e<0||e>1)throw new Error("Moving average bandwidth decay must be between 0 and 1.");return function(){var i=this.useDevicePixelRatio&&X.devicePixelRatio||1;return t<0&&(t=this.systemBandwidth,n=this.systemBandwidth),this.systemBandwidth>0&&this.systemBandwidth!==n&&(t=e*this.systemBandwidth+(1-e)*t,n=this.systemBandwidth),x9(this.playlists.master,t,parseInt(Lb(this.tech_.el(),"width"),10)*i,parseInt(Lb(this.tech_.el(),"height"),10)*i,this.limitRenditionByPlayerDimensions,this.masterPlaylistController_)}},F_e=function(e){var t=e.master,n=e.currentTime,i=e.bandwidth,s=e.duration,a=e.segmentDuration,o=e.timeUntilRebuffer,l=e.currentTimeline,u=e.syncController,c=t.playlists.filter(function(y){return!Fa.isIncompatible(y)}),h=c.filter(Fa.isEnabled);h.length||(h=c.filter(function(y){return!Fa.isDisabled(y)}));var f=h.filter(Fa.hasAttribute.bind(null,"BANDWIDTH")),g=f.map(function(y){var _=u.getSyncPoint(y,s,l,n),C=_?1:2,E=Fa.estimateSegmentRequestTime(a,i,y),D=E*C-o;return{playlist:y,rebufferingImpact:D}}),v=g.filter(function(y){return y.rebufferingImpact<=0});return Up(v,function(y,_){return vD(_.playlist,y.playlist)}),v.length?v[0]:(Up(g,function(y,_){return y.rebufferingImpact-_.rebufferingImpact}),g[0]||null)},B_e=function(){var e=this,t=this.playlists.master.playlists.filter(Fa.isEnabled);Up(t,function(i,s){return vD(i,s)});var n=t.filter(function(i){return!!mg(e.playlists.master,i).video});return n[0]||null},N_e=function(e){var t=0,n;return e.bytes&&(n=new Uint8Array(e.bytes),e.segments.forEach(function(i){n.set(i,t),t+=i.byteLength})),n},U_e=function(e,t,n){if(!e[n]){t.trigger({type:"usage",name:"vhs-608"}),t.trigger({type:"usage",name:"hls-608"});var i=n;/^cc708_/.test(n)&&(i="SERVICE"+n.split("_")[1]);var s=t.textTracks().getTrackById(i);if(s)e[n]=s;else{var a=t.options_.vhs&&t.options_.vhs.captionServices||{},o=n,l=n,u=!1,c=a[i];c&&(o=c.label,l=c.language,u=c.default),e[n]=t.addRemoteTextTrack({kind:"captions",id:i,default:u,label:o,language:l},!1).track}}},$_e=function(e){var t=e.inbandTextTracks,n=e.captionArray,i=e.timestampOffset;if(n){var s=X.WebKitDataCue||X.VTTCue;n.forEach(function(a){var o=a.stream;t[o].addCue(new s(a.startTime+i,a.endTime+i,a.text))})}},j_e=function(e){Object.defineProperties(e.frame,{id:{get:function(){return Me.log.warn("cue.frame.id is deprecated. Use cue.value.key instead."),e.value.key}},value:{get:function(){return Me.log.warn("cue.frame.value is deprecated. Use cue.value.data instead."),e.value.data}},privateData:{get:function(){return Me.log.warn("cue.frame.privateData is deprecated. Use cue.value.data instead."),e.value.data}}})},z_e=function(e){var t=e.inbandTextTracks,n=e.metadataArray,i=e.timestampOffset,s=e.videoDuration;if(n){var a=X.WebKitDataCue||X.VTTCue,o=t.metadataTrack_;if(o&&(n.forEach(function(g){var v=g.cueTime+i;typeof v!="number"||X.isNaN(v)||v<0||!(v<1/0)||g.frames.forEach(function(y){var _=new a(v,v,y.value||y.url||y.data||"");_.frame=y,_.value=y,j_e(_),o.addCue(_)})}),!(!o.cues||!o.cues.length))){for(var l=o.cues,u=[],c=0;c<l.length;c++)l[c]&&u.push(l[c]);var h=u.reduce(function(g,v){var y=g[v.startTime]||[];return y.push(v),g[v.startTime]=y,g},{}),f=Object.keys(h).sort(function(g,v){return Number(g)-Number(v)});f.forEach(function(g,v){var y=h[g],_=Number(f[v+1])||s;y.forEach(function(C){C.endTime=_})})}}},H_e=function(e,t,n){e.metadataTrack_||(e.metadataTrack_=n.addRemoteTextTrack({kind:"metadata",label:"Timed Metadata"},!1).track,e.metadataTrack_.inBandMetadataTrackDispatchType=t)},X0=function(e,t,n){var i,s;if(n&&n.cues)for(i=n.cues.length;i--;)s=n.cues[i],s.startTime>=e&&s.endTime<=t&&n.removeCue(s)},V_e=function(e){var t=e.cues;if(t)for(var n=0;n<t.length;n++){for(var i=[],s=0,a=0;a<t.length;a++)t[n].startTime===t[a].startTime&&t[n].endTime===t[a].endTime&&t[n].text===t[a].text&&(s++,s>1&&i.push(t[a]));i.length&&i.forEach(function(o){return e.removeCue(o)})}},W_e=function(e,t,n){if(typeof t>"u"||t===null||!e.length)return[];var i=Math.ceil((t-n+3)*yb.ONE_SECOND_IN_TS),s;for(s=0;s<e.length&&!(e[s].pts>i);s++);return e.slice(s)},q_e=function(e,t,n){if(!t.length)return e;if(n)return t.slice();var i=t[0].pts,s=0;for(s;s<e.length&&!(e[s].pts>=i);s++);return e.slice(0,s).concat(t)},G_e=function(e,t,n,i){for(var s=Math.ceil((t-i)*yb.ONE_SECOND_IN_TS),a=Math.ceil((n-i)*yb.ONE_SECOND_IN_TS),o=e.slice(),l=e.length;l--&&!(e[l].pts<=a););if(l===-1)return o;for(var u=l+1;u--&&!(e[u].pts<=s););return u=Math.max(u,0),o.splice(u,l-u+1),o},K_e=function(e,t){if(!e&&!t||!e&&t||e&&!t)return!1;if(e===t)return!0;var n=Object.keys(e).sort(),i=Object.keys(t).sort();if(n.length!==i.length)return!1;for(var s=0;s<n.length;s++){var a=n[s];if(a!==i[s]||e[a]!==t[a])return!1}return!0},_9=22,X_e=function(e,t,n){t=t||[];for(var i=[],s=0,a=0;a<t.length;a++){var o=t[a];if(e===o.timeline&&(i.push(a),s+=o.duration,s>n))return a}return i.length===0?0:i[i.length-1]},F0=1,Y_e=500,cF=function(e){return typeof e=="number"&&isFinite(e)},sx=1/60,Q_e=function(e,t,n){return e!=="main"||!t||!n?null:!n.hasAudio&&!n.hasVideo?"Neither audio nor video found in segment.":t.hasVideo&&!n.hasVideo?"Only audio found in segment when we expected video. We can't switch to audio only from a stream that had video. To get rid of this message, please add codec information to the manifest.":!t.hasVideo&&n.hasVideo?"Video found in segment when we expected only audio. We can't switch to a stream with video from an audio only stream. To get rid of this message, please add codec information to the manifest.":null},J_e=function(e,t,n){var i=t-es.BACK_BUFFER_LENGTH;e.length&&(i=Math.max(i,e.start(0)));var s=t-n;return Math.min(s,i)},tp=function(e){var t=e.startOfSegment,n=e.duration,i=e.segment,s=e.part,a=e.playlist,o=a.mediaSequence,l=a.id,u=a.segments,c=u===void 0?[]:u,h=e.mediaIndex,f=e.partIndex,g=e.timeline,v=c.length-1,y="mediaIndex/partIndex increment";e.getMediaInfoForTime?y="getMediaInfoForTime ("+e.getMediaInfoForTime+")":e.isSyncRequest&&(y="getSyncSegmentCandidate (isSyncRequest)"),e.independent&&(y+=" with independent "+e.independent);var _=typeof f=="number",C=e.segment.uri?"segment":"pre-segment",E=_?z7({preloadSegment:i})-1:0;return C+" ["+(o+h)+"/"+(o+v)+"]"+(_?" part ["+f+"/"+E+"]":"")+(" segment start/end ["+i.start+" => "+i.end+"]")+(_?" part start/end ["+s.start+" => "+s.end+"]":"")+(" startOfSegment ["+t+"]")+(" duration ["+n+"]")+(" timeline ["+g+"]")+(" selected by ["+y+"]")+(" playlist ["+l+"]")},dF=function(e){return e+"TimingInfo"},Z_e=function(e){var t=e.segmentTimeline,n=e.currentTimeline,i=e.startOfSegment,s=e.buffered,a=e.overrideCheck;return!a&&t===n?null:t<n?i:s.length?s.end(s.length-1):i},hF=function(e){var t=e.timelineChangeController,n=e.currentTimeline,i=e.segmentTimeline,s=e.loaderType,a=e.audioDisabled;if(n===i)return!1;if(s==="audio"){var o=t.lastTimelineChange({type:"main"});return!o||o.to!==i}if(s==="main"&&a){var l=t.pendingTimelineChange({type:"audio"});return!(l&&l.to===i)}return!1},ebe=function(e){var t=0;return["video","audio"].forEach(function(n){var i=e[n+"TimingInfo"];if(i){var s=i.start,a=i.end,o;typeof s=="bigint"||typeof a=="bigint"?o=X.BigInt(a)-X.BigInt(s):typeof s=="number"&&typeof a=="number"&&(o=a-s),typeof o<"u"&&o>t&&(t=o)}}),typeof t=="bigint"&&t<Number.MAX_SAFE_INTEGER&&(t=Number(t)),t},fF=function(e){var t=e.segmentDuration,n=e.maxDuration;return t?Math.round(t)>n+Xd:!1},tbe=function(e,t){if(t!=="hls")return null;var n=ebe({audioTimingInfo:e.audioTimingInfo,videoTimingInfo:e.videoTimingInfo});if(!n)return null;var i=e.playlist.targetDuration,s=fF({segmentDuration:n,maxDuration:i*2}),a=fF({segmentDuration:n,maxDuration:i}),o="Segment with index "+e.mediaIndex+" "+("from playlist "+e.playlist.id+" ")+("has a duration of "+n+" ")+("when the reported duration is "+e.duration+" ")+("and the target duration is "+i+". ")+"For HLS content, a duration in excess of the target duration may result in playback issues. See the HLS specification section on EXT-X-TARGETDURATION for more details: https://tools.ietf.org/html/draft-pantos-http-live-streaming-23#section-4.3.3.1";return s||a?{severity:s?"warn":"info",message:o}:null},_E=(function(r){Ht(e,r);function e(n,i){var s;if(s=r.call(this)||this,!n)throw new TypeError("Initialization settings are required");if(typeof n.currentTime!="function")throw new TypeError("No currentTime getter specified");if(!n.mediaSource)throw new TypeError("No MediaSource specified");return s.bandwidth=n.bandwidth,s.throughput={rate:0,count:0},s.roundTrip=NaN,s.resetStats_(),s.mediaIndex=null,s.partIndex=null,s.hasPlayed_=n.hasPlayed,s.currentTime_=n.currentTime,s.seekable_=n.seekable,s.seeking_=n.seeking,s.duration_=n.duration,s.mediaSource_=n.mediaSource,s.vhs_=n.vhs,s.loaderType_=n.loaderType,s.currentMediaInfo_=void 0,s.startingMediaInfo_=void 0,s.segmentMetadataTrack_=n.segmentMetadataTrack,s.goalBufferLength_=n.goalBufferLength,s.sourceType_=n.sourceType,s.sourceUpdater_=n.sourceUpdater,s.inbandTextTracks_=n.inbandTextTracks,s.state_="INIT",s.timelineChangeController_=n.timelineChangeController,s.shouldSaveSegmentTimingInfo_=!0,s.parse708captions_=n.parse708captions,s.useDtsForTimestampOffset_=n.useDtsForTimestampOffset,s.captionServices_=n.captionServices,s.experimentalExactManifestTimings=n.experimentalExactManifestTimings,s.checkBufferTimeout_=null,s.error_=void 0,s.currentTimeline_=-1,s.pendingSegment_=null,s.xhrOptions_=null,s.pendingSegments_=[],s.audioDisabled_=!1,s.isPendingTimestampOffset_=!1,s.gopBuffer_=[],s.timeMapping_=0,s.safeAppend_=Me.browser.IE_VERSION>=11,s.appendInitSegment_={audio:!0,video:!0},s.playlistOfLastInitSegment_={audio:null,video:null},s.callQueue_=[],s.loadQueue_=[],s.metadataQueue_={id3:[],caption:[]},s.waitingOnRemove_=!1,s.quotaExceededErrorRetryTimeout_=null,s.activeInitSegmentId_=null,s.initSegments_={},s.cacheEncryptionKeys_=n.cacheEncryptionKeys,s.keyCache_={},s.decrypter_=n.decrypter,s.syncController_=n.syncController,s.syncPoint_={segmentIndex:0,time:0},s.transmuxer_=s.createTransmuxer_(),s.triggerSyncInfoUpdate_=function(){return s.trigger("syncinfoupdate")},s.syncController_.on("syncinfoupdate",s.triggerSyncInfoUpdate_),s.mediaSource_.addEventListener("sourceopen",function(){s.isEndOfStream_()||(s.ended_=!1)}),s.fetchAtBuffer_=!1,s.logger_=zl("SegmentLoader["+s.loaderType_+"]"),Object.defineProperty(We(s),"state",{get:function(){return this.state_},set:function(o){o!==this.state_&&(this.logger_(this.state_+" -> "+o),this.state_=o,this.trigger("statechange"))}}),s.sourceUpdater_.on("ready",function(){s.hasEnoughInfoToAppend_()&&s.processCallQueue_()}),s.loaderType_==="main"&&s.timelineChangeController_.on("pendingtimelinechange",function(){s.hasEnoughInfoToAppend_()&&s.processCallQueue_()}),s.loaderType_==="audio"&&s.timelineChangeController_.on("timelinechange",function(){s.hasEnoughInfoToLoad_()&&s.processLoadQueue_(),s.hasEnoughInfoToAppend_()&&s.processCallQueue_()}),s}var t=e.prototype;return t.createTransmuxer_=function(){return pw.createTransmuxer({remux:!1,alignGopsAtEnd:this.safeAppend_,keepOriginalTimestamps:!0,parse708captions:this.parse708captions_,captionServices:this.captionServices_})},t.resetStats_=function(){this.mediaBytesTransferred=0,this.mediaRequests=0,this.mediaRequestsAborted=0,this.mediaRequestsTimedout=0,this.mediaRequestsErrored=0,this.mediaTransferDuration=0,this.mediaSecondsLoaded=0,this.mediaAppends=0},t.dispose=function(){this.trigger("dispose"),this.state="DISPOSED",this.pause(),this.abort_(),this.transmuxer_&&this.transmuxer_.terminate(),this.resetStats_(),this.checkBufferTimeout_&&X.clearTimeout(this.checkBufferTimeout_),this.syncController_&&this.triggerSyncInfoUpdate_&&this.syncController_.off("syncinfoupdate",this.triggerSyncInfoUpdate_),this.off()},t.setAudio=function(i){this.audioDisabled_=!i,i?this.appendInitSegment_.audio=!0:this.sourceUpdater_.removeAudio(0,this.duration_())},t.abort=function(){if(this.state!=="WAITING"){this.pendingSegment_&&(this.pendingSegment_=null);return}this.abort_(),this.state="READY",this.paused()||this.monitorBuffer_()},t.abort_=function(){this.pendingSegment_&&this.pendingSegment_.abortRequests&&this.pendingSegment_.abortRequests(),this.pendingSegment_=null,this.callQueue_=[],this.loadQueue_=[],this.metadataQueue_.id3=[],this.metadataQueue_.caption=[],this.timelineChangeController_.clearPendingTimelineChange(this.loaderType_),this.waitingOnRemove_=!1,X.clearTimeout(this.quotaExceededErrorRetryTimeout_),this.quotaExceededErrorRetryTimeout_=null},t.checkForAbort_=function(i){return this.state==="APPENDING"&&!this.pendingSegment_?(this.state="READY",!0):!this.pendingSegment_||this.pendingSegment_.requestId!==i},t.error=function(i){return typeof i<"u"&&(this.logger_("error occurred:",i),this.error_=i),this.pendingSegment_=null,this.error_},t.endOfStream=function(){this.ended_=!0,this.transmuxer_&&pw.reset(this.transmuxer_),this.gopBuffer_.length=0,this.pause(),this.trigger("ended")},t.buffered_=function(){var i=this.getMediaInfo_();if(!this.sourceUpdater_||!i)return Me.createTimeRanges();if(this.loaderType_==="main"){var s=i.hasAudio,a=i.hasVideo,o=i.isMuxed;if(a&&s&&!this.audioDisabled_&&!o)return this.sourceUpdater_.buffered();if(a)return this.sourceUpdater_.videoBuffered()}return this.sourceUpdater_.audioBuffered()},t.initSegmentForMap=function(i,s){if(s===void 0&&(s=!1),!i)return null;var a=Ib(i),o=this.initSegments_[a];return s&&!o&&i.bytes&&(this.initSegments_[a]=o={resolvedUri:i.resolvedUri,byterange:i.byterange,bytes:i.bytes,tracks:i.tracks,timescales:i.timescales}),o||i},t.segmentKey=function(i,s){if(s===void 0&&(s=!1),!i)return null;var a=n9(i),o=this.keyCache_[a];this.cacheEncryptionKeys_&&s&&!o&&i.bytes&&(this.keyCache_[a]=o={resolvedUri:i.resolvedUri,bytes:i.bytes});var l={resolvedUri:(o||i).resolvedUri};return o&&(l.bytes=o.bytes),l},t.couldBeginLoading_=function(){return this.playlist_&&!this.paused()},t.load=function(){if(this.monitorBuffer_(),!!this.playlist_){if(this.state==="INIT"&&this.couldBeginLoading_())return this.init_();!this.couldBeginLoading_()||this.state!=="READY"&&this.state!=="INIT"||(this.state="READY")}},t.init_=function(){return this.state="READY",this.resetEverything(),this.monitorBuffer_()},t.playlist=function(i,s){if(s===void 0&&(s={}),!!i){var a=this.playlist_,o=this.pendingSegment_;this.playlist_=i,this.xhrOptions_=s,this.state==="INIT"&&(i.syncInfo={mediaSequence:i.mediaSequence,time:0},this.loaderType_==="main"&&this.syncController_.setDateTimeMappingForStart(i));var l=null;if(a&&(a.id?l=a.id:a.uri&&(l=a.uri)),this.logger_("playlist update ["+l+" => "+(i.id||i.uri)+"]"),this.trigger("syncinfoupdate"),this.state==="INIT"&&this.couldBeginLoading_())return this.init_();if(!a||a.uri!==i.uri){this.mediaIndex!==null&&(i.endList?this.resyncLoader():this.resetLoader()),this.currentMediaInfo_=void 0,this.trigger("playlistupdate");return}var u=i.mediaSequence-a.mediaSequence;if(this.logger_("live window shift ["+u+"]"),this.mediaIndex!==null)if(this.mediaIndex-=u,this.mediaIndex<0)this.mediaIndex=null,this.partIndex=null;else{var c=this.playlist_.segments[this.mediaIndex];if(this.partIndex&&(!c.parts||!c.parts.length||!c.parts[this.partIndex])){var h=this.mediaIndex;this.logger_("currently processing part (index "+this.partIndex+") no longer exists."),this.resetLoader(),this.mediaIndex=h}}o&&(o.mediaIndex-=u,o.mediaIndex<0?(o.mediaIndex=null,o.partIndex=null):(o.mediaIndex>=0&&(o.segment=i.segments[o.mediaIndex]),o.partIndex>=0&&o.segment.parts&&(o.part=o.segment.parts[o.partIndex]))),this.syncController_.saveExpiredSegmentInfo(a,i)}},t.pause=function(){this.checkBufferTimeout_&&(X.clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=null)},t.paused=function(){return this.checkBufferTimeout_===null},t.resetEverything=function(i){this.ended_=!1,this.activeInitSegmentId_=null,this.appendInitSegment_={audio:!0,video:!0},this.resetLoader(),this.remove(0,1/0,i),this.transmuxer_&&(this.transmuxer_.postMessage({action:"clearAllMp4Captions"}),this.transmuxer_.postMessage({action:"reset"}))},t.resetLoader=function(){this.fetchAtBuffer_=!1,this.resyncLoader()},t.resyncLoader=function(){this.transmuxer_&&pw.reset(this.transmuxer_),this.mediaIndex=null,this.partIndex=null,this.syncPoint_=null,this.isPendingTimestampOffset_=!1,this.callQueue_=[],this.loadQueue_=[],this.metadataQueue_.id3=[],this.metadataQueue_.caption=[],this.abort(),this.transmuxer_&&this.transmuxer_.postMessage({action:"clearParsedMp4Captions"})},t.remove=function(i,s,a,o){if(a===void 0&&(a=function(){}),o===void 0&&(o=!1),s===1/0&&(s=this.duration_()),s<=i){this.logger_("skipping remove because end ${end} is <= start ${start}");return}if(!this.sourceUpdater_||!this.getMediaInfo_()){this.logger_("skipping remove because no source updater or starting media info");return}var l=1,u=function(){l--,l===0&&a()};(o||!this.audioDisabled_)&&(l++,this.sourceUpdater_.removeAudio(i,s,u)),(o||this.loaderType_==="main")&&(this.gopBuffer_=G_e(this.gopBuffer_,i,s,this.timeMapping_),l++,this.sourceUpdater_.removeVideo(i,s,u));for(var c in this.inbandTextTracks_)X0(i,s,this.inbandTextTracks_[c]);X0(i,s,this.segmentMetadataTrack_),u()},t.monitorBuffer_=function(){this.checkBufferTimeout_&&X.clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=X.setTimeout(this.monitorBufferTick_.bind(this),1)},t.monitorBufferTick_=function(){this.state==="READY"&&this.fillBuffer_(),this.checkBufferTimeout_&&X.clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=X.setTimeout(this.monitorBufferTick_.bind(this),Y_e)},t.fillBuffer_=function(){if(!this.sourceUpdater_.updating()){var i=this.chooseNextRequest_();i&&(typeof i.timestampOffset=="number"&&(this.isPendingTimestampOffset_=!1,this.timelineChangeController_.pendingTimelineChange({type:this.loaderType_,from:this.currentTimeline_,to:i.timeline})),this.loadSegment_(i))}},t.isEndOfStream_=function(i,s,a){if(i===void 0&&(i=this.mediaIndex),s===void 0&&(s=this.playlist_),a===void 0&&(a=this.partIndex),!s||!this.mediaSource_)return!1;var o=typeof i=="number"&&s.segments[i],l=i+1===s.segments.length,u=!o||!o.parts||a+1===o.parts.length;return s.endList&&this.mediaSource_.readyState==="open"&&l&&u},t.chooseNextRequest_=function(){var i=this.buffered_(),s=eF(i)||0,a=dD(i,this.currentTime_()),o=!this.hasPlayed_()&&a>=1,l=a>=this.goalBufferLength_(),u=this.playlist_.segments;if(!u.length||o||l)return null;this.syncPoint_=this.syncPoint_||this.syncController_.getSyncPoint(this.playlist_,this.duration_(),this.currentTimeline_,this.currentTime_());var c={partIndex:null,mediaIndex:null,startOfSegment:null,playlist:this.playlist_,isSyncRequest:!this.syncPoint_};if(c.isSyncRequest)c.mediaIndex=X_e(this.currentTimeline_,u,s);else if(this.mediaIndex!==null){var h=u[this.mediaIndex],f=typeof this.partIndex=="number"?this.partIndex:-1;c.startOfSegment=h.end?h.end:s,h.parts&&h.parts[f+1]?(c.mediaIndex=this.mediaIndex,c.partIndex=f+1):c.mediaIndex=this.mediaIndex+1}else{var g=Fa.getMediaInfoForTime({experimentalExactManifestTimings:this.experimentalExactManifestTimings,playlist:this.playlist_,currentTime:this.fetchAtBuffer_?s:this.currentTime_(),startingPartIndex:this.syncPoint_.partIndex,startingSegmentIndex:this.syncPoint_.segmentIndex,startTime:this.syncPoint_.time}),v=g.segmentIndex,y=g.startTime,_=g.partIndex;c.getMediaInfoForTime=this.fetchAtBuffer_?"bufferedEnd "+s:"currentTime "+this.currentTime_(),c.mediaIndex=v,c.startOfSegment=y,c.partIndex=_}var C=u[c.mediaIndex],E=C&&typeof c.partIndex=="number"&&C.parts&&C.parts[c.partIndex];if(!C||typeof c.partIndex=="number"&&!E)return null;if(typeof c.partIndex!="number"&&C.parts&&(c.partIndex=0,E=C.parts[0]),!a&&E&&!E.independent)if(c.partIndex===0){var D=u[c.mediaIndex-1],I=D.parts&&D.parts.length&&D.parts[D.parts.length-1];I&&I.independent&&(c.mediaIndex-=1,c.partIndex=D.parts.length-1,c.independent="previous segment")}else C.parts[c.partIndex-1].independent&&(c.partIndex-=1,c.independent="previous part");var k=this.mediaSource_&&this.mediaSource_.readyState==="ended";return c.mediaIndex>=u.length-1&&k&&!this.seeking_()?null:this.generateSegmentInfo_(c)},t.generateSegmentInfo_=function(i){var s=i.independent,a=i.playlist,o=i.mediaIndex,l=i.startOfSegment,u=i.isSyncRequest,c=i.partIndex,h=i.forceTimestampOffset,f=i.getMediaInfoForTime,g=a.segments[o],v=typeof c=="number"&&g.parts[c],y={requestId:"segment-loader-"+Math.random(),uri:v&&v.resolvedUri||g.resolvedUri,mediaIndex:o,partIndex:v?c:null,isSyncRequest:u,startOfSegment:l,playlist:a,bytes:null,encryptedBytes:null,timestampOffset:null,timeline:g.timeline,duration:v&&v.duration||g.duration,segment:g,part:v,byteLength:0,transmuxer:this.transmuxer_,getMediaInfoForTime:f,independent:s},_=typeof h<"u"?h:this.isPendingTimestampOffset_;y.timestampOffset=this.timestampOffsetForSegment_({segmentTimeline:g.timeline,currentTimeline:this.currentTimeline_,startOfSegment:l,buffered:this.buffered_(),overrideCheck:_});var C=eF(this.sourceUpdater_.audioBuffered());return typeof C=="number"&&(y.audioAppendStart=C-this.sourceUpdater_.audioTimestampOffset()),this.sourceUpdater_.videoBuffered().length&&(y.gopsToAlignWith=W_e(this.gopBuffer_,this.currentTime_()-this.sourceUpdater_.videoTimestampOffset(),this.timeMapping_)),y},t.timestampOffsetForSegment_=function(i){return Z_e(i)},t.earlyAbortWhenNeeded_=function(i){if(!(this.vhs_.tech_.paused()||!this.xhrOptions_.timeout||!this.playlist_.attributes.BANDWIDTH)&&!(Date.now()-(i.firstBytesReceivedAt||Date.now())<1e3)){var s=this.currentTime_(),a=i.bandwidth,o=this.pendingSegment_.duration,l=Fa.estimateSegmentRequestTime(o,a,this.playlist_,i.bytesReceived),u=Sxe(this.buffered_(),s,this.vhs_.tech_.playbackRate())-1;if(!(l<=u)){var c=F_e({master:this.vhs_.playlists.master,currentTime:s,bandwidth:a,duration:this.duration_(),segmentDuration:o,timeUntilRebuffer:u,currentTimeline:this.currentTimeline_,syncController:this.syncController_});if(c){var h=l-u,f=h-c.rebufferingImpact,g=.5;u<=Xd&&(g=1),!(!c.playlist||c.playlist.uri===this.playlist_.uri||f<g)&&(this.bandwidth=c.playlist.attributes.BANDWIDTH*es.BANDWIDTH_VARIANCE+1,this.trigger("earlyabort"))}}}},t.handleAbort_=function(i){this.logger_("Aborting "+tp(i)),this.mediaRequestsAborted+=1},t.handleProgress_=function(i,s){this.earlyAbortWhenNeeded_(s.stats),!this.checkForAbort_(s.requestId)&&this.trigger("progress")},t.handleTrackInfo_=function(i,s){this.earlyAbortWhenNeeded_(i.stats),!this.checkForAbort_(i.requestId)&&(this.checkForIllegalMediaSwitch(s)||(s=s||{},K_e(this.currentMediaInfo_,s)||(this.appendInitSegment_={audio:!0,video:!0},this.startingMediaInfo_=s,this.currentMediaInfo_=s,this.logger_("trackinfo update",s),this.trigger("trackinfo")),!this.checkForAbort_(i.requestId)&&(this.pendingSegment_.trackInfo=s,this.hasEnoughInfoToAppend_()&&this.processCallQueue_())))},t.handleTimingInfo_=function(i,s,a,o){if(this.earlyAbortWhenNeeded_(i.stats),!this.checkForAbort_(i.requestId)){var l=this.pendingSegment_,u=dF(s);l[u]=l[u]||{},l[u][a]=o,this.logger_("timinginfo: "+s+" - "+a+" - "+o),this.hasEnoughInfoToAppend_()&&this.processCallQueue_()}},t.handleCaptions_=function(i,s){var a=this;if(this.earlyAbortWhenNeeded_(i.stats),!this.checkForAbort_(i.requestId)){if(s.length===0){this.logger_("SegmentLoader received no captions from a caption event");return}var o=this.pendingSegment_;if(!o.hasAppendedData_){this.metadataQueue_.caption.push(this.handleCaptions_.bind(this,i,s));return}var l=this.sourceUpdater_.videoTimestampOffset()===null?this.sourceUpdater_.audioTimestampOffset():this.sourceUpdater_.videoTimestampOffset(),u={};s.forEach(function(c){u[c.stream]=u[c.stream]||{startTime:1/0,captions:[],endTime:0};var h=u[c.stream];h.startTime=Math.min(h.startTime,c.startTime+l),h.endTime=Math.max(h.endTime,c.endTime+l),h.captions.push(c)}),Object.keys(u).forEach(function(c){var h=u[c],f=h.startTime,g=h.endTime,v=h.captions,y=a.inbandTextTracks_;a.logger_("adding cues from "+f+" -> "+g+" for "+c),U_e(y,a.vhs_.tech_,c),X0(f,g,y[c]),$_e({captionArray:v,inbandTextTracks:y,timestampOffset:l})}),this.transmuxer_&&this.transmuxer_.postMessage({action:"clearParsedMp4Captions"})}},t.handleId3_=function(i,s,a){if(this.earlyAbortWhenNeeded_(i.stats),!this.checkForAbort_(i.requestId)){var o=this.pendingSegment_;if(!o.hasAppendedData_){this.metadataQueue_.id3.push(this.handleId3_.bind(this,i,s,a));return}var l=this.sourceUpdater_.videoTimestampOffset()===null?this.sourceUpdater_.audioTimestampOffset():this.sourceUpdater_.videoTimestampOffset();H_e(this.inbandTextTracks_,a,this.vhs_.tech_),z_e({inbandTextTracks:this.inbandTextTracks_,metadataArray:s,timestampOffset:l,videoDuration:this.duration_()})}},t.processMetadataQueue_=function(){this.metadataQueue_.id3.forEach(function(i){return i()}),this.metadataQueue_.caption.forEach(function(i){return i()}),this.metadataQueue_.id3=[],this.metadataQueue_.caption=[]},t.processCallQueue_=function(){var i=this.callQueue_;this.callQueue_=[],i.forEach(function(s){return s()})},t.processLoadQueue_=function(){var i=this.loadQueue_;this.loadQueue_=[],i.forEach(function(s){return s()})},t.hasEnoughInfoToLoad_=function(){if(this.loaderType_!=="audio")return!0;var i=this.pendingSegment_;return i?this.getCurrentMediaInfo_()?!hF({timelineChangeController:this.timelineChangeController_,currentTimeline:this.currentTimeline_,segmentTimeline:i.timeline,loaderType:this.loaderType_,audioDisabled:this.audioDisabled_}):!0:!1},t.getCurrentMediaInfo_=function(i){return i===void 0&&(i=this.pendingSegment_),i&&i.trackInfo||this.currentMediaInfo_},t.getMediaInfo_=function(i){return i===void 0&&(i=this.pendingSegment_),this.getCurrentMediaInfo_(i)||this.startingMediaInfo_},t.getPendingSegmentPlaylist=function(){return this.pendingSegment_?this.pendingSegment_.playlist:null},t.hasEnoughInfoToAppend_=function(){if(!this.sourceUpdater_.ready()||this.waitingOnRemove_||this.quotaExceededErrorRetryTimeout_)return!1;var i=this.pendingSegment_,s=this.getCurrentMediaInfo_();if(!i||!s)return!1;var a=s.hasAudio,o=s.hasVideo,l=s.isMuxed;return!(o&&!i.videoTimingInfo||a&&!this.audioDisabled_&&!l&&!i.audioTimingInfo||hF({timelineChangeController:this.timelineChangeController_,currentTimeline:this.currentTimeline_,segmentTimeline:i.timeline,loaderType:this.loaderType_,audioDisabled:this.audioDisabled_}))},t.handleData_=function(i,s){if(this.earlyAbortWhenNeeded_(i.stats),!this.checkForAbort_(i.requestId)){if(this.callQueue_.length||!this.hasEnoughInfoToAppend_()){this.callQueue_.push(this.handleData_.bind(this,i,s));return}var a=this.pendingSegment_;if(this.setTimeMapping_(a.timeline),this.updateMediaSecondsLoaded_(a.part||a.segment),this.mediaSource_.readyState!=="closed"){if(i.map&&(i.map=this.initSegmentForMap(i.map,!0),a.segment.map=i.map),i.key&&this.segmentKey(i.key,!0),a.isFmp4=i.isFmp4,a.timingInfo=a.timingInfo||{},a.isFmp4)this.trigger("fmp4"),a.timingInfo.start=a[dF(s.type)].start;else{var o=this.getCurrentMediaInfo_(),l=this.loaderType_==="main"&&o&&o.hasVideo,u;l&&(u=a.videoTimingInfo.start),a.timingInfo.start=this.trueSegmentStart_({currentStart:a.timingInfo.start,playlist:a.playlist,mediaIndex:a.mediaIndex,currentVideoTimestampOffset:this.sourceUpdater_.videoTimestampOffset(),useVideoTimingInfo:l,firstVideoFrameTimeForData:u,videoTimingInfo:a.videoTimingInfo,audioTimingInfo:a.audioTimingInfo})}if(this.updateAppendInitSegmentStatus(a,s.type),this.updateSourceBufferTimestampOffset_(a),a.isSyncRequest){this.updateTimingInfoEnd_(a),this.syncController_.saveSegmentTimingInfo({segmentInfo:a,shouldSaveTimelineMapping:this.loaderType_==="main"});var c=this.chooseNextRequest_();if(c.mediaIndex!==a.mediaIndex||c.partIndex!==a.partIndex){this.logger_("sync segment was incorrect, not appending");return}this.logger_("sync segment was correct, appending")}a.hasAppendedData_=!0,this.processMetadataQueue_(),this.appendData_(a,s)}}},t.updateAppendInitSegmentStatus=function(i,s){this.loaderType_==="main"&&typeof i.timestampOffset=="number"&&!i.changedTimestampOffset&&(this.appendInitSegment_={audio:!0,video:!0}),this.playlistOfLastInitSegment_[s]!==i.playlist&&(this.appendInitSegment_[s]=!0)},t.getInitSegmentAndUpdateState_=function(i){var s=i.type,a=i.initSegment,o=i.map,l=i.playlist;if(o){var u=Ib(o);if(this.activeInitSegmentId_===u)return null;a=this.initSegmentForMap(o,!0).bytes,this.activeInitSegmentId_=u}return a&&this.appendInitSegment_[s]?(this.playlistOfLastInitSegment_[s]=l,this.appendInitSegment_[s]=!1,this.activeInitSegmentId_=null,a):null},t.handleQuotaExceededError_=function(i,s){var a=this,o=i.segmentInfo,l=i.type,u=i.bytes,c=this.sourceUpdater_.audioBuffered(),h=this.sourceUpdater_.videoBuffered();c.length>1&&this.logger_("On QUOTA_EXCEEDED_ERR, found gaps in the audio buffer: "+qh(c).join(", ")),h.length>1&&this.logger_("On QUOTA_EXCEEDED_ERR, found gaps in the video buffer: "+qh(h).join(", "));var f=c.length?c.start(0):0,g=c.length?c.end(c.length-1):0,v=h.length?h.start(0):0,y=h.length?h.end(h.length-1):0;if(g-f<=F0&&y-v<=F0){this.logger_("On QUOTA_EXCEEDED_ERR, single segment too large to append to buffer, triggering an error. "+("Appended byte length: "+u.byteLength+", ")+("audio buffer: "+qh(c).join(", ")+", ")+("video buffer: "+qh(h).join(", ")+", ")),this.error({message:"Quota exceeded error with append of a single segment of content",excludeUntil:1/0}),this.trigger("error");return}this.waitingOnRemove_=!0,this.callQueue_.push(this.appendToSourceBuffer_.bind(this,{segmentInfo:o,type:l,bytes:u}));var _=this.currentTime_(),C=_-F0;this.logger_("On QUOTA_EXCEEDED_ERR, removing audio/video from 0 to "+C),this.remove(0,C,function(){a.logger_("On QUOTA_EXCEEDED_ERR, retrying append in "+F0+"s"),a.waitingOnRemove_=!1,a.quotaExceededErrorRetryTimeout_=X.setTimeout(function(){a.logger_("On QUOTA_EXCEEDED_ERR, re-processing call queue"),a.quotaExceededErrorRetryTimeout_=null,a.processCallQueue_()},F0*1e3)},!0)},t.handleAppendError_=function(i,s){var a=i.segmentInfo,o=i.type,l=i.bytes;if(s){if(s.code===_9){this.handleQuotaExceededError_({segmentInfo:a,type:o,bytes:l});return}this.logger_("Received non QUOTA_EXCEEDED_ERR on append",s),this.error(o+" append of "+l.length+"b failed for segment "+("#"+a.mediaIndex+" in playlist "+a.playlist.id)),this.trigger("appenderror")}},t.appendToSourceBuffer_=function(i){var s=i.segmentInfo,a=i.type,o=i.initSegment,l=i.data,u=i.bytes;if(!u){var c=[l],h=l.byteLength;o&&(c.unshift(o),h+=o.byteLength),u=N_e({bytes:h,segments:c})}this.sourceUpdater_.appendBuffer({segmentInfo:s,type:a,bytes:u},this.handleAppendError_.bind(this,{segmentInfo:s,type:a,bytes:u}))},t.handleSegmentTimingInfo_=function(i,s,a){if(!(!this.pendingSegment_||s!==this.pendingSegment_.requestId)){var o=this.pendingSegment_.segment,l=i+"TimingInfo";o[l]||(o[l]={}),o[l].transmuxerPrependedSeconds=a.prependedContentDuration||0,o[l].transmuxedPresentationStart=a.start.presentation,o[l].transmuxedDecodeStart=a.start.decode,o[l].transmuxedPresentationEnd=a.end.presentation,o[l].transmuxedDecodeEnd=a.end.decode,o[l].baseMediaDecodeTime=a.baseMediaDecodeTime}},t.appendData_=function(i,s){var a=s.type,o=s.data;if(!(!o||!o.byteLength)&&!(a==="audio"&&this.audioDisabled_)){var l=this.getInitSegmentAndUpdateState_({type:a,initSegment:s.initSegment,playlist:i.playlist,map:i.isFmp4?i.segment.map:null});this.appendToSourceBuffer_({segmentInfo:i,type:a,initSegment:l,data:o})}},t.loadSegment_=function(i){var s=this;if(this.state="WAITING",this.pendingSegment_=i,this.trimBackBuffer_(i),typeof i.timestampOffset=="number"&&this.transmuxer_&&this.transmuxer_.postMessage({action:"clearAllMp4Captions"}),!this.hasEnoughInfoToLoad_()){this.loadQueue_.push(function(){var a=sr({},i,{forceTimestampOffset:!0});sr(i,s.generateSegmentInfo_(a)),s.isPendingTimestampOffset_=!1,s.updateTransmuxerAndRequestSegment_(i)});return}this.updateTransmuxerAndRequestSegment_(i)},t.updateTransmuxerAndRequestSegment_=function(i){var s=this;this.shouldUpdateTransmuxerTimestampOffset_(i.timestampOffset)&&(this.gopBuffer_.length=0,i.gopsToAlignWith=[],this.timeMapping_=0,this.transmuxer_.postMessage({action:"reset"}),this.transmuxer_.postMessage({action:"setTimestampOffset",timestampOffset:i.timestampOffset}));var a=this.createSimplifiedSegmentObj_(i),o=this.isEndOfStream_(i.mediaIndex,i.playlist,i.partIndex),l=this.mediaIndex!==null,u=i.timeline!==this.currentTimeline_&&i.timeline>0,c=o||l&&u;this.logger_("Requesting "+tp(i)),a.map&&!a.map.bytes&&(this.logger_("going to request init segment."),this.appendInitSegment_={video:!0,audio:!0}),i.abortRequests=I_e({xhr:this.vhs_.xhr,xhrOptions:this.xhrOptions_,decryptionWorker:this.decrypter_,segment:a,abortFn:this.handleAbort_.bind(this,i),progressFn:this.handleProgress_.bind(this),trackInfoFn:this.handleTrackInfo_.bind(this),timingInfoFn:this.handleTimingInfo_.bind(this),videoSegmentTimingInfoFn:this.handleSegmentTimingInfo_.bind(this,"video",i.requestId),audioSegmentTimingInfoFn:this.handleSegmentTimingInfo_.bind(this,"audio",i.requestId),captionsFn:this.handleCaptions_.bind(this),isEndOfTimeline:c,endedTimelineFn:function(){s.logger_("received endedtimeline callback")},id3Fn:this.handleId3_.bind(this),dataFn:this.handleData_.bind(this),doneFn:this.segmentRequestFinished_.bind(this),onTransmuxerLog:function(f){var g=f.message,v=f.level,y=f.stream;s.logger_(tp(i)+" logged from transmuxer stream "+y+" as a "+v+": "+g)}})},t.trimBackBuffer_=function(i){var s=J_e(this.seekable_(),this.currentTime_(),this.playlist_.targetDuration||10);s>0&&this.remove(0,s)},t.createSimplifiedSegmentObj_=function(i){var s=i.segment,a=i.part,o={resolvedUri:a?a.resolvedUri:s.resolvedUri,byterange:a?a.byterange:s.byterange,requestId:i.requestId,transmuxer:i.transmuxer,audioAppendStart:i.audioAppendStart,gopsToAlignWith:i.gopsToAlignWith,part:i.part},l=i.playlist.segments[i.mediaIndex-1];if(l&&l.timeline===s.timeline&&(l.videoTimingInfo?o.baseStartTime=l.videoTimingInfo.transmuxedDecodeEnd:l.audioTimingInfo&&(o.baseStartTime=l.audioTimingInfo.transmuxedDecodeEnd)),s.key){var u=s.key.iv||new Uint32Array([0,0,0,i.mediaIndex+i.playlist.mediaSequence]);o.key=this.segmentKey(s.key),o.key.iv=u}return s.map&&(o.map=this.initSegmentForMap(s.map)),o},t.saveTransferStats_=function(i){this.mediaRequests+=1,i&&(this.mediaBytesTransferred+=i.bytesReceived,this.mediaTransferDuration+=i.roundTripTime)},t.saveBandwidthRelatedStats_=function(i,s){if(this.pendingSegment_.byteLength=s.bytesReceived,i<sx){this.logger_("Ignoring segment's bandwidth because its duration of "+i+(" is less than the min to record "+sx));return}this.bandwidth=s.bandwidth,this.roundTrip=s.roundTripTime},t.handleTimeout_=function(){this.mediaRequestsTimedout+=1,this.bandwidth=1,this.roundTrip=NaN,this.trigger("bandwidthupdate"),this.trigger("timeout")},t.segmentRequestFinished_=function(i,s,a){if(this.callQueue_.length){this.callQueue_.push(this.segmentRequestFinished_.bind(this,i,s,a));return}if(this.saveTransferStats_(s.stats),!!this.pendingSegment_&&s.requestId===this.pendingSegment_.requestId){if(i){if(this.pendingSegment_=null,this.state="READY",i.code===Au.ABORTED)return;if(this.pause(),i.code===Au.TIMEOUT){this.handleTimeout_();return}this.mediaRequestsErrored+=1,this.error(i),this.trigger("error");return}var o=this.pendingSegment_;this.saveBandwidthRelatedStats_(o.duration,s.stats),o.endOfAllRequests=s.endOfAllRequests,a.gopInfo&&(this.gopBuffer_=q_e(this.gopBuffer_,a.gopInfo,this.safeAppend_)),this.state="APPENDING",this.trigger("appending"),this.waitForAppendsToComplete_(o)}},t.setTimeMapping_=function(i){var s=this.syncController_.mappingForTimeline(i);s!==null&&(this.timeMapping_=s)},t.updateMediaSecondsLoaded_=function(i){typeof i.start=="number"&&typeof i.end=="number"?this.mediaSecondsLoaded+=i.end-i.start:this.mediaSecondsLoaded+=i.duration},t.shouldUpdateTransmuxerTimestampOffset_=function(i){return i===null?!1:this.loaderType_==="main"&&i!==this.sourceUpdater_.videoTimestampOffset()||!this.audioDisabled_&&i!==this.sourceUpdater_.audioTimestampOffset()},t.trueSegmentStart_=function(i){var s=i.currentStart,a=i.playlist,o=i.mediaIndex,l=i.firstVideoFrameTimeForData,u=i.currentVideoTimestampOffset,c=i.useVideoTimingInfo,h=i.videoTimingInfo,f=i.audioTimingInfo;if(typeof s<"u")return s;if(!c)return f.start;var g=a.segments[o-1];return o===0||!g||typeof g.start>"u"||g.end!==l+u?l:h.start},t.waitForAppendsToComplete_=function(i){var s=this.getCurrentMediaInfo_(i);if(!s){this.error({message:"No starting media returned, likely due to an unsupported media format.",blacklistDuration:1/0}),this.trigger("error");return}var a=s.hasAudio,o=s.hasVideo,l=s.isMuxed,u=this.loaderType_==="main"&&o,c=!this.audioDisabled_&&a&&!l;if(i.waitingOnAppends=0,!i.hasAppendedData_){!i.timingInfo&&typeof i.timestampOffset=="number"&&(this.isPendingTimestampOffset_=!0),i.timingInfo={start:0},i.waitingOnAppends++,this.isPendingTimestampOffset_||(this.updateSourceBufferTimestampOffset_(i),this.processMetadataQueue_()),this.checkAppendsDone_(i);return}u&&i.waitingOnAppends++,c&&i.waitingOnAppends++,u&&this.sourceUpdater_.videoQueueCallback(this.checkAppendsDone_.bind(this,i)),c&&this.sourceUpdater_.audioQueueCallback(this.checkAppendsDone_.bind(this,i))},t.checkAppendsDone_=function(i){this.checkForAbort_(i.requestId)||(i.waitingOnAppends--,i.waitingOnAppends===0&&this.handleAppendsDone_())},t.checkForIllegalMediaSwitch=function(i){var s=Q_e(this.loaderType_,this.getCurrentMediaInfo_(),i);return s?(this.error({message:s,blacklistDuration:1/0}),this.trigger("error"),!0):!1},t.updateSourceBufferTimestampOffset_=function(i){if(!(i.timestampOffset===null||typeof i.timingInfo.start!="number"||i.changedTimestampOffset||this.loaderType_!=="main")){var s=!1;i.timestampOffset-=this.getSegmentStartTimeForTimestampOffsetCalculation_({videoTimingInfo:i.segment.videoTimingInfo,audioTimingInfo:i.segment.audioTimingInfo,timingInfo:i.timingInfo}),i.changedTimestampOffset=!0,i.timestampOffset!==this.sourceUpdater_.videoTimestampOffset()&&(this.sourceUpdater_.videoTimestampOffset(i.timestampOffset),s=!0),i.timestampOffset!==this.sourceUpdater_.audioTimestampOffset()&&(this.sourceUpdater_.audioTimestampOffset(i.timestampOffset),s=!0),s&&this.trigger("timestampoffset")}},t.getSegmentStartTimeForTimestampOffsetCalculation_=function(i){var s=i.videoTimingInfo,a=i.audioTimingInfo,o=i.timingInfo;return this.useDtsForTimestampOffset_?s&&typeof s.transmuxedDecodeStart=="number"?s.transmuxedDecodeStart:a&&typeof a.transmuxedDecodeStart=="number"?a.transmuxedDecodeStart:o.start:o.start},t.updateTimingInfoEnd_=function(i){i.timingInfo=i.timingInfo||{};var s=this.getMediaInfo_(),a=this.loaderType_==="main"&&s&&s.hasVideo,o=a&&i.videoTimingInfo?i.videoTimingInfo:i.audioTimingInfo;o&&(i.timingInfo.end=typeof o.end=="number"?o.end:o.start+i.duration)},t.handleAppendsDone_=function(){if(this.pendingSegment_&&this.trigger("appendsdone"),!this.pendingSegment_){this.state="READY",this.paused()||this.monitorBuffer_();return}var i=this.pendingSegment_;this.updateTimingInfoEnd_(i),this.shouldSaveSegmentTimingInfo_&&this.syncController_.saveSegmentTimingInfo({segmentInfo:i,shouldSaveTimelineMapping:this.loaderType_==="main"});var s=tbe(i,this.sourceType_);if(s&&(s.severity==="warn"?Me.log.warn(s.message):this.logger_(s.message)),this.recordThroughput_(i),this.pendingSegment_=null,this.state="READY",i.isSyncRequest&&(this.trigger("syncinfoupdate"),!i.hasAppendedData_)){this.logger_("Throwing away un-appended sync request "+tp(i));return}this.logger_("Appended "+tp(i)),this.addSegmentMetadataCue_(i),this.fetchAtBuffer_=!0,this.currentTimeline_!==i.timeline&&(this.timelineChangeController_.lastTimelineChange({type:this.loaderType_,from:this.currentTimeline_,to:i.timeline}),this.loaderType_==="main"&&!this.audioDisabled_&&this.timelineChangeController_.lastTimelineChange({type:"audio",from:this.currentTimeline_,to:i.timeline})),this.currentTimeline_=i.timeline,this.trigger("syncinfoupdate");var a=i.segment,o=i.part,l=a.end&&this.currentTime_()-a.end>i.playlist.targetDuration*3,u=o&&o.end&&this.currentTime_()-o.end>i.playlist.partTargetDuration*3;if(l||u){this.logger_("bad "+(l?"segment":"part")+" "+tp(i)),this.resetEverything();return}var c=this.mediaIndex!==null;c&&this.trigger("bandwidthupdate"),this.trigger("progress"),this.mediaIndex=i.mediaIndex,this.partIndex=i.partIndex,this.isEndOfStream_(i.mediaIndex,i.playlist,i.partIndex)&&this.endOfStream(),this.trigger("appended"),i.hasAppendedData_&&this.mediaAppends++,this.paused()||this.monitorBuffer_()},t.recordThroughput_=function(i){if(i.duration<sx){this.logger_("Ignoring segment's throughput because its duration of "+i.duration+(" is less than the min to record "+sx));return}var s=this.throughput.rate,a=Date.now()-i.endOfAllRequests+1,o=Math.floor(i.byteLength/a*8*1e3);this.throughput.rate+=(o-s)/++this.throughput.count},t.addSegmentMetadataCue_=function(i){if(this.segmentMetadataTrack_){var s=i.segment,a=s.start,o=s.end;if(!(!cF(a)||!cF(o))){X0(a,o,this.segmentMetadataTrack_);var l=X.WebKitDataCue||X.VTTCue,u={custom:s.custom,dateTimeObject:s.dateTimeObject,dateTimeString:s.dateTimeString,bandwidth:i.playlist.attributes.BANDWIDTH,resolution:i.playlist.attributes.RESOLUTION,codecs:i.playlist.attributes.CODECS,byteLength:i.byteLength,uri:i.uri,timeline:i.timeline,playlist:i.playlist.id,start:a,end:o},c=JSON.stringify(u),h=new l(a,o,c);h.value=u,this.segmentMetadataTrack_.addCue(h)}}},e})(Me.EventTarget);function Dc(){}var b9=function(e){return typeof e!="string"?e:e.replace(/./,function(t){return t.toUpperCase()})},rbe=["video","audio"],bE=function(e,t){var n=t[e+"Buffer"];return n&&n.updating||t.queuePending[e]},nbe=function(e,t){for(var n=0;n<t.length;n++){var i=t[n];if(i.type==="mediaSource")return null;if(i.type===e)return n}return null},yD=function r(e,t){if(t.queue.length!==0){var n=0,i=t.queue[n];if(i.type==="mediaSource"){!t.updating()&&t.mediaSource.readyState!=="closed"&&(t.queue.shift(),i.action(t),i.doneFn&&i.doneFn(),r("audio",t),r("video",t));return}if(e!=="mediaSource"&&!(!t.ready()||t.mediaSource.readyState==="closed"||bE(e,t))){if(i.type!==e){if(n=nbe(e,t.queue),n===null)return;i=t.queue[n]}if(t.queue.splice(n,1),t.queuePending[e]=i,i.action(e,t),!i.doneFn){t.queuePending[e]=null,r(e,t);return}}}},S9=function(e,t){var n=t[e+"Buffer"],i=b9(e);n&&(n.removeEventListener("updateend",t["on"+i+"UpdateEnd_"]),n.removeEventListener("error",t["on"+i+"Error_"]),t.codecs[e]=null,t[e+"Buffer"]=null)},vu=function(e,t){return e&&t&&Array.prototype.indexOf.call(e.sourceBuffers,t)!==-1},lo={appendBuffer:function(e,t,n){return function(i,s){var a=s[i+"Buffer"];if(vu(s.mediaSource,a)){s.logger_("Appending segment "+t.mediaIndex+"'s "+e.length+" bytes to "+i+"Buffer");try{a.appendBuffer(e)}catch(o){s.logger_("Error with code "+o.code+" "+(o.code===_9?"(QUOTA_EXCEEDED_ERR) ":"")+("when appending segment "+t.mediaIndex+" to "+i+"Buffer")),s.queuePending[i]=null,n(o)}}}},remove:function(e,t){return function(n,i){var s=i[n+"Buffer"];if(vu(i.mediaSource,s)){i.logger_("Removing "+e+" to "+t+" from "+n+"Buffer");try{s.remove(e,t)}catch{i.logger_("Remove "+e+" to "+t+" from "+n+"Buffer failed")}}}},timestampOffset:function(e){return function(t,n){var i=n[t+"Buffer"];vu(n.mediaSource,i)&&(n.logger_("Setting "+t+"timestampOffset to "+e),i.timestampOffset=e)}},callback:function(e){return function(t,n){e()}},endOfStream:function(e){return function(t){if(t.mediaSource.readyState==="open"){t.logger_("Calling mediaSource endOfStream("+(e||"")+")");try{t.mediaSource.endOfStream(e)}catch(n){Me.log.warn("Failed to call media source endOfStream",n)}}}},duration:function(e){return function(t){t.logger_("Setting mediaSource duration to "+e);try{t.mediaSource.duration=e}catch(n){Me.log.warn("Failed to set media source duration",n)}}},abort:function(){return function(e,t){if(t.mediaSource.readyState==="open"){var n=t[e+"Buffer"];if(vu(t.mediaSource,n)){t.logger_("calling abort on "+e+"Buffer");try{n.abort()}catch(i){Me.log.warn("Failed to abort on "+e+"Buffer",i)}}}}},addSourceBuffer:function(e,t){return function(n){var i=b9(e),s=Ng(t);n.logger_("Adding "+e+"Buffer with codec "+t+" to mediaSource");var a=n.mediaSource.addSourceBuffer(s);a.addEventListener("updateend",n["on"+i+"UpdateEnd_"]),a.addEventListener("error",n["on"+i+"Error_"]),n.codecs[e]=t,n[e+"Buffer"]=a}},removeSourceBuffer:function(e){return function(t){var n=t[e+"Buffer"];if(S9(e,t),!!vu(t.mediaSource,n)){t.logger_("Removing "+e+"Buffer with codec "+t.codecs[e]+" from mediaSource");try{t.mediaSource.removeSourceBuffer(n)}catch(i){Me.log.warn("Failed to removeSourceBuffer "+e+"Buffer",i)}}}},changeType:function(e){return function(t,n){var i=n[t+"Buffer"],s=Ng(e);if(vu(n.mediaSource,i)&&n.codecs[t]!==e){n.logger_("changing "+t+"Buffer codec from "+n.codecs[t]+" to "+e);try{i.changeType(s),n.codecs[t]=e}catch(a){Me.log.warn("Failed to changeType on "+t+"Buffer",a)}}}}},uo=function(e){var t=e.type,n=e.sourceUpdater,i=e.action,s=e.doneFn,a=e.name;n.queue.push({type:t,action:i,doneFn:s,name:a}),yD(t,n)},pF=function(e,t){return function(n){if(t.queuePending[e]){var i=t.queuePending[e].doneFn;t.queuePending[e]=null,i&&i(t[e+"Error_"])}yD(e,t)}},T9=(function(r){Ht(e,r);function e(n){var i;return i=r.call(this)||this,i.mediaSource=n,i.sourceopenListener_=function(){return yD("mediaSource",We(i))},i.mediaSource.addEventListener("sourceopen",i.sourceopenListener_),i.logger_=zl("SourceUpdater"),i.audioTimestampOffset_=0,i.videoTimestampOffset_=0,i.queue=[],i.queuePending={audio:null,video:null},i.delayedAudioAppendQueue_=[],i.videoAppendQueued_=!1,i.codecs={},i.onVideoUpdateEnd_=pF("video",We(i)),i.onAudioUpdateEnd_=pF("audio",We(i)),i.onVideoError_=function(s){i.videoError_=s},i.onAudioError_=function(s){i.audioError_=s},i.createdSourceBuffers_=!1,i.initializedEme_=!1,i.triggeredReady_=!1,i}var t=e.prototype;return t.initializedEme=function(){this.initializedEme_=!0,this.triggerReady()},t.hasCreatedSourceBuffers=function(){return this.createdSourceBuffers_},t.hasInitializedAnyEme=function(){return this.initializedEme_},t.ready=function(){return this.hasCreatedSourceBuffers()&&this.hasInitializedAnyEme()},t.createSourceBuffers=function(i){this.hasCreatedSourceBuffers()||(this.addOrChangeSourceBuffers(i),this.createdSourceBuffers_=!0,this.trigger("createdsourcebuffers"),this.triggerReady())},t.triggerReady=function(){this.ready()&&!this.triggeredReady_&&(this.triggeredReady_=!0,this.trigger("ready"))},t.addSourceBuffer=function(i,s){uo({type:"mediaSource",sourceUpdater:this,action:lo.addSourceBuffer(i,s),name:"addSourceBuffer"})},t.abort=function(i){uo({type:i,sourceUpdater:this,action:lo.abort(i),name:"abort"})},t.removeSourceBuffer=function(i){if(!this.canRemoveSourceBuffer()){Me.log.error("removeSourceBuffer is not supported!");return}uo({type:"mediaSource",sourceUpdater:this,action:lo.removeSourceBuffer(i),name:"removeSourceBuffer"})},t.canRemoveSourceBuffer=function(){return!Me.browser.IE_VERSION&&!Me.browser.IS_FIREFOX&&X.MediaSource&&X.MediaSource.prototype&&typeof X.MediaSource.prototype.removeSourceBuffer=="function"},e.canChangeType=function(){return X.SourceBuffer&&X.SourceBuffer.prototype&&typeof X.SourceBuffer.prototype.changeType=="function"},t.canChangeType=function(){return this.constructor.canChangeType()},t.changeType=function(i,s){if(!this.canChangeType()){Me.log.error("changeType is not supported!");return}uo({type:i,sourceUpdater:this,action:lo.changeType(s),name:"changeType"})},t.addOrChangeSourceBuffers=function(i){var s=this;if(!i||typeof i!="object"||Object.keys(i).length===0)throw new Error("Cannot addOrChangeSourceBuffers to undefined codecs");Object.keys(i).forEach(function(a){var o=i[a];if(!s.hasCreatedSourceBuffers())return s.addSourceBuffer(a,o);s.canChangeType()&&s.changeType(a,o)})},t.appendBuffer=function(i,s){var a=this,o=i.segmentInfo,l=i.type,u=i.bytes;if(this.processedAppend_=!0,l==="audio"&&this.videoBuffer&&!this.videoAppendQueued_){this.delayedAudioAppendQueue_.push([i,s]),this.logger_("delayed audio append of "+u.length+" until video append");return}var c=s;if(uo({type:l,sourceUpdater:this,action:lo.appendBuffer(u,o||{mediaIndex:-1},c),doneFn:s,name:"appendBuffer"}),l==="video"){if(this.videoAppendQueued_=!0,!this.delayedAudioAppendQueue_.length)return;var h=this.delayedAudioAppendQueue_.slice();this.logger_("queuing delayed audio "+h.length+" appendBuffers"),this.delayedAudioAppendQueue_.length=0,h.forEach(function(f){a.appendBuffer.apply(a,f)})}},t.audioBuffered=function(){return vu(this.mediaSource,this.audioBuffer)&&this.audioBuffer.buffered?this.audioBuffer.buffered:Me.createTimeRange()},t.videoBuffered=function(){return vu(this.mediaSource,this.videoBuffer)&&this.videoBuffer.buffered?this.videoBuffer.buffered:Me.createTimeRange()},t.buffered=function(){var i=vu(this.mediaSource,this.videoBuffer)?this.videoBuffer:null,s=vu(this.mediaSource,this.audioBuffer)?this.audioBuffer:null;return s&&!i?this.audioBuffered():i&&!s?this.videoBuffered():bxe(this.audioBuffered(),this.videoBuffered())},t.setDuration=function(i,s){s===void 0&&(s=Dc),uo({type:"mediaSource",sourceUpdater:this,action:lo.duration(i),name:"duration",doneFn:s})},t.endOfStream=function(i,s){i===void 0&&(i=null),s===void 0&&(s=Dc),typeof i!="string"&&(i=void 0),uo({type:"mediaSource",sourceUpdater:this,action:lo.endOfStream(i),name:"endOfStream",doneFn:s})},t.removeAudio=function(i,s,a){if(a===void 0&&(a=Dc),!this.audioBuffered().length||this.audioBuffered().end(0)===0){a();return}uo({type:"audio",sourceUpdater:this,action:lo.remove(i,s),doneFn:a,name:"remove"})},t.removeVideo=function(i,s,a){if(a===void 0&&(a=Dc),!this.videoBuffered().length||this.videoBuffered().end(0)===0){a();return}uo({type:"video",sourceUpdater:this,action:lo.remove(i,s),doneFn:a,name:"remove"})},t.updating=function(){return!!(bE("audio",this)||bE("video",this))},t.audioTimestampOffset=function(i){return typeof i<"u"&&this.audioBuffer&&this.audioTimestampOffset_!==i&&(uo({type:"audio",sourceUpdater:this,action:lo.timestampOffset(i),name:"timestampOffset"}),this.audioTimestampOffset_=i),this.audioTimestampOffset_},t.videoTimestampOffset=function(i){return typeof i<"u"&&this.videoBuffer&&this.videoTimestampOffset!==i&&(uo({type:"video",sourceUpdater:this,action:lo.timestampOffset(i),name:"timestampOffset"}),this.videoTimestampOffset_=i),this.videoTimestampOffset_},t.audioQueueCallback=function(i){this.audioBuffer&&uo({type:"audio",sourceUpdater:this,action:lo.callback(i),name:"callback"})},t.videoQueueCallback=function(i){this.videoBuffer&&uo({type:"video",sourceUpdater:this,action:lo.callback(i),name:"callback"})},t.dispose=function(){var i=this;this.trigger("dispose"),rbe.forEach(function(s){i.abort(s),i.canRemoveSourceBuffer()?i.removeSourceBuffer(s):i[s+"QueueCallback"](function(){return S9(s,i)})}),this.videoAppendQueued_=!1,this.delayedAudioAppendQueue_.length=0,this.sourceopenListener_&&this.mediaSource.removeEventListener("sourceopen",this.sourceopenListener_),this.off()},e})(Me.EventTarget),mF=function(e){return decodeURIComponent(escape(String.fromCharCode.apply(null,e)))},gF=new Uint8Array(`

`.split("").map(function(r){return r.charCodeAt(0)})),ibe=(function(r){Ht(e,r);function e(){return r.call(this,"Trying to parse received VTT cues, but there is no WebVTT. Make sure vtt.js is loaded.")||this}return e})(rE(Error)),sbe=(function(r){Ht(e,r);function e(n,i){var s;return i===void 0&&(i={}),s=r.call(this,n,i)||this,s.mediaSource_=null,s.subtitlesTrack_=null,s.loaderType_="subtitle",s.featuresNativeTextTracks_=n.featuresNativeTextTracks,s.loadVttJs=n.loadVttJs,s.shouldSaveSegmentTimingInfo_=!1,s}var t=e.prototype;return t.createTransmuxer_=function(){return null},t.buffered_=function(){if(!this.subtitlesTrack_||!this.subtitlesTrack_.cues||!this.subtitlesTrack_.cues.length)return Me.createTimeRanges();var i=this.subtitlesTrack_.cues,s=i[0].startTime,a=i[i.length-1].startTime;return Me.createTimeRanges([[s,a]])},t.initSegmentForMap=function(i,s){if(s===void 0&&(s=!1),!i)return null;var a=Ib(i),o=this.initSegments_[a];if(s&&!o&&i.bytes){var l=gF.byteLength+i.bytes.byteLength,u=new Uint8Array(l);u.set(i.bytes),u.set(gF,i.bytes.byteLength),this.initSegments_[a]=o={resolvedUri:i.resolvedUri,byterange:i.byterange,bytes:u}}return o||i},t.couldBeginLoading_=function(){return this.playlist_&&this.subtitlesTrack_&&!this.paused()},t.init_=function(){return this.state="READY",this.resetEverything(),this.monitorBuffer_()},t.track=function(i){return typeof i>"u"?this.subtitlesTrack_:(this.subtitlesTrack_=i,this.state==="INIT"&&this.couldBeginLoading_()&&this.init_(),this.subtitlesTrack_)},t.remove=function(i,s){X0(i,s,this.subtitlesTrack_)},t.fillBuffer_=function(){var i=this,s=this.chooseNextRequest_();if(s){if(this.syncController_.timestampOffsetForTimeline(s.timeline)===null){var a=function(){i.state="READY",i.paused()||i.monitorBuffer_()};this.syncController_.one("timestampoffset",a),this.state="WAITING_ON_TIMELINE";return}this.loadSegment_(s)}},t.timestampOffsetForSegment_=function(){return null},t.chooseNextRequest_=function(){return this.skipEmptySegments_(r.prototype.chooseNextRequest_.call(this))},t.skipEmptySegments_=function(i){for(;i&&i.segment.empty;){if(i.mediaIndex+1>=i.playlist.segments.length){i=null;break}i=this.generateSegmentInfo_({playlist:i.playlist,mediaIndex:i.mediaIndex+1,startOfSegment:i.startOfSegment+i.duration,isSyncRequest:i.isSyncRequest})}return i},t.stopForError=function(i){this.error(i),this.state="READY",this.pause(),this.trigger("error")},t.segmentRequestFinished_=function(i,s,a){var o=this;if(!this.subtitlesTrack_){this.state="READY";return}if(this.saveTransferStats_(s.stats),!this.pendingSegment_){this.state="READY",this.mediaRequestsAborted+=1;return}if(i){i.code===Au.TIMEOUT&&this.handleTimeout_(),i.code===Au.ABORTED?this.mediaRequestsAborted+=1:this.mediaRequestsErrored+=1,this.stopForError(i);return}var l=this.pendingSegment_;this.saveBandwidthRelatedStats_(l.duration,s.stats),s.key&&this.segmentKey(s.key,!0),this.state="APPENDING",this.trigger("appending");var u=l.segment;if(u.map&&(u.map.bytes=s.map.bytes),l.bytes=s.bytes,typeof X.WebVTT!="function"&&typeof this.loadVttJs=="function"){this.state="WAITING_ON_VTTJS",this.loadVttJs().then(function(){return o.segmentRequestFinished_(i,s,a)},function(){return o.stopForError({message:"Error loading vtt.js"})});return}u.requested=!0;try{this.parseVTTCues_(l)}catch(c){this.stopForError({message:c.message});return}if(this.updateTimeMapping_(l,this.syncController_.timelines[l.timeline],this.playlist_),l.cues.length?l.timingInfo={start:l.cues[0].startTime,end:l.cues[l.cues.length-1].endTime}:l.timingInfo={start:l.startOfSegment,end:l.startOfSegment+l.duration},l.isSyncRequest){this.trigger("syncinfoupdate"),this.pendingSegment_=null,this.state="READY";return}l.byteLength=l.bytes.byteLength,this.mediaSecondsLoaded+=u.duration,l.cues.forEach(function(c){o.subtitlesTrack_.addCue(o.featuresNativeTextTracks_?new X.VTTCue(c.startTime,c.endTime,c.text):c)}),V_e(this.subtitlesTrack_),this.handleAppendsDone_()},t.handleData_=function(){},t.updateTimingInfoEnd_=function(){},t.parseVTTCues_=function(i){var s,a=!1;if(typeof X.WebVTT!="function")throw new ibe;typeof X.TextDecoder=="function"?s=new X.TextDecoder("utf8"):(s=X.WebVTT.StringDecoder(),a=!0);var o=new X.WebVTT.Parser(X,X.vttjs,s);if(i.cues=[],i.timestampmap={MPEGTS:0,LOCAL:0},o.oncue=i.cues.push.bind(i.cues),o.ontimestampmap=function(c){i.timestampmap=c},o.onparsingerror=function(c){Me.log.warn("Error encountered when parsing cues: "+c.message)},i.segment.map){var l=i.segment.map.bytes;a&&(l=mF(l)),o.parse(l)}var u=i.bytes;a&&(u=mF(u)),o.parse(u),o.flush()},t.updateTimeMapping_=function(i,s,a){var o=i.segment;if(s){if(!i.cues.length){o.empty=!0;return}var l=i.timestampmap,u=l.MPEGTS/yb.ONE_SECOND_IN_TS-l.LOCAL+s.mapping;if(i.cues.forEach(function(f){f.startTime+=u,f.endTime+=u}),!a.syncInfo){var c=i.cues[0].startTime,h=i.cues[i.cues.length-1].startTime;a.syncInfo={mediaSequence:a.mediaSequence+i.mediaIndex,time:Math.min(c,h-o.duration)}}}},e})(_E),abe=function(e,t){for(var n=e.cues,i=0;i<n.length;i++){var s=n[i];if(t>=s.adStartTime&&t<=s.adEndTime)return s}return null},obe=function(e,t,n){if(n===void 0&&(n=0),!!e.segments)for(var i=n,s,a=0;a<e.segments.length;a++){var o=e.segments[a];if(s||(s=abe(t,i+o.duration/2)),s){if("cueIn"in o){s.endTime=i,s.adEndTime=i,i+=o.duration,s=null;continue}if(i<s.endTime){i+=o.duration;continue}s.endTime+=o.duration}else if("cueOut"in o&&(s=new X.VTTCue(i,i+o.duration,o.cueOut),s.adStartTime=i,s.adEndTime=i+parseFloat(o.cueOut),t.addCue(s)),"cueOutCont"in o){var l=o.cueOutCont.split("/").map(parseFloat),u=l[0],c=l[1];s=new X.VTTCue(i,i+o.duration,""),s.adStartTime=i-u,s.adEndTime=s.adStartTime+c,t.addCue(s)}i+=o.duration}},lbe=86400,vF=[{name:"VOD",run:function(e,t,n,i,s){if(n!==1/0){var a={time:0,segmentIndex:0,partIndex:null};return a}return null}},{name:"ProgramDateTime",run:function(e,t,n,i,s){if(!Object.keys(e.timelineToDatetimeMappings).length)return null;var a=null,o=null,l=hE(t);s=s||0;for(var u=0;u<l.length;u++){var c=t.endList||s===0?u:l.length-(u+1),h=l[c],f=h.segment,g=e.timelineToDatetimeMappings[f.timeline];if(!(!g||!f.dateTimeObject)){var v=f.dateTimeObject.getTime()/1e3,y=v+g;if(f.parts&&typeof h.partIndex=="number")for(var _=0;_<h.partIndex;_++)y+=f.parts[_].duration;var C=Math.abs(s-y);if(o!==null&&(C===0||o<C))break;o=C,a={time:y,segmentIndex:h.segmentIndex,partIndex:h.partIndex}}}return a}},{name:"Segment",run:function(e,t,n,i,s){var a=null,o=null;s=s||0;for(var l=hE(t),u=0;u<l.length;u++){var c=t.endList||s===0?u:l.length-(u+1),h=l[c],f=h.segment,g=h.part&&h.part.start||f&&f.start;if(f.timeline===i&&typeof g<"u"){var v=Math.abs(s-g);if(o!==null&&o<v)break;(!a||o===null||o>=v)&&(o=v,a={time:g,segmentIndex:h.segmentIndex,partIndex:h.partIndex})}}return a}},{name:"Discontinuity",run:function(e,t,n,i,s){var a=null;if(s=s||0,t.discontinuityStarts&&t.discontinuityStarts.length)for(var o=null,l=0;l<t.discontinuityStarts.length;l++){var u=t.discontinuityStarts[l],c=t.discontinuitySequence+l+1,h=e.discontinuities[c];if(h){var f=Math.abs(s-h.time);if(o!==null&&o<f)break;(!a||o===null||o>=f)&&(o=f,a={time:h.time,segmentIndex:u,partIndex:null})}}return a}},{name:"Playlist",run:function(e,t,n,i,s){if(t.syncInfo){var a={time:t.syncInfo.time,segmentIndex:t.syncInfo.mediaSequence-t.mediaSequence,partIndex:null};return a}return null}}],ube=(function(r){Ht(e,r);function e(n){var i;return i=r.call(this)||this,i.timelines=[],i.discontinuities=[],i.timelineToDatetimeMappings={},i.logger_=zl("SyncController"),i}var t=e.prototype;return t.getSyncPoint=function(i,s,a,o){var l=this.runStrategies_(i,s,a,o);return l.length?this.selectSyncPoint_(l,{key:"time",value:o}):null},t.getExpiredTime=function(i,s){if(!i||!i.segments)return null;var a=this.runStrategies_(i,s,i.discontinuitySequence,0);if(!a.length)return null;var o=this.selectSyncPoint_(a,{key:"segmentIndex",value:0});return o.segmentIndex>0&&(o.time*=-1),Math.abs(o.time+pg({defaultDuration:i.targetDuration,durationList:i.segments,startIndex:o.segmentIndex,endIndex:0}))},t.runStrategies_=function(i,s,a,o){for(var l=[],u=0;u<vF.length;u++){var c=vF[u],h=c.run(this,i,s,a,o);h&&(h.strategy=c.name,l.push({strategy:c.name,syncPoint:h}))}return l},t.selectSyncPoint_=function(i,s){for(var a=i[0].syncPoint,o=Math.abs(i[0].syncPoint[s.key]-s.value),l=i[0].strategy,u=1;u<i.length;u++){var c=Math.abs(i[u].syncPoint[s.key]-s.value);c<o&&(o=c,a=i[u].syncPoint,l=i[u].strategy)}return this.logger_("syncPoint for ["+s.key+": "+s.value+"] chosen with strategy"+(" ["+l+"]: [time:"+a.time+",")+(" segmentIndex:"+a.segmentIndex)+(typeof a.partIndex=="number"?",partIndex:"+a.partIndex:"")+"]"),a},t.saveExpiredSegmentInfo=function(i,s){var a=s.mediaSequence-i.mediaSequence;if(a>lbe){Me.log.warn("Not saving expired segment info. Media sequence gap "+a+" is too large.");return}for(var o=a-1;o>=0;o--){var l=i.segments[o];if(l&&typeof l.start<"u"){s.syncInfo={mediaSequence:i.mediaSequence+o,time:l.start},this.logger_("playlist refresh sync: [time:"+s.syncInfo.time+","+(" mediaSequence: "+s.syncInfo.mediaSequence+"]")),this.trigger("syncinfoupdate");break}}},t.setDateTimeMappingForStart=function(i){if(this.timelineToDatetimeMappings={},i.segments&&i.segments.length&&i.segments[0].dateTimeObject){var s=i.segments[0],a=s.dateTimeObject.getTime()/1e3;this.timelineToDatetimeMappings[s.timeline]=-a}},t.saveSegmentTimingInfo=function(i){var s=i.segmentInfo,a=i.shouldSaveTimelineMapping,o=this.calculateSegmentTimeMapping_(s,s.timingInfo,a),l=s.segment;o&&(this.saveDiscontinuitySyncInfo_(s),s.playlist.syncInfo||(s.playlist.syncInfo={mediaSequence:s.playlist.mediaSequence+s.mediaIndex,time:l.start}));var u=l.dateTimeObject;l.discontinuity&&a&&u&&(this.timelineToDatetimeMappings[l.timeline]=-(u.getTime()/1e3))},t.timestampOffsetForTimeline=function(i){return typeof this.timelines[i]>"u"?null:this.timelines[i].time},t.mappingForTimeline=function(i){return typeof this.timelines[i]>"u"?null:this.timelines[i].mapping},t.calculateSegmentTimeMapping_=function(i,s,a){var o=i.segment,l=i.part,u=this.timelines[i.timeline],c,h;if(typeof i.timestampOffset=="number")u={time:i.startOfSegment,mapping:i.startOfSegment-s.start},a&&(this.timelines[i.timeline]=u,this.trigger("timestampoffset"),this.logger_("time mapping for timeline "+i.timeline+": "+("[time: "+u.time+"] [mapping: "+u.mapping+"]"))),c=i.startOfSegment,h=s.end+u.mapping;else if(u)c=s.start+u.mapping,h=s.end+u.mapping;else return!1;return l&&(l.start=c,l.end=h),(!o.start||c<o.start)&&(o.start=c),o.end=h,!0},t.saveDiscontinuitySyncInfo_=function(i){var s=i.playlist,a=i.segment;if(a.discontinuity)this.discontinuities[a.timeline]={time:a.start,accuracy:0};else if(s.discontinuityStarts&&s.discontinuityStarts.length)for(var o=0;o<s.discontinuityStarts.length;o++){var l=s.discontinuityStarts[o],u=s.discontinuitySequence+o+1,c=l-i.mediaIndex,h=Math.abs(c);if(!this.discontinuities[u]||this.discontinuities[u].accuracy>h){var f=void 0;c<0?f=a.start-pg({defaultDuration:s.targetDuration,durationList:s.segments,startIndex:i.mediaIndex,endIndex:l}):f=a.end+pg({defaultDuration:s.targetDuration,durationList:s.segments,startIndex:i.mediaIndex+1,endIndex:l}),this.discontinuities[u]={time:f,accuracy:h}}}},t.dispose=function(){this.trigger("dispose"),this.off()},e})(Me.EventTarget),cbe=(function(r){Ht(e,r);function e(){var n;return n=r.call(this)||this,n.pendingTimelineChanges_={},n.lastTimelineChanges_={},n}var t=e.prototype;return t.clearPendingTimelineChange=function(i){this.pendingTimelineChanges_[i]=null,this.trigger("pendingtimelinechange")},t.pendingTimelineChange=function(i){var s=i.type,a=i.from,o=i.to;return typeof a=="number"&&typeof o=="number"&&(this.pendingTimelineChanges_[s]={type:s,from:a,to:o},this.trigger("pendingtimelinechange")),this.pendingTimelineChanges_[s]},t.lastTimelineChange=function(i){var s=i.type,a=i.from,o=i.to;return typeof a=="number"&&typeof o=="number"&&(this.lastTimelineChanges_[s]={type:s,from:a,to:o},delete this.pendingTimelineChanges_[s],this.trigger("timelinechange")),this.lastTimelineChanges_[s]},t.dispose=function(){this.trigger("dispose"),this.pendingTimelineChanges_={},this.lastTimelineChanges_={},this.off()},e})(Me.EventTarget),dbe=u9(c9(function(){var r=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function e(I,k,P){return P={path:k,exports:{},require:function(U,B){return t(U,B??P.path)}},I(P,P.exports),P.exports}function t(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}var n=e(function(I){function k(N,U){for(var B=0;B<U.length;B++){var A=U[B];A.enumerable=A.enumerable||!1,A.configurable=!0,"value"in A&&(A.writable=!0),Object.defineProperty(N,A.key,A)}}function P(N,U,B){return U&&k(N.prototype,U),B&&k(N,B),N}I.exports=P,I.exports.default=I.exports,I.exports.__esModule=!0}),i=e(function(I){function k(P,N){return I.exports=k=Object.setPrototypeOf||function(B,A){return B.__proto__=A,B},I.exports.default=I.exports,I.exports.__esModule=!0,k(P,N)}I.exports=k,I.exports.default=I.exports,I.exports.__esModule=!0}),s=e(function(I){function k(P,N){P.prototype=Object.create(N.prototype),P.prototype.constructor=P,i(P,N)}I.exports=k,I.exports.default=I.exports,I.exports.__esModule=!0}),a=(function(){function I(){this.listeners={}}var k=I.prototype;return k.on=function(N,U){this.listeners[N]||(this.listeners[N]=[]),this.listeners[N].push(U)},k.off=function(N,U){if(!this.listeners[N])return!1;var B=this.listeners[N].indexOf(U);return this.listeners[N]=this.listeners[N].slice(0),this.listeners[N].splice(B,1),B>-1},k.trigger=function(N){var U=this.listeners[N];if(U)if(arguments.length===2)for(var B=U.length,A=0;A<B;++A)U[A].call(this,arguments[1]);else for(var $=Array.prototype.slice.call(arguments,1),W=U.length,V=0;V<W;++V)U[V].apply(this,$)},k.dispose=function(){this.listeners={}},k.pipe=function(N){this.on("data",function(U){N.push(U)})},I})();/*! @name pkcs7 @version 1.0.4 @license Apache-2.0 */function o(I){return I.subarray(0,I.byteLength-I[I.byteLength-1])}/*! @name aes-decrypter @version 3.1.3 @license Apache-2.0 */var l=function(){var k=[[[],[],[],[],[]],[[],[],[],[],[]]],P=k[0],N=k[1],U=P[4],B=N[4],A,$,W,V=[],Q=[],ie,ne,ue,se,ae,ce;for(A=0;A<256;A++)Q[(V[A]=A<<1^(A>>7)*283)^A]=A;for($=W=0;!U[$];$^=ie||1,W=Q[W]||1)for(se=W^W<<1^W<<2^W<<3^W<<4,se=se>>8^se&255^99,U[$]=se,B[se]=$,ue=V[ne=V[ie=V[$]]],ce=ue*16843009^ne*65537^ie*257^$*16843008,ae=V[se]*257^se*16843008,A=0;A<4;A++)P[A][$]=ae=ae<<24^ae>>>8,N[A][se]=ce=ce<<24^ce>>>8;for(A=0;A<5;A++)P[A]=P[A].slice(0),N[A]=N[A].slice(0);return k},u=null,c=(function(){function I(P){u||(u=l()),this._tables=[[u[0][0].slice(),u[0][1].slice(),u[0][2].slice(),u[0][3].slice(),u[0][4].slice()],[u[1][0].slice(),u[1][1].slice(),u[1][2].slice(),u[1][3].slice(),u[1][4].slice()]];var N,U,B,A=this._tables[0][4],$=this._tables[1],W=P.length,V=1;if(W!==4&&W!==6&&W!==8)throw new Error("Invalid aes key size");var Q=P.slice(0),ie=[];for(this._key=[Q,ie],N=W;N<4*W+28;N++)B=Q[N-1],(N%W===0||W===8&&N%W===4)&&(B=A[B>>>24]<<24^A[B>>16&255]<<16^A[B>>8&255]<<8^A[B&255],N%W===0&&(B=B<<8^B>>>24^V<<24,V=V<<1^(V>>7)*283)),Q[N]=Q[N-W]^B;for(U=0;N;U++,N--)B=Q[U&3?N:N-4],N<=4||U<4?ie[U]=B:ie[U]=$[0][A[B>>>24]]^$[1][A[B>>16&255]]^$[2][A[B>>8&255]]^$[3][A[B&255]]}var k=I.prototype;return k.decrypt=function(N,U,B,A,$,W){var V=this._key[1],Q=N^V[0],ie=A^V[1],ne=B^V[2],ue=U^V[3],se,ae,ce,ee=V.length/4-2,pe,me=4,ye=this._tables[1],Oe=ye[0],Le=ye[1],st=ye[2],ze=ye[3],pt=ye[4];for(pe=0;pe<ee;pe++)se=Oe[Q>>>24]^Le[ie>>16&255]^st[ne>>8&255]^ze[ue&255]^V[me],ae=Oe[ie>>>24]^Le[ne>>16&255]^st[ue>>8&255]^ze[Q&255]^V[me+1],ce=Oe[ne>>>24]^Le[ue>>16&255]^st[Q>>8&255]^ze[ie&255]^V[me+2],ue=Oe[ue>>>24]^Le[Q>>16&255]^st[ie>>8&255]^ze[ne&255]^V[me+3],me+=4,Q=se,ie=ae,ne=ce;for(pe=0;pe<4;pe++)$[(3&-pe)+W]=pt[Q>>>24]<<24^pt[ie>>16&255]<<16^pt[ne>>8&255]<<8^pt[ue&255]^V[me++],se=Q,Q=ie,ie=ne,ne=ue,ue=se},I})(),h=(function(I){s(k,I);function k(){var N;return N=I.call(this,a)||this,N.jobs=[],N.delay=1,N.timeout_=null,N}var P=k.prototype;return P.processJob_=function(){this.jobs.shift()(),this.jobs.length?this.timeout_=setTimeout(this.processJob_.bind(this),this.delay):this.timeout_=null},P.push=function(U){this.jobs.push(U),this.timeout_||(this.timeout_=setTimeout(this.processJob_.bind(this),this.delay))},k})(a),f=function(k){return k<<24|(k&65280)<<8|(k&16711680)>>8|k>>>24},g=function(k,P,N){var U=new Int32Array(k.buffer,k.byteOffset,k.byteLength>>2),B=new c(Array.prototype.slice.call(P)),A=new Uint8Array(k.byteLength),$=new Int32Array(A.buffer),W,V,Q,ie,ne,ue,se,ae,ce;for(W=N[0],V=N[1],Q=N[2],ie=N[3],ce=0;ce<U.length;ce+=4)ne=f(U[ce]),ue=f(U[ce+1]),se=f(U[ce+2]),ae=f(U[ce+3]),B.decrypt(ne,ue,se,ae,$,ce),$[ce]=f($[ce]^W),$[ce+1]=f($[ce+1]^V),$[ce+2]=f($[ce+2]^Q),$[ce+3]=f($[ce+3]^ie),W=ne,V=ue,Q=se,ie=ae;return A},v=(function(){function I(P,N,U,B){var A=I.STEP,$=new Int32Array(P.buffer),W=new Uint8Array(P.byteLength),V=0;for(this.asyncStream_=new h,this.asyncStream_.push(this.decryptChunk_($.subarray(V,V+A),N,U,W)),V=A;V<$.length;V+=A)U=new Uint32Array([f($[V-4]),f($[V-3]),f($[V-2]),f($[V-1])]),this.asyncStream_.push(this.decryptChunk_($.subarray(V,V+A),N,U,W));this.asyncStream_.push(function(){B(null,o(W))})}var k=I.prototype;return k.decryptChunk_=function(N,U,B,A){return function(){var $=g(N,U,B);A.set($,N.byteOffset)}},n(I,null,[{key:"STEP",get:function(){return 32e3}}]),I})(),y;typeof window<"u"?y=window:typeof r<"u"?y=r:typeof self<"u"?y=self:y={};var _=y,C=function(k){return ArrayBuffer.isView==="function"?ArrayBuffer.isView(k):k&&k.buffer instanceof ArrayBuffer},E=_.BigInt||Number;E("0x1"),E("0x100"),E("0x10000"),E("0x1000000"),E("0x100000000"),E("0x10000000000"),E("0x1000000000000"),E("0x100000000000000"),E("0x10000000000000000");var D=function(k){var P={};return Object.keys(k).forEach(function(N){var U=k[N];C(U)?P[N]={bytes:U.buffer,byteOffset:U.byteOffset,byteLength:U.byteLength}:P[N]=U}),P};self.onmessage=function(I){var k=I.data,P=new Uint8Array(k.encrypted.bytes,k.encrypted.byteOffset,k.encrypted.byteLength),N=new Uint32Array(k.key.bytes,k.key.byteOffset,k.key.byteLength/4),U=new Uint32Array(k.iv.bytes,k.iv.byteOffset,k.iv.byteLength/4);new v(P,N,U,function(B,A){self.postMessage(D({source:k.source,decrypted:A}),[A.buffer])})}})),hbe=l9(dbe),fbe=function(e){var t=e.default?"main":"alternative";return e.characteristics&&e.characteristics.indexOf("public.accessibility.describes-video")>=0&&(t="main-desc"),t},Ob=function(e,t){e.abort(),e.pause(),t&&t.activePlaylistLoader&&(t.activePlaylistLoader.pause(),t.activePlaylistLoader=null)},SE=function(e,t){t.activePlaylistLoader=e,e.load()},pbe=function(e,t){return function(){var n=t.segmentLoaders,i=n[e],s=n.main,a=t.mediaTypes[e],o=a.activeTrack(),l=a.getActiveGroup(),u=a.activePlaylistLoader,c=a.lastGroup_;if(!(l&&c&&l.id===c.id)&&(a.lastGroup_=l,a.lastTrack_=o,Ob(i,a),!(!l||l.isMasterPlaylist))){if(!l.playlistLoader){u&&s.resetEverything();return}i.resyncLoader(),SE(l.playlistLoader,a)}}},mbe=function(e,t){return function(){var n=t.segmentLoaders[e],i=t.mediaTypes[e];i.lastGroup_=null,n.abort(),n.pause()}},gbe=function(e,t){return function(){var n=t.masterPlaylistLoader,i=t.segmentLoaders,s=i[e],a=i.main,o=t.mediaTypes[e],l=o.activeTrack(),u=o.getActiveGroup(),c=o.activePlaylistLoader,h=o.lastTrack_;if(!(h&&l&&h.id===l.id)&&(o.lastGroup_=u,o.lastTrack_=l,Ob(s,o),!!u)){if(u.isMasterPlaylist){if(!l||!h||l.id===h.id)return;var f=t.vhs.masterPlaylistController_,g=f.selectPlaylist();if(f.media()===g)return;o.logger_("track change. Switching master audio from "+h.id+" to "+l.id),n.pause(),a.resetEverything(),f.fastQualityChange_(g);return}if(e==="AUDIO"){if(!u.playlistLoader){a.setAudio(!0),a.resetEverything();return}s.setAudio(!0),a.setAudio(!1)}if(c===u.playlistLoader){SE(u.playlistLoader,o);return}s.track&&s.track(l),s.resetEverything(),SE(u.playlistLoader,o)}}},Mb={AUDIO:function(e,t){return function(){var n=t.segmentLoaders[e],i=t.mediaTypes[e],s=t.blacklistCurrentPlaylist;Ob(n,i);var a=i.activeTrack(),o=i.activeGroup(),l=(o.filter(function(h){return h.default})[0]||o[0]).id,u=i.tracks[l];if(a===u){s({message:"Problem encountered loading the default audio track."});return}Me.log.warn("Problem encountered loading the alternate audio track.Switching back to default.");for(var c in i.tracks)i.tracks[c].enabled=i.tracks[c]===u;i.onTrackChanged()}},SUBTITLES:function(e,t){return function(){var n=t.segmentLoaders[e],i=t.mediaTypes[e];Me.log.warn("Problem encountered loading the subtitle track.Disabling subtitle track."),Ob(n,i);var s=i.activeTrack();s&&(s.mode="disabled"),i.onTrackChanged()}}},yF={AUDIO:function(e,t,n){if(t){var i=n.tech,s=n.requestOptions,a=n.segmentLoaders[e];t.on("loadedmetadata",function(){var o=t.media();a.playlist(o,s),(!i.paused()||o.endList&&i.preload()!=="none")&&a.load()}),t.on("loadedplaylist",function(){a.playlist(t.media(),s),i.paused()||a.load()}),t.on("error",Mb[e](e,n))}},SUBTITLES:function(e,t,n){var i=n.tech,s=n.requestOptions,a=n.segmentLoaders[e],o=n.mediaTypes[e];t.on("loadedmetadata",function(){var l=t.media();a.playlist(l,s),a.track(o.activeTrack()),(!i.paused()||l.endList&&i.preload()!=="none")&&a.load()}),t.on("loadedplaylist",function(){a.playlist(t.media(),s),i.paused()||a.load()}),t.on("error",Mb[e](e,n))}},vbe={AUDIO:function(e,t){var n=t.vhs,i=t.sourceType,s=t.segmentLoaders[e],a=t.requestOptions,o=t.master.mediaGroups,l=t.mediaTypes[e],u=l.groups,c=l.tracks,h=l.logger_,f=t.masterPlaylistLoader,g=Dv(f.master);(!o[e]||Object.keys(o[e]).length===0)&&(o[e]={main:{default:{default:!0}}},g&&(o[e].main.default.playlists=f.master.playlists));for(var v in o[e]){u[v]||(u[v]=[]);for(var y in o[e][v]){var _=o[e][v][y],C=void 0;if(g?(h("AUDIO group '"+v+"' label '"+y+"' is a master playlist"),_.isMasterPlaylist=!0,C=null):i==="vhs-json"&&_.playlists?C=new yp(_.playlists[0],n,a):_.resolvedUri?C=new yp(_.resolvedUri,n,a):_.playlists&&i==="dash"?C=new yE(_.playlists[0],n,a,f):C=null,_=Me.mergeOptions({id:y,playlistLoader:C},_),yF[e](e,_.playlistLoader,t),u[v].push(_),typeof c[y]>"u"){var E=new Me.AudioTrack({id:y,kind:fbe(_),enabled:!1,language:_.language,default:_.default,label:y});c[y]=E}}}s.on("error",Mb[e](e,t))},SUBTITLES:function(e,t){var n=t.tech,i=t.vhs,s=t.sourceType,a=t.segmentLoaders[e],o=t.requestOptions,l=t.master.mediaGroups,u=t.mediaTypes[e],c=u.groups,h=u.tracks,f=t.masterPlaylistLoader;for(var g in l[e]){c[g]||(c[g]=[]);for(var v in l[e][g])if(!l[e][g][v].forced){var y=l[e][g][v],_=void 0;if(s==="hls")_=new yp(y.resolvedUri,i,o);else if(s==="dash"){var C=y.playlists.filter(function(D){return D.excludeUntil!==1/0});if(!C.length)return;_=new yE(y.playlists[0],i,o,f)}else s==="vhs-json"&&(_=new yp(y.playlists?y.playlists[0]:y.resolvedUri,i,o));if(y=Me.mergeOptions({id:v,playlistLoader:_},y),yF[e](e,y.playlistLoader,t),c[g].push(y),typeof h[v]>"u"){var E=n.addRemoteTextTrack({id:v,kind:"subtitles",default:y.default&&y.autoselect,language:y.language,label:v},!1).track;h[v]=E}}}a.on("error",Mb[e](e,t))},"CLOSED-CAPTIONS":function(e,t){var n=t.tech,i=t.master.mediaGroups,s=t.mediaTypes[e],a=s.groups,o=s.tracks;for(var l in i[e]){a[l]||(a[l]=[]);for(var u in i[e][l]){var c=i[e][l][u];if(/^(?:CC|SERVICE)/.test(c.instreamId)){var h=n.options_.vhs&&n.options_.vhs.captionServices||{},f={label:u,language:c.language,instreamId:c.instreamId,default:c.default&&c.autoselect};if(h[f.instreamId]&&(f=Me.mergeOptions(f,h[f.instreamId])),f.default===void 0&&delete f.default,a[l].push(Me.mergeOptions({id:u},c)),typeof o[u]>"u"){var g=n.addRemoteTextTrack({id:f.instreamId,kind:"captions",default:f.default,language:f.language,label:f.label},!1).track;o[u]=g}}}}}},ybe=function r(e,t){for(var n=0;n<e.length;n++)if(pD(t,e[n])||e[n].playlists&&r(e[n].playlists,t))return!0;return!1},xbe=function(e,t){return function(n){var i=t.masterPlaylistLoader,s=t.mediaTypes[e].groups,a=i.media();if(!a)return null;var o=null;a.attributes[e]&&(o=s[a.attributes[e]]);var l=Object.keys(s);if(!o)if(e==="AUDIO"&&l.length>1&&Dv(t.master))for(var u=0;u<l.length;u++){var c=s[l[u]];if(ybe(c,a)){o=c;break}}else s.main?o=s.main:l.length===1&&(o=s[l[0]]);return typeof n>"u"?o:n===null||!o?null:o.filter(function(h){return h.id===n.id})[0]||null}},_be={AUDIO:function(e,t){return function(){var n=t.mediaTypes[e].tracks;for(var i in n)if(n[i].enabled)return n[i];return null}},SUBTITLES:function(e,t){return function(){var n=t.mediaTypes[e].tracks;for(var i in n)if(n[i].mode==="showing"||n[i].mode==="hidden")return n[i];return null}}},bbe=function(e,t){var n=t.mediaTypes;return function(){var i=n[e].activeTrack();return i?n[e].activeGroup(i):null}},Sbe=function(e){["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(function(v){vbe[v](v,e)});var t=e.mediaTypes,n=e.masterPlaylistLoader,i=e.tech,s=e.vhs,a=e.segmentLoaders,o=a.AUDIO,l=a.main;["AUDIO","SUBTITLES"].forEach(function(v){t[v].activeGroup=xbe(v,e),t[v].activeTrack=_be[v](v,e),t[v].onGroupChanged=pbe(v,e),t[v].onGroupChanging=mbe(v,e),t[v].onTrackChanged=gbe(v,e),t[v].getActiveGroup=bbe(v,e)});var u=t.AUDIO.activeGroup();if(u){var c=(u.filter(function(v){return v.default})[0]||u[0]).id;t.AUDIO.tracks[c].enabled=!0,t.AUDIO.onGroupChanged(),t.AUDIO.onTrackChanged();var h=t.AUDIO.getActiveGroup();h.playlistLoader?(l.setAudio(!1),o.setAudio(!0)):l.setAudio(!0)}n.on("mediachange",function(){["AUDIO","SUBTITLES"].forEach(function(v){return t[v].onGroupChanged()})}),n.on("mediachanging",function(){["AUDIO","SUBTITLES"].forEach(function(v){return t[v].onGroupChanging()})});var f=function(){t.AUDIO.onTrackChanged(),i.trigger({type:"usage",name:"vhs-audio-change"}),i.trigger({type:"usage",name:"hls-audio-change"})};i.audioTracks().addEventListener("change",f),i.remoteTextTracks().addEventListener("change",t.SUBTITLES.onTrackChanged),s.on("dispose",function(){i.audioTracks().removeEventListener("change",f),i.remoteTextTracks().removeEventListener("change",t.SUBTITLES.onTrackChanged)}),i.clearTracks("audio");for(var g in t.AUDIO.tracks)i.audioTracks().addTrack(t.AUDIO.tracks[g])},Tbe=function(){var e={};return["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(function(t){e[t]={groups:{},tracks:{},activePlaylistLoader:null,activeGroup:Dc,activeTrack:Dc,getActiveGroup:Dc,onGroupChanged:Dc,onTrackChanged:Dc,lastTrack_:null,logger_:zl("MediaGroups["+t+"]")}}),e},Cbe=120,Sc,wbe=["mediaRequests","mediaRequestsAborted","mediaRequestsTimedout","mediaRequestsErrored","mediaTransferDuration","mediaBytesTransferred","mediaAppends"],Ebe=function(e){return this.audioSegmentLoader_[e]+this.mainSegmentLoader_[e]},kbe=function(e){var t=e.currentPlaylist,n=e.buffered,i=e.currentTime,s=e.nextPlaylist,a=e.bufferLowWaterLine,o=e.bufferHighWaterLine,l=e.duration,u=e.experimentalBufferBasedABR,c=e.log;if(!s)return Me.log.warn("We received no playlist to switch to. Please check your stream."),!1;var h="allowing switch "+(t&&t.id||"null")+" -> "+s.id;if(!t)return c(h+" as current playlist is not set"),!0;if(s.id===t.id)return!1;var f=!!vp(n,i).length;if(!t.endList)return!f&&typeof t.partTargetDuration=="number"?(c("not "+h+" as current playlist is live llhls, but currentTime isn't in buffered."),!1):(c(h+" as current playlist is live"),!0);var g=dD(n,i),v=u?es.EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE:es.MAX_BUFFER_LOW_WATER_LINE;if(l<v)return c(h+" as duration < max low water line ("+l+" < "+v+")"),!0;var y=s.attributes.BANDWIDTH,_=t.attributes.BANDWIDTH;if(y<_&&(!u||g<o)){var C=h+" as next bandwidth < current bandwidth ("+y+" < "+_+")";return u&&(C+=" and forwardBuffer < bufferHighWaterLine ("+g+" < "+o+")"),c(C),!0}if((!u||y>_)&&g>=a){var E=h+" as forwardBuffer >= bufferLowWaterLine ("+g+" >= "+a+")";return u&&(E+=" and next bandwidth > current bandwidth ("+y+" > "+_+")"),c(E),!0}return c("not "+h+" as no switching criteria met"),!1},Abe=(function(r){Ht(e,r);function e(n){var i;i=r.call(this)||this;var s=n.src,a=n.handleManifestRedirects,o=n.withCredentials,l=n.tech,u=n.bandwidth,c=n.externVhs,h=n.useCueTags,f=n.blacklistDuration,g=n.enableLowInitialPlaylist,v=n.sourceType,y=n.cacheEncryptionKeys,_=n.experimentalBufferBasedABR,C=n.experimentalLeastPixelDiffSelector,E=n.captionServices;if(!s)throw new Error("A non-empty playlist URL or JSON manifest string is required");var D=n.maxPlaylistRetries;(D===null||typeof D>"u")&&(D=1/0),Sc=c,i.experimentalBufferBasedABR=!!_,i.experimentalLeastPixelDiffSelector=!!C,i.withCredentials=o,i.tech_=l,i.vhs_=l.vhs,i.sourceType_=v,i.useCueTags_=h,i.blacklistDuration=f,i.maxPlaylistRetries=D,i.enableLowInitialPlaylist=g,i.useCueTags_&&(i.cueTagsTrack_=i.tech_.addTextTrack("metadata","ad-cues"),i.cueTagsTrack_.inBandMetadataTrackDispatchType=""),i.requestOptions_={withCredentials:o,handleManifestRedirects:a,maxPlaylistRetries:D,timeout:null},i.on("error",i.pauseLoading),i.mediaTypes_=Tbe(),i.mediaSource=new X.MediaSource,i.handleDurationChange_=i.handleDurationChange_.bind(We(i)),i.handleSourceOpen_=i.handleSourceOpen_.bind(We(i)),i.handleSourceEnded_=i.handleSourceEnded_.bind(We(i)),i.mediaSource.addEventListener("durationchange",i.handleDurationChange_),i.mediaSource.addEventListener("sourceopen",i.handleSourceOpen_),i.mediaSource.addEventListener("sourceended",i.handleSourceEnded_),i.seekable_=Me.createTimeRanges(),i.hasPlayed_=!1,i.syncController_=new ube(n),i.segmentMetadataTrack_=l.addRemoteTextTrack({kind:"metadata",label:"segment-metadata"},!1).track,i.decrypter_=new hbe,i.sourceUpdater_=new T9(i.mediaSource),i.inbandTextTracks_={},i.timelineChangeController_=new cbe;var I={vhs:i.vhs_,parse708captions:n.parse708captions,useDtsForTimestampOffset:n.useDtsForTimestampOffset,captionServices:E,mediaSource:i.mediaSource,currentTime:i.tech_.currentTime.bind(i.tech_),seekable:function(){return i.seekable()},seeking:function(){return i.tech_.seeking()},duration:function(){return i.duration()},hasPlayed:function(){return i.hasPlayed_},goalBufferLength:function(){return i.goalBufferLength()},bandwidth:u,syncController:i.syncController_,decrypter:i.decrypter_,sourceType:i.sourceType_,inbandTextTracks:i.inbandTextTracks_,cacheEncryptionKeys:y,sourceUpdater:i.sourceUpdater_,timelineChangeController:i.timelineChangeController_,experimentalExactManifestTimings:n.experimentalExactManifestTimings};i.masterPlaylistLoader_=i.sourceType_==="dash"?new yE(s,i.vhs_,i.requestOptions_):new yp(s,i.vhs_,i.requestOptions_),i.setupMasterPlaylistLoaderListeners_(),i.mainSegmentLoader_=new _E(Me.mergeOptions(I,{segmentMetadataTrack:i.segmentMetadataTrack_,loaderType:"main"}),n),i.audioSegmentLoader_=new _E(Me.mergeOptions(I,{loaderType:"audio"}),n),i.subtitleSegmentLoader_=new sbe(Me.mergeOptions(I,{loaderType:"vtt",featuresNativeTextTracks:i.tech_.featuresNativeTextTracks,loadVttJs:function(){return new Promise(function(N,U){function B(){l.off("vttjserror",A),N()}function A(){l.off("vttjsloaded",B),U()}l.one("vttjsloaded",B),l.one("vttjserror",A),l.addWebVttScript_()})}}),n),i.setupSegmentLoaderListeners_(),i.experimentalBufferBasedABR&&(i.masterPlaylistLoader_.one("loadedplaylist",function(){return i.startABRTimer_()}),i.tech_.on("pause",function(){return i.stopABRTimer_()}),i.tech_.on("play",function(){return i.startABRTimer_()})),wbe.forEach(function(P){i[P+"_"]=Ebe.bind(We(i),P)}),i.logger_=zl("MPC"),i.triggeredFmp4Usage=!1,i.tech_.preload()==="none"?(i.loadOnPlay_=function(){i.loadOnPlay_=null,i.masterPlaylistLoader_.load()},i.tech_.one("play",i.loadOnPlay_)):i.masterPlaylistLoader_.load(),i.timeToLoadedData__=-1,i.mainAppendsToLoadedData__=-1,i.audioAppendsToLoadedData__=-1;var k=i.tech_.preload()==="none"?"play":"loadstart";return i.tech_.one(k,function(){var P=Date.now();i.tech_.one("loadeddata",function(){i.timeToLoadedData__=Date.now()-P,i.mainAppendsToLoadedData__=i.mainSegmentLoader_.mediaAppends,i.audioAppendsToLoadedData__=i.audioSegmentLoader_.mediaAppends})}),i}var t=e.prototype;return t.mainAppendsToLoadedData_=function(){return this.mainAppendsToLoadedData__},t.audioAppendsToLoadedData_=function(){return this.audioAppendsToLoadedData__},t.appendsToLoadedData_=function(){var i=this.mainAppendsToLoadedData_(),s=this.audioAppendsToLoadedData_();return i===-1||s===-1?-1:i+s},t.timeToLoadedData_=function(){return this.timeToLoadedData__},t.checkABR_=function(i){i===void 0&&(i="abr");var s=this.selectPlaylist();s&&this.shouldSwitchToMedia_(s)&&this.switchMedia_(s,i)},t.switchMedia_=function(i,s,a){var o=this.media(),l=o&&(o.id||o.uri),u=i.id||i.uri;l&&l!==u&&(this.logger_("switch media "+l+" -> "+u+" from "+s),this.tech_.trigger({type:"usage",name:"vhs-rendition-change-"+s})),this.masterPlaylistLoader_.media(i,a)},t.startABRTimer_=function(){var i=this;this.stopABRTimer_(),this.abrTimer_=X.setInterval(function(){return i.checkABR_()},250)},t.stopABRTimer_=function(){this.tech_.scrubbing&&this.tech_.scrubbing()||(X.clearInterval(this.abrTimer_),this.abrTimer_=null)},t.getAudioTrackPlaylists_=function(){var i=this.master(),s=i&&i.playlists||[];if(!i||!i.mediaGroups||!i.mediaGroups.AUDIO)return s;var a=i.mediaGroups.AUDIO,o=Object.keys(a),l;if(Object.keys(this.mediaTypes_.AUDIO.groups).length)l=this.mediaTypes_.AUDIO.activeTrack();else{var u=a.main||o.length&&a[o[0]];for(var c in u)if(u[c].default){l={label:c};break}}if(!l)return s;var h=[];for(var f in a)if(a[f][l.label]){var g=a[f][l.label];if(g.playlists&&g.playlists.length)h.push.apply(h,g.playlists);else if(g.uri)h.push(g);else if(i.playlists.length)for(var v=0;v<i.playlists.length;v++){var y=i.playlists[v];y.attributes&&y.attributes.AUDIO&&y.attributes.AUDIO===f&&h.push(y)}}return h.length?h:s},t.setupMasterPlaylistLoaderListeners_=function(){var i=this;this.masterPlaylistLoader_.on("loadedmetadata",function(){var s=i.masterPlaylistLoader_.media(),a=s.targetDuration*1.5*1e3;fE(i.masterPlaylistLoader_.master,i.masterPlaylistLoader_.media())?i.requestOptions_.timeout=0:i.requestOptions_.timeout=a,s.endList&&i.tech_.preload()!=="none"&&(i.mainSegmentLoader_.playlist(s,i.requestOptions_),i.mainSegmentLoader_.load()),Sbe({sourceType:i.sourceType_,segmentLoaders:{AUDIO:i.audioSegmentLoader_,SUBTITLES:i.subtitleSegmentLoader_,main:i.mainSegmentLoader_},tech:i.tech_,requestOptions:i.requestOptions_,masterPlaylistLoader:i.masterPlaylistLoader_,vhs:i.vhs_,master:i.master(),mediaTypes:i.mediaTypes_,blacklistCurrentPlaylist:i.blacklistCurrentPlaylist.bind(i)}),i.triggerPresenceUsage_(i.master(),s),i.setupFirstPlay(),!i.mediaTypes_.AUDIO.activePlaylistLoader||i.mediaTypes_.AUDIO.activePlaylistLoader.media()?i.trigger("selectedinitialmedia"):i.mediaTypes_.AUDIO.activePlaylistLoader.one("loadedmetadata",function(){i.trigger("selectedinitialmedia")})}),this.masterPlaylistLoader_.on("loadedplaylist",function(){i.loadOnPlay_&&i.tech_.off("play",i.loadOnPlay_);var s=i.masterPlaylistLoader_.media();if(!s){i.excludeUnsupportedVariants_();var a;if(i.enableLowInitialPlaylist&&(a=i.selectInitialPlaylist()),a||(a=i.selectPlaylist()),!a||!i.shouldSwitchToMedia_(a))return;i.initialMedia_=a,i.switchMedia_(i.initialMedia_,"initial");var o=i.sourceType_==="vhs-json"&&i.initialMedia_.segments;if(!o)return;s=i.initialMedia_}i.handleUpdatedMediaPlaylist(s)}),this.masterPlaylistLoader_.on("error",function(){i.blacklistCurrentPlaylist(i.masterPlaylistLoader_.error)}),this.masterPlaylistLoader_.on("mediachanging",function(){i.mainSegmentLoader_.abort(),i.mainSegmentLoader_.pause()}),this.masterPlaylistLoader_.on("mediachange",function(){var s=i.masterPlaylistLoader_.media(),a=s.targetDuration*1.5*1e3;fE(i.masterPlaylistLoader_.master,i.masterPlaylistLoader_.media())?i.requestOptions_.timeout=0:i.requestOptions_.timeout=a,i.masterPlaylistLoader_.load(),i.mainSegmentLoader_.playlist(s,i.requestOptions_),i.mainSegmentLoader_.load(),i.tech_.trigger({type:"mediachange",bubbles:!0})}),this.masterPlaylistLoader_.on("playlistunchanged",function(){var s=i.masterPlaylistLoader_.media();if(s.lastExcludeReason_!=="playlist-unchanged"){var a=i.stuckAtPlaylistEnd_(s);a&&(i.blacklistCurrentPlaylist({message:"Playlist no longer updating.",reason:"playlist-unchanged"}),i.tech_.trigger("playliststuck"))}}),this.masterPlaylistLoader_.on("renditiondisabled",function(){i.tech_.trigger({type:"usage",name:"vhs-rendition-disabled"}),i.tech_.trigger({type:"usage",name:"hls-rendition-disabled"})}),this.masterPlaylistLoader_.on("renditionenabled",function(){i.tech_.trigger({type:"usage",name:"vhs-rendition-enabled"}),i.tech_.trigger({type:"usage",name:"hls-rendition-enabled"})})},t.handleUpdatedMediaPlaylist=function(i){this.useCueTags_&&this.updateAdCues_(i),this.mainSegmentLoader_.playlist(i,this.requestOptions_),this.updateDuration(!i.endList),this.tech_.paused()||(this.mainSegmentLoader_.load(),this.audioSegmentLoader_&&this.audioSegmentLoader_.load())},t.triggerPresenceUsage_=function(i,s){var a=i.mediaGroups||{},o=!0,l=Object.keys(a.AUDIO);for(var u in a.AUDIO)for(var c in a.AUDIO[u]){var h=a.AUDIO[u][c];h.uri||(o=!1)}o&&(this.tech_.trigger({type:"usage",name:"vhs-demuxed"}),this.tech_.trigger({type:"usage",name:"hls-demuxed"})),Object.keys(a.SUBTITLES).length&&(this.tech_.trigger({type:"usage",name:"vhs-webvtt"}),this.tech_.trigger({type:"usage",name:"hls-webvtt"})),Sc.Playlist.isAes(s)&&(this.tech_.trigger({type:"usage",name:"vhs-aes"}),this.tech_.trigger({type:"usage",name:"hls-aes"})),l.length&&Object.keys(a.AUDIO[l[0]]).length>1&&(this.tech_.trigger({type:"usage",name:"vhs-alternate-audio"}),this.tech_.trigger({type:"usage",name:"hls-alternate-audio"})),this.useCueTags_&&(this.tech_.trigger({type:"usage",name:"vhs-playlist-cue-tags"}),this.tech_.trigger({type:"usage",name:"hls-playlist-cue-tags"}))},t.shouldSwitchToMedia_=function(i){var s=this.masterPlaylistLoader_.media()||this.masterPlaylistLoader_.pendingMedia_,a=this.tech_.currentTime(),o=this.bufferLowWaterLine(),l=this.bufferHighWaterLine(),u=this.tech_.buffered();return kbe({buffered:u,currentTime:a,currentPlaylist:s,nextPlaylist:i,bufferLowWaterLine:o,bufferHighWaterLine:l,duration:this.duration(),experimentalBufferBasedABR:this.experimentalBufferBasedABR,log:this.logger_})},t.setupSegmentLoaderListeners_=function(){var i=this;this.mainSegmentLoader_.on("bandwidthupdate",function(){i.checkABR_("bandwidthupdate"),i.tech_.trigger("bandwidthupdate")}),this.mainSegmentLoader_.on("timeout",function(){i.experimentalBufferBasedABR&&i.mainSegmentLoader_.load()}),this.experimentalBufferBasedABR||this.mainSegmentLoader_.on("progress",function(){i.trigger("progress")}),this.mainSegmentLoader_.on("error",function(){i.blacklistCurrentPlaylist(i.mainSegmentLoader_.error())}),this.mainSegmentLoader_.on("appenderror",function(){i.error=i.mainSegmentLoader_.error_,i.trigger("error")}),this.mainSegmentLoader_.on("syncinfoupdate",function(){i.onSyncInfoUpdate_()}),this.mainSegmentLoader_.on("timestampoffset",function(){i.tech_.trigger({type:"usage",name:"vhs-timestamp-offset"}),i.tech_.trigger({type:"usage",name:"hls-timestamp-offset"})}),this.audioSegmentLoader_.on("syncinfoupdate",function(){i.onSyncInfoUpdate_()}),this.audioSegmentLoader_.on("appenderror",function(){i.error=i.audioSegmentLoader_.error_,i.trigger("error")}),this.mainSegmentLoader_.on("ended",function(){i.logger_("main segment loader ended"),i.onEndOfStream()}),this.mainSegmentLoader_.on("earlyabort",function(a){i.experimentalBufferBasedABR||(i.delegateLoaders_("all",["abort"]),i.blacklistCurrentPlaylist({message:"Aborted early because there isn't enough bandwidth to complete the request without rebuffering."},Cbe))});var s=function(){if(!i.sourceUpdater_.hasCreatedSourceBuffers())return i.tryToCreateSourceBuffers_();var o=i.getCodecsOrExclude_();o&&i.sourceUpdater_.addOrChangeSourceBuffers(o)};this.mainSegmentLoader_.on("trackinfo",s),this.audioSegmentLoader_.on("trackinfo",s),this.mainSegmentLoader_.on("fmp4",function(){i.triggeredFmp4Usage||(i.tech_.trigger({type:"usage",name:"vhs-fmp4"}),i.tech_.trigger({type:"usage",name:"hls-fmp4"}),i.triggeredFmp4Usage=!0)}),this.audioSegmentLoader_.on("fmp4",function(){i.triggeredFmp4Usage||(i.tech_.trigger({type:"usage",name:"vhs-fmp4"}),i.tech_.trigger({type:"usage",name:"hls-fmp4"}),i.triggeredFmp4Usage=!0)}),this.audioSegmentLoader_.on("ended",function(){i.logger_("audioSegmentLoader ended"),i.onEndOfStream()})},t.mediaSecondsLoaded_=function(){return Math.max(this.audioSegmentLoader_.mediaSecondsLoaded+this.mainSegmentLoader_.mediaSecondsLoaded)},t.load=function(){this.mainSegmentLoader_.load(),this.mediaTypes_.AUDIO.activePlaylistLoader&&this.audioSegmentLoader_.load(),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&this.subtitleSegmentLoader_.load()},t.smoothQualityChange_=function(i){i===void 0&&(i=this.selectPlaylist()),this.fastQualityChange_(i)},t.fastQualityChange_=function(i){var s=this;if(i===void 0&&(i=this.selectPlaylist()),i===this.masterPlaylistLoader_.media()){this.logger_("skipping fastQualityChange because new media is same as old");return}this.switchMedia_(i,"fast-quality"),this.mainSegmentLoader_.resetEverything(function(){Me.browser.IE_VERSION||Me.browser.IS_EDGE?s.tech_.setCurrentTime(s.tech_.currentTime()+.04):s.tech_.setCurrentTime(s.tech_.currentTime())})},t.play=function(){if(!this.setupFirstPlay()){this.tech_.ended()&&this.tech_.setCurrentTime(0),this.hasPlayed_&&this.load();var i=this.tech_.seekable();if(this.tech_.duration()===1/0&&this.tech_.currentTime()<i.start(0))return this.tech_.setCurrentTime(i.end(i.length-1))}},t.setupFirstPlay=function(){var i=this,s=this.masterPlaylistLoader_.media();if(!s||this.tech_.paused()||this.hasPlayed_)return!1;if(!s.endList){var a=this.seekable();if(!a.length)return!1;if(Me.browser.IE_VERSION&&this.tech_.readyState()===0)return this.tech_.one("loadedmetadata",function(){i.trigger("firstplay"),i.tech_.setCurrentTime(a.end(0)),i.hasPlayed_=!0}),!1;this.trigger("firstplay"),this.tech_.setCurrentTime(a.end(0))}return this.hasPlayed_=!0,this.load(),!0},t.handleSourceOpen_=function(){if(this.tryToCreateSourceBuffers_(),this.tech_.autoplay()){var i=this.tech_.play();typeof i<"u"&&typeof i.then=="function"&&i.then(null,function(s){})}this.trigger("sourceopen")},t.handleSourceEnded_=function(){if(this.inbandTextTracks_.metadataTrack_){var i=this.inbandTextTracks_.metadataTrack_.cues;if(!(!i||!i.length)){var s=this.duration();i[i.length-1].endTime=isNaN(s)||Math.abs(s)===1/0?Number.MAX_VALUE:s}}},t.handleDurationChange_=function(){this.tech_.trigger("durationchange")},t.onEndOfStream=function(){var i=this.mainSegmentLoader_.ended_;if(this.mediaTypes_.AUDIO.activePlaylistLoader){var s=this.mainSegmentLoader_.getCurrentMediaInfo_();!s||s.hasVideo?i=i&&this.audioSegmentLoader_.ended_:i=this.audioSegmentLoader_.ended_}i&&(this.stopABRTimer_(),this.sourceUpdater_.endOfStream())},t.stuckAtPlaylistEnd_=function(i){var s=this.seekable();if(!s.length)return!1;var a=this.syncController_.getExpiredTime(i,this.duration());if(a===null)return!1;var o=Sc.Playlist.playlistEnd(i,a),l=this.tech_.currentTime(),u=this.tech_.buffered();if(!u.length)return o-l<=ku;var c=u.end(u.length-1);return c-l<=ku&&o-c<=ku},t.blacklistCurrentPlaylist=function(i,s){i===void 0&&(i={});var a=i.playlist||this.masterPlaylistLoader_.media();if(s=s||i.blacklistDuration||this.blacklistDuration,!a){this.error=i,this.mediaSource.readyState!=="open"?this.trigger("error"):this.sourceUpdater_.endOfStream("network");return}a.playlistErrors_++;var o=this.masterPlaylistLoader_.master.playlists,l=o.filter(aT),u=l.length===1&&l[0]===a;if(o.length===1&&s!==1/0)return Me.log.warn("Problem encountered with playlist "+a.id+". Trying again since it is the only playlist."),this.tech_.trigger("retryplaylist"),this.masterPlaylistLoader_.load(u);if(u){var c=!1;o.forEach(function(C){if(C!==a){var E=C.excludeUntil;typeof E<"u"&&E!==1/0&&(c=!0,delete C.excludeUntil)}}),c&&(Me.log.warn("Removing other playlists from the exclusion list because the last rendition is about to be excluded."),this.tech_.trigger("retryplaylist"))}var h;a.playlistErrors_>this.maxPlaylistRetries?h=1/0:h=Date.now()+s*1e3,a.excludeUntil=h,i.reason&&(a.lastExcludeReason_=i.reason),this.tech_.trigger("blacklistplaylist"),this.tech_.trigger({type:"usage",name:"vhs-rendition-blacklisted"}),this.tech_.trigger({type:"usage",name:"hls-rendition-blacklisted"});var f=this.selectPlaylist();if(!f){this.error="Playback cannot continue. No available working or supported playlists.",this.trigger("error");return}var g=i.internal?this.logger_:Me.log.warn,v=i.message?" "+i.message:"";g((i.internal?"Internal problem":"Problem")+" encountered with playlist "+a.id+"."+(v+" Switching to playlist "+f.id+".")),f.attributes.AUDIO!==a.attributes.AUDIO&&this.delegateLoaders_("audio",["abort","pause"]),f.attributes.SUBTITLES!==a.attributes.SUBTITLES&&this.delegateLoaders_("subtitle",["abort","pause"]),this.delegateLoaders_("main",["abort","pause"]);var y=f.targetDuration/2*1e3||5*1e3,_=typeof f.lastRequest=="number"&&Date.now()-f.lastRequest<=y;return this.switchMedia_(f,"exclude",u||_)},t.pauseLoading=function(){this.delegateLoaders_("all",["abort","pause"]),this.stopABRTimer_()},t.delegateLoaders_=function(i,s){var a=this,o=[],l=i==="all";(l||i==="main")&&o.push(this.masterPlaylistLoader_);var u=[];(l||i==="audio")&&u.push("AUDIO"),(l||i==="subtitle")&&(u.push("CLOSED-CAPTIONS"),u.push("SUBTITLES")),u.forEach(function(c){var h=a.mediaTypes_[c]&&a.mediaTypes_[c].activePlaylistLoader;h&&o.push(h)}),["main","audio","subtitle"].forEach(function(c){var h=a[c+"SegmentLoader_"];h&&(i===c||i==="all")&&o.push(h)}),o.forEach(function(c){return s.forEach(function(h){typeof c[h]=="function"&&c[h]()})})},t.setCurrentTime=function(i){var s=vp(this.tech_.buffered(),i);if(!(this.masterPlaylistLoader_&&this.masterPlaylistLoader_.media())||!this.masterPlaylistLoader_.media().segments)return 0;if(s&&s.length)return i;this.mainSegmentLoader_.resetEverything(),this.mainSegmentLoader_.abort(),this.mediaTypes_.AUDIO.activePlaylistLoader&&(this.audioSegmentLoader_.resetEverything(),this.audioSegmentLoader_.abort()),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&(this.subtitleSegmentLoader_.resetEverything(),this.subtitleSegmentLoader_.abort()),this.load()},t.duration=function(){if(!this.masterPlaylistLoader_)return 0;var i=this.masterPlaylistLoader_.media();return i?i.endList?this.mediaSource?this.mediaSource.duration:Sc.Playlist.duration(i):1/0:0},t.seekable=function(){return this.seekable_},t.onSyncInfoUpdate_=function(){var i;if(this.masterPlaylistLoader_){var s=this.masterPlaylistLoader_.media();if(s){var a=this.syncController_.getExpiredTime(s,this.duration());if(a!==null){var o=this.masterPlaylistLoader_.master,l=Sc.Playlist.seekable(s,a,Sc.Playlist.liveEdgeDelay(o,s));if(l.length!==0&&!(this.mediaTypes_.AUDIO.activePlaylistLoader&&(s=this.mediaTypes_.AUDIO.activePlaylistLoader.media(),a=this.syncController_.getExpiredTime(s,this.duration()),a===null||(i=Sc.Playlist.seekable(s,a,Sc.Playlist.liveEdgeDelay(o,s)),i.length===0)))){var u,c;this.seekable_&&this.seekable_.length&&(u=this.seekable_.end(0),c=this.seekable_.start(0)),i?i.start(0)>l.end(0)||l.start(0)>i.end(0)?this.seekable_=l:this.seekable_=Me.createTimeRanges([[i.start(0)>l.start(0)?i.start(0):l.start(0),i.end(0)<l.end(0)?i.end(0):l.end(0)]]):this.seekable_=l,!(this.seekable_&&this.seekable_.length&&this.seekable_.end(0)===u&&this.seekable_.start(0)===c)&&(this.logger_("seekable updated ["+$7(this.seekable_)+"]"),this.tech_.trigger("seekablechanged"))}}}}},t.updateDuration=function(i){if(this.updateDuration_&&(this.mediaSource.removeEventListener("sourceopen",this.updateDuration_),this.updateDuration_=null),this.mediaSource.readyState!=="open"){this.updateDuration_=this.updateDuration.bind(this,i),this.mediaSource.addEventListener("sourceopen",this.updateDuration_);return}if(i){var s=this.seekable();if(!s.length)return;(isNaN(this.mediaSource.duration)||this.mediaSource.duration<s.end(s.length-1))&&this.sourceUpdater_.setDuration(s.end(s.length-1));return}var a=this.tech_.buffered(),o=Sc.Playlist.duration(this.masterPlaylistLoader_.media());a.length>0&&(o=Math.max(o,a.end(a.length-1))),this.mediaSource.duration!==o&&this.sourceUpdater_.setDuration(o)},t.dispose=function(){var i=this;this.trigger("dispose"),this.decrypter_.terminate(),this.masterPlaylistLoader_.dispose(),this.mainSegmentLoader_.dispose(),this.loadOnPlay_&&this.tech_.off("play",this.loadOnPlay_),["AUDIO","SUBTITLES"].forEach(function(s){var a=i.mediaTypes_[s].groups;for(var o in a)a[o].forEach(function(l){l.playlistLoader&&l.playlistLoader.dispose()})}),this.audioSegmentLoader_.dispose(),this.subtitleSegmentLoader_.dispose(),this.sourceUpdater_.dispose(),this.timelineChangeController_.dispose(),this.stopABRTimer_(),this.updateDuration_&&this.mediaSource.removeEventListener("sourceopen",this.updateDuration_),this.mediaSource.removeEventListener("durationchange",this.handleDurationChange_),this.mediaSource.removeEventListener("sourceopen",this.handleSourceOpen_),this.mediaSource.removeEventListener("sourceended",this.handleSourceEnded_),this.off()},t.master=function(){return this.masterPlaylistLoader_.master},t.media=function(){return this.masterPlaylistLoader_.media()||this.initialMedia_},t.areMediaTypesKnown_=function(){var i=!!this.mediaTypes_.AUDIO.activePlaylistLoader,s=!!this.mainSegmentLoader_.getCurrentMediaInfo_(),a=i?!!this.audioSegmentLoader_.getCurrentMediaInfo_():!0;return!(!s||!a)},t.getCodecsOrExclude_=function(){var i=this,s={main:this.mainSegmentLoader_.getCurrentMediaInfo_()||{},audio:this.audioSegmentLoader_.getCurrentMediaInfo_()||{}},a=this.mainSegmentLoader_.getPendingSegmentPlaylist()||this.media();s.video=s.main;var o=mg(this.master(),a),l={},u=!!this.mediaTypes_.AUDIO.activePlaylistLoader;if(s.main.hasVideo&&(l.video=o.video||s.main.videoCodec||Cge),s.main.isMuxed&&(l.video+=","+(o.audio||s.main.audioCodec||f3)),(s.main.hasAudio&&!s.main.isMuxed||s.audio.hasAudio||u)&&(l.audio=o.audio||s.main.audioCodec||s.audio.audioCodec||f3,s.audio.isFmp4=s.main.hasAudio&&!s.main.isMuxed?s.main.isFmp4:s.audio.isFmp4),!l.audio&&!l.video){this.blacklistCurrentPlaylist({playlist:a,message:"Could not determine codecs for playlist.",blacklistDuration:1/0});return}var c=function(C,E){return C?d_(E):KC(E)},h={},f;if(["video","audio"].forEach(function(_){if(l.hasOwnProperty(_)&&!c(s[_].isFmp4,l[_])){var C=s[_].isFmp4?"browser":"muxer";h[C]=h[C]||[],h[C].push(l[_]),_==="audio"&&(f=C)}}),u&&f&&a.attributes.AUDIO){var g=a.attributes.AUDIO;this.master().playlists.forEach(function(_){var C=_.attributes&&_.attributes.AUDIO;C===g&&_!==a&&(_.excludeUntil=1/0)}),this.logger_("excluding audio group "+g+" as "+f+' does not support codec(s): "'+l.audio+'"')}if(Object.keys(h).length){var v=Object.keys(h).reduce(function(_,C){return _&&(_+=", "),_+=C+' does not support codec(s): "'+h[C].join(",")+'"',_},"")+".";this.blacklistCurrentPlaylist({playlist:a,internal:!0,message:v,blacklistDuration:1/0});return}if(this.sourceUpdater_.hasCreatedSourceBuffers()&&!this.sourceUpdater_.canChangeType()){var y=[];if(["video","audio"].forEach(function(_){var C=(hu(i.sourceUpdater_.codecs[_]||"")[0]||{}).type,E=(hu(l[_]||"")[0]||{}).type;C&&E&&C.toLowerCase()!==E.toLowerCase()&&y.push('"'+i.sourceUpdater_.codecs[_]+'" -> "'+l[_]+'"')}),y.length){this.blacklistCurrentPlaylist({playlist:a,message:"Codec switching not supported: "+y.join(", ")+".",blacklistDuration:1/0,internal:!0});return}}return l},t.tryToCreateSourceBuffers_=function(){if(!(this.mediaSource.readyState!=="open"||this.sourceUpdater_.hasCreatedSourceBuffers())&&this.areMediaTypesKnown_()){var i=this.getCodecsOrExclude_();if(i){this.sourceUpdater_.createSourceBuffers(i);var s=[i.video,i.audio].filter(Boolean).join(",");this.excludeIncompatibleVariants_(s)}}},t.excludeUnsupportedVariants_=function(){var i=this,s=this.master().playlists,a=[];Object.keys(s).forEach(function(o){var l=s[o];if(a.indexOf(l.id)===-1){a.push(l.id);var u=mg(i.master,l),c=[];u.audio&&!KC(u.audio)&&!d_(u.audio)&&c.push("audio codec "+u.audio),u.video&&!KC(u.video)&&!d_(u.video)&&c.push("video codec "+u.video),u.text&&u.text==="stpp.ttml.im1t"&&c.push("text codec "+u.text),c.length&&(l.excludeUntil=1/0,i.logger_("excluding "+l.id+" for unsupported: "+c.join(", ")))}})},t.excludeIncompatibleVariants_=function(i){var s=this,a=[],o=this.master().playlists,l=Rb(hu(i)),u=oF(l),c=l.video&&hu(l.video)[0]||null,h=l.audio&&hu(l.audio)[0]||null;Object.keys(o).forEach(function(f){var g=o[f];if(!(a.indexOf(g.id)!==-1||g.excludeUntil===1/0)){a.push(g.id);var v=[],y=mg(s.masterPlaylistLoader_.master,g),_=oF(y);if(!(!y.audio&&!y.video)){if(_!==u&&v.push('codec count "'+_+'" !== "'+u+'"'),!s.sourceUpdater_.canChangeType()){var C=y.video&&hu(y.video)[0]||null,E=y.audio&&hu(y.audio)[0]||null;C&&c&&C.type.toLowerCase()!==c.type.toLowerCase()&&v.push('video codec "'+C.type+'" !== "'+c.type+'"'),E&&h&&E.type.toLowerCase()!==h.type.toLowerCase()&&v.push('audio codec "'+E.type+'" !== "'+h.type+'"')}v.length&&(g.excludeUntil=1/0,s.logger_("blacklisting "+g.id+": "+v.join(" && ")))}}})},t.updateAdCues_=function(i){var s=0,a=this.seekable();a.length&&(s=a.start(0)),obe(i,this.cueTagsTrack_,s)},t.goalBufferLength=function(){var i=this.tech_.currentTime(),s=es.GOAL_BUFFER_LENGTH,a=es.GOAL_BUFFER_LENGTH_RATE,o=Math.max(s,es.MAX_GOAL_BUFFER_LENGTH);return Math.min(s+i*a,o)},t.bufferLowWaterLine=function(){var i=this.tech_.currentTime(),s=es.BUFFER_LOW_WATER_LINE,a=es.BUFFER_LOW_WATER_LINE_RATE,o=Math.max(s,es.MAX_BUFFER_LOW_WATER_LINE),l=Math.max(s,es.EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE);return Math.min(s+i*a,this.experimentalBufferBasedABR?l:o)},t.bufferHighWaterLine=function(){return es.BUFFER_HIGH_WATER_LINE},e})(Me.EventTarget),Dbe=function(e,t,n){return function(i){var s=e.master.playlists[t],a=fD(s),o=aT(s);return typeof i>"u"?o:(i?delete s.disabled:s.disabled=!0,i!==o&&!a&&(n(),i?e.trigger("renditionenabled"):e.trigger("renditiondisabled")),i)}},Ibe=function(e,t,n){var i=e.masterPlaylistController_,s=e.options_.smoothQualityChange,a=s?"smooth":"fast",o=i[a+"QualityChange_"].bind(i);if(t.attributes){var l=t.attributes.RESOLUTION;this.width=l&&l.width,this.height=l&&l.height,this.bandwidth=t.attributes.BANDWIDTH,this.frameRate=t.attributes["FRAME-RATE"]}this.codecs=mg(i.master(),t),this.playlist=t,this.id=n,this.enabled=Dbe(e.playlists,t.id,o)},Pbe=function(e){e.representations=function(){var t=e.masterPlaylistController_.master(),n=Dv(t)?e.masterPlaylistController_.getAudioTrackPlaylists_():t.playlists;return n?n.filter(function(i){return!fD(i)}).map(function(i,s){return new Ibe(e,i,i.id)}):[]}},xF=["seeking","seeked","pause","playing","error"],Rbe=(function(){function r(t){var n=this;this.masterPlaylistController_=t.masterPlaylistController,this.tech_=t.tech,this.seekable=t.seekable,this.allowSeeksWithinUnsafeLiveWindow=t.allowSeeksWithinUnsafeLiveWindow,this.liveRangeSafeTimeDelta=t.liveRangeSafeTimeDelta,this.media=t.media,this.consecutiveUpdates=0,this.lastRecordedTime=null,this.timer_=null,this.checkCurrentTimeTimeout_=null,this.logger_=zl("PlaybackWatcher"),this.logger_("initialize");var i=function(){return n.monitorCurrentTime_()},s=function(){return n.monitorCurrentTime_()},a=function(){return n.techWaiting_()},o=function(){return n.cancelTimer_()},l=this.masterPlaylistController_,u=["main","subtitle","audio"],c={};u.forEach(function(f){c[f]={reset:function(){return n.resetSegmentDownloads_(f)},updateend:function(){return n.checkSegmentDownloads_(f)}},l[f+"SegmentLoader_"].on("appendsdone",c[f].updateend),l[f+"SegmentLoader_"].on("playlistupdate",c[f].reset),n.tech_.on(["seeked","seeking"],c[f].reset)});var h=function(g){["main","audio"].forEach(function(v){l[v+"SegmentLoader_"][g]("appended",n.seekingAppendCheck_)})};this.seekingAppendCheck_=function(){n.fixesBadSeeks_()&&(n.consecutiveUpdates=0,n.lastRecordedTime=n.tech_.currentTime(),h("off"))},this.clearSeekingAppendCheck_=function(){return h("off")},this.watchForBadSeeking_=function(){n.clearSeekingAppendCheck_(),h("on")},this.tech_.on("seeked",this.clearSeekingAppendCheck_),this.tech_.on("seeking",this.watchForBadSeeking_),this.tech_.on("waiting",a),this.tech_.on(xF,o),this.tech_.on("canplay",s),this.tech_.one("play",i),this.dispose=function(){n.clearSeekingAppendCheck_(),n.logger_("dispose"),n.tech_.off("waiting",a),n.tech_.off(xF,o),n.tech_.off("canplay",s),n.tech_.off("play",i),n.tech_.off("seeking",n.watchForBadSeeking_),n.tech_.off("seeked",n.clearSeekingAppendCheck_),u.forEach(function(f){l[f+"SegmentLoader_"].off("appendsdone",c[f].updateend),l[f+"SegmentLoader_"].off("playlistupdate",c[f].reset),n.tech_.off(["seeked","seeking"],c[f].reset)}),n.checkCurrentTimeTimeout_&&X.clearTimeout(n.checkCurrentTimeTimeout_),n.cancelTimer_()}}var e=r.prototype;return e.monitorCurrentTime_=function(){this.checkCurrentTime_(),this.checkCurrentTimeTimeout_&&X.clearTimeout(this.checkCurrentTimeTimeout_),this.checkCurrentTimeTimeout_=X.setTimeout(this.monitorCurrentTime_.bind(this),250)},e.resetSegmentDownloads_=function(n){var i=this.masterPlaylistController_[n+"SegmentLoader_"];this[n+"StalledDownloads_"]>0&&this.logger_("resetting possible stalled download count for "+n+" loader"),this[n+"StalledDownloads_"]=0,this[n+"Buffered_"]=i.buffered_()},e.checkSegmentDownloads_=function(n){var i=this.masterPlaylistController_,s=i[n+"SegmentLoader_"],a=s.buffered_(),o=Txe(this[n+"Buffered_"],a);if(this[n+"Buffered_"]=a,o){this.resetSegmentDownloads_(n);return}this[n+"StalledDownloads_"]++,this.logger_("found #"+this[n+"StalledDownloads_"]+" "+n+" appends that did not increase buffer (possible stalled download)",{playlistId:s.playlist_&&s.playlist_.id,buffered:qh(a)}),!(this[n+"StalledDownloads_"]<10)&&(this.logger_(n+" loader stalled download exclusion"),this.resetSegmentDownloads_(n),this.tech_.trigger({type:"usage",name:"vhs-"+n+"-download-exclusion"}),n!=="subtitle"&&i.blacklistCurrentPlaylist({message:"Excessive "+n+" segment downloading detected."},1/0))},e.checkCurrentTime_=function(){if(!(this.tech_.paused()||this.tech_.seeking())){var n=this.tech_.currentTime(),i=this.tech_.buffered();if(this.lastRecordedTime===n&&(!i.length||n+ku>=i.end(i.length-1)))return this.techWaiting_();this.consecutiveUpdates>=5&&n===this.lastRecordedTime?(this.consecutiveUpdates++,this.waiting_()):n===this.lastRecordedTime?this.consecutiveUpdates++:(this.consecutiveUpdates=0,this.lastRecordedTime=n)}},e.cancelTimer_=function(){this.consecutiveUpdates=0,this.timer_&&(this.logger_("cancelTimer_"),clearTimeout(this.timer_)),this.timer_=null},e.fixesBadSeeks_=function(){var n=this.tech_.seeking();if(!n)return!1;var i=this.seekable(),s=this.tech_.currentTime(),a=this.afterSeekableWindow_(i,s,this.media(),this.allowSeeksWithinUnsafeLiveWindow),o;if(a){var l=i.end(i.length-1);o=l}if(this.beforeSeekableWindow_(i,s)){var u=i.start(0);o=u+(u===i.end(0)?0:ku)}if(typeof o<"u")return this.logger_("Trying to seek outside of seekable at time "+s+" with "+("seekable range "+$7(i)+". Seeking to ")+(o+".")),this.tech_.setCurrentTime(o),!0;for(var c=this.masterPlaylistController_.sourceUpdater_,h=this.tech_.buffered(),f=c.audioBuffer?c.audioBuffered():null,g=c.videoBuffer?c.videoBuffered():null,v=this.media(),y=v.partTargetDuration?v.partTargetDuration:(v.targetDuration-Xd)*2,_=[f,g],C=0;C<_.length;C++)if(_[C]){var E=dD(_[C],s);if(E<y)return!1}var D=nx(h,s);return D.length===0?!1:(o=D.start(0)+ku,this.logger_("Buffered region starts ("+D.start(0)+") "+(" just beyond seek point ("+s+"). Seeking to "+o+".")),this.tech_.setCurrentTime(o),!0)},e.waiting_=function(){if(!this.techWaiting_()){var n=this.tech_.currentTime(),i=this.tech_.buffered(),s=vp(i,n);if(s.length&&n+3<=s.end(0)){this.cancelTimer_(),this.tech_.setCurrentTime(n),this.logger_("Stopped at "+n+" while inside a buffered region "+("["+s.start(0)+" -> "+s.end(0)+"]. Attempting to resume ")+"playback by seeking to the current time."),this.tech_.trigger({type:"usage",name:"vhs-unknown-waiting"}),this.tech_.trigger({type:"usage",name:"hls-unknown-waiting"});return}}},e.techWaiting_=function(){var n=this.seekable(),i=this.tech_.currentTime();if(this.tech_.seeking()||this.timer_!==null)return!0;if(this.beforeSeekableWindow_(n,i)){var s=n.end(n.length-1);return this.logger_("Fell out of live window at time "+i+". Seeking to "+("live point (seekable end) "+s)),this.cancelTimer_(),this.tech_.setCurrentTime(s),this.tech_.trigger({type:"usage",name:"vhs-live-resync"}),this.tech_.trigger({type:"usage",name:"hls-live-resync"}),!0}var a=this.tech_.vhs.masterPlaylistController_.sourceUpdater_,o=this.tech_.buffered(),l=this.videoUnderflow_({audioBuffered:a.audioBuffered(),videoBuffered:a.videoBuffered(),currentTime:i});if(l)return this.cancelTimer_(),this.tech_.setCurrentTime(i),this.tech_.trigger({type:"usage",name:"vhs-video-underflow"}),this.tech_.trigger({type:"usage",name:"hls-video-underflow"}),!0;var u=nx(o,i);if(u.length>0){var c=u.start(0)-i;return this.logger_("Stopped at "+i+", setting timer for "+c+", seeking "+("to "+u.start(0))),this.cancelTimer_(),this.timer_=setTimeout(this.skipTheGap_.bind(this),c*1e3,i),!0}return!1},e.afterSeekableWindow_=function(n,i,s,a){if(a===void 0&&(a=!1),!n.length)return!1;var o=n.end(n.length-1)+ku,l=!s.endList;return l&&a&&(o=n.end(n.length-1)+s.targetDuration*3),i>o},e.beforeSeekableWindow_=function(n,i){return!!(n.length&&n.start(0)>0&&i<n.start(0)-this.liveRangeSafeTimeDelta)},e.videoUnderflow_=function(n){var i=n.videoBuffered,s=n.audioBuffered,a=n.currentTime;if(i){var o;if(i.length&&s.length){var l=vp(i,a-3),u=vp(i,a),c=vp(s,a);c.length&&!u.length&&l.length&&(o={start:l.end(0),end:c.end(0)})}else{var h=nx(i,a);h.length||(o=this.gapFromVideoUnderflow_(i,a))}return o?(this.logger_("Encountered a gap in video from "+o.start+" to "+o.end+". "+("Seeking to current time "+a)),!0):!1}},e.skipTheGap_=function(n){var i=this.tech_.buffered(),s=this.tech_.currentTime(),a=nx(i,s);this.cancelTimer_(),!(a.length===0||s!==n)&&(this.logger_("skipTheGap_:","currentTime:",s,"scheduled currentTime:",n,"nextRange start:",a.start(0)),this.tech_.setCurrentTime(a.start(0)+Xd),this.tech_.trigger({type:"usage",name:"vhs-gap-skip"}),this.tech_.trigger({type:"usage",name:"hls-gap-skip"}))},e.gapFromVideoUnderflow_=function(n,i){for(var s=_xe(n),a=0;a<s.length;a++){var o=s.start(a),l=s.end(a);if(i-o<4&&i-o>2)return{start:o,end:l}}return null},r})(),Lbe={errorInterval:30,getSource:function(e){var t=this.tech({IWillNotUseThisInPlugins:!0}),n=t.currentSource_||this.currentSource();return e(n)}},Obe=function r(e,t){var n=0,i=0,s=Me.mergeOptions(Lbe,t);e.ready(function(){e.trigger({type:"usage",name:"vhs-error-reload-initialized"}),e.trigger({type:"usage",name:"hls-error-reload-initialized"})});var a=function(){i&&e.currentTime(i)},o=function(f){f!=null&&(i=e.duration()!==1/0&&e.currentTime()||0,e.one("loadedmetadata",a),e.src(f),e.trigger({type:"usage",name:"vhs-error-reload"}),e.trigger({type:"usage",name:"hls-error-reload"}),e.play())},l=function(){if(Date.now()-n<s.errorInterval*1e3){e.trigger({type:"usage",name:"vhs-error-reload-canceled"}),e.trigger({type:"usage",name:"hls-error-reload-canceled"});return}if(!s.getSource||typeof s.getSource!="function"){Me.log.error("ERROR: reloadSourceOnError - The option getSource must be a function!");return}return n=Date.now(),s.getSource.call(e,o)},u=function h(){e.off("loadedmetadata",a),e.off("error",l),e.off("dispose",h)},c=function(f){u(),r(e,f)};e.on("error",l),e.on("dispose",u),e.reloadSourceOnError=c},Mbe=function(e){Obe(this,e)},C9="2.16.3",Fbe="6.0.1",Bbe="0.22.1",Nbe="4.8.0",Ube="3.1.3",bs={PlaylistLoader:yp,Playlist:Fa,utils:Kxe,STANDARD_PLAYLIST_SELECTOR:uF,INITIAL_PLAYLIST_SELECTOR:B_e,lastBandwidthSelector:uF,movingAverageBandwidthSelector:M_e,comparePlaylistBandwidth:vD,comparePlaylistResolution:O_e,xhr:t9()};Object.keys(es).forEach(function(r){Object.defineProperty(bs,r,{get:function(){return Me.log.warn("using Vhs."+r+" is UNSAFE be sure you know what you are doing"),es[r]},set:function(t){if(Me.log.warn("using Vhs."+r+" is UNSAFE be sure you know what you are doing"),typeof t!="number"||t<0){Me.log.warn("value of Vhs."+r+" must be greater than or equal to 0");return}es[r]=t}})});var w9="videojs-vhs",E9=function(e,t){for(var n=t.media(),i=-1,s=0;s<e.length;s++)if(e[s].id===n.id){i=s;break}e.selectedIndex_=i,e.trigger({selectedIndex:i,type:"change"})},$be=function(e,t){t.representations().forEach(function(n){e.addQualityLevel(n)}),E9(e,t.playlists)};bs.canPlaySource=function(){return Me.log.warn("HLS is no longer a tech. Please remove it from your player's techOrder.")};var jbe=function(e,t,n){if(!e)return e;var i={};t&&t.attributes&&t.attributes.CODECS&&(i=Rb(hu(t.attributes.CODECS))),n&&n.attributes&&n.attributes.CODECS&&(i.audio=n.attributes.CODECS);var s=Ng(i.video),a=Ng(i.audio),o={};for(var l in e)o[l]={},a&&(o[l].audioContentType=a),s&&(o[l].videoContentType=s),t.contentProtection&&t.contentProtection[l]&&t.contentProtection[l].pssh&&(o[l].pssh=t.contentProtection[l].pssh),typeof e[l]=="string"&&(o[l].url=e[l]);return Me.mergeOptions(e,o)},zbe=function(e,t){return e.reduce(function(n,i){if(!i.contentProtection)return n;var s=t.reduce(function(a,o){var l=i.contentProtection[o];return l&&l.pssh&&(a[o]={pssh:l.pssh}),a},{});return Object.keys(s).length&&n.push(s),n},[])},Hbe=function(e){var t=e.player,n=e.sourceKeySystems,i=e.audioMedia,s=e.mainPlaylists;if(!t.eme.initializeMediaKeys)return Promise.resolve();var a=i?s.concat([i]):s,o=zbe(a,Object.keys(n)),l=[],u=[];return o.forEach(function(c){u.push(new Promise(function(h,f){t.tech_.one("keysessioncreated",h)})),l.push(new Promise(function(h,f){t.eme.initializeMediaKeys({keySystems:c},function(g){if(g){f(g);return}h()})}))}),Promise.race([Promise.all(l),Promise.race(u)])},Vbe=function(e){var t=e.player,n=e.sourceKeySystems,i=e.media,s=e.audioMedia,a=jbe(n,i,s);return a?(t.currentSource().keySystems=a,a&&!t.eme?(Me.log.warn("DRM encrypted source cannot be decrypted without a DRM plugin"),!1):!0):!1},k9=function(){if(!X.localStorage)return null;var e=X.localStorage.getItem(w9);if(!e)return null;try{return JSON.parse(e)}catch{return null}},Wbe=function(e){if(!X.localStorage)return!1;var t=k9();t=t?Me.mergeOptions(t,e):e;try{X.localStorage.setItem(w9,JSON.stringify(t))}catch{return!1}return t},qbe=function(e){return e.toLowerCase().indexOf("data:application/vnd.videojs.vhs+json,")===0?JSON.parse(e.substring(e.indexOf(",")+1)):e};bs.supportsNativeHls=(function(){if(!Be||!Be.createElement)return!1;var r=Be.createElement("video");if(!Me.getTech("Html5").isSupported())return!1;var e=["application/vnd.apple.mpegurl","audio/mpegurl","audio/x-mpegurl","application/x-mpegurl","video/x-mpegurl","video/mpegurl","application/mpegurl"];return e.some(function(t){return/maybe|probably/i.test(r.canPlayType(t))})})();bs.supportsNativeDash=(function(){return!Be||!Be.createElement||!Me.getTech("Html5").isSupported()?!1:/maybe|probably/i.test(Be.createElement("video").canPlayType("application/dash+xml"))})();bs.supportsTypeNatively=function(r){return r==="hls"?bs.supportsNativeHls:r==="dash"?bs.supportsNativeDash:!1};bs.isSupported=function(){return Me.log.warn("HLS is no longer a tech. Please remove it from your player's techOrder.")};var Gbe=Me.getComponent("Component"),xD=(function(r){Ht(e,r);function e(n,i,s){var a;if(a=r.call(this,i,Me.mergeOptions(s.hls,s.vhs))||this,s.hls&&Object.keys(s.hls).length&&Me.log.warn("Using hls options is deprecated. Please rename `hls` to `vhs` in your options object."),typeof s.initialBandwidth=="number"&&(a.options_.bandwidth=s.initialBandwidth),a.logger_=zl("VhsHandler"),i.options_&&i.options_.playerId){var o=Me(i.options_.playerId);o.hasOwnProperty("hls")||Object.defineProperty(o,"hls",{get:function(){return Me.log.warn("player.hls is deprecated. Use player.tech().vhs instead."),i.trigger({type:"usage",name:"hls-player-access"}),We(a)},configurable:!0}),o.hasOwnProperty("vhs")||Object.defineProperty(o,"vhs",{get:function(){return Me.log.warn("player.vhs is deprecated. Use player.tech().vhs instead."),i.trigger({type:"usage",name:"vhs-player-access"}),We(a)},configurable:!0}),o.hasOwnProperty("dash")||Object.defineProperty(o,"dash",{get:function(){return Me.log.warn("player.dash is deprecated. Use player.tech().vhs instead."),We(a)},configurable:!0}),a.player_=o}if(a.tech_=i,a.source_=n,a.stats={},a.ignoreNextSeekingEvent_=!1,a.setOptions_(),a.options_.overrideNative&&i.overrideNativeAudioTracks&&i.overrideNativeVideoTracks)i.overrideNativeAudioTracks(!0),i.overrideNativeVideoTracks(!0);else if(a.options_.overrideNative&&(i.featuresNativeVideoTracks||i.featuresNativeAudioTracks))throw new Error("Overriding native HLS requires emulated tracks. See https://git.io/vMpjB");return a.on(Be,["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","MSFullscreenChange"],function(l){var u=Be.fullscreenElement||Be.webkitFullscreenElement||Be.mozFullScreenElement||Be.msFullscreenElement;u&&u.contains(a.tech_.el())?a.masterPlaylistController_.fastQualityChange_():a.masterPlaylistController_.checkABR_()}),a.on(a.tech_,"seeking",function(){if(this.ignoreNextSeekingEvent_){this.ignoreNextSeekingEvent_=!1;return}this.setCurrentTime(this.tech_.currentTime())}),a.on(a.tech_,"error",function(){this.tech_.error()&&this.masterPlaylistController_&&this.masterPlaylistController_.pauseLoading()}),a.on(a.tech_,"play",a.play),a}var t=e.prototype;return t.setOptions_=function(){var i=this;if(this.options_.withCredentials=this.options_.withCredentials||!1,this.options_.handleManifestRedirects=this.options_.handleManifestRedirects!==!1,this.options_.limitRenditionByPlayerDimensions=this.options_.limitRenditionByPlayerDimensions!==!1,this.options_.useDevicePixelRatio=this.options_.useDevicePixelRatio||!1,this.options_.smoothQualityChange=this.options_.smoothQualityChange||!1,this.options_.useBandwidthFromLocalStorage=typeof this.source_.useBandwidthFromLocalStorage<"u"?this.source_.useBandwidthFromLocalStorage:this.options_.useBandwidthFromLocalStorage||!1,this.options_.useNetworkInformationApi=this.options_.useNetworkInformationApi||!1,this.options_.useDtsForTimestampOffset=this.options_.useDtsForTimestampOffset||!1,this.options_.customTagParsers=this.options_.customTagParsers||[],this.options_.customTagMappers=this.options_.customTagMappers||[],this.options_.cacheEncryptionKeys=this.options_.cacheEncryptionKeys||!1,typeof this.options_.blacklistDuration!="number"&&(this.options_.blacklistDuration=300),typeof this.options_.bandwidth!="number"&&this.options_.useBandwidthFromLocalStorage){var s=k9();s&&s.bandwidth&&(this.options_.bandwidth=s.bandwidth,this.tech_.trigger({type:"usage",name:"vhs-bandwidth-from-local-storage"}),this.tech_.trigger({type:"usage",name:"hls-bandwidth-from-local-storage"})),s&&s.throughput&&(this.options_.throughput=s.throughput,this.tech_.trigger({type:"usage",name:"vhs-throughput-from-local-storage"}),this.tech_.trigger({type:"usage",name:"hls-throughput-from-local-storage"}))}typeof this.options_.bandwidth!="number"&&(this.options_.bandwidth=es.INITIAL_BANDWIDTH),this.options_.enableLowInitialPlaylist=this.options_.enableLowInitialPlaylist&&this.options_.bandwidth===es.INITIAL_BANDWIDTH,["withCredentials","useDevicePixelRatio","limitRenditionByPlayerDimensions","bandwidth","smoothQualityChange","customTagParsers","customTagMappers","handleManifestRedirects","cacheEncryptionKeys","playlistSelector","initialPlaylistSelector","experimentalBufferBasedABR","liveRangeSafeTimeDelta","experimentalLLHLS","useNetworkInformationApi","useDtsForTimestampOffset","experimentalExactManifestTimings","experimentalLeastPixelDiffSelector"].forEach(function(a){typeof i.source_[a]<"u"&&(i.options_[a]=i.source_[a])}),this.limitRenditionByPlayerDimensions=this.options_.limitRenditionByPlayerDimensions,this.useDevicePixelRatio=this.options_.useDevicePixelRatio},t.src=function(i,s){var a=this;if(i){this.setOptions_(),this.options_.src=qbe(this.source_.src),this.options_.tech=this.tech_,this.options_.externVhs=bs,this.options_.sourceType=xj(s),this.options_.seekTo=function(u){a.tech_.setCurrentTime(u)},this.options_.smoothQualityChange&&Me.log.warn("smoothQualityChange is deprecated and will be removed in the next major version"),this.masterPlaylistController_=new Abe(this.options_);var o=Me.mergeOptions({liveRangeSafeTimeDelta:ku},this.options_,{seekable:function(){return a.seekable()},media:function(){return a.masterPlaylistController_.media()},masterPlaylistController:this.masterPlaylistController_});this.playbackWatcher_=new Rbe(o),this.masterPlaylistController_.on("error",function(){var u=Me.players[a.tech_.options_.playerId],c=a.masterPlaylistController_.error;typeof c=="object"&&!c.code?c.code=3:typeof c=="string"&&(c={message:c,code:3}),u.error(c)});var l=this.options_.experimentalBufferBasedABR?bs.movingAverageBandwidthSelector(.55):bs.STANDARD_PLAYLIST_SELECTOR;this.masterPlaylistController_.selectPlaylist=this.selectPlaylist?this.selectPlaylist.bind(this):l.bind(this),this.masterPlaylistController_.selectInitialPlaylist=bs.INITIAL_PLAYLIST_SELECTOR.bind(this),this.playlists=this.masterPlaylistController_.masterPlaylistLoader_,this.mediaSource=this.masterPlaylistController_.mediaSource,Object.defineProperties(this,{selectPlaylist:{get:function(){return this.masterPlaylistController_.selectPlaylist},set:function(c){this.masterPlaylistController_.selectPlaylist=c.bind(this)}},throughput:{get:function(){return this.masterPlaylistController_.mainSegmentLoader_.throughput.rate},set:function(c){this.masterPlaylistController_.mainSegmentLoader_.throughput.rate=c,this.masterPlaylistController_.mainSegmentLoader_.throughput.count=1}},bandwidth:{get:function(){var c=this.masterPlaylistController_.mainSegmentLoader_.bandwidth,h=X.navigator.connection||X.navigator.mozConnection||X.navigator.webkitConnection,f=1e7;if(this.options_.useNetworkInformationApi&&h){var g=h.downlink*1e3*1e3;g>=f&&c>=f?c=Math.max(c,g):c=g}return c},set:function(c){this.masterPlaylistController_.mainSegmentLoader_.bandwidth=c,this.masterPlaylistController_.mainSegmentLoader_.throughput={rate:0,count:0}}},systemBandwidth:{get:function(){var c=1/(this.bandwidth||1),h;this.throughput>0?h=1/this.throughput:h=0;var f=Math.floor(1/(c+h));return f},set:function(){Me.log.error('The "systemBandwidth" property is read-only')}}}),this.options_.bandwidth&&(this.bandwidth=this.options_.bandwidth),this.options_.throughput&&(this.throughput=this.options_.throughput),Object.defineProperties(this.stats,{bandwidth:{get:function(){return a.bandwidth||0},enumerable:!0},mediaRequests:{get:function(){return a.masterPlaylistController_.mediaRequests_()||0},enumerable:!0},mediaRequestsAborted:{get:function(){return a.masterPlaylistController_.mediaRequestsAborted_()||0},enumerable:!0},mediaRequestsTimedout:{get:function(){return a.masterPlaylistController_.mediaRequestsTimedout_()||0},enumerable:!0},mediaRequestsErrored:{get:function(){return a.masterPlaylistController_.mediaRequestsErrored_()||0},enumerable:!0},mediaTransferDuration:{get:function(){return a.masterPlaylistController_.mediaTransferDuration_()||0},enumerable:!0},mediaBytesTransferred:{get:function(){return a.masterPlaylistController_.mediaBytesTransferred_()||0},enumerable:!0},mediaSecondsLoaded:{get:function(){return a.masterPlaylistController_.mediaSecondsLoaded_()||0},enumerable:!0},mediaAppends:{get:function(){return a.masterPlaylistController_.mediaAppends_()||0},enumerable:!0},mainAppendsToLoadedData:{get:function(){return a.masterPlaylistController_.mainAppendsToLoadedData_()||0},enumerable:!0},audioAppendsToLoadedData:{get:function(){return a.masterPlaylistController_.audioAppendsToLoadedData_()||0},enumerable:!0},appendsToLoadedData:{get:function(){return a.masterPlaylistController_.appendsToLoadedData_()||0},enumerable:!0},timeToLoadedData:{get:function(){return a.masterPlaylistController_.timeToLoadedData_()||0},enumerable:!0},buffered:{get:function(){return qh(a.tech_.buffered())},enumerable:!0},currentTime:{get:function(){return a.tech_.currentTime()},enumerable:!0},currentSource:{get:function(){return a.tech_.currentSource_},enumerable:!0},currentTech:{get:function(){return a.tech_.name_},enumerable:!0},duration:{get:function(){return a.tech_.duration()},enumerable:!0},master:{get:function(){return a.playlists.master},enumerable:!0},playerDimensions:{get:function(){return a.tech_.currentDimensions()},enumerable:!0},seekable:{get:function(){return qh(a.tech_.seekable())},enumerable:!0},timestamp:{get:function(){return Date.now()},enumerable:!0},videoPlaybackQuality:{get:function(){return a.tech_.getVideoPlaybackQuality()},enumerable:!0}}),this.tech_.one("canplay",this.masterPlaylistController_.setupFirstPlay.bind(this.masterPlaylistController_)),this.tech_.on("bandwidthupdate",function(){a.options_.useBandwidthFromLocalStorage&&Wbe({bandwidth:a.bandwidth,throughput:Math.round(a.throughput)})}),this.masterPlaylistController_.on("selectedinitialmedia",function(){Pbe(a)}),this.masterPlaylistController_.sourceUpdater_.on("createdsourcebuffers",function(){a.setupEme_()}),this.on(this.masterPlaylistController_,"progress",function(){this.tech_.trigger("progress")}),this.on(this.masterPlaylistController_,"firstplay",function(){this.ignoreNextSeekingEvent_=!0}),this.setupQualityLevels_(),this.tech_.el()&&(this.mediaSourceUrl_=X.URL.createObjectURL(this.masterPlaylistController_.mediaSource),this.tech_.src(this.mediaSourceUrl_))}},t.createKeySessions_=function(){var i=this,s=this.masterPlaylistController_.mediaTypes_.AUDIO.activePlaylistLoader;this.logger_("waiting for EME key session creation"),Hbe({player:this.player_,sourceKeySystems:this.source_.keySystems,audioMedia:s&&s.media(),mainPlaylists:this.playlists.master.playlists}).then(function(){i.logger_("created EME key session"),i.masterPlaylistController_.sourceUpdater_.initializedEme()}).catch(function(a){i.logger_("error while creating EME key session",a),i.player_.error({message:"Failed to initialize media keys for EME",code:3})})},t.handleWaitingForKey_=function(){this.logger_("waitingforkey fired, attempting to create any new key sessions"),this.createKeySessions_()},t.setupEme_=function(){var i=this,s=this.masterPlaylistController_.mediaTypes_.AUDIO.activePlaylistLoader,a=Vbe({player:this.player_,sourceKeySystems:this.source_.keySystems,media:this.playlists.media(),audioMedia:s&&s.media()});if(this.player_.tech_.on("keystatuschange",function(o){if(o.status==="output-restricted"){var l=i.masterPlaylistController_.master();if(!(!l||!l.playlists)){var u=[];if(l.playlists.forEach(function(h){h&&h.attributes&&h.attributes.RESOLUTION&&h.attributes.RESOLUTION.height>=720&&(!h.excludeUntil||h.excludeUntil<1/0)&&(h.excludeUntil=1/0,u.push(h))}),u.length){var c;(c=Me.log).warn.apply(c,['DRM keystatus changed to "output-restricted." Removing the following HD playlists that will most likely fail to play and clearing the buffer. This may be due to HDCP restrictions on the stream and the capabilities of the current device.'].concat(u)),i.masterPlaylistController_.fastQualityChange_()}}}}),this.handleWaitingForKey_=this.handleWaitingForKey_.bind(this),this.player_.tech_.on("waitingforkey",this.handleWaitingForKey_),Me.browser.IE_VERSION===11||!a){this.masterPlaylistController_.sourceUpdater_.initializedEme();return}this.createKeySessions_()},t.setupQualityLevels_=function(){var i=this,s=Me.players[this.tech_.options_.playerId];!s||!s.qualityLevels||this.qualityLevels_||(this.qualityLevels_=s.qualityLevels(),this.masterPlaylistController_.on("selectedinitialmedia",function(){$be(i.qualityLevels_,i)}),this.playlists.on("mediachange",function(){E9(i.qualityLevels_,i.playlists)}))},e.version=function(){return{"@videojs/http-streaming":C9,"mux.js":Fbe,"mpd-parser":Bbe,"m3u8-parser":Nbe,"aes-decrypter":Ube}},t.version=function(){return this.constructor.version()},t.canChangeType=function(){return T9.canChangeType()},t.play=function(){this.masterPlaylistController_.play()},t.setCurrentTime=function(i){this.masterPlaylistController_.setCurrentTime(i)},t.duration=function(){return this.masterPlaylistController_.duration()},t.seekable=function(){return this.masterPlaylistController_.seekable()},t.dispose=function(){this.playbackWatcher_&&this.playbackWatcher_.dispose(),this.masterPlaylistController_&&this.masterPlaylistController_.dispose(),this.qualityLevels_&&this.qualityLevels_.dispose(),this.player_&&(delete this.player_.vhs,delete this.player_.dash,delete this.player_.hls),this.tech_&&this.tech_.vhs&&delete this.tech_.vhs,this.tech_&&delete this.tech_.hls,this.mediaSourceUrl_&&X.URL.revokeObjectURL&&(X.URL.revokeObjectURL(this.mediaSourceUrl_),this.mediaSourceUrl_=null),this.tech_&&this.tech_.off("waitingforkey",this.handleWaitingForKey_),r.prototype.dispose.call(this)},t.convertToProgramTime=function(i,s){return t_e({playlist:this.masterPlaylistController_.media(),time:i,callback:s})},t.seekToProgramTime=function(i,s,a,o){return a===void 0&&(a=!0),o===void 0&&(o=2),r_e({programTime:i,playlist:this.masterPlaylistController_.media(),retryCount:o,pauseAfterSeek:a,seekTo:this.options_.seekTo,tech:this.options_.tech,callback:s})},e})(Gbe),Vg={name:"videojs-http-streaming",VERSION:C9,canHandleSource:function(e,t){t===void 0&&(t={});var n=Me.mergeOptions(Me.options,t);return Vg.canPlayType(e.type,n)},handleSource:function(e,t,n){n===void 0&&(n={});var i=Me.mergeOptions(Me.options,n);return t.vhs=new xD(e,t,i),Me.hasOwnProperty("hls")||Object.defineProperty(t,"hls",{get:function(){return Me.log.warn("player.tech().hls is deprecated. Use player.tech().vhs instead."),t.vhs},configurable:!0}),t.vhs.xhr=t9(),t.vhs.src(e.src,e.type),t.vhs},canPlayType:function(e,t){var n=xj(e);if(!n)return"";var i=Vg.getOverrideNative(t),s=bs.supportsTypeNatively(n),a=!s||i;return a?"maybe":""},getOverrideNative:function(e){e===void 0&&(e={});var t=e,n=t.vhs,i=n===void 0?{}:n,s=t.hls,a=s===void 0?{}:s,o=!(Me.browser.IS_ANY_SAFARI||Me.browser.IS_IOS),l=i.overrideNative,u=l===void 0?o:l,c=a.overrideNative,h=c===void 0?!1:c;return h||u}},Kbe=function(){return d_("avc1.4d400d,mp4a.40.2")};Kbe()&&Me.getTech("Html5").registerSourceHandler(Vg,0);Me.VhsHandler=xD;Object.defineProperty(Me,"HlsHandler",{get:function(){return Me.log.warn("videojs.HlsHandler is deprecated. Use videojs.VhsHandler instead."),xD},configurable:!0});Me.VhsSourceHandler=Vg;Object.defineProperty(Me,"HlsSourceHandler",{get:function(){return Me.log.warn("videojs.HlsSourceHandler is deprecated. Use videojs.VhsSourceHandler instead."),Vg},configurable:!0});Me.Vhs=bs;Object.defineProperty(Me,"Hls",{get:function(){return Me.log.warn("videojs.Hls is deprecated. Use videojs.Vhs instead."),bs},configurable:!0});Me.use||(Me.registerComponent("Hls",bs),Me.registerComponent("Vhs",bs));Me.options.vhs=Me.options.vhs||{};Me.options.hls=Me.options.hls||{};if(!Me.getPlugin||!Me.getPlugin("reloadSourceOnError")){var Xbe=Me.registerPlugin||Me.plugin;Xbe("reloadSourceOnError",Mbe)}var Ybe="1.1.6";function A9(r,e){r.prototype=Object.create(e.prototype),r.prototype.constructor=r,r.__proto__=e}function _F(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}var Qbe=Me.getComponent("MenuItem"),Jbe=Me.getComponent("Component"),Fb=(function(r){A9(e,r);function e(n,i){return i.selectable=!0,i.multiSelectable=!1,r.call(this,n,i)||this}var t=e.prototype;return t.handleClick=function(){var i=this.options_;console.log("Changing quality to:",i.label),r.prototype.handleClick.call(this);for(var s=this.player().qualityLevels(),a=0;a<s.length;a++)i.index==s.length||i.index==a?s[a].enabled=!0:s[a].enabled=!1},t.update=function(){var i=this.player().qualityLevels().selectedIndex;this.selected(this.options_.index==i)},e})(Qbe);Jbe.registerComponent("SourceMenuItem",Fb);var ax=Me.getComponent("MenuButton"),Zbe=(function(r){A9(e,r);function e(n,i){var s;s=r.call(this,n,i)||this,ax.apply(_F(s),arguments);var a=s.player().qualityLevels();if(i&&i.default){if(i.default=="low")for(var o=0;o<a.length;o++)a[o].enabled=o==0;else if(i.default="high")for(var o=0;o<a.length;o++)a[o].enabled=o==a.length-1}return s.player().qualityLevels().on(["change","addqualitylevel"],Me.bind(_F(s),s.update)),s}var t=e.prototype;return t.createEl=function(){return Me.dom.createEl("div",{className:"vjs-http-source-selector vjs-menu-button vjs-menu-button-popup vjs-control vjs-button"})},t.buildCSSClass=function(){return ax.prototype.buildCSSClass.call(this)+" vjs-icon-cog"},t.update=function(){return ax.prototype.update.call(this)},t.createItems=function(){for(var i=[],s=this.player().qualityLevels(),a=[],o=0;o<s.length;o++){var l=s.length-(o+1),u=l===s.selectedIndex,c=""+l,h=l;s[l].height?(c=s[l].height+"p",h=parseInt(s[l].height,10)):s[l].bitrate&&(c=Math.floor(s[l].bitrate/1e3)+" kbps",h=parseInt(s[l].bitrate,10)),!(a.indexOf(c)>=0)&&(a.push(c),i.push(new Fb(this.player_,{label:c,index:l,selected:u,sortVal:h})))}return s.length>1&&i.push(new Fb(this.player_,{label:"Auto",index:s.length,selected:!1,sortVal:99999})),i.sort(function(f,g){return f.options_.sortVal<g.options_.sortVal?1:f.options_.sortVal>g.options_.sortVal?-1:0}),i},e})(ax),eSe={},tSe=Me.registerPlugin||Me.plugin,rSe=function(e,t){if(e.addClass("vjs-http-source-selector"),console.log("videojs-http-source-selector initialized!"),console.log("player.techName_:"+e.techName_),e.techName_!="Html5")return!1;e.on(["loadedmetadata"],function(n){if(e.qualityLevels(),Me.log("loadmetadata event"),e.videojs_http_source_selector_initialized=="undefined"||e.videojs_http_source_selector_initialized==!0)console.log("player.videojs_http_source_selector_initialized == true");else{console.log("player.videojs_http_source_selector_initialized == false"),e.videojs_http_source_selector_initialized=!0;var i=e.controlBar,s=i.getChild("fullscreenToggle").el();i.el().insertBefore(i.addChild("SourceMenuButton").el(),s)}})},D9=function(e){var t=this;this.ready(function(){rSe(t,Me.mergeOptions(eSe,e))}),Me.registerComponent("SourceMenuButton",Zbe),Me.registerComponent("SourceMenuItem",Fb)};tSe("httpSourceSelector",D9);D9.VERSION=Ybe;const I9=r=>{const e=Qr.useRef(null),t=Qr.useRef(null),{options:n,onReady:i,headers:s}=r;return Qr.useEffect(()=>{if(t.current){const a=t.current;typeof a.httpSourceSelector=="function"&&a&&a.httpSourceSelector(),a.autoplay(n.autoplay),a.src(n.sources)}else{const a=document.createElement("video-js");a.classList.add("vjs-big-play-centered"),e.current.appendChild(a),Se.Vhs.xhr.onRequest=l=>{if(l.headers||(l.headers={}),s.length>0)for(let u=0;u<s.length;u++)s[u].key!==""&&s[u].key!=="User-Agent"&&(l.headers[s[u].key]=s[u].value)};const o=t.current=Se(a,n,()=>{Se.log("player is ready"),i&&i(o)});typeof o.httpSourceSelector=="function"&&o&&o.httpSourceSelector()}},[n,e]),Qr.useEffect(()=>{const a=t.current;return()=>{a&&!a.isDisposed()&&(a.dispose(),t.current=null)}},[t]),O.jsx("div",{"data-vjs-player":!0,children:O.jsx("div",{ref:e})})};function nSe(){const{t:r}=Ii(),e=M.useContext(Ha);Gu();const[t,n]=M.useState(null),i=W=>{let V=e.settings.playerSource;console.log("os_type",V);let Q={autoplay:!0,controls:!0,responsive:!0,fluid:!0,muted:!0,playsinline:!0,html5:{vhs:{overrideNative:!0}},sources:[{src:W,type:V}]};console.log("data",Q),n(Q)},s=M.useRef(null),[a,o]=M.useState([]),[l,u]=M.useState(""),[c,h]=M.useState(""),[f,g]=M.useState(""),[v,y]=M.useState(!1),[_,C]=M.useState([]);M.useEffect(()=>{let W={},V=new URLSearchParams(window.location.search).entries();for(let[Q,ie]of V)W[Q]=ie;W.url!==void 0&&(g(W.url),I(W.url))},[]);const E=W=>{g(W.target.value)},D=()=>{i(f),s.current!==null&&s.current.play()},I=W=>{i(W),s.current!==null&&s.current.play()},k=()=>{P()},P=()=>{y(!1)},N=(W,V,Q)=>{C(ie=>ie.map((ne,ue)=>ue===V?{...ne,key:Q.target.value}:ne))},U=(W,V,Q)=>{C(ie=>ie.map((ne,ue)=>ue===V?{...ne,value:Q.target.value}:ne))},B=W=>{C(V=>V.filter((Q,ie)=>ie!==W))},A=()=>{C([..._,{key:"",value:""}])},$=W=>{s.current=W,o([W.error()]),W.on("waiting",()=>{console.log("player is waiting")}),W.on("error",V=>{console.log("error",V)}),W.on("dispose",()=>{console.log("player will dispose")})};return O.jsxs(wt,{style:{padding:"0 20px"},children:[O.jsxs(wt,{style:{display:"flex",alignItems:"center"},children:[O.jsx(Ur,{sx:{width:550,margin:"10px"},children:O.jsx(jn,{sx:{fontSize:"11px"},label:r("m3u8"),size:"small",id:"standard-multiline-static",value:f,onChange:E})}),f!==""&&!v?O.jsx(Xo,{size:"small",onClick:D,variant:"contained",startIcon:O.jsx(Ile,{}),children:r("")}):"",f!==""&&v?O.jsx(Xo,{size:"small",onClick:k,variant:"contained",startIcon:O.jsx(Ple,{}),children:r("")}):""]}),O.jsx(wt,{children:O.jsxs(Ur,{sx:{width:550,margin:"10px"},children:[O.jsx(wt,{sx:{marginBottom:"10px"},children:O.jsxs(Dr,{size:"small",onClick:A,variant:"contained",children:["+ ",r("")]})}),_.map((W,V)=>O.jsxs(wt,{sx:{marginBottom:"10px",display:"flex",alignItems:"center"},children:[O.jsx(jn,{sx:{fontSize:"11px",marginRight:"5px"},label:"key",size:"small",id:"standard-multiline-static",value:W.key,onChange:N.bind(this,W,V)}),O.jsx(jn,{sx:{fontSize:"11px"},label:"value",size:"small",id:"standard-multiline-static",value:W.value,onChange:U.bind(this,W,V)}),O.jsx(Vd,{color:"disabled",onClick:()=>B(V)})]},V))]})}),O.jsxs(wt,{sx:{display:"flex",flexDirection:"column"},children:[O.jsxs(wt,{sx:{display:"flex",alignItems:"center"},children:[O.jsx(wt,{sx:{marginLeft:"10px"},children:c!==""?O.jsx("img",{src:c,height:"50"}):""}),O.jsx("h2",{style:{display:"flex",alignItems:"center"},children:l})]}),O.jsx(Ur,{sx:{margin:"10px"},children:t===null?"":O.jsx(I9,{options:t,onReady:$,headers:_})})]})]})}class Iv{constructor(e=""){this.baseUrl=e}async getTaskList(){return(await Ar.get(`${this.baseUrl}/tasks/list?page=1`)).data}async uploadFile(e){const t=await Ar.post(`${this.baseUrl}/media/upload`,e,{headers:{"Content-Type":"multipart/form-data"}});return console.log("response---",t.data),t.data}async getReplaceList(){const e=await Ar.get(`${this.baseUrl}/system/replace`);if(e.status!==200)throw new Error(e.data.msg);return e.data}async updateReplaceList(e){const t=await Ar.post(`${this.baseUrl}/system/replace`,e);if(t.status!==200)throw new Error(t.data.msg);return t.data}async addTask(e){const t=await Ar.post(`${this.baseUrl}/tasks/add`,e);if(t.data.code!=="200")throw new Error(t.data.msg);return t.data}async updateTask(e,t){const n=await Ar.post(`${this.baseUrl}/tasks/update?task_id=${e}`,t);if(n.data.code!=="200")throw new Error(n.data.msg);return n.data}async deleteTask(e){const t=await Ar.delete(`${this.baseUrl}/tasks/delete/${e}`);if(t.data.code!=="200")throw new Error(t.data.msg);return t.data}async runTask(e){return(await Ar.get(`${this.baseUrl}/tasks/run?task_id=${e}`)).data}async getDownloadBody(e){return(await Ar.get(`${this.baseUrl}/tasks/get-download-body?task_id=${e}`)).data}async exportTasks(){return(await Ar.get(`${this.baseUrl}/system/tasks/export`)).data}async importTasks(e){return(await Ar.post(`${this.baseUrl}/system/tasks/import`,e)).data}async getSearchConfig(){const e=await Ar.get(`${this.baseUrl}/system/info`);if(e.status!==200)throw new Error(e.data.msg);return e.data}async updateSearchConfig(e){const t=await Ar.post(`${this.baseUrl}/system/global-config`,e);if(t.status!==200)throw new Error(t.data.msg);return t.data}async runSpider(){return(await Ar.post(`${this.baseUrl}/system/spider/run`)).data}async getSpiderStatus(){return(await Ar.get(`${this.baseUrl}/system/spider/status`)).data}async getTodayFiles(){return(await Ar.get(`${this.baseUrl}/system/list-today-files`)).data}async clearSearchFolder(){return(await Ar.get(`${this.baseUrl}/system/clear-search-folder`)).data}async initSearchData(){return(await Ar.get(`${this.baseUrl}/system/init-search-data`)).data}async getFavourite(){return(await Ar.get(`${this.baseUrl}/system/get-favourite`)).data}async saveFavourite(e){return(await Ar.post(`${this.baseUrl}/system/save-favourite`,e)).data}async openUrl(e){return(await Ar.get(`${this.baseUrl}/system/open-url`,{params:{url:e}})).data}async getChannelLogos(){return(await Ar.get(`${this.baseUrl}/media/logos`)).data}async uploadLogos(e){return(await Ar.post(`${this.baseUrl}/media/upload-logos`,e,{headers:{"Content-Type":"multipart/form-data"}})).data}async saveChannelLogos(e){return(await Ar.post(`${this.baseUrl}/system/channel-logos`,e)).data}}function iSe(){M.useContext(Ha);const{t:r}=Ii(),[e]=M.useState(()=>new Iv),[t,n]=M.useState(!1),[i,s]=M.useState(null),[a,o]=M.useState([]),[l,u]=M.useState(!1),[c,h]=M.useState(""),[f,g]=M.useState(!1),[v,y]=M.useState({content:"",url:""}),[_,C]=M.useState(!1),[E,D]=M.useState(!1),[I,k]=M.useState(""),[P,N]=M.useState("");M.useEffect(()=>{V()},[]);const U=me=>{s(me),n(!0)},B=()=>{n(!1),s(null)},A=async me=>{try{me.id===""?await e.addTask($(me)):await e.updateTask(me.id,$(me)),V()}catch(ye){Q(ye.message)}},$=me=>({urls:me.original.urls,result_name:"static/output/"+me.original.result_name+".m3u",md5:"",run_type:me.original.run_type,keyword_dislike:me.original.keyword_dislike,keyword_like:me.original.keyword_like,http_timeout:me.original.http_timeout,check_timeout:me.original.check_timeout,sort:me.original.sort,no_check:me.original.no_check,concurrent:me.original.concurrent,rename:me.original.rename,ffmpeg_check:me.original.ffmpeg_check,not_http_skip:me.original.not_http_skip,same_save_num:me.original.same_save_num}),W=async me=>{try{await e.deleteTask(me.id),V()}catch(ye){Q(ye.message)}},V=async()=>{try{let me=await e.getTaskList();o(me.list),N(me.now_id)}catch{o([]),Q(r(""))}},Q=me=>{h(me),u(!0)},ie=()=>{h(""),u(!1)},ne=async me=>{try{await e.runTask(me),V()}catch{Q(r(""))}},ue=async me=>{try{const ye=await e.getDownloadBody(me);g(!0),y({content:ye.content,url:ye.url})}catch{Q(r(""))}},se=me=>{g(me)},ae=()=>{o([]),V()},ce=me=>{C(me)},ee=async me=>{if(me)try{const ye=await e.exportTasks();D(!0),k(JSON.stringify(ye))}catch{Q(r(""))}else D(!1)},pe=async me=>{try{const ye=JSON.parse(me);await e.importTasks(ye),C(!1),ae()}catch{Q(r(""))}};return O.jsxs(wt,{style:{padding:"0 20px"},children:[O.jsxs(wt,{style:{marginBottom:"10px",display:"flex",justifyContent:"space-between"},children:[O.jsxs(wt,{children:[O.jsx(Dr,{variant:"contained",size:"small",startIcon:O.jsx(fv,{}),onClick:()=>U(null),style:{marginRight:"10px"},children:r("")}),O.jsx(Dr,{variant:"outlined",size:"small",startIcon:O.jsx(Kie,{}),onClick:ae,style:{marginRight:"10px"},children:r("")})]}),O.jsxs(wt,{children:[O.jsx(Dr,{variant:"outlined",size:"small",startIcon:O.jsx(Xie,{}),style:{marginRight:"10px"},onClick:()=>ce(!0),children:r("")}),O.jsx(Dr,{variant:"outlined",size:"small",startIcon:O.jsx(u2,{}),onClick:()=>ee(!0),children:r("")})]})]}),O.jsx(_f,{open:l,autoHideDuration:6e3,onClose:ie,message:c}),O.jsx(x5,{taskService:e,formValue:i,open:t,onClose:B,handleSave:A,handleDelete:W,checkType:"server",output_folder:"static/output/"}),O.jsx(b5,{formValue:v,open:f,onClose:se}),O.jsx(S5,{open:_,onClose:ce,onSave:pe}),O.jsx(T5,{open:E,formValue:I,onClose:ee}),O.jsx(Ku,{sx:{overflow:"hidden"},children:O.jsx(u5,{children:O.jsxs(o5,{"aria-label":"simple table",children:[O.jsx(c5,{children:O.jsxs(Dk,{children:[O.jsx(Hd,{children:r("id")}),O.jsx(Hd,{align:"right",children:r("")})]})}),O.jsx(l5,{children:a.map(me=>O.jsx(_5,{row:me,doTaskRightNow:ne,showDownloadDialog:ue,clickTask:()=>U(me),source:"task",isNowHandle:me.id===P},me.id))})]})})})]})}function sSe(r){const{t:e}=Ii(),{onClose:t,open:n,saveData:i}=r,[s,a]=M.useState(""),o=()=>{t(!1)},l=c=>{a(c.target.value)},u=()=>{i(s)};return O.jsxs(Ml,{onClose:o,open:n,children:[O.jsx(Sm,{children:e("")}),O.jsxs("div",{style:{padding:"20px",display:"flex",justifyContent:"center",flexDirection:"column"},children:[O.jsx(Ur,{style:{width:"550px"},children:O.jsx(jn,{id:"demo-simple-select-standard",value:s,multiline:!0,rows:10,onChange:l})}),O.jsx(Ur,{style:{margin:"10px 0"},children:O.jsx(Xo,{onClick:u,variant:"outlined",children:e("")})}),O.jsx(wt,{children:e(",https://xxxx.m3u + ")}),O.jsx(wt,{children:"star movies,http://srtarmovies.m3u8"}),O.jsx(wt,{children:"star plus,https://plus.m3u"})]})]})}function bF(){const r=M.useContext(Ha),[e,t]=M.useState(!1),[n,i]=M.useState(8e3),[s,a]=M.useState(1),[o,l]=M.useState("zh"),[u,c]=M.useState([]),[h,f]=M.useState(""),[g,v]=M.useState(""),[y,_]=M.useState(""),[C,E]=M.useState(!1),[D,I]=M.useState(""),{t:k}=Ii();M.useEffect(()=>{let W=r.settings;r.check_version(),r.nowMod===1?I(r.configInfo.app_version):I(r.configInfo.version),W!==null&&(i(W.httpRequestTimeout??1e3),c(W.customLink??[]),a(W.concurrent??1),l(W.language??"zh"),f(W.privateHost??""),_(W.playerSource??"video/mp2t"))},[r]);const P=W=>{const{name:V,value:Q}=W.target;let ie=parseInt(W.target.value,10);V==="httpRequestTimeout"?i(ie):V==="concurrent"?(ie===0&&(ie=1),a(ie)):V==="language"?l(W.target.value):V==="privateHost"?f(W.target.value):V==="playerSource"&&_(W.target.value)},N=()=>{r.onChangeSettings({httpRequestTimeout:n,customLink:u,concurrent:s,language:o,privateHost:h,playerSource:y}),r.changeLanguage(o),E(!0),v(k(""))},U=W=>{t(W)},B=W=>{let V=u,Q=W.split(`
`);if(Q.length>0){for(let ie=0;ie<Q.length;ie++){let ne=Q[ie].split(",");V.push({name:ne[0],url:ne[1]})}c(V)}t(!1)},A=UE.version,$=()=>{E(!1),v("")};return O.jsxs(wt,{style:{padding:"0 20px"},children:[O.jsx(sSe,{open:e,onClose:()=>U(!1),saveData:B}),O.jsx(_f,{open:C,autoHideDuration:3e3,message:g,onClose:$}),O.jsxs(wt,{children:[O.jsxs(wt,{sx:{display:"flex",flexDirection:"column",padding:"20px",width:"400px"},children:[O.jsxs(Ur,{sx:{marginBottom:"20px"},children:[O.jsx(Fu,{id:"demo-row-radio-buttons-group-label",children:k("")}),O.jsx(Bu,{name:"language",value:o,label:k(""),onChange:P,children:r.languageList.map((W,V)=>O.jsx(Fc,{value:W.code,children:W.name},V))})]}),O.jsxs(Ur,{sx:{marginBottom:"20px"},children:[O.jsx(Fu,{id:"demo-row-radio-buttons-group-label",children:k("")}),O.jsx(Bu,{name:"playerSource",value:y,label:k(""),onChange:P,children:r.videoPlayTypes.map((W,V)=>O.jsx(Fc,{value:W.value,children:W.name},V))})]}),O.jsx(Xo,{onClick:N,variant:"outlined",children:k("")})]}),O.jsxs(Ur,{sx:{marginTop:"20px"},children:[O.jsxs(wt,{children:[k(""),": ",A]}),r.showNewVersion?O.jsxs(wt,{style:{color:"green",fontWeight:"bold"},children:[k(""),": ",D]}):""]})]})]})}function aSe(r){const e=M.useContext(Ha),{nowPlatform:t}=r,[n,i]=M.useState(!1),[s,a]=M.useState(null),o=_=>{let C=e.settings.playerSource;console.log(C),a({autoplay:!0,controls:!0,responsive:!0,fluid:!0,muted:!0,playsinline:!0,html5:{vhs:{overrideNative:!0}},sources:[{src:_,type:C}]})},l=M.useRef(null),[u,c]=M.useState(""),[h,f]=M.useState([]),g=async()=>{const _=w_();await Qg("changeWatchUrl",C=>{C.event==="changeWatchUrl"&&(c(C.payload.data.url),v(C.payload.data.url),_.setTitle(C.payload.data.name))})};M.useEffect(()=>{let _={},C=new URLSearchParams(window.location.search).entries();for(let[E,D]of C)_[E]=D;_.url!==void 0&&(c(_.url),v(_.url)),g()},[]);const v=_=>{o(_),l.current!==null&&l.current.play()},y=_=>{console.log("load video"),l.current=_,_.on("waiting",()=>{console.log("player is waiting"),console.log(l.current)}),_.on("canplay",()=>{console.log("videojs canplay")}),_.on("dispose",()=>{console.log("player will dispose")}),_.on("fullscreenchange",C=>{console.log("full s",C)}),_.on("error",C=>{console.log("videojs error",C)}),_.ready(function(){console.log(_.controlBar);var C=_.controlBar.fullscreenToggle;const E=w_();C.on("click",function(){console.log("user click full"),E.isFullscreen().then(D=>{if(console.log("now fullscreen status",D,window.screen),D){E.setFullscreen(!1),console.log("---exit full screen");const I=_.el().parentElement;I.style.width="",I.style.height="",I.style.alignContent="",I.style.backgroundColor="",_.el().style.width="",_.el().style.height=""}else{E.setFullscreen(!0);const I=_.el().parentElement;I.style.width=window.screen.width+"px",I.style.height=window.screen.height+"px",I.style.alignContent="center",I.style.backgroundColor="#000",_.el().style.width=window.screen.width+"px",_.el().style.height=window.screen.height+"px"}})})})};return O.jsx(O.Fragment,{children:s===null?"":O.jsx("div",{children:O.jsx(I9,{options:s,onReady:y,headers:h})})})}const SF=({values:r,onChange:e,label:t,t:n,placeholder:i,validation:s})=>{const a=(u,c)=>{const h=[...r];h[u]=c,e(h)},o=()=>e([...r,""]),l=u=>e(r.filter((c,h)=>h!==u));return O.jsxs(wt,{sx:{mb:2},children:[O.jsx(kr,{variant:"caption",color:"textSecondary",sx:{mb:1,display:"block"},children:t}),r.map((u,c)=>{const h=s?s(u):null;return O.jsxs(wt,{sx:{display:"flex",gap:1,mb:1,alignItems:"flex-start"},children:[O.jsx(jn,{value:u,onChange:f=>a(c,f.target.value),size:"small",fullWidth:!0,placeholder:i,error:!!h,helperText:h}),O.jsx(th,{onClick:()=>l(c),size:"small",sx:{mt:.5},children:O.jsx(Vd,{fontSize:"small"})})]},c)}),O.jsx(Dr,{startIcon:O.jsx(fv,{}),onClick:o,size:"small",variant:"outlined",children:n("")})]})};function oSe(){const{t:r}=Ii(),[e,t]=M.useState(!1),[n,i]=M.useState({remote_url2local_images:!1,search:{source:[],extensions:[],search_list:[]},today_fetch:!1}),[s]=M.useState(()=>new Iv),[a,o]=M.useState(!1),[l,u]=M.useState(""),[c,h]=M.useState(!1),[f,g]=M.useState(0),[v,y]=M.useState([]),[_,C]=M.useState(!1),E=[".txt",".m3u"];M.useEffect(()=>{D()},[]);const D=async()=>{try{const Q=await s.getSearchConfig();Q&&i({remote_url2local_images:Q.remote_url2local_images??!1,search:{source:Q.search?.source??[],extensions:Q.search?.extensions??[],search_list:Q.search?.search_list??[]},today_fetch:Q.today_fetch??!1})}catch(Q){console.error("Error fetching search config:",Q)}},I=async()=>{C(!0);try{n.today_fetch?(await s.clearSearchFolder(),u(r(""))):(await s.initSearchData(),u(r(""))),o(!0),await D()}catch{u(r("")),o(!0)}finally{C(!1)}},k=async()=>{try{const Q=await s.getTodayFiles();y(Q||[]),h(!0)}catch(Q){console.error("Error fetching results:",Q),u(r("")),o(!0)}},P=async()=>{const Q={...n,search:{...n.search,source:n.search.source.map(ie=>({...ie,urls:ie.urls.filter(ne=>ne.trim()),include_files:ie.include_files.filter(ne=>ne.trim())}))}};try{await s.updateSearchConfig(Q),i(Q),u(r("")),o(!0)}catch(ie){console.error("Error saving search config:",ie),u(r("")),o(!0)}},N=Q=>{i(ie=>({...ie,remote_url2local_images:Q.target.checked}))},U=[{value:"github-home-page",label:r("GitHub ")},{value:"raw-source",label:r("")},{value:"github-sub-page",label:r("GitHub ")}],B=n.search.source.length<U.length,A=()=>{if(!B)return;const Q=n.search.source.map(ne=>ne.parse_type),ie=U.find(ne=>!Q.includes(ne.value))?.value||"raw-source";i(ne=>({...ne,search:{...ne.search,source:[...ne.search.source,{urls:[],include_files:[],parse_type:ie}]}}))},$=Q=>{i(ie=>({...ie,search:{...ie.search,source:ie.search.source.filter((ne,ue)=>ue!==Q)}}))},W=(Q,ie,ne)=>{i(ue=>{const se=[...ue.search.source],ae={...se[Q]};return ae[ie]=ne,se[Q]=ae,{...ue,search:{...ue.search,source:se}}})},V=Q=>{if(!Q)return null;try{return new URL(Q),null}catch{return r("")||"Invalid URL"}};return O.jsxs(wt,{style:{padding:"0 20px",width:"100%",maxWidth:"1000px"},children:[O.jsx(_f,{open:a,autoHideDuration:3e3,onClose:()=>o(!1),message:l}),O.jsx(wt,{sx:{mb:3,p:2,bgcolor:"#f5f5f5",borderRadius:1,display:"flex",justifyContent:"space-between",alignItems:"center"},children:O.jsx(wt,{children:n.today_fetch?O.jsxs(wt,{sx:{display:"flex",alignItems:"center",gap:2},children:[_?O.jsx(Gp,{size:24}):O.jsx(Dr,{variant:"contained",color:"warning",onClick:I,children:r("")}),O.jsx(Dr,{variant:"outlined",onClick:k,children:r("")})]}):_?O.jsx(Gp,{size:24}):O.jsx(Dr,{variant:"contained",onClick:I,children:r("")})})}),e?O.jsx(wt,{sx:{mb:3},children:O.jsx(co,{control:O.jsx(Zoe,{checked:n.remote_url2local_images,onChange:N}),label:r("")})}):null,O.jsx(kr,{variant:"h6",gutterBottom:!0,children:r("")}),O.jsx(wt,{sx:{mb:3},children:O.jsx(i5,{row:!0,children:E.map(Q=>O.jsx(co,{control:O.jsx(wp,{checked:n.search.extensions.includes(Q),onChange:ie=>{const ne=ie.target.checked;i(ue=>{const se=ne?[...ue.search.extensions,Q]:ue.search.extensions.filter(ae=>ae!==Q);return{...ue,search:{...ue.search,extensions:se}}})}}),label:Q},Q))})}),O.jsxs(wt,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2},children:[O.jsx(kr,{variant:"h6",children:r("")}),B&&O.jsx(Dr,{variant:"contained",startIcon:O.jsx(fv,{}),onClick:A,children:r("")})]}),O.jsx(wt,{sx:{display:"flex",flexDirection:"column",gap:2,mb:4},children:n.search.source.map((Q,ie)=>O.jsx(Pc,{variant:"outlined",children:O.jsxs(Bd,{children:[O.jsxs(wt,{sx:{display:"flex",justifyContent:"space-between",mb:2},children:[O.jsxs(Ur,{size:"small",sx:{width:200},children:[O.jsx(Fu,{children:r("")}),O.jsx(Bu,{value:Q.parse_type,label:r(""),onChange:ne=>W(ie,"parse_type",ne.target.value),children:U.map(ne=>{const se=n.search.source.some(ae=>ae.parse_type===ne.value)&&ne.value!==Q.parse_type;return O.jsx(Fc,{value:ne.value,disabled:se,children:ne.label},ne.value)})})]}),O.jsx(th,{onClick:()=>$(ie),color:"error",children:O.jsx(Vd,{})})]}),O.jsx(SF,{label:r("URL"),values:Q.urls||[],placeholder:"http://...",onChange:ne=>W(ie,"urls",ne),t:r,validation:V}),Q.parse_type!=="raw-source"&&O.jsx(SF,{label:r(""),values:Q.include_files||[],placeholder:"xxx.m3u8",onChange:ne=>W(ie,"include_files",ne),t:r})]})},ie))}),O.jsx(wt,{sx:{display:"flex",justifyContent:"flex-end",pb:4},children:O.jsx(Dr,{variant:"contained",color:"primary",onClick:P,size:"large",children:r("")})}),O.jsxs(Ml,{open:c,onClose:()=>h(!1),maxWidth:"md",fullWidth:!0,children:[O.jsx(Sm,{children:r("")}),O.jsxs(Pk,{children:[O.jsx(y5,{value:f,onChange:(Q,ie)=>g(ie),sx:{borderBottom:1,borderColor:"divider"},variant:"scrollable",scrollButtons:"auto",children:v.map((Q,ie)=>O.jsx(h2,{label:Q.name||Q.label||`Result ${ie+1}`},ie))}),O.jsx(wt,{sx:{p:2,height:400,overflow:"auto",whiteSpace:"pre-wrap"},children:v[f]?.content||r("")})]})]})]})}function lSe(){const{t:r}=Ii(),[e,t]=M.useState([]),[n,i]=M.useState([]),[s]=M.useState(()=>new Iv),[a,o]=M.useState(!1),[l,u]=M.useState("");M.useEffect(()=>{c()},[]);const c=async()=>{try{const y=await s.getReplaceList();t(y)}catch(y){console.error("Error fetching data:",y)}};M.useEffect(()=>{if(!e){i([]);return}Array.isArray(e)?i(e.map(y=>({key:y.key??"",value:y.value??""}))):i(typeof e=="object"?Object.entries(e).map(([y,_])=>({key:y,value:_??""})):[])},[e]);const h=(y,_,C)=>{i(E=>{const D=E.map(I=>({...I}));return D[y][_]=C,D})},f=()=>{i(y=>[...y,{key:"",value:""}])},g=y=>{i(_=>_.filter((C,E)=>E!==y))},v=async()=>{const y={};n.forEach(C=>{C.key!==void 0&&C.key!==""&&(y[C.key]=C.value??"")}),t(y);let _={content:JSON.stringify(y)};try{await s.updateReplaceList(_),u(r("")),o(!0)}catch(C){console.error("Error saving replace list:",C),u(r("")),o(!0)}};return O.jsxs(wt,{style:{padding:"0 20px",width:"800px"},children:[O.jsx(_f,{open:a,autoHideDuration:3e3,onClose:()=>o(!1),message:l}),O.jsxs("div",{style:{padding:"0 0 10px",fontSize:"12px",color:"#666"},children:[O.jsx("p",{style:{padding:"0",margin:"0"},children:r("")}),O.jsx("p",{style:{padding:"0",margin:"0"},children:r("[HD][HD]")})]}),O.jsx("div",{style:{padding:"10px 0"},children:O.jsx(Dr,{variant:"contained",onClick:f,children:r("")})}),O.jsx("div",{style:{padding:"10px 0"},children:O.jsxs("div",{style:{overflow:"hidden"},children:[O.jsx("div",{style:{maxHeight:"calc(100vh - 200px)",overflow:"auto",padding:"12px 0"},children:n.length===0?O.jsx("div",{style:{padding:"8px 0",color:"#666"},children:r("")}):n.map((y,_)=>O.jsxs("div",{style:{display:"flex",gap:8,alignItems:"center",marginBottom:8},children:[O.jsx(jn,{label:r(""),value:y.key,onChange:C=>h(_,"key",C.target.value),size:"small",style:{width:220}}),O.jsx(jn,{label:r(""),value:y.value,onChange:C=>h(_,"value",C.target.value),size:"small",style:{flex:1}}),O.jsx(th,{"aria-label":"delete",onClick:()=>g(_),children:O.jsx(Vd,{})})]},_))}),O.jsxs("div",{style:{display:"flex",gap:8,padding:"12px 0",alignItems:"center"},children:[O.jsx("div",{style:{flex:1}}),O.jsx(Dr,{variant:"contained",color:"success",onClick:v,children:r("")})]})]})})]})}function uSe(){const{t:r}=Ii(),[e,t]=M.useState({favorite_rules:[]}),n=new Iv,[i,s]=M.useState(!1),[a,o]=M.useState(""),[l,u]=M.useState(""),[c,h]=M.useState("include"),[f,g]=M.useState(!1),[v,y]=M.useState(""),[_,C]=M.useState("");M.useEffect(()=>{E()},[]);const E=async()=>{try{const $=await n.getFavourite();if($){const W=[];($.like||[]).forEach(V=>W.push({name:V,match_mode:"include"})),($.equal||[]).forEach(V=>W.push({name:V,match_mode:"exact"})),t(V=>({...V,favorite_rules:W,all_channel_url:$.all_channel_url,liked_channel_url:$.liked_channel_url,checked_liked_channel_url:$.checked_liked_channel_url}))}}catch($){console.error("Error fetching config:",$)}},D=()=>{if(!l.trim()){o(r("")),s(!0);return}t($=>({...$,favorite_rules:[{name:l,match_mode:c},...$.favorite_rules]})),u("")},I=$=>{t(W=>({...W,favorite_rules:W.favorite_rules.filter((V,Q)=>Q!==$)}))},k=async($,W)=>{try{const V=await n.openUrl(W);y($),C(typeof V=="string"?V:JSON.stringify(V,null,2)),g(!0)}catch(V){console.error("Error opening file:",V),o(r("")),s(!0)}},P=async()=>{const $=[],W=[];e.favorite_rules.forEach(V=>{!V.name||!V.name.trim()||(V.match_mode==="include"?$.push(V.name.trim()):V.match_mode==="exact"&&W.push(V.name.trim()))});try{await n.saveFavourite({like:$,equal:W}),o(r("")),s(!0)}catch(V){console.error("Error saving config:",V),o(r("")),s(!0)}},N=e.favorite_rules.map(($,W)=>({...$,originalIndex:W})),U=N.filter($=>$.match_mode==="include"),B=N.filter($=>$.match_mode==="exact"),A=($,W)=>O.jsxs(wt,{sx:{mb:4},children:[O.jsxs(kr,{variant:"subtitle1",gutterBottom:!0,sx:{fontWeight:"bold",borderLeft:"4px solid #1976d2",pl:1},children:[W," (",$.length,")"]}),$.length===0?O.jsx(kr,{variant:"body2",color:"textSecondary",sx:{pl:2},children:r("")}):O.jsx(wt,{sx:{display:"flex",flexDirection:"column",gap:1},children:$.map(V=>O.jsx(Pc,{variant:"outlined",children:O.jsxs(Bd,{sx:{display:"flex",gap:2,alignItems:"center",p:"8px 16px !important"},children:[O.jsx(kr,{sx:{flexGrow:1},children:V.name}),O.jsx(th,{onClick:()=>I(V.originalIndex),color:"error",size:"small",children:O.jsx(Vd,{})})]})},V.originalIndex))})]});return O.jsxs(wt,{style:{padding:"0 20px",width:"100%",maxWidth:"800px"},children:[O.jsx(_f,{open:i,autoHideDuration:3e3,onClose:()=>s(!1),message:a}),O.jsxs(wt,{sx:{display:"flex",flexDirection:"column",gap:1,mb:4},children:[O.jsxs(wt,{sx:{display:"flex",gap:1,alignItems:"center"},children:[O.jsxs(kr,{children:[r(""),""]}),O.jsx(kr,{component:"span",sx:{cursor:"pointer",color:"primary.main",textDecoration:"underline"},onClick:()=>k(r(""),window.document.location.origin+e.all_channel_url),children:window.document.location.origin+e.all_channel_url||r("")})]}),O.jsxs(wt,{sx:{display:"flex",gap:1,alignItems:"center"},children:[O.jsxs(kr,{children:[r(""),""]}),O.jsx(kr,{component:"span",sx:{cursor:"pointer",color:"primary.main",textDecoration:"underline"},onClick:()=>k(r(""),window.document.location.origin+e.liked_channel_url),children:window.document.location.origin+e.liked_channel_url||r("")})]}),O.jsx(wt,{sx:{fontSize:"12px",color:"text.secondary"},children:r("")}),O.jsx(wt,{sx:{fontSize:"12px",color:"text.secondary"},children:r("")}),O.jsxs(wt,{sx:{fontSize:"12px",color:"text.secondary"},children:[r(""),""]})]}),O.jsxs(wt,{sx:{display:"flex",gap:2,alignItems:"center",mb:4,p:2,bgcolor:"#f5f5f5",borderRadius:1},children:[O.jsx(jn,{label:r(""),value:l,onChange:$=>u($.target.value),size:"small",sx:{flexGrow:1,bgcolor:"white"},placeholder:r("")}),O.jsxs(Ur,{size:"small",sx:{minWidth:150,bgcolor:"white"},children:[O.jsx(Fu,{children:r("")}),O.jsxs(Bu,{value:c,label:r(""),onChange:$=>h($.target.value),children:[O.jsx(Fc,{value:"include",children:r("")}),O.jsx(Fc,{value:"exact",children:r("")})]})]}),O.jsx(Dr,{variant:"contained",color:"success",startIcon:O.jsx(fv,{}),onClick:D,disabled:!l.trim(),children:r("")})]}),A(U,r("")),A(B,r("")),O.jsx(wt,{sx:{display:"flex",justifyContent:"flex-end",pb:4},children:O.jsx(Dr,{variant:"contained",color:"primary",onClick:P,size:"large",children:r("")})}),O.jsxs(Ml,{open:f,onClose:()=>g(!1),maxWidth:"lg",fullWidth:!0,children:[O.jsx(Sm,{children:v}),O.jsx(Pk,{children:O.jsx("pre",{style:{whiteSpace:"pre-wrap",wordBreak:"break-all",maxHeight:"60vh",overflow:"auto"},children:_})})]})]})}const cSe=mr(O.jsx("path",{d:"M19.35 10.04C18.67 6.59 15.64 4 12 4 9.11 4 6.6 5.64 5.35 8.04 2.34 8.36 0 10.91 0 14c0 3.31 2.69 6 6 6h13c2.76 0 5-2.24 5-5 0-2.64-2.05-4.78-4.65-4.96M14 13v4h-4v-4H7l5-5 5 5z"})),dSe=()=>{const{t:r}=Ii(),[e]=M.useState(()=>new Iv),[t,n]=M.useState({}),[i,s]=M.useState(""),[a,o]=M.useState({open:!1,text:"",type:"info"}),[l,u]=M.useState(!1);M.useEffect(()=>{c()},[]);const c=async()=>{try{const v=await e.getChannelLogos();n(v||{})}catch(v){console.error("Error fetching logos:",v)}},h=async v=>{const y=Array.from(v.target.files);if(y.length===0)return;u(!0);const _=new FormData;y.forEach(C=>{_.append("files",C)});try{await e.uploadLogos(_),await c(),o({open:!0,text:r(""),type:"success"})}catch(C){console.error("Upload failed",C),o({open:!0,text:r(""),type:"error"})}finally{u(!1),v.target.value=""}},f=()=>{o({...a,open:!1})},g=Object.entries(t).filter(([v])=>v.toLowerCase().includes(i.toLowerCase()));return O.jsxs(wt,{sx:{width:"100%",p:2},children:[O.jsx(kr,{variant:"h5",sx:{mb:3},children:r("")}),O.jsx(Pc,{sx:{mb:3,p:2},children:O.jsxs(wt,{sx:{display:"flex",flexDirection:"column",gap:2,alignItems:"flex-start"},children:[O.jsx(kr,{variant:"body2",color:"textSecondary",children:r("")}),O.jsx(wt,{sx:{display:"flex",alignItems:"center",gap:2},children:O.jsxs(Dr,{component:"label",variant:"contained",startIcon:l?O.jsx(Gp,{size:20,color:"inherit"}):O.jsx(cSe,{}),disabled:l,children:[r(l?"...":""),O.jsx("input",{type:"file",hidden:!0,accept:"image/*",multiple:!0,onChange:h})]})})]})}),O.jsx(wt,{sx:{mb:2},children:O.jsx(jn,{fullWidth:!0,placeholder:r(""),value:i,onChange:v=>s(v.target.value),InputProps:{startAdornment:O.jsx(d2,{position:"start",children:O.jsx(kk,{})})},size:"small"})}),O.jsxs(Ko,{container:!0,spacing:2,children:[g.map(([v,y])=>O.jsx(Ko,{item:!0,xs:6,sm:4,md:3,lg:2,children:O.jsxs(Pc,{sx:{position:"relative",height:"100%",display:"flex",flexDirection:"column"},children:[O.jsx(wt,{sx:{p:1,display:"flex",justifyContent:"center",bgcolor:"#f5f5f5",height:100,alignItems:"center"},children:O.jsx(wt,{component:"img",src:y,alt:v,sx:{maxWidth:"100%",maxHeight:"100%",objectFit:"contain"},onError:_=>{_.target.src="https://via.placeholder.com/100?text=No+Img"}})}),O.jsx(Bd,{sx:{p:1.5,flexGrow:1,display:"flex",justifyContent:"center",alignItems:"center"},children:O.jsx(_oe,{title:v,children:O.jsx(kr,{variant:"subtitle2",noWrap:!0,sx:{maxWidth:"100%"},children:v})})})]})},v)),g.length===0&&O.jsx(Ko,{item:!0,xs:12,children:O.jsx(kr,{align:"center",color:"textSecondary",sx:{py:4},children:r("")})})]}),O.jsx(_f,{open:a.open,autoHideDuration:3e3,onClose:f,anchorOrigin:{vertical:"top",horizontal:"center"},children:O.jsx(cse,{onClose:f,severity:a.type,sx:{width:"100%"},children:a.text})})]})};function hSe(){for(var r=arguments.length,e=new Array(r),t=0;t<r;t++)e[t]=arguments[t];return M.useMemo(()=>n=>{e.forEach(i=>i(n))},e)}const oT=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function zm(r){const e=Object.prototype.toString.call(r);return e==="[object Window]"||e==="[object global]"}function _D(r){return"nodeType"in r}function ha(r){var e,t;return r?zm(r)?r:_D(r)&&(e=(t=r.ownerDocument)==null?void 0:t.defaultView)!=null?e:window:window}function bD(r){const{Document:e}=ha(r);return r instanceof e}function Pv(r){return zm(r)?!1:r instanceof ha(r).HTMLElement}function P9(r){return r instanceof ha(r).SVGElement}function Hm(r){return r?zm(r)?r.document:_D(r)?bD(r)?r:Pv(r)||P9(r)?r.ownerDocument:document:document:document}const al=oT?M.useLayoutEffect:M.useEffect;function lT(r){const e=M.useRef(r);return al(()=>{e.current=r}),M.useCallback(function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return e.current==null?void 0:e.current(...n)},[])}function fSe(){const r=M.useRef(null),e=M.useCallback((n,i)=>{r.current=setInterval(n,i)},[]),t=M.useCallback(()=>{r.current!==null&&(clearInterval(r.current),r.current=null)},[]);return[e,t]}function Wg(r,e){e===void 0&&(e=[r]);const t=M.useRef(r);return al(()=>{t.current!==r&&(t.current=r)},e),t}function Rv(r,e){const t=M.useRef();return M.useMemo(()=>{const n=r(t.current);return t.current=n,n},[...e])}function Bb(r){const e=lT(r),t=M.useRef(null),n=M.useCallback(i=>{i!==t.current&&e?.(i,t.current),t.current=i},[]);return[t,n]}function Nb(r){const e=M.useRef();return M.useEffect(()=>{e.current=r},[r]),e.current}let mw={};function Lv(r,e){return M.useMemo(()=>{if(e)return e;const t=mw[r]==null?0:mw[r]+1;return mw[r]=t,r+"-"+t},[r,e])}function R9(r){return function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return n.reduce((s,a)=>{const o=Object.entries(a);for(const[l,u]of o){const c=s[l];c!=null&&(s[l]=c+r*u)}return s},{...e})}}const $p=R9(1),qg=R9(-1);function pSe(r){return"clientX"in r&&"clientY"in r}function uT(r){if(!r)return!1;const{KeyboardEvent:e}=ha(r.target);return e&&r instanceof e}function mSe(r){if(!r)return!1;const{TouchEvent:e}=ha(r.target);return e&&r instanceof e}function Ub(r){if(mSe(r)){if(r.touches&&r.touches.length){const{clientX:e,clientY:t}=r.touches[0];return{x:e,y:t}}else if(r.changedTouches&&r.changedTouches.length){const{clientX:e,clientY:t}=r.changedTouches[0];return{x:e,y:t}}}return pSe(r)?{x:r.clientX,y:r.clientY}:null}const Yd=Object.freeze({Translate:{toString(r){if(!r)return;const{x:e,y:t}=r;return"translate3d("+(e?Math.round(e):0)+"px, "+(t?Math.round(t):0)+"px, 0)"}},Scale:{toString(r){if(!r)return;const{scaleX:e,scaleY:t}=r;return"scaleX("+e+") scaleY("+t+")"}},Transform:{toString(r){if(r)return[Yd.Translate.toString(r),Yd.Scale.toString(r)].join(" ")}},Transition:{toString(r){let{property:e,duration:t,easing:n}=r;return e+" "+t+"ms "+n}}}),TF="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function gSe(r){return r.matches(TF)?r:r.querySelector(TF)}const vSe={display:"none"};function ySe(r){let{id:e,value:t}=r;return Qr.createElement("div",{id:e,style:vSe},t)}function xSe(r){let{id:e,announcement:t,ariaLiveType:n="assertive"}=r;const i={position:"fixed",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return Qr.createElement("div",{id:e,style:i,role:"status","aria-live":n,"aria-atomic":!0},t)}function _Se(){const[r,e]=M.useState("");return{announce:M.useCallback(n=>{n!=null&&e(n)},[]),announcement:r}}const L9=M.createContext(null);function bSe(r){const e=M.useContext(L9);M.useEffect(()=>{if(!e)throw new Error("useDndMonitor must be used within a children of <DndContext>");return e(r)},[r,e])}function SSe(){const[r]=M.useState(()=>new Set),e=M.useCallback(n=>(r.add(n),()=>r.delete(n)),[r]);return[M.useCallback(n=>{let{type:i,event:s}=n;r.forEach(a=>{var o;return(o=a[i])==null?void 0:o.call(a,s)})},[r]),e]}const TSe={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},CSe={onDragStart(r){let{active:e}=r;return"Picked up draggable item "+e.id+"."},onDragOver(r){let{active:e,over:t}=r;return t?"Draggable item "+e.id+" was moved over droppable area "+t.id+".":"Draggable item "+e.id+" is no longer over a droppable area."},onDragEnd(r){let{active:e,over:t}=r;return t?"Draggable item "+e.id+" was dropped over droppable area "+t.id:"Draggable item "+e.id+" was dropped."},onDragCancel(r){let{active:e}=r;return"Dragging was cancelled. Draggable item "+e.id+" was dropped."}};function wSe(r){let{announcements:e=CSe,container:t,hiddenTextDescribedById:n,screenReaderInstructions:i=TSe}=r;const{announce:s,announcement:a}=_Se(),o=Lv("DndLiveRegion"),[l,u]=M.useState(!1);if(M.useEffect(()=>{u(!0)},[]),bSe(M.useMemo(()=>({onDragStart(h){let{active:f}=h;s(e.onDragStart({active:f}))},onDragMove(h){let{active:f,over:g}=h;e.onDragMove&&s(e.onDragMove({active:f,over:g}))},onDragOver(h){let{active:f,over:g}=h;s(e.onDragOver({active:f,over:g}))},onDragEnd(h){let{active:f,over:g}=h;s(e.onDragEnd({active:f,over:g}))},onDragCancel(h){let{active:f,over:g}=h;s(e.onDragCancel({active:f,over:g}))}}),[s,e])),!l)return null;const c=Qr.createElement(Qr.Fragment,null,Qr.createElement(ySe,{id:n,value:i.draggable}),Qr.createElement(xSe,{id:o,announcement:a}));return t?Go.createPortal(c,t):c}var Ui;(function(r){r.DragStart="dragStart",r.DragMove="dragMove",r.DragEnd="dragEnd",r.DragCancel="dragCancel",r.DragOver="dragOver",r.RegisterDroppable="registerDroppable",r.SetDroppableDisabled="setDroppableDisabled",r.UnregisterDroppable="unregisterDroppable"})(Ui||(Ui={}));function $b(){}function CF(r,e){return M.useMemo(()=>({sensor:r,options:e??{}}),[r,e])}function ESe(){for(var r=arguments.length,e=new Array(r),t=0;t<r;t++)e[t]=arguments[t];return M.useMemo(()=>[...e].filter(n=>n!=null),[...e])}const Bl=Object.freeze({x:0,y:0});function kSe(r,e){return Math.sqrt(Math.pow(r.x-e.x,2)+Math.pow(r.y-e.y,2))}function ASe(r,e){const t=Ub(r);if(!t)return"0 0";const n={x:(t.x-e.left)/e.width*100,y:(t.y-e.top)/e.height*100};return n.x+"% "+n.y+"%"}function DSe(r,e){let{data:{value:t}}=r,{data:{value:n}}=e;return t-n}function ISe(r,e){let{data:{value:t}}=r,{data:{value:n}}=e;return n-t}function wF(r){let{left:e,top:t,height:n,width:i}=r;return[{x:e,y:t},{x:e+i,y:t},{x:e,y:t+n},{x:e+i,y:t+n}]}function O9(r,e){if(!r||r.length===0)return null;const[t]=r;return t[e]}const PSe=r=>{let{collisionRect:e,droppableRects:t,droppableContainers:n}=r;const i=wF(e),s=[];for(const a of n){const{id:o}=a,l=t.get(o);if(l){const u=wF(l),c=i.reduce((f,g,v)=>f+kSe(u[v],g),0),h=Number((c/4).toFixed(4));s.push({id:o,data:{droppableContainer:a,value:h}})}}return s.sort(DSe)};function RSe(r,e){const t=Math.max(e.top,r.top),n=Math.max(e.left,r.left),i=Math.min(e.left+e.width,r.left+r.width),s=Math.min(e.top+e.height,r.top+r.height),a=i-n,o=s-t;if(n<i&&t<s){const l=e.width*e.height,u=r.width*r.height,c=a*o,h=c/(l+u-c);return Number(h.toFixed(4))}return 0}const LSe=r=>{let{collisionRect:e,droppableRects:t,droppableContainers:n}=r;const i=[];for(const s of n){const{id:a}=s,o=t.get(a);if(o){const l=RSe(o,e);l>0&&i.push({id:a,data:{droppableContainer:s,value:l}})}}return i.sort(ISe)};function OSe(r,e,t){return{...r,scaleX:e&&t?e.width/t.width:1,scaleY:e&&t?e.height/t.height:1}}function M9(r,e){return r&&e?{x:r.left-e.left,y:r.top-e.top}:Bl}function MSe(r){return function(t){for(var n=arguments.length,i=new Array(n>1?n-1:0),s=1;s<n;s++)i[s-1]=arguments[s];return i.reduce((a,o)=>({...a,top:a.top+r*o.y,bottom:a.bottom+r*o.y,left:a.left+r*o.x,right:a.right+r*o.x}),{...t})}}const FSe=MSe(1);function F9(r){if(r.startsWith("matrix3d(")){const e=r.slice(9,-1).split(/, /);return{x:+e[12],y:+e[13],scaleX:+e[0],scaleY:+e[5]}}else if(r.startsWith("matrix(")){const e=r.slice(7,-1).split(/, /);return{x:+e[4],y:+e[5],scaleX:+e[0],scaleY:+e[3]}}return null}function BSe(r,e,t){const n=F9(e);if(!n)return r;const{scaleX:i,scaleY:s,x:a,y:o}=n,l=r.left-a-(1-i)*parseFloat(t),u=r.top-o-(1-s)*parseFloat(t.slice(t.indexOf(" ")+1)),c=i?r.width/i:r.width,h=s?r.height/s:r.height;return{width:c,height:h,top:u,right:l+c,bottom:u+h,left:l}}const NSe={ignoreTransform:!1};function Vm(r,e){e===void 0&&(e=NSe);let t=r.getBoundingClientRect();if(e.ignoreTransform){const{transform:u,transformOrigin:c}=ha(r).getComputedStyle(r);u&&(t=BSe(t,u,c))}const{top:n,left:i,width:s,height:a,bottom:o,right:l}=t;return{top:n,left:i,width:s,height:a,bottom:o,right:l}}function EF(r){return Vm(r,{ignoreTransform:!0})}function USe(r){const e=r.innerWidth,t=r.innerHeight;return{top:0,left:0,right:e,bottom:t,width:e,height:t}}function $Se(r,e){return e===void 0&&(e=ha(r).getComputedStyle(r)),e.position==="fixed"}function jSe(r,e){e===void 0&&(e=ha(r).getComputedStyle(r));const t=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(i=>{const s=e[i];return typeof s=="string"?t.test(s):!1})}function cT(r,e){const t=[];function n(i){if(e!=null&&t.length>=e||!i)return t;if(bD(i)&&i.scrollingElement!=null&&!t.includes(i.scrollingElement))return t.push(i.scrollingElement),t;if(!Pv(i)||P9(i)||t.includes(i))return t;const s=ha(r).getComputedStyle(i);return i!==r&&jSe(i,s)&&t.push(i),$Se(i,s)?t:n(i.parentNode)}return r?n(r):t}function B9(r){const[e]=cT(r,1);return e??null}function gw(r){return!oT||!r?null:zm(r)?r:_D(r)?bD(r)||r===Hm(r).scrollingElement?window:Pv(r)?r:null:null}function N9(r){return zm(r)?r.scrollX:r.scrollLeft}function U9(r){return zm(r)?r.scrollY:r.scrollTop}function TE(r){return{x:N9(r),y:U9(r)}}var ts;(function(r){r[r.Forward=1]="Forward",r[r.Backward=-1]="Backward"})(ts||(ts={}));function $9(r){return!oT||!r?!1:r===document.scrollingElement}function j9(r){const e={x:0,y:0},t=$9(r)?{height:window.innerHeight,width:window.innerWidth}:{height:r.clientHeight,width:r.clientWidth},n={x:r.scrollWidth-t.width,y:r.scrollHeight-t.height},i=r.scrollTop<=e.y,s=r.scrollLeft<=e.x,a=r.scrollTop>=n.y,o=r.scrollLeft>=n.x;return{isTop:i,isLeft:s,isBottom:a,isRight:o,maxScroll:n,minScroll:e}}const zSe={x:.2,y:.2};function HSe(r,e,t,n,i){let{top:s,left:a,right:o,bottom:l}=t;n===void 0&&(n=10),i===void 0&&(i=zSe);const{isTop:u,isBottom:c,isLeft:h,isRight:f}=j9(r),g={x:0,y:0},v={x:0,y:0},y={height:e.height*i.y,width:e.width*i.x};return!u&&s<=e.top+y.height?(g.y=ts.Backward,v.y=n*Math.abs((e.top+y.height-s)/y.height)):!c&&l>=e.bottom-y.height&&(g.y=ts.Forward,v.y=n*Math.abs((e.bottom-y.height-l)/y.height)),!f&&o>=e.right-y.width?(g.x=ts.Forward,v.x=n*Math.abs((e.right-y.width-o)/y.width)):!h&&a<=e.left+y.width&&(g.x=ts.Backward,v.x=n*Math.abs((e.left+y.width-a)/y.width)),{direction:g,speed:v}}function VSe(r){if(r===document.scrollingElement){const{innerWidth:s,innerHeight:a}=window;return{top:0,left:0,right:s,bottom:a,width:s,height:a}}const{top:e,left:t,right:n,bottom:i}=r.getBoundingClientRect();return{top:e,left:t,right:n,bottom:i,width:r.clientWidth,height:r.clientHeight}}function z9(r){return r.reduce((e,t)=>$p(e,TE(t)),Bl)}function WSe(r){return r.reduce((e,t)=>e+N9(t),0)}function qSe(r){return r.reduce((e,t)=>e+U9(t),0)}function H9(r,e){if(e===void 0&&(e=Vm),!r)return;const{top:t,left:n,bottom:i,right:s}=e(r);B9(r)&&(i<=0||s<=0||t>=window.innerHeight||n>=window.innerWidth)&&r.scrollIntoView({block:"center",inline:"center"})}const GSe=[["x",["left","right"],WSe],["y",["top","bottom"],qSe]];class SD{constructor(e,t){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const n=cT(t),i=z9(n);this.rect={...e},this.width=e.width,this.height=e.height;for(const[s,a,o]of GSe)for(const l of a)Object.defineProperty(this,l,{get:()=>{const u=o(n),c=i[s]-u;return this.rect[l]+c},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class gg{constructor(e){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(t=>{var n;return(n=this.target)==null?void 0:n.removeEventListener(...t)})},this.target=e}add(e,t,n){var i;(i=this.target)==null||i.addEventListener(e,t,n),this.listeners.push([e,t,n])}}function KSe(r){const{EventTarget:e}=ha(r);return r instanceof e?r:Hm(r)}function vw(r,e){const t=Math.abs(r.x),n=Math.abs(r.y);return typeof e=="number"?Math.sqrt(t**2+n**2)>e:"x"in e&&"y"in e?t>e.x&&n>e.y:"x"in e?t>e.x:"y"in e?n>e.y:!1}var Vo;(function(r){r.Click="click",r.DragStart="dragstart",r.Keydown="keydown",r.ContextMenu="contextmenu",r.Resize="resize",r.SelectionChange="selectionchange",r.VisibilityChange="visibilitychange"})(Vo||(Vo={}));function kF(r){r.preventDefault()}function XSe(r){r.stopPropagation()}var hn;(function(r){r.Space="Space",r.Down="ArrowDown",r.Right="ArrowRight",r.Left="ArrowLeft",r.Up="ArrowUp",r.Esc="Escape",r.Enter="Enter"})(hn||(hn={}));const V9={start:[hn.Space,hn.Enter],cancel:[hn.Esc],end:[hn.Space,hn.Enter]},YSe=(r,e)=>{let{currentCoordinates:t}=e;switch(r.code){case hn.Right:return{...t,x:t.x+25};case hn.Left:return{...t,x:t.x-25};case hn.Down:return{...t,y:t.y+25};case hn.Up:return{...t,y:t.y-25}}};class TD{constructor(e){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=e;const{event:{target:t}}=e;this.props=e,this.listeners=new gg(Hm(t)),this.windowListeners=new gg(ha(t)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(Vo.Resize,this.handleCancel),this.windowListeners.add(Vo.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(Vo.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:e,onStart:t}=this.props,n=e.node.current;n&&H9(n),t(Bl)}handleKeyDown(e){if(uT(e)){const{active:t,context:n,options:i}=this.props,{keyboardCodes:s=V9,coordinateGetter:a=YSe,scrollBehavior:o="smooth"}=i,{code:l}=e;if(s.end.includes(l)){this.handleEnd(e);return}if(s.cancel.includes(l)){this.handleCancel(e);return}const{collisionRect:u}=n.current,c=u?{x:u.left,y:u.top}:Bl;this.referenceCoordinates||(this.referenceCoordinates=c);const h=a(e,{active:t,context:n.current,currentCoordinates:c});if(h){const f=qg(h,c),g={x:0,y:0},{scrollableAncestors:v}=n.current;for(const y of v){const _=e.code,{isTop:C,isRight:E,isLeft:D,isBottom:I,maxScroll:k,minScroll:P}=j9(y),N=VSe(y),U={x:Math.min(_===hn.Right?N.right-N.width/2:N.right,Math.max(_===hn.Right?N.left:N.left+N.width/2,h.x)),y:Math.min(_===hn.Down?N.bottom-N.height/2:N.bottom,Math.max(_===hn.Down?N.top:N.top+N.height/2,h.y))},B=_===hn.Right&&!E||_===hn.Left&&!D,A=_===hn.Down&&!I||_===hn.Up&&!C;if(B&&U.x!==h.x){const $=y.scrollLeft+f.x,W=_===hn.Right&&$<=k.x||_===hn.Left&&$>=P.x;if(W&&!f.y){y.scrollTo({left:$,behavior:o});return}W?g.x=y.scrollLeft-$:g.x=_===hn.Right?y.scrollLeft-k.x:y.scrollLeft-P.x,g.x&&y.scrollBy({left:-g.x,behavior:o});break}else if(A&&U.y!==h.y){const $=y.scrollTop+f.y,W=_===hn.Down&&$<=k.y||_===hn.Up&&$>=P.y;if(W&&!f.x){y.scrollTo({top:$,behavior:o});return}W?g.y=y.scrollTop-$:g.y=_===hn.Down?y.scrollTop-k.y:y.scrollTop-P.y,g.y&&y.scrollBy({top:-g.y,behavior:o});break}}this.handleMove(e,$p(qg(h,this.referenceCoordinates),g))}}}handleMove(e,t){const{onMove:n}=this.props;e.preventDefault(),n(t)}handleEnd(e){const{onEnd:t}=this.props;e.preventDefault(),this.detach(),t()}handleCancel(e){const{onCancel:t}=this.props;e.preventDefault(),this.detach(),t()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}TD.activators=[{eventName:"onKeyDown",handler:(r,e,t)=>{let{keyboardCodes:n=V9,onActivation:i}=e,{active:s}=t;const{code:a}=r.nativeEvent;if(n.start.includes(a)){const o=s.activatorNode.current;return o&&r.target!==o?!1:(r.preventDefault(),i?.({event:r.nativeEvent}),!0)}return!1}}];function AF(r){return!!(r&&"distance"in r)}function DF(r){return!!(r&&"delay"in r)}class CD{constructor(e,t,n){var i;n===void 0&&(n=KSe(e.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=e,this.events=t;const{event:s}=e,{target:a}=s;this.props=e,this.events=t,this.document=Hm(a),this.documentListeners=new gg(this.document),this.listeners=new gg(n),this.windowListeners=new gg(ha(a)),this.initialCoordinates=(i=Ub(s))!=null?i:Bl,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:e,props:{options:{activationConstraint:t,bypassActivationConstraint:n}}}=this;if(this.listeners.add(e.move.name,this.handleMove,{passive:!1}),this.listeners.add(e.end.name,this.handleEnd),this.windowListeners.add(Vo.Resize,this.handleCancel),this.windowListeners.add(Vo.DragStart,kF),this.windowListeners.add(Vo.VisibilityChange,this.handleCancel),this.windowListeners.add(Vo.ContextMenu,kF),this.documentListeners.add(Vo.Keydown,this.handleKeydown),t){if(n!=null&&n({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(DF(t)){this.timeoutId=setTimeout(this.handleStart,t.delay);return}if(AF(t))return}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handleStart(){const{initialCoordinates:e}=this,{onStart:t}=this.props;e&&(this.activated=!0,this.documentListeners.add(Vo.Click,XSe,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(Vo.SelectionChange,this.removeTextSelection),t(e))}handleMove(e){var t;const{activated:n,initialCoordinates:i,props:s}=this,{onMove:a,options:{activationConstraint:o}}=s;if(!i)return;const l=(t=Ub(e))!=null?t:Bl,u=qg(i,l);if(!n&&o){if(AF(o)){if(o.tolerance!=null&&vw(u,o.tolerance))return this.handleCancel();if(vw(u,o.distance))return this.handleStart()}return DF(o)&&vw(u,o.tolerance)?this.handleCancel():void 0}e.cancelable&&e.preventDefault(),a(l)}handleEnd(){const{onEnd:e}=this.props;this.detach(),e()}handleCancel(){const{onCancel:e}=this.props;this.detach(),e()}handleKeydown(e){e.code===hn.Esc&&this.handleCancel()}removeTextSelection(){var e;(e=this.document.getSelection())==null||e.removeAllRanges()}}const QSe={move:{name:"pointermove"},end:{name:"pointerup"}};class wD extends CD{constructor(e){const{event:t}=e,n=Hm(t.target);super(e,QSe,n)}}wD.activators=[{eventName:"onPointerDown",handler:(r,e)=>{let{nativeEvent:t}=r,{onActivation:n}=e;return!t.isPrimary||t.button!==0?!1:(n?.({event:t}),!0)}}];const JSe={move:{name:"mousemove"},end:{name:"mouseup"}};var CE;(function(r){r[r.RightClick=2]="RightClick"})(CE||(CE={}));class ZSe extends CD{constructor(e){super(e,JSe,Hm(e.event.target))}}ZSe.activators=[{eventName:"onMouseDown",handler:(r,e)=>{let{nativeEvent:t}=r,{onActivation:n}=e;return t.button===CE.RightClick?!1:(n?.({event:t}),!0)}}];const yw={move:{name:"touchmove"},end:{name:"touchend"}};class eTe extends CD{constructor(e){super(e,yw)}static setup(){return window.addEventListener(yw.move.name,e,{capture:!1,passive:!1}),function(){window.removeEventListener(yw.move.name,e)};function e(){}}}eTe.activators=[{eventName:"onTouchStart",handler:(r,e)=>{let{nativeEvent:t}=r,{onActivation:n}=e;const{touches:i}=t;return i.length>1?!1:(n?.({event:t}),!0)}}];var vg;(function(r){r[r.Pointer=0]="Pointer",r[r.DraggableRect=1]="DraggableRect"})(vg||(vg={}));var jb;(function(r){r[r.TreeOrder=0]="TreeOrder",r[r.ReversedTreeOrder=1]="ReversedTreeOrder"})(jb||(jb={}));function tTe(r){let{acceleration:e,activator:t=vg.Pointer,canScroll:n,draggingRect:i,enabled:s,interval:a=5,order:o=jb.TreeOrder,pointerCoordinates:l,scrollableAncestors:u,scrollableAncestorRects:c,delta:h,threshold:f}=r;const g=nTe({delta:h,disabled:!s}),[v,y]=fSe(),_=M.useRef({x:0,y:0}),C=M.useRef({x:0,y:0}),E=M.useMemo(()=>{switch(t){case vg.Pointer:return l?{top:l.y,bottom:l.y,left:l.x,right:l.x}:null;case vg.DraggableRect:return i}},[t,i,l]),D=M.useRef(null),I=M.useCallback(()=>{const P=D.current;if(!P)return;const N=_.current.x*C.current.x,U=_.current.y*C.current.y;P.scrollBy(N,U)},[]),k=M.useMemo(()=>o===jb.TreeOrder?[...u].reverse():u,[o,u]);M.useEffect(()=>{if(!s||!u.length||!E){y();return}for(const P of k){if(n?.(P)===!1)continue;const N=u.indexOf(P),U=c[N];if(!U)continue;const{direction:B,speed:A}=HSe(P,U,E,e,f);for(const $ of["x","y"])g[$][B[$]]||(A[$]=0,B[$]=0);if(A.x>0||A.y>0){y(),D.current=P,v(I,a),_.current=A,C.current=B;return}}_.current={x:0,y:0},C.current={x:0,y:0},y()},[e,I,n,y,s,a,JSON.stringify(E),JSON.stringify(g),v,u,k,c,JSON.stringify(f)])}const rTe={x:{[ts.Backward]:!1,[ts.Forward]:!1},y:{[ts.Backward]:!1,[ts.Forward]:!1}};function nTe(r){let{delta:e,disabled:t}=r;const n=Nb(e);return Rv(i=>{if(t||!n||!i)return rTe;const s={x:Math.sign(e.x-n.x),y:Math.sign(e.y-n.y)};return{x:{[ts.Backward]:i.x[ts.Backward]||s.x===-1,[ts.Forward]:i.x[ts.Forward]||s.x===1},y:{[ts.Backward]:i.y[ts.Backward]||s.y===-1,[ts.Forward]:i.y[ts.Forward]||s.y===1}}},[t,e,n])}function iTe(r,e){const t=e!==null?r.get(e):void 0,n=t?t.node.current:null;return Rv(i=>{var s;return e===null?null:(s=n??i)!=null?s:null},[n,e])}function sTe(r,e){return M.useMemo(()=>r.reduce((t,n)=>{const{sensor:i}=n,s=i.activators.map(a=>({eventName:a.eventName,handler:e(a.handler,n)}));return[...t,...s]},[]),[r,e])}var Gg;(function(r){r[r.Always=0]="Always",r[r.BeforeDragging=1]="BeforeDragging",r[r.WhileDragging=2]="WhileDragging"})(Gg||(Gg={}));var wE;(function(r){r.Optimized="optimized"})(wE||(wE={}));const IF=new Map;function aTe(r,e){let{dragging:t,dependencies:n,config:i}=e;const[s,a]=M.useState(null),{frequency:o,measure:l,strategy:u}=i,c=M.useRef(r),h=_(),f=Wg(h),g=M.useCallback(function(C){C===void 0&&(C=[]),!f.current&&a(E=>E===null?C:E.concat(C.filter(D=>!E.includes(D))))},[f]),v=M.useRef(null),y=Rv(C=>{if(h&&!t)return IF;if(!C||C===IF||c.current!==r||s!=null){const E=new Map;for(let D of r){if(!D)continue;if(s&&s.length>0&&!s.includes(D.id)&&D.rect.current){E.set(D.id,D.rect.current);continue}const I=D.node.current,k=I?new SD(l(I),I):null;D.rect.current=k,k&&E.set(D.id,k)}return E}return C},[r,s,t,h,l]);return M.useEffect(()=>{c.current=r},[r]),M.useEffect(()=>{h||g()},[t,h]),M.useEffect(()=>{s&&s.length>0&&a(null)},[JSON.stringify(s)]),M.useEffect(()=>{h||typeof o!="number"||v.current!==null||(v.current=setTimeout(()=>{g(),v.current=null},o))},[o,h,g,...n]),{droppableRects:y,measureDroppableContainers:g,measuringScheduled:s!=null};function _(){switch(u){case Gg.Always:return!1;case Gg.BeforeDragging:return t;default:return!t}}}function ED(r,e){return Rv(t=>r?t||(typeof e=="function"?e(r):r):null,[e,r])}function oTe(r,e){return ED(r,e)}function lTe(r){let{callback:e,disabled:t}=r;const n=lT(e),i=M.useMemo(()=>{if(t||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:s}=window;return new s(n)},[n,t]);return M.useEffect(()=>()=>i?.disconnect(),[i]),i}function dT(r){let{callback:e,disabled:t}=r;const n=lT(e),i=M.useMemo(()=>{if(t||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:s}=window;return new s(n)},[t]);return M.useEffect(()=>()=>i?.disconnect(),[i]),i}function uTe(r){return new SD(Vm(r),r)}function PF(r,e,t){e===void 0&&(e=uTe);const[n,i]=M.useReducer(o,null),s=lTe({callback(l){if(r)for(const u of l){const{type:c,target:h}=u;if(c==="childList"&&h instanceof HTMLElement&&h.contains(r)){i();break}}}}),a=dT({callback:i});return al(()=>{i(),r?(a?.observe(r),s?.observe(document.body,{childList:!0,subtree:!0})):(a?.disconnect(),s?.disconnect())},[r]),n;function o(l){if(!r)return null;if(r.isConnected===!1){var u;return(u=l??t)!=null?u:null}const c=e(r);return JSON.stringify(l)===JSON.stringify(c)?l:c}}function cTe(r){const e=ED(r);return M9(r,e)}const RF=[];function dTe(r){const e=M.useRef(r),t=Rv(n=>r?n&&n!==RF&&r&&e.current&&r.parentNode===e.current.parentNode?n:cT(r):RF,[r]);return M.useEffect(()=>{e.current=r},[r]),t}function hTe(r){const[e,t]=M.useState(null),n=M.useRef(r),i=M.useCallback(s=>{const a=gw(s.target);a&&t(o=>o?(o.set(a,TE(a)),new Map(o)):null)},[]);return M.useEffect(()=>{const s=n.current;if(r!==s){a(s);const o=r.map(l=>{const u=gw(l);return u?(u.addEventListener("scroll",i,{passive:!0}),[u,TE(u)]):null}).filter(l=>l!=null);t(o.length?new Map(o):null),n.current=r}return()=>{a(r),a(s)};function a(o){o.forEach(l=>{const u=gw(l);u?.removeEventListener("scroll",i)})}},[i,r]),M.useMemo(()=>r.length?e?Array.from(e.values()).reduce((s,a)=>$p(s,a),Bl):z9(r):Bl,[r,e])}function LF(r,e){e===void 0&&(e=[]);const t=M.useRef(null);return M.useEffect(()=>{t.current=null},e),M.useEffect(()=>{const n=r!==Bl;n&&!t.current&&(t.current=r),!n&&t.current&&(t.current=null)},[r]),t.current?qg(r,t.current):Bl}function fTe(r){M.useEffect(()=>{if(!oT)return;const e=r.map(t=>{let{sensor:n}=t;return n.setup==null?void 0:n.setup()});return()=>{for(const t of e)t?.()}},r.map(e=>{let{sensor:t}=e;return t}))}function pTe(r,e){return M.useMemo(()=>r.reduce((t,n)=>{let{eventName:i,handler:s}=n;return t[i]=a=>{s(a,e)},t},{}),[r,e])}function W9(r){return M.useMemo(()=>r?USe(r):null,[r])}const xw=[];function mTe(r,e){e===void 0&&(e=Vm);const[t]=r,n=W9(t?ha(t):null),[i,s]=M.useReducer(o,xw),a=dT({callback:s});return r.length>0&&i===xw&&s(),al(()=>{r.length?r.forEach(l=>a?.observe(l)):(a?.disconnect(),s())},[r]),i;function o(){return r.length?r.map(l=>$9(l)?n:new SD(e(l),l)):xw}}function q9(r){if(!r)return null;if(r.children.length>1)return r;const e=r.children[0];return Pv(e)?e:r}function gTe(r){let{measure:e}=r;const[t,n]=M.useState(null),i=M.useCallback(u=>{for(const{target:c}of u)if(Pv(c)){n(h=>{const f=e(c);return h?{...h,width:f.width,height:f.height}:f});break}},[e]),s=dT({callback:i}),a=M.useCallback(u=>{const c=q9(u);s?.disconnect(),c&&s?.observe(c),n(c?e(c):null)},[e,s]),[o,l]=Bb(a);return M.useMemo(()=>({nodeRef:o,rect:t,setRef:l}),[t,o,l])}const vTe=[{sensor:wD,options:{}},{sensor:TD,options:{}}],yTe={current:{}},g_={draggable:{measure:EF},droppable:{measure:EF,strategy:Gg.WhileDragging,frequency:wE.Optimized},dragOverlay:{measure:Vm}};class yg extends Map{get(e){var t;return e!=null&&(t=super.get(e))!=null?t:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(e=>{let{disabled:t}=e;return!t})}getNodeFor(e){var t,n;return(t=(n=this.get(e))==null?void 0:n.node.current)!=null?t:void 0}}const xTe={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new yg,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:$b},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:g_,measureDroppableContainers:$b,windowRect:null,measuringScheduled:!1},G9={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:$b,draggableNodes:new Map,over:null,measureDroppableContainers:$b},Ov=M.createContext(G9),K9=M.createContext(xTe);function _Te(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new yg}}}function bTe(r,e){switch(e.type){case Ui.DragStart:return{...r,draggable:{...r.draggable,initialCoordinates:e.initialCoordinates,active:e.active}};case Ui.DragMove:return r.draggable.active?{...r,draggable:{...r.draggable,translate:{x:e.coordinates.x-r.draggable.initialCoordinates.x,y:e.coordinates.y-r.draggable.initialCoordinates.y}}}:r;case Ui.DragEnd:case Ui.DragCancel:return{...r,draggable:{...r.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case Ui.RegisterDroppable:{const{element:t}=e,{id:n}=t,i=new yg(r.droppable.containers);return i.set(n,t),{...r,droppable:{...r.droppable,containers:i}}}case Ui.SetDroppableDisabled:{const{id:t,key:n,disabled:i}=e,s=r.droppable.containers.get(t);if(!s||n!==s.key)return r;const a=new yg(r.droppable.containers);return a.set(t,{...s,disabled:i}),{...r,droppable:{...r.droppable,containers:a}}}case Ui.UnregisterDroppable:{const{id:t,key:n}=e,i=r.droppable.containers.get(t);if(!i||n!==i.key)return r;const s=new yg(r.droppable.containers);return s.delete(t),{...r,droppable:{...r.droppable,containers:s}}}default:return r}}function STe(r){let{disabled:e}=r;const{active:t,activatorEvent:n,draggableNodes:i}=M.useContext(Ov),s=Nb(n),a=Nb(t?.id);return M.useEffect(()=>{if(!e&&!n&&s&&a!=null){if(!uT(s)||document.activeElement===s.target)return;const o=i.get(a);if(!o)return;const{activatorNode:l,node:u}=o;if(!l.current&&!u.current)return;requestAnimationFrame(()=>{for(const c of[l.current,u.current]){if(!c)continue;const h=gSe(c);if(h){h.focus();break}}})}},[n,e,i,a,s]),null}function X9(r,e){let{transform:t,...n}=e;return r!=null&&r.length?r.reduce((i,s)=>s({transform:i,...n}),t):t}function TTe(r){return M.useMemo(()=>({draggable:{...g_.draggable,...r?.draggable},droppable:{...g_.droppable,...r?.droppable},dragOverlay:{...g_.dragOverlay,...r?.dragOverlay}}),[r?.draggable,r?.droppable,r?.dragOverlay])}function CTe(r){let{activeNode:e,measure:t,initialRect:n,config:i=!0}=r;const s=M.useRef(!1),{x:a,y:o}=typeof i=="boolean"?{x:i,y:i}:i;al(()=>{if(!a&&!o||!e){s.current=!1;return}if(s.current||!n)return;const u=e?.node.current;if(!u||u.isConnected===!1)return;const c=t(u),h=M9(c,n);if(a||(h.x=0),o||(h.y=0),s.current=!0,Math.abs(h.x)>0||Math.abs(h.y)>0){const f=B9(u);f&&f.scrollBy({top:h.y,left:h.x})}},[e,a,o,n,t])}const hT=M.createContext({...Bl,scaleX:1,scaleY:1});var Dd;(function(r){r[r.Uninitialized=0]="Uninitialized",r[r.Initializing=1]="Initializing",r[r.Initialized=2]="Initialized"})(Dd||(Dd={}));const wTe=M.memo(function(e){var t,n,i,s;let{id:a,accessibility:o,autoScroll:l=!0,children:u,sensors:c=vTe,collisionDetection:h=LSe,measuring:f,modifiers:g,...v}=e;const y=M.useReducer(bTe,void 0,_Te),[_,C]=y,[E,D]=SSe(),[I,k]=M.useState(Dd.Uninitialized),P=I===Dd.Initialized,{draggable:{active:N,nodes:U,translate:B},droppable:{containers:A}}=_,$=N?U.get(N):null,W=M.useRef({initial:null,translated:null}),V=M.useMemo(()=>{var Fr;return N!=null?{id:N,data:(Fr=$?.data)!=null?Fr:yTe,rect:W}:null},[N,$]),Q=M.useRef(null),[ie,ne]=M.useState(null),[ue,se]=M.useState(null),ae=Wg(v,Object.values(v)),ce=Lv("DndDescribedBy",a),ee=M.useMemo(()=>A.getEnabled(),[A]),pe=TTe(f),{droppableRects:me,measureDroppableContainers:ye,measuringScheduled:Oe}=aTe(ee,{dragging:P,dependencies:[B.x,B.y],config:pe.droppable}),Le=iTe(U,N),st=M.useMemo(()=>ue?Ub(ue):null,[ue]),ze=wn(),pt=oTe(Le,pe.draggable.measure);CTe({activeNode:N?U.get(N):null,config:ze.layoutShiftCompensation,initialRect:pt,measure:pe.draggable.measure});const Ye=PF(Le,pe.draggable.measure,pt),Pt=PF(Le?Le.parentElement:null),Rt=M.useRef({activatorEvent:null,active:null,activeNode:Le,collisionRect:null,collisions:null,droppableRects:me,draggableNodes:U,draggingNode:null,draggingNodeRect:null,droppableContainers:A,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),Ve=A.getNodeFor((t=Rt.current.over)==null?void 0:t.id),Ne=gTe({measure:pe.dragOverlay.measure}),Ie=(n=Ne.nodeRef.current)!=null?n:Le,Ue=P?(i=Ne.rect)!=null?i:Ye:null,et=!!(Ne.nodeRef.current&&Ne.rect),ot=cTe(et?null:Ye),dt=W9(Ie?ha(Ie):null),it=dTe(P?Ve??Le:null),bt=mTe(it),lt=X9(g,{transform:{x:B.x-ot.x,y:B.y-ot.y,scaleX:1,scaleY:1},activatorEvent:ue,active:V,activeNodeRect:Ye,containerNodeRect:Pt,draggingNodeRect:Ue,over:Rt.current.over,overlayNodeRect:Ne.rect,scrollableAncestors:it,scrollableAncestorRects:bt,windowRect:dt}),gr=st?$p(st,B):null,hr=hTe(it),Rr=LF(hr),nr=LF(hr,[Ye]),qt=$p(lt,Rr),fr=Ue?FSe(Ue,lt):null,yr=V&&fr?h({active:V,collisionRect:fr,droppableRects:me,droppableContainers:ee,pointerCoordinates:gr}):null,Lr=O9(yr,"id"),[vt,Ut]=M.useState(null),rn=et?lt:$p(lt,nr),jt=OSe(rn,(s=vt?.rect)!=null?s:null,Ye),br=M.useCallback((Fr,oe)=>{let{sensor:fe,options:Te}=oe;if(Q.current==null)return;const je=U.get(Q.current);if(!je)return;const mt=Fr.nativeEvent,St=new fe({active:Q.current,activeNode:je,event:mt,options:Te,context:Rt,onStart(xe){const Ae=Q.current;if(Ae==null)return;const Ke=U.get(Ae);if(!Ke)return;const{onDragStart:Xe}=ae.current,_t={active:{id:Ae,data:Ke.data,rect:W}};Go.unstable_batchedUpdates(()=>{Xe?.(_t),k(Dd.Initializing),C({type:Ui.DragStart,initialCoordinates:xe,active:Ae}),E({type:"onDragStart",event:_t})})},onMove(xe){C({type:Ui.DragMove,coordinates:xe})},onEnd:be(Ui.DragEnd),onCancel:be(Ui.DragCancel)});Go.unstable_batchedUpdates(()=>{ne(St),se(Fr.nativeEvent)});function be(xe){return async function(){const{active:Ke,collisions:Xe,over:_t,scrollAdjustedTranslate:Lt}=Rt.current;let ct=null;if(Ke&&Lt){const{cancelDrop:yt}=ae.current;ct={activatorEvent:mt,active:Ke,collisions:Xe,delta:Lt,over:_t},xe===Ui.DragEnd&&typeof yt=="function"&&await Promise.resolve(yt(ct))&&(xe=Ui.DragCancel)}Q.current=null,Go.unstable_batchedUpdates(()=>{C({type:xe}),k(Dd.Uninitialized),Ut(null),ne(null),se(null);const yt=xe===Ui.DragEnd?"onDragEnd":"onDragCancel";if(ct){const Vt=ae.current[yt];Vt?.(ct),E({type:yt,event:ct})}})}}},[U]),Or=M.useCallback((Fr,oe)=>(fe,Te)=>{const je=fe.nativeEvent,mt=U.get(Te);if(Q.current!==null||!mt||je.dndKit||je.defaultPrevented)return;const St={active:mt};Fr(fe,oe.options,St)===!0&&(je.dndKit={capturedBy:oe.sensor},Q.current=Te,br(fe,oe))},[U,br]),Hr=sTe(c,Or);fTe(c),al(()=>{Ye&&I===Dd.Initializing&&k(Dd.Initialized)},[Ye,I]),M.useEffect(()=>{const{onDragMove:Fr}=ae.current,{active:oe,activatorEvent:fe,collisions:Te,over:je}=Rt.current;if(!oe||!fe)return;const mt={active:oe,activatorEvent:fe,collisions:Te,delta:{x:qt.x,y:qt.y},over:je};Go.unstable_batchedUpdates(()=>{Fr?.(mt),E({type:"onDragMove",event:mt})})},[qt.x,qt.y]),M.useEffect(()=>{const{active:Fr,activatorEvent:oe,collisions:fe,droppableContainers:Te,scrollAdjustedTranslate:je}=Rt.current;if(!Fr||Q.current==null||!oe||!je)return;const{onDragOver:mt}=ae.current,St=Te.get(Lr),be=St&&St.rect.current?{id:St.id,rect:St.rect.current,data:St.data,disabled:St.disabled}:null,xe={active:Fr,activatorEvent:oe,collisions:fe,delta:{x:je.x,y:je.y},over:be};Go.unstable_batchedUpdates(()=>{Ut(be),mt?.(xe),E({type:"onDragOver",event:xe})})},[Lr]),al(()=>{Rt.current={activatorEvent:ue,active:V,activeNode:Le,collisionRect:fr,collisions:yr,droppableRects:me,draggableNodes:U,draggingNode:Ie,draggingNodeRect:Ue,droppableContainers:A,over:vt,scrollableAncestors:it,scrollAdjustedTranslate:qt},W.current={initial:Ue,translated:fr}},[V,Le,yr,fr,U,Ie,Ue,me,A,vt,it,qt]),tTe({...ze,delta:B,draggingRect:fr,pointerCoordinates:gr,scrollableAncestors:it,scrollableAncestorRects:bt});const ln=M.useMemo(()=>({active:V,activeNode:Le,activeNodeRect:Ye,activatorEvent:ue,collisions:yr,containerNodeRect:Pt,dragOverlay:Ne,draggableNodes:U,droppableContainers:A,droppableRects:me,over:vt,measureDroppableContainers:ye,scrollableAncestors:it,scrollableAncestorRects:bt,measuringConfiguration:pe,measuringScheduled:Oe,windowRect:dt}),[V,Le,Ye,ue,yr,Pt,Ne,U,A,me,vt,ye,it,bt,pe,Oe,dt]),Cn=M.useMemo(()=>({activatorEvent:ue,activators:Hr,active:V,activeNodeRect:Ye,ariaDescribedById:{draggable:ce},dispatch:C,draggableNodes:U,over:vt,measureDroppableContainers:ye}),[ue,Hr,V,Ye,C,ce,U,vt,ye]);return Qr.createElement(L9.Provider,{value:D},Qr.createElement(Ov.Provider,{value:Cn},Qr.createElement(K9.Provider,{value:ln},Qr.createElement(hT.Provider,{value:jt},u)),Qr.createElement(STe,{disabled:o?.restoreFocus===!1})),Qr.createElement(wSe,{...o,hiddenTextDescribedById:ce}));function wn(){const Fr=ie?.autoScrollEnabled===!1,oe=typeof l=="object"?l.enabled===!1:l===!1,fe=P&&!Fr&&!oe;return typeof l=="object"?{...l,enabled:fe}:{enabled:fe}}}),ETe=M.createContext(null),OF="button",kTe="Droppable";function ATe(r){let{id:e,data:t,disabled:n=!1,attributes:i}=r;const s=Lv(kTe),{activators:a,activatorEvent:o,active:l,activeNodeRect:u,ariaDescribedById:c,draggableNodes:h,over:f}=M.useContext(Ov),{role:g=OF,roleDescription:v="draggable",tabIndex:y=0}=i??{},_=l?.id===e,C=M.useContext(_?hT:ETe),[E,D]=Bb(),[I,k]=Bb(),P=pTe(a,e),N=Wg(t);al(()=>(h.set(e,{id:e,key:s,node:E,activatorNode:I,data:N}),()=>{const B=h.get(e);B&&B.key===s&&h.delete(e)}),[h,e]);const U=M.useMemo(()=>({role:g,tabIndex:y,"aria-disabled":n,"aria-pressed":_&&g===OF?!0:void 0,"aria-roledescription":v,"aria-describedby":c.draggable}),[n,g,y,_,v,c.draggable]);return{active:l,activatorEvent:o,activeNodeRect:u,attributes:U,isDragging:_,listeners:n?void 0:P,node:E,over:f,setNodeRef:D,setActivatorNodeRef:k,transform:C}}function Y9(){return M.useContext(K9)}const DTe="Droppable",ITe={timeout:25};function PTe(r){let{data:e,disabled:t=!1,id:n,resizeObserverConfig:i}=r;const s=Lv(DTe),{active:a,dispatch:o,over:l,measureDroppableContainers:u}=M.useContext(Ov),c=M.useRef({disabled:t}),h=M.useRef(!1),f=M.useRef(null),g=M.useRef(null),{disabled:v,updateMeasurementsFor:y,timeout:_}={...ITe,...i},C=Wg(y??n),E=M.useCallback(()=>{if(!h.current){h.current=!0;return}g.current!=null&&clearTimeout(g.current),g.current=setTimeout(()=>{u(Array.isArray(C.current)?C.current:[C.current]),g.current=null},_)},[_]),D=dT({callback:E,disabled:v||!a}),I=M.useCallback((U,B)=>{D&&(B&&(D.unobserve(B),h.current=!1),U&&D.observe(U))},[D]),[k,P]=Bb(I),N=Wg(e);return M.useEffect(()=>{!D||!k.current||(D.disconnect(),h.current=!1,D.observe(k.current))},[k,D]),al(()=>(o({type:Ui.RegisterDroppable,element:{id:n,key:s,disabled:t,node:k,rect:f,data:N}}),()=>o({type:Ui.UnregisterDroppable,key:s,id:n})),[n]),M.useEffect(()=>{t!==c.current.disabled&&(o({type:Ui.SetDroppableDisabled,id:n,key:s,disabled:t}),c.current.disabled=t)},[n,s,t,o]),{active:a,rect:f,isOver:l?.id===n,node:k,over:l,setNodeRef:P}}function RTe(r){let{animation:e,children:t}=r;const[n,i]=M.useState(null),[s,a]=M.useState(null),o=Nb(t);return!t&&!n&&o&&i(o),al(()=>{if(!s)return;const l=n?.key,u=n?.props.id;if(l==null||u==null){i(null);return}Promise.resolve(e(u,s)).then(()=>{i(null)})},[e,n,s]),Qr.createElement(Qr.Fragment,null,t,n?M.cloneElement(n,{ref:a}):null)}const LTe={x:0,y:0,scaleX:1,scaleY:1};function OTe(r){let{children:e}=r;return Qr.createElement(Ov.Provider,{value:G9},Qr.createElement(hT.Provider,{value:LTe},e))}const MTe={position:"fixed",touchAction:"none"},FTe=r=>uT(r)?"transform 250ms ease":void 0,BTe=M.forwardRef((r,e)=>{let{as:t,activatorEvent:n,adjustScale:i,children:s,className:a,rect:o,style:l,transform:u,transition:c=FTe}=r;if(!o)return null;const h=i?u:{...u,scaleX:1,scaleY:1},f={...MTe,width:o.width,height:o.height,top:o.top,left:o.left,transform:Yd.Transform.toString(h),transformOrigin:i&&n?ASe(n,o):void 0,transition:typeof c=="function"?c(n):c,...l};return Qr.createElement(t,{className:a,style:f,ref:e},s)}),NTe=r=>e=>{let{active:t,dragOverlay:n}=e;const i={},{styles:s,className:a}=r;if(s!=null&&s.active)for(const[o,l]of Object.entries(s.active))l!==void 0&&(i[o]=t.node.style.getPropertyValue(o),t.node.style.setProperty(o,l));if(s!=null&&s.dragOverlay)for(const[o,l]of Object.entries(s.dragOverlay))l!==void 0&&n.node.style.setProperty(o,l);return a!=null&&a.active&&t.node.classList.add(a.active),a!=null&&a.dragOverlay&&n.node.classList.add(a.dragOverlay),function(){for(const[l,u]of Object.entries(i))t.node.style.setProperty(l,u);a!=null&&a.active&&t.node.classList.remove(a.active)}},UTe=r=>{let{transform:{initial:e,final:t}}=r;return[{transform:Yd.Transform.toString(e)},{transform:Yd.Transform.toString(t)}]},$Te={duration:250,easing:"ease",keyframes:UTe,sideEffects:NTe({styles:{active:{opacity:"0"}}})};function jTe(r){let{config:e,draggableNodes:t,droppableContainers:n,measuringConfiguration:i}=r;return lT((s,a)=>{if(e===null)return;const o=t.get(s);if(!o)return;const l=o.node.current;if(!l)return;const u=q9(a);if(!u)return;const{transform:c}=ha(a).getComputedStyle(a),h=F9(c);if(!h)return;const f=typeof e=="function"?e:zTe(e);return H9(l,i.draggable.measure),f({active:{id:s,data:o.data,node:l,rect:i.draggable.measure(l)},draggableNodes:t,dragOverlay:{node:a,rect:i.dragOverlay.measure(u)},droppableContainers:n,measuringConfiguration:i,transform:h})})}function zTe(r){const{duration:e,easing:t,sideEffects:n,keyframes:i}={...$Te,...r};return s=>{let{active:a,dragOverlay:o,transform:l,...u}=s;if(!e)return;const c={x:o.rect.left-a.rect.left,y:o.rect.top-a.rect.top},h={scaleX:l.scaleX!==1?a.rect.width*l.scaleX/o.rect.width:1,scaleY:l.scaleY!==1?a.rect.height*l.scaleY/o.rect.height:1},f={x:l.x-c.x,y:l.y-c.y,...h},g=i({...u,active:a,dragOverlay:o,transform:{initial:l,final:f}}),[v]=g,y=g[g.length-1];if(JSON.stringify(v)===JSON.stringify(y))return;const _=n?.({active:a,dragOverlay:o,...u}),C=o.node.animate(g,{duration:e,easing:t,fill:"forwards"});return new Promise(E=>{C.onfinish=()=>{_?.(),E()}})}}let MF=0;function HTe(r){return M.useMemo(()=>{if(r!=null)return MF++,MF},[r])}const VTe=Qr.memo(r=>{let{adjustScale:e=!1,children:t,dropAnimation:n,style:i,transition:s,modifiers:a,wrapperElement:o="div",className:l,zIndex:u=999}=r;const{activatorEvent:c,active:h,activeNodeRect:f,containerNodeRect:g,draggableNodes:v,droppableContainers:y,dragOverlay:_,over:C,measuringConfiguration:E,scrollableAncestors:D,scrollableAncestorRects:I,windowRect:k}=Y9(),P=M.useContext(hT),N=HTe(h?.id),U=X9(a,{activatorEvent:c,active:h,activeNodeRect:f,containerNodeRect:g,draggingNodeRect:_.rect,over:C,overlayNodeRect:_.rect,scrollableAncestors:D,scrollableAncestorRects:I,transform:P,windowRect:k}),B=ED(f),A=jTe({config:n,draggableNodes:v,droppableContainers:y,measuringConfiguration:E}),$=B?_.setRef:void 0;return Qr.createElement(OTe,null,Qr.createElement(RTe,{animation:A},h&&N?Qr.createElement(BTe,{key:N,id:h.id,ref:$,as:o,activatorEvent:c,adjustScale:e,className:l,transition:s,rect:B,style:{zIndex:u,...i},transform:U},t):null))});function kD(r,e,t){const n=r.slice();return n.splice(t<0?n.length+t:t,0,n.splice(e,1)[0]),n}function WTe(r,e){return r.reduce((t,n,i)=>{const s=e.get(n);return s&&(t[i]=s),t},Array(r.length))}function ox(r){return r!==null&&r>=0}function qTe(r,e){if(r===e)return!0;if(r.length!==e.length)return!1;for(let t=0;t<r.length;t++)if(r[t]!==e[t])return!1;return!0}function GTe(r){return typeof r=="boolean"?{draggable:r,droppable:r}:r}const Q9=r=>{let{rects:e,activeIndex:t,overIndex:n,index:i}=r;const s=kD(e,n,t),a=e[i],o=s[i];return!o||!a?null:{x:o.left-a.left,y:o.top-a.top,scaleX:o.width/a.width,scaleY:o.height/a.height}},J9="Sortable",Z9=Qr.createContext({activeIndex:-1,containerId:J9,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:Q9,disabled:{draggable:!1,droppable:!1}});function KTe(r){let{children:e,id:t,items:n,strategy:i=Q9,disabled:s=!1}=r;const{active:a,dragOverlay:o,droppableRects:l,over:u,measureDroppableContainers:c}=Y9(),h=Lv(J9,t),f=o.rect!==null,g=M.useMemo(()=>n.map(P=>typeof P=="object"&&"id"in P?P.id:P),[n]),v=a!=null,y=a?g.indexOf(a.id):-1,_=u?g.indexOf(u.id):-1,C=M.useRef(g),E=!qTe(g,C.current),D=_!==-1&&y===-1||E,I=GTe(s);al(()=>{E&&v&&c(g)},[E,g,v,c]),M.useEffect(()=>{C.current=g},[g]);const k=M.useMemo(()=>({activeIndex:y,containerId:h,disabled:I,disableTransforms:D,items:g,overIndex:_,useDragOverlay:f,sortedRects:WTe(g,l),strategy:i}),[y,h,I.draggable,I.droppable,D,g,_,l,f,i]);return Qr.createElement(Z9.Provider,{value:k},e)}const XTe=r=>{let{id:e,items:t,activeIndex:n,overIndex:i}=r;return kD(t,n,i).indexOf(e)},YTe=r=>{let{containerId:e,isSorting:t,wasDragging:n,index:i,items:s,newIndex:a,previousItems:o,previousContainerId:l,transition:u}=r;return!u||!n||o!==s&&i===a?!1:t?!0:a!==i&&e===l},QTe={duration:200,easing:"ease"},ez="transform",JTe=Yd.Transition.toString({property:ez,duration:0,easing:"linear"}),ZTe={roleDescription:"sortable"};function e1e(r){let{disabled:e,index:t,node:n,rect:i}=r;const[s,a]=M.useState(null),o=M.useRef(t);return al(()=>{if(!e&&t!==o.current&&n.current){const l=i.current;if(l){const u=Vm(n.current,{ignoreTransform:!0}),c={x:l.left-u.left,y:l.top-u.top,scaleX:l.width/u.width,scaleY:l.height/u.height};(c.x||c.y)&&a(c)}}t!==o.current&&(o.current=t)},[e,t,n,i]),M.useEffect(()=>{s&&a(null)},[s]),s}function t1e(r){let{animateLayoutChanges:e=YTe,attributes:t,disabled:n,data:i,getNewIndex:s=XTe,id:a,strategy:o,resizeObserverConfig:l,transition:u=QTe}=r;const{items:c,containerId:h,activeIndex:f,disabled:g,disableTransforms:v,sortedRects:y,overIndex:_,useDragOverlay:C,strategy:E}=M.useContext(Z9),D=r1e(n,g),I=c.indexOf(a),k=M.useMemo(()=>({sortable:{containerId:h,index:I,items:c},...i}),[h,i,I,c]),P=M.useMemo(()=>c.slice(c.indexOf(a)),[c,a]),{rect:N,node:U,isOver:B,setNodeRef:A}=PTe({id:a,data:k,disabled:D.droppable,resizeObserverConfig:{updateMeasurementsFor:P,...l}}),{active:$,activatorEvent:W,activeNodeRect:V,attributes:Q,setNodeRef:ie,listeners:ne,isDragging:ue,over:se,setActivatorNodeRef:ae,transform:ce}=ATe({id:a,data:k,attributes:{...ZTe,...t},disabled:D.draggable}),ee=hSe(A,ie),pe=!!$,me=pe&&!v&&ox(f)&&ox(_),ye=!C&&ue,Oe=ye&&me?ce:null,st=me?Oe??(o??E)({rects:y,activeNodeRect:V,activeIndex:f,overIndex:_,index:I}):null,ze=ox(f)&&ox(_)?s({id:a,items:c,activeIndex:f,overIndex:_}):I,pt=$?.id,Ye=M.useRef({activeId:pt,items:c,newIndex:ze,containerId:h}),Pt=c!==Ye.current.items,Rt=e({active:$,containerId:h,isDragging:ue,isSorting:pe,id:a,index:I,items:c,newIndex:Ye.current.newIndex,previousItems:Ye.current.items,previousContainerId:Ye.current.containerId,transition:u,wasDragging:Ye.current.activeId!=null}),Ve=e1e({disabled:!Rt,index:I,node:U,rect:N});return M.useEffect(()=>{pe&&Ye.current.newIndex!==ze&&(Ye.current.newIndex=ze),h!==Ye.current.containerId&&(Ye.current.containerId=h),c!==Ye.current.items&&(Ye.current.items=c)},[pe,ze,h,c]),M.useEffect(()=>{if(pt===Ye.current.activeId)return;if(pt&&!Ye.current.activeId){Ye.current.activeId=pt;return}const Ie=setTimeout(()=>{Ye.current.activeId=pt},50);return()=>clearTimeout(Ie)},[pt]),{active:$,activeIndex:f,attributes:Q,data:k,rect:N,index:I,newIndex:ze,items:c,isOver:B,isSorting:pe,isDragging:ue,listeners:ne,node:U,overIndex:_,over:se,setNodeRef:ee,setActivatorNodeRef:ae,setDroppableNodeRef:A,setDraggableNodeRef:ie,transform:Ve??st,transition:Ne()};function Ne(){if(Ve||Pt&&Ye.current.newIndex===I)return JTe;if(!(ye&&!uT(W)||!u)&&(pe||Rt))return Yd.Transition.toString({...u,property:ez})}}function r1e(r,e){var t,n;return typeof r=="boolean"?{draggable:r,droppable:!1}:{draggable:(t=r?.draggable)!=null?t:e.draggable,droppable:(n=r?.droppable)!=null?n:e.droppable}}function zb(r){if(!r)return!1;const e=r.data.current;return!!(e&&"sortable"in e&&typeof e.sortable=="object"&&"containerId"in e.sortable&&"items"in e.sortable&&"index"in e.sortable)}const n1e=[hn.Down,hn.Right,hn.Up,hn.Left],i1e=(r,e)=>{let{context:{active:t,collisionRect:n,droppableRects:i,droppableContainers:s,over:a,scrollableAncestors:o}}=e;if(n1e.includes(r.code)){if(r.preventDefault(),!t||!n)return;const l=[];s.getEnabled().forEach(h=>{if(!h||h!=null&&h.disabled)return;const f=i.get(h.id);if(f)switch(r.code){case hn.Down:n.top<f.top&&l.push(h);break;case hn.Up:n.top>f.top&&l.push(h);break;case hn.Left:n.left>f.left&&l.push(h);break;case hn.Right:n.left<f.left&&l.push(h);break}});const u=PSe({collisionRect:n,droppableRects:i,droppableContainers:l});let c=O9(u,"id");if(c===a?.id&&u.length>1&&(c=u[1].id),c!=null){const h=s.get(t.id),f=s.get(c),g=f?i.get(f.id):null,v=f?.node.current;if(v&&g&&h&&f){const _=cT(v).some((P,N)=>o[N]!==P),C=tz(h,f),E=s1e(h,f),D=_||!C?{x:0,y:0}:{x:E?n.width-g.width:0,y:E?n.height-g.height:0},I={x:g.left,y:g.top};return D.x&&D.y?I:qg(I,D)}}}};function tz(r,e){return!zb(r)||!zb(e)?!1:r.data.current.sortable.containerId===e.data.current.sortable.containerId}function s1e(r,e){return!zb(r)||!zb(e)||!tz(r,e)?!1:r.data.current.sortable.index<e.data.current.sortable.index}const rz=M.createContext({attributes:{},listeners:void 0,ref(){}});function a1e(){const{attributes:r,listeners:e,ref:t}=M.useContext(rz);return O.jsx("button",{className:"DragHandle",...r,...e,ref:t,children:O.jsx("svg",{viewBox:"0 0 20 20",width:"12",children:O.jsx("path",{d:"M7 2a2 2 0 1 0 .001 4.001A2 2 0 0 0 7 2zm0 6a2 2 0 1 0 .001 4.001A2 2 0 0 0 7 8zm0 6a2 2 0 1 0 .001 4.001A2 2 0 0 0 7 14zm6-8a2 2 0 1 0-.001-4.001A2 2 0 0 0 13 6zm0 2a2 2 0 1 0 .001 4.001A2 2 0 0 0 13 8zm0 6a2 2 0 1 0 .001 4.001A2 2 0 0 0 13 14z"})})})}function o1e(r){const{children:e,id:t}=r,{attributes:n,isDragging:i,listeners:s,setNodeRef:a,setActivatorNodeRef:o,transform:l,transition:u}=t1e({id:t}),c=M.useMemo(()=>({attributes:n,listeners:s,ref:o}),[n,s,o]),h={opacity:i?.4:void 0,transform:Yd.Translate.toString(l),transition:u};return O.jsx(rz.Provider,{value:c,children:O.jsx("li",{className:"SortableItem",ref:a,style:h,children:e})})}function xg(r){const{items:e,onChange:t,renderItem:n}=r,[i,s]=M.useState(null),a=M.useMemo(()=>e.find(l=>l.index===i?.id),[i,e]),o=ESe(CF(wD),CF(TD,{coordinateGetter:i1e}));return O.jsxs(wTe,{sensors:o,onDragStart:({active:l})=>{s(l)},onDragEnd:({active:l,over:u})=>{if(u&&l.id!==u?.id){const c=e.findIndex(({index:f})=>f===l.id),h=e.findIndex(({index:f})=>f===u.id);t(kD(e,c,h))}s(null)},onDragCancel:()=>{s(null)},children:[O.jsx(KTe,{items:e,children:O.jsx("ul",{className:"SortableList",role:"application",children:e.map(l=>O.jsx(Qr.Fragment,{children:n(l)},l.index))})}),O.jsx(l1e,{children:a?n(a):null})]})}function l1e({children:r}){return O.jsx(VTe,{children:r})}xg.Item=o1e;xg.DragHandle=a1e;function u1e(r){const e=M.useContext(Ha);return O.jsx(xg,{items:e.detailList,onChange:e.onChangeExportData,renderItem:t=>O.jsxs(xg.Item,{id:t.index,children:[t.name,O.jsx(xg.DragHandle,{})]})})}const c1e=mr(O.jsx("path",{d:"m6 18 8.5-6L6 6zM16 6v12h2V6z"})),d1e=mr(O.jsx("path",{d:"M6 6h2v12H6zm3.5 6 8.5 6V6z"}));function FF(r){const{children:e,value:t,index:n,...i}=r;return O.jsx("div",{role:"tabpanel",hidden:t!==n,id:`simple-tabpanel-${n}`,"aria-labelledby":`simple-tab-${n}`,...i,children:t===n&&O.jsx(wt,{sx:{p:3},children:O.jsx(kr,{children:e})})})}function nz(r){const{t:e}=Ii(),t=M.useContext(Ha),{onClose:n,open:i,mod:s,clearSelectedArrFunc:a,setDialogMod:o,selectedArr:l}=r,[u,c]=M.useState(""),[h,f]=M.useState(""),[g,v]=M.useState(0),[y,_]=M.useState("");M.useEffect(()=>{v(0),f(""),s===1?c(e("m3u")):s===2?c(e("")):s===3?c(e("")):s===4?c(e("(,,)")):s===5&&c(e(""))},[s]);const C=()=>{n()},E=()=>{t.nowMod===1?t.clientSaveFile(t.detailList,"m3u"):t.webSaveFile(t.detailList,"m3u")},D=()=>{o(1),t.onChangeExportStr()},I=()=>{o(4)},k=A=>{f(A.target.value)},P=()=>{g===0?(t.batchChangeGroupName(l,h),n()):(t.addGroupName(y),v(0))},N=(A,$)=>{v($)},U=A=>{_(A.target.value)},B=()=>{t.nowMod===1?t.clientSaveFile(t.detailList,"txt"):t.webSaveFile(t.detailList,"txt")};return O.jsxs(Ml,{onClose:C,open:i,children:[O.jsx(wt,{style:{minWidth:s!==3?"800px":"",paddingTop:"10px",overflow:"hidden"},children:O.jsx("span",{style:{paddingLeft:"10px"},children:u})}),s===1||s===2?O.jsx(Ur,{sx:{width:550,margin:"10px"},children:O.jsx(jn,{multiline:!0,sx:{fontSize:"11px"},size:"small",id:"standard-multiline-static",rows:4,value:t.exportDataStr})}):"",s===4?O.jsxs(wt,{style:{padding:"5px"},children:[O.jsx(u1e,{}),O.jsx(wt,{children:O.jsx(Ur,{sx:{width:550,margin:"10px",display:"flex",flexDirection:"revert"},children:O.jsx(Xo,{size:"small",onClick:D,variant:"outlined",style:{marginRight:"10px"},startIcon:O.jsx(c1e,{}),children:e("")})})})]}):"",s===1?O.jsxs(Ur,{sx:{width:550,margin:"10px",display:"flex",flexDirection:"revert"},children:[O.jsx(Xo,{size:"small",onClick:I,variant:"outlined",style:{marginRight:"10px"},startIcon:O.jsx(d1e,{}),children:e("")}),O.jsx(Xo,{size:"small",onClick:E,variant:"contained",style:{marginRight:"10px"},startIcon:O.jsx(u2,{}),children:e("m3u")}),O.jsx(Xo,{size:"small",onClick:B,variant:"outlined",style:{marginRight:"10px"},startIcon:O.jsx(u2,{}),children:e("txt")})]}):"",s===5?O.jsxs(wt,{sx:{width:550,margin:"10px"},children:[O.jsx(wt,{sx:{borderBottom:1,borderColor:"divider"},children:O.jsxs(y5,{value:g,onChange:N,"aria-label":"basic tabs example",children:[O.jsx(h2,{label:e("")}),O.jsx(h2,{label:e("")})]})}),O.jsx(FF,{value:g,index:0,children:O.jsxs(Ur,{fullWidth:!0,children:[O.jsx(Fu,{id:"demo-simple-select-label",children:e("")}),O.jsx(Bu,{labelId:"demo-simple-select-label",id:"demo-simple-select",value:h,label:e(""),onChange:k,children:t.detailMenu.groups.map((A,$)=>O.jsx(Fc,{value:A,children:A},$))})]})}),O.jsx(FF,{value:g,index:1,children:O.jsx(Ur,{fullWidth:!0,children:O.jsx(jn,{id:"standard-basic",label:e(""),value:y,variant:"standard",onChange:U})})}),O.jsx(wt,{sx:{display:"flex",justifyContent:"flex-end",marginTop:"5px"},children:O.jsx(Dr,{variant:"outlined",onClick:P,children:e(g===0?"":"")})})]}):""]})}nz.propTypes={onClose:kl.func.isRequired,open:kl.bool.isRequired,mod:kl.number.isRequired};const h1e=mr(O.jsx("path",{d:"M10.09 15.59 11.5 17l5-5-5-5-1.41 1.41L12.67 11H3v2h9.67zM19 3H5c-1.11 0-2 .9-2 2v4h2V5h14v14H5v-4H3v4c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2"})),f1e=mr(O.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m.06 17v-2.01H12c-1.28 0-2.56-.49-3.54-1.46-1.71-1.71-1.92-4.35-.64-6.29l1.1 1.1c-.71 1.33-.53 3.01.59 4.13.7.7 1.62 1.03 2.54 1.01v-2.14l2.83 2.83zm4.11-4.24-1.1-1.1c.71-1.33.53-3.01-.59-4.13C13.79 8.84 12.9 8.5 12 8.5h-.06v2.15L9.11 7.83 11.94 5v2.02c1.3-.02 2.61.45 3.6 1.45 1.7 1.7 1.91 4.35.63 6.29"}));rt("li")(({theme:r})=>({margin:r.spacing(.5),listStyle:"none",display:"initial"}));const p1e=40,BF={PaperProps:{style:{maxHeight:p1e*5,width:200}}};function m1e(r){ev();const{t:e}=Ii(),t=M.useContext(Ha),{selectedArr:n,setSelectedArr:i,showMultiSelect:s,changeShowMultiSelect:a}=r,[o,l]=M.useState([]),[u,c]=M.useState(""),[h,f]=M.useState([]),[g,v]=M.useState(1),[y,_]=M.useState(!1),[C,E]=M.useState([]),D=Q=>{E(Q.target.value);let ie={};for(let ue=0;ue<Q.target.value.length;ue++)ie[Q.target.value[ue]]=Q.target.value[ue];let ne=t.videoResolution;for(let ue=0;ue<ne.length;ue++){let se=!1;ie[ne[ue].value]!==void 0&&(se=!0),ne[ue].checked=se}t.changeVideoResolution(ne)};M.useEffect(()=>{I()},[]);const I=()=>{let Q=an.getVideoResolutionList(),ie=[];for(let ne=0;ne<Q.length;ne++)ie.push({...Q[ne],checked:!1});t.changeVideoResolution(ie)},k=Q=>{c(Q.target.value)},P=()=>{let Q=[];u!==""&&Q.push(u),t.filterM3u(Q,o,C)},N=()=>{t.onExportValidM3uData(),v(4),_(!0)},U=Q=>{_(!1)},B=()=>{i([])},A=Q=>{l(Q.target.value)},$=()=>{v(5),_(!0)},W=()=>{console.log("selectedArr---",n),t.deleteShowM3uRow(n),i([])},V=Q=>{a(Q.target.checked)};return O.jsxs(wt,{sx:{border:"1px solid #868686",padding:"8px",borderRadius:"5px"},children:[O.jsx(nz,{open:y,onClose:U,clearSelectedArrFunc:B,setDialogMod:v,selectedArr:n,mod:g}),O.jsx(wt,{sx:{display:"flex",justifyContent:"space-between"},children:O.jsxs(wt,{children:[O.jsxs(wt,{sx:{marginBottom:"10px"},children:[O.jsx(co,{control:O.jsx(wp,{}),onChange:V,label:""}),n.length>0?O.jsx(Ur,{sx:{marginRight:"5px"},children:O.jsx(Xo,{size:"small",color:"error",onClick:W,variant:"outlined",startIcon:O.jsx(Vd,{}),children:e("")})}):"",n.length>0?O.jsx(Ur,{sx:{marginRight:"5px"},children:O.jsx(Xo,{size:"small",onClick:$,variant:"outlined",startIcon:O.jsx(f1e,{}),children:e("")})}):"",s?"":O.jsx(Ur,{sx:{marginRight:"5px"},children:O.jsx(Xo,{size:"small",onClick:N,variant:"contained",startIcon:O.jsx(h1e,{}),children:e("()")})})]}),s?O.jsx("div",{children:O.jsx(wt,{sx:{display:"flex"},children:O.jsxs(wt,{component:"form",sx:{marginBottom:"5px",display:"flex",alignItems:"flex-end"},children:[O.jsx(Ur,{sx:{marginRight:"5px",width:200},children:O.jsx(jn,{id:"outlined-name",variant:"outlined",size:"small",value:u,onChange:k,label:e("")})}),O.jsxs(Ur,{sx:{width:200,margin:0,marginRight:"5px"},size:"small",children:[O.jsx(Fu,{id:"demo-select-small",size:"small",children:e("")}),O.jsx(Bu,{labelId:"demo-select-small",id:"demo-select-small",size:"small",multiple:!0,value:o,onChange:A,input:O.jsx(Yp,{size:"small",label:e("")}),renderValue:Q=>Q.join(", "),MenuProps:BF,children:t.detailMenu.groups&&t.detailMenu.groups.map((Q,ie)=>O.jsxs(Fc,{value:Q,children:[O.jsx(wp,{checked:o.indexOf(Q)!==-1}),O.jsx($_,{primary:Q})]},ie))})]}),t.detailMenu.videoRevolution&&t.detailMenu.videoRevolution.length>0?O.jsxs(Ur,{sx:{width:200,margin:0,marginRight:"5px"},size:"small",children:[O.jsx(Fu,{id:"demo-select-small",size:"small",children:e("")}),O.jsx(Bu,{labelId:"demo-select-small",id:"demo-select-small",size:"small",multiple:!0,value:C,onChange:D,input:O.jsx(Yp,{size:"small",label:e("")}),renderValue:Q=>Q.join(", "),MenuProps:BF,children:t.detailMenu.videoRevolution.map((Q,ie)=>O.jsxs(Fc,{value:Q.value,children:[O.jsx(wp,{checked:Q.checked}),O.jsx($_,{primary:Q.name})]},ie))})]}):"",O.jsx(Ur,{sx:{marginRight:"5px"},children:O.jsx(Xo,{size:"small",onClick:P,variant:"contained",color:"success",startIcon:O.jsx(kk,{}),children:e("")})})]})})}):""]})})]})}const g1e=mr(O.jsx("path",{fillRule:"evenodd",d:"M4 11h16v2H4z"}));function ji(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function pm(r){"@babel/helpers - typeof";return pm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},pm(r)}function v1e(r,e){if(pm(r)!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e);if(pm(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}function iz(r){var e=v1e(r,"string");return pm(e)=="symbol"?e:e+""}function NF(r,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,iz(n.key),n)}}function os(r,e,t){return e&&NF(r.prototype,e),t&&NF(r,t),Object.defineProperty(r,"prototype",{writable:!1}),r}function So(r,e){if(e&&(pm(e)=="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return We(r)}function Qe(r,e,t){return(e=iz(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function sz(){var r=this.constructor.getDerivedStateFromProps(this.props,this.state);r!=null&&this.setState(r)}function az(r){function e(t){var n=this.constructor.getDerivedStateFromProps(r,t);return n??null}this.setState(e.bind(this))}function oz(r,e){try{var t=this.props,n=this.state;this.props=r,this.state=e,this.__reactInternalSnapshotFlag=!0,this.__reactInternalSnapshot=this.getSnapshotBeforeUpdate(t,n)}finally{this.props=t,this.state=n}}sz.__suppressDeprecationWarning=!0;az.__suppressDeprecationWarning=!0;oz.__suppressDeprecationWarning=!0;function Mv(r){var e=r.prototype;if(!e||!e.isReactComponent)throw new Error("Can only polyfill class components");if(typeof r.getDerivedStateFromProps!="function"&&typeof e.getSnapshotBeforeUpdate!="function")return r;var t=null,n=null,i=null;if(typeof e.componentWillMount=="function"?t="componentWillMount":typeof e.UNSAFE_componentWillMount=="function"&&(t="UNSAFE_componentWillMount"),typeof e.componentWillReceiveProps=="function"?n="componentWillReceiveProps":typeof e.UNSAFE_componentWillReceiveProps=="function"&&(n="UNSAFE_componentWillReceiveProps"),typeof e.componentWillUpdate=="function"?i="componentWillUpdate":typeof e.UNSAFE_componentWillUpdate=="function"&&(i="UNSAFE_componentWillUpdate"),t!==null||n!==null||i!==null){var s=r.displayName||r.name,a=typeof r.getDerivedStateFromProps=="function"?"getDerivedStateFromProps()":"getSnapshotBeforeUpdate()";throw Error(`Unsafe legacy lifecycles will not be called for components using new component APIs.

`+s+" uses "+a+" but also contains the following legacy lifecycles:"+(t!==null?`
  `+t:"")+(n!==null?`
  `+n:"")+(i!==null?`
  `+i:"")+`

The above lifecycles should be removed. Learn more about this warning here:
https://fb.me/react-async-component-lifecycle-hooks`)}if(typeof r.getDerivedStateFromProps=="function"&&(e.componentWillMount=sz,e.componentWillReceiveProps=az),typeof e.getSnapshotBeforeUpdate=="function"){if(typeof e.componentDidUpdate!="function")throw new Error("Cannot polyfill getSnapshotBeforeUpdate() for components that do not define componentDidUpdate() on the prototype");e.componentWillUpdate=oz;var o=e.componentDidUpdate;e.componentDidUpdate=function(u,c,h){var f=this.__reactInternalSnapshotFlag?this.__reactInternalSnapshot:h;o.call(this,u,c,f)}}return r}function lz(r){var e,t,n="";if(typeof r=="string"||typeof r=="number")n+=r;else if(typeof r=="object")if(Array.isArray(r))for(e=0;e<r.length;e++)r[e]&&(t=lz(r[e]))&&(n&&(n+=" "),n+=t);else for(e in r)r[e]&&(n&&(n+=" "),n+=e);return n}function Dl(){for(var r,e,t=0,n="";t<arguments.length;)(r=arguments[t++])&&(e=lz(r))&&(n&&(n+=" "),n+=e);return n}function UF(r){var e=r.cellCount,t=r.cellSize,n=r.computeMetadataCallback,i=r.computeMetadataCallbackProps,s=r.nextCellsCount,a=r.nextCellSize,o=r.nextScrollToIndex,l=r.scrollToIndex,u=r.updateScrollOffsetForScrollToIndex;(e!==s||(typeof t=="number"||typeof a=="number")&&t!==a)&&(n(i),l>=0&&l===o&&u())}function Y0(r,e){if(r==null)return{};var t,n,i=gS(r,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(r);for(n=0;n<s.length;n++)t=s[n],e.indexOf(t)===-1&&{}.propertyIsEnumerable.call(r,t)&&(i[t]=r[t])}return i}var y1e=(function(){function r(e){var t=e.cellCount,n=e.cellSizeGetter,i=e.estimatedCellSize;ji(this,r),Qe(this,"_cellSizeAndPositionData",{}),Qe(this,"_lastMeasuredIndex",-1),Qe(this,"_lastBatchedIndex",-1),Qe(this,"_cellCount",void 0),Qe(this,"_cellSizeGetter",void 0),Qe(this,"_estimatedCellSize",void 0),this._cellSizeGetter=n,this._cellCount=t,this._estimatedCellSize=i}return os(r,[{key:"areOffsetsAdjusted",value:function(){return!1}},{key:"configure",value:function(t){var n=t.cellCount,i=t.estimatedCellSize,s=t.cellSizeGetter;this._cellCount=n,this._estimatedCellSize=i,this._cellSizeGetter=s}},{key:"getCellCount",value:function(){return this._cellCount}},{key:"getEstimatedCellSize",value:function(){return this._estimatedCellSize}},{key:"getLastMeasuredIndex",value:function(){return this._lastMeasuredIndex}},{key:"getOffsetAdjustment",value:function(){return 0}},{key:"getSizeAndPositionOfCell",value:function(t){if(t<0||t>=this._cellCount)throw Error("Requested index ".concat(t," is outside of range 0..").concat(this._cellCount));if(t>this._lastMeasuredIndex)for(var n=this.getSizeAndPositionOfLastMeasuredCell(),i=n.offset+n.size,s=this._lastMeasuredIndex+1;s<=t;s++){var a=this._cellSizeGetter({index:s});if(a===void 0||isNaN(a))throw Error("Invalid size returned for cell ".concat(s," of value ").concat(a));a===null?(this._cellSizeAndPositionData[s]={offset:i,size:0},this._lastBatchedIndex=t):(this._cellSizeAndPositionData[s]={offset:i,size:a},i+=a,this._lastMeasuredIndex=t)}return this._cellSizeAndPositionData[t]}},{key:"getSizeAndPositionOfLastMeasuredCell",value:function(){return this._lastMeasuredIndex>=0?this._cellSizeAndPositionData[this._lastMeasuredIndex]:{offset:0,size:0}}},{key:"getTotalSize",value:function(){var t=this.getSizeAndPositionOfLastMeasuredCell(),n=t.offset+t.size,i=this._cellCount-this._lastMeasuredIndex-1,s=i*this._estimatedCellSize;return n+s}},{key:"getUpdatedOffsetForIndex",value:function(t){var n=t.align,i=n===void 0?"auto":n,s=t.containerSize,a=t.currentOffset,o=t.targetIndex;if(s<=0)return 0;var l=this.getSizeAndPositionOfCell(o),u=l.offset,c=u-s+l.size,h;switch(i){case"start":h=u;break;case"end":h=c;break;case"center":h=u-(s-l.size)/2;break;default:h=Math.max(c,Math.min(u,a));break}var f=this.getTotalSize();return Math.max(0,Math.min(f-s,h))}},{key:"getVisibleCellRange",value:function(t){var n=t.containerSize,i=t.offset,s=this.getTotalSize();if(s===0)return{};var a=i+n,o=this._findNearestCell(i),l=this.getSizeAndPositionOfCell(o);i=l.offset+l.size;for(var u=o;i<a&&u<this._cellCount-1;)u++,i+=this.getSizeAndPositionOfCell(u).size;return{start:o,stop:u}}},{key:"resetCell",value:function(t){this._lastMeasuredIndex=Math.min(this._lastMeasuredIndex,t-1)}},{key:"_binarySearch",value:function(t,n,i){for(;n<=t;){var s=n+Math.floor((t-n)/2),a=this.getSizeAndPositionOfCell(s).offset;if(a===i)return s;a<i?n=s+1:a>i&&(t=s-1)}return n>0?n-1:0}},{key:"_exponentialSearch",value:function(t,n){for(var i=1;t<this._cellCount&&this.getSizeAndPositionOfCell(t).offset<n;)t+=i,i*=2;return this._binarySearch(Math.min(t,this._cellCount-1),Math.floor(t/2),n)}},{key:"_findNearestCell",value:function(t){if(isNaN(t))throw Error("Invalid offset ".concat(t," specified"));t=Math.max(0,t);var n=this.getSizeAndPositionOfLastMeasuredCell(),i=Math.max(0,this._lastMeasuredIndex);return n.offset>=t?this._binarySearch(i,0,t):this._exponentialSearch(i,t)}}]),r})(),x1e=15e5,_1e=16777100,b1e=function(){return typeof window<"u"},S1e=function(){return!!window.chrome},T1e=function(){return b1e()&&S1e()?_1e:x1e},$F=(function(){function r(e){var t=e.maxScrollSize,n=t===void 0?T1e():t,i=Y0(e,["maxScrollSize"]);ji(this,r),Qe(this,"_cellSizeAndPositionManager",void 0),Qe(this,"_maxScrollSize",void 0),this._cellSizeAndPositionManager=new y1e(i),this._maxScrollSize=n}return os(r,[{key:"areOffsetsAdjusted",value:function(){return this._cellSizeAndPositionManager.getTotalSize()>this._maxScrollSize}},{key:"configure",value:function(t){this._cellSizeAndPositionManager.configure(t)}},{key:"getCellCount",value:function(){return this._cellSizeAndPositionManager.getCellCount()}},{key:"getEstimatedCellSize",value:function(){return this._cellSizeAndPositionManager.getEstimatedCellSize()}},{key:"getLastMeasuredIndex",value:function(){return this._cellSizeAndPositionManager.getLastMeasuredIndex()}},{key:"getOffsetAdjustment",value:function(t){var n=t.containerSize,i=t.offset,s=this._cellSizeAndPositionManager.getTotalSize(),a=this.getTotalSize(),o=this._getOffsetPercentage({containerSize:n,offset:i,totalSize:a});return Math.round(o*(a-s))}},{key:"getSizeAndPositionOfCell",value:function(t){return this._cellSizeAndPositionManager.getSizeAndPositionOfCell(t)}},{key:"getSizeAndPositionOfLastMeasuredCell",value:function(){return this._cellSizeAndPositionManager.getSizeAndPositionOfLastMeasuredCell()}},{key:"getTotalSize",value:function(){return Math.min(this._maxScrollSize,this._cellSizeAndPositionManager.getTotalSize())}},{key:"getUpdatedOffsetForIndex",value:function(t){var n=t.align,i=n===void 0?"auto":n,s=t.containerSize,a=t.currentOffset,o=t.targetIndex;a=this._safeOffsetToOffset({containerSize:s,offset:a});var l=this._cellSizeAndPositionManager.getUpdatedOffsetForIndex({align:i,containerSize:s,currentOffset:a,targetIndex:o});return this._offsetToSafeOffset({containerSize:s,offset:l})}},{key:"getVisibleCellRange",value:function(t){var n=t.containerSize,i=t.offset;return i=this._safeOffsetToOffset({containerSize:n,offset:i}),this._cellSizeAndPositionManager.getVisibleCellRange({containerSize:n,offset:i})}},{key:"resetCell",value:function(t){this._cellSizeAndPositionManager.resetCell(t)}},{key:"_getOffsetPercentage",value:function(t){var n=t.containerSize,i=t.offset,s=t.totalSize;return s<=n?0:i/(s-n)}},{key:"_offsetToSafeOffset",value:function(t){var n=t.containerSize,i=t.offset,s=this._cellSizeAndPositionManager.getTotalSize(),a=this.getTotalSize();if(s===a)return i;var o=this._getOffsetPercentage({containerSize:n,offset:i,totalSize:s});return Math.round(o*(a-n))}},{key:"_safeOffsetToOffset",value:function(t){var n=t.containerSize,i=t.offset,s=this._cellSizeAndPositionManager.getTotalSize(),a=this.getTotalSize();if(s===a)return i;var o=this._getOffsetPercentage({containerSize:n,offset:i,totalSize:a});return Math.round(o*(s-n))}}]),r})();function mm(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,e={};return function(t){var n=t.callback,i=t.indices,s=Object.keys(i),a=!r||s.every(function(l){var u=i[l];return Array.isArray(u)?u.length>0:u>=0}),o=s.length!==Object.keys(e).length||s.some(function(l){var u=e[l],c=i[l];return Array.isArray(c)?u.join(",")!==c.join(","):u!==c});e=i,a&&o&&n(i)}}var lx=-1,Tc=1;function C1e(r){var e=r.cellCount,t=r.overscanCellsCount,n=r.scrollDirection,i=r.startIndex,s=r.stopIndex;return n===Tc?{overscanStartIndex:Math.max(0,i),overscanStopIndex:Math.min(e-1,s+t)}:{overscanStartIndex:Math.max(0,i-t),overscanStopIndex:Math.min(e-1,s)}}function jF(r){var e=r.cellSize,t=r.cellSizeAndPositionManager,n=r.previousCellsCount,i=r.previousCellSize,s=r.previousScrollToAlignment,a=r.previousScrollToIndex,o=r.previousSize,l=r.scrollOffset,u=r.scrollToAlignment,c=r.scrollToIndex,h=r.size,f=r.sizeJustIncreasedFromZero,g=r.updateScrollIndexCallback,v=t.getCellCount(),y=c>=0&&c<v,_=h!==o||f||!i||typeof e=="number"&&e!==i;y&&(_||u!==s||c!==a)?g(c):!y&&v>0&&(h<o||v<n)&&l>t.getTotalSize()-h&&g(v-1)}function w1e(r){for(var e=r.cellCache,t=r.cellRenderer,n=r.columnSizeAndPositionManager,i=r.columnStartIndex,s=r.columnStopIndex,a=r.deferredMeasurementCache,o=r.horizontalOffsetAdjustment,l=r.isScrolling,u=r.isScrollingOptOut,c=r.parent,h=r.rowSizeAndPositionManager,f=r.rowStartIndex,g=r.rowStopIndex,v=r.styleCache,y=r.verticalOffsetAdjustment,_=r.visibleColumnIndices,C=r.visibleRowIndices,E=[],D=n.areOffsetsAdjusted()||h.areOffsetsAdjusted(),I=!l&&!D,k=f;k<=g;k++)for(var P=h.getSizeAndPositionOfCell(k),N=i;N<=s;N++){var U=n.getSizeAndPositionOfCell(N),B=N>=_.start&&N<=_.stop&&k>=C.start&&k<=C.stop,A="".concat(k,"-").concat(N),$=void 0;I&&v[A]?$=v[A]:a&&!a.has(k,N)?$={height:"auto",left:0,position:"absolute",top:0,width:"auto"}:($={height:P.size,left:U.offset+o,position:"absolute",top:P.offset+y,width:U.size},v[A]=$);var W={columnIndex:N,isScrolling:l,isVisible:B,key:A,parent:c,rowIndex:k,style:$},V=void 0;(u||l)&&!o&&!y?(e[A]||(e[A]=t(W)),V=e[A]):V=t(W),!(V==null||V===!1)&&E.push(V)}return E}const E1e=!!(typeof window<"u"&&window.document&&window.document.createElement);var ux;function EE(r){if((!ux&&ux!==0||r)&&E1e){var e=document.createElement("div");e.style.position="absolute",e.style.top="-9999px",e.style.width="50px",e.style.height="50px",e.style.overflow="scroll",document.body.appendChild(e),ux=e.offsetWidth-e.clientWidth,document.body.removeChild(e)}return ux}var na;typeof window<"u"?na=window:typeof self<"u"?na=self:na={};var k1e=na.requestAnimationFrame||na.webkitRequestAnimationFrame||na.mozRequestAnimationFrame||na.oRequestAnimationFrame||na.msRequestAnimationFrame||function(r){return na.setTimeout(r,1e3/60)},A1e=na.cancelAnimationFrame||na.webkitCancelAnimationFrame||na.mozCancelAnimationFrame||na.oCancelAnimationFrame||na.msCancelAnimationFrame||function(r){na.clearTimeout(r)},zF=k1e,D1e=A1e,gm=function(e){return D1e(e.id)},AD=function(e,t){var n;Promise.resolve().then(function(){n=Date.now()});var i=function a(){Date.now()-n>=t?e.call():s.id=zF(a)},s={id:zF(i)};return s},HF,VF;function WF(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function Ph(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?WF(t,!0).forEach(function(n){Qe(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):WF(t).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}var I1e=150,_w={OBSERVED:"observed",REQUESTED:"requested"},P1e=function(){return null},Md=(VF=HF=(function(r){Va(e,r);function e(t){var n;ji(this,e),n=So(this,Hs(e).call(this,t)),Qe(We(n),"_onGridRenderedMemoizer",mm()),Qe(We(n),"_onScrollMemoizer",mm(!1)),Qe(We(n),"_deferredInvalidateColumnIndex",null),Qe(We(n),"_deferredInvalidateRowIndex",null),Qe(We(n),"_recomputeScrollLeftFlag",!1),Qe(We(n),"_recomputeScrollTopFlag",!1),Qe(We(n),"_horizontalScrollBarSize",0),Qe(We(n),"_verticalScrollBarSize",0),Qe(We(n),"_scrollbarPresenceChanged",!1),Qe(We(n),"_scrollingContainer",void 0),Qe(We(n),"_childrenToDisplay",void 0),Qe(We(n),"_columnStartIndex",void 0),Qe(We(n),"_columnStopIndex",void 0),Qe(We(n),"_rowStartIndex",void 0),Qe(We(n),"_rowStopIndex",void 0),Qe(We(n),"_renderedColumnStartIndex",0),Qe(We(n),"_renderedColumnStopIndex",0),Qe(We(n),"_renderedRowStartIndex",0),Qe(We(n),"_renderedRowStopIndex",0),Qe(We(n),"_initialScrollTop",void 0),Qe(We(n),"_initialScrollLeft",void 0),Qe(We(n),"_disablePointerEventsTimeoutId",void 0),Qe(We(n),"_styleCache",{}),Qe(We(n),"_cellCache",{}),Qe(We(n),"_debounceScrollEndedCallback",function(){n._disablePointerEventsTimeoutId=null,n.setState({isScrolling:!1,needToResetStyleCache:!1})}),Qe(We(n),"_invokeOnGridRenderedHelper",function(){var a=n.props.onSectionRendered;n._onGridRenderedMemoizer({callback:a,indices:{columnOverscanStartIndex:n._columnStartIndex,columnOverscanStopIndex:n._columnStopIndex,columnStartIndex:n._renderedColumnStartIndex,columnStopIndex:n._renderedColumnStopIndex,rowOverscanStartIndex:n._rowStartIndex,rowOverscanStopIndex:n._rowStopIndex,rowStartIndex:n._renderedRowStartIndex,rowStopIndex:n._renderedRowStopIndex}})}),Qe(We(n),"_setScrollingContainerRef",function(a){n._scrollingContainer=a}),Qe(We(n),"_onScroll",function(a){a.target===n._scrollingContainer&&n.handleScrollEvent(a.target)});var i=new $F({cellCount:t.columnCount,cellSizeGetter:function(o){return e._wrapSizeGetter(t.columnWidth)(o)},estimatedCellSize:e._getEstimatedColumnSize(t)}),s=new $F({cellCount:t.rowCount,cellSizeGetter:function(o){return e._wrapSizeGetter(t.rowHeight)(o)},estimatedCellSize:e._getEstimatedRowSize(t)});return n.state={instanceProps:{columnSizeAndPositionManager:i,rowSizeAndPositionManager:s,prevColumnWidth:t.columnWidth,prevRowHeight:t.rowHeight,prevColumnCount:t.columnCount,prevRowCount:t.rowCount,prevIsScrolling:t.isScrolling===!0,prevScrollToColumn:t.scrollToColumn,prevScrollToRow:t.scrollToRow,scrollbarSize:0,scrollbarSizeMeasured:!1},isScrolling:!1,scrollDirectionHorizontal:Tc,scrollDirectionVertical:Tc,scrollLeft:0,scrollTop:0,scrollPositionChangeReason:null,needToResetStyleCache:!1},t.scrollToRow>0&&(n._initialScrollTop=n._getCalculatedScrollTop(t,n.state)),t.scrollToColumn>0&&(n._initialScrollLeft=n._getCalculatedScrollLeft(t,n.state)),n}return os(e,[{key:"getOffsetForCell",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=n.alignment,s=i===void 0?this.props.scrollToAlignment:i,a=n.columnIndex,o=a===void 0?this.props.scrollToColumn:a,l=n.rowIndex,u=l===void 0?this.props.scrollToRow:l,c=Ph({},this.props,{scrollToAlignment:s,scrollToColumn:o,scrollToRow:u});return{scrollLeft:this._getCalculatedScrollLeft(c),scrollTop:this._getCalculatedScrollTop(c)}}},{key:"getTotalRowsHeight",value:function(){return this.state.instanceProps.rowSizeAndPositionManager.getTotalSize()}},{key:"getTotalColumnsWidth",value:function(){return this.state.instanceProps.columnSizeAndPositionManager.getTotalSize()}},{key:"handleScrollEvent",value:function(n){var i=n.scrollLeft,s=i===void 0?0:i,a=n.scrollTop,o=a===void 0?0:a;if(!(o<0)){this._debounceScrollEnded();var l=this.props,u=l.autoHeight,c=l.autoWidth,h=l.height,f=l.width,g=this.state.instanceProps,v=g.scrollbarSize,y=g.rowSizeAndPositionManager.getTotalSize(),_=g.columnSizeAndPositionManager.getTotalSize(),C=Math.min(Math.max(0,_-f+v),s),E=Math.min(Math.max(0,y-h+v),o);if(this.state.scrollLeft!==C||this.state.scrollTop!==E){var D=C!==this.state.scrollLeft?C>this.state.scrollLeft?Tc:lx:this.state.scrollDirectionHorizontal,I=E!==this.state.scrollTop?E>this.state.scrollTop?Tc:lx:this.state.scrollDirectionVertical,k={isScrolling:!0,scrollDirectionHorizontal:D,scrollDirectionVertical:I,scrollPositionChangeReason:_w.OBSERVED};u||(k.scrollTop=E),c||(k.scrollLeft=C),k.needToResetStyleCache=!1,this.setState(k)}this._invokeOnScrollMemoizer({scrollLeft:C,scrollTop:E,totalColumnsWidth:_,totalRowsHeight:y})}}},{key:"invalidateCellSizeAfterRender",value:function(n){var i=n.columnIndex,s=n.rowIndex;this._deferredInvalidateColumnIndex=typeof this._deferredInvalidateColumnIndex=="number"?Math.min(this._deferredInvalidateColumnIndex,i):i,this._deferredInvalidateRowIndex=typeof this._deferredInvalidateRowIndex=="number"?Math.min(this._deferredInvalidateRowIndex,s):s}},{key:"measureAllCells",value:function(){var n=this.props,i=n.columnCount,s=n.rowCount,a=this.state.instanceProps;a.columnSizeAndPositionManager.getSizeAndPositionOfCell(i-1),a.rowSizeAndPositionManager.getSizeAndPositionOfCell(s-1)}},{key:"recomputeGridSize",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=n.columnIndex,s=i===void 0?0:i,a=n.rowIndex,o=a===void 0?0:a,l=this.props,u=l.scrollToColumn,c=l.scrollToRow,h=this.state.instanceProps;h.columnSizeAndPositionManager.resetCell(s),h.rowSizeAndPositionManager.resetCell(o),this._recomputeScrollLeftFlag=u>=0&&(this.state.scrollDirectionHorizontal===Tc?s<=u:s>=u),this._recomputeScrollTopFlag=c>=0&&(this.state.scrollDirectionVertical===Tc?o<=c:o>=c),this._styleCache={},this._cellCache={},this.forceUpdate()}},{key:"scrollToCell",value:function(n){var i=n.columnIndex,s=n.rowIndex,a=this.props.columnCount,o=this.props;a>1&&i!==void 0&&this._updateScrollLeftForScrollToColumn(Ph({},o,{scrollToColumn:i})),s!==void 0&&this._updateScrollTopForScrollToRow(Ph({},o,{scrollToRow:s}))}},{key:"componentDidMount",value:function(){var n=this.props,i=n.getScrollbarSize,s=n.height,a=n.scrollLeft,o=n.scrollToColumn,l=n.scrollTop,u=n.scrollToRow,c=n.width,h=this.state.instanceProps;if(this._initialScrollTop=0,this._initialScrollLeft=0,this._handleInvalidatedGridSize(),h.scrollbarSizeMeasured||this.setState(function(v){var y=Ph({},v,{needToResetStyleCache:!1});return y.instanceProps.scrollbarSize=i(),y.instanceProps.scrollbarSizeMeasured=!0,y}),typeof a=="number"&&a>=0||typeof l=="number"&&l>=0){var f=e._getScrollToPositionStateUpdate({prevState:this.state,scrollLeft:a,scrollTop:l});f&&(f.needToResetStyleCache=!1,this.setState(f))}this._scrollingContainer&&(this._scrollingContainer.scrollLeft!==this.state.scrollLeft&&(this._scrollingContainer.scrollLeft=this.state.scrollLeft),this._scrollingContainer.scrollTop!==this.state.scrollTop&&(this._scrollingContainer.scrollTop=this.state.scrollTop));var g=s>0&&c>0;o>=0&&g&&this._updateScrollLeftForScrollToColumn(),u>=0&&g&&this._updateScrollTopForScrollToRow(),this._invokeOnGridRenderedHelper(),this._invokeOnScrollMemoizer({scrollLeft:a||0,scrollTop:l||0,totalColumnsWidth:h.columnSizeAndPositionManager.getTotalSize(),totalRowsHeight:h.rowSizeAndPositionManager.getTotalSize()}),this._maybeCallOnScrollbarPresenceChange()}},{key:"componentDidUpdate",value:function(n,i){var s=this,a=this.props,o=a.autoHeight,l=a.autoWidth,u=a.columnCount,c=a.height,h=a.rowCount,f=a.scrollToAlignment,g=a.scrollToColumn,v=a.scrollToRow,y=a.width,_=this.state,C=_.scrollLeft,E=_.scrollPositionChangeReason,D=_.scrollTop,I=_.instanceProps;this._handleInvalidatedGridSize();var k=u>0&&n.columnCount===0||h>0&&n.rowCount===0;E===_w.REQUESTED&&(!l&&C>=0&&(C!==this._scrollingContainer.scrollLeft||k)&&(this._scrollingContainer.scrollLeft=C),!o&&D>=0&&(D!==this._scrollingContainer.scrollTop||k)&&(this._scrollingContainer.scrollTop=D));var P=(n.width===0||n.height===0)&&c>0&&y>0;if(this._recomputeScrollLeftFlag?(this._recomputeScrollLeftFlag=!1,this._updateScrollLeftForScrollToColumn(this.props)):jF({cellSizeAndPositionManager:I.columnSizeAndPositionManager,previousCellsCount:n.columnCount,previousCellSize:n.columnWidth,previousScrollToAlignment:n.scrollToAlignment,previousScrollToIndex:n.scrollToColumn,previousSize:n.width,scrollOffset:C,scrollToAlignment:f,scrollToIndex:g,size:y,sizeJustIncreasedFromZero:P,updateScrollIndexCallback:function(){return s._updateScrollLeftForScrollToColumn(s.props)}}),this._recomputeScrollTopFlag?(this._recomputeScrollTopFlag=!1,this._updateScrollTopForScrollToRow(this.props)):jF({cellSizeAndPositionManager:I.rowSizeAndPositionManager,previousCellsCount:n.rowCount,previousCellSize:n.rowHeight,previousScrollToAlignment:n.scrollToAlignment,previousScrollToIndex:n.scrollToRow,previousSize:n.height,scrollOffset:D,scrollToAlignment:f,scrollToIndex:v,size:c,sizeJustIncreasedFromZero:P,updateScrollIndexCallback:function(){return s._updateScrollTopForScrollToRow(s.props)}}),this._invokeOnGridRenderedHelper(),C!==i.scrollLeft||D!==i.scrollTop){var N=I.rowSizeAndPositionManager.getTotalSize(),U=I.columnSizeAndPositionManager.getTotalSize();this._invokeOnScrollMemoizer({scrollLeft:C,scrollTop:D,totalColumnsWidth:U,totalRowsHeight:N})}this._maybeCallOnScrollbarPresenceChange()}},{key:"componentWillUnmount",value:function(){this._disablePointerEventsTimeoutId&&gm(this._disablePointerEventsTimeoutId)}},{key:"render",value:function(){var n=this.props,i=n.autoContainerWidth,s=n.autoHeight,a=n.autoWidth,o=n.className,l=n.containerProps,u=n.containerRole,c=n.containerStyle,h=n.height,f=n.id,g=n.noContentRenderer,v=n.role,y=n.style,_=n.tabIndex,C=n.width,E=this.state,D=E.instanceProps,I=E.needToResetStyleCache,k=this._isScrolling(),P={boxSizing:"border-box",direction:"ltr",height:s?"auto":h,position:"relative",width:a?"auto":C,WebkitOverflowScrolling:"touch",willChange:"transform"};I&&(this._styleCache={}),this.state.isScrolling||this._resetStyleCache(),this._calculateChildrenToRender(this.props,this.state);var N=D.columnSizeAndPositionManager.getTotalSize(),U=D.rowSizeAndPositionManager.getTotalSize(),B=U>h?D.scrollbarSize:0,A=N>C?D.scrollbarSize:0;(A!==this._horizontalScrollBarSize||B!==this._verticalScrollBarSize)&&(this._horizontalScrollBarSize=A,this._verticalScrollBarSize=B,this._scrollbarPresenceChanged=!0),P.overflowX=N+B<=C?"hidden":"auto",P.overflowY=U+A<=h?"hidden":"auto";var $=this._childrenToDisplay,W=$.length===0&&h>0&&C>0;return M.createElement("div",sr({ref:this._setScrollingContainerRef},l,{"aria-label":this.props["aria-label"],"aria-readonly":this.props["aria-readonly"],className:Dl("ReactVirtualized__Grid",o),id:f,onScroll:this._onScroll,role:v,style:Ph({},P,{},y),tabIndex:_}),$.length>0&&M.createElement("div",{className:"ReactVirtualized__Grid__innerScrollContainer",role:u,style:Ph({width:i?"auto":N,height:U,maxWidth:N,maxHeight:U,overflow:"hidden",pointerEvents:k?"none":"",position:"relative"},c)},$),W&&g())}},{key:"_calculateChildrenToRender",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.props,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.state,s=n.cellRenderer,a=n.cellRangeRenderer,o=n.columnCount,l=n.deferredMeasurementCache,u=n.height,c=n.overscanColumnCount,h=n.overscanIndicesGetter,f=n.overscanRowCount,g=n.rowCount,v=n.width,y=n.isScrollingOptOut,_=i.scrollDirectionHorizontal,C=i.scrollDirectionVertical,E=i.instanceProps,D=this._initialScrollTop>0?this._initialScrollTop:i.scrollTop,I=this._initialScrollLeft>0?this._initialScrollLeft:i.scrollLeft,k=this._isScrolling(n,i);if(this._childrenToDisplay=[],u>0&&v>0){var P=E.columnSizeAndPositionManager.getVisibleCellRange({containerSize:v,offset:I}),N=E.rowSizeAndPositionManager.getVisibleCellRange({containerSize:u,offset:D}),U=E.columnSizeAndPositionManager.getOffsetAdjustment({containerSize:v,offset:I}),B=E.rowSizeAndPositionManager.getOffsetAdjustment({containerSize:u,offset:D});this._renderedColumnStartIndex=P.start,this._renderedColumnStopIndex=P.stop,this._renderedRowStartIndex=N.start,this._renderedRowStopIndex=N.stop;var A=h({direction:"horizontal",cellCount:o,overscanCellsCount:c,scrollDirection:_,startIndex:typeof P.start=="number"?P.start:0,stopIndex:typeof P.stop=="number"?P.stop:-1}),$=h({direction:"vertical",cellCount:g,overscanCellsCount:f,scrollDirection:C,startIndex:typeof N.start=="number"?N.start:0,stopIndex:typeof N.stop=="number"?N.stop:-1}),W=A.overscanStartIndex,V=A.overscanStopIndex,Q=$.overscanStartIndex,ie=$.overscanStopIndex;if(l){if(!l.hasFixedHeight()){for(var ne=Q;ne<=ie;ne++)if(!l.has(ne,0)){W=0,V=o-1;break}}if(!l.hasFixedWidth()){for(var ue=W;ue<=V;ue++)if(!l.has(0,ue)){Q=0,ie=g-1;break}}}this._childrenToDisplay=a({cellCache:this._cellCache,cellRenderer:s,columnSizeAndPositionManager:E.columnSizeAndPositionManager,columnStartIndex:W,columnStopIndex:V,deferredMeasurementCache:l,horizontalOffsetAdjustment:U,isScrolling:k,isScrollingOptOut:y,parent:this,rowSizeAndPositionManager:E.rowSizeAndPositionManager,rowStartIndex:Q,rowStopIndex:ie,scrollLeft:I,scrollTop:D,styleCache:this._styleCache,verticalOffsetAdjustment:B,visibleColumnIndices:P,visibleRowIndices:N}),this._columnStartIndex=W,this._columnStopIndex=V,this._rowStartIndex=Q,this._rowStopIndex=ie}}},{key:"_debounceScrollEnded",value:function(){var n=this.props.scrollingResetTimeInterval;this._disablePointerEventsTimeoutId&&gm(this._disablePointerEventsTimeoutId),this._disablePointerEventsTimeoutId=AD(this._debounceScrollEndedCallback,n)}},{key:"_handleInvalidatedGridSize",value:function(){if(typeof this._deferredInvalidateColumnIndex=="number"&&typeof this._deferredInvalidateRowIndex=="number"){var n=this._deferredInvalidateColumnIndex,i=this._deferredInvalidateRowIndex;this._deferredInvalidateColumnIndex=null,this._deferredInvalidateRowIndex=null,this.recomputeGridSize({columnIndex:n,rowIndex:i})}}},{key:"_invokeOnScrollMemoizer",value:function(n){var i=this,s=n.scrollLeft,a=n.scrollTop,o=n.totalColumnsWidth,l=n.totalRowsHeight;this._onScrollMemoizer({callback:function(c){var h=c.scrollLeft,f=c.scrollTop,g=i.props,v=g.height,y=g.onScroll,_=g.width;y({clientHeight:v,clientWidth:_,scrollHeight:l,scrollLeft:h,scrollTop:f,scrollWidth:o})},indices:{scrollLeft:s,scrollTop:a}})}},{key:"_isScrolling",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.props,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.state;return Object.hasOwnProperty.call(n,"isScrolling")?!!n.isScrolling:!!i.isScrolling}},{key:"_maybeCallOnScrollbarPresenceChange",value:function(){if(this._scrollbarPresenceChanged){var n=this.props.onScrollbarPresenceChange;this._scrollbarPresenceChanged=!1,n({horizontal:this._horizontalScrollBarSize>0,size:this.state.instanceProps.scrollbarSize,vertical:this._verticalScrollBarSize>0})}}},{key:"scrollToPosition",value:function(n){var i=n.scrollLeft,s=n.scrollTop,a=e._getScrollToPositionStateUpdate({prevState:this.state,scrollLeft:i,scrollTop:s});a&&(a.needToResetStyleCache=!1,this.setState(a))}},{key:"_getCalculatedScrollLeft",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.props,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.state;return e._getCalculatedScrollLeft(n,i)}},{key:"_updateScrollLeftForScrollToColumn",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.props,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.state,s=e._getScrollLeftForScrollToColumnStateUpdate(n,i);s&&(s.needToResetStyleCache=!1,this.setState(s))}},{key:"_getCalculatedScrollTop",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.props,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.state;return e._getCalculatedScrollTop(n,i)}},{key:"_resetStyleCache",value:function(){var n=this._styleCache,i=this._cellCache,s=this.props.isScrollingOptOut;this._cellCache={},this._styleCache={};for(var a=this._rowStartIndex;a<=this._rowStopIndex;a++)for(var o=this._columnStartIndex;o<=this._columnStopIndex;o++){var l="".concat(a,"-").concat(o);this._styleCache[l]=n[l],s&&(this._cellCache[l]=i[l])}}},{key:"_updateScrollTopForScrollToRow",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.props,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.state,s=e._getScrollTopForScrollToRowStateUpdate(n,i);s&&(s.needToResetStyleCache=!1,this.setState(s))}}],[{key:"getDerivedStateFromProps",value:function(n,i){var s={};n.columnCount===0&&i.scrollLeft!==0||n.rowCount===0&&i.scrollTop!==0?(s.scrollLeft=0,s.scrollTop=0):(n.scrollLeft!==i.scrollLeft&&n.scrollToColumn<0||n.scrollTop!==i.scrollTop&&n.scrollToRow<0)&&Object.assign(s,e._getScrollToPositionStateUpdate({prevState:i,scrollLeft:n.scrollLeft,scrollTop:n.scrollTop}));var a=i.instanceProps;s.needToResetStyleCache=!1,(n.columnWidth!==a.prevColumnWidth||n.rowHeight!==a.prevRowHeight)&&(s.needToResetStyleCache=!0),a.columnSizeAndPositionManager.configure({cellCount:n.columnCount,estimatedCellSize:e._getEstimatedColumnSize(n),cellSizeGetter:e._wrapSizeGetter(n.columnWidth)}),a.rowSizeAndPositionManager.configure({cellCount:n.rowCount,estimatedCellSize:e._getEstimatedRowSize(n),cellSizeGetter:e._wrapSizeGetter(n.rowHeight)}),(a.prevColumnCount===0||a.prevRowCount===0)&&(a.prevColumnCount=0,a.prevRowCount=0),n.autoHeight&&n.isScrolling===!1&&a.prevIsScrolling===!0&&Object.assign(s,{isScrolling:!1});var o,l;return UF({cellCount:a.prevColumnCount,cellSize:typeof a.prevColumnWidth=="number"?a.prevColumnWidth:null,computeMetadataCallback:function(){return a.columnSizeAndPositionManager.resetCell(0)},computeMetadataCallbackProps:n,nextCellsCount:n.columnCount,nextCellSize:typeof n.columnWidth=="number"?n.columnWidth:null,nextScrollToIndex:n.scrollToColumn,scrollToIndex:a.prevScrollToColumn,updateScrollOffsetForScrollToIndex:function(){o=e._getScrollLeftForScrollToColumnStateUpdate(n,i)}}),UF({cellCount:a.prevRowCount,cellSize:typeof a.prevRowHeight=="number"?a.prevRowHeight:null,computeMetadataCallback:function(){return a.rowSizeAndPositionManager.resetCell(0)},computeMetadataCallbackProps:n,nextCellsCount:n.rowCount,nextCellSize:typeof n.rowHeight=="number"?n.rowHeight:null,nextScrollToIndex:n.scrollToRow,scrollToIndex:a.prevScrollToRow,updateScrollOffsetForScrollToIndex:function(){l=e._getScrollTopForScrollToRowStateUpdate(n,i)}}),a.prevColumnCount=n.columnCount,a.prevColumnWidth=n.columnWidth,a.prevIsScrolling=n.isScrolling===!0,a.prevRowCount=n.rowCount,a.prevRowHeight=n.rowHeight,a.prevScrollToColumn=n.scrollToColumn,a.prevScrollToRow=n.scrollToRow,a.scrollbarSize=n.getScrollbarSize(),a.scrollbarSize===void 0?(a.scrollbarSizeMeasured=!1,a.scrollbarSize=0):a.scrollbarSizeMeasured=!0,s.instanceProps=a,Ph({},s,{},o,{},l)}},{key:"_getEstimatedColumnSize",value:function(n){return typeof n.columnWidth=="number"?n.columnWidth:n.estimatedColumnSize}},{key:"_getEstimatedRowSize",value:function(n){return typeof n.rowHeight=="number"?n.rowHeight:n.estimatedRowSize}},{key:"_getScrollToPositionStateUpdate",value:function(n){var i=n.prevState,s=n.scrollLeft,a=n.scrollTop,o={scrollPositionChangeReason:_w.REQUESTED};return typeof s=="number"&&s>=0&&(o.scrollDirectionHorizontal=s>i.scrollLeft?Tc:lx,o.scrollLeft=s),typeof a=="number"&&a>=0&&(o.scrollDirectionVertical=a>i.scrollTop?Tc:lx,o.scrollTop=a),typeof s=="number"&&s>=0&&s!==i.scrollLeft||typeof a=="number"&&a>=0&&a!==i.scrollTop?o:{}}},{key:"_wrapSizeGetter",value:function(n){return typeof n=="function"?n:function(){return n}}},{key:"_getCalculatedScrollLeft",value:function(n,i){var s=n.columnCount,a=n.height,o=n.scrollToAlignment,l=n.scrollToColumn,u=n.width,c=i.scrollLeft,h=i.instanceProps;if(s>0){var f=s-1,g=l<0?f:Math.min(f,l),v=h.rowSizeAndPositionManager.getTotalSize(),y=h.scrollbarSizeMeasured&&v>a?h.scrollbarSize:0;return h.columnSizeAndPositionManager.getUpdatedOffsetForIndex({align:o,containerSize:u-y,currentOffset:c,targetIndex:g})}return 0}},{key:"_getScrollLeftForScrollToColumnStateUpdate",value:function(n,i){var s=i.scrollLeft,a=e._getCalculatedScrollLeft(n,i);return typeof a=="number"&&a>=0&&s!==a?e._getScrollToPositionStateUpdate({prevState:i,scrollLeft:a,scrollTop:-1}):{}}},{key:"_getCalculatedScrollTop",value:function(n,i){var s=n.height,a=n.rowCount,o=n.scrollToAlignment,l=n.scrollToRow,u=n.width,c=i.scrollTop,h=i.instanceProps;if(a>0){var f=a-1,g=l<0?f:Math.min(f,l),v=h.columnSizeAndPositionManager.getTotalSize(),y=h.scrollbarSizeMeasured&&v>u?h.scrollbarSize:0;return h.rowSizeAndPositionManager.getUpdatedOffsetForIndex({align:o,containerSize:s-y,currentOffset:c,targetIndex:g})}return 0}},{key:"_getScrollTopForScrollToRowStateUpdate",value:function(n,i){var s=i.scrollTop,a=e._getCalculatedScrollTop(n,i);return typeof a=="number"&&a>=0&&s!==a?e._getScrollToPositionStateUpdate({prevState:i,scrollLeft:-1,scrollTop:a}):{}}}]),e})(M.PureComponent),Qe(HF,"propTypes",null),VF);Qe(Md,"defaultProps",{"aria-label":"grid","aria-readonly":!0,autoContainerWidth:!1,autoHeight:!1,autoWidth:!1,cellRangeRenderer:w1e,containerRole:"rowgroup",containerStyle:{},estimatedColumnSize:100,estimatedRowSize:30,getScrollbarSize:EE,noContentRenderer:P1e,onScroll:function(){},onScrollbarPresenceChange:function(){},onSectionRendered:function(){},overscanColumnCount:0,overscanIndicesGetter:C1e,overscanRowCount:10,role:"grid",scrollingResetTimeInterval:I1e,scrollToAlignment:"auto",scrollToColumn:-1,scrollToRow:-1,style:{},tabIndex:0,isScrollingOptOut:!1});Mv(Md);var R1e=1;function uz(r){var e=r.cellCount,t=r.overscanCellsCount,n=r.scrollDirection,i=r.startIndex,s=r.stopIndex;return t=Math.max(1,t),n===R1e?{overscanStartIndex:Math.max(0,i-1),overscanStopIndex:Math.min(e-1,s+t)}:{overscanStartIndex:Math.max(0,i-t),overscanStopIndex:Math.min(e-1,s+1)}}var qF,GF;function KF(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function L1e(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?KF(t,!0).forEach(function(n){Qe(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):KF(t).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}var cz=(GF=qF=(function(r){Va(e,r);function e(){var t,n;ji(this,e);for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return n=So(this,(t=Hs(e)).call.apply(t,[this].concat(s))),Qe(We(n),"state",{scrollToColumn:0,scrollToRow:0,instanceProps:{prevScrollToColumn:0,prevScrollToRow:0}}),Qe(We(n),"_columnStartIndex",0),Qe(We(n),"_columnStopIndex",0),Qe(We(n),"_rowStartIndex",0),Qe(We(n),"_rowStopIndex",0),Qe(We(n),"_onKeyDown",function(o){var l=n.props,u=l.columnCount,c=l.disabled,h=l.mode,f=l.rowCount;if(!c){var g=n._getScrollState(),v=g.scrollToColumn,y=g.scrollToRow,_=n._getScrollState(),C=_.scrollToColumn,E=_.scrollToRow;switch(o.key){case"ArrowDown":E=Math.min(h==="cells"?E+1:n._rowStopIndex+1,f-1);break;case"ArrowLeft":C=Math.max(h==="cells"?C-1:n._columnStartIndex-1,0);break;case"ArrowRight":C=Math.min(h==="cells"?C+1:n._columnStopIndex+1,u-1);break;case"ArrowUp":E=Math.max(h==="cells"?E-1:n._rowStartIndex-1,0);break}(C!==v||E!==y)&&(o.preventDefault(),n._updateScrollState({scrollToColumn:C,scrollToRow:E}))}}),Qe(We(n),"_onSectionRendered",function(o){var l=o.columnStartIndex,u=o.columnStopIndex,c=o.rowStartIndex,h=o.rowStopIndex;n._columnStartIndex=l,n._columnStopIndex=u,n._rowStartIndex=c,n._rowStopIndex=h}),n}return os(e,[{key:"setScrollIndexes",value:function(n){var i=n.scrollToColumn,s=n.scrollToRow;this.setState({scrollToRow:s,scrollToColumn:i})}},{key:"render",value:function(){var n=this.props,i=n.className,s=n.children,a=this._getScrollState(),o=a.scrollToColumn,l=a.scrollToRow;return M.createElement("div",{className:i,onKeyDown:this._onKeyDown},s({onSectionRendered:this._onSectionRendered,scrollToColumn:o,scrollToRow:l}))}},{key:"_getScrollState",value:function(){return this.props.isControlled?this.props:this.state}},{key:"_updateScrollState",value:function(n){var i=n.scrollToColumn,s=n.scrollToRow,a=this.props,o=a.isControlled,l=a.onScrollToChange;typeof l=="function"&&l({scrollToColumn:i,scrollToRow:s}),o||this.setState({scrollToColumn:i,scrollToRow:s})}}],[{key:"getDerivedStateFromProps",value:function(n,i){return n.isControlled?{}:n.scrollToColumn!==i.instanceProps.prevScrollToColumn||n.scrollToRow!==i.instanceProps.prevScrollToRow?L1e({},i,{scrollToColumn:n.scrollToColumn,scrollToRow:n.scrollToRow,instanceProps:{prevScrollToColumn:n.scrollToColumn,prevScrollToRow:n.scrollToRow}}):{}}}]),e})(M.PureComponent),Qe(qF,"propTypes",null),GF);Qe(cz,"defaultProps",{disabled:!1,isControlled:!1,mode:"edges",scrollToColumn:0,scrollToRow:0});Mv(cz);function dz(r,e){var t;typeof e<"u"?t=e:typeof window<"u"?t=window:typeof self<"u"?t=self:t=global;var n=typeof t.document<"u"&&t.document.attachEvent;if(!n){var i=(function(){var N=t.requestAnimationFrame||t.mozRequestAnimationFrame||t.webkitRequestAnimationFrame||function(U){return t.setTimeout(U,20)};return function(U){return N(U)}})(),s=(function(){var N=t.cancelAnimationFrame||t.mozCancelAnimationFrame||t.webkitCancelAnimationFrame||t.clearTimeout;return function(U){return N(U)}})(),a=function(U){var B=U.__resizeTriggers__,A=B.firstElementChild,$=B.lastElementChild,W=A.firstElementChild;$.scrollLeft=$.scrollWidth,$.scrollTop=$.scrollHeight,W.style.width=A.offsetWidth+1+"px",W.style.height=A.offsetHeight+1+"px",A.scrollLeft=A.scrollWidth,A.scrollTop=A.scrollHeight},o=function(U){return U.offsetWidth!=U.__resizeLast__.width||U.offsetHeight!=U.__resizeLast__.height},l=function(U){if(!(U.target.className&&typeof U.target.className.indexOf=="function"&&U.target.className.indexOf("contract-trigger")<0&&U.target.className.indexOf("expand-trigger")<0)){var B=this;a(this),this.__resizeRAF__&&s(this.__resizeRAF__),this.__resizeRAF__=i(function(){o(B)&&(B.__resizeLast__.width=B.offsetWidth,B.__resizeLast__.height=B.offsetHeight,B.__resizeListeners__.forEach(function(A){A.call(B,U)}))})}},u=!1,c="",h="animationstart",f="Webkit Moz O ms".split(" "),g="webkitAnimationStart animationstart oAnimationStart MSAnimationStart".split(" "),v="";{var y=t.document.createElement("fakeelement");if(y.style.animationName!==void 0&&(u=!0),u===!1){for(var _=0;_<f.length;_++)if(y.style[f[_]+"AnimationName"]!==void 0){v=f[_],c="-"+v.toLowerCase()+"-",h=g[_],u=!0;break}}}var C="resizeanim",E="@"+c+"keyframes "+C+" { from { opacity: 0; } to { opacity: 0; } } ",D=c+"animation: 1ms "+C+"; "}var I=function(U){if(!U.getElementById("detectElementResize")){var B=(E||"")+".resize-triggers { "+(D||"")+'visibility: hidden; opacity: 0; } .resize-triggers, .resize-triggers > div, .contract-trigger:before { content: " "; display: block; position: absolute; top: 0; left: 0; height: 100%; width: 100%; overflow: hidden; z-index: -1; } .resize-triggers > div { background: #eee; overflow: auto; } .contract-trigger:before { width: 200%; height: 200%; }',A=U.head||U.getElementsByTagName("head")[0],$=U.createElement("style");$.id="detectElementResize",$.type="text/css",r!=null&&$.setAttribute("nonce",r),$.styleSheet?$.styleSheet.cssText=B:$.appendChild(U.createTextNode(B)),A.appendChild($)}},k=function(U,B){if(n)U.attachEvent("onresize",B);else{if(!U.__resizeTriggers__){var A=U.ownerDocument,$=t.getComputedStyle(U);$&&$.position=="static"&&(U.style.position="relative"),I(A),U.__resizeLast__={},U.__resizeListeners__=[],(U.__resizeTriggers__=A.createElement("div")).className="resize-triggers";var W='<div class="expand-trigger"><div></div></div><div class="contract-trigger"></div>';if(window.trustedTypes){var V=trustedTypes.createPolicy("react-virtualized-auto-sizer",{createHTML:function(){return W}});U.__resizeTriggers__.innerHTML=V.createHTML("")}else U.__resizeTriggers__.innerHTML=W;U.appendChild(U.__resizeTriggers__),a(U),U.addEventListener("scroll",l,!0),h&&(U.__resizeTriggers__.__animationListener__=function(ie){ie.animationName==C&&a(U)},U.__resizeTriggers__.addEventListener(h,U.__resizeTriggers__.__animationListener__))}U.__resizeListeners__.push(B)}},P=function(U,B){if(n)U.detachEvent("onresize",B);else if(U.__resizeListeners__.splice(U.__resizeListeners__.indexOf(B),1),!U.__resizeListeners__.length){U.removeEventListener("scroll",l,!0),U.__resizeTriggers__.__animationListener__&&(U.__resizeTriggers__.removeEventListener(h,U.__resizeTriggers__.__animationListener__),U.__resizeTriggers__.__animationListener__=null);try{U.__resizeTriggers__=!U.removeChild(U.__resizeTriggers__)}catch{}}};return{addResizeListener:k,removeResizeListener:P}}var XF,YF;function QF(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function O1e(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?QF(t,!0).forEach(function(n){Qe(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):QF(t).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}var hz=(YF=XF=(function(r){Va(e,r);function e(){var t,n;ji(this,e);for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return n=So(this,(t=Hs(e)).call.apply(t,[this].concat(s))),Qe(We(n),"state",{height:n.props.defaultHeight||0,width:n.props.defaultWidth||0}),Qe(We(n),"_parentNode",void 0),Qe(We(n),"_autoSizer",void 0),Qe(We(n),"_window",void 0),Qe(We(n),"_detectElementResize",void 0),Qe(We(n),"_onResize",function(){var o=n.props,l=o.disableHeight,u=o.disableWidth,c=o.onResize;if(n._parentNode){var h=n._parentNode.offsetHeight||0,f=n._parentNode.offsetWidth||0,g=n._window||window,v=g.getComputedStyle(n._parentNode)||{},y=parseInt(v.paddingLeft,10)||0,_=parseInt(v.paddingRight,10)||0,C=parseInt(v.paddingTop,10)||0,E=parseInt(v.paddingBottom,10)||0,D=h-C-E,I=f-y-_;(!l&&n.state.height!==D||!u&&n.state.width!==I)&&(n.setState({height:h-C-E,width:f-y-_}),c({height:h,width:f}))}}),Qe(We(n),"_setRef",function(o){n._autoSizer=o}),n}return os(e,[{key:"componentDidMount",value:function(){var n=this.props.nonce;this._autoSizer&&this._autoSizer.parentNode&&this._autoSizer.parentNode.ownerDocument&&this._autoSizer.parentNode.ownerDocument.defaultView&&this._autoSizer.parentNode instanceof this._autoSizer.parentNode.ownerDocument.defaultView.HTMLElement&&(this._parentNode=this._autoSizer.parentNode,this._window=this._autoSizer.parentNode.ownerDocument.defaultView,this._detectElementResize=dz(n,this._window),this._detectElementResize.addResizeListener(this._parentNode,this._onResize),this._onResize())}},{key:"componentWillUnmount",value:function(){this._detectElementResize&&this._parentNode&&this._detectElementResize.removeResizeListener(this._parentNode,this._onResize)}},{key:"render",value:function(){var n=this.props,i=n.children,s=n.className,a=n.disableHeight,o=n.disableWidth,l=n.style,u=this.state,c=u.height,h=u.width,f={overflow:"visible"},g={};return a||(f.height=0,g.height=c),o||(f.width=0,g.width=h),M.createElement("div",{className:s,ref:this._setRef,style:O1e({},f,{},l)},i(g))}}]),e})(M.Component),Qe(XF,"propTypes",null),YF);Qe(hz,"defaultProps",{onResize:function(){},disableHeight:!1,disableWidth:!1,style:{}});var JF,ZF,M1e=(ZF=JF=(function(r){Va(e,r);function e(){var t,n;ji(this,e);for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return n=So(this,(t=Hs(e)).call.apply(t,[this].concat(s))),Qe(We(n),"_child",void 0),Qe(We(n),"_measure",function(){var o=n.props,l=o.cache,u=o.columnIndex,c=u===void 0?0:u,h=o.parent,f=o.rowIndex,g=f===void 0?n.props.index||0:f,v=n._getCellMeasurements(),y=v.height,_=v.width;(y!==l.getHeight(g,c)||_!==l.getWidth(g,c))&&(l.set(g,c,_,y),h&&typeof h.recomputeGridSize=="function"&&h.recomputeGridSize({columnIndex:c,rowIndex:g}))}),Qe(We(n),"_registerChild",function(o){o&&!(o instanceof Element)&&console.warn("CellMeasurer registerChild expects to be passed Element or null"),n._child=o,o&&n._maybeMeasureCell()}),n}return os(e,[{key:"componentDidMount",value:function(){this._maybeMeasureCell()}},{key:"componentDidUpdate",value:function(){this._maybeMeasureCell()}},{key:"render",value:function(){var n=this.props.children;return typeof n=="function"?n({measure:this._measure,registerChild:this._registerChild}):n}},{key:"_getCellMeasurements",value:function(){var n=this.props.cache,i=this._child||Go.findDOMNode(this);if(i&&i.ownerDocument&&i.ownerDocument.defaultView&&i instanceof i.ownerDocument.defaultView.HTMLElement){var s=i.style.width,a=i.style.height;n.hasFixedWidth()||(i.style.width="auto"),n.hasFixedHeight()||(i.style.height="auto");var o=Math.ceil(i.offsetHeight),l=Math.ceil(i.offsetWidth);return s&&(i.style.width=s),a&&(i.style.height=a),{height:o,width:l}}else return{height:0,width:0}}},{key:"_maybeMeasureCell",value:function(){var n=this.props,i=n.cache,s=n.columnIndex,a=s===void 0?0:s,o=n.parent,l=n.rowIndex,u=l===void 0?this.props.index||0:l;if(!i.has(u,a)){var c=this._getCellMeasurements(),h=c.height,f=c.width;i.set(u,a,f,h),o&&typeof o.invalidateCellSizeAfterRender=="function"&&o.invalidateCellSizeAfterRender({columnIndex:a,rowIndex:u})}}}]),e})(M.PureComponent),Qe(JF,"propTypes",null),ZF);Qe(M1e,"__internalCellMeasurerFlag",!1);function eB(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function F1e(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?eB(t,!0).forEach(function(n){Qe(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):eB(t).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}var B1e=150,rp={OBSERVED:"observed",REQUESTED:"requested"},fT=(function(r){Va(e,r);function e(){var t,n;ji(this,e);for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return n=So(this,(t=Hs(e)).call.apply(t,[this].concat(s))),Qe(We(n),"state",{isScrolling:!1,scrollLeft:0,scrollTop:0}),Qe(We(n),"_calculateSizeAndPositionDataOnNextUpdate",!1),Qe(We(n),"_onSectionRenderedMemoizer",mm()),Qe(We(n),"_onScrollMemoizer",mm(!1)),Qe(We(n),"_invokeOnSectionRenderedHelper",function(){var o=n.props,l=o.cellLayoutManager,u=o.onSectionRendered;n._onSectionRenderedMemoizer({callback:u,indices:{indices:l.getLastRenderedIndices()}})}),Qe(We(n),"_setScrollingContainerRef",function(o){n._scrollingContainer=o}),Qe(We(n),"_updateScrollPositionForScrollToCell",function(){var o=n.props,l=o.cellLayoutManager,u=o.height,c=o.scrollToAlignment,h=o.scrollToCell,f=o.width,g=n.state,v=g.scrollLeft,y=g.scrollTop;if(h>=0){var _=l.getScrollPositionForCell({align:c,cellIndex:h,height:u,scrollLeft:v,scrollTop:y,width:f});(_.scrollLeft!==v||_.scrollTop!==y)&&n._setScrollPosition(_)}}),Qe(We(n),"_onScroll",function(o){if(o.target===n._scrollingContainer){n._enablePointerEventsAfterDelay();var l=n.props,u=l.cellLayoutManager,c=l.height,h=l.isScrollingChange,f=l.width,g=n._scrollbarSize,v=u.getTotalSize(),y=v.height,_=v.width,C=Math.max(0,Math.min(_-f+g,o.target.scrollLeft)),E=Math.max(0,Math.min(y-c+g,o.target.scrollTop));if(n.state.scrollLeft!==C||n.state.scrollTop!==E){var D=o.cancelable?rp.OBSERVED:rp.REQUESTED;n.state.isScrolling||h(!0),n.setState({isScrolling:!0,scrollLeft:C,scrollPositionChangeReason:D,scrollTop:E})}n._invokeOnScrollMemoizer({scrollLeft:C,scrollTop:E,totalWidth:_,totalHeight:y})}}),n._scrollbarSize=EE(),n._scrollbarSize===void 0?(n._scrollbarSizeMeasured=!1,n._scrollbarSize=0):n._scrollbarSizeMeasured=!0,n}return os(e,[{key:"recomputeCellSizesAndPositions",value:function(){this._calculateSizeAndPositionDataOnNextUpdate=!0,this.forceUpdate()}},{key:"componentDidMount",value:function(){var n=this.props,i=n.cellLayoutManager,s=n.scrollLeft,a=n.scrollToCell,o=n.scrollTop;this._scrollbarSizeMeasured||(this._scrollbarSize=EE(),this._scrollbarSizeMeasured=!0,this.setState({})),a>=0?this._updateScrollPositionForScrollToCell():(s>=0||o>=0)&&this._setScrollPosition({scrollLeft:s,scrollTop:o}),this._invokeOnSectionRenderedHelper();var l=i.getTotalSize(),u=l.height,c=l.width;this._invokeOnScrollMemoizer({scrollLeft:s||0,scrollTop:o||0,totalHeight:u,totalWidth:c})}},{key:"componentDidUpdate",value:function(n,i){var s=this.props,a=s.height,o=s.scrollToAlignment,l=s.scrollToCell,u=s.width,c=this.state,h=c.scrollLeft,f=c.scrollPositionChangeReason,g=c.scrollTop;f===rp.REQUESTED&&(h>=0&&h!==i.scrollLeft&&h!==this._scrollingContainer.scrollLeft&&(this._scrollingContainer.scrollLeft=h),g>=0&&g!==i.scrollTop&&g!==this._scrollingContainer.scrollTop&&(this._scrollingContainer.scrollTop=g)),(a!==n.height||o!==n.scrollToAlignment||l!==n.scrollToCell||u!==n.width)&&this._updateScrollPositionForScrollToCell(),this._invokeOnSectionRenderedHelper()}},{key:"componentWillUnmount",value:function(){this._disablePointerEventsTimeoutId&&clearTimeout(this._disablePointerEventsTimeoutId)}},{key:"render",value:function(){var n=this.props,i=n.autoHeight,s=n.cellCount,a=n.cellLayoutManager,o=n.className,l=n.height,u=n.horizontalOverscanSize,c=n.id,h=n.noContentRenderer,f=n.style,g=n.verticalOverscanSize,v=n.width,y=this.state,_=y.isScrolling,C=y.scrollLeft,E=y.scrollTop;(this._lastRenderedCellCount!==s||this._lastRenderedCellLayoutManager!==a||this._calculateSizeAndPositionDataOnNextUpdate)&&(this._lastRenderedCellCount=s,this._lastRenderedCellLayoutManager=a,this._calculateSizeAndPositionDataOnNextUpdate=!1,a.calculateSizeAndPositionData());var D=a.getTotalSize(),I=D.height,k=D.width,P=Math.max(0,C-u),N=Math.max(0,E-g),U=Math.min(k,C+v+u),B=Math.min(I,E+l+g),A=l>0&&v>0?a.cellRenderers({height:B-N,isScrolling:_,width:U-P,x:P,y:N}):[],$={boxSizing:"border-box",direction:"ltr",height:i?"auto":l,position:"relative",WebkitOverflowScrolling:"touch",width:v,willChange:"transform"},W=I>l?this._scrollbarSize:0,V=k>v?this._scrollbarSize:0;return $.overflowX=k+W<=v?"hidden":"auto",$.overflowY=I+V<=l?"hidden":"auto",M.createElement("div",{ref:this._setScrollingContainerRef,"aria-label":this.props["aria-label"],className:Dl("ReactVirtualized__Collection",o),id:c,onScroll:this._onScroll,role:"grid",style:F1e({},$,{},f),tabIndex:0},s>0&&M.createElement("div",{className:"ReactVirtualized__Collection__innerScrollContainer",style:{height:I,maxHeight:I,maxWidth:k,overflow:"hidden",pointerEvents:_?"none":"",width:k}},A),s===0&&h())}},{key:"_enablePointerEventsAfterDelay",value:function(){var n=this;this._disablePointerEventsTimeoutId&&clearTimeout(this._disablePointerEventsTimeoutId),this._disablePointerEventsTimeoutId=setTimeout(function(){var i=n.props.isScrollingChange;i(!1),n._disablePointerEventsTimeoutId=null,n.setState({isScrolling:!1})},B1e)}},{key:"_invokeOnScrollMemoizer",value:function(n){var i=this,s=n.scrollLeft,a=n.scrollTop,o=n.totalHeight,l=n.totalWidth;this._onScrollMemoizer({callback:function(c){var h=c.scrollLeft,f=c.scrollTop,g=i.props,v=g.height,y=g.onScroll,_=g.width;y({clientHeight:v,clientWidth:_,scrollHeight:o,scrollLeft:h,scrollTop:f,scrollWidth:l})},indices:{scrollLeft:s,scrollTop:a}})}},{key:"_setScrollPosition",value:function(n){var i=n.scrollLeft,s=n.scrollTop,a={scrollPositionChangeReason:rp.REQUESTED};i>=0&&(a.scrollLeft=i),s>=0&&(a.scrollTop=s),(i>=0&&i!==this.state.scrollLeft||s>=0&&s!==this.state.scrollTop)&&this.setState(a)}}],[{key:"getDerivedStateFromProps",value:function(n,i){return n.cellCount===0&&(i.scrollLeft!==0||i.scrollTop!==0)?{scrollLeft:0,scrollTop:0,scrollPositionChangeReason:rp.REQUESTED}:n.scrollLeft!==i.scrollLeft||n.scrollTop!==i.scrollTop?{scrollLeft:n.scrollLeft!=null?n.scrollLeft:i.scrollLeft,scrollTop:n.scrollTop!=null?n.scrollTop:i.scrollTop,scrollPositionChangeReason:rp.REQUESTED}:null}}]),e})(M.PureComponent);Qe(fT,"defaultProps",{"aria-label":"grid",horizontalOverscanSize:0,noContentRenderer:function(){return null},onScroll:function(){return null},onSectionRendered:function(){return null},scrollToAlignment:"auto",scrollToCell:-1,style:{},verticalOverscanSize:0});fT.propTypes={};Mv(fT);var N1e=(function(){function r(e){var t=e.height,n=e.width,i=e.x,s=e.y;ji(this,r),this.height=t,this.width=n,this.x=i,this.y=s,this._indexMap={},this._indices=[]}return os(r,[{key:"addCellIndex",value:function(t){var n=t.index;this._indexMap[n]||(this._indexMap[n]=!0,this._indices.push(n))}},{key:"getCellIndices",value:function(){return this._indices}},{key:"toString",value:function(){return"".concat(this.x,",").concat(this.y," ").concat(this.width,"x").concat(this.height)}}]),r})(),U1e=100,$1e=(function(){function r(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:U1e;ji(this,r),this._sectionSize=e,this._cellMetadata=[],this._sections={}}return os(r,[{key:"getCellIndices",value:function(t){var n=t.height,i=t.width,s=t.x,a=t.y,o={};return this.getSections({height:n,width:i,x:s,y:a}).forEach(function(l){return l.getCellIndices().forEach(function(u){o[u]=u})}),Object.keys(o).map(function(l){return o[l]})}},{key:"getCellMetadata",value:function(t){var n=t.index;return this._cellMetadata[n]}},{key:"getSections",value:function(t){for(var n=t.height,i=t.width,s=t.x,a=t.y,o=Math.floor(s/this._sectionSize),l=Math.floor((s+i-1)/this._sectionSize),u=Math.floor(a/this._sectionSize),c=Math.floor((a+n-1)/this._sectionSize),h=[],f=o;f<=l;f++)for(var g=u;g<=c;g++){var v="".concat(f,".").concat(g);this._sections[v]||(this._sections[v]=new N1e({height:this._sectionSize,width:this._sectionSize,x:f*this._sectionSize,y:g*this._sectionSize})),h.push(this._sections[v])}return h}},{key:"getTotalSectionCount",value:function(){return Object.keys(this._sections).length}},{key:"toString",value:function(){var t=this;return Object.keys(this._sections).map(function(n){return t._sections[n].toString()})}},{key:"registerCell",value:function(t){var n=t.cellMetadatum,i=t.index;this._cellMetadata[i]=n,this.getSections(n).forEach(function(s){return s.addCellIndex({index:i})})}}]),r})();function j1e(r){for(var e=r.cellCount,t=r.cellSizeAndPositionGetter,n=r.sectionSize,i=[],s=new $1e(n),a=0,o=0,l=0;l<e;l++){var u=t({index:l});if(u.height==null||isNaN(u.height)||u.width==null||isNaN(u.width)||u.x==null||isNaN(u.x)||u.y==null||isNaN(u.y))throw Error("Invalid metadata returned for cell ".concat(l,`:
        x:`).concat(u.x,", y:").concat(u.y,", width:").concat(u.width,", height:").concat(u.height));a=Math.max(a,u.y+u.height),o=Math.max(o,u.x+u.width),i[l]=u,s.registerCell({cellMetadatum:u,index:l})}return{cellMetadata:i,height:a,sectionManager:s,width:o}}function tB(r){var e=r.align,t=e===void 0?"auto":e,n=r.cellOffset,i=r.cellSize,s=r.containerSize,a=r.currentOffset,o=n,l=o-s+i;switch(t){case"start":return o;case"end":return l;case"center":return o-(s-i)/2;default:return Math.max(l,Math.min(o,a))}}var fz=(function(r){Va(e,r);function e(t,n){var i;return ji(this,e),i=So(this,Hs(e).call(this,t,n)),i._cellMetadata=[],i._lastRenderedCellIndices=[],i._cellCache=[],i._isScrollingChange=i._isScrollingChange.bind(We(i)),i._setCollectionViewRef=i._setCollectionViewRef.bind(We(i)),i}return os(e,[{key:"forceUpdate",value:function(){this._collectionView!==void 0&&this._collectionView.forceUpdate()}},{key:"recomputeCellSizesAndPositions",value:function(){this._cellCache=[],this._collectionView.recomputeCellSizesAndPositions()}},{key:"render",value:function(){var n=sr({},this.props);return M.createElement(fT,sr({cellLayoutManager:this,isScrollingChange:this._isScrollingChange,ref:this._setCollectionViewRef},n))}},{key:"calculateSizeAndPositionData",value:function(){var n=this.props,i=n.cellCount,s=n.cellSizeAndPositionGetter,a=n.sectionSize,o=j1e({cellCount:i,cellSizeAndPositionGetter:s,sectionSize:a});this._cellMetadata=o.cellMetadata,this._sectionManager=o.sectionManager,this._height=o.height,this._width=o.width}},{key:"getLastRenderedIndices",value:function(){return this._lastRenderedCellIndices}},{key:"getScrollPositionForCell",value:function(n){var i=n.align,s=n.cellIndex,a=n.height,o=n.scrollLeft,l=n.scrollTop,u=n.width,c=this.props.cellCount;if(s>=0&&s<c){var h=this._cellMetadata[s];o=tB({align:i,cellOffset:h.x,cellSize:h.width,containerSize:u,currentOffset:o}),l=tB({align:i,cellOffset:h.y,cellSize:h.height,containerSize:a,currentOffset:l})}return{scrollLeft:o,scrollTop:l}}},{key:"getTotalSize",value:function(){return{height:this._height,width:this._width}}},{key:"cellRenderers",value:function(n){var i=this,s=n.height,a=n.isScrolling,o=n.width,l=n.x,u=n.y,c=this.props,h=c.cellGroupRenderer,f=c.cellRenderer;return this._lastRenderedCellIndices=this._sectionManager.getCellIndices({height:s,width:o,x:l,y:u}),h({cellCache:this._cellCache,cellRenderer:f,cellSizeAndPositionGetter:function(v){var y=v.index;return i._sectionManager.getCellMetadata({index:y})},indices:this._lastRenderedCellIndices,isScrolling:a})}},{key:"_isScrollingChange",value:function(n){n||(this._cellCache=[])}},{key:"_setCollectionViewRef",value:function(n){this._collectionView=n}}]),e})(M.PureComponent);Qe(fz,"defaultProps",{"aria-label":"grid",cellGroupRenderer:z1e});fz.propTypes={};function z1e(r){var e=r.cellCache,t=r.cellRenderer,n=r.cellSizeAndPositionGetter,i=r.indices,s=r.isScrolling;return i.map(function(a){var o=n({index:a}),l={index:a,isScrolling:s,key:a,style:{height:o.height,left:o.x,position:"absolute",top:o.y,width:o.width}};return s?(a in e||(e[a]=t(l)),e[a]):t(l)}).filter(function(a){return!!a})}function kE(r,e){(e==null||e>r.length)&&(e=r.length);for(var t=0,n=Array(e);t<e;t++)n[t]=r[t];return n}function H1e(r){if(Array.isArray(r))return kE(r)}function V1e(r){if(typeof Symbol<"u"&&r[Symbol.iterator]!=null||r["@@iterator"]!=null)return Array.from(r)}function pz(r,e){if(r){if(typeof r=="string")return kE(r,e);var t={}.toString.call(r).slice(8,-1);return t==="Object"&&r.constructor&&(t=r.constructor.name),t==="Map"||t==="Set"?Array.from(r):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?kE(r,e):void 0}}function W1e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function q1e(r){return H1e(r)||V1e(r)||pz(r)||W1e()}var mz=(function(r){Va(e,r);function e(t,n){var i;return ji(this,e),i=So(this,Hs(e).call(this,t,n)),i._loadMoreRowsMemoizer=mm(),i._onRowsRendered=i._onRowsRendered.bind(We(i)),i._registerChild=i._registerChild.bind(We(i)),i}return os(e,[{key:"resetLoadMoreRowsCache",value:function(n){this._loadMoreRowsMemoizer=mm(),n&&this._doStuff(this._lastRenderedStartIndex,this._lastRenderedStopIndex)}},{key:"render",value:function(){var n=this.props.children;return n({onRowsRendered:this._onRowsRendered,registerChild:this._registerChild})}},{key:"_loadUnloadedRanges",value:function(n){var i=this,s=this.props.loadMoreRows;n.forEach(function(a){var o=s(a);o&&o.then(function(){G1e({lastRenderedStartIndex:i._lastRenderedStartIndex,lastRenderedStopIndex:i._lastRenderedStopIndex,startIndex:a.startIndex,stopIndex:a.stopIndex})&&i._registeredChild&&X1e(i._registeredChild,i._lastRenderedStartIndex)})})}},{key:"_onRowsRendered",value:function(n){var i=n.startIndex,s=n.stopIndex;this._lastRenderedStartIndex=i,this._lastRenderedStopIndex=s,this._doStuff(i,s)}},{key:"_doStuff",value:function(n,i){var s,a=this,o=this.props,l=o.isRowLoaded,u=o.minimumBatchSize,c=o.rowCount,h=o.threshold,f=K1e({isRowLoaded:l,minimumBatchSize:u,rowCount:c,startIndex:Math.max(0,n-h),stopIndex:Math.min(c-1,i+h)}),g=(s=[]).concat.apply(s,q1e(f.map(function(v){var y=v.startIndex,_=v.stopIndex;return[y,_]})));this._loadMoreRowsMemoizer({callback:function(){a._loadUnloadedRanges(f)},indices:{squashedUnloadedRanges:g}})}},{key:"_registerChild",value:function(n){this._registeredChild=n}}]),e})(M.PureComponent);Qe(mz,"defaultProps",{minimumBatchSize:10,rowCount:0,threshold:15});mz.propTypes={};function G1e(r){var e=r.lastRenderedStartIndex,t=r.lastRenderedStopIndex,n=r.startIndex,i=r.stopIndex;return!(n>t||i<e)}function K1e(r){for(var e=r.isRowLoaded,t=r.minimumBatchSize,n=r.rowCount,i=r.startIndex,s=r.stopIndex,a=[],o=null,l=null,u=i;u<=s;u++){var c=e({index:u});c?l!==null&&(a.push({startIndex:o,stopIndex:l}),o=l=null):(l=u,o===null&&(o=u))}if(l!==null){for(var h=Math.min(Math.max(l,o+t-1),n-1),f=l+1;f<=h&&!e({index:f});f++)l=f;a.push({startIndex:o,stopIndex:l})}if(a.length)for(var g=a[0];g.stopIndex-g.startIndex+1<t&&g.startIndex>0;){var v=g.startIndex-1;if(!e({index:v}))g.startIndex=v;else break}return a}function X1e(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,t=typeof r.recomputeGridSize=="function"?r.recomputeGridSize:r.recomputeRowHeights;t?t.call(r,e):r.forceUpdate()}var rB,nB,Y1e=(nB=rB=(function(r){Va(e,r);function e(){var t,n;ji(this,e);for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return n=So(this,(t=Hs(e)).call.apply(t,[this].concat(s))),Qe(We(n),"Grid",void 0),Qe(We(n),"_cellRenderer",function(o){var l=o.parent,u=o.rowIndex,c=o.style,h=o.isScrolling,f=o.isVisible,g=o.key,v=n.props.rowRenderer,y=Object.getOwnPropertyDescriptor(c,"width");return y&&y.writable&&(c.width="100%"),v({index:u,style:c,isScrolling:h,isVisible:f,key:g,parent:l})}),Qe(We(n),"_setRef",function(o){n.Grid=o}),Qe(We(n),"_onScroll",function(o){var l=o.clientHeight,u=o.scrollHeight,c=o.scrollTop,h=n.props.onScroll;h({clientHeight:l,scrollHeight:u,scrollTop:c})}),Qe(We(n),"_onSectionRendered",function(o){var l=o.rowOverscanStartIndex,u=o.rowOverscanStopIndex,c=o.rowStartIndex,h=o.rowStopIndex,f=n.props.onRowsRendered;f({overscanStartIndex:l,overscanStopIndex:u,startIndex:c,stopIndex:h})}),n}return os(e,[{key:"forceUpdateGrid",value:function(){this.Grid&&this.Grid.forceUpdate()}},{key:"getOffsetForRow",value:function(n){var i=n.alignment,s=n.index;if(this.Grid){var a=this.Grid.getOffsetForCell({alignment:i,rowIndex:s,columnIndex:0}),o=a.scrollTop;return o}return 0}},{key:"invalidateCellSizeAfterRender",value:function(n){var i=n.columnIndex,s=n.rowIndex;this.Grid&&this.Grid.invalidateCellSizeAfterRender({rowIndex:s,columnIndex:i})}},{key:"measureAllRows",value:function(){this.Grid&&this.Grid.measureAllCells()}},{key:"recomputeGridSize",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=n.columnIndex,s=i===void 0?0:i,a=n.rowIndex,o=a===void 0?0:a;this.Grid&&this.Grid.recomputeGridSize({rowIndex:o,columnIndex:s})}},{key:"recomputeRowHeights",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;this.Grid&&this.Grid.recomputeGridSize({rowIndex:n,columnIndex:0})}},{key:"scrollToPosition",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;this.Grid&&this.Grid.scrollToPosition({scrollTop:n})}},{key:"scrollToRow",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;this.Grid&&this.Grid.scrollToCell({columnIndex:0,rowIndex:n})}},{key:"render",value:function(){var n=this.props,i=n.className,s=n.noRowsRenderer,a=n.scrollToIndex,o=n.width,l=Dl("ReactVirtualized__List",i);return M.createElement(Md,sr({},this.props,{autoContainerWidth:!0,cellRenderer:this._cellRenderer,className:l,columnWidth:o,columnCount:1,noContentRenderer:s,onScroll:this._onScroll,onSectionRendered:this._onSectionRendered,ref:this._setRef,scrollToRow:a}))}}]),e})(M.PureComponent),Qe(rB,"propTypes",null),nB);Qe(Y1e,"defaultProps",{autoHeight:!1,estimatedRowSize:30,onScroll:function(){},noRowsRenderer:function(){return null},onRowsRendered:function(){},overscanIndicesGetter:uz,overscanRowCount:10,scrollToAlignment:"auto",scrollToIndex:-1,style:{}});function Q1e(r){if(Array.isArray(r))return r}function J1e(r,e){var t=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(t!=null){var n,i,s,a,o=[],l=!0,u=!1;try{if(s=(t=t.call(r)).next,e!==0)for(;!(l=(n=s.call(t)).done)&&(o.push(n.value),o.length!==e);l=!0);}catch(c){u=!0,i=c}finally{try{if(!l&&t.return!=null&&(a=t.return(),Object(a)!==a))return}finally{if(u)throw i}}return o}}function Z1e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function eCe(r,e){return Q1e(r)||J1e(r,e)||pz(r,e)||Z1e()}function tCe(r,e,t,n){for(var i=t+1;e<=t;){var s=e+t>>>1,a=r[s];a>=n?(i=s,t=s-1):e=s+1}return i}function rCe(r,e,t,n,i){for(var s=t+1;e<=t;){var a=e+t>>>1,o=r[a];i(o,n)>=0?(s=a,t=a-1):e=a+1}return s}function nCe(r,e,t,n,i){return typeof t=="function"?rCe(r,n===void 0?0:n|0,i===void 0?r.length-1:i|0,e,t):tCe(r,t===void 0?0:t|0,n===void 0?r.length-1:n|0,e)}function iCe(r,e,t,n){for(var i=t+1;e<=t;){var s=e+t>>>1,a=r[s];a>n?(i=s,t=s-1):e=s+1}return i}function sCe(r,e,t,n,i){for(var s=t+1;e<=t;){var a=e+t>>>1,o=r[a];i(o,n)>0?(s=a,t=a-1):e=a+1}return s}function aCe(r,e,t,n,i){return typeof t=="function"?sCe(r,n===void 0?0:n|0,i===void 0?r.length-1:i|0,e,t):iCe(r,t===void 0?0:t|0,n===void 0?r.length-1:n|0,e)}function oCe(r,e,t,n){for(var i=e-1;e<=t;){var s=e+t>>>1,a=r[s];a<n?(i=s,e=s+1):t=s-1}return i}function lCe(r,e,t,n,i){for(var s=e-1;e<=t;){var a=e+t>>>1,o=r[a];i(o,n)<0?(s=a,e=a+1):t=a-1}return s}function uCe(r,e,t,n,i){return typeof t=="function"?lCe(r,n===void 0?0:n|0,i===void 0?r.length-1:i|0,e,t):oCe(r,t===void 0?0:t|0,n===void 0?r.length-1:n|0,e)}function cCe(r,e,t,n){for(var i=e-1;e<=t;){var s=e+t>>>1,a=r[s];a<=n?(i=s,e=s+1):t=s-1}return i}function dCe(r,e,t,n,i){for(var s=e-1;e<=t;){var a=e+t>>>1,o=r[a];i(o,n)<=0?(s=a,e=a+1):t=a-1}return s}function hCe(r,e,t,n,i){return typeof t=="function"?dCe(r,n===void 0?0:n|0,i===void 0?r.length-1:i|0,e,t):cCe(r,t===void 0?0:t|0,n===void 0?r.length-1:n|0,e)}function fCe(r,e,t,n){for(;e<=t;){var i=e+t>>>1,s=r[i];if(s===n)return i;s<=n?e=i+1:t=i-1}return-1}function pCe(r,e,t,n,i){for(;e<=t;){var s=e+t>>>1,a=r[s],o=i(a,n);if(o===0)return s;o<=0?e=s+1:t=s-1}return-1}function mCe(r,e,t,n,i){return typeof t=="function"?pCe(r,n===void 0?0:n|0,i===void 0?r.length-1:i|0,e,t):fCe(r,t===void 0?0:t|0,n===void 0?r.length-1:n|0,e)}const Hb={ge:nCe,gt:aCe,lt:uCe,le:hCe,eq:mCe};var xp=0,Fh=1,v_=2;function DD(r,e,t,n,i){this.mid=r,this.left=e,this.right=t,this.leftPoints=n,this.rightPoints=i,this.count=(e?e.count:0)+(t?t.count:0)+n.length}var Fv=DD.prototype;function bw(r,e){r.mid=e.mid,r.left=e.left,r.right=e.right,r.leftPoints=e.leftPoints,r.rightPoints=e.rightPoints,r.count=e.count}function gz(r,e){var t=Kg(e);r.mid=t.mid,r.left=t.left,r.right=t.right,r.leftPoints=t.leftPoints,r.rightPoints=t.rightPoints,r.count=t.count}function iB(r,e){var t=r.intervals([]);t.push(e),gz(r,t)}function sB(r,e){var t=r.intervals([]),n=t.indexOf(e);return n<0?xp:(t.splice(n,1),gz(r,t),Fh)}Fv.intervals=function(r){return r.push.apply(r,this.leftPoints),this.left&&this.left.intervals(r),this.right&&this.right.intervals(r),r};Fv.insert=function(r){var e=this.count-this.leftPoints.length;if(this.count+=1,r[1]<this.mid)this.left?4*(this.left.count+1)>3*(e+1)?iB(this,r):this.left.insert(r):this.left=Kg([r]);else if(r[0]>this.mid)this.right?4*(this.right.count+1)>3*(e+1)?iB(this,r):this.right.insert(r):this.right=Kg([r]);else{var t=Hb.ge(this.leftPoints,r,ID),n=Hb.ge(this.rightPoints,r,PD);this.leftPoints.splice(t,0,r),this.rightPoints.splice(n,0,r)}};Fv.remove=function(r){var e=this.count-this.leftPoints;if(r[1]<this.mid){if(!this.left)return xp;var t=this.right?this.right.count:0;if(4*t>3*(e-1))return sB(this,r);var n=this.left.remove(r);return n===v_?(this.left=null,this.count-=1,Fh):(n===Fh&&(this.count-=1),n)}else if(r[0]>this.mid){if(!this.right)return xp;var i=this.left?this.left.count:0;if(4*i>3*(e-1))return sB(this,r);var n=this.right.remove(r);return n===v_?(this.right=null,this.count-=1,Fh):(n===Fh&&(this.count-=1),n)}else{if(this.count===1)return this.leftPoints[0]===r?v_:xp;if(this.leftPoints.length===1&&this.leftPoints[0]===r){if(this.left&&this.right){for(var s=this,a=this.left;a.right;)s=a,a=a.right;if(s===this)a.right=this.right;else{var o=this.left,n=this.right;s.count-=a.count,s.right=a.left,a.left=o,a.right=n}bw(this,a),this.count=(this.left?this.left.count:0)+(this.right?this.right.count:0)+this.leftPoints.length}else this.left?bw(this,this.left):bw(this,this.right);return Fh}for(var o=Hb.ge(this.leftPoints,r,ID);o<this.leftPoints.length&&this.leftPoints[o][0]===r[0];++o)if(this.leftPoints[o]===r){this.count-=1,this.leftPoints.splice(o,1);for(var n=Hb.ge(this.rightPoints,r,PD);n<this.rightPoints.length&&this.rightPoints[n][1]===r[1];++n)if(this.rightPoints[n]===r)return this.rightPoints.splice(n,1),Fh}return xp}};function vz(r,e,t){for(var n=0;n<r.length&&r[n][0]<=e;++n){var i=t(r[n]);if(i)return i}}function yz(r,e,t){for(var n=r.length-1;n>=0&&r[n][1]>=e;--n){var i=t(r[n]);if(i)return i}}function xz(r,e){for(var t=0;t<r.length;++t){var n=e(r[t]);if(n)return n}}Fv.queryPoint=function(r,e){if(r<this.mid){if(this.left){var t=this.left.queryPoint(r,e);if(t)return t}return vz(this.leftPoints,r,e)}else if(r>this.mid){if(this.right){var t=this.right.queryPoint(r,e);if(t)return t}return yz(this.rightPoints,r,e)}else return xz(this.leftPoints,e)};Fv.queryInterval=function(r,e,t){if(r<this.mid&&this.left){var n=this.left.queryInterval(r,e,t);if(n)return n}if(e>this.mid&&this.right){var n=this.right.queryInterval(r,e,t);if(n)return n}return e<this.mid?vz(this.leftPoints,e,t):r>this.mid?yz(this.rightPoints,r,t):xz(this.leftPoints,t)};function gCe(r,e){return r-e}function ID(r,e){var t=r[0]-e[0];return t||r[1]-e[1]}function PD(r,e){var t=r[1]-e[1];return t||r[0]-e[0]}function Kg(r){if(r.length===0)return null;for(var e=[],t=0;t<r.length;++t)e.push(r[t][0],r[t][1]);e.sort(gCe);for(var n=e[e.length>>1],i=[],s=[],a=[],t=0;t<r.length;++t){var o=r[t];o[1]<n?i.push(o):n<o[0]?s.push(o):a.push(o)}var l=a,u=a.slice();return l.sort(ID),u.sort(PD),new DD(n,Kg(i),Kg(s),l,u)}function _z(r){this.root=r}var Wm=_z.prototype;Wm.insert=function(r){this.root?this.root.insert(r):this.root=new DD(r[0],null,null,[r],[r])};Wm.remove=function(r){if(this.root){var e=this.root.remove(r);return e===v_&&(this.root=null),e!==xp}return!1};Wm.queryPoint=function(r,e){if(this.root)return this.root.queryPoint(r,e)};Wm.queryInterval=function(r,e,t){if(r<=e&&this.root)return this.root.queryInterval(r,e,t)};Object.defineProperty(Wm,"count",{get:function(){return this.root?this.root.count:0}});Object.defineProperty(Wm,"intervals",{get:function(){return this.root?this.root.intervals([]):[]}});function vCe(r){return new _z(null)}var Sw=(function(){function r(){ji(this,r),Qe(this,"_columnSizeMap",{}),Qe(this,"_intervalTree",vCe()),Qe(this,"_leftMap",{})}return os(r,[{key:"estimateTotalHeight",value:function(t,n,i){var s=t-this.count;return this.tallestColumnSize+Math.ceil(s/n)*i}},{key:"range",value:function(t,n,i){var s=this;this._intervalTree.queryInterval(t,t+n,function(a){var o=eCe(a,3),l=o[0];o[1];var u=o[2];return i(u,s._leftMap[u],l)})}},{key:"setPosition",value:function(t,n,i,s){this._intervalTree.insert([i,i+s,t]),this._leftMap[t]=n;var a=this._columnSizeMap,o=a[n];o===void 0?a[n]=i+s:a[n]=Math.max(o,i+s)}},{key:"count",get:function(){return this._intervalTree.count}},{key:"shortestColumnSize",get:function(){var t=this._columnSizeMap,n=0;for(var i in t){var s=t[i];n=n===0?s:Math.min(n,s)}return n}},{key:"tallestColumnSize",get:function(){var t=this._columnSizeMap,n=0;for(var i in t){var s=t[i];n=Math.max(n,s)}return n}}]),r})(),aB,oB;function lB(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function yCe(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?lB(t,!0).forEach(function(n){Qe(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):lB(t).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}var xCe={},_Ce=150,bz=(oB=aB=(function(r){Va(e,r);function e(){var t,n;ji(this,e);for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return n=So(this,(t=Hs(e)).call.apply(t,[this].concat(s))),Qe(We(n),"state",{isScrolling:!1,scrollTop:0}),Qe(We(n),"_debounceResetIsScrollingId",void 0),Qe(We(n),"_invalidateOnUpdateStartIndex",null),Qe(We(n),"_invalidateOnUpdateStopIndex",null),Qe(We(n),"_positionCache",new Sw),Qe(We(n),"_startIndex",null),Qe(We(n),"_startIndexMemoized",null),Qe(We(n),"_stopIndex",null),Qe(We(n),"_stopIndexMemoized",null),Qe(We(n),"_debounceResetIsScrollingCallback",function(){n.setState({isScrolling:!1})}),Qe(We(n),"_setScrollingContainerRef",function(o){n._scrollingContainer=o}),Qe(We(n),"_onScroll",function(o){var l=n.props.height,u=o.currentTarget.scrollTop,c=Math.min(Math.max(0,n._getEstimatedTotalHeight()-l),u);u===c&&(n._debounceResetIsScrolling(),n.state.scrollTop!==c&&n.setState({isScrolling:!0,scrollTop:c}))}),n}return os(e,[{key:"clearCellPositions",value:function(){this._positionCache=new Sw,this.forceUpdate()}},{key:"invalidateCellSizeAfterRender",value:function(n){var i=n.rowIndex;this._invalidateOnUpdateStartIndex===null?(this._invalidateOnUpdateStartIndex=i,this._invalidateOnUpdateStopIndex=i):(this._invalidateOnUpdateStartIndex=Math.min(this._invalidateOnUpdateStartIndex,i),this._invalidateOnUpdateStopIndex=Math.max(this._invalidateOnUpdateStopIndex,i))}},{key:"recomputeCellPositions",value:function(){var n=this._positionCache.count-1;this._positionCache=new Sw,this._populatePositionCache(0,n),this.forceUpdate()}},{key:"componentDidMount",value:function(){this._checkInvalidateOnUpdate(),this._invokeOnScrollCallback(),this._invokeOnCellsRenderedCallback()}},{key:"componentDidUpdate",value:function(n,i){this._checkInvalidateOnUpdate(),this._invokeOnScrollCallback(),this._invokeOnCellsRenderedCallback(),this.props.scrollTop!==n.scrollTop&&this._debounceResetIsScrolling()}},{key:"componentWillUnmount",value:function(){this._debounceResetIsScrollingId&&gm(this._debounceResetIsScrollingId)}},{key:"render",value:function(){var n=this,i=this.props,s=i.autoHeight,a=i.cellCount,o=i.cellMeasurerCache,l=i.cellRenderer,u=i.className,c=i.height,h=i.id,f=i.keyMapper,g=i.overscanByPixels,v=i.role,y=i.style,_=i.tabIndex,C=i.width,E=i.rowDirection,D=this.state,I=D.isScrolling,k=D.scrollTop,P=[],N=this._getEstimatedTotalHeight(),U=this._positionCache.shortestColumnSize,B=this._positionCache.count,A=0,$;if(this._positionCache.range(Math.max(0,k-g),c+g*2,function(Q,ie,ne){var ue;typeof $>"u"?(A=Q,$=Q):(A=Math.min(A,Q),$=Math.max($,Q)),P.push(l({index:Q,isScrolling:I,key:f(Q),parent:n,style:(ue={height:o.getHeight(Q)},Qe(ue,E==="ltr"?"left":"right",ie),Qe(ue,"position","absolute"),Qe(ue,"top",ne),Qe(ue,"width",o.getWidth(Q)),ue)}))}),U<k+c+g&&B<a)for(var W=Math.min(a-B,Math.ceil((k+c+g-U)/o.defaultHeight*C/o.defaultWidth)),V=B;V<B+W;V++)$=V,P.push(l({index:V,isScrolling:I,key:f(V),parent:this,style:{width:o.getWidth(V)}}));return this._startIndex=A,this._stopIndex=$,M.createElement("div",{ref:this._setScrollingContainerRef,"aria-label":this.props["aria-label"],className:Dl("ReactVirtualized__Masonry",u),id:h,onScroll:this._onScroll,role:v,style:yCe({boxSizing:"border-box",direction:"ltr",height:s?"auto":c,overflowX:"hidden",overflowY:N<c?"hidden":"auto",position:"relative",width:C,WebkitOverflowScrolling:"touch",willChange:"transform"},y),tabIndex:_},M.createElement("div",{className:"ReactVirtualized__Masonry__innerScrollContainer",style:{width:"100%",height:N,maxWidth:"100%",maxHeight:N,overflow:"hidden",pointerEvents:I?"none":"",position:"relative"}},P))}},{key:"_checkInvalidateOnUpdate",value:function(){if(typeof this._invalidateOnUpdateStartIndex=="number"){var n=this._invalidateOnUpdateStartIndex,i=this._invalidateOnUpdateStopIndex;this._invalidateOnUpdateStartIndex=null,this._invalidateOnUpdateStopIndex=null,this._populatePositionCache(n,i),this.forceUpdate()}}},{key:"_debounceResetIsScrolling",value:function(){var n=this.props.scrollingResetTimeInterval;this._debounceResetIsScrollingId&&gm(this._debounceResetIsScrollingId),this._debounceResetIsScrollingId=AD(this._debounceResetIsScrollingCallback,n)}},{key:"_getEstimatedTotalHeight",value:function(){var n=this.props,i=n.cellCount,s=n.cellMeasurerCache,a=n.width,o=Math.max(1,Math.floor(a/s.defaultWidth));return this._positionCache.estimateTotalHeight(i,o,s.defaultHeight)}},{key:"_invokeOnScrollCallback",value:function(){var n=this.props,i=n.height,s=n.onScroll,a=this.state.scrollTop;this._onScrollMemoized!==a&&(s({clientHeight:i,scrollHeight:this._getEstimatedTotalHeight(),scrollTop:a}),this._onScrollMemoized=a)}},{key:"_invokeOnCellsRenderedCallback",value:function(){if(this._startIndexMemoized!==this._startIndex||this._stopIndexMemoized!==this._stopIndex){var n=this.props.onCellsRendered;n({startIndex:this._startIndex,stopIndex:this._stopIndex}),this._startIndexMemoized=this._startIndex,this._stopIndexMemoized=this._stopIndex}}},{key:"_populatePositionCache",value:function(n,i){for(var s=this.props,a=s.cellMeasurerCache,o=s.cellPositioner,l=n;l<=i;l++){var u=o(l),c=u.left,h=u.top;this._positionCache.setPosition(l,c,h,a.getHeight(l))}}}],[{key:"getDerivedStateFromProps",value:function(n,i){return n.scrollTop!==void 0&&i.scrollTop!==n.scrollTop?{isScrolling:!0,scrollTop:n.scrollTop}:null}}]),e})(M.PureComponent),Qe(aB,"propTypes",null),oB);Qe(bz,"defaultProps",{autoHeight:!1,keyMapper:bCe,onCellsRendered:uB,onScroll:uB,overscanByPixels:20,role:"grid",scrollingResetTimeInterval:_Ce,style:xCe,tabIndex:0,rowDirection:"ltr"});function bCe(r){return r}function uB(){}Mv(bz);var Tw=(function(){function r(){var e=this,t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};ji(this,r),Qe(this,"_cellMeasurerCache",void 0),Qe(this,"_columnIndexOffset",void 0),Qe(this,"_rowIndexOffset",void 0),Qe(this,"columnWidth",function(l){var u=l.index;e._cellMeasurerCache.columnWidth({index:u+e._columnIndexOffset})}),Qe(this,"rowHeight",function(l){var u=l.index;e._cellMeasurerCache.rowHeight({index:u+e._rowIndexOffset})});var n=t.cellMeasurerCache,i=t.columnIndexOffset,s=i===void 0?0:i,a=t.rowIndexOffset,o=a===void 0?0:a;this._cellMeasurerCache=n,this._columnIndexOffset=s,this._rowIndexOffset=o}return os(r,[{key:"clear",value:function(t,n){this._cellMeasurerCache.clear(t+this._rowIndexOffset,n+this._columnIndexOffset)}},{key:"clearAll",value:function(){this._cellMeasurerCache.clearAll()}},{key:"hasFixedHeight",value:function(){return this._cellMeasurerCache.hasFixedHeight()}},{key:"hasFixedWidth",value:function(){return this._cellMeasurerCache.hasFixedWidth()}},{key:"getHeight",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return this._cellMeasurerCache.getHeight(t+this._rowIndexOffset,n+this._columnIndexOffset)}},{key:"getWidth",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return this._cellMeasurerCache.getWidth(t+this._rowIndexOffset,n+this._columnIndexOffset)}},{key:"has",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return this._cellMeasurerCache.has(t+this._rowIndexOffset,n+this._columnIndexOffset)}},{key:"set",value:function(t,n,i,s){this._cellMeasurerCache.set(t+this._rowIndexOffset,n+this._columnIndexOffset,i,s)}},{key:"defaultHeight",get:function(){return this._cellMeasurerCache.defaultHeight}},{key:"defaultWidth",get:function(){return this._cellMeasurerCache.defaultWidth}}]),r})();function cB(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function Fs(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?cB(t,!0).forEach(function(n){Qe(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):cB(t).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}var dB=20,RD=(function(r){Va(e,r);function e(t,n){var i;ji(this,e),i=So(this,Hs(e).call(this,t,n)),Qe(We(i),"state",{scrollLeft:0,scrollTop:0,scrollbarSize:0,showHorizontalScrollbar:!1,showVerticalScrollbar:!1}),Qe(We(i),"_deferredInvalidateColumnIndex",null),Qe(We(i),"_deferredInvalidateRowIndex",null),Qe(We(i),"_bottomLeftGridRef",function(l){i._bottomLeftGrid=l}),Qe(We(i),"_bottomRightGridRef",function(l){i._bottomRightGrid=l}),Qe(We(i),"_cellRendererBottomLeftGrid",function(l){var u=l.rowIndex,c=Y0(l,["rowIndex"]),h=i.props,f=h.cellRenderer,g=h.fixedRowCount,v=h.rowCount;return u===v-g?M.createElement("div",{key:c.key,style:Fs({},c.style,{height:dB})}):f(Fs({},c,{parent:We(i),rowIndex:u+g}))}),Qe(We(i),"_cellRendererBottomRightGrid",function(l){var u=l.columnIndex,c=l.rowIndex,h=Y0(l,["columnIndex","rowIndex"]),f=i.props,g=f.cellRenderer,v=f.fixedColumnCount,y=f.fixedRowCount;return g(Fs({},h,{columnIndex:u+v,parent:We(i),rowIndex:c+y}))}),Qe(We(i),"_cellRendererTopRightGrid",function(l){var u=l.columnIndex,c=Y0(l,["columnIndex"]),h=i.props,f=h.cellRenderer,g=h.columnCount,v=h.fixedColumnCount;return u===g-v?M.createElement("div",{key:c.key,style:Fs({},c.style,{width:dB})}):f(Fs({},c,{columnIndex:u+v,parent:We(i)}))}),Qe(We(i),"_columnWidthRightGrid",function(l){var u=l.index,c=i.props,h=c.columnCount,f=c.fixedColumnCount,g=c.columnWidth,v=i.state,y=v.scrollbarSize,_=v.showHorizontalScrollbar;return _&&u===h-f?y:typeof g=="function"?g({index:u+f}):g}),Qe(We(i),"_onScroll",function(l){var u=l.scrollLeft,c=l.scrollTop;i.setState({scrollLeft:u,scrollTop:c});var h=i.props.onScroll;h&&h(l)}),Qe(We(i),"_onScrollbarPresenceChange",function(l){var u=l.horizontal,c=l.size,h=l.vertical,f=i.state,g=f.showHorizontalScrollbar,v=f.showVerticalScrollbar;if(u!==g||h!==v){i.setState({scrollbarSize:c,showHorizontalScrollbar:u,showVerticalScrollbar:h});var y=i.props.onScrollbarPresenceChange;typeof y=="function"&&y({horizontal:u,size:c,vertical:h})}}),Qe(We(i),"_onScrollLeft",function(l){var u=l.scrollLeft;i._onScroll({scrollLeft:u,scrollTop:i.state.scrollTop})}),Qe(We(i),"_onScrollTop",function(l){var u=l.scrollTop;i._onScroll({scrollTop:u,scrollLeft:i.state.scrollLeft})}),Qe(We(i),"_rowHeightBottomGrid",function(l){var u=l.index,c=i.props,h=c.fixedRowCount,f=c.rowCount,g=c.rowHeight,v=i.state,y=v.scrollbarSize,_=v.showVerticalScrollbar;return _&&u===f-h?y:typeof g=="function"?g({index:u+h}):g}),Qe(We(i),"_topLeftGridRef",function(l){i._topLeftGrid=l}),Qe(We(i),"_topRightGridRef",function(l){i._topRightGrid=l});var s=t.deferredMeasurementCache,a=t.fixedColumnCount,o=t.fixedRowCount;return i._maybeCalculateCachedStyles(!0),s&&(i._deferredMeasurementCacheBottomLeftGrid=o>0?new Tw({cellMeasurerCache:s,columnIndexOffset:0,rowIndexOffset:o}):s,i._deferredMeasurementCacheBottomRightGrid=a>0||o>0?new Tw({cellMeasurerCache:s,columnIndexOffset:a,rowIndexOffset:o}):s,i._deferredMeasurementCacheTopRightGrid=a>0?new Tw({cellMeasurerCache:s,columnIndexOffset:a,rowIndexOffset:0}):s),i}return os(e,[{key:"forceUpdateGrids",value:function(){this._bottomLeftGrid&&this._bottomLeftGrid.forceUpdate(),this._bottomRightGrid&&this._bottomRightGrid.forceUpdate(),this._topLeftGrid&&this._topLeftGrid.forceUpdate(),this._topRightGrid&&this._topRightGrid.forceUpdate()}},{key:"invalidateCellSizeAfterRender",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=n.columnIndex,s=i===void 0?0:i,a=n.rowIndex,o=a===void 0?0:a;this._deferredInvalidateColumnIndex=typeof this._deferredInvalidateColumnIndex=="number"?Math.min(this._deferredInvalidateColumnIndex,s):s,this._deferredInvalidateRowIndex=typeof this._deferredInvalidateRowIndex=="number"?Math.min(this._deferredInvalidateRowIndex,o):o}},{key:"measureAllCells",value:function(){this._bottomLeftGrid&&this._bottomLeftGrid.measureAllCells(),this._bottomRightGrid&&this._bottomRightGrid.measureAllCells(),this._topLeftGrid&&this._topLeftGrid.measureAllCells(),this._topRightGrid&&this._topRightGrid.measureAllCells()}},{key:"recomputeGridSize",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=n.columnIndex,s=i===void 0?0:i,a=n.rowIndex,o=a===void 0?0:a,l=this.props,u=l.fixedColumnCount,c=l.fixedRowCount,h=Math.max(0,s-u),f=Math.max(0,o-c);this._bottomLeftGrid&&this._bottomLeftGrid.recomputeGridSize({columnIndex:s,rowIndex:f}),this._bottomRightGrid&&this._bottomRightGrid.recomputeGridSize({columnIndex:h,rowIndex:f}),this._topLeftGrid&&this._topLeftGrid.recomputeGridSize({columnIndex:s,rowIndex:o}),this._topRightGrid&&this._topRightGrid.recomputeGridSize({columnIndex:h,rowIndex:o}),this._leftGridWidth=null,this._topGridHeight=null,this._maybeCalculateCachedStyles(!0)}},{key:"componentDidMount",value:function(){var n=this.props,i=n.scrollLeft,s=n.scrollTop;if(i>0||s>0){var a={};i>0&&(a.scrollLeft=i),s>0&&(a.scrollTop=s),this.setState(a)}this._handleInvalidatedGridSize()}},{key:"componentDidUpdate",value:function(){this._handleInvalidatedGridSize()}},{key:"render",value:function(){var n=this.props,i=n.onScroll,s=n.onSectionRendered;n.onScrollbarPresenceChange,n.scrollLeft;var a=n.scrollToColumn;n.scrollTop;var o=n.scrollToRow,l=Y0(n,["onScroll","onSectionRendered","onScrollbarPresenceChange","scrollLeft","scrollToColumn","scrollTop","scrollToRow"]);if(this._prepareForRender(),this.props.width===0||this.props.height===0)return null;var u=this.state,c=u.scrollLeft,h=u.scrollTop;return M.createElement("div",{style:this._containerOuterStyle},M.createElement("div",{style:this._containerTopStyle},this._renderTopLeftGrid(l),this._renderTopRightGrid(Fs({},l,{onScroll:i,scrollLeft:c}))),M.createElement("div",{style:this._containerBottomStyle},this._renderBottomLeftGrid(Fs({},l,{onScroll:i,scrollTop:h})),this._renderBottomRightGrid(Fs({},l,{onScroll:i,onSectionRendered:s,scrollLeft:c,scrollToColumn:a,scrollToRow:o,scrollTop:h}))))}},{key:"_getBottomGridHeight",value:function(n){var i=n.height,s=this._getTopGridHeight(n);return i-s}},{key:"_getLeftGridWidth",value:function(n){var i=n.fixedColumnCount,s=n.columnWidth;if(this._leftGridWidth==null)if(typeof s=="function"){for(var a=0,o=0;o<i;o++)a+=s({index:o});this._leftGridWidth=a}else this._leftGridWidth=s*i;return this._leftGridWidth}},{key:"_getRightGridWidth",value:function(n){var i=n.width,s=this._getLeftGridWidth(n);return i-s}},{key:"_getTopGridHeight",value:function(n){var i=n.fixedRowCount,s=n.rowHeight;if(this._topGridHeight==null)if(typeof s=="function"){for(var a=0,o=0;o<i;o++)a+=s({index:o});this._topGridHeight=a}else this._topGridHeight=s*i;return this._topGridHeight}},{key:"_handleInvalidatedGridSize",value:function(){if(typeof this._deferredInvalidateColumnIndex=="number"){var n=this._deferredInvalidateColumnIndex,i=this._deferredInvalidateRowIndex;this._deferredInvalidateColumnIndex=null,this._deferredInvalidateRowIndex=null,this.recomputeGridSize({columnIndex:n,rowIndex:i}),this.forceUpdate()}}},{key:"_maybeCalculateCachedStyles",value:function(n){var i=this.props,s=i.columnWidth,a=i.enableFixedColumnScroll,o=i.enableFixedRowScroll,l=i.height,u=i.fixedColumnCount,c=i.fixedRowCount,h=i.rowHeight,f=i.style,g=i.styleBottomLeftGrid,v=i.styleBottomRightGrid,y=i.styleTopLeftGrid,_=i.styleTopRightGrid,C=i.width,E=n||l!==this._lastRenderedHeight||C!==this._lastRenderedWidth,D=n||s!==this._lastRenderedColumnWidth||u!==this._lastRenderedFixedColumnCount,I=n||c!==this._lastRenderedFixedRowCount||h!==this._lastRenderedRowHeight;(n||E||f!==this._lastRenderedStyle)&&(this._containerOuterStyle=Fs({height:l,overflow:"visible",width:C},f)),(n||E||I)&&(this._containerTopStyle={height:this._getTopGridHeight(this.props),position:"relative",width:C},this._containerBottomStyle={height:l-this._getTopGridHeight(this.props),overflow:"visible",position:"relative",width:C}),(n||g!==this._lastRenderedStyleBottomLeftGrid)&&(this._bottomLeftGridStyle=Fs({left:0,overflowX:"hidden",overflowY:a?"auto":"hidden",position:"absolute"},g)),(n||D||v!==this._lastRenderedStyleBottomRightGrid)&&(this._bottomRightGridStyle=Fs({left:this._getLeftGridWidth(this.props),position:"absolute"},v)),(n||y!==this._lastRenderedStyleTopLeftGrid)&&(this._topLeftGridStyle=Fs({left:0,overflowX:"hidden",overflowY:"hidden",position:"absolute",top:0},y)),(n||D||_!==this._lastRenderedStyleTopRightGrid)&&(this._topRightGridStyle=Fs({left:this._getLeftGridWidth(this.props),overflowX:o?"auto":"hidden",overflowY:"hidden",position:"absolute",top:0},_)),this._lastRenderedColumnWidth=s,this._lastRenderedFixedColumnCount=u,this._lastRenderedFixedRowCount=c,this._lastRenderedHeight=l,this._lastRenderedRowHeight=h,this._lastRenderedStyle=f,this._lastRenderedStyleBottomLeftGrid=g,this._lastRenderedStyleBottomRightGrid=v,this._lastRenderedStyleTopLeftGrid=y,this._lastRenderedStyleTopRightGrid=_,this._lastRenderedWidth=C}},{key:"_prepareForRender",value:function(){(this._lastRenderedColumnWidth!==this.props.columnWidth||this._lastRenderedFixedColumnCount!==this.props.fixedColumnCount)&&(this._leftGridWidth=null),(this._lastRenderedFixedRowCount!==this.props.fixedRowCount||this._lastRenderedRowHeight!==this.props.rowHeight)&&(this._topGridHeight=null),this._maybeCalculateCachedStyles(),this._lastRenderedColumnWidth=this.props.columnWidth,this._lastRenderedFixedColumnCount=this.props.fixedColumnCount,this._lastRenderedFixedRowCount=this.props.fixedRowCount,this._lastRenderedRowHeight=this.props.rowHeight}},{key:"_renderBottomLeftGrid",value:function(n){var i=n.enableFixedColumnScroll,s=n.fixedColumnCount,a=n.fixedRowCount,o=n.rowCount,l=n.hideBottomLeftGridScrollbar,u=this.state.showVerticalScrollbar;if(!s)return null;var c=u?1:0,h=this._getBottomGridHeight(n),f=this._getLeftGridWidth(n),g=this.state.showVerticalScrollbar?this.state.scrollbarSize:0,v=l?f+g:f,y=M.createElement(Md,sr({},n,{cellRenderer:this._cellRendererBottomLeftGrid,className:this.props.classNameBottomLeftGrid,columnCount:s,deferredMeasurementCache:this._deferredMeasurementCacheBottomLeftGrid,height:h,onScroll:i?this._onScrollTop:void 0,ref:this._bottomLeftGridRef,rowCount:Math.max(0,o-a)+c,rowHeight:this._rowHeightBottomGrid,style:this._bottomLeftGridStyle,tabIndex:null,width:v}));return l?M.createElement("div",{className:"BottomLeftGrid_ScrollWrapper",style:Fs({},this._bottomLeftGridStyle,{height:h,width:f,overflowY:"hidden"})},y):y}},{key:"_renderBottomRightGrid",value:function(n){var i=n.columnCount,s=n.fixedColumnCount,a=n.fixedRowCount,o=n.rowCount,l=n.scrollToColumn,u=n.scrollToRow;return M.createElement(Md,sr({},n,{cellRenderer:this._cellRendererBottomRightGrid,className:this.props.classNameBottomRightGrid,columnCount:Math.max(0,i-s),columnWidth:this._columnWidthRightGrid,deferredMeasurementCache:this._deferredMeasurementCacheBottomRightGrid,height:this._getBottomGridHeight(n),onScroll:this._onScroll,onScrollbarPresenceChange:this._onScrollbarPresenceChange,ref:this._bottomRightGridRef,rowCount:Math.max(0,o-a),rowHeight:this._rowHeightBottomGrid,scrollToColumn:l-s,scrollToRow:u-a,style:this._bottomRightGridStyle,width:this._getRightGridWidth(n)}))}},{key:"_renderTopLeftGrid",value:function(n){var i=n.fixedColumnCount,s=n.fixedRowCount;return!i||!s?null:M.createElement(Md,sr({},n,{className:this.props.classNameTopLeftGrid,columnCount:i,height:this._getTopGridHeight(n),ref:this._topLeftGridRef,rowCount:s,style:this._topLeftGridStyle,tabIndex:null,width:this._getLeftGridWidth(n)}))}},{key:"_renderTopRightGrid",value:function(n){var i=n.columnCount,s=n.enableFixedRowScroll,a=n.fixedColumnCount,o=n.fixedRowCount,l=n.scrollLeft,u=n.hideTopRightGridScrollbar,c=this.state,h=c.showHorizontalScrollbar,f=c.scrollbarSize;if(!o)return null;var g=h?1:0,v=this._getTopGridHeight(n),y=this._getRightGridWidth(n),_=h?f:0,C=v,E=this._topRightGridStyle;u&&(C=v+_,E=Fs({},this._topRightGridStyle,{left:0}));var D=M.createElement(Md,sr({},n,{cellRenderer:this._cellRendererTopRightGrid,className:this.props.classNameTopRightGrid,columnCount:Math.max(0,i-a)+g,columnWidth:this._columnWidthRightGrid,deferredMeasurementCache:this._deferredMeasurementCacheTopRightGrid,height:C,onScroll:s?this._onScrollLeft:void 0,ref:this._topRightGridRef,rowCount:o,scrollLeft:l,style:E,tabIndex:null,width:y}));return u?M.createElement("div",{className:"TopRightGrid_ScrollWrapper",style:Fs({},this._topRightGridStyle,{height:v,width:y,overflowX:"hidden"})},D):D}}],[{key:"getDerivedStateFromProps",value:function(n,i){return n.scrollLeft!==i.scrollLeft||n.scrollTop!==i.scrollTop?{scrollLeft:n.scrollLeft!=null&&n.scrollLeft>=0?n.scrollLeft:i.scrollLeft,scrollTop:n.scrollTop!=null&&n.scrollTop>=0?n.scrollTop:i.scrollTop}:null}}]),e})(M.PureComponent);Qe(RD,"defaultProps",{classNameBottomLeftGrid:"",classNameBottomRightGrid:"",classNameTopLeftGrid:"",classNameTopRightGrid:"",enableFixedColumnScroll:!1,enableFixedRowScroll:!1,fixedColumnCount:0,fixedRowCount:0,scrollToColumn:-1,scrollToRow:-1,style:{},styleBottomLeftGrid:{},styleBottomRightGrid:{},styleTopLeftGrid:{},styleTopRightGrid:{},hideTopRightGridScrollbar:!1,hideBottomLeftGridScrollbar:!1});RD.propTypes={};Mv(RD);function SCe(r){var e=r.dataKey,t=r.rowData;return typeof t.get=="function"?t.get(e):t[e]}function TCe(r){var e=r.cellData;return e==null?"":String(e)}function Sz(r){var e=r.className,t=r.columns,n=r.style;return M.createElement("div",{className:e,role:"row",style:n},t)}Sz.propTypes=null;var Fd={ASC:"ASC",DESC:"DESC"};function Tz(r){var e=r.sortDirection,t=Dl("ReactVirtualized__Table__sortableHeaderIcon",{"ReactVirtualized__Table__sortableHeaderIcon--ASC":e===Fd.ASC,"ReactVirtualized__Table__sortableHeaderIcon--DESC":e===Fd.DESC});return M.createElement("svg",{className:t,width:18,height:18,viewBox:"0 0 24 24"},e===Fd.ASC?M.createElement("path",{d:"M7 14l5-5 5 5z"}):M.createElement("path",{d:"M7 10l5 5 5-5z"}),M.createElement("path",{d:"M0 0h24v24H0z",fill:"none"}))}Tz.propTypes={};function Cz(r){var e=r.dataKey,t=r.label,n=r.sortBy,i=r.sortDirection,s=n===e,a=[M.createElement("span",{className:"ReactVirtualized__Table__headerTruncatedText",key:"label",title:typeof t=="string"?t:null},t)];return s&&a.push(M.createElement(Tz,{key:"SortIndicator",sortDirection:i})),a}Cz.propTypes=null;function wz(r){var e=r.className,t=r.columns,n=r.index,i=r.key,s=r.onRowClick,a=r.onRowDoubleClick,o=r.onRowMouseOut,l=r.onRowMouseOver,u=r.onRowRightClick,c=r.rowData,h=r.style,f={"aria-rowindex":n+1};return(s||a||o||l||u)&&(f["aria-label"]="row",f.tabIndex=0,s&&(f.onClick=function(g){return s({event:g,index:n,rowData:c})}),a&&(f.onDoubleClick=function(g){return a({event:g,index:n,rowData:c})}),o&&(f.onMouseOut=function(g){return o({event:g,index:n,rowData:c})}),l&&(f.onMouseOver=function(g){return l({event:g,index:n,rowData:c})}),u&&(f.onContextMenu=function(g){return u({event:g,index:n,rowData:c})})),M.createElement("div",sr({},f,{className:e,key:i,role:"row",style:h}),t)}wz.propTypes=null;var LD=(function(r){Va(e,r);function e(){return ji(this,e),So(this,Hs(e).apply(this,arguments))}return e})(M.Component);Qe(LD,"defaultProps",{cellDataGetter:SCe,cellRenderer:TCe,defaultSortDirection:Fd.ASC,flexGrow:0,flexShrink:1,headerRenderer:Cz,style:{}});LD.propTypes={};function hB(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function np(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?hB(t,!0).forEach(function(n){Qe(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):hB(t).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}var OD=(function(r){Va(e,r);function e(t){var n;return ji(this,e),n=So(this,Hs(e).call(this,t)),n.state={scrollbarWidth:0},n._createColumn=n._createColumn.bind(We(n)),n._createRow=n._createRow.bind(We(n)),n._onScroll=n._onScroll.bind(We(n)),n._onSectionRendered=n._onSectionRendered.bind(We(n)),n._setRef=n._setRef.bind(We(n)),n}return os(e,[{key:"forceUpdateGrid",value:function(){this.Grid&&this.Grid.forceUpdate()}},{key:"getOffsetForRow",value:function(n){var i=n.alignment,s=n.index;if(this.Grid){var a=this.Grid.getOffsetForCell({alignment:i,rowIndex:s}),o=a.scrollTop;return o}return 0}},{key:"invalidateCellSizeAfterRender",value:function(n){var i=n.columnIndex,s=n.rowIndex;this.Grid&&this.Grid.invalidateCellSizeAfterRender({rowIndex:s,columnIndex:i})}},{key:"measureAllRows",value:function(){this.Grid&&this.Grid.measureAllCells()}},{key:"recomputeGridSize",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=n.columnIndex,s=i===void 0?0:i,a=n.rowIndex,o=a===void 0?0:a;this.Grid&&this.Grid.recomputeGridSize({rowIndex:o,columnIndex:s})}},{key:"recomputeRowHeights",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;this.Grid&&this.Grid.recomputeGridSize({rowIndex:n})}},{key:"scrollToPosition",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;this.Grid&&this.Grid.scrollToPosition({scrollTop:n})}},{key:"scrollToRow",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;this.Grid&&this.Grid.scrollToCell({columnIndex:0,rowIndex:n})}},{key:"getScrollbarWidth",value:function(){if(this.Grid){var n=Go.findDOMNode(this.Grid),i=n.clientWidth||0,s=n.offsetWidth||0;return s-i}return 0}},{key:"componentDidMount",value:function(){this._setScrollbarWidth()}},{key:"componentDidUpdate",value:function(){this._setScrollbarWidth()}},{key:"render",value:function(){var n=this,i=this.props,s=i.children,a=i.className,o=i.disableHeader,l=i.gridClassName,u=i.gridStyle,c=i.headerHeight,h=i.headerRowRenderer,f=i.height,g=i.id,v=i.noRowsRenderer,y=i.rowClassName,_=i.rowStyle,C=i.scrollToIndex,E=i.style,D=i.width,I=this.state.scrollbarWidth,k=o?f:f-c,P=typeof y=="function"?y({index:-1}):y,N=typeof _=="function"?_({index:-1}):_;return this._cachedColumnStyles=[],M.Children.toArray(s).forEach(function(U,B){var A=n._getFlexStyleForColumn(U,U.props.style);n._cachedColumnStyles[B]=np({overflow:"hidden"},A)}),M.createElement("div",{"aria-label":this.props["aria-label"],"aria-labelledby":this.props["aria-labelledby"],"aria-colcount":M.Children.toArray(s).length,"aria-rowcount":this.props.rowCount,className:Dl("ReactVirtualized__Table",a),id:g,role:"grid",style:E},!o&&h({className:Dl("ReactVirtualized__Table__headerRow",P),columns:this._getHeaderColumns(),style:np({height:c,overflow:"hidden",paddingRight:I,width:D},N)}),M.createElement(Md,sr({},this.props,{"aria-readonly":null,autoContainerWidth:!0,className:Dl("ReactVirtualized__Table__Grid",l),cellRenderer:this._createRow,columnWidth:D,columnCount:1,height:k,id:void 0,noContentRenderer:v,onScroll:this._onScroll,onSectionRendered:this._onSectionRendered,ref:this._setRef,role:"rowgroup",scrollbarWidth:I,scrollToRow:C,style:np({},u,{overflowX:"hidden"})})))}},{key:"_createColumn",value:function(n){var i=n.column,s=n.columnIndex,a=n.isScrolling,o=n.parent,l=n.rowData,u=n.rowIndex,c=this.props.onColumnClick,h=i.props,f=h.cellDataGetter,g=h.cellRenderer,v=h.className,y=h.columnData,_=h.dataKey,C=h.id,E=f({columnData:y,dataKey:_,rowData:l}),D=g({cellData:E,columnData:y,columnIndex:s,dataKey:_,isScrolling:a,parent:o,rowData:l,rowIndex:u}),I=function(U){c&&c({columnData:y,dataKey:_,event:U})},k=this._cachedColumnStyles[s],P=typeof D=="string"?D:null;return M.createElement("div",{"aria-colindex":s+1,"aria-describedby":C,className:Dl("ReactVirtualized__Table__rowColumn",v),key:"Row"+u+"-Col"+s,onClick:I,role:"gridcell",style:k,title:P},D)}},{key:"_createHeader",value:function(n){var i=n.column,s=n.index,a=this.props,o=a.headerClassName,l=a.headerStyle,u=a.onHeaderClick,c=a.sort,h=a.sortBy,f=a.sortDirection,g=i.props,v=g.columnData,y=g.dataKey,_=g.defaultSortDirection,C=g.disableSort,E=g.headerRenderer,D=g.id,I=g.label,k=!C&&c,P=Dl("ReactVirtualized__Table__headerColumn",o,i.props.headerClassName,{ReactVirtualized__Table__sortableHeaderColumn:k}),N=this._getFlexStyleForColumn(i,np({},l,{},i.props.headerStyle)),U=E({columnData:v,dataKey:y,disableSort:C,label:I,sortBy:h,sortDirection:f}),B,A,$,W,V;if(k||u){var Q=h!==y,ie=Q?_:f===Fd.DESC?Fd.ASC:Fd.DESC,ne=function(ae){k&&c({defaultSortDirection:_,event:ae,sortBy:y,sortDirection:ie}),u&&u({columnData:v,dataKey:y,event:ae})},ue=function(ae){(ae.key==="Enter"||ae.key===" ")&&ne(ae)};V=i.props["aria-label"]||I||y,W="none",$=0,B=ne,A=ue}return h===y&&(W=f===Fd.ASC?"ascending":"descending"),M.createElement("div",{"aria-label":V,"aria-sort":W,className:P,id:D,key:"Header-Col"+s,onClick:B,onKeyDown:A,role:"columnheader",style:N,tabIndex:$},U)}},{key:"_createRow",value:function(n){var i=this,s=n.rowIndex,a=n.isScrolling,o=n.key,l=n.parent,u=n.style,c=this.props,h=c.children,f=c.onRowClick,g=c.onRowDoubleClick,v=c.onRowRightClick,y=c.onRowMouseOver,_=c.onRowMouseOut,C=c.rowClassName,E=c.rowGetter,D=c.rowRenderer,I=c.rowStyle,k=this.state.scrollbarWidth,P=typeof C=="function"?C({index:s}):C,N=typeof I=="function"?I({index:s}):I,U=E({index:s}),B=M.Children.toArray(h).map(function(W,V){return i._createColumn({column:W,columnIndex:V,isScrolling:a,parent:l,rowData:U,rowIndex:s,scrollbarWidth:k})}),A=Dl("ReactVirtualized__Table__row",P),$=np({},u,{height:this._getRowHeight(s),overflow:"hidden",paddingRight:k},N);return D({className:A,columns:B,index:s,isScrolling:a,key:o,onRowClick:f,onRowDoubleClick:g,onRowRightClick:v,onRowMouseOver:y,onRowMouseOut:_,rowData:U,style:$})}},{key:"_getFlexStyleForColumn",value:function(n){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s="".concat(n.props.flexGrow," ").concat(n.props.flexShrink," ").concat(n.props.width,"px"),a=np({},i,{flex:s,msFlex:s,WebkitFlex:s});return n.props.maxWidth&&(a.maxWidth=n.props.maxWidth),n.props.minWidth&&(a.minWidth=n.props.minWidth),a}},{key:"_getHeaderColumns",value:function(){var n=this,i=this.props,s=i.children,a=i.disableHeader,o=a?[]:M.Children.toArray(s);return o.map(function(l,u){return n._createHeader({column:l,index:u})})}},{key:"_getRowHeight",value:function(n){var i=this.props.rowHeight;return typeof i=="function"?i({index:n}):i}},{key:"_onScroll",value:function(n){var i=n.clientHeight,s=n.scrollHeight,a=n.scrollTop,o=this.props.onScroll;o({clientHeight:i,scrollHeight:s,scrollTop:a})}},{key:"_onSectionRendered",value:function(n){var i=n.rowOverscanStartIndex,s=n.rowOverscanStopIndex,a=n.rowStartIndex,o=n.rowStopIndex,l=this.props.onRowsRendered;l({overscanStartIndex:i,overscanStopIndex:s,startIndex:a,stopIndex:o})}},{key:"_setRef",value:function(n){this.Grid=n}},{key:"_setScrollbarWidth",value:function(){var n=this.getScrollbarWidth();this.setState({scrollbarWidth:n})}}]),e})(M.PureComponent);Qe(OD,"defaultProps",{disableHeader:!1,estimatedRowSize:30,headerHeight:0,headerStyle:{},noRowsRenderer:function(){return null},onRowsRendered:function(){return null},onScroll:function(){return null},overscanIndicesGetter:uz,overscanRowCount:10,rowRenderer:wz,headerRowRenderer:Sz,rowStyle:{},scrollToAlignment:"auto",scrollToIndex:-1,style:{}});OD.propTypes={};var Nd=[],_g=null,lf=null;function Ez(){lf&&(lf=null,document.body&&_g!=null&&(document.body.style.pointerEvents=_g),_g=null)}function CCe(){Ez(),Nd.forEach(function(r){return r.__resetIsScrolling()})}function wCe(){lf&&gm(lf);var r=0;Nd.forEach(function(e){r=Math.max(r,e.props.scrollingResetTimeInterval)}),lf=AD(CCe,r)}function kz(r){r.currentTarget===window&&_g==null&&document.body&&(_g=document.body.style.pointerEvents,document.body.style.pointerEvents="none"),wCe(),Nd.forEach(function(e){e.props.scrollElement===r.currentTarget&&e.__handleWindowScrollEvent()})}function fB(r,e){Nd.some(function(t){return t.props.scrollElement===e})||e.addEventListener("scroll",kz),Nd.push(r)}function pB(r,e){Nd=Nd.filter(function(t){return t!==r}),Nd.length||(e.removeEventListener("scroll",kz),lf&&(gm(lf),Ez()))}var MD=function(e){return e===window},Q0=function(e){return e.getBoundingClientRect()};function mB(r,e){if(r)if(MD(r)){var t=window,n=t.innerHeight,i=t.innerWidth;return{height:typeof n=="number"?n:0,width:typeof i=="number"?i:0}}else return Q0(r);else return{height:e.serverHeight,width:e.serverWidth}}function ECe(r,e){if(MD(e)&&document.documentElement){var t=document.documentElement,n=Q0(r),i=Q0(t);return{top:n.top-i.top,left:n.left-i.left}}else{var s=Az(e),a=Q0(r),o=Q0(e);return{top:a.top+s.top-o.top,left:a.left+s.left-o.left}}}function Az(r){return MD(r)&&document.documentElement?{top:"scrollY"in window?window.scrollY:document.documentElement.scrollTop,left:"scrollX"in window?window.scrollX:document.documentElement.scrollLeft}:{top:r.scrollTop,left:r.scrollLeft}}var gB,vB;function yB(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function kCe(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?yB(t,!0).forEach(function(n){Qe(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):yB(t).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}var ACe=150,Dz=function(){return typeof window<"u"?window:void 0},DCe=(vB=gB=(function(r){Va(e,r);function e(){var t,n;ji(this,e);for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return n=So(this,(t=Hs(e)).call.apply(t,[this].concat(s))),Qe(We(n),"_window",Dz()),Qe(We(n),"_isMounted",!1),Qe(We(n),"_positionFromTop",0),Qe(We(n),"_positionFromLeft",0),Qe(We(n),"_detectElementResize",void 0),Qe(We(n),"_child",void 0),Qe(We(n),"state",kCe({},mB(n.props.scrollElement,n.props),{isScrolling:!1,scrollLeft:0,scrollTop:0})),Qe(We(n),"_registerChild",function(o){o&&!(o instanceof Element)&&console.warn("WindowScroller registerChild expects to be passed Element or null"),n._child=o,n.updatePosition()}),Qe(We(n),"_onChildScroll",function(o){var l=o.scrollTop;if(n.state.scrollTop!==l){var u=n.props.scrollElement;u&&(typeof u.scrollTo=="function"?u.scrollTo(0,l+n._positionFromTop):u.scrollTop=l+n._positionFromTop)}}),Qe(We(n),"_registerResizeListener",function(o){o===window?window.addEventListener("resize",n._onResize,!1):n._detectElementResize.addResizeListener(o,n._onResize)}),Qe(We(n),"_unregisterResizeListener",function(o){o===window?window.removeEventListener("resize",n._onResize,!1):o&&n._detectElementResize.removeResizeListener(o,n._onResize)}),Qe(We(n),"_onResize",function(){n.updatePosition()}),Qe(We(n),"__handleWindowScrollEvent",function(){if(n._isMounted){var o=n.props.onScroll,l=n.props.scrollElement;if(l){var u=Az(l),c=Math.max(0,u.left-n._positionFromLeft),h=Math.max(0,u.top-n._positionFromTop);n.setState({isScrolling:!0,scrollLeft:c,scrollTop:h}),o({scrollLeft:c,scrollTop:h})}}}),Qe(We(n),"__resetIsScrolling",function(){n.setState({isScrolling:!1})}),n}return os(e,[{key:"updatePosition",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.props.scrollElement,i=this.props.onResize,s=this.state,a=s.height,o=s.width,l=this._child||Go.findDOMNode(this);if(l instanceof Element&&n){var u=ECe(l,n);this._positionFromTop=u.top,this._positionFromLeft=u.left}var c=mB(n,this.props);(a!==c.height||o!==c.width)&&(this.setState({height:c.height,width:c.width}),i({height:c.height,width:c.width}))}},{key:"componentDidMount",value:function(){var n=this.props.scrollElement;this._detectElementResize=dz(),this.updatePosition(n),n&&(fB(this,n),this._registerResizeListener(n)),this._isMounted=!0}},{key:"componentDidUpdate",value:function(n,i){var s=this.props.scrollElement,a=n.scrollElement;a!==s&&a!=null&&s!=null&&(this.updatePosition(s),pB(this,a),fB(this,s),this._unregisterResizeListener(a),this._registerResizeListener(s))}},{key:"componentWillUnmount",value:function(){var n=this.props.scrollElement;n&&(pB(this,n),this._unregisterResizeListener(n)),this._isMounted=!1}},{key:"render",value:function(){var n=this.props.children,i=this.state,s=i.isScrolling,a=i.scrollTop,o=i.scrollLeft,l=i.height,u=i.width;return n({onChildScroll:this._onChildScroll,registerChild:this._registerChild,height:l,isScrolling:s,scrollLeft:o,scrollTop:a,width:u})}}]),e})(M.PureComponent),Qe(gB,"propTypes",null),vB);Qe(DCe,"defaultProps",{onResize:function(){},onScroll:function(){},scrollingResetTimeInterval:ACe,scrollElement:Dz(),serverHeight:0,serverWidth:0});const ICe=mr(O.jsx("path",{d:"M21 6h-7.59l3.29-3.29L16 2l-4 4-4-4-.71.71L10.59 6H3c-1.1 0-2 .89-2 2v12c0 1.1.9 2 2 2h18c1.1 0 2-.9 2-2V8c0-1.11-.9-2-2-2m0 14H3V8h18zM9 10v8l7-4z"})),PCe=mr([O.jsx("circle",{cx:"15.5",cy:"9.5",r:"1.5"},"0"),O.jsx("circle",{cx:"8.5",cy:"9.5",r:"1.5"},"1"),O.jsx("path",{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2M12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8m0-6c-2.33 0-4.32 1.45-5.12 3.5h1.67c.69-1.19 1.97-2 3.45-2s2.75.81 3.45 2h1.67c-.8-2.05-2.79-3.5-5.12-3.5"},"2")]),RCe=mr(O.jsx("path",{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2M12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8m3.5-9c.83 0 1.5-.67 1.5-1.5S16.33 8 15.5 8 14 8.67 14 9.5s.67 1.5 1.5 1.5m-7 0c.83 0 1.5-.67 1.5-1.5S9.33 8 8.5 8 7 8.67 7 9.5 7.67 11 8.5 11m3.5 6.5c2.33 0 4.31-1.46 5.11-3.5H6.89c.8 2.04 2.78 3.5 5.11 3.5"})),ea={flexContainer:"ReactVirtualizedDemo-flexContainer",tableRow:"ReactVirtualizedDemo-tableRow",tableRowHover:"ReactVirtualizedDemo-tableRowHover",tableCell:"ReactVirtualizedDemo-tableCell",noClick:"ReactVirtualizedDemo-noClick"},LCe=({theme:r})=>({"& .ReactVirtualized__Table__headerRow":{...r.direction==="rtl"&&{paddingLeft:"0 !important"},...r.direction!=="rtl"&&{paddingRight:void 0}},[`& .${ea.flexContainer}`]:{display:"flex",alignItems:"center",boxSizing:"border-box"},[`& .${ea.tableRow}`]:{cursor:"pointer"},[`& .${ea.tableRowHover}`]:{"&:hover":{backgroundColor:r.palette.grey[200]}},[`& .${ea.tableCell}`]:{flex:1},[`& .${ea.noClick}`]:{cursor:"initial"}});class Iz extends M.PureComponent{static defaultProps={headerHeight:48,rowHeight:80};getRowClassName=({index:e})=>{const{onRowClick:t}=this.props;return Dt(ea.tableRow,ea.flexContainer,{[ea.tableRowHover]:e!==-1&&t!=null})};getObjectIndexIndex=e=>{const{originalData:t}=this.props;for(let n=0;n<t.length;n++)if(t[n].index===e)return n;return 0};cellRenderer=({cellData:e,columnIndex:t})=>{const{t:n,rowHeight:i,onRowClick:s,showMultiSelect:a,selectRow:o,watchRow:l,originalData:u,columns:c,seeDetail:h,nowMod:f}=this.props;return O.jsxs(Hd,{component:"div",className:Dt(ea.tableCell,ea.flexContainer,{[ea.noClick]:s==null}),variant:"body",style:{height:i,width:c[t].width+" !important",flex:"auto"},children:[t===0?a?O.jsx(wp,{color:"primary",checked:u[this.getObjectIndexIndex(e)].checked,onClick:()=>o(e),inputProps:{"aria-labelledby":t}}):O.jsx(O.Fragment,{}):"",t===1?O.jsxs("div",{children:[O.jsxs("div",{style:{fontWeight:"600",cursor:"pointer"},children:[e," - ",O.jsx("span",{onClick:()=>h(u[this.getObjectIndexIndex(e)]),children:u[this.getObjectIndexIndex(e)].name}),f===1?O.jsx(th,{size:"small",onClick:()=>l(u[this.getObjectIndexIndex(e)]),children:O.jsx(ICe,{fontSize:"small",sx:{color:Ed[400]}})}):""]}),O.jsx("div",{style:{fontSize:"12px",color:"#7a7a7a",overflow:"hidden",height:"16px"},children:O.jsx("i",{children:u[this.getObjectIndexIndex(e)].url})}),O.jsxs("div",{style:{fontSize:"12px",color:"#7a7a7a"},children:[u[this.getObjectIndexIndex(e)].video?""+u[this.getObjectIndexIndex(e)].video.width+"x"+u[this.getObjectIndexIndex(e)].video.height+"-"+u[this.getObjectIndexIndex(e)].video.codec:"","-",u[this.getObjectIndexIndex(e)].audio?""+u[this.getObjectIndexIndex(e)].audio.codec+"-"+u[this.getObjectIndexIndex(e)].audio.channels+" audio channels":""]})]}):"",t===2?O.jsxs(wt,{children:[u[this.getObjectIndexIndex(e)].status===0?O.jsx(J1,{sx:{width:24,height:24},children:O.jsx(g1e,{})}):"",u[this.getObjectIndexIndex(e)].status===1?f===0?O.jsxs("div",{style:{color:u[this.getObjectIndexIndex(e)].delay<500?"green":"red",fontWeight:"bold"},children:[u[this.getObjectIndexIndex(e)].delay,"ms"]}):O.jsx(J1,{sx:{bgcolor:Ed[500],width:24,height:24},children:O.jsx(RCe,{})}):"",u[this.getObjectIndexIndex(e)].status===2?O.jsx(J1,{sx:{bgcolor:Jie[500],width:24,height:24},children:O.jsx(PCe,{})}):""]}):""]})};headerRenderer=({label:e,columnIndex:t})=>{const{selectedArr:n,originalData:i,showMultiSelect:s,selectAll:a,columns:o}=this.props;return O.jsxs(Hd,{component:"div",className:Dt(ea.tableCell,ea.flexContainer,ea.noClick),variant:"head",style:{width:o[t].width+" !important",flex:"auto"},children:[t===0?s?O.jsx(wp,{color:"primary",checked:n.length>0&&n.length===i.length,onClick:a,indeterminate:n.length>0&&n.length!==i.length,inputProps:{"aria-labelledby":-1}}):O.jsx("div",{children:""}):"",t!==0?O.jsx("span",{children:e}):""]})};render(){const{columns:e,rowHeight:t,headerHeight:n,...i}=this.props;return O.jsx(hz,{children:({height:s,width:a})=>O.jsx(OD,{height:s,width:a,rowHeight:t,gridStyle:{direction:"inherit"},headerHeight:n,...i,rowClassName:this.getRowClassName,children:e.map(({dataKey:o,...l},u)=>O.jsx(LD,{headerRenderer:c=>this.headerRenderer({...c,columnIndex:u}),className:ea.flexContainer,cellRenderer:this.cellRenderer,dataKey:o,...l},o))})})}}Iz.propTypes={columns:kl.arrayOf(kl.shape({dataKey:kl.string.isRequired,label:kl.string.isRequired,width:kl.number.isRequired})).isRequired,headerHeight:kl.number,onRowClick:kl.func,rowHeight:kl.number};const OCe=rt(Iz)(LCe);function MCe(){const{t:r}=Ii(),e=Gu(),t=M.useContext(Ha),[n,i]=M.useState(550);ev();const[s,a]=M.useState([]),[o,l]=M.useState(0),[u,c]=M.useState(null),[h,f]=M.useState(!1),g=N=>{const{name:U,value:B}=N.target;c(A=>({...A,[U]:B}))},v=(N,U)=>new URLSearchParams(N.search).get(U);M.useEffect(()=>{let N=v(e,"md5");e.pathname==="/detail"&&t.updateDetailMd5(N),console.log("-----",e)},[e]);const y=()=>{t.updateDataByIndex([u.index],{name:u.name,tvgLogo:u.tvgLogo,url:u.url,groupTitle:u.groupTitle}),l(1)};M.useEffect(()=>{i(window.innerHeight-t.headerHeight-50),window.addEventListener("resize",N=>{i(N.currentTarget.innerHeight-t.headerHeight-50)})},[]);const _=async N=>{let U=t.nowPlatform;if(t.nowMod===1){let B="watch";if(await cf.getByLabel(B)!==null){ME("changeWatchUrl",{data:N});return}const $=new cf(B,{url:"/watch/single?platform="+U+"&url="+N.url,x:0,y:0,width:1024,height:600,title:N.name,center:!0,maximizable:!1});console.log("webview",$),$.once("tauri://created",function(){}),$.once("tauri://error",function(W){console.log("traui error ",W)})}else console.log("-------22222"),window.open("/watch/single?platform="+U+"&url="+N.url)},C=()=>{let N=1;s.length>0&&(N=0);let U=[];if(N===1)for(let B=0;B<t.detailList.length;B++)U.push(t.detailList[B].index);t.onSelectedOrNotAll(N),a(U)},E=N=>{t.onSelectedRow(N);let U=1;for(let B=0;B<s.length;B++)s[B]===N&&(U=0);a(U===1?B=>[...B,N]:B=>B.filter(A=>A!==N))},D=N=>{if(o!==0&&u!==null&&N.index===u.index){l(0);return}l(1),c(N)},I=()=>{l(0)},k=()=>{l(2)},P=N=>{f(N)};return O.jsxs(wt,{style:{padding:"0 20px"},children:[O.jsx(m1e,{setSelectedArr:a,showMultiSelect:h,selectedArr:s,changeShowMultiSelect:P}),O.jsx(Ku,{style:{height:n,marginTop:"10px"},children:O.jsx(OCe,{rowCount:t.detailList.length,rowGetter:({index:N})=>t.detailList[N],originalData:t.detailList,selectAllRow:C,showMultiSelect:h,selectRow:E,seeDetail:D,watchRow:_,nowMod:t.nowMod,t:()=>r,selectedArr:s,selectAll:C,columns:[{width:80,label:"checkBox",dataKey:"index"},{width:600,label:r(""),dataKey:"index"},{width:100,label:r(""),dataKey:"index"}]})}),o!==0?O.jsx(wt,{sx:{backgroundColor:"#fff",borderRadius:"10px"},children:O.jsx(wt,{children:O.jsxs(wt,{sx:{display:"flex",flexDirection:"column"},children:[O.jsx(Ur,{sx:{marginBottom:"25px",marginTop:"10px"},fullWidth:!0,children:O.jsx(jn,{disabled:o===1,sx:{fontSize:"11px"},label:r(""),name:"name",size:"small",id:"standard-multiline-static",value:u.name,onChange:g})}),O.jsx(Ur,{sx:{marginBottom:"25px"},fullWidth:!0,children:O.jsx(jn,{disabled:o===1,sx:{fontSize:"11px"},label:r("m3u8"),name:"url",size:"small",id:"standard-multiline-static",value:u.url,onChange:g})}),O.jsx(Ur,{sx:{marginBottom:"25px"},fullWidth:!0,children:O.jsx(jn,{disabled:o===1,sx:{fontSize:"11px"},label:r("logoUrl"),name:"tvgLogo",size:"small",id:"standard-multiline-static",value:u.tvgLogo,onChange:g})}),O.jsx(Ur,{sx:{marginBottom:"15px"},fullWidth:!0,children:O.jsx(jn,{disabled:o===1,sx:{fontSize:"11px"},label:r(""),name:"groupTitle",size:"small",id:"standard-multiline-static",value:u.groupTitle,onChange:g})}),O.jsxs(wt,{sx:{display:"flex",justifyContent:"flex-end"},children:[o===2?O.jsx(Dr,{size:"small",onClick:y,variant:"contained",sx:{marginRight:"5px"},children:r("")}):"",o===1?O.jsx(Dr,{size:"small",onClick:k,variant:"contained",sx:{marginRight:"5px"},children:r("")}):"",O.jsx(Dr,{size:"small",onClick:I,variant:"contained",children:r("/")})]})]})})}):""]})}const FCe=()=>{const{t:r}=Ii(),e=ev();return O.jsxs(wt,{sx:{p:3},children:[O.jsx(kr,{variant:"h4",gutterBottom:!0,children:r(" iptv-checker")}),O.jsx(kr,{variant:"subtitle1",gutterBottom:!0,color:"textSecondary",children:r(" IPTV  Web ")}),O.jsxs(Ko,{container:!0,spacing:3,sx:{mt:2},children:[O.jsx(Ko,{item:!0,xs:12,md:4,children:O.jsx(Pc,{children:O.jsxs(Bd,{children:[O.jsx(kr,{variant:"h6",component:"div",gutterBottom:!0,children:r("")}),O.jsx(kr,{variant:"body2",color:"textSecondary",sx:{mb:2},children:r("")}),O.jsx(Dr,{variant:"outlined",onClick:()=>e("/task"),children:r("")})]})})}),O.jsx(Ko,{item:!0,xs:12,md:4,children:O.jsx(Pc,{children:O.jsxs(Bd,{children:[O.jsx(kr,{variant:"h6",component:"div",gutterBottom:!0,children:r("")}),O.jsx(kr,{variant:"body2",color:"textSecondary",sx:{mb:2},children:r("")}),O.jsx(Dr,{variant:"outlined",onClick:()=>e("/favorite"),children:r("")})]})})}),O.jsx(Ko,{item:!0,xs:12,md:4,children:O.jsx(Pc,{children:O.jsxs(Bd,{children:[O.jsx(kr,{variant:"h6",component:"div",gutterBottom:!0,children:r("")}),O.jsx(kr,{variant:"body2",color:"textSecondary",sx:{mb:2},children:r("")}),O.jsx(Dr,{variant:"outlined",onClick:()=>e("/settings"),children:r("")})]})})})]})]})},xB=mr(O.jsx("path",{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2m4.24 16L12 15.45 7.77 18l1.12-4.81-3.73-3.23 4.92-.42L12 5l1.92 4.53 4.92.42-3.73 3.23z"})),BCe=mr(O.jsx("path",{d:"M20 3H4v10c0 2.21 1.79 4 4 4h6c2.21 0 4-1.79 4-4v-3h2c1.11 0 2-.9 2-2V5c0-1.11-.89-2-2-2m0 5h-2V5h2zM4 19h16v2H4z"})),NCe=()=>{const{t:r}=Ii(),t=M.useContext(Ha).configInfo.sponsor||[],[n,i]=M.useState(0),[s,a]=M.useState(null),[o,l]=M.useState(null),u=()=>{i(1)},c=y=>{a(y),i(2)},h=()=>{i(1),a(null)},f=y=>{l(y)},g=()=>{l(null)},v=()=>{window.open(UE.homepage_url,"_blank")};return O.jsxs(wt,{sx:{p:4,display:"flex",flexDirection:"column",alignItems:"center",textAlign:"center"},children:[n===0&&O.jsxs(O.Fragment,{children:[O.jsx(kr,{variant:"h5",gutterBottom:!0,children:r("")}),O.jsx(wt,{sx:{mt:4},children:O.jsx(Dr,{variant:"contained",color:"primary",size:"large",onClick:u,children:r("")})})]}),n===1&&O.jsxs(O.Fragment,{children:[O.jsx(kr,{variant:"h5",gutterBottom:!0,children:r("")}),O.jsx(kr,{variant:"body1",sx:{mb:4},children:r("")}),O.jsxs(Ko,{container:!0,spacing:4,justifyContent:"center",children:[O.jsx(Ko,{item:!0,children:O.jsx(Pc,{sx:{maxWidth:345,minWidth:200},children:O.jsxs(zO,{onClick:()=>c("money"),sx:{p:2,display:"flex",flexDirection:"column",alignItems:"center"},children:[O.jsx(BCe,{sx:{fontSize:60,color:"primary.main",mb:2}}),O.jsx(Bd,{children:O.jsx(kr,{gutterBottom:!0,variant:"h6",component:"div",children:r("")})})]})})}),O.jsx(Ko,{item:!0,children:O.jsx(Pc,{sx:{maxWidth:345,minWidth:200},children:O.jsxs(zO,{onClick:()=>c("star"),sx:{p:2,display:"flex",flexDirection:"column",alignItems:"center"},children:[O.jsx(xB,{sx:{fontSize:60,color:"warning.main",mb:2}}),O.jsx(Bd,{children:O.jsx(kr,{gutterBottom:!0,variant:"h6",component:"div",children:r("")})})]})})})]})]}),n===2&&s==="money"&&O.jsxs(O.Fragment,{children:[O.jsx(kr,{variant:"h5",gutterBottom:!0,children:r("")}),O.jsx(Ko,{container:!0,spacing:2,justifyContent:"center",sx:{mb:4,mt:2},children:t.map((y,_)=>O.jsx(Ko,{item:!0,children:O.jsx(Dr,{variant:"outlined",size:"large",onClick:()=>f(y),children:y.name})},_))}),t.length===0&&O.jsx(kr,{variant:"body1",color:"textSecondary",sx:{mb:2},children:r("")}),O.jsx(Dr,{variant:"text",onClick:h,children:r("")})]}),n===2&&s==="star"&&O.jsxs(O.Fragment,{children:[O.jsx(xB,{sx:{fontSize:80,color:"warning.main",mb:2}}),O.jsx(kr,{variant:"h5",gutterBottom:!0,children:r(" Star ")}),O.jsx(wt,{sx:{mt:4,mb:2},children:O.jsx(Dr,{variant:"contained",color:"primary",size:"large",onClick:v,children:r(" GitHub  Star")})}),O.jsx(Dr,{variant:"text",onClick:h,children:r("")})]}),O.jsxs(Ml,{open:!!o,onClose:g,maxWidth:"md",children:[O.jsx(Sm,{children:o?.name}),O.jsx(Pk,{children:O.jsx(wt,{sx:{display:"flex",justifyContent:"center",p:2},children:o?.url&&O.jsx("img",{src:o.url,alt:o.name,style:{maxWidth:"100%",maxHeight:"500px",objectFit:"contain"}})})})]})]})},Pz=[{path:"/",name:"",icon:"HomeOutlinedIcon",element:O.jsx(FCe,{}),handle:{showMod:[0,1],showHeader:!0,showSidebar:!0}},{path:"/local",name:"",icon:"LaptopIcon",element:O.jsx(Dle,{}),handle:{showMod:[1],showHeader:!0,showSidebar:!0}},{path:"/watch",name:"",icon:"RemoveRedEyeIcon",element:O.jsx(nSe,{}),handle:{showMod:[1],showHeader:!0,showSidebar:!0}},{path:"/task",name:"",icon:"CloudQueueIcon",element:O.jsx(iSe,{}),handle:{showMod:[0],showHeader:!0,showSidebar:!0}},{path:"/favorite",name:"",icon:"FavoriteBorderIcon",element:O.jsx(uSe,{}),handle:{showMod:[0],showHeader:!0,showSidebar:!0}},{path:"/settings",name:"",icon:"SettingsOutlinedIcon",handle:{showMod:[0,1],showHeader:!0,showSidebar:!0},children:[{path:"/settings",index:!0,element:O.jsx(bF,{}),hideInMenu:!0,handle:{showHeader:!0,showSidebar:!0}},{path:"/settings/basic",name:"",icon:"PublicIcon",element:O.jsx(bF,{}),handle:{showHeader:!0,showSidebar:!0}},{path:"/settings/keywords",name:"",icon:"StickyNote2Icon",element:O.jsx(lSe,{}),handle:{showHeader:!0,showSidebar:!0}},{path:"/settings/search",name:"",icon:"SearchIcon",element:O.jsx(oSe,{}),handle:{showHeader:!0,showSidebar:!0}},{path:"/settings/logos",name:"",icon:"PhotoLibraryIcon",element:O.jsx(dSe,{}),handle:{showHeader:!0,showSidebar:!0}},{path:"/settings/donate",name:"",icon:"VolunteerActivismIcon",element:O.jsx(NCe,{}),handle:{showHeader:!0,showSidebar:!0}}]},{path:"/detail",element:O.jsx(MCe,{}),hideInMenu:!0,handle:{showHeader:!1,showSidebar:!0}},{path:"/watch/single",element:O.jsx(aSe,{}),hideInMenu:!0,handle:{showHeader:!1,showSidebar:!1}}],B0="/detail",_B=240;function UCe(){const{t:r}=Ii();let e=Gu();const t=gK(),n=M.useContext(Ha),i=ev(),s=Pz.filter(ne=>!ne.hideInMenu),[a,o]=M.useState(s[0]),[l,u]=M.useState(!1),[c,h]=M.useState(!1),[f,g]=M.useState(null),[v,y]=M.useState(!1),[_,C]=M.useState(!0),[E,D]=M.useState(!1),[I,k]=M.useState(""),[P,N]=M.useState(null),B=(t.find(ne=>ne.handle?.showHeader!==void 0)||t[t.length-1])?.handle||{showHeader:!0,showSidebar:!0};M.useEffect(()=>{if(e.pathname!=B0){n.updateDetailMd5("");for(let ne=0;ne<s.length;ne++)if((e.pathname==s[ne].path||e.pathname==s[ne].uri)&&o(s[ne]),s[ne].children)for(let ue=0;ue<s[ne].children.length;ue++){const se=s[ne].children[ue].path||s[ne].children[ue].uri;e.pathname==se&&(o(s[ne].children[ue]),h(!0))}}},[e,s]);const A=ne=>{const ue=ne.path||ne.uri;ue===B0?u(!l):ne.children?h(!c):(o(ne),i(ue))},$=ne=>()=>{C(ne)},W=()=>{D(!1)},V=kne("(prefers-color-scheme: dark)"),Q=M.useMemo(()=>mS({palette:{mode:V?"dark":"light",sideBarBgColor:{dark:"#021d2a",light:"antiquewhite"}}}),[V]),ie=O.jsx(wt,{className:"side-bar",style:{backgroundColor:Q.palette.sideBarBgColor[V?"dark":"light"]},sx:{width:_B},role:"presentation",children:O.jsxs(r2,{children:[O.jsx(wt,{className:"side-bar-logo",children:O.jsxs(wt,{className:"side-bar-logo-item",children:[O.jsx("img",{src:ire,height:"60"}),O.jsxs(wt,{className:"go-github",children:["iptv-checker",n.showNewVersion?O.jsx("a",{href:"/#/settings",style:{color:"green"},children:r("")}):""]})]})}),s.map((ne,ue)=>ne.handle?.showMod?.includes(n.nowMod)?O.jsx(wt,{children:ne.path!==B0||ne.path===B0&&n.subCheckMenuList.length>0?O.jsxs(O.Fragment,{children:[O.jsx(Sre,{disablePadding:!0,onClick:()=>A(ne),children:O.jsxs(mO,{children:[O.jsxs(vO,{children:[ne.icon==="LaptopIcon"?O.jsx(aee,{}):"",ne.icon==="SettingsIcon"?O.jsx(yO,{}):"",ne.icon==="AdjustIcon"?O.jsx(Ire,{}):"",ne.icon==="CloudQueueIcon"?O.jsx(Pre,{}):"",ne.icon==="RemoveRedEyeIcon"?O.jsx(XN,{}):"",ne.icon==="BoltIcon"?O.jsx(Dre,{}):"",ne.icon==="PublicIcon"?O.jsx(t2,{}):"",ne.icon==="StickyNote2Icon"?O.jsx(pO,{}):"",ne.icon==="FavoriteIcon"?O.jsx(xO,{}):"",ne.icon==="FavoriteBorderIcon"?O.jsx(Ore,{}):"",ne.icon==="HomeIcon"?O.jsx(zre,{}):"",ne.icon==="HomeOutlinedIcon"?O.jsx(Hre,{}):"",ne.icon==="SettingsOutlinedIcon"?O.jsx($re,{}):""]}),O.jsx($_,{primary:r(ne.name)}),ne.path===B0?l?O.jsx(CO,{}):O.jsx(wO,{}):"",ne.children?c?O.jsx(CO,{}):O.jsx(wO,{}):""]})},ue),ne.children?O.jsx(n2,{in:c,timeout:"auto",unmountOnExit:!0,children:O.jsx(r2,{component:"div",disablePadding:!0,children:ne.children.map((se,ae)=>!se.hideInMenu&&O.jsxs(mO,{sx:{pl:4},onClick:()=>A(se),children:[O.jsxs(vO,{children:[se.icon==="PublicIcon"?O.jsx(t2,{}):"",se.icon==="StickyNote2Icon"?O.jsx(pO,{}):"",se.icon==="SettingsIcon"?O.jsx(yO,{}):"",se.icon==="SearchIcon"?O.jsx(kk,{}):"",se.icon==="ManageSearchIcon"?O.jsx(Rre,{}):"",se.icon==="PhotoLibraryIcon"?O.jsx(Lre,{}):"",se.icon==="FavoriteIcon"?O.jsx(xO,{}):"",se.icon==="VolunteerActivismIcon"?O.jsx(jre,{}):""]}),O.jsx($_,{primary:r(se.name)})]},ae))})}):""]}):""},ue):"")]})});return O.jsxs(bte,{theme:Q,children:[O.jsx(Rne,{}),O.jsx($Ce,{open:E,sponsorInfo:P,onClose:W}),O.jsxs(wt,{className:"layout",children:[B.showSidebar&&O.jsx(bne,{sx:{".MuiPaper-root":{borderTopLeftRadius:"12px",borderBottomLeftRadius:"12px",backgroundColor:"transparent"}},open:_,anchor:"left",variant:_?"permanent":"temporary",children:ie}),O.jsxs(wt,{className:"container-inner",style:{marginLeft:B.showSidebar&&_?_B+"px":""},children:[O.jsx(wt,{"data-tauri-drag-region":!0,style:{width:"100%",height:"20px"}}),B.showHeader&&O.jsx(wt,{style:{padding:"0 20px",display:"flex",justifyContent:"space-between",height:"60px"},children:O.jsxs(wt,{style:{display:"flex",justifyContent:"space-between",height:"60px",width:"100%"},children:[O.jsxs(wt,{style:{display:"flex",justifyContent:"center",alignItems:"center"},children:[B.showSidebar&&O.jsx(wt,{children:O.jsx(th,{"aria-label":"delete",size:"small",onClick:$(!_),children:O.jsx(Ene,{})})}),O.jsx(wt,{style:{fontWeight:"bold",fontSize:"20px"},children:a.name!==null&&a.name!==void 0?r(a.name):n.detailMd5})]}),O.jsxs(wt,{"data-tauri-drag-region":!0,style:{display:n.nowMod===1?"flex":"none",justifyContent:"center",alignItems:"center"},children:[O.jsx(wt,{className:"titlebar-button",id:"titlebar-minimize",children:O.jsx("img",{src:"https://api.iconify.design/mdi:window-minimize.svg",alt:"minimize"})}),O.jsx(wt,{className:"titlebar-button",id:"titlebar-close",children:O.jsx("img",{src:"https://api.iconify.design/mdi:close.svg",alt:"close"})})]})]})}),O.jsx(wt,{style:{width:"100%",height:"20px"}}),O.jsx(a2,{style:{marginBottom:"10px"}}),O.jsx(wK,{})]})]})]})}function $Ce(r){const{t:e}=Ii(),{onClose:t,sponsorInfo:n,open:i}=r,s=()=>{t()};return O.jsxs(Ml,{onClose:s,open:i,children:[O.jsx(Sm,{children:e("")}),n!==null&&n.url!==""?O.jsx(wt,{sx:{display:"flex",justifyContent:"center"},children:O.jsx("img",{src:n.url,height:"400"})}):""]})}const jCe={"Welcome to React":"iptv-checker","System Setting":"","menu source check":"","menu public source":"","menu watch online":"","menu background task":"","menu system settings":"","Please enter the data to be checked":"",:"",:"",:"",:"","":"",:"",:"",:"","URL":"URL","":"","":"",:"","GitHub ":"GitHub ",:"","GitHub ":"GitHub ",:"",:"",:"",:"",:"",:"",:"","":"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",URL:"URL",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"","URL":"URL"," IPTV Checker Web":" IPTV Checker Web"," IPTV  Web ":" IPTV  Web ",:"",:"",:"","":"","":"","":"",:"",:""," ":" ",:"","":"","":"","":""," ":" ",:"",:"",:""," Star ":" Star "," GitHub  Star":" GitHub  Star",:"",:"",:"",:"",:"","...":"...",:"",:"",:""},zCe={translation:jCe},HCe=JSON.parse(`{"ffmpeg":"ffmpeg check","":"Support developers to develop and continue to maintain the project","":"Run Time Info","":"Task Info","":"Output files","":"donate",".txt":"Download the results .txt format",".m3u":"Download the results .m3u format","":"edit data","":"Checking","":"records","":"total","":"Local Tasks","":"status","":"create time","":"File Type","":"And","":"New Version","":"Only Support","":"Check","Github":"Github link","":"Now version","STAR":" If you think the project is good, please open the link above and give it a STAR","":"Public Source","":"Check Again","":"Detection history","":"Data Check","":"Data preparation","":"Needs to be checked?",",.m3u.txt":"Please enter the link, only .m3u and .txt suffix links are supported","":"Please select a detection file","":"Local","":"Network","":"File Type","":"Buy me a drink","":"Fast Check","":"Please enter the data you want to check","m3u":"M3U information of your choice","":"raw data","":"Settings","":"Previous","csv":"Download CSV","":"Deal with it again","":"There are already groups","":"A new group has been added","m3u":"Download m3u","":"change","":"Or","":"Filter groups","":"Only the grouping is displayed","":"Resume checks","":"data","":"Filter video clarity","":"And","":"keyword","":"Start checking","":"Search","":"The save was successful","":"Multi-keyword search","":"Pause the check","":"The link is empty","":"After refreshing, you will be redirected to the home page","":"Valid links","":"Delay","":"Replaces the selected group","":"The channel name contains","":"Invalid link","":"Invalid","":"Check the progress","":"You need to click the [Search] button to filter","()":"Export (next step)","":"Select the source with the lowest latency","":"Edit","":"Delete the selection","/":"Cancel/Close","":"Watch","":"Custom source additions","m3u8":"m3u8 link","":"The name of the channel","":"Invalid","":"Valid","":"Save and close","":"Group name","":"Enter a new group name","":"System Settings","(,,)":"Sorting (If there is a large amount of data, the performance of the sorted list may be affected, so it is recommended to operate in batches)","":"Change the grouping","":"Check configuration","":"Previous","":"Next","":"Checking methods","http":"http fast check","http":"If it's a non-http link, skip it","(\\"[HD]CCTV1\\"\\"[HD]\\")":"Should the extra characters in the channel name be removed (for example, \\"[HD]CCTV1\\" will remove the \\"[HD]\\" characters)","(0 0)":"Number of channels to save with the same name (default 0 means save all; if set greater than 0, it will save the specified number of channels)","":"Basic configuration","":"Output file name","":"online link","":"local file","":"every day","":"Add","":"Waiting","":"Checking","":"Completed","":"Stopped","":"Operation failed","":"Channel Name Replacement Configuration","":"Character Replacement Configuration","":"Search Value","":"Replace Value","":"Cancel","":"Add a line","":"There are often some special characters before and after the channel name on the Internet. You can add this configuration to replace these characters and improve the tidiness of the channel name.","[HD][HD]":"For example, if \\"[HD]\\" appears in the channel name and you need to remove this character, add a line: fill in \\"[HD]\\" for the search value and leave the replacement value blank.","":"Basic configuration is empty","":"Favorite Channel Name","":"Dislike channel Name","":"Favorite Channel","":"Dislike channel","":"every hour","":"Timed check time","":"Add keywords","":"The name of the resulting file","":"Add not to see","":"No","":"Check the number of concurrent transactions","":"Yes","":"Execute it now","(ms)":"Check timeout (millisecond)","http(ms)":"HTTP Timeout (millisecond)","":"Add just look","":"Check the list of files","":"Need Sort","":"No need to check","":"Just look at the channel keywords","":"Subscribe link","":"Click Download","":"The operation failed","":"Don't look at channel keywords","":"If the fetch task fails, check whether the service starts normally","":"Not yet generated","id":"Task ID","":"Creation time","":"Run type","":"Love keywords","":"Play","":"Stop","":"Request header","m3u8":"Please enter the M3U8 playback address","":"Don't like keywords","m3u":"Upload the m3u file locally","":"Last run time","":"Next run time","":"Personalized configuration","":"Operational status","":"System configuration","":"Source Check","":"Public Source","":"Watch Online","":"Background Tasks","":"Please enter the data to be checked","":"New","":"Language","":"Remove","":"Example","":"name","":"Custom network source","":"Check concurrency","":"Check timeout (milliseconds)","":"Save","":"Player platform","":"Get data failed","":"Save failed","":"invalid parameters","":"Import tasks","":"Export tasks","":"Refetch Data","":"detail","":"Continue","":"Check Again","":"Refresh","":"last run time","":"Next Step","":"The input box supports the following formats","m3u,":"Supports standard format m3u links, if there are multiple, please use a comma as the separator, for example","":"Support similar","m3u":"Support original content of m3u files, similar to","":"Please select the source","githubiptv-org":"The current source is from iptv-org on GitHub. If you have relevant source links, please add them in the settings.","server":"The current setting for Background check server domain is","server":"Background check server domain","server":"I'm sorry, you haven't set the Background check server domain yet. Please go to the settings page to set it up before checking again.","":"Remote URL to Local Images","":"Extensions","":"Extensions (One per line)","":"Search Sources","":"Add Source","":"Parse Type","URL":"URLs (One per line)","":"Include Files (One per line)","":"Optional: Filter specific files","":"Save Configuration","GitHub ":"GitHub Home Page","":"Raw Source","GitHub ":"GitHub Sub Page","":"Spider Config","":"No Data","":"My Favorite Config","":"Add Rule","":"Match Logic","":"Include","":"Exact Match","":"No rules yet, please add from top right","":"Please enter channel name","":"Enter favorite channel name","":"Include Match","":"Exact Match","":"Add Favorite Channel Name","":"Subscription URL","":"All Crawled Channels","":"Favorite Channels","":"Checked Favorite Channels","":"Failed to open file","":"No link available","":"Special Character Replacement","":"Favorite Channels","":"Clear Results","":"Cleared Successfully","":"Start Crawling","":"Failed to fetch results","URL":"URLs","":"Include Files","":"Crawl Now","":"View Results","":"Crawl Results","":"No Content","":"Basic Settings","":"Spider Config","":"Don't forget to save","":"The content of the above link has been converted from Traditional to Simplified Chinese and special characters have been replaced","":"The following keywords can be directly input in simplified Chinese, and there is no need to worry about the problem of in the original source and the inability to search","":"Channel Logo Config","":"Channel Logo","":"Upload Logo","":"Logo Exists","":"No Logo","":"Welcome","":"Search Channel","":"Save All","":"Please enter channel name first","":"Please upload or select an image","":"Are you sure you want to delete?","":"Deleted successfully","":"Added successfully","":"Updated successfully","":"Image URL","":"Preview","URL":"Upload failed, no URL returned"," iptv-checker":"Welcome to iptv-checker"," IPTV  Web ":"This is a Web application for managing and checking IPTV channels.","":"Go to Tasks","":"Go to Favorites","":"Go to Settings","":"Configure scheduled tasks to automatically check channel validity.","":"Manage your favorite channels and view crawl results.","":"Configure crawler sources, keyword replacement, and other system settings.","":"Donate","":"Support Developer"," ":"If this project helps you, please consider buying the developer a coffee ","":"No donation info available","":"Do you like this project?","":"Yes, I like it!","":"Thank you for your support!"," ":"Please choose a way to support the developer ","":"Please choose a way to support the developer","":"Monetary Support","":"Mental Support"," Star ":"Your Star is our greatest motivation!"," GitHub  Star":"Go to GitHub and give a Star","":"Select Donation Method","":"Back","":"The uploaded filename is the channel name","":"Batch Upload Images","":"Upload Completed","...":"Uploading...","":"Success","":"Failed","":"All files failed to upload"}`),VCe={translation:HCe},WCe={en:VCe,zh:zCe};Ts.use(rne).init({resources:WCe,lng:"zh",interpolation:{escapeValue:!1}});const qCe=YK([{element:O.jsx(UCe,{}),children:Pz}]);TH.createRoot(document.getElementById("root")).render(O.jsx(Qr.StrictMode,{children:O.jsx(tG,{children:O.jsx(fie,{children:O.jsx(lX,{router:qCe})})})}));
