function B7(i,e){for(var t=0;t<e.length;t++){const r=e[t];if(typeof r!="string"&&!Array.isArray(r)){for(const n in r)if(n!=="default"&&!(n in i)){const s=Object.getOwnPropertyDescriptor(r,n);s&&Object.defineProperty(i,n,s.get?s:{enumerable:!0,get:()=>r[n]})}}}return Object.freeze(Object.defineProperty(i,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))r(n);new MutationObserver(n=>{for(const s of n)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function t(n){const s={};return n.integrity&&(s.integrity=n.integrity),n.referrerPolicy&&(s.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?s.credentials="include":n.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(n){if(n.ep)return;n.ep=!0;const s=t(n);fetch(n.href,s)}})();var uh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function ia(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}function N7(i){if(Object.prototype.hasOwnProperty.call(i,"__esModule"))return i;var e=i.default;if(typeof e=="function"){var t=function r(){var n=!1;try{n=this instanceof r}catch{}return n?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(i).forEach(function(r){var n=Object.getOwnPropertyDescriptor(i,r);Object.defineProperty(t,r,n.get?n:{enumerable:!0,get:function(){return i[r]}})}),t}var Ob={exports:{}},fm={},Mb={exports:{}},jr={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rI;function U7(){if(rI)return jr;rI=1;var i=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),n=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),a=Symbol.for("react.context"),o=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),u=Symbol.for("react.memo"),c=Symbol.for("react.lazy"),h=Symbol.iterator;function m(te){return te===null||typeof te!="object"?null:(te=h&&te[h]||te["@@iterator"],typeof te=="function"?te:null)}var g={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},y=Object.assign,_={};function T(te,fe,ye){this.props=te,this.context=fe,this.refs=_,this.updater=ye||g}T.prototype.isReactComponent={},T.prototype.setState=function(te,fe){if(typeof te!="object"&&typeof te!="function"&&te!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,te,fe,"setState")},T.prototype.forceUpdate=function(te){this.updater.enqueueForceUpdate(this,te,"forceUpdate")};function E(){}E.prototype=T.prototype;function w(te,fe,ye){this.props=te,this.context=fe,this.refs=_,this.updater=ye||g}var D=w.prototype=new E;D.constructor=w,y(D,T.prototype),D.isPureReactComponent=!0;var R=Array.isArray,A=Object.prototype.hasOwnProperty,L={current:null},F={key:!0,ref:!0,__self:!0,__source:!0};function B(te,fe,ye){var Se,ke={},qe=null,vt=null;if(fe!=null)for(Se in fe.ref!==void 0&&(vt=fe.ref),fe.key!==void 0&&(qe=""+fe.key),fe)A.call(fe,Se)&&!F.hasOwnProperty(Se)&&(ke[Se]=fe[Se]);var et=arguments.length-2;if(et===1)ke.children=ye;else if(1<et){for(var kt=Array(et),pt=0;pt<et;pt++)kt[pt]=arguments[pt+2];ke.children=kt}if(te&&te.defaultProps)for(Se in et=te.defaultProps,et)ke[Se]===void 0&&(ke[Se]=et[Se]);return{$$typeof:i,type:te,key:qe,ref:vt,props:ke,_owner:L.current}}function M(te,fe){return{$$typeof:i,type:te.type,key:fe,ref:te.ref,props:te.props,_owner:te._owner}}function k(te){return typeof te=="object"&&te!==null&&te.$$typeof===i}function q(te){var fe={"=":"=0",":":"=2"};return"$"+te.replace(/[=:]/g,function(ye){return fe[ye]})}var G=/\/+/g;function H(te,fe){return typeof te=="object"&&te!==null&&te.key!=null?q(""+te.key):fe.toString(36)}function re(te,fe,ye,Se,ke){var qe=typeof te;(qe==="undefined"||qe==="boolean")&&(te=null);var vt=!1;if(te===null)vt=!0;else switch(qe){case"string":case"number":vt=!0;break;case"object":switch(te.$$typeof){case i:case e:vt=!0}}if(vt)return vt=te,ke=ke(vt),te=Se===""?"."+H(vt,0):Se,R(ke)?(ye="",te!=null&&(ye=te.replace(G,"$&/")+"/"),re(ke,fe,ye,"",function(pt){return pt})):ke!=null&&(k(ke)&&(ke=M(ke,ye+(!ke.key||vt&&vt.key===ke.key?"":(""+ke.key).replace(G,"$&/")+"/")+te)),fe.push(ke)),1;if(vt=0,Se=Se===""?".":Se+":",R(te))for(var et=0;et<te.length;et++){qe=te[et];var kt=Se+H(qe,et);vt+=re(qe,fe,ye,kt,ke)}else if(kt=m(te),typeof kt=="function")for(te=kt.call(te),et=0;!(qe=te.next()).done;)qe=qe.value,kt=Se+H(qe,et++),vt+=re(qe,fe,ye,kt,ke);else if(qe==="object")throw fe=String(te),Error("Objects are not valid as a React child (found: "+(fe==="[object Object]"?"object with keys {"+Object.keys(te).join(", ")+"}":fe)+"). If you meant to render a collection of children, use an array instead.");return vt}function se(te,fe,ye){if(te==null)return te;var Se=[],ke=0;return re(te,Se,"","",function(qe){return fe.call(ye,qe,ke++)}),Se}function de(te){if(te._status===-1){var fe=te._result;fe=fe(),fe.then(function(ye){(te._status===0||te._status===-1)&&(te._status=1,te._result=ye)},function(ye){(te._status===0||te._status===-1)&&(te._status=2,te._result=ye)}),te._status===-1&&(te._status=0,te._result=fe)}if(te._status===1)return te._result.default;throw te._result}var me={current:null},ue={transition:null},oe={ReactCurrentDispatcher:me,ReactCurrentBatchConfig:ue,ReactCurrentOwner:L};function ce(){throw Error("act(...) is not supported in production builds of React.")}return jr.Children={map:se,forEach:function(te,fe,ye){se(te,function(){fe.apply(this,arguments)},ye)},count:function(te){var fe=0;return se(te,function(){fe++}),fe},toArray:function(te){return se(te,function(fe){return fe})||[]},only:function(te){if(!k(te))throw Error("React.Children.only expected to receive a single React element child.");return te}},jr.Component=T,jr.Fragment=t,jr.Profiler=n,jr.PureComponent=w,jr.StrictMode=r,jr.Suspense=l,jr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=oe,jr.act=ce,jr.cloneElement=function(te,fe,ye){if(te==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+te+".");var Se=y({},te.props),ke=te.key,qe=te.ref,vt=te._owner;if(fe!=null){if(fe.ref!==void 0&&(qe=fe.ref,vt=L.current),fe.key!==void 0&&(ke=""+fe.key),te.type&&te.type.defaultProps)var et=te.type.defaultProps;for(kt in fe)A.call(fe,kt)&&!F.hasOwnProperty(kt)&&(Se[kt]=fe[kt]===void 0&&et!==void 0?et[kt]:fe[kt])}var kt=arguments.length-2;if(kt===1)Se.children=ye;else if(1<kt){et=Array(kt);for(var pt=0;pt<kt;pt++)et[pt]=arguments[pt+2];Se.children=et}return{$$typeof:i,type:te.type,key:ke,ref:qe,props:Se,_owner:vt}},jr.createContext=function(te){return te={$$typeof:a,_currentValue:te,_currentValue2:te,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},te.Provider={$$typeof:s,_context:te},te.Consumer=te},jr.createElement=B,jr.createFactory=function(te){var fe=B.bind(null,te);return fe.type=te,fe},jr.createRef=function(){return{current:null}},jr.forwardRef=function(te){return{$$typeof:o,render:te}},jr.isValidElement=k,jr.lazy=function(te){return{$$typeof:c,_payload:{_status:-1,_result:te},_init:de}},jr.memo=function(te,fe){return{$$typeof:u,type:te,compare:fe===void 0?null:fe}},jr.startTransition=function(te){var fe=ue.transition;ue.transition={};try{te()}finally{ue.transition=fe}},jr.unstable_act=ce,jr.useCallback=function(te,fe){return me.current.useCallback(te,fe)},jr.useContext=function(te){return me.current.useContext(te)},jr.useDebugValue=function(){},jr.useDeferredValue=function(te){return me.current.useDeferredValue(te)},jr.useEffect=function(te,fe){return me.current.useEffect(te,fe)},jr.useId=function(){return me.current.useId()},jr.useImperativeHandle=function(te,fe,ye){return me.current.useImperativeHandle(te,fe,ye)},jr.useInsertionEffect=function(te,fe){return me.current.useInsertionEffect(te,fe)},jr.useLayoutEffect=function(te,fe){return me.current.useLayoutEffect(te,fe)},jr.useMemo=function(te,fe){return me.current.useMemo(te,fe)},jr.useReducer=function(te,fe,ye){return me.current.useReducer(te,fe,ye)},jr.useRef=function(te){return me.current.useRef(te)},jr.useState=function(te){return me.current.useState(te)},jr.useSyncExternalStore=function(te,fe,ye){return me.current.useSyncExternalStore(te,fe,ye)},jr.useTransition=function(){return me.current.useTransition()},jr.version="18.3.1",jr}var iI;function DE(){return iI||(iI=1,Mb.exports=U7()),Mb.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var nI;function $7(){if(nI)return fm;nI=1;var i=DE(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,n=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function a(o,l,u){var c,h={},m=null,g=null;u!==void 0&&(m=""+u),l.key!==void 0&&(m=""+l.key),l.ref!==void 0&&(g=l.ref);for(c in l)r.call(l,c)&&!s.hasOwnProperty(c)&&(h[c]=l[c]);if(o&&o.defaultProps)for(c in l=o.defaultProps,l)h[c]===void 0&&(h[c]=l[c]);return{$$typeof:e,type:o,key:m,ref:g,props:h,_owner:n.current}}return fm.Fragment=t,fm.jsx=a,fm.jsxs=a,fm}var sI;function j7(){return sI||(sI=1,Ob.exports=$7()),Ob.exports}var V=j7(),j=DE();const ea=ia(j),qy=B7({__proto__:null,default:ea},[j]);var ev={},Fb={exports:{}},_a={},Bb={exports:{}},Nb={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aI;function z7(){return aI||(aI=1,(function(i){function e(ue,oe){var ce=ue.length;ue.push(oe);e:for(;0<ce;){var te=ce-1>>>1,fe=ue[te];if(0<n(fe,oe))ue[te]=oe,ue[ce]=fe,ce=te;else break e}}function t(ue){return ue.length===0?null:ue[0]}function r(ue){if(ue.length===0)return null;var oe=ue[0],ce=ue.pop();if(ce!==oe){ue[0]=ce;e:for(var te=0,fe=ue.length,ye=fe>>>1;te<ye;){var Se=2*(te+1)-1,ke=ue[Se],qe=Se+1,vt=ue[qe];if(0>n(ke,ce))qe<fe&&0>n(vt,ke)?(ue[te]=vt,ue[qe]=ce,te=qe):(ue[te]=ke,ue[Se]=ce,te=Se);else if(qe<fe&&0>n(vt,ce))ue[te]=vt,ue[qe]=ce,te=qe;else break e}}return oe}function n(ue,oe){var ce=ue.sortIndex-oe.sortIndex;return ce!==0?ce:ue.id-oe.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;i.unstable_now=function(){return s.now()}}else{var a=Date,o=a.now();i.unstable_now=function(){return a.now()-o}}var l=[],u=[],c=1,h=null,m=3,g=!1,y=!1,_=!1,T=typeof setTimeout=="function"?setTimeout:null,E=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function D(ue){for(var oe=t(u);oe!==null;){if(oe.callback===null)r(u);else if(oe.startTime<=ue)r(u),oe.sortIndex=oe.expirationTime,e(l,oe);else break;oe=t(u)}}function R(ue){if(_=!1,D(ue),!y)if(t(l)!==null)y=!0,de(A);else{var oe=t(u);oe!==null&&me(R,oe.startTime-ue)}}function A(ue,oe){y=!1,_&&(_=!1,E(B),B=-1),g=!0;var ce=m;try{for(D(oe),h=t(l);h!==null&&(!(h.expirationTime>oe)||ue&&!q());){var te=h.callback;if(typeof te=="function"){h.callback=null,m=h.priorityLevel;var fe=te(h.expirationTime<=oe);oe=i.unstable_now(),typeof fe=="function"?h.callback=fe:h===t(l)&&r(l),D(oe)}else r(l);h=t(l)}if(h!==null)var ye=!0;else{var Se=t(u);Se!==null&&me(R,Se.startTime-oe),ye=!1}return ye}finally{h=null,m=ce,g=!1}}var L=!1,F=null,B=-1,M=5,k=-1;function q(){return!(i.unstable_now()-k<M)}function G(){if(F!==null){var ue=i.unstable_now();k=ue;var oe=!0;try{oe=F(!0,ue)}finally{oe?H():(L=!1,F=null)}}else L=!1}var H;if(typeof w=="function")H=function(){w(G)};else if(typeof MessageChannel<"u"){var re=new MessageChannel,se=re.port2;re.port1.onmessage=G,H=function(){se.postMessage(null)}}else H=function(){T(G,0)};function de(ue){F=ue,L||(L=!0,H())}function me(ue,oe){B=T(function(){ue(i.unstable_now())},oe)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(ue){ue.callback=null},i.unstable_continueExecution=function(){y||g||(y=!0,de(A))},i.unstable_forceFrameRate=function(ue){0>ue||125<ue?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):M=0<ue?Math.floor(1e3/ue):5},i.unstable_getCurrentPriorityLevel=function(){return m},i.unstable_getFirstCallbackNode=function(){return t(l)},i.unstable_next=function(ue){switch(m){case 1:case 2:case 3:var oe=3;break;default:oe=m}var ce=m;m=oe;try{return ue()}finally{m=ce}},i.unstable_pauseExecution=function(){},i.unstable_requestPaint=function(){},i.unstable_runWithPriority=function(ue,oe){switch(ue){case 1:case 2:case 3:case 4:case 5:break;default:ue=3}var ce=m;m=ue;try{return oe()}finally{m=ce}},i.unstable_scheduleCallback=function(ue,oe,ce){var te=i.unstable_now();switch(typeof ce=="object"&&ce!==null?(ce=ce.delay,ce=typeof ce=="number"&&0<ce?te+ce:te):ce=te,ue){case 1:var fe=-1;break;case 2:fe=250;break;case 5:fe=1073741823;break;case 4:fe=1e4;break;default:fe=5e3}return fe=ce+fe,ue={id:c++,callback:oe,priorityLevel:ue,startTime:ce,expirationTime:fe,sortIndex:-1},ce>te?(ue.sortIndex=ce,e(u,ue),t(l)===null&&ue===t(u)&&(_?(E(B),B=-1):_=!0,me(R,ce-te))):(ue.sortIndex=fe,e(l,ue),y||g||(y=!0,de(A))),ue},i.unstable_shouldYield=q,i.unstable_wrapCallback=function(ue){var oe=m;return function(){var ce=m;m=oe;try{return ue.apply(this,arguments)}finally{m=ce}}}})(Nb)),Nb}var oI;function H7(){return oI||(oI=1,Bb.exports=z7()),Bb.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var lI;function V7(){if(lI)return _a;lI=1;var i=DE(),e=H7();function t(d){for(var p="https://reactjs.org/docs/error-decoder.html?invariant="+d,S=1;S<arguments.length;S++)p+="&args[]="+encodeURIComponent(arguments[S]);return"Minified React error #"+d+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,n={};function s(d,p){a(d,p),a(d+"Capture",p)}function a(d,p){for(n[d]=p,d=0;d<p.length;d++)r.add(p[d])}var o=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),l=Object.prototype.hasOwnProperty,u=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,c={},h={};function m(d){return l.call(h,d)?!0:l.call(c,d)?!1:u.test(d)?h[d]=!0:(c[d]=!0,!1)}function g(d,p,S,P){if(S!==null&&S.type===0)return!1;switch(typeof p){case"function":case"symbol":return!0;case"boolean":return P?!1:S!==null?!S.acceptsBooleans:(d=d.toLowerCase().slice(0,5),d!=="data-"&&d!=="aria-");default:return!1}}function y(d,p,S,P){if(p===null||typeof p>"u"||g(d,p,S,P))return!0;if(P)return!1;if(S!==null)switch(S.type){case 3:return!p;case 4:return p===!1;case 5:return isNaN(p);case 6:return isNaN(p)||1>p}return!1}function _(d,p,S,P,N,K,ae){this.acceptsBooleans=p===2||p===3||p===4,this.attributeName=P,this.attributeNamespace=N,this.mustUseProperty=S,this.propertyName=d,this.type=p,this.sanitizeURL=K,this.removeEmptyString=ae}var T={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(d){T[d]=new _(d,0,!1,d,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(d){var p=d[0];T[p]=new _(p,1,!1,d[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(d){T[d]=new _(d,2,!1,d.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(d){T[d]=new _(d,2,!1,d,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(d){T[d]=new _(d,3,!1,d.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(d){T[d]=new _(d,3,!0,d,null,!1,!1)}),["capture","download"].forEach(function(d){T[d]=new _(d,4,!1,d,null,!1,!1)}),["cols","rows","size","span"].forEach(function(d){T[d]=new _(d,6,!1,d,null,!1,!1)}),["rowSpan","start"].forEach(function(d){T[d]=new _(d,5,!1,d.toLowerCase(),null,!1,!1)});var E=/[\-:]([a-z])/g;function w(d){return d[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(d){var p=d.replace(E,w);T[p]=new _(p,1,!1,d,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(d){var p=d.replace(E,w);T[p]=new _(p,1,!1,d,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(d){var p=d.replace(E,w);T[p]=new _(p,1,!1,d,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(d){T[d]=new _(d,1,!1,d.toLowerCase(),null,!1,!1)}),T.xlinkHref=new _("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(d){T[d]=new _(d,1,!1,d.toLowerCase(),null,!0,!0)});function D(d,p,S,P){var N=T.hasOwnProperty(p)?T[p]:null;(N!==null?N.type!==0:P||!(2<p.length)||p[0]!=="o"&&p[0]!=="O"||p[1]!=="n"&&p[1]!=="N")&&(y(p,S,N,P)&&(S=null),P||N===null?m(p)&&(S===null?d.removeAttribute(p):d.setAttribute(p,""+S)):N.mustUseProperty?d[N.propertyName]=S===null?N.type===3?!1:"":S:(p=N.attributeName,P=N.attributeNamespace,S===null?d.removeAttribute(p):(N=N.type,S=N===3||N===4&&S===!0?"":""+S,P?d.setAttributeNS(P,p,S):d.setAttribute(p,S))))}var R=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,A=Symbol.for("react.element"),L=Symbol.for("react.portal"),F=Symbol.for("react.fragment"),B=Symbol.for("react.strict_mode"),M=Symbol.for("react.profiler"),k=Symbol.for("react.provider"),q=Symbol.for("react.context"),G=Symbol.for("react.forward_ref"),H=Symbol.for("react.suspense"),re=Symbol.for("react.suspense_list"),se=Symbol.for("react.memo"),de=Symbol.for("react.lazy"),me=Symbol.for("react.offscreen"),ue=Symbol.iterator;function oe(d){return d===null||typeof d!="object"?null:(d=ue&&d[ue]||d["@@iterator"],typeof d=="function"?d:null)}var ce=Object.assign,te;function fe(d){if(te===void 0)try{throw Error()}catch(S){var p=S.stack.trim().match(/\n( *(at )?)/);te=p&&p[1]||""}return`
`+te+d}var ye=!1;function Se(d,p){if(!d||ye)return"";ye=!0;var S=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(p)if(p=function(){throw Error()},Object.defineProperty(p.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(p,[])}catch(Ke){var P=Ke}Reflect.construct(d,[],p)}else{try{p.call()}catch(Ke){P=Ke}d.call(p.prototype)}else{try{throw Error()}catch(Ke){P=Ke}d()}}catch(Ke){if(Ke&&P&&typeof Ke.stack=="string"){for(var N=Ke.stack.split(`
`),K=P.stack.split(`
`),ae=N.length-1,Te=K.length-1;1<=ae&&0<=Te&&N[ae]!==K[Te];)Te--;for(;1<=ae&&0<=Te;ae--,Te--)if(N[ae]!==K[Te]){if(ae!==1||Te!==1)do if(ae--,Te--,0>Te||N[ae]!==K[Te]){var Ie=`
`+N[ae].replace(" at new "," at ");return d.displayName&&Ie.includes("<anonymous>")&&(Ie=Ie.replace("<anonymous>",d.displayName)),Ie}while(1<=ae&&0<=Te);break}}}finally{ye=!1,Error.prepareStackTrace=S}return(d=d?d.displayName||d.name:"")?fe(d):""}function ke(d){switch(d.tag){case 5:return fe(d.type);case 16:return fe("Lazy");case 13:return fe("Suspense");case 19:return fe("SuspenseList");case 0:case 2:case 15:return d=Se(d.type,!1),d;case 11:return d=Se(d.type.render,!1),d;case 1:return d=Se(d.type,!0),d;default:return""}}function qe(d){if(d==null)return null;if(typeof d=="function")return d.displayName||d.name||null;if(typeof d=="string")return d;switch(d){case F:return"Fragment";case L:return"Portal";case M:return"Profiler";case B:return"StrictMode";case H:return"Suspense";case re:return"SuspenseList"}if(typeof d=="object")switch(d.$$typeof){case q:return(d.displayName||"Context")+".Consumer";case k:return(d._context.displayName||"Context")+".Provider";case G:var p=d.render;return d=d.displayName,d||(d=p.displayName||p.name||"",d=d!==""?"ForwardRef("+d+")":"ForwardRef"),d;case se:return p=d.displayName||null,p!==null?p:qe(d.type)||"Memo";case de:p=d._payload,d=d._init;try{return qe(d(p))}catch{}}return null}function vt(d){var p=d.type;switch(d.tag){case 24:return"Cache";case 9:return(p.displayName||"Context")+".Consumer";case 10:return(p._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return d=p.render,d=d.displayName||d.name||"",p.displayName||(d!==""?"ForwardRef("+d+")":"ForwardRef");case 7:return"Fragment";case 5:return p;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return qe(p);case 8:return p===B?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof p=="function")return p.displayName||p.name||null;if(typeof p=="string")return p}return null}function et(d){switch(typeof d){case"boolean":case"number":case"string":case"undefined":return d;case"object":return d;default:return""}}function kt(d){var p=d.type;return(d=d.nodeName)&&d.toLowerCase()==="input"&&(p==="checkbox"||p==="radio")}function pt(d){var p=kt(d)?"checked":"value",S=Object.getOwnPropertyDescriptor(d.constructor.prototype,p),P=""+d[p];if(!d.hasOwnProperty(p)&&typeof S<"u"&&typeof S.get=="function"&&typeof S.set=="function"){var N=S.get,K=S.set;return Object.defineProperty(d,p,{configurable:!0,get:function(){return N.call(this)},set:function(ae){P=""+ae,K.call(this,ae)}}),Object.defineProperty(d,p,{enumerable:S.enumerable}),{getValue:function(){return P},setValue:function(ae){P=""+ae},stopTracking:function(){d._valueTracker=null,delete d[p]}}}}function Ut(d){d._valueTracker||(d._valueTracker=pt(d))}function Vt(d){if(!d)return!1;var p=d._valueTracker;if(!p)return!0;var S=p.getValue(),P="";return d&&(P=kt(d)?d.checked?"true":"false":d.value),d=P,d!==S?(p.setValue(d),!0):!1}function Xe(d){if(d=d||(typeof document<"u"?document:void 0),typeof d>"u")return null;try{return d.activeElement||d.body}catch{return d.body}}function Ue(d,p){var S=p.checked;return ce({},p,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:S??d._wrapperState.initialChecked})}function Le(d,p){var S=p.defaultValue==null?"":p.defaultValue,P=p.checked!=null?p.checked:p.defaultChecked;S=et(p.value!=null?p.value:S),d._wrapperState={initialChecked:P,initialValue:S,controlled:p.type==="checkbox"||p.type==="radio"?p.checked!=null:p.value!=null}}function Ne(d,p){p=p.checked,p!=null&&D(d,"checked",p,!1)}function rt(d,p){Ne(d,p);var S=et(p.value),P=p.type;if(S!=null)P==="number"?(S===0&&d.value===""||d.value!=S)&&(d.value=""+S):d.value!==""+S&&(d.value=""+S);else if(P==="submit"||P==="reset"){d.removeAttribute("value");return}p.hasOwnProperty("value")?dt(d,p.type,S):p.hasOwnProperty("defaultValue")&&dt(d,p.type,et(p.defaultValue)),p.checked==null&&p.defaultChecked!=null&&(d.defaultChecked=!!p.defaultChecked)}function lt(d,p,S){if(p.hasOwnProperty("value")||p.hasOwnProperty("defaultValue")){var P=p.type;if(!(P!=="submit"&&P!=="reset"||p.value!==void 0&&p.value!==null))return;p=""+d._wrapperState.initialValue,S||p===d.value||(d.value=p),d.defaultValue=p}S=d.name,S!==""&&(d.name=""),d.defaultChecked=!!d._wrapperState.initialChecked,S!==""&&(d.name=S)}function dt(d,p,S){(p!=="number"||Xe(d.ownerDocument)!==d)&&(S==null?d.defaultValue=""+d._wrapperState.initialValue:d.defaultValue!==""+S&&(d.defaultValue=""+S))}var ut=Array.isArray;function At(d,p,S,P){if(d=d.options,p){p={};for(var N=0;N<S.length;N++)p["$"+S[N]]=!0;for(S=0;S<d.length;S++)N=p.hasOwnProperty("$"+d[S].value),d[S].selected!==N&&(d[S].selected=N),N&&P&&(d[S].defaultSelected=!0)}else{for(S=""+et(S),p=null,N=0;N<d.length;N++){if(d[N].value===S){d[N].selected=!0,P&&(d[N].defaultSelected=!0);return}p!==null||d[N].disabled||(p=d[N])}p!==null&&(p.selected=!0)}}function it(d,p){if(p.dangerouslySetInnerHTML!=null)throw Error(t(91));return ce({},p,{value:void 0,defaultValue:void 0,children:""+d._wrapperState.initialValue})}function Sr(d,p){var S=p.value;if(S==null){if(S=p.children,p=p.defaultValue,S!=null){if(p!=null)throw Error(t(92));if(ut(S)){if(1<S.length)throw Error(t(93));S=S[0]}p=S}p==null&&(p=""),S=p}d._wrapperState={initialValue:et(S)}}function xr(d,p){var S=et(p.value),P=et(p.defaultValue);S!=null&&(S=""+S,S!==d.value&&(d.value=S),p.defaultValue==null&&d.defaultValue!==S&&(d.defaultValue=S)),P!=null&&(d.defaultValue=""+P)}function zr(d){var p=d.textContent;p===d._wrapperState.initialValue&&p!==""&&p!==null&&(d.value=p)}function cr(d){switch(d){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Gt(d,p){return d==null||d==="http://www.w3.org/1999/xhtml"?cr(p):d==="http://www.w3.org/2000/svg"&&p==="foreignObject"?"http://www.w3.org/1999/xhtml":d}var Er,Ir=(function(d){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(p,S,P,N){MSApp.execUnsafeLocalFunction(function(){return d(p,S,P,N)})}:d})(function(d,p){if(d.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in d)d.innerHTML=p;else{for(Er=Er||document.createElement("div"),Er.innerHTML="<svg>"+p.valueOf().toString()+"</svg>",p=Er.firstChild;d.firstChild;)d.removeChild(d.firstChild);for(;p.firstChild;)d.appendChild(p.firstChild)}});function Hr(d,p){if(p){var S=d.firstChild;if(S&&S===d.lastChild&&S.nodeType===3){S.nodeValue=p;return}}d.textContent=p}var It={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},$t=["Webkit","ms","Moz","O"];Object.keys(It).forEach(function(d){$t.forEach(function(p){p=p+d.charAt(0).toUpperCase()+d.substring(1),It[p]=It[d]})});function Bi(d,p,S){return p==null||typeof p=="boolean"||p===""?"":S||typeof p!="number"||p===0||It.hasOwnProperty(d)&&It[d]?(""+p).trim():p+"px"}function zt(d,p){d=d.style;for(var S in p)if(p.hasOwnProperty(S)){var P=S.indexOf("--")===0,N=Bi(S,p[S],P);S==="float"&&(S="cssFloat"),P?d.setProperty(S,N):d[S]=N}}var Dr=ce({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function $r(d,p){if(p){if(Dr[d]&&(p.children!=null||p.dangerouslySetInnerHTML!=null))throw Error(t(137,d));if(p.dangerouslySetInnerHTML!=null){if(p.children!=null)throw Error(t(60));if(typeof p.dangerouslySetInnerHTML!="object"||!("__html"in p.dangerouslySetInnerHTML))throw Error(t(61))}if(p.style!=null&&typeof p.style!="object")throw Error(t(62))}}function Jr(d,p){if(d.indexOf("-")===-1)return typeof p.is=="string";switch(d){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ni=null;function sn(d){return d=d.target||d.srcElement||window,d.correspondingUseElement&&(d=d.correspondingUseElement),d.nodeType===3?d.parentNode:d}var Ui=null,Wi=null,ne=null;function he(d){if(d=cn(d)){if(typeof Ui!="function")throw Error(t(280));var p=d.stateNode;p&&(p=Fl(p),Ui(d.stateNode,d.type,p))}}function Ce(d){Wi?ne?ne.push(d):ne=[d]:Wi=d}function ze(){if(Wi){var d=Wi,p=ne;if(ne=Wi=null,he(d),p)for(d=0;d<p.length;d++)he(p[d])}}function yt(d,p){return d(p)}function ir(){}var xe=!1;function Pe(d,p,S){if(xe)return d(p,S);xe=!0;try{return yt(d,p,S)}finally{xe=!1,(Wi!==null||ne!==null)&&(ir(),ze())}}function Be(d,p){var S=d.stateNode;if(S===null)return null;var P=Fl(S);if(P===null)return null;S=P[p];e:switch(p){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(P=!P.disabled)||(d=d.type,P=!(d==="button"||d==="input"||d==="select"||d==="textarea")),d=!P;break e;default:d=!1}if(d)return null;if(S&&typeof S!="function")throw Error(t(231,p,typeof S));return S}var nt=!1;if(o)try{var ct={};Object.defineProperty(ct,"passive",{get:function(){nt=!0}}),window.addEventListener("test",ct,ct),window.removeEventListener("test",ct,ct)}catch{nt=!1}function Rt(d,p,S,P,N,K,ae,Te,Ie){var Ke=Array.prototype.slice.call(arguments,3);try{p.apply(S,Ke)}catch(St){this.onError(St)}}var Ot=!1,st=null,_t=!1,jt=null,Kt={onError:function(d){Ot=!0,st=d}};function Pt(d,p,S,P,N,K,ae,Te,Ie){Ot=!1,st=null,Rt.apply(Kt,arguments)}function sr(d,p,S,P,N,K,ae,Te,Ie){if(Pt.apply(this,arguments),Ot){if(Ot){var Ke=st;Ot=!1,st=null}else throw Error(t(198));_t||(_t=!0,jt=Ke)}}function mt(d){var p=d,S=d;if(d.alternate)for(;p.return;)p=p.return;else{d=p;do p=d,(p.flags&4098)!==0&&(S=p.return),d=p.return;while(d)}return p.tag===3?S:null}function dr(d){if(d.tag===13){var p=d.memoizedState;if(p===null&&(d=d.alternate,d!==null&&(p=d.memoizedState)),p!==null)return p.dehydrated}return null}function Vr(d){if(mt(d)!==d)throw Error(t(188))}function wr(d){var p=d.alternate;if(!p){if(p=mt(d),p===null)throw Error(t(188));return p!==d?null:d}for(var S=d,P=p;;){var N=S.return;if(N===null)break;var K=N.alternate;if(K===null){if(P=N.return,P!==null){S=P;continue}break}if(N.child===K.child){for(K=N.child;K;){if(K===S)return Vr(N),d;if(K===P)return Vr(N),p;K=K.sibling}throw Error(t(188))}if(S.return!==P.return)S=N,P=K;else{for(var ae=!1,Te=N.child;Te;){if(Te===S){ae=!0,S=N,P=K;break}if(Te===P){ae=!0,P=N,S=K;break}Te=Te.sibling}if(!ae){for(Te=K.child;Te;){if(Te===S){ae=!0,S=K,P=N;break}if(Te===P){ae=!0,P=K,S=N;break}Te=Te.sibling}if(!ae)throw Error(t(189))}}if(S.alternate!==P)throw Error(t(190))}if(S.tag!==3)throw Error(t(188));return S.stateNode.current===S?d:p}function Pr(d){return d=wr(d),d!==null?Ti(d):null}function Ti(d){if(d.tag===5||d.tag===6)return d;for(d=d.child;d!==null;){var p=Ti(d);if(p!==null)return p;d=d.sibling}return null}var Qt=e.unstable_scheduleCallback,vn=e.unstable_cancelCallback,ui=e.unstable_shouldYield,gs=e.unstable_requestPaint,Xr=e.unstable_now,vs=e.unstable_getCurrentPriorityLevel,an=e.unstable_ImmediatePriority,Ji=e.unstable_UserBlockingPriority,Cr=e.unstable_NormalPriority,we=e.unstable_LowPriority,Fe=e.unstable_IdlePriority,Ge=null,Ye=null;function ot(d){if(Ye&&typeof Ye.onCommitFiberRoot=="function")try{Ye.onCommitFiberRoot(Ge,d,void 0,(d.current.flags&128)===128)}catch{}}var Tt=Math.clz32?Math.clz32:Mr,Dt=Math.log,mr=Math.LN2;function Mr(d){return d>>>=0,d===0?32:31-(Dt(d)/mr|0)|0}var ci=64,yr=4194304;function on(d){switch(d&-d){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return d&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return d&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return d}}function Rr(d,p){var S=d.pendingLanes;if(S===0)return 0;var P=0,N=d.suspendedLanes,K=d.pingedLanes,ae=S&268435455;if(ae!==0){var Te=ae&~N;Te!==0?P=on(Te):(K&=ae,K!==0&&(P=on(K)))}else ae=S&~N,ae!==0?P=on(ae):K!==0&&(P=on(K));if(P===0)return 0;if(p!==0&&p!==P&&(p&N)===0&&(N=P&-P,K=p&-p,N>=K||N===16&&(K&4194240)!==0))return p;if((P&4)!==0&&(P|=S&16),p=d.entangledLanes,p!==0)for(d=d.entanglements,p&=P;0<p;)S=31-Tt(p),N=1<<S,P|=d[S],p&=~N;return P}function Ci(d,p){switch(d){case 1:case 2:case 4:return p+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return p+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Pi(d,p){for(var S=d.suspendedLanes,P=d.pingedLanes,N=d.expirationTimes,K=d.pendingLanes;0<K;){var ae=31-Tt(K),Te=1<<ae,Ie=N[ae];Ie===-1?((Te&S)===0||(Te&P)!==0)&&(N[ae]=Ci(Te,p)):Ie<=p&&(d.expiredLanes|=Te),K&=~Te}}function ys(d){return d=d.pendingLanes&-1073741825,d!==0?d:d&1073741824?1073741824:0}function pc(){var d=ci;return ci<<=1,(ci&4194240)===0&&(ci=64),d}function _s(d){for(var p=[],S=0;31>S;S++)p.push(d);return p}function Mn(d,p,S){d.pendingLanes|=p,p!==536870912&&(d.suspendedLanes=0,d.pingedLanes=0),d=d.eventTimes,p=31-Tt(p),d[p]=S}function bi(d,p){var S=d.pendingLanes&~p;d.pendingLanes=p,d.suspendedLanes=0,d.pingedLanes=0,d.expiredLanes&=p,d.mutableReadLanes&=p,d.entangledLanes&=p,p=d.entanglements;var P=d.eventTimes;for(d=d.expirationTimes;0<S;){var N=31-Tt(S),K=1<<N;p[N]=0,P[N]=-1,d[N]=-1,S&=~K}}function Tu(d,p){var S=d.entangledLanes|=p;for(d=d.entanglements;S;){var P=31-Tt(S),N=1<<P;N&p|d[P]&p&&(d[P]|=p),S&=~N}}var Fr=0;function es(d){return d&=-d,1<d?4<d?(d&268435455)!==0?16:536870912:4:1}var na,En,Oa,Tl,lo,bu=!1,bl=[],sa=null,yn=null,wn=null,aa=new Map,Ma=new Map,oa=[],Sl="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function mc(d,p){switch(d){case"focusin":case"focusout":sa=null;break;case"dragenter":case"dragleave":yn=null;break;case"mouseover":case"mouseout":wn=null;break;case"pointerover":case"pointerout":aa.delete(p.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ma.delete(p.pointerId)}}function Fn(d,p,S,P,N,K){return d===null||d.nativeEvent!==K?(d={blockedOn:p,domEventName:S,eventSystemFlags:P,nativeEvent:K,targetContainers:[N]},p!==null&&(p=cn(p),p!==null&&En(p)),d):(d.eventSystemFlags|=P,p=d.targetContainers,N!==null&&p.indexOf(N)===-1&&p.push(N),d)}function Fa(d,p,S,P,N){switch(p){case"focusin":return sa=Fn(sa,d,p,S,P,N),!0;case"dragenter":return yn=Fn(yn,d,p,S,P,N),!0;case"mouseover":return wn=Fn(wn,d,p,S,P,N),!0;case"pointerover":var K=N.pointerId;return aa.set(K,Fn(aa.get(K)||null,d,p,S,P,N)),!0;case"gotpointercapture":return K=N.pointerId,Ma.set(K,Fn(Ma.get(K)||null,d,p,S,P,N)),!0}return!1}function Cl(d){var p=si(d.target);if(p!==null){var S=mt(p);if(S!==null){if(p=S.tag,p===13){if(p=dr(S),p!==null){d.blockedOn=p,lo(d.priority,function(){Oa(S)});return}}else if(p===3&&S.stateNode.current.memoizedState.isDehydrated){d.blockedOn=S.tag===3?S.stateNode.containerInfo:null;return}}}d.blockedOn=null}function El(d){if(d.blockedOn!==null)return!1;for(var p=d.targetContainers;0<p.length;){var S=Cu(d.domEventName,d.eventSystemFlags,p[0],d.nativeEvent);if(S===null){S=d.nativeEvent;var P=new S.constructor(S.type,S);Ni=P,S.target.dispatchEvent(P),Ni=null}else return p=cn(S),p!==null&&En(p),d.blockedOn=S,!1;p.shift()}return!0}function jo(d,p,S){El(d)&&S.delete(p)}function Ba(){bu=!1,sa!==null&&El(sa)&&(sa=null),yn!==null&&El(yn)&&(yn=null),wn!==null&&El(wn)&&(wn=null),aa.forEach(jo),Ma.forEach(jo)}function xs(d,p){d.blockedOn===p&&(d.blockedOn=null,bu||(bu=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Ba)))}function ts(d){function p(N){return xs(N,d)}if(0<bl.length){xs(bl[0],d);for(var S=1;S<bl.length;S++){var P=bl[S];P.blockedOn===d&&(P.blockedOn=null)}}for(sa!==null&&xs(sa,d),yn!==null&&xs(yn,d),wn!==null&&xs(wn,d),aa.forEach(p),Ma.forEach(p),S=0;S<oa.length;S++)P=oa[S],P.blockedOn===d&&(P.blockedOn=null);for(;0<oa.length&&(S=oa[0],S.blockedOn===null);)Cl(S),S.blockedOn===null&&oa.shift()}var la=R.ReactCurrentBatchConfig,zo=!0;function gc(d,p,S,P){var N=Fr,K=la.transition;la.transition=null;try{Fr=1,Su(d,p,S,P)}finally{Fr=N,la.transition=K}}function vc(d,p,S,P){var N=Fr,K=la.transition;la.transition=null;try{Fr=4,Su(d,p,S,P)}finally{Fr=N,la.transition=K}}function Su(d,p,S,P){if(zo){var N=Cu(d,p,S,P);if(N===null)Oi(d,p,P,wl,S),mc(d,P);else if(Fa(N,d,p,S,P))P.stopPropagation();else if(mc(d,P),p&4&&-1<Sl.indexOf(d)){for(;N!==null;){var K=cn(N);if(K!==null&&na(K),K=Cu(d,p,S,P),K===null&&Oi(d,p,P,wl,S),K===N)break;N=K}N!==null&&P.stopPropagation()}else Oi(d,p,P,null,S)}}var wl=null;function Cu(d,p,S,P){if(wl=null,d=sn(P),d=si(d),d!==null)if(p=mt(d),p===null)d=null;else if(S=p.tag,S===13){if(d=dr(p),d!==null)return d;d=null}else if(S===3){if(p.stateNode.current.memoizedState.isDehydrated)return p.tag===3?p.stateNode.containerInfo:null;d=null}else p!==d&&(d=null);return wl=d,null}function Fs(d){switch(d){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(vs()){case an:return 1;case Ji:return 4;case Cr:case we:return 16;case Fe:return 536870912;default:return 16}default:return 16}}var ua=null,rs=null,Ts=null;function yc(){if(Ts)return Ts;var d,p=rs,S=p.length,P,N="value"in ua?ua.value:ua.textContent,K=N.length;for(d=0;d<S&&p[d]===N[d];d++);var ae=S-d;for(P=1;P<=ae&&p[S-P]===N[K-P];P++);return Ts=N.slice(d,1<P?1-P:void 0)}function ti(d){var p=d.keyCode;return"charCode"in d?(d=d.charCode,d===0&&p===13&&(d=13)):d=p,d===10&&(d=13),32<=d||d===13?d:0}function kl(){return!0}function _c(){return!1}function kn(d){function p(S,P,N,K,ae){this._reactName=S,this._targetInst=N,this.type=P,this.nativeEvent=K,this.target=ae,this.currentTarget=null;for(var Te in d)d.hasOwnProperty(Te)&&(S=d[Te],this[Te]=S?S(K):K[Te]);return this.isDefaultPrevented=(K.defaultPrevented!=null?K.defaultPrevented:K.returnValue===!1)?kl:_c,this.isPropagationStopped=_c,this}return ce(p.prototype,{preventDefault:function(){this.defaultPrevented=!0;var S=this.nativeEvent;S&&(S.preventDefault?S.preventDefault():typeof S.returnValue!="unknown"&&(S.returnValue=!1),this.isDefaultPrevented=kl)},stopPropagation:function(){var S=this.nativeEvent;S&&(S.stopPropagation?S.stopPropagation():typeof S.cancelBubble!="unknown"&&(S.cancelBubble=!0),this.isPropagationStopped=kl)},persist:function(){},isPersistent:kl}),p}var An={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(d){return d.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},is=kn(An),_n=ce({},An,{view:0,detail:0}),Na=kn(_n),gi,Li,Bn,Ua=ce({},_n,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Al,button:0,buttons:0,relatedTarget:function(d){return d.relatedTarget===void 0?d.fromElement===d.srcElement?d.toElement:d.fromElement:d.relatedTarget},movementX:function(d){return"movementX"in d?d.movementX:(d!==Bn&&(Bn&&d.type==="mousemove"?(gi=d.screenX-Bn.screenX,Li=d.screenY-Bn.screenY):Li=gi=0,Bn=d),gi)},movementY:function(d){return"movementY"in d?d.movementY:Li}}),uo=kn(Ua),Ho=ce({},Ua,{dataTransfer:0}),xd=kn(Ho),Td=ce({},_n,{relatedTarget:0}),Vo=kn(Td),Eu=ce({},An,{animationName:0,elapsedTime:0,pseudoElement:0}),$a=kn(Eu),Bs=ce({},An,{clipboardData:function(d){return"clipboardData"in d?d.clipboardData:window.clipboardData}}),ja=kn(Bs),In=ce({},An,{data:0}),xc=kn(In),co={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},za={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},wu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Tc(d){var p=this.nativeEvent;return p.getModifierState?p.getModifierState(d):(d=wu[d])?!!p[d]:!1}function Al(){return Tc}var bc=ce({},_n,{key:function(d){if(d.key){var p=co[d.key]||d.key;if(p!=="Unidentified")return p}return d.type==="keypress"?(d=ti(d),d===13?"Enter":String.fromCharCode(d)):d.type==="keydown"||d.type==="keyup"?za[d.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Al,charCode:function(d){return d.type==="keypress"?ti(d):0},keyCode:function(d){return d.type==="keydown"||d.type==="keyup"?d.keyCode:0},which:function(d){return d.type==="keypress"?ti(d):d.type==="keydown"||d.type==="keyup"?d.keyCode:0}}),ca=kn(bc),Sc=ce({},Ua,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ho=kn(Sc),Cc=ce({},_n,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Al}),Ec=kn(Cc),fo=ce({},An,{propertyName:0,elapsedTime:0,pseudoElement:0}),po=kn(fo),bd=ce({},Ua,{deltaX:function(d){return"deltaX"in d?d.deltaX:"wheelDeltaX"in d?-d.wheelDeltaX:0},deltaY:function(d){return"deltaY"in d?d.deltaY:"wheelDeltaY"in d?-d.wheelDeltaY:"wheelDelta"in d?-d.wheelDelta:0},deltaZ:0,deltaMode:0}),Sd=kn(bd),Cd=[9,13,27,32],qo=o&&"CompositionEvent"in window,Wo=null;o&&"documentMode"in document&&(Wo=document.documentMode);var ku=o&&"TextEvent"in window&&!Wo,Il=o&&(!qo||Wo&&8<Wo&&11>=Wo),wc=" ",Ns=!1;function Yr(d,p){switch(d){case"keyup":return Cd.indexOf(p.keyCode)!==-1;case"keydown":return p.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function bs(d){return d=d.detail,typeof d=="object"&&"data"in d?d.data:null}var ri=!1;function Nn(d,p){switch(d){case"compositionend":return bs(p);case"keypress":return p.which!==32?null:(Ns=!0,wc);case"textInput":return d=p.data,d===wc&&Ns?null:d;default:return null}}function Ed(d,p){if(ri)return d==="compositionend"||!qo&&Yr(d,p)?(d=yc(),Ts=rs=ua=null,ri=!1,d):null;switch(d){case"paste":return null;case"keypress":if(!(p.ctrlKey||p.altKey||p.metaKey)||p.ctrlKey&&p.altKey){if(p.char&&1<p.char.length)return p.char;if(p.which)return String.fromCharCode(p.which)}return null;case"compositionend":return Il&&p.locale!=="ko"?null:p.data;default:return null}}var kc={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ss(d){var p=d&&d.nodeName&&d.nodeName.toLowerCase();return p==="input"?!!kc[d.type]:p==="textarea"}function Ac(d,p,S,P){Ce(P),p=Ol(p,"onChange"),0<p.length&&(S=new is("onChange","change",null,S,P),d.push({event:S,listeners:p}))}var Go=null,Ko=null;function Au(d){Uh(d,0)}function Dl(d){var p=yo(d);if(Vt(p))return d}function wd(d,p){if(d==="change")return p}var Iu=!1;if(o){var ie;if(o){var O="oninput"in document;if(!O){var $=document.createElement("div");$.setAttribute("oninput","return;"),O=typeof $.oninput=="function"}ie=O}else ie=!1;Iu=ie&&(!document.documentMode||9<document.documentMode)}function U(){Go&&(Go.detachEvent("onpropertychange",z),Ko=Go=null)}function z(d){if(d.propertyName==="value"&&Dl(Ko)){var p=[];Ac(p,Ko,d,sn(d)),Pe(Au,p)}}function J(d,p,S){d==="focusin"?(U(),Go=p,Ko=S,Go.attachEvent("onpropertychange",z)):d==="focusout"&&U()}function Z(d){if(d==="selectionchange"||d==="keyup"||d==="keydown")return Dl(Ko)}function pe(d,p){if(d==="click")return Dl(p)}function ve(d,p){if(d==="input"||d==="change")return Dl(p)}function Ae(d,p){return d===p&&(d!==0||1/d===1/p)||d!==d&&p!==p}var be=typeof Object.is=="function"?Object.is:Ae;function De(d,p){if(be(d,p))return!0;if(typeof d!="object"||d===null||typeof p!="object"||p===null)return!1;var S=Object.keys(d),P=Object.keys(p);if(S.length!==P.length)return!1;for(P=0;P<S.length;P++){var N=S[P];if(!l.call(p,N)||!be(d[N],p[N]))return!1}return!0}function Je(d){for(;d&&d.firstChild;)d=d.firstChild;return d}function Et(d,p){var S=Je(d);d=0;for(var P;S;){if(S.nodeType===3){if(P=d+S.textContent.length,d<=p&&P>=p)return{node:S,offset:p-d};d=P}e:{for(;S;){if(S.nextSibling){S=S.nextSibling;break e}S=S.parentNode}S=void 0}S=Je(S)}}function Mt(d,p){return d&&p?d===p?!0:d&&d.nodeType===3?!1:p&&p.nodeType===3?Mt(d,p.parentNode):"contains"in d?d.contains(p):d.compareDocumentPosition?!!(d.compareDocumentPosition(p)&16):!1:!1}function Qe(){for(var d=window,p=Xe();p instanceof d.HTMLIFrameElement;){try{var S=typeof p.contentWindow.location.href=="string"}catch{S=!1}if(S)d=p.contentWindow;else break;p=Xe(d.document)}return p}function Zt(d){var p=d&&d.nodeName&&d.nodeName.toLowerCase();return p&&(p==="input"&&(d.type==="text"||d.type==="search"||d.type==="tel"||d.type==="url"||d.type==="password")||p==="textarea"||d.contentEditable==="true")}function xi(d){var p=Qe(),S=d.focusedElem,P=d.selectionRange;if(p!==S&&S&&S.ownerDocument&&Mt(S.ownerDocument.documentElement,S)){if(P!==null&&Zt(S)){if(p=P.start,d=P.end,d===void 0&&(d=p),"selectionStart"in S)S.selectionStart=p,S.selectionEnd=Math.min(d,S.value.length);else if(d=(p=S.ownerDocument||document)&&p.defaultView||window,d.getSelection){d=d.getSelection();var N=S.textContent.length,K=Math.min(P.start,N);P=P.end===void 0?K:Math.min(P.end,N),!d.extend&&K>P&&(N=P,P=K,K=N),N=Et(S,K);var ae=Et(S,P);N&&ae&&(d.rangeCount!==1||d.anchorNode!==N.node||d.anchorOffset!==N.offset||d.focusNode!==ae.node||d.focusOffset!==ae.offset)&&(p=p.createRange(),p.setStart(N.node,N.offset),d.removeAllRanges(),K>P?(d.addRange(p),d.extend(ae.node,ae.offset)):(p.setEnd(ae.node,ae.offset),d.addRange(p)))}}for(p=[],d=S;d=d.parentNode;)d.nodeType===1&&p.push({element:d,left:d.scrollLeft,top:d.scrollTop});for(typeof S.focus=="function"&&S.focus(),S=0;S<p.length;S++)d=p[S],d.element.scrollLeft=d.left,d.element.scrollTop=d.top}}var ln=o&&"documentMode"in document&&11>=document.documentMode,Un=null,Xo=null,mo=null,go=!1;function Yo(d,p,S){var P=S.window===S?S.document:S.nodeType===9?S:S.ownerDocument;go||Un==null||Un!==Xe(P)||(P=Un,"selectionStart"in P&&Zt(P)?P={start:P.selectionStart,end:P.selectionEnd}:(P=(P.ownerDocument&&P.ownerDocument.defaultView||window).getSelection(),P={anchorNode:P.anchorNode,anchorOffset:P.anchorOffset,focusNode:P.focusNode,focusOffset:P.focusOffset}),mo&&De(mo,P)||(mo=P,P=Ol(Xo,"onSelect"),0<P.length&&(p=new is("onSelect","select",null,p,S),d.push({event:p,listeners:P}),p.target=Un)))}function da(d,p){var S={};return S[d.toLowerCase()]=p.toLowerCase(),S["Webkit"+d]="webkit"+p,S["Moz"+d]="moz"+p,S}var Us={animationend:da("Animation","AnimationEnd"),animationiteration:da("Animation","AnimationIteration"),animationstart:da("Animation","AnimationStart"),transitionend:da("Transition","TransitionEnd")},di={},Ha={};o&&(Ha=document.createElement("div").style,"AnimationEvent"in window||(delete Us.animationend.animation,delete Us.animationiteration.animation,delete Us.animationstart.animation),"TransitionEvent"in window||delete Us.transitionend.transition);function $n(d){if(di[d])return di[d];if(!Us[d])return d;var p=Us[d],S;for(S in p)if(p.hasOwnProperty(S)&&S in Ha)return di[d]=p[S];return d}var Pl=$n("animationend"),Bh=$n("animationiteration"),Rl=$n("animationstart"),Ll=$n("transitionend"),Ic=new Map,vo="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function jn(d,p){Ic.set(d,p),s(p,[d])}for(var kd=0;kd<vo.length;kd++){var Ad=vo[kd],Xp=Ad.toLowerCase(),Yp=Ad[0].toUpperCase()+Ad.slice(1);jn(Xp,"on"+Yp)}jn(Pl,"onAnimationEnd"),jn(Bh,"onAnimationIteration"),jn(Rl,"onAnimationStart"),jn("dblclick","onDoubleClick"),jn("focusin","onFocus"),jn("focusout","onBlur"),jn(Ll,"onTransitionEnd"),a("onMouseEnter",["mouseout","mouseover"]),a("onMouseLeave",["mouseout","mouseover"]),a("onPointerEnter",["pointerout","pointerover"]),a("onPointerLeave",["pointerout","pointerover"]),s("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),s("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),s("onBeforeInput",["compositionend","keypress","textInput","paste"]),s("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Du="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Pu=new Set("cancel close invalid load scroll toggle".split(" ").concat(Du));function Nh(d,p,S){var P=d.type||"unknown-event";d.currentTarget=S,sr(P,p,void 0,d),d.currentTarget=null}function Uh(d,p){p=(p&4)!==0;for(var S=0;S<d.length;S++){var P=d[S],N=P.event;P=P.listeners;e:{var K=void 0;if(p)for(var ae=P.length-1;0<=ae;ae--){var Te=P[ae],Ie=Te.instance,Ke=Te.currentTarget;if(Te=Te.listener,Ie!==K&&N.isPropagationStopped())break e;Nh(N,Te,Ke),K=Ie}else for(ae=0;ae<P.length;ae++){if(Te=P[ae],Ie=Te.instance,Ke=Te.currentTarget,Te=Te.listener,Ie!==K&&N.isPropagationStopped())break e;Nh(N,Te,Ke),K=Ie}}}if(_t)throw d=jt,_t=!1,jt=null,d}function hi(d,p){var S=p[gt];S===void 0&&(S=p[gt]=new Set);var P=d+"__bubble";S.has(P)||(ii(p,d,2,!1),S.add(P))}function ns(d,p,S){var P=0;p&&(P|=4),ii(S,d,P,p)}var er="_reactListening"+Math.random().toString(36).slice(2);function un(d){if(!d[er]){d[er]=!0,r.forEach(function(S){S!=="selectionchange"&&(Pu.has(S)||ns(S,!1,d),ns(S,!0,d))});var p=d.nodeType===9?d:d.ownerDocument;p===null||p[er]||(p[er]=!0,ns("selectionchange",!1,p))}}function ii(d,p,S,P){switch(Fs(p)){case 1:var N=gc;break;case 4:N=vc;break;default:N=Su}S=N.bind(null,p,S,d),N=void 0,!nt||p!=="touchstart"&&p!=="touchmove"&&p!=="wheel"||(N=!0),P?N!==void 0?d.addEventListener(p,S,{capture:!0,passive:N}):d.addEventListener(p,S,!0):N!==void 0?d.addEventListener(p,S,{passive:N}):d.addEventListener(p,S,!1)}function Oi(d,p,S,P,N){var K=P;if((p&1)===0&&(p&2)===0&&P!==null)e:for(;;){if(P===null)return;var ae=P.tag;if(ae===3||ae===4){var Te=P.stateNode.containerInfo;if(Te===N||Te.nodeType===8&&Te.parentNode===N)break;if(ae===4)for(ae=P.return;ae!==null;){var Ie=ae.tag;if((Ie===3||Ie===4)&&(Ie=ae.stateNode.containerInfo,Ie===N||Ie.nodeType===8&&Ie.parentNode===N))return;ae=ae.return}for(;Te!==null;){if(ae=si(Te),ae===null)return;if(Ie=ae.tag,Ie===5||Ie===6){P=K=ae;continue e}Te=Te.parentNode}}P=P.return}Pe(function(){var Ke=K,St=sn(S),wt=[];e:{var bt=Ic.get(d);if(bt!==void 0){var qt=is,tr=d;switch(d){case"keypress":if(ti(S)===0)break e;case"keydown":case"keyup":qt=ca;break;case"focusin":tr="focus",qt=Vo;break;case"focusout":tr="blur",qt=Vo;break;case"beforeblur":case"afterblur":qt=Vo;break;case"click":if(S.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":qt=uo;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":qt=xd;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":qt=Ec;break;case Pl:case Bh:case Rl:qt=$a;break;case Ll:qt=po;break;case"scroll":qt=Na;break;case"wheel":qt=Sd;break;case"copy":case"cut":case"paste":qt=ja;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":qt=ho}var rr=(p&4)!==0,dn=!rr&&d==="scroll",$e=rr?bt!==null?bt+"Capture":null:bt;rr=[];for(var Oe=Ke,Ve;Oe!==null;){Ve=Oe;var Lt=Ve.stateNode;if(Ve.tag===5&&Lt!==null&&(Ve=Lt,$e!==null&&(Lt=Be(Oe,$e),Lt!=null&&rr.push(Ru(Oe,Lt,Ve)))),dn)break;Oe=Oe.return}0<rr.length&&(bt=new qt(bt,tr,null,S,St),wt.push({event:bt,listeners:rr}))}}if((p&7)===0){e:{if(bt=d==="mouseover"||d==="pointerover",qt=d==="mouseout"||d==="pointerout",bt&&S!==Ni&&(tr=S.relatedTarget||S.fromElement)&&(si(tr)||tr[Ee]))break e;if((qt||bt)&&(bt=St.window===St?St:(bt=St.ownerDocument)?bt.defaultView||bt.parentWindow:window,qt?(tr=S.relatedTarget||S.toElement,qt=Ke,tr=tr?si(tr):null,tr!==null&&(dn=mt(tr),tr!==dn||tr.tag!==5&&tr.tag!==6)&&(tr=null)):(qt=null,tr=Ke),qt!==tr)){if(rr=uo,Lt="onMouseLeave",$e="onMouseEnter",Oe="mouse",(d==="pointerout"||d==="pointerover")&&(rr=ho,Lt="onPointerLeave",$e="onPointerEnter",Oe="pointer"),dn=qt==null?bt:yo(qt),Ve=tr==null?bt:yo(tr),bt=new rr(Lt,Oe+"leave",qt,S,St),bt.target=dn,bt.relatedTarget=Ve,Lt=null,si(St)===Ke&&(rr=new rr($e,Oe+"enter",tr,S,St),rr.target=Ve,rr.relatedTarget=dn,Lt=rr),dn=Lt,qt&&tr)t:{for(rr=qt,$e=tr,Oe=0,Ve=rr;Ve;Ve=Ml(Ve))Oe++;for(Ve=0,Lt=$e;Lt;Lt=Ml(Lt))Ve++;for(;0<Oe-Ve;)rr=Ml(rr),Oe--;for(;0<Ve-Oe;)$e=Ml($e),Ve--;for(;Oe--;){if(rr===$e||$e!==null&&rr===$e.alternate)break t;rr=Ml(rr),$e=Ml($e)}rr=null}else rr=null;qt!==null&&$h(wt,bt,qt,rr,!1),tr!==null&&dn!==null&&$h(wt,dn,tr,rr,!0)}}e:{if(bt=Ke?yo(Ke):window,qt=bt.nodeName&&bt.nodeName.toLowerCase(),qt==="select"||qt==="input"&&bt.type==="file")var nr=wd;else if(Ss(bt))if(Iu)nr=ve;else{nr=Z;var gr=J}else(qt=bt.nodeName)&&qt.toLowerCase()==="input"&&(bt.type==="checkbox"||bt.type==="radio")&&(nr=pe);if(nr&&(nr=nr(d,Ke))){Ac(wt,nr,S,St);break e}gr&&gr(d,bt,Ke),d==="focusout"&&(gr=bt._wrapperState)&&gr.controlled&&bt.type==="number"&&dt(bt,"number",bt.value)}switch(gr=Ke?yo(Ke):window,d){case"focusin":(Ss(gr)||gr.contentEditable==="true")&&(Un=gr,Xo=Ke,mo=null);break;case"focusout":mo=Xo=Un=null;break;case"mousedown":go=!0;break;case"contextmenu":case"mouseup":case"dragend":go=!1,Yo(wt,S,St);break;case"selectionchange":if(ln)break;case"keydown":case"keyup":Yo(wt,S,St)}var vr;if(qo)e:{switch(d){case"compositionstart":var br="onCompositionStart";break e;case"compositionend":br="onCompositionEnd";break e;case"compositionupdate":br="onCompositionUpdate";break e}br=void 0}else ri?Yr(d,S)&&(br="onCompositionEnd"):d==="keydown"&&S.keyCode===229&&(br="onCompositionStart");br&&(Il&&S.locale!=="ko"&&(ri||br!=="onCompositionStart"?br==="onCompositionEnd"&&ri&&(vr=yc()):(ua=St,rs="value"in ua?ua.value:ua.textContent,ri=!0)),gr=Ol(Ke,br),0<gr.length&&(br=new xc(br,d,null,S,St),wt.push({event:br,listeners:gr}),vr?br.data=vr:(vr=bs(S),vr!==null&&(br.data=vr)))),(vr=ku?Nn(d,S):Ed(d,S))&&(Ke=Ol(Ke,"onBeforeInput"),0<Ke.length&&(St=new xc("onBeforeInput","beforeinput",null,S,St),wt.push({event:St,listeners:Ke}),St.data=vr))}Uh(wt,p)})}function Ru(d,p,S){return{instance:d,listener:p,currentTarget:S}}function Ol(d,p){for(var S=p+"Capture",P=[];d!==null;){var N=d,K=N.stateNode;N.tag===5&&K!==null&&(N=K,K=Be(d,S),K!=null&&P.unshift(Ru(d,K,N)),K=Be(d,p),K!=null&&P.push(Ru(d,K,N))),d=d.return}return P}function Ml(d){if(d===null)return null;do d=d.return;while(d&&d.tag!==5);return d||null}function $h(d,p,S,P,N){for(var K=p._reactName,ae=[];S!==null&&S!==P;){var Te=S,Ie=Te.alternate,Ke=Te.stateNode;if(Ie!==null&&Ie===P)break;Te.tag===5&&Ke!==null&&(Te=Ke,N?(Ie=Be(S,K),Ie!=null&&ae.unshift(Ru(S,Ie,Te))):N||(Ie=Be(S,K),Ie!=null&&ae.push(Ru(S,Ie,Te)))),S=S.return}ae.length!==0&&d.push({event:p,listeners:ae})}var Qp=/\r\n?/g,Jp=/\u0000|\uFFFD/g;function jh(d){return(typeof d=="string"?d:""+d).replace(Qp,`
`).replace(Jp,"")}function Dc(d,p,S){if(p=jh(p),jh(d)!==p&&S)throw Error(t(425))}function Pc(){}var Lu=null,f=null;function v(d,p){return d==="textarea"||d==="noscript"||typeof p.children=="string"||typeof p.children=="number"||typeof p.dangerouslySetInnerHTML=="object"&&p.dangerouslySetInnerHTML!==null&&p.dangerouslySetInnerHTML.__html!=null}var b=typeof setTimeout=="function"?setTimeout:void 0,x=typeof clearTimeout=="function"?clearTimeout:void 0,C=typeof Promise=="function"?Promise:void 0,I=typeof queueMicrotask=="function"?queueMicrotask:typeof C<"u"?function(d){return C.resolve(null).then(d).catch(W)}:b;function W(d){setTimeout(function(){throw d})}function Y(d,p){var S=p,P=0;do{var N=S.nextSibling;if(d.removeChild(S),N&&N.nodeType===8)if(S=N.data,S==="/$"){if(P===0){d.removeChild(N),ts(p);return}P--}else S!=="$"&&S!=="$?"&&S!=="$!"||P++;S=N}while(S);ts(p)}function Q(d){for(;d!=null;d=d.nextSibling){var p=d.nodeType;if(p===1||p===3)break;if(p===8){if(p=d.data,p==="$"||p==="$!"||p==="$?")break;if(p==="/$")return null}}return d}function ee(d){d=d.previousSibling;for(var p=0;d;){if(d.nodeType===8){var S=d.data;if(S==="$"||S==="$!"||S==="$?"){if(p===0)return d;p--}else S==="/$"&&p++}d=d.previousSibling}return null}var le=Math.random().toString(36).slice(2),ge="__reactFiber$"+le,He="__reactProps$"+le,Ee="__reactContainer$"+le,gt="__reactEvents$"+le,Bt="__reactListeners$"+le,Br="__reactHandles$"+le;function si(d){var p=d[ge];if(p)return p;for(var S=d.parentNode;S;){if(p=S[Ee]||S[ge]){if(S=p.alternate,p.child!==null||S!==null&&S.child!==null)for(d=ee(d);d!==null;){if(S=d[ge])return S;d=ee(d)}return p}d=S,S=d.parentNode}return null}function cn(d){return d=d[ge]||d[Ee],!d||d.tag!==5&&d.tag!==6&&d.tag!==13&&d.tag!==3?null:d}function yo(d){if(d.tag===5||d.tag===6)return d.stateNode;throw Error(t(33))}function Fl(d){return d[He]||null}var Ou=[],ha=-1;function fa(d){return{current:d}}function Wt(d){0>ha||(d.current=Ou[ha],Ou[ha]=null,ha--)}function oi(d,p){ha++,Ou[ha]=d.current,d.current=p}var $i={},Cs=fa($i),pa=fa(!1),Id=$i;function zh(d,p){var S=d.type.contextTypes;if(!S)return $i;var P=d.stateNode;if(P&&P.__reactInternalMemoizedUnmaskedChildContext===p)return P.__reactInternalMemoizedMaskedChildContext;var N={},K;for(K in S)N[K]=p[K];return P&&(d=d.stateNode,d.__reactInternalMemoizedUnmaskedChildContext=p,d.__reactInternalMemoizedMaskedChildContext=N),N}function ma(d){return d=d.childContextTypes,d!=null}function gg(){Wt(pa),Wt(Cs)}function Ck(d,p,S){if(Cs.current!==$i)throw Error(t(168));oi(Cs,p),oi(pa,S)}function Ek(d,p,S){var P=d.stateNode;if(p=p.childContextTypes,typeof P.getChildContext!="function")return S;P=P.getChildContext();for(var N in P)if(!(N in p))throw Error(t(108,vt(d)||"Unknown",N));return ce({},S,P)}function vg(d){return d=(d=d.stateNode)&&d.__reactInternalMemoizedMergedChildContext||$i,Id=Cs.current,oi(Cs,d),oi(pa,pa.current),!0}function wk(d,p,S){var P=d.stateNode;if(!P)throw Error(t(169));S?(d=Ek(d,p,Id),P.__reactInternalMemoizedMergedChildContext=d,Wt(pa),Wt(Cs),oi(Cs,d)):Wt(pa),oi(pa,S)}var Mu=null,yg=!1,RT=!1;function kk(d){Mu===null?Mu=[d]:Mu.push(d)}function r7(d){yg=!0,kk(d)}function Rc(){if(!RT&&Mu!==null){RT=!0;var d=0,p=Fr;try{var S=Mu;for(Fr=1;d<S.length;d++){var P=S[d];do P=P(!0);while(P!==null)}Mu=null,yg=!1}catch(N){throw Mu!==null&&(Mu=Mu.slice(d+1)),Qt(an,Rc),N}finally{Fr=p,RT=!1}}return null}var Hh=[],Vh=0,_g=null,xg=0,_o=[],xo=0,Dd=null,Fu=1,Bu="";function Pd(d,p){Hh[Vh++]=xg,Hh[Vh++]=_g,_g=d,xg=p}function Ak(d,p,S){_o[xo++]=Fu,_o[xo++]=Bu,_o[xo++]=Dd,Dd=d;var P=Fu;d=Bu;var N=32-Tt(P)-1;P&=~(1<<N),S+=1;var K=32-Tt(p)+N;if(30<K){var ae=N-N%5;K=(P&(1<<ae)-1).toString(32),P>>=ae,N-=ae,Fu=1<<32-Tt(p)+N|S<<N|P,Bu=K+d}else Fu=1<<K|S<<N|P,Bu=d}function LT(d){d.return!==null&&(Pd(d,1),Ak(d,1,0))}function OT(d){for(;d===_g;)_g=Hh[--Vh],Hh[Vh]=null,xg=Hh[--Vh],Hh[Vh]=null;for(;d===Dd;)Dd=_o[--xo],_o[xo]=null,Bu=_o[--xo],_o[xo]=null,Fu=_o[--xo],_o[xo]=null}var Va=null,qa=null,ji=!1,Qo=null;function Ik(d,p){var S=Co(5,null,null,0);S.elementType="DELETED",S.stateNode=p,S.return=d,p=d.deletions,p===null?(d.deletions=[S],d.flags|=16):p.push(S)}function Dk(d,p){switch(d.tag){case 5:var S=d.type;return p=p.nodeType!==1||S.toLowerCase()!==p.nodeName.toLowerCase()?null:p,p!==null?(d.stateNode=p,Va=d,qa=Q(p.firstChild),!0):!1;case 6:return p=d.pendingProps===""||p.nodeType!==3?null:p,p!==null?(d.stateNode=p,Va=d,qa=null,!0):!1;case 13:return p=p.nodeType!==8?null:p,p!==null?(S=Dd!==null?{id:Fu,overflow:Bu}:null,d.memoizedState={dehydrated:p,treeContext:S,retryLane:1073741824},S=Co(18,null,null,0),S.stateNode=p,S.return=d,d.child=S,Va=d,qa=null,!0):!1;default:return!1}}function MT(d){return(d.mode&1)!==0&&(d.flags&128)===0}function FT(d){if(ji){var p=qa;if(p){var S=p;if(!Dk(d,p)){if(MT(d))throw Error(t(418));p=Q(S.nextSibling);var P=Va;p&&Dk(d,p)?Ik(P,S):(d.flags=d.flags&-4097|2,ji=!1,Va=d)}}else{if(MT(d))throw Error(t(418));d.flags=d.flags&-4097|2,ji=!1,Va=d}}}function Pk(d){for(d=d.return;d!==null&&d.tag!==5&&d.tag!==3&&d.tag!==13;)d=d.return;Va=d}function Tg(d){if(d!==Va)return!1;if(!ji)return Pk(d),ji=!0,!1;var p;if((p=d.tag!==3)&&!(p=d.tag!==5)&&(p=d.type,p=p!=="head"&&p!=="body"&&!v(d.type,d.memoizedProps)),p&&(p=qa)){if(MT(d))throw Rk(),Error(t(418));for(;p;)Ik(d,p),p=Q(p.nextSibling)}if(Pk(d),d.tag===13){if(d=d.memoizedState,d=d!==null?d.dehydrated:null,!d)throw Error(t(317));e:{for(d=d.nextSibling,p=0;d;){if(d.nodeType===8){var S=d.data;if(S==="/$"){if(p===0){qa=Q(d.nextSibling);break e}p--}else S!=="$"&&S!=="$!"&&S!=="$?"||p++}d=d.nextSibling}qa=null}}else qa=Va?Q(d.stateNode.nextSibling):null;return!0}function Rk(){for(var d=qa;d;)d=Q(d.nextSibling)}function qh(){qa=Va=null,ji=!1}function BT(d){Qo===null?Qo=[d]:Qo.push(d)}var i7=R.ReactCurrentBatchConfig;function Zp(d,p,S){if(d=S.ref,d!==null&&typeof d!="function"&&typeof d!="object"){if(S._owner){if(S=S._owner,S){if(S.tag!==1)throw Error(t(309));var P=S.stateNode}if(!P)throw Error(t(147,d));var N=P,K=""+d;return p!==null&&p.ref!==null&&typeof p.ref=="function"&&p.ref._stringRef===K?p.ref:(p=function(ae){var Te=N.refs;ae===null?delete Te[K]:Te[K]=ae},p._stringRef=K,p)}if(typeof d!="string")throw Error(t(284));if(!S._owner)throw Error(t(290,d))}return d}function bg(d,p){throw d=Object.prototype.toString.call(p),Error(t(31,d==="[object Object]"?"object with keys {"+Object.keys(p).join(", ")+"}":d))}function Lk(d){var p=d._init;return p(d._payload)}function Ok(d){function p($e,Oe){if(d){var Ve=$e.deletions;Ve===null?($e.deletions=[Oe],$e.flags|=16):Ve.push(Oe)}}function S($e,Oe){if(!d)return null;for(;Oe!==null;)p($e,Oe),Oe=Oe.sibling;return null}function P($e,Oe){for($e=new Map;Oe!==null;)Oe.key!==null?$e.set(Oe.key,Oe):$e.set(Oe.index,Oe),Oe=Oe.sibling;return $e}function N($e,Oe){return $e=$c($e,Oe),$e.index=0,$e.sibling=null,$e}function K($e,Oe,Ve){return $e.index=Ve,d?(Ve=$e.alternate,Ve!==null?(Ve=Ve.index,Ve<Oe?($e.flags|=2,Oe):Ve):($e.flags|=2,Oe)):($e.flags|=1048576,Oe)}function ae($e){return d&&$e.alternate===null&&($e.flags|=2),$e}function Te($e,Oe,Ve,Lt){return Oe===null||Oe.tag!==6?(Oe=Ab(Ve,$e.mode,Lt),Oe.return=$e,Oe):(Oe=N(Oe,Ve),Oe.return=$e,Oe)}function Ie($e,Oe,Ve,Lt){var nr=Ve.type;return nr===F?St($e,Oe,Ve.props.children,Lt,Ve.key):Oe!==null&&(Oe.elementType===nr||typeof nr=="object"&&nr!==null&&nr.$$typeof===de&&Lk(nr)===Oe.type)?(Lt=N(Oe,Ve.props),Lt.ref=Zp($e,Oe,Ve),Lt.return=$e,Lt):(Lt=Wg(Ve.type,Ve.key,Ve.props,null,$e.mode,Lt),Lt.ref=Zp($e,Oe,Ve),Lt.return=$e,Lt)}function Ke($e,Oe,Ve,Lt){return Oe===null||Oe.tag!==4||Oe.stateNode.containerInfo!==Ve.containerInfo||Oe.stateNode.implementation!==Ve.implementation?(Oe=Ib(Ve,$e.mode,Lt),Oe.return=$e,Oe):(Oe=N(Oe,Ve.children||[]),Oe.return=$e,Oe)}function St($e,Oe,Ve,Lt,nr){return Oe===null||Oe.tag!==7?(Oe=Ud(Ve,$e.mode,Lt,nr),Oe.return=$e,Oe):(Oe=N(Oe,Ve),Oe.return=$e,Oe)}function wt($e,Oe,Ve){if(typeof Oe=="string"&&Oe!==""||typeof Oe=="number")return Oe=Ab(""+Oe,$e.mode,Ve),Oe.return=$e,Oe;if(typeof Oe=="object"&&Oe!==null){switch(Oe.$$typeof){case A:return Ve=Wg(Oe.type,Oe.key,Oe.props,null,$e.mode,Ve),Ve.ref=Zp($e,null,Oe),Ve.return=$e,Ve;case L:return Oe=Ib(Oe,$e.mode,Ve),Oe.return=$e,Oe;case de:var Lt=Oe._init;return wt($e,Lt(Oe._payload),Ve)}if(ut(Oe)||oe(Oe))return Oe=Ud(Oe,$e.mode,Ve,null),Oe.return=$e,Oe;bg($e,Oe)}return null}function bt($e,Oe,Ve,Lt){var nr=Oe!==null?Oe.key:null;if(typeof Ve=="string"&&Ve!==""||typeof Ve=="number")return nr!==null?null:Te($e,Oe,""+Ve,Lt);if(typeof Ve=="object"&&Ve!==null){switch(Ve.$$typeof){case A:return Ve.key===nr?Ie($e,Oe,Ve,Lt):null;case L:return Ve.key===nr?Ke($e,Oe,Ve,Lt):null;case de:return nr=Ve._init,bt($e,Oe,nr(Ve._payload),Lt)}if(ut(Ve)||oe(Ve))return nr!==null?null:St($e,Oe,Ve,Lt,null);bg($e,Ve)}return null}function qt($e,Oe,Ve,Lt,nr){if(typeof Lt=="string"&&Lt!==""||typeof Lt=="number")return $e=$e.get(Ve)||null,Te(Oe,$e,""+Lt,nr);if(typeof Lt=="object"&&Lt!==null){switch(Lt.$$typeof){case A:return $e=$e.get(Lt.key===null?Ve:Lt.key)||null,Ie(Oe,$e,Lt,nr);case L:return $e=$e.get(Lt.key===null?Ve:Lt.key)||null,Ke(Oe,$e,Lt,nr);case de:var gr=Lt._init;return qt($e,Oe,Ve,gr(Lt._payload),nr)}if(ut(Lt)||oe(Lt))return $e=$e.get(Ve)||null,St(Oe,$e,Lt,nr,null);bg(Oe,Lt)}return null}function tr($e,Oe,Ve,Lt){for(var nr=null,gr=null,vr=Oe,br=Oe=0,Vn=null;vr!==null&&br<Ve.length;br++){vr.index>br?(Vn=vr,vr=null):Vn=vr.sibling;var li=bt($e,vr,Ve[br],Lt);if(li===null){vr===null&&(vr=Vn);break}d&&vr&&li.alternate===null&&p($e,vr),Oe=K(li,Oe,br),gr===null?nr=li:gr.sibling=li,gr=li,vr=Vn}if(br===Ve.length)return S($e,vr),ji&&Pd($e,br),nr;if(vr===null){for(;br<Ve.length;br++)vr=wt($e,Ve[br],Lt),vr!==null&&(Oe=K(vr,Oe,br),gr===null?nr=vr:gr.sibling=vr,gr=vr);return ji&&Pd($e,br),nr}for(vr=P($e,vr);br<Ve.length;br++)Vn=qt(vr,$e,br,Ve[br],Lt),Vn!==null&&(d&&Vn.alternate!==null&&vr.delete(Vn.key===null?br:Vn.key),Oe=K(Vn,Oe,br),gr===null?nr=Vn:gr.sibling=Vn,gr=Vn);return d&&vr.forEach(function(jc){return p($e,jc)}),ji&&Pd($e,br),nr}function rr($e,Oe,Ve,Lt){var nr=oe(Ve);if(typeof nr!="function")throw Error(t(150));if(Ve=nr.call(Ve),Ve==null)throw Error(t(151));for(var gr=nr=null,vr=Oe,br=Oe=0,Vn=null,li=Ve.next();vr!==null&&!li.done;br++,li=Ve.next()){vr.index>br?(Vn=vr,vr=null):Vn=vr.sibling;var jc=bt($e,vr,li.value,Lt);if(jc===null){vr===null&&(vr=Vn);break}d&&vr&&jc.alternate===null&&p($e,vr),Oe=K(jc,Oe,br),gr===null?nr=jc:gr.sibling=jc,gr=jc,vr=Vn}if(li.done)return S($e,vr),ji&&Pd($e,br),nr;if(vr===null){for(;!li.done;br++,li=Ve.next())li=wt($e,li.value,Lt),li!==null&&(Oe=K(li,Oe,br),gr===null?nr=li:gr.sibling=li,gr=li);return ji&&Pd($e,br),nr}for(vr=P($e,vr);!li.done;br++,li=Ve.next())li=qt(vr,$e,br,li.value,Lt),li!==null&&(d&&li.alternate!==null&&vr.delete(li.key===null?br:li.key),Oe=K(li,Oe,br),gr===null?nr=li:gr.sibling=li,gr=li);return d&&vr.forEach(function(F7){return p($e,F7)}),ji&&Pd($e,br),nr}function dn($e,Oe,Ve,Lt){if(typeof Ve=="object"&&Ve!==null&&Ve.type===F&&Ve.key===null&&(Ve=Ve.props.children),typeof Ve=="object"&&Ve!==null){switch(Ve.$$typeof){case A:e:{for(var nr=Ve.key,gr=Oe;gr!==null;){if(gr.key===nr){if(nr=Ve.type,nr===F){if(gr.tag===7){S($e,gr.sibling),Oe=N(gr,Ve.props.children),Oe.return=$e,$e=Oe;break e}}else if(gr.elementType===nr||typeof nr=="object"&&nr!==null&&nr.$$typeof===de&&Lk(nr)===gr.type){S($e,gr.sibling),Oe=N(gr,Ve.props),Oe.ref=Zp($e,gr,Ve),Oe.return=$e,$e=Oe;break e}S($e,gr);break}else p($e,gr);gr=gr.sibling}Ve.type===F?(Oe=Ud(Ve.props.children,$e.mode,Lt,Ve.key),Oe.return=$e,$e=Oe):(Lt=Wg(Ve.type,Ve.key,Ve.props,null,$e.mode,Lt),Lt.ref=Zp($e,Oe,Ve),Lt.return=$e,$e=Lt)}return ae($e);case L:e:{for(gr=Ve.key;Oe!==null;){if(Oe.key===gr)if(Oe.tag===4&&Oe.stateNode.containerInfo===Ve.containerInfo&&Oe.stateNode.implementation===Ve.implementation){S($e,Oe.sibling),Oe=N(Oe,Ve.children||[]),Oe.return=$e,$e=Oe;break e}else{S($e,Oe);break}else p($e,Oe);Oe=Oe.sibling}Oe=Ib(Ve,$e.mode,Lt),Oe.return=$e,$e=Oe}return ae($e);case de:return gr=Ve._init,dn($e,Oe,gr(Ve._payload),Lt)}if(ut(Ve))return tr($e,Oe,Ve,Lt);if(oe(Ve))return rr($e,Oe,Ve,Lt);bg($e,Ve)}return typeof Ve=="string"&&Ve!==""||typeof Ve=="number"?(Ve=""+Ve,Oe!==null&&Oe.tag===6?(S($e,Oe.sibling),Oe=N(Oe,Ve),Oe.return=$e,$e=Oe):(S($e,Oe),Oe=Ab(Ve,$e.mode,Lt),Oe.return=$e,$e=Oe),ae($e)):S($e,Oe)}return dn}var Wh=Ok(!0),Mk=Ok(!1),Sg=fa(null),Cg=null,Gh=null,NT=null;function UT(){NT=Gh=Cg=null}function $T(d){var p=Sg.current;Wt(Sg),d._currentValue=p}function jT(d,p,S){for(;d!==null;){var P=d.alternate;if((d.childLanes&p)!==p?(d.childLanes|=p,P!==null&&(P.childLanes|=p)):P!==null&&(P.childLanes&p)!==p&&(P.childLanes|=p),d===S)break;d=d.return}}function Kh(d,p){Cg=d,NT=Gh=null,d=d.dependencies,d!==null&&d.firstContext!==null&&((d.lanes&p)!==0&&(ga=!0),d.firstContext=null)}function To(d){var p=d._currentValue;if(NT!==d)if(d={context:d,memoizedValue:p,next:null},Gh===null){if(Cg===null)throw Error(t(308));Gh=d,Cg.dependencies={lanes:0,firstContext:d}}else Gh=Gh.next=d;return p}var Rd=null;function zT(d){Rd===null?Rd=[d]:Rd.push(d)}function Fk(d,p,S,P){var N=p.interleaved;return N===null?(S.next=S,zT(p)):(S.next=N.next,N.next=S),p.interleaved=S,Nu(d,P)}function Nu(d,p){d.lanes|=p;var S=d.alternate;for(S!==null&&(S.lanes|=p),S=d,d=d.return;d!==null;)d.childLanes|=p,S=d.alternate,S!==null&&(S.childLanes|=p),S=d,d=d.return;return S.tag===3?S.stateNode:null}var Lc=!1;function HT(d){d.updateQueue={baseState:d.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Bk(d,p){d=d.updateQueue,p.updateQueue===d&&(p.updateQueue={baseState:d.baseState,firstBaseUpdate:d.firstBaseUpdate,lastBaseUpdate:d.lastBaseUpdate,shared:d.shared,effects:d.effects})}function Uu(d,p){return{eventTime:d,lane:p,tag:0,payload:null,callback:null,next:null}}function Oc(d,p,S){var P=d.updateQueue;if(P===null)return null;if(P=P.shared,(ai&2)!==0){var N=P.pending;return N===null?p.next=p:(p.next=N.next,N.next=p),P.pending=p,Nu(d,S)}return N=P.interleaved,N===null?(p.next=p,zT(P)):(p.next=N.next,N.next=p),P.interleaved=p,Nu(d,S)}function Eg(d,p,S){if(p=p.updateQueue,p!==null&&(p=p.shared,(S&4194240)!==0)){var P=p.lanes;P&=d.pendingLanes,S|=P,p.lanes=S,Tu(d,S)}}function Nk(d,p){var S=d.updateQueue,P=d.alternate;if(P!==null&&(P=P.updateQueue,S===P)){var N=null,K=null;if(S=S.firstBaseUpdate,S!==null){do{var ae={eventTime:S.eventTime,lane:S.lane,tag:S.tag,payload:S.payload,callback:S.callback,next:null};K===null?N=K=ae:K=K.next=ae,S=S.next}while(S!==null);K===null?N=K=p:K=K.next=p}else N=K=p;S={baseState:P.baseState,firstBaseUpdate:N,lastBaseUpdate:K,shared:P.shared,effects:P.effects},d.updateQueue=S;return}d=S.lastBaseUpdate,d===null?S.firstBaseUpdate=p:d.next=p,S.lastBaseUpdate=p}function wg(d,p,S,P){var N=d.updateQueue;Lc=!1;var K=N.firstBaseUpdate,ae=N.lastBaseUpdate,Te=N.shared.pending;if(Te!==null){N.shared.pending=null;var Ie=Te,Ke=Ie.next;Ie.next=null,ae===null?K=Ke:ae.next=Ke,ae=Ie;var St=d.alternate;St!==null&&(St=St.updateQueue,Te=St.lastBaseUpdate,Te!==ae&&(Te===null?St.firstBaseUpdate=Ke:Te.next=Ke,St.lastBaseUpdate=Ie))}if(K!==null){var wt=N.baseState;ae=0,St=Ke=Ie=null,Te=K;do{var bt=Te.lane,qt=Te.eventTime;if((P&bt)===bt){St!==null&&(St=St.next={eventTime:qt,lane:0,tag:Te.tag,payload:Te.payload,callback:Te.callback,next:null});e:{var tr=d,rr=Te;switch(bt=p,qt=S,rr.tag){case 1:if(tr=rr.payload,typeof tr=="function"){wt=tr.call(qt,wt,bt);break e}wt=tr;break e;case 3:tr.flags=tr.flags&-65537|128;case 0:if(tr=rr.payload,bt=typeof tr=="function"?tr.call(qt,wt,bt):tr,bt==null)break e;wt=ce({},wt,bt);break e;case 2:Lc=!0}}Te.callback!==null&&Te.lane!==0&&(d.flags|=64,bt=N.effects,bt===null?N.effects=[Te]:bt.push(Te))}else qt={eventTime:qt,lane:bt,tag:Te.tag,payload:Te.payload,callback:Te.callback,next:null},St===null?(Ke=St=qt,Ie=wt):St=St.next=qt,ae|=bt;if(Te=Te.next,Te===null){if(Te=N.shared.pending,Te===null)break;bt=Te,Te=bt.next,bt.next=null,N.lastBaseUpdate=bt,N.shared.pending=null}}while(!0);if(St===null&&(Ie=wt),N.baseState=Ie,N.firstBaseUpdate=Ke,N.lastBaseUpdate=St,p=N.shared.interleaved,p!==null){N=p;do ae|=N.lane,N=N.next;while(N!==p)}else K===null&&(N.shared.lanes=0);Md|=ae,d.lanes=ae,d.memoizedState=wt}}function Uk(d,p,S){if(d=p.effects,p.effects=null,d!==null)for(p=0;p<d.length;p++){var P=d[p],N=P.callback;if(N!==null){if(P.callback=null,P=S,typeof N!="function")throw Error(t(191,N));N.call(P)}}}var em={},Bl=fa(em),tm=fa(em),rm=fa(em);function Ld(d){if(d===em)throw Error(t(174));return d}function VT(d,p){switch(oi(rm,p),oi(tm,d),oi(Bl,em),d=p.nodeType,d){case 9:case 11:p=(p=p.documentElement)?p.namespaceURI:Gt(null,"");break;default:d=d===8?p.parentNode:p,p=d.namespaceURI||null,d=d.tagName,p=Gt(p,d)}Wt(Bl),oi(Bl,p)}function Xh(){Wt(Bl),Wt(tm),Wt(rm)}function $k(d){Ld(rm.current);var p=Ld(Bl.current),S=Gt(p,d.type);p!==S&&(oi(tm,d),oi(Bl,S))}function qT(d){tm.current===d&&(Wt(Bl),Wt(tm))}var Gi=fa(0);function kg(d){for(var p=d;p!==null;){if(p.tag===13){var S=p.memoizedState;if(S!==null&&(S=S.dehydrated,S===null||S.data==="$?"||S.data==="$!"))return p}else if(p.tag===19&&p.memoizedProps.revealOrder!==void 0){if((p.flags&128)!==0)return p}else if(p.child!==null){p.child.return=p,p=p.child;continue}if(p===d)break;for(;p.sibling===null;){if(p.return===null||p.return===d)return null;p=p.return}p.sibling.return=p.return,p=p.sibling}return null}var WT=[];function GT(){for(var d=0;d<WT.length;d++)WT[d]._workInProgressVersionPrimary=null;WT.length=0}var Ag=R.ReactCurrentDispatcher,KT=R.ReactCurrentBatchConfig,Od=0,Ki=null,Dn=null,zn=null,Ig=!1,im=!1,nm=0,n7=0;function Es(){throw Error(t(321))}function XT(d,p){if(p===null)return!1;for(var S=0;S<p.length&&S<d.length;S++)if(!be(d[S],p[S]))return!1;return!0}function YT(d,p,S,P,N,K){if(Od=K,Ki=p,p.memoizedState=null,p.updateQueue=null,p.lanes=0,Ag.current=d===null||d.memoizedState===null?l7:u7,d=S(P,N),im){K=0;do{if(im=!1,nm=0,25<=K)throw Error(t(301));K+=1,zn=Dn=null,p.updateQueue=null,Ag.current=c7,d=S(P,N)}while(im)}if(Ag.current=Rg,p=Dn!==null&&Dn.next!==null,Od=0,zn=Dn=Ki=null,Ig=!1,p)throw Error(t(300));return d}function QT(){var d=nm!==0;return nm=0,d}function Nl(){var d={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return zn===null?Ki.memoizedState=zn=d:zn=zn.next=d,zn}function bo(){if(Dn===null){var d=Ki.alternate;d=d!==null?d.memoizedState:null}else d=Dn.next;var p=zn===null?Ki.memoizedState:zn.next;if(p!==null)zn=p,Dn=d;else{if(d===null)throw Error(t(310));Dn=d,d={memoizedState:Dn.memoizedState,baseState:Dn.baseState,baseQueue:Dn.baseQueue,queue:Dn.queue,next:null},zn===null?Ki.memoizedState=zn=d:zn=zn.next=d}return zn}function sm(d,p){return typeof p=="function"?p(d):p}function JT(d){var p=bo(),S=p.queue;if(S===null)throw Error(t(311));S.lastRenderedReducer=d;var P=Dn,N=P.baseQueue,K=S.pending;if(K!==null){if(N!==null){var ae=N.next;N.next=K.next,K.next=ae}P.baseQueue=N=K,S.pending=null}if(N!==null){K=N.next,P=P.baseState;var Te=ae=null,Ie=null,Ke=K;do{var St=Ke.lane;if((Od&St)===St)Ie!==null&&(Ie=Ie.next={lane:0,action:Ke.action,hasEagerState:Ke.hasEagerState,eagerState:Ke.eagerState,next:null}),P=Ke.hasEagerState?Ke.eagerState:d(P,Ke.action);else{var wt={lane:St,action:Ke.action,hasEagerState:Ke.hasEagerState,eagerState:Ke.eagerState,next:null};Ie===null?(Te=Ie=wt,ae=P):Ie=Ie.next=wt,Ki.lanes|=St,Md|=St}Ke=Ke.next}while(Ke!==null&&Ke!==K);Ie===null?ae=P:Ie.next=Te,be(P,p.memoizedState)||(ga=!0),p.memoizedState=P,p.baseState=ae,p.baseQueue=Ie,S.lastRenderedState=P}if(d=S.interleaved,d!==null){N=d;do K=N.lane,Ki.lanes|=K,Md|=K,N=N.next;while(N!==d)}else N===null&&(S.lanes=0);return[p.memoizedState,S.dispatch]}function ZT(d){var p=bo(),S=p.queue;if(S===null)throw Error(t(311));S.lastRenderedReducer=d;var P=S.dispatch,N=S.pending,K=p.memoizedState;if(N!==null){S.pending=null;var ae=N=N.next;do K=d(K,ae.action),ae=ae.next;while(ae!==N);be(K,p.memoizedState)||(ga=!0),p.memoizedState=K,p.baseQueue===null&&(p.baseState=K),S.lastRenderedState=K}return[K,P]}function jk(){}function zk(d,p){var S=Ki,P=bo(),N=p(),K=!be(P.memoizedState,N);if(K&&(P.memoizedState=N,ga=!0),P=P.queue,eb(qk.bind(null,S,P,d),[d]),P.getSnapshot!==p||K||zn!==null&&zn.memoizedState.tag&1){if(S.flags|=2048,am(9,Vk.bind(null,S,P,N,p),void 0,null),Hn===null)throw Error(t(349));(Od&30)!==0||Hk(S,p,N)}return N}function Hk(d,p,S){d.flags|=16384,d={getSnapshot:p,value:S},p=Ki.updateQueue,p===null?(p={lastEffect:null,stores:null},Ki.updateQueue=p,p.stores=[d]):(S=p.stores,S===null?p.stores=[d]:S.push(d))}function Vk(d,p,S,P){p.value=S,p.getSnapshot=P,Wk(p)&&Gk(d)}function qk(d,p,S){return S(function(){Wk(p)&&Gk(d)})}function Wk(d){var p=d.getSnapshot;d=d.value;try{var S=p();return!be(d,S)}catch{return!0}}function Gk(d){var p=Nu(d,1);p!==null&&tl(p,d,1,-1)}function Kk(d){var p=Nl();return typeof d=="function"&&(d=d()),p.memoizedState=p.baseState=d,d={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:sm,lastRenderedState:d},p.queue=d,d=d.dispatch=o7.bind(null,Ki,d),[p.memoizedState,d]}function am(d,p,S,P){return d={tag:d,create:p,destroy:S,deps:P,next:null},p=Ki.updateQueue,p===null?(p={lastEffect:null,stores:null},Ki.updateQueue=p,p.lastEffect=d.next=d):(S=p.lastEffect,S===null?p.lastEffect=d.next=d:(P=S.next,S.next=d,d.next=P,p.lastEffect=d)),d}function Xk(){return bo().memoizedState}function Dg(d,p,S,P){var N=Nl();Ki.flags|=d,N.memoizedState=am(1|p,S,void 0,P===void 0?null:P)}function Pg(d,p,S,P){var N=bo();P=P===void 0?null:P;var K=void 0;if(Dn!==null){var ae=Dn.memoizedState;if(K=ae.destroy,P!==null&&XT(P,ae.deps)){N.memoizedState=am(p,S,K,P);return}}Ki.flags|=d,N.memoizedState=am(1|p,S,K,P)}function Yk(d,p){return Dg(8390656,8,d,p)}function eb(d,p){return Pg(2048,8,d,p)}function Qk(d,p){return Pg(4,2,d,p)}function Jk(d,p){return Pg(4,4,d,p)}function Zk(d,p){if(typeof p=="function")return d=d(),p(d),function(){p(null)};if(p!=null)return d=d(),p.current=d,function(){p.current=null}}function eA(d,p,S){return S=S!=null?S.concat([d]):null,Pg(4,4,Zk.bind(null,p,d),S)}function tb(){}function tA(d,p){var S=bo();p=p===void 0?null:p;var P=S.memoizedState;return P!==null&&p!==null&&XT(p,P[1])?P[0]:(S.memoizedState=[d,p],d)}function rA(d,p){var S=bo();p=p===void 0?null:p;var P=S.memoizedState;return P!==null&&p!==null&&XT(p,P[1])?P[0]:(d=d(),S.memoizedState=[d,p],d)}function iA(d,p,S){return(Od&21)===0?(d.baseState&&(d.baseState=!1,ga=!0),d.memoizedState=S):(be(S,p)||(S=pc(),Ki.lanes|=S,Md|=S,d.baseState=!0),p)}function s7(d,p){var S=Fr;Fr=S!==0&&4>S?S:4,d(!0);var P=KT.transition;KT.transition={};try{d(!1),p()}finally{Fr=S,KT.transition=P}}function nA(){return bo().memoizedState}function a7(d,p,S){var P=Nc(d);if(S={lane:P,action:S,hasEagerState:!1,eagerState:null,next:null},sA(d))aA(p,S);else if(S=Fk(d,p,S,P),S!==null){var N=js();tl(S,d,P,N),oA(S,p,P)}}function o7(d,p,S){var P=Nc(d),N={lane:P,action:S,hasEagerState:!1,eagerState:null,next:null};if(sA(d))aA(p,N);else{var K=d.alternate;if(d.lanes===0&&(K===null||K.lanes===0)&&(K=p.lastRenderedReducer,K!==null))try{var ae=p.lastRenderedState,Te=K(ae,S);if(N.hasEagerState=!0,N.eagerState=Te,be(Te,ae)){var Ie=p.interleaved;Ie===null?(N.next=N,zT(p)):(N.next=Ie.next,Ie.next=N),p.interleaved=N;return}}catch{}finally{}S=Fk(d,p,N,P),S!==null&&(N=js(),tl(S,d,P,N),oA(S,p,P))}}function sA(d){var p=d.alternate;return d===Ki||p!==null&&p===Ki}function aA(d,p){im=Ig=!0;var S=d.pending;S===null?p.next=p:(p.next=S.next,S.next=p),d.pending=p}function oA(d,p,S){if((S&4194240)!==0){var P=p.lanes;P&=d.pendingLanes,S|=P,p.lanes=S,Tu(d,S)}}var Rg={readContext:To,useCallback:Es,useContext:Es,useEffect:Es,useImperativeHandle:Es,useInsertionEffect:Es,useLayoutEffect:Es,useMemo:Es,useReducer:Es,useRef:Es,useState:Es,useDebugValue:Es,useDeferredValue:Es,useTransition:Es,useMutableSource:Es,useSyncExternalStore:Es,useId:Es,unstable_isNewReconciler:!1},l7={readContext:To,useCallback:function(d,p){return Nl().memoizedState=[d,p===void 0?null:p],d},useContext:To,useEffect:Yk,useImperativeHandle:function(d,p,S){return S=S!=null?S.concat([d]):null,Dg(4194308,4,Zk.bind(null,p,d),S)},useLayoutEffect:function(d,p){return Dg(4194308,4,d,p)},useInsertionEffect:function(d,p){return Dg(4,2,d,p)},useMemo:function(d,p){var S=Nl();return p=p===void 0?null:p,d=d(),S.memoizedState=[d,p],d},useReducer:function(d,p,S){var P=Nl();return p=S!==void 0?S(p):p,P.memoizedState=P.baseState=p,d={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:d,lastRenderedState:p},P.queue=d,d=d.dispatch=a7.bind(null,Ki,d),[P.memoizedState,d]},useRef:function(d){var p=Nl();return d={current:d},p.memoizedState=d},useState:Kk,useDebugValue:tb,useDeferredValue:function(d){return Nl().memoizedState=d},useTransition:function(){var d=Kk(!1),p=d[0];return d=s7.bind(null,d[1]),Nl().memoizedState=d,[p,d]},useMutableSource:function(){},useSyncExternalStore:function(d,p,S){var P=Ki,N=Nl();if(ji){if(S===void 0)throw Error(t(407));S=S()}else{if(S=p(),Hn===null)throw Error(t(349));(Od&30)!==0||Hk(P,p,S)}N.memoizedState=S;var K={value:S,getSnapshot:p};return N.queue=K,Yk(qk.bind(null,P,K,d),[d]),P.flags|=2048,am(9,Vk.bind(null,P,K,S,p),void 0,null),S},useId:function(){var d=Nl(),p=Hn.identifierPrefix;if(ji){var S=Bu,P=Fu;S=(P&~(1<<32-Tt(P)-1)).toString(32)+S,p=":"+p+"R"+S,S=nm++,0<S&&(p+="H"+S.toString(32)),p+=":"}else S=n7++,p=":"+p+"r"+S.toString(32)+":";return d.memoizedState=p},unstable_isNewReconciler:!1},u7={readContext:To,useCallback:tA,useContext:To,useEffect:eb,useImperativeHandle:eA,useInsertionEffect:Qk,useLayoutEffect:Jk,useMemo:rA,useReducer:JT,useRef:Xk,useState:function(){return JT(sm)},useDebugValue:tb,useDeferredValue:function(d){var p=bo();return iA(p,Dn.memoizedState,d)},useTransition:function(){var d=JT(sm)[0],p=bo().memoizedState;return[d,p]},useMutableSource:jk,useSyncExternalStore:zk,useId:nA,unstable_isNewReconciler:!1},c7={readContext:To,useCallback:tA,useContext:To,useEffect:eb,useImperativeHandle:eA,useInsertionEffect:Qk,useLayoutEffect:Jk,useMemo:rA,useReducer:ZT,useRef:Xk,useState:function(){return ZT(sm)},useDebugValue:tb,useDeferredValue:function(d){var p=bo();return Dn===null?p.memoizedState=d:iA(p,Dn.memoizedState,d)},useTransition:function(){var d=ZT(sm)[0],p=bo().memoizedState;return[d,p]},useMutableSource:jk,useSyncExternalStore:zk,useId:nA,unstable_isNewReconciler:!1};function Jo(d,p){if(d&&d.defaultProps){p=ce({},p),d=d.defaultProps;for(var S in d)p[S]===void 0&&(p[S]=d[S]);return p}return p}function rb(d,p,S,P){p=d.memoizedState,S=S(P,p),S=S==null?p:ce({},p,S),d.memoizedState=S,d.lanes===0&&(d.updateQueue.baseState=S)}var Lg={isMounted:function(d){return(d=d._reactInternals)?mt(d)===d:!1},enqueueSetState:function(d,p,S){d=d._reactInternals;var P=js(),N=Nc(d),K=Uu(P,N);K.payload=p,S!=null&&(K.callback=S),p=Oc(d,K,N),p!==null&&(tl(p,d,N,P),Eg(p,d,N))},enqueueReplaceState:function(d,p,S){d=d._reactInternals;var P=js(),N=Nc(d),K=Uu(P,N);K.tag=1,K.payload=p,S!=null&&(K.callback=S),p=Oc(d,K,N),p!==null&&(tl(p,d,N,P),Eg(p,d,N))},enqueueForceUpdate:function(d,p){d=d._reactInternals;var S=js(),P=Nc(d),N=Uu(S,P);N.tag=2,p!=null&&(N.callback=p),p=Oc(d,N,P),p!==null&&(tl(p,d,P,S),Eg(p,d,P))}};function lA(d,p,S,P,N,K,ae){return d=d.stateNode,typeof d.shouldComponentUpdate=="function"?d.shouldComponentUpdate(P,K,ae):p.prototype&&p.prototype.isPureReactComponent?!De(S,P)||!De(N,K):!0}function uA(d,p,S){var P=!1,N=$i,K=p.contextType;return typeof K=="object"&&K!==null?K=To(K):(N=ma(p)?Id:Cs.current,P=p.contextTypes,K=(P=P!=null)?zh(d,N):$i),p=new p(S,K),d.memoizedState=p.state!==null&&p.state!==void 0?p.state:null,p.updater=Lg,d.stateNode=p,p._reactInternals=d,P&&(d=d.stateNode,d.__reactInternalMemoizedUnmaskedChildContext=N,d.__reactInternalMemoizedMaskedChildContext=K),p}function cA(d,p,S,P){d=p.state,typeof p.componentWillReceiveProps=="function"&&p.componentWillReceiveProps(S,P),typeof p.UNSAFE_componentWillReceiveProps=="function"&&p.UNSAFE_componentWillReceiveProps(S,P),p.state!==d&&Lg.enqueueReplaceState(p,p.state,null)}function ib(d,p,S,P){var N=d.stateNode;N.props=S,N.state=d.memoizedState,N.refs={},HT(d);var K=p.contextType;typeof K=="object"&&K!==null?N.context=To(K):(K=ma(p)?Id:Cs.current,N.context=zh(d,K)),N.state=d.memoizedState,K=p.getDerivedStateFromProps,typeof K=="function"&&(rb(d,p,K,S),N.state=d.memoizedState),typeof p.getDerivedStateFromProps=="function"||typeof N.getSnapshotBeforeUpdate=="function"||typeof N.UNSAFE_componentWillMount!="function"&&typeof N.componentWillMount!="function"||(p=N.state,typeof N.componentWillMount=="function"&&N.componentWillMount(),typeof N.UNSAFE_componentWillMount=="function"&&N.UNSAFE_componentWillMount(),p!==N.state&&Lg.enqueueReplaceState(N,N.state,null),wg(d,S,N,P),N.state=d.memoizedState),typeof N.componentDidMount=="function"&&(d.flags|=4194308)}function Yh(d,p){try{var S="",P=p;do S+=ke(P),P=P.return;while(P);var N=S}catch(K){N=`
Error generating stack: `+K.message+`
`+K.stack}return{value:d,source:p,stack:N,digest:null}}function nb(d,p,S){return{value:d,source:null,stack:S??null,digest:p??null}}function sb(d,p){try{console.error(p.value)}catch(S){setTimeout(function(){throw S})}}var d7=typeof WeakMap=="function"?WeakMap:Map;function dA(d,p,S){S=Uu(-1,S),S.tag=3,S.payload={element:null};var P=p.value;return S.callback=function(){$g||($g=!0,xb=P),sb(d,p)},S}function hA(d,p,S){S=Uu(-1,S),S.tag=3;var P=d.type.getDerivedStateFromError;if(typeof P=="function"){var N=p.value;S.payload=function(){return P(N)},S.callback=function(){sb(d,p)}}var K=d.stateNode;return K!==null&&typeof K.componentDidCatch=="function"&&(S.callback=function(){sb(d,p),typeof P!="function"&&(Fc===null?Fc=new Set([this]):Fc.add(this));var ae=p.stack;this.componentDidCatch(p.value,{componentStack:ae!==null?ae:""})}),S}function fA(d,p,S){var P=d.pingCache;if(P===null){P=d.pingCache=new d7;var N=new Set;P.set(p,N)}else N=P.get(p),N===void 0&&(N=new Set,P.set(p,N));N.has(S)||(N.add(S),d=E7.bind(null,d,p,S),p.then(d,d))}function pA(d){do{var p;if((p=d.tag===13)&&(p=d.memoizedState,p=p!==null?p.dehydrated!==null:!0),p)return d;d=d.return}while(d!==null);return null}function mA(d,p,S,P,N){return(d.mode&1)===0?(d===p?d.flags|=65536:(d.flags|=128,S.flags|=131072,S.flags&=-52805,S.tag===1&&(S.alternate===null?S.tag=17:(p=Uu(-1,1),p.tag=2,Oc(S,p,1))),S.lanes|=1),d):(d.flags|=65536,d.lanes=N,d)}var h7=R.ReactCurrentOwner,ga=!1;function $s(d,p,S,P){p.child=d===null?Mk(p,null,S,P):Wh(p,d.child,S,P)}function gA(d,p,S,P,N){S=S.render;var K=p.ref;return Kh(p,N),P=YT(d,p,S,P,K,N),S=QT(),d!==null&&!ga?(p.updateQueue=d.updateQueue,p.flags&=-2053,d.lanes&=~N,$u(d,p,N)):(ji&&S&&LT(p),p.flags|=1,$s(d,p,P,N),p.child)}function vA(d,p,S,P,N){if(d===null){var K=S.type;return typeof K=="function"&&!kb(K)&&K.defaultProps===void 0&&S.compare===null&&S.defaultProps===void 0?(p.tag=15,p.type=K,yA(d,p,K,P,N)):(d=Wg(S.type,null,P,p,p.mode,N),d.ref=p.ref,d.return=p,p.child=d)}if(K=d.child,(d.lanes&N)===0){var ae=K.memoizedProps;if(S=S.compare,S=S!==null?S:De,S(ae,P)&&d.ref===p.ref)return $u(d,p,N)}return p.flags|=1,d=$c(K,P),d.ref=p.ref,d.return=p,p.child=d}function yA(d,p,S,P,N){if(d!==null){var K=d.memoizedProps;if(De(K,P)&&d.ref===p.ref)if(ga=!1,p.pendingProps=P=K,(d.lanes&N)!==0)(d.flags&131072)!==0&&(ga=!0);else return p.lanes=d.lanes,$u(d,p,N)}return ab(d,p,S,P,N)}function _A(d,p,S){var P=p.pendingProps,N=P.children,K=d!==null?d.memoizedState:null;if(P.mode==="hidden")if((p.mode&1)===0)p.memoizedState={baseLanes:0,cachePool:null,transitions:null},oi(Jh,Wa),Wa|=S;else{if((S&1073741824)===0)return d=K!==null?K.baseLanes|S:S,p.lanes=p.childLanes=1073741824,p.memoizedState={baseLanes:d,cachePool:null,transitions:null},p.updateQueue=null,oi(Jh,Wa),Wa|=d,null;p.memoizedState={baseLanes:0,cachePool:null,transitions:null},P=K!==null?K.baseLanes:S,oi(Jh,Wa),Wa|=P}else K!==null?(P=K.baseLanes|S,p.memoizedState=null):P=S,oi(Jh,Wa),Wa|=P;return $s(d,p,N,S),p.child}function xA(d,p){var S=p.ref;(d===null&&S!==null||d!==null&&d.ref!==S)&&(p.flags|=512,p.flags|=2097152)}function ab(d,p,S,P,N){var K=ma(S)?Id:Cs.current;return K=zh(p,K),Kh(p,N),S=YT(d,p,S,P,K,N),P=QT(),d!==null&&!ga?(p.updateQueue=d.updateQueue,p.flags&=-2053,d.lanes&=~N,$u(d,p,N)):(ji&&P&&LT(p),p.flags|=1,$s(d,p,S,N),p.child)}function TA(d,p,S,P,N){if(ma(S)){var K=!0;vg(p)}else K=!1;if(Kh(p,N),p.stateNode===null)Mg(d,p),uA(p,S,P),ib(p,S,P,N),P=!0;else if(d===null){var ae=p.stateNode,Te=p.memoizedProps;ae.props=Te;var Ie=ae.context,Ke=S.contextType;typeof Ke=="object"&&Ke!==null?Ke=To(Ke):(Ke=ma(S)?Id:Cs.current,Ke=zh(p,Ke));var St=S.getDerivedStateFromProps,wt=typeof St=="function"||typeof ae.getSnapshotBeforeUpdate=="function";wt||typeof ae.UNSAFE_componentWillReceiveProps!="function"&&typeof ae.componentWillReceiveProps!="function"||(Te!==P||Ie!==Ke)&&cA(p,ae,P,Ke),Lc=!1;var bt=p.memoizedState;ae.state=bt,wg(p,P,ae,N),Ie=p.memoizedState,Te!==P||bt!==Ie||pa.current||Lc?(typeof St=="function"&&(rb(p,S,St,P),Ie=p.memoizedState),(Te=Lc||lA(p,S,Te,P,bt,Ie,Ke))?(wt||typeof ae.UNSAFE_componentWillMount!="function"&&typeof ae.componentWillMount!="function"||(typeof ae.componentWillMount=="function"&&ae.componentWillMount(),typeof ae.UNSAFE_componentWillMount=="function"&&ae.UNSAFE_componentWillMount()),typeof ae.componentDidMount=="function"&&(p.flags|=4194308)):(typeof ae.componentDidMount=="function"&&(p.flags|=4194308),p.memoizedProps=P,p.memoizedState=Ie),ae.props=P,ae.state=Ie,ae.context=Ke,P=Te):(typeof ae.componentDidMount=="function"&&(p.flags|=4194308),P=!1)}else{ae=p.stateNode,Bk(d,p),Te=p.memoizedProps,Ke=p.type===p.elementType?Te:Jo(p.type,Te),ae.props=Ke,wt=p.pendingProps,bt=ae.context,Ie=S.contextType,typeof Ie=="object"&&Ie!==null?Ie=To(Ie):(Ie=ma(S)?Id:Cs.current,Ie=zh(p,Ie));var qt=S.getDerivedStateFromProps;(St=typeof qt=="function"||typeof ae.getSnapshotBeforeUpdate=="function")||typeof ae.UNSAFE_componentWillReceiveProps!="function"&&typeof ae.componentWillReceiveProps!="function"||(Te!==wt||bt!==Ie)&&cA(p,ae,P,Ie),Lc=!1,bt=p.memoizedState,ae.state=bt,wg(p,P,ae,N);var tr=p.memoizedState;Te!==wt||bt!==tr||pa.current||Lc?(typeof qt=="function"&&(rb(p,S,qt,P),tr=p.memoizedState),(Ke=Lc||lA(p,S,Ke,P,bt,tr,Ie)||!1)?(St||typeof ae.UNSAFE_componentWillUpdate!="function"&&typeof ae.componentWillUpdate!="function"||(typeof ae.componentWillUpdate=="function"&&ae.componentWillUpdate(P,tr,Ie),typeof ae.UNSAFE_componentWillUpdate=="function"&&ae.UNSAFE_componentWillUpdate(P,tr,Ie)),typeof ae.componentDidUpdate=="function"&&(p.flags|=4),typeof ae.getSnapshotBeforeUpdate=="function"&&(p.flags|=1024)):(typeof ae.componentDidUpdate!="function"||Te===d.memoizedProps&&bt===d.memoizedState||(p.flags|=4),typeof ae.getSnapshotBeforeUpdate!="function"||Te===d.memoizedProps&&bt===d.memoizedState||(p.flags|=1024),p.memoizedProps=P,p.memoizedState=tr),ae.props=P,ae.state=tr,ae.context=Ie,P=Ke):(typeof ae.componentDidUpdate!="function"||Te===d.memoizedProps&&bt===d.memoizedState||(p.flags|=4),typeof ae.getSnapshotBeforeUpdate!="function"||Te===d.memoizedProps&&bt===d.memoizedState||(p.flags|=1024),P=!1)}return ob(d,p,S,P,K,N)}function ob(d,p,S,P,N,K){xA(d,p);var ae=(p.flags&128)!==0;if(!P&&!ae)return N&&wk(p,S,!1),$u(d,p,K);P=p.stateNode,h7.current=p;var Te=ae&&typeof S.getDerivedStateFromError!="function"?null:P.render();return p.flags|=1,d!==null&&ae?(p.child=Wh(p,d.child,null,K),p.child=Wh(p,null,Te,K)):$s(d,p,Te,K),p.memoizedState=P.state,N&&wk(p,S,!0),p.child}function bA(d){var p=d.stateNode;p.pendingContext?Ck(d,p.pendingContext,p.pendingContext!==p.context):p.context&&Ck(d,p.context,!1),VT(d,p.containerInfo)}function SA(d,p,S,P,N){return qh(),BT(N),p.flags|=256,$s(d,p,S,P),p.child}var lb={dehydrated:null,treeContext:null,retryLane:0};function ub(d){return{baseLanes:d,cachePool:null,transitions:null}}function CA(d,p,S){var P=p.pendingProps,N=Gi.current,K=!1,ae=(p.flags&128)!==0,Te;if((Te=ae)||(Te=d!==null&&d.memoizedState===null?!1:(N&2)!==0),Te?(K=!0,p.flags&=-129):(d===null||d.memoizedState!==null)&&(N|=1),oi(Gi,N&1),d===null)return FT(p),d=p.memoizedState,d!==null&&(d=d.dehydrated,d!==null)?((p.mode&1)===0?p.lanes=1:d.data==="$!"?p.lanes=8:p.lanes=1073741824,null):(ae=P.children,d=P.fallback,K?(P=p.mode,K=p.child,ae={mode:"hidden",children:ae},(P&1)===0&&K!==null?(K.childLanes=0,K.pendingProps=ae):K=Gg(ae,P,0,null),d=Ud(d,P,S,null),K.return=p,d.return=p,K.sibling=d,p.child=K,p.child.memoizedState=ub(S),p.memoizedState=lb,d):cb(p,ae));if(N=d.memoizedState,N!==null&&(Te=N.dehydrated,Te!==null))return f7(d,p,ae,P,Te,N,S);if(K){K=P.fallback,ae=p.mode,N=d.child,Te=N.sibling;var Ie={mode:"hidden",children:P.children};return(ae&1)===0&&p.child!==N?(P=p.child,P.childLanes=0,P.pendingProps=Ie,p.deletions=null):(P=$c(N,Ie),P.subtreeFlags=N.subtreeFlags&14680064),Te!==null?K=$c(Te,K):(K=Ud(K,ae,S,null),K.flags|=2),K.return=p,P.return=p,P.sibling=K,p.child=P,P=K,K=p.child,ae=d.child.memoizedState,ae=ae===null?ub(S):{baseLanes:ae.baseLanes|S,cachePool:null,transitions:ae.transitions},K.memoizedState=ae,K.childLanes=d.childLanes&~S,p.memoizedState=lb,P}return K=d.child,d=K.sibling,P=$c(K,{mode:"visible",children:P.children}),(p.mode&1)===0&&(P.lanes=S),P.return=p,P.sibling=null,d!==null&&(S=p.deletions,S===null?(p.deletions=[d],p.flags|=16):S.push(d)),p.child=P,p.memoizedState=null,P}function cb(d,p){return p=Gg({mode:"visible",children:p},d.mode,0,null),p.return=d,d.child=p}function Og(d,p,S,P){return P!==null&&BT(P),Wh(p,d.child,null,S),d=cb(p,p.pendingProps.children),d.flags|=2,p.memoizedState=null,d}function f7(d,p,S,P,N,K,ae){if(S)return p.flags&256?(p.flags&=-257,P=nb(Error(t(422))),Og(d,p,ae,P)):p.memoizedState!==null?(p.child=d.child,p.flags|=128,null):(K=P.fallback,N=p.mode,P=Gg({mode:"visible",children:P.children},N,0,null),K=Ud(K,N,ae,null),K.flags|=2,P.return=p,K.return=p,P.sibling=K,p.child=P,(p.mode&1)!==0&&Wh(p,d.child,null,ae),p.child.memoizedState=ub(ae),p.memoizedState=lb,K);if((p.mode&1)===0)return Og(d,p,ae,null);if(N.data==="$!"){if(P=N.nextSibling&&N.nextSibling.dataset,P)var Te=P.dgst;return P=Te,K=Error(t(419)),P=nb(K,P,void 0),Og(d,p,ae,P)}if(Te=(ae&d.childLanes)!==0,ga||Te){if(P=Hn,P!==null){switch(ae&-ae){case 4:N=2;break;case 16:N=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:N=32;break;case 536870912:N=268435456;break;default:N=0}N=(N&(P.suspendedLanes|ae))!==0?0:N,N!==0&&N!==K.retryLane&&(K.retryLane=N,Nu(d,N),tl(P,d,N,-1))}return wb(),P=nb(Error(t(421))),Og(d,p,ae,P)}return N.data==="$?"?(p.flags|=128,p.child=d.child,p=w7.bind(null,d),N._reactRetry=p,null):(d=K.treeContext,qa=Q(N.nextSibling),Va=p,ji=!0,Qo=null,d!==null&&(_o[xo++]=Fu,_o[xo++]=Bu,_o[xo++]=Dd,Fu=d.id,Bu=d.overflow,Dd=p),p=cb(p,P.children),p.flags|=4096,p)}function EA(d,p,S){d.lanes|=p;var P=d.alternate;P!==null&&(P.lanes|=p),jT(d.return,p,S)}function db(d,p,S,P,N){var K=d.memoizedState;K===null?d.memoizedState={isBackwards:p,rendering:null,renderingStartTime:0,last:P,tail:S,tailMode:N}:(K.isBackwards=p,K.rendering=null,K.renderingStartTime=0,K.last=P,K.tail=S,K.tailMode=N)}function wA(d,p,S){var P=p.pendingProps,N=P.revealOrder,K=P.tail;if($s(d,p,P.children,S),P=Gi.current,(P&2)!==0)P=P&1|2,p.flags|=128;else{if(d!==null&&(d.flags&128)!==0)e:for(d=p.child;d!==null;){if(d.tag===13)d.memoizedState!==null&&EA(d,S,p);else if(d.tag===19)EA(d,S,p);else if(d.child!==null){d.child.return=d,d=d.child;continue}if(d===p)break e;for(;d.sibling===null;){if(d.return===null||d.return===p)break e;d=d.return}d.sibling.return=d.return,d=d.sibling}P&=1}if(oi(Gi,P),(p.mode&1)===0)p.memoizedState=null;else switch(N){case"forwards":for(S=p.child,N=null;S!==null;)d=S.alternate,d!==null&&kg(d)===null&&(N=S),S=S.sibling;S=N,S===null?(N=p.child,p.child=null):(N=S.sibling,S.sibling=null),db(p,!1,N,S,K);break;case"backwards":for(S=null,N=p.child,p.child=null;N!==null;){if(d=N.alternate,d!==null&&kg(d)===null){p.child=N;break}d=N.sibling,N.sibling=S,S=N,N=d}db(p,!0,S,null,K);break;case"together":db(p,!1,null,null,void 0);break;default:p.memoizedState=null}return p.child}function Mg(d,p){(p.mode&1)===0&&d!==null&&(d.alternate=null,p.alternate=null,p.flags|=2)}function $u(d,p,S){if(d!==null&&(p.dependencies=d.dependencies),Md|=p.lanes,(S&p.childLanes)===0)return null;if(d!==null&&p.child!==d.child)throw Error(t(153));if(p.child!==null){for(d=p.child,S=$c(d,d.pendingProps),p.child=S,S.return=p;d.sibling!==null;)d=d.sibling,S=S.sibling=$c(d,d.pendingProps),S.return=p;S.sibling=null}return p.child}function p7(d,p,S){switch(p.tag){case 3:bA(p),qh();break;case 5:$k(p);break;case 1:ma(p.type)&&vg(p);break;case 4:VT(p,p.stateNode.containerInfo);break;case 10:var P=p.type._context,N=p.memoizedProps.value;oi(Sg,P._currentValue),P._currentValue=N;break;case 13:if(P=p.memoizedState,P!==null)return P.dehydrated!==null?(oi(Gi,Gi.current&1),p.flags|=128,null):(S&p.child.childLanes)!==0?CA(d,p,S):(oi(Gi,Gi.current&1),d=$u(d,p,S),d!==null?d.sibling:null);oi(Gi,Gi.current&1);break;case 19:if(P=(S&p.childLanes)!==0,(d.flags&128)!==0){if(P)return wA(d,p,S);p.flags|=128}if(N=p.memoizedState,N!==null&&(N.rendering=null,N.tail=null,N.lastEffect=null),oi(Gi,Gi.current),P)break;return null;case 22:case 23:return p.lanes=0,_A(d,p,S)}return $u(d,p,S)}var kA,hb,AA,IA;kA=function(d,p){for(var S=p.child;S!==null;){if(S.tag===5||S.tag===6)d.appendChild(S.stateNode);else if(S.tag!==4&&S.child!==null){S.child.return=S,S=S.child;continue}if(S===p)break;for(;S.sibling===null;){if(S.return===null||S.return===p)return;S=S.return}S.sibling.return=S.return,S=S.sibling}},hb=function(){},AA=function(d,p,S,P){var N=d.memoizedProps;if(N!==P){d=p.stateNode,Ld(Bl.current);var K=null;switch(S){case"input":N=Ue(d,N),P=Ue(d,P),K=[];break;case"select":N=ce({},N,{value:void 0}),P=ce({},P,{value:void 0}),K=[];break;case"textarea":N=it(d,N),P=it(d,P),K=[];break;default:typeof N.onClick!="function"&&typeof P.onClick=="function"&&(d.onclick=Pc)}$r(S,P);var ae;S=null;for(Ke in N)if(!P.hasOwnProperty(Ke)&&N.hasOwnProperty(Ke)&&N[Ke]!=null)if(Ke==="style"){var Te=N[Ke];for(ae in Te)Te.hasOwnProperty(ae)&&(S||(S={}),S[ae]="")}else Ke!=="dangerouslySetInnerHTML"&&Ke!=="children"&&Ke!=="suppressContentEditableWarning"&&Ke!=="suppressHydrationWarning"&&Ke!=="autoFocus"&&(n.hasOwnProperty(Ke)?K||(K=[]):(K=K||[]).push(Ke,null));for(Ke in P){var Ie=P[Ke];if(Te=N?.[Ke],P.hasOwnProperty(Ke)&&Ie!==Te&&(Ie!=null||Te!=null))if(Ke==="style")if(Te){for(ae in Te)!Te.hasOwnProperty(ae)||Ie&&Ie.hasOwnProperty(ae)||(S||(S={}),S[ae]="");for(ae in Ie)Ie.hasOwnProperty(ae)&&Te[ae]!==Ie[ae]&&(S||(S={}),S[ae]=Ie[ae])}else S||(K||(K=[]),K.push(Ke,S)),S=Ie;else Ke==="dangerouslySetInnerHTML"?(Ie=Ie?Ie.__html:void 0,Te=Te?Te.__html:void 0,Ie!=null&&Te!==Ie&&(K=K||[]).push(Ke,Ie)):Ke==="children"?typeof Ie!="string"&&typeof Ie!="number"||(K=K||[]).push(Ke,""+Ie):Ke!=="suppressContentEditableWarning"&&Ke!=="suppressHydrationWarning"&&(n.hasOwnProperty(Ke)?(Ie!=null&&Ke==="onScroll"&&hi("scroll",d),K||Te===Ie||(K=[])):(K=K||[]).push(Ke,Ie))}S&&(K=K||[]).push("style",S);var Ke=K;(p.updateQueue=Ke)&&(p.flags|=4)}},IA=function(d,p,S,P){S!==P&&(p.flags|=4)};function om(d,p){if(!ji)switch(d.tailMode){case"hidden":p=d.tail;for(var S=null;p!==null;)p.alternate!==null&&(S=p),p=p.sibling;S===null?d.tail=null:S.sibling=null;break;case"collapsed":S=d.tail;for(var P=null;S!==null;)S.alternate!==null&&(P=S),S=S.sibling;P===null?p||d.tail===null?d.tail=null:d.tail.sibling=null:P.sibling=null}}function ws(d){var p=d.alternate!==null&&d.alternate.child===d.child,S=0,P=0;if(p)for(var N=d.child;N!==null;)S|=N.lanes|N.childLanes,P|=N.subtreeFlags&14680064,P|=N.flags&14680064,N.return=d,N=N.sibling;else for(N=d.child;N!==null;)S|=N.lanes|N.childLanes,P|=N.subtreeFlags,P|=N.flags,N.return=d,N=N.sibling;return d.subtreeFlags|=P,d.childLanes=S,p}function m7(d,p,S){var P=p.pendingProps;switch(OT(p),p.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ws(p),null;case 1:return ma(p.type)&&gg(),ws(p),null;case 3:return P=p.stateNode,Xh(),Wt(pa),Wt(Cs),GT(),P.pendingContext&&(P.context=P.pendingContext,P.pendingContext=null),(d===null||d.child===null)&&(Tg(p)?p.flags|=4:d===null||d.memoizedState.isDehydrated&&(p.flags&256)===0||(p.flags|=1024,Qo!==null&&(Sb(Qo),Qo=null))),hb(d,p),ws(p),null;case 5:qT(p);var N=Ld(rm.current);if(S=p.type,d!==null&&p.stateNode!=null)AA(d,p,S,P,N),d.ref!==p.ref&&(p.flags|=512,p.flags|=2097152);else{if(!P){if(p.stateNode===null)throw Error(t(166));return ws(p),null}if(d=Ld(Bl.current),Tg(p)){P=p.stateNode,S=p.type;var K=p.memoizedProps;switch(P[ge]=p,P[He]=K,d=(p.mode&1)!==0,S){case"dialog":hi("cancel",P),hi("close",P);break;case"iframe":case"object":case"embed":hi("load",P);break;case"video":case"audio":for(N=0;N<Du.length;N++)hi(Du[N],P);break;case"source":hi("error",P);break;case"img":case"image":case"link":hi("error",P),hi("load",P);break;case"details":hi("toggle",P);break;case"input":Le(P,K),hi("invalid",P);break;case"select":P._wrapperState={wasMultiple:!!K.multiple},hi("invalid",P);break;case"textarea":Sr(P,K),hi("invalid",P)}$r(S,K),N=null;for(var ae in K)if(K.hasOwnProperty(ae)){var Te=K[ae];ae==="children"?typeof Te=="string"?P.textContent!==Te&&(K.suppressHydrationWarning!==!0&&Dc(P.textContent,Te,d),N=["children",Te]):typeof Te=="number"&&P.textContent!==""+Te&&(K.suppressHydrationWarning!==!0&&Dc(P.textContent,Te,d),N=["children",""+Te]):n.hasOwnProperty(ae)&&Te!=null&&ae==="onScroll"&&hi("scroll",P)}switch(S){case"input":Ut(P),lt(P,K,!0);break;case"textarea":Ut(P),zr(P);break;case"select":case"option":break;default:typeof K.onClick=="function"&&(P.onclick=Pc)}P=N,p.updateQueue=P,P!==null&&(p.flags|=4)}else{ae=N.nodeType===9?N:N.ownerDocument,d==="http://www.w3.org/1999/xhtml"&&(d=cr(S)),d==="http://www.w3.org/1999/xhtml"?S==="script"?(d=ae.createElement("div"),d.innerHTML="<script><\/script>",d=d.removeChild(d.firstChild)):typeof P.is=="string"?d=ae.createElement(S,{is:P.is}):(d=ae.createElement(S),S==="select"&&(ae=d,P.multiple?ae.multiple=!0:P.size&&(ae.size=P.size))):d=ae.createElementNS(d,S),d[ge]=p,d[He]=P,kA(d,p,!1,!1),p.stateNode=d;e:{switch(ae=Jr(S,P),S){case"dialog":hi("cancel",d),hi("close",d),N=P;break;case"iframe":case"object":case"embed":hi("load",d),N=P;break;case"video":case"audio":for(N=0;N<Du.length;N++)hi(Du[N],d);N=P;break;case"source":hi("error",d),N=P;break;case"img":case"image":case"link":hi("error",d),hi("load",d),N=P;break;case"details":hi("toggle",d),N=P;break;case"input":Le(d,P),N=Ue(d,P),hi("invalid",d);break;case"option":N=P;break;case"select":d._wrapperState={wasMultiple:!!P.multiple},N=ce({},P,{value:void 0}),hi("invalid",d);break;case"textarea":Sr(d,P),N=it(d,P),hi("invalid",d);break;default:N=P}$r(S,N),Te=N;for(K in Te)if(Te.hasOwnProperty(K)){var Ie=Te[K];K==="style"?zt(d,Ie):K==="dangerouslySetInnerHTML"?(Ie=Ie?Ie.__html:void 0,Ie!=null&&Ir(d,Ie)):K==="children"?typeof Ie=="string"?(S!=="textarea"||Ie!=="")&&Hr(d,Ie):typeof Ie=="number"&&Hr(d,""+Ie):K!=="suppressContentEditableWarning"&&K!=="suppressHydrationWarning"&&K!=="autoFocus"&&(n.hasOwnProperty(K)?Ie!=null&&K==="onScroll"&&hi("scroll",d):Ie!=null&&D(d,K,Ie,ae))}switch(S){case"input":Ut(d),lt(d,P,!1);break;case"textarea":Ut(d),zr(d);break;case"option":P.value!=null&&d.setAttribute("value",""+et(P.value));break;case"select":d.multiple=!!P.multiple,K=P.value,K!=null?At(d,!!P.multiple,K,!1):P.defaultValue!=null&&At(d,!!P.multiple,P.defaultValue,!0);break;default:typeof N.onClick=="function"&&(d.onclick=Pc)}switch(S){case"button":case"input":case"select":case"textarea":P=!!P.autoFocus;break e;case"img":P=!0;break e;default:P=!1}}P&&(p.flags|=4)}p.ref!==null&&(p.flags|=512,p.flags|=2097152)}return ws(p),null;case 6:if(d&&p.stateNode!=null)IA(d,p,d.memoizedProps,P);else{if(typeof P!="string"&&p.stateNode===null)throw Error(t(166));if(S=Ld(rm.current),Ld(Bl.current),Tg(p)){if(P=p.stateNode,S=p.memoizedProps,P[ge]=p,(K=P.nodeValue!==S)&&(d=Va,d!==null))switch(d.tag){case 3:Dc(P.nodeValue,S,(d.mode&1)!==0);break;case 5:d.memoizedProps.suppressHydrationWarning!==!0&&Dc(P.nodeValue,S,(d.mode&1)!==0)}K&&(p.flags|=4)}else P=(S.nodeType===9?S:S.ownerDocument).createTextNode(P),P[ge]=p,p.stateNode=P}return ws(p),null;case 13:if(Wt(Gi),P=p.memoizedState,d===null||d.memoizedState!==null&&d.memoizedState.dehydrated!==null){if(ji&&qa!==null&&(p.mode&1)!==0&&(p.flags&128)===0)Rk(),qh(),p.flags|=98560,K=!1;else if(K=Tg(p),P!==null&&P.dehydrated!==null){if(d===null){if(!K)throw Error(t(318));if(K=p.memoizedState,K=K!==null?K.dehydrated:null,!K)throw Error(t(317));K[ge]=p}else qh(),(p.flags&128)===0&&(p.memoizedState=null),p.flags|=4;ws(p),K=!1}else Qo!==null&&(Sb(Qo),Qo=null),K=!0;if(!K)return p.flags&65536?p:null}return(p.flags&128)!==0?(p.lanes=S,p):(P=P!==null,P!==(d!==null&&d.memoizedState!==null)&&P&&(p.child.flags|=8192,(p.mode&1)!==0&&(d===null||(Gi.current&1)!==0?Pn===0&&(Pn=3):wb())),p.updateQueue!==null&&(p.flags|=4),ws(p),null);case 4:return Xh(),hb(d,p),d===null&&un(p.stateNode.containerInfo),ws(p),null;case 10:return $T(p.type._context),ws(p),null;case 17:return ma(p.type)&&gg(),ws(p),null;case 19:if(Wt(Gi),K=p.memoizedState,K===null)return ws(p),null;if(P=(p.flags&128)!==0,ae=K.rendering,ae===null)if(P)om(K,!1);else{if(Pn!==0||d!==null&&(d.flags&128)!==0)for(d=p.child;d!==null;){if(ae=kg(d),ae!==null){for(p.flags|=128,om(K,!1),P=ae.updateQueue,P!==null&&(p.updateQueue=P,p.flags|=4),p.subtreeFlags=0,P=S,S=p.child;S!==null;)K=S,d=P,K.flags&=14680066,ae=K.alternate,ae===null?(K.childLanes=0,K.lanes=d,K.child=null,K.subtreeFlags=0,K.memoizedProps=null,K.memoizedState=null,K.updateQueue=null,K.dependencies=null,K.stateNode=null):(K.childLanes=ae.childLanes,K.lanes=ae.lanes,K.child=ae.child,K.subtreeFlags=0,K.deletions=null,K.memoizedProps=ae.memoizedProps,K.memoizedState=ae.memoizedState,K.updateQueue=ae.updateQueue,K.type=ae.type,d=ae.dependencies,K.dependencies=d===null?null:{lanes:d.lanes,firstContext:d.firstContext}),S=S.sibling;return oi(Gi,Gi.current&1|2),p.child}d=d.sibling}K.tail!==null&&Xr()>Zh&&(p.flags|=128,P=!0,om(K,!1),p.lanes=4194304)}else{if(!P)if(d=kg(ae),d!==null){if(p.flags|=128,P=!0,S=d.updateQueue,S!==null&&(p.updateQueue=S,p.flags|=4),om(K,!0),K.tail===null&&K.tailMode==="hidden"&&!ae.alternate&&!ji)return ws(p),null}else 2*Xr()-K.renderingStartTime>Zh&&S!==1073741824&&(p.flags|=128,P=!0,om(K,!1),p.lanes=4194304);K.isBackwards?(ae.sibling=p.child,p.child=ae):(S=K.last,S!==null?S.sibling=ae:p.child=ae,K.last=ae)}return K.tail!==null?(p=K.tail,K.rendering=p,K.tail=p.sibling,K.renderingStartTime=Xr(),p.sibling=null,S=Gi.current,oi(Gi,P?S&1|2:S&1),p):(ws(p),null);case 22:case 23:return Eb(),P=p.memoizedState!==null,d!==null&&d.memoizedState!==null!==P&&(p.flags|=8192),P&&(p.mode&1)!==0?(Wa&1073741824)!==0&&(ws(p),p.subtreeFlags&6&&(p.flags|=8192)):ws(p),null;case 24:return null;case 25:return null}throw Error(t(156,p.tag))}function g7(d,p){switch(OT(p),p.tag){case 1:return ma(p.type)&&gg(),d=p.flags,d&65536?(p.flags=d&-65537|128,p):null;case 3:return Xh(),Wt(pa),Wt(Cs),GT(),d=p.flags,(d&65536)!==0&&(d&128)===0?(p.flags=d&-65537|128,p):null;case 5:return qT(p),null;case 13:if(Wt(Gi),d=p.memoizedState,d!==null&&d.dehydrated!==null){if(p.alternate===null)throw Error(t(340));qh()}return d=p.flags,d&65536?(p.flags=d&-65537|128,p):null;case 19:return Wt(Gi),null;case 4:return Xh(),null;case 10:return $T(p.type._context),null;case 22:case 23:return Eb(),null;case 24:return null;default:return null}}var Fg=!1,ks=!1,v7=typeof WeakSet=="function"?WeakSet:Set,Yt=null;function Qh(d,p){var S=d.ref;if(S!==null)if(typeof S=="function")try{S(null)}catch(P){Zi(d,p,P)}else S.current=null}function fb(d,p,S){try{S()}catch(P){Zi(d,p,P)}}var DA=!1;function y7(d,p){if(Lu=zo,d=Qe(),Zt(d)){if("selectionStart"in d)var S={start:d.selectionStart,end:d.selectionEnd};else e:{S=(S=d.ownerDocument)&&S.defaultView||window;var P=S.getSelection&&S.getSelection();if(P&&P.rangeCount!==0){S=P.anchorNode;var N=P.anchorOffset,K=P.focusNode;P=P.focusOffset;try{S.nodeType,K.nodeType}catch{S=null;break e}var ae=0,Te=-1,Ie=-1,Ke=0,St=0,wt=d,bt=null;t:for(;;){for(var qt;wt!==S||N!==0&&wt.nodeType!==3||(Te=ae+N),wt!==K||P!==0&&wt.nodeType!==3||(Ie=ae+P),wt.nodeType===3&&(ae+=wt.nodeValue.length),(qt=wt.firstChild)!==null;)bt=wt,wt=qt;for(;;){if(wt===d)break t;if(bt===S&&++Ke===N&&(Te=ae),bt===K&&++St===P&&(Ie=ae),(qt=wt.nextSibling)!==null)break;wt=bt,bt=wt.parentNode}wt=qt}S=Te===-1||Ie===-1?null:{start:Te,end:Ie}}else S=null}S=S||{start:0,end:0}}else S=null;for(f={focusedElem:d,selectionRange:S},zo=!1,Yt=p;Yt!==null;)if(p=Yt,d=p.child,(p.subtreeFlags&1028)!==0&&d!==null)d.return=p,Yt=d;else for(;Yt!==null;){p=Yt;try{var tr=p.alternate;if((p.flags&1024)!==0)switch(p.tag){case 0:case 11:case 15:break;case 1:if(tr!==null){var rr=tr.memoizedProps,dn=tr.memoizedState,$e=p.stateNode,Oe=$e.getSnapshotBeforeUpdate(p.elementType===p.type?rr:Jo(p.type,rr),dn);$e.__reactInternalSnapshotBeforeUpdate=Oe}break;case 3:var Ve=p.stateNode.containerInfo;Ve.nodeType===1?Ve.textContent="":Ve.nodeType===9&&Ve.documentElement&&Ve.removeChild(Ve.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(Lt){Zi(p,p.return,Lt)}if(d=p.sibling,d!==null){d.return=p.return,Yt=d;break}Yt=p.return}return tr=DA,DA=!1,tr}function lm(d,p,S){var P=p.updateQueue;if(P=P!==null?P.lastEffect:null,P!==null){var N=P=P.next;do{if((N.tag&d)===d){var K=N.destroy;N.destroy=void 0,K!==void 0&&fb(p,S,K)}N=N.next}while(N!==P)}}function Bg(d,p){if(p=p.updateQueue,p=p!==null?p.lastEffect:null,p!==null){var S=p=p.next;do{if((S.tag&d)===d){var P=S.create;S.destroy=P()}S=S.next}while(S!==p)}}function pb(d){var p=d.ref;if(p!==null){var S=d.stateNode;switch(d.tag){case 5:d=S;break;default:d=S}typeof p=="function"?p(d):p.current=d}}function PA(d){var p=d.alternate;p!==null&&(d.alternate=null,PA(p)),d.child=null,d.deletions=null,d.sibling=null,d.tag===5&&(p=d.stateNode,p!==null&&(delete p[ge],delete p[He],delete p[gt],delete p[Bt],delete p[Br])),d.stateNode=null,d.return=null,d.dependencies=null,d.memoizedProps=null,d.memoizedState=null,d.pendingProps=null,d.stateNode=null,d.updateQueue=null}function RA(d){return d.tag===5||d.tag===3||d.tag===4}function LA(d){e:for(;;){for(;d.sibling===null;){if(d.return===null||RA(d.return))return null;d=d.return}for(d.sibling.return=d.return,d=d.sibling;d.tag!==5&&d.tag!==6&&d.tag!==18;){if(d.flags&2||d.child===null||d.tag===4)continue e;d.child.return=d,d=d.child}if(!(d.flags&2))return d.stateNode}}function mb(d,p,S){var P=d.tag;if(P===5||P===6)d=d.stateNode,p?S.nodeType===8?S.parentNode.insertBefore(d,p):S.insertBefore(d,p):(S.nodeType===8?(p=S.parentNode,p.insertBefore(d,S)):(p=S,p.appendChild(d)),S=S._reactRootContainer,S!=null||p.onclick!==null||(p.onclick=Pc));else if(P!==4&&(d=d.child,d!==null))for(mb(d,p,S),d=d.sibling;d!==null;)mb(d,p,S),d=d.sibling}function gb(d,p,S){var P=d.tag;if(P===5||P===6)d=d.stateNode,p?S.insertBefore(d,p):S.appendChild(d);else if(P!==4&&(d=d.child,d!==null))for(gb(d,p,S),d=d.sibling;d!==null;)gb(d,p,S),d=d.sibling}var ss=null,Zo=!1;function Mc(d,p,S){for(S=S.child;S!==null;)OA(d,p,S),S=S.sibling}function OA(d,p,S){if(Ye&&typeof Ye.onCommitFiberUnmount=="function")try{Ye.onCommitFiberUnmount(Ge,S)}catch{}switch(S.tag){case 5:ks||Qh(S,p);case 6:var P=ss,N=Zo;ss=null,Mc(d,p,S),ss=P,Zo=N,ss!==null&&(Zo?(d=ss,S=S.stateNode,d.nodeType===8?d.parentNode.removeChild(S):d.removeChild(S)):ss.removeChild(S.stateNode));break;case 18:ss!==null&&(Zo?(d=ss,S=S.stateNode,d.nodeType===8?Y(d.parentNode,S):d.nodeType===1&&Y(d,S),ts(d)):Y(ss,S.stateNode));break;case 4:P=ss,N=Zo,ss=S.stateNode.containerInfo,Zo=!0,Mc(d,p,S),ss=P,Zo=N;break;case 0:case 11:case 14:case 15:if(!ks&&(P=S.updateQueue,P!==null&&(P=P.lastEffect,P!==null))){N=P=P.next;do{var K=N,ae=K.destroy;K=K.tag,ae!==void 0&&((K&2)!==0||(K&4)!==0)&&fb(S,p,ae),N=N.next}while(N!==P)}Mc(d,p,S);break;case 1:if(!ks&&(Qh(S,p),P=S.stateNode,typeof P.componentWillUnmount=="function"))try{P.props=S.memoizedProps,P.state=S.memoizedState,P.componentWillUnmount()}catch(Te){Zi(S,p,Te)}Mc(d,p,S);break;case 21:Mc(d,p,S);break;case 22:S.mode&1?(ks=(P=ks)||S.memoizedState!==null,Mc(d,p,S),ks=P):Mc(d,p,S);break;default:Mc(d,p,S)}}function MA(d){var p=d.updateQueue;if(p!==null){d.updateQueue=null;var S=d.stateNode;S===null&&(S=d.stateNode=new v7),p.forEach(function(P){var N=k7.bind(null,d,P);S.has(P)||(S.add(P),P.then(N,N))})}}function el(d,p){var S=p.deletions;if(S!==null)for(var P=0;P<S.length;P++){var N=S[P];try{var K=d,ae=p,Te=ae;e:for(;Te!==null;){switch(Te.tag){case 5:ss=Te.stateNode,Zo=!1;break e;case 3:ss=Te.stateNode.containerInfo,Zo=!0;break e;case 4:ss=Te.stateNode.containerInfo,Zo=!0;break e}Te=Te.return}if(ss===null)throw Error(t(160));OA(K,ae,N),ss=null,Zo=!1;var Ie=N.alternate;Ie!==null&&(Ie.return=null),N.return=null}catch(Ke){Zi(N,p,Ke)}}if(p.subtreeFlags&12854)for(p=p.child;p!==null;)FA(p,d),p=p.sibling}function FA(d,p){var S=d.alternate,P=d.flags;switch(d.tag){case 0:case 11:case 14:case 15:if(el(p,d),Ul(d),P&4){try{lm(3,d,d.return),Bg(3,d)}catch(rr){Zi(d,d.return,rr)}try{lm(5,d,d.return)}catch(rr){Zi(d,d.return,rr)}}break;case 1:el(p,d),Ul(d),P&512&&S!==null&&Qh(S,S.return);break;case 5:if(el(p,d),Ul(d),P&512&&S!==null&&Qh(S,S.return),d.flags&32){var N=d.stateNode;try{Hr(N,"")}catch(rr){Zi(d,d.return,rr)}}if(P&4&&(N=d.stateNode,N!=null)){var K=d.memoizedProps,ae=S!==null?S.memoizedProps:K,Te=d.type,Ie=d.updateQueue;if(d.updateQueue=null,Ie!==null)try{Te==="input"&&K.type==="radio"&&K.name!=null&&Ne(N,K),Jr(Te,ae);var Ke=Jr(Te,K);for(ae=0;ae<Ie.length;ae+=2){var St=Ie[ae],wt=Ie[ae+1];St==="style"?zt(N,wt):St==="dangerouslySetInnerHTML"?Ir(N,wt):St==="children"?Hr(N,wt):D(N,St,wt,Ke)}switch(Te){case"input":rt(N,K);break;case"textarea":xr(N,K);break;case"select":var bt=N._wrapperState.wasMultiple;N._wrapperState.wasMultiple=!!K.multiple;var qt=K.value;qt!=null?At(N,!!K.multiple,qt,!1):bt!==!!K.multiple&&(K.defaultValue!=null?At(N,!!K.multiple,K.defaultValue,!0):At(N,!!K.multiple,K.multiple?[]:"",!1))}N[He]=K}catch(rr){Zi(d,d.return,rr)}}break;case 6:if(el(p,d),Ul(d),P&4){if(d.stateNode===null)throw Error(t(162));N=d.stateNode,K=d.memoizedProps;try{N.nodeValue=K}catch(rr){Zi(d,d.return,rr)}}break;case 3:if(el(p,d),Ul(d),P&4&&S!==null&&S.memoizedState.isDehydrated)try{ts(p.containerInfo)}catch(rr){Zi(d,d.return,rr)}break;case 4:el(p,d),Ul(d);break;case 13:el(p,d),Ul(d),N=d.child,N.flags&8192&&(K=N.memoizedState!==null,N.stateNode.isHidden=K,!K||N.alternate!==null&&N.alternate.memoizedState!==null||(_b=Xr())),P&4&&MA(d);break;case 22:if(St=S!==null&&S.memoizedState!==null,d.mode&1?(ks=(Ke=ks)||St,el(p,d),ks=Ke):el(p,d),Ul(d),P&8192){if(Ke=d.memoizedState!==null,(d.stateNode.isHidden=Ke)&&!St&&(d.mode&1)!==0)for(Yt=d,St=d.child;St!==null;){for(wt=Yt=St;Yt!==null;){switch(bt=Yt,qt=bt.child,bt.tag){case 0:case 11:case 14:case 15:lm(4,bt,bt.return);break;case 1:Qh(bt,bt.return);var tr=bt.stateNode;if(typeof tr.componentWillUnmount=="function"){P=bt,S=bt.return;try{p=P,tr.props=p.memoizedProps,tr.state=p.memoizedState,tr.componentWillUnmount()}catch(rr){Zi(P,S,rr)}}break;case 5:Qh(bt,bt.return);break;case 22:if(bt.memoizedState!==null){UA(wt);continue}}qt!==null?(qt.return=bt,Yt=qt):UA(wt)}St=St.sibling}e:for(St=null,wt=d;;){if(wt.tag===5){if(St===null){St=wt;try{N=wt.stateNode,Ke?(K=N.style,typeof K.setProperty=="function"?K.setProperty("display","none","important"):K.display="none"):(Te=wt.stateNode,Ie=wt.memoizedProps.style,ae=Ie!=null&&Ie.hasOwnProperty("display")?Ie.display:null,Te.style.display=Bi("display",ae))}catch(rr){Zi(d,d.return,rr)}}}else if(wt.tag===6){if(St===null)try{wt.stateNode.nodeValue=Ke?"":wt.memoizedProps}catch(rr){Zi(d,d.return,rr)}}else if((wt.tag!==22&&wt.tag!==23||wt.memoizedState===null||wt===d)&&wt.child!==null){wt.child.return=wt,wt=wt.child;continue}if(wt===d)break e;for(;wt.sibling===null;){if(wt.return===null||wt.return===d)break e;St===wt&&(St=null),wt=wt.return}St===wt&&(St=null),wt.sibling.return=wt.return,wt=wt.sibling}}break;case 19:el(p,d),Ul(d),P&4&&MA(d);break;case 21:break;default:el(p,d),Ul(d)}}function Ul(d){var p=d.flags;if(p&2){try{e:{for(var S=d.return;S!==null;){if(RA(S)){var P=S;break e}S=S.return}throw Error(t(160))}switch(P.tag){case 5:var N=P.stateNode;P.flags&32&&(Hr(N,""),P.flags&=-33);var K=LA(d);gb(d,K,N);break;case 3:case 4:var ae=P.stateNode.containerInfo,Te=LA(d);mb(d,Te,ae);break;default:throw Error(t(161))}}catch(Ie){Zi(d,d.return,Ie)}d.flags&=-3}p&4096&&(d.flags&=-4097)}function _7(d,p,S){Yt=d,BA(d)}function BA(d,p,S){for(var P=(d.mode&1)!==0;Yt!==null;){var N=Yt,K=N.child;if(N.tag===22&&P){var ae=N.memoizedState!==null||Fg;if(!ae){var Te=N.alternate,Ie=Te!==null&&Te.memoizedState!==null||ks;Te=Fg;var Ke=ks;if(Fg=ae,(ks=Ie)&&!Ke)for(Yt=N;Yt!==null;)ae=Yt,Ie=ae.child,ae.tag===22&&ae.memoizedState!==null?$A(N):Ie!==null?(Ie.return=ae,Yt=Ie):$A(N);for(;K!==null;)Yt=K,BA(K),K=K.sibling;Yt=N,Fg=Te,ks=Ke}NA(d)}else(N.subtreeFlags&8772)!==0&&K!==null?(K.return=N,Yt=K):NA(d)}}function NA(d){for(;Yt!==null;){var p=Yt;if((p.flags&8772)!==0){var S=p.alternate;try{if((p.flags&8772)!==0)switch(p.tag){case 0:case 11:case 15:ks||Bg(5,p);break;case 1:var P=p.stateNode;if(p.flags&4&&!ks)if(S===null)P.componentDidMount();else{var N=p.elementType===p.type?S.memoizedProps:Jo(p.type,S.memoizedProps);P.componentDidUpdate(N,S.memoizedState,P.__reactInternalSnapshotBeforeUpdate)}var K=p.updateQueue;K!==null&&Uk(p,K,P);break;case 3:var ae=p.updateQueue;if(ae!==null){if(S=null,p.child!==null)switch(p.child.tag){case 5:S=p.child.stateNode;break;case 1:S=p.child.stateNode}Uk(p,ae,S)}break;case 5:var Te=p.stateNode;if(S===null&&p.flags&4){S=Te;var Ie=p.memoizedProps;switch(p.type){case"button":case"input":case"select":case"textarea":Ie.autoFocus&&S.focus();break;case"img":Ie.src&&(S.src=Ie.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(p.memoizedState===null){var Ke=p.alternate;if(Ke!==null){var St=Ke.memoizedState;if(St!==null){var wt=St.dehydrated;wt!==null&&ts(wt)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}ks||p.flags&512&&pb(p)}catch(bt){Zi(p,p.return,bt)}}if(p===d){Yt=null;break}if(S=p.sibling,S!==null){S.return=p.return,Yt=S;break}Yt=p.return}}function UA(d){for(;Yt!==null;){var p=Yt;if(p===d){Yt=null;break}var S=p.sibling;if(S!==null){S.return=p.return,Yt=S;break}Yt=p.return}}function $A(d){for(;Yt!==null;){var p=Yt;try{switch(p.tag){case 0:case 11:case 15:var S=p.return;try{Bg(4,p)}catch(Ie){Zi(p,S,Ie)}break;case 1:var P=p.stateNode;if(typeof P.componentDidMount=="function"){var N=p.return;try{P.componentDidMount()}catch(Ie){Zi(p,N,Ie)}}var K=p.return;try{pb(p)}catch(Ie){Zi(p,K,Ie)}break;case 5:var ae=p.return;try{pb(p)}catch(Ie){Zi(p,ae,Ie)}}}catch(Ie){Zi(p,p.return,Ie)}if(p===d){Yt=null;break}var Te=p.sibling;if(Te!==null){Te.return=p.return,Yt=Te;break}Yt=p.return}}var x7=Math.ceil,Ng=R.ReactCurrentDispatcher,vb=R.ReactCurrentOwner,So=R.ReactCurrentBatchConfig,ai=0,Hn=null,xn=null,as=0,Wa=0,Jh=fa(0),Pn=0,um=null,Md=0,Ug=0,yb=0,cm=null,va=null,_b=0,Zh=1/0,ju=null,$g=!1,xb=null,Fc=null,jg=!1,Bc=null,zg=0,dm=0,Tb=null,Hg=-1,Vg=0;function js(){return(ai&6)!==0?Xr():Hg!==-1?Hg:Hg=Xr()}function Nc(d){return(d.mode&1)===0?1:(ai&2)!==0&&as!==0?as&-as:i7.transition!==null?(Vg===0&&(Vg=pc()),Vg):(d=Fr,d!==0||(d=window.event,d=d===void 0?16:Fs(d.type)),d)}function tl(d,p,S,P){if(50<dm)throw dm=0,Tb=null,Error(t(185));Mn(d,S,P),((ai&2)===0||d!==Hn)&&(d===Hn&&((ai&2)===0&&(Ug|=S),Pn===4&&Uc(d,as)),ya(d,P),S===1&&ai===0&&(p.mode&1)===0&&(Zh=Xr()+500,yg&&Rc()))}function ya(d,p){var S=d.callbackNode;Pi(d,p);var P=Rr(d,d===Hn?as:0);if(P===0)S!==null&&vn(S),d.callbackNode=null,d.callbackPriority=0;else if(p=P&-P,d.callbackPriority!==p){if(S!=null&&vn(S),p===1)d.tag===0?r7(zA.bind(null,d)):kk(zA.bind(null,d)),I(function(){(ai&6)===0&&Rc()}),S=null;else{switch(es(P)){case 1:S=an;break;case 4:S=Ji;break;case 16:S=Cr;break;case 536870912:S=Fe;break;default:S=Cr}S=YA(S,jA.bind(null,d))}d.callbackPriority=p,d.callbackNode=S}}function jA(d,p){if(Hg=-1,Vg=0,(ai&6)!==0)throw Error(t(327));var S=d.callbackNode;if(ef()&&d.callbackNode!==S)return null;var P=Rr(d,d===Hn?as:0);if(P===0)return null;if((P&30)!==0||(P&d.expiredLanes)!==0||p)p=qg(d,P);else{p=P;var N=ai;ai|=2;var K=VA();(Hn!==d||as!==p)&&(ju=null,Zh=Xr()+500,Bd(d,p));do try{S7();break}catch(Te){HA(d,Te)}while(!0);UT(),Ng.current=K,ai=N,xn!==null?p=0:(Hn=null,as=0,p=Pn)}if(p!==0){if(p===2&&(N=ys(d),N!==0&&(P=N,p=bb(d,N))),p===1)throw S=um,Bd(d,0),Uc(d,P),ya(d,Xr()),S;if(p===6)Uc(d,P);else{if(N=d.current.alternate,(P&30)===0&&!T7(N)&&(p=qg(d,P),p===2&&(K=ys(d),K!==0&&(P=K,p=bb(d,K))),p===1))throw S=um,Bd(d,0),Uc(d,P),ya(d,Xr()),S;switch(d.finishedWork=N,d.finishedLanes=P,p){case 0:case 1:throw Error(t(345));case 2:Nd(d,va,ju);break;case 3:if(Uc(d,P),(P&130023424)===P&&(p=_b+500-Xr(),10<p)){if(Rr(d,0)!==0)break;if(N=d.suspendedLanes,(N&P)!==P){js(),d.pingedLanes|=d.suspendedLanes&N;break}d.timeoutHandle=b(Nd.bind(null,d,va,ju),p);break}Nd(d,va,ju);break;case 4:if(Uc(d,P),(P&4194240)===P)break;for(p=d.eventTimes,N=-1;0<P;){var ae=31-Tt(P);K=1<<ae,ae=p[ae],ae>N&&(N=ae),P&=~K}if(P=N,P=Xr()-P,P=(120>P?120:480>P?480:1080>P?1080:1920>P?1920:3e3>P?3e3:4320>P?4320:1960*x7(P/1960))-P,10<P){d.timeoutHandle=b(Nd.bind(null,d,va,ju),P);break}Nd(d,va,ju);break;case 5:Nd(d,va,ju);break;default:throw Error(t(329))}}}return ya(d,Xr()),d.callbackNode===S?jA.bind(null,d):null}function bb(d,p){var S=cm;return d.current.memoizedState.isDehydrated&&(Bd(d,p).flags|=256),d=qg(d,p),d!==2&&(p=va,va=S,p!==null&&Sb(p)),d}function Sb(d){va===null?va=d:va.push.apply(va,d)}function T7(d){for(var p=d;;){if(p.flags&16384){var S=p.updateQueue;if(S!==null&&(S=S.stores,S!==null))for(var P=0;P<S.length;P++){var N=S[P],K=N.getSnapshot;N=N.value;try{if(!be(K(),N))return!1}catch{return!1}}}if(S=p.child,p.subtreeFlags&16384&&S!==null)S.return=p,p=S;else{if(p===d)break;for(;p.sibling===null;){if(p.return===null||p.return===d)return!0;p=p.return}p.sibling.return=p.return,p=p.sibling}}return!0}function Uc(d,p){for(p&=~yb,p&=~Ug,d.suspendedLanes|=p,d.pingedLanes&=~p,d=d.expirationTimes;0<p;){var S=31-Tt(p),P=1<<S;d[S]=-1,p&=~P}}function zA(d){if((ai&6)!==0)throw Error(t(327));ef();var p=Rr(d,0);if((p&1)===0)return ya(d,Xr()),null;var S=qg(d,p);if(d.tag!==0&&S===2){var P=ys(d);P!==0&&(p=P,S=bb(d,P))}if(S===1)throw S=um,Bd(d,0),Uc(d,p),ya(d,Xr()),S;if(S===6)throw Error(t(345));return d.finishedWork=d.current.alternate,d.finishedLanes=p,Nd(d,va,ju),ya(d,Xr()),null}function Cb(d,p){var S=ai;ai|=1;try{return d(p)}finally{ai=S,ai===0&&(Zh=Xr()+500,yg&&Rc())}}function Fd(d){Bc!==null&&Bc.tag===0&&(ai&6)===0&&ef();var p=ai;ai|=1;var S=So.transition,P=Fr;try{if(So.transition=null,Fr=1,d)return d()}finally{Fr=P,So.transition=S,ai=p,(ai&6)===0&&Rc()}}function Eb(){Wa=Jh.current,Wt(Jh)}function Bd(d,p){d.finishedWork=null,d.finishedLanes=0;var S=d.timeoutHandle;if(S!==-1&&(d.timeoutHandle=-1,x(S)),xn!==null)for(S=xn.return;S!==null;){var P=S;switch(OT(P),P.tag){case 1:P=P.type.childContextTypes,P!=null&&gg();break;case 3:Xh(),Wt(pa),Wt(Cs),GT();break;case 5:qT(P);break;case 4:Xh();break;case 13:Wt(Gi);break;case 19:Wt(Gi);break;case 10:$T(P.type._context);break;case 22:case 23:Eb()}S=S.return}if(Hn=d,xn=d=$c(d.current,null),as=Wa=p,Pn=0,um=null,yb=Ug=Md=0,va=cm=null,Rd!==null){for(p=0;p<Rd.length;p++)if(S=Rd[p],P=S.interleaved,P!==null){S.interleaved=null;var N=P.next,K=S.pending;if(K!==null){var ae=K.next;K.next=N,P.next=ae}S.pending=P}Rd=null}return d}function HA(d,p){do{var S=xn;try{if(UT(),Ag.current=Rg,Ig){for(var P=Ki.memoizedState;P!==null;){var N=P.queue;N!==null&&(N.pending=null),P=P.next}Ig=!1}if(Od=0,zn=Dn=Ki=null,im=!1,nm=0,vb.current=null,S===null||S.return===null){Pn=1,um=p,xn=null;break}e:{var K=d,ae=S.return,Te=S,Ie=p;if(p=as,Te.flags|=32768,Ie!==null&&typeof Ie=="object"&&typeof Ie.then=="function"){var Ke=Ie,St=Te,wt=St.tag;if((St.mode&1)===0&&(wt===0||wt===11||wt===15)){var bt=St.alternate;bt?(St.updateQueue=bt.updateQueue,St.memoizedState=bt.memoizedState,St.lanes=bt.lanes):(St.updateQueue=null,St.memoizedState=null)}var qt=pA(ae);if(qt!==null){qt.flags&=-257,mA(qt,ae,Te,K,p),qt.mode&1&&fA(K,Ke,p),p=qt,Ie=Ke;var tr=p.updateQueue;if(tr===null){var rr=new Set;rr.add(Ie),p.updateQueue=rr}else tr.add(Ie);break e}else{if((p&1)===0){fA(K,Ke,p),wb();break e}Ie=Error(t(426))}}else if(ji&&Te.mode&1){var dn=pA(ae);if(dn!==null){(dn.flags&65536)===0&&(dn.flags|=256),mA(dn,ae,Te,K,p),BT(Yh(Ie,Te));break e}}K=Ie=Yh(Ie,Te),Pn!==4&&(Pn=2),cm===null?cm=[K]:cm.push(K),K=ae;do{switch(K.tag){case 3:K.flags|=65536,p&=-p,K.lanes|=p;var $e=dA(K,Ie,p);Nk(K,$e);break e;case 1:Te=Ie;var Oe=K.type,Ve=K.stateNode;if((K.flags&128)===0&&(typeof Oe.getDerivedStateFromError=="function"||Ve!==null&&typeof Ve.componentDidCatch=="function"&&(Fc===null||!Fc.has(Ve)))){K.flags|=65536,p&=-p,K.lanes|=p;var Lt=hA(K,Te,p);Nk(K,Lt);break e}}K=K.return}while(K!==null)}WA(S)}catch(nr){p=nr,xn===S&&S!==null&&(xn=S=S.return);continue}break}while(!0)}function VA(){var d=Ng.current;return Ng.current=Rg,d===null?Rg:d}function wb(){(Pn===0||Pn===3||Pn===2)&&(Pn=4),Hn===null||(Md&268435455)===0&&(Ug&268435455)===0||Uc(Hn,as)}function qg(d,p){var S=ai;ai|=2;var P=VA();(Hn!==d||as!==p)&&(ju=null,Bd(d,p));do try{b7();break}catch(N){HA(d,N)}while(!0);if(UT(),ai=S,Ng.current=P,xn!==null)throw Error(t(261));return Hn=null,as=0,Pn}function b7(){for(;xn!==null;)qA(xn)}function S7(){for(;xn!==null&&!ui();)qA(xn)}function qA(d){var p=XA(d.alternate,d,Wa);d.memoizedProps=d.pendingProps,p===null?WA(d):xn=p,vb.current=null}function WA(d){var p=d;do{var S=p.alternate;if(d=p.return,(p.flags&32768)===0){if(S=m7(S,p,Wa),S!==null){xn=S;return}}else{if(S=g7(S,p),S!==null){S.flags&=32767,xn=S;return}if(d!==null)d.flags|=32768,d.subtreeFlags=0,d.deletions=null;else{Pn=6,xn=null;return}}if(p=p.sibling,p!==null){xn=p;return}xn=p=d}while(p!==null);Pn===0&&(Pn=5)}function Nd(d,p,S){var P=Fr,N=So.transition;try{So.transition=null,Fr=1,C7(d,p,S,P)}finally{So.transition=N,Fr=P}return null}function C7(d,p,S,P){do ef();while(Bc!==null);if((ai&6)!==0)throw Error(t(327));S=d.finishedWork;var N=d.finishedLanes;if(S===null)return null;if(d.finishedWork=null,d.finishedLanes=0,S===d.current)throw Error(t(177));d.callbackNode=null,d.callbackPriority=0;var K=S.lanes|S.childLanes;if(bi(d,K),d===Hn&&(xn=Hn=null,as=0),(S.subtreeFlags&2064)===0&&(S.flags&2064)===0||jg||(jg=!0,YA(Cr,function(){return ef(),null})),K=(S.flags&15990)!==0,(S.subtreeFlags&15990)!==0||K){K=So.transition,So.transition=null;var ae=Fr;Fr=1;var Te=ai;ai|=4,vb.current=null,y7(d,S),FA(S,d),xi(f),zo=!!Lu,f=Lu=null,d.current=S,_7(S),gs(),ai=Te,Fr=ae,So.transition=K}else d.current=S;if(jg&&(jg=!1,Bc=d,zg=N),K=d.pendingLanes,K===0&&(Fc=null),ot(S.stateNode),ya(d,Xr()),p!==null)for(P=d.onRecoverableError,S=0;S<p.length;S++)N=p[S],P(N.value,{componentStack:N.stack,digest:N.digest});if($g)throw $g=!1,d=xb,xb=null,d;return(zg&1)!==0&&d.tag!==0&&ef(),K=d.pendingLanes,(K&1)!==0?d===Tb?dm++:(dm=0,Tb=d):dm=0,Rc(),null}function ef(){if(Bc!==null){var d=es(zg),p=So.transition,S=Fr;try{if(So.transition=null,Fr=16>d?16:d,Bc===null)var P=!1;else{if(d=Bc,Bc=null,zg=0,(ai&6)!==0)throw Error(t(331));var N=ai;for(ai|=4,Yt=d.current;Yt!==null;){var K=Yt,ae=K.child;if((Yt.flags&16)!==0){var Te=K.deletions;if(Te!==null){for(var Ie=0;Ie<Te.length;Ie++){var Ke=Te[Ie];for(Yt=Ke;Yt!==null;){var St=Yt;switch(St.tag){case 0:case 11:case 15:lm(8,St,K)}var wt=St.child;if(wt!==null)wt.return=St,Yt=wt;else for(;Yt!==null;){St=Yt;var bt=St.sibling,qt=St.return;if(PA(St),St===Ke){Yt=null;break}if(bt!==null){bt.return=qt,Yt=bt;break}Yt=qt}}}var tr=K.alternate;if(tr!==null){var rr=tr.child;if(rr!==null){tr.child=null;do{var dn=rr.sibling;rr.sibling=null,rr=dn}while(rr!==null)}}Yt=K}}if((K.subtreeFlags&2064)!==0&&ae!==null)ae.return=K,Yt=ae;else e:for(;Yt!==null;){if(K=Yt,(K.flags&2048)!==0)switch(K.tag){case 0:case 11:case 15:lm(9,K,K.return)}var $e=K.sibling;if($e!==null){$e.return=K.return,Yt=$e;break e}Yt=K.return}}var Oe=d.current;for(Yt=Oe;Yt!==null;){ae=Yt;var Ve=ae.child;if((ae.subtreeFlags&2064)!==0&&Ve!==null)Ve.return=ae,Yt=Ve;else e:for(ae=Oe;Yt!==null;){if(Te=Yt,(Te.flags&2048)!==0)try{switch(Te.tag){case 0:case 11:case 15:Bg(9,Te)}}catch(nr){Zi(Te,Te.return,nr)}if(Te===ae){Yt=null;break e}var Lt=Te.sibling;if(Lt!==null){Lt.return=Te.return,Yt=Lt;break e}Yt=Te.return}}if(ai=N,Rc(),Ye&&typeof Ye.onPostCommitFiberRoot=="function")try{Ye.onPostCommitFiberRoot(Ge,d)}catch{}P=!0}return P}finally{Fr=S,So.transition=p}}return!1}function GA(d,p,S){p=Yh(S,p),p=dA(d,p,1),d=Oc(d,p,1),p=js(),d!==null&&(Mn(d,1,p),ya(d,p))}function Zi(d,p,S){if(d.tag===3)GA(d,d,S);else for(;p!==null;){if(p.tag===3){GA(p,d,S);break}else if(p.tag===1){var P=p.stateNode;if(typeof p.type.getDerivedStateFromError=="function"||typeof P.componentDidCatch=="function"&&(Fc===null||!Fc.has(P))){d=Yh(S,d),d=hA(p,d,1),p=Oc(p,d,1),d=js(),p!==null&&(Mn(p,1,d),ya(p,d));break}}p=p.return}}function E7(d,p,S){var P=d.pingCache;P!==null&&P.delete(p),p=js(),d.pingedLanes|=d.suspendedLanes&S,Hn===d&&(as&S)===S&&(Pn===4||Pn===3&&(as&130023424)===as&&500>Xr()-_b?Bd(d,0):yb|=S),ya(d,p)}function KA(d,p){p===0&&((d.mode&1)===0?p=1:(p=yr,yr<<=1,(yr&130023424)===0&&(yr=4194304)));var S=js();d=Nu(d,p),d!==null&&(Mn(d,p,S),ya(d,S))}function w7(d){var p=d.memoizedState,S=0;p!==null&&(S=p.retryLane),KA(d,S)}function k7(d,p){var S=0;switch(d.tag){case 13:var P=d.stateNode,N=d.memoizedState;N!==null&&(S=N.retryLane);break;case 19:P=d.stateNode;break;default:throw Error(t(314))}P!==null&&P.delete(p),KA(d,S)}var XA;XA=function(d,p,S){if(d!==null)if(d.memoizedProps!==p.pendingProps||pa.current)ga=!0;else{if((d.lanes&S)===0&&(p.flags&128)===0)return ga=!1,p7(d,p,S);ga=(d.flags&131072)!==0}else ga=!1,ji&&(p.flags&1048576)!==0&&Ak(p,xg,p.index);switch(p.lanes=0,p.tag){case 2:var P=p.type;Mg(d,p),d=p.pendingProps;var N=zh(p,Cs.current);Kh(p,S),N=YT(null,p,P,d,N,S);var K=QT();return p.flags|=1,typeof N=="object"&&N!==null&&typeof N.render=="function"&&N.$$typeof===void 0?(p.tag=1,p.memoizedState=null,p.updateQueue=null,ma(P)?(K=!0,vg(p)):K=!1,p.memoizedState=N.state!==null&&N.state!==void 0?N.state:null,HT(p),N.updater=Lg,p.stateNode=N,N._reactInternals=p,ib(p,P,d,S),p=ob(null,p,P,!0,K,S)):(p.tag=0,ji&&K&&LT(p),$s(null,p,N,S),p=p.child),p;case 16:P=p.elementType;e:{switch(Mg(d,p),d=p.pendingProps,N=P._init,P=N(P._payload),p.type=P,N=p.tag=I7(P),d=Jo(P,d),N){case 0:p=ab(null,p,P,d,S);break e;case 1:p=TA(null,p,P,d,S);break e;case 11:p=gA(null,p,P,d,S);break e;case 14:p=vA(null,p,P,Jo(P.type,d),S);break e}throw Error(t(306,P,""))}return p;case 0:return P=p.type,N=p.pendingProps,N=p.elementType===P?N:Jo(P,N),ab(d,p,P,N,S);case 1:return P=p.type,N=p.pendingProps,N=p.elementType===P?N:Jo(P,N),TA(d,p,P,N,S);case 3:e:{if(bA(p),d===null)throw Error(t(387));P=p.pendingProps,K=p.memoizedState,N=K.element,Bk(d,p),wg(p,P,null,S);var ae=p.memoizedState;if(P=ae.element,K.isDehydrated)if(K={element:P,isDehydrated:!1,cache:ae.cache,pendingSuspenseBoundaries:ae.pendingSuspenseBoundaries,transitions:ae.transitions},p.updateQueue.baseState=K,p.memoizedState=K,p.flags&256){N=Yh(Error(t(423)),p),p=SA(d,p,P,S,N);break e}else if(P!==N){N=Yh(Error(t(424)),p),p=SA(d,p,P,S,N);break e}else for(qa=Q(p.stateNode.containerInfo.firstChild),Va=p,ji=!0,Qo=null,S=Mk(p,null,P,S),p.child=S;S;)S.flags=S.flags&-3|4096,S=S.sibling;else{if(qh(),P===N){p=$u(d,p,S);break e}$s(d,p,P,S)}p=p.child}return p;case 5:return $k(p),d===null&&FT(p),P=p.type,N=p.pendingProps,K=d!==null?d.memoizedProps:null,ae=N.children,v(P,N)?ae=null:K!==null&&v(P,K)&&(p.flags|=32),xA(d,p),$s(d,p,ae,S),p.child;case 6:return d===null&&FT(p),null;case 13:return CA(d,p,S);case 4:return VT(p,p.stateNode.containerInfo),P=p.pendingProps,d===null?p.child=Wh(p,null,P,S):$s(d,p,P,S),p.child;case 11:return P=p.type,N=p.pendingProps,N=p.elementType===P?N:Jo(P,N),gA(d,p,P,N,S);case 7:return $s(d,p,p.pendingProps,S),p.child;case 8:return $s(d,p,p.pendingProps.children,S),p.child;case 12:return $s(d,p,p.pendingProps.children,S),p.child;case 10:e:{if(P=p.type._context,N=p.pendingProps,K=p.memoizedProps,ae=N.value,oi(Sg,P._currentValue),P._currentValue=ae,K!==null)if(be(K.value,ae)){if(K.children===N.children&&!pa.current){p=$u(d,p,S);break e}}else for(K=p.child,K!==null&&(K.return=p);K!==null;){var Te=K.dependencies;if(Te!==null){ae=K.child;for(var Ie=Te.firstContext;Ie!==null;){if(Ie.context===P){if(K.tag===1){Ie=Uu(-1,S&-S),Ie.tag=2;var Ke=K.updateQueue;if(Ke!==null){Ke=Ke.shared;var St=Ke.pending;St===null?Ie.next=Ie:(Ie.next=St.next,St.next=Ie),Ke.pending=Ie}}K.lanes|=S,Ie=K.alternate,Ie!==null&&(Ie.lanes|=S),jT(K.return,S,p),Te.lanes|=S;break}Ie=Ie.next}}else if(K.tag===10)ae=K.type===p.type?null:K.child;else if(K.tag===18){if(ae=K.return,ae===null)throw Error(t(341));ae.lanes|=S,Te=ae.alternate,Te!==null&&(Te.lanes|=S),jT(ae,S,p),ae=K.sibling}else ae=K.child;if(ae!==null)ae.return=K;else for(ae=K;ae!==null;){if(ae===p){ae=null;break}if(K=ae.sibling,K!==null){K.return=ae.return,ae=K;break}ae=ae.return}K=ae}$s(d,p,N.children,S),p=p.child}return p;case 9:return N=p.type,P=p.pendingProps.children,Kh(p,S),N=To(N),P=P(N),p.flags|=1,$s(d,p,P,S),p.child;case 14:return P=p.type,N=Jo(P,p.pendingProps),N=Jo(P.type,N),vA(d,p,P,N,S);case 15:return yA(d,p,p.type,p.pendingProps,S);case 17:return P=p.type,N=p.pendingProps,N=p.elementType===P?N:Jo(P,N),Mg(d,p),p.tag=1,ma(P)?(d=!0,vg(p)):d=!1,Kh(p,S),uA(p,P,N),ib(p,P,N,S),ob(null,p,P,!0,d,S);case 19:return wA(d,p,S);case 22:return _A(d,p,S)}throw Error(t(156,p.tag))};function YA(d,p){return Qt(d,p)}function A7(d,p,S,P){this.tag=d,this.key=S,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=p,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=P,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Co(d,p,S,P){return new A7(d,p,S,P)}function kb(d){return d=d.prototype,!(!d||!d.isReactComponent)}function I7(d){if(typeof d=="function")return kb(d)?1:0;if(d!=null){if(d=d.$$typeof,d===G)return 11;if(d===se)return 14}return 2}function $c(d,p){var S=d.alternate;return S===null?(S=Co(d.tag,p,d.key,d.mode),S.elementType=d.elementType,S.type=d.type,S.stateNode=d.stateNode,S.alternate=d,d.alternate=S):(S.pendingProps=p,S.type=d.type,S.flags=0,S.subtreeFlags=0,S.deletions=null),S.flags=d.flags&14680064,S.childLanes=d.childLanes,S.lanes=d.lanes,S.child=d.child,S.memoizedProps=d.memoizedProps,S.memoizedState=d.memoizedState,S.updateQueue=d.updateQueue,p=d.dependencies,S.dependencies=p===null?null:{lanes:p.lanes,firstContext:p.firstContext},S.sibling=d.sibling,S.index=d.index,S.ref=d.ref,S}function Wg(d,p,S,P,N,K){var ae=2;if(P=d,typeof d=="function")kb(d)&&(ae=1);else if(typeof d=="string")ae=5;else e:switch(d){case F:return Ud(S.children,N,K,p);case B:ae=8,N|=8;break;case M:return d=Co(12,S,p,N|2),d.elementType=M,d.lanes=K,d;case H:return d=Co(13,S,p,N),d.elementType=H,d.lanes=K,d;case re:return d=Co(19,S,p,N),d.elementType=re,d.lanes=K,d;case me:return Gg(S,N,K,p);default:if(typeof d=="object"&&d!==null)switch(d.$$typeof){case k:ae=10;break e;case q:ae=9;break e;case G:ae=11;break e;case se:ae=14;break e;case de:ae=16,P=null;break e}throw Error(t(130,d==null?d:typeof d,""))}return p=Co(ae,S,p,N),p.elementType=d,p.type=P,p.lanes=K,p}function Ud(d,p,S,P){return d=Co(7,d,P,p),d.lanes=S,d}function Gg(d,p,S,P){return d=Co(22,d,P,p),d.elementType=me,d.lanes=S,d.stateNode={isHidden:!1},d}function Ab(d,p,S){return d=Co(6,d,null,p),d.lanes=S,d}function Ib(d,p,S){return p=Co(4,d.children!==null?d.children:[],d.key,p),p.lanes=S,p.stateNode={containerInfo:d.containerInfo,pendingChildren:null,implementation:d.implementation},p}function D7(d,p,S,P,N){this.tag=p,this.containerInfo=d,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=_s(0),this.expirationTimes=_s(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=_s(0),this.identifierPrefix=P,this.onRecoverableError=N,this.mutableSourceEagerHydrationData=null}function Db(d,p,S,P,N,K,ae,Te,Ie){return d=new D7(d,p,S,Te,Ie),p===1?(p=1,K===!0&&(p|=8)):p=0,K=Co(3,null,null,p),d.current=K,K.stateNode=d,K.memoizedState={element:P,isDehydrated:S,cache:null,transitions:null,pendingSuspenseBoundaries:null},HT(K),d}function P7(d,p,S){var P=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:L,key:P==null?null:""+P,children:d,containerInfo:p,implementation:S}}function QA(d){if(!d)return $i;d=d._reactInternals;e:{if(mt(d)!==d||d.tag!==1)throw Error(t(170));var p=d;do{switch(p.tag){case 3:p=p.stateNode.context;break e;case 1:if(ma(p.type)){p=p.stateNode.__reactInternalMemoizedMergedChildContext;break e}}p=p.return}while(p!==null);throw Error(t(171))}if(d.tag===1){var S=d.type;if(ma(S))return Ek(d,S,p)}return p}function JA(d,p,S,P,N,K,ae,Te,Ie){return d=Db(S,P,!0,d,N,K,ae,Te,Ie),d.context=QA(null),S=d.current,P=js(),N=Nc(S),K=Uu(P,N),K.callback=p??null,Oc(S,K,N),d.current.lanes=N,Mn(d,N,P),ya(d,P),d}function Kg(d,p,S,P){var N=p.current,K=js(),ae=Nc(N);return S=QA(S),p.context===null?p.context=S:p.pendingContext=S,p=Uu(K,ae),p.payload={element:d},P=P===void 0?null:P,P!==null&&(p.callback=P),d=Oc(N,p,ae),d!==null&&(tl(d,N,ae,K),Eg(d,N,ae)),ae}function Xg(d){if(d=d.current,!d.child)return null;switch(d.child.tag){case 5:return d.child.stateNode;default:return d.child.stateNode}}function ZA(d,p){if(d=d.memoizedState,d!==null&&d.dehydrated!==null){var S=d.retryLane;d.retryLane=S!==0&&S<p?S:p}}function Pb(d,p){ZA(d,p),(d=d.alternate)&&ZA(d,p)}function R7(){return null}var eI=typeof reportError=="function"?reportError:function(d){console.error(d)};function Rb(d){this._internalRoot=d}Yg.prototype.render=Rb.prototype.render=function(d){var p=this._internalRoot;if(p===null)throw Error(t(409));Kg(d,p,null,null)},Yg.prototype.unmount=Rb.prototype.unmount=function(){var d=this._internalRoot;if(d!==null){this._internalRoot=null;var p=d.containerInfo;Fd(function(){Kg(null,d,null,null)}),p[Ee]=null}};function Yg(d){this._internalRoot=d}Yg.prototype.unstable_scheduleHydration=function(d){if(d){var p=Tl();d={blockedOn:null,target:d,priority:p};for(var S=0;S<oa.length&&p!==0&&p<oa[S].priority;S++);oa.splice(S,0,d),S===0&&Cl(d)}};function Lb(d){return!(!d||d.nodeType!==1&&d.nodeType!==9&&d.nodeType!==11)}function Qg(d){return!(!d||d.nodeType!==1&&d.nodeType!==9&&d.nodeType!==11&&(d.nodeType!==8||d.nodeValue!==" react-mount-point-unstable "))}function tI(){}function L7(d,p,S,P,N){if(N){if(typeof P=="function"){var K=P;P=function(){var Ke=Xg(ae);K.call(Ke)}}var ae=JA(p,P,d,0,null,!1,!1,"",tI);return d._reactRootContainer=ae,d[Ee]=ae.current,un(d.nodeType===8?d.parentNode:d),Fd(),ae}for(;N=d.lastChild;)d.removeChild(N);if(typeof P=="function"){var Te=P;P=function(){var Ke=Xg(Ie);Te.call(Ke)}}var Ie=Db(d,0,!1,null,null,!1,!1,"",tI);return d._reactRootContainer=Ie,d[Ee]=Ie.current,un(d.nodeType===8?d.parentNode:d),Fd(function(){Kg(p,Ie,S,P)}),Ie}function Jg(d,p,S,P,N){var K=S._reactRootContainer;if(K){var ae=K;if(typeof N=="function"){var Te=N;N=function(){var Ie=Xg(ae);Te.call(Ie)}}Kg(p,ae,d,N)}else ae=L7(S,p,d,N,P);return Xg(ae)}na=function(d){switch(d.tag){case 3:var p=d.stateNode;if(p.current.memoizedState.isDehydrated){var S=on(p.pendingLanes);S!==0&&(Tu(p,S|1),ya(p,Xr()),(ai&6)===0&&(Zh=Xr()+500,Rc()))}break;case 13:Fd(function(){var P=Nu(d,1);if(P!==null){var N=js();tl(P,d,1,N)}}),Pb(d,1)}},En=function(d){if(d.tag===13){var p=Nu(d,134217728);if(p!==null){var S=js();tl(p,d,134217728,S)}Pb(d,134217728)}},Oa=function(d){if(d.tag===13){var p=Nc(d),S=Nu(d,p);if(S!==null){var P=js();tl(S,d,p,P)}Pb(d,p)}},Tl=function(){return Fr},lo=function(d,p){var S=Fr;try{return Fr=d,p()}finally{Fr=S}},Ui=function(d,p,S){switch(p){case"input":if(rt(d,S),p=S.name,S.type==="radio"&&p!=null){for(S=d;S.parentNode;)S=S.parentNode;for(S=S.querySelectorAll("input[name="+JSON.stringify(""+p)+'][type="radio"]'),p=0;p<S.length;p++){var P=S[p];if(P!==d&&P.form===d.form){var N=Fl(P);if(!N)throw Error(t(90));Vt(P),rt(P,N)}}}break;case"textarea":xr(d,S);break;case"select":p=S.value,p!=null&&At(d,!!S.multiple,p,!1)}},yt=Cb,ir=Fd;var O7={usingClientEntryPoint:!1,Events:[cn,yo,Fl,Ce,ze,Cb]},hm={findFiberByHostInstance:si,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},M7={bundleType:hm.bundleType,version:hm.version,rendererPackageName:hm.rendererPackageName,rendererConfig:hm.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:R.ReactCurrentDispatcher,findHostInstanceByFiber:function(d){return d=Pr(d),d===null?null:d.stateNode},findFiberByHostInstance:hm.findFiberByHostInstance||R7,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Zg=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Zg.isDisabled&&Zg.supportsFiber)try{Ge=Zg.inject(M7),Ye=Zg}catch{}}return _a.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=O7,_a.createPortal=function(d,p){var S=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Lb(p))throw Error(t(200));return P7(d,p,null,S)},_a.createRoot=function(d,p){if(!Lb(d))throw Error(t(299));var S=!1,P="",N=eI;return p!=null&&(p.unstable_strictMode===!0&&(S=!0),p.identifierPrefix!==void 0&&(P=p.identifierPrefix),p.onRecoverableError!==void 0&&(N=p.onRecoverableError)),p=Db(d,1,!1,null,null,S,!1,P,N),d[Ee]=p.current,un(d.nodeType===8?d.parentNode:d),new Rb(p)},_a.findDOMNode=function(d){if(d==null)return null;if(d.nodeType===1)return d;var p=d._reactInternals;if(p===void 0)throw typeof d.render=="function"?Error(t(188)):(d=Object.keys(d).join(","),Error(t(268,d)));return d=Pr(p),d=d===null?null:d.stateNode,d},_a.flushSync=function(d){return Fd(d)},_a.hydrate=function(d,p,S){if(!Qg(p))throw Error(t(200));return Jg(null,d,p,!0,S)},_a.hydrateRoot=function(d,p,S){if(!Lb(d))throw Error(t(405));var P=S!=null&&S.hydratedSources||null,N=!1,K="",ae=eI;if(S!=null&&(S.unstable_strictMode===!0&&(N=!0),S.identifierPrefix!==void 0&&(K=S.identifierPrefix),S.onRecoverableError!==void 0&&(ae=S.onRecoverableError)),p=JA(p,null,d,1,S??null,N,!1,K,ae),d[Ee]=p.current,un(d),P)for(d=0;d<P.length;d++)S=P[d],N=S._getVersion,N=N(S._source),p.mutableSourceEagerHydrationData==null?p.mutableSourceEagerHydrationData=[S,N]:p.mutableSourceEagerHydrationData.push(S,N);return new Yg(p)},_a.render=function(d,p,S){if(!Qg(p))throw Error(t(200));return Jg(null,d,p,!1,S)},_a.unmountComponentAtNode=function(d){if(!Qg(d))throw Error(t(40));return d._reactRootContainer?(Fd(function(){Jg(null,null,d,!1,function(){d._reactRootContainer=null,d[Ee]=null})}),!0):!1},_a.unstable_batchedUpdates=Cb,_a.unstable_renderSubtreeIntoContainer=function(d,p,S,P){if(!Qg(S))throw Error(t(200));if(d==null||d._reactInternals===void 0)throw Error(t(38));return Jg(d,p,S,!1,P)},_a.version="18.3.1-next-f1338f8080-20240426",_a}var uI;function DM(){if(uI)return Fb.exports;uI=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),Fb.exports=V7(),Fb.exports}var cI;function q7(){if(cI)return ev;cI=1;var i=DM();return ev.createRoot=i.createRoot,ev.hydrateRoot=i.hydrateRoot,ev}var W7=q7();const G7=ia(W7);function PM(i,e){return function(){return i.apply(e,arguments)}}const{toString:K7}=Object.prototype,{getPrototypeOf:PE}=Object,dx=(i=>e=>{const t=K7.call(e);return i[t]||(i[t]=t.slice(8,-1).toLowerCase())})(Object.create(null)),gl=i=>(i=i.toLowerCase(),e=>dx(e)===i),hx=i=>e=>typeof e===i,{isArray:Ep}=Array,g0=hx("undefined");function X7(i){return i!==null&&!g0(i)&&i.constructor!==null&&!g0(i.constructor)&&ro(i.constructor.isBuffer)&&i.constructor.isBuffer(i)}const RM=gl("ArrayBuffer");function Y7(i){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(i):e=i&&i.buffer&&RM(i.buffer),e}const Q7=hx("string"),ro=hx("function"),LM=hx("number"),fx=i=>i!==null&&typeof i=="object",J7=i=>i===!0||i===!1,Nv=i=>{if(dx(i)!=="object")return!1;const e=PE(i);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in i)&&!(Symbol.iterator in i)},Z7=gl("Date"),ej=gl("File"),tj=gl("Blob"),rj=gl("FileList"),ij=i=>fx(i)&&ro(i.pipe),nj=i=>{let e;return i&&(typeof FormData=="function"&&i instanceof FormData||ro(i.append)&&((e=dx(i))==="formdata"||e==="object"&&ro(i.toString)&&i.toString()==="[object FormData]"))},sj=gl("URLSearchParams"),[aj,oj,lj,uj]=["ReadableStream","Request","Response","Headers"].map(gl),cj=i=>i.trim?i.trim():i.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function U0(i,e,{allOwnKeys:t=!1}={}){if(i===null||typeof i>"u")return;let r,n;if(typeof i!="object"&&(i=[i]),Ep(i))for(r=0,n=i.length;r<n;r++)e.call(null,i[r],r,i);else{const s=t?Object.getOwnPropertyNames(i):Object.keys(i),a=s.length;let o;for(r=0;r<a;r++)o=s[r],e.call(null,i[o],o,i)}}function OM(i,e){e=e.toLowerCase();const t=Object.keys(i);let r=t.length,n;for(;r-- >0;)if(n=t[r],e===n.toLowerCase())return n;return null}const ih=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,MM=i=>!g0(i)&&i!==ih;function M1(){const{caseless:i}=MM(this)&&this||{},e={},t=(r,n)=>{const s=i&&OM(e,n)||n;Nv(e[s])&&Nv(r)?e[s]=M1(e[s],r):Nv(r)?e[s]=M1({},r):Ep(r)?e[s]=r.slice():e[s]=r};for(let r=0,n=arguments.length;r<n;r++)arguments[r]&&U0(arguments[r],t);return e}const dj=(i,e,t,{allOwnKeys:r}={})=>(U0(e,(n,s)=>{t&&ro(n)?i[s]=PM(n,t):i[s]=n},{allOwnKeys:r}),i),hj=i=>(i.charCodeAt(0)===65279&&(i=i.slice(1)),i),fj=(i,e,t,r)=>{i.prototype=Object.create(e.prototype,r),i.prototype.constructor=i,Object.defineProperty(i,"super",{value:e.prototype}),t&&Object.assign(i.prototype,t)},pj=(i,e,t,r)=>{let n,s,a;const o={};if(e=e||{},i==null)return e;do{for(n=Object.getOwnPropertyNames(i),s=n.length;s-- >0;)a=n[s],(!r||r(a,i,e))&&!o[a]&&(e[a]=i[a],o[a]=!0);i=t!==!1&&PE(i)}while(i&&(!t||t(i,e))&&i!==Object.prototype);return e},mj=(i,e,t)=>{i=String(i),(t===void 0||t>i.length)&&(t=i.length),t-=e.length;const r=i.indexOf(e,t);return r!==-1&&r===t},gj=i=>{if(!i)return null;if(Ep(i))return i;let e=i.length;if(!LM(e))return null;const t=new Array(e);for(;e-- >0;)t[e]=i[e];return t},vj=(i=>e=>i&&e instanceof i)(typeof Uint8Array<"u"&&PE(Uint8Array)),yj=(i,e)=>{const r=(i&&i[Symbol.iterator]).call(i);let n;for(;(n=r.next())&&!n.done;){const s=n.value;e.call(i,s[0],s[1])}},_j=(i,e)=>{let t;const r=[];for(;(t=i.exec(e))!==null;)r.push(t);return r},xj=gl("HTMLFormElement"),Tj=i=>i.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(t,r,n){return r.toUpperCase()+n}),dI=(({hasOwnProperty:i})=>(e,t)=>i.call(e,t))(Object.prototype),bj=gl("RegExp"),FM=(i,e)=>{const t=Object.getOwnPropertyDescriptors(i),r={};U0(t,(n,s)=>{let a;(a=e(n,s,i))!==!1&&(r[s]=a||n)}),Object.defineProperties(i,r)},Sj=i=>{FM(i,(e,t)=>{if(ro(i)&&["arguments","caller","callee"].indexOf(t)!==-1)return!1;const r=i[t];if(ro(r)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+t+"'")})}})},Cj=(i,e)=>{const t={},r=n=>{n.forEach(s=>{t[s]=!0})};return Ep(i)?r(i):r(String(i).split(e)),t},Ej=()=>{},wj=(i,e)=>i!=null&&Number.isFinite(i=+i)?i:e,Ub="abcdefghijklmnopqrstuvwxyz",hI="0123456789",BM={DIGIT:hI,ALPHA:Ub,ALPHA_DIGIT:Ub+Ub.toUpperCase()+hI},kj=(i=16,e=BM.ALPHA_DIGIT)=>{let t="";const{length:r}=e;for(;i--;)t+=e[Math.random()*r|0];return t};function Aj(i){return!!(i&&ro(i.append)&&i[Symbol.toStringTag]==="FormData"&&i[Symbol.iterator])}const Ij=i=>{const e=new Array(10),t=(r,n)=>{if(fx(r)){if(e.indexOf(r)>=0)return;if(!("toJSON"in r)){e[n]=r;const s=Ep(r)?[]:{};return U0(r,(a,o)=>{const l=t(a,n+1);!g0(l)&&(s[o]=l)}),e[n]=void 0,s}}return r};return t(i,0)},Dj=gl("AsyncFunction"),Pj=i=>i&&(fx(i)||ro(i))&&ro(i.then)&&ro(i.catch),NM=((i,e)=>i?setImmediate:e?((t,r)=>(ih.addEventListener("message",({source:n,data:s})=>{n===ih&&s===t&&r.length&&r.shift()()},!1),n=>{r.push(n),ih.postMessage(t,"*")}))(`axios@${Math.random()}`,[]):t=>setTimeout(t))(typeof setImmediate=="function",ro(ih.postMessage)),Rj=typeof queueMicrotask<"u"?queueMicrotask.bind(ih):typeof process<"u"&&process.nextTick||NM,Ze={isArray:Ep,isArrayBuffer:RM,isBuffer:X7,isFormData:nj,isArrayBufferView:Y7,isString:Q7,isNumber:LM,isBoolean:J7,isObject:fx,isPlainObject:Nv,isReadableStream:aj,isRequest:oj,isResponse:lj,isHeaders:uj,isUndefined:g0,isDate:Z7,isFile:ej,isBlob:tj,isRegExp:bj,isFunction:ro,isStream:ij,isURLSearchParams:sj,isTypedArray:vj,isFileList:rj,forEach:U0,merge:M1,extend:dj,trim:cj,stripBOM:hj,inherits:fj,toFlatObject:pj,kindOf:dx,kindOfTest:gl,endsWith:mj,toArray:gj,forEachEntry:yj,matchAll:_j,isHTMLForm:xj,hasOwnProperty:dI,hasOwnProp:dI,reduceDescriptors:FM,freezeMethods:Sj,toObjectSet:Cj,toCamelCase:Tj,noop:Ej,toFiniteNumber:wj,findKey:OM,global:ih,isContextDefined:MM,ALPHABET:BM,generateString:kj,isSpecCompliantForm:Aj,toJSONObject:Ij,isAsyncFn:Dj,isThenable:Pj,setImmediate:NM,asap:Rj};function Or(i,e,t,r,n){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=i,this.name="AxiosError",e&&(this.code=e),t&&(this.config=t),r&&(this.request=r),n&&(this.response=n,this.status=n.status?n.status:null)}Ze.inherits(Or,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Ze.toJSONObject(this.config),code:this.code,status:this.status}}});const UM=Or.prototype,$M={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(i=>{$M[i]={value:i}});Object.defineProperties(Or,$M);Object.defineProperty(UM,"isAxiosError",{value:!0});Or.from=(i,e,t,r,n,s)=>{const a=Object.create(UM);return Ze.toFlatObject(i,a,function(l){return l!==Error.prototype},o=>o!=="isAxiosError"),Or.call(a,i.message,e,t,r,n),a.cause=i,a.name=i.name,s&&Object.assign(a,s),a};const Lj=null;function F1(i){return Ze.isPlainObject(i)||Ze.isArray(i)}function jM(i){return Ze.endsWith(i,"[]")?i.slice(0,-2):i}function fI(i,e,t){return i?i.concat(e).map(function(n,s){return n=jM(n),!t&&s?"["+n+"]":n}).join(t?".":""):e}function Oj(i){return Ze.isArray(i)&&!i.some(F1)}const Mj=Ze.toFlatObject(Ze,{},null,function(e){return/^is[A-Z]/.test(e)});function px(i,e,t){if(!Ze.isObject(i))throw new TypeError("target must be an object");e=e||new FormData,t=Ze.toFlatObject(t,{metaTokens:!0,dots:!1,indexes:!1},!1,function(_,T){return!Ze.isUndefined(T[_])});const r=t.metaTokens,n=t.visitor||c,s=t.dots,a=t.indexes,l=(t.Blob||typeof Blob<"u"&&Blob)&&Ze.isSpecCompliantForm(e);if(!Ze.isFunction(n))throw new TypeError("visitor must be a function");function u(y){if(y===null)return"";if(Ze.isDate(y))return y.toISOString();if(!l&&Ze.isBlob(y))throw new Or("Blob is not supported. Use a Buffer instead.");return Ze.isArrayBuffer(y)||Ze.isTypedArray(y)?l&&typeof Blob=="function"?new Blob([y]):Buffer.from(y):y}function c(y,_,T){let E=y;if(y&&!T&&typeof y=="object"){if(Ze.endsWith(_,"{}"))_=r?_:_.slice(0,-2),y=JSON.stringify(y);else if(Ze.isArray(y)&&Oj(y)||(Ze.isFileList(y)||Ze.endsWith(_,"[]"))&&(E=Ze.toArray(y)))return _=jM(_),E.forEach(function(D,R){!(Ze.isUndefined(D)||D===null)&&e.append(a===!0?fI([_],R,s):a===null?_:_+"[]",u(D))}),!1}return F1(y)?!0:(e.append(fI(T,_,s),u(y)),!1)}const h=[],m=Object.assign(Mj,{defaultVisitor:c,convertValue:u,isVisitable:F1});function g(y,_){if(!Ze.isUndefined(y)){if(h.indexOf(y)!==-1)throw Error("Circular reference detected in "+_.join("."));h.push(y),Ze.forEach(y,function(E,w){(!(Ze.isUndefined(E)||E===null)&&n.call(e,E,Ze.isString(w)?w.trim():w,_,m))===!0&&g(E,_?_.concat(w):[w])}),h.pop()}}if(!Ze.isObject(i))throw new TypeError("data must be an object");return g(i),e}function pI(i){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(i).replace(/[!'()~]|%20|%00/g,function(r){return e[r]})}function RE(i,e){this._pairs=[],i&&px(i,this,e)}const zM=RE.prototype;zM.append=function(e,t){this._pairs.push([e,t])};zM.toString=function(e){const t=e?function(r){return e.call(this,r,pI)}:pI;return this._pairs.map(function(n){return t(n[0])+"="+t(n[1])},"").join("&")};function Fj(i){return encodeURIComponent(i).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function HM(i,e,t){if(!e)return i;const r=t&&t.encode||Fj,n=t&&t.serialize;let s;if(n?s=n(e,t):s=Ze.isURLSearchParams(e)?e.toString():new RE(e,t).toString(r),s){const a=i.indexOf("#");a!==-1&&(i=i.slice(0,a)),i+=(i.indexOf("?")===-1?"?":"&")+s}return i}class mI{constructor(){this.handlers=[]}use(e,t,r){return this.handlers.push({fulfilled:e,rejected:t,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){Ze.forEach(this.handlers,function(r){r!==null&&e(r)})}}const VM={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Bj=typeof URLSearchParams<"u"?URLSearchParams:RE,Nj=typeof FormData<"u"?FormData:null,Uj=typeof Blob<"u"?Blob:null,$j={isBrowser:!0,classes:{URLSearchParams:Bj,FormData:Nj,Blob:Uj},protocols:["http","https","file","blob","url","data"]},LE=typeof window<"u"&&typeof document<"u",B1=typeof navigator=="object"&&navigator||void 0,jj=LE&&(!B1||["ReactNative","NativeScript","NS"].indexOf(B1.product)<0),zj=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",Hj=LE&&window.location.href||"http://localhost",Vj=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:LE,hasStandardBrowserEnv:jj,hasStandardBrowserWebWorkerEnv:zj,navigator:B1,origin:Hj},Symbol.toStringTag,{value:"Module"})),Ia={...Vj,...$j};function qj(i,e){return px(i,new Ia.classes.URLSearchParams,Object.assign({visitor:function(t,r,n,s){return Ia.isNode&&Ze.isBuffer(t)?(this.append(r,t.toString("base64")),!1):s.defaultVisitor.apply(this,arguments)}},e))}function Wj(i){return Ze.matchAll(/\w+|\[(\w*)]/g,i).map(e=>e[0]==="[]"?"":e[1]||e[0])}function Gj(i){const e={},t=Object.keys(i);let r;const n=t.length;let s;for(r=0;r<n;r++)s=t[r],e[s]=i[s];return e}function qM(i){function e(t,r,n,s){let a=t[s++];if(a==="__proto__")return!0;const o=Number.isFinite(+a),l=s>=t.length;return a=!a&&Ze.isArray(n)?n.length:a,l?(Ze.hasOwnProp(n,a)?n[a]=[n[a],r]:n[a]=r,!o):((!n[a]||!Ze.isObject(n[a]))&&(n[a]=[]),e(t,r,n[a],s)&&Ze.isArray(n[a])&&(n[a]=Gj(n[a])),!o)}if(Ze.isFormData(i)&&Ze.isFunction(i.entries)){const t={};return Ze.forEachEntry(i,(r,n)=>{e(Wj(r),n,t,0)}),t}return null}function Kj(i,e,t){if(Ze.isString(i))try{return(e||JSON.parse)(i),Ze.trim(i)}catch(r){if(r.name!=="SyntaxError")throw r}return(t||JSON.stringify)(i)}const $0={transitional:VM,adapter:["xhr","http","fetch"],transformRequest:[function(e,t){const r=t.getContentType()||"",n=r.indexOf("application/json")>-1,s=Ze.isObject(e);if(s&&Ze.isHTMLForm(e)&&(e=new FormData(e)),Ze.isFormData(e))return n?JSON.stringify(qM(e)):e;if(Ze.isArrayBuffer(e)||Ze.isBuffer(e)||Ze.isStream(e)||Ze.isFile(e)||Ze.isBlob(e)||Ze.isReadableStream(e))return e;if(Ze.isArrayBufferView(e))return e.buffer;if(Ze.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let o;if(s){if(r.indexOf("application/x-www-form-urlencoded")>-1)return qj(e,this.formSerializer).toString();if((o=Ze.isFileList(e))||r.indexOf("multipart/form-data")>-1){const l=this.env&&this.env.FormData;return px(o?{"files[]":e}:e,l&&new l,this.formSerializer)}}return s||n?(t.setContentType("application/json",!1),Kj(e)):e}],transformResponse:[function(e){const t=this.transitional||$0.transitional,r=t&&t.forcedJSONParsing,n=this.responseType==="json";if(Ze.isResponse(e)||Ze.isReadableStream(e))return e;if(e&&Ze.isString(e)&&(r&&!this.responseType||n)){const a=!(t&&t.silentJSONParsing)&&n;try{return JSON.parse(e)}catch(o){if(a)throw o.name==="SyntaxError"?Or.from(o,Or.ERR_BAD_RESPONSE,this,null,this.response):o}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Ia.classes.FormData,Blob:Ia.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};Ze.forEach(["delete","get","head","post","put","patch"],i=>{$0.headers[i]={}});const Xj=Ze.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Yj=i=>{const e={};let t,r,n;return i&&i.split(`
`).forEach(function(a){n=a.indexOf(":"),t=a.substring(0,n).trim().toLowerCase(),r=a.substring(n+1).trim(),!(!t||e[t]&&Xj[t])&&(t==="set-cookie"?e[t]?e[t].push(r):e[t]=[r]:e[t]=e[t]?e[t]+", "+r:r)}),e},gI=Symbol("internals");function pm(i){return i&&String(i).trim().toLowerCase()}function Uv(i){return i===!1||i==null?i:Ze.isArray(i)?i.map(Uv):String(i)}function Qj(i){const e=Object.create(null),t=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=t.exec(i);)e[r[1]]=r[2];return e}const Jj=i=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(i.trim());function $b(i,e,t,r,n){if(Ze.isFunction(r))return r.call(this,e,t);if(n&&(e=t),!!Ze.isString(e)){if(Ze.isString(r))return e.indexOf(r)!==-1;if(Ze.isRegExp(r))return r.test(e)}}function Zj(i){return i.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,t,r)=>t.toUpperCase()+r)}function e9(i,e){const t=Ze.toCamelCase(" "+e);["get","set","has"].forEach(r=>{Object.defineProperty(i,r+t,{value:function(n,s,a){return this[r].call(this,e,n,s,a)},configurable:!0})})}let Da=class{constructor(e){e&&this.set(e)}set(e,t,r){const n=this;function s(o,l,u){const c=pm(l);if(!c)throw new Error("header name must be a non-empty string");const h=Ze.findKey(n,c);(!h||n[h]===void 0||u===!0||u===void 0&&n[h]!==!1)&&(n[h||l]=Uv(o))}const a=(o,l)=>Ze.forEach(o,(u,c)=>s(u,c,l));if(Ze.isPlainObject(e)||e instanceof this.constructor)a(e,t);else if(Ze.isString(e)&&(e=e.trim())&&!Jj(e))a(Yj(e),t);else if(Ze.isHeaders(e))for(const[o,l]of e.entries())s(l,o,r);else e!=null&&s(t,e,r);return this}get(e,t){if(e=pm(e),e){const r=Ze.findKey(this,e);if(r){const n=this[r];if(!t)return n;if(t===!0)return Qj(n);if(Ze.isFunction(t))return t.call(this,n,r);if(Ze.isRegExp(t))return t.exec(n);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=pm(e),e){const r=Ze.findKey(this,e);return!!(r&&this[r]!==void 0&&(!t||$b(this,this[r],r,t)))}return!1}delete(e,t){const r=this;let n=!1;function s(a){if(a=pm(a),a){const o=Ze.findKey(r,a);o&&(!t||$b(r,r[o],o,t))&&(delete r[o],n=!0)}}return Ze.isArray(e)?e.forEach(s):s(e),n}clear(e){const t=Object.keys(this);let r=t.length,n=!1;for(;r--;){const s=t[r];(!e||$b(this,this[s],s,e,!0))&&(delete this[s],n=!0)}return n}normalize(e){const t=this,r={};return Ze.forEach(this,(n,s)=>{const a=Ze.findKey(r,s);if(a){t[a]=Uv(n),delete t[s];return}const o=e?Zj(s):String(s).trim();o!==s&&delete t[s],t[o]=Uv(n),r[o]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const t=Object.create(null);return Ze.forEach(this,(r,n)=>{r!=null&&r!==!1&&(t[n]=e&&Ze.isArray(r)?r.join(", "):r)}),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,t])=>e+": "+t).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...t){const r=new this(e);return t.forEach(n=>r.set(n)),r}static accessor(e){const r=(this[gI]=this[gI]={accessors:{}}).accessors,n=this.prototype;function s(a){const o=pm(a);r[o]||(e9(n,a),r[o]=!0)}return Ze.isArray(e)?e.forEach(s):s(e),this}};Da.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);Ze.reduceDescriptors(Da.prototype,({value:i},e)=>{let t=e[0].toUpperCase()+e.slice(1);return{get:()=>i,set(r){this[t]=r}}});Ze.freezeMethods(Da);function jb(i,e){const t=this||$0,r=e||t,n=Da.from(r.headers);let s=r.data;return Ze.forEach(i,function(o){s=o.call(t,s,n.normalize(),e?e.status:void 0)}),n.normalize(),s}function WM(i){return!!(i&&i.__CANCEL__)}function wp(i,e,t){Or.call(this,i??"canceled",Or.ERR_CANCELED,e,t),this.name="CanceledError"}Ze.inherits(wp,Or,{__CANCEL__:!0});function GM(i,e,t){const r=t.config.validateStatus;!t.status||!r||r(t.status)?i(t):e(new Or("Request failed with status code "+t.status,[Or.ERR_BAD_REQUEST,Or.ERR_BAD_RESPONSE][Math.floor(t.status/100)-4],t.config,t.request,t))}function t9(i){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(i);return e&&e[1]||""}function r9(i,e){i=i||10;const t=new Array(i),r=new Array(i);let n=0,s=0,a;return e=e!==void 0?e:1e3,function(l){const u=Date.now(),c=r[s];a||(a=u),t[n]=l,r[n]=u;let h=s,m=0;for(;h!==n;)m+=t[h++],h=h%i;if(n=(n+1)%i,n===s&&(s=(s+1)%i),u-a<e)return;const g=c&&u-c;return g?Math.round(m*1e3/g):void 0}}function i9(i,e){let t=0,r=1e3/e,n,s;const a=(u,c=Date.now())=>{t=c,n=null,s&&(clearTimeout(s),s=null),i.apply(null,u)};return[(...u)=>{const c=Date.now(),h=c-t;h>=r?a(u,c):(n=u,s||(s=setTimeout(()=>{s=null,a(n)},r-h)))},()=>n&&a(n)]}const Wy=(i,e,t=3)=>{let r=0;const n=r9(50,250);return i9(s=>{const a=s.loaded,o=s.lengthComputable?s.total:void 0,l=a-r,u=n(l),c=a<=o;r=a;const h={loaded:a,total:o,progress:o?a/o:void 0,bytes:l,rate:u||void 0,estimated:u&&o&&c?(o-a)/u:void 0,event:s,lengthComputable:o!=null,[e?"download":"upload"]:!0};i(h)},t)},vI=(i,e)=>{const t=i!=null;return[r=>e[0]({lengthComputable:t,total:i,loaded:r}),e[1]]},yI=i=>(...e)=>Ze.asap(()=>i(...e)),n9=Ia.hasStandardBrowserEnv?(function(){const e=Ia.navigator&&/(msie|trident)/i.test(Ia.navigator.userAgent),t=document.createElement("a");let r;function n(s){let a=s;return e&&(t.setAttribute("href",a),a=t.href),t.setAttribute("href",a),{href:t.href,protocol:t.protocol?t.protocol.replace(/:$/,""):"",host:t.host,search:t.search?t.search.replace(/^\?/,""):"",hash:t.hash?t.hash.replace(/^#/,""):"",hostname:t.hostname,port:t.port,pathname:t.pathname.charAt(0)==="/"?t.pathname:"/"+t.pathname}}return r=n(window.location.href),function(a){const o=Ze.isString(a)?n(a):a;return o.protocol===r.protocol&&o.host===r.host}})():(function(){return function(){return!0}})(),s9=Ia.hasStandardBrowserEnv?{write(i,e,t,r,n,s){const a=[i+"="+encodeURIComponent(e)];Ze.isNumber(t)&&a.push("expires="+new Date(t).toGMTString()),Ze.isString(r)&&a.push("path="+r),Ze.isString(n)&&a.push("domain="+n),s===!0&&a.push("secure"),document.cookie=a.join("; ")},read(i){const e=document.cookie.match(new RegExp("(^|;\\s*)("+i+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(i){this.write(i,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function a9(i){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(i)}function o9(i,e){return e?i.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):i}function KM(i,e){return i&&!a9(e)?o9(i,e):e}const _I=i=>i instanceof Da?{...i}:i;function Sh(i,e){e=e||{};const t={};function r(u,c,h){return Ze.isPlainObject(u)&&Ze.isPlainObject(c)?Ze.merge.call({caseless:h},u,c):Ze.isPlainObject(c)?Ze.merge({},c):Ze.isArray(c)?c.slice():c}function n(u,c,h){if(Ze.isUndefined(c)){if(!Ze.isUndefined(u))return r(void 0,u,h)}else return r(u,c,h)}function s(u,c){if(!Ze.isUndefined(c))return r(void 0,c)}function a(u,c){if(Ze.isUndefined(c)){if(!Ze.isUndefined(u))return r(void 0,u)}else return r(void 0,c)}function o(u,c,h){if(h in e)return r(u,c);if(h in i)return r(void 0,u)}const l={url:s,method:s,data:s,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,withXSRFToken:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,beforeRedirect:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:o,headers:(u,c)=>n(_I(u),_I(c),!0)};return Ze.forEach(Object.keys(Object.assign({},i,e)),function(c){const h=l[c]||n,m=h(i[c],e[c],c);Ze.isUndefined(m)&&h!==o||(t[c]=m)}),t}const XM=i=>{const e=Sh({},i);let{data:t,withXSRFToken:r,xsrfHeaderName:n,xsrfCookieName:s,headers:a,auth:o}=e;e.headers=a=Da.from(a),e.url=HM(KM(e.baseURL,e.url),i.params,i.paramsSerializer),o&&a.set("Authorization","Basic "+btoa((o.username||"")+":"+(o.password?unescape(encodeURIComponent(o.password)):"")));let l;if(Ze.isFormData(t)){if(Ia.hasStandardBrowserEnv||Ia.hasStandardBrowserWebWorkerEnv)a.setContentType(void 0);else if((l=a.getContentType())!==!1){const[u,...c]=l?l.split(";").map(h=>h.trim()).filter(Boolean):[];a.setContentType([u||"multipart/form-data",...c].join("; "))}}if(Ia.hasStandardBrowserEnv&&(r&&Ze.isFunction(r)&&(r=r(e)),r||r!==!1&&n9(e.url))){const u=n&&s&&s9.read(s);u&&a.set(n,u)}return e},l9=typeof XMLHttpRequest<"u",u9=l9&&function(i){return new Promise(function(t,r){const n=XM(i);let s=n.data;const a=Da.from(n.headers).normalize();let{responseType:o,onUploadProgress:l,onDownloadProgress:u}=n,c,h,m,g,y;function _(){g&&g(),y&&y(),n.cancelToken&&n.cancelToken.unsubscribe(c),n.signal&&n.signal.removeEventListener("abort",c)}let T=new XMLHttpRequest;T.open(n.method.toUpperCase(),n.url,!0),T.timeout=n.timeout;function E(){if(!T)return;const D=Da.from("getAllResponseHeaders"in T&&T.getAllResponseHeaders()),A={data:!o||o==="text"||o==="json"?T.responseText:T.response,status:T.status,statusText:T.statusText,headers:D,config:i,request:T};GM(function(F){t(F),_()},function(F){r(F),_()},A),T=null}"onloadend"in T?T.onloadend=E:T.onreadystatechange=function(){!T||T.readyState!==4||T.status===0&&!(T.responseURL&&T.responseURL.indexOf("file:")===0)||setTimeout(E)},T.onabort=function(){T&&(r(new Or("Request aborted",Or.ECONNABORTED,i,T)),T=null)},T.onerror=function(){r(new Or("Network Error",Or.ERR_NETWORK,i,T)),T=null},T.ontimeout=function(){let R=n.timeout?"timeout of "+n.timeout+"ms exceeded":"timeout exceeded";const A=n.transitional||VM;n.timeoutErrorMessage&&(R=n.timeoutErrorMessage),r(new Or(R,A.clarifyTimeoutError?Or.ETIMEDOUT:Or.ECONNABORTED,i,T)),T=null},s===void 0&&a.setContentType(null),"setRequestHeader"in T&&Ze.forEach(a.toJSON(),function(R,A){T.setRequestHeader(A,R)}),Ze.isUndefined(n.withCredentials)||(T.withCredentials=!!n.withCredentials),o&&o!=="json"&&(T.responseType=n.responseType),u&&([m,y]=Wy(u,!0),T.addEventListener("progress",m)),l&&T.upload&&([h,g]=Wy(l),T.upload.addEventListener("progress",h),T.upload.addEventListener("loadend",g)),(n.cancelToken||n.signal)&&(c=D=>{T&&(r(!D||D.type?new wp(null,i,T):D),T.abort(),T=null)},n.cancelToken&&n.cancelToken.subscribe(c),n.signal&&(n.signal.aborted?c():n.signal.addEventListener("abort",c)));const w=t9(n.url);if(w&&Ia.protocols.indexOf(w)===-1){r(new Or("Unsupported protocol "+w+":",Or.ERR_BAD_REQUEST,i));return}T.send(s||null)})},c9=(i,e)=>{const{length:t}=i=i?i.filter(Boolean):[];if(e||t){let r=new AbortController,n;const s=function(u){if(!n){n=!0,o();const c=u instanceof Error?u:this.reason;r.abort(c instanceof Or?c:new wp(c instanceof Error?c.message:c))}};let a=e&&setTimeout(()=>{a=null,s(new Or(`timeout ${e} of ms exceeded`,Or.ETIMEDOUT))},e);const o=()=>{i&&(a&&clearTimeout(a),a=null,i.forEach(u=>{u.unsubscribe?u.unsubscribe(s):u.removeEventListener("abort",s)}),i=null)};i.forEach(u=>u.addEventListener("abort",s));const{signal:l}=r;return l.unsubscribe=()=>Ze.asap(o),l}},d9=function*(i,e){let t=i.byteLength;if(t<e){yield i;return}let r=0,n;for(;r<t;)n=r+e,yield i.slice(r,n),r=n},h9=async function*(i,e){for await(const t of f9(i))yield*d9(t,e)},f9=async function*(i){if(i[Symbol.asyncIterator]){yield*i;return}const e=i.getReader();try{for(;;){const{done:t,value:r}=await e.read();if(t)break;yield r}}finally{await e.cancel()}},xI=(i,e,t,r)=>{const n=h9(i,e);let s=0,a,o=l=>{a||(a=!0,r&&r(l))};return new ReadableStream({async pull(l){try{const{done:u,value:c}=await n.next();if(u){o(),l.close();return}let h=c.byteLength;if(t){let m=s+=h;t(m)}l.enqueue(new Uint8Array(c))}catch(u){throw o(u),u}},cancel(l){return o(l),n.return()}},{highWaterMark:2})},mx=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",YM=mx&&typeof ReadableStream=="function",p9=mx&&(typeof TextEncoder=="function"?(i=>e=>i.encode(e))(new TextEncoder):async i=>new Uint8Array(await new Response(i).arrayBuffer())),QM=(i,...e)=>{try{return!!i(...e)}catch{return!1}},m9=YM&&QM(()=>{let i=!1;const e=new Request(Ia.origin,{body:new ReadableStream,method:"POST",get duplex(){return i=!0,"half"}}).headers.has("Content-Type");return i&&!e}),TI=64*1024,N1=YM&&QM(()=>Ze.isReadableStream(new Response("").body)),Gy={stream:N1&&(i=>i.body)};mx&&(i=>{["text","arrayBuffer","blob","formData","stream"].forEach(e=>{!Gy[e]&&(Gy[e]=Ze.isFunction(i[e])?t=>t[e]():(t,r)=>{throw new Or(`Response type '${e}' is not supported`,Or.ERR_NOT_SUPPORT,r)})})})(new Response);const g9=async i=>{if(i==null)return 0;if(Ze.isBlob(i))return i.size;if(Ze.isSpecCompliantForm(i))return(await new Request(Ia.origin,{method:"POST",body:i}).arrayBuffer()).byteLength;if(Ze.isArrayBufferView(i)||Ze.isArrayBuffer(i))return i.byteLength;if(Ze.isURLSearchParams(i)&&(i=i+""),Ze.isString(i))return(await p9(i)).byteLength},v9=async(i,e)=>{const t=Ze.toFiniteNumber(i.getContentLength());return t??g9(e)},y9=mx&&(async i=>{let{url:e,method:t,data:r,signal:n,cancelToken:s,timeout:a,onDownloadProgress:o,onUploadProgress:l,responseType:u,headers:c,withCredentials:h="same-origin",fetchOptions:m}=XM(i);u=u?(u+"").toLowerCase():"text";let g=c9([n,s&&s.toAbortSignal()],a),y;const _=g&&g.unsubscribe&&(()=>{g.unsubscribe()});let T;try{if(l&&m9&&t!=="get"&&t!=="head"&&(T=await v9(c,r))!==0){let A=new Request(e,{method:"POST",body:r,duplex:"half"}),L;if(Ze.isFormData(r)&&(L=A.headers.get("content-type"))&&c.setContentType(L),A.body){const[F,B]=vI(T,Wy(yI(l)));r=xI(A.body,TI,F,B)}}Ze.isString(h)||(h=h?"include":"omit");const E="credentials"in Request.prototype;y=new Request(e,{...m,signal:g,method:t.toUpperCase(),headers:c.normalize().toJSON(),body:r,duplex:"half",credentials:E?h:void 0});let w=await fetch(y);const D=N1&&(u==="stream"||u==="response");if(N1&&(o||D&&_)){const A={};["status","statusText","headers"].forEach(M=>{A[M]=w[M]});const L=Ze.toFiniteNumber(w.headers.get("content-length")),[F,B]=o&&vI(L,Wy(yI(o),!0))||[];w=new Response(xI(w.body,TI,F,()=>{B&&B(),_&&_()}),A)}u=u||"text";let R=await Gy[Ze.findKey(Gy,u)||"text"](w,i);return!D&&_&&_(),await new Promise((A,L)=>{GM(A,L,{data:R,headers:Da.from(w.headers),status:w.status,statusText:w.statusText,config:i,request:y})})}catch(E){throw _&&_(),E&&E.name==="TypeError"&&/fetch/i.test(E.message)?Object.assign(new Or("Network Error",Or.ERR_NETWORK,i,y),{cause:E.cause||E}):Or.from(E,E&&E.code,i,y)}}),U1={http:Lj,xhr:u9,fetch:y9};Ze.forEach(U1,(i,e)=>{if(i){try{Object.defineProperty(i,"name",{value:e})}catch{}Object.defineProperty(i,"adapterName",{value:e})}});const bI=i=>`- ${i}`,_9=i=>Ze.isFunction(i)||i===null||i===!1,JM={getAdapter:i=>{i=Ze.isArray(i)?i:[i];const{length:e}=i;let t,r;const n={};for(let s=0;s<e;s++){t=i[s];let a;if(r=t,!_9(t)&&(r=U1[(a=String(t)).toLowerCase()],r===void 0))throw new Or(`Unknown adapter '${a}'`);if(r)break;n[a||"#"+s]=r}if(!r){const s=Object.entries(n).map(([o,l])=>`adapter ${o} `+(l===!1?"is not supported by the environment":"is not available in the build"));let a=e?s.length>1?`since :
`+s.map(bI).join(`
`):" "+bI(s[0]):"as no adapter specified";throw new Or("There is no suitable adapter to dispatch the request "+a,"ERR_NOT_SUPPORT")}return r},adapters:U1};function zb(i){if(i.cancelToken&&i.cancelToken.throwIfRequested(),i.signal&&i.signal.aborted)throw new wp(null,i)}function SI(i){return zb(i),i.headers=Da.from(i.headers),i.data=jb.call(i,i.transformRequest),["post","put","patch"].indexOf(i.method)!==-1&&i.headers.setContentType("application/x-www-form-urlencoded",!1),JM.getAdapter(i.adapter||$0.adapter)(i).then(function(r){return zb(i),r.data=jb.call(i,i.transformResponse,r),r.headers=Da.from(r.headers),r},function(r){return WM(r)||(zb(i),r&&r.response&&(r.response.data=jb.call(i,i.transformResponse,r.response),r.response.headers=Da.from(r.response.headers))),Promise.reject(r)})}const ZM="1.7.7",OE={};["object","boolean","number","function","string","symbol"].forEach((i,e)=>{OE[i]=function(r){return typeof r===i||"a"+(e<1?"n ":" ")+i}});const CI={};OE.transitional=function(e,t,r){function n(s,a){return"[Axios v"+ZM+"] Transitional option '"+s+"'"+a+(r?". "+r:"")}return(s,a,o)=>{if(e===!1)throw new Or(n(a," has been removed"+(t?" in "+t:"")),Or.ERR_DEPRECATED);return t&&!CI[a]&&(CI[a]=!0,console.warn(n(a," has been deprecated since v"+t+" and will be removed in the near future"))),e?e(s,a,o):!0}};function x9(i,e,t){if(typeof i!="object")throw new Or("options must be an object",Or.ERR_BAD_OPTION_VALUE);const r=Object.keys(i);let n=r.length;for(;n-- >0;){const s=r[n],a=e[s];if(a){const o=i[s],l=o===void 0||a(o,s,i);if(l!==!0)throw new Or("option "+s+" must be "+l,Or.ERR_BAD_OPTION_VALUE);continue}if(t!==!0)throw new Or("Unknown option "+s,Or.ERR_BAD_OPTION)}}const $1={assertOptions:x9,validators:OE},zc=$1.validators;let ch=class{constructor(e){this.defaults=e,this.interceptors={request:new mI,response:new mI}}async request(e,t){try{return await this._request(e,t)}catch(r){if(r instanceof Error){let n;Error.captureStackTrace?Error.captureStackTrace(n={}):n=new Error;const s=n.stack?n.stack.replace(/^.+\n/,""):"";try{r.stack?s&&!String(r.stack).endsWith(s.replace(/^.+\n.+\n/,""))&&(r.stack+=`
`+s):r.stack=s}catch{}}throw r}}_request(e,t){typeof e=="string"?(t=t||{},t.url=e):t=e||{},t=Sh(this.defaults,t);const{transitional:r,paramsSerializer:n,headers:s}=t;r!==void 0&&$1.assertOptions(r,{silentJSONParsing:zc.transitional(zc.boolean),forcedJSONParsing:zc.transitional(zc.boolean),clarifyTimeoutError:zc.transitional(zc.boolean)},!1),n!=null&&(Ze.isFunction(n)?t.paramsSerializer={serialize:n}:$1.assertOptions(n,{encode:zc.function,serialize:zc.function},!0)),t.method=(t.method||this.defaults.method||"get").toLowerCase();let a=s&&Ze.merge(s.common,s[t.method]);s&&Ze.forEach(["delete","get","head","post","put","patch","common"],y=>{delete s[y]}),t.headers=Da.concat(a,s);const o=[];let l=!0;this.interceptors.request.forEach(function(_){typeof _.runWhen=="function"&&_.runWhen(t)===!1||(l=l&&_.synchronous,o.unshift(_.fulfilled,_.rejected))});const u=[];this.interceptors.response.forEach(function(_){u.push(_.fulfilled,_.rejected)});let c,h=0,m;if(!l){const y=[SI.bind(this),void 0];for(y.unshift.apply(y,o),y.push.apply(y,u),m=y.length,c=Promise.resolve(t);h<m;)c=c.then(y[h++],y[h++]);return c}m=o.length;let g=t;for(h=0;h<m;){const y=o[h++],_=o[h++];try{g=y(g)}catch(T){_.call(this,T);break}}try{c=SI.call(this,g)}catch(y){return Promise.reject(y)}for(h=0,m=u.length;h<m;)c=c.then(u[h++],u[h++]);return c}getUri(e){e=Sh(this.defaults,e);const t=KM(e.baseURL,e.url);return HM(t,e.params,e.paramsSerializer)}};Ze.forEach(["delete","get","head","options"],function(e){ch.prototype[e]=function(t,r){return this.request(Sh(r||{},{method:e,url:t,data:(r||{}).data}))}});Ze.forEach(["post","put","patch"],function(e){function t(r){return function(s,a,o){return this.request(Sh(o||{},{method:e,headers:r?{"Content-Type":"multipart/form-data"}:{},url:s,data:a}))}}ch.prototype[e]=t(),ch.prototype[e+"Form"]=t(!0)});let T9=class e3{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let t;this.promise=new Promise(function(s){t=s});const r=this;this.promise.then(n=>{if(!r._listeners)return;let s=r._listeners.length;for(;s-- >0;)r._listeners[s](n);r._listeners=null}),this.promise.then=n=>{let s;const a=new Promise(o=>{r.subscribe(o),s=o}).then(n);return a.cancel=function(){r.unsubscribe(s)},a},e(function(s,a,o){r.reason||(r.reason=new wp(s,a,o),t(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);t!==-1&&this._listeners.splice(t,1)}toAbortSignal(){const e=new AbortController,t=r=>{e.abort(r)};return this.subscribe(t),e.signal.unsubscribe=()=>this.unsubscribe(t),e.signal}static source(){let e;return{token:new e3(function(n){e=n}),cancel:e}}};function b9(i){return function(t){return i.apply(null,t)}}function S9(i){return Ze.isObject(i)&&i.isAxiosError===!0}const j1={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(j1).forEach(([i,e])=>{j1[e]=i});function t3(i){const e=new ch(i),t=PM(ch.prototype.request,e);return Ze.extend(t,ch.prototype,e,{allOwnKeys:!0}),Ze.extend(t,e,null,{allOwnKeys:!0}),t.create=function(n){return t3(Sh(i,n))},t}const Wr=t3($0);Wr.Axios=ch;Wr.CanceledError=wp;Wr.CancelToken=T9;Wr.isCancel=WM;Wr.VERSION=ZM;Wr.toFormData=px;Wr.AxiosError=Or;Wr.Cancel=Wr.CanceledError;Wr.all=function(e){return Promise.all(e)};Wr.spread=b9;Wr.isAxiosError=S9;Wr.mergeConfig=Sh;Wr.AxiosHeaders=Da;Wr.formToJSON=i=>qM(Ze.isHTMLForm(i)?new FormData(i):i);Wr.getAdapter=JM.getAdapter;Wr.HttpStatusCode=j1;Wr.default=Wr;const{Axios:Ave,AxiosError:Ive,CanceledError:Dve,isCancel:Pve,CancelToken:Rve,VERSION:Lve,all:Ove,Cancel:Mve,isAxiosError:Fve,spread:Bve,toFormData:Nve,AxiosHeaders:Uve,HttpStatusCode:$ve,formToJSON:jve,getAdapter:zve,mergeConfig:Hve}=Wr,Zr={parseOneM3uData:i=>{let e=i.split(`
`);if(e.length>0){let t={};t.url=e[e.length-1];let r=[];if(e.length>2)for(let n=1;n<e.length-1;n++){let o=e[n].replace("#EXTVLCOPT:","").split("="),l=[];for(let y=0;y<o.length;y++)y!==0&&l.push(o[y]);let c=o[0].replace("http-","").split("-"),h=[];for(let y=0;y<c.length;y++)h.push(c[y].charAt(0).toUpperCase()+c[y].slice(1));let m=h.join("-"),g=l.join(":");r.push({key:m,value:g})}return t.tvgId=Zr.pregValue(e[0],"tvg-id"),t.copt=r,t.name=Zr.parseName(e[0]),t.logoUrl=Zr.pregValue(e[0],"tvg-logo"),t.exist=!0,t}return[]},parseM3uBody:(i,e=!1)=>{if(!i)return[];let t=i.split(`
`),r=[],n=null,s=1;for(let a=0;a<t.length;a++){let o=t[a].trim();if(o.startsWith("#EXTINF:")){n&&r.push(n),n=Zr.buildM3uBaseObject(),n.index=s;let l=Zr.parseName(o);e&&(l=l.replace(/[\[].*?[\]]/g,"").trim()),n.name=l,n.tvgName=Zr.pregValue(o,"tvg-name"),n.tvgId=Zr.pregValue(o,"tvg-id"),n.groupTitle=Zr.pregValue(o,"group-title"),n.tvgLogo=Zr.pregValue(o,"tvg-logo"),n.tvgLanguage=Zr.pregValue(o,"tvg-language"),n.tvgCountry=Zr.pregValue(o,"tvg-country")}else if(o.startsWith("#EXTVLCOPT:")){if(n){let l=o.replace("#EXTVLCOPT:","").split("=");l.length>=2&&n.copt.push({key:l[0],value:l.slice(1).join("=")})}}else o.startsWith("http")&&n&&(n.url=o,n.exist=!0,r.push(n),s++,n=null)}return n&&n.url&&r.push(n),r},parseOriginalBodyToList:(i,e)=>{const t=/#EXTINF:(.*)\n(#EXTVLCOPT:.*\n)*(http[s]*)(.*)/gm;let r=[],n;for(;(n=t.exec(i))!==null;){n.index===t.lastIndex&&t.lastIndex++;let a=[];n.forEach((o,l)=>{a.push(o)}),r.push(a)}let s=[];for(let a=0;a<r.length;a+=1)s.push(Zr.parseRowToData(a+1,"#EXTINF:"+r[a][1],r[a][3]+""+r[a][4],r[a][0]));return s.length===0?Zr.removeRepeatList(Zr.parseQuoteFormat(i),e):Zr.removeRepeatList(s,e)},removeRepeatList(i,e){let t={},r=[];for(let n=0;n<i.length;n++)if(t[i[n].url]===void 0){let s=i[n];e!==void 0&&e[i[n].url]!==void 0&&e[i[n].url]!==null&&(s={...s,...e[i[n].url]}),r.push(s),t[i[n].url]=!0}return r},parseQuoteFormat(i){let e=[],t="Undefined",r=i.split(`
`);for(let n=0;n<r.length;n++)if(r[n]!==""){let s=r[n].split(",");if(s!=="")if(s.length>=2&&Zr.checkStrIsLink(s[1])&&!Zr.checkStrIsLink(s[0])){let a='#EXTINF:-1 tvg-id="" tvg-logo="" group-title="Undefined",'+s[0]+`
`+s[1],o='#EXTINF:-1 tvg-id="" tvg-logo="" group-title="Undefined",'+s[0]+`
`+s[1],l=this.buildM3uBaseObject(n+1,s[1],t,"","","","",s[0],a,o);e.push(l)}else t=s[0];else t="Undefined"}if(e.length===0)throw new Error("");return e},buildM3uBaseObject(i,e,t,r,n,s,a,o,l,u){return o==null&&(o=""),{index:i,url:e,groupTitle:t,tvgLogo:r,tvgName:o,tvgLanguage:n,tvgCountry:s,tvgId:a,name:o,sName:Zr.removeNameExtraInfo(o.toLowerCase()).trim(),originalData:l,raw:u,copt:[],status:0,checked:!1,video:null,audio:null,videoType:"",delay:0}},getVideoResolutionList(){return[{name:"",value:"SD"},{name:"720P",value:"HD"},{name:"1080P",value:"FHD"},{name:"4K",value:"UHD"},{name:"8K",value:"FUHD"}]},getVideoResolution(i,e){return i<1280||e<720?"SD":i<1920||e<1080?"HD":i<3840||e<2160?"FHD":i<8192||e<4320?"UHD":"FUHD"},checkStrIsLink(i){const e=/(http|https|lwb|P2p|p2p|p9p|rmtp):\/\/([\w.]+\/?)\S*/;let t=[];return(t=e.exec(i))!==null&&t.forEach((r,n)=>{t.push(r)}),t!==null&&t.length>0},parseRowToData(i,e,t,r){let n=Zr.pregValue(e,"group-title");n===""&&(n="Undefined");let s=`${e}
${t}`;return this.buildM3uBaseObject(i,t,n,Zr.pregValue(e,"tvg-logo"),Zr.parseLanguages(Zr.pregValue(e,"tvg-language")),Zr.pregValue(e,"tvg-country"),Zr.pregValue(e,"tvg-id"),Zr.parseName(e),s,r)},parseName:i=>{const e=i.split(",");return e[e.length-1]},parseLanguages:i=>i!==""?i.split(";"):[],pregValue:(i,e)=>{let t;e==="group-title"?t=/group-title="(.*)"/gm:e==="tvg-logo"?t=/tvg-logo="(.*)"/gm:e==="tvg-language"?t=/tvg-language="(.*)"/gm:e==="tvg-country"?t=/tvg-country="(.*)"/gm:e==="tvg-id"?t=/tvg-id="(.*)"/gm:e==="tvg-name"&&(t=/tvg-name="(.*)"/gm);let r,n="";for(;(r=t.exec(i))!==null;)r.index===t.lastIndex&&(t.lastIndex+=1),r.forEach((s,a)=>{a===1&&(n=s)});return n!==""?n.split('" ')[0]:""},checkRespIsValudM3u8Data:i=>i.split(`
`)[0].indexOf("#EXTM3U")!==-1,removeNameExtraInfo:i=>{const e=/\((.*)/gm;let t,r=[];for(;(t=e.exec(i))!==null;)t.index===e.lastIndex&&e.lastIndex++,t.forEach((n,s)=>{r.push(n)});return r.length>=2?i.replace(r[0],""):i}};function C9(i,e,t,r){if(typeof e=="function"?i!==e||!r:!e.has(i))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?r:t==="a"?r.call(i):r?r.value:e.get(i)}function E9(i,e,t,r,n){if(typeof e=="function"?i!==e||!0:!e.has(i))throw new TypeError("Cannot write private member to an object whose class did not declare it");return e.set(i,t),t}var $v;const Lo="__TAURI_TO_IPC_KEY__";function w9(i,e=!1){return window.__TAURI_INTERNALS__.transformCallback(i,e)}async function Ct(i,e={},t){return window.__TAURI_INTERNALS__.invoke(i,e,t)}class k9{get rid(){return C9(this,$v,"f")}constructor(e){$v.set(this,void 0),E9(this,$v,e)}async close(){return Ct("plugin:resources|close",{rid:this.rid})}}$v=new WeakMap;const kr=i=>typeof i=="string",mm=()=>{let i,e;const t=new Promise((r,n)=>{i=r,e=n});return t.resolve=i,t.reject=e,t},EI=i=>i==null?"":""+i,A9=(i,e,t)=>{i.forEach(r=>{e[r]&&(t[r]=e[r])})},I9=/###/g,wI=i=>i&&i.indexOf("###")>-1?i.replace(I9,"."):i,kI=i=>!i||kr(i),Zm=(i,e,t)=>{const r=kr(e)?e.split("."):e;let n=0;for(;n<r.length-1;){if(kI(i))return{};const s=wI(r[n]);!i[s]&&t&&(i[s]=new t),Object.prototype.hasOwnProperty.call(i,s)?i=i[s]:i={},++n}return kI(i)?{}:{obj:i,k:wI(r[n])}},AI=(i,e,t)=>{const{obj:r,k:n}=Zm(i,e,Object);if(r!==void 0||e.length===1){r[n]=t;return}let s=e[e.length-1],a=e.slice(0,e.length-1),o=Zm(i,a,Object);for(;o.obj===void 0&&a.length;)s=`${a[a.length-1]}.${s}`,a=a.slice(0,a.length-1),o=Zm(i,a,Object),o&&o.obj&&typeof o.obj[`${o.k}.${s}`]<"u"&&(o.obj=void 0);o.obj[`${o.k}.${s}`]=t},D9=(i,e,t,r)=>{const{obj:n,k:s}=Zm(i,e,Object);n[s]=n[s]||[],n[s].push(t)},Ky=(i,e)=>{const{obj:t,k:r}=Zm(i,e);if(t)return t[r]},P9=(i,e,t)=>{const r=Ky(i,t);return r!==void 0?r:Ky(e,t)},r3=(i,e,t)=>{for(const r in e)r!=="__proto__"&&r!=="constructor"&&(r in i?kr(i[r])||i[r]instanceof String||kr(e[r])||e[r]instanceof String?t&&(i[r]=e[r]):r3(i[r],e[r],t):i[r]=e[r]);return i},tf=i=>i.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");var R9={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};const L9=i=>kr(i)?i.replace(/[&<>"'\/]/g,e=>R9[e]):i;class O9{constructor(e){this.capacity=e,this.regExpMap=new Map,this.regExpQueue=[]}getRegExp(e){const t=this.regExpMap.get(e);if(t!==void 0)return t;const r=new RegExp(e);return this.regExpQueue.length===this.capacity&&this.regExpMap.delete(this.regExpQueue.shift()),this.regExpMap.set(e,r),this.regExpQueue.push(e),r}}const M9=[" ",",","?","!",";"],F9=new O9(20),B9=(i,e,t)=>{e=e||"",t=t||"";const r=M9.filter(a=>e.indexOf(a)<0&&t.indexOf(a)<0);if(r.length===0)return!0;const n=F9.getRegExp(`(${r.map(a=>a==="?"?"\\?":a).join("|")})`);let s=!n.test(i);if(!s){const a=i.indexOf(t);a>0&&!n.test(i.substring(0,a))&&(s=!0)}return s},z1=function(i,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:".";if(!i)return;if(i[e])return i[e];const r=e.split(t);let n=i;for(let s=0;s<r.length;){if(!n||typeof n!="object")return;let a,o="";for(let l=s;l<r.length;++l)if(l!==s&&(o+=t),o+=r[l],a=n[o],a!==void 0){if(["string","number","boolean"].indexOf(typeof a)>-1&&l<r.length-1)continue;s+=l-s+1;break}n=a}return n},Xy=i=>i&&i.replace("_","-"),N9={type:"logger",log(i){this.output("log",i)},warn(i){this.output("warn",i)},error(i){this.output("error",i)},output(i,e){console&&console[i]&&console[i].apply(console,e)}};class Yy{constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.init(e,t)}init(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.prefix=t.prefix||"i18next:",this.logger=e||N9,this.options=t,this.debug=t.debug}log(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return this.forward(t,"log","",!0)}warn(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return this.forward(t,"warn","",!0)}error(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return this.forward(t,"error","")}deprecate(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return this.forward(t,"warn","WARNING DEPRECATED: ",!0)}forward(e,t,r,n){return n&&!this.debug?null:(kr(e[0])&&(e[0]=`${r}${this.prefix} ${e[0]}`),this.logger[t](e))}create(e){return new Yy(this.logger,{prefix:`${this.prefix}:${e}:`,...this.options})}clone(e){return e=e||this.options,e.prefix=e.prefix||this.prefix,new Yy(this.logger,e)}}var Xl=new Yy;class gx{constructor(){this.observers={}}on(e,t){return e.split(" ").forEach(r=>{this.observers[r]||(this.observers[r]=new Map);const n=this.observers[r].get(t)||0;this.observers[r].set(t,n+1)}),this}off(e,t){if(this.observers[e]){if(!t){delete this.observers[e];return}this.observers[e].delete(t)}}emit(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];this.observers[e]&&Array.from(this.observers[e].entries()).forEach(a=>{let[o,l]=a;for(let u=0;u<l;u++)o(...r)}),this.observers["*"]&&Array.from(this.observers["*"].entries()).forEach(a=>{let[o,l]=a;for(let u=0;u<l;u++)o.apply(o,[e,...r])})}}class II extends gx{constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{ns:["translation"],defaultNS:"translation"};super(),this.data=e||{},this.options=t,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.options.ignoreJSONStructure===void 0&&(this.options.ignoreJSONStructure=!0)}addNamespaces(e){this.options.ns.indexOf(e)<0&&this.options.ns.push(e)}removeNamespaces(e){const t=this.options.ns.indexOf(e);t>-1&&this.options.ns.splice(t,1)}getResource(e,t,r){let n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const s=n.keySeparator!==void 0?n.keySeparator:this.options.keySeparator,a=n.ignoreJSONStructure!==void 0?n.ignoreJSONStructure:this.options.ignoreJSONStructure;let o;e.indexOf(".")>-1?o=e.split("."):(o=[e,t],r&&(Array.isArray(r)?o.push(...r):kr(r)&&s?o.push(...r.split(s)):o.push(r)));const l=Ky(this.data,o);return!l&&!t&&!r&&e.indexOf(".")>-1&&(e=o[0],t=o[1],r=o.slice(2).join(".")),l||!a||!kr(r)?l:z1(this.data&&this.data[e]&&this.data[e][t],r,s)}addResource(e,t,r,n){let s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{silent:!1};const a=s.keySeparator!==void 0?s.keySeparator:this.options.keySeparator;let o=[e,t];r&&(o=o.concat(a?r.split(a):r)),e.indexOf(".")>-1&&(o=e.split("."),n=t,t=o[1]),this.addNamespaces(t),AI(this.data,o,n),s.silent||this.emit("added",e,t,r,n)}addResources(e,t,r){let n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{silent:!1};for(const s in r)(kr(r[s])||Array.isArray(r[s]))&&this.addResource(e,t,s,r[s],{silent:!0});n.silent||this.emit("added",e,t,r)}addResourceBundle(e,t,r,n,s){let a=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{silent:!1,skipCopy:!1},o=[e,t];e.indexOf(".")>-1&&(o=e.split("."),n=r,r=t,t=o[1]),this.addNamespaces(t);let l=Ky(this.data,o)||{};a.skipCopy||(r=JSON.parse(JSON.stringify(r))),n?r3(l,r,s):l={...l,...r},AI(this.data,o,l),a.silent||this.emit("added",e,t,r)}removeResourceBundle(e,t){this.hasResourceBundle(e,t)&&delete this.data[e][t],this.removeNamespaces(t),this.emit("removed",e,t)}hasResourceBundle(e,t){return this.getResource(e,t)!==void 0}getResourceBundle(e,t){return t||(t=this.options.defaultNS),this.options.compatibilityAPI==="v1"?{...this.getResource(e,t)}:this.getResource(e,t)}getDataByLanguage(e){return this.data[e]}hasLanguageSomeTranslations(e){const t=this.getDataByLanguage(e);return!!(t&&Object.keys(t)||[]).find(n=>t[n]&&Object.keys(t[n]).length>0)}toJSON(){return this.data}}var i3={processors:{},addPostProcessor(i){this.processors[i.name]=i},handle(i,e,t,r,n){return i.forEach(s=>{this.processors[s]&&(e=this.processors[s].process(e,t,r,n))}),e}};const DI={};class Qy extends gx{constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),A9(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],e,this),this.options=t,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.logger=Xl.create("translator")}changeLanguage(e){e&&(this.language=e)}exists(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}};if(e==null)return!1;const r=this.resolve(e,t);return r&&r.res!==void 0}extractFromKey(e,t){let r=t.nsSeparator!==void 0?t.nsSeparator:this.options.nsSeparator;r===void 0&&(r=":");const n=t.keySeparator!==void 0?t.keySeparator:this.options.keySeparator;let s=t.ns||this.options.defaultNS||[];const a=r&&e.indexOf(r)>-1,o=!this.options.userDefinedKeySeparator&&!t.keySeparator&&!this.options.userDefinedNsSeparator&&!t.nsSeparator&&!B9(e,r,n);if(a&&!o){const l=e.match(this.interpolator.nestingRegexp);if(l&&l.length>0)return{key:e,namespaces:kr(s)?[s]:s};const u=e.split(r);(r!==n||r===n&&this.options.ns.indexOf(u[0])>-1)&&(s=u.shift()),e=u.join(n)}return{key:e,namespaces:kr(s)?[s]:s}}translate(e,t,r){if(typeof t!="object"&&this.options.overloadTranslationOptionHandler&&(t=this.options.overloadTranslationOptionHandler(arguments)),typeof t=="object"&&(t={...t}),t||(t={}),e==null)return"";Array.isArray(e)||(e=[String(e)]);const n=t.returnDetails!==void 0?t.returnDetails:this.options.returnDetails,s=t.keySeparator!==void 0?t.keySeparator:this.options.keySeparator,{key:a,namespaces:o}=this.extractFromKey(e[e.length-1],t),l=o[o.length-1],u=t.lng||this.language,c=t.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(u&&u.toLowerCase()==="cimode"){if(c){const R=t.nsSeparator||this.options.nsSeparator;return n?{res:`${l}${R}${a}`,usedKey:a,exactUsedKey:a,usedLng:u,usedNS:l,usedParams:this.getUsedParamsDetails(t)}:`${l}${R}${a}`}return n?{res:a,usedKey:a,exactUsedKey:a,usedLng:u,usedNS:l,usedParams:this.getUsedParamsDetails(t)}:a}const h=this.resolve(e,t);let m=h&&h.res;const g=h&&h.usedKey||a,y=h&&h.exactUsedKey||a,_=Object.prototype.toString.apply(m),T=["[object Number]","[object Function]","[object RegExp]"],E=t.joinArrays!==void 0?t.joinArrays:this.options.joinArrays,w=!this.i18nFormat||this.i18nFormat.handleAsObject,D=!kr(m)&&typeof m!="boolean"&&typeof m!="number";if(w&&m&&D&&T.indexOf(_)<0&&!(kr(E)&&Array.isArray(m))){if(!t.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");const R=this.options.returnedObjectHandler?this.options.returnedObjectHandler(g,m,{...t,ns:o}):`key '${a} (${this.language})' returned an object instead of string.`;return n?(h.res=R,h.usedParams=this.getUsedParamsDetails(t),h):R}if(s){const R=Array.isArray(m),A=R?[]:{},L=R?y:g;for(const F in m)if(Object.prototype.hasOwnProperty.call(m,F)){const B=`${L}${s}${F}`;A[F]=this.translate(B,{...t,joinArrays:!1,ns:o}),A[F]===B&&(A[F]=m[F])}m=A}}else if(w&&kr(E)&&Array.isArray(m))m=m.join(E),m&&(m=this.extendTranslation(m,e,t,r));else{let R=!1,A=!1;const L=t.count!==void 0&&!kr(t.count),F=Qy.hasDefaultValue(t),B=L?this.pluralResolver.getSuffix(u,t.count,t):"",M=t.ordinal&&L?this.pluralResolver.getSuffix(u,t.count,{ordinal:!1}):"",k=L&&!t.ordinal&&t.count===0&&this.pluralResolver.shouldUseIntlApi(),q=k&&t[`defaultValue${this.options.pluralSeparator}zero`]||t[`defaultValue${B}`]||t[`defaultValue${M}`]||t.defaultValue;!this.isValidLookup(m)&&F&&(R=!0,m=q),this.isValidLookup(m)||(A=!0,m=a);const H=(t.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&A?void 0:m,re=F&&q!==m&&this.options.updateMissing;if(A||R||re){if(this.logger.log(re?"updateKey":"missingKey",u,l,a,re?q:m),s){const ue=this.resolve(a,{...t,keySeparator:!1});ue&&ue.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let se=[];const de=this.languageUtils.getFallbackCodes(this.options.fallbackLng,t.lng||this.language);if(this.options.saveMissingTo==="fallback"&&de&&de[0])for(let ue=0;ue<de.length;ue++)se.push(de[ue]);else this.options.saveMissingTo==="all"?se=this.languageUtils.toResolveHierarchy(t.lng||this.language):se.push(t.lng||this.language);const me=(ue,oe,ce)=>{const te=F&&ce!==m?ce:H;this.options.missingKeyHandler?this.options.missingKeyHandler(ue,l,oe,te,re,t):this.backendConnector&&this.backendConnector.saveMissing&&this.backendConnector.saveMissing(ue,l,oe,te,re,t),this.emit("missingKey",ue,l,oe,m)};this.options.saveMissing&&(this.options.saveMissingPlurals&&L?se.forEach(ue=>{const oe=this.pluralResolver.getSuffixes(ue,t);k&&t[`defaultValue${this.options.pluralSeparator}zero`]&&oe.indexOf(`${this.options.pluralSeparator}zero`)<0&&oe.push(`${this.options.pluralSeparator}zero`),oe.forEach(ce=>{me([ue],a+ce,t[`defaultValue${ce}`]||q)})}):me(se,a,q))}m=this.extendTranslation(m,e,t,h,r),A&&m===a&&this.options.appendNamespaceToMissingKey&&(m=`${l}:${a}`),(A||R)&&this.options.parseMissingKeyHandler&&(this.options.compatibilityAPI!=="v1"?m=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?`${l}:${a}`:a,R?m:void 0):m=this.options.parseMissingKeyHandler(m))}return n?(h.res=m,h.usedParams=this.getUsedParamsDetails(t),h):m}extendTranslation(e,t,r,n,s){var a=this;if(this.i18nFormat&&this.i18nFormat.parse)e=this.i18nFormat.parse(e,{...this.options.interpolation.defaultVariables,...r},r.lng||this.language||n.usedLng,n.usedNS,n.usedKey,{resolved:n});else if(!r.skipInterpolation){r.interpolation&&this.interpolator.init({...r,interpolation:{...this.options.interpolation,...r.interpolation}});const u=kr(e)&&(r&&r.interpolation&&r.interpolation.skipOnVariables!==void 0?r.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);let c;if(u){const m=e.match(this.interpolator.nestingRegexp);c=m&&m.length}let h=r.replace&&!kr(r.replace)?r.replace:r;if(this.options.interpolation.defaultVariables&&(h={...this.options.interpolation.defaultVariables,...h}),e=this.interpolator.interpolate(e,h,r.lng||this.language||n.usedLng,r),u){const m=e.match(this.interpolator.nestingRegexp),g=m&&m.length;c<g&&(r.nest=!1)}!r.lng&&this.options.compatibilityAPI!=="v1"&&n&&n.res&&(r.lng=this.language||n.usedLng),r.nest!==!1&&(e=this.interpolator.nest(e,function(){for(var m=arguments.length,g=new Array(m),y=0;y<m;y++)g[y]=arguments[y];return s&&s[0]===g[0]&&!r.context?(a.logger.warn(`It seems you are nesting recursively key: ${g[0]} in key: ${t[0]}`),null):a.translate(...g,t)},r)),r.interpolation&&this.interpolator.reset()}const o=r.postProcess||this.options.postProcess,l=kr(o)?[o]:o;return e!=null&&l&&l.length&&r.applyPostProcessor!==!1&&(e=i3.handle(l,e,t,this.options&&this.options.postProcessPassResolved?{i18nResolved:{...n,usedParams:this.getUsedParamsDetails(r)},...r}:r,this)),e}resolve(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r,n,s,a,o;return kr(e)&&(e=[e]),e.forEach(l=>{if(this.isValidLookup(r))return;const u=this.extractFromKey(l,t),c=u.key;n=c;let h=u.namespaces;this.options.fallbackNS&&(h=h.concat(this.options.fallbackNS));const m=t.count!==void 0&&!kr(t.count),g=m&&!t.ordinal&&t.count===0&&this.pluralResolver.shouldUseIntlApi(),y=t.context!==void 0&&(kr(t.context)||typeof t.context=="number")&&t.context!=="",_=t.lngs?t.lngs:this.languageUtils.toResolveHierarchy(t.lng||this.language,t.fallbackLng);h.forEach(T=>{this.isValidLookup(r)||(o=T,!DI[`${_[0]}-${T}`]&&this.utils&&this.utils.hasLoadedNamespace&&!this.utils.hasLoadedNamespace(o)&&(DI[`${_[0]}-${T}`]=!0,this.logger.warn(`key "${n}" for languages "${_.join(", ")}" won't get resolved as namespace "${o}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),_.forEach(E=>{if(this.isValidLookup(r))return;a=E;const w=[c];if(this.i18nFormat&&this.i18nFormat.addLookupKeys)this.i18nFormat.addLookupKeys(w,c,E,T,t);else{let R;m&&(R=this.pluralResolver.getSuffix(E,t.count,t));const A=`${this.options.pluralSeparator}zero`,L=`${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;if(m&&(w.push(c+R),t.ordinal&&R.indexOf(L)===0&&w.push(c+R.replace(L,this.options.pluralSeparator)),g&&w.push(c+A)),y){const F=`${c}${this.options.contextSeparator}${t.context}`;w.push(F),m&&(w.push(F+R),t.ordinal&&R.indexOf(L)===0&&w.push(F+R.replace(L,this.options.pluralSeparator)),g&&w.push(F+A))}}let D;for(;D=w.pop();)this.isValidLookup(r)||(s=D,r=this.getResource(E,T,D,t))}))})}),{res:r,usedKey:n,exactUsedKey:s,usedLng:a,usedNS:o}}isValidLookup(e){return e!==void 0&&!(!this.options.returnNull&&e===null)&&!(!this.options.returnEmptyString&&e==="")}getResource(e,t,r){let n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return this.i18nFormat&&this.i18nFormat.getResource?this.i18nFormat.getResource(e,t,r,n):this.resourceStore.getResource(e,t,r,n)}getUsedParamsDetails(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const t=["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"],r=e.replace&&!kr(e.replace);let n=r?e.replace:e;if(r&&typeof e.count<"u"&&(n.count=e.count),this.options.interpolation.defaultVariables&&(n={...this.options.interpolation.defaultVariables,...n}),!r){n={...n};for(const s of t)delete n[s]}return n}static hasDefaultValue(e){const t="defaultValue";for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&t===r.substring(0,t.length)&&e[r]!==void 0)return!0;return!1}}const Hb=i=>i.charAt(0).toUpperCase()+i.slice(1);class PI{constructor(e){this.options=e,this.supportedLngs=this.options.supportedLngs||!1,this.logger=Xl.create("languageUtils")}getScriptPartFromCode(e){if(e=Xy(e),!e||e.indexOf("-")<0)return null;const t=e.split("-");return t.length===2||(t.pop(),t[t.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(t.join("-"))}getLanguagePartFromCode(e){if(e=Xy(e),!e||e.indexOf("-")<0)return e;const t=e.split("-");return this.formatLanguageCode(t[0])}formatLanguageCode(e){if(kr(e)&&e.indexOf("-")>-1){if(typeof Intl<"u"&&typeof Intl.getCanonicalLocales<"u")try{let n=Intl.getCanonicalLocales(e)[0];if(n&&this.options.lowerCaseLng&&(n=n.toLowerCase()),n)return n}catch{}const t=["hans","hant","latn","cyrl","cans","mong","arab"];let r=e.split("-");return this.options.lowerCaseLng?r=r.map(n=>n.toLowerCase()):r.length===2?(r[0]=r[0].toLowerCase(),r[1]=r[1].toUpperCase(),t.indexOf(r[1].toLowerCase())>-1&&(r[1]=Hb(r[1].toLowerCase()))):r.length===3&&(r[0]=r[0].toLowerCase(),r[1].length===2&&(r[1]=r[1].toUpperCase()),r[0]!=="sgn"&&r[2].length===2&&(r[2]=r[2].toUpperCase()),t.indexOf(r[1].toLowerCase())>-1&&(r[1]=Hb(r[1].toLowerCase())),t.indexOf(r[2].toLowerCase())>-1&&(r[2]=Hb(r[2].toLowerCase()))),r.join("-")}return this.options.cleanCode||this.options.lowerCaseLng?e.toLowerCase():e}isSupportedCode(e){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(e=this.getLanguagePartFromCode(e)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(e)>-1}getBestMatchFromCodes(e){if(!e)return null;let t;return e.forEach(r=>{if(t)return;const n=this.formatLanguageCode(r);(!this.options.supportedLngs||this.isSupportedCode(n))&&(t=n)}),!t&&this.options.supportedLngs&&e.forEach(r=>{if(t)return;const n=this.getLanguagePartFromCode(r);if(this.isSupportedCode(n))return t=n;t=this.options.supportedLngs.find(s=>{if(s===n)return s;if(!(s.indexOf("-")<0&&n.indexOf("-")<0)&&(s.indexOf("-")>0&&n.indexOf("-")<0&&s.substring(0,s.indexOf("-"))===n||s.indexOf(n)===0&&n.length>1))return s})}),t||(t=this.getFallbackCodes(this.options.fallbackLng)[0]),t}getFallbackCodes(e,t){if(!e)return[];if(typeof e=="function"&&(e=e(t)),kr(e)&&(e=[e]),Array.isArray(e))return e;if(!t)return e.default||[];let r=e[t];return r||(r=e[this.getScriptPartFromCode(t)]),r||(r=e[this.formatLanguageCode(t)]),r||(r=e[this.getLanguagePartFromCode(t)]),r||(r=e.default),r||[]}toResolveHierarchy(e,t){const r=this.getFallbackCodes(t||this.options.fallbackLng||[],e),n=[],s=a=>{a&&(this.isSupportedCode(a)?n.push(a):this.logger.warn(`rejecting language code not found in supportedLngs: ${a}`))};return kr(e)&&(e.indexOf("-")>-1||e.indexOf("_")>-1)?(this.options.load!=="languageOnly"&&s(this.formatLanguageCode(e)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&s(this.getScriptPartFromCode(e)),this.options.load!=="currentOnly"&&s(this.getLanguagePartFromCode(e))):kr(e)&&s(this.formatLanguageCode(e)),r.forEach(a=>{n.indexOf(a)<0&&s(this.formatLanguageCode(a))}),n}}let U9=[{lngs:["ach","ak","am","arn","br","fil","gun","ln","mfe","mg","mi","oc","pt","pt-BR","tg","tl","ti","tr","uz","wa"],nr:[1,2],fc:1},{lngs:["af","an","ast","az","bg","bn","ca","da","de","dev","el","en","eo","es","et","eu","fi","fo","fur","fy","gl","gu","ha","hi","hu","hy","ia","it","kk","kn","ku","lb","mai","ml","mn","mr","nah","nap","nb","ne","nl","nn","no","nso","pa","pap","pms","ps","pt-PT","rm","sco","se","si","so","son","sq","sv","sw","ta","te","tk","ur","yo"],nr:[1,2],fc:2},{lngs:["ay","bo","cgg","fa","ht","id","ja","jbo","ka","km","ko","ky","lo","ms","sah","su","th","tt","ug","vi","wo","zh"],nr:[1],fc:3},{lngs:["be","bs","cnr","dz","hr","ru","sr","uk"],nr:[1,2,5],fc:4},{lngs:["ar"],nr:[0,1,2,3,11,100],fc:5},{lngs:["cs","sk"],nr:[1,2,5],fc:6},{lngs:["csb","pl"],nr:[1,2,5],fc:7},{lngs:["cy"],nr:[1,2,3,8],fc:8},{lngs:["fr"],nr:[1,2],fc:9},{lngs:["ga"],nr:[1,2,3,7,11],fc:10},{lngs:["gd"],nr:[1,2,3,20],fc:11},{lngs:["is"],nr:[1,2],fc:12},{lngs:["jv"],nr:[0,1],fc:13},{lngs:["kw"],nr:[1,2,3,4],fc:14},{lngs:["lt"],nr:[1,2,10],fc:15},{lngs:["lv"],nr:[1,2,0],fc:16},{lngs:["mk"],nr:[1,2],fc:17},{lngs:["mnk"],nr:[0,1,2],fc:18},{lngs:["mt"],nr:[1,2,11,20],fc:19},{lngs:["or"],nr:[2,1],fc:2},{lngs:["ro"],nr:[1,2,20],fc:20},{lngs:["sl"],nr:[5,1,2,3],fc:21},{lngs:["he","iw"],nr:[1,2,20,21],fc:22}],$9={1:i=>+(i>1),2:i=>+(i!=1),3:i=>0,4:i=>i%10==1&&i%100!=11?0:i%10>=2&&i%10<=4&&(i%100<10||i%100>=20)?1:2,5:i=>i==0?0:i==1?1:i==2?2:i%100>=3&&i%100<=10?3:i%100>=11?4:5,6:i=>i==1?0:i>=2&&i<=4?1:2,7:i=>i==1?0:i%10>=2&&i%10<=4&&(i%100<10||i%100>=20)?1:2,8:i=>i==1?0:i==2?1:i!=8&&i!=11?2:3,9:i=>+(i>=2),10:i=>i==1?0:i==2?1:i<7?2:i<11?3:4,11:i=>i==1||i==11?0:i==2||i==12?1:i>2&&i<20?2:3,12:i=>+(i%10!=1||i%100==11),13:i=>+(i!==0),14:i=>i==1?0:i==2?1:i==3?2:3,15:i=>i%10==1&&i%100!=11?0:i%10>=2&&(i%100<10||i%100>=20)?1:2,16:i=>i%10==1&&i%100!=11?0:i!==0?1:2,17:i=>i==1||i%10==1&&i%100!=11?0:1,18:i=>i==0?0:i==1?1:2,19:i=>i==1?0:i==0||i%100>1&&i%100<11?1:i%100>10&&i%100<20?2:3,20:i=>i==1?0:i==0||i%100>0&&i%100<20?1:2,21:i=>i%100==1?1:i%100==2?2:i%100==3||i%100==4?3:0,22:i=>i==1?0:i==2?1:(i<0||i>10)&&i%10==0?2:3};const j9=["v1","v2","v3"],z9=["v4"],RI={zero:0,one:1,two:2,few:3,many:4,other:5},H9=()=>{const i={};return U9.forEach(e=>{e.lngs.forEach(t=>{i[t]={numbers:e.nr,plurals:$9[e.fc]}})}),i};class V9{constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.languageUtils=e,this.options=t,this.logger=Xl.create("pluralResolver"),(!this.options.compatibilityJSON||z9.includes(this.options.compatibilityJSON))&&(typeof Intl>"u"||!Intl.PluralRules)&&(this.options.compatibilityJSON="v3",this.logger.error("Your environment seems not to be Intl API compatible, use an Intl.PluralRules polyfill. Will fallback to the compatibilityJSON v3 format handling.")),this.rules=H9(),this.pluralRulesCache={}}addRule(e,t){this.rules[e]=t}clearCache(){this.pluralRulesCache={}}getRule(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(this.shouldUseIntlApi()){const r=Xy(e==="dev"?"en":e),n=t.ordinal?"ordinal":"cardinal",s=JSON.stringify({cleanedCode:r,type:n});if(s in this.pluralRulesCache)return this.pluralRulesCache[s];let a;try{a=new Intl.PluralRules(r,{type:n})}catch{if(!e.match(/-|_/))return;const l=this.languageUtils.getLanguagePartFromCode(e);a=this.getRule(l,t)}return this.pluralRulesCache[s]=a,a}return this.rules[e]||this.rules[this.languageUtils.getLanguagePartFromCode(e)]}needsPlural(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const r=this.getRule(e,t);return this.shouldUseIntlApi()?r&&r.resolvedOptions().pluralCategories.length>1:r&&r.numbers.length>1}getPluralFormsOfKey(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.getSuffixes(e,r).map(n=>`${t}${n}`)}getSuffixes(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const r=this.getRule(e,t);return r?this.shouldUseIntlApi()?r.resolvedOptions().pluralCategories.sort((n,s)=>RI[n]-RI[s]).map(n=>`${this.options.prepend}${t.ordinal?`ordinal${this.options.prepend}`:""}${n}`):r.numbers.map(n=>this.getSuffix(e,n,t)):[]}getSuffix(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const n=this.getRule(e,r);return n?this.shouldUseIntlApi()?`${this.options.prepend}${r.ordinal?`ordinal${this.options.prepend}`:""}${n.select(t)}`:this.getSuffixRetroCompatible(n,t):(this.logger.warn(`no plural rule found for: ${e}`),"")}getSuffixRetroCompatible(e,t){const r=e.noAbs?e.plurals(t):e.plurals(Math.abs(t));let n=e.numbers[r];this.options.simplifyPluralSuffix&&e.numbers.length===2&&e.numbers[0]===1&&(n===2?n="plural":n===1&&(n=""));const s=()=>this.options.prepend&&n.toString()?this.options.prepend+n.toString():n.toString();return this.options.compatibilityJSON==="v1"?n===1?"":typeof n=="number"?`_plural_${n.toString()}`:s():this.options.compatibilityJSON==="v2"||this.options.simplifyPluralSuffix&&e.numbers.length===2&&e.numbers[0]===1?s():this.options.prepend&&r.toString()?this.options.prepend+r.toString():r.toString()}shouldUseIntlApi(){return!j9.includes(this.options.compatibilityJSON)}}const LI=function(i,e,t){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:".",n=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,s=P9(i,e,t);return!s&&n&&kr(t)&&(s=z1(i,t,r),s===void 0&&(s=z1(e,t,r))),s},Vb=i=>i.replace(/\$/g,"$$$$");class q9{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.logger=Xl.create("interpolator"),this.options=e,this.format=e.interpolation&&e.interpolation.format||(t=>t),this.init(e)}init(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};e.interpolation||(e.interpolation={escapeValue:!0});const{escape:t,escapeValue:r,useRawValueToEscape:n,prefix:s,prefixEscaped:a,suffix:o,suffixEscaped:l,formatSeparator:u,unescapeSuffix:c,unescapePrefix:h,nestingPrefix:m,nestingPrefixEscaped:g,nestingSuffix:y,nestingSuffixEscaped:_,nestingOptionsSeparator:T,maxReplaces:E,alwaysFormat:w}=e.interpolation;this.escape=t!==void 0?t:L9,this.escapeValue=r!==void 0?r:!0,this.useRawValueToEscape=n!==void 0?n:!1,this.prefix=s?tf(s):a||"{{",this.suffix=o?tf(o):l||"}}",this.formatSeparator=u||",",this.unescapePrefix=c?"":h||"-",this.unescapeSuffix=this.unescapePrefix?"":c||"",this.nestingPrefix=m?tf(m):g||tf("$t("),this.nestingSuffix=y?tf(y):_||tf(")"),this.nestingOptionsSeparator=T||",",this.maxReplaces=E||1e3,this.alwaysFormat=w!==void 0?w:!1,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){const e=(t,r)=>t&&t.source===r?(t.lastIndex=0,t):new RegExp(r,"g");this.regexp=e(this.regexp,`${this.prefix}(.+?)${this.suffix}`),this.regexpUnescape=e(this.regexpUnescape,`${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`),this.nestingRegexp=e(this.nestingRegexp,`${this.nestingPrefix}(.+?)${this.nestingSuffix}`)}interpolate(e,t,r,n){let s,a,o;const l=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{},u=g=>{if(g.indexOf(this.formatSeparator)<0){const E=LI(t,l,g,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(E,void 0,r,{...n,...t,interpolationkey:g}):E}const y=g.split(this.formatSeparator),_=y.shift().trim(),T=y.join(this.formatSeparator).trim();return this.format(LI(t,l,_,this.options.keySeparator,this.options.ignoreJSONStructure),T,r,{...n,...t,interpolationkey:_})};this.resetRegExp();const c=n&&n.missingInterpolationHandler||this.options.missingInterpolationHandler,h=n&&n.interpolation&&n.interpolation.skipOnVariables!==void 0?n.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:g=>Vb(g)},{regex:this.regexp,safeValue:g=>this.escapeValue?Vb(this.escape(g)):Vb(g)}].forEach(g=>{for(o=0;s=g.regex.exec(e);){const y=s[1].trim();if(a=u(y),a===void 0)if(typeof c=="function"){const T=c(e,s,n);a=kr(T)?T:""}else if(n&&Object.prototype.hasOwnProperty.call(n,y))a="";else if(h){a=s[0];continue}else this.logger.warn(`missed to pass in variable ${y} for interpolating ${e}`),a="";else!kr(a)&&!this.useRawValueToEscape&&(a=EI(a));const _=g.safeValue(a);if(e=e.replace(s[0],_),h?(g.regex.lastIndex+=a.length,g.regex.lastIndex-=s[0].length):g.regex.lastIndex=0,o++,o>=this.maxReplaces)break}}),e}nest(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},n,s,a;const o=(l,u)=>{const c=this.nestingOptionsSeparator;if(l.indexOf(c)<0)return l;const h=l.split(new RegExp(`${c}[ ]*{`));let m=`{${h[1]}`;l=h[0],m=this.interpolate(m,a);const g=m.match(/'/g),y=m.match(/"/g);(g&&g.length%2===0&&!y||y.length%2!==0)&&(m=m.replace(/'/g,'"'));try{a=JSON.parse(m),u&&(a={...u,...a})}catch(_){return this.logger.warn(`failed parsing options string in nesting for key ${l}`,_),`${l}${c}${m}`}return a.defaultValue&&a.defaultValue.indexOf(this.prefix)>-1&&delete a.defaultValue,l};for(;n=this.nestingRegexp.exec(e);){let l=[];a={...r},a=a.replace&&!kr(a.replace)?a.replace:a,a.applyPostProcessor=!1,delete a.defaultValue;let u=!1;if(n[0].indexOf(this.formatSeparator)!==-1&&!/{.*}/.test(n[1])){const c=n[1].split(this.formatSeparator).map(h=>h.trim());n[1]=c.shift(),l=c,u=!0}if(s=t(o.call(this,n[1].trim(),a),a),s&&n[0]===e&&!kr(s))return s;kr(s)||(s=EI(s)),s||(this.logger.warn(`missed to resolve ${n[1]} for nesting ${e}`),s=""),u&&(s=l.reduce((c,h)=>this.format(c,h,r.lng,{...r,interpolationkey:n[1].trim()}),s.trim())),e=e.replace(n[0],s),this.regexp.lastIndex=0}return e}}const W9=i=>{let e=i.toLowerCase().trim();const t={};if(i.indexOf("(")>-1){const r=i.split("(");e=r[0].toLowerCase().trim();const n=r[1].substring(0,r[1].length-1);e==="currency"&&n.indexOf(":")<0?t.currency||(t.currency=n.trim()):e==="relativetime"&&n.indexOf(":")<0?t.range||(t.range=n.trim()):n.split(";").forEach(a=>{if(a){const[o,...l]=a.split(":"),u=l.join(":").trim().replace(/^'+|'+$/g,""),c=o.trim();t[c]||(t[c]=u),u==="false"&&(t[c]=!1),u==="true"&&(t[c]=!0),isNaN(u)||(t[c]=parseInt(u,10))}})}return{formatName:e,formatOptions:t}},rf=i=>{const e={};return(t,r,n)=>{let s=n;n&&n.interpolationkey&&n.formatParams&&n.formatParams[n.interpolationkey]&&n[n.interpolationkey]&&(s={...s,[n.interpolationkey]:void 0});const a=r+JSON.stringify(s);let o=e[a];return o||(o=i(Xy(r),n),e[a]=o),o(t)}};class G9{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.logger=Xl.create("formatter"),this.options=e,this.formats={number:rf((t,r)=>{const n=new Intl.NumberFormat(t,{...r});return s=>n.format(s)}),currency:rf((t,r)=>{const n=new Intl.NumberFormat(t,{...r,style:"currency"});return s=>n.format(s)}),datetime:rf((t,r)=>{const n=new Intl.DateTimeFormat(t,{...r});return s=>n.format(s)}),relativetime:rf((t,r)=>{const n=new Intl.RelativeTimeFormat(t,{...r});return s=>n.format(s,r.range||"day")}),list:rf((t,r)=>{const n=new Intl.ListFormat(t,{...r});return s=>n.format(s)})},this.init(e)}init(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}};this.formatSeparator=t.interpolation.formatSeparator||","}add(e,t){this.formats[e.toLowerCase().trim()]=t}addCached(e,t){this.formats[e.toLowerCase().trim()]=rf(t)}format(e,t,r){let n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const s=t.split(this.formatSeparator);if(s.length>1&&s[0].indexOf("(")>1&&s[0].indexOf(")")<0&&s.find(o=>o.indexOf(")")>-1)){const o=s.findIndex(l=>l.indexOf(")")>-1);s[0]=[s[0],...s.splice(1,o)].join(this.formatSeparator)}return s.reduce((o,l)=>{const{formatName:u,formatOptions:c}=W9(l);if(this.formats[u]){let h=o;try{const m=n&&n.formatParams&&n.formatParams[n.interpolationkey]||{},g=m.locale||m.lng||n.locale||n.lng||r;h=this.formats[u](o,g,{...c,...n,...m})}catch(m){this.logger.warn(m)}return h}else this.logger.warn(`there was no format function for ${u}`);return o},e)}}const K9=(i,e)=>{i.pending[e]!==void 0&&(delete i.pending[e],i.pendingCount--)};class X9 extends gx{constructor(e,t,r){let n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};super(),this.backend=e,this.store=t,this.services=r,this.languageUtils=r.languageUtils,this.options=n,this.logger=Xl.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=n.maxParallelReads||10,this.readingCalls=0,this.maxRetries=n.maxRetries>=0?n.maxRetries:5,this.retryTimeout=n.retryTimeout>=1?n.retryTimeout:350,this.state={},this.queue=[],this.backend&&this.backend.init&&this.backend.init(r,n.backend,n)}queueLoad(e,t,r,n){const s={},a={},o={},l={};return e.forEach(u=>{let c=!0;t.forEach(h=>{const m=`${u}|${h}`;!r.reload&&this.store.hasResourceBundle(u,h)?this.state[m]=2:this.state[m]<0||(this.state[m]===1?a[m]===void 0&&(a[m]=!0):(this.state[m]=1,c=!1,a[m]===void 0&&(a[m]=!0),s[m]===void 0&&(s[m]=!0),l[h]===void 0&&(l[h]=!0)))}),c||(o[u]=!0)}),(Object.keys(s).length||Object.keys(a).length)&&this.queue.push({pending:a,pendingCount:Object.keys(a).length,loaded:{},errors:[],callback:n}),{toLoad:Object.keys(s),pending:Object.keys(a),toLoadLanguages:Object.keys(o),toLoadNamespaces:Object.keys(l)}}loaded(e,t,r){const n=e.split("|"),s=n[0],a=n[1];t&&this.emit("failedLoading",s,a,t),!t&&r&&this.store.addResourceBundle(s,a,r,void 0,void 0,{skipCopy:!0}),this.state[e]=t?-1:2,t&&r&&(this.state[e]=0);const o={};this.queue.forEach(l=>{D9(l.loaded,[s],a),K9(l,e),t&&l.errors.push(t),l.pendingCount===0&&!l.done&&(Object.keys(l.loaded).forEach(u=>{o[u]||(o[u]={});const c=l.loaded[u];c.length&&c.forEach(h=>{o[u][h]===void 0&&(o[u][h]=!0)})}),l.done=!0,l.errors.length?l.callback(l.errors):l.callback())}),this.emit("loaded",o),this.queue=this.queue.filter(l=>!l.done)}read(e,t,r){let n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:this.retryTimeout,a=arguments.length>5?arguments[5]:void 0;if(!e.length)return a(null,{});if(this.readingCalls>=this.maxParallelReads){this.waitingReads.push({lng:e,ns:t,fcName:r,tried:n,wait:s,callback:a});return}this.readingCalls++;const o=(u,c)=>{if(this.readingCalls--,this.waitingReads.length>0){const h=this.waitingReads.shift();this.read(h.lng,h.ns,h.fcName,h.tried,h.wait,h.callback)}if(u&&c&&n<this.maxRetries){setTimeout(()=>{this.read.call(this,e,t,r,n+1,s*2,a)},s);return}a(u,c)},l=this.backend[r].bind(this.backend);if(l.length===2){try{const u=l(e,t);u&&typeof u.then=="function"?u.then(c=>o(null,c)).catch(o):o(null,u)}catch(u){o(u)}return}return l(e,t,o)}prepareLoading(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},n=arguments.length>3?arguments[3]:void 0;if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),n&&n();kr(e)&&(e=this.languageUtils.toResolveHierarchy(e)),kr(t)&&(t=[t]);const s=this.queueLoad(e,t,r,n);if(!s.toLoad.length)return s.pending.length||n(),null;s.toLoad.forEach(a=>{this.loadOne(a)})}load(e,t,r){this.prepareLoading(e,t,{},r)}reload(e,t,r){this.prepareLoading(e,t,{reload:!0},r)}loadOne(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";const r=e.split("|"),n=r[0],s=r[1];this.read(n,s,"read",void 0,void 0,(a,o)=>{a&&this.logger.warn(`${t}loading namespace ${s} for language ${n} failed`,a),!a&&o&&this.logger.log(`${t}loaded namespace ${s} for language ${n}`,o),this.loaded(e,a,o)})}saveMissing(e,t,r,n,s){let a=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{},o=arguments.length>6&&arguments[6]!==void 0?arguments[6]:()=>{};if(this.services.utils&&this.services.utils.hasLoadedNamespace&&!this.services.utils.hasLoadedNamespace(t)){this.logger.warn(`did not save key "${r}" as the namespace "${t}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}if(!(r==null||r==="")){if(this.backend&&this.backend.create){const l={...a,isUpdate:s},u=this.backend.create.bind(this.backend);if(u.length<6)try{let c;u.length===5?c=u(e,t,r,n,l):c=u(e,t,r,n),c&&typeof c.then=="function"?c.then(h=>o(null,h)).catch(o):o(null,c)}catch(c){o(c)}else u(e,t,r,n,o,l)}!e||!e[0]||this.store.addResource(e[0],t,r,n)}}}const OI=()=>({debug:!1,initImmediate:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:i=>{let e={};if(typeof i[1]=="object"&&(e=i[1]),kr(i[1])&&(e.defaultValue=i[1]),kr(i[2])&&(e.tDescription=i[2]),typeof i[2]=="object"||typeof i[3]=="object"){const t=i[3]||i[2];Object.keys(t).forEach(r=>{e[r]=t[r]})}return e},interpolation:{escapeValue:!0,format:i=>i,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0}}),MI=i=>(kr(i.ns)&&(i.ns=[i.ns]),kr(i.fallbackLng)&&(i.fallbackLng=[i.fallbackLng]),kr(i.fallbackNS)&&(i.fallbackNS=[i.fallbackNS]),i.supportedLngs&&i.supportedLngs.indexOf("cimode")<0&&(i.supportedLngs=i.supportedLngs.concat(["cimode"])),i),tv=()=>{},Y9=i=>{Object.getOwnPropertyNames(Object.getPrototypeOf(i)).forEach(t=>{typeof i[t]=="function"&&(i[t]=i[t].bind(i))})};class v0 extends gx{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;if(super(),this.options=MI(e),this.services={},this.logger=Xl,this.modules={external:[]},Y9(this),t&&!this.isInitialized&&!e.isClone){if(!this.options.initImmediate)return this.init(e,t),this;setTimeout(()=>{this.init(e,t)},0)}}init(){var e=this;let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0;this.isInitializing=!0,typeof t=="function"&&(r=t,t={}),!t.defaultNS&&t.defaultNS!==!1&&t.ns&&(kr(t.ns)?t.defaultNS=t.ns:t.ns.indexOf("translation")<0&&(t.defaultNS=t.ns[0]));const n=OI();this.options={...n,...this.options,...MI(t)},this.options.compatibilityAPI!=="v1"&&(this.options.interpolation={...n.interpolation,...this.options.interpolation}),t.keySeparator!==void 0&&(this.options.userDefinedKeySeparator=t.keySeparator),t.nsSeparator!==void 0&&(this.options.userDefinedNsSeparator=t.nsSeparator);const s=c=>c?typeof c=="function"?new c:c:null;if(!this.options.isClone){this.modules.logger?Xl.init(s(this.modules.logger),this.options):Xl.init(null,this.options);let c;this.modules.formatter?c=this.modules.formatter:typeof Intl<"u"&&(c=G9);const h=new PI(this.options);this.store=new II(this.options.resources,this.options);const m=this.services;m.logger=Xl,m.resourceStore=this.store,m.languageUtils=h,m.pluralResolver=new V9(h,{prepend:this.options.pluralSeparator,compatibilityJSON:this.options.compatibilityJSON,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),c&&(!this.options.interpolation.format||this.options.interpolation.format===n.interpolation.format)&&(m.formatter=s(c),m.formatter.init(m,this.options),this.options.interpolation.format=m.formatter.format.bind(m.formatter)),m.interpolator=new q9(this.options),m.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},m.backendConnector=new X9(s(this.modules.backend),m.resourceStore,m,this.options),m.backendConnector.on("*",function(g){for(var y=arguments.length,_=new Array(y>1?y-1:0),T=1;T<y;T++)_[T-1]=arguments[T];e.emit(g,..._)}),this.modules.languageDetector&&(m.languageDetector=s(this.modules.languageDetector),m.languageDetector.init&&m.languageDetector.init(m,this.options.detection,this.options)),this.modules.i18nFormat&&(m.i18nFormat=s(this.modules.i18nFormat),m.i18nFormat.init&&m.i18nFormat.init(this)),this.translator=new Qy(this.services,this.options),this.translator.on("*",function(g){for(var y=arguments.length,_=new Array(y>1?y-1:0),T=1;T<y;T++)_[T-1]=arguments[T];e.emit(g,..._)}),this.modules.external.forEach(g=>{g.init&&g.init(this)})}if(this.format=this.options.interpolation.format,r||(r=tv),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){const c=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);c.length>0&&c[0]!=="dev"&&(this.options.lng=c[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined"),["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach(c=>{this[c]=function(){return e.store[c](...arguments)}}),["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach(c=>{this[c]=function(){return e.store[c](...arguments),e}});const l=mm(),u=()=>{const c=(h,m)=>{this.isInitializing=!1,this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),l.resolve(m),r(h,m)};if(this.languages&&this.options.compatibilityAPI!=="v1"&&!this.isInitialized)return c(null,this.t.bind(this));this.changeLanguage(this.options.lng,c)};return this.options.resources||!this.options.initImmediate?u():setTimeout(u,0),l}loadResources(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:tv;const n=kr(e)?e:this.language;if(typeof e=="function"&&(r=e),!this.options.resources||this.options.partialBundledLanguages){if(n&&n.toLowerCase()==="cimode"&&(!this.options.preload||this.options.preload.length===0))return r();const s=[],a=o=>{if(!o||o==="cimode")return;this.services.languageUtils.toResolveHierarchy(o).forEach(u=>{u!=="cimode"&&s.indexOf(u)<0&&s.push(u)})};n?a(n):this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach(l=>a(l)),this.options.preload&&this.options.preload.forEach(o=>a(o)),this.services.backendConnector.load(s,this.options.ns,o=>{!o&&!this.resolvedLanguage&&this.language&&this.setResolvedLanguage(this.language),r(o)})}else r(null)}reloadResources(e,t,r){const n=mm();return typeof e=="function"&&(r=e,e=void 0),typeof t=="function"&&(r=t,t=void 0),e||(e=this.languages),t||(t=this.options.ns),r||(r=tv),this.services.backendConnector.reload(e,t,s=>{n.resolve(),r(s)}),n}use(e){if(!e)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!e.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return e.type==="backend"&&(this.modules.backend=e),(e.type==="logger"||e.log&&e.warn&&e.error)&&(this.modules.logger=e),e.type==="languageDetector"&&(this.modules.languageDetector=e),e.type==="i18nFormat"&&(this.modules.i18nFormat=e),e.type==="postProcessor"&&i3.addPostProcessor(e),e.type==="formatter"&&(this.modules.formatter=e),e.type==="3rdParty"&&this.modules.external.push(e),this}setResolvedLanguage(e){if(!(!e||!this.languages)&&!(["cimode","dev"].indexOf(e)>-1))for(let t=0;t<this.languages.length;t++){const r=this.languages[t];if(!(["cimode","dev"].indexOf(r)>-1)&&this.store.hasLanguageSomeTranslations(r)){this.resolvedLanguage=r;break}}}changeLanguage(e,t){var r=this;this.isLanguageChangingTo=e;const n=mm();this.emit("languageChanging",e);const s=l=>{this.language=l,this.languages=this.services.languageUtils.toResolveHierarchy(l),this.resolvedLanguage=void 0,this.setResolvedLanguage(l)},a=(l,u)=>{u?(s(u),this.translator.changeLanguage(u),this.isLanguageChangingTo=void 0,this.emit("languageChanged",u),this.logger.log("languageChanged",u)):this.isLanguageChangingTo=void 0,n.resolve(function(){return r.t(...arguments)}),t&&t(l,function(){return r.t(...arguments)})},o=l=>{!e&&!l&&this.services.languageDetector&&(l=[]);const u=kr(l)?l:this.services.languageUtils.getBestMatchFromCodes(l);u&&(this.language||s(u),this.translator.language||this.translator.changeLanguage(u),this.services.languageDetector&&this.services.languageDetector.cacheUserLanguage&&this.services.languageDetector.cacheUserLanguage(u)),this.loadResources(u,c=>{a(c,u)})};return!e&&this.services.languageDetector&&!this.services.languageDetector.async?o(this.services.languageDetector.detect()):!e&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect.length===0?this.services.languageDetector.detect().then(o):this.services.languageDetector.detect(o):o(e),n}getFixedT(e,t,r){var n=this;const s=function(a,o){let l;if(typeof o!="object"){for(var u=arguments.length,c=new Array(u>2?u-2:0),h=2;h<u;h++)c[h-2]=arguments[h];l=n.options.overloadTranslationOptionHandler([a,o].concat(c))}else l={...o};l.lng=l.lng||s.lng,l.lngs=l.lngs||s.lngs,l.ns=l.ns||s.ns,l.keyPrefix!==""&&(l.keyPrefix=l.keyPrefix||r||s.keyPrefix);const m=n.options.keySeparator||".";let g;return l.keyPrefix&&Array.isArray(a)?g=a.map(y=>`${l.keyPrefix}${m}${y}`):g=l.keyPrefix?`${l.keyPrefix}${m}${a}`:a,n.t(g,l)};return kr(e)?s.lng=e:s.lngs=e,s.ns=t,s.keyPrefix=r,s}t(){return this.translator&&this.translator.translate(...arguments)}exists(){return this.translator&&this.translator.exists(...arguments)}setDefaultNamespace(e){this.options.defaultNS=e}hasLoadedNamespace(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;const r=t.lng||this.resolvedLanguage||this.languages[0],n=this.options?this.options.fallbackLng:!1,s=this.languages[this.languages.length-1];if(r.toLowerCase()==="cimode")return!0;const a=(o,l)=>{const u=this.services.backendConnector.state[`${o}|${l}`];return u===-1||u===0||u===2};if(t.precheck){const o=t.precheck(this,a);if(o!==void 0)return o}return!!(this.hasResourceBundle(r,e)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||a(r,e)&&(!n||a(s,e)))}loadNamespaces(e,t){const r=mm();return this.options.ns?(kr(e)&&(e=[e]),e.forEach(n=>{this.options.ns.indexOf(n)<0&&this.options.ns.push(n)}),this.loadResources(n=>{r.resolve(),t&&t(n)}),r):(t&&t(),Promise.resolve())}loadLanguages(e,t){const r=mm();kr(e)&&(e=[e]);const n=this.options.preload||[],s=e.filter(a=>n.indexOf(a)<0&&this.services.languageUtils.isSupportedCode(a));return s.length?(this.options.preload=n.concat(s),this.loadResources(a=>{r.resolve(),t&&t(a)}),r):(t&&t(),Promise.resolve())}dir(e){if(e||(e=this.resolvedLanguage||(this.languages&&this.languages.length>0?this.languages[0]:this.language)),!e)return"rtl";const t=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"],r=this.services&&this.services.languageUtils||new PI(OI());return t.indexOf(r.getLanguagePartFromCode(e))>-1||e.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return new v0(e,t)}cloneInstance(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:tv;const r=e.forkResourceStore;r&&delete e.forkResourceStore;const n={...this.options,...e,isClone:!0},s=new v0(n);return(e.debug!==void 0||e.prefix!==void 0)&&(s.logger=s.logger.clone(e)),["store","services","language"].forEach(o=>{s[o]=this[o]}),s.services={...this.services},s.services.utils={hasLoadedNamespace:s.hasLoadedNamespace.bind(s)},r&&(s.store=new II(this.store.data,n),s.services.resourceStore=s.store),s.translator=new Qy(s.services,n),s.translator.on("*",function(o){for(var l=arguments.length,u=new Array(l>1?l-1:0),c=1;c<l;c++)u[c-1]=arguments[c];s.emit(o,...u)}),s.init(n,t),s.translator.options=n,s.translator.backendConnector.services.utils={hasLoadedNamespace:s.hasLoadedNamespace.bind(s)},s}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}const ms=v0.createInstance();ms.createInstance=v0.createInstance;ms.createInstance;ms.dir;ms.init;ms.loadResources;ms.reloadResources;ms.use;ms.changeLanguage;ms.getFixedT;ms.t;ms.exists;ms.setDefaultNamespace;ms.hasLoadedNamespace;ms.loadNamespaces;ms.loadLanguages;class ME{constructor(...e){this.type="Logical",e.length===1?"Logical"in e[0]?(this.width=e[0].Logical.width,this.height=e[0].Logical.height):(this.width=e[0].width,this.height=e[0].height):(this.width=e[0],this.height=e[1])}toPhysical(e){return new Bf(this.width*e,this.height*e)}[Lo](){return{width:this.width,height:this.height}}toJSON(){return this[Lo]()}}class Bf{constructor(...e){this.type="Physical",e.length===1?"Physical"in e[0]?(this.width=e[0].Physical.width,this.height=e[0].Physical.height):(this.width=e[0].width,this.height=e[0].height):(this.width=e[0],this.height=e[1])}toLogical(e){return new ME(this.width/e,this.height/e)}[Lo](){return{width:this.width,height:this.height}}toJSON(){return this[Lo]()}}class Yc{constructor(e){this.size=e}toLogical(e){return this.size instanceof ME?this.size:this.size.toLogical(e)}toPhysical(e){return this.size instanceof Bf?this.size:this.size.toPhysical(e)}[Lo](){return{[`${this.size.type}`]:{width:this.size.width,height:this.size.height}}}toJSON(){return this[Lo]()}}class n3{constructor(...e){this.type="Logical",e.length===1?"Logical"in e[0]?(this.x=e[0].Logical.x,this.y=e[0].Logical.y):(this.x=e[0].x,this.y=e[0].y):(this.x=e[0],this.y=e[1])}toPhysical(e){return new Io(this.x*e,this.y*e)}[Lo](){return{x:this.x,y:this.y}}toJSON(){return this[Lo]()}}class Io{constructor(...e){this.type="Physical",e.length===1?"Physical"in e[0]?(this.x=e[0].Physical.x,this.y=e[0].Physical.y):(this.x=e[0].x,this.y=e[0].y):(this.x=e[0],this.y=e[1])}toLogical(e){return new n3(this.x/e,this.y/e)}[Lo](){return{x:this.x,y:this.y}}toJSON(){return this[Lo]()}}class Cf{constructor(e){this.position=e}toLogical(e){return this.position instanceof n3?this.position:this.position.toLogical(e)}toPhysical(e){return this.position instanceof Io?this.position:this.position.toPhysical(e)}[Lo](){return{[`${this.position.type}`]:{x:this.position.x,y:this.position.y}}}toJSON(){return this[Lo]()}}var os;(function(i){i.WINDOW_RESIZED="tauri://resize",i.WINDOW_MOVED="tauri://move",i.WINDOW_CLOSE_REQUESTED="tauri://close-requested",i.WINDOW_DESTROYED="tauri://destroyed",i.WINDOW_FOCUS="tauri://focus",i.WINDOW_BLUR="tauri://blur",i.WINDOW_SCALE_FACTOR_CHANGED="tauri://scale-change",i.WINDOW_THEME_CHANGED="tauri://theme-changed",i.WINDOW_CREATED="tauri://window-created",i.WEBVIEW_CREATED="tauri://webview-created",i.DRAG_ENTER="tauri://drag-enter",i.DRAG_OVER="tauri://drag-over",i.DRAG_DROP="tauri://drag-drop",i.DRAG_LEAVE="tauri://drag-leave"})(os||(os={}));async function s3(i,e){await Ct("plugin:event|unlisten",{event:i,eventId:e})}async function j0(i,e,t){var r;const n=typeof t?.target=="string"?{kind:"AnyLabel",label:t.target}:(r=t?.target)!==null&&r!==void 0?r:{kind:"Any"};return Ct("plugin:event|listen",{event:i,target:n,handler:w9(e)}).then(s=>async()=>s3(i,s))}async function FE(i,e,t){return j0(i,r=>{s3(i,r.id),e(r)},t)}async function a3(i,e){await Ct("plugin:event|emit",{event:i,payload:e})}async function o3(i,e,t){await Ct("plugin:event|emit_to",{target:typeof i=="string"?{kind:"AnyLabel",label:i}:i,event:e,payload:t})}let Q9=class jv extends k9{constructor(e){super(e)}static async new(e,t,r){return Ct("plugin:image|new",{rgba:H1(e),width:t,height:r}).then(n=>new jv(n))}static async fromBytes(e){return Ct("plugin:image|from_bytes",{bytes:H1(e)}).then(t=>new jv(t))}static async fromPath(e){return Ct("plugin:image|from_path",{path:e}).then(t=>new jv(t))}async rgba(){return Ct("plugin:image|rgba",{rid:this.rid}).then(e=>new Uint8Array(e))}async size(){return Ct("plugin:image|size",{rid:this.rid})}};function H1(i){return i==null?null:typeof i=="string"?i:i instanceof Q9?i.rid:i}var V1;(function(i){i[i.Critical=1]="Critical",i[i.Informational=2]="Informational"})(V1||(V1={}));class J9{constructor(e){this._preventDefault=!1,this.event=e.event,this.id=e.id}preventDefault(){this._preventDefault=!0}isPreventDefault(){return this._preventDefault}}var FI;(function(i){i.None="none",i.Normal="normal",i.Indeterminate="indeterminate",i.Paused="paused",i.Error="error"})(FI||(FI={}));function l3(){return new vx(window.__TAURI_INTERNALS__.metadata.currentWindow.label,{skip:!0})}async function qb(){return Ct("plugin:window|get_all_windows").then(i=>i.map(e=>new vx(e,{skip:!0})))}const Wb=["tauri://created","tauri://error"];class vx{constructor(e,t={}){var r;this.label=e,this.listeners=Object.create(null),t?.skip||Ct("plugin:window|create",{options:{...t,parent:typeof t.parent=="string"?t.parent:(r=t.parent)===null||r===void 0?void 0:r.label,label:e}}).then(async()=>this.emit("tauri://created")).catch(async n=>this.emit("tauri://error",n))}static async getByLabel(e){var t;return(t=(await qb()).find(r=>r.label===e))!==null&&t!==void 0?t:null}static getCurrent(){return l3()}static async getAll(){return qb()}static async getFocusedWindow(){for(const e of await qb())if(await e.isFocused())return e;return null}async listen(e,t){return this._handleTauriEvent(e,t)?()=>{const r=this.listeners[e];r.splice(r.indexOf(t),1)}:j0(e,t,{target:{kind:"Window",label:this.label}})}async once(e,t){return this._handleTauriEvent(e,t)?()=>{const r=this.listeners[e];r.splice(r.indexOf(t),1)}:FE(e,t,{target:{kind:"Window",label:this.label}})}async emit(e,t){if(Wb.includes(e)){for(const r of this.listeners[e]||[])r({event:e,id:-1,payload:t});return}return a3(e,t)}async emitTo(e,t,r){if(Wb.includes(t)){for(const n of this.listeners[t]||[])n({event:t,id:-1,payload:r});return}return o3(e,t,r)}_handleTauriEvent(e,t){return Wb.includes(e)?(e in this.listeners?this.listeners[e].push(t):this.listeners[e]=[t],!0):!1}async scaleFactor(){return Ct("plugin:window|scale_factor",{label:this.label})}async innerPosition(){return Ct("plugin:window|inner_position",{label:this.label}).then(e=>new Io(e))}async outerPosition(){return Ct("plugin:window|outer_position",{label:this.label}).then(e=>new Io(e))}async innerSize(){return Ct("plugin:window|inner_size",{label:this.label}).then(e=>new Bf(e))}async outerSize(){return Ct("plugin:window|outer_size",{label:this.label}).then(e=>new Bf(e))}async isFullscreen(){return Ct("plugin:window|is_fullscreen",{label:this.label})}async isMinimized(){return Ct("plugin:window|is_minimized",{label:this.label})}async isMaximized(){return Ct("plugin:window|is_maximized",{label:this.label})}async isFocused(){return Ct("plugin:window|is_focused",{label:this.label})}async isDecorated(){return Ct("plugin:window|is_decorated",{label:this.label})}async isResizable(){return Ct("plugin:window|is_resizable",{label:this.label})}async isMaximizable(){return Ct("plugin:window|is_maximizable",{label:this.label})}async isMinimizable(){return Ct("plugin:window|is_minimizable",{label:this.label})}async isClosable(){return Ct("plugin:window|is_closable",{label:this.label})}async isVisible(){return Ct("plugin:window|is_visible",{label:this.label})}async title(){return Ct("plugin:window|title",{label:this.label})}async theme(){return Ct("plugin:window|theme",{label:this.label})}async center(){return Ct("plugin:window|center",{label:this.label})}async requestUserAttention(e){let t=null;return e&&(e===V1.Critical?t={type:"Critical"}:t={type:"Informational"}),Ct("plugin:window|request_user_attention",{label:this.label,value:t})}async setResizable(e){return Ct("plugin:window|set_resizable",{label:this.label,value:e})}async setEnabled(e){return Ct("plugin:window|set_enabled",{label:this.label,value:e})}async isEnabled(){return Ct("plugin:window|is_enabled",{label:this.label})}async setMaximizable(e){return Ct("plugin:window|set_maximizable",{label:this.label,value:e})}async setMinimizable(e){return Ct("plugin:window|set_minimizable",{label:this.label,value:e})}async setClosable(e){return Ct("plugin:window|set_closable",{label:this.label,value:e})}async setTitle(e){return Ct("plugin:window|set_title",{label:this.label,value:e})}async maximize(){return Ct("plugin:window|maximize",{label:this.label})}async unmaximize(){return Ct("plugin:window|unmaximize",{label:this.label})}async toggleMaximize(){return Ct("plugin:window|toggle_maximize",{label:this.label})}async minimize(){return Ct("plugin:window|minimize",{label:this.label})}async unminimize(){return Ct("plugin:window|unminimize",{label:this.label})}async show(){return Ct("plugin:window|show",{label:this.label})}async hide(){return Ct("plugin:window|hide",{label:this.label})}async close(){return Ct("plugin:window|close",{label:this.label})}async destroy(){return Ct("plugin:window|destroy",{label:this.label})}async setDecorations(e){return Ct("plugin:window|set_decorations",{label:this.label,value:e})}async setShadow(e){return Ct("plugin:window|set_shadow",{label:this.label,value:e})}async setEffects(e){return Ct("plugin:window|set_effects",{label:this.label,value:e})}async clearEffects(){return Ct("plugin:window|set_effects",{label:this.label,value:null})}async setAlwaysOnTop(e){return Ct("plugin:window|set_always_on_top",{label:this.label,value:e})}async setAlwaysOnBottom(e){return Ct("plugin:window|set_always_on_bottom",{label:this.label,value:e})}async setContentProtected(e){return Ct("plugin:window|set_content_protected",{label:this.label,value:e})}async setSize(e){return Ct("plugin:window|set_size",{label:this.label,value:e instanceof Yc?e:new Yc(e)})}async setMinSize(e){return Ct("plugin:window|set_min_size",{label:this.label,value:e instanceof Yc?e:e?new Yc(e):null})}async setMaxSize(e){return Ct("plugin:window|set_max_size",{label:this.label,value:e instanceof Yc?e:e?new Yc(e):null})}async setSizeConstraints(e){function t(r){return r?{Logical:r}:null}return Ct("plugin:window|set_size_constraints",{label:this.label,value:{minWidth:t(e?.minWidth),minHeight:t(e?.minHeight),maxWidth:t(e?.maxWidth),maxHeight:t(e?.maxHeight)}})}async setPosition(e){return Ct("plugin:window|set_position",{label:this.label,value:e instanceof Cf?e:new Cf(e)})}async setFullscreen(e){return Ct("plugin:window|set_fullscreen",{label:this.label,value:e})}async setFocus(){return Ct("plugin:window|set_focus",{label:this.label})}async setIcon(e){return Ct("plugin:window|set_icon",{label:this.label,value:H1(e)})}async setSkipTaskbar(e){return Ct("plugin:window|set_skip_taskbar",{label:this.label,value:e})}async setCursorGrab(e){return Ct("plugin:window|set_cursor_grab",{label:this.label,value:e})}async setCursorVisible(e){return Ct("plugin:window|set_cursor_visible",{label:this.label,value:e})}async setCursorIcon(e){return Ct("plugin:window|set_cursor_icon",{label:this.label,value:e})}async setBackgroundColor(e){return Ct("plugin:window|set_background_color",{color:e})}async setCursorPosition(e){return Ct("plugin:window|set_cursor_position",{label:this.label,value:e instanceof Cf?e:new Cf(e)})}async setIgnoreCursorEvents(e){return Ct("plugin:window|set_ignore_cursor_events",{label:this.label,value:e})}async startDragging(){return Ct("plugin:window|start_dragging",{label:this.label})}async startResizeDragging(e){return Ct("plugin:window|start_resize_dragging",{label:this.label,value:e})}async setProgressBar(e){return Ct("plugin:window|set_progress_bar",{label:this.label,value:e})}async setVisibleOnAllWorkspaces(e){return Ct("plugin:window|set_visible_on_all_workspaces",{label:this.label,value:e})}async setTitleBarStyle(e){return Ct("plugin:window|set_title_bar_style",{label:this.label,value:e})}async setTheme(e){return Ct("plugin:window|set_theme",{label:this.label,value:e})}async onResized(e){return this.listen(os.WINDOW_RESIZED,t=>{t.payload=new Bf(t.payload),e(t)})}async onMoved(e){return this.listen(os.WINDOW_MOVED,t=>{t.payload=new Io(t.payload),e(t)})}async onCloseRequested(e){return this.listen(os.WINDOW_CLOSE_REQUESTED,async t=>{const r=new J9(t);await e(r),r.isPreventDefault()||await this.destroy()})}async onDragDropEvent(e){const t=await this.listen(os.DRAG_ENTER,a=>{e({...a,payload:{type:"enter",paths:a.payload.paths,position:new Io(a.payload.position)}})}),r=await this.listen(os.DRAG_OVER,a=>{e({...a,payload:{type:"over",position:new Io(a.payload.position)}})}),n=await this.listen(os.DRAG_DROP,a=>{e({...a,payload:{type:"drop",paths:a.payload.paths,position:new Io(a.payload.position)}})}),s=await this.listen(os.DRAG_LEAVE,a=>{e({...a,payload:{type:"leave"}})});return()=>{t(),n(),r(),s()}}async onFocusChanged(e){const t=await this.listen(os.WINDOW_FOCUS,n=>{e({...n,payload:!0})}),r=await this.listen(os.WINDOW_BLUR,n=>{e({...n,payload:!1})});return()=>{t(),r()}}async onScaleChanged(e){return this.listen(os.WINDOW_SCALE_FACTOR_CHANGED,e)}async onThemeChanged(e){return this.listen(os.WINDOW_THEME_CHANGED,e)}}var BI;(function(i){i.AppearanceBased="appearanceBased",i.Light="light",i.Dark="dark",i.MediumLight="mediumLight",i.UltraDark="ultraDark",i.Titlebar="titlebar",i.Selection="selection",i.Menu="menu",i.Popover="popover",i.Sidebar="sidebar",i.HeaderView="headerView",i.Sheet="sheet",i.WindowBackground="windowBackground",i.HudWindow="hudWindow",i.FullScreenUI="fullScreenUI",i.Tooltip="tooltip",i.ContentBackground="contentBackground",i.UnderWindowBackground="underWindowBackground",i.UnderPageBackground="underPageBackground",i.Mica="mica",i.Blur="blur",i.Acrylic="acrylic",i.Tabbed="tabbed",i.TabbedDark="tabbedDark",i.TabbedLight="tabbedLight"})(BI||(BI={}));var NI;(function(i){i.FollowsWindowActiveState="followsWindowActiveState",i.Active="active",i.Inactive="inactive"})(NI||(NI={}));function u3(){return new BE(l3(),window.__TAURI_INTERNALS__.metadata.currentWebview.label,{skip:!0})}async function UI(){return Ct("plugin:webview|get_all_webviews").then(i=>i.map(e=>new BE(new vx(e.windowLabel,{skip:!0}),e.label,{skip:!0})))}const Gb=["tauri://created","tauri://error"];class BE{constructor(e,t,r){this.window=e,this.label=t,this.listeners=Object.create(null),r?.skip||Ct("plugin:webview|create_webview",{windowLabel:e.label,label:t,options:r}).then(async()=>this.emit("tauri://created")).catch(async n=>this.emit("tauri://error",n))}static async getByLabel(e){var t;return(t=(await UI()).find(r=>r.label===e))!==null&&t!==void 0?t:null}static getCurrent(){return u3()}static async getAll(){return UI()}async listen(e,t){return this._handleTauriEvent(e,t)?()=>{const r=this.listeners[e];r.splice(r.indexOf(t),1)}:j0(e,t,{target:{kind:"Webview",label:this.label}})}async once(e,t){return this._handleTauriEvent(e,t)?()=>{const r=this.listeners[e];r.splice(r.indexOf(t),1)}:FE(e,t,{target:{kind:"Webview",label:this.label}})}async emit(e,t){if(Gb.includes(e)){for(const r of this.listeners[e]||[])r({event:e,id:-1,payload:t});return}return a3(e,t)}async emitTo(e,t,r){if(Gb.includes(t)){for(const n of this.listeners[t]||[])n({event:t,id:-1,payload:r});return}return o3(e,t,r)}_handleTauriEvent(e,t){return Gb.includes(e)?(e in this.listeners?this.listeners[e].push(t):this.listeners[e]=[t],!0):!1}async position(){return Ct("plugin:webview|webview_position",{label:this.label}).then(e=>new Io(e))}async size(){return Ct("plugin:webview|webview_size",{label:this.label}).then(e=>new Bf(e))}async close(){return Ct("plugin:webview|close",{label:this.label})}async setSize(e){return Ct("plugin:webview|set_webview_size",{label:this.label,value:e instanceof Yc?e:new Yc(e)})}async setPosition(e){return Ct("plugin:webview|set_webview_position",{label:this.label,value:e instanceof Cf?e:new Cf(e)})}async setFocus(){return Ct("plugin:webview|set_webview_focus",{label:this.label})}async hide(){return Ct("plugin:webview|webview_hide",{label:this.label})}async show(){return Ct("plugin:webview|webview_show",{label:this.label})}async setZoom(e){return Ct("plugin:webview|set_webview_zoom",{label:this.label,value:e})}async reparent(e){return Ct("plugin:webview|reparent",{label:this.label,window:typeof e=="string"?e:e.label})}async clearAllBrowsingData(){return Ct("plugin:webview|clear_all_browsing_data")}async setBackgroundColor(e){return Ct("plugin:webview|set_webview_background_color",{color:e})}async onDragDropEvent(e){const t=await this.listen(os.DRAG_ENTER,a=>{e({...a,payload:{type:"enter",paths:a.payload.paths,position:new Io(a.payload.position)}})}),r=await this.listen(os.DRAG_OVER,a=>{e({...a,payload:{type:"over",position:new Io(a.payload.position)}})}),n=await this.listen(os.DRAG_DROP,a=>{e({...a,payload:{type:"drop",paths:a.payload.paths,position:new Io(a.payload.position)}})}),s=await this.listen(os.DRAG_LEAVE,a=>{e({...a,payload:{type:"leave"}})});return()=>{t(),n(),r(),s()}}}function Jy(){const i=u3();return new z0(i.label,{skip:!0})}async function $I(){return Ct("plugin:window|get_all_windows").then(i=>i.map(e=>new z0(e,{skip:!0})))}class z0{constructor(e,t={}){var r;this.label=e,this.listeners=Object.create(null),t?.skip||Ct("plugin:webview|create_webview_window",{options:{...t,parent:typeof t.parent=="string"?t.parent:(r=t.parent)===null||r===void 0?void 0:r.label,label:e}}).then(async()=>this.emit("tauri://created")).catch(async n=>this.emit("tauri://error",n))}static async getByLabel(e){var t;const r=(t=(await $I()).find(n=>n.label===e))!==null&&t!==void 0?t:null;return r?new z0(r.label,{skip:!0}):null}static getCurrent(){return Jy()}static async getAll(){return $I()}async listen(e,t){return this._handleTauriEvent(e,t)?()=>{const r=this.listeners[e];r.splice(r.indexOf(t),1)}:j0(e,t,{target:{kind:"WebviewWindow",label:this.label}})}async once(e,t){return this._handleTauriEvent(e,t)?()=>{const r=this.listeners[e];r.splice(r.indexOf(t),1)}:FE(e,t,{target:{kind:"WebviewWindow",label:this.label}})}async setBackgroundColor(e){return Ct("plugin:window|set_background_color",{color:e}).then(()=>Ct("plugin:webview|set_webview_background_color",{color:e}))}}Z9(z0,[vx,BE]);function Z9(i,e){(Array.isArray(e)?e:[e]).forEach(t=>{Object.getOwnPropertyNames(t.prototype).forEach(r=>{var n;typeof i.prototype=="object"&&i.prototype&&r in i.prototype||Object.defineProperty(i.prototype,r,(n=Object.getOwnPropertyDescriptor(t.prototype,r))!==null&&n!==void 0?n:Object.create(null))})})}var $d={},jd={},Kb={},Xb={},gm={},jI;function ez(){if(jI)return gm;jI=1;function i(){return window.crypto.getRandomValues(new Uint32Array(1))[0]}function e(n,s=!1){const a=i(),o=`_${a}`;return Object.defineProperty(window,o,{value:l=>(s&&Reflect.deleteProperty(window,o),n?.(l)),writable:!1,configurable:!0}),a}async function t(n,s={}){return new Promise((a,o)=>{const l=e(c=>{a(c),Reflect.deleteProperty(window,`_${u}`)},!0),u=e(c=>{o(c),Reflect.deleteProperty(window,`_${l}`)},!0);window.__TAURI_IPC__({cmd:n,callback:l,error:u,...s})})}function r(n,s="asset"){return window.__TAURI__.convertFileSrc(n,s)}return gm.convertFileSrc=r,gm.invoke=t,gm.transformCallback=e,gm}var zI;function tz(){if(zI)return Xb;zI=1;var i=ez();async function e(t){return i.invoke("tauri",t)}return Xb.invokeTauriCommand=e,Xb}var HI;function rz(){return HI||(HI=1,(function(i){var e=tz();i.ResponseType=void 0,(function(u){u[u.JSON=1]="JSON",u[u.Text=2]="Text",u[u.Binary=3]="Binary"})(i.ResponseType||(i.ResponseType={}));async function t(u){const c={},h=async(m,g)=>{if(g!==null){let y;typeof g=="string"?y=g:g instanceof Uint8Array||Array.isArray(g)?y=Array.from(g):g instanceof File?y={file:Array.from(new Uint8Array(await g.arrayBuffer())),mime:g.type,fileName:g.name}:typeof g.file=="string"?y={file:g.file,mime:g.mime,fileName:g.fileName}:y={file:Array.from(g.file),mime:g.mime,fileName:g.fileName},c[String(m)]=y}};if(u instanceof FormData)for(const[m,g]of u)await h(m,g);else for(const[m,g]of Object.entries(u))await h(m,g);return c}class r{constructor(c,h){this.type=c,this.payload=h}static form(c){return new r("Form",c)}static json(c){return new r("Json",c)}static text(c){return new r("Text",c)}static bytes(c){return new r("Bytes",Array.from(c instanceof ArrayBuffer?new Uint8Array(c):c))}}class n{constructor(c){this.url=c.url,this.status=c.status,this.ok=this.status>=200&&this.status<300,this.headers=c.headers,this.rawHeaders=c.rawHeaders,this.data=c.data}}class s{constructor(c){this.id=c}async drop(){return e.invokeTauriCommand({__tauriModule:"Http",message:{cmd:"dropClient",client:this.id}})}async request(c){var h;const m=!c.responseType||c.responseType===i.ResponseType.JSON;return m&&(c.responseType=i.ResponseType.Text),((h=c.body)===null||h===void 0?void 0:h.type)==="Form"&&(c.body.payload=await t(c.body.payload)),e.invokeTauriCommand({__tauriModule:"Http",message:{cmd:"httpRequest",client:this.id,options:c}}).then(g=>{const y=new n(g);if(m){try{y.data=JSON.parse(y.data)}catch(_){if(y.ok&&y.data==="")y.data={};else if(y.ok)throw Error(`Failed to parse response \`${y.data}\` as JSON: ${_};
              try setting the \`responseType\` option to \`ResponseType.Text\` or \`ResponseType.Binary\` if the API does not return a JSON response.`)}return y}return y})}async get(c,h){return this.request({method:"GET",url:c,...h})}async post(c,h,m){return this.request({method:"POST",url:c,body:h,...m})}async put(c,h,m){return this.request({method:"PUT",url:c,body:h,...m})}async patch(c,h){return this.request({method:"PATCH",url:c,...h})}async delete(c,h){return this.request({method:"DELETE",url:c,...h})}}async function a(u){return e.invokeTauriCommand({__tauriModule:"Http",message:{cmd:"createClient",options:u}}).then(c=>new s(c))}let o=null;async function l(u,c){var h;return o===null&&(o=await a()),o.request({url:u,method:(h=c?.method)!==null&&h!==void 0?h:"GET",...c})}i.Body=r,i.Client=s,i.Response=n,i.fetch=l,i.getClient=a})(Kb)),Kb}var VI;function iz(){if(VI)return jd;VI=1,Object.defineProperty(jd,"__esModule",{value:!0}),jd.overrideGlobalXHR=jd.TauriXMLHttpRequest=void 0;const i=rz();var e;(function(n){n[n.Unsent=0]="Unsent",n[n.Opened=1]="Opened",n[n.HeadersReceived=2]="HeadersReceived",n[n.Loading=3]="Loading",n[n.Done=4]="Done"})(e||(e={}));class t extends EventTarget{method;url="";headers={};responseHeaders={};_readyState=e.Unsent;_response;_status=0;responseType="";timeout=0;withCredentials=!1;onabort=null;onerror=null;onload=null;onloadend=null;onloadstart=null;onprogress=null;ontimeout=null;onreadystatechange=null;UNSENT=e.Unsent;OPENED=e.Opened;HEADERS_RECEIVED=e.HeadersReceived;LOADING=e.Loading;DONE=e.Done;constructor(){super(),this.addEventListener("abort",s=>{this.onabort?.(s)}),this.addEventListener("error",s=>{this.onerror?.(s)}),this.addEventListener("load",s=>{this.onload?.(s)}),this.addEventListener("loadend",s=>{this.onloadend?.(s)}),this.addEventListener("loadstart",s=>{this.onloadstart?.(s)}),this.addEventListener("progress",s=>{this.onprogress?.(s)}),this.addEventListener("timeout",s=>{this.ontimeout?.(s)}),this.addEventListener("readystatechange",s=>{this.onreadystatechange?.(s)})}set readyState(s){this._readyState=s,this.dispatchEvent(new Event("readystatechange"))}get readyState(){return this._readyState}get response(){return this._response}get responseText(){if(typeof this._response!="string")throw new DOMException("response is not a string");return this._response}get responseURL(){return this.url}get responseXML(){throw new DOMException("git responseXML not implemented")}get status(){return this._status}get statusText(){return String(this._status)}get upload(){throw new DOMException("upload is not implemented")}abort(){throw new DOMException("abort is not implemented")}getAllResponseHeaders(){return Object.entries(this.responseHeaders).map(([s,a])=>`${s}: ${a}`).join(`
`)}getResponseHeader(s){return this.responseHeaders[s]??null}open(s,a){console.debug("open",s,a),this.method=s,this.url=a,this.readyState=e.Opened}overrideMimeType(s){throw new DOMException("overrideMimeType is not implemented")}send(s){console.debug("send",s);const{method:a,url:o,readyState:l}=this;if(!a||!o)throw new Error("method or url is not set");if(l!==e.Opened)throw new DOMException("readyState is not opened");if(s===null&&(s=""),typeof s!="string")throw new DOMException("using non-string body is not implemented");(async()=>{try{const u=await(0,i.getClient)();this.readyState=e.HeadersReceived,this.readyState=e.Loading,this.dispatchEvent(new ProgressEvent("loadstart",{lengthComputable:!0,loaded:0,total:0}));const c=await u.request({method:a,url:o,headers:this.headers,body:i.Body.text(s),responseType:i.ResponseType.Text});console.debug(`response of ${this.url}`,c),this._response=c.data,this._status=c.status,this.responseHeaders=c.headers;const h={lengthComputable:!0,loaded:c.data.length,total:c.data.length};this.dispatchEvent(new ProgressEvent("progress",h)),this.dispatchEvent(new ProgressEvent("load",h)),this.dispatchEvent(new ProgressEvent("loadend",h))}catch(u){console.error(u),this.dispatchEvent(new ErrorEvent("error",{error:u}))}finally{this.readyState=e.Done}})()}setRequestHeader(s,a){this.headers[s]=a}}jd.TauriXMLHttpRequest=t;const r=()=>{window.XMLHttpRequest=t};return jd.overrideGlobalXHR=r,jd}var qI;function nz(){return qI||(qI=1,(function(i){var e=$d&&$d.__createBinding||(Object.create?(function(r,n,s,a){a===void 0&&(a=s);var o=Object.getOwnPropertyDescriptor(n,s);(!o||("get"in o?!n.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return n[s]}}),Object.defineProperty(r,a,o)}):(function(r,n,s,a){a===void 0&&(a=s),r[a]=n[s]})),t=$d&&$d.__exportStar||function(r,n){for(var s in r)s!=="default"&&!Object.prototype.hasOwnProperty.call(n,s)&&e(n,r,s)};Object.defineProperty(i,"__esModule",{value:!0}),t(iz(),i)})($d)),$d}nz();var q1;(function(i){i[i.Audio=1]="Audio",i[i.Cache=2]="Cache",i[i.Config=3]="Config",i[i.Data=4]="Data",i[i.LocalData=5]="LocalData",i[i.Document=6]="Document",i[i.Download=7]="Download",i[i.Picture=8]="Picture",i[i.Public=9]="Public",i[i.Video=10]="Video",i[i.Resource=11]="Resource",i[i.Temp=12]="Temp",i[i.AppConfig=13]="AppConfig",i[i.AppData=14]="AppData",i[i.AppLocalData=15]="AppLocalData",i[i.AppCache=16]="AppCache",i[i.AppLog=17]="AppLog",i[i.Desktop=18]="Desktop",i[i.Executable=19]="Executable",i[i.Font=20]="Font",i[i.Home=21]="Home",i[i.Runtime=22]="Runtime",i[i.Template=23]="Template"})(q1||(q1={}));async function sz(){return Ct("plugin:path|resolve_directory",{directory:q1.Download})}var WI;(function(i){i[i.Start=0]="Start",i[i.Current=1]="Current",i[i.End=2]="End"})(WI||(WI={}));async function az(i,e,t){if(i instanceof URL&&i.protocol!=="file:")throw new TypeError("Must be a file URL.");const r=new TextEncoder;await Ct("plugin:fs|write_text_file",r.encode(e),{headers:{path:encodeURIComponent(i instanceof URL?i.toString():i),options:JSON.stringify(t)}})}async function oz(i={}){return typeof i=="object"&&Object.freeze(i),await Ct("plugin:dialog|save",{options:i})}function lz(){return window.__TAURI_OS_PLUGIN_INTERNALS__.os_type}var zv={exports:{}};function uz(i){throw new Error('Could not dynamically require "'+i+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Hv={exports:{}};const cz={},dz=Object.freeze(Object.defineProperty({__proto__:null,default:cz},Symbol.toStringTag,{value:"Module"})),c3=N7(dz);var hz=Hv.exports,GI;function ei(){return GI||(GI=1,(function(i,e){(function(t,r){i.exports=r()})(hz,function(){var t=t||(function(r,n){var s;if(typeof window<"u"&&window.crypto&&(s=window.crypto),typeof self<"u"&&self.crypto&&(s=self.crypto),typeof globalThis<"u"&&globalThis.crypto&&(s=globalThis.crypto),!s&&typeof window<"u"&&window.msCrypto&&(s=window.msCrypto),!s&&typeof uh<"u"&&uh.crypto&&(s=uh.crypto),!s&&typeof uz=="function")try{s=c3}catch{}var a=function(){if(s){if(typeof s.getRandomValues=="function")try{return s.getRandomValues(new Uint32Array(1))[0]}catch{}if(typeof s.randomBytes=="function")try{return s.randomBytes(4).readInt32LE()}catch{}}throw new Error("Native crypto module could not be used to get secure random number.")},o=Object.create||(function(){function w(){}return function(D){var R;return w.prototype=D,R=new w,w.prototype=null,R}})(),l={},u=l.lib={},c=u.Base=(function(){return{extend:function(w){var D=o(this);return w&&D.mixIn(w),(!D.hasOwnProperty("init")||this.init===D.init)&&(D.init=function(){D.$super.init.apply(this,arguments)}),D.init.prototype=D,D.$super=this,D},create:function(){var w=this.extend();return w.init.apply(w,arguments),w},init:function(){},mixIn:function(w){for(var D in w)w.hasOwnProperty(D)&&(this[D]=w[D]);w.hasOwnProperty("toString")&&(this.toString=w.toString)},clone:function(){return this.init.prototype.extend(this)}}})(),h=u.WordArray=c.extend({init:function(w,D){w=this.words=w||[],D!=n?this.sigBytes=D:this.sigBytes=w.length*4},toString:function(w){return(w||g).stringify(this)},concat:function(w){var D=this.words,R=w.words,A=this.sigBytes,L=w.sigBytes;if(this.clamp(),A%4)for(var F=0;F<L;F++){var B=R[F>>>2]>>>24-F%4*8&255;D[A+F>>>2]|=B<<24-(A+F)%4*8}else for(var M=0;M<L;M+=4)D[A+M>>>2]=R[M>>>2];return this.sigBytes+=L,this},clamp:function(){var w=this.words,D=this.sigBytes;w[D>>>2]&=4294967295<<32-D%4*8,w.length=r.ceil(D/4)},clone:function(){var w=c.clone.call(this);return w.words=this.words.slice(0),w},random:function(w){for(var D=[],R=0;R<w;R+=4)D.push(a());return new h.init(D,w)}}),m=l.enc={},g=m.Hex={stringify:function(w){for(var D=w.words,R=w.sigBytes,A=[],L=0;L<R;L++){var F=D[L>>>2]>>>24-L%4*8&255;A.push((F>>>4).toString(16)),A.push((F&15).toString(16))}return A.join("")},parse:function(w){for(var D=w.length,R=[],A=0;A<D;A+=2)R[A>>>3]|=parseInt(w.substr(A,2),16)<<24-A%8*4;return new h.init(R,D/2)}},y=m.Latin1={stringify:function(w){for(var D=w.words,R=w.sigBytes,A=[],L=0;L<R;L++){var F=D[L>>>2]>>>24-L%4*8&255;A.push(String.fromCharCode(F))}return A.join("")},parse:function(w){for(var D=w.length,R=[],A=0;A<D;A++)R[A>>>2]|=(w.charCodeAt(A)&255)<<24-A%4*8;return new h.init(R,D)}},_=m.Utf8={stringify:function(w){try{return decodeURIComponent(escape(y.stringify(w)))}catch{throw new Error("Malformed UTF-8 data")}},parse:function(w){return y.parse(unescape(encodeURIComponent(w)))}},T=u.BufferedBlockAlgorithm=c.extend({reset:function(){this._data=new h.init,this._nDataBytes=0},_append:function(w){typeof w=="string"&&(w=_.parse(w)),this._data.concat(w),this._nDataBytes+=w.sigBytes},_process:function(w){var D,R=this._data,A=R.words,L=R.sigBytes,F=this.blockSize,B=F*4,M=L/B;w?M=r.ceil(M):M=r.max((M|0)-this._minBufferSize,0);var k=M*F,q=r.min(k*4,L);if(k){for(var G=0;G<k;G+=F)this._doProcessBlock(A,G);D=A.splice(0,k),R.sigBytes-=q}return new h.init(D,q)},clone:function(){var w=c.clone.call(this);return w._data=this._data.clone(),w},_minBufferSize:0});u.Hasher=T.extend({cfg:c.extend(),init:function(w){this.cfg=this.cfg.extend(w),this.reset()},reset:function(){T.reset.call(this),this._doReset()},update:function(w){return this._append(w),this._process(),this},finalize:function(w){w&&this._append(w);var D=this._doFinalize();return D},blockSize:16,_createHelper:function(w){return function(D,R){return new w.init(R).finalize(D)}},_createHmacHelper:function(w){return function(D,R){return new E.HMAC.init(w,R).finalize(D)}}});var E=l.algo={};return l})(Math);return t})})(Hv)),Hv.exports}var Vv={exports:{}},fz=Vv.exports,KI;function yx(){return KI||(KI=1,(function(i,e){(function(t,r){i.exports=r(ei())})(fz,function(t){return(function(r){var n=t,s=n.lib,a=s.Base,o=s.WordArray,l=n.x64={};l.Word=a.extend({init:function(u,c){this.high=u,this.low=c}}),l.WordArray=a.extend({init:function(u,c){u=this.words=u||[],c!=r?this.sigBytes=c:this.sigBytes=u.length*8},toX32:function(){for(var u=this.words,c=u.length,h=[],m=0;m<c;m++){var g=u[m];h.push(g.high),h.push(g.low)}return o.create(h,this.sigBytes)},clone:function(){for(var u=a.clone.call(this),c=u.words=this.words.slice(0),h=c.length,m=0;m<h;m++)c[m]=c[m].clone();return u}})})(),t})})(Vv)),Vv.exports}var qv={exports:{}},pz=qv.exports,XI;function mz(){return XI||(XI=1,(function(i,e){(function(t,r){i.exports=r(ei())})(pz,function(t){return(function(){if(typeof ArrayBuffer=="function"){var r=t,n=r.lib,s=n.WordArray,a=s.init,o=s.init=function(l){if(l instanceof ArrayBuffer&&(l=new Uint8Array(l)),(l instanceof Int8Array||typeof Uint8ClampedArray<"u"&&l instanceof Uint8ClampedArray||l instanceof Int16Array||l instanceof Uint16Array||l instanceof Int32Array||l instanceof Uint32Array||l instanceof Float32Array||l instanceof Float64Array)&&(l=new Uint8Array(l.buffer,l.byteOffset,l.byteLength)),l instanceof Uint8Array){for(var u=l.byteLength,c=[],h=0;h<u;h++)c[h>>>2]|=l[h]<<24-h%4*8;a.call(this,c,u)}else a.apply(this,arguments)};o.prototype=s}})(),t.lib.WordArray})})(qv)),qv.exports}var Wv={exports:{}},gz=Wv.exports,YI;function vz(){return YI||(YI=1,(function(i,e){(function(t,r){i.exports=r(ei())})(gz,function(t){return(function(){var r=t,n=r.lib,s=n.WordArray,a=r.enc;a.Utf16=a.Utf16BE={stringify:function(l){for(var u=l.words,c=l.sigBytes,h=[],m=0;m<c;m+=2){var g=u[m>>>2]>>>16-m%4*8&65535;h.push(String.fromCharCode(g))}return h.join("")},parse:function(l){for(var u=l.length,c=[],h=0;h<u;h++)c[h>>>1]|=l.charCodeAt(h)<<16-h%2*16;return s.create(c,u*2)}},a.Utf16LE={stringify:function(l){for(var u=l.words,c=l.sigBytes,h=[],m=0;m<c;m+=2){var g=o(u[m>>>2]>>>16-m%4*8&65535);h.push(String.fromCharCode(g))}return h.join("")},parse:function(l){for(var u=l.length,c=[],h=0;h<u;h++)c[h>>>1]|=o(l.charCodeAt(h)<<16-h%2*16);return s.create(c,u*2)}};function o(l){return l<<8&4278255360|l>>>8&16711935}})(),t.enc.Utf16})})(Wv)),Wv.exports}var Gv={exports:{}},yz=Gv.exports,QI;function Ah(){return QI||(QI=1,(function(i,e){(function(t,r){i.exports=r(ei())})(yz,function(t){return(function(){var r=t,n=r.lib,s=n.WordArray,a=r.enc;a.Base64={stringify:function(l){var u=l.words,c=l.sigBytes,h=this._map;l.clamp();for(var m=[],g=0;g<c;g+=3)for(var y=u[g>>>2]>>>24-g%4*8&255,_=u[g+1>>>2]>>>24-(g+1)%4*8&255,T=u[g+2>>>2]>>>24-(g+2)%4*8&255,E=y<<16|_<<8|T,w=0;w<4&&g+w*.75<c;w++)m.push(h.charAt(E>>>6*(3-w)&63));var D=h.charAt(64);if(D)for(;m.length%4;)m.push(D);return m.join("")},parse:function(l){var u=l.length,c=this._map,h=this._reverseMap;if(!h){h=this._reverseMap=[];for(var m=0;m<c.length;m++)h[c.charCodeAt(m)]=m}var g=c.charAt(64);if(g){var y=l.indexOf(g);y!==-1&&(u=y)}return o(l,u,h)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="};function o(l,u,c){for(var h=[],m=0,g=0;g<u;g++)if(g%4){var y=c[l.charCodeAt(g-1)]<<g%4*2,_=c[l.charCodeAt(g)]>>>6-g%4*2,T=y|_;h[m>>>2]|=T<<24-m%4*8,m++}return s.create(h,m)}})(),t.enc.Base64})})(Gv)),Gv.exports}var Kv={exports:{}},_z=Kv.exports,JI;function xz(){return JI||(JI=1,(function(i,e){(function(t,r){i.exports=r(ei())})(_z,function(t){return(function(){var r=t,n=r.lib,s=n.WordArray,a=r.enc;a.Base64url={stringify:function(l,u){u===void 0&&(u=!0);var c=l.words,h=l.sigBytes,m=u?this._safe_map:this._map;l.clamp();for(var g=[],y=0;y<h;y+=3)for(var _=c[y>>>2]>>>24-y%4*8&255,T=c[y+1>>>2]>>>24-(y+1)%4*8&255,E=c[y+2>>>2]>>>24-(y+2)%4*8&255,w=_<<16|T<<8|E,D=0;D<4&&y+D*.75<h;D++)g.push(m.charAt(w>>>6*(3-D)&63));var R=m.charAt(64);if(R)for(;g.length%4;)g.push(R);return g.join("")},parse:function(l,u){u===void 0&&(u=!0);var c=l.length,h=u?this._safe_map:this._map,m=this._reverseMap;if(!m){m=this._reverseMap=[];for(var g=0;g<h.length;g++)m[h.charCodeAt(g)]=g}var y=h.charAt(64);if(y){var _=l.indexOf(y);_!==-1&&(c=_)}return o(l,c,m)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",_safe_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"};function o(l,u,c){for(var h=[],m=0,g=0;g<u;g++)if(g%4){var y=c[l.charCodeAt(g-1)]<<g%4*2,_=c[l.charCodeAt(g)]>>>6-g%4*2,T=y|_;h[m>>>2]|=T<<24-m%4*8,m++}return s.create(h,m)}})(),t.enc.Base64url})})(Kv)),Kv.exports}var Xv={exports:{}},Tz=Xv.exports,ZI;function Ih(){return ZI||(ZI=1,(function(i,e){(function(t,r){i.exports=r(ei())})(Tz,function(t){return(function(r){var n=t,s=n.lib,a=s.WordArray,o=s.Hasher,l=n.algo,u=[];(function(){for(var _=0;_<64;_++)u[_]=r.abs(r.sin(_+1))*4294967296|0})();var c=l.MD5=o.extend({_doReset:function(){this._hash=new a.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(_,T){for(var E=0;E<16;E++){var w=T+E,D=_[w];_[w]=(D<<8|D>>>24)&16711935|(D<<24|D>>>8)&4278255360}var R=this._hash.words,A=_[T+0],L=_[T+1],F=_[T+2],B=_[T+3],M=_[T+4],k=_[T+5],q=_[T+6],G=_[T+7],H=_[T+8],re=_[T+9],se=_[T+10],de=_[T+11],me=_[T+12],ue=_[T+13],oe=_[T+14],ce=_[T+15],te=R[0],fe=R[1],ye=R[2],Se=R[3];te=h(te,fe,ye,Se,A,7,u[0]),Se=h(Se,te,fe,ye,L,12,u[1]),ye=h(ye,Se,te,fe,F,17,u[2]),fe=h(fe,ye,Se,te,B,22,u[3]),te=h(te,fe,ye,Se,M,7,u[4]),Se=h(Se,te,fe,ye,k,12,u[5]),ye=h(ye,Se,te,fe,q,17,u[6]),fe=h(fe,ye,Se,te,G,22,u[7]),te=h(te,fe,ye,Se,H,7,u[8]),Se=h(Se,te,fe,ye,re,12,u[9]),ye=h(ye,Se,te,fe,se,17,u[10]),fe=h(fe,ye,Se,te,de,22,u[11]),te=h(te,fe,ye,Se,me,7,u[12]),Se=h(Se,te,fe,ye,ue,12,u[13]),ye=h(ye,Se,te,fe,oe,17,u[14]),fe=h(fe,ye,Se,te,ce,22,u[15]),te=m(te,fe,ye,Se,L,5,u[16]),Se=m(Se,te,fe,ye,q,9,u[17]),ye=m(ye,Se,te,fe,de,14,u[18]),fe=m(fe,ye,Se,te,A,20,u[19]),te=m(te,fe,ye,Se,k,5,u[20]),Se=m(Se,te,fe,ye,se,9,u[21]),ye=m(ye,Se,te,fe,ce,14,u[22]),fe=m(fe,ye,Se,te,M,20,u[23]),te=m(te,fe,ye,Se,re,5,u[24]),Se=m(Se,te,fe,ye,oe,9,u[25]),ye=m(ye,Se,te,fe,B,14,u[26]),fe=m(fe,ye,Se,te,H,20,u[27]),te=m(te,fe,ye,Se,ue,5,u[28]),Se=m(Se,te,fe,ye,F,9,u[29]),ye=m(ye,Se,te,fe,G,14,u[30]),fe=m(fe,ye,Se,te,me,20,u[31]),te=g(te,fe,ye,Se,k,4,u[32]),Se=g(Se,te,fe,ye,H,11,u[33]),ye=g(ye,Se,te,fe,de,16,u[34]),fe=g(fe,ye,Se,te,oe,23,u[35]),te=g(te,fe,ye,Se,L,4,u[36]),Se=g(Se,te,fe,ye,M,11,u[37]),ye=g(ye,Se,te,fe,G,16,u[38]),fe=g(fe,ye,Se,te,se,23,u[39]),te=g(te,fe,ye,Se,ue,4,u[40]),Se=g(Se,te,fe,ye,A,11,u[41]),ye=g(ye,Se,te,fe,B,16,u[42]),fe=g(fe,ye,Se,te,q,23,u[43]),te=g(te,fe,ye,Se,re,4,u[44]),Se=g(Se,te,fe,ye,me,11,u[45]),ye=g(ye,Se,te,fe,ce,16,u[46]),fe=g(fe,ye,Se,te,F,23,u[47]),te=y(te,fe,ye,Se,A,6,u[48]),Se=y(Se,te,fe,ye,G,10,u[49]),ye=y(ye,Se,te,fe,oe,15,u[50]),fe=y(fe,ye,Se,te,k,21,u[51]),te=y(te,fe,ye,Se,me,6,u[52]),Se=y(Se,te,fe,ye,B,10,u[53]),ye=y(ye,Se,te,fe,se,15,u[54]),fe=y(fe,ye,Se,te,L,21,u[55]),te=y(te,fe,ye,Se,H,6,u[56]),Se=y(Se,te,fe,ye,ce,10,u[57]),ye=y(ye,Se,te,fe,q,15,u[58]),fe=y(fe,ye,Se,te,ue,21,u[59]),te=y(te,fe,ye,Se,M,6,u[60]),Se=y(Se,te,fe,ye,de,10,u[61]),ye=y(ye,Se,te,fe,F,15,u[62]),fe=y(fe,ye,Se,te,re,21,u[63]),R[0]=R[0]+te|0,R[1]=R[1]+fe|0,R[2]=R[2]+ye|0,R[3]=R[3]+Se|0},_doFinalize:function(){var _=this._data,T=_.words,E=this._nDataBytes*8,w=_.sigBytes*8;T[w>>>5]|=128<<24-w%32;var D=r.floor(E/4294967296),R=E;T[(w+64>>>9<<4)+15]=(D<<8|D>>>24)&16711935|(D<<24|D>>>8)&4278255360,T[(w+64>>>9<<4)+14]=(R<<8|R>>>24)&16711935|(R<<24|R>>>8)&4278255360,_.sigBytes=(T.length+1)*4,this._process();for(var A=this._hash,L=A.words,F=0;F<4;F++){var B=L[F];L[F]=(B<<8|B>>>24)&16711935|(B<<24|B>>>8)&4278255360}return A},clone:function(){var _=o.clone.call(this);return _._hash=this._hash.clone(),_}});function h(_,T,E,w,D,R,A){var L=_+(T&E|~T&w)+D+A;return(L<<R|L>>>32-R)+T}function m(_,T,E,w,D,R,A){var L=_+(T&w|E&~w)+D+A;return(L<<R|L>>>32-R)+T}function g(_,T,E,w,D,R,A){var L=_+(T^E^w)+D+A;return(L<<R|L>>>32-R)+T}function y(_,T,E,w,D,R,A){var L=_+(E^(T|~w))+D+A;return(L<<R|L>>>32-R)+T}n.MD5=o._createHelper(c),n.HmacMD5=o._createHmacHelper(c)})(Math),t.MD5})})(Xv)),Xv.exports}var Yv={exports:{}},bz=Yv.exports,eD;function d3(){return eD||(eD=1,(function(i,e){(function(t,r){i.exports=r(ei())})(bz,function(t){return(function(){var r=t,n=r.lib,s=n.WordArray,a=n.Hasher,o=r.algo,l=[],u=o.SHA1=a.extend({_doReset:function(){this._hash=new s.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(c,h){for(var m=this._hash.words,g=m[0],y=m[1],_=m[2],T=m[3],E=m[4],w=0;w<80;w++){if(w<16)l[w]=c[h+w]|0;else{var D=l[w-3]^l[w-8]^l[w-14]^l[w-16];l[w]=D<<1|D>>>31}var R=(g<<5|g>>>27)+E+l[w];w<20?R+=(y&_|~y&T)+1518500249:w<40?R+=(y^_^T)+1859775393:w<60?R+=(y&_|y&T|_&T)-1894007588:R+=(y^_^T)-899497514,E=T,T=_,_=y<<30|y>>>2,y=g,g=R}m[0]=m[0]+g|0,m[1]=m[1]+y|0,m[2]=m[2]+_|0,m[3]=m[3]+T|0,m[4]=m[4]+E|0},_doFinalize:function(){var c=this._data,h=c.words,m=this._nDataBytes*8,g=c.sigBytes*8;return h[g>>>5]|=128<<24-g%32,h[(g+64>>>9<<4)+14]=Math.floor(m/4294967296),h[(g+64>>>9<<4)+15]=m,c.sigBytes=h.length*4,this._process(),this._hash},clone:function(){var c=a.clone.call(this);return c._hash=this._hash.clone(),c}});r.SHA1=a._createHelper(u),r.HmacSHA1=a._createHmacHelper(u)})(),t.SHA1})})(Yv)),Yv.exports}var Qv={exports:{}},Sz=Qv.exports,tD;function NE(){return tD||(tD=1,(function(i,e){(function(t,r){i.exports=r(ei())})(Sz,function(t){return(function(r){var n=t,s=n.lib,a=s.WordArray,o=s.Hasher,l=n.algo,u=[],c=[];(function(){function g(E){for(var w=r.sqrt(E),D=2;D<=w;D++)if(!(E%D))return!1;return!0}function y(E){return(E-(E|0))*4294967296|0}for(var _=2,T=0;T<64;)g(_)&&(T<8&&(u[T]=y(r.pow(_,1/2))),c[T]=y(r.pow(_,1/3)),T++),_++})();var h=[],m=l.SHA256=o.extend({_doReset:function(){this._hash=new a.init(u.slice(0))},_doProcessBlock:function(g,y){for(var _=this._hash.words,T=_[0],E=_[1],w=_[2],D=_[3],R=_[4],A=_[5],L=_[6],F=_[7],B=0;B<64;B++){if(B<16)h[B]=g[y+B]|0;else{var M=h[B-15],k=(M<<25|M>>>7)^(M<<14|M>>>18)^M>>>3,q=h[B-2],G=(q<<15|q>>>17)^(q<<13|q>>>19)^q>>>10;h[B]=k+h[B-7]+G+h[B-16]}var H=R&A^~R&L,re=T&E^T&w^E&w,se=(T<<30|T>>>2)^(T<<19|T>>>13)^(T<<10|T>>>22),de=(R<<26|R>>>6)^(R<<21|R>>>11)^(R<<7|R>>>25),me=F+de+H+c[B]+h[B],ue=se+re;F=L,L=A,A=R,R=D+me|0,D=w,w=E,E=T,T=me+ue|0}_[0]=_[0]+T|0,_[1]=_[1]+E|0,_[2]=_[2]+w|0,_[3]=_[3]+D|0,_[4]=_[4]+R|0,_[5]=_[5]+A|0,_[6]=_[6]+L|0,_[7]=_[7]+F|0},_doFinalize:function(){var g=this._data,y=g.words,_=this._nDataBytes*8,T=g.sigBytes*8;return y[T>>>5]|=128<<24-T%32,y[(T+64>>>9<<4)+14]=r.floor(_/4294967296),y[(T+64>>>9<<4)+15]=_,g.sigBytes=y.length*4,this._process(),this._hash},clone:function(){var g=o.clone.call(this);return g._hash=this._hash.clone(),g}});n.SHA256=o._createHelper(m),n.HmacSHA256=o._createHmacHelper(m)})(Math),t.SHA256})})(Qv)),Qv.exports}var Jv={exports:{}},Cz=Jv.exports,rD;function Ez(){return rD||(rD=1,(function(i,e){(function(t,r,n){i.exports=r(ei(),NE())})(Cz,function(t){return(function(){var r=t,n=r.lib,s=n.WordArray,a=r.algo,o=a.SHA256,l=a.SHA224=o.extend({_doReset:function(){this._hash=new s.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},_doFinalize:function(){var u=o._doFinalize.call(this);return u.sigBytes-=4,u}});r.SHA224=o._createHelper(l),r.HmacSHA224=o._createHmacHelper(l)})(),t.SHA224})})(Jv)),Jv.exports}var Zv={exports:{}},wz=Zv.exports,iD;function h3(){return iD||(iD=1,(function(i,e){(function(t,r,n){i.exports=r(ei(),yx())})(wz,function(t){return(function(){var r=t,n=r.lib,s=n.Hasher,a=r.x64,o=a.Word,l=a.WordArray,u=r.algo;function c(){return o.create.apply(o,arguments)}var h=[c(1116352408,3609767458),c(1899447441,602891725),c(3049323471,3964484399),c(3921009573,2173295548),c(961987163,4081628472),c(1508970993,3053834265),c(2453635748,2937671579),c(2870763221,3664609560),c(3624381080,2734883394),c(310598401,1164996542),c(607225278,1323610764),c(1426881987,3590304994),c(1925078388,4068182383),c(2162078206,991336113),c(2614888103,633803317),c(3248222580,3479774868),c(3835390401,2666613458),c(4022224774,944711139),c(264347078,2341262773),c(604807628,2007800933),c(770255983,1495990901),c(1249150122,1856431235),c(1555081692,3175218132),c(1996064986,2198950837),c(2554220882,3999719339),c(2821834349,766784016),c(2952996808,2566594879),c(3210313671,3203337956),c(3336571891,1034457026),c(3584528711,2466948901),c(113926993,3758326383),c(338241895,168717936),c(666307205,1188179964),c(773529912,1546045734),c(1294757372,1522805485),c(1396182291,2643833823),c(1695183700,2343527390),c(1986661051,1014477480),c(2177026350,1206759142),c(2456956037,344077627),c(2730485921,1290863460),c(2820302411,3158454273),c(3259730800,3505952657),c(3345764771,106217008),c(3516065817,3606008344),c(3600352804,1432725776),c(4094571909,1467031594),c(275423344,851169720),c(430227734,3100823752),c(506948616,1363258195),c(659060556,3750685593),c(883997877,3785050280),c(958139571,3318307427),c(1322822218,3812723403),c(1537002063,2003034995),c(1747873779,3602036899),c(1955562222,1575990012),c(2024104815,1125592928),c(2227730452,2716904306),c(2361852424,442776044),c(2428436474,593698344),c(2756734187,3733110249),c(3204031479,2999351573),c(3329325298,3815920427),c(3391569614,3928383900),c(3515267271,566280711),c(3940187606,3454069534),c(4118630271,4000239992),c(116418474,1914138554),c(174292421,2731055270),c(289380356,3203993006),c(460393269,320620315),c(685471733,587496836),c(852142971,1086792851),c(1017036298,365543100),c(1126000580,2618297676),c(1288033470,3409855158),c(1501505948,4234509866),c(1607167915,987167468),c(1816402316,1246189591)],m=[];(function(){for(var y=0;y<80;y++)m[y]=c()})();var g=u.SHA512=s.extend({_doReset:function(){this._hash=new l.init([new o.init(1779033703,4089235720),new o.init(3144134277,2227873595),new o.init(1013904242,4271175723),new o.init(2773480762,1595750129),new o.init(1359893119,2917565137),new o.init(2600822924,725511199),new o.init(528734635,4215389547),new o.init(1541459225,327033209)])},_doProcessBlock:function(y,_){for(var T=this._hash.words,E=T[0],w=T[1],D=T[2],R=T[3],A=T[4],L=T[5],F=T[6],B=T[7],M=E.high,k=E.low,q=w.high,G=w.low,H=D.high,re=D.low,se=R.high,de=R.low,me=A.high,ue=A.low,oe=L.high,ce=L.low,te=F.high,fe=F.low,ye=B.high,Se=B.low,ke=M,qe=k,vt=q,et=G,kt=H,pt=re,Ut=se,Vt=de,Xe=me,Ue=ue,Le=oe,Ne=ce,rt=te,lt=fe,dt=ye,ut=Se,At=0;At<80;At++){var it,Sr,xr=m[At];if(At<16)Sr=xr.high=y[_+At*2]|0,it=xr.low=y[_+At*2+1]|0;else{var zr=m[At-15],cr=zr.high,Gt=zr.low,Er=(cr>>>1|Gt<<31)^(cr>>>8|Gt<<24)^cr>>>7,Ir=(Gt>>>1|cr<<31)^(Gt>>>8|cr<<24)^(Gt>>>7|cr<<25),Hr=m[At-2],It=Hr.high,$t=Hr.low,Bi=(It>>>19|$t<<13)^(It<<3|$t>>>29)^It>>>6,zt=($t>>>19|It<<13)^($t<<3|It>>>29)^($t>>>6|It<<26),Dr=m[At-7],$r=Dr.high,Jr=Dr.low,Ni=m[At-16],sn=Ni.high,Ui=Ni.low;it=Ir+Jr,Sr=Er+$r+(it>>>0<Ir>>>0?1:0),it=it+zt,Sr=Sr+Bi+(it>>>0<zt>>>0?1:0),it=it+Ui,Sr=Sr+sn+(it>>>0<Ui>>>0?1:0),xr.high=Sr,xr.low=it}var Wi=Xe&Le^~Xe&rt,ne=Ue&Ne^~Ue&lt,he=ke&vt^ke&kt^vt&kt,Ce=qe&et^qe&pt^et&pt,ze=(ke>>>28|qe<<4)^(ke<<30|qe>>>2)^(ke<<25|qe>>>7),yt=(qe>>>28|ke<<4)^(qe<<30|ke>>>2)^(qe<<25|ke>>>7),ir=(Xe>>>14|Ue<<18)^(Xe>>>18|Ue<<14)^(Xe<<23|Ue>>>9),xe=(Ue>>>14|Xe<<18)^(Ue>>>18|Xe<<14)^(Ue<<23|Xe>>>9),Pe=h[At],Be=Pe.high,nt=Pe.low,ct=ut+xe,Rt=dt+ir+(ct>>>0<ut>>>0?1:0),ct=ct+ne,Rt=Rt+Wi+(ct>>>0<ne>>>0?1:0),ct=ct+nt,Rt=Rt+Be+(ct>>>0<nt>>>0?1:0),ct=ct+it,Rt=Rt+Sr+(ct>>>0<it>>>0?1:0),Ot=yt+Ce,st=ze+he+(Ot>>>0<yt>>>0?1:0);dt=rt,ut=lt,rt=Le,lt=Ne,Le=Xe,Ne=Ue,Ue=Vt+ct|0,Xe=Ut+Rt+(Ue>>>0<Vt>>>0?1:0)|0,Ut=kt,Vt=pt,kt=vt,pt=et,vt=ke,et=qe,qe=ct+Ot|0,ke=Rt+st+(qe>>>0<ct>>>0?1:0)|0}k=E.low=k+qe,E.high=M+ke+(k>>>0<qe>>>0?1:0),G=w.low=G+et,w.high=q+vt+(G>>>0<et>>>0?1:0),re=D.low=re+pt,D.high=H+kt+(re>>>0<pt>>>0?1:0),de=R.low=de+Vt,R.high=se+Ut+(de>>>0<Vt>>>0?1:0),ue=A.low=ue+Ue,A.high=me+Xe+(ue>>>0<Ue>>>0?1:0),ce=L.low=ce+Ne,L.high=oe+Le+(ce>>>0<Ne>>>0?1:0),fe=F.low=fe+lt,F.high=te+rt+(fe>>>0<lt>>>0?1:0),Se=B.low=Se+ut,B.high=ye+dt+(Se>>>0<ut>>>0?1:0)},_doFinalize:function(){var y=this._data,_=y.words,T=this._nDataBytes*8,E=y.sigBytes*8;_[E>>>5]|=128<<24-E%32,_[(E+128>>>10<<5)+30]=Math.floor(T/4294967296),_[(E+128>>>10<<5)+31]=T,y.sigBytes=_.length*4,this._process();var w=this._hash.toX32();return w},clone:function(){var y=s.clone.call(this);return y._hash=this._hash.clone(),y},blockSize:1024/32});r.SHA512=s._createHelper(g),r.HmacSHA512=s._createHmacHelper(g)})(),t.SHA512})})(Zv)),Zv.exports}var ey={exports:{}},kz=ey.exports,nD;function Az(){return nD||(nD=1,(function(i,e){(function(t,r,n){i.exports=r(ei(),yx(),h3())})(kz,function(t){return(function(){var r=t,n=r.x64,s=n.Word,a=n.WordArray,o=r.algo,l=o.SHA512,u=o.SHA384=l.extend({_doReset:function(){this._hash=new a.init([new s.init(3418070365,3238371032),new s.init(1654270250,914150663),new s.init(2438529370,812702999),new s.init(355462360,4144912697),new s.init(1731405415,4290775857),new s.init(2394180231,1750603025),new s.init(3675008525,1694076839),new s.init(1203062813,3204075428)])},_doFinalize:function(){var c=l._doFinalize.call(this);return c.sigBytes-=16,c}});r.SHA384=l._createHelper(u),r.HmacSHA384=l._createHmacHelper(u)})(),t.SHA384})})(ey)),ey.exports}var ty={exports:{}},Iz=ty.exports,sD;function Dz(){return sD||(sD=1,(function(i,e){(function(t,r,n){i.exports=r(ei(),yx())})(Iz,function(t){return(function(r){var n=t,s=n.lib,a=s.WordArray,o=s.Hasher,l=n.x64,u=l.Word,c=n.algo,h=[],m=[],g=[];(function(){for(var T=1,E=0,w=0;w<24;w++){h[T+5*E]=(w+1)*(w+2)/2%64;var D=E%5,R=(2*T+3*E)%5;T=D,E=R}for(var T=0;T<5;T++)for(var E=0;E<5;E++)m[T+5*E]=E+(2*T+3*E)%5*5;for(var A=1,L=0;L<24;L++){for(var F=0,B=0,M=0;M<7;M++){if(A&1){var k=(1<<M)-1;k<32?B^=1<<k:F^=1<<k-32}A&128?A=A<<1^113:A<<=1}g[L]=u.create(F,B)}})();var y=[];(function(){for(var T=0;T<25;T++)y[T]=u.create()})();var _=c.SHA3=o.extend({cfg:o.cfg.extend({outputLength:512}),_doReset:function(){for(var T=this._state=[],E=0;E<25;E++)T[E]=new u.init;this.blockSize=(1600-2*this.cfg.outputLength)/32},_doProcessBlock:function(T,E){for(var w=this._state,D=this.blockSize/2,R=0;R<D;R++){var A=T[E+2*R],L=T[E+2*R+1];A=(A<<8|A>>>24)&16711935|(A<<24|A>>>8)&4278255360,L=(L<<8|L>>>24)&16711935|(L<<24|L>>>8)&4278255360;var F=w[R];F.high^=L,F.low^=A}for(var B=0;B<24;B++){for(var M=0;M<5;M++){for(var k=0,q=0,G=0;G<5;G++){var F=w[M+5*G];k^=F.high,q^=F.low}var H=y[M];H.high=k,H.low=q}for(var M=0;M<5;M++)for(var re=y[(M+4)%5],se=y[(M+1)%5],de=se.high,me=se.low,k=re.high^(de<<1|me>>>31),q=re.low^(me<<1|de>>>31),G=0;G<5;G++){var F=w[M+5*G];F.high^=k,F.low^=q}for(var ue=1;ue<25;ue++){var k,q,F=w[ue],oe=F.high,ce=F.low,te=h[ue];te<32?(k=oe<<te|ce>>>32-te,q=ce<<te|oe>>>32-te):(k=ce<<te-32|oe>>>64-te,q=oe<<te-32|ce>>>64-te);var fe=y[m[ue]];fe.high=k,fe.low=q}var ye=y[0],Se=w[0];ye.high=Se.high,ye.low=Se.low;for(var M=0;M<5;M++)for(var G=0;G<5;G++){var ue=M+5*G,F=w[ue],ke=y[ue],qe=y[(M+1)%5+5*G],vt=y[(M+2)%5+5*G];F.high=ke.high^~qe.high&vt.high,F.low=ke.low^~qe.low&vt.low}var F=w[0],et=g[B];F.high^=et.high,F.low^=et.low}},_doFinalize:function(){var T=this._data,E=T.words;this._nDataBytes*8;var w=T.sigBytes*8,D=this.blockSize*32;E[w>>>5]|=1<<24-w%32,E[(r.ceil((w+1)/D)*D>>>5)-1]|=128,T.sigBytes=E.length*4,this._process();for(var R=this._state,A=this.cfg.outputLength/8,L=A/8,F=[],B=0;B<L;B++){var M=R[B],k=M.high,q=M.low;k=(k<<8|k>>>24)&16711935|(k<<24|k>>>8)&4278255360,q=(q<<8|q>>>24)&16711935|(q<<24|q>>>8)&4278255360,F.push(q),F.push(k)}return new a.init(F,A)},clone:function(){for(var T=o.clone.call(this),E=T._state=this._state.slice(0),w=0;w<25;w++)E[w]=E[w].clone();return T}});n.SHA3=o._createHelper(_),n.HmacSHA3=o._createHmacHelper(_)})(Math),t.SHA3})})(ty)),ty.exports}var ry={exports:{}},Pz=ry.exports,aD;function Rz(){return aD||(aD=1,(function(i,e){(function(t,r){i.exports=r(ei())})(Pz,function(t){/** @preserve
			(c) 2012 by Cdric Mesnil. All rights reserved.

			Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:

			    - Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.
			    - Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.

			THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
			*/return(function(r){var n=t,s=n.lib,a=s.WordArray,o=s.Hasher,l=n.algo,u=a.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),c=a.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),h=a.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),m=a.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),g=a.create([0,1518500249,1859775393,2400959708,2840853838]),y=a.create([1352829926,1548603684,1836072691,2053994217,0]),_=l.RIPEMD160=o.extend({_doReset:function(){this._hash=a.create([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(L,F){for(var B=0;B<16;B++){var M=F+B,k=L[M];L[M]=(k<<8|k>>>24)&16711935|(k<<24|k>>>8)&4278255360}var q=this._hash.words,G=g.words,H=y.words,re=u.words,se=c.words,de=h.words,me=m.words,ue,oe,ce,te,fe,ye,Se,ke,qe,vt;ye=ue=q[0],Se=oe=q[1],ke=ce=q[2],qe=te=q[3],vt=fe=q[4];for(var et,B=0;B<80;B+=1)et=ue+L[F+re[B]]|0,B<16?et+=T(oe,ce,te)+G[0]:B<32?et+=E(oe,ce,te)+G[1]:B<48?et+=w(oe,ce,te)+G[2]:B<64?et+=D(oe,ce,te)+G[3]:et+=R(oe,ce,te)+G[4],et=et|0,et=A(et,de[B]),et=et+fe|0,ue=fe,fe=te,te=A(ce,10),ce=oe,oe=et,et=ye+L[F+se[B]]|0,B<16?et+=R(Se,ke,qe)+H[0]:B<32?et+=D(Se,ke,qe)+H[1]:B<48?et+=w(Se,ke,qe)+H[2]:B<64?et+=E(Se,ke,qe)+H[3]:et+=T(Se,ke,qe)+H[4],et=et|0,et=A(et,me[B]),et=et+vt|0,ye=vt,vt=qe,qe=A(ke,10),ke=Se,Se=et;et=q[1]+ce+qe|0,q[1]=q[2]+te+vt|0,q[2]=q[3]+fe+ye|0,q[3]=q[4]+ue+Se|0,q[4]=q[0]+oe+ke|0,q[0]=et},_doFinalize:function(){var L=this._data,F=L.words,B=this._nDataBytes*8,M=L.sigBytes*8;F[M>>>5]|=128<<24-M%32,F[(M+64>>>9<<4)+14]=(B<<8|B>>>24)&16711935|(B<<24|B>>>8)&4278255360,L.sigBytes=(F.length+1)*4,this._process();for(var k=this._hash,q=k.words,G=0;G<5;G++){var H=q[G];q[G]=(H<<8|H>>>24)&16711935|(H<<24|H>>>8)&4278255360}return k},clone:function(){var L=o.clone.call(this);return L._hash=this._hash.clone(),L}});function T(L,F,B){return L^F^B}function E(L,F,B){return L&F|~L&B}function w(L,F,B){return(L|~F)^B}function D(L,F,B){return L&B|F&~B}function R(L,F,B){return L^(F|~B)}function A(L,F){return L<<F|L>>>32-F}n.RIPEMD160=o._createHelper(_),n.HmacRIPEMD160=o._createHmacHelper(_)})(),t.RIPEMD160})})(ry)),ry.exports}var iy={exports:{}},Lz=iy.exports,oD;function UE(){return oD||(oD=1,(function(i,e){(function(t,r){i.exports=r(ei())})(Lz,function(t){(function(){var r=t,n=r.lib,s=n.Base,a=r.enc,o=a.Utf8,l=r.algo;l.HMAC=s.extend({init:function(u,c){u=this._hasher=new u.init,typeof c=="string"&&(c=o.parse(c));var h=u.blockSize,m=h*4;c.sigBytes>m&&(c=u.finalize(c)),c.clamp();for(var g=this._oKey=c.clone(),y=this._iKey=c.clone(),_=g.words,T=y.words,E=0;E<h;E++)_[E]^=1549556828,T[E]^=909522486;g.sigBytes=y.sigBytes=m,this.reset()},reset:function(){var u=this._hasher;u.reset(),u.update(this._iKey)},update:function(u){return this._hasher.update(u),this},finalize:function(u){var c=this._hasher,h=c.finalize(u);c.reset();var m=c.finalize(this._oKey.clone().concat(h));return m}})})()})})(iy)),iy.exports}var ny={exports:{}},Oz=ny.exports,lD;function Mz(){return lD||(lD=1,(function(i,e){(function(t,r,n){i.exports=r(ei(),NE(),UE())})(Oz,function(t){return(function(){var r=t,n=r.lib,s=n.Base,a=n.WordArray,o=r.algo,l=o.SHA256,u=o.HMAC,c=o.PBKDF2=s.extend({cfg:s.extend({keySize:128/32,hasher:l,iterations:25e4}),init:function(h){this.cfg=this.cfg.extend(h)},compute:function(h,m){for(var g=this.cfg,y=u.create(g.hasher,h),_=a.create(),T=a.create([1]),E=_.words,w=T.words,D=g.keySize,R=g.iterations;E.length<D;){var A=y.update(m).finalize(T);y.reset();for(var L=A.words,F=L.length,B=A,M=1;M<R;M++){B=y.finalize(B),y.reset();for(var k=B.words,q=0;q<F;q++)L[q]^=k[q]}_.concat(A),w[0]++}return _.sigBytes=D*4,_}});r.PBKDF2=function(h,m,g){return c.create(g).compute(h,m)}})(),t.PBKDF2})})(ny)),ny.exports}var sy={exports:{}},Fz=sy.exports,uD;function vd(){return uD||(uD=1,(function(i,e){(function(t,r,n){i.exports=r(ei(),d3(),UE())})(Fz,function(t){return(function(){var r=t,n=r.lib,s=n.Base,a=n.WordArray,o=r.algo,l=o.MD5,u=o.EvpKDF=s.extend({cfg:s.extend({keySize:128/32,hasher:l,iterations:1}),init:function(c){this.cfg=this.cfg.extend(c)},compute:function(c,h){for(var m,g=this.cfg,y=g.hasher.create(),_=a.create(),T=_.words,E=g.keySize,w=g.iterations;T.length<E;){m&&y.update(m),m=y.update(c).finalize(h),y.reset();for(var D=1;D<w;D++)m=y.finalize(m),y.reset();_.concat(m)}return _.sigBytes=E*4,_}});r.EvpKDF=function(c,h,m){return u.create(m).compute(c,h)}})(),t.EvpKDF})})(sy)),sy.exports}var ay={exports:{}},Bz=ay.exports,cD;function Qn(){return cD||(cD=1,(function(i,e){(function(t,r,n){i.exports=r(ei(),vd())})(Bz,function(t){t.lib.Cipher||(function(r){var n=t,s=n.lib,a=s.Base,o=s.WordArray,l=s.BufferedBlockAlgorithm,u=n.enc;u.Utf8;var c=u.Base64,h=n.algo,m=h.EvpKDF,g=s.Cipher=l.extend({cfg:a.extend(),createEncryptor:function(k,q){return this.create(this._ENC_XFORM_MODE,k,q)},createDecryptor:function(k,q){return this.create(this._DEC_XFORM_MODE,k,q)},init:function(k,q,G){this.cfg=this.cfg.extend(G),this._xformMode=k,this._key=q,this.reset()},reset:function(){l.reset.call(this),this._doReset()},process:function(k){return this._append(k),this._process()},finalize:function(k){k&&this._append(k);var q=this._doFinalize();return q},keySize:128/32,ivSize:128/32,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:(function(){function k(q){return typeof q=="string"?M:L}return function(q){return{encrypt:function(G,H,re){return k(H).encrypt(q,G,H,re)},decrypt:function(G,H,re){return k(H).decrypt(q,G,H,re)}}}})()});s.StreamCipher=g.extend({_doFinalize:function(){var k=this._process(!0);return k},blockSize:1});var y=n.mode={},_=s.BlockCipherMode=a.extend({createEncryptor:function(k,q){return this.Encryptor.create(k,q)},createDecryptor:function(k,q){return this.Decryptor.create(k,q)},init:function(k,q){this._cipher=k,this._iv=q}}),T=y.CBC=(function(){var k=_.extend();k.Encryptor=k.extend({processBlock:function(G,H){var re=this._cipher,se=re.blockSize;q.call(this,G,H,se),re.encryptBlock(G,H),this._prevBlock=G.slice(H,H+se)}}),k.Decryptor=k.extend({processBlock:function(G,H){var re=this._cipher,se=re.blockSize,de=G.slice(H,H+se);re.decryptBlock(G,H),q.call(this,G,H,se),this._prevBlock=de}});function q(G,H,re){var se,de=this._iv;de?(se=de,this._iv=r):se=this._prevBlock;for(var me=0;me<re;me++)G[H+me]^=se[me]}return k})(),E=n.pad={},w=E.Pkcs7={pad:function(k,q){for(var G=q*4,H=G-k.sigBytes%G,re=H<<24|H<<16|H<<8|H,se=[],de=0;de<H;de+=4)se.push(re);var me=o.create(se,H);k.concat(me)},unpad:function(k){var q=k.words[k.sigBytes-1>>>2]&255;k.sigBytes-=q}};s.BlockCipher=g.extend({cfg:g.cfg.extend({mode:T,padding:w}),reset:function(){var k;g.reset.call(this);var q=this.cfg,G=q.iv,H=q.mode;this._xformMode==this._ENC_XFORM_MODE?k=H.createEncryptor:(k=H.createDecryptor,this._minBufferSize=1),this._mode&&this._mode.__creator==k?this._mode.init(this,G&&G.words):(this._mode=k.call(H,this,G&&G.words),this._mode.__creator=k)},_doProcessBlock:function(k,q){this._mode.processBlock(k,q)},_doFinalize:function(){var k,q=this.cfg.padding;return this._xformMode==this._ENC_XFORM_MODE?(q.pad(this._data,this.blockSize),k=this._process(!0)):(k=this._process(!0),q.unpad(k)),k},blockSize:128/32});var D=s.CipherParams=a.extend({init:function(k){this.mixIn(k)},toString:function(k){return(k||this.formatter).stringify(this)}}),R=n.format={},A=R.OpenSSL={stringify:function(k){var q,G=k.ciphertext,H=k.salt;return H?q=o.create([1398893684,1701076831]).concat(H).concat(G):q=G,q.toString(c)},parse:function(k){var q,G=c.parse(k),H=G.words;return H[0]==1398893684&&H[1]==1701076831&&(q=o.create(H.slice(2,4)),H.splice(0,4),G.sigBytes-=16),D.create({ciphertext:G,salt:q})}},L=s.SerializableCipher=a.extend({cfg:a.extend({format:A}),encrypt:function(k,q,G,H){H=this.cfg.extend(H);var re=k.createEncryptor(G,H),se=re.finalize(q),de=re.cfg;return D.create({ciphertext:se,key:G,iv:de.iv,algorithm:k,mode:de.mode,padding:de.padding,blockSize:k.blockSize,formatter:H.format})},decrypt:function(k,q,G,H){H=this.cfg.extend(H),q=this._parse(q,H.format);var re=k.createDecryptor(G,H).finalize(q.ciphertext);return re},_parse:function(k,q){return typeof k=="string"?q.parse(k,this):k}}),F=n.kdf={},B=F.OpenSSL={execute:function(k,q,G,H,re){if(H||(H=o.random(64/8)),re)var se=m.create({keySize:q+G,hasher:re}).compute(k,H);else var se=m.create({keySize:q+G}).compute(k,H);var de=o.create(se.words.slice(q),G*4);return se.sigBytes=q*4,D.create({key:se,iv:de,salt:H})}},M=s.PasswordBasedCipher=L.extend({cfg:L.cfg.extend({kdf:B}),encrypt:function(k,q,G,H){H=this.cfg.extend(H);var re=H.kdf.execute(G,k.keySize,k.ivSize,H.salt,H.hasher);H.iv=re.iv;var se=L.encrypt.call(this,k,q,re.key,H);return se.mixIn(re),se},decrypt:function(k,q,G,H){H=this.cfg.extend(H),q=this._parse(q,H.format);var re=H.kdf.execute(G,k.keySize,k.ivSize,q.salt,H.hasher);H.iv=re.iv;var se=L.decrypt.call(this,k,q,re.key,H);return se}})})()})})(ay)),ay.exports}var oy={exports:{}},Nz=oy.exports,dD;function Uz(){return dD||(dD=1,(function(i,e){(function(t,r,n){i.exports=r(ei(),Qn())})(Nz,function(t){return t.mode.CFB=(function(){var r=t.lib.BlockCipherMode.extend();r.Encryptor=r.extend({processBlock:function(s,a){var o=this._cipher,l=o.blockSize;n.call(this,s,a,l,o),this._prevBlock=s.slice(a,a+l)}}),r.Decryptor=r.extend({processBlock:function(s,a){var o=this._cipher,l=o.blockSize,u=s.slice(a,a+l);n.call(this,s,a,l,o),this._prevBlock=u}});function n(s,a,o,l){var u,c=this._iv;c?(u=c.slice(0),this._iv=void 0):u=this._prevBlock,l.encryptBlock(u,0);for(var h=0;h<o;h++)s[a+h]^=u[h]}return r})(),t.mode.CFB})})(oy)),oy.exports}var ly={exports:{}},$z=ly.exports,hD;function jz(){return hD||(hD=1,(function(i,e){(function(t,r,n){i.exports=r(ei(),Qn())})($z,function(t){return t.mode.CTR=(function(){var r=t.lib.BlockCipherMode.extend(),n=r.Encryptor=r.extend({processBlock:function(s,a){var o=this._cipher,l=o.blockSize,u=this._iv,c=this._counter;u&&(c=this._counter=u.slice(0),this._iv=void 0);var h=c.slice(0);o.encryptBlock(h,0),c[l-1]=c[l-1]+1|0;for(var m=0;m<l;m++)s[a+m]^=h[m]}});return r.Decryptor=n,r})(),t.mode.CTR})})(ly)),ly.exports}var uy={exports:{}},zz=uy.exports,fD;function Hz(){return fD||(fD=1,(function(i,e){(function(t,r,n){i.exports=r(ei(),Qn())})(zz,function(t){/** @preserve
 * Counter block mode compatible with  Dr Brian Gladman fileenc.c
 * derived from CryptoJS.mode.CTR
 * Jan Hruby jhruby.web@gmail.com
 */return t.mode.CTRGladman=(function(){var r=t.lib.BlockCipherMode.extend();function n(o){if((o>>24&255)===255){var l=o>>16&255,u=o>>8&255,c=o&255;l===255?(l=0,u===255?(u=0,c===255?c=0:++c):++u):++l,o=0,o+=l<<16,o+=u<<8,o+=c}else o+=1<<24;return o}function s(o){return(o[0]=n(o[0]))===0&&(o[1]=n(o[1])),o}var a=r.Encryptor=r.extend({processBlock:function(o,l){var u=this._cipher,c=u.blockSize,h=this._iv,m=this._counter;h&&(m=this._counter=h.slice(0),this._iv=void 0),s(m);var g=m.slice(0);u.encryptBlock(g,0);for(var y=0;y<c;y++)o[l+y]^=g[y]}});return r.Decryptor=a,r})(),t.mode.CTRGladman})})(uy)),uy.exports}var cy={exports:{}},Vz=cy.exports,pD;function qz(){return pD||(pD=1,(function(i,e){(function(t,r,n){i.exports=r(ei(),Qn())})(Vz,function(t){return t.mode.OFB=(function(){var r=t.lib.BlockCipherMode.extend(),n=r.Encryptor=r.extend({processBlock:function(s,a){var o=this._cipher,l=o.blockSize,u=this._iv,c=this._keystream;u&&(c=this._keystream=u.slice(0),this._iv=void 0),o.encryptBlock(c,0);for(var h=0;h<l;h++)s[a+h]^=c[h]}});return r.Decryptor=n,r})(),t.mode.OFB})})(cy)),cy.exports}var dy={exports:{}},Wz=dy.exports,mD;function Gz(){return mD||(mD=1,(function(i,e){(function(t,r,n){i.exports=r(ei(),Qn())})(Wz,function(t){return t.mode.ECB=(function(){var r=t.lib.BlockCipherMode.extend();return r.Encryptor=r.extend({processBlock:function(n,s){this._cipher.encryptBlock(n,s)}}),r.Decryptor=r.extend({processBlock:function(n,s){this._cipher.decryptBlock(n,s)}}),r})(),t.mode.ECB})})(dy)),dy.exports}var hy={exports:{}},Kz=hy.exports,gD;function Xz(){return gD||(gD=1,(function(i,e){(function(t,r,n){i.exports=r(ei(),Qn())})(Kz,function(t){return t.pad.AnsiX923={pad:function(r,n){var s=r.sigBytes,a=n*4,o=a-s%a,l=s+o-1;r.clamp(),r.words[l>>>2]|=o<<24-l%4*8,r.sigBytes+=o},unpad:function(r){var n=r.words[r.sigBytes-1>>>2]&255;r.sigBytes-=n}},t.pad.Ansix923})})(hy)),hy.exports}var fy={exports:{}},Yz=fy.exports,vD;function Qz(){return vD||(vD=1,(function(i,e){(function(t,r,n){i.exports=r(ei(),Qn())})(Yz,function(t){return t.pad.Iso10126={pad:function(r,n){var s=n*4,a=s-r.sigBytes%s;r.concat(t.lib.WordArray.random(a-1)).concat(t.lib.WordArray.create([a<<24],1))},unpad:function(r){var n=r.words[r.sigBytes-1>>>2]&255;r.sigBytes-=n}},t.pad.Iso10126})})(fy)),fy.exports}var py={exports:{}},Jz=py.exports,yD;function Zz(){return yD||(yD=1,(function(i,e){(function(t,r,n){i.exports=r(ei(),Qn())})(Jz,function(t){return t.pad.Iso97971={pad:function(r,n){r.concat(t.lib.WordArray.create([2147483648],1)),t.pad.ZeroPadding.pad(r,n)},unpad:function(r){t.pad.ZeroPadding.unpad(r),r.sigBytes--}},t.pad.Iso97971})})(py)),py.exports}var my={exports:{}},eH=my.exports,_D;function tH(){return _D||(_D=1,(function(i,e){(function(t,r,n){i.exports=r(ei(),Qn())})(eH,function(t){return t.pad.ZeroPadding={pad:function(r,n){var s=n*4;r.clamp(),r.sigBytes+=s-(r.sigBytes%s||s)},unpad:function(r){for(var n=r.words,s=r.sigBytes-1,s=r.sigBytes-1;s>=0;s--)if(n[s>>>2]>>>24-s%4*8&255){r.sigBytes=s+1;break}}},t.pad.ZeroPadding})})(my)),my.exports}var gy={exports:{}},rH=gy.exports,xD;function iH(){return xD||(xD=1,(function(i,e){(function(t,r,n){i.exports=r(ei(),Qn())})(rH,function(t){return t.pad.NoPadding={pad:function(){},unpad:function(){}},t.pad.NoPadding})})(gy)),gy.exports}var vy={exports:{}},nH=vy.exports,TD;function sH(){return TD||(TD=1,(function(i,e){(function(t,r,n){i.exports=r(ei(),Qn())})(nH,function(t){return(function(r){var n=t,s=n.lib,a=s.CipherParams,o=n.enc,l=o.Hex,u=n.format;u.Hex={stringify:function(c){return c.ciphertext.toString(l)},parse:function(c){var h=l.parse(c);return a.create({ciphertext:h})}}})(),t.format.Hex})})(vy)),vy.exports}var yy={exports:{}},aH=yy.exports,bD;function oH(){return bD||(bD=1,(function(i,e){(function(t,r,n){i.exports=r(ei(),Ah(),Ih(),vd(),Qn())})(aH,function(t){return(function(){var r=t,n=r.lib,s=n.BlockCipher,a=r.algo,o=[],l=[],u=[],c=[],h=[],m=[],g=[],y=[],_=[],T=[];(function(){for(var D=[],R=0;R<256;R++)R<128?D[R]=R<<1:D[R]=R<<1^283;for(var A=0,L=0,R=0;R<256;R++){var F=L^L<<1^L<<2^L<<3^L<<4;F=F>>>8^F&255^99,o[A]=F,l[F]=A;var B=D[A],M=D[B],k=D[M],q=D[F]*257^F*16843008;u[A]=q<<24|q>>>8,c[A]=q<<16|q>>>16,h[A]=q<<8|q>>>24,m[A]=q;var q=k*16843009^M*65537^B*257^A*16843008;g[F]=q<<24|q>>>8,y[F]=q<<16|q>>>16,_[F]=q<<8|q>>>24,T[F]=q,A?(A=B^D[D[D[k^B]]],L^=D[D[L]]):A=L=1}})();var E=[0,1,2,4,8,16,32,64,128,27,54],w=a.AES=s.extend({_doReset:function(){var D;if(!(this._nRounds&&this._keyPriorReset===this._key)){for(var R=this._keyPriorReset=this._key,A=R.words,L=R.sigBytes/4,F=this._nRounds=L+6,B=(F+1)*4,M=this._keySchedule=[],k=0;k<B;k++)k<L?M[k]=A[k]:(D=M[k-1],k%L?L>6&&k%L==4&&(D=o[D>>>24]<<24|o[D>>>16&255]<<16|o[D>>>8&255]<<8|o[D&255]):(D=D<<8|D>>>24,D=o[D>>>24]<<24|o[D>>>16&255]<<16|o[D>>>8&255]<<8|o[D&255],D^=E[k/L|0]<<24),M[k]=M[k-L]^D);for(var q=this._invKeySchedule=[],G=0;G<B;G++){var k=B-G;if(G%4)var D=M[k];else var D=M[k-4];G<4||k<=4?q[G]=D:q[G]=g[o[D>>>24]]^y[o[D>>>16&255]]^_[o[D>>>8&255]]^T[o[D&255]]}}},encryptBlock:function(D,R){this._doCryptBlock(D,R,this._keySchedule,u,c,h,m,o)},decryptBlock:function(D,R){var A=D[R+1];D[R+1]=D[R+3],D[R+3]=A,this._doCryptBlock(D,R,this._invKeySchedule,g,y,_,T,l);var A=D[R+1];D[R+1]=D[R+3],D[R+3]=A},_doCryptBlock:function(D,R,A,L,F,B,M,k){for(var q=this._nRounds,G=D[R]^A[0],H=D[R+1]^A[1],re=D[R+2]^A[2],se=D[R+3]^A[3],de=4,me=1;me<q;me++){var ue=L[G>>>24]^F[H>>>16&255]^B[re>>>8&255]^M[se&255]^A[de++],oe=L[H>>>24]^F[re>>>16&255]^B[se>>>8&255]^M[G&255]^A[de++],ce=L[re>>>24]^F[se>>>16&255]^B[G>>>8&255]^M[H&255]^A[de++],te=L[se>>>24]^F[G>>>16&255]^B[H>>>8&255]^M[re&255]^A[de++];G=ue,H=oe,re=ce,se=te}var ue=(k[G>>>24]<<24|k[H>>>16&255]<<16|k[re>>>8&255]<<8|k[se&255])^A[de++],oe=(k[H>>>24]<<24|k[re>>>16&255]<<16|k[se>>>8&255]<<8|k[G&255])^A[de++],ce=(k[re>>>24]<<24|k[se>>>16&255]<<16|k[G>>>8&255]<<8|k[H&255])^A[de++],te=(k[se>>>24]<<24|k[G>>>16&255]<<16|k[H>>>8&255]<<8|k[re&255])^A[de++];D[R]=ue,D[R+1]=oe,D[R+2]=ce,D[R+3]=te},keySize:256/32});r.AES=s._createHelper(w)})(),t.AES})})(yy)),yy.exports}var _y={exports:{}},lH=_y.exports,SD;function uH(){return SD||(SD=1,(function(i,e){(function(t,r,n){i.exports=r(ei(),Ah(),Ih(),vd(),Qn())})(lH,function(t){return(function(){var r=t,n=r.lib,s=n.WordArray,a=n.BlockCipher,o=r.algo,l=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],u=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],c=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],h=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],m=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],g=o.DES=a.extend({_doReset:function(){for(var E=this._key,w=E.words,D=[],R=0;R<56;R++){var A=l[R]-1;D[R]=w[A>>>5]>>>31-A%32&1}for(var L=this._subKeys=[],F=0;F<16;F++){for(var B=L[F]=[],M=c[F],R=0;R<24;R++)B[R/6|0]|=D[(u[R]-1+M)%28]<<31-R%6,B[4+(R/6|0)]|=D[28+(u[R+24]-1+M)%28]<<31-R%6;B[0]=B[0]<<1|B[0]>>>31;for(var R=1;R<7;R++)B[R]=B[R]>>>(R-1)*4+3;B[7]=B[7]<<5|B[7]>>>27}for(var k=this._invSubKeys=[],R=0;R<16;R++)k[R]=L[15-R]},encryptBlock:function(E,w){this._doCryptBlock(E,w,this._subKeys)},decryptBlock:function(E,w){this._doCryptBlock(E,w,this._invSubKeys)},_doCryptBlock:function(E,w,D){this._lBlock=E[w],this._rBlock=E[w+1],y.call(this,4,252645135),y.call(this,16,65535),_.call(this,2,858993459),_.call(this,8,16711935),y.call(this,1,1431655765);for(var R=0;R<16;R++){for(var A=D[R],L=this._lBlock,F=this._rBlock,B=0,M=0;M<8;M++)B|=h[M][((F^A[M])&m[M])>>>0];this._lBlock=F,this._rBlock=L^B}var k=this._lBlock;this._lBlock=this._rBlock,this._rBlock=k,y.call(this,1,1431655765),_.call(this,8,16711935),_.call(this,2,858993459),y.call(this,16,65535),y.call(this,4,252645135),E[w]=this._lBlock,E[w+1]=this._rBlock},keySize:64/32,ivSize:64/32,blockSize:64/32});function y(E,w){var D=(this._lBlock>>>E^this._rBlock)&w;this._rBlock^=D,this._lBlock^=D<<E}function _(E,w){var D=(this._rBlock>>>E^this._lBlock)&w;this._lBlock^=D,this._rBlock^=D<<E}r.DES=a._createHelper(g);var T=o.TripleDES=a.extend({_doReset:function(){var E=this._key,w=E.words;if(w.length!==2&&w.length!==4&&w.length<6)throw new Error("Invalid key length - 3DES requires the key length to be 64, 128, 192 or >192.");var D=w.slice(0,2),R=w.length<4?w.slice(0,2):w.slice(2,4),A=w.length<6?w.slice(0,2):w.slice(4,6);this._des1=g.createEncryptor(s.create(D)),this._des2=g.createEncryptor(s.create(R)),this._des3=g.createEncryptor(s.create(A))},encryptBlock:function(E,w){this._des1.encryptBlock(E,w),this._des2.decryptBlock(E,w),this._des3.encryptBlock(E,w)},decryptBlock:function(E,w){this._des3.decryptBlock(E,w),this._des2.encryptBlock(E,w),this._des1.decryptBlock(E,w)},keySize:192/32,ivSize:64/32,blockSize:64/32});r.TripleDES=a._createHelper(T)})(),t.TripleDES})})(_y)),_y.exports}var xy={exports:{}},cH=xy.exports,CD;function dH(){return CD||(CD=1,(function(i,e){(function(t,r,n){i.exports=r(ei(),Ah(),Ih(),vd(),Qn())})(cH,function(t){return(function(){var r=t,n=r.lib,s=n.StreamCipher,a=r.algo,o=a.RC4=s.extend({_doReset:function(){for(var c=this._key,h=c.words,m=c.sigBytes,g=this._S=[],y=0;y<256;y++)g[y]=y;for(var y=0,_=0;y<256;y++){var T=y%m,E=h[T>>>2]>>>24-T%4*8&255;_=(_+g[y]+E)%256;var w=g[y];g[y]=g[_],g[_]=w}this._i=this._j=0},_doProcessBlock:function(c,h){c[h]^=l.call(this)},keySize:256/32,ivSize:0});function l(){for(var c=this._S,h=this._i,m=this._j,g=0,y=0;y<4;y++){h=(h+1)%256,m=(m+c[h])%256;var _=c[h];c[h]=c[m],c[m]=_,g|=c[(c[h]+c[m])%256]<<24-y*8}return this._i=h,this._j=m,g}r.RC4=s._createHelper(o);var u=a.RC4Drop=o.extend({cfg:o.cfg.extend({drop:192}),_doReset:function(){o._doReset.call(this);for(var c=this.cfg.drop;c>0;c--)l.call(this)}});r.RC4Drop=s._createHelper(u)})(),t.RC4})})(xy)),xy.exports}var Ty={exports:{}},hH=Ty.exports,ED;function fH(){return ED||(ED=1,(function(i,e){(function(t,r,n){i.exports=r(ei(),Ah(),Ih(),vd(),Qn())})(hH,function(t){return(function(){var r=t,n=r.lib,s=n.StreamCipher,a=r.algo,o=[],l=[],u=[],c=a.Rabbit=s.extend({_doReset:function(){for(var m=this._key.words,g=this.cfg.iv,y=0;y<4;y++)m[y]=(m[y]<<8|m[y]>>>24)&16711935|(m[y]<<24|m[y]>>>8)&4278255360;var _=this._X=[m[0],m[3]<<16|m[2]>>>16,m[1],m[0]<<16|m[3]>>>16,m[2],m[1]<<16|m[0]>>>16,m[3],m[2]<<16|m[1]>>>16],T=this._C=[m[2]<<16|m[2]>>>16,m[0]&4294901760|m[1]&65535,m[3]<<16|m[3]>>>16,m[1]&4294901760|m[2]&65535,m[0]<<16|m[0]>>>16,m[2]&4294901760|m[3]&65535,m[1]<<16|m[1]>>>16,m[3]&4294901760|m[0]&65535];this._b=0;for(var y=0;y<4;y++)h.call(this);for(var y=0;y<8;y++)T[y]^=_[y+4&7];if(g){var E=g.words,w=E[0],D=E[1],R=(w<<8|w>>>24)&16711935|(w<<24|w>>>8)&4278255360,A=(D<<8|D>>>24)&16711935|(D<<24|D>>>8)&4278255360,L=R>>>16|A&4294901760,F=A<<16|R&65535;T[0]^=R,T[1]^=L,T[2]^=A,T[3]^=F,T[4]^=R,T[5]^=L,T[6]^=A,T[7]^=F;for(var y=0;y<4;y++)h.call(this)}},_doProcessBlock:function(m,g){var y=this._X;h.call(this),o[0]=y[0]^y[5]>>>16^y[3]<<16,o[1]=y[2]^y[7]>>>16^y[5]<<16,o[2]=y[4]^y[1]>>>16^y[7]<<16,o[3]=y[6]^y[3]>>>16^y[1]<<16;for(var _=0;_<4;_++)o[_]=(o[_]<<8|o[_]>>>24)&16711935|(o[_]<<24|o[_]>>>8)&4278255360,m[g+_]^=o[_]},blockSize:128/32,ivSize:64/32});function h(){for(var m=this._X,g=this._C,y=0;y<8;y++)l[y]=g[y];g[0]=g[0]+1295307597+this._b|0,g[1]=g[1]+3545052371+(g[0]>>>0<l[0]>>>0?1:0)|0,g[2]=g[2]+886263092+(g[1]>>>0<l[1]>>>0?1:0)|0,g[3]=g[3]+1295307597+(g[2]>>>0<l[2]>>>0?1:0)|0,g[4]=g[4]+3545052371+(g[3]>>>0<l[3]>>>0?1:0)|0,g[5]=g[5]+886263092+(g[4]>>>0<l[4]>>>0?1:0)|0,g[6]=g[6]+1295307597+(g[5]>>>0<l[5]>>>0?1:0)|0,g[7]=g[7]+3545052371+(g[6]>>>0<l[6]>>>0?1:0)|0,this._b=g[7]>>>0<l[7]>>>0?1:0;for(var y=0;y<8;y++){var _=m[y]+g[y],T=_&65535,E=_>>>16,w=((T*T>>>17)+T*E>>>15)+E*E,D=((_&4294901760)*_|0)+((_&65535)*_|0);u[y]=w^D}m[0]=u[0]+(u[7]<<16|u[7]>>>16)+(u[6]<<16|u[6]>>>16)|0,m[1]=u[1]+(u[0]<<8|u[0]>>>24)+u[7]|0,m[2]=u[2]+(u[1]<<16|u[1]>>>16)+(u[0]<<16|u[0]>>>16)|0,m[3]=u[3]+(u[2]<<8|u[2]>>>24)+u[1]|0,m[4]=u[4]+(u[3]<<16|u[3]>>>16)+(u[2]<<16|u[2]>>>16)|0,m[5]=u[5]+(u[4]<<8|u[4]>>>24)+u[3]|0,m[6]=u[6]+(u[5]<<16|u[5]>>>16)+(u[4]<<16|u[4]>>>16)|0,m[7]=u[7]+(u[6]<<8|u[6]>>>24)+u[5]|0}r.Rabbit=s._createHelper(c)})(),t.Rabbit})})(Ty)),Ty.exports}var by={exports:{}},pH=by.exports,wD;function mH(){return wD||(wD=1,(function(i,e){(function(t,r,n){i.exports=r(ei(),Ah(),Ih(),vd(),Qn())})(pH,function(t){return(function(){var r=t,n=r.lib,s=n.StreamCipher,a=r.algo,o=[],l=[],u=[],c=a.RabbitLegacy=s.extend({_doReset:function(){var m=this._key.words,g=this.cfg.iv,y=this._X=[m[0],m[3]<<16|m[2]>>>16,m[1],m[0]<<16|m[3]>>>16,m[2],m[1]<<16|m[0]>>>16,m[3],m[2]<<16|m[1]>>>16],_=this._C=[m[2]<<16|m[2]>>>16,m[0]&4294901760|m[1]&65535,m[3]<<16|m[3]>>>16,m[1]&4294901760|m[2]&65535,m[0]<<16|m[0]>>>16,m[2]&4294901760|m[3]&65535,m[1]<<16|m[1]>>>16,m[3]&4294901760|m[0]&65535];this._b=0;for(var T=0;T<4;T++)h.call(this);for(var T=0;T<8;T++)_[T]^=y[T+4&7];if(g){var E=g.words,w=E[0],D=E[1],R=(w<<8|w>>>24)&16711935|(w<<24|w>>>8)&4278255360,A=(D<<8|D>>>24)&16711935|(D<<24|D>>>8)&4278255360,L=R>>>16|A&4294901760,F=A<<16|R&65535;_[0]^=R,_[1]^=L,_[2]^=A,_[3]^=F,_[4]^=R,_[5]^=L,_[6]^=A,_[7]^=F;for(var T=0;T<4;T++)h.call(this)}},_doProcessBlock:function(m,g){var y=this._X;h.call(this),o[0]=y[0]^y[5]>>>16^y[3]<<16,o[1]=y[2]^y[7]>>>16^y[5]<<16,o[2]=y[4]^y[1]>>>16^y[7]<<16,o[3]=y[6]^y[3]>>>16^y[1]<<16;for(var _=0;_<4;_++)o[_]=(o[_]<<8|o[_]>>>24)&16711935|(o[_]<<24|o[_]>>>8)&4278255360,m[g+_]^=o[_]},blockSize:128/32,ivSize:64/32});function h(){for(var m=this._X,g=this._C,y=0;y<8;y++)l[y]=g[y];g[0]=g[0]+1295307597+this._b|0,g[1]=g[1]+3545052371+(g[0]>>>0<l[0]>>>0?1:0)|0,g[2]=g[2]+886263092+(g[1]>>>0<l[1]>>>0?1:0)|0,g[3]=g[3]+1295307597+(g[2]>>>0<l[2]>>>0?1:0)|0,g[4]=g[4]+3545052371+(g[3]>>>0<l[3]>>>0?1:0)|0,g[5]=g[5]+886263092+(g[4]>>>0<l[4]>>>0?1:0)|0,g[6]=g[6]+1295307597+(g[5]>>>0<l[5]>>>0?1:0)|0,g[7]=g[7]+3545052371+(g[6]>>>0<l[6]>>>0?1:0)|0,this._b=g[7]>>>0<l[7]>>>0?1:0;for(var y=0;y<8;y++){var _=m[y]+g[y],T=_&65535,E=_>>>16,w=((T*T>>>17)+T*E>>>15)+E*E,D=((_&4294901760)*_|0)+((_&65535)*_|0);u[y]=w^D}m[0]=u[0]+(u[7]<<16|u[7]>>>16)+(u[6]<<16|u[6]>>>16)|0,m[1]=u[1]+(u[0]<<8|u[0]>>>24)+u[7]|0,m[2]=u[2]+(u[1]<<16|u[1]>>>16)+(u[0]<<16|u[0]>>>16)|0,m[3]=u[3]+(u[2]<<8|u[2]>>>24)+u[1]|0,m[4]=u[4]+(u[3]<<16|u[3]>>>16)+(u[2]<<16|u[2]>>>16)|0,m[5]=u[5]+(u[4]<<8|u[4]>>>24)+u[3]|0,m[6]=u[6]+(u[5]<<16|u[5]>>>16)+(u[4]<<16|u[4]>>>16)|0,m[7]=u[7]+(u[6]<<8|u[6]>>>24)+u[5]|0}r.RabbitLegacy=s._createHelper(c)})(),t.RabbitLegacy})})(by)),by.exports}var Sy={exports:{}},gH=Sy.exports,kD;function vH(){return kD||(kD=1,(function(i,e){(function(t,r,n){i.exports=r(ei(),Ah(),Ih(),vd(),Qn())})(gH,function(t){return(function(){var r=t,n=r.lib,s=n.BlockCipher,a=r.algo;const o=16,l=[608135816,2242054355,320440878,57701188,2752067618,698298832,137296536,3964562569,1160258022,953160567,3193202383,887688300,3232508343,3380367581,1065670069,3041331479,2450970073,2306472731],u=[[3509652390,2564797868,805139163,3491422135,3101798381,1780907670,3128725573,4046225305,614570311,3012652279,134345442,2240740374,1667834072,1901547113,2757295779,4103290238,227898511,1921955416,1904987480,2182433518,2069144605,3260701109,2620446009,720527379,3318853667,677414384,3393288472,3101374703,2390351024,1614419982,1822297739,2954791486,3608508353,3174124327,2024746970,1432378464,3864339955,2857741204,1464375394,1676153920,1439316330,715854006,3033291828,289532110,2706671279,2087905683,3018724369,1668267050,732546397,1947742710,3462151702,2609353502,2950085171,1814351708,2050118529,680887927,999245976,1800124847,3300911131,1713906067,1641548236,4213287313,1216130144,1575780402,4018429277,3917837745,3693486850,3949271944,596196993,3549867205,258830323,2213823033,772490370,2760122372,1774776394,2652871518,566650946,4142492826,1728879713,2882767088,1783734482,3629395816,2517608232,2874225571,1861159788,326777828,3124490320,2130389656,2716951837,967770486,1724537150,2185432712,2364442137,1164943284,2105845187,998989502,3765401048,2244026483,1075463327,1455516326,1322494562,910128902,469688178,1117454909,936433444,3490320968,3675253459,1240580251,122909385,2157517691,634681816,4142456567,3825094682,3061402683,2540495037,79693498,3249098678,1084186820,1583128258,426386531,1761308591,1047286709,322548459,995290223,1845252383,2603652396,3431023940,2942221577,3202600964,3727903485,1712269319,422464435,3234572375,1170764815,3523960633,3117677531,1434042557,442511882,3600875718,1076654713,1738483198,4213154764,2393238008,3677496056,1014306527,4251020053,793779912,2902807211,842905082,4246964064,1395751752,1040244610,2656851899,3396308128,445077038,3742853595,3577915638,679411651,2892444358,2354009459,1767581616,3150600392,3791627101,3102740896,284835224,4246832056,1258075500,768725851,2589189241,3069724005,3532540348,1274779536,3789419226,2764799539,1660621633,3471099624,4011903706,913787905,3497959166,737222580,2514213453,2928710040,3937242737,1804850592,3499020752,2949064160,2386320175,2390070455,2415321851,4061277028,2290661394,2416832540,1336762016,1754252060,3520065937,3014181293,791618072,3188594551,3933548030,2332172193,3852520463,3043980520,413987798,3465142937,3030929376,4245938359,2093235073,3534596313,375366246,2157278981,2479649556,555357303,3870105701,2008414854,3344188149,4221384143,3956125452,2067696032,3594591187,2921233993,2428461,544322398,577241275,1471733935,610547355,4027169054,1432588573,1507829418,2025931657,3646575487,545086370,48609733,2200306550,1653985193,298326376,1316178497,3007786442,2064951626,458293330,2589141269,3591329599,3164325604,727753846,2179363840,146436021,1461446943,4069977195,705550613,3059967265,3887724982,4281599278,3313849956,1404054877,2845806497,146425753,1854211946],[1266315497,3048417604,3681880366,3289982499,290971e4,1235738493,2632868024,2414719590,3970600049,1771706367,1449415276,3266420449,422970021,1963543593,2690192192,3826793022,1062508698,1531092325,1804592342,2583117782,2714934279,4024971509,1294809318,4028980673,1289560198,2221992742,1669523910,35572830,157838143,1052438473,1016535060,1802137761,1753167236,1386275462,3080475397,2857371447,1040679964,2145300060,2390574316,1461121720,2956646967,4031777805,4028374788,33600511,2920084762,1018524850,629373528,3691585981,3515945977,2091462646,2486323059,586499841,988145025,935516892,3367335476,2599673255,2839830854,265290510,3972581182,2759138881,3795373465,1005194799,847297441,406762289,1314163512,1332590856,1866599683,4127851711,750260880,613907577,1450815602,3165620655,3734664991,3650291728,3012275730,3704569646,1427272223,778793252,1343938022,2676280711,2052605720,1946737175,3164576444,3914038668,3967478842,3682934266,1661551462,3294938066,4011595847,840292616,3712170807,616741398,312560963,711312465,1351876610,322626781,1910503582,271666773,2175563734,1594956187,70604529,3617834859,1007753275,1495573769,4069517037,2549218298,2663038764,504708206,2263041392,3941167025,2249088522,1514023603,1998579484,1312622330,694541497,2582060303,2151582166,1382467621,776784248,2618340202,3323268794,2497899128,2784771155,503983604,4076293799,907881277,423175695,432175456,1378068232,4145222326,3954048622,3938656102,3820766613,2793130115,2977904593,26017576,3274890735,3194772133,1700274565,1756076034,4006520079,3677328699,720338349,1533947780,354530856,688349552,3973924725,1637815568,332179504,3949051286,53804574,2852348879,3044236432,1282449977,3583942155,3416972820,4006381244,1617046695,2628476075,3002303598,1686838959,431878346,2686675385,1700445008,1080580658,1009431731,832498133,3223435511,2605976345,2271191193,2516031870,1648197032,4164389018,2548247927,300782431,375919233,238389289,3353747414,2531188641,2019080857,1475708069,455242339,2609103871,448939670,3451063019,1395535956,2413381860,1841049896,1491858159,885456874,4264095073,4001119347,1565136089,3898914787,1108368660,540939232,1173283510,2745871338,3681308437,4207628240,3343053890,4016749493,1699691293,1103962373,3625875870,2256883143,3830138730,1031889488,3479347698,1535977030,4236805024,3251091107,2132092099,1774941330,1199868427,1452454533,157007616,2904115357,342012276,595725824,1480756522,206960106,497939518,591360097,863170706,2375253569,3596610801,1814182875,2094937945,3421402208,1082520231,3463918190,2785509508,435703966,3908032597,1641649973,2842273706,3305899714,1510255612,2148256476,2655287854,3276092548,4258621189,236887753,3681803219,274041037,1734335097,3815195456,3317970021,1899903192,1026095262,4050517792,356393447,2410691914,3873677099,3682840055],[3913112168,2491498743,4132185628,2489919796,1091903735,1979897079,3170134830,3567386728,3557303409,857797738,1136121015,1342202287,507115054,2535736646,337727348,3213592640,1301675037,2528481711,1895095763,1721773893,3216771564,62756741,2142006736,835421444,2531993523,1442658625,3659876326,2882144922,676362277,1392781812,170690266,3921047035,1759253602,3611846912,1745797284,664899054,1329594018,3901205900,3045908486,2062866102,2865634940,3543621612,3464012697,1080764994,553557557,3656615353,3996768171,991055499,499776247,1265440854,648242737,3940784050,980351604,3713745714,1749149687,3396870395,4211799374,3640570775,1161844396,3125318951,1431517754,545492359,4268468663,3499529547,1437099964,2702547544,3433638243,2581715763,2787789398,1060185593,1593081372,2418618748,4260947970,69676912,2159744348,86519011,2512459080,3838209314,1220612927,3339683548,133810670,1090789135,1078426020,1569222167,845107691,3583754449,4072456591,1091646820,628848692,1613405280,3757631651,526609435,236106946,48312990,2942717905,3402727701,1797494240,859738849,992217954,4005476642,2243076622,3870952857,3732016268,765654824,3490871365,2511836413,1685915746,3888969200,1414112111,2273134842,3281911079,4080962846,172450625,2569994100,980381355,4109958455,2819808352,2716589560,2568741196,3681446669,3329971472,1835478071,660984891,3704678404,4045999559,3422617507,3040415634,1762651403,1719377915,3470491036,2693910283,3642056355,3138596744,1364962596,2073328063,1983633131,926494387,3423689081,2150032023,4096667949,1749200295,3328846651,309677260,2016342300,1779581495,3079819751,111262694,1274766160,443224088,298511866,1025883608,3806446537,1145181785,168956806,3641502830,3584813610,1689216846,3666258015,3200248200,1692713982,2646376535,4042768518,1618508792,1610833997,3523052358,4130873264,2001055236,3610705100,2202168115,4028541809,2961195399,1006657119,2006996926,3186142756,1430667929,3210227297,1314452623,4074634658,4101304120,2273951170,1399257539,3367210612,3027628629,1190975929,2062231137,2333990788,2221543033,2438960610,1181637006,548689776,2362791313,3372408396,3104550113,3145860560,296247880,1970579870,3078560182,3769228297,1714227617,3291629107,3898220290,166772364,1251581989,493813264,448347421,195405023,2709975567,677966185,3703036547,1463355134,2715995803,1338867538,1343315457,2802222074,2684532164,233230375,2599980071,2000651841,3277868038,1638401717,4028070440,3237316320,6314154,819756386,300326615,590932579,1405279636,3267499572,3150704214,2428286686,3959192993,3461946742,1862657033,1266418056,963775037,2089974820,2263052895,1917689273,448879540,3550394620,3981727096,150775221,3627908307,1303187396,508620638,2975983352,2726630617,1817252668,1876281319,1457606340,908771278,3720792119,3617206836,2455994898,1729034894,1080033504],[976866871,3556439503,2881648439,1522871579,1555064734,1336096578,3548522304,2579274686,3574697629,3205460757,3593280638,3338716283,3079412587,564236357,2993598910,1781952180,1464380207,3163844217,3332601554,1699332808,1393555694,1183702653,3581086237,1288719814,691649499,2847557200,2895455976,3193889540,2717570544,1781354906,1676643554,2592534050,3230253752,1126444790,2770207658,2633158820,2210423226,2615765581,2414155088,3127139286,673620729,2805611233,1269405062,4015350505,3341807571,4149409754,1057255273,2012875353,2162469141,2276492801,2601117357,993977747,3918593370,2654263191,753973209,36408145,2530585658,25011837,3520020182,2088578344,530523599,2918365339,1524020338,1518925132,3760827505,3759777254,1202760957,3985898139,3906192525,674977740,4174734889,2031300136,2019492241,3983892565,4153806404,3822280332,352677332,2297720250,60907813,90501309,3286998549,1016092578,2535922412,2839152426,457141659,509813237,4120667899,652014361,1966332200,2975202805,55981186,2327461051,676427537,3255491064,2882294119,3433927263,1307055953,942726286,933058658,2468411793,3933900994,4215176142,1361170020,2001714738,2830558078,3274259782,1222529897,1679025792,2729314320,3714953764,1770335741,151462246,3013232138,1682292957,1483529935,471910574,1539241949,458788160,3436315007,1807016891,3718408830,978976581,1043663428,3165965781,1927990952,4200891579,2372276910,3208408903,3533431907,1412390302,2931980059,4132332400,1947078029,3881505623,4168226417,2941484381,1077988104,1320477388,886195818,18198404,3786409e3,2509781533,112762804,3463356488,1866414978,891333506,18488651,661792760,1628790961,3885187036,3141171499,876946877,2693282273,1372485963,791857591,2686433993,3759982718,3167212022,3472953795,2716379847,445679433,3561995674,3504004811,3574258232,54117162,3331405415,2381918588,3769707343,4154350007,1140177722,4074052095,668550556,3214352940,367459370,261225585,2610173221,4209349473,3468074219,3265815641,314222801,3066103646,3808782860,282218597,3406013506,3773591054,379116347,1285071038,846784868,2669647154,3771962079,3550491691,2305946142,453669953,1268987020,3317592352,3279303384,3744833421,2610507566,3859509063,266596637,3847019092,517658769,3462560207,3443424879,370717030,4247526661,2224018117,4143653529,4112773975,2788324899,2477274417,1456262402,2901442914,1517677493,1846949527,2295493580,3734397586,2176403920,1280348187,1908823572,3871786941,846861322,1172426758,3287448474,3383383037,1655181056,3139813346,901632758,1897031941,2986607138,3066810236,3447102507,1393639104,373351379,950779232,625454576,3124240540,4148612726,2007998917,544563296,2244738638,2330496472,2058025392,1291430526,424198748,50039436,29584100,3605783033,2429876329,2791104160,1057563949,3255363231,3075367218,3463963227,1469046755,985887462]];var c={pbox:[],sbox:[]};function h(T,E){let w=E>>24&255,D=E>>16&255,R=E>>8&255,A=E&255,L=T.sbox[0][w]+T.sbox[1][D];return L=L^T.sbox[2][R],L=L+T.sbox[3][A],L}function m(T,E,w){let D=E,R=w,A;for(let L=0;L<o;++L)D=D^T.pbox[L],R=h(T,D)^R,A=D,D=R,R=A;return A=D,D=R,R=A,R=R^T.pbox[o],D=D^T.pbox[o+1],{left:D,right:R}}function g(T,E,w){let D=E,R=w,A;for(let L=o+1;L>1;--L)D=D^T.pbox[L],R=h(T,D)^R,A=D,D=R,R=A;return A=D,D=R,R=A,R=R^T.pbox[1],D=D^T.pbox[0],{left:D,right:R}}function y(T,E,w){for(let F=0;F<4;F++){T.sbox[F]=[];for(let B=0;B<256;B++)T.sbox[F][B]=u[F][B]}let D=0;for(let F=0;F<o+2;F++)T.pbox[F]=l[F]^E[D],D++,D>=w&&(D=0);let R=0,A=0,L=0;for(let F=0;F<o+2;F+=2)L=m(T,R,A),R=L.left,A=L.right,T.pbox[F]=R,T.pbox[F+1]=A;for(let F=0;F<4;F++)for(let B=0;B<256;B+=2)L=m(T,R,A),R=L.left,A=L.right,T.sbox[F][B]=R,T.sbox[F][B+1]=A;return!0}var _=a.Blowfish=s.extend({_doReset:function(){if(this._keyPriorReset!==this._key){var T=this._keyPriorReset=this._key,E=T.words,w=T.sigBytes/4;y(c,E,w)}},encryptBlock:function(T,E){var w=m(c,T[E],T[E+1]);T[E]=w.left,T[E+1]=w.right},decryptBlock:function(T,E){var w=g(c,T[E],T[E+1]);T[E]=w.left,T[E+1]=w.right},blockSize:64/32,keySize:128/32,ivSize:64/32});r.Blowfish=s._createHelper(_)})(),t.Blowfish})})(Sy)),Sy.exports}var yH=zv.exports,AD;function _H(){return AD||(AD=1,(function(i,e){(function(t,r,n){i.exports=r(ei(),yx(),mz(),vz(),Ah(),xz(),Ih(),d3(),NE(),Ez(),h3(),Az(),Dz(),Rz(),UE(),Mz(),vd(),Qn(),Uz(),jz(),Hz(),qz(),Gz(),Xz(),Qz(),Zz(),tH(),iH(),sH(),oH(),uH(),dH(),fH(),mH(),vH())})(yH,function(t){return t})})(zv)),zv.exports}var xH=_H();const TH=ia(xH),bH="https://github.com/zhimin-dev/iptv-checker",SH="4.1.9",Cy={homepage_url:bH,version:SH},yu=j.createContext(),CH="https://static.zmis.me/public/iptv-checker/init.json",EH=function({children:i}){const[t,r]=j.useState(""),[n,s]=j.useState([]),[a,o]=j.useState(""),[l,u]=j.useState([]),[c,h]=j.useState(!1),[m,g]=j.useState(0),[y,_]=j.useState(""),[T,E]=j.useState(!0),[w,D]=j.useState([]),[R,A]=j.useState(!1),[L,F]=j.useState(0),[B,M]=j.useState({version:"",sponsor:[]}),[k,q]=j.useState(""),[G,H]=j.useState(null),[re,se]=j.useState({groups:[""],videoRevolution:[]}),[de,me]=j.useState(null),[ue,oe]=j.useState([]),[ce,te]=j.useState([]),fe=[{name:"mac",value:"application/x-mpegURL"},{name:"windows",value:"video/mp2t"}],ye=[{code:"zh",name:""},{code:"en",name:"English"}],[Se,ke]=j.useState({checkSleepTime:300,httpRequestTimeout:8e3,customLink:[],concurrent:1,language:"zh",privateHost:"",playerSource:"application/x-mpegURL"}),qe=(...we)=>{console.log(...we)},vt=we=>{ms.changeLanguage(we)},et=()=>{const we=new Date,Fe=we.getFullYear(),Ge=we.getMonth()+1,Ye=we.getDate(),ot=we.getHours();return`${Fe}${Ge}${Ye}${ot}`},kt=()=>{Wr.get(CH+"?date="+et()).then(we=>{if(we.status===200)try{M(we.data)}catch(Fe){console.log(Fe)}})},pt=()=>{},Ut=()=>{let we=B.version;m===1&&(we=B.app_version),Vt(we,Cy.version)>0?A(!0):A(!1)},Vt=(we,Fe)=>{const Ge=we.split(".").map(Number),Ye=Fe.split(".").map(Number),ot=Math.max(Ge.length,Ye.length);for(let Tt=0;Tt<ot;Tt++){const Dt=Ge[Tt]||0,mr=Ye[Tt]||0;if(Dt>mr)return 1;if(Dt<mr)return-1}return 0},Xe=()=>{Ct("check_ffmpeg").then(we=>{we&&(F(1),console.log("FFmpeg is installed"))}).catch(we=>{console.log("invoke error",we)})},Ue=(we,Fe)=>{document.getElementById("titlebar-minimize")?.addEventListener("click",()=>we.minimize()),document.getElementById("titlebar-maximize")?.addEventListener("click",()=>{we.isFullscreen().then(Ge=>{console.log("isfull",Ge),Ge?we.setSize(new ME(1024,800)).then(()=>{}):(we.setTitleBarStyle("transparent"),we.setFullscreen(!0),we.center(),E(!1))})}),document.getElementById("titlebar-close")?.addEventListener("click",()=>we.close())},Le=()=>{const we=Jy();Ue(we)},Ne=async(we,Fe)=>{let Ye=await sz()+"/iptv-checker-file-"+new Date().getTime()+"."+Fe,ot="";Fe==="txt"?ot=_t(we):ot=st(we);const Tt=await oz({defaultPath:Ye,filters:[{name:Ye,extensions:[Fe]}]});console.log("filePath---",Tt),Tt&&await az(Tt,ot)},rt=async(we,Fe)=>{var Ge=document.createElement("a");let Ye="";Fe==="txt"?Ye=_t(we):Ye=st(we);var ot=new Blob([Ye]),Tt=window.URL.createObjectURL(ot);Ge.href=Tt,Ge.download="iptv-checker-"+new Date().getTime()+"."+Fe,Ge.click()},lt=we=>TH.MD5(we).toString();j.useEffect(()=>{Xe(),kt(),wr(),vn(),Ct("now_mod",{}).then(Fe=>{g(Fe),Le(),console.log("now mod",Fe);let Ge=lz();Ge!==""&&(console.log("now os type",Ge),_(Ge))}).catch(Fe=>{console.log("invoke---",Fe)});let we=localStorage.getItem("settings")??"";if(we!=="")try{let Fe=JSON.parse(we);vt(Fe.language),ke(Fe)}catch(Fe){console.log(Fe)}},[]);const dt=we=>{h(we)},ut=async we=>{let Fe=we.split(","),Ge=[];for(let Ye=0;Ye<Fe.length;Ye++)if(it(Fe[Ye])&&Fe[Ye].includes(".m3u8")){let ot="channel "+Ye,Tt='#EXTINF:-1 tvg-id="" tvg-logo="" group-title="Undefined",'+ot+`
`+Fe[Ye],Dt='#EXTINF:-1 tvg-id="" tvg-logo="" group-title="Undefined",'+ot+`
`+Fe[Ye],mr=Zr.buildM3uBaseObject(Ye,Fe[Ye],"Undefined","","","","",ot,Tt,Dt);Ge.push(mr)}return Ge.length===0?[]:At(Ge)},At=we=>{let Fe=[];for(let Ge=0;Ge<we.length;Ge++)Fe.push(we[Ge].raw);return Fe},it=we=>new RegExp("^(https?:\\/\\/)?((([a-z\\d]([a-z\\d-]*[a-z\\d])*)\\.)+[a-z]{2,}|((\\d{1,3}\\.){3}\\d{1,3}))(\\:\\d+)?(\\/[-a-z\\d%_.~+]*)*(\\?[;&a-z\\d%_.~+=-]*)?(\\#[-a-z\\d_]*)?$","i").test(we),Sr=async we=>{let Fe=we.split(","),Ge=[];for(let Dt=0;Dt<Fe.length;Dt++)it(Fe[Dt])&&Fe[Dt].includes(".m3u")&&Ge.push(Fe[Dt]);let Ye=[];for(let Dt=0;Dt<Ge.length;Dt++){let mr=Pe(Ge[Dt]);Ye.push(Wr.get(mr,{timeout:Se.httpRequestTimeout}))}const ot=await Promise.allSettled(Ye);let Tt=[];return ot.forEach((Dt,mr)=>{if(Dt.status==="fulfilled"){const Mr=Dt.value.data;try{let ci=Zr.parseOriginalBodyToList(Mr);for(let yr=0;yr<ci.length;yr++)Tt.push(ci[yr])}catch(ci){console.log("err",ci)}}}),At(Tt)},xr=async we=>{try{let Fe=Zr.parseQuoteFormat(we);return At(Fe)}catch{return[]}},zr=we=>{try{return Zr.parseOriginalBodyToList(we)}catch{return[]}},cr=async we=>{let Fe=[ut,Sr,xr],Ge=[],Ye=!1;for(const ot of Fe)if(!Ye){let Tt=await ot(we);Tt.length>0&&(Ye=!0,Ge=Tt)}return Ge.length>0?`#EXTM3U
`+Ge.join(`
`):we},Gt=we=>{localStorage.setItem("settings",JSON.stringify(we)),ke(we)},Er=we=>{u(we)},Ir=()=>{o(""),oe([]),r("")},Hr=(we,Fe)=>we.indexOf(Fe)!==-1,It=we=>{let Fe=[];for(let Ye=0;Ye<ue.length;Ye++){let ot=!0;for(let Tt=0;Tt<we.length;Tt++)we[Tt]===ue[Ye].index&&(ot=!1);ot&&Fe.push(ue[Ye])}oe(Ye=>Ye.filter(function(ot,Tt){for(let Dt=0;Dt<we.length;Dt++)if(we[Dt]===ot.index)return!1;return!0})),console.log("detailList---",Fe,ue);let Ge=$t(k);Ge!==null&&(Ge.data=Fe,console.log("updateOriginalData data---",Ge),Bi(Ge))},$t=we=>{for(let Fe=0;Fe<ce.length;Fe++)if(ce[Fe].md5===we)return ce[Fe];return null},Bi=we=>{let Fe=[];for(let Ge=0;Ge<ce.length;Ge++){let Ye=ce[Ge];ce[Ge].md5===k&&(Ye=we),Fe.push(Ye)}ui(Fe)},zt=(we,Fe)=>{for(let Ge=0;Ge<we.length;Ge++)if(we[Ge]===Fe)return!0;return!1},Dr=(we,Fe,Ge)=>{if(console.log("filterM3u",we,Fe,Ge),we.length===0&&Fe.length===0&&Ge.length===0)return;let Ye=Ce();console.log("temp",Ye);let ot=[],Tt=1;for(let Dt=0;Dt<Ye.length;Dt++){let mr=!0;if(Ge.length>0&&Ye[Dt].videoType!==""){mr=!1;for(let yr=0;yr<Ge.length;yr++)Ye[Dt].videoType===Ge[yr]&&(mr=!0)}let Mr=!0;if(we.length>0){Mr=!1;for(let yr=0;yr<we.length;yr++)Hr(Ye[Dt].sName,we[yr].toLowerCase())&&(Mr=!0)}let ci=!0;if(Fe.length>0&&(ci=!1,zt(Fe,Ye[Dt].groupTitle)&&(ci=!0)),ci&&mr&&Mr){let yr=Ye[Dt];yr.index=Tt,ot.push(yr),Tt++}}qe("setShowM3uBody---",ot),oe(ot)},$r=we=>{let Fe=Zr.parseOriginalBodyToList(we),Ge=[];Ge.push(["","","",""]);for(let Ye=0;Ye<Fe.length;Ye++)Ge.push([Fe[Ye].name,Fe[Ye].url,Fe[Ye].groupTitle,Fe[Ye].tvgLogo]);return Ge},Jr=we=>{Ir(),r(we);let Fe=Zr.parseOriginalBodyToList(we);oe(Fe)},Ni=we=>{let Fe=!1;for(let Ge=0;Ge<re.groups.length;Ge++)re.groups[Ge]===we&&(Fe=!0);if(!Fe){let Ge=Ui(re.groups);Ge.push(we),se({...re,groups:Ge})}},sn=we=>{let Fe=[],Ge="",Ye=1;for(let ot=0;ot<we.length;ot++){Ge+=we[ot]+`
`;let Tt=Zr.parseOriginalBodyToList(we[ot]);for(let Dt=0;Dt<Tt.length;Dt++)Tt[Dt].index=Ye,Fe.push(Tt[Dt]),Ye++}Ir(),oe(Fe),r(Ge)},Ui=we=>JSON.parse(JSON.stringify(we)),Wi=(we,Fe,Ge,Ye,ot,Tt)=>{console.log("data",we);for(let Dt=0;Dt<we.length;Dt++)if(we[Dt].index===Fe){let mr="";Ye!==null&&(mr=Zr.getVideoResolution(Ye.width,Ye.height));let Mr={...we[Dt],status:Ge,video:Ye,audio:ot,videoType:mr,delay:Tt};we[Dt]=Mr}return we},ne=()=>{let we=[];for(let Fe=0;Fe<ue.length;Fe+=1)ue[Fe].checked&&we.push(ue[Fe]);s(we)},he=()=>{let we=Ce();o(st(we))},Ce=()=>{let we=null;for(let Fe=0;Fe<ce.length;Fe++)ce[Fe].md5===k&&(we=ce[Fe].data);return we},ze=we=>{let Fe=[...ue];const Ge=Fe.findIndex(Ye=>Ye.index===we);Fe[Ge].checked=!Fe[Ge].checked,oe(Fe)},yt=(we,Fe)=>{const Ye=[...we].findIndex(ot=>ot.index===Fe);return we[Ye]},ir=we=>{oe(we===1?Fe=>Fe.map((Ge,Ye)=>({...Ge,checked:!0})):Fe=>Fe.map((Ge,Ye)=>({...Ge,checked:!1})))},xe=(we,Fe)=>{if(m===1)return we;let Ge=parseInt(Fe,10);return"/check/url-is-available?url="+we+"&timeout="+(isNaN(Ge)?"-1":Ge)},Pe=(we,Fe)=>{if(m===1)return we;let Ge=parseInt(Fe,10);return qe(we,Ge),"/fetch/m3u-body?url="+we+"&timeout="+(isNaN(Ge)?"-1":Ge)},Be=(we,Fe)=>{const Ge=[];for(let Ye=0;Ye<we.length;Ye+=Fe)Ge.push(we.slice(Ye,Ye+Fe));return Ge},nt=async(we,Fe,Ge)=>{let Ye={},ot={},Tt=Be(we,Fe.concurrent);if(m===1){console.log("start check");for(let Dt=0;Dt<Tt.length;Dt++){let mr=[],Mr=[];for(let yr=0;yr<Tt[Dt].length;yr++){let on=Tt[Dt][yr];if(yt(Ui(we),on.index).status!==0){qe("do check status != 0");continue}mr.push(Tt[Dt][yr]),Mr.push(Wr.get(Tt[Dt][yr].url,{timeout:Fe.httpRequestTimeout}))}if(Mr.length===0)continue;(await Promise.allSettled(Mr)).forEach((yr,on)=>{let Rr=mr[on];if(yr.status==="fulfilled"){yr.value;let Ci=-1;Ye[Rr.url]={video:null,audio:null,videoType:null,status:1,delay:Ci},ot[Rr.sName]===void 0||ot[Rr.sName]===null?ot[Rr.sName]={index:Rr.index,delay:Ci}:ot[Rr.sName].delay>=Ci&&(ot[Rr.sName]={index:Rr.index,delay:Ci}),we=Wi(we,Rr.index,1,null,null,Ci),Ge(200,Rr.index)}else Ye[Rr.url]={status:2},we=Wi(we,Rr.index,2,null,null,0),Ge(500,Rr.index)})}console.log("end check")}else{console.log("start server check");for(let Dt=0;Dt<Tt.length;Dt++){console.log("----now",Tt[Dt]);let mr=[],Mr=[];for(let yr=0;yr<Tt[Dt].length;yr++){let on=Tt[Dt][yr];if(yt(we,on.index).status!==0){qe("do check status != 0");continue}mr.push(Tt[Dt][yr]);let Ci=xe(Tt[Dt][yr].url,Fe.httpRequestTimeout);Mr.push(Wr.get(Ci,{timeout:Fe.httpRequestTimeout}))}if(Mr.length===0)continue;(await Promise.allSettled(Mr)).forEach((yr,on)=>{let Rr=mr[on];if(yr.status==="fulfilled"){const Ci=yr.value;console.log("resp",Ci);let Pi=Ci.data.delay;Ye[Rr.url]={video:Ci.data.video,audio:Ci.data.audio,videoType:Zr.getVideoResolution(Ci.data.video.width,Ci.data.video.height),status:1,delay:Ci.data.delay},ot[Rr.sName]===void 0||ot[Rr.sName]===null?ot[Rr.sName]={index:Rr.index,delay:Pi}:ot[Rr.sName].delay>=Pi&&(ot[Rr.sName]={index:Rr.index,delay:Pi}),we=Wi(we,Rr.index,1,Ci.data.video,Ci.data.audio,Ci.data.delay),Ge(200,Rr.index)}else Ye[Rr.url]={status:2},we=Wi(we,Rr.index,2,null,null,0),Ge(500,Rr.index)})}}return we},ct=async(we,Fe,Ge,Ye)=>{let ot=Ui(we);return Ge(ot.length),await nt(ot,Fe,Ye)},Rt=we=>{oe(we)},Ot=()=>{o(sr(ue))},st=we=>sr(we),_t=we=>{let Fe=[];for(let Ge=0;Ge<we.length;Ge++)Fe.push(we[Ge].name+","+we[Ge].url);return Fe.join(`
`)},jt=(we,Fe)=>{Pt(we,{groupTitle:Fe})},Kt=we=>{Ni(we)},Pt=(we,Fe)=>{let Ge=Ui(ue);Fe.groupTitle!==void 0&&Fe.groupTitle!==null&&Ni(Fe.groupTitle);for(let ot=0;ot<Ge.length;ot++)if(zt(we,Ge[ot].index))for(let Tt in Fe)Tt==="name"&&(Ge[ot].sName=Fe[Tt]),Ge[ot][Tt]=Fe[Tt];let Ye=ue;for(let ot=0;ot<Ye.length;ot++)if(zt(we,Ye[ot].index))for(let Tt in Fe)Tt==="name"&&(Ye[ot].sName=Fe[Tt].toLowerCase()),Ye[ot][Tt]=Fe[Tt];oe(Ge)},sr=we=>{let Fe=`#EXTM3U
`;for(let Ge=0;Ge<we.length;Ge+=1)Fe+=`#EXTINF:-1 tvg-name="${we[Ge].tvgName}" tvg-id="${we[Ge].tvgId}" tvg-logo="${we[Ge].tvgLogo}" group-title="${we[Ge].groupTitle}",${we[Ge].name}
${we[Ge].url}
`;return Fe},mt=we=>{let Fe=lt(JSON.stringify(we)),Ge={urls:we,md5:Fe},Ye=Ui(w),ot=!1;for(let Tt=0;Tt<Ye.length;Tt++)Ye[Tt].md5===Fe&&(ot=!0);ot||(Ye.length>=5&&Ye.splice(0,1),Ye.push(Ge),Pr(Ye))},dr="checkHistory",Vr="subCheckMenuList",wr=()=>{let we=localStorage.getItem(dr);try{let Fe=JSON.parse(we)??[];D(Fe)}catch{console.log("read checkHistory from local error")}},Pr=we=>{D(we),localStorage.setItem(dr,JSON.stringify(we))},Ti=(we,Fe)=>{const Ge=/(\D+)(\d+)/;if(we===null||Fe===null)return-1;console.log("----a",we),console.log("----b",Fe);let Ye="",ot="",Tt=-1,Dt=-1,mr=we.sName.match(Ge);mr&&mr.length>=3&&(Ye=mr[1],ot=mr[2]);let Mr=Fe.sName.match(Ge);return Mr&&Mr.length>=3&&(Tt=Mr[1],Dt=Mr[2]),Ye<Tt?-1:Ye>Tt?1:parseInt(ot)-parseInt(Dt)},Qt=(we,Fe,Ge,Ye,ot)=>{ot&&(console.log("addDetail----sort----",we),we.sort(Ti));let Tt=Ui(ce);console.log("dataList--",Tt);let Dt=lt(JSON.stringify(Fe)),mr=!1;for(let Mr=0;Mr<Tt.length;Mr++)Tt[Mr].md5===Dt&&(mr=!0);return mr||(Tt.push({md5:Dt,data:we,original:{urls:Fe,local:Ge,ffmpeg:0,sort:ot,check:Ye},menu:{groups:gs(we)},query:{needFast:!1,searchName:[],group:""}}),ui(Tt)),Dt},vn=()=>{let we=localStorage.getItem(Vr);try{let Fe=JSON.parse(we)??[];te(Fe)}catch{console.log("read checkHistory from local error")}},ui=we=>{te(we),localStorage.setItem(Vr,JSON.stringify(we))},gs=we=>{let Fe={};for(let Ye=0;Ye<we.length;Ye++)we[Ye].groupTitle!==""&&(Fe[we[Ye].groupTitle]=we[Ye].groupTitle);let Ge=[];for(let Ye in Fe)Ge.push(Fe[Ye]);return Ge},Xr=async we=>{let Fe=[];for(let Ye=0;Ye<we.length;Ye++){let ot=Pe(we[Ye].url);Fe.push(Wr.get(ot,{timeout:Se.httpRequestTimeout}))}return(await Promise.allSettled(Fe)).forEach((Ye,ot)=>{let Tt=!0,Dt="";if(Ye.status==="fulfilled"){const mr=Ye.value.data;vs(mr)?(Tt=!1,Dt=mr):(Tt=!0,Dt=mr)}else Tt=!0,Dt=Ye.reason.message;Tt?we[ot].status=500:we[ot].status=200,we[ot].body=Dt}),we},vs=we=>we.substr(0,7)==="#EXTM3U",an=we=>{let Fe=[];for(let Ge=0;Ge<ce.length;Ge++)ce[Ge].md5!==we&&Fe.push(ce[Ge]);ui(Fe),Cr()},Ji=we=>{q(we);let Fe=$t(we);Fe&&(oe(Fe.data),H(Fe.query),se(Fe.menu),me(Fe))},Cr=()=>{q(""),oe([]),H(null),se(null),me([])};return V.jsx(yu.Provider,{value:{originalM3uBody:t,changeOriginalM3uBody:Jr,exportDataStr:a,setExportDataStr:o,exportData:n,onChangeExportData:Rt,videoResolution:l,changeVideoResolution:Er,settings:Se,onChangeSettings:Gt,headerHeight:145,filterM3u:Dr,deleteShowM3uRow:It,onExportValidM3uData:ne,onSelectedRow:ze,onSelectedOrNotAll:ir,changeDialogBodyData:he,changeOriginalM3uBodies:sn,updateDataByIndex:Pt,onChangeExportStr:Ot,batchChangeGroupName:jt,addGroupName:Kt,getCheckUrl:xe,strToCsv:$r,clearDetailData:Ir,getM3uBody:Pe,needFastSource:c,onChangeNeedFastSource:dt,nowMod:m,getBodyType:cr,changeLanguage:vt,languageList:ye,clientSaveFile:Ne,nowPlatform:y,videoPlayTypes:fe,initControlBar:Ue,showWindowsTopBar:T,doFastCheck:ct,subCheckMenuList:ce,checkHistory:w,saveDataToHistory:mt,addDetail:Qt,get_m3u_body:Xr,get_m3u8_info_by_m3u_ori_data:zr,m3uObjectToM3uBody:st,m3uObjectToTxtBody:_t,webSaveFile:rt,detailList:ue,detailQuery:G,detailMenu:re,ffmepgCheck:L,detailOriginal:de,updateDetailMd5:Ji,delDetailData:an,detailMd5:k,configInfo:B,showNewVersion:R,check_version:Ut,saveFile:pt},children:i})};var vm={},ID;function wH(){if(ID)return vm;ID=1,Object.defineProperty(vm,"__esModule",{value:!0}),vm.parse=a,vm.serialize=u;const i=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,e=/^[\u0021-\u003A\u003C-\u007E]*$/,t=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,r=/^[\u0020-\u003A\u003D-\u007E]*$/,n=Object.prototype.toString,s=(()=>{const m=function(){};return m.prototype=Object.create(null),m})();function a(m,g){const y=new s,_=m.length;if(_<2)return y;const T=g?.decode||c;let E=0;do{const w=m.indexOf("=",E);if(w===-1)break;const D=m.indexOf(";",E),R=D===-1?_:D;if(w>R){E=m.lastIndexOf(";",w-1)+1;continue}const A=o(m,E,w),L=l(m,w,A),F=m.slice(A,L);if(y[F]===void 0){let B=o(m,w+1,R),M=l(m,R,B);const k=T(m.slice(B,M));y[F]=k}E=R+1}while(E<_);return y}function o(m,g,y){do{const _=m.charCodeAt(g);if(_!==32&&_!==9)return g}while(++g<y);return y}function l(m,g,y){for(;g>y;){const _=m.charCodeAt(--g);if(_!==32&&_!==9)return g+1}return y}function u(m,g,y){const _=y?.encode||encodeURIComponent;if(!i.test(m))throw new TypeError(`argument name is invalid: ${m}`);const T=_(g);if(!e.test(T))throw new TypeError(`argument val is invalid: ${g}`);let E=m+"="+T;if(!y)return E;if(y.maxAge!==void 0){if(!Number.isInteger(y.maxAge))throw new TypeError(`option maxAge is invalid: ${y.maxAge}`);E+="; Max-Age="+y.maxAge}if(y.domain){if(!t.test(y.domain))throw new TypeError(`option domain is invalid: ${y.domain}`);E+="; Domain="+y.domain}if(y.path){if(!r.test(y.path))throw new TypeError(`option path is invalid: ${y.path}`);E+="; Path="+y.path}if(y.expires){if(!h(y.expires)||!Number.isFinite(y.expires.valueOf()))throw new TypeError(`option expires is invalid: ${y.expires}`);E+="; Expires="+y.expires.toUTCString()}if(y.httpOnly&&(E+="; HttpOnly"),y.secure&&(E+="; Secure"),y.partitioned&&(E+="; Partitioned"),y.priority)switch(typeof y.priority=="string"?y.priority.toLowerCase():void 0){case"low":E+="; Priority=Low";break;case"medium":E+="; Priority=Medium";break;case"high":E+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${y.priority}`)}if(y.sameSite)switch(typeof y.sameSite=="string"?y.sameSite.toLowerCase():y.sameSite){case!0:case"strict":E+="; SameSite=Strict";break;case"lax":E+="; SameSite=Lax";break;case"none":E+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${y.sameSite}`)}return E}function c(m){if(m.indexOf("%")===-1)return m;try{return decodeURIComponent(m)}catch{return m}}function h(m){return n.call(m)==="[object Date]"}return vm}wH();/**
 * react-router v7.6.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var f3=i=>{throw TypeError(i)},kH=(i,e,t)=>e.has(i)||f3("Cannot "+t),Yb=(i,e,t)=>(kH(i,e,"read from private field"),t?t.call(i):e.get(i)),AH=(i,e,t)=>e.has(i)?f3("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(i):e.set(i,t),DD="popstate";function IH(i={}){function e(n,s){let{pathname:a="/",search:o="",hash:l=""}=uc(n.location.hash.substring(1));return!a.startsWith("/")&&!a.startsWith(".")&&(a="/"+a),y0("",{pathname:a,search:o,hash:l},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function t(n,s){let a=n.document.querySelector("base"),o="";if(a&&a.getAttribute("href")){let l=n.location.href,u=l.indexOf("#");o=u===-1?l:l.slice(0,u)}return o+"#"+(typeof s=="string"?s:od(s))}function r(n,s){pn(n.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(s)})`)}return PH(e,t,r,i)}function Kr(i,e){if(i===!1||i===null||typeof i>"u")throw new Error(e)}function pn(i,e){if(!i){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function DH(){return Math.random().toString(36).substring(2,10)}function PD(i,e){return{usr:i.state,key:i.key,idx:e}}function y0(i,e,t=null,r){return{pathname:typeof i=="string"?i:i.pathname,search:"",hash:"",...typeof e=="string"?uc(e):e,state:t,key:e&&e.key||r||DH()}}function od({pathname:i="/",search:e="",hash:t=""}){return e&&e!=="?"&&(i+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(i+=t.charAt(0)==="#"?t:"#"+t),i}function uc(i){let e={};if(i){let t=i.indexOf("#");t>=0&&(e.hash=i.substring(t),i=i.substring(0,t));let r=i.indexOf("?");r>=0&&(e.search=i.substring(r),i=i.substring(0,r)),i&&(e.pathname=i)}return e}function PH(i,e,t,r={}){let{window:n=document.defaultView,v5Compat:s=!1}=r,a=n.history,o="POP",l=null,u=c();u==null&&(u=0,a.replaceState({...a.state,idx:u},""));function c(){return(a.state||{idx:null}).idx}function h(){o="POP";let T=c(),E=T==null?null:T-u;u=T,l&&l({action:o,location:_.location,delta:E})}function m(T,E){o="PUSH";let w=y0(_.location,T,E);t&&t(w,T),u=c()+1;let D=PD(w,u),R=_.createHref(w);try{a.pushState(D,"",R)}catch(A){if(A instanceof DOMException&&A.name==="DataCloneError")throw A;n.location.assign(R)}s&&l&&l({action:o,location:_.location,delta:1})}function g(T,E){o="REPLACE";let w=y0(_.location,T,E);t&&t(w,T),u=c();let D=PD(w,u),R=_.createHref(w);a.replaceState(D,"",R),s&&l&&l({action:o,location:_.location,delta:0})}function y(T){return p3(T)}let _={get action(){return o},get location(){return i(n,a)},listen(T){if(l)throw new Error("A history only accepts one active listener");return n.addEventListener(DD,h),l=T,()=>{n.removeEventListener(DD,h),l=null}},createHref(T){return e(n,T)},createURL:y,encodeLocation(T){let E=y(T);return{pathname:E.pathname,search:E.search,hash:E.hash}},push:m,replace:g,go(T){return a.go(T)}};return _}function p3(i,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),Kr(t,"No window.location.(origin|href) available to create URL");let r=typeof i=="string"?i:od(i);return r=r.replace(/ $/,"%20"),!e&&r.startsWith("//")&&(r=t+r),new URL(r,t)}var Um,RD=class{constructor(i){if(AH(this,Um,new Map),i)for(let[e,t]of i)this.set(e,t)}get(i){if(Yb(this,Um).has(i))return Yb(this,Um).get(i);if(i.defaultValue!==void 0)return i.defaultValue;throw new Error("No value found for context")}set(i,e){Yb(this,Um).set(i,e)}};Um=new WeakMap;var RH=new Set(["lazy","caseSensitive","path","id","index","children"]);function LH(i){return RH.has(i)}var OH=new Set(["lazy","caseSensitive","path","id","index","unstable_middleware","children"]);function MH(i){return OH.has(i)}function FH(i){return i.index===!0}function Zy(i,e,t=[],r={}){return i.map((n,s)=>{let a=[...t,String(s)],o=typeof n.id=="string"?n.id:a.join("-");if(Kr(n.index!==!0||!n.children,"Cannot specify children on an index route"),Kr(!r[o],`Found a route id collision on id "${o}".  Route id's must be globally unique within Data Router usages`),FH(n)){let l={...n,...e(n),id:o};return r[o]=l,l}else{let l={...n,...e(n),id:o,children:void 0};return r[o]=l,n.children&&(l.children=Zy(n.children,e,a,r)),l}})}function ed(i,e,t="/"){return Ey(i,e,t,!1)}function Ey(i,e,t,r){let n=typeof e=="string"?uc(e):e,s=Oo(n.pathname||"/",t);if(s==null)return null;let a=m3(i);NH(a);let o=null;for(let l=0;o==null&&l<a.length;++l){let u=XH(s);o=GH(a[l],u,r)}return o}function BH(i,e){let{route:t,pathname:r,params:n}=i;return{id:t.id,pathname:r,params:n,data:e[t.id],handle:t.handle}}function m3(i,e=[],t=[],r=""){let n=(s,a,o)=>{let l={relativePath:o===void 0?s.path||"":o,caseSensitive:s.caseSensitive===!0,childrenIndex:a,route:s};l.relativePath.startsWith("/")&&(Kr(l.relativePath.startsWith(r),`Absolute route path "${l.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),l.relativePath=l.relativePath.slice(r.length));let u=au([r,l.relativePath]),c=t.concat(l);s.children&&s.children.length>0&&(Kr(s.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${u}".`),m3(s.children,e,c,u)),!(s.path==null&&!s.index)&&e.push({path:u,score:qH(u,s.index),routesMeta:c})};return i.forEach((s,a)=>{if(s.path===""||!s.path?.includes("?"))n(s,a);else for(let o of g3(s.path))n(s,a,o)}),e}function g3(i){let e=i.split("/");if(e.length===0)return[];let[t,...r]=e,n=t.endsWith("?"),s=t.replace(/\?$/,"");if(r.length===0)return n?[s,""]:[s];let a=g3(r.join("/")),o=[];return o.push(...a.map(l=>l===""?s:[s,l].join("/"))),n&&o.push(...a),o.map(l=>i.startsWith("/")&&l===""?"/":l)}function NH(i){i.sort((e,t)=>e.score!==t.score?t.score-e.score:WH(e.routesMeta.map(r=>r.childrenIndex),t.routesMeta.map(r=>r.childrenIndex)))}var UH=/^:[\w-]+$/,$H=3,jH=2,zH=1,HH=10,VH=-2,LD=i=>i==="*";function qH(i,e){let t=i.split("/"),r=t.length;return t.some(LD)&&(r+=VH),e&&(r+=jH),t.filter(n=>!LD(n)).reduce((n,s)=>n+(UH.test(s)?$H:s===""?zH:HH),r)}function WH(i,e){return i.length===e.length&&i.slice(0,-1).every((r,n)=>r===e[n])?i[i.length-1]-e[e.length-1]:0}function GH(i,e,t=!1){let{routesMeta:r}=i,n={},s="/",a=[];for(let o=0;o<r.length;++o){let l=r[o],u=o===r.length-1,c=s==="/"?e:e.slice(s.length)||"/",h=e_({path:l.relativePath,caseSensitive:l.caseSensitive,end:u},c),m=l.route;if(!h&&u&&t&&!r[r.length-1].route.index&&(h=e_({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},c)),!h)return null;Object.assign(n,h.params),a.push({params:n,pathname:au([s,h.pathname]),pathnameBase:JH(au([s,h.pathnameBase])),route:m}),h.pathnameBase!=="/"&&(s=au([s,h.pathnameBase]))}return a}function e_(i,e){typeof i=="string"&&(i={path:i,caseSensitive:!1,end:!0});let[t,r]=KH(i.path,i.caseSensitive,i.end),n=e.match(t);if(!n)return null;let s=n[0],a=s.replace(/(.)\/+$/,"$1"),o=n.slice(1);return{params:r.reduce((u,{paramName:c,isOptional:h},m)=>{if(c==="*"){let y=o[m]||"";a=s.slice(0,s.length-y.length).replace(/(.)\/+$/,"$1")}const g=o[m];return h&&!g?u[c]=void 0:u[c]=(g||"").replace(/%2F/g,"/"),u},{}),pathname:s,pathnameBase:a,pattern:i}}function KH(i,e=!1,t=!0){pn(i==="*"||!i.endsWith("*")||i.endsWith("/*"),`Route path "${i}" will be treated as if it were "${i.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${i.replace(/\*$/,"/*")}".`);let r=[],n="^"+i.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,o,l)=>(r.push({paramName:o,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return i.endsWith("*")?(r.push({paramName:"*"}),n+=i==="*"||i==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?n+="\\/*$":i!==""&&i!=="/"&&(n+="(?:(?=\\/|$))"),[new RegExp(n,e?void 0:"i"),r]}function XH(i){try{return i.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return pn(!1,`The URL path "${i}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),i}}function Oo(i,e){if(e==="/")return i;if(!i.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,r=i.charAt(t);return r&&r!=="/"?null:i.slice(t)||"/"}function YH(i,e="/"){let{pathname:t,search:r="",hash:n=""}=typeof i=="string"?uc(i):i;return{pathname:t?t.startsWith("/")?t:QH(t,e):e,search:ZH(r),hash:eV(n)}}function QH(i,e){let t=e.replace(/\/+$/,"").split("/");return i.split("/").forEach(n=>{n===".."?t.length>1&&t.pop():n!=="."&&t.push(n)}),t.length>1?t.join("/"):"/"}function Qb(i,e,t,r){return`Cannot include a '${i}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function v3(i){return i.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function $E(i){let e=v3(i);return e.map((t,r)=>r===e.length-1?t.pathname:t.pathnameBase)}function jE(i,e,t,r=!1){let n;typeof i=="string"?n=uc(i):(n={...i},Kr(!n.pathname||!n.pathname.includes("?"),Qb("?","pathname","search",n)),Kr(!n.pathname||!n.pathname.includes("#"),Qb("#","pathname","hash",n)),Kr(!n.search||!n.search.includes("#"),Qb("#","search","hash",n)));let s=i===""||n.pathname==="",a=s?"/":n.pathname,o;if(a==null)o=t;else{let h=e.length-1;if(!r&&a.startsWith("..")){let m=a.split("/");for(;m[0]==="..";)m.shift(),h-=1;n.pathname=m.join("/")}o=h>=0?e[h]:"/"}let l=YH(n,o),u=a&&a!=="/"&&a.endsWith("/"),c=(s||a===".")&&t.endsWith("/");return!l.pathname.endsWith("/")&&(u||c)&&(l.pathname+="/"),l}var au=i=>i.join("/").replace(/\/\/+/g,"/"),JH=i=>i.replace(/\/+$/,"").replace(/^\/*/,"/"),ZH=i=>!i||i==="?"?"":i.startsWith("?")?i:"?"+i,eV=i=>!i||i==="#"?"":i.startsWith("#")?i:"#"+i,t_=class{constructor(i,e,t,r=!1){this.status=i,this.statusText=e||"",this.internal=r,t instanceof Error?(this.data=t.toString(),this.error=t):this.data=t}};function _0(i){return i!=null&&typeof i.status=="number"&&typeof i.statusText=="string"&&typeof i.internal=="boolean"&&"data"in i}var y3=["POST","PUT","PATCH","DELETE"],tV=new Set(y3),rV=["GET",...y3],iV=new Set(rV),nV=new Set([301,302,303,307,308]),sV=new Set([307,308]),Jb={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},aV={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},ym={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},zE=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,oV=i=>({hasErrorBoundary:!!i.hasErrorBoundary}),_3="remix-router-transitions",x3=Symbol("ResetLoaderData");function lV(i){const e=i.window?i.window:typeof window<"u"?window:void 0,t=typeof e<"u"&&typeof e.document<"u"&&typeof e.document.createElement<"u";Kr(i.routes.length>0,"You must provide a non-empty routes array to createRouter");let r=i.hydrationRouteProperties||[],n=i.mapRouteProperties||oV,s={},a=Zy(i.routes,n,void 0,s),o,l=i.basename||"/",u=i.dataStrategy||fV,c={unstable_middleware:!1,...i.future},h=null,m=new Set,g=null,y=null,_=null,T=i.hydrationData!=null,E=ed(a,i.history.location,l),w=!1,D=null,R;if(E==null&&!i.patchRoutesOnNavigation){let xe=ko(404,{pathname:i.history.location.pathname}),{matches:Pe,route:Be}=qD(a);R=!0,E=Pe,D={[Be.id]:xe}}else if(E&&!i.hydrationData&&Ce(E,a,i.history.location.pathname).active&&(E=null),E)if(E.some(xe=>xe.route.lazy))R=!1;else if(!E.some(xe=>xe.route.loader))R=!0;else{let xe=i.hydrationData?i.hydrationData.loaderData:null,Pe=i.hydrationData?i.hydrationData.errors:null;if(Pe){let Be=E.findIndex(nt=>Pe[nt.route.id]!==void 0);R=E.slice(0,Be+1).every(nt=>!G1(nt.route,xe,Pe))}else R=E.every(Be=>!G1(Be.route,xe,Pe))}else{R=!1,E=[];let xe=Ce(null,a,i.history.location.pathname);xe.active&&xe.matches&&(w=!0,E=xe.matches)}let A,L={historyAction:i.history.action,location:i.history.location,matches:E,initialized:R,navigation:Jb,restoreScrollPosition:i.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:i.hydrationData&&i.hydrationData.loaderData||{},actionData:i.hydrationData&&i.hydrationData.actionData||null,errors:i.hydrationData&&i.hydrationData.errors||D,fetchers:new Map,blockers:new Map},F="POP",B=!1,M,k=!1,q=new Map,G=null,H=!1,re=!1,se=new Set,de=new Map,me=0,ue=-1,oe=new Map,ce=new Set,te=new Map,fe=new Map,ye=new Set,Se=new Map,ke,qe=null;function vt(){if(h=i.history.listen(({action:xe,location:Pe,delta:Be})=>{if(ke){ke(),ke=void 0;return}pn(Se.size===0||Be!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let nt=Ni({currentLocation:L.location,nextLocation:Pe,historyAction:xe});if(nt&&Be!=null){let ct=new Promise(Rt=>{ke=Rt});i.history.go(Be*-1),Jr(nt,{state:"blocked",location:Pe,proceed(){Jr(nt,{state:"proceeding",proceed:void 0,reset:void 0,location:Pe}),ct.then(()=>i.history.go(Be))},reset(){let Rt=new Map(L.blockers);Rt.set(nt,ym),pt({blockers:Rt})}});return}return Ue(xe,Pe)}),t){CV(e,q);let xe=()=>EV(e,q);e.addEventListener("pagehide",xe),G=()=>e.removeEventListener("pagehide",xe)}return L.initialized||Ue("POP",L.location,{initialHydration:!0}),A}function et(){h&&h(),G&&G(),m.clear(),M&&M.abort(),L.fetchers.forEach((xe,Pe)=>Ir(Pe)),L.blockers.forEach((xe,Pe)=>$r(Pe))}function kt(xe){return m.add(xe),()=>m.delete(xe)}function pt(xe,Pe={}){L={...L,...xe};let Be=[],nt=[];L.fetchers.forEach((ct,Rt)=>{ct.state==="idle"&&(ye.has(Rt)?Be.push(Rt):nt.push(Rt))}),ye.forEach(ct=>{!L.fetchers.has(ct)&&!de.has(ct)&&Be.push(ct)}),[...m].forEach(ct=>ct(L,{deletedFetchers:Be,viewTransitionOpts:Pe.viewTransitionOpts,flushSync:Pe.flushSync===!0})),Be.forEach(ct=>Ir(ct)),nt.forEach(ct=>L.fetchers.delete(ct))}function Ut(xe,Pe,{flushSync:Be}={}){let nt=L.actionData!=null&&L.navigation.formMethod!=null&&eo(L.navigation.formMethod)&&L.navigation.state==="loading"&&xe.state?._isRedirect!==!0,ct;Pe.actionData?Object.keys(Pe.actionData).length>0?ct=Pe.actionData:ct=null:nt?ct=L.actionData:ct=null;let Rt=Pe.loaderData?HD(L.loaderData,Pe.loaderData,Pe.matches||[],Pe.errors):L.loaderData,Ot=L.blockers;Ot.size>0&&(Ot=new Map(Ot),Ot.forEach((jt,Kt)=>Ot.set(Kt,ym)));let st=B===!0||L.navigation.formMethod!=null&&eo(L.navigation.formMethod)&&xe.state?._isRedirect!==!0;o&&(a=o,o=void 0),H||F==="POP"||(F==="PUSH"?i.history.push(xe,xe.state):F==="REPLACE"&&i.history.replace(xe,xe.state));let _t;if(F==="POP"){let jt=q.get(L.location.pathname);jt&&jt.has(xe.pathname)?_t={currentLocation:L.location,nextLocation:xe}:q.has(xe.pathname)&&(_t={currentLocation:xe,nextLocation:L.location})}else if(k){let jt=q.get(L.location.pathname);jt?jt.add(xe.pathname):(jt=new Set([xe.pathname]),q.set(L.location.pathname,jt)),_t={currentLocation:L.location,nextLocation:xe}}pt({...Pe,actionData:ct,loaderData:Rt,historyAction:F,location:xe,initialized:!0,navigation:Jb,revalidation:"idle",restoreScrollPosition:he(xe,Pe.matches||L.matches),preventScrollReset:st,blockers:Ot},{viewTransitionOpts:_t,flushSync:Be===!0}),F="POP",B=!1,k=!1,H=!1,re=!1,qe?.resolve(),qe=null}async function Vt(xe,Pe){if(typeof xe=="number"){i.history.go(xe);return}let Be=W1(L.location,L.matches,l,xe,Pe?.fromRouteId,Pe?.relative),{path:nt,submission:ct,error:Rt}=OD(!1,Be,Pe),Ot=L.location,st=y0(L.location,nt,Pe&&Pe.state);st={...st,...i.history.encodeLocation(st)};let _t=Pe&&Pe.replace!=null?Pe.replace:void 0,jt="PUSH";_t===!0?jt="REPLACE":_t===!1||ct!=null&&eo(ct.formMethod)&&ct.formAction===L.location.pathname+L.location.search&&(jt="REPLACE");let Kt=Pe&&"preventScrollReset"in Pe?Pe.preventScrollReset===!0:void 0,Pt=(Pe&&Pe.flushSync)===!0,sr=Ni({currentLocation:Ot,nextLocation:st,historyAction:jt});if(sr){Jr(sr,{state:"blocked",location:st,proceed(){Jr(sr,{state:"proceeding",proceed:void 0,reset:void 0,location:st}),Vt(xe,Pe)},reset(){let mt=new Map(L.blockers);mt.set(sr,ym),pt({blockers:mt})}});return}await Ue(jt,st,{submission:ct,pendingError:Rt,preventScrollReset:Kt,replace:Pe&&Pe.replace,enableViewTransition:Pe&&Pe.viewTransition,flushSync:Pt})}function Xe(){qe||(qe=wV()),zr(),pt({revalidation:"loading"});let xe=qe.promise;return L.navigation.state==="submitting"?xe:L.navigation.state==="idle"?(Ue(L.historyAction,L.location,{startUninterruptedRevalidation:!0}),xe):(Ue(F||L.historyAction,L.navigation.location,{overrideNavigation:L.navigation,enableViewTransition:k===!0}),xe)}async function Ue(xe,Pe,Be){M&&M.abort(),M=null,F=xe,H=(Be&&Be.startUninterruptedRevalidation)===!0,ne(L.location,L.matches),B=(Be&&Be.preventScrollReset)===!0,k=(Be&&Be.enableViewTransition)===!0;let nt=o||a,ct=Be&&Be.overrideNavigation,Rt=Be?.initialHydration&&L.matches&&L.matches.length>0&&!w?L.matches:ed(nt,Pe,l),Ot=(Be&&Be.flushSync)===!0;if(Rt&&L.initialized&&!re&&_V(L.location,Pe)&&!(Be&&Be.submission&&eo(Be.submission.formMethod))){Ut(Pe,{matches:Rt},{flushSync:Ot});return}let st=Ce(Rt,nt,Pe.pathname);if(st.active&&st.matches&&(Rt=st.matches),!Rt){let{error:Vr,notFoundMatches:wr,route:Pr}=sn(Pe.pathname);Ut(Pe,{matches:wr,loaderData:{},errors:{[Pr.id]:Vr}},{flushSync:Ot});return}M=new AbortController;let _t=_f(i.history,Pe,M.signal,Be&&Be.submission),jt=new RD(i.unstable_getContext?await i.unstable_getContext():void 0),Kt;if(Be&&Be.pendingError)Kt=[Zd(Rt).route.id,{type:"error",error:Be.pendingError}];else if(Be&&Be.submission&&eo(Be.submission.formMethod)){let Vr=await Le(_t,Pe,Be.submission,Rt,jt,st.active,Be&&Be.initialHydration===!0,{replace:Be.replace,flushSync:Ot});if(Vr.shortCircuited)return;if(Vr.pendingActionResult){let[wr,Pr]=Vr.pendingActionResult;if(Za(Pr)&&_0(Pr.error)&&Pr.error.status===404){M=null,Ut(Pe,{matches:Vr.matches,loaderData:{},errors:{[wr]:Pr.error}});return}}Rt=Vr.matches||Rt,Kt=Vr.pendingActionResult,ct=Zb(Pe,Be.submission),Ot=!1,st.active=!1,_t=_f(i.history,_t.url,_t.signal)}let{shortCircuited:Pt,matches:sr,loaderData:mt,errors:dr}=await Ne(_t,Pe,Rt,jt,st.active,ct,Be&&Be.submission,Be&&Be.fetcherSubmission,Be&&Be.replace,Be&&Be.initialHydration===!0,Ot,Kt);Pt||(M=null,Ut(Pe,{matches:sr||Rt,...VD(Kt),loaderData:mt,errors:dr}))}async function Le(xe,Pe,Be,nt,ct,Rt,Ot,st={}){zr();let _t=bV(Pe,Be);if(pt({navigation:_t},{flushSync:st.flushSync===!0}),Rt){let Pt=await ze(nt,Pe.pathname,xe.signal);if(Pt.type==="aborted")return{shortCircuited:!0};if(Pt.type==="error"){let sr=Zd(Pt.partialMatches).route.id;return{matches:Pt.partialMatches,pendingActionResult:[sr,{type:"error",error:Pt.error}]}}else if(Pt.matches)nt=Pt.matches;else{let{notFoundMatches:sr,error:mt,route:dr}=sn(Pe.pathname);return{matches:sr,pendingActionResult:[dr.id,{type:"error",error:mt}]}}}let jt,Kt=$m(nt,Pe);if(!Kt.route.action&&!Kt.route.lazy)jt={type:"error",error:ko(405,{method:xe.method,pathname:Pe.pathname,routeId:Kt.route.id})};else{let Pt=Nf(n,s,xe,nt,Kt,Ot?[]:r,ct),sr=await Sr(xe,Pt,ct,null);if(jt=sr[Kt.route.id],!jt){for(let mt of nt)if(sr[mt.route.id]){jt=sr[mt.route.id];break}}if(xe.signal.aborted)return{shortCircuited:!0}}if(nh(jt)){let Pt;return st&&st.replace!=null?Pt=st.replace:Pt=$D(jt.response.headers.get("Location"),new URL(xe.url),l)===L.location.pathname+L.location.search,await it(xe,jt,!0,{submission:Be,replace:Pt}),{shortCircuited:!0}}if(Za(jt)){let Pt=Zd(nt,Kt.route.id);return(st&&st.replace)!==!0&&(F="PUSH"),{matches:nt,pendingActionResult:[Pt.route.id,jt,Kt.route.id]}}return{matches:nt,pendingActionResult:[Kt.route.id,jt]}}async function Ne(xe,Pe,Be,nt,ct,Rt,Ot,st,_t,jt,Kt,Pt){let sr=Rt||Zb(Pe,Ot),mt=Ot||st||GD(sr),dr=!H&&!jt;if(ct){if(dr){let we=rt(Pt);pt({navigation:sr,...we!==void 0?{actionData:we}:{}},{flushSync:Kt})}let Cr=await ze(Be,Pe.pathname,xe.signal);if(Cr.type==="aborted")return{shortCircuited:!0};if(Cr.type==="error"){let we=Zd(Cr.partialMatches).route.id;return{matches:Cr.partialMatches,loaderData:{},errors:{[we]:Cr.error}}}else if(Cr.matches)Be=Cr.matches;else{let{error:we,notFoundMatches:Fe,route:Ge}=sn(Pe.pathname);return{matches:Fe,loaderData:{},errors:{[Ge.id]:we}}}}let Vr=o||a,{dsMatches:wr,revalidatingFetchers:Pr}=MD(xe,nt,n,s,i.history,L,Be,mt,Pe,jt?[]:r,jt===!0,re,se,ye,te,ce,Vr,l,Pt);if(ue=++me,!i.dataStrategy&&!wr.some(Cr=>Cr.shouldLoad)&&Pr.length===0){let Cr=Bi();return Ut(Pe,{matches:Be,loaderData:{},errors:Pt&&Za(Pt[1])?{[Pt[0]]:Pt[1].error}:null,...VD(Pt),...Cr?{fetchers:new Map(L.fetchers)}:{}},{flushSync:Kt}),{shortCircuited:!0}}if(dr){let Cr={};if(!ct){Cr.navigation=sr;let we=rt(Pt);we!==void 0&&(Cr.actionData=we)}Pr.length>0&&(Cr.fetchers=lt(Pr)),pt(Cr,{flushSync:Kt})}Pr.forEach(Cr=>{It(Cr.key),Cr.controller&&de.set(Cr.key,Cr.controller)});let Ti=()=>Pr.forEach(Cr=>It(Cr.key));M&&M.signal.addEventListener("abort",Ti);let{loaderResults:Qt,fetcherResults:vn}=await xr(wr,Pr,xe,nt);if(xe.signal.aborted)return{shortCircuited:!0};M&&M.signal.removeEventListener("abort",Ti),Pr.forEach(Cr=>de.delete(Cr.key));let ui=rv(Qt);if(ui)return await it(xe,ui.result,!0,{replace:_t}),{shortCircuited:!0};if(ui=rv(vn),ui)return ce.add(ui.key),await it(xe,ui.result,!0,{replace:_t}),{shortCircuited:!0};let{loaderData:gs,errors:Xr}=zD(L,Be,Qt,Pt,Pr,vn);jt&&L.errors&&(Xr={...L.errors,...Xr});let vs=Bi(),an=zt(ue),Ji=vs||an||Pr.length>0;return{matches:Be,loaderData:gs,errors:Xr,...Ji?{fetchers:new Map(L.fetchers)}:{}}}function rt(xe){if(xe&&!Za(xe[1]))return{[xe[0]]:xe[1].data};if(L.actionData)return Object.keys(L.actionData).length===0?null:L.actionData}function lt(xe){return xe.forEach(Pe=>{let Be=L.fetchers.get(Pe.key),nt=_m(void 0,Be?Be.data:void 0);L.fetchers.set(Pe.key,nt)}),new Map(L.fetchers)}async function dt(xe,Pe,Be,nt){It(xe);let ct=(nt&&nt.flushSync)===!0,Rt=o||a,Ot=W1(L.location,L.matches,l,Be,Pe,nt?.relative),st=ed(Rt,Ot,l),_t=Ce(st,Rt,Ot);if(_t.active&&_t.matches&&(st=_t.matches),!st){Gt(xe,Pe,ko(404,{pathname:Ot}),{flushSync:ct});return}let{path:jt,submission:Kt,error:Pt}=OD(!0,Ot,nt);if(Pt){Gt(xe,Pe,Pt,{flushSync:ct});return}let sr=$m(st,jt),mt=new RD(i.unstable_getContext?await i.unstable_getContext():void 0),dr=(nt&&nt.preventScrollReset)===!0;if(Kt&&eo(Kt.formMethod)){await ut(xe,Pe,jt,sr,st,mt,_t.active,ct,dr,Kt);return}te.set(xe,{routeId:Pe,path:jt}),await At(xe,Pe,jt,sr,st,mt,_t.active,ct,dr,Kt)}async function ut(xe,Pe,Be,nt,ct,Rt,Ot,st,_t,jt){zr(),te.delete(xe);function Kt(ot){if(!ot.route.action&&!ot.route.lazy){let Tt=ko(405,{method:jt.formMethod,pathname:Be,routeId:Pe});return Gt(xe,Pe,Tt,{flushSync:st}),!0}return!1}if(!Ot&&Kt(nt))return;let Pt=L.fetchers.get(xe);cr(xe,SV(jt,Pt),{flushSync:st});let sr=new AbortController,mt=_f(i.history,Be,sr.signal,jt);if(Ot){let ot=await ze(ct,Be,mt.signal,xe);if(ot.type==="aborted")return;if(ot.type==="error"){Gt(xe,Pe,ot.error,{flushSync:st});return}else if(ot.matches){if(ct=ot.matches,nt=$m(ct,Be),Kt(nt))return}else{Gt(xe,Pe,ko(404,{pathname:Be}),{flushSync:st});return}}de.set(xe,sr);let dr=me,Vr=Nf(n,s,mt,ct,nt,r,Rt),Pr=(await Sr(mt,Vr,Rt,xe))[nt.route.id];if(mt.signal.aborted){de.get(xe)===sr&&de.delete(xe);return}if(ye.has(xe)){if(nh(Pr)||Za(Pr)){cr(xe,Kc(void 0));return}}else{if(nh(Pr))if(de.delete(xe),ue>dr){cr(xe,Kc(void 0));return}else return ce.add(xe),cr(xe,_m(jt)),it(mt,Pr,!1,{fetcherSubmission:jt,preventScrollReset:_t});if(Za(Pr)){Gt(xe,Pe,Pr.error);return}}let Ti=L.navigation.location||L.location,Qt=_f(i.history,Ti,sr.signal),vn=o||a,ui=L.navigation.state!=="idle"?ed(vn,L.navigation.location,l):L.matches;Kr(ui,"Didn't find any matches after fetcher action");let gs=++me;oe.set(xe,gs);let Xr=_m(jt,Pr.data);L.fetchers.set(xe,Xr);let{dsMatches:vs,revalidatingFetchers:an}=MD(Qt,Rt,n,s,i.history,L,ui,jt,Ti,r,!1,re,se,ye,te,ce,vn,l,[nt.route.id,Pr]);an.filter(ot=>ot.key!==xe).forEach(ot=>{let Tt=ot.key,Dt=L.fetchers.get(Tt),mr=_m(void 0,Dt?Dt.data:void 0);L.fetchers.set(Tt,mr),It(Tt),ot.controller&&de.set(Tt,ot.controller)}),pt({fetchers:new Map(L.fetchers)});let Ji=()=>an.forEach(ot=>It(ot.key));sr.signal.addEventListener("abort",Ji);let{loaderResults:Cr,fetcherResults:we}=await xr(vs,an,Qt,Rt);if(sr.signal.aborted)return;if(sr.signal.removeEventListener("abort",Ji),oe.delete(xe),de.delete(xe),an.forEach(ot=>de.delete(ot.key)),L.fetchers.has(xe)){let ot=Kc(Pr.data);L.fetchers.set(xe,ot)}let Fe=rv(Cr);if(Fe)return it(Qt,Fe.result,!1,{preventScrollReset:_t});if(Fe=rv(we),Fe)return ce.add(Fe.key),it(Qt,Fe.result,!1,{preventScrollReset:_t});let{loaderData:Ge,errors:Ye}=zD(L,ui,Cr,void 0,an,we);zt(gs),L.navigation.state==="loading"&&gs>ue?(Kr(F,"Expected pending action"),M&&M.abort(),Ut(L.navigation.location,{matches:ui,loaderData:Ge,errors:Ye,fetchers:new Map(L.fetchers)})):(pt({errors:Ye,loaderData:HD(L.loaderData,Ge,ui,Ye),fetchers:new Map(L.fetchers)}),re=!1)}async function At(xe,Pe,Be,nt,ct,Rt,Ot,st,_t,jt){let Kt=L.fetchers.get(xe);cr(xe,_m(jt,Kt?Kt.data:void 0),{flushSync:st});let Pt=new AbortController,sr=_f(i.history,Be,Pt.signal);if(Ot){let Pr=await ze(ct,Be,sr.signal,xe);if(Pr.type==="aborted")return;if(Pr.type==="error"){Gt(xe,Pe,Pr.error,{flushSync:st});return}else if(Pr.matches)ct=Pr.matches,nt=$m(ct,Be);else{Gt(xe,Pe,ko(404,{pathname:Be}),{flushSync:st});return}}de.set(xe,Pt);let mt=me,dr=Nf(n,s,sr,ct,nt,r,Rt),wr=(await Sr(sr,dr,Rt,xe))[nt.route.id];if(de.get(xe)===Pt&&de.delete(xe),!sr.signal.aborted){if(ye.has(xe)){cr(xe,Kc(void 0));return}if(nh(wr))if(ue>mt){cr(xe,Kc(void 0));return}else{ce.add(xe),await it(sr,wr,!1,{preventScrollReset:_t});return}if(Za(wr)){Gt(xe,Pe,wr.error);return}cr(xe,Kc(wr.data))}}async function it(xe,Pe,Be,{submission:nt,fetcherSubmission:ct,preventScrollReset:Rt,replace:Ot}={}){Pe.response.headers.has("X-Remix-Revalidate")&&(re=!0);let st=Pe.response.headers.get("Location");Kr(st,"Expected a Location header on the redirect Response"),st=$D(st,new URL(xe.url),l);let _t=y0(L.location,st,{_isRedirect:!0});if(t){let dr=!1;if(Pe.response.headers.has("X-Remix-Reload-Document"))dr=!0;else if(zE.test(st)){const Vr=p3(st,!0);dr=Vr.origin!==e.location.origin||Oo(Vr.pathname,l)==null}if(dr){Ot?e.location.replace(st):e.location.assign(st);return}}M=null;let jt=Ot===!0||Pe.response.headers.has("X-Remix-Replace")?"REPLACE":"PUSH",{formMethod:Kt,formAction:Pt,formEncType:sr}=L.navigation;!nt&&!ct&&Kt&&Pt&&sr&&(nt=GD(L.navigation));let mt=nt||ct;if(sV.has(Pe.response.status)&&mt&&eo(mt.formMethod))await Ue(jt,_t,{submission:{...mt,formAction:st},preventScrollReset:Rt||B,enableViewTransition:Be?k:void 0});else{let dr=Zb(_t,nt);await Ue(jt,_t,{overrideNavigation:dr,fetcherSubmission:ct,preventScrollReset:Rt||B,enableViewTransition:Be?k:void 0})}}async function Sr(xe,Pe,Be,nt){let ct,Rt={};try{ct=await pV(u,xe,Pe,nt,Be,!1)}catch(Ot){return Pe.filter(st=>st.shouldLoad).forEach(st=>{Rt[st.route.id]={type:"error",error:Ot}}),Rt}if(xe.signal.aborted)return Rt;for(let[Ot,st]of Object.entries(ct))if(xV(st)){let _t=st.result;Rt[Ot]={type:"redirect",response:vV(_t,xe,Ot,Pe,l)}}else Rt[Ot]=await gV(st);return Rt}async function xr(xe,Pe,Be,nt){let ct=Sr(Be,xe,nt,null),Rt=Promise.all(Pe.map(async _t=>{if(_t.matches&&_t.match&&_t.request&&_t.controller){let Kt=(await Sr(_t.request,_t.matches,nt,_t.key))[_t.match.route.id];return{[_t.key]:Kt}}else return Promise.resolve({[_t.key]:{type:"error",error:ko(404,{pathname:_t.path})}})})),Ot=await ct,st=(await Rt).reduce((_t,jt)=>Object.assign(_t,jt),{});return{loaderResults:Ot,fetcherResults:st}}function zr(){re=!0,te.forEach((xe,Pe)=>{de.has(Pe)&&se.add(Pe),It(Pe)})}function cr(xe,Pe,Be={}){L.fetchers.set(xe,Pe),pt({fetchers:new Map(L.fetchers)},{flushSync:(Be&&Be.flushSync)===!0})}function Gt(xe,Pe,Be,nt={}){let ct=Zd(L.matches,Pe);Ir(xe),pt({errors:{[ct.route.id]:Be},fetchers:new Map(L.fetchers)},{flushSync:(nt&&nt.flushSync)===!0})}function Er(xe){return fe.set(xe,(fe.get(xe)||0)+1),ye.has(xe)&&ye.delete(xe),L.fetchers.get(xe)||aV}function Ir(xe){let Pe=L.fetchers.get(xe);de.has(xe)&&!(Pe&&Pe.state==="loading"&&oe.has(xe))&&It(xe),te.delete(xe),oe.delete(xe),ce.delete(xe),ye.delete(xe),se.delete(xe),L.fetchers.delete(xe)}function Hr(xe){let Pe=(fe.get(xe)||0)-1;Pe<=0?(fe.delete(xe),ye.add(xe)):fe.set(xe,Pe),pt({fetchers:new Map(L.fetchers)})}function It(xe){let Pe=de.get(xe);Pe&&(Pe.abort(),de.delete(xe))}function $t(xe){for(let Pe of xe){let Be=Er(Pe),nt=Kc(Be.data);L.fetchers.set(Pe,nt)}}function Bi(){let xe=[],Pe=!1;for(let Be of ce){let nt=L.fetchers.get(Be);Kr(nt,`Expected fetcher: ${Be}`),nt.state==="loading"&&(ce.delete(Be),xe.push(Be),Pe=!0)}return $t(xe),Pe}function zt(xe){let Pe=[];for(let[Be,nt]of oe)if(nt<xe){let ct=L.fetchers.get(Be);Kr(ct,`Expected fetcher: ${Be}`),ct.state==="loading"&&(It(Be),oe.delete(Be),Pe.push(Be))}return $t(Pe),Pe.length>0}function Dr(xe,Pe){let Be=L.blockers.get(xe)||ym;return Se.get(xe)!==Pe&&Se.set(xe,Pe),Be}function $r(xe){L.blockers.delete(xe),Se.delete(xe)}function Jr(xe,Pe){let Be=L.blockers.get(xe)||ym;Kr(Be.state==="unblocked"&&Pe.state==="blocked"||Be.state==="blocked"&&Pe.state==="blocked"||Be.state==="blocked"&&Pe.state==="proceeding"||Be.state==="blocked"&&Pe.state==="unblocked"||Be.state==="proceeding"&&Pe.state==="unblocked",`Invalid blocker state transition: ${Be.state} -> ${Pe.state}`);let nt=new Map(L.blockers);nt.set(xe,Pe),pt({blockers:nt})}function Ni({currentLocation:xe,nextLocation:Pe,historyAction:Be}){if(Se.size===0)return;Se.size>1&&pn(!1,"A router only supports one blocker at a time");let nt=Array.from(Se.entries()),[ct,Rt]=nt[nt.length-1],Ot=L.blockers.get(ct);if(!(Ot&&Ot.state==="proceeding")&&Rt({currentLocation:xe,nextLocation:Pe,historyAction:Be}))return ct}function sn(xe){let Pe=ko(404,{pathname:xe}),Be=o||a,{matches:nt,route:ct}=qD(Be);return{notFoundMatches:nt,route:ct,error:Pe}}function Ui(xe,Pe,Be){if(g=xe,_=Pe,y=Be||null,!T&&L.navigation===Jb){T=!0;let nt=he(L.location,L.matches);nt!=null&&pt({restoreScrollPosition:nt})}return()=>{g=null,_=null,y=null}}function Wi(xe,Pe){return y&&y(xe,Pe.map(nt=>BH(nt,L.loaderData)))||xe.key}function ne(xe,Pe){if(g&&_){let Be=Wi(xe,Pe);g[Be]=_()}}function he(xe,Pe){if(g){let Be=Wi(xe,Pe),nt=g[Be];if(typeof nt=="number")return nt}return null}function Ce(xe,Pe,Be){if(i.patchRoutesOnNavigation)if(xe){if(Object.keys(xe[0].params).length>0)return{active:!0,matches:Ey(Pe,Be,l,!0)}}else return{active:!0,matches:Ey(Pe,Be,l,!0)||[]};return{active:!1,matches:null}}async function ze(xe,Pe,Be,nt){if(!i.patchRoutesOnNavigation)return{type:"success",matches:xe};let ct=xe;for(;;){let Rt=o==null,Ot=o||a,st=s;try{await i.patchRoutesOnNavigation({signal:Be,path:Pe,matches:ct,fetcherKey:nt,patch:(Kt,Pt)=>{Be.aborted||FD(Kt,Pt,Ot,st,n)}})}catch(Kt){return{type:"error",error:Kt,partialMatches:ct}}finally{Rt&&!Be.aborted&&(a=[...a])}if(Be.aborted)return{type:"aborted"};let _t=ed(Ot,Pe,l);if(_t)return{type:"success",matches:_t};let jt=Ey(Ot,Pe,l,!0);if(!jt||ct.length===jt.length&&ct.every((Kt,Pt)=>Kt.route.id===jt[Pt].route.id))return{type:"success",matches:null};ct=jt}}function yt(xe){s={},o=Zy(xe,n,void 0,s)}function ir(xe,Pe){let Be=o==null;FD(xe,Pe,o||a,s,n),Be&&(a=[...a],pt({}))}return A={get basename(){return l},get future(){return c},get state(){return L},get routes(){return a},get window(){return e},initialize:vt,subscribe:kt,enableScrollRestoration:Ui,navigate:Vt,fetch:dt,revalidate:Xe,createHref:xe=>i.history.createHref(xe),encodeLocation:xe=>i.history.encodeLocation(xe),getFetcher:Er,deleteFetcher:Hr,dispose:et,getBlocker:Dr,deleteBlocker:$r,patchRoutes:ir,_internalFetchControllers:de,_internalSetRoutes:yt},A}function uV(i){return i!=null&&("formData"in i&&i.formData!=null||"body"in i&&i.body!==void 0)}function W1(i,e,t,r,n,s){let a,o;if(n){a=[];for(let u of e)if(a.push(u),u.route.id===n){o=u;break}}else a=e,o=e[e.length-1];let l=jE(r||".",$E(a),Oo(i.pathname,t)||i.pathname,s==="path");if(r==null&&(l.search=i.search,l.hash=i.hash),(r==null||r===""||r===".")&&o){let u=HE(l.search);if(o.route.index&&!u)l.search=l.search?l.search.replace(/^\?/,"?index&"):"?index";else if(!o.route.index&&u){let c=new URLSearchParams(l.search),h=c.getAll("index");c.delete("index"),h.filter(g=>g).forEach(g=>c.append("index",g));let m=c.toString();l.search=m?`?${m}`:""}}return t!=="/"&&(l.pathname=l.pathname==="/"?t:au([t,l.pathname])),od(l)}function OD(i,e,t){if(!t||!uV(t))return{path:e};if(t.formMethod&&!TV(t.formMethod))return{path:e,error:ko(405,{method:t.formMethod})};let r=()=>({path:e,error:ko(400,{type:"invalid-body"})}),s=(t.formMethod||"get").toUpperCase(),a=w3(e);if(t.body!==void 0){if(t.formEncType==="text/plain"){if(!eo(s))return r();let h=typeof t.body=="string"?t.body:t.body instanceof FormData||t.body instanceof URLSearchParams?Array.from(t.body.entries()).reduce((m,[g,y])=>`${m}${g}=${y}
`,""):String(t.body);return{path:e,submission:{formMethod:s,formAction:a,formEncType:t.formEncType,formData:void 0,json:void 0,text:h}}}else if(t.formEncType==="application/json"){if(!eo(s))return r();try{let h=typeof t.body=="string"?JSON.parse(t.body):t.body;return{path:e,submission:{formMethod:s,formAction:a,formEncType:t.formEncType,formData:void 0,json:h,text:void 0}}}catch{return r()}}}Kr(typeof FormData=="function","FormData is not available in this environment");let o,l;if(t.formData)o=X1(t.formData),l=t.formData;else if(t.body instanceof FormData)o=X1(t.body),l=t.body;else if(t.body instanceof URLSearchParams)o=t.body,l=jD(o);else if(t.body==null)o=new URLSearchParams,l=new FormData;else try{o=new URLSearchParams(t.body),l=jD(o)}catch{return r()}let u={formMethod:s,formAction:a,formEncType:t&&t.formEncType||"application/x-www-form-urlencoded",formData:l,json:void 0,text:void 0};if(eo(u.formMethod))return{path:e,submission:u};let c=uc(e);return i&&c.search&&HE(c.search)&&o.append("index",""),c.search=`?${o}`,{path:od(c),submission:u}}function MD(i,e,t,r,n,s,a,o,l,u,c,h,m,g,y,_,T,E,w){let D=w?Za(w[1])?w[1].error:w[1].data:void 0,R=n.createURL(s.location),A=n.createURL(l),L;if(c&&s.errors){let G=Object.keys(s.errors)[0];L=a.findIndex(H=>H.route.id===G)}else if(w&&Za(w[1])){let G=w[0];L=a.findIndex(H=>H.route.id===G)-1}let F=w?w[1].statusCode:void 0,B=F&&F>=400,M={currentUrl:R,currentParams:s.matches[0]?.params||{},nextUrl:A,nextParams:a[0].params,...o,actionResult:D,actionStatus:F},k=a.map((G,H)=>{let{route:re}=G,se=null;if(L!=null&&H>L?se=!1:re.lazy?se=!0:re.loader==null?se=!1:c?se=G1(re,s.loaderData,s.errors):cV(s.loaderData,s.matches[H],G)&&(se=!0),se!==null)return K1(t,r,i,G,u,e,se);let de=B?!1:h||R.pathname+R.search===A.pathname+A.search||R.search!==A.search||dV(s.matches[H],G),me={...M,defaultShouldRevalidate:de},ue=r_(G,me);return K1(t,r,i,G,u,e,ue,me)}),q=[];return y.forEach((G,H)=>{if(c||!a.some(ce=>ce.route.id===G.routeId)||g.has(H))return;let re=ed(T,G.path,E);if(!re){q.push({key:H,routeId:G.routeId,path:G.path,matches:null,match:null,request:null,controller:null});return}if(_.has(H))return;let se=s.fetchers.get(H),de=$m(re,G.path),me=new AbortController,ue=_f(n,G.path,me.signal),oe=null;if(m.has(H))m.delete(H),oe=Nf(t,r,ue,re,de,u,e);else if(se&&se.state!=="idle"&&se.data===void 0)h&&(oe=Nf(t,r,ue,re,de,u,e));else{let ce={...M,defaultShouldRevalidate:B?!1:h};r_(de,ce)&&(oe=Nf(t,r,ue,re,de,u,e,ce))}oe&&q.push({key:H,routeId:G.routeId,path:G.path,matches:oe,match:de,request:ue,controller:me})}),{dsMatches:k,revalidatingFetchers:q}}function G1(i,e,t){if(i.lazy)return!0;if(!i.loader)return!1;let r=e!=null&&i.id in e,n=t!=null&&t[i.id]!==void 0;return!r&&n?!1:typeof i.loader=="function"&&i.loader.hydrate===!0?!0:!r&&!n}function cV(i,e,t){let r=!e||t.route.id!==e.route.id,n=!i.hasOwnProperty(t.route.id);return r||n}function dV(i,e){let t=i.route.path;return i.pathname!==e.pathname||t!=null&&t.endsWith("*")&&i.params["*"]!==e.params["*"]}function r_(i,e){if(i.route.shouldRevalidate){let t=i.route.shouldRevalidate(e);if(typeof t=="boolean")return t}return e.defaultShouldRevalidate}function FD(i,e,t,r,n){let s;if(i){let l=r[i];Kr(l,`No route found to patch children into: routeId = ${i}`),l.children||(l.children=[]),s=l.children}else s=t;let a=e.filter(l=>!s.some(u=>T3(l,u))),o=Zy(a,n,[i||"_","patch",String(s?.length||"0")],r);s.push(...o)}function T3(i,e){return"id"in i&&"id"in e&&i.id===e.id?!0:i.index===e.index&&i.path===e.path&&i.caseSensitive===e.caseSensitive?(!i.children||i.children.length===0)&&(!e.children||e.children.length===0)?!0:i.children.every((t,r)=>e.children?.some(n=>T3(t,n))):!1}var BD=new WeakMap,b3=({key:i,route:e,manifest:t,mapRouteProperties:r})=>{let n=t[e.id];if(Kr(n,"No route found in manifest"),!n.lazy||typeof n.lazy!="object")return;let s=n.lazy[i];if(!s)return;let a=BD.get(n);a||(a={},BD.set(n,a));let o=a[i];if(o)return o;let l=(async()=>{let u=LH(i),h=n[i]!==void 0&&i!=="hasErrorBoundary";if(u)pn(!u,"Route property "+i+" is not a supported lazy route property. This property will be ignored."),a[i]=Promise.resolve();else if(h)pn(!1,`Route "${n.id}" has a static property "${i}" defined. The lazy property will be ignored.`);else{let m=await s();m!=null&&(Object.assign(n,{[i]:m}),Object.assign(n,r(n)))}typeof n.lazy=="object"&&(n.lazy[i]=void 0,Object.values(n.lazy).every(m=>m===void 0)&&(n.lazy=void 0))})();return a[i]=l,l},ND=new WeakMap;function hV(i,e,t,r,n){let s=t[i.id];if(Kr(s,"No route found in manifest"),!i.lazy)return{lazyRoutePromise:void 0,lazyHandlerPromise:void 0};if(typeof i.lazy=="function"){let c=ND.get(s);if(c)return{lazyRoutePromise:c,lazyHandlerPromise:c};let h=(async()=>{Kr(typeof i.lazy=="function","No lazy route function found");let m=await i.lazy(),g={};for(let y in m){let _=m[y];if(_===void 0)continue;let T=MH(y),w=s[y]!==void 0&&y!=="hasErrorBoundary";T?pn(!T,"Route property "+y+" is not a supported property to be returned from a lazy route function. This property will be ignored."):w?pn(!w,`Route "${s.id}" has a static property "${y}" defined but its lazy function is also returning a value for this property. The lazy route property "${y}" will be ignored.`):g[y]=_}Object.assign(s,g),Object.assign(s,{...r(s),lazy:void 0})})();return ND.set(s,h),h.catch(()=>{}),{lazyRoutePromise:h,lazyHandlerPromise:h}}let a=Object.keys(i.lazy),o=[],l;for(let c of a){if(n&&n.includes(c))continue;let h=b3({key:c,route:i,manifest:t,mapRouteProperties:r});h&&(o.push(h),c===e&&(l=h))}let u=o.length>0?Promise.all(o).then(()=>{}):void 0;return u?.catch(()=>{}),l?.catch(()=>{}),{lazyRoutePromise:u,lazyHandlerPromise:l}}async function UD(i){let e=i.matches.filter(n=>n.shouldLoad),t={};return(await Promise.all(e.map(n=>n.resolve()))).forEach((n,s)=>{t[e[s].route.id]=n}),t}async function fV(i){return i.matches.some(e=>e.route.unstable_middleware)?S3(i,!1,()=>UD(i),(e,t)=>({[t]:{type:"error",result:e}})):UD(i)}async function S3(i,e,t,r){let{matches:n,request:s,params:a,context:o}=i,l={handlerResult:void 0};try{let u=n.flatMap(h=>h.route.unstable_middleware?h.route.unstable_middleware.map(m=>[h.route.id,m]):[]),c=await C3({request:s,params:a,context:o},u,e,l,t);return e?c:l.handlerResult}catch(u){if(!l.middlewareError)throw u;let c=await r(l.middlewareError.error,l.middlewareError.routeId);return l.handlerResult?Object.assign(l.handlerResult,c):c}}async function C3(i,e,t,r,n,s=0){let{request:a}=i;if(a.signal.aborted)throw a.signal.reason?a.signal.reason:new Error(`Request aborted without an \`AbortSignal.reason\`: ${a.method} ${a.url}`);let o=e[s];if(!o)return r.handlerResult=await n(),r.handlerResult;let[l,u]=o,c=!1,h,m=async()=>{if(c)throw new Error("You may only call `next()` once per middleware");c=!0,await C3(i,e,t,r,n,s+1)};try{let g=await u({request:i.request,params:i.params,context:i.context},m);return c?g===void 0?h:g:m()}catch(g){throw r.middlewareError?r.middlewareError.error!==g&&(r.middlewareError={routeId:l,error:g}):r.middlewareError={routeId:l,error:g},g}}function E3(i,e,t,r,n){let s=b3({key:"unstable_middleware",route:r.route,manifest:e,mapRouteProperties:i}),a=hV(r.route,eo(t.method)?"action":"loader",e,i,n);return{middleware:s,route:a.lazyRoutePromise,handler:a.lazyHandlerPromise}}function K1(i,e,t,r,n,s,a,o=null){let l=!1,u=E3(i,e,t,r,n);return{...r,_lazyPromises:u,shouldLoad:a,unstable_shouldRevalidateArgs:o,unstable_shouldCallHandler(c){return l=!0,o?typeof c=="boolean"?r_(r,{...o,defaultShouldRevalidate:c}):r_(r,o):a},resolve(c){return l||a||c&&t.method==="GET"&&(r.route.lazy||r.route.loader)?mV({request:t,match:r,lazyHandlerPromise:u?.handler,lazyRoutePromise:u?.route,handlerOverride:c,scopedContext:s}):Promise.resolve({type:"data",result:void 0})}}}function Nf(i,e,t,r,n,s,a,o=null){return r.map(l=>l.route.id!==n.route.id?{...l,shouldLoad:!1,unstable_shouldRevalidateArgs:o,unstable_shouldCallHandler:()=>!1,_lazyPromises:E3(i,e,t,l,s),resolve:()=>Promise.resolve({type:"data",result:void 0})}:K1(i,e,t,l,s,a,!0,o))}async function pV(i,e,t,r,n,s){t.some(u=>u._lazyPromises?.middleware)&&await Promise.all(t.map(u=>u._lazyPromises?.middleware));let a={request:e,params:t[0].params,context:n,matches:t},l=await i({...a,fetcherKey:r,unstable_runClientMiddleware:u=>{let c=a;return S3(c,!1,()=>u({...c,fetcherKey:r,unstable_runClientMiddleware:()=>{throw new Error("Cannot call `unstable_runClientMiddleware()` from within an `unstable_runClientMiddleware` handler")}}),(h,m)=>({[m]:{type:"error",result:h}}))}});try{await Promise.all(t.flatMap(u=>[u._lazyPromises?.handler,u._lazyPromises?.route]))}catch{}return l}async function mV({request:i,match:e,lazyHandlerPromise:t,lazyRoutePromise:r,handlerOverride:n,scopedContext:s}){let a,o,l=eo(i.method),u=l?"action":"loader",c=h=>{let m,g=new Promise((T,E)=>m=E);o=()=>m(),i.signal.addEventListener("abort",o);let y=T=>typeof h!="function"?Promise.reject(new Error(`You cannot call the handler for a route which defines a boolean "${u}" [routeId: ${e.route.id}]`)):h({request:i,params:e.params,context:s},...T!==void 0?[T]:[]),_=(async()=>{try{return{type:"data",result:await(n?n(E=>y(E)):y())}}catch(T){return{type:"error",result:T}}})();return Promise.race([_,g])};try{let h=l?e.route.action:e.route.loader;if(t||r)if(h){let m,[g]=await Promise.all([c(h).catch(y=>{m=y}),t,r]);if(m!==void 0)throw m;a=g}else{await t;let m=l?e.route.action:e.route.loader;if(m)[a]=await Promise.all([c(m),r]);else if(u==="action"){let g=new URL(i.url),y=g.pathname+g.search;throw ko(405,{method:i.method,pathname:y,routeId:e.route.id})}else return{type:"data",result:void 0}}else if(h)a=await c(h);else{let m=new URL(i.url),g=m.pathname+m.search;throw ko(404,{pathname:g})}}catch(h){return{type:"error",result:h}}finally{o&&i.signal.removeEventListener("abort",o)}return a}async function gV(i){let{result:e,type:t}=i;if(k3(e)){let r;try{let n=e.headers.get("Content-Type");n&&/\bapplication\/json\b/.test(n)?e.body==null?r=null:r=await e.json():r=await e.text()}catch(n){return{type:"error",error:n}}return t==="error"?{type:"error",error:new t_(e.status,e.statusText,r),statusCode:e.status,headers:e.headers}:{type:"data",data:r,statusCode:e.status,headers:e.headers}}return t==="error"?WD(e)?e.data instanceof Error?{type:"error",error:e.data,statusCode:e.init?.status,headers:e.init?.headers?new Headers(e.init.headers):void 0}:{type:"error",error:new t_(e.init?.status||500,void 0,e.data),statusCode:_0(e)?e.status:void 0,headers:e.init?.headers?new Headers(e.init.headers):void 0}:{type:"error",error:e,statusCode:_0(e)?e.status:void 0}:WD(e)?{type:"data",data:e.data,statusCode:e.init?.status,headers:e.init?.headers?new Headers(e.init.headers):void 0}:{type:"data",data:e}}function vV(i,e,t,r,n){let s=i.headers.get("Location");if(Kr(s,"Redirects returned/thrown from loaders/actions must have a Location header"),!zE.test(s)){let a=r.slice(0,r.findIndex(o=>o.route.id===t)+1);s=W1(new URL(e.url),a,n,s),i.headers.set("Location",s)}return i}function $D(i,e,t){if(zE.test(i)){let r=i,n=r.startsWith("//")?new URL(e.protocol+r):new URL(r),s=Oo(n.pathname,t)!=null;if(n.origin===e.origin&&s)return n.pathname+n.search+n.hash}return i}function _f(i,e,t,r){let n=i.createURL(w3(e)).toString(),s={signal:t};if(r&&eo(r.formMethod)){let{formMethod:a,formEncType:o}=r;s.method=a.toUpperCase(),o==="application/json"?(s.headers=new Headers({"Content-Type":o}),s.body=JSON.stringify(r.json)):o==="text/plain"?s.body=r.text:o==="application/x-www-form-urlencoded"&&r.formData?s.body=X1(r.formData):s.body=r.formData}return new Request(n,s)}function X1(i){let e=new URLSearchParams;for(let[t,r]of i.entries())e.append(t,typeof r=="string"?r:r.name);return e}function jD(i){let e=new FormData;for(let[t,r]of i.entries())e.append(t,r);return e}function yV(i,e,t,r=!1,n=!1){let s={},a=null,o,l=!1,u={},c=t&&Za(t[1])?t[1].error:void 0;return i.forEach(h=>{if(!(h.route.id in e))return;let m=h.route.id,g=e[m];if(Kr(!nh(g),"Cannot handle redirect results in processLoaderData"),Za(g)){let y=g.error;if(c!==void 0&&(y=c,c=void 0),a=a||{},n)a[m]=y;else{let _=Zd(i,m);a[_.route.id]==null&&(a[_.route.id]=y)}r||(s[m]=x3),l||(l=!0,o=_0(g.error)?g.error.status:500),g.headers&&(u[m]=g.headers)}else s[m]=g.data,g.statusCode&&g.statusCode!==200&&!l&&(o=g.statusCode),g.headers&&(u[m]=g.headers)}),c!==void 0&&t&&(a={[t[0]]:c},t[2]&&(s[t[2]]=void 0)),{loaderData:s,errors:a,statusCode:o||200,loaderHeaders:u}}function zD(i,e,t,r,n,s){let{loaderData:a,errors:o}=yV(e,t,r);return n.filter(l=>!l.matches||l.matches.some(u=>u.shouldLoad)).forEach(l=>{let{key:u,match:c,controller:h}=l,m=s[u];if(Kr(m,"Did not find corresponding fetcher result"),!(h&&h.signal.aborted))if(Za(m)){let g=Zd(i.matches,c?.route.id);o&&o[g.route.id]||(o={...o,[g.route.id]:m.error}),i.fetchers.delete(u)}else if(nh(m))Kr(!1,"Unhandled fetcher revalidation redirect");else{let g=Kc(m.data);i.fetchers.set(u,g)}}),{loaderData:a,errors:o}}function HD(i,e,t,r){let n=Object.entries(e).filter(([,s])=>s!==x3).reduce((s,[a,o])=>(s[a]=o,s),{});for(let s of t){let a=s.route.id;if(!e.hasOwnProperty(a)&&i.hasOwnProperty(a)&&s.route.loader&&(n[a]=i[a]),r&&r.hasOwnProperty(a))break}return n}function VD(i){return i?Za(i[1])?{actionData:{}}:{actionData:{[i[0]]:i[1].data}}:{}}function Zd(i,e){return(e?i.slice(0,i.findIndex(r=>r.route.id===e)+1):[...i]).reverse().find(r=>r.route.hasErrorBoundary===!0)||i[0]}function qD(i){let e=i.length===1?i[0]:i.find(t=>t.index||!t.path||t.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:e}],route:e}}function ko(i,{pathname:e,routeId:t,method:r,type:n,message:s}={}){let a="Unknown Server Error",o="Unknown @remix-run/router error";return i===400?(a="Bad Request",r&&e&&t?o=`You made a ${r} request to "${e}" but did not provide a \`loader\` for route "${t}", so there is no way to handle the request.`:n==="invalid-body"&&(o="Unable to encode submission body")):i===403?(a="Forbidden",o=`Route "${t}" does not match URL "${e}"`):i===404?(a="Not Found",o=`No route matches URL "${e}"`):i===405&&(a="Method Not Allowed",r&&e&&t?o=`You made a ${r.toUpperCase()} request to "${e}" but did not provide an \`action\` for route "${t}", so there is no way to handle the request.`:r&&(o=`Invalid request method "${r.toUpperCase()}"`)),new t_(i||500,a,new Error(o),!0)}function rv(i){let e=Object.entries(i);for(let t=e.length-1;t>=0;t--){let[r,n]=e[t];if(nh(n))return{key:r,result:n}}}function w3(i){let e=typeof i=="string"?uc(i):i;return od({...e,hash:""})}function _V(i,e){return i.pathname!==e.pathname||i.search!==e.search?!1:i.hash===""?e.hash!=="":i.hash===e.hash?!0:e.hash!==""}function xV(i){return k3(i.result)&&nV.has(i.result.status)}function Za(i){return i.type==="error"}function nh(i){return(i&&i.type)==="redirect"}function WD(i){return typeof i=="object"&&i!=null&&"type"in i&&"data"in i&&"init"in i&&i.type==="DataWithResponseInit"}function k3(i){return i!=null&&typeof i.status=="number"&&typeof i.statusText=="string"&&typeof i.headers=="object"&&typeof i.body<"u"}function TV(i){return iV.has(i.toUpperCase())}function eo(i){return tV.has(i.toUpperCase())}function HE(i){return new URLSearchParams(i).getAll("index").some(e=>e==="")}function $m(i,e){let t=typeof e=="string"?uc(e).search:e.search;if(i[i.length-1].route.index&&HE(t||""))return i[i.length-1];let r=v3(i);return r[r.length-1]}function GD(i){let{formMethod:e,formAction:t,formEncType:r,text:n,formData:s,json:a}=i;if(!(!e||!t||!r)){if(n!=null)return{formMethod:e,formAction:t,formEncType:r,formData:void 0,json:void 0,text:n};if(s!=null)return{formMethod:e,formAction:t,formEncType:r,formData:s,json:void 0,text:void 0};if(a!==void 0)return{formMethod:e,formAction:t,formEncType:r,formData:void 0,json:a,text:void 0}}}function Zb(i,e){return e?{state:"loading",location:i,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}:{state:"loading",location:i,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function bV(i,e){return{state:"submitting",location:i,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}}function _m(i,e){return i?{state:"loading",formMethod:i.formMethod,formAction:i.formAction,formEncType:i.formEncType,formData:i.formData,json:i.json,text:i.text,data:e}:{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:e}}function SV(i,e){return{state:"submitting",formMethod:i.formMethod,formAction:i.formAction,formEncType:i.formEncType,formData:i.formData,json:i.json,text:i.text,data:e?e.data:void 0}}function Kc(i){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:i}}function CV(i,e){try{let t=i.sessionStorage.getItem(_3);if(t){let r=JSON.parse(t);for(let[n,s]of Object.entries(r||{}))s&&Array.isArray(s)&&e.set(n,new Set(s||[]))}}catch{}}function EV(i,e){if(e.size>0){let t={};for(let[r,n]of e)t[r]=[...n];try{i.sessionStorage.setItem(_3,JSON.stringify(t))}catch(r){pn(!1,`Failed to save applied view transitions in sessionStorage (${r}).`)}}}function wV(){let i,e,t=new Promise((r,n)=>{i=async s=>{r(s);try{await t}catch{}},e=async s=>{n(s);try{await t}catch{}}});return{promise:t,resolve:i,reject:e}}var Dh=j.createContext(null);Dh.displayName="DataRouter";var H0=j.createContext(null);H0.displayName="DataRouterState";var VE=j.createContext({isTransitioning:!1});VE.displayName="ViewTransition";var A3=j.createContext(new Map);A3.displayName="Fetchers";var kV=j.createContext(null);kV.displayName="Await";var _u=j.createContext(null);_u.displayName="Navigation";var _x=j.createContext(null);_x.displayName="Location";var xu=j.createContext({outlet:null,matches:[],isDataRoute:!1});xu.displayName="Route";var qE=j.createContext(null);qE.displayName="RouteError";function AV(i,{relative:e}={}){Kr(V0(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:r}=j.useContext(_u),{hash:n,pathname:s,search:a}=q0(i,{relative:e}),o=s;return t!=="/"&&(o=s==="/"?t:au([t,s])),r.createHref({pathname:o,search:a,hash:n})}function V0(){return j.useContext(_x)!=null}function cc(){return Kr(V0(),"useLocation() may be used only in the context of a <Router> component."),j.useContext(_x).location}var I3="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function D3(i){j.useContext(_u).static||j.useLayoutEffect(i)}function P3(){let{isDataRoute:i}=j.useContext(xu);return i?HV():IV()}function IV(){Kr(V0(),"useNavigate() may be used only in the context of a <Router> component.");let i=j.useContext(Dh),{basename:e,navigator:t}=j.useContext(_u),{matches:r}=j.useContext(xu),{pathname:n}=cc(),s=JSON.stringify($E(r)),a=j.useRef(!1);return D3(()=>{a.current=!0}),j.useCallback((l,u={})=>{if(pn(a.current,I3),!a.current)return;if(typeof l=="number"){t.go(l);return}let c=jE(l,JSON.parse(s),n,u.relative==="path");i==null&&e!=="/"&&(c.pathname=c.pathname==="/"?e:au([e,c.pathname])),(u.replace?t.replace:t.push)(c,u.state,u)},[e,t,s,n,i])}var DV=j.createContext(null);function PV(i){let e=j.useContext(xu).outlet;return e&&j.createElement(DV.Provider,{value:i},e)}function q0(i,{relative:e}={}){let{matches:t}=j.useContext(xu),{pathname:r}=cc(),n=JSON.stringify($E(t));return j.useMemo(()=>jE(i,JSON.parse(n),r,e==="path"),[i,n,r,e])}function RV(i,e,t,r){Kr(V0(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:n,static:s}=j.useContext(_u),{matches:a}=j.useContext(xu),o=a[a.length-1],l=o?o.params:{},u=o?o.pathname:"/",c=o?o.pathnameBase:"/",h=o&&o.route;{let w=h&&h.path||"";R3(u,!h||w.endsWith("*")||w.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${u}" (under <Route path="${w}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${w}"> to <Route path="${w==="/"?"*":`${w}/*`}">.`)}let m=cc(),g;g=m;let y=g.pathname||"/",_=y;if(c!=="/"){let w=c.replace(/^\//,"").split("/");_="/"+y.replace(/^\//,"").split("/").slice(w.length).join("/")}let T=!s&&t&&t.matches&&t.matches.length>0?t.matches:ed(i,{pathname:_});return pn(h||T!=null,`No routes matched location "${g.pathname}${g.search}${g.hash}" `),pn(T==null||T[T.length-1].route.element!==void 0||T[T.length-1].route.Component!==void 0||T[T.length-1].route.lazy!==void 0,`Matched leaf route at location "${g.pathname}${g.search}${g.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`),BV(T&&T.map(w=>Object.assign({},w,{params:Object.assign({},l,w.params),pathname:au([c,n.encodeLocation?n.encodeLocation(w.pathname).pathname:w.pathname]),pathnameBase:w.pathnameBase==="/"?c:au([c,n.encodeLocation?n.encodeLocation(w.pathnameBase).pathname:w.pathnameBase])})),a,t,r)}function LV(){let i=zV(),e=_0(i)?`${i.status} ${i.statusText}`:i instanceof Error?i.message:JSON.stringify(i),t=i instanceof Error?i.stack:null,r="rgba(200,200,200, 0.5)",n={padding:"0.5rem",backgroundColor:r},s={padding:"2px 4px",backgroundColor:r},a=null;return console.error("Error handled by React Router default ErrorBoundary:",i),a=j.createElement(j.Fragment,null,j.createElement("p",null," Hey developer "),j.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",j.createElement("code",{style:s},"ErrorBoundary")," or"," ",j.createElement("code",{style:s},"errorElement")," prop on your route.")),j.createElement(j.Fragment,null,j.createElement("h2",null,"Unexpected Application Error!"),j.createElement("h3",{style:{fontStyle:"italic"}},e),t?j.createElement("pre",{style:n},t):null,a)}var OV=j.createElement(LV,null),MV=class extends j.Component{constructor(i){super(i),this.state={location:i.location,revalidation:i.revalidation,error:i.error}}static getDerivedStateFromError(i){return{error:i}}static getDerivedStateFromProps(i,e){return e.location!==i.location||e.revalidation!=="idle"&&i.revalidation==="idle"?{error:i.error,location:i.location,revalidation:i.revalidation}:{error:i.error!==void 0?i.error:e.error,location:e.location,revalidation:i.revalidation||e.revalidation}}componentDidCatch(i,e){console.error("React Router caught the following error during render",i,e)}render(){return this.state.error!==void 0?j.createElement(xu.Provider,{value:this.props.routeContext},j.createElement(qE.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function FV({routeContext:i,match:e,children:t}){let r=j.useContext(Dh);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),j.createElement(xu.Provider,{value:i},t)}function BV(i,e=[],t=null,r=null){if(i==null){if(!t)return null;if(t.errors)i=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)i=t.matches;else return null}let n=i,s=t?.errors;if(s!=null){let l=n.findIndex(u=>u.route.id&&s?.[u.route.id]!==void 0);Kr(l>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(s).join(",")}`),n=n.slice(0,Math.min(n.length,l+1))}let a=!1,o=-1;if(t)for(let l=0;l<n.length;l++){let u=n[l];if((u.route.HydrateFallback||u.route.hydrateFallbackElement)&&(o=l),u.route.id){let{loaderData:c,errors:h}=t,m=u.route.loader&&!c.hasOwnProperty(u.route.id)&&(!h||h[u.route.id]===void 0);if(u.route.lazy||m){a=!0,o>=0?n=n.slice(0,o+1):n=[n[0]];break}}}return n.reduceRight((l,u,c)=>{let h,m=!1,g=null,y=null;t&&(h=s&&u.route.id?s[u.route.id]:void 0,g=u.route.errorElement||OV,a&&(o<0&&c===0?(R3("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),m=!0,y=null):o===c&&(m=!0,y=u.route.hydrateFallbackElement||null)));let _=e.concat(n.slice(0,c+1)),T=()=>{let E;return h?E=g:m?E=y:u.route.Component?E=j.createElement(u.route.Component,null):u.route.element?E=u.route.element:E=l,j.createElement(FV,{match:u,routeContext:{outlet:l,matches:_,isDataRoute:t!=null},children:E})};return t&&(u.route.ErrorBoundary||u.route.errorElement||c===0)?j.createElement(MV,{location:t.location,revalidation:t.revalidation,component:g,error:h,children:T(),routeContext:{outlet:null,matches:_,isDataRoute:!0}}):T()},null)}function WE(i){return`${i} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function NV(i){let e=j.useContext(Dh);return Kr(e,WE(i)),e}function UV(i){let e=j.useContext(H0);return Kr(e,WE(i)),e}function $V(i){let e=j.useContext(xu);return Kr(e,WE(i)),e}function GE(i){let e=$V(i),t=e.matches[e.matches.length-1];return Kr(t.route.id,`${i} can only be used on routes that contain a unique "id"`),t.route.id}function jV(){return GE("useRouteId")}function zV(){let i=j.useContext(qE),e=UV("useRouteError"),t=GE("useRouteError");return i!==void 0?i:e.errors?.[t]}function HV(){let{router:i}=NV("useNavigate"),e=GE("useNavigate"),t=j.useRef(!1);return D3(()=>{t.current=!0}),j.useCallback(async(n,s={})=>{pn(t.current,I3),t.current&&(typeof n=="number"?i.navigate(n):await i.navigate(n,{fromRouteId:e,...s}))},[i,e])}var KD={};function R3(i,e,t){!e&&!KD[i]&&(KD[i]=!0,pn(!1,t))}var XD={};function YD(i,e){!i&&!XD[e]&&(XD[e]=!0,console.warn(e))}function VV(i){let e={hasErrorBoundary:i.hasErrorBoundary||i.ErrorBoundary!=null||i.errorElement!=null};return i.Component&&(i.element&&pn(!1,"You should not include both `Component` and `element` on your route - `Component` will be used."),Object.assign(e,{element:j.createElement(i.Component),Component:void 0})),i.HydrateFallback&&(i.hydrateFallbackElement&&pn(!1,"You should not include both `HydrateFallback` and `hydrateFallbackElement` on your route - `HydrateFallback` will be used."),Object.assign(e,{hydrateFallbackElement:j.createElement(i.HydrateFallback),HydrateFallback:void 0})),i.ErrorBoundary&&(i.errorElement&&pn(!1,"You should not include both `ErrorBoundary` and `errorElement` on your route - `ErrorBoundary` will be used."),Object.assign(e,{errorElement:j.createElement(i.ErrorBoundary),ErrorBoundary:void 0})),e}var qV=["HydrateFallback","hydrateFallbackElement"],WV=class{constructor(){this.status="pending",this.promise=new Promise((i,e)=>{this.resolve=t=>{this.status==="pending"&&(this.status="resolved",i(t))},this.reject=t=>{this.status==="pending"&&(this.status="rejected",e(t))}})}};function GV({router:i,flushSync:e}){let[t,r]=j.useState(i.state),[n,s]=j.useState(),[a,o]=j.useState({isTransitioning:!1}),[l,u]=j.useState(),[c,h]=j.useState(),[m,g]=j.useState(),y=j.useRef(new Map),_=j.useCallback((D,{deletedFetchers:R,flushSync:A,viewTransitionOpts:L})=>{D.fetchers.forEach((B,M)=>{B.data!==void 0&&y.current.set(M,B.data)}),R.forEach(B=>y.current.delete(B)),YD(A===!1||e!=null,'You provided the `flushSync` option to a router update, but you are not using the `<RouterProvider>` from `react-router/dom` so `ReactDOM.flushSync()` is unavailable.  Please update your app to `import { RouterProvider } from "react-router/dom"` and ensure you have `react-dom` installed as a dependency to use the `flushSync` option.');let F=i.window!=null&&i.window.document!=null&&typeof i.window.document.startViewTransition=="function";if(YD(L==null||F,"You provided the `viewTransition` option to a router update, but you do not appear to be running in a DOM environment as `window.startViewTransition` is not available."),!L||!F){e&&A?e(()=>r(D)):j.startTransition(()=>r(D));return}if(e&&A){e(()=>{c&&(l&&l.resolve(),c.skipTransition()),o({isTransitioning:!0,flushSync:!0,currentLocation:L.currentLocation,nextLocation:L.nextLocation})});let B=i.window.document.startViewTransition(()=>{e(()=>r(D))});B.finished.finally(()=>{e(()=>{u(void 0),h(void 0),s(void 0),o({isTransitioning:!1})})}),e(()=>h(B));return}c?(l&&l.resolve(),c.skipTransition(),g({state:D,currentLocation:L.currentLocation,nextLocation:L.nextLocation})):(s(D),o({isTransitioning:!0,flushSync:!1,currentLocation:L.currentLocation,nextLocation:L.nextLocation}))},[i.window,e,c,l]);j.useLayoutEffect(()=>i.subscribe(_),[i,_]),j.useEffect(()=>{a.isTransitioning&&!a.flushSync&&u(new WV)},[a]),j.useEffect(()=>{if(l&&n&&i.window){let D=n,R=l.promise,A=i.window.document.startViewTransition(async()=>{j.startTransition(()=>r(D)),await R});A.finished.finally(()=>{u(void 0),h(void 0),s(void 0),o({isTransitioning:!1})}),h(A)}},[n,l,i.window]),j.useEffect(()=>{l&&n&&t.location.key===n.location.key&&l.resolve()},[l,c,t.location,n]),j.useEffect(()=>{!a.isTransitioning&&m&&(s(m.state),o({isTransitioning:!0,flushSync:!1,currentLocation:m.currentLocation,nextLocation:m.nextLocation}),g(void 0))},[a.isTransitioning,m]);let T=j.useMemo(()=>({createHref:i.createHref,encodeLocation:i.encodeLocation,go:D=>i.navigate(D),push:(D,R,A)=>i.navigate(D,{state:R,preventScrollReset:A?.preventScrollReset}),replace:(D,R,A)=>i.navigate(D,{replace:!0,state:R,preventScrollReset:A?.preventScrollReset})}),[i]),E=i.basename||"/",w=j.useMemo(()=>({router:i,navigator:T,static:!1,basename:E}),[i,T,E]);return j.createElement(j.Fragment,null,j.createElement(Dh.Provider,{value:w},j.createElement(H0.Provider,{value:t},j.createElement(A3.Provider,{value:y.current},j.createElement(VE.Provider,{value:a},j.createElement(QV,{basename:E,location:t.location,navigationType:t.historyAction,navigator:T},j.createElement(KV,{routes:i.routes,future:i.future,state:t})))))),null)}var KV=j.memo(XV);function XV({routes:i,future:e,state:t}){return RV(i,void 0,t,e)}function YV(i){return PV(i.context)}function QV({basename:i="/",children:e=null,location:t,navigationType:r="POP",navigator:n,static:s=!1}){Kr(!V0(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let a=i.replace(/^\/*/,"/"),o=j.useMemo(()=>({basename:a,navigator:n,static:s,future:{}}),[a,n,s]);typeof t=="string"&&(t=uc(t));let{pathname:l="/",search:u="",hash:c="",state:h=null,key:m="default"}=t,g=j.useMemo(()=>{let y=Oo(l,a);return y==null?null:{location:{pathname:y,search:u,hash:c,state:h,key:m},navigationType:r}},[a,l,u,c,h,m,r]);return pn(g!=null,`<Router basename="${a}"> is not able to match the URL "${l}${u}${c}" because it does not start with the basename, so the <Router> won't render anything.`),g==null?null:j.createElement(_u.Provider,{value:o},j.createElement(_x.Provider,{children:e,value:g}))}var wy="get",ky="application/x-www-form-urlencoded";function xx(i){return i!=null&&typeof i.tagName=="string"}function JV(i){return xx(i)&&i.tagName.toLowerCase()==="button"}function ZV(i){return xx(i)&&i.tagName.toLowerCase()==="form"}function eq(i){return xx(i)&&i.tagName.toLowerCase()==="input"}function tq(i){return!!(i.metaKey||i.altKey||i.ctrlKey||i.shiftKey)}function rq(i,e){return i.button===0&&(!e||e==="_self")&&!tq(i)}var iv=null;function iq(){if(iv===null)try{new FormData(document.createElement("form"),0),iv=!1}catch{iv=!0}return iv}var nq=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function eS(i){return i!=null&&!nq.has(i)?(pn(!1,`"${i}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${ky}"`),null):i}function sq(i,e){let t,r,n,s,a;if(ZV(i)){let o=i.getAttribute("action");r=o?Oo(o,e):null,t=i.getAttribute("method")||wy,n=eS(i.getAttribute("enctype"))||ky,s=new FormData(i)}else if(JV(i)||eq(i)&&(i.type==="submit"||i.type==="image")){let o=i.form;if(o==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let l=i.getAttribute("formaction")||o.getAttribute("action");if(r=l?Oo(l,e):null,t=i.getAttribute("formmethod")||o.getAttribute("method")||wy,n=eS(i.getAttribute("formenctype"))||eS(o.getAttribute("enctype"))||ky,s=new FormData(o,i),!iq()){let{name:u,type:c,value:h}=i;if(c==="image"){let m=u?`${u}.`:"";s.append(`${m}x`,"0"),s.append(`${m}y`,"0")}else u&&s.append(u,h)}}else{if(xx(i))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=wy,r=null,n=ky,a=i}return s&&n==="text/plain"&&(a=s,s=void 0),{action:r,method:t.toLowerCase(),encType:n,formData:s,body:a}}function KE(i,e){if(i===!1||i===null||typeof i>"u")throw new Error(e)}async function aq(i,e){if(i.id in e)return e[i.id];try{let t=await import(i.module);return e[i.id]=t,t}catch(t){return console.error(`Error loading route module \`${i.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function oq(i){return i==null?!1:i.href==null?i.rel==="preload"&&typeof i.imageSrcSet=="string"&&typeof i.imageSizes=="string":typeof i.rel=="string"&&typeof i.href=="string"}async function lq(i,e,t){let r=await Promise.all(i.map(async n=>{let s=e.routes[n.route.id];if(s){let a=await aq(s,t);return a.links?a.links():[]}return[]}));return hq(r.flat(1).filter(oq).filter(n=>n.rel==="stylesheet"||n.rel==="preload").map(n=>n.rel==="stylesheet"?{...n,rel:"prefetch",as:"style"}:{...n,rel:"prefetch"}))}function QD(i,e,t,r,n,s){let a=(l,u)=>t[u]?l.route.id!==t[u].route.id:!0,o=(l,u)=>t[u].pathname!==l.pathname||t[u].route.path?.endsWith("*")&&t[u].params["*"]!==l.params["*"];return s==="assets"?e.filter((l,u)=>a(l,u)||o(l,u)):s==="data"?e.filter((l,u)=>{let c=r.routes[l.route.id];if(!c||!c.hasLoader)return!1;if(a(l,u)||o(l,u))return!0;if(l.route.shouldRevalidate){let h=l.route.shouldRevalidate({currentUrl:new URL(n.pathname+n.search+n.hash,window.origin),currentParams:t[0]?.params||{},nextUrl:new URL(i,window.origin),nextParams:l.params,defaultShouldRevalidate:!0});if(typeof h=="boolean")return h}return!0}):[]}function uq(i,e,{includeHydrateFallback:t}={}){return cq(i.map(r=>{let n=e.routes[r.route.id];if(!n)return[];let s=[n.module];return n.clientActionModule&&(s=s.concat(n.clientActionModule)),n.clientLoaderModule&&(s=s.concat(n.clientLoaderModule)),t&&n.hydrateFallbackModule&&(s=s.concat(n.hydrateFallbackModule)),n.imports&&(s=s.concat(n.imports)),s}).flat(1))}function cq(i){return[...new Set(i)]}function dq(i){let e={},t=Object.keys(i).sort();for(let r of t)e[r]=i[r];return e}function hq(i,e){let t=new Set;return new Set(e),i.reduce((r,n)=>{let s=JSON.stringify(dq(n));return t.has(s)||(t.add(s),r.push({key:s,link:n})),r},[])}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var fq=new Set([100,101,204,205]);function pq(i,e){let t=typeof i=="string"?new URL(i,typeof window>"u"?"server://singlefetch/":window.location.origin):i;return t.pathname==="/"?t.pathname="_root.data":e&&Oo(t.pathname,e)==="/"?t.pathname=`${e.replace(/\/$/,"")}/_root.data`:t.pathname=`${t.pathname.replace(/\/$/,"")}.data`,t}function L3(){let i=j.useContext(Dh);return KE(i,"You must render this element inside a <DataRouterContext.Provider> element"),i}function mq(){let i=j.useContext(H0);return KE(i,"You must render this element inside a <DataRouterStateContext.Provider> element"),i}var XE=j.createContext(void 0);XE.displayName="FrameworkContext";function O3(){let i=j.useContext(XE);return KE(i,"You must render this element inside a <HydratedRouter> element"),i}function gq(i,e){let t=j.useContext(XE),[r,n]=j.useState(!1),[s,a]=j.useState(!1),{onFocus:o,onBlur:l,onMouseEnter:u,onMouseLeave:c,onTouchStart:h}=e,m=j.useRef(null);j.useEffect(()=>{if(i==="render"&&a(!0),i==="viewport"){let _=E=>{E.forEach(w=>{a(w.isIntersecting)})},T=new IntersectionObserver(_,{threshold:.5});return m.current&&T.observe(m.current),()=>{T.disconnect()}}},[i]),j.useEffect(()=>{if(r){let _=setTimeout(()=>{a(!0)},100);return()=>{clearTimeout(_)}}},[r]);let g=()=>{n(!0)},y=()=>{n(!1),a(!1)};return t?i!=="intent"?[s,m,{}]:[s,m,{onFocus:xm(o,g),onBlur:xm(l,y),onMouseEnter:xm(u,g),onMouseLeave:xm(c,y),onTouchStart:xm(h,g)}]:[!1,m,{}]}function xm(i,e){return t=>{i&&i(t),t.defaultPrevented||e(t)}}function vq({page:i,...e}){let{router:t}=L3(),r=j.useMemo(()=>ed(t.routes,i,t.basename),[t.routes,i,t.basename]);return r?j.createElement(_q,{page:i,matches:r,...e}):null}function yq(i){let{manifest:e,routeModules:t}=O3(),[r,n]=j.useState([]);return j.useEffect(()=>{let s=!1;return lq(i,e,t).then(a=>{s||n(a)}),()=>{s=!0}},[i,e,t]),r}function _q({page:i,matches:e,...t}){let r=cc(),{manifest:n,routeModules:s}=O3(),{basename:a}=L3(),{loaderData:o,matches:l}=mq(),u=j.useMemo(()=>QD(i,e,l,n,r,"data"),[i,e,l,n,r]),c=j.useMemo(()=>QD(i,e,l,n,r,"assets"),[i,e,l,n,r]),h=j.useMemo(()=>{if(i===r.pathname+r.search+r.hash)return[];let y=new Set,_=!1;if(e.forEach(E=>{let w=n.routes[E.route.id];!w||!w.hasLoader||(!u.some(D=>D.route.id===E.route.id)&&E.route.id in o&&s[E.route.id]?.shouldRevalidate||w.hasClientLoader?_=!0:y.add(E.route.id))}),y.size===0)return[];let T=pq(i,a);return _&&y.size>0&&T.searchParams.set("_routes",e.filter(E=>y.has(E.route.id)).map(E=>E.route.id).join(",")),[T.pathname+T.search]},[a,o,r,n,u,e,i,s]),m=j.useMemo(()=>uq(c,n),[c,n]),g=yq(c);return j.createElement(j.Fragment,null,h.map(y=>j.createElement("link",{key:y,rel:"prefetch",as:"fetch",href:y,...t})),m.map(y=>j.createElement("link",{key:y,rel:"modulepreload",href:y,...t})),g.map(({key:y,link:_})=>j.createElement("link",{key:y,..._})))}function xq(...i){return e=>{i.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var M3=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{M3&&(window.__reactRouterVersion="7.6.0")}catch{}function Tq(i,e){return lV({basename:e?.basename,unstable_getContext:e?.unstable_getContext,future:e?.future,history:IH({window:e?.window}),hydrationData:bq(),routes:i,mapRouteProperties:VV,hydrationRouteProperties:qV,dataStrategy:e?.dataStrategy,patchRoutesOnNavigation:e?.patchRoutesOnNavigation,window:e?.window}).initialize()}function bq(){let i=window?.__staticRouterHydrationData;return i&&i.errors&&(i={...i,errors:Sq(i.errors)}),i}function Sq(i){if(!i)return null;let e=Object.entries(i),t={};for(let[r,n]of e)if(n&&n.__type==="RouteErrorResponse")t[r]=new t_(n.status,n.statusText,n.data,n.internal===!0);else if(n&&n.__type==="Error"){if(n.__subType){let s=window[n.__subType];if(typeof s=="function")try{let a=new s(n.message);a.stack="",t[r]=a}catch{}}if(t[r]==null){let s=new Error(n.message);s.stack="",t[r]=s}}else t[r]=n;return t}var F3=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,B3=j.forwardRef(function({onClick:e,discover:t="render",prefetch:r="none",relative:n,reloadDocument:s,replace:a,state:o,target:l,to:u,preventScrollReset:c,viewTransition:h,...m},g){let{basename:y}=j.useContext(_u),_=typeof u=="string"&&F3.test(u),T,E=!1;if(typeof u=="string"&&_&&(T=u,M3))try{let M=new URL(window.location.href),k=u.startsWith("//")?new URL(M.protocol+u):new URL(u),q=Oo(k.pathname,y);k.origin===M.origin&&q!=null?u=q+k.search+k.hash:E=!0}catch{pn(!1,`<Link to="${u}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let w=AV(u,{relative:n}),[D,R,A]=gq(r,m),L=kq(u,{replace:a,state:o,target:l,preventScrollReset:c,relative:n,viewTransition:h});function F(M){e&&e(M),M.defaultPrevented||L(M)}let B=j.createElement("a",{...m,...A,href:T||w,onClick:E||s?e:F,ref:xq(g,R),target:l,"data-discover":!_&&t==="render"?"true":void 0});return D&&!_?j.createElement(j.Fragment,null,B,j.createElement(vq,{page:w})):B});B3.displayName="Link";var Cq=j.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:r="",end:n=!1,style:s,to:a,viewTransition:o,children:l,...u},c){let h=q0(a,{relative:u.relative}),m=cc(),g=j.useContext(H0),{navigator:y,basename:_}=j.useContext(_u),T=g!=null&&Rq(h)&&o===!0,E=y.encodeLocation?y.encodeLocation(h).pathname:h.pathname,w=m.pathname,D=g&&g.navigation&&g.navigation.location?g.navigation.location.pathname:null;t||(w=w.toLowerCase(),D=D?D.toLowerCase():null,E=E.toLowerCase()),D&&_&&(D=Oo(D,_)||D);const R=E!=="/"&&E.endsWith("/")?E.length-1:E.length;let A=w===E||!n&&w.startsWith(E)&&w.charAt(R)==="/",L=D!=null&&(D===E||!n&&D.startsWith(E)&&D.charAt(E.length)==="/"),F={isActive:A,isPending:L,isTransitioning:T},B=A?e:void 0,M;typeof r=="function"?M=r(F):M=[r,A?"active":null,L?"pending":null,T?"transitioning":null].filter(Boolean).join(" ");let k=typeof s=="function"?s(F):s;return j.createElement(B3,{...u,"aria-current":B,className:M,ref:c,style:k,to:a,viewTransition:o},typeof l=="function"?l(F):l)});Cq.displayName="NavLink";var Eq=j.forwardRef(({discover:i="render",fetcherKey:e,navigate:t,reloadDocument:r,replace:n,state:s,method:a=wy,action:o,onSubmit:l,relative:u,preventScrollReset:c,viewTransition:h,...m},g)=>{let y=Dq(),_=Pq(o,{relative:u}),T=a.toLowerCase()==="get"?"get":"post",E=typeof o=="string"&&F3.test(o),w=D=>{if(l&&l(D),D.defaultPrevented)return;D.preventDefault();let R=D.nativeEvent.submitter,A=R?.getAttribute("formmethod")||a;y(R||D.currentTarget,{fetcherKey:e,method:A,navigate:t,replace:n,state:s,relative:u,preventScrollReset:c,viewTransition:h})};return j.createElement("form",{ref:g,method:T,action:_,onSubmit:r?l:w,...m,"data-discover":!E&&i==="render"?"true":void 0})});Eq.displayName="Form";function wq(i){return`${i} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function N3(i){let e=j.useContext(Dh);return Kr(e,wq(i)),e}function kq(i,{target:e,replace:t,state:r,preventScrollReset:n,relative:s,viewTransition:a}={}){let o=P3(),l=cc(),u=q0(i,{relative:s});return j.useCallback(c=>{if(rq(c,e)){c.preventDefault();let h=t!==void 0?t:od(l)===od(u);o(i,{replace:h,state:r,preventScrollReset:n,relative:s,viewTransition:a})}},[l,o,u,t,r,e,i,n,s,a])}var Aq=0,Iq=()=>`__${String(++Aq)}__`;function Dq(){let{router:i}=N3("useSubmit"),{basename:e}=j.useContext(_u),t=jV();return j.useCallback(async(r,n={})=>{let{action:s,method:a,encType:o,formData:l,body:u}=sq(r,e);if(n.navigate===!1){let c=n.fetcherKey||Iq();await i.fetch(c,t,n.action||s,{preventScrollReset:n.preventScrollReset,formData:l,body:u,formMethod:n.method||a,formEncType:n.encType||o,flushSync:n.flushSync})}else await i.navigate(n.action||s,{preventScrollReset:n.preventScrollReset,formData:l,body:u,formMethod:n.method||a,formEncType:n.encType||o,replace:n.replace,state:n.state,fromRouteId:t,flushSync:n.flushSync,viewTransition:n.viewTransition})},[i,e,t])}function Pq(i,{relative:e}={}){let{basename:t}=j.useContext(_u),r=j.useContext(xu);Kr(r,"useFormAction must be used inside a RouteContext");let[n]=r.matches.slice(-1),s={...q0(i||".",{relative:e})},a=cc();if(i==null){s.search=a.search;let o=new URLSearchParams(s.search),l=o.getAll("index");if(l.some(c=>c==="")){o.delete("index"),l.filter(h=>h).forEach(h=>o.append("index",h));let c=o.toString();s.search=c?`?${c}`:""}}return(!i||i===".")&&n.route.index&&(s.search=s.search?s.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(s.pathname=s.pathname==="/"?t:au([t,s.pathname])),od(s)}function Rq(i,e={}){let t=j.useContext(VE);Kr(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=N3("useViewTransitionState"),n=q0(i,{relative:e.relative});if(!t.isTransitioning)return!1;let s=Oo(t.currentLocation.pathname,r)||t.currentLocation.pathname,a=Oo(t.nextLocation.pathname,r)||t.nextLocation.pathname;return e_(n.pathname,a)!=null||e_(n.pathname,s)!=null}[...fq];var kp=DM();const nv=ia(kp);/**
 * react-router v7.6.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Lq(i){return j.createElement(GV,{flushSync:kp.flushSync,...i})}function Y1(i,...e){const t=new URL(`https://mui.com/production-error/?code=${i}`);return e.forEach(r=>t.searchParams.append("args[]",r)),`Minified MUI error #${i}; visit ${t} for the full message.`}function Jt(){return Jt=Object.assign?Object.assign.bind():function(i){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(i[r]=t[r])}return i},Jt.apply(null,arguments)}function Oq(i){if(i.sheet)return i.sheet;for(var e=0;e<document.styleSheets.length;e++)if(document.styleSheets[e].ownerNode===i)return document.styleSheets[e]}function Mq(i){var e=document.createElement("style");return e.setAttribute("data-emotion",i.key),i.nonce!==void 0&&e.setAttribute("nonce",i.nonce),e.appendChild(document.createTextNode("")),e.setAttribute("data-s",""),e}var Fq=(function(){function i(t){var r=this;this._insertTag=function(n){var s;r.tags.length===0?r.insertionPoint?s=r.insertionPoint.nextSibling:r.prepend?s=r.container.firstChild:s=r.before:s=r.tags[r.tags.length-1].nextSibling,r.container.insertBefore(n,s),r.tags.push(n)},this.isSpeedy=t.speedy===void 0?!0:t.speedy,this.tags=[],this.ctr=0,this.nonce=t.nonce,this.key=t.key,this.container=t.container,this.prepend=t.prepend,this.insertionPoint=t.insertionPoint,this.before=null}var e=i.prototype;return e.hydrate=function(r){r.forEach(this._insertTag)},e.insert=function(r){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(Mq(this));var n=this.tags[this.tags.length-1];if(this.isSpeedy){var s=Oq(n);try{s.insertRule(r,s.cssRules.length)}catch{}}else n.appendChild(document.createTextNode(r));this.ctr++},e.flush=function(){this.tags.forEach(function(r){var n;return(n=r.parentNode)==null?void 0:n.removeChild(r)}),this.tags=[],this.ctr=0},i})(),Is="-ms-",i_="-moz-",fi="-webkit-",U3="comm",YE="rule",QE="decl",Bq="@import",$3="@keyframes",Nq="@layer",Uq=Math.abs,Tx=String.fromCharCode,$q=Object.assign;function jq(i,e){return cs(i,0)^45?(((e<<2^cs(i,0))<<2^cs(i,1))<<2^cs(i,2))<<2^cs(i,3):0}function j3(i){return i.trim()}function zq(i,e){return(i=e.exec(i))?i[0]:i}function pi(i,e,t){return i.replace(e,t)}function Q1(i,e){return i.indexOf(e)}function cs(i,e){return i.charCodeAt(e)|0}function x0(i,e,t){return i.slice(e,t)}function Vl(i){return i.length}function JE(i){return i.length}function sv(i,e){return e.push(i),i}function Hq(i,e){return i.map(e).join("")}var bx=1,tp=1,z3=0,Ra=0,Sn=0,Ap="";function Sx(i,e,t,r,n,s,a){return{value:i,root:e,parent:t,type:r,props:n,children:s,line:bx,column:tp,length:a,return:""}}function Tm(i,e){return $q(Sx("",null,null,"",null,null,0),i,{length:-i.length},e)}function Vq(){return Sn}function qq(){return Sn=Ra>0?cs(Ap,--Ra):0,tp--,Sn===10&&(tp=1,bx--),Sn}function io(){return Sn=Ra<z3?cs(Ap,Ra++):0,tp++,Sn===10&&(tp=1,bx++),Sn}function ou(){return cs(Ap,Ra)}function Ay(){return Ra}function W0(i,e){return x0(Ap,i,e)}function T0(i){switch(i){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function H3(i){return bx=tp=1,z3=Vl(Ap=i),Ra=0,[]}function V3(i){return Ap="",i}function Iy(i){return j3(W0(Ra-1,J1(i===91?i+2:i===40?i+1:i)))}function Wq(i){for(;(Sn=ou())&&Sn<33;)io();return T0(i)>2||T0(Sn)>3?"":" "}function Gq(i,e){for(;--e&&io()&&!(Sn<48||Sn>102||Sn>57&&Sn<65||Sn>70&&Sn<97););return W0(i,Ay()+(e<6&&ou()==32&&io()==32))}function J1(i){for(;io();)switch(Sn){case i:return Ra;case 34:case 39:i!==34&&i!==39&&J1(Sn);break;case 40:i===41&&J1(i);break;case 92:io();break}return Ra}function Kq(i,e){for(;io()&&i+Sn!==57;)if(i+Sn===84&&ou()===47)break;return"/*"+W0(e,Ra-1)+"*"+Tx(i===47?i:io())}function Xq(i){for(;!T0(ou());)io();return W0(i,Ra)}function Yq(i){return V3(Dy("",null,null,null,[""],i=H3(i),0,[0],i))}function Dy(i,e,t,r,n,s,a,o,l){for(var u=0,c=0,h=a,m=0,g=0,y=0,_=1,T=1,E=1,w=0,D="",R=n,A=s,L=r,F=D;T;)switch(y=w,w=io()){case 40:if(y!=108&&cs(F,h-1)==58){Q1(F+=pi(Iy(w),"&","&\f"),"&\f")!=-1&&(E=-1);break}case 34:case 39:case 91:F+=Iy(w);break;case 9:case 10:case 13:case 32:F+=Wq(y);break;case 92:F+=Gq(Ay()-1,7);continue;case 47:switch(ou()){case 42:case 47:sv(Qq(Kq(io(),Ay()),e,t),l);break;default:F+="/"}break;case 123*_:o[u++]=Vl(F)*E;case 125*_:case 59:case 0:switch(w){case 0:case 125:T=0;case 59+c:E==-1&&(F=pi(F,/\f/g,"")),g>0&&Vl(F)-h&&sv(g>32?ZD(F+";",r,t,h-1):ZD(pi(F," ","")+";",r,t,h-2),l);break;case 59:F+=";";default:if(sv(L=JD(F,e,t,u,c,n,o,D,R=[],A=[],h),s),w===123)if(c===0)Dy(F,e,L,L,R,s,h,o,A);else switch(m===99&&cs(F,3)===110?100:m){case 100:case 108:case 109:case 115:Dy(i,L,L,r&&sv(JD(i,L,L,0,0,n,o,D,n,R=[],h),A),n,A,h,o,r?R:A);break;default:Dy(F,L,L,L,[""],A,0,o,A)}}u=c=g=0,_=E=1,D=F="",h=a;break;case 58:h=1+Vl(F),g=y;default:if(_<1){if(w==123)--_;else if(w==125&&_++==0&&qq()==125)continue}switch(F+=Tx(w),w*_){case 38:E=c>0?1:(F+="\f",-1);break;case 44:o[u++]=(Vl(F)-1)*E,E=1;break;case 64:ou()===45&&(F+=Iy(io())),m=ou(),c=h=Vl(D=F+=Xq(Ay())),w++;break;case 45:y===45&&Vl(F)==2&&(_=0)}}return s}function JD(i,e,t,r,n,s,a,o,l,u,c){for(var h=n-1,m=n===0?s:[""],g=JE(m),y=0,_=0,T=0;y<r;++y)for(var E=0,w=x0(i,h+1,h=Uq(_=a[y])),D=i;E<g;++E)(D=j3(_>0?m[E]+" "+w:pi(w,/&\f/g,m[E])))&&(l[T++]=D);return Sx(i,e,t,n===0?YE:o,l,u,c)}function Qq(i,e,t){return Sx(i,e,t,U3,Tx(Vq()),x0(i,2,-2),0)}function ZD(i,e,t,r){return Sx(i,e,t,QE,x0(i,0,r),x0(i,r+1,-1),r)}function Uf(i,e){for(var t="",r=JE(i),n=0;n<r;n++)t+=e(i[n],n,i,e)||"";return t}function Jq(i,e,t,r){switch(i.type){case Nq:if(i.children.length)break;case Bq:case QE:return i.return=i.return||i.value;case U3:return"";case $3:return i.return=i.value+"{"+Uf(i.children,r)+"}";case YE:i.value=i.props.join(",")}return Vl(t=Uf(i.children,r))?i.return=i.value+"{"+t+"}":""}function Zq(i){var e=JE(i);return function(t,r,n,s){for(var a="",o=0;o<e;o++)a+=i[o](t,r,n,s)||"";return a}}function eW(i){return function(e){e.root||(e=e.return)&&i(e)}}function q3(i){var e=Object.create(null);return function(t){return e[t]===void 0&&(e[t]=i(t)),e[t]}}var tW=function(e,t,r){for(var n=0,s=0;n=s,s=ou(),n===38&&s===12&&(t[r]=1),!T0(s);)io();return W0(e,Ra)},rW=function(e,t){var r=-1,n=44;do switch(T0(n)){case 0:n===38&&ou()===12&&(t[r]=1),e[r]+=tW(Ra-1,t,r);break;case 2:e[r]+=Iy(n);break;case 4:if(n===44){e[++r]=ou()===58?"&\f":"",t[r]=e[r].length;break}default:e[r]+=Tx(n)}while(n=io());return e},iW=function(e,t){return V3(rW(H3(e),t))},eP=new WeakMap,nW=function(e){if(!(e.type!=="rule"||!e.parent||e.length<1)){for(var t=e.value,r=e.parent,n=e.column===r.column&&e.line===r.line;r.type!=="rule";)if(r=r.parent,!r)return;if(!(e.props.length===1&&t.charCodeAt(0)!==58&&!eP.get(r))&&!n){eP.set(e,!0);for(var s=[],a=iW(t,s),o=r.props,l=0,u=0;l<a.length;l++)for(var c=0;c<o.length;c++,u++)e.props[u]=s[l]?a[l].replace(/&\f/g,o[c]):o[c]+" "+a[l]}}},sW=function(e){if(e.type==="decl"){var t=e.value;t.charCodeAt(0)===108&&t.charCodeAt(2)===98&&(e.return="",e.value="")}};function W3(i,e){switch(jq(i,e)){case 5103:return fi+"print-"+i+i;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return fi+i+i;case 5349:case 4246:case 4810:case 6968:case 2756:return fi+i+i_+i+Is+i+i;case 6828:case 4268:return fi+i+Is+i+i;case 6165:return fi+i+Is+"flex-"+i+i;case 5187:return fi+i+pi(i,/(\w+).+(:[^]+)/,fi+"box-$1$2"+Is+"flex-$1$2")+i;case 5443:return fi+i+Is+"flex-item-"+pi(i,/flex-|-self/,"")+i;case 4675:return fi+i+Is+"flex-line-pack"+pi(i,/align-content|flex-|-self/,"")+i;case 5548:return fi+i+Is+pi(i,"shrink","negative")+i;case 5292:return fi+i+Is+pi(i,"basis","preferred-size")+i;case 6060:return fi+"box-"+pi(i,"-grow","")+fi+i+Is+pi(i,"grow","positive")+i;case 4554:return fi+pi(i,/([^-])(transform)/g,"$1"+fi+"$2")+i;case 6187:return pi(pi(pi(i,/(zoom-|grab)/,fi+"$1"),/(image-set)/,fi+"$1"),i,"")+i;case 5495:case 3959:return pi(i,/(image-set\([^]*)/,fi+"$1$`$1");case 4968:return pi(pi(i,/(.+:)(flex-)?(.*)/,fi+"box-pack:$3"+Is+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+fi+i+i;case 4095:case 3583:case 4068:case 2532:return pi(i,/(.+)-inline(.+)/,fi+"$1$2")+i;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(Vl(i)-1-e>6)switch(cs(i,e+1)){case 109:if(cs(i,e+4)!==45)break;case 102:return pi(i,/(.+:)(.+)-([^]+)/,"$1"+fi+"$2-$3$1"+i_+(cs(i,e+3)==108?"$3":"$2-$3"))+i;case 115:return~Q1(i,"stretch")?W3(pi(i,"stretch","fill-available"),e)+i:i}break;case 4949:if(cs(i,e+1)!==115)break;case 6444:switch(cs(i,Vl(i)-3-(~Q1(i,"!important")&&10))){case 107:return pi(i,":",":"+fi)+i;case 101:return pi(i,/(.+:)([^;!]+)(;|!.+)?/,"$1"+fi+(cs(i,14)===45?"inline-":"")+"box$3$1"+fi+"$2$3$1"+Is+"$2box$3")+i}break;case 5936:switch(cs(i,e+11)){case 114:return fi+i+Is+pi(i,/[svh]\w+-[tblr]{2}/,"tb")+i;case 108:return fi+i+Is+pi(i,/[svh]\w+-[tblr]{2}/,"tb-rl")+i;case 45:return fi+i+Is+pi(i,/[svh]\w+-[tblr]{2}/,"lr")+i}return fi+i+Is+i+i}return i}var aW=function(e,t,r,n){if(e.length>-1&&!e.return)switch(e.type){case QE:e.return=W3(e.value,e.length);break;case $3:return Uf([Tm(e,{value:pi(e.value,"@","@"+fi)})],n);case YE:if(e.length)return Hq(e.props,function(s){switch(zq(s,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return Uf([Tm(e,{props:[pi(s,/:(read-\w+)/,":"+i_+"$1")]})],n);case"::placeholder":return Uf([Tm(e,{props:[pi(s,/:(plac\w+)/,":"+fi+"input-$1")]}),Tm(e,{props:[pi(s,/:(plac\w+)/,":"+i_+"$1")]}),Tm(e,{props:[pi(s,/:(plac\w+)/,Is+"input-$1")]})],n)}return""})}},oW=[aW],lW=function(e){var t=e.key;if(t==="css"){var r=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(r,function(_){var T=_.getAttribute("data-emotion");T.indexOf(" ")!==-1&&(document.head.appendChild(_),_.setAttribute("data-s",""))})}var n=e.stylisPlugins||oW,s={},a,o=[];a=e.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+t+' "]'),function(_){for(var T=_.getAttribute("data-emotion").split(" "),E=1;E<T.length;E++)s[T[E]]=!0;o.push(_)});var l,u=[nW,sW];{var c,h=[Jq,eW(function(_){c.insert(_)})],m=Zq(u.concat(n,h)),g=function(T){return Uf(Yq(T),m)};l=function(T,E,w,D){c=w,g(T?T+"{"+E.styles+"}":E.styles),D&&(y.inserted[E.name]=!0)}}var y={key:t,sheet:new Fq({key:t,container:a,nonce:e.nonce,speedy:e.speedy,prepend:e.prepend,insertionPoint:e.insertionPoint}),nonce:e.nonce,inserted:s,registered:{},insert:l};return y.sheet.hydrate(o),y},tS={exports:{}},vi={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tP;function uW(){if(tP)return vi;tP=1;var i=typeof Symbol=="function"&&Symbol.for,e=i?Symbol.for("react.element"):60103,t=i?Symbol.for("react.portal"):60106,r=i?Symbol.for("react.fragment"):60107,n=i?Symbol.for("react.strict_mode"):60108,s=i?Symbol.for("react.profiler"):60114,a=i?Symbol.for("react.provider"):60109,o=i?Symbol.for("react.context"):60110,l=i?Symbol.for("react.async_mode"):60111,u=i?Symbol.for("react.concurrent_mode"):60111,c=i?Symbol.for("react.forward_ref"):60112,h=i?Symbol.for("react.suspense"):60113,m=i?Symbol.for("react.suspense_list"):60120,g=i?Symbol.for("react.memo"):60115,y=i?Symbol.for("react.lazy"):60116,_=i?Symbol.for("react.block"):60121,T=i?Symbol.for("react.fundamental"):60117,E=i?Symbol.for("react.responder"):60118,w=i?Symbol.for("react.scope"):60119;function D(A){if(typeof A=="object"&&A!==null){var L=A.$$typeof;switch(L){case e:switch(A=A.type,A){case l:case u:case r:case s:case n:case h:return A;default:switch(A=A&&A.$$typeof,A){case o:case c:case y:case g:case a:return A;default:return L}}case t:return L}}}function R(A){return D(A)===u}return vi.AsyncMode=l,vi.ConcurrentMode=u,vi.ContextConsumer=o,vi.ContextProvider=a,vi.Element=e,vi.ForwardRef=c,vi.Fragment=r,vi.Lazy=y,vi.Memo=g,vi.Portal=t,vi.Profiler=s,vi.StrictMode=n,vi.Suspense=h,vi.isAsyncMode=function(A){return R(A)||D(A)===l},vi.isConcurrentMode=R,vi.isContextConsumer=function(A){return D(A)===o},vi.isContextProvider=function(A){return D(A)===a},vi.isElement=function(A){return typeof A=="object"&&A!==null&&A.$$typeof===e},vi.isForwardRef=function(A){return D(A)===c},vi.isFragment=function(A){return D(A)===r},vi.isLazy=function(A){return D(A)===y},vi.isMemo=function(A){return D(A)===g},vi.isPortal=function(A){return D(A)===t},vi.isProfiler=function(A){return D(A)===s},vi.isStrictMode=function(A){return D(A)===n},vi.isSuspense=function(A){return D(A)===h},vi.isValidElementType=function(A){return typeof A=="string"||typeof A=="function"||A===r||A===u||A===s||A===n||A===h||A===m||typeof A=="object"&&A!==null&&(A.$$typeof===y||A.$$typeof===g||A.$$typeof===a||A.$$typeof===o||A.$$typeof===c||A.$$typeof===T||A.$$typeof===E||A.$$typeof===w||A.$$typeof===_)},vi.typeOf=D,vi}var rP;function cW(){return rP||(rP=1,tS.exports=uW()),tS.exports}var rS,iP;function dW(){if(iP)return rS;iP=1;var i=cW(),e={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},t={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},r={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},n={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},s={};s[i.ForwardRef]=r,s[i.Memo]=n;function a(y){return i.isMemo(y)?n:s[y.$$typeof]||e}var o=Object.defineProperty,l=Object.getOwnPropertyNames,u=Object.getOwnPropertySymbols,c=Object.getOwnPropertyDescriptor,h=Object.getPrototypeOf,m=Object.prototype;function g(y,_,T){if(typeof _!="string"){if(m){var E=h(_);E&&E!==m&&g(y,E,T)}var w=l(_);u&&(w=w.concat(u(_)));for(var D=a(y),R=a(_),A=0;A<w.length;++A){var L=w[A];if(!t[L]&&!(T&&T[L])&&!(R&&R[L])&&!(D&&D[L])){var F=c(_,L);try{o(y,L,F)}catch{}}}}return y}return rS=g,rS}dW();var hW=!0;function G3(i,e,t){var r="";return t.split(" ").forEach(function(n){i[n]!==void 0?e.push(i[n]+";"):n&&(r+=n+" ")}),r}var ZE=function(e,t,r){var n=e.key+"-"+t.name;(r===!1||hW===!1)&&e.registered[n]===void 0&&(e.registered[n]=t.styles)},ew=function(e,t,r){ZE(e,t,r);var n=e.key+"-"+t.name;if(e.inserted[t.name]===void 0){var s=t;do e.insert(t===s?"."+n:"",s,e.sheet,!0),s=s.next;while(s!==void 0)}};function fW(i){for(var e=0,t,r=0,n=i.length;n>=4;++r,n-=4)t=i.charCodeAt(r)&255|(i.charCodeAt(++r)&255)<<8|(i.charCodeAt(++r)&255)<<16|(i.charCodeAt(++r)&255)<<24,t=(t&65535)*1540483477+((t>>>16)*59797<<16),t^=t>>>24,e=(t&65535)*1540483477+((t>>>16)*59797<<16)^(e&65535)*1540483477+((e>>>16)*59797<<16);switch(n){case 3:e^=(i.charCodeAt(r+2)&255)<<16;case 2:e^=(i.charCodeAt(r+1)&255)<<8;case 1:e^=i.charCodeAt(r)&255,e=(e&65535)*1540483477+((e>>>16)*59797<<16)}return e^=e>>>13,e=(e&65535)*1540483477+((e>>>16)*59797<<16),((e^e>>>15)>>>0).toString(36)}var pW={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,scale:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},mW=/[A-Z]|^ms/g,gW=/_EMO_([^_]+?)_([^]*?)_EMO_/g,K3=function(e){return e.charCodeAt(1)===45},nP=function(e){return e!=null&&typeof e!="boolean"},iS=q3(function(i){return K3(i)?i:i.replace(mW,"-$&").toLowerCase()}),sP=function(e,t){switch(e){case"animation":case"animationName":if(typeof t=="string")return t.replace(gW,function(r,n,s){return ql={name:n,styles:s,next:ql},n})}return pW[e]!==1&&!K3(e)&&typeof t=="number"&&t!==0?t+"px":t};function b0(i,e,t){if(t==null)return"";var r=t;if(r.__emotion_styles!==void 0)return r;switch(typeof t){case"boolean":return"";case"object":{var n=t;if(n.anim===1)return ql={name:n.name,styles:n.styles,next:ql},n.name;var s=t;if(s.styles!==void 0){var a=s.next;if(a!==void 0)for(;a!==void 0;)ql={name:a.name,styles:a.styles,next:ql},a=a.next;var o=s.styles+";";return o}return vW(i,e,t)}case"function":{if(i!==void 0){var l=ql,u=t(i);return ql=l,b0(i,e,u)}break}}var c=t;if(e==null)return c;var h=e[c];return h!==void 0?h:c}function vW(i,e,t){var r="";if(Array.isArray(t))for(var n=0;n<t.length;n++)r+=b0(i,e,t[n])+";";else for(var s in t){var a=t[s];if(typeof a!="object"){var o=a;e!=null&&e[o]!==void 0?r+=s+"{"+e[o]+"}":nP(o)&&(r+=iS(s)+":"+sP(s,o)+";")}else if(Array.isArray(a)&&typeof a[0]=="string"&&(e==null||e[a[0]]===void 0))for(var l=0;l<a.length;l++)nP(a[l])&&(r+=iS(s)+":"+sP(s,a[l])+";");else{var u=b0(i,e,a);switch(s){case"animation":case"animationName":{r+=iS(s)+":"+u+";";break}default:r+=s+"{"+u+"}"}}}return r}var aP=/label:\s*([^\s;{]+)\s*(;|$)/g,ql;function G0(i,e,t){if(i.length===1&&typeof i[0]=="object"&&i[0]!==null&&i[0].styles!==void 0)return i[0];var r=!0,n="";ql=void 0;var s=i[0];if(s==null||s.raw===void 0)r=!1,n+=b0(t,e,s);else{var a=s;n+=a[0]}for(var o=1;o<i.length;o++)if(n+=b0(t,e,i[o]),r){var l=s;n+=l[o]}aP.lastIndex=0;for(var u="",c;(c=aP.exec(n))!==null;)u+="-"+c[1];var h=fW(n)+u;return{name:h,styles:n,next:ql}}var yW=function(e){return e()},X3=qy.useInsertionEffect?qy.useInsertionEffect:!1,Y3=X3||yW,oP=X3||j.useLayoutEffect,Q3=j.createContext(typeof HTMLElement<"u"?lW({key:"css"}):null);Q3.Provider;var tw=function(e){return j.forwardRef(function(t,r){var n=j.useContext(Q3);return e(t,n,r)})},K0=j.createContext({}),rw={}.hasOwnProperty,Z1="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",_W=function(e,t){var r={};for(var n in t)rw.call(t,n)&&(r[n]=t[n]);return r[Z1]=e,r},xW=function(e){var t=e.cache,r=e.serialized,n=e.isStringTag;return ZE(t,r,n),Y3(function(){return ew(t,r,n)}),null},TW=tw(function(i,e,t){var r=i.css;typeof r=="string"&&e.registered[r]!==void 0&&(r=e.registered[r]);var n=i[Z1],s=[r],a="";typeof i.className=="string"?a=G3(e.registered,s,i.className):i.className!=null&&(a=i.className+" ");var o=G0(s,void 0,j.useContext(K0));a+=e.key+"-"+o.name;var l={};for(var u in i)rw.call(i,u)&&u!=="css"&&u!==Z1&&(l[u]=i[u]);return l.className=a,t&&(l.ref=t),j.createElement(j.Fragment,null,j.createElement(xW,{cache:e,serialized:o,isStringTag:typeof n=="string"}),j.createElement(n,l))}),bW=TW,lP=function(e,t){var r=arguments;if(t==null||!rw.call(t,"css"))return j.createElement.apply(void 0,r);var n=r.length,s=new Array(n);s[0]=bW,s[1]=_W(e,t);for(var a=2;a<n;a++)s[a]=r[a];return j.createElement.apply(null,s)};(function(i){var e;e||(e=i.JSX||(i.JSX={}))})(lP||(lP={}));var SW=tw(function(i,e){var t=i.styles,r=G0([t],void 0,j.useContext(K0)),n=j.useRef();return oP(function(){var s=e.key+"-global",a=new e.sheet.constructor({key:s,nonce:e.sheet.nonce,container:e.sheet.container,speedy:e.sheet.isSpeedy}),o=!1,l=document.querySelector('style[data-emotion="'+s+" "+r.name+'"]');return e.sheet.tags.length&&(a.before=e.sheet.tags[0]),l!==null&&(o=!0,l.setAttribute("data-emotion",s),a.hydrate([l])),n.current=[a,o],function(){a.flush()}},[e]),oP(function(){var s=n.current,a=s[0],o=s[1];if(o){s[1]=!1;return}if(r.next!==void 0&&ew(e,r.next,!0),a.tags.length){var l=a.tags[a.tags.length-1].nextElementSibling;a.before=l,a.flush()}e.insert("",r,a,!1)},[e,r.name]),null});function iw(){for(var i=arguments.length,e=new Array(i),t=0;t<i;t++)e[t]=arguments[t];return G0(e)}function X0(){var i=iw.apply(void 0,arguments),e="animation-"+i.name;return{name:e,styles:"@keyframes "+e+"{"+i.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}}var CW=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|disableRemotePlayback|download|draggable|encType|enterKeyHint|fetchpriority|fetchPriority|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,EW=q3(function(i){return CW.test(i)||i.charCodeAt(0)===111&&i.charCodeAt(1)===110&&i.charCodeAt(2)<91}),wW=EW,kW=function(e){return e!=="theme"},uP=function(e){return typeof e=="string"&&e.charCodeAt(0)>96?wW:kW},cP=function(e,t,r){var n;if(t){var s=t.shouldForwardProp;n=e.__emotion_forwardProp&&s?function(a){return e.__emotion_forwardProp(a)&&s(a)}:s}return typeof n!="function"&&r&&(n=e.__emotion_forwardProp),n},AW=function(e){var t=e.cache,r=e.serialized,n=e.isStringTag;return ZE(t,r,n),Y3(function(){return ew(t,r,n)}),null},IW=function i(e,t){var r=e.__emotion_real===e,n=r&&e.__emotion_base||e,s,a;t!==void 0&&(s=t.label,a=t.target);var o=cP(e,t,r),l=o||uP(n),u=!l("as");return function(){var c=arguments,h=r&&e.__emotion_styles!==void 0?e.__emotion_styles.slice(0):[];if(s!==void 0&&h.push("label:"+s+";"),c[0]==null||c[0].raw===void 0)h.push.apply(h,c);else{var m=c[0];h.push(m[0]);for(var g=c.length,y=1;y<g;y++)h.push(c[y],m[y])}var _=tw(function(T,E,w){var D=u&&T.as||n,R="",A=[],L=T;if(T.theme==null){L={};for(var F in T)L[F]=T[F];L.theme=j.useContext(K0)}typeof T.className=="string"?R=G3(E.registered,A,T.className):T.className!=null&&(R=T.className+" ");var B=G0(h.concat(A),E.registered,L);R+=E.key+"-"+B.name,a!==void 0&&(R+=" "+a);var M=u&&o===void 0?uP(D):l,k={};for(var q in T)u&&q==="as"||M(q)&&(k[q]=T[q]);return k.className=R,w&&(k.ref=w),j.createElement(j.Fragment,null,j.createElement(AW,{cache:E,serialized:B,isStringTag:typeof D=="string"}),j.createElement(D,k))});return _.displayName=s!==void 0?s:"Styled("+(typeof n=="string"?n:n.displayName||n.name||"Component")+")",_.defaultProps=e.defaultProps,_.__emotion_real=_,_.__emotion_base=n,_.__emotion_styles=h,_.__emotion_forwardProp=o,Object.defineProperty(_,"toString",{value:function(){return"."+a}}),_.withComponent=function(T,E){var w=i(T,Jt({},t,E,{shouldForwardProp:cP(_,E,!0)}));return w.apply(void 0,h)},_}},DW=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"],eC=IW.bind(null);DW.forEach(function(i){eC[i]=eC(i)});var nS={exports:{}},sS,dP;function PW(){if(dP)return sS;dP=1;var i="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return sS=i,sS}var aS,hP;function RW(){if(hP)return aS;hP=1;var i=PW();function e(){}function t(){}return t.resetWarningCache=e,aS=function(){function r(a,o,l,u,c,h){if(h!==i){var m=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw m.name="Invariant Violation",m}}r.isRequired=r;function n(){return r}var s={array:r,bigint:r,bool:r,func:r,number:r,object:r,string:r,symbol:r,any:r,arrayOf:n,element:r,elementType:r,instanceOf:n,node:r,objectOf:n,oneOf:n,oneOfType:n,shape:n,exact:n,checkPropTypes:t,resetWarningCache:e};return s.PropTypes=s,s},aS}var fP;function LW(){return fP||(fP=1,nS.exports=RW()()),nS.exports}var OW=LW();const sl=ia(OW);function MW(i){return i==null||Object.keys(i).length===0}function J3(i){const{styles:e,defaultTheme:t={}}=i,r=typeof e=="function"?n=>e(MW(n)?t:n):e;return V.jsx(SW,{styles:r})}function Z3(i,e){return eC(i,e)}function FW(i,e){Array.isArray(i.__emotion_styles)&&(i.__emotion_styles=e(i.__emotion_styles))}const pP=[];function mP(i){return pP[0]=i,G0(pP)}var oS={exports:{}},Si={};/**
 * @license React
 * react-is.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gP;function BW(){if(gP)return Si;gP=1;var i=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),n=Symbol.for("react.profiler"),s=Symbol.for("react.consumer"),a=Symbol.for("react.context"),o=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),u=Symbol.for("react.suspense_list"),c=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),m=Symbol.for("react.view_transition"),g=Symbol.for("react.client.reference");function y(_){if(typeof _=="object"&&_!==null){var T=_.$$typeof;switch(T){case i:switch(_=_.type,_){case t:case n:case r:case l:case u:case m:return _;default:switch(_=_&&_.$$typeof,_){case a:case o:case h:case c:return _;case s:return _;default:return T}}case e:return T}}}return Si.ContextConsumer=s,Si.ContextProvider=a,Si.Element=i,Si.ForwardRef=o,Si.Fragment=t,Si.Lazy=h,Si.Memo=c,Si.Portal=e,Si.Profiler=n,Si.StrictMode=r,Si.Suspense=l,Si.SuspenseList=u,Si.isContextConsumer=function(_){return y(_)===s},Si.isContextProvider=function(_){return y(_)===a},Si.isElement=function(_){return typeof _=="object"&&_!==null&&_.$$typeof===i},Si.isForwardRef=function(_){return y(_)===o},Si.isFragment=function(_){return y(_)===t},Si.isLazy=function(_){return y(_)===h},Si.isMemo=function(_){return y(_)===c},Si.isPortal=function(_){return y(_)===e},Si.isProfiler=function(_){return y(_)===n},Si.isStrictMode=function(_){return y(_)===r},Si.isSuspense=function(_){return y(_)===l},Si.isSuspenseList=function(_){return y(_)===u},Si.isValidElementType=function(_){return typeof _=="string"||typeof _=="function"||_===t||_===n||_===r||_===l||_===u||typeof _=="object"&&_!==null&&(_.$$typeof===h||_.$$typeof===c||_.$$typeof===a||_.$$typeof===s||_.$$typeof===o||_.$$typeof===g||_.getModuleId!==void 0)},Si.typeOf=y,Si}var vP;function NW(){return vP||(vP=1,oS.exports=BW()),oS.exports}var Cx=NW();function td(i){if(typeof i!="object"||i===null)return!1;const e=Object.getPrototypeOf(i);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in i)&&!(Symbol.iterator in i)}function eF(i){if(j.isValidElement(i)||Cx.isValidElementType(i)||!td(i))return i;const e={};return Object.keys(i).forEach(t=>{e[t]=eF(i[t])}),e}function rc(i,e,t={clone:!0}){const r=t.clone?{...i}:i;return td(i)&&td(e)&&Object.keys(e).forEach(n=>{j.isValidElement(e[n])||Cx.isValidElementType(e[n])?r[n]=e[n]:td(e[n])&&Object.prototype.hasOwnProperty.call(i,n)&&td(i[n])?r[n]=rc(i[n],e[n],t):t.clone?r[n]=td(e[n])?eF(e[n]):e[n]:r[n]=e[n]}),r}const UW=i=>{const e=Object.keys(i).map(t=>({key:t,val:i[t]}))||[];return e.sort((t,r)=>t.val-r.val),e.reduce((t,r)=>({...t,[r.key]:r.val}),{})};function $W(i){const{values:e={xs:0,sm:600,md:900,lg:1200,xl:1536},unit:t="px",step:r=5,...n}=i,s=UW(e),a=Object.keys(s);function o(m){return`@media (min-width:${typeof e[m]=="number"?e[m]:m}${t})`}function l(m){return`@media (max-width:${(typeof e[m]=="number"?e[m]:m)-r/100}${t})`}function u(m,g){const y=a.indexOf(g);return`@media (min-width:${typeof e[m]=="number"?e[m]:m}${t}) and (max-width:${(y!==-1&&typeof e[a[y]]=="number"?e[a[y]]:g)-r/100}${t})`}function c(m){return a.indexOf(m)+1<a.length?u(m,a[a.indexOf(m)+1]):o(m)}function h(m){const g=a.indexOf(m);return g===0?o(a[1]):g===a.length-1?l(a[g]):u(m,a[a.indexOf(m)+1]).replace("@media","@media not all and")}return{keys:a,values:s,up:o,down:l,between:u,only:c,not:h,unit:t,...n}}function jW(i,e){if(!i.containerQueries)return e;const t=Object.keys(e).filter(r=>r.startsWith("@container")).sort((r,n)=>{const s=/min-width:\s*([0-9.]+)/;return+(r.match(s)?.[1]||0)-+(n.match(s)?.[1]||0)});return t.length?t.reduce((r,n)=>{const s=e[n];return delete r[n],r[n]=s,r},{...e}):e}function zW(i,e){return e==="@"||e.startsWith("@")&&(i.some(t=>e.startsWith(`@${t}`))||!!e.match(/^@\d/))}function HW(i,e){const t=e.match(/^@([^/]+)?\/?(.+)?$/);if(!t)return null;const[,r,n]=t,s=Number.isNaN(+r)?r||0:+r;return i.containerQueries(n).up(s)}function VW(i){const e=(s,a)=>s.replace("@media",a?`@container ${a}`:"@container");function t(s,a){s.up=(...o)=>e(i.breakpoints.up(...o),a),s.down=(...o)=>e(i.breakpoints.down(...o),a),s.between=(...o)=>e(i.breakpoints.between(...o),a),s.only=(...o)=>e(i.breakpoints.only(...o),a),s.not=(...o)=>{const l=e(i.breakpoints.not(...o),a);return l.includes("not all and")?l.replace("not all and ","").replace("min-width:","width<").replace("max-width:","width>").replace("and","or"):l}}const r={},n=s=>(t(r,s),r);return t(n),{...i,containerQueries:n}}const qW={borderRadius:4};function e0(i,e){return e?rc(i,e,{clone:!1}):i}const Ex={xs:0,sm:600,md:900,lg:1200,xl:1536},yP={keys:["xs","sm","md","lg","xl"],up:i=>`@media (min-width:${Ex[i]}px)`},WW={containerQueries:i=>({up:e=>{let t=typeof e=="number"?e:Ex[e]||e;return typeof t=="number"&&(t=`${t}px`),i?`@container ${i} (min-width:${t})`:`@container (min-width:${t})`}})};function fl(i,e,t){const r=i.theme||{};if(Array.isArray(e)){const s=r.breakpoints||yP;return e.reduce((a,o,l)=>(a[s.up(s.keys[l])]=t(e[l]),a),{})}if(typeof e=="object"){const s=r.breakpoints||yP;return Object.keys(e).reduce((a,o)=>{if(zW(s.keys,o)){const l=HW(r.containerQueries?r:WW,o);l&&(a[l]=t(e[o],o))}else if(Object.keys(s.values||Ex).includes(o)){const l=s.up(o);a[l]=t(e[o],o)}else{const l=o;a[l]=e[l]}return a},{})}return t(e)}function tF(i={}){return i.keys?.reduce((t,r)=>{const n=i.up(r);return t[n]={},t},{})||{}}function rF(i,e){return i.reduce((t,r)=>{const n=t[r];return(!n||Object.keys(n).length===0)&&delete t[r],t},e)}function GW(i,...e){const t=tF(i),r=[t,...e].reduce((n,s)=>rc(n,s),{});return rF(Object.keys(t),r)}function KW(i,e){if(typeof i!="object")return{};const t={},r=Object.keys(e);return Array.isArray(i)?r.forEach((n,s)=>{s<i.length&&(t[n]=!0)}):r.forEach(n=>{i[n]!=null&&(t[n]=!0)}),t}function lS({values:i,breakpoints:e,base:t}){const r=t||KW(i,e),n=Object.keys(r);if(n.length===0)return i;let s;return n.reduce((a,o,l)=>(Array.isArray(i)?(a[o]=i[l]!=null?i[l]:i[s],s=l):typeof i=="object"?(a[o]=i[o]!=null?i[o]:i[s],s=o):a[o]=i,a),{})}function iF(i){if(typeof i!="string")throw new Error(Y1(7));return i.charAt(0).toUpperCase()+i.slice(1)}function wx(i,e,t=!0){if(!e||typeof e!="string")return null;if(i&&i.vars&&t){const r=`vars.${e}`.split(".").reduce((n,s)=>n&&n[s]?n[s]:null,i);if(r!=null)return r}return e.split(".").reduce((r,n)=>r&&r[n]!=null?r[n]:null,i)}function n_(i,e,t,r=t){let n;return typeof i=="function"?n=i(t):Array.isArray(i)?n=i[t]||r:n=wx(i,t)||r,e&&(n=e(n,r,i)),n}function gn(i){const{prop:e,cssProperty:t=i.prop,themeKey:r,transform:n}=i,s=a=>{if(a[e]==null)return null;const o=a[e],l=a.theme,u=wx(l,r)||{};return fl(a,o,h=>{let m=n_(u,n,h);return h===m&&typeof h=="string"&&(m=n_(u,n,`${e}${h==="default"?"":iF(h)}`,h)),t===!1?m:{[t]:m}})};return s.propTypes={},s.filterProps=[e],s}function XW(i){const e={};return t=>(e[t]===void 0&&(e[t]=i(t)),e[t])}const YW={m:"margin",p:"padding"},QW={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},_P={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},JW=XW(i=>{if(i.length>2)if(_P[i])i=_P[i];else return[i];const[e,t]=i.split(""),r=YW[e],n=QW[t]||"";return Array.isArray(n)?n.map(s=>r+s):[r+n]}),nw=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],sw=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"];[...nw,...sw];function Y0(i,e,t,r){const n=wx(i,e,!0)??t;return typeof n=="number"||typeof n=="string"?s=>typeof s=="string"?s:typeof n=="string"?n.startsWith("var(")&&s===0?0:n.startsWith("var(")&&s===1?n:`calc(${s} * ${n})`:n*s:Array.isArray(n)?s=>{if(typeof s=="string")return s;const a=Math.abs(s),o=n[a];return s>=0?o:typeof o=="number"?-o:typeof o=="string"&&o.startsWith("var(")?`calc(-1 * ${o})`:`-${o}`}:typeof n=="function"?n:()=>{}}function kx(i){return Y0(i,"spacing",8)}function Ch(i,e){return typeof e=="string"||e==null?e:i(e)}function ZW(i,e){return t=>i.reduce((r,n)=>(r[n]=Ch(e,t),r),{})}function eG(i,e,t,r){if(!e.includes(t))return null;const n=JW(t),s=ZW(n,r),a=i[t];return fl(i,a,s)}function nF(i,e){const t=kx(i.theme);return Object.keys(i).map(r=>eG(i,e,r,t)).reduce(e0,{})}function en(i){return nF(i,nw)}en.propTypes={};en.filterProps=nw;function tn(i){return nF(i,sw)}tn.propTypes={};tn.filterProps=sw;function sF(i=8,e=kx({spacing:i})){if(i.mui)return i;const t=(...r)=>(r.length===0?[1]:r).map(s=>{const a=e(s);return typeof a=="number"?`${a}px`:a}).join(" ");return t.mui=!0,t}function Ax(...i){const e=i.reduce((r,n)=>(n.filterProps.forEach(s=>{r[s]=n}),r),{}),t=r=>Object.keys(r).reduce((n,s)=>e[s]?e0(n,e[s](r)):n,{});return t.propTypes={},t.filterProps=i.reduce((r,n)=>r.concat(n.filterProps),[]),t}function Do(i){return typeof i!="number"?i:`${i}px solid`}function Bo(i,e){return gn({prop:i,themeKey:"borders",transform:e})}const tG=Bo("border",Do),rG=Bo("borderTop",Do),iG=Bo("borderRight",Do),nG=Bo("borderBottom",Do),sG=Bo("borderLeft",Do),aG=Bo("borderColor"),oG=Bo("borderTopColor"),lG=Bo("borderRightColor"),uG=Bo("borderBottomColor"),cG=Bo("borderLeftColor"),dG=Bo("outline",Do),hG=Bo("outlineColor"),Ix=i=>{if(i.borderRadius!==void 0&&i.borderRadius!==null){const e=Y0(i.theme,"shape.borderRadius",4),t=r=>({borderRadius:Ch(e,r)});return fl(i,i.borderRadius,t)}return null};Ix.propTypes={};Ix.filterProps=["borderRadius"];Ax(tG,rG,iG,nG,sG,aG,oG,lG,uG,cG,Ix,dG,hG);const Dx=i=>{if(i.gap!==void 0&&i.gap!==null){const e=Y0(i.theme,"spacing",8),t=r=>({gap:Ch(e,r)});return fl(i,i.gap,t)}return null};Dx.propTypes={};Dx.filterProps=["gap"];const Px=i=>{if(i.columnGap!==void 0&&i.columnGap!==null){const e=Y0(i.theme,"spacing",8),t=r=>({columnGap:Ch(e,r)});return fl(i,i.columnGap,t)}return null};Px.propTypes={};Px.filterProps=["columnGap"];const Rx=i=>{if(i.rowGap!==void 0&&i.rowGap!==null){const e=Y0(i.theme,"spacing",8),t=r=>({rowGap:Ch(e,r)});return fl(i,i.rowGap,t)}return null};Rx.propTypes={};Rx.filterProps=["rowGap"];const fG=gn({prop:"gridColumn"}),pG=gn({prop:"gridRow"}),mG=gn({prop:"gridAutoFlow"}),gG=gn({prop:"gridAutoColumns"}),vG=gn({prop:"gridAutoRows"}),yG=gn({prop:"gridTemplateColumns"}),_G=gn({prop:"gridTemplateRows"}),xG=gn({prop:"gridTemplateAreas"}),TG=gn({prop:"gridArea"});Ax(Dx,Px,Rx,fG,pG,mG,gG,vG,yG,_G,xG,TG);function $f(i,e){return e==="grey"?e:i}const bG=gn({prop:"color",themeKey:"palette",transform:$f}),SG=gn({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette",transform:$f}),CG=gn({prop:"backgroundColor",themeKey:"palette",transform:$f});Ax(bG,SG,CG);function to(i){return i<=1&&i!==0?`${i*100}%`:i}const EG=gn({prop:"width",transform:to}),aw=i=>{if(i.maxWidth!==void 0&&i.maxWidth!==null){const e=t=>{const r=i.theme?.breakpoints?.values?.[t]||Ex[t];return r?i.theme?.breakpoints?.unit!=="px"?{maxWidth:`${r}${i.theme.breakpoints.unit}`}:{maxWidth:r}:{maxWidth:to(t)}};return fl(i,i.maxWidth,e)}return null};aw.filterProps=["maxWidth"];const wG=gn({prop:"minWidth",transform:to}),kG=gn({prop:"height",transform:to}),AG=gn({prop:"maxHeight",transform:to}),IG=gn({prop:"minHeight",transform:to});gn({prop:"size",cssProperty:"width",transform:to});gn({prop:"size",cssProperty:"height",transform:to});const DG=gn({prop:"boxSizing"});Ax(EG,aw,wG,kG,AG,IG,DG);const Q0={border:{themeKey:"borders",transform:Do},borderTop:{themeKey:"borders",transform:Do},borderRight:{themeKey:"borders",transform:Do},borderBottom:{themeKey:"borders",transform:Do},borderLeft:{themeKey:"borders",transform:Do},borderColor:{themeKey:"palette"},borderTopColor:{themeKey:"palette"},borderRightColor:{themeKey:"palette"},borderBottomColor:{themeKey:"palette"},borderLeftColor:{themeKey:"palette"},outline:{themeKey:"borders",transform:Do},outlineColor:{themeKey:"palette"},borderRadius:{themeKey:"shape.borderRadius",style:Ix},color:{themeKey:"palette",transform:$f},bgcolor:{themeKey:"palette",cssProperty:"backgroundColor",transform:$f},backgroundColor:{themeKey:"palette",transform:$f},p:{style:tn},pt:{style:tn},pr:{style:tn},pb:{style:tn},pl:{style:tn},px:{style:tn},py:{style:tn},padding:{style:tn},paddingTop:{style:tn},paddingRight:{style:tn},paddingBottom:{style:tn},paddingLeft:{style:tn},paddingX:{style:tn},paddingY:{style:tn},paddingInline:{style:tn},paddingInlineStart:{style:tn},paddingInlineEnd:{style:tn},paddingBlock:{style:tn},paddingBlockStart:{style:tn},paddingBlockEnd:{style:tn},m:{style:en},mt:{style:en},mr:{style:en},mb:{style:en},ml:{style:en},mx:{style:en},my:{style:en},margin:{style:en},marginTop:{style:en},marginRight:{style:en},marginBottom:{style:en},marginLeft:{style:en},marginX:{style:en},marginY:{style:en},marginInline:{style:en},marginInlineStart:{style:en},marginInlineEnd:{style:en},marginBlock:{style:en},marginBlockStart:{style:en},marginBlockEnd:{style:en},displayPrint:{cssProperty:!1,transform:i=>({"@media print":{display:i}})},display:{},overflow:{},textOverflow:{},visibility:{},whiteSpace:{},flexBasis:{},flexDirection:{},flexWrap:{},justifyContent:{},alignItems:{},alignContent:{},order:{},flex:{},flexGrow:{},flexShrink:{},alignSelf:{},justifyItems:{},justifySelf:{},gap:{style:Dx},rowGap:{style:Rx},columnGap:{style:Px},gridColumn:{},gridRow:{},gridAutoFlow:{},gridAutoColumns:{},gridAutoRows:{},gridTemplateColumns:{},gridTemplateRows:{},gridTemplateAreas:{},gridArea:{},position:{},zIndex:{themeKey:"zIndex"},top:{},right:{},bottom:{},left:{},boxShadow:{themeKey:"shadows"},width:{transform:to},maxWidth:{style:aw},minWidth:{transform:to},height:{transform:to},maxHeight:{transform:to},minHeight:{transform:to},boxSizing:{},font:{themeKey:"font"},fontFamily:{themeKey:"typography"},fontSize:{themeKey:"typography"},fontStyle:{themeKey:"typography"},fontWeight:{themeKey:"typography"},letterSpacing:{},textTransform:{},lineHeight:{},textAlign:{},typography:{cssProperty:!1,themeKey:"typography"}};function PG(...i){const e=i.reduce((r,n)=>r.concat(Object.keys(n)),[]),t=new Set(e);return i.every(r=>t.size===Object.keys(r).length)}function RG(i,e){return typeof i=="function"?i(e):i}function LG(){function i(t,r,n,s){const a={[t]:r,theme:n},o=s[t];if(!o)return{[t]:r};const{cssProperty:l=t,themeKey:u,transform:c,style:h}=o;if(r==null)return null;if(u==="typography"&&r==="inherit")return{[t]:r};const m=wx(n,u)||{};return h?h(a):fl(a,r,y=>{let _=n_(m,c,y);return y===_&&typeof y=="string"&&(_=n_(m,c,`${t}${y==="default"?"":iF(y)}`,y)),l===!1?_:{[l]:_}})}function e(t){const{sx:r,theme:n={}}=t||{};if(!r)return null;const s=n.unstable_sxConfig??Q0;function a(o){let l=o;if(typeof o=="function")l=o(n);else if(typeof o!="object")return o;if(!l)return null;const u=tF(n.breakpoints),c=Object.keys(u);let h=u;return Object.keys(l).forEach(m=>{const g=RG(l[m],n);if(g!=null)if(typeof g=="object")if(s[m])h=e0(h,i(m,g,n,s));else{const y=fl({theme:n},g,_=>({[m]:_}));PG(y,g)?h[m]=e({sx:g,theme:n}):h=e0(h,y)}else h=e0(h,i(m,g,n,s))}),jW(n,rF(c,h))}return Array.isArray(r)?r.map(a):a(r)}return e}const ld=LG();ld.filterProps=["sx"];function OG(i,e){const t=this;if(t.vars){if(!t.colorSchemes?.[i]||typeof t.getColorSchemeSelector!="function")return{};let r=t.getColorSchemeSelector(i);return r==="&"?e:((r.includes("data-")||r.includes("."))&&(r=`*:where(${r.replace(/\s*&$/,"")}) &`),{[r]:e})}return t.palette.mode===i?e:{}}function Lx(i={},...e){const{breakpoints:t={},palette:r={},spacing:n,shape:s={},...a}=i,o=$W(t),l=sF(n);let u=rc({breakpoints:o,direction:"ltr",components:{},palette:{mode:"light",...r},spacing:l,shape:{...qW,...s}},a);return u=VW(u),u.applyStyles=OG,u=e.reduce((c,h)=>rc(c,h),u),u.unstable_sxConfig={...Q0,...a?.unstable_sxConfig},u.unstable_sx=function(h){return ld({sx:h,theme:this})},u}function MG(i){return Object.keys(i).length===0}function ow(i=null){const e=j.useContext(K0);return!e||MG(e)?i:e}const FG=Lx();function Ox(i=FG){return ow(i)}function BG({styles:i,themeId:e,defaultTheme:t={}}){const r=Ox(t),n=typeof i=="function"?i(e&&r[e]||r):i;return V.jsx(J3,{styles:n})}const NG=i=>{const e={systemProps:{},otherProps:{}},t=i?.theme?.unstable_sxConfig??Q0;return Object.keys(i).forEach(r=>{t[r]?e.systemProps[r]=i[r]:e.otherProps[r]=i[r]}),e};function lw(i){const{sx:e,...t}=i,{systemProps:r,otherProps:n}=NG(t);let s;return Array.isArray(e)?s=[r,...e]:typeof e=="function"?s=(...a)=>{const o=e(...a);return td(o)?{...r,...o}:r}:s={...r,...e},{...n,sx:s}}const xP=i=>i,UG=()=>{let i=xP;return{configure(e){i=e},generate(e){return i(e)},reset(){i=xP}}},$G=UG();function aF(i){var e,t,r="";if(typeof i=="string"||typeof i=="number")r+=i;else if(typeof i=="object")if(Array.isArray(i)){var n=i.length;for(e=0;e<n;e++)i[e]&&(t=aF(i[e]))&&(r&&(r+=" "),r+=t)}else for(t in i)i[t]&&(r&&(r+=" "),r+=t);return r}function Nt(){for(var i,e,t=0,r="",n=arguments.length;t<n;t++)(i=arguments[t])&&(e=aF(i))&&(r&&(r+=" "),r+=e);return r}function jG(i={}){const{themeId:e,defaultTheme:t,defaultClassName:r="MuiBox-root",generateClassName:n}=i,s=Z3("div",{shouldForwardProp:o=>o!=="theme"&&o!=="sx"&&o!=="as"})(ld);return j.forwardRef(function(l,u){const c=Ox(t),{className:h,component:m="div",...g}=lw(l);return V.jsx(s,{as:m,ref:u,className:Nt(h,n?n(r):r),theme:e&&c[e]||c,...g})})}const zG={active:"active",checked:"checked",completed:"completed",disabled:"disabled",error:"error",expanded:"expanded",focused:"focused",focusVisible:"focusVisible",open:"open",readOnly:"readOnly",required:"required",selected:"selected"};function HG(i,e,t="Mui"){const r=zG[e];return r?`${t}-${r}`:`${$G.generate(i)}-${e}`}function oF(i){const{variants:e,...t}=i,r={variants:e,style:mP(t),isProcessed:!0};return r.style===t||e&&e.forEach(n=>{typeof n.style!="function"&&(n.style=mP(n.style))}),r}const VG=Lx();function uS(i){return i!=="ownerState"&&i!=="theme"&&i!=="sx"&&i!=="as"}function qG(i){return i?(e,t)=>t[i]:null}function WG(i,e,t){i.theme=KG(i.theme)?t:i.theme[e]||i.theme}function Py(i,e){const t=typeof e=="function"?e(i):e;if(Array.isArray(t))return t.flatMap(r=>Py(i,r));if(Array.isArray(t?.variants)){let r;if(t.isProcessed)r=t.style;else{const{variants:n,...s}=t;r=s}return lF(i,t.variants,[r])}return t?.isProcessed?t.style:t}function lF(i,e,t=[]){let r;e:for(let n=0;n<e.length;n+=1){const s=e[n];if(typeof s.props=="function"){if(r??={...i,...i.ownerState,ownerState:i.ownerState},!s.props(r))continue}else for(const a in s.props)if(i[a]!==s.props[a]&&i.ownerState?.[a]!==s.props[a])continue e;typeof s.style=="function"?(r??={...i,...i.ownerState,ownerState:i.ownerState},t.push(s.style(r))):t.push(s.style)}return t}function uF(i={}){const{themeId:e,defaultTheme:t=VG,rootShouldForwardProp:r=uS,slotShouldForwardProp:n=uS}=i;function s(o){WG(o,e,t)}return(o,l={})=>{FW(o,A=>A.filter(L=>L!==ld));const{name:u,slot:c,skipVariantsResolver:h,skipSx:m,overridesResolver:g=qG(YG(c)),...y}=l,_=h!==void 0?h:c&&c!=="Root"&&c!=="root"||!1,T=m||!1;let E=uS;c==="Root"||c==="root"?E=r:c?E=n:XG(o)&&(E=void 0);const w=Z3(o,{shouldForwardProp:E,label:GG(),...y}),D=A=>{if(typeof A=="function"&&A.__emotion_real!==A)return function(F){return Py(F,A)};if(td(A)){const L=oF(A);return L.variants?function(B){return Py(B,L)}:L.style}return A},R=(...A)=>{const L=[],F=A.map(D),B=[];if(L.push(s),u&&g&&B.push(function(G){const re=G.theme.components?.[u]?.styleOverrides;if(!re)return null;const se={};for(const de in re)se[de]=Py(G,re[de]);return g(G,se)}),u&&!_&&B.push(function(G){const re=G.theme?.components?.[u]?.variants;return re?lF(G,re):null}),T||B.push(ld),Array.isArray(F[0])){const q=F.shift(),G=new Array(L.length).fill(""),H=new Array(B.length).fill("");let re;re=[...G,...q,...H],re.raw=[...G,...q.raw,...H],L.unshift(re)}const M=[...L,...F,...B],k=w(...M);return o.muiName&&(k.muiName=o.muiName),k};return w.withConfig&&(R.withConfig=w.withConfig),R}}function GG(i,e){return void 0}function KG(i){for(const e in i)return!1;return!0}function XG(i){return typeof i=="string"&&i.charCodeAt(0)>96}function YG(i){return i&&i.charAt(0).toLowerCase()+i.slice(1)}const QG=uF();function s_(i,e){const t={...e};for(const r in i)if(Object.prototype.hasOwnProperty.call(i,r)){const n=r;if(n==="components"||n==="slots")t[n]={...i[n],...t[n]};else if(n==="componentsProps"||n==="slotProps"){const s=i[n],a=e[n];if(!a)t[n]=s||{};else if(!s)t[n]=a;else{t[n]={...a};for(const o in s)if(Object.prototype.hasOwnProperty.call(s,o)){const l=o;t[n][l]=s_(s[l],a[l])}}}else t[n]===void 0&&(t[n]=i[n])}return t}function cF(i){const{theme:e,name:t,props:r}=i;return!e||!e.components||!e.components[t]||!e.components[t].defaultProps?r:s_(e.components[t].defaultProps,r)}function JG({props:i,name:e,defaultTheme:t,themeId:r}){let n=Ox(t);return r&&(n=n[r]||n),cF({theme:n,name:e,props:i})}const dF=typeof window<"u"?j.useLayoutEffect:j.useEffect;function ZG(i,e,t,r,n){const[s,a]=j.useState(()=>n&&t?t(i).matches:r?r(i).matches:e);return dF(()=>{if(!t)return;const o=t(i),l=()=>{a(o.matches)};return l(),o.addEventListener("change",l),()=>{o.removeEventListener("change",l)}},[i,t]),s}const eK={...qy},hF=eK.useSyncExternalStore;function tK(i,e,t,r,n){const s=j.useCallback(()=>e,[e]),a=j.useMemo(()=>{if(n&&t)return()=>t(i).matches;if(r!==null){const{matches:c}=r(i);return()=>c}return s},[s,i,r,n,t]),[o,l]=j.useMemo(()=>{if(t===null)return[s,()=>()=>{}];const c=t(i);return[()=>c.matches,h=>(c.addEventListener("change",h),()=>{c.removeEventListener("change",h)})]},[s,t,i]);return hF(l,o,a)}function fF(i={}){const{themeId:e}=i;return function(r,n={}){let s=ow();s&&e&&(s=s[e]||s);const a=typeof window<"u"&&typeof window.matchMedia<"u",{defaultMatches:o=!1,matchMedia:l=a?window.matchMedia:null,ssrMatchMedia:u=null,noSsr:c=!1}=cF({name:"MuiUseMediaQuery",props:n,theme:s});let h=typeof r=="function"?r(s):r;return h=h.replace(/^@media( ?)/m,""),h.includes("print")&&console.warn(["MUI: You have provided a `print` query to the `useMediaQuery` hook.","Using the print media query to modify print styles can lead to unexpected results.","Consider using the `displayPrint` field in the `sx` prop instead.","More information about `displayPrint` on our docs: https://mui.com/system/display/#display-in-print."].join(`
`)),(hF!==void 0?tK:ZG)(h,o,l,u,c)}}fF();function rK(i,e=Number.MIN_SAFE_INTEGER,t=Number.MAX_SAFE_INTEGER){return Math.max(e,Math.min(i,t))}function uw(i,e=0,t=1){return rK(i,e,t)}function iK(i){i=i.slice(1);const e=new RegExp(`.{1,${i.length>=6?2:1}}`,"g");let t=i.match(e);return t&&t[0].length===1&&(t=t.map(r=>r+r)),t?`rgb${t.length===4?"a":""}(${t.map((r,n)=>n<3?parseInt(r,16):Math.round(parseInt(r,16)/255*1e3)/1e3).join(", ")})`:""}function ud(i){if(i.type)return i;if(i.charAt(0)==="#")return ud(iK(i));const e=i.indexOf("("),t=i.substring(0,e);if(!["rgb","rgba","hsl","hsla","color"].includes(t))throw new Error(Y1(9,i));let r=i.substring(e+1,i.length-1),n;if(t==="color"){if(r=r.split(" "),n=r.shift(),r.length===4&&r[3].charAt(0)==="/"&&(r[3]=r[3].slice(1)),!["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].includes(n))throw new Error(Y1(10,n))}else r=r.split(",");return r=r.map(s=>parseFloat(s)),{type:t,values:r,colorSpace:n}}const nK=i=>{const e=ud(i);return e.values.slice(0,3).map((t,r)=>e.type.includes("hsl")&&r!==0?`${t}%`:t).join(" ")},jm=(i,e)=>{try{return nK(i)}catch{return i}};function Mx(i){const{type:e,colorSpace:t}=i;let{values:r}=i;return e.includes("rgb")?r=r.map((n,s)=>s<3?parseInt(n,10):n):e.includes("hsl")&&(r[1]=`${r[1]}%`,r[2]=`${r[2]}%`),e.includes("color")?r=`${t} ${r.join(" ")}`:r=`${r.join(", ")}`,`${e}(${r})`}function pF(i){i=ud(i);const{values:e}=i,t=e[0],r=e[1]/100,n=e[2]/100,s=r*Math.min(n,1-n),a=(u,c=(u+t/30)%12)=>n-s*Math.max(Math.min(c-3,9-c,1),-1);let o="rgb";const l=[Math.round(a(0)*255),Math.round(a(8)*255),Math.round(a(4)*255)];return i.type==="hsla"&&(o+="a",l.push(e[3])),Mx({type:o,values:l})}function tC(i){i=ud(i);let e=i.type==="hsl"||i.type==="hsla"?ud(pF(i)).values:i.values;return e=e.map(t=>(i.type!=="color"&&(t/=255),t<=.03928?t/12.92:((t+.055)/1.055)**2.4)),Number((.2126*e[0]+.7152*e[1]+.0722*e[2]).toFixed(3))}function sK(i,e){const t=tC(i),r=tC(e);return(Math.max(t,r)+.05)/(Math.min(t,r)+.05)}function Gr(i,e){return i=ud(i),e=uw(e),(i.type==="rgb"||i.type==="hsl")&&(i.type+="a"),i.type==="color"?i.values[3]=`/${e}`:i.values[3]=e,Mx(i)}function av(i,e,t){try{return Gr(i,e)}catch{return i}}function Fx(i,e){if(i=ud(i),e=uw(e),i.type.includes("hsl"))i.values[2]*=1-e;else if(i.type.includes("rgb")||i.type.includes("color"))for(let t=0;t<3;t+=1)i.values[t]*=1-e;return Mx(i)}function Ei(i,e,t){try{return Fx(i,e)}catch{return i}}function Bx(i,e){if(i=ud(i),e=uw(e),i.type.includes("hsl"))i.values[2]+=(100-i.values[2])*e;else if(i.type.includes("rgb"))for(let t=0;t<3;t+=1)i.values[t]+=(255-i.values[t])*e;else if(i.type.includes("color"))for(let t=0;t<3;t+=1)i.values[t]+=(1-i.values[t])*e;return Mx(i)}function wi(i,e,t){try{return Bx(i,e)}catch{return i}}function mF(i,e=.15){return tC(i)>.5?Fx(i,e):Bx(i,e)}function ov(i,e,t){try{return mF(i,e)}catch{return i}}const gF=j.createContext(null);function cw(){return j.useContext(gF)}const aK=typeof Symbol=="function"&&Symbol.for,oK=aK?Symbol.for("mui.nested"):"__THEME_NESTED__";function lK(i,e){return typeof e=="function"?e(i):{...i,...e}}function uK(i){const{children:e,theme:t}=i,r=cw(),n=j.useMemo(()=>{const s=r===null?{...t}:lK(r,t);return s!=null&&(s[oK]=r!==null),s},[t,r]);return V.jsx(gF.Provider,{value:n,children:e})}const vF=j.createContext();function cK({value:i,...e}){return V.jsx(vF.Provider,{value:i??!0,...e})}const yF=()=>j.useContext(vF)??!1,_F=j.createContext(void 0);function dK({value:i,children:e}){return V.jsx(_F.Provider,{value:i,children:e})}function hK(i){const{theme:e,name:t,props:r}=i;if(!e||!e.components||!e.components[t])return r;const n=e.components[t];return n.defaultProps?s_(n.defaultProps,r):!n.styleOverrides&&!n.variants?s_(n,r):r}function fK({props:i,name:e}){const t=j.useContext(_F);return hK({props:i,name:e,theme:{components:t}})}const TP={};function bP(i,e,t,r=!1){return j.useMemo(()=>{const n=i&&e[i]||e;if(typeof t=="function"){const s=t(n),a=i?{...e,[i]:s}:s;return r?()=>a:a}return i?{...e,[i]:t}:{...e,...t}},[i,e,t,r])}function xF(i){const{children:e,theme:t,themeId:r}=i,n=ow(TP),s=cw()||TP,a=bP(r,n,t),o=bP(r,s,t,!0),l=(r?a[r]:a).direction==="rtl";return V.jsx(uK,{theme:o,children:V.jsx(K0.Provider,{value:a,children:V.jsx(cK,{value:l,children:V.jsx(dK,{value:r?a[r].components:a.components,children:e})})})})}const SP={theme:void 0};function pK(i){let e,t;return function(n){let s=e;return(s===void 0||n.theme!==t)&&(SP.theme=n.theme,s=oF(i(SP)),e=s,t=n.theme),s}}const dw="mode",hw="color-scheme",mK="data-color-scheme";function gK(i){const{defaultMode:e="system",defaultLightColorScheme:t="light",defaultDarkColorScheme:r="dark",modeStorageKey:n=dw,colorSchemeStorageKey:s=hw,attribute:a=mK,colorSchemeNode:o="document.documentElement",nonce:l}=i||{};let u="",c=a;if(a==="class"&&(c=".%s"),a==="data"&&(c="[data-%s]"),c.startsWith(".")){const m=c.substring(1);u+=`${o}.classList.remove('${m}'.replace('%s', light), '${m}'.replace('%s', dark));
      ${o}.classList.add('${m}'.replace('%s', colorScheme));`}const h=c.match(/\[([^\]]+)\]/);if(h){const[m,g]=h[1].split("=");g||(u+=`${o}.removeAttribute('${m}'.replace('%s', light));
      ${o}.removeAttribute('${m}'.replace('%s', dark));`),u+=`
      ${o}.setAttribute('${m}'.replace('%s', colorScheme), ${g?`${g}.replace('%s', colorScheme)`:'""'});`}else u+=`${o}.setAttribute('${c}', colorScheme);`;return V.jsx("script",{suppressHydrationWarning:!0,nonce:typeof window>"u"?l:"",dangerouslySetInnerHTML:{__html:`(function() {
try {
  let colorScheme = '';
  const mode = localStorage.getItem('${n}') || '${e}';
  const dark = localStorage.getItem('${s}-dark') || '${r}';
  const light = localStorage.getItem('${s}-light') || '${t}';
  if (mode === 'system') {
    // handle system mode
    const mql = window.matchMedia('(prefers-color-scheme: dark)');
    if (mql.matches) {
      colorScheme = dark
    } else {
      colorScheme = light
    }
  }
  if (mode === 'light') {
    colorScheme = light;
  }
  if (mode === 'dark') {
    colorScheme = dark;
  }
  if (colorScheme) {
    ${u}
  }
} catch(e){}})();`}},"mui-color-scheme-init")}function vK(){}const yK=({key:i,storageWindow:e})=>(!e&&typeof window<"u"&&(e=window),{get(t){if(typeof window>"u")return;if(!e)return t;let r;try{r=e.localStorage.getItem(i)}catch{}return r||t},set:t=>{if(e)try{e.localStorage.setItem(i,t)}catch{}},subscribe:t=>{if(!e)return vK;const r=n=>{const s=n.newValue;n.key===i&&t(s)};return e.addEventListener("storage",r),()=>{e.removeEventListener("storage",r)}}});function cS(){}function CP(i){if(typeof window<"u"&&typeof window.matchMedia=="function"&&i==="system")return window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}function TF(i,e){if(i.mode==="light"||i.mode==="system"&&i.systemMode==="light")return e("light");if(i.mode==="dark"||i.mode==="system"&&i.systemMode==="dark")return e("dark")}function _K(i){return TF(i,e=>{if(e==="light")return i.lightColorScheme;if(e==="dark")return i.darkColorScheme})}function xK(i){const{defaultMode:e="light",defaultLightColorScheme:t,defaultDarkColorScheme:r,supportedColorSchemes:n=[],modeStorageKey:s=dw,colorSchemeStorageKey:a=hw,storageWindow:o=typeof window>"u"?void 0:window,storageManager:l=yK,noSsr:u=!1}=i,c=n.join(","),h=n.length>1,m=j.useMemo(()=>l?.({key:s,storageWindow:o}),[l,s,o]),g=j.useMemo(()=>l?.({key:`${a}-light`,storageWindow:o}),[l,a,o]),y=j.useMemo(()=>l?.({key:`${a}-dark`,storageWindow:o}),[l,a,o]),[_,T]=j.useState(()=>{const B=m?.get(e)||e,M=g?.get(t)||t,k=y?.get(r)||r;return{mode:B,systemMode:CP(B),lightColorScheme:M,darkColorScheme:k}}),[E,w]=j.useState(u||!h);j.useEffect(()=>{w(!0)},[]);const D=_K(_),R=j.useCallback(B=>{T(M=>{if(B===M.mode)return M;const k=B??e;return m?.set(k),{...M,mode:k,systemMode:CP(k)}})},[m,e]),A=j.useCallback(B=>{B?typeof B=="string"?B&&!c.includes(B)?console.error(`\`${B}\` does not exist in \`theme.colorSchemes\`.`):T(M=>{const k={...M};return TF(M,q=>{q==="light"&&(g?.set(B),k.lightColorScheme=B),q==="dark"&&(y?.set(B),k.darkColorScheme=B)}),k}):T(M=>{const k={...M},q=B.light===null?t:B.light,G=B.dark===null?r:B.dark;return q&&(c.includes(q)?(k.lightColorScheme=q,g?.set(q)):console.error(`\`${q}\` does not exist in \`theme.colorSchemes\`.`)),G&&(c.includes(G)?(k.darkColorScheme=G,y?.set(G)):console.error(`\`${G}\` does not exist in \`theme.colorSchemes\`.`)),k}):T(M=>(g?.set(t),y?.set(r),{...M,lightColorScheme:t,darkColorScheme:r}))},[c,g,y,t,r]),L=j.useCallback(B=>{_.mode==="system"&&T(M=>{const k=B?.matches?"dark":"light";return M.systemMode===k?M:{...M,systemMode:k}})},[_.mode]),F=j.useRef(L);return F.current=L,j.useEffect(()=>{if(typeof window.matchMedia!="function"||!h)return;const B=(...k)=>F.current(...k),M=window.matchMedia("(prefers-color-scheme: dark)");return M.addListener(B),B(M),()=>{M.removeListener(B)}},[h]),j.useEffect(()=>{if(h){const B=m?.subscribe(q=>{(!q||["light","dark","system"].includes(q))&&R(q||e)})||cS,M=g?.subscribe(q=>{(!q||c.match(q))&&A({light:q})})||cS,k=y?.subscribe(q=>{(!q||c.match(q))&&A({dark:q})})||cS;return()=>{B(),M(),k()}}},[A,R,c,e,o,h,m,g,y]),{..._,mode:E?_.mode:void 0,systemMode:E?_.systemMode:void 0,colorScheme:E?D:void 0,setMode:R,setColorScheme:A}}const TK="*{-webkit-transition:none!important;-moz-transition:none!important;-o-transition:none!important;-ms-transition:none!important;transition:none!important}";function bK(i){const{themeId:e,theme:t={},modeStorageKey:r=dw,colorSchemeStorageKey:n=hw,disableTransitionOnChange:s=!1,defaultColorScheme:a,resolveTheme:o}=i,l={allColorSchemes:[],colorScheme:void 0,darkColorScheme:void 0,lightColorScheme:void 0,mode:void 0,setColorScheme:()=>{},setMode:()=>{},systemMode:void 0},u=j.createContext(void 0),c=()=>j.useContext(u)||l,h={},m={};function g(E){const{children:w,theme:D,modeStorageKey:R=r,colorSchemeStorageKey:A=n,disableTransitionOnChange:L=s,storageManager:F,storageWindow:B=typeof window>"u"?void 0:window,documentNode:M=typeof document>"u"?void 0:document,colorSchemeNode:k=typeof document>"u"?void 0:document.documentElement,disableNestedContext:q=!1,disableStyleSheetGeneration:G=!1,defaultMode:H="system",forceThemeRerender:re=!1,noSsr:se}=E,de=j.useRef(!1),me=cw(),ue=j.useContext(u),oe=!!ue&&!q,ce=j.useMemo(()=>D||(typeof t=="function"?t():t),[D]),te=ce[e],fe=te||ce,{colorSchemes:ye=h,components:Se=m,cssVarPrefix:ke}=fe,qe=Object.keys(ye).filter(cr=>!!ye[cr]).join(","),vt=j.useMemo(()=>qe.split(","),[qe]),et=typeof a=="string"?a:a.light,kt=typeof a=="string"?a:a.dark,pt=ye[et]&&ye[kt]?H:ye[fe.defaultColorScheme]?.palette?.mode||fe.palette?.mode,{mode:Ut,setMode:Vt,systemMode:Xe,lightColorScheme:Ue,darkColorScheme:Le,colorScheme:Ne,setColorScheme:rt}=xK({supportedColorSchemes:vt,defaultLightColorScheme:et,defaultDarkColorScheme:kt,modeStorageKey:R,colorSchemeStorageKey:A,defaultMode:pt,storageManager:F,storageWindow:B,noSsr:se});let lt=Ut,dt=Ne;oe&&(lt=ue.mode,dt=ue.colorScheme);let ut=dt||fe.defaultColorScheme;fe.vars&&!re&&(ut=fe.defaultColorScheme);const At=j.useMemo(()=>{const cr=fe.generateThemeVars?.()||fe.vars,Gt={...fe,components:Se,colorSchemes:ye,cssVarPrefix:ke,vars:cr};if(typeof Gt.generateSpacing=="function"&&(Gt.spacing=Gt.generateSpacing()),ut){const Er=ye[ut];Er&&typeof Er=="object"&&Object.keys(Er).forEach(Ir=>{Er[Ir]&&typeof Er[Ir]=="object"?Gt[Ir]={...Gt[Ir],...Er[Ir]}:Gt[Ir]=Er[Ir]})}return o?o(Gt):Gt},[fe,ut,Se,ye,ke]),it=fe.colorSchemeSelector;dF(()=>{if(dt&&k&&it&&it!=="media"){const cr=it;let Gt=it;if(cr==="class"&&(Gt=".%s"),cr==="data"&&(Gt="[data-%s]"),cr?.startsWith("data-")&&!cr.includes("%s")&&(Gt=`[${cr}="%s"]`),Gt.startsWith("."))k.classList.remove(...vt.map(Er=>Gt.substring(1).replace("%s",Er))),k.classList.add(Gt.substring(1).replace("%s",dt));else{const Er=Gt.replace("%s",dt).match(/\[([^\]]+)\]/);if(Er){const[Ir,Hr]=Er[1].split("=");Hr||vt.forEach(It=>{k.removeAttribute(Ir.replace(dt,It))}),k.setAttribute(Ir,Hr?Hr.replace(/"|'/g,""):"")}else k.setAttribute(Gt,dt)}}},[dt,it,k,vt]),j.useEffect(()=>{let cr;if(L&&de.current&&M){const Gt=M.createElement("style");Gt.appendChild(M.createTextNode(TK)),M.head.appendChild(Gt),window.getComputedStyle(M.body),cr=setTimeout(()=>{M.head.removeChild(Gt)},1)}return()=>{clearTimeout(cr)}},[dt,L,M]),j.useEffect(()=>(de.current=!0,()=>{de.current=!1}),[]);const Sr=j.useMemo(()=>({allColorSchemes:vt,colorScheme:dt,darkColorScheme:Le,lightColorScheme:Ue,mode:lt,setColorScheme:rt,setMode:Vt,systemMode:Xe}),[vt,dt,Le,Ue,lt,rt,Vt,Xe,At.colorSchemeSelector]);let xr=!0;(G||fe.cssVariables===!1||oe&&me?.cssVarPrefix===ke)&&(xr=!1);const zr=V.jsxs(j.Fragment,{children:[V.jsx(xF,{themeId:te?e:void 0,theme:At,children:w}),xr&&V.jsx(J3,{styles:At.generateStyleSheets?.()||[]})]});return oe?zr:V.jsx(u.Provider,{value:Sr,children:zr})}const y=typeof a=="string"?a:a.light,_=typeof a=="string"?a:a.dark;return{CssVarsProvider:g,useColorScheme:c,getInitColorSchemeScript:E=>gK({colorSchemeStorageKey:n,defaultLightColorScheme:y,defaultDarkColorScheme:_,modeStorageKey:r,...E})}}function SK(i=""){function e(...r){if(!r.length)return"";const n=r[0];return typeof n=="string"&&!n.match(/(#|\(|\)|(-?(\d*\.)?\d+)(px|em|%|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc))|^(-?(\d*\.)?\d+)$|(\d+ \d+ \d+)/)?`, var(--${i?`${i}-`:""}${n}${e(...r.slice(1))})`:`, ${n}`}return(r,...n)=>`var(--${i?`${i}-`:""}${r}${e(...n)})`}const EP=(i,e,t,r=[])=>{let n=i;e.forEach((s,a)=>{a===e.length-1?Array.isArray(n)?n[Number(s)]=t:n&&typeof n=="object"&&(n[s]=t):n&&typeof n=="object"&&(n[s]||(n[s]=r.includes(s)?[]:{}),n=n[s])})},CK=(i,e,t)=>{function r(n,s=[],a=[]){Object.entries(n).forEach(([o,l])=>{(!t||t&&!t([...s,o]))&&l!=null&&(typeof l=="object"&&Object.keys(l).length>0?r(l,[...s,o],Array.isArray(l)?[...a,o]:a):e([...s,o],l,a))})}r(i)},EK=(i,e)=>typeof e=="number"?["lineHeight","fontWeight","opacity","zIndex"].some(r=>i.includes(r))||i[i.length-1].toLowerCase().includes("opacity")?e:`${e}px`:e;function dS(i,e){const{prefix:t,shouldSkipGeneratingVar:r}=e||{},n={},s={},a={};return CK(i,(o,l,u)=>{if((typeof l=="string"||typeof l=="number")&&(!r||!r(o,l))){const c=`--${t?`${t}-`:""}${o.join("-")}`,h=EK(o,l);Object.assign(n,{[c]:h}),EP(s,o,`var(${c})`,u),EP(a,o,`var(${c}, ${h})`,u)}},o=>o[0]==="vars"),{css:n,vars:s,varsWithDefaults:a}}function wK(i,e={}){const{getSelector:t=T,disableCssColorScheme:r,colorSchemeSelector:n}=e,{colorSchemes:s={},components:a,defaultColorScheme:o="light",...l}=i,{vars:u,css:c,varsWithDefaults:h}=dS(l,e);let m=h;const g={},{[o]:y,..._}=s;if(Object.entries(_||{}).forEach(([D,R])=>{const{vars:A,css:L,varsWithDefaults:F}=dS(R,e);m=rc(m,F),g[D]={css:L,vars:A}}),y){const{css:D,vars:R,varsWithDefaults:A}=dS(y,e);m=rc(m,A),g[o]={css:D,vars:R}}function T(D,R){let A=n;if(n==="class"&&(A=".%s"),n==="data"&&(A="[data-%s]"),n?.startsWith("data-")&&!n.includes("%s")&&(A=`[${n}="%s"]`),D){if(A==="media")return i.defaultColorScheme===D?":root":{[`@media (prefers-color-scheme: ${s[D]?.palette?.mode||D})`]:{":root":R}};if(A)return i.defaultColorScheme===D?`:root, ${A.replace("%s",String(D))}`:A.replace("%s",String(D))}return":root"}return{vars:m,generateThemeVars:()=>{let D={...u};return Object.entries(g).forEach(([,{vars:R}])=>{D=rc(D,R)}),D},generateStyleSheets:()=>{const D=[],R=i.defaultColorScheme||"light";function A(B,M){Object.keys(M).length&&D.push(typeof B=="string"?{[B]:{...M}}:B)}A(t(void 0,{...c}),c);const{[R]:L,...F}=g;if(L){const{css:B}=L,M=s[R]?.palette?.mode,k=!r&&M?{colorScheme:M,...B}:{...B};A(t(R,{...k}),k)}return Object.entries(F).forEach(([B,{css:M}])=>{const k=s[B]?.palette?.mode,q=!r&&k?{colorScheme:k,...M}:{...M};A(t(B,{...q}),q)}),D}}}function kK(i){return function(t){return i==="media"?`@media (prefers-color-scheme: ${t})`:i?i.startsWith("data-")&&!i.includes("%s")?`[${i}="${t}"] &`:i==="class"?`.${t} &`:i==="data"?`[data-${t}] &`:`${i.replace("%s",t)} &`:"&"}}function AK(i,e,t=void 0){const r={};for(const n in i){const s=i[n];let a="",o=!0;for(let l=0;l<s.length;l+=1){const u=s[l];u&&(a+=(o===!0?"":" ")+e(u),o=!1,t&&t[u]&&(a+=" "+t[u]))}r[n]=a}return r}const IK=Lx(),DK=QG("div",{name:"MuiStack",slot:"Root"});function PK(i){return JG({props:i,name:"MuiStack",defaultTheme:IK})}function RK(i,e){const t=j.Children.toArray(i).filter(Boolean);return t.reduce((r,n,s)=>(r.push(n),s<t.length-1&&r.push(j.cloneElement(e,{key:`separator-${s}`})),r),[])}const LK=i=>({row:"Left","row-reverse":"Right",column:"Top","column-reverse":"Bottom"})[i],OK=({ownerState:i,theme:e})=>{let t={display:"flex",flexDirection:"column",...fl({theme:e},lS({values:i.direction,breakpoints:e.breakpoints.values}),r=>({flexDirection:r}))};if(i.spacing){const r=kx(e),n=Object.keys(e.breakpoints.values).reduce((l,u)=>((typeof i.spacing=="object"&&i.spacing[u]!=null||typeof i.direction=="object"&&i.direction[u]!=null)&&(l[u]=!0),l),{}),s=lS({values:i.direction,base:n}),a=lS({values:i.spacing,base:n});typeof s=="object"&&Object.keys(s).forEach((l,u,c)=>{if(!s[l]){const m=u>0?s[c[u-1]]:"column";s[l]=m}}),t=rc(t,fl({theme:e},a,(l,u)=>i.useFlexGap?{gap:Ch(r,l)}:{"& > :not(style):not(style)":{margin:0},"& > :not(style) ~ :not(style)":{[`margin${LK(u?s[u]:i.direction)}`]:Ch(r,l)}}))}return t=GW(e.breakpoints,t),t};function MK(i={}){const{createStyledComponent:e=DK,useThemeProps:t=PK,componentName:r="MuiStack"}=i,n=()=>AK({root:["root"]},l=>HG(r,l),{}),s=e(OK);return j.forwardRef(function(l,u){const c=t(l),h=lw(c),{component:m="div",direction:g="column",spacing:y=0,divider:_,children:T,className:E,useFlexGap:w=!1,...D}=h,R={direction:g,spacing:y,useFlexGap:w},A=n();return V.jsx(s,{as:m,ownerState:R,ref:u,className:Nt(A.root,E),...D,children:_?RK(T,_):T})})}const wP=i=>i,FK=()=>{let i=wP;return{configure(e){i=e},generate(e){return i(e)},reset(){i=wP}}},bF=FK();function Eh(i,...e){const t=new URL(`https://mui.com/production-error/?code=${i}`);return e.forEach(r=>t.searchParams.append("args[]",r)),`Minified MUI error #${i}; visit ${t} for the full message.`}const ul="$$material";function rd(i){if(typeof i!="object"||i===null)return!1;const e=Object.getPrototypeOf(i);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in i)&&!(Symbol.iterator in i)}function SF(i){if(j.isValidElement(i)||Cx.isValidElementType(i)||!rd(i))return i;const e={};return Object.keys(i).forEach(t=>{e[t]=SF(i[t])}),e}function lu(i,e,t={clone:!0}){const r=t.clone?{...i}:i;return rd(i)&&rd(e)&&Object.keys(e).forEach(n=>{j.isValidElement(e[n])||Cx.isValidElementType(e[n])?r[n]=e[n]:rd(e[n])&&Object.prototype.hasOwnProperty.call(i,n)&&rd(i[n])?r[n]=lu(i[n],e[n],t):t.clone?r[n]=rd(e[n])?SF(e[n]):e[n]:r[n]=e[n]}),r}const S0={black:"#000",white:"#fff"},BK={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"},nf={50:"#f3e5f5",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",700:"#7b1fa2"},sf={300:"#e57373",400:"#ef5350",500:"#f44336",700:"#d32f2f",800:"#c62828"},bm={300:"#ffb74d",400:"#ffa726",500:"#ff9800",700:"#f57c00",900:"#e65100"},af={50:"#e3f2fd",200:"#90caf9",400:"#42a5f5",700:"#1976d2",800:"#1565c0"},of={300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",700:"#0288d1",900:"#01579b"},Qc={300:"#81c784",400:"#66bb6a",500:"#4caf50",700:"#388e3c",800:"#2e7d32",900:"#1b5e20"};function CF(){return{text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:S0.white,default:S0.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}}}const NK=CF();function EF(){return{text:{primary:S0.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:S0.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}}}const kP=EF();function AP(i,e,t,r){const n=r.light||r,s=r.dark||r*1.5;i[e]||(i.hasOwnProperty(t)?i[e]=i[t]:e==="light"?i.light=Bx(i.main,n):e==="dark"&&(i.dark=Fx(i.main,s)))}function UK(i="light"){return i==="dark"?{main:af[200],light:af[50],dark:af[400]}:{main:af[700],light:af[400],dark:af[800]}}function $K(i="light"){return i==="dark"?{main:nf[200],light:nf[50],dark:nf[400]}:{main:nf[500],light:nf[300],dark:nf[700]}}function jK(i="light"){return i==="dark"?{main:sf[500],light:sf[300],dark:sf[700]}:{main:sf[700],light:sf[400],dark:sf[800]}}function zK(i="light"){return i==="dark"?{main:of[400],light:of[300],dark:of[700]}:{main:of[700],light:of[500],dark:of[900]}}function HK(i="light"){return i==="dark"?{main:Qc[400],light:Qc[300],dark:Qc[700]}:{main:Qc[800],light:Qc[500],dark:Qc[900]}}function VK(i="light"){return i==="dark"?{main:bm[400],light:bm[300],dark:bm[700]}:{main:"#ed6c02",light:bm[500],dark:bm[900]}}function fw(i){const{mode:e="light",contrastThreshold:t=3,tonalOffset:r=.2,...n}=i,s=i.primary||UK(e),a=i.secondary||$K(e),o=i.error||jK(e),l=i.info||zK(e),u=i.success||HK(e),c=i.warning||VK(e);function h(_){return sK(_,kP.text.primary)>=t?kP.text.primary:NK.text.primary}const m=({color:_,name:T,mainShade:E=500,lightShade:w=300,darkShade:D=700})=>{if(_={..._},!_.main&&_[E]&&(_.main=_[E]),!_.hasOwnProperty("main"))throw new Error(Eh(11,T?` (${T})`:"",E));if(typeof _.main!="string")throw new Error(Eh(12,T?` (${T})`:"",JSON.stringify(_.main)));return AP(_,"light",w,r),AP(_,"dark",D,r),_.contrastText||(_.contrastText=h(_.main)),_};let g;return e==="light"?g=CF():e==="dark"&&(g=EF()),lu({common:{...S0},mode:e,primary:m({color:s,name:"primary"}),secondary:m({color:a,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:m({color:o,name:"error"}),warning:m({color:c,name:"warning"}),info:m({color:l,name:"info"}),success:m({color:u,name:"success"}),grey:BK,contrastThreshold:t,getContrastText:h,augmentColor:m,tonalOffset:r,...g},n)}function qK(i){const e={};return Object.entries(i).forEach(r=>{const[n,s]=r;typeof s=="object"&&(e[n]=`${s.fontStyle?`${s.fontStyle} `:""}${s.fontVariant?`${s.fontVariant} `:""}${s.fontWeight?`${s.fontWeight} `:""}${s.fontStretch?`${s.fontStretch} `:""}${s.fontSize||""}${s.lineHeight?`/${s.lineHeight} `:""}${s.fontFamily||""}`)}),e}const WK={active:"active",checked:"checked",completed:"completed",disabled:"disabled",error:"error",expanded:"expanded",focused:"focused",focusVisible:"focusVisible",open:"open",readOnly:"readOnly",required:"required",selected:"selected"};function or(i,e,t="Mui"){const r=WK[e];return r?`${t}-${r}`:`${bF.generate(i)}-${e}`}function GK(i,e){return{toolbar:{minHeight:56,[i.up("xs")]:{"@media (orientation: landscape)":{minHeight:48}},[i.up("sm")]:{minHeight:64}},...e}}function KK(i){return Math.round(i*1e5)/1e5}const IP={textTransform:"uppercase"},DP='"Roboto", "Helvetica", "Arial", sans-serif';function wF(i,e){const{fontFamily:t=DP,fontSize:r=14,fontWeightLight:n=300,fontWeightRegular:s=400,fontWeightMedium:a=500,fontWeightBold:o=700,htmlFontSize:l=16,allVariants:u,pxToRem:c,...h}=typeof e=="function"?e(i):e,m=r/14,g=c||(T=>`${T/l*m}rem`),y=(T,E,w,D,R)=>({fontFamily:t,fontWeight:T,fontSize:g(E),lineHeight:w,...t===DP?{letterSpacing:`${KK(D/E)}em`}:{},...R,...u}),_={h1:y(n,96,1.167,-1.5),h2:y(n,60,1.2,-.5),h3:y(s,48,1.167,0),h4:y(s,34,1.235,.25),h5:y(s,24,1.334,0),h6:y(a,20,1.6,.15),subtitle1:y(s,16,1.75,.15),subtitle2:y(a,14,1.57,.1),body1:y(s,16,1.5,.15),body2:y(s,14,1.43,.15),button:y(a,14,1.75,.4,IP),caption:y(s,12,1.66,.4),overline:y(s,12,2.66,1,IP),inherit:{fontFamily:"inherit",fontWeight:"inherit",fontSize:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}};return lu({htmlFontSize:l,pxToRem:g,fontFamily:t,fontSize:r,fontWeightLight:n,fontWeightRegular:s,fontWeightMedium:a,fontWeightBold:o,..._},h,{clone:!1})}const XK=.2,YK=.14,QK=.12;function zi(...i){return[`${i[0]}px ${i[1]}px ${i[2]}px ${i[3]}px rgba(0,0,0,${XK})`,`${i[4]}px ${i[5]}px ${i[6]}px ${i[7]}px rgba(0,0,0,${YK})`,`${i[8]}px ${i[9]}px ${i[10]}px ${i[11]}px rgba(0,0,0,${QK})`].join(",")}const JK=["none",zi(0,2,1,-1,0,1,1,0,0,1,3,0),zi(0,3,1,-2,0,2,2,0,0,1,5,0),zi(0,3,3,-2,0,3,4,0,0,1,8,0),zi(0,2,4,-1,0,4,5,0,0,1,10,0),zi(0,3,5,-1,0,5,8,0,0,1,14,0),zi(0,3,5,-1,0,6,10,0,0,1,18,0),zi(0,4,5,-2,0,7,10,1,0,2,16,1),zi(0,5,5,-3,0,8,10,1,0,3,14,2),zi(0,5,6,-3,0,9,12,1,0,3,16,2),zi(0,6,6,-3,0,10,14,1,0,4,18,3),zi(0,6,7,-4,0,11,15,1,0,4,20,3),zi(0,7,8,-4,0,12,17,2,0,5,22,4),zi(0,7,8,-4,0,13,19,2,0,5,24,4),zi(0,7,9,-4,0,14,21,2,0,5,26,4),zi(0,8,9,-5,0,15,22,2,0,6,28,5),zi(0,8,10,-5,0,16,24,2,0,6,30,5),zi(0,8,11,-5,0,17,26,2,0,6,32,5),zi(0,9,11,-5,0,18,28,2,0,7,34,6),zi(0,9,12,-6,0,19,29,2,0,7,36,6),zi(0,10,13,-6,0,20,31,3,0,8,38,7),zi(0,10,13,-6,0,21,33,3,0,8,40,7),zi(0,10,14,-6,0,22,35,3,0,8,42,7),zi(0,11,14,-7,0,23,36,3,0,9,44,8),zi(0,11,15,-7,0,24,38,3,0,9,46,8)],ZK={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},eX={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function PP(i){return`${Math.round(i)}ms`}function tX(i){if(!i)return 0;const e=i/36;return Math.min(Math.round((4+15*e**.25+e/5)*10),3e3)}function rX(i){const e={...ZK,...i.easing},t={...eX,...i.duration};return{getAutoHeightDuration:tX,create:(n=["all"],s={})=>{const{duration:a=t.standard,easing:o=e.easeInOut,delay:l=0,...u}=s;return(Array.isArray(n)?n:[n]).map(c=>`${c} ${typeof a=="string"?a:PP(a)} ${o} ${typeof l=="string"?l:PP(l)}`).join(",")},...i,easing:e,duration:t}}const iX={mobileStepper:1e3,fab:1050,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500};function nX(i){return rd(i)||typeof i>"u"||typeof i=="string"||typeof i=="boolean"||typeof i=="number"||Array.isArray(i)}function kF(i={}){const e={...i};function t(r){const n=Object.entries(r);for(let s=0;s<n.length;s++){const[a,o]=n[s];!nX(o)||a.startsWith("unstable_")?delete r[a]:rd(o)&&(r[a]={...o},t(r[a]))}}return t(e),`import { unstable_createBreakpoints as createBreakpoints, createTransitions } from '@mui/material/styles';

const theme = ${JSON.stringify(e,null,2)};

theme.breakpoints = createBreakpoints(theme.breakpoints || {});
theme.transitions = createTransitions(theme.transitions || {});

export default theme;`}function rC(i={},...e){const{breakpoints:t,mixins:r={},spacing:n,palette:s={},transitions:a={},typography:o={},shape:l,...u}=i;if(i.vars&&i.generateThemeVars===void 0)throw new Error(Eh(20));const c=fw(s),h=Lx(i);let m=lu(h,{mixins:GK(h.breakpoints,r),palette:c,shadows:JK.slice(),typography:wF(c,o),transitions:rX(a),zIndex:{...iX}});return m=lu(m,u),m=e.reduce((g,y)=>lu(g,y),m),m.unstable_sxConfig={...Q0,...u?.unstable_sxConfig},m.unstable_sx=function(y){return ld({sx:y,theme:this})},m.toRuntimeSource=kF,m}function iC(i){let e;return i<1?e=5.11916*i**2:e=4.5*Math.log(i+1)+2,Math.round(e*10)/1e3}const sX=[...Array(25)].map((i,e)=>{if(e===0)return"none";const t=iC(e);return`linear-gradient(rgba(255 255 255 / ${t}), rgba(255 255 255 / ${t}))`});function AF(i){return{inputPlaceholder:i==="dark"?.5:.42,inputUnderline:i==="dark"?.7:.42,switchTrackDisabled:i==="dark"?.2:.12,switchTrack:i==="dark"?.3:.38}}function IF(i){return i==="dark"?sX:[]}function aX(i){const{palette:e={mode:"light"},opacity:t,overlays:r,...n}=i,s=fw(e);return{palette:s,opacity:{...AF(s.mode),...t},overlays:r||IF(s.mode),...n}}function oX(i){return!!i[0].match(/(cssVarPrefix|colorSchemeSelector|rootSelector|typography|mixins|breakpoints|direction|transitions)/)||!!i[0].match(/sxConfig$/)||i[0]==="palette"&&!!i[1]?.match(/(mode|contrastThreshold|tonalOffset)/)}const lX=i=>[...[...Array(25)].map((e,t)=>`--${i?`${i}-`:""}overlays-${t}`),`--${i?`${i}-`:""}palette-AppBar-darkBg`,`--${i?`${i}-`:""}palette-AppBar-darkColor`],uX=i=>(e,t)=>{const r=i.rootSelector||":root",n=i.colorSchemeSelector;let s=n;if(n==="class"&&(s=".%s"),n==="data"&&(s="[data-%s]"),n?.startsWith("data-")&&!n.includes("%s")&&(s=`[${n}="%s"]`),i.defaultColorScheme===e){if(e==="dark"){const a={};return lX(i.cssVarPrefix).forEach(o=>{a[o]=t[o],delete t[o]}),s==="media"?{[r]:t,"@media (prefers-color-scheme: dark)":{[r]:a}}:s?{[s.replace("%s",e)]:a,[`${r}, ${s.replace("%s",e)}`]:t}:{[r]:{...t,...a}}}if(s&&s!=="media")return`${r}, ${s.replace("%s",String(e))}`}else if(e){if(s==="media")return{[`@media (prefers-color-scheme: ${String(e)})`]:{[r]:t}};if(s)return s.replace("%s",String(e))}return r};function cX(i,e){e.forEach(t=>{i[t]||(i[t]={})})}function tt(i,e,t){!i[e]&&t&&(i[e]=t)}function zm(i){return typeof i!="string"||!i.startsWith("hsl")?i:pF(i)}function zu(i,e){`${e}Channel`in i||(i[`${e}Channel`]=jm(zm(i[e])))}function dX(i){return typeof i=="number"?`${i}px`:typeof i=="string"||typeof i=="function"||Array.isArray(i)?i:"8px"}const $l=i=>{try{return i()}catch{}},hX=(i="mui")=>SK(i);function hS(i,e,t,r){if(!e)return;e=e===!0?{}:e;const n=r==="dark"?"dark":"light";if(!t){i[r]=aX({...e,palette:{mode:n,...e?.palette}});return}const{palette:s,...a}=rC({...t,palette:{mode:n,...e?.palette}});return i[r]={...e,palette:s,opacity:{...AF(n),...e?.opacity},overlays:e?.overlays||IF(n)},a}function fX(i={},...e){const{colorSchemes:t={light:!0},defaultColorScheme:r,disableCssColorScheme:n=!1,cssVarPrefix:s="mui",shouldSkipGeneratingVar:a=oX,colorSchemeSelector:o=t.light&&t.dark?"media":void 0,rootSelector:l=":root",...u}=i,c=Object.keys(t)[0],h=r||(t.light&&c!=="light"?"light":c),m=hX(s),{[h]:g,light:y,dark:_,...T}=t,E={...T};let w=g;if((h==="dark"&&!("dark"in t)||h==="light"&&!("light"in t))&&(w=!0),!w)throw new Error(Eh(21,h));const D=hS(E,w,u,h);y&&!E.light&&hS(E,y,void 0,"light"),_&&!E.dark&&hS(E,_,void 0,"dark");let R={defaultColorScheme:h,...D,cssVarPrefix:s,colorSchemeSelector:o,rootSelector:l,getCssVar:m,colorSchemes:E,font:{...qK(D.typography),...D.font},spacing:dX(u.spacing)};Object.keys(R.colorSchemes).forEach(M=>{const k=R.colorSchemes[M].palette,q=G=>{const H=G.split("-"),re=H[1],se=H[2];return m(G,k[re][se])};if(k.mode==="light"&&(tt(k.common,"background","#fff"),tt(k.common,"onBackground","#000")),k.mode==="dark"&&(tt(k.common,"background","#000"),tt(k.common,"onBackground","#fff")),cX(k,["Alert","AppBar","Avatar","Button","Chip","FilledInput","LinearProgress","Skeleton","Slider","SnackbarContent","SpeedDialAction","StepConnector","StepContent","Switch","TableCell","Tooltip"]),k.mode==="light"){tt(k.Alert,"errorColor",Ei(k.error.light,.6)),tt(k.Alert,"infoColor",Ei(k.info.light,.6)),tt(k.Alert,"successColor",Ei(k.success.light,.6)),tt(k.Alert,"warningColor",Ei(k.warning.light,.6)),tt(k.Alert,"errorFilledBg",q("palette-error-main")),tt(k.Alert,"infoFilledBg",q("palette-info-main")),tt(k.Alert,"successFilledBg",q("palette-success-main")),tt(k.Alert,"warningFilledBg",q("palette-warning-main")),tt(k.Alert,"errorFilledColor",$l(()=>k.getContrastText(k.error.main))),tt(k.Alert,"infoFilledColor",$l(()=>k.getContrastText(k.info.main))),tt(k.Alert,"successFilledColor",$l(()=>k.getContrastText(k.success.main))),tt(k.Alert,"warningFilledColor",$l(()=>k.getContrastText(k.warning.main))),tt(k.Alert,"errorStandardBg",wi(k.error.light,.9)),tt(k.Alert,"infoStandardBg",wi(k.info.light,.9)),tt(k.Alert,"successStandardBg",wi(k.success.light,.9)),tt(k.Alert,"warningStandardBg",wi(k.warning.light,.9)),tt(k.Alert,"errorIconColor",q("palette-error-main")),tt(k.Alert,"infoIconColor",q("palette-info-main")),tt(k.Alert,"successIconColor",q("palette-success-main")),tt(k.Alert,"warningIconColor",q("palette-warning-main")),tt(k.AppBar,"defaultBg",q("palette-grey-100")),tt(k.Avatar,"defaultBg",q("palette-grey-400")),tt(k.Button,"inheritContainedBg",q("palette-grey-300")),tt(k.Button,"inheritContainedHoverBg",q("palette-grey-A100")),tt(k.Chip,"defaultBorder",q("palette-grey-400")),tt(k.Chip,"defaultAvatarColor",q("palette-grey-700")),tt(k.Chip,"defaultIconColor",q("palette-grey-700")),tt(k.FilledInput,"bg","rgba(0, 0, 0, 0.06)"),tt(k.FilledInput,"hoverBg","rgba(0, 0, 0, 0.09)"),tt(k.FilledInput,"disabledBg","rgba(0, 0, 0, 0.12)"),tt(k.LinearProgress,"primaryBg",wi(k.primary.main,.62)),tt(k.LinearProgress,"secondaryBg",wi(k.secondary.main,.62)),tt(k.LinearProgress,"errorBg",wi(k.error.main,.62)),tt(k.LinearProgress,"infoBg",wi(k.info.main,.62)),tt(k.LinearProgress,"successBg",wi(k.success.main,.62)),tt(k.LinearProgress,"warningBg",wi(k.warning.main,.62)),tt(k.Skeleton,"bg",`rgba(${q("palette-text-primaryChannel")} / 0.11)`),tt(k.Slider,"primaryTrack",wi(k.primary.main,.62)),tt(k.Slider,"secondaryTrack",wi(k.secondary.main,.62)),tt(k.Slider,"errorTrack",wi(k.error.main,.62)),tt(k.Slider,"infoTrack",wi(k.info.main,.62)),tt(k.Slider,"successTrack",wi(k.success.main,.62)),tt(k.Slider,"warningTrack",wi(k.warning.main,.62));const G=ov(k.background.default,.8);tt(k.SnackbarContent,"bg",G),tt(k.SnackbarContent,"color",$l(()=>k.getContrastText(G))),tt(k.SpeedDialAction,"fabHoverBg",ov(k.background.paper,.15)),tt(k.StepConnector,"border",q("palette-grey-400")),tt(k.StepContent,"border",q("palette-grey-400")),tt(k.Switch,"defaultColor",q("palette-common-white")),tt(k.Switch,"defaultDisabledColor",q("palette-grey-100")),tt(k.Switch,"primaryDisabledColor",wi(k.primary.main,.62)),tt(k.Switch,"secondaryDisabledColor",wi(k.secondary.main,.62)),tt(k.Switch,"errorDisabledColor",wi(k.error.main,.62)),tt(k.Switch,"infoDisabledColor",wi(k.info.main,.62)),tt(k.Switch,"successDisabledColor",wi(k.success.main,.62)),tt(k.Switch,"warningDisabledColor",wi(k.warning.main,.62)),tt(k.TableCell,"border",wi(av(k.divider,1),.88)),tt(k.Tooltip,"bg",av(k.grey[700],.92))}if(k.mode==="dark"){tt(k.Alert,"errorColor",wi(k.error.light,.6)),tt(k.Alert,"infoColor",wi(k.info.light,.6)),tt(k.Alert,"successColor",wi(k.success.light,.6)),tt(k.Alert,"warningColor",wi(k.warning.light,.6)),tt(k.Alert,"errorFilledBg",q("palette-error-dark")),tt(k.Alert,"infoFilledBg",q("palette-info-dark")),tt(k.Alert,"successFilledBg",q("palette-success-dark")),tt(k.Alert,"warningFilledBg",q("palette-warning-dark")),tt(k.Alert,"errorFilledColor",$l(()=>k.getContrastText(k.error.dark))),tt(k.Alert,"infoFilledColor",$l(()=>k.getContrastText(k.info.dark))),tt(k.Alert,"successFilledColor",$l(()=>k.getContrastText(k.success.dark))),tt(k.Alert,"warningFilledColor",$l(()=>k.getContrastText(k.warning.dark))),tt(k.Alert,"errorStandardBg",Ei(k.error.light,.9)),tt(k.Alert,"infoStandardBg",Ei(k.info.light,.9)),tt(k.Alert,"successStandardBg",Ei(k.success.light,.9)),tt(k.Alert,"warningStandardBg",Ei(k.warning.light,.9)),tt(k.Alert,"errorIconColor",q("palette-error-main")),tt(k.Alert,"infoIconColor",q("palette-info-main")),tt(k.Alert,"successIconColor",q("palette-success-main")),tt(k.Alert,"warningIconColor",q("palette-warning-main")),tt(k.AppBar,"defaultBg",q("palette-grey-900")),tt(k.AppBar,"darkBg",q("palette-background-paper")),tt(k.AppBar,"darkColor",q("palette-text-primary")),tt(k.Avatar,"defaultBg",q("palette-grey-600")),tt(k.Button,"inheritContainedBg",q("palette-grey-800")),tt(k.Button,"inheritContainedHoverBg",q("palette-grey-700")),tt(k.Chip,"defaultBorder",q("palette-grey-700")),tt(k.Chip,"defaultAvatarColor",q("palette-grey-300")),tt(k.Chip,"defaultIconColor",q("palette-grey-300")),tt(k.FilledInput,"bg","rgba(255, 255, 255, 0.09)"),tt(k.FilledInput,"hoverBg","rgba(255, 255, 255, 0.13)"),tt(k.FilledInput,"disabledBg","rgba(255, 255, 255, 0.12)"),tt(k.LinearProgress,"primaryBg",Ei(k.primary.main,.5)),tt(k.LinearProgress,"secondaryBg",Ei(k.secondary.main,.5)),tt(k.LinearProgress,"errorBg",Ei(k.error.main,.5)),tt(k.LinearProgress,"infoBg",Ei(k.info.main,.5)),tt(k.LinearProgress,"successBg",Ei(k.success.main,.5)),tt(k.LinearProgress,"warningBg",Ei(k.warning.main,.5)),tt(k.Skeleton,"bg",`rgba(${q("palette-text-primaryChannel")} / 0.13)`),tt(k.Slider,"primaryTrack",Ei(k.primary.main,.5)),tt(k.Slider,"secondaryTrack",Ei(k.secondary.main,.5)),tt(k.Slider,"errorTrack",Ei(k.error.main,.5)),tt(k.Slider,"infoTrack",Ei(k.info.main,.5)),tt(k.Slider,"successTrack",Ei(k.success.main,.5)),tt(k.Slider,"warningTrack",Ei(k.warning.main,.5));const G=ov(k.background.default,.98);tt(k.SnackbarContent,"bg",G),tt(k.SnackbarContent,"color",$l(()=>k.getContrastText(G))),tt(k.SpeedDialAction,"fabHoverBg",ov(k.background.paper,.15)),tt(k.StepConnector,"border",q("palette-grey-600")),tt(k.StepContent,"border",q("palette-grey-600")),tt(k.Switch,"defaultColor",q("palette-grey-300")),tt(k.Switch,"defaultDisabledColor",q("palette-grey-600")),tt(k.Switch,"primaryDisabledColor",Ei(k.primary.main,.55)),tt(k.Switch,"secondaryDisabledColor",Ei(k.secondary.main,.55)),tt(k.Switch,"errorDisabledColor",Ei(k.error.main,.55)),tt(k.Switch,"infoDisabledColor",Ei(k.info.main,.55)),tt(k.Switch,"successDisabledColor",Ei(k.success.main,.55)),tt(k.Switch,"warningDisabledColor",Ei(k.warning.main,.55)),tt(k.TableCell,"border",Ei(av(k.divider,1),.68)),tt(k.Tooltip,"bg",av(k.grey[700],.92))}zu(k.background,"default"),zu(k.background,"paper"),zu(k.common,"background"),zu(k.common,"onBackground"),zu(k,"divider"),Object.keys(k).forEach(G=>{const H=k[G];G!=="tonalOffset"&&H&&typeof H=="object"&&(H.main&&tt(k[G],"mainChannel",jm(zm(H.main))),H.light&&tt(k[G],"lightChannel",jm(zm(H.light))),H.dark&&tt(k[G],"darkChannel",jm(zm(H.dark))),H.contrastText&&tt(k[G],"contrastTextChannel",jm(zm(H.contrastText))),G==="text"&&(zu(k[G],"primary"),zu(k[G],"secondary")),G==="action"&&(H.active&&zu(k[G],"active"),H.selected&&zu(k[G],"selected")))})}),R=e.reduce((M,k)=>lu(M,k),R);const A={prefix:s,disableCssColorScheme:n,shouldSkipGeneratingVar:a,getSelector:uX(R)},{vars:L,generateThemeVars:F,generateStyleSheets:B}=wK(R,A);return R.vars=L,Object.entries(R.colorSchemes[R.defaultColorScheme]).forEach(([M,k])=>{R[M]=k}),R.generateThemeVars=F,R.generateStyleSheets=B,R.generateSpacing=function(){return sF(u.spacing,kx(this))},R.getColorSchemeSelector=kK(o),R.spacing=R.generateSpacing(),R.shouldSkipGeneratingVar=a,R.unstable_sxConfig={...Q0,...u?.unstable_sxConfig},R.unstable_sx=function(k){return ld({sx:k,theme:this})},R.toRuntimeSource=kF,R}function RP(i,e,t){i.colorSchemes&&t&&(i.colorSchemes[e]={...t!==!0&&t,palette:fw({...t===!0?{}:t.palette,mode:e})})}function Nx(i={},...e){const{palette:t,cssVariables:r=!1,colorSchemes:n=t?void 0:{light:!0},defaultColorScheme:s=t?.mode,...a}=i,o=s||"light",l=n?.[o],u={...n,...t?{[o]:{...typeof l!="boolean"&&l,palette:t}}:void 0};if(r===!1){if(!("colorSchemes"in i))return rC(i,...e);let c=t;"palette"in i||u[o]&&(u[o]!==!0?c=u[o].palette:o==="dark"&&(c={mode:"dark"}));const h=rC({...i,palette:c},...e);return h.defaultColorScheme=o,h.colorSchemes=u,h.palette.mode==="light"&&(h.colorSchemes.light={...u.light!==!0&&u.light,palette:h.palette},RP(h,"dark",u.dark)),h.palette.mode==="dark"&&(h.colorSchemes.dark={...u.dark!==!0&&u.dark,palette:h.palette},RP(h,"light",u.light)),h}return!t&&!("light"in u)&&o==="light"&&(u.light=!0),fX({...a,colorSchemes:u,defaultColorScheme:o,...typeof r!="boolean"&&r},...e)}const pw=Nx();function Ph(){const i=Ox(pw);return i[ul]||i}function DF(i){return i!=="ownerState"&&i!=="theme"&&i!=="sx"&&i!=="as"}const Jn=i=>DF(i)&&i!=="classes",ft=uF({themeId:ul,defaultTheme:pw,rootShouldForwardProp:Jn});function pX({theme:i,...e}){const t=ul in i?i[ul]:void 0;return V.jsx(xF,{...e,themeId:t?ul:void 0,theme:t||i})}const lv={colorSchemeStorageKey:"mui-color-scheme",defaultLightColorScheme:"light",defaultDarkColorScheme:"dark",modeStorageKey:"mui-mode"},{CssVarsProvider:mX}=bK({themeId:ul,theme:()=>Nx({cssVariables:!0}),colorSchemeStorageKey:lv.colorSchemeStorageKey,modeStorageKey:lv.modeStorageKey,defaultColorScheme:{light:lv.defaultLightColorScheme,dark:lv.defaultDarkColorScheme},resolveTheme:i=>{const e={...i,typography:wF(i.palette,i.typography)};return e.unstable_sx=function(r){return ld({sx:r,theme:this})},e}}),gX=mX;function vX({theme:i,...e}){const t=j.useMemo(()=>{if(typeof i=="function")return i;const r=ul in i?i[ul]:i;return"colorSchemes"in r?null:"vars"in r?i:{...i,vars:null}},[i]);return t?V.jsx(pX,{theme:t,...e}):V.jsx(gX,{theme:i,...e})}function ar(i,e,t="Mui"){const r={};return e.forEach(n=>{r[n]=or(i,n,t)}),r}const yX=ar("MuiBox",["root"]),_X=Nx(),hr=jG({themeId:ul,defaultTheme:_X,defaultClassName:yX.root,generateClassName:bF.generate});function lr(i,e,t=void 0){const r={};for(const n in i){const s=i[n];let a="",o=!0;for(let l=0;l<s.length;l+=1){const u=s[l];u&&(a+=(o===!0?"":" ")+e(u),o=!1,t&&t[u]&&(a+=" "+t[u]))}r[n]=a}return r}function xX(i){return V.jsx(BG,{...i,defaultTheme:pw,themeId:ul})}function mw(i){return function(t){return V.jsx(xX,{styles:typeof i=="function"?r=>i({theme:r,...t}):i})}}function TX(){return lw}const Tr=pK;function ur(i){return fK(i)}function bX(i){return or("MuiPaper",i)}ar("MuiPaper",["root","rounded","outlined","elevation","elevation0","elevation1","elevation2","elevation3","elevation4","elevation5","elevation6","elevation7","elevation8","elevation9","elevation10","elevation11","elevation12","elevation13","elevation14","elevation15","elevation16","elevation17","elevation18","elevation19","elevation20","elevation21","elevation22","elevation23","elevation24"]);const SX=i=>{const{square:e,elevation:t,variant:r,classes:n}=i,s={root:["root",r,!e&&"rounded",r==="elevation"&&`elevation${t}`]};return lr(s,bX,n)},CX=ft("div",{name:"MuiPaper",slot:"Root",overridesResolver:(i,e)=>{const{ownerState:t}=i;return[e.root,e[t.variant],!t.square&&e.rounded,t.variant==="elevation"&&e[`elevation${t.elevation}`]]}})(Tr(({theme:i})=>({backgroundColor:(i.vars||i).palette.background.paper,color:(i.vars||i).palette.text.primary,transition:i.transitions.create("box-shadow"),variants:[{props:({ownerState:e})=>!e.square,style:{borderRadius:i.shape.borderRadius}},{props:{variant:"outlined"},style:{border:`1px solid ${(i.vars||i).palette.divider}`}},{props:{variant:"elevation"},style:{boxShadow:"var(--Paper-shadow)",backgroundImage:"var(--Paper-overlay)"}}]}))),Rh=j.forwardRef(function(e,t){const r=ur({props:e,name:"MuiPaper"}),n=Ph(),{className:s,component:a="div",elevation:o=1,square:l=!1,variant:u="elevation",...c}=r,h={...r,component:a,elevation:o,square:l,variant:u},m=SX(h);return V.jsx(CX,{as:a,ownerState:h,className:Nt(m.root,s),ref:t,...c,style:{...u==="elevation"&&{"--Paper-shadow":(n.vars||n).shadows[o],...n.vars&&{"--Paper-overlay":n.vars.overlays?.[o]},...!n.vars&&n.palette.mode==="dark"&&{"--Paper-overlay":`linear-gradient(${Gr("#fff",iC(o))}, ${Gr("#fff",iC(o))})`}},...c.style}})});function LP(i){return i!=null&&!(Array.isArray(i)&&i.length===0)}function a_(i,e=!1){return i&&(LP(i.value)&&i.value!==""||e&&LP(i.defaultValue)&&i.defaultValue!=="")}function EX(i){return i.startAdornment}function ht(i){if(typeof i!="string")throw new Error(Eh(7));return i.charAt(0).toUpperCase()+i.slice(1)}function Ry(i,e){return j.isValidElement(i)&&e.indexOf(i.type.muiName??i.type?._payload?.value?.muiName)!==-1}const Ux=j.createContext(void 0);function wX(i){return or("MuiFormControl",i)}ar("MuiFormControl",["root","marginNone","marginNormal","marginDense","fullWidth","disabled"]);const kX=i=>{const{classes:e,margin:t,fullWidth:r}=i,n={root:["root",t!=="none"&&`margin${ht(t)}`,r&&"fullWidth"]};return lr(n,wX,e)},AX=ft("div",{name:"MuiFormControl",slot:"Root",overridesResolver:(i,e)=>{const{ownerState:t}=i;return[e.root,e[`margin${ht(t.margin)}`],t.fullWidth&&e.fullWidth]}})({display:"inline-flex",flexDirection:"column",position:"relative",minWidth:0,padding:0,margin:0,border:0,verticalAlign:"top",variants:[{props:{margin:"normal"},style:{marginTop:16,marginBottom:8}},{props:{margin:"dense"},style:{marginTop:8,marginBottom:4}},{props:{fullWidth:!0},style:{width:"100%"}}]}),ki=j.forwardRef(function(e,t){const r=ur({props:e,name:"MuiFormControl"}),{children:n,className:s,color:a="primary",component:o="div",disabled:l=!1,error:u=!1,focused:c,fullWidth:h=!1,hiddenLabel:m=!1,margin:g="none",required:y=!1,size:_="medium",variant:T="outlined",...E}=r,w={...r,color:a,component:o,disabled:l,error:u,fullWidth:h,hiddenLabel:m,margin:g,required:y,size:_,variant:T},D=kX(w),[R,A]=j.useState(()=>{let se=!1;return n&&j.Children.forEach(n,de=>{if(!Ry(de,["Input","Select"]))return;const me=Ry(de,["Select"])?de.props.input:de;me&&EX(me.props)&&(se=!0)}),se}),[L,F]=j.useState(()=>{let se=!1;return n&&j.Children.forEach(n,de=>{Ry(de,["Input","Select"])&&(a_(de.props,!0)||a_(de.props.inputProps,!0))&&(se=!0)}),se}),[B,M]=j.useState(!1);l&&B&&M(!1);const k=c!==void 0&&!l?c:B;let q;j.useRef(!1);const G=j.useCallback(()=>{F(!0)},[]),H=j.useCallback(()=>{F(!1)},[]),re=j.useMemo(()=>({adornedStart:R,setAdornedStart:A,color:a,disabled:l,error:u,filled:L,focused:k,fullWidth:h,hiddenLabel:m,size:_,onBlur:()=>{M(!1)},onFocus:()=>{M(!0)},onEmpty:H,onFilled:G,registerEffect:q,required:y,variant:T}),[R,a,l,u,L,k,h,m,q,H,G,y,_,T]);return V.jsx(Ux.Provider,{value:re,children:V.jsx(AX,{as:o,ownerState:w,className:Nt(D.root,s),ref:t,...E,children:n})})});function vl(){return j.useContext(Ux)}let OP=0;function IX(i){const[e,t]=j.useState(i),r=i||e;return j.useEffect(()=>{e==null&&(OP+=1,t(`mui-${OP}`))},[e]),r}const DX={...qy},MP=DX.useId;function Lh(i){if(MP!==void 0){const e=MP();return i??e}return IX(i)}function gw(i,e=166){let t;function r(...n){const s=()=>{i.apply(this,n)};clearTimeout(t),t=setTimeout(s,e)}return r.clear=()=>{clearTimeout(t)},r}function mn(...i){const e=j.useRef(void 0),t=j.useCallback(r=>{const n=i.map(s=>{if(s==null)return null;if(typeof s=="function"){const a=s,o=a(r);return typeof o=="function"?o:()=>{a(null)}}return s.current=r,()=>{s.current=null}});return()=>{n.forEach(s=>s?.())}},i);return j.useMemo(()=>i.every(r=>r==null)?null:r=>{e.current&&(e.current(),e.current=void 0),r!=null&&(e.current=t(r))},i)}const ac=typeof window<"u"?j.useLayoutEffect:j.useEffect;function uu(i){const e=j.useRef(i);return ac(()=>{e.current=i}),j.useRef((...t)=>(0,e.current)(...t)).current}function Pa(i){return i&&i.ownerDocument||document}function pl(i){return Pa(i).defaultView||window}function uv(i){return parseInt(i,10)||0}const PX={shadow:{visibility:"hidden",position:"absolute",overflow:"hidden",height:0,top:0,left:0,transform:"translateZ(0)"}};function RX(i){for(const e in i)return!1;return!0}function FP(i){return RX(i)||i.outerHeightStyle===0&&!i.overflowing}const LX=j.forwardRef(function(e,t){const{onChange:r,maxRows:n,minRows:s=1,style:a,value:o,...l}=e,{current:u}=j.useRef(o!=null),c=j.useRef(null),h=mn(t,c),m=j.useRef(null),g=j.useRef(null),y=j.useCallback(()=>{const D=c.current,R=g.current;if(!D||!R)return;const L=pl(D).getComputedStyle(D);if(L.width==="0px")return{outerHeightStyle:0,overflowing:!1};R.style.width=L.width,R.value=D.value||e.placeholder||"x",R.value.slice(-1)===`
`&&(R.value+=" ");const F=L.boxSizing,B=uv(L.paddingBottom)+uv(L.paddingTop),M=uv(L.borderBottomWidth)+uv(L.borderTopWidth),k=R.scrollHeight;R.value="x";const q=R.scrollHeight;let G=k;s&&(G=Math.max(Number(s)*q,G)),n&&(G=Math.min(Number(n)*q,G)),G=Math.max(G,q);const H=G+(F==="border-box"?B+M:0),re=Math.abs(G-k)<=1;return{outerHeightStyle:H,overflowing:re}},[n,s,e.placeholder]),_=uu(()=>{const D=c.current,R=y();if(!D||!R||FP(R))return!1;const A=R.outerHeightStyle;return m.current!=null&&m.current!==A}),T=j.useCallback(()=>{const D=c.current,R=y();if(!D||!R||FP(R))return;const A=R.outerHeightStyle;m.current!==A&&(m.current=A,D.style.height=`${A}px`),D.style.overflow=R.overflowing?"hidden":""},[y]),E=j.useRef(-1);ac(()=>{const D=gw(T),R=c?.current;if(!R)return;const A=pl(R);A.addEventListener("resize",D);let L;return typeof ResizeObserver<"u"&&(L=new ResizeObserver(()=>{_()&&(L.unobserve(R),cancelAnimationFrame(E.current),T(),E.current=requestAnimationFrame(()=>{L.observe(R)}))}),L.observe(R)),()=>{D.clear(),cancelAnimationFrame(E.current),A.removeEventListener("resize",D),L&&L.disconnect()}},[y,T,_]),ac(()=>{T()});const w=D=>{u||T();const R=D.target,A=R.value.length,L=R.value.endsWith(`
`),F=R.selectionStart===A;L&&F&&R.setSelectionRange(A,A),r&&r(D)};return V.jsxs(j.Fragment,{children:[V.jsx("textarea",{value:o,onChange:w,ref:h,rows:s,style:a,...l}),V.jsx("textarea",{"aria-hidden":!0,className:e.className,readOnly:!0,ref:g,tabIndex:-1,style:{...PX.shadow,...a,paddingTop:0,paddingBottom:0}})]})});function C0(i){return typeof i=="string"}function yd({props:i,states:e,muiFormControl:t}){return e.reduce((r,n)=>(r[n]=i[n],t&&typeof i[n]>"u"&&(r[n]=t[n]),r),{})}function OX(i){return or("MuiInputBase",i)}const rp=ar("MuiInputBase",["root","formControl","focused","disabled","adornedStart","adornedEnd","error","sizeSmall","multiline","colorSecondary","fullWidth","hiddenLabel","readOnly","input","inputSizeSmall","inputMultiline","inputTypeSearch","inputAdornedStart","inputAdornedEnd","inputHiddenLabel"]);var BP;const $x=(i,e)=>{const{ownerState:t}=i;return[e.root,t.formControl&&e.formControl,t.startAdornment&&e.adornedStart,t.endAdornment&&e.adornedEnd,t.error&&e.error,t.size==="small"&&e.sizeSmall,t.multiline&&e.multiline,t.color&&e[`color${ht(t.color)}`],t.fullWidth&&e.fullWidth,t.hiddenLabel&&e.hiddenLabel]},jx=(i,e)=>{const{ownerState:t}=i;return[e.input,t.size==="small"&&e.inputSizeSmall,t.multiline&&e.inputMultiline,t.type==="search"&&e.inputTypeSearch,t.startAdornment&&e.inputAdornedStart,t.endAdornment&&e.inputAdornedEnd,t.hiddenLabel&&e.inputHiddenLabel]},MX=i=>{const{classes:e,color:t,disabled:r,error:n,endAdornment:s,focused:a,formControl:o,fullWidth:l,hiddenLabel:u,multiline:c,readOnly:h,size:m,startAdornment:g,type:y}=i,_={root:["root",`color${ht(t)}`,r&&"disabled",n&&"error",l&&"fullWidth",a&&"focused",o&&"formControl",m&&m!=="medium"&&`size${ht(m)}`,c&&"multiline",g&&"adornedStart",s&&"adornedEnd",u&&"hiddenLabel",h&&"readOnly"],input:["input",r&&"disabled",y==="search"&&"inputTypeSearch",c&&"inputMultiline",m==="small"&&"inputSizeSmall",u&&"inputHiddenLabel",g&&"inputAdornedStart",s&&"inputAdornedEnd",h&&"readOnly"]};return lr(_,OX,e)},zx=ft("div",{name:"MuiInputBase",slot:"Root",overridesResolver:$x})(Tr(({theme:i})=>({...i.typography.body1,color:(i.vars||i).palette.text.primary,lineHeight:"1.4375em",boxSizing:"border-box",position:"relative",cursor:"text",display:"inline-flex",alignItems:"center",[`&.${rp.disabled}`]:{color:(i.vars||i).palette.text.disabled,cursor:"default"},variants:[{props:({ownerState:e})=>e.multiline,style:{padding:"4px 0 5px"}},{props:({ownerState:e,size:t})=>e.multiline&&t==="small",style:{paddingTop:1}},{props:({ownerState:e})=>e.fullWidth,style:{width:"100%"}}]}))),Hx=ft("input",{name:"MuiInputBase",slot:"Input",overridesResolver:jx})(Tr(({theme:i})=>{const e=i.palette.mode==="light",t={color:"currentColor",...i.vars?{opacity:i.vars.opacity.inputPlaceholder}:{opacity:e?.42:.5},transition:i.transitions.create("opacity",{duration:i.transitions.duration.shorter})},r={opacity:"0 !important"},n=i.vars?{opacity:i.vars.opacity.inputPlaceholder}:{opacity:e?.42:.5};return{font:"inherit",letterSpacing:"inherit",color:"currentColor",padding:"4px 0 5px",border:0,boxSizing:"content-box",background:"none",height:"1.4375em",margin:0,WebkitTapHighlightColor:"transparent",display:"block",minWidth:0,width:"100%","&::-webkit-input-placeholder":t,"&::-moz-placeholder":t,"&::-ms-input-placeholder":t,"&:focus":{outline:0},"&:invalid":{boxShadow:"none"},"&::-webkit-search-decoration":{WebkitAppearance:"none"},[`label[data-shrink=false] + .${rp.formControl} &`]:{"&::-webkit-input-placeholder":r,"&::-moz-placeholder":r,"&::-ms-input-placeholder":r,"&:focus::-webkit-input-placeholder":n,"&:focus::-moz-placeholder":n,"&:focus::-ms-input-placeholder":n},[`&.${rp.disabled}`]:{opacity:1,WebkitTextFillColor:(i.vars||i).palette.text.disabled},variants:[{props:({ownerState:s})=>!s.disableInjectingGlobalStyles,style:{animationName:"mui-auto-fill-cancel",animationDuration:"10ms","&:-webkit-autofill":{animationDuration:"5000s",animationName:"mui-auto-fill"}}},{props:{size:"small"},style:{paddingTop:1}},{props:({ownerState:s})=>s.multiline,style:{height:"auto",resize:"none",padding:0,paddingTop:0}},{props:{type:"search"},style:{MozAppearance:"textfield"}}]}})),NP=mw({"@keyframes mui-auto-fill":{from:{display:"block"}},"@keyframes mui-auto-fill-cancel":{from:{display:"block"}}}),vw=j.forwardRef(function(e,t){const r=ur({props:e,name:"MuiInputBase"}),{"aria-describedby":n,autoComplete:s,autoFocus:a,className:o,color:l,components:u={},componentsProps:c={},defaultValue:h,disabled:m,disableInjectingGlobalStyles:g,endAdornment:y,error:_,fullWidth:T=!1,id:E,inputComponent:w="input",inputProps:D={},inputRef:R,margin:A,maxRows:L,minRows:F,multiline:B=!1,name:M,onBlur:k,onChange:q,onClick:G,onFocus:H,onKeyDown:re,onKeyUp:se,placeholder:de,readOnly:me,renderSuffix:ue,rows:oe,size:ce,slotProps:te={},slots:fe={},startAdornment:ye,type:Se="text",value:ke,...qe}=r,vt=D.value!=null?D.value:ke,{current:et}=j.useRef(vt!=null),kt=j.useRef(),pt=j.useCallback(It=>{},[]),Ut=mn(kt,R,D.ref,pt),[Vt,Xe]=j.useState(!1),Ue=vl(),Le=yd({props:r,muiFormControl:Ue,states:["color","disabled","error","hiddenLabel","size","required","filled"]});Le.focused=Ue?Ue.focused:Vt,j.useEffect(()=>{!Ue&&m&&Vt&&(Xe(!1),k&&k())},[Ue,m,Vt,k]);const Ne=Ue&&Ue.onFilled,rt=Ue&&Ue.onEmpty,lt=j.useCallback(It=>{a_(It)?Ne&&Ne():rt&&rt()},[Ne,rt]);ac(()=>{et&&lt({value:vt})},[vt,lt,et]);const dt=It=>{H&&H(It),D.onFocus&&D.onFocus(It),Ue&&Ue.onFocus?Ue.onFocus(It):Xe(!0)},ut=It=>{k&&k(It),D.onBlur&&D.onBlur(It),Ue&&Ue.onBlur?Ue.onBlur(It):Xe(!1)},At=(It,...$t)=>{if(!et){const Bi=It.target||kt.current;if(Bi==null)throw new Error(Eh(1));lt({value:Bi.value})}D.onChange&&D.onChange(It,...$t),q&&q(It,...$t)};j.useEffect(()=>{lt(kt.current)},[]);const it=It=>{kt.current&&It.currentTarget===It.target&&kt.current.focus(),G&&G(It)};let Sr=w,xr=D;B&&Sr==="input"&&(oe?xr={type:void 0,minRows:oe,maxRows:oe,...xr}:xr={type:void 0,maxRows:L,minRows:F,...xr},Sr=LX);const zr=It=>{lt(It.animationName==="mui-auto-fill-cancel"?kt.current:{value:"x"})};j.useEffect(()=>{Ue&&Ue.setAdornedStart(!!ye)},[Ue,ye]);const cr={...r,color:Le.color||"primary",disabled:Le.disabled,endAdornment:y,error:Le.error,focused:Le.focused,formControl:Ue,fullWidth:T,hiddenLabel:Le.hiddenLabel,multiline:B,size:Le.size,startAdornment:ye,type:Se},Gt=MX(cr),Er=fe.root||u.Root||zx,Ir=te.root||c.root||{},Hr=fe.input||u.Input||Hx;return xr={...xr,...te.input??c.input},V.jsxs(j.Fragment,{children:[!g&&typeof NP=="function"&&(BP||(BP=V.jsx(NP,{}))),V.jsxs(Er,{...Ir,ref:t,onClick:it,...qe,...!C0(Er)&&{ownerState:{...cr,...Ir.ownerState}},className:Nt(Gt.root,Ir.className,o,me&&"MuiInputBase-readOnly"),children:[ye,V.jsx(Ux.Provider,{value:null,children:V.jsx(Hr,{"aria-invalid":Le.error,"aria-describedby":n,autoComplete:s,autoFocus:a,defaultValue:h,disabled:Le.disabled,id:E,onAnimationStart:zr,name:M,placeholder:de,readOnly:me,required:Le.required,rows:oe,value:vt,onKeyDown:re,onKeyUp:se,type:Se,...xr,...!C0(Hr)&&{as:Sr,ownerState:{...cr,...xr.ownerState}},ref:Ut,className:Nt(Gt.input,xr.className,me&&"MuiInputBase-readOnly"),onBlur:ut,onChange:At,onFocus:dt})}),y,ue?ue({...Le,startAdornment:ye}):null]})]})});function FX(i){return typeof i.main=="string"}function BX(i,e=[]){if(!FX(i))return!1;for(const t of e)if(!i.hasOwnProperty(t)||typeof i[t]!="string")return!1;return!0}function ds(i=[]){return([,e])=>e&&BX(e,i)}function NX(i){return or("MuiInput",i)}const Sm={...rp,...ar("MuiInput",["root","underline","input"])},UX=i=>{const{classes:e,disableUnderline:t}=i,n=lr({root:["root",!t&&"underline"],input:["input"]},NX,e);return{...e,...n}},$X=ft(zx,{shouldForwardProp:i=>Jn(i)||i==="classes",name:"MuiInput",slot:"Root",overridesResolver:(i,e)=>{const{ownerState:t}=i;return[...$x(i,e),!t.disableUnderline&&e.underline]}})(Tr(({theme:i})=>{let t=i.palette.mode==="light"?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)";return i.vars&&(t=`rgba(${i.vars.palette.common.onBackgroundChannel} / ${i.vars.opacity.inputUnderline})`),{position:"relative",variants:[{props:({ownerState:r})=>r.formControl,style:{"label + &":{marginTop:16}}},{props:({ownerState:r})=>!r.disableUnderline,style:{"&::after":{left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:i.transitions.create("transform",{duration:i.transitions.duration.shorter,easing:i.transitions.easing.easeOut}),pointerEvents:"none"},[`&.${Sm.focused}:after`]:{transform:"scaleX(1) translateX(0)"},[`&.${Sm.error}`]:{"&::before, &::after":{borderBottomColor:(i.vars||i).palette.error.main}},"&::before":{borderBottom:`1px solid ${t}`,left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:i.transitions.create("border-bottom-color",{duration:i.transitions.duration.shorter}),pointerEvents:"none"},[`&:hover:not(.${Sm.disabled}, .${Sm.error}):before`]:{borderBottom:`2px solid ${(i.vars||i).palette.text.primary}`,"@media (hover: none)":{borderBottom:`1px solid ${t}`}},[`&.${Sm.disabled}:before`]:{borderBottomStyle:"dotted"}}},...Object.entries(i.palette).filter(ds()).map(([r])=>({props:{color:r,disableUnderline:!1},style:{"&::after":{borderBottom:`2px solid ${(i.vars||i).palette[r].main}`}}}))]}})),jX=ft(Hx,{name:"MuiInput",slot:"Input",overridesResolver:jx})({}),yw=j.forwardRef(function(e,t){const r=ur({props:e,name:"MuiInput"}),{disableUnderline:n=!1,components:s={},componentsProps:a,fullWidth:o=!1,inputComponent:l="input",multiline:u=!1,slotProps:c,slots:h={},type:m="text",...g}=r,y=UX(r),T={root:{ownerState:{disableUnderline:n}}},E=c??a?lu(c??a,T):T,w=h.root??s.Root??$X,D=h.input??s.Input??jX;return V.jsx(vw,{slots:{root:w,input:D},slotProps:E,fullWidth:o,inputComponent:l,multiline:u,ref:t,type:m,...g,classes:y})});yw.muiName="Input";function zX(i){return or("MuiFilledInput",i)}const zd={...rp,...ar("MuiFilledInput",["root","underline","input","adornedStart","adornedEnd","sizeSmall","multiline","hiddenLabel"])};function nC(...i){return i.reduce((e,t)=>t==null?e:function(...n){e.apply(this,n),t.apply(this,n)},()=>{})}function HX(i){return or("MuiSvgIcon",i)}ar("MuiSvgIcon",["root","colorPrimary","colorSecondary","colorAction","colorError","colorDisabled","fontSizeInherit","fontSizeSmall","fontSizeMedium","fontSizeLarge"]);const VX=i=>{const{color:e,fontSize:t,classes:r}=i,n={root:["root",e!=="inherit"&&`color${ht(e)}`,`fontSize${ht(t)}`]};return lr(n,HX,r)},qX=ft("svg",{name:"MuiSvgIcon",slot:"Root",overridesResolver:(i,e)=>{const{ownerState:t}=i;return[e.root,t.color!=="inherit"&&e[`color${ht(t.color)}`],e[`fontSize${ht(t.fontSize)}`]]}})(Tr(({theme:i})=>({userSelect:"none",width:"1em",height:"1em",display:"inline-block",flexShrink:0,transition:i.transitions?.create?.("fill",{duration:(i.vars??i).transitions?.duration?.shorter}),variants:[{props:e=>!e.hasSvgAsChild,style:{fill:"currentColor"}},{props:{fontSize:"inherit"},style:{fontSize:"inherit"}},{props:{fontSize:"small"},style:{fontSize:i.typography?.pxToRem?.(20)||"1.25rem"}},{props:{fontSize:"medium"},style:{fontSize:i.typography?.pxToRem?.(24)||"1.5rem"}},{props:{fontSize:"large"},style:{fontSize:i.typography?.pxToRem?.(35)||"2.1875rem"}},...Object.entries((i.vars??i).palette).filter(([,e])=>e&&e.main).map(([e])=>({props:{color:e},style:{color:(i.vars??i).palette?.[e]?.main}})),{props:{color:"action"},style:{color:(i.vars??i).palette?.action?.active}},{props:{color:"disabled"},style:{color:(i.vars??i).palette?.action?.disabled}},{props:{color:"inherit"},style:{color:void 0}}]}))),o_=j.forwardRef(function(e,t){const r=ur({props:e,name:"MuiSvgIcon"}),{children:n,className:s,color:a="inherit",component:o="svg",fontSize:l="medium",htmlColor:u,inheritViewBox:c=!1,titleAccess:h,viewBox:m="0 0 24 24",...g}=r,y=j.isValidElement(n)&&n.type==="svg",_={...r,color:a,component:o,fontSize:l,instanceFontSize:e.fontSize,inheritViewBox:c,viewBox:m,hasSvgAsChild:y},T={};c||(T.viewBox=m);const E=VX(_);return V.jsxs(qX,{as:o,className:Nt(E.root,s),focusable:"false",color:u,"aria-hidden":h?void 0:!0,role:h?"img":void 0,ref:t,...T,...g,...y&&n.props,ownerState:_,children:[y?n.props.children:n,h?V.jsx("title",{children:h}):null]})});o_.muiName="SvgIcon";function Qr(i,e){function t(r,n){return V.jsx(o_,{"data-testid":void 0,ref:n,...r,children:i})}return t.muiName=o_.muiName,j.memo(j.forwardRef(t))}function UP(i,e){typeof i=="function"?i(e):i&&(i.current=e)}function l_(i){const{controlled:e,default:t,name:r,state:n="value"}=i,{current:s}=j.useRef(e!==void 0),[a,o]=j.useState(t),l=s?e:a,u=j.useCallback(c=>{s||o(c)},[]);return[l,u]}function WX(i,e){const t=i.charCodeAt(2);return i[0]==="o"&&i[1]==="n"&&t>=65&&t<=90&&typeof e=="function"}function _w(i,e){if(!i)return e;function t(a,o){const l={};return Object.keys(o).forEach(u=>{WX(u,o[u])&&typeof a[u]=="function"&&(l[u]=(...c)=>{a[u](...c),o[u](...c)})}),l}if(typeof i=="function"||typeof e=="function")return a=>{const o=typeof e=="function"?e(a):e,l=typeof i=="function"?i({...a,...o}):i,u=Nt(a?.className,o?.className,l?.className),c=t(l,o);return{...o,...l,...c,...!!u&&{className:u},...o?.style&&l?.style&&{style:{...o.style,...l.style}},...o?.sx&&l?.sx&&{sx:[...Array.isArray(o.sx)?o.sx:[o.sx],...Array.isArray(l.sx)?l.sx:[l.sx]]}}};const r=e,n=t(i,r),s=Nt(r?.className,i?.className);return{...e,...i,...n,...!!s&&{className:s},...r?.style&&i?.style&&{style:{...r.style,...i.style}},...r?.sx&&i?.sx&&{sx:[...Array.isArray(r.sx)?r.sx:[r.sx],...Array.isArray(i.sx)?i.sx:[i.sx]]}}}const GX=i=>{const{classes:e,disableUnderline:t,startAdornment:r,endAdornment:n,size:s,hiddenLabel:a,multiline:o}=i,l={root:["root",!t&&"underline",r&&"adornedStart",n&&"adornedEnd",s==="small"&&`size${ht(s)}`,a&&"hiddenLabel",o&&"multiline"],input:["input"]},u=lr(l,zX,e);return{...e,...u}},KX=ft(zx,{shouldForwardProp:i=>Jn(i)||i==="classes",name:"MuiFilledInput",slot:"Root",overridesResolver:(i,e)=>{const{ownerState:t}=i;return[...$x(i,e),!t.disableUnderline&&e.underline]}})(Tr(({theme:i})=>{const e=i.palette.mode==="light",t=e?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)",r=e?"rgba(0, 0, 0, 0.06)":"rgba(255, 255, 255, 0.09)",n=e?"rgba(0, 0, 0, 0.09)":"rgba(255, 255, 255, 0.13)",s=e?"rgba(0, 0, 0, 0.12)":"rgba(255, 255, 255, 0.12)";return{position:"relative",backgroundColor:i.vars?i.vars.palette.FilledInput.bg:r,borderTopLeftRadius:(i.vars||i).shape.borderRadius,borderTopRightRadius:(i.vars||i).shape.borderRadius,transition:i.transitions.create("background-color",{duration:i.transitions.duration.shorter,easing:i.transitions.easing.easeOut}),"&:hover":{backgroundColor:i.vars?i.vars.palette.FilledInput.hoverBg:n,"@media (hover: none)":{backgroundColor:i.vars?i.vars.palette.FilledInput.bg:r}},[`&.${zd.focused}`]:{backgroundColor:i.vars?i.vars.palette.FilledInput.bg:r},[`&.${zd.disabled}`]:{backgroundColor:i.vars?i.vars.palette.FilledInput.disabledBg:s},variants:[{props:({ownerState:a})=>!a.disableUnderline,style:{"&::after":{left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:i.transitions.create("transform",{duration:i.transitions.duration.shorter,easing:i.transitions.easing.easeOut}),pointerEvents:"none"},[`&.${zd.focused}:after`]:{transform:"scaleX(1) translateX(0)"},[`&.${zd.error}`]:{"&::before, &::after":{borderBottomColor:(i.vars||i).palette.error.main}},"&::before":{borderBottom:`1px solid ${i.vars?`rgba(${i.vars.palette.common.onBackgroundChannel} / ${i.vars.opacity.inputUnderline})`:t}`,left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:i.transitions.create("border-bottom-color",{duration:i.transitions.duration.shorter}),pointerEvents:"none"},[`&:hover:not(.${zd.disabled}, .${zd.error}):before`]:{borderBottom:`1px solid ${(i.vars||i).palette.text.primary}`},[`&.${zd.disabled}:before`]:{borderBottomStyle:"dotted"}}},...Object.entries(i.palette).filter(ds()).map(([a])=>({props:{disableUnderline:!1,color:a},style:{"&::after":{borderBottom:`2px solid ${(i.vars||i).palette[a]?.main}`}}})),{props:({ownerState:a})=>a.startAdornment,style:{paddingLeft:12}},{props:({ownerState:a})=>a.endAdornment,style:{paddingRight:12}},{props:({ownerState:a})=>a.multiline,style:{padding:"25px 12px 8px"}},{props:({ownerState:a,size:o})=>a.multiline&&o==="small",style:{paddingTop:21,paddingBottom:4}},{props:({ownerState:a})=>a.multiline&&a.hiddenLabel,style:{paddingTop:16,paddingBottom:17}},{props:({ownerState:a})=>a.multiline&&a.hiddenLabel&&a.size==="small",style:{paddingTop:8,paddingBottom:9}}]}})),XX=ft(Hx,{name:"MuiFilledInput",slot:"Input",overridesResolver:jx})(Tr(({theme:i})=>({paddingTop:25,paddingRight:12,paddingBottom:8,paddingLeft:12,...!i.vars&&{"&:-webkit-autofill":{WebkitBoxShadow:i.palette.mode==="light"?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:i.palette.mode==="light"?null:"#fff",caretColor:i.palette.mode==="light"?null:"#fff",borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"}},...i.vars&&{"&:-webkit-autofill":{borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"},[i.getColorSchemeSelector("dark")]:{"&:-webkit-autofill":{WebkitBoxShadow:"0 0 0 100px #266798 inset",WebkitTextFillColor:"#fff",caretColor:"#fff"}}},variants:[{props:{size:"small"},style:{paddingTop:21,paddingBottom:4}},{props:({ownerState:e})=>e.hiddenLabel,style:{paddingTop:16,paddingBottom:17}},{props:({ownerState:e})=>e.startAdornment,style:{paddingLeft:0}},{props:({ownerState:e})=>e.endAdornment,style:{paddingRight:0}},{props:({ownerState:e})=>e.hiddenLabel&&e.size==="small",style:{paddingTop:8,paddingBottom:9}},{props:({ownerState:e})=>e.multiline,style:{paddingTop:0,paddingBottom:0,paddingLeft:0,paddingRight:0}}]}))),xw=j.forwardRef(function(e,t){const r=ur({props:e,name:"MuiFilledInput"}),{disableUnderline:n=!1,components:s={},componentsProps:a,fullWidth:o=!1,hiddenLabel:l,inputComponent:u="input",multiline:c=!1,slotProps:h,slots:m={},type:g="text",...y}=r,_={...r,disableUnderline:n,fullWidth:o,inputComponent:u,multiline:c,type:g},T=GX(r),E={root:{ownerState:_},input:{ownerState:_}},w=h??a?lu(E,h??a):E,D=m.root??s.Root??KX,R=m.input??s.Input??XX;return V.jsx(vw,{slots:{root:D,input:R},slotProps:w,fullWidth:o,inputComponent:u,multiline:c,ref:t,type:g,...y,classes:T})});xw.muiName="Input";var $P;const YX=ft("fieldset",{shouldForwardProp:Jn})({textAlign:"left",position:"absolute",bottom:0,right:0,top:-5,left:0,margin:0,padding:"0 8px",pointerEvents:"none",borderRadius:"inherit",borderStyle:"solid",borderWidth:1,overflow:"hidden",minWidth:"0%"}),QX=ft("legend",{shouldForwardProp:Jn})(Tr(({theme:i})=>({float:"unset",width:"auto",overflow:"hidden",variants:[{props:({ownerState:e})=>!e.withLabel,style:{padding:0,lineHeight:"11px",transition:i.transitions.create("width",{duration:150,easing:i.transitions.easing.easeOut})}},{props:({ownerState:e})=>e.withLabel,style:{display:"block",padding:0,height:11,fontSize:"0.75em",visibility:"hidden",maxWidth:.01,transition:i.transitions.create("max-width",{duration:50,easing:i.transitions.easing.easeOut}),whiteSpace:"nowrap","& > span":{paddingLeft:5,paddingRight:5,display:"inline-block",opacity:0,visibility:"visible"}}},{props:({ownerState:e})=>e.withLabel&&e.notched,style:{maxWidth:"100%",transition:i.transitions.create("max-width",{duration:100,easing:i.transitions.easing.easeOut,delay:50})}}]})));function JX(i){const{children:e,classes:t,className:r,label:n,notched:s,...a}=i,o=n!=null&&n!=="",l={...i,notched:s,withLabel:o};return V.jsx(YX,{"aria-hidden":!0,className:r,ownerState:l,...a,children:V.jsx(QX,{ownerState:l,children:o?V.jsx("span",{children:n}):$P||($P=V.jsx("span",{className:"notranslate","aria-hidden":!0,children:""}))})})}function ZX(i){return or("MuiOutlinedInput",i)}const jl={...rp,...ar("MuiOutlinedInput",["root","notchedOutline","input"])};function eY(i){return typeof i=="string"}function PF(i,e,t){return i===void 0||eY(i)?e:{...e,ownerState:{...e.ownerState,...t}}}function RF(i,e,t){return typeof i=="function"?i(e,t):i}function u_(i,e=[]){if(i===void 0)return{};const t={};return Object.keys(i).filter(r=>r.match(/^on[A-Z]/)&&typeof i[r]=="function"&&!e.includes(r)).forEach(r=>{t[r]=i[r]}),t}function jP(i){if(i===void 0)return{};const e={};return Object.keys(i).filter(t=>!(t.match(/^on[A-Z]/)&&typeof i[t]=="function")).forEach(t=>{e[t]=i[t]}),e}function LF(i){const{getSlotProps:e,additionalProps:t,externalSlotProps:r,externalForwardedProps:n,className:s}=i;if(!e){const g=Nt(t?.className,s,n?.className,r?.className),y={...t?.style,...n?.style,...r?.style},_={...t,...n,...r};return g.length>0&&(_.className=g),Object.keys(y).length>0&&(_.style=y),{props:_,internalRef:void 0}}const a=u_({...n,...r}),o=jP(r),l=jP(n),u=e(a),c=Nt(u?.className,t?.className,s,n?.className,r?.className),h={...u?.style,...t?.style,...n?.style,...r?.style},m={...u,...t,...l,...o};return c.length>0&&(m.className=c),Object.keys(h).length>0&&(m.style=h),{props:m,internalRef:u.ref}}function Lr(i,e){const{className:t,elementType:r,ownerState:n,externalForwardedProps:s,internalForwardedProps:a,shouldForwardComponentProp:o=!1,...l}=e,{component:u,slots:c={[i]:void 0},slotProps:h={[i]:void 0},...m}=s,g=c[i]||r,y=RF(h[i],n),{props:{component:_,...T},internalRef:E}=LF({className:t,...l,externalForwardedProps:i==="root"?m:void 0,externalSlotProps:y}),w=mn(E,y?.ref,e.ref),D=i==="root"?_||u:_,R=PF(g,{...i==="root"&&!u&&!c[i]&&a,...i!=="root"&&!c[i]&&a,...T,...D&&!o&&{as:D},...D&&o&&{component:D},ref:w},n);return[g,R]}const tY=i=>{const{classes:e}=i,r=lr({root:["root"],notchedOutline:["notchedOutline"],input:["input"]},ZX,e);return{...e,...r}},rY=ft(zx,{shouldForwardProp:i=>Jn(i)||i==="classes",name:"MuiOutlinedInput",slot:"Root",overridesResolver:$x})(Tr(({theme:i})=>{const e=i.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return{position:"relative",borderRadius:(i.vars||i).shape.borderRadius,[`&:hover .${jl.notchedOutline}`]:{borderColor:(i.vars||i).palette.text.primary},"@media (hover: none)":{[`&:hover .${jl.notchedOutline}`]:{borderColor:i.vars?`rgba(${i.vars.palette.common.onBackgroundChannel} / 0.23)`:e}},[`&.${jl.focused} .${jl.notchedOutline}`]:{borderWidth:2},variants:[...Object.entries(i.palette).filter(ds()).map(([t])=>({props:{color:t},style:{[`&.${jl.focused} .${jl.notchedOutline}`]:{borderColor:(i.vars||i).palette[t].main}}})),{props:{},style:{[`&.${jl.error} .${jl.notchedOutline}`]:{borderColor:(i.vars||i).palette.error.main},[`&.${jl.disabled} .${jl.notchedOutline}`]:{borderColor:(i.vars||i).palette.action.disabled}}},{props:({ownerState:t})=>t.startAdornment,style:{paddingLeft:14}},{props:({ownerState:t})=>t.endAdornment,style:{paddingRight:14}},{props:({ownerState:t})=>t.multiline,style:{padding:"16.5px 14px"}},{props:({ownerState:t,size:r})=>t.multiline&&r==="small",style:{padding:"8.5px 14px"}}]}})),iY=ft(JX,{name:"MuiOutlinedInput",slot:"NotchedOutline"})(Tr(({theme:i})=>{const e=i.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return{borderColor:i.vars?`rgba(${i.vars.palette.common.onBackgroundChannel} / 0.23)`:e}})),nY=ft(Hx,{name:"MuiOutlinedInput",slot:"Input",overridesResolver:jx})(Tr(({theme:i})=>({padding:"16.5px 14px",...!i.vars&&{"&:-webkit-autofill":{WebkitBoxShadow:i.palette.mode==="light"?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:i.palette.mode==="light"?null:"#fff",caretColor:i.palette.mode==="light"?null:"#fff",borderRadius:"inherit"}},...i.vars&&{"&:-webkit-autofill":{borderRadius:"inherit"},[i.getColorSchemeSelector("dark")]:{"&:-webkit-autofill":{WebkitBoxShadow:"0 0 0 100px #266798 inset",WebkitTextFillColor:"#fff",caretColor:"#fff"}}},variants:[{props:{size:"small"},style:{padding:"8.5px 14px"}},{props:({ownerState:e})=>e.multiline,style:{padding:0}},{props:({ownerState:e})=>e.startAdornment,style:{paddingLeft:0}},{props:({ownerState:e})=>e.endAdornment,style:{paddingRight:0}}]}))),Vx=j.forwardRef(function(e,t){const r=ur({props:e,name:"MuiOutlinedInput"}),{components:n={},fullWidth:s=!1,inputComponent:a="input",label:o,multiline:l=!1,notched:u,slots:c={},slotProps:h={},type:m="text",...g}=r,y=tY(r),_=vl(),T=yd({props:r,muiFormControl:_,states:["color","disabled","error","focused","hiddenLabel","size","required"]}),E={...r,color:T.color||"primary",disabled:T.disabled,error:T.error,focused:T.focused,formControl:_,fullWidth:s,hiddenLabel:T.hiddenLabel,multiline:l,size:T.size,type:m},w=c.root??n.Root??rY,D=c.input??n.Input??nY,[R,A]=Lr("notchedOutline",{elementType:iY,className:y.notchedOutline,shouldForwardComponentProp:!0,ownerState:E,externalForwardedProps:{slots:c,slotProps:h},additionalProps:{label:o!=null&&o!==""&&T.required?V.jsxs(j.Fragment,{children:[o,"","*"]}):o}});return V.jsx(vw,{slots:{root:w,input:D},slotProps:h,renderSuffix:L=>V.jsx(R,{...A,notched:typeof u<"u"?u:!!(L.startAdornment||L.filled||L.focused)}),fullWidth:s,inputComponent:a,multiline:l,ref:t,type:m,...g,classes:{...y,notchedOutline:null}})});Vx.muiName="Input";function sY(i){return or("MuiFormLabel",i)}const t0=ar("MuiFormLabel",["root","colorSecondary","focused","disabled","error","filled","required","asterisk"]),aY=i=>{const{classes:e,color:t,focused:r,disabled:n,error:s,filled:a,required:o}=i,l={root:["root",`color${ht(t)}`,n&&"disabled",s&&"error",a&&"filled",r&&"focused",o&&"required"],asterisk:["asterisk",s&&"error"]};return lr(l,sY,e)},oY=ft("label",{name:"MuiFormLabel",slot:"Root",overridesResolver:(i,e)=>{const{ownerState:t}=i;return[e.root,t.color==="secondary"&&e.colorSecondary,t.filled&&e.filled]}})(Tr(({theme:i})=>({color:(i.vars||i).palette.text.secondary,...i.typography.body1,lineHeight:"1.4375em",padding:0,position:"relative",variants:[...Object.entries(i.palette).filter(ds()).map(([e])=>({props:{color:e},style:{[`&.${t0.focused}`]:{color:(i.vars||i).palette[e].main}}})),{props:{},style:{[`&.${t0.disabled}`]:{color:(i.vars||i).palette.text.disabled},[`&.${t0.error}`]:{color:(i.vars||i).palette.error.main}}}]}))),lY=ft("span",{name:"MuiFormLabel",slot:"Asterisk"})(Tr(({theme:i})=>({[`&.${t0.error}`]:{color:(i.vars||i).palette.error.main}}))),OF=j.forwardRef(function(e,t){const r=ur({props:e,name:"MuiFormLabel"}),{children:n,className:s,color:a,component:o="label",disabled:l,error:u,filled:c,focused:h,required:m,...g}=r,y=vl(),_=yd({props:r,muiFormControl:y,states:["color","required","focused","disabled","error","filled"]}),T={...r,color:_.color||"primary",component:o,disabled:_.disabled,error:_.error,filled:_.filled,focused:_.focused,required:_.required},E=aY(T);return V.jsxs(oY,{as:o,ownerState:T,className:Nt(E.root,s),ref:t,...g,children:[n,_.required&&V.jsxs(lY,{ownerState:T,"aria-hidden":!0,className:E.asterisk,children:["","*"]})]})});function uY(i){return or("MuiInputLabel",i)}ar("MuiInputLabel",["root","focused","disabled","error","required","asterisk","formControl","sizeSmall","shrink","animated","standard","filled","outlined"]);const cY=i=>{const{classes:e,formControl:t,size:r,shrink:n,disableAnimation:s,variant:a,required:o}=i,l={root:["root",t&&"formControl",!s&&"animated",n&&"shrink",r&&r!=="medium"&&`size${ht(r)}`,a],asterisk:[o&&"asterisk"]},u=lr(l,uY,e);return{...e,...u}},dY=ft(OF,{shouldForwardProp:i=>Jn(i)||i==="classes",name:"MuiInputLabel",slot:"Root",overridesResolver:(i,e)=>{const{ownerState:t}=i;return[{[`& .${t0.asterisk}`]:e.asterisk},e.root,t.formControl&&e.formControl,t.size==="small"&&e.sizeSmall,t.shrink&&e.shrink,!t.disableAnimation&&e.animated,t.focused&&e.focused,e[t.variant]]}})(Tr(({theme:i})=>({display:"block",transformOrigin:"top left",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:"100%",variants:[{props:({ownerState:e})=>e.formControl,style:{position:"absolute",left:0,top:0,transform:"translate(0, 20px) scale(1)"}},{props:{size:"small"},style:{transform:"translate(0, 17px) scale(1)"}},{props:({ownerState:e})=>e.shrink,style:{transform:"translate(0, -1.5px) scale(0.75)",transformOrigin:"top left",maxWidth:"133%"}},{props:({ownerState:e})=>!e.disableAnimation,style:{transition:i.transitions.create(["color","transform","max-width"],{duration:i.transitions.duration.shorter,easing:i.transitions.easing.easeOut})}},{props:{variant:"filled"},style:{zIndex:1,pointerEvents:"none",transform:"translate(12px, 16px) scale(1)",maxWidth:"calc(100% - 24px)"}},{props:{variant:"filled",size:"small"},style:{transform:"translate(12px, 13px) scale(1)"}},{props:({variant:e,ownerState:t})=>e==="filled"&&t.shrink,style:{userSelect:"none",pointerEvents:"auto",transform:"translate(12px, 7px) scale(0.75)",maxWidth:"calc(133% - 24px)"}},{props:({variant:e,ownerState:t,size:r})=>e==="filled"&&t.shrink&&r==="small",style:{transform:"translate(12px, 4px) scale(0.75)"}},{props:{variant:"outlined"},style:{zIndex:1,pointerEvents:"none",transform:"translate(14px, 16px) scale(1)",maxWidth:"calc(100% - 24px)"}},{props:{variant:"outlined",size:"small"},style:{transform:"translate(14px, 9px) scale(1)"}},{props:({variant:e,ownerState:t})=>e==="outlined"&&t.shrink,style:{userSelect:"none",pointerEvents:"auto",maxWidth:"calc(133% - 32px)",transform:"translate(14px, -9px) scale(0.75)"}}]}))),E0=j.forwardRef(function(e,t){const r=ur({name:"MuiInputLabel",props:e}),{disableAnimation:n=!1,margin:s,shrink:a,variant:o,className:l,...u}=r,c=vl();let h=a;typeof h>"u"&&c&&(h=c.filled||c.focused||c.adornedStart);const m=yd({props:r,muiFormControl:c,states:["size","variant","required","focused"]}),g={...r,disableAnimation:n,formControl:c,shrink:h,size:m.size,variant:m.variant,required:m.required,focused:m.focused},y=cY(g);return V.jsx(dY,{"data-shrink":h,ref:t,className:Nt(y.root,l),...u,ownerState:g,classes:y})});function hY(i){return or("MuiFormHelperText",i)}const zP=ar("MuiFormHelperText",["root","error","disabled","sizeSmall","sizeMedium","contained","focused","filled","required"]);var HP;const fY=i=>{const{classes:e,contained:t,size:r,disabled:n,error:s,filled:a,focused:o,required:l}=i,u={root:["root",n&&"disabled",s&&"error",r&&`size${ht(r)}`,t&&"contained",o&&"focused",a&&"filled",l&&"required"]};return lr(u,hY,e)},pY=ft("p",{name:"MuiFormHelperText",slot:"Root",overridesResolver:(i,e)=>{const{ownerState:t}=i;return[e.root,t.size&&e[`size${ht(t.size)}`],t.contained&&e.contained,t.filled&&e.filled]}})(Tr(({theme:i})=>({color:(i.vars||i).palette.text.secondary,...i.typography.caption,textAlign:"left",marginTop:3,marginRight:0,marginBottom:0,marginLeft:0,[`&.${zP.disabled}`]:{color:(i.vars||i).palette.text.disabled},[`&.${zP.error}`]:{color:(i.vars||i).palette.error.main},variants:[{props:{size:"small"},style:{marginTop:4}},{props:({ownerState:e})=>e.contained,style:{marginLeft:14,marginRight:14}}]}))),mY=j.forwardRef(function(e,t){const r=ur({props:e,name:"MuiFormHelperText"}),{children:n,className:s,component:a="p",disabled:o,error:l,filled:u,focused:c,margin:h,required:m,variant:g,...y}=r,_=vl(),T=yd({props:r,muiFormControl:_,states:["variant","size","disabled","error","filled","focused","required"]}),E={...r,component:a,contained:T.variant==="filled"||T.variant==="outlined",variant:T.variant,size:T.size,disabled:T.disabled,error:T.error,filled:T.filled,focused:T.focused,required:T.required};delete E.ownerState;const w=fY(E);return V.jsx(pY,{as:a,className:Nt(w.root,s),ref:t,...y,ownerState:E,children:n===" "?HP||(HP=V.jsx("span",{className:"notranslate","aria-hidden":!0,children:""})):n})});function Oh(i){return parseInt(j.version,10)>=19?i?.props?.ref||null:i?.ref||null}function gY(i){const{elementType:e,externalSlotProps:t,ownerState:r,skipResolvingSlotProps:n=!1,...s}=i,a=n?{}:RF(t,r),{props:o,internalRef:l}=LF({...s,externalSlotProps:a}),u=mn(l,a?.ref,i.additionalProps?.ref);return PF(e,{...o,ref:u},r)}const cl=j.createContext({});function vY(i){return or("MuiList",i)}ar("MuiList",["root","padding","dense","subheader"]);const yY=i=>{const{classes:e,disablePadding:t,dense:r,subheader:n}=i;return lr({root:["root",!t&&"padding",r&&"dense",n&&"subheader"]},vY,e)},_Y=ft("ul",{name:"MuiList",slot:"Root",overridesResolver:(i,e)=>{const{ownerState:t}=i;return[e.root,!t.disablePadding&&e.padding,t.dense&&e.dense,t.subheader&&e.subheader]}})({listStyle:"none",margin:0,padding:0,position:"relative",variants:[{props:({ownerState:i})=>!i.disablePadding,style:{paddingTop:8,paddingBottom:8}},{props:({ownerState:i})=>i.subheader,style:{paddingTop:0}}]}),MF=j.forwardRef(function(e,t){const r=ur({props:e,name:"MuiList"}),{children:n,className:s,component:a="ul",dense:o=!1,disablePadding:l=!1,subheader:u,...c}=r,h=j.useMemo(()=>({dense:o}),[o]),m={...r,component:a,dense:o,disablePadding:l},g=yY(m);return V.jsx(cl.Provider,{value:h,children:V.jsxs(_Y,{as:a,className:Nt(g.root,s),ref:t,ownerState:m,...c,children:[u,n]})})});function FF(i=window){const e=i.document.documentElement.clientWidth;return i.innerWidth-e}function fS(i,e,t){return i===e?i.firstChild:e&&e.nextElementSibling?e.nextElementSibling:t?null:i.firstChild}function VP(i,e,t){return i===e?t?i.firstChild:i.lastChild:e&&e.previousElementSibling?e.previousElementSibling:t?null:i.lastChild}function BF(i,e){if(e===void 0)return!0;let t=i.innerText;return t===void 0&&(t=i.textContent),t=t.trim().toLowerCase(),t.length===0?!1:e.repeating?t[0]===e.keys[0]:t.startsWith(e.keys.join(""))}function Cm(i,e,t,r,n,s){let a=!1,o=n(i,e,e?t:!1);for(;o;){if(o===i.firstChild){if(a)return!1;a=!0}const l=r?!1:o.disabled||o.getAttribute("aria-disabled")==="true";if(!o.hasAttribute("tabindex")||!BF(o,s)||l)o=n(i,o,t);else return o.focus(),!0}return!1}const xY=j.forwardRef(function(e,t){const{actions:r,autoFocus:n=!1,autoFocusItem:s=!1,children:a,className:o,disabledItemsFocusable:l=!1,disableListWrap:u=!1,onKeyDown:c,variant:h="selectedMenu",...m}=e,g=j.useRef(null),y=j.useRef({keys:[],repeating:!0,previousKeyMatched:!0,lastTime:null});ac(()=>{n&&g.current.focus()},[n]),j.useImperativeHandle(r,()=>({adjustStyleForScrollbar:(D,{direction:R})=>{const A=!g.current.style.width;if(D.clientHeight<g.current.clientHeight&&A){const L=`${FF(pl(D))}px`;g.current.style[R==="rtl"?"paddingLeft":"paddingRight"]=L,g.current.style.width=`calc(100% + ${L})`}return g.current}}),[]);const _=D=>{const R=g.current,A=D.key;if(D.ctrlKey||D.metaKey||D.altKey){c&&c(D);return}const F=Pa(R).activeElement;if(A==="ArrowDown")D.preventDefault(),Cm(R,F,u,l,fS);else if(A==="ArrowUp")D.preventDefault(),Cm(R,F,u,l,VP);else if(A==="Home")D.preventDefault(),Cm(R,null,u,l,fS);else if(A==="End")D.preventDefault(),Cm(R,null,u,l,VP);else if(A.length===1){const B=y.current,M=A.toLowerCase(),k=performance.now();B.keys.length>0&&(k-B.lastTime>500?(B.keys=[],B.repeating=!0,B.previousKeyMatched=!0):B.repeating&&M!==B.keys[0]&&(B.repeating=!1)),B.lastTime=k,B.keys.push(M);const q=F&&!B.repeating&&BF(F,B);B.previousKeyMatched&&(q||Cm(R,F,!1,l,fS,B))?D.preventDefault():B.previousKeyMatched=!1}c&&c(D)},T=mn(g,t);let E=-1;j.Children.forEach(a,(D,R)=>{if(!j.isValidElement(D)){E===R&&(E+=1,E>=a.length&&(E=-1));return}D.props.disabled||(h==="selectedMenu"&&D.props.selected||E===-1)&&(E=R),E===R&&(D.props.disabled||D.props.muiSkipListHighlight||D.type.muiSkipListHighlight)&&(E+=1,E>=a.length&&(E=-1))});const w=j.Children.map(a,(D,R)=>{if(R===E){const A={};return s&&(A.autoFocus=!0),D.props.tabIndex===void 0&&h==="selectedMenu"&&(A.tabIndex=0),j.cloneElement(D,A)}return D});return V.jsx(MF,{role:"menu",ref:T,className:o,onKeyDown:_,tabIndex:n?0:-1,...m,children:w})}),qP={};function NF(i,e){const t=j.useRef(qP);return t.current===qP&&(t.current=i(e)),t}const TY=[];function bY(i){j.useEffect(i,TY)}class Tw{static create(){return new Tw}currentId=null;start(e,t){this.clear(),this.currentId=setTimeout(()=>{this.currentId=null,t()},e)}clear=()=>{this.currentId!==null&&(clearTimeout(this.currentId),this.currentId=null)};disposeEffect=()=>this.clear}function bw(){const i=NF(Tw.create).current;return bY(i.disposeEffect),i}function qx(i,e){if(i==null)return{};var t={};for(var r in i)if({}.hasOwnProperty.call(i,r)){if(e.indexOf(r)!==-1)continue;t[r]=i[r]}return t}function ip(i,e){return ip=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,r){return t.__proto__=r,t},ip(i,e)}function Ft(i,e){i.prototype=Object.create(e.prototype),i.prototype.constructor=i,ip(i,e)}const WP={disabled:!1},c_=ea.createContext(null);var SY=function(e){return e.scrollTop},Hm="unmounted",Kd="exited",Xd="entering",xf="entered",sC="exiting",yl=(function(i){Ft(e,i);function e(r,n){var s;s=i.call(this,r,n)||this;var a=n,o=a&&!a.isMounting?r.enter:r.appear,l;return s.appearStatus=null,r.in?o?(l=Kd,s.appearStatus=Xd):l=xf:r.unmountOnExit||r.mountOnEnter?l=Hm:l=Kd,s.state={status:l},s.nextCallback=null,s}e.getDerivedStateFromProps=function(n,s){var a=n.in;return a&&s.status===Hm?{status:Kd}:null};var t=e.prototype;return t.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},t.componentDidUpdate=function(n){var s=null;if(n!==this.props){var a=this.state.status;this.props.in?a!==Xd&&a!==xf&&(s=Xd):(a===Xd||a===xf)&&(s=sC)}this.updateStatus(!1,s)},t.componentWillUnmount=function(){this.cancelNextCallback()},t.getTimeouts=function(){var n=this.props.timeout,s,a,o;return s=a=o=n,n!=null&&typeof n!="number"&&(s=n.exit,a=n.enter,o=n.appear!==void 0?n.appear:a),{exit:s,enter:a,appear:o}},t.updateStatus=function(n,s){if(n===void 0&&(n=!1),s!==null)if(this.cancelNextCallback(),s===Xd){if(this.props.unmountOnExit||this.props.mountOnEnter){var a=this.props.nodeRef?this.props.nodeRef.current:nv.findDOMNode(this);a&&SY(a)}this.performEnter(n)}else this.performExit();else this.props.unmountOnExit&&this.state.status===Kd&&this.setState({status:Hm})},t.performEnter=function(n){var s=this,a=this.props.enter,o=this.context?this.context.isMounting:n,l=this.props.nodeRef?[o]:[nv.findDOMNode(this),o],u=l[0],c=l[1],h=this.getTimeouts(),m=o?h.appear:h.enter;if(!n&&!a||WP.disabled){this.safeSetState({status:xf},function(){s.props.onEntered(u)});return}this.props.onEnter(u,c),this.safeSetState({status:Xd},function(){s.props.onEntering(u,c),s.onTransitionEnd(m,function(){s.safeSetState({status:xf},function(){s.props.onEntered(u,c)})})})},t.performExit=function(){var n=this,s=this.props.exit,a=this.getTimeouts(),o=this.props.nodeRef?void 0:nv.findDOMNode(this);if(!s||WP.disabled){this.safeSetState({status:Kd},function(){n.props.onExited(o)});return}this.props.onExit(o),this.safeSetState({status:sC},function(){n.props.onExiting(o),n.onTransitionEnd(a.exit,function(){n.safeSetState({status:Kd},function(){n.props.onExited(o)})})})},t.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},t.safeSetState=function(n,s){s=this.setNextCallback(s),this.setState(n,s)},t.setNextCallback=function(n){var s=this,a=!0;return this.nextCallback=function(o){a&&(a=!1,s.nextCallback=null,n(o))},this.nextCallback.cancel=function(){a=!1},this.nextCallback},t.onTransitionEnd=function(n,s){this.setNextCallback(s);var a=this.props.nodeRef?this.props.nodeRef.current:nv.findDOMNode(this),o=n==null&&!this.props.addEndListener;if(!a||o){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var l=this.props.nodeRef?[this.nextCallback]:[a,this.nextCallback],u=l[0],c=l[1];this.props.addEndListener(u,c)}n!=null&&setTimeout(this.nextCallback,n)},t.render=function(){var n=this.state.status;if(n===Hm)return null;var s=this.props,a=s.children;s.in,s.mountOnEnter,s.unmountOnExit,s.appear,s.enter,s.exit,s.timeout,s.addEndListener,s.onEnter,s.onEntering,s.onEntered,s.onExit,s.onExiting,s.onExited,s.nodeRef;var o=qx(s,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return ea.createElement(c_.Provider,{value:null},typeof a=="function"?a(n,o):ea.cloneElement(ea.Children.only(a),o))},e})(ea.Component);yl.contextType=c_;yl.propTypes={};function lf(){}yl.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:lf,onEntering:lf,onEntered:lf,onExit:lf,onExiting:lf,onExited:lf};yl.UNMOUNTED=Hm;yl.EXITED=Kd;yl.ENTERING=Xd;yl.ENTERED=xf;yl.EXITING=sC;function je(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function Sw(i,e){var t=function(s){return e&&j.isValidElement(s)?e(s):s},r=Object.create(null);return i&&j.Children.map(i,function(n){return n}).forEach(function(n){r[n.key]=t(n)}),r}function CY(i,e){i=i||{},e=e||{};function t(c){return c in e?e[c]:i[c]}var r=Object.create(null),n=[];for(var s in i)s in e?n.length&&(r[s]=n,n=[]):n.push(s);var a,o={};for(var l in e){if(r[l])for(a=0;a<r[l].length;a++){var u=r[l][a];o[r[l][a]]=t(u)}o[l]=t(l)}for(a=0;a<n.length;a++)o[n[a]]=t(n[a]);return o}function sh(i,e,t){return t[e]!=null?t[e]:i.props[e]}function EY(i,e){return Sw(i.children,function(t){return j.cloneElement(t,{onExited:e.bind(null,t),in:!0,appear:sh(t,"appear",i),enter:sh(t,"enter",i),exit:sh(t,"exit",i)})})}function wY(i,e,t){var r=Sw(i.children),n=CY(e,r);return Object.keys(n).forEach(function(s){var a=n[s];if(j.isValidElement(a)){var o=s in e,l=s in r,u=e[s],c=j.isValidElement(u)&&!u.props.in;l&&(!o||c)?n[s]=j.cloneElement(a,{onExited:t.bind(null,a),in:!0,exit:sh(a,"exit",i),enter:sh(a,"enter",i)}):!l&&o&&!c?n[s]=j.cloneElement(a,{in:!1}):l&&o&&j.isValidElement(u)&&(n[s]=j.cloneElement(a,{onExited:t.bind(null,a),in:u.props.in,exit:sh(a,"exit",i),enter:sh(a,"enter",i)}))}}),n}var kY=Object.values||function(i){return Object.keys(i).map(function(e){return i[e]})},AY={component:"div",childFactory:function(e){return e}},Cw=(function(i){Ft(e,i);function e(r,n){var s;s=i.call(this,r,n)||this;var a=s.handleExited.bind(je(s));return s.state={contextValue:{isMounting:!0},handleExited:a,firstRender:!0},s}var t=e.prototype;return t.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},t.componentWillUnmount=function(){this.mounted=!1},e.getDerivedStateFromProps=function(n,s){var a=s.children,o=s.handleExited,l=s.firstRender;return{children:l?EY(n,o):wY(n,a,o),firstRender:!1}},t.handleExited=function(n,s){var a=Sw(this.props.children);n.key in a||(n.props.onExited&&n.props.onExited(s),this.mounted&&this.setState(function(o){var l=Jt({},o.children);return delete l[n.key],{children:l}}))},t.render=function(){var n=this.props,s=n.component,a=n.childFactory,o=qx(n,["component","childFactory"]),l=this.state.contextValue,u=kY(this.state.children).map(a);return delete o.appear,delete o.enter,delete o.exit,s===null?ea.createElement(c_.Provider,{value:l},u):ea.createElement(c_.Provider,{value:l},ea.createElement(s,o,u))},e})(ea.Component);Cw.propTypes={};Cw.defaultProps=AY;const Ew=i=>i.scrollTop;function np(i,e){const{timeout:t,easing:r,style:n={}}=i;return{duration:n.transitionDuration??(typeof t=="number"?t:t[e.mode]||0),easing:n.transitionTimingFunction??(typeof r=="object"?r[e.mode]:r),delay:n.transitionDelay}}function aC(i){return`scale(${i}, ${i**2})`}const IY={entering:{opacity:1,transform:aC(1)},entered:{opacity:1,transform:"none"}},pS=typeof navigator<"u"&&/^((?!chrome|android).)*(safari|mobile)/i.test(navigator.userAgent)&&/(os |version\/)15(.|_)4/i.test(navigator.userAgent),d_=j.forwardRef(function(e,t){const{addEndListener:r,appear:n=!0,children:s,easing:a,in:o,onEnter:l,onEntered:u,onEntering:c,onExit:h,onExited:m,onExiting:g,style:y,timeout:_="auto",TransitionComponent:T=yl,...E}=e,w=bw(),D=j.useRef(),R=Ph(),A=j.useRef(null),L=mn(A,Oh(s),t),F=se=>de=>{if(se){const me=A.current;de===void 0?se(me):se(me,de)}},B=F(c),M=F((se,de)=>{Ew(se);const{duration:me,delay:ue,easing:oe}=np({style:y,timeout:_,easing:a},{mode:"enter"});let ce;_==="auto"?(ce=R.transitions.getAutoHeightDuration(se.clientHeight),D.current=ce):ce=me,se.style.transition=[R.transitions.create("opacity",{duration:ce,delay:ue}),R.transitions.create("transform",{duration:pS?ce:ce*.666,delay:ue,easing:oe})].join(","),l&&l(se,de)}),k=F(u),q=F(g),G=F(se=>{const{duration:de,delay:me,easing:ue}=np({style:y,timeout:_,easing:a},{mode:"exit"});let oe;_==="auto"?(oe=R.transitions.getAutoHeightDuration(se.clientHeight),D.current=oe):oe=de,se.style.transition=[R.transitions.create("opacity",{duration:oe,delay:me}),R.transitions.create("transform",{duration:pS?oe:oe*.666,delay:pS?me:me||oe*.333,easing:ue})].join(","),se.style.opacity=0,se.style.transform=aC(.75),h&&h(se)}),H=F(m),re=se=>{_==="auto"&&w.start(D.current||0,se),r&&r(A.current,se)};return V.jsx(T,{appear:n,in:o,nodeRef:A,onEnter:M,onEntered:k,onEntering:B,onExit:G,onExited:H,onExiting:q,addEndListener:re,timeout:_==="auto"?null:_,...E,children:(se,{ownerState:de,...me})=>j.cloneElement(s,{style:{opacity:0,transform:aC(.75),visibility:se==="exited"&&!o?"hidden":void 0,...IY[se],...y,...s.props.style},ref:L,...me})})});d_&&(d_.muiSupportAuto=!0);function DY(i){const e=Pa(i);return e.body===i?pl(i).innerWidth>e.documentElement.clientWidth:i.scrollHeight>i.clientHeight}function r0(i,e){e?i.setAttribute("aria-hidden","true"):i.removeAttribute("aria-hidden")}function GP(i){return parseInt(pl(i).getComputedStyle(i).paddingRight,10)||0}function PY(i){const t=["TEMPLATE","SCRIPT","STYLE","LINK","MAP","META","NOSCRIPT","PICTURE","COL","COLGROUP","PARAM","SLOT","SOURCE","TRACK"].includes(i.tagName),r=i.tagName==="INPUT"&&i.getAttribute("type")==="hidden";return t||r}function KP(i,e,t,r,n){const s=[e,t,...r];[].forEach.call(i.children,a=>{const o=!s.includes(a),l=!PY(a);o&&l&&r0(a,n)})}function mS(i,e){let t=-1;return i.some((r,n)=>e(r)?(t=n,!0):!1),t}function RY(i,e){const t=[],r=i.container;if(!e.disableScrollLock){if(DY(r)){const a=FF(pl(r));t.push({value:r.style.paddingRight,property:"padding-right",el:r}),r.style.paddingRight=`${GP(r)+a}px`;const o=Pa(r).querySelectorAll(".mui-fixed");[].forEach.call(o,l=>{t.push({value:l.style.paddingRight,property:"padding-right",el:l}),l.style.paddingRight=`${GP(l)+a}px`})}let s;if(r.parentNode instanceof DocumentFragment)s=Pa(r).body;else{const a=r.parentElement,o=pl(r);s=a?.nodeName==="HTML"&&o.getComputedStyle(a).overflowY==="scroll"?a:r}t.push({value:s.style.overflow,property:"overflow",el:s},{value:s.style.overflowX,property:"overflow-x",el:s},{value:s.style.overflowY,property:"overflow-y",el:s}),s.style.overflow="hidden"}return()=>{t.forEach(({value:s,el:a,property:o})=>{s?a.style.setProperty(o,s):a.style.removeProperty(o)})}}function LY(i){const e=[];return[].forEach.call(i.children,t=>{t.getAttribute("aria-hidden")==="true"&&e.push(t)}),e}class OY{constructor(){this.modals=[],this.containers=[]}add(e,t){let r=this.modals.indexOf(e);if(r!==-1)return r;r=this.modals.length,this.modals.push(e),e.modalRef&&r0(e.modalRef,!1);const n=LY(t);KP(t,e.mount,e.modalRef,n,!0);const s=mS(this.containers,a=>a.container===t);return s!==-1?(this.containers[s].modals.push(e),r):(this.containers.push({modals:[e],container:t,restore:null,hiddenSiblings:n}),r)}mount(e,t){const r=mS(this.containers,s=>s.modals.includes(e)),n=this.containers[r];n.restore||(n.restore=RY(n,t))}remove(e,t=!0){const r=this.modals.indexOf(e);if(r===-1)return r;const n=mS(this.containers,a=>a.modals.includes(e)),s=this.containers[n];if(s.modals.splice(s.modals.indexOf(e),1),this.modals.splice(r,1),s.modals.length===0)s.restore&&s.restore(),e.modalRef&&r0(e.modalRef,t),KP(s.container,e.mount,e.modalRef,s.hiddenSiblings,!1),this.containers.splice(n,1);else{const a=s.modals[s.modals.length-1];a.modalRef&&r0(a.modalRef,!1)}return r}isTopModal(e){return this.modals.length>0&&this.modals[this.modals.length-1]===e}}const MY=["input","select","textarea","a[href]","button","[tabindex]","audio[controls]","video[controls]",'[contenteditable]:not([contenteditable="false"])'].join(",");function FY(i){const e=parseInt(i.getAttribute("tabindex")||"",10);return Number.isNaN(e)?i.contentEditable==="true"||(i.nodeName==="AUDIO"||i.nodeName==="VIDEO"||i.nodeName==="DETAILS")&&i.getAttribute("tabindex")===null?0:i.tabIndex:e}function BY(i){if(i.tagName!=="INPUT"||i.type!=="radio"||!i.name)return!1;const e=r=>i.ownerDocument.querySelector(`input[type="radio"]${r}`);let t=e(`[name="${i.name}"]:checked`);return t||(t=e(`[name="${i.name}"]`)),t!==i}function NY(i){return!(i.disabled||i.tagName==="INPUT"&&i.type==="hidden"||BY(i))}function UY(i){const e=[],t=[];return Array.from(i.querySelectorAll(MY)).forEach((r,n)=>{const s=FY(r);s===-1||!NY(r)||(s===0?e.push(r):t.push({documentOrder:n,tabIndex:s,node:r}))}),t.sort((r,n)=>r.tabIndex===n.tabIndex?r.documentOrder-n.documentOrder:r.tabIndex-n.tabIndex).map(r=>r.node).concat(e)}function $Y(){return!0}function jY(i){const{children:e,disableAutoFocus:t=!1,disableEnforceFocus:r=!1,disableRestoreFocus:n=!1,getTabbable:s=UY,isEnabled:a=$Y,open:o}=i,l=j.useRef(!1),u=j.useRef(null),c=j.useRef(null),h=j.useRef(null),m=j.useRef(null),g=j.useRef(!1),y=j.useRef(null),_=mn(Oh(e),y),T=j.useRef(null);j.useEffect(()=>{!o||!y.current||(g.current=!t)},[t,o]),j.useEffect(()=>{if(!o||!y.current)return;const D=Pa(y.current);return y.current.contains(D.activeElement)||(y.current.hasAttribute("tabIndex")||y.current.setAttribute("tabIndex","-1"),g.current&&y.current.focus()),()=>{n||(h.current&&h.current.focus&&(l.current=!0,h.current.focus()),h.current=null)}},[o]),j.useEffect(()=>{if(!o||!y.current)return;const D=Pa(y.current),R=F=>{T.current=F,!(r||!a()||F.key!=="Tab")&&D.activeElement===y.current&&F.shiftKey&&(l.current=!0,c.current&&c.current.focus())},A=()=>{const F=y.current;if(F===null)return;if(!D.hasFocus()||!a()||l.current){l.current=!1;return}if(F.contains(D.activeElement)||r&&D.activeElement!==u.current&&D.activeElement!==c.current)return;if(D.activeElement!==m.current)m.current=null;else if(m.current!==null)return;if(!g.current)return;let B=[];if((D.activeElement===u.current||D.activeElement===c.current)&&(B=s(y.current)),B.length>0){const M=!!(T.current?.shiftKey&&T.current?.key==="Tab"),k=B[0],q=B[B.length-1];typeof k!="string"&&typeof q!="string"&&(M?q.focus():k.focus())}else F.focus()};D.addEventListener("focusin",A),D.addEventListener("keydown",R,!0);const L=setInterval(()=>{D.activeElement&&D.activeElement.tagName==="BODY"&&A()},50);return()=>{clearInterval(L),D.removeEventListener("focusin",A),D.removeEventListener("keydown",R,!0)}},[t,r,n,a,o,s]);const E=D=>{h.current===null&&(h.current=D.relatedTarget),g.current=!0,m.current=D.target;const R=e.props.onFocus;R&&R(D)},w=D=>{h.current===null&&(h.current=D.relatedTarget),g.current=!0};return V.jsxs(j.Fragment,{children:[V.jsx("div",{tabIndex:o?0:-1,onFocus:w,ref:u,"data-testid":"sentinelStart"}),j.cloneElement(e,{ref:_,onFocus:E}),V.jsx("div",{tabIndex:o?0:-1,onFocus:w,ref:c,"data-testid":"sentinelEnd"})]})}function zY(i){return typeof i=="function"?i():i}const HY=j.forwardRef(function(e,t){const{children:r,container:n,disablePortal:s=!1}=e,[a,o]=j.useState(null),l=mn(j.isValidElement(r)?Oh(r):null,t);if(ac(()=>{s||o(zY(n)||document.body)},[n,s]),ac(()=>{if(a&&!s)return UP(t,a),()=>{UP(t,null)}},[t,a,s]),s){if(j.isValidElement(r)){const u={ref:l};return j.cloneElement(r,u)}return r}return a&&kp.createPortal(r,a)}),VY={entering:{opacity:1},entered:{opacity:1}},oC=j.forwardRef(function(e,t){const r=Ph(),n={enter:r.transitions.duration.enteringScreen,exit:r.transitions.duration.leavingScreen},{addEndListener:s,appear:a=!0,children:o,easing:l,in:u,onEnter:c,onEntered:h,onEntering:m,onExit:g,onExited:y,onExiting:_,style:T,timeout:E=n,TransitionComponent:w=yl,...D}=e,R=j.useRef(null),A=mn(R,Oh(o),t),L=re=>se=>{if(re){const de=R.current;se===void 0?re(de):re(de,se)}},F=L(m),B=L((re,se)=>{Ew(re);const de=np({style:T,timeout:E,easing:l},{mode:"enter"});re.style.webkitTransition=r.transitions.create("opacity",de),re.style.transition=r.transitions.create("opacity",de),c&&c(re,se)}),M=L(h),k=L(_),q=L(re=>{const se=np({style:T,timeout:E,easing:l},{mode:"exit"});re.style.webkitTransition=r.transitions.create("opacity",se),re.style.transition=r.transitions.create("opacity",se),g&&g(re)}),G=L(y),H=re=>{s&&s(R.current,re)};return V.jsx(w,{appear:a,in:u,nodeRef:R,onEnter:B,onEntered:M,onEntering:F,onExit:q,onExited:G,onExiting:k,addEndListener:H,timeout:E,...D,children:(re,{ownerState:se,...de})=>j.cloneElement(o,{style:{opacity:0,visibility:re==="exited"&&!u?"hidden":void 0,...VY[re],...T,...o.props.style},ref:A,...de})})});function qY(i){return or("MuiBackdrop",i)}ar("MuiBackdrop",["root","invisible"]);const WY=i=>{const{classes:e,invisible:t}=i;return lr({root:["root",t&&"invisible"]},qY,e)},GY=ft("div",{name:"MuiBackdrop",slot:"Root",overridesResolver:(i,e)=>{const{ownerState:t}=i;return[e.root,t.invisible&&e.invisible]}})({position:"fixed",display:"flex",alignItems:"center",justifyContent:"center",right:0,bottom:0,top:0,left:0,backgroundColor:"rgba(0, 0, 0, 0.5)",WebkitTapHighlightColor:"transparent",variants:[{props:{invisible:!0},style:{backgroundColor:"transparent"}}]}),UF=j.forwardRef(function(e,t){const r=ur({props:e,name:"MuiBackdrop"}),{children:n,className:s,component:a="div",invisible:o=!1,open:l,components:u={},componentsProps:c={},slotProps:h={},slots:m={},TransitionComponent:g,transitionDuration:y,..._}=r,T={...r,component:a,invisible:o},E=WY(T),w={transition:g,root:u.Root,...m},D={...c,...h},R={slots:w,slotProps:D},[A,L]=Lr("root",{elementType:GY,externalForwardedProps:R,className:Nt(E.root,s),ownerState:T}),[F,B]=Lr("transition",{elementType:oC,externalForwardedProps:R,ownerState:T});return V.jsx(F,{in:l,timeout:y,..._,...B,children:V.jsx(A,{"aria-hidden":!0,...L,classes:E,ref:t,children:n})})});function KY(i){return typeof i=="function"?i():i}function XY(i){return i?i.props.hasOwnProperty("in"):!1}const XP=()=>{},cv=new OY;function YY(i){const{container:e,disableEscapeKeyDown:t=!1,disableScrollLock:r=!1,closeAfterTransition:n=!1,onTransitionEnter:s,onTransitionExited:a,children:o,onClose:l,open:u,rootRef:c}=i,h=j.useRef({}),m=j.useRef(null),g=j.useRef(null),y=mn(g,c),[_,T]=j.useState(!u),E=XY(o);let w=!0;(i["aria-hidden"]==="false"||i["aria-hidden"]===!1)&&(w=!1);const D=()=>Pa(m.current),R=()=>(h.current.modalRef=g.current,h.current.mount=m.current,h.current),A=()=>{cv.mount(R(),{disableScrollLock:r}),g.current&&(g.current.scrollTop=0)},L=uu(()=>{const se=KY(e)||D().body;cv.add(R(),se),g.current&&A()}),F=()=>cv.isTopModal(R()),B=uu(se=>{m.current=se,se&&(u&&F()?A():g.current&&r0(g.current,w))}),M=j.useCallback(()=>{cv.remove(R(),w)},[w]);j.useEffect(()=>()=>{M()},[M]),j.useEffect(()=>{u?L():(!E||!n)&&M()},[u,M,E,n,L]);const k=se=>de=>{se.onKeyDown?.(de),!(de.key!=="Escape"||de.which===229||!F())&&(t||(de.stopPropagation(),l&&l(de,"escapeKeyDown")))},q=se=>de=>{se.onClick?.(de),de.target===de.currentTarget&&l&&l(de,"backdropClick")};return{getRootProps:(se={})=>{const de=u_(i);delete de.onTransitionEnter,delete de.onTransitionExited;const me={...de,...se};return{role:"presentation",...me,onKeyDown:k(me),ref:y}},getBackdropProps:(se={})=>{const de=se;return{"aria-hidden":!0,...de,onClick:q(de),open:u}},getTransitionProps:()=>{const se=()=>{T(!1),s&&s()},de=()=>{T(!0),a&&a(),n&&M()};return{onEnter:nC(se,o?.props.onEnter??XP),onExited:nC(de,o?.props.onExited??XP)}},rootRef:y,portalRef:B,isTopModal:F,exited:_,hasTransition:E}}function QY(i){return or("MuiModal",i)}ar("MuiModal",["root","hidden","backdrop"]);const JY=i=>{const{open:e,exited:t,classes:r}=i;return lr({root:["root",!e&&t&&"hidden"],backdrop:["backdrop"]},QY,r)},ZY=ft("div",{name:"MuiModal",slot:"Root",overridesResolver:(i,e)=>{const{ownerState:t}=i;return[e.root,!t.open&&t.exited&&e.hidden]}})(Tr(({theme:i})=>({position:"fixed",zIndex:(i.vars||i).zIndex.modal,right:0,bottom:0,top:0,left:0,variants:[{props:({ownerState:e})=>!e.open&&e.exited,style:{visibility:"hidden"}}]}))),eQ=ft(UF,{name:"MuiModal",slot:"Backdrop"})({zIndex:-1}),ww=j.forwardRef(function(e,t){const r=ur({name:"MuiModal",props:e}),{BackdropComponent:n=eQ,BackdropProps:s,classes:a,className:o,closeAfterTransition:l=!1,children:u,container:c,component:h,components:m={},componentsProps:g={},disableAutoFocus:y=!1,disableEnforceFocus:_=!1,disableEscapeKeyDown:T=!1,disablePortal:E=!1,disableRestoreFocus:w=!1,disableScrollLock:D=!1,hideBackdrop:R=!1,keepMounted:A=!1,onClose:L,onTransitionEnter:F,onTransitionExited:B,open:M,slotProps:k={},slots:q={},theme:G,...H}=r,re={...r,closeAfterTransition:l,disableAutoFocus:y,disableEnforceFocus:_,disableEscapeKeyDown:T,disablePortal:E,disableRestoreFocus:w,disableScrollLock:D,hideBackdrop:R,keepMounted:A},{getRootProps:se,getBackdropProps:de,getTransitionProps:me,portalRef:ue,isTopModal:oe,exited:ce,hasTransition:te}=YY({...re,rootRef:t}),fe={...re,exited:ce},ye=JY(fe),Se={};if(u.props.tabIndex===void 0&&(Se.tabIndex="-1"),te){const{onEnter:pt,onExited:Ut}=me();Se.onEnter=pt,Se.onExited=Ut}const ke={slots:{root:m.Root,backdrop:m.Backdrop,...q},slotProps:{...g,...k}},[qe,vt]=Lr("root",{ref:t,elementType:ZY,externalForwardedProps:{...ke,...H,component:h},getSlotProps:se,ownerState:fe,className:Nt(o,ye?.root,!fe.open&&fe.exited&&ye?.hidden)}),[et,kt]=Lr("backdrop",{ref:s?.ref,elementType:n,externalForwardedProps:ke,shouldForwardComponentProp:!0,additionalProps:s,getSlotProps:pt=>de({...pt,onClick:Ut=>{pt?.onClick&&pt.onClick(Ut)}}),className:Nt(s?.className,ye?.backdrop),ownerState:fe});return!A&&!M&&(!te||ce)?null:V.jsx(HY,{ref:ue,container:c,disablePortal:E,children:V.jsxs(qe,{...vt,children:[!R&&n?V.jsx(et,{...kt}):null,V.jsx(jY,{disableEnforceFocus:_,disableAutoFocus:y,disableRestoreFocus:w,isEnabled:oe,open:M,children:j.cloneElement(u,Se)})]})})});function tQ(i){return or("MuiPopover",i)}ar("MuiPopover",["root","paper"]);function YP(i,e){let t=0;return typeof e=="number"?t=e:e==="center"?t=i.height/2:e==="bottom"&&(t=i.height),t}function QP(i,e){let t=0;return typeof e=="number"?t=e:e==="center"?t=i.width/2:e==="right"&&(t=i.width),t}function JP(i){return[i.horizontal,i.vertical].map(e=>typeof e=="number"?`${e}px`:e).join(" ")}function dv(i){return typeof i=="function"?i():i}const rQ=i=>{const{classes:e}=i;return lr({root:["root"],paper:["paper"]},tQ,e)},iQ=ft(ww,{name:"MuiPopover",slot:"Root"})({}),$F=ft(Rh,{name:"MuiPopover",slot:"Paper"})({position:"absolute",overflowY:"auto",overflowX:"hidden",minWidth:16,minHeight:16,maxWidth:"calc(100% - 32px)",maxHeight:"calc(100% - 32px)",outline:0}),nQ=j.forwardRef(function(e,t){const r=ur({props:e,name:"MuiPopover"}),{action:n,anchorEl:s,anchorOrigin:a={vertical:"top",horizontal:"left"},anchorPosition:o,anchorReference:l="anchorEl",children:u,className:c,container:h,elevation:m=8,marginThreshold:g=16,open:y,PaperProps:_={},slots:T={},slotProps:E={},transformOrigin:w={vertical:"top",horizontal:"left"},TransitionComponent:D,transitionDuration:R="auto",TransitionProps:A={},disableScrollLock:L=!1,...F}=r,B=j.useRef(),M={...r,anchorOrigin:a,anchorReference:l,elevation:m,marginThreshold:g,transformOrigin:w,TransitionComponent:D,transitionDuration:R,TransitionProps:A},k=rQ(M),q=j.useCallback(()=>{if(l==="anchorPosition")return o;const pt=dv(s),Vt=(pt&&pt.nodeType===1?pt:Pa(B.current).body).getBoundingClientRect();return{top:Vt.top+YP(Vt,a.vertical),left:Vt.left+QP(Vt,a.horizontal)}},[s,a.horizontal,a.vertical,o,l]),G=j.useCallback(pt=>({vertical:YP(pt,w.vertical),horizontal:QP(pt,w.horizontal)}),[w.horizontal,w.vertical]),H=j.useCallback(pt=>{const Ut={width:pt.offsetWidth,height:pt.offsetHeight},Vt=G(Ut);if(l==="none")return{top:null,left:null,transformOrigin:JP(Vt)};const Xe=q();let Ue=Xe.top-Vt.vertical,Le=Xe.left-Vt.horizontal;const Ne=Ue+Ut.height,rt=Le+Ut.width,lt=pl(dv(s)),dt=lt.innerHeight-g,ut=lt.innerWidth-g;if(g!==null&&Ue<g){const At=Ue-g;Ue-=At,Vt.vertical+=At}else if(g!==null&&Ne>dt){const At=Ne-dt;Ue-=At,Vt.vertical+=At}if(g!==null&&Le<g){const At=Le-g;Le-=At,Vt.horizontal+=At}else if(rt>ut){const At=rt-ut;Le-=At,Vt.horizontal+=At}return{top:`${Math.round(Ue)}px`,left:`${Math.round(Le)}px`,transformOrigin:JP(Vt)}},[s,l,q,G,g]),[re,se]=j.useState(y),de=j.useCallback(()=>{const pt=B.current;if(!pt)return;const Ut=H(pt);Ut.top!==null&&pt.style.setProperty("top",Ut.top),Ut.left!==null&&(pt.style.left=Ut.left),pt.style.transformOrigin=Ut.transformOrigin,se(!0)},[H]);j.useEffect(()=>(L&&window.addEventListener("scroll",de),()=>window.removeEventListener("scroll",de)),[s,L,de]);const me=()=>{de()},ue=()=>{se(!1)};j.useEffect(()=>{y&&de()}),j.useImperativeHandle(n,()=>y?{updatePosition:()=>{de()}}:null,[y,de]),j.useEffect(()=>{if(!y)return;const pt=gw(()=>{de()}),Ut=pl(dv(s));return Ut.addEventListener("resize",pt),()=>{pt.clear(),Ut.removeEventListener("resize",pt)}},[s,y,de]);let oe=R;const ce={slots:{transition:D,...T},slotProps:{transition:A,paper:_,...E}},[te,fe]=Lr("transition",{elementType:d_,externalForwardedProps:ce,ownerState:M,getSlotProps:pt=>({...pt,onEntering:(Ut,Vt)=>{pt.onEntering?.(Ut,Vt),me()},onExited:Ut=>{pt.onExited?.(Ut),ue()}}),additionalProps:{appear:!0,in:y}});R==="auto"&&!te.muiSupportAuto&&(oe=void 0);const ye=h||(s?Pa(dv(s)).body:void 0),[Se,{slots:ke,slotProps:qe,...vt}]=Lr("root",{ref:t,elementType:iQ,externalForwardedProps:{...ce,...F},shouldForwardComponentProp:!0,additionalProps:{slots:{backdrop:T.backdrop},slotProps:{backdrop:_w(typeof E.backdrop=="function"?E.backdrop(M):E.backdrop,{invisible:!0})},container:ye,open:y},ownerState:M,className:Nt(k.root,c)}),[et,kt]=Lr("paper",{ref:B,className:k.paper,elementType:$F,externalForwardedProps:ce,shouldForwardComponentProp:!0,additionalProps:{elevation:m,style:re?void 0:{opacity:0}},ownerState:M});return V.jsx(Se,{...vt,...!C0(Se)&&{slots:ke,slotProps:qe,disableScrollLock:L},children:V.jsx(te,{...fe,timeout:oe,children:V.jsx(et,{...kt,children:u})})})});function sQ(i){return or("MuiMenu",i)}ar("MuiMenu",["root","paper","list"]);const aQ={vertical:"top",horizontal:"right"},oQ={vertical:"top",horizontal:"left"},lQ=i=>{const{classes:e}=i;return lr({root:["root"],paper:["paper"],list:["list"]},sQ,e)},uQ=ft(nQ,{shouldForwardProp:i=>Jn(i)||i==="classes",name:"MuiMenu",slot:"Root"})({}),cQ=ft($F,{name:"MuiMenu",slot:"Paper"})({maxHeight:"calc(100% - 96px)",WebkitOverflowScrolling:"touch"}),dQ=ft(xY,{name:"MuiMenu",slot:"List"})({outline:0}),hQ=j.forwardRef(function(e,t){const r=ur({props:e,name:"MuiMenu"}),{autoFocus:n=!0,children:s,className:a,disableAutoFocusItem:o=!1,MenuListProps:l={},onClose:u,open:c,PaperProps:h={},PopoverClasses:m,transitionDuration:g="auto",TransitionProps:{onEntering:y,..._}={},variant:T="selectedMenu",slots:E={},slotProps:w={},...D}=r,R=yF(),A={...r,autoFocus:n,disableAutoFocusItem:o,MenuListProps:l,onEntering:y,PaperProps:h,transitionDuration:g,TransitionProps:_,variant:T},L=lQ(A),F=n&&!o&&c,B=j.useRef(null),M=(oe,ce)=>{B.current&&B.current.adjustStyleForScrollbar(oe,{direction:R?"rtl":"ltr"}),y&&y(oe,ce)},k=oe=>{oe.key==="Tab"&&(oe.preventDefault(),u&&u(oe,"tabKeyDown"))};let q=-1;j.Children.map(s,(oe,ce)=>{j.isValidElement(oe)&&(oe.props.disabled||(T==="selectedMenu"&&oe.props.selected||q===-1)&&(q=ce))});const G={slots:E,slotProps:{list:l,transition:_,paper:h,...w}},H=gY({elementType:E.root,externalSlotProps:w.root,ownerState:A,className:[L.root,a]}),[re,se]=Lr("paper",{className:L.paper,elementType:cQ,externalForwardedProps:G,shouldForwardComponentProp:!0,ownerState:A}),[de,me]=Lr("list",{className:Nt(L.list,l.className),elementType:dQ,shouldForwardComponentProp:!0,externalForwardedProps:G,getSlotProps:oe=>({...oe,onKeyDown:ce=>{k(ce),oe.onKeyDown?.(ce)}}),ownerState:A}),ue=typeof G.slotProps.transition=="function"?G.slotProps.transition(A):G.slotProps.transition;return V.jsx(uQ,{onClose:u,anchorOrigin:{vertical:"bottom",horizontal:R?"right":"left"},transformOrigin:R?aQ:oQ,slots:{root:E.root,paper:re,backdrop:E.backdrop,...E.transition&&{transition:E.transition}},slotProps:{root:H,paper:se,backdrop:typeof w.backdrop=="function"?w.backdrop(A):w.backdrop,transition:{...ue,onEntering:(...oe)=>{M(...oe),ue?.onEntering?.(...oe)}}},open:c,ref:t,transitionDuration:g,ownerState:A,...D,classes:m,children:V.jsx(de,{actions:B,autoFocus:n&&(q===-1||o),autoFocusItem:F,variant:T,...me,children:s})})});function fQ(i){return or("MuiNativeSelect",i)}const kw=ar("MuiNativeSelect",["root","select","multiple","filled","outlined","standard","disabled","icon","iconOpen","iconFilled","iconOutlined","iconStandard","nativeInput","error"]),pQ=i=>{const{classes:e,variant:t,disabled:r,multiple:n,open:s,error:a}=i,o={select:["select",t,r&&"disabled",n&&"multiple",a&&"error"],icon:["icon",`icon${ht(t)}`,s&&"iconOpen",r&&"disabled"]};return lr(o,fQ,e)},jF=ft("select")(({theme:i})=>({MozAppearance:"none",WebkitAppearance:"none",userSelect:"none",borderRadius:0,cursor:"pointer","&:focus":{borderRadius:0},[`&.${kw.disabled}`]:{cursor:"default"},"&[multiple]":{height:"auto"},"&:not([multiple]) option, &:not([multiple]) optgroup":{backgroundColor:(i.vars||i).palette.background.paper},variants:[{props:({ownerState:e})=>e.variant!=="filled"&&e.variant!=="outlined",style:{"&&&":{paddingRight:24,minWidth:16}}},{props:{variant:"filled"},style:{"&&&":{paddingRight:32}}},{props:{variant:"outlined"},style:{borderRadius:(i.vars||i).shape.borderRadius,"&:focus":{borderRadius:(i.vars||i).shape.borderRadius},"&&&":{paddingRight:32}}}]})),mQ=ft(jF,{name:"MuiNativeSelect",slot:"Select",shouldForwardProp:Jn,overridesResolver:(i,e)=>{const{ownerState:t}=i;return[e.select,e[t.variant],t.error&&e.error,{[`&.${kw.multiple}`]:e.multiple}]}})({}),zF=ft("svg")(({theme:i})=>({position:"absolute",right:0,top:"calc(50% - .5em)",pointerEvents:"none",color:(i.vars||i).palette.action.active,[`&.${kw.disabled}`]:{color:(i.vars||i).palette.action.disabled},variants:[{props:({ownerState:e})=>e.open,style:{transform:"rotate(180deg)"}},{props:{variant:"filled"},style:{right:7}},{props:{variant:"outlined"},style:{right:7}}]})),gQ=ft(zF,{name:"MuiNativeSelect",slot:"Icon",overridesResolver:(i,e)=>{const{ownerState:t}=i;return[e.icon,t.variant&&e[`icon${ht(t.variant)}`],t.open&&e.iconOpen]}})({}),vQ=j.forwardRef(function(e,t){const{className:r,disabled:n,error:s,IconComponent:a,inputRef:o,variant:l="standard",...u}=e,c={...e,disabled:n,variant:l,error:s},h=pQ(c);return V.jsxs(j.Fragment,{children:[V.jsx(mQ,{ownerState:c,className:Nt(h.select,r),disabled:n,ref:o||t,...u}),e.multiple?null:V.jsx(gQ,{as:a,ownerState:c,className:h.icon})]})});function HF(i){return or("MuiSelect",i)}const Em=ar("MuiSelect",["root","select","multiple","filled","outlined","standard","disabled","focused","icon","iconOpen","iconFilled","iconOutlined","iconStandard","nativeInput","error"]);var ZP;const yQ=ft(jF,{name:"MuiSelect",slot:"Select",overridesResolver:(i,e)=>{const{ownerState:t}=i;return[{[`&.${Em.select}`]:e.select},{[`&.${Em.select}`]:e[t.variant]},{[`&.${Em.error}`]:e.error},{[`&.${Em.multiple}`]:e.multiple}]}})({[`&.${Em.select}`]:{height:"auto",minHeight:"1.4375em",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"}}),_Q=ft(zF,{name:"MuiSelect",slot:"Icon",overridesResolver:(i,e)=>{const{ownerState:t}=i;return[e.icon,t.variant&&e[`icon${ht(t.variant)}`],t.open&&e.iconOpen]}})({}),xQ=ft("input",{shouldForwardProp:i=>DF(i)&&i!=="classes",name:"MuiSelect",slot:"NativeInput"})({bottom:0,left:0,position:"absolute",opacity:0,pointerEvents:"none",width:"100%",boxSizing:"border-box"});function eR(i,e){return typeof e=="object"&&e!==null?i===e:String(i)===String(e)}function TQ(i){return i==null||typeof i=="string"&&!i.trim()}const bQ=i=>{const{classes:e,variant:t,disabled:r,multiple:n,open:s,error:a}=i,o={select:["select",t,r&&"disabled",n&&"multiple",a&&"error"],icon:["icon",`icon${ht(t)}`,s&&"iconOpen",r&&"disabled"],nativeInput:["nativeInput"]};return lr(o,HF,e)},SQ=j.forwardRef(function(e,t){const{"aria-describedby":r,"aria-label":n,autoFocus:s,autoWidth:a,children:o,className:l,defaultOpen:u,defaultValue:c,disabled:h,displayEmpty:m,error:g=!1,IconComponent:y,inputRef:_,labelId:T,MenuProps:E={},multiple:w,name:D,onBlur:R,onChange:A,onClose:L,onFocus:F,onOpen:B,open:M,readOnly:k,renderValue:q,required:G,SelectDisplayProps:H={},tabIndex:re,type:se,value:de,variant:me="standard",...ue}=e,[oe,ce]=l_({controlled:de,default:c,name:"Select"}),[te,fe]=l_({controlled:M,default:u,name:"Select"}),ye=j.useRef(null),Se=j.useRef(null),[ke,qe]=j.useState(null),{current:vt}=j.useRef(M!=null),[et,kt]=j.useState(),pt=mn(t,_),Ut=j.useCallback(zt=>{Se.current=zt,zt&&qe(zt)},[]),Vt=ke?.parentNode;j.useImperativeHandle(pt,()=>({focus:()=>{Se.current.focus()},node:ye.current,value:oe}),[oe]),j.useEffect(()=>{u&&te&&ke&&!vt&&(kt(a?null:Vt.clientWidth),Se.current.focus())},[ke,a]),j.useEffect(()=>{s&&Se.current.focus()},[s]),j.useEffect(()=>{if(!T)return;const zt=Pa(Se.current).getElementById(T);if(zt){const Dr=()=>{getSelection().isCollapsed&&Se.current.focus()};return zt.addEventListener("click",Dr),()=>{zt.removeEventListener("click",Dr)}}},[T]);const Xe=(zt,Dr)=>{zt?B&&B(Dr):L&&L(Dr),vt||(kt(a?null:Vt.clientWidth),fe(zt))},Ue=zt=>{zt.button===0&&(zt.preventDefault(),Se.current.focus(),Xe(!0,zt))},Le=zt=>{Xe(!1,zt)},Ne=j.Children.toArray(o),rt=zt=>{const Dr=Ne.find($r=>$r.props.value===zt.target.value);Dr!==void 0&&(ce(Dr.props.value),A&&A(zt,Dr))},lt=zt=>Dr=>{let $r;if(Dr.currentTarget.hasAttribute("tabindex")){if(w){$r=Array.isArray(oe)?oe.slice():[];const Jr=oe.indexOf(zt.props.value);Jr===-1?$r.push(zt.props.value):$r.splice(Jr,1)}else $r=zt.props.value;if(zt.props.onClick&&zt.props.onClick(Dr),oe!==$r&&(ce($r),A)){const Jr=Dr.nativeEvent||Dr,Ni=new Jr.constructor(Jr.type,Jr);Object.defineProperty(Ni,"target",{writable:!0,value:{value:$r,name:D}}),A(Ni,zt)}w||Xe(!1,Dr)}},dt=zt=>{k||[" ","ArrowUp","ArrowDown","Enter"].includes(zt.key)&&(zt.preventDefault(),Xe(!0,zt))},ut=ke!==null&&te,At=zt=>{!ut&&R&&(Object.defineProperty(zt,"target",{writable:!0,value:{value:oe,name:D}}),R(zt))};delete ue["aria-invalid"];let it,Sr;const xr=[];let zr=!1;(a_({value:oe})||m)&&(q?it=q(oe):zr=!0);const cr=Ne.map(zt=>{if(!j.isValidElement(zt))return null;let Dr;if(w){if(!Array.isArray(oe))throw new Error(Eh(2));Dr=oe.some($r=>eR($r,zt.props.value)),Dr&&zr&&xr.push(zt.props.children)}else Dr=eR(oe,zt.props.value),Dr&&zr&&(Sr=zt.props.children);return j.cloneElement(zt,{"aria-selected":Dr?"true":"false",onClick:lt(zt),onKeyUp:$r=>{$r.key===" "&&$r.preventDefault(),zt.props.onKeyUp&&zt.props.onKeyUp($r)},role:"option",selected:Dr,value:void 0,"data-value":zt.props.value})});zr&&(w?xr.length===0?it=null:it=xr.reduce((zt,Dr,$r)=>(zt.push(Dr),$r<xr.length-1&&zt.push(", "),zt),[]):it=Sr);let Gt=et;!a&&vt&&ke&&(Gt=Vt.clientWidth);let Er;typeof re<"u"?Er=re:Er=h?null:0;const Ir=H.id||(D?`mui-component-select-${D}`:void 0),Hr={...e,variant:me,value:oe,open:ut,error:g},It=bQ(Hr),$t={...E.PaperProps,...E.slotProps?.paper},Bi=Lh();return V.jsxs(j.Fragment,{children:[V.jsx(yQ,{as:"div",ref:Ut,tabIndex:Er,role:"combobox","aria-controls":ut?Bi:void 0,"aria-disabled":h?"true":void 0,"aria-expanded":ut?"true":"false","aria-haspopup":"listbox","aria-label":n,"aria-labelledby":[T,Ir].filter(Boolean).join(" ")||void 0,"aria-describedby":r,"aria-required":G?"true":void 0,"aria-invalid":g?"true":void 0,onKeyDown:dt,onMouseDown:h||k?null:Ue,onBlur:At,onFocus:F,...H,ownerState:Hr,className:Nt(H.className,It.select,l),id:Ir,children:TQ(it)?ZP||(ZP=V.jsx("span",{className:"notranslate","aria-hidden":!0,children:""})):it}),V.jsx(xQ,{"aria-invalid":g,value:Array.isArray(oe)?oe.join(","):oe,name:D,ref:ye,"aria-hidden":!0,onChange:rt,tabIndex:-1,disabled:h,className:It.nativeInput,autoFocus:s,required:G,...ue,ownerState:Hr}),V.jsx(_Q,{as:y,className:It.icon,ownerState:Hr}),V.jsx(hQ,{id:`menu-${D||""}`,anchorEl:Vt,open:ut,onClose:Le,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"},...E,slotProps:{...E.slotProps,list:{"aria-labelledby":T,role:"listbox","aria-multiselectable":w?"true":void 0,disableListWrap:!0,id:Bi,...E.MenuListProps},paper:{...$t,style:{minWidth:Gt,...$t!=null?$t.style:null}}},children:cr})]})}),CQ=Qr(V.jsx("path",{d:"M7 10l5 5 5-5z"})),EQ=i=>{const{classes:e}=i,r=lr({root:["root"]},HF,e);return{...e,...r}},Aw={name:"MuiSelect",slot:"Root",shouldForwardProp:i=>Jn(i)&&i!=="variant"},wQ=ft(yw,Aw)(""),kQ=ft(Vx,Aw)(""),AQ=ft(xw,Aw)(""),w0=j.forwardRef(function(e,t){const r=ur({name:"MuiSelect",props:e}),{autoWidth:n=!1,children:s,classes:a={},className:o,defaultOpen:l=!1,displayEmpty:u=!1,IconComponent:c=CQ,id:h,input:m,inputProps:g,label:y,labelId:_,MenuProps:T,multiple:E=!1,native:w=!1,onClose:D,onOpen:R,open:A,renderValue:L,SelectDisplayProps:F,variant:B="outlined",...M}=r,k=w?vQ:SQ,q=vl(),G=yd({props:r,muiFormControl:q,states:["variant","error"]}),H=G.variant||B,re={...r,variant:H,classes:a},se=EQ(re),{root:de,...me}=se,ue=m||{standard:V.jsx(wQ,{ownerState:re}),outlined:V.jsx(kQ,{label:y,ownerState:re}),filled:V.jsx(AQ,{ownerState:re})}[H],oe=mn(t,Oh(ue));return V.jsx(j.Fragment,{children:j.cloneElement(ue,{inputComponent:k,inputProps:{children:s,error:G.error,IconComponent:c,variant:H,type:void 0,multiple:E,...w?{id:h}:{autoWidth:n,defaultOpen:l,displayEmpty:u,labelId:_,MenuProps:T,onClose:D,onOpen:R,open:A,renderValue:L,SelectDisplayProps:{id:h,...F}},...g,classes:g?lu(me,g.classes):me,...m?m.props.inputProps:{}},...(E&&w||u)&&H==="outlined"?{notched:!0}:{},ref:oe,className:Nt(ue.props.className,o,se.root),...!m&&{variant:H},...M})})});w0.muiName="Select";function IQ(i){return or("MuiTextField",i)}ar("MuiTextField",["root"]);const DQ={standard:yw,filled:xw,outlined:Vx},PQ=i=>{const{classes:e}=i;return lr({root:["root"]},IQ,e)},RQ=ft(ki,{name:"MuiTextField",slot:"Root"})({}),Ws=j.forwardRef(function(e,t){const r=ur({props:e,name:"MuiTextField"}),{autoComplete:n,autoFocus:s=!1,children:a,className:o,color:l="primary",defaultValue:u,disabled:c=!1,error:h=!1,FormHelperTextProps:m,fullWidth:g=!1,helperText:y,id:_,InputLabelProps:T,inputProps:E,InputProps:w,inputRef:D,label:R,maxRows:A,minRows:L,multiline:F=!1,name:B,onBlur:M,onChange:k,onFocus:q,placeholder:G,required:H=!1,rows:re,select:se=!1,SelectProps:de,slots:me={},slotProps:ue={},type:oe,value:ce,variant:te="outlined",...fe}=r,ye={...r,autoFocus:s,color:l,disabled:c,error:h,fullWidth:g,multiline:F,required:H,select:se,variant:te},Se=PQ(ye),ke=Lh(_),qe=y&&ke?`${ke}-helper-text`:void 0,vt=R&&ke?`${ke}-label`:void 0,et=DQ[te],kt={slots:me,slotProps:{input:w,inputLabel:T,htmlInput:E,formHelperText:m,select:de,...ue}},pt={},Ut=kt.slotProps.inputLabel;te==="outlined"&&(Ut&&typeof Ut.shrink<"u"&&(pt.notched=Ut.shrink),pt.label=R),se&&((!de||!de.native)&&(pt.id=void 0),pt["aria-describedby"]=void 0);const[Vt,Xe]=Lr("root",{elementType:RQ,shouldForwardComponentProp:!0,externalForwardedProps:{...kt,...fe},ownerState:ye,className:Nt(Se.root,o),ref:t,additionalProps:{disabled:c,error:h,fullWidth:g,required:H,color:l,variant:te}}),[Ue,Le]=Lr("input",{elementType:et,externalForwardedProps:kt,additionalProps:pt,ownerState:ye}),[Ne,rt]=Lr("inputLabel",{elementType:E0,externalForwardedProps:kt,ownerState:ye}),[lt,dt]=Lr("htmlInput",{elementType:"input",externalForwardedProps:kt,ownerState:ye}),[ut,At]=Lr("formHelperText",{elementType:mY,externalForwardedProps:kt,ownerState:ye}),[it,Sr]=Lr("select",{elementType:w0,externalForwardedProps:kt,ownerState:ye}),xr=V.jsx(Ue,{"aria-describedby":qe,autoComplete:n,autoFocus:s,defaultValue:u,fullWidth:g,multiline:F,name:B,rows:re,maxRows:A,minRows:L,type:oe,value:ce,id:ke,inputRef:D,onBlur:M,onChange:k,onFocus:q,placeholder:G,inputProps:dt,slots:{input:me.htmlInput?lt:void 0},...Le});return V.jsxs(Vt,{...Xe,children:[R!=null&&R!==""&&V.jsx(Ne,{htmlFor:ke,id:vt,...rt,children:R}),se?V.jsx(it,{"aria-describedby":qe,id:ke,labelId:vt,value:ce,input:xr,...Sr,children:a}):xr,y&&V.jsx(ut,{id:qe,...At,children:y})]})});function LQ(i){return or("MuiDialog",i)}const gS=ar("MuiDialog",["root","scrollPaper","scrollBody","container","paper","paperScrollPaper","paperScrollBody","paperWidthFalse","paperWidthXs","paperWidthSm","paperWidthMd","paperWidthLg","paperWidthXl","paperFullWidth","paperFullScreen"]),VF=j.createContext({}),OQ=ft(UF,{name:"MuiDialog",slot:"Backdrop",overrides:(i,e)=>e.backdrop})({zIndex:-1}),MQ=i=>{const{classes:e,scroll:t,maxWidth:r,fullWidth:n,fullScreen:s}=i,a={root:["root"],container:["container",`scroll${ht(t)}`],paper:["paper",`paperScroll${ht(t)}`,`paperWidth${ht(String(r))}`,n&&"paperFullWidth",s&&"paperFullScreen"]};return lr(a,LQ,e)},FQ=ft(ww,{name:"MuiDialog",slot:"Root"})({"@media print":{position:"absolute !important"}}),BQ=ft("div",{name:"MuiDialog",slot:"Container",overridesResolver:(i,e)=>{const{ownerState:t}=i;return[e.container,e[`scroll${ht(t.scroll)}`]]}})({height:"100%","@media print":{height:"auto"},outline:0,variants:[{props:{scroll:"paper"},style:{display:"flex",justifyContent:"center",alignItems:"center"}},{props:{scroll:"body"},style:{overflowY:"auto",overflowX:"hidden",textAlign:"center","&::after":{content:'""',display:"inline-block",verticalAlign:"middle",height:"100%",width:"0"}}}]}),NQ=ft(Rh,{name:"MuiDialog",slot:"Paper",overridesResolver:(i,e)=>{const{ownerState:t}=i;return[e.paper,e[`scrollPaper${ht(t.scroll)}`],e[`paperWidth${ht(String(t.maxWidth))}`],t.fullWidth&&e.paperFullWidth,t.fullScreen&&e.paperFullScreen]}})(Tr(({theme:i})=>({margin:32,position:"relative",overflowY:"auto","@media print":{overflowY:"visible",boxShadow:"none"},variants:[{props:{scroll:"paper"},style:{display:"flex",flexDirection:"column",maxHeight:"calc(100% - 64px)"}},{props:{scroll:"body"},style:{display:"inline-block",verticalAlign:"middle",textAlign:"initial"}},{props:({ownerState:e})=>!e.maxWidth,style:{maxWidth:"calc(100% - 64px)"}},{props:{maxWidth:"xs"},style:{maxWidth:i.breakpoints.unit==="px"?Math.max(i.breakpoints.values.xs,444):`max(${i.breakpoints.values.xs}${i.breakpoints.unit}, 444px)`,[`&.${gS.paperScrollBody}`]:{[i.breakpoints.down(Math.max(i.breakpoints.values.xs,444)+64)]:{maxWidth:"calc(100% - 64px)"}}}},...Object.keys(i.breakpoints.values).filter(e=>e!=="xs").map(e=>({props:{maxWidth:e},style:{maxWidth:`${i.breakpoints.values[e]}${i.breakpoints.unit}`,[`&.${gS.paperScrollBody}`]:{[i.breakpoints.down(i.breakpoints.values[e]+64)]:{maxWidth:"calc(100% - 64px)"}}}})),{props:({ownerState:e})=>e.fullWidth,style:{width:"calc(100% - 64px)"}},{props:({ownerState:e})=>e.fullScreen,style:{margin:0,width:"100%",maxWidth:"100%",height:"100%",maxHeight:"none",borderRadius:0,[`&.${gS.paperScrollBody}`]:{margin:0,maxWidth:"100%"}}}]}))),cd=j.forwardRef(function(e,t){const r=ur({props:e,name:"MuiDialog"}),n=Ph(),s={enter:n.transitions.duration.enteringScreen,exit:n.transitions.duration.leavingScreen},{"aria-describedby":a,"aria-labelledby":o,"aria-modal":l=!0,BackdropComponent:u,BackdropProps:c,children:h,className:m,disableEscapeKeyDown:g=!1,fullScreen:y=!1,fullWidth:_=!1,maxWidth:T="sm",onClick:E,onClose:w,open:D,PaperComponent:R=Rh,PaperProps:A={},scroll:L="paper",slots:F={},slotProps:B={},TransitionComponent:M=oC,transitionDuration:k=s,TransitionProps:q,...G}=r,H={...r,disableEscapeKeyDown:g,fullScreen:y,fullWidth:_,maxWidth:T,scroll:L},re=MQ(H),se=j.useRef(),de=Xe=>{se.current=Xe.target===Xe.currentTarget},me=Xe=>{E&&E(Xe),se.current&&(se.current=null,w&&w(Xe,"backdropClick"))},ue=Lh(o),oe=j.useMemo(()=>({titleId:ue}),[ue]),ce={transition:M,...F},te={transition:q,paper:A,backdrop:c,...B},fe={slots:ce,slotProps:te},[ye,Se]=Lr("root",{elementType:FQ,shouldForwardComponentProp:!0,externalForwardedProps:fe,ownerState:H,className:Nt(re.root,m),ref:t}),[ke,qe]=Lr("backdrop",{elementType:OQ,shouldForwardComponentProp:!0,externalForwardedProps:fe,ownerState:H}),[vt,et]=Lr("paper",{elementType:NQ,shouldForwardComponentProp:!0,externalForwardedProps:fe,ownerState:H,className:Nt(re.paper,A.className)}),[kt,pt]=Lr("container",{elementType:BQ,externalForwardedProps:fe,ownerState:H,className:re.container}),[Ut,Vt]=Lr("transition",{elementType:oC,externalForwardedProps:fe,ownerState:H,additionalProps:{appear:!0,in:D,timeout:k,role:"presentation"}});return V.jsx(ye,{closeAfterTransition:!0,slots:{backdrop:ke},slotProps:{backdrop:{transitionDuration:k,as:u,...qe}},disableEscapeKeyDown:g,onClose:w,open:D,onClick:me,...Se,...G,children:V.jsx(Ut,{...Vt,children:V.jsx(kt,{onMouseDown:de,...pt,children:V.jsx(vt,{as:R,elevation:24,role:"dialog","aria-describedby":a,"aria-labelledby":ue,"aria-modal":l,...et,children:V.jsx(VF.Provider,{value:oe,children:h})})})})})});function qF(i,e){const t=Jt({},e);return Object.keys(i).forEach(r=>{if(r.toString().match(/^(components|slots)$/))t[r]=Jt({},i[r],t[r]);else if(r.toString().match(/^(componentsProps|slotProps)$/)){const n=i[r]||{},s=e[r];t[r]={},!s||!Object.keys(s)?t[r]=n:!n||!Object.keys(n)?t[r]=s:(t[r]=Jt({},s),Object.keys(n).forEach(a=>{t[r][a]=qF(n[a],s[a])}))}else t[r]===void 0&&(t[r]=i[r])}),t}function UQ(i,e,t=void 0){const r={};return Object.keys(i).forEach(n=>{r[n]=i[n].reduce((s,a)=>{if(a){const o=e(a);o!==""&&s.push(o),t&&t[a]&&s.push(t[a])}return s},[]).join(" ")}),r}const tR=i=>i,$Q=()=>{let i=tR;return{configure(e){i=e},generate(e){return i(e)},reset(){i=tR}}},jQ=$Q(),zQ={active:"active",checked:"checked",completed:"completed",disabled:"disabled",error:"error",expanded:"expanded",focused:"focused",focusVisible:"focusVisible",open:"open",readOnly:"readOnly",required:"required",selected:"selected"};function WF(i,e,t="Mui"){const r=zQ[e];return r?`${t}-${r}`:`${jQ.generate(i)}-${e}`}function HQ(i,e,t="Mui"){const r={};return e.forEach(n=>{r[n]=WF(i,n,t)}),r}function GF(i,e){const t={...e};for(const r in i)if(Object.prototype.hasOwnProperty.call(i,r)){const n=r;if(n==="components"||n==="slots")t[n]={...i[n],...t[n]};else if(n==="componentsProps"||n==="slotProps"){const s=i[n],a=e[n];if(!a)t[n]=s||{};else if(!s)t[n]=a;else{t[n]={...a};for(const o in s)if(Object.prototype.hasOwnProperty.call(s,o)){const l=o;t[n][l]=GF(s[l],a[l])}}}else t[n]===void 0&&(t[n]=i[n])}return t}function rR(i){try{return i.matches(":focus-visible")}catch{}return!1}class h_{static create(){return new h_}static use(){const e=NF(h_.create).current,[t,r]=j.useState(!1);return e.shouldMount=t,e.setShouldMount=r,j.useEffect(e.mountEffect,[t]),e}constructor(){this.ref={current:null},this.mounted=null,this.didMount=!1,this.shouldMount=!1,this.setShouldMount=null}mount(){return this.mounted||(this.mounted=qQ(),this.shouldMount=!0,this.setShouldMount(this.shouldMount)),this.mounted}mountEffect=()=>{this.shouldMount&&!this.didMount&&this.ref.current!==null&&(this.didMount=!0,this.mounted.resolve())};start(...e){this.mount().then(()=>this.ref.current?.start(...e))}stop(...e){this.mount().then(()=>this.ref.current?.stop(...e))}pulsate(...e){this.mount().then(()=>this.ref.current?.pulsate(...e))}}function VQ(){return h_.use()}function qQ(){let i,e;const t=new Promise((r,n)=>{i=r,e=n});return t.resolve=i,t.reject=e,t}function WQ(i){const{className:e,classes:t,pulsate:r=!1,rippleX:n,rippleY:s,rippleSize:a,in:o,onExited:l,timeout:u}=i,[c,h]=j.useState(!1),m=Nt(e,t.ripple,t.rippleVisible,r&&t.ripplePulsate),g={width:a,height:a,top:-(a/2)+s,left:-(a/2)+n},y=Nt(t.child,c&&t.childLeaving,r&&t.childPulsate);return!o&&!c&&h(!0),j.useEffect(()=>{if(!o&&l!=null){const _=setTimeout(l,u);return()=>{clearTimeout(_)}}},[l,o,u]),V.jsx("span",{className:m,style:g,children:V.jsx("span",{className:y})})}const Ao=ar("MuiTouchRipple",["root","ripple","rippleVisible","ripplePulsate","child","childLeaving","childPulsate"]),lC=550,GQ=80,KQ=X0`
  0% {
    transform: scale(0);
    opacity: 0.1;
  }

  100% {
    transform: scale(1);
    opacity: 0.3;
  }
`,XQ=X0`
  0% {
    opacity: 1;
  }

  100% {
    opacity: 0;
  }
`,YQ=X0`
  0% {
    transform: scale(1);
  }

  50% {
    transform: scale(0.92);
  }

  100% {
    transform: scale(1);
  }
`,QQ=ft("span",{name:"MuiTouchRipple",slot:"Root"})({overflow:"hidden",pointerEvents:"none",position:"absolute",zIndex:0,top:0,right:0,bottom:0,left:0,borderRadius:"inherit"}),JQ=ft(WQ,{name:"MuiTouchRipple",slot:"Ripple"})`
  opacity: 0;
  position: absolute;

  &.${Ao.rippleVisible} {
    opacity: 0.3;
    transform: scale(1);
    animation-name: ${KQ};
    animation-duration: ${lC}ms;
    animation-timing-function: ${({theme:i})=>i.transitions.easing.easeInOut};
  }

  &.${Ao.ripplePulsate} {
    animation-duration: ${({theme:i})=>i.transitions.duration.shorter}ms;
  }

  & .${Ao.child} {
    opacity: 1;
    display: block;
    width: 100%;
    height: 100%;
    border-radius: 50%;
    background-color: currentColor;
  }

  & .${Ao.childLeaving} {
    opacity: 0;
    animation-name: ${XQ};
    animation-duration: ${lC}ms;
    animation-timing-function: ${({theme:i})=>i.transitions.easing.easeInOut};
  }

  & .${Ao.childPulsate} {
    position: absolute;
    /* @noflip */
    left: 0px;
    top: 0;
    animation-name: ${YQ};
    animation-duration: 2500ms;
    animation-timing-function: ${({theme:i})=>i.transitions.easing.easeInOut};
    animation-iteration-count: infinite;
    animation-delay: 200ms;
  }
`,ZQ=j.forwardRef(function(e,t){const r=ur({props:e,name:"MuiTouchRipple"}),{center:n=!1,classes:s={},className:a,...o}=r,[l,u]=j.useState([]),c=j.useRef(0),h=j.useRef(null);j.useEffect(()=>{h.current&&(h.current(),h.current=null)},[l]);const m=j.useRef(!1),g=bw(),y=j.useRef(null),_=j.useRef(null),T=j.useCallback(R=>{const{pulsate:A,rippleX:L,rippleY:F,rippleSize:B,cb:M}=R;u(k=>[...k,V.jsx(JQ,{classes:{ripple:Nt(s.ripple,Ao.ripple),rippleVisible:Nt(s.rippleVisible,Ao.rippleVisible),ripplePulsate:Nt(s.ripplePulsate,Ao.ripplePulsate),child:Nt(s.child,Ao.child),childLeaving:Nt(s.childLeaving,Ao.childLeaving),childPulsate:Nt(s.childPulsate,Ao.childPulsate)},timeout:lC,pulsate:A,rippleX:L,rippleY:F,rippleSize:B},c.current)]),c.current+=1,h.current=M},[s]),E=j.useCallback((R={},A={},L=()=>{})=>{const{pulsate:F=!1,center:B=n||A.pulsate,fakeElement:M=!1}=A;if(R?.type==="mousedown"&&m.current){m.current=!1;return}R?.type==="touchstart"&&(m.current=!0);const k=M?null:_.current,q=k?k.getBoundingClientRect():{width:0,height:0,left:0,top:0};let G,H,re;if(B||R===void 0||R.clientX===0&&R.clientY===0||!R.clientX&&!R.touches)G=Math.round(q.width/2),H=Math.round(q.height/2);else{const{clientX:se,clientY:de}=R.touches&&R.touches.length>0?R.touches[0]:R;G=Math.round(se-q.left),H=Math.round(de-q.top)}if(B)re=Math.sqrt((2*q.width**2+q.height**2)/3),re%2===0&&(re+=1);else{const se=Math.max(Math.abs((k?k.clientWidth:0)-G),G)*2+2,de=Math.max(Math.abs((k?k.clientHeight:0)-H),H)*2+2;re=Math.sqrt(se**2+de**2)}R?.touches?y.current===null&&(y.current=()=>{T({pulsate:F,rippleX:G,rippleY:H,rippleSize:re,cb:L})},g.start(GQ,()=>{y.current&&(y.current(),y.current=null)})):T({pulsate:F,rippleX:G,rippleY:H,rippleSize:re,cb:L})},[n,T,g]),w=j.useCallback(()=>{E({},{pulsate:!0})},[E]),D=j.useCallback((R,A)=>{if(g.clear(),R?.type==="touchend"&&y.current){y.current(),y.current=null,g.start(0,()=>{D(R,A)});return}y.current=null,u(L=>L.length>0?L.slice(1):L),h.current=A},[g]);return j.useImperativeHandle(t,()=>({pulsate:w,start:E,stop:D}),[w,E,D]),V.jsx(QQ,{className:Nt(Ao.root,s.root,a),ref:_,...o,children:V.jsx(Cw,{component:null,exit:!0,children:l})})});function eJ(i){return or("MuiButtonBase",i)}const tJ=ar("MuiButtonBase",["root","disabled","focusVisible"]),rJ=i=>{const{disabled:e,focusVisible:t,focusVisibleClassName:r,classes:n}=i,a=lr({root:["root",e&&"disabled",t&&"focusVisible"]},eJ,n);return t&&r&&(a.root+=` ${r}`),a},iJ=ft("button",{name:"MuiButtonBase",slot:"Root"})({display:"inline-flex",alignItems:"center",justifyContent:"center",position:"relative",boxSizing:"border-box",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none",textDecoration:"none",color:"inherit","&::-moz-focus-inner":{borderStyle:"none"},[`&.${tJ.disabled}`]:{pointerEvents:"none",cursor:"default"},"@media print":{colorAdjust:"exact"}}),wh=j.forwardRef(function(e,t){const r=ur({props:e,name:"MuiButtonBase"}),{action:n,centerRipple:s=!1,children:a,className:o,component:l="button",disabled:u=!1,disableRipple:c=!1,disableTouchRipple:h=!1,focusRipple:m=!1,focusVisibleClassName:g,LinkComponent:y="a",onBlur:_,onClick:T,onContextMenu:E,onDragLeave:w,onFocus:D,onFocusVisible:R,onKeyDown:A,onKeyUp:L,onMouseDown:F,onMouseLeave:B,onMouseUp:M,onTouchEnd:k,onTouchMove:q,onTouchStart:G,tabIndex:H=0,TouchRippleProps:re,touchRippleRef:se,type:de,...me}=r,ue=j.useRef(null),oe=VQ(),ce=mn(oe.ref,se),[te,fe]=j.useState(!1);u&&te&&fe(!1),j.useImperativeHandle(n,()=>({focusVisible:()=>{fe(!0),ue.current.focus()}}),[]);const ye=oe.shouldMount&&!c&&!u;j.useEffect(()=>{te&&m&&!c&&oe.pulsate()},[c,m,te,oe]);const Se=Hu(oe,"start",F,h),ke=Hu(oe,"stop",E,h),qe=Hu(oe,"stop",w,h),vt=Hu(oe,"stop",M,h),et=Hu(oe,"stop",it=>{te&&it.preventDefault(),B&&B(it)},h),kt=Hu(oe,"start",G,h),pt=Hu(oe,"stop",k,h),Ut=Hu(oe,"stop",q,h),Vt=Hu(oe,"stop",it=>{rR(it.target)||fe(!1),_&&_(it)},!1),Xe=uu(it=>{ue.current||(ue.current=it.currentTarget),rR(it.target)&&(fe(!0),R&&R(it)),D&&D(it)}),Ue=()=>{const it=ue.current;return l&&l!=="button"&&!(it.tagName==="A"&&it.href)},Le=uu(it=>{m&&!it.repeat&&te&&it.key===" "&&oe.stop(it,()=>{oe.start(it)}),it.target===it.currentTarget&&Ue()&&it.key===" "&&it.preventDefault(),A&&A(it),it.target===it.currentTarget&&Ue()&&it.key==="Enter"&&!u&&(it.preventDefault(),T&&T(it))}),Ne=uu(it=>{m&&it.key===" "&&te&&!it.defaultPrevented&&oe.stop(it,()=>{oe.pulsate(it)}),L&&L(it),T&&it.target===it.currentTarget&&Ue()&&it.key===" "&&!it.defaultPrevented&&T(it)});let rt=l;rt==="button"&&(me.href||me.to)&&(rt=y);const lt={};rt==="button"?(lt.type=de===void 0?"button":de,lt.disabled=u):(!me.href&&!me.to&&(lt.role="button"),u&&(lt["aria-disabled"]=u));const dt=mn(t,ue),ut={...r,centerRipple:s,component:l,disabled:u,disableRipple:c,disableTouchRipple:h,focusRipple:m,tabIndex:H,focusVisible:te},At=rJ(ut);return V.jsxs(iJ,{as:rt,className:Nt(At.root,o),ownerState:ut,onBlur:Vt,onClick:T,onContextMenu:ke,onFocus:Xe,onKeyDown:Le,onKeyUp:Ne,onMouseDown:Se,onMouseLeave:et,onMouseUp:vt,onDragLeave:qe,onTouchEnd:pt,onTouchMove:Ut,onTouchStart:kt,ref:dt,tabIndex:u?-1:H,type:de,...lt,...me,children:[a,ye?V.jsx(ZQ,{ref:ce,center:s,...re}):null]})});function Hu(i,e,t,r=!1){return uu(n=>(t&&t(n),r||i[e](n),!0))}function nJ(i){return or("MuiCircularProgress",i)}ar("MuiCircularProgress",["root","determinate","indeterminate","colorPrimary","colorSecondary","svg","circle","circleDeterminate","circleIndeterminate","circleDisableShrink"]);const Hc=44,uC=X0`
  0% {
    transform: rotate(0deg);
  }

  100% {
    transform: rotate(360deg);
  }
`,cC=X0`
  0% {
    stroke-dasharray: 1px, 200px;
    stroke-dashoffset: 0;
  }

  50% {
    stroke-dasharray: 100px, 200px;
    stroke-dashoffset: -15px;
  }

  100% {
    stroke-dasharray: 1px, 200px;
    stroke-dashoffset: -126px;
  }
`,sJ=typeof uC!="string"?iw`
        animation: ${uC} 1.4s linear infinite;
      `:null,aJ=typeof cC!="string"?iw`
        animation: ${cC} 1.4s ease-in-out infinite;
      `:null,oJ=i=>{const{classes:e,variant:t,color:r,disableShrink:n}=i,s={root:["root",t,`color${ht(r)}`],svg:["svg"],circle:["circle",`circle${ht(t)}`,n&&"circleDisableShrink"]};return lr(s,nJ,e)},lJ=ft("span",{name:"MuiCircularProgress",slot:"Root",overridesResolver:(i,e)=>{const{ownerState:t}=i;return[e.root,e[t.variant],e[`color${ht(t.color)}`]]}})(Tr(({theme:i})=>({display:"inline-block",variants:[{props:{variant:"determinate"},style:{transition:i.transitions.create("transform")}},{props:{variant:"indeterminate"},style:sJ||{animation:`${uC} 1.4s linear infinite`}},...Object.entries(i.palette).filter(ds()).map(([e])=>({props:{color:e},style:{color:(i.vars||i).palette[e].main}}))]}))),uJ=ft("svg",{name:"MuiCircularProgress",slot:"Svg"})({display:"block"}),cJ=ft("circle",{name:"MuiCircularProgress",slot:"Circle",overridesResolver:(i,e)=>{const{ownerState:t}=i;return[e.circle,e[`circle${ht(t.variant)}`],t.disableShrink&&e.circleDisableShrink]}})(Tr(({theme:i})=>({stroke:"currentColor",variants:[{props:{variant:"determinate"},style:{transition:i.transitions.create("stroke-dashoffset")}},{props:{variant:"indeterminate"},style:{strokeDasharray:"80px, 200px",strokeDashoffset:0}},{props:({ownerState:e})=>e.variant==="indeterminate"&&!e.disableShrink,style:aJ||{animation:`${cC} 1.4s ease-in-out infinite`}}]}))),Iw=j.forwardRef(function(e,t){const r=ur({props:e,name:"MuiCircularProgress"}),{className:n,color:s="primary",disableShrink:a=!1,size:o=40,style:l,thickness:u=3.6,value:c=0,variant:h="indeterminate",...m}=r,g={...r,color:s,disableShrink:a,size:o,thickness:u,value:c,variant:h},y=oJ(g),_={},T={},E={};if(h==="determinate"){const w=2*Math.PI*((Hc-u)/2);_.strokeDasharray=w.toFixed(3),E["aria-valuenow"]=Math.round(c),_.strokeDashoffset=`${((100-c)/100*w).toFixed(3)}px`,T.transform="rotate(-90deg)"}return V.jsx(lJ,{className:Nt(y.root,n),style:{width:o,height:o,...T,...l},ownerState:g,ref:t,role:"progressbar",...E,...m,children:V.jsx(uJ,{className:y.svg,ownerState:g,viewBox:`${Hc/2} ${Hc/2} ${Hc} ${Hc}`,children:V.jsx(cJ,{className:y.circle,style:_,ownerState:g,cx:Hc,cy:Hc,r:(Hc-u)/2,fill:"none",strokeWidth:u})})})});function dJ(i){return or("MuiButton",i)}const Hd=ar("MuiButton",["root","text","textInherit","textPrimary","textSecondary","textSuccess","textError","textInfo","textWarning","outlined","outlinedInherit","outlinedPrimary","outlinedSecondary","outlinedSuccess","outlinedError","outlinedInfo","outlinedWarning","contained","containedInherit","containedPrimary","containedSecondary","containedSuccess","containedError","containedInfo","containedWarning","disableElevation","focusVisible","disabled","colorInherit","colorPrimary","colorSecondary","colorSuccess","colorError","colorInfo","colorWarning","textSizeSmall","textSizeMedium","textSizeLarge","outlinedSizeSmall","outlinedSizeMedium","outlinedSizeLarge","containedSizeSmall","containedSizeMedium","containedSizeLarge","sizeMedium","sizeSmall","sizeLarge","fullWidth","startIcon","endIcon","icon","iconSizeSmall","iconSizeMedium","iconSizeLarge","loading","loadingWrapper","loadingIconPlaceholder","loadingIndicator","loadingPositionCenter","loadingPositionStart","loadingPositionEnd"]),KF=j.createContext({}),hJ=j.createContext(void 0),fJ=i=>{const{color:e,disableElevation:t,fullWidth:r,size:n,variant:s,loading:a,loadingPosition:o,classes:l}=i,u={root:["root",a&&"loading",s,`${s}${ht(e)}`,`size${ht(n)}`,`${s}Size${ht(n)}`,`color${ht(e)}`,t&&"disableElevation",r&&"fullWidth",a&&`loadingPosition${ht(o)}`],startIcon:["icon","startIcon",`iconSize${ht(n)}`],endIcon:["icon","endIcon",`iconSize${ht(n)}`],loadingIndicator:["loadingIndicator"],loadingWrapper:["loadingWrapper"]},c=lr(u,dJ,l);return{...l,...c}},XF=[{props:{size:"small"},style:{"& > *:nth-of-type(1)":{fontSize:18}}},{props:{size:"medium"},style:{"& > *:nth-of-type(1)":{fontSize:20}}},{props:{size:"large"},style:{"& > *:nth-of-type(1)":{fontSize:22}}}],pJ=ft(wh,{shouldForwardProp:i=>Jn(i)||i==="classes",name:"MuiButton",slot:"Root",overridesResolver:(i,e)=>{const{ownerState:t}=i;return[e.root,e[t.variant],e[`${t.variant}${ht(t.color)}`],e[`size${ht(t.size)}`],e[`${t.variant}Size${ht(t.size)}`],t.color==="inherit"&&e.colorInherit,t.disableElevation&&e.disableElevation,t.fullWidth&&e.fullWidth,t.loading&&e.loading]}})(Tr(({theme:i})=>{const e=i.palette.mode==="light"?i.palette.grey[300]:i.palette.grey[800],t=i.palette.mode==="light"?i.palette.grey.A100:i.palette.grey[700];return{...i.typography.button,minWidth:64,padding:"6px 16px",border:0,borderRadius:(i.vars||i).shape.borderRadius,transition:i.transitions.create(["background-color","box-shadow","border-color","color"],{duration:i.transitions.duration.short}),"&:hover":{textDecoration:"none"},[`&.${Hd.disabled}`]:{color:(i.vars||i).palette.action.disabled},variants:[{props:{variant:"contained"},style:{color:"var(--variant-containedColor)",backgroundColor:"var(--variant-containedBg)",boxShadow:(i.vars||i).shadows[2],"&:hover":{boxShadow:(i.vars||i).shadows[4],"@media (hover: none)":{boxShadow:(i.vars||i).shadows[2]}},"&:active":{boxShadow:(i.vars||i).shadows[8]},[`&.${Hd.focusVisible}`]:{boxShadow:(i.vars||i).shadows[6]},[`&.${Hd.disabled}`]:{color:(i.vars||i).palette.action.disabled,boxShadow:(i.vars||i).shadows[0],backgroundColor:(i.vars||i).palette.action.disabledBackground}}},{props:{variant:"outlined"},style:{padding:"5px 15px",border:"1px solid currentColor",borderColor:"var(--variant-outlinedBorder, currentColor)",backgroundColor:"var(--variant-outlinedBg)",color:"var(--variant-outlinedColor)",[`&.${Hd.disabled}`]:{border:`1px solid ${(i.vars||i).palette.action.disabledBackground}`}}},{props:{variant:"text"},style:{padding:"6px 8px",color:"var(--variant-textColor)",backgroundColor:"var(--variant-textBg)"}},...Object.entries(i.palette).filter(ds()).map(([r])=>({props:{color:r},style:{"--variant-textColor":(i.vars||i).palette[r].main,"--variant-outlinedColor":(i.vars||i).palette[r].main,"--variant-outlinedBorder":i.vars?`rgba(${i.vars.palette[r].mainChannel} / 0.5)`:Gr(i.palette[r].main,.5),"--variant-containedColor":(i.vars||i).palette[r].contrastText,"--variant-containedBg":(i.vars||i).palette[r].main,"@media (hover: hover)":{"&:hover":{"--variant-containedBg":(i.vars||i).palette[r].dark,"--variant-textBg":i.vars?`rgba(${i.vars.palette[r].mainChannel} / ${i.vars.palette.action.hoverOpacity})`:Gr(i.palette[r].main,i.palette.action.hoverOpacity),"--variant-outlinedBorder":(i.vars||i).palette[r].main,"--variant-outlinedBg":i.vars?`rgba(${i.vars.palette[r].mainChannel} / ${i.vars.palette.action.hoverOpacity})`:Gr(i.palette[r].main,i.palette.action.hoverOpacity)}}}})),{props:{color:"inherit"},style:{color:"inherit",borderColor:"currentColor","--variant-containedBg":i.vars?i.vars.palette.Button.inheritContainedBg:e,"@media (hover: hover)":{"&:hover":{"--variant-containedBg":i.vars?i.vars.palette.Button.inheritContainedHoverBg:t,"--variant-textBg":i.vars?`rgba(${i.vars.palette.text.primaryChannel} / ${i.vars.palette.action.hoverOpacity})`:Gr(i.palette.text.primary,i.palette.action.hoverOpacity),"--variant-outlinedBg":i.vars?`rgba(${i.vars.palette.text.primaryChannel} / ${i.vars.palette.action.hoverOpacity})`:Gr(i.palette.text.primary,i.palette.action.hoverOpacity)}}}},{props:{size:"small",variant:"text"},style:{padding:"4px 5px",fontSize:i.typography.pxToRem(13)}},{props:{size:"large",variant:"text"},style:{padding:"8px 11px",fontSize:i.typography.pxToRem(15)}},{props:{size:"small",variant:"outlined"},style:{padding:"3px 9px",fontSize:i.typography.pxToRem(13)}},{props:{size:"large",variant:"outlined"},style:{padding:"7px 21px",fontSize:i.typography.pxToRem(15)}},{props:{size:"small",variant:"contained"},style:{padding:"4px 10px",fontSize:i.typography.pxToRem(13)}},{props:{size:"large",variant:"contained"},style:{padding:"8px 22px",fontSize:i.typography.pxToRem(15)}},{props:{disableElevation:!0},style:{boxShadow:"none","&:hover":{boxShadow:"none"},[`&.${Hd.focusVisible}`]:{boxShadow:"none"},"&:active":{boxShadow:"none"},[`&.${Hd.disabled}`]:{boxShadow:"none"}}},{props:{fullWidth:!0},style:{width:"100%"}},{props:{loadingPosition:"center"},style:{transition:i.transitions.create(["background-color","box-shadow","border-color"],{duration:i.transitions.duration.short}),[`&.${Hd.loading}`]:{color:"transparent"}}}]}})),mJ=ft("span",{name:"MuiButton",slot:"StartIcon",overridesResolver:(i,e)=>{const{ownerState:t}=i;return[e.startIcon,t.loading&&e.startIconLoadingStart,e[`iconSize${ht(t.size)}`]]}})(({theme:i})=>({display:"inherit",marginRight:8,marginLeft:-4,variants:[{props:{size:"small"},style:{marginLeft:-2}},{props:{loadingPosition:"start",loading:!0},style:{transition:i.transitions.create(["opacity"],{duration:i.transitions.duration.short}),opacity:0}},{props:{loadingPosition:"start",loading:!0,fullWidth:!0},style:{marginRight:-8}},...XF]})),gJ=ft("span",{name:"MuiButton",slot:"EndIcon",overridesResolver:(i,e)=>{const{ownerState:t}=i;return[e.endIcon,t.loading&&e.endIconLoadingEnd,e[`iconSize${ht(t.size)}`]]}})(({theme:i})=>({display:"inherit",marginRight:-4,marginLeft:8,variants:[{props:{size:"small"},style:{marginRight:-2}},{props:{loadingPosition:"end",loading:!0},style:{transition:i.transitions.create(["opacity"],{duration:i.transitions.duration.short}),opacity:0}},{props:{loadingPosition:"end",loading:!0,fullWidth:!0},style:{marginLeft:-8}},...XF]})),vJ=ft("span",{name:"MuiButton",slot:"LoadingIndicator"})(({theme:i})=>({display:"none",position:"absolute",visibility:"visible",variants:[{props:{loading:!0},style:{display:"flex"}},{props:{loadingPosition:"start"},style:{left:14}},{props:{loadingPosition:"start",size:"small"},style:{left:10}},{props:{variant:"text",loadingPosition:"start"},style:{left:6}},{props:{loadingPosition:"center"},style:{left:"50%",transform:"translate(-50%)",color:(i.vars||i).palette.action.disabled}},{props:{loadingPosition:"end"},style:{right:14}},{props:{loadingPosition:"end",size:"small"},style:{right:10}},{props:{variant:"text",loadingPosition:"end"},style:{right:6}},{props:{loadingPosition:"start",fullWidth:!0},style:{position:"relative",left:-10}},{props:{loadingPosition:"end",fullWidth:!0},style:{position:"relative",right:-10}}]})),iR=ft("span",{name:"MuiButton",slot:"LoadingIconPlaceholder"})({display:"inline-block",width:"1em",height:"1em"}),mi=j.forwardRef(function(e,t){const r=j.useContext(KF),n=j.useContext(hJ),s=GF(r,e),a=ur({props:s,name:"MuiButton"}),{children:o,color:l="primary",component:u="button",className:c,disabled:h=!1,disableElevation:m=!1,disableFocusRipple:g=!1,endIcon:y,focusVisibleClassName:_,fullWidth:T=!1,id:E,loading:w=null,loadingIndicator:D,loadingPosition:R="center",size:A="medium",startIcon:L,type:F,variant:B="text",...M}=a,k=Lh(E),q=D??V.jsx(Iw,{"aria-labelledby":k,color:"inherit",size:16}),G={...a,color:l,component:u,disabled:h,disableElevation:m,disableFocusRipple:g,fullWidth:T,loading:w,loadingIndicator:q,loadingPosition:R,size:A,type:F,variant:B},H=fJ(G),re=(L||w&&R==="start")&&V.jsx(mJ,{className:H.startIcon,ownerState:G,children:L||V.jsx(iR,{className:H.loadingIconPlaceholder,ownerState:G})}),se=(y||w&&R==="end")&&V.jsx(gJ,{className:H.endIcon,ownerState:G,children:y||V.jsx(iR,{className:H.loadingIconPlaceholder,ownerState:G})}),de=n||"",me=typeof w=="boolean"?V.jsx("span",{className:H.loadingWrapper,style:{display:"contents"},children:w&&V.jsx(vJ,{className:H.loadingIndicator,ownerState:G,children:q})}):null;return V.jsxs(pJ,{ownerState:G,className:Nt(r.className,H.root,c,de),component:u,disabled:h||w,focusRipple:!g,focusVisibleClassName:Nt(H.focusVisible,_),ref:t,type:F,id:w?k:E,...M,classes:H,children:[re,R!=="end"&&me,o,R==="end"&&me,se]})});function yJ(i){return WF("MuiLoadingButton",i)}const Vu=HQ("MuiLoadingButton",["root","loading","loadingIndicator","loadingIndicatorCenter","loadingIndicatorStart","loadingIndicatorEnd","endIconLoadingEnd","startIconLoadingStart"]),_J=["children","disabled","id","loading","loadingIndicator","loadingPosition","variant"],xJ=i=>{const{loading:e,loadingPosition:t,classes:r}=i,n={root:["root",e&&"loading"],startIcon:[e&&`startIconLoading${ht(t)}`],endIcon:[e&&`endIconLoading${ht(t)}`],loadingIndicator:["loadingIndicator",e&&`loadingIndicator${ht(t)}`]},s=UQ(n,yJ,r);return Jt({},r,s)},TJ=i=>i!=="ownerState"&&i!=="theme"&&i!=="sx"&&i!=="as"&&i!=="classes",bJ=ft(mi,{shouldForwardProp:i=>TJ(i)||i==="classes",name:"MuiLoadingButton",slot:"Root",overridesResolver:(i,e)=>[e.root,e.startIconLoadingStart&&{[`& .${Vu.startIconLoadingStart}`]:e.startIconLoadingStart},e.endIconLoadingEnd&&{[`& .${Vu.endIconLoadingEnd}`]:e.endIconLoadingEnd}]})(({ownerState:i,theme:e})=>Jt({[`& .${Vu.startIconLoadingStart}, & .${Vu.endIconLoadingEnd}`]:{transition:e.transitions.create(["opacity"],{duration:e.transitions.duration.short}),opacity:0}},i.loadingPosition==="center"&&{transition:e.transitions.create(["background-color","box-shadow","border-color"],{duration:e.transitions.duration.short}),[`&.${Vu.loading}`]:{color:"transparent"}},i.loadingPosition==="start"&&i.fullWidth&&{[`& .${Vu.startIconLoadingStart}, & .${Vu.endIconLoadingEnd}`]:{transition:e.transitions.create(["opacity"],{duration:e.transitions.duration.short}),opacity:0,marginRight:-8}},i.loadingPosition==="end"&&i.fullWidth&&{[`& .${Vu.startIconLoadingStart}, & .${Vu.endIconLoadingEnd}`]:{transition:e.transitions.create(["opacity"],{duration:e.transitions.duration.short}),opacity:0,marginLeft:-8}})),SJ=ft("span",{name:"MuiLoadingButton",slot:"LoadingIndicator",overridesResolver:(i,e)=>{const{ownerState:t}=i;return[e.loadingIndicator,e[`loadingIndicator${ht(t.loadingPosition)}`]]}})(({theme:i,ownerState:e})=>Jt({position:"absolute",visibility:"visible",display:"flex"},e.loadingPosition==="start"&&(e.variant==="outlined"||e.variant==="contained")&&{left:e.size==="small"?10:14},e.loadingPosition==="start"&&e.variant==="text"&&{left:6},e.loadingPosition==="center"&&{left:"50%",transform:"translate(-50%)",color:(i.vars||i).palette.action.disabled},e.loadingPosition==="end"&&(e.variant==="outlined"||e.variant==="contained")&&{right:e.size==="small"?10:14},e.loadingPosition==="end"&&e.variant==="text"&&{right:6},e.loadingPosition==="start"&&e.fullWidth&&{position:"relative",left:-10},e.loadingPosition==="end"&&e.fullWidth&&{position:"relative",right:-10})),f_=j.forwardRef(function(e,t){const r=j.useContext(KF),n=qF(r,e),s=ur({props:n,name:"MuiLoadingButton"}),{children:a,disabled:o=!1,id:l,loading:u=!1,loadingIndicator:c,loadingPosition:h="center",variant:m="text"}=s,g=qx(s,_J),y=Lh(l),_=c??V.jsx(Iw,{"aria-labelledby":y,color:"inherit",size:16}),T=Jt({},s,{disabled:o,loading:u,loadingIndicator:_,loadingPosition:h,variant:m}),E=xJ(T),w=u?V.jsx(SJ,{className:E.loadingIndicator,ownerState:T,children:_}):null;return V.jsxs(bJ,Jt({disabled:o||u,id:y,ref:t},g,{variant:m,classes:E,ownerState:T,children:[T.loadingPosition==="end"?a:w,T.loadingPosition==="end"?w:a]}))}),CJ=Qr(V.jsx("path",{d:"M19 9h-4V3H9v6H5l7 7zM5 18v2h14v-2z"}));var nR;(function(i){i.DragStart="dragStart",i.DragMove="dragMove",i.DragEnd="dragEnd",i.DragCancel="dragCancel",i.DragOver="dragOver",i.RegisterDroppable="registerDroppable",i.SetDroppableDisabled="setDroppableDisabled",i.UnregisterDroppable="unregisterDroppable"})(nR||(nR={}));const EJ=Object.freeze({x:0,y:0});var Ef;(function(i){i[i.Forward=1]="Forward",i[i.Backward=-1]="Backward"})(Ef||(Ef={}));var sR;(function(i){i.Click="click",i.DragStart="dragstart",i.Keydown="keydown",i.ContextMenu="contextmenu",i.Resize="resize",i.SelectionChange="selectionchange",i.VisibilityChange="visibilitychange"})(sR||(sR={}));var ll;(function(i){i.Space="Space",i.Down="ArrowDown",i.Right="ArrowRight",i.Left="ArrowLeft",i.Up="ArrowUp",i.Esc="Escape",i.Enter="Enter"})(ll||(ll={}));ll.Space,ll.Enter,ll.Esc,ll.Space,ll.Enter;var aR;(function(i){i[i.RightClick=2]="RightClick"})(aR||(aR={}));var oR;(function(i){i[i.Pointer=0]="Pointer",i[i.DraggableRect=1]="DraggableRect"})(oR||(oR={}));var lR;(function(i){i[i.TreeOrder=0]="TreeOrder",i[i.ReversedTreeOrder=1]="ReversedTreeOrder"})(lR||(lR={}));Ef.Backward+"",Ef.Forward+"",Ef.Backward+"",Ef.Forward+"";var dC;(function(i){i[i.Always=0]="Always",i[i.BeforeDragging=1]="BeforeDragging",i[i.WhileDragging=2]="WhileDragging"})(dC||(dC={}));var hC;(function(i){i.Optimized="optimized"})(hC||(hC={}));dC.WhileDragging,hC.Optimized;({...EJ});var uR;(function(i){i[i.Uninitialized=0]="Uninitialized",i[i.Initializing=1]="Initializing",i[i.Initialized=2]="Initialized"})(uR||(uR={}));ll.Down,ll.Right,ll.Up,ll.Left;j.createContext({attributes:{},listeners:void 0,ref(){}});function wJ(i){return or("MuiDivider",i)}const cR=ar("MuiDivider",["root","absolute","fullWidth","inset","middle","flexItem","light","vertical","withChildren","withChildrenVertical","textAlignRight","textAlignLeft","wrapper","wrapperVertical"]),kJ=i=>{const{absolute:e,children:t,classes:r,flexItem:n,light:s,orientation:a,textAlign:o,variant:l}=i;return lr({root:["root",e&&"absolute",l,s&&"light",a==="vertical"&&"vertical",n&&"flexItem",t&&"withChildren",t&&a==="vertical"&&"withChildrenVertical",o==="right"&&a!=="vertical"&&"textAlignRight",o==="left"&&a!=="vertical"&&"textAlignLeft"],wrapper:["wrapper",a==="vertical"&&"wrapperVertical"]},wJ,r)},AJ=ft("div",{name:"MuiDivider",slot:"Root",overridesResolver:(i,e)=>{const{ownerState:t}=i;return[e.root,t.absolute&&e.absolute,e[t.variant],t.light&&e.light,t.orientation==="vertical"&&e.vertical,t.flexItem&&e.flexItem,t.children&&e.withChildren,t.children&&t.orientation==="vertical"&&e.withChildrenVertical,t.textAlign==="right"&&t.orientation!=="vertical"&&e.textAlignRight,t.textAlign==="left"&&t.orientation!=="vertical"&&e.textAlignLeft]}})(Tr(({theme:i})=>({margin:0,flexShrink:0,borderWidth:0,borderStyle:"solid",borderColor:(i.vars||i).palette.divider,borderBottomWidth:"thin",variants:[{props:{absolute:!0},style:{position:"absolute",bottom:0,left:0,width:"100%"}},{props:{light:!0},style:{borderColor:i.vars?`rgba(${i.vars.palette.dividerChannel} / 0.08)`:Gr(i.palette.divider,.08)}},{props:{variant:"inset"},style:{marginLeft:72}},{props:{variant:"middle",orientation:"horizontal"},style:{marginLeft:i.spacing(2),marginRight:i.spacing(2)}},{props:{variant:"middle",orientation:"vertical"},style:{marginTop:i.spacing(1),marginBottom:i.spacing(1)}},{props:{orientation:"vertical"},style:{height:"100%",borderBottomWidth:0,borderRightWidth:"thin"}},{props:{flexItem:!0},style:{alignSelf:"stretch",height:"auto"}},{props:({ownerState:e})=>!!e.children,style:{display:"flex",textAlign:"center",border:0,borderTopStyle:"solid",borderLeftStyle:"solid","&::before, &::after":{content:'""',alignSelf:"center"}}},{props:({ownerState:e})=>e.children&&e.orientation!=="vertical",style:{"&::before, &::after":{width:"100%",borderTop:`thin solid ${(i.vars||i).palette.divider}`,borderTopStyle:"inherit"}}},{props:({ownerState:e})=>e.orientation==="vertical"&&e.children,style:{flexDirection:"column","&::before, &::after":{height:"100%",borderLeft:`thin solid ${(i.vars||i).palette.divider}`,borderLeftStyle:"inherit"}}},{props:({ownerState:e})=>e.textAlign==="right"&&e.orientation!=="vertical",style:{"&::before":{width:"90%"},"&::after":{width:"10%"}}},{props:({ownerState:e})=>e.textAlign==="left"&&e.orientation!=="vertical",style:{"&::before":{width:"10%"},"&::after":{width:"90%"}}}]}))),IJ=ft("span",{name:"MuiDivider",slot:"Wrapper",overridesResolver:(i,e)=>{const{ownerState:t}=i;return[e.wrapper,t.orientation==="vertical"&&e.wrapperVertical]}})(Tr(({theme:i})=>({display:"inline-block",paddingLeft:`calc(${i.spacing(1)} * 1.2)`,paddingRight:`calc(${i.spacing(1)} * 1.2)`,whiteSpace:"nowrap",variants:[{props:{orientation:"vertical"},style:{paddingTop:`calc(${i.spacing(1)} * 1.2)`,paddingBottom:`calc(${i.spacing(1)} * 1.2)`}}]}))),fC=j.forwardRef(function(e,t){const r=ur({props:e,name:"MuiDivider"}),{absolute:n=!1,children:s,className:a,orientation:o="horizontal",component:l=s||o==="vertical"?"div":"hr",flexItem:u=!1,light:c=!1,role:h=l!=="hr"?"separator":void 0,textAlign:m="center",variant:g="fullWidth",...y}=r,_={...r,absolute:n,component:l,flexItem:u,light:c,orientation:o,role:h,textAlign:m,variant:g},T=kJ(_);return V.jsx(AJ,{as:l,className:Nt(T.root,a),role:h,ref:t,ownerState:_,"aria-orientation":h==="separator"&&(l!=="hr"||o==="vertical")?o:void 0,...y,children:s?V.jsx(IJ,{className:T.wrapper,ownerState:_,children:s}):null})});fC&&(fC.muiSkipListHighlight=!0);function DJ(i){return or("MuiListItemIcon",i)}const dR=ar("MuiListItemIcon",["root","alignItemsFlexStart"]),PJ=i=>{const{alignItems:e,classes:t}=i;return lr({root:["root",e==="flex-start"&&"alignItemsFlexStart"]},DJ,t)},RJ=ft("div",{name:"MuiListItemIcon",slot:"Root",overridesResolver:(i,e)=>{const{ownerState:t}=i;return[e.root,t.alignItems==="flex-start"&&e.alignItemsFlexStart]}})(Tr(({theme:i})=>({minWidth:56,color:(i.vars||i).palette.action.active,flexShrink:0,display:"inline-flex",variants:[{props:{alignItems:"flex-start"},style:{marginTop:8}}]}))),LJ=j.forwardRef(function(e,t){const r=ur({props:e,name:"MuiListItemIcon"}),{className:n,...s}=r,a=j.useContext(cl),o={...r,alignItems:a.alignItems},l=PJ(o);return V.jsx(RJ,{className:Nt(l.root,n),ownerState:o,ref:t,...s})});function OJ(i){return or("MuiTypography",i)}const hR=ar("MuiTypography",["root","h1","h2","h3","h4","h5","h6","subtitle1","subtitle2","body1","body2","inherit","button","caption","overline","alignLeft","alignRight","alignCenter","alignJustify","noWrap","gutterBottom","paragraph"]),MJ={primary:!0,secondary:!0,error:!0,info:!0,success:!0,warning:!0,textPrimary:!0,textSecondary:!0,textDisabled:!0},FJ=TX(),BJ=i=>{const{align:e,gutterBottom:t,noWrap:r,paragraph:n,variant:s,classes:a}=i,o={root:["root",s,i.align!=="inherit"&&`align${ht(e)}`,t&&"gutterBottom",r&&"noWrap",n&&"paragraph"]};return lr(o,OJ,a)},NJ=ft("span",{name:"MuiTypography",slot:"Root",overridesResolver:(i,e)=>{const{ownerState:t}=i;return[e.root,t.variant&&e[t.variant],t.align!=="inherit"&&e[`align${ht(t.align)}`],t.noWrap&&e.noWrap,t.gutterBottom&&e.gutterBottom,t.paragraph&&e.paragraph]}})(Tr(({theme:i})=>({margin:0,variants:[{props:{variant:"inherit"},style:{font:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}},...Object.entries(i.typography).filter(([e,t])=>e!=="inherit"&&t&&typeof t=="object").map(([e,t])=>({props:{variant:e},style:t})),...Object.entries(i.palette).filter(ds()).map(([e])=>({props:{color:e},style:{color:(i.vars||i).palette[e].main}})),...Object.entries(i.palette?.text||{}).filter(([,e])=>typeof e=="string").map(([e])=>({props:{color:`text${ht(e)}`},style:{color:(i.vars||i).palette.text[e]}})),{props:({ownerState:e})=>e.align!=="inherit",style:{textAlign:"var(--Typography-textAlign)"}},{props:({ownerState:e})=>e.noWrap,style:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}},{props:({ownerState:e})=>e.gutterBottom,style:{marginBottom:"0.35em"}},{props:({ownerState:e})=>e.paragraph,style:{marginBottom:16}}]}))),fR={h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",subtitle1:"h6",subtitle2:"h6",body1:"p",body2:"p",inherit:"p"},Tn=j.forwardRef(function(e,t){const{color:r,...n}=ur({props:e,name:"MuiTypography"}),s=!MJ[r],a=FJ({...n,...s&&{color:r}}),{align:o="inherit",className:l,component:u,gutterBottom:c=!1,noWrap:h=!1,paragraph:m=!1,variant:g="body1",variantMapping:y=fR,..._}=a,T={...a,align:o,color:r,className:l,component:u,gutterBottom:c,noWrap:h,paragraph:m,variant:g,variantMapping:y},E=u||(m?"p":y[g]||fR[g])||"span",w=BJ(T);return V.jsx(NJ,{as:E,ref:t,className:Nt(w.root,l),..._,ownerState:T,style:{...o!=="inherit"&&{"--Typography-textAlign":o},..._.style}})});function UJ(i){return or("MuiListItemText",i)}const wf=ar("MuiListItemText",["root","multiline","dense","inset","primary","secondary"]),$J=i=>{const{classes:e,inset:t,primary:r,secondary:n,dense:s}=i;return lr({root:["root",t&&"inset",s&&"dense",r&&n&&"multiline"],primary:["primary"],secondary:["secondary"]},UJ,e)},jJ=ft("div",{name:"MuiListItemText",slot:"Root",overridesResolver:(i,e)=>{const{ownerState:t}=i;return[{[`& .${wf.primary}`]:e.primary},{[`& .${wf.secondary}`]:e.secondary},e.root,t.inset&&e.inset,t.primary&&t.secondary&&e.multiline,t.dense&&e.dense]}})({flex:"1 1 auto",minWidth:0,marginTop:4,marginBottom:4,[`.${hR.root}:where(& .${wf.primary})`]:{display:"block"},[`.${hR.root}:where(& .${wf.secondary})`]:{display:"block"},variants:[{props:({ownerState:i})=>i.primary&&i.secondary,style:{marginTop:6,marginBottom:6}},{props:({ownerState:i})=>i.inset,style:{paddingLeft:56}}]}),zJ=j.forwardRef(function(e,t){const r=ur({props:e,name:"MuiListItemText"}),{children:n,className:s,disableTypography:a=!1,inset:o=!1,primary:l,primaryTypographyProps:u,secondary:c,secondaryTypographyProps:h,slots:m={},slotProps:g={},...y}=r,{dense:_}=j.useContext(cl);let T=l??n,E=c;const w={...r,disableTypography:a,inset:o,primary:!!T,secondary:!!E,dense:_},D=$J(w),R={slots:m,slotProps:{primary:u,secondary:h,...g}},[A,L]=Lr("root",{className:Nt(D.root,s),elementType:jJ,externalForwardedProps:{...R,...y},ownerState:w,ref:t}),[F,B]=Lr("primary",{className:D.primary,elementType:Tn,externalForwardedProps:R,ownerState:w}),[M,k]=Lr("secondary",{className:D.secondary,elementType:Tn,externalForwardedProps:R,ownerState:w});return T!=null&&T.type!==Tn&&!a&&(T=V.jsx(F,{variant:_?"body2":"body1",component:B?.variant?void 0:"span",...B,children:T})),E!=null&&E.type!==Tn&&!a&&(E=V.jsx(M,{variant:"body2",color:"textSecondary",...k,children:E})),V.jsxs(A,{...L,children:[T,E]})});function HJ(i){return or("MuiMenuItem",i)}const wm=ar("MuiMenuItem",["root","focusVisible","dense","disabled","divider","gutters","selected"]),VJ=(i,e)=>{const{ownerState:t}=i;return[e.root,t.dense&&e.dense,t.divider&&e.divider,!t.disableGutters&&e.gutters]},qJ=i=>{const{disabled:e,dense:t,divider:r,disableGutters:n,selected:s,classes:a}=i,l=lr({root:["root",t&&"dense",e&&"disabled",!n&&"gutters",r&&"divider",s&&"selected"]},HJ,a);return{...a,...l}},WJ=ft(wh,{shouldForwardProp:i=>Jn(i)||i==="classes",name:"MuiMenuItem",slot:"Root",overridesResolver:VJ})(Tr(({theme:i})=>({...i.typography.body1,display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",minHeight:48,paddingTop:6,paddingBottom:6,boxSizing:"border-box",whiteSpace:"nowrap","&:hover":{textDecoration:"none",backgroundColor:(i.vars||i).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${wm.selected}`]:{backgroundColor:i.vars?`rgba(${i.vars.palette.primary.mainChannel} / ${i.vars.palette.action.selectedOpacity})`:Gr(i.palette.primary.main,i.palette.action.selectedOpacity),[`&.${wm.focusVisible}`]:{backgroundColor:i.vars?`rgba(${i.vars.palette.primary.mainChannel} / calc(${i.vars.palette.action.selectedOpacity} + ${i.vars.palette.action.focusOpacity}))`:Gr(i.palette.primary.main,i.palette.action.selectedOpacity+i.palette.action.focusOpacity)}},[`&.${wm.selected}:hover`]:{backgroundColor:i.vars?`rgba(${i.vars.palette.primary.mainChannel} / calc(${i.vars.palette.action.selectedOpacity} + ${i.vars.palette.action.hoverOpacity}))`:Gr(i.palette.primary.main,i.palette.action.selectedOpacity+i.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:i.vars?`rgba(${i.vars.palette.primary.mainChannel} / ${i.vars.palette.action.selectedOpacity})`:Gr(i.palette.primary.main,i.palette.action.selectedOpacity)}},[`&.${wm.focusVisible}`]:{backgroundColor:(i.vars||i).palette.action.focus},[`&.${wm.disabled}`]:{opacity:(i.vars||i).palette.action.disabledOpacity},[`& + .${cR.root}`]:{marginTop:i.spacing(1),marginBottom:i.spacing(1)},[`& + .${cR.inset}`]:{marginLeft:52},[`& .${wf.root}`]:{marginTop:0,marginBottom:0},[`& .${wf.inset}`]:{paddingLeft:36},[`& .${dR.root}`]:{minWidth:36},variants:[{props:({ownerState:e})=>!e.disableGutters,style:{paddingLeft:16,paddingRight:16}},{props:({ownerState:e})=>e.divider,style:{borderBottom:`1px solid ${(i.vars||i).palette.divider}`,backgroundClip:"padding-box"}},{props:({ownerState:e})=>!e.dense,style:{[i.breakpoints.up("sm")]:{minHeight:"auto"}}},{props:({ownerState:e})=>e.dense,style:{minHeight:32,paddingTop:4,paddingBottom:4,...i.typography.body2,[`& .${dR.root} svg`]:{fontSize:"1.25rem"}}}]}))),pC=j.forwardRef(function(e,t){const r=ur({props:e,name:"MuiMenuItem"}),{autoFocus:n=!1,component:s="li",dense:a=!1,divider:o=!1,disableGutters:l=!1,focusVisibleClassName:u,role:c="menuitem",tabIndex:h,className:m,...g}=r,y=j.useContext(cl),_=j.useMemo(()=>({dense:a||y.dense||!1,disableGutters:l}),[y.dense,a,l]),T=j.useRef(null);ac(()=>{n&&T.current&&T.current.focus()},[n]);const E={...r,dense:_.dense,divider:o,disableGutters:l},w=qJ(r),D=mn(T,t);let R;return r.disabled||(R=h!==void 0?h:-1),V.jsx(cl.Provider,{value:_,children:V.jsx(WJ,{ref:D,role:c,tabIndex:R,component:s,focusVisibleClassName:Nt(w.focusVisible,u),className:Nt(w.root,m),...g,ownerState:E,classes:w})})});function GJ(){if(console&&console.warn){for(var i=arguments.length,e=new Array(i),t=0;t<i;t++)e[t]=arguments[t];dh(e[0])&&(e[0]=`react-i18next:: ${e[0]}`),console.warn(...e)}}const pR={};function mC(){for(var i=arguments.length,e=new Array(i),t=0;t<i;t++)e[t]=arguments[t];dh(e[0])&&pR[e[0]]||(dh(e[0])&&(pR[e[0]]=new Date),GJ(...e))}const YF=(i,e)=>()=>{if(i.isInitialized)e();else{const t=()=>{setTimeout(()=>{i.off("initialized",t)},0),e()};i.on("initialized",t)}},mR=(i,e,t)=>{i.loadNamespaces(e,YF(i,t))},gR=(i,e,t,r)=>{dh(t)&&(t=[t]),t.forEach(n=>{i.options.ns.indexOf(n)<0&&i.options.ns.push(n)}),i.loadLanguages(e,YF(i,r))},KJ=function(i,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const r=e.languages[0],n=e.options?e.options.fallbackLng:!1,s=e.languages[e.languages.length-1];if(r.toLowerCase()==="cimode")return!0;const a=(o,l)=>{const u=e.services.backendConnector.state[`${o}|${l}`];return u===-1||u===2};return t.bindI18n&&t.bindI18n.indexOf("languageChanging")>-1&&e.services.backendConnector.backend&&e.isLanguageChangingTo&&!a(e.isLanguageChangingTo,i)?!1:!!(e.hasResourceBundle(r,i)||!e.services.backendConnector.backend||e.options.resources&&!e.options.partialBundledLanguages||a(r,i)&&(!n||a(s,i)))},XJ=function(i,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return!e.languages||!e.languages.length?(mC("i18n.languages were undefined or empty",e.languages),!0):e.options.ignoreJSONStructure!==void 0?e.hasLoadedNamespace(i,{lng:t.lng,precheck:(n,s)=>{if(t.bindI18n&&t.bindI18n.indexOf("languageChanging")>-1&&n.services.backendConnector.backend&&n.isLanguageChangingTo&&!s(n.isLanguageChangingTo,i))return!1}}):KJ(i,e,t)},dh=i=>typeof i=="string",YJ=i=>typeof i=="object"&&i!==null,QJ=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34|nbsp|#160|copy|#169|reg|#174|hellip|#8230|#x2F|#47);/g,JJ={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"',"&nbsp;":" ","&#160;":" ","&copy;":"","&#169;":"","&reg;":"","&#174;":"","&hellip;":"","&#8230;":"","&#x2F;":"/","&#47;":"/"},ZJ=i=>JJ[i],eZ=i=>i.replace(QJ,ZJ);let gC={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transWrapTextNodes:"",transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0,unescape:eZ};const tZ=function(){let i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};gC={...gC,...i}},rZ=()=>gC;let QF;const iZ=i=>{QF=i},nZ=()=>QF,sZ={type:"3rdParty",init(i){tZ(i.options.react),iZ(i)}},aZ=j.createContext();class oZ{constructor(){this.usedNamespaces={}}addUsedNamespaces(e){e.forEach(t=>{this.usedNamespaces[t]||(this.usedNamespaces[t]=!0)})}getUsedNamespaces=()=>Object.keys(this.usedNamespaces)}const lZ=(i,e)=>{const t=j.useRef();return j.useEffect(()=>{t.current=i},[i,e]),t.current},JF=(i,e,t,r)=>i.getFixedT(e,t,r),uZ=(i,e,t,r)=>j.useCallback(JF(i,e,t,r),[i,e,t,r]),No=function(i){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{i18n:t}=e,{i18n:r,defaultNS:n}=j.useContext(aZ)||{},s=t||r||nZ();if(s&&!s.reportNamespaces&&(s.reportNamespaces=new oZ),!s){mC("You will need to pass in an i18next instance by using initReactI18next");const R=(L,F)=>dh(F)?F:YJ(F)&&dh(F.defaultValue)?F.defaultValue:Array.isArray(L)?L[L.length-1]:L,A=[R,{},!1];return A.t=R,A.i18n={},A.ready=!1,A}s.options.react&&s.options.react.wait!==void 0&&mC("It seems you are still using the old wait option, you may migrate to the new useSuspense behaviour.");const a={...rZ(),...s.options.react,...e},{useSuspense:o,keyPrefix:l}=a;let u=n||s.options&&s.options.defaultNS;u=dh(u)?[u]:u||["translation"],s.reportNamespaces.addUsedNamespaces&&s.reportNamespaces.addUsedNamespaces(u);const c=(s.isInitialized||s.initializedStoreOnce)&&u.every(R=>XJ(R,s,a)),h=uZ(s,e.lng||null,a.nsMode==="fallback"?u:u[0],l),m=()=>h,g=()=>JF(s,e.lng||null,a.nsMode==="fallback"?u:u[0],l),[y,_]=j.useState(m);let T=u.join();e.lng&&(T=`${e.lng}${T}`);const E=lZ(T),w=j.useRef(!0);j.useEffect(()=>{const{bindI18n:R,bindI18nStore:A}=a;w.current=!0,!c&&!o&&(e.lng?gR(s,e.lng,u,()=>{w.current&&_(g)}):mR(s,u,()=>{w.current&&_(g)})),c&&E&&E!==T&&w.current&&_(g);const L=()=>{w.current&&_(g)};return R&&s&&s.on(R,L),A&&s&&s.store.on(A,L),()=>{w.current=!1,R&&s&&R.split(" ").forEach(F=>s.off(F,L)),A&&s&&A.split(" ").forEach(F=>s.store.off(F,L))}},[s,T]),j.useEffect(()=>{w.current&&c&&_(m)},[s,l,c]);const D=[y,s,c];if(D.t=y,D.i18n=s,D.ready=c,c||!c&&!o)return D;throw new Promise(R=>{e.lng?gR(s,e.lng,u,()=>R()):mR(s,u,()=>R())})};sl.func.isRequired,sl.bool.isRequired,sl.number.isRequired;const cZ=Qr(V.jsx("path",{d:"M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm5 13.59L15.59 17 12 13.41 8.41 17 7 15.59 10.59 12 7 8.41 8.41 7 12 10.59 15.59 7 17 8.41 13.41 12 17 15.59z"}));function dZ(i){return or("MuiChip",i)}const qr=ar("MuiChip",["root","sizeSmall","sizeMedium","colorDefault","colorError","colorInfo","colorPrimary","colorSecondary","colorSuccess","colorWarning","disabled","clickable","clickableColorPrimary","clickableColorSecondary","deletable","deletableColorPrimary","deletableColorSecondary","outlined","filled","outlinedPrimary","outlinedSecondary","filledPrimary","filledSecondary","avatar","avatarSmall","avatarMedium","avatarColorPrimary","avatarColorSecondary","icon","iconSmall","iconMedium","iconColorPrimary","iconColorSecondary","label","labelSmall","labelMedium","deleteIcon","deleteIconSmall","deleteIconMedium","deleteIconColorPrimary","deleteIconColorSecondary","deleteIconOutlinedColorPrimary","deleteIconOutlinedColorSecondary","deleteIconFilledColorPrimary","deleteIconFilledColorSecondary","focusVisible"]),hZ=i=>{const{classes:e,disabled:t,size:r,color:n,iconColor:s,onDelete:a,clickable:o,variant:l}=i,u={root:["root",l,t&&"disabled",`size${ht(r)}`,`color${ht(n)}`,o&&"clickable",o&&`clickableColor${ht(n)}`,a&&"deletable",a&&`deletableColor${ht(n)}`,`${l}${ht(n)}`],label:["label",`label${ht(r)}`],avatar:["avatar",`avatar${ht(r)}`,`avatarColor${ht(n)}`],icon:["icon",`icon${ht(r)}`,`iconColor${ht(s)}`],deleteIcon:["deleteIcon",`deleteIcon${ht(r)}`,`deleteIconColor${ht(n)}`,`deleteIcon${ht(l)}Color${ht(n)}`]};return lr(u,dZ,e)},fZ=ft("div",{name:"MuiChip",slot:"Root",overridesResolver:(i,e)=>{const{ownerState:t}=i,{color:r,iconColor:n,clickable:s,onDelete:a,size:o,variant:l}=t;return[{[`& .${qr.avatar}`]:e.avatar},{[`& .${qr.avatar}`]:e[`avatar${ht(o)}`]},{[`& .${qr.avatar}`]:e[`avatarColor${ht(r)}`]},{[`& .${qr.icon}`]:e.icon},{[`& .${qr.icon}`]:e[`icon${ht(o)}`]},{[`& .${qr.icon}`]:e[`iconColor${ht(n)}`]},{[`& .${qr.deleteIcon}`]:e.deleteIcon},{[`& .${qr.deleteIcon}`]:e[`deleteIcon${ht(o)}`]},{[`& .${qr.deleteIcon}`]:e[`deleteIconColor${ht(r)}`]},{[`& .${qr.deleteIcon}`]:e[`deleteIcon${ht(l)}Color${ht(r)}`]},e.root,e[`size${ht(o)}`],e[`color${ht(r)}`],s&&e.clickable,s&&r!=="default"&&e[`clickableColor${ht(r)})`],a&&e.deletable,a&&r!=="default"&&e[`deletableColor${ht(r)}`],e[l],e[`${l}${ht(r)}`]]}})(Tr(({theme:i})=>{const e=i.palette.mode==="light"?i.palette.grey[700]:i.palette.grey[300];return{maxWidth:"100%",fontFamily:i.typography.fontFamily,fontSize:i.typography.pxToRem(13),display:"inline-flex",alignItems:"center",justifyContent:"center",height:32,color:(i.vars||i).palette.text.primary,backgroundColor:(i.vars||i).palette.action.selected,borderRadius:32/2,whiteSpace:"nowrap",transition:i.transitions.create(["background-color","box-shadow"]),cursor:"unset",outline:0,textDecoration:"none",border:0,padding:0,verticalAlign:"middle",boxSizing:"border-box",[`&.${qr.disabled}`]:{opacity:(i.vars||i).palette.action.disabledOpacity,pointerEvents:"none"},[`& .${qr.avatar}`]:{marginLeft:5,marginRight:-6,width:24,height:24,color:i.vars?i.vars.palette.Chip.defaultAvatarColor:e,fontSize:i.typography.pxToRem(12)},[`& .${qr.avatarColorPrimary}`]:{color:(i.vars||i).palette.primary.contrastText,backgroundColor:(i.vars||i).palette.primary.dark},[`& .${qr.avatarColorSecondary}`]:{color:(i.vars||i).palette.secondary.contrastText,backgroundColor:(i.vars||i).palette.secondary.dark},[`& .${qr.avatarSmall}`]:{marginLeft:4,marginRight:-4,width:18,height:18,fontSize:i.typography.pxToRem(10)},[`& .${qr.icon}`]:{marginLeft:5,marginRight:-6},[`& .${qr.deleteIcon}`]:{WebkitTapHighlightColor:"transparent",color:i.vars?`rgba(${i.vars.palette.text.primaryChannel} / 0.26)`:Gr(i.palette.text.primary,.26),fontSize:22,cursor:"pointer",margin:"0 5px 0 -6px","&:hover":{color:i.vars?`rgba(${i.vars.palette.text.primaryChannel} / 0.4)`:Gr(i.palette.text.primary,.4)}},variants:[{props:{size:"small"},style:{height:24,[`& .${qr.icon}`]:{fontSize:18,marginLeft:4,marginRight:-4},[`& .${qr.deleteIcon}`]:{fontSize:16,marginRight:4,marginLeft:-4}}},...Object.entries(i.palette).filter(ds(["contrastText"])).map(([t])=>({props:{color:t},style:{backgroundColor:(i.vars||i).palette[t].main,color:(i.vars||i).palette[t].contrastText,[`& .${qr.deleteIcon}`]:{color:i.vars?`rgba(${i.vars.palette[t].contrastTextChannel} / 0.7)`:Gr(i.palette[t].contrastText,.7),"&:hover, &:active":{color:(i.vars||i).palette[t].contrastText}}}})),{props:t=>t.iconColor===t.color,style:{[`& .${qr.icon}`]:{color:i.vars?i.vars.palette.Chip.defaultIconColor:e}}},{props:t=>t.iconColor===t.color&&t.color!=="default",style:{[`& .${qr.icon}`]:{color:"inherit"}}},{props:{onDelete:!0},style:{[`&.${qr.focusVisible}`]:{backgroundColor:i.vars?`rgba(${i.vars.palette.action.selectedChannel} / calc(${i.vars.palette.action.selectedOpacity} + ${i.vars.palette.action.focusOpacity}))`:Gr(i.palette.action.selected,i.palette.action.selectedOpacity+i.palette.action.focusOpacity)}}},...Object.entries(i.palette).filter(ds(["dark"])).map(([t])=>({props:{color:t,onDelete:!0},style:{[`&.${qr.focusVisible}`]:{background:(i.vars||i).palette[t].dark}}})),{props:{clickable:!0},style:{userSelect:"none",WebkitTapHighlightColor:"transparent",cursor:"pointer","&:hover":{backgroundColor:i.vars?`rgba(${i.vars.palette.action.selectedChannel} / calc(${i.vars.palette.action.selectedOpacity} + ${i.vars.palette.action.hoverOpacity}))`:Gr(i.palette.action.selected,i.palette.action.selectedOpacity+i.palette.action.hoverOpacity)},[`&.${qr.focusVisible}`]:{backgroundColor:i.vars?`rgba(${i.vars.palette.action.selectedChannel} / calc(${i.vars.palette.action.selectedOpacity} + ${i.vars.palette.action.focusOpacity}))`:Gr(i.palette.action.selected,i.palette.action.selectedOpacity+i.palette.action.focusOpacity)},"&:active":{boxShadow:(i.vars||i).shadows[1]}}},...Object.entries(i.palette).filter(ds(["dark"])).map(([t])=>({props:{color:t,clickable:!0},style:{[`&:hover, &.${qr.focusVisible}`]:{backgroundColor:(i.vars||i).palette[t].dark}}})),{props:{variant:"outlined"},style:{backgroundColor:"transparent",border:i.vars?`1px solid ${i.vars.palette.Chip.defaultBorder}`:`1px solid ${i.palette.mode==="light"?i.palette.grey[400]:i.palette.grey[700]}`,[`&.${qr.clickable}:hover`]:{backgroundColor:(i.vars||i).palette.action.hover},[`&.${qr.focusVisible}`]:{backgroundColor:(i.vars||i).palette.action.focus},[`& .${qr.avatar}`]:{marginLeft:4},[`& .${qr.avatarSmall}`]:{marginLeft:2},[`& .${qr.icon}`]:{marginLeft:4},[`& .${qr.iconSmall}`]:{marginLeft:2},[`& .${qr.deleteIcon}`]:{marginRight:5},[`& .${qr.deleteIconSmall}`]:{marginRight:3}}},...Object.entries(i.palette).filter(ds()).map(([t])=>({props:{variant:"outlined",color:t},style:{color:(i.vars||i).palette[t].main,border:`1px solid ${i.vars?`rgba(${i.vars.palette[t].mainChannel} / 0.7)`:Gr(i.palette[t].main,.7)}`,[`&.${qr.clickable}:hover`]:{backgroundColor:i.vars?`rgba(${i.vars.palette[t].mainChannel} / ${i.vars.palette.action.hoverOpacity})`:Gr(i.palette[t].main,i.palette.action.hoverOpacity)},[`&.${qr.focusVisible}`]:{backgroundColor:i.vars?`rgba(${i.vars.palette[t].mainChannel} / ${i.vars.palette.action.focusOpacity})`:Gr(i.palette[t].main,i.palette.action.focusOpacity)},[`& .${qr.deleteIcon}`]:{color:i.vars?`rgba(${i.vars.palette[t].mainChannel} / 0.7)`:Gr(i.palette[t].main,.7),"&:hover, &:active":{color:(i.vars||i).palette[t].main}}}}))]}})),pZ=ft("span",{name:"MuiChip",slot:"Label",overridesResolver:(i,e)=>{const{ownerState:t}=i,{size:r}=t;return[e.label,e[`label${ht(r)}`]]}})({overflow:"hidden",textOverflow:"ellipsis",paddingLeft:12,paddingRight:12,whiteSpace:"nowrap",variants:[{props:{variant:"outlined"},style:{paddingLeft:11,paddingRight:11}},{props:{size:"small"},style:{paddingLeft:8,paddingRight:8}},{props:{size:"small",variant:"outlined"},style:{paddingLeft:7,paddingRight:7}}]});function vR(i){return i.key==="Backspace"||i.key==="Delete"}const yR=j.forwardRef(function(e,t){const r=ur({props:e,name:"MuiChip"}),{avatar:n,className:s,clickable:a,color:o="default",component:l,deleteIcon:u,disabled:c=!1,icon:h,label:m,onClick:g,onDelete:y,onKeyDown:_,onKeyUp:T,size:E="medium",variant:w="filled",tabIndex:D,skipFocusWhenDisabled:R=!1,...A}=r,L=j.useRef(null),F=mn(L,t),B=oe=>{oe.stopPropagation(),y&&y(oe)},M=oe=>{oe.currentTarget===oe.target&&vR(oe)&&oe.preventDefault(),_&&_(oe)},k=oe=>{oe.currentTarget===oe.target&&y&&vR(oe)&&y(oe),T&&T(oe)},q=a!==!1&&g?!0:a,G=q||y?wh:l||"div",H={...r,component:G,disabled:c,size:E,color:o,iconColor:j.isValidElement(h)&&h.props.color||o,onDelete:!!y,clickable:q,variant:w},re=hZ(H),se=G===wh?{component:l||"div",focusVisibleClassName:re.focusVisible,...y&&{disableRipple:!0}}:{};let de=null;y&&(de=u&&j.isValidElement(u)?j.cloneElement(u,{className:Nt(u.props.className,re.deleteIcon),onClick:B}):V.jsx(cZ,{className:re.deleteIcon,onClick:B}));let me=null;n&&j.isValidElement(n)&&(me=j.cloneElement(n,{className:Nt(re.avatar,n.props.className)}));let ue=null;return h&&j.isValidElement(h)&&(ue=j.cloneElement(h,{className:Nt(re.icon,h.props.className)})),V.jsxs(fZ,{as:G,className:Nt(re.root,s),disabled:q&&c?!0:void 0,onClick:g,onKeyDown:M,onKeyUp:k,ref:F,tabIndex:R&&c?-1:D,ownerState:H,...se,...A,children:[me||ue,V.jsx(pZ,{className:re.label,ownerState:H,children:m}),de]})});function mZ(i){return or("PrivateSwitchBase",i)}ar("PrivateSwitchBase",["root","checked","disabled","input","edgeStart","edgeEnd"]);const gZ=i=>{const{classes:e,checked:t,disabled:r,edge:n}=i,s={root:["root",t&&"checked",r&&"disabled",n&&`edge${ht(n)}`],input:["input"]};return lr(s,mZ,e)},vZ=ft(wh)({padding:9,borderRadius:"50%",variants:[{props:{edge:"start",size:"small"},style:{marginLeft:-3}},{props:({edge:i,ownerState:e})=>i==="start"&&e.size!=="small",style:{marginLeft:-12}},{props:{edge:"end",size:"small"},style:{marginRight:-3}},{props:({edge:i,ownerState:e})=>i==="end"&&e.size!=="small",style:{marginRight:-12}}]}),yZ=ft("input",{shouldForwardProp:Jn})({cursor:"inherit",position:"absolute",opacity:0,width:"100%",height:"100%",top:0,left:0,margin:0,padding:0,zIndex:1}),ZF=j.forwardRef(function(e,t){const{autoFocus:r,checked:n,checkedIcon:s,defaultChecked:a,disabled:o,disableFocusRipple:l=!1,edge:u=!1,icon:c,id:h,inputProps:m,inputRef:g,name:y,onBlur:_,onChange:T,onFocus:E,readOnly:w,required:D=!1,tabIndex:R,type:A,value:L,slots:F={},slotProps:B={},...M}=e,[k,q]=l_({controlled:n,default:!!a,name:"SwitchBase",state:"checked"}),G=vl(),H=ke=>{E&&E(ke),G&&G.onFocus&&G.onFocus(ke)},re=ke=>{_&&_(ke),G&&G.onBlur&&G.onBlur(ke)},se=ke=>{if(ke.nativeEvent.defaultPrevented)return;const qe=ke.target.checked;q(qe),T&&T(ke,qe)};let de=o;G&&typeof de>"u"&&(de=G.disabled);const me=A==="checkbox"||A==="radio",ue={...e,checked:k,disabled:de,disableFocusRipple:l,edge:u},oe=gZ(ue),ce={slots:F,slotProps:{input:m,...B}},[te,fe]=Lr("root",{ref:t,elementType:vZ,className:oe.root,shouldForwardComponentProp:!0,externalForwardedProps:{...ce,component:"span",...M},getSlotProps:ke=>({...ke,onFocus:qe=>{ke.onFocus?.(qe),H(qe)},onBlur:qe=>{ke.onBlur?.(qe),re(qe)}}),ownerState:ue,additionalProps:{centerRipple:!0,focusRipple:!l,disabled:de,role:void 0,tabIndex:null}}),[ye,Se]=Lr("input",{ref:g,elementType:yZ,className:oe.input,externalForwardedProps:ce,getSlotProps:ke=>({...ke,onChange:qe=>{ke.onChange?.(qe),se(qe)}}),ownerState:ue,additionalProps:{autoFocus:r,checked:n,defaultChecked:a,disabled:de,id:me?h:void 0,name:y,readOnly:w,required:D,tabIndex:R,type:A,...A==="checkbox"&&L===void 0?{}:{value:L}}});return V.jsxs(te,{...fe,children:[V.jsx(ye,{...Se}),k?s:c]})}),_Z=Qr(V.jsx("path",{d:"M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"})),xZ=Qr(V.jsx("path",{d:"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm-9 14l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"})),TZ=Qr(V.jsx("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-2 10H7v-2h10v2z"}));function bZ(i){return or("MuiCheckbox",i)}const vS=ar("MuiCheckbox",["root","checked","disabled","indeterminate","colorPrimary","colorSecondary","sizeSmall","sizeMedium"]),SZ=i=>{const{classes:e,indeterminate:t,color:r,size:n}=i,s={root:["root",t&&"indeterminate",`color${ht(r)}`,`size${ht(n)}`]},a=lr(s,bZ,e);return{...e,...a}},CZ=ft(ZF,{shouldForwardProp:i=>Jn(i)||i==="classes",name:"MuiCheckbox",slot:"Root",overridesResolver:(i,e)=>{const{ownerState:t}=i;return[e.root,t.indeterminate&&e.indeterminate,e[`size${ht(t.size)}`],t.color!=="default"&&e[`color${ht(t.color)}`]]}})(Tr(({theme:i})=>({color:(i.vars||i).palette.text.secondary,variants:[{props:{color:"default",disableRipple:!1},style:{"&:hover":{backgroundColor:i.vars?`rgba(${i.vars.palette.action.activeChannel} / ${i.vars.palette.action.hoverOpacity})`:Gr(i.palette.action.active,i.palette.action.hoverOpacity)}}},...Object.entries(i.palette).filter(ds()).map(([e])=>({props:{color:e,disableRipple:!1},style:{"&:hover":{backgroundColor:i.vars?`rgba(${i.vars.palette[e].mainChannel} / ${i.vars.palette.action.hoverOpacity})`:Gr(i.palette[e].main,i.palette.action.hoverOpacity)}}})),...Object.entries(i.palette).filter(ds()).map(([e])=>({props:{color:e},style:{[`&.${vS.checked}, &.${vS.indeterminate}`]:{color:(i.vars||i).palette[e].main},[`&.${vS.disabled}`]:{color:(i.vars||i).palette.action.disabled}}})),{props:{disableRipple:!1},style:{"&:hover":{"@media (hover: none)":{backgroundColor:"transparent"}}}}]}))),EZ=V.jsx(xZ,{}),wZ=V.jsx(_Z,{}),kZ=V.jsx(TZ,{}),_R=j.forwardRef(function(e,t){const r=ur({props:e,name:"MuiCheckbox"}),{checkedIcon:n=EZ,color:s="primary",icon:a=wZ,indeterminate:o=!1,indeterminateIcon:l=kZ,inputProps:u,size:c="medium",disableRipple:h=!1,className:m,slots:g={},slotProps:y={},..._}=r,T=o?l:a,E=o?l:n,w={...r,disableRipple:h,color:s,indeterminate:o,size:c},D=SZ(w),R=y.input??u,[A,L]=Lr("root",{ref:t,elementType:CZ,className:Nt(D.root,m),shouldForwardComponentProp:!0,externalForwardedProps:{slots:g,slotProps:y,..._},ownerState:w,additionalProps:{type:"checkbox",icon:j.cloneElement(T,{fontSize:T.props.fontSize??c}),checkedIcon:j.cloneElement(E,{fontSize:E.props.fontSize??c}),disableRipple:h,slots:g,slotProps:{input:_w(typeof R=="function"?R(w):R,{"data-indeterminate":o})}}});return V.jsx(A,{...L,classes:D})}),p_=Qr(V.jsx("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6zM19 4h-3.5l-1-1h-5l-1 1H5v2h14z"}));function AZ(i){return or("MuiFormControlLabel",i)}const Vm=ar("MuiFormControlLabel",["root","labelPlacementStart","labelPlacementTop","labelPlacementBottom","disabled","label","error","required","asterisk"]),IZ=i=>{const{classes:e,disabled:t,labelPlacement:r,error:n,required:s}=i,a={root:["root",t&&"disabled",`labelPlacement${ht(r)}`,n&&"error",s&&"required"],label:["label",t&&"disabled"],asterisk:["asterisk",n&&"error"]};return lr(a,AZ,e)},DZ=ft("label",{name:"MuiFormControlLabel",slot:"Root",overridesResolver:(i,e)=>{const{ownerState:t}=i;return[{[`& .${Vm.label}`]:e.label},e.root,e[`labelPlacement${ht(t.labelPlacement)}`]]}})(Tr(({theme:i})=>({display:"inline-flex",alignItems:"center",cursor:"pointer",verticalAlign:"middle",WebkitTapHighlightColor:"transparent",marginLeft:-11,marginRight:16,[`&.${Vm.disabled}`]:{cursor:"default"},[`& .${Vm.label}`]:{[`&.${Vm.disabled}`]:{color:(i.vars||i).palette.text.disabled}},variants:[{props:{labelPlacement:"start"},style:{flexDirection:"row-reverse",marginRight:-11}},{props:{labelPlacement:"top"},style:{flexDirection:"column-reverse"}},{props:{labelPlacement:"bottom"},style:{flexDirection:"column"}},{props:({labelPlacement:e})=>e==="start"||e==="top"||e==="bottom",style:{marginLeft:16}}]}))),PZ=ft("span",{name:"MuiFormControlLabel",slot:"Asterisk"})(Tr(({theme:i})=>({[`&.${Vm.error}`]:{color:(i.vars||i).palette.error.main}}))),il=j.forwardRef(function(e,t){const r=ur({props:e,name:"MuiFormControlLabel"}),{checked:n,className:s,componentsProps:a={},control:o,disabled:l,disableTypography:u,inputRef:c,label:h,labelPlacement:m="end",name:g,onChange:y,required:_,slots:T={},slotProps:E={},value:w,...D}=r,R=vl(),A=l??o.props.disabled??R?.disabled,L=_??o.props.required,F={disabled:A,required:L};["checked","name","onChange","value","inputRef"].forEach(se=>{typeof o.props[se]>"u"&&typeof r[se]<"u"&&(F[se]=r[se])});const B=yd({props:r,muiFormControl:R,states:["error"]}),M={...r,disabled:A,labelPlacement:m,required:L,error:B.error},k=IZ(M),q={slots:T,slotProps:{...a,...E}},[G,H]=Lr("typography",{elementType:Tn,externalForwardedProps:q,ownerState:M});let re=h;return re!=null&&re.type!==Tn&&!u&&(re=V.jsx(G,{component:"span",...H,className:Nt(k.label,H?.className),children:re})),V.jsxs(DZ,{className:Nt(k.root,s),ownerState:M,ref:t,...D,children:[j.cloneElement(o,F),L?V.jsxs("div",{children:[re,V.jsxs(PZ,{ownerState:M,"aria-hidden":!0,className:k.asterisk,children:["","*"]})]}):re]})});ft("li")(({theme:i})=>({margin:i.spacing(.5),listStyle:"none",display:"initial"}));const e8=j.createContext(),Wx=j.createContext();function RZ(i){return or("MuiTableCell",i)}const LZ=ar("MuiTableCell",["root","head","body","footer","sizeSmall","sizeMedium","paddingCheckbox","paddingNone","alignLeft","alignCenter","alignRight","alignJustify","stickyHeader"]),OZ=i=>{const{classes:e,variant:t,align:r,padding:n,size:s,stickyHeader:a}=i,o={root:["root",t,a&&"stickyHeader",r!=="inherit"&&`align${ht(r)}`,n!=="normal"&&`padding${ht(n)}`,`size${ht(s)}`]};return lr(o,RZ,e)},MZ=ft("td",{name:"MuiTableCell",slot:"Root",overridesResolver:(i,e)=>{const{ownerState:t}=i;return[e.root,e[t.variant],e[`size${ht(t.size)}`],t.padding!=="normal"&&e[`padding${ht(t.padding)}`],t.align!=="inherit"&&e[`align${ht(t.align)}`],t.stickyHeader&&e.stickyHeader]}})(Tr(({theme:i})=>({...i.typography.body2,display:"table-cell",verticalAlign:"inherit",borderBottom:i.vars?`1px solid ${i.vars.palette.TableCell.border}`:`1px solid
    ${i.palette.mode==="light"?Bx(Gr(i.palette.divider,1),.88):Fx(Gr(i.palette.divider,1),.68)}`,textAlign:"left",padding:16,variants:[{props:{variant:"head"},style:{color:(i.vars||i).palette.text.primary,lineHeight:i.typography.pxToRem(24),fontWeight:i.typography.fontWeightMedium}},{props:{variant:"body"},style:{color:(i.vars||i).palette.text.primary}},{props:{variant:"footer"},style:{color:(i.vars||i).palette.text.secondary,lineHeight:i.typography.pxToRem(21),fontSize:i.typography.pxToRem(12)}},{props:{size:"small"},style:{padding:"6px 16px",[`&.${LZ.paddingCheckbox}`]:{width:24,padding:"0 12px 0 16px","& > *":{padding:0}}}},{props:{padding:"checkbox"},style:{width:48,padding:"0 0 0 4px"}},{props:{padding:"none"},style:{padding:0}},{props:{align:"left"},style:{textAlign:"left"}},{props:{align:"center"},style:{textAlign:"center"}},{props:{align:"right"},style:{textAlign:"right",flexDirection:"row-reverse"}},{props:{align:"justify"},style:{textAlign:"justify"}},{props:({ownerState:e})=>e.stickyHeader,style:{position:"sticky",top:0,zIndex:2,backgroundColor:(i.vars||i).palette.background.default}}]}))),dd=j.forwardRef(function(e,t){const r=ur({props:e,name:"MuiTableCell"}),{align:n="inherit",className:s,component:a,padding:o,scope:l,size:u,sortDirection:c,variant:h,...m}=r,g=j.useContext(e8),y=j.useContext(Wx),_=y&&y.variant==="head";let T;a?T=a:T=_?"th":"td";let E=l;T==="td"?E=void 0:!E&&_&&(E="col");const w=h||y&&y.variant,D={...r,align:n,component:T,padding:o||(g&&g.padding?g.padding:"normal"),size:u||(g&&g.size?g.size:"medium"),sortDirection:c,stickyHeader:w==="head"&&g&&g.stickyHeader,variant:w},R=OZ(D);let A=null;return c&&(A=c==="asc"?"ascending":"descending"),V.jsx(MZ,{as:T,ref:t,className:Nt(R.root,s),"aria-sort":A,scope:E,ownerState:D,...m})}),FZ=Qr(V.jsx("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"}));function BZ(i){return or("MuiAvatar",i)}ar("MuiAvatar",["root","colorDefault","circular","rounded","square","img","fallback"]);const NZ=i=>{const{classes:e,variant:t,colorDefault:r}=i;return lr({root:["root",t,r&&"colorDefault"],img:["img"],fallback:["fallback"]},BZ,e)},UZ=ft("div",{name:"MuiAvatar",slot:"Root",overridesResolver:(i,e)=>{const{ownerState:t}=i;return[e.root,e[t.variant],t.colorDefault&&e.colorDefault]}})(Tr(({theme:i})=>({position:"relative",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,width:40,height:40,fontFamily:i.typography.fontFamily,fontSize:i.typography.pxToRem(20),lineHeight:1,borderRadius:"50%",overflow:"hidden",userSelect:"none",variants:[{props:{variant:"rounded"},style:{borderRadius:(i.vars||i).shape.borderRadius}},{props:{variant:"square"},style:{borderRadius:0}},{props:{colorDefault:!0},style:{color:(i.vars||i).palette.background.default,...i.vars?{backgroundColor:i.vars.palette.Avatar.defaultBg}:{backgroundColor:i.palette.grey[400],...i.applyStyles("dark",{backgroundColor:i.palette.grey[600]})}}}]}))),$Z=ft("img",{name:"MuiAvatar",slot:"Img"})({width:"100%",height:"100%",textAlign:"center",objectFit:"cover",color:"transparent",textIndent:1e4}),jZ=ft(FZ,{name:"MuiAvatar",slot:"Fallback"})({width:"75%",height:"75%"});function zZ({crossOrigin:i,referrerPolicy:e,src:t,srcSet:r}){const[n,s]=j.useState(!1);return j.useEffect(()=>{if(!t&&!r)return;s(!1);let a=!0;const o=new Image;return o.onload=()=>{a&&s("loaded")},o.onerror=()=>{a&&s("error")},o.crossOrigin=i,o.referrerPolicy=e,o.src=t,r&&(o.srcset=r),()=>{a=!1}},[i,e,t,r]),n}const yS=j.forwardRef(function(e,t){const r=ur({props:e,name:"MuiAvatar"}),{alt:n,children:s,className:a,component:o="div",slots:l={},slotProps:u={},imgProps:c,sizes:h,src:m,srcSet:g,variant:y="circular",..._}=r;let T=null;const E={...r,component:o,variant:y},w=zZ({...c,...typeof u.img=="function"?u.img(E):u.img,src:m,srcSet:g}),D=m||g,R=D&&w!=="error";E.colorDefault=!R,delete E.ownerState;const A=NZ(E),[L,F]=Lr("root",{ref:t,className:Nt(A.root,a),elementType:UZ,externalForwardedProps:{slots:l,slotProps:u,component:o,..._},ownerState:E}),[B,M]=Lr("img",{className:A.img,elementType:$Z,externalForwardedProps:{slots:l,slotProps:{img:{...c,...u.img}}},additionalProps:{alt:n,src:m,srcSet:g,sizes:h},ownerState:E}),[k,q]=Lr("fallback",{className:A.fallback,elementType:jZ,externalForwardedProps:{slots:l,slotProps:u},shouldForwardComponentProp:!0,ownerState:E});return R?T=V.jsx(B,{...M}):s||s===0?T=s:D&&n?T=n[0]:T=V.jsx(k,{...q}),V.jsx(L,{...F,children:T})}),HZ=Qr(V.jsx("path",{fillRule:"evenodd",d:"M4 11h16v2H4z"}));function On(i,e){if(!(i instanceof e))throw new TypeError("Cannot call a class as a function")}function sp(i){"@babel/helpers - typeof";return sp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},sp(i)}function VZ(i,e){if(sp(i)!="object"||!i)return i;var t=i[Symbol.toPrimitive];if(t!==void 0){var r=t.call(i,e);if(sp(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(i)}function t8(i){var e=VZ(i,"string");return sp(e)=="symbol"?e:e+""}function xR(i,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(i,t8(r.key),r)}}function Zn(i,e,t){return e&&xR(i.prototype,e),t&&xR(i,t),Object.defineProperty(i,"prototype",{writable:!1}),i}function oo(i,e){if(e&&(sp(e)=="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return je(i)}function Ms(i){return Ms=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Ms(i)}function La(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");i.prototype=Object.create(e&&e.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),Object.defineProperty(i,"prototype",{writable:!1}),e&&ip(i,e)}function We(i,e,t){return(e=t8(e))in i?Object.defineProperty(i,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):i[e]=t,i}function r8(){var i=this.constructor.getDerivedStateFromProps(this.props,this.state);i!=null&&this.setState(i)}function i8(i){function e(t){var r=this.constructor.getDerivedStateFromProps(i,t);return r??null}this.setState(e.bind(this))}function n8(i,e){try{var t=this.props,r=this.state;this.props=i,this.state=e,this.__reactInternalSnapshotFlag=!0,this.__reactInternalSnapshot=this.getSnapshotBeforeUpdate(t,r)}finally{this.props=t,this.state=r}}r8.__suppressDeprecationWarning=!0;i8.__suppressDeprecationWarning=!0;n8.__suppressDeprecationWarning=!0;function J0(i){var e=i.prototype;if(!e||!e.isReactComponent)throw new Error("Can only polyfill class components");if(typeof i.getDerivedStateFromProps!="function"&&typeof e.getSnapshotBeforeUpdate!="function")return i;var t=null,r=null,n=null;if(typeof e.componentWillMount=="function"?t="componentWillMount":typeof e.UNSAFE_componentWillMount=="function"&&(t="UNSAFE_componentWillMount"),typeof e.componentWillReceiveProps=="function"?r="componentWillReceiveProps":typeof e.UNSAFE_componentWillReceiveProps=="function"&&(r="UNSAFE_componentWillReceiveProps"),typeof e.componentWillUpdate=="function"?n="componentWillUpdate":typeof e.UNSAFE_componentWillUpdate=="function"&&(n="UNSAFE_componentWillUpdate"),t!==null||r!==null||n!==null){var s=i.displayName||i.name,a=typeof i.getDerivedStateFromProps=="function"?"getDerivedStateFromProps()":"getSnapshotBeforeUpdate()";throw Error(`Unsafe legacy lifecycles will not be called for components using new component APIs.

`+s+" uses "+a+" but also contains the following legacy lifecycles:"+(t!==null?`
  `+t:"")+(r!==null?`
  `+r:"")+(n!==null?`
  `+n:"")+`

The above lifecycles should be removed. Learn more about this warning here:
https://fb.me/react-async-component-lifecycle-hooks`)}if(typeof i.getDerivedStateFromProps=="function"&&(e.componentWillMount=r8,e.componentWillReceiveProps=i8),typeof e.getSnapshotBeforeUpdate=="function"){if(typeof e.componentDidUpdate!="function")throw new Error("Cannot polyfill getSnapshotBeforeUpdate() for components that do not define componentDidUpdate() on the prototype");e.componentWillUpdate=n8;var o=e.componentDidUpdate;e.componentDidUpdate=function(u,c,h){var m=this.__reactInternalSnapshotFlag?this.__reactInternalSnapshot:h;o.call(this,u,c,m)}}return i}function s8(i){var e,t,r="";if(typeof i=="string"||typeof i=="number")r+=i;else if(typeof i=="object")if(Array.isArray(i))for(e=0;e<i.length;e++)i[e]&&(t=s8(i[e]))&&(r&&(r+=" "),r+=t);else for(e in i)i[e]&&(r&&(r+=" "),r+=e);return r}function al(){for(var i,e,t=0,r="";t<arguments.length;)(i=arguments[t++])&&(e=s8(i))&&(r&&(r+=" "),r+=e);return r}function TR(i){var e=i.cellCount,t=i.cellSize,r=i.computeMetadataCallback,n=i.computeMetadataCallbackProps,s=i.nextCellsCount,a=i.nextCellSize,o=i.nextScrollToIndex,l=i.scrollToIndex,u=i.updateScrollOffsetForScrollToIndex;(e!==s||(typeof t=="number"||typeof a=="number")&&t!==a)&&(r(n),l>=0&&l===o&&u())}function qm(i,e){if(i==null)return{};var t,r,n=qx(i,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(i);for(r=0;r<s.length;r++)t=s[r],e.indexOf(t)===-1&&{}.propertyIsEnumerable.call(i,t)&&(n[t]=i[t])}return n}var qZ=(function(){function i(e){var t=e.cellCount,r=e.cellSizeGetter,n=e.estimatedCellSize;On(this,i),We(this,"_cellSizeAndPositionData",{}),We(this,"_lastMeasuredIndex",-1),We(this,"_lastBatchedIndex",-1),We(this,"_cellCount",void 0),We(this,"_cellSizeGetter",void 0),We(this,"_estimatedCellSize",void 0),this._cellSizeGetter=r,this._cellCount=t,this._estimatedCellSize=n}return Zn(i,[{key:"areOffsetsAdjusted",value:function(){return!1}},{key:"configure",value:function(t){var r=t.cellCount,n=t.estimatedCellSize,s=t.cellSizeGetter;this._cellCount=r,this._estimatedCellSize=n,this._cellSizeGetter=s}},{key:"getCellCount",value:function(){return this._cellCount}},{key:"getEstimatedCellSize",value:function(){return this._estimatedCellSize}},{key:"getLastMeasuredIndex",value:function(){return this._lastMeasuredIndex}},{key:"getOffsetAdjustment",value:function(){return 0}},{key:"getSizeAndPositionOfCell",value:function(t){if(t<0||t>=this._cellCount)throw Error("Requested index ".concat(t," is outside of range 0..").concat(this._cellCount));if(t>this._lastMeasuredIndex)for(var r=this.getSizeAndPositionOfLastMeasuredCell(),n=r.offset+r.size,s=this._lastMeasuredIndex+1;s<=t;s++){var a=this._cellSizeGetter({index:s});if(a===void 0||isNaN(a))throw Error("Invalid size returned for cell ".concat(s," of value ").concat(a));a===null?(this._cellSizeAndPositionData[s]={offset:n,size:0},this._lastBatchedIndex=t):(this._cellSizeAndPositionData[s]={offset:n,size:a},n+=a,this._lastMeasuredIndex=t)}return this._cellSizeAndPositionData[t]}},{key:"getSizeAndPositionOfLastMeasuredCell",value:function(){return this._lastMeasuredIndex>=0?this._cellSizeAndPositionData[this._lastMeasuredIndex]:{offset:0,size:0}}},{key:"getTotalSize",value:function(){var t=this.getSizeAndPositionOfLastMeasuredCell(),r=t.offset+t.size,n=this._cellCount-this._lastMeasuredIndex-1,s=n*this._estimatedCellSize;return r+s}},{key:"getUpdatedOffsetForIndex",value:function(t){var r=t.align,n=r===void 0?"auto":r,s=t.containerSize,a=t.currentOffset,o=t.targetIndex;if(s<=0)return 0;var l=this.getSizeAndPositionOfCell(o),u=l.offset,c=u-s+l.size,h;switch(n){case"start":h=u;break;case"end":h=c;break;case"center":h=u-(s-l.size)/2;break;default:h=Math.max(c,Math.min(u,a));break}var m=this.getTotalSize();return Math.max(0,Math.min(m-s,h))}},{key:"getVisibleCellRange",value:function(t){var r=t.containerSize,n=t.offset,s=this.getTotalSize();if(s===0)return{};var a=n+r,o=this._findNearestCell(n),l=this.getSizeAndPositionOfCell(o);n=l.offset+l.size;for(var u=o;n<a&&u<this._cellCount-1;)u++,n+=this.getSizeAndPositionOfCell(u).size;return{start:o,stop:u}}},{key:"resetCell",value:function(t){this._lastMeasuredIndex=Math.min(this._lastMeasuredIndex,t-1)}},{key:"_binarySearch",value:function(t,r,n){for(;r<=t;){var s=r+Math.floor((t-r)/2),a=this.getSizeAndPositionOfCell(s).offset;if(a===n)return s;a<n?r=s+1:a>n&&(t=s-1)}return r>0?r-1:0}},{key:"_exponentialSearch",value:function(t,r){for(var n=1;t<this._cellCount&&this.getSizeAndPositionOfCell(t).offset<r;)t+=n,n*=2;return this._binarySearch(Math.min(t,this._cellCount-1),Math.floor(t/2),r)}},{key:"_findNearestCell",value:function(t){if(isNaN(t))throw Error("Invalid offset ".concat(t," specified"));t=Math.max(0,t);var r=this.getSizeAndPositionOfLastMeasuredCell(),n=Math.max(0,this._lastMeasuredIndex);return r.offset>=t?this._binarySearch(n,0,t):this._exponentialSearch(n,t)}}]),i})(),WZ=15e5,GZ=16777100,KZ=function(){return typeof window<"u"},XZ=function(){return!!window.chrome},YZ=function(){return KZ()&&XZ()?GZ:WZ},bR=(function(){function i(e){var t=e.maxScrollSize,r=t===void 0?YZ():t,n=qm(e,["maxScrollSize"]);On(this,i),We(this,"_cellSizeAndPositionManager",void 0),We(this,"_maxScrollSize",void 0),this._cellSizeAndPositionManager=new qZ(n),this._maxScrollSize=r}return Zn(i,[{key:"areOffsetsAdjusted",value:function(){return this._cellSizeAndPositionManager.getTotalSize()>this._maxScrollSize}},{key:"configure",value:function(t){this._cellSizeAndPositionManager.configure(t)}},{key:"getCellCount",value:function(){return this._cellSizeAndPositionManager.getCellCount()}},{key:"getEstimatedCellSize",value:function(){return this._cellSizeAndPositionManager.getEstimatedCellSize()}},{key:"getLastMeasuredIndex",value:function(){return this._cellSizeAndPositionManager.getLastMeasuredIndex()}},{key:"getOffsetAdjustment",value:function(t){var r=t.containerSize,n=t.offset,s=this._cellSizeAndPositionManager.getTotalSize(),a=this.getTotalSize(),o=this._getOffsetPercentage({containerSize:r,offset:n,totalSize:a});return Math.round(o*(a-s))}},{key:"getSizeAndPositionOfCell",value:function(t){return this._cellSizeAndPositionManager.getSizeAndPositionOfCell(t)}},{key:"getSizeAndPositionOfLastMeasuredCell",value:function(){return this._cellSizeAndPositionManager.getSizeAndPositionOfLastMeasuredCell()}},{key:"getTotalSize",value:function(){return Math.min(this._maxScrollSize,this._cellSizeAndPositionManager.getTotalSize())}},{key:"getUpdatedOffsetForIndex",value:function(t){var r=t.align,n=r===void 0?"auto":r,s=t.containerSize,a=t.currentOffset,o=t.targetIndex;a=this._safeOffsetToOffset({containerSize:s,offset:a});var l=this._cellSizeAndPositionManager.getUpdatedOffsetForIndex({align:n,containerSize:s,currentOffset:a,targetIndex:o});return this._offsetToSafeOffset({containerSize:s,offset:l})}},{key:"getVisibleCellRange",value:function(t){var r=t.containerSize,n=t.offset;return n=this._safeOffsetToOffset({containerSize:r,offset:n}),this._cellSizeAndPositionManager.getVisibleCellRange({containerSize:r,offset:n})}},{key:"resetCell",value:function(t){this._cellSizeAndPositionManager.resetCell(t)}},{key:"_getOffsetPercentage",value:function(t){var r=t.containerSize,n=t.offset,s=t.totalSize;return s<=r?0:n/(s-r)}},{key:"_offsetToSafeOffset",value:function(t){var r=t.containerSize,n=t.offset,s=this._cellSizeAndPositionManager.getTotalSize(),a=this.getTotalSize();if(s===a)return n;var o=this._getOffsetPercentage({containerSize:r,offset:n,totalSize:s});return Math.round(o*(a-r))}},{key:"_safeOffsetToOffset",value:function(t){var r=t.containerSize,n=t.offset,s=this._cellSizeAndPositionManager.getTotalSize(),a=this.getTotalSize();if(s===a)return n;var o=this._getOffsetPercentage({containerSize:r,offset:n,totalSize:a});return Math.round(o*(s-r))}}]),i})();function ap(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,e={};return function(t){var r=t.callback,n=t.indices,s=Object.keys(n),a=!i||s.every(function(l){var u=n[l];return Array.isArray(u)?u.length>0:u>=0}),o=s.length!==Object.keys(e).length||s.some(function(l){var u=e[l],c=n[l];return Array.isArray(c)?u.join(",")!==c.join(","):u!==c});e=n,a&&o&&r(n)}}var hv=-1,Xu=1;function QZ(i){var e=i.cellCount,t=i.overscanCellsCount,r=i.scrollDirection,n=i.startIndex,s=i.stopIndex;return r===Xu?{overscanStartIndex:Math.max(0,n),overscanStopIndex:Math.min(e-1,s+t)}:{overscanStartIndex:Math.max(0,n-t),overscanStopIndex:Math.min(e-1,s)}}function SR(i){var e=i.cellSize,t=i.cellSizeAndPositionManager,r=i.previousCellsCount,n=i.previousCellSize,s=i.previousScrollToAlignment,a=i.previousScrollToIndex,o=i.previousSize,l=i.scrollOffset,u=i.scrollToAlignment,c=i.scrollToIndex,h=i.size,m=i.sizeJustIncreasedFromZero,g=i.updateScrollIndexCallback,y=t.getCellCount(),_=c>=0&&c<y,T=h!==o||m||!n||typeof e=="number"&&e!==n;_&&(T||u!==s||c!==a)?g(c):!_&&y>0&&(h<o||y<r)&&l>t.getTotalSize()-h&&g(y-1)}function JZ(i){for(var e=i.cellCache,t=i.cellRenderer,r=i.columnSizeAndPositionManager,n=i.columnStartIndex,s=i.columnStopIndex,a=i.deferredMeasurementCache,o=i.horizontalOffsetAdjustment,l=i.isScrolling,u=i.isScrollingOptOut,c=i.parent,h=i.rowSizeAndPositionManager,m=i.rowStartIndex,g=i.rowStopIndex,y=i.styleCache,_=i.verticalOffsetAdjustment,T=i.visibleColumnIndices,E=i.visibleRowIndices,w=[],D=r.areOffsetsAdjusted()||h.areOffsetsAdjusted(),R=!l&&!D,A=m;A<=g;A++)for(var L=h.getSizeAndPositionOfCell(A),F=n;F<=s;F++){var B=r.getSizeAndPositionOfCell(F),M=F>=T.start&&F<=T.stop&&A>=E.start&&A<=E.stop,k="".concat(A,"-").concat(F),q=void 0;R&&y[k]?q=y[k]:a&&!a.has(A,F)?q={height:"auto",left:0,position:"absolute",top:0,width:"auto"}:(q={height:L.size,left:B.offset+o,position:"absolute",top:L.offset+_,width:B.size},y[k]=q);var G={columnIndex:F,isScrolling:l,isVisible:M,key:k,parent:c,rowIndex:A,style:q},H=void 0;(u||l)&&!o&&!_?(e[k]||(e[k]=t(G)),H=e[k]):H=t(G),!(H==null||H===!1)&&w.push(H)}return w}const ZZ=!!(typeof window<"u"&&window.document&&window.document.createElement);var fv;function vC(i){if((!fv&&fv!==0||i)&&ZZ){var e=document.createElement("div");e.style.position="absolute",e.style.top="-9999px",e.style.width="50px",e.style.height="50px",e.style.overflow="scroll",document.body.appendChild(e),fv=e.offsetWidth-e.clientWidth,document.body.removeChild(e)}return fv}var Gs;typeof window<"u"?Gs=window:typeof self<"u"?Gs=self:Gs={};var eee=Gs.requestAnimationFrame||Gs.webkitRequestAnimationFrame||Gs.mozRequestAnimationFrame||Gs.oRequestAnimationFrame||Gs.msRequestAnimationFrame||function(i){return Gs.setTimeout(i,1e3/60)},tee=Gs.cancelAnimationFrame||Gs.webkitCancelAnimationFrame||Gs.mozCancelAnimationFrame||Gs.oCancelAnimationFrame||Gs.msCancelAnimationFrame||function(i){Gs.clearTimeout(i)},CR=eee,ree=tee,op=function(e){return ree(e.id)},Dw=function(e,t){var r;Promise.resolve().then(function(){r=Date.now()});var n=function a(){Date.now()-r>=t?e.call():s.id=CR(a)},s={id:CR(n)};return s},ER,wR;function kR(i,e){var t=Object.keys(i);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(i);e&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(i,n).enumerable})),t.push.apply(t,r)}return t}function Vd(i){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?kR(t,!0).forEach(function(r){We(i,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(t)):kR(t).forEach(function(r){Object.defineProperty(i,r,Object.getOwnPropertyDescriptor(t,r))})}return i}var iee=150,_S={OBSERVED:"observed",REQUESTED:"requested"},nee=function(){return null},id=(wR=ER=(function(i){La(e,i);function e(t){var r;On(this,e),r=oo(this,Ms(e).call(this,t)),We(je(r),"_onGridRenderedMemoizer",ap()),We(je(r),"_onScrollMemoizer",ap(!1)),We(je(r),"_deferredInvalidateColumnIndex",null),We(je(r),"_deferredInvalidateRowIndex",null),We(je(r),"_recomputeScrollLeftFlag",!1),We(je(r),"_recomputeScrollTopFlag",!1),We(je(r),"_horizontalScrollBarSize",0),We(je(r),"_verticalScrollBarSize",0),We(je(r),"_scrollbarPresenceChanged",!1),We(je(r),"_scrollingContainer",void 0),We(je(r),"_childrenToDisplay",void 0),We(je(r),"_columnStartIndex",void 0),We(je(r),"_columnStopIndex",void 0),We(je(r),"_rowStartIndex",void 0),We(je(r),"_rowStopIndex",void 0),We(je(r),"_renderedColumnStartIndex",0),We(je(r),"_renderedColumnStopIndex",0),We(je(r),"_renderedRowStartIndex",0),We(je(r),"_renderedRowStopIndex",0),We(je(r),"_initialScrollTop",void 0),We(je(r),"_initialScrollLeft",void 0),We(je(r),"_disablePointerEventsTimeoutId",void 0),We(je(r),"_styleCache",{}),We(je(r),"_cellCache",{}),We(je(r),"_debounceScrollEndedCallback",function(){r._disablePointerEventsTimeoutId=null,r.setState({isScrolling:!1,needToResetStyleCache:!1})}),We(je(r),"_invokeOnGridRenderedHelper",function(){var a=r.props.onSectionRendered;r._onGridRenderedMemoizer({callback:a,indices:{columnOverscanStartIndex:r._columnStartIndex,columnOverscanStopIndex:r._columnStopIndex,columnStartIndex:r._renderedColumnStartIndex,columnStopIndex:r._renderedColumnStopIndex,rowOverscanStartIndex:r._rowStartIndex,rowOverscanStopIndex:r._rowStopIndex,rowStartIndex:r._renderedRowStartIndex,rowStopIndex:r._renderedRowStopIndex}})}),We(je(r),"_setScrollingContainerRef",function(a){r._scrollingContainer=a}),We(je(r),"_onScroll",function(a){a.target===r._scrollingContainer&&r.handleScrollEvent(a.target)});var n=new bR({cellCount:t.columnCount,cellSizeGetter:function(o){return e._wrapSizeGetter(t.columnWidth)(o)},estimatedCellSize:e._getEstimatedColumnSize(t)}),s=new bR({cellCount:t.rowCount,cellSizeGetter:function(o){return e._wrapSizeGetter(t.rowHeight)(o)},estimatedCellSize:e._getEstimatedRowSize(t)});return r.state={instanceProps:{columnSizeAndPositionManager:n,rowSizeAndPositionManager:s,prevColumnWidth:t.columnWidth,prevRowHeight:t.rowHeight,prevColumnCount:t.columnCount,prevRowCount:t.rowCount,prevIsScrolling:t.isScrolling===!0,prevScrollToColumn:t.scrollToColumn,prevScrollToRow:t.scrollToRow,scrollbarSize:0,scrollbarSizeMeasured:!1},isScrolling:!1,scrollDirectionHorizontal:Xu,scrollDirectionVertical:Xu,scrollLeft:0,scrollTop:0,scrollPositionChangeReason:null,needToResetStyleCache:!1},t.scrollToRow>0&&(r._initialScrollTop=r._getCalculatedScrollTop(t,r.state)),t.scrollToColumn>0&&(r._initialScrollLeft=r._getCalculatedScrollLeft(t,r.state)),r}return Zn(e,[{key:"getOffsetForCell",value:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=r.alignment,s=n===void 0?this.props.scrollToAlignment:n,a=r.columnIndex,o=a===void 0?this.props.scrollToColumn:a,l=r.rowIndex,u=l===void 0?this.props.scrollToRow:l,c=Vd({},this.props,{scrollToAlignment:s,scrollToColumn:o,scrollToRow:u});return{scrollLeft:this._getCalculatedScrollLeft(c),scrollTop:this._getCalculatedScrollTop(c)}}},{key:"getTotalRowsHeight",value:function(){return this.state.instanceProps.rowSizeAndPositionManager.getTotalSize()}},{key:"getTotalColumnsWidth",value:function(){return this.state.instanceProps.columnSizeAndPositionManager.getTotalSize()}},{key:"handleScrollEvent",value:function(r){var n=r.scrollLeft,s=n===void 0?0:n,a=r.scrollTop,o=a===void 0?0:a;if(!(o<0)){this._debounceScrollEnded();var l=this.props,u=l.autoHeight,c=l.autoWidth,h=l.height,m=l.width,g=this.state.instanceProps,y=g.scrollbarSize,_=g.rowSizeAndPositionManager.getTotalSize(),T=g.columnSizeAndPositionManager.getTotalSize(),E=Math.min(Math.max(0,T-m+y),s),w=Math.min(Math.max(0,_-h+y),o);if(this.state.scrollLeft!==E||this.state.scrollTop!==w){var D=E!==this.state.scrollLeft?E>this.state.scrollLeft?Xu:hv:this.state.scrollDirectionHorizontal,R=w!==this.state.scrollTop?w>this.state.scrollTop?Xu:hv:this.state.scrollDirectionVertical,A={isScrolling:!0,scrollDirectionHorizontal:D,scrollDirectionVertical:R,scrollPositionChangeReason:_S.OBSERVED};u||(A.scrollTop=w),c||(A.scrollLeft=E),A.needToResetStyleCache=!1,this.setState(A)}this._invokeOnScrollMemoizer({scrollLeft:E,scrollTop:w,totalColumnsWidth:T,totalRowsHeight:_})}}},{key:"invalidateCellSizeAfterRender",value:function(r){var n=r.columnIndex,s=r.rowIndex;this._deferredInvalidateColumnIndex=typeof this._deferredInvalidateColumnIndex=="number"?Math.min(this._deferredInvalidateColumnIndex,n):n,this._deferredInvalidateRowIndex=typeof this._deferredInvalidateRowIndex=="number"?Math.min(this._deferredInvalidateRowIndex,s):s}},{key:"measureAllCells",value:function(){var r=this.props,n=r.columnCount,s=r.rowCount,a=this.state.instanceProps;a.columnSizeAndPositionManager.getSizeAndPositionOfCell(n-1),a.rowSizeAndPositionManager.getSizeAndPositionOfCell(s-1)}},{key:"recomputeGridSize",value:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=r.columnIndex,s=n===void 0?0:n,a=r.rowIndex,o=a===void 0?0:a,l=this.props,u=l.scrollToColumn,c=l.scrollToRow,h=this.state.instanceProps;h.columnSizeAndPositionManager.resetCell(s),h.rowSizeAndPositionManager.resetCell(o),this._recomputeScrollLeftFlag=u>=0&&(this.state.scrollDirectionHorizontal===Xu?s<=u:s>=u),this._recomputeScrollTopFlag=c>=0&&(this.state.scrollDirectionVertical===Xu?o<=c:o>=c),this._styleCache={},this._cellCache={},this.forceUpdate()}},{key:"scrollToCell",value:function(r){var n=r.columnIndex,s=r.rowIndex,a=this.props.columnCount,o=this.props;a>1&&n!==void 0&&this._updateScrollLeftForScrollToColumn(Vd({},o,{scrollToColumn:n})),s!==void 0&&this._updateScrollTopForScrollToRow(Vd({},o,{scrollToRow:s}))}},{key:"componentDidMount",value:function(){var r=this.props,n=r.getScrollbarSize,s=r.height,a=r.scrollLeft,o=r.scrollToColumn,l=r.scrollTop,u=r.scrollToRow,c=r.width,h=this.state.instanceProps;if(this._initialScrollTop=0,this._initialScrollLeft=0,this._handleInvalidatedGridSize(),h.scrollbarSizeMeasured||this.setState(function(y){var _=Vd({},y,{needToResetStyleCache:!1});return _.instanceProps.scrollbarSize=n(),_.instanceProps.scrollbarSizeMeasured=!0,_}),typeof a=="number"&&a>=0||typeof l=="number"&&l>=0){var m=e._getScrollToPositionStateUpdate({prevState:this.state,scrollLeft:a,scrollTop:l});m&&(m.needToResetStyleCache=!1,this.setState(m))}this._scrollingContainer&&(this._scrollingContainer.scrollLeft!==this.state.scrollLeft&&(this._scrollingContainer.scrollLeft=this.state.scrollLeft),this._scrollingContainer.scrollTop!==this.state.scrollTop&&(this._scrollingContainer.scrollTop=this.state.scrollTop));var g=s>0&&c>0;o>=0&&g&&this._updateScrollLeftForScrollToColumn(),u>=0&&g&&this._updateScrollTopForScrollToRow(),this._invokeOnGridRenderedHelper(),this._invokeOnScrollMemoizer({scrollLeft:a||0,scrollTop:l||0,totalColumnsWidth:h.columnSizeAndPositionManager.getTotalSize(),totalRowsHeight:h.rowSizeAndPositionManager.getTotalSize()}),this._maybeCallOnScrollbarPresenceChange()}},{key:"componentDidUpdate",value:function(r,n){var s=this,a=this.props,o=a.autoHeight,l=a.autoWidth,u=a.columnCount,c=a.height,h=a.rowCount,m=a.scrollToAlignment,g=a.scrollToColumn,y=a.scrollToRow,_=a.width,T=this.state,E=T.scrollLeft,w=T.scrollPositionChangeReason,D=T.scrollTop,R=T.instanceProps;this._handleInvalidatedGridSize();var A=u>0&&r.columnCount===0||h>0&&r.rowCount===0;w===_S.REQUESTED&&(!l&&E>=0&&(E!==this._scrollingContainer.scrollLeft||A)&&(this._scrollingContainer.scrollLeft=E),!o&&D>=0&&(D!==this._scrollingContainer.scrollTop||A)&&(this._scrollingContainer.scrollTop=D));var L=(r.width===0||r.height===0)&&c>0&&_>0;if(this._recomputeScrollLeftFlag?(this._recomputeScrollLeftFlag=!1,this._updateScrollLeftForScrollToColumn(this.props)):SR({cellSizeAndPositionManager:R.columnSizeAndPositionManager,previousCellsCount:r.columnCount,previousCellSize:r.columnWidth,previousScrollToAlignment:r.scrollToAlignment,previousScrollToIndex:r.scrollToColumn,previousSize:r.width,scrollOffset:E,scrollToAlignment:m,scrollToIndex:g,size:_,sizeJustIncreasedFromZero:L,updateScrollIndexCallback:function(){return s._updateScrollLeftForScrollToColumn(s.props)}}),this._recomputeScrollTopFlag?(this._recomputeScrollTopFlag=!1,this._updateScrollTopForScrollToRow(this.props)):SR({cellSizeAndPositionManager:R.rowSizeAndPositionManager,previousCellsCount:r.rowCount,previousCellSize:r.rowHeight,previousScrollToAlignment:r.scrollToAlignment,previousScrollToIndex:r.scrollToRow,previousSize:r.height,scrollOffset:D,scrollToAlignment:m,scrollToIndex:y,size:c,sizeJustIncreasedFromZero:L,updateScrollIndexCallback:function(){return s._updateScrollTopForScrollToRow(s.props)}}),this._invokeOnGridRenderedHelper(),E!==n.scrollLeft||D!==n.scrollTop){var F=R.rowSizeAndPositionManager.getTotalSize(),B=R.columnSizeAndPositionManager.getTotalSize();this._invokeOnScrollMemoizer({scrollLeft:E,scrollTop:D,totalColumnsWidth:B,totalRowsHeight:F})}this._maybeCallOnScrollbarPresenceChange()}},{key:"componentWillUnmount",value:function(){this._disablePointerEventsTimeoutId&&op(this._disablePointerEventsTimeoutId)}},{key:"render",value:function(){var r=this.props,n=r.autoContainerWidth,s=r.autoHeight,a=r.autoWidth,o=r.className,l=r.containerProps,u=r.containerRole,c=r.containerStyle,h=r.height,m=r.id,g=r.noContentRenderer,y=r.role,_=r.style,T=r.tabIndex,E=r.width,w=this.state,D=w.instanceProps,R=w.needToResetStyleCache,A=this._isScrolling(),L={boxSizing:"border-box",direction:"ltr",height:s?"auto":h,position:"relative",width:a?"auto":E,WebkitOverflowScrolling:"touch",willChange:"transform"};R&&(this._styleCache={}),this.state.isScrolling||this._resetStyleCache(),this._calculateChildrenToRender(this.props,this.state);var F=D.columnSizeAndPositionManager.getTotalSize(),B=D.rowSizeAndPositionManager.getTotalSize(),M=B>h?D.scrollbarSize:0,k=F>E?D.scrollbarSize:0;(k!==this._horizontalScrollBarSize||M!==this._verticalScrollBarSize)&&(this._horizontalScrollBarSize=k,this._verticalScrollBarSize=M,this._scrollbarPresenceChanged=!0),L.overflowX=F+M<=E?"hidden":"auto",L.overflowY=B+k<=h?"hidden":"auto";var q=this._childrenToDisplay,G=q.length===0&&h>0&&E>0;return j.createElement("div",Jt({ref:this._setScrollingContainerRef},l,{"aria-label":this.props["aria-label"],"aria-readonly":this.props["aria-readonly"],className:al("ReactVirtualized__Grid",o),id:m,onScroll:this._onScroll,role:y,style:Vd({},L,{},_),tabIndex:T}),q.length>0&&j.createElement("div",{className:"ReactVirtualized__Grid__innerScrollContainer",role:u,style:Vd({width:n?"auto":F,height:B,maxWidth:F,maxHeight:B,overflow:"hidden",pointerEvents:A?"none":"",position:"relative"},c)},q),G&&g())}},{key:"_calculateChildrenToRender",value:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.props,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.state,s=r.cellRenderer,a=r.cellRangeRenderer,o=r.columnCount,l=r.deferredMeasurementCache,u=r.height,c=r.overscanColumnCount,h=r.overscanIndicesGetter,m=r.overscanRowCount,g=r.rowCount,y=r.width,_=r.isScrollingOptOut,T=n.scrollDirectionHorizontal,E=n.scrollDirectionVertical,w=n.instanceProps,D=this._initialScrollTop>0?this._initialScrollTop:n.scrollTop,R=this._initialScrollLeft>0?this._initialScrollLeft:n.scrollLeft,A=this._isScrolling(r,n);if(this._childrenToDisplay=[],u>0&&y>0){var L=w.columnSizeAndPositionManager.getVisibleCellRange({containerSize:y,offset:R}),F=w.rowSizeAndPositionManager.getVisibleCellRange({containerSize:u,offset:D}),B=w.columnSizeAndPositionManager.getOffsetAdjustment({containerSize:y,offset:R}),M=w.rowSizeAndPositionManager.getOffsetAdjustment({containerSize:u,offset:D});this._renderedColumnStartIndex=L.start,this._renderedColumnStopIndex=L.stop,this._renderedRowStartIndex=F.start,this._renderedRowStopIndex=F.stop;var k=h({direction:"horizontal",cellCount:o,overscanCellsCount:c,scrollDirection:T,startIndex:typeof L.start=="number"?L.start:0,stopIndex:typeof L.stop=="number"?L.stop:-1}),q=h({direction:"vertical",cellCount:g,overscanCellsCount:m,scrollDirection:E,startIndex:typeof F.start=="number"?F.start:0,stopIndex:typeof F.stop=="number"?F.stop:-1}),G=k.overscanStartIndex,H=k.overscanStopIndex,re=q.overscanStartIndex,se=q.overscanStopIndex;if(l){if(!l.hasFixedHeight()){for(var de=re;de<=se;de++)if(!l.has(de,0)){G=0,H=o-1;break}}if(!l.hasFixedWidth()){for(var me=G;me<=H;me++)if(!l.has(0,me)){re=0,se=g-1;break}}}this._childrenToDisplay=a({cellCache:this._cellCache,cellRenderer:s,columnSizeAndPositionManager:w.columnSizeAndPositionManager,columnStartIndex:G,columnStopIndex:H,deferredMeasurementCache:l,horizontalOffsetAdjustment:B,isScrolling:A,isScrollingOptOut:_,parent:this,rowSizeAndPositionManager:w.rowSizeAndPositionManager,rowStartIndex:re,rowStopIndex:se,scrollLeft:R,scrollTop:D,styleCache:this._styleCache,verticalOffsetAdjustment:M,visibleColumnIndices:L,visibleRowIndices:F}),this._columnStartIndex=G,this._columnStopIndex=H,this._rowStartIndex=re,this._rowStopIndex=se}}},{key:"_debounceScrollEnded",value:function(){var r=this.props.scrollingResetTimeInterval;this._disablePointerEventsTimeoutId&&op(this._disablePointerEventsTimeoutId),this._disablePointerEventsTimeoutId=Dw(this._debounceScrollEndedCallback,r)}},{key:"_handleInvalidatedGridSize",value:function(){if(typeof this._deferredInvalidateColumnIndex=="number"&&typeof this._deferredInvalidateRowIndex=="number"){var r=this._deferredInvalidateColumnIndex,n=this._deferredInvalidateRowIndex;this._deferredInvalidateColumnIndex=null,this._deferredInvalidateRowIndex=null,this.recomputeGridSize({columnIndex:r,rowIndex:n})}}},{key:"_invokeOnScrollMemoizer",value:function(r){var n=this,s=r.scrollLeft,a=r.scrollTop,o=r.totalColumnsWidth,l=r.totalRowsHeight;this._onScrollMemoizer({callback:function(c){var h=c.scrollLeft,m=c.scrollTop,g=n.props,y=g.height,_=g.onScroll,T=g.width;_({clientHeight:y,clientWidth:T,scrollHeight:l,scrollLeft:h,scrollTop:m,scrollWidth:o})},indices:{scrollLeft:s,scrollTop:a}})}},{key:"_isScrolling",value:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.props,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.state;return Object.hasOwnProperty.call(r,"isScrolling")?!!r.isScrolling:!!n.isScrolling}},{key:"_maybeCallOnScrollbarPresenceChange",value:function(){if(this._scrollbarPresenceChanged){var r=this.props.onScrollbarPresenceChange;this._scrollbarPresenceChanged=!1,r({horizontal:this._horizontalScrollBarSize>0,size:this.state.instanceProps.scrollbarSize,vertical:this._verticalScrollBarSize>0})}}},{key:"scrollToPosition",value:function(r){var n=r.scrollLeft,s=r.scrollTop,a=e._getScrollToPositionStateUpdate({prevState:this.state,scrollLeft:n,scrollTop:s});a&&(a.needToResetStyleCache=!1,this.setState(a))}},{key:"_getCalculatedScrollLeft",value:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.props,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.state;return e._getCalculatedScrollLeft(r,n)}},{key:"_updateScrollLeftForScrollToColumn",value:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.props,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.state,s=e._getScrollLeftForScrollToColumnStateUpdate(r,n);s&&(s.needToResetStyleCache=!1,this.setState(s))}},{key:"_getCalculatedScrollTop",value:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.props,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.state;return e._getCalculatedScrollTop(r,n)}},{key:"_resetStyleCache",value:function(){var r=this._styleCache,n=this._cellCache,s=this.props.isScrollingOptOut;this._cellCache={},this._styleCache={};for(var a=this._rowStartIndex;a<=this._rowStopIndex;a++)for(var o=this._columnStartIndex;o<=this._columnStopIndex;o++){var l="".concat(a,"-").concat(o);this._styleCache[l]=r[l],s&&(this._cellCache[l]=n[l])}}},{key:"_updateScrollTopForScrollToRow",value:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.props,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.state,s=e._getScrollTopForScrollToRowStateUpdate(r,n);s&&(s.needToResetStyleCache=!1,this.setState(s))}}],[{key:"getDerivedStateFromProps",value:function(r,n){var s={};r.columnCount===0&&n.scrollLeft!==0||r.rowCount===0&&n.scrollTop!==0?(s.scrollLeft=0,s.scrollTop=0):(r.scrollLeft!==n.scrollLeft&&r.scrollToColumn<0||r.scrollTop!==n.scrollTop&&r.scrollToRow<0)&&Object.assign(s,e._getScrollToPositionStateUpdate({prevState:n,scrollLeft:r.scrollLeft,scrollTop:r.scrollTop}));var a=n.instanceProps;s.needToResetStyleCache=!1,(r.columnWidth!==a.prevColumnWidth||r.rowHeight!==a.prevRowHeight)&&(s.needToResetStyleCache=!0),a.columnSizeAndPositionManager.configure({cellCount:r.columnCount,estimatedCellSize:e._getEstimatedColumnSize(r),cellSizeGetter:e._wrapSizeGetter(r.columnWidth)}),a.rowSizeAndPositionManager.configure({cellCount:r.rowCount,estimatedCellSize:e._getEstimatedRowSize(r),cellSizeGetter:e._wrapSizeGetter(r.rowHeight)}),(a.prevColumnCount===0||a.prevRowCount===0)&&(a.prevColumnCount=0,a.prevRowCount=0),r.autoHeight&&r.isScrolling===!1&&a.prevIsScrolling===!0&&Object.assign(s,{isScrolling:!1});var o,l;return TR({cellCount:a.prevColumnCount,cellSize:typeof a.prevColumnWidth=="number"?a.prevColumnWidth:null,computeMetadataCallback:function(){return a.columnSizeAndPositionManager.resetCell(0)},computeMetadataCallbackProps:r,nextCellsCount:r.columnCount,nextCellSize:typeof r.columnWidth=="number"?r.columnWidth:null,nextScrollToIndex:r.scrollToColumn,scrollToIndex:a.prevScrollToColumn,updateScrollOffsetForScrollToIndex:function(){o=e._getScrollLeftForScrollToColumnStateUpdate(r,n)}}),TR({cellCount:a.prevRowCount,cellSize:typeof a.prevRowHeight=="number"?a.prevRowHeight:null,computeMetadataCallback:function(){return a.rowSizeAndPositionManager.resetCell(0)},computeMetadataCallbackProps:r,nextCellsCount:r.rowCount,nextCellSize:typeof r.rowHeight=="number"?r.rowHeight:null,nextScrollToIndex:r.scrollToRow,scrollToIndex:a.prevScrollToRow,updateScrollOffsetForScrollToIndex:function(){l=e._getScrollTopForScrollToRowStateUpdate(r,n)}}),a.prevColumnCount=r.columnCount,a.prevColumnWidth=r.columnWidth,a.prevIsScrolling=r.isScrolling===!0,a.prevRowCount=r.rowCount,a.prevRowHeight=r.rowHeight,a.prevScrollToColumn=r.scrollToColumn,a.prevScrollToRow=r.scrollToRow,a.scrollbarSize=r.getScrollbarSize(),a.scrollbarSize===void 0?(a.scrollbarSizeMeasured=!1,a.scrollbarSize=0):a.scrollbarSizeMeasured=!0,s.instanceProps=a,Vd({},s,{},o,{},l)}},{key:"_getEstimatedColumnSize",value:function(r){return typeof r.columnWidth=="number"?r.columnWidth:r.estimatedColumnSize}},{key:"_getEstimatedRowSize",value:function(r){return typeof r.rowHeight=="number"?r.rowHeight:r.estimatedRowSize}},{key:"_getScrollToPositionStateUpdate",value:function(r){var n=r.prevState,s=r.scrollLeft,a=r.scrollTop,o={scrollPositionChangeReason:_S.REQUESTED};return typeof s=="number"&&s>=0&&(o.scrollDirectionHorizontal=s>n.scrollLeft?Xu:hv,o.scrollLeft=s),typeof a=="number"&&a>=0&&(o.scrollDirectionVertical=a>n.scrollTop?Xu:hv,o.scrollTop=a),typeof s=="number"&&s>=0&&s!==n.scrollLeft||typeof a=="number"&&a>=0&&a!==n.scrollTop?o:{}}},{key:"_wrapSizeGetter",value:function(r){return typeof r=="function"?r:function(){return r}}},{key:"_getCalculatedScrollLeft",value:function(r,n){var s=r.columnCount,a=r.height,o=r.scrollToAlignment,l=r.scrollToColumn,u=r.width,c=n.scrollLeft,h=n.instanceProps;if(s>0){var m=s-1,g=l<0?m:Math.min(m,l),y=h.rowSizeAndPositionManager.getTotalSize(),_=h.scrollbarSizeMeasured&&y>a?h.scrollbarSize:0;return h.columnSizeAndPositionManager.getUpdatedOffsetForIndex({align:o,containerSize:u-_,currentOffset:c,targetIndex:g})}return 0}},{key:"_getScrollLeftForScrollToColumnStateUpdate",value:function(r,n){var s=n.scrollLeft,a=e._getCalculatedScrollLeft(r,n);return typeof a=="number"&&a>=0&&s!==a?e._getScrollToPositionStateUpdate({prevState:n,scrollLeft:a,scrollTop:-1}):{}}},{key:"_getCalculatedScrollTop",value:function(r,n){var s=r.height,a=r.rowCount,o=r.scrollToAlignment,l=r.scrollToRow,u=r.width,c=n.scrollTop,h=n.instanceProps;if(a>0){var m=a-1,g=l<0?m:Math.min(m,l),y=h.columnSizeAndPositionManager.getTotalSize(),_=h.scrollbarSizeMeasured&&y>u?h.scrollbarSize:0;return h.rowSizeAndPositionManager.getUpdatedOffsetForIndex({align:o,containerSize:s-_,currentOffset:c,targetIndex:g})}return 0}},{key:"_getScrollTopForScrollToRowStateUpdate",value:function(r,n){var s=n.scrollTop,a=e._getCalculatedScrollTop(r,n);return typeof a=="number"&&a>=0&&s!==a?e._getScrollToPositionStateUpdate({prevState:n,scrollLeft:-1,scrollTop:a}):{}}}]),e})(j.PureComponent),We(ER,"propTypes",null),wR);We(id,"defaultProps",{"aria-label":"grid","aria-readonly":!0,autoContainerWidth:!1,autoHeight:!1,autoWidth:!1,cellRangeRenderer:JZ,containerRole:"rowgroup",containerStyle:{},estimatedColumnSize:100,estimatedRowSize:30,getScrollbarSize:vC,noContentRenderer:nee,onScroll:function(){},onScrollbarPresenceChange:function(){},onSectionRendered:function(){},overscanColumnCount:0,overscanIndicesGetter:QZ,overscanRowCount:10,role:"grid",scrollingResetTimeInterval:iee,scrollToAlignment:"auto",scrollToColumn:-1,scrollToRow:-1,style:{},tabIndex:0,isScrollingOptOut:!1});J0(id);var see=1;function a8(i){var e=i.cellCount,t=i.overscanCellsCount,r=i.scrollDirection,n=i.startIndex,s=i.stopIndex;return t=Math.max(1,t),r===see?{overscanStartIndex:Math.max(0,n-1),overscanStopIndex:Math.min(e-1,s+t)}:{overscanStartIndex:Math.max(0,n-t),overscanStopIndex:Math.min(e-1,s+1)}}var AR,IR;function DR(i,e){var t=Object.keys(i);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(i);e&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(i,n).enumerable})),t.push.apply(t,r)}return t}function aee(i){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?DR(t,!0).forEach(function(r){We(i,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(t)):DR(t).forEach(function(r){Object.defineProperty(i,r,Object.getOwnPropertyDescriptor(t,r))})}return i}var o8=(IR=AR=(function(i){La(e,i);function e(){var t,r;On(this,e);for(var n=arguments.length,s=new Array(n),a=0;a<n;a++)s[a]=arguments[a];return r=oo(this,(t=Ms(e)).call.apply(t,[this].concat(s))),We(je(r),"state",{scrollToColumn:0,scrollToRow:0,instanceProps:{prevScrollToColumn:0,prevScrollToRow:0}}),We(je(r),"_columnStartIndex",0),We(je(r),"_columnStopIndex",0),We(je(r),"_rowStartIndex",0),We(je(r),"_rowStopIndex",0),We(je(r),"_onKeyDown",function(o){var l=r.props,u=l.columnCount,c=l.disabled,h=l.mode,m=l.rowCount;if(!c){var g=r._getScrollState(),y=g.scrollToColumn,_=g.scrollToRow,T=r._getScrollState(),E=T.scrollToColumn,w=T.scrollToRow;switch(o.key){case"ArrowDown":w=Math.min(h==="cells"?w+1:r._rowStopIndex+1,m-1);break;case"ArrowLeft":E=Math.max(h==="cells"?E-1:r._columnStartIndex-1,0);break;case"ArrowRight":E=Math.min(h==="cells"?E+1:r._columnStopIndex+1,u-1);break;case"ArrowUp":w=Math.max(h==="cells"?w-1:r._rowStartIndex-1,0);break}(E!==y||w!==_)&&(o.preventDefault(),r._updateScrollState({scrollToColumn:E,scrollToRow:w}))}}),We(je(r),"_onSectionRendered",function(o){var l=o.columnStartIndex,u=o.columnStopIndex,c=o.rowStartIndex,h=o.rowStopIndex;r._columnStartIndex=l,r._columnStopIndex=u,r._rowStartIndex=c,r._rowStopIndex=h}),r}return Zn(e,[{key:"setScrollIndexes",value:function(r){var n=r.scrollToColumn,s=r.scrollToRow;this.setState({scrollToRow:s,scrollToColumn:n})}},{key:"render",value:function(){var r=this.props,n=r.className,s=r.children,a=this._getScrollState(),o=a.scrollToColumn,l=a.scrollToRow;return j.createElement("div",{className:n,onKeyDown:this._onKeyDown},s({onSectionRendered:this._onSectionRendered,scrollToColumn:o,scrollToRow:l}))}},{key:"_getScrollState",value:function(){return this.props.isControlled?this.props:this.state}},{key:"_updateScrollState",value:function(r){var n=r.scrollToColumn,s=r.scrollToRow,a=this.props,o=a.isControlled,l=a.onScrollToChange;typeof l=="function"&&l({scrollToColumn:n,scrollToRow:s}),o||this.setState({scrollToColumn:n,scrollToRow:s})}}],[{key:"getDerivedStateFromProps",value:function(r,n){return r.isControlled?{}:r.scrollToColumn!==n.instanceProps.prevScrollToColumn||r.scrollToRow!==n.instanceProps.prevScrollToRow?aee({},n,{scrollToColumn:r.scrollToColumn,scrollToRow:r.scrollToRow,instanceProps:{prevScrollToColumn:r.scrollToColumn,prevScrollToRow:r.scrollToRow}}):{}}}]),e})(j.PureComponent),We(AR,"propTypes",null),IR);We(o8,"defaultProps",{disabled:!1,isControlled:!1,mode:"edges",scrollToColumn:0,scrollToRow:0});J0(o8);function l8(i,e){var t;typeof e<"u"?t=e:typeof window<"u"?t=window:typeof self<"u"?t=self:t=global;var r=typeof t.document<"u"&&t.document.attachEvent;if(!r){var n=(function(){var F=t.requestAnimationFrame||t.mozRequestAnimationFrame||t.webkitRequestAnimationFrame||function(B){return t.setTimeout(B,20)};return function(B){return F(B)}})(),s=(function(){var F=t.cancelAnimationFrame||t.mozCancelAnimationFrame||t.webkitCancelAnimationFrame||t.clearTimeout;return function(B){return F(B)}})(),a=function(B){var M=B.__resizeTriggers__,k=M.firstElementChild,q=M.lastElementChild,G=k.firstElementChild;q.scrollLeft=q.scrollWidth,q.scrollTop=q.scrollHeight,G.style.width=k.offsetWidth+1+"px",G.style.height=k.offsetHeight+1+"px",k.scrollLeft=k.scrollWidth,k.scrollTop=k.scrollHeight},o=function(B){return B.offsetWidth!=B.__resizeLast__.width||B.offsetHeight!=B.__resizeLast__.height},l=function(B){if(!(B.target.className&&typeof B.target.className.indexOf=="function"&&B.target.className.indexOf("contract-trigger")<0&&B.target.className.indexOf("expand-trigger")<0)){var M=this;a(this),this.__resizeRAF__&&s(this.__resizeRAF__),this.__resizeRAF__=n(function(){o(M)&&(M.__resizeLast__.width=M.offsetWidth,M.__resizeLast__.height=M.offsetHeight,M.__resizeListeners__.forEach(function(k){k.call(M,B)}))})}},u=!1,c="",h="animationstart",m="Webkit Moz O ms".split(" "),g="webkitAnimationStart animationstart oAnimationStart MSAnimationStart".split(" "),y="";{var _=t.document.createElement("fakeelement");if(_.style.animationName!==void 0&&(u=!0),u===!1){for(var T=0;T<m.length;T++)if(_.style[m[T]+"AnimationName"]!==void 0){y=m[T],c="-"+y.toLowerCase()+"-",h=g[T],u=!0;break}}}var E="resizeanim",w="@"+c+"keyframes "+E+" { from { opacity: 0; } to { opacity: 0; } } ",D=c+"animation: 1ms "+E+"; "}var R=function(B){if(!B.getElementById("detectElementResize")){var M=(w||"")+".resize-triggers { "+(D||"")+'visibility: hidden; opacity: 0; } .resize-triggers, .resize-triggers > div, .contract-trigger:before { content: " "; display: block; position: absolute; top: 0; left: 0; height: 100%; width: 100%; overflow: hidden; z-index: -1; } .resize-triggers > div { background: #eee; overflow: auto; } .contract-trigger:before { width: 200%; height: 200%; }',k=B.head||B.getElementsByTagName("head")[0],q=B.createElement("style");q.id="detectElementResize",q.type="text/css",i!=null&&q.setAttribute("nonce",i),q.styleSheet?q.styleSheet.cssText=M:q.appendChild(B.createTextNode(M)),k.appendChild(q)}},A=function(B,M){if(r)B.attachEvent("onresize",M);else{if(!B.__resizeTriggers__){var k=B.ownerDocument,q=t.getComputedStyle(B);q&&q.position=="static"&&(B.style.position="relative"),R(k),B.__resizeLast__={},B.__resizeListeners__=[],(B.__resizeTriggers__=k.createElement("div")).className="resize-triggers";var G='<div class="expand-trigger"><div></div></div><div class="contract-trigger"></div>';if(window.trustedTypes){var H=trustedTypes.createPolicy("react-virtualized-auto-sizer",{createHTML:function(){return G}});B.__resizeTriggers__.innerHTML=H.createHTML("")}else B.__resizeTriggers__.innerHTML=G;B.appendChild(B.__resizeTriggers__),a(B),B.addEventListener("scroll",l,!0),h&&(B.__resizeTriggers__.__animationListener__=function(se){se.animationName==E&&a(B)},B.__resizeTriggers__.addEventListener(h,B.__resizeTriggers__.__animationListener__))}B.__resizeListeners__.push(M)}},L=function(B,M){if(r)B.detachEvent("onresize",M);else if(B.__resizeListeners__.splice(B.__resizeListeners__.indexOf(M),1),!B.__resizeListeners__.length){B.removeEventListener("scroll",l,!0),B.__resizeTriggers__.__animationListener__&&(B.__resizeTriggers__.removeEventListener(h,B.__resizeTriggers__.__animationListener__),B.__resizeTriggers__.__animationListener__=null);try{B.__resizeTriggers__=!B.removeChild(B.__resizeTriggers__)}catch{}}};return{addResizeListener:A,removeResizeListener:L}}var PR,RR;function LR(i,e){var t=Object.keys(i);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(i);e&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(i,n).enumerable})),t.push.apply(t,r)}return t}function oee(i){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?LR(t,!0).forEach(function(r){We(i,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(t)):LR(t).forEach(function(r){Object.defineProperty(i,r,Object.getOwnPropertyDescriptor(t,r))})}return i}var u8=(RR=PR=(function(i){La(e,i);function e(){var t,r;On(this,e);for(var n=arguments.length,s=new Array(n),a=0;a<n;a++)s[a]=arguments[a];return r=oo(this,(t=Ms(e)).call.apply(t,[this].concat(s))),We(je(r),"state",{height:r.props.defaultHeight||0,width:r.props.defaultWidth||0}),We(je(r),"_parentNode",void 0),We(je(r),"_autoSizer",void 0),We(je(r),"_window",void 0),We(je(r),"_detectElementResize",void 0),We(je(r),"_onResize",function(){var o=r.props,l=o.disableHeight,u=o.disableWidth,c=o.onResize;if(r._parentNode){var h=r._parentNode.offsetHeight||0,m=r._parentNode.offsetWidth||0,g=r._window||window,y=g.getComputedStyle(r._parentNode)||{},_=parseInt(y.paddingLeft,10)||0,T=parseInt(y.paddingRight,10)||0,E=parseInt(y.paddingTop,10)||0,w=parseInt(y.paddingBottom,10)||0,D=h-E-w,R=m-_-T;(!l&&r.state.height!==D||!u&&r.state.width!==R)&&(r.setState({height:h-E-w,width:m-_-T}),c({height:h,width:m}))}}),We(je(r),"_setRef",function(o){r._autoSizer=o}),r}return Zn(e,[{key:"componentDidMount",value:function(){var r=this.props.nonce;this._autoSizer&&this._autoSizer.parentNode&&this._autoSizer.parentNode.ownerDocument&&this._autoSizer.parentNode.ownerDocument.defaultView&&this._autoSizer.parentNode instanceof this._autoSizer.parentNode.ownerDocument.defaultView.HTMLElement&&(this._parentNode=this._autoSizer.parentNode,this._window=this._autoSizer.parentNode.ownerDocument.defaultView,this._detectElementResize=l8(r,this._window),this._detectElementResize.addResizeListener(this._parentNode,this._onResize),this._onResize())}},{key:"componentWillUnmount",value:function(){this._detectElementResize&&this._parentNode&&this._detectElementResize.removeResizeListener(this._parentNode,this._onResize)}},{key:"render",value:function(){var r=this.props,n=r.children,s=r.className,a=r.disableHeight,o=r.disableWidth,l=r.style,u=this.state,c=u.height,h=u.width,m={overflow:"visible"},g={};return a||(m.height=0,g.height=c),o||(m.width=0,g.width=h),j.createElement("div",{className:s,ref:this._setRef,style:oee({},m,{},l)},n(g))}}]),e})(j.Component),We(PR,"propTypes",null),RR);We(u8,"defaultProps",{onResize:function(){},disableHeight:!1,disableWidth:!1,style:{}});var OR,MR,lee=(MR=OR=(function(i){La(e,i);function e(){var t,r;On(this,e);for(var n=arguments.length,s=new Array(n),a=0;a<n;a++)s[a]=arguments[a];return r=oo(this,(t=Ms(e)).call.apply(t,[this].concat(s))),We(je(r),"_child",void 0),We(je(r),"_measure",function(){var o=r.props,l=o.cache,u=o.columnIndex,c=u===void 0?0:u,h=o.parent,m=o.rowIndex,g=m===void 0?r.props.index||0:m,y=r._getCellMeasurements(),_=y.height,T=y.width;(_!==l.getHeight(g,c)||T!==l.getWidth(g,c))&&(l.set(g,c,T,_),h&&typeof h.recomputeGridSize=="function"&&h.recomputeGridSize({columnIndex:c,rowIndex:g}))}),We(je(r),"_registerChild",function(o){o&&!(o instanceof Element)&&console.warn("CellMeasurer registerChild expects to be passed Element or null"),r._child=o,o&&r._maybeMeasureCell()}),r}return Zn(e,[{key:"componentDidMount",value:function(){this._maybeMeasureCell()}},{key:"componentDidUpdate",value:function(){this._maybeMeasureCell()}},{key:"render",value:function(){var r=this.props.children;return typeof r=="function"?r({measure:this._measure,registerChild:this._registerChild}):r}},{key:"_getCellMeasurements",value:function(){var r=this.props.cache,n=this._child||kp.findDOMNode(this);if(n&&n.ownerDocument&&n.ownerDocument.defaultView&&n instanceof n.ownerDocument.defaultView.HTMLElement){var s=n.style.width,a=n.style.height;r.hasFixedWidth()||(n.style.width="auto"),r.hasFixedHeight()||(n.style.height="auto");var o=Math.ceil(n.offsetHeight),l=Math.ceil(n.offsetWidth);return s&&(n.style.width=s),a&&(n.style.height=a),{height:o,width:l}}else return{height:0,width:0}}},{key:"_maybeMeasureCell",value:function(){var r=this.props,n=r.cache,s=r.columnIndex,a=s===void 0?0:s,o=r.parent,l=r.rowIndex,u=l===void 0?this.props.index||0:l;if(!n.has(u,a)){var c=this._getCellMeasurements(),h=c.height,m=c.width;n.set(u,a,m,h),o&&typeof o.invalidateCellSizeAfterRender=="function"&&o.invalidateCellSizeAfterRender({columnIndex:a,rowIndex:u})}}}]),e})(j.PureComponent),We(OR,"propTypes",null),MR);We(lee,"__internalCellMeasurerFlag",!1);function FR(i,e){var t=Object.keys(i);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(i);e&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(i,n).enumerable})),t.push.apply(t,r)}return t}function uee(i){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?FR(t,!0).forEach(function(r){We(i,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(t)):FR(t).forEach(function(r){Object.defineProperty(i,r,Object.getOwnPropertyDescriptor(t,r))})}return i}var cee=150,uf={OBSERVED:"observed",REQUESTED:"requested"},Gx=(function(i){La(e,i);function e(){var t,r;On(this,e);for(var n=arguments.length,s=new Array(n),a=0;a<n;a++)s[a]=arguments[a];return r=oo(this,(t=Ms(e)).call.apply(t,[this].concat(s))),We(je(r),"state",{isScrolling:!1,scrollLeft:0,scrollTop:0}),We(je(r),"_calculateSizeAndPositionDataOnNextUpdate",!1),We(je(r),"_onSectionRenderedMemoizer",ap()),We(je(r),"_onScrollMemoizer",ap(!1)),We(je(r),"_invokeOnSectionRenderedHelper",function(){var o=r.props,l=o.cellLayoutManager,u=o.onSectionRendered;r._onSectionRenderedMemoizer({callback:u,indices:{indices:l.getLastRenderedIndices()}})}),We(je(r),"_setScrollingContainerRef",function(o){r._scrollingContainer=o}),We(je(r),"_updateScrollPositionForScrollToCell",function(){var o=r.props,l=o.cellLayoutManager,u=o.height,c=o.scrollToAlignment,h=o.scrollToCell,m=o.width,g=r.state,y=g.scrollLeft,_=g.scrollTop;if(h>=0){var T=l.getScrollPositionForCell({align:c,cellIndex:h,height:u,scrollLeft:y,scrollTop:_,width:m});(T.scrollLeft!==y||T.scrollTop!==_)&&r._setScrollPosition(T)}}),We(je(r),"_onScroll",function(o){if(o.target===r._scrollingContainer){r._enablePointerEventsAfterDelay();var l=r.props,u=l.cellLayoutManager,c=l.height,h=l.isScrollingChange,m=l.width,g=r._scrollbarSize,y=u.getTotalSize(),_=y.height,T=y.width,E=Math.max(0,Math.min(T-m+g,o.target.scrollLeft)),w=Math.max(0,Math.min(_-c+g,o.target.scrollTop));if(r.state.scrollLeft!==E||r.state.scrollTop!==w){var D=o.cancelable?uf.OBSERVED:uf.REQUESTED;r.state.isScrolling||h(!0),r.setState({isScrolling:!0,scrollLeft:E,scrollPositionChangeReason:D,scrollTop:w})}r._invokeOnScrollMemoizer({scrollLeft:E,scrollTop:w,totalWidth:T,totalHeight:_})}}),r._scrollbarSize=vC(),r._scrollbarSize===void 0?(r._scrollbarSizeMeasured=!1,r._scrollbarSize=0):r._scrollbarSizeMeasured=!0,r}return Zn(e,[{key:"recomputeCellSizesAndPositions",value:function(){this._calculateSizeAndPositionDataOnNextUpdate=!0,this.forceUpdate()}},{key:"componentDidMount",value:function(){var r=this.props,n=r.cellLayoutManager,s=r.scrollLeft,a=r.scrollToCell,o=r.scrollTop;this._scrollbarSizeMeasured||(this._scrollbarSize=vC(),this._scrollbarSizeMeasured=!0,this.setState({})),a>=0?this._updateScrollPositionForScrollToCell():(s>=0||o>=0)&&this._setScrollPosition({scrollLeft:s,scrollTop:o}),this._invokeOnSectionRenderedHelper();var l=n.getTotalSize(),u=l.height,c=l.width;this._invokeOnScrollMemoizer({scrollLeft:s||0,scrollTop:o||0,totalHeight:u,totalWidth:c})}},{key:"componentDidUpdate",value:function(r,n){var s=this.props,a=s.height,o=s.scrollToAlignment,l=s.scrollToCell,u=s.width,c=this.state,h=c.scrollLeft,m=c.scrollPositionChangeReason,g=c.scrollTop;m===uf.REQUESTED&&(h>=0&&h!==n.scrollLeft&&h!==this._scrollingContainer.scrollLeft&&(this._scrollingContainer.scrollLeft=h),g>=0&&g!==n.scrollTop&&g!==this._scrollingContainer.scrollTop&&(this._scrollingContainer.scrollTop=g)),(a!==r.height||o!==r.scrollToAlignment||l!==r.scrollToCell||u!==r.width)&&this._updateScrollPositionForScrollToCell(),this._invokeOnSectionRenderedHelper()}},{key:"componentWillUnmount",value:function(){this._disablePointerEventsTimeoutId&&clearTimeout(this._disablePointerEventsTimeoutId)}},{key:"render",value:function(){var r=this.props,n=r.autoHeight,s=r.cellCount,a=r.cellLayoutManager,o=r.className,l=r.height,u=r.horizontalOverscanSize,c=r.id,h=r.noContentRenderer,m=r.style,g=r.verticalOverscanSize,y=r.width,_=this.state,T=_.isScrolling,E=_.scrollLeft,w=_.scrollTop;(this._lastRenderedCellCount!==s||this._lastRenderedCellLayoutManager!==a||this._calculateSizeAndPositionDataOnNextUpdate)&&(this._lastRenderedCellCount=s,this._lastRenderedCellLayoutManager=a,this._calculateSizeAndPositionDataOnNextUpdate=!1,a.calculateSizeAndPositionData());var D=a.getTotalSize(),R=D.height,A=D.width,L=Math.max(0,E-u),F=Math.max(0,w-g),B=Math.min(A,E+y+u),M=Math.min(R,w+l+g),k=l>0&&y>0?a.cellRenderers({height:M-F,isScrolling:T,width:B-L,x:L,y:F}):[],q={boxSizing:"border-box",direction:"ltr",height:n?"auto":l,position:"relative",WebkitOverflowScrolling:"touch",width:y,willChange:"transform"},G=R>l?this._scrollbarSize:0,H=A>y?this._scrollbarSize:0;return q.overflowX=A+G<=y?"hidden":"auto",q.overflowY=R+H<=l?"hidden":"auto",j.createElement("div",{ref:this._setScrollingContainerRef,"aria-label":this.props["aria-label"],className:al("ReactVirtualized__Collection",o),id:c,onScroll:this._onScroll,role:"grid",style:uee({},q,{},m),tabIndex:0},s>0&&j.createElement("div",{className:"ReactVirtualized__Collection__innerScrollContainer",style:{height:R,maxHeight:R,maxWidth:A,overflow:"hidden",pointerEvents:T?"none":"",width:A}},k),s===0&&h())}},{key:"_enablePointerEventsAfterDelay",value:function(){var r=this;this._disablePointerEventsTimeoutId&&clearTimeout(this._disablePointerEventsTimeoutId),this._disablePointerEventsTimeoutId=setTimeout(function(){var n=r.props.isScrollingChange;n(!1),r._disablePointerEventsTimeoutId=null,r.setState({isScrolling:!1})},cee)}},{key:"_invokeOnScrollMemoizer",value:function(r){var n=this,s=r.scrollLeft,a=r.scrollTop,o=r.totalHeight,l=r.totalWidth;this._onScrollMemoizer({callback:function(c){var h=c.scrollLeft,m=c.scrollTop,g=n.props,y=g.height,_=g.onScroll,T=g.width;_({clientHeight:y,clientWidth:T,scrollHeight:o,scrollLeft:h,scrollTop:m,scrollWidth:l})},indices:{scrollLeft:s,scrollTop:a}})}},{key:"_setScrollPosition",value:function(r){var n=r.scrollLeft,s=r.scrollTop,a={scrollPositionChangeReason:uf.REQUESTED};n>=0&&(a.scrollLeft=n),s>=0&&(a.scrollTop=s),(n>=0&&n!==this.state.scrollLeft||s>=0&&s!==this.state.scrollTop)&&this.setState(a)}}],[{key:"getDerivedStateFromProps",value:function(r,n){return r.cellCount===0&&(n.scrollLeft!==0||n.scrollTop!==0)?{scrollLeft:0,scrollTop:0,scrollPositionChangeReason:uf.REQUESTED}:r.scrollLeft!==n.scrollLeft||r.scrollTop!==n.scrollTop?{scrollLeft:r.scrollLeft!=null?r.scrollLeft:n.scrollLeft,scrollTop:r.scrollTop!=null?r.scrollTop:n.scrollTop,scrollPositionChangeReason:uf.REQUESTED}:null}}]),e})(j.PureComponent);We(Gx,"defaultProps",{"aria-label":"grid",horizontalOverscanSize:0,noContentRenderer:function(){return null},onScroll:function(){return null},onSectionRendered:function(){return null},scrollToAlignment:"auto",scrollToCell:-1,style:{},verticalOverscanSize:0});Gx.propTypes={};J0(Gx);var dee=(function(){function i(e){var t=e.height,r=e.width,n=e.x,s=e.y;On(this,i),this.height=t,this.width=r,this.x=n,this.y=s,this._indexMap={},this._indices=[]}return Zn(i,[{key:"addCellIndex",value:function(t){var r=t.index;this._indexMap[r]||(this._indexMap[r]=!0,this._indices.push(r))}},{key:"getCellIndices",value:function(){return this._indices}},{key:"toString",value:function(){return"".concat(this.x,",").concat(this.y," ").concat(this.width,"x").concat(this.height)}}]),i})(),hee=100,fee=(function(){function i(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:hee;On(this,i),this._sectionSize=e,this._cellMetadata=[],this._sections={}}return Zn(i,[{key:"getCellIndices",value:function(t){var r=t.height,n=t.width,s=t.x,a=t.y,o={};return this.getSections({height:r,width:n,x:s,y:a}).forEach(function(l){return l.getCellIndices().forEach(function(u){o[u]=u})}),Object.keys(o).map(function(l){return o[l]})}},{key:"getCellMetadata",value:function(t){var r=t.index;return this._cellMetadata[r]}},{key:"getSections",value:function(t){for(var r=t.height,n=t.width,s=t.x,a=t.y,o=Math.floor(s/this._sectionSize),l=Math.floor((s+n-1)/this._sectionSize),u=Math.floor(a/this._sectionSize),c=Math.floor((a+r-1)/this._sectionSize),h=[],m=o;m<=l;m++)for(var g=u;g<=c;g++){var y="".concat(m,".").concat(g);this._sections[y]||(this._sections[y]=new dee({height:this._sectionSize,width:this._sectionSize,x:m*this._sectionSize,y:g*this._sectionSize})),h.push(this._sections[y])}return h}},{key:"getTotalSectionCount",value:function(){return Object.keys(this._sections).length}},{key:"toString",value:function(){var t=this;return Object.keys(this._sections).map(function(r){return t._sections[r].toString()})}},{key:"registerCell",value:function(t){var r=t.cellMetadatum,n=t.index;this._cellMetadata[n]=r,this.getSections(r).forEach(function(s){return s.addCellIndex({index:n})})}}]),i})();function pee(i){for(var e=i.cellCount,t=i.cellSizeAndPositionGetter,r=i.sectionSize,n=[],s=new fee(r),a=0,o=0,l=0;l<e;l++){var u=t({index:l});if(u.height==null||isNaN(u.height)||u.width==null||isNaN(u.width)||u.x==null||isNaN(u.x)||u.y==null||isNaN(u.y))throw Error("Invalid metadata returned for cell ".concat(l,`:
        x:`).concat(u.x,", y:").concat(u.y,", width:").concat(u.width,", height:").concat(u.height));a=Math.max(a,u.y+u.height),o=Math.max(o,u.x+u.width),n[l]=u,s.registerCell({cellMetadatum:u,index:l})}return{cellMetadata:n,height:a,sectionManager:s,width:o}}function BR(i){var e=i.align,t=e===void 0?"auto":e,r=i.cellOffset,n=i.cellSize,s=i.containerSize,a=i.currentOffset,o=r,l=o-s+n;switch(t){case"start":return o;case"end":return l;case"center":return o-(s-n)/2;default:return Math.max(l,Math.min(o,a))}}var c8=(function(i){La(e,i);function e(t,r){var n;return On(this,e),n=oo(this,Ms(e).call(this,t,r)),n._cellMetadata=[],n._lastRenderedCellIndices=[],n._cellCache=[],n._isScrollingChange=n._isScrollingChange.bind(je(n)),n._setCollectionViewRef=n._setCollectionViewRef.bind(je(n)),n}return Zn(e,[{key:"forceUpdate",value:function(){this._collectionView!==void 0&&this._collectionView.forceUpdate()}},{key:"recomputeCellSizesAndPositions",value:function(){this._cellCache=[],this._collectionView.recomputeCellSizesAndPositions()}},{key:"render",value:function(){var r=Jt({},this.props);return j.createElement(Gx,Jt({cellLayoutManager:this,isScrollingChange:this._isScrollingChange,ref:this._setCollectionViewRef},r))}},{key:"calculateSizeAndPositionData",value:function(){var r=this.props,n=r.cellCount,s=r.cellSizeAndPositionGetter,a=r.sectionSize,o=pee({cellCount:n,cellSizeAndPositionGetter:s,sectionSize:a});this._cellMetadata=o.cellMetadata,this._sectionManager=o.sectionManager,this._height=o.height,this._width=o.width}},{key:"getLastRenderedIndices",value:function(){return this._lastRenderedCellIndices}},{key:"getScrollPositionForCell",value:function(r){var n=r.align,s=r.cellIndex,a=r.height,o=r.scrollLeft,l=r.scrollTop,u=r.width,c=this.props.cellCount;if(s>=0&&s<c){var h=this._cellMetadata[s];o=BR({align:n,cellOffset:h.x,cellSize:h.width,containerSize:u,currentOffset:o}),l=BR({align:n,cellOffset:h.y,cellSize:h.height,containerSize:a,currentOffset:l})}return{scrollLeft:o,scrollTop:l}}},{key:"getTotalSize",value:function(){return{height:this._height,width:this._width}}},{key:"cellRenderers",value:function(r){var n=this,s=r.height,a=r.isScrolling,o=r.width,l=r.x,u=r.y,c=this.props,h=c.cellGroupRenderer,m=c.cellRenderer;return this._lastRenderedCellIndices=this._sectionManager.getCellIndices({height:s,width:o,x:l,y:u}),h({cellCache:this._cellCache,cellRenderer:m,cellSizeAndPositionGetter:function(y){var _=y.index;return n._sectionManager.getCellMetadata({index:_})},indices:this._lastRenderedCellIndices,isScrolling:a})}},{key:"_isScrollingChange",value:function(r){r||(this._cellCache=[])}},{key:"_setCollectionViewRef",value:function(r){this._collectionView=r}}]),e})(j.PureComponent);We(c8,"defaultProps",{"aria-label":"grid",cellGroupRenderer:mee});c8.propTypes={};function mee(i){var e=i.cellCache,t=i.cellRenderer,r=i.cellSizeAndPositionGetter,n=i.indices,s=i.isScrolling;return n.map(function(a){var o=r({index:a}),l={index:a,isScrolling:s,key:a,style:{height:o.height,left:o.x,position:"absolute",top:o.y,width:o.width}};return s?(a in e||(e[a]=t(l)),e[a]):t(l)}).filter(function(a){return!!a})}function yC(i,e){(e==null||e>i.length)&&(e=i.length);for(var t=0,r=Array(e);t<e;t++)r[t]=i[t];return r}function gee(i){if(Array.isArray(i))return yC(i)}function vee(i){if(typeof Symbol<"u"&&i[Symbol.iterator]!=null||i["@@iterator"]!=null)return Array.from(i)}function d8(i,e){if(i){if(typeof i=="string")return yC(i,e);var t={}.toString.call(i).slice(8,-1);return t==="Object"&&i.constructor&&(t=i.constructor.name),t==="Map"||t==="Set"?Array.from(i):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?yC(i,e):void 0}}function yee(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _ee(i){return gee(i)||vee(i)||d8(i)||yee()}var h8=(function(i){La(e,i);function e(t,r){var n;return On(this,e),n=oo(this,Ms(e).call(this,t,r)),n._loadMoreRowsMemoizer=ap(),n._onRowsRendered=n._onRowsRendered.bind(je(n)),n._registerChild=n._registerChild.bind(je(n)),n}return Zn(e,[{key:"resetLoadMoreRowsCache",value:function(r){this._loadMoreRowsMemoizer=ap(),r&&this._doStuff(this._lastRenderedStartIndex,this._lastRenderedStopIndex)}},{key:"render",value:function(){var r=this.props.children;return r({onRowsRendered:this._onRowsRendered,registerChild:this._registerChild})}},{key:"_loadUnloadedRanges",value:function(r){var n=this,s=this.props.loadMoreRows;r.forEach(function(a){var o=s(a);o&&o.then(function(){xee({lastRenderedStartIndex:n._lastRenderedStartIndex,lastRenderedStopIndex:n._lastRenderedStopIndex,startIndex:a.startIndex,stopIndex:a.stopIndex})&&n._registeredChild&&bee(n._registeredChild,n._lastRenderedStartIndex)})})}},{key:"_onRowsRendered",value:function(r){var n=r.startIndex,s=r.stopIndex;this._lastRenderedStartIndex=n,this._lastRenderedStopIndex=s,this._doStuff(n,s)}},{key:"_doStuff",value:function(r,n){var s,a=this,o=this.props,l=o.isRowLoaded,u=o.minimumBatchSize,c=o.rowCount,h=o.threshold,m=Tee({isRowLoaded:l,minimumBatchSize:u,rowCount:c,startIndex:Math.max(0,r-h),stopIndex:Math.min(c-1,n+h)}),g=(s=[]).concat.apply(s,_ee(m.map(function(y){var _=y.startIndex,T=y.stopIndex;return[_,T]})));this._loadMoreRowsMemoizer({callback:function(){a._loadUnloadedRanges(m)},indices:{squashedUnloadedRanges:g}})}},{key:"_registerChild",value:function(r){this._registeredChild=r}}]),e})(j.PureComponent);We(h8,"defaultProps",{minimumBatchSize:10,rowCount:0,threshold:15});h8.propTypes={};function xee(i){var e=i.lastRenderedStartIndex,t=i.lastRenderedStopIndex,r=i.startIndex,n=i.stopIndex;return!(r>t||n<e)}function Tee(i){for(var e=i.isRowLoaded,t=i.minimumBatchSize,r=i.rowCount,n=i.startIndex,s=i.stopIndex,a=[],o=null,l=null,u=n;u<=s;u++){var c=e({index:u});c?l!==null&&(a.push({startIndex:o,stopIndex:l}),o=l=null):(l=u,o===null&&(o=u))}if(l!==null){for(var h=Math.min(Math.max(l,o+t-1),r-1),m=l+1;m<=h&&!e({index:m});m++)l=m;a.push({startIndex:o,stopIndex:l})}if(a.length)for(var g=a[0];g.stopIndex-g.startIndex+1<t&&g.startIndex>0;){var y=g.startIndex-1;if(!e({index:y}))g.startIndex=y;else break}return a}function bee(i){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,t=typeof i.recomputeGridSize=="function"?i.recomputeGridSize:i.recomputeRowHeights;t?t.call(i,e):i.forceUpdate()}var NR,UR,See=(UR=NR=(function(i){La(e,i);function e(){var t,r;On(this,e);for(var n=arguments.length,s=new Array(n),a=0;a<n;a++)s[a]=arguments[a];return r=oo(this,(t=Ms(e)).call.apply(t,[this].concat(s))),We(je(r),"Grid",void 0),We(je(r),"_cellRenderer",function(o){var l=o.parent,u=o.rowIndex,c=o.style,h=o.isScrolling,m=o.isVisible,g=o.key,y=r.props.rowRenderer,_=Object.getOwnPropertyDescriptor(c,"width");return _&&_.writable&&(c.width="100%"),y({index:u,style:c,isScrolling:h,isVisible:m,key:g,parent:l})}),We(je(r),"_setRef",function(o){r.Grid=o}),We(je(r),"_onScroll",function(o){var l=o.clientHeight,u=o.scrollHeight,c=o.scrollTop,h=r.props.onScroll;h({clientHeight:l,scrollHeight:u,scrollTop:c})}),We(je(r),"_onSectionRendered",function(o){var l=o.rowOverscanStartIndex,u=o.rowOverscanStopIndex,c=o.rowStartIndex,h=o.rowStopIndex,m=r.props.onRowsRendered;m({overscanStartIndex:l,overscanStopIndex:u,startIndex:c,stopIndex:h})}),r}return Zn(e,[{key:"forceUpdateGrid",value:function(){this.Grid&&this.Grid.forceUpdate()}},{key:"getOffsetForRow",value:function(r){var n=r.alignment,s=r.index;if(this.Grid){var a=this.Grid.getOffsetForCell({alignment:n,rowIndex:s,columnIndex:0}),o=a.scrollTop;return o}return 0}},{key:"invalidateCellSizeAfterRender",value:function(r){var n=r.columnIndex,s=r.rowIndex;this.Grid&&this.Grid.invalidateCellSizeAfterRender({rowIndex:s,columnIndex:n})}},{key:"measureAllRows",value:function(){this.Grid&&this.Grid.measureAllCells()}},{key:"recomputeGridSize",value:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=r.columnIndex,s=n===void 0?0:n,a=r.rowIndex,o=a===void 0?0:a;this.Grid&&this.Grid.recomputeGridSize({rowIndex:o,columnIndex:s})}},{key:"recomputeRowHeights",value:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;this.Grid&&this.Grid.recomputeGridSize({rowIndex:r,columnIndex:0})}},{key:"scrollToPosition",value:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;this.Grid&&this.Grid.scrollToPosition({scrollTop:r})}},{key:"scrollToRow",value:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;this.Grid&&this.Grid.scrollToCell({columnIndex:0,rowIndex:r})}},{key:"render",value:function(){var r=this.props,n=r.className,s=r.noRowsRenderer,a=r.scrollToIndex,o=r.width,l=al("ReactVirtualized__List",n);return j.createElement(id,Jt({},this.props,{autoContainerWidth:!0,cellRenderer:this._cellRenderer,className:l,columnWidth:o,columnCount:1,noContentRenderer:s,onScroll:this._onScroll,onSectionRendered:this._onSectionRendered,ref:this._setRef,scrollToRow:a}))}}]),e})(j.PureComponent),We(NR,"propTypes",null),UR);We(See,"defaultProps",{autoHeight:!1,estimatedRowSize:30,onScroll:function(){},noRowsRenderer:function(){return null},onRowsRendered:function(){},overscanIndicesGetter:a8,overscanRowCount:10,scrollToAlignment:"auto",scrollToIndex:-1,style:{}});function Cee(i){if(Array.isArray(i))return i}function Eee(i,e){var t=i==null?null:typeof Symbol<"u"&&i[Symbol.iterator]||i["@@iterator"];if(t!=null){var r,n,s,a,o=[],l=!0,u=!1;try{if(s=(t=t.call(i)).next,e!==0)for(;!(l=(r=s.call(t)).done)&&(o.push(r.value),o.length!==e);l=!0);}catch(c){u=!0,n=c}finally{try{if(!l&&t.return!=null&&(a=t.return(),Object(a)!==a))return}finally{if(u)throw n}}return o}}function wee(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function kee(i,e){return Cee(i)||Eee(i,e)||d8(i,e)||wee()}function Aee(i,e,t,r){for(var n=t+1;e<=t;){var s=e+t>>>1,a=i[s];a>=r?(n=s,t=s-1):e=s+1}return n}function Iee(i,e,t,r,n){for(var s=t+1;e<=t;){var a=e+t>>>1,o=i[a];n(o,r)>=0?(s=a,t=a-1):e=a+1}return s}function Dee(i,e,t,r,n){return typeof t=="function"?Iee(i,r===void 0?0:r|0,n===void 0?i.length-1:n|0,e,t):Aee(i,t===void 0?0:t|0,r===void 0?i.length-1:r|0,e)}function Pee(i,e,t,r){for(var n=t+1;e<=t;){var s=e+t>>>1,a=i[s];a>r?(n=s,t=s-1):e=s+1}return n}function Ree(i,e,t,r,n){for(var s=t+1;e<=t;){var a=e+t>>>1,o=i[a];n(o,r)>0?(s=a,t=a-1):e=a+1}return s}function Lee(i,e,t,r,n){return typeof t=="function"?Ree(i,r===void 0?0:r|0,n===void 0?i.length-1:n|0,e,t):Pee(i,t===void 0?0:t|0,r===void 0?i.length-1:r|0,e)}function Oee(i,e,t,r){for(var n=e-1;e<=t;){var s=e+t>>>1,a=i[s];a<r?(n=s,e=s+1):t=s-1}return n}function Mee(i,e,t,r,n){for(var s=e-1;e<=t;){var a=e+t>>>1,o=i[a];n(o,r)<0?(s=a,e=a+1):t=a-1}return s}function Fee(i,e,t,r,n){return typeof t=="function"?Mee(i,r===void 0?0:r|0,n===void 0?i.length-1:n|0,e,t):Oee(i,t===void 0?0:t|0,r===void 0?i.length-1:r|0,e)}function Bee(i,e,t,r){for(var n=e-1;e<=t;){var s=e+t>>>1,a=i[s];a<=r?(n=s,e=s+1):t=s-1}return n}function Nee(i,e,t,r,n){for(var s=e-1;e<=t;){var a=e+t>>>1,o=i[a];n(o,r)<=0?(s=a,e=a+1):t=a-1}return s}function Uee(i,e,t,r,n){return typeof t=="function"?Nee(i,r===void 0?0:r|0,n===void 0?i.length-1:n|0,e,t):Bee(i,t===void 0?0:t|0,r===void 0?i.length-1:r|0,e)}function $ee(i,e,t,r){for(;e<=t;){var n=e+t>>>1,s=i[n];if(s===r)return n;s<=r?e=n+1:t=n-1}return-1}function jee(i,e,t,r,n){for(;e<=t;){var s=e+t>>>1,a=i[s],o=n(a,r);if(o===0)return s;o<=0?e=s+1:t=s-1}return-1}function zee(i,e,t,r,n){return typeof t=="function"?jee(i,r===void 0?0:r|0,n===void 0?i.length-1:n|0,e,t):$ee(i,t===void 0?0:t|0,r===void 0?i.length-1:r|0,e)}const m_={ge:Dee,gt:Lee,lt:Fee,le:Uee,eq:zee};var kf=0,Yd=1,Ly=2;function Pw(i,e,t,r,n){this.mid=i,this.left=e,this.right=t,this.leftPoints=r,this.rightPoints=n,this.count=(e?e.count:0)+(t?t.count:0)+r.length}var Z0=Pw.prototype;function xS(i,e){i.mid=e.mid,i.left=e.left,i.right=e.right,i.leftPoints=e.leftPoints,i.rightPoints=e.rightPoints,i.count=e.count}function f8(i,e){var t=k0(e);i.mid=t.mid,i.left=t.left,i.right=t.right,i.leftPoints=t.leftPoints,i.rightPoints=t.rightPoints,i.count=t.count}function $R(i,e){var t=i.intervals([]);t.push(e),f8(i,t)}function jR(i,e){var t=i.intervals([]),r=t.indexOf(e);return r<0?kf:(t.splice(r,1),f8(i,t),Yd)}Z0.intervals=function(i){return i.push.apply(i,this.leftPoints),this.left&&this.left.intervals(i),this.right&&this.right.intervals(i),i};Z0.insert=function(i){var e=this.count-this.leftPoints.length;if(this.count+=1,i[1]<this.mid)this.left?4*(this.left.count+1)>3*(e+1)?$R(this,i):this.left.insert(i):this.left=k0([i]);else if(i[0]>this.mid)this.right?4*(this.right.count+1)>3*(e+1)?$R(this,i):this.right.insert(i):this.right=k0([i]);else{var t=m_.ge(this.leftPoints,i,Rw),r=m_.ge(this.rightPoints,i,Lw);this.leftPoints.splice(t,0,i),this.rightPoints.splice(r,0,i)}};Z0.remove=function(i){var e=this.count-this.leftPoints;if(i[1]<this.mid){if(!this.left)return kf;var t=this.right?this.right.count:0;if(4*t>3*(e-1))return jR(this,i);var r=this.left.remove(i);return r===Ly?(this.left=null,this.count-=1,Yd):(r===Yd&&(this.count-=1),r)}else if(i[0]>this.mid){if(!this.right)return kf;var n=this.left?this.left.count:0;if(4*n>3*(e-1))return jR(this,i);var r=this.right.remove(i);return r===Ly?(this.right=null,this.count-=1,Yd):(r===Yd&&(this.count-=1),r)}else{if(this.count===1)return this.leftPoints[0]===i?Ly:kf;if(this.leftPoints.length===1&&this.leftPoints[0]===i){if(this.left&&this.right){for(var s=this,a=this.left;a.right;)s=a,a=a.right;if(s===this)a.right=this.right;else{var o=this.left,r=this.right;s.count-=a.count,s.right=a.left,a.left=o,a.right=r}xS(this,a),this.count=(this.left?this.left.count:0)+(this.right?this.right.count:0)+this.leftPoints.length}else this.left?xS(this,this.left):xS(this,this.right);return Yd}for(var o=m_.ge(this.leftPoints,i,Rw);o<this.leftPoints.length&&this.leftPoints[o][0]===i[0];++o)if(this.leftPoints[o]===i){this.count-=1,this.leftPoints.splice(o,1);for(var r=m_.ge(this.rightPoints,i,Lw);r<this.rightPoints.length&&this.rightPoints[r][1]===i[1];++r)if(this.rightPoints[r]===i)return this.rightPoints.splice(r,1),Yd}return kf}};function p8(i,e,t){for(var r=0;r<i.length&&i[r][0]<=e;++r){var n=t(i[r]);if(n)return n}}function m8(i,e,t){for(var r=i.length-1;r>=0&&i[r][1]>=e;--r){var n=t(i[r]);if(n)return n}}function g8(i,e){for(var t=0;t<i.length;++t){var r=e(i[t]);if(r)return r}}Z0.queryPoint=function(i,e){if(i<this.mid){if(this.left){var t=this.left.queryPoint(i,e);if(t)return t}return p8(this.leftPoints,i,e)}else if(i>this.mid){if(this.right){var t=this.right.queryPoint(i,e);if(t)return t}return m8(this.rightPoints,i,e)}else return g8(this.leftPoints,e)};Z0.queryInterval=function(i,e,t){if(i<this.mid&&this.left){var r=this.left.queryInterval(i,e,t);if(r)return r}if(e>this.mid&&this.right){var r=this.right.queryInterval(i,e,t);if(r)return r}return e<this.mid?p8(this.leftPoints,e,t):i>this.mid?m8(this.rightPoints,i,t):g8(this.leftPoints,t)};function Hee(i,e){return i-e}function Rw(i,e){var t=i[0]-e[0];return t||i[1]-e[1]}function Lw(i,e){var t=i[1]-e[1];return t||i[0]-e[0]}function k0(i){if(i.length===0)return null;for(var e=[],t=0;t<i.length;++t)e.push(i[t][0],i[t][1]);e.sort(Hee);for(var r=e[e.length>>1],n=[],s=[],a=[],t=0;t<i.length;++t){var o=i[t];o[1]<r?n.push(o):r<o[0]?s.push(o):a.push(o)}var l=a,u=a.slice();return l.sort(Rw),u.sort(Lw),new Pw(r,k0(n),k0(s),l,u)}function v8(i){this.root=i}var Ip=v8.prototype;Ip.insert=function(i){this.root?this.root.insert(i):this.root=new Pw(i[0],null,null,[i],[i])};Ip.remove=function(i){if(this.root){var e=this.root.remove(i);return e===Ly&&(this.root=null),e!==kf}return!1};Ip.queryPoint=function(i,e){if(this.root)return this.root.queryPoint(i,e)};Ip.queryInterval=function(i,e,t){if(i<=e&&this.root)return this.root.queryInterval(i,e,t)};Object.defineProperty(Ip,"count",{get:function(){return this.root?this.root.count:0}});Object.defineProperty(Ip,"intervals",{get:function(){return this.root?this.root.intervals([]):[]}});function Vee(i){return new v8(null)}var TS=(function(){function i(){On(this,i),We(this,"_columnSizeMap",{}),We(this,"_intervalTree",Vee()),We(this,"_leftMap",{})}return Zn(i,[{key:"estimateTotalHeight",value:function(t,r,n){var s=t-this.count;return this.tallestColumnSize+Math.ceil(s/r)*n}},{key:"range",value:function(t,r,n){var s=this;this._intervalTree.queryInterval(t,t+r,function(a){var o=kee(a,3),l=o[0];o[1];var u=o[2];return n(u,s._leftMap[u],l)})}},{key:"setPosition",value:function(t,r,n,s){this._intervalTree.insert([n,n+s,t]),this._leftMap[t]=r;var a=this._columnSizeMap,o=a[r];o===void 0?a[r]=n+s:a[r]=Math.max(o,n+s)}},{key:"count",get:function(){return this._intervalTree.count}},{key:"shortestColumnSize",get:function(){var t=this._columnSizeMap,r=0;for(var n in t){var s=t[n];r=r===0?s:Math.min(r,s)}return r}},{key:"tallestColumnSize",get:function(){var t=this._columnSizeMap,r=0;for(var n in t){var s=t[n];r=Math.max(r,s)}return r}}]),i})(),zR,HR;function VR(i,e){var t=Object.keys(i);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(i);e&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(i,n).enumerable})),t.push.apply(t,r)}return t}function qee(i){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?VR(t,!0).forEach(function(r){We(i,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(t)):VR(t).forEach(function(r){Object.defineProperty(i,r,Object.getOwnPropertyDescriptor(t,r))})}return i}var Wee={},Gee=150,y8=(HR=zR=(function(i){La(e,i);function e(){var t,r;On(this,e);for(var n=arguments.length,s=new Array(n),a=0;a<n;a++)s[a]=arguments[a];return r=oo(this,(t=Ms(e)).call.apply(t,[this].concat(s))),We(je(r),"state",{isScrolling:!1,scrollTop:0}),We(je(r),"_debounceResetIsScrollingId",void 0),We(je(r),"_invalidateOnUpdateStartIndex",null),We(je(r),"_invalidateOnUpdateStopIndex",null),We(je(r),"_positionCache",new TS),We(je(r),"_startIndex",null),We(je(r),"_startIndexMemoized",null),We(je(r),"_stopIndex",null),We(je(r),"_stopIndexMemoized",null),We(je(r),"_debounceResetIsScrollingCallback",function(){r.setState({isScrolling:!1})}),We(je(r),"_setScrollingContainerRef",function(o){r._scrollingContainer=o}),We(je(r),"_onScroll",function(o){var l=r.props.height,u=o.currentTarget.scrollTop,c=Math.min(Math.max(0,r._getEstimatedTotalHeight()-l),u);u===c&&(r._debounceResetIsScrolling(),r.state.scrollTop!==c&&r.setState({isScrolling:!0,scrollTop:c}))}),r}return Zn(e,[{key:"clearCellPositions",value:function(){this._positionCache=new TS,this.forceUpdate()}},{key:"invalidateCellSizeAfterRender",value:function(r){var n=r.rowIndex;this._invalidateOnUpdateStartIndex===null?(this._invalidateOnUpdateStartIndex=n,this._invalidateOnUpdateStopIndex=n):(this._invalidateOnUpdateStartIndex=Math.min(this._invalidateOnUpdateStartIndex,n),this._invalidateOnUpdateStopIndex=Math.max(this._invalidateOnUpdateStopIndex,n))}},{key:"recomputeCellPositions",value:function(){var r=this._positionCache.count-1;this._positionCache=new TS,this._populatePositionCache(0,r),this.forceUpdate()}},{key:"componentDidMount",value:function(){this._checkInvalidateOnUpdate(),this._invokeOnScrollCallback(),this._invokeOnCellsRenderedCallback()}},{key:"componentDidUpdate",value:function(r,n){this._checkInvalidateOnUpdate(),this._invokeOnScrollCallback(),this._invokeOnCellsRenderedCallback(),this.props.scrollTop!==r.scrollTop&&this._debounceResetIsScrolling()}},{key:"componentWillUnmount",value:function(){this._debounceResetIsScrollingId&&op(this._debounceResetIsScrollingId)}},{key:"render",value:function(){var r=this,n=this.props,s=n.autoHeight,a=n.cellCount,o=n.cellMeasurerCache,l=n.cellRenderer,u=n.className,c=n.height,h=n.id,m=n.keyMapper,g=n.overscanByPixels,y=n.role,_=n.style,T=n.tabIndex,E=n.width,w=n.rowDirection,D=this.state,R=D.isScrolling,A=D.scrollTop,L=[],F=this._getEstimatedTotalHeight(),B=this._positionCache.shortestColumnSize,M=this._positionCache.count,k=0,q;if(this._positionCache.range(Math.max(0,A-g),c+g*2,function(re,se,de){var me;typeof q>"u"?(k=re,q=re):(k=Math.min(k,re),q=Math.max(q,re)),L.push(l({index:re,isScrolling:R,key:m(re),parent:r,style:(me={height:o.getHeight(re)},We(me,w==="ltr"?"left":"right",se),We(me,"position","absolute"),We(me,"top",de),We(me,"width",o.getWidth(re)),me)}))}),B<A+c+g&&M<a)for(var G=Math.min(a-M,Math.ceil((A+c+g-B)/o.defaultHeight*E/o.defaultWidth)),H=M;H<M+G;H++)q=H,L.push(l({index:H,isScrolling:R,key:m(H),parent:this,style:{width:o.getWidth(H)}}));return this._startIndex=k,this._stopIndex=q,j.createElement("div",{ref:this._setScrollingContainerRef,"aria-label":this.props["aria-label"],className:al("ReactVirtualized__Masonry",u),id:h,onScroll:this._onScroll,role:y,style:qee({boxSizing:"border-box",direction:"ltr",height:s?"auto":c,overflowX:"hidden",overflowY:F<c?"hidden":"auto",position:"relative",width:E,WebkitOverflowScrolling:"touch",willChange:"transform"},_),tabIndex:T},j.createElement("div",{className:"ReactVirtualized__Masonry__innerScrollContainer",style:{width:"100%",height:F,maxWidth:"100%",maxHeight:F,overflow:"hidden",pointerEvents:R?"none":"",position:"relative"}},L))}},{key:"_checkInvalidateOnUpdate",value:function(){if(typeof this._invalidateOnUpdateStartIndex=="number"){var r=this._invalidateOnUpdateStartIndex,n=this._invalidateOnUpdateStopIndex;this._invalidateOnUpdateStartIndex=null,this._invalidateOnUpdateStopIndex=null,this._populatePositionCache(r,n),this.forceUpdate()}}},{key:"_debounceResetIsScrolling",value:function(){var r=this.props.scrollingResetTimeInterval;this._debounceResetIsScrollingId&&op(this._debounceResetIsScrollingId),this._debounceResetIsScrollingId=Dw(this._debounceResetIsScrollingCallback,r)}},{key:"_getEstimatedTotalHeight",value:function(){var r=this.props,n=r.cellCount,s=r.cellMeasurerCache,a=r.width,o=Math.max(1,Math.floor(a/s.defaultWidth));return this._positionCache.estimateTotalHeight(n,o,s.defaultHeight)}},{key:"_invokeOnScrollCallback",value:function(){var r=this.props,n=r.height,s=r.onScroll,a=this.state.scrollTop;this._onScrollMemoized!==a&&(s({clientHeight:n,scrollHeight:this._getEstimatedTotalHeight(),scrollTop:a}),this._onScrollMemoized=a)}},{key:"_invokeOnCellsRenderedCallback",value:function(){if(this._startIndexMemoized!==this._startIndex||this._stopIndexMemoized!==this._stopIndex){var r=this.props.onCellsRendered;r({startIndex:this._startIndex,stopIndex:this._stopIndex}),this._startIndexMemoized=this._startIndex,this._stopIndexMemoized=this._stopIndex}}},{key:"_populatePositionCache",value:function(r,n){for(var s=this.props,a=s.cellMeasurerCache,o=s.cellPositioner,l=r;l<=n;l++){var u=o(l),c=u.left,h=u.top;this._positionCache.setPosition(l,c,h,a.getHeight(l))}}}],[{key:"getDerivedStateFromProps",value:function(r,n){return r.scrollTop!==void 0&&n.scrollTop!==r.scrollTop?{isScrolling:!0,scrollTop:r.scrollTop}:null}}]),e})(j.PureComponent),We(zR,"propTypes",null),HR);We(y8,"defaultProps",{autoHeight:!1,keyMapper:Kee,onCellsRendered:qR,onScroll:qR,overscanByPixels:20,role:"grid",scrollingResetTimeInterval:Gee,style:Wee,tabIndex:0,rowDirection:"ltr"});function Kee(i){return i}function qR(){}J0(y8);var bS=(function(){function i(){var e=this,t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};On(this,i),We(this,"_cellMeasurerCache",void 0),We(this,"_columnIndexOffset",void 0),We(this,"_rowIndexOffset",void 0),We(this,"columnWidth",function(l){var u=l.index;e._cellMeasurerCache.columnWidth({index:u+e._columnIndexOffset})}),We(this,"rowHeight",function(l){var u=l.index;e._cellMeasurerCache.rowHeight({index:u+e._rowIndexOffset})});var r=t.cellMeasurerCache,n=t.columnIndexOffset,s=n===void 0?0:n,a=t.rowIndexOffset,o=a===void 0?0:a;this._cellMeasurerCache=r,this._columnIndexOffset=s,this._rowIndexOffset=o}return Zn(i,[{key:"clear",value:function(t,r){this._cellMeasurerCache.clear(t+this._rowIndexOffset,r+this._columnIndexOffset)}},{key:"clearAll",value:function(){this._cellMeasurerCache.clearAll()}},{key:"hasFixedHeight",value:function(){return this._cellMeasurerCache.hasFixedHeight()}},{key:"hasFixedWidth",value:function(){return this._cellMeasurerCache.hasFixedWidth()}},{key:"getHeight",value:function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return this._cellMeasurerCache.getHeight(t+this._rowIndexOffset,r+this._columnIndexOffset)}},{key:"getWidth",value:function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return this._cellMeasurerCache.getWidth(t+this._rowIndexOffset,r+this._columnIndexOffset)}},{key:"has",value:function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return this._cellMeasurerCache.has(t+this._rowIndexOffset,r+this._columnIndexOffset)}},{key:"set",value:function(t,r,n,s){this._cellMeasurerCache.set(t+this._rowIndexOffset,r+this._columnIndexOffset,n,s)}},{key:"defaultHeight",get:function(){return this._cellMeasurerCache.defaultHeight}},{key:"defaultWidth",get:function(){return this._cellMeasurerCache.defaultWidth}}]),i})();function WR(i,e){var t=Object.keys(i);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(i);e&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(i,n).enumerable})),t.push.apply(t,r)}return t}function As(i){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?WR(t,!0).forEach(function(r){We(i,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(t)):WR(t).forEach(function(r){Object.defineProperty(i,r,Object.getOwnPropertyDescriptor(t,r))})}return i}var GR=20,Ow=(function(i){La(e,i);function e(t,r){var n;On(this,e),n=oo(this,Ms(e).call(this,t,r)),We(je(n),"state",{scrollLeft:0,scrollTop:0,scrollbarSize:0,showHorizontalScrollbar:!1,showVerticalScrollbar:!1}),We(je(n),"_deferredInvalidateColumnIndex",null),We(je(n),"_deferredInvalidateRowIndex",null),We(je(n),"_bottomLeftGridRef",function(l){n._bottomLeftGrid=l}),We(je(n),"_bottomRightGridRef",function(l){n._bottomRightGrid=l}),We(je(n),"_cellRendererBottomLeftGrid",function(l){var u=l.rowIndex,c=qm(l,["rowIndex"]),h=n.props,m=h.cellRenderer,g=h.fixedRowCount,y=h.rowCount;return u===y-g?j.createElement("div",{key:c.key,style:As({},c.style,{height:GR})}):m(As({},c,{parent:je(n),rowIndex:u+g}))}),We(je(n),"_cellRendererBottomRightGrid",function(l){var u=l.columnIndex,c=l.rowIndex,h=qm(l,["columnIndex","rowIndex"]),m=n.props,g=m.cellRenderer,y=m.fixedColumnCount,_=m.fixedRowCount;return g(As({},h,{columnIndex:u+y,parent:je(n),rowIndex:c+_}))}),We(je(n),"_cellRendererTopRightGrid",function(l){var u=l.columnIndex,c=qm(l,["columnIndex"]),h=n.props,m=h.cellRenderer,g=h.columnCount,y=h.fixedColumnCount;return u===g-y?j.createElement("div",{key:c.key,style:As({},c.style,{width:GR})}):m(As({},c,{columnIndex:u+y,parent:je(n)}))}),We(je(n),"_columnWidthRightGrid",function(l){var u=l.index,c=n.props,h=c.columnCount,m=c.fixedColumnCount,g=c.columnWidth,y=n.state,_=y.scrollbarSize,T=y.showHorizontalScrollbar;return T&&u===h-m?_:typeof g=="function"?g({index:u+m}):g}),We(je(n),"_onScroll",function(l){var u=l.scrollLeft,c=l.scrollTop;n.setState({scrollLeft:u,scrollTop:c});var h=n.props.onScroll;h&&h(l)}),We(je(n),"_onScrollbarPresenceChange",function(l){var u=l.horizontal,c=l.size,h=l.vertical,m=n.state,g=m.showHorizontalScrollbar,y=m.showVerticalScrollbar;if(u!==g||h!==y){n.setState({scrollbarSize:c,showHorizontalScrollbar:u,showVerticalScrollbar:h});var _=n.props.onScrollbarPresenceChange;typeof _=="function"&&_({horizontal:u,size:c,vertical:h})}}),We(je(n),"_onScrollLeft",function(l){var u=l.scrollLeft;n._onScroll({scrollLeft:u,scrollTop:n.state.scrollTop})}),We(je(n),"_onScrollTop",function(l){var u=l.scrollTop;n._onScroll({scrollTop:u,scrollLeft:n.state.scrollLeft})}),We(je(n),"_rowHeightBottomGrid",function(l){var u=l.index,c=n.props,h=c.fixedRowCount,m=c.rowCount,g=c.rowHeight,y=n.state,_=y.scrollbarSize,T=y.showVerticalScrollbar;return T&&u===m-h?_:typeof g=="function"?g({index:u+h}):g}),We(je(n),"_topLeftGridRef",function(l){n._topLeftGrid=l}),We(je(n),"_topRightGridRef",function(l){n._topRightGrid=l});var s=t.deferredMeasurementCache,a=t.fixedColumnCount,o=t.fixedRowCount;return n._maybeCalculateCachedStyles(!0),s&&(n._deferredMeasurementCacheBottomLeftGrid=o>0?new bS({cellMeasurerCache:s,columnIndexOffset:0,rowIndexOffset:o}):s,n._deferredMeasurementCacheBottomRightGrid=a>0||o>0?new bS({cellMeasurerCache:s,columnIndexOffset:a,rowIndexOffset:o}):s,n._deferredMeasurementCacheTopRightGrid=a>0?new bS({cellMeasurerCache:s,columnIndexOffset:a,rowIndexOffset:0}):s),n}return Zn(e,[{key:"forceUpdateGrids",value:function(){this._bottomLeftGrid&&this._bottomLeftGrid.forceUpdate(),this._bottomRightGrid&&this._bottomRightGrid.forceUpdate(),this._topLeftGrid&&this._topLeftGrid.forceUpdate(),this._topRightGrid&&this._topRightGrid.forceUpdate()}},{key:"invalidateCellSizeAfterRender",value:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=r.columnIndex,s=n===void 0?0:n,a=r.rowIndex,o=a===void 0?0:a;this._deferredInvalidateColumnIndex=typeof this._deferredInvalidateColumnIndex=="number"?Math.min(this._deferredInvalidateColumnIndex,s):s,this._deferredInvalidateRowIndex=typeof this._deferredInvalidateRowIndex=="number"?Math.min(this._deferredInvalidateRowIndex,o):o}},{key:"measureAllCells",value:function(){this._bottomLeftGrid&&this._bottomLeftGrid.measureAllCells(),this._bottomRightGrid&&this._bottomRightGrid.measureAllCells(),this._topLeftGrid&&this._topLeftGrid.measureAllCells(),this._topRightGrid&&this._topRightGrid.measureAllCells()}},{key:"recomputeGridSize",value:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=r.columnIndex,s=n===void 0?0:n,a=r.rowIndex,o=a===void 0?0:a,l=this.props,u=l.fixedColumnCount,c=l.fixedRowCount,h=Math.max(0,s-u),m=Math.max(0,o-c);this._bottomLeftGrid&&this._bottomLeftGrid.recomputeGridSize({columnIndex:s,rowIndex:m}),this._bottomRightGrid&&this._bottomRightGrid.recomputeGridSize({columnIndex:h,rowIndex:m}),this._topLeftGrid&&this._topLeftGrid.recomputeGridSize({columnIndex:s,rowIndex:o}),this._topRightGrid&&this._topRightGrid.recomputeGridSize({columnIndex:h,rowIndex:o}),this._leftGridWidth=null,this._topGridHeight=null,this._maybeCalculateCachedStyles(!0)}},{key:"componentDidMount",value:function(){var r=this.props,n=r.scrollLeft,s=r.scrollTop;if(n>0||s>0){var a={};n>0&&(a.scrollLeft=n),s>0&&(a.scrollTop=s),this.setState(a)}this._handleInvalidatedGridSize()}},{key:"componentDidUpdate",value:function(){this._handleInvalidatedGridSize()}},{key:"render",value:function(){var r=this.props,n=r.onScroll,s=r.onSectionRendered;r.onScrollbarPresenceChange,r.scrollLeft;var a=r.scrollToColumn;r.scrollTop;var o=r.scrollToRow,l=qm(r,["onScroll","onSectionRendered","onScrollbarPresenceChange","scrollLeft","scrollToColumn","scrollTop","scrollToRow"]);if(this._prepareForRender(),this.props.width===0||this.props.height===0)return null;var u=this.state,c=u.scrollLeft,h=u.scrollTop;return j.createElement("div",{style:this._containerOuterStyle},j.createElement("div",{style:this._containerTopStyle},this._renderTopLeftGrid(l),this._renderTopRightGrid(As({},l,{onScroll:n,scrollLeft:c}))),j.createElement("div",{style:this._containerBottomStyle},this._renderBottomLeftGrid(As({},l,{onScroll:n,scrollTop:h})),this._renderBottomRightGrid(As({},l,{onScroll:n,onSectionRendered:s,scrollLeft:c,scrollToColumn:a,scrollToRow:o,scrollTop:h}))))}},{key:"_getBottomGridHeight",value:function(r){var n=r.height,s=this._getTopGridHeight(r);return n-s}},{key:"_getLeftGridWidth",value:function(r){var n=r.fixedColumnCount,s=r.columnWidth;if(this._leftGridWidth==null)if(typeof s=="function"){for(var a=0,o=0;o<n;o++)a+=s({index:o});this._leftGridWidth=a}else this._leftGridWidth=s*n;return this._leftGridWidth}},{key:"_getRightGridWidth",value:function(r){var n=r.width,s=this._getLeftGridWidth(r);return n-s}},{key:"_getTopGridHeight",value:function(r){var n=r.fixedRowCount,s=r.rowHeight;if(this._topGridHeight==null)if(typeof s=="function"){for(var a=0,o=0;o<n;o++)a+=s({index:o});this._topGridHeight=a}else this._topGridHeight=s*n;return this._topGridHeight}},{key:"_handleInvalidatedGridSize",value:function(){if(typeof this._deferredInvalidateColumnIndex=="number"){var r=this._deferredInvalidateColumnIndex,n=this._deferredInvalidateRowIndex;this._deferredInvalidateColumnIndex=null,this._deferredInvalidateRowIndex=null,this.recomputeGridSize({columnIndex:r,rowIndex:n}),this.forceUpdate()}}},{key:"_maybeCalculateCachedStyles",value:function(r){var n=this.props,s=n.columnWidth,a=n.enableFixedColumnScroll,o=n.enableFixedRowScroll,l=n.height,u=n.fixedColumnCount,c=n.fixedRowCount,h=n.rowHeight,m=n.style,g=n.styleBottomLeftGrid,y=n.styleBottomRightGrid,_=n.styleTopLeftGrid,T=n.styleTopRightGrid,E=n.width,w=r||l!==this._lastRenderedHeight||E!==this._lastRenderedWidth,D=r||s!==this._lastRenderedColumnWidth||u!==this._lastRenderedFixedColumnCount,R=r||c!==this._lastRenderedFixedRowCount||h!==this._lastRenderedRowHeight;(r||w||m!==this._lastRenderedStyle)&&(this._containerOuterStyle=As({height:l,overflow:"visible",width:E},m)),(r||w||R)&&(this._containerTopStyle={height:this._getTopGridHeight(this.props),position:"relative",width:E},this._containerBottomStyle={height:l-this._getTopGridHeight(this.props),overflow:"visible",position:"relative",width:E}),(r||g!==this._lastRenderedStyleBottomLeftGrid)&&(this._bottomLeftGridStyle=As({left:0,overflowX:"hidden",overflowY:a?"auto":"hidden",position:"absolute"},g)),(r||D||y!==this._lastRenderedStyleBottomRightGrid)&&(this._bottomRightGridStyle=As({left:this._getLeftGridWidth(this.props),position:"absolute"},y)),(r||_!==this._lastRenderedStyleTopLeftGrid)&&(this._topLeftGridStyle=As({left:0,overflowX:"hidden",overflowY:"hidden",position:"absolute",top:0},_)),(r||D||T!==this._lastRenderedStyleTopRightGrid)&&(this._topRightGridStyle=As({left:this._getLeftGridWidth(this.props),overflowX:o?"auto":"hidden",overflowY:"hidden",position:"absolute",top:0},T)),this._lastRenderedColumnWidth=s,this._lastRenderedFixedColumnCount=u,this._lastRenderedFixedRowCount=c,this._lastRenderedHeight=l,this._lastRenderedRowHeight=h,this._lastRenderedStyle=m,this._lastRenderedStyleBottomLeftGrid=g,this._lastRenderedStyleBottomRightGrid=y,this._lastRenderedStyleTopLeftGrid=_,this._lastRenderedStyleTopRightGrid=T,this._lastRenderedWidth=E}},{key:"_prepareForRender",value:function(){(this._lastRenderedColumnWidth!==this.props.columnWidth||this._lastRenderedFixedColumnCount!==this.props.fixedColumnCount)&&(this._leftGridWidth=null),(this._lastRenderedFixedRowCount!==this.props.fixedRowCount||this._lastRenderedRowHeight!==this.props.rowHeight)&&(this._topGridHeight=null),this._maybeCalculateCachedStyles(),this._lastRenderedColumnWidth=this.props.columnWidth,this._lastRenderedFixedColumnCount=this.props.fixedColumnCount,this._lastRenderedFixedRowCount=this.props.fixedRowCount,this._lastRenderedRowHeight=this.props.rowHeight}},{key:"_renderBottomLeftGrid",value:function(r){var n=r.enableFixedColumnScroll,s=r.fixedColumnCount,a=r.fixedRowCount,o=r.rowCount,l=r.hideBottomLeftGridScrollbar,u=this.state.showVerticalScrollbar;if(!s)return null;var c=u?1:0,h=this._getBottomGridHeight(r),m=this._getLeftGridWidth(r),g=this.state.showVerticalScrollbar?this.state.scrollbarSize:0,y=l?m+g:m,_=j.createElement(id,Jt({},r,{cellRenderer:this._cellRendererBottomLeftGrid,className:this.props.classNameBottomLeftGrid,columnCount:s,deferredMeasurementCache:this._deferredMeasurementCacheBottomLeftGrid,height:h,onScroll:n?this._onScrollTop:void 0,ref:this._bottomLeftGridRef,rowCount:Math.max(0,o-a)+c,rowHeight:this._rowHeightBottomGrid,style:this._bottomLeftGridStyle,tabIndex:null,width:y}));return l?j.createElement("div",{className:"BottomLeftGrid_ScrollWrapper",style:As({},this._bottomLeftGridStyle,{height:h,width:m,overflowY:"hidden"})},_):_}},{key:"_renderBottomRightGrid",value:function(r){var n=r.columnCount,s=r.fixedColumnCount,a=r.fixedRowCount,o=r.rowCount,l=r.scrollToColumn,u=r.scrollToRow;return j.createElement(id,Jt({},r,{cellRenderer:this._cellRendererBottomRightGrid,className:this.props.classNameBottomRightGrid,columnCount:Math.max(0,n-s),columnWidth:this._columnWidthRightGrid,deferredMeasurementCache:this._deferredMeasurementCacheBottomRightGrid,height:this._getBottomGridHeight(r),onScroll:this._onScroll,onScrollbarPresenceChange:this._onScrollbarPresenceChange,ref:this._bottomRightGridRef,rowCount:Math.max(0,o-a),rowHeight:this._rowHeightBottomGrid,scrollToColumn:l-s,scrollToRow:u-a,style:this._bottomRightGridStyle,width:this._getRightGridWidth(r)}))}},{key:"_renderTopLeftGrid",value:function(r){var n=r.fixedColumnCount,s=r.fixedRowCount;return!n||!s?null:j.createElement(id,Jt({},r,{className:this.props.classNameTopLeftGrid,columnCount:n,height:this._getTopGridHeight(r),ref:this._topLeftGridRef,rowCount:s,style:this._topLeftGridStyle,tabIndex:null,width:this._getLeftGridWidth(r)}))}},{key:"_renderTopRightGrid",value:function(r){var n=r.columnCount,s=r.enableFixedRowScroll,a=r.fixedColumnCount,o=r.fixedRowCount,l=r.scrollLeft,u=r.hideTopRightGridScrollbar,c=this.state,h=c.showHorizontalScrollbar,m=c.scrollbarSize;if(!o)return null;var g=h?1:0,y=this._getTopGridHeight(r),_=this._getRightGridWidth(r),T=h?m:0,E=y,w=this._topRightGridStyle;u&&(E=y+T,w=As({},this._topRightGridStyle,{left:0}));var D=j.createElement(id,Jt({},r,{cellRenderer:this._cellRendererTopRightGrid,className:this.props.classNameTopRightGrid,columnCount:Math.max(0,n-a)+g,columnWidth:this._columnWidthRightGrid,deferredMeasurementCache:this._deferredMeasurementCacheTopRightGrid,height:E,onScroll:s?this._onScrollLeft:void 0,ref:this._topRightGridRef,rowCount:o,scrollLeft:l,style:w,tabIndex:null,width:_}));return u?j.createElement("div",{className:"TopRightGrid_ScrollWrapper",style:As({},this._topRightGridStyle,{height:y,width:_,overflowX:"hidden"})},D):D}}],[{key:"getDerivedStateFromProps",value:function(r,n){return r.scrollLeft!==n.scrollLeft||r.scrollTop!==n.scrollTop?{scrollLeft:r.scrollLeft!=null&&r.scrollLeft>=0?r.scrollLeft:n.scrollLeft,scrollTop:r.scrollTop!=null&&r.scrollTop>=0?r.scrollTop:n.scrollTop}:null}}]),e})(j.PureComponent);We(Ow,"defaultProps",{classNameBottomLeftGrid:"",classNameBottomRightGrid:"",classNameTopLeftGrid:"",classNameTopRightGrid:"",enableFixedColumnScroll:!1,enableFixedRowScroll:!1,fixedColumnCount:0,fixedRowCount:0,scrollToColumn:-1,scrollToRow:-1,style:{},styleBottomLeftGrid:{},styleBottomRightGrid:{},styleTopLeftGrid:{},styleTopRightGrid:{},hideTopRightGridScrollbar:!1,hideBottomLeftGridScrollbar:!1});Ow.propTypes={};J0(Ow);function Xee(i){var e=i.dataKey,t=i.rowData;return typeof t.get=="function"?t.get(e):t[e]}function Yee(i){var e=i.cellData;return e==null?"":String(e)}function _8(i){var e=i.className,t=i.columns,r=i.style;return j.createElement("div",{className:e,role:"row",style:r},t)}_8.propTypes=null;var nd={ASC:"ASC",DESC:"DESC"};function x8(i){var e=i.sortDirection,t=al("ReactVirtualized__Table__sortableHeaderIcon",{"ReactVirtualized__Table__sortableHeaderIcon--ASC":e===nd.ASC,"ReactVirtualized__Table__sortableHeaderIcon--DESC":e===nd.DESC});return j.createElement("svg",{className:t,width:18,height:18,viewBox:"0 0 24 24"},e===nd.ASC?j.createElement("path",{d:"M7 14l5-5 5 5z"}):j.createElement("path",{d:"M7 10l5 5 5-5z"}),j.createElement("path",{d:"M0 0h24v24H0z",fill:"none"}))}x8.propTypes={};function T8(i){var e=i.dataKey,t=i.label,r=i.sortBy,n=i.sortDirection,s=r===e,a=[j.createElement("span",{className:"ReactVirtualized__Table__headerTruncatedText",key:"label",title:typeof t=="string"?t:null},t)];return s&&a.push(j.createElement(x8,{key:"SortIndicator",sortDirection:n})),a}T8.propTypes=null;function b8(i){var e=i.className,t=i.columns,r=i.index,n=i.key,s=i.onRowClick,a=i.onRowDoubleClick,o=i.onRowMouseOut,l=i.onRowMouseOver,u=i.onRowRightClick,c=i.rowData,h=i.style,m={"aria-rowindex":r+1};return(s||a||o||l||u)&&(m["aria-label"]="row",m.tabIndex=0,s&&(m.onClick=function(g){return s({event:g,index:r,rowData:c})}),a&&(m.onDoubleClick=function(g){return a({event:g,index:r,rowData:c})}),o&&(m.onMouseOut=function(g){return o({event:g,index:r,rowData:c})}),l&&(m.onMouseOver=function(g){return l({event:g,index:r,rowData:c})}),u&&(m.onContextMenu=function(g){return u({event:g,index:r,rowData:c})})),j.createElement("div",Jt({},m,{className:e,key:n,role:"row",style:h}),t)}b8.propTypes=null;var Mw=(function(i){La(e,i);function e(){return On(this,e),oo(this,Ms(e).apply(this,arguments))}return e})(j.Component);We(Mw,"defaultProps",{cellDataGetter:Xee,cellRenderer:Yee,defaultSortDirection:nd.ASC,flexGrow:0,flexShrink:1,headerRenderer:T8,style:{}});Mw.propTypes={};function KR(i,e){var t=Object.keys(i);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(i);e&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(i,n).enumerable})),t.push.apply(t,r)}return t}function cf(i){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?KR(t,!0).forEach(function(r){We(i,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(t)):KR(t).forEach(function(r){Object.defineProperty(i,r,Object.getOwnPropertyDescriptor(t,r))})}return i}var Fw=(function(i){La(e,i);function e(t){var r;return On(this,e),r=oo(this,Ms(e).call(this,t)),r.state={scrollbarWidth:0},r._createColumn=r._createColumn.bind(je(r)),r._createRow=r._createRow.bind(je(r)),r._onScroll=r._onScroll.bind(je(r)),r._onSectionRendered=r._onSectionRendered.bind(je(r)),r._setRef=r._setRef.bind(je(r)),r}return Zn(e,[{key:"forceUpdateGrid",value:function(){this.Grid&&this.Grid.forceUpdate()}},{key:"getOffsetForRow",value:function(r){var n=r.alignment,s=r.index;if(this.Grid){var a=this.Grid.getOffsetForCell({alignment:n,rowIndex:s}),o=a.scrollTop;return o}return 0}},{key:"invalidateCellSizeAfterRender",value:function(r){var n=r.columnIndex,s=r.rowIndex;this.Grid&&this.Grid.invalidateCellSizeAfterRender({rowIndex:s,columnIndex:n})}},{key:"measureAllRows",value:function(){this.Grid&&this.Grid.measureAllCells()}},{key:"recomputeGridSize",value:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=r.columnIndex,s=n===void 0?0:n,a=r.rowIndex,o=a===void 0?0:a;this.Grid&&this.Grid.recomputeGridSize({rowIndex:o,columnIndex:s})}},{key:"recomputeRowHeights",value:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;this.Grid&&this.Grid.recomputeGridSize({rowIndex:r})}},{key:"scrollToPosition",value:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;this.Grid&&this.Grid.scrollToPosition({scrollTop:r})}},{key:"scrollToRow",value:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;this.Grid&&this.Grid.scrollToCell({columnIndex:0,rowIndex:r})}},{key:"getScrollbarWidth",value:function(){if(this.Grid){var r=kp.findDOMNode(this.Grid),n=r.clientWidth||0,s=r.offsetWidth||0;return s-n}return 0}},{key:"componentDidMount",value:function(){this._setScrollbarWidth()}},{key:"componentDidUpdate",value:function(){this._setScrollbarWidth()}},{key:"render",value:function(){var r=this,n=this.props,s=n.children,a=n.className,o=n.disableHeader,l=n.gridClassName,u=n.gridStyle,c=n.headerHeight,h=n.headerRowRenderer,m=n.height,g=n.id,y=n.noRowsRenderer,_=n.rowClassName,T=n.rowStyle,E=n.scrollToIndex,w=n.style,D=n.width,R=this.state.scrollbarWidth,A=o?m:m-c,L=typeof _=="function"?_({index:-1}):_,F=typeof T=="function"?T({index:-1}):T;return this._cachedColumnStyles=[],j.Children.toArray(s).forEach(function(B,M){var k=r._getFlexStyleForColumn(B,B.props.style);r._cachedColumnStyles[M]=cf({overflow:"hidden"},k)}),j.createElement("div",{"aria-label":this.props["aria-label"],"aria-labelledby":this.props["aria-labelledby"],"aria-colcount":j.Children.toArray(s).length,"aria-rowcount":this.props.rowCount,className:al("ReactVirtualized__Table",a),id:g,role:"grid",style:w},!o&&h({className:al("ReactVirtualized__Table__headerRow",L),columns:this._getHeaderColumns(),style:cf({height:c,overflow:"hidden",paddingRight:R,width:D},F)}),j.createElement(id,Jt({},this.props,{"aria-readonly":null,autoContainerWidth:!0,className:al("ReactVirtualized__Table__Grid",l),cellRenderer:this._createRow,columnWidth:D,columnCount:1,height:A,id:void 0,noContentRenderer:y,onScroll:this._onScroll,onSectionRendered:this._onSectionRendered,ref:this._setRef,role:"rowgroup",scrollbarWidth:R,scrollToRow:E,style:cf({},u,{overflowX:"hidden"})})))}},{key:"_createColumn",value:function(r){var n=r.column,s=r.columnIndex,a=r.isScrolling,o=r.parent,l=r.rowData,u=r.rowIndex,c=this.props.onColumnClick,h=n.props,m=h.cellDataGetter,g=h.cellRenderer,y=h.className,_=h.columnData,T=h.dataKey,E=h.id,w=m({columnData:_,dataKey:T,rowData:l}),D=g({cellData:w,columnData:_,columnIndex:s,dataKey:T,isScrolling:a,parent:o,rowData:l,rowIndex:u}),R=function(B){c&&c({columnData:_,dataKey:T,event:B})},A=this._cachedColumnStyles[s],L=typeof D=="string"?D:null;return j.createElement("div",{"aria-colindex":s+1,"aria-describedby":E,className:al("ReactVirtualized__Table__rowColumn",y),key:"Row"+u+"-Col"+s,onClick:R,role:"gridcell",style:A,title:L},D)}},{key:"_createHeader",value:function(r){var n=r.column,s=r.index,a=this.props,o=a.headerClassName,l=a.headerStyle,u=a.onHeaderClick,c=a.sort,h=a.sortBy,m=a.sortDirection,g=n.props,y=g.columnData,_=g.dataKey,T=g.defaultSortDirection,E=g.disableSort,w=g.headerRenderer,D=g.id,R=g.label,A=!E&&c,L=al("ReactVirtualized__Table__headerColumn",o,n.props.headerClassName,{ReactVirtualized__Table__sortableHeaderColumn:A}),F=this._getFlexStyleForColumn(n,cf({},l,{},n.props.headerStyle)),B=w({columnData:y,dataKey:_,disableSort:E,label:R,sortBy:h,sortDirection:m}),M,k,q,G,H;if(A||u){var re=h!==_,se=re?T:m===nd.DESC?nd.ASC:nd.DESC,de=function(oe){A&&c({defaultSortDirection:T,event:oe,sortBy:_,sortDirection:se}),u&&u({columnData:y,dataKey:_,event:oe})},me=function(oe){(oe.key==="Enter"||oe.key===" ")&&de(oe)};H=n.props["aria-label"]||R||_,G="none",q=0,M=de,k=me}return h===_&&(G=m===nd.ASC?"ascending":"descending"),j.createElement("div",{"aria-label":H,"aria-sort":G,className:L,id:D,key:"Header-Col"+s,onClick:M,onKeyDown:k,role:"columnheader",style:F,tabIndex:q},B)}},{key:"_createRow",value:function(r){var n=this,s=r.rowIndex,a=r.isScrolling,o=r.key,l=r.parent,u=r.style,c=this.props,h=c.children,m=c.onRowClick,g=c.onRowDoubleClick,y=c.onRowRightClick,_=c.onRowMouseOver,T=c.onRowMouseOut,E=c.rowClassName,w=c.rowGetter,D=c.rowRenderer,R=c.rowStyle,A=this.state.scrollbarWidth,L=typeof E=="function"?E({index:s}):E,F=typeof R=="function"?R({index:s}):R,B=w({index:s}),M=j.Children.toArray(h).map(function(G,H){return n._createColumn({column:G,columnIndex:H,isScrolling:a,parent:l,rowData:B,rowIndex:s,scrollbarWidth:A})}),k=al("ReactVirtualized__Table__row",L),q=cf({},u,{height:this._getRowHeight(s),overflow:"hidden",paddingRight:A},F);return D({className:k,columns:M,index:s,isScrolling:a,key:o,onRowClick:m,onRowDoubleClick:g,onRowRightClick:y,onRowMouseOver:_,onRowMouseOut:T,rowData:B,style:q})}},{key:"_getFlexStyleForColumn",value:function(r){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s="".concat(r.props.flexGrow," ").concat(r.props.flexShrink," ").concat(r.props.width,"px"),a=cf({},n,{flex:s,msFlex:s,WebkitFlex:s});return r.props.maxWidth&&(a.maxWidth=r.props.maxWidth),r.props.minWidth&&(a.minWidth=r.props.minWidth),a}},{key:"_getHeaderColumns",value:function(){var r=this,n=this.props,s=n.children,a=n.disableHeader,o=a?[]:j.Children.toArray(s);return o.map(function(l,u){return r._createHeader({column:l,index:u})})}},{key:"_getRowHeight",value:function(r){var n=this.props.rowHeight;return typeof n=="function"?n({index:r}):n}},{key:"_onScroll",value:function(r){var n=r.clientHeight,s=r.scrollHeight,a=r.scrollTop,o=this.props.onScroll;o({clientHeight:n,scrollHeight:s,scrollTop:a})}},{key:"_onSectionRendered",value:function(r){var n=r.rowOverscanStartIndex,s=r.rowOverscanStopIndex,a=r.rowStartIndex,o=r.rowStopIndex,l=this.props.onRowsRendered;l({overscanStartIndex:n,overscanStopIndex:s,startIndex:a,stopIndex:o})}},{key:"_setRef",value:function(r){this.Grid=r}},{key:"_setScrollbarWidth",value:function(){var r=this.getScrollbarWidth();this.setState({scrollbarWidth:r})}}]),e})(j.PureComponent);We(Fw,"defaultProps",{disableHeader:!1,estimatedRowSize:30,headerHeight:0,headerStyle:{},noRowsRenderer:function(){return null},onRowsRendered:function(){return null},onScroll:function(){return null},overscanIndicesGetter:a8,overscanRowCount:10,rowRenderer:b8,headerRowRenderer:_8,rowStyle:{},scrollToAlignment:"auto",scrollToIndex:-1,style:{}});Fw.propTypes={};var ad=[],i0=null,hh=null;function S8(){hh&&(hh=null,document.body&&i0!=null&&(document.body.style.pointerEvents=i0),i0=null)}function Qee(){S8(),ad.forEach(function(i){return i.__resetIsScrolling()})}function Jee(){hh&&op(hh);var i=0;ad.forEach(function(e){i=Math.max(i,e.props.scrollingResetTimeInterval)}),hh=Dw(Qee,i)}function C8(i){i.currentTarget===window&&i0==null&&document.body&&(i0=document.body.style.pointerEvents,document.body.style.pointerEvents="none"),Jee(),ad.forEach(function(e){e.props.scrollElement===i.currentTarget&&e.__handleWindowScrollEvent()})}function XR(i,e){ad.some(function(t){return t.props.scrollElement===e})||e.addEventListener("scroll",C8),ad.push(i)}function YR(i,e){ad=ad.filter(function(t){return t!==i}),ad.length||(e.removeEventListener("scroll",C8),hh&&(op(hh),S8()))}var Bw=function(e){return e===window},Wm=function(e){return e.getBoundingClientRect()};function QR(i,e){if(i)if(Bw(i)){var t=window,r=t.innerHeight,n=t.innerWidth;return{height:typeof r=="number"?r:0,width:typeof n=="number"?n:0}}else return Wm(i);else return{height:e.serverHeight,width:e.serverWidth}}function Zee(i,e){if(Bw(e)&&document.documentElement){var t=document.documentElement,r=Wm(i),n=Wm(t);return{top:r.top-n.top,left:r.left-n.left}}else{var s=E8(e),a=Wm(i),o=Wm(e);return{top:a.top+s.top-o.top,left:a.left+s.left-o.left}}}function E8(i){return Bw(i)&&document.documentElement?{top:"scrollY"in window?window.scrollY:document.documentElement.scrollTop,left:"scrollX"in window?window.scrollX:document.documentElement.scrollLeft}:{top:i.scrollTop,left:i.scrollLeft}}var JR,ZR;function eL(i,e){var t=Object.keys(i);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(i);e&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(i,n).enumerable})),t.push.apply(t,r)}return t}function ete(i){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?eL(t,!0).forEach(function(r){We(i,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(t)):eL(t).forEach(function(r){Object.defineProperty(i,r,Object.getOwnPropertyDescriptor(t,r))})}return i}var tte=150,w8=function(){return typeof window<"u"?window:void 0},rte=(ZR=JR=(function(i){La(e,i);function e(){var t,r;On(this,e);for(var n=arguments.length,s=new Array(n),a=0;a<n;a++)s[a]=arguments[a];return r=oo(this,(t=Ms(e)).call.apply(t,[this].concat(s))),We(je(r),"_window",w8()),We(je(r),"_isMounted",!1),We(je(r),"_positionFromTop",0),We(je(r),"_positionFromLeft",0),We(je(r),"_detectElementResize",void 0),We(je(r),"_child",void 0),We(je(r),"state",ete({},QR(r.props.scrollElement,r.props),{isScrolling:!1,scrollLeft:0,scrollTop:0})),We(je(r),"_registerChild",function(o){o&&!(o instanceof Element)&&console.warn("WindowScroller registerChild expects to be passed Element or null"),r._child=o,r.updatePosition()}),We(je(r),"_onChildScroll",function(o){var l=o.scrollTop;if(r.state.scrollTop!==l){var u=r.props.scrollElement;u&&(typeof u.scrollTo=="function"?u.scrollTo(0,l+r._positionFromTop):u.scrollTop=l+r._positionFromTop)}}),We(je(r),"_registerResizeListener",function(o){o===window?window.addEventListener("resize",r._onResize,!1):r._detectElementResize.addResizeListener(o,r._onResize)}),We(je(r),"_unregisterResizeListener",function(o){o===window?window.removeEventListener("resize",r._onResize,!1):o&&r._detectElementResize.removeResizeListener(o,r._onResize)}),We(je(r),"_onResize",function(){r.updatePosition()}),We(je(r),"__handleWindowScrollEvent",function(){if(r._isMounted){var o=r.props.onScroll,l=r.props.scrollElement;if(l){var u=E8(l),c=Math.max(0,u.left-r._positionFromLeft),h=Math.max(0,u.top-r._positionFromTop);r.setState({isScrolling:!0,scrollLeft:c,scrollTop:h}),o({scrollLeft:c,scrollTop:h})}}}),We(je(r),"__resetIsScrolling",function(){r.setState({isScrolling:!1})}),r}return Zn(e,[{key:"updatePosition",value:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.props.scrollElement,n=this.props.onResize,s=this.state,a=s.height,o=s.width,l=this._child||kp.findDOMNode(this);if(l instanceof Element&&r){var u=Zee(l,r);this._positionFromTop=u.top,this._positionFromLeft=u.left}var c=QR(r,this.props);(a!==c.height||o!==c.width)&&(this.setState({height:c.height,width:c.width}),n({height:c.height,width:c.width}))}},{key:"componentDidMount",value:function(){var r=this.props.scrollElement;this._detectElementResize=l8(),this.updatePosition(r),r&&(XR(this,r),this._registerResizeListener(r)),this._isMounted=!0}},{key:"componentDidUpdate",value:function(r,n){var s=this.props.scrollElement,a=r.scrollElement;a!==s&&a!=null&&s!=null&&(this.updatePosition(s),YR(this,a),XR(this,s),this._unregisterResizeListener(a),this._registerResizeListener(s))}},{key:"componentWillUnmount",value:function(){var r=this.props.scrollElement;r&&(YR(this,r),this._unregisterResizeListener(r)),this._isMounted=!1}},{key:"render",value:function(){var r=this.props.children,n=this.state,s=n.isScrolling,a=n.scrollTop,o=n.scrollLeft,l=n.height,u=n.width;return r({onChildScroll:this._onChildScroll,registerChild:this._registerChild,height:l,isScrolling:s,scrollLeft:o,scrollTop:a,width:u})}}]),e})(j.PureComponent),We(JR,"propTypes",null),ZR);We(rte,"defaultProps",{onResize:function(){},onScroll:function(){},scrollingResetTimeInterval:tte,scrollElement:w8(),serverHeight:0,serverWidth:0});const ite={500:"#e91e63"};function nte(i){return or("MuiIconButton",i)}const tL=ar("MuiIconButton",["root","disabled","colorInherit","colorPrimary","colorSecondary","colorError","colorInfo","colorSuccess","colorWarning","edgeStart","edgeEnd","sizeSmall","sizeMedium","sizeLarge","loading","loadingIndicator","loadingWrapper"]),ste=i=>{const{classes:e,disabled:t,color:r,edge:n,size:s,loading:a}=i,o={root:["root",a&&"loading",t&&"disabled",r!=="default"&&`color${ht(r)}`,n&&`edge${ht(n)}`,`size${ht(s)}`],loadingIndicator:["loadingIndicator"],loadingWrapper:["loadingWrapper"]};return lr(o,nte,e)},ate=ft(wh,{name:"MuiIconButton",slot:"Root",overridesResolver:(i,e)=>{const{ownerState:t}=i;return[e.root,t.loading&&e.loading,t.color!=="default"&&e[`color${ht(t.color)}`],t.edge&&e[`edge${ht(t.edge)}`],e[`size${ht(t.size)}`]]}})(Tr(({theme:i})=>({textAlign:"center",flex:"0 0 auto",fontSize:i.typography.pxToRem(24),padding:8,borderRadius:"50%",color:(i.vars||i).palette.action.active,transition:i.transitions.create("background-color",{duration:i.transitions.duration.shortest}),variants:[{props:e=>!e.disableRipple,style:{"--IconButton-hoverBg":i.vars?`rgba(${i.vars.palette.action.activeChannel} / ${i.vars.palette.action.hoverOpacity})`:Gr(i.palette.action.active,i.palette.action.hoverOpacity),"&:hover":{backgroundColor:"var(--IconButton-hoverBg)","@media (hover: none)":{backgroundColor:"transparent"}}}},{props:{edge:"start"},style:{marginLeft:-12}},{props:{edge:"start",size:"small"},style:{marginLeft:-3}},{props:{edge:"end"},style:{marginRight:-12}},{props:{edge:"end",size:"small"},style:{marginRight:-3}}]})),Tr(({theme:i})=>({variants:[{props:{color:"inherit"},style:{color:"inherit"}},...Object.entries(i.palette).filter(ds()).map(([e])=>({props:{color:e},style:{color:(i.vars||i).palette[e].main}})),...Object.entries(i.palette).filter(ds()).map(([e])=>({props:{color:e},style:{"--IconButton-hoverBg":i.vars?`rgba(${(i.vars||i).palette[e].mainChannel} / ${i.vars.palette.action.hoverOpacity})`:Gr((i.vars||i).palette[e].main,i.palette.action.hoverOpacity)}})),{props:{size:"small"},style:{padding:5,fontSize:i.typography.pxToRem(18)}},{props:{size:"large"},style:{padding:12,fontSize:i.typography.pxToRem(28)}}],[`&.${tL.disabled}`]:{backgroundColor:"transparent",color:(i.vars||i).palette.action.disabled},[`&.${tL.loading}`]:{color:"transparent"}}))),ote=ft("span",{name:"MuiIconButton",slot:"LoadingIndicator"})(({theme:i})=>({display:"none",position:"absolute",visibility:"visible",top:"50%",left:"50%",transform:"translate(-50%, -50%)",color:(i.vars||i).palette.action.disabled,variants:[{props:{loading:!0},style:{display:"flex"}}]})),Kx=j.forwardRef(function(e,t){const r=ur({props:e,name:"MuiIconButton"}),{edge:n=!1,children:s,className:a,color:o="default",disabled:l=!1,disableFocusRipple:u=!1,size:c="medium",id:h,loading:m=null,loadingIndicator:g,...y}=r,_=Lh(h),T=g??V.jsx(Iw,{"aria-labelledby":_,color:"inherit",size:16}),E={...r,edge:n,color:o,disabled:l,disableFocusRipple:u,loading:m,loadingIndicator:T,size:c},w=ste(E);return V.jsxs(ate,{id:m?_:h,className:Nt(w.root,a),centerRipple:!0,focusRipple:!u,disabled:l||m,ref:t,...y,ownerState:E,children:[typeof m=="boolean"&&V.jsx("span",{className:w.loadingWrapper,style:{display:"contents"},children:V.jsx(ote,{className:w.loadingIndicator,ownerState:E,children:m&&T})}),s]})}),lte=Qr(V.jsx("path",{d:"M21 6h-7.59l3.29-3.29L16 2l-4 4-4-4-.71.71L10.59 6H3c-1.1 0-2 .89-2 2v12c0 1.1.9 2 2 2h18c1.1 0 2-.9 2-2V8c0-1.11-.9-2-2-2m0 14H3V8h18zM9 10v8l7-4z"})),ute=Qr([V.jsx("circle",{cx:"15.5",cy:"9.5",r:"1.5"},"0"),V.jsx("circle",{cx:"8.5",cy:"9.5",r:"1.5"},"1"),V.jsx("path",{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2M12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8m0-6c-2.33 0-4.32 1.45-5.12 3.5h1.67c.69-1.19 1.97-2 3.45-2s2.75.81 3.45 2h1.67c-.8-2.05-2.79-3.5-5.12-3.5"},"2")]),cte=Qr(V.jsx("path",{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2M12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8m3.5-9c.83 0 1.5-.67 1.5-1.5S16.33 8 15.5 8 14 8.67 14 9.5s.67 1.5 1.5 1.5m-7 0c.83 0 1.5-.67 1.5-1.5S9.33 8 8.5 8 7 8.67 7 9.5 7.67 11 8.5 11m3.5 6.5c2.33 0 4.31-1.46 5.11-3.5H6.89c.8 2.04 2.78 3.5 5.11 3.5"})),qs={flexContainer:"ReactVirtualizedDemo-flexContainer",tableRow:"ReactVirtualizedDemo-tableRow",tableRowHover:"ReactVirtualizedDemo-tableRowHover",tableCell:"ReactVirtualizedDemo-tableCell",noClick:"ReactVirtualizedDemo-noClick"},dte=({theme:i})=>({"& .ReactVirtualized__Table__headerRow":{...i.direction==="rtl"&&{paddingLeft:"0 !important"},...i.direction!=="rtl"&&{paddingRight:void 0}},[`& .${qs.flexContainer}`]:{display:"flex",alignItems:"center",boxSizing:"border-box"},[`& .${qs.tableRow}`]:{cursor:"pointer"},[`& .${qs.tableRowHover}`]:{"&:hover":{backgroundColor:i.palette.grey[200]}},[`& .${qs.tableCell}`]:{flex:1},[`& .${qs.noClick}`]:{cursor:"initial"}});class k8 extends j.PureComponent{static defaultProps={headerHeight:48,rowHeight:80};getRowClassName=({index:e})=>{const{onRowClick:t}=this.props;return Nt(qs.tableRow,qs.flexContainer,{[qs.tableRowHover]:e!==-1&&t!=null})};getObjectIndexIndex=e=>{const{originalData:t}=this.props;for(let r=0;r<t.length;r++)if(t[r].index===e)return r;return 0};cellRenderer=({cellData:e,columnIndex:t})=>{const{t:r,rowHeight:n,onRowClick:s,showMultiSelect:a,selectRow:o,watchRow:l,originalData:u,columns:c,seeDetail:h,nowMod:m}=this.props;return V.jsxs(dd,{component:"div",className:Nt(qs.tableCell,qs.flexContainer,{[qs.noClick]:s==null}),variant:"body",style:{height:n,width:c[t].width+" !important",flex:"auto"},children:[t===0?a?V.jsx(_R,{color:"primary",checked:u[this.getObjectIndexIndex(e)].checked,onClick:()=>o(e),inputProps:{"aria-labelledby":t}}):V.jsx(V.Fragment,{}):"",t===1?V.jsxs("div",{children:[V.jsxs("div",{style:{fontWeight:"600",cursor:"pointer"},children:[e," - ",V.jsx("span",{onClick:()=>h(u[this.getObjectIndexIndex(e)]),children:u[this.getObjectIndexIndex(e)].name}),m===1?V.jsx(Kx,{size:"small",onClick:()=>l(u[this.getObjectIndexIndex(e)]),children:V.jsx(lte,{fontSize:"small",sx:{color:Qc[400]}})}):""]}),V.jsx("div",{style:{fontSize:"12px",color:"#7a7a7a",overflow:"hidden",height:"16px"},children:V.jsx("i",{children:u[this.getObjectIndexIndex(e)].url})}),V.jsxs("div",{style:{fontSize:"12px",color:"#7a7a7a"},children:[u[this.getObjectIndexIndex(e)].video?""+u[this.getObjectIndexIndex(e)].video.width+"x"+u[this.getObjectIndexIndex(e)].video.height+"-"+u[this.getObjectIndexIndex(e)].video.codec:"","-",u[this.getObjectIndexIndex(e)].audio?""+u[this.getObjectIndexIndex(e)].audio.codec+"-"+u[this.getObjectIndexIndex(e)].audio.channels+" audio channels":""]})]}):"",t===2?V.jsxs(hr,{children:[u[this.getObjectIndexIndex(e)].status===0?V.jsx(yS,{sx:{width:24,height:24},children:V.jsx(HZ,{})}):"",u[this.getObjectIndexIndex(e)].status===1?m===0?V.jsxs("div",{style:{color:u[this.getObjectIndexIndex(e)].delay<500?"green":"red",fontWeight:"bold"},children:[u[this.getObjectIndexIndex(e)].delay,"ms"]}):V.jsx(yS,{sx:{bgcolor:Qc[500],width:24,height:24},children:V.jsx(cte,{})}):"",u[this.getObjectIndexIndex(e)].status===2?V.jsx(yS,{sx:{bgcolor:ite[500],width:24,height:24},children:V.jsx(ute,{})}):""]}):""]})};headerRenderer=({label:e,columnIndex:t})=>{const{selectedArr:r,originalData:n,showMultiSelect:s,selectAll:a,columns:o}=this.props;return V.jsxs(dd,{component:"div",className:Nt(qs.tableCell,qs.flexContainer,qs.noClick),variant:"head",style:{width:o[t].width+" !important",flex:"auto"},children:[t===0?s?V.jsx(_R,{color:"primary",checked:r.length>0&&r.length===n.length,onClick:a,indeterminate:r.length>0&&r.length!==n.length,inputProps:{"aria-labelledby":-1}}):V.jsx("div",{children:""}):"",t!==0?V.jsx("span",{children:e}):""]})};render(){const{columns:e,rowHeight:t,headerHeight:r,...n}=this.props;return V.jsx(u8,{children:({height:s,width:a})=>V.jsx(Fw,{height:s,width:a,rowHeight:t,gridStyle:{direction:"inherit"},headerHeight:r,...n,rowClassName:this.getRowClassName,children:e.map(({dataKey:o,...l},u)=>V.jsx(Mw,{headerRenderer:c=>this.headerRenderer({...c,columnIndex:u}),className:qs.flexContainer,cellRenderer:this.cellRenderer,dataKey:o,...l},o))})})}}k8.propTypes={columns:sl.arrayOf(sl.shape({dataKey:sl.string.isRequired,label:sl.string.isRequired,width:sl.number.isRequired})).isRequired,headerHeight:sl.number,onRowClick:sl.func,rowHeight:sl.number};ft(k8)(dte);function hte(i){return or("MuiDialogTitle",i)}ar("MuiDialogTitle",["root"]);const fte=i=>{const{classes:e}=i;return lr({root:["root"]},hte,e)},pte=ft(Tn,{name:"MuiDialogTitle",slot:"Root"})({padding:"16px 24px",flex:"0 0 auto"}),Xx=j.forwardRef(function(e,t){const r=ur({props:e,name:"MuiDialogTitle"}),{className:n,id:s,...a}=r,o=r,l=fte(o),{titleId:u=s}=j.useContext(VF);return V.jsx(pte,{component:"h2",className:Nt(l.root,n),ownerState:o,ref:t,variant:"h6",id:s??u,...a})});function mte(i={}){const{autoHideDuration:e=null,disableWindowBlurListener:t=!1,onClose:r,open:n,resumeHideDuration:s}=i,a=bw();j.useEffect(()=>{if(!n)return;function E(w){w.defaultPrevented||w.key==="Escape"&&r?.(w,"escapeKeyDown")}return document.addEventListener("keydown",E),()=>{document.removeEventListener("keydown",E)}},[n,r]);const o=uu((E,w)=>{r?.(E,w)}),l=uu(E=>{!r||E==null||a.start(E,()=>{o(null,"timeout")})});j.useEffect(()=>(n&&l(e),a.clear),[n,e,l,a]);const u=E=>{r?.(E,"clickaway")},c=a.clear,h=j.useCallback(()=>{e!=null&&l(s??e*.5)},[e,s,l]),m=E=>w=>{const D=E.onBlur;D?.(w),h()},g=E=>w=>{const D=E.onFocus;D?.(w),c()},y=E=>w=>{const D=E.onMouseEnter;D?.(w),c()},_=E=>w=>{const D=E.onMouseLeave;D?.(w),h()};return j.useEffect(()=>{if(!t&&n)return window.addEventListener("focus",h),window.addEventListener("blur",c),()=>{window.removeEventListener("focus",h),window.removeEventListener("blur",c)}},[t,n,h,c]),{getRootProps:(E={})=>{const w={...u_(i),...u_(E)};return{role:"presentation",...E,...w,onBlur:m(w),onFocus:g(w),onMouseEnter:y(w),onMouseLeave:_(w)}},onClickAway:u}}function rL(i){return i.substring(2).toLowerCase()}function gte(i,e){return e.documentElement.clientWidth<i.clientX||e.documentElement.clientHeight<i.clientY}function vte(i){const{children:e,disableReactTree:t=!1,mouseEvent:r="onClick",onClickAway:n,touchEvent:s="onTouchEnd"}=i,a=j.useRef(!1),o=j.useRef(null),l=j.useRef(!1),u=j.useRef(!1);j.useEffect(()=>(setTimeout(()=>{l.current=!0},0),()=>{l.current=!1}),[]);const c=mn(Oh(e),o),h=uu(y=>{const _=u.current;u.current=!1;const T=Pa(o.current);if(!l.current||!o.current||"clientX"in y&&gte(y,T))return;if(a.current){a.current=!1;return}let E;y.composedPath?E=y.composedPath().includes(o.current):E=!T.documentElement.contains(y.target)||o.current.contains(y.target),!E&&(t||!_)&&n(y)}),m=y=>_=>{u.current=!0;const T=e.props[y];T&&T(_)},g={ref:c};return s!==!1&&(g[s]=m(s)),j.useEffect(()=>{if(s!==!1){const y=rL(s),_=Pa(o.current),T=()=>{a.current=!0};return _.addEventListener(y,h),_.addEventListener("touchmove",T),()=>{_.removeEventListener(y,h),_.removeEventListener("touchmove",T)}}},[h,s]),r!==!1&&(g[r]=m(r)),j.useEffect(()=>{if(r!==!1){const y=rL(r),_=Pa(o.current);return _.addEventListener(y,h),()=>{_.removeEventListener(y,h)}}},[h,r]),j.cloneElement(e,g)}function yte(i){return or("MuiSnackbarContent",i)}ar("MuiSnackbarContent",["root","message","action"]);const _te=i=>{const{classes:e}=i;return lr({root:["root"],action:["action"],message:["message"]},yte,e)},xte=ft(Rh,{name:"MuiSnackbarContent",slot:"Root"})(Tr(({theme:i})=>{const e=i.palette.mode==="light"?.8:.98,t=mF(i.palette.background.default,e);return{...i.typography.body2,color:i.vars?i.vars.palette.SnackbarContent.color:i.palette.getContrastText(t),backgroundColor:i.vars?i.vars.palette.SnackbarContent.bg:t,display:"flex",alignItems:"center",flexWrap:"wrap",padding:"6px 16px",borderRadius:(i.vars||i).shape.borderRadius,flexGrow:1,[i.breakpoints.up("sm")]:{flexGrow:"initial",minWidth:288}}})),Tte=ft("div",{name:"MuiSnackbarContent",slot:"Message"})({padding:"8px 0"}),bte=ft("div",{name:"MuiSnackbarContent",slot:"Action"})({display:"flex",alignItems:"center",marginLeft:"auto",paddingLeft:16,marginRight:-8}),Ste=j.forwardRef(function(e,t){const r=ur({props:e,name:"MuiSnackbarContent"}),{action:n,className:s,message:a,role:o="alert",...l}=r,u=r,c=_te(u);return V.jsxs(xte,{role:o,square:!0,elevation:6,className:Nt(c.root,s),ownerState:u,ref:t,...l,children:[V.jsx(Tte,{className:c.message,ownerState:u,children:a}),n?V.jsx(bte,{className:c.action,ownerState:u,children:n}):null]})});function Cte(i){return or("MuiSnackbar",i)}ar("MuiSnackbar",["root","anchorOriginTopCenter","anchorOriginBottomCenter","anchorOriginTopRight","anchorOriginBottomRight","anchorOriginTopLeft","anchorOriginBottomLeft"]);const Ete=i=>{const{classes:e,anchorOrigin:t}=i,r={root:["root",`anchorOrigin${ht(t.vertical)}${ht(t.horizontal)}`]};return lr(r,Cte,e)},wte=ft("div",{name:"MuiSnackbar",slot:"Root",overridesResolver:(i,e)=>{const{ownerState:t}=i;return[e.root,e[`anchorOrigin${ht(t.anchorOrigin.vertical)}${ht(t.anchorOrigin.horizontal)}`]]}})(Tr(({theme:i})=>({zIndex:(i.vars||i).zIndex.snackbar,position:"fixed",display:"flex",left:8,right:8,justifyContent:"center",alignItems:"center",variants:[{props:({ownerState:e})=>e.anchorOrigin.vertical==="top",style:{top:8,[i.breakpoints.up("sm")]:{top:24}}},{props:({ownerState:e})=>e.anchorOrigin.vertical!=="top",style:{bottom:8,[i.breakpoints.up("sm")]:{bottom:24}}},{props:({ownerState:e})=>e.anchorOrigin.horizontal==="left",style:{justifyContent:"flex-start",[i.breakpoints.up("sm")]:{left:24,right:"auto"}}},{props:({ownerState:e})=>e.anchorOrigin.horizontal==="right",style:{justifyContent:"flex-end",[i.breakpoints.up("sm")]:{right:24,left:"auto"}}},{props:({ownerState:e})=>e.anchorOrigin.horizontal==="center",style:{[i.breakpoints.up("sm")]:{left:"50%",right:"auto",transform:"translateX(-50%)"}}}]}))),Nw=j.forwardRef(function(e,t){const r=ur({props:e,name:"MuiSnackbar"}),n=Ph(),s={enter:n.transitions.duration.enteringScreen,exit:n.transitions.duration.leavingScreen},{action:a,anchorOrigin:{vertical:o,horizontal:l}={vertical:"bottom",horizontal:"left"},autoHideDuration:u=null,children:c,className:h,ClickAwayListenerProps:m,ContentProps:g,disableWindowBlurListener:y=!1,message:_,onBlur:T,onClose:E,onFocus:w,onMouseEnter:D,onMouseLeave:R,open:A,resumeHideDuration:L,slots:F={},slotProps:B={},TransitionComponent:M,transitionDuration:k=s,TransitionProps:{onEnter:q,onExited:G,...H}={},...re}=r,se={...r,anchorOrigin:{vertical:o,horizontal:l},autoHideDuration:u,disableWindowBlurListener:y,TransitionComponent:M,transitionDuration:k},de=Ete(se),{getRootProps:me,onClickAway:ue}=mte({...se}),[oe,ce]=j.useState(!0),te=Xe=>{ce(!0),G&&G(Xe)},fe=(Xe,Ue)=>{ce(!1),q&&q(Xe,Ue)},ye={slots:{transition:M,...F},slotProps:{content:g,clickAwayListener:m,transition:H,...B}},[Se,ke]=Lr("root",{ref:t,className:[de.root,h],elementType:wte,getSlotProps:me,externalForwardedProps:{...ye,...re},ownerState:se}),[qe,{ownerState:vt,...et}]=Lr("clickAwayListener",{elementType:vte,externalForwardedProps:ye,getSlotProps:Xe=>({onClickAway:(...Ue)=>{const Le=Ue[0];Xe.onClickAway?.(...Ue),!Le?.defaultMuiPrevented&&ue(...Ue)}}),ownerState:se}),[kt,pt]=Lr("content",{elementType:Ste,shouldForwardComponentProp:!0,externalForwardedProps:ye,additionalProps:{message:_,action:a},ownerState:se}),[Ut,Vt]=Lr("transition",{elementType:d_,externalForwardedProps:ye,getSlotProps:Xe=>({onEnter:(...Ue)=>{Xe.onEnter?.(...Ue),fe(...Ue)},onExited:(...Ue)=>{Xe.onExited?.(...Ue),te(...Ue)}}),additionalProps:{appear:!0,in:A,timeout:k,direction:o==="top"?"down":"up"},ownerState:se});return!A&&oe?null:V.jsx(qe,{...et,...F.clickAwayListener&&{ownerState:vt},children:V.jsx(Se,{...ke,children:V.jsx(Ut,{...Vt,children:c||V.jsx(kt,{...pt})})})})}),kte=Qr(V.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"})),Ate=Qr(V.jsx("path",{d:"M8.465 8.465C9.37 7.56 10.62 7 12 7C14.76 7 17 9.24 17 12C17 13.38 16.44 14.63 15.535 15.535C14.63 16.44 13.38 17 12 17C9.24 17 7 14.76 7 12C7 10.62 7.56 9.37 8.465 8.465Z"})),Ite=ft("span",{shouldForwardProp:Jn})({position:"relative",display:"flex"}),Dte=ft(kte)({transform:"scale(1)"}),Pte=ft(Ate)(Tr(({theme:i})=>({left:0,position:"absolute",transform:"scale(0)",transition:i.transitions.create("transform",{easing:i.transitions.easing.easeIn,duration:i.transitions.duration.shortest}),variants:[{props:{checked:!0},style:{transform:"scale(1)",transition:i.transitions.create("transform",{easing:i.transitions.easing.easeOut,duration:i.transitions.duration.shortest})}}]})));function A8(i){const{checked:e=!1,classes:t={},fontSize:r}=i,n={...i,checked:e};return V.jsxs(Ite,{className:t.root,ownerState:n,children:[V.jsx(Dte,{fontSize:r,className:t.background,ownerState:n}),V.jsx(Pte,{fontSize:r,className:t.dot,ownerState:n})]})}const I8=j.createContext(void 0);function Rte(){return j.useContext(I8)}function Lte(i){return or("MuiRadio",i)}const iL=ar("MuiRadio",["root","checked","disabled","colorPrimary","colorSecondary","sizeSmall"]),Ote=i=>{const{classes:e,color:t,size:r}=i,n={root:["root",`color${ht(t)}`,r!=="medium"&&`size${ht(r)}`]};return{...e,...lr(n,Lte,e)}},Mte=ft(ZF,{shouldForwardProp:i=>Jn(i)||i==="classes",name:"MuiRadio",slot:"Root",overridesResolver:(i,e)=>{const{ownerState:t}=i;return[e.root,t.size!=="medium"&&e[`size${ht(t.size)}`],e[`color${ht(t.color)}`]]}})(Tr(({theme:i})=>({color:(i.vars||i).palette.text.secondary,[`&.${iL.disabled}`]:{color:(i.vars||i).palette.action.disabled},variants:[{props:{color:"default",disabled:!1,disableRipple:!1},style:{"&:hover":{backgroundColor:i.vars?`rgba(${i.vars.palette.action.activeChannel} / ${i.vars.palette.action.hoverOpacity})`:Gr(i.palette.action.active,i.palette.action.hoverOpacity)}}},...Object.entries(i.palette).filter(ds()).map(([e])=>({props:{color:e,disabled:!1,disableRipple:!1},style:{"&:hover":{backgroundColor:i.vars?`rgba(${i.vars.palette[e].mainChannel} / ${i.vars.palette.action.hoverOpacity})`:Gr(i.palette[e].main,i.palette.action.hoverOpacity)}}})),...Object.entries(i.palette).filter(ds()).map(([e])=>({props:{color:e,disabled:!1},style:{[`&.${iL.checked}`]:{color:(i.vars||i).palette[e].main}}})),{props:{disableRipple:!1},style:{"&:hover":{"@media (hover: none)":{backgroundColor:"transparent"}}}}]})));function Fte(i,e){return typeof e=="object"&&e!==null?i===e:String(i)===String(e)}const Bte=V.jsx(A8,{checked:!0}),Nte=V.jsx(A8,{}),nl=j.forwardRef(function(e,t){const r=ur({props:e,name:"MuiRadio"}),{checked:n,checkedIcon:s=Bte,color:a="primary",icon:o=Nte,name:l,onChange:u,size:c="medium",className:h,disabled:m,disableRipple:g=!1,slots:y={},slotProps:_={},inputProps:T,...E}=r,w=vl();let D=m;w&&typeof D>"u"&&(D=w.disabled),D??=!1;const R={...r,disabled:D,disableRipple:g,color:a,size:c},A=Ote(R),L=Rte();let F=n;const B=nC(u,L&&L.onChange);let M=l;L&&(typeof F>"u"&&(F=Fte(L.value,r.value)),typeof M>"u"&&(M=L.name));const k=_.input??T,[q,G]=Lr("root",{ref:t,elementType:Mte,className:Nt(A.root,h),shouldForwardComponentProp:!0,externalForwardedProps:{slots:y,slotProps:_,...E},getSlotProps:H=>({...H,onChange:(re,...se)=>{H.onChange?.(re,...se),B(re,...se)}}),ownerState:R,additionalProps:{type:"radio",icon:j.cloneElement(o,{fontSize:o.props.fontSize??c}),checkedIcon:j.cloneElement(s,{fontSize:s.props.fontSize??c}),disabled:D,name:M,checked:F,slots:y,slotProps:{input:typeof k=="function"?k(R):k}}});return V.jsx(q,{...G,classes:A})});function Ute(i){return or("MuiFormGroup",i)}ar("MuiFormGroup",["root","row","error"]);const $te=i=>{const{classes:e,row:t,error:r}=i;return lr({root:["root",t&&"row",r&&"error"]},Ute,e)},jte=ft("div",{name:"MuiFormGroup",slot:"Root",overridesResolver:(i,e)=>{const{ownerState:t}=i;return[e.root,t.row&&e.row]}})({display:"flex",flexDirection:"column",flexWrap:"wrap",variants:[{props:{row:!0},style:{flexDirection:"row"}}]}),zte=j.forwardRef(function(e,t){const r=ur({props:e,name:"MuiFormGroup"}),{className:n,row:s=!1,...a}=r,o=vl(),l=yd({props:r,muiFormControl:o,states:["error"]}),u={...r,row:s,error:l.error},c=$te(u);return V.jsx(jte,{className:Nt(c.root,n),ownerState:u,ref:t,...a})});function Hte(i){return or("MuiRadioGroup",i)}ar("MuiRadioGroup",["root","row","error"]);const Vte=i=>{const{classes:e,row:t,error:r}=i;return lr({root:["root",t&&"row",r&&"error"]},Hte,e)},Tf=j.forwardRef(function(e,t){const{actions:r,children:n,className:s,defaultValue:a,name:o,onChange:l,value:u,...c}=e,h=j.useRef(null),m=Vte(e),[g,y]=l_({controlled:u,default:a,name:"RadioGroup"});j.useImperativeHandle(r,()=>({focus:()=>{let w=h.current.querySelector("input:not(:disabled):checked");w||(w=h.current.querySelector("input:not(:disabled)")),w&&w.focus()}}),[]);const _=mn(t,h),T=Lh(o),E=j.useMemo(()=>({name:T,onChange(w){y(w.target.value),l&&l(w,w.target.value)},value:g}),[T,l,y,g]);return V.jsx(I8.Provider,{value:E,children:V.jsx(zte,{role:"radiogroup",ref:_,className:Nt(m.root,s),...c,children:n})})});function qte(i){const{t:e}=No(),{onClose:t,open:r,saveData:n}=i,[s,a]=j.useState(""),o=()=>{t(!1)},l=c=>{a(c.target.value)},u=()=>{n(s)};return V.jsxs(cd,{onClose:o,open:r,children:[V.jsx(Xx,{children:e("")}),V.jsxs("div",{style:{padding:"20px",display:"flex",justifyContent:"center",flexDirection:"column"},children:[V.jsx(ki,{style:{width:"550px"},children:V.jsx(Ws,{id:"demo-simple-select-standard",value:s,multiline:!0,rows:10,onChange:l})}),V.jsx(ki,{style:{margin:"10px 0"},children:V.jsx(f_,{onClick:u,variant:"outlined",children:e("")})}),V.jsx(hr,{children:e(",https://xxxx.m3u + ")}),V.jsx(hr,{children:"star movies,http://srtarmovies.m3u8"}),V.jsx(hr,{children:"star plus,https://plus.m3u"})]})]})}function Wte(){const i=j.useContext(yu),[e,t]=j.useState(!1),[r,n]=j.useState(8e3),[s,a]=j.useState(1),[o,l]=j.useState("zh"),[u,c]=j.useState([]),[h,m]=j.useState(""),[g,y]=j.useState(""),[_,T]=j.useState(""),[E,w]=j.useState(!1),[D,R]=j.useState(""),{t:A}=No();j.useEffect(()=>{let G=i.settings;i.check_version(),i.nowMod===1?R(i.configInfo.app_version):R(i.configInfo.version),G!==null&&(n(G.httpRequestTimeout??1e3),c(G.customLink??[]),a(G.concurrent??1),l(G.language??"zh"),m(G.privateHost??""),T(G.playerSource??"video/mp2t"))},[i]);const L=G=>{const{name:H,value:re}=G.target;let se=parseInt(G.target.value,10);H==="httpRequestTimeout"?n(se):H==="concurrent"?(se===0&&(se=1),a(se)):H==="language"?l(G.target.value):H==="privateHost"?m(G.target.value):H==="playerSource"&&T(G.target.value)},F=()=>{i.onChangeSettings({httpRequestTimeout:r,customLink:u,concurrent:s,language:o,privateHost:h,playerSource:_}),i.changeLanguage(o),w(!0),y(A(""))},B=G=>{t(G)},M=G=>{let H=u,re=G.split(`
`);if(re.length>0){for(let se=0;se<re.length;se++){let de=re[se].split(",");H.push({name:de[0],url:de[1]})}c(H)}t(!1)},k=Cy.version,q=()=>{w(!1),y("")};return V.jsxs(hr,{style:{padding:"0 20px"},children:[V.jsx(qte,{open:e,onClose:()=>B(!1),saveData:M}),V.jsx(Nw,{open:E,autoHideDuration:3e3,message:g,onClose:q}),V.jsxs(hr,{children:[V.jsxs(hr,{sx:{display:"flex",flexDirection:"column",padding:"20px",width:"400px"},children:[V.jsxs(ki,{sx:{marginBottom:"20px"},children:[V.jsx(E0,{id:"demo-row-radio-buttons-group-label",children:A("")}),V.jsx(w0,{name:"language",value:o,label:A(""),onChange:L,children:i.languageList.map((G,H)=>V.jsx(pC,{value:G.code,children:G.name},H))})]}),V.jsxs(ki,{sx:{marginBottom:"20px"},children:[V.jsx(E0,{id:"demo-row-radio-buttons-group-label",children:A("")}),V.jsx(w0,{name:"playerSource",value:_,label:A(""),onChange:L,children:i.videoPlayTypes.map((G,H)=>V.jsx(pC,{value:G.value,children:G.name},H))})]}),V.jsx(f_,{onClick:F,variant:"outlined",children:A("")})]}),V.jsxs(ki,{sx:{marginTop:"20px"},children:[V.jsxs(hr,{children:[A(""),": ",k]}),i.showNewVersion?V.jsxs(hr,{style:{color:"green",fontWeight:"bold"},children:[A(""),": ",D]}):"",V.jsxs(hr,{children:[A("Github"),"",V.jsx("a",{href:Cy.homepage_url,children:Cy.homepage_url})]}),V.jsx(hr,{children:A("STAR")})]})]})]})}const Gte=Qr(V.jsx("path",{d:"m10 16.5 6-4.5-6-4.5zM12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8"})),Kte=Qr(V.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m4 14H8V8h8z"}));var SS,nL;function Dp(){if(nL)return SS;nL=1;var i;return typeof window<"u"?i=window:typeof uh<"u"?i=uh:typeof self<"u"?i=self:i={},SS=i,SS}var Xte=Dp();const X=ia(Xte);var CS,sL;function D8(){if(sL)return CS;sL=1;var i=typeof uh<"u"?uh:typeof window<"u"?window:{},e=c3,t;return typeof document<"u"?t=document:(t=i["__GLOBAL_DOCUMENT_CACHE@4"],t||(t=i["__GLOBAL_DOCUMENT_CACHE@4"]=e)),CS=t,CS}var Yte=D8();const Me=ia(Yte);var pv={exports:{}},ES={exports:{}},aL;function P8(){return aL||(aL=1,(function(i){function e(){return i.exports=e=Object.assign?Object.assign.bind():function(t){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var s in n)({}).hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},i.exports.__esModule=!0,i.exports.default=i.exports,e.apply(null,arguments)}i.exports=e,i.exports.__esModule=!0,i.exports.default=i.exports})(ES)),ES.exports}var wS,oL;function R8(){if(oL)return wS;oL=1,wS=e;var i=Object.prototype.toString;function e(t){if(!t)return!1;var r=i.call(t);return r==="[object Function]"||typeof t=="function"&&r!=="[object RegExp]"||typeof window<"u"&&(t===window.setTimeout||t===window.alert||t===window.confirm||t===window.prompt)}return wS}var kS,lL;function Qte(){if(lL)return kS;lL=1;function i(n,s){var a=typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(a)return(a=a.call(n)).next.bind(a);if(Array.isArray(n)||(a=e(n))||s){a&&(n=a);var o=0;return function(){return o>=n.length?{done:!0}:{done:!1,value:n[o++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function e(n,s){if(n){if(typeof n=="string")return t(n,s);var a=Object.prototype.toString.call(n).slice(8,-1);if(a==="Object"&&n.constructor&&(a=n.constructor.name),a==="Map"||a==="Set")return Array.from(n);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return t(n,s)}}function t(n,s){(s==null||s>n.length)&&(s=n.length);for(var a=0,o=new Array(s);a<s;a++)o[a]=n[a];return o}var r=(function(){function n(){this.typeToInterceptorsMap_=new Map,this.enabled_=!1}var s=n.prototype;return s.getIsEnabled=function(){return this.enabled_},s.enable=function(){this.enabled_=!0},s.disable=function(){this.enabled_=!1},s.reset=function(){this.typeToInterceptorsMap_=new Map,this.enabled_=!1},s.addInterceptor=function(o,l){this.typeToInterceptorsMap_.has(o)||this.typeToInterceptorsMap_.set(o,new Set);var u=this.typeToInterceptorsMap_.get(o);return u.has(l)?!1:(u.add(l),!0)},s.removeInterceptor=function(o,l){var u=this.typeToInterceptorsMap_.get(o);return u&&u.has(l)?(u.delete(l),!0):!1},s.clearInterceptorsByType=function(o){var l=this.typeToInterceptorsMap_.get(o);return l?(this.typeToInterceptorsMap_.delete(o),this.typeToInterceptorsMap_.set(o,new Set),!0):!1},s.clear=function(){return this.typeToInterceptorsMap_.size?(this.typeToInterceptorsMap_=new Map,!0):!1},s.getForType=function(o){return this.typeToInterceptorsMap_.get(o)||new Set},s.execute=function(o,l){for(var u=this.getForType(o),c=i(u),h;!(h=c()).done;){var m=h.value;try{l=m(l)}catch{}}return l},n})();return kS=r,kS}var AS,uL;function Jte(){if(uL)return AS;uL=1;var i=(function(){function t(){this.maxAttempts_=1,this.delayFactor_=.1,this.fuzzFactor_=.1,this.initialDelay_=1e3,this.enabled_=!1}var r=t.prototype;return r.getIsEnabled=function(){return this.enabled_},r.enable=function(){this.enabled_=!0},r.disable=function(){this.enabled_=!1},r.reset=function(){this.maxAttempts_=1,this.delayFactor_=.1,this.fuzzFactor_=.1,this.initialDelay_=1e3,this.enabled_=!1},r.getMaxAttempts=function(){return this.maxAttempts_},r.setMaxAttempts=function(s){this.maxAttempts_=s},r.getDelayFactor=function(){return this.delayFactor_},r.setDelayFactor=function(s){this.delayFactor_=s},r.getFuzzFactor=function(){return this.fuzzFactor_},r.setFuzzFactor=function(s){this.fuzzFactor_=s},r.getInitialDelay=function(){return this.initialDelay_},r.setInitialDelay=function(s){this.initialDelay_=s},r.createRetry=function(s){var a=s===void 0?{}:s,o=a.maxAttempts,l=a.delayFactor,u=a.fuzzFactor,c=a.initialDelay;return new e({maxAttempts:o||this.maxAttempts_,delayFactor:l||this.delayFactor_,fuzzFactor:u||this.fuzzFactor_,initialDelay:c||this.initialDelay_})},t})(),e=(function(){function t(n){this.maxAttempts_=n.maxAttempts,this.delayFactor_=n.delayFactor,this.fuzzFactor_=n.fuzzFactor,this.currentDelay_=n.initialDelay,this.currentAttempt_=1}var r=t.prototype;return r.moveToNextAttempt=function(){this.currentAttempt_++;var s=this.currentDelay_*this.delayFactor_;this.currentDelay_=this.currentDelay_+s},r.shouldRetry=function(){return this.currentAttempt_<this.maxAttempts_},r.getCurrentDelay=function(){return this.currentDelay_},r.getCurrentMinPossibleDelay=function(){return(1-this.fuzzFactor_)*this.currentDelay_},r.getCurrentMaxPossibleDelay=function(){return(1+this.fuzzFactor_)*this.currentDelay_},r.getCurrentFuzzedDelay=function(){var s=this.getCurrentMinPossibleDelay(),a=this.getCurrentMaxPossibleDelay();return s+Math.random()*(a-s)},t})();return AS=i,AS}var IS,cL;function Zte(){if(cL)return IS;cL=1;var i=Dp(),e=function(n,s){return s===void 0&&(s=!1),function(a,o,l){if(a){n(a);return}if(o.statusCode>=400&&o.statusCode<=599){var u=l;if(s)if(i.TextDecoder){var c=t(o.headers&&o.headers["content-type"]);try{u=new TextDecoder(c).decode(l)}catch{}}else u=String.fromCharCode.apply(null,new Uint8Array(l));n({cause:u});return}n(null,l)}};function t(r){return r===void 0&&(r=""),r.toLowerCase().split(";").reduce(function(n,s){var a=s.split("="),o=a[0],l=a[1];return o.trim()==="charset"?l.trim():n},"utf-8")}return IS=e,IS}var dL;function ere(){if(dL)return pv.exports;dL=1;var i=Dp(),e=P8(),t=R8(),r=Qte(),n=Jte();u.httpHandler=Zte(),u.requestInterceptorsStorage=new r,u.responseInterceptorsStorage=new r,u.retryManager=new n;/**
 * @license
 * slighly modified parse-headers 2.0.2 <https://github.com/kesla/parse-headers/>
 * Copyright (c) 2014 David Bjrklund
 * Available under the MIT license
 * <https://github.com/kesla/parse-headers/blob/master/LICENCE>
 */var s=function(y){var _={};return y&&y.trim().split(`
`).forEach(function(T){var E=T.indexOf(":"),w=T.slice(0,E).trim().toLowerCase(),D=T.slice(E+1).trim();typeof _[w]>"u"?_[w]=D:Array.isArray(_[w])?_[w].push(D):_[w]=[_[w],D]}),_};pv.exports=u,pv.exports.default=u,u.XMLHttpRequest=i.XMLHttpRequest||m,u.XDomainRequest="withCredentials"in new u.XMLHttpRequest?u.XMLHttpRequest:i.XDomainRequest,a(["get","put","post","patch","head","delete"],function(g){u[g==="delete"?"del":g]=function(y,_,T){return _=l(y,_,T),_.method=g.toUpperCase(),c(_)}});function a(g,y){for(var _=0;_<g.length;_++)y(g[_])}function o(g){for(var y in g)if(g.hasOwnProperty(y))return!1;return!0}function l(g,y,_){var T=g;return t(y)?(_=y,typeof g=="string"&&(T={uri:g})):T=e({},y,{uri:g}),T.callback=_,T}function u(g,y,_){return y=l(g,y,_),c(y)}function c(g){if(typeof g.callback>"u")throw new Error("callback argument missing");if(g.requestType&&u.requestInterceptorsStorage.getIsEnabled()){var y={uri:g.uri||g.url,headers:g.headers||{},body:g.body,metadata:g.metadata||{},retry:g.retry,timeout:g.timeout},_=u.requestInterceptorsStorage.execute(g.requestType,y);g.uri=_.uri,g.headers=_.headers,g.body=_.body,g.metadata=_.metadata,g.retry=_.retry,g.timeout=_.timeout}var T=!1,E=function(ue,oe,ce){T||(T=!0,g.callback(ue,oe,ce))};function w(){L.readyState===4&&!u.responseInterceptorsStorage.getIsEnabled()&&setTimeout(A,0)}function D(){var me=void 0;if(L.response?me=L.response:me=L.responseText||h(L),re)try{me=JSON.parse(me)}catch{}return me}function R(me){if(clearTimeout(se),clearTimeout(g.retryTimeout),me instanceof Error||(me=new Error(""+(me||"Unknown XMLHttpRequest Error"))),me.statusCode=0,!B&&u.retryManager.getIsEnabled()&&g.retry&&g.retry.shouldRetry()){g.retryTimeout=setTimeout(function(){g.retry.moveToNextAttempt(),g.xhr=L,c(g)},g.retry.getCurrentFuzzedDelay());return}if(g.requestType&&u.responseInterceptorsStorage.getIsEnabled()){var ue={headers:de.headers||{},body:de.body,responseUrl:L.responseURL,responseType:L.responseType},oe=u.responseInterceptorsStorage.execute(g.requestType,ue);de.body=oe.body,de.headers=oe.headers}return E(me,de)}function A(){if(!B){var me;clearTimeout(se),clearTimeout(g.retryTimeout),g.useXDR&&L.status===void 0?me=200:me=L.status===1223?204:L.status;var ue=de,oe=null;if(me!==0?(ue={body:D(),statusCode:me,method:k,headers:{},url:M,rawRequest:L},L.getAllResponseHeaders&&(ue.headers=s(L.getAllResponseHeaders()))):oe=new Error("Internal XMLHttpRequest Error"),g.requestType&&u.responseInterceptorsStorage.getIsEnabled()){var ce={headers:ue.headers||{},body:ue.body,responseUrl:L.responseURL,responseType:L.responseType},te=u.responseInterceptorsStorage.execute(g.requestType,ce);ue.body=te.body,ue.headers=te.headers}return E(oe,ue,ue.body)}}var L=g.xhr||null;L||(g.cors||g.useXDR?L=new u.XDomainRequest:L=new u.XMLHttpRequest);var F,B,M=L.url=g.uri||g.url,k=L.method=g.method||"GET",q=g.body||g.data,G=L.headers=g.headers||{},H=!!g.sync,re=!1,se,de={body:void 0,headers:{},statusCode:0,method:k,url:M,rawRequest:L};if("json"in g&&g.json!==!1&&(re=!0,G.accept||G.Accept||(G.Accept="application/json"),k!=="GET"&&k!=="HEAD"&&(G["content-type"]||G["Content-Type"]||(G["Content-Type"]="application/json"),q=JSON.stringify(g.json===!0?q:g.json))),L.onreadystatechange=w,L.onload=A,L.onerror=R,L.onprogress=function(){},L.onabort=function(){B=!0,clearTimeout(g.retryTimeout)},L.ontimeout=R,L.open(k,M,!H,g.username,g.password),H||(L.withCredentials=!!g.withCredentials),!H&&g.timeout>0&&(se=setTimeout(function(){if(!B){B=!0,L.abort("timeout");var me=new Error("XMLHttpRequest timeout");me.code="ETIMEDOUT",R(me)}},g.timeout)),L.setRequestHeader)for(F in G)G.hasOwnProperty(F)&&L.setRequestHeader(F,G[F]);else if(g.headers&&!o(g.headers))throw new Error("Headers cannot be set on an XDomainRequest object");return"responseType"in g&&(L.responseType=g.responseType),"beforeSend"in g&&typeof g.beforeSend=="function"&&g.beforeSend(L),L.send(q||null),L}function h(g){try{if(g.responseType==="document")return g.responseXML;var y=g.responseXML&&g.responseXML.documentElement.nodeName==="parsererror";if(g.responseType===""&&!y)return g.responseXML}catch{}return null}function m(){}return pv.exports}var tre=ere();const L8=ia(tre);var DS={exports:{}},PS,hL;function rre(){if(hL)return PS;hL=1;var i=D8(),e=Object.create||(function(){function M(){}return function(k){if(arguments.length!==1)throw new Error("Object.create shim only accepts one parameter.");return M.prototype=k,new M}})();function t(M,k){this.name="ParsingError",this.code=M.code,this.message=k||M.message}t.prototype=e(Error.prototype),t.prototype.constructor=t,t.Errors={BadSignature:{code:0,message:"Malformed WebVTT signature."},BadTimeStamp:{code:1,message:"Malformed time stamp."}};function r(M){function k(G,H,re,se){return(G|0)*3600+(H|0)*60+(re|0)+(se|0)/1e3}var q=M.match(/^(\d+):(\d{1,2})(:\d{1,2})?\.(\d{3})/);return q?q[3]?k(q[1],q[2],q[3].replace(":",""),q[4]):q[1]>59?k(q[1],q[2],0,q[4]):k(0,q[1],q[2],q[4]):null}function n(){this.values=e(null)}n.prototype={set:function(M,k){!this.get(M)&&k!==""&&(this.values[M]=k)},get:function(M,k,q){return q?this.has(M)?this.values[M]:k[q]:this.has(M)?this.values[M]:k},has:function(M){return M in this.values},alt:function(M,k,q){for(var G=0;G<q.length;++G)if(k===q[G]){this.set(M,k);break}},integer:function(M,k){/^-?\d+$/.test(k)&&this.set(M,parseInt(k,10))},percent:function(M,k){return k.match(/^([\d]{1,3})(\.[\d]*)?%$/)&&(k=parseFloat(k),k>=0&&k<=100)?(this.set(M,k),!0):!1}};function s(M,k,q,G){var H=G?M.split(G):[M];for(var re in H)if(typeof H[re]=="string"){var se=H[re].split(q);if(se.length===2){var de=se[0].trim(),me=se[1].trim();k(de,me)}}}function a(M,k,q){var G=M;function H(){var de=r(M);if(de===null)throw new t(t.Errors.BadTimeStamp,"Malformed timestamp: "+G);return M=M.replace(/^[^\sa-zA-Z-]+/,""),de}function re(de,me){var ue=new n;s(de,function(oe,ce){switch(oe){case"region":for(var te=q.length-1;te>=0;te--)if(q[te].id===ce){ue.set(oe,q[te].region);break}break;case"vertical":ue.alt(oe,ce,["rl","lr"]);break;case"line":var fe=ce.split(","),ye=fe[0];ue.integer(oe,ye),ue.percent(oe,ye)&&ue.set("snapToLines",!1),ue.alt(oe,ye,["auto"]),fe.length===2&&ue.alt("lineAlign",fe[1],["start","center","end"]);break;case"position":fe=ce.split(","),ue.percent(oe,fe[0]),fe.length===2&&ue.alt("positionAlign",fe[1],["start","center","end"]);break;case"size":ue.percent(oe,ce);break;case"align":ue.alt(oe,ce,["start","center","end","left","right"]);break}},/:/,/\s/),me.region=ue.get("region",null),me.vertical=ue.get("vertical","");try{me.line=ue.get("line","auto")}catch{}me.lineAlign=ue.get("lineAlign","start"),me.snapToLines=ue.get("snapToLines",!0),me.size=ue.get("size",100);try{me.align=ue.get("align","center")}catch{me.align=ue.get("align","middle")}try{me.position=ue.get("position","auto")}catch{me.position=ue.get("position",{start:0,left:0,center:50,middle:50,end:100,right:100},me.align)}me.positionAlign=ue.get("positionAlign",{start:"start",left:"start",center:"center",middle:"center",end:"end",right:"end"},me.align)}function se(){M=M.replace(/^\s+/,"")}if(se(),k.startTime=H(),se(),M.substr(0,3)!=="-->")throw new t(t.Errors.BadTimeStamp,"Malformed time stamp (time stamps must be separated by '-->'): "+G);M=M.substr(3),se(),k.endTime=H(),se(),re(M,k)}var o=i.createElement&&i.createElement("textarea"),l={c:"span",i:"i",b:"b",u:"u",ruby:"ruby",rt:"rt",v:"span",lang:"span"},u={white:"rgba(255,255,255,1)",lime:"rgba(0,255,0,1)",cyan:"rgba(0,255,255,1)",red:"rgba(255,0,0,1)",yellow:"rgba(255,255,0,1)",magenta:"rgba(255,0,255,1)",blue:"rgba(0,0,255,1)",black:"rgba(0,0,0,1)"},c={v:"title",lang:"lang"},h={rt:"ruby"};function m(M,k){function q(){if(!k)return null;function ye(ke){return k=k.substr(ke.length),ke}var Se=k.match(/^([^<]*)(<[^>]*>?)?/);return ye(Se[1]?Se[1]:Se[2])}function G(ye){return o.innerHTML=ye,ye=o.textContent,o.textContent="",ye}function H(ye,Se){return!h[Se.localName]||h[Se.localName]===ye.localName}function re(ye,Se){var ke=l[ye];if(!ke)return null;var qe=M.document.createElement(ke),vt=c[ye];return vt&&Se&&(qe[vt]=Se.trim()),qe}for(var se=M.document.createElement("div"),de=se,me,ue=[];(me=q())!==null;){if(me[0]==="<"){if(me[1]==="/"){ue.length&&ue[ue.length-1]===me.substr(2).replace(">","")&&(ue.pop(),de=de.parentNode);continue}var oe=r(me.substr(1,me.length-2)),ce;if(oe){ce=M.document.createProcessingInstruction("timestamp",oe),de.appendChild(ce);continue}var te=me.match(/^<([^.\s/0-9>]+)(\.[^\s\\>]+)?([^>\\]+)?(\\?)>?$/);if(!te||(ce=re(te[1],te[3]),!ce)||!H(de,ce))continue;if(te[2]){var fe=te[2].split(".");fe.forEach(function(ye){var Se=/^bg_/.test(ye),ke=Se?ye.slice(3):ye;if(u.hasOwnProperty(ke)){var qe=Se?"background-color":"color",vt=u[ke];ce.style[qe]=vt}}),ce.className=fe.join(" ")}ue.push(te[1]),de.appendChild(ce),de=ce;continue}de.appendChild(M.document.createTextNode(G(me)))}return se}var g=[[1470,1470],[1472,1472],[1475,1475],[1478,1478],[1488,1514],[1520,1524],[1544,1544],[1547,1547],[1549,1549],[1563,1563],[1566,1610],[1645,1647],[1649,1749],[1765,1766],[1774,1775],[1786,1805],[1807,1808],[1810,1839],[1869,1957],[1969,1969],[1984,2026],[2036,2037],[2042,2042],[2048,2069],[2074,2074],[2084,2084],[2088,2088],[2096,2110],[2112,2136],[2142,2142],[2208,2208],[2210,2220],[8207,8207],[64285,64285],[64287,64296],[64298,64310],[64312,64316],[64318,64318],[64320,64321],[64323,64324],[64326,64449],[64467,64829],[64848,64911],[64914,64967],[65008,65020],[65136,65140],[65142,65276],[67584,67589],[67592,67592],[67594,67637],[67639,67640],[67644,67644],[67647,67669],[67671,67679],[67840,67867],[67872,67897],[67903,67903],[67968,68023],[68030,68031],[68096,68096],[68112,68115],[68117,68119],[68121,68147],[68160,68167],[68176,68184],[68192,68223],[68352,68405],[68416,68437],[68440,68466],[68472,68479],[68608,68680],[126464,126467],[126469,126495],[126497,126498],[126500,126500],[126503,126503],[126505,126514],[126516,126519],[126521,126521],[126523,126523],[126530,126530],[126535,126535],[126537,126537],[126539,126539],[126541,126543],[126545,126546],[126548,126548],[126551,126551],[126553,126553],[126555,126555],[126557,126557],[126559,126559],[126561,126562],[126564,126564],[126567,126570],[126572,126578],[126580,126583],[126585,126588],[126590,126590],[126592,126601],[126603,126619],[126625,126627],[126629,126633],[126635,126651],[1114109,1114109]];function y(M){for(var k=0;k<g.length;k++){var q=g[k];if(M>=q[0]&&M<=q[1])return!0}return!1}function _(M){var k=[],q="",G;if(!M||!M.childNodes)return"ltr";function H(de,me){for(var ue=me.childNodes.length-1;ue>=0;ue--)de.push(me.childNodes[ue])}function re(de){if(!de||!de.length)return null;var me=de.pop(),ue=me.textContent||me.innerText;if(ue){var oe=ue.match(/^.*(\n|\r)/);return oe?(de.length=0,oe[0]):ue}if(me.tagName==="ruby")return re(de);if(me.childNodes)return H(de,me),re(de)}for(H(k,M);q=re(k);)for(var se=0;se<q.length;se++)if(G=q.charCodeAt(se),y(G))return"rtl";return"ltr"}function T(M){if(typeof M.line=="number"&&(M.snapToLines||M.line>=0&&M.line<=100))return M.line;if(!M.track||!M.track.textTrackList||!M.track.textTrackList.mediaElement)return-1;for(var k=M.track,q=k.textTrackList,G=0,H=0;H<q.length&&q[H]!==k;H++)q[H].mode==="showing"&&G++;return++G*-1}function E(){}E.prototype.applyStyles=function(M,k){k=k||this.div;for(var q in M)M.hasOwnProperty(q)&&(k.style[q]=M[q])},E.prototype.formatStyle=function(M,k){return M===0?0:M+k};function w(M,k,q){E.call(this),this.cue=k,this.cueDiv=m(M,k.text);var G={color:"rgba(255, 255, 255, 1)",backgroundColor:"rgba(0, 0, 0, 0.8)",position:"relative",left:0,right:0,top:0,bottom:0,display:"inline",writingMode:k.vertical===""?"horizontal-tb":k.vertical==="lr"?"vertical-lr":"vertical-rl",unicodeBidi:"plaintext"};this.applyStyles(G,this.cueDiv),this.div=M.document.createElement("div"),G={direction:_(this.cueDiv),writingMode:k.vertical===""?"horizontal-tb":k.vertical==="lr"?"vertical-lr":"vertical-rl",unicodeBidi:"plaintext",textAlign:k.align==="middle"?"center":k.align,font:q.font,whiteSpace:"pre-line",position:"absolute"},this.applyStyles(G),this.div.appendChild(this.cueDiv);var H=0;switch(k.positionAlign){case"start":case"line-left":H=k.position;break;case"center":H=k.position-k.size/2;break;case"end":case"line-right":H=k.position-k.size;break}k.vertical===""?this.applyStyles({left:this.formatStyle(H,"%"),width:this.formatStyle(k.size,"%")}):this.applyStyles({top:this.formatStyle(H,"%"),height:this.formatStyle(k.size,"%")}),this.move=function(re){this.applyStyles({top:this.formatStyle(re.top,"px"),bottom:this.formatStyle(re.bottom,"px"),left:this.formatStyle(re.left,"px"),right:this.formatStyle(re.right,"px"),height:this.formatStyle(re.height,"px"),width:this.formatStyle(re.width,"px")})}}w.prototype=e(E.prototype),w.prototype.constructor=w;function D(M){var k,q,G,H;if(M.div){q=M.div.offsetHeight,G=M.div.offsetWidth,H=M.div.offsetTop;var re=(re=M.div.childNodes)&&(re=re[0])&&re.getClientRects&&re.getClientRects();M=M.div.getBoundingClientRect(),k=re?Math.max(re[0]&&re[0].height||0,M.height/re.length):0}this.left=M.left,this.right=M.right,this.top=M.top||H,this.height=M.height||q,this.bottom=M.bottom||H+(M.height||q),this.width=M.width||G,this.lineHeight=k!==void 0?k:M.lineHeight}D.prototype.move=function(M,k){switch(k=k!==void 0?k:this.lineHeight,M){case"+x":this.left+=k,this.right+=k;break;case"-x":this.left-=k,this.right-=k;break;case"+y":this.top+=k,this.bottom+=k;break;case"-y":this.top-=k,this.bottom-=k;break}},D.prototype.overlaps=function(M){return this.left<M.right&&this.right>M.left&&this.top<M.bottom&&this.bottom>M.top},D.prototype.overlapsAny=function(M){for(var k=0;k<M.length;k++)if(this.overlaps(M[k]))return!0;return!1},D.prototype.within=function(M){return this.top>=M.top&&this.bottom<=M.bottom&&this.left>=M.left&&this.right<=M.right},D.prototype.overlapsOppositeAxis=function(M,k){switch(k){case"+x":return this.left<M.left;case"-x":return this.right>M.right;case"+y":return this.top<M.top;case"-y":return this.bottom>M.bottom}},D.prototype.intersectPercentage=function(M){var k=Math.max(0,Math.min(this.right,M.right)-Math.max(this.left,M.left)),q=Math.max(0,Math.min(this.bottom,M.bottom)-Math.max(this.top,M.top)),G=k*q;return G/(this.height*this.width)},D.prototype.toCSSCompatValues=function(M){return{top:this.top-M.top,bottom:M.bottom-this.bottom,left:this.left-M.left,right:M.right-this.right,height:this.height,width:this.width}},D.getSimpleBoxPosition=function(M){var k=M.div?M.div.offsetHeight:M.tagName?M.offsetHeight:0,q=M.div?M.div.offsetWidth:M.tagName?M.offsetWidth:0,G=M.div?M.div.offsetTop:M.tagName?M.offsetTop:0;M=M.div?M.div.getBoundingClientRect():M.tagName?M.getBoundingClientRect():M;var H={left:M.left,right:M.right,top:M.top||G,height:M.height||k,bottom:M.bottom||G+(M.height||k),width:M.width||q};return H};function R(M,k,q,G){function H(ke,qe){for(var vt,et=new D(ke),kt=1,pt=0;pt<qe.length;pt++){for(;ke.overlapsOppositeAxis(q,qe[pt])||ke.within(q)&&ke.overlapsAny(G);)ke.move(qe[pt]);if(ke.within(q))return ke;var Ut=ke.intersectPercentage(q);kt>Ut&&(vt=new D(ke),kt=Ut),ke=new D(et)}return vt||et}var re=new D(k),se=k.cue,de=T(se),me=[];if(se.snapToLines){var ue;switch(se.vertical){case"":me=["+y","-y"],ue="height";break;case"rl":me=["+x","-x"],ue="width";break;case"lr":me=["-x","+x"],ue="width";break}var oe=re.lineHeight,ce=oe*Math.round(de),te=q[ue]+oe,fe=me[0];Math.abs(ce)>te&&(ce=ce<0?-1:1,ce*=Math.ceil(te/oe)*oe),de<0&&(ce+=se.vertical===""?q.height:q.width,me=me.reverse()),re.move(fe,ce)}else{var ye=re.lineHeight/q.height*100;switch(se.lineAlign){case"center":de-=ye/2;break;case"end":de-=ye;break}switch(se.vertical){case"":k.applyStyles({top:k.formatStyle(de,"%")});break;case"rl":k.applyStyles({left:k.formatStyle(de,"%")});break;case"lr":k.applyStyles({right:k.formatStyle(de,"%")});break}me=["+y","-x","+x","-y"],re=new D(k)}var Se=H(re,me);k.move(Se.toCSSCompatValues(q))}function A(){}A.StringDecoder=function(){return{decode:function(M){if(!M)return"";if(typeof M!="string")throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(M))}}},A.convertCueToDOMTree=function(M,k){return!M||!k?null:m(M,k)};var L=.05,F="sans-serif",B="1.5%";return A.processCues=function(M,k,q){if(!M||!k||!q)return null;for(;q.firstChild;)q.removeChild(q.firstChild);var G=M.document.createElement("div");G.style.position="absolute",G.style.left="0",G.style.right="0",G.style.top="0",G.style.bottom="0",G.style.margin=B,q.appendChild(G);function H(oe){for(var ce=0;ce<oe.length;ce++)if(oe[ce].hasBeenReset||!oe[ce].displayState)return!0;return!1}if(!H(k)){for(var re=0;re<k.length;re++)G.appendChild(k[re].displayState);return}var se=[],de=D.getSimpleBoxPosition(G),me=Math.round(de.height*L*100)/100,ue={font:me+"px "+F};(function(){for(var oe,ce,te=0;te<k.length;te++)ce=k[te],oe=new w(M,ce,ue),G.appendChild(oe.div),R(M,oe,de,se),ce.displayState=oe.div,se.push(D.getSimpleBoxPosition(oe))})()},A.Parser=function(M,k,q){q||(q=k,k={}),k||(k={}),this.window=M,this.vttjs=k,this.state="INITIAL",this.buffer="",this.decoder=q||new TextDecoder("utf8"),this.regionList=[]},A.Parser.prototype={reportOrThrowError:function(M){if(M instanceof t)this.onparsingerror&&this.onparsingerror(M);else throw M},parse:function(M){var k=this;M&&(k.buffer+=k.decoder.decode(M,{stream:!0}));function q(){for(var oe=k.buffer,ce=0;ce<oe.length&&oe[ce]!=="\r"&&oe[ce]!==`
`;)++ce;var te=oe.substr(0,ce);return oe[ce]==="\r"&&++ce,oe[ce]===`
`&&++ce,k.buffer=oe.substr(ce),te}function G(oe){var ce=new n;if(s(oe,function(fe,ye){switch(fe){case"id":ce.set(fe,ye);break;case"width":ce.percent(fe,ye);break;case"lines":ce.integer(fe,ye);break;case"regionanchor":case"viewportanchor":var Se=ye.split(",");if(Se.length!==2)break;var ke=new n;if(ke.percent("x",Se[0]),ke.percent("y",Se[1]),!ke.has("x")||!ke.has("y"))break;ce.set(fe+"X",ke.get("x")),ce.set(fe+"Y",ke.get("y"));break;case"scroll":ce.alt(fe,ye,["up"]);break}},/=/,/\s/),ce.has("id")){var te=new(k.vttjs.VTTRegion||k.window.VTTRegion);te.width=ce.get("width",100),te.lines=ce.get("lines",3),te.regionAnchorX=ce.get("regionanchorX",0),te.regionAnchorY=ce.get("regionanchorY",100),te.viewportAnchorX=ce.get("viewportanchorX",0),te.viewportAnchorY=ce.get("viewportanchorY",100),te.scroll=ce.get("scroll",""),k.onregion&&k.onregion(te),k.regionList.push({id:ce.get("id"),region:te})}}function H(oe){var ce=new n;s(oe,function(te,fe){switch(te){case"MPEGT":ce.integer(te+"S",fe);break;case"LOCA":ce.set(te+"L",r(fe));break}},/[^\d]:/,/,/),k.ontimestampmap&&k.ontimestampmap({MPEGTS:ce.get("MPEGTS"),LOCAL:ce.get("LOCAL")})}function re(oe){oe.match(/X-TIMESTAMP-MAP/)?s(oe,function(ce,te){switch(ce){case"X-TIMESTAMP-MAP":H(te);break}},/=/):s(oe,function(ce,te){switch(ce){case"Region":G(te);break}},/:/)}try{var se;if(k.state==="INITIAL"){if(!/\r\n|\n/.test(k.buffer))return this;se=q();var de=se.match(/^WEBVTT([ \t].*)?$/);if(!de||!de[0])throw new t(t.Errors.BadSignature);k.state="HEADER"}for(var me=!1;k.buffer;){if(!/\r\n|\n/.test(k.buffer))return this;switch(me?me=!1:se=q(),k.state){case"HEADER":/:/.test(se)?re(se):se||(k.state="ID");continue;case"NOTE":se||(k.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(se)){k.state="NOTE";break}if(!se)continue;k.cue=new(k.vttjs.VTTCue||k.window.VTTCue)(0,0,"");try{k.cue.align="center"}catch{k.cue.align="middle"}if(k.state="CUE",se.indexOf("-->")===-1){k.cue.id=se;continue}case"CUE":try{a(se,k.cue,k.regionList)}catch(oe){k.reportOrThrowError(oe),k.cue=null,k.state="BADCUE";continue}k.state="CUETEXT";continue;case"CUETEXT":var ue=se.indexOf("-->")!==-1;if(!se||ue&&(me=!0)){k.oncue&&k.oncue(k.cue),k.cue=null,k.state="ID";continue}k.cue.text&&(k.cue.text+=`
`),k.cue.text+=se.replace(/\u2028/g,`
`).replace(/u2029/g,`
`);continue;case"BADCUE":se||(k.state="ID");continue}}}catch(oe){k.reportOrThrowError(oe),k.state==="CUETEXT"&&k.cue&&k.oncue&&k.oncue(k.cue),k.cue=null,k.state=k.state==="INITIAL"?"BADWEBVTT":"BADCUE"}return this},flush:function(){var M=this;try{if(M.buffer+=M.decoder.decode(),(M.cue||M.state==="HEADER")&&(M.buffer+=`

`,M.parse()),M.state==="INITIAL")throw new t(t.Errors.BadSignature)}catch(k){M.reportOrThrowError(k)}return M.onflush&&M.onflush(),this}},PS=A,PS}var RS,fL;function ire(){if(fL)return RS;fL=1;var i="auto",e={"":1,lr:1,rl:1},t={start:1,center:1,end:1,left:1,right:1,auto:1,"line-left":1,"line-right":1};function r(a){if(typeof a!="string")return!1;var o=e[a.toLowerCase()];return o?a.toLowerCase():!1}function n(a){if(typeof a!="string")return!1;var o=t[a.toLowerCase()];return o?a.toLowerCase():!1}function s(a,o,l){this.hasBeenReset=!1;var u="",c=!1,h=a,m=o,g=l,y=null,_="",T=!0,E="auto",w="start",D="auto",R="auto",A=100,L="center";Object.defineProperties(this,{id:{enumerable:!0,get:function(){return u},set:function(F){u=""+F}},pauseOnExit:{enumerable:!0,get:function(){return c},set:function(F){c=!!F}},startTime:{enumerable:!0,get:function(){return h},set:function(F){if(typeof F!="number")throw new TypeError("Start time must be set to a number.");h=F,this.hasBeenReset=!0}},endTime:{enumerable:!0,get:function(){return m},set:function(F){if(typeof F!="number")throw new TypeError("End time must be set to a number.");m=F,this.hasBeenReset=!0}},text:{enumerable:!0,get:function(){return g},set:function(F){g=""+F,this.hasBeenReset=!0}},region:{enumerable:!0,get:function(){return y},set:function(F){y=F,this.hasBeenReset=!0}},vertical:{enumerable:!0,get:function(){return _},set:function(F){var B=r(F);if(B===!1)throw new SyntaxError("Vertical: an invalid or illegal direction string was specified.");_=B,this.hasBeenReset=!0}},snapToLines:{enumerable:!0,get:function(){return T},set:function(F){T=!!F,this.hasBeenReset=!0}},line:{enumerable:!0,get:function(){return E},set:function(F){if(typeof F!="number"&&F!==i)throw new SyntaxError("Line: an invalid number or illegal string was specified.");E=F,this.hasBeenReset=!0}},lineAlign:{enumerable:!0,get:function(){return w},set:function(F){var B=n(F);B?(w=B,this.hasBeenReset=!0):console.warn("lineAlign: an invalid or illegal string was specified.")}},position:{enumerable:!0,get:function(){return D},set:function(F){if(F<0||F>100)throw new Error("Position must be between 0 and 100.");D=F,this.hasBeenReset=!0}},positionAlign:{enumerable:!0,get:function(){return R},set:function(F){var B=n(F);B?(R=B,this.hasBeenReset=!0):console.warn("positionAlign: an invalid or illegal string was specified.")}},size:{enumerable:!0,get:function(){return A},set:function(F){if(F<0||F>100)throw new Error("Size must be between 0 and 100.");A=F,this.hasBeenReset=!0}},align:{enumerable:!0,get:function(){return L},set:function(F){var B=n(F);if(!B)throw new SyntaxError("align: an invalid or illegal alignment string was specified.");L=B,this.hasBeenReset=!0}}}),this.displayState=void 0}return s.prototype.getCueAsHTML=function(){return WebVTT.convertCueToDOMTree(window,this.text)},RS=s,RS}var LS,pL;function nre(){if(pL)return LS;pL=1;var i={"":!0,up:!0};function e(n){if(typeof n!="string")return!1;var s=i[n.toLowerCase()];return s?n.toLowerCase():!1}function t(n){return typeof n=="number"&&n>=0&&n<=100}function r(){var n=100,s=3,a=0,o=100,l=0,u=100,c="";Object.defineProperties(this,{width:{enumerable:!0,get:function(){return n},set:function(h){if(!t(h))throw new Error("Width must be between 0 and 100.");n=h}},lines:{enumerable:!0,get:function(){return s},set:function(h){if(typeof h!="number")throw new TypeError("Lines must be set to a number.");s=h}},regionAnchorY:{enumerable:!0,get:function(){return o},set:function(h){if(!t(h))throw new Error("RegionAnchorX must be between 0 and 100.");o=h}},regionAnchorX:{enumerable:!0,get:function(){return a},set:function(h){if(!t(h))throw new Error("RegionAnchorY must be between 0 and 100.");a=h}},viewportAnchorY:{enumerable:!0,get:function(){return u},set:function(h){if(!t(h))throw new Error("ViewportAnchorY must be between 0 and 100.");u=h}},viewportAnchorX:{enumerable:!0,get:function(){return l},set:function(h){if(!t(h))throw new Error("ViewportAnchorX must be between 0 and 100.");l=h}},scroll:{enumerable:!0,get:function(){return c},set:function(h){var m=e(h);m===!1?console.warn("Scroll: an invalid or illegal string was specified."):c=m}}})}return LS=r,LS}var mL;function sre(){if(mL)return DS.exports;mL=1;var i=Dp(),e=DS.exports={WebVTT:rre(),VTTCue:ire(),VTTRegion:nre()};i.vttjs=e,i.WebVTT=e.WebVTT;var t=e.VTTCue,r=e.VTTRegion,n=i.VTTCue,s=i.VTTRegion;return e.shim=function(){i.VTTCue=t,i.VTTRegion=r},e.restore=function(){i.VTTCue=n,i.VTTRegion=s},i.VTTCue||e.shim(),DS.exports}var are=sre();const g_=ia(are);var gL="https://example.com",eg=function(e,t){if(/^[a-z]+:/i.test(t))return t;/^data:/.test(e)&&(e=X.location&&X.location.href||"");var r=/^\/\//.test(e),n=!X.location&&!/\/\//i.test(e);e=new X.URL(e,X.location||gL);var s=new URL(t,e);return n?s.href.slice(gL.length):r?s.href.slice(s.protocol.length):s.href},Uw=(function(){function i(){this.listeners={}}var e=i.prototype;return e.on=function(r,n){this.listeners[r]||(this.listeners[r]=[]),this.listeners[r].push(n)},e.off=function(r,n){if(!this.listeners[r])return!1;var s=this.listeners[r].indexOf(n);return this.listeners[r]=this.listeners[r].slice(0),this.listeners[r].splice(s,1),s>-1},e.trigger=function(r){var n=this.listeners[r];if(n)if(arguments.length===2)for(var s=n.length,a=0;a<s;++a)n[a].call(this,arguments[1]);else for(var o=Array.prototype.slice.call(arguments,1),l=n.length,u=0;u<l;++u)n[u].apply(this,o)},e.dispose=function(){this.listeners={}},e.pipe=function(r){this.on("data",function(n){r.push(n)})},i})(),ore=function(e){return X.atob?X.atob(e):Buffer.from(e,"base64").toString("binary")};function O8(i){for(var e=ore(i),t=new Uint8Array(e.length),r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}/*! @name m3u8-parser @version 7.2.0 @license Apache-2.0 */let lre=class extends Uw{constructor(){super(),this.buffer=""}push(e){let t;for(this.buffer+=e,t=this.buffer.indexOf(`
`);t>-1;t=this.buffer.indexOf(`
`))this.trigger("data",this.buffer.substring(0,t)),this.buffer=this.buffer.substring(t+1)}};const ure="	",OS=function(i){const e=/([0-9.]*)?@?([0-9.]*)?/.exec(i||""),t={};return e[1]&&(t.length=parseInt(e[1],10)),e[2]&&(t.offset=parseInt(e[2],10)),t},cre=function(){const t="(?:"+"[^=]*"+")=(?:"+'"[^"]*"|[^,]*'+")";return new RegExp("(?:^|,)("+t+")")},zs=function(i){const e={};if(!i)return e;const t=i.split(cre());let r=t.length,n;for(;r--;)t[r]!==""&&(n=/([^=]*)=(.*)/.exec(t[r]).slice(1),n[0]=n[0].replace(/^\s+|\s+$/g,""),n[1]=n[1].replace(/^\s+|\s+$/g,""),n[1]=n[1].replace(/^['"](.*)['"]$/g,"$1"),e[n[0]]=n[1]);return e},vL=i=>{const e=i.split("x"),t={};return e[0]&&(t.width=parseInt(e[0],10)),e[1]&&(t.height=parseInt(e[1],10)),t};let dre=class extends Uw{constructor(){super(),this.customParsers=[],this.tagMappers=[]}push(e){let t,r;if(e=e.trim(),e.length===0)return;if(e[0]!=="#"){this.trigger("data",{type:"uri",uri:e});return}this.tagMappers.reduce((s,a)=>{const o=a(e);return o===e?s:s.concat([o])},[e]).forEach(s=>{for(let a=0;a<this.customParsers.length;a++)if(this.customParsers[a].call(this,s))return;if(s.indexOf("#EXT")!==0){this.trigger("data",{type:"comment",text:s.slice(1)});return}if(s=s.replace("\r",""),t=/^#EXTM3U/.exec(s),t){this.trigger("data",{type:"tag",tagType:"m3u"});return}if(t=/^#EXTINF:([0-9\.]*)?,?(.*)?$/.exec(s),t){r={type:"tag",tagType:"inf"},t[1]&&(r.duration=parseFloat(t[1])),t[2]&&(r.title=t[2]),this.trigger("data",r);return}if(t=/^#EXT-X-TARGETDURATION:([0-9.]*)?/.exec(s),t){r={type:"tag",tagType:"targetduration"},t[1]&&(r.duration=parseInt(t[1],10)),this.trigger("data",r);return}if(t=/^#EXT-X-VERSION:([0-9.]*)?/.exec(s),t){r={type:"tag",tagType:"version"},t[1]&&(r.version=parseInt(t[1],10)),this.trigger("data",r);return}if(t=/^#EXT-X-MEDIA-SEQUENCE:(\-?[0-9.]*)?/.exec(s),t){r={type:"tag",tagType:"media-sequence"},t[1]&&(r.number=parseInt(t[1],10)),this.trigger("data",r);return}if(t=/^#EXT-X-DISCONTINUITY-SEQUENCE:(\-?[0-9.]*)?/.exec(s),t){r={type:"tag",tagType:"discontinuity-sequence"},t[1]&&(r.number=parseInt(t[1],10)),this.trigger("data",r);return}if(t=/^#EXT-X-PLAYLIST-TYPE:(.*)?$/.exec(s),t){r={type:"tag",tagType:"playlist-type"},t[1]&&(r.playlistType=t[1]),this.trigger("data",r);return}if(t=/^#EXT-X-BYTERANGE:(.*)?$/.exec(s),t){r=Jt(OS(t[1]),{type:"tag",tagType:"byterange"}),this.trigger("data",r);return}if(t=/^#EXT-X-ALLOW-CACHE:(YES|NO)?/.exec(s),t){r={type:"tag",tagType:"allow-cache"},t[1]&&(r.allowed=!/NO/.test(t[1])),this.trigger("data",r);return}if(t=/^#EXT-X-MAP:(.*)$/.exec(s),t){if(r={type:"tag",tagType:"map"},t[1]){const a=zs(t[1]);a.URI&&(r.uri=a.URI),a.BYTERANGE&&(r.byterange=OS(a.BYTERANGE))}this.trigger("data",r);return}if(t=/^#EXT-X-STREAM-INF:(.*)$/.exec(s),t){r={type:"tag",tagType:"stream-inf"},t[1]&&(r.attributes=zs(t[1]),r.attributes.RESOLUTION&&(r.attributes.RESOLUTION=vL(r.attributes.RESOLUTION)),r.attributes.BANDWIDTH&&(r.attributes.BANDWIDTH=parseInt(r.attributes.BANDWIDTH,10)),r.attributes["FRAME-RATE"]&&(r.attributes["FRAME-RATE"]=parseFloat(r.attributes["FRAME-RATE"])),r.attributes["PROGRAM-ID"]&&(r.attributes["PROGRAM-ID"]=parseInt(r.attributes["PROGRAM-ID"],10))),this.trigger("data",r);return}if(t=/^#EXT-X-MEDIA:(.*)$/.exec(s),t){r={type:"tag",tagType:"media"},t[1]&&(r.attributes=zs(t[1])),this.trigger("data",r);return}if(t=/^#EXT-X-ENDLIST/.exec(s),t){this.trigger("data",{type:"tag",tagType:"endlist"});return}if(t=/^#EXT-X-DISCONTINUITY/.exec(s),t){this.trigger("data",{type:"tag",tagType:"discontinuity"});return}if(t=/^#EXT-X-PROGRAM-DATE-TIME:(.*)$/.exec(s),t){r={type:"tag",tagType:"program-date-time"},t[1]&&(r.dateTimeString=t[1],r.dateTimeObject=new Date(t[1])),this.trigger("data",r);return}if(t=/^#EXT-X-KEY:(.*)$/.exec(s),t){r={type:"tag",tagType:"key"},t[1]&&(r.attributes=zs(t[1]),r.attributes.IV&&(r.attributes.IV.substring(0,2).toLowerCase()==="0x"&&(r.attributes.IV=r.attributes.IV.substring(2)),r.attributes.IV=r.attributes.IV.match(/.{8}/g),r.attributes.IV[0]=parseInt(r.attributes.IV[0],16),r.attributes.IV[1]=parseInt(r.attributes.IV[1],16),r.attributes.IV[2]=parseInt(r.attributes.IV[2],16),r.attributes.IV[3]=parseInt(r.attributes.IV[3],16),r.attributes.IV=new Uint32Array(r.attributes.IV))),this.trigger("data",r);return}if(t=/^#EXT-X-START:(.*)$/.exec(s),t){r={type:"tag",tagType:"start"},t[1]&&(r.attributes=zs(t[1]),r.attributes["TIME-OFFSET"]=parseFloat(r.attributes["TIME-OFFSET"]),r.attributes.PRECISE=/YES/.test(r.attributes.PRECISE)),this.trigger("data",r);return}if(t=/^#EXT-X-CUE-OUT-CONT:(.*)?$/.exec(s),t){r={type:"tag",tagType:"cue-out-cont"},t[1]?r.data=t[1]:r.data="",this.trigger("data",r);return}if(t=/^#EXT-X-CUE-OUT:(.*)?$/.exec(s),t){r={type:"tag",tagType:"cue-out"},t[1]?r.data=t[1]:r.data="",this.trigger("data",r);return}if(t=/^#EXT-X-CUE-IN:?(.*)?$/.exec(s),t){r={type:"tag",tagType:"cue-in"},t[1]?r.data=t[1]:r.data="",this.trigger("data",r);return}if(t=/^#EXT-X-SKIP:(.*)$/.exec(s),t&&t[1]){r={type:"tag",tagType:"skip"},r.attributes=zs(t[1]),r.attributes.hasOwnProperty("SKIPPED-SEGMENTS")&&(r.attributes["SKIPPED-SEGMENTS"]=parseInt(r.attributes["SKIPPED-SEGMENTS"],10)),r.attributes.hasOwnProperty("RECENTLY-REMOVED-DATERANGES")&&(r.attributes["RECENTLY-REMOVED-DATERANGES"]=r.attributes["RECENTLY-REMOVED-DATERANGES"].split(ure)),this.trigger("data",r);return}if(t=/^#EXT-X-PART:(.*)$/.exec(s),t&&t[1]){r={type:"tag",tagType:"part"},r.attributes=zs(t[1]),["DURATION"].forEach(function(a){r.attributes.hasOwnProperty(a)&&(r.attributes[a]=parseFloat(r.attributes[a]))}),["INDEPENDENT","GAP"].forEach(function(a){r.attributes.hasOwnProperty(a)&&(r.attributes[a]=/YES/.test(r.attributes[a]))}),r.attributes.hasOwnProperty("BYTERANGE")&&(r.attributes.byterange=OS(r.attributes.BYTERANGE)),this.trigger("data",r);return}if(t=/^#EXT-X-SERVER-CONTROL:(.*)$/.exec(s),t&&t[1]){r={type:"tag",tagType:"server-control"},r.attributes=zs(t[1]),["CAN-SKIP-UNTIL","PART-HOLD-BACK","HOLD-BACK"].forEach(function(a){r.attributes.hasOwnProperty(a)&&(r.attributes[a]=parseFloat(r.attributes[a]))}),["CAN-SKIP-DATERANGES","CAN-BLOCK-RELOAD"].forEach(function(a){r.attributes.hasOwnProperty(a)&&(r.attributes[a]=/YES/.test(r.attributes[a]))}),this.trigger("data",r);return}if(t=/^#EXT-X-PART-INF:(.*)$/.exec(s),t&&t[1]){r={type:"tag",tagType:"part-inf"},r.attributes=zs(t[1]),["PART-TARGET"].forEach(function(a){r.attributes.hasOwnProperty(a)&&(r.attributes[a]=parseFloat(r.attributes[a]))}),this.trigger("data",r);return}if(t=/^#EXT-X-PRELOAD-HINT:(.*)$/.exec(s),t&&t[1]){r={type:"tag",tagType:"preload-hint"},r.attributes=zs(t[1]),["BYTERANGE-START","BYTERANGE-LENGTH"].forEach(function(a){if(r.attributes.hasOwnProperty(a)){r.attributes[a]=parseInt(r.attributes[a],10);const o=a==="BYTERANGE-LENGTH"?"length":"offset";r.attributes.byterange=r.attributes.byterange||{},r.attributes.byterange[o]=r.attributes[a],delete r.attributes[a]}}),this.trigger("data",r);return}if(t=/^#EXT-X-RENDITION-REPORT:(.*)$/.exec(s),t&&t[1]){r={type:"tag",tagType:"rendition-report"},r.attributes=zs(t[1]),["LAST-MSN","LAST-PART"].forEach(function(a){r.attributes.hasOwnProperty(a)&&(r.attributes[a]=parseInt(r.attributes[a],10))}),this.trigger("data",r);return}if(t=/^#EXT-X-DATERANGE:(.*)$/.exec(s),t&&t[1]){r={type:"tag",tagType:"daterange"},r.attributes=zs(t[1]),["ID","CLASS"].forEach(function(o){r.attributes.hasOwnProperty(o)&&(r.attributes[o]=String(r.attributes[o]))}),["START-DATE","END-DATE"].forEach(function(o){r.attributes.hasOwnProperty(o)&&(r.attributes[o]=new Date(r.attributes[o]))}),["DURATION","PLANNED-DURATION"].forEach(function(o){r.attributes.hasOwnProperty(o)&&(r.attributes[o]=parseFloat(r.attributes[o]))}),["END-ON-NEXT"].forEach(function(o){r.attributes.hasOwnProperty(o)&&(r.attributes[o]=/YES/i.test(r.attributes[o]))}),["SCTE35-CMD"," SCTE35-OUT","SCTE35-IN"].forEach(function(o){r.attributes.hasOwnProperty(o)&&(r.attributes[o]=r.attributes[o].toString(16))});const a=/^X-([A-Z]+-)+[A-Z]+$/;for(const o in r.attributes){if(!a.test(o))continue;const l=/[0-9A-Fa-f]{6}/g.test(r.attributes[o]),u=/^\d+(\.\d+)?$/.test(r.attributes[o]);r.attributes[o]=l?r.attributes[o].toString(16):u?parseFloat(r.attributes[o]):String(r.attributes[o])}this.trigger("data",r);return}if(t=/^#EXT-X-INDEPENDENT-SEGMENTS/.exec(s),t){this.trigger("data",{type:"tag",tagType:"independent-segments"});return}if(t=/^#EXT-X-I-FRAMES-ONLY/.exec(s),t){this.trigger("data",{type:"tag",tagType:"i-frames-only"});return}if(t=/^#EXT-X-CONTENT-STEERING:(.*)$/.exec(s),t){r={type:"tag",tagType:"content-steering"},r.attributes=zs(t[1]),this.trigger("data",r);return}if(t=/^#EXT-X-I-FRAME-STREAM-INF:(.*)$/.exec(s),t){r={type:"tag",tagType:"i-frame-playlist"},r.attributes=zs(t[1]),r.attributes.URI&&(r.uri=r.attributes.URI),r.attributes.BANDWIDTH&&(r.attributes.BANDWIDTH=parseInt(r.attributes.BANDWIDTH,10)),r.attributes.RESOLUTION&&(r.attributes.RESOLUTION=vL(r.attributes.RESOLUTION)),r.attributes["AVERAGE-BANDWIDTH"]&&(r.attributes["AVERAGE-BANDWIDTH"]=parseInt(r.attributes["AVERAGE-BANDWIDTH"],10)),r.attributes["FRAME-RATE"]&&(r.attributes["FRAME-RATE"]=parseFloat(r.attributes["FRAME-RATE"])),this.trigger("data",r);return}if(t=/^#EXT-X-DEFINE:(.*)$/.exec(s),t){r={type:"tag",tagType:"define"},r.attributes=zs(t[1]),this.trigger("data",r);return}this.trigger("data",{type:"tag",data:s.slice(4)})})}addParser({expression:e,customType:t,dataParser:r,segment:n}){typeof r!="function"&&(r=s=>s),this.customParsers.push(s=>{if(e.exec(s))return this.trigger("data",{type:"custom",data:r(s),customType:t,segment:n}),!0})}addTagMapper({expression:e,map:t}){const r=n=>e.test(n)?t(n):n;this.tagMappers.push(r)}};const hre=i=>i.toLowerCase().replace(/-(\w)/g,e=>e[1].toUpperCase()),Vc=function(i){const e={};return Object.keys(i).forEach(function(t){e[hre(t)]=i[t]}),e},MS=function(i){const{serverControl:e,targetDuration:t,partTargetDuration:r}=i;if(!e)return;const n="#EXT-X-SERVER-CONTROL",s="holdBack",a="partHoldBack",o=t&&t*3,l=r&&r*2;t&&!e.hasOwnProperty(s)&&(e[s]=o,this.trigger("info",{message:`${n} defaulting HOLD-BACK to targetDuration * 3 (${o}).`})),o&&e[s]<o&&(this.trigger("warn",{message:`${n} clamping HOLD-BACK (${e[s]}) to targetDuration * 3 (${o})`}),e[s]=o),r&&!e.hasOwnProperty(a)&&(e[a]=r*3,this.trigger("info",{message:`${n} defaulting PART-HOLD-BACK to partTargetDuration * 3 (${e[a]}).`})),r&&e[a]<l&&(this.trigger("warn",{message:`${n} clamping PART-HOLD-BACK (${e[a]}) to partTargetDuration * 2 (${l}).`}),e[a]=l)};let M8=class extends Uw{constructor(e={}){super(),this.lineStream=new lre,this.parseStream=new dre,this.lineStream.pipe(this.parseStream),this.mainDefinitions=e.mainDefinitions||{},this.params=new URL(e.uri,"https://a.com").searchParams,this.lastProgramDateTime=null;const t=this,r=[];let n={},s,a,o=!1;const l=function(){},u={AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},c="urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed";let h=0;this.manifest={allowCache:!0,discontinuityStarts:[],dateRanges:[],iFramePlaylists:[],segments:[]};let m=0,g=0;const y={};this.on("end",()=>{n.uri||!n.parts&&!n.preloadHints||(!n.map&&s&&(n.map=s),!n.key&&a&&(n.key=a),!n.timeline&&typeof h=="number"&&(n.timeline=h),this.manifest.preloadSegment=n)}),this.parseStream.on("data",function(_){let T,E;if(t.manifest.definitions){for(const w in t.manifest.definitions)if(_.uri&&(_.uri=_.uri.replace(`{$${w}}`,t.manifest.definitions[w])),_.attributes)for(const D in _.attributes)typeof _.attributes[D]=="string"&&(_.attributes[D]=_.attributes[D].replace(`{$${w}}`,t.manifest.definitions[w]))}({tag(){({version(){_.version&&(this.manifest.version=_.version)},"allow-cache"(){this.manifest.allowCache=_.allowed,"allowed"in _||(this.trigger("info",{message:"defaulting allowCache to YES"}),this.manifest.allowCache=!0)},byterange(){const w={};"length"in _&&(n.byterange=w,w.length=_.length,"offset"in _||(_.offset=m)),"offset"in _&&(n.byterange=w,w.offset=_.offset),m=w.offset+w.length},endlist(){this.manifest.endList=!0},inf(){"mediaSequence"in this.manifest||(this.manifest.mediaSequence=0,this.trigger("info",{message:"defaulting media sequence to zero"})),"discontinuitySequence"in this.manifest||(this.manifest.discontinuitySequence=0,this.trigger("info",{message:"defaulting discontinuity sequence to zero"})),_.title&&(n.title=_.title),_.duration>0&&(n.duration=_.duration),_.duration===0&&(n.duration=.01,this.trigger("info",{message:"updating zero segment duration to a small value"})),this.manifest.segments=r},key(){if(!_.attributes){this.trigger("warn",{message:"ignoring key declaration without attribute list"});return}if(_.attributes.METHOD==="NONE"){a=null;return}if(!_.attributes.URI){this.trigger("warn",{message:"ignoring key declaration without URI"});return}if(_.attributes.KEYFORMAT==="com.apple.streamingkeydelivery"){this.manifest.contentProtection=this.manifest.contentProtection||{},this.manifest.contentProtection["com.apple.fps.1_0"]={attributes:_.attributes};return}if(_.attributes.KEYFORMAT==="com.microsoft.playready"){this.manifest.contentProtection=this.manifest.contentProtection||{},this.manifest.contentProtection["com.microsoft.playready"]={uri:_.attributes.URI};return}if(_.attributes.KEYFORMAT===c){if(["SAMPLE-AES","SAMPLE-AES-CTR","SAMPLE-AES-CENC"].indexOf(_.attributes.METHOD)===-1){this.trigger("warn",{message:"invalid key method provided for Widevine"});return}if(_.attributes.METHOD==="SAMPLE-AES-CENC"&&this.trigger("warn",{message:"SAMPLE-AES-CENC is deprecated, please use SAMPLE-AES-CTR instead"}),_.attributes.URI.substring(0,23)!=="data:text/plain;base64,"){this.trigger("warn",{message:"invalid key URI provided for Widevine"});return}if(!(_.attributes.KEYID&&_.attributes.KEYID.substring(0,2)==="0x")){this.trigger("warn",{message:"invalid key ID provided for Widevine"});return}this.manifest.contentProtection=this.manifest.contentProtection||{},this.manifest.contentProtection["com.widevine.alpha"]={attributes:{schemeIdUri:_.attributes.KEYFORMAT,keyId:_.attributes.KEYID.substring(2)},pssh:O8(_.attributes.URI.split(",")[1])};return}_.attributes.METHOD||this.trigger("warn",{message:"defaulting key method to AES-128"}),a={method:_.attributes.METHOD||"AES-128",uri:_.attributes.URI},typeof _.attributes.IV<"u"&&(a.iv=_.attributes.IV)},"media-sequence"(){if(!isFinite(_.number)){this.trigger("warn",{message:"ignoring invalid media sequence: "+_.number});return}this.manifest.mediaSequence=_.number},"discontinuity-sequence"(){if(!isFinite(_.number)){this.trigger("warn",{message:"ignoring invalid discontinuity sequence: "+_.number});return}this.manifest.discontinuitySequence=_.number,h=_.number},"playlist-type"(){if(!/VOD|EVENT/.test(_.playlistType)){this.trigger("warn",{message:"ignoring unknown playlist type: "+_.playlist});return}this.manifest.playlistType=_.playlistType},map(){s={},_.uri&&(s.uri=_.uri),_.byterange&&(s.byterange=_.byterange),a&&(s.key=a)},"stream-inf"(){if(this.manifest.playlists=r,this.manifest.mediaGroups=this.manifest.mediaGroups||u,!_.attributes){this.trigger("warn",{message:"ignoring empty stream-inf attributes"});return}n.attributes||(n.attributes={}),Jt(n.attributes,_.attributes)},media(){if(this.manifest.mediaGroups=this.manifest.mediaGroups||u,!(_.attributes&&_.attributes.TYPE&&_.attributes["GROUP-ID"]&&_.attributes.NAME)){this.trigger("warn",{message:"ignoring incomplete or missing media group"});return}const w=this.manifest.mediaGroups[_.attributes.TYPE];w[_.attributes["GROUP-ID"]]=w[_.attributes["GROUP-ID"]]||{},T=w[_.attributes["GROUP-ID"]],E={default:/yes/i.test(_.attributes.DEFAULT)},E.default?E.autoselect=!0:E.autoselect=/yes/i.test(_.attributes.AUTOSELECT),_.attributes.LANGUAGE&&(E.language=_.attributes.LANGUAGE),_.attributes.URI&&(E.uri=_.attributes.URI),_.attributes["INSTREAM-ID"]&&(E.instreamId=_.attributes["INSTREAM-ID"]),_.attributes.CHARACTERISTICS&&(E.characteristics=_.attributes.CHARACTERISTICS),_.attributes.FORCED&&(E.forced=/yes/i.test(_.attributes.FORCED)),T[_.attributes.NAME]=E},discontinuity(){h+=1,n.discontinuity=!0,this.manifest.discontinuityStarts.push(r.length)},"program-date-time"(){typeof this.manifest.dateTimeString>"u"&&(this.manifest.dateTimeString=_.dateTimeString,this.manifest.dateTimeObject=_.dateTimeObject),n.dateTimeString=_.dateTimeString,n.dateTimeObject=_.dateTimeObject;const{lastProgramDateTime:w}=this;this.lastProgramDateTime=new Date(_.dateTimeString).getTime(),w===null&&this.manifest.segments.reduceRight((D,R)=>(R.programDateTime=D-R.duration*1e3,R.programDateTime),this.lastProgramDateTime)},targetduration(){if(!isFinite(_.duration)||_.duration<0){this.trigger("warn",{message:"ignoring invalid target duration: "+_.duration});return}this.manifest.targetDuration=_.duration,MS.call(this,this.manifest)},start(){if(!_.attributes||isNaN(_.attributes["TIME-OFFSET"])){this.trigger("warn",{message:"ignoring start declaration without appropriate attribute list"});return}this.manifest.start={timeOffset:_.attributes["TIME-OFFSET"],precise:_.attributes.PRECISE}},"cue-out"(){n.cueOut=_.data},"cue-out-cont"(){n.cueOutCont=_.data},"cue-in"(){n.cueIn=_.data},skip(){this.manifest.skip=Vc(_.attributes),this.warnOnMissingAttributes_("#EXT-X-SKIP",_.attributes,["SKIPPED-SEGMENTS"])},part(){o=!0;const w=this.manifest.segments.length,D=Vc(_.attributes);n.parts=n.parts||[],n.parts.push(D),D.byterange&&(D.byterange.hasOwnProperty("offset")||(D.byterange.offset=g),g=D.byterange.offset+D.byterange.length);const R=n.parts.length-1;this.warnOnMissingAttributes_(`#EXT-X-PART #${R} for segment #${w}`,_.attributes,["URI","DURATION"]),this.manifest.renditionReports&&this.manifest.renditionReports.forEach((A,L)=>{A.hasOwnProperty("lastPart")||this.trigger("warn",{message:`#EXT-X-RENDITION-REPORT #${L} lacks required attribute(s): LAST-PART`})})},"server-control"(){const w=this.manifest.serverControl=Vc(_.attributes);w.hasOwnProperty("canBlockReload")||(w.canBlockReload=!1,this.trigger("info",{message:"#EXT-X-SERVER-CONTROL defaulting CAN-BLOCK-RELOAD to false"})),MS.call(this,this.manifest),w.canSkipDateranges&&!w.hasOwnProperty("canSkipUntil")&&this.trigger("warn",{message:"#EXT-X-SERVER-CONTROL lacks required attribute CAN-SKIP-UNTIL which is required when CAN-SKIP-DATERANGES is set"})},"preload-hint"(){const w=this.manifest.segments.length,D=Vc(_.attributes),R=D.type&&D.type==="PART";n.preloadHints=n.preloadHints||[],n.preloadHints.push(D),D.byterange&&(D.byterange.hasOwnProperty("offset")||(D.byterange.offset=R?g:0,R&&(g=D.byterange.offset+D.byterange.length)));const A=n.preloadHints.length-1;if(this.warnOnMissingAttributes_(`#EXT-X-PRELOAD-HINT #${A} for segment #${w}`,_.attributes,["TYPE","URI"]),!!D.type)for(let L=0;L<n.preloadHints.length-1;L++){const F=n.preloadHints[L];F.type&&F.type===D.type&&this.trigger("warn",{message:`#EXT-X-PRELOAD-HINT #${A} for segment #${w} has the same TYPE ${D.type} as preload hint #${L}`})}},"rendition-report"(){const w=Vc(_.attributes);this.manifest.renditionReports=this.manifest.renditionReports||[],this.manifest.renditionReports.push(w);const D=this.manifest.renditionReports.length-1,R=["LAST-MSN","URI"];o&&R.push("LAST-PART"),this.warnOnMissingAttributes_(`#EXT-X-RENDITION-REPORT #${D}`,_.attributes,R)},"part-inf"(){this.manifest.partInf=Vc(_.attributes),this.warnOnMissingAttributes_("#EXT-X-PART-INF",_.attributes,["PART-TARGET"]),this.manifest.partInf.partTarget&&(this.manifest.partTargetDuration=this.manifest.partInf.partTarget),MS.call(this,this.manifest)},daterange(){this.manifest.dateRanges.push(Vc(_.attributes));const w=this.manifest.dateRanges.length-1;this.warnOnMissingAttributes_(`#EXT-X-DATERANGE #${w}`,_.attributes,["ID","START-DATE"]);const D=this.manifest.dateRanges[w];D.endDate&&D.startDate&&new Date(D.endDate)<new Date(D.startDate)&&this.trigger("warn",{message:"EXT-X-DATERANGE END-DATE must be equal to or later than the value of the START-DATE"}),D.duration&&D.duration<0&&this.trigger("warn",{message:"EXT-X-DATERANGE DURATION must not be negative"}),D.plannedDuration&&D.plannedDuration<0&&this.trigger("warn",{message:"EXT-X-DATERANGE PLANNED-DURATION must not be negative"});const R=!!D.endOnNext;if(R&&!D.class&&this.trigger("warn",{message:"EXT-X-DATERANGE with an END-ON-NEXT=YES attribute must have a CLASS attribute"}),R&&(D.duration||D.endDate)&&this.trigger("warn",{message:"EXT-X-DATERANGE with an END-ON-NEXT=YES attribute must not contain DURATION or END-DATE attributes"}),D.duration&&D.endDate){const L=D.startDate.getTime()+D.duration*1e3;this.manifest.dateRanges[w].endDate=new Date(L)}if(!y[D.id])y[D.id]=D;else{for(const L in y[D.id])if(D[L]&&JSON.stringify(y[D.id][L])!==JSON.stringify(D[L])){this.trigger("warn",{message:"EXT-X-DATERANGE tags with the same ID in a playlist must have the same attributes values"});break}const A=this.manifest.dateRanges.findIndex(L=>L.id===D.id);this.manifest.dateRanges[A]=Jt(this.manifest.dateRanges[A],D),y[D.id]=Jt(y[D.id],D),this.manifest.dateRanges.pop()}},"independent-segments"(){this.manifest.independentSegments=!0},"i-frames-only"(){this.manifest.iFramesOnly=!0,this.requiredCompatibilityversion(this.manifest.version,4)},"content-steering"(){this.manifest.contentSteering=Vc(_.attributes),this.warnOnMissingAttributes_("#EXT-X-CONTENT-STEERING",_.attributes,["SERVER-URI"])},define(){this.manifest.definitions=this.manifest.definitions||{};const w=(D,R)=>{if(D in this.manifest.definitions){this.trigger("error",{message:`EXT-X-DEFINE: Duplicate name ${D}`});return}this.manifest.definitions[D]=R};if("QUERYPARAM"in _.attributes){if("NAME"in _.attributes||"IMPORT"in _.attributes){this.trigger("error",{message:"EXT-X-DEFINE: Invalid attributes"});return}const D=this.params.get(_.attributes.QUERYPARAM);if(!D){this.trigger("error",{message:`EXT-X-DEFINE: No query param ${_.attributes.QUERYPARAM}`});return}w(_.attributes.QUERYPARAM,decodeURIComponent(D));return}if("NAME"in _.attributes){if("IMPORT"in _.attributes){this.trigger("error",{message:"EXT-X-DEFINE: Invalid attributes"});return}if(!("VALUE"in _.attributes)||typeof _.attributes.VALUE!="string"){this.trigger("error",{message:`EXT-X-DEFINE: No value for ${_.attributes.NAME}`});return}w(_.attributes.NAME,_.attributes.VALUE);return}if("IMPORT"in _.attributes){if(!this.mainDefinitions[_.attributes.IMPORT]){this.trigger("error",{message:`EXT-X-DEFINE: No value ${_.attributes.IMPORT} to import, or IMPORT used on main playlist`});return}w(_.attributes.IMPORT,this.mainDefinitions[_.attributes.IMPORT]);return}this.trigger("error",{message:"EXT-X-DEFINE: No attribute"})},"i-frame-playlist"(){this.manifest.iFramePlaylists.push({attributes:_.attributes,uri:_.uri,timeline:h}),this.warnOnMissingAttributes_("#EXT-X-I-FRAME-STREAM-INF",_.attributes,["BANDWIDTH","URI"])}}[_.tagType]||l).call(t)},uri(){n.uri=_.uri,r.push(n),this.manifest.targetDuration&&!("duration"in n)&&(this.trigger("warn",{message:"defaulting segment duration to the target duration"}),n.duration=this.manifest.targetDuration),a&&(n.key=a),n.timeline=h,s&&(n.map=s),g=0,this.lastProgramDateTime!==null&&(n.programDateTime=this.lastProgramDateTime,this.lastProgramDateTime+=n.duration*1e3),n={}},comment(){},custom(){_.segment?(n.custom=n.custom||{},n.custom[_.customType]=_.data):(this.manifest.custom=this.manifest.custom||{},this.manifest.custom[_.customType]=_.data)}})[_.type].call(t)})}requiredCompatibilityversion(e,t){(e<t||!e)&&this.trigger("warn",{message:`manifest must be at least version ${t}`})}warnOnMissingAttributes_(e,t,r){const n=[];r.forEach(function(s){t.hasOwnProperty(s)||n.push(s)}),n.length&&this.trigger("warn",{message:`${e} lacks required attribute(s): ${n.join(", ")}`})}push(e){this.lineStream.push(e)}end(){this.lineStream.push(`
`),this.manifest.dateRanges.length&&this.lastProgramDateTime===null&&this.trigger("warn",{message:"A playlist with EXT-X-DATERANGE tag must contain atleast one EXT-X-PROGRAM-DATE-TIME tag"}),this.lastProgramDateTime=null,this.trigger("end")}addParser(e){this.parseStream.addParser(e)}addTagMapper(e){this.parseStream.addTagMapper(e)}};var fh={mp4:/^(av0?1|avc0?[1234]|vp0?9|flac|opus|mp3|mp4a|mp4v|stpp.ttml.im1t)/,webm:/^(vp0?[89]|av0?1|opus|vorbis)/,ogg:/^(vp0?[89]|theora|flac|opus|vorbis)/,video:/^(av0?1|avc0?[1234]|vp0?[89]|hvc1|hev1|theora|mp4v)/,audio:/^(mp4a|flac|vorbis|opus|ac-[34]|ec-3|alac|mp3|speex|aac)/,text:/^(stpp.ttml.im1t)/,muxerVideo:/^(avc0?1)/,muxerAudio:/^(mp4a)/,muxerText:/a^/},fre=["video","audio","text"],yL=["Video","Audio","Text"],$w=function(e){return e&&e.replace(/avc1\.(\d+)\.(\d+)/i,function(t,r,n){var s=("00"+Number(r).toString(16)).slice(-2),a=("00"+Number(n).toString(16)).slice(-2);return"avc1."+s+"00"+a})},Rn=function(e){e===void 0&&(e="");var t=e.split(","),r=[];return t.forEach(function(n){n=n.trim();var s;fre.forEach(function(a){var o=fh[a].exec(n.toLowerCase());if(!(!o||o.length<=1)){s=a;var l=n.substring(0,o[1].length),u=n.replace(l,"");r.push({type:l,details:u,mediaType:a})}}),s||r.push({type:n,details:"",mediaType:"unknown"})}),r},F8=function(e,t){if(!e.mediaGroups.AUDIO||!t)return null;var r=e.mediaGroups.AUDIO[t];if(!r)return null;for(var n in r){var s=r[n];if(s.default&&s.playlists)return Rn(s.playlists[0].attributes.CODECS)}return null},jw=function(e){return e===void 0&&(e=""),fh.audio.test(e.trim().toLowerCase())},pre=function(e){return e===void 0&&(e=""),fh.text.test(e.trim().toLowerCase())},du=function(e){if(!(!e||typeof e!="string")){var t=e.toLowerCase().split(",").map(function(s){return $w(s.trim())}),r="video";t.length===1&&jw(t[0])?r="audio":t.length===1&&pre(t[0])&&(r="application");var n="mp4";return t.every(function(s){return fh.mp4.test(s)})?n="mp4":t.every(function(s){return fh.webm.test(s)})?n="webm":t.every(function(s){return fh.ogg.test(s)})&&(n="ogg"),r+"/"+n+';codecs="'+e+'"'}},cu=function(e,t){return e===void 0&&(e=""),t===void 0&&(t=!1),X.MediaSource&&X.MediaSource.isTypeSupported&&X.MediaSource.isTypeSupported(du(e))||t&&X.ManagedMediaSource&&X.ManagedMediaSource.isTypeSupported&&X.ManagedMediaSource.isTypeSupported(du(e))||!1},jf=function(e){return e===void 0&&(e=""),e.toLowerCase().split(",").every(function(t){t=t.trim();for(var r=0;r<yL.length;r++){var n=yL[r];if(fh["muxer"+n].test(t))return!0}return!1})},v_="mp4a.40.2",B8="avc1.4d400d",mre=/^(audio|video|application)\/(x-|vnd\.apple\.)?mpegurl/i,gre=/^application\/dash\+xml/i,Yx=function(e){return mre.test(e)?"hls":gre.test(e)?"dash":e==="application/vnd.videojs.vhs+json"?"vhs-json":null},vre=function(e){return e.toString(2).length},yre=function(e){return Math.ceil(vre(e)/8)},zw=function(e){return ArrayBuffer.isView==="function"?ArrayBuffer.isView(e):e&&e.buffer instanceof ArrayBuffer},_re=function(e){return zw(e)},fr=function(e){return e instanceof Uint8Array?e:(!Array.isArray(e)&&!_re(e)&&!(e instanceof ArrayBuffer)&&(typeof e!="number"||typeof e=="number"&&e!==e?e=0:e=[e]),new Uint8Array(e&&e.buffer||e,e&&e.byteOffset||0,e&&e.byteLength||0))},ls=X.BigInt||Number,_C=[ls("0x1"),ls("0x100"),ls("0x10000"),ls("0x1000000"),ls("0x100000000"),ls("0x10000000000"),ls("0x1000000000000"),ls("0x100000000000000"),ls("0x10000000000000000")];(function(){var i=new Uint16Array([65484]),e=new Uint8Array(i.buffer,i.byteOffset,i.byteLength);return e[0]===255?"big":e[0]===204?"little":"unknown"})();var xre=function(e,t){var r=t===void 0?{}:t,n=r.signed,s=n===void 0?!1:n,a=r.le,o=a===void 0?!1:a;e=fr(e);var l=o?"reduce":"reduceRight",u=e[l]?e[l]:Array.prototype[l],c=u.call(e,function(m,g,y){var _=o?y:Math.abs(y+1-e.length);return m+ls(g)*_C[_]},ls(0));if(s){var h=_C[e.length]/ls(2)-ls(1);c=ls(c),c>h&&(c-=h,c-=h,c-=ls(2))}return Number(c)},Tre=function(e,t){var r={},n=r.le,s=n===void 0?!1:n;(typeof e!="bigint"&&typeof e!="number"||typeof e=="number"&&e!==e)&&(e=0),e=ls(e);for(var a=yre(e),o=new Uint8Array(new ArrayBuffer(a)),l=0;l<a;l++){var u=s?l:Math.abs(l+1-o.length);o[u]=Number(e/_C[l]&ls(255)),e<0&&(o[u]=Math.abs(~o[u]),o[u]-=l===0?1:2)}return o},Hw=function(e,t){if(typeof e!="string"&&e&&typeof e.toString=="function"&&(e=e.toString()),typeof e!="string")return new Uint8Array;t||(e=unescape(encodeURIComponent(e)));for(var r=new Uint8Array(e.length),n=0;n<e.length;n++)r[n]=e.charCodeAt(n);return r},N8=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];if(t=t.filter(function(o){return o&&(o.byteLength||o.length)&&typeof o!="string"}),t.length<=1)return fr(t[0]);var n=t.reduce(function(o,l,u){return o+(l.byteLength||l.length)},0),s=new Uint8Array(n),a=0;return t.forEach(function(o){o=fr(o),s.set(o,a),a+=o.byteLength}),s},Hi=function(e,t,r){var n=r===void 0?{}:r,s=n.offset,a=s===void 0?0:s,o=n.mask,l=o===void 0?[]:o;e=fr(e),t=fr(t);var u=t.every?t.every:Array.prototype.every;return t.length&&e.length-a>=t.length&&u.call(t,function(c,h){var m=l[h]?l[h]&e[a+h]:e[a+h];return c===m})},bre=function(e,t,r){t.forEach(function(n){for(var s in e.mediaGroups[n])for(var a in e.mediaGroups[n][s]){var o=e.mediaGroups[n][s][a];r(o,n,s,a)}})},km={},qu={},qd={},_L;function Qx(){if(_L)return qd;_L=1;function i(s,a,o){if(o===void 0&&(o=Array.prototype),s&&typeof o.find=="function")return o.find.call(s,a);for(var l=0;l<s.length;l++)if(Object.prototype.hasOwnProperty.call(s,l)){var u=s[l];if(a.call(void 0,u,l,s))return u}}function e(s,a){return a===void 0&&(a=Object),a&&typeof a.freeze=="function"?a.freeze(s):s}function t(s,a){if(s===null||typeof s!="object")throw new TypeError("target is not an object");for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(s[o]=a[o]);return s}var r=e({HTML:"text/html",isHTML:function(s){return s===r.HTML},XML_APPLICATION:"application/xml",XML_TEXT:"text/xml",XML_XHTML_APPLICATION:"application/xhtml+xml",XML_SVG_IMAGE:"image/svg+xml"}),n=e({HTML:"http://www.w3.org/1999/xhtml",isHTML:function(s){return s===n.HTML},SVG:"http://www.w3.org/2000/svg",XML:"http://www.w3.org/XML/1998/namespace",XMLNS:"http://www.w3.org/2000/xmlns/"});return qd.assign=t,qd.find=i,qd.freeze=e,qd.MIME_TYPE=r,qd.NAMESPACE=n,qd}var xL;function U8(){if(xL)return qu;xL=1;var i=Qx(),e=i.find,t=i.NAMESPACE;function r(ne){return ne!==""}function n(ne){return ne?ne.split(/[\t\n\f\r ]+/).filter(r):[]}function s(ne,he){return ne.hasOwnProperty(he)||(ne[he]=!0),ne}function a(ne){if(!ne)return[];var he=n(ne);return Object.keys(he.reduce(s,{}))}function o(ne){return function(he){return ne&&ne.indexOf(he)!==-1}}function l(ne,he){for(var Ce in ne)Object.prototype.hasOwnProperty.call(ne,Ce)&&(he[Ce]=ne[Ce])}function u(ne,he){var Ce=ne.prototype;if(!(Ce instanceof he)){let yt=function(){};var ze=yt;yt.prototype=he.prototype,yt=new yt,l(Ce,yt),ne.prototype=Ce=yt}Ce.constructor!=ne&&(typeof ne!="function"&&console.error("unknown Class:"+ne),Ce.constructor=ne)}var c={},h=c.ELEMENT_NODE=1,m=c.ATTRIBUTE_NODE=2,g=c.TEXT_NODE=3,y=c.CDATA_SECTION_NODE=4,_=c.ENTITY_REFERENCE_NODE=5,T=c.ENTITY_NODE=6,E=c.PROCESSING_INSTRUCTION_NODE=7,w=c.COMMENT_NODE=8,D=c.DOCUMENT_NODE=9,R=c.DOCUMENT_TYPE_NODE=10,A=c.DOCUMENT_FRAGMENT_NODE=11,L=c.NOTATION_NODE=12,F={},B={};F.INDEX_SIZE_ERR=(B[1]="Index size error",1),F.DOMSTRING_SIZE_ERR=(B[2]="DOMString size error",2);var M=F.HIERARCHY_REQUEST_ERR=(B[3]="Hierarchy request error",3);F.WRONG_DOCUMENT_ERR=(B[4]="Wrong document",4),F.INVALID_CHARACTER_ERR=(B[5]="Invalid character",5),F.NO_DATA_ALLOWED_ERR=(B[6]="No data allowed",6),F.NO_MODIFICATION_ALLOWED_ERR=(B[7]="No modification allowed",7);var k=F.NOT_FOUND_ERR=(B[8]="Not found",8);F.NOT_SUPPORTED_ERR=(B[9]="Not supported",9);var q=F.INUSE_ATTRIBUTE_ERR=(B[10]="Attribute in use",10);F.INVALID_STATE_ERR=(B[11]="Invalid state",11),F.SYNTAX_ERR=(B[12]="Syntax error",12),F.INVALID_MODIFICATION_ERR=(B[13]="Invalid modification",13),F.NAMESPACE_ERR=(B[14]="Invalid namespace",14),F.INVALID_ACCESS_ERR=(B[15]="Invalid access",15);function G(ne,he){if(he instanceof Error)var Ce=he;else Ce=this,Error.call(this,B[ne]),this.message=B[ne],Error.captureStackTrace&&Error.captureStackTrace(this,G);return Ce.code=ne,he&&(this.message=this.message+": "+he),Ce}G.prototype=Error.prototype,l(F,G);function H(){}H.prototype={length:0,item:function(ne){return ne>=0&&ne<this.length?this[ne]:null},toString:function(ne,he){for(var Ce=[],ze=0;ze<this.length;ze++)Jr(this[ze],Ce,ne,he);return Ce.join("")},filter:function(ne){return Array.prototype.filter.call(this,ne)},indexOf:function(ne){return Array.prototype.indexOf.call(this,ne)}};function re(ne,he){this._node=ne,this._refresh=he,se(this)}function se(ne){var he=ne._node._inc||ne._node.ownerDocument._inc;if(ne._inc!==he){var Ce=ne._refresh(ne._node);if(Ui(ne,"length",Ce.length),!ne.$$length||Ce.length<ne.$$length)for(var ze=Ce.length;ze in ne;ze++)Object.prototype.hasOwnProperty.call(ne,ze)&&delete ne[ze];l(Ce,ne),ne._inc=he}}re.prototype.item=function(ne){return se(this),this[ne]||null},u(re,H);function de(){}function me(ne,he){for(var Ce=ne.length;Ce--;)if(ne[Ce]===he)return Ce}function ue(ne,he,Ce,ze){if(ze?he[me(he,ze)]=Ce:he[he.length++]=Ce,ne){Ce.ownerElement=ne;var yt=ne.ownerDocument;yt&&(ze&&qe(yt,ne,ze),ke(yt,ne,Ce))}}function oe(ne,he,Ce){var ze=me(he,Ce);if(ze>=0){for(var yt=he.length-1;ze<yt;)he[ze]=he[++ze];if(he.length=yt,ne){var ir=ne.ownerDocument;ir&&(qe(ir,ne,Ce),Ce.ownerElement=null)}}else throw new G(k,new Error(ne.tagName+"@"+Ce))}de.prototype={length:0,item:H.prototype.item,getNamedItem:function(ne){for(var he=this.length;he--;){var Ce=this[he];if(Ce.nodeName==ne)return Ce}},setNamedItem:function(ne){var he=ne.ownerElement;if(he&&he!=this._ownerElement)throw new G(q);var Ce=this.getNamedItem(ne.nodeName);return ue(this._ownerElement,this,ne,Ce),Ce},setNamedItemNS:function(ne){var he=ne.ownerElement,Ce;if(he&&he!=this._ownerElement)throw new G(q);return Ce=this.getNamedItemNS(ne.namespaceURI,ne.localName),ue(this._ownerElement,this,ne,Ce),Ce},removeNamedItem:function(ne){var he=this.getNamedItem(ne);return oe(this._ownerElement,this,he),he},removeNamedItemNS:function(ne,he){var Ce=this.getNamedItemNS(ne,he);return oe(this._ownerElement,this,Ce),Ce},getNamedItemNS:function(ne,he){for(var Ce=this.length;Ce--;){var ze=this[Ce];if(ze.localName==he&&ze.namespaceURI==ne)return ze}return null}};function ce(){}ce.prototype={hasFeature:function(ne,he){return!0},createDocument:function(ne,he,Ce){var ze=new Se;if(ze.implementation=this,ze.childNodes=new H,ze.doctype=Ce||null,Ce&&ze.appendChild(Ce),he){var yt=ze.createElementNS(ne,he);ze.appendChild(yt)}return ze},createDocumentType:function(ne,he,Ce){var ze=new Gt;return ze.name=ne,ze.nodeName=ne,ze.publicId=he||"",ze.systemId=Ce||"",ze}};function te(){}te.prototype={firstChild:null,lastChild:null,previousSibling:null,nextSibling:null,attributes:null,parentNode:null,childNodes:null,ownerDocument:null,nodeValue:null,namespaceURI:null,prefix:null,localName:null,insertBefore:function(ne,he){return dt(this,ne,he)},replaceChild:function(ne,he){dt(this,ne,he,lt),he&&this.removeChild(he)},removeChild:function(ne){return et(this,ne)},appendChild:function(ne){return this.insertBefore(ne,null)},hasChildNodes:function(){return this.firstChild!=null},cloneNode:function(ne){return sn(this.ownerDocument||this,this,ne)},normalize:function(){for(var ne=this.firstChild;ne;){var he=ne.nextSibling;he&&he.nodeType==g&&ne.nodeType==g?(this.removeChild(he),ne.appendData(he.data)):(ne.normalize(),ne=he)}},isSupported:function(ne,he){return this.ownerDocument.implementation.hasFeature(ne,he)},hasAttributes:function(){return this.attributes.length>0},lookupPrefix:function(ne){for(var he=this;he;){var Ce=he._nsMap;if(Ce){for(var ze in Ce)if(Object.prototype.hasOwnProperty.call(Ce,ze)&&Ce[ze]===ne)return ze}he=he.nodeType==m?he.ownerDocument:he.parentNode}return null},lookupNamespaceURI:function(ne){for(var he=this;he;){var Ce=he._nsMap;if(Ce&&Object.prototype.hasOwnProperty.call(Ce,ne))return Ce[ne];he=he.nodeType==m?he.ownerDocument:he.parentNode}return null},isDefaultNamespace:function(ne){var he=this.lookupPrefix(ne);return he==null}};function fe(ne){return ne=="<"&&"&lt;"||ne==">"&&"&gt;"||ne=="&"&&"&amp;"||ne=='"'&&"&quot;"||"&#"+ne.charCodeAt()+";"}l(c,te),l(c,te.prototype);function ye(ne,he){if(he(ne))return!0;if(ne=ne.firstChild)do if(ye(ne,he))return!0;while(ne=ne.nextSibling)}function Se(){this.ownerDocument=this}function ke(ne,he,Ce){ne&&ne._inc++;var ze=Ce.namespaceURI;ze===t.XMLNS&&(he._nsMap[Ce.prefix?Ce.localName:""]=Ce.value)}function qe(ne,he,Ce,ze){ne&&ne._inc++;var yt=Ce.namespaceURI;yt===t.XMLNS&&delete he._nsMap[Ce.prefix?Ce.localName:""]}function vt(ne,he,Ce){if(ne&&ne._inc){ne._inc++;var ze=he.childNodes;if(Ce)ze[ze.length++]=Ce;else{for(var yt=he.firstChild,ir=0;yt;)ze[ir++]=yt,yt=yt.nextSibling;ze.length=ir,delete ze[ze.length]}}}function et(ne,he){var Ce=he.previousSibling,ze=he.nextSibling;return Ce?Ce.nextSibling=ze:ne.firstChild=ze,ze?ze.previousSibling=Ce:ne.lastChild=Ce,he.parentNode=null,he.previousSibling=null,he.nextSibling=null,vt(ne.ownerDocument,ne),he}function kt(ne){return ne&&(ne.nodeType===te.DOCUMENT_NODE||ne.nodeType===te.DOCUMENT_FRAGMENT_NODE||ne.nodeType===te.ELEMENT_NODE)}function pt(ne){return ne&&(Vt(ne)||Xe(ne)||Ut(ne)||ne.nodeType===te.DOCUMENT_FRAGMENT_NODE||ne.nodeType===te.COMMENT_NODE||ne.nodeType===te.PROCESSING_INSTRUCTION_NODE)}function Ut(ne){return ne&&ne.nodeType===te.DOCUMENT_TYPE_NODE}function Vt(ne){return ne&&ne.nodeType===te.ELEMENT_NODE}function Xe(ne){return ne&&ne.nodeType===te.TEXT_NODE}function Ue(ne,he){var Ce=ne.childNodes||[];if(e(Ce,Vt)||Ut(he))return!1;var ze=e(Ce,Ut);return!(he&&ze&&Ce.indexOf(ze)>Ce.indexOf(he))}function Le(ne,he){var Ce=ne.childNodes||[];function ze(ir){return Vt(ir)&&ir!==he}if(e(Ce,ze))return!1;var yt=e(Ce,Ut);return!(he&&yt&&Ce.indexOf(yt)>Ce.indexOf(he))}function Ne(ne,he,Ce){if(!kt(ne))throw new G(M,"Unexpected parent node type "+ne.nodeType);if(Ce&&Ce.parentNode!==ne)throw new G(k,"child not in parent");if(!pt(he)||Ut(he)&&ne.nodeType!==te.DOCUMENT_NODE)throw new G(M,"Unexpected node type "+he.nodeType+" for parent node type "+ne.nodeType)}function rt(ne,he,Ce){var ze=ne.childNodes||[],yt=he.childNodes||[];if(he.nodeType===te.DOCUMENT_FRAGMENT_NODE){var ir=yt.filter(Vt);if(ir.length>1||e(yt,Xe))throw new G(M,"More than one element or text in fragment");if(ir.length===1&&!Ue(ne,Ce))throw new G(M,"Element in fragment can not be inserted before doctype")}if(Vt(he)&&!Ue(ne,Ce))throw new G(M,"Only one element can be added and only after doctype");if(Ut(he)){if(e(ze,Ut))throw new G(M,"Only one doctype is allowed");var xe=e(ze,Vt);if(Ce&&ze.indexOf(xe)<ze.indexOf(Ce))throw new G(M,"Doctype can only be inserted before an element");if(!Ce&&xe)throw new G(M,"Doctype can not be appended since element is present")}}function lt(ne,he,Ce){var ze=ne.childNodes||[],yt=he.childNodes||[];if(he.nodeType===te.DOCUMENT_FRAGMENT_NODE){var ir=yt.filter(Vt);if(ir.length>1||e(yt,Xe))throw new G(M,"More than one element or text in fragment");if(ir.length===1&&!Le(ne,Ce))throw new G(M,"Element in fragment can not be inserted before doctype")}if(Vt(he)&&!Le(ne,Ce))throw new G(M,"Only one element can be added and only after doctype");if(Ut(he)){let Be=function(nt){return Ut(nt)&&nt!==Ce};var Pe=Be;if(e(ze,Be))throw new G(M,"Only one doctype is allowed");var xe=e(ze,Vt);if(Ce&&ze.indexOf(xe)<ze.indexOf(Ce))throw new G(M,"Doctype can only be inserted before an element")}}function dt(ne,he,Ce,ze){Ne(ne,he,Ce),ne.nodeType===te.DOCUMENT_NODE&&(ze||rt)(ne,he,Ce);var yt=he.parentNode;if(yt&&yt.removeChild(he),he.nodeType===A){var ir=he.firstChild;if(ir==null)return he;var xe=he.lastChild}else ir=xe=he;var Pe=Ce?Ce.previousSibling:ne.lastChild;ir.previousSibling=Pe,xe.nextSibling=Ce,Pe?Pe.nextSibling=ir:ne.firstChild=ir,Ce==null?ne.lastChild=xe:Ce.previousSibling=xe;do ir.parentNode=ne;while(ir!==xe&&(ir=ir.nextSibling));return vt(ne.ownerDocument||ne,ne),he.nodeType==A&&(he.firstChild=he.lastChild=null),he}function ut(ne,he){return he.parentNode&&he.parentNode.removeChild(he),he.parentNode=ne,he.previousSibling=ne.lastChild,he.nextSibling=null,he.previousSibling?he.previousSibling.nextSibling=he:ne.firstChild=he,ne.lastChild=he,vt(ne.ownerDocument,ne,he),he}Se.prototype={nodeName:"#document",nodeType:D,doctype:null,documentElement:null,_inc:1,insertBefore:function(ne,he){if(ne.nodeType==A){for(var Ce=ne.firstChild;Ce;){var ze=Ce.nextSibling;this.insertBefore(Ce,he),Ce=ze}return ne}return dt(this,ne,he),ne.ownerDocument=this,this.documentElement===null&&ne.nodeType===h&&(this.documentElement=ne),ne},removeChild:function(ne){return this.documentElement==ne&&(this.documentElement=null),et(this,ne)},replaceChild:function(ne,he){dt(this,ne,he,lt),ne.ownerDocument=this,he&&this.removeChild(he),Vt(ne)&&(this.documentElement=ne)},importNode:function(ne,he){return Ni(this,ne,he)},getElementById:function(ne){var he=null;return ye(this.documentElement,function(Ce){if(Ce.nodeType==h&&Ce.getAttribute("id")==ne)return he=Ce,!0}),he},getElementsByClassName:function(ne){var he=a(ne);return new re(this,function(Ce){var ze=[];return he.length>0&&ye(Ce.documentElement,function(yt){if(yt!==Ce&&yt.nodeType===h){var ir=yt.getAttribute("class");if(ir){var xe=ne===ir;if(!xe){var Pe=a(ir);xe=he.every(o(Pe))}xe&&ze.push(yt)}}}),ze})},createElement:function(ne){var he=new At;he.ownerDocument=this,he.nodeName=ne,he.tagName=ne,he.localName=ne,he.childNodes=new H;var Ce=he.attributes=new de;return Ce._ownerElement=he,he},createDocumentFragment:function(){var ne=new It;return ne.ownerDocument=this,ne.childNodes=new H,ne},createTextNode:function(ne){var he=new xr;return he.ownerDocument=this,he.appendData(ne),he},createComment:function(ne){var he=new zr;return he.ownerDocument=this,he.appendData(ne),he},createCDATASection:function(ne){var he=new cr;return he.ownerDocument=this,he.appendData(ne),he},createProcessingInstruction:function(ne,he){var Ce=new $t;return Ce.ownerDocument=this,Ce.tagName=Ce.nodeName=Ce.target=ne,Ce.nodeValue=Ce.data=he,Ce},createAttribute:function(ne){var he=new it;return he.ownerDocument=this,he.name=ne,he.nodeName=ne,he.localName=ne,he.specified=!0,he},createEntityReference:function(ne){var he=new Hr;return he.ownerDocument=this,he.nodeName=ne,he},createElementNS:function(ne,he){var Ce=new At,ze=he.split(":"),yt=Ce.attributes=new de;return Ce.childNodes=new H,Ce.ownerDocument=this,Ce.nodeName=he,Ce.tagName=he,Ce.namespaceURI=ne,ze.length==2?(Ce.prefix=ze[0],Ce.localName=ze[1]):Ce.localName=he,yt._ownerElement=Ce,Ce},createAttributeNS:function(ne,he){var Ce=new it,ze=he.split(":");return Ce.ownerDocument=this,Ce.nodeName=he,Ce.name=he,Ce.namespaceURI=ne,Ce.specified=!0,ze.length==2?(Ce.prefix=ze[0],Ce.localName=ze[1]):Ce.localName=he,Ce}},u(Se,te);function At(){this._nsMap={}}At.prototype={nodeType:h,hasAttribute:function(ne){return this.getAttributeNode(ne)!=null},getAttribute:function(ne){var he=this.getAttributeNode(ne);return he&&he.value||""},getAttributeNode:function(ne){return this.attributes.getNamedItem(ne)},setAttribute:function(ne,he){var Ce=this.ownerDocument.createAttribute(ne);Ce.value=Ce.nodeValue=""+he,this.setAttributeNode(Ce)},removeAttribute:function(ne){var he=this.getAttributeNode(ne);he&&this.removeAttributeNode(he)},appendChild:function(ne){return ne.nodeType===A?this.insertBefore(ne,null):ut(this,ne)},setAttributeNode:function(ne){return this.attributes.setNamedItem(ne)},setAttributeNodeNS:function(ne){return this.attributes.setNamedItemNS(ne)},removeAttributeNode:function(ne){return this.attributes.removeNamedItem(ne.nodeName)},removeAttributeNS:function(ne,he){var Ce=this.getAttributeNodeNS(ne,he);Ce&&this.removeAttributeNode(Ce)},hasAttributeNS:function(ne,he){return this.getAttributeNodeNS(ne,he)!=null},getAttributeNS:function(ne,he){var Ce=this.getAttributeNodeNS(ne,he);return Ce&&Ce.value||""},setAttributeNS:function(ne,he,Ce){var ze=this.ownerDocument.createAttributeNS(ne,he);ze.value=ze.nodeValue=""+Ce,this.setAttributeNode(ze)},getAttributeNodeNS:function(ne,he){return this.attributes.getNamedItemNS(ne,he)},getElementsByTagName:function(ne){return new re(this,function(he){var Ce=[];return ye(he,function(ze){ze!==he&&ze.nodeType==h&&(ne==="*"||ze.tagName==ne)&&Ce.push(ze)}),Ce})},getElementsByTagNameNS:function(ne,he){return new re(this,function(Ce){var ze=[];return ye(Ce,function(yt){yt!==Ce&&yt.nodeType===h&&(ne==="*"||yt.namespaceURI===ne)&&(he==="*"||yt.localName==he)&&ze.push(yt)}),ze})}},Se.prototype.getElementsByTagName=At.prototype.getElementsByTagName,Se.prototype.getElementsByTagNameNS=At.prototype.getElementsByTagNameNS,u(At,te);function it(){}it.prototype.nodeType=m,u(it,te);function Sr(){}Sr.prototype={data:"",substringData:function(ne,he){return this.data.substring(ne,ne+he)},appendData:function(ne){ne=this.data+ne,this.nodeValue=this.data=ne,this.length=ne.length},insertData:function(ne,he){this.replaceData(ne,0,he)},appendChild:function(ne){throw new Error(B[M])},deleteData:function(ne,he){this.replaceData(ne,he,"")},replaceData:function(ne,he,Ce){var ze=this.data.substring(0,ne),yt=this.data.substring(ne+he);Ce=ze+Ce+yt,this.nodeValue=this.data=Ce,this.length=Ce.length}},u(Sr,te);function xr(){}xr.prototype={nodeName:"#text",nodeType:g,splitText:function(ne){var he=this.data,Ce=he.substring(ne);he=he.substring(0,ne),this.data=this.nodeValue=he,this.length=he.length;var ze=this.ownerDocument.createTextNode(Ce);return this.parentNode&&this.parentNode.insertBefore(ze,this.nextSibling),ze}},u(xr,Sr);function zr(){}zr.prototype={nodeName:"#comment",nodeType:w},u(zr,Sr);function cr(){}cr.prototype={nodeName:"#cdata-section",nodeType:y},u(cr,Sr);function Gt(){}Gt.prototype.nodeType=R,u(Gt,te);function Er(){}Er.prototype.nodeType=L,u(Er,te);function Ir(){}Ir.prototype.nodeType=T,u(Ir,te);function Hr(){}Hr.prototype.nodeType=_,u(Hr,te);function It(){}It.prototype.nodeName="#document-fragment",It.prototype.nodeType=A,u(It,te);function $t(){}$t.prototype.nodeType=E,u($t,te);function Bi(){}Bi.prototype.serializeToString=function(ne,he,Ce){return zt.call(ne,he,Ce)},te.prototype.toString=zt;function zt(ne,he){var Ce=[],ze=this.nodeType==9&&this.documentElement||this,yt=ze.prefix,ir=ze.namespaceURI;if(ir&&yt==null){var yt=ze.lookupPrefix(ir);if(yt==null)var xe=[{namespace:ir,prefix:null}]}return Jr(this,Ce,ne,he,xe),Ce.join("")}function Dr(ne,he,Ce){var ze=ne.prefix||"",yt=ne.namespaceURI;if(!yt||ze==="xml"&&yt===t.XML||yt===t.XMLNS)return!1;for(var ir=Ce.length;ir--;){var xe=Ce[ir];if(xe.prefix===ze)return xe.namespace!==yt}return!0}function $r(ne,he,Ce){ne.push(" ",he,'="',Ce.replace(/[<>&"\t\n\r]/g,fe),'"')}function Jr(ne,he,Ce,ze,yt){if(yt||(yt=[]),ze)if(ne=ze(ne),ne){if(typeof ne=="string"){he.push(ne);return}}else return;switch(ne.nodeType){case h:var ir=ne.attributes,xe=ir.length,Pt=ne.firstChild,Pe=ne.tagName;Ce=t.isHTML(ne.namespaceURI)||Ce;var Be=Pe;if(!Ce&&!ne.prefix&&ne.namespaceURI){for(var nt,ct=0;ct<ir.length;ct++)if(ir.item(ct).name==="xmlns"){nt=ir.item(ct).value;break}if(!nt)for(var Rt=yt.length-1;Rt>=0;Rt--){var Ot=yt[Rt];if(Ot.prefix===""&&Ot.namespace===ne.namespaceURI){nt=Ot.namespace;break}}if(nt!==ne.namespaceURI)for(var Rt=yt.length-1;Rt>=0;Rt--){var Ot=yt[Rt];if(Ot.namespace===ne.namespaceURI){Ot.prefix&&(Be=Ot.prefix+":"+Pe);break}}}he.push("<",Be);for(var st=0;st<xe;st++){var _t=ir.item(st);_t.prefix=="xmlns"?yt.push({prefix:_t.localName,namespace:_t.value}):_t.nodeName=="xmlns"&&yt.push({prefix:"",namespace:_t.value})}for(var st=0;st<xe;st++){var _t=ir.item(st);if(Dr(_t,Ce,yt)){var jt=_t.prefix||"",Kt=_t.namespaceURI;$r(he,jt?"xmlns:"+jt:"xmlns",Kt),yt.push({prefix:jt,namespace:Kt})}Jr(_t,he,Ce,ze,yt)}if(Pe===Be&&Dr(ne,Ce,yt)){var jt=ne.prefix||"",Kt=ne.namespaceURI;$r(he,jt?"xmlns:"+jt:"xmlns",Kt),yt.push({prefix:jt,namespace:Kt})}if(Pt||Ce&&!/^(?:meta|link|img|br|hr|input)$/i.test(Pe)){if(he.push(">"),Ce&&/^script$/i.test(Pe))for(;Pt;)Pt.data?he.push(Pt.data):Jr(Pt,he,Ce,ze,yt.slice()),Pt=Pt.nextSibling;else for(;Pt;)Jr(Pt,he,Ce,ze,yt.slice()),Pt=Pt.nextSibling;he.push("</",Be,">")}else he.push("/>");return;case D:case A:for(var Pt=ne.firstChild;Pt;)Jr(Pt,he,Ce,ze,yt.slice()),Pt=Pt.nextSibling;return;case m:return $r(he,ne.name,ne.value);case g:return he.push(ne.data.replace(/[<&>]/g,fe));case y:return he.push("<![CDATA[",ne.data,"]]>");case w:return he.push("<!--",ne.data,"-->");case R:var sr=ne.publicId,mt=ne.systemId;if(he.push("<!DOCTYPE ",ne.name),sr)he.push(" PUBLIC ",sr),mt&&mt!="."&&he.push(" ",mt),he.push(">");else if(mt&&mt!=".")he.push(" SYSTEM ",mt,">");else{var dr=ne.internalSubset;dr&&he.push(" [",dr,"]"),he.push(">")}return;case E:return he.push("<?",ne.target," ",ne.data,"?>");case _:return he.push("&",ne.nodeName,";");default:he.push("??",ne.nodeName)}}function Ni(ne,he,Ce){var ze;switch(he.nodeType){case h:ze=he.cloneNode(!1),ze.ownerDocument=ne;case A:break;case m:Ce=!0;break}if(ze||(ze=he.cloneNode(!1)),ze.ownerDocument=ne,ze.parentNode=null,Ce)for(var yt=he.firstChild;yt;)ze.appendChild(Ni(ne,yt,Ce)),yt=yt.nextSibling;return ze}function sn(ne,he,Ce){var ze=new he.constructor;for(var yt in he)if(Object.prototype.hasOwnProperty.call(he,yt)){var ir=he[yt];typeof ir!="object"&&ir!=ze[yt]&&(ze[yt]=ir)}switch(he.childNodes&&(ze.childNodes=new H),ze.ownerDocument=ne,ze.nodeType){case h:var xe=he.attributes,Pe=ze.attributes=new de,Be=xe.length;Pe._ownerElement=ze;for(var nt=0;nt<Be;nt++)ze.setAttributeNode(sn(ne,xe.item(nt),!0));break;case m:Ce=!0}if(Ce)for(var ct=he.firstChild;ct;)ze.appendChild(sn(ne,ct,Ce)),ct=ct.nextSibling;return ze}function Ui(ne,he,Ce){ne[he]=Ce}try{if(Object.defineProperty){let ne=function(he){switch(he.nodeType){case h:case A:var Ce=[];for(he=he.firstChild;he;)he.nodeType!==7&&he.nodeType!==8&&Ce.push(ne(he)),he=he.nextSibling;return Ce.join("");default:return he.nodeValue}};var Wi=ne;Object.defineProperty(re.prototype,"length",{get:function(){return se(this),this.$$length}}),Object.defineProperty(te.prototype,"textContent",{get:function(){return ne(this)},set:function(he){switch(this.nodeType){case h:case A:for(;this.firstChild;)this.removeChild(this.firstChild);(he||String(he))&&this.appendChild(this.ownerDocument.createTextNode(he));break;default:this.data=he,this.value=he,this.nodeValue=he}}}),Ui=function(he,Ce,ze){he["$$"+Ce]=ze}}}catch{}return qu.DocumentType=Gt,qu.DOMException=G,qu.DOMImplementation=ce,qu.Element=At,qu.Node=te,qu.NodeList=H,qu.XMLSerializer=Bi,qu}var Am={},FS={},TL;function Sre(){return TL||(TL=1,(function(i){var e=Qx().freeze;i.XML_ENTITIES=e({amp:"&",apos:"'",gt:">",lt:"<",quot:'"'}),i.HTML_ENTITIES=e({Aacute:"",aacute:"",Abreve:"",abreve:"",ac:"",acd:"",acE:"",Acirc:"",acirc:"",acute:"",Acy:"",acy:"",AElig:"",aelig:"",af:"",Afr:"",afr:"",Agrave:"",agrave:"",alefsym:"",aleph:"",Alpha:"",alpha:"",Amacr:"",amacr:"",amalg:"",AMP:"&",amp:"&",And:"",and:"",andand:"",andd:"",andslope:"",andv:"",ang:"",ange:"",angle:"",angmsd:"",angmsdaa:"",angmsdab:"",angmsdac:"",angmsdad:"",angmsdae:"",angmsdaf:"",angmsdag:"",angmsdah:"",angrt:"",angrtvb:"",angrtvbd:"",angsph:"",angst:"",angzarr:"",Aogon:"",aogon:"",Aopf:"",aopf:"",ap:"",apacir:"",apE:"",ape:"",apid:"",apos:"'",ApplyFunction:"",approx:"",approxeq:"",Aring:"",aring:"",Ascr:"",ascr:"",Assign:"",ast:"*",asymp:"",asympeq:"",Atilde:"",atilde:"",Auml:"",auml:"",awconint:"",awint:"",backcong:"",backepsilon:"",backprime:"",backsim:"",backsimeq:"",Backslash:"",Barv:"",barvee:"",Barwed:"",barwed:"",barwedge:"",bbrk:"",bbrktbrk:"",bcong:"",Bcy:"",bcy:"",bdquo:"",becaus:"",Because:"",because:"",bemptyv:"",bepsi:"",bernou:"",Bernoullis:"",Beta:"",beta:"",beth:"",between:"",Bfr:"",bfr:"",bigcap:"",bigcirc:"",bigcup:"",bigodot:"",bigoplus:"",bigotimes:"",bigsqcup:"",bigstar:"",bigtriangledown:"",bigtriangleup:"",biguplus:"",bigvee:"",bigwedge:"",bkarow:"",blacklozenge:"",blacksquare:"",blacktriangle:"",blacktriangledown:"",blacktriangleleft:"",blacktriangleright:"",blank:"",blk12:"",blk14:"",blk34:"",block:"",bne:"=",bnequiv:"",bNot:"",bnot:"",Bopf:"",bopf:"",bot:"",bottom:"",bowtie:"",boxbox:"",boxDL:"",boxDl:"",boxdL:"",boxdl:"",boxDR:"",boxDr:"",boxdR:"",boxdr:"",boxH:"",boxh:"",boxHD:"",boxHd:"",boxhD:"",boxhd:"",boxHU:"",boxHu:"",boxhU:"",boxhu:"",boxminus:"",boxplus:"",boxtimes:"",boxUL:"",boxUl:"",boxuL:"",boxul:"",boxUR:"",boxUr:"",boxuR:"",boxur:"",boxV:"",boxv:"",boxVH:"",boxVh:"",boxvH:"",boxvh:"",boxVL:"",boxVl:"",boxvL:"",boxvl:"",boxVR:"",boxVr:"",boxvR:"",boxvr:"",bprime:"",Breve:"",breve:"",brvbar:"",Bscr:"",bscr:"",bsemi:"",bsim:"",bsime:"",bsol:"\\",bsolb:"",bsolhsub:"",bull:"",bullet:"",bump:"",bumpE:"",bumpe:"",Bumpeq:"",bumpeq:"",Cacute:"",cacute:"",Cap:"",cap:"",capand:"",capbrcup:"",capcap:"",capcup:"",capdot:"",CapitalDifferentialD:"",caps:"",caret:"",caron:"",Cayleys:"",ccaps:"",Ccaron:"",ccaron:"",Ccedil:"",ccedil:"",Ccirc:"",ccirc:"",Cconint:"",ccups:"",ccupssm:"",Cdot:"",cdot:"",cedil:"",Cedilla:"",cemptyv:"",cent:"",CenterDot:"",centerdot:"",Cfr:"",cfr:"",CHcy:"",chcy:"",check:"",checkmark:"",Chi:"",chi:"",cir:"",circ:"",circeq:"",circlearrowleft:"",circlearrowright:"",circledast:"",circledcirc:"",circleddash:"",CircleDot:"",circledR:"",circledS:"",CircleMinus:"",CirclePlus:"",CircleTimes:"",cirE:"",cire:"",cirfnint:"",cirmid:"",cirscir:"",ClockwiseContourIntegral:"",CloseCurlyDoubleQuote:"",CloseCurlyQuote:"",clubs:"",clubsuit:"",Colon:"",colon:":",Colone:"",colone:"",coloneq:"",comma:",",commat:"@",comp:"",compfn:"",complement:"",complexes:"",cong:"",congdot:"",Congruent:"",Conint:"",conint:"",ContourIntegral:"",Copf:"",copf:"",coprod:"",Coproduct:"",COPY:"",copy:"",copysr:"",CounterClockwiseContourIntegral:"",crarr:"",Cross:"",cross:"",Cscr:"",cscr:"",csub:"",csube:"",csup:"",csupe:"",ctdot:"",cudarrl:"",cudarrr:"",cuepr:"",cuesc:"",cularr:"",cularrp:"",Cup:"",cup:"",cupbrcap:"",CupCap:"",cupcap:"",cupcup:"",cupdot:"",cupor:"",cups:"",curarr:"",curarrm:"",curlyeqprec:"",curlyeqsucc:"",curlyvee:"",curlywedge:"",curren:"",curvearrowleft:"",curvearrowright:"",cuvee:"",cuwed:"",cwconint:"",cwint:"",cylcty:"",Dagger:"",dagger:"",daleth:"",Darr:"",dArr:"",darr:"",dash:"",Dashv:"",dashv:"",dbkarow:"",dblac:"",Dcaron:"",dcaron:"",Dcy:"",dcy:"",DD:"",dd:"",ddagger:"",ddarr:"",DDotrahd:"",ddotseq:"",deg:"",Del:"",Delta:"",delta:"",demptyv:"",dfisht:"",Dfr:"",dfr:"",dHar:"",dharl:"",dharr:"",DiacriticalAcute:"",DiacriticalDot:"",DiacriticalDoubleAcute:"",DiacriticalGrave:"`",DiacriticalTilde:"",diam:"",Diamond:"",diamond:"",diamondsuit:"",diams:"",die:"",DifferentialD:"",digamma:"",disin:"",div:"",divide:"",divideontimes:"",divonx:"",DJcy:"",djcy:"",dlcorn:"",dlcrop:"",dollar:"$",Dopf:"",dopf:"",Dot:"",dot:"",DotDot:"",doteq:"",doteqdot:"",DotEqual:"",dotminus:"",dotplus:"",dotsquare:"",doublebarwedge:"",DoubleContourIntegral:"",DoubleDot:"",DoubleDownArrow:"",DoubleLeftArrow:"",DoubleLeftRightArrow:"",DoubleLeftTee:"",DoubleLongLeftArrow:"",DoubleLongLeftRightArrow:"",DoubleLongRightArrow:"",DoubleRightArrow:"",DoubleRightTee:"",DoubleUpArrow:"",DoubleUpDownArrow:"",DoubleVerticalBar:"",DownArrow:"",Downarrow:"",downarrow:"",DownArrowBar:"",DownArrowUpArrow:"",DownBreve:"",downdownarrows:"",downharpoonleft:"",downharpoonright:"",DownLeftRightVector:"",DownLeftTeeVector:"",DownLeftVector:"",DownLeftVectorBar:"",DownRightTeeVector:"",DownRightVector:"",DownRightVectorBar:"",DownTee:"",DownTeeArrow:"",drbkarow:"",drcorn:"",drcrop:"",Dscr:"",dscr:"",DScy:"",dscy:"",dsol:"",Dstrok:"",dstrok:"",dtdot:"",dtri:"",dtrif:"",duarr:"",duhar:"",dwangle:"",DZcy:"",dzcy:"",dzigrarr:"",Eacute:"",eacute:"",easter:"",Ecaron:"",ecaron:"",ecir:"",Ecirc:"",ecirc:"",ecolon:"",Ecy:"",ecy:"",eDDot:"",Edot:"",eDot:"",edot:"",ee:"",efDot:"",Efr:"",efr:"",eg:"",Egrave:"",egrave:"",egs:"",egsdot:"",el:"",Element:"",elinters:"",ell:"",els:"",elsdot:"",Emacr:"",emacr:"",empty:"",emptyset:"",EmptySmallSquare:"",emptyv:"",EmptyVerySmallSquare:"",emsp:"",emsp13:"",emsp14:"",ENG:"",eng:"",ensp:"",Eogon:"",eogon:"",Eopf:"",eopf:"",epar:"",eparsl:"",eplus:"",epsi:"",Epsilon:"",epsilon:"",epsiv:"",eqcirc:"",eqcolon:"",eqsim:"",eqslantgtr:"",eqslantless:"",Equal:"",equals:"=",EqualTilde:"",equest:"",Equilibrium:"",equiv:"",equivDD:"",eqvparsl:"",erarr:"",erDot:"",Escr:"",escr:"",esdot:"",Esim:"",esim:"",Eta:"",eta:"",ETH:"",eth:"",Euml:"",euml:"",euro:"",excl:"!",exist:"",Exists:"",expectation:"",ExponentialE:"",exponentiale:"",fallingdotseq:"",Fcy:"",fcy:"",female:"",ffilig:"",fflig:"",ffllig:"",Ffr:"",ffr:"",filig:"",FilledSmallSquare:"",FilledVerySmallSquare:"",fjlig:"fj",flat:"",fllig:"",fltns:"",fnof:"",Fopf:"",fopf:"",ForAll:"",forall:"",fork:"",forkv:"",Fouriertrf:"",fpartint:"",frac12:"",frac13:"",frac14:"",frac15:"",frac16:"",frac18:"",frac23:"",frac25:"",frac34:"",frac35:"",frac38:"",frac45:"",frac56:"",frac58:"",frac78:"",frasl:"",frown:"",Fscr:"",fscr:"",gacute:"",Gamma:"",gamma:"",Gammad:"",gammad:"",gap:"",Gbreve:"",gbreve:"",Gcedil:"",Gcirc:"",gcirc:"",Gcy:"",gcy:"",Gdot:"",gdot:"",gE:"",ge:"",gEl:"",gel:"",geq:"",geqq:"",geqslant:"",ges:"",gescc:"",gesdot:"",gesdoto:"",gesdotol:"",gesl:"",gesles:"",Gfr:"",gfr:"",Gg:"",gg:"",ggg:"",gimel:"",GJcy:"",gjcy:"",gl:"",gla:"",glE:"",glj:"",gnap:"",gnapprox:"",gnE:"",gne:"",gneq:"",gneqq:"",gnsim:"",Gopf:"",gopf:"",grave:"`",GreaterEqual:"",GreaterEqualLess:"",GreaterFullEqual:"",GreaterGreater:"",GreaterLess:"",GreaterSlantEqual:"",GreaterTilde:"",Gscr:"",gscr:"",gsim:"",gsime:"",gsiml:"",Gt:"",GT:">",gt:">",gtcc:"",gtcir:"",gtdot:"",gtlPar:"",gtquest:"",gtrapprox:"",gtrarr:"",gtrdot:"",gtreqless:"",gtreqqless:"",gtrless:"",gtrsim:"",gvertneqq:"",gvnE:"",Hacek:"",hairsp:"",half:"",hamilt:"",HARDcy:"",hardcy:"",hArr:"",harr:"",harrcir:"",harrw:"",Hat:"^",hbar:"",Hcirc:"",hcirc:"",hearts:"",heartsuit:"",hellip:"",hercon:"",Hfr:"",hfr:"",HilbertSpace:"",hksearow:"",hkswarow:"",hoarr:"",homtht:"",hookleftarrow:"",hookrightarrow:"",Hopf:"",hopf:"",horbar:"",HorizontalLine:"",Hscr:"",hscr:"",hslash:"",Hstrok:"",hstrok:"",HumpDownHump:"",HumpEqual:"",hybull:"",hyphen:"",Iacute:"",iacute:"",ic:"",Icirc:"",icirc:"",Icy:"",icy:"",Idot:"",IEcy:"",iecy:"",iexcl:"",iff:"",Ifr:"",ifr:"",Igrave:"",igrave:"",ii:"",iiiint:"",iiint:"",iinfin:"",iiota:"",IJlig:"",ijlig:"",Im:"",Imacr:"",imacr:"",image:"",ImaginaryI:"",imagline:"",imagpart:"",imath:"",imof:"",imped:"",Implies:"",in:"",incare:"",infin:"",infintie:"",inodot:"",Int:"",int:"",intcal:"",integers:"",Integral:"",intercal:"",Intersection:"",intlarhk:"",intprod:"",InvisibleComma:"",InvisibleTimes:"",IOcy:"",iocy:"",Iogon:"",iogon:"",Iopf:"",iopf:"",Iota:"",iota:"",iprod:"",iquest:"",Iscr:"",iscr:"",isin:"",isindot:"",isinE:"",isins:"",isinsv:"",isinv:"",it:"",Itilde:"",itilde:"",Iukcy:"",iukcy:"",Iuml:"",iuml:"",Jcirc:"",jcirc:"",Jcy:"",jcy:"",Jfr:"",jfr:"",jmath:"",Jopf:"",jopf:"",Jscr:"",jscr:"",Jsercy:"",jsercy:"",Jukcy:"",jukcy:"",Kappa:"",kappa:"",kappav:"",Kcedil:"",kcedil:"",Kcy:"",kcy:"",Kfr:"",kfr:"",kgreen:"",KHcy:"",khcy:"",KJcy:"",kjcy:"",Kopf:"",kopf:"",Kscr:"",kscr:"",lAarr:"",Lacute:"",lacute:"",laemptyv:"",lagran:"",Lambda:"",lambda:"",Lang:"",lang:"",langd:"",langle:"",lap:"",Laplacetrf:"",laquo:"",Larr:"",lArr:"",larr:"",larrb:"",larrbfs:"",larrfs:"",larrhk:"",larrlp:"",larrpl:"",larrsim:"",larrtl:"",lat:"",lAtail:"",latail:"",late:"",lates:"",lBarr:"",lbarr:"",lbbrk:"",lbrace:"{",lbrack:"[",lbrke:"",lbrksld:"",lbrkslu:"",Lcaron:"",lcaron:"",Lcedil:"",lcedil:"",lceil:"",lcub:"{",Lcy:"",lcy:"",ldca:"",ldquo:"",ldquor:"",ldrdhar:"",ldrushar:"",ldsh:"",lE:"",le:"",LeftAngleBracket:"",LeftArrow:"",Leftarrow:"",leftarrow:"",LeftArrowBar:"",LeftArrowRightArrow:"",leftarrowtail:"",LeftCeiling:"",LeftDoubleBracket:"",LeftDownTeeVector:"",LeftDownVector:"",LeftDownVectorBar:"",LeftFloor:"",leftharpoondown:"",leftharpoonup:"",leftleftarrows:"",LeftRightArrow:"",Leftrightarrow:"",leftrightarrow:"",leftrightarrows:"",leftrightharpoons:"",leftrightsquigarrow:"",LeftRightVector:"",LeftTee:"",LeftTeeArrow:"",LeftTeeVector:"",leftthreetimes:"",LeftTriangle:"",LeftTriangleBar:"",LeftTriangleEqual:"",LeftUpDownVector:"",LeftUpTeeVector:"",LeftUpVector:"",LeftUpVectorBar:"",LeftVector:"",LeftVectorBar:"",lEg:"",leg:"",leq:"",leqq:"",leqslant:"",les:"",lescc:"",lesdot:"",lesdoto:"",lesdotor:"",lesg:"",lesges:"",lessapprox:"",lessdot:"",lesseqgtr:"",lesseqqgtr:"",LessEqualGreater:"",LessFullEqual:"",LessGreater:"",lessgtr:"",LessLess:"",lesssim:"",LessSlantEqual:"",LessTilde:"",lfisht:"",lfloor:"",Lfr:"",lfr:"",lg:"",lgE:"",lHar:"",lhard:"",lharu:"",lharul:"",lhblk:"",LJcy:"",ljcy:"",Ll:"",ll:"",llarr:"",llcorner:"",Lleftarrow:"",llhard:"",lltri:"",Lmidot:"",lmidot:"",lmoust:"",lmoustache:"",lnap:"",lnapprox:"",lnE:"",lne:"",lneq:"",lneqq:"",lnsim:"",loang:"",loarr:"",lobrk:"",LongLeftArrow:"",Longleftarrow:"",longleftarrow:"",LongLeftRightArrow:"",Longleftrightarrow:"",longleftrightarrow:"",longmapsto:"",LongRightArrow:"",Longrightarrow:"",longrightarrow:"",looparrowleft:"",looparrowright:"",lopar:"",Lopf:"",lopf:"",loplus:"",lotimes:"",lowast:"",lowbar:"_",LowerLeftArrow:"",LowerRightArrow:"",loz:"",lozenge:"",lozf:"",lpar:"(",lparlt:"",lrarr:"",lrcorner:"",lrhar:"",lrhard:"",lrm:"",lrtri:"",lsaquo:"",Lscr:"",lscr:"",Lsh:"",lsh:"",lsim:"",lsime:"",lsimg:"",lsqb:"[",lsquo:"",lsquor:"",Lstrok:"",lstrok:"",Lt:"",LT:"<",lt:"<",ltcc:"",ltcir:"",ltdot:"",lthree:"",ltimes:"",ltlarr:"",ltquest:"",ltri:"",ltrie:"",ltrif:"",ltrPar:"",lurdshar:"",luruhar:"",lvertneqq:"",lvnE:"",macr:"",male:"",malt:"",maltese:"",Map:"",map:"",mapsto:"",mapstodown:"",mapstoleft:"",mapstoup:"",marker:"",mcomma:"",Mcy:"",mcy:"",mdash:"",mDDot:"",measuredangle:"",MediumSpace:"",Mellintrf:"",Mfr:"",mfr:"",mho:"",micro:"",mid:"",midast:"*",midcir:"",middot:"",minus:"",minusb:"",minusd:"",minusdu:"",MinusPlus:"",mlcp:"",mldr:"",mnplus:"",models:"",Mopf:"",mopf:"",mp:"",Mscr:"",mscr:"",mstpos:"",Mu:"",mu:"",multimap:"",mumap:"",nabla:"",Nacute:"",nacute:"",nang:"",nap:"",napE:"",napid:"",napos:"",napprox:"",natur:"",natural:"",naturals:"",nbsp:"",nbump:"",nbumpe:"",ncap:"",Ncaron:"",ncaron:"",Ncedil:"",ncedil:"",ncong:"",ncongdot:"",ncup:"",Ncy:"",ncy:"",ndash:"",ne:"",nearhk:"",neArr:"",nearr:"",nearrow:"",nedot:"",NegativeMediumSpace:"",NegativeThickSpace:"",NegativeThinSpace:"",NegativeVeryThinSpace:"",nequiv:"",nesear:"",nesim:"",NestedGreaterGreater:"",NestedLessLess:"",NewLine:`
`,nexist:"",nexists:"",Nfr:"",nfr:"",ngE:"",nge:"",ngeq:"",ngeqq:"",ngeqslant:"",nges:"",nGg:"",ngsim:"",nGt:"",ngt:"",ngtr:"",nGtv:"",nhArr:"",nharr:"",nhpar:"",ni:"",nis:"",nisd:"",niv:"",NJcy:"",njcy:"",nlArr:"",nlarr:"",nldr:"",nlE:"",nle:"",nLeftarrow:"",nleftarrow:"",nLeftrightarrow:"",nleftrightarrow:"",nleq:"",nleqq:"",nleqslant:"",nles:"",nless:"",nLl:"",nlsim:"",nLt:"",nlt:"",nltri:"",nltrie:"",nLtv:"",nmid:"",NoBreak:"",NonBreakingSpace:"",Nopf:"",nopf:"",Not:"",not:"",NotCongruent:"",NotCupCap:"",NotDoubleVerticalBar:"",NotElement:"",NotEqual:"",NotEqualTilde:"",NotExists:"",NotGreater:"",NotGreaterEqual:"",NotGreaterFullEqual:"",NotGreaterGreater:"",NotGreaterLess:"",NotGreaterSlantEqual:"",NotGreaterTilde:"",NotHumpDownHump:"",NotHumpEqual:"",notin:"",notindot:"",notinE:"",notinva:"",notinvb:"",notinvc:"",NotLeftTriangle:"",NotLeftTriangleBar:"",NotLeftTriangleEqual:"",NotLess:"",NotLessEqual:"",NotLessGreater:"",NotLessLess:"",NotLessSlantEqual:"",NotLessTilde:"",NotNestedGreaterGreater:"",NotNestedLessLess:"",notni:"",notniva:"",notnivb:"",notnivc:"",NotPrecedes:"",NotPrecedesEqual:"",NotPrecedesSlantEqual:"",NotReverseElement:"",NotRightTriangle:"",NotRightTriangleBar:"",NotRightTriangleEqual:"",NotSquareSubset:"",NotSquareSubsetEqual:"",NotSquareSuperset:"",NotSquareSupersetEqual:"",NotSubset:"",NotSubsetEqual:"",NotSucceeds:"",NotSucceedsEqual:"",NotSucceedsSlantEqual:"",NotSucceedsTilde:"",NotSuperset:"",NotSupersetEqual:"",NotTilde:"",NotTildeEqual:"",NotTildeFullEqual:"",NotTildeTilde:"",NotVerticalBar:"",npar:"",nparallel:"",nparsl:"",npart:"",npolint:"",npr:"",nprcue:"",npre:"",nprec:"",npreceq:"",nrArr:"",nrarr:"",nrarrc:"",nrarrw:"",nRightarrow:"",nrightarrow:"",nrtri:"",nrtrie:"",nsc:"",nsccue:"",nsce:"",Nscr:"",nscr:"",nshortmid:"",nshortparallel:"",nsim:"",nsime:"",nsimeq:"",nsmid:"",nspar:"",nsqsube:"",nsqsupe:"",nsub:"",nsubE:"",nsube:"",nsubset:"",nsubseteq:"",nsubseteqq:"",nsucc:"",nsucceq:"",nsup:"",nsupE:"",nsupe:"",nsupset:"",nsupseteq:"",nsupseteqq:"",ntgl:"",Ntilde:"",ntilde:"",ntlg:"",ntriangleleft:"",ntrianglelefteq:"",ntriangleright:"",ntrianglerighteq:"",Nu:"",nu:"",num:"#",numero:"",numsp:"",nvap:"",nVDash:"",nVdash:"",nvDash:"",nvdash:"",nvge:"",nvgt:">",nvHarr:"",nvinfin:"",nvlArr:"",nvle:"",nvlt:"<",nvltrie:"",nvrArr:"",nvrtrie:"",nvsim:"",nwarhk:"",nwArr:"",nwarr:"",nwarrow:"",nwnear:"",Oacute:"",oacute:"",oast:"",ocir:"",Ocirc:"",ocirc:"",Ocy:"",ocy:"",odash:"",Odblac:"",odblac:"",odiv:"",odot:"",odsold:"",OElig:"",oelig:"",ofcir:"",Ofr:"",ofr:"",ogon:"",Ograve:"",ograve:"",ogt:"",ohbar:"",ohm:"",oint:"",olarr:"",olcir:"",olcross:"",oline:"",olt:"",Omacr:"",omacr:"",Omega:"",omega:"",Omicron:"",omicron:"",omid:"",ominus:"",Oopf:"",oopf:"",opar:"",OpenCurlyDoubleQuote:"",OpenCurlyQuote:"",operp:"",oplus:"",Or:"",or:"",orarr:"",ord:"",order:"",orderof:"",ordf:"",ordm:"",origof:"",oror:"",orslope:"",orv:"",oS:"",Oscr:"",oscr:"",Oslash:"",oslash:"",osol:"",Otilde:"",otilde:"",Otimes:"",otimes:"",otimesas:"",Ouml:"",ouml:"",ovbar:"",OverBar:"",OverBrace:"",OverBracket:"",OverParenthesis:"",par:"",para:"",parallel:"",parsim:"",parsl:"",part:"",PartialD:"",Pcy:"",pcy:"",percnt:"%",period:".",permil:"",perp:"",pertenk:"",Pfr:"",pfr:"",Phi:"",phi:"",phiv:"",phmmat:"",phone:"",Pi:"",pi:"",pitchfork:"",piv:"",planck:"",planckh:"",plankv:"",plus:"+",plusacir:"",plusb:"",pluscir:"",plusdo:"",plusdu:"",pluse:"",PlusMinus:"",plusmn:"",plussim:"",plustwo:"",pm:"",Poincareplane:"",pointint:"",Popf:"",popf:"",pound:"",Pr:"",pr:"",prap:"",prcue:"",prE:"",pre:"",prec:"",precapprox:"",preccurlyeq:"",Precedes:"",PrecedesEqual:"",PrecedesSlantEqual:"",PrecedesTilde:"",preceq:"",precnapprox:"",precneqq:"",precnsim:"",precsim:"",Prime:"",prime:"",primes:"",prnap:"",prnE:"",prnsim:"",prod:"",Product:"",profalar:"",profline:"",profsurf:"",prop:"",Proportion:"",Proportional:"",propto:"",prsim:"",prurel:"",Pscr:"",pscr:"",Psi:"",psi:"",puncsp:"",Qfr:"",qfr:"",qint:"",Qopf:"",qopf:"",qprime:"",Qscr:"",qscr:"",quaternions:"",quatint:"",quest:"?",questeq:"",QUOT:'"',quot:'"',rAarr:"",race:"",Racute:"",racute:"",radic:"",raemptyv:"",Rang:"",rang:"",rangd:"",range:"",rangle:"",raquo:"",Rarr:"",rArr:"",rarr:"",rarrap:"",rarrb:"",rarrbfs:"",rarrc:"",rarrfs:"",rarrhk:"",rarrlp:"",rarrpl:"",rarrsim:"",Rarrtl:"",rarrtl:"",rarrw:"",rAtail:"",ratail:"",ratio:"",rationals:"",RBarr:"",rBarr:"",rbarr:"",rbbrk:"",rbrace:"}",rbrack:"]",rbrke:"",rbrksld:"",rbrkslu:"",Rcaron:"",rcaron:"",Rcedil:"",rcedil:"",rceil:"",rcub:"}",Rcy:"",rcy:"",rdca:"",rdldhar:"",rdquo:"",rdquor:"",rdsh:"",Re:"",real:"",realine:"",realpart:"",reals:"",rect:"",REG:"",reg:"",ReverseElement:"",ReverseEquilibrium:"",ReverseUpEquilibrium:"",rfisht:"",rfloor:"",Rfr:"",rfr:"",rHar:"",rhard:"",rharu:"",rharul:"",Rho:"",rho:"",rhov:"",RightAngleBracket:"",RightArrow:"",Rightarrow:"",rightarrow:"",RightArrowBar:"",RightArrowLeftArrow:"",rightarrowtail:"",RightCeiling:"",RightDoubleBracket:"",RightDownTeeVector:"",RightDownVector:"",RightDownVectorBar:"",RightFloor:"",rightharpoondown:"",rightharpoonup:"",rightleftarrows:"",rightleftharpoons:"",rightrightarrows:"",rightsquigarrow:"",RightTee:"",RightTeeArrow:"",RightTeeVector:"",rightthreetimes:"",RightTriangle:"",RightTriangleBar:"",RightTriangleEqual:"",RightUpDownVector:"",RightUpTeeVector:"",RightUpVector:"",RightUpVectorBar:"",RightVector:"",RightVectorBar:"",ring:"",risingdotseq:"",rlarr:"",rlhar:"",rlm:"",rmoust:"",rmoustache:"",rnmid:"",roang:"",roarr:"",robrk:"",ropar:"",Ropf:"",ropf:"",roplus:"",rotimes:"",RoundImplies:"",rpar:")",rpargt:"",rppolint:"",rrarr:"",Rrightarrow:"",rsaquo:"",Rscr:"",rscr:"",Rsh:"",rsh:"",rsqb:"]",rsquo:"",rsquor:"",rthree:"",rtimes:"",rtri:"",rtrie:"",rtrif:"",rtriltri:"",RuleDelayed:"",ruluhar:"",rx:"",Sacute:"",sacute:"",sbquo:"",Sc:"",sc:"",scap:"",Scaron:"",scaron:"",sccue:"",scE:"",sce:"",Scedil:"",scedil:"",Scirc:"",scirc:"",scnap:"",scnE:"",scnsim:"",scpolint:"",scsim:"",Scy:"",scy:"",sdot:"",sdotb:"",sdote:"",searhk:"",seArr:"",searr:"",searrow:"",sect:"",semi:";",seswar:"",setminus:"",setmn:"",sext:"",Sfr:"",sfr:"",sfrown:"",sharp:"",SHCHcy:"",shchcy:"",SHcy:"",shcy:"",ShortDownArrow:"",ShortLeftArrow:"",shortmid:"",shortparallel:"",ShortRightArrow:"",ShortUpArrow:"",shy:"",Sigma:"",sigma:"",sigmaf:"",sigmav:"",sim:"",simdot:"",sime:"",simeq:"",simg:"",simgE:"",siml:"",simlE:"",simne:"",simplus:"",simrarr:"",slarr:"",SmallCircle:"",smallsetminus:"",smashp:"",smeparsl:"",smid:"",smile:"",smt:"",smte:"",smtes:"",SOFTcy:"",softcy:"",sol:"/",solb:"",solbar:"",Sopf:"",sopf:"",spades:"",spadesuit:"",spar:"",sqcap:"",sqcaps:"",sqcup:"",sqcups:"",Sqrt:"",sqsub:"",sqsube:"",sqsubset:"",sqsubseteq:"",sqsup:"",sqsupe:"",sqsupset:"",sqsupseteq:"",squ:"",Square:"",square:"",SquareIntersection:"",SquareSubset:"",SquareSubsetEqual:"",SquareSuperset:"",SquareSupersetEqual:"",SquareUnion:"",squarf:"",squf:"",srarr:"",Sscr:"",sscr:"",ssetmn:"",ssmile:"",sstarf:"",Star:"",star:"",starf:"",straightepsilon:"",straightphi:"",strns:"",Sub:"",sub:"",subdot:"",subE:"",sube:"",subedot:"",submult:"",subnE:"",subne:"",subplus:"",subrarr:"",Subset:"",subset:"",subseteq:"",subseteqq:"",SubsetEqual:"",subsetneq:"",subsetneqq:"",subsim:"",subsub:"",subsup:"",succ:"",succapprox:"",succcurlyeq:"",Succeeds:"",SucceedsEqual:"",SucceedsSlantEqual:"",SucceedsTilde:"",succeq:"",succnapprox:"",succneqq:"",succnsim:"",succsim:"",SuchThat:"",Sum:"",sum:"",sung:"",Sup:"",sup:"",sup1:"",sup2:"",sup3:"",supdot:"",supdsub:"",supE:"",supe:"",supedot:"",Superset:"",SupersetEqual:"",suphsol:"",suphsub:"",suplarr:"",supmult:"",supnE:"",supne:"",supplus:"",Supset:"",supset:"",supseteq:"",supseteqq:"",supsetneq:"",supsetneqq:"",supsim:"",supsub:"",supsup:"",swarhk:"",swArr:"",swarr:"",swarrow:"",swnwar:"",szlig:"",Tab:"	",target:"",Tau:"",tau:"",tbrk:"",Tcaron:"",tcaron:"",Tcedil:"",tcedil:"",Tcy:"",tcy:"",tdot:"",telrec:"",Tfr:"",tfr:"",there4:"",Therefore:"",therefore:"",Theta:"",theta:"",thetasym:"",thetav:"",thickapprox:"",thicksim:"",ThickSpace:"",thinsp:"",ThinSpace:"",thkap:"",thksim:"",THORN:"",thorn:"",Tilde:"",tilde:"",TildeEqual:"",TildeFullEqual:"",TildeTilde:"",times:"",timesb:"",timesbar:"",timesd:"",tint:"",toea:"",top:"",topbot:"",topcir:"",Topf:"",topf:"",topfork:"",tosa:"",tprime:"",TRADE:"",trade:"",triangle:"",triangledown:"",triangleleft:"",trianglelefteq:"",triangleq:"",triangleright:"",trianglerighteq:"",tridot:"",trie:"",triminus:"",TripleDot:"",triplus:"",trisb:"",tritime:"",trpezium:"",Tscr:"",tscr:"",TScy:"",tscy:"",TSHcy:"",tshcy:"",Tstrok:"",tstrok:"",twixt:"",twoheadleftarrow:"",twoheadrightarrow:"",Uacute:"",uacute:"",Uarr:"",uArr:"",uarr:"",Uarrocir:"",Ubrcy:"",ubrcy:"",Ubreve:"",ubreve:"",Ucirc:"",ucirc:"",Ucy:"",ucy:"",udarr:"",Udblac:"",udblac:"",udhar:"",ufisht:"",Ufr:"",ufr:"",Ugrave:"",ugrave:"",uHar:"",uharl:"",uharr:"",uhblk:"",ulcorn:"",ulcorner:"",ulcrop:"",ultri:"",Umacr:"",umacr:"",uml:"",UnderBar:"_",UnderBrace:"",UnderBracket:"",UnderParenthesis:"",Union:"",UnionPlus:"",Uogon:"",uogon:"",Uopf:"",uopf:"",UpArrow:"",Uparrow:"",uparrow:"",UpArrowBar:"",UpArrowDownArrow:"",UpDownArrow:"",Updownarrow:"",updownarrow:"",UpEquilibrium:"",upharpoonleft:"",upharpoonright:"",uplus:"",UpperLeftArrow:"",UpperRightArrow:"",Upsi:"",upsi:"",upsih:"",Upsilon:"",upsilon:"",UpTee:"",UpTeeArrow:"",upuparrows:"",urcorn:"",urcorner:"",urcrop:"",Uring:"",uring:"",urtri:"",Uscr:"",uscr:"",utdot:"",Utilde:"",utilde:"",utri:"",utrif:"",uuarr:"",Uuml:"",uuml:"",uwangle:"",vangrt:"",varepsilon:"",varkappa:"",varnothing:"",varphi:"",varpi:"",varpropto:"",vArr:"",varr:"",varrho:"",varsigma:"",varsubsetneq:"",varsubsetneqq:"",varsupsetneq:"",varsupsetneqq:"",vartheta:"",vartriangleleft:"",vartriangleright:"",Vbar:"",vBar:"",vBarv:"",Vcy:"",vcy:"",VDash:"",Vdash:"",vDash:"",vdash:"",Vdashl:"",Vee:"",vee:"",veebar:"",veeeq:"",vellip:"",Verbar:"",verbar:"|",Vert:"",vert:"|",VerticalBar:"",VerticalLine:"|",VerticalSeparator:"",VerticalTilde:"",VeryThinSpace:"",Vfr:"",vfr:"",vltri:"",vnsub:"",vnsup:"",Vopf:"",vopf:"",vprop:"",vrtri:"",Vscr:"",vscr:"",vsubnE:"",vsubne:"",vsupnE:"",vsupne:"",Vvdash:"",vzigzag:"",Wcirc:"",wcirc:"",wedbar:"",Wedge:"",wedge:"",wedgeq:"",weierp:"",Wfr:"",wfr:"",Wopf:"",wopf:"",wp:"",wr:"",wreath:"",Wscr:"",wscr:"",xcap:"",xcirc:"",xcup:"",xdtri:"",Xfr:"",xfr:"",xhArr:"",xharr:"",Xi:"",xi:"",xlArr:"",xlarr:"",xmap:"",xnis:"",xodot:"",Xopf:"",xopf:"",xoplus:"",xotime:"",xrArr:"",xrarr:"",Xscr:"",xscr:"",xsqcup:"",xuplus:"",xutri:"",xvee:"",xwedge:"",Yacute:"",yacute:"",YAcy:"",yacy:"",Ycirc:"",ycirc:"",Ycy:"",ycy:"",yen:"",Yfr:"",yfr:"",YIcy:"",yicy:"",Yopf:"",yopf:"",Yscr:"",yscr:"",YUcy:"",yucy:"",Yuml:"",yuml:"",Zacute:"",zacute:"",Zcaron:"",zcaron:"",Zcy:"",zcy:"",Zdot:"",zdot:"",zeetrf:"",ZeroWidthSpace:"",Zeta:"",zeta:"",Zfr:"",zfr:"",ZHcy:"",zhcy:"",zigrarr:"",Zopf:"",zopf:"",Zscr:"",zscr:"",zwj:"",zwnj:""}),i.entityMap=i.HTML_ENTITIES})(FS)),FS}var mv={},bL;function Cre(){if(bL)return mv;bL=1;var i=Qx().NAMESPACE,e=/[A-Z_a-z\xC0-\xD6\xD8-\xF6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,t=new RegExp("[\\-\\.0-9"+e.source.slice(1,-1)+"\\u00B7\\u0300-\\u036F\\u203F-\\u2040]"),r=new RegExp("^"+e.source+t.source+"*(?::"+e.source+t.source+"*)?$"),n=0,s=1,a=2,o=3,l=4,u=5,c=6,h=7;function m(M,k){this.message=M,this.locator=k,Error.captureStackTrace&&Error.captureStackTrace(this,m)}m.prototype=new Error,m.prototype.name=m.name;function g(){}g.prototype={parse:function(M,k,q){var G=this.domBuilder;G.startDocument(),R(k,k={}),y(M,k,q,G,this.errorHandler),G.endDocument()}};function y(M,k,q,G,H){function re(At){if(At>65535){At-=65536;var it=55296+(At>>10),Sr=56320+(At&1023);return String.fromCharCode(it,Sr)}else return String.fromCharCode(At)}function se(At){var it=At.slice(1,-1);return Object.hasOwnProperty.call(q,it)?q[it]:it.charAt(0)==="#"?re(parseInt(it.substr(1).replace("x","0x"))):(H.error("entity not found:"+At),At)}function de(At){if(At>Se){var it=M.substring(Se,At).replace(/&#?\w+;/g,se);te&&me(Se),G.characters(it,0,At-Se),Se=At}}function me(At,it){for(;At>=oe&&(it=ce.exec(M));)ue=it.index,oe=ue+it[0].length,te.lineNumber++;te.columnNumber=At-ue+1}for(var ue=0,oe=0,ce=/.*(?:\r\n?|\n)|.*$/g,te=G.locator,fe=[{currentNSMap:k}],ye={},Se=0;;){try{var ke=M.indexOf("<",Se);if(ke<0){if(!M.substr(Se).match(/^\s*$/)){var qe=G.doc,vt=qe.createTextNode(M.substr(Se));qe.appendChild(vt),G.currentElement=vt}return}switch(ke>Se&&de(ke),M.charAt(ke+1)){case"/":var Ne=M.indexOf(">",ke+3),et=M.substring(ke+2,Ne).replace(/[ \t\n\r]+$/g,""),kt=fe.pop();Ne<0?(et=M.substring(ke+2).replace(/[\s<].*/,""),H.error("end tag name: "+et+" is not complete:"+kt.tagName),Ne=ke+1+et.length):et.match(/\s</)&&(et=et.replace(/[\s<].*/,""),H.error("end tag name: "+et+" maybe not complete"),Ne=ke+1+et.length);var pt=kt.localNSMap,Ut=kt.tagName==et,Vt=Ut||kt.tagName&&kt.tagName.toLowerCase()==et.toLowerCase();if(Vt){if(G.endElement(kt.uri,kt.localName,et),pt)for(var Xe in pt)Object.prototype.hasOwnProperty.call(pt,Xe)&&G.endPrefixMapping(Xe);Ut||H.fatalError("end tag name: "+et+" is not match the current start tagName:"+kt.tagName)}else fe.push(kt);Ne++;break;case"?":te&&me(ke),Ne=L(M,ke,G);break;case"!":te&&me(ke),Ne=A(M,ke,G,H);break;default:te&&me(ke);var Ue=new F,Le=fe[fe.length-1].currentNSMap,Ne=T(M,ke,Ue,Le,se,H),rt=Ue.length;if(!Ue.closed&&D(M,Ne,Ue.tagName,ye)&&(Ue.closed=!0,q.nbsp||H.warning("unclosed xml attribute")),te&&rt){for(var lt=_(te,{}),dt=0;dt<rt;dt++){var ut=Ue[dt];me(ut.offset),ut.locator=_(te,{})}G.locator=lt,E(Ue,G,Le)&&fe.push(Ue),G.locator=te}else E(Ue,G,Le)&&fe.push(Ue);i.isHTML(Ue.uri)&&!Ue.closed?Ne=w(M,Ne,Ue.tagName,se,G):Ne++}}catch(At){if(At instanceof m)throw At;H.error("element parse error: "+At),Ne=-1}Ne>Se?Se=Ne:de(Math.max(ke,Se)+1)}}function _(M,k){return k.lineNumber=M.lineNumber,k.columnNumber=M.columnNumber,k}function T(M,k,q,G,H,re){function se(te,fe,ye){q.attributeNames.hasOwnProperty(te)&&re.fatalError("Attribute "+te+" redefined"),q.addValue(te,fe.replace(/[\t\n\r]/g," ").replace(/&#?\w+;/g,H),ye)}for(var de,me,ue=++k,oe=n;;){var ce=M.charAt(ue);switch(ce){case"=":if(oe===s)de=M.slice(k,ue),oe=o;else if(oe===a)oe=o;else throw new Error("attribute equal must after attrName");break;case"'":case'"':if(oe===o||oe===s)if(oe===s&&(re.warning('attribute value must after "="'),de=M.slice(k,ue)),k=ue+1,ue=M.indexOf(ce,k),ue>0)me=M.slice(k,ue),se(de,me,k-1),oe=u;else throw new Error("attribute value no end '"+ce+"' match");else if(oe==l)me=M.slice(k,ue),se(de,me,k),re.warning('attribute "'+de+'" missed start quot('+ce+")!!"),k=ue+1,oe=u;else throw new Error('attribute value must after "="');break;case"/":switch(oe){case n:q.setTagName(M.slice(k,ue));case u:case c:case h:oe=h,q.closed=!0;case l:case s:break;case a:q.closed=!0;break;default:throw new Error("attribute invalid close char('/')")}break;case"":return re.error("unexpected end of input"),oe==n&&q.setTagName(M.slice(k,ue)),ue;case">":switch(oe){case n:q.setTagName(M.slice(k,ue));case u:case c:case h:break;case l:case s:me=M.slice(k,ue),me.slice(-1)==="/"&&(q.closed=!0,me=me.slice(0,-1));case a:oe===a&&(me=de),oe==l?(re.warning('attribute "'+me+'" missed quot(")!'),se(de,me,k)):((!i.isHTML(G[""])||!me.match(/^(?:disabled|checked|selected)$/i))&&re.warning('attribute "'+me+'" missed value!! "'+me+'" instead!!'),se(me,me,k));break;case o:throw new Error("attribute value missed!!")}return ue;case"":ce=" ";default:if(ce<=" ")switch(oe){case n:q.setTagName(M.slice(k,ue)),oe=c;break;case s:de=M.slice(k,ue),oe=a;break;case l:var me=M.slice(k,ue);re.warning('attribute "'+me+'" missed quot(")!!'),se(de,me,k);case u:oe=c;break}else switch(oe){case a:q.tagName,(!i.isHTML(G[""])||!de.match(/^(?:disabled|checked|selected)$/i))&&re.warning('attribute "'+de+'" missed value!! "'+de+'" instead2!!'),se(de,de,k),k=ue,oe=s;break;case u:re.warning('attribute space is required"'+de+'"!!');case c:oe=s,k=ue;break;case o:oe=l,k=ue;break;case h:throw new Error("elements closed character '/' and '>' must be connected to")}}ue++}}function E(M,k,q){for(var G=M.tagName,H=null,ce=M.length;ce--;){var re=M[ce],se=re.qName,de=re.value,te=se.indexOf(":");if(te>0)var me=re.prefix=se.slice(0,te),ue=se.slice(te+1),oe=me==="xmlns"&&ue;else ue=se,me=null,oe=se==="xmlns"&&"";re.localName=ue,oe!==!1&&(H==null&&(H={},R(q,q={})),q[oe]=H[oe]=de,re.uri=i.XMLNS,k.startPrefixMapping(oe,de))}for(var ce=M.length;ce--;){re=M[ce];var me=re.prefix;me&&(me==="xml"&&(re.uri=i.XML),me!=="xmlns"&&(re.uri=q[me||""]))}var te=G.indexOf(":");te>0?(me=M.prefix=G.slice(0,te),ue=M.localName=G.slice(te+1)):(me=null,ue=M.localName=G);var fe=M.uri=q[me||""];if(k.startElement(fe,ue,G,M),M.closed){if(k.endElement(fe,ue,G),H)for(me in H)Object.prototype.hasOwnProperty.call(H,me)&&k.endPrefixMapping(me)}else return M.currentNSMap=q,M.localNSMap=H,!0}function w(M,k,q,G,H){if(/^(?:script|textarea)$/i.test(q)){var re=M.indexOf("</"+q+">",k),se=M.substring(k+1,re);if(/[&<]/.test(se))return/^script$/i.test(q)?(H.characters(se,0,se.length),re):(se=se.replace(/&#?\w+;/g,G),H.characters(se,0,se.length),re)}return k+1}function D(M,k,q,G){var H=G[q];return H==null&&(H=M.lastIndexOf("</"+q+">"),H<k&&(H=M.lastIndexOf("</"+q)),G[q]=H),H<k}function R(M,k){for(var q in M)Object.prototype.hasOwnProperty.call(M,q)&&(k[q]=M[q])}function A(M,k,q,G){var H=M.charAt(k+2);switch(H){case"-":if(M.charAt(k+3)==="-"){var re=M.indexOf("-->",k+4);return re>k?(q.comment(M,k+4,re-k-4),re+3):(G.error("Unclosed comment"),-1)}else return-1;default:if(M.substr(k+3,6)=="CDATA["){var re=M.indexOf("]]>",k+9);return q.startCDATA(),q.characters(M,k+9,re-k-9),q.endCDATA(),re+3}var se=B(M,k),de=se.length;if(de>1&&/!doctype/i.test(se[0][0])){var me=se[1][0],ue=!1,oe=!1;de>3&&(/^public$/i.test(se[2][0])?(ue=se[3][0],oe=de>4&&se[4][0]):/^system$/i.test(se[2][0])&&(oe=se[3][0]));var ce=se[de-1];return q.startDTD(me,ue,oe),q.endDTD(),ce.index+ce[0].length}}return-1}function L(M,k,q){var G=M.indexOf("?>",k);if(G){var H=M.substring(k,G).match(/^<\?(\S*)\s*([\s\S]*?)\s*$/);return H?(H[0].length,q.processingInstruction(H[1],H[2]),G+2):-1}return-1}function F(){this.attributeNames={}}F.prototype={setTagName:function(M){if(!r.test(M))throw new Error("invalid tagName:"+M);this.tagName=M},addValue:function(M,k,q){if(!r.test(M))throw new Error("invalid attribute:"+M);this.attributeNames[M]=this.length,this[this.length++]={qName:M,value:k,offset:q}},length:0,getLocalName:function(M){return this[M].localName},getLocator:function(M){return this[M].locator},getQName:function(M){return this[M].qName},getURI:function(M){return this[M].uri},getValue:function(M){return this[M].value}};function B(M,k){var q,G=[],H=/'[^']+'|"[^"]+"|[^\s<>\/=]+=?|(\/?\s*>|<)/g;for(H.lastIndex=k,H.exec(M);q=H.exec(M);)if(G.push(q),q[1])return G}return mv.XMLReader=g,mv.ParseError=m,mv}var SL;function Ere(){if(SL)return Am;SL=1;var i=Qx(),e=U8(),t=Sre(),r=Cre(),n=e.DOMImplementation,s=i.NAMESPACE,a=r.ParseError,o=r.XMLReader;function l(T){return T.replace(/\r[\n\u0085]/g,`
`).replace(/[\r\u0085\u2028]/g,`
`)}function u(T){this.options=T||{locator:{}}}u.prototype.parseFromString=function(T,E){var w=this.options,D=new o,R=w.domBuilder||new h,A=w.errorHandler,L=w.locator,F=w.xmlns||{},B=/\/x?html?$/.test(E),M=B?t.HTML_ENTITIES:t.XML_ENTITIES;L&&R.setDocumentLocator(L),D.errorHandler=c(A,R,L),D.domBuilder=w.domBuilder||R,B&&(F[""]=s.HTML),F.xml=F.xml||s.XML;var k=w.normalizeLineEndings||l;return T&&typeof T=="string"?D.parse(k(T),F,M):D.errorHandler.error("invalid doc source"),R.doc};function c(T,E,w){if(!T){if(E instanceof h)return E;T=E}var D={},R=T instanceof Function;w=w||{};function A(L){var F=T[L];!F&&R&&(F=T.length==2?function(B){T(L,B)}:T),D[L]=F&&function(B){F("[xmldom "+L+"]	"+B+g(w))}||function(){}}return A("warning"),A("error"),A("fatalError"),D}function h(){this.cdata=!1}function m(T,E){E.lineNumber=T.lineNumber,E.columnNumber=T.columnNumber}h.prototype={startDocument:function(){this.doc=new n().createDocument(null,null,null),this.locator&&(this.doc.documentURI=this.locator.systemId)},startElement:function(T,E,w,D){var R=this.doc,A=R.createElementNS(T,w||E),L=D.length;_(this,A),this.currentElement=A,this.locator&&m(this.locator,A);for(var F=0;F<L;F++){var T=D.getURI(F),B=D.getValue(F),w=D.getQName(F),M=R.createAttributeNS(T,w);this.locator&&m(D.getLocator(F),M),M.value=M.nodeValue=B,A.setAttributeNode(M)}},endElement:function(T,E,w){var D=this.currentElement;D.tagName,this.currentElement=D.parentNode},startPrefixMapping:function(T,E){},endPrefixMapping:function(T){},processingInstruction:function(T,E){var w=this.doc.createProcessingInstruction(T,E);this.locator&&m(this.locator,w),_(this,w)},ignorableWhitespace:function(T,E,w){},characters:function(T,E,w){if(T=y.apply(this,arguments),T){if(this.cdata)var D=this.doc.createCDATASection(T);else var D=this.doc.createTextNode(T);this.currentElement?this.currentElement.appendChild(D):/^\s*$/.test(T)&&this.doc.appendChild(D),this.locator&&m(this.locator,D)}},skippedEntity:function(T){},endDocument:function(){this.doc.normalize()},setDocumentLocator:function(T){(this.locator=T)&&(T.lineNumber=0)},comment:function(T,E,w){T=y.apply(this,arguments);var D=this.doc.createComment(T);this.locator&&m(this.locator,D),_(this,D)},startCDATA:function(){this.cdata=!0},endCDATA:function(){this.cdata=!1},startDTD:function(T,E,w){var D=this.doc.implementation;if(D&&D.createDocumentType){var R=D.createDocumentType(T,E,w);this.locator&&m(this.locator,R),_(this,R),this.doc.doctype=R}},warning:function(T){console.warn("[xmldom warning]	"+T,g(this.locator))},error:function(T){console.error("[xmldom error]	"+T,g(this.locator))},fatalError:function(T){throw new a(T,this.locator)}};function g(T){if(T)return`
@`+(T.systemId||"")+"#[line:"+T.lineNumber+",col:"+T.columnNumber+"]"}function y(T,E,w){return typeof T=="string"?T.substr(E,w):T.length>=E+w||E?new java.lang.String(T,E,w)+"":T}"endDTD,startEntity,endEntity,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,resolveEntity,getExternalSubset,notationDecl,unparsedEntityDecl".replace(/\w+/g,function(T){h.prototype[T]=function(){return null}});function _(T,E){T.currentElement?T.currentElement.appendChild(E):T.doc.appendChild(E)}return Am.__DOMHandler=h,Am.normalizeLineEndings=l,Am.DOMParser=u,Am}var CL;function wre(){if(CL)return km;CL=1;var i=U8();return km.DOMImplementation=i.DOMImplementation,km.XMLSerializer=i.XMLSerializer,km.DOMParser=Ere().DOMParser,km}var $8=wre();/*! @name mpd-parser @version 1.3.1 @license Apache-2.0 */const EL=i=>!!i&&typeof i=="object",Kn=(...i)=>i.reduce((e,t)=>(typeof t!="object"||Object.keys(t).forEach(r=>{Array.isArray(e[r])&&Array.isArray(t[r])?e[r]=e[r].concat(t[r]):EL(e[r])&&EL(t[r])?e[r]=Kn(e[r],t[r]):e[r]=t[r]}),e),{}),j8=i=>Object.keys(i).map(e=>i[e]),kre=(i,e)=>{const t=[];for(let r=i;r<e;r++)t.push(r);return t},lp=i=>i.reduce((e,t)=>e.concat(t),[]),z8=i=>{if(!i.length)return[];const e=[];for(let t=0;t<i.length;t++)e.push(i[t]);return e},Are=(i,e)=>i.reduce((t,r,n)=>(r[e]&&t.push(n),t),[]),Ire=(i,e)=>j8(i.reduce((t,r)=>(r.forEach(n=>{t[e(n)]=n}),t),{}));var up={INVALID_NUMBER_OF_PERIOD:"INVALID_NUMBER_OF_PERIOD",DASH_EMPTY_MANIFEST:"DASH_EMPTY_MANIFEST",DASH_INVALID_XML:"DASH_INVALID_XML",NO_BASE_URL:"NO_BASE_URL",SEGMENT_TIME_UNSPECIFIED:"SEGMENT_TIME_UNSPECIFIED",UNSUPPORTED_UTC_TIMING_SCHEME:"UNSUPPORTED_UTC_TIMING_SCHEME"};const A0=({baseUrl:i="",source:e="",range:t="",indexRange:r=""})=>{const n={uri:e,resolvedUri:eg(i||"",e)};if(t||r){const a=(t||r).split("-");let o=X.BigInt?X.BigInt(a[0]):parseInt(a[0],10),l=X.BigInt?X.BigInt(a[1]):parseInt(a[1],10);o<Number.MAX_SAFE_INTEGER&&typeof o=="bigint"&&(o=Number(o)),l<Number.MAX_SAFE_INTEGER&&typeof l=="bigint"&&(l=Number(l));let u;typeof l=="bigint"||typeof o=="bigint"?u=X.BigInt(l)-X.BigInt(o)+X.BigInt(1):u=l-o+1,typeof u=="bigint"&&u<Number.MAX_SAFE_INTEGER&&(u=Number(u)),n.byterange={length:u,offset:o}}return n},Dre=i=>{let e;return typeof i.offset=="bigint"||typeof i.length=="bigint"?e=X.BigInt(i.offset)+X.BigInt(i.length)-X.BigInt(1):e=i.offset+i.length-1,`${i.offset}-${e}`},wL=i=>(i&&typeof i!="number"&&(i=parseInt(i,10)),isNaN(i)?null:i),Pre={static(i){const{duration:e,timescale:t=1,sourceDuration:r,periodDuration:n}=i,s=wL(i.endNumber),a=e/t;return typeof s=="number"?{start:0,end:s}:typeof n=="number"?{start:0,end:n/a}:{start:0,end:r/a}},dynamic(i){const{NOW:e,clientOffset:t,availabilityStartTime:r,timescale:n=1,duration:s,periodStart:a=0,minimumUpdatePeriod:o=0,timeShiftBufferDepth:l=1/0}=i,u=wL(i.endNumber),c=(e+t)/1e3,h=r+a,g=c+o-h,y=Math.ceil(g*n/s),_=Math.floor((c-h-l)*n/s),T=Math.floor((c-h)*n/s);return{start:Math.max(0,_),end:typeof u=="number"?u:Math.min(y,T)}}},Rre=i=>e=>{const{duration:t,timescale:r=1,periodStart:n,startNumber:s=1}=i;return{number:s+e,duration:t/r,timeline:n,time:e*t}},Vw=i=>{const{type:e,duration:t,timescale:r=1,periodDuration:n,sourceDuration:s}=i,{start:a,end:o}=Pre[e](i),l=kre(a,o).map(Rre(i));if(e==="static"){const u=l.length-1,c=typeof n=="number"?n:s;l[u].duration=c-t/r*u}return l},H8=i=>{const{baseUrl:e,initialization:t={},sourceDuration:r,indexRange:n="",periodStart:s,presentationTime:a,number:o=0,duration:l}=i;if(!e)throw new Error(up.NO_BASE_URL);const u=A0({baseUrl:e,source:t.sourceURL,range:t.range}),c=A0({baseUrl:e,source:e,indexRange:n});if(c.map=u,l){const h=Vw(i);h.length&&(c.duration=h[0].duration,c.timeline=h[0].timeline)}else r&&(c.duration=r,c.timeline=s);return c.presentationTime=a||s,c.number=o,[c]},tg=(i,e,t)=>{const r=i.sidx.map?i.sidx.map:null,n=i.sidx.duration,s=i.timeline||0,a=i.sidx.byterange,o=a.offset+a.length,l=e.timescale,u=e.references.filter(T=>T.referenceType!==1),c=[],h=i.endList?"static":"dynamic",m=i.sidx.timeline;let g=m,y=i.mediaSequence||0,_;typeof e.firstOffset=="bigint"?_=X.BigInt(o)+e.firstOffset:_=o+e.firstOffset;for(let T=0;T<u.length;T++){const E=e.references[T],w=E.referencedSize,D=E.subsegmentDuration;let R;typeof _=="bigint"?R=_+X.BigInt(w)-X.BigInt(1):R=_+w-1;const A=`${_}-${R}`,F=H8({baseUrl:t,timescale:l,timeline:s,periodStart:m,presentationTime:g,number:y,duration:D,sourceDuration:n,indexRange:A,type:h})[0];r&&(F.map=r),c.push(F),typeof _=="bigint"?_+=X.BigInt(w):_+=w,g+=D/l,y++}return i.segments=c,i},Lre=["AUDIO","SUBTITLES"],Ore=1/60,V8=i=>Ire(i,({timeline:e})=>e).sort((e,t)=>e.timeline>t.timeline?1:-1),Mre=(i,e)=>{for(let t=0;t<i.length;t++)if(i[t].attributes.NAME===e)return i[t];return null},kL=i=>{let e=[];return bre(i,Lre,(t,r,n,s)=>{e=e.concat(t.playlists||[])}),e},AL=({playlist:i,mediaSequence:e})=>{i.mediaSequence=e,i.segments.forEach((t,r)=>{t.number=i.mediaSequence+r})},Fre=({oldPlaylists:i,newPlaylists:e,timelineStarts:t})=>{e.forEach(r=>{r.discontinuitySequence=t.findIndex(function({timeline:l}){return l===r.timeline});const n=Mre(i,r.attributes.NAME);if(!n||r.sidx)return;const s=r.segments[0],a=n.segments.findIndex(function(l){return Math.abs(l.presentationTime-s.presentationTime)<Ore});if(a===-1){AL({playlist:r,mediaSequence:n.mediaSequence+n.segments.length}),r.segments[0].discontinuity=!0,r.discontinuityStarts.unshift(0),(!n.segments.length&&r.timeline>n.timeline||n.segments.length&&r.timeline>n.segments[n.segments.length-1].timeline)&&r.discontinuitySequence--;return}n.segments[a].discontinuity&&!s.discontinuity&&(s.discontinuity=!0,r.discontinuityStarts.unshift(0),r.discontinuitySequence--),AL({playlist:r,mediaSequence:n.segments[a].number})})},Bre=({oldManifest:i,newManifest:e})=>{const t=i.playlists.concat(kL(i)),r=e.playlists.concat(kL(e));return e.timelineStarts=V8([i.timelineStarts,e.timelineStarts]),Fre({oldPlaylists:t,newPlaylists:r,timelineStarts:e.timelineStarts}),e},Mh=i=>i&&i.uri+"-"+Dre(i.byterange),BS=i=>{const e=i.reduce(function(r,n){return r[n.attributes.baseUrl]||(r[n.attributes.baseUrl]=[]),r[n.attributes.baseUrl].push(n),r},{});let t=[];return Object.values(e).forEach(r=>{const n=j8(r.reduce((s,a)=>{const o=a.attributes.id+(a.attributes.lang||"");return s[o]?(a.segments&&(a.segments[0]&&(a.segments[0].discontinuity=!0),s[o].segments.push(...a.segments)),a.attributes.contentProtection&&(s[o].attributes.contentProtection=a.attributes.contentProtection)):(s[o]=a,s[o].attributes.timelineStarts=[]),s[o].attributes.timelineStarts.push({start:a.attributes.periodStart,timeline:a.attributes.periodStart}),s},{}));t=t.concat(n)}),t.map(r=>(r.discontinuityStarts=Are(r.segments||[],"discontinuity"),r))},qw=(i,e)=>{const t=Mh(i.sidx),r=t&&e[t]&&e[t].sidx;return r&&tg(i,r,i.sidx.resolvedUri),i},Nre=(i,e={})=>{if(!Object.keys(e).length)return i;for(const t in i)i[t]=qw(i[t],e);return i},Ure=({attributes:i,segments:e,sidx:t,mediaSequence:r,discontinuitySequence:n,discontinuityStarts:s},a)=>{const o={attributes:{NAME:i.id,BANDWIDTH:i.bandwidth,CODECS:i.codecs,"PROGRAM-ID":1},uri:"",endList:i.type==="static",timeline:i.periodStart,resolvedUri:i.baseUrl||"",targetDuration:i.duration,discontinuitySequence:n,discontinuityStarts:s,timelineStarts:i.timelineStarts,mediaSequence:r,segments:e};return i.contentProtection&&(o.contentProtection=i.contentProtection),i.serviceLocation&&(o.attributes.serviceLocation=i.serviceLocation),t&&(o.sidx=t),a&&(o.attributes.AUDIO="audio",o.attributes.SUBTITLES="subs"),o},$re=({attributes:i,segments:e,mediaSequence:t,discontinuityStarts:r,discontinuitySequence:n})=>{typeof e>"u"&&(e=[{uri:i.baseUrl,timeline:i.periodStart,resolvedUri:i.baseUrl||"",duration:i.sourceDuration,number:0}],i.duration=i.sourceDuration);const s={NAME:i.id,BANDWIDTH:i.bandwidth,"PROGRAM-ID":1};i.codecs&&(s.CODECS=i.codecs);const a={attributes:s,uri:"",endList:i.type==="static",timeline:i.periodStart,resolvedUri:i.baseUrl||"",targetDuration:i.duration,timelineStarts:i.timelineStarts,discontinuityStarts:r,discontinuitySequence:n,mediaSequence:t,segments:e};return i.serviceLocation&&(a.attributes.serviceLocation=i.serviceLocation),a},jre=(i,e={},t=!1)=>{let r;const n=i.reduce((s,a)=>{const o=a.attributes.role&&a.attributes.role.value||"",l=a.attributes.lang||"";let u=a.attributes.label||"main";if(l&&!a.attributes.label){const h=o?` (${o})`:"";u=`${a.attributes.lang}${h}`}s[u]||(s[u]={language:l,autoselect:!0,default:o==="main",playlists:[],uri:""});const c=qw(Ure(a,t),e);return s[u].playlists.push(c),typeof r>"u"&&o==="main"&&(r=a,r.default=!0),s},{});if(!r){const s=Object.keys(n)[0];n[s].default=!0}return n},zre=(i,e={})=>i.reduce((t,r)=>{const n=r.attributes.label||r.attributes.lang||"text",s=r.attributes.lang||"und";return t[n]||(t[n]={language:s,default:!1,autoselect:!1,playlists:[],uri:""}),t[n].playlists.push(qw($re(r),e)),t},{}),Hre=i=>i.reduce((e,t)=>(t&&t.forEach(r=>{const{channel:n,language:s}=r;e[s]={autoselect:!1,default:!1,instreamId:n,language:s},r.hasOwnProperty("aspectRatio")&&(e[s].aspectRatio=r.aspectRatio),r.hasOwnProperty("easyReader")&&(e[s].easyReader=r.easyReader),r.hasOwnProperty("3D")&&(e[s]["3D"]=r["3D"])}),e),{}),Vre=({attributes:i,segments:e,sidx:t,discontinuityStarts:r})=>{const n={attributes:{NAME:i.id,AUDIO:"audio",SUBTITLES:"subs",RESOLUTION:{width:i.width,height:i.height},CODECS:i.codecs,BANDWIDTH:i.bandwidth,"PROGRAM-ID":1},uri:"",endList:i.type==="static",timeline:i.periodStart,resolvedUri:i.baseUrl||"",targetDuration:i.duration,discontinuityStarts:r,timelineStarts:i.timelineStarts,segments:e};return i.frameRate&&(n.attributes["FRAME-RATE"]=i.frameRate),i.contentProtection&&(n.contentProtection=i.contentProtection),i.serviceLocation&&(n.attributes.serviceLocation=i.serviceLocation),t&&(n.sidx=t),n},qre=({attributes:i})=>i.mimeType==="video/mp4"||i.mimeType==="video/webm"||i.contentType==="video",Wre=({attributes:i})=>i.mimeType==="audio/mp4"||i.mimeType==="audio/webm"||i.contentType==="audio",Gre=({attributes:i})=>i.mimeType==="text/vtt"||i.contentType==="text",Kre=(i,e)=>{i.forEach(t=>{t.mediaSequence=0,t.discontinuitySequence=e.findIndex(function({timeline:r}){return r===t.timeline}),t.segments&&t.segments.forEach((r,n)=>{r.number=n})})},IL=i=>i?Object.keys(i).reduce((e,t)=>{const r=i[t];return e.concat(r.playlists)},[]):[],Xre=({dashPlaylists:i,locations:e,contentSteering:t,sidxMapping:r={},previousManifest:n,eventStream:s})=>{if(!i.length)return{};const{sourceDuration:a,type:o,suggestedPresentationDelay:l,minimumUpdatePeriod:u}=i[0].attributes,c=BS(i.filter(qre)).map(Vre),h=BS(i.filter(Wre)),m=BS(i.filter(Gre)),g=i.map(R=>R.attributes.captionServices).filter(Boolean),y={allowCache:!0,discontinuityStarts:[],segments:[],endList:!0,mediaGroups:{AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},uri:"",duration:a,playlists:Nre(c,r)};u>=0&&(y.minimumUpdatePeriod=u*1e3),e&&(y.locations=e),t&&(y.contentSteering=t),o==="dynamic"&&(y.suggestedPresentationDelay=l),s&&s.length>0&&(y.eventStream=s);const _=y.playlists.length===0,T=h.length?jre(h,r,_):null,E=m.length?zre(m,r):null,w=c.concat(IL(T),IL(E)),D=w.map(({timelineStarts:R})=>R);return y.timelineStarts=V8(D),Kre(w,y.timelineStarts),T&&(y.mediaGroups.AUDIO.audio=T),E&&(y.mediaGroups.SUBTITLES.subs=E),g.length&&(y.mediaGroups["CLOSED-CAPTIONS"].cc=Hre(g)),n?Bre({oldManifest:n,newManifest:y}):y},Yre=(i,e,t)=>{const{NOW:r,clientOffset:n,availabilityStartTime:s,timescale:a=1,periodStart:o=0,minimumUpdatePeriod:l=0}=i,u=(r+n)/1e3,c=s+o,m=u+l-c;return Math.ceil((m*a-e)/t)},q8=(i,e)=>{const{type:t,minimumUpdatePeriod:r=0,media:n="",sourceDuration:s,timescale:a=1,startNumber:o=1,periodStart:l}=i,u=[];let c=-1;for(let h=0;h<e.length;h++){const m=e[h],g=m.d,y=m.r||0,_=m.t||0;c<0&&(c=_),_&&_>c&&(c=_);let T;if(y<0){const D=h+1;D===e.length?t==="dynamic"&&r>0&&n.indexOf("$Number$")>0?T=Yre(i,c,g):T=(s*a-c)/g:T=(e[D].t-c)/g}else T=y+1;const E=o+u.length+T;let w=o+u.length;for(;w<E;)u.push({number:w,duration:g/a,time:c,timeline:l}),c+=g,w++}return u},Qre=/\$([A-z]*)(?:(%0)([0-9]+)d)?\$/g,Jre=i=>(e,t,r,n)=>{if(e==="$$")return"$";if(typeof i[t]>"u")return e;const s=""+i[t];return t==="RepresentationID"||(r?n=parseInt(n,10):n=1,s.length>=n)?s:`${new Array(n-s.length+1).join("0")}${s}`},DL=(i,e)=>i.replace(Qre,Jre(e)),Zre=(i,e)=>!i.duration&&!e?[{number:i.startNumber||1,duration:i.sourceDuration,time:0,timeline:i.periodStart}]:i.duration?Vw(i):q8(i,e),eie=(i,e)=>{const t={RepresentationID:i.id,Bandwidth:i.bandwidth||0},{initialization:r={sourceURL:"",range:""}}=i,n=A0({baseUrl:i.baseUrl,source:DL(r.sourceURL,t),range:r.range});return Zre(i,e).map(a=>{t.Number=a.number,t.Time=a.time;const o=DL(i.media||"",t),l=i.timescale||1,u=i.presentationTimeOffset||0,c=i.periodStart+(a.time-u)/l;return{uri:o,timeline:a.timeline,duration:a.duration,resolvedUri:eg(i.baseUrl||"",o),map:n,number:a.number,presentationTime:c}})},tie=(i,e)=>{const{baseUrl:t,initialization:r={}}=i,n=A0({baseUrl:t,source:r.sourceURL,range:r.range}),s=A0({baseUrl:t,source:e.media,range:e.mediaRange});return s.map=n,s},rie=(i,e)=>{const{duration:t,segmentUrls:r=[],periodStart:n}=i;if(!t&&!e||t&&e)throw new Error(up.SEGMENT_TIME_UNSPECIFIED);const s=r.map(l=>tie(i,l));let a;return t&&(a=Vw(i)),e&&(a=q8(i,e)),a.map((l,u)=>{if(s[u]){const c=s[u],h=i.timescale||1,m=i.presentationTimeOffset||0;return c.timeline=l.timeline,c.duration=l.duration,c.number=l.number,c.presentationTime=n+(l.time-m)/h,c}}).filter(l=>l)},iie=({attributes:i,segmentInfo:e})=>{let t,r;e.template?(r=eie,t=Kn(i,e.template)):e.base?(r=H8,t=Kn(i,e.base)):e.list&&(r=rie,t=Kn(i,e.list));const n={attributes:i};if(!r)return n;const s=r(t,e.segmentTimeline);if(t.duration){const{duration:a,timescale:o=1}=t;t.duration=a/o}else s.length?t.duration=s.reduce((a,o)=>Math.max(a,Math.ceil(o.duration)),0):t.duration=0;return n.attributes=t,n.segments=s,e.base&&t.indexRange&&(n.sidx=s[0],n.segments=[]),n},nie=i=>i.map(iie),qi=(i,e)=>z8(i.childNodes).filter(({tagName:t})=>t===e),rg=i=>i.textContent.trim(),sie=i=>parseFloat(i.split("/").reduce((e,t)=>e/t)),df=i=>{const o=/P(?:(\d*)Y)?(?:(\d*)M)?(?:(\d*)D)?(?:T(?:(\d*)H)?(?:(\d*)M)?(?:([\d.]*)S)?)?/.exec(i);if(!o)return 0;const[l,u,c,h,m,g]=o.slice(1);return parseFloat(l||0)*31536e3+parseFloat(u||0)*2592e3+parseFloat(c||0)*86400+parseFloat(h||0)*3600+parseFloat(m||0)*60+parseFloat(g||0)},aie=i=>(/^\d+-\d+-\d+T\d+:\d+:\d+(\.\d+)?$/.test(i)&&(i+="Z"),Date.parse(i)),PL={mediaPresentationDuration(i){return df(i)},availabilityStartTime(i){return aie(i)/1e3},minimumUpdatePeriod(i){return df(i)},suggestedPresentationDelay(i){return df(i)},type(i){return i},timeShiftBufferDepth(i){return df(i)},start(i){return df(i)},width(i){return parseInt(i,10)},height(i){return parseInt(i,10)},bandwidth(i){return parseInt(i,10)},frameRate(i){return sie(i)},startNumber(i){return parseInt(i,10)},timescale(i){return parseInt(i,10)},presentationTimeOffset(i){return parseInt(i,10)},duration(i){const e=parseInt(i,10);return isNaN(e)?df(i):e},d(i){return parseInt(i,10)},t(i){return parseInt(i,10)},r(i){return parseInt(i,10)},presentationTime(i){return parseInt(i,10)},DEFAULT(i){return i}},bn=i=>i&&i.attributes?z8(i.attributes).reduce((e,t)=>{const r=PL[t.name]||PL.DEFAULT;return e[t.name]=r(t.value),e},{}):{},oie={"urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b":"org.w3.clearkey","urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":"com.widevine.alpha","urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95":"com.microsoft.playready","urn:uuid:f239e769-efa3-4850-9c16-a903c6932efb":"com.adobe.primetime","urn:mpeg:dash:mp4protection:2011":"mp4protection"},Jx=(i,e)=>e.length?lp(i.map(function(t){return e.map(function(r){const n=rg(r),s=eg(t.baseUrl,n),a=Kn(bn(r),{baseUrl:s});return s!==n&&!a.serviceLocation&&t.serviceLocation&&(a.serviceLocation=t.serviceLocation),a})})):i,Ww=i=>{const e=qi(i,"SegmentTemplate")[0],t=qi(i,"SegmentList")[0],r=t&&qi(t,"SegmentURL").map(h=>Kn({tag:"SegmentURL"},bn(h))),n=qi(i,"SegmentBase")[0],s=t||e,a=s&&qi(s,"SegmentTimeline")[0],o=t||n||e,l=o&&qi(o,"Initialization")[0],u=e&&bn(e);u&&l?u.initialization=l&&bn(l):u&&u.initialization&&(u.initialization={sourceURL:u.initialization});const c={template:u,segmentTimeline:a&&qi(a,"S").map(h=>bn(h)),list:t&&Kn(bn(t),{segmentUrls:r,initialization:bn(l)}),base:n&&Kn(bn(n),{initialization:bn(l)})};return Object.keys(c).forEach(h=>{c[h]||delete c[h]}),c},lie=(i,e,t)=>r=>{const n=qi(r,"BaseURL"),s=Jx(e,n),a=Kn(i,bn(r)),o=Ww(r);return s.map(l=>({segmentInfo:Kn(t,o),attributes:Kn(a,l)}))},uie=i=>i.reduce((e,t)=>{const r=bn(t);r.schemeIdUri&&(r.schemeIdUri=r.schemeIdUri.toLowerCase());const n=oie[r.schemeIdUri];if(n){e[n]={attributes:r};const s=qi(t,"cenc:pssh")[0];if(s){const a=rg(s);e[n].pssh=a&&O8(a)}}return e},{}),cie=i=>{if(i.schemeIdUri==="urn:scte:dash:cc:cea-608:2015")return(typeof i.value!="string"?[]:i.value.split(";")).map(t=>{let r,n;return n=t,/^CC\d=/.test(t)?[r,n]=t.split("="):/^CC\d$/.test(t)&&(r=t),{channel:r,language:n}});if(i.schemeIdUri==="urn:scte:dash:cc:cea-708:2015")return(typeof i.value!="string"?[]:i.value.split(";")).map(t=>{const r={channel:void 0,language:void 0,aspectRatio:1,easyReader:0,"3D":0};if(/=/.test(t)){const[n,s=""]=t.split("=");r.channel=n,r.language=t,s.split(",").forEach(a=>{const[o,l]=a.split(":");o==="lang"?r.language=l:o==="er"?r.easyReader=Number(l):o==="war"?r.aspectRatio=Number(l):o==="3D"&&(r["3D"]=Number(l))})}else r.language=t;return r.channel&&(r.channel="SERVICE"+r.channel),r})},die=i=>lp(qi(i.node,"EventStream").map(e=>{const t=bn(e),r=t.schemeIdUri;return qi(e,"Event").map(n=>{const s=bn(n),a=s.presentationTime||0,o=t.timescale||1,l=s.duration||0,u=a/o+i.attributes.start;return{schemeIdUri:r,value:t.value,id:s.id,start:u,end:u+l/o,messageData:rg(n)||s.messageData,contentEncoding:t.contentEncoding,presentationTimeOffset:t.presentationTimeOffset||0}})})),hie=(i,e,t)=>r=>{const n=bn(r),s=Jx(e,qi(r,"BaseURL")),a=qi(r,"Role")[0],o={role:bn(a)};let l=Kn(i,n,o);const u=qi(r,"Accessibility")[0],c=cie(bn(u));c&&(l=Kn(l,{captionServices:c}));const h=qi(r,"Label")[0];if(h&&h.childNodes.length){const T=h.childNodes[0].nodeValue.trim();l=Kn(l,{label:T})}const m=uie(qi(r,"ContentProtection"));Object.keys(m).length&&(l=Kn(l,{contentProtection:m}));const g=Ww(r),y=qi(r,"Representation"),_=Kn(t,g);return lp(y.map(lie(l,s,_)))},fie=(i,e)=>(t,r)=>{const n=Jx(e,qi(t.node,"BaseURL")),s=Kn(i,{periodStart:t.attributes.start});typeof t.attributes.duration=="number"&&(s.periodDuration=t.attributes.duration);const a=qi(t.node,"AdaptationSet"),o=Ww(t.node);return lp(a.map(hie(s,n,o)))},pie=(i,e)=>{if(i.length>1&&e({type:"warn",message:"The MPD manifest should contain no more than one ContentSteering tag"}),!i.length)return null;const t=Kn({serverURL:rg(i[0])},bn(i[0]));return t.queryBeforeStart=t.queryBeforeStart==="true",t},mie=({attributes:i,priorPeriodAttributes:e,mpdType:t})=>typeof i.start=="number"?i.start:e&&typeof e.start=="number"&&typeof e.duration=="number"?e.start+e.duration:!e&&t==="static"?0:null,gie=(i,e={})=>{const{manifestUri:t="",NOW:r=Date.now(),clientOffset:n=0,eventHandler:s=function(){}}=e,a=qi(i,"Period");if(!a.length)throw new Error(up.INVALID_NUMBER_OF_PERIOD);const o=qi(i,"Location"),l=bn(i),u=Jx([{baseUrl:t}],qi(i,"BaseURL")),c=qi(i,"ContentSteering");l.type=l.type||"static",l.sourceDuration=l.mediaPresentationDuration||0,l.NOW=r,l.clientOffset=n,o.length&&(l.locations=o.map(rg));const h=[];return a.forEach((m,g)=>{const y=bn(m),_=h[g-1];y.start=mie({attributes:y,priorPeriodAttributes:_?_.attributes:null,mpdType:l.type}),h.push({node:m,attributes:y})}),{locations:l.locations,contentSteeringInfo:pie(c,s),representationInfo:lp(h.map(fie(l,u))),eventStream:lp(h.map(die))}},W8=i=>{if(i==="")throw new Error(up.DASH_EMPTY_MANIFEST);const e=new $8.DOMParser;let t,r;try{t=e.parseFromString(i,"application/xml"),r=t&&t.documentElement.tagName==="MPD"?t.documentElement:null}catch{}if(!r||r&&r.getElementsByTagName("parsererror").length>0)throw new Error(up.DASH_INVALID_XML);return r},vie=i=>{const e=qi(i,"UTCTiming")[0];if(!e)return null;const t=bn(e);switch(t.schemeIdUri){case"urn:mpeg:dash:utc:http-head:2014":case"urn:mpeg:dash:utc:http-head:2012":t.method="HEAD";break;case"urn:mpeg:dash:utc:http-xsdate:2014":case"urn:mpeg:dash:utc:http-iso:2014":case"urn:mpeg:dash:utc:http-xsdate:2012":case"urn:mpeg:dash:utc:http-iso:2012":t.method="GET";break;case"urn:mpeg:dash:utc:direct:2014":case"urn:mpeg:dash:utc:direct:2012":t.method="DIRECT",t.value=Date.parse(t.value);break;case"urn:mpeg:dash:utc:http-ntp:2014":case"urn:mpeg:dash:utc:ntp:2014":case"urn:mpeg:dash:utc:sntp:2014":default:throw new Error(up.UNSUPPORTED_UTC_TIMING_SCHEME)}return t},G8=(i,e={})=>{const t=gie(W8(i),e),r=nie(t.representationInfo);return Xre({dashPlaylists:r,locations:t.locations,contentSteering:t.contentSteeringInfo,sidxMapping:e.sidxMapping,previousManifest:e.previousManifest,eventStream:t.eventStream})},K8=i=>vie(W8(i));var NS,RL;function yie(){if(RL)return NS;RL=1;var i=Math.pow(2,32),e=function(t){var r=new DataView(t.buffer,t.byteOffset,t.byteLength),n;return r.getBigUint64?(n=r.getBigUint64(0),n<Number.MAX_SAFE_INTEGER?Number(n):n):r.getUint32(0)*i+r.getUint32(4)};return NS={getUint64:e,MAX_UINT32:i},NS}var US,LL;function _ie(){if(LL)return US;LL=1;var i=yie().getUint64,e=function(t){var r=new DataView(t.buffer,t.byteOffset,t.byteLength),n={version:t[0],flags:new Uint8Array(t.subarray(1,4)),references:[],referenceId:r.getUint32(4),timescale:r.getUint32(8)},s=12;n.version===0?(n.earliestPresentationTime=r.getUint32(s),n.firstOffset=r.getUint32(s+4),s+=8):(n.earliestPresentationTime=i(t.subarray(s)),n.firstOffset=i(t.subarray(s+8)),s+=16),s+=2;var a=r.getUint16(s);for(s+=2;a>0;s+=12,a--)n.references.push({referenceType:(t[s]&128)>>>7,referencedSize:r.getUint32(s)&2147483647,subsegmentDuration:r.getUint32(s+4),startsWithSap:!!(t[s+8]&128),sapType:(t[s+8]&112)>>>4,sapDeltaTime:r.getUint32(s+8)&268435455});return n};return US=e,US}var xie=_ie();const X8=ia(xie);var Tie=fr([73,68,51]),bie=function(e,t){t===void 0&&(t=0),e=fr(e);var r=e[t+5],n=e[t+6]<<21|e[t+7]<<14|e[t+8]<<7|e[t+9],s=(r&16)>>4;return s?n+20:n+10},Af=function i(e,t){return t===void 0&&(t=0),e=fr(e),e.length-t<10||!Hi(e,Tie,{offset:t})?t:(t+=bie(e,t),i(e,t))},OL=function(e){return typeof e=="string"?Hw(e):e},Sie=function(e){return Array.isArray(e)?e.map(function(t){return OL(t)}):[OL(e)]},Cie=function i(e,t,r){r===void 0&&(r=!1),t=Sie(t),e=fr(e);var n=[];if(!t.length)return n;for(var s=0;s<e.length;){var a=(e[s]<<24|e[s+1]<<16|e[s+2]<<8|e[s+3])>>>0,o=e.subarray(s+4,s+8);if(a===0)break;var l=s+a;if(l>e.length){if(r)break;l=e.length}var u=e.subarray(s+8,l);Hi(o,t[0])&&(t.length===1?n.push(u):n.push.apply(n,i(u,t.slice(1),r))),s=l}return n},gv={EBML:fr([26,69,223,163]),DocType:fr([66,130]),Segment:fr([24,83,128,103]),SegmentInfo:fr([21,73,169,102]),Tracks:fr([22,84,174,107]),Track:fr([174]),TrackNumber:fr([215]),DefaultDuration:fr([35,227,131]),TrackEntry:fr([174]),TrackType:fr([131]),FlagDefault:fr([136]),CodecID:fr([134]),CodecPrivate:fr([99,162]),VideoTrack:fr([224]),AudioTrack:fr([225]),Cluster:fr([31,67,182,117]),Timestamp:fr([231]),TimestampScale:fr([42,215,177]),BlockGroup:fr([160]),BlockDuration:fr([155]),Block:fr([161]),SimpleBlock:fr([163])},xC=[128,64,32,16,8,4,2,1],Eie=function(e){for(var t=1,r=0;r<xC.length&&!(e&xC[r]);r++)t++;return t},y_=function(e,t,r,n){r===void 0&&(r=!0),n===void 0&&(n=!1);var s=Eie(e[t]),a=e.subarray(t,t+s);return r&&(a=Array.prototype.slice.call(e,t,t+s),a[0]^=xC[s-1]),{length:s,value:xre(a,{signed:n}),bytes:a}},ML=function i(e){return typeof e=="string"?e.match(/.{1,2}/g).map(function(t){return i(t)}):typeof e=="number"?Tre(e):e},wie=function(e){return Array.isArray(e)?e.map(function(t){return ML(t)}):[ML(e)]},kie=function i(e,t,r){if(r>=t.length)return t.length;var n=y_(t,r,!1);if(Hi(e.bytes,n.bytes))return r;var s=y_(t,r+n.length);return i(e,t,r+s.length+s.value+n.length)},FL=function i(e,t){t=wie(t),e=fr(e);var r=[];if(!t.length)return r;for(var n=0;n<e.length;){var s=y_(e,n,!1),a=y_(e,n+s.length),o=n+s.length+a.length;a.value===127&&(a.value=kie(s,e,o),a.value!==e.length&&(a.value-=o));var l=o+a.value>e.length?e.length:o+a.value,u=e.subarray(o,l);Hi(t[0],s.bytes)&&(t.length===1?r.push(u):r=r.concat(i(u,t.slice(1))));var c=s.length+a.length+u.length;n+=c}return r},Aie=fr([0,0,0,1]),Iie=fr([0,0,1]),Die=fr([0,0,3]),Pie=function(e){for(var t=[],r=1;r<e.length-2;)Hi(e.subarray(r,r+3),Die)&&(t.push(r+2),r++),r++;if(t.length===0)return e;var n=e.length-t.length,s=new Uint8Array(n),a=0;for(r=0;r<n;a++,r++)a===t[0]&&(a++,t.shift()),s[r]=e[a];return s},Y8=function(e,t,r,n){e=fr(e),r=[].concat(r);for(var s=0,a,o=0;s<e.length&&(o<n||a);){var l=void 0;if(Hi(e.subarray(s),Aie)?l=4:Hi(e.subarray(s),Iie)&&(l=3),!l){s++;continue}if(o++,a)return Pie(e.subarray(a,s));var u=void 0;t==="h264"?u=e[s+l]&31:t==="h265"&&(u=e[s+l]>>1&63),r.indexOf(u)!==-1&&(a=s+l),s+=l+(t==="h264"?1:2)}return e.subarray(0,0)},Rie=function(e,t,r){return Y8(e,"h264",t,r)},Lie=function(e,t,r){return Y8(e,"h265",t,r)},Hs={webm:fr([119,101,98,109]),matroska:fr([109,97,116,114,111,115,107,97]),flac:fr([102,76,97,67]),ogg:fr([79,103,103,83]),ac3:fr([11,119]),riff:fr([82,73,70,70]),avi:fr([65,86,73]),wav:fr([87,65,86,69]),"3gp":fr([102,116,121,112,51,103]),mp4:fr([102,116,121,112]),fmp4:fr([115,116,121,112]),mov:fr([102,116,121,112,113,116]),moov:fr([109,111,111,118]),moof:fr([109,111,111,102])},cp={aac:function(e){var t=Af(e);return Hi(e,[255,16],{offset:t,mask:[255,22]})},mp3:function(e){var t=Af(e);return Hi(e,[255,2],{offset:t,mask:[255,6]})},webm:function(e){var t=FL(e,[gv.EBML,gv.DocType])[0];return Hi(t,Hs.webm)},mkv:function(e){var t=FL(e,[gv.EBML,gv.DocType])[0];return Hi(t,Hs.matroska)},mp4:function(e){if(cp["3gp"](e)||cp.mov(e))return!1;if(Hi(e,Hs.mp4,{offset:4})||Hi(e,Hs.fmp4,{offset:4})||Hi(e,Hs.moof,{offset:4})||Hi(e,Hs.moov,{offset:4}))return!0},mov:function(e){return Hi(e,Hs.mov,{offset:4})},"3gp":function(e){return Hi(e,Hs["3gp"],{offset:4})},ac3:function(e){var t=Af(e);return Hi(e,Hs.ac3,{offset:t})},ts:function(e){if(e.length<189&&e.length>=1)return e[0]===71;for(var t=0;t+188<e.length&&t<188;){if(e[t]===71&&e[t+188]===71)return!0;t+=1}return!1},flac:function(e){var t=Af(e);return Hi(e,Hs.flac,{offset:t})},ogg:function(e){return Hi(e,Hs.ogg)},avi:function(e){return Hi(e,Hs.riff)&&Hi(e,Hs.avi,{offset:8})},wav:function(e){return Hi(e,Hs.riff)&&Hi(e,Hs.wav,{offset:8})},h264:function(e){return Rie(e,7,3).length},h265:function(e){return Lie(e,[32,33],3).length}},TC=Object.keys(cp).filter(function(i){return i!=="ts"&&i!=="h264"&&i!=="h265"}).concat(["ts","h264","h265"]);TC.forEach(function(i){var e=cp[i];cp[i]=function(t){return e(fr(t))}});var Oie=cp,Pp=function(e){e=fr(e);for(var t=0;t<TC.length;t++){var r=TC[t];if(Oie[r](e))return r}return""},Q8=function(e){return Cie(e,["moof"]).length>0},$S,BL;function Mie(){if(BL)return $S;BL=1;var i=9e4,e,t,r,n,s,a,o;return e=function(l){return l*i},t=function(l,u){return l*u},r=function(l){return l/i},n=function(l,u){return l/u},s=function(l,u){return e(n(l,u))},a=function(l,u){return t(r(l),u)},o=function(l,u,c){return r(c?l:l-u)},$S={ONE_SECOND_IN_TS:i,secondsToVideoTs:e,secondsToAudioTs:t,videoTsToSeconds:r,audioTsToSeconds:n,audioTsToVideoTs:s,videoTsToAudioTs:a,metadataTsToSeconds:o},$S}var Aa=Mie();/**
 * @license
 * Video.js 8.19.1 <http://videojs.com/>
 * Copyright Brightcove, Inc. <https://www.brightcove.com/>
 * Available under Apache License Version 2.0
 * <https://github.com/videojs/video.js/blob/main/LICENSE>
 *
 * Includes vtt.js <https://github.com/mozilla/vtt.js>
 * Available under Apache License Version 2.0
 * <https://github.com/mozilla/vtt.js/blob/main/LICENSE>
 */var bC="8.19.1";const Qu={},hd=function(i,e){return Qu[i]=Qu[i]||[],e&&(Qu[i]=Qu[i].concat(e)),Qu[i]},Fie=function(i,e){hd(i,e)},J8=function(i,e){const t=hd(i).indexOf(e);return t<=-1?!1:(Qu[i]=Qu[i].slice(),Qu[i].splice(t,1),!0)},Bie=function(i,e){hd(i,[].concat(e).map(t=>{const r=(...n)=>(J8(i,r),t(...n));return r}))},__={prefixed:!0},Oy=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror","fullscreen"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror","-webkit-full-screen"]],NL=Oy[0];let Gm;for(let i=0;i<Oy.length;i++)if(Oy[i][1]in Me){Gm=Oy[i];break}if(Gm){for(let i=0;i<Gm.length;i++)__[NL[i]]=Gm[i];__.prefixed=Gm[0]!==NL[0]}let Ta=[];const Nie=(i,e,t)=>(r,n,s)=>{const a=e.levels[n],o=new RegExp(`^(${a})$`);let l=i;if(r!=="log"&&s.unshift(r.toUpperCase()+":"),t&&(l=`%c${i}`,s.unshift(t)),s.unshift(l+":"),Ta){Ta.push([].concat(s));const c=Ta.length-1e3;Ta.splice(0,c>0?c:0)}if(!X.console)return;let u=X.console[r];!u&&r==="debug"&&(u=X.console.info||X.console.log),!(!u||!a||!o.test(r))&&u[Array.isArray(s)?"apply":"call"](X.console,s)};function SC(i,e=":",t=""){let r="info",n;function s(...a){n("log",r,a)}return n=Nie(i,s,t),s.createLogger=(a,o,l)=>{const u=o!==void 0?o:e,c=l!==void 0?l:t,h=`${i} ${u} ${a}`;return SC(h,u,c)},s.createNewLogger=(a,o,l)=>SC(a,o,l),s.levels={all:"debug|log|warn|error",off:"",debug:"debug|log|warn|error",info:"log|warn|error",warn:"warn|error",error:"error",DEFAULT:r},s.level=a=>{if(typeof a=="string"){if(!s.levels.hasOwnProperty(a))throw new Error(`"${a}" in not a valid log level`);r=a}return r},s.history=()=>Ta?[].concat(Ta):[],s.history.filter=a=>(Ta||[]).filter(o=>new RegExp(`.*${a}.*`).test(o[0])),s.history.clear=()=>{Ta&&(Ta.length=0)},s.history.disable=()=>{Ta!==null&&(Ta.length=0,Ta=null)},s.history.enable=()=>{Ta===null&&(Ta=[])},s.error=(...a)=>n("error",r,a),s.warn=(...a)=>n("warn",r,a),s.debug=(...a)=>n("debug",r,a),s}const Ur=SC("VIDEOJS"),Z8=Ur.createLogger,Uie=Object.prototype.toString,eB=function(i){return hu(i)?Object.keys(i):[]};function zf(i,e){eB(i).forEach(t=>e(i[t],t))}function tB(i,e,t=0){return eB(i).reduce((r,n)=>e(r,i[n],n),t)}function hu(i){return!!i&&typeof i=="object"}function dp(i){return hu(i)&&Uie.call(i)==="[object Object]"&&i.constructor===Object}function Ai(...i){const e={};return i.forEach(t=>{t&&zf(t,(r,n)=>{if(!dp(r)){e[n]=r;return}dp(e[n])||(e[n]={}),e[n]=Ai(e[n],r)})}),e}function rB(i={}){const e=[];for(const t in i)if(i.hasOwnProperty(t)){const r=i[t];e.push(r)}return e}function Zx(i,e,t,r=!0){const n=a=>Object.defineProperty(i,e,{value:a,enumerable:!0,writable:!0}),s={configurable:!0,enumerable:!0,get(){const a=t();return n(a),a}};return r&&(s.set=n),Object.defineProperty(i,e,s)}var $ie=Object.freeze({__proto__:null,each:zf,reduce:tB,isObject:hu,isPlain:dp,merge:Ai,values:rB,defineLazyProperty:Zx});let Gw=!1,iB=null,fu=!1,nB,sB=!1,Hf=!1,Vf=!1,pu=!1,Kw=null,eT=null;const jie=!!(X.cast&&X.cast.framework&&X.cast.framework.CastReceiverContext);let aB=null,x_=!1,tT=!1,T_=!1,rT=!1,b_=!1,S_=!1,C_=!1;const I0=!!(Rp()&&("ontouchstart"in X||X.navigator.maxTouchPoints||X.DocumentTouch&&X.document instanceof X.DocumentTouch)),qc=X.navigator&&X.navigator.userAgentData;qc&&qc.platform&&qc.brands&&(fu=qc.platform==="Android",Hf=!!qc.brands.find(i=>i.brand==="Microsoft Edge"),Vf=!!qc.brands.find(i=>i.brand==="Chromium"),pu=!Hf&&Vf,Kw=eT=(qc.brands.find(i=>i.brand==="Chromium")||{}).version||null,tT=qc.platform==="Windows");if(!Vf){const i=X.navigator&&X.navigator.userAgent||"";Gw=/iPod/i.test(i),iB=(function(){const e=i.match(/OS (\d+)_/i);return e&&e[1]?e[1]:null})(),fu=/Android/i.test(i),nB=(function(){const e=i.match(/Android (\d+)(?:\.(\d+))?(?:\.(\d+))*/i);if(!e)return null;const t=e[1]&&parseFloat(e[1]),r=e[2]&&parseFloat(e[2]);return t&&r?parseFloat(e[1]+"."+e[2]):t||null})(),sB=/Firefox/i.test(i),Hf=/Edg/i.test(i),Vf=/Chrome/i.test(i)||/CriOS/i.test(i),pu=!Hf&&Vf,Kw=eT=(function(){const e=i.match(/(Chrome|CriOS)\/(\d+)/);return e&&e[2]?parseFloat(e[2]):null})(),aB=(function(){const e=/MSIE\s(\d+)\.\d/.exec(i);let t=e&&parseFloat(e[1]);return!t&&/Trident\/7.0/i.test(i)&&/rv:11.0/.test(i)&&(t=11),t})(),b_=/Tizen/i.test(i),S_=/Web0S/i.test(i),C_=b_||S_,x_=/Safari/i.test(i)&&!pu&&!fu&&!Hf&&!C_,tT=/Windows/i.test(i),T_=/iPad/i.test(i)||x_&&I0&&!/iPhone/i.test(i),rT=/iPhone/i.test(i)&&!T_}const ta=rT||T_||Gw,iT=(x_||ta)&&!pu;var oB=Object.freeze({__proto__:null,get IS_IPOD(){return Gw},get IOS_VERSION(){return iB},get IS_ANDROID(){return fu},get ANDROID_VERSION(){return nB},get IS_FIREFOX(){return sB},get IS_EDGE(){return Hf},get IS_CHROMIUM(){return Vf},get IS_CHROME(){return pu},get CHROMIUM_VERSION(){return Kw},get CHROME_VERSION(){return eT},IS_CHROMECAST_RECEIVER:jie,get IE_VERSION(){return aB},get IS_SAFARI(){return x_},get IS_WINDOWS(){return tT},get IS_IPAD(){return T_},get IS_IPHONE(){return rT},get IS_TIZEN(){return b_},get IS_WEBOS(){return S_},get IS_SMART_TV(){return C_},TOUCH_ENABLED:I0,IS_IOS:ta,IS_ANY_SAFARI:iT});function UL(i){return typeof i=="string"&&!!i.trim()}function zie(i){if(i.indexOf(" ")>=0)throw new Error("class has illegal whitespace characters")}function Rp(){return Me===X.document}function Lp(i){return hu(i)&&i.nodeType===1}function lB(){try{return X.parent!==X.self}catch{return!0}}function uB(i){return function(e,t){if(!UL(e))return Me[i](null);UL(t)&&(t=Me.querySelector(t));const r=Lp(t)?t:Me;return r[i]&&r[i](e)}}function _r(i="div",e={},t={},r){const n=Me.createElement(i);return Object.getOwnPropertyNames(e).forEach(function(s){const a=e[s];s==="textContent"?_d(n,a):(n[s]!==a||s==="tabIndex")&&(n[s]=a)}),Object.getOwnPropertyNames(t).forEach(function(s){n.setAttribute(s,t[s])}),r&&Xw(n,r),n}function _d(i,e){return typeof i.textContent>"u"?i.innerText=e:i.textContent=e,i}function CC(i,e){e.firstChild?e.insertBefore(i,e.firstChild):e.appendChild(i)}function n0(i,e){return zie(e),i.classList.contains(e)}function ph(i,...e){return i.classList.add(...e.reduce((t,r)=>t.concat(r.split(/\s+/)),[])),i}function nT(i,...e){return i?(i.classList.remove(...e.reduce((t,r)=>t.concat(r.split(/\s+/)),[])),i):(Ur.warn("removeClass was called with an element that doesn't exist"),null)}function cB(i,e,t){return typeof t=="function"&&(t=t(i,e)),typeof t!="boolean"&&(t=void 0),e.split(/\s+/).forEach(r=>i.classList.toggle(r,t)),i}function dB(i,e){Object.getOwnPropertyNames(e).forEach(function(t){const r=e[t];r===null||typeof r>"u"||r===!1?i.removeAttribute(t):i.setAttribute(t,r===!0?"":r)})}function Jc(i){const e={},t=["autoplay","controls","playsinline","loop","muted","default","defaultMuted"];if(i&&i.attributes&&i.attributes.length>0){const r=i.attributes;for(let n=r.length-1;n>=0;n--){const s=r[n].name;let a=r[n].value;t.includes(s)&&(a=a!==null),e[s]=a}}return e}function hB(i,e){return i.getAttribute(e)}function hp(i,e,t){i.setAttribute(e,t)}function sT(i,e){i.removeAttribute(e)}function fB(){Me.body.focus(),Me.onselectstart=function(){return!1}}function pB(){Me.onselectstart=function(){return!0}}function fp(i){if(i&&i.getBoundingClientRect&&i.parentNode){const e=i.getBoundingClientRect(),t={};return["bottom","height","left","right","top","width"].forEach(r=>{e[r]!==void 0&&(t[r]=e[r])}),t.height||(t.height=parseFloat(pp(i,"height"))),t.width||(t.width=parseFloat(pp(i,"width"))),t}}function D0(i){if(!i||i&&!i.offsetParent)return{left:0,top:0,width:0,height:0};const e=i.offsetWidth,t=i.offsetHeight;let r=0,n=0;for(;i.offsetParent&&i!==Me[__.fullscreenElement];)r+=i.offsetLeft,n+=i.offsetTop,i=i.offsetParent;return{left:r,top:n,width:e,height:t}}function aT(i,e){const t={x:0,y:0};if(ta){let c=i;for(;c&&c.nodeName.toLowerCase()!=="html";){const h=pp(c,"transform");if(/^matrix/.test(h)){const m=h.slice(7,-1).split(/,\s/).map(Number);t.x+=m[4],t.y+=m[5]}else if(/^matrix3d/.test(h)){const m=h.slice(9,-1).split(/,\s/).map(Number);t.x+=m[12],t.y+=m[13]}if(c.assignedSlot&&c.assignedSlot.parentElement&&X.WebKitCSSMatrix){const m=X.getComputedStyle(c.assignedSlot.parentElement).transform,g=new X.WebKitCSSMatrix(m);t.x+=g.m41,t.y+=g.m42}c=c.parentNode||c.host}}const r={},n=D0(e.target),s=D0(i),a=s.width,o=s.height;let l=e.offsetY-(s.top-n.top),u=e.offsetX-(s.left-n.left);return e.changedTouches&&(u=e.changedTouches[0].pageX-s.left,l=e.changedTouches[0].pageY+s.top,ta&&(u-=t.x,l-=t.y)),r.y=1-Math.max(0,Math.min(1,l/o)),r.x=Math.max(0,Math.min(1,u/a)),r}function mB(i){return hu(i)&&i.nodeType===3}function oT(i){for(;i.firstChild;)i.removeChild(i.firstChild);return i}function gB(i){return typeof i=="function"&&(i=i()),(Array.isArray(i)?i:[i]).map(e=>{if(typeof e=="function"&&(e=e()),Lp(e)||mB(e))return e;if(typeof e=="string"&&/\S/.test(e))return Me.createTextNode(e)}).filter(e=>e)}function Xw(i,e){return gB(e).forEach(t=>i.appendChild(t)),i}function vB(i,e){return Xw(oT(i),e)}function P0(i){return i.button===void 0&&i.buttons===void 0||i.button===0&&i.buttons===void 0||i.type==="mouseup"&&i.button===0&&i.buttons===0||i.type==="mousedown"&&i.button===0&&i.buttons===0?!0:!(i.button!==0||i.buttons!==1)}const fd=uB("querySelector"),yB=uB("querySelectorAll");function pp(i,e){if(!i||!e)return"";if(typeof X.getComputedStyle=="function"){let t;try{t=X.getComputedStyle(i)}catch{return""}return t?t.getPropertyValue(e)||t[e]:""}return""}function _B(i){[...Me.styleSheets].forEach(e=>{try{const t=[...e.cssRules].map(n=>n.cssText).join(""),r=Me.createElement("style");r.textContent=t,i.document.head.appendChild(r)}catch{const r=Me.createElement("link");r.rel="stylesheet",r.type=e.type,r.media=e.media.mediaText,r.href=e.href,i.document.head.appendChild(r)}})}var xB=Object.freeze({__proto__:null,isReal:Rp,isEl:Lp,isInFrame:lB,createEl:_r,textContent:_d,prependTo:CC,hasClass:n0,addClass:ph,removeClass:nT,toggleClass:cB,setAttributes:dB,getAttributes:Jc,getAttribute:hB,setAttribute:hp,removeAttribute:sT,blockTextSelection:fB,unblockTextSelection:pB,getBoundingClientRect:fp,findPosition:D0,getPointerPosition:aT,isTextNode:mB,emptyEl:oT,normalizeContent:gB,appendContent:Xw,insertContent:vB,isSingleLeftClick:P0,$:fd,$$:yB,computedStyle:pp,copyStyleSheetsToWindow:_B});let TB=!1,EC;const Hie=function(){if(EC.options.autoSetup===!1)return;const i=Array.prototype.slice.call(Me.getElementsByTagName("video")),e=Array.prototype.slice.call(Me.getElementsByTagName("audio")),t=Array.prototype.slice.call(Me.getElementsByTagName("video-js")),r=i.concat(e,t);if(r&&r.length>0)for(let n=0,s=r.length;n<s;n++){const a=r[n];if(a&&a.getAttribute)a.player===void 0&&a.getAttribute("data-setup")!==null&&EC(a);else{wC(1);break}}else TB||wC(1)};function wC(i,e){Rp()&&(e&&(EC=e),X.setTimeout(Hie,i))}function kC(){TB=!0,X.removeEventListener("load",kC)}Rp()&&(Me.readyState==="complete"?kC():X.addEventListener("load",kC));const bB=function(i){const e=Me.createElement("style");return e.className=i,e},SB=function(i,e){i.styleSheet?i.styleSheet.cssText=e:i.textContent=e};var Ys=new WeakMap;const Vie=3;let qie=Vie;function Mo(){return qie++}function $L(i,e){if(!Ys.has(i))return;const t=Ys.get(i);t.handlers[e].length===0&&(delete t.handlers[e],i.removeEventListener?i.removeEventListener(e,t.dispatcher,!1):i.detachEvent&&i.detachEvent("on"+e,t.dispatcher)),Object.getOwnPropertyNames(t.handlers).length<=0&&(delete t.handlers,delete t.dispatcher,delete t.disabled),Object.getOwnPropertyNames(t).length===0&&Ys.delete(i)}function Yw(i,e,t,r){t.forEach(function(n){i(e,n,r)})}function lT(i){if(i.fixed_)return i;function e(){return!0}function t(){return!1}if(!i||!i.isPropagationStopped||!i.isImmediatePropagationStopped){const r=i||X.event;i={};const n=["layerX","layerY","keyLocation","path","webkitMovementX","webkitMovementY","mozPressure","mozInputSource"];for(const s in r)n.includes(s)||s==="returnValue"&&r.preventDefault||(i[s]=r[s]);if(i.target||(i.target=i.srcElement||Me),i.relatedTarget||(i.relatedTarget=i.fromElement===i.target?i.toElement:i.fromElement),i.preventDefault=function(){r.preventDefault&&r.preventDefault(),i.returnValue=!1,r.returnValue=!1,i.defaultPrevented=!0},i.defaultPrevented=!1,i.stopPropagation=function(){r.stopPropagation&&r.stopPropagation(),i.cancelBubble=!0,r.cancelBubble=!0,i.isPropagationStopped=e},i.isPropagationStopped=t,i.stopImmediatePropagation=function(){r.stopImmediatePropagation&&r.stopImmediatePropagation(),i.isImmediatePropagationStopped=e,i.stopPropagation()},i.isImmediatePropagationStopped=t,i.clientX!==null&&i.clientX!==void 0){const s=Me.documentElement,a=Me.body;i.pageX=i.clientX+(s&&s.scrollLeft||a&&a.scrollLeft||0)-(s&&s.clientLeft||a&&a.clientLeft||0),i.pageY=i.clientY+(s&&s.scrollTop||a&&a.scrollTop||0)-(s&&s.clientTop||a&&a.clientTop||0)}i.which=i.charCode||i.keyCode,i.button!==null&&i.button!==void 0&&(i.button=i.button&1?0:i.button&4?1:i.button&2?2:0)}return i.fixed_=!0,i}let vv;const Wie=function(){if(typeof vv!="boolean"){vv=!1;try{const i=Object.defineProperty({},"passive",{get(){vv=!0}});X.addEventListener("test",null,i),X.removeEventListener("test",null,i)}catch{}}return vv},Gie=["touchstart","touchmove"];function no(i,e,t){if(Array.isArray(e))return Yw(no,i,e,t);Ys.has(i)||Ys.set(i,{});const r=Ys.get(i);if(r.handlers||(r.handlers={}),r.handlers[e]||(r.handlers[e]=[]),t.guid||(t.guid=Mo()),r.handlers[e].push(t),r.dispatcher||(r.disabled=!1,r.dispatcher=function(n,s){if(r.disabled)return;n=lT(n);const a=r.handlers[n.type];if(a){const o=a.slice(0);for(let l=0,u=o.length;l<u&&!n.isImmediatePropagationStopped();l++)try{o[l].call(i,n,s)}catch(c){Ur.error(c)}}}),r.handlers[e].length===1)if(i.addEventListener){let n=!1;Wie()&&Gie.indexOf(e)>-1&&(n={passive:!0}),i.addEventListener(e,r.dispatcher,n)}else i.attachEvent&&i.attachEvent("on"+e,r.dispatcher)}function Rs(i,e,t){if(!Ys.has(i))return;const r=Ys.get(i);if(!r.handlers)return;if(Array.isArray(e))return Yw(Rs,i,e,t);const n=function(a,o){r.handlers[o]=[],$L(a,o)};if(e===void 0){for(const a in r.handlers)Object.prototype.hasOwnProperty.call(r.handlers||{},a)&&n(i,a);return}const s=r.handlers[e];if(s){if(!t){n(i,e);return}if(t.guid)for(let a=0;a<s.length;a++)s[a].guid===t.guid&&s.splice(a--,1);$L(i,e)}}function Op(i,e,t){const r=Ys.has(i)?Ys.get(i):{},n=i.parentNode||i.ownerDocument;if(typeof e=="string"?e={type:e,target:i}:e.target||(e.target=i),e=lT(e),r.dispatcher&&r.dispatcher.call(i,e,t),n&&!e.isPropagationStopped()&&e.bubbles===!0)Op.call(null,n,e,t);else if(!n&&!e.defaultPrevented&&e.target&&e.target[e.type]){Ys.has(e.target)||Ys.set(e.target,{});const s=Ys.get(e.target);e.target[e.type]&&(s.disabled=!0,typeof e.target[e.type]=="function"&&e.target[e.type](),s.disabled=!1)}return!e.defaultPrevented}function uT(i,e,t){if(Array.isArray(e))return Yw(uT,i,e,t);const r=function(){Rs(i,e,r),t.apply(this,arguments)};r.guid=t.guid=t.guid||Mo(),no(i,e,r)}function Qw(i,e,t){const r=function(){Rs(i,e,r),t.apply(this,arguments)};r.guid=t.guid=t.guid||Mo(),no(i,e,r)}var Kie=Object.freeze({__proto__:null,fixEvent:lT,on:no,off:Rs,trigger:Op,one:uT,any:Qw});const Fo=30,Ri=function(i,e,t){e.guid||(e.guid=Mo());const r=e.bind(i);return r.guid=t?t+"_"+e.guid:e.guid,r},mu=function(i,e){let t=X.performance.now();return function(...n){const s=X.performance.now();s-t>=e&&(i(...n),t=s)}},CB=function(i,e,t,r=X){let n;const s=()=>{r.clearTimeout(n),n=null},a=function(){const o=this,l=arguments;let u=function(){n=null,u=null,t||i.apply(o,l)};!n&&t&&i.apply(o,l),r.clearTimeout(n),n=r.setTimeout(u,e)};return a.cancel=s,a};var Xie=Object.freeze({__proto__:null,UPDATE_REFRESH_INTERVAL:Fo,bind_:Ri,throttle:mu,debounce:CB});let Im,so=class{on(e,t){const r=this.addEventListener;this.addEventListener=()=>{},no(this,e,t),this.addEventListener=r}off(e,t){Rs(this,e,t)}one(e,t){const r=this.addEventListener;this.addEventListener=()=>{},uT(this,e,t),this.addEventListener=r}any(e,t){const r=this.addEventListener;this.addEventListener=()=>{},Qw(this,e,t),this.addEventListener=r}trigger(e){const t=e.type||e;typeof e=="string"&&(e={type:t}),e=lT(e),this.allowedEvents_[t]&&this["on"+t]&&this["on"+t](e),Op(this,e)}queueTrigger(e){Im||(Im=new Map);const t=e.type||e;let r=Im.get(this);r||(r=new Map,Im.set(this,r));const n=r.get(t);r.delete(t),X.clearTimeout(n);const s=X.setTimeout(()=>{r.delete(t),r.size===0&&(r=null,Im.delete(this)),this.trigger(e)},0);r.set(t,s)}};so.prototype.allowedEvents_={};so.prototype.addEventListener=so.prototype.on;so.prototype.removeEventListener=so.prototype.off;so.prototype.dispatchEvent=so.prototype.trigger;const cT=i=>typeof i.name=="function"?i.name():typeof i.name=="string"?i.name:i.name_?i.name_:i.constructor&&i.constructor.name?i.constructor.name:typeof i,ic=i=>i instanceof so||!!i.eventBusEl_&&["on","one","off","trigger"].every(e=>typeof i[e]=="function"),Yie=(i,e)=>{ic(i)?e():(i.eventedCallbacks||(i.eventedCallbacks=[]),i.eventedCallbacks.push(e))},AC=i=>typeof i=="string"&&/\S/.test(i)||Array.isArray(i)&&!!i.length,E_=(i,e,t)=>{if(!i||!i.nodeName&&!ic(i))throw new Error(`Invalid target for ${cT(e)}#${t}; must be a DOM node or evented object.`)},EB=(i,e,t)=>{if(!AC(i))throw new Error(`Invalid event type for ${cT(e)}#${t}; must be a non-empty string or array.`)},wB=(i,e,t)=>{if(typeof i!="function")throw new Error(`Invalid listener for ${cT(e)}#${t}; must be a function.`)},jS=(i,e,t)=>{const r=e.length<3||e[0]===i||e[0]===i.eventBusEl_;let n,s,a;return r?(n=i.eventBusEl_,e.length>=3&&e.shift(),[s,a]=e):(n=e[0],s=e[1],a=e[2]),E_(n,i,t),EB(s,i,t),wB(a,i,t),a=Ri(i,a),{isTargetingSelf:r,target:n,type:s,listener:a}},Wd=(i,e,t,r)=>{E_(i,i,e),i.nodeName?Kie[e](i,t,r):i[e](t,r)},Qie={on(...i){const{isTargetingSelf:e,target:t,type:r,listener:n}=jS(this,i,"on");if(Wd(t,"on",r,n),!e){const s=()=>this.off(t,r,n);s.guid=n.guid;const a=()=>this.off("dispose",s);a.guid=n.guid,Wd(this,"on","dispose",s),Wd(t,"on","dispose",a)}},one(...i){const{isTargetingSelf:e,target:t,type:r,listener:n}=jS(this,i,"one");if(e)Wd(t,"one",r,n);else{const s=(...a)=>{this.off(t,r,s),n.apply(null,a)};s.guid=n.guid,Wd(t,"one",r,s)}},any(...i){const{isTargetingSelf:e,target:t,type:r,listener:n}=jS(this,i,"any");if(e)Wd(t,"any",r,n);else{const s=(...a)=>{this.off(t,r,s),n.apply(null,a)};s.guid=n.guid,Wd(t,"any",r,s)}},off(i,e,t){if(!i||AC(i))Rs(this.eventBusEl_,i,e);else{const r=i,n=e;E_(r,this,"off"),EB(n,this,"off"),wB(t,this,"off"),t=Ri(this,t),this.off("dispose",t),r.nodeName?(Rs(r,n,t),Rs(r,"dispose",t)):ic(r)&&(r.off(n,t),r.off("dispose",t))}},trigger(i,e){E_(this.eventBusEl_,this,"trigger");const t=i&&typeof i!="string"?i.type:i;if(!AC(t))throw new Error(`Invalid event type for ${cT(this)}#trigger; must be a non-empty string or object with a type key that has a non-empty value.`);return Op(this.eventBusEl_,i,e)}};function Jw(i,e={}){const{eventBusKey:t}=e;if(t){if(!i[t].nodeName)throw new Error(`The eventBusKey "${t}" does not refer to an element.`);i.eventBusEl_=i[t]}else i.eventBusEl_=_r("span",{className:"vjs-event-bus"});return Object.assign(i,Qie),i.eventedCallbacks&&i.eventedCallbacks.forEach(r=>{r()}),i.on("dispose",()=>{i.off(),[i,i.el_,i.eventBusEl_].forEach(function(r){r&&Ys.has(r)&&Ys.delete(r)}),X.setTimeout(()=>{i.eventBusEl_=null},0)}),i}const Jie={state:{},setState(i){typeof i=="function"&&(i=i());let e;return zf(i,(t,r)=>{this.state[r]!==t&&(e=e||{},e[r]={from:this.state[r],to:t}),this.state[r]=t}),e&&ic(this)&&this.trigger({changes:e,type:"statechanged"}),e}};function kB(i,e){return Object.assign(i,Jie),i.state=Object.assign({},i.state,e),typeof i.handleStateChanged=="function"&&ic(i)&&i.on("statechanged",i.handleStateChanged),i}const s0=function(i){return typeof i!="string"?i:i.replace(/./,e=>e.toLowerCase())},nn=function(i){return typeof i!="string"?i:i.replace(/./,e=>e.toUpperCase())},AB=function(i,e){return nn(i)===nn(e)};var Zie=Object.freeze({__proto__:null,toLowerCase:s0,toTitleCase:nn,titleCaseEquals:AB});let at=class xa{constructor(e,t,r){if(!e&&this.play?this.player_=e=this:this.player_=e,this.isDisposed_=!1,this.parentComponent_=null,this.options_=Ai({},this.options_),t=this.options_=Ai(this.options_,t),this.id_=t.id||t.el&&t.el.id,!this.id_){const n=e&&e.id&&e.id()||"no_player";this.id_=`${n}_component_${Mo()}`}this.name_=t.name||null,t.el?this.el_=t.el:t.createEl!==!1&&(this.el_=this.createEl()),t.className&&this.el_&&t.className.split(" ").forEach(n=>this.addClass(n)),["on","off","one","any","trigger"].forEach(n=>{this[n]=void 0}),t.evented!==!1&&(Jw(this,{eventBusKey:this.el_?"el_":null}),this.handleLanguagechange=this.handleLanguagechange.bind(this),this.on(this.player_,"languagechange",this.handleLanguagechange)),kB(this,this.constructor.defaultState),this.children_=[],this.childIndex_={},this.childNameIndex_={},this.setTimeoutIds_=new Set,this.setIntervalIds_=new Set,this.rafIds_=new Set,this.namedRafs_=new Map,this.clearingTimersOnDispose_=!1,t.initChildren!==!1&&this.initChildren(),this.ready(r),t.reportTouchActivity!==!1&&this.enableTouchActivity()}dispose(e={}){if(!this.isDisposed_){if(this.readyQueue_&&(this.readyQueue_.length=0),this.trigger({type:"dispose",bubbles:!1}),this.isDisposed_=!0,this.children_)for(let t=this.children_.length-1;t>=0;t--)this.children_[t].dispose&&this.children_[t].dispose();this.children_=null,this.childIndex_=null,this.childNameIndex_=null,this.parentComponent_=null,this.el_&&(this.el_.parentNode&&(e.restoreEl?this.el_.parentNode.replaceChild(e.restoreEl,this.el_):this.el_.parentNode.removeChild(this.el_)),this.el_=null),this.player_=null}}isDisposed(){return!!this.isDisposed_}player(){return this.player_}options(e){return e?(this.options_=Ai(this.options_,e),this.options_):this.options_}el(){return this.el_}createEl(e,t,r){return _r(e,t,r)}localize(e,t,r=e){const n=this.player_.language&&this.player_.language(),s=this.player_.languages&&this.player_.languages(),a=s&&s[n],o=n&&n.split("-")[0],l=s&&s[o];let u=r;return a&&a[e]?u=a[e]:l&&l[e]&&(u=l[e]),t&&(u=u.replace(/\{(\d+)\}/g,function(c,h){const m=t[h-1];let g=m;return typeof m>"u"&&(g=c),g})),u}handleLanguagechange(){}contentEl(){return this.contentEl_||this.el_}id(){return this.id_}name(){return this.name_}children(){return this.children_}getChildById(e){return this.childIndex_[e]}getChild(e){if(e)return this.childNameIndex_[e]}getDescendant(...e){e=e.reduce((r,n)=>r.concat(n),[]);let t=this;for(let r=0;r<e.length;r++)if(t=t.getChild(e[r]),!t||!t.getChild)return;return t}setIcon(e,t=this.el()){if(!this.player_.options_.experimentalSvgIcons)return;const r="http://www.w3.org/2000/svg",n=_r("span",{className:"vjs-icon-placeholder vjs-svg-icon"},{"aria-hidden":"true"}),s=Me.createElementNS(r,"svg");s.setAttributeNS(null,"viewBox","0 0 512 512");const a=Me.createElementNS(r,"use");return s.appendChild(a),a.setAttributeNS(null,"href",`#vjs-icon-${e}`),n.appendChild(s),this.iconIsSet_?t.replaceChild(n,t.querySelector(".vjs-icon-placeholder")):t.appendChild(n),this.iconIsSet_=!0,n}addChild(e,t={},r=this.children_.length){let n,s;if(typeof e=="string"){s=nn(e);const a=t.componentClass||s;t.name=s;const o=xa.getComponent(a);if(!o)throw new Error(`Component ${a} does not exist`);if(typeof o!="function")return null;n=new o(this.player_||this,t)}else n=e;if(n.parentComponent_&&n.parentComponent_.removeChild(n),this.children_.splice(r,0,n),n.parentComponent_=this,typeof n.id=="function"&&(this.childIndex_[n.id()]=n),s=s||n.name&&nn(n.name()),s&&(this.childNameIndex_[s]=n,this.childNameIndex_[s0(s)]=n),typeof n.el=="function"&&n.el()){let a=null;this.children_[r+1]&&(this.children_[r+1].el_?a=this.children_[r+1].el_:Lp(this.children_[r+1])&&(a=this.children_[r+1])),this.contentEl().insertBefore(n.el(),a)}return n}removeChild(e){if(typeof e=="string"&&(e=this.getChild(e)),!e||!this.children_)return;let t=!1;for(let n=this.children_.length-1;n>=0;n--)if(this.children_[n]===e){t=!0,this.children_.splice(n,1);break}if(!t)return;e.parentComponent_=null,this.childIndex_[e.id()]=null,this.childNameIndex_[nn(e.name())]=null,this.childNameIndex_[s0(e.name())]=null;const r=e.el();r&&r.parentNode===this.contentEl()&&this.contentEl().removeChild(e.el())}initChildren(){const e=this.options_.children;if(e){const t=this.options_,r=a=>{const o=a.name;let l=a.opts;if(t[o]!==void 0&&(l=t[o]),l===!1)return;l===!0&&(l={}),l.playerOptions=this.options_.playerOptions;const u=this.addChild(o,l);u&&(this[o]=u)};let n;const s=xa.getComponent("Tech");Array.isArray(e)?n=e:n=Object.keys(e),n.concat(Object.keys(this.options_).filter(function(a){return!n.some(function(o){return typeof o=="string"?a===o:a===o.name})})).map(a=>{let o,l;return typeof a=="string"?(o=a,l=e[o]||this.options_[o]||{}):(o=a.name,l=a),{name:o,opts:l}}).filter(a=>{const o=xa.getComponent(a.opts.componentClass||nn(a.name));return o&&!s.isTech(o)}).forEach(r)}}buildCSSClass(){return""}ready(e,t=!1){if(e){if(!this.isReady_){this.readyQueue_=this.readyQueue_||[],this.readyQueue_.push(e);return}t?e.call(this):this.setTimeout(e,1)}}triggerReady(){this.isReady_=!0,this.setTimeout(function(){const e=this.readyQueue_;this.readyQueue_=[],e&&e.length>0&&e.forEach(function(t){t.call(this)},this),this.trigger("ready")},1)}$(e,t){return fd(e,t||this.contentEl())}$$(e,t){return yB(e,t||this.contentEl())}hasClass(e){return n0(this.el_,e)}addClass(...e){ph(this.el_,...e)}removeClass(...e){nT(this.el_,...e)}toggleClass(e,t){cB(this.el_,e,t)}show(){this.removeClass("vjs-hidden")}hide(){this.addClass("vjs-hidden")}lockShowing(){this.addClass("vjs-lock-showing")}unlockShowing(){this.removeClass("vjs-lock-showing")}getAttribute(e){return hB(this.el_,e)}setAttribute(e,t){hp(this.el_,e,t)}removeAttribute(e){sT(this.el_,e)}width(e,t){return this.dimension("width",e,t)}height(e,t){return this.dimension("height",e,t)}dimensions(e,t){this.width(e,!0),this.height(t)}dimension(e,t,r){if(t!==void 0){(t===null||t!==t)&&(t=0),(""+t).indexOf("%")!==-1||(""+t).indexOf("px")!==-1?this.el_.style[e]=t:t==="auto"?this.el_.style[e]="":this.el_.style[e]=t+"px",r||this.trigger("componentresize");return}if(!this.el_)return 0;const n=this.el_.style[e],s=n.indexOf("px");return parseInt(s!==-1?n.slice(0,s):this.el_["offset"+nn(e)],10)}currentDimension(e){let t=0;if(e!=="width"&&e!=="height")throw new Error("currentDimension only accepts width or height value");if(t=pp(this.el_,e),t=parseFloat(t),t===0||isNaN(t)){const r=`offset${nn(e)}`;t=this.el_[r]}return t}currentDimensions(){return{width:this.currentDimension("width"),height:this.currentDimension("height")}}currentWidth(){return this.currentDimension("width")}currentHeight(){return this.currentDimension("height")}getPositions(){const e=this.el_.getBoundingClientRect(),t={x:e.x,y:e.y,width:e.width,height:e.height,top:e.top,right:e.right,bottom:e.bottom,left:e.left},r={x:e.left+e.width/2,y:e.top+e.height/2,width:0,height:0,top:e.top+e.height/2,right:e.left+e.width/2,bottom:e.top+e.height/2,left:e.left+e.width/2};return{boundingClientRect:t,center:r}}focus(){this.el_.focus()}blur(){this.el_.blur()}handleKeyDown(e){this.player_&&(e.key!=="Tab"&&!(this.player_.options_.playerOptions.spatialNavigation&&this.player_.options_.playerOptions.spatialNavigation.enabled)&&e.stopPropagation(),this.player_.handleKeyDown(e))}handleKeyPress(e){this.handleKeyDown(e)}emitTapEvents(){let e=0,t=null;const r=10,n=200;let s;this.on("touchstart",function(o){o.touches.length===1&&(t={pageX:o.touches[0].pageX,pageY:o.touches[0].pageY},e=X.performance.now(),s=!0)}),this.on("touchmove",function(o){if(o.touches.length>1)s=!1;else if(t){const l=o.touches[0].pageX-t.pageX,u=o.touches[0].pageY-t.pageY;Math.sqrt(l*l+u*u)>r&&(s=!1)}});const a=function(){s=!1};this.on("touchleave",a),this.on("touchcancel",a),this.on("touchend",function(o){t=null,s===!0&&X.performance.now()-e<n&&(o.preventDefault(),this.trigger("tap"))})}enableTouchActivity(){if(!this.player()||!this.player().reportUserActivity)return;const e=Ri(this.player(),this.player().reportUserActivity);let t;this.on("touchstart",function(){e(),this.clearInterval(t),t=this.setInterval(e,250)});const r=function(n){e(),this.clearInterval(t)};this.on("touchmove",e),this.on("touchend",r),this.on("touchcancel",r)}setTimeout(e,t){var r;return e=Ri(this,e),this.clearTimersOnDispose_(),r=X.setTimeout(()=>{this.setTimeoutIds_.has(r)&&this.setTimeoutIds_.delete(r),e()},t),this.setTimeoutIds_.add(r),r}clearTimeout(e){return this.setTimeoutIds_.has(e)&&(this.setTimeoutIds_.delete(e),X.clearTimeout(e)),e}setInterval(e,t){e=Ri(this,e),this.clearTimersOnDispose_();const r=X.setInterval(e,t);return this.setIntervalIds_.add(r),r}clearInterval(e){return this.setIntervalIds_.has(e)&&(this.setIntervalIds_.delete(e),X.clearInterval(e)),e}requestAnimationFrame(e){this.clearTimersOnDispose_();var t;return e=Ri(this,e),t=X.requestAnimationFrame(()=>{this.rafIds_.has(t)&&this.rafIds_.delete(t),e()}),this.rafIds_.add(t),t}requestNamedAnimationFrame(e,t){this.namedRafs_.has(e)&&this.cancelNamedAnimationFrame(e),this.clearTimersOnDispose_(),t=Ri(this,t);const r=this.requestAnimationFrame(()=>{t(),this.namedRafs_.has(e)&&this.namedRafs_.delete(e)});return this.namedRafs_.set(e,r),e}cancelNamedAnimationFrame(e){this.namedRafs_.has(e)&&(this.cancelAnimationFrame(this.namedRafs_.get(e)),this.namedRafs_.delete(e))}cancelAnimationFrame(e){return this.rafIds_.has(e)&&(this.rafIds_.delete(e),X.cancelAnimationFrame(e)),e}clearTimersOnDispose_(){this.clearingTimersOnDispose_||(this.clearingTimersOnDispose_=!0,this.one("dispose",()=>{[["namedRafs_","cancelNamedAnimationFrame"],["rafIds_","cancelAnimationFrame"],["setTimeoutIds_","clearTimeout"],["setIntervalIds_","clearInterval"]].forEach(([e,t])=>{this[e].forEach((r,n)=>this[t](n))}),this.clearingTimersOnDispose_=!1}))}getIsDisabled(){return!!this.el_.disabled}getIsExpresslyInert(){return this.el_.inert&&!this.el_.ownerDocument.documentElement.inert}getIsFocusable(e){return(e||this.el_).tabIndex>=0&&!(this.getIsDisabled()||this.getIsExpresslyInert())}getIsAvailableToBeFocused(e){function t(s){const a=X.getComputedStyle(s,null),o=a.getPropertyValue("visibility");return a.getPropertyValue("display")!=="none"&&!["hidden","collapse"].includes(o)}function r(s){return!(!t(s.parentElement)||!t(s)||s.style.opacity==="0"||X.getComputedStyle(s).height==="0px"||X.getComputedStyle(s).width==="0px")}function n(s){if(s.offsetWidth+s.offsetHeight+s.getBoundingClientRect().height+s.getBoundingClientRect().width===0)return!1;const a={x:s.getBoundingClientRect().left+s.offsetWidth/2,y:s.getBoundingClientRect().top+s.offsetHeight/2};if(a.x<0||a.x>(Me.documentElement.clientWidth||X.innerWidth)||a.y<0||a.y>(Me.documentElement.clientHeight||X.innerHeight))return!1;let o=Me.elementFromPoint(a.x,a.y);for(;o;){if(o===s)return!0;if(o.parentNode)o=o.parentNode;else return!1}}return e||(e=this.el()),!!(n(e)&&r(e)&&(!e.parentElement||e.tabIndex>=0))}static registerComponent(e,t){if(typeof e!="string"||!e)throw new Error(`Illegal component name, "${e}"; must be a non-empty string.`);const r=xa.getComponent("Tech"),n=r&&r.isTech(t),s=xa===t||xa.prototype.isPrototypeOf(t.prototype);if(n||!s){let o;throw n?o="techs must be registered using Tech.registerTech()":o="must be a Component subclass",new Error(`Illegal component, "${e}"; ${o}.`)}e=nn(e),xa.components_||(xa.components_={});const a=xa.getComponent("Player");if(e==="Player"&&a&&a.players){const o=a.players,l=Object.keys(o);if(o&&l.length>0&&l.map(u=>o[u]).every(Boolean))throw new Error("Can not register Player component after player has been created.")}return xa.components_[e]=t,xa.components_[s0(e)]=t,t}static getComponent(e){if(!(!e||!xa.components_))return xa.components_[e]}};at.registerComponent("Component",at);function ene(i,e,t){if(typeof e!="number"||e<0||e>t)throw new Error(`Failed to execute '${i}' on 'TimeRanges': The index provided (${e}) is non-numeric or out of bounds (0-${t}).`)}function jL(i,e,t,r){return ene(i,r,t.length-1),t[r][e]}function zS(i){let e;return i===void 0||i.length===0?e={length:0,start(){throw new Error("This TimeRanges object is empty")},end(){throw new Error("This TimeRanges object is empty")}}:e={length:i.length,start:jL.bind(null,"start",0,i),end:jL.bind(null,"end",1,i)},X.Symbol&&X.Symbol.iterator&&(e[X.Symbol.iterator]=()=>(i||[]).values()),e}function dl(i,e){return Array.isArray(i)?zS(i):i===void 0||e===void 0?zS():zS([[i,e]])}const IB=function(i,e){i=i<0?0:i;let t=Math.floor(i%60),r=Math.floor(i/60%60),n=Math.floor(i/3600);const s=Math.floor(e/60%60),a=Math.floor(e/3600);return(isNaN(i)||i===1/0)&&(n=r=t="-"),n=n>0||a>0?n+":":"",r=((n||s>=10)&&r<10?"0"+r:r)+":",t=t<10?"0"+t:t,n+r+t};let Zw=IB;function DB(i){Zw=i}function PB(){Zw=IB}function kh(i,e=i){return Zw(i,e)}var tne=Object.freeze({__proto__:null,createTimeRanges:dl,createTimeRange:dl,setFormatTime:DB,resetFormatTime:PB,formatTime:kh});function RB(i,e){let t=0,r,n;if(!e)return 0;(!i||!i.length)&&(i=dl(0,0));for(let s=0;s<i.length;s++)r=i.start(s),n=i.end(s),n>e&&(n=e),t+=n-r;return t/e}function Qi(i){if(i instanceof Qi)return i;typeof i=="number"?this.code=i:typeof i=="string"?this.message=i:hu(i)&&(typeof i.code=="number"&&(this.code=i.code),Object.assign(this,i)),this.message||(this.message=Qi.defaultMessages[this.code]||"")}Qi.prototype.code=0;Qi.prototype.message="";Qi.prototype.status=null;Qi.prototype.metadata=null;Qi.errorTypes=["MEDIA_ERR_CUSTOM","MEDIA_ERR_ABORTED","MEDIA_ERR_NETWORK","MEDIA_ERR_DECODE","MEDIA_ERR_SRC_NOT_SUPPORTED","MEDIA_ERR_ENCRYPTED"];Qi.defaultMessages={1:"You aborted the media playback",2:"A network error caused the media download to fail part-way.",3:"The media playback was aborted due to a corruption problem or because the media used features your browser did not support.",4:"The media could not be loaded, either because the server or network failed or because the format is not supported.",5:"The media is encrypted and we do not have the keys to decrypt it."};Qi.MEDIA_ERR_CUSTOM=0;Qi.prototype.MEDIA_ERR_CUSTOM=0;Qi.MEDIA_ERR_ABORTED=1;Qi.prototype.MEDIA_ERR_ABORTED=1;Qi.MEDIA_ERR_NETWORK=2;Qi.prototype.MEDIA_ERR_NETWORK=2;Qi.MEDIA_ERR_DECODE=3;Qi.prototype.MEDIA_ERR_DECODE=3;Qi.MEDIA_ERR_SRC_NOT_SUPPORTED=4;Qi.prototype.MEDIA_ERR_SRC_NOT_SUPPORTED=4;Qi.MEDIA_ERR_ENCRYPTED=5;Qi.prototype.MEDIA_ERR_ENCRYPTED=5;function a0(i){return i!=null&&typeof i.then=="function"}function Yl(i){a0(i)&&i.then(null,e=>{})}const IC=function(i){return["kind","label","language","id","inBandMetadataTrackDispatchType","mode","src"].reduce((t,r,n)=>(i[r]&&(t[r]=i[r]),t),{cues:i.cues&&Array.prototype.map.call(i.cues,function(t){return{startTime:t.startTime,endTime:t.endTime,text:t.text,id:t.id}})})},rne=function(i){const e=i.$$("track"),t=Array.prototype.map.call(e,n=>n.track);return Array.prototype.map.call(e,function(n){const s=IC(n.track);return n.src&&(s.src=n.src),s}).concat(Array.prototype.filter.call(i.textTracks(),function(n){return t.indexOf(n)===-1}).map(IC))},ine=function(i,e){return i.forEach(function(t){const r=e.addRemoteTextTrack(t).track;!t.src&&t.cues&&t.cues.forEach(n=>r.addCue(n))}),e.textTracks()};var zL={textTracksToJson:rne,jsonToTextTracks:ine,trackToJson_:IC};const HS="vjs-modal-dialog";let Mp=class extends at{constructor(e,t){super(e,t),this.handleKeyDown_=r=>this.handleKeyDown(r),this.close_=r=>this.close(r),this.opened_=this.hasBeenOpened_=this.hasBeenFilled_=!1,this.closeable(!this.options_.uncloseable),this.content(this.options_.content),this.contentEl_=_r("div",{className:`${HS}-content`},{role:"document"}),this.descEl_=_r("p",{className:`${HS}-description vjs-control-text`,id:this.el().getAttribute("aria-describedby")}),_d(this.descEl_,this.description()),this.el_.appendChild(this.descEl_),this.el_.appendChild(this.contentEl_)}createEl(){return super.createEl("div",{className:this.buildCSSClass(),tabIndex:-1},{"aria-describedby":`${this.id()}_description`,"aria-hidden":"true","aria-label":this.label(),role:"dialog","aria-live":"polite"})}dispose(){this.contentEl_=null,this.descEl_=null,this.previouslyActiveEl_=null,super.dispose()}buildCSSClass(){return`${HS} vjs-hidden ${super.buildCSSClass()}`}label(){return this.localize(this.options_.label||"Modal Window")}description(){let e=this.options_.description||this.localize("This is a modal window.");return this.closeable()&&(e+=" "+this.localize("This modal can be closed by pressing the Escape key or activating the close button.")),e}open(){if(this.opened_){this.options_.fillAlways&&this.fill();return}const e=this.player();this.trigger("beforemodalopen"),this.opened_=!0,(this.options_.fillAlways||!this.hasBeenOpened_&&!this.hasBeenFilled_)&&this.fill(),this.wasPlaying_=!e.paused(),this.options_.pauseOnOpen&&this.wasPlaying_&&e.pause(),this.on("keydown",this.handleKeyDown_),this.hadControls_=e.controls(),e.controls(!1),this.show(),this.conditionalFocus_(),this.el().setAttribute("aria-hidden","false"),this.trigger("modalopen"),this.hasBeenOpened_=!0}opened(e){return typeof e=="boolean"&&this[e?"open":"close"](),this.opened_}close(){if(!this.opened_)return;const e=this.player();this.trigger("beforemodalclose"),this.opened_=!1,this.wasPlaying_&&this.options_.pauseOnOpen&&e.play(),this.off("keydown",this.handleKeyDown_),this.hadControls_&&e.controls(!0),this.hide(),this.el().setAttribute("aria-hidden","true"),this.trigger({type:"modalclose",bubbles:!0}),this.conditionalBlur_(),this.options_.temporary&&this.dispose()}closeable(e){if(typeof e=="boolean"){const t=this.closeable_=!!e;let r=this.getChild("closeButton");if(t&&!r){const n=this.contentEl_;this.contentEl_=this.el_,r=this.addChild("closeButton",{controlText:"Close Modal Dialog"}),this.contentEl_=n,this.on(r,"close",this.close_)}!t&&r&&(this.off(r,"close",this.close_),this.removeChild(r),r.dispose())}return this.closeable_}fill(){this.fillWith(this.content())}fillWith(e){const t=this.contentEl(),r=t.parentNode,n=t.nextSibling;this.trigger("beforemodalfill"),this.hasBeenFilled_=!0,r.removeChild(t),this.empty(),vB(t,e),this.trigger("modalfill"),n?r.insertBefore(t,n):r.appendChild(t);const s=this.getChild("closeButton");s&&r.appendChild(s.el_),this.trigger("aftermodalfill")}empty(){this.trigger("beforemodalempty"),oT(this.contentEl()),this.trigger("modalempty")}content(e){return typeof e<"u"&&(this.content_=e),this.content_}conditionalFocus_(){const e=Me.activeElement,t=this.player_.el_;this.previouslyActiveEl_=null,(t.contains(e)||t===e)&&(this.previouslyActiveEl_=e,this.focus())}conditionalBlur_(){this.previouslyActiveEl_&&(this.previouslyActiveEl_.focus(),this.previouslyActiveEl_=null)}handleKeyDown(e){if(this.trigger({type:"modalKeydown",originalEvent:e,target:this,bubbles:!0}),e.stopPropagation(),e.key==="Escape"&&this.closeable()){e.preventDefault(),this.close();return}if(e.key!=="Tab")return;const t=this.focusableEls_(),r=this.el_.querySelector(":focus");let n;for(let s=0;s<t.length;s++)if(r===t[s]){n=s;break}Me.activeElement===this.el_&&(n=0),e.shiftKey&&n===0?(t[t.length-1].focus(),e.preventDefault()):!e.shiftKey&&n===t.length-1&&(t[0].focus(),e.preventDefault())}focusableEls_(){const e=this.el_.querySelectorAll("*");return Array.prototype.filter.call(e,t=>(t instanceof X.HTMLAnchorElement||t instanceof X.HTMLAreaElement)&&t.hasAttribute("href")||(t instanceof X.HTMLInputElement||t instanceof X.HTMLSelectElement||t instanceof X.HTMLTextAreaElement||t instanceof X.HTMLButtonElement)&&!t.hasAttribute("disabled")||t instanceof X.HTMLIFrameElement||t instanceof X.HTMLObjectElement||t instanceof X.HTMLEmbedElement||t.hasAttribute("tabindex")&&t.getAttribute("tabindex")!==-1||t.hasAttribute("contenteditable"))}};Mp.prototype.options_={pauseOnOpen:!0,temporary:!0};at.registerComponent("ModalDialog",Mp);let mp=class extends so{constructor(e=[]){super(),this.tracks_=[],Object.defineProperty(this,"length",{get(){return this.tracks_.length}});for(let t=0;t<e.length;t++)this.addTrack(e[t])}addTrack(e){const t=this.tracks_.length;""+t in this||Object.defineProperty(this,t,{get(){return this.tracks_[t]}}),this.tracks_.indexOf(e)===-1&&(this.tracks_.push(e),this.trigger({track:e,type:"addtrack",target:this})),e.labelchange_=()=>{this.trigger({track:e,type:"labelchange",target:this})},ic(e)&&e.addEventListener("labelchange",e.labelchange_)}removeTrack(e){let t;for(let r=0,n=this.length;r<n;r++)if(this[r]===e){t=this[r],t.off&&t.off(),this.tracks_.splice(r,1);break}t&&this.trigger({track:t,type:"removetrack",target:this})}getTrackById(e){let t=null;for(let r=0,n=this.length;r<n;r++){const s=this[r];if(s.id===e){t=s;break}}return t}};mp.prototype.allowedEvents_={change:"change",addtrack:"addtrack",removetrack:"removetrack",labelchange:"labelchange"};for(const i in mp.prototype.allowedEvents_)mp.prototype["on"+i]=null;const VS=function(i,e){for(let t=0;t<i.length;t++)!Object.keys(i[t]).length||e.id===i[t].id||(i[t].enabled=!1)};let nne=class extends mp{constructor(e=[]){for(let t=e.length-1;t>=0;t--)if(e[t].enabled){VS(e,e[t]);break}super(e),this.changing_=!1}addTrack(e){e.enabled&&VS(this,e),super.addTrack(e),e.addEventListener&&(e.enabledChange_=()=>{this.changing_||(this.changing_=!0,VS(this,e),this.changing_=!1,this.trigger("change"))},e.addEventListener("enabledchange",e.enabledChange_))}removeTrack(e){super.removeTrack(e),e.removeEventListener&&e.enabledChange_&&(e.removeEventListener("enabledchange",e.enabledChange_),e.enabledChange_=null)}};const qS=function(i,e){for(let t=0;t<i.length;t++)!Object.keys(i[t]).length||e.id===i[t].id||(i[t].selected=!1)};let sne=class extends mp{constructor(e=[]){for(let t=e.length-1;t>=0;t--)if(e[t].selected){qS(e,e[t]);break}super(e),this.changing_=!1,Object.defineProperty(this,"selectedIndex",{get(){for(let t=0;t<this.length;t++)if(this[t].selected)return t;return-1},set(){}})}addTrack(e){e.selected&&qS(this,e),super.addTrack(e),e.addEventListener&&(e.selectedChange_=()=>{this.changing_||(this.changing_=!0,qS(this,e),this.changing_=!1,this.trigger("change"))},e.addEventListener("selectedchange",e.selectedChange_))}removeTrack(e){super.removeTrack(e),e.removeEventListener&&e.selectedChange_&&(e.removeEventListener("selectedchange",e.selectedChange_),e.selectedChange_=null)}},LB=class extends mp{addTrack(e){super.addTrack(e),this.queueChange_||(this.queueChange_=()=>this.queueTrigger("change")),this.triggerSelectedlanguagechange||(this.triggerSelectedlanguagechange_=()=>this.trigger("selectedlanguagechange")),e.addEventListener("modechange",this.queueChange_),["metadata","chapters"].indexOf(e.kind)===-1&&e.addEventListener("modechange",this.triggerSelectedlanguagechange_)}removeTrack(e){super.removeTrack(e),e.removeEventListener&&(this.queueChange_&&e.removeEventListener("modechange",this.queueChange_),this.selectedlanguagechange_&&e.removeEventListener("modechange",this.triggerSelectedlanguagechange_))}},ane=class{constructor(e=[]){this.trackElements_=[],Object.defineProperty(this,"length",{get(){return this.trackElements_.length}});for(let t=0,r=e.length;t<r;t++)this.addTrackElement_(e[t])}addTrackElement_(e){const t=this.trackElements_.length;""+t in this||Object.defineProperty(this,t,{get(){return this.trackElements_[t]}}),this.trackElements_.indexOf(e)===-1&&this.trackElements_.push(e)}getTrackElementByTrack_(e){let t;for(let r=0,n=this.trackElements_.length;r<n;r++)if(e===this.trackElements_[r].track){t=this.trackElements_[r];break}return t}removeTrackElement_(e){for(let t=0,r=this.trackElements_.length;t<r;t++)if(e===this.trackElements_[t]){this.trackElements_[t].track&&typeof this.trackElements_[t].track.off=="function"&&this.trackElements_[t].track.off(),typeof this.trackElements_[t].off=="function"&&this.trackElements_[t].off(),this.trackElements_.splice(t,1);break}}},HL=class OB{constructor(e){OB.prototype.setCues_.call(this,e),Object.defineProperty(this,"length",{get(){return this.length_}})}setCues_(e){const t=this.length||0;let r=0;const n=e.length;this.cues_=e,this.length_=e.length;const s=function(a){""+a in this||Object.defineProperty(this,""+a,{get(){return this.cues_[a]}})};if(t<n)for(r=t;r<n;r++)s.call(this,r)}getCueById(e){let t=null;for(let r=0,n=this.length;r<n;r++){const s=this[r];if(s.id===e){t=s;break}}return t}};const one={alternative:"alternative",captions:"captions",main:"main",sign:"sign",subtitles:"subtitles",commentary:"commentary"},lne={alternative:"alternative",descriptions:"descriptions",main:"main","main-desc":"main-desc",translation:"translation",commentary:"commentary"},une={subtitles:"subtitles",captions:"captions",descriptions:"descriptions",chapters:"chapters",metadata:"metadata"},VL={disabled:"disabled",hidden:"hidden",showing:"showing"};let e2=class extends so{constructor(e={}){super();const t={id:e.id||"vjs_track_"+Mo(),kind:e.kind||"",language:e.language||""};let r=e.label||"";for(const n in t)Object.defineProperty(this,n,{get(){return t[n]},set(){}});Object.defineProperty(this,"label",{get(){return r},set(n){n!==r&&(r=n,this.trigger("labelchange"))}})}};const t2=function(i){return new URL(i,Me.baseURI)},MB=function(i){return new URL(i,Me.baseURI).href},r2=function(i){if(typeof i=="string"){const t=/^(\/?)([\s\S]*?)((?:\.{1,2}|[^\/]+?)(\.([^\.\/\?]+)))(?:[\/]*|[\?].*)$/.exec(i);if(t)return t.pop().toLowerCase()}return""},dT=function(i,e=X.location){return t2(i).origin!==e.origin};var cne=Object.freeze({__proto__:null,parseUrl:t2,getAbsoluteURL:MB,getFileExtension:r2,isCrossOrigin:dT});const qL=function(i,e){const t=new X.WebVTT.Parser(X,X.vttjs,X.WebVTT.StringDecoder()),r=[];t.oncue=function(n){e.addCue(n)},t.onparsingerror=function(n){r.push(n)},t.onflush=function(){e.trigger({type:"loadeddata",target:e})},t.parse(i),r.length>0&&(X.console&&X.console.groupCollapsed&&X.console.groupCollapsed(`Text Track parsing errors for ${e.src}`),r.forEach(n=>Ur.error(n)),X.console&&X.console.groupEnd&&X.console.groupEnd()),t.flush()},WL=function(i,e){const t={uri:i},r=dT(i);r&&(t.cors=r);const n=e.tech_.crossOrigin()==="use-credentials";n&&(t.withCredentials=n),L8(t,Ri(this,function(s,a,o){if(s)return Ur.error(s,a);e.loaded_=!0,typeof X.WebVTT!="function"?e.tech_&&e.tech_.any(["vttjsloaded","vttjserror"],l=>{if(l.type==="vttjserror"){Ur.error(`vttjs failed to load, stopping trying to process ${e.src}`);return}return qL(o,e)}):qL(o,e)}))};let ig=class extends e2{constructor(e={}){if(!e.tech)throw new Error("A tech was not provided.");const t=Ai(e,{kind:une[e.kind]||"subtitles",language:e.language||e.srclang||""});let r=VL[t.mode]||"disabled";const n=t.default;(t.kind==="metadata"||t.kind==="chapters")&&(r="hidden"),super(t),this.tech_=t.tech,this.cues_=[],this.activeCues_=[],this.preload_=this.tech_.preloadTextTracks!==!1;const s=new HL(this.cues_),a=new HL(this.activeCues_);let o=!1;this.timeupdateHandler=Ri(this,function(u={}){if(!this.tech_.isDisposed()){if(!this.tech_.isReady_){u.type!=="timeupdate"&&(this.rvf_=this.tech_.requestVideoFrameCallback(this.timeupdateHandler));return}this.activeCues=this.activeCues,o&&(this.trigger("cuechange"),o=!1),u.type!=="timeupdate"&&(this.rvf_=this.tech_.requestVideoFrameCallback(this.timeupdateHandler))}});const l=()=>{this.stopTracking()};this.tech_.one("dispose",l),r!=="disabled"&&this.startTracking(),Object.defineProperties(this,{default:{get(){return n},set(){}},mode:{get(){return r},set(u){VL[u]&&r!==u&&(r=u,!this.preload_&&r!=="disabled"&&this.cues.length===0&&WL(this.src,this),this.stopTracking(),r!=="disabled"&&this.startTracking(),this.trigger("modechange"))}},cues:{get(){return this.loaded_?s:null},set(){}},activeCues:{get(){if(!this.loaded_)return null;if(this.cues.length===0)return a;const u=this.tech_.currentTime(),c=[];for(let h=0,m=this.cues.length;h<m;h++){const g=this.cues[h];g.startTime<=u&&g.endTime>=u&&c.push(g)}if(o=!1,c.length!==this.activeCues_.length)o=!0;else for(let h=0;h<c.length;h++)this.activeCues_.indexOf(c[h])===-1&&(o=!0);return this.activeCues_=c,a.setCues_(this.activeCues_),a},set(){}}}),t.src?(this.src=t.src,this.preload_||(this.loaded_=!0),(this.preload_||t.kind!=="subtitles"&&t.kind!=="captions")&&WL(this.src,this)):this.loaded_=!0}startTracking(){this.rvf_=this.tech_.requestVideoFrameCallback(this.timeupdateHandler),this.tech_.on("timeupdate",this.timeupdateHandler)}stopTracking(){this.rvf_&&(this.tech_.cancelVideoFrameCallback(this.rvf_),this.rvf_=void 0),this.tech_.off("timeupdate",this.timeupdateHandler)}addCue(e){let t=e;if(!("getCueAsHTML"in t)){t=new X.vttjs.VTTCue(e.startTime,e.endTime,e.text);for(const n in e)n in t||(t[n]=e[n]);t.id=e.id,t.originalCue_=e}const r=this.tech_.textTracks();for(let n=0;n<r.length;n++)r[n]!==this&&r[n].removeCue(t);this.cues_.push(t),this.cues.setCues_(this.cues_)}removeCue(e){let t=this.cues_.length;for(;t--;){const r=this.cues_[t];if(r===e||r.originalCue_&&r.originalCue_===e){this.cues_.splice(t,1),this.cues.setCues_(this.cues_);break}}}};ig.prototype.allowedEvents_={cuechange:"cuechange"};let FB=class extends e2{constructor(e={}){const t=Ai(e,{kind:lne[e.kind]||""});super(t);let r=!1;Object.defineProperty(this,"enabled",{get(){return r},set(n){typeof n!="boolean"||n===r||(r=n,this.trigger("enabledchange"))}}),t.enabled&&(this.enabled=t.enabled),this.loaded_=!0}},BB=class extends e2{constructor(e={}){const t=Ai(e,{kind:one[e.kind]||""});super(t);let r=!1;Object.defineProperty(this,"selected",{get(){return r},set(n){typeof n!="boolean"||n===r||(r=n,this.trigger("selectedchange"))}}),t.selected&&(this.selected=t.selected)}},Fp=class DC extends so{constructor(e={}){super();let t;const r=new ig(e);this.kind=r.kind,this.src=r.src,this.srclang=r.language,this.label=r.label,this.default=r.default,Object.defineProperties(this,{readyState:{get(){return t}},track:{get(){return r}}}),t=DC.NONE,r.addEventListener("loadeddata",()=>{t=DC.LOADED,this.trigger({type:"load",target:this})})}};Fp.prototype.allowedEvents_={load:"load"};Fp.NONE=0;Fp.LOADING=1;Fp.LOADED=2;Fp.ERROR=3;const Po={audio:{ListClass:nne,TrackClass:FB,capitalName:"Audio"},video:{ListClass:sne,TrackClass:BB,capitalName:"Video"},text:{ListClass:LB,TrackClass:ig,capitalName:"Text"}};Object.keys(Po).forEach(function(i){Po[i].getterName=`${i}Tracks`,Po[i].privateName=`${i}Tracks_`});const gp={remoteText:{ListClass:LB,TrackClass:ig,capitalName:"RemoteText",getterName:"remoteTextTracks",privateName:"remoteTextTracks_"},remoteTextEl:{ListClass:ane,TrackClass:Fp,capitalName:"RemoteTextTrackEls",getterName:"remoteTextTrackEls",privateName:"remoteTextTrackEls_"}},Ks=Object.assign({},Po,gp);gp.names=Object.keys(gp);Po.names=Object.keys(Po);Ks.names=[].concat(gp.names).concat(Po.names);function dne(i,e,t,r,n={}){const s=i.textTracks();n.kind=e,t&&(n.label=t),r&&(n.language=r),n.tech=i;const a=new Ks.text.TrackClass(n);return s.addTrack(a),a}let Ii=class Ds extends at{constructor(e={},t=function(){}){e.reportTouchActivity=!1,super(null,e,t),this.onDurationChange_=r=>this.onDurationChange(r),this.trackProgress_=r=>this.trackProgress(r),this.trackCurrentTime_=r=>this.trackCurrentTime(r),this.stopTrackingCurrentTime_=r=>this.stopTrackingCurrentTime(r),this.disposeSourceHandler_=r=>this.disposeSourceHandler(r),this.queuedHanders_=new Set,this.hasStarted_=!1,this.on("playing",function(){this.hasStarted_=!0}),this.on("loadstart",function(){this.hasStarted_=!1}),Ks.names.forEach(r=>{const n=Ks[r];e&&e[n.getterName]&&(this[n.privateName]=e[n.getterName])}),this.featuresProgressEvents||this.manualProgressOn(),this.featuresTimeupdateEvents||this.manualTimeUpdatesOn(),["Text","Audio","Video"].forEach(r=>{e[`native${r}Tracks`]===!1&&(this[`featuresNative${r}Tracks`]=!1)}),e.nativeCaptions===!1||e.nativeTextTracks===!1?this.featuresNativeTextTracks=!1:(e.nativeCaptions===!0||e.nativeTextTracks===!0)&&(this.featuresNativeTextTracks=!0),this.featuresNativeTextTracks||this.emulateTextTracks(),this.preloadTextTracks=e.preloadTextTracks!==!1,this.autoRemoteTextTracks_=new Ks.text.ListClass,this.initTrackListeners(),e.nativeControlsForTouch||this.emitTapEvents(),this.constructor&&(this.name_=this.constructor.name||"Unknown Tech")}triggerSourceset(e){this.isReady_||this.one("ready",()=>this.setTimeout(()=>this.triggerSourceset(e),1)),this.trigger({src:e,type:"sourceset"})}manualProgressOn(){this.on("durationchange",this.onDurationChange_),this.manualProgress=!0,this.one("ready",this.trackProgress_)}manualProgressOff(){this.manualProgress=!1,this.stopTrackingProgress(),this.off("durationchange",this.onDurationChange_)}trackProgress(e){this.stopTrackingProgress(),this.progressInterval=this.setInterval(Ri(this,function(){const t=this.bufferedPercent();this.bufferedPercent_!==t&&this.trigger("progress"),this.bufferedPercent_=t,t===1&&this.stopTrackingProgress()}),500)}onDurationChange(e){this.duration_=this.duration()}buffered(){return dl(0,0)}bufferedPercent(){return RB(this.buffered(),this.duration_)}stopTrackingProgress(){this.clearInterval(this.progressInterval)}manualTimeUpdatesOn(){this.manualTimeUpdates=!0,this.on("play",this.trackCurrentTime_),this.on("pause",this.stopTrackingCurrentTime_)}manualTimeUpdatesOff(){this.manualTimeUpdates=!1,this.stopTrackingCurrentTime(),this.off("play",this.trackCurrentTime_),this.off("pause",this.stopTrackingCurrentTime_)}trackCurrentTime(){this.currentTimeInterval&&this.stopTrackingCurrentTime(),this.currentTimeInterval=this.setInterval(function(){this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},250)}stopTrackingCurrentTime(){this.clearInterval(this.currentTimeInterval),this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})}dispose(){this.clearTracks(Po.names),this.manualProgress&&this.manualProgressOff(),this.manualTimeUpdates&&this.manualTimeUpdatesOff(),super.dispose()}clearTracks(e){e=[].concat(e),e.forEach(t=>{const r=this[`${t}Tracks`]()||[];let n=r.length;for(;n--;){const s=r[n];t==="text"&&this.removeRemoteTextTrack(s),r.removeTrack(s)}})}cleanupAutoTextTracks(){const e=this.autoRemoteTextTracks_||[];let t=e.length;for(;t--;){const r=e[t];this.removeRemoteTextTrack(r)}}reset(){}crossOrigin(){}setCrossOrigin(){}error(e){return e!==void 0&&(this.error_=new Qi(e),this.trigger("error")),this.error_}played(){return this.hasStarted_?dl(0,0):dl()}play(){}setScrubbing(e){}scrubbing(){}setCurrentTime(e){this.manualTimeUpdates&&this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})}initTrackListeners(){Po.names.forEach(e=>{const t=Po[e],r=()=>{this.trigger(`${e}trackchange`)},n=this[t.getterName]();n.addEventListener("removetrack",r),n.addEventListener("addtrack",r),this.on("dispose",()=>{n.removeEventListener("removetrack",r),n.removeEventListener("addtrack",r)})})}addWebVttScript_(){if(!X.WebVTT)if(Me.body.contains(this.el())){if(!this.options_["vtt.js"]&&dp(g_)&&Object.keys(g_).length>0){this.trigger("vttjsloaded");return}const e=Me.createElement("script");e.src=this.options_["vtt.js"]||"https://vjs.zencdn.net/vttjs/0.14.1/vtt.min.js",e.onload=()=>{this.trigger("vttjsloaded")},e.onerror=()=>{this.trigger("vttjserror")},this.on("dispose",()=>{e.onload=null,e.onerror=null}),X.WebVTT=!0,this.el().parentNode.appendChild(e)}else this.ready(this.addWebVttScript_)}emulateTextTracks(){const e=this.textTracks(),t=this.remoteTextTracks(),r=o=>e.addTrack(o.track),n=o=>e.removeTrack(o.track);t.on("addtrack",r),t.on("removetrack",n),this.addWebVttScript_();const s=()=>this.trigger("texttrackchange"),a=()=>{s();for(let o=0;o<e.length;o++){const l=e[o];l.removeEventListener("cuechange",s),l.mode==="showing"&&l.addEventListener("cuechange",s)}};a(),e.addEventListener("change",a),e.addEventListener("addtrack",a),e.addEventListener("removetrack",a),this.on("dispose",function(){t.off("addtrack",r),t.off("removetrack",n),e.removeEventListener("change",a),e.removeEventListener("addtrack",a),e.removeEventListener("removetrack",a);for(let o=0;o<e.length;o++)e[o].removeEventListener("cuechange",s)})}addTextTrack(e,t,r){if(!e)throw new Error("TextTrack kind is required but was not provided");return dne(this,e,t,r)}createRemoteTextTrack(e){const t=Ai(e,{tech:this});return new gp.remoteTextEl.TrackClass(t)}addRemoteTextTrack(e={},t){const r=this.createRemoteTextTrack(e);return typeof t!="boolean"&&(t=!1),this.remoteTextTrackEls().addTrackElement_(r),this.remoteTextTracks().addTrack(r.track),t===!1&&this.ready(()=>this.autoRemoteTextTracks_.addTrack(r.track)),r}removeRemoteTextTrack(e){const t=this.remoteTextTrackEls().getTrackElementByTrack_(e);this.remoteTextTrackEls().removeTrackElement_(t),this.remoteTextTracks().removeTrack(e),this.autoRemoteTextTracks_.removeTrack(e)}getVideoPlaybackQuality(){return{}}requestPictureInPicture(){return Promise.reject()}disablePictureInPicture(){return!0}setDisablePictureInPicture(){}requestVideoFrameCallback(e){const t=Mo();return!this.isReady_||this.paused()?(this.queuedHanders_.add(t),this.one("playing",()=>{this.queuedHanders_.has(t)&&(this.queuedHanders_.delete(t),e())})):this.requestNamedAnimationFrame(t,e),t}cancelVideoFrameCallback(e){this.queuedHanders_.has(e)?this.queuedHanders_.delete(e):this.cancelNamedAnimationFrame(e)}setPoster(){}playsinline(){}setPlaysinline(){}overrideNativeAudioTracks(e){}overrideNativeVideoTracks(e){}canPlayType(e){return""}static canPlayType(e){return""}static canPlaySource(e,t){return Ds.canPlayType(e.type)}static isTech(e){return e.prototype instanceof Ds||e instanceof Ds||e===Ds}static registerTech(e,t){if(Ds.techs_||(Ds.techs_={}),!Ds.isTech(t))throw new Error(`Tech ${e} must be a Tech`);if(!Ds.canPlayType)throw new Error("Techs must have a static canPlayType method on them");if(!Ds.canPlaySource)throw new Error("Techs must have a static canPlaySource method on them");return e=nn(e),Ds.techs_[e]=t,Ds.techs_[s0(e)]=t,e!=="Tech"&&Ds.defaultTechOrder_.push(e),t}static getTech(e){if(e){if(Ds.techs_&&Ds.techs_[e])return Ds.techs_[e];if(e=nn(e),X&&X.videojs&&X.videojs[e])return Ur.warn(`The ${e} tech was added to the videojs object when it should be registered using videojs.registerTech(name, tech)`),X.videojs[e]}}};Ks.names.forEach(function(i){const e=Ks[i];Ii.prototype[e.getterName]=function(){return this[e.privateName]=this[e.privateName]||new e.ListClass,this[e.privateName]}});Ii.prototype.featuresVolumeControl=!0;Ii.prototype.featuresMuteControl=!0;Ii.prototype.featuresFullscreenResize=!1;Ii.prototype.featuresPlaybackRate=!1;Ii.prototype.featuresProgressEvents=!1;Ii.prototype.featuresSourceset=!1;Ii.prototype.featuresTimeupdateEvents=!1;Ii.prototype.featuresNativeTextTracks=!1;Ii.prototype.featuresVideoFrameCallback=!1;Ii.withSourceHandlers=function(i){i.registerSourceHandler=function(t,r){let n=i.sourceHandlers;n||(n=i.sourceHandlers=[]),r===void 0&&(r=n.length),n.splice(r,0,t)},i.canPlayType=function(t){const r=i.sourceHandlers||[];let n;for(let s=0;s<r.length;s++)if(n=r[s].canPlayType(t),n)return n;return""},i.selectSourceHandler=function(t,r){const n=i.sourceHandlers||[];let s;for(let a=0;a<n.length;a++)if(s=n[a].canHandleSource(t,r),s)return n[a];return null},i.canPlaySource=function(t,r){const n=i.selectSourceHandler(t,r);return n?n.canHandleSource(t,r):""},["seekable","seeking","duration"].forEach(function(t){const r=this[t];typeof r=="function"&&(this[t]=function(){return this.sourceHandler_&&this.sourceHandler_[t]?this.sourceHandler_[t].apply(this.sourceHandler_,arguments):r.apply(this,arguments)})},i.prototype),i.prototype.setSource=function(t){let r=i.selectSourceHandler(t,this.options_);r||(i.nativeSourceHandler?r=i.nativeSourceHandler:Ur.error("No source handler found for the current source.")),this.disposeSourceHandler(),this.off("dispose",this.disposeSourceHandler_),r!==i.nativeSourceHandler&&(this.currentSource_=t),this.sourceHandler_=r.handleSource(t,this,this.options_),this.one("dispose",this.disposeSourceHandler_)},i.prototype.disposeSourceHandler=function(){this.currentSource_&&(this.clearTracks(["audio","video"]),this.currentSource_=null),this.cleanupAutoTextTracks(),this.sourceHandler_&&(this.sourceHandler_.dispose&&this.sourceHandler_.dispose(),this.sourceHandler_=null)}};at.registerComponent("Tech",Ii);Ii.registerTech("Tech",Ii);Ii.defaultTechOrder_=[];const mh={},w_={},k_={};function hne(i,e){mh[i]=mh[i]||[],mh[i].push(e)}function fne(i,e,t){i.setTimeout(()=>Qd(e,mh[e.type],t,i),1)}function pne(i,e){i.forEach(t=>t.setTech&&t.setTech(e))}function mne(i,e,t){return i.reduceRight(i2(t),e[t]())}function gne(i,e,t,r){return e[t](i.reduce(i2(t),r))}function GL(i,e,t,r=null){const n="call"+nn(t),s=i.reduce(i2(n),r),a=s===k_,o=a?null:e[t](s);return _ne(i,t,o,a),o}const vne={buffered:1,currentTime:1,duration:1,muted:1,played:1,paused:1,seekable:1,volume:1,ended:1},yne={setCurrentTime:1,setMuted:1,setVolume:1},KL={play:1,pause:1};function i2(i){return(e,t)=>e===k_?k_:t[i]?t[i](e):e}function _ne(i,e,t,r){for(let n=i.length-1;n>=0;n--){const s=i[n];s[e]&&s[e](r,t)}}function xne(i){w_.hasOwnProperty(i.id())&&delete w_[i.id()]}function Tne(i,e){const t=w_[i.id()];let r=null;if(t==null)return r=e(i),w_[i.id()]=[[e,r]],r;for(let n=0;n<t.length;n++){const[s,a]=t[n];s===e&&(r=a)}return r===null&&(r=e(i),t.push([e,r])),r}function Qd(i={},e=[],t,r,n=[],s=!1){const[a,...o]=e;if(typeof a=="string")Qd(i,mh[a],t,r,n,s);else if(a){const l=Tne(r,a);if(!l.setSource)return n.push(l),Qd(i,o,t,r,n,s);l.setSource(Object.assign({},i),function(u,c){if(u)return Qd(i,o,t,r,n,s);n.push(l),Qd(c,i.type===c.type?o:mh[c.type],t,r,n,s)})}else o.length?Qd(i,o,t,r,n,s):s?t(i,n):Qd(i,mh["*"],t,r,n,!0)}const bne={opus:"video/ogg",ogv:"video/ogg",mp4:"video/mp4",mov:"video/mp4",m4v:"video/mp4",mkv:"video/x-matroska",m4a:"audio/mp4",mp3:"audio/mpeg",aac:"audio/aac",caf:"audio/x-caf",flac:"audio/flac",oga:"audio/ogg",wav:"audio/wav",m3u8:"application/x-mpegURL",mpd:"application/dash+xml",jpg:"image/jpeg",jpeg:"image/jpeg",gif:"image/gif",png:"image/png",svg:"image/svg+xml",webp:"image/webp"},A_=function(i=""){const e=r2(i);return bne[e.toLowerCase()]||""},Sne=(i,e)=>{if(!e)return"";if(i.cache_.source.src===e&&i.cache_.source.type)return i.cache_.source.type;const t=i.cache_.sources.filter(n=>n.src===e);if(t.length)return t[0].type;const r=i.$$("source");for(let n=0;n<r.length;n++){const s=r[n];if(s.type&&s.src&&s.src===e)return s.type}return A_(e)},NB=function(i){if(Array.isArray(i)){let e=[];i.forEach(function(t){t=NB(t),Array.isArray(t)?e=e.concat(t):hu(t)&&e.push(t)}),i=e}else typeof i=="string"&&i.trim()?i=[XL({src:i})]:hu(i)&&typeof i.src=="string"&&i.src&&i.src.trim()?i=[XL(i)]:i=[];return i};function XL(i){if(!i.type){const e=A_(i.src);e&&(i.type=e)}return i}var Cne=`<svg xmlns="http://www.w3.org/2000/svg">
  <defs>
    <symbol viewBox="0 0 48 48" id="vjs-icon-play">
      <path d="M16 10v28l22-14z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-pause">
      <path d="M12 38h8V10h-8v28zm16-28v28h8V10h-8z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-audio">
      <path d="M24 2C14.06 2 6 10.06 6 20v14c0 3.31 2.69 6 6 6h6V24h-8v-4c0-7.73 6.27-14 14-14s14 6.27 14 14v4h-8v16h6c3.31 0 6-2.69 6-6V20c0-9.94-8.06-18-18-18z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-captions">
      <path d="M38 8H10c-2.21 0-4 1.79-4 4v24c0 2.21 1.79 4 4 4h28c2.21 0 4-1.79 4-4V12c0-2.21-1.79-4-4-4zM22 22h-3v-1h-4v6h4v-1h3v2a2 2 0 0 1-2 2h-6a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v2zm14 0h-3v-1h-4v6h4v-1h3v2a2 2 0 0 1-2 2h-6a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v2z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-subtitles">
      <path d="M40 8H8c-2.21 0-4 1.79-4 4v24c0 2.21 1.79 4 4 4h32c2.21 0 4-1.79 4-4V12c0-2.21-1.79-4-4-4zM8 24h8v4H8v-4zm20 12H8v-4h20v4zm12 0h-8v-4h8v4zm0-8H20v-4h20v4z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-fullscreen-enter">
      <path d="M14 28h-4v10h10v-4h-6v-6zm-4-8h4v-6h6v-4H10v10zm24 14h-6v4h10V28h-4v6zm-6-24v4h6v6h4V10H28z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-fullscreen-exit">
      <path d="M10 32h6v6h4V28H10v4zm6-16h-6v4h10V10h-4v6zm12 22h4v-6h6v-4H28v10zm4-22v-6h-4v10h10v-4h-6z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-play-circle">
      <path d="M20 33l12-9-12-9v18zm4-29C12.95 4 4 12.95 4 24s8.95 20 20 20 20-8.95 20-20S35.05 4 24 4zm0 36c-8.82 0-16-7.18-16-16S15.18 8 24 8s16 7.18 16 16-7.18 16-16 16z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-volume-mute">
      <path d="M33 24c0-3.53-2.04-6.58-5-8.05v4.42l4.91 4.91c.06-.42.09-.85.09-1.28zm5 0c0 1.88-.41 3.65-1.08 5.28l3.03 3.03C41.25 29.82 42 27 42 24c0-8.56-5.99-15.72-14-17.54v4.13c5.78 1.72 10 7.07 10 13.41zM8.55 6L6 8.55 15.45 18H6v12h8l10 10V26.55l8.51 8.51c-1.34 1.03-2.85 1.86-4.51 2.36v4.13a17.94 17.94 0 0 0 7.37-3.62L39.45 42 42 39.45l-18-18L8.55 6zM24 8l-4.18 4.18L24 16.36V8z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-volume-low">
      <path d="M14 18v12h8l10 10V8L22 18h-8z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-volume-medium">
      <path d="M37 24c0-3.53-2.04-6.58-5-8.05v16.11c2.96-1.48 5-4.53 5-8.06zm-27-6v12h8l10 10V8L18 18h-8z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-volume-high">
      <path d="M6 18v12h8l10 10V8L14 18H6zm27 6c0-3.53-2.04-6.58-5-8.05v16.11c2.96-1.48 5-4.53 5-8.06zM28 6.46v4.13c5.78 1.72 10 7.07 10 13.41s-4.22 11.69-10 13.41v4.13c8.01-1.82 14-8.97 14-17.54S36.01 8.28 28 6.46z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-spinner">
      <path d="M18.8 21l9.53-16.51C26.94 4.18 25.49 4 24 4c-4.8 0-9.19 1.69-12.64 4.51l7.33 12.69.11-.2zm24.28-3c-1.84-5.85-6.3-10.52-11.99-12.68L23.77 18h19.31zm.52 2H28.62l.58 1 9.53 16.5C41.99 33.94 44 29.21 44 24c0-1.37-.14-2.71-.4-4zm-26.53 4l-7.8-13.5C6.01 14.06 4 18.79 4 24c0 1.37.14 2.71.4 4h14.98l-2.31-4zM4.92 30c1.84 5.85 6.3 10.52 11.99 12.68L24.23 30H4.92zm22.54 0l-7.8 13.51c1.4.31 2.85.49 4.34.49 4.8 0 9.19-1.69 12.64-4.51L29.31 26.8 27.46 30z"></path>
    </symbol>
    <symbol viewBox="0 0 24 24" id="vjs-icon-hd">
      <path d="M19 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-8 12H9.5v-2h-2v2H6V9h1.5v2.5h2V9H11v6zm2-6h4c.55 0 1 .45 1 1v4c0 .55-.45 1-1 1h-4V9zm1.5 4.5h2v-3h-2v3z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-chapters">
      <path d="M6 26h4v-4H6v4zm0 8h4v-4H6v4zm0-16h4v-4H6v4zm8 8h28v-4H14v4zm0 8h28v-4H14v4zm0-20v4h28v-4H14z"></path>
    </symbol>
    <symbol viewBox="0 0 40 40" id="vjs-icon-downloading">
      <path d="M18.208 36.875q-3.208-.292-5.979-1.729-2.771-1.438-4.812-3.729-2.042-2.292-3.188-5.229-1.146-2.938-1.146-6.23 0-6.583 4.334-11.416 4.333-4.834 10.833-5.5v3.166q-5.167.75-8.583 4.646Q6.25 14.75 6.25 19.958q0 5.209 3.396 9.104 3.396 3.896 8.562 4.646zM20 28.417L11.542 20l2.083-2.083 4.917 4.916v-11.25h2.916v11.25l4.875-4.916L28.417 20zm1.792 8.458v-3.167q1.833-.25 3.541-.958 1.709-.708 3.167-1.875l2.333 2.292q-1.958 1.583-4.25 2.541-2.291.959-4.791 1.167zm6.791-27.792q-1.541-1.125-3.25-1.854-1.708-.729-3.541-1.021V3.042q2.5.25 4.77 1.208 2.271.958 4.271 2.5zm4.584 21.584l-2.25-2.25q1.166-1.5 1.854-3.209.687-1.708.937-3.541h3.209q-.292 2.5-1.229 4.791-.938 2.292-2.521 4.209zm.541-12.417q-.291-1.833-.958-3.562-.667-1.73-1.833-3.188l2.375-2.208q1.541 1.916 2.458 4.208.917 2.292 1.167 4.75z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-file-download">
      <path d="M10.8 40.55q-1.35 0-2.375-1T7.4 37.15v-7.7h3.4v7.7h26.35v-7.7h3.4v7.7q0 1.4-1 2.4t-2.4 1zM24 32.1L13.9 22.05l2.45-2.45 5.95 5.95V7.15h3.4v18.4l5.95-5.95 2.45 2.45z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-file-download-done">
      <path d="M9.8 40.5v-3.45h28.4v3.45zm9.2-9.05L7.4 19.85l2.45-2.35L19 26.65l19.2-19.2 2.4 2.4z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-file-download-off">
      <path d="M4.9 4.75L43.25 43.1 41 45.3l-4.75-4.75q-.05.05-.075.025-.025-.025-.075-.025H10.8q-1.35 0-2.375-1T7.4 37.15v-7.7h3.4v7.7h22.05l-7-7-1.85 1.8L13.9 21.9l1.85-1.85L2.7 7zm26.75 14.7l2.45 2.45-3.75 3.8-2.45-2.5zM25.7 7.15V21.1l-3.4-3.45V7.15z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-share">
      <path d="M36 32.17c-1.52 0-2.89.59-3.93 1.54L17.82 25.4c.11-.45.18-.92.18-1.4s-.07-.95-.18-1.4l14.1-8.23c1.07 1 2.5 1.62 4.08 1.62 3.31 0 6-2.69 6-6s-2.69-6-6-6-6 2.69-6 6c0 .48.07.95.18 1.4l-14.1 8.23c-1.07-1-2.5-1.62-4.08-1.62-3.31 0-6 2.69-6 6s2.69 6 6 6c1.58 0 3.01-.62 4.08-1.62l14.25 8.31c-.1.42-.16.86-.16 1.31A5.83 5.83 0 1 0 36 32.17z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-cog">
      <path d="M38.86 25.95c.08-.64.14-1.29.14-1.95s-.06-1.31-.14-1.95l4.23-3.31c.38-.3.49-.84.24-1.28l-4-6.93c-.25-.43-.77-.61-1.22-.43l-4.98 2.01c-1.03-.79-2.16-1.46-3.38-1.97L29 4.84c-.09-.47-.5-.84-1-.84h-8c-.5 0-.91.37-.99.84l-.75 5.3a14.8 14.8 0 0 0-3.38 1.97L9.9 10.1a1 1 0 0 0-1.22.43l-4 6.93c-.25.43-.14.97.24 1.28l4.22 3.31C9.06 22.69 9 23.34 9 24s.06 1.31.14 1.95l-4.22 3.31c-.38.3-.49.84-.24 1.28l4 6.93c.25.43.77.61 1.22.43l4.98-2.01c1.03.79 2.16 1.46 3.38 1.97l.75 5.3c.08.47.49.84.99.84h8c.5 0 .91-.37.99-.84l.75-5.3a14.8 14.8 0 0 0 3.38-1.97l4.98 2.01a1 1 0 0 0 1.22-.43l4-6.93c.25-.43.14-.97-.24-1.28l-4.22-3.31zM24 31c-3.87 0-7-3.13-7-7s3.13-7 7-7 7 3.13 7 7-3.13 7-7 7z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-square">
      <path d="M36 8H12c-2.21 0-4 1.79-4 4v24c0 2.21 1.79 4 4 4h24c2.21 0 4-1.79 4-4V12c0-2.21-1.79-4-4-4zm0 28H12V12h24v24z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-circle">
      <circle cx="24" cy="24" r="20"></circle>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-circle-outline">
      <path d="M24 4C12.95 4 4 12.95 4 24s8.95 20 20 20 20-8.95 20-20S35.05 4 24 4zm0 36c-8.82 0-16-7.18-16-16S15.18 8 24 8s16 7.18 16 16-7.18 16-16 16z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-circle-inner-circle">
      <path d="M24 4C12.97 4 4 12.97 4 24s8.97 20 20 20 20-8.97 20-20S35.03 4 24 4zm0 36c-8.82 0-16-7.18-16-16S15.18 8 24 8s16 7.18 16 16-7.18 16-16 16zm6-16c0 3.31-2.69 6-6 6s-6-2.69-6-6 2.69-6 6-6 6 2.69 6 6z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-cancel">
      <path d="M24 4C12.95 4 4 12.95 4 24s8.95 20 20 20 20-8.95 20-20S35.05 4 24 4zm10 27.17L31.17 34 24 26.83 16.83 34 14 31.17 21.17 24 14 16.83 16.83 14 24 21.17 31.17 14 34 16.83 26.83 24 34 31.17z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-replay">
      <path d="M24 10V2L14 12l10 10v-8c6.63 0 12 5.37 12 12s-5.37 12-12 12-12-5.37-12-12H8c0 8.84 7.16 16 16 16s16-7.16 16-16-7.16-16-16-16z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-repeat">
      <path d="M14 14h20v6l8-8-8-8v6H10v12h4v-8zm20 20H14v-6l-8 8 8 8v-6h24V26h-4v8z"></path>
    </symbol>
    <symbol viewBox="0 96 48 48" id="vjs-icon-replay-5">
      <path d="M17.689 98l-8.697 8.696 8.697 8.697 2.486-2.485-4.32-4.319h1.302c4.93 0 9.071 1.722 12.424 5.165 3.352 3.443 5.029 7.638 5.029 12.584h3.55c0-2.958-.553-5.73-1.658-8.313-1.104-2.583-2.622-4.841-4.555-6.774-1.932-1.932-4.19-3.45-6.773-4.555-2.584-1.104-5.355-1.657-8.313-1.657H15.5l4.615-4.615zm-8.08 21.659v13.861h11.357v5.008H9.609V143h12.7c.834 0 1.55-.298 2.146-.894.596-.597.895-1.31.895-2.145v-7.781c0-.835-.299-1.55-.895-2.147a2.929 2.929 0 0 0-2.147-.894h-8.227v-5.096H25.35v-4.384z"></path>
    </symbol>
    <symbol viewBox="0 96 48 48" id="vjs-icon-replay-10">
      <path d="M42.315 125.63c0-4.997-1.694-9.235-5.08-12.713-3.388-3.479-7.571-5.218-12.552-5.218h-1.315l4.363 4.363-2.51 2.51-8.787-8.786L25.221 97l2.45 2.45-4.662 4.663h1.375c2.988 0 5.788.557 8.397 1.673 2.61 1.116 4.892 2.65 6.844 4.602 1.953 1.953 3.487 4.234 4.602 6.844 1.116 2.61 1.674 5.41 1.674 8.398zM8.183 142v-19.657H3.176V117.8h9.643V142zm13.63 0c-1.156 0-2.127-.393-2.912-1.178-.778-.778-1.168-1.746-1.168-2.902v-16.04c0-1.156.393-2.127 1.178-2.912.779-.779 1.746-1.168 2.902-1.168h7.696c1.156 0 2.126.392 2.911 1.177.779.78 1.168 1.747 1.168 2.903v16.04c0 1.156-.392 2.127-1.177 2.912-.779.779-1.746 1.168-2.902 1.168zm.556-4.636h6.583v-15.02H22.37z"></path>
    </symbol>
    <symbol viewBox="0 96 48 48" id="vjs-icon-replay-30">
      <path d="M26.047 97l-8.733 8.732 8.733 8.733 2.496-2.494-4.336-4.338h1.307c4.95 0 9.108 1.73 12.474 5.187 3.367 3.458 5.051 7.668 5.051 12.635h3.565c0-2.97-.556-5.751-1.665-8.346-1.109-2.594-2.633-4.862-4.574-6.802-1.94-1.941-4.208-3.466-6.803-4.575-2.594-1.109-5.375-1.664-8.345-1.664H23.85l4.634-4.634zM2.555 117.531v4.688h10.297v5.25H5.873v4.687h6.979v5.156H2.555V142H13.36c1.061 0 1.95-.395 2.668-1.186.718-.79 1.076-1.772 1.076-2.94v-16.218c0-1.168-.358-2.149-1.076-2.94-.717-.79-1.607-1.185-2.668-1.185zm22.482.14c-1.149 0-2.11.39-2.885 1.165-.78.78-1.172 1.744-1.172 2.893v15.943c0 1.149.388 2.11 1.163 2.885.78.78 1.745 1.172 2.894 1.172h7.649c1.148 0 2.11-.388 2.884-1.163.78-.78 1.17-1.745 1.17-2.894v-15.943c0-1.15-.386-2.111-1.16-2.885-.78-.78-1.746-1.172-2.894-1.172zm.553 4.518h6.545v14.93H25.59z"></path>
    </symbol>
    <symbol viewBox="0 96 48 48" id="vjs-icon-forward-5">
      <path d="M29.508 97l-2.431 2.43 4.625 4.625h-1.364c-2.965 0-5.742.554-8.332 1.66-2.589 1.107-4.851 2.629-6.788 4.566-1.937 1.937-3.458 4.2-4.565 6.788-1.107 2.59-1.66 5.367-1.66 8.331h3.557c0-4.957 1.68-9.16 5.04-12.611 3.36-3.45 7.51-5.177 12.451-5.177h1.304l-4.326 4.33 2.49 2.49 8.715-8.716zm-9.783 21.61v13.89h11.382v5.018H19.725V142h12.727a2.93 2.93 0 0 0 2.15-.896 2.93 2.93 0 0 0 .896-2.15v-7.798c0-.837-.299-1.554-.896-2.152a2.93 2.93 0 0 0-2.15-.896h-8.245V123h11.29v-4.392z"></path>
    </symbol>
    <symbol viewBox="0 96 48 48" id="vjs-icon-forward-10">
      <path d="M23.119 97l-2.386 2.383 4.538 4.538h-1.339c-2.908 0-5.633.543-8.173 1.63-2.54 1.085-4.76 2.577-6.66 4.478-1.9 1.9-3.392 4.12-4.478 6.66-1.085 2.54-1.629 5.264-1.629 8.172h3.49c0-4.863 1.648-8.986 4.944-12.372 3.297-3.385 7.368-5.078 12.216-5.078h1.279l-4.245 4.247 2.443 2.442 8.55-8.55zm-9.52 21.45v4.42h4.871V142h4.513v-23.55zm18.136 0c-1.125 0-2.066.377-2.824 1.135-.764.764-1.148 1.709-1.148 2.834v15.612c0 1.124.38 2.066 1.139 2.824.764.764 1.708 1.145 2.833 1.145h7.489c1.125 0 2.066-.378 2.824-1.136.764-.764 1.145-1.709 1.145-2.833v-15.612c0-1.125-.378-2.067-1.136-2.825-.764-.764-1.708-1.145-2.833-1.145zm.54 4.42h6.408v14.617h-6.407z"></path>
    </symbol>
    <symbol viewBox="0 96 48 48" id="vjs-icon-forward-30">
      <path d="M25.549 97l-2.437 2.434 4.634 4.635H26.38c-2.97 0-5.753.555-8.347 1.664-2.594 1.109-4.861 2.633-6.802 4.574-1.94 1.94-3.465 4.207-4.574 6.802-1.109 2.594-1.664 5.377-1.664 8.347h3.565c0-4.967 1.683-9.178 5.05-12.636 3.366-3.458 7.525-5.187 12.475-5.187h1.307l-4.335 4.338 2.495 2.494 8.732-8.732zm-11.553 20.53v4.689h10.297v5.249h-6.978v4.688h6.978v5.156H13.996V142h10.808c1.06 0 1.948-.395 2.666-1.186.718-.79 1.077-1.771 1.077-2.94v-16.217c0-1.169-.36-2.15-1.077-2.94-.718-.79-1.605-1.186-2.666-1.186zm21.174.168c-1.149 0-2.11.389-2.884 1.163-.78.78-1.172 1.745-1.172 2.894v15.942c0 1.15.388 2.11 1.162 2.885.78.78 1.745 1.17 2.894 1.17h7.649c1.149 0 2.11-.386 2.885-1.16.78-.78 1.17-1.746 1.17-2.895v-15.942c0-1.15-.387-2.11-1.161-2.885-.78-.78-1.745-1.172-2.894-1.172zm.552 4.516h6.542v14.931h-6.542z"></path>
    </symbol>
    <symbol viewBox="0 0 512 512" id="vjs-icon-audio-description">
      <g fill-rule="evenodd"><path d="M227.29 381.351V162.993c50.38-1.017 89.108-3.028 117.631 17.126 27.374 19.342 48.734 56.965 44.89 105.325-4.067 51.155-41.335 94.139-89.776 98.475-24.085 2.155-71.972 0-71.972 0s-.84-1.352-.773-2.568m48.755-54.804c31.43 1.26 53.208-16.633 56.495-45.386 4.403-38.51-21.188-63.552-58.041-60.796v103.612c-.036 1.466.575 2.22 1.546 2.57"></path><path d="M383.78 381.328c13.336 3.71 17.387-11.06 23.215-21.408 12.722-22.571 22.294-51.594 22.445-84.774.221-47.594-18.343-82.517-35.6-106.182h-8.51c-.587 3.874 2.226 7.315 3.865 10.276 13.166 23.762 25.367 56.553 25.54 94.194.2 43.176-14.162 79.278-30.955 107.894"></path><path d="M425.154 381.328c13.336 3.71 17.384-11.061 23.215-21.408 12.721-22.571 22.291-51.594 22.445-84.774.221-47.594-18.343-82.517-35.6-106.182h-8.511c-.586 3.874 2.226 7.315 3.866 10.276 13.166 23.762 25.367 56.553 25.54 94.194.2 43.176-14.162 79.278-30.955 107.894"></path><path d="M466.26 381.328c13.337 3.71 17.385-11.061 23.216-21.408 12.722-22.571 22.292-51.594 22.445-84.774.221-47.594-18.343-82.517-35.6-106.182h-8.51c-.587 3.874 2.225 7.315 3.865 10.276 13.166 23.762 25.367 56.553 25.54 94.194.2 43.176-14.162 79.278-30.955 107.894M4.477 383.005H72.58l18.573-28.484 64.169-.135s.065 19.413.065 28.62h48.756V160.307h-58.816c-5.653 9.537-140.85 222.697-140.85 222.697zm152.667-145.282v71.158l-40.453-.27 40.453-70.888z"></path></g>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-next-item">
      <path d="M12 36l17-12-17-12v24zm20-24v24h4V12h-4z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-previous-item">
      <path d="M12 12h4v24h-4zm7 12l17 12V12z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-shuffle">
      <path d="M21.17 18.34L10.83 8 8 10.83l10.34 10.34 2.83-2.83zM29 8l4.09 4.09L8 37.17 10.83 40l25.09-25.09L40 19V8H29zm.66 18.83l-2.83 2.83 6.26 6.26L29 40h11V29l-4.09 4.09-6.25-6.26z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-cast">
      <path d="M42 6H6c-2.21 0-4 1.79-4 4v6h4v-6h36v28H28v4h14c2.21 0 4-1.79 4-4V10c0-2.21-1.79-4-4-4zM2 36v6h6c0-3.31-2.69-6-6-6zm0-8v4c5.52 0 10 4.48 10 10h4c0-7.73-6.27-14-14-14zm0-8v4c9.94 0 18 8.06 18 18h4c0-12.15-9.85-22-22-22z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-picture-in-picture-enter">
      <path d="M38 22H22v11.99h16V22zm8 16V9.96C46 7.76 44.2 6 42 6H6C3.8 6 2 7.76 2 9.96V38c0 2.2 1.8 4 4 4h36c2.2 0 4-1.8 4-4zm-4 .04H6V9.94h36v28.1z"></path>
    </symbol>
    <symbol viewBox="0 0 22 18" id="vjs-icon-picture-in-picture-exit">
      <path d="M18 4H4v10h14V4zm4 12V1.98C22 .88 21.1 0 20 0H2C.9 0 0 .88 0 1.98V16c0 1.1.9 2 2 2h18c1.1 0 2-.9 2-2zm-2 .02H2V1.97h18v14.05z"></path>
      <path fill="none" d="M-1-3h24v24H-1z"></path>
    </symbol>
    <symbol viewBox="0 0 1792 1792" id="vjs-icon-facebook">
      <path d="M1343 12v264h-157q-86 0-116 36t-30 108v189h293l-39 296h-254v759H734V905H479V609h255V391q0-186 104-288.5T1115 0q147 0 228 12z"></path>
    </symbol>
    <symbol viewBox="0 0 1792 1792" id="vjs-icon-linkedin">
      <path d="M477 625v991H147V625h330zm21-306q1 73-50.5 122T312 490h-2q-82 0-132-49t-50-122q0-74 51.5-122.5T314 148t133 48.5T498 319zm1166 729v568h-329v-530q0-105-40.5-164.5T1168 862q-63 0-105.5 34.5T999 982q-11 30-11 81v553H659q2-399 2-647t-1-296l-1-48h329v144h-2q20-32 41-56t56.5-52 87-43.5T1285 602q171 0 275 113.5t104 332.5z"></path>
    </symbol>
    <symbol viewBox="0 0 1200 1227" id="vjs-icon-twitter">
      <path d="M714.163 519.284L1160.89 0H1055.03L667.137 450.887L357.328 0H0L468.492 681.821L0 1226.37H105.866L515.491 750.218L842.672 1226.37H1200L714.137 519.284H714.163ZM569.165 687.828L521.697 619.934L144.011 79.6944H306.615L611.412 515.685L658.88 583.579L1055.08 1150.3H892.476L569.165 687.854V687.828Z"/>
    </symbol>
    <symbol viewBox="0 0 1792 1792" id="vjs-icon-tumblr">
      <path d="M1328 1329l80 237q-23 35-111 66t-177 32q-104 2-190.5-26T787 1564t-95-106-55.5-120-16.5-118V676H452V461q72-26 129-69.5t91-90 58-102 34-99T779 12q1-5 4.5-8.5T791 0h244v424h333v252h-334v518q0 30 6.5 56t22.5 52.5 49.5 41.5 81.5 14q78-2 134-29z"></path>
    </symbol>
    <symbol viewBox="0 0 1792 1792" id="vjs-icon-pinterest">
      <path d="M1664 896q0 209-103 385.5T1281.5 1561 896 1664q-111 0-218-32 59-93 78-164 9-34 54-211 20 39 73 67.5t114 28.5q121 0 216-68.5t147-188.5 52-270q0-114-59.5-214T1180 449t-255-63q-105 0-196 29t-154.5 77-109 110.5-67 129.5T377 866q0 104 40 183t117 111q30 12 38-20 2-7 8-31t8-30q6-23-11-43-51-61-51-151 0-151 104.5-259.5T904 517q151 0 235.5 82t84.5 213q0 170-68.5 289T980 1220q-61 0-98-43.5T859 1072q8-35 26.5-93.5t30-103T927 800q0-50-27-83t-77-33q-62 0-105 57t-43 142q0 73 25 122l-99 418q-17 70-13 177-206-91-333-281T128 896q0-209 103-385.5T510.5 231 896 128t385.5 103T1561 510.5 1664 896z"></path>
    </symbol>
  </defs>
</svg>`;const YL=b_?10009:S_?461:8,hf={codes:{play:415,pause:19,ff:417,rw:412,back:YL},names:{415:"play",19:"pause",417:"ff",412:"rw",[YL]:"back"},isEventKey(i,e){return e=e.toLowerCase(),!!(this.names[i.keyCode]&&this.names[i.keyCode]===e)},getEventName(i){if(this.names[i.keyCode])return this.names[i.keyCode];if(this.codes[i.code]){const e=this.codes[i.code];return this.names[e]}return null}},QL=5;class Ene extends so{constructor(e){super(),this.player_=e,this.focusableComponents=[],this.isListening_=!1,this.isPaused_=!1,this.onKeyDown_=this.onKeyDown_.bind(this),this.lastFocusedComponent_=null}start(){this.isListening_||(this.player_.on("keydown",this.onKeyDown_),this.player_.on("modalKeydown",this.onKeyDown_),this.player_.on("loadedmetadata",()=>{this.focus(this.updateFocusableComponents()[0])}),this.player_.on("modalclose",()=>{this.refocusComponent()}),this.player_.on("focusin",this.handlePlayerFocus_.bind(this)),this.player_.on("focusout",this.handlePlayerBlur_.bind(this)),this.isListening_=!0,this.player_.errorDisplay&&this.player_.errorDisplay.on("aftermodalfill",()=>{this.updateFocusableComponents(),this.focusableComponents.length&&(this.focusableComponents.length>1?this.focusableComponents[1].focus():this.focusableComponents[0].focus())}))}stop(){this.player_.off("keydown",this.onKeyDown_),this.isListening_=!1}onKeyDown_(e){const t=e.originalEvent?e.originalEvent:e;if(["ArrowLeft","ArrowRight","ArrowUp","ArrowDown"].includes(t.key)){if(this.isPaused_)return;t.preventDefault();const r=t.key.substring(5).toLowerCase();this.move(r)}else if(hf.isEventKey(t,"play")||hf.isEventKey(t,"pause")||hf.isEventKey(t,"ff")||hf.isEventKey(t,"rw")){t.preventDefault();const r=hf.getEventName(t);this.performMediaAction_(r)}else hf.isEventKey(t,"Back")&&e.target&&typeof e.target.closeable=="function"&&e.target.closeable()&&(t.preventDefault(),e.target.close())}performMediaAction_(e){if(this.player_)switch(e){case"play":this.player_.paused()&&this.player_.play();break;case"pause":this.player_.paused()||this.player_.pause();break;case"ff":this.userSeek_(this.player_.currentTime()+QL);break;case"rw":this.userSeek_(this.player_.currentTime()-QL);break}}userSeek_(e){this.player_.liveTracker&&this.player_.liveTracker.isLive()&&this.player_.liveTracker.nextSeekedFromUser(),this.player_.currentTime(e)}pause(){this.isPaused_=!0}resume(){this.isPaused_=!1}handlePlayerBlur_(e){const t=e.relatedTarget;let r=null;const n=this.getCurrentComponent(e.target);t&&(r=!!t.closest(".video-js"),t.classList.contains("vjs-text-track-settings")&&!this.isPaused_&&this.searchForTrackSelect_()),(!e.currentTarget.contains(e.relatedTarget)&&!r||!t)&&(n&&n.name()==="CloseButton"?this.refocusComponent():(this.pause(),n&&n.el()&&(this.lastFocusedComponent_=n)))}handlePlayerFocus_(){this.getCurrentComponent()&&this.getCurrentComponent().getIsFocusable()&&this.resume()}updateFocusableComponents(){const e=this.player_,t=[];function r(n){for(const s of n)s.hasOwnProperty("el_")&&s.getIsFocusable()&&s.getIsAvailableToBeFocused(s.el())&&t.push(s),s.hasOwnProperty("children_")&&s.children_.length>0&&r(s.children_)}return e.children_.forEach(n=>{if(n.hasOwnProperty("el_"))if(n.getIsFocusable&&n.getIsAvailableToBeFocused&&n.getIsFocusable()&&n.getIsAvailableToBeFocused(n.el())){t.push(n);return}else n.hasOwnProperty("children_")&&n.children_.length>0?r(n.children_):n.hasOwnProperty("items")&&n.items.length>0?r(n.items):this.findSuitableDOMChild(n)&&t.push(n);if(n.name_==="ErrorDisplay"&&n.opened_){const s=n.el_.querySelector(".vjs-errors-ok-button-container");s&&s.querySelectorAll("button").forEach((o,l)=>{t.push({name:()=>"ModalButton"+(l+1),el:()=>o,getPositions:()=>{const u=o.getBoundingClientRect(),c={x:u.x,y:u.y,width:u.width,height:u.height,top:u.top,right:u.right,bottom:u.bottom,left:u.left},h={x:u.left+u.width/2,y:u.top+u.height/2,width:0,height:0,top:u.top+u.height/2,right:u.left+u.width/2,bottom:u.top+u.height/2,left:u.left+u.width/2};return{boundingClientRect:c,center:h}},getIsAvailableToBeFocused:()=>!0,getIsFocusable:u=>!0,focus:()=>o.focus()})})}}),this.focusableComponents=t,this.focusableComponents}findSuitableDOMChild(e){function t(r){if(e.getIsFocusable(r)&&e.getIsAvailableToBeFocused(r))return r;for(let n=0;n<r.children.length;n++){const s=r.children[n],a=t(s);if(a)return a}return null}return e.el()?t(e.el()):null}getCurrentComponent(e){this.updateFocusableComponents();const t=e||document.activeElement;if(this.focusableComponents.length){for(const r of this.focusableComponents)if(r.el()===t)return r}}add(e){const t=[...this.focusableComponents];e.hasOwnProperty("el_")&&e.getIsFocusable()&&e.getIsAvailableToBeFocused(e.el())&&t.push(e),this.focusableComponents=t,this.trigger({type:"focusableComponentsChanged",focusableComponents:this.focusableComponents})}remove(e){for(let t=0;t<this.focusableComponents.length;t++)if(this.focusableComponents[t].name()===e.name()){this.focusableComponents.splice(t,1),this.trigger({type:"focusableComponentsChanged",focusableComponents:this.focusableComponents});return}}clear(){this.focusableComponents.length>0&&(this.focusableComponents=[],this.trigger({type:"focusableComponentsChanged",focusableComponents:this.focusableComponents}))}move(e){const t=this.getCurrentComponent();if(!t)return;const r=t.getPositions(),n=this.focusableComponents.filter(a=>a!==t&&this.isInDirection_(r.boundingClientRect,a.getPositions().boundingClientRect,e)),s=this.findBestCandidate_(r.center,n,e);s?this.focus(s):this.trigger({type:"endOfFocusableComponents",direction:e,focusedComponent:t})}findBestCandidate_(e,t,r){let n=1/0,s=null;for(const a of t){const o=a.getPositions().center,l=this.calculateDistance_(e,o,r);l<n&&(n=l,s=a)}return s}isInDirection_(e,t,r){switch(r){case"right":return t.left>=e.right;case"left":return t.right<=e.left;case"down":return t.top>=e.bottom;case"up":return t.bottom<=e.top;default:return!1}}refocusComponent(){if(this.lastFocusedComponent_){this.player_.userActive()||this.player_.userActive(!0),this.updateFocusableComponents();for(let e=0;e<this.focusableComponents.length;e++)if(this.focusableComponents[e].name()===this.lastFocusedComponent_.name()){this.focus(this.focusableComponents[e]);return}}else this.focus(this.updateFocusableComponents()[0])}focus(e){typeof e=="object"&&(e.getIsAvailableToBeFocused(e.el())?e.focus():this.findSuitableDOMChild(e)&&this.findSuitableDOMChild(e).focus())}calculateDistance_(e,t,r){const n=Math.abs(e.x-t.x),s=Math.abs(e.y-t.y);let a;switch(r){case"right":case"left":a=n+s*100;break;case"up":a=s*2+n*.5;break;case"down":a=s*5+n;break;default:a=n+s}return a}searchForTrackSelect_(){const e=this;for(const t of e.updateFocusableComponents())if(t.constructor.name==="TextTrackSelect"){e.focus(t);break}}}let wne=class extends at{constructor(e,t,r){const n=Ai({createEl:!1},t);if(super(e,n,r),!t.playerOptions.sources||t.playerOptions.sources.length===0)for(let s=0,a=t.playerOptions.techOrder;s<a.length;s++){const o=nn(a[s]);let l=Ii.getTech(o);if(o||(l=at.getComponent(o)),l&&l.isSupported()){e.loadTech_(o);break}}else e.src(t.playerOptions.sources)}};at.registerComponent("MediaLoader",wne);let hT=class extends at{constructor(e,t){super(e,t),this.options_.controlText&&this.controlText(this.options_.controlText),this.handleMouseOver_=r=>this.handleMouseOver(r),this.handleMouseOut_=r=>this.handleMouseOut(r),this.handleClick_=r=>this.handleClick(r),this.handleKeyDown_=r=>this.handleKeyDown(r),this.emitTapEvents(),this.enable()}createEl(e="div",t={},r={}){t=Object.assign({className:this.buildCSSClass(),tabIndex:0},t),e==="button"&&Ur.error(`Creating a ClickableComponent with an HTML element of ${e} is not supported; use a Button instead.`),r=Object.assign({role:"button"},r),this.tabIndex_=t.tabIndex;const n=_r(e,t,r);return this.player_.options_.experimentalSvgIcons||n.appendChild(_r("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),this.createControlTextEl(n),n}dispose(){this.controlTextEl_=null,super.dispose()}createControlTextEl(e){return this.controlTextEl_=_r("span",{className:"vjs-control-text"},{"aria-live":"polite"}),e&&e.appendChild(this.controlTextEl_),this.controlText(this.controlText_,e),this.controlTextEl_}controlText(e,t=this.el()){if(e===void 0)return this.controlText_||"Need Text";const r=this.localize(e);this.controlText_=e,_d(this.controlTextEl_,r),!this.nonIconControl&&!this.player_.options_.noUITitleAttributes&&t.setAttribute("title",r)}buildCSSClass(){return`vjs-control vjs-button ${super.buildCSSClass()}`}enable(){this.enabled_||(this.enabled_=!0,this.removeClass("vjs-disabled"),this.el_.setAttribute("aria-disabled","false"),typeof this.tabIndex_<"u"&&this.el_.setAttribute("tabIndex",this.tabIndex_),this.on(["tap","click"],this.handleClick_),this.on("keydown",this.handleKeyDown_))}disable(){this.enabled_=!1,this.addClass("vjs-disabled"),this.el_.setAttribute("aria-disabled","true"),typeof this.tabIndex_<"u"&&this.el_.removeAttribute("tabIndex"),this.off("mouseover",this.handleMouseOver_),this.off("mouseout",this.handleMouseOut_),this.off(["tap","click"],this.handleClick_),this.off("keydown",this.handleKeyDown_)}handleLanguagechange(){this.controlText(this.controlText_)}handleClick(e){this.options_.clickHandler&&this.options_.clickHandler.call(this,arguments)}handleKeyDown(e){e.key===" "||e.key==="Enter"?(e.preventDefault(),e.stopPropagation(),this.trigger("click")):super.handleKeyDown(e)}};at.registerComponent("ClickableComponent",hT);let PC=class extends hT{constructor(e,t){super(e,t),this.update(),this.update_=r=>this.update(r),e.on("posterchange",this.update_)}dispose(){this.player().off("posterchange",this.update_),super.dispose()}createEl(){return _r("div",{className:"vjs-poster"})}crossOrigin(e){if(typeof e>"u")return this.$("img")?this.$("img").crossOrigin:this.player_.tech_&&this.player_.tech_.isReady_?this.player_.crossOrigin():this.player_.options_.crossOrigin||this.player_.options_.crossorigin||null;if(e!==null&&e!=="anonymous"&&e!=="use-credentials"){this.player_.log.warn(`crossOrigin must be null,  "anonymous" or "use-credentials", given "${e}"`);return}this.$("img")&&(this.$("img").crossOrigin=e)}update(e){const t=this.player().poster();this.setSrc(t),t?this.show():this.hide()}setSrc(e){if(!e){this.el_.textContent="";return}this.$("img")||this.el_.appendChild(_r("picture",{className:"vjs-poster",tabIndex:-1},{},_r("img",{loading:"lazy",crossOrigin:this.crossOrigin()},{alt:""}))),this.$("img").src=e}handleClick(e){this.player_.controls()&&(this.player_.tech(!0)&&this.player_.tech(!0).focus(),this.player_.paused()?Yl(this.player_.play()):this.player_.pause())}};PC.prototype.crossorigin=PC.prototype.crossOrigin;at.registerComponent("PosterImage",PC);const Eo="#222",JL="#ccc",kne={monospace:"monospace",sansSerif:"sans-serif",serif:"serif",monospaceSansSerif:'"Andale Mono", "Lucida Console", monospace',monospaceSerif:'"Courier New", monospace',proportionalSansSerif:"sans-serif",proportionalSerif:"serif",casual:'"Comic Sans MS", Impact, fantasy',script:'"Monotype Corsiva", cursive',smallcaps:'"Andale Mono", "Lucida Console", monospace, sans-serif'};function WS(i,e){let t;if(i.length===4)t=i[1]+i[1]+i[2]+i[2]+i[3]+i[3];else if(i.length===7)t=i.slice(1);else throw new Error("Invalid color code provided, "+i+"; must be formatted as e.g. #f0e or #f604e2.");return"rgba("+parseInt(t.slice(0,2),16)+","+parseInt(t.slice(2,4),16)+","+parseInt(t.slice(4,6),16)+","+e+")"}function zl(i,e,t){try{i.style[e]=t}catch{return}}function ZL(i){return i?`${i}px`:""}let Ane=class extends at{constructor(e,t,r){super(e,t,r);const n=a=>this.updateDisplay(a),s=a=>{this.updateDisplayOverlay(),this.updateDisplay(a)};e.on("loadstart",a=>this.toggleDisplay(a)),e.on("texttrackchange",n),e.on("loadedmetadata",a=>{this.updateDisplayOverlay(),this.preselectTrack(a)}),e.ready(Ri(this,function(){if(e.tech_&&e.tech_.featuresNativeTextTracks){this.hide();return}e.on("fullscreenchange",s),e.on("playerresize",s);const a=X.screen.orientation||X,o=X.screen.orientation?"change":"orientationchange";a.addEventListener(o,s),e.on("dispose",()=>a.removeEventListener(o,s));const l=this.options_.playerOptions.tracks||[];for(let u=0;u<l.length;u++)this.player_.addRemoteTextTrack(l[u],!0);this.preselectTrack()}))}preselectTrack(){const e={captions:1,subtitles:1},t=this.player_.textTracks(),r=this.player_.cache_.selectedLanguage;let n,s,a;for(let o=0;o<t.length;o++){const l=t[o];r&&r.enabled&&r.language&&r.language===l.language&&l.kind in e?l.kind===r.kind?a=l:a||(a=l):r&&!r.enabled?(a=null,n=null,s=null):l.default&&(l.kind==="descriptions"&&!n?n=l:l.kind in e&&!s&&(s=l))}a?a.mode="showing":s?s.mode="showing":n&&(n.mode="showing")}toggleDisplay(){this.player_.tech_&&this.player_.tech_.featuresNativeTextTracks?this.hide():this.show()}createEl(){return super.createEl("div",{className:"vjs-text-track-display"},{translate:"yes","aria-live":"off","aria-atomic":"true"})}clearDisplay(){typeof X.WebVTT=="function"&&X.WebVTT.processCues(X,[],this.el_)}updateDisplay(){const e=this.player_.textTracks(),t=this.options_.allowMultipleShowingTracks;if(this.clearDisplay(),t){const a=[];for(let o=0;o<e.length;++o){const l=e[o];l.mode==="showing"&&a.push(l)}this.updateForTrack(a);return}let r=null,n=null,s=e.length;for(;s--;){const a=e[s];a.mode==="showing"&&(a.kind==="descriptions"?r=a:n=a)}if(n?(this.getAttribute("aria-live")!=="off"&&this.setAttribute("aria-live","off"),this.updateForTrack(n)):r&&(this.getAttribute("aria-live")!=="assertive"&&this.setAttribute("aria-live","assertive"),this.updateForTrack(r)),!X.CSS.supports("inset","10px")){const a=this.el_,o=a.querySelectorAll(".vjs-text-track-cue"),l=this.player_.controlBar.el_.getBoundingClientRect().height,u=this.player_.el_.getBoundingClientRect().height;a.style="",zl(a,"position","relative"),zl(a,"height",u-l+"px"),zl(a,"top","unset"),C_?zl(a,"bottom",u+"px"):zl(a,"bottom","0px"),o.length>0&&o.forEach(c=>{if(c.style.inset){const h=c.style.inset.split(" ");h.length===3&&Object.assign(c.style,{top:h[0],right:h[1],bottom:h[2],left:"unset"})}})}}updateDisplayOverlay(){if(!this.player_.videoHeight()||!X.CSS.supports("inset-inline: 10px"))return;const e=this.player_.currentWidth(),t=this.player_.currentHeight(),r=e/t,n=this.player_.videoWidth()/this.player_.videoHeight();let s=0,a=0;Math.abs(r-n)>.1&&(r>n?s=Math.round((e-t*n)/2):a=Math.round((t-e/n)/2)),zl(this.el_,"insetInline",ZL(s)),zl(this.el_,"insetBlock",ZL(a))}updateDisplayState(e){const t=this.player_.textTrackSettings.getValues(),r=e.activeCues;let n=r.length;for(;n--;){const s=r[n];if(!s)continue;const a=s.displayState;if(t.color&&(a.firstChild.style.color=t.color),t.textOpacity&&zl(a.firstChild,"color",WS(t.color||"#fff",t.textOpacity)),t.backgroundColor&&(a.firstChild.style.backgroundColor=t.backgroundColor),t.backgroundOpacity&&zl(a.firstChild,"backgroundColor",WS(t.backgroundColor||"#000",t.backgroundOpacity)),t.windowColor&&(t.windowOpacity?zl(a,"backgroundColor",WS(t.windowColor,t.windowOpacity)):a.style.backgroundColor=t.windowColor),t.edgeStyle&&(t.edgeStyle==="dropshadow"?a.firstChild.style.textShadow=`2px 2px 3px ${Eo}, 2px 2px 4px ${Eo}, 2px 2px 5px ${Eo}`:t.edgeStyle==="raised"?a.firstChild.style.textShadow=`1px 1px ${Eo}, 2px 2px ${Eo}, 3px 3px ${Eo}`:t.edgeStyle==="depressed"?a.firstChild.style.textShadow=`1px 1px ${JL}, 0 1px ${JL}, -1px -1px ${Eo}, 0 -1px ${Eo}`:t.edgeStyle==="uniform"&&(a.firstChild.style.textShadow=`0 0 4px ${Eo}, 0 0 4px ${Eo}, 0 0 4px ${Eo}, 0 0 4px ${Eo}`)),t.fontPercent&&t.fontPercent!==1){const o=X.parseFloat(a.style.fontSize);a.style.fontSize=o*t.fontPercent+"px",a.style.height="auto",a.style.top="auto"}t.fontFamily&&t.fontFamily!=="default"&&(t.fontFamily==="small-caps"?a.firstChild.style.fontVariant="small-caps":a.firstChild.style.fontFamily=kne[t.fontFamily])}}updateForTrack(e){if(Array.isArray(e)||(e=[e]),typeof X.WebVTT!="function"||e.every(r=>!r.activeCues))return;const t=[];for(let r=0;r<e.length;++r){const n=e[r];for(let s=0;s<n.activeCues.length;++s)t.push(n.activeCues[s])}X.WebVTT.processCues(X,t,this.el_);for(let r=0;r<e.length;++r){const n=e[r];for(let s=0;s<n.activeCues.length;++s){const a=n.activeCues[s].displayState;ph(a,"vjs-text-track-cue","vjs-text-track-cue-"+(n.language?n.language:r)),n.language&&hp(a,"lang",n.language)}this.player_.textTrackSettings&&this.updateDisplayState(n)}}};at.registerComponent("TextTrackDisplay",Ane);let Ine=class extends at{createEl(){const e=this.player_.isAudio(),t=this.localize(e?"Audio Player":"Video Player"),r=_r("span",{className:"vjs-control-text",textContent:this.localize("{1} is loading.",[t])}),n=super.createEl("div",{className:"vjs-loading-spinner",dir:"ltr"});return n.appendChild(r),n}handleLanguagechange(){this.$(".vjs-control-text").textContent=this.localize("{1} is loading.",[this.player_.isAudio()?"Audio Player":"Video Player"])}};at.registerComponent("LoadingSpinner",Ine);let Ls=class extends hT{createEl(e,t={},r={}){e="button",t=Object.assign({className:this.buildCSSClass()},t),r=Object.assign({type:"button"},r);const n=_r(e,t,r);return this.player_.options_.experimentalSvgIcons||n.appendChild(_r("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),this.createControlTextEl(n),n}addChild(e,t={}){const r=this.constructor.name;return Ur.warn(`Adding an actionable (user controllable) child to a Button (${r}) is not supported; use a ClickableComponent instead.`),at.prototype.addChild.call(this,e,t)}enable(){super.enable(),this.el_.removeAttribute("disabled")}disable(){super.disable(),this.el_.setAttribute("disabled","disabled")}handleKeyDown(e){if(e.key===" "||e.key==="Enter"){e.stopPropagation();return}super.handleKeyDown(e)}};at.registerComponent("Button",Ls);let UB=class extends Ls{constructor(e,t){super(e,t),this.mouseused_=!1,this.setIcon("play"),this.on("mousedown",r=>this.handleMouseDown(r))}buildCSSClass(){return"vjs-big-play-button"}handleClick(e){const t=this.player_.play();if(this.mouseused_&&"clientX"in e&&"clientY"in e){Yl(t),this.player_.tech(!0)&&this.player_.tech(!0).focus();return}const r=this.player_.getChild("controlBar"),n=r&&r.getChild("playToggle");if(!n){this.player_.tech(!0).focus();return}const s=()=>n.focus();a0(t)?t.then(s,()=>{}):this.setTimeout(s,1)}handleKeyDown(e){this.mouseused_=!1,super.handleKeyDown(e)}handleMouseDown(e){this.mouseused_=!0}};UB.prototype.controlText_="Play Video";at.registerComponent("BigPlayButton",UB);let Dne=class extends Ls{constructor(e,t){super(e,t),this.setIcon("cancel"),this.controlText(t&&t.controlText||this.localize("Close"))}buildCSSClass(){return`vjs-close-button ${super.buildCSSClass()}`}handleClick(e){this.trigger({type:"close",bubbles:!1})}handleKeyDown(e){e.key==="Escape"?(e.preventDefault(),e.stopPropagation(),this.trigger("click")):super.handleKeyDown(e)}};at.registerComponent("CloseButton",Dne);let $B=class extends Ls{constructor(e,t={}){super(e,t),t.replay=t.replay===void 0||t.replay,this.setIcon("play"),this.on(e,"play",r=>this.handlePlay(r)),this.on(e,"pause",r=>this.handlePause(r)),t.replay&&this.on(e,"ended",r=>this.handleEnded(r))}buildCSSClass(){return`vjs-play-control ${super.buildCSSClass()}`}handleClick(e){this.player_.paused()?Yl(this.player_.play()):this.player_.pause()}handleSeeked(e){this.removeClass("vjs-ended"),this.player_.paused()?this.handlePause(e):this.handlePlay(e)}handlePlay(e){this.removeClass("vjs-ended","vjs-paused"),this.addClass("vjs-playing"),this.setIcon("pause"),this.controlText("Pause")}handlePause(e){this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.setIcon("play"),this.controlText("Play")}handleEnded(e){this.removeClass("vjs-playing"),this.addClass("vjs-ended"),this.setIcon("replay"),this.controlText("Replay"),this.one(this.player_,"seeked",t=>this.handleSeeked(t))}};$B.prototype.controlText_="Play";at.registerComponent("PlayToggle",$B);let Bp=class extends at{constructor(e,t){super(e,t),this.on(e,["timeupdate","ended","seeking"],r=>this.update(r)),this.updateTextNode_()}createEl(){const e=this.buildCSSClass(),t=super.createEl("div",{className:`${e} vjs-time-control vjs-control`}),r=_r("span",{className:"vjs-control-text",textContent:`${this.localize(this.labelText_)}`},{role:"presentation"});return t.appendChild(r),this.contentEl_=_r("span",{className:`${e}-display`},{role:"presentation"}),t.appendChild(this.contentEl_),t}dispose(){this.contentEl_=null,this.textNode_=null,super.dispose()}update(e){!this.player_.options_.enableSmoothSeeking&&e.type==="seeking"||this.updateContent(e)}updateTextNode_(e=0){e=kh(e),this.formattedTime_!==e&&(this.formattedTime_=e,this.requestNamedAnimationFrame("TimeDisplay#updateTextNode_",()=>{if(!this.contentEl_)return;let t=this.textNode_;t&&this.contentEl_.firstChild!==t&&(t=null,Ur.warn("TimeDisplay#updateTextnode_: Prevented replacement of text node element since it was no longer a child of this node. Appending a new node instead.")),this.textNode_=Me.createTextNode(this.formattedTime_),this.textNode_&&(t?this.contentEl_.replaceChild(this.textNode_,t):this.contentEl_.appendChild(this.textNode_))}))}updateContent(e){}};Bp.prototype.labelText_="Time";Bp.prototype.controlText_="Time";at.registerComponent("TimeDisplay",Bp);let n2=class extends Bp{buildCSSClass(){return"vjs-current-time"}updateContent(e){let t;this.player_.ended()?t=this.player_.duration():t=this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime(),this.updateTextNode_(t)}};n2.prototype.labelText_="Current Time";n2.prototype.controlText_="Current Time";at.registerComponent("CurrentTimeDisplay",n2);let s2=class extends Bp{constructor(e,t){super(e,t);const r=n=>this.updateContent(n);this.on(e,"durationchange",r),this.on(e,"loadstart",r),this.on(e,"loadedmetadata",r)}buildCSSClass(){return"vjs-duration"}updateContent(e){const t=this.player_.duration();this.updateTextNode_(t)}};s2.prototype.labelText_="Duration";s2.prototype.controlText_="Duration";at.registerComponent("DurationDisplay",s2);let Pne=class extends at{createEl(){const e=super.createEl("div",{className:"vjs-time-control vjs-time-divider"},{"aria-hidden":!0}),t=super.createEl("div"),r=super.createEl("span",{textContent:"/"});return t.appendChild(r),e.appendChild(t),e}};at.registerComponent("TimeDivider",Pne);let a2=class extends Bp{constructor(e,t){super(e,t),this.on(e,"durationchange",r=>this.updateContent(r))}buildCSSClass(){return"vjs-remaining-time"}createEl(){const e=super.createEl();return this.options_.displayNegative!==!1&&e.insertBefore(_r("span",{},{"aria-hidden":!0},"-"),this.contentEl_),e}updateContent(e){if(typeof this.player_.duration()!="number")return;let t;this.player_.ended()?t=0:this.player_.remainingTimeDisplay?t=this.player_.remainingTimeDisplay():t=this.player_.remainingTime(),this.updateTextNode_(t)}};a2.prototype.labelText_="Remaining Time";a2.prototype.controlText_="Remaining Time";at.registerComponent("RemainingTimeDisplay",a2);let Rne=class extends at{constructor(e,t){super(e,t),this.updateShowing(),this.on(this.player(),"durationchange",r=>this.updateShowing(r))}createEl(){const e=super.createEl("div",{className:"vjs-live-control vjs-control"});return this.contentEl_=_r("div",{className:"vjs-live-display"},{"aria-live":"off"}),this.contentEl_.appendChild(_r("span",{className:"vjs-control-text",textContent:`${this.localize("Stream Type")}`})),this.contentEl_.appendChild(Me.createTextNode(this.localize("LIVE"))),e.appendChild(this.contentEl_),e}dispose(){this.contentEl_=null,super.dispose()}updateShowing(e){this.player().duration()===1/0?this.show():this.hide()}};at.registerComponent("LiveDisplay",Rne);let jB=class extends Ls{constructor(e,t){super(e,t),this.updateLiveEdgeStatus(),this.player_.liveTracker&&(this.updateLiveEdgeStatusHandler_=r=>this.updateLiveEdgeStatus(r),this.on(this.player_.liveTracker,"liveedgechange",this.updateLiveEdgeStatusHandler_))}createEl(){const e=super.createEl("button",{className:"vjs-seek-to-live-control vjs-control"});return this.setIcon("circle",e),this.textEl_=_r("span",{className:"vjs-seek-to-live-text",textContent:this.localize("LIVE")},{"aria-hidden":"true"}),e.appendChild(this.textEl_),e}updateLiveEdgeStatus(){!this.player_.liveTracker||this.player_.liveTracker.atLiveEdge()?(this.setAttribute("aria-disabled",!0),this.addClass("vjs-at-live-edge"),this.controlText("Seek to live, currently playing live")):(this.setAttribute("aria-disabled",!1),this.removeClass("vjs-at-live-edge"),this.controlText("Seek to live, currently behind live"))}handleClick(){this.player_.liveTracker.seekToLiveEdge()}dispose(){this.player_.liveTracker&&this.off(this.player_.liveTracker,"liveedgechange",this.updateLiveEdgeStatusHandler_),this.textEl_=null,super.dispose()}};jB.prototype.controlText_="Seek to live, currently playing live";at.registerComponent("SeekToLive",jB);function ng(i,e,t){return i=Number(i),Math.min(t,Math.max(e,isNaN(i)?e:i))}var Lne=Object.freeze({__proto__:null,clamp:ng});let o2=class extends at{constructor(e,t){super(e,t),this.handleMouseDown_=r=>this.handleMouseDown(r),this.handleMouseUp_=r=>this.handleMouseUp(r),this.handleKeyDown_=r=>this.handleKeyDown(r),this.handleClick_=r=>this.handleClick(r),this.handleMouseMove_=r=>this.handleMouseMove(r),this.update_=r=>this.update(r),this.bar=this.getChild(this.options_.barName),this.vertical(!!this.options_.vertical),this.enable()}enabled(){return this.enabled_}enable(){this.enabled()||(this.on("mousedown",this.handleMouseDown_),this.on("touchstart",this.handleMouseDown_),this.on("keydown",this.handleKeyDown_),this.on("click",this.handleClick_),this.on(this.player_,"controlsvisible",this.update),this.playerEvent&&this.on(this.player_,this.playerEvent,this.update),this.removeClass("disabled"),this.setAttribute("tabindex",0),this.enabled_=!0)}disable(){if(!this.enabled())return;const e=this.bar.el_.ownerDocument;this.off("mousedown",this.handleMouseDown_),this.off("touchstart",this.handleMouseDown_),this.off("keydown",this.handleKeyDown_),this.off("click",this.handleClick_),this.off(this.player_,"controlsvisible",this.update_),this.off(e,"mousemove",this.handleMouseMove_),this.off(e,"mouseup",this.handleMouseUp_),this.off(e,"touchmove",this.handleMouseMove_),this.off(e,"touchend",this.handleMouseUp_),this.removeAttribute("tabindex"),this.addClass("disabled"),this.playerEvent&&this.off(this.player_,this.playerEvent,this.update),this.enabled_=!1}createEl(e,t={},r={}){return t.className=t.className+" vjs-slider",t=Object.assign({tabIndex:0},t),r=Object.assign({role:"slider","aria-valuenow":0,"aria-valuemin":0,"aria-valuemax":100},r),super.createEl(e,t,r)}handleMouseDown(e){const t=this.bar.el_.ownerDocument;e.type==="mousedown"&&e.preventDefault(),e.type==="touchstart"&&!pu&&e.preventDefault(),fB(),this.addClass("vjs-sliding"),this.trigger("slideractive"),this.on(t,"mousemove",this.handleMouseMove_),this.on(t,"mouseup",this.handleMouseUp_),this.on(t,"touchmove",this.handleMouseMove_),this.on(t,"touchend",this.handleMouseUp_),this.handleMouseMove(e,!0)}handleMouseMove(e){}handleMouseUp(e){const t=this.bar.el_.ownerDocument;pB(),this.removeClass("vjs-sliding"),this.trigger("sliderinactive"),this.off(t,"mousemove",this.handleMouseMove_),this.off(t,"mouseup",this.handleMouseUp_),this.off(t,"touchmove",this.handleMouseMove_),this.off(t,"touchend",this.handleMouseUp_),this.update()}update(){if(!this.el_||!this.bar)return;const e=this.getProgress();return e===this.progress_||(this.progress_=e,this.requestNamedAnimationFrame("Slider#update",()=>{const t=this.vertical()?"height":"width";this.bar.el().style[t]=(e*100).toFixed(2)+"%"})),e}getProgress(){return Number(ng(this.getPercent(),0,1).toFixed(4))}calculateDistance(e){const t=aT(this.el_,e);return this.vertical()?t.y:t.x}handleKeyDown(e){const t=this.options_.playerOptions.spatialNavigation,r=t&&t.enabled,n=t&&t.horizontalSeek;r?n&&e.key==="ArrowLeft"||!n&&e.key==="ArrowDown"?(e.preventDefault(),e.stopPropagation(),this.stepBack()):n&&e.key==="ArrowRight"||!n&&e.key==="ArrowUp"?(e.preventDefault(),e.stopPropagation(),this.stepForward()):super.handleKeyDown(e):e.key==="ArrowLeft"||e.key==="ArrowDown"?(e.preventDefault(),e.stopPropagation(),this.stepBack()):e.key==="ArrowUp"||e.key==="ArrowRight"?(e.preventDefault(),e.stopPropagation(),this.stepForward()):super.handleKeyDown(e)}handleClick(e){e.stopPropagation(),e.preventDefault()}vertical(e){if(e===void 0)return this.vertical_||!1;this.vertical_=!!e,this.vertical_?this.addClass("vjs-slider-vertical"):this.addClass("vjs-slider-horizontal")}};at.registerComponent("Slider",o2);const GS=(i,e)=>ng(i/e*100,0,100).toFixed(2)+"%";let One=class extends at{constructor(e,t){super(e,t),this.partEls_=[],this.on(e,"progress",r=>this.update(r))}createEl(){const e=super.createEl("div",{className:"vjs-load-progress"}),t=_r("span",{className:"vjs-control-text"}),r=_r("span",{textContent:this.localize("Loaded")}),n=Me.createTextNode(": ");return this.percentageEl_=_r("span",{className:"vjs-control-text-loaded-percentage",textContent:"0%"}),e.appendChild(t),t.appendChild(r),t.appendChild(n),t.appendChild(this.percentageEl_),e}dispose(){this.partEls_=null,this.percentageEl_=null,super.dispose()}update(e){this.requestNamedAnimationFrame("LoadProgressBar#update",()=>{const t=this.player_.liveTracker,r=this.player_.buffered(),n=t&&t.isLive()?t.seekableEnd():this.player_.duration(),s=this.player_.bufferedEnd(),a=this.partEls_,o=GS(s,n);this.percent_!==o&&(this.el_.style.width=o,_d(this.percentageEl_,o),this.percent_=o);for(let l=0;l<r.length;l++){const u=r.start(l),c=r.end(l);let h=a[l];h||(h=this.el_.appendChild(_r()),a[l]=h),!(h.dataset.start===u&&h.dataset.end===c)&&(h.dataset.start=u,h.dataset.end=c,h.style.left=GS(u,s),h.style.width=GS(c-u,s))}for(let l=a.length;l>r.length;l--)this.el_.removeChild(a[l-1]);a.length=r.length})}};at.registerComponent("LoadProgressBar",One);let Mne=class extends at{constructor(e,t){super(e,t),this.update=mu(Ri(this,this.update),Fo)}createEl(){return super.createEl("div",{className:"vjs-time-tooltip"},{"aria-hidden":"true"})}update(e,t,r){const n=D0(this.el_),s=fp(this.player_.el()),a=e.width*t;if(!s||!n)return;let o=e.left-s.left+a,l=e.width-a+(s.right-e.right);l||(l=e.width-a,o=a);let u=n.width/2;o<u?u+=u-o:l<u&&(u=l),u<0?u=0:u>n.width&&(u=n.width),u=Math.round(u),this.el_.style.right=`-${u}px`,this.write(r)}write(e){_d(this.el_,e)}updateTime(e,t,r,n){this.requestNamedAnimationFrame("TimeTooltip#updateTime",()=>{let s;const a=this.player_.duration();if(this.player_.liveTracker&&this.player_.liveTracker.isLive()){const o=this.player_.liveTracker.liveWindow(),l=o-t*o;s=(l<1?"":"-")+kh(l,o)}else s=kh(r,a);this.update(e,t,s),n&&n()})}};at.registerComponent("TimeTooltip",Mne);let l2=class extends at{constructor(e,t){super(e,t),this.setIcon("circle"),this.update=mu(Ri(this,this.update),Fo)}createEl(){return super.createEl("div",{className:"vjs-play-progress vjs-slider-bar"},{"aria-hidden":"true"})}update(e,t){const r=this.getChild("timeTooltip");if(!r)return;const n=this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime();r.updateTime(e,t,n)}};l2.prototype.options_={children:[]};!ta&&!fu&&l2.prototype.options_.children.push("timeTooltip");at.registerComponent("PlayProgressBar",l2);let zB=class extends at{constructor(e,t){super(e,t),this.update=mu(Ri(this,this.update),Fo)}createEl(){return super.createEl("div",{className:"vjs-mouse-display"})}update(e,t){const r=t*this.player_.duration();this.getChild("timeTooltip").updateTime(e,t,r,()=>{this.el_.style.left=`${e.width*t}px`})}};zB.prototype.options_={children:["timeTooltip"]};at.registerComponent("MouseTimeDisplay",zB);const yv=5,eO=12;let u2=class extends o2{constructor(e,t){super(e,t),this.setEventHandlers_()}setEventHandlers_(){this.update_=Ri(this,this.update),this.update=mu(this.update_,Fo),this.on(this.player_,["durationchange","timeupdate"],this.update),this.on(this.player_,["ended"],this.update_),this.player_.liveTracker&&this.on(this.player_.liveTracker,"liveedgechange",this.update),this.updateInterval=null,this.enableIntervalHandler_=e=>this.enableInterval_(e),this.disableIntervalHandler_=e=>this.disableInterval_(e),this.on(this.player_,["playing"],this.enableIntervalHandler_),this.on(this.player_,["ended","pause","waiting"],this.disableIntervalHandler_),"hidden"in Me&&"visibilityState"in Me&&this.on(Me,"visibilitychange",this.toggleVisibility_)}toggleVisibility_(e){Me.visibilityState==="hidden"?(this.cancelNamedAnimationFrame("SeekBar#update"),this.cancelNamedAnimationFrame("Slider#update"),this.disableInterval_(e)):(!this.player_.ended()&&!this.player_.paused()&&this.enableInterval_(),this.update())}enableInterval_(){this.updateInterval||(this.updateInterval=this.setInterval(this.update,Fo))}disableInterval_(e){this.player_.liveTracker&&this.player_.liveTracker.isLive()&&e&&e.type!=="ended"||this.updateInterval&&(this.clearInterval(this.updateInterval),this.updateInterval=null)}createEl(){return super.createEl("div",{className:"vjs-progress-holder"},{"aria-label":this.localize("Progress Bar")})}update(e){if(Me.visibilityState==="hidden")return;const t=super.update();return this.requestNamedAnimationFrame("SeekBar#update",()=>{const r=this.player_.ended()?this.player_.duration():this.getCurrentTime_(),n=this.player_.liveTracker;let s=this.player_.duration();n&&n.isLive()&&(s=this.player_.liveTracker.liveCurrentTime()),this.percent_!==t&&(this.el_.setAttribute("aria-valuenow",(t*100).toFixed(2)),this.percent_=t),(this.currentTime_!==r||this.duration_!==s)&&(this.el_.setAttribute("aria-valuetext",this.localize("progress bar timing: currentTime={1} duration={2}",[kh(r,s),kh(s,s)],"{1} of {2}")),this.currentTime_=r,this.duration_=s),this.bar&&this.bar.update(fp(this.el()),this.getProgress())}),t}userSeek_(e){this.player_.liveTracker&&this.player_.liveTracker.isLive()&&this.player_.liveTracker.nextSeekedFromUser(),this.player_.currentTime(e)}getCurrentTime_(){return this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime()}getPercent(){const e=this.getCurrentTime_();let t;const r=this.player_.liveTracker;return r&&r.isLive()?(t=(e-r.seekableStart())/r.liveWindow(),r.atLiveEdge()&&(t=1)):t=e/this.player_.duration(),t}handleMouseDown(e){P0(e)&&(e.stopPropagation(),this.videoWasPlaying=!this.player_.paused(),this.player_.pause(),super.handleMouseDown(e))}handleMouseMove(e,t=!1){if(!P0(e)||isNaN(this.player_.duration()))return;!t&&!this.player_.scrubbing()&&this.player_.scrubbing(!0);let r;const n=this.calculateDistance(e),s=this.player_.liveTracker;if(!s||!s.isLive())r=n*this.player_.duration(),r===this.player_.duration()&&(r=r-.1);else{if(n>=.99){s.seekToLiveEdge();return}const a=s.seekableStart(),o=s.liveCurrentTime();if(r=a+n*s.liveWindow(),r>=o&&(r=o),r<=a&&(r=a+.1),r===1/0)return}this.userSeek_(r),this.player_.options_.enableSmoothSeeking&&this.update()}enable(){super.enable();const e=this.getChild("mouseTimeDisplay");e&&e.show()}disable(){super.disable();const e=this.getChild("mouseTimeDisplay");e&&e.hide()}handleMouseUp(e){super.handleMouseUp(e),e&&e.stopPropagation(),this.player_.scrubbing(!1),this.player_.trigger({type:"timeupdate",target:this,manuallyTriggered:!0}),this.videoWasPlaying?Yl(this.player_.play()):this.update_()}stepForward(){this.userSeek_(this.player_.currentTime()+yv)}stepBack(){this.userSeek_(this.player_.currentTime()-yv)}handleAction(e){this.player_.paused()?this.player_.play():this.player_.pause()}handleKeyDown(e){const t=this.player_.liveTracker;if(e.key===" "||e.key==="Enter")e.preventDefault(),e.stopPropagation(),this.handleAction(e);else if(e.key==="Home")e.preventDefault(),e.stopPropagation(),this.userSeek_(0);else if(e.key==="End")e.preventDefault(),e.stopPropagation(),t&&t.isLive()?this.userSeek_(t.liveCurrentTime()):this.userSeek_(this.player_.duration());else if(/^[0-9]$/.test(e.key)){e.preventDefault(),e.stopPropagation();const r=parseInt(e.key,10)*.1;t&&t.isLive()?this.userSeek_(t.seekableStart()+t.liveWindow()*r):this.userSeek_(this.player_.duration()*r)}else e.key==="PageDown"?(e.preventDefault(),e.stopPropagation(),this.userSeek_(this.player_.currentTime()-yv*eO)):e.key==="PageUp"?(e.preventDefault(),e.stopPropagation(),this.userSeek_(this.player_.currentTime()+yv*eO)):super.handleKeyDown(e)}dispose(){this.disableInterval_(),this.off(this.player_,["durationchange","timeupdate"],this.update),this.off(this.player_,["ended"],this.update_),this.player_.liveTracker&&this.off(this.player_.liveTracker,"liveedgechange",this.update),this.off(this.player_,["playing"],this.enableIntervalHandler_),this.off(this.player_,["ended","pause","waiting"],this.disableIntervalHandler_),"hidden"in Me&&"visibilityState"in Me&&this.off(Me,"visibilitychange",this.toggleVisibility_),super.dispose()}};u2.prototype.options_={children:["loadProgressBar","playProgressBar"],barName:"playProgressBar"};!ta&&!fu&&u2.prototype.options_.children.splice(1,0,"mouseTimeDisplay");at.registerComponent("SeekBar",u2);let HB=class extends at{constructor(e,t){super(e,t),this.handleMouseMove=mu(Ri(this,this.handleMouseMove),Fo),this.throttledHandleMouseSeek=mu(Ri(this,this.handleMouseSeek),Fo),this.handleMouseUpHandler_=r=>this.handleMouseUp(r),this.handleMouseDownHandler_=r=>this.handleMouseDown(r),this.enable()}createEl(){return super.createEl("div",{className:"vjs-progress-control vjs-control"})}handleMouseMove(e){const t=this.getChild("seekBar");if(!t)return;const r=t.getChild("playProgressBar"),n=t.getChild("mouseTimeDisplay");if(!r&&!n)return;const s=t.el(),a=D0(s);let o=aT(s,e).x;o=ng(o,0,1),n&&n.update(a,o),r&&r.update(a,t.getProgress())}handleMouseSeek(e){const t=this.getChild("seekBar");t&&t.handleMouseMove(e)}enabled(){return this.enabled_}disable(){if(this.children().forEach(e=>e.disable&&e.disable()),!!this.enabled()&&(this.off(["mousedown","touchstart"],this.handleMouseDownHandler_),this.off(this.el_,"mousemove",this.handleMouseMove),this.removeListenersAddedOnMousedownAndTouchstart(),this.addClass("disabled"),this.enabled_=!1,this.player_.scrubbing())){const e=this.getChild("seekBar");this.player_.scrubbing(!1),e.videoWasPlaying&&Yl(this.player_.play())}}enable(){this.children().forEach(e=>e.enable&&e.enable()),!this.enabled()&&(this.on(["mousedown","touchstart"],this.handleMouseDownHandler_),this.on(this.el_,"mousemove",this.handleMouseMove),this.removeClass("disabled"),this.enabled_=!0)}removeListenersAddedOnMousedownAndTouchstart(){const e=this.el_.ownerDocument;this.off(e,"mousemove",this.throttledHandleMouseSeek),this.off(e,"touchmove",this.throttledHandleMouseSeek),this.off(e,"mouseup",this.handleMouseUpHandler_),this.off(e,"touchend",this.handleMouseUpHandler_)}handleMouseDown(e){const t=this.el_.ownerDocument,r=this.getChild("seekBar");r&&r.handleMouseDown(e),this.on(t,"mousemove",this.throttledHandleMouseSeek),this.on(t,"touchmove",this.throttledHandleMouseSeek),this.on(t,"mouseup",this.handleMouseUpHandler_),this.on(t,"touchend",this.handleMouseUpHandler_)}handleMouseUp(e){const t=this.getChild("seekBar");t&&t.handleMouseUp(e),this.removeListenersAddedOnMousedownAndTouchstart()}};HB.prototype.options_={children:["seekBar"]};at.registerComponent("ProgressControl",HB);let VB=class extends Ls{constructor(e,t){super(e,t),this.setIcon("picture-in-picture-enter"),this.on(e,["enterpictureinpicture","leavepictureinpicture"],r=>this.handlePictureInPictureChange(r)),this.on(e,["disablepictureinpicturechanged","loadedmetadata"],r=>this.handlePictureInPictureEnabledChange(r)),this.on(e,["loadedmetadata","audioonlymodechange","audiopostermodechange"],()=>this.handlePictureInPictureAudioModeChange()),this.disable()}buildCSSClass(){return`vjs-picture-in-picture-control vjs-hidden ${super.buildCSSClass()}`}handlePictureInPictureAudioModeChange(){if(!(this.player_.currentType().substring(0,5)==="audio"||this.player_.audioPosterMode()||this.player_.audioOnlyMode())){this.show();return}this.player_.isInPictureInPicture()&&this.player_.exitPictureInPicture(),this.hide()}handlePictureInPictureEnabledChange(){Me.pictureInPictureEnabled&&this.player_.disablePictureInPicture()===!1||this.player_.options_.enableDocumentPictureInPicture&&"documentPictureInPicture"in X?this.enable():this.disable()}handlePictureInPictureChange(e){this.player_.isInPictureInPicture()?(this.setIcon("picture-in-picture-exit"),this.controlText("Exit Picture-in-Picture")):(this.setIcon("picture-in-picture-enter"),this.controlText("Picture-in-Picture")),this.handlePictureInPictureEnabledChange()}handleClick(e){this.player_.isInPictureInPicture()?this.player_.exitPictureInPicture():this.player_.requestPictureInPicture()}show(){typeof Me.exitPictureInPicture=="function"&&super.show()}};VB.prototype.controlText_="Picture-in-Picture";at.registerComponent("PictureInPictureToggle",VB);let qB=class extends Ls{constructor(e,t){super(e,t),this.setIcon("fullscreen-enter"),this.on(e,"fullscreenchange",r=>this.handleFullscreenChange(r)),Me[e.fsApi_.fullscreenEnabled]===!1&&this.disable()}buildCSSClass(){return`vjs-fullscreen-control ${super.buildCSSClass()}`}handleFullscreenChange(e){this.player_.isFullscreen()?(this.controlText("Exit Fullscreen"),this.setIcon("fullscreen-exit")):(this.controlText("Fullscreen"),this.setIcon("fullscreen-enter"))}handleClick(e){this.player_.isFullscreen()?this.player_.exitFullscreen():this.player_.requestFullscreen()}};qB.prototype.controlText_="Fullscreen";at.registerComponent("FullscreenToggle",qB);const Fne=function(i,e){e.tech_&&!e.tech_.featuresVolumeControl&&i.addClass("vjs-hidden"),i.on(e,"loadstart",function(){e.tech_.featuresVolumeControl?i.removeClass("vjs-hidden"):i.addClass("vjs-hidden")})};let Bne=class extends at{createEl(){const e=super.createEl("div",{className:"vjs-volume-level"});return this.setIcon("circle",e),e.appendChild(super.createEl("span",{className:"vjs-control-text"})),e}};at.registerComponent("VolumeLevel",Bne);let Nne=class extends at{constructor(e,t){super(e,t),this.update=mu(Ri(this,this.update),Fo)}createEl(){return super.createEl("div",{className:"vjs-volume-tooltip"},{"aria-hidden":"true"})}update(e,t,r,n){if(!r){const s=fp(this.el_),a=fp(this.player_.el()),o=e.width*t;if(!a||!s)return;const l=e.left-a.left+o,u=e.width-o+(a.right-e.right);let c=s.width/2;l<c?c+=c-l:u<c&&(c=u),c<0?c=0:c>s.width&&(c=s.width),this.el_.style.right=`-${c}px`}this.write(`${n}%`)}write(e){_d(this.el_,e)}updateVolume(e,t,r,n,s){this.requestNamedAnimationFrame("VolumeLevelTooltip#updateVolume",()=>{this.update(e,t,r,n.toFixed(0)),s&&s()})}};at.registerComponent("VolumeLevelTooltip",Nne);let WB=class extends at{constructor(e,t){super(e,t),this.update=mu(Ri(this,this.update),Fo)}createEl(){return super.createEl("div",{className:"vjs-mouse-display"})}update(e,t,r){const n=100*t;this.getChild("volumeLevelTooltip").updateVolume(e,t,r,n,()=>{r?this.el_.style.bottom=`${e.height*t}px`:this.el_.style.left=`${e.width*t}px`})}};WB.prototype.options_={children:["volumeLevelTooltip"]};at.registerComponent("MouseVolumeLevelDisplay",WB);let fT=class extends o2{constructor(e,t){super(e,t),this.on("slideractive",r=>this.updateLastVolume_(r)),this.on(e,"volumechange",r=>this.updateARIAAttributes(r)),e.ready(()=>this.updateARIAAttributes())}createEl(){return super.createEl("div",{className:"vjs-volume-bar vjs-slider-bar"},{"aria-label":this.localize("Volume Level"),"aria-live":"polite"})}handleMouseDown(e){P0(e)&&super.handleMouseDown(e)}handleMouseMove(e){const t=this.getChild("mouseVolumeLevelDisplay");if(t){const r=this.el(),n=fp(r),s=this.vertical();let a=aT(r,e);a=s?a.y:a.x,a=ng(a,0,1),t.update(n,a,s)}P0(e)&&(this.checkMuted(),this.player_.volume(this.calculateDistance(e)))}checkMuted(){this.player_.muted()&&this.player_.muted(!1)}getPercent(){return this.player_.muted()?0:this.player_.volume()}stepForward(){this.checkMuted(),this.player_.volume(this.player_.volume()+.1)}stepBack(){this.checkMuted(),this.player_.volume(this.player_.volume()-.1)}updateARIAAttributes(e){const t=this.player_.muted()?0:this.volumeAsPercentage_();this.el_.setAttribute("aria-valuenow",t),this.el_.setAttribute("aria-valuetext",t+"%")}volumeAsPercentage_(){return Math.round(this.player_.volume()*100)}updateLastVolume_(){const e=this.player_.volume();this.one("sliderinactive",()=>{this.player_.volume()===0&&this.player_.lastVolume_(e)})}};fT.prototype.options_={children:["volumeLevel"],barName:"volumeLevel"};!ta&&!fu&&fT.prototype.options_.children.splice(0,0,"mouseVolumeLevelDisplay");fT.prototype.playerEvent="volumechange";at.registerComponent("VolumeBar",fT);let GB=class extends at{constructor(e,t={}){t.vertical=t.vertical||!1,(typeof t.volumeBar>"u"||dp(t.volumeBar))&&(t.volumeBar=t.volumeBar||{},t.volumeBar.vertical=t.vertical),super(e,t),Fne(this,e),this.throttledHandleMouseMove=mu(Ri(this,this.handleMouseMove),Fo),this.handleMouseUpHandler_=r=>this.handleMouseUp(r),this.on("mousedown",r=>this.handleMouseDown(r)),this.on("touchstart",r=>this.handleMouseDown(r)),this.on("mousemove",r=>this.handleMouseMove(r)),this.on(this.volumeBar,["focus","slideractive"],()=>{this.volumeBar.addClass("vjs-slider-active"),this.addClass("vjs-slider-active"),this.trigger("slideractive")}),this.on(this.volumeBar,["blur","sliderinactive"],()=>{this.volumeBar.removeClass("vjs-slider-active"),this.removeClass("vjs-slider-active"),this.trigger("sliderinactive")})}createEl(){let e="vjs-volume-horizontal";return this.options_.vertical&&(e="vjs-volume-vertical"),super.createEl("div",{className:`vjs-volume-control vjs-control ${e}`})}handleMouseDown(e){const t=this.el_.ownerDocument;this.on(t,"mousemove",this.throttledHandleMouseMove),this.on(t,"touchmove",this.throttledHandleMouseMove),this.on(t,"mouseup",this.handleMouseUpHandler_),this.on(t,"touchend",this.handleMouseUpHandler_)}handleMouseUp(e){const t=this.el_.ownerDocument;this.off(t,"mousemove",this.throttledHandleMouseMove),this.off(t,"touchmove",this.throttledHandleMouseMove),this.off(t,"mouseup",this.handleMouseUpHandler_),this.off(t,"touchend",this.handleMouseUpHandler_)}handleMouseMove(e){this.volumeBar.handleMouseMove(e)}};GB.prototype.options_={children:["volumeBar"]};at.registerComponent("VolumeControl",GB);const Une=function(i,e){e.tech_&&!e.tech_.featuresMuteControl&&i.addClass("vjs-hidden"),i.on(e,"loadstart",function(){e.tech_.featuresMuteControl?i.removeClass("vjs-hidden"):i.addClass("vjs-hidden")})};let KB=class extends Ls{constructor(e,t){super(e,t),Une(this,e),this.on(e,["loadstart","volumechange"],r=>this.update(r))}buildCSSClass(){return`vjs-mute-control ${super.buildCSSClass()}`}handleClick(e){const t=this.player_.volume(),r=this.player_.lastVolume_();if(t===0){const n=r<.1?.1:r;this.player_.volume(n),this.player_.muted(!1)}else this.player_.muted(!this.player_.muted())}update(e){this.updateIcon_(),this.updateControlText_()}updateIcon_(){const e=this.player_.volume();let t=3;this.setIcon("volume-high"),ta&&this.player_.tech_&&this.player_.tech_.el_&&this.player_.muted(this.player_.tech_.el_.muted),e===0||this.player_.muted()?(this.setIcon("volume-mute"),t=0):e<.33?(this.setIcon("volume-low"),t=1):e<.67&&(this.setIcon("volume-medium"),t=2),nT(this.el_,[0,1,2,3].reduce((r,n)=>r+`${n?" ":""}vjs-vol-${n}`,"")),ph(this.el_,`vjs-vol-${t}`)}updateControlText_(){const t=this.player_.muted()||this.player_.volume()===0?"Unmute":"Mute";this.controlText()!==t&&this.controlText(t)}};KB.prototype.controlText_="Mute";at.registerComponent("MuteToggle",KB);let XB=class extends at{constructor(e,t={}){typeof t.inline<"u"?t.inline=t.inline:t.inline=!0,(typeof t.volumeControl>"u"||dp(t.volumeControl))&&(t.volumeControl=t.volumeControl||{},t.volumeControl.vertical=!t.inline),super(e,t),this.handleKeyPressHandler_=r=>this.handleKeyPress(r),this.on(e,["loadstart"],r=>this.volumePanelState_(r)),this.on(this.muteToggle,"keyup",r=>this.handleKeyPress(r)),this.on(this.volumeControl,"keyup",r=>this.handleVolumeControlKeyUp(r)),this.on("keydown",r=>this.handleKeyPress(r)),this.on("mouseover",r=>this.handleMouseOver(r)),this.on("mouseout",r=>this.handleMouseOut(r)),this.on(this.volumeControl,["slideractive"],this.sliderActive_),this.on(this.volumeControl,["sliderinactive"],this.sliderInactive_)}sliderActive_(){this.addClass("vjs-slider-active")}sliderInactive_(){this.removeClass("vjs-slider-active")}volumePanelState_(){this.volumeControl.hasClass("vjs-hidden")&&this.muteToggle.hasClass("vjs-hidden")&&this.addClass("vjs-hidden"),this.volumeControl.hasClass("vjs-hidden")&&!this.muteToggle.hasClass("vjs-hidden")&&this.addClass("vjs-mute-toggle-only")}createEl(){let e="vjs-volume-panel-horizontal";return this.options_.inline||(e="vjs-volume-panel-vertical"),super.createEl("div",{className:`vjs-volume-panel vjs-control ${e}`})}dispose(){this.handleMouseOut(),super.dispose()}handleVolumeControlKeyUp(e){e.key==="Escape"&&this.muteToggle.focus()}handleMouseOver(e){this.addClass("vjs-hover"),no(Me,"keyup",this.handleKeyPressHandler_)}handleMouseOut(e){this.removeClass("vjs-hover"),Rs(Me,"keyup",this.handleKeyPressHandler_)}handleKeyPress(e){e.key==="Escape"&&this.handleMouseOut()}};XB.prototype.options_={children:["muteToggle","volumeControl"]};at.registerComponent("VolumePanel",XB);class YB extends Ls{constructor(e,t){super(e,t),this.validOptions=[5,10,30],this.skipTime=this.getSkipForwardTime(),this.skipTime&&this.validOptions.includes(this.skipTime)?(this.setIcon(`forward-${this.skipTime}`),this.controlText(this.localize("Skip forward {1} seconds",[this.skipTime.toLocaleString(e.language())])),this.show()):this.hide()}getSkipForwardTime(){const e=this.options_.playerOptions;return e.controlBar&&e.controlBar.skipButtons&&e.controlBar.skipButtons.forward}buildCSSClass(){return`vjs-skip-forward-${this.getSkipForwardTime()} ${super.buildCSSClass()}`}handleClick(e){if(isNaN(this.player_.duration()))return;const t=this.player_.currentTime(),r=this.player_.liveTracker,n=r&&r.isLive()?r.seekableEnd():this.player_.duration();let s;t+this.skipTime<=n?s=t+this.skipTime:s=n,this.player_.currentTime(s)}handleLanguagechange(){this.controlText(this.localize("Skip forward {1} seconds",[this.skipTime]))}}YB.prototype.controlText_="Skip Forward";at.registerComponent("SkipForward",YB);class QB extends Ls{constructor(e,t){super(e,t),this.validOptions=[5,10,30],this.skipTime=this.getSkipBackwardTime(),this.skipTime&&this.validOptions.includes(this.skipTime)?(this.setIcon(`replay-${this.skipTime}`),this.controlText(this.localize("Skip backward {1} seconds",[this.skipTime.toLocaleString(e.language())])),this.show()):this.hide()}getSkipBackwardTime(){const e=this.options_.playerOptions;return e.controlBar&&e.controlBar.skipButtons&&e.controlBar.skipButtons.backward}buildCSSClass(){return`vjs-skip-backward-${this.getSkipBackwardTime()} ${super.buildCSSClass()}`}handleClick(e){const t=this.player_.currentTime(),r=this.player_.liveTracker,n=r&&r.isLive()&&r.seekableStart();let s;n&&t-this.skipTime<=n?s=n:t>=this.skipTime?s=t-this.skipTime:s=0,this.player_.currentTime(s)}handleLanguagechange(){this.controlText(this.localize("Skip backward {1} seconds",[this.skipTime]))}}QB.prototype.controlText_="Skip Backward";at.registerComponent("SkipBackward",QB);let JB=class extends at{constructor(e,t){super(e,t),t&&(this.menuButton_=t.menuButton),this.focusedChild_=-1,this.on("keydown",r=>this.handleKeyDown(r)),this.boundHandleBlur_=r=>this.handleBlur(r),this.boundHandleTapClick_=r=>this.handleTapClick(r)}addEventListenerForItem(e){e instanceof at&&(this.on(e,"blur",this.boundHandleBlur_),this.on(e,["tap","click"],this.boundHandleTapClick_))}removeEventListenerForItem(e){e instanceof at&&(this.off(e,"blur",this.boundHandleBlur_),this.off(e,["tap","click"],this.boundHandleTapClick_))}removeChild(e){typeof e=="string"&&(e=this.getChild(e)),this.removeEventListenerForItem(e),super.removeChild(e)}addItem(e){const t=this.addChild(e);t&&this.addEventListenerForItem(t)}createEl(){const e=this.options_.contentElType||"ul";this.contentEl_=_r(e,{className:"vjs-menu-content"}),this.contentEl_.setAttribute("role","menu");const t=super.createEl("div",{append:this.contentEl_,className:"vjs-menu"});return t.appendChild(this.contentEl_),no(t,"click",function(r){r.preventDefault(),r.stopImmediatePropagation()}),t}dispose(){this.contentEl_=null,this.boundHandleBlur_=null,this.boundHandleTapClick_=null,super.dispose()}handleBlur(e){const t=e.relatedTarget||Me.activeElement;if(!this.children().some(r=>r.el()===t)){const r=this.menuButton_;r&&r.buttonPressed_&&t!==r.el().firstChild&&r.unpressButton()}}handleTapClick(e){if(this.menuButton_){this.menuButton_.unpressButton();const t=this.children();if(!Array.isArray(t))return;const r=t.filter(n=>n.el()===e.target)[0];if(!r)return;r.name()!=="CaptionSettingsMenuItem"&&this.menuButton_.focus()}}handleKeyDown(e){e.key==="ArrowLeft"||e.key==="ArrowDown"?(e.preventDefault(),e.stopPropagation(),this.stepForward()):(e.key==="ArrowRight"||e.key==="ArrowUp")&&(e.preventDefault(),e.stopPropagation(),this.stepBack())}stepForward(){let e=0;this.focusedChild_!==void 0&&(e=this.focusedChild_+1),this.focus(e)}stepBack(){let e=0;this.focusedChild_!==void 0&&(e=this.focusedChild_-1),this.focus(e)}focus(e=0){const t=this.children().slice();t.length&&t[0].hasClass("vjs-menu-title")&&t.shift(),t.length>0&&(e<0?e=0:e>=t.length&&(e=t.length-1),this.focusedChild_=e,t[e].el_.focus())}};at.registerComponent("Menu",JB);let c2=class extends at{constructor(e,t={}){super(e,t),this.menuButton_=new Ls(e,t),this.menuButton_.controlText(this.controlText_),this.menuButton_.el_.setAttribute("aria-haspopup","true");const r=Ls.prototype.buildCSSClass();this.menuButton_.el_.className=this.buildCSSClass()+" "+r,this.menuButton_.removeClass("vjs-control"),this.addChild(this.menuButton_),this.update(),this.enabled_=!0;const n=s=>this.handleClick(s);this.handleMenuKeyUp_=s=>this.handleMenuKeyUp(s),this.on(this.menuButton_,"tap",n),this.on(this.menuButton_,"click",n),this.on(this.menuButton_,"keydown",s=>this.handleKeyDown(s)),this.on(this.menuButton_,"mouseenter",()=>{this.addClass("vjs-hover"),this.menu.show(),no(Me,"keyup",this.handleMenuKeyUp_)}),this.on("mouseleave",s=>this.handleMouseLeave(s)),this.on("keydown",s=>this.handleSubmenuKeyDown(s))}update(){const e=this.createMenu();this.menu&&(this.menu.dispose(),this.removeChild(this.menu)),this.menu=e,this.addChild(e),this.buttonPressed_=!1,this.menuButton_.el_.setAttribute("aria-expanded","false"),this.items&&this.items.length<=this.hideThreshold_?(this.hide(),this.menu.contentEl_.removeAttribute("role")):(this.show(),this.menu.contentEl_.setAttribute("role","menu"))}createMenu(){const e=new JB(this.player_,{menuButton:this});if(this.hideThreshold_=0,this.options_.title){const t=_r("li",{className:"vjs-menu-title",textContent:nn(this.options_.title),tabIndex:-1}),r=new at(this.player_,{el:t});e.addItem(r)}if(this.items=this.createItems(),this.items)for(let t=0;t<this.items.length;t++)e.addItem(this.items[t]);return e}createItems(){}createEl(){return super.createEl("div",{className:this.buildWrapperCSSClass()},{})}setIcon(e){super.setIcon(e,this.menuButton_.el_)}buildWrapperCSSClass(){let e="vjs-menu-button";this.options_.inline===!0?e+="-inline":e+="-popup";const t=Ls.prototype.buildCSSClass();return`vjs-menu-button ${e} ${t} ${super.buildCSSClass()}`}buildCSSClass(){let e="vjs-menu-button";return this.options_.inline===!0?e+="-inline":e+="-popup",`vjs-menu-button ${e} ${super.buildCSSClass()}`}controlText(e,t=this.menuButton_.el()){return this.menuButton_.controlText(e,t)}dispose(){this.handleMouseLeave(),super.dispose()}handleClick(e){this.buttonPressed_?this.unpressButton():this.pressButton()}handleMouseLeave(e){this.removeClass("vjs-hover"),Rs(Me,"keyup",this.handleMenuKeyUp_)}focus(){this.menuButton_.focus()}blur(){this.menuButton_.blur()}handleKeyDown(e){e.key==="Esc"||e.key==="Tab"?(this.buttonPressed_&&this.unpressButton(),!e.key==="Tab"&&(e.preventDefault(),this.menuButton_.focus())):(e.key==="Up"||e.key==="Down"&&!(this.player_.options_.playerOptions.spatialNavigation&&this.player_.options_.playerOptions.spatialNavigation.enabled))&&(this.buttonPressed_||(e.preventDefault(),this.pressButton()))}handleMenuKeyUp(e){(e.key==="Esc"||e.key==="Tab")&&this.removeClass("vjs-hover")}handleSubmenuKeyPress(e){this.handleSubmenuKeyDown(e)}handleSubmenuKeyDown(e){(e.key==="Esc"||e.key==="Tab")&&(this.buttonPressed_&&this.unpressButton(),!e.key==="Tab"&&(e.preventDefault(),this.menuButton_.focus()))}pressButton(){if(this.enabled_){if(this.buttonPressed_=!0,this.menu.show(),this.menu.lockShowing(),this.menuButton_.el_.setAttribute("aria-expanded","true"),ta&&lB())return;this.menu.focus()}}unpressButton(){this.enabled_&&(this.buttonPressed_=!1,this.menu.unlockShowing(),this.menu.hide(),this.menuButton_.el_.setAttribute("aria-expanded","false"))}disable(){this.unpressButton(),this.enabled_=!1,this.addClass("vjs-disabled"),this.menuButton_.disable()}enable(){this.enabled_=!0,this.removeClass("vjs-disabled"),this.menuButton_.enable()}};at.registerComponent("MenuButton",c2);let d2=class extends c2{constructor(e,t){const r=t.tracks;if(super(e,t),this.items.length<=1&&this.hide(),!r)return;const n=Ri(this,this.update);r.addEventListener("removetrack",n),r.addEventListener("addtrack",n),r.addEventListener("labelchange",n),this.player_.on("ready",n),this.player_.on("dispose",function(){r.removeEventListener("removetrack",n),r.removeEventListener("addtrack",n),r.removeEventListener("labelchange",n)})}};at.registerComponent("TrackButton",d2);let sg=class extends hT{constructor(e,t){super(e,t),this.selectable=t.selectable,this.isSelected_=t.selected||!1,this.multiSelectable=t.multiSelectable,this.selected(this.isSelected_),this.selectable?this.multiSelectable?this.el_.setAttribute("role","menuitemcheckbox"):this.el_.setAttribute("role","menuitemradio"):this.el_.setAttribute("role","menuitem")}createEl(e,t,r){this.nonIconControl=!0;const n=super.createEl("li",Object.assign({className:"vjs-menu-item",tabIndex:-1},t),r),s=_r("span",{className:"vjs-menu-item-text",textContent:this.localize(this.options_.label)});return this.player_.options_.experimentalSvgIcons?n.appendChild(s):n.replaceChild(s,n.querySelector(".vjs-icon-placeholder")),n}handleKeyDown(e){["Tab","Escape","ArrowUp","ArrowLeft","ArrowRight","ArrowDown"].includes(e.key)||super.handleKeyDown(e)}handleClick(e){this.selected(!0)}selected(e){this.selectable&&(e?(this.addClass("vjs-selected"),this.el_.setAttribute("aria-checked","true"),this.controlText(", selected"),this.isSelected_=!0):(this.removeClass("vjs-selected"),this.el_.setAttribute("aria-checked","false"),this.controlText(""),this.isSelected_=!1))}};at.registerComponent("MenuItem",sg);let ag=class extends sg{constructor(e,t){const r=t.track,n=e.textTracks();t.label=r.label||r.language||"Unknown",t.selected=r.mode==="showing",super(e,t),this.track=r,this.kinds=(t.kinds||[t.kind||this.track.kind]).filter(Boolean);const s=(...o)=>{this.handleTracksChange.apply(this,o)},a=(...o)=>{this.handleSelectedLanguageChange.apply(this,o)};if(e.on(["loadstart","texttrackchange"],s),n.addEventListener("change",s),n.addEventListener("selectedlanguagechange",a),this.on("dispose",function(){e.off(["loadstart","texttrackchange"],s),n.removeEventListener("change",s),n.removeEventListener("selectedlanguagechange",a)}),n.onchange===void 0){let o;this.on(["tap","click"],function(){if(typeof X.Event!="object")try{o=new X.Event("change")}catch{}o||(o=Me.createEvent("Event"),o.initEvent("change",!0,!0)),n.dispatchEvent(o)})}this.handleTracksChange()}handleClick(e){const t=this.track,r=this.player_.textTracks();if(super.handleClick(e),!!r)for(let n=0;n<r.length;n++){const s=r[n];this.kinds.indexOf(s.kind)!==-1&&(s===t?s.mode!=="showing"&&(s.mode="showing"):s.mode!=="disabled"&&(s.mode="disabled"))}}handleTracksChange(e){const t=this.track.mode==="showing";t!==this.isSelected_&&this.selected(t)}handleSelectedLanguageChange(e){if(this.track.mode==="showing"){const t=this.player_.cache_.selectedLanguage;if(t&&t.enabled&&t.language===this.track.language&&t.kind!==this.track.kind)return;this.player_.cache_.selectedLanguage={enabled:!0,language:this.track.language,kind:this.track.kind}}}dispose(){this.track=null,super.dispose()}};at.registerComponent("TextTrackMenuItem",ag);let ZB=class extends ag{constructor(e,t){t.track={player:e,kind:t.kind,kinds:t.kinds,default:!1,mode:"disabled"},t.kinds||(t.kinds=[t.kind]),t.label?t.track.label=t.label:t.track.label=t.kinds.join(" and ")+" off",t.selectable=!0,t.multiSelectable=!1,super(e,t)}handleTracksChange(e){const t=this.player().textTracks();let r=!0;for(let n=0,s=t.length;n<s;n++){const a=t[n];if(this.options_.kinds.indexOf(a.kind)>-1&&a.mode==="showing"){r=!1;break}}r!==this.isSelected_&&this.selected(r)}handleSelectedLanguageChange(e){const t=this.player().textTracks();let r=!0;for(let n=0,s=t.length;n<s;n++){const a=t[n];if(["captions","descriptions","subtitles"].indexOf(a.kind)>-1&&a.mode==="showing"){r=!1;break}}r&&(this.player_.cache_.selectedLanguage={enabled:!1})}handleLanguagechange(){this.$(".vjs-menu-item-text").textContent=this.player_.localize(this.options_.label),super.handleLanguagechange()}};at.registerComponent("OffTextTrackMenuItem",ZB);let Np=class extends d2{constructor(e,t={}){t.tracks=e.textTracks(),super(e,t)}createItems(e=[],t=ag){let r;this.label_&&(r=`${this.label_} off`),e.push(new ZB(this.player_,{kinds:this.kinds_,kind:this.kind_,label:r})),this.hideThreshold_+=1;const n=this.player_.textTracks();Array.isArray(this.kinds_)||(this.kinds_=[this.kind_]);for(let s=0;s<n.length;s++){const a=n[s];if(this.kinds_.indexOf(a.kind)>-1){const o=new t(this.player_,{track:a,kinds:this.kinds_,kind:this.kind_,selectable:!0,multiSelectable:!1});o.addClass(`vjs-${a.kind}-menu-item`),e.push(o)}}return e}};at.registerComponent("TextTrackButton",Np);let eN=class extends sg{constructor(e,t){const r=t.track,n=t.cue,s=e.currentTime();t.selectable=!0,t.multiSelectable=!1,t.label=n.text,t.selected=n.startTime<=s&&s<n.endTime,super(e,t),this.track=r,this.cue=n}handleClick(e){super.handleClick(),this.player_.currentTime(this.cue.startTime)}};at.registerComponent("ChaptersTrackMenuItem",eN);let h2=class extends Np{constructor(e,t,r){super(e,t,r),this.setIcon("chapters"),this.selectCurrentItem_=()=>{this.items.forEach(n=>{n.selected(this.track_.activeCues[0]===n.cue)})}}buildCSSClass(){return`vjs-chapters-button ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-chapters-button ${super.buildWrapperCSSClass()}`}update(e){if(e&&e.track&&e.track.kind!=="chapters")return;const t=this.findChaptersTrack();t!==this.track_?(this.setTrack(t),super.update()):(!this.items||t&&t.cues&&t.cues.length!==this.items.length)&&super.update()}setTrack(e){if(this.track_!==e){if(this.updateHandler_||(this.updateHandler_=this.update.bind(this)),this.track_){const t=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_);t&&t.removeEventListener("load",this.updateHandler_),this.track_.removeEventListener("cuechange",this.selectCurrentItem_),this.track_=null}if(this.track_=e,this.track_){this.track_.mode="hidden";const t=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_);t&&t.addEventListener("load",this.updateHandler_),this.track_.addEventListener("cuechange",this.selectCurrentItem_)}}}findChaptersTrack(){const e=this.player_.textTracks()||[];for(let t=e.length-1;t>=0;t--){const r=e[t];if(r.kind===this.kind_)return r}}getMenuCaption(){return this.track_&&this.track_.label?this.track_.label:this.localize(nn(this.kind_))}createMenu(){return this.options_.title=this.getMenuCaption(),super.createMenu()}createItems(){const e=[];if(!this.track_)return e;const t=this.track_.cues;if(!t)return e;for(let r=0,n=t.length;r<n;r++){const s=t[r],a=new eN(this.player_,{track:this.track_,cue:s});e.push(a)}return e}};h2.prototype.kind_="chapters";h2.prototype.controlText_="Chapters";at.registerComponent("ChaptersButton",h2);let f2=class extends Np{constructor(e,t,r){super(e,t,r),this.setIcon("audio-description");const n=e.textTracks(),s=Ri(this,this.handleTracksChange);n.addEventListener("change",s),this.on("dispose",function(){n.removeEventListener("change",s)})}handleTracksChange(e){const t=this.player().textTracks();let r=!1;for(let n=0,s=t.length;n<s;n++){const a=t[n];if(a.kind!==this.kind_&&a.mode==="showing"){r=!0;break}}r?this.disable():this.enable()}buildCSSClass(){return`vjs-descriptions-button ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-descriptions-button ${super.buildWrapperCSSClass()}`}};f2.prototype.kind_="descriptions";f2.prototype.controlText_="Descriptions";at.registerComponent("DescriptionsButton",f2);let p2=class extends Np{constructor(e,t,r){super(e,t,r),this.setIcon("subtitles")}buildCSSClass(){return`vjs-subtitles-button ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-subtitles-button ${super.buildWrapperCSSClass()}`}};p2.prototype.kind_="subtitles";p2.prototype.controlText_="Subtitles";at.registerComponent("SubtitlesButton",p2);let m2=class extends ag{constructor(e,t){t.track={player:e,kind:t.kind,label:t.kind+" settings",selectable:!1,default:!1,mode:"disabled"},t.selectable=!1,t.name="CaptionSettingsMenuItem",super(e,t),this.addClass("vjs-texttrack-settings"),this.controlText(", opens "+t.kind+" settings dialog")}handleClick(e){this.player().getChild("textTrackSettings").open()}handleLanguagechange(){this.$(".vjs-menu-item-text").textContent=this.player_.localize(this.options_.kind+" settings"),super.handleLanguagechange()}};at.registerComponent("CaptionSettingsMenuItem",m2);let g2=class extends Np{constructor(e,t,r){super(e,t,r),this.setIcon("captions")}buildCSSClass(){return`vjs-captions-button ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-captions-button ${super.buildWrapperCSSClass()}`}createItems(){const e=[];return!(this.player().tech_&&this.player().tech_.featuresNativeTextTracks)&&this.player().getChild("textTrackSettings")&&(e.push(new m2(this.player_,{kind:this.kind_})),this.hideThreshold_+=1),super.createItems(e)}};g2.prototype.kind_="captions";g2.prototype.controlText_="Captions";at.registerComponent("CaptionsButton",g2);let tN=class extends ag{createEl(e,t,r){const n=super.createEl(e,t,r),s=n.querySelector(".vjs-menu-item-text");return this.options_.track.kind==="captions"&&(this.player_.options_.experimentalSvgIcons?this.setIcon("captions",n):s.appendChild(_r("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),s.appendChild(_r("span",{className:"vjs-control-text",textContent:` ${this.localize("Captions")}`}))),n}};at.registerComponent("SubsCapsMenuItem",tN);let v2=class extends Np{constructor(e,t={}){super(e,t),this.label_="subtitles",this.setIcon("subtitles"),["en","en-us","en-ca","fr-ca"].indexOf(this.player_.language_)>-1&&(this.label_="captions",this.setIcon("captions")),this.menuButton_.controlText(nn(this.label_))}buildCSSClass(){return`vjs-subs-caps-button ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-subs-caps-button ${super.buildWrapperCSSClass()}`}createItems(){let e=[];return!(this.player().tech_&&this.player().tech_.featuresNativeTextTracks)&&this.player().getChild("textTrackSettings")&&(e.push(new m2(this.player_,{kind:this.label_})),this.hideThreshold_+=1),e=super.createItems(e,tN),e}};v2.prototype.kinds_=["captions","subtitles"];v2.prototype.controlText_="Subtitles";at.registerComponent("SubsCapsButton",v2);let rN=class extends sg{constructor(e,t){const r=t.track,n=e.audioTracks();t.label=r.label||r.language||"Unknown",t.selected=r.enabled,super(e,t),this.track=r,this.addClass(`vjs-${r.kind}-menu-item`);const s=(...a)=>{this.handleTracksChange.apply(this,a)};n.addEventListener("change",s),this.on("dispose",()=>{n.removeEventListener("change",s)})}createEl(e,t,r){const n=super.createEl(e,t,r),s=n.querySelector(".vjs-menu-item-text");return["main-desc","descriptions"].indexOf(this.options_.track.kind)>=0&&(s.appendChild(_r("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),s.appendChild(_r("span",{className:"vjs-control-text",textContent:" "+this.localize("Descriptions")}))),n}handleClick(e){if(super.handleClick(e),this.track.enabled=!0,this.player_.tech_.featuresNativeAudioTracks){const t=this.player_.audioTracks();for(let r=0;r<t.length;r++){const n=t[r];n!==this.track&&(n.enabled=n===this.track)}}}handleTracksChange(e){this.selected(this.track.enabled)}};at.registerComponent("AudioTrackMenuItem",rN);let iN=class extends d2{constructor(e,t={}){t.tracks=e.audioTracks(),super(e,t),this.setIcon("audio")}buildCSSClass(){return`vjs-audio-button ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-audio-button ${super.buildWrapperCSSClass()}`}createItems(e=[]){this.hideThreshold_=1;const t=this.player_.audioTracks();for(let r=0;r<t.length;r++){const n=t[r];e.push(new rN(this.player_,{track:n,selectable:!0,multiSelectable:!1}))}return e}};iN.prototype.controlText_="Audio Track";at.registerComponent("AudioTrackButton",iN);let y2=class extends sg{constructor(e,t){const r=t.rate,n=parseFloat(r,10);t.label=r,t.selected=n===e.playbackRate(),t.selectable=!0,t.multiSelectable=!1,super(e,t),this.label=r,this.rate=n,this.on(e,"ratechange",s=>this.update(s))}handleClick(e){super.handleClick(),this.player().playbackRate(this.rate)}update(e){this.selected(this.player().playbackRate()===this.rate)}};y2.prototype.contentElType="button";at.registerComponent("PlaybackRateMenuItem",y2);let nN=class extends c2{constructor(e,t){super(e,t),this.menuButton_.el_.setAttribute("aria-describedby",this.labelElId_),this.updateVisibility(),this.updateLabel(),this.on(e,"loadstart",r=>this.updateVisibility(r)),this.on(e,"ratechange",r=>this.updateLabel(r)),this.on(e,"playbackrateschange",r=>this.handlePlaybackRateschange(r))}createEl(){const e=super.createEl();return this.labelElId_="vjs-playback-rate-value-label-"+this.id_,this.labelEl_=_r("div",{className:"vjs-playback-rate-value",id:this.labelElId_,textContent:"1x"}),e.appendChild(this.labelEl_),e}dispose(){this.labelEl_=null,super.dispose()}buildCSSClass(){return`vjs-playback-rate ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-playback-rate ${super.buildWrapperCSSClass()}`}createItems(){const e=this.playbackRates(),t=[];for(let r=e.length-1;r>=0;r--)t.push(new y2(this.player(),{rate:e[r]+"x"}));return t}handlePlaybackRateschange(e){this.update()}playbackRates(){const e=this.player();return e.playbackRates&&e.playbackRates()||[]}playbackRateSupported(){return this.player().tech_&&this.player().tech_.featuresPlaybackRate&&this.playbackRates()&&this.playbackRates().length>0}updateVisibility(e){this.playbackRateSupported()?this.removeClass("vjs-hidden"):this.addClass("vjs-hidden")}updateLabel(e){this.playbackRateSupported()&&(this.labelEl_.textContent=this.player().playbackRate()+"x")}};nN.prototype.controlText_="Playback Rate";at.registerComponent("PlaybackRateMenuButton",nN);let sN=class extends at{buildCSSClass(){return`vjs-spacer ${super.buildCSSClass()}`}createEl(e="div",t={},r={}){return t.className||(t.className=this.buildCSSClass()),super.createEl(e,t,r)}};at.registerComponent("Spacer",sN);let $ne=class extends sN{buildCSSClass(){return`vjs-custom-control-spacer ${super.buildCSSClass()}`}createEl(){return super.createEl("div",{className:this.buildCSSClass(),textContent:""})}};at.registerComponent("CustomControlSpacer",$ne);let aN=class extends at{createEl(){return super.createEl("div",{className:"vjs-control-bar",dir:"ltr"})}};aN.prototype.options_={children:["playToggle","skipBackward","skipForward","volumePanel","currentTimeDisplay","timeDivider","durationDisplay","progressControl","liveDisplay","seekToLive","remainingTimeDisplay","customControlSpacer","playbackRateMenuButton","chaptersButton","descriptionsButton","subsCapsButton","audioTrackButton","pictureInPictureToggle","fullscreenToggle"]};at.registerComponent("ControlBar",aN);let oN=class extends Mp{constructor(e,t){super(e,t),this.on(e,"error",r=>{this.open(r)})}buildCSSClass(){return`vjs-error-display ${super.buildCSSClass()}`}content(){const e=this.player().error();return e?this.localize(e.message):""}};oN.prototype.options_=Object.assign({},Mp.prototype.options_,{pauseOnOpen:!1,fillAlways:!0,temporary:!1,uncloseable:!0});at.registerComponent("ErrorDisplay",oN);class lN extends at{constructor(e,t={}){super(e,t),this.el_.setAttribute("aria-labelledby",this.selectLabelledbyIds)}createEl(){return this.selectLabelledbyIds=[this.options_.legendId,this.options_.labelId].join(" ").trim(),_r("select",{id:this.options_.id},{},this.options_.SelectOptions.map(t=>{const r=(this.options_.labelId?this.options_.labelId:`vjs-track-option-${Mo()}`)+"-"+t[1].replace(/\W+/g,""),n=_r("option",{id:r,value:this.localize(t[0]),textContent:t[1]});return n.setAttribute("aria-labelledby",`${this.selectLabelledbyIds} ${r}`),n}))}}at.registerComponent("TextTrackSelect",lN);class gh extends at{constructor(e,t={}){super(e,t);const r=_r("legend",{textContent:this.localize(this.options_.legendText),id:this.options_.legendId});this.el().appendChild(r);const n=this.options_.selects;for(const s of n){const a=this.options_.selectConfigs[s],o=a.className,l=a.id.replace("%s",this.options_.id_);let u=null;const c=`vjs_select_${Mo()}`;if(this.options_.type==="colors"){u=_r("span",{className:o});const m=_r("label",{id:l,className:"vjs-label",textContent:a.label});m.setAttribute("for",c),u.appendChild(m)}const h=new lN(e,{SelectOptions:a.options,legendId:this.options_.legendId,id:c,labelId:l});this.addChild(h),this.options_.type==="colors"&&(u.appendChild(h.el()),this.el().appendChild(u))}}createEl(){return _r("fieldset",{className:this.options_.className})}}at.registerComponent("TextTrackFieldset",gh);class uN extends at{constructor(e,t={}){super(e,t);const r=this.options_.textTrackComponentid,n=new gh(e,{id_:r,legendId:`captions-text-legend-${r}`,legendText:this.localize("Text"),className:"vjs-fg vjs-track-setting",selects:this.options_.fieldSets[0],selectConfigs:this.options_.selectConfigs,type:"colors"});this.addChild(n);const s=new gh(e,{id_:r,legendId:`captions-background-${r}`,legendText:this.localize("Text Background"),className:"vjs-bg vjs-track-setting",selects:this.options_.fieldSets[1],selectConfigs:this.options_.selectConfigs,type:"colors"});this.addChild(s);const a=new gh(e,{id_:r,legendId:`captions-window-${r}`,legendText:this.localize("Caption Area Background"),className:"vjs-window vjs-track-setting",selects:this.options_.fieldSets[2],selectConfigs:this.options_.selectConfigs,type:"colors"});this.addChild(a)}createEl(){return _r("div",{className:"vjs-track-settings-colors"})}}at.registerComponent("TextTrackSettingsColors",uN);class cN extends at{constructor(e,t={}){super(e,t);const r=this.options_.textTrackComponentid,n=new gh(e,{id_:r,legendId:`captions-font-size-${r}`,legendText:"Font Size",className:"vjs-font-percent vjs-track-setting",selects:this.options_.fieldSets[0],selectConfigs:this.options_.selectConfigs,type:"font"});this.addChild(n);const s=new gh(e,{id_:r,legendId:`captions-edge-style-${r}`,legendText:this.localize("Text Edge Style"),className:"vjs-edge-style vjs-track-setting",selects:this.options_.fieldSets[1],selectConfigs:this.options_.selectConfigs,type:"font"});this.addChild(s);const a=new gh(e,{id_:r,legendId:`captions-font-family-${r}`,legendText:this.localize("Font Family"),className:"vjs-font-family vjs-track-setting",selects:this.options_.fieldSets[2],selectConfigs:this.options_.selectConfigs,type:"font"});this.addChild(a)}createEl(){return _r("div",{className:"vjs-track-settings-font"})}}at.registerComponent("TextTrackSettingsFont",cN);class dN extends at{constructor(e,t={}){super(e,t);const r=this.localize("restore all settings to the default values"),n=new Ls(e,{controlText:r,className:"vjs-default-button"});n.el().classList.remove("vjs-control","vjs-button"),n.el().textContent=this.localize("Reset"),this.addChild(n);const s=new Ls(e,{controlText:r,className:"vjs-done-button"});s.el().classList.remove("vjs-control","vjs-button"),s.el().textContent=this.localize("Done"),this.addChild(s)}createEl(){return _r("div",{className:"vjs-track-settings-controls"})}}at.registerComponent("TrackSettingsControls",dN);const KS="vjs-text-track-settings",tO=["#000","Black"],rO=["#00F","Blue"],iO=["#0FF","Cyan"],nO=["#0F0","Green"],sO=["#F0F","Magenta"],aO=["#F00","Red"],oO=["#FFF","White"],lO=["#FF0","Yellow"],XS=["1","Opaque"],YS=["0.5","Semi-Transparent"],uO=["0","Transparent"],Zc={backgroundColor:{selector:".vjs-bg-color > select",id:"captions-background-color-%s",label:"Color",options:[tO,oO,aO,nO,rO,lO,sO,iO],className:"vjs-bg-color"},backgroundOpacity:{selector:".vjs-bg-opacity > select",id:"captions-background-opacity-%s",label:"Opacity",options:[XS,YS,uO],className:"vjs-bg-opacity vjs-opacity"},color:{selector:".vjs-text-color > select",id:"captions-foreground-color-%s",label:"Color",options:[oO,tO,aO,nO,rO,lO,sO,iO],className:"vjs-text-color"},edgeStyle:{selector:".vjs-edge-style > select",id:"",label:"Text Edge Style",options:[["none","None"],["raised","Raised"],["depressed","Depressed"],["uniform","Uniform"],["dropshadow","Drop shadow"]]},fontFamily:{selector:".vjs-font-family > select",id:"",label:"Font Family",options:[["proportionalSansSerif","Proportional Sans-Serif"],["monospaceSansSerif","Monospace Sans-Serif"],["proportionalSerif","Proportional Serif"],["monospaceSerif","Monospace Serif"],["casual","Casual"],["script","Script"],["small-caps","Small Caps"]]},fontPercent:{selector:".vjs-font-percent > select",id:"",label:"Font Size",options:[["0.50","50%"],["0.75","75%"],["1.00","100%"],["1.25","125%"],["1.50","150%"],["1.75","175%"],["2.00","200%"],["3.00","300%"],["4.00","400%"]],default:2,parser:i=>i==="1.00"?null:Number(i)},textOpacity:{selector:".vjs-text-opacity > select",id:"captions-foreground-opacity-%s",label:"Opacity",options:[XS,YS],className:"vjs-text-opacity vjs-opacity"},windowColor:{selector:".vjs-window-color > select",id:"captions-window-color-%s",label:"Color",className:"vjs-window-color"},windowOpacity:{selector:".vjs-window-opacity > select",id:"captions-window-opacity-%s",label:"Opacity",options:[uO,YS,XS],className:"vjs-window-opacity vjs-opacity"}};Zc.windowColor.options=Zc.backgroundColor.options;function hN(i,e){if(e&&(i=e(i)),i&&i!=="none")return i}function jne(i,e){const t=i.options[i.options.selectedIndex].value;return hN(t,e)}function zne(i,e,t){if(e){for(let r=0;r<i.options.length;r++)if(hN(i.options[r].value,t)===e){i.selectedIndex=r;break}}}let Hne=class extends Mp{constructor(e,t){t.temporary=!1,super(e,t),this.updateDisplay=this.updateDisplay.bind(this),this.fill(),this.hasBeenOpened_=this.hasBeenFilled_=!0,this.renderModalComponents(e),this.endDialog=_r("p",{className:"vjs-control-text",textContent:this.localize("End of dialog window.")}),this.el().appendChild(this.endDialog),this.setDefaults(),t.persistTextTrackSettings===void 0&&(this.options_.persistTextTrackSettings=this.options_.playerOptions.persistTextTrackSettings),this.bindFunctionsToSelectsAndButtons(),this.options_.persistTextTrackSettings&&this.restoreSettings()}renderModalComponents(e){const t=new uN(e,{textTrackComponentid:this.id_,selectConfigs:Zc,fieldSets:[["color","textOpacity"],["backgroundColor","backgroundOpacity"],["windowColor","windowOpacity"]]});this.addChild(t);const r=new cN(e,{textTrackComponentid:this.id_,selectConfigs:Zc,fieldSets:[["fontPercent"],["edgeStyle"],["fontFamily"]]});this.addChild(r);const n=new dN(e);this.addChild(n)}bindFunctionsToSelectsAndButtons(){this.on(this.$(".vjs-done-button"),["click","tap"],()=>{this.saveSettings(),this.close()}),this.on(this.$(".vjs-default-button"),["click","tap"],()=>{this.setDefaults(),this.updateDisplay()}),zf(Zc,e=>{this.on(this.$(e.selector),"change",this.updateDisplay)})}dispose(){this.endDialog=null,super.dispose()}label(){return this.localize("Caption Settings Dialog")}description(){return this.localize("Beginning of dialog window. Escape will cancel and close the window.")}buildCSSClass(){return super.buildCSSClass()+" vjs-text-track-settings"}getValues(){return tB(Zc,(e,t,r)=>{const n=jne(this.$(t.selector),t.parser);return n!==void 0&&(e[r]=n),e},{})}setValues(e){zf(Zc,(t,r)=>{zne(this.$(t.selector),e[r],t.parser)})}setDefaults(){zf(Zc,e=>{const t=e.hasOwnProperty("default")?e.default:0;this.$(e.selector).selectedIndex=t})}restoreSettings(){let e;try{e=JSON.parse(X.localStorage.getItem(KS))}catch(t){Ur.warn(t)}e&&this.setValues(e)}saveSettings(){if(!this.options_.persistTextTrackSettings)return;const e=this.getValues();try{Object.keys(e).length?X.localStorage.setItem(KS,JSON.stringify(e)):X.localStorage.removeItem(KS)}catch(t){Ur.warn(t)}}updateDisplay(){const e=this.player_.getChild("textTrackDisplay");e&&e.updateDisplay()}handleLanguagechange(){this.fill(),this.renderModalComponents(this.player_),this.bindFunctionsToSelectsAndButtons()}};at.registerComponent("TextTrackSettings",Hne);let Vne=class extends at{constructor(e,t){let r=t.ResizeObserver||X.ResizeObserver;t.ResizeObserver===null&&(r=!1);const n=Ai({createEl:!r,reportTouchActivity:!1},t);super(e,n),this.ResizeObserver=t.ResizeObserver||X.ResizeObserver,this.loadListener_=null,this.resizeObserver_=null,this.debouncedHandler_=CB(()=>{this.resizeHandler()},100,!1,this),r?(this.resizeObserver_=new this.ResizeObserver(this.debouncedHandler_),this.resizeObserver_.observe(e.el())):(this.loadListener_=()=>{if(!this.el_||!this.el_.contentWindow)return;const s=this.debouncedHandler_;let a=this.unloadListener_=function(){Rs(this,"resize",s),Rs(this,"unload",a),a=null};no(this.el_.contentWindow,"unload",a),no(this.el_.contentWindow,"resize",s)},this.one("load",this.loadListener_))}createEl(){return super.createEl("iframe",{className:"vjs-resize-manager",tabIndex:-1,title:this.localize("No content")},{"aria-hidden":"true"})}resizeHandler(){!this.player_||!this.player_.trigger||this.player_.trigger("playerresize")}dispose(){this.debouncedHandler_&&this.debouncedHandler_.cancel(),this.resizeObserver_&&(this.player_.el()&&this.resizeObserver_.unobserve(this.player_.el()),this.resizeObserver_.disconnect()),this.loadListener_&&this.off("load",this.loadListener_),this.el_&&this.el_.contentWindow&&this.unloadListener_&&this.unloadListener_.call(this.el_.contentWindow),this.ResizeObserver=null,this.resizeObserver=null,this.debouncedHandler_=null,this.loadListener_=null,super.dispose()}};at.registerComponent("ResizeManager",Vne);const qne={trackingThreshold:20,liveTolerance:15};let Wne=class extends at{constructor(e,t){const r=Ai(qne,t,{createEl:!1});super(e,r),this.trackLiveHandler_=()=>this.trackLive_(),this.handlePlay_=n=>this.handlePlay(n),this.handleFirstTimeupdate_=n=>this.handleFirstTimeupdate(n),this.handleSeeked_=n=>this.handleSeeked(n),this.seekToLiveEdge_=n=>this.seekToLiveEdge(n),this.reset_(),this.on(this.player_,"durationchange",n=>this.handleDurationchange(n)),this.on(this.player_,"canplay",()=>this.toggleTracking())}trackLive_(){const e=this.player_.seekable();if(!e||!e.length)return;const t=Number(X.performance.now().toFixed(4)),r=this.lastTime_===-1?0:(t-this.lastTime_)/1e3;this.lastTime_=t,this.pastSeekEnd_=this.pastSeekEnd()+r;const n=this.liveCurrentTime(),s=this.player_.currentTime();let a=this.player_.paused()||this.seekedBehindLive_||Math.abs(n-s)>this.options_.liveTolerance;(!this.timeupdateSeen_||n===1/0)&&(a=!1),a!==this.behindLiveEdge_&&(this.behindLiveEdge_=a,this.trigger("liveedgechange"))}handleDurationchange(){this.toggleTracking()}toggleTracking(){this.player_.duration()===1/0&&this.liveWindow()>=this.options_.trackingThreshold?(this.player_.options_.liveui&&this.player_.addClass("vjs-liveui"),this.startTracking()):(this.player_.removeClass("vjs-liveui"),this.stopTracking())}startTracking(){this.isTracking()||(this.timeupdateSeen_||(this.timeupdateSeen_=this.player_.hasStarted()),this.trackingInterval_=this.setInterval(this.trackLiveHandler_,Fo),this.trackLive_(),this.on(this.player_,["play","pause"],this.trackLiveHandler_),this.timeupdateSeen_?this.on(this.player_,"seeked",this.handleSeeked_):(this.one(this.player_,"play",this.handlePlay_),this.one(this.player_,"timeupdate",this.handleFirstTimeupdate_)))}handleFirstTimeupdate(){this.timeupdateSeen_=!0,this.on(this.player_,"seeked",this.handleSeeked_)}handleSeeked(){const e=Math.abs(this.liveCurrentTime()-this.player_.currentTime());this.seekedBehindLive_=this.nextSeekedFromUser_&&e>2,this.nextSeekedFromUser_=!1,this.trackLive_()}handlePlay(){this.one(this.player_,"timeupdate",this.seekToLiveEdge_)}reset_(){this.lastTime_=-1,this.pastSeekEnd_=0,this.lastSeekEnd_=-1,this.behindLiveEdge_=!0,this.timeupdateSeen_=!1,this.seekedBehindLive_=!1,this.nextSeekedFromUser_=!1,this.clearInterval(this.trackingInterval_),this.trackingInterval_=null,this.off(this.player_,["play","pause"],this.trackLiveHandler_),this.off(this.player_,"seeked",this.handleSeeked_),this.off(this.player_,"play",this.handlePlay_),this.off(this.player_,"timeupdate",this.handleFirstTimeupdate_),this.off(this.player_,"timeupdate",this.seekToLiveEdge_)}nextSeekedFromUser(){this.nextSeekedFromUser_=!0}stopTracking(){this.isTracking()&&(this.reset_(),this.trigger("liveedgechange"))}seekableEnd(){const e=this.player_.seekable(),t=[];let r=e?e.length:0;for(;r--;)t.push(e.end(r));return t.length?t.sort()[t.length-1]:1/0}seekableStart(){const e=this.player_.seekable(),t=[];let r=e?e.length:0;for(;r--;)t.push(e.start(r));return t.length?t.sort()[0]:0}liveWindow(){const e=this.liveCurrentTime();return e===1/0?0:e-this.seekableStart()}isLive(){return this.isTracking()}atLiveEdge(){return!this.behindLiveEdge()}liveCurrentTime(){return this.pastSeekEnd()+this.seekableEnd()}pastSeekEnd(){const e=this.seekableEnd();return this.lastSeekEnd_!==-1&&e!==this.lastSeekEnd_&&(this.pastSeekEnd_=0),this.lastSeekEnd_=e,this.pastSeekEnd_}behindLiveEdge(){return this.behindLiveEdge_}isTracking(){return typeof this.trackingInterval_=="number"}seekToLiveEdge(){this.seekedBehindLive_=!1,!this.atLiveEdge()&&(this.nextSeekedFromUser_=!1,this.player_.currentTime(this.liveCurrentTime()))}dispose(){this.stopTracking(),super.dispose()}};at.registerComponent("LiveTracker",Wne);class Gne extends at{constructor(e,t){super(e,t),this.on("statechanged",r=>this.updateDom_()),this.updateDom_()}createEl(){return this.els={title:_r("div",{className:"vjs-title-bar-title",id:`vjs-title-bar-title-${Mo()}`}),description:_r("div",{className:"vjs-title-bar-description",id:`vjs-title-bar-description-${Mo()}`})},_r("div",{className:"vjs-title-bar"},{},rB(this.els))}updateDom_(){const e=this.player_.tech_,t=e&&e.el_,r={title:"aria-labelledby",description:"aria-describedby"};["title","description"].forEach(n=>{const s=this.state[n],a=this.els[n],o=r[n];oT(a),s&&_d(a,s),t&&(t.removeAttribute(o),s&&t.setAttribute(o,a.id))}),this.state.title||this.state.description?this.show():this.hide()}update(e){this.setState(e)}dispose(){const e=this.player_.tech_,t=e&&e.el_;t&&(t.removeAttribute("aria-labelledby"),t.removeAttribute("aria-describedby")),super.dispose(),this.els=null}}at.registerComponent("TitleBar",Gne);const Kne={initialDisplay:4e3,position:[],takeFocus:!1};class Xne extends Ls{constructor(e,t){t=Ai(Kne,t),super(e,t),this.controlText(t.controlText),this.hide(),this.on(this.player_,["useractive","userinactive"],r=>{this.removeClass("force-display")})}buildCSSClass(){return`vjs-transient-button focus-visible ${this.options_.position.map(e=>`vjs-${e}`).join(" ")}`}createEl(){const e=_r("button",{},{type:"button",class:this.buildCSSClass()},_r("span"));return this.controlTextEl_=e.querySelector("span"),e}show(){super.show(),this.addClass("force-display"),this.options_.takeFocus&&this.el().focus({preventScroll:!0}),this.forceDisplayTimeout=this.player_.setTimeout(()=>{this.removeClass("force-display")},this.options_.initialDisplay)}hide(){this.removeClass("force-display"),super.hide()}dispose(){this.player_.clearTimeout(this.forceDisplayTimeout),super.dispose()}}at.registerComponent("TransientButton",Xne);const RC=i=>{const e=i.el();if(e.hasAttribute("src"))return i.triggerSourceset(e.src),!0;const t=i.$$("source"),r=[];let n="";if(!t.length)return!1;for(let s=0;s<t.length;s++){const a=t[s].src;a&&r.indexOf(a)===-1&&r.push(a)}return r.length?(r.length===1&&(n=r[0]),i.triggerSourceset(n),!0):!1},Yne=Object.defineProperty({},"innerHTML",{get(){return this.cloneNode(!0).innerHTML},set(i){const e=Me.createElement(this.nodeName.toLowerCase());e.innerHTML=i;const t=Me.createDocumentFragment();for(;e.childNodes.length;)t.appendChild(e.childNodes[0]);return this.innerText="",X.Element.prototype.appendChild.call(this,t),this.innerHTML}}),fN=(i,e)=>{let t={};for(let r=0;r<i.length&&(t=Object.getOwnPropertyDescriptor(i[r],e),!(t&&t.set&&t.get));r++);return t.enumerable=!0,t.configurable=!0,t},Qne=i=>fN([i.el(),X.HTMLMediaElement.prototype,X.Element.prototype,Yne],"innerHTML"),cO=function(i){const e=i.el();if(e.resetSourceWatch_)return;const t={},r=Qne(i),n=s=>(...a)=>{const o=s.apply(e,a);return RC(i),o};["append","appendChild","insertAdjacentHTML"].forEach(s=>{e[s]&&(t[s]=e[s],e[s]=n(t[s]))}),Object.defineProperty(e,"innerHTML",Ai(r,{set:n(r.set)})),e.resetSourceWatch_=()=>{e.resetSourceWatch_=null,Object.keys(t).forEach(s=>{e[s]=t[s]}),Object.defineProperty(e,"innerHTML",r)},i.one("sourceset",e.resetSourceWatch_)},Jne=Object.defineProperty({},"src",{get(){return this.hasAttribute("src")?MB(X.Element.prototype.getAttribute.call(this,"src")):""},set(i){return X.Element.prototype.setAttribute.call(this,"src",i),i}}),Zne=i=>fN([i.el(),X.HTMLMediaElement.prototype,Jne],"src"),ese=function(i){if(!i.featuresSourceset)return;const e=i.el();if(e.resetSourceset_)return;const t=Zne(i),r=e.setAttribute,n=e.load;Object.defineProperty(e,"src",Ai(t,{set:s=>{const a=t.set.call(e,s);return i.triggerSourceset(e.src),a}})),e.setAttribute=(s,a)=>{const o=r.call(e,s,a);return/src/i.test(s)&&i.triggerSourceset(e.src),o},e.load=()=>{const s=n.call(e);return RC(i)||(i.triggerSourceset(""),cO(i)),s},e.currentSrc?i.triggerSourceset(e.currentSrc):RC(i)||cO(i),e.resetSourceset_=()=>{e.resetSourceset_=null,e.load=n,e.setAttribute=r,Object.defineProperty(e,"src",t),e.resetSourceWatch_&&e.resetSourceWatch_()}};let Xt=class My extends Ii{constructor(e,t){super(e,t);const r=e.source;let n=!1;if(this.featuresVideoFrameCallback=this.featuresVideoFrameCallback&&this.el_.tagName==="VIDEO",r&&(this.el_.currentSrc!==r.src||e.tag&&e.tag.initNetworkState_===3)?this.setSource(r):this.handleLateInit_(this.el_),e.enableSourceset&&this.setupSourcesetHandling_(),this.isScrubbing_=!1,this.el_.hasChildNodes()){const s=this.el_.childNodes;let a=s.length;const o=[];for(;a--;){const l=s[a];l.nodeName.toLowerCase()==="track"&&(this.featuresNativeTextTracks?(this.remoteTextTrackEls().addTrackElement_(l),this.remoteTextTracks().addTrack(l.track),this.textTracks().addTrack(l.track),!n&&!this.el_.hasAttribute("crossorigin")&&dT(l.src)&&(n=!0)):o.push(l))}for(let l=0;l<o.length;l++)this.el_.removeChild(o[l])}this.proxyNativeTracks_(),this.featuresNativeTextTracks&&n&&Ur.warn(`Text Tracks are being loaded from another origin but the crossorigin attribute isn't used.
This may prevent text tracks from loading.`),this.restoreMetadataTracksInIOSNativePlayer_(),(I0||rT)&&e.nativeControlsForTouch===!0&&this.setControls(!0),this.proxyWebkitFullscreen_(),this.triggerReady()}dispose(){this.el_&&this.el_.resetSourceset_&&this.el_.resetSourceset_(),My.disposeMediaElement(this.el_),this.options_=null,super.dispose()}setupSourcesetHandling_(){ese(this)}restoreMetadataTracksInIOSNativePlayer_(){const e=this.textTracks();let t;const r=()=>{t=[];for(let s=0;s<e.length;s++){const a=e[s];a.kind==="metadata"&&t.push({track:a,storedMode:a.mode})}};r(),e.addEventListener("change",r),this.on("dispose",()=>e.removeEventListener("change",r));const n=()=>{for(let s=0;s<t.length;s++){const a=t[s];a.track.mode==="disabled"&&a.track.mode!==a.storedMode&&(a.track.mode=a.storedMode)}e.removeEventListener("change",n)};this.on("webkitbeginfullscreen",()=>{e.removeEventListener("change",r),e.removeEventListener("change",n),e.addEventListener("change",n)}),this.on("webkitendfullscreen",()=>{e.removeEventListener("change",r),e.addEventListener("change",r),e.removeEventListener("change",n)})}overrideNative_(e,t){if(t!==this[`featuresNative${e}Tracks`])return;const r=e.toLowerCase();this[`${r}TracksListeners_`]&&Object.keys(this[`${r}TracksListeners_`]).forEach(n=>{this.el()[`${r}Tracks`].removeEventListener(n,this[`${r}TracksListeners_`][n])}),this[`featuresNative${e}Tracks`]=!t,this[`${r}TracksListeners_`]=null,this.proxyNativeTracksForType_(r)}overrideNativeAudioTracks(e){this.overrideNative_("Audio",e)}overrideNativeVideoTracks(e){this.overrideNative_("Video",e)}proxyNativeTracksForType_(e){const t=Po[e],r=this.el()[t.getterName],n=this[t.getterName]();if(!this[`featuresNative${t.capitalName}Tracks`]||!r||!r.addEventListener)return;const s={change:o=>{const l={type:"change",target:n,currentTarget:n,srcElement:n};n.trigger(l),e==="text"&&this[gp.remoteText.getterName]().trigger(l)},addtrack(o){n.addTrack(o.track)},removetrack(o){n.removeTrack(o.track)}},a=function(){const o=[];for(let l=0;l<n.length;l++){let u=!1;for(let c=0;c<r.length;c++)if(r[c]===n[l]){u=!0;break}u||o.push(n[l])}for(;o.length;)n.removeTrack(o.shift())};this[t.getterName+"Listeners_"]=s,Object.keys(s).forEach(o=>{const l=s[o];r.addEventListener(o,l),this.on("dispose",u=>r.removeEventListener(o,l))}),this.on("loadstart",a),this.on("dispose",o=>this.off("loadstart",a))}proxyNativeTracks_(){Po.names.forEach(e=>{this.proxyNativeTracksForType_(e)})}createEl(){let e=this.options_.tag;if(!e||!(this.options_.playerElIngest||this.movingMediaElementInDOM)){if(e){const r=e.cloneNode(!0);e.parentNode&&e.parentNode.insertBefore(r,e),My.disposeMediaElement(e),e=r}else{e=Me.createElement("video");const r=this.options_.tag&&Jc(this.options_.tag),n=Ai({},r);(!I0||this.options_.nativeControlsForTouch!==!0)&&delete n.controls,dB(e,Object.assign(n,{id:this.options_.techId,class:"vjs-tech"}))}e.playerId=this.options_.playerId}typeof this.options_.preload<"u"&&hp(e,"preload",this.options_.preload),this.options_.disablePictureInPicture!==void 0&&(e.disablePictureInPicture=this.options_.disablePictureInPicture);const t=["loop","muted","playsinline","autoplay"];for(let r=0;r<t.length;r++){const n=t[r],s=this.options_[n];typeof s<"u"&&(s?hp(e,n,n):sT(e,n),e[n]=s)}return e}handleLateInit_(e){if(e.networkState===0||e.networkState===3)return;if(e.readyState===0){let r=!1;const n=function(){r=!0};this.on("loadstart",n);const s=function(){r||this.trigger("loadstart")};this.on("loadedmetadata",s),this.ready(function(){this.off("loadstart",n),this.off("loadedmetadata",s),r||this.trigger("loadstart")});return}const t=["loadstart"];t.push("loadedmetadata"),e.readyState>=2&&t.push("loadeddata"),e.readyState>=3&&t.push("canplay"),e.readyState>=4&&t.push("canplaythrough"),this.ready(function(){t.forEach(function(r){this.trigger(r)},this)})}setScrubbing(e){this.isScrubbing_=e}scrubbing(){return this.isScrubbing_}setCurrentTime(e){try{this.isScrubbing_&&this.el_.fastSeek&&iT?this.el_.fastSeek(e):this.el_.currentTime=e}catch(t){Ur(t,"Video is not ready. (Video.js)")}}duration(){if(this.el_.duration===1/0&&fu&&pu&&this.el_.currentTime===0){const e=()=>{this.el_.currentTime>0&&(this.el_.duration===1/0&&this.trigger("durationchange"),this.off("timeupdate",e))};return this.on("timeupdate",e),NaN}return this.el_.duration||NaN}width(){return this.el_.offsetWidth}height(){return this.el_.offsetHeight}proxyWebkitFullscreen_(){if(!("webkitDisplayingFullscreen"in this.el_))return;const e=function(){this.trigger("fullscreenchange",{isFullscreen:!1}),this.el_.controls&&!this.options_.nativeControlsForTouch&&this.controls()&&(this.el_.controls=!1)},t=function(){"webkitPresentationMode"in this.el_&&this.el_.webkitPresentationMode!=="picture-in-picture"&&(this.one("webkitendfullscreen",e),this.trigger("fullscreenchange",{isFullscreen:!0,nativeIOSFullscreen:!0}))};this.on("webkitbeginfullscreen",t),this.on("dispose",()=>{this.off("webkitbeginfullscreen",t),this.off("webkitendfullscreen",e)})}supportsFullScreen(){return typeof this.el_.webkitEnterFullScreen=="function"}enterFullScreen(){const e=this.el_;if(e.paused&&e.networkState<=e.HAVE_METADATA)Yl(this.el_.play()),this.setTimeout(function(){e.pause();try{e.webkitEnterFullScreen()}catch(t){this.trigger("fullscreenerror",t)}},0);else try{e.webkitEnterFullScreen()}catch(t){this.trigger("fullscreenerror",t)}}exitFullScreen(){if(!this.el_.webkitDisplayingFullscreen){this.trigger("fullscreenerror",new Error("The video is not fullscreen"));return}this.el_.webkitExitFullScreen()}requestPictureInPicture(){return this.el_.requestPictureInPicture()}requestVideoFrameCallback(e){return this.featuresVideoFrameCallback&&!this.el_.webkitKeys?this.el_.requestVideoFrameCallback(e):super.requestVideoFrameCallback(e)}cancelVideoFrameCallback(e){this.featuresVideoFrameCallback&&!this.el_.webkitKeys?this.el_.cancelVideoFrameCallback(e):super.cancelVideoFrameCallback(e)}src(e){if(e===void 0)return this.el_.src;this.setSrc(e)}addSourceElement(e,t){if(!e)return Ur.error("Invalid source URL."),!1;const r={src:e};t&&(r.type=t);const n=_r("source",{},r);return this.el_.appendChild(n),!0}removeSourceElement(e){if(!e)return Ur.error("Source URL is required to remove the source element."),!1;const t=this.el_.querySelectorAll("source");for(const r of t)if(r.src===e)return this.el_.removeChild(r),!0;return Ur.warn(`No matching source element found with src: ${e}`),!1}reset(){My.resetMediaElement(this.el_)}currentSrc(){return this.currentSource_?this.currentSource_.src:this.el_.currentSrc}setControls(e){this.el_.controls=!!e}addTextTrack(e,t,r){return this.featuresNativeTextTracks?this.el_.addTextTrack(e,t,r):super.addTextTrack(e,t,r)}createRemoteTextTrack(e){if(!this.featuresNativeTextTracks)return super.createRemoteTextTrack(e);const t=Me.createElement("track");return e.kind&&(t.kind=e.kind),e.label&&(t.label=e.label),(e.language||e.srclang)&&(t.srclang=e.language||e.srclang),e.default&&(t.default=e.default),e.id&&(t.id=e.id),e.src&&(t.src=e.src),t}addRemoteTextTrack(e,t){const r=super.addRemoteTextTrack(e,t);return this.featuresNativeTextTracks&&this.el().appendChild(r),r}removeRemoteTextTrack(e){if(super.removeRemoteTextTrack(e),this.featuresNativeTextTracks){const t=this.$$("track");let r=t.length;for(;r--;)(e===t[r]||e===t[r].track)&&this.el().removeChild(t[r])}}getVideoPlaybackQuality(){if(typeof this.el().getVideoPlaybackQuality=="function")return this.el().getVideoPlaybackQuality();const e={};return typeof this.el().webkitDroppedFrameCount<"u"&&typeof this.el().webkitDecodedFrameCount<"u"&&(e.droppedVideoFrames=this.el().webkitDroppedFrameCount,e.totalVideoFrames=this.el().webkitDecodedFrameCount),X.performance&&(e.creationTime=X.performance.now()),e}};Zx(Xt,"TEST_VID",function(){if(!Rp())return;const i=Me.createElement("video"),e=Me.createElement("track");return e.kind="captions",e.srclang="en",e.label="English",i.appendChild(e),i});Xt.isSupported=function(){try{Xt.TEST_VID.volume=.5}catch{return!1}return!!(Xt.TEST_VID&&Xt.TEST_VID.canPlayType)};Xt.canPlayType=function(i){return Xt.TEST_VID.canPlayType(i)};Xt.canPlaySource=function(i,e){return Xt.canPlayType(i.type)};Xt.canControlVolume=function(){try{const i=Xt.TEST_VID.volume;Xt.TEST_VID.volume=i/2+.1;const e=i!==Xt.TEST_VID.volume;return e&&ta?(X.setTimeout(()=>{Xt&&Xt.prototype&&(Xt.prototype.featuresVolumeControl=i!==Xt.TEST_VID.volume)}),!1):e}catch{return!1}};Xt.canMuteVolume=function(){try{const i=Xt.TEST_VID.muted;return Xt.TEST_VID.muted=!i,Xt.TEST_VID.muted?hp(Xt.TEST_VID,"muted","muted"):sT(Xt.TEST_VID,"muted","muted"),i!==Xt.TEST_VID.muted}catch{return!1}};Xt.canControlPlaybackRate=function(){if(fu&&pu&&eT<58)return!1;try{const i=Xt.TEST_VID.playbackRate;return Xt.TEST_VID.playbackRate=i/2+.1,i!==Xt.TEST_VID.playbackRate}catch{return!1}};Xt.canOverrideAttributes=function(){try{const i=()=>{};Object.defineProperty(Me.createElement("video"),"src",{get:i,set:i}),Object.defineProperty(Me.createElement("audio"),"src",{get:i,set:i}),Object.defineProperty(Me.createElement("video"),"innerHTML",{get:i,set:i}),Object.defineProperty(Me.createElement("audio"),"innerHTML",{get:i,set:i})}catch{return!1}return!0};Xt.supportsNativeTextTracks=function(){return iT||ta&&pu};Xt.supportsNativeVideoTracks=function(){return!!(Xt.TEST_VID&&Xt.TEST_VID.videoTracks)};Xt.supportsNativeAudioTracks=function(){return!!(Xt.TEST_VID&&Xt.TEST_VID.audioTracks)};Xt.Events=["loadstart","suspend","abort","error","emptied","stalled","loadedmetadata","loadeddata","canplay","canplaythrough","playing","waiting","seeking","seeked","ended","durationchange","timeupdate","progress","play","pause","ratechange","resize","volumechange"];[["featuresMuteControl","canMuteVolume"],["featuresPlaybackRate","canControlPlaybackRate"],["featuresSourceset","canOverrideAttributes"],["featuresNativeTextTracks","supportsNativeTextTracks"],["featuresNativeVideoTracks","supportsNativeVideoTracks"],["featuresNativeAudioTracks","supportsNativeAudioTracks"]].forEach(function([i,e]){Zx(Xt.prototype,i,()=>Xt[e](),!0)});Xt.prototype.featuresVolumeControl=Xt.canControlVolume();Xt.prototype.movingMediaElementInDOM=!ta;Xt.prototype.featuresFullscreenResize=!0;Xt.prototype.featuresProgressEvents=!0;Xt.prototype.featuresTimeupdateEvents=!0;Xt.prototype.featuresVideoFrameCallback=!!(Xt.TEST_VID&&Xt.TEST_VID.requestVideoFrameCallback);Xt.disposeMediaElement=function(i){if(i){for(i.parentNode&&i.parentNode.removeChild(i);i.hasChildNodes();)i.removeChild(i.firstChild);i.removeAttribute("src"),typeof i.load=="function"&&(function(){try{i.load()}catch{}})()}};Xt.resetMediaElement=function(i){if(!i)return;const e=i.querySelectorAll("source");let t=e.length;for(;t--;)i.removeChild(e[t]);i.removeAttribute("src"),typeof i.load=="function"&&(function(){try{i.load()}catch{}})()};["muted","defaultMuted","autoplay","controls","loop","playsinline"].forEach(function(i){Xt.prototype[i]=function(){return this.el_[i]||this.el_.hasAttribute(i)}});["muted","defaultMuted","autoplay","loop","playsinline"].forEach(function(i){Xt.prototype["set"+nn(i)]=function(e){this.el_[i]=e,e?this.el_.setAttribute(i,i):this.el_.removeAttribute(i)}});["paused","currentTime","buffered","volume","poster","preload","error","seeking","seekable","ended","playbackRate","defaultPlaybackRate","disablePictureInPicture","played","networkState","readyState","videoWidth","videoHeight","crossOrigin"].forEach(function(i){Xt.prototype[i]=function(){return this.el_[i]}});["volume","src","poster","preload","playbackRate","defaultPlaybackRate","disablePictureInPicture","crossOrigin"].forEach(function(i){Xt.prototype["set"+nn(i)]=function(e){this.el_[i]=e}});["pause","load","play"].forEach(function(i){Xt.prototype[i]=function(){return this.el_[i]()}});Ii.withSourceHandlers(Xt);Xt.nativeSourceHandler={};Xt.nativeSourceHandler.canPlayType=function(i){try{return Xt.TEST_VID.canPlayType(i)}catch{return""}};Xt.nativeSourceHandler.canHandleSource=function(i,e){if(i.type)return Xt.nativeSourceHandler.canPlayType(i.type);if(i.src){const t=r2(i.src);return Xt.nativeSourceHandler.canPlayType(`video/${t}`)}return""};Xt.nativeSourceHandler.handleSource=function(i,e,t){e.setSrc(i.src)};Xt.nativeSourceHandler.dispose=function(){};Xt.registerSourceHandler(Xt.nativeSourceHandler);Ii.registerTech("Html5",Xt);const pN=["progress","abort","suspend","emptied","stalled","loadedmetadata","loadeddata","timeupdate","resize","volumechange","texttrackchange"],QS={canplay:"CanPlay",canplaythrough:"CanPlayThrough",playing:"Playing",seeked:"Seeked"},LC=["tiny","xsmall","small","medium","large","xlarge","huge"],Fy={};LC.forEach(i=>{const e=i.charAt(0)==="x"?`x-${i.substring(1)}`:i;Fy[i]=`vjs-layout-${e}`});const tse={tiny:210,xsmall:320,small:425,medium:768,large:1440,xlarge:2560,huge:1/0};let Ln=class bf extends at{constructor(e,t,r){if(e.id=e.id||t.id||`vjs_video_${Mo()}`,t=Object.assign(bf.getTagSettings(e),t),t.initChildren=!1,t.createEl=!1,t.evented=!1,t.reportTouchActivity=!1,!t.language){const a=e.closest("[lang]");a&&(t.language=a.getAttribute("lang"))}if(super(null,t,r),this.boundDocumentFullscreenChange_=a=>this.documentFullscreenChange_(a),this.boundFullWindowOnEscKey_=a=>this.fullWindowOnEscKey(a),this.boundUpdateStyleEl_=a=>this.updateStyleEl_(a),this.boundApplyInitTime_=a=>this.applyInitTime_(a),this.boundUpdateCurrentBreakpoint_=a=>this.updateCurrentBreakpoint_(a),this.boundHandleTechClick_=a=>this.handleTechClick_(a),this.boundHandleTechDoubleClick_=a=>this.handleTechDoubleClick_(a),this.boundHandleTechTouchStart_=a=>this.handleTechTouchStart_(a),this.boundHandleTechTouchMove_=a=>this.handleTechTouchMove_(a),this.boundHandleTechTouchEnd_=a=>this.handleTechTouchEnd_(a),this.boundHandleTechTap_=a=>this.handleTechTap_(a),this.boundUpdatePlayerHeightOnAudioOnlyMode_=a=>this.updatePlayerHeightOnAudioOnlyMode_(a),this.isFullscreen_=!1,this.log=Z8(this.id_),this.fsApi_=__,this.isPosterFromTech_=!1,this.queuedCallbacks_=[],this.isReady_=!1,this.hasStarted_=!1,this.userActive_=!1,this.debugEnabled_=!1,this.audioOnlyMode_=!1,this.audioPosterMode_=!1,this.audioOnlyCache_={controlBarHeight:null,playerHeight:null,hiddenChildren:[]},!this.options_||!this.options_.techOrder||!this.options_.techOrder.length)throw new Error("No techOrder specified. Did you overwrite videojs.options instead of just changing the properties you want to override?");if(this.tag=e,this.tagAttributes=e&&Jc(e),this.language(this.options_.language),t.languages){const a={};Object.getOwnPropertyNames(t.languages).forEach(function(o){a[o.toLowerCase()]=t.languages[o]}),this.languages_=a}else this.languages_=bf.prototype.options_.languages;this.resetCache_(),this.poster_=t.poster||"",this.controls_=!!t.controls,e.controls=!1,e.removeAttribute("controls"),this.changingSrc_=!1,this.playCallbacks_=[],this.playTerminatedQueue_=[],e.hasAttribute("autoplay")?this.autoplay(!0):this.autoplay(this.options_.autoplay),t.plugins&&Object.keys(t.plugins).forEach(a=>{if(typeof this[a]!="function")throw new Error(`plugin "${a}" does not exist`)}),this.scrubbing_=!1,this.el_=this.createEl(),Jw(this,{eventBusKey:"el_"}),this.fsApi_.requestFullscreen&&(no(Me,this.fsApi_.fullscreenchange,this.boundDocumentFullscreenChange_),this.on(this.fsApi_.fullscreenchange,this.boundDocumentFullscreenChange_)),this.fluid_&&this.on(["playerreset","resize"],this.boundUpdateStyleEl_);const n=Ai(this.options_);if(t.plugins&&Object.keys(t.plugins).forEach(a=>{this[a](t.plugins[a])}),t.debug&&this.debug(!0),this.options_.playerOptions=n,this.middleware_=[],this.playbackRates(t.playbackRates),t.experimentalSvgIcons){const o=new X.DOMParser().parseFromString(Cne,"image/svg+xml");if(o.querySelector("parsererror"))Ur.warn("Failed to load SVG Icons. Falling back to Font Icons."),this.options_.experimentalSvgIcons=null;else{const u=o.documentElement;u.style.display="none",this.el_.appendChild(u),this.addClass("vjs-svg-icons-enabled")}}this.initChildren(),this.isAudio(e.nodeName.toLowerCase()==="audio"),this.controls()?this.addClass("vjs-controls-enabled"):this.addClass("vjs-controls-disabled"),this.el_.setAttribute("role","region"),this.isAudio()?this.el_.setAttribute("aria-label",this.localize("Audio Player")):this.el_.setAttribute("aria-label",this.localize("Video Player")),this.isAudio()&&this.addClass("vjs-audio"),t.spatialNavigation&&t.spatialNavigation.enabled&&(this.spatialNavigation=new Ene(this),this.addClass("vjs-spatial-navigation-enabled")),I0&&this.addClass("vjs-touch-enabled"),ta||this.addClass("vjs-workinghover"),bf.players[this.id_]=this;const s=bC.split(".")[0];this.addClass(`vjs-v${s}`),this.userActive(!0),this.reportUserActivity(),this.one("play",a=>this.listenForUserActivity_(a)),this.on("keydown",a=>this.handleKeyDown(a)),this.on("languagechange",a=>this.handleLanguagechange(a)),this.breakpoints(this.options_.breakpoints),this.responsive(this.options_.responsive),this.on("ready",()=>{this.audioPosterMode(this.options_.audioPosterMode),this.audioOnlyMode(this.options_.audioOnlyMode)})}dispose(){this.trigger("dispose"),this.off("dispose"),Rs(Me,this.fsApi_.fullscreenchange,this.boundDocumentFullscreenChange_),Rs(Me,"keydown",this.boundFullWindowOnEscKey_),this.styleEl_&&this.styleEl_.parentNode&&(this.styleEl_.parentNode.removeChild(this.styleEl_),this.styleEl_=null),bf.players[this.id_]=null,this.tag&&this.tag.player&&(this.tag.player=null),this.el_&&this.el_.player&&(this.el_.player=null),this.tech_&&(this.tech_.dispose(),this.isPosterFromTech_=!1,this.poster_=""),this.playerElIngest_&&(this.playerElIngest_=null),this.tag&&(this.tag=null),xne(this),Ks.names.forEach(e=>{const t=Ks[e],r=this[t.getterName]();r&&r.off&&r.off()}),super.dispose({restoreEl:this.options_.restoreEl})}createEl(){let e=this.tag,t,r=this.playerElIngest_=e.parentNode&&e.parentNode.hasAttribute&&e.parentNode.hasAttribute("data-vjs-player");const n=this.tag.tagName.toLowerCase()==="video-js";r?t=this.el_=e.parentNode:n||(t=this.el_=super.createEl("div"));const s=Jc(e);if(n){for(t=this.el_=e,e=this.tag=Me.createElement("video");t.children.length;)e.appendChild(t.firstChild);n0(t,"video-js")||ph(t,"video-js"),t.appendChild(e),r=this.playerElIngest_=t,Object.keys(t).forEach(l=>{try{e[l]=t[l]}catch{}})}e.setAttribute("tabindex","-1"),s.tabindex="-1",pu&&tT&&(e.setAttribute("role","application"),s.role="application"),e.removeAttribute("width"),e.removeAttribute("height"),"width"in s&&delete s.width,"height"in s&&delete s.height,Object.getOwnPropertyNames(s).forEach(function(l){n&&l==="class"||t.setAttribute(l,s[l]),n&&e.setAttribute(l,s[l])}),e.playerId=e.id,e.id+="_html5_api",e.className="vjs-tech",e.player=t.player=this,this.addClass("vjs-paused");const a=["IS_SMART_TV","IS_TIZEN","IS_WEBOS","IS_ANDROID","IS_IPAD","IS_IPHONE","IS_CHROMECAST_RECEIVER"].filter(l=>oB[l]).map(l=>"vjs-device-"+l.substring(3).toLowerCase().replace(/\_/g,"-"));if(this.addClass(...a),X.VIDEOJS_NO_DYNAMIC_STYLE!==!0){this.styleEl_=bB("vjs-styles-dimensions");const l=fd(".vjs-styles-defaults"),u=fd("head");u.insertBefore(this.styleEl_,l?l.nextSibling:u.firstChild)}this.fill_=!1,this.fluid_=!1,this.width(this.options_.width),this.height(this.options_.height),this.fill(this.options_.fill),this.fluid(this.options_.fluid),this.aspectRatio(this.options_.aspectRatio),this.crossOrigin(this.options_.crossOrigin||this.options_.crossorigin);const o=e.getElementsByTagName("a");for(let l=0;l<o.length;l++){const u=o.item(l);ph(u,"vjs-hidden"),u.setAttribute("hidden","hidden")}return e.initNetworkState_=e.networkState,e.parentNode&&!r&&e.parentNode.insertBefore(t,e),CC(e,t),this.children_.unshift(e),this.el_.setAttribute("lang",this.language_),this.el_.setAttribute("translate","no"),this.el_=t,t}crossOrigin(e){if(typeof e>"u")return this.techGet_("crossOrigin");if(e!==null&&e!=="anonymous"&&e!=="use-credentials"){Ur.warn(`crossOrigin must be null,  "anonymous" or "use-credentials", given "${e}"`);return}this.techCall_("setCrossOrigin",e),this.posterImage&&this.posterImage.crossOrigin(e)}width(e){return this.dimension("width",e)}height(e){return this.dimension("height",e)}dimension(e,t){const r=e+"_";if(t===void 0)return this[r]||0;if(t===""||t==="auto"){this[r]=void 0,this.updateStyleEl_();return}const n=parseFloat(t);if(isNaN(n)){Ur.error(`Improper value "${t}" supplied for for ${e}`);return}this[r]=n,this.updateStyleEl_()}fluid(e){if(e===void 0)return!!this.fluid_;this.fluid_=!!e,ic(this)&&this.off(["playerreset","resize"],this.boundUpdateStyleEl_),e?(this.addClass("vjs-fluid"),this.fill(!1),Yie(this,()=>{this.on(["playerreset","resize"],this.boundUpdateStyleEl_)})):this.removeClass("vjs-fluid"),this.updateStyleEl_()}fill(e){if(e===void 0)return!!this.fill_;this.fill_=!!e,e?(this.addClass("vjs-fill"),this.fluid(!1)):this.removeClass("vjs-fill")}aspectRatio(e){if(e===void 0)return this.aspectRatio_;if(!/^\d+\:\d+$/.test(e))throw new Error("Improper value supplied for aspect ratio. The format should be width:height, for example 16:9.");this.aspectRatio_=e,this.fluid(!0),this.updateStyleEl_()}updateStyleEl_(){if(X.VIDEOJS_NO_DYNAMIC_STYLE===!0){const o=typeof this.width_=="number"?this.width_:this.options_.width,l=typeof this.height_=="number"?this.height_:this.options_.height,u=this.tech_&&this.tech_.el();u&&(o>=0&&(u.width=o),l>=0&&(u.height=l));return}let e,t,r,n;this.aspectRatio_!==void 0&&this.aspectRatio_!=="auto"?r=this.aspectRatio_:this.videoWidth()>0?r=this.videoWidth()+":"+this.videoHeight():r="16:9";const s=r.split(":"),a=s[1]/s[0];this.width_!==void 0?e=this.width_:this.height_!==void 0?e=this.height_/a:e=this.videoWidth()||300,this.height_!==void 0?t=this.height_:t=e*a,/^[^a-zA-Z]/.test(this.id())?n="dimensions-"+this.id():n=this.id()+"-dimensions",this.addClass(n),SB(this.styleEl_,`
      .${n} {
        width: ${e}px;
        height: ${t}px;
      }

      .${n}.vjs-fluid:not(.vjs-audio-only-mode) {
        padding-top: ${a*100}%;
      }
    `)}loadTech_(e,t){this.tech_&&this.unloadTech_();const r=nn(e),n=e.charAt(0).toLowerCase()+e.slice(1);r!=="Html5"&&this.tag&&(Ii.getTech("Html5").disposeMediaElement(this.tag),this.tag.player=null,this.tag=null),this.techName_=r,this.isReady_=!1;let s=this.autoplay();(typeof this.autoplay()=="string"||this.autoplay()===!0&&this.options_.normalizeAutoplay)&&(s=!1);const a={source:t,autoplay:s,nativeControlsForTouch:this.options_.nativeControlsForTouch,playerId:this.id(),techId:`${this.id()}_${n}_api`,playsinline:this.options_.playsinline,preload:this.options_.preload,loop:this.options_.loop,disablePictureInPicture:this.options_.disablePictureInPicture,muted:this.options_.muted,poster:this.poster(),language:this.language(),playerElIngest:this.playerElIngest_||!1,"vtt.js":this.options_["vtt.js"],canOverridePoster:!!this.options_.techCanOverridePoster,enableSourceset:this.options_.enableSourceset};Ks.names.forEach(l=>{const u=Ks[l];a[u.getterName]=this[u.privateName]}),Object.assign(a,this.options_[r]),Object.assign(a,this.options_[n]),Object.assign(a,this.options_[e.toLowerCase()]),this.tag&&(a.tag=this.tag),t&&t.src===this.cache_.src&&this.cache_.currentTime>0&&(a.startTime=this.cache_.currentTime);const o=Ii.getTech(e);if(!o)throw new Error(`No Tech named '${r}' exists! '${r}' should be registered using videojs.registerTech()'`);this.tech_=new o(a),this.tech_.ready(Ri(this,this.handleTechReady_),!0),zL.jsonToTextTracks(this.textTracksJson_||[],this.tech_),pN.forEach(l=>{this.on(this.tech_,l,u=>this[`handleTech${nn(l)}_`](u))}),Object.keys(QS).forEach(l=>{this.on(this.tech_,l,u=>{if(this.tech_.playbackRate()===0&&this.tech_.seeking()){this.queuedCallbacks_.push({callback:this[`handleTech${QS[l]}_`].bind(this),event:u});return}this[`handleTech${QS[l]}_`](u)})}),this.on(this.tech_,"loadstart",l=>this.handleTechLoadStart_(l)),this.on(this.tech_,"sourceset",l=>this.handleTechSourceset_(l)),this.on(this.tech_,"waiting",l=>this.handleTechWaiting_(l)),this.on(this.tech_,"ended",l=>this.handleTechEnded_(l)),this.on(this.tech_,"seeking",l=>this.handleTechSeeking_(l)),this.on(this.tech_,"play",l=>this.handleTechPlay_(l)),this.on(this.tech_,"pause",l=>this.handleTechPause_(l)),this.on(this.tech_,"durationchange",l=>this.handleTechDurationChange_(l)),this.on(this.tech_,"fullscreenchange",(l,u)=>this.handleTechFullscreenChange_(l,u)),this.on(this.tech_,"fullscreenerror",(l,u)=>this.handleTechFullscreenError_(l,u)),this.on(this.tech_,"enterpictureinpicture",l=>this.handleTechEnterPictureInPicture_(l)),this.on(this.tech_,"leavepictureinpicture",l=>this.handleTechLeavePictureInPicture_(l)),this.on(this.tech_,"error",l=>this.handleTechError_(l)),this.on(this.tech_,"posterchange",l=>this.handleTechPosterChange_(l)),this.on(this.tech_,"textdata",l=>this.handleTechTextData_(l)),this.on(this.tech_,"ratechange",l=>this.handleTechRateChange_(l)),this.on(this.tech_,"loadedmetadata",this.boundUpdateStyleEl_),this.usingNativeControls(this.techGet_("controls")),this.controls()&&!this.usingNativeControls()&&this.addTechControlsListeners_(),this.tech_.el().parentNode!==this.el()&&(r!=="Html5"||!this.tag)&&CC(this.tech_.el(),this.el()),this.tag&&(this.tag.player=null,this.tag=null)}unloadTech_(){Ks.names.forEach(e=>{const t=Ks[e];this[t.privateName]=this[t.getterName]()}),this.textTracksJson_=zL.textTracksToJson(this.tech_),this.isReady_=!1,this.tech_.dispose(),this.tech_=!1,this.isPosterFromTech_&&(this.poster_="",this.trigger("posterchange")),this.isPosterFromTech_=!1}tech(e){return e===void 0&&Ur.warn(`Using the tech directly can be dangerous. I hope you know what you're doing.
See https://github.com/videojs/video.js/issues/2617 for more info.
`),this.tech_}version(){return{"video.js":bC}}addTechControlsListeners_(){this.removeTechControlsListeners_(),this.on(this.tech_,"click",this.boundHandleTechClick_),this.on(this.tech_,"dblclick",this.boundHandleTechDoubleClick_),this.on(this.tech_,"touchstart",this.boundHandleTechTouchStart_),this.on(this.tech_,"touchmove",this.boundHandleTechTouchMove_),this.on(this.tech_,"touchend",this.boundHandleTechTouchEnd_),this.on(this.tech_,"tap",this.boundHandleTechTap_)}removeTechControlsListeners_(){this.off(this.tech_,"tap",this.boundHandleTechTap_),this.off(this.tech_,"touchstart",this.boundHandleTechTouchStart_),this.off(this.tech_,"touchmove",this.boundHandleTechTouchMove_),this.off(this.tech_,"touchend",this.boundHandleTechTouchEnd_),this.off(this.tech_,"click",this.boundHandleTechClick_),this.off(this.tech_,"dblclick",this.boundHandleTechDoubleClick_)}handleTechReady_(){this.triggerReady(),this.cache_.volume&&this.techCall_("setVolume",this.cache_.volume),this.handleTechPosterChange_(),this.handleTechDurationChange_()}handleTechLoadStart_(){this.removeClass("vjs-ended","vjs-seeking"),this.error(null),this.handleTechDurationChange_(),this.paused()?(this.hasStarted(!1),this.trigger("loadstart")):this.trigger("loadstart"),this.manualAutoplay_(this.autoplay()===!0&&this.options_.normalizeAutoplay?"play":this.autoplay())}manualAutoplay_(e){if(!this.tech_||typeof e!="string")return;const t=()=>{const n=this.muted();this.muted(!0);const s=()=>{this.muted(n)};this.playTerminatedQueue_.push(s);const a=this.play();if(a0(a))return a.catch(o=>{throw s(),new Error(`Rejection at manualAutoplay. Restoring muted value. ${o||""}`)})};let r;if(e==="any"&&!this.muted()?(r=this.play(),a0(r)&&(r=r.catch(t))):e==="muted"&&!this.muted()?r=t():r=this.play(),!!a0(r))return r.then(()=>{this.trigger({type:"autoplay-success",autoplay:e})}).catch(()=>{this.trigger({type:"autoplay-failure",autoplay:e})})}updateSourceCaches_(e=""){let t=e,r="";typeof t!="string"&&(t=e.src,r=e.type),this.cache_.source=this.cache_.source||{},this.cache_.sources=this.cache_.sources||[],t&&!r&&(r=Sne(this,t)),this.cache_.source=Ai({},e,{src:t,type:r});const n=this.cache_.sources.filter(l=>l.src&&l.src===t),s=[],a=this.$$("source"),o=[];for(let l=0;l<a.length;l++){const u=Jc(a[l]);s.push(u),u.src&&u.src===t&&o.push(u.src)}o.length&&!n.length?this.cache_.sources=s:n.length||(this.cache_.sources=[this.cache_.source]),this.cache_.src=t}handleTechSourceset_(e){if(!this.changingSrc_){let t=s=>this.updateSourceCaches_(s);const r=this.currentSource().src,n=e.src;r&&!/^blob:/.test(r)&&/^blob:/.test(n)&&(!this.lastSource_||this.lastSource_.tech!==n&&this.lastSource_.player!==r)&&(t=()=>{}),t(n),e.src||this.tech_.any(["sourceset","loadstart"],s=>{if(s.type==="sourceset")return;const a=this.techGet_("currentSrc");this.lastSource_.tech=a,this.updateSourceCaches_(a)})}this.lastSource_={player:this.currentSource().src,tech:e.src},this.trigger({src:e.src,type:"sourceset"})}hasStarted(e){if(e===void 0)return this.hasStarted_;e!==this.hasStarted_&&(this.hasStarted_=e,this.hasStarted_?this.addClass("vjs-has-started"):this.removeClass("vjs-has-started"))}handleTechPlay_(){this.removeClass("vjs-ended","vjs-paused"),this.addClass("vjs-playing"),this.hasStarted(!0),this.trigger("play")}handleTechRateChange_(){this.tech_.playbackRate()>0&&this.cache_.lastPlaybackRate===0&&(this.queuedCallbacks_.forEach(e=>e.callback(e.event)),this.queuedCallbacks_=[]),this.cache_.lastPlaybackRate=this.tech_.playbackRate(),this.trigger("ratechange")}handleTechWaiting_(){this.addClass("vjs-waiting"),this.trigger("waiting");const e=this.currentTime(),t=()=>{e!==this.currentTime()&&(this.removeClass("vjs-waiting"),this.off("timeupdate",t))};this.on("timeupdate",t)}handleTechCanPlay_(){this.removeClass("vjs-waiting"),this.trigger("canplay")}handleTechCanPlayThrough_(){this.removeClass("vjs-waiting"),this.trigger("canplaythrough")}handleTechPlaying_(){this.removeClass("vjs-waiting"),this.trigger("playing")}handleTechSeeking_(){this.addClass("vjs-seeking"),this.trigger("seeking")}handleTechSeeked_(){this.removeClass("vjs-seeking","vjs-ended"),this.trigger("seeked")}handleTechPause_(){this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.trigger("pause")}handleTechEnded_(){this.addClass("vjs-ended"),this.removeClass("vjs-waiting"),this.options_.loop?(this.currentTime(0),this.play()):this.paused()||this.pause(),this.trigger("ended")}handleTechDurationChange_(){this.duration(this.techGet_("duration"))}handleTechClick_(e){this.controls_&&(this.options_===void 0||this.options_.userActions===void 0||this.options_.userActions.click===void 0||this.options_.userActions.click!==!1)&&(this.options_!==void 0&&this.options_.userActions!==void 0&&typeof this.options_.userActions.click=="function"?this.options_.userActions.click.call(this,e):this.paused()?Yl(this.play()):this.pause())}handleTechDoubleClick_(e){if(!this.controls_)return;Array.prototype.some.call(this.$$(".vjs-control-bar, .vjs-modal-dialog"),r=>r.contains(e.target))||(this.options_===void 0||this.options_.userActions===void 0||this.options_.userActions.doubleClick===void 0||this.options_.userActions.doubleClick!==!1)&&(this.options_!==void 0&&this.options_.userActions!==void 0&&typeof this.options_.userActions.doubleClick=="function"?this.options_.userActions.doubleClick.call(this,e):this.isInPictureInPicture()&&!Me.pictureInPictureElement?this.exitPictureInPicture():this.isFullscreen()?this.exitFullscreen():this.requestFullscreen())}handleTechTap_(){this.userActive(!this.userActive())}handleTechTouchStart_(){this.userWasActive=this.userActive()}handleTechTouchMove_(){this.userWasActive&&this.reportUserActivity()}handleTechTouchEnd_(e){e.cancelable&&e.preventDefault()}toggleFullscreenClass_(){this.isFullscreen()?this.addClass("vjs-fullscreen"):this.removeClass("vjs-fullscreen")}documentFullscreenChange_(e){const t=e.target.player;if(t&&t!==this)return;const r=this.el();let n=Me[this.fsApi_.fullscreenElement]===r;!n&&r.matches&&(n=r.matches(":"+this.fsApi_.fullscreen)),this.isFullscreen(n)}handleTechFullscreenChange_(e,t){t&&(t.nativeIOSFullscreen&&(this.addClass("vjs-ios-native-fs"),this.tech_.one("webkitendfullscreen",()=>{this.removeClass("vjs-ios-native-fs")})),this.isFullscreen(t.isFullscreen))}handleTechFullscreenError_(e,t){this.trigger("fullscreenerror",t)}togglePictureInPictureClass_(){this.isInPictureInPicture()?this.addClass("vjs-picture-in-picture"):this.removeClass("vjs-picture-in-picture")}handleTechEnterPictureInPicture_(e){this.isInPictureInPicture(!0)}handleTechLeavePictureInPicture_(e){this.isInPictureInPicture(!1)}handleTechError_(){const e=this.tech_.error();e&&this.error(e)}handleTechTextData_(){let e=null;arguments.length>1&&(e=arguments[1]),this.trigger("textdata",e)}getCache(){return this.cache_}resetCache_(){this.cache_={currentTime:0,initTime:0,inactivityTimeout:this.options_.inactivityTimeout,duration:NaN,lastVolume:1,lastPlaybackRate:this.defaultPlaybackRate(),media:null,src:"",source:{},sources:[],playbackRates:[],volume:1}}techCall_(e,t){this.ready(function(){if(e in yne)return gne(this.middleware_,this.tech_,e,t);if(e in KL)return GL(this.middleware_,this.tech_,e,t);try{this.tech_&&this.tech_[e](t)}catch(r){throw Ur(r),r}},!0)}techGet_(e){if(!(!this.tech_||!this.tech_.isReady_)){if(e in vne)return mne(this.middleware_,this.tech_,e);if(e in KL)return GL(this.middleware_,this.tech_,e);try{return this.tech_[e]()}catch(t){throw this.tech_[e]===void 0?(Ur(`Video.js: ${e} method not defined for ${this.techName_} playback technology.`,t),t):t.name==="TypeError"?(Ur(`Video.js: ${e} unavailable on ${this.techName_} playback technology element.`,t),this.tech_.isReady_=!1,t):(Ur(t),t)}}}play(){return new Promise(e=>{this.play_(e)})}play_(e=Yl){this.playCallbacks_.push(e);const t=!!(!this.changingSrc_&&(this.src()||this.currentSrc())),r=!!(iT||ta);if(this.waitToPlay_&&(this.off(["ready","loadstart"],this.waitToPlay_),this.waitToPlay_=null),!this.isReady_||!t){this.waitToPlay_=a=>{this.play_()},this.one(["ready","loadstart"],this.waitToPlay_),!t&&r&&this.load();return}const n=this.techGet_("play");r&&this.hasClass("vjs-ended")&&this.resetProgressBar_(),n===null?this.runPlayTerminatedQueue_():this.runPlayCallbacks_(n)}runPlayTerminatedQueue_(){const e=this.playTerminatedQueue_.slice(0);this.playTerminatedQueue_=[],e.forEach(function(t){t()})}runPlayCallbacks_(e){const t=this.playCallbacks_.slice(0);this.playCallbacks_=[],this.playTerminatedQueue_=[],t.forEach(function(r){r(e)})}pause(){this.techCall_("pause")}paused(){return this.techGet_("paused")!==!1}played(){return this.techGet_("played")||dl(0,0)}scrubbing(e){if(typeof e>"u")return this.scrubbing_;this.scrubbing_=!!e,this.techCall_("setScrubbing",this.scrubbing_),e?this.addClass("vjs-scrubbing"):this.removeClass("vjs-scrubbing")}currentTime(e){if(e===void 0)return this.cache_.currentTime=this.techGet_("currentTime")||0,this.cache_.currentTime;if(e<0&&(e=0),!this.isReady_||this.changingSrc_||!this.tech_||!this.tech_.isReady_){this.cache_.initTime=e,this.off("canplay",this.boundApplyInitTime_),this.one("canplay",this.boundApplyInitTime_);return}this.techCall_("setCurrentTime",e),this.cache_.initTime=0,isFinite(e)&&(this.cache_.currentTime=Number(e))}applyInitTime_(){this.currentTime(this.cache_.initTime)}duration(e){if(e===void 0)return this.cache_.duration!==void 0?this.cache_.duration:NaN;e=parseFloat(e),e<0&&(e=1/0),e!==this.cache_.duration&&(this.cache_.duration=e,e===1/0?this.addClass("vjs-live"):this.removeClass("vjs-live"),isNaN(e)||this.trigger("durationchange"))}remainingTime(){return this.duration()-this.currentTime()}remainingTimeDisplay(){return Math.floor(this.duration())-Math.floor(this.currentTime())}buffered(){let e=this.techGet_("buffered");return(!e||!e.length)&&(e=dl(0,0)),e}seekable(){let e=this.techGet_("seekable");return(!e||!e.length)&&(e=dl(0,0)),e}seeking(){return this.techGet_("seeking")}ended(){return this.techGet_("ended")}networkState(){return this.techGet_("networkState")}readyState(){return this.techGet_("readyState")}bufferedPercent(){return RB(this.buffered(),this.duration())}bufferedEnd(){const e=this.buffered(),t=this.duration();let r=e.end(e.length-1);return r>t&&(r=t),r}volume(e){let t;if(e!==void 0){t=Math.max(0,Math.min(1,e)),this.cache_.volume=t,this.techCall_("setVolume",t),t>0&&this.lastVolume_(t);return}return t=parseFloat(this.techGet_("volume")),isNaN(t)?1:t}muted(e){if(e!==void 0){this.techCall_("setMuted",e);return}return this.techGet_("muted")||!1}defaultMuted(e){return e!==void 0&&this.techCall_("setDefaultMuted",e),this.techGet_("defaultMuted")||!1}lastVolume_(e){if(e!==void 0&&e!==0){this.cache_.lastVolume=e;return}return this.cache_.lastVolume}supportsFullScreen(){return this.techGet_("supportsFullScreen")||!1}isFullscreen(e){if(e!==void 0){const t=this.isFullscreen_;this.isFullscreen_=!!e,this.isFullscreen_!==t&&this.fsApi_.prefixed&&this.trigger("fullscreenchange"),this.toggleFullscreenClass_();return}return this.isFullscreen_}requestFullscreen(e){this.isInPictureInPicture()&&this.exitPictureInPicture();const t=this;return new Promise((r,n)=>{function s(){t.off("fullscreenerror",o),t.off("fullscreenchange",a)}function a(){s(),r()}function o(u,c){s(),n(c)}t.one("fullscreenchange",a),t.one("fullscreenerror",o);const l=t.requestFullscreenHelper_(e);l&&(l.then(s,s),l.then(r,n))})}requestFullscreenHelper_(e){let t;if(this.fsApi_.prefixed||(t=this.options_.fullscreen&&this.options_.fullscreen.options||{},e!==void 0&&(t=e)),this.fsApi_.requestFullscreen){const r=this.el_[this.fsApi_.requestFullscreen](t);return r&&r.then(()=>this.isFullscreen(!0),()=>this.isFullscreen(!1)),r}else this.tech_.supportsFullScreen()&&!this.options_.preferFullWindow?this.techCall_("enterFullScreen"):this.enterFullWindow()}exitFullscreen(){const e=this;return new Promise((t,r)=>{function n(){e.off("fullscreenerror",a),e.off("fullscreenchange",s)}function s(){n(),t()}function a(l,u){n(),r(u)}e.one("fullscreenchange",s),e.one("fullscreenerror",a);const o=e.exitFullscreenHelper_();o&&(o.then(n,n),o.then(t,r))})}exitFullscreenHelper_(){if(this.fsApi_.requestFullscreen){const e=Me[this.fsApi_.exitFullscreen]();return e&&Yl(e.then(()=>this.isFullscreen(!1))),e}else this.tech_.supportsFullScreen()&&!this.options_.preferFullWindow?this.techCall_("exitFullScreen"):this.exitFullWindow()}enterFullWindow(){this.isFullscreen(!0),this.isFullWindow=!0,this.docOrigOverflow=Me.documentElement.style.overflow,no(Me,"keydown",this.boundFullWindowOnEscKey_),Me.documentElement.style.overflow="hidden",ph(Me.body,"vjs-full-window"),this.trigger("enterFullWindow")}fullWindowOnEscKey(e){e.key==="Escape"&&this.isFullscreen()===!0&&(this.isFullWindow?this.exitFullWindow():this.exitFullscreen())}exitFullWindow(){this.isFullscreen(!1),this.isFullWindow=!1,Rs(Me,"keydown",this.boundFullWindowOnEscKey_),Me.documentElement.style.overflow=this.docOrigOverflow,nT(Me.body,"vjs-full-window"),this.trigger("exitFullWindow")}disablePictureInPicture(e){if(e===void 0)return this.techGet_("disablePictureInPicture");this.techCall_("setDisablePictureInPicture",e),this.options_.disablePictureInPicture=e,this.trigger("disablepictureinpicturechanged")}isInPictureInPicture(e){if(e!==void 0){this.isInPictureInPicture_=!!e,this.togglePictureInPictureClass_();return}return!!this.isInPictureInPicture_}requestPictureInPicture(){if(this.options_.enableDocumentPictureInPicture&&X.documentPictureInPicture){const e=Me.createElement(this.el().tagName);return e.classList=this.el().classList,e.classList.add("vjs-pip-container"),this.posterImage&&e.appendChild(this.posterImage.el().cloneNode(!0)),this.titleBar&&e.appendChild(this.titleBar.el().cloneNode(!0)),e.appendChild(_r("p",{className:"vjs-pip-text"},{},this.localize("Playing in picture-in-picture"))),X.documentPictureInPicture.requestWindow({width:this.videoWidth(),height:this.videoHeight()}).then(t=>(_B(t),this.el_.parentNode.insertBefore(e,this.el_),t.document.body.appendChild(this.el_),t.document.body.classList.add("vjs-pip-window"),this.player_.isInPictureInPicture(!0),this.player_.trigger({type:"enterpictureinpicture",pipWindow:t}),t.addEventListener("pagehide",r=>{const n=r.target.querySelector(".video-js");e.parentNode.replaceChild(n,e),this.player_.isInPictureInPicture(!1),this.player_.trigger("leavepictureinpicture")}),t))}return"pictureInPictureEnabled"in Me&&this.disablePictureInPicture()===!1?this.techGet_("requestPictureInPicture"):Promise.reject("No PiP mode is available")}exitPictureInPicture(){if(X.documentPictureInPicture&&X.documentPictureInPicture.window)return X.documentPictureInPicture.window.close(),Promise.resolve();if("pictureInPictureEnabled"in Me)return Me.exitPictureInPicture()}handleKeyDown(e){const{userActions:t}=this.options_;!t||!t.hotkeys||(n=>{const s=n.tagName.toLowerCase();if(n.isContentEditable)return!0;const a=["button","checkbox","hidden","radio","reset","submit"];return s==="input"?a.indexOf(n.type)===-1:["textarea"].indexOf(s)!==-1})(this.el_.ownerDocument.activeElement)||(typeof t.hotkeys=="function"?t.hotkeys.call(this,e):this.handleHotkeys(e))}handleHotkeys(e){const t=this.options_.userActions?this.options_.userActions.hotkeys:{},{fullscreenKey:r=a=>e.key.toLowerCase()==="f",muteKey:n=a=>e.key.toLowerCase()==="m",playPauseKey:s=a=>e.key.toLowerCase()==="k"||e.key.toLowerCase()===" "}=t;if(r.call(this,e)){e.preventDefault(),e.stopPropagation();const a=at.getComponent("FullscreenToggle");Me[this.fsApi_.fullscreenEnabled]!==!1&&a.prototype.handleClick.call(this,e)}else n.call(this,e)?(e.preventDefault(),e.stopPropagation(),at.getComponent("MuteToggle").prototype.handleClick.call(this,e)):s.call(this,e)&&(e.preventDefault(),e.stopPropagation(),at.getComponent("PlayToggle").prototype.handleClick.call(this,e))}canPlayType(e){let t;for(let r=0,n=this.options_.techOrder;r<n.length;r++){const s=n[r];let a=Ii.getTech(s);if(a||(a=at.getComponent(s)),!a){Ur.error(`The "${s}" tech is undefined. Skipped browser support check for that tech.`);continue}if(a.isSupported()&&(t=a.canPlayType(e),t))return t}return""}selectSource(e){const t=this.options_.techOrder.map(o=>[o,Ii.getTech(o)]).filter(([o,l])=>l?l.isSupported():(Ur.error(`The "${o}" tech is undefined. Skipped browser support check for that tech.`),!1)),r=function(o,l,u){let c;return o.some(h=>l.some(m=>{if(c=u(h,m),c)return!0})),c};let n;const s=o=>(l,u)=>o(u,l),a=([o,l],u)=>{if(l.canPlaySource(u,this.options_[o.toLowerCase()]))return{source:u,tech:o}};return this.options_.sourceOrder?n=r(e,t,s(a)):n=r(t,e,a),n||!1}handleSrc_(e,t){if(typeof e>"u")return this.cache_.src||"";this.resetRetryOnError_&&this.resetRetryOnError_();const r=NB(e);if(!r.length){this.setTimeout(function(){this.error({code:4,message:this.options_.notSupportedMessage})},0);return}if(this.changingSrc_=!0,t||(this.cache_.sources=r),this.updateSourceCaches_(r[0]),fne(this,r[0],(n,s)=>{if(this.middleware_=s,t||(this.cache_.sources=r),this.updateSourceCaches_(n),this.src_(n)){if(r.length>1)return this.handleSrc_(r.slice(1));this.changingSrc_=!1,this.setTimeout(function(){this.error({code:4,message:this.options_.notSupportedMessage})},0),this.triggerReady();return}pne(s,this.tech_)}),r.length>1){const n=()=>{this.error(null),this.handleSrc_(r.slice(1),!0)},s=()=>{this.off("error",n)};this.one("error",n),this.one("playing",s),this.resetRetryOnError_=()=>{this.off("error",n),this.off("playing",s)}}}src(e){return this.handleSrc_(e,!1)}src_(e){const t=this.selectSource([e]);return t?AB(t.tech,this.techName_)?(this.ready(function(){this.tech_.constructor.prototype.hasOwnProperty("setSource")?this.techCall_("setSource",e):this.techCall_("src",e.src),this.changingSrc_=!1},!0),!1):(this.changingSrc_=!0,this.loadTech_(t.tech,t.source),this.tech_.ready(()=>{this.changingSrc_=!1}),!1):!0}addSourceElement(e,t){return this.tech_?this.tech_.addSourceElement(e,t):!1}removeSourceElement(e){return this.tech_?this.tech_.removeSourceElement(e):!1}load(){if(this.tech_&&this.tech_.vhs){this.src(this.currentSource());return}this.techCall_("load")}reset(){if(this.paused())this.doReset_();else{const e=this.play();Yl(e.then(()=>this.doReset_()))}}doReset_(){this.tech_&&this.tech_.clearTracks("text"),this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.resetCache_(),this.poster(""),this.loadTech_(this.options_.techOrder[0],null),this.techCall_("reset"),this.resetControlBarUI_(),this.error(null),this.titleBar&&this.titleBar.update({title:void 0,description:void 0}),ic(this)&&this.trigger("playerreset")}resetControlBarUI_(){this.resetProgressBar_(),this.resetPlaybackRate_(),this.resetVolumeBar_()}resetProgressBar_(){this.currentTime(0);const{currentTimeDisplay:e,durationDisplay:t,progressControl:r,remainingTimeDisplay:n}=this.controlBar||{},{seekBar:s}=r||{};e&&e.updateContent(),t&&t.updateContent(),n&&n.updateContent(),s&&(s.update(),s.loadProgressBar&&s.loadProgressBar.update())}resetPlaybackRate_(){this.playbackRate(this.defaultPlaybackRate()),this.handleTechRateChange_()}resetVolumeBar_(){this.volume(1),this.trigger("volumechange")}currentSources(){const e=this.currentSource(),t=[];return Object.keys(e).length!==0&&t.push(e),this.cache_.sources||t}currentSource(){return this.cache_.source||{}}currentSrc(){return this.currentSource()&&this.currentSource().src||""}currentType(){return this.currentSource()&&this.currentSource().type||""}preload(e){if(e!==void 0){this.techCall_("setPreload",e),this.options_.preload=e;return}return this.techGet_("preload")}autoplay(e){if(e===void 0)return this.options_.autoplay||!1;let t;typeof e=="string"&&/(any|play|muted)/.test(e)||e===!0&&this.options_.normalizeAutoplay?(this.options_.autoplay=e,this.manualAutoplay_(typeof e=="string"?e:"play"),t=!1):e?this.options_.autoplay=!0:this.options_.autoplay=!1,t=typeof t>"u"?this.options_.autoplay:t,this.tech_&&this.techCall_("setAutoplay",t)}playsinline(e){return e!==void 0&&(this.techCall_("setPlaysinline",e),this.options_.playsinline=e),this.techGet_("playsinline")}loop(e){if(e!==void 0){this.techCall_("setLoop",e),this.options_.loop=e;return}return this.techGet_("loop")}poster(e){if(e===void 0)return this.poster_;e||(e=""),e!==this.poster_&&(this.poster_=e,this.techCall_("setPoster",e),this.isPosterFromTech_=!1,this.trigger("posterchange"))}handleTechPosterChange_(){if((!this.poster_||this.options_.techCanOverridePoster)&&this.tech_&&this.tech_.poster){const e=this.tech_.poster()||"";e!==this.poster_&&(this.poster_=e,this.isPosterFromTech_=!0,this.trigger("posterchange"))}}controls(e){if(e===void 0)return!!this.controls_;e=!!e,this.controls_!==e&&(this.controls_=e,this.usingNativeControls()&&this.techCall_("setControls",e),this.controls_?(this.removeClass("vjs-controls-disabled"),this.addClass("vjs-controls-enabled"),this.trigger("controlsenabled"),this.usingNativeControls()||this.addTechControlsListeners_()):(this.removeClass("vjs-controls-enabled"),this.addClass("vjs-controls-disabled"),this.trigger("controlsdisabled"),this.usingNativeControls()||this.removeTechControlsListeners_()))}usingNativeControls(e){if(e===void 0)return!!this.usingNativeControls_;e=!!e,this.usingNativeControls_!==e&&(this.usingNativeControls_=e,this.usingNativeControls_?(this.addClass("vjs-using-native-controls"),this.trigger("usingnativecontrols")):(this.removeClass("vjs-using-native-controls"),this.trigger("usingcustomcontrols")))}error(e){if(e===void 0)return this.error_||null;if(hd("beforeerror").forEach(t=>{const r=t(this,e);if(!(hu(r)&&!Array.isArray(r)||typeof r=="string"||typeof r=="number"||r===null)){this.log.error("please return a value that MediaError expects in beforeerror hooks");return}e=r}),this.options_.suppressNotSupportedError&&e&&e.code===4){const t=function(){this.error(e)};this.options_.suppressNotSupportedError=!1,this.any(["click","touchstart"],t),this.one("loadstart",function(){this.off(["click","touchstart"],t)});return}if(e===null){this.error_=null,this.removeClass("vjs-error"),this.errorDisplay&&this.errorDisplay.close();return}this.error_=new Qi(e),this.addClass("vjs-error"),Ur.error(`(CODE:${this.error_.code} ${Qi.errorTypes[this.error_.code]})`,this.error_.message,this.error_),this.trigger("error"),hd("error").forEach(t=>t(this,this.error_))}reportUserActivity(e){this.userActivity_=!0}userActive(e){if(e===void 0)return this.userActive_;if(e=!!e,e!==this.userActive_){if(this.userActive_=e,this.userActive_){this.userActivity_=!0,this.removeClass("vjs-user-inactive"),this.addClass("vjs-user-active"),this.trigger("useractive");return}this.tech_&&this.tech_.one("mousemove",function(t){t.stopPropagation(),t.preventDefault()}),this.userActivity_=!1,this.removeClass("vjs-user-active"),this.addClass("vjs-user-inactive"),this.trigger("userinactive")}}listenForUserActivity_(){let e,t,r;const n=Ri(this,this.reportUserActivity),s=function(h){(h.screenX!==t||h.screenY!==r)&&(t=h.screenX,r=h.screenY,n())},a=function(){n(),this.clearInterval(e),e=this.setInterval(n,250)},o=function(h){n(),this.clearInterval(e)};this.on("mousedown",a),this.on("mousemove",s),this.on("mouseup",o),this.on("mouseleave",o);const l=this.getChild("controlBar");l&&!ta&&!fu&&(l.on("mouseenter",function(h){this.player().options_.inactivityTimeout!==0&&(this.player().cache_.inactivityTimeout=this.player().options_.inactivityTimeout),this.player().options_.inactivityTimeout=0}),l.on("mouseleave",function(h){this.player().options_.inactivityTimeout=this.player().cache_.inactivityTimeout})),this.on("keydown",n),this.on("keyup",n);let u;const c=function(){if(!this.userActivity_)return;this.userActivity_=!1,this.userActive(!0),this.clearTimeout(u);const h=this.options_.inactivityTimeout;h<=0||(u=this.setTimeout(function(){this.userActivity_||this.userActive(!1)},h))};this.setInterval(c,250)}playbackRate(e){if(e!==void 0){this.techCall_("setPlaybackRate",e);return}return this.tech_&&this.tech_.featuresPlaybackRate?this.cache_.lastPlaybackRate||this.techGet_("playbackRate"):1}defaultPlaybackRate(e){return e!==void 0?this.techCall_("setDefaultPlaybackRate",e):this.tech_&&this.tech_.featuresPlaybackRate?this.techGet_("defaultPlaybackRate"):1}isAudio(e){if(e!==void 0){this.isAudio_=!!e;return}return!!this.isAudio_}updatePlayerHeightOnAudioOnlyMode_(){const e=this.getChild("ControlBar");!e||this.audioOnlyCache_.controlBarHeight===e.currentHeight()||(this.audioOnlyCache_.controlBarHeight=e.currentHeight(),this.height(this.audioOnlyCache_.controlBarHeight))}enableAudioOnlyUI_(){this.addClass("vjs-audio-only-mode");const e=this.children(),t=this.getChild("ControlBar"),r=t&&t.currentHeight();e.forEach(n=>{n!==t&&n.el_&&!n.hasClass("vjs-hidden")&&(n.hide(),this.audioOnlyCache_.hiddenChildren.push(n))}),this.audioOnlyCache_.playerHeight=this.currentHeight(),this.audioOnlyCache_.controlBarHeight=r,this.on("playerresize",this.boundUpdatePlayerHeightOnAudioOnlyMode_),this.height(r),this.trigger("audioonlymodechange")}disableAudioOnlyUI_(){this.removeClass("vjs-audio-only-mode"),this.off("playerresize",this.boundUpdatePlayerHeightOnAudioOnlyMode_),this.audioOnlyCache_.hiddenChildren.forEach(e=>e.show()),this.height(this.audioOnlyCache_.playerHeight),this.trigger("audioonlymodechange")}audioOnlyMode(e){if(typeof e!="boolean"||e===this.audioOnlyMode_)return this.audioOnlyMode_;if(this.audioOnlyMode_=e,e){const t=[];return this.isInPictureInPicture()&&t.push(this.exitPictureInPicture()),this.isFullscreen()&&t.push(this.exitFullscreen()),this.audioPosterMode()&&t.push(this.audioPosterMode(!1)),Promise.all(t).then(()=>this.enableAudioOnlyUI_())}return Promise.resolve().then(()=>this.disableAudioOnlyUI_())}enablePosterModeUI_(){(this.tech_&&this.tech_).hide(),this.addClass("vjs-audio-poster-mode"),this.trigger("audiopostermodechange")}disablePosterModeUI_(){(this.tech_&&this.tech_).show(),this.removeClass("vjs-audio-poster-mode"),this.trigger("audiopostermodechange")}audioPosterMode(e){return typeof e!="boolean"||e===this.audioPosterMode_?this.audioPosterMode_:(this.audioPosterMode_=e,e?this.audioOnlyMode()?this.audioOnlyMode(!1).then(()=>{this.enablePosterModeUI_()}):Promise.resolve().then(()=>{this.enablePosterModeUI_()}):Promise.resolve().then(()=>{this.disablePosterModeUI_()}))}addTextTrack(e,t,r){if(this.tech_)return this.tech_.addTextTrack(e,t,r)}addRemoteTextTrack(e,t){if(this.tech_)return this.tech_.addRemoteTextTrack(e,t)}removeRemoteTextTrack(e={}){let{track:t}=e;if(t||(t=e),this.tech_)return this.tech_.removeRemoteTextTrack(t)}getVideoPlaybackQuality(){return this.techGet_("getVideoPlaybackQuality")}videoWidth(){return this.tech_&&this.tech_.videoWidth&&this.tech_.videoWidth()||0}videoHeight(){return this.tech_&&this.tech_.videoHeight&&this.tech_.videoHeight()||0}language(e){if(e===void 0)return this.language_;this.language_!==String(e).toLowerCase()&&(this.language_=String(e).toLowerCase(),ic(this)&&this.trigger("languagechange"))}languages(){return Ai(bf.prototype.options_.languages,this.languages_)}toJSON(){const e=Ai(this.options_),t=e.tracks;e.tracks=[];for(let r=0;r<t.length;r++){let n=t[r];n=Ai(n),n.player=void 0,e.tracks[r]=n}return e}createModal(e,t){t=t||{},t.content=e||"";const r=new Mp(this,t);return this.addChild(r),r.on("dispose",()=>{this.removeChild(r)}),r.open(),r}updateCurrentBreakpoint_(){if(!this.responsive())return;const e=this.currentBreakpoint(),t=this.currentWidth();for(let r=0;r<LC.length;r++){const n=LC[r],s=this.breakpoints_[n];if(t<=s){if(e===n)return;e&&this.removeClass(Fy[e]),this.addClass(Fy[n]),this.breakpoint_=n;break}}}removeCurrentBreakpoint_(){const e=this.currentBreakpointClass();this.breakpoint_="",e&&this.removeClass(e)}breakpoints(e){return e===void 0?Object.assign(this.breakpoints_):(this.breakpoint_="",this.breakpoints_=Object.assign({},tse,e),this.updateCurrentBreakpoint_(),Object.assign(this.breakpoints_))}responsive(e){if(e===void 0)return this.responsive_;e=!!e;const t=this.responsive_;if(e!==t)return this.responsive_=e,e?(this.on("playerresize",this.boundUpdateCurrentBreakpoint_),this.updateCurrentBreakpoint_()):(this.off("playerresize",this.boundUpdateCurrentBreakpoint_),this.removeCurrentBreakpoint_()),e}currentBreakpoint(){return this.breakpoint_}currentBreakpointClass(){return Fy[this.breakpoint_]||""}loadMedia(e,t){if(!e||typeof e!="object")return;const r=this.crossOrigin();this.reset(),this.cache_.media=Ai(e);const{artist:n,artwork:s,description:a,poster:o,src:l,textTracks:u,title:c}=this.cache_.media;!s&&o&&(this.cache_.media.artwork=[{src:o,type:A_(o)}]),r&&this.crossOrigin(r),l&&this.src(l),o&&this.poster(o),Array.isArray(u)&&u.forEach(h=>this.addRemoteTextTrack(h,!1)),this.titleBar&&this.titleBar.update({title:c,description:a||n||""}),this.ready(t)}getMedia(){if(!this.cache_.media){const e=this.poster(),t=this.currentSources(),r=Array.prototype.map.call(this.remoteTextTracks(),s=>({kind:s.kind,label:s.label,language:s.language,src:s.src})),n={src:t,textTracks:r};return e&&(n.poster=e,n.artwork=[{src:n.poster,type:A_(n.poster)}]),n}return Ai(this.cache_.media)}static getTagSettings(e){const t={sources:[],tracks:[]},r=Jc(e),n=r["data-setup"];if(n0(e,"vjs-fill")&&(r.fill=!0),n0(e,"vjs-fluid")&&(r.fluid=!0),n!==null)try{Object.assign(r,JSON.parse(n||"{}"))}catch(s){Ur.error("data-setup",s)}if(Object.assign(t,r),e.hasChildNodes()){const s=e.childNodes;for(let a=0,o=s.length;a<o;a++){const l=s[a],u=l.nodeName.toLowerCase();u==="source"?t.sources.push(Jc(l)):u==="track"&&t.tracks.push(Jc(l))}}return t}debug(e){if(e===void 0)return this.debugEnabled_;e?(this.trigger("debugon"),this.previousLogLevel_=this.log.level,this.log.level("debug"),this.debugEnabled_=!0):(this.trigger("debugoff"),this.log.level(this.previousLogLevel_),this.previousLogLevel_=void 0,this.debugEnabled_=!1)}playbackRates(e){if(e===void 0)return this.cache_.playbackRates;Array.isArray(e)&&e.every(t=>typeof t=="number")&&(this.cache_.playbackRates=e,this.trigger("playbackrateschange"))}};Ks.names.forEach(function(i){const e=Ks[i];Ln.prototype[e.getterName]=function(){return this.tech_?this.tech_[e.getterName]():(this[e.privateName]=this[e.privateName]||new e.ListClass,this[e.privateName])}});Ln.prototype.crossorigin=Ln.prototype.crossOrigin;Ln.players={};const Dm=X.navigator;Ln.prototype.options_={techOrder:Ii.defaultTechOrder_,html5:{},enableSourceset:!0,inactivityTimeout:2e3,playbackRates:[],liveui:!1,children:["mediaLoader","posterImage","titleBar","textTrackDisplay","loadingSpinner","bigPlayButton","liveTracker","controlBar","errorDisplay","textTrackSettings","resizeManager"],language:Dm&&(Dm.languages&&Dm.languages[0]||Dm.userLanguage||Dm.language)||"en",languages:{},notSupportedMessage:"No compatible source was found for this media.",normalizeAutoplay:!1,fullscreen:{options:{navigationUI:"hide"}},breakpoints:{},responsive:!1,audioOnlyMode:!1,audioPosterMode:!1,spatialNavigation:{enabled:!1,horizontalSeek:!1},enableSmoothSeeking:!1};pN.forEach(function(i){Ln.prototype[`handleTech${nn(i)}_`]=function(){return this.trigger(i)}});at.registerComponent("Player",Ln);const I_="plugin",qf="activePlugins_",If={},D_=i=>If.hasOwnProperty(i),By=i=>D_(i)?If[i]:void 0,mN=(i,e)=>{i[qf]=i[qf]||{},i[qf][e]=!0},P_=(i,e,t)=>{const r=(t?"before":"")+"pluginsetup";i.trigger(r,e),i.trigger(r+":"+e.name,e)},rse=function(i,e){const t=function(){P_(this,{name:i,plugin:e,instance:null},!0);const r=e.apply(this,arguments);return mN(this,i),P_(this,{name:i,plugin:e,instance:r}),r};return Object.keys(e).forEach(function(r){t[r]=e[r]}),t},dO=(i,e)=>(e.prototype.name=i,function(...t){P_(this,{name:i,plugin:e,instance:null},!0);const r=new e(this,...t);return this[i]=()=>r,P_(this,r.getEventHash()),r});let gu=class Ny{constructor(e){if(this.constructor===Ny)throw new Error("Plugin must be sub-classed; not directly instantiated.");this.player=e,this.log||(this.log=this.player.log.createLogger(this.name)),Jw(this),delete this.trigger,kB(this,this.constructor.defaultState),mN(e,this.name),this.dispose=this.dispose.bind(this),e.on("dispose",this.dispose)}version(){return this.constructor.VERSION}getEventHash(e={}){return e.name=this.name,e.plugin=this.constructor,e.instance=this,e}trigger(e,t={}){return Op(this.eventBusEl_,e,this.getEventHash(t))}handleStateChanged(e){}dispose(){const{name:e,player:t}=this;this.trigger("dispose"),this.off(),t.off("dispose",this.dispose),t[qf][e]=!1,this.player=this.state=null,t[e]=dO(e,If[e])}static isBasic(e){const t=typeof e=="string"?By(e):e;return typeof t=="function"&&!Ny.prototype.isPrototypeOf(t.prototype)}static registerPlugin(e,t){if(typeof e!="string")throw new Error(`Illegal plugin name, "${e}", must be a string, was ${typeof e}.`);if(D_(e))Ur.warn(`A plugin named "${e}" already exists. You may want to avoid re-registering plugins!`);else if(Ln.prototype.hasOwnProperty(e))throw new Error(`Illegal plugin name, "${e}", cannot share a name with an existing player method!`);if(typeof t!="function")throw new Error(`Illegal plugin for "${e}", must be a function, was ${typeof t}.`);return If[e]=t,e!==I_&&(Ny.isBasic(t)?Ln.prototype[e]=rse(e,t):Ln.prototype[e]=dO(e,t)),t}static deregisterPlugin(e){if(e===I_)throw new Error("Cannot de-register base plugin.");D_(e)&&(delete If[e],delete Ln.prototype[e])}static getPlugins(e=Object.keys(If)){let t;return e.forEach(r=>{const n=By(r);n&&(t=t||{},t[r]=n)}),t}static getPluginVersion(e){const t=By(e);return t&&t.VERSION||""}};gu.getPlugin=By;gu.BASE_PLUGIN_NAME=I_;gu.registerPlugin(I_,gu);Ln.prototype.usingPlugin=function(i){return!!this[qf]&&this[qf][i]===!0};Ln.prototype.hasPlugin=function(i){return!!D_(i)};function ise(i,e){let t=!1;return function(...r){return t||Ur.warn(i),t=!0,e.apply(this,r)}}function _l(i,e,t,r){return ise(`${e} is deprecated and will be removed in ${i}.0; please use ${t} instead.`,r)}var nse={NetworkBadStatus:"networkbadstatus",NetworkRequestFailed:"networkrequestfailed",NetworkRequestAborted:"networkrequestaborted",NetworkRequestTimeout:"networkrequesttimeout",NetworkBodyParserFailed:"networkbodyparserfailed",StreamingHlsPlaylistParserError:"streaminghlsplaylistparsererror",StreamingDashManifestParserError:"streamingdashmanifestparsererror",StreamingContentSteeringParserError:"streamingcontentsteeringparsererror",StreamingVttParserError:"streamingvttparsererror",StreamingFailedToSelectNextSegment:"streamingfailedtoselectnextsegment",StreamingFailedToDecryptSegment:"streamingfailedtodecryptsegment",StreamingFailedToTransmuxSegment:"streamingfailedtotransmuxsegment",StreamingFailedToAppendSegment:"streamingfailedtoappendsegment",StreamingCodecsChangeError:"streamingcodecschangeerror"};const gN=i=>i.indexOf("#")===0?i.slice(1):i;function _e(i,e,t){let r=_e.getPlayer(i);if(r)return e&&Ur.warn(`Player "${i}" is already initialised. Options will not be applied.`),t&&r.ready(t),r;const n=typeof i=="string"?fd("#"+gN(i)):i;if(!Lp(n))throw new TypeError("The element or ID supplied is not valid. (videojs)");const a=("getRootNode"in n?n.getRootNode()instanceof X.ShadowRoot:!1)?n.getRootNode():n.ownerDocument.body;(!n.ownerDocument.defaultView||!a.contains(n))&&Ur.warn("The element supplied is not included in the DOM"),e=e||{},e.restoreEl===!0&&(e.restoreEl=(n.parentNode&&n.parentNode.hasAttribute&&n.parentNode.hasAttribute("data-vjs-player")?n.parentNode:n).cloneNode(!0)),hd("beforesetup").forEach(l=>{const u=l(n,Ai(e));if(!hu(u)||Array.isArray(u)){Ur.error("please return an object in beforesetup hooks");return}e=Ai(e,u)});const o=at.getComponent("Player");return r=new o(n,e,t),hd("setup").forEach(l=>l(r)),r}_e.hooks_=Qu;_e.hooks=hd;_e.hook=Fie;_e.hookOnce=Bie;_e.removeHook=J8;if(X.VIDEOJS_NO_DYNAMIC_STYLE!==!0&&Rp()){let i=fd(".vjs-styles-defaults");if(!i){i=bB("vjs-styles-defaults");const e=fd("head");e&&e.insertBefore(i,e.firstChild),SB(i,`
      .video-js {
        width: 300px;
        height: 150px;
      }

      .vjs-fluid:not(.vjs-audio-only-mode) {
        padding-top: 56.25%
      }
    `)}}wC(1,_e);_e.VERSION=bC;_e.options=Ln.prototype.options_;_e.getPlayers=()=>Ln.players;_e.getPlayer=i=>{const e=Ln.players;let t;if(typeof i=="string"){const r=gN(i),n=e[r];if(n)return n;t=fd("#"+r)}else t=i;if(Lp(t)){const{player:r,playerId:n}=t;if(r||e[n])return r||e[n]}};_e.getAllPlayers=()=>Object.keys(Ln.players).map(i=>Ln.players[i]).filter(Boolean);_e.players=Ln.players;_e.getComponent=at.getComponent;_e.registerComponent=(i,e)=>(Ii.isTech(e)&&Ur.warn(`The ${i} tech was registered as a component. It should instead be registered using videojs.registerTech(name, tech)`),at.registerComponent.call(at,i,e));_e.getTech=Ii.getTech;_e.registerTech=Ii.registerTech;_e.use=hne;Object.defineProperty(_e,"middleware",{value:{},writeable:!1,enumerable:!0});Object.defineProperty(_e.middleware,"TERMINATOR",{value:k_,writeable:!1,enumerable:!0});_e.browser=oB;_e.obj=$ie;_e.mergeOptions=_l(9,"videojs.mergeOptions","videojs.obj.merge",Ai);_e.defineLazyProperty=_l(9,"videojs.defineLazyProperty","videojs.obj.defineLazyProperty",Zx);_e.bind=_l(9,"videojs.bind","native Function.prototype.bind",Ri);_e.registerPlugin=gu.registerPlugin;_e.deregisterPlugin=gu.deregisterPlugin;_e.plugin=(i,e)=>(Ur.warn("videojs.plugin() is deprecated; use videojs.registerPlugin() instead"),gu.registerPlugin(i,e));_e.getPlugins=gu.getPlugins;_e.getPlugin=gu.getPlugin;_e.getPluginVersion=gu.getPluginVersion;_e.addLanguage=function(i,e){return i=(""+i).toLowerCase(),_e.options.languages=Ai(_e.options.languages,{[i]:e}),_e.options.languages[i]};_e.log=Ur;_e.createLogger=Z8;_e.time=tne;_e.createTimeRange=_l(9,"videojs.createTimeRange","videojs.time.createTimeRanges",dl);_e.createTimeRanges=_l(9,"videojs.createTimeRanges","videojs.time.createTimeRanges",dl);_e.formatTime=_l(9,"videojs.formatTime","videojs.time.formatTime",kh);_e.setFormatTime=_l(9,"videojs.setFormatTime","videojs.time.setFormatTime",DB);_e.resetFormatTime=_l(9,"videojs.resetFormatTime","videojs.time.resetFormatTime",PB);_e.parseUrl=_l(9,"videojs.parseUrl","videojs.url.parseUrl",t2);_e.isCrossOrigin=_l(9,"videojs.isCrossOrigin","videojs.url.isCrossOrigin",dT);_e.EventTarget=so;_e.any=Qw;_e.on=no;_e.one=uT;_e.off=Rs;_e.trigger=Op;_e.xhr=L8;_e.TextTrack=ig;_e.AudioTrack=FB;_e.VideoTrack=BB;["isEl","isTextNode","createEl","hasClass","addClass","removeClass","toggleClass","setAttributes","getAttributes","emptyEl","appendContent","insertContent"].forEach(i=>{_e[i]=function(){return Ur.warn(`videojs.${i}() is deprecated; use videojs.dom.${i}() instead`),xB[i].apply(null,arguments)}});_e.computedStyle=_l(9,"videojs.computedStyle","videojs.dom.computedStyle",pp);_e.dom=xB;_e.fn=Xie;_e.num=Lne;_e.str=Zie;_e.url=cne;_e.Error=nse;/*! @name videojs-contrib-quality-levels @version 4.1.0 @license Apache-2.0 */class sse{constructor(e){let t=this;return t.id=e.id,t.label=t.id,t.width=e.width,t.height=e.height,t.bitrate=e.bandwidth,t.frameRate=e.frameRate,t.enabled_=e.enabled,Object.defineProperty(t,"enabled",{get(){return t.enabled_()},set(r){t.enabled_(r)}}),t}}class R_ extends _e.EventTarget{constructor(){super();let e=this;return e.levels_=[],e.selectedIndex_=-1,Object.defineProperty(e,"selectedIndex",{get(){return e.selectedIndex_}}),Object.defineProperty(e,"length",{get(){return e.levels_.length}}),e[Symbol.iterator]=()=>e.levels_.values(),e}addQualityLevel(e){let t=this.getQualityLevelById(e.id);if(t)return t;const r=this.levels_.length;return t=new sse(e),""+r in this||Object.defineProperty(this,r,{get(){return this.levels_[r]}}),this.levels_.push(t),this.trigger({qualityLevel:t,type:"addqualitylevel"}),t}removeQualityLevel(e){let t=null;for(let r=0,n=this.length;r<n;r++)if(this[r]===e){t=this.levels_.splice(r,1)[0],this.selectedIndex_===r?this.selectedIndex_=-1:this.selectedIndex_>r&&this.selectedIndex_--;break}return t&&this.trigger({qualityLevel:e,type:"removequalitylevel"}),t}getQualityLevelById(e){for(let t=0,r=this.length;t<r;t++){const n=this[t];if(n.id===e)return n}return null}dispose(){this.selectedIndex_=-1,this.levels_.length=0}}R_.prototype.allowedEvents_={change:"change",addqualitylevel:"addqualitylevel",removequalitylevel:"removequalitylevel"};for(const i in R_.prototype.allowedEvents_)R_.prototype["on"+i]=null;var vN="4.1.0";const ase=function(i,e){const t=i.qualityLevels,r=new R_,n=function(){r.dispose(),i.qualityLevels=t,i.off("dispose",n)};return i.on("dispose",n),i.qualityLevels=()=>r,i.qualityLevels.VERSION=vN,r},yN=function(i){return ase(this,_e.obj.merge({},i))};_e.registerPlugin("qualityLevels",yN);yN.VERSION=vN;/*! @name @videojs/http-streaming @version 3.15.0 @license Apache-2.0 */const Sa=eg,L_=(i,e)=>e&&e.responseURL&&i!==e.responseURL?e.responseURL:i,Uo=i=>_e.log.debug?_e.log.debug.bind(_e,"VHS:",`${i} >`):function(){};function yi(...i){const e=_e.obj||_e;return(e.merge||e.mergeOptions).apply(e,i)}function hs(...i){const e=_e.time||_e;return(e.createTimeRanges||e.createTimeRanges).apply(e,i)}function ose(i){if(i.length===0)return"Buffered Ranges are empty";let e=`Buffered Ranges: 
`;for(let t=0;t<i.length;t++){const r=i.start(t),n=i.end(t);e+=`${r} --> ${n}. Duration (${n-r})
`}return e}const Ql=1/30,Jl=Ql*3,_N=function(i,e){const t=[];let r;if(i&&i.length)for(r=0;r<i.length;r++)e(i.start(r),i.end(r))&&t.push([i.start(r),i.end(r)]);return hs(t)},Df=function(i,e){return _N(i,function(t,r){return t-Jl<=e&&r+Jl>=e})},_v=function(i,e){return _N(i,function(t){return t-Ql>=e})},lse=function(i){if(i.length<2)return hs();const e=[];for(let t=1;t<i.length;t++){const r=i.end(t-1),n=i.start(t);e.push([r,n])}return hs(e)},use=function(i,e){let t=null,r=null,n=0;const s=[],a=[];if(!i||!i.length||!e||!e.length)return hs();let o=i.length;for(;o--;)s.push({time:i.start(o),type:"start"}),s.push({time:i.end(o),type:"end"});for(o=e.length;o--;)s.push({time:e.start(o),type:"start"}),s.push({time:e.end(o),type:"end"});for(s.sort(function(l,u){return l.time-u.time}),o=0;o<s.length;o++)s[o].type==="start"?(n++,n===2&&(t=s[o].time)):s[o].type==="end"&&(n--,n===1&&(r=s[o].time)),t!==null&&r!==null&&(a.push([t,r]),t=null,r=null);return hs(a)},xN=i=>{const e=[];if(!i||!i.length)return"";for(let t=0;t<i.length;t++)e.push(i.start(t)+" => "+i.end(t));return e.join(", ")},cse=function(i,e,t=1){return((i.length?i.end(i.length-1):0)-e)/t},ah=i=>{const e=[];for(let t=0;t<i.length;t++)e.push({start:i.start(t),end:i.end(t)});return e},dse=function(i,e){if(i===e)return!1;if(!i&&e||!e&&i||i.length!==e.length)return!0;for(let t=0;t<i.length;t++)if(i.start(t)!==e.start(t)||i.end(t)!==e.end(t))return!0;return!1},JS=function(i){if(!(!i||!i.length||!i.end))return i.end(i.length-1)},_2=function(i,e){let t=0;if(!i||!i.length)return t;for(let r=0;r<i.length;r++){const n=i.start(r),s=i.end(r);if(!(e>s)){if(e>n&&e<=s){t+=s-e;continue}t+=s-n}}return t},x2=(i,e)=>{if(!e.preload)return e.duration;let t=0;return(e.parts||[]).forEach(function(r){t+=r.duration}),(e.preloadHints||[]).forEach(function(r){r.type==="PART"&&(t+=i.partTargetDuration)}),t},OC=i=>(i.segments||[]).reduce((e,t,r)=>(t.parts?t.parts.forEach(function(n,s){e.push({duration:n.duration,segmentIndex:r,partIndex:s,part:n,segment:t})}):e.push({duration:t.duration,segmentIndex:r,partIndex:null,segment:t,part:null}),e),[]),TN=i=>{const e=i.segments&&i.segments.length&&i.segments[i.segments.length-1];return e&&e.parts||[]},bN=({preloadSegment:i})=>{if(!i)return;const{parts:e,preloadHints:t}=i;let r=(t||[]).reduce((n,s)=>n+(s.type==="PART"?1:0),0);return r+=e&&e.length?e.length:0,r},SN=(i,e)=>{if(e.endList)return 0;if(i&&i.suggestedPresentationDelay)return i.suggestedPresentationDelay;const t=TN(e).length>0;return t&&e.serverControl&&e.serverControl.partHoldBack?e.serverControl.partHoldBack:t&&e.partTargetDuration?e.partTargetDuration*3:e.serverControl&&e.serverControl.holdBack?e.serverControl.holdBack:e.targetDuration?e.targetDuration*3:0},hse=function(i,e){let t=0,r=e-i.mediaSequence,n=i.segments[r];if(n){if(typeof n.start<"u")return{result:n.start,precise:!0};if(typeof n.end<"u")return{result:n.end-n.duration,precise:!0}}for(;r--;){if(n=i.segments[r],typeof n.end<"u")return{result:t+n.end,precise:!0};if(t+=x2(i,n),typeof n.start<"u")return{result:t+n.start,precise:!0}}return{result:t,precise:!1}},fse=function(i,e){let t=0,r,n=e-i.mediaSequence;for(;n<i.segments.length;n++){if(r=i.segments[n],typeof r.start<"u")return{result:r.start-t,precise:!0};if(t+=x2(i,r),typeof r.end<"u")return{result:r.end-t,precise:!0}}return{result:-1,precise:!1}},CN=function(i,e,t){if(typeof e>"u"&&(e=i.mediaSequence+i.segments.length),e<i.mediaSequence)return 0;const r=hse(i,e);if(r.precise)return r.result;const n=fse(i,e);return n.precise?n.result:r.result+t},EN=function(i,e,t){if(!i)return 0;if(typeof t!="number"&&(t=0),typeof e>"u"){if(i.totalDuration)return i.totalDuration;if(!i.endList)return X.Infinity}return CN(i,e,t)},o0=function({defaultDuration:i,durationList:e,startIndex:t,endIndex:r}){let n=0;if(t>r&&([t,r]=[r,t]),t<0){for(let s=t;s<Math.min(0,r);s++)n+=i;t=0}for(let s=t;s<r;s++)n+=e[s].duration;return n},wN=function(i,e,t,r){if(!i||!i.segments)return null;if(i.endList)return EN(i);if(e===null)return null;e=e||0;let n=CN(i,i.mediaSequence+i.segments.length,e);return t&&(r=typeof r=="number"?r:SN(null,i),n-=r),Math.max(0,n)},pse=function(i,e,t){const n=e||0;let s=wN(i,e,!0,t);return s===null?hs():(s<n&&(s=n),hs(n,s))},mse=function({playlist:i,currentTime:e,startingSegmentIndex:t,startingPartIndex:r,startTime:n,exactManifestTimings:s}){let a=e-n;const o=OC(i);let l=0;for(let u=0;u<o.length;u++){const c=o[u];if(t===c.segmentIndex&&!(typeof r=="number"&&typeof c.partIndex=="number"&&r!==c.partIndex)){l=u;break}}if(a<0){if(l>0)for(let u=l-1;u>=0;u--){const c=o[u];if(a+=c.duration,s){if(a<0)continue}else if(a+Ql<=0)continue;return{partIndex:c.partIndex,segmentIndex:c.segmentIndex,startTime:n-o0({defaultDuration:i.targetDuration,durationList:o,startIndex:l,endIndex:u})}}return{partIndex:o[0]&&o[0].partIndex||null,segmentIndex:o[0]&&o[0].segmentIndex||0,startTime:e}}if(l<0){for(let u=l;u<0;u++)if(a-=i.targetDuration,a<0)return{partIndex:o[0]&&o[0].partIndex||null,segmentIndex:o[0]&&o[0].segmentIndex||0,startTime:e};l=0}for(let u=l;u<o.length;u++){const c=o[u];a-=c.duration;const h=c.duration>Ql,m=a===0,g=h&&a+Ql>=0;if(!((m||g)&&u!==o.length-1)){if(s){if(a>0)continue}else if(a-Ql>=0)continue;return{partIndex:c.partIndex,segmentIndex:c.segmentIndex,startTime:n+o0({defaultDuration:i.targetDuration,durationList:o,startIndex:l,endIndex:u})}}}return{segmentIndex:o[o.length-1].segmentIndex,partIndex:o[o.length-1].partIndex,startTime:e}},kN=function(i){return i.excludeUntil&&i.excludeUntil>Date.now()},T2=function(i){return i.excludeUntil&&i.excludeUntil===1/0},pT=function(i){const e=kN(i);return!i.disabled&&!e},gse=function(i){return i.disabled},vse=function(i){for(let e=0;e<i.segments.length;e++)if(i.segments[e].key)return!0;return!1},AN=function(i,e){return e.attributes&&e.attributes[i]},yse=function(i,e,t,r=0){return AN("BANDWIDTH",t)?(i*t.attributes.BANDWIDTH-r*8)/e:NaN},MC=(i,e)=>{if(i.playlists.length===1)return!0;const t=e.attributes.BANDWIDTH||Number.MAX_VALUE;return i.playlists.filter(r=>pT(r)?(r.attributes.BANDWIDTH||0)<t:!1).length===0},b2=(i,e)=>!i&&!e||!i&&e||i&&!e?!1:!!(i===e||i.id&&e.id&&i.id===e.id||i.resolvedUri&&e.resolvedUri&&i.resolvedUri===e.resolvedUri||i.uri&&e.uri&&i.uri===e.uri),hO=function(i,e){const t=i&&i.mediaGroups&&i.mediaGroups.AUDIO||{};let r=!1;for(const n in t){for(const s in t[n])if(r=e(t[n][s]),r)break;if(r)break}return!!r},og=i=>{if(!i||!i.playlists||!i.playlists.length)return hO(i,t=>t.playlists&&t.playlists.length||t.uri);for(let e=0;e<i.playlists.length;e++){const t=i.playlists[e],r=t.attributes&&t.attributes.CODECS;if(!(r&&r.split(",").every(s=>jw(s))||hO(i,s=>b2(t,s))))return!1}return!0};var Ea={liveEdgeDelay:SN,duration:EN,seekable:pse,getMediaInfoForTime:mse,isEnabled:pT,isDisabled:gse,isExcluded:kN,isIncompatible:T2,playlistEnd:wN,isAes:vse,hasAttribute:AN,estimateSegmentRequestTime:yse,isLowestEnabledRendition:MC,isAudioOnly:og,playlistMatch:b2,segmentDurationWithParts:x2};const{log:IN}=_e,Wf=(i,e)=>`${i}-${e}`,DN=(i,e,t)=>`placeholder-uri-${i}-${e}-${t}`,_se=({onwarn:i,oninfo:e,manifestString:t,customTagParsers:r=[],customTagMappers:n=[],llhls:s})=>{const a=new M8;i&&a.on("warn",i),e&&a.on("info",e),r.forEach(u=>a.addParser(u)),n.forEach(u=>a.addTagMapper(u)),a.push(t),a.end();const o=a.manifest;if(s||(["preloadSegment","skip","serverControl","renditionReports","partInf","partTargetDuration"].forEach(function(u){o.hasOwnProperty(u)&&delete o[u]}),o.segments&&o.segments.forEach(function(u){["parts","preloadHints"].forEach(function(c){u.hasOwnProperty(c)&&delete u[c]})})),!o.targetDuration){let u=10;o.segments&&o.segments.length&&(u=o.segments.reduce((c,h)=>Math.max(c,h.duration),0)),i&&i({message:`manifest has no targetDuration defaulting to ${u}`}),o.targetDuration=u}const l=TN(o);if(l.length&&!o.partTargetDuration){const u=l.reduce((c,h)=>Math.max(c,h.duration),0);i&&(i({message:`manifest has no partTargetDuration defaulting to ${u}`}),IN.error("LL-HLS manifest has parts but lacks required #EXT-X-PART-INF:PART-TARGET value. See https://datatracker.ietf.org/doc/html/draft-pantos-hls-rfc8216bis-09#section-4.4.3.7. Playback is not guaranteed.")),o.partTargetDuration=u}return o},Up=(i,e)=>{i.mediaGroups&&["AUDIO","SUBTITLES"].forEach(t=>{if(i.mediaGroups[t])for(const r in i.mediaGroups[t])for(const n in i.mediaGroups[t][r]){const s=i.mediaGroups[t][r][n];e(s,t,r,n)}})},PN=({playlist:i,uri:e,id:t})=>{i.id=t,i.playlistErrors_=0,e&&(i.uri=e),i.attributes=i.attributes||{}},xse=i=>{let e=i.playlists.length;for(;e--;){const t=i.playlists[e];PN({playlist:t,id:Wf(e,t.uri)}),t.resolvedUri=Sa(i.uri,t.uri),i.playlists[t.id]=t,i.playlists[t.uri]=t,t.attributes.BANDWIDTH||IN.warn("Invalid playlist STREAM-INF detected. Missing BANDWIDTH attribute.")}},Tse=i=>{Up(i,e=>{e.uri&&(e.resolvedUri=Sa(i.uri,e.uri))})},bse=(i,e)=>{const t=Wf(0,e),r={mediaGroups:{AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},uri:X.location.href,resolvedUri:X.location.href,playlists:[{uri:e,id:t,resolvedUri:e,attributes:{}}]};return r.playlists[t]=r.playlists[0],r.playlists[e]=r.playlists[0],r},RN=(i,e,t=DN)=>{i.uri=e;for(let n=0;n<i.playlists.length;n++)if(!i.playlists[n].uri){const s=`placeholder-uri-${n}`;i.playlists[n].uri=s}const r=og(i);Up(i,(n,s,a,o)=>{if(!n.playlists||!n.playlists.length){if(r&&s==="AUDIO"&&!n.uri)for(let l=0;l<i.playlists.length;l++){const u=i.playlists[l];if(u.attributes&&u.attributes.AUDIO&&u.attributes.AUDIO===a)return}n.playlists=[Jt({},n)]}n.playlists.forEach(function(l,u){const c=t(s,a,o,l),h=Wf(u,c);l.uri?l.resolvedUri=l.resolvedUri||Sa(i.uri,l.uri):(l.uri=u===0?c:h,l.resolvedUri=l.uri),l.id=l.id||h,l.attributes=l.attributes||{},i.playlists[l.id]=l,i.playlists[l.uri]=l})}),xse(i),Tse(i)};let fO=class{constructor(){this.offset_=null,this.pendingDateRanges_=new Map,this.processedDateRanges_=new Map}setOffset(e=[]){if(this.offset_!==null||!e.length)return;const[t]=e;t.programDateTime!==void 0&&(this.offset_=t.programDateTime/1e3)}setPendingDateRanges(e=[]){if(!e.length)return;const[t]=e,r=t.startDate.getTime();this.trimProcessedDateRanges_(r),this.pendingDateRanges_=e.reduce((n,s)=>(n.set(s.id,s),n),new Map)}processDateRange(e){this.pendingDateRanges_.delete(e.id),this.processedDateRanges_.set(e.id,e)}getDateRangesToProcess(){if(this.offset_===null)return[];const e={},t=[];this.pendingDateRanges_.forEach((r,n)=>{if(!this.processedDateRanges_.has(n)&&(r.startTime=r.startDate.getTime()/1e3-this.offset_,r.processDateRange=()=>this.processDateRange(r),t.push(r),!!r.class))if(e[r.class]){const s=e[r.class].push(r);r.classListIndex=s-1}else e[r.class]=[r],r.classListIndex=0});for(const r of t){const n=e[r.class]||[];r.endDate?r.endTime=r.endDate.getTime()/1e3-this.offset_:r.endOnNext&&n[r.classListIndex+1]?r.endTime=n[r.classListIndex+1].startTime:r.duration?r.endTime=r.startTime+r.duration:r.plannedDuration?r.endTime=r.startTime+r.plannedDuration:r.endTime=r.startTime}return t}trimProcessedDateRanges_(e){new Map(this.processedDateRanges_).forEach((r,n)=>{r.startDate.getTime()<e&&this.processedDateRanges_.delete(n)})}};const LN=22,vh=({requestType:i,request:e,error:t,parseFailure:r})=>{const n=e.status<200||e.status>299,s=e.status>=400&&e.status<=499,a={uri:e.uri,requestType:i},o=n&&!s||r;if(t&&s)a.error=Jt({},t),a.errorType=_e.Error.NetworkRequestFailed;else if(e.aborted)a.errorType=_e.Error.NetworkRequestAborted;else if(e.timedout)a.erroType=_e.Error.NetworkRequestTimeout;else if(o){const l=r?_e.Error.NetworkBodyParserFailed:_e.Error.NetworkBadStatus;a.errorType=l,a.status=e.status,a.headers=e.headers}return a},{EventTarget:Sse}=_e,Cse=(i,e)=>{if(e.endList||!e.serverControl)return i;const t={};if(e.serverControl.canBlockReload){const{preloadSegment:r}=e;let n=e.mediaSequence+e.segments.length;if(r){const s=r.parts||[],a=bN(e)-1;a>-1&&a!==s.length-1&&(t._HLS_part=a),(a>-1||s.length)&&n--}t._HLS_msn=n}if(e.serverControl&&e.serverControl.canSkipUntil&&(t._HLS_skip=e.serverControl.canSkipDateranges?"v2":"YES"),Object.keys(t).length){const r=new X.URL(i);["_HLS_skip","_HLS_msn","_HLS_part"].forEach(function(n){t.hasOwnProperty(n)&&r.searchParams.set(n,t[n])}),i=r.toString()}return i},Ese=(i,e)=>{if(!i)return e;const t=yi(i,e);if(i.preloadHints&&!e.preloadHints&&delete t.preloadHints,i.parts&&!e.parts)delete t.parts;else if(i.parts&&e.parts)for(let r=0;r<e.parts.length;r++)i.parts&&i.parts[r]&&(t.parts[r]=yi(i.parts[r],e.parts[r]));return!i.skipped&&e.skipped&&(t.skipped=!1),i.preload&&!e.preload&&(t.preload=!1),t},wse=(i,e,t)=>{const r=i.slice(),n=e.slice();t=t||0;const s=[];let a;for(let o=0;o<n.length;o++){const l=r[o+t],u=n[o];l?(a=l.map||a,s.push(Ese(l,u))):(a&&!u.map&&(u.map=a),s.push(u))}return s},ON=(i,e)=>{!i.resolvedUri&&i.uri&&(i.resolvedUri=Sa(e,i.uri)),i.key&&!i.key.resolvedUri&&(i.key.resolvedUri=Sa(e,i.key.uri)),i.map&&!i.map.resolvedUri&&(i.map.resolvedUri=Sa(e,i.map.uri)),i.map&&i.map.key&&!i.map.key.resolvedUri&&(i.map.key.resolvedUri=Sa(e,i.map.key.uri)),i.parts&&i.parts.length&&i.parts.forEach(t=>{t.resolvedUri||(t.resolvedUri=Sa(e,t.uri))}),i.preloadHints&&i.preloadHints.length&&i.preloadHints.forEach(t=>{t.resolvedUri||(t.resolvedUri=Sa(e,t.uri))})},MN=function(i){const e=i.segments||[],t=i.preloadSegment;if(t&&t.parts&&t.parts.length){if(t.preloadHints){for(let r=0;r<t.preloadHints.length;r++)if(t.preloadHints[r].type==="MAP")return e}t.duration=i.targetDuration,t.preload=!0,e.push(t)}return e},FN=(i,e)=>i===e||i.segments&&e.segments&&i.segments.length===e.segments.length&&i.endList===e.endList&&i.mediaSequence===e.mediaSequence&&i.preloadSegment===e.preloadSegment,FC=(i,e,t=FN)=>{const r=yi(i,{}),n=r.playlists[e.id];if(!n||t(n,e))return null;e.segments=MN(e);const s=yi(n,e);if(s.preloadSegment&&!e.preloadSegment&&delete s.preloadSegment,n.segments){if(e.skip){e.segments=e.segments||[];for(let a=0;a<e.skip.skippedSegments;a++)e.segments.unshift({skipped:!0})}s.segments=wse(n.segments,e.segments,e.mediaSequence-n.mediaSequence)}s.segments.forEach(a=>{ON(a,s.resolvedUri)});for(let a=0;a<r.playlists.length;a++)r.playlists[a].id===e.id&&(r.playlists[a]=s);return r.playlists[e.id]=s,r.playlists[e.uri]=s,Up(i,(a,o,l,u)=>{if(a.playlists)for(let c=0;c<a.playlists.length;c++)e.id===a.playlists[c].id&&(a.playlists[c]=s)}),r},BC=(i,e)=>{const t=i.segments||[],r=t[t.length-1],n=r&&r.parts&&r.parts[r.parts.length-1],s=n&&n.duration||r&&r.duration;return e&&s?s*1e3:(i.partTargetDuration||i.targetDuration||10)*500},pO=(i,e,t)=>{if(!i)return;const r=[];return i.forEach(n=>{if(!n.attributes)return;const{BANDWIDTH:s,RESOLUTION:a,CODECS:o}=n.attributes;r.push({id:n.id,bandwidth:s,resolution:a,codecs:o})}),{type:e,isLive:t,renditions:r}};let Pf=class extends Sse{constructor(e,t,r={}){if(super(),!e)throw new Error("A non-empty playlist URL or object is required");this.logger_=Uo("PlaylistLoader");const{withCredentials:n=!1}=r;this.src=e,this.vhs_=t,this.withCredentials=n,this.addDateRangesToTextTrack_=r.addDateRangesToTextTrack;const s=t.options_;this.customTagParsers=s&&s.customTagParsers||[],this.customTagMappers=s&&s.customTagMappers||[],this.llhls=s&&s.llhls,this.dateRangesStorage_=new fO,this.state="HAVE_NOTHING",this.handleMediaupdatetimeout_=this.handleMediaupdatetimeout_.bind(this),this.on("mediaupdatetimeout",this.handleMediaupdatetimeout_),this.on("loadedplaylist",this.handleLoadedPlaylist_.bind(this))}handleLoadedPlaylist_(){const e=this.media();if(!e)return;this.dateRangesStorage_.setOffset(e.segments),this.dateRangesStorage_.setPendingDateRanges(e.dateRanges);const t=this.dateRangesStorage_.getDateRangesToProcess();!t.length||!this.addDateRangesToTextTrack_||this.addDateRangesToTextTrack_(t)}handleMediaupdatetimeout_(){if(this.state!=="HAVE_METADATA")return;const e=this.media();let t=Sa(this.main.uri,e.uri);this.llhls&&(t=Cse(t,e)),this.state="HAVE_CURRENT_METADATA",this.request=this.vhs_.xhr({uri:t,withCredentials:this.withCredentials,requestType:"hls-playlist"},(r,n)=>{if(this.request){if(r)return this.playlistRequestError(this.request,this.media(),"HAVE_METADATA");this.haveMetadata({playlistString:this.request.responseText,url:this.media().uri,id:this.media().id})}})}playlistRequestError(e,t,r){const{uri:n,id:s}=t;this.request=null,r&&(this.state=r),this.error={playlist:this.main.playlists[s],status:e.status,message:`HLS playlist request error at URL: ${n}.`,responseText:e.responseText,code:e.status>=500?4:2,metadata:vh({requestType:e.requestType,request:e,error:e.error})},this.trigger("error")}parseManifest_({url:e,manifestString:t}){try{return _se({onwarn:({message:r})=>this.logger_(`m3u8-parser warn for ${e}: ${r}`),oninfo:({message:r})=>this.logger_(`m3u8-parser info for ${e}: ${r}`),manifestString:t,customTagParsers:this.customTagParsers,customTagMappers:this.customTagMappers,llhls:this.llhls})}catch(r){this.error=r,this.error.metadata={errorType:_e.Error.StreamingHlsPlaylistParserError,error:r}}}haveMetadata({playlistString:e,playlistObject:t,url:r,id:n}){this.request=null,this.state="HAVE_METADATA";const s={playlistInfo:{type:"media",uri:r}};this.trigger({type:"playlistparsestart",metadata:s});const a=t||this.parseManifest_({url:r,manifestString:e});a.lastRequest=Date.now(),PN({playlist:a,uri:r,id:n});const o=FC(this.main,a);this.targetDuration=a.partTargetDuration||a.targetDuration,this.pendingMedia_=null,o?(this.main=o,this.media_=this.main.playlists[n]):this.trigger("playlistunchanged"),this.updateMediaUpdateTimeout_(BC(this.media(),!!o)),s.parsedPlaylist=pO(this.main.playlists,s.playlistInfo.type,!this.media_.endList),this.trigger({type:"playlistparsecomplete",metadata:s}),this.trigger("loadedplaylist")}dispose(){this.trigger("dispose"),this.stopRequest(),X.clearTimeout(this.mediaUpdateTimeout),X.clearTimeout(this.finalRenditionTimeout),this.dateRangesStorage_=new fO,this.off()}stopRequest(){if(this.request){const e=this.request;this.request=null,e.onreadystatechange=null,e.abort()}}media(e,t){if(!e)return this.media_;if(this.state==="HAVE_NOTHING")throw new Error("Cannot switch media playlist from "+this.state);if(typeof e=="string"){if(!this.main.playlists[e])throw new Error("Unknown playlist URI: "+e);e=this.main.playlists[e]}if(X.clearTimeout(this.finalRenditionTimeout),t){const o=(e.partTargetDuration||e.targetDuration)/2*1e3||5e3;this.finalRenditionTimeout=X.setTimeout(this.media.bind(this,e,!1),o);return}const r=this.state,n=!this.media_||e.id!==this.media_.id,s=this.main.playlists[e.id];if(s&&s.endList||e.endList&&e.segments.length){this.request&&(this.request.onreadystatechange=null,this.request.abort(),this.request=null),this.state="HAVE_METADATA",this.media_=e,n&&(this.trigger("mediachanging"),r==="HAVE_MAIN_MANIFEST"?this.trigger("loadedmetadata"):this.trigger("mediachange"));return}if(this.updateMediaUpdateTimeout_(BC(e,!0)),!n)return;if(this.state="SWITCHING_MEDIA",this.request){if(e.resolvedUri===this.request.url)return;this.request.onreadystatechange=null,this.request.abort(),this.request=null}this.media_&&this.trigger("mediachanging"),this.pendingMedia_=e;const a={playlistInfo:{type:"media",uri:e.uri}};this.trigger({type:"playlistrequeststart",metadata:a}),this.request=this.vhs_.xhr({uri:e.resolvedUri,withCredentials:this.withCredentials,requestType:"hls-playlist"},(o,l)=>{if(this.request){if(e.lastRequest=Date.now(),e.resolvedUri=L_(e.resolvedUri,l),o)return this.playlistRequestError(this.request,e,r);this.trigger({type:"playlistrequestcomplete",metadata:a}),this.haveMetadata({playlistString:l.responseText,url:e.uri,id:e.id}),r==="HAVE_MAIN_MANIFEST"?this.trigger("loadedmetadata"):this.trigger("mediachange")}})}pause(){this.mediaUpdateTimeout&&(X.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null),this.stopRequest(),this.state==="HAVE_NOTHING"&&(this.started=!1),this.state==="SWITCHING_MEDIA"?this.media_?this.state="HAVE_METADATA":this.state="HAVE_MAIN_MANIFEST":this.state==="HAVE_CURRENT_METADATA"&&(this.state="HAVE_METADATA")}load(e){this.mediaUpdateTimeout&&(X.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null);const t=this.media();if(e){const r=t?(t.partTargetDuration||t.targetDuration)/2*1e3:5e3;this.mediaUpdateTimeout=X.setTimeout(()=>{this.mediaUpdateTimeout=null,this.load()},r);return}if(!this.started){this.start();return}t&&!t.endList?this.trigger("mediaupdatetimeout"):this.trigger("loadedplaylist")}updateMediaUpdateTimeout_(e){this.mediaUpdateTimeout&&(X.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null),!(!this.media()||this.media().endList)&&(this.mediaUpdateTimeout=X.setTimeout(()=>{this.mediaUpdateTimeout=null,this.trigger("mediaupdatetimeout"),this.updateMediaUpdateTimeout_(e)},e))}start(){if(this.started=!0,typeof this.src=="object"){this.src.uri||(this.src.uri=X.location.href),this.src.resolvedUri=this.src.uri,setTimeout(()=>{this.setupInitialPlaylist(this.src)},0);return}const e={playlistInfo:{type:"multivariant",uri:this.src}};this.trigger({type:"playlistrequeststart",metadata:e}),this.request=this.vhs_.xhr({uri:this.src,withCredentials:this.withCredentials,requestType:"hls-playlist"},(t,r)=>{if(!this.request)return;if(this.request=null,t)return this.error={status:r.status,message:`HLS playlist request error at URL: ${this.src}.`,responseText:r.responseText,code:2,metadata:vh({requestType:r.requestType,request:r,error:t})},this.state==="HAVE_NOTHING"&&(this.started=!1),this.trigger("error");this.trigger({type:"playlistrequestcomplete",metadata:e}),this.src=L_(this.src,r),this.trigger({type:"playlistparsestart",metadata:e});const n=this.parseManifest_({manifestString:r.responseText,url:this.src});e.parsedPlaylist=pO(n.playlists,e.playlistInfo.type,!1),this.trigger({type:"playlistparsecomplete",metadata:e}),this.setupInitialPlaylist(n)})}srcUri(){return typeof this.src=="string"?this.src:this.src.uri}setupInitialPlaylist(e){if(this.state="HAVE_MAIN_MANIFEST",e.playlists){this.main=e,RN(this.main,this.srcUri()),e.playlists.forEach(r=>{r.segments=MN(r),r.segments.forEach(n=>{ON(n,r.resolvedUri)})}),this.trigger("loadedplaylist"),this.request||this.media(this.main.playlists[0]);return}const t=this.srcUri()||X.location.href;this.main=bse(e,t),this.haveMetadata({playlistObject:e,url:t,id:this.main.playlists[0].id}),this.trigger("loadedmetadata")}updateOrDeleteClone(e,t){const r=this.main,n=e.ID;let s=r.playlists.length;for(;s--;){const a=r.playlists[s];if(a.attributes["PATHWAY-ID"]===n){const o=a.resolvedUri,l=a.id;if(t){const u=this.createCloneURI_(a.resolvedUri,e),c=Wf(n,u),h=this.createCloneAttributes_(n,a.attributes),m=this.createClonePlaylist_(a,c,e,h);r.playlists[s]=m,r.playlists[c]=m,r.playlists[u]=m}else r.playlists.splice(s,1);delete r.playlists[l],delete r.playlists[o]}}this.updateOrDeleteCloneMedia(e,t)}updateOrDeleteCloneMedia(e,t){const r=this.main,n=e.ID;["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(s=>{if(!(!r.mediaGroups[s]||!r.mediaGroups[s][n])){for(const a in r.mediaGroups[s])if(a===n){for(const o in r.mediaGroups[s][a])r.mediaGroups[s][a][o].playlists.forEach((u,c)=>{const h=r.playlists[u.id],m=h.id,g=h.resolvedUri;delete r.playlists[m],delete r.playlists[g]});delete r.mediaGroups[s][a]}}}),t&&this.createClonedMediaGroups_(e)}addClonePathway(e,t={}){const r=this.main,n=r.playlists.length,s=this.createCloneURI_(t.resolvedUri,e),a=Wf(e.ID,s),o=this.createCloneAttributes_(e.ID,t.attributes),l=this.createClonePlaylist_(t,a,e,o);r.playlists[n]=l,r.playlists[a]=l,r.playlists[s]=l,this.createClonedMediaGroups_(e)}createClonedMediaGroups_(e){const t=e.ID,r=e["BASE-ID"],n=this.main;["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(s=>{if(!(!n.mediaGroups[s]||n.mediaGroups[s][t]))for(const a in n.mediaGroups[s]){if(a===r)n.mediaGroups[s][t]={};else continue;for(const o in n.mediaGroups[s][a]){const l=n.mediaGroups[s][a][o];n.mediaGroups[s][t][o]=Jt({},l);const u=n.mediaGroups[s][t][o],c=this.createCloneURI_(l.resolvedUri,e);u.resolvedUri=c,u.uri=c,u.playlists=[],l.playlists.forEach((h,m)=>{const g=n.playlists[h.id],y=DN(s,t,o),_=Wf(t,y);if(g&&!n.playlists[_]){const T=this.createClonePlaylist_(g,_,e),E=T.resolvedUri;n.playlists[_]=T,n.playlists[E]=T}u.playlists[m]=this.createClonePlaylist_(h,_,e)})}}})}createClonePlaylist_(e,t,r,n){const s=this.createCloneURI_(e.resolvedUri,r),a={resolvedUri:s,uri:s,id:t};return e.segments&&(a.segments=[]),n&&(a.attributes=n),yi(e,a)}createCloneURI_(e,t){const r=new URL(e);r.hostname=t["URI-REPLACEMENT"].HOST;const n=t["URI-REPLACEMENT"].PARAMS;for(const s of Object.keys(n))r.searchParams.set(s,n[s]);return r.href}createCloneAttributes_(e,t){const r={"PATHWAY-ID":e};return["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(n=>{t[n]&&(r[n]=e)}),r}getKeyIdSet(e){if(e.contentProtection){const t=new Set;for(const r in e.contentProtection){const n=e.contentProtection[r].attributes.keyId;n&&t.add(n.toLowerCase())}return t}}};const NC=function(i,e,t,r){const n=i.responseType==="arraybuffer"?i.response:i.responseText;!e&&n&&(i.responseTime=Date.now(),i.roundTripTime=i.responseTime-i.requestTime,i.bytesReceived=n.byteLength||n.length,i.bandwidth||(i.bandwidth=Math.floor(i.bytesReceived/i.roundTripTime*8*1e3))),t.headers&&(i.responseHeaders=t.headers),e&&e.code==="ETIMEDOUT"&&(i.timedout=!0),!e&&!i.aborted&&t.statusCode!==200&&t.statusCode!==206&&t.statusCode!==0&&(e=new Error("XHR Failed with a response of: "+(i&&(n||i.responseText)))),r(e,i)},kse=(i,e)=>{if(!i||!i.size)return;let t=e;return i.forEach(r=>{t=r(t)}),t},Ase=(i,e,t,r)=>{!i||!i.size||i.forEach(n=>{n(e,t,r)})},BN=function(){const i=function e(t,r){t=yi({timeout:45e3},t);const n=e.beforeRequest||_e.Vhs.xhr.beforeRequest,s=e._requestCallbackSet||_e.Vhs.xhr._requestCallbackSet||new Set,a=e._responseCallbackSet||_e.Vhs.xhr._responseCallbackSet;n&&typeof n=="function"&&(_e.log.warn("beforeRequest is deprecated, use onRequest instead."),s.add(n));const o=_e.Vhs.xhr.original===!0?_e.xhr:_e.Vhs.xhr,l=kse(s,t);s.delete(n);const u=o(l||t,function(h,m){return Ase(a,u,h,m),NC(u,h,m,r)}),c=u.abort;return u.abort=function(){return u.aborted=!0,c.apply(u,arguments)},u.uri=t.uri,u.requestType=t.requestType,u.requestTime=Date.now(),u};return i.original=!0,i},Ise=function(i){let e;const t=i.offset;return typeof i.offset=="bigint"||typeof i.length=="bigint"?e=X.BigInt(i.offset)+X.BigInt(i.length)-X.BigInt(1):e=i.offset+i.length-1,"bytes="+t+"-"+e},UC=function(i){const e={};return i.byterange&&(e.Range=Ise(i.byterange)),e},Dse=function(i,e){return i.start(e)+"-"+i.end(e)},Pse=function(i,e){const t=i.toString(16);return"00".substring(0,2-t.length)+t+(e%2?" ":"")},Rse=function(i){return i>=32&&i<126?String.fromCharCode(i):"."},NN=function(i){const e={};return Object.keys(i).forEach(t=>{const r=i[t];zw(r)?e[t]={bytes:r.buffer,byteOffset:r.byteOffset,byteLength:r.byteLength}:e[t]=r}),e},O_=function(i){const e=i.byterange||{length:1/0,offset:0};return[e.length,e.offset,i.resolvedUri].join(",")},UN=function(i){return i.resolvedUri},$N=i=>{const e=Array.prototype.slice.call(i),t=16;let r="",n,s;for(let a=0;a<e.length/t;a++)n=e.slice(a*t,a*t+t).map(Pse).join(""),s=e.slice(a*t,a*t+t).map(Rse).join(""),r+=n+" "+s+`
`;return r},Lse=({bytes:i})=>$N(i),Ose=i=>{let e="",t;for(t=0;t<i.length;t++)e+=Dse(i,t)+" ";return e};var Mse=Object.freeze({__proto__:null,createTransferableMessage:NN,initSegmentId:O_,segmentKeyId:UN,hexDump:$N,tagDump:Lse,textRanges:Ose});const jN=.25,Fse=(i,e)=>{if(!e.dateTimeObject)return null;const t=e.videoTimingInfo.transmuxerPrependedSeconds,n=e.videoTimingInfo.transmuxedPresentationStart+t,s=i-n;return new Date(e.dateTimeObject.getTime()+s*1e3)},Bse=i=>i.transmuxedPresentationEnd-i.transmuxedPresentationStart-i.transmuxerPrependedSeconds,Nse=(i,e)=>{let t;try{t=new Date(i)}catch{return null}if(!e||!e.segments||e.segments.length===0)return null;let r=e.segments[0];if(t<new Date(r.dateTimeObject))return null;for(let l=0;l<e.segments.length-1;l++){r=e.segments[l];const u=new Date(e.segments[l+1].dateTimeObject);if(t<u)break}const n=e.segments[e.segments.length-1],s=n.dateTimeObject,a=n.videoTimingInfo?Bse(n.videoTimingInfo):n.duration+n.duration*jN,o=new Date(s.getTime()+a*1e3);return t>o?null:(t>new Date(s)&&(r=n),{segment:r,estimatedStart:r.videoTimingInfo?r.videoTimingInfo.transmuxedPresentationStart:Ea.duration(e,e.mediaSequence+e.segments.indexOf(r)),type:r.videoTimingInfo?"accurate":"estimate"})},Use=(i,e)=>{if(!e||!e.segments||e.segments.length===0)return null;let t=0,r;for(let s=0;s<e.segments.length&&(r=e.segments[s],t=r.videoTimingInfo?r.videoTimingInfo.transmuxedPresentationEnd:t+r.duration,!(i<=t));s++);const n=e.segments[e.segments.length-1];if(n.videoTimingInfo&&n.videoTimingInfo.transmuxedPresentationEnd<i)return null;if(i>t){if(i>t+n.duration*jN)return null;r=n}return{segment:r,estimatedStart:r.videoTimingInfo?r.videoTimingInfo.transmuxedPresentationStart:t-r.duration,type:r.videoTimingInfo?"accurate":"estimate"}},$se=(i,e)=>{let t,r;try{t=new Date(i),r=new Date(e)}catch{}const n=t.getTime();return(r.getTime()-n)/1e3},jse=i=>{if(!i.segments||i.segments.length===0)return!1;for(let e=0;e<i.segments.length;e++)if(!i.segments[e].dateTimeObject)return!1;return!0},zse=({playlist:i,time:e=void 0,callback:t})=>{if(!t)throw new Error("getProgramTime: callback must be provided");if(!i||e===void 0)return t({message:"getProgramTime: playlist and time must be provided"});const r=Use(e,i);if(!r)return t({message:"valid programTime was not found"});if(r.type==="estimate")return t({message:"Accurate programTime could not be determined. Please seek to e.seekTime and try again",seekTime:r.estimatedStart});const n={mediaSeconds:e},s=Fse(e,r.segment);return s&&(n.programDateTime=s.toISOString()),t(null,n)},zN=({programTime:i,playlist:e,retryCount:t=2,seekTo:r,pauseAfterSeek:n=!0,tech:s,callback:a})=>{if(!a)throw new Error("seekToProgramTime: callback must be provided");if(typeof i>"u"||!e||!r)return a({message:"seekToProgramTime: programTime, seekTo and playlist must be provided"});if(!e.endList&&!s.hasStarted_)return a({message:"player must be playing a live stream to start buffering"});if(!jse(e))return a({message:"programDateTime tags must be provided in the manifest "+e.resolvedUri});const o=Nse(i,e);if(!o)return a({message:`${i} was not found in the stream`});const l=o.segment,u=$se(l.dateTimeObject,i);if(o.type==="estimate"){if(t===0)return a({message:`${i} is not buffered yet. Try again`});r(o.estimatedStart+u),s.one("seeked",()=>{zN({programTime:i,playlist:e,retryCount:t-1,seekTo:r,pauseAfterSeek:n,tech:s,callback:a})});return}const c=l.start+u,h=()=>a(null,s.currentTime());s.one("seeked",h),n&&s.pause(),r(c)},ZS=(i,e)=>{if(i.readyState===4)return e()},Hse=(i,e,t,r)=>{let n=[],s,a=!1;const o=function(h,m,g,y){return m.abort(),a=!0,t(h,m,g,y)},l=function(h,m){if(a)return;if(h)return h.metadata=vh({requestType:r,request:m,error:h}),o(h,m,"",n);const g=m.responseText.substring(n&&n.byteLength||0,m.responseText.length);if(n=N8(n,Hw(g,!0)),s=s||Af(n),n.length<10||s&&n.length<s+2)return ZS(m,()=>o(h,m,"",n));const y=Pp(n);return y==="ts"&&n.length<188?ZS(m,()=>o(h,m,"",n)):!y&&n.length<376?ZS(m,()=>o(h,m,"",n)):o(null,m,y,n)},c=e({uri:i,beforeSend(h){h.overrideMimeType("text/plain; charset=x-user-defined"),h.addEventListener("progress",function({total:m,loaded:g}){return NC(h,null,{statusCode:h.status},l)})}},function(h,m){return NC(c,h,m,l)});return c},{EventTarget:Vse}=_e,mO=function(i,e){if(!FN(i,e)||i.sidx&&e.sidx&&(i.sidx.offset!==e.sidx.offset||i.sidx.length!==e.sidx.length))return!1;if(!i.sidx&&e.sidx||i.sidx&&!e.sidx||i.segments&&!e.segments||!i.segments&&e.segments)return!1;if(!i.segments&&!e.segments)return!0;for(let t=0;t<i.segments.length;t++){const r=i.segments[t],n=e.segments[t];if(r.uri!==n.uri)return!1;if(!r.byterange&&!n.byterange)continue;const s=r.byterange,a=n.byterange;if(s&&!a||!s&&a||s.offset!==a.offset||s.length!==a.length)return!1}return!0},qse=(i,e,t,r)=>{const n=r.attributes.NAME||t;return`placeholder-uri-${i}-${e}-${n}`},Wse=({mainXml:i,srcUrl:e,clientOffset:t,sidxMapping:r,previousManifest:n})=>{const s=G8(i,{manifestUri:e,clientOffset:t,sidxMapping:r,previousManifest:n});return RN(s,e,qse),s},Gse=(i,e)=>{Up(i,(t,r,n,s)=>{(!e.mediaGroups[r][n]||!(s in e.mediaGroups[r][n]))&&delete i.mediaGroups[r][n][s]})},Kse=(i,e,t)=>{let r=!0,n=yi(i,{duration:e.duration,minimumUpdatePeriod:e.minimumUpdatePeriod,timelineStarts:e.timelineStarts});for(let s=0;s<e.playlists.length;s++){const a=e.playlists[s];if(a.sidx){const l=Mh(a.sidx);t&&t[l]&&t[l].sidx&&tg(a,t[l].sidx,a.sidx.resolvedUri)}const o=FC(n,a,mO);o&&(n=o,r=!1)}return Up(e,(s,a,o,l)=>{if(s.playlists&&s.playlists.length){const u=s.playlists[0].id,c=FC(n,s.playlists[0],mO);c&&(n=c,l in n.mediaGroups[a][o]||(n.mediaGroups[a][o][l]=s),n.mediaGroups[a][o][l].playlists[0]=n.playlists[u],r=!1)}}),Gse(n,e),e.minimumUpdatePeriod!==i.minimumUpdatePeriod&&(r=!1),r?null:n},Xse=(i,e)=>(!i.map&&!e.map||!!(i.map&&e.map&&i.map.byterange.offset===e.map.byterange.offset&&i.map.byterange.length===e.map.byterange.length))&&i.uri===e.uri&&i.byterange.offset===e.byterange.offset&&i.byterange.length===e.byterange.length,gO=(i,e)=>{const t={};for(const r in i){const s=i[r].sidx;if(s){const a=Mh(s);if(!e[a])break;const o=e[a].sidxInfo;Xse(o,s)&&(t[a]=e[a])}}return t},Yse=(i,e)=>{let r=gO(i.playlists,e);return Up(i,(n,s,a,o)=>{if(n.playlists&&n.playlists.length){const l=n.playlists;r=yi(r,gO(l,e))}}),r};let $C=class extends Vse{constructor(e,t,r={},n){super(),this.mainPlaylistLoader_=n||this,n||(this.isMain_=!0);const{withCredentials:s=!1}=r;if(this.vhs_=t,this.withCredentials=s,this.addMetadataToTextTrack=r.addMetadataToTextTrack,!e)throw new Error("A non-empty playlist URL or object is required");this.on("minimumUpdatePeriod",()=>{this.refreshXml_()}),this.on("mediaupdatetimeout",()=>{this.refreshMedia_(this.media().id)}),this.state="HAVE_NOTHING",this.loadedPlaylists_={},this.logger_=Uo("DashPlaylistLoader"),this.isMain_?(this.mainPlaylistLoader_.srcUrl=e,this.mainPlaylistLoader_.sidxMapping_={}):this.childPlaylist_=e}requestErrored_(e,t,r){if(!this.request)return!0;if(this.request=null,e)return this.error=typeof e=="object"&&!(e instanceof Error)?e:{status:t.status,message:"DASH request error at URL: "+t.uri,response:t.response,code:2,metadata:e.metadata},r&&(this.state=r),this.trigger("error"),!0}addSidxSegments_(e,t,r){const n=e.sidx&&Mh(e.sidx);if(!e.sidx||!n||this.mainPlaylistLoader_.sidxMapping_[n]){this.mediaRequest_=X.setTimeout(()=>r(!1),0);return}const s=L_(e.sidx.resolvedUri),a=(l,u)=>{if(this.requestErrored_(l,u,t))return;const c=this.mainPlaylistLoader_.sidxMapping_,{requestType:h}=u;let m;try{m=X8(fr(u.response).subarray(8))}catch(g){g.metadata=vh({requestType:h,request:u,parseFailure:!0}),this.requestErrored_(g,u,t);return}return c[n]={sidxInfo:e.sidx,sidx:m},tg(e,m,e.sidx.resolvedUri),r(!0)},o="dash-sidx";this.request=Hse(s,this.vhs_.xhr,(l,u,c,h)=>{if(l)return a(l,u);if(!c||c!=="mp4"){const y=c||"unknown";return a({status:u.status,message:`Unsupported ${y} container type for sidx segment at URL: ${s}`,response:"",playlist:e,internal:!0,playlistExclusionDuration:1/0,code:2},u)}const{offset:m,length:g}=e.sidx.byterange;if(h.length>=g+m)return a(l,{response:h.subarray(m,m+g),status:u.status,uri:u.uri});this.request=this.vhs_.xhr({uri:s,responseType:"arraybuffer",requestType:"dash-sidx",headers:UC({byterange:e.sidx.byterange})},a)},o)}dispose(){this.trigger("dispose"),this.stopRequest(),this.loadedPlaylists_={},X.clearTimeout(this.minimumUpdatePeriodTimeout_),X.clearTimeout(this.mediaRequest_),X.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null,this.mediaRequest_=null,this.minimumUpdatePeriodTimeout_=null,this.mainPlaylistLoader_.createMupOnMedia_&&(this.off("loadedmetadata",this.mainPlaylistLoader_.createMupOnMedia_),this.mainPlaylistLoader_.createMupOnMedia_=null),this.off()}hasPendingRequest(){return this.request||this.mediaRequest_}stopRequest(){if(this.request){const e=this.request;this.request=null,e.onreadystatechange=null,e.abort()}}media(e){if(!e)return this.media_;if(this.state==="HAVE_NOTHING")throw new Error("Cannot switch media playlist from "+this.state);const t=this.state;if(typeof e=="string"){if(!this.mainPlaylistLoader_.main.playlists[e])throw new Error("Unknown playlist URI: "+e);e=this.mainPlaylistLoader_.main.playlists[e]}const r=!this.media_||e.id!==this.media_.id;if(r&&this.loadedPlaylists_[e.id]&&this.loadedPlaylists_[e.id].endList){this.state="HAVE_METADATA",this.media_=e,r&&(this.trigger("mediachanging"),this.trigger("mediachange"));return}r&&(this.media_&&this.trigger("mediachanging"),this.addSidxSegments_(e,t,n=>{this.haveMetadata({startingState:t,playlist:e})}))}haveMetadata({startingState:e,playlist:t}){this.state="HAVE_METADATA",this.loadedPlaylists_[t.id]=t,this.mediaRequest_=null,this.refreshMedia_(t.id),e==="HAVE_MAIN_MANIFEST"?this.trigger("loadedmetadata"):this.trigger("mediachange")}pause(){this.mainPlaylistLoader_.createMupOnMedia_&&(this.off("loadedmetadata",this.mainPlaylistLoader_.createMupOnMedia_),this.mainPlaylistLoader_.createMupOnMedia_=null),this.stopRequest(),X.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null,this.isMain_&&(X.clearTimeout(this.mainPlaylistLoader_.minimumUpdatePeriodTimeout_),this.mainPlaylistLoader_.minimumUpdatePeriodTimeout_=null),this.state==="HAVE_NOTHING"&&(this.started=!1)}load(e){X.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null;const t=this.media();if(e){const r=t?t.targetDuration/2*1e3:5e3;this.mediaUpdateTimeout=X.setTimeout(()=>this.load(),r);return}if(!this.started){this.start();return}t&&!t.endList?(this.isMain_&&!this.minimumUpdatePeriodTimeout_&&(this.trigger("minimumUpdatePeriod"),this.updateMinimumUpdatePeriodTimeout_()),this.trigger("mediaupdatetimeout")):this.trigger("loadedplaylist")}start(){if(this.started=!0,!this.isMain_){this.mediaRequest_=X.setTimeout(()=>this.haveMain_(),0);return}this.requestMain_((e,t)=>{this.haveMain_(),!this.hasPendingRequest()&&!this.media_&&this.media(this.mainPlaylistLoader_.main.playlists[0])})}requestMain_(e){const t={manifestInfo:{uri:this.mainPlaylistLoader_.srcUrl}};this.trigger({type:"manifestrequeststart",metadata:t}),this.request=this.vhs_.xhr({uri:this.mainPlaylistLoader_.srcUrl,withCredentials:this.withCredentials,requestType:"dash-manifest"},(r,n)=>{if(r){const{requestType:a}=n;r.metadata=vh({requestType:a,request:n,error:r})}if(this.requestErrored_(r,n)){this.state==="HAVE_NOTHING"&&(this.started=!1);return}this.trigger({type:"manifestrequestcomplete",metadata:t});const s=n.responseText!==this.mainPlaylistLoader_.mainXml_;if(this.mainPlaylistLoader_.mainXml_=n.responseText,n.responseHeaders&&n.responseHeaders.date?this.mainLoaded_=Date.parse(n.responseHeaders.date):this.mainLoaded_=Date.now(),this.mainPlaylistLoader_.srcUrl=L_(this.mainPlaylistLoader_.srcUrl,n),s){this.handleMain_(),this.syncClientServerClock_(()=>e(n,s));return}return e(n,s)})}syncClientServerClock_(e){const t=K8(this.mainPlaylistLoader_.mainXml_);if(t===null)return this.mainPlaylistLoader_.clientOffset_=this.mainLoaded_-Date.now(),e();if(t.method==="DIRECT")return this.mainPlaylistLoader_.clientOffset_=t.value-Date.now(),e();this.request=this.vhs_.xhr({uri:Sa(this.mainPlaylistLoader_.srcUrl,t.value),method:t.method,withCredentials:this.withCredentials,requestType:"dash-clock-sync"},(r,n)=>{if(!this.request)return;if(r){const{requestType:a}=n;return this.error.metadata=vh({requestType:a,request:n,error:r}),this.mainPlaylistLoader_.clientOffset_=this.mainLoaded_-Date.now(),e()}let s;t.method==="HEAD"?!n.responseHeaders||!n.responseHeaders.date?s=this.mainLoaded_:s=Date.parse(n.responseHeaders.date):s=Date.parse(n.responseText),this.mainPlaylistLoader_.clientOffset_=s-Date.now(),e()})}haveMain_(){this.state="HAVE_MAIN_MANIFEST",this.isMain_?this.trigger("loadedplaylist"):this.media_||this.media(this.childPlaylist_)}handleMain_(){this.mediaRequest_=null;const e=this.mainPlaylistLoader_.main,t={manifestInfo:{uri:this.mainPlaylistLoader_.srcUrl}};this.trigger({type:"manifestparsestart",metadata:t});let r;try{r=Wse({mainXml:this.mainPlaylistLoader_.mainXml_,srcUrl:this.mainPlaylistLoader_.srcUrl,clientOffset:this.mainPlaylistLoader_.clientOffset_,sidxMapping:this.mainPlaylistLoader_.sidxMapping_,previousManifest:e})}catch(s){this.error=s,this.error.metadata={errorType:_e.Error.StreamingDashManifestParserError,error:s},this.trigger("error")}e&&(r=Kse(e,r,this.mainPlaylistLoader_.sidxMapping_)),this.mainPlaylistLoader_.main=r||e;const n=this.mainPlaylistLoader_.main.locations&&this.mainPlaylistLoader_.main.locations[0];if(n&&n!==this.mainPlaylistLoader_.srcUrl&&(this.mainPlaylistLoader_.srcUrl=n),(!e||r&&r.minimumUpdatePeriod!==e.minimumUpdatePeriod)&&this.updateMinimumUpdatePeriodTimeout_(),this.addEventStreamToMetadataTrack_(r),r){const{duration:s,endList:a}=r,o=[];r.playlists.forEach(u=>{o.push({id:u.id,bandwidth:u.attributes.BANDWIDTH,resolution:u.attributes.RESOLUTION,codecs:u.attributes.CODECS})});const l={duration:s,isLive:!a,renditions:o};t.parsedManifest=l,this.trigger({type:"manifestparsecomplete",metadata:t})}return!!r}updateMinimumUpdatePeriodTimeout_(){const e=this.mainPlaylistLoader_;e.createMupOnMedia_&&(e.off("loadedmetadata",e.createMupOnMedia_),e.createMupOnMedia_=null),e.minimumUpdatePeriodTimeout_&&(X.clearTimeout(e.minimumUpdatePeriodTimeout_),e.minimumUpdatePeriodTimeout_=null);let t=e.main&&e.main.minimumUpdatePeriod;if(t===0&&(e.media()?t=e.media().targetDuration*1e3:(e.createMupOnMedia_=e.updateMinimumUpdatePeriodTimeout_,e.one("loadedmetadata",e.createMupOnMedia_))),typeof t!="number"||t<=0){t<0&&this.logger_(`found invalid minimumUpdatePeriod of ${t}, not setting a timeout`);return}this.createMUPTimeout_(t)}createMUPTimeout_(e){const t=this.mainPlaylistLoader_;t.minimumUpdatePeriodTimeout_=X.setTimeout(()=>{t.minimumUpdatePeriodTimeout_=null,t.trigger("minimumUpdatePeriod"),t.createMUPTimeout_(e)},e)}refreshXml_(){this.requestMain_((e,t)=>{t&&(this.media_&&(this.media_=this.mainPlaylistLoader_.main.playlists[this.media_.id]),this.mainPlaylistLoader_.sidxMapping_=Yse(this.mainPlaylistLoader_.main,this.mainPlaylistLoader_.sidxMapping_),this.addSidxSegments_(this.media(),this.state,r=>{this.refreshMedia_(this.media().id)}))})}refreshMedia_(e){if(!e)throw new Error("refreshMedia_ must take a media id");this.media_&&this.isMain_&&this.handleMain_();const t=this.mainPlaylistLoader_.main.playlists,r=!this.media_||this.media_!==t[e];if(r?this.media_=t[e]:this.trigger("playlistunchanged"),!this.mediaUpdateTimeout){const n=()=>{this.media().endList||(this.mediaUpdateTimeout=X.setTimeout(()=>{this.trigger("mediaupdatetimeout"),n()},BC(this.media(),!!r)))};n()}this.trigger("loadedplaylist")}addEventStreamToMetadataTrack_(e){if(e&&this.mainPlaylistLoader_.main.eventStream){const t=this.mainPlaylistLoader_.main.eventStream.map(r=>({cueTime:r.start,frames:[{data:r.messageData}]}));this.addMetadataToTextTrack("EventStream",t,this.mainPlaylistLoader_.main.duration)}}getKeyIdSet(e){if(e.contentProtection){const t=new Set;for(const r in e.contentProtection){const n=e.contentProtection[r].attributes["cenc:default_KID"];n&&t.add(n.replace(/-/g,"").toLowerCase())}return t}}};var qn={GOAL_BUFFER_LENGTH:30,MAX_GOAL_BUFFER_LENGTH:60,BACK_BUFFER_LENGTH:30,GOAL_BUFFER_LENGTH_RATE:1,INITIAL_BANDWIDTH:4194304,BANDWIDTH_VARIANCE:1.2,BUFFER_LOW_WATER_LINE:0,MAX_BUFFER_LOW_WATER_LINE:30,EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE:16,BUFFER_LOW_WATER_LINE_RATE:1,BUFFER_HIGH_WATER_LINE:30};const Qse=i=>{const e=new Uint8Array(new ArrayBuffer(i.length));for(let t=0;t<i.length;t++)e[t]=i.charCodeAt(t);return e.buffer},HN=function(i){return i.on=i.addEventListener,i.off=i.removeEventListener,i},Jse=function(i){try{return URL.createObjectURL(new Blob([i],{type:"application/javascript"}))}catch{const t=new BlobBuilder;return t.append(i),URL.createObjectURL(t.getBlob())}},VN=function(i){return function(){const e=Jse(i),t=HN(new Worker(e));t.objURL=e;const r=t.terminate;return t.on=t.addEventListener,t.off=t.removeEventListener,t.terminate=function(){return URL.revokeObjectURL(e),r.call(this)},t}},qN=function(i){return`var browserWorkerPolyFill = ${HN.toString()};
browserWorkerPolyFill(self);
`+i},WN=function(i){return i.toString().replace(/^function.+?{/,"").slice(0,-1)},Zse=qN(WN(function(){var i=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},e=function(){this.init=function(){var f={};this.on=function(v,b){f[v]||(f[v]=[]),f[v]=f[v].concat(b)},this.off=function(v,b){var x;return f[v]?(x=f[v].indexOf(b),f[v]=f[v].slice(),f[v].splice(x,1),x>-1):!1},this.trigger=function(v){var b,x,C,I;if(b=f[v],!!b)if(arguments.length===2)for(C=b.length,x=0;x<C;++x)b[x].call(this,arguments[1]);else{for(I=[],x=arguments.length,x=1;x<arguments.length;++x)I.push(arguments[x]);for(C=b.length,x=0;x<C;++x)b[x].apply(this,I)}},this.dispose=function(){f={}}}};e.prototype.pipe=function(f){return this.on("data",function(v){f.push(v)}),this.on("done",function(v){f.flush(v)}),this.on("partialdone",function(v){f.partialFlush(v)}),this.on("endedtimeline",function(v){f.endTimeline(v)}),this.on("reset",function(v){f.reset(v)}),f},e.prototype.push=function(f){this.trigger("data",f)},e.prototype.flush=function(f){this.trigger("done",f)},e.prototype.partialFlush=function(f){this.trigger("partialdone",f)},e.prototype.endTimeline=function(f){this.trigger("endedtimeline",f)},e.prototype.reset=function(f){this.trigger("reset",f)};var t=e,r=Math.pow(2,32),n=function(f){var v=new DataView(f.buffer,f.byteOffset,f.byteLength),b;return v.getBigUint64?(b=v.getBigUint64(0),b<Number.MAX_SAFE_INTEGER?Number(b):b):v.getUint32(0)*r+v.getUint32(4)},s={getUint64:n,MAX_UINT32:r},a=s.MAX_UINT32,o,l,u,c,h,m,g,y,_,T,E,w,D,R,A,L,F,B,M,k,q,G,H,re,se,de,me,ue,oe,ce,te,fe,ye,Se,ke,qe;(function(){var f;if(H={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],mvex:[],mvhd:[],pasp:[],sdtp:[],smhd:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],styp:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[]},!(typeof Uint8Array>"u")){for(f in H)H.hasOwnProperty(f)&&(H[f]=[f.charCodeAt(0),f.charCodeAt(1),f.charCodeAt(2),f.charCodeAt(3)]);re=new Uint8Array([105,115,111,109]),de=new Uint8Array([97,118,99,49]),se=new Uint8Array([0,0,0,1]),me=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),ue=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]),oe={video:me,audio:ue},fe=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),te=new Uint8Array([0,0,0,0,0,0,0,0]),ye=new Uint8Array([0,0,0,0,0,0,0,0]),Se=ye,ke=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),qe=ye,ce=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0])}})(),o=function(f){var v=[],b=0,x,C,I;for(x=1;x<arguments.length;x++)v.push(arguments[x]);for(x=v.length;x--;)b+=v[x].byteLength;for(C=new Uint8Array(b+8),I=new DataView(C.buffer,C.byteOffset,C.byteLength),I.setUint32(0,C.byteLength),C.set(f,4),x=0,b=8;x<v.length;x++)C.set(v[x],b),b+=v[x].byteLength;return C},l=function(){return o(H.dinf,o(H.dref,fe))},u=function(f){return o(H.esds,new Uint8Array([0,0,0,0,3,25,0,0,0,4,17,64,21,0,6,0,0,0,218,192,0,0,218,192,5,2,f.audioobjecttype<<3|f.samplingfrequencyindex>>>1,f.samplingfrequencyindex<<7|f.channelcount<<3,6,1,2]))},c=function(){return o(H.ftyp,re,se,re,de)},L=function(f){return o(H.hdlr,oe[f])},h=function(f){return o(H.mdat,f)},A=function(f){var v=new Uint8Array([0,0,0,0,0,0,0,2,0,0,0,3,0,1,95,144,f.duration>>>24&255,f.duration>>>16&255,f.duration>>>8&255,f.duration&255,85,196,0,0]);return f.samplerate&&(v[12]=f.samplerate>>>24&255,v[13]=f.samplerate>>>16&255,v[14]=f.samplerate>>>8&255,v[15]=f.samplerate&255),o(H.mdhd,v)},R=function(f){return o(H.mdia,A(f),L(f.type),g(f))},m=function(f){return o(H.mfhd,new Uint8Array([0,0,0,0,(f&4278190080)>>24,(f&16711680)>>16,(f&65280)>>8,f&255]))},g=function(f){return o(H.minf,f.type==="video"?o(H.vmhd,ce):o(H.smhd,te),l(),B(f))},y=function(f,v){for(var b=[],x=v.length;x--;)b[x]=k(v[x]);return o.apply(null,[H.moof,m(f)].concat(b))},_=function(f){for(var v=f.length,b=[];v--;)b[v]=w(f[v]);return o.apply(null,[H.moov,E(4294967295)].concat(b).concat(T(f)))},T=function(f){for(var v=f.length,b=[];v--;)b[v]=q(f[v]);return o.apply(null,[H.mvex].concat(b))},E=function(f){var v=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,2,0,1,95,144,(f&4278190080)>>24,(f&16711680)>>16,(f&65280)>>8,f&255,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return o(H.mvhd,v)},F=function(f){var v=f.samples||[],b=new Uint8Array(4+v.length),x,C;for(C=0;C<v.length;C++)x=v[C].flags,b[C+4]=x.dependsOn<<4|x.isDependedOn<<2|x.hasRedundancy;return o(H.sdtp,b)},B=function(f){return o(H.stbl,M(f),o(H.stts,qe),o(H.stsc,Se),o(H.stsz,ke),o(H.stco,ye))},(function(){var f,v;M=function(b){return o(H.stsd,new Uint8Array([0,0,0,0,0,0,0,1]),b.type==="video"?f(b):v(b))},f=function(b){var x=b.sps||[],C=b.pps||[],I=[],W=[],Y,Q;for(Y=0;Y<x.length;Y++)I.push((x[Y].byteLength&65280)>>>8),I.push(x[Y].byteLength&255),I=I.concat(Array.prototype.slice.call(x[Y]));for(Y=0;Y<C.length;Y++)W.push((C[Y].byteLength&65280)>>>8),W.push(C[Y].byteLength&255),W=W.concat(Array.prototype.slice.call(C[Y]));if(Q=[H.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,(b.width&65280)>>8,b.width&255,(b.height&65280)>>8,b.height&255,0,72,0,0,0,72,0,0,0,0,0,0,0,1,19,118,105,100,101,111,106,115,45,99,111,110,116,114,105,98,45,104,108,115,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),o(H.avcC,new Uint8Array([1,b.profileIdc,b.profileCompatibility,b.levelIdc,255].concat([x.length],I,[C.length],W))),o(H.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192]))],b.sarRatio){var ee=b.sarRatio[0],le=b.sarRatio[1];Q.push(o(H.pasp,new Uint8Array([(ee&4278190080)>>24,(ee&16711680)>>16,(ee&65280)>>8,ee&255,(le&4278190080)>>24,(le&16711680)>>16,(le&65280)>>8,le&255])))}return o.apply(null,Q)},v=function(b){return o(H.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,(b.channelcount&65280)>>8,b.channelcount&255,(b.samplesize&65280)>>8,b.samplesize&255,0,0,0,0,(b.samplerate&65280)>>8,b.samplerate&255,0,0]),u(b))}})(),D=function(f){var v=new Uint8Array([0,0,0,7,0,0,0,0,0,0,0,0,(f.id&4278190080)>>24,(f.id&16711680)>>16,(f.id&65280)>>8,f.id&255,0,0,0,0,(f.duration&4278190080)>>24,(f.duration&16711680)>>16,(f.duration&65280)>>8,f.duration&255,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,(f.width&65280)>>8,f.width&255,0,0,(f.height&65280)>>8,f.height&255,0,0]);return o(H.tkhd,v)},k=function(f){var v,b,x,C,I,W,Y;return v=o(H.tfhd,new Uint8Array([0,0,0,58,(f.id&4278190080)>>24,(f.id&16711680)>>16,(f.id&65280)>>8,f.id&255,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0])),W=Math.floor(f.baseMediaDecodeTime/a),Y=Math.floor(f.baseMediaDecodeTime%a),b=o(H.tfdt,new Uint8Array([1,0,0,0,W>>>24&255,W>>>16&255,W>>>8&255,W&255,Y>>>24&255,Y>>>16&255,Y>>>8&255,Y&255])),I=92,f.type==="audio"?(x=G(f,I),o(H.traf,v,b,x)):(C=F(f),x=G(f,C.length+I),o(H.traf,v,b,x,C))},w=function(f){return f.duration=f.duration||4294967295,o(H.trak,D(f),R(f))},q=function(f){var v=new Uint8Array([0,0,0,0,(f.id&4278190080)>>24,(f.id&16711680)>>16,(f.id&65280)>>8,f.id&255,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]);return f.type!=="video"&&(v[v.length-1]=0),o(H.trex,v)},(function(){var f,v,b;b=function(x,C){var I=0,W=0,Y=0,Q=0;return x.length&&(x[0].duration!==void 0&&(I=1),x[0].size!==void 0&&(W=2),x[0].flags!==void 0&&(Y=4),x[0].compositionTimeOffset!==void 0&&(Q=8)),[0,0,I|W|Y|Q,1,(x.length&4278190080)>>>24,(x.length&16711680)>>>16,(x.length&65280)>>>8,x.length&255,(C&4278190080)>>>24,(C&16711680)>>>16,(C&65280)>>>8,C&255]},v=function(x,C){var I,W,Y,Q,ee,le;for(Q=x.samples||[],C+=20+16*Q.length,Y=b(Q,C),W=new Uint8Array(Y.length+Q.length*16),W.set(Y),I=Y.length,le=0;le<Q.length;le++)ee=Q[le],W[I++]=(ee.duration&4278190080)>>>24,W[I++]=(ee.duration&16711680)>>>16,W[I++]=(ee.duration&65280)>>>8,W[I++]=ee.duration&255,W[I++]=(ee.size&4278190080)>>>24,W[I++]=(ee.size&16711680)>>>16,W[I++]=(ee.size&65280)>>>8,W[I++]=ee.size&255,W[I++]=ee.flags.isLeading<<2|ee.flags.dependsOn,W[I++]=ee.flags.isDependedOn<<6|ee.flags.hasRedundancy<<4|ee.flags.paddingValue<<1|ee.flags.isNonSyncSample,W[I++]=ee.flags.degradationPriority&61440,W[I++]=ee.flags.degradationPriority&15,W[I++]=(ee.compositionTimeOffset&4278190080)>>>24,W[I++]=(ee.compositionTimeOffset&16711680)>>>16,W[I++]=(ee.compositionTimeOffset&65280)>>>8,W[I++]=ee.compositionTimeOffset&255;return o(H.trun,W)},f=function(x,C){var I,W,Y,Q,ee,le;for(Q=x.samples||[],C+=20+8*Q.length,Y=b(Q,C),I=new Uint8Array(Y.length+Q.length*8),I.set(Y),W=Y.length,le=0;le<Q.length;le++)ee=Q[le],I[W++]=(ee.duration&4278190080)>>>24,I[W++]=(ee.duration&16711680)>>>16,I[W++]=(ee.duration&65280)>>>8,I[W++]=ee.duration&255,I[W++]=(ee.size&4278190080)>>>24,I[W++]=(ee.size&16711680)>>>16,I[W++]=(ee.size&65280)>>>8,I[W++]=ee.size&255;return o(H.trun,I)},G=function(x,C){return x.type==="audio"?f(x,C):v(x,C)}})();var vt={ftyp:c,mdat:h,moof:y,moov:_,initSegment:function(f){var v=c(),b=_(f),x;return x=new Uint8Array(v.byteLength+b.byteLength),x.set(v),x.set(b,v.byteLength),x}},et=function(f){var v,b,x=[],C=[];for(C.byteLength=0,C.nalCount=0,C.duration=0,x.byteLength=0,v=0;v<f.length;v++)b=f[v],b.nalUnitType==="access_unit_delimiter_rbsp"?(x.length&&(x.duration=b.dts-x.dts,C.byteLength+=x.byteLength,C.nalCount+=x.length,C.duration+=x.duration,C.push(x)),x=[b],x.byteLength=b.data.byteLength,x.pts=b.pts,x.dts=b.dts):(b.nalUnitType==="slice_layer_without_partitioning_rbsp_idr"&&(x.keyFrame=!0),x.duration=b.dts-x.dts,x.byteLength+=b.data.byteLength,x.push(b));return C.length&&(!x.duration||x.duration<=0)&&(x.duration=C[C.length-1].duration),C.byteLength+=x.byteLength,C.nalCount+=x.length,C.duration+=x.duration,C.push(x),C},kt=function(f){var v,b,x=[],C=[];for(x.byteLength=0,x.nalCount=0,x.duration=0,x.pts=f[0].pts,x.dts=f[0].dts,C.byteLength=0,C.nalCount=0,C.duration=0,C.pts=f[0].pts,C.dts=f[0].dts,v=0;v<f.length;v++)b=f[v],b.keyFrame?(x.length&&(C.push(x),C.byteLength+=x.byteLength,C.nalCount+=x.nalCount,C.duration+=x.duration),x=[b],x.nalCount=b.length,x.byteLength=b.byteLength,x.pts=b.pts,x.dts=b.dts,x.duration=b.duration):(x.duration+=b.duration,x.nalCount+=b.length,x.byteLength+=b.byteLength,x.push(b));return C.length&&x.duration<=0&&(x.duration=C[C.length-1].duration),C.byteLength+=x.byteLength,C.nalCount+=x.nalCount,C.duration+=x.duration,C.push(x),C},pt=function(f){var v;return!f[0][0].keyFrame&&f.length>1&&(v=f.shift(),f.byteLength-=v.byteLength,f.nalCount-=v.nalCount,f[0][0].dts=v.dts,f[0][0].pts=v.pts,f[0][0].duration+=v.duration),f},Ut=function(){return{size:0,flags:{isLeading:0,dependsOn:1,isDependedOn:0,hasRedundancy:0,degradationPriority:0,isNonSyncSample:1}}},Vt=function(f,v){var b=Ut();return b.dataOffset=v,b.compositionTimeOffset=f.pts-f.dts,b.duration=f.duration,b.size=4*f.length,b.size+=f.byteLength,f.keyFrame&&(b.flags.dependsOn=2,b.flags.isNonSyncSample=0),b},Xe=function(f,v){var b,x,C,I,W,Y=v||0,Q=[];for(b=0;b<f.length;b++)for(I=f[b],x=0;x<I.length;x++)W=I[x],C=Vt(W,Y),Y+=C.size,Q.push(C);return Q},Ue=function(f){var v,b,x,C,I,W,Y=0,Q=f.byteLength,ee=f.nalCount,le=Q+4*ee,ge=new Uint8Array(le),He=new DataView(ge.buffer);for(v=0;v<f.length;v++)for(C=f[v],b=0;b<C.length;b++)for(I=C[b],x=0;x<I.length;x++)W=I[x],He.setUint32(Y,W.data.byteLength),Y+=4,ge.set(W.data,Y),Y+=W.data.byteLength;return ge},Le=function(f,v){var b,x=v||0,C=[];return b=Vt(f,x),C.push(b),C},Ne=function(f){var v,b,x=0,C=f.byteLength,I=f.length,W=C+4*I,Y=new Uint8Array(W),Q=new DataView(Y.buffer);for(v=0;v<f.length;v++)b=f[v],Q.setUint32(x,b.data.byteLength),x+=4,Y.set(b.data,x),x+=b.data.byteLength;return Y},rt={groupNalsIntoFrames:et,groupFramesIntoGops:kt,extendFirstKeyFrame:pt,generateSampleTable:Xe,concatenateNalData:Ue,generateSampleTableForFrame:Le,concatenateNalDataForFrame:Ne},lt=[33,16,5,32,164,27],dt=[33,65,108,84,1,2,4,8,168,2,4,8,17,191,252],ut=function(f){for(var v=[];f--;)v.push(0);return v},At=function(f){return Object.keys(f).reduce(function(v,b){return v[b]=new Uint8Array(f[b].reduce(function(x,C){return x.concat(C)},[])),v},{})},it,Sr=function(){if(!it){var f={96e3:[lt,[227,64],ut(154),[56]],88200:[lt,[231],ut(170),[56]],64e3:[lt,[248,192],ut(240),[56]],48e3:[lt,[255,192],ut(268),[55,148,128],ut(54),[112]],44100:[lt,[255,192],ut(268),[55,163,128],ut(84),[112]],32e3:[lt,[255,192],ut(268),[55,234],ut(226),[112]],24e3:[lt,[255,192],ut(268),[55,255,128],ut(268),[111,112],ut(126),[224]],16e3:[lt,[255,192],ut(268),[55,255,128],ut(268),[111,255],ut(269),[223,108],ut(195),[1,192]],12e3:[dt,ut(268),[3,127,248],ut(268),[6,255,240],ut(268),[13,255,224],ut(268),[27,253,128],ut(259),[56]],11025:[dt,ut(268),[3,127,248],ut(268),[6,255,240],ut(268),[13,255,224],ut(268),[27,255,192],ut(268),[55,175,128],ut(108),[112]],8e3:[dt,ut(268),[3,121,16],ut(47),[7]]};it=At(f)}return it},xr=9e4,zr,cr,Gt,Er,Ir,Hr,It;zr=function(f){return f*xr},cr=function(f,v){return f*v},Gt=function(f){return f/xr},Er=function(f,v){return f/v},Ir=function(f,v){return zr(Er(f,v))},Hr=function(f,v){return cr(Gt(f),v)},It=function(f,v,b){return Gt(b?f:f-v)};var $t={ONE_SECOND_IN_TS:xr,secondsToVideoTs:zr,secondsToAudioTs:cr,videoTsToSeconds:Gt,audioTsToSeconds:Er,audioTsToVideoTs:Ir,videoTsToAudioTs:Hr,metadataTsToSeconds:It},Bi=Sr,zt=$t,Dr=function(f){var v,b,x=0;for(v=0;v<f.length;v++)b=f[v],x+=b.data.byteLength;return x},$r=function(f,v,b,x){var C,I=0,W=0,Y=0,Q=0,ee,le,ge;if(v.length&&(C=zt.audioTsToVideoTs(f.baseMediaDecodeTime,f.samplerate),I=Math.ceil(zt.ONE_SECOND_IN_TS/(f.samplerate/1024)),b&&x&&(W=C-Math.max(b,x),Y=Math.floor(W/I),Q=Y*I),!(Y<1||Q>zt.ONE_SECOND_IN_TS/2))){for(ee=Bi()[f.samplerate],ee||(ee=v[0].data),le=0;le<Y;le++)ge=v[0],v.splice(0,0,{data:ee,dts:ge.dts-I,pts:ge.pts-I});return f.baseMediaDecodeTime-=Math.floor(zt.videoTsToAudioTs(Q,f.samplerate)),Q}},Jr=function(f,v,b){return v.minSegmentDts>=b?f:(v.minSegmentDts=1/0,f.filter(function(x){return x.dts>=b?(v.minSegmentDts=Math.min(v.minSegmentDts,x.dts),v.minSegmentPts=v.minSegmentDts,!0):!1}))},Ni=function(f){var v,b,x=[];for(v=0;v<f.length;v++)b=f[v],x.push({size:b.data.byteLength,duration:1024});return x},sn=function(f){var v,b,x=0,C=new Uint8Array(Dr(f));for(v=0;v<f.length;v++)b=f[v],C.set(b.data,x),x+=b.data.byteLength;return C},Ui={prefixWithSilence:$r,trimAdtsFramesByEarliestDts:Jr,generateSampleTable:Ni,concatenateFrameData:sn},Wi=$t.ONE_SECOND_IN_TS,ne=function(f,v){typeof v.pts=="number"&&(f.timelineStartInfo.pts===void 0&&(f.timelineStartInfo.pts=v.pts),f.minSegmentPts===void 0?f.minSegmentPts=v.pts:f.minSegmentPts=Math.min(f.minSegmentPts,v.pts),f.maxSegmentPts===void 0?f.maxSegmentPts=v.pts:f.maxSegmentPts=Math.max(f.maxSegmentPts,v.pts)),typeof v.dts=="number"&&(f.timelineStartInfo.dts===void 0&&(f.timelineStartInfo.dts=v.dts),f.minSegmentDts===void 0?f.minSegmentDts=v.dts:f.minSegmentDts=Math.min(f.minSegmentDts,v.dts),f.maxSegmentDts===void 0?f.maxSegmentDts=v.dts:f.maxSegmentDts=Math.max(f.maxSegmentDts,v.dts))},he=function(f){delete f.minSegmentDts,delete f.maxSegmentDts,delete f.minSegmentPts,delete f.maxSegmentPts},Ce=function(f,v){var b,x,C=f.minSegmentDts;return v||(C-=f.timelineStartInfo.dts),b=f.timelineStartInfo.baseMediaDecodeTime,b+=C,b=Math.max(0,b),f.type==="audio"&&(x=f.samplerate/Wi,b*=x,b=Math.floor(b)),b},ze={clearDtsInfo:he,calculateTrackBaseMediaDecodeTime:Ce,collectDtsInfo:ne},yt=4,ir=128,xe=function(f){for(var v=0,b={payloadType:-1,payloadSize:0},x=0,C=0;v<f.byteLength&&f[v]!==ir;){for(;f[v]===255;)x+=255,v++;for(x+=f[v++];f[v]===255;)C+=255,v++;if(C+=f[v++],!b.payload&&x===yt){var I=String.fromCharCode(f[v+3],f[v+4],f[v+5],f[v+6]);if(I==="GA94"){b.payloadType=x,b.payloadSize=C,b.payload=f.subarray(v,v+C);break}else b.payload=void 0}v+=C,x=0,C=0}return b},Pe=function(f){return f.payload[0]!==181||(f.payload[1]<<8|f.payload[2])!==49||String.fromCharCode(f.payload[3],f.payload[4],f.payload[5],f.payload[6])!=="GA94"||f.payload[7]!==3?null:f.payload.subarray(8,f.payload.length-1)},Be=function(f,v){var b=[],x,C,I,W;if(!(v[0]&64))return b;for(C=v[0]&31,x=0;x<C;x++)I=x*3,W={type:v[I+2]&3,pts:f},v[I+2]&4&&(W.ccData=v[I+3]<<8|v[I+4],b.push(W));return b},nt=function(f){for(var v=f.byteLength,b=[],x=1,C,I;x<v-2;)f[x]===0&&f[x+1]===0&&f[x+2]===3?(b.push(x+2),x+=2):x++;if(b.length===0)return f;C=v-b.length,I=new Uint8Array(C);var W=0;for(x=0;x<C;W++,x++)W===b[0]&&(W++,b.shift()),I[x]=f[W];return I},ct={parseSei:xe,parseUserData:Pe,parseCaptionPackets:Be,discardEmulationPreventionBytes:nt,USER_DATA_REGISTERED_ITU_T_T35:yt},Rt=t,Ot=ct,st=function(f){f=f||{},st.prototype.init.call(this),this.parse708captions_=typeof f.parse708captions=="boolean"?f.parse708captions:!0,this.captionPackets_=[],this.ccStreams_=[new Qt(0,0),new Qt(0,1),new Qt(1,0),new Qt(1,1)],this.parse708captions_&&(this.cc708Stream_=new mt({captionServices:f.captionServices})),this.reset(),this.ccStreams_.forEach(function(v){v.on("data",this.trigger.bind(this,"data")),v.on("partialdone",this.trigger.bind(this,"partialdone")),v.on("done",this.trigger.bind(this,"done"))},this),this.parse708captions_&&(this.cc708Stream_.on("data",this.trigger.bind(this,"data")),this.cc708Stream_.on("partialdone",this.trigger.bind(this,"partialdone")),this.cc708Stream_.on("done",this.trigger.bind(this,"done")))};st.prototype=new Rt,st.prototype.push=function(f){var v,b,x;if(f.nalUnitType==="sei_rbsp"&&(v=Ot.parseSei(f.escapedRBSP),!!v.payload&&v.payloadType===Ot.USER_DATA_REGISTERED_ITU_T_T35&&(b=Ot.parseUserData(v),!!b))){if(f.dts<this.latestDts_){this.ignoreNextEqualDts_=!0;return}else if(f.dts===this.latestDts_&&this.ignoreNextEqualDts_){this.numSameDts_--,this.numSameDts_||(this.ignoreNextEqualDts_=!1);return}x=Ot.parseCaptionPackets(f.pts,b),this.captionPackets_=this.captionPackets_.concat(x),this.latestDts_!==f.dts&&(this.numSameDts_=0),this.numSameDts_++,this.latestDts_=f.dts}},st.prototype.flushCCStreams=function(f){this.ccStreams_.forEach(function(v){return f==="flush"?v.flush():v.partialFlush()},this)},st.prototype.flushStream=function(f){if(!this.captionPackets_.length){this.flushCCStreams(f);return}this.captionPackets_.forEach(function(v,b){v.presortIndex=b}),this.captionPackets_.sort(function(v,b){return v.pts===b.pts?v.presortIndex-b.presortIndex:v.pts-b.pts}),this.captionPackets_.forEach(function(v){v.type<2?this.dispatchCea608Packet(v):this.dispatchCea708Packet(v)},this),this.captionPackets_.length=0,this.flushCCStreams(f)},st.prototype.flush=function(){return this.flushStream("flush")},st.prototype.partialFlush=function(){return this.flushStream("partialFlush")},st.prototype.reset=function(){this.latestDts_=null,this.ignoreNextEqualDts_=!1,this.numSameDts_=0,this.activeCea608Channel_=[null,null],this.ccStreams_.forEach(function(f){f.reset()})},st.prototype.dispatchCea608Packet=function(f){this.setsTextOrXDSActive(f)?this.activeCea608Channel_[f.type]=null:this.setsChannel1Active(f)?this.activeCea608Channel_[f.type]=0:this.setsChannel2Active(f)&&(this.activeCea608Channel_[f.type]=1),this.activeCea608Channel_[f.type]!==null&&this.ccStreams_[(f.type<<1)+this.activeCea608Channel_[f.type]].push(f)},st.prototype.setsChannel1Active=function(f){return(f.ccData&30720)===4096},st.prototype.setsChannel2Active=function(f){return(f.ccData&30720)===6144},st.prototype.setsTextOrXDSActive=function(f){return(f.ccData&28928)===256||(f.ccData&30974)===4138||(f.ccData&30974)===6186},st.prototype.dispatchCea708Packet=function(f){this.parse708captions_&&this.cc708Stream_.push(f)};var _t={127:9834,4128:32,4129:160,4133:8230,4138:352,4140:338,4144:9608,4145:8216,4146:8217,4147:8220,4148:8221,4149:8226,4153:8482,4154:353,4156:339,4157:8480,4159:376,4214:8539,4215:8540,4216:8541,4217:8542,4218:9168,4219:9124,4220:9123,4221:9135,4222:9126,4223:9121,4256:12600},jt=function(f){var v=_t[f]||f;return f&4096&&f===v?"":String.fromCharCode(v)},Kt=function(f){return 32<=f&&f<=127||160<=f&&f<=255},Pt=function(f){this.windowNum=f,this.reset()};Pt.prototype.reset=function(){this.clearText(),this.pendingNewLine=!1,this.winAttr={},this.penAttr={},this.penLoc={},this.penColor={},this.visible=0,this.rowLock=0,this.columnLock=0,this.priority=0,this.relativePositioning=0,this.anchorVertical=0,this.anchorHorizontal=0,this.anchorPoint=0,this.rowCount=1,this.virtualRowCount=this.rowCount+1,this.columnCount=41,this.windowStyle=0,this.penStyle=0},Pt.prototype.getText=function(){return this.rows.join(`
`)},Pt.prototype.clearText=function(){this.rows=[""],this.rowIdx=0},Pt.prototype.newLine=function(f){for(this.rows.length>=this.virtualRowCount&&typeof this.beforeRowOverflow=="function"&&this.beforeRowOverflow(f),this.rows.length>0&&(this.rows.push(""),this.rowIdx++);this.rows.length>this.virtualRowCount;)this.rows.shift(),this.rowIdx--},Pt.prototype.isEmpty=function(){return this.rows.length===0?!0:this.rows.length===1?this.rows[0]==="":!1},Pt.prototype.addText=function(f){this.rows[this.rowIdx]+=f},Pt.prototype.backspace=function(){if(!this.isEmpty()){var f=this.rows[this.rowIdx];this.rows[this.rowIdx]=f.substr(0,f.length-1)}};var sr=function(f,v,b){this.serviceNum=f,this.text="",this.currentWindow=new Pt(-1),this.windows=[],this.stream=b,typeof v=="string"&&this.createTextDecoder(v)};sr.prototype.init=function(f,v){this.startPts=f;for(var b=0;b<8;b++)this.windows[b]=new Pt(b),typeof v=="function"&&(this.windows[b].beforeRowOverflow=v)},sr.prototype.setCurrentWindow=function(f){this.currentWindow=this.windows[f]},sr.prototype.createTextDecoder=function(f){if(typeof TextDecoder>"u")this.stream.trigger("log",{level:"warn",message:"The `encoding` option is unsupported without TextDecoder support"});else try{this.textDecoder_=new TextDecoder(f)}catch(v){this.stream.trigger("log",{level:"warn",message:"TextDecoder could not be created with "+f+" encoding. "+v})}};var mt=function(f){f=f||{},mt.prototype.init.call(this);var v=this,b=f.captionServices||{},x={},C;Object.keys(b).forEach(I=>{C=b[I],/^SERVICE/.test(I)&&(x[I]=C.encoding)}),this.serviceEncodings=x,this.current708Packet=null,this.services={},this.push=function(I){I.type===3?(v.new708Packet(),v.add708Bytes(I)):(v.current708Packet===null&&v.new708Packet(),v.add708Bytes(I))}};mt.prototype=new Rt,mt.prototype.new708Packet=function(){this.current708Packet!==null&&this.push708Packet(),this.current708Packet={data:[],ptsVals:[]}},mt.prototype.add708Bytes=function(f){var v=f.ccData,b=v>>>8,x=v&255;this.current708Packet.ptsVals.push(f.pts),this.current708Packet.data.push(b),this.current708Packet.data.push(x)},mt.prototype.push708Packet=function(){var f=this.current708Packet,v=f.data,b=null,x=null,C=0,I=v[C++];for(f.seq=I>>6,f.sizeCode=I&63;C<v.length;C++)I=v[C++],b=I>>5,x=I&31,b===7&&x>0&&(I=v[C++],b=I),this.pushServiceBlock(b,C,x),x>0&&(C+=x-1)},mt.prototype.pushServiceBlock=function(f,v,b){var x,C=v,I=this.current708Packet.data,W=this.services[f];for(W||(W=this.initService(f,C));C<v+b&&C<I.length;C++)x=I[C],Kt(x)?C=this.handleText(C,W):x===24?C=this.multiByteCharacter(C,W):x===16?C=this.extendedCommands(C,W):128<=x&&x<=135?C=this.setCurrentWindow(C,W):152<=x&&x<=159?C=this.defineWindow(C,W):x===136?C=this.clearWindows(C,W):x===140?C=this.deleteWindows(C,W):x===137?C=this.displayWindows(C,W):x===138?C=this.hideWindows(C,W):x===139?C=this.toggleWindows(C,W):x===151?C=this.setWindowAttributes(C,W):x===144?C=this.setPenAttributes(C,W):x===145?C=this.setPenColor(C,W):x===146?C=this.setPenLocation(C,W):x===143?W=this.reset(C,W):x===8?W.currentWindow.backspace():x===12?W.currentWindow.clearText():x===13?W.currentWindow.pendingNewLine=!0:x===14?W.currentWindow.clearText():x===141&&C++},mt.prototype.extendedCommands=function(f,v){var b=this.current708Packet.data,x=b[++f];return Kt(x)&&(f=this.handleText(f,v,{isExtended:!0})),f},mt.prototype.getPts=function(f){return this.current708Packet.ptsVals[Math.floor(f/2)]},mt.prototype.initService=function(f,v){var x="SERVICE"+f,b=this,x,C;return x in this.serviceEncodings&&(C=this.serviceEncodings[x]),this.services[f]=new sr(f,C,b),this.services[f].init(this.getPts(v),function(I){b.flushDisplayed(I,b.services[f])}),this.services[f]},mt.prototype.handleText=function(f,v,b){var x=b&&b.isExtended,C=b&&b.isMultiByte,I=this.current708Packet.data,W=x?4096:0,Y=I[f],Q=I[f+1],ee=v.currentWindow,le,ge;function He(Ee){return Ee.map(gt=>("0"+(gt&255).toString(16)).slice(-2)).join("")}if(C?(ge=[Y,Q],f++):ge=[Y],v.textDecoder_&&!x)le=v.textDecoder_.decode(new Uint8Array(ge));else if(C){const Ee=He(ge);le=String.fromCharCode(parseInt(Ee,16))}else le=jt(W|Y);return ee.pendingNewLine&&!ee.isEmpty()&&ee.newLine(this.getPts(f)),ee.pendingNewLine=!1,ee.addText(le),f},mt.prototype.multiByteCharacter=function(f,v){var b=this.current708Packet.data,x=b[f+1],C=b[f+2];return Kt(x)&&Kt(C)&&(f=this.handleText(++f,v,{isMultiByte:!0})),f},mt.prototype.setCurrentWindow=function(f,v){var b=this.current708Packet.data,x=b[f],C=x&7;return v.setCurrentWindow(C),f},mt.prototype.defineWindow=function(f,v){var b=this.current708Packet.data,x=b[f],C=x&7;v.setCurrentWindow(C);var I=v.currentWindow;return x=b[++f],I.visible=(x&32)>>5,I.rowLock=(x&16)>>4,I.columnLock=(x&8)>>3,I.priority=x&7,x=b[++f],I.relativePositioning=(x&128)>>7,I.anchorVertical=x&127,x=b[++f],I.anchorHorizontal=x,x=b[++f],I.anchorPoint=(x&240)>>4,I.rowCount=x&15,x=b[++f],I.columnCount=x&63,x=b[++f],I.windowStyle=(x&56)>>3,I.penStyle=x&7,I.virtualRowCount=I.rowCount+1,f},mt.prototype.setWindowAttributes=function(f,v){var b=this.current708Packet.data,x=b[f],C=v.currentWindow.winAttr;return x=b[++f],C.fillOpacity=(x&192)>>6,C.fillRed=(x&48)>>4,C.fillGreen=(x&12)>>2,C.fillBlue=x&3,x=b[++f],C.borderType=(x&192)>>6,C.borderRed=(x&48)>>4,C.borderGreen=(x&12)>>2,C.borderBlue=x&3,x=b[++f],C.borderType+=(x&128)>>5,C.wordWrap=(x&64)>>6,C.printDirection=(x&48)>>4,C.scrollDirection=(x&12)>>2,C.justify=x&3,x=b[++f],C.effectSpeed=(x&240)>>4,C.effectDirection=(x&12)>>2,C.displayEffect=x&3,f},mt.prototype.flushDisplayed=function(f,v){for(var b=[],x=0;x<8;x++)v.windows[x].visible&&!v.windows[x].isEmpty()&&b.push(v.windows[x].getText());v.endPts=f,v.text=b.join(`

`),this.pushCaption(v),v.startPts=f},mt.prototype.pushCaption=function(f){f.text!==""&&(this.trigger("data",{startPts:f.startPts,endPts:f.endPts,text:f.text,stream:"cc708_"+f.serviceNum}),f.text="",f.startPts=f.endPts)},mt.prototype.displayWindows=function(f,v){var b=this.current708Packet.data,x=b[++f],C=this.getPts(f);this.flushDisplayed(C,v);for(var I=0;I<8;I++)x&1<<I&&(v.windows[I].visible=1);return f},mt.prototype.hideWindows=function(f,v){var b=this.current708Packet.data,x=b[++f],C=this.getPts(f);this.flushDisplayed(C,v);for(var I=0;I<8;I++)x&1<<I&&(v.windows[I].visible=0);return f},mt.prototype.toggleWindows=function(f,v){var b=this.current708Packet.data,x=b[++f],C=this.getPts(f);this.flushDisplayed(C,v);for(var I=0;I<8;I++)x&1<<I&&(v.windows[I].visible^=1);return f},mt.prototype.clearWindows=function(f,v){var b=this.current708Packet.data,x=b[++f],C=this.getPts(f);this.flushDisplayed(C,v);for(var I=0;I<8;I++)x&1<<I&&v.windows[I].clearText();return f},mt.prototype.deleteWindows=function(f,v){var b=this.current708Packet.data,x=b[++f],C=this.getPts(f);this.flushDisplayed(C,v);for(var I=0;I<8;I++)x&1<<I&&v.windows[I].reset();return f},mt.prototype.setPenAttributes=function(f,v){var b=this.current708Packet.data,x=b[f],C=v.currentWindow.penAttr;return x=b[++f],C.textTag=(x&240)>>4,C.offset=(x&12)>>2,C.penSize=x&3,x=b[++f],C.italics=(x&128)>>7,C.underline=(x&64)>>6,C.edgeType=(x&56)>>3,C.fontStyle=x&7,f},mt.prototype.setPenColor=function(f,v){var b=this.current708Packet.data,x=b[f],C=v.currentWindow.penColor;return x=b[++f],C.fgOpacity=(x&192)>>6,C.fgRed=(x&48)>>4,C.fgGreen=(x&12)>>2,C.fgBlue=x&3,x=b[++f],C.bgOpacity=(x&192)>>6,C.bgRed=(x&48)>>4,C.bgGreen=(x&12)>>2,C.bgBlue=x&3,x=b[++f],C.edgeRed=(x&48)>>4,C.edgeGreen=(x&12)>>2,C.edgeBlue=x&3,f},mt.prototype.setPenLocation=function(f,v){var b=this.current708Packet.data,x=b[f],C=v.currentWindow.penLoc;return v.currentWindow.pendingNewLine=!0,x=b[++f],C.row=x&15,x=b[++f],C.column=x&63,f},mt.prototype.reset=function(f,v){var b=this.getPts(f);return this.flushDisplayed(b,v),this.initService(v.serviceNum,f)};var dr={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,304:174,305:176,306:189,307:191,308:8482,309:162,310:163,311:9834,312:224,313:160,314:232,315:226,316:234,317:238,318:244,319:251,544:193,545:201,546:211,547:218,548:220,549:252,550:8216,551:161,552:42,553:39,554:8212,555:169,556:8480,557:8226,558:8220,559:8221,560:192,561:194,562:199,563:200,564:202,565:203,566:235,567:206,568:207,569:239,570:212,571:217,572:249,573:219,574:171,575:187,800:195,801:227,802:205,803:204,804:236,805:210,806:242,807:213,808:245,809:123,810:125,811:92,812:94,813:95,814:124,815:126,816:196,817:228,818:214,819:246,820:223,821:165,822:164,823:9474,824:197,825:229,826:216,827:248,828:9484,829:9488,830:9492,831:9496},Vr=function(f){return f===null?"":(f=dr[f]||f,String.fromCharCode(f))},wr=14,Pr=[4352,4384,4608,4640,5376,5408,5632,5664,5888,5920,4096,4864,4896,5120,5152],Ti=function(){for(var f=[],v=wr+1;v--;)f.push({text:"",indent:0,offset:0});return f},Qt=function(f,v){Qt.prototype.init.call(this),this.field_=f||0,this.dataChannel_=v||0,this.name_="CC"+((this.field_<<1|this.dataChannel_)+1),this.setConstants(),this.reset(),this.push=function(b){var x,C,I,W,Y;if(x=b.ccData&32639,x===this.lastControlCode_){this.lastControlCode_=null;return}if((x&61440)===4096?this.lastControlCode_=x:x!==this.PADDING_&&(this.lastControlCode_=null),I=x>>>8,W=x&255,x!==this.PADDING_)if(x===this.RESUME_CAPTION_LOADING_)this.mode_="popOn";else if(x===this.END_OF_CAPTION_)this.mode_="popOn",this.clearFormatting(b.pts),this.flushDisplayed(b.pts),C=this.displayed_,this.displayed_=this.nonDisplayed_,this.nonDisplayed_=C,this.startPts_=b.pts;else if(x===this.ROLL_UP_2_ROWS_)this.rollUpRows_=2,this.setRollUp(b.pts);else if(x===this.ROLL_UP_3_ROWS_)this.rollUpRows_=3,this.setRollUp(b.pts);else if(x===this.ROLL_UP_4_ROWS_)this.rollUpRows_=4,this.setRollUp(b.pts);else if(x===this.CARRIAGE_RETURN_)this.clearFormatting(b.pts),this.flushDisplayed(b.pts),this.shiftRowsUp_(),this.startPts_=b.pts;else if(x===this.BACKSPACE_)this.mode_==="popOn"?this.nonDisplayed_[this.row_].text=this.nonDisplayed_[this.row_].text.slice(0,-1):this.displayed_[this.row_].text=this.displayed_[this.row_].text.slice(0,-1);else if(x===this.ERASE_DISPLAYED_MEMORY_)this.flushDisplayed(b.pts),this.displayed_=Ti();else if(x===this.ERASE_NON_DISPLAYED_MEMORY_)this.nonDisplayed_=Ti();else if(x===this.RESUME_DIRECT_CAPTIONING_)this.mode_!=="paintOn"&&(this.flushDisplayed(b.pts),this.displayed_=Ti()),this.mode_="paintOn",this.startPts_=b.pts;else if(this.isSpecialCharacter(I,W))I=(I&3)<<8,Y=Vr(I|W),this[this.mode_](b.pts,Y),this.column_++;else if(this.isExtCharacter(I,W))this.mode_==="popOn"?this.nonDisplayed_[this.row_].text=this.nonDisplayed_[this.row_].text.slice(0,-1):this.displayed_[this.row_].text=this.displayed_[this.row_].text.slice(0,-1),I=(I&3)<<8,Y=Vr(I|W),this[this.mode_](b.pts,Y),this.column_++;else if(this.isMidRowCode(I,W))this.clearFormatting(b.pts),this[this.mode_](b.pts," "),this.column_++,(W&14)===14&&this.addFormatting(b.pts,["i"]),(W&1)===1&&this.addFormatting(b.pts,["u"]);else if(this.isOffsetControlCode(I,W)){const ee=W&3;this.nonDisplayed_[this.row_].offset=ee,this.column_+=ee}else if(this.isPAC(I,W)){var Q=Pr.indexOf(x&7968);if(this.mode_==="rollUp"&&(Q-this.rollUpRows_+1<0&&(Q=this.rollUpRows_-1),this.setRollUp(b.pts,Q)),Q!==this.row_&&Q>=0&&Q<=14&&(this.clearFormatting(b.pts),this.row_=Q),W&1&&this.formatting_.indexOf("u")===-1&&this.addFormatting(b.pts,["u"]),(x&16)===16){const ee=(x&14)>>1;this.column_=ee*4,this.nonDisplayed_[this.row_].indent+=ee}this.isColorPAC(W)&&(W&14)===14&&this.addFormatting(b.pts,["i"])}else this.isNormalChar(I)&&(W===0&&(W=null),Y=Vr(I),Y+=Vr(W),this[this.mode_](b.pts,Y),this.column_+=Y.length)}};Qt.prototype=new Rt,Qt.prototype.flushDisplayed=function(f){const v=x=>{this.trigger("log",{level:"warn",message:"Skipping a malformed 608 caption at index "+x+"."})},b=[];this.displayed_.forEach((x,C)=>{if(x&&x.text&&x.text.length){try{x.text=x.text.trim()}catch{v(C)}x.text.length&&b.push({text:x.text,line:C+1,position:10+Math.min(70,x.indent*10)+x.offset*2.5})}else x==null&&v(C)}),b.length&&this.trigger("data",{startPts:this.startPts_,endPts:f,content:b,stream:this.name_})},Qt.prototype.reset=function(){this.mode_="popOn",this.topRow_=0,this.startPts_=0,this.displayed_=Ti(),this.nonDisplayed_=Ti(),this.lastControlCode_=null,this.column_=0,this.row_=wr,this.rollUpRows_=2,this.formatting_=[]},Qt.prototype.setConstants=function(){this.dataChannel_===0?(this.BASE_=16,this.EXT_=17,this.CONTROL_=(20|this.field_)<<8,this.OFFSET_=23):this.dataChannel_===1&&(this.BASE_=24,this.EXT_=25,this.CONTROL_=(28|this.field_)<<8,this.OFFSET_=31),this.PADDING_=0,this.RESUME_CAPTION_LOADING_=this.CONTROL_|32,this.END_OF_CAPTION_=this.CONTROL_|47,this.ROLL_UP_2_ROWS_=this.CONTROL_|37,this.ROLL_UP_3_ROWS_=this.CONTROL_|38,this.ROLL_UP_4_ROWS_=this.CONTROL_|39,this.CARRIAGE_RETURN_=this.CONTROL_|45,this.RESUME_DIRECT_CAPTIONING_=this.CONTROL_|41,this.BACKSPACE_=this.CONTROL_|33,this.ERASE_DISPLAYED_MEMORY_=this.CONTROL_|44,this.ERASE_NON_DISPLAYED_MEMORY_=this.CONTROL_|46},Qt.prototype.isSpecialCharacter=function(f,v){return f===this.EXT_&&v>=48&&v<=63},Qt.prototype.isExtCharacter=function(f,v){return(f===this.EXT_+1||f===this.EXT_+2)&&v>=32&&v<=63},Qt.prototype.isMidRowCode=function(f,v){return f===this.EXT_&&v>=32&&v<=47},Qt.prototype.isOffsetControlCode=function(f,v){return f===this.OFFSET_&&v>=33&&v<=35},Qt.prototype.isPAC=function(f,v){return f>=this.BASE_&&f<this.BASE_+8&&v>=64&&v<=127},Qt.prototype.isColorPAC=function(f){return f>=64&&f<=79||f>=96&&f<=127},Qt.prototype.isNormalChar=function(f){return f>=32&&f<=127},Qt.prototype.setRollUp=function(f,v){if(this.mode_!=="rollUp"&&(this.row_=wr,this.mode_="rollUp",this.flushDisplayed(f),this.nonDisplayed_=Ti(),this.displayed_=Ti()),v!==void 0&&v!==this.row_)for(var b=0;b<this.rollUpRows_;b++)this.displayed_[v-b]=this.displayed_[this.row_-b],this.displayed_[this.row_-b]={text:"",indent:0,offset:0};v===void 0&&(v=this.row_),this.topRow_=v-this.rollUpRows_+1},Qt.prototype.addFormatting=function(f,v){this.formatting_=this.formatting_.concat(v);var b=v.reduce(function(x,C){return x+"<"+C+">"},"");this[this.mode_](f,b)},Qt.prototype.clearFormatting=function(f){if(this.formatting_.length){var v=this.formatting_.reverse().reduce(function(b,x){return b+"</"+x+">"},"");this.formatting_=[],this[this.mode_](f,v)}},Qt.prototype.popOn=function(f,v){var b=this.nonDisplayed_[this.row_].text;b+=v,this.nonDisplayed_[this.row_].text=b},Qt.prototype.rollUp=function(f,v){var b=this.displayed_[this.row_].text;b+=v,this.displayed_[this.row_].text=b},Qt.prototype.shiftRowsUp_=function(){var f;for(f=0;f<this.topRow_;f++)this.displayed_[f]={text:"",indent:0,offset:0};for(f=this.row_+1;f<wr+1;f++)this.displayed_[f]={text:"",indent:0,offset:0};for(f=this.topRow_;f<this.row_;f++)this.displayed_[f]=this.displayed_[f+1];this.displayed_[this.row_]={text:"",indent:0,offset:0}},Qt.prototype.paintOn=function(f,v){var b=this.displayed_[this.row_].text;b+=v,this.displayed_[this.row_].text=b};var vn={CaptionStream:st,Cea608Stream:Qt,Cea708Stream:mt},ui={H264_STREAM_TYPE:27,ADTS_STREAM_TYPE:15,METADATA_STREAM_TYPE:21},gs=t,Xr=8589934592,vs=4294967296,an="shared",Ji=function(f,v){var b=1;for(f>v&&(b=-1);Math.abs(v-f)>vs;)f+=b*Xr;return f},Cr=function(f){var v,b;Cr.prototype.init.call(this),this.type_=f||an,this.push=function(x){if(x.type==="metadata"){this.trigger("data",x);return}this.type_!==an&&x.type!==this.type_||(b===void 0&&(b=x.dts),x.dts=Ji(x.dts,b),x.pts=Ji(x.pts,b),v=x.dts,this.trigger("data",x))},this.flush=function(){b=v,this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")},this.discontinuity=function(){b=void 0,v=void 0},this.reset=function(){this.discontinuity(),this.trigger("reset")}};Cr.prototype=new gs;var we={TimestampRolloverStream:Cr,handleRollover:Ji},Fe=(f,v,b)=>{if(!f)return-1;for(var x=b;x<f.length;x++)if(f[x]===v)return x;return-1},Ge={typedArrayIndexOf:Fe},Ye=Ge.typedArrayIndexOf,ot={Utf8:3},Tt=function(f,v,b){var x,C="";for(x=v;x<b;x++)C+="%"+("00"+f[x].toString(16)).slice(-2);return C},Dt=function(f,v,b){return decodeURIComponent(Tt(f,v,b))},mr=function(f,v,b){return unescape(Tt(f,v,b))},Mr=function(f){return f[0]<<21|f[1]<<14|f[2]<<7|f[3]},ci={APIC:function(f){var v=1,b,x,C="-->";f.data[0]===ot.Utf8&&(b=Ye(f.data,0,v),!(b<0)&&(f.mimeType=mr(f.data,v,b),v=b+1,f.pictureType=f.data[v],v++,x=Ye(f.data,0,v),!(x<0)&&(f.description=Dt(f.data,v,x),v=x+1,f.mimeType===C?f.url=mr(f.data,v,f.data.length):f.pictureData=f.data.subarray(v,f.data.length))))},"T*":function(f){f.data[0]===ot.Utf8&&(f.value=Dt(f.data,1,f.data.length).replace(/\0*$/,""),f.values=f.value.split("\0"))},TXXX:function(f){var v;f.data[0]===ot.Utf8&&(v=Ye(f.data,0,1),v!==-1&&(f.description=Dt(f.data,1,v),f.value=Dt(f.data,v+1,f.data.length).replace(/\0*$/,""),f.data=f.value))},"W*":function(f){f.url=mr(f.data,0,f.data.length).replace(/\0.*$/,"")},WXXX:function(f){var v;f.data[0]===ot.Utf8&&(v=Ye(f.data,0,1),v!==-1&&(f.description=Dt(f.data,1,v),f.url=mr(f.data,v+1,f.data.length).replace(/\0.*$/,"")))},PRIV:function(f){var v;for(v=0;v<f.data.length;v++)if(f.data[v]===0){f.owner=mr(f.data,0,v);break}f.privateData=f.data.subarray(v+1),f.data=f.privateData}},yr=function(f){var v,b,x=10,C=0,I=[];if(!(f.length<10||f[0]!==73||f[1]!==68||f[2]!==51)){C=Mr(f.subarray(6,10)),C+=10;var W=f[5]&64;W&&(x+=4,x+=Mr(f.subarray(10,14)),C-=Mr(f.subarray(16,20)));do{if(v=Mr(f.subarray(x+4,x+8)),v<1)break;b=String.fromCharCode(f[x],f[x+1],f[x+2],f[x+3]);var Y={id:b,data:f.subarray(x+10,x+v+10)};Y.key=Y.id,ci[Y.id]?ci[Y.id](Y):Y.id[0]==="T"?ci["T*"](Y):Y.id[0]==="W"&&ci["W*"](Y),I.push(Y),x+=10,x+=v}while(x<C);return I}},on={parseId3Frames:yr,parseSyncSafeInteger:Mr,frameParsers:ci},Rr=t,Ci=ui,Pi=on,ys;ys=function(f){var v={descriptor:f&&f.descriptor},b=0,x=[],C=0,I;if(ys.prototype.init.call(this),this.dispatchType=Ci.METADATA_STREAM_TYPE.toString(16),v.descriptor)for(I=0;I<v.descriptor.length;I++)this.dispatchType+=("00"+v.descriptor[I].toString(16)).slice(-2);this.push=function(W){var Y,Q,ee,le,ge,He;if(W.type==="timed-metadata"){if(W.dataAlignmentIndicator&&(C=0,x.length=0),x.length===0&&(W.data.length<10||W.data[0]!==73||W.data[1]!==68||W.data[2]!==51)){this.trigger("log",{level:"warn",message:"Skipping unrecognized metadata packet"});return}if(x.push(W),C+=W.data.byteLength,x.length===1&&(b=Pi.parseSyncSafeInteger(W.data.subarray(6,10)),b+=10),!(C<b)){for(Y={data:new Uint8Array(b),frames:[],pts:x[0].pts,dts:x[0].dts},ge=0;ge<b;)Y.data.set(x[0].data.subarray(0,b-ge),ge),ge+=x[0].data.byteLength,C-=x[0].data.byteLength,x.shift();Q=10,Y.data[5]&64&&(Q+=4,Q+=Pi.parseSyncSafeInteger(Y.data.subarray(10,14)),b-=Pi.parseSyncSafeInteger(Y.data.subarray(16,20)));do{if(ee=Pi.parseSyncSafeInteger(Y.data.subarray(Q+4,Q+8)),ee<1){this.trigger("log",{level:"warn",message:"Malformed ID3 frame encountered. Skipping remaining metadata parsing."});break}if(He=String.fromCharCode(Y.data[Q],Y.data[Q+1],Y.data[Q+2],Y.data[Q+3]),le={id:He,data:Y.data.subarray(Q+10,Q+ee+10)},le.key=le.id,Pi.frameParsers[le.id]?Pi.frameParsers[le.id](le):le.id[0]==="T"?Pi.frameParsers["T*"](le):le.id[0]==="W"&&Pi.frameParsers["W*"](le),le.owner==="com.apple.streaming.transportStreamTimestamp"){var Ee=le.data,gt=(Ee[3]&1)<<30|Ee[4]<<22|Ee[5]<<14|Ee[6]<<6|Ee[7]>>>2;gt*=4,gt+=Ee[7]&3,le.timeStamp=gt,Y.pts===void 0&&Y.dts===void 0&&(Y.pts=le.timeStamp,Y.dts=le.timeStamp),this.trigger("timestamp",le)}Y.frames.push(le),Q+=10,Q+=ee}while(Q<b);this.trigger("data",Y)}}}},ys.prototype=new Rr;var pc=ys,_s=t,Mn=vn,bi=ui,Tu=we.TimestampRolloverStream,Fr,es,na,En=188,Oa=71;Fr=function(){var f=new Uint8Array(En),v=0;Fr.prototype.init.call(this),this.push=function(b){var x=0,C=En,I;for(v?(I=new Uint8Array(b.byteLength+v),I.set(f.subarray(0,v)),I.set(b,v),v=0):I=b;C<I.byteLength;){if(I[x]===Oa&&I[C]===Oa){this.trigger("data",I.subarray(x,C)),x+=En,C+=En;continue}x++,C++}x<I.byteLength&&(f.set(I.subarray(x),0),v=I.byteLength-x)},this.flush=function(){v===En&&f[0]===Oa&&(this.trigger("data",f),v=0),this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")},this.reset=function(){v=0,this.trigger("reset")}},Fr.prototype=new _s,es=function(){var f,v,b,x;es.prototype.init.call(this),x=this,this.packetsWaitingForPmt=[],this.programMapTable=void 0,f=function(C,I){var W=0;I.payloadUnitStartIndicator&&(W+=C[W]+1),I.type==="pat"?v(C.subarray(W),I):b(C.subarray(W),I)},v=function(C,I){I.section_number=C[7],I.last_section_number=C[8],x.pmtPid=(C[10]&31)<<8|C[11],I.pmtPid=x.pmtPid},b=function(C,I){var W,Y,Q,ee;if(C[5]&1){for(x.programMapTable={video:null,audio:null,"timed-metadata":{}},W=(C[1]&15)<<8|C[2],Y=3+W-4,Q=(C[10]&15)<<8|C[11],ee=12+Q;ee<Y;){var le=C[ee],ge=(C[ee+1]&31)<<8|C[ee+2];le===bi.H264_STREAM_TYPE&&x.programMapTable.video===null?x.programMapTable.video=ge:le===bi.ADTS_STREAM_TYPE&&x.programMapTable.audio===null?x.programMapTable.audio=ge:le===bi.METADATA_STREAM_TYPE&&(x.programMapTable["timed-metadata"][ge]=le),ee+=((C[ee+3]&15)<<8|C[ee+4])+5}I.programMapTable=x.programMapTable}},this.push=function(C){var I={},W=4;if(I.payloadUnitStartIndicator=!!(C[1]&64),I.pid=C[1]&31,I.pid<<=8,I.pid|=C[2],(C[3]&48)>>>4>1&&(W+=C[W]+1),I.pid===0)I.type="pat",f(C.subarray(W),I),this.trigger("data",I);else if(I.pid===this.pmtPid)for(I.type="pmt",f(C.subarray(W),I),this.trigger("data",I);this.packetsWaitingForPmt.length;)this.processPes_.apply(this,this.packetsWaitingForPmt.shift());else this.programMapTable===void 0?this.packetsWaitingForPmt.push([C,W,I]):this.processPes_(C,W,I)},this.processPes_=function(C,I,W){W.pid===this.programMapTable.video?W.streamType=bi.H264_STREAM_TYPE:W.pid===this.programMapTable.audio?W.streamType=bi.ADTS_STREAM_TYPE:W.streamType=this.programMapTable["timed-metadata"][W.pid],W.type="pes",W.data=C.subarray(I),this.trigger("data",W)}},es.prototype=new _s,es.STREAM_TYPES={h264:27,adts:15},na=function(){var f=this,v=!1,b={data:[],size:0},x={data:[],size:0},C={data:[],size:0},I,W=function(Q,ee){var le;const ge=Q[0]<<16|Q[1]<<8|Q[2];ee.data=new Uint8Array,ge===1&&(ee.packetLength=6+(Q[4]<<8|Q[5]),ee.dataAlignmentIndicator=(Q[6]&4)!==0,le=Q[7],le&192&&(ee.pts=(Q[9]&14)<<27|(Q[10]&255)<<20|(Q[11]&254)<<12|(Q[12]&255)<<5|(Q[13]&254)>>>3,ee.pts*=4,ee.pts+=(Q[13]&6)>>>1,ee.dts=ee.pts,le&64&&(ee.dts=(Q[14]&14)<<27|(Q[15]&255)<<20|(Q[16]&254)<<12|(Q[17]&255)<<5|(Q[18]&254)>>>3,ee.dts*=4,ee.dts+=(Q[18]&6)>>>1)),ee.data=Q.subarray(9+Q[8]))},Y=function(Q,ee,le){var ge=new Uint8Array(Q.size),He={type:ee},Ee=0,gt=0,Bt=!1,Br;if(!(!Q.data.length||Q.size<9)){for(He.trackId=Q.data[0].pid,Ee=0;Ee<Q.data.length;Ee++)Br=Q.data[Ee],ge.set(Br.data,gt),gt+=Br.data.byteLength;W(ge,He),Bt=ee==="video"||He.packetLength<=Q.size,(le||Bt)&&(Q.size=0,Q.data.length=0),Bt&&f.trigger("data",He)}};na.prototype.init.call(this),this.push=function(Q){({pat:function(){},pes:function(){var ee,le;switch(Q.streamType){case bi.H264_STREAM_TYPE:ee=b,le="video";break;case bi.ADTS_STREAM_TYPE:ee=x,le="audio";break;case bi.METADATA_STREAM_TYPE:ee=C,le="timed-metadata";break;default:return}Q.payloadUnitStartIndicator&&Y(ee,le,!0),ee.data.push(Q),ee.size+=Q.data.byteLength},pmt:function(){var ee={type:"metadata",tracks:[]};I=Q.programMapTable,I.video!==null&&ee.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+I.video,codec:"avc",type:"video"}),I.audio!==null&&ee.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+I.audio,codec:"adts",type:"audio"}),v=!0,f.trigger("data",ee)}})[Q.type]()},this.reset=function(){b.size=0,b.data.length=0,x.size=0,x.data.length=0,this.trigger("reset")},this.flushStreams_=function(){Y(b,"video"),Y(x,"audio"),Y(C,"timed-metadata")},this.flush=function(){if(!v&&I){var Q={type:"metadata",tracks:[]};I.video!==null&&Q.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+I.video,codec:"avc",type:"video"}),I.audio!==null&&Q.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+I.audio,codec:"adts",type:"audio"}),f.trigger("data",Q)}v=!1,this.flushStreams_(),this.trigger("done")}},na.prototype=new _s;var Tl={PAT_PID:0,MP2T_PACKET_LENGTH:En,TransportPacketStream:Fr,TransportParseStream:es,ElementaryStream:na,TimestampRolloverStream:Tu,CaptionStream:Mn.CaptionStream,Cea608Stream:Mn.Cea608Stream,Cea708Stream:Mn.Cea708Stream,MetadataStream:pc};for(var lo in bi)bi.hasOwnProperty(lo)&&(Tl[lo]=bi[lo]);var bu=Tl,bl=t,sa=$t.ONE_SECOND_IN_TS,yn,wn=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];yn=function(f){var v,b=0;yn.prototype.init.call(this),this.skipWarn_=function(x,C){this.trigger("log",{level:"warn",message:`adts skiping bytes ${x} to ${C} in frame ${b} outside syncword`})},this.push=function(x){var C=0,I,W,Y,Q,ee;if(f||(b=0),x.type==="audio"){v&&v.length?(Y=v,v=new Uint8Array(Y.byteLength+x.data.byteLength),v.set(Y),v.set(x.data,Y.byteLength)):v=x.data;for(var le;C+7<v.length;){if(v[C]!==255||(v[C+1]&246)!==240){typeof le!="number"&&(le=C),C++;continue}if(typeof le=="number"&&(this.skipWarn_(le,C),le=null),W=(~v[C+1]&1)*2,I=(v[C+3]&3)<<11|v[C+4]<<3|(v[C+5]&224)>>5,Q=((v[C+6]&3)+1)*1024,ee=Q*sa/wn[(v[C+2]&60)>>>2],v.byteLength-C<I)break;this.trigger("data",{pts:x.pts+b*ee,dts:x.dts+b*ee,sampleCount:Q,audioobjecttype:(v[C+2]>>>6&3)+1,channelcount:(v[C+2]&1)<<2|(v[C+3]&192)>>>6,samplerate:wn[(v[C+2]&60)>>>2],samplingfrequencyindex:(v[C+2]&60)>>>2,samplesize:16,data:v.subarray(C+7+W,C+I)}),b++,C+=I}typeof le=="number"&&(this.skipWarn_(le,C),le=null),v=v.subarray(C)}},this.flush=function(){b=0,this.trigger("done")},this.reset=function(){v=void 0,this.trigger("reset")},this.endTimeline=function(){v=void 0,this.trigger("endedtimeline")}},yn.prototype=new bl;var aa=yn,Ma;Ma=function(f){var v=f.byteLength,b=0,x=0;this.length=function(){return 8*v},this.bitsAvailable=function(){return 8*v+x},this.loadWord=function(){var C=f.byteLength-v,I=new Uint8Array(4),W=Math.min(4,v);if(W===0)throw new Error("no bytes available");I.set(f.subarray(C,C+W)),b=new DataView(I.buffer).getUint32(0),x=W*8,v-=W},this.skipBits=function(C){var I;x>C?(b<<=C,x-=C):(C-=x,I=Math.floor(C/8),C-=I*8,v-=I,this.loadWord(),b<<=C,x-=C)},this.readBits=function(C){var I=Math.min(x,C),W=b>>>32-I;return x-=I,x>0?b<<=I:v>0&&this.loadWord(),I=C-I,I>0?W<<I|this.readBits(I):W},this.skipLeadingZeros=function(){var C;for(C=0;C<x;++C)if((b&2147483648>>>C)!==0)return b<<=C,x-=C,C;return this.loadWord(),C+this.skipLeadingZeros()},this.skipUnsignedExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.skipExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.readUnsignedExpGolomb=function(){var C=this.skipLeadingZeros();return this.readBits(C+1)-1},this.readExpGolomb=function(){var C=this.readUnsignedExpGolomb();return 1&C?1+C>>>1:-1*(C>>>1)},this.readBoolean=function(){return this.readBits(1)===1},this.readUnsignedByte=function(){return this.readBits(8)},this.loadWord()};var oa=Ma,Sl=t,mc=oa,Fn,Fa,Cl;Fa=function(){var f=0,v,b;Fa.prototype.init.call(this),this.push=function(x){var C;b?(C=new Uint8Array(b.byteLength+x.data.byteLength),C.set(b),C.set(x.data,b.byteLength),b=C):b=x.data;for(var I=b.byteLength;f<I-3;f++)if(b[f+2]===1){v=f+5;break}for(;v<I;)switch(b[v]){case 0:if(b[v-1]!==0){v+=2;break}else if(b[v-2]!==0){v++;break}f+3!==v-2&&this.trigger("data",b.subarray(f+3,v-2));do v++;while(b[v]!==1&&v<I);f=v-2,v+=3;break;case 1:if(b[v-1]!==0||b[v-2]!==0){v+=3;break}this.trigger("data",b.subarray(f+3,v-2)),f=v-2,v+=3;break;default:v+=3;break}b=b.subarray(f),v-=f,f=0},this.reset=function(){b=null,f=0,this.trigger("reset")},this.flush=function(){b&&b.byteLength>3&&this.trigger("data",b.subarray(f+3)),b=null,f=0,this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")}},Fa.prototype=new Sl,Cl={100:!0,110:!0,122:!0,244:!0,44:!0,83:!0,86:!0,118:!0,128:!0,138:!0,139:!0,134:!0},Fn=function(){var f=new Fa,v,b,x,C,I,W,Y;Fn.prototype.init.call(this),v=this,this.push=function(Q){Q.type==="video"&&(b=Q.trackId,x=Q.pts,C=Q.dts,f.push(Q))},f.on("data",function(Q){var ee={trackId:b,pts:x,dts:C,data:Q,nalUnitTypeCode:Q[0]&31};switch(ee.nalUnitTypeCode){case 5:ee.nalUnitType="slice_layer_without_partitioning_rbsp_idr";break;case 6:ee.nalUnitType="sei_rbsp",ee.escapedRBSP=I(Q.subarray(1));break;case 7:ee.nalUnitType="seq_parameter_set_rbsp",ee.escapedRBSP=I(Q.subarray(1)),ee.config=W(ee.escapedRBSP);break;case 8:ee.nalUnitType="pic_parameter_set_rbsp";break;case 9:ee.nalUnitType="access_unit_delimiter_rbsp";break}v.trigger("data",ee)}),f.on("done",function(){v.trigger("done")}),f.on("partialdone",function(){v.trigger("partialdone")}),f.on("reset",function(){v.trigger("reset")}),f.on("endedtimeline",function(){v.trigger("endedtimeline")}),this.flush=function(){f.flush()},this.partialFlush=function(){f.partialFlush()},this.reset=function(){f.reset()},this.endTimeline=function(){f.endTimeline()},Y=function(Q,ee){var le=8,ge=8,He,Ee;for(He=0;He<Q;He++)ge!==0&&(Ee=ee.readExpGolomb(),ge=(le+Ee+256)%256),le=ge===0?le:ge},I=function(Q){for(var ee=Q.byteLength,le=[],ge=1,He,Ee;ge<ee-2;)Q[ge]===0&&Q[ge+1]===0&&Q[ge+2]===3?(le.push(ge+2),ge+=2):ge++;if(le.length===0)return Q;He=ee-le.length,Ee=new Uint8Array(He);var gt=0;for(ge=0;ge<He;gt++,ge++)gt===le[0]&&(gt++,le.shift()),Ee[ge]=Q[gt];return Ee},W=function(Q){var ee=0,le=0,ge=0,He=0,Ee,gt,Bt,Br,si,cn,yo,Fl,Ou,ha,fa,Wt=[1,1],oi,$i;if(Ee=new mc(Q),gt=Ee.readUnsignedByte(),Br=Ee.readUnsignedByte(),Bt=Ee.readUnsignedByte(),Ee.skipUnsignedExpGolomb(),Cl[gt]&&(si=Ee.readUnsignedExpGolomb(),si===3&&Ee.skipBits(1),Ee.skipUnsignedExpGolomb(),Ee.skipUnsignedExpGolomb(),Ee.skipBits(1),Ee.readBoolean()))for(fa=si!==3?8:12,$i=0;$i<fa;$i++)Ee.readBoolean()&&($i<6?Y(16,Ee):Y(64,Ee));if(Ee.skipUnsignedExpGolomb(),cn=Ee.readUnsignedExpGolomb(),cn===0)Ee.readUnsignedExpGolomb();else if(cn===1)for(Ee.skipBits(1),Ee.skipExpGolomb(),Ee.skipExpGolomb(),yo=Ee.readUnsignedExpGolomb(),$i=0;$i<yo;$i++)Ee.skipExpGolomb();if(Ee.skipUnsignedExpGolomb(),Ee.skipBits(1),Fl=Ee.readUnsignedExpGolomb(),Ou=Ee.readUnsignedExpGolomb(),ha=Ee.readBits(1),ha===0&&Ee.skipBits(1),Ee.skipBits(1),Ee.readBoolean()&&(ee=Ee.readUnsignedExpGolomb(),le=Ee.readUnsignedExpGolomb(),ge=Ee.readUnsignedExpGolomb(),He=Ee.readUnsignedExpGolomb()),Ee.readBoolean()&&Ee.readBoolean()){switch(oi=Ee.readUnsignedByte(),oi){case 1:Wt=[1,1];break;case 2:Wt=[12,11];break;case 3:Wt=[10,11];break;case 4:Wt=[16,11];break;case 5:Wt=[40,33];break;case 6:Wt=[24,11];break;case 7:Wt=[20,11];break;case 8:Wt=[32,11];break;case 9:Wt=[80,33];break;case 10:Wt=[18,11];break;case 11:Wt=[15,11];break;case 12:Wt=[64,33];break;case 13:Wt=[160,99];break;case 14:Wt=[4,3];break;case 15:Wt=[3,2];break;case 16:Wt=[2,1];break;case 255:{Wt=[Ee.readUnsignedByte()<<8|Ee.readUnsignedByte(),Ee.readUnsignedByte()<<8|Ee.readUnsignedByte()];break}}Wt&&Wt[0]/Wt[1]}return{profileIdc:gt,levelIdc:Bt,profileCompatibility:Br,width:(Fl+1)*16-ee*2-le*2,height:(2-ha)*(Ou+1)*16-ge*2-He*2,sarRatio:Wt}}},Fn.prototype=new Sl;var El={H264Stream:Fn},jo=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],Ba=function(f,v){var b=f[v+6]<<21|f[v+7]<<14|f[v+8]<<7|f[v+9],x=f[v+5],C=(x&16)>>4;return b=b>=0?b:0,C?b+20:b+10},xs=function(f,v){return f.length-v<10||f[v]!==73||f[v+1]!==68||f[v+2]!==51?v:(v+=Ba(f,v),xs(f,v))},ts=function(f){var v=xs(f,0);return f.length>=v+2&&(f[v]&255)===255&&(f[v+1]&240)===240&&(f[v+1]&22)===16},la=function(f){return f[0]<<21|f[1]<<14|f[2]<<7|f[3]},zo=function(f,v,b){var x,C="";for(x=v;x<b;x++)C+="%"+("00"+f[x].toString(16)).slice(-2);return C},gc=function(f,v,b){return unescape(zo(f,v,b))},vc=function(f,v){var b=(f[v+5]&224)>>5,x=f[v+4]<<3,C=f[v+3]&6144;return C|x|b},Su=function(f,v){return f[v]===73&&f[v+1]===68&&f[v+2]===51?"timed-metadata":f[v]&!0&&(f[v+1]&240)===240?"audio":null},wl=function(f){for(var v=0;v+5<f.length;){if(f[v]!==255||(f[v+1]&246)!==240){v++;continue}return jo[(f[v+2]&60)>>>2]}return null},Cu=function(f){var v,b,x,C;v=10,f[5]&64&&(v+=4,v+=la(f.subarray(10,14)));do{if(b=la(f.subarray(v+4,v+8)),b<1)return null;if(C=String.fromCharCode(f[v],f[v+1],f[v+2],f[v+3]),C==="PRIV"){x=f.subarray(v+10,v+b+10);for(var I=0;I<x.byteLength;I++)if(x[I]===0){var W=gc(x,0,I);if(W==="com.apple.streaming.transportStreamTimestamp"){var Y=x.subarray(I+1),Q=(Y[3]&1)<<30|Y[4]<<22|Y[5]<<14|Y[6]<<6|Y[7]>>>2;return Q*=4,Q+=Y[7]&3,Q}break}}v+=10,v+=b}while(v<f.byteLength);return null},Fs={isLikelyAacData:ts,parseId3TagSize:Ba,parseAdtsSize:vc,parseType:Su,parseSampleRate:wl,parseAacTimestamp:Cu},ua=t,rs=Fs,Ts;Ts=function(){var f=new Uint8Array,v=0;Ts.prototype.init.call(this),this.setTimestamp=function(b){v=b},this.push=function(b){var x=0,C=0,I,W,Y,Q;for(f.length?(Q=f.length,f=new Uint8Array(b.byteLength+Q),f.set(f.subarray(0,Q)),f.set(b,Q)):f=b;f.length-C>=3;){if(f[C]===73&&f[C+1]===68&&f[C+2]===51){if(f.length-C<10||(x=rs.parseId3TagSize(f,C),C+x>f.length))break;W={type:"timed-metadata",data:f.subarray(C,C+x)},this.trigger("data",W),C+=x;continue}else if((f[C]&255)===255&&(f[C+1]&240)===240){if(f.length-C<7||(x=rs.parseAdtsSize(f,C),C+x>f.length))break;Y={type:"audio",data:f.subarray(C,C+x),pts:v,dts:v},this.trigger("data",Y),C+=x;continue}C++}I=f.length-C,I>0?f=f.subarray(C):f=new Uint8Array},this.reset=function(){f=new Uint8Array,this.trigger("reset")},this.endTimeline=function(){f=new Uint8Array,this.trigger("endedtimeline")}},Ts.prototype=new ua;var yc=Ts,ti=["audioobjecttype","channelcount","samplerate","samplingfrequencyindex","samplesize"],kl=ti,_c=["width","height","profileIdc","levelIdc","profileCompatibility","sarRatio"],kn=_c,An=t,is=vt,_n=rt,Na=Ui,gi=ze,Li=bu,Bn=$t,Ua=aa,uo=El.H264Stream,Ho=yc,xd=Fs.isLikelyAacData,Td=$t.ONE_SECOND_IN_TS,Vo=kl,Eu=kn,$a,Bs,ja,In,xc=function(f,v){v.stream=f,this.trigger("log",v)},co=function(f,v){for(var b=Object.keys(v),x=0;x<b.length;x++){var C=b[x];C==="headOfPipeline"||!v[C].on||v[C].on("log",xc.bind(f,C))}},za=function(f,v){var b;if(f.length!==v.length)return!1;for(b=0;b<f.length;b++)if(f[b]!==v[b])return!1;return!0},wu=function(f,v,b,x,C,I){var W=b-v,Y=x-v,Q=C-b;return{start:{dts:f,pts:f+W},end:{dts:f+Y,pts:f+Q},prependedContentDuration:I,baseMediaDecodeTime:f}};Bs=function(f,v){var b=[],x,C=0,I=0,W=1/0;v=v||{},x=v.firstSequenceNumber||0,Bs.prototype.init.call(this),this.push=function(Y){gi.collectDtsInfo(f,Y),f&&Vo.forEach(function(Q){f[Q]=Y[Q]}),b.push(Y)},this.setEarliestDts=function(Y){C=Y},this.setVideoBaseMediaDecodeTime=function(Y){W=Y},this.setAudioAppendStart=function(Y){I=Y},this.flush=function(){var Y,Q,ee,le,ge,He,Ee;if(b.length===0){this.trigger("done","AudioSegmentStream");return}Y=Na.trimAdtsFramesByEarliestDts(b,f,C),f.baseMediaDecodeTime=gi.calculateTrackBaseMediaDecodeTime(f,v.keepOriginalTimestamps),Ee=Na.prefixWithSilence(f,Y,I,W),f.samples=Na.generateSampleTable(Y),ee=is.mdat(Na.concatenateFrameData(Y)),b=[],Q=is.moof(x,[f]),le=new Uint8Array(Q.byteLength+ee.byteLength),x++,le.set(Q),le.set(ee,Q.byteLength),gi.clearDtsInfo(f),ge=Math.ceil(Td*1024/f.samplerate),Y.length&&(He=Y.length*ge,this.trigger("segmentTimingInfo",wu(Bn.audioTsToVideoTs(f.baseMediaDecodeTime,f.samplerate),Y[0].dts,Y[0].pts,Y[0].dts+He,Y[0].pts+He,Ee||0)),this.trigger("timingInfo",{start:Y[0].pts,end:Y[0].pts+He})),this.trigger("data",{track:f,boxes:le}),this.trigger("done","AudioSegmentStream")},this.reset=function(){gi.clearDtsInfo(f),b=[],this.trigger("reset")}},Bs.prototype=new An,$a=function(f,v){var b,x=[],C=[],I,W;v=v||{},b=v.firstSequenceNumber||0,$a.prototype.init.call(this),delete f.minPTS,this.gopCache_=[],this.push=function(Y){gi.collectDtsInfo(f,Y),Y.nalUnitType==="seq_parameter_set_rbsp"&&!I&&(I=Y.config,f.sps=[Y.data],Eu.forEach(function(Q){f[Q]=I[Q]},this)),Y.nalUnitType==="pic_parameter_set_rbsp"&&!W&&(W=Y.data,f.pps=[Y.data]),x.push(Y)},this.flush=function(){for(var Y,Q,ee,le,ge,He,Ee=0,gt,Bt;x.length&&x[0].nalUnitType!=="access_unit_delimiter_rbsp";)x.shift();if(x.length===0){this.resetStream_(),this.trigger("done","VideoSegmentStream");return}if(Y=_n.groupNalsIntoFrames(x),ee=_n.groupFramesIntoGops(Y),ee[0][0].keyFrame||(Q=this.getGopForFusion_(x[0],f),Q?(Ee=Q.duration,ee.unshift(Q),ee.byteLength+=Q.byteLength,ee.nalCount+=Q.nalCount,ee.pts=Q.pts,ee.dts=Q.dts,ee.duration+=Q.duration):ee=_n.extendFirstKeyFrame(ee)),C.length){var Br;if(v.alignGopsAtEnd?Br=this.alignGopsAtEnd_(ee):Br=this.alignGopsAtStart_(ee),!Br){this.gopCache_.unshift({gop:ee.pop(),pps:f.pps,sps:f.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),x=[],this.resetStream_(),this.trigger("done","VideoSegmentStream");return}gi.clearDtsInfo(f),ee=Br}gi.collectDtsInfo(f,ee),f.samples=_n.generateSampleTable(ee),ge=is.mdat(_n.concatenateNalData(ee)),f.baseMediaDecodeTime=gi.calculateTrackBaseMediaDecodeTime(f,v.keepOriginalTimestamps),this.trigger("processedGopsInfo",ee.map(function(si){return{pts:si.pts,dts:si.dts,byteLength:si.byteLength}})),gt=ee[0],Bt=ee[ee.length-1],this.trigger("segmentTimingInfo",wu(f.baseMediaDecodeTime,gt.dts,gt.pts,Bt.dts+Bt.duration,Bt.pts+Bt.duration,Ee)),this.trigger("timingInfo",{start:ee[0].pts,end:ee[ee.length-1].pts+ee[ee.length-1].duration}),this.gopCache_.unshift({gop:ee.pop(),pps:f.pps,sps:f.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),x=[],this.trigger("baseMediaDecodeTime",f.baseMediaDecodeTime),this.trigger("timelineStartInfo",f.timelineStartInfo),le=is.moof(b,[f]),He=new Uint8Array(le.byteLength+ge.byteLength),b++,He.set(le),He.set(ge,le.byteLength),this.trigger("data",{track:f,boxes:He}),this.resetStream_(),this.trigger("done","VideoSegmentStream")},this.reset=function(){this.resetStream_(),x=[],this.gopCache_.length=0,C.length=0,this.trigger("reset")},this.resetStream_=function(){gi.clearDtsInfo(f),I=void 0,W=void 0},this.getGopForFusion_=function(Y){var Q=45e3,ee=1/0,le,ge,He,Ee,gt;for(gt=0;gt<this.gopCache_.length;gt++)Ee=this.gopCache_[gt],He=Ee.gop,!(!(f.pps&&za(f.pps[0],Ee.pps[0]))||!(f.sps&&za(f.sps[0],Ee.sps[0])))&&(He.dts<f.timelineStartInfo.dts||(le=Y.dts-He.dts-He.duration,le>=-1e4&&le<=Q&&(!ge||ee>le)&&(ge=Ee,ee=le)));return ge?ge.gop:null},this.alignGopsAtStart_=function(Y){var Q,ee,le,ge,He,Ee,gt,Bt;for(He=Y.byteLength,Ee=Y.nalCount,gt=Y.duration,Q=ee=0;Q<C.length&&ee<Y.length&&(le=C[Q],ge=Y[ee],le.pts!==ge.pts);){if(ge.pts>le.pts){Q++;continue}ee++,He-=ge.byteLength,Ee-=ge.nalCount,gt-=ge.duration}return ee===0?Y:ee===Y.length?null:(Bt=Y.slice(ee),Bt.byteLength=He,Bt.duration=gt,Bt.nalCount=Ee,Bt.pts=Bt[0].pts,Bt.dts=Bt[0].dts,Bt)},this.alignGopsAtEnd_=function(Y){var Q,ee,le,ge,He,Ee;for(Q=C.length-1,ee=Y.length-1,He=null,Ee=!1;Q>=0&&ee>=0;){if(le=C[Q],ge=Y[ee],le.pts===ge.pts){Ee=!0;break}if(le.pts>ge.pts){Q--;continue}Q===C.length-1&&(He=ee),ee--}if(!Ee&&He===null)return null;var gt;if(Ee?gt=ee:gt=He,gt===0)return Y;var Bt=Y.slice(gt),Br=Bt.reduce(function(si,cn){return si.byteLength+=cn.byteLength,si.duration+=cn.duration,si.nalCount+=cn.nalCount,si},{byteLength:0,duration:0,nalCount:0});return Bt.byteLength=Br.byteLength,Bt.duration=Br.duration,Bt.nalCount=Br.nalCount,Bt.pts=Bt[0].pts,Bt.dts=Bt[0].dts,Bt},this.alignGopsWith=function(Y){C=Y}},$a.prototype=new An,In=function(f,v){this.numberOfTracks=0,this.metadataStream=v,f=f||{},typeof f.remux<"u"?this.remuxTracks=!!f.remux:this.remuxTracks=!0,typeof f.keepOriginalTimestamps=="boolean"?this.keepOriginalTimestamps=f.keepOriginalTimestamps:this.keepOriginalTimestamps=!1,this.pendingTracks=[],this.videoTrack=null,this.pendingBoxes=[],this.pendingCaptions=[],this.pendingMetadata=[],this.pendingBytes=0,this.emittedTracks=0,In.prototype.init.call(this),this.push=function(b){if(b.content||b.text)return this.pendingCaptions.push(b);if(b.frames)return this.pendingMetadata.push(b);this.pendingTracks.push(b.track),this.pendingBytes+=b.boxes.byteLength,b.track.type==="video"&&(this.videoTrack=b.track,this.pendingBoxes.push(b.boxes)),b.track.type==="audio"&&(this.audioTrack=b.track,this.pendingBoxes.unshift(b.boxes))}},In.prototype=new An,In.prototype.flush=function(f){var v=0,b={captions:[],captionStreams:{},metadata:[],info:{}},x,C,I,W=0,Y;if(this.pendingTracks.length<this.numberOfTracks){if(f!=="VideoSegmentStream"&&f!=="AudioSegmentStream")return;if(this.remuxTracks)return;if(this.pendingTracks.length===0){this.emittedTracks++,this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0);return}}if(this.videoTrack?(W=this.videoTrack.timelineStartInfo.pts,Eu.forEach(function(Q){b.info[Q]=this.videoTrack[Q]},this)):this.audioTrack&&(W=this.audioTrack.timelineStartInfo.pts,Vo.forEach(function(Q){b.info[Q]=this.audioTrack[Q]},this)),this.videoTrack||this.audioTrack){for(this.pendingTracks.length===1?b.type=this.pendingTracks[0].type:b.type="combined",this.emittedTracks+=this.pendingTracks.length,I=is.initSegment(this.pendingTracks),b.initSegment=new Uint8Array(I.byteLength),b.initSegment.set(I),b.data=new Uint8Array(this.pendingBytes),Y=0;Y<this.pendingBoxes.length;Y++)b.data.set(this.pendingBoxes[Y],v),v+=this.pendingBoxes[Y].byteLength;for(Y=0;Y<this.pendingCaptions.length;Y++)x=this.pendingCaptions[Y],x.startTime=Bn.metadataTsToSeconds(x.startPts,W,this.keepOriginalTimestamps),x.endTime=Bn.metadataTsToSeconds(x.endPts,W,this.keepOriginalTimestamps),b.captionStreams[x.stream]=!0,b.captions.push(x);for(Y=0;Y<this.pendingMetadata.length;Y++)C=this.pendingMetadata[Y],C.cueTime=Bn.metadataTsToSeconds(C.pts,W,this.keepOriginalTimestamps),b.metadata.push(C);for(b.metadata.dispatchType=this.metadataStream.dispatchType,this.pendingTracks.length=0,this.videoTrack=null,this.pendingBoxes.length=0,this.pendingCaptions.length=0,this.pendingBytes=0,this.pendingMetadata.length=0,this.trigger("data",b),Y=0;Y<b.captions.length;Y++)x=b.captions[Y],this.trigger("caption",x);for(Y=0;Y<b.metadata.length;Y++)C=b.metadata[Y],this.trigger("id3Frame",C)}this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0)},In.prototype.setRemux=function(f){this.remuxTracks=f},ja=function(f){var v=this,b=!0,x,C;ja.prototype.init.call(this),f=f||{},this.baseMediaDecodeTime=f.baseMediaDecodeTime||0,this.transmuxPipeline_={},this.setupAacPipeline=function(){var I={};this.transmuxPipeline_=I,I.type="aac",I.metadataStream=new Li.MetadataStream,I.aacStream=new Ho,I.audioTimestampRolloverStream=new Li.TimestampRolloverStream("audio"),I.timedMetadataTimestampRolloverStream=new Li.TimestampRolloverStream("timed-metadata"),I.adtsStream=new Ua,I.coalesceStream=new In(f,I.metadataStream),I.headOfPipeline=I.aacStream,I.aacStream.pipe(I.audioTimestampRolloverStream).pipe(I.adtsStream),I.aacStream.pipe(I.timedMetadataTimestampRolloverStream).pipe(I.metadataStream).pipe(I.coalesceStream),I.metadataStream.on("timestamp",function(W){I.aacStream.setTimestamp(W.timeStamp)}),I.aacStream.on("data",function(W){W.type!=="timed-metadata"&&W.type!=="audio"||I.audioSegmentStream||(C=C||{timelineStartInfo:{baseMediaDecodeTime:v.baseMediaDecodeTime},codec:"adts",type:"audio"},I.coalesceStream.numberOfTracks++,I.audioSegmentStream=new Bs(C,f),I.audioSegmentStream.on("log",v.getLogTrigger_("audioSegmentStream")),I.audioSegmentStream.on("timingInfo",v.trigger.bind(v,"audioTimingInfo")),I.adtsStream.pipe(I.audioSegmentStream).pipe(I.coalesceStream),v.trigger("trackinfo",{hasAudio:!!C,hasVideo:!!x}))}),I.coalesceStream.on("data",this.trigger.bind(this,"data")),I.coalesceStream.on("done",this.trigger.bind(this,"done")),co(this,I)},this.setupTsPipeline=function(){var I={};this.transmuxPipeline_=I,I.type="ts",I.metadataStream=new Li.MetadataStream,I.packetStream=new Li.TransportPacketStream,I.parseStream=new Li.TransportParseStream,I.elementaryStream=new Li.ElementaryStream,I.timestampRolloverStream=new Li.TimestampRolloverStream,I.adtsStream=new Ua,I.h264Stream=new uo,I.captionStream=new Li.CaptionStream(f),I.coalesceStream=new In(f,I.metadataStream),I.headOfPipeline=I.packetStream,I.packetStream.pipe(I.parseStream).pipe(I.elementaryStream).pipe(I.timestampRolloverStream),I.timestampRolloverStream.pipe(I.h264Stream),I.timestampRolloverStream.pipe(I.adtsStream),I.timestampRolloverStream.pipe(I.metadataStream).pipe(I.coalesceStream),I.h264Stream.pipe(I.captionStream).pipe(I.coalesceStream),I.elementaryStream.on("data",function(W){var Y;if(W.type==="metadata"){for(Y=W.tracks.length;Y--;)!x&&W.tracks[Y].type==="video"?(x=W.tracks[Y],x.timelineStartInfo.baseMediaDecodeTime=v.baseMediaDecodeTime):!C&&W.tracks[Y].type==="audio"&&(C=W.tracks[Y],C.timelineStartInfo.baseMediaDecodeTime=v.baseMediaDecodeTime);x&&!I.videoSegmentStream&&(I.coalesceStream.numberOfTracks++,I.videoSegmentStream=new $a(x,f),I.videoSegmentStream.on("log",v.getLogTrigger_("videoSegmentStream")),I.videoSegmentStream.on("timelineStartInfo",function(Q){C&&!f.keepOriginalTimestamps&&(C.timelineStartInfo=Q,I.audioSegmentStream.setEarliestDts(Q.dts-v.baseMediaDecodeTime))}),I.videoSegmentStream.on("processedGopsInfo",v.trigger.bind(v,"gopInfo")),I.videoSegmentStream.on("segmentTimingInfo",v.trigger.bind(v,"videoSegmentTimingInfo")),I.videoSegmentStream.on("baseMediaDecodeTime",function(Q){C&&I.audioSegmentStream.setVideoBaseMediaDecodeTime(Q)}),I.videoSegmentStream.on("timingInfo",v.trigger.bind(v,"videoTimingInfo")),I.h264Stream.pipe(I.videoSegmentStream).pipe(I.coalesceStream)),C&&!I.audioSegmentStream&&(I.coalesceStream.numberOfTracks++,I.audioSegmentStream=new Bs(C,f),I.audioSegmentStream.on("log",v.getLogTrigger_("audioSegmentStream")),I.audioSegmentStream.on("timingInfo",v.trigger.bind(v,"audioTimingInfo")),I.audioSegmentStream.on("segmentTimingInfo",v.trigger.bind(v,"audioSegmentTimingInfo")),I.adtsStream.pipe(I.audioSegmentStream).pipe(I.coalesceStream)),v.trigger("trackinfo",{hasAudio:!!C,hasVideo:!!x})}}),I.coalesceStream.on("data",this.trigger.bind(this,"data")),I.coalesceStream.on("id3Frame",function(W){W.dispatchType=I.metadataStream.dispatchType,v.trigger("id3Frame",W)}),I.coalesceStream.on("caption",this.trigger.bind(this,"caption")),I.coalesceStream.on("done",this.trigger.bind(this,"done")),co(this,I)},this.setBaseMediaDecodeTime=function(I){var W=this.transmuxPipeline_;f.keepOriginalTimestamps||(this.baseMediaDecodeTime=I),C&&(C.timelineStartInfo.dts=void 0,C.timelineStartInfo.pts=void 0,gi.clearDtsInfo(C),W.audioTimestampRolloverStream&&W.audioTimestampRolloverStream.discontinuity()),x&&(W.videoSegmentStream&&(W.videoSegmentStream.gopCache_=[]),x.timelineStartInfo.dts=void 0,x.timelineStartInfo.pts=void 0,gi.clearDtsInfo(x),W.captionStream.reset()),W.timestampRolloverStream&&W.timestampRolloverStream.discontinuity()},this.setAudioAppendStart=function(I){C&&this.transmuxPipeline_.audioSegmentStream.setAudioAppendStart(I)},this.setRemux=function(I){var W=this.transmuxPipeline_;f.remux=I,W&&W.coalesceStream&&W.coalesceStream.setRemux(I)},this.alignGopsWith=function(I){x&&this.transmuxPipeline_.videoSegmentStream&&this.transmuxPipeline_.videoSegmentStream.alignGopsWith(I)},this.getLogTrigger_=function(I){var W=this;return function(Y){Y.stream=I,W.trigger("log",Y)}},this.push=function(I){if(b){var W=xd(I);W&&this.transmuxPipeline_.type!=="aac"?this.setupAacPipeline():!W&&this.transmuxPipeline_.type!=="ts"&&this.setupTsPipeline(),b=!1}this.transmuxPipeline_.headOfPipeline.push(I)},this.flush=function(){b=!0,this.transmuxPipeline_.headOfPipeline.flush()},this.endTimeline=function(){this.transmuxPipeline_.headOfPipeline.endTimeline()},this.reset=function(){this.transmuxPipeline_.headOfPipeline&&this.transmuxPipeline_.headOfPipeline.reset()},this.resetCaptions=function(){this.transmuxPipeline_.captionStream&&this.transmuxPipeline_.captionStream.reset()}},ja.prototype=new An;var Tc={Transmuxer:ja},Al=function(f){return f>>>0},bc=function(f){return("00"+f.toString(16)).slice(-2)},ca={toUnsigned:Al,toHexString:bc},Sc=function(f){var v="";return v+=String.fromCharCode(f[0]),v+=String.fromCharCode(f[1]),v+=String.fromCharCode(f[2]),v+=String.fromCharCode(f[3]),v},ho=Sc,Cc=ca.toUnsigned,Ec=ho,fo=function(f,v){var b=[],x,C,I,W,Y;if(!v.length)return null;for(x=0;x<f.byteLength;)C=Cc(f[x]<<24|f[x+1]<<16|f[x+2]<<8|f[x+3]),I=Ec(f.subarray(x+4,x+8)),W=C>1?x+C:f.byteLength,I===v[0]&&(v.length===1?b.push(f.subarray(x+8,W)):(Y=fo(f.subarray(x+8,W),v.slice(1)),Y.length&&(b=b.concat(Y)))),x=W;return b},po=fo,bd=ca.toUnsigned,Sd=s.getUint64,Cd=function(f){var v={version:f[0],flags:new Uint8Array(f.subarray(1,4))};return v.version===1?v.baseMediaDecodeTime=Sd(f.subarray(4)):v.baseMediaDecodeTime=bd(f[4]<<24|f[5]<<16|f[6]<<8|f[7]),v},qo=Cd,Wo=function(f){return{isLeading:(f[0]&12)>>>2,dependsOn:f[0]&3,isDependedOn:(f[1]&192)>>>6,hasRedundancy:(f[1]&48)>>>4,paddingValue:(f[1]&14)>>>1,isNonSyncSample:f[1]&1,degradationPriority:f[2]<<8|f[3]}},ku=Wo,Il=ku,wc=function(f){var v={version:f[0],flags:new Uint8Array(f.subarray(1,4)),samples:[]},b=new DataView(f.buffer,f.byteOffset,f.byteLength),x=v.flags[2]&1,C=v.flags[2]&4,I=v.flags[1]&1,W=v.flags[1]&2,Y=v.flags[1]&4,Q=v.flags[1]&8,ee=b.getUint32(4),le=8,ge;for(x&&(v.dataOffset=b.getInt32(le),le+=4),C&&ee&&(ge={flags:Il(f.subarray(le,le+4))},le+=4,I&&(ge.duration=b.getUint32(le),le+=4),W&&(ge.size=b.getUint32(le),le+=4),Q&&(v.version===1?ge.compositionTimeOffset=b.getInt32(le):ge.compositionTimeOffset=b.getUint32(le),le+=4),v.samples.push(ge),ee--);ee--;)ge={},I&&(ge.duration=b.getUint32(le),le+=4),W&&(ge.size=b.getUint32(le),le+=4),Y&&(ge.flags=Il(f.subarray(le,le+4)),le+=4),Q&&(v.version===1?ge.compositionTimeOffset=b.getInt32(le):ge.compositionTimeOffset=b.getUint32(le),le+=4),v.samples.push(ge);return v},Ns=wc,Yr=function(f){var v=new DataView(f.buffer,f.byteOffset,f.byteLength),b={version:f[0],flags:new Uint8Array(f.subarray(1,4)),trackId:v.getUint32(4)},x=b.flags[2]&1,C=b.flags[2]&2,I=b.flags[2]&8,W=b.flags[2]&16,Y=b.flags[2]&32,Q=b.flags[0]&65536,ee=b.flags[0]&131072,le;return le=8,x&&(le+=4,b.baseDataOffset=v.getUint32(12),le+=4),C&&(b.sampleDescriptionIndex=v.getUint32(le),le+=4),I&&(b.defaultSampleDuration=v.getUint32(le),le+=4),W&&(b.defaultSampleSize=v.getUint32(le),le+=4),Y&&(b.defaultSampleFlags=v.getUint32(le)),Q&&(b.durationIsEmpty=!0),!x&&ee&&(b.baseDataOffsetIsMoof=!0),b},bs=Yr,ri;typeof window<"u"?ri=window:typeof i<"u"?ri=i:typeof self<"u"?ri=self:ri={};var Nn=ri,Ed=ct.discardEmulationPreventionBytes,kc=vn.CaptionStream,Ss=po,Ac=qo,Go=Ns,Ko=bs,Au=Nn,Dl=function(f,v){for(var b=f,x=0;x<v.length;x++){var C=v[x];if(b<C.size)return C;b-=C.size}return null},wd=function(f,v,b){var x=new DataView(f.buffer,f.byteOffset,f.byteLength),C={logs:[],seiNals:[]},I,W,Y,Q;for(W=0;W+4<f.length;W+=Y)if(Y=x.getUint32(W),W+=4,!(Y<=0))switch(f[W]&31){case 6:var ee=f.subarray(W+1,W+1+Y),le=Dl(W,v);if(I={nalUnitType:"sei_rbsp",size:Y,data:ee,escapedRBSP:Ed(ee),trackId:b},le)I.pts=le.pts,I.dts=le.dts,Q=le;else if(Q)I.pts=Q.pts,I.dts=Q.dts;else{C.logs.push({level:"warn",message:"We've encountered a nal unit without data at "+W+" for trackId "+b+". See mux.js#223."});break}C.seiNals.push(I);break}return C},Iu=function(f,v,b){var x=v,C=b.defaultSampleDuration||0,I=b.defaultSampleSize||0,W=b.trackId,Y=[];return f.forEach(function(Q){var ee=Go(Q),le=ee.samples;le.forEach(function(ge){ge.duration===void 0&&(ge.duration=C),ge.size===void 0&&(ge.size=I),ge.trackId=W,ge.dts=x,ge.compositionTimeOffset===void 0&&(ge.compositionTimeOffset=0),typeof x=="bigint"?(ge.pts=x+Au.BigInt(ge.compositionTimeOffset),x+=Au.BigInt(ge.duration)):(ge.pts=x+ge.compositionTimeOffset,x+=ge.duration)}),Y=Y.concat(le)}),Y},ie=function(f,v){var b=Ss(f,["moof","traf"]),x=Ss(f,["mdat"]),C={},I=[];return x.forEach(function(W,Y){var Q=b[Y];I.push({mdat:W,traf:Q})}),I.forEach(function(W){var Y=W.mdat,Q=W.traf,ee=Ss(Q,["tfhd"]),le=Ko(ee[0]),ge=le.trackId,He=Ss(Q,["tfdt"]),Ee=He.length>0?Ac(He[0]).baseMediaDecodeTime:0,gt=Ss(Q,["trun"]),Bt,Br;v===ge&&gt.length>0&&(Bt=Iu(gt,Ee,le),Br=wd(Y,Bt,ge),C[ge]||(C[ge]={seiNals:[],logs:[]}),C[ge].seiNals=C[ge].seiNals.concat(Br.seiNals),C[ge].logs=C[ge].logs.concat(Br.logs))}),C},O=function(f,v,b){var x;if(v===null)return null;x=ie(f,v);var C=x[v]||{};return{seiNals:C.seiNals,logs:C.logs,timescale:b}},$=function(){var f=!1,v,b,x,C,I,W;this.isInitialized=function(){return f},this.init=function(Y){v=new kc,f=!0,W=Y?Y.isPartial:!1,v.on("data",function(Q){Q.startTime=Q.startPts/C,Q.endTime=Q.endPts/C,I.captions.push(Q),I.captionStreams[Q.stream]=!0}),v.on("log",function(Q){I.logs.push(Q)})},this.isNewInit=function(Y,Q){return Y&&Y.length===0||Q&&typeof Q=="object"&&Object.keys(Q).length===0?!1:x!==Y[0]||C!==Q[x]},this.parse=function(Y,Q,ee){var le;if(this.isInitialized()){if(!Q||!ee)return null;if(this.isNewInit(Q,ee))x=Q[0],C=ee[x];else if(x===null||!C)return b.push(Y),null}else return null;for(;b.length>0;){var ge=b.shift();this.parse(ge,Q,ee)}return le=O(Y,x,C),le&&le.logs&&(I.logs=I.logs.concat(le.logs)),le===null||!le.seiNals?I.logs.length?{logs:I.logs,captions:[],captionStreams:[]}:null:(this.pushNals(le.seiNals),this.flushStream(),I)},this.pushNals=function(Y){if(!this.isInitialized()||!Y||Y.length===0)return null;Y.forEach(function(Q){v.push(Q)})},this.flushStream=function(){if(!this.isInitialized())return null;W?v.partialFlush():v.flush()},this.clearParsedCaptions=function(){I.captions=[],I.captionStreams={},I.logs=[]},this.resetCaptionStream=function(){if(!this.isInitialized())return null;v.reset()},this.clearAllCaptions=function(){this.clearParsedCaptions(),this.resetCaptionStream()},this.reset=function(){b=[],x=null,C=null,I?this.clearParsedCaptions():I={captions:[],captionStreams:{},logs:[]},this.resetCaptionStream()},this.reset()},U=$,z=function(f){for(var v=0,b=String.fromCharCode(f[v]),x="";b!=="\0";)x+=b,v++,b=String.fromCharCode(f[v]);return x+=b,x},J={uint8ToCString:z},Z=J.uint8ToCString,pe=s.getUint64,ve=function(f){var v=4,b=f[0],x,C,I,W,Y,Q,ee,le;if(b===0){x=Z(f.subarray(v)),v+=x.length,C=Z(f.subarray(v)),v+=C.length;var ge=new DataView(f.buffer);I=ge.getUint32(v),v+=4,Y=ge.getUint32(v),v+=4,Q=ge.getUint32(v),v+=4,ee=ge.getUint32(v),v+=4}else if(b===1){var ge=new DataView(f.buffer);I=ge.getUint32(v),v+=4,W=pe(f.subarray(v)),v+=8,Q=ge.getUint32(v),v+=4,ee=ge.getUint32(v),v+=4,x=Z(f.subarray(v)),v+=x.length,C=Z(f.subarray(v)),v+=C.length}le=new Uint8Array(f.subarray(v,f.byteLength));var He={scheme_id_uri:x,value:C,timescale:I||1,presentation_time:W,presentation_time_delta:Y,event_duration:Q,id:ee,message_data:le};return be(b,He)?He:void 0},Ae=function(f,v,b,x){return f||f===0?f/v:x+b/v},be=function(f,v){var b=v.scheme_id_uri!=="\0",x=f===0&&De(v.presentation_time_delta)&&b,C=f===1&&De(v.presentation_time)&&b;return!(f>1)&&x||C},De=function(f){return f!==void 0||f!==null},Je={parseEmsgBox:ve,scaleTime:Ae},Et=ca.toUnsigned,Mt=ca.toHexString,Qe=po,Zt=ho,xi=Je,ln=bs,Un=Ns,Xo=qo,mo=s.getUint64,go,Yo,da,Us,di,Ha,$n,Pl=Nn,Bh=on.parseId3Frames;go=function(f){var v={},b=Qe(f,["moov","trak"]);return b.reduce(function(x,C){var I,W,Y,Q,ee;return I=Qe(C,["tkhd"])[0],!I||(W=I[0],Y=W===0?12:20,Q=Et(I[Y]<<24|I[Y+1]<<16|I[Y+2]<<8|I[Y+3]),ee=Qe(C,["mdia","mdhd"])[0],!ee)?null:(W=ee[0],Y=W===0?12:20,x[Q]=Et(ee[Y]<<24|ee[Y+1]<<16|ee[Y+2]<<8|ee[Y+3]),x)},v)},Yo=function(f,v){var b;b=Qe(v,["moof","traf"]);var x=b.reduce(function(C,I){var W=Qe(I,["tfhd"])[0],Y=Et(W[4]<<24|W[5]<<16|W[6]<<8|W[7]),Q=f[Y]||9e4,ee=Qe(I,["tfdt"])[0],le=new DataView(ee.buffer,ee.byteOffset,ee.byteLength),ge;ee[0]===1?ge=mo(ee.subarray(4,12)):ge=le.getUint32(4);let He;return typeof ge=="bigint"?He=ge/Pl.BigInt(Q):typeof ge=="number"&&!isNaN(ge)&&(He=ge/Q),He<Number.MAX_SAFE_INTEGER&&(He=Number(He)),He<C&&(C=He),C},1/0);return typeof x=="bigint"||isFinite(x)?x:0},da=function(f,v){var b=Qe(v,["moof","traf"]),x=0,C=0,I;if(b&&b.length){var W=Qe(b[0],["tfhd"])[0],Y=Qe(b[0],["trun"])[0],Q=Qe(b[0],["tfdt"])[0];if(W){var ee=ln(W);I=ee.trackId}if(Q){var le=Xo(Q);x=le.baseMediaDecodeTime}if(Y){var ge=Un(Y);ge.samples&&ge.samples.length&&(C=ge.samples[0].compositionTimeOffset||0)}}var He=f[I]||9e4;typeof x=="bigint"&&(C=Pl.BigInt(C),He=Pl.BigInt(He));var Ee=(x+C)/He;return typeof Ee=="bigint"&&Ee<Number.MAX_SAFE_INTEGER&&(Ee=Number(Ee)),Ee},Us=function(f){var v=Qe(f,["moov","trak"]),b=[];return v.forEach(function(x){var C=Qe(x,["mdia","hdlr"]),I=Qe(x,["tkhd"]);C.forEach(function(W,Y){var Q=Zt(W.subarray(8,12)),ee=I[Y],le,ge,He;Q==="vide"&&(le=new DataView(ee.buffer,ee.byteOffset,ee.byteLength),ge=le.getUint8(0),He=ge===0?le.getUint32(12):le.getUint32(20),b.push(He))})}),b},Ha=function(f){var v=f[0],b=v===0?12:20;return Et(f[b]<<24|f[b+1]<<16|f[b+2]<<8|f[b+3])},di=function(f){var v=Qe(f,["moov","trak"]),b=[];return v.forEach(function(x){var C={},I=Qe(x,["tkhd"])[0],W,Y;I&&(W=new DataView(I.buffer,I.byteOffset,I.byteLength),Y=W.getUint8(0),C.id=Y===0?W.getUint32(12):W.getUint32(20));var Q=Qe(x,["mdia","hdlr"])[0];if(Q){var ee=Zt(Q.subarray(8,12));ee==="vide"?C.type="video":ee==="soun"?C.type="audio":C.type=ee}var le=Qe(x,["mdia","minf","stbl","stsd"])[0];if(le){var ge=le.subarray(8);C.codec=Zt(ge.subarray(4,8));var He=Qe(ge,[C.codec])[0],Ee,gt;He&&(/^[asm]vc[1-9]$/i.test(C.codec)?(Ee=He.subarray(78),gt=Zt(Ee.subarray(4,8)),gt==="avcC"&&Ee.length>11?(C.codec+=".",C.codec+=Mt(Ee[9]),C.codec+=Mt(Ee[10]),C.codec+=Mt(Ee[11])):C.codec="avc1.4d400d"):/^mp4[a,v]$/i.test(C.codec)?(Ee=He.subarray(28),gt=Zt(Ee.subarray(4,8)),gt==="esds"&&Ee.length>20&&Ee[19]!==0?(C.codec+="."+Mt(Ee[19]),C.codec+="."+Mt(Ee[20]>>>2&63).replace(/^0/,"")):C.codec="mp4a.40.2"):C.codec=C.codec.toLowerCase())}var Bt=Qe(x,["mdia","mdhd"])[0];Bt&&(C.timescale=Ha(Bt)),b.push(C)}),b},$n=function(f,v=0){var b=Qe(f,["emsg"]);return b.map(x=>{var C=xi.parseEmsgBox(new Uint8Array(x)),I=Bh(C.message_data);return{cueTime:xi.scaleTime(C.presentation_time,C.timescale,C.presentation_time_delta,v),duration:xi.scaleTime(C.event_duration,C.timescale),frames:I}})};var Rl={findBox:Qe,parseType:Zt,timescale:go,startTime:Yo,compositionStartTime:da,videoTrackIds:Us,tracks:di,getTimescaleFromMediaHeader:Ha,getEmsgID3:$n},Ll=ui,Ic=function(f){var v=f[1]&31;return v<<=8,v|=f[2],v},vo=function(f){return!!(f[1]&64)},jn=function(f){var v=0;return(f[3]&48)>>>4>1&&(v+=f[4]+1),v},kd=function(f,v){var b=Ic(f);return b===0?"pat":b===v?"pmt":v?"pes":null},Ad=function(f){var v=vo(f),b=4+jn(f);return v&&(b+=f[b]+1),(f[b+10]&31)<<8|f[b+11]},Xp=function(f){var v={},b=vo(f),x=4+jn(f);if(b&&(x+=f[x]+1),!!(f[x+5]&1)){var C,I,W;C=(f[x+1]&15)<<8|f[x+2],I=3+C-4,W=(f[x+10]&15)<<8|f[x+11];for(var Y=12+W;Y<I;){var Q=x+Y;v[(f[Q+1]&31)<<8|f[Q+2]]=f[Q],Y+=((f[Q+3]&15)<<8|f[Q+4])+5}return v}},Yp=function(f,v){var b=Ic(f),x=v[b];switch(x){case Ll.H264_STREAM_TYPE:return"video";case Ll.ADTS_STREAM_TYPE:return"audio";case Ll.METADATA_STREAM_TYPE:return"timed-metadata";default:return null}},Du=function(f){var v=vo(f);if(!v)return null;var b=4+jn(f);if(b>=f.byteLength)return null;var x=null,C;return C=f[b+7],C&192&&(x={},x.pts=(f[b+9]&14)<<27|(f[b+10]&255)<<20|(f[b+11]&254)<<12|(f[b+12]&255)<<5|(f[b+13]&254)>>>3,x.pts*=4,x.pts+=(f[b+13]&6)>>>1,x.dts=x.pts,C&64&&(x.dts=(f[b+14]&14)<<27|(f[b+15]&255)<<20|(f[b+16]&254)<<12|(f[b+17]&255)<<5|(f[b+18]&254)>>>3,x.dts*=4,x.dts+=(f[b+18]&6)>>>1)),x},Pu=function(f){switch(f){case 5:return"slice_layer_without_partitioning_rbsp_idr";case 6:return"sei_rbsp";case 7:return"seq_parameter_set_rbsp";case 8:return"pic_parameter_set_rbsp";case 9:return"access_unit_delimiter_rbsp";default:return null}},Nh=function(f){for(var v=4+jn(f),b=f.subarray(v),x=0,C=0,I=!1,W;C<b.byteLength-3;C++)if(b[C+2]===1){x=C+5;break}for(;x<b.byteLength;)switch(b[x]){case 0:if(b[x-1]!==0){x+=2;break}else if(b[x-2]!==0){x++;break}C+3!==x-2&&(W=Pu(b[C+3]&31),W==="slice_layer_without_partitioning_rbsp_idr"&&(I=!0));do x++;while(b[x]!==1&&x<b.length);C=x-2,x+=3;break;case 1:if(b[x-1]!==0||b[x-2]!==0){x+=3;break}W=Pu(b[C+3]&31),W==="slice_layer_without_partitioning_rbsp_idr"&&(I=!0),C=x-2,x+=3;break;default:x+=3;break}return b=b.subarray(C),x-=C,C=0,b&&b.byteLength>3&&(W=Pu(b[C+3]&31),W==="slice_layer_without_partitioning_rbsp_idr"&&(I=!0)),I},Uh={parseType:kd,parsePat:Ad,parsePmt:Xp,parsePayloadUnitStartIndicator:vo,parsePesType:Yp,parsePesTime:Du,videoPacketContainsKeyFrame:Nh},hi=ui,ns=we.handleRollover,er={};er.ts=Uh,er.aac=Fs;var un=$t.ONE_SECOND_IN_TS,ii=188,Oi=71,Ru=function(f,v){for(var b=0,x=ii,C,I;x<f.byteLength;){if(f[b]===Oi&&f[x]===Oi){switch(C=f.subarray(b,x),I=er.ts.parseType(C,v.pid),I){case"pat":v.pid=er.ts.parsePat(C);break;case"pmt":var W=er.ts.parsePmt(C);v.table=v.table||{},Object.keys(W).forEach(function(Y){v.table[Y]=W[Y]});break}b+=ii,x+=ii;continue}b++,x++}},Ol=function(f,v,b){for(var x=0,C=ii,I,W,Y,Q,ee,le=!1;C<=f.byteLength;){if(f[x]===Oi&&(f[C]===Oi||C===f.byteLength)){switch(I=f.subarray(x,C),W=er.ts.parseType(I,v.pid),W){case"pes":Y=er.ts.parsePesType(I,v.table),Q=er.ts.parsePayloadUnitStartIndicator(I),Y==="audio"&&Q&&(ee=er.ts.parsePesTime(I),ee&&(ee.type="audio",b.audio.push(ee),le=!0));break}if(le)break;x+=ii,C+=ii;continue}x++,C++}for(C=f.byteLength,x=C-ii,le=!1;x>=0;){if(f[x]===Oi&&(f[C]===Oi||C===f.byteLength)){switch(I=f.subarray(x,C),W=er.ts.parseType(I,v.pid),W){case"pes":Y=er.ts.parsePesType(I,v.table),Q=er.ts.parsePayloadUnitStartIndicator(I),Y==="audio"&&Q&&(ee=er.ts.parsePesTime(I),ee&&(ee.type="audio",b.audio.push(ee),le=!0));break}if(le)break;x-=ii,C-=ii;continue}x--,C--}},Ml=function(f,v,b){for(var x=0,C=ii,I,W,Y,Q,ee,le,ge,He,Ee=!1,gt={data:[],size:0};C<f.byteLength;){if(f[x]===Oi&&f[C]===Oi){switch(I=f.subarray(x,C),W=er.ts.parseType(I,v.pid),W){case"pes":if(Y=er.ts.parsePesType(I,v.table),Q=er.ts.parsePayloadUnitStartIndicator(I),Y==="video"&&(Q&&!Ee&&(ee=er.ts.parsePesTime(I),ee&&(ee.type="video",b.video.push(ee),Ee=!0)),!b.firstKeyFrame)){if(Q&&gt.size!==0){for(le=new Uint8Array(gt.size),ge=0;gt.data.length;)He=gt.data.shift(),le.set(He,ge),ge+=He.byteLength;if(er.ts.videoPacketContainsKeyFrame(le)){var Bt=er.ts.parsePesTime(le);Bt?(b.firstKeyFrame=Bt,b.firstKeyFrame.type="video"):console.warn("Failed to extract PTS/DTS from PES at first keyframe. This could be an unusual TS segment, or else mux.js did not parse your TS segment correctly. If you know your TS segments do contain PTS/DTS on keyframes please file a bug report! You can try ffprobe to double check for yourself.")}gt.size=0}gt.data.push(I),gt.size+=I.byteLength}break}if(Ee&&b.firstKeyFrame)break;x+=ii,C+=ii;continue}x++,C++}for(C=f.byteLength,x=C-ii,Ee=!1;x>=0;){if(f[x]===Oi&&f[C]===Oi){switch(I=f.subarray(x,C),W=er.ts.parseType(I,v.pid),W){case"pes":Y=er.ts.parsePesType(I,v.table),Q=er.ts.parsePayloadUnitStartIndicator(I),Y==="video"&&Q&&(ee=er.ts.parsePesTime(I),ee&&(ee.type="video",b.video.push(ee),Ee=!0));break}if(Ee)break;x-=ii,C-=ii;continue}x--,C--}},$h=function(f,v){if(f.audio&&f.audio.length){var b=v;(typeof b>"u"||isNaN(b))&&(b=f.audio[0].dts),f.audio.forEach(function(I){I.dts=ns(I.dts,b),I.pts=ns(I.pts,b),I.dtsTime=I.dts/un,I.ptsTime=I.pts/un})}if(f.video&&f.video.length){var x=v;if((typeof x>"u"||isNaN(x))&&(x=f.video[0].dts),f.video.forEach(function(I){I.dts=ns(I.dts,x),I.pts=ns(I.pts,x),I.dtsTime=I.dts/un,I.ptsTime=I.pts/un}),f.firstKeyFrame){var C=f.firstKeyFrame;C.dts=ns(C.dts,x),C.pts=ns(C.pts,x),C.dtsTime=C.dts/un,C.ptsTime=C.pts/un}}},Qp=function(f){for(var v=!1,b=0,x=null,C=null,I=0,W=0,Y;f.length-W>=3;){var Q=er.aac.parseType(f,W);switch(Q){case"timed-metadata":if(f.length-W<10){v=!0;break}if(I=er.aac.parseId3TagSize(f,W),I>f.length){v=!0;break}C===null&&(Y=f.subarray(W,W+I),C=er.aac.parseAacTimestamp(Y)),W+=I;break;case"audio":if(f.length-W<7){v=!0;break}if(I=er.aac.parseAdtsSize(f,W),I>f.length){v=!0;break}x===null&&(Y=f.subarray(W,W+I),x=er.aac.parseSampleRate(Y)),b++,W+=I;break;default:W++;break}if(v)return null}if(x===null||C===null)return null;var ee=un/x,le={audio:[{type:"audio",dts:C,pts:C},{type:"audio",dts:C+b*1024*ee,pts:C+b*1024*ee}]};return le},Jp=function(f){var v={pid:null,table:null},b={};Ru(f,v);for(var x in v.table)if(v.table.hasOwnProperty(x)){var C=v.table[x];switch(C){case hi.H264_STREAM_TYPE:b.video=[],Ml(f,v,b),b.video.length===0&&delete b.video;break;case hi.ADTS_STREAM_TYPE:b.audio=[],Ol(f,v,b),b.audio.length===0&&delete b.audio;break}}return b},jh=function(f,v){var b=er.aac.isLikelyAacData(f),x;return b?x=Qp(f):x=Jp(f),!x||!x.audio&&!x.video?null:($h(x,v),x)},Dc={inspect:jh,parseAudioPes_:Ol};const Pc=function(f,v){v.on("data",function(b){const x=b.initSegment;b.initSegment={data:x.buffer,byteOffset:x.byteOffset,byteLength:x.byteLength};const C=b.data;b.data=C.buffer,f.postMessage({action:"data",segment:b,byteOffset:C.byteOffset,byteLength:C.byteLength},[b.data])}),v.on("done",function(b){f.postMessage({action:"done"})}),v.on("gopInfo",function(b){f.postMessage({action:"gopInfo",gopInfo:b})}),v.on("videoSegmentTimingInfo",function(b){const x={start:{decode:$t.videoTsToSeconds(b.start.dts),presentation:$t.videoTsToSeconds(b.start.pts)},end:{decode:$t.videoTsToSeconds(b.end.dts),presentation:$t.videoTsToSeconds(b.end.pts)},baseMediaDecodeTime:$t.videoTsToSeconds(b.baseMediaDecodeTime)};b.prependedContentDuration&&(x.prependedContentDuration=$t.videoTsToSeconds(b.prependedContentDuration)),f.postMessage({action:"videoSegmentTimingInfo",videoSegmentTimingInfo:x})}),v.on("audioSegmentTimingInfo",function(b){const x={start:{decode:$t.videoTsToSeconds(b.start.dts),presentation:$t.videoTsToSeconds(b.start.pts)},end:{decode:$t.videoTsToSeconds(b.end.dts),presentation:$t.videoTsToSeconds(b.end.pts)},baseMediaDecodeTime:$t.videoTsToSeconds(b.baseMediaDecodeTime)};b.prependedContentDuration&&(x.prependedContentDuration=$t.videoTsToSeconds(b.prependedContentDuration)),f.postMessage({action:"audioSegmentTimingInfo",audioSegmentTimingInfo:x})}),v.on("id3Frame",function(b){f.postMessage({action:"id3Frame",id3Frame:b})}),v.on("caption",function(b){f.postMessage({action:"caption",caption:b})}),v.on("trackinfo",function(b){f.postMessage({action:"trackinfo",trackInfo:b})}),v.on("audioTimingInfo",function(b){f.postMessage({action:"audioTimingInfo",audioTimingInfo:{start:$t.videoTsToSeconds(b.start),end:$t.videoTsToSeconds(b.end)}})}),v.on("videoTimingInfo",function(b){f.postMessage({action:"videoTimingInfo",videoTimingInfo:{start:$t.videoTsToSeconds(b.start),end:$t.videoTsToSeconds(b.end)}})}),v.on("log",function(b){f.postMessage({action:"log",log:b})})};class Lu{constructor(v,b){this.options=b||{},this.self=v,this.init()}init(){this.transmuxer&&this.transmuxer.dispose(),this.transmuxer=new Tc.Transmuxer(this.options),Pc(this.self,this.transmuxer)}pushMp4Captions(v){this.captionParser||(this.captionParser=new U,this.captionParser.init());const b=new Uint8Array(v.data,v.byteOffset,v.byteLength),x=this.captionParser.parse(b,v.trackIds,v.timescales);this.self.postMessage({action:"mp4Captions",captions:x&&x.captions||[],logs:x&&x.logs||[],data:b.buffer},[b.buffer])}probeMp4StartTime({timescales:v,data:b}){const x=Rl.startTime(v,b);this.self.postMessage({action:"probeMp4StartTime",startTime:x,data:b},[b.buffer])}probeMp4Tracks({data:v}){const b=Rl.tracks(v);this.self.postMessage({action:"probeMp4Tracks",tracks:b,data:v},[v.buffer])}probeEmsgID3({data:v,offset:b}){const x=Rl.getEmsgID3(v,b);this.self.postMessage({action:"probeEmsgID3",id3Frames:x,emsgData:v},[v.buffer])}probeTs({data:v,baseStartTime:b}){const x=typeof b=="number"&&!isNaN(b)?b*$t.ONE_SECOND_IN_TS:void 0,C=Dc.inspect(v,x);let I=null;C&&(I={hasVideo:C.video&&C.video.length===2||!1,hasAudio:C.audio&&C.audio.length===2||!1},I.hasVideo&&(I.videoStart=C.video[0].ptsTime),I.hasAudio&&(I.audioStart=C.audio[0].ptsTime)),this.self.postMessage({action:"probeTs",result:I,data:v},[v.buffer])}clearAllMp4Captions(){this.captionParser&&this.captionParser.clearAllCaptions()}clearParsedMp4Captions(){this.captionParser&&this.captionParser.clearParsedCaptions()}push(v){const b=new Uint8Array(v.data,v.byteOffset,v.byteLength);this.transmuxer.push(b)}reset(){this.transmuxer.reset()}setTimestampOffset(v){const b=v.timestampOffset||0;this.transmuxer.setBaseMediaDecodeTime(Math.round($t.secondsToVideoTs(b)))}setAudioAppendStart(v){this.transmuxer.setAudioAppendStart(Math.ceil($t.secondsToVideoTs(v.appendStart)))}setRemux(v){this.transmuxer.setRemux(v.remux)}flush(v){this.transmuxer.flush(),self.postMessage({action:"done",type:"transmuxed"})}endTimeline(){this.transmuxer.endTimeline(),self.postMessage({action:"endedtimeline",type:"transmuxed"})}alignGopsWith(v){this.transmuxer.alignGopsWith(v.gopsToAlignWith.slice())}}self.onmessage=function(f){if(f.data.action==="init"&&f.data.options){this.messageHandlers=new Lu(self,f.data.options);return}this.messageHandlers||(this.messageHandlers=new Lu(self)),f.data&&f.data.action&&f.data.action!=="init"&&this.messageHandlers[f.data.action]&&this.messageHandlers[f.data.action](f.data)}}));var eae=VN(Zse);const tae=(i,e,t)=>{const{type:r,initSegment:n,captions:s,captionStreams:a,metadata:o,videoFrameDtsTime:l,videoFramePtsTime:u}=i.data.segment;e.buffer.push({captions:s,captionStreams:a,metadata:o});const c=i.data.segment.boxes||{data:i.data.segment.data},h={type:r,data:new Uint8Array(c.data,c.data.byteOffset,c.data.byteLength),initSegment:new Uint8Array(n.data,n.byteOffset,n.byteLength)};typeof l<"u"&&(h.videoFrameDtsTime=l),typeof u<"u"&&(h.videoFramePtsTime=u),t(h)},rae=({transmuxedData:i,callback:e})=>{i.buffer=[],e(i)},iae=(i,e)=>{e.gopInfo=i.data.gopInfo},GN=i=>{const{transmuxer:e,bytes:t,audioAppendStart:r,gopsToAlignWith:n,remux:s,onData:a,onTrackInfo:o,onAudioTimingInfo:l,onVideoTimingInfo:u,onVideoSegmentTimingInfo:c,onAudioSegmentTimingInfo:h,onId3:m,onCaptions:g,onDone:y,onEndedTimeline:_,onTransmuxerLog:T,isEndOfTimeline:E,segment:w,triggerSegmentEventFn:D}=i,R={buffer:[]};let A=E;const L=B=>{e.currentTransmux===i&&(B.data.action==="data"&&tae(B,R,a),B.data.action==="trackinfo"&&o(B.data.trackInfo),B.data.action==="gopInfo"&&iae(B,R),B.data.action==="audioTimingInfo"&&l(B.data.audioTimingInfo),B.data.action==="videoTimingInfo"&&u(B.data.videoTimingInfo),B.data.action==="videoSegmentTimingInfo"&&c(B.data.videoSegmentTimingInfo),B.data.action==="audioSegmentTimingInfo"&&h(B.data.audioSegmentTimingInfo),B.data.action==="id3Frame"&&m([B.data.id3Frame],B.data.id3Frame.dispatchType),B.data.action==="caption"&&g(B.data.caption),B.data.action==="endedtimeline"&&(A=!1,_()),B.data.action==="log"&&T(B.data.log),B.data.type==="transmuxed"&&(A||(e.onmessage=null,rae({transmuxedData:R,callback:y}),KN(e))))},F=()=>{const B={message:"Received an error message from the transmuxer worker",metadata:{errorType:_e.Error.StreamingFailedToTransmuxSegment,segmentInfo:eh({segment:w})}};y(null,B)};if(e.onmessage=L,e.onerror=F,r&&e.postMessage({action:"setAudioAppendStart",appendStart:r}),Array.isArray(n)&&e.postMessage({action:"alignGopsWith",gopsToAlignWith:n}),typeof s<"u"&&e.postMessage({action:"setRemux",remux:s}),t.byteLength){const B=t instanceof ArrayBuffer?t:t.buffer,M=t instanceof ArrayBuffer?0:t.byteOffset;D({type:"segmenttransmuxingstart",segment:w}),e.postMessage({action:"push",data:B,byteOffset:M,byteLength:t.byteLength},[B])}E&&e.postMessage({action:"endTimeline"}),e.postMessage({action:"flush"})},KN=i=>{i.currentTransmux=null,i.transmuxQueue.length&&(i.currentTransmux=i.transmuxQueue.shift(),typeof i.currentTransmux=="function"?i.currentTransmux():GN(i.currentTransmux))},vO=(i,e)=>{i.postMessage({action:e}),KN(i)},XN=(i,e)=>{if(!e.currentTransmux){e.currentTransmux=i,vO(e,i);return}e.transmuxQueue.push(vO.bind(null,e,i))},nae=i=>{XN("reset",i)},sae=i=>{XN("endTimeline",i)},YN=i=>{if(!i.transmuxer.currentTransmux){i.transmuxer.currentTransmux=i,GN(i);return}i.transmuxer.transmuxQueue.push(i)},aae=i=>{const e=new eae;e.currentTransmux=null,e.transmuxQueue=[];const t=e.terminate;return e.terminate=()=>(e.currentTransmux=null,e.transmuxQueue.length=0,t.call(e)),e.postMessage({action:"init",options:i}),e};var e1={reset:nae,endTimeline:sae,transmux:YN,createTransmuxer:aae};const l0=function(i){const e=i.transmuxer,t=i.endAction||i.action,r=i.callback,n=Jt({},i,{endAction:null,transmuxer:null,callback:null}),s=a=>{a.data.action===t&&(e.removeEventListener("message",s),a.data.data&&(a.data.data=new Uint8Array(a.data.data,i.byteOffset||0,i.byteLength||a.data.data.byteLength),i.data&&(i.data=a.data.data)),r(a.data))};if(e.addEventListener("message",s),i.data){const a=i.data instanceof ArrayBuffer;n.byteOffset=a?0:i.data.byteOffset,n.byteLength=i.data.byteLength;const o=[a?i.data:i.data.buffer];e.postMessage(n,o)}else e.postMessage(n)},Zl={FAILURE:2,TIMEOUT:-101,ABORTED:-102},jC=i=>{i.forEach(e=>{e.abort()})},oae=i=>({bandwidth:i.bandwidth,bytesReceived:i.bytesReceived||0,roundTripTime:i.roundTripTime||0}),lae=i=>{const e=i.target,r={bandwidth:1/0,bytesReceived:0,roundTripTime:Date.now()-e.requestTime||0};return r.bytesReceived=i.loaded,r.bandwidth=Math.floor(r.bytesReceived/r.roundTripTime*8*1e3),r},S2=(i,e)=>{const{requestType:t}=e,r=vh({requestType:t,request:e,error:i});return e.timedout?{status:e.status,message:"HLS request timed-out at URL: "+e.uri,code:Zl.TIMEOUT,xhr:e,metadata:r}:e.aborted?{status:e.status,message:"HLS request aborted at URL: "+e.uri,code:Zl.ABORTED,xhr:e,metadata:r}:i?{status:e.status,message:"HLS request errored at URL: "+e.uri,code:Zl.FAILURE,xhr:e,metadata:r}:e.responseType==="arraybuffer"&&e.response.byteLength===0?{status:e.status,message:"Empty HLS response at URL: "+e.uri,code:Zl.FAILURE,xhr:e,metadata:r}:null},yO=(i,e,t,r)=>(n,s)=>{const a=s.response,o=S2(n,s);if(o)return t(o,i);if(a.byteLength!==16)return t({status:s.status,message:"Invalid HLS key at URL: "+s.uri,code:Zl.FAILURE,xhr:s},i);const l=new DataView(a),u=new Uint32Array([l.getUint32(0),l.getUint32(4),l.getUint32(8),l.getUint32(12)]);for(let h=0;h<e.length;h++)e[h].bytes=u;const c={uri:s.uri};return r({type:"segmentkeyloadcomplete",segment:i,keyInfo:c}),t(null,i)},QN=(i,e)=>{const t=Pp(i.map.bytes);if(t!=="mp4"){const r=i.map.resolvedUri||i.map.uri,n=t||"unknown";return e({internal:!0,message:`Found unsupported ${n} container for initialization segment at URL: ${r}`,code:Zl.FAILURE,metadata:{mediaType:n}})}l0({action:"probeMp4Tracks",data:i.map.bytes,transmuxer:i.transmuxer,callback:({tracks:r,data:n})=>(i.map.bytes=n,r.forEach(function(s){i.map.tracks=i.map.tracks||{},!i.map.tracks[s.type]&&(i.map.tracks[s.type]=s,typeof s.id=="number"&&s.timescale&&(i.map.timescales=i.map.timescales||{},i.map.timescales[s.id]=s.timescale))}),e(null))})},uae=({segment:i,finishProcessingFn:e,triggerSegmentEventFn:t})=>(r,n)=>{const s=S2(r,n);if(s)return e(s,i);const a=new Uint8Array(n.response);if(t({type:"segmentloaded",segment:i}),i.map.key)return i.map.encryptedBytes=a,e(null,i);i.map.bytes=a,QN(i,function(o){if(o)return o.xhr=n,o.status=n.status,e(o,i);e(null,i)})},cae=({segment:i,finishProcessingFn:e,responseType:t,triggerSegmentEventFn:r})=>(n,s)=>{const a=S2(n,s);if(a)return e(a,i);r({type:"segmentloaded",segment:i});const o=t==="arraybuffer"||!s.responseText?s.response:Qse(s.responseText.substring(i.lastReachedChar||0));return i.stats=oae(s),i.key?i.encryptedBytes=new Uint8Array(o):i.bytes=new Uint8Array(o),e(null,i)},dae=({segment:i,bytes:e,trackInfoFn:t,timingInfoFn:r,videoSegmentTimingInfoFn:n,audioSegmentTimingInfoFn:s,id3Fn:a,captionsFn:o,isEndOfTimeline:l,endedTimelineFn:u,dataFn:c,doneFn:h,onTransmuxerLog:m,triggerSegmentEventFn:g})=>{const y=i.map&&i.map.tracks||{},_=!!(y.audio&&y.video);let T=r.bind(null,i,"audio","start");const E=r.bind(null,i,"audio","end");let w=r.bind(null,i,"video","start");const D=r.bind(null,i,"video","end"),R=()=>YN({bytes:e,transmuxer:i.transmuxer,audioAppendStart:i.audioAppendStart,gopsToAlignWith:i.gopsToAlignWith,remux:_,onData:A=>{A.type=A.type==="combined"?"video":A.type,c(i,A)},onTrackInfo:A=>{t&&(_&&(A.isMuxed=!0),t(i,A))},onAudioTimingInfo:A=>{T&&typeof A.start<"u"&&(T(A.start),T=null),E&&typeof A.end<"u"&&E(A.end)},onVideoTimingInfo:A=>{w&&typeof A.start<"u"&&(w(A.start),w=null),D&&typeof A.end<"u"&&D(A.end)},onVideoSegmentTimingInfo:A=>{const L={pts:{start:A.start.presentation,end:A.end.presentation},dts:{start:A.start.decode,end:A.end.decode}};g({type:"segmenttransmuxingtiminginfoavailable",segment:i,timingInfo:L}),n(A)},onAudioSegmentTimingInfo:A=>{const L={pts:{start:A.start.pts,end:A.end.pts},dts:{start:A.start.dts,end:A.end.dts}};g({type:"segmenttransmuxingtiminginfoavailable",segment:i,timingInfo:L}),s(A)},onId3:(A,L)=>{a(i,A,L)},onCaptions:A=>{o(i,[A])},isEndOfTimeline:l,onEndedTimeline:()=>{u()},onTransmuxerLog:m,onDone:(A,L)=>{h&&(A.type=A.type==="combined"?"video":A.type,g({type:"segmenttransmuxingcomplete",segment:i}),h(L,i,A))},segment:i,triggerSegmentEventFn:g});l0({action:"probeTs",transmuxer:i.transmuxer,data:e,baseStartTime:i.baseStartTime,callback:A=>{i.bytes=e=A.data;const L=A.result;L&&(t(i,{hasAudio:L.hasAudio,hasVideo:L.hasVideo,isMuxed:_}),t=null),R()}})},JN=({segment:i,bytes:e,trackInfoFn:t,timingInfoFn:r,videoSegmentTimingInfoFn:n,audioSegmentTimingInfoFn:s,id3Fn:a,captionsFn:o,isEndOfTimeline:l,endedTimelineFn:u,dataFn:c,doneFn:h,onTransmuxerLog:m,triggerSegmentEventFn:g})=>{let y=new Uint8Array(e);if(Q8(y)){i.isFmp4=!0;const{tracks:_}=i.map,T={isFmp4:!0,hasVideo:!!_.video,hasAudio:!!_.audio};_.audio&&_.audio.codec&&_.audio.codec!=="enca"&&(T.audioCodec=_.audio.codec),_.video&&_.video.codec&&_.video.codec!=="encv"&&(T.videoCodec=_.video.codec),_.video&&_.audio&&(T.isMuxed=!0),t(i,T);const E=(w,D)=>{c(i,{data:y,type:T.hasAudio&&!T.isMuxed?"audio":"video"}),D&&D.length&&a(i,D),w&&w.length&&o(i,w),h(null,i,{})};l0({action:"probeMp4StartTime",timescales:i.map.timescales,data:y,transmuxer:i.transmuxer,callback:({data:w,startTime:D})=>{e=w.buffer,i.bytes=y=w,T.hasAudio&&!T.isMuxed&&r(i,"audio","start",D),T.hasVideo&&r(i,"video","start",D),l0({action:"probeEmsgID3",data:y,transmuxer:i.transmuxer,offset:D,callback:({emsgData:R,id3Frames:A})=>{if(e=R.buffer,i.bytes=y=R,!_.video||!R.byteLength||!i.transmuxer){E(void 0,A);return}l0({action:"pushMp4Captions",endAction:"mp4Captions",transmuxer:i.transmuxer,data:y,timescales:i.map.timescales,trackIds:[_.video.id],callback:L=>{e=L.data.buffer,i.bytes=y=L.data,L.logs.forEach(function(F){m(yi(F,{stream:"mp4CaptionParser"}))}),E(L.captions,A)}})}})}});return}if(!i.transmuxer){h(null,i,{});return}if(typeof i.container>"u"&&(i.container=Pp(y)),i.container!=="ts"&&i.container!=="aac"){t(i,{hasAudio:!1,hasVideo:!1}),h(null,i,{});return}dae({segment:i,bytes:e,trackInfoFn:t,timingInfoFn:r,videoSegmentTimingInfoFn:n,audioSegmentTimingInfoFn:s,id3Fn:a,captionsFn:o,isEndOfTimeline:l,endedTimelineFn:u,dataFn:c,doneFn:h,onTransmuxerLog:m,triggerSegmentEventFn:g})},ZN=function({id:i,key:e,encryptedBytes:t,decryptionWorker:r,segment:n,doneFn:s},a){const o=u=>{if(u.data.source===i){r.removeEventListener("message",o);const c=u.data.decrypted;a(new Uint8Array(c.bytes,c.byteOffset,c.byteLength))}};r.onerror=()=>{const u="An error occurred in the decryption worker",c=eh({segment:n}),h={message:u,metadata:{error:new Error(u),errorType:_e.Error.StreamingFailedToDecryptSegment,segmentInfo:c,keyInfo:{uri:n.key.resolvedUri||n.map.key.resolvedUri}}};s(h,n)},r.addEventListener("message",o);let l;e.bytes.slice?l=e.bytes.slice():l=new Uint32Array(Array.prototype.slice.call(e.bytes)),r.postMessage(NN({source:i,encrypted:t,key:l,iv:e.iv}),[t.buffer,l.buffer])},hae=({decryptionWorker:i,segment:e,trackInfoFn:t,timingInfoFn:r,videoSegmentTimingInfoFn:n,audioSegmentTimingInfoFn:s,id3Fn:a,captionsFn:o,isEndOfTimeline:l,endedTimelineFn:u,dataFn:c,doneFn:h,onTransmuxerLog:m,triggerSegmentEventFn:g})=>{g({type:"segmentdecryptionstart"}),ZN({id:e.requestId,key:e.key,encryptedBytes:e.encryptedBytes,decryptionWorker:i,segment:e,doneFn:h},y=>{e.bytes=y,g({type:"segmentdecryptioncomplete",segment:e}),JN({segment:e,bytes:e.bytes,trackInfoFn:t,timingInfoFn:r,videoSegmentTimingInfoFn:n,audioSegmentTimingInfoFn:s,id3Fn:a,captionsFn:o,isEndOfTimeline:l,endedTimelineFn:u,dataFn:c,doneFn:h,onTransmuxerLog:m,triggerSegmentEventFn:g})})},fae=({activeXhrs:i,decryptionWorker:e,trackInfoFn:t,timingInfoFn:r,videoSegmentTimingInfoFn:n,audioSegmentTimingInfoFn:s,id3Fn:a,captionsFn:o,isEndOfTimeline:l,endedTimelineFn:u,dataFn:c,doneFn:h,onTransmuxerLog:m,triggerSegmentEventFn:g})=>{let y=0,_=!1;return(T,E)=>{if(!_){if(T)return _=!0,jC(i),h(T,E);if(y+=1,y===i.length){const w=function(){if(E.encryptedBytes)return hae({decryptionWorker:e,segment:E,trackInfoFn:t,timingInfoFn:r,videoSegmentTimingInfoFn:n,audioSegmentTimingInfoFn:s,id3Fn:a,captionsFn:o,isEndOfTimeline:l,endedTimelineFn:u,dataFn:c,doneFn:h,onTransmuxerLog:m,triggerSegmentEventFn:g});JN({segment:E,bytes:E.bytes,trackInfoFn:t,timingInfoFn:r,videoSegmentTimingInfoFn:n,audioSegmentTimingInfoFn:s,id3Fn:a,captionsFn:o,isEndOfTimeline:l,endedTimelineFn:u,dataFn:c,doneFn:h,onTransmuxerLog:m,triggerSegmentEventFn:g})};if(E.endOfAllRequests=Date.now(),E.map&&E.map.encryptedBytes&&!E.map.bytes)return g({type:"segmentdecryptionstart",segment:E}),ZN({decryptionWorker:e,id:E.requestId+"-init",encryptedBytes:E.map.encryptedBytes,key:E.map.key,segment:E,doneFn:h},D=>{E.map.bytes=D,g({type:"segmentdecryptioncomplete",segment:E}),QN(E,R=>{if(R)return jC(i),h(R,E);w()})});w()}}}},pae=({loadendState:i,abortFn:e})=>t=>{t.target.aborted&&e&&!i.calledAbortFn&&(e(),i.calledAbortFn=!0)},mae=({segment:i,progressFn:e,trackInfoFn:t,timingInfoFn:r,videoSegmentTimingInfoFn:n,audioSegmentTimingInfoFn:s,id3Fn:a,captionsFn:o,isEndOfTimeline:l,endedTimelineFn:u,dataFn:c})=>h=>{if(!h.target.aborted)return i.stats=yi(i.stats,lae(h)),!i.stats.firstBytesReceivedAt&&i.stats.bytesReceived&&(i.stats.firstBytesReceivedAt=Date.now()),e(h,i)},gae=({xhr:i,xhrOptions:e,decryptionWorker:t,segment:r,abortFn:n,progressFn:s,trackInfoFn:a,timingInfoFn:o,videoSegmentTimingInfoFn:l,audioSegmentTimingInfoFn:u,id3Fn:c,captionsFn:h,isEndOfTimeline:m,endedTimelineFn:g,dataFn:y,doneFn:_,onTransmuxerLog:T,triggerSegmentEventFn:E})=>{const w=[],D=fae({activeXhrs:w,decryptionWorker:t,trackInfoFn:a,timingInfoFn:o,videoSegmentTimingInfoFn:l,audioSegmentTimingInfoFn:u,id3Fn:c,captionsFn:h,isEndOfTimeline:m,endedTimelineFn:g,dataFn:y,doneFn:_,onTransmuxerLog:T,triggerSegmentEventFn:E});if(r.key&&!r.key.bytes){const B=[r.key];r.map&&!r.map.bytes&&r.map.key&&r.map.key.resolvedUri===r.key.resolvedUri&&B.push(r.map.key);const M=yi(e,{uri:r.key.resolvedUri,responseType:"arraybuffer",requestType:"segment-key"}),k=yO(r,B,D,E),q={uri:r.key.resolvedUri};E({type:"segmentkeyloadstart",segment:r,keyInfo:q});const G=i(M,k);w.push(G)}if(r.map&&!r.map.bytes){if(r.map.key&&(!r.key||r.key.resolvedUri!==r.map.key.resolvedUri)){const G=yi(e,{uri:r.map.key.resolvedUri,responseType:"arraybuffer",requestType:"segment-key"}),H=yO(r,[r.map.key],D,E),re={uri:r.map.key.resolvedUri};E({type:"segmentkeyloadstart",segment:r,keyInfo:re});const se=i(G,H);w.push(se)}const M=yi(e,{uri:r.map.resolvedUri,responseType:"arraybuffer",headers:UC(r.map),requestType:"segment-media-initialization"}),k=uae({segment:r,finishProcessingFn:D,triggerSegmentEventFn:E});E({type:"segmentloadstart",segment:r});const q=i(M,k);w.push(q)}const R=yi(e,{uri:r.part&&r.part.resolvedUri||r.resolvedUri,responseType:"arraybuffer",headers:UC(r),requestType:"segment"}),A=cae({segment:r,finishProcessingFn:D,responseType:R.responseType,triggerSegmentEventFn:E});E({type:"segmentloadstart",segment:r});const L=i(R,A);L.addEventListener("progress",mae({segment:r,progressFn:s,trackInfoFn:a,timingInfoFn:o,videoSegmentTimingInfoFn:l,audioSegmentTimingInfoFn:u,id3Fn:c,captionsFn:h,isEndOfTimeline:m,endedTimelineFn:g,dataFn:y})),w.push(L);const F={};return w.forEach(B=>{B.addEventListener("loadend",pae({loadendState:F,abortFn:n}))}),()=>jC(w)},vae=Uo("CodecUtils"),yae=function(i){const e=i.attributes||{};if(e.CODECS)return Rn(e.CODECS)},e5=(i,e)=>{const t=e.attributes||{};return i&&i.mediaGroups&&i.mediaGroups.AUDIO&&t.AUDIO&&i.mediaGroups.AUDIO[t.AUDIO]},_ae=(i,e)=>{if(!e5(i,e))return!0;const t=e.attributes||{},r=i.mediaGroups.AUDIO[t.AUDIO];for(const n in r)if(!r[n].uri&&!r[n].playlists)return!0;return!1},M_=function(i){const e={};return i.forEach(({mediaType:t,type:r,details:n})=>{e[t]=e[t]||[],e[t].push($w(`${r}${n}`))}),Object.keys(e).forEach(function(t){if(e[t].length>1){vae(`multiple ${t} codecs found as attributes: ${e[t].join(", ")}. Setting playlist codecs to null so that we wait for mux.js to probe segments for real codecs.`),e[t]=null;return}e[t]=e[t][0]}),e},_O=function(i){let e=0;return i.audio&&e++,i.video&&e++,e},u0=function(i,e){const t=e.attributes||{},r=M_(yae(e)||[]);if(e5(i,e)&&!r.audio&&!_ae(i,e)){const n=M_(F8(i,t.AUDIO)||[]);n.audio&&(r.audio=n.audio)}return r},xv=Uo("PlaylistSelector"),xO=function(i){if(!i||!i.playlist)return;const e=i.playlist;return JSON.stringify({id:e.id,bandwidth:i.bandwidth,width:i.width,height:i.height,codecs:e.attributes&&e.attributes.CODECS||""})},F_=function(i,e){if(!i)return"";const t=X.getComputedStyle(i);return t?t[e]:""},Gf=function(i,e){const t=i.slice();i.sort(function(r,n){const s=e(r,n);return s===0?t.indexOf(r)-t.indexOf(n):s})},C2=function(i,e){let t,r;return i.attributes.BANDWIDTH&&(t=i.attributes.BANDWIDTH),t=t||X.Number.MAX_VALUE,e.attributes.BANDWIDTH&&(r=e.attributes.BANDWIDTH),r=r||X.Number.MAX_VALUE,t-r},xae=function(i,e){let t,r;return i.attributes.RESOLUTION&&i.attributes.RESOLUTION.width&&(t=i.attributes.RESOLUTION.width),t=t||X.Number.MAX_VALUE,e.attributes.RESOLUTION&&e.attributes.RESOLUTION.width&&(r=e.attributes.RESOLUTION.width),r=r||X.Number.MAX_VALUE,t===r&&i.attributes.BANDWIDTH&&e.attributes.BANDWIDTH?i.attributes.BANDWIDTH-e.attributes.BANDWIDTH:t-r};let t5=function(i,e,t,r,n,s){if(!i)return;const a={bandwidth:e,width:t,height:r,limitRenditionByPlayerDimensions:n};let o=i.playlists;Ea.isAudioOnly(i)&&(o=s.getAudioTrackPlaylists_(),a.audioOnly=!0);let l=o.map(A=>{let L;const F=A.attributes&&A.attributes.RESOLUTION&&A.attributes.RESOLUTION.width,B=A.attributes&&A.attributes.RESOLUTION&&A.attributes.RESOLUTION.height;return L=A.attributes&&A.attributes.BANDWIDTH,L=L||X.Number.MAX_VALUE,{bandwidth:L,width:F,height:B,playlist:A}});Gf(l,(A,L)=>A.bandwidth-L.bandwidth),l=l.filter(A=>!Ea.isIncompatible(A.playlist));let u=l.filter(A=>Ea.isEnabled(A.playlist));u.length||(u=l.filter(A=>!Ea.isDisabled(A.playlist)));const c=u.filter(A=>A.bandwidth*qn.BANDWIDTH_VARIANCE<e);let h=c[c.length-1];const m=c.filter(A=>A.bandwidth===h.bandwidth)[0];if(n===!1){const A=m||u[0]||l[0];if(A&&A.playlist){let L="sortedPlaylistReps";return m&&(L="bandwidthBestRep"),u[0]&&(L="enabledPlaylistReps"),xv(`choosing ${xO(A)} using ${L} with options`,a),A.playlist}return xv("could not choose a playlist with options",a),null}const g=c.filter(A=>A.width&&A.height);Gf(g,(A,L)=>A.width-L.width);const y=g.filter(A=>A.width===t&&A.height===r);h=y[y.length-1];const _=y.filter(A=>A.bandwidth===h.bandwidth)[0];let T,E,w;_||(T=g.filter(A=>A.width>t||A.height>r),E=T.filter(A=>A.width===T[0].width&&A.height===T[0].height),h=E[E.length-1],w=E.filter(A=>A.bandwidth===h.bandwidth)[0]);let D;if(s.leastPixelDiffSelector){const A=g.map(L=>(L.pixelDiff=Math.abs(L.width-t)+Math.abs(L.height-r),L));Gf(A,(L,F)=>L.pixelDiff===F.pixelDiff?F.bandwidth-L.bandwidth:L.pixelDiff-F.pixelDiff),D=A[0]}const R=D||w||_||m||u[0]||l[0];if(R&&R.playlist){let A="sortedPlaylistReps";return D?A="leastPixelDiffRep":w?A="resolutionPlusOneRep":_?A="resolutionBestRep":m?A="bandwidthBestRep":u[0]&&(A="enabledPlaylistReps"),xv(`choosing ${xO(R)} using ${A} with options`,a),R.playlist}return xv("could not choose a playlist with options",a),null};const TO=function(){let i=this.useDevicePixelRatio&&X.devicePixelRatio||1;return isNaN(this.customPixelRatio)||(i=this.customPixelRatio),t5(this.playlists.main,this.systemBandwidth,parseInt(F_(this.tech_.el(),"width"),10)*i,parseInt(F_(this.tech_.el(),"height"),10)*i,this.limitRenditionByPlayerDimensions,this.playlistController_)},Tae=function(i){let e=-1,t=-1;if(i<0||i>1)throw new Error("Moving average bandwidth decay must be between 0 and 1.");return function(){let r=this.useDevicePixelRatio&&X.devicePixelRatio||1;return isNaN(this.customPixelRatio)||(r=this.customPixelRatio),e<0&&(e=this.systemBandwidth,t=this.systemBandwidth),this.systemBandwidth>0&&this.systemBandwidth!==t&&(e=i*this.systemBandwidth+(1-i)*e,t=this.systemBandwidth),t5(this.playlists.main,e,parseInt(F_(this.tech_.el(),"width"),10)*r,parseInt(F_(this.tech_.el(),"height"),10)*r,this.limitRenditionByPlayerDimensions,this.playlistController_)}},bae=function(i){const{main:e,currentTime:t,bandwidth:r,duration:n,segmentDuration:s,timeUntilRebuffer:a,currentTimeline:o,syncController:l}=i,u=e.playlists.filter(y=>!Ea.isIncompatible(y));let c=u.filter(Ea.isEnabled);c.length||(c=u.filter(y=>!Ea.isDisabled(y)));const m=c.filter(Ea.hasAttribute.bind(null,"BANDWIDTH")).map(y=>{const T=l.getSyncPoint(y,n,o,t)?1:2,w=Ea.estimateSegmentRequestTime(s,r,y)*T-a;return{playlist:y,rebufferingImpact:w}}),g=m.filter(y=>y.rebufferingImpact<=0);return Gf(g,(y,_)=>C2(_.playlist,y.playlist)),g.length?g[0]:(Gf(m,(y,_)=>y.rebufferingImpact-_.rebufferingImpact),m[0]||null)},Sae=function(){const i=this.playlists.main.playlists.filter(Ea.isEnabled);return Gf(i,(t,r)=>C2(t,r)),i.filter(t=>!!u0(this.playlists.main,t).video)[0]||null},Cae=i=>{let e=0,t;return i.bytes&&(t=new Uint8Array(i.bytes),i.segments.forEach(r=>{t.set(r,e),e+=r.byteLength})),t};function r5(i){try{return new URL(i).pathname.split("/").slice(-2).join("/")}catch{return""}}const Eae=function(i,e,t){if(!i[t]){e.trigger({type:"usage",name:"vhs-608"});let r=t;/^cc708_/.test(t)&&(r="SERVICE"+t.split("_")[1]);const n=e.textTracks().getTrackById(r);if(n)i[t]=n;else{const s=e.options_.vhs&&e.options_.vhs.captionServices||{};let a=t,o=t,l=!1;const u=s[r];u&&(a=u.label,o=u.language,l=u.default),i[t]=e.addRemoteTextTrack({kind:"captions",id:r,default:l,label:a,language:o},!1).track}}},wae=function({inbandTextTracks:i,captionArray:e,timestampOffset:t}){if(!e)return;const r=X.WebKitDataCue||X.VTTCue;e.forEach(n=>{const s=n.stream;n.content?n.content.forEach(a=>{const o=new r(n.startTime+t,n.endTime+t,a.text);o.line=a.line,o.align="left",o.position=a.position,o.positionAlign="line-left",i[s].addCue(o)}):i[s].addCue(new r(n.startTime+t,n.endTime+t,n.text))})},kae=function(i){Object.defineProperties(i.frame,{id:{get(){return _e.log.warn("cue.frame.id is deprecated. Use cue.value.key instead."),i.value.key}},value:{get(){return _e.log.warn("cue.frame.value is deprecated. Use cue.value.data instead."),i.value.data}},privateData:{get(){return _e.log.warn("cue.frame.privateData is deprecated. Use cue.value.data instead."),i.value.data}}})},Aae=({inbandTextTracks:i,metadataArray:e,timestampOffset:t,videoDuration:r})=>{if(!e)return;const n=X.WebKitDataCue||X.VTTCue,s=i.metadataTrack_;if(!s||(e.forEach(c=>{const h=c.cueTime+t;typeof h!="number"||X.isNaN(h)||h<0||!(h<1/0)||!c.frames||!c.frames.length||c.frames.forEach(m=>{const g=new n(h,h,m.value||m.url||m.data||"");g.frame=m,g.value=m,kae(g),s.addCue(g)})}),!s.cues||!s.cues.length))return;const a=s.cues,o=[];for(let c=0;c<a.length;c++)a[c]&&o.push(a[c]);const l=o.reduce((c,h)=>{const m=c[h.startTime]||[];return m.push(h),c[h.startTime]=m,c},{}),u=Object.keys(l).sort((c,h)=>Number(c)-Number(h));u.forEach((c,h)=>{const m=l[c],g=isFinite(r)?r:c,y=Number(u[h+1])||g;m.forEach(_=>{_.endTime=y})})},Iae={id:"ID",class:"CLASS",startDate:"START-DATE",duration:"DURATION",endDate:"END-DATE",endOnNext:"END-ON-NEXT",plannedDuration:"PLANNED-DURATION",scte35Out:"SCTE35-OUT",scte35In:"SCTE35-IN"},Dae=new Set(["id","class","startDate","duration","endDate","endOnNext","startTime","endTime","processDateRange"]),Pae=({inbandTextTracks:i,dateRanges:e})=>{const t=i.metadataTrack_;if(!t)return;const r=X.WebKitDataCue||X.VTTCue;e.forEach(n=>{for(const s of Object.keys(n)){if(Dae.has(s))continue;const a=new r(n.startTime,n.endTime,"");a.id=n.id,a.type="com.apple.quicktime.HLS",a.value={key:Iae[s],data:n[s]},(s==="scte35Out"||s==="scte35In")&&(a.value.data=new Uint8Array(a.value.data.match(/[\da-f]{2}/gi)).buffer),t.addCue(a)}n.processDateRange()})},bO=(i,e,t)=>{i.metadataTrack_||(i.metadataTrack_=t.addRemoteTextTrack({kind:"metadata",label:"Timed Metadata"},!1).track,_e.browser.IS_ANY_SAFARI||(i.metadataTrack_.inBandMetadataTrackDispatchType=e))},Km=function(i,e,t){let r,n;if(t&&t.cues)for(r=t.cues.length;r--;)n=t.cues[r],n.startTime>=i&&n.endTime<=e&&t.removeCue(n)},Rae=function(i){const e=i.cues;if(!e)return;const t={};for(let r=e.length-1;r>=0;r--){const n=e[r],s=`${n.startTime}-${n.endTime}-${n.text}`;t[s]?i.removeCue(n):t[s]=n}},Lae=(i,e,t)=>{if(typeof e>"u"||e===null||!i.length)return[];const r=Math.ceil((e-t+3)*Aa.ONE_SECOND_IN_TS);let n;for(n=0;n<i.length&&!(i[n].pts>r);n++);return i.slice(n)},Oae=(i,e,t)=>{if(!e.length)return i;if(t)return e.slice();const r=e[0].pts;let n=0;for(n;n<i.length&&!(i[n].pts>=r);n++);return i.slice(0,n).concat(e)},Mae=(i,e,t,r)=>{const n=Math.ceil((e-r)*Aa.ONE_SECOND_IN_TS),s=Math.ceil((t-r)*Aa.ONE_SECOND_IN_TS),a=i.slice();let o=i.length;for(;o--&&!(i[o].pts<=s););if(o===-1)return a;let l=o+1;for(;l--&&!(i[l].pts<=n););return l=Math.max(l,0),a.splice(l,o-l+1),a},Fae=function(i,e){if(!i&&!e||!i&&e||i&&!e)return!1;if(i===e)return!0;const t=Object.keys(i).sort(),r=Object.keys(e).sort();if(t.length!==r.length)return!1;for(let n=0;n<t.length;n++){const s=t[n];if(s!==r[n]||i[s]!==e[s])return!1}return!0},Bae=function(i,e,t){e=e||[];const r=[];let n=0;for(let s=0;s<e.length;s++){const a=e[s];if(i===a.timeline&&(r.push(s),n+=a.duration,n>t))return s}return r.length===0?0:r[r.length-1]},Pm=1,Nae=500,SO=i=>typeof i=="number"&&isFinite(i),Tv=1/60,Uae=(i,e,t)=>i!=="main"||!e||!t?null:!t.hasAudio&&!t.hasVideo?"Neither audio nor video found in segment.":e.hasVideo&&!t.hasVideo?"Only audio found in segment when we expected video. We can't switch to audio only from a stream that had video. To get rid of this message, please add codec information to the manifest.":!e.hasVideo&&t.hasVideo?"Video found in segment when we expected only audio. We can't switch to a stream with video from an audio only stream. To get rid of this message, please add codec information to the manifest.":null,$ae=(i,e,t)=>{let r=e-qn.BACK_BUFFER_LENGTH;i.length&&(r=Math.max(r,i.start(0)));const n=e-t;return Math.min(n,r)},ff=i=>{const{startOfSegment:e,duration:t,segment:r,part:n,playlist:{mediaSequence:s,id:a,segments:o=[]},mediaIndex:l,partIndex:u,timeline:c}=i,h=o.length-1;let m="mediaIndex/partIndex increment";i.getMediaInfoForTime?m=`getMediaInfoForTime (${i.getMediaInfoForTime})`:i.isSyncRequest&&(m="getSyncSegmentCandidate (isSyncRequest)"),i.independent&&(m+=` with independent ${i.independent}`);const g=typeof u=="number",y=i.segment.uri?"segment":"pre-segment",_=g?bN({preloadSegment:r})-1:0;return`${y} [${s+l}/${s+h}]`+(g?` part [${u}/${_}]`:"")+` segment start/end [${r.start} => ${r.end}]`+(g?` part start/end [${n.start} => ${n.end}]`:"")+` startOfSegment [${e}] duration [${t}] timeline [${c}] selected by [${m}] playlist [${a}]`},CO=i=>`${i}TimingInfo`,jae=({segmentTimeline:i,currentTimeline:e,startOfSegment:t,buffered:r,overrideCheck:n})=>!n&&i===e?null:i<e?t:r.length?r.end(r.length-1):t,zC=({timelineChangeController:i,currentTimeline:e,segmentTimeline:t,loaderType:r,audioDisabled:n})=>{if(e===t)return!1;if(r==="audio"){const s=i.lastTimelineChange({type:"main"});return!s||s.to!==t}if(r==="main"&&n){const s=i.pendingTimelineChange({type:"audio"});return!(s&&s.to===t)}return!1},zae=i=>{if(!i)return!1;const e=i.pendingTimelineChange({type:"audio"}),t=i.pendingTimelineChange({type:"main"}),r=e&&t,n=r&&e.to!==t.to;return!!(r&&e.from!==-1&&t.from!==-1&&n)},Hae=i=>{i&&(i.pause(),i.resetEverything(),i.load())},Vae=i=>{const e=i.timelineChangeController_.pendingTimelineChange({type:"audio"}),t=i.timelineChangeController_.pendingTimelineChange({type:"main"});return e&&t&&e.to<t.to},Wc=i=>{const e=i.pendingSegment_;if(!e)return;if(zC({timelineChangeController:i.timelineChangeController_,currentTimeline:i.currentTimeline_,segmentTimeline:e.timeline,loaderType:i.loaderType_,audioDisabled:i.audioDisabled_})&&zae(i.timelineChangeController_)){if(Vae(i)){i.timelineChangeController_.trigger("audioTimelineBehind");return}Hae(i)}},qae=i=>{let e=0;return["video","audio"].forEach(function(t){const r=i[`${t}TimingInfo`];if(!r)return;const{start:n,end:s}=r;let a;typeof n=="bigint"||typeof s=="bigint"?a=X.BigInt(s)-X.BigInt(n):typeof n=="number"&&typeof s=="number"&&(a=s-n),typeof a<"u"&&a>e&&(e=a)}),typeof e=="bigint"&&e<Number.MAX_SAFE_INTEGER&&(e=Number(e)),e},EO=({segmentDuration:i,maxDuration:e})=>i?Math.round(i)>e+Ql:!1,Wae=(i,e)=>{if(e!=="hls")return null;const t=qae({audioTimingInfo:i.audioTimingInfo,videoTimingInfo:i.videoTimingInfo});if(!t)return null;const r=i.playlist.targetDuration,n=EO({segmentDuration:t,maxDuration:r*2}),s=EO({segmentDuration:t,maxDuration:r}),a=`Segment with index ${i.mediaIndex} from playlist ${i.playlist.id} has a duration of ${t} when the reported duration is ${i.duration} and the target duration is ${r}. For HLS content, a duration in excess of the target duration may result in playback issues. See the HLS specification section on EXT-X-TARGETDURATION for more details: https://tools.ietf.org/html/draft-pantos-http-live-streaming-23#section-4.3.3.1`;return n||s?{severity:n?"warn":"info",message:a}:null},eh=({type:i,segment:e})=>{if(!e)return;const t=!!(e.key||e.map&&e.map.ke),r=!!(e.map&&!e.map.bytes),n=e.startOfSegment===void 0?e.start:e.startOfSegment;return{type:i||e.type,uri:e.resolvedUri||e.uri,start:n,duration:e.duration,isEncrypted:t,isMediaInitialization:r}};let HC=class extends _e.EventTarget{constructor(e,t={}){if(super(),!e)throw new TypeError("Initialization settings are required");if(typeof e.currentTime!="function")throw new TypeError("No currentTime getter specified");if(!e.mediaSource)throw new TypeError("No MediaSource specified");this.bandwidth=e.bandwidth,this.throughput={rate:0,count:0},this.roundTrip=NaN,this.resetStats_(),this.mediaIndex=null,this.partIndex=null,this.hasPlayed_=e.hasPlayed,this.currentTime_=e.currentTime,this.seekable_=e.seekable,this.seeking_=e.seeking,this.duration_=e.duration,this.mediaSource_=e.mediaSource,this.vhs_=e.vhs,this.loaderType_=e.loaderType,this.currentMediaInfo_=void 0,this.startingMediaInfo_=void 0,this.segmentMetadataTrack_=e.segmentMetadataTrack,this.goalBufferLength_=e.goalBufferLength,this.sourceType_=e.sourceType,this.sourceUpdater_=e.sourceUpdater,this.inbandTextTracks_=e.inbandTextTracks,this.state_="INIT",this.timelineChangeController_=e.timelineChangeController,this.shouldSaveSegmentTimingInfo_=!0,this.parse708captions_=e.parse708captions,this.useDtsForTimestampOffset_=e.useDtsForTimestampOffset,this.captionServices_=e.captionServices,this.exactManifestTimings=e.exactManifestTimings,this.addMetadataToTextTrack=e.addMetadataToTextTrack,this.checkBufferTimeout_=null,this.error_=void 0,this.currentTimeline_=-1,this.shouldForceTimestampOffsetAfterResync_=!1,this.pendingSegment_=null,this.xhrOptions_=null,this.pendingSegments_=[],this.audioDisabled_=!1,this.isPendingTimestampOffset_=!1,this.gopBuffer_=[],this.timeMapping_=0,this.safeAppend_=!1,this.appendInitSegment_={audio:!0,video:!0},this.playlistOfLastInitSegment_={audio:null,video:null},this.callQueue_=[],this.loadQueue_=[],this.metadataQueue_={id3:[],caption:[]},this.waitingOnRemove_=!1,this.quotaExceededErrorRetryTimeout_=null,this.activeInitSegmentId_=null,this.initSegments_={},this.cacheEncryptionKeys_=e.cacheEncryptionKeys,this.keyCache_={},this.decrypter_=e.decrypter,this.syncController_=e.syncController,this.syncPoint_={segmentIndex:0,time:0},this.transmuxer_=this.createTransmuxer_(),this.triggerSyncInfoUpdate_=()=>this.trigger("syncinfoupdate"),this.syncController_.on("syncinfoupdate",this.triggerSyncInfoUpdate_),this.mediaSource_.addEventListener("sourceopen",()=>{this.isEndOfStream_()||(this.ended_=!1)}),this.fetchAtBuffer_=!1,this.logger_=Uo(`SegmentLoader[${this.loaderType_}]`),Object.defineProperty(this,"state",{get(){return this.state_},set(r){r!==this.state_&&(this.logger_(`${this.state_} -> ${r}`),this.state_=r,this.trigger("statechange"))}}),this.sourceUpdater_.on("ready",()=>{this.hasEnoughInfoToAppend_()?this.processCallQueue_():Wc(this)}),this.sourceUpdater_.on("codecschange",r=>{this.trigger(Jt({type:"codecschange"},r))}),this.loaderType_==="main"&&this.timelineChangeController_.on("pendingtimelinechange",()=>{this.hasEnoughInfoToAppend_()?this.processCallQueue_():Wc(this)}),this.loaderType_==="audio"&&this.timelineChangeController_.on("timelinechange",r=>{this.trigger(Jt({type:"timelinechange"},r)),this.hasEnoughInfoToLoad_()?this.processLoadQueue_():Wc(this),this.hasEnoughInfoToAppend_()?this.processCallQueue_():Wc(this)})}get mediaSequenceSync_(){return this.syncController_.getMediaSequenceSync(this.loaderType_)}createTransmuxer_(){return e1.createTransmuxer({remux:!1,alignGopsAtEnd:this.safeAppend_,keepOriginalTimestamps:!0,parse708captions:this.parse708captions_,captionServices:this.captionServices_})}resetStats_(){this.mediaBytesTransferred=0,this.mediaRequests=0,this.mediaRequestsAborted=0,this.mediaRequestsTimedout=0,this.mediaRequestsErrored=0,this.mediaTransferDuration=0,this.mediaSecondsLoaded=0,this.mediaAppends=0}dispose(){this.trigger("dispose"),this.state="DISPOSED",this.pause(),this.abort_(),this.transmuxer_&&this.transmuxer_.terminate(),this.resetStats_(),this.checkBufferTimeout_&&X.clearTimeout(this.checkBufferTimeout_),this.syncController_&&this.triggerSyncInfoUpdate_&&this.syncController_.off("syncinfoupdate",this.triggerSyncInfoUpdate_),this.off()}setAudio(e){this.audioDisabled_=!e,e?this.appendInitSegment_.audio=!0:this.sourceUpdater_.removeAudio(0,this.duration_())}abort(){if(this.state!=="WAITING"){this.pendingSegment_&&(this.pendingSegment_=null);return}this.abort_(),this.state="READY",this.paused()||this.monitorBuffer_()}abort_(){this.pendingSegment_&&this.pendingSegment_.abortRequests&&this.pendingSegment_.abortRequests(),this.pendingSegment_=null,this.callQueue_=[],this.loadQueue_=[],this.metadataQueue_.id3=[],this.metadataQueue_.caption=[],this.timelineChangeController_.clearPendingTimelineChange(this.loaderType_),this.waitingOnRemove_=!1,X.clearTimeout(this.quotaExceededErrorRetryTimeout_),this.quotaExceededErrorRetryTimeout_=null}checkForAbort_(e){return this.state==="APPENDING"&&!this.pendingSegment_?(this.state="READY",!0):!this.pendingSegment_||this.pendingSegment_.requestId!==e}error(e){return typeof e<"u"&&(this.logger_("error occurred:",e),this.error_=e),this.pendingSegment_=null,this.error_}endOfStream(){this.ended_=!0,this.transmuxer_&&e1.reset(this.transmuxer_),this.gopBuffer_.length=0,this.pause(),this.trigger("ended")}buffered_(){const e=this.getMediaInfo_();if(!this.sourceUpdater_||!e)return hs();if(this.loaderType_==="main"){const{hasAudio:t,hasVideo:r,isMuxed:n}=e;if(r&&t&&!this.audioDisabled_&&!n)return this.sourceUpdater_.buffered();if(r)return this.sourceUpdater_.videoBuffered()}return this.sourceUpdater_.audioBuffered()}initSegmentForMap(e,t=!1){if(!e)return null;const r=O_(e);let n=this.initSegments_[r];return t&&!n&&e.bytes&&(this.initSegments_[r]=n={resolvedUri:e.resolvedUri,byterange:e.byterange,bytes:e.bytes,tracks:e.tracks,timescales:e.timescales}),n||e}segmentKey(e,t=!1){if(!e)return null;const r=UN(e);let n=this.keyCache_[r];this.cacheEncryptionKeys_&&t&&!n&&e.bytes&&(this.keyCache_[r]=n={resolvedUri:e.resolvedUri,bytes:e.bytes});const s={resolvedUri:(n||e).resolvedUri};return n&&(s.bytes=n.bytes),s}couldBeginLoading_(){return this.playlist_&&!this.paused()}load(){if(this.monitorBuffer_(),!!this.playlist_){if(this.state==="INIT"&&this.couldBeginLoading_())return this.init_();!this.couldBeginLoading_()||this.state!=="READY"&&this.state!=="INIT"||(this.state="READY")}}init_(){return this.state="READY",this.resetEverything(),this.monitorBuffer_()}playlist(e,t={}){if(!e)return;const r=this.playlist_,n=this.pendingSegment_;this.playlist_=e,this.xhrOptions_=t,this.state==="INIT"&&(e.syncInfo={mediaSequence:e.mediaSequence,time:0},this.loaderType_==="main"&&this.syncController_.setDateTimeMappingForStart(e));let s=null;if(r&&(r.id?s=r.id:r.uri&&(s=r.uri)),this.logger_(`playlist update [${s} => ${e.id||e.uri}]`),this.mediaSequenceSync_&&(this.mediaSequenceSync_.update(e,this.currentTime_()),this.logger_(`Playlist update:
currentTime: ${this.currentTime_()}
bufferedEnd: ${JS(this.buffered_())}
`,this.mediaSequenceSync_.diagnostics)),this.trigger("syncinfoupdate"),this.state==="INIT"&&this.couldBeginLoading_())return this.init_();if(!r||r.uri!==e.uri){this.mediaIndex!==null&&(!e.endList&&typeof e.partTargetDuration=="number"?this.resetLoader():this.resyncLoader()),this.currentMediaInfo_=void 0,this.trigger("playlistupdate");return}const a=e.mediaSequence-r.mediaSequence;if(this.logger_(`live window shift [${a}]`),this.mediaIndex!==null)if(this.mediaIndex-=a,this.mediaIndex<0)this.mediaIndex=null,this.partIndex=null;else{const o=this.playlist_.segments[this.mediaIndex];if(this.partIndex&&(!o.parts||!o.parts.length||!o.parts[this.partIndex])){const l=this.mediaIndex;this.logger_(`currently processing part (index ${this.partIndex}) no longer exists.`),this.resetLoader(),this.mediaIndex=l}}n&&(n.mediaIndex-=a,n.mediaIndex<0?(n.mediaIndex=null,n.partIndex=null):(n.mediaIndex>=0&&(n.segment=e.segments[n.mediaIndex]),n.partIndex>=0&&n.segment.parts&&(n.part=n.segment.parts[n.partIndex]))),this.syncController_.saveExpiredSegmentInfo(r,e)}pause(){this.checkBufferTimeout_&&(X.clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=null)}paused(){return this.checkBufferTimeout_===null}resetEverything(e){this.ended_=!1,this.activeInitSegmentId_=null,this.appendInitSegment_={audio:!0,video:!0},this.resetLoader(),this.remove(0,1/0,e),this.transmuxer_&&(this.transmuxer_.postMessage({action:"clearAllMp4Captions"}),this.transmuxer_.postMessage({action:"reset"}))}resetLoader(){this.fetchAtBuffer_=!1,this.mediaSequenceSync_&&this.mediaSequenceSync_.resetAppendedStatus(),this.resyncLoader()}resyncLoader(){this.transmuxer_&&e1.reset(this.transmuxer_),this.mediaIndex=null,this.partIndex=null,this.syncPoint_=null,this.isPendingTimestampOffset_=!1;const e=this.currentMediaInfo_&&this.currentMediaInfo_.isFmp4;this.sourceType_==="hls"&&!e&&(this.shouldForceTimestampOffsetAfterResync_=!0),this.callQueue_=[],this.loadQueue_=[],this.metadataQueue_.id3=[],this.metadataQueue_.caption=[],this.abort(),this.transmuxer_&&this.transmuxer_.postMessage({action:"clearParsedMp4Captions"})}remove(e,t,r=()=>{},n=!1){if(t===1/0&&(t=this.duration_()),t<=e){this.logger_("skipping remove because end ${end} is <= start ${start}");return}if(!this.sourceUpdater_||!this.getMediaInfo_()){this.logger_("skipping remove because no source updater or starting media info");return}let s=1;const a=()=>{s--,s===0&&r()};(n||!this.audioDisabled_)&&(s++,this.sourceUpdater_.removeAudio(e,t,a)),(n||this.loaderType_==="main")&&(this.gopBuffer_=Mae(this.gopBuffer_,e,t,this.timeMapping_),s++,this.sourceUpdater_.removeVideo(e,t,a));for(const o in this.inbandTextTracks_)Km(e,t,this.inbandTextTracks_[o]);Km(e,t,this.segmentMetadataTrack_),a()}monitorBuffer_(){this.checkBufferTimeout_&&X.clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=X.setTimeout(this.monitorBufferTick_.bind(this),1)}monitorBufferTick_(){this.state==="READY"&&this.fillBuffer_(),this.checkBufferTimeout_&&X.clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=X.setTimeout(this.monitorBufferTick_.bind(this),Nae)}fillBuffer_(){if(this.sourceUpdater_.updating())return;const e=this.chooseNextRequest_();if(!e)return;const t={segmentInfo:eh({type:this.loaderType_,segment:e})};this.trigger({type:"segmentselected",metadata:t}),typeof e.timestampOffset=="number"&&(this.isPendingTimestampOffset_=!1,this.timelineChangeController_.pendingTimelineChange({type:this.loaderType_,from:this.currentTimeline_,to:e.timeline})),this.loadSegment_(e)}isEndOfStream_(e=this.mediaIndex,t=this.playlist_,r=this.partIndex){if(!t||!this.mediaSource_)return!1;const n=typeof e=="number"&&t.segments[e],s=e+1===t.segments.length,a=!n||!n.parts||r+1===n.parts.length;return t.endList&&this.mediaSource_.readyState==="open"&&s&&a}chooseNextRequest_(){const e=this.buffered_(),t=JS(e)||0,r=_2(e,this.currentTime_()),n=!this.hasPlayed_()&&r>=1,s=r>=this.goalBufferLength_(),a=this.playlist_.segments;if(!a.length||n||s)return null;this.syncPoint_=this.syncPoint_||this.syncController_.getSyncPoint(this.playlist_,this.duration_(),this.currentTimeline_,this.currentTime_(),this.loaderType_);const o={partIndex:null,mediaIndex:null,startOfSegment:null,playlist:this.playlist_,isSyncRequest:!this.syncPoint_};if(o.isSyncRequest)o.mediaIndex=Bae(this.currentTimeline_,a,t),this.logger_(`choose next request. Can not find sync point. Fallback to media Index: ${o.mediaIndex}`);else if(this.mediaIndex!==null){const m=a[this.mediaIndex],g=typeof this.partIndex=="number"?this.partIndex:-1;o.startOfSegment=m.end?m.end:t,m.parts&&m.parts[g+1]?(o.mediaIndex=this.mediaIndex,o.partIndex=g+1):o.mediaIndex=this.mediaIndex+1}else{let m,g,y;const _=this.fetchAtBuffer_?t:this.currentTime_();if(this.mediaSequenceSync_&&this.logger_(`chooseNextRequest_ request after Quality Switch:
For TargetTime: ${_}.
CurrentTime: ${this.currentTime_()}
BufferedEnd: ${t}
Fetch At Buffer: ${this.fetchAtBuffer_}
`,this.mediaSequenceSync_.diagnostics),this.mediaSequenceSync_&&this.mediaSequenceSync_.isReliable){const T=this.getSyncInfoFromMediaSequenceSync_(_);if(!T){const E="No sync info found while using media sequence sync";return this.error({message:E,metadata:{errorType:_e.Error.StreamingFailedToSelectNextSegment,error:new Error(E)}}),this.logger_("chooseNextRequest_ - no sync info found using media sequence sync"),null}this.logger_(`chooseNextRequest_ mediaSequence syncInfo (${T.start} --> ${T.end})`),m=T.segmentIndex,g=T.partIndex,y=T.start}else{this.logger_("chooseNextRequest_ - fallback to a regular segment selection algorithm, based on a syncPoint.");const T=Ea.getMediaInfoForTime({exactManifestTimings:this.exactManifestTimings,playlist:this.playlist_,currentTime:_,startingPartIndex:this.syncPoint_.partIndex,startingSegmentIndex:this.syncPoint_.segmentIndex,startTime:this.syncPoint_.time});m=T.segmentIndex,g=T.partIndex,y=T.startTime}o.getMediaInfoForTime=this.fetchAtBuffer_?`bufferedEnd ${_}`:`currentTime ${_}`,o.mediaIndex=m,o.startOfSegment=y,o.partIndex=g,this.logger_(`choose next request. Playlist switched and we have a sync point. Media Index: ${o.mediaIndex} `)}const l=a[o.mediaIndex];let u=l&&typeof o.partIndex=="number"&&l.parts&&l.parts[o.partIndex];if(!l||typeof o.partIndex=="number"&&!u)return null;typeof o.partIndex!="number"&&l.parts&&(o.partIndex=0,u=l.parts[0]);const c=this.vhs_.playlists&&this.vhs_.playlists.main&&this.vhs_.playlists.main.independentSegments||this.playlist_.independentSegments;if(!r&&u&&!c&&!u.independent)if(o.partIndex===0){const m=a[o.mediaIndex-1],g=m.parts&&m.parts.length&&m.parts[m.parts.length-1];g&&g.independent&&(o.mediaIndex-=1,o.partIndex=m.parts.length-1,o.independent="previous segment")}else l.parts[o.partIndex-1].independent&&(o.partIndex-=1,o.independent="previous part");const h=this.mediaSource_&&this.mediaSource_.readyState==="ended";return o.mediaIndex>=a.length-1&&h&&!this.seeking_()?null:(this.shouldForceTimestampOffsetAfterResync_&&(this.shouldForceTimestampOffsetAfterResync_=!1,o.forceTimestampOffset=!0,this.logger_("choose next request. Force timestamp offset after loader resync")),this.generateSegmentInfo_(o))}getSyncInfoFromMediaSequenceSync_(e){if(!this.mediaSequenceSync_)return null;const t=Math.max(e,this.mediaSequenceSync_.start);e!==t&&this.logger_(`getSyncInfoFromMediaSequenceSync_. Pulled target time from ${e} to ${t}`);const r=this.mediaSequenceSync_.getSyncInfoForTime(t);if(!r)return null;if(!r.isAppended)return r;const n=this.mediaSequenceSync_.getSyncInfoForTime(r.end);return n?(n.isAppended&&this.logger_("getSyncInfoFromMediaSequenceSync_: We encounter unexpected scenario where next media sequence sync info is also appended!"),n):null}generateSegmentInfo_(e){const{independent:t,playlist:r,mediaIndex:n,startOfSegment:s,isSyncRequest:a,partIndex:o,forceTimestampOffset:l,getMediaInfoForTime:u}=e,c=r.segments[n],h=typeof o=="number"&&c.parts[o],m={requestId:"segment-loader-"+Math.random(),uri:h&&h.resolvedUri||c.resolvedUri,mediaIndex:n,partIndex:h?o:null,isSyncRequest:a,startOfSegment:s,playlist:r,bytes:null,encryptedBytes:null,timestampOffset:null,timeline:c.timeline,duration:h&&h.duration||c.duration,segment:c,part:h,byteLength:0,transmuxer:this.transmuxer_,getMediaInfoForTime:u,independent:t},g=typeof l<"u"?l:this.isPendingTimestampOffset_;m.timestampOffset=this.timestampOffsetForSegment_({segmentTimeline:c.timeline,currentTimeline:this.currentTimeline_,startOfSegment:s,buffered:this.buffered_(),overrideCheck:g});const y=JS(this.sourceUpdater_.audioBuffered());return typeof y=="number"&&(m.audioAppendStart=y-this.sourceUpdater_.audioTimestampOffset()),this.sourceUpdater_.videoBuffered().length&&(m.gopsToAlignWith=Lae(this.gopBuffer_,this.currentTime_()-this.sourceUpdater_.videoTimestampOffset(),this.timeMapping_)),m}timestampOffsetForSegment_(e){return jae(e)}earlyAbortWhenNeeded_(e){if(this.vhs_.tech_.paused()||!this.xhrOptions_.timeout||!this.playlist_.attributes.BANDWIDTH||Date.now()-(e.firstBytesReceivedAt||Date.now())<1e3)return;const t=this.currentTime_(),r=e.bandwidth,n=this.pendingSegment_.duration,s=Ea.estimateSegmentRequestTime(n,r,this.playlist_,e.bytesReceived),a=cse(this.buffered_(),t,this.vhs_.tech_.playbackRate())-1;if(s<=a)return;const o=bae({main:this.vhs_.playlists.main,currentTime:t,bandwidth:r,duration:this.duration_(),segmentDuration:n,timeUntilRebuffer:a,currentTimeline:this.currentTimeline_,syncController:this.syncController_});if(!o)return;const u=s-a-o.rebufferingImpact;let c=.5;a<=Ql&&(c=1),!(!o.playlist||o.playlist.uri===this.playlist_.uri||u<c)&&(this.bandwidth=o.playlist.attributes.BANDWIDTH*qn.BANDWIDTH_VARIANCE+1,this.trigger("earlyabort"))}handleAbort_(e){this.logger_(`Aborting ${ff(e)}`),this.mediaRequestsAborted+=1}handleProgress_(e,t){this.earlyAbortWhenNeeded_(t.stats),!this.checkForAbort_(t.requestId)&&this.trigger("progress")}handleTrackInfo_(e,t){const{hasAudio:r,hasVideo:n}=t,s={segmentInfo:eh({type:this.loaderType_,segment:e}),trackInfo:{hasAudio:r,hasVideo:n}};this.trigger({type:"segmenttransmuxingtrackinfoavailable",metadata:s}),this.earlyAbortWhenNeeded_(e.stats),!this.checkForAbort_(e.requestId)&&(this.checkForIllegalMediaSwitch(t)||(t=t||{},Fae(this.currentMediaInfo_,t)||(this.appendInitSegment_={audio:!0,video:!0},this.startingMediaInfo_=t,this.currentMediaInfo_=t,this.logger_("trackinfo update",t),this.trigger("trackinfo")),!this.checkForAbort_(e.requestId)&&(this.pendingSegment_.trackInfo=t,this.hasEnoughInfoToAppend_()?this.processCallQueue_():Wc(this))))}handleTimingInfo_(e,t,r,n){if(this.earlyAbortWhenNeeded_(e.stats),this.checkForAbort_(e.requestId))return;const s=this.pendingSegment_,a=CO(t);s[a]=s[a]||{},s[a][r]=n,this.logger_(`timinginfo: ${t} - ${r} - ${n}`),this.hasEnoughInfoToAppend_()?this.processCallQueue_():Wc(this)}handleCaptions_(e,t){if(this.earlyAbortWhenNeeded_(e.stats),this.checkForAbort_(e.requestId))return;if(t.length===0){this.logger_("SegmentLoader received no captions from a caption event");return}if(!this.pendingSegment_.hasAppendedData_){this.metadataQueue_.caption.push(this.handleCaptions_.bind(this,e,t));return}const n=this.sourceUpdater_.videoTimestampOffset()===null?this.sourceUpdater_.audioTimestampOffset():this.sourceUpdater_.videoTimestampOffset(),s={};t.forEach(a=>{s[a.stream]=s[a.stream]||{startTime:1/0,captions:[],endTime:0};const o=s[a.stream];o.startTime=Math.min(o.startTime,a.startTime+n),o.endTime=Math.max(o.endTime,a.endTime+n),o.captions.push(a)}),Object.keys(s).forEach(a=>{const{startTime:o,endTime:l,captions:u}=s[a],c=this.inbandTextTracks_;this.logger_(`adding cues from ${o} -> ${l} for ${a}`),Eae(c,this.vhs_.tech_,a),Km(o,l,c[a]),wae({captionArray:u,inbandTextTracks:c,timestampOffset:n})}),this.transmuxer_&&this.transmuxer_.postMessage({action:"clearParsedMp4Captions"})}handleId3_(e,t,r){if(this.earlyAbortWhenNeeded_(e.stats),this.checkForAbort_(e.requestId))return;if(!this.pendingSegment_.hasAppendedData_){this.metadataQueue_.id3.push(this.handleId3_.bind(this,e,t,r));return}this.addMetadataToTextTrack(r,t,this.duration_())}processMetadataQueue_(){this.metadataQueue_.id3.forEach(e=>e()),this.metadataQueue_.caption.forEach(e=>e()),this.metadataQueue_.id3=[],this.metadataQueue_.caption=[]}processCallQueue_(){const e=this.callQueue_;this.callQueue_=[],e.forEach(t=>t())}processLoadQueue_(){const e=this.loadQueue_;this.loadQueue_=[],e.forEach(t=>t())}hasEnoughInfoToLoad_(){if(this.loaderType_!=="audio")return!0;const e=this.pendingSegment_;return e?this.getCurrentMediaInfo_()?!zC({timelineChangeController:this.timelineChangeController_,currentTimeline:this.currentTimeline_,segmentTimeline:e.timeline,loaderType:this.loaderType_,audioDisabled:this.audioDisabled_}):!0:!1}getCurrentMediaInfo_(e=this.pendingSegment_){return e&&e.trackInfo||this.currentMediaInfo_}getMediaInfo_(e=this.pendingSegment_){return this.getCurrentMediaInfo_(e)||this.startingMediaInfo_}getPendingSegmentPlaylist(){return this.pendingSegment_?this.pendingSegment_.playlist:null}hasEnoughInfoToAppend_(){if(!this.sourceUpdater_.ready()||this.waitingOnRemove_||this.quotaExceededErrorRetryTimeout_)return!1;const e=this.pendingSegment_,t=this.getCurrentMediaInfo_();if(!e||!t)return!1;const{hasAudio:r,hasVideo:n,isMuxed:s}=t;return!(n&&!e.videoTimingInfo||r&&!this.audioDisabled_&&!s&&!e.audioTimingInfo||zC({timelineChangeController:this.timelineChangeController_,currentTimeline:this.currentTimeline_,segmentTimeline:e.timeline,loaderType:this.loaderType_,audioDisabled:this.audioDisabled_}))}handleData_(e,t){if(this.earlyAbortWhenNeeded_(e.stats),this.checkForAbort_(e.requestId))return;if(this.callQueue_.length||!this.hasEnoughInfoToAppend_()){Wc(this),this.callQueue_.push(this.handleData_.bind(this,e,t));return}const r=this.pendingSegment_;if(this.setTimeMapping_(r.timeline),this.updateMediaSecondsLoaded_(r.part||r.segment),this.mediaSource_.readyState!=="closed"){if(e.map&&(e.map=this.initSegmentForMap(e.map,!0),r.segment.map=e.map),e.key&&this.segmentKey(e.key,!0),r.isFmp4=e.isFmp4,r.timingInfo=r.timingInfo||{},r.isFmp4)this.trigger("fmp4"),r.timingInfo.start=r[CO(t.type)].start;else{const n=this.getCurrentMediaInfo_(),s=this.loaderType_==="main"&&n&&n.hasVideo;let a;s&&(a=r.videoTimingInfo.start),r.timingInfo.start=this.trueSegmentStart_({currentStart:r.timingInfo.start,playlist:r.playlist,mediaIndex:r.mediaIndex,currentVideoTimestampOffset:this.sourceUpdater_.videoTimestampOffset(),useVideoTimingInfo:s,firstVideoFrameTimeForData:a,videoTimingInfo:r.videoTimingInfo,audioTimingInfo:r.audioTimingInfo})}if(this.updateAppendInitSegmentStatus(r,t.type),this.updateSourceBufferTimestampOffset_(r),r.isSyncRequest){this.updateTimingInfoEnd_(r),this.syncController_.saveSegmentTimingInfo({segmentInfo:r,shouldSaveTimelineMapping:this.loaderType_==="main"});const n=this.chooseNextRequest_();if(n.mediaIndex!==r.mediaIndex||n.partIndex!==r.partIndex){this.logger_("sync segment was incorrect, not appending");return}this.logger_("sync segment was correct, appending")}r.hasAppendedData_=!0,this.processMetadataQueue_(),this.appendData_(r,t)}}updateAppendInitSegmentStatus(e,t){this.loaderType_==="main"&&typeof e.timestampOffset=="number"&&!e.changedTimestampOffset&&(this.appendInitSegment_={audio:!0,video:!0}),this.playlistOfLastInitSegment_[t]!==e.playlist&&(this.appendInitSegment_[t]=!0)}getInitSegmentAndUpdateState_({type:e,initSegment:t,map:r,playlist:n}){if(r){const s=O_(r);if(this.activeInitSegmentId_===s)return null;t=this.initSegmentForMap(r,!0).bytes,this.activeInitSegmentId_=s}return t&&this.appendInitSegment_[e]?(this.playlistOfLastInitSegment_[e]=n,this.appendInitSegment_[e]=!1,this.activeInitSegmentId_=null,t):null}handleQuotaExceededError_({segmentInfo:e,type:t,bytes:r},n){const s=this.sourceUpdater_.audioBuffered(),a=this.sourceUpdater_.videoBuffered();s.length>1&&this.logger_("On QUOTA_EXCEEDED_ERR, found gaps in the audio buffer: "+ah(s).join(", ")),a.length>1&&this.logger_("On QUOTA_EXCEEDED_ERR, found gaps in the video buffer: "+ah(a).join(", "));const o=s.length?s.start(0):0,l=s.length?s.end(s.length-1):0,u=a.length?a.start(0):0,c=a.length?a.end(a.length-1):0;if(l-o<=Pm&&c-u<=Pm){this.logger_(`On QUOTA_EXCEEDED_ERR, single segment too large to append to buffer, triggering an error. Appended byte length: ${r.byteLength}, audio buffer: ${ah(s).join(", ")}, video buffer: ${ah(a).join(", ")}, `),this.error({message:"Quota exceeded error with append of a single segment of content",excludeUntil:1/0}),this.trigger("error");return}this.waitingOnRemove_=!0,this.callQueue_.push(this.appendToSourceBuffer_.bind(this,{segmentInfo:e,type:t,bytes:r}));const m=this.currentTime_()-Pm;this.logger_(`On QUOTA_EXCEEDED_ERR, removing audio/video from 0 to ${m}`),this.remove(0,m,()=>{this.logger_(`On QUOTA_EXCEEDED_ERR, retrying append in ${Pm}s`),this.waitingOnRemove_=!1,this.quotaExceededErrorRetryTimeout_=X.setTimeout(()=>{this.logger_("On QUOTA_EXCEEDED_ERR, re-processing call queue"),this.quotaExceededErrorRetryTimeout_=null,this.processCallQueue_()},Pm*1e3)},!0)}handleAppendError_({segmentInfo:e,type:t,bytes:r},n){if(n){if(n.code===LN){this.handleQuotaExceededError_({segmentInfo:e,type:t,bytes:r});return}this.logger_("Received non QUOTA_EXCEEDED_ERR on append",n),this.error({message:`${t} append of ${r.length}b failed for segment #${e.mediaIndex} in playlist ${e.playlist.id}`,metadata:{errorType:_e.Error.StreamingFailedToAppendSegment}}),this.trigger("appenderror")}}appendToSourceBuffer_({segmentInfo:e,type:t,initSegment:r,data:n,bytes:s}){if(!s){const o=[n];let l=n.byteLength;r&&(o.unshift(r),l+=r.byteLength),s=Cae({bytes:l,segments:o})}const a={segmentInfo:eh({type:this.loaderType_,segment:e})};this.trigger({type:"segmentappendstart",metadata:a}),this.sourceUpdater_.appendBuffer({segmentInfo:e,type:t,bytes:s},this.handleAppendError_.bind(this,{segmentInfo:e,type:t,bytes:s}))}handleSegmentTimingInfo_(e,t,r){if(!this.pendingSegment_||t!==this.pendingSegment_.requestId)return;const n=this.pendingSegment_.segment,s=`${e}TimingInfo`;n[s]||(n[s]={}),n[s].transmuxerPrependedSeconds=r.prependedContentDuration||0,n[s].transmuxedPresentationStart=r.start.presentation,n[s].transmuxedDecodeStart=r.start.decode,n[s].transmuxedPresentationEnd=r.end.presentation,n[s].transmuxedDecodeEnd=r.end.decode,n[s].baseMediaDecodeTime=r.baseMediaDecodeTime}appendData_(e,t){const{type:r,data:n}=t;if(!n||!n.byteLength||r==="audio"&&this.audioDisabled_)return;const s=this.getInitSegmentAndUpdateState_({type:r,initSegment:t.initSegment,playlist:e.playlist,map:e.isFmp4?e.segment.map:null});this.appendToSourceBuffer_({segmentInfo:e,type:r,initSegment:s,data:n})}loadSegment_(e){if(this.state="WAITING",this.pendingSegment_=e,this.trimBackBuffer_(e),typeof e.timestampOffset=="number"&&this.transmuxer_&&this.transmuxer_.postMessage({action:"clearAllMp4Captions"}),!this.hasEnoughInfoToLoad_()){Wc(this),this.loadQueue_.push(()=>{const t=Jt({},e,{forceTimestampOffset:!0});Jt(e,this.generateSegmentInfo_(t)),this.isPendingTimestampOffset_=!1,this.updateTransmuxerAndRequestSegment_(e)});return}this.updateTransmuxerAndRequestSegment_(e)}updateTransmuxerAndRequestSegment_(e){this.shouldUpdateTransmuxerTimestampOffset_(e.timestampOffset)&&(this.gopBuffer_.length=0,e.gopsToAlignWith=[],this.timeMapping_=0,this.transmuxer_.postMessage({action:"reset"}),this.transmuxer_.postMessage({action:"setTimestampOffset",timestampOffset:e.timestampOffset}));const t=this.createSimplifiedSegmentObj_(e),r=this.isEndOfStream_(e.mediaIndex,e.playlist,e.partIndex),n=this.mediaIndex!==null,s=e.timeline!==this.currentTimeline_&&e.timeline>0,a=r||n&&s;this.logger_(`Requesting
${r5(e.uri)}
${ff(e)}`),t.map&&!t.map.bytes&&(this.logger_("going to request init segment."),this.appendInitSegment_={video:!0,audio:!0}),e.abortRequests=gae({xhr:this.vhs_.xhr,xhrOptions:this.xhrOptions_,decryptionWorker:this.decrypter_,segment:t,abortFn:this.handleAbort_.bind(this,e),progressFn:this.handleProgress_.bind(this),trackInfoFn:this.handleTrackInfo_.bind(this),timingInfoFn:this.handleTimingInfo_.bind(this),videoSegmentTimingInfoFn:this.handleSegmentTimingInfo_.bind(this,"video",e.requestId),audioSegmentTimingInfoFn:this.handleSegmentTimingInfo_.bind(this,"audio",e.requestId),captionsFn:this.handleCaptions_.bind(this),isEndOfTimeline:a,endedTimelineFn:()=>{this.logger_("received endedtimeline callback")},id3Fn:this.handleId3_.bind(this),dataFn:this.handleData_.bind(this),doneFn:this.segmentRequestFinished_.bind(this),onTransmuxerLog:({message:o,level:l,stream:u})=>{this.logger_(`${ff(e)} logged from transmuxer stream ${u} as a ${l}: ${o}`)},triggerSegmentEventFn:({type:o,segment:l,keyInfo:u,trackInfo:c,timingInfo:h})=>{const g={segmentInfo:eh({segment:l})};u&&(g.keyInfo=u),c&&(g.trackInfo=c),h&&(g.timingInfo=h),this.trigger({type:o,metadata:g})}})}trimBackBuffer_(e){const t=$ae(this.seekable_(),this.currentTime_(),this.playlist_.targetDuration||10);t>0&&this.remove(0,t)}createSimplifiedSegmentObj_(e){const t=e.segment,r=e.part,n=e.segment.key||e.segment.map&&e.segment.map.key,s=e.segment.map&&!e.segment.map.bytes,a={resolvedUri:r?r.resolvedUri:t.resolvedUri,byterange:r?r.byterange:t.byterange,requestId:e.requestId,transmuxer:e.transmuxer,audioAppendStart:e.audioAppendStart,gopsToAlignWith:e.gopsToAlignWith,part:e.part,type:this.loaderType_,start:e.startOfSegment,duration:e.duration,isEncrypted:n,isMediaInitialization:s},o=e.playlist.segments[e.mediaIndex-1];if(o&&o.timeline===t.timeline&&(o.videoTimingInfo?a.baseStartTime=o.videoTimingInfo.transmuxedDecodeEnd:o.audioTimingInfo&&(a.baseStartTime=o.audioTimingInfo.transmuxedDecodeEnd)),t.key){const l=t.key.iv||new Uint32Array([0,0,0,e.mediaIndex+e.playlist.mediaSequence]);a.key=this.segmentKey(t.key),a.key.iv=l}return t.map&&(a.map=this.initSegmentForMap(t.map)),a}saveTransferStats_(e){this.mediaRequests+=1,e&&(this.mediaBytesTransferred+=e.bytesReceived,this.mediaTransferDuration+=e.roundTripTime)}saveBandwidthRelatedStats_(e,t){if(this.pendingSegment_.byteLength=t.bytesReceived,e<Tv){this.logger_(`Ignoring segment's bandwidth because its duration of ${e} is less than the min to record ${Tv}`);return}const r={bandwidthInfo:{from:this.bandwidth,to:t.bandwidth}};this.trigger({type:"bandwidthupdated",metadata:r}),this.bandwidth=t.bandwidth,this.roundTrip=t.roundTripTime}handleTimeout_(){this.mediaRequestsTimedout+=1,this.bandwidth=1,this.roundTrip=NaN,this.trigger("bandwidthupdate"),this.trigger("timeout")}segmentRequestFinished_(e,t,r){if(this.callQueue_.length){this.callQueue_.push(this.segmentRequestFinished_.bind(this,e,t,r));return}if(this.saveTransferStats_(t.stats),!this.pendingSegment_||t.requestId!==this.pendingSegment_.requestId)return;if(e){if(this.pendingSegment_=null,this.state="READY",e.code===Zl.ABORTED)return;if(this.pause(),e.code===Zl.TIMEOUT){this.handleTimeout_();return}this.mediaRequestsErrored+=1,this.error(e),this.trigger("error");return}const n=this.pendingSegment_;this.saveBandwidthRelatedStats_(n.duration,t.stats),n.endOfAllRequests=t.endOfAllRequests,r.gopInfo&&(this.gopBuffer_=Oae(this.gopBuffer_,r.gopInfo,this.safeAppend_)),this.state="APPENDING",this.trigger("appending"),this.waitForAppendsToComplete_(n)}setTimeMapping_(e){const t=this.syncController_.mappingForTimeline(e);t!==null&&(this.timeMapping_=t)}updateMediaSecondsLoaded_(e){typeof e.start=="number"&&typeof e.end=="number"?this.mediaSecondsLoaded+=e.end-e.start:this.mediaSecondsLoaded+=e.duration}shouldUpdateTransmuxerTimestampOffset_(e){return e===null?!1:this.loaderType_==="main"&&e!==this.sourceUpdater_.videoTimestampOffset()||!this.audioDisabled_&&e!==this.sourceUpdater_.audioTimestampOffset()}trueSegmentStart_({currentStart:e,playlist:t,mediaIndex:r,firstVideoFrameTimeForData:n,currentVideoTimestampOffset:s,useVideoTimingInfo:a,videoTimingInfo:o,audioTimingInfo:l}){if(typeof e<"u")return e;if(!a)return l.start;const u=t.segments[r-1];return r===0||!u||typeof u.start>"u"||u.end!==n+s?n:o.start}waitForAppendsToComplete_(e){const t=this.getCurrentMediaInfo_(e);if(!t){this.error({message:"No starting media returned, likely due to an unsupported media format.",playlistExclusionDuration:1/0}),this.trigger("error");return}const{hasAudio:r,hasVideo:n,isMuxed:s}=t,a=this.loaderType_==="main"&&n,o=!this.audioDisabled_&&r&&!s;if(e.waitingOnAppends=0,!e.hasAppendedData_){!e.timingInfo&&typeof e.timestampOffset=="number"&&(this.isPendingTimestampOffset_=!0),e.timingInfo={start:0},e.waitingOnAppends++,this.isPendingTimestampOffset_||(this.updateSourceBufferTimestampOffset_(e),this.processMetadataQueue_()),this.checkAppendsDone_(e);return}a&&e.waitingOnAppends++,o&&e.waitingOnAppends++,a&&this.sourceUpdater_.videoQueueCallback(this.checkAppendsDone_.bind(this,e)),o&&this.sourceUpdater_.audioQueueCallback(this.checkAppendsDone_.bind(this,e))}checkAppendsDone_(e){this.checkForAbort_(e.requestId)||(e.waitingOnAppends--,e.waitingOnAppends===0&&this.handleAppendsDone_())}checkForIllegalMediaSwitch(e){const t=Uae(this.loaderType_,this.getCurrentMediaInfo_(),e);return t?(this.error({message:t,playlistExclusionDuration:1/0}),this.trigger("error"),!0):!1}updateSourceBufferTimestampOffset_(e){if(e.timestampOffset===null||typeof e.timingInfo.start!="number"||e.changedTimestampOffset||this.loaderType_!=="main")return;let t=!1;e.timestampOffset-=this.getSegmentStartTimeForTimestampOffsetCalculation_({videoTimingInfo:e.segment.videoTimingInfo,audioTimingInfo:e.segment.audioTimingInfo,timingInfo:e.timingInfo}),e.changedTimestampOffset=!0,e.timestampOffset!==this.sourceUpdater_.videoTimestampOffset()&&(this.sourceUpdater_.videoTimestampOffset(e.timestampOffset),t=!0),e.timestampOffset!==this.sourceUpdater_.audioTimestampOffset()&&(this.sourceUpdater_.audioTimestampOffset(e.timestampOffset),t=!0),t&&this.trigger("timestampoffset")}getSegmentStartTimeForTimestampOffsetCalculation_({videoTimingInfo:e,audioTimingInfo:t,timingInfo:r}){return this.useDtsForTimestampOffset_?e&&typeof e.transmuxedDecodeStart=="number"?e.transmuxedDecodeStart:t&&typeof t.transmuxedDecodeStart=="number"?t.transmuxedDecodeStart:r.start:r.start}updateTimingInfoEnd_(e){e.timingInfo=e.timingInfo||{};const t=this.getMediaInfo_(),n=this.loaderType_==="main"&&t&&t.hasVideo&&e.videoTimingInfo?e.videoTimingInfo:e.audioTimingInfo;n&&(e.timingInfo.end=typeof n.end=="number"?n.end:n.start+e.duration)}handleAppendsDone_(){if(this.pendingSegment_){const l={segmentInfo:eh({type:this.loaderType_,segment:this.pendingSegment_})};this.trigger({type:"appendsdone",metadata:l})}if(!this.pendingSegment_){this.state="READY",this.paused()||this.monitorBuffer_();return}const e=this.pendingSegment_;e.part&&e.part.syncInfo?e.part.syncInfo.markAppended():e.segment.syncInfo&&e.segment.syncInfo.markAppended(),this.updateTimingInfoEnd_(e),this.shouldSaveSegmentTimingInfo_&&this.syncController_.saveSegmentTimingInfo({segmentInfo:e,shouldSaveTimelineMapping:this.loaderType_==="main"});const t=Wae(e,this.sourceType_);if(t&&(t.severity==="warn"?_e.log.warn(t.message):this.logger_(t.message)),this.recordThroughput_(e),this.pendingSegment_=null,this.state="READY",e.isSyncRequest&&(this.trigger("syncinfoupdate"),!e.hasAppendedData_)){this.logger_(`Throwing away un-appended sync request ${ff(e)}`);return}this.logger_(`Appended ${ff(e)}`),this.addSegmentMetadataCue_(e),this.fetchAtBuffer_=!0,this.currentTimeline_!==e.timeline&&(this.timelineChangeController_.lastTimelineChange({type:this.loaderType_,from:this.currentTimeline_,to:e.timeline}),this.loaderType_==="main"&&!this.audioDisabled_&&this.timelineChangeController_.lastTimelineChange({type:"audio",from:this.currentTimeline_,to:e.timeline})),this.currentTimeline_=e.timeline,this.trigger("syncinfoupdate");const r=e.segment,n=e.part,s=r.end&&this.currentTime_()-r.end>e.playlist.targetDuration*3,a=n&&n.end&&this.currentTime_()-n.end>e.playlist.partTargetDuration*3;if(s||a){this.logger_(`bad ${s?"segment":"part"} ${ff(e)}`),this.resetEverything();return}this.mediaIndex!==null&&this.trigger("bandwidthupdate"),this.trigger("progress"),this.mediaIndex=e.mediaIndex,this.partIndex=e.partIndex,this.isEndOfStream_(e.mediaIndex,e.playlist,e.partIndex)&&this.endOfStream(),this.trigger("appended"),e.hasAppendedData_&&this.mediaAppends++,this.paused()||this.monitorBuffer_()}recordThroughput_(e){if(e.duration<Tv){this.logger_(`Ignoring segment's throughput because its duration of ${e.duration} is less than the min to record ${Tv}`);return}const t=this.throughput.rate,r=Date.now()-e.endOfAllRequests+1,n=Math.floor(e.byteLength/r*8*1e3);this.throughput.rate+=(n-t)/++this.throughput.count}addSegmentMetadataCue_(e){if(!this.segmentMetadataTrack_)return;const t=e.segment,r=t.start,n=t.end;if(!SO(r)||!SO(n))return;Km(r,n,this.segmentMetadataTrack_);const s=X.WebKitDataCue||X.VTTCue,a={custom:t.custom,dateTimeObject:t.dateTimeObject,dateTimeString:t.dateTimeString,programDateTime:t.programDateTime,bandwidth:e.playlist.attributes.BANDWIDTH,resolution:e.playlist.attributes.RESOLUTION,codecs:e.playlist.attributes.CODECS,byteLength:e.byteLength,uri:e.uri,timeline:e.timeline,playlist:e.playlist.id,start:r,end:n},o=JSON.stringify(a),l=new s(r,n,o);l.value=a,this.segmentMetadataTrack_.addCue(l)}};function Ju(){}const i5=function(i){return typeof i!="string"?i:i.replace(/./,e=>e.toUpperCase())},Gae=["video","audio"],VC=(i,e)=>{const t=e[`${i}Buffer`];return t&&t.updating||e.queuePending[i]},Kae=(i,e)=>{for(let t=0;t<e.length;t++){const r=e[t];if(r.type==="mediaSource")return null;if(r.type===i)return t}return null},Kf=(i,e)=>{if(e.queue.length===0)return;let t=0,r=e.queue[t];if(r.type==="mediaSource"){!e.updating()&&e.mediaSource.readyState!=="closed"&&(e.queue.shift(),r.action(e),r.doneFn&&r.doneFn(),Kf("audio",e),Kf("video",e));return}if(i!=="mediaSource"&&!(!e.ready()||e.mediaSource.readyState==="closed"||VC(i,e))){if(r.type!==i){if(t=Kae(i,e.queue),t===null)return;r=e.queue[t]}if(e.queue.splice(t,1),e.queuePending[i]=r,r.action(i,e),!r.doneFn){e.queuePending[i]=null,Kf(i,e);return}}},n5=(i,e)=>{const t=e[`${i}Buffer`],r=i5(i);t&&(t.removeEventListener("updateend",e[`on${r}UpdateEnd_`]),t.removeEventListener("error",e[`on${r}Error_`]),e.codecs[i]=null,e[`${i}Buffer`]=null)},Wl=(i,e)=>i&&e&&Array.prototype.indexOf.call(i.sourceBuffers,e)!==-1,Ga={appendBuffer:(i,e,t)=>(r,n)=>{const s=n[`${r}Buffer`];if(Wl(n.mediaSource,s)){n.logger_(`Appending segment ${e.mediaIndex}'s ${i.length} bytes to ${r}Buffer`);try{s.appendBuffer(i)}catch(a){n.logger_(`Error with code ${a.code} `+(a.code===LN?"(QUOTA_EXCEEDED_ERR) ":"")+`when appending segment ${e.mediaIndex} to ${r}Buffer`),n.queuePending[r]=null,t(a)}}},remove:(i,e)=>(t,r)=>{const n=r[`${t}Buffer`];if(Wl(r.mediaSource,n)){r.logger_(`Removing ${i} to ${e} from ${t}Buffer`);try{n.remove(i,e)}catch{r.logger_(`Remove ${i} to ${e} from ${t}Buffer failed`)}}},timestampOffset:i=>(e,t)=>{const r=t[`${e}Buffer`];Wl(t.mediaSource,r)&&(t.logger_(`Setting ${e}timestampOffset to ${i}`),r.timestampOffset=i)},callback:i=>(e,t)=>{i()},endOfStream:i=>e=>{if(e.mediaSource.readyState==="open"){e.logger_(`Calling mediaSource endOfStream(${i||""})`);try{e.mediaSource.endOfStream(i)}catch(t){_e.log.warn("Failed to call media source endOfStream",t)}}},duration:i=>e=>{e.logger_(`Setting mediaSource duration to ${i}`);try{e.mediaSource.duration=i}catch(t){_e.log.warn("Failed to set media source duration",t)}},abort:()=>(i,e)=>{if(e.mediaSource.readyState!=="open")return;const t=e[`${i}Buffer`];if(Wl(e.mediaSource,t)){e.logger_(`calling abort on ${i}Buffer`);try{t.abort()}catch(r){_e.log.warn(`Failed to abort on ${i}Buffer`,r)}}},addSourceBuffer:(i,e)=>t=>{const r=i5(i),n=du(e);t.logger_(`Adding ${i}Buffer with codec ${e} to mediaSource`);const s=t.mediaSource.addSourceBuffer(n);s.addEventListener("updateend",t[`on${r}UpdateEnd_`]),s.addEventListener("error",t[`on${r}Error_`]),t.codecs[i]=e,t[`${i}Buffer`]=s},removeSourceBuffer:i=>e=>{const t=e[`${i}Buffer`];if(n5(i,e),!!Wl(e.mediaSource,t)){e.logger_(`Removing ${i}Buffer with codec ${e.codecs[i]} from mediaSource`);try{e.mediaSource.removeSourceBuffer(t)}catch(r){_e.log.warn(`Failed to removeSourceBuffer ${i}Buffer`,r)}}},changeType:i=>(e,t)=>{const r=t[`${e}Buffer`],n=du(i);if(!Wl(t.mediaSource,r))return;const s=i.substring(0,i.indexOf(".")),a=t.codecs[e];if(a.substring(0,a.indexOf("."))===s)return;const l={codecsChangeInfo:{from:a,to:i}};t.trigger({type:"codecschange",metadata:l}),t.logger_(`changing ${e}Buffer codec from ${a} to ${i}`);try{r.changeType(n),t.codecs[e]=i}catch(u){l.errorType=_e.Error.StreamingCodecsChangeError,l.error=u,u.metadata=l,t.error_=u,t.trigger("error"),_e.log.warn(`Failed to changeType on ${e}Buffer`,u)}}},Ka=({type:i,sourceUpdater:e,action:t,doneFn:r,name:n})=>{e.queue.push({type:i,action:t,doneFn:r,name:n}),Kf(i,e)},wO=(i,e)=>t=>{const r=e[`${i}Buffered`](),n=ose(r);if(e.logger_(`received "updateend" event for ${i} Source Buffer: `,n),e.queuePending[i]){const s=e.queuePending[i].doneFn;e.queuePending[i]=null,s&&s(e[`${i}Error_`])}Kf(i,e)};let s5=class extends _e.EventTarget{constructor(e){super(),this.mediaSource=e,this.sourceopenListener_=()=>Kf("mediaSource",this),this.mediaSource.addEventListener("sourceopen",this.sourceopenListener_),this.logger_=Uo("SourceUpdater"),this.audioTimestampOffset_=0,this.videoTimestampOffset_=0,this.queue=[],this.queuePending={audio:null,video:null},this.delayedAudioAppendQueue_=[],this.videoAppendQueued_=!1,this.codecs={},this.onVideoUpdateEnd_=wO("video",this),this.onAudioUpdateEnd_=wO("audio",this),this.onVideoError_=t=>{this.videoError_=t},this.onAudioError_=t=>{this.audioError_=t},this.createdSourceBuffers_=!1,this.initializedEme_=!1,this.triggeredReady_=!1}initializedEme(){this.initializedEme_=!0,this.triggerReady()}hasCreatedSourceBuffers(){return this.createdSourceBuffers_}hasInitializedAnyEme(){return this.initializedEme_}ready(){return this.hasCreatedSourceBuffers()&&this.hasInitializedAnyEme()}createSourceBuffers(e){this.hasCreatedSourceBuffers()||(this.addOrChangeSourceBuffers(e),this.createdSourceBuffers_=!0,this.trigger("createdsourcebuffers"),this.triggerReady())}triggerReady(){this.ready()&&!this.triggeredReady_&&(this.triggeredReady_=!0,this.trigger("ready"))}addSourceBuffer(e,t){Ka({type:"mediaSource",sourceUpdater:this,action:Ga.addSourceBuffer(e,t),name:"addSourceBuffer"})}abort(e){Ka({type:e,sourceUpdater:this,action:Ga.abort(e),name:"abort"})}removeSourceBuffer(e){if(!this.canRemoveSourceBuffer()){_e.log.error("removeSourceBuffer is not supported!");return}Ka({type:"mediaSource",sourceUpdater:this,action:Ga.removeSourceBuffer(e),name:"removeSourceBuffer"})}canRemoveSourceBuffer(){return!_e.browser.IS_FIREFOX&&X.MediaSource&&X.MediaSource.prototype&&typeof X.MediaSource.prototype.removeSourceBuffer=="function"}static canChangeType(){return X.SourceBuffer&&X.SourceBuffer.prototype&&typeof X.SourceBuffer.prototype.changeType=="function"}canChangeType(){return this.constructor.canChangeType()}changeType(e,t){if(!this.canChangeType()){_e.log.error("changeType is not supported!");return}Ka({type:e,sourceUpdater:this,action:Ga.changeType(t),name:"changeType"})}addOrChangeSourceBuffers(e){if(!e||typeof e!="object"||Object.keys(e).length===0)throw new Error("Cannot addOrChangeSourceBuffers to undefined codecs");Object.keys(e).forEach(t=>{const r=e[t];if(!this.hasCreatedSourceBuffers())return this.addSourceBuffer(t,r);this.canChangeType()&&this.changeType(t,r)})}appendBuffer(e,t){const{segmentInfo:r,type:n,bytes:s}=e;if(this.processedAppend_=!0,n==="audio"&&this.videoBuffer&&!this.videoAppendQueued_){this.delayedAudioAppendQueue_.push([e,t]),this.logger_(`delayed audio append of ${s.length} until video append`);return}const a=t;if(Ka({type:n,sourceUpdater:this,action:Ga.appendBuffer(s,r||{mediaIndex:-1},a),doneFn:t,name:"appendBuffer"}),n==="video"){if(this.videoAppendQueued_=!0,!this.delayedAudioAppendQueue_.length)return;const o=this.delayedAudioAppendQueue_.slice();this.logger_(`queuing delayed audio ${o.length} appendBuffers`),this.delayedAudioAppendQueue_.length=0,o.forEach(l=>{this.appendBuffer.apply(this,l)})}}audioBuffered(){return Wl(this.mediaSource,this.audioBuffer)&&this.audioBuffer.buffered?this.audioBuffer.buffered:hs()}videoBuffered(){return Wl(this.mediaSource,this.videoBuffer)&&this.videoBuffer.buffered?this.videoBuffer.buffered:hs()}buffered(){const e=Wl(this.mediaSource,this.videoBuffer)?this.videoBuffer:null,t=Wl(this.mediaSource,this.audioBuffer)?this.audioBuffer:null;return t&&!e?this.audioBuffered():e&&!t?this.videoBuffered():use(this.audioBuffered(),this.videoBuffered())}setDuration(e,t=Ju){Ka({type:"mediaSource",sourceUpdater:this,action:Ga.duration(e),name:"duration",doneFn:t})}endOfStream(e=null,t=Ju){typeof e!="string"&&(e=void 0),Ka({type:"mediaSource",sourceUpdater:this,action:Ga.endOfStream(e),name:"endOfStream",doneFn:t})}removeAudio(e,t,r=Ju){if(!this.audioBuffered().length||this.audioBuffered().end(0)===0){r();return}Ka({type:"audio",sourceUpdater:this,action:Ga.remove(e,t),doneFn:r,name:"remove"})}removeVideo(e,t,r=Ju){if(!this.videoBuffered().length||this.videoBuffered().end(0)===0){r();return}Ka({type:"video",sourceUpdater:this,action:Ga.remove(e,t),doneFn:r,name:"remove"})}updating(){return!!(VC("audio",this)||VC("video",this))}audioTimestampOffset(e){return typeof e<"u"&&this.audioBuffer&&this.audioTimestampOffset_!==e&&(Ka({type:"audio",sourceUpdater:this,action:Ga.timestampOffset(e),name:"timestampOffset"}),this.audioTimestampOffset_=e),this.audioTimestampOffset_}videoTimestampOffset(e){return typeof e<"u"&&this.videoBuffer&&this.videoTimestampOffset_!==e&&(Ka({type:"video",sourceUpdater:this,action:Ga.timestampOffset(e),name:"timestampOffset"}),this.videoTimestampOffset_=e),this.videoTimestampOffset_}audioQueueCallback(e){this.audioBuffer&&Ka({type:"audio",sourceUpdater:this,action:Ga.callback(e),name:"callback"})}videoQueueCallback(e){this.videoBuffer&&Ka({type:"video",sourceUpdater:this,action:Ga.callback(e),name:"callback"})}dispose(){this.trigger("dispose"),Gae.forEach(e=>{this.abort(e),this.canRemoveSourceBuffer()?this.removeSourceBuffer(e):this[`${e}QueueCallback`](()=>n5(e,this))}),this.videoAppendQueued_=!1,this.delayedAudioAppendQueue_.length=0,this.sourceopenListener_&&this.mediaSource.removeEventListener("sourceopen",this.sourceopenListener_),this.off()}};const kO=i=>decodeURIComponent(escape(String.fromCharCode.apply(null,i))),Xae=i=>{const e=new Uint8Array(i);return Array.from(e).map(t=>t.toString(16).padStart(2,"0")).join("")},AO=new Uint8Array(`

`.split("").map(i=>i.charCodeAt(0)));let Yae=class extends Error{constructor(){super("Trying to parse received VTT cues, but there is no WebVTT. Make sure vtt.js is loaded.")}},Qae=class extends HC{constructor(e,t={}){super(e,t),this.mediaSource_=null,this.subtitlesTrack_=null,this.featuresNativeTextTracks_=e.featuresNativeTextTracks,this.loadVttJs=e.loadVttJs,this.shouldSaveSegmentTimingInfo_=!1}createTransmuxer_(){return null}buffered_(){if(!this.subtitlesTrack_||!this.subtitlesTrack_.cues||!this.subtitlesTrack_.cues.length)return hs();const e=this.subtitlesTrack_.cues,t=e[0].startTime,r=e[e.length-1].startTime;return hs([[t,r]])}initSegmentForMap(e,t=!1){if(!e)return null;const r=O_(e);let n=this.initSegments_[r];if(t&&!n&&e.bytes){const s=AO.byteLength+e.bytes.byteLength,a=new Uint8Array(s);a.set(e.bytes),a.set(AO,e.bytes.byteLength),this.initSegments_[r]=n={resolvedUri:e.resolvedUri,byterange:e.byterange,bytes:a}}return n||e}couldBeginLoading_(){return this.playlist_&&this.subtitlesTrack_&&!this.paused()}init_(){return this.state="READY",this.resetEverything(),this.monitorBuffer_()}track(e){return typeof e>"u"?this.subtitlesTrack_:(this.subtitlesTrack_=e,this.state==="INIT"&&this.couldBeginLoading_()&&this.init_(),this.subtitlesTrack_)}remove(e,t){Km(e,t,this.subtitlesTrack_)}fillBuffer_(){const e=this.chooseNextRequest_();if(e){if(this.syncController_.timestampOffsetForTimeline(e.timeline)===null){const t=()=>{this.state="READY",this.paused()||this.monitorBuffer_()};this.syncController_.one("timestampoffset",t),this.state="WAITING_ON_TIMELINE";return}this.loadSegment_(e)}}timestampOffsetForSegment_(){return null}chooseNextRequest_(){return this.skipEmptySegments_(super.chooseNextRequest_())}skipEmptySegments_(e){for(;e&&e.segment.empty;){if(e.mediaIndex+1>=e.playlist.segments.length){e=null;break}e=this.generateSegmentInfo_({playlist:e.playlist,mediaIndex:e.mediaIndex+1,startOfSegment:e.startOfSegment+e.duration,isSyncRequest:e.isSyncRequest})}return e}stopForError(e){this.error(e),this.state="READY",this.pause(),this.trigger("error")}segmentRequestFinished_(e,t,r){if(!this.subtitlesTrack_){this.state="READY";return}if(this.saveTransferStats_(t.stats),!this.pendingSegment_){this.state="READY",this.mediaRequestsAborted+=1;return}if(e){e.code===Zl.TIMEOUT&&this.handleTimeout_(),e.code===Zl.ABORTED?this.mediaRequestsAborted+=1:this.mediaRequestsErrored+=1,this.stopForError(e);return}const n=this.pendingSegment_;this.saveBandwidthRelatedStats_(n.duration,t.stats),t.key&&this.segmentKey(t.key,!0),this.state="APPENDING",this.trigger("appending");const s=n.segment;if(s.map&&(s.map.bytes=t.map.bytes),n.bytes=t.bytes,typeof X.WebVTT!="function"&&typeof this.loadVttJs=="function"){this.state="WAITING_ON_VTTJS",this.loadVttJs().then(()=>this.segmentRequestFinished_(e,t,r),()=>this.stopForError({message:"Error loading vtt.js"}));return}s.requested=!0;try{this.parseVTTCues_(n)}catch(a){this.stopForError({message:a.message,metadata:{errorType:_e.Error.StreamingVttParserError,error:a}});return}if(this.updateTimeMapping_(n,this.syncController_.timelines[n.timeline],this.playlist_),n.cues.length?n.timingInfo={start:n.cues[0].startTime,end:n.cues[n.cues.length-1].endTime}:n.timingInfo={start:n.startOfSegment,end:n.startOfSegment+n.duration},n.isSyncRequest){this.trigger("syncinfoupdate"),this.pendingSegment_=null,this.state="READY";return}n.byteLength=n.bytes.byteLength,this.mediaSecondsLoaded+=s.duration,n.cues.forEach(a=>{this.subtitlesTrack_.addCue(this.featuresNativeTextTracks_?new X.VTTCue(a.startTime,a.endTime,a.text):a)}),Rae(this.subtitlesTrack_),this.handleAppendsDone_()}handleData_(){}updateTimingInfoEnd_(){}parseVTTCues_(e){let t,r=!1;if(typeof X.WebVTT!="function")throw new Yae;typeof X.TextDecoder=="function"?t=new X.TextDecoder("utf8"):(t=X.WebVTT.StringDecoder(),r=!0);const n=new X.WebVTT.Parser(X,X.vttjs,t);if(e.cues=[],e.timestampmap={MPEGTS:0,LOCAL:0},n.oncue=e.cues.push.bind(e.cues),n.ontimestampmap=a=>{e.timestampmap=a},n.onparsingerror=a=>{_e.log.warn("Error encountered when parsing cues: "+a.message)},e.segment.map){let a=e.segment.map.bytes;r&&(a=kO(a)),n.parse(a)}let s=e.bytes;r&&(s=kO(s)),n.parse(s),n.flush()}updateTimeMapping_(e,t,r){const n=e.segment;if(!t)return;if(!e.cues.length){n.empty=!0;return}const{MPEGTS:s,LOCAL:a}=e.timestampmap,l=s/Aa.ONE_SECOND_IN_TS-a+t.mapping;if(e.cues.forEach(u=>{const c=u.endTime-u.startTime,h=this.handleRollover_(u.startTime+l,t.time);u.startTime=Math.max(h,0),u.endTime=Math.max(h+c,0)}),!r.syncInfo){const u=e.cues[0].startTime,c=e.cues[e.cues.length-1].startTime;r.syncInfo={mediaSequence:r.mediaSequence+e.mediaIndex,time:Math.min(u,c-n.duration)}}}handleRollover_(e,t){if(t===null)return e;let r=e*Aa.ONE_SECOND_IN_TS;const n=t*Aa.ONE_SECOND_IN_TS;let s;for(n<r?s=-8589934592:s=8589934592;Math.abs(r-n)>4294967296;)r+=s;return r/Aa.ONE_SECOND_IN_TS}};const Jae=function(i,e){const t=i.cues;for(let r=0;r<t.length;r++){const n=t[r];if(e>=n.adStartTime&&e<=n.adEndTime)return n}return null},Zae=function(i,e,t=0){if(!i.segments)return;let r=t,n;for(let s=0;s<i.segments.length;s++){const a=i.segments[s];if(n||(n=Jae(e,r+a.duration/2)),n){if("cueIn"in a){n.endTime=r,n.adEndTime=r,r+=a.duration,n=null;continue}if(r<n.endTime){r+=a.duration;continue}n.endTime+=a.duration}else if("cueOut"in a&&(n=new X.VTTCue(r,r+a.duration,a.cueOut),n.adStartTime=r,n.adEndTime=r+parseFloat(a.cueOut),e.addCue(n)),"cueOutCont"in a){const[o,l]=a.cueOutCont.split("/").map(parseFloat);n=new X.VTTCue(r,r+a.duration,""),n.adStartTime=r-o,n.adEndTime=n.adStartTime+l,e.addCue(n)}r+=a.duration}};let IO=class{constructor({start:e,end:t,segmentIndex:r,partIndex:n=null,appended:s=!1}){this.start_=e,this.end_=t,this.segmentIndex_=r,this.partIndex_=n,this.appended_=s}isInRange(e){return e>=this.start&&e<this.end}markAppended(){this.appended_=!0}resetAppendedStatus(){this.appended_=!1}get isAppended(){return this.appended_}get start(){return this.start_}get end(){return this.end_}get segmentIndex(){return this.segmentIndex_}get partIndex(){return this.partIndex_}},eoe=class{constructor(e,t=[]){this.segmentSyncInfo_=e,this.partsSyncInfo_=t}get segmentSyncInfo(){return this.segmentSyncInfo_}get partsSyncInfo(){return this.partsSyncInfo_}get hasPartsSyncInfo(){return this.partsSyncInfo_.length>0}resetAppendStatus(){this.segmentSyncInfo_.resetAppendedStatus(),this.partsSyncInfo_.forEach(e=>e.resetAppendedStatus())}},a5=class{constructor(){this.storage_=new Map,this.diagnostics_="",this.isReliable_=!1,this.start_=-1/0,this.end_=1/0}get start(){return this.start_}get end(){return this.end_}get diagnostics(){return this.diagnostics_}get isReliable(){return this.isReliable_}resetAppendedStatus(){this.storage_.forEach(e=>e.resetAppendStatus())}update(e,t){const{mediaSequence:r,segments:n}=e;if(this.isReliable_=this.isReliablePlaylist_(r,n),!!this.isReliable_)return this.updateStorage_(n,r,this.calculateBaseTime_(r,t))}getSyncInfoForTime(e){for(const{segmentSyncInfo:t,partsSyncInfo:r}of this.storage_.values())if(r.length){for(const n of r)if(n.isInRange(e))return n}else if(t.isInRange(e))return t;return null}getSyncInfoForMediaSequence(e){return this.storage_.get(e)}updateStorage_(e,t,r){const n=new Map;let s=`
`,a=r,o=t;this.start_=a,e.forEach((l,u)=>{const c=this.storage_.get(o),h=a,m=h+l.duration,g=!!(c&&c.segmentSyncInfo&&c.segmentSyncInfo.isAppended),y=new IO({start:h,end:m,appended:g,segmentIndex:u});l.syncInfo=y;let _=a;const T=(l.parts||[]).map((E,w)=>{const D=_,R=_+E.duration,A=!!(c&&c.partsSyncInfo&&c.partsSyncInfo[w]&&c.partsSyncInfo[w].isAppended),L=new IO({start:D,end:R,appended:A,segmentIndex:u,partIndex:w});return _=R,s+=`Media Sequence: ${o}.${w} | Range: ${D} --> ${R} | Appended: ${A}
`,E.syncInfo=L,L});n.set(o,new eoe(y,T)),s+=`${r5(l.resolvedUri)} | Media Sequence: ${o} | Range: ${h} --> ${m} | Appended: ${g}
`,o++,a=m}),this.end_=a,this.storage_=n,this.diagnostics_=s}calculateBaseTime_(e,t){return this.storage_.size?this.storage_.has(e)?this.storage_.get(e).segmentSyncInfo.start:t:0}isReliablePlaylist_(e,t){return e!=null&&Array.isArray(t)&&t.length}},DO=class extends a5{constructor(e){super(),this.parent_=e}calculateBaseTime_(e,t){if(!this.storage_.size){const r=this.parent_.getSyncInfoForMediaSequence(e);return r?r.segmentSyncInfo.start:0}return super.calculateBaseTime_(e,t)}};const toe=86400,t1=[{name:"VOD",run:(i,e,t,r,n)=>t!==1/0?{time:0,segmentIndex:0,partIndex:null}:null},{name:"MediaSequence",run:(i,e,t,r,n,s)=>{const a=i.getMediaSequenceSync(s);if(!a||!a.isReliable)return null;const o=a.getSyncInfoForTime(n);return o?{time:o.start,partIndex:o.partIndex,segmentIndex:o.segmentIndex}:null}},{name:"ProgramDateTime",run:(i,e,t,r,n)=>{if(!Object.keys(i.timelineToDatetimeMappings).length)return null;let s=null,a=null;const o=OC(e);n=n||0;for(let l=0;l<o.length;l++){const u=e.endList||n===0?l:o.length-(l+1),c=o[u],h=c.segment,m=i.timelineToDatetimeMappings[h.timeline];if(!m||!h.dateTimeObject)continue;let y=h.dateTimeObject.getTime()/1e3+m;if(h.parts&&typeof c.partIndex=="number")for(let T=0;T<c.partIndex;T++)y+=h.parts[T].duration;const _=Math.abs(n-y);if(a!==null&&(_===0||a<_))break;a=_,s={time:y,segmentIndex:c.segmentIndex,partIndex:c.partIndex}}return s}},{name:"Segment",run:(i,e,t,r,n)=>{let s=null,a=null;n=n||0;const o=OC(e);for(let l=0;l<o.length;l++){const u=e.endList||n===0?l:o.length-(l+1),c=o[u],h=c.segment,m=c.part&&c.part.start||h&&h.start;if(h.timeline===r&&typeof m<"u"){const g=Math.abs(n-m);if(a!==null&&a<g)break;(!s||a===null||a>=g)&&(a=g,s={time:m,segmentIndex:c.segmentIndex,partIndex:c.partIndex})}}return s}},{name:"Discontinuity",run:(i,e,t,r,n)=>{let s=null;if(n=n||0,e.discontinuityStarts&&e.discontinuityStarts.length){let a=null;for(let o=0;o<e.discontinuityStarts.length;o++){const l=e.discontinuityStarts[o],u=e.discontinuitySequence+o+1,c=i.discontinuities[u];if(c){const h=Math.abs(n-c.time);if(a!==null&&a<h)break;(!s||a===null||a>=h)&&(a=h,s={time:c.time,segmentIndex:l,partIndex:null})}}}return s}},{name:"Playlist",run:(i,e,t,r,n)=>e.syncInfo?{time:e.syncInfo.time,segmentIndex:e.syncInfo.mediaSequence-e.mediaSequence,partIndex:null}:null}];let roe=class extends _e.EventTarget{constructor(e={}){super(),this.timelines=[],this.discontinuities=[],this.timelineToDatetimeMappings={};const t=new a5,r=new DO(t),n=new DO(t);this.mediaSequenceStorage_={main:t,audio:r,vtt:n},this.logger_=Uo("SyncController")}getMediaSequenceSync(e){return this.mediaSequenceStorage_[e]||null}getSyncPoint(e,t,r,n,s){if(t!==1/0)return t1.find(({name:l})=>l==="VOD").run(this,e,t);const a=this.runStrategies_(e,t,r,n,s);if(!a.length)return null;for(const o of a){const{syncPoint:l,strategy:u}=o,{segmentIndex:c,time:h}=l;if(c<0)continue;const m=e.segments[c],g=h,y=g+m.duration;if(this.logger_(`Strategy: ${u}. Current time: ${n}. selected segment: ${c}. Time: [${g} -> ${y}]}`),n>=g&&n<y)return this.logger_("Found sync point with exact match: ",l),l}return this.selectSyncPoint_(a,{key:"time",value:n})}getExpiredTime(e,t){if(!e||!e.segments)return null;const r=this.runStrategies_(e,t,e.discontinuitySequence,0);if(!r.length)return null;const n=this.selectSyncPoint_(r,{key:"segmentIndex",value:0});return n.segmentIndex>0&&(n.time*=-1),Math.abs(n.time+o0({defaultDuration:e.targetDuration,durationList:e.segments,startIndex:n.segmentIndex,endIndex:0}))}runStrategies_(e,t,r,n,s){const a=[];for(let o=0;o<t1.length;o++){const l=t1[o],u=l.run(this,e,t,r,n,s);u&&(u.strategy=l.name,a.push({strategy:l.name,syncPoint:u}))}return a}selectSyncPoint_(e,t){let r=e[0].syncPoint,n=Math.abs(e[0].syncPoint[t.key]-t.value),s=e[0].strategy;for(let a=1;a<e.length;a++){const o=Math.abs(e[a].syncPoint[t.key]-t.value);o<n&&(n=o,r=e[a].syncPoint,s=e[a].strategy)}return this.logger_(`syncPoint for [${t.key}: ${t.value}] chosen with strategy [${s}]: [time:${r.time}, segmentIndex:${r.segmentIndex}`+(typeof r.partIndex=="number"?`,partIndex:${r.partIndex}`:"")+"]"),r}saveExpiredSegmentInfo(e,t){const r=t.mediaSequence-e.mediaSequence;if(r>toe){_e.log.warn(`Not saving expired segment info. Media sequence gap ${r} is too large.`);return}for(let n=r-1;n>=0;n--){const s=e.segments[n];if(s&&typeof s.start<"u"){t.syncInfo={mediaSequence:e.mediaSequence+n,time:s.start},this.logger_(`playlist refresh sync: [time:${t.syncInfo.time}, mediaSequence: ${t.syncInfo.mediaSequence}]`),this.trigger("syncinfoupdate");break}}}setDateTimeMappingForStart(e){if(this.timelineToDatetimeMappings={},e.segments&&e.segments.length&&e.segments[0].dateTimeObject){const t=e.segments[0],r=t.dateTimeObject.getTime()/1e3;this.timelineToDatetimeMappings[t.timeline]=-r}}saveSegmentTimingInfo({segmentInfo:e,shouldSaveTimelineMapping:t}){const r=this.calculateSegmentTimeMapping_(e,e.timingInfo,t),n=e.segment;r&&(this.saveDiscontinuitySyncInfo_(e),e.playlist.syncInfo||(e.playlist.syncInfo={mediaSequence:e.playlist.mediaSequence+e.mediaIndex,time:n.start}));const s=n.dateTimeObject;n.discontinuity&&t&&s&&(this.timelineToDatetimeMappings[n.timeline]=-(s.getTime()/1e3))}timestampOffsetForTimeline(e){return typeof this.timelines[e]>"u"?null:this.timelines[e].time}mappingForTimeline(e){return typeof this.timelines[e]>"u"?null:this.timelines[e].mapping}calculateSegmentTimeMapping_(e,t,r){const n=e.segment,s=e.part;let a=this.timelines[e.timeline],o,l;if(typeof e.timestampOffset=="number")a={time:e.startOfSegment,mapping:e.startOfSegment-t.start},r&&(this.timelines[e.timeline]=a,this.trigger("timestampoffset"),this.logger_(`time mapping for timeline ${e.timeline}: [time: ${a.time}] [mapping: ${a.mapping}]`)),o=e.startOfSegment,l=t.end+a.mapping;else if(a)o=t.start+a.mapping,l=t.end+a.mapping;else return!1;return s&&(s.start=o,s.end=l),(!n.start||o<n.start)&&(n.start=o),n.end=l,!0}saveDiscontinuitySyncInfo_(e){const t=e.playlist,r=e.segment;if(r.discontinuity)this.discontinuities[r.timeline]={time:r.start,accuracy:0};else if(t.discontinuityStarts&&t.discontinuityStarts.length)for(let n=0;n<t.discontinuityStarts.length;n++){const s=t.discontinuityStarts[n],a=t.discontinuitySequence+n+1,o=s-e.mediaIndex,l=Math.abs(o);if(!this.discontinuities[a]||this.discontinuities[a].accuracy>l){let u;o<0?u=r.start-o0({defaultDuration:t.targetDuration,durationList:t.segments,startIndex:e.mediaIndex,endIndex:s}):u=r.end+o0({defaultDuration:t.targetDuration,durationList:t.segments,startIndex:e.mediaIndex+1,endIndex:s}),this.discontinuities[a]={time:u,accuracy:l}}}}dispose(){this.trigger("dispose"),this.off()}},ioe=class extends _e.EventTarget{constructor(){super(),this.pendingTimelineChanges_={},this.lastTimelineChanges_={}}clearPendingTimelineChange(e){this.pendingTimelineChanges_[e]=null,this.trigger("pendingtimelinechange")}pendingTimelineChange({type:e,from:t,to:r}){return typeof t=="number"&&typeof r=="number"&&(this.pendingTimelineChanges_[e]={type:e,from:t,to:r},this.trigger("pendingtimelinechange")),this.pendingTimelineChanges_[e]}lastTimelineChange({type:e,from:t,to:r}){if(typeof t=="number"&&typeof r=="number"){this.lastTimelineChanges_[e]={type:e,from:t,to:r},delete this.pendingTimelineChanges_[e];const n={timelineChangeInfo:{from:t,to:r}};this.trigger({type:"timelinechange",metadata:n})}return this.lastTimelineChanges_[e]}dispose(){this.trigger("dispose"),this.pendingTimelineChanges_={},this.lastTimelineChanges_={},this.off()}};const noe=qN(WN(function(){var i=(function(){function _(){this.listeners={}}var T=_.prototype;return T.on=function(w,D){this.listeners[w]||(this.listeners[w]=[]),this.listeners[w].push(D)},T.off=function(w,D){if(!this.listeners[w])return!1;var R=this.listeners[w].indexOf(D);return this.listeners[w]=this.listeners[w].slice(0),this.listeners[w].splice(R,1),R>-1},T.trigger=function(w){var D=this.listeners[w];if(D)if(arguments.length===2)for(var R=D.length,A=0;A<R;++A)D[A].call(this,arguments[1]);else for(var L=Array.prototype.slice.call(arguments,1),F=D.length,B=0;B<F;++B)D[B].apply(this,L)},T.dispose=function(){this.listeners={}},T.pipe=function(w){this.on("data",function(D){w.push(D)})},_})();/*! @name pkcs7 @version 1.0.4 @license Apache-2.0 */function e(_){return _.subarray(0,_.byteLength-_[_.byteLength-1])}/*! @name aes-decrypter @version 4.0.2 @license Apache-2.0 */const t=function(){const _=[[[],[],[],[],[]],[[],[],[],[],[]]],T=_[0],E=_[1],w=T[4],D=E[4];let R,A,L;const F=[],B=[];let M,k,q,G,H,re;for(R=0;R<256;R++)B[(F[R]=R<<1^(R>>7)*283)^R]=R;for(A=L=0;!w[A];A^=M||1,L=B[L]||1)for(G=L^L<<1^L<<2^L<<3^L<<4,G=G>>8^G&255^99,w[A]=G,D[G]=A,q=F[k=F[M=F[A]]],re=q*16843009^k*65537^M*257^A*16843008,H=F[G]*257^G*16843008,R=0;R<4;R++)T[R][A]=H=H<<24^H>>>8,E[R][G]=re=re<<24^re>>>8;for(R=0;R<5;R++)T[R]=T[R].slice(0),E[R]=E[R].slice(0);return _};let r=null;class n{constructor(T){r||(r=t()),this._tables=[[r[0][0].slice(),r[0][1].slice(),r[0][2].slice(),r[0][3].slice(),r[0][4].slice()],[r[1][0].slice(),r[1][1].slice(),r[1][2].slice(),r[1][3].slice(),r[1][4].slice()]];let E,w,D;const R=this._tables[0][4],A=this._tables[1],L=T.length;let F=1;if(L!==4&&L!==6&&L!==8)throw new Error("Invalid aes key size");const B=T.slice(0),M=[];for(this._key=[B,M],E=L;E<4*L+28;E++)D=B[E-1],(E%L===0||L===8&&E%L===4)&&(D=R[D>>>24]<<24^R[D>>16&255]<<16^R[D>>8&255]<<8^R[D&255],E%L===0&&(D=D<<8^D>>>24^F<<24,F=F<<1^(F>>7)*283)),B[E]=B[E-L]^D;for(w=0;E;w++,E--)D=B[w&3?E:E-4],E<=4||w<4?M[w]=D:M[w]=A[0][R[D>>>24]]^A[1][R[D>>16&255]]^A[2][R[D>>8&255]]^A[3][R[D&255]]}decrypt(T,E,w,D,R,A){const L=this._key[1];let F=T^L[0],B=D^L[1],M=w^L[2],k=E^L[3],q,G,H;const re=L.length/4-2;let se,de=4;const me=this._tables[1],ue=me[0],oe=me[1],ce=me[2],te=me[3],fe=me[4];for(se=0;se<re;se++)q=ue[F>>>24]^oe[B>>16&255]^ce[M>>8&255]^te[k&255]^L[de],G=ue[B>>>24]^oe[M>>16&255]^ce[k>>8&255]^te[F&255]^L[de+1],H=ue[M>>>24]^oe[k>>16&255]^ce[F>>8&255]^te[B&255]^L[de+2],k=ue[k>>>24]^oe[F>>16&255]^ce[B>>8&255]^te[M&255]^L[de+3],de+=4,F=q,B=G,M=H;for(se=0;se<4;se++)R[(3&-se)+A]=fe[F>>>24]<<24^fe[B>>16&255]<<16^fe[M>>8&255]<<8^fe[k&255]^L[de++],q=F,F=B,B=M,M=k,k=q}}class s extends i{constructor(){super(i),this.jobs=[],this.delay=1,this.timeout_=null}processJob_(){this.jobs.shift()(),this.jobs.length?this.timeout_=setTimeout(this.processJob_.bind(this),this.delay):this.timeout_=null}push(T){this.jobs.push(T),this.timeout_||(this.timeout_=setTimeout(this.processJob_.bind(this),this.delay))}}const a=function(_){return _<<24|(_&65280)<<8|(_&16711680)>>8|_>>>24},o=function(_,T,E){const w=new Int32Array(_.buffer,_.byteOffset,_.byteLength>>2),D=new n(Array.prototype.slice.call(T)),R=new Uint8Array(_.byteLength),A=new Int32Array(R.buffer);let L,F,B,M,k,q,G,H,re;for(L=E[0],F=E[1],B=E[2],M=E[3],re=0;re<w.length;re+=4)k=a(w[re]),q=a(w[re+1]),G=a(w[re+2]),H=a(w[re+3]),D.decrypt(k,q,G,H,A,re),A[re]=a(A[re]^L),A[re+1]=a(A[re+1]^F),A[re+2]=a(A[re+2]^B),A[re+3]=a(A[re+3]^M),L=k,F=q,B=G,M=H;return R};class l{constructor(T,E,w,D){const R=l.STEP,A=new Int32Array(T.buffer),L=new Uint8Array(T.byteLength);let F=0;for(this.asyncStream_=new s,this.asyncStream_.push(this.decryptChunk_(A.subarray(F,F+R),E,w,L)),F=R;F<A.length;F+=R)w=new Uint32Array([a(A[F-4]),a(A[F-3]),a(A[F-2]),a(A[F-1])]),this.asyncStream_.push(this.decryptChunk_(A.subarray(F,F+R),E,w,L));this.asyncStream_.push(function(){D(null,e(L))})}static get STEP(){return 32e3}decryptChunk_(T,E,w,D){return function(){const R=o(T,E,w);D.set(R,T.byteOffset)}}}var u=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},c;typeof window<"u"?c=window:typeof u<"u"?c=u:typeof self<"u"?c=self:c={};var h=c,m=function(T){return ArrayBuffer.isView==="function"?ArrayBuffer.isView(T):T&&T.buffer instanceof ArrayBuffer},g=h.BigInt||Number;g("0x1"),g("0x100"),g("0x10000"),g("0x1000000"),g("0x100000000"),g("0x10000000000"),g("0x1000000000000"),g("0x100000000000000"),g("0x10000000000000000"),(function(){var _=new Uint16Array([65484]),T=new Uint8Array(_.buffer,_.byteOffset,_.byteLength);return T[0]===255?"big":T[0]===204?"little":"unknown"})();const y=function(_){const T={};return Object.keys(_).forEach(E=>{const w=_[E];m(w)?T[E]={bytes:w.buffer,byteOffset:w.byteOffset,byteLength:w.byteLength}:T[E]=w}),T};self.onmessage=function(_){const T=_.data,E=new Uint8Array(T.encrypted.bytes,T.encrypted.byteOffset,T.encrypted.byteLength),w=new Uint32Array(T.key.bytes,T.key.byteOffset,T.key.byteLength/4),D=new Uint32Array(T.iv.bytes,T.iv.byteOffset,T.iv.byteLength/4);new l(E,w,D,function(R,A){self.postMessage(y({source:T.source,decrypted:A}),[A.buffer])})}}));var soe=VN(noe);const aoe=i=>{let e=i.default?"main":"alternative";return i.characteristics&&i.characteristics.indexOf("public.accessibility.describes-video")>=0&&(e="main-desc"),e},o5=(i,e)=>{i.abort(),i.pause(),e&&e.activePlaylistLoader&&(e.activePlaylistLoader.pause(),e.activePlaylistLoader=null)},qC=(i,e)=>{e.activePlaylistLoader=i,i.load()},ooe=(i,e)=>()=>{const{segmentLoaders:{[i]:t,main:r},mediaTypes:{[i]:n}}=e,s=n.activeTrack(),a=n.getActiveGroup(),o=n.activePlaylistLoader,l=n.lastGroup_;if(!(a&&l&&a.id===l.id)&&(n.lastGroup_=a,n.lastTrack_=s,o5(t,n),!(!a||a.isMainPlaylist))){if(!a.playlistLoader){o&&r.resetEverything();return}t.resyncLoader(),qC(a.playlistLoader,n)}},loe=(i,e)=>()=>{const{segmentLoaders:{[i]:t},mediaTypes:{[i]:r}}=e;r.lastGroup_=null,t.abort(),t.pause()},uoe=(i,e)=>()=>{const{mainPlaylistLoader:t,segmentLoaders:{[i]:r,main:n},mediaTypes:{[i]:s}}=e,a=s.activeTrack(),o=s.getActiveGroup(),l=s.activePlaylistLoader,u=s.lastTrack_;if(!(u&&a&&u.id===a.id)&&(s.lastGroup_=o,s.lastTrack_=a,o5(r,s),!!o)){if(o.isMainPlaylist){if(!a||!u||a.id===u.id)return;const c=e.vhs.playlistController_,h=c.selectPlaylist();if(c.media()===h)return;s.logger_(`track change. Switching main audio from ${u.id} to ${a.id}`),t.pause(),n.resetEverything(),c.fastQualityChange_(h);return}if(i==="AUDIO"){if(!o.playlistLoader){n.setAudio(!0),n.resetEverything();return}r.setAudio(!0),n.setAudio(!1)}if(l===o.playlistLoader){qC(o.playlistLoader,s);return}r.track&&r.track(a),r.resetEverything(),qC(o.playlistLoader,s)}},B_={AUDIO:(i,e)=>()=>{const{mediaTypes:{[i]:t},excludePlaylist:r}=e,n=t.activeTrack(),s=t.activeGroup(),a=(s.filter(l=>l.default)[0]||s[0]).id,o=t.tracks[a];if(n===o){r({error:{message:"Problem encountered loading the default audio track."}});return}_e.log.warn("Problem encountered loading the alternate audio track.Switching back to default.");for(const l in t.tracks)t.tracks[l].enabled=t.tracks[l]===o;t.onTrackChanged()},SUBTITLES:(i,e)=>()=>{const{mediaTypes:{[i]:t}}=e;_e.log.warn("Problem encountered loading the subtitle track.Disabling subtitle track.");const r=t.activeTrack();r&&(r.mode="disabled"),t.onTrackChanged()}},PO={AUDIO:(i,e,t)=>{if(!e)return;const{tech:r,requestOptions:n,segmentLoaders:{[i]:s}}=t;e.on("loadedmetadata",()=>{const a=e.media();s.playlist(a,n),(!r.paused()||a.endList&&r.preload()!=="none")&&s.load()}),e.on("loadedplaylist",()=>{s.playlist(e.media(),n),r.paused()||s.load()}),e.on("error",B_[i](i,t))},SUBTITLES:(i,e,t)=>{const{tech:r,requestOptions:n,segmentLoaders:{[i]:s},mediaTypes:{[i]:a}}=t;e.on("loadedmetadata",()=>{const o=e.media();s.playlist(o,n),s.track(a.activeTrack()),(!r.paused()||o.endList&&r.preload()!=="none")&&s.load()}),e.on("loadedplaylist",()=>{s.playlist(e.media(),n),r.paused()||s.load()}),e.on("error",B_[i](i,t))}},coe={AUDIO:(i,e)=>{const{vhs:t,sourceType:r,segmentLoaders:{[i]:n},requestOptions:s,main:{mediaGroups:a},mediaTypes:{[i]:{groups:o,tracks:l,logger_:u}},mainPlaylistLoader:c}=e,h=og(c.main);(!a[i]||Object.keys(a[i]).length===0)&&(a[i]={main:{default:{default:!0}}},h&&(a[i].main.default.playlists=c.main.playlists));for(const m in a[i]){o[m]||(o[m]=[]);for(const g in a[i][m]){let y=a[i][m][g],_;if(h?(u(`AUDIO group '${m}' label '${g}' is a main playlist`),y.isMainPlaylist=!0,_=null):r==="vhs-json"&&y.playlists?_=new Pf(y.playlists[0],t,s):y.resolvedUri?_=new Pf(y.resolvedUri,t,s):y.playlists&&r==="dash"?_=new $C(y.playlists[0],t,s,c):_=null,y=yi({id:g,playlistLoader:_},y),PO[i](i,y.playlistLoader,e),o[m].push(y),typeof l[g]>"u"){const T=new _e.AudioTrack({id:g,kind:aoe(y),enabled:!1,language:y.language,default:y.default,label:g});l[g]=T}}}n.on("error",B_[i](i,e))},SUBTITLES:(i,e)=>{const{tech:t,vhs:r,sourceType:n,segmentLoaders:{[i]:s},requestOptions:a,main:{mediaGroups:o},mediaTypes:{[i]:{groups:l,tracks:u}},mainPlaylistLoader:c}=e;for(const h in o[i]){l[h]||(l[h]=[]);for(const m in o[i][h]){if(!r.options_.useForcedSubtitles&&o[i][h][m].forced)continue;let g=o[i][h][m],y;if(n==="hls")y=new Pf(g.resolvedUri,r,a);else if(n==="dash"){if(!g.playlists.filter(T=>T.excludeUntil!==1/0).length)return;y=new $C(g.playlists[0],r,a,c)}else n==="vhs-json"&&(y=new Pf(g.playlists?g.playlists[0]:g.resolvedUri,r,a));if(g=yi({id:m,playlistLoader:y},g),PO[i](i,g.playlistLoader,e),l[h].push(g),typeof u[m]>"u"){const _=t.addRemoteTextTrack({id:m,kind:"subtitles",default:g.default&&g.autoselect,language:g.language,label:m},!1).track;u[m]=_}}}s.on("error",B_[i](i,e))},"CLOSED-CAPTIONS":(i,e)=>{const{tech:t,main:{mediaGroups:r},mediaTypes:{[i]:{groups:n,tracks:s}}}=e;for(const a in r[i]){n[a]||(n[a]=[]);for(const o in r[i][a]){const l=r[i][a][o];if(!/^(?:CC|SERVICE)/.test(l.instreamId))continue;const u=t.options_.vhs&&t.options_.vhs.captionServices||{};let c={label:o,language:l.language,instreamId:l.instreamId,default:l.default&&l.autoselect};if(u[c.instreamId]&&(c=yi(c,u[c.instreamId])),c.default===void 0&&delete c.default,n[a].push(yi({id:o},l)),typeof s[o]>"u"){const h=t.addRemoteTextTrack({id:c.instreamId,kind:"captions",default:c.default,language:c.language,label:c.label},!1).track;s[o]=h}}}}},l5=(i,e)=>{for(let t=0;t<i.length;t++)if(b2(e,i[t])||i[t].playlists&&l5(i[t].playlists,e))return!0;return!1},doe=(i,e)=>t=>{const{mainPlaylistLoader:r,mediaTypes:{[i]:{groups:n}}}=e,s=r.media();if(!s)return null;let a=null;s.attributes[i]&&(a=n[s.attributes[i]]);const o=Object.keys(n);if(!a)if(i==="AUDIO"&&o.length>1&&og(e.main))for(let l=0;l<o.length;l++){const u=n[o[l]];if(l5(u,s)){a=u;break}}else n.main?a=n.main:o.length===1&&(a=n[o[0]]);return typeof t>"u"?a:t===null||!a?null:a.filter(l=>l.id===t.id)[0]||null},hoe={AUDIO:(i,e)=>()=>{const{mediaTypes:{[i]:{tracks:t}}}=e;for(const r in t)if(t[r].enabled)return t[r];return null},SUBTITLES:(i,e)=>()=>{const{mediaTypes:{[i]:{tracks:t}}}=e;for(const r in t)if(t[r].mode==="showing"||t[r].mode==="hidden")return t[r];return null}},foe=(i,{mediaTypes:e})=>()=>{const t=e[i].activeTrack();return t?e[i].activeGroup(t):null},poe=i=>{["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(u=>{coe[u](u,i)});const{mediaTypes:e,mainPlaylistLoader:t,tech:r,vhs:n,segmentLoaders:{["AUDIO"]:s,main:a}}=i;["AUDIO","SUBTITLES"].forEach(u=>{e[u].activeGroup=doe(u,i),e[u].activeTrack=hoe[u](u,i),e[u].onGroupChanged=ooe(u,i),e[u].onGroupChanging=loe(u,i),e[u].onTrackChanged=uoe(u,i),e[u].getActiveGroup=foe(u,i)});const o=e.AUDIO.activeGroup();if(o){const u=(o.filter(h=>h.default)[0]||o[0]).id;e.AUDIO.tracks[u].enabled=!0,e.AUDIO.onGroupChanged(),e.AUDIO.onTrackChanged(),e.AUDIO.getActiveGroup().playlistLoader?(a.setAudio(!1),s.setAudio(!0)):a.setAudio(!0)}t.on("mediachange",()=>{["AUDIO","SUBTITLES"].forEach(u=>e[u].onGroupChanged())}),t.on("mediachanging",()=>{["AUDIO","SUBTITLES"].forEach(u=>e[u].onGroupChanging())});const l=()=>{e.AUDIO.onTrackChanged(),r.trigger({type:"usage",name:"vhs-audio-change"})};r.audioTracks().addEventListener("change",l),r.remoteTextTracks().addEventListener("change",e.SUBTITLES.onTrackChanged),n.on("dispose",()=>{r.audioTracks().removeEventListener("change",l),r.remoteTextTracks().removeEventListener("change",e.SUBTITLES.onTrackChanged)}),r.clearTracks("audio");for(const u in e.AUDIO.tracks)r.audioTracks().addTrack(e.AUDIO.tracks[u])},moe=()=>{const i={};return["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(e=>{i[e]={groups:{},tracks:{},activePlaylistLoader:null,activeGroup:Ju,activeTrack:Ju,getActiveGroup:Ju,onGroupChanged:Ju,onTrackChanged:Ju,lastTrack_:null,logger_:Uo(`MediaGroups[${e}]`)}}),i};let RO=class{constructor(){this.priority_=[],this.pathwayClones_=new Map}set version(e){e===1&&(this.version_=e)}set ttl(e){this.ttl_=e||300}set reloadUri(e){e&&(this.reloadUri_=Sa(this.reloadUri_,e))}set priority(e){e&&e.length&&(this.priority_=e)}set pathwayClones(e){e&&e.length&&(this.pathwayClones_=new Map(e.map(t=>[t.ID,t])))}get version(){return this.version_}get ttl(){return this.ttl_}get reloadUri(){return this.reloadUri_}get priority(){return this.priority_}get pathwayClones(){return this.pathwayClones_}},goe=class extends _e.EventTarget{constructor(e,t){super(),this.currentPathway=null,this.defaultPathway=null,this.queryBeforeStart=!1,this.availablePathways_=new Set,this.steeringManifest=new RO,this.proxyServerUrl_=null,this.manifestType_=null,this.ttlTimeout_=null,this.request_=null,this.currentPathwayClones=new Map,this.nextPathwayClones=new Map,this.excludedSteeringManifestURLs=new Set,this.logger_=Uo("Content Steering"),this.xhr_=e,this.getBandwidth_=t}assignTagProperties(e,t){this.manifestType_=t.serverUri?"HLS":"DASH";const r=t.serverUri||t.serverURL;if(!r){this.logger_(`steering manifest URL is ${r}, cannot request steering manifest.`),this.trigger("error");return}if(r.startsWith("data:")){this.decodeDataUriManifest_(r.substring(r.indexOf(",")+1));return}this.steeringManifest.reloadUri=Sa(e,r),this.defaultPathway=t.pathwayId||t.defaultServiceLocation,this.queryBeforeStart=t.queryBeforeStart,this.proxyServerUrl_=t.proxyServerURL,this.defaultPathway&&!this.queryBeforeStart&&this.trigger("content-steering")}requestSteeringManifest(e){const t=this.steeringManifest.reloadUri;if(!t)return;const r=e?t:this.getRequestURI(t);if(!r){this.logger_("No valid content steering manifest URIs. Stopping content steering."),this.trigger("error"),this.dispose();return}const n={contentSteeringInfo:{uri:r}};this.trigger({type:"contentsteeringloadstart",metadata:n}),this.request_=this.xhr_({uri:r,requestType:"content-steering-manifest"},(s,a)=>{if(s){if(a.status===410){this.logger_(`manifest request 410 ${s}.`),this.logger_(`There will be no more content steering requests to ${r} this session.`),this.excludedSteeringManifestURLs.add(r);return}if(a.status===429){const u=a.responseHeaders["retry-after"];this.logger_(`manifest request 429 ${s}.`),this.logger_(`content steering will retry in ${u} seconds.`),this.startTTLTimeout_(parseInt(u,10));return}this.logger_(`manifest failed to load ${s}.`),this.startTTLTimeout_();return}this.trigger({type:"contentsteeringloadcomplete",metadata:n});let o;try{o=JSON.parse(this.request_.responseText)}catch(u){const c={errorType:_e.Error.StreamingContentSteeringParserError,error:u};this.trigger({type:"error",metadata:c})}this.assignSteeringProperties_(o);const l={contentSteeringInfo:n.contentSteeringInfo,contentSteeringManifest:{version:this.steeringManifest.version,reloadUri:this.steeringManifest.reloadUri,priority:this.steeringManifest.priority}};this.trigger({type:"contentsteeringparsed",metadata:l}),this.startTTLTimeout_()})}setProxyServerUrl_(e){const t=new X.URL(e),r=new X.URL(this.proxyServerUrl_);return r.searchParams.set("url",encodeURI(t.toString())),this.setSteeringParams_(r.toString())}decodeDataUriManifest_(e){const t=JSON.parse(X.atob(e));this.assignSteeringProperties_(t)}setSteeringParams_(e){const t=new X.URL(e),r=this.getPathway(),n=this.getBandwidth_();if(r){const s=`_${this.manifestType_}_pathway`;t.searchParams.set(s,r)}if(n){const s=`_${this.manifestType_}_throughput`;t.searchParams.set(s,n)}return t.toString()}assignSteeringProperties_(e){if(this.steeringManifest.version=e.VERSION,!this.steeringManifest.version){this.logger_(`manifest version is ${e.VERSION}, which is not supported.`),this.trigger("error");return}this.steeringManifest.ttl=e.TTL,this.steeringManifest.reloadUri=e["RELOAD-URI"],this.steeringManifest.priority=e["PATHWAY-PRIORITY"]||e["SERVICE-LOCATION-PRIORITY"],this.steeringManifest.pathwayClones=e["PATHWAY-CLONES"],this.nextPathwayClones=this.steeringManifest.pathwayClones,this.availablePathways_.size||(this.logger_("There are no available pathways for content steering. Ending content steering."),this.trigger("error"),this.dispose());const r=(n=>{for(const s of n)if(this.availablePathways_.has(s))return s;return[...this.availablePathways_][0]})(this.steeringManifest.priority);this.currentPathway!==r&&(this.currentPathway=r,this.trigger("content-steering"))}getPathway(){return this.currentPathway||this.defaultPathway}getRequestURI(e){if(!e)return null;const t=n=>this.excludedSteeringManifestURLs.has(n);if(this.proxyServerUrl_){const n=this.setProxyServerUrl_(e);if(!t(n))return n}const r=this.setSteeringParams_(e);return t(r)?null:r}startTTLTimeout_(e=this.steeringManifest.ttl){const t=e*1e3;this.ttlTimeout_=X.setTimeout(()=>{this.requestSteeringManifest()},t)}clearTTLTimeout_(){X.clearTimeout(this.ttlTimeout_),this.ttlTimeout_=null}abort(){this.request_&&this.request_.abort(),this.request_=null}dispose(){this.off("content-steering"),this.off("error"),this.abort(),this.clearTTLTimeout_(),this.currentPathway=null,this.defaultPathway=null,this.queryBeforeStart=null,this.proxyServerUrl_=null,this.manifestType_=null,this.ttlTimeout_=null,this.request_=null,this.excludedSteeringManifestURLs=new Set,this.availablePathways_=new Set,this.steeringManifest=new RO}addAvailablePathway(e){e&&this.availablePathways_.add(e)}clearAvailablePathways(){this.availablePathways_.clear()}excludePathway(e){return this.availablePathways_.delete(e)}didDASHTagChange(e,t){return!t&&this.steeringManifest.reloadUri||t&&(Sa(e,t.serverURL)!==this.steeringManifest.reloadUri||t.defaultServiceLocation!==this.defaultPathway||t.queryBeforeStart!==this.queryBeforeStart||t.proxyServerURL!==this.proxyServerUrl_)}getAvailablePathways(){return this.availablePathways_}};const voe=10;let Wu;const yoe=["mediaRequests","mediaRequestsAborted","mediaRequestsTimedout","mediaRequestsErrored","mediaTransferDuration","mediaBytesTransferred","mediaAppends"],_oe=function(i){return this.audioSegmentLoader_[i]+this.mainSegmentLoader_[i]},xoe=function({currentPlaylist:i,buffered:e,currentTime:t,nextPlaylist:r,bufferLowWaterLine:n,bufferHighWaterLine:s,duration:a,bufferBasedABR:o,log:l}){if(!r)return _e.log.warn("We received no playlist to switch to. Please check your stream."),!1;const u=`allowing switch ${i&&i.id||"null"} -> ${r.id}`;if(!i)return l(`${u} as current playlist is not set`),!0;if(r.id===i.id)return!1;const c=!!Df(e,t).length;if(!i.endList)return!c&&typeof i.partTargetDuration=="number"?(l(`not ${u} as current playlist is live llhls, but currentTime isn't in buffered.`),!1):(l(`${u} as current playlist is live`),!0);const h=_2(e,t),m=o?qn.EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE:qn.MAX_BUFFER_LOW_WATER_LINE;if(a<m)return l(`${u} as duration < max low water line (${a} < ${m})`),!0;const g=r.attributes.BANDWIDTH,y=i.attributes.BANDWIDTH;if(g<y&&(!o||h<s)){let _=`${u} as next bandwidth < current bandwidth (${g} < ${y})`;return o&&(_+=` and forwardBuffer < bufferHighWaterLine (${h} < ${s})`),l(_),!0}if((!o||g>y)&&h>=n){let _=`${u} as forwardBuffer >= bufferLowWaterLine (${h} >= ${n})`;return o&&(_+=` and next bandwidth > current bandwidth (${g} > ${y})`),l(_),!0}return l(`not ${u} as no switching criteria met`),!1};let Toe=class extends _e.EventTarget{constructor(e){super();const{src:t,withCredentials:r,tech:n,bandwidth:s,externVhs:a,useCueTags:o,playlistExclusionDuration:l,enableLowInitialPlaylist:u,sourceType:c,cacheEncryptionKeys:h,bufferBasedABR:m,leastPixelDiffSelector:g,captionServices:y,experimentalUseMMS:_}=e;if(!t)throw new Error("A non-empty playlist URL or JSON manifest string is required");let{maxPlaylistRetries:T}=e;(T===null||typeof T>"u")&&(T=1/0),Wu=a,this.bufferBasedABR=!!m,this.leastPixelDiffSelector=!!g,this.withCredentials=r,this.tech_=n,this.vhs_=n.vhs,this.player_=e.player_,this.sourceType_=c,this.useCueTags_=o,this.playlistExclusionDuration=l,this.maxPlaylistRetries=T,this.enableLowInitialPlaylist=u,this.useCueTags_&&(this.cueTagsTrack_=this.tech_.addTextTrack("metadata","ad-cues"),this.cueTagsTrack_.inBandMetadataTrackDispatchType=""),this.requestOptions_={withCredentials:r,maxPlaylistRetries:T,timeout:null},this.on("error",this.pauseLoading),this.mediaTypes_=moe(),_&&X.ManagedMediaSource?(this.tech_.el_.disableRemotePlayback=!0,this.mediaSource=new X.ManagedMediaSource,_e.log("Using ManagedMediaSource")):X.MediaSource&&(this.mediaSource=new X.MediaSource),this.handleDurationChange_=this.handleDurationChange_.bind(this),this.handleSourceOpen_=this.handleSourceOpen_.bind(this),this.handleSourceEnded_=this.handleSourceEnded_.bind(this),this.load=this.load.bind(this),this.pause=this.pause.bind(this),this.mediaSource.addEventListener("durationchange",this.handleDurationChange_),this.mediaSource.addEventListener("sourceopen",this.handleSourceOpen_),this.mediaSource.addEventListener("sourceended",this.handleSourceEnded_),this.mediaSource.addEventListener("startstreaming",this.load),this.mediaSource.addEventListener("endstreaming",this.pause),this.seekable_=hs(),this.hasPlayed_=!1,this.syncController_=new roe(e),this.segmentMetadataTrack_=n.addRemoteTextTrack({kind:"metadata",label:"segment-metadata"},!1).track,this.decrypter_=new soe,this.sourceUpdater_=new s5(this.mediaSource),this.inbandTextTracks_={},this.timelineChangeController_=new ioe,this.keyStatusMap_=new Map;const E={vhs:this.vhs_,parse708captions:e.parse708captions,useDtsForTimestampOffset:e.useDtsForTimestampOffset,captionServices:y,mediaSource:this.mediaSource,currentTime:this.tech_.currentTime.bind(this.tech_),seekable:()=>this.seekable(),seeking:()=>this.tech_.seeking(),duration:()=>this.duration(),hasPlayed:()=>this.hasPlayed_,goalBufferLength:()=>this.goalBufferLength(),bandwidth:s,syncController:this.syncController_,decrypter:this.decrypter_,sourceType:this.sourceType_,inbandTextTracks:this.inbandTextTracks_,cacheEncryptionKeys:h,sourceUpdater:this.sourceUpdater_,timelineChangeController:this.timelineChangeController_,exactManifestTimings:e.exactManifestTimings,addMetadataToTextTrack:this.addMetadataToTextTrack.bind(this)};this.mainPlaylistLoader_=this.sourceType_==="dash"?new $C(t,this.vhs_,yi(this.requestOptions_,{addMetadataToTextTrack:this.addMetadataToTextTrack.bind(this)})):new Pf(t,this.vhs_,yi(this.requestOptions_,{addDateRangesToTextTrack:this.addDateRangesToTextTrack_.bind(this)})),this.setupMainPlaylistLoaderListeners_(),this.mainSegmentLoader_=new HC(yi(E,{segmentMetadataTrack:this.segmentMetadataTrack_,loaderType:"main"}),e),this.audioSegmentLoader_=new HC(yi(E,{loaderType:"audio"}),e),this.subtitleSegmentLoader_=new Qae(yi(E,{loaderType:"vtt",featuresNativeTextTracks:this.tech_.featuresNativeTextTracks,loadVttJs:()=>new Promise((R,A)=>{function L(){n.off("vttjserror",F),R()}function F(){n.off("vttjsloaded",L),A()}n.one("vttjsloaded",L),n.one("vttjserror",F),n.addWebVttScript_()})}),e);const w=()=>this.mainSegmentLoader_.bandwidth;this.contentSteeringController_=new goe(this.vhs_.xhr,w),this.setupSegmentLoaderListeners_(),this.bufferBasedABR&&(this.mainPlaylistLoader_.one("loadedplaylist",()=>this.startABRTimer_()),this.tech_.on("pause",()=>this.stopABRTimer_()),this.tech_.on("play",()=>this.startABRTimer_())),yoe.forEach(R=>{this[R+"_"]=_oe.bind(this,R)}),this.logger_=Uo("pc"),this.triggeredFmp4Usage=!1,this.tech_.preload()==="none"?(this.loadOnPlay_=()=>{this.loadOnPlay_=null,this.mainPlaylistLoader_.load()},this.tech_.one("play",this.loadOnPlay_)):this.mainPlaylistLoader_.load(),this.timeToLoadedData__=-1,this.mainAppendsToLoadedData__=-1,this.audioAppendsToLoadedData__=-1;const D=this.tech_.preload()==="none"?"play":"loadstart";this.tech_.one(D,()=>{const R=Date.now();this.tech_.one("loadeddata",()=>{this.timeToLoadedData__=Date.now()-R,this.mainAppendsToLoadedData__=this.mainSegmentLoader_.mediaAppends,this.audioAppendsToLoadedData__=this.audioSegmentLoader_.mediaAppends})})}mainAppendsToLoadedData_(){return this.mainAppendsToLoadedData__}audioAppendsToLoadedData_(){return this.audioAppendsToLoadedData__}appendsToLoadedData_(){const e=this.mainAppendsToLoadedData_(),t=this.audioAppendsToLoadedData_();return e===-1||t===-1?-1:e+t}timeToLoadedData_(){return this.timeToLoadedData__}checkABR_(e="abr"){const t=this.selectPlaylist();t&&this.shouldSwitchToMedia_(t)&&this.switchMedia_(t,e)}switchMedia_(e,t,r){const n=this.media(),s=n&&(n.id||n.uri),a=e&&(e.id||e.uri);if(s&&s!==a){this.logger_(`switch media ${s} -> ${a} from ${t}`);const o={renditionInfo:{id:a,bandwidth:e.attributes.BANDWIDTH,resolution:e.attributes.RESOLUTION,codecs:e.attributes.CODECS},cause:t};this.trigger({type:"renditionselected",metadata:o}),this.tech_.trigger({type:"usage",name:`vhs-rendition-change-${t}`})}this.mainPlaylistLoader_.media(e,r)}switchMediaForDASHContentSteering_(){["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(e=>{const t=this.mediaTypes_[e],r=t?t.activeGroup():null,n=this.contentSteeringController_.getPathway();if(r&&n){const a=(r.length?r[0].playlists:r.playlists).filter(o=>o.attributes.serviceLocation===n);a.length&&this.mediaTypes_[e].activePlaylistLoader.media(a[0])}})}startABRTimer_(){this.stopABRTimer_(),this.abrTimer_=X.setInterval(()=>this.checkABR_(),250)}stopABRTimer_(){this.tech_.scrubbing&&this.tech_.scrubbing()||(X.clearInterval(this.abrTimer_),this.abrTimer_=null)}getAudioTrackPlaylists_(){const e=this.main(),t=e&&e.playlists||[];if(!e||!e.mediaGroups||!e.mediaGroups.AUDIO)return t;const r=e.mediaGroups.AUDIO,n=Object.keys(r);let s;if(Object.keys(this.mediaTypes_.AUDIO.groups).length)s=this.mediaTypes_.AUDIO.activeTrack();else{const o=r.main||n.length&&r[n[0]];for(const l in o)if(o[l].default){s={label:l};break}}if(!s)return t;const a=[];for(const o in r)if(r[o][s.label]){const l=r[o][s.label];if(l.playlists&&l.playlists.length)a.push.apply(a,l.playlists);else if(l.uri)a.push(l);else if(e.playlists.length)for(let u=0;u<e.playlists.length;u++){const c=e.playlists[u];c.attributes&&c.attributes.AUDIO&&c.attributes.AUDIO===o&&a.push(c)}}return a.length?a:t}setupMainPlaylistLoaderListeners_(){this.mainPlaylistLoader_.on("loadedmetadata",()=>{const t=this.mainPlaylistLoader_.media(),r=t.targetDuration*1.5*1e3;MC(this.mainPlaylistLoader_.main,this.mainPlaylistLoader_.media())?this.requestOptions_.timeout=0:this.requestOptions_.timeout=r,t.endList&&this.tech_.preload()!=="none"&&(this.mainSegmentLoader_.playlist(t,this.requestOptions_),this.mainSegmentLoader_.load()),poe({sourceType:this.sourceType_,segmentLoaders:{AUDIO:this.audioSegmentLoader_,SUBTITLES:this.subtitleSegmentLoader_,main:this.mainSegmentLoader_},tech:this.tech_,requestOptions:this.requestOptions_,mainPlaylistLoader:this.mainPlaylistLoader_,vhs:this.vhs_,main:this.main(),mediaTypes:this.mediaTypes_,excludePlaylist:this.excludePlaylist.bind(this)}),this.triggerPresenceUsage_(this.main(),t),this.setupFirstPlay(),!this.mediaTypes_.AUDIO.activePlaylistLoader||this.mediaTypes_.AUDIO.activePlaylistLoader.media()?this.trigger("selectedinitialmedia"):this.mediaTypes_.AUDIO.activePlaylistLoader.one("loadedmetadata",()=>{this.trigger("selectedinitialmedia")})}),this.mainPlaylistLoader_.on("loadedplaylist",()=>{this.loadOnPlay_&&this.tech_.off("play",this.loadOnPlay_);let t=this.mainPlaylistLoader_.media();if(!t){this.attachContentSteeringListeners_(),this.initContentSteeringController_(),this.excludeUnsupportedVariants_();let r;if(this.enableLowInitialPlaylist&&(r=this.selectInitialPlaylist()),r||(r=this.selectPlaylist()),!r||!this.shouldSwitchToMedia_(r)||(this.initialMedia_=r,this.switchMedia_(this.initialMedia_,"initial"),!(this.sourceType_==="vhs-json"&&this.initialMedia_.segments)))return;t=this.initialMedia_}this.handleUpdatedMediaPlaylist(t)}),this.mainPlaylistLoader_.on("error",()=>{const t=this.mainPlaylistLoader_.error;this.excludePlaylist({playlistToExclude:t.playlist,error:t})}),this.mainPlaylistLoader_.on("mediachanging",()=>{this.mainSegmentLoader_.abort(),this.mainSegmentLoader_.pause()}),this.mainPlaylistLoader_.on("mediachange",()=>{const t=this.mainPlaylistLoader_.media(),r=t.targetDuration*1.5*1e3;MC(this.mainPlaylistLoader_.main,this.mainPlaylistLoader_.media())?this.requestOptions_.timeout=0:this.requestOptions_.timeout=r,this.sourceType_==="dash"&&this.mainPlaylistLoader_.load(),this.mainSegmentLoader_.pause(),this.mainSegmentLoader_.playlist(t,this.requestOptions_),this.waitingForFastQualityPlaylistReceived_?this.runFastQualitySwitch_():this.mainSegmentLoader_.load(),this.tech_.trigger({type:"mediachange",bubbles:!0})}),this.mainPlaylistLoader_.on("playlistunchanged",()=>{const t=this.mainPlaylistLoader_.media();if(t.lastExcludeReason_==="playlist-unchanged")return;this.stuckAtPlaylistEnd_(t)&&(this.excludePlaylist({error:{message:"Playlist no longer updating.",reason:"playlist-unchanged"}}),this.tech_.trigger("playliststuck"))}),this.mainPlaylistLoader_.on("renditiondisabled",()=>{this.tech_.trigger({type:"usage",name:"vhs-rendition-disabled"})}),this.mainPlaylistLoader_.on("renditionenabled",()=>{this.tech_.trigger({type:"usage",name:"vhs-rendition-enabled"})}),["manifestrequeststart","manifestrequestcomplete","manifestparsestart","manifestparsecomplete","playlistrequeststart","playlistrequestcomplete","playlistparsestart","playlistparsecomplete","renditiondisabled","renditionenabled"].forEach(t=>{this.mainPlaylistLoader_.on(t,r=>{this.player_.trigger(Jt({},r))})})}handleUpdatedMediaPlaylist(e){this.useCueTags_&&this.updateAdCues_(e),this.mainSegmentLoader_.pause(),this.mainSegmentLoader_.playlist(e,this.requestOptions_),this.waitingForFastQualityPlaylistReceived_&&this.runFastQualitySwitch_(),this.updateDuration(!e.endList),this.tech_.paused()||(this.mainSegmentLoader_.load(),this.audioSegmentLoader_&&this.audioSegmentLoader_.load())}triggerPresenceUsage_(e,t){const r=e.mediaGroups||{};let n=!0;const s=Object.keys(r.AUDIO);for(const a in r.AUDIO)for(const o in r.AUDIO[a])r.AUDIO[a][o].uri||(n=!1);n&&this.tech_.trigger({type:"usage",name:"vhs-demuxed"}),Object.keys(r.SUBTITLES).length&&this.tech_.trigger({type:"usage",name:"vhs-webvtt"}),Wu.Playlist.isAes(t)&&this.tech_.trigger({type:"usage",name:"vhs-aes"}),s.length&&Object.keys(r.AUDIO[s[0]]).length>1&&this.tech_.trigger({type:"usage",name:"vhs-alternate-audio"}),this.useCueTags_&&this.tech_.trigger({type:"usage",name:"vhs-playlist-cue-tags"})}shouldSwitchToMedia_(e){const t=this.mainPlaylistLoader_.media()||this.mainPlaylistLoader_.pendingMedia_,r=this.tech_.currentTime(),n=this.bufferLowWaterLine(),s=this.bufferHighWaterLine(),a=this.tech_.buffered();return xoe({buffered:a,currentTime:r,currentPlaylist:t,nextPlaylist:e,bufferLowWaterLine:n,bufferHighWaterLine:s,duration:this.duration(),bufferBasedABR:this.bufferBasedABR,log:this.logger_})}setupSegmentLoaderListeners_(){this.mainSegmentLoader_.on("bandwidthupdate",()=>{this.checkABR_("bandwidthupdate"),this.tech_.trigger("bandwidthupdate")}),this.mainSegmentLoader_.on("timeout",()=>{this.bufferBasedABR&&this.mainSegmentLoader_.load()}),this.bufferBasedABR||this.mainSegmentLoader_.on("progress",()=>{this.trigger("progress")}),this.mainSegmentLoader_.on("error",()=>{const r=this.mainSegmentLoader_.error();this.excludePlaylist({playlistToExclude:r.playlist,error:r})}),this.mainSegmentLoader_.on("appenderror",()=>{this.error=this.mainSegmentLoader_.error_,this.trigger("error")}),this.mainSegmentLoader_.on("syncinfoupdate",()=>{this.onSyncInfoUpdate_()}),this.mainSegmentLoader_.on("timestampoffset",()=>{this.tech_.trigger({type:"usage",name:"vhs-timestamp-offset"})}),this.audioSegmentLoader_.on("syncinfoupdate",()=>{this.onSyncInfoUpdate_()}),this.audioSegmentLoader_.on("appenderror",()=>{this.error=this.audioSegmentLoader_.error_,this.trigger("error")}),this.mainSegmentLoader_.on("ended",()=>{this.logger_("main segment loader ended"),this.onEndOfStream()}),this.timelineChangeController_.on("audioTimelineBehind",()=>{const r=this.audioSegmentLoader_.pendingSegment_;if(!r||!r.segment||!r.segment.syncInfo)return;const n=r.segment.syncInfo.end+.01;this.tech_.setCurrentTime(n)}),this.mainSegmentLoader_.on("earlyabort",r=>{this.bufferBasedABR||(this.delegateLoaders_("all",["abort"]),this.excludePlaylist({error:{message:"Aborted early because there isn't enough bandwidth to complete the request without rebuffering."},playlistExclusionDuration:voe}))});const e=()=>{if(!this.sourceUpdater_.hasCreatedSourceBuffers())return this.tryToCreateSourceBuffers_();const r=this.getCodecsOrExclude_();r&&this.sourceUpdater_.addOrChangeSourceBuffers(r)};this.mainSegmentLoader_.on("trackinfo",e),this.audioSegmentLoader_.on("trackinfo",e),this.mainSegmentLoader_.on("fmp4",()=>{this.triggeredFmp4Usage||(this.tech_.trigger({type:"usage",name:"vhs-fmp4"}),this.triggeredFmp4Usage=!0)}),this.audioSegmentLoader_.on("fmp4",()=>{this.triggeredFmp4Usage||(this.tech_.trigger({type:"usage",name:"vhs-fmp4"}),this.triggeredFmp4Usage=!0)}),this.audioSegmentLoader_.on("ended",()=>{this.logger_("audioSegmentLoader ended"),this.onEndOfStream()}),["segmentselected","segmentloadstart","segmentloaded","segmentkeyloadstart","segmentkeyloadcomplete","segmentdecryptionstart","segmentdecryptioncomplete","segmenttransmuxingstart","segmenttransmuxingcomplete","segmenttransmuxingtrackinfoavailable","segmenttransmuxingtiminginfoavailable","segmentappendstart","appendsdone","bandwidthupdated","timelinechange","codecschange"].forEach(r=>{this.mainSegmentLoader_.on(r,n=>{this.player_.trigger(Jt({},n))}),this.audioSegmentLoader_.on(r,n=>{this.player_.trigger(Jt({},n))}),this.subtitleSegmentLoader_.on(r,n=>{this.player_.trigger(Jt({},n))})})}mediaSecondsLoaded_(){return Math.max(this.audioSegmentLoader_.mediaSecondsLoaded+this.mainSegmentLoader_.mediaSecondsLoaded)}load(){this.mainSegmentLoader_.load(),this.mediaTypes_.AUDIO.activePlaylistLoader&&this.audioSegmentLoader_.load(),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&this.subtitleSegmentLoader_.load()}pause(){this.mainSegmentLoader_.pause(),this.mediaTypes_.AUDIO.activePlaylistLoader&&this.audioSegmentLoader_.pause(),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&this.subtitleSegmentLoader_.pause()}fastQualityChange_(e=this.selectPlaylist()){if(e&&e===this.mainPlaylistLoader_.media()){this.logger_("skipping fastQualityChange because new media is same as old");return}this.switchMedia_(e,"fast-quality"),this.waitingForFastQualityPlaylistReceived_=!0}runFastQualitySwitch_(){this.waitingForFastQualityPlaylistReceived_=!1,this.mainSegmentLoader_.pause(),this.mainSegmentLoader_.resetEverything(()=>{this.mainSegmentLoader_.load()})}play(){if(this.setupFirstPlay())return;this.tech_.ended()&&this.tech_.setCurrentTime(0),this.hasPlayed_&&this.load();const e=this.tech_.seekable();if(this.tech_.duration()===1/0&&this.tech_.currentTime()<e.start(0))return this.tech_.setCurrentTime(e.end(e.length-1))}setupFirstPlay(){const e=this.mainPlaylistLoader_.media();if(!e||this.tech_.paused()||this.hasPlayed_)return!1;if(!e.endList||e.start){const t=this.seekable();if(!t.length)return!1;const r=t.end(0);let n=r;if(e.start){const s=e.start.timeOffset;s<0?n=Math.max(r+s,t.start(0)):n=Math.min(r,s)}this.trigger("firstplay"),this.tech_.setCurrentTime(n)}return this.hasPlayed_=!0,this.load(),!0}handleSourceOpen_(){if(this.tryToCreateSourceBuffers_(),this.tech_.autoplay()){const e=this.tech_.play();typeof e<"u"&&typeof e.then=="function"&&e.then(null,t=>{})}this.trigger("sourceopen")}handleSourceEnded_(){if(!this.inbandTextTracks_.metadataTrack_)return;const e=this.inbandTextTracks_.metadataTrack_.cues;if(!e||!e.length)return;const t=this.duration();e[e.length-1].endTime=isNaN(t)||Math.abs(t)===1/0?Number.MAX_VALUE:t}handleDurationChange_(){this.tech_.trigger("durationchange")}onEndOfStream(){let e=this.mainSegmentLoader_.ended_;if(this.mediaTypes_.AUDIO.activePlaylistLoader){const t=this.mainSegmentLoader_.getCurrentMediaInfo_();!t||t.hasVideo?e=e&&this.audioSegmentLoader_.ended_:e=this.audioSegmentLoader_.ended_}e&&(this.stopABRTimer_(),this.sourceUpdater_.endOfStream())}stuckAtPlaylistEnd_(e){if(!this.seekable().length)return!1;const r=this.syncController_.getExpiredTime(e,this.duration());if(r===null)return!1;const n=Wu.Playlist.playlistEnd(e,r),s=this.tech_.currentTime(),a=this.tech_.buffered();if(!a.length)return n-s<=Jl;const o=a.end(a.length-1);return o-s<=Jl&&n-o<=Jl}excludePlaylist({playlistToExclude:e=this.mainPlaylistLoader_.media(),error:t={},playlistExclusionDuration:r}){if(e=e||this.mainPlaylistLoader_.media(),r=r||t.playlistExclusionDuration||this.playlistExclusionDuration,!e){this.error=t,this.mediaSource.readyState!=="open"?this.trigger("error"):this.sourceUpdater_.endOfStream("network");return}e.playlistErrors_++;const n=this.mainPlaylistLoader_.main.playlists,s=n.filter(pT),a=s.length===1&&s[0]===e;if(n.length===1&&r!==1/0)return _e.log.warn(`Problem encountered with playlist ${e.id}. Trying again since it is the only playlist.`),this.tech_.trigger("retryplaylist"),this.mainPlaylistLoader_.load(a);if(a){if(this.main().contentSteering){const y=this.pathwayAttribute_(e),_=this.contentSteeringController_.steeringManifest.ttl*1e3;this.contentSteeringController_.excludePathway(y),this.excludeThenChangePathway_(),setTimeout(()=>{this.contentSteeringController_.addAvailablePathway(y)},_);return}let g=!1;n.forEach(y=>{if(y===e)return;const _=y.excludeUntil;typeof _<"u"&&_!==1/0&&(g=!0,delete y.excludeUntil)}),g&&(_e.log.warn("Removing other playlists from the exclusion list because the last rendition is about to be excluded."),this.tech_.trigger("retryplaylist"))}let o;e.playlistErrors_>this.maxPlaylistRetries?o=1/0:o=Date.now()+r*1e3,e.excludeUntil=o,t.reason&&(e.lastExcludeReason_=t.reason),this.tech_.trigger("excludeplaylist"),this.tech_.trigger({type:"usage",name:"vhs-rendition-excluded"});const l=this.selectPlaylist();if(!l){this.error="Playback cannot continue. No available working or supported playlists.",this.trigger("error");return}const u=t.internal?this.logger_:_e.log.warn,c=t.message?" "+t.message:"";u(`${t.internal?"Internal problem":"Problem"} encountered with playlist ${e.id}.${c} Switching to playlist ${l.id}.`),l.attributes.AUDIO!==e.attributes.AUDIO&&this.delegateLoaders_("audio",["abort","pause"]),l.attributes.SUBTITLES!==e.attributes.SUBTITLES&&this.delegateLoaders_("subtitle",["abort","pause"]),this.delegateLoaders_("main",["abort","pause"]);const h=l.targetDuration/2*1e3||5*1e3,m=typeof l.lastRequest=="number"&&Date.now()-l.lastRequest<=h;return this.switchMedia_(l,"exclude",a||m)}pauseLoading(){this.delegateLoaders_("all",["abort","pause"]),this.stopABRTimer_()}delegateLoaders_(e,t){const r=[],n=e==="all";(n||e==="main")&&r.push(this.mainPlaylistLoader_);const s=[];(n||e==="audio")&&s.push("AUDIO"),(n||e==="subtitle")&&(s.push("CLOSED-CAPTIONS"),s.push("SUBTITLES")),s.forEach(a=>{const o=this.mediaTypes_[a]&&this.mediaTypes_[a].activePlaylistLoader;o&&r.push(o)}),["main","audio","subtitle"].forEach(a=>{const o=this[`${a}SegmentLoader_`];o&&(e===a||e==="all")&&r.push(o)}),r.forEach(a=>t.forEach(o=>{typeof a[o]=="function"&&a[o]()}))}setCurrentTime(e){const t=Df(this.tech_.buffered(),e);if(!(this.mainPlaylistLoader_&&this.mainPlaylistLoader_.media())||!this.mainPlaylistLoader_.media().segments)return 0;if(t&&t.length)return e;this.mainSegmentLoader_.pause(),this.mainSegmentLoader_.resetEverything(),this.mediaTypes_.AUDIO.activePlaylistLoader&&(this.audioSegmentLoader_.pause(),this.audioSegmentLoader_.resetEverything()),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&(this.subtitleSegmentLoader_.pause(),this.subtitleSegmentLoader_.resetEverything()),this.load()}duration(){if(!this.mainPlaylistLoader_)return 0;const e=this.mainPlaylistLoader_.media();return e?e.endList?this.mediaSource?this.mediaSource.duration:Wu.Playlist.duration(e):1/0:0}seekable(){return this.seekable_}onSyncInfoUpdate_(){let e;if(!this.mainPlaylistLoader_)return;let t=this.mainPlaylistLoader_.media();if(!t)return;let r=this.syncController_.getExpiredTime(t,this.duration());if(r===null)return;const n=this.mainPlaylistLoader_.main,s=Wu.Playlist.seekable(t,r,Wu.Playlist.liveEdgeDelay(n,t));if(s.length===0||this.mediaTypes_.AUDIO.activePlaylistLoader&&(t=this.mediaTypes_.AUDIO.activePlaylistLoader.media(),r=this.syncController_.getExpiredTime(t,this.duration()),r===null||(e=Wu.Playlist.seekable(t,r,Wu.Playlist.liveEdgeDelay(n,t)),e.length===0)))return;let a,o;if(this.seekable_&&this.seekable_.length&&(a=this.seekable_.end(0),o=this.seekable_.start(0)),e?e.start(0)>s.end(0)||s.start(0)>e.end(0)?this.seekable_=s:this.seekable_=hs([[e.start(0)>s.start(0)?e.start(0):s.start(0),e.end(0)<s.end(0)?e.end(0):s.end(0)]]):this.seekable_=s,this.seekable_&&this.seekable_.length&&this.seekable_.end(0)===a&&this.seekable_.start(0)===o)return;this.logger_(`seekable updated [${xN(this.seekable_)}]`);const l={seekableRanges:this.seekable_};this.trigger({type:"seekablerangeschanged",metadata:l}),this.tech_.trigger("seekablechanged")}updateDuration(e){if(this.updateDuration_&&(this.mediaSource.removeEventListener("sourceopen",this.updateDuration_),this.updateDuration_=null),this.mediaSource.readyState!=="open"){this.updateDuration_=this.updateDuration.bind(this,e),this.mediaSource.addEventListener("sourceopen",this.updateDuration_);return}if(e){const n=this.seekable();if(!n.length)return;(isNaN(this.mediaSource.duration)||this.mediaSource.duration<n.end(n.length-1))&&this.sourceUpdater_.setDuration(n.end(n.length-1));return}const t=this.tech_.buffered();let r=Wu.Playlist.duration(this.mainPlaylistLoader_.media());t.length>0&&(r=Math.max(r,t.end(t.length-1))),this.mediaSource.duration!==r&&this.sourceUpdater_.setDuration(r)}dispose(){this.trigger("dispose"),this.decrypter_.terminate(),this.mainPlaylistLoader_.dispose(),this.mainSegmentLoader_.dispose(),this.contentSteeringController_.dispose(),this.keyStatusMap_.clear(),this.loadOnPlay_&&this.tech_.off("play",this.loadOnPlay_),["AUDIO","SUBTITLES"].forEach(e=>{const t=this.mediaTypes_[e].groups;for(const r in t)t[r].forEach(n=>{n.playlistLoader&&n.playlistLoader.dispose()})}),this.audioSegmentLoader_.dispose(),this.subtitleSegmentLoader_.dispose(),this.sourceUpdater_.dispose(),this.timelineChangeController_.dispose(),this.stopABRTimer_(),this.updateDuration_&&this.mediaSource.removeEventListener("sourceopen",this.updateDuration_),this.mediaSource.removeEventListener("durationchange",this.handleDurationChange_),this.mediaSource.removeEventListener("sourceopen",this.handleSourceOpen_),this.mediaSource.removeEventListener("sourceended",this.handleSourceEnded_),this.off()}main(){return this.mainPlaylistLoader_.main}media(){return this.mainPlaylistLoader_.media()||this.initialMedia_}areMediaTypesKnown_(){const e=!!this.mediaTypes_.AUDIO.activePlaylistLoader,t=!!this.mainSegmentLoader_.getCurrentMediaInfo_(),r=e?!!this.audioSegmentLoader_.getCurrentMediaInfo_():!0;return!(!t||!r)}getCodecsOrExclude_(){const e={main:this.mainSegmentLoader_.getCurrentMediaInfo_()||{},audio:this.audioSegmentLoader_.getCurrentMediaInfo_()||{}},t=this.mainSegmentLoader_.getPendingSegmentPlaylist()||this.media();e.video=e.main;const r=u0(this.main(),t),n={},s=!!this.mediaTypes_.AUDIO.activePlaylistLoader;if(e.main.hasVideo&&(n.video=r.video||e.main.videoCodec||B8),e.main.isMuxed&&(n.video+=`,${r.audio||e.main.audioCodec||v_}`),(e.main.hasAudio&&!e.main.isMuxed||e.audio.hasAudio||s)&&(n.audio=r.audio||e.main.audioCodec||e.audio.audioCodec||v_,e.audio.isFmp4=e.main.hasAudio&&!e.main.isMuxed?e.main.isFmp4:e.audio.isFmp4),!n.audio&&!n.video){this.excludePlaylist({playlistToExclude:t,error:{message:"Could not determine codecs for playlist."},playlistExclusionDuration:1/0});return}const a=(u,c)=>u?cu(c):jf(c),o={};let l;if(["video","audio"].forEach(function(u){if(n.hasOwnProperty(u)&&!a(e[u].isFmp4,n[u])){const c=e[u].isFmp4?"browser":"muxer";o[c]=o[c]||[],o[c].push(n[u]),u==="audio"&&(l=c)}}),s&&l&&t.attributes.AUDIO){const u=t.attributes.AUDIO;this.main().playlists.forEach(c=>{(c.attributes&&c.attributes.AUDIO)===u&&c!==t&&(c.excludeUntil=1/0)}),this.logger_(`excluding audio group ${u} as ${l} does not support codec(s): "${n.audio}"`)}if(Object.keys(o).length){const u=Object.keys(o).reduce((c,h)=>(c&&(c+=", "),c+=`${h} does not support codec(s): "${o[h].join(",")}"`,c),"")+".";this.excludePlaylist({playlistToExclude:t,error:{internal:!0,message:u},playlistExclusionDuration:1/0});return}if(this.sourceUpdater_.hasCreatedSourceBuffers()&&!this.sourceUpdater_.canChangeType()){const u=[];if(["video","audio"].forEach(c=>{const h=(Rn(this.sourceUpdater_.codecs[c]||"")[0]||{}).type,m=(Rn(n[c]||"")[0]||{}).type;h&&m&&h.toLowerCase()!==m.toLowerCase()&&u.push(`"${this.sourceUpdater_.codecs[c]}" -> "${n[c]}"`)}),u.length){this.excludePlaylist({playlistToExclude:t,error:{message:`Codec switching not supported: ${u.join(", ")}.`,internal:!0},playlistExclusionDuration:1/0});return}}return n}tryToCreateSourceBuffers_(){if(this.mediaSource.readyState!=="open"||this.sourceUpdater_.hasCreatedSourceBuffers()||!this.areMediaTypesKnown_())return;const e=this.getCodecsOrExclude_();if(!e)return;this.sourceUpdater_.createSourceBuffers(e);const t=[e.video,e.audio].filter(Boolean).join(",");this.excludeIncompatibleVariants_(t)}excludeUnsupportedVariants_(){const e=this.main().playlists,t=[];Object.keys(e).forEach(r=>{const n=e[r];if(t.indexOf(n.id)!==-1)return;t.push(n.id);const s=u0(this.main,n),a=[];s.audio&&!jf(s.audio)&&!cu(s.audio)&&a.push(`audio codec ${s.audio}`),s.video&&!jf(s.video)&&!cu(s.video)&&a.push(`video codec ${s.video}`),s.text&&s.text==="stpp.ttml.im1t"&&a.push(`text codec ${s.text}`),a.length&&(n.excludeUntil=1/0,this.logger_(`excluding ${n.id} for unsupported: ${a.join(", ")}`))})}excludeIncompatibleVariants_(e){const t=[],r=this.main().playlists,n=M_(Rn(e)),s=_O(n),a=n.video&&Rn(n.video)[0]||null,o=n.audio&&Rn(n.audio)[0]||null;Object.keys(r).forEach(l=>{const u=r[l];if(t.indexOf(u.id)!==-1||u.excludeUntil===1/0)return;t.push(u.id);const c=[],h=u0(this.mainPlaylistLoader_.main,u),m=_O(h);if(!(!h.audio&&!h.video)){if(m!==s&&c.push(`codec count "${m}" !== "${s}"`),!this.sourceUpdater_.canChangeType()){const g=h.video&&Rn(h.video)[0]||null,y=h.audio&&Rn(h.audio)[0]||null;g&&a&&g.type.toLowerCase()!==a.type.toLowerCase()&&c.push(`video codec "${g.type}" !== "${a.type}"`),y&&o&&y.type.toLowerCase()!==o.type.toLowerCase()&&c.push(`audio codec "${y.type}" !== "${o.type}"`)}c.length&&(u.excludeUntil=1/0,this.logger_(`excluding ${u.id}: ${c.join(" && ")}`))}})}updateAdCues_(e){let t=0;const r=this.seekable();r.length&&(t=r.start(0)),Zae(e,this.cueTagsTrack_,t)}goalBufferLength(){const e=this.tech_.currentTime(),t=qn.GOAL_BUFFER_LENGTH,r=qn.GOAL_BUFFER_LENGTH_RATE,n=Math.max(t,qn.MAX_GOAL_BUFFER_LENGTH);return Math.min(t+e*r,n)}bufferLowWaterLine(){const e=this.tech_.currentTime(),t=qn.BUFFER_LOW_WATER_LINE,r=qn.BUFFER_LOW_WATER_LINE_RATE,n=Math.max(t,qn.MAX_BUFFER_LOW_WATER_LINE),s=Math.max(t,qn.EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE);return Math.min(t+e*r,this.bufferBasedABR?s:n)}bufferHighWaterLine(){return qn.BUFFER_HIGH_WATER_LINE}addDateRangesToTextTrack_(e){bO(this.inbandTextTracks_,"com.apple.streaming",this.tech_),Pae({inbandTextTracks:this.inbandTextTracks_,dateRanges:e})}addMetadataToTextTrack(e,t,r){const n=this.sourceUpdater_.videoBuffer?this.sourceUpdater_.videoTimestampOffset():this.sourceUpdater_.audioTimestampOffset();bO(this.inbandTextTracks_,e,this.tech_),Aae({inbandTextTracks:this.inbandTextTracks_,metadataArray:t,timestampOffset:n,videoDuration:r})}pathwayAttribute_(e){return e.attributes["PATHWAY-ID"]||e.attributes.serviceLocation}initContentSteeringController_(){const e=this.main();if(e.contentSteering){for(const t of e.playlists)this.contentSteeringController_.addAvailablePathway(this.pathwayAttribute_(t));if(this.contentSteeringController_.assignTagProperties(e.uri,e.contentSteering),this.contentSteeringController_.queryBeforeStart){this.contentSteeringController_.requestSteeringManifest(!0);return}this.tech_.one("canplay",()=>{this.contentSteeringController_.requestSteeringManifest()})}}resetContentSteeringController_(){this.contentSteeringController_.clearAvailablePathways(),this.contentSteeringController_.dispose(),this.initContentSteeringController_()}attachContentSteeringListeners_(){this.contentSteeringController_.on("content-steering",this.excludeThenChangePathway_.bind(this)),["contentsteeringloadstart","contentsteeringloadcomplete","contentsteeringparsed"].forEach(t=>{this.contentSteeringController_.on(t,r=>{this.trigger(Jt({},r))})}),this.sourceType_==="dash"&&this.mainPlaylistLoader_.on("loadedplaylist",()=>{const t=this.main();(this.contentSteeringController_.didDASHTagChange(t.uri,t.contentSteering)||(()=>{const s=this.contentSteeringController_.getAvailablePathways(),a=[];for(const o of t.playlists){const l=o.attributes.serviceLocation;if(l&&(a.push(l),!s.has(l)))return!0}return!!(!a.length&&s.size)})())&&this.resetContentSteeringController_()})}excludeThenChangePathway_(){const e=this.contentSteeringController_.getPathway();if(!e)return;this.handlePathwayClones_();const r=this.main().playlists,n=new Set;let s=!1;Object.keys(r).forEach(a=>{const o=r[a],l=this.pathwayAttribute_(o),u=l&&e!==l;o.excludeUntil===1/0&&o.lastExcludeReason_==="content-steering"&&!u&&(delete o.excludeUntil,delete o.lastExcludeReason_,s=!0);const h=!o.excludeUntil&&o.excludeUntil!==1/0;!n.has(o.id)&&u&&h&&(n.add(o.id),o.excludeUntil=1/0,o.lastExcludeReason_="content-steering",this.logger_(`excluding ${o.id} for ${o.lastExcludeReason_}`))}),this.contentSteeringController_.manifestType_==="DASH"&&Object.keys(this.mediaTypes_).forEach(a=>{const o=this.mediaTypes_[a];if(o.activePlaylistLoader){const l=o.activePlaylistLoader.media_;l&&l.attributes.serviceLocation!==e&&(s=!0)}}),s&&this.changeSegmentPathway_()}handlePathwayClones_(){const t=this.main().playlists,r=this.contentSteeringController_.currentPathwayClones,n=this.contentSteeringController_.nextPathwayClones;if(r&&r.size||n&&n.size){for(const[a,o]of r.entries())n.get(a)||(this.mainPlaylistLoader_.updateOrDeleteClone(o),this.contentSteeringController_.excludePathway(a));for(const[a,o]of n.entries()){const l=r.get(a);if(!l){t.filter(c=>c.attributes["PATHWAY-ID"]===o["BASE-ID"]).forEach(c=>{this.mainPlaylistLoader_.addClonePathway(o,c)}),this.contentSteeringController_.addAvailablePathway(a);continue}this.equalPathwayClones_(l,o)||(this.mainPlaylistLoader_.updateOrDeleteClone(o,!0),this.contentSteeringController_.addAvailablePathway(a))}this.contentSteeringController_.currentPathwayClones=new Map(JSON.parse(JSON.stringify([...n])))}}equalPathwayClones_(e,t){if(e["BASE-ID"]!==t["BASE-ID"]||e.ID!==t.ID||e["URI-REPLACEMENT"].HOST!==t["URI-REPLACEMENT"].HOST)return!1;const r=e["URI-REPLACEMENT"].PARAMS,n=t["URI-REPLACEMENT"].PARAMS;for(const s in r)if(r[s]!==n[s])return!1;for(const s in n)if(r[s]!==n[s])return!1;return!0}changeSegmentPathway_(){const e=this.selectPlaylist();this.pauseLoading(),this.contentSteeringController_.manifestType_==="DASH"&&this.switchMediaForDASHContentSteering_(),this.switchMedia_(e,"content-steering")}excludeNonUsablePlaylistsByKeyId_(){if(!this.mainPlaylistLoader_||!this.mainPlaylistLoader_.main)return;let e=0;const t="non-usable";this.mainPlaylistLoader_.main.playlists.forEach(r=>{const n=this.mainPlaylistLoader_.getKeyIdSet(r);!n||!n.size||n.forEach(s=>{const a="usable",o=this.keyStatusMap_.has(s)&&this.keyStatusMap_.get(s)===a,l=r.lastExcludeReason_===t&&r.excludeUntil===1/0;o?o&&l&&(delete r.excludeUntil,delete r.lastExcludeReason_,this.logger_(`enabling playlist ${r.id} because key ID ${s} is ${a}`)):(r.excludeUntil!==1/0&&r.lastExcludeReason_!==t&&(r.excludeUntil=1/0,r.lastExcludeReason_=t,this.logger_(`excluding playlist ${r.id} because the key ID ${s} doesn't exist in the keyStatusMap or is not ${a}`)),e++)})}),e>=this.mainPlaylistLoader_.main.playlists.length&&this.mainPlaylistLoader_.main.playlists.forEach(r=>{const n=r&&r.attributes&&r.attributes.RESOLUTION&&r.attributes.RESOLUTION.height<720,s=r.excludeUntil===1/0&&r.lastExcludeReason_===t;n&&s&&(delete r.excludeUntil,_e.log.warn(`enabling non-HD playlist ${r.id} because all playlists were excluded due to ${t} key IDs`))})}addKeyStatus_(e,t){const s=(typeof e=="string"?e:Xae(e)).slice(0,32).toLowerCase();this.logger_(`KeyStatus '${t}' with key ID ${s} added to the keyStatusMap`),this.keyStatusMap_.set(s,t)}updatePlaylistByKeyStatus(e,t){this.addKeyStatus_(e,t),this.waitingForFastQualityPlaylistReceived_||this.excludeNonUsableThenChangePlaylist_(),this.mainPlaylistLoader_.off("loadedplaylist",this.excludeNonUsableThenChangePlaylist_.bind(this)),this.mainPlaylistLoader_.on("loadedplaylist",this.excludeNonUsableThenChangePlaylist_.bind(this))}excludeNonUsableThenChangePlaylist_(){this.excludeNonUsablePlaylistsByKeyId_(),this.fastQualityChange_()}};const boe=(i,e,t)=>r=>{const n=i.main.playlists[e],s=T2(n),a=pT(n);if(typeof r>"u")return a;r?delete n.disabled:n.disabled=!0;const o={renditionInfo:{id:e,bandwidth:n.attributes.BANDWIDTH,resolution:n.attributes.RESOLUTION,codecs:n.attributes.CODECS},cause:"fast-quality"};return r!==a&&!s&&(t(n),r?i.trigger({type:"renditionenabled",metadata:o}):i.trigger({type:"renditiondisabled",metadata:o})),r};let Soe=class{constructor(e,t,r){const{playlistController_:n}=e,s=n.fastQualityChange_.bind(n);if(t.attributes){const a=t.attributes.RESOLUTION;this.width=a&&a.width,this.height=a&&a.height,this.bandwidth=t.attributes.BANDWIDTH,this.frameRate=t.attributes["FRAME-RATE"]}this.codecs=u0(n.main(),t),this.playlist=t,this.id=r,this.enabled=boe(e.playlists,t.id,s)}};const Coe=function(i){i.representations=()=>{const e=i.playlistController_.main(),t=og(e)?i.playlistController_.getAudioTrackPlaylists_():e.playlists;return t?t.filter(r=>!T2(r)).map((r,n)=>new Soe(i,r,r.id)):[]}},LO=["seeking","seeked","pause","playing","error"];let Eoe=class extends _e.EventTarget{constructor(e){super(),this.playlistController_=e.playlistController,this.tech_=e.tech,this.seekable=e.seekable,this.allowSeeksWithinUnsafeLiveWindow=e.allowSeeksWithinUnsafeLiveWindow,this.liveRangeSafeTimeDelta=e.liveRangeSafeTimeDelta,this.media=e.media,this.playedRanges_=[],this.consecutiveUpdates=0,this.lastRecordedTime=null,this.checkCurrentTimeTimeout_=null,this.logger_=Uo("PlaybackWatcher"),this.logger_("initialize");const t=()=>this.monitorCurrentTime_(),r=()=>this.monitorCurrentTime_(),n=()=>this.techWaiting_(),s=()=>this.resetTimeUpdate_(),a=this.playlistController_,o=["main","subtitle","audio"],l={};o.forEach(c=>{l[c]={reset:()=>this.resetSegmentDownloads_(c),updateend:()=>this.checkSegmentDownloads_(c)},a[`${c}SegmentLoader_`].on("appendsdone",l[c].updateend),a[`${c}SegmentLoader_`].on("playlistupdate",l[c].reset),this.tech_.on(["seeked","seeking"],l[c].reset)});const u=c=>{["main","audio"].forEach(h=>{a[`${h}SegmentLoader_`][c]("appended",this.seekingAppendCheck_)})};this.seekingAppendCheck_=()=>{this.fixesBadSeeks_()&&(this.consecutiveUpdates=0,this.lastRecordedTime=this.tech_.currentTime(),u("off"))},this.clearSeekingAppendCheck_=()=>u("off"),this.watchForBadSeeking_=()=>{this.clearSeekingAppendCheck_(),u("on")},this.tech_.on("seeked",this.clearSeekingAppendCheck_),this.tech_.on("seeking",this.watchForBadSeeking_),this.tech_.on("waiting",n),this.tech_.on(LO,s),this.tech_.on("canplay",r),this.tech_.one("play",t),this.dispose=()=>{this.clearSeekingAppendCheck_(),this.logger_("dispose"),this.tech_.off("waiting",n),this.tech_.off(LO,s),this.tech_.off("canplay",r),this.tech_.off("play",t),this.tech_.off("seeking",this.watchForBadSeeking_),this.tech_.off("seeked",this.clearSeekingAppendCheck_),o.forEach(c=>{a[`${c}SegmentLoader_`].off("appendsdone",l[c].updateend),a[`${c}SegmentLoader_`].off("playlistupdate",l[c].reset),this.tech_.off(["seeked","seeking"],l[c].reset)}),this.checkCurrentTimeTimeout_&&X.clearTimeout(this.checkCurrentTimeTimeout_),this.resetTimeUpdate_()}}monitorCurrentTime_(){this.checkCurrentTime_(),this.checkCurrentTimeTimeout_&&X.clearTimeout(this.checkCurrentTimeTimeout_),this.checkCurrentTimeTimeout_=X.setTimeout(this.monitorCurrentTime_.bind(this),250)}resetSegmentDownloads_(e){const t=this.playlistController_[`${e}SegmentLoader_`];this[`${e}StalledDownloads_`]>0&&this.logger_(`resetting possible stalled download count for ${e} loader`),this[`${e}StalledDownloads_`]=0,this[`${e}Buffered_`]=t.buffered_()}checkSegmentDownloads_(e){const t=this.playlistController_,r=t[`${e}SegmentLoader_`],n=r.buffered_(),s=dse(this[`${e}Buffered_`],n);if(this[`${e}Buffered_`]=n,s){const a={bufferedRanges:n};t.trigger({type:"bufferedrangeschanged",metadata:a}),this.resetSegmentDownloads_(e);return}this[`${e}StalledDownloads_`]++,this.logger_(`found #${this[`${e}StalledDownloads_`]} ${e} appends that did not increase buffer (possible stalled download)`,{playlistId:r.playlist_&&r.playlist_.id,buffered:ah(n)}),!(this[`${e}StalledDownloads_`]<10)&&(this.logger_(`${e} loader stalled download exclusion`),this.resetSegmentDownloads_(e),this.tech_.trigger({type:"usage",name:`vhs-${e}-download-exclusion`}),e!=="subtitle"&&t.excludePlaylist({error:{message:`Excessive ${e} segment downloading detected.`},playlistExclusionDuration:1/0}))}checkCurrentTime_(){if(this.tech_.paused()||this.tech_.seeking())return;const e=this.tech_.currentTime(),t=this.tech_.buffered();if(this.lastRecordedTime===e&&(!t.length||e+Jl>=t.end(t.length-1)))return this.techWaiting_();if(this.consecutiveUpdates>=5&&e===this.lastRecordedTime)this.consecutiveUpdates++,this.waiting_();else if(e===this.lastRecordedTime)this.consecutiveUpdates++;else{this.playedRanges_.push(hs([this.lastRecordedTime,e]));const r={playedRanges:this.playedRanges_};this.playlistController_.trigger({type:"playedrangeschanged",metadata:r}),this.consecutiveUpdates=0,this.lastRecordedTime=e}}resetTimeUpdate_(){this.consecutiveUpdates=0}fixesBadSeeks_(){if(!this.tech_.seeking())return!1;const t=this.seekable(),r=this.tech_.currentTime(),n=this.afterSeekableWindow_(t,r,this.media(),this.allowSeeksWithinUnsafeLiveWindow);let s;if(n&&(s=t.end(t.length-1)),this.beforeSeekableWindow_(t,r)){const y=t.start(0);s=y+(y===t.end(0)?0:Jl)}if(typeof s<"u")return this.logger_(`Trying to seek outside of seekable at time ${r} with seekable range ${xN(t)}. Seeking to ${s}.`),this.tech_.setCurrentTime(s),!0;const a=this.playlistController_.sourceUpdater_,o=this.tech_.buffered(),l=a.audioBuffer?a.audioBuffered():null,u=a.videoBuffer?a.videoBuffered():null,c=this.media(),h=c.partTargetDuration?c.partTargetDuration:(c.targetDuration-Ql)*2,m=[l,u];for(let y=0;y<m.length;y++){if(!m[y])continue;if(_2(m[y],r)<h)return!1}const g=_v(o,r);return g.length===0?!1:(s=g.start(0)+Jl,this.logger_(`Buffered region starts (${g.start(0)})  just beyond seek point (${r}). Seeking to ${s}.`),this.tech_.setCurrentTime(s),!0)}waiting_(){if(this.techWaiting_())return;const e=this.tech_.currentTime(),t=this.tech_.buffered(),r=Df(t,e);if(r.length&&e+3<=r.end(0)){this.resetTimeUpdate_(),this.tech_.setCurrentTime(e),this.logger_(`Stopped at ${e} while inside a buffered region [${r.start(0)} -> ${r.end(0)}]. Attempting to resume playback by seeking to the current time.`),this.tech_.trigger({type:"usage",name:"vhs-unknown-waiting"});return}}techWaiting_(){const e=this.seekable(),t=this.tech_.currentTime();if(this.tech_.seeking())return!0;if(this.beforeSeekableWindow_(e,t)){const o=e.end(e.length-1);return this.logger_(`Fell out of live window at time ${t}. Seeking to live point (seekable end) ${o}`),this.resetTimeUpdate_(),this.tech_.setCurrentTime(o),this.tech_.trigger({type:"usage",name:"vhs-live-resync"}),!0}const r=this.tech_.vhs.playlistController_.sourceUpdater_,n=this.tech_.buffered();if(this.videoUnderflow_({audioBuffered:r.audioBuffered(),videoBuffered:r.videoBuffered(),currentTime:t}))return this.resetTimeUpdate_(),this.tech_.setCurrentTime(t),this.tech_.trigger({type:"usage",name:"vhs-video-underflow"}),!0;const a=_v(n,t);return a.length>0?(this.logger_(`Stopped at ${t} and seeking to ${a.start(0)}`),this.resetTimeUpdate_(),this.skipTheGap_(t),!0):!1}afterSeekableWindow_(e,t,r,n=!1){if(!e.length)return!1;let s=e.end(e.length-1)+Jl;const a=!r.endList,o=typeof r.partTargetDuration=="number";return a&&(o||n)&&(s=e.end(e.length-1)+r.targetDuration*3),t>s}beforeSeekableWindow_(e,t){return!!(e.length&&e.start(0)>0&&t<e.start(0)-this.liveRangeSafeTimeDelta)}videoUnderflow_({videoBuffered:e,audioBuffered:t,currentTime:r}){if(!e)return;let n;if(e.length&&t.length){const s=Df(e,r-3),a=Df(e,r),o=Df(t,r);o.length&&!a.length&&s.length&&(n={start:s.end(0),end:o.end(0)})}else _v(e,r).length||(n=this.gapFromVideoUnderflow_(e,r));return n?(this.logger_(`Encountered a gap in video from ${n.start} to ${n.end}. Seeking to current time ${r}`),!0):!1}skipTheGap_(e){const t=this.tech_.buffered(),r=this.tech_.currentTime(),n=_v(t,r);if(this.resetTimeUpdate_(),n.length===0||r!==e)return;this.logger_("skipTheGap_:","currentTime:",r,"scheduled currentTime:",e,"nextRange start:",n.start(0)),this.tech_.setCurrentTime(n.start(0)+Ql);const s={gapInfo:{from:r,to:n.start(0)}};this.playlistController_.trigger({type:"gapjumped",metadata:s}),this.tech_.trigger({type:"usage",name:"vhs-gap-skip"})}gapFromVideoUnderflow_(e,t){const r=lse(e);for(let n=0;n<r.length;n++){const s=r.start(n),a=r.end(n);if(t-s<4&&t-s>2)return{start:s,end:a}}return null}};const woe={errorInterval:30,getSource(i){const t=this.tech({IWillNotUseThisInPlugins:!0}).currentSource_||this.currentSource();return i(t)}},u5=function(i,e){let t=0,r=0;const n=yi(woe,e);i.ready(()=>{i.trigger({type:"usage",name:"vhs-error-reload-initialized"})});const s=function(){r&&i.currentTime(r)},a=function(c){c!=null&&(r=i.duration()!==1/0&&i.currentTime()||0,i.one("loadedmetadata",s),i.src(c),i.trigger({type:"usage",name:"vhs-error-reload"}),i.play())},o=function(){if(Date.now()-t<n.errorInterval*1e3){i.trigger({type:"usage",name:"vhs-error-reload-canceled"});return}if(!n.getSource||typeof n.getSource!="function"){_e.log.error("ERROR: reloadSourceOnError - The option getSource must be a function!");return}return t=Date.now(),n.getSource.call(i,a)},l=function(){i.off("loadedmetadata",s),i.off("error",o),i.off("dispose",l)},u=function(c){l(),u5(i,c)};i.on("error",o),i.on("dispose",l),i.reloadSourceOnError=u},koe=function(i){u5(this,i)};var c5="3.15.0",Aoe="7.0.3",Ioe="1.3.1",Doe="7.2.0",Poe="4.0.2";const Xi={PlaylistLoader:Pf,Playlist:Ea,utils:Mse,STANDARD_PLAYLIST_SELECTOR:TO,INITIAL_PLAYLIST_SELECTOR:Sae,lastBandwidthSelector:TO,movingAverageBandwidthSelector:Tae,comparePlaylistBandwidth:C2,comparePlaylistResolution:xae,xhr:BN()};Object.keys(qn).forEach(i=>{Object.defineProperty(Xi,i,{get(){return _e.log.warn(`using Vhs.${i} is UNSAFE be sure you know what you are doing`),qn[i]},set(e){if(_e.log.warn(`using Vhs.${i} is UNSAFE be sure you know what you are doing`),typeof e!="number"||e<0){_e.log.warn(`value of Vhs.${i} must be greater than or equal to 0`);return}qn[i]=e}})});const d5="videojs-vhs",h5=function(i,e){const t=e.media();let r=-1;for(let n=0;n<i.length;n++)if(i[n].id===t.id){r=n;break}i.selectedIndex_=r,i.trigger({selectedIndex:r,type:"change"})},Roe=function(i,e){e.representations().forEach(t=>{i.addQualityLevel(t)}),h5(i,e.playlists)};Xi.canPlaySource=function(){return _e.log.warn("VHS is no longer a tech. Please remove it from your player's techOrder.")};const Loe=(i,e,t)=>{if(!i)return i;let r={};e&&e.attributes&&e.attributes.CODECS&&(r=M_(Rn(e.attributes.CODECS))),t&&t.attributes&&t.attributes.CODECS&&(r.audio=t.attributes.CODECS);const n=du(r.video),s=du(r.audio),a={};for(const o in i)a[o]={},s&&(a[o].audioContentType=s),n&&(a[o].videoContentType=n),e.contentProtection&&e.contentProtection[o]&&e.contentProtection[o].pssh&&(a[o].pssh=e.contentProtection[o].pssh),typeof i[o]=="string"&&(a[o].url=i[o]);return yi(i,a)},Ooe=(i,e)=>i.reduce((t,r)=>{if(!r.contentProtection)return t;const n=e.reduce((s,a)=>{const o=r.contentProtection[a];return o&&o.pssh&&(s[a]={pssh:o.pssh}),s},{});return Object.keys(n).length&&t.push(n),t},[]),Moe=({player:i,sourceKeySystems:e,audioMedia:t,mainPlaylists:r})=>{if(!i.eme.initializeMediaKeys)return Promise.resolve();const n=t?r.concat([t]):r,s=Ooe(n,Object.keys(e)),a=[],o=[];return s.forEach(l=>{o.push(new Promise((u,c)=>{i.tech_.one("keysessioncreated",u)})),a.push(new Promise((u,c)=>{i.eme.initializeMediaKeys({keySystems:l},h=>{if(h){c(h);return}u()})}))}),Promise.race([Promise.all(a),Promise.race(o)])},Foe=({player:i,sourceKeySystems:e,media:t,audioMedia:r})=>{const n=Loe(e,t,r);return n?(i.currentSource().keySystems=n,n&&!i.eme?(_e.log.warn("DRM encrypted source cannot be decrypted without a DRM plugin"),!1):!0):!1},f5=()=>{if(!X.localStorage)return null;const i=X.localStorage.getItem(d5);if(!i)return null;try{return JSON.parse(i)}catch{return null}},Boe=i=>{if(!X.localStorage)return!1;let e=f5();e=e?yi(e,i):i;try{X.localStorage.setItem(d5,JSON.stringify(e))}catch{return!1}return e},Noe=i=>i.toLowerCase().indexOf("data:application/vnd.videojs.vhs+json,")===0?JSON.parse(i.substring(i.indexOf(",")+1)):i,p5=(i,e)=>{i._requestCallbackSet||(i._requestCallbackSet=new Set),i._requestCallbackSet.add(e)},m5=(i,e)=>{i._responseCallbackSet||(i._responseCallbackSet=new Set),i._responseCallbackSet.add(e)},g5=(i,e)=>{i._requestCallbackSet&&(i._requestCallbackSet.delete(e),i._requestCallbackSet.size||delete i._requestCallbackSet)},v5=(i,e)=>{i._responseCallbackSet&&(i._responseCallbackSet.delete(e),i._responseCallbackSet.size||delete i._responseCallbackSet)};Xi.supportsNativeHls=(function(){if(!Me||!Me.createElement)return!1;const i=Me.createElement("video");return _e.getTech("Html5").isSupported()?["application/vnd.apple.mpegurl","audio/mpegurl","audio/x-mpegurl","application/x-mpegurl","video/x-mpegurl","video/mpegurl","application/mpegurl"].some(function(t){return/maybe|probably/i.test(i.canPlayType(t))}):!1})();Xi.supportsNativeDash=(function(){return!Me||!Me.createElement||!_e.getTech("Html5").isSupported()?!1:/maybe|probably/i.test(Me.createElement("video").canPlayType("application/dash+xml"))})();Xi.supportsTypeNatively=i=>i==="hls"?Xi.supportsNativeHls:i==="dash"?Xi.supportsNativeDash:!1;Xi.isSupported=function(){return _e.log.warn("VHS is no longer a tech. Please remove it from your player's techOrder.")};Xi.xhr.onRequest=function(i){p5(Xi.xhr,i)};Xi.xhr.onResponse=function(i){m5(Xi.xhr,i)};Xi.xhr.offRequest=function(i){g5(Xi.xhr,i)};Xi.xhr.offResponse=function(i){v5(Xi.xhr,i)};const Uoe=_e.getComponent("Component");let y5=class extends Uoe{constructor(e,t,r){if(super(t,r.vhs),typeof r.initialBandwidth=="number"&&(this.options_.bandwidth=r.initialBandwidth),this.logger_=Uo("VhsHandler"),t.options_&&t.options_.playerId){const n=_e.getPlayer(t.options_.playerId);this.player_=n}if(this.tech_=t,this.source_=e,this.stats={},this.ignoreNextSeekingEvent_=!1,this.setOptions_(),this.options_.overrideNative&&t.overrideNativeAudioTracks&&t.overrideNativeVideoTracks)t.overrideNativeAudioTracks(!0),t.overrideNativeVideoTracks(!0);else if(this.options_.overrideNative&&(t.featuresNativeVideoTracks||t.featuresNativeAudioTracks))throw new Error("Overriding native VHS requires emulated tracks. See https://git.io/vMpjB");this.on(Me,["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","MSFullscreenChange"],n=>{const s=Me.fullscreenElement||Me.webkitFullscreenElement||Me.mozFullScreenElement||Me.msFullscreenElement;s&&s.contains(this.tech_.el())?this.playlistController_.fastQualityChange_():this.playlistController_.checkABR_()}),this.on(this.tech_,"seeking",function(){if(this.ignoreNextSeekingEvent_){this.ignoreNextSeekingEvent_=!1;return}this.setCurrentTime(this.tech_.currentTime())}),this.on(this.tech_,"error",function(){this.tech_.error()&&this.playlistController_&&this.playlistController_.pauseLoading()}),this.on(this.tech_,"play",this.play)}setOptions_(e={}){if(this.options_=yi(this.options_,e),this.options_.withCredentials=this.options_.withCredentials||!1,this.options_.limitRenditionByPlayerDimensions=this.options_.limitRenditionByPlayerDimensions!==!1,this.options_.useDevicePixelRatio=this.options_.useDevicePixelRatio||!1,this.options_.useBandwidthFromLocalStorage=typeof this.source_.useBandwidthFromLocalStorage<"u"?this.source_.useBandwidthFromLocalStorage:this.options_.useBandwidthFromLocalStorage||!1,this.options_.useForcedSubtitles=this.options_.useForcedSubtitles||!1,this.options_.useNetworkInformationApi=this.options_.useNetworkInformationApi||!1,this.options_.useDtsForTimestampOffset=this.options_.useDtsForTimestampOffset||!1,this.options_.customTagParsers=this.options_.customTagParsers||[],this.options_.customTagMappers=this.options_.customTagMappers||[],this.options_.cacheEncryptionKeys=this.options_.cacheEncryptionKeys||!1,this.options_.llhls=this.options_.llhls!==!1,this.options_.bufferBasedABR=this.options_.bufferBasedABR||!1,typeof this.options_.playlistExclusionDuration!="number"&&(this.options_.playlistExclusionDuration=60),typeof this.options_.bandwidth!="number"&&this.options_.useBandwidthFromLocalStorage){const r=f5();r&&r.bandwidth&&(this.options_.bandwidth=r.bandwidth,this.tech_.trigger({type:"usage",name:"vhs-bandwidth-from-local-storage"})),r&&r.throughput&&(this.options_.throughput=r.throughput,this.tech_.trigger({type:"usage",name:"vhs-throughput-from-local-storage"}))}typeof this.options_.bandwidth!="number"&&(this.options_.bandwidth=qn.INITIAL_BANDWIDTH),this.options_.enableLowInitialPlaylist=this.options_.enableLowInitialPlaylist&&this.options_.bandwidth===qn.INITIAL_BANDWIDTH,["withCredentials","useDevicePixelRatio","customPixelRatio","limitRenditionByPlayerDimensions","bandwidth","customTagParsers","customTagMappers","cacheEncryptionKeys","playlistSelector","initialPlaylistSelector","bufferBasedABR","liveRangeSafeTimeDelta","llhls","useForcedSubtitles","useNetworkInformationApi","useDtsForTimestampOffset","exactManifestTimings","leastPixelDiffSelector"].forEach(r=>{typeof this.source_[r]<"u"&&(this.options_[r]=this.source_[r])}),this.limitRenditionByPlayerDimensions=this.options_.limitRenditionByPlayerDimensions,this.useDevicePixelRatio=this.options_.useDevicePixelRatio;const t=this.options_.customPixelRatio;typeof t=="number"&&t>=0&&(this.customPixelRatio=t)}setOptions(e={}){this.setOptions_(e)}src(e,t){if(!e)return;this.setOptions_(),this.options_.src=Noe(this.source_.src),this.options_.tech=this.tech_,this.options_.externVhs=Xi,this.options_.sourceType=Yx(t),this.options_.seekTo=s=>{this.tech_.setCurrentTime(s)},this.options_.player_=this.player_,this.playlistController_=new Toe(this.options_);const r=yi({liveRangeSafeTimeDelta:Jl},this.options_,{seekable:()=>this.seekable(),media:()=>this.playlistController_.media(),playlistController:this.playlistController_});this.playbackWatcher_=new Eoe(r),this.attachStreamingEventListeners_(),this.playlistController_.on("error",()=>{const s=_e.players[this.tech_.options_.playerId];let a=this.playlistController_.error;typeof a=="object"&&!a.code?a.code=3:typeof a=="string"&&(a={message:a,code:3}),s.error(a)});const n=this.options_.bufferBasedABR?Xi.movingAverageBandwidthSelector(.55):Xi.STANDARD_PLAYLIST_SELECTOR;this.playlistController_.selectPlaylist=this.selectPlaylist?this.selectPlaylist.bind(this):n.bind(this),this.playlistController_.selectInitialPlaylist=Xi.INITIAL_PLAYLIST_SELECTOR.bind(this),this.playlists=this.playlistController_.mainPlaylistLoader_,this.mediaSource=this.playlistController_.mediaSource,Object.defineProperties(this,{selectPlaylist:{get(){return this.playlistController_.selectPlaylist},set(s){this.playlistController_.selectPlaylist=s.bind(this)}},throughput:{get(){return this.playlistController_.mainSegmentLoader_.throughput.rate},set(s){this.playlistController_.mainSegmentLoader_.throughput.rate=s,this.playlistController_.mainSegmentLoader_.throughput.count=1}},bandwidth:{get(){let s=this.playlistController_.mainSegmentLoader_.bandwidth;const a=X.navigator.connection||X.navigator.mozConnection||X.navigator.webkitConnection,o=1e7;if(this.options_.useNetworkInformationApi&&a){const l=a.downlink*1e3*1e3;l>=o&&s>=o?s=Math.max(s,l):s=l}return s},set(s){this.playlistController_.mainSegmentLoader_.bandwidth=s,this.playlistController_.mainSegmentLoader_.throughput={rate:0,count:0}}},systemBandwidth:{get(){const s=1/(this.bandwidth||1);let a;return this.throughput>0?a=1/this.throughput:a=0,Math.floor(1/(s+a))},set(){_e.log.error('The "systemBandwidth" property is read-only')}}}),this.options_.bandwidth&&(this.bandwidth=this.options_.bandwidth),this.options_.throughput&&(this.throughput=this.options_.throughput),Object.defineProperties(this.stats,{bandwidth:{get:()=>this.bandwidth||0,enumerable:!0},mediaRequests:{get:()=>this.playlistController_.mediaRequests_()||0,enumerable:!0},mediaRequestsAborted:{get:()=>this.playlistController_.mediaRequestsAborted_()||0,enumerable:!0},mediaRequestsTimedout:{get:()=>this.playlistController_.mediaRequestsTimedout_()||0,enumerable:!0},mediaRequestsErrored:{get:()=>this.playlistController_.mediaRequestsErrored_()||0,enumerable:!0},mediaTransferDuration:{get:()=>this.playlistController_.mediaTransferDuration_()||0,enumerable:!0},mediaBytesTransferred:{get:()=>this.playlistController_.mediaBytesTransferred_()||0,enumerable:!0},mediaSecondsLoaded:{get:()=>this.playlistController_.mediaSecondsLoaded_()||0,enumerable:!0},mediaAppends:{get:()=>this.playlistController_.mediaAppends_()||0,enumerable:!0},mainAppendsToLoadedData:{get:()=>this.playlistController_.mainAppendsToLoadedData_()||0,enumerable:!0},audioAppendsToLoadedData:{get:()=>this.playlistController_.audioAppendsToLoadedData_()||0,enumerable:!0},appendsToLoadedData:{get:()=>this.playlistController_.appendsToLoadedData_()||0,enumerable:!0},timeToLoadedData:{get:()=>this.playlistController_.timeToLoadedData_()||0,enumerable:!0},buffered:{get:()=>ah(this.tech_.buffered()),enumerable:!0},currentTime:{get:()=>this.tech_.currentTime(),enumerable:!0},currentSource:{get:()=>this.tech_.currentSource_,enumerable:!0},currentTech:{get:()=>this.tech_.name_,enumerable:!0},duration:{get:()=>this.tech_.duration(),enumerable:!0},main:{get:()=>this.playlists.main,enumerable:!0},playerDimensions:{get:()=>this.tech_.currentDimensions(),enumerable:!0},seekable:{get:()=>ah(this.tech_.seekable()),enumerable:!0},timestamp:{get:()=>Date.now(),enumerable:!0},videoPlaybackQuality:{get:()=>this.tech_.getVideoPlaybackQuality(),enumerable:!0}}),this.tech_.one("canplay",this.playlistController_.setupFirstPlay.bind(this.playlistController_)),this.tech_.on("bandwidthupdate",()=>{this.options_.useBandwidthFromLocalStorage&&Boe({bandwidth:this.bandwidth,throughput:Math.round(this.throughput)})}),this.playlistController_.on("selectedinitialmedia",()=>{Coe(this)}),this.playlistController_.sourceUpdater_.on("createdsourcebuffers",()=>{this.setupEme_()}),this.on(this.playlistController_,"progress",function(){this.tech_.trigger("progress")}),this.on(this.playlistController_,"firstplay",function(){this.ignoreNextSeekingEvent_=!0}),this.setupQualityLevels_(),this.tech_.el()&&(this.mediaSourceUrl_=X.URL.createObjectURL(this.playlistController_.mediaSource),(_e.browser.IS_ANY_SAFARI||_e.browser.IS_IOS)&&this.options_.overrideNative&&this.options_.sourceType==="hls"&&typeof this.tech_.addSourceElement=="function"?(this.tech_.addSourceElement(this.mediaSourceUrl_),this.tech_.addSourceElement(this.source_.src)):this.tech_.src(this.mediaSourceUrl_))}createKeySessions_(){const e=this.playlistController_.mediaTypes_.AUDIO.activePlaylistLoader;this.logger_("waiting for EME key session creation"),Moe({player:this.player_,sourceKeySystems:this.source_.keySystems,audioMedia:e&&e.media(),mainPlaylists:this.playlists.main.playlists}).then(()=>{this.logger_("created EME key session"),this.playlistController_.sourceUpdater_.initializedEme()}).catch(t=>{this.logger_("error while creating EME key session",t),this.player_.error({message:"Failed to initialize media keys for EME",code:3})})}handleWaitingForKey_(){this.logger_("waitingforkey fired, attempting to create any new key sessions"),this.createKeySessions_()}setupEme_(){const e=this.playlistController_.mediaTypes_.AUDIO.activePlaylistLoader,t=Foe({player:this.player_,sourceKeySystems:this.source_.keySystems,media:this.playlists.media(),audioMedia:e&&e.media()});if(this.player_.tech_.on("keystatuschange",r=>{this.playlistController_.updatePlaylistByKeyStatus(r.keyId,r.status)}),this.handleWaitingForKey_=this.handleWaitingForKey_.bind(this),this.player_.tech_.on("waitingforkey",this.handleWaitingForKey_),!t){this.playlistController_.sourceUpdater_.initializedEme();return}this.createKeySessions_()}setupQualityLevels_(){const e=_e.players[this.tech_.options_.playerId];!e||!e.qualityLevels||this.qualityLevels_||(this.qualityLevels_=e.qualityLevels(),this.playlistController_.on("selectedinitialmedia",()=>{Roe(this.qualityLevels_,this)}),this.playlists.on("mediachange",()=>{h5(this.qualityLevels_,this.playlists)}))}static version(){return{"@videojs/http-streaming":c5,"mux.js":Aoe,"mpd-parser":Ioe,"m3u8-parser":Doe,"aes-decrypter":Poe}}version(){return this.constructor.version()}canChangeType(){return s5.canChangeType()}play(){this.playlistController_.play()}setCurrentTime(e){this.playlistController_.setCurrentTime(e)}duration(){return this.playlistController_.duration()}seekable(){return this.playlistController_.seekable()}dispose(){this.playbackWatcher_&&this.playbackWatcher_.dispose(),this.playlistController_&&this.playlistController_.dispose(),this.qualityLevels_&&this.qualityLevels_.dispose(),this.tech_&&this.tech_.vhs&&delete this.tech_.vhs,this.mediaSourceUrl_&&X.URL.revokeObjectURL&&(X.URL.revokeObjectURL(this.mediaSourceUrl_),this.mediaSourceUrl_=null),this.tech_&&this.tech_.off("waitingforkey",this.handleWaitingForKey_),super.dispose()}convertToProgramTime(e,t){return zse({playlist:this.playlistController_.media(),time:e,callback:t})}seekToProgramTime(e,t,r=!0,n=2){return zN({programTime:e,playlist:this.playlistController_.media(),retryCount:n,pauseAfterSeek:r,seekTo:this.options_.seekTo,tech:this.options_.tech,callback:t})}setupXhrHooks_(){this.xhr.onRequest=e=>{p5(this.xhr,e)},this.xhr.onResponse=e=>{m5(this.xhr,e)},this.xhr.offRequest=e=>{g5(this.xhr,e)},this.xhr.offResponse=e=>{v5(this.xhr,e)},this.player_.trigger("xhr-hooks-ready")}attachStreamingEventListeners_(){const e=["seekablerangeschanged","bufferedrangeschanged","contentsteeringloadstart","contentsteeringloadcomplete","contentsteeringparsed"],t=["gapjumped","playedrangeschanged"];e.forEach(r=>{this.playlistController_.on(r,n=>{this.player_.trigger(Jt({},n))})}),t.forEach(r=>{this.playbackWatcher_.on(r,n=>{this.player_.trigger(Jt({},n))})})}};const N_={name:"videojs-http-streaming",VERSION:c5,canHandleSource(i,e={}){const t=yi(_e.options,e);return!t.vhs.experimentalUseMMS&&!cu("avc1.4d400d,mp4a.40.2",!1)?!1:N_.canPlayType(i.type,t)},handleSource(i,e,t={}){const r=yi(_e.options,t);return e.vhs=new y5(i,e,r),e.vhs.xhr=BN(),e.vhs.setupXhrHooks_(),e.vhs.src(i.src,i.type),e.vhs},canPlayType(i,e){const t=Yx(i);if(!t)return"";const r=N_.getOverrideNative(e);return!Xi.supportsTypeNatively(t)||r?"maybe":""},getOverrideNative(i={}){const{vhs:e={}}=i,t=!(_e.browser.IS_ANY_SAFARI||_e.browser.IS_IOS),{overrideNative:r=t}=e;return r}},$oe=()=>cu("avc1.4d400d,mp4a.40.2",!0);$oe()&&_e.getTech("Html5").registerSourceHandler(N_,0);_e.VhsHandler=y5;_e.VhsSourceHandler=N_;_e.Vhs=Xi;_e.use||_e.registerComponent("Vhs",Xi);_e.options.vhs=_e.options.vhs||{};(!_e.getPlugin||!_e.getPlugin("reloadSourceOnError"))&&_e.registerPlugin("reloadSourceOnError",koe);/*! @name @videojs/http-streaming @version 3.15.0 @license Apache-2.0 */const Ca=eg,U_=(i,e)=>e&&e.responseURL&&i!==e.responseURL?e.responseURL:i,$o=i=>_e.log.debug?_e.log.debug.bind(_e,"VHS:",`${i} >`):function(){};function _i(...i){const e=_e.obj||_e;return(e.merge||e.mergeOptions).apply(e,i)}function fs(...i){const e=_e.time||_e;return(e.createTimeRanges||e.createTimeRanges).apply(e,i)}function joe(i){if(i.length===0)return"Buffered Ranges are empty";let e=`Buffered Ranges: 
`;for(let t=0;t<i.length;t++){const r=i.start(t),n=i.end(t);e+=`${r} --> ${n}. Duration (${n-r})
`}return e}const eu=1/30,tu=eu*3,_5=function(i,e){const t=[];let r;if(i&&i.length)for(r=0;r<i.length;r++)e(i.start(r),i.end(r))&&t.push([i.start(r),i.end(r)]);return fs(t)},Rf=function(i,e){return _5(i,function(t,r){return t-tu<=e&&r+tu>=e})},bv=function(i,e){return _5(i,function(t){return t-eu>=e})},zoe=function(i){if(i.length<2)return fs();const e=[];for(let t=1;t<i.length;t++){const r=i.end(t-1),n=i.start(t);e.push([r,n])}return fs(e)},Hoe=function(i,e){let t=null,r=null,n=0;const s=[],a=[];if(!i||!i.length||!e||!e.length)return fs();let o=i.length;for(;o--;)s.push({time:i.start(o),type:"start"}),s.push({time:i.end(o),type:"end"});for(o=e.length;o--;)s.push({time:e.start(o),type:"start"}),s.push({time:e.end(o),type:"end"});for(s.sort(function(l,u){return l.time-u.time}),o=0;o<s.length;o++)s[o].type==="start"?(n++,n===2&&(t=s[o].time)):s[o].type==="end"&&(n--,n===1&&(r=s[o].time)),t!==null&&r!==null&&(a.push([t,r]),t=null,r=null);return fs(a)},x5=i=>{const e=[];if(!i||!i.length)return"";for(let t=0;t<i.length;t++)e.push(i.start(t)+" => "+i.end(t));return e.join(", ")},Voe=function(i,e,t=1){return((i.length?i.end(i.length-1):0)-e)/t},oh=i=>{const e=[];for(let t=0;t<i.length;t++)e.push({start:i.start(t),end:i.end(t)});return e},qoe=function(i,e){if(i===e)return!1;if(!i&&e||!e&&i||i.length!==e.length)return!0;for(let t=0;t<i.length;t++)if(i.start(t)!==e.start(t)||i.end(t)!==e.end(t))return!0;return!1},r1=function(i){if(!(!i||!i.length||!i.end))return i.end(i.length-1)},E2=function(i,e){let t=0;if(!i||!i.length)return t;for(let r=0;r<i.length;r++){const n=i.start(r),s=i.end(r);if(!(e>s)){if(e>n&&e<=s){t+=s-e;continue}t+=s-n}}return t},w2=(i,e)=>{if(!e.preload)return e.duration;let t=0;return(e.parts||[]).forEach(function(r){t+=r.duration}),(e.preloadHints||[]).forEach(function(r){r.type==="PART"&&(t+=i.partTargetDuration)}),t},WC=i=>(i.segments||[]).reduce((e,t,r)=>(t.parts?t.parts.forEach(function(n,s){e.push({duration:n.duration,segmentIndex:r,partIndex:s,part:n,segment:t})}):e.push({duration:t.duration,segmentIndex:r,partIndex:null,segment:t,part:null}),e),[]),T5=i=>{const e=i.segments&&i.segments.length&&i.segments[i.segments.length-1];return e&&e.parts||[]},b5=({preloadSegment:i})=>{if(!i)return;const{parts:e,preloadHints:t}=i;let r=(t||[]).reduce((n,s)=>n+(s.type==="PART"?1:0),0);return r+=e&&e.length?e.length:0,r},S5=(i,e)=>{if(e.endList)return 0;if(i&&i.suggestedPresentationDelay)return i.suggestedPresentationDelay;const t=T5(e).length>0;return t&&e.serverControl&&e.serverControl.partHoldBack?e.serverControl.partHoldBack:t&&e.partTargetDuration?e.partTargetDuration*3:e.serverControl&&e.serverControl.holdBack?e.serverControl.holdBack:e.targetDuration?e.targetDuration*3:0},Woe=function(i,e){let t=0,r=e-i.mediaSequence,n=i.segments[r];if(n){if(typeof n.start<"u")return{result:n.start,precise:!0};if(typeof n.end<"u")return{result:n.end-n.duration,precise:!0}}for(;r--;){if(n=i.segments[r],typeof n.end<"u")return{result:t+n.end,precise:!0};if(t+=w2(i,n),typeof n.start<"u")return{result:t+n.start,precise:!0}}return{result:t,precise:!1}},Goe=function(i,e){let t=0,r,n=e-i.mediaSequence;for(;n<i.segments.length;n++){if(r=i.segments[n],typeof r.start<"u")return{result:r.start-t,precise:!0};if(t+=w2(i,r),typeof r.end<"u")return{result:r.end-t,precise:!0}}return{result:-1,precise:!1}},C5=function(i,e,t){if(typeof e>"u"&&(e=i.mediaSequence+i.segments.length),e<i.mediaSequence)return 0;const r=Woe(i,e);if(r.precise)return r.result;const n=Goe(i,e);return n.precise?n.result:r.result+t},E5=function(i,e,t){if(!i)return 0;if(typeof t!="number"&&(t=0),typeof e>"u"){if(i.totalDuration)return i.totalDuration;if(!i.endList)return X.Infinity}return C5(i,e,t)},c0=function({defaultDuration:i,durationList:e,startIndex:t,endIndex:r}){let n=0;if(t>r&&([t,r]=[r,t]),t<0){for(let s=t;s<Math.min(0,r);s++)n+=i;t=0}for(let s=t;s<r;s++)n+=e[s].duration;return n},w5=function(i,e,t,r){if(!i||!i.segments)return null;if(i.endList)return E5(i);if(e===null)return null;e=e||0;let n=C5(i,i.mediaSequence+i.segments.length,e);return t&&(r=typeof r=="number"?r:S5(null,i),n-=r),Math.max(0,n)},Koe=function(i,e,t){const n=e||0;let s=w5(i,e,!0,t);return s===null?fs():(s<n&&(s=n),fs(n,s))},Xoe=function({playlist:i,currentTime:e,startingSegmentIndex:t,startingPartIndex:r,startTime:n,exactManifestTimings:s}){let a=e-n;const o=WC(i);let l=0;for(let u=0;u<o.length;u++){const c=o[u];if(t===c.segmentIndex&&!(typeof r=="number"&&typeof c.partIndex=="number"&&r!==c.partIndex)){l=u;break}}if(a<0){if(l>0)for(let u=l-1;u>=0;u--){const c=o[u];if(a+=c.duration,s){if(a<0)continue}else if(a+eu<=0)continue;return{partIndex:c.partIndex,segmentIndex:c.segmentIndex,startTime:n-c0({defaultDuration:i.targetDuration,durationList:o,startIndex:l,endIndex:u})}}return{partIndex:o[0]&&o[0].partIndex||null,segmentIndex:o[0]&&o[0].segmentIndex||0,startTime:e}}if(l<0){for(let u=l;u<0;u++)if(a-=i.targetDuration,a<0)return{partIndex:o[0]&&o[0].partIndex||null,segmentIndex:o[0]&&o[0].segmentIndex||0,startTime:e};l=0}for(let u=l;u<o.length;u++){const c=o[u];a-=c.duration;const h=c.duration>eu,m=a===0,g=h&&a+eu>=0;if(!((m||g)&&u!==o.length-1)){if(s){if(a>0)continue}else if(a-eu>=0)continue;return{partIndex:c.partIndex,segmentIndex:c.segmentIndex,startTime:n+c0({defaultDuration:i.targetDuration,durationList:o,startIndex:l,endIndex:u})}}}return{segmentIndex:o[o.length-1].segmentIndex,partIndex:o[o.length-1].partIndex,startTime:e}},k5=function(i){return i.excludeUntil&&i.excludeUntil>Date.now()},k2=function(i){return i.excludeUntil&&i.excludeUntil===1/0},mT=function(i){const e=k5(i);return!i.disabled&&!e},Yoe=function(i){return i.disabled},Qoe=function(i){for(let e=0;e<i.segments.length;e++)if(i.segments[e].key)return!0;return!1},A5=function(i,e){return e.attributes&&e.attributes[i]},Joe=function(i,e,t,r=0){return A5("BANDWIDTH",t)?(i*t.attributes.BANDWIDTH-r*8)/e:NaN},GC=(i,e)=>{if(i.playlists.length===1)return!0;const t=e.attributes.BANDWIDTH||Number.MAX_VALUE;return i.playlists.filter(r=>mT(r)?(r.attributes.BANDWIDTH||0)<t:!1).length===0},A2=(i,e)=>!i&&!e||!i&&e||i&&!e?!1:!!(i===e||i.id&&e.id&&i.id===e.id||i.resolvedUri&&e.resolvedUri&&i.resolvedUri===e.resolvedUri||i.uri&&e.uri&&i.uri===e.uri),OO=function(i,e){const t=i&&i.mediaGroups&&i.mediaGroups.AUDIO||{};let r=!1;for(const n in t){for(const s in t[n])if(r=e(t[n][s]),r)break;if(r)break}return!!r},lg=i=>{if(!i||!i.playlists||!i.playlists.length)return OO(i,t=>t.playlists&&t.playlists.length||t.uri);for(let e=0;e<i.playlists.length;e++){const t=i.playlists[e],r=t.attributes&&t.attributes.CODECS;if(!(r&&r.split(",").every(s=>jw(s))||OO(i,s=>A2(t,s))))return!1}return!0};var wa={liveEdgeDelay:S5,duration:E5,seekable:Koe,getMediaInfoForTime:Xoe,isEnabled:mT,isDisabled:Yoe,isExcluded:k5,isIncompatible:k2,playlistEnd:w5,isAes:Qoe,hasAttribute:A5,estimateSegmentRequestTime:Joe,isLowestEnabledRendition:GC,isAudioOnly:lg,playlistMatch:A2,segmentDurationWithParts:w2};const{log:I5}=_e,Xf=(i,e)=>`${i}-${e}`,D5=(i,e,t)=>`placeholder-uri-${i}-${e}-${t}`,Zoe=({onwarn:i,oninfo:e,manifestString:t,customTagParsers:r=[],customTagMappers:n=[],llhls:s})=>{const a=new M8;i&&a.on("warn",i),e&&a.on("info",e),r.forEach(u=>a.addParser(u)),n.forEach(u=>a.addTagMapper(u)),a.push(t),a.end();const o=a.manifest;if(s||(["preloadSegment","skip","serverControl","renditionReports","partInf","partTargetDuration"].forEach(function(u){o.hasOwnProperty(u)&&delete o[u]}),o.segments&&o.segments.forEach(function(u){["parts","preloadHints"].forEach(function(c){u.hasOwnProperty(c)&&delete u[c]})})),!o.targetDuration){let u=10;o.segments&&o.segments.length&&(u=o.segments.reduce((c,h)=>Math.max(c,h.duration),0)),i&&i({message:`manifest has no targetDuration defaulting to ${u}`}),o.targetDuration=u}const l=T5(o);if(l.length&&!o.partTargetDuration){const u=l.reduce((c,h)=>Math.max(c,h.duration),0);i&&(i({message:`manifest has no partTargetDuration defaulting to ${u}`}),I5.error("LL-HLS manifest has parts but lacks required #EXT-X-PART-INF:PART-TARGET value. See https://datatracker.ietf.org/doc/html/draft-pantos-hls-rfc8216bis-09#section-4.4.3.7. Playback is not guaranteed.")),o.partTargetDuration=u}return o},$p=(i,e)=>{i.mediaGroups&&["AUDIO","SUBTITLES"].forEach(t=>{if(i.mediaGroups[t])for(const r in i.mediaGroups[t])for(const n in i.mediaGroups[t][r]){const s=i.mediaGroups[t][r][n];e(s,t,r,n)}})},P5=({playlist:i,uri:e,id:t})=>{i.id=t,i.playlistErrors_=0,e&&(i.uri=e),i.attributes=i.attributes||{}},ele=i=>{let e=i.playlists.length;for(;e--;){const t=i.playlists[e];P5({playlist:t,id:Xf(e,t.uri)}),t.resolvedUri=Ca(i.uri,t.uri),i.playlists[t.id]=t,i.playlists[t.uri]=t,t.attributes.BANDWIDTH||I5.warn("Invalid playlist STREAM-INF detected. Missing BANDWIDTH attribute.")}},tle=i=>{$p(i,e=>{e.uri&&(e.resolvedUri=Ca(i.uri,e.uri))})},rle=(i,e)=>{const t=Xf(0,e),r={mediaGroups:{AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},uri:X.location.href,resolvedUri:X.location.href,playlists:[{uri:e,id:t,resolvedUri:e,attributes:{}}]};return r.playlists[t]=r.playlists[0],r.playlists[e]=r.playlists[0],r},R5=(i,e,t=D5)=>{i.uri=e;for(let n=0;n<i.playlists.length;n++)if(!i.playlists[n].uri){const s=`placeholder-uri-${n}`;i.playlists[n].uri=s}const r=lg(i);$p(i,(n,s,a,o)=>{if(!n.playlists||!n.playlists.length){if(r&&s==="AUDIO"&&!n.uri)for(let l=0;l<i.playlists.length;l++){const u=i.playlists[l];if(u.attributes&&u.attributes.AUDIO&&u.attributes.AUDIO===a)return}n.playlists=[Jt({},n)]}n.playlists.forEach(function(l,u){const c=t(s,a,o,l),h=Xf(u,c);l.uri?l.resolvedUri=l.resolvedUri||Ca(i.uri,l.uri):(l.uri=u===0?c:h,l.resolvedUri=l.uri),l.id=l.id||h,l.attributes=l.attributes||{},i.playlists[l.id]=l,i.playlists[l.uri]=l})}),ele(i),tle(i)};class MO{constructor(){this.offset_=null,this.pendingDateRanges_=new Map,this.processedDateRanges_=new Map}setOffset(e=[]){if(this.offset_!==null||!e.length)return;const[t]=e;t.programDateTime!==void 0&&(this.offset_=t.programDateTime/1e3)}setPendingDateRanges(e=[]){if(!e.length)return;const[t]=e,r=t.startDate.getTime();this.trimProcessedDateRanges_(r),this.pendingDateRanges_=e.reduce((n,s)=>(n.set(s.id,s),n),new Map)}processDateRange(e){this.pendingDateRanges_.delete(e.id),this.processedDateRanges_.set(e.id,e)}getDateRangesToProcess(){if(this.offset_===null)return[];const e={},t=[];this.pendingDateRanges_.forEach((r,n)=>{if(!this.processedDateRanges_.has(n)&&(r.startTime=r.startDate.getTime()/1e3-this.offset_,r.processDateRange=()=>this.processDateRange(r),t.push(r),!!r.class))if(e[r.class]){const s=e[r.class].push(r);r.classListIndex=s-1}else e[r.class]=[r],r.classListIndex=0});for(const r of t){const n=e[r.class]||[];r.endDate?r.endTime=r.endDate.getTime()/1e3-this.offset_:r.endOnNext&&n[r.classListIndex+1]?r.endTime=n[r.classListIndex+1].startTime:r.duration?r.endTime=r.startTime+r.duration:r.plannedDuration?r.endTime=r.startTime+r.plannedDuration:r.endTime=r.startTime}return t}trimProcessedDateRanges_(e){new Map(this.processedDateRanges_).forEach((r,n)=>{r.startDate.getTime()<e&&this.processedDateRanges_.delete(n)})}}const L5=22,yh=({requestType:i,request:e,error:t,parseFailure:r})=>{const n=e.status<200||e.status>299,s=e.status>=400&&e.status<=499,a={uri:e.uri,requestType:i},o=n&&!s||r;if(t&&s)a.error=Jt({},t),a.errorType=_e.Error.NetworkRequestFailed;else if(e.aborted)a.errorType=_e.Error.NetworkRequestAborted;else if(e.timedout)a.erroType=_e.Error.NetworkRequestTimeout;else if(o){const l=r?_e.Error.NetworkBodyParserFailed:_e.Error.NetworkBadStatus;a.errorType=l,a.status=e.status,a.headers=e.headers}return a},{EventTarget:ile}=_e,nle=(i,e)=>{if(e.endList||!e.serverControl)return i;const t={};if(e.serverControl.canBlockReload){const{preloadSegment:r}=e;let n=e.mediaSequence+e.segments.length;if(r){const s=r.parts||[],a=b5(e)-1;a>-1&&a!==s.length-1&&(t._HLS_part=a),(a>-1||s.length)&&n--}t._HLS_msn=n}if(e.serverControl&&e.serverControl.canSkipUntil&&(t._HLS_skip=e.serverControl.canSkipDateranges?"v2":"YES"),Object.keys(t).length){const r=new X.URL(i);["_HLS_skip","_HLS_msn","_HLS_part"].forEach(function(n){t.hasOwnProperty(n)&&r.searchParams.set(n,t[n])}),i=r.toString()}return i},sle=(i,e)=>{if(!i)return e;const t=_i(i,e);if(i.preloadHints&&!e.preloadHints&&delete t.preloadHints,i.parts&&!e.parts)delete t.parts;else if(i.parts&&e.parts)for(let r=0;r<e.parts.length;r++)i.parts&&i.parts[r]&&(t.parts[r]=_i(i.parts[r],e.parts[r]));return!i.skipped&&e.skipped&&(t.skipped=!1),i.preload&&!e.preload&&(t.preload=!1),t},ale=(i,e,t)=>{const r=i.slice(),n=e.slice();t=t||0;const s=[];let a;for(let o=0;o<n.length;o++){const l=r[o+t],u=n[o];l?(a=l.map||a,s.push(sle(l,u))):(a&&!u.map&&(u.map=a),s.push(u))}return s},O5=(i,e)=>{!i.resolvedUri&&i.uri&&(i.resolvedUri=Ca(e,i.uri)),i.key&&!i.key.resolvedUri&&(i.key.resolvedUri=Ca(e,i.key.uri)),i.map&&!i.map.resolvedUri&&(i.map.resolvedUri=Ca(e,i.map.uri)),i.map&&i.map.key&&!i.map.key.resolvedUri&&(i.map.key.resolvedUri=Ca(e,i.map.key.uri)),i.parts&&i.parts.length&&i.parts.forEach(t=>{t.resolvedUri||(t.resolvedUri=Ca(e,t.uri))}),i.preloadHints&&i.preloadHints.length&&i.preloadHints.forEach(t=>{t.resolvedUri||(t.resolvedUri=Ca(e,t.uri))})},M5=function(i){const e=i.segments||[],t=i.preloadSegment;if(t&&t.parts&&t.parts.length){if(t.preloadHints){for(let r=0;r<t.preloadHints.length;r++)if(t.preloadHints[r].type==="MAP")return e}t.duration=i.targetDuration,t.preload=!0,e.push(t)}return e},F5=(i,e)=>i===e||i.segments&&e.segments&&i.segments.length===e.segments.length&&i.endList===e.endList&&i.mediaSequence===e.mediaSequence&&i.preloadSegment===e.preloadSegment,KC=(i,e,t=F5)=>{const r=_i(i,{}),n=r.playlists[e.id];if(!n||t(n,e))return null;e.segments=M5(e);const s=_i(n,e);if(s.preloadSegment&&!e.preloadSegment&&delete s.preloadSegment,n.segments){if(e.skip){e.segments=e.segments||[];for(let a=0;a<e.skip.skippedSegments;a++)e.segments.unshift({skipped:!0})}s.segments=ale(n.segments,e.segments,e.mediaSequence-n.mediaSequence)}s.segments.forEach(a=>{O5(a,s.resolvedUri)});for(let a=0;a<r.playlists.length;a++)r.playlists[a].id===e.id&&(r.playlists[a]=s);return r.playlists[e.id]=s,r.playlists[e.uri]=s,$p(i,(a,o,l,u)=>{if(a.playlists)for(let c=0;c<a.playlists.length;c++)e.id===a.playlists[c].id&&(a.playlists[c]=s)}),r},XC=(i,e)=>{const t=i.segments||[],r=t[t.length-1],n=r&&r.parts&&r.parts[r.parts.length-1],s=n&&n.duration||r&&r.duration;return e&&s?s*1e3:(i.partTargetDuration||i.targetDuration||10)*500},FO=(i,e,t)=>{if(!i)return;const r=[];return i.forEach(n=>{if(!n.attributes)return;const{BANDWIDTH:s,RESOLUTION:a,CODECS:o}=n.attributes;r.push({id:n.id,bandwidth:s,resolution:a,codecs:o})}),{type:e,isLive:t,renditions:r}};let Lf=class extends ile{constructor(e,t,r={}){if(super(),!e)throw new Error("A non-empty playlist URL or object is required");this.logger_=$o("PlaylistLoader");const{withCredentials:n=!1}=r;this.src=e,this.vhs_=t,this.withCredentials=n,this.addDateRangesToTextTrack_=r.addDateRangesToTextTrack;const s=t.options_;this.customTagParsers=s&&s.customTagParsers||[],this.customTagMappers=s&&s.customTagMappers||[],this.llhls=s&&s.llhls,this.dateRangesStorage_=new MO,this.state="HAVE_NOTHING",this.handleMediaupdatetimeout_=this.handleMediaupdatetimeout_.bind(this),this.on("mediaupdatetimeout",this.handleMediaupdatetimeout_),this.on("loadedplaylist",this.handleLoadedPlaylist_.bind(this))}handleLoadedPlaylist_(){const e=this.media();if(!e)return;this.dateRangesStorage_.setOffset(e.segments),this.dateRangesStorage_.setPendingDateRanges(e.dateRanges);const t=this.dateRangesStorage_.getDateRangesToProcess();!t.length||!this.addDateRangesToTextTrack_||this.addDateRangesToTextTrack_(t)}handleMediaupdatetimeout_(){if(this.state!=="HAVE_METADATA")return;const e=this.media();let t=Ca(this.main.uri,e.uri);this.llhls&&(t=nle(t,e)),this.state="HAVE_CURRENT_METADATA",this.request=this.vhs_.xhr({uri:t,withCredentials:this.withCredentials,requestType:"hls-playlist"},(r,n)=>{if(this.request){if(r)return this.playlistRequestError(this.request,this.media(),"HAVE_METADATA");this.haveMetadata({playlistString:this.request.responseText,url:this.media().uri,id:this.media().id})}})}playlistRequestError(e,t,r){const{uri:n,id:s}=t;this.request=null,r&&(this.state=r),this.error={playlist:this.main.playlists[s],status:e.status,message:`HLS playlist request error at URL: ${n}.`,responseText:e.responseText,code:e.status>=500?4:2,metadata:yh({requestType:e.requestType,request:e,error:e.error})},this.trigger("error")}parseManifest_({url:e,manifestString:t}){try{return Zoe({onwarn:({message:r})=>this.logger_(`m3u8-parser warn for ${e}: ${r}`),oninfo:({message:r})=>this.logger_(`m3u8-parser info for ${e}: ${r}`),manifestString:t,customTagParsers:this.customTagParsers,customTagMappers:this.customTagMappers,llhls:this.llhls})}catch(r){this.error=r,this.error.metadata={errorType:_e.Error.StreamingHlsPlaylistParserError,error:r}}}haveMetadata({playlistString:e,playlistObject:t,url:r,id:n}){this.request=null,this.state="HAVE_METADATA";const s={playlistInfo:{type:"media",uri:r}};this.trigger({type:"playlistparsestart",metadata:s});const a=t||this.parseManifest_({url:r,manifestString:e});a.lastRequest=Date.now(),P5({playlist:a,uri:r,id:n});const o=KC(this.main,a);this.targetDuration=a.partTargetDuration||a.targetDuration,this.pendingMedia_=null,o?(this.main=o,this.media_=this.main.playlists[n]):this.trigger("playlistunchanged"),this.updateMediaUpdateTimeout_(XC(this.media(),!!o)),s.parsedPlaylist=FO(this.main.playlists,s.playlistInfo.type,!this.media_.endList),this.trigger({type:"playlistparsecomplete",metadata:s}),this.trigger("loadedplaylist")}dispose(){this.trigger("dispose"),this.stopRequest(),X.clearTimeout(this.mediaUpdateTimeout),X.clearTimeout(this.finalRenditionTimeout),this.dateRangesStorage_=new MO,this.off()}stopRequest(){if(this.request){const e=this.request;this.request=null,e.onreadystatechange=null,e.abort()}}media(e,t){if(!e)return this.media_;if(this.state==="HAVE_NOTHING")throw new Error("Cannot switch media playlist from "+this.state);if(typeof e=="string"){if(!this.main.playlists[e])throw new Error("Unknown playlist URI: "+e);e=this.main.playlists[e]}if(X.clearTimeout(this.finalRenditionTimeout),t){const o=(e.partTargetDuration||e.targetDuration)/2*1e3||5e3;this.finalRenditionTimeout=X.setTimeout(this.media.bind(this,e,!1),o);return}const r=this.state,n=!this.media_||e.id!==this.media_.id,s=this.main.playlists[e.id];if(s&&s.endList||e.endList&&e.segments.length){this.request&&(this.request.onreadystatechange=null,this.request.abort(),this.request=null),this.state="HAVE_METADATA",this.media_=e,n&&(this.trigger("mediachanging"),r==="HAVE_MAIN_MANIFEST"?this.trigger("loadedmetadata"):this.trigger("mediachange"));return}if(this.updateMediaUpdateTimeout_(XC(e,!0)),!n)return;if(this.state="SWITCHING_MEDIA",this.request){if(e.resolvedUri===this.request.url)return;this.request.onreadystatechange=null,this.request.abort(),this.request=null}this.media_&&this.trigger("mediachanging"),this.pendingMedia_=e;const a={playlistInfo:{type:"media",uri:e.uri}};this.trigger({type:"playlistrequeststart",metadata:a}),this.request=this.vhs_.xhr({uri:e.resolvedUri,withCredentials:this.withCredentials,requestType:"hls-playlist"},(o,l)=>{if(this.request){if(e.lastRequest=Date.now(),e.resolvedUri=U_(e.resolvedUri,l),o)return this.playlistRequestError(this.request,e,r);this.trigger({type:"playlistrequestcomplete",metadata:a}),this.haveMetadata({playlistString:l.responseText,url:e.uri,id:e.id}),r==="HAVE_MAIN_MANIFEST"?this.trigger("loadedmetadata"):this.trigger("mediachange")}})}pause(){this.mediaUpdateTimeout&&(X.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null),this.stopRequest(),this.state==="HAVE_NOTHING"&&(this.started=!1),this.state==="SWITCHING_MEDIA"?this.media_?this.state="HAVE_METADATA":this.state="HAVE_MAIN_MANIFEST":this.state==="HAVE_CURRENT_METADATA"&&(this.state="HAVE_METADATA")}load(e){this.mediaUpdateTimeout&&(X.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null);const t=this.media();if(e){const r=t?(t.partTargetDuration||t.targetDuration)/2*1e3:5e3;this.mediaUpdateTimeout=X.setTimeout(()=>{this.mediaUpdateTimeout=null,this.load()},r);return}if(!this.started){this.start();return}t&&!t.endList?this.trigger("mediaupdatetimeout"):this.trigger("loadedplaylist")}updateMediaUpdateTimeout_(e){this.mediaUpdateTimeout&&(X.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null),!(!this.media()||this.media().endList)&&(this.mediaUpdateTimeout=X.setTimeout(()=>{this.mediaUpdateTimeout=null,this.trigger("mediaupdatetimeout"),this.updateMediaUpdateTimeout_(e)},e))}start(){if(this.started=!0,typeof this.src=="object"){this.src.uri||(this.src.uri=X.location.href),this.src.resolvedUri=this.src.uri,setTimeout(()=>{this.setupInitialPlaylist(this.src)},0);return}const e={playlistInfo:{type:"multivariant",uri:this.src}};this.trigger({type:"playlistrequeststart",metadata:e}),this.request=this.vhs_.xhr({uri:this.src,withCredentials:this.withCredentials,requestType:"hls-playlist"},(t,r)=>{if(!this.request)return;if(this.request=null,t)return this.error={status:r.status,message:`HLS playlist request error at URL: ${this.src}.`,responseText:r.responseText,code:2,metadata:yh({requestType:r.requestType,request:r,error:t})},this.state==="HAVE_NOTHING"&&(this.started=!1),this.trigger("error");this.trigger({type:"playlistrequestcomplete",metadata:e}),this.src=U_(this.src,r),this.trigger({type:"playlistparsestart",metadata:e});const n=this.parseManifest_({manifestString:r.responseText,url:this.src});e.parsedPlaylist=FO(n.playlists,e.playlistInfo.type,!1),this.trigger({type:"playlistparsecomplete",metadata:e}),this.setupInitialPlaylist(n)})}srcUri(){return typeof this.src=="string"?this.src:this.src.uri}setupInitialPlaylist(e){if(this.state="HAVE_MAIN_MANIFEST",e.playlists){this.main=e,R5(this.main,this.srcUri()),e.playlists.forEach(r=>{r.segments=M5(r),r.segments.forEach(n=>{O5(n,r.resolvedUri)})}),this.trigger("loadedplaylist"),this.request||this.media(this.main.playlists[0]);return}const t=this.srcUri()||X.location.href;this.main=rle(e,t),this.haveMetadata({playlistObject:e,url:t,id:this.main.playlists[0].id}),this.trigger("loadedmetadata")}updateOrDeleteClone(e,t){const r=this.main,n=e.ID;let s=r.playlists.length;for(;s--;){const a=r.playlists[s];if(a.attributes["PATHWAY-ID"]===n){const o=a.resolvedUri,l=a.id;if(t){const u=this.createCloneURI_(a.resolvedUri,e),c=Xf(n,u),h=this.createCloneAttributes_(n,a.attributes),m=this.createClonePlaylist_(a,c,e,h);r.playlists[s]=m,r.playlists[c]=m,r.playlists[u]=m}else r.playlists.splice(s,1);delete r.playlists[l],delete r.playlists[o]}}this.updateOrDeleteCloneMedia(e,t)}updateOrDeleteCloneMedia(e,t){const r=this.main,n=e.ID;["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(s=>{if(!(!r.mediaGroups[s]||!r.mediaGroups[s][n])){for(const a in r.mediaGroups[s])if(a===n){for(const o in r.mediaGroups[s][a])r.mediaGroups[s][a][o].playlists.forEach((u,c)=>{const h=r.playlists[u.id],m=h.id,g=h.resolvedUri;delete r.playlists[m],delete r.playlists[g]});delete r.mediaGroups[s][a]}}}),t&&this.createClonedMediaGroups_(e)}addClonePathway(e,t={}){const r=this.main,n=r.playlists.length,s=this.createCloneURI_(t.resolvedUri,e),a=Xf(e.ID,s),o=this.createCloneAttributes_(e.ID,t.attributes),l=this.createClonePlaylist_(t,a,e,o);r.playlists[n]=l,r.playlists[a]=l,r.playlists[s]=l,this.createClonedMediaGroups_(e)}createClonedMediaGroups_(e){const t=e.ID,r=e["BASE-ID"],n=this.main;["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(s=>{if(!(!n.mediaGroups[s]||n.mediaGroups[s][t]))for(const a in n.mediaGroups[s]){if(a===r)n.mediaGroups[s][t]={};else continue;for(const o in n.mediaGroups[s][a]){const l=n.mediaGroups[s][a][o];n.mediaGroups[s][t][o]=Jt({},l);const u=n.mediaGroups[s][t][o],c=this.createCloneURI_(l.resolvedUri,e);u.resolvedUri=c,u.uri=c,u.playlists=[],l.playlists.forEach((h,m)=>{const g=n.playlists[h.id],y=D5(s,t,o),_=Xf(t,y);if(g&&!n.playlists[_]){const T=this.createClonePlaylist_(g,_,e),E=T.resolvedUri;n.playlists[_]=T,n.playlists[E]=T}u.playlists[m]=this.createClonePlaylist_(h,_,e)})}}})}createClonePlaylist_(e,t,r,n){const s=this.createCloneURI_(e.resolvedUri,r),a={resolvedUri:s,uri:s,id:t};return e.segments&&(a.segments=[]),n&&(a.attributes=n),_i(e,a)}createCloneURI_(e,t){const r=new URL(e);r.hostname=t["URI-REPLACEMENT"].HOST;const n=t["URI-REPLACEMENT"].PARAMS;for(const s of Object.keys(n))r.searchParams.set(s,n[s]);return r.href}createCloneAttributes_(e,t){const r={"PATHWAY-ID":e};return["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(n=>{t[n]&&(r[n]=e)}),r}getKeyIdSet(e){if(e.contentProtection){const t=new Set;for(const r in e.contentProtection){const n=e.contentProtection[r].attributes.keyId;n&&t.add(n.toLowerCase())}return t}}};const YC=function(i,e,t,r){const n=i.responseType==="arraybuffer"?i.response:i.responseText;!e&&n&&(i.responseTime=Date.now(),i.roundTripTime=i.responseTime-i.requestTime,i.bytesReceived=n.byteLength||n.length,i.bandwidth||(i.bandwidth=Math.floor(i.bytesReceived/i.roundTripTime*8*1e3))),t.headers&&(i.responseHeaders=t.headers),e&&e.code==="ETIMEDOUT"&&(i.timedout=!0),!e&&!i.aborted&&t.statusCode!==200&&t.statusCode!==206&&t.statusCode!==0&&(e=new Error("XHR Failed with a response of: "+(i&&(n||i.responseText)))),r(e,i)},ole=(i,e)=>{if(!i||!i.size)return;let t=e;return i.forEach(r=>{t=r(t)}),t},lle=(i,e,t,r)=>{!i||!i.size||i.forEach(n=>{n(e,t,r)})},B5=function(){const i=function e(t,r){t=_i({timeout:45e3},t);const n=e.beforeRequest||_e.Vhs.xhr.beforeRequest,s=e._requestCallbackSet||_e.Vhs.xhr._requestCallbackSet||new Set,a=e._responseCallbackSet||_e.Vhs.xhr._responseCallbackSet;n&&typeof n=="function"&&(_e.log.warn("beforeRequest is deprecated, use onRequest instead."),s.add(n));const o=_e.Vhs.xhr.original===!0?_e.xhr:_e.Vhs.xhr,l=ole(s,t);s.delete(n);const u=o(l||t,function(h,m){return lle(a,u,h,m),YC(u,h,m,r)}),c=u.abort;return u.abort=function(){return u.aborted=!0,c.apply(u,arguments)},u.uri=t.uri,u.requestType=t.requestType,u.requestTime=Date.now(),u};return i.original=!0,i},ule=function(i){let e;const t=i.offset;return typeof i.offset=="bigint"||typeof i.length=="bigint"?e=X.BigInt(i.offset)+X.BigInt(i.length)-X.BigInt(1):e=i.offset+i.length-1,"bytes="+t+"-"+e},QC=function(i){const e={};return i.byterange&&(e.Range=ule(i.byterange)),e},cle=function(i,e){return i.start(e)+"-"+i.end(e)},dle=function(i,e){const t=i.toString(16);return"00".substring(0,2-t.length)+t+(e%2?" ":"")},hle=function(i){return i>=32&&i<126?String.fromCharCode(i):"."},N5=function(i){const e={};return Object.keys(i).forEach(t=>{const r=i[t];zw(r)?e[t]={bytes:r.buffer,byteOffset:r.byteOffset,byteLength:r.byteLength}:e[t]=r}),e},$_=function(i){const e=i.byterange||{length:1/0,offset:0};return[e.length,e.offset,i.resolvedUri].join(",")},U5=function(i){return i.resolvedUri},$5=i=>{const e=Array.prototype.slice.call(i),t=16;let r="",n,s;for(let a=0;a<e.length/t;a++)n=e.slice(a*t,a*t+t).map(dle).join(""),s=e.slice(a*t,a*t+t).map(hle).join(""),r+=n+" "+s+`
`;return r},fle=({bytes:i})=>$5(i),ple=i=>{let e="",t;for(t=0;t<i.length;t++)e+=cle(i,t)+" ";return e};var mle=Object.freeze({__proto__:null,createTransferableMessage:N5,initSegmentId:$_,segmentKeyId:U5,hexDump:$5,tagDump:fle,textRanges:ple});const j5=.25,gle=(i,e)=>{if(!e.dateTimeObject)return null;const t=e.videoTimingInfo.transmuxerPrependedSeconds,n=e.videoTimingInfo.transmuxedPresentationStart+t,s=i-n;return new Date(e.dateTimeObject.getTime()+s*1e3)},vle=i=>i.transmuxedPresentationEnd-i.transmuxedPresentationStart-i.transmuxerPrependedSeconds,yle=(i,e)=>{let t;try{t=new Date(i)}catch{return null}if(!e||!e.segments||e.segments.length===0)return null;let r=e.segments[0];if(t<new Date(r.dateTimeObject))return null;for(let l=0;l<e.segments.length-1;l++){r=e.segments[l];const u=new Date(e.segments[l+1].dateTimeObject);if(t<u)break}const n=e.segments[e.segments.length-1],s=n.dateTimeObject,a=n.videoTimingInfo?vle(n.videoTimingInfo):n.duration+n.duration*j5,o=new Date(s.getTime()+a*1e3);return t>o?null:(t>new Date(s)&&(r=n),{segment:r,estimatedStart:r.videoTimingInfo?r.videoTimingInfo.transmuxedPresentationStart:wa.duration(e,e.mediaSequence+e.segments.indexOf(r)),type:r.videoTimingInfo?"accurate":"estimate"})},_le=(i,e)=>{if(!e||!e.segments||e.segments.length===0)return null;let t=0,r;for(let s=0;s<e.segments.length&&(r=e.segments[s],t=r.videoTimingInfo?r.videoTimingInfo.transmuxedPresentationEnd:t+r.duration,!(i<=t));s++);const n=e.segments[e.segments.length-1];if(n.videoTimingInfo&&n.videoTimingInfo.transmuxedPresentationEnd<i)return null;if(i>t){if(i>t+n.duration*j5)return null;r=n}return{segment:r,estimatedStart:r.videoTimingInfo?r.videoTimingInfo.transmuxedPresentationStart:t-r.duration,type:r.videoTimingInfo?"accurate":"estimate"}},xle=(i,e)=>{let t,r;try{t=new Date(i),r=new Date(e)}catch{}const n=t.getTime();return(r.getTime()-n)/1e3},Tle=i=>{if(!i.segments||i.segments.length===0)return!1;for(let e=0;e<i.segments.length;e++)if(!i.segments[e].dateTimeObject)return!1;return!0},ble=({playlist:i,time:e=void 0,callback:t})=>{if(!t)throw new Error("getProgramTime: callback must be provided");if(!i||e===void 0)return t({message:"getProgramTime: playlist and time must be provided"});const r=_le(e,i);if(!r)return t({message:"valid programTime was not found"});if(r.type==="estimate")return t({message:"Accurate programTime could not be determined. Please seek to e.seekTime and try again",seekTime:r.estimatedStart});const n={mediaSeconds:e},s=gle(e,r.segment);return s&&(n.programDateTime=s.toISOString()),t(null,n)},z5=({programTime:i,playlist:e,retryCount:t=2,seekTo:r,pauseAfterSeek:n=!0,tech:s,callback:a})=>{if(!a)throw new Error("seekToProgramTime: callback must be provided");if(typeof i>"u"||!e||!r)return a({message:"seekToProgramTime: programTime, seekTo and playlist must be provided"});if(!e.endList&&!s.hasStarted_)return a({message:"player must be playing a live stream to start buffering"});if(!Tle(e))return a({message:"programDateTime tags must be provided in the manifest "+e.resolvedUri});const o=yle(i,e);if(!o)return a({message:`${i} was not found in the stream`});const l=o.segment,u=xle(l.dateTimeObject,i);if(o.type==="estimate"){if(t===0)return a({message:`${i} is not buffered yet. Try again`});r(o.estimatedStart+u),s.one("seeked",()=>{z5({programTime:i,playlist:e,retryCount:t-1,seekTo:r,pauseAfterSeek:n,tech:s,callback:a})});return}const c=l.start+u,h=()=>a(null,s.currentTime());s.one("seeked",h),n&&s.pause(),r(c)},i1=(i,e)=>{if(i.readyState===4)return e()},Sle=(i,e,t,r)=>{let n=[],s,a=!1;const o=function(h,m,g,y){return m.abort(),a=!0,t(h,m,g,y)},l=function(h,m){if(a)return;if(h)return h.metadata=yh({requestType:r,request:m,error:h}),o(h,m,"",n);const g=m.responseText.substring(n&&n.byteLength||0,m.responseText.length);if(n=N8(n,Hw(g,!0)),s=s||Af(n),n.length<10||s&&n.length<s+2)return i1(m,()=>o(h,m,"",n));const y=Pp(n);return y==="ts"&&n.length<188?i1(m,()=>o(h,m,"",n)):!y&&n.length<376?i1(m,()=>o(h,m,"",n)):o(null,m,y,n)},c=e({uri:i,beforeSend(h){h.overrideMimeType("text/plain; charset=x-user-defined"),h.addEventListener("progress",function({total:m,loaded:g}){return YC(h,null,{statusCode:h.status},l)})}},function(h,m){return YC(c,h,m,l)});return c},{EventTarget:Cle}=_e,BO=function(i,e){if(!F5(i,e)||i.sidx&&e.sidx&&(i.sidx.offset!==e.sidx.offset||i.sidx.length!==e.sidx.length))return!1;if(!i.sidx&&e.sidx||i.sidx&&!e.sidx||i.segments&&!e.segments||!i.segments&&e.segments)return!1;if(!i.segments&&!e.segments)return!0;for(let t=0;t<i.segments.length;t++){const r=i.segments[t],n=e.segments[t];if(r.uri!==n.uri)return!1;if(!r.byterange&&!n.byterange)continue;const s=r.byterange,a=n.byterange;if(s&&!a||!s&&a||s.offset!==a.offset||s.length!==a.length)return!1}return!0},Ele=(i,e,t,r)=>{const n=r.attributes.NAME||t;return`placeholder-uri-${i}-${e}-${n}`},wle=({mainXml:i,srcUrl:e,clientOffset:t,sidxMapping:r,previousManifest:n})=>{const s=G8(i,{manifestUri:e,clientOffset:t,sidxMapping:r,previousManifest:n});return R5(s,e,Ele),s},kle=(i,e)=>{$p(i,(t,r,n,s)=>{(!e.mediaGroups[r][n]||!(s in e.mediaGroups[r][n]))&&delete i.mediaGroups[r][n][s]})},Ale=(i,e,t)=>{let r=!0,n=_i(i,{duration:e.duration,minimumUpdatePeriod:e.minimumUpdatePeriod,timelineStarts:e.timelineStarts});for(let s=0;s<e.playlists.length;s++){const a=e.playlists[s];if(a.sidx){const l=Mh(a.sidx);t&&t[l]&&t[l].sidx&&tg(a,t[l].sidx,a.sidx.resolvedUri)}const o=KC(n,a,BO);o&&(n=o,r=!1)}return $p(e,(s,a,o,l)=>{if(s.playlists&&s.playlists.length){const u=s.playlists[0].id,c=KC(n,s.playlists[0],BO);c&&(n=c,l in n.mediaGroups[a][o]||(n.mediaGroups[a][o][l]=s),n.mediaGroups[a][o][l].playlists[0]=n.playlists[u],r=!1)}}),kle(n,e),e.minimumUpdatePeriod!==i.minimumUpdatePeriod&&(r=!1),r?null:n},Ile=(i,e)=>(!i.map&&!e.map||!!(i.map&&e.map&&i.map.byterange.offset===e.map.byterange.offset&&i.map.byterange.length===e.map.byterange.length))&&i.uri===e.uri&&i.byterange.offset===e.byterange.offset&&i.byterange.length===e.byterange.length,NO=(i,e)=>{const t={};for(const r in i){const s=i[r].sidx;if(s){const a=Mh(s);if(!e[a])break;const o=e[a].sidxInfo;Ile(o,s)&&(t[a]=e[a])}}return t},Dle=(i,e)=>{let r=NO(i.playlists,e);return $p(i,(n,s,a,o)=>{if(n.playlists&&n.playlists.length){const l=n.playlists;r=_i(r,NO(l,e))}}),r};let JC=class extends Cle{constructor(e,t,r={},n){super(),this.mainPlaylistLoader_=n||this,n||(this.isMain_=!0);const{withCredentials:s=!1}=r;if(this.vhs_=t,this.withCredentials=s,this.addMetadataToTextTrack=r.addMetadataToTextTrack,!e)throw new Error("A non-empty playlist URL or object is required");this.on("minimumUpdatePeriod",()=>{this.refreshXml_()}),this.on("mediaupdatetimeout",()=>{this.refreshMedia_(this.media().id)}),this.state="HAVE_NOTHING",this.loadedPlaylists_={},this.logger_=$o("DashPlaylistLoader"),this.isMain_?(this.mainPlaylistLoader_.srcUrl=e,this.mainPlaylistLoader_.sidxMapping_={}):this.childPlaylist_=e}requestErrored_(e,t,r){if(!this.request)return!0;if(this.request=null,e)return this.error=typeof e=="object"&&!(e instanceof Error)?e:{status:t.status,message:"DASH request error at URL: "+t.uri,response:t.response,code:2,metadata:e.metadata},r&&(this.state=r),this.trigger("error"),!0}addSidxSegments_(e,t,r){const n=e.sidx&&Mh(e.sidx);if(!e.sidx||!n||this.mainPlaylistLoader_.sidxMapping_[n]){this.mediaRequest_=X.setTimeout(()=>r(!1),0);return}const s=U_(e.sidx.resolvedUri),a=(l,u)=>{if(this.requestErrored_(l,u,t))return;const c=this.mainPlaylistLoader_.sidxMapping_,{requestType:h}=u;let m;try{m=X8(fr(u.response).subarray(8))}catch(g){g.metadata=yh({requestType:h,request:u,parseFailure:!0}),this.requestErrored_(g,u,t);return}return c[n]={sidxInfo:e.sidx,sidx:m},tg(e,m,e.sidx.resolvedUri),r(!0)},o="dash-sidx";this.request=Sle(s,this.vhs_.xhr,(l,u,c,h)=>{if(l)return a(l,u);if(!c||c!=="mp4"){const y=c||"unknown";return a({status:u.status,message:`Unsupported ${y} container type for sidx segment at URL: ${s}`,response:"",playlist:e,internal:!0,playlistExclusionDuration:1/0,code:2},u)}const{offset:m,length:g}=e.sidx.byterange;if(h.length>=g+m)return a(l,{response:h.subarray(m,m+g),status:u.status,uri:u.uri});this.request=this.vhs_.xhr({uri:s,responseType:"arraybuffer",requestType:"dash-sidx",headers:QC({byterange:e.sidx.byterange})},a)},o)}dispose(){this.trigger("dispose"),this.stopRequest(),this.loadedPlaylists_={},X.clearTimeout(this.minimumUpdatePeriodTimeout_),X.clearTimeout(this.mediaRequest_),X.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null,this.mediaRequest_=null,this.minimumUpdatePeriodTimeout_=null,this.mainPlaylistLoader_.createMupOnMedia_&&(this.off("loadedmetadata",this.mainPlaylistLoader_.createMupOnMedia_),this.mainPlaylistLoader_.createMupOnMedia_=null),this.off()}hasPendingRequest(){return this.request||this.mediaRequest_}stopRequest(){if(this.request){const e=this.request;this.request=null,e.onreadystatechange=null,e.abort()}}media(e){if(!e)return this.media_;if(this.state==="HAVE_NOTHING")throw new Error("Cannot switch media playlist from "+this.state);const t=this.state;if(typeof e=="string"){if(!this.mainPlaylistLoader_.main.playlists[e])throw new Error("Unknown playlist URI: "+e);e=this.mainPlaylistLoader_.main.playlists[e]}const r=!this.media_||e.id!==this.media_.id;if(r&&this.loadedPlaylists_[e.id]&&this.loadedPlaylists_[e.id].endList){this.state="HAVE_METADATA",this.media_=e,r&&(this.trigger("mediachanging"),this.trigger("mediachange"));return}r&&(this.media_&&this.trigger("mediachanging"),this.addSidxSegments_(e,t,n=>{this.haveMetadata({startingState:t,playlist:e})}))}haveMetadata({startingState:e,playlist:t}){this.state="HAVE_METADATA",this.loadedPlaylists_[t.id]=t,this.mediaRequest_=null,this.refreshMedia_(t.id),e==="HAVE_MAIN_MANIFEST"?this.trigger("loadedmetadata"):this.trigger("mediachange")}pause(){this.mainPlaylistLoader_.createMupOnMedia_&&(this.off("loadedmetadata",this.mainPlaylistLoader_.createMupOnMedia_),this.mainPlaylistLoader_.createMupOnMedia_=null),this.stopRequest(),X.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null,this.isMain_&&(X.clearTimeout(this.mainPlaylistLoader_.minimumUpdatePeriodTimeout_),this.mainPlaylistLoader_.minimumUpdatePeriodTimeout_=null),this.state==="HAVE_NOTHING"&&(this.started=!1)}load(e){X.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null;const t=this.media();if(e){const r=t?t.targetDuration/2*1e3:5e3;this.mediaUpdateTimeout=X.setTimeout(()=>this.load(),r);return}if(!this.started){this.start();return}t&&!t.endList?(this.isMain_&&!this.minimumUpdatePeriodTimeout_&&(this.trigger("minimumUpdatePeriod"),this.updateMinimumUpdatePeriodTimeout_()),this.trigger("mediaupdatetimeout")):this.trigger("loadedplaylist")}start(){if(this.started=!0,!this.isMain_){this.mediaRequest_=X.setTimeout(()=>this.haveMain_(),0);return}this.requestMain_((e,t)=>{this.haveMain_(),!this.hasPendingRequest()&&!this.media_&&this.media(this.mainPlaylistLoader_.main.playlists[0])})}requestMain_(e){const t={manifestInfo:{uri:this.mainPlaylistLoader_.srcUrl}};this.trigger({type:"manifestrequeststart",metadata:t}),this.request=this.vhs_.xhr({uri:this.mainPlaylistLoader_.srcUrl,withCredentials:this.withCredentials,requestType:"dash-manifest"},(r,n)=>{if(r){const{requestType:a}=n;r.metadata=yh({requestType:a,request:n,error:r})}if(this.requestErrored_(r,n)){this.state==="HAVE_NOTHING"&&(this.started=!1);return}this.trigger({type:"manifestrequestcomplete",metadata:t});const s=n.responseText!==this.mainPlaylistLoader_.mainXml_;if(this.mainPlaylistLoader_.mainXml_=n.responseText,n.responseHeaders&&n.responseHeaders.date?this.mainLoaded_=Date.parse(n.responseHeaders.date):this.mainLoaded_=Date.now(),this.mainPlaylistLoader_.srcUrl=U_(this.mainPlaylistLoader_.srcUrl,n),s){this.handleMain_(),this.syncClientServerClock_(()=>e(n,s));return}return e(n,s)})}syncClientServerClock_(e){const t=K8(this.mainPlaylistLoader_.mainXml_);if(t===null)return this.mainPlaylistLoader_.clientOffset_=this.mainLoaded_-Date.now(),e();if(t.method==="DIRECT")return this.mainPlaylistLoader_.clientOffset_=t.value-Date.now(),e();this.request=this.vhs_.xhr({uri:Ca(this.mainPlaylistLoader_.srcUrl,t.value),method:t.method,withCredentials:this.withCredentials,requestType:"dash-clock-sync"},(r,n)=>{if(!this.request)return;if(r){const{requestType:a}=n;return this.error.metadata=yh({requestType:a,request:n,error:r}),this.mainPlaylistLoader_.clientOffset_=this.mainLoaded_-Date.now(),e()}let s;t.method==="HEAD"?!n.responseHeaders||!n.responseHeaders.date?s=this.mainLoaded_:s=Date.parse(n.responseHeaders.date):s=Date.parse(n.responseText),this.mainPlaylistLoader_.clientOffset_=s-Date.now(),e()})}haveMain_(){this.state="HAVE_MAIN_MANIFEST",this.isMain_?this.trigger("loadedplaylist"):this.media_||this.media(this.childPlaylist_)}handleMain_(){this.mediaRequest_=null;const e=this.mainPlaylistLoader_.main,t={manifestInfo:{uri:this.mainPlaylistLoader_.srcUrl}};this.trigger({type:"manifestparsestart",metadata:t});let r;try{r=wle({mainXml:this.mainPlaylistLoader_.mainXml_,srcUrl:this.mainPlaylistLoader_.srcUrl,clientOffset:this.mainPlaylistLoader_.clientOffset_,sidxMapping:this.mainPlaylistLoader_.sidxMapping_,previousManifest:e})}catch(s){this.error=s,this.error.metadata={errorType:_e.Error.StreamingDashManifestParserError,error:s},this.trigger("error")}e&&(r=Ale(e,r,this.mainPlaylistLoader_.sidxMapping_)),this.mainPlaylistLoader_.main=r||e;const n=this.mainPlaylistLoader_.main.locations&&this.mainPlaylistLoader_.main.locations[0];if(n&&n!==this.mainPlaylistLoader_.srcUrl&&(this.mainPlaylistLoader_.srcUrl=n),(!e||r&&r.minimumUpdatePeriod!==e.minimumUpdatePeriod)&&this.updateMinimumUpdatePeriodTimeout_(),this.addEventStreamToMetadataTrack_(r),r){const{duration:s,endList:a}=r,o=[];r.playlists.forEach(u=>{o.push({id:u.id,bandwidth:u.attributes.BANDWIDTH,resolution:u.attributes.RESOLUTION,codecs:u.attributes.CODECS})});const l={duration:s,isLive:!a,renditions:o};t.parsedManifest=l,this.trigger({type:"manifestparsecomplete",metadata:t})}return!!r}updateMinimumUpdatePeriodTimeout_(){const e=this.mainPlaylistLoader_;e.createMupOnMedia_&&(e.off("loadedmetadata",e.createMupOnMedia_),e.createMupOnMedia_=null),e.minimumUpdatePeriodTimeout_&&(X.clearTimeout(e.minimumUpdatePeriodTimeout_),e.minimumUpdatePeriodTimeout_=null);let t=e.main&&e.main.minimumUpdatePeriod;if(t===0&&(e.media()?t=e.media().targetDuration*1e3:(e.createMupOnMedia_=e.updateMinimumUpdatePeriodTimeout_,e.one("loadedmetadata",e.createMupOnMedia_))),typeof t!="number"||t<=0){t<0&&this.logger_(`found invalid minimumUpdatePeriod of ${t}, not setting a timeout`);return}this.createMUPTimeout_(t)}createMUPTimeout_(e){const t=this.mainPlaylistLoader_;t.minimumUpdatePeriodTimeout_=X.setTimeout(()=>{t.minimumUpdatePeriodTimeout_=null,t.trigger("minimumUpdatePeriod"),t.createMUPTimeout_(e)},e)}refreshXml_(){this.requestMain_((e,t)=>{t&&(this.media_&&(this.media_=this.mainPlaylistLoader_.main.playlists[this.media_.id]),this.mainPlaylistLoader_.sidxMapping_=Dle(this.mainPlaylistLoader_.main,this.mainPlaylistLoader_.sidxMapping_),this.addSidxSegments_(this.media(),this.state,r=>{this.refreshMedia_(this.media().id)}))})}refreshMedia_(e){if(!e)throw new Error("refreshMedia_ must take a media id");this.media_&&this.isMain_&&this.handleMain_();const t=this.mainPlaylistLoader_.main.playlists,r=!this.media_||this.media_!==t[e];if(r?this.media_=t[e]:this.trigger("playlistunchanged"),!this.mediaUpdateTimeout){const n=()=>{this.media().endList||(this.mediaUpdateTimeout=X.setTimeout(()=>{this.trigger("mediaupdatetimeout"),n()},XC(this.media(),!!r)))};n()}this.trigger("loadedplaylist")}addEventStreamToMetadataTrack_(e){if(e&&this.mainPlaylistLoader_.main.eventStream){const t=this.mainPlaylistLoader_.main.eventStream.map(r=>({cueTime:r.start,frames:[{data:r.messageData}]}));this.addMetadataToTextTrack("EventStream",t,this.mainPlaylistLoader_.main.duration)}}getKeyIdSet(e){if(e.contentProtection){const t=new Set;for(const r in e.contentProtection){const n=e.contentProtection[r].attributes["cenc:default_KID"];n&&t.add(n.replace(/-/g,"").toLowerCase())}return t}}};var Wn={GOAL_BUFFER_LENGTH:30,MAX_GOAL_BUFFER_LENGTH:60,BACK_BUFFER_LENGTH:30,GOAL_BUFFER_LENGTH_RATE:1,INITIAL_BANDWIDTH:4194304,BANDWIDTH_VARIANCE:1.2,BUFFER_LOW_WATER_LINE:0,MAX_BUFFER_LOW_WATER_LINE:30,EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE:16,BUFFER_LOW_WATER_LINE_RATE:1,BUFFER_HIGH_WATER_LINE:30};const Ple=i=>{const e=new Uint8Array(new ArrayBuffer(i.length));for(let t=0;t<i.length;t++)e[t]=i.charCodeAt(t);return e.buffer},H5=function(i){return i.on=i.addEventListener,i.off=i.removeEventListener,i},Rle=function(i){try{return URL.createObjectURL(new Blob([i],{type:"application/javascript"}))}catch{const t=new BlobBuilder;return t.append(i),URL.createObjectURL(t.getBlob())}},V5=function(i){return function(){const e=Rle(i),t=H5(new Worker(e));t.objURL=e;const r=t.terminate;return t.on=t.addEventListener,t.off=t.removeEventListener,t.terminate=function(){return URL.revokeObjectURL(e),r.call(this)},t}},q5=function(i){return`var browserWorkerPolyFill = ${H5.toString()};
browserWorkerPolyFill(self);
`+i},W5=function(i){return i.toString().replace(/^function.+?{/,"").slice(0,-1)},Lle=q5(W5(function(){var i=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},e=function(){this.init=function(){var f={};this.on=function(v,b){f[v]||(f[v]=[]),f[v]=f[v].concat(b)},this.off=function(v,b){var x;return f[v]?(x=f[v].indexOf(b),f[v]=f[v].slice(),f[v].splice(x,1),x>-1):!1},this.trigger=function(v){var b,x,C,I;if(b=f[v],!!b)if(arguments.length===2)for(C=b.length,x=0;x<C;++x)b[x].call(this,arguments[1]);else{for(I=[],x=arguments.length,x=1;x<arguments.length;++x)I.push(arguments[x]);for(C=b.length,x=0;x<C;++x)b[x].apply(this,I)}},this.dispose=function(){f={}}}};e.prototype.pipe=function(f){return this.on("data",function(v){f.push(v)}),this.on("done",function(v){f.flush(v)}),this.on("partialdone",function(v){f.partialFlush(v)}),this.on("endedtimeline",function(v){f.endTimeline(v)}),this.on("reset",function(v){f.reset(v)}),f},e.prototype.push=function(f){this.trigger("data",f)},e.prototype.flush=function(f){this.trigger("done",f)},e.prototype.partialFlush=function(f){this.trigger("partialdone",f)},e.prototype.endTimeline=function(f){this.trigger("endedtimeline",f)},e.prototype.reset=function(f){this.trigger("reset",f)};var t=e,r=Math.pow(2,32),n=function(f){var v=new DataView(f.buffer,f.byteOffset,f.byteLength),b;return v.getBigUint64?(b=v.getBigUint64(0),b<Number.MAX_SAFE_INTEGER?Number(b):b):v.getUint32(0)*r+v.getUint32(4)},s={getUint64:n,MAX_UINT32:r},a=s.MAX_UINT32,o,l,u,c,h,m,g,y,_,T,E,w,D,R,A,L,F,B,M,k,q,G,H,re,se,de,me,ue,oe,ce,te,fe,ye,Se,ke,qe;(function(){var f;if(H={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],mvex:[],mvhd:[],pasp:[],sdtp:[],smhd:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],styp:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[]},!(typeof Uint8Array>"u")){for(f in H)H.hasOwnProperty(f)&&(H[f]=[f.charCodeAt(0),f.charCodeAt(1),f.charCodeAt(2),f.charCodeAt(3)]);re=new Uint8Array([105,115,111,109]),de=new Uint8Array([97,118,99,49]),se=new Uint8Array([0,0,0,1]),me=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),ue=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]),oe={video:me,audio:ue},fe=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),te=new Uint8Array([0,0,0,0,0,0,0,0]),ye=new Uint8Array([0,0,0,0,0,0,0,0]),Se=ye,ke=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),qe=ye,ce=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0])}})(),o=function(f){var v=[],b=0,x,C,I;for(x=1;x<arguments.length;x++)v.push(arguments[x]);for(x=v.length;x--;)b+=v[x].byteLength;for(C=new Uint8Array(b+8),I=new DataView(C.buffer,C.byteOffset,C.byteLength),I.setUint32(0,C.byteLength),C.set(f,4),x=0,b=8;x<v.length;x++)C.set(v[x],b),b+=v[x].byteLength;return C},l=function(){return o(H.dinf,o(H.dref,fe))},u=function(f){return o(H.esds,new Uint8Array([0,0,0,0,3,25,0,0,0,4,17,64,21,0,6,0,0,0,218,192,0,0,218,192,5,2,f.audioobjecttype<<3|f.samplingfrequencyindex>>>1,f.samplingfrequencyindex<<7|f.channelcount<<3,6,1,2]))},c=function(){return o(H.ftyp,re,se,re,de)},L=function(f){return o(H.hdlr,oe[f])},h=function(f){return o(H.mdat,f)},A=function(f){var v=new Uint8Array([0,0,0,0,0,0,0,2,0,0,0,3,0,1,95,144,f.duration>>>24&255,f.duration>>>16&255,f.duration>>>8&255,f.duration&255,85,196,0,0]);return f.samplerate&&(v[12]=f.samplerate>>>24&255,v[13]=f.samplerate>>>16&255,v[14]=f.samplerate>>>8&255,v[15]=f.samplerate&255),o(H.mdhd,v)},R=function(f){return o(H.mdia,A(f),L(f.type),g(f))},m=function(f){return o(H.mfhd,new Uint8Array([0,0,0,0,(f&4278190080)>>24,(f&16711680)>>16,(f&65280)>>8,f&255]))},g=function(f){return o(H.minf,f.type==="video"?o(H.vmhd,ce):o(H.smhd,te),l(),B(f))},y=function(f,v){for(var b=[],x=v.length;x--;)b[x]=k(v[x]);return o.apply(null,[H.moof,m(f)].concat(b))},_=function(f){for(var v=f.length,b=[];v--;)b[v]=w(f[v]);return o.apply(null,[H.moov,E(4294967295)].concat(b).concat(T(f)))},T=function(f){for(var v=f.length,b=[];v--;)b[v]=q(f[v]);return o.apply(null,[H.mvex].concat(b))},E=function(f){var v=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,2,0,1,95,144,(f&4278190080)>>24,(f&16711680)>>16,(f&65280)>>8,f&255,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return o(H.mvhd,v)},F=function(f){var v=f.samples||[],b=new Uint8Array(4+v.length),x,C;for(C=0;C<v.length;C++)x=v[C].flags,b[C+4]=x.dependsOn<<4|x.isDependedOn<<2|x.hasRedundancy;return o(H.sdtp,b)},B=function(f){return o(H.stbl,M(f),o(H.stts,qe),o(H.stsc,Se),o(H.stsz,ke),o(H.stco,ye))},(function(){var f,v;M=function(b){return o(H.stsd,new Uint8Array([0,0,0,0,0,0,0,1]),b.type==="video"?f(b):v(b))},f=function(b){var x=b.sps||[],C=b.pps||[],I=[],W=[],Y,Q;for(Y=0;Y<x.length;Y++)I.push((x[Y].byteLength&65280)>>>8),I.push(x[Y].byteLength&255),I=I.concat(Array.prototype.slice.call(x[Y]));for(Y=0;Y<C.length;Y++)W.push((C[Y].byteLength&65280)>>>8),W.push(C[Y].byteLength&255),W=W.concat(Array.prototype.slice.call(C[Y]));if(Q=[H.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,(b.width&65280)>>8,b.width&255,(b.height&65280)>>8,b.height&255,0,72,0,0,0,72,0,0,0,0,0,0,0,1,19,118,105,100,101,111,106,115,45,99,111,110,116,114,105,98,45,104,108,115,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),o(H.avcC,new Uint8Array([1,b.profileIdc,b.profileCompatibility,b.levelIdc,255].concat([x.length],I,[C.length],W))),o(H.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192]))],b.sarRatio){var ee=b.sarRatio[0],le=b.sarRatio[1];Q.push(o(H.pasp,new Uint8Array([(ee&4278190080)>>24,(ee&16711680)>>16,(ee&65280)>>8,ee&255,(le&4278190080)>>24,(le&16711680)>>16,(le&65280)>>8,le&255])))}return o.apply(null,Q)},v=function(b){return o(H.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,(b.channelcount&65280)>>8,b.channelcount&255,(b.samplesize&65280)>>8,b.samplesize&255,0,0,0,0,(b.samplerate&65280)>>8,b.samplerate&255,0,0]),u(b))}})(),D=function(f){var v=new Uint8Array([0,0,0,7,0,0,0,0,0,0,0,0,(f.id&4278190080)>>24,(f.id&16711680)>>16,(f.id&65280)>>8,f.id&255,0,0,0,0,(f.duration&4278190080)>>24,(f.duration&16711680)>>16,(f.duration&65280)>>8,f.duration&255,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,(f.width&65280)>>8,f.width&255,0,0,(f.height&65280)>>8,f.height&255,0,0]);return o(H.tkhd,v)},k=function(f){var v,b,x,C,I,W,Y;return v=o(H.tfhd,new Uint8Array([0,0,0,58,(f.id&4278190080)>>24,(f.id&16711680)>>16,(f.id&65280)>>8,f.id&255,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0])),W=Math.floor(f.baseMediaDecodeTime/a),Y=Math.floor(f.baseMediaDecodeTime%a),b=o(H.tfdt,new Uint8Array([1,0,0,0,W>>>24&255,W>>>16&255,W>>>8&255,W&255,Y>>>24&255,Y>>>16&255,Y>>>8&255,Y&255])),I=92,f.type==="audio"?(x=G(f,I),o(H.traf,v,b,x)):(C=F(f),x=G(f,C.length+I),o(H.traf,v,b,x,C))},w=function(f){return f.duration=f.duration||4294967295,o(H.trak,D(f),R(f))},q=function(f){var v=new Uint8Array([0,0,0,0,(f.id&4278190080)>>24,(f.id&16711680)>>16,(f.id&65280)>>8,f.id&255,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]);return f.type!=="video"&&(v[v.length-1]=0),o(H.trex,v)},(function(){var f,v,b;b=function(x,C){var I=0,W=0,Y=0,Q=0;return x.length&&(x[0].duration!==void 0&&(I=1),x[0].size!==void 0&&(W=2),x[0].flags!==void 0&&(Y=4),x[0].compositionTimeOffset!==void 0&&(Q=8)),[0,0,I|W|Y|Q,1,(x.length&4278190080)>>>24,(x.length&16711680)>>>16,(x.length&65280)>>>8,x.length&255,(C&4278190080)>>>24,(C&16711680)>>>16,(C&65280)>>>8,C&255]},v=function(x,C){var I,W,Y,Q,ee,le;for(Q=x.samples||[],C+=20+16*Q.length,Y=b(Q,C),W=new Uint8Array(Y.length+Q.length*16),W.set(Y),I=Y.length,le=0;le<Q.length;le++)ee=Q[le],W[I++]=(ee.duration&4278190080)>>>24,W[I++]=(ee.duration&16711680)>>>16,W[I++]=(ee.duration&65280)>>>8,W[I++]=ee.duration&255,W[I++]=(ee.size&4278190080)>>>24,W[I++]=(ee.size&16711680)>>>16,W[I++]=(ee.size&65280)>>>8,W[I++]=ee.size&255,W[I++]=ee.flags.isLeading<<2|ee.flags.dependsOn,W[I++]=ee.flags.isDependedOn<<6|ee.flags.hasRedundancy<<4|ee.flags.paddingValue<<1|ee.flags.isNonSyncSample,W[I++]=ee.flags.degradationPriority&61440,W[I++]=ee.flags.degradationPriority&15,W[I++]=(ee.compositionTimeOffset&4278190080)>>>24,W[I++]=(ee.compositionTimeOffset&16711680)>>>16,W[I++]=(ee.compositionTimeOffset&65280)>>>8,W[I++]=ee.compositionTimeOffset&255;return o(H.trun,W)},f=function(x,C){var I,W,Y,Q,ee,le;for(Q=x.samples||[],C+=20+8*Q.length,Y=b(Q,C),I=new Uint8Array(Y.length+Q.length*8),I.set(Y),W=Y.length,le=0;le<Q.length;le++)ee=Q[le],I[W++]=(ee.duration&4278190080)>>>24,I[W++]=(ee.duration&16711680)>>>16,I[W++]=(ee.duration&65280)>>>8,I[W++]=ee.duration&255,I[W++]=(ee.size&4278190080)>>>24,I[W++]=(ee.size&16711680)>>>16,I[W++]=(ee.size&65280)>>>8,I[W++]=ee.size&255;return o(H.trun,I)},G=function(x,C){return x.type==="audio"?f(x,C):v(x,C)}})();var vt={ftyp:c,mdat:h,moof:y,moov:_,initSegment:function(f){var v=c(),b=_(f),x;return x=new Uint8Array(v.byteLength+b.byteLength),x.set(v),x.set(b,v.byteLength),x}},et=function(f){var v,b,x=[],C=[];for(C.byteLength=0,C.nalCount=0,C.duration=0,x.byteLength=0,v=0;v<f.length;v++)b=f[v],b.nalUnitType==="access_unit_delimiter_rbsp"?(x.length&&(x.duration=b.dts-x.dts,C.byteLength+=x.byteLength,C.nalCount+=x.length,C.duration+=x.duration,C.push(x)),x=[b],x.byteLength=b.data.byteLength,x.pts=b.pts,x.dts=b.dts):(b.nalUnitType==="slice_layer_without_partitioning_rbsp_idr"&&(x.keyFrame=!0),x.duration=b.dts-x.dts,x.byteLength+=b.data.byteLength,x.push(b));return C.length&&(!x.duration||x.duration<=0)&&(x.duration=C[C.length-1].duration),C.byteLength+=x.byteLength,C.nalCount+=x.length,C.duration+=x.duration,C.push(x),C},kt=function(f){var v,b,x=[],C=[];for(x.byteLength=0,x.nalCount=0,x.duration=0,x.pts=f[0].pts,x.dts=f[0].dts,C.byteLength=0,C.nalCount=0,C.duration=0,C.pts=f[0].pts,C.dts=f[0].dts,v=0;v<f.length;v++)b=f[v],b.keyFrame?(x.length&&(C.push(x),C.byteLength+=x.byteLength,C.nalCount+=x.nalCount,C.duration+=x.duration),x=[b],x.nalCount=b.length,x.byteLength=b.byteLength,x.pts=b.pts,x.dts=b.dts,x.duration=b.duration):(x.duration+=b.duration,x.nalCount+=b.length,x.byteLength+=b.byteLength,x.push(b));return C.length&&x.duration<=0&&(x.duration=C[C.length-1].duration),C.byteLength+=x.byteLength,C.nalCount+=x.nalCount,C.duration+=x.duration,C.push(x),C},pt=function(f){var v;return!f[0][0].keyFrame&&f.length>1&&(v=f.shift(),f.byteLength-=v.byteLength,f.nalCount-=v.nalCount,f[0][0].dts=v.dts,f[0][0].pts=v.pts,f[0][0].duration+=v.duration),f},Ut=function(){return{size:0,flags:{isLeading:0,dependsOn:1,isDependedOn:0,hasRedundancy:0,degradationPriority:0,isNonSyncSample:1}}},Vt=function(f,v){var b=Ut();return b.dataOffset=v,b.compositionTimeOffset=f.pts-f.dts,b.duration=f.duration,b.size=4*f.length,b.size+=f.byteLength,f.keyFrame&&(b.flags.dependsOn=2,b.flags.isNonSyncSample=0),b},Xe=function(f,v){var b,x,C,I,W,Y=v||0,Q=[];for(b=0;b<f.length;b++)for(I=f[b],x=0;x<I.length;x++)W=I[x],C=Vt(W,Y),Y+=C.size,Q.push(C);return Q},Ue=function(f){var v,b,x,C,I,W,Y=0,Q=f.byteLength,ee=f.nalCount,le=Q+4*ee,ge=new Uint8Array(le),He=new DataView(ge.buffer);for(v=0;v<f.length;v++)for(C=f[v],b=0;b<C.length;b++)for(I=C[b],x=0;x<I.length;x++)W=I[x],He.setUint32(Y,W.data.byteLength),Y+=4,ge.set(W.data,Y),Y+=W.data.byteLength;return ge},Le=function(f,v){var b,x=v||0,C=[];return b=Vt(f,x),C.push(b),C},Ne=function(f){var v,b,x=0,C=f.byteLength,I=f.length,W=C+4*I,Y=new Uint8Array(W),Q=new DataView(Y.buffer);for(v=0;v<f.length;v++)b=f[v],Q.setUint32(x,b.data.byteLength),x+=4,Y.set(b.data,x),x+=b.data.byteLength;return Y},rt={groupNalsIntoFrames:et,groupFramesIntoGops:kt,extendFirstKeyFrame:pt,generateSampleTable:Xe,concatenateNalData:Ue,generateSampleTableForFrame:Le,concatenateNalDataForFrame:Ne},lt=[33,16,5,32,164,27],dt=[33,65,108,84,1,2,4,8,168,2,4,8,17,191,252],ut=function(f){for(var v=[];f--;)v.push(0);return v},At=function(f){return Object.keys(f).reduce(function(v,b){return v[b]=new Uint8Array(f[b].reduce(function(x,C){return x.concat(C)},[])),v},{})},it,Sr=function(){if(!it){var f={96e3:[lt,[227,64],ut(154),[56]],88200:[lt,[231],ut(170),[56]],64e3:[lt,[248,192],ut(240),[56]],48e3:[lt,[255,192],ut(268),[55,148,128],ut(54),[112]],44100:[lt,[255,192],ut(268),[55,163,128],ut(84),[112]],32e3:[lt,[255,192],ut(268),[55,234],ut(226),[112]],24e3:[lt,[255,192],ut(268),[55,255,128],ut(268),[111,112],ut(126),[224]],16e3:[lt,[255,192],ut(268),[55,255,128],ut(268),[111,255],ut(269),[223,108],ut(195),[1,192]],12e3:[dt,ut(268),[3,127,248],ut(268),[6,255,240],ut(268),[13,255,224],ut(268),[27,253,128],ut(259),[56]],11025:[dt,ut(268),[3,127,248],ut(268),[6,255,240],ut(268),[13,255,224],ut(268),[27,255,192],ut(268),[55,175,128],ut(108),[112]],8e3:[dt,ut(268),[3,121,16],ut(47),[7]]};it=At(f)}return it},xr=9e4,zr,cr,Gt,Er,Ir,Hr,It;zr=function(f){return f*xr},cr=function(f,v){return f*v},Gt=function(f){return f/xr},Er=function(f,v){return f/v},Ir=function(f,v){return zr(Er(f,v))},Hr=function(f,v){return cr(Gt(f),v)},It=function(f,v,b){return Gt(b?f:f-v)};var $t={ONE_SECOND_IN_TS:xr,secondsToVideoTs:zr,secondsToAudioTs:cr,videoTsToSeconds:Gt,audioTsToSeconds:Er,audioTsToVideoTs:Ir,videoTsToAudioTs:Hr,metadataTsToSeconds:It},Bi=Sr,zt=$t,Dr=function(f){var v,b,x=0;for(v=0;v<f.length;v++)b=f[v],x+=b.data.byteLength;return x},$r=function(f,v,b,x){var C,I=0,W=0,Y=0,Q=0,ee,le,ge;if(v.length&&(C=zt.audioTsToVideoTs(f.baseMediaDecodeTime,f.samplerate),I=Math.ceil(zt.ONE_SECOND_IN_TS/(f.samplerate/1024)),b&&x&&(W=C-Math.max(b,x),Y=Math.floor(W/I),Q=Y*I),!(Y<1||Q>zt.ONE_SECOND_IN_TS/2))){for(ee=Bi()[f.samplerate],ee||(ee=v[0].data),le=0;le<Y;le++)ge=v[0],v.splice(0,0,{data:ee,dts:ge.dts-I,pts:ge.pts-I});return f.baseMediaDecodeTime-=Math.floor(zt.videoTsToAudioTs(Q,f.samplerate)),Q}},Jr=function(f,v,b){return v.minSegmentDts>=b?f:(v.minSegmentDts=1/0,f.filter(function(x){return x.dts>=b?(v.minSegmentDts=Math.min(v.minSegmentDts,x.dts),v.minSegmentPts=v.minSegmentDts,!0):!1}))},Ni=function(f){var v,b,x=[];for(v=0;v<f.length;v++)b=f[v],x.push({size:b.data.byteLength,duration:1024});return x},sn=function(f){var v,b,x=0,C=new Uint8Array(Dr(f));for(v=0;v<f.length;v++)b=f[v],C.set(b.data,x),x+=b.data.byteLength;return C},Ui={prefixWithSilence:$r,trimAdtsFramesByEarliestDts:Jr,generateSampleTable:Ni,concatenateFrameData:sn},Wi=$t.ONE_SECOND_IN_TS,ne=function(f,v){typeof v.pts=="number"&&(f.timelineStartInfo.pts===void 0&&(f.timelineStartInfo.pts=v.pts),f.minSegmentPts===void 0?f.minSegmentPts=v.pts:f.minSegmentPts=Math.min(f.minSegmentPts,v.pts),f.maxSegmentPts===void 0?f.maxSegmentPts=v.pts:f.maxSegmentPts=Math.max(f.maxSegmentPts,v.pts)),typeof v.dts=="number"&&(f.timelineStartInfo.dts===void 0&&(f.timelineStartInfo.dts=v.dts),f.minSegmentDts===void 0?f.minSegmentDts=v.dts:f.minSegmentDts=Math.min(f.minSegmentDts,v.dts),f.maxSegmentDts===void 0?f.maxSegmentDts=v.dts:f.maxSegmentDts=Math.max(f.maxSegmentDts,v.dts))},he=function(f){delete f.minSegmentDts,delete f.maxSegmentDts,delete f.minSegmentPts,delete f.maxSegmentPts},Ce=function(f,v){var b,x,C=f.minSegmentDts;return v||(C-=f.timelineStartInfo.dts),b=f.timelineStartInfo.baseMediaDecodeTime,b+=C,b=Math.max(0,b),f.type==="audio"&&(x=f.samplerate/Wi,b*=x,b=Math.floor(b)),b},ze={clearDtsInfo:he,calculateTrackBaseMediaDecodeTime:Ce,collectDtsInfo:ne},yt=4,ir=128,xe=function(f){for(var v=0,b={payloadType:-1,payloadSize:0},x=0,C=0;v<f.byteLength&&f[v]!==ir;){for(;f[v]===255;)x+=255,v++;for(x+=f[v++];f[v]===255;)C+=255,v++;if(C+=f[v++],!b.payload&&x===yt){var I=String.fromCharCode(f[v+3],f[v+4],f[v+5],f[v+6]);if(I==="GA94"){b.payloadType=x,b.payloadSize=C,b.payload=f.subarray(v,v+C);break}else b.payload=void 0}v+=C,x=0,C=0}return b},Pe=function(f){return f.payload[0]!==181||(f.payload[1]<<8|f.payload[2])!==49||String.fromCharCode(f.payload[3],f.payload[4],f.payload[5],f.payload[6])!=="GA94"||f.payload[7]!==3?null:f.payload.subarray(8,f.payload.length-1)},Be=function(f,v){var b=[],x,C,I,W;if(!(v[0]&64))return b;for(C=v[0]&31,x=0;x<C;x++)I=x*3,W={type:v[I+2]&3,pts:f},v[I+2]&4&&(W.ccData=v[I+3]<<8|v[I+4],b.push(W));return b},nt=function(f){for(var v=f.byteLength,b=[],x=1,C,I;x<v-2;)f[x]===0&&f[x+1]===0&&f[x+2]===3?(b.push(x+2),x+=2):x++;if(b.length===0)return f;C=v-b.length,I=new Uint8Array(C);var W=0;for(x=0;x<C;W++,x++)W===b[0]&&(W++,b.shift()),I[x]=f[W];return I},ct={parseSei:xe,parseUserData:Pe,parseCaptionPackets:Be,discardEmulationPreventionBytes:nt,USER_DATA_REGISTERED_ITU_T_T35:yt},Rt=t,Ot=ct,st=function(f){f=f||{},st.prototype.init.call(this),this.parse708captions_=typeof f.parse708captions=="boolean"?f.parse708captions:!0,this.captionPackets_=[],this.ccStreams_=[new Qt(0,0),new Qt(0,1),new Qt(1,0),new Qt(1,1)],this.parse708captions_&&(this.cc708Stream_=new mt({captionServices:f.captionServices})),this.reset(),this.ccStreams_.forEach(function(v){v.on("data",this.trigger.bind(this,"data")),v.on("partialdone",this.trigger.bind(this,"partialdone")),v.on("done",this.trigger.bind(this,"done"))},this),this.parse708captions_&&(this.cc708Stream_.on("data",this.trigger.bind(this,"data")),this.cc708Stream_.on("partialdone",this.trigger.bind(this,"partialdone")),this.cc708Stream_.on("done",this.trigger.bind(this,"done")))};st.prototype=new Rt,st.prototype.push=function(f){var v,b,x;if(f.nalUnitType==="sei_rbsp"&&(v=Ot.parseSei(f.escapedRBSP),!!v.payload&&v.payloadType===Ot.USER_DATA_REGISTERED_ITU_T_T35&&(b=Ot.parseUserData(v),!!b))){if(f.dts<this.latestDts_){this.ignoreNextEqualDts_=!0;return}else if(f.dts===this.latestDts_&&this.ignoreNextEqualDts_){this.numSameDts_--,this.numSameDts_||(this.ignoreNextEqualDts_=!1);return}x=Ot.parseCaptionPackets(f.pts,b),this.captionPackets_=this.captionPackets_.concat(x),this.latestDts_!==f.dts&&(this.numSameDts_=0),this.numSameDts_++,this.latestDts_=f.dts}},st.prototype.flushCCStreams=function(f){this.ccStreams_.forEach(function(v){return f==="flush"?v.flush():v.partialFlush()},this)},st.prototype.flushStream=function(f){if(!this.captionPackets_.length){this.flushCCStreams(f);return}this.captionPackets_.forEach(function(v,b){v.presortIndex=b}),this.captionPackets_.sort(function(v,b){return v.pts===b.pts?v.presortIndex-b.presortIndex:v.pts-b.pts}),this.captionPackets_.forEach(function(v){v.type<2?this.dispatchCea608Packet(v):this.dispatchCea708Packet(v)},this),this.captionPackets_.length=0,this.flushCCStreams(f)},st.prototype.flush=function(){return this.flushStream("flush")},st.prototype.partialFlush=function(){return this.flushStream("partialFlush")},st.prototype.reset=function(){this.latestDts_=null,this.ignoreNextEqualDts_=!1,this.numSameDts_=0,this.activeCea608Channel_=[null,null],this.ccStreams_.forEach(function(f){f.reset()})},st.prototype.dispatchCea608Packet=function(f){this.setsTextOrXDSActive(f)?this.activeCea608Channel_[f.type]=null:this.setsChannel1Active(f)?this.activeCea608Channel_[f.type]=0:this.setsChannel2Active(f)&&(this.activeCea608Channel_[f.type]=1),this.activeCea608Channel_[f.type]!==null&&this.ccStreams_[(f.type<<1)+this.activeCea608Channel_[f.type]].push(f)},st.prototype.setsChannel1Active=function(f){return(f.ccData&30720)===4096},st.prototype.setsChannel2Active=function(f){return(f.ccData&30720)===6144},st.prototype.setsTextOrXDSActive=function(f){return(f.ccData&28928)===256||(f.ccData&30974)===4138||(f.ccData&30974)===6186},st.prototype.dispatchCea708Packet=function(f){this.parse708captions_&&this.cc708Stream_.push(f)};var _t={127:9834,4128:32,4129:160,4133:8230,4138:352,4140:338,4144:9608,4145:8216,4146:8217,4147:8220,4148:8221,4149:8226,4153:8482,4154:353,4156:339,4157:8480,4159:376,4214:8539,4215:8540,4216:8541,4217:8542,4218:9168,4219:9124,4220:9123,4221:9135,4222:9126,4223:9121,4256:12600},jt=function(f){var v=_t[f]||f;return f&4096&&f===v?"":String.fromCharCode(v)},Kt=function(f){return 32<=f&&f<=127||160<=f&&f<=255},Pt=function(f){this.windowNum=f,this.reset()};Pt.prototype.reset=function(){this.clearText(),this.pendingNewLine=!1,this.winAttr={},this.penAttr={},this.penLoc={},this.penColor={},this.visible=0,this.rowLock=0,this.columnLock=0,this.priority=0,this.relativePositioning=0,this.anchorVertical=0,this.anchorHorizontal=0,this.anchorPoint=0,this.rowCount=1,this.virtualRowCount=this.rowCount+1,this.columnCount=41,this.windowStyle=0,this.penStyle=0},Pt.prototype.getText=function(){return this.rows.join(`
`)},Pt.prototype.clearText=function(){this.rows=[""],this.rowIdx=0},Pt.prototype.newLine=function(f){for(this.rows.length>=this.virtualRowCount&&typeof this.beforeRowOverflow=="function"&&this.beforeRowOverflow(f),this.rows.length>0&&(this.rows.push(""),this.rowIdx++);this.rows.length>this.virtualRowCount;)this.rows.shift(),this.rowIdx--},Pt.prototype.isEmpty=function(){return this.rows.length===0?!0:this.rows.length===1?this.rows[0]==="":!1},Pt.prototype.addText=function(f){this.rows[this.rowIdx]+=f},Pt.prototype.backspace=function(){if(!this.isEmpty()){var f=this.rows[this.rowIdx];this.rows[this.rowIdx]=f.substr(0,f.length-1)}};var sr=function(f,v,b){this.serviceNum=f,this.text="",this.currentWindow=new Pt(-1),this.windows=[],this.stream=b,typeof v=="string"&&this.createTextDecoder(v)};sr.prototype.init=function(f,v){this.startPts=f;for(var b=0;b<8;b++)this.windows[b]=new Pt(b),typeof v=="function"&&(this.windows[b].beforeRowOverflow=v)},sr.prototype.setCurrentWindow=function(f){this.currentWindow=this.windows[f]},sr.prototype.createTextDecoder=function(f){if(typeof TextDecoder>"u")this.stream.trigger("log",{level:"warn",message:"The `encoding` option is unsupported without TextDecoder support"});else try{this.textDecoder_=new TextDecoder(f)}catch(v){this.stream.trigger("log",{level:"warn",message:"TextDecoder could not be created with "+f+" encoding. "+v})}};var mt=function(f){f=f||{},mt.prototype.init.call(this);var v=this,b=f.captionServices||{},x={},C;Object.keys(b).forEach(I=>{C=b[I],/^SERVICE/.test(I)&&(x[I]=C.encoding)}),this.serviceEncodings=x,this.current708Packet=null,this.services={},this.push=function(I){I.type===3?(v.new708Packet(),v.add708Bytes(I)):(v.current708Packet===null&&v.new708Packet(),v.add708Bytes(I))}};mt.prototype=new Rt,mt.prototype.new708Packet=function(){this.current708Packet!==null&&this.push708Packet(),this.current708Packet={data:[],ptsVals:[]}},mt.prototype.add708Bytes=function(f){var v=f.ccData,b=v>>>8,x=v&255;this.current708Packet.ptsVals.push(f.pts),this.current708Packet.data.push(b),this.current708Packet.data.push(x)},mt.prototype.push708Packet=function(){var f=this.current708Packet,v=f.data,b=null,x=null,C=0,I=v[C++];for(f.seq=I>>6,f.sizeCode=I&63;C<v.length;C++)I=v[C++],b=I>>5,x=I&31,b===7&&x>0&&(I=v[C++],b=I),this.pushServiceBlock(b,C,x),x>0&&(C+=x-1)},mt.prototype.pushServiceBlock=function(f,v,b){var x,C=v,I=this.current708Packet.data,W=this.services[f];for(W||(W=this.initService(f,C));C<v+b&&C<I.length;C++)x=I[C],Kt(x)?C=this.handleText(C,W):x===24?C=this.multiByteCharacter(C,W):x===16?C=this.extendedCommands(C,W):128<=x&&x<=135?C=this.setCurrentWindow(C,W):152<=x&&x<=159?C=this.defineWindow(C,W):x===136?C=this.clearWindows(C,W):x===140?C=this.deleteWindows(C,W):x===137?C=this.displayWindows(C,W):x===138?C=this.hideWindows(C,W):x===139?C=this.toggleWindows(C,W):x===151?C=this.setWindowAttributes(C,W):x===144?C=this.setPenAttributes(C,W):x===145?C=this.setPenColor(C,W):x===146?C=this.setPenLocation(C,W):x===143?W=this.reset(C,W):x===8?W.currentWindow.backspace():x===12?W.currentWindow.clearText():x===13?W.currentWindow.pendingNewLine=!0:x===14?W.currentWindow.clearText():x===141&&C++},mt.prototype.extendedCommands=function(f,v){var b=this.current708Packet.data,x=b[++f];return Kt(x)&&(f=this.handleText(f,v,{isExtended:!0})),f},mt.prototype.getPts=function(f){return this.current708Packet.ptsVals[Math.floor(f/2)]},mt.prototype.initService=function(f,v){var x="SERVICE"+f,b=this,x,C;return x in this.serviceEncodings&&(C=this.serviceEncodings[x]),this.services[f]=new sr(f,C,b),this.services[f].init(this.getPts(v),function(I){b.flushDisplayed(I,b.services[f])}),this.services[f]},mt.prototype.handleText=function(f,v,b){var x=b&&b.isExtended,C=b&&b.isMultiByte,I=this.current708Packet.data,W=x?4096:0,Y=I[f],Q=I[f+1],ee=v.currentWindow,le,ge;function He(Ee){return Ee.map(gt=>("0"+(gt&255).toString(16)).slice(-2)).join("")}if(C?(ge=[Y,Q],f++):ge=[Y],v.textDecoder_&&!x)le=v.textDecoder_.decode(new Uint8Array(ge));else if(C){const Ee=He(ge);le=String.fromCharCode(parseInt(Ee,16))}else le=jt(W|Y);return ee.pendingNewLine&&!ee.isEmpty()&&ee.newLine(this.getPts(f)),ee.pendingNewLine=!1,ee.addText(le),f},mt.prototype.multiByteCharacter=function(f,v){var b=this.current708Packet.data,x=b[f+1],C=b[f+2];return Kt(x)&&Kt(C)&&(f=this.handleText(++f,v,{isMultiByte:!0})),f},mt.prototype.setCurrentWindow=function(f,v){var b=this.current708Packet.data,x=b[f],C=x&7;return v.setCurrentWindow(C),f},mt.prototype.defineWindow=function(f,v){var b=this.current708Packet.data,x=b[f],C=x&7;v.setCurrentWindow(C);var I=v.currentWindow;return x=b[++f],I.visible=(x&32)>>5,I.rowLock=(x&16)>>4,I.columnLock=(x&8)>>3,I.priority=x&7,x=b[++f],I.relativePositioning=(x&128)>>7,I.anchorVertical=x&127,x=b[++f],I.anchorHorizontal=x,x=b[++f],I.anchorPoint=(x&240)>>4,I.rowCount=x&15,x=b[++f],I.columnCount=x&63,x=b[++f],I.windowStyle=(x&56)>>3,I.penStyle=x&7,I.virtualRowCount=I.rowCount+1,f},mt.prototype.setWindowAttributes=function(f,v){var b=this.current708Packet.data,x=b[f],C=v.currentWindow.winAttr;return x=b[++f],C.fillOpacity=(x&192)>>6,C.fillRed=(x&48)>>4,C.fillGreen=(x&12)>>2,C.fillBlue=x&3,x=b[++f],C.borderType=(x&192)>>6,C.borderRed=(x&48)>>4,C.borderGreen=(x&12)>>2,C.borderBlue=x&3,x=b[++f],C.borderType+=(x&128)>>5,C.wordWrap=(x&64)>>6,C.printDirection=(x&48)>>4,C.scrollDirection=(x&12)>>2,C.justify=x&3,x=b[++f],C.effectSpeed=(x&240)>>4,C.effectDirection=(x&12)>>2,C.displayEffect=x&3,f},mt.prototype.flushDisplayed=function(f,v){for(var b=[],x=0;x<8;x++)v.windows[x].visible&&!v.windows[x].isEmpty()&&b.push(v.windows[x].getText());v.endPts=f,v.text=b.join(`

`),this.pushCaption(v),v.startPts=f},mt.prototype.pushCaption=function(f){f.text!==""&&(this.trigger("data",{startPts:f.startPts,endPts:f.endPts,text:f.text,stream:"cc708_"+f.serviceNum}),f.text="",f.startPts=f.endPts)},mt.prototype.displayWindows=function(f,v){var b=this.current708Packet.data,x=b[++f],C=this.getPts(f);this.flushDisplayed(C,v);for(var I=0;I<8;I++)x&1<<I&&(v.windows[I].visible=1);return f},mt.prototype.hideWindows=function(f,v){var b=this.current708Packet.data,x=b[++f],C=this.getPts(f);this.flushDisplayed(C,v);for(var I=0;I<8;I++)x&1<<I&&(v.windows[I].visible=0);return f},mt.prototype.toggleWindows=function(f,v){var b=this.current708Packet.data,x=b[++f],C=this.getPts(f);this.flushDisplayed(C,v);for(var I=0;I<8;I++)x&1<<I&&(v.windows[I].visible^=1);return f},mt.prototype.clearWindows=function(f,v){var b=this.current708Packet.data,x=b[++f],C=this.getPts(f);this.flushDisplayed(C,v);for(var I=0;I<8;I++)x&1<<I&&v.windows[I].clearText();return f},mt.prototype.deleteWindows=function(f,v){var b=this.current708Packet.data,x=b[++f],C=this.getPts(f);this.flushDisplayed(C,v);for(var I=0;I<8;I++)x&1<<I&&v.windows[I].reset();return f},mt.prototype.setPenAttributes=function(f,v){var b=this.current708Packet.data,x=b[f],C=v.currentWindow.penAttr;return x=b[++f],C.textTag=(x&240)>>4,C.offset=(x&12)>>2,C.penSize=x&3,x=b[++f],C.italics=(x&128)>>7,C.underline=(x&64)>>6,C.edgeType=(x&56)>>3,C.fontStyle=x&7,f},mt.prototype.setPenColor=function(f,v){var b=this.current708Packet.data,x=b[f],C=v.currentWindow.penColor;return x=b[++f],C.fgOpacity=(x&192)>>6,C.fgRed=(x&48)>>4,C.fgGreen=(x&12)>>2,C.fgBlue=x&3,x=b[++f],C.bgOpacity=(x&192)>>6,C.bgRed=(x&48)>>4,C.bgGreen=(x&12)>>2,C.bgBlue=x&3,x=b[++f],C.edgeRed=(x&48)>>4,C.edgeGreen=(x&12)>>2,C.edgeBlue=x&3,f},mt.prototype.setPenLocation=function(f,v){var b=this.current708Packet.data,x=b[f],C=v.currentWindow.penLoc;return v.currentWindow.pendingNewLine=!0,x=b[++f],C.row=x&15,x=b[++f],C.column=x&63,f},mt.prototype.reset=function(f,v){var b=this.getPts(f);return this.flushDisplayed(b,v),this.initService(v.serviceNum,f)};var dr={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,304:174,305:176,306:189,307:191,308:8482,309:162,310:163,311:9834,312:224,313:160,314:232,315:226,316:234,317:238,318:244,319:251,544:193,545:201,546:211,547:218,548:220,549:252,550:8216,551:161,552:42,553:39,554:8212,555:169,556:8480,557:8226,558:8220,559:8221,560:192,561:194,562:199,563:200,564:202,565:203,566:235,567:206,568:207,569:239,570:212,571:217,572:249,573:219,574:171,575:187,800:195,801:227,802:205,803:204,804:236,805:210,806:242,807:213,808:245,809:123,810:125,811:92,812:94,813:95,814:124,815:126,816:196,817:228,818:214,819:246,820:223,821:165,822:164,823:9474,824:197,825:229,826:216,827:248,828:9484,829:9488,830:9492,831:9496},Vr=function(f){return f===null?"":(f=dr[f]||f,String.fromCharCode(f))},wr=14,Pr=[4352,4384,4608,4640,5376,5408,5632,5664,5888,5920,4096,4864,4896,5120,5152],Ti=function(){for(var f=[],v=wr+1;v--;)f.push({text:"",indent:0,offset:0});return f},Qt=function(f,v){Qt.prototype.init.call(this),this.field_=f||0,this.dataChannel_=v||0,this.name_="CC"+((this.field_<<1|this.dataChannel_)+1),this.setConstants(),this.reset(),this.push=function(b){var x,C,I,W,Y;if(x=b.ccData&32639,x===this.lastControlCode_){this.lastControlCode_=null;return}if((x&61440)===4096?this.lastControlCode_=x:x!==this.PADDING_&&(this.lastControlCode_=null),I=x>>>8,W=x&255,x!==this.PADDING_)if(x===this.RESUME_CAPTION_LOADING_)this.mode_="popOn";else if(x===this.END_OF_CAPTION_)this.mode_="popOn",this.clearFormatting(b.pts),this.flushDisplayed(b.pts),C=this.displayed_,this.displayed_=this.nonDisplayed_,this.nonDisplayed_=C,this.startPts_=b.pts;else if(x===this.ROLL_UP_2_ROWS_)this.rollUpRows_=2,this.setRollUp(b.pts);else if(x===this.ROLL_UP_3_ROWS_)this.rollUpRows_=3,this.setRollUp(b.pts);else if(x===this.ROLL_UP_4_ROWS_)this.rollUpRows_=4,this.setRollUp(b.pts);else if(x===this.CARRIAGE_RETURN_)this.clearFormatting(b.pts),this.flushDisplayed(b.pts),this.shiftRowsUp_(),this.startPts_=b.pts;else if(x===this.BACKSPACE_)this.mode_==="popOn"?this.nonDisplayed_[this.row_].text=this.nonDisplayed_[this.row_].text.slice(0,-1):this.displayed_[this.row_].text=this.displayed_[this.row_].text.slice(0,-1);else if(x===this.ERASE_DISPLAYED_MEMORY_)this.flushDisplayed(b.pts),this.displayed_=Ti();else if(x===this.ERASE_NON_DISPLAYED_MEMORY_)this.nonDisplayed_=Ti();else if(x===this.RESUME_DIRECT_CAPTIONING_)this.mode_!=="paintOn"&&(this.flushDisplayed(b.pts),this.displayed_=Ti()),this.mode_="paintOn",this.startPts_=b.pts;else if(this.isSpecialCharacter(I,W))I=(I&3)<<8,Y=Vr(I|W),this[this.mode_](b.pts,Y),this.column_++;else if(this.isExtCharacter(I,W))this.mode_==="popOn"?this.nonDisplayed_[this.row_].text=this.nonDisplayed_[this.row_].text.slice(0,-1):this.displayed_[this.row_].text=this.displayed_[this.row_].text.slice(0,-1),I=(I&3)<<8,Y=Vr(I|W),this[this.mode_](b.pts,Y),this.column_++;else if(this.isMidRowCode(I,W))this.clearFormatting(b.pts),this[this.mode_](b.pts," "),this.column_++,(W&14)===14&&this.addFormatting(b.pts,["i"]),(W&1)===1&&this.addFormatting(b.pts,["u"]);else if(this.isOffsetControlCode(I,W)){const ee=W&3;this.nonDisplayed_[this.row_].offset=ee,this.column_+=ee}else if(this.isPAC(I,W)){var Q=Pr.indexOf(x&7968);if(this.mode_==="rollUp"&&(Q-this.rollUpRows_+1<0&&(Q=this.rollUpRows_-1),this.setRollUp(b.pts,Q)),Q!==this.row_&&Q>=0&&Q<=14&&(this.clearFormatting(b.pts),this.row_=Q),W&1&&this.formatting_.indexOf("u")===-1&&this.addFormatting(b.pts,["u"]),(x&16)===16){const ee=(x&14)>>1;this.column_=ee*4,this.nonDisplayed_[this.row_].indent+=ee}this.isColorPAC(W)&&(W&14)===14&&this.addFormatting(b.pts,["i"])}else this.isNormalChar(I)&&(W===0&&(W=null),Y=Vr(I),Y+=Vr(W),this[this.mode_](b.pts,Y),this.column_+=Y.length)}};Qt.prototype=new Rt,Qt.prototype.flushDisplayed=function(f){const v=x=>{this.trigger("log",{level:"warn",message:"Skipping a malformed 608 caption at index "+x+"."})},b=[];this.displayed_.forEach((x,C)=>{if(x&&x.text&&x.text.length){try{x.text=x.text.trim()}catch{v(C)}x.text.length&&b.push({text:x.text,line:C+1,position:10+Math.min(70,x.indent*10)+x.offset*2.5})}else x==null&&v(C)}),b.length&&this.trigger("data",{startPts:this.startPts_,endPts:f,content:b,stream:this.name_})},Qt.prototype.reset=function(){this.mode_="popOn",this.topRow_=0,this.startPts_=0,this.displayed_=Ti(),this.nonDisplayed_=Ti(),this.lastControlCode_=null,this.column_=0,this.row_=wr,this.rollUpRows_=2,this.formatting_=[]},Qt.prototype.setConstants=function(){this.dataChannel_===0?(this.BASE_=16,this.EXT_=17,this.CONTROL_=(20|this.field_)<<8,this.OFFSET_=23):this.dataChannel_===1&&(this.BASE_=24,this.EXT_=25,this.CONTROL_=(28|this.field_)<<8,this.OFFSET_=31),this.PADDING_=0,this.RESUME_CAPTION_LOADING_=this.CONTROL_|32,this.END_OF_CAPTION_=this.CONTROL_|47,this.ROLL_UP_2_ROWS_=this.CONTROL_|37,this.ROLL_UP_3_ROWS_=this.CONTROL_|38,this.ROLL_UP_4_ROWS_=this.CONTROL_|39,this.CARRIAGE_RETURN_=this.CONTROL_|45,this.RESUME_DIRECT_CAPTIONING_=this.CONTROL_|41,this.BACKSPACE_=this.CONTROL_|33,this.ERASE_DISPLAYED_MEMORY_=this.CONTROL_|44,this.ERASE_NON_DISPLAYED_MEMORY_=this.CONTROL_|46},Qt.prototype.isSpecialCharacter=function(f,v){return f===this.EXT_&&v>=48&&v<=63},Qt.prototype.isExtCharacter=function(f,v){return(f===this.EXT_+1||f===this.EXT_+2)&&v>=32&&v<=63},Qt.prototype.isMidRowCode=function(f,v){return f===this.EXT_&&v>=32&&v<=47},Qt.prototype.isOffsetControlCode=function(f,v){return f===this.OFFSET_&&v>=33&&v<=35},Qt.prototype.isPAC=function(f,v){return f>=this.BASE_&&f<this.BASE_+8&&v>=64&&v<=127},Qt.prototype.isColorPAC=function(f){return f>=64&&f<=79||f>=96&&f<=127},Qt.prototype.isNormalChar=function(f){return f>=32&&f<=127},Qt.prototype.setRollUp=function(f,v){if(this.mode_!=="rollUp"&&(this.row_=wr,this.mode_="rollUp",this.flushDisplayed(f),this.nonDisplayed_=Ti(),this.displayed_=Ti()),v!==void 0&&v!==this.row_)for(var b=0;b<this.rollUpRows_;b++)this.displayed_[v-b]=this.displayed_[this.row_-b],this.displayed_[this.row_-b]={text:"",indent:0,offset:0};v===void 0&&(v=this.row_),this.topRow_=v-this.rollUpRows_+1},Qt.prototype.addFormatting=function(f,v){this.formatting_=this.formatting_.concat(v);var b=v.reduce(function(x,C){return x+"<"+C+">"},"");this[this.mode_](f,b)},Qt.prototype.clearFormatting=function(f){if(this.formatting_.length){var v=this.formatting_.reverse().reduce(function(b,x){return b+"</"+x+">"},"");this.formatting_=[],this[this.mode_](f,v)}},Qt.prototype.popOn=function(f,v){var b=this.nonDisplayed_[this.row_].text;b+=v,this.nonDisplayed_[this.row_].text=b},Qt.prototype.rollUp=function(f,v){var b=this.displayed_[this.row_].text;b+=v,this.displayed_[this.row_].text=b},Qt.prototype.shiftRowsUp_=function(){var f;for(f=0;f<this.topRow_;f++)this.displayed_[f]={text:"",indent:0,offset:0};for(f=this.row_+1;f<wr+1;f++)this.displayed_[f]={text:"",indent:0,offset:0};for(f=this.topRow_;f<this.row_;f++)this.displayed_[f]=this.displayed_[f+1];this.displayed_[this.row_]={text:"",indent:0,offset:0}},Qt.prototype.paintOn=function(f,v){var b=this.displayed_[this.row_].text;b+=v,this.displayed_[this.row_].text=b};var vn={CaptionStream:st,Cea608Stream:Qt,Cea708Stream:mt},ui={H264_STREAM_TYPE:27,ADTS_STREAM_TYPE:15,METADATA_STREAM_TYPE:21},gs=t,Xr=8589934592,vs=4294967296,an="shared",Ji=function(f,v){var b=1;for(f>v&&(b=-1);Math.abs(v-f)>vs;)f+=b*Xr;return f},Cr=function(f){var v,b;Cr.prototype.init.call(this),this.type_=f||an,this.push=function(x){if(x.type==="metadata"){this.trigger("data",x);return}this.type_!==an&&x.type!==this.type_||(b===void 0&&(b=x.dts),x.dts=Ji(x.dts,b),x.pts=Ji(x.pts,b),v=x.dts,this.trigger("data",x))},this.flush=function(){b=v,this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")},this.discontinuity=function(){b=void 0,v=void 0},this.reset=function(){this.discontinuity(),this.trigger("reset")}};Cr.prototype=new gs;var we={TimestampRolloverStream:Cr,handleRollover:Ji},Fe=(f,v,b)=>{if(!f)return-1;for(var x=b;x<f.length;x++)if(f[x]===v)return x;return-1},Ge={typedArrayIndexOf:Fe},Ye=Ge.typedArrayIndexOf,ot={Utf8:3},Tt=function(f,v,b){var x,C="";for(x=v;x<b;x++)C+="%"+("00"+f[x].toString(16)).slice(-2);return C},Dt=function(f,v,b){return decodeURIComponent(Tt(f,v,b))},mr=function(f,v,b){return unescape(Tt(f,v,b))},Mr=function(f){return f[0]<<21|f[1]<<14|f[2]<<7|f[3]},ci={APIC:function(f){var v=1,b,x,C="-->";f.data[0]===ot.Utf8&&(b=Ye(f.data,0,v),!(b<0)&&(f.mimeType=mr(f.data,v,b),v=b+1,f.pictureType=f.data[v],v++,x=Ye(f.data,0,v),!(x<0)&&(f.description=Dt(f.data,v,x),v=x+1,f.mimeType===C?f.url=mr(f.data,v,f.data.length):f.pictureData=f.data.subarray(v,f.data.length))))},"T*":function(f){f.data[0]===ot.Utf8&&(f.value=Dt(f.data,1,f.data.length).replace(/\0*$/,""),f.values=f.value.split("\0"))},TXXX:function(f){var v;f.data[0]===ot.Utf8&&(v=Ye(f.data,0,1),v!==-1&&(f.description=Dt(f.data,1,v),f.value=Dt(f.data,v+1,f.data.length).replace(/\0*$/,""),f.data=f.value))},"W*":function(f){f.url=mr(f.data,0,f.data.length).replace(/\0.*$/,"")},WXXX:function(f){var v;f.data[0]===ot.Utf8&&(v=Ye(f.data,0,1),v!==-1&&(f.description=Dt(f.data,1,v),f.url=mr(f.data,v+1,f.data.length).replace(/\0.*$/,"")))},PRIV:function(f){var v;for(v=0;v<f.data.length;v++)if(f.data[v]===0){f.owner=mr(f.data,0,v);break}f.privateData=f.data.subarray(v+1),f.data=f.privateData}},yr=function(f){var v,b,x=10,C=0,I=[];if(!(f.length<10||f[0]!==73||f[1]!==68||f[2]!==51)){C=Mr(f.subarray(6,10)),C+=10;var W=f[5]&64;W&&(x+=4,x+=Mr(f.subarray(10,14)),C-=Mr(f.subarray(16,20)));do{if(v=Mr(f.subarray(x+4,x+8)),v<1)break;b=String.fromCharCode(f[x],f[x+1],f[x+2],f[x+3]);var Y={id:b,data:f.subarray(x+10,x+v+10)};Y.key=Y.id,ci[Y.id]?ci[Y.id](Y):Y.id[0]==="T"?ci["T*"](Y):Y.id[0]==="W"&&ci["W*"](Y),I.push(Y),x+=10,x+=v}while(x<C);return I}},on={parseId3Frames:yr,parseSyncSafeInteger:Mr,frameParsers:ci},Rr=t,Ci=ui,Pi=on,ys;ys=function(f){var v={descriptor:f&&f.descriptor},b=0,x=[],C=0,I;if(ys.prototype.init.call(this),this.dispatchType=Ci.METADATA_STREAM_TYPE.toString(16),v.descriptor)for(I=0;I<v.descriptor.length;I++)this.dispatchType+=("00"+v.descriptor[I].toString(16)).slice(-2);this.push=function(W){var Y,Q,ee,le,ge,He;if(W.type==="timed-metadata"){if(W.dataAlignmentIndicator&&(C=0,x.length=0),x.length===0&&(W.data.length<10||W.data[0]!==73||W.data[1]!==68||W.data[2]!==51)){this.trigger("log",{level:"warn",message:"Skipping unrecognized metadata packet"});return}if(x.push(W),C+=W.data.byteLength,x.length===1&&(b=Pi.parseSyncSafeInteger(W.data.subarray(6,10)),b+=10),!(C<b)){for(Y={data:new Uint8Array(b),frames:[],pts:x[0].pts,dts:x[0].dts},ge=0;ge<b;)Y.data.set(x[0].data.subarray(0,b-ge),ge),ge+=x[0].data.byteLength,C-=x[0].data.byteLength,x.shift();Q=10,Y.data[5]&64&&(Q+=4,Q+=Pi.parseSyncSafeInteger(Y.data.subarray(10,14)),b-=Pi.parseSyncSafeInteger(Y.data.subarray(16,20)));do{if(ee=Pi.parseSyncSafeInteger(Y.data.subarray(Q+4,Q+8)),ee<1){this.trigger("log",{level:"warn",message:"Malformed ID3 frame encountered. Skipping remaining metadata parsing."});break}if(He=String.fromCharCode(Y.data[Q],Y.data[Q+1],Y.data[Q+2],Y.data[Q+3]),le={id:He,data:Y.data.subarray(Q+10,Q+ee+10)},le.key=le.id,Pi.frameParsers[le.id]?Pi.frameParsers[le.id](le):le.id[0]==="T"?Pi.frameParsers["T*"](le):le.id[0]==="W"&&Pi.frameParsers["W*"](le),le.owner==="com.apple.streaming.transportStreamTimestamp"){var Ee=le.data,gt=(Ee[3]&1)<<30|Ee[4]<<22|Ee[5]<<14|Ee[6]<<6|Ee[7]>>>2;gt*=4,gt+=Ee[7]&3,le.timeStamp=gt,Y.pts===void 0&&Y.dts===void 0&&(Y.pts=le.timeStamp,Y.dts=le.timeStamp),this.trigger("timestamp",le)}Y.frames.push(le),Q+=10,Q+=ee}while(Q<b);this.trigger("data",Y)}}}},ys.prototype=new Rr;var pc=ys,_s=t,Mn=vn,bi=ui,Tu=we.TimestampRolloverStream,Fr,es,na,En=188,Oa=71;Fr=function(){var f=new Uint8Array(En),v=0;Fr.prototype.init.call(this),this.push=function(b){var x=0,C=En,I;for(v?(I=new Uint8Array(b.byteLength+v),I.set(f.subarray(0,v)),I.set(b,v),v=0):I=b;C<I.byteLength;){if(I[x]===Oa&&I[C]===Oa){this.trigger("data",I.subarray(x,C)),x+=En,C+=En;continue}x++,C++}x<I.byteLength&&(f.set(I.subarray(x),0),v=I.byteLength-x)},this.flush=function(){v===En&&f[0]===Oa&&(this.trigger("data",f),v=0),this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")},this.reset=function(){v=0,this.trigger("reset")}},Fr.prototype=new _s,es=function(){var f,v,b,x;es.prototype.init.call(this),x=this,this.packetsWaitingForPmt=[],this.programMapTable=void 0,f=function(C,I){var W=0;I.payloadUnitStartIndicator&&(W+=C[W]+1),I.type==="pat"?v(C.subarray(W),I):b(C.subarray(W),I)},v=function(C,I){I.section_number=C[7],I.last_section_number=C[8],x.pmtPid=(C[10]&31)<<8|C[11],I.pmtPid=x.pmtPid},b=function(C,I){var W,Y,Q,ee;if(C[5]&1){for(x.programMapTable={video:null,audio:null,"timed-metadata":{}},W=(C[1]&15)<<8|C[2],Y=3+W-4,Q=(C[10]&15)<<8|C[11],ee=12+Q;ee<Y;){var le=C[ee],ge=(C[ee+1]&31)<<8|C[ee+2];le===bi.H264_STREAM_TYPE&&x.programMapTable.video===null?x.programMapTable.video=ge:le===bi.ADTS_STREAM_TYPE&&x.programMapTable.audio===null?x.programMapTable.audio=ge:le===bi.METADATA_STREAM_TYPE&&(x.programMapTable["timed-metadata"][ge]=le),ee+=((C[ee+3]&15)<<8|C[ee+4])+5}I.programMapTable=x.programMapTable}},this.push=function(C){var I={},W=4;if(I.payloadUnitStartIndicator=!!(C[1]&64),I.pid=C[1]&31,I.pid<<=8,I.pid|=C[2],(C[3]&48)>>>4>1&&(W+=C[W]+1),I.pid===0)I.type="pat",f(C.subarray(W),I),this.trigger("data",I);else if(I.pid===this.pmtPid)for(I.type="pmt",f(C.subarray(W),I),this.trigger("data",I);this.packetsWaitingForPmt.length;)this.processPes_.apply(this,this.packetsWaitingForPmt.shift());else this.programMapTable===void 0?this.packetsWaitingForPmt.push([C,W,I]):this.processPes_(C,W,I)},this.processPes_=function(C,I,W){W.pid===this.programMapTable.video?W.streamType=bi.H264_STREAM_TYPE:W.pid===this.programMapTable.audio?W.streamType=bi.ADTS_STREAM_TYPE:W.streamType=this.programMapTable["timed-metadata"][W.pid],W.type="pes",W.data=C.subarray(I),this.trigger("data",W)}},es.prototype=new _s,es.STREAM_TYPES={h264:27,adts:15},na=function(){var f=this,v=!1,b={data:[],size:0},x={data:[],size:0},C={data:[],size:0},I,W=function(Q,ee){var le;const ge=Q[0]<<16|Q[1]<<8|Q[2];ee.data=new Uint8Array,ge===1&&(ee.packetLength=6+(Q[4]<<8|Q[5]),ee.dataAlignmentIndicator=(Q[6]&4)!==0,le=Q[7],le&192&&(ee.pts=(Q[9]&14)<<27|(Q[10]&255)<<20|(Q[11]&254)<<12|(Q[12]&255)<<5|(Q[13]&254)>>>3,ee.pts*=4,ee.pts+=(Q[13]&6)>>>1,ee.dts=ee.pts,le&64&&(ee.dts=(Q[14]&14)<<27|(Q[15]&255)<<20|(Q[16]&254)<<12|(Q[17]&255)<<5|(Q[18]&254)>>>3,ee.dts*=4,ee.dts+=(Q[18]&6)>>>1)),ee.data=Q.subarray(9+Q[8]))},Y=function(Q,ee,le){var ge=new Uint8Array(Q.size),He={type:ee},Ee=0,gt=0,Bt=!1,Br;if(!(!Q.data.length||Q.size<9)){for(He.trackId=Q.data[0].pid,Ee=0;Ee<Q.data.length;Ee++)Br=Q.data[Ee],ge.set(Br.data,gt),gt+=Br.data.byteLength;W(ge,He),Bt=ee==="video"||He.packetLength<=Q.size,(le||Bt)&&(Q.size=0,Q.data.length=0),Bt&&f.trigger("data",He)}};na.prototype.init.call(this),this.push=function(Q){({pat:function(){},pes:function(){var ee,le;switch(Q.streamType){case bi.H264_STREAM_TYPE:ee=b,le="video";break;case bi.ADTS_STREAM_TYPE:ee=x,le="audio";break;case bi.METADATA_STREAM_TYPE:ee=C,le="timed-metadata";break;default:return}Q.payloadUnitStartIndicator&&Y(ee,le,!0),ee.data.push(Q),ee.size+=Q.data.byteLength},pmt:function(){var ee={type:"metadata",tracks:[]};I=Q.programMapTable,I.video!==null&&ee.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+I.video,codec:"avc",type:"video"}),I.audio!==null&&ee.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+I.audio,codec:"adts",type:"audio"}),v=!0,f.trigger("data",ee)}})[Q.type]()},this.reset=function(){b.size=0,b.data.length=0,x.size=0,x.data.length=0,this.trigger("reset")},this.flushStreams_=function(){Y(b,"video"),Y(x,"audio"),Y(C,"timed-metadata")},this.flush=function(){if(!v&&I){var Q={type:"metadata",tracks:[]};I.video!==null&&Q.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+I.video,codec:"avc",type:"video"}),I.audio!==null&&Q.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+I.audio,codec:"adts",type:"audio"}),f.trigger("data",Q)}v=!1,this.flushStreams_(),this.trigger("done")}},na.prototype=new _s;var Tl={PAT_PID:0,MP2T_PACKET_LENGTH:En,TransportPacketStream:Fr,TransportParseStream:es,ElementaryStream:na,TimestampRolloverStream:Tu,CaptionStream:Mn.CaptionStream,Cea608Stream:Mn.Cea608Stream,Cea708Stream:Mn.Cea708Stream,MetadataStream:pc};for(var lo in bi)bi.hasOwnProperty(lo)&&(Tl[lo]=bi[lo]);var bu=Tl,bl=t,sa=$t.ONE_SECOND_IN_TS,yn,wn=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];yn=function(f){var v,b=0;yn.prototype.init.call(this),this.skipWarn_=function(x,C){this.trigger("log",{level:"warn",message:`adts skiping bytes ${x} to ${C} in frame ${b} outside syncword`})},this.push=function(x){var C=0,I,W,Y,Q,ee;if(f||(b=0),x.type==="audio"){v&&v.length?(Y=v,v=new Uint8Array(Y.byteLength+x.data.byteLength),v.set(Y),v.set(x.data,Y.byteLength)):v=x.data;for(var le;C+7<v.length;){if(v[C]!==255||(v[C+1]&246)!==240){typeof le!="number"&&(le=C),C++;continue}if(typeof le=="number"&&(this.skipWarn_(le,C),le=null),W=(~v[C+1]&1)*2,I=(v[C+3]&3)<<11|v[C+4]<<3|(v[C+5]&224)>>5,Q=((v[C+6]&3)+1)*1024,ee=Q*sa/wn[(v[C+2]&60)>>>2],v.byteLength-C<I)break;this.trigger("data",{pts:x.pts+b*ee,dts:x.dts+b*ee,sampleCount:Q,audioobjecttype:(v[C+2]>>>6&3)+1,channelcount:(v[C+2]&1)<<2|(v[C+3]&192)>>>6,samplerate:wn[(v[C+2]&60)>>>2],samplingfrequencyindex:(v[C+2]&60)>>>2,samplesize:16,data:v.subarray(C+7+W,C+I)}),b++,C+=I}typeof le=="number"&&(this.skipWarn_(le,C),le=null),v=v.subarray(C)}},this.flush=function(){b=0,this.trigger("done")},this.reset=function(){v=void 0,this.trigger("reset")},this.endTimeline=function(){v=void 0,this.trigger("endedtimeline")}},yn.prototype=new bl;var aa=yn,Ma;Ma=function(f){var v=f.byteLength,b=0,x=0;this.length=function(){return 8*v},this.bitsAvailable=function(){return 8*v+x},this.loadWord=function(){var C=f.byteLength-v,I=new Uint8Array(4),W=Math.min(4,v);if(W===0)throw new Error("no bytes available");I.set(f.subarray(C,C+W)),b=new DataView(I.buffer).getUint32(0),x=W*8,v-=W},this.skipBits=function(C){var I;x>C?(b<<=C,x-=C):(C-=x,I=Math.floor(C/8),C-=I*8,v-=I,this.loadWord(),b<<=C,x-=C)},this.readBits=function(C){var I=Math.min(x,C),W=b>>>32-I;return x-=I,x>0?b<<=I:v>0&&this.loadWord(),I=C-I,I>0?W<<I|this.readBits(I):W},this.skipLeadingZeros=function(){var C;for(C=0;C<x;++C)if((b&2147483648>>>C)!==0)return b<<=C,x-=C,C;return this.loadWord(),C+this.skipLeadingZeros()},this.skipUnsignedExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.skipExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.readUnsignedExpGolomb=function(){var C=this.skipLeadingZeros();return this.readBits(C+1)-1},this.readExpGolomb=function(){var C=this.readUnsignedExpGolomb();return 1&C?1+C>>>1:-1*(C>>>1)},this.readBoolean=function(){return this.readBits(1)===1},this.readUnsignedByte=function(){return this.readBits(8)},this.loadWord()};var oa=Ma,Sl=t,mc=oa,Fn,Fa,Cl;Fa=function(){var f=0,v,b;Fa.prototype.init.call(this),this.push=function(x){var C;b?(C=new Uint8Array(b.byteLength+x.data.byteLength),C.set(b),C.set(x.data,b.byteLength),b=C):b=x.data;for(var I=b.byteLength;f<I-3;f++)if(b[f+2]===1){v=f+5;break}for(;v<I;)switch(b[v]){case 0:if(b[v-1]!==0){v+=2;break}else if(b[v-2]!==0){v++;break}f+3!==v-2&&this.trigger("data",b.subarray(f+3,v-2));do v++;while(b[v]!==1&&v<I);f=v-2,v+=3;break;case 1:if(b[v-1]!==0||b[v-2]!==0){v+=3;break}this.trigger("data",b.subarray(f+3,v-2)),f=v-2,v+=3;break;default:v+=3;break}b=b.subarray(f),v-=f,f=0},this.reset=function(){b=null,f=0,this.trigger("reset")},this.flush=function(){b&&b.byteLength>3&&this.trigger("data",b.subarray(f+3)),b=null,f=0,this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")}},Fa.prototype=new Sl,Cl={100:!0,110:!0,122:!0,244:!0,44:!0,83:!0,86:!0,118:!0,128:!0,138:!0,139:!0,134:!0},Fn=function(){var f=new Fa,v,b,x,C,I,W,Y;Fn.prototype.init.call(this),v=this,this.push=function(Q){Q.type==="video"&&(b=Q.trackId,x=Q.pts,C=Q.dts,f.push(Q))},f.on("data",function(Q){var ee={trackId:b,pts:x,dts:C,data:Q,nalUnitTypeCode:Q[0]&31};switch(ee.nalUnitTypeCode){case 5:ee.nalUnitType="slice_layer_without_partitioning_rbsp_idr";break;case 6:ee.nalUnitType="sei_rbsp",ee.escapedRBSP=I(Q.subarray(1));break;case 7:ee.nalUnitType="seq_parameter_set_rbsp",ee.escapedRBSP=I(Q.subarray(1)),ee.config=W(ee.escapedRBSP);break;case 8:ee.nalUnitType="pic_parameter_set_rbsp";break;case 9:ee.nalUnitType="access_unit_delimiter_rbsp";break}v.trigger("data",ee)}),f.on("done",function(){v.trigger("done")}),f.on("partialdone",function(){v.trigger("partialdone")}),f.on("reset",function(){v.trigger("reset")}),f.on("endedtimeline",function(){v.trigger("endedtimeline")}),this.flush=function(){f.flush()},this.partialFlush=function(){f.partialFlush()},this.reset=function(){f.reset()},this.endTimeline=function(){f.endTimeline()},Y=function(Q,ee){var le=8,ge=8,He,Ee;for(He=0;He<Q;He++)ge!==0&&(Ee=ee.readExpGolomb(),ge=(le+Ee+256)%256),le=ge===0?le:ge},I=function(Q){for(var ee=Q.byteLength,le=[],ge=1,He,Ee;ge<ee-2;)Q[ge]===0&&Q[ge+1]===0&&Q[ge+2]===3?(le.push(ge+2),ge+=2):ge++;if(le.length===0)return Q;He=ee-le.length,Ee=new Uint8Array(He);var gt=0;for(ge=0;ge<He;gt++,ge++)gt===le[0]&&(gt++,le.shift()),Ee[ge]=Q[gt];return Ee},W=function(Q){var ee=0,le=0,ge=0,He=0,Ee,gt,Bt,Br,si,cn,yo,Fl,Ou,ha,fa,Wt=[1,1],oi,$i;if(Ee=new mc(Q),gt=Ee.readUnsignedByte(),Br=Ee.readUnsignedByte(),Bt=Ee.readUnsignedByte(),Ee.skipUnsignedExpGolomb(),Cl[gt]&&(si=Ee.readUnsignedExpGolomb(),si===3&&Ee.skipBits(1),Ee.skipUnsignedExpGolomb(),Ee.skipUnsignedExpGolomb(),Ee.skipBits(1),Ee.readBoolean()))for(fa=si!==3?8:12,$i=0;$i<fa;$i++)Ee.readBoolean()&&($i<6?Y(16,Ee):Y(64,Ee));if(Ee.skipUnsignedExpGolomb(),cn=Ee.readUnsignedExpGolomb(),cn===0)Ee.readUnsignedExpGolomb();else if(cn===1)for(Ee.skipBits(1),Ee.skipExpGolomb(),Ee.skipExpGolomb(),yo=Ee.readUnsignedExpGolomb(),$i=0;$i<yo;$i++)Ee.skipExpGolomb();if(Ee.skipUnsignedExpGolomb(),Ee.skipBits(1),Fl=Ee.readUnsignedExpGolomb(),Ou=Ee.readUnsignedExpGolomb(),ha=Ee.readBits(1),ha===0&&Ee.skipBits(1),Ee.skipBits(1),Ee.readBoolean()&&(ee=Ee.readUnsignedExpGolomb(),le=Ee.readUnsignedExpGolomb(),ge=Ee.readUnsignedExpGolomb(),He=Ee.readUnsignedExpGolomb()),Ee.readBoolean()&&Ee.readBoolean()){switch(oi=Ee.readUnsignedByte(),oi){case 1:Wt=[1,1];break;case 2:Wt=[12,11];break;case 3:Wt=[10,11];break;case 4:Wt=[16,11];break;case 5:Wt=[40,33];break;case 6:Wt=[24,11];break;case 7:Wt=[20,11];break;case 8:Wt=[32,11];break;case 9:Wt=[80,33];break;case 10:Wt=[18,11];break;case 11:Wt=[15,11];break;case 12:Wt=[64,33];break;case 13:Wt=[160,99];break;case 14:Wt=[4,3];break;case 15:Wt=[3,2];break;case 16:Wt=[2,1];break;case 255:{Wt=[Ee.readUnsignedByte()<<8|Ee.readUnsignedByte(),Ee.readUnsignedByte()<<8|Ee.readUnsignedByte()];break}}Wt&&Wt[0]/Wt[1]}return{profileIdc:gt,levelIdc:Bt,profileCompatibility:Br,width:(Fl+1)*16-ee*2-le*2,height:(2-ha)*(Ou+1)*16-ge*2-He*2,sarRatio:Wt}}},Fn.prototype=new Sl;var El={H264Stream:Fn},jo=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],Ba=function(f,v){var b=f[v+6]<<21|f[v+7]<<14|f[v+8]<<7|f[v+9],x=f[v+5],C=(x&16)>>4;return b=b>=0?b:0,C?b+20:b+10},xs=function(f,v){return f.length-v<10||f[v]!==73||f[v+1]!==68||f[v+2]!==51?v:(v+=Ba(f,v),xs(f,v))},ts=function(f){var v=xs(f,0);return f.length>=v+2&&(f[v]&255)===255&&(f[v+1]&240)===240&&(f[v+1]&22)===16},la=function(f){return f[0]<<21|f[1]<<14|f[2]<<7|f[3]},zo=function(f,v,b){var x,C="";for(x=v;x<b;x++)C+="%"+("00"+f[x].toString(16)).slice(-2);return C},gc=function(f,v,b){return unescape(zo(f,v,b))},vc=function(f,v){var b=(f[v+5]&224)>>5,x=f[v+4]<<3,C=f[v+3]&6144;return C|x|b},Su=function(f,v){return f[v]===73&&f[v+1]===68&&f[v+2]===51?"timed-metadata":f[v]&!0&&(f[v+1]&240)===240?"audio":null},wl=function(f){for(var v=0;v+5<f.length;){if(f[v]!==255||(f[v+1]&246)!==240){v++;continue}return jo[(f[v+2]&60)>>>2]}return null},Cu=function(f){var v,b,x,C;v=10,f[5]&64&&(v+=4,v+=la(f.subarray(10,14)));do{if(b=la(f.subarray(v+4,v+8)),b<1)return null;if(C=String.fromCharCode(f[v],f[v+1],f[v+2],f[v+3]),C==="PRIV"){x=f.subarray(v+10,v+b+10);for(var I=0;I<x.byteLength;I++)if(x[I]===0){var W=gc(x,0,I);if(W==="com.apple.streaming.transportStreamTimestamp"){var Y=x.subarray(I+1),Q=(Y[3]&1)<<30|Y[4]<<22|Y[5]<<14|Y[6]<<6|Y[7]>>>2;return Q*=4,Q+=Y[7]&3,Q}break}}v+=10,v+=b}while(v<f.byteLength);return null},Fs={isLikelyAacData:ts,parseId3TagSize:Ba,parseAdtsSize:vc,parseType:Su,parseSampleRate:wl,parseAacTimestamp:Cu},ua=t,rs=Fs,Ts;Ts=function(){var f=new Uint8Array,v=0;Ts.prototype.init.call(this),this.setTimestamp=function(b){v=b},this.push=function(b){var x=0,C=0,I,W,Y,Q;for(f.length?(Q=f.length,f=new Uint8Array(b.byteLength+Q),f.set(f.subarray(0,Q)),f.set(b,Q)):f=b;f.length-C>=3;){if(f[C]===73&&f[C+1]===68&&f[C+2]===51){if(f.length-C<10||(x=rs.parseId3TagSize(f,C),C+x>f.length))break;W={type:"timed-metadata",data:f.subarray(C,C+x)},this.trigger("data",W),C+=x;continue}else if((f[C]&255)===255&&(f[C+1]&240)===240){if(f.length-C<7||(x=rs.parseAdtsSize(f,C),C+x>f.length))break;Y={type:"audio",data:f.subarray(C,C+x),pts:v,dts:v},this.trigger("data",Y),C+=x;continue}C++}I=f.length-C,I>0?f=f.subarray(C):f=new Uint8Array},this.reset=function(){f=new Uint8Array,this.trigger("reset")},this.endTimeline=function(){f=new Uint8Array,this.trigger("endedtimeline")}},Ts.prototype=new ua;var yc=Ts,ti=["audioobjecttype","channelcount","samplerate","samplingfrequencyindex","samplesize"],kl=ti,_c=["width","height","profileIdc","levelIdc","profileCompatibility","sarRatio"],kn=_c,An=t,is=vt,_n=rt,Na=Ui,gi=ze,Li=bu,Bn=$t,Ua=aa,uo=El.H264Stream,Ho=yc,xd=Fs.isLikelyAacData,Td=$t.ONE_SECOND_IN_TS,Vo=kl,Eu=kn,$a,Bs,ja,In,xc=function(f,v){v.stream=f,this.trigger("log",v)},co=function(f,v){for(var b=Object.keys(v),x=0;x<b.length;x++){var C=b[x];C==="headOfPipeline"||!v[C].on||v[C].on("log",xc.bind(f,C))}},za=function(f,v){var b;if(f.length!==v.length)return!1;for(b=0;b<f.length;b++)if(f[b]!==v[b])return!1;return!0},wu=function(f,v,b,x,C,I){var W=b-v,Y=x-v,Q=C-b;return{start:{dts:f,pts:f+W},end:{dts:f+Y,pts:f+Q},prependedContentDuration:I,baseMediaDecodeTime:f}};Bs=function(f,v){var b=[],x,C=0,I=0,W=1/0;v=v||{},x=v.firstSequenceNumber||0,Bs.prototype.init.call(this),this.push=function(Y){gi.collectDtsInfo(f,Y),f&&Vo.forEach(function(Q){f[Q]=Y[Q]}),b.push(Y)},this.setEarliestDts=function(Y){C=Y},this.setVideoBaseMediaDecodeTime=function(Y){W=Y},this.setAudioAppendStart=function(Y){I=Y},this.flush=function(){var Y,Q,ee,le,ge,He,Ee;if(b.length===0){this.trigger("done","AudioSegmentStream");return}Y=Na.trimAdtsFramesByEarliestDts(b,f,C),f.baseMediaDecodeTime=gi.calculateTrackBaseMediaDecodeTime(f,v.keepOriginalTimestamps),Ee=Na.prefixWithSilence(f,Y,I,W),f.samples=Na.generateSampleTable(Y),ee=is.mdat(Na.concatenateFrameData(Y)),b=[],Q=is.moof(x,[f]),le=new Uint8Array(Q.byteLength+ee.byteLength),x++,le.set(Q),le.set(ee,Q.byteLength),gi.clearDtsInfo(f),ge=Math.ceil(Td*1024/f.samplerate),Y.length&&(He=Y.length*ge,this.trigger("segmentTimingInfo",wu(Bn.audioTsToVideoTs(f.baseMediaDecodeTime,f.samplerate),Y[0].dts,Y[0].pts,Y[0].dts+He,Y[0].pts+He,Ee||0)),this.trigger("timingInfo",{start:Y[0].pts,end:Y[0].pts+He})),this.trigger("data",{track:f,boxes:le}),this.trigger("done","AudioSegmentStream")},this.reset=function(){gi.clearDtsInfo(f),b=[],this.trigger("reset")}},Bs.prototype=new An,$a=function(f,v){var b,x=[],C=[],I,W;v=v||{},b=v.firstSequenceNumber||0,$a.prototype.init.call(this),delete f.minPTS,this.gopCache_=[],this.push=function(Y){gi.collectDtsInfo(f,Y),Y.nalUnitType==="seq_parameter_set_rbsp"&&!I&&(I=Y.config,f.sps=[Y.data],Eu.forEach(function(Q){f[Q]=I[Q]},this)),Y.nalUnitType==="pic_parameter_set_rbsp"&&!W&&(W=Y.data,f.pps=[Y.data]),x.push(Y)},this.flush=function(){for(var Y,Q,ee,le,ge,He,Ee=0,gt,Bt;x.length&&x[0].nalUnitType!=="access_unit_delimiter_rbsp";)x.shift();if(x.length===0){this.resetStream_(),this.trigger("done","VideoSegmentStream");return}if(Y=_n.groupNalsIntoFrames(x),ee=_n.groupFramesIntoGops(Y),ee[0][0].keyFrame||(Q=this.getGopForFusion_(x[0],f),Q?(Ee=Q.duration,ee.unshift(Q),ee.byteLength+=Q.byteLength,ee.nalCount+=Q.nalCount,ee.pts=Q.pts,ee.dts=Q.dts,ee.duration+=Q.duration):ee=_n.extendFirstKeyFrame(ee)),C.length){var Br;if(v.alignGopsAtEnd?Br=this.alignGopsAtEnd_(ee):Br=this.alignGopsAtStart_(ee),!Br){this.gopCache_.unshift({gop:ee.pop(),pps:f.pps,sps:f.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),x=[],this.resetStream_(),this.trigger("done","VideoSegmentStream");return}gi.clearDtsInfo(f),ee=Br}gi.collectDtsInfo(f,ee),f.samples=_n.generateSampleTable(ee),ge=is.mdat(_n.concatenateNalData(ee)),f.baseMediaDecodeTime=gi.calculateTrackBaseMediaDecodeTime(f,v.keepOriginalTimestamps),this.trigger("processedGopsInfo",ee.map(function(si){return{pts:si.pts,dts:si.dts,byteLength:si.byteLength}})),gt=ee[0],Bt=ee[ee.length-1],this.trigger("segmentTimingInfo",wu(f.baseMediaDecodeTime,gt.dts,gt.pts,Bt.dts+Bt.duration,Bt.pts+Bt.duration,Ee)),this.trigger("timingInfo",{start:ee[0].pts,end:ee[ee.length-1].pts+ee[ee.length-1].duration}),this.gopCache_.unshift({gop:ee.pop(),pps:f.pps,sps:f.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),x=[],this.trigger("baseMediaDecodeTime",f.baseMediaDecodeTime),this.trigger("timelineStartInfo",f.timelineStartInfo),le=is.moof(b,[f]),He=new Uint8Array(le.byteLength+ge.byteLength),b++,He.set(le),He.set(ge,le.byteLength),this.trigger("data",{track:f,boxes:He}),this.resetStream_(),this.trigger("done","VideoSegmentStream")},this.reset=function(){this.resetStream_(),x=[],this.gopCache_.length=0,C.length=0,this.trigger("reset")},this.resetStream_=function(){gi.clearDtsInfo(f),I=void 0,W=void 0},this.getGopForFusion_=function(Y){var Q=45e3,ee=1/0,le,ge,He,Ee,gt;for(gt=0;gt<this.gopCache_.length;gt++)Ee=this.gopCache_[gt],He=Ee.gop,!(!(f.pps&&za(f.pps[0],Ee.pps[0]))||!(f.sps&&za(f.sps[0],Ee.sps[0])))&&(He.dts<f.timelineStartInfo.dts||(le=Y.dts-He.dts-He.duration,le>=-1e4&&le<=Q&&(!ge||ee>le)&&(ge=Ee,ee=le)));return ge?ge.gop:null},this.alignGopsAtStart_=function(Y){var Q,ee,le,ge,He,Ee,gt,Bt;for(He=Y.byteLength,Ee=Y.nalCount,gt=Y.duration,Q=ee=0;Q<C.length&&ee<Y.length&&(le=C[Q],ge=Y[ee],le.pts!==ge.pts);){if(ge.pts>le.pts){Q++;continue}ee++,He-=ge.byteLength,Ee-=ge.nalCount,gt-=ge.duration}return ee===0?Y:ee===Y.length?null:(Bt=Y.slice(ee),Bt.byteLength=He,Bt.duration=gt,Bt.nalCount=Ee,Bt.pts=Bt[0].pts,Bt.dts=Bt[0].dts,Bt)},this.alignGopsAtEnd_=function(Y){var Q,ee,le,ge,He,Ee;for(Q=C.length-1,ee=Y.length-1,He=null,Ee=!1;Q>=0&&ee>=0;){if(le=C[Q],ge=Y[ee],le.pts===ge.pts){Ee=!0;break}if(le.pts>ge.pts){Q--;continue}Q===C.length-1&&(He=ee),ee--}if(!Ee&&He===null)return null;var gt;if(Ee?gt=ee:gt=He,gt===0)return Y;var Bt=Y.slice(gt),Br=Bt.reduce(function(si,cn){return si.byteLength+=cn.byteLength,si.duration+=cn.duration,si.nalCount+=cn.nalCount,si},{byteLength:0,duration:0,nalCount:0});return Bt.byteLength=Br.byteLength,Bt.duration=Br.duration,Bt.nalCount=Br.nalCount,Bt.pts=Bt[0].pts,Bt.dts=Bt[0].dts,Bt},this.alignGopsWith=function(Y){C=Y}},$a.prototype=new An,In=function(f,v){this.numberOfTracks=0,this.metadataStream=v,f=f||{},typeof f.remux<"u"?this.remuxTracks=!!f.remux:this.remuxTracks=!0,typeof f.keepOriginalTimestamps=="boolean"?this.keepOriginalTimestamps=f.keepOriginalTimestamps:this.keepOriginalTimestamps=!1,this.pendingTracks=[],this.videoTrack=null,this.pendingBoxes=[],this.pendingCaptions=[],this.pendingMetadata=[],this.pendingBytes=0,this.emittedTracks=0,In.prototype.init.call(this),this.push=function(b){if(b.content||b.text)return this.pendingCaptions.push(b);if(b.frames)return this.pendingMetadata.push(b);this.pendingTracks.push(b.track),this.pendingBytes+=b.boxes.byteLength,b.track.type==="video"&&(this.videoTrack=b.track,this.pendingBoxes.push(b.boxes)),b.track.type==="audio"&&(this.audioTrack=b.track,this.pendingBoxes.unshift(b.boxes))}},In.prototype=new An,In.prototype.flush=function(f){var v=0,b={captions:[],captionStreams:{},metadata:[],info:{}},x,C,I,W=0,Y;if(this.pendingTracks.length<this.numberOfTracks){if(f!=="VideoSegmentStream"&&f!=="AudioSegmentStream")return;if(this.remuxTracks)return;if(this.pendingTracks.length===0){this.emittedTracks++,this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0);return}}if(this.videoTrack?(W=this.videoTrack.timelineStartInfo.pts,Eu.forEach(function(Q){b.info[Q]=this.videoTrack[Q]},this)):this.audioTrack&&(W=this.audioTrack.timelineStartInfo.pts,Vo.forEach(function(Q){b.info[Q]=this.audioTrack[Q]},this)),this.videoTrack||this.audioTrack){for(this.pendingTracks.length===1?b.type=this.pendingTracks[0].type:b.type="combined",this.emittedTracks+=this.pendingTracks.length,I=is.initSegment(this.pendingTracks),b.initSegment=new Uint8Array(I.byteLength),b.initSegment.set(I),b.data=new Uint8Array(this.pendingBytes),Y=0;Y<this.pendingBoxes.length;Y++)b.data.set(this.pendingBoxes[Y],v),v+=this.pendingBoxes[Y].byteLength;for(Y=0;Y<this.pendingCaptions.length;Y++)x=this.pendingCaptions[Y],x.startTime=Bn.metadataTsToSeconds(x.startPts,W,this.keepOriginalTimestamps),x.endTime=Bn.metadataTsToSeconds(x.endPts,W,this.keepOriginalTimestamps),b.captionStreams[x.stream]=!0,b.captions.push(x);for(Y=0;Y<this.pendingMetadata.length;Y++)C=this.pendingMetadata[Y],C.cueTime=Bn.metadataTsToSeconds(C.pts,W,this.keepOriginalTimestamps),b.metadata.push(C);for(b.metadata.dispatchType=this.metadataStream.dispatchType,this.pendingTracks.length=0,this.videoTrack=null,this.pendingBoxes.length=0,this.pendingCaptions.length=0,this.pendingBytes=0,this.pendingMetadata.length=0,this.trigger("data",b),Y=0;Y<b.captions.length;Y++)x=b.captions[Y],this.trigger("caption",x);for(Y=0;Y<b.metadata.length;Y++)C=b.metadata[Y],this.trigger("id3Frame",C)}this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0)},In.prototype.setRemux=function(f){this.remuxTracks=f},ja=function(f){var v=this,b=!0,x,C;ja.prototype.init.call(this),f=f||{},this.baseMediaDecodeTime=f.baseMediaDecodeTime||0,this.transmuxPipeline_={},this.setupAacPipeline=function(){var I={};this.transmuxPipeline_=I,I.type="aac",I.metadataStream=new Li.MetadataStream,I.aacStream=new Ho,I.audioTimestampRolloverStream=new Li.TimestampRolloverStream("audio"),I.timedMetadataTimestampRolloverStream=new Li.TimestampRolloverStream("timed-metadata"),I.adtsStream=new Ua,I.coalesceStream=new In(f,I.metadataStream),I.headOfPipeline=I.aacStream,I.aacStream.pipe(I.audioTimestampRolloverStream).pipe(I.adtsStream),I.aacStream.pipe(I.timedMetadataTimestampRolloverStream).pipe(I.metadataStream).pipe(I.coalesceStream),I.metadataStream.on("timestamp",function(W){I.aacStream.setTimestamp(W.timeStamp)}),I.aacStream.on("data",function(W){W.type!=="timed-metadata"&&W.type!=="audio"||I.audioSegmentStream||(C=C||{timelineStartInfo:{baseMediaDecodeTime:v.baseMediaDecodeTime},codec:"adts",type:"audio"},I.coalesceStream.numberOfTracks++,I.audioSegmentStream=new Bs(C,f),I.audioSegmentStream.on("log",v.getLogTrigger_("audioSegmentStream")),I.audioSegmentStream.on("timingInfo",v.trigger.bind(v,"audioTimingInfo")),I.adtsStream.pipe(I.audioSegmentStream).pipe(I.coalesceStream),v.trigger("trackinfo",{hasAudio:!!C,hasVideo:!!x}))}),I.coalesceStream.on("data",this.trigger.bind(this,"data")),I.coalesceStream.on("done",this.trigger.bind(this,"done")),co(this,I)},this.setupTsPipeline=function(){var I={};this.transmuxPipeline_=I,I.type="ts",I.metadataStream=new Li.MetadataStream,I.packetStream=new Li.TransportPacketStream,I.parseStream=new Li.TransportParseStream,I.elementaryStream=new Li.ElementaryStream,I.timestampRolloverStream=new Li.TimestampRolloverStream,I.adtsStream=new Ua,I.h264Stream=new uo,I.captionStream=new Li.CaptionStream(f),I.coalesceStream=new In(f,I.metadataStream),I.headOfPipeline=I.packetStream,I.packetStream.pipe(I.parseStream).pipe(I.elementaryStream).pipe(I.timestampRolloverStream),I.timestampRolloverStream.pipe(I.h264Stream),I.timestampRolloverStream.pipe(I.adtsStream),I.timestampRolloverStream.pipe(I.metadataStream).pipe(I.coalesceStream),I.h264Stream.pipe(I.captionStream).pipe(I.coalesceStream),I.elementaryStream.on("data",function(W){var Y;if(W.type==="metadata"){for(Y=W.tracks.length;Y--;)!x&&W.tracks[Y].type==="video"?(x=W.tracks[Y],x.timelineStartInfo.baseMediaDecodeTime=v.baseMediaDecodeTime):!C&&W.tracks[Y].type==="audio"&&(C=W.tracks[Y],C.timelineStartInfo.baseMediaDecodeTime=v.baseMediaDecodeTime);x&&!I.videoSegmentStream&&(I.coalesceStream.numberOfTracks++,I.videoSegmentStream=new $a(x,f),I.videoSegmentStream.on("log",v.getLogTrigger_("videoSegmentStream")),I.videoSegmentStream.on("timelineStartInfo",function(Q){C&&!f.keepOriginalTimestamps&&(C.timelineStartInfo=Q,I.audioSegmentStream.setEarliestDts(Q.dts-v.baseMediaDecodeTime))}),I.videoSegmentStream.on("processedGopsInfo",v.trigger.bind(v,"gopInfo")),I.videoSegmentStream.on("segmentTimingInfo",v.trigger.bind(v,"videoSegmentTimingInfo")),I.videoSegmentStream.on("baseMediaDecodeTime",function(Q){C&&I.audioSegmentStream.setVideoBaseMediaDecodeTime(Q)}),I.videoSegmentStream.on("timingInfo",v.trigger.bind(v,"videoTimingInfo")),I.h264Stream.pipe(I.videoSegmentStream).pipe(I.coalesceStream)),C&&!I.audioSegmentStream&&(I.coalesceStream.numberOfTracks++,I.audioSegmentStream=new Bs(C,f),I.audioSegmentStream.on("log",v.getLogTrigger_("audioSegmentStream")),I.audioSegmentStream.on("timingInfo",v.trigger.bind(v,"audioTimingInfo")),I.audioSegmentStream.on("segmentTimingInfo",v.trigger.bind(v,"audioSegmentTimingInfo")),I.adtsStream.pipe(I.audioSegmentStream).pipe(I.coalesceStream)),v.trigger("trackinfo",{hasAudio:!!C,hasVideo:!!x})}}),I.coalesceStream.on("data",this.trigger.bind(this,"data")),I.coalesceStream.on("id3Frame",function(W){W.dispatchType=I.metadataStream.dispatchType,v.trigger("id3Frame",W)}),I.coalesceStream.on("caption",this.trigger.bind(this,"caption")),I.coalesceStream.on("done",this.trigger.bind(this,"done")),co(this,I)},this.setBaseMediaDecodeTime=function(I){var W=this.transmuxPipeline_;f.keepOriginalTimestamps||(this.baseMediaDecodeTime=I),C&&(C.timelineStartInfo.dts=void 0,C.timelineStartInfo.pts=void 0,gi.clearDtsInfo(C),W.audioTimestampRolloverStream&&W.audioTimestampRolloverStream.discontinuity()),x&&(W.videoSegmentStream&&(W.videoSegmentStream.gopCache_=[]),x.timelineStartInfo.dts=void 0,x.timelineStartInfo.pts=void 0,gi.clearDtsInfo(x),W.captionStream.reset()),W.timestampRolloverStream&&W.timestampRolloverStream.discontinuity()},this.setAudioAppendStart=function(I){C&&this.transmuxPipeline_.audioSegmentStream.setAudioAppendStart(I)},this.setRemux=function(I){var W=this.transmuxPipeline_;f.remux=I,W&&W.coalesceStream&&W.coalesceStream.setRemux(I)},this.alignGopsWith=function(I){x&&this.transmuxPipeline_.videoSegmentStream&&this.transmuxPipeline_.videoSegmentStream.alignGopsWith(I)},this.getLogTrigger_=function(I){var W=this;return function(Y){Y.stream=I,W.trigger("log",Y)}},this.push=function(I){if(b){var W=xd(I);W&&this.transmuxPipeline_.type!=="aac"?this.setupAacPipeline():!W&&this.transmuxPipeline_.type!=="ts"&&this.setupTsPipeline(),b=!1}this.transmuxPipeline_.headOfPipeline.push(I)},this.flush=function(){b=!0,this.transmuxPipeline_.headOfPipeline.flush()},this.endTimeline=function(){this.transmuxPipeline_.headOfPipeline.endTimeline()},this.reset=function(){this.transmuxPipeline_.headOfPipeline&&this.transmuxPipeline_.headOfPipeline.reset()},this.resetCaptions=function(){this.transmuxPipeline_.captionStream&&this.transmuxPipeline_.captionStream.reset()}},ja.prototype=new An;var Tc={Transmuxer:ja},Al=function(f){return f>>>0},bc=function(f){return("00"+f.toString(16)).slice(-2)},ca={toUnsigned:Al,toHexString:bc},Sc=function(f){var v="";return v+=String.fromCharCode(f[0]),v+=String.fromCharCode(f[1]),v+=String.fromCharCode(f[2]),v+=String.fromCharCode(f[3]),v},ho=Sc,Cc=ca.toUnsigned,Ec=ho,fo=function(f,v){var b=[],x,C,I,W,Y;if(!v.length)return null;for(x=0;x<f.byteLength;)C=Cc(f[x]<<24|f[x+1]<<16|f[x+2]<<8|f[x+3]),I=Ec(f.subarray(x+4,x+8)),W=C>1?x+C:f.byteLength,I===v[0]&&(v.length===1?b.push(f.subarray(x+8,W)):(Y=fo(f.subarray(x+8,W),v.slice(1)),Y.length&&(b=b.concat(Y)))),x=W;return b},po=fo,bd=ca.toUnsigned,Sd=s.getUint64,Cd=function(f){var v={version:f[0],flags:new Uint8Array(f.subarray(1,4))};return v.version===1?v.baseMediaDecodeTime=Sd(f.subarray(4)):v.baseMediaDecodeTime=bd(f[4]<<24|f[5]<<16|f[6]<<8|f[7]),v},qo=Cd,Wo=function(f){return{isLeading:(f[0]&12)>>>2,dependsOn:f[0]&3,isDependedOn:(f[1]&192)>>>6,hasRedundancy:(f[1]&48)>>>4,paddingValue:(f[1]&14)>>>1,isNonSyncSample:f[1]&1,degradationPriority:f[2]<<8|f[3]}},ku=Wo,Il=ku,wc=function(f){var v={version:f[0],flags:new Uint8Array(f.subarray(1,4)),samples:[]},b=new DataView(f.buffer,f.byteOffset,f.byteLength),x=v.flags[2]&1,C=v.flags[2]&4,I=v.flags[1]&1,W=v.flags[1]&2,Y=v.flags[1]&4,Q=v.flags[1]&8,ee=b.getUint32(4),le=8,ge;for(x&&(v.dataOffset=b.getInt32(le),le+=4),C&&ee&&(ge={flags:Il(f.subarray(le,le+4))},le+=4,I&&(ge.duration=b.getUint32(le),le+=4),W&&(ge.size=b.getUint32(le),le+=4),Q&&(v.version===1?ge.compositionTimeOffset=b.getInt32(le):ge.compositionTimeOffset=b.getUint32(le),le+=4),v.samples.push(ge),ee--);ee--;)ge={},I&&(ge.duration=b.getUint32(le),le+=4),W&&(ge.size=b.getUint32(le),le+=4),Y&&(ge.flags=Il(f.subarray(le,le+4)),le+=4),Q&&(v.version===1?ge.compositionTimeOffset=b.getInt32(le):ge.compositionTimeOffset=b.getUint32(le),le+=4),v.samples.push(ge);return v},Ns=wc,Yr=function(f){var v=new DataView(f.buffer,f.byteOffset,f.byteLength),b={version:f[0],flags:new Uint8Array(f.subarray(1,4)),trackId:v.getUint32(4)},x=b.flags[2]&1,C=b.flags[2]&2,I=b.flags[2]&8,W=b.flags[2]&16,Y=b.flags[2]&32,Q=b.flags[0]&65536,ee=b.flags[0]&131072,le;return le=8,x&&(le+=4,b.baseDataOffset=v.getUint32(12),le+=4),C&&(b.sampleDescriptionIndex=v.getUint32(le),le+=4),I&&(b.defaultSampleDuration=v.getUint32(le),le+=4),W&&(b.defaultSampleSize=v.getUint32(le),le+=4),Y&&(b.defaultSampleFlags=v.getUint32(le)),Q&&(b.durationIsEmpty=!0),!x&&ee&&(b.baseDataOffsetIsMoof=!0),b},bs=Yr,ri;typeof window<"u"?ri=window:typeof i<"u"?ri=i:typeof self<"u"?ri=self:ri={};var Nn=ri,Ed=ct.discardEmulationPreventionBytes,kc=vn.CaptionStream,Ss=po,Ac=qo,Go=Ns,Ko=bs,Au=Nn,Dl=function(f,v){for(var b=f,x=0;x<v.length;x++){var C=v[x];if(b<C.size)return C;b-=C.size}return null},wd=function(f,v,b){var x=new DataView(f.buffer,f.byteOffset,f.byteLength),C={logs:[],seiNals:[]},I,W,Y,Q;for(W=0;W+4<f.length;W+=Y)if(Y=x.getUint32(W),W+=4,!(Y<=0))switch(f[W]&31){case 6:var ee=f.subarray(W+1,W+1+Y),le=Dl(W,v);if(I={nalUnitType:"sei_rbsp",size:Y,data:ee,escapedRBSP:Ed(ee),trackId:b},le)I.pts=le.pts,I.dts=le.dts,Q=le;else if(Q)I.pts=Q.pts,I.dts=Q.dts;else{C.logs.push({level:"warn",message:"We've encountered a nal unit without data at "+W+" for trackId "+b+". See mux.js#223."});break}C.seiNals.push(I);break}return C},Iu=function(f,v,b){var x=v,C=b.defaultSampleDuration||0,I=b.defaultSampleSize||0,W=b.trackId,Y=[];return f.forEach(function(Q){var ee=Go(Q),le=ee.samples;le.forEach(function(ge){ge.duration===void 0&&(ge.duration=C),ge.size===void 0&&(ge.size=I),ge.trackId=W,ge.dts=x,ge.compositionTimeOffset===void 0&&(ge.compositionTimeOffset=0),typeof x=="bigint"?(ge.pts=x+Au.BigInt(ge.compositionTimeOffset),x+=Au.BigInt(ge.duration)):(ge.pts=x+ge.compositionTimeOffset,x+=ge.duration)}),Y=Y.concat(le)}),Y},ie=function(f,v){var b=Ss(f,["moof","traf"]),x=Ss(f,["mdat"]),C={},I=[];return x.forEach(function(W,Y){var Q=b[Y];I.push({mdat:W,traf:Q})}),I.forEach(function(W){var Y=W.mdat,Q=W.traf,ee=Ss(Q,["tfhd"]),le=Ko(ee[0]),ge=le.trackId,He=Ss(Q,["tfdt"]),Ee=He.length>0?Ac(He[0]).baseMediaDecodeTime:0,gt=Ss(Q,["trun"]),Bt,Br;v===ge&&gt.length>0&&(Bt=Iu(gt,Ee,le),Br=wd(Y,Bt,ge),C[ge]||(C[ge]={seiNals:[],logs:[]}),C[ge].seiNals=C[ge].seiNals.concat(Br.seiNals),C[ge].logs=C[ge].logs.concat(Br.logs))}),C},O=function(f,v,b){var x;if(v===null)return null;x=ie(f,v);var C=x[v]||{};return{seiNals:C.seiNals,logs:C.logs,timescale:b}},$=function(){var f=!1,v,b,x,C,I,W;this.isInitialized=function(){return f},this.init=function(Y){v=new kc,f=!0,W=Y?Y.isPartial:!1,v.on("data",function(Q){Q.startTime=Q.startPts/C,Q.endTime=Q.endPts/C,I.captions.push(Q),I.captionStreams[Q.stream]=!0}),v.on("log",function(Q){I.logs.push(Q)})},this.isNewInit=function(Y,Q){return Y&&Y.length===0||Q&&typeof Q=="object"&&Object.keys(Q).length===0?!1:x!==Y[0]||C!==Q[x]},this.parse=function(Y,Q,ee){var le;if(this.isInitialized()){if(!Q||!ee)return null;if(this.isNewInit(Q,ee))x=Q[0],C=ee[x];else if(x===null||!C)return b.push(Y),null}else return null;for(;b.length>0;){var ge=b.shift();this.parse(ge,Q,ee)}return le=O(Y,x,C),le&&le.logs&&(I.logs=I.logs.concat(le.logs)),le===null||!le.seiNals?I.logs.length?{logs:I.logs,captions:[],captionStreams:[]}:null:(this.pushNals(le.seiNals),this.flushStream(),I)},this.pushNals=function(Y){if(!this.isInitialized()||!Y||Y.length===0)return null;Y.forEach(function(Q){v.push(Q)})},this.flushStream=function(){if(!this.isInitialized())return null;W?v.partialFlush():v.flush()},this.clearParsedCaptions=function(){I.captions=[],I.captionStreams={},I.logs=[]},this.resetCaptionStream=function(){if(!this.isInitialized())return null;v.reset()},this.clearAllCaptions=function(){this.clearParsedCaptions(),this.resetCaptionStream()},this.reset=function(){b=[],x=null,C=null,I?this.clearParsedCaptions():I={captions:[],captionStreams:{},logs:[]},this.resetCaptionStream()},this.reset()},U=$,z=function(f){for(var v=0,b=String.fromCharCode(f[v]),x="";b!=="\0";)x+=b,v++,b=String.fromCharCode(f[v]);return x+=b,x},J={uint8ToCString:z},Z=J.uint8ToCString,pe=s.getUint64,ve=function(f){var v=4,b=f[0],x,C,I,W,Y,Q,ee,le;if(b===0){x=Z(f.subarray(v)),v+=x.length,C=Z(f.subarray(v)),v+=C.length;var ge=new DataView(f.buffer);I=ge.getUint32(v),v+=4,Y=ge.getUint32(v),v+=4,Q=ge.getUint32(v),v+=4,ee=ge.getUint32(v),v+=4}else if(b===1){var ge=new DataView(f.buffer);I=ge.getUint32(v),v+=4,W=pe(f.subarray(v)),v+=8,Q=ge.getUint32(v),v+=4,ee=ge.getUint32(v),v+=4,x=Z(f.subarray(v)),v+=x.length,C=Z(f.subarray(v)),v+=C.length}le=new Uint8Array(f.subarray(v,f.byteLength));var He={scheme_id_uri:x,value:C,timescale:I||1,presentation_time:W,presentation_time_delta:Y,event_duration:Q,id:ee,message_data:le};return be(b,He)?He:void 0},Ae=function(f,v,b,x){return f||f===0?f/v:x+b/v},be=function(f,v){var b=v.scheme_id_uri!=="\0",x=f===0&&De(v.presentation_time_delta)&&b,C=f===1&&De(v.presentation_time)&&b;return!(f>1)&&x||C},De=function(f){return f!==void 0||f!==null},Je={parseEmsgBox:ve,scaleTime:Ae},Et=ca.toUnsigned,Mt=ca.toHexString,Qe=po,Zt=ho,xi=Je,ln=bs,Un=Ns,Xo=qo,mo=s.getUint64,go,Yo,da,Us,di,Ha,$n,Pl=Nn,Bh=on.parseId3Frames;go=function(f){var v={},b=Qe(f,["moov","trak"]);return b.reduce(function(x,C){var I,W,Y,Q,ee;return I=Qe(C,["tkhd"])[0],!I||(W=I[0],Y=W===0?12:20,Q=Et(I[Y]<<24|I[Y+1]<<16|I[Y+2]<<8|I[Y+3]),ee=Qe(C,["mdia","mdhd"])[0],!ee)?null:(W=ee[0],Y=W===0?12:20,x[Q]=Et(ee[Y]<<24|ee[Y+1]<<16|ee[Y+2]<<8|ee[Y+3]),x)},v)},Yo=function(f,v){var b;b=Qe(v,["moof","traf"]);var x=b.reduce(function(C,I){var W=Qe(I,["tfhd"])[0],Y=Et(W[4]<<24|W[5]<<16|W[6]<<8|W[7]),Q=f[Y]||9e4,ee=Qe(I,["tfdt"])[0],le=new DataView(ee.buffer,ee.byteOffset,ee.byteLength),ge;ee[0]===1?ge=mo(ee.subarray(4,12)):ge=le.getUint32(4);let He;return typeof ge=="bigint"?He=ge/Pl.BigInt(Q):typeof ge=="number"&&!isNaN(ge)&&(He=ge/Q),He<Number.MAX_SAFE_INTEGER&&(He=Number(He)),He<C&&(C=He),C},1/0);return typeof x=="bigint"||isFinite(x)?x:0},da=function(f,v){var b=Qe(v,["moof","traf"]),x=0,C=0,I;if(b&&b.length){var W=Qe(b[0],["tfhd"])[0],Y=Qe(b[0],["trun"])[0],Q=Qe(b[0],["tfdt"])[0];if(W){var ee=ln(W);I=ee.trackId}if(Q){var le=Xo(Q);x=le.baseMediaDecodeTime}if(Y){var ge=Un(Y);ge.samples&&ge.samples.length&&(C=ge.samples[0].compositionTimeOffset||0)}}var He=f[I]||9e4;typeof x=="bigint"&&(C=Pl.BigInt(C),He=Pl.BigInt(He));var Ee=(x+C)/He;return typeof Ee=="bigint"&&Ee<Number.MAX_SAFE_INTEGER&&(Ee=Number(Ee)),Ee},Us=function(f){var v=Qe(f,["moov","trak"]),b=[];return v.forEach(function(x){var C=Qe(x,["mdia","hdlr"]),I=Qe(x,["tkhd"]);C.forEach(function(W,Y){var Q=Zt(W.subarray(8,12)),ee=I[Y],le,ge,He;Q==="vide"&&(le=new DataView(ee.buffer,ee.byteOffset,ee.byteLength),ge=le.getUint8(0),He=ge===0?le.getUint32(12):le.getUint32(20),b.push(He))})}),b},Ha=function(f){var v=f[0],b=v===0?12:20;return Et(f[b]<<24|f[b+1]<<16|f[b+2]<<8|f[b+3])},di=function(f){var v=Qe(f,["moov","trak"]),b=[];return v.forEach(function(x){var C={},I=Qe(x,["tkhd"])[0],W,Y;I&&(W=new DataView(I.buffer,I.byteOffset,I.byteLength),Y=W.getUint8(0),C.id=Y===0?W.getUint32(12):W.getUint32(20));var Q=Qe(x,["mdia","hdlr"])[0];if(Q){var ee=Zt(Q.subarray(8,12));ee==="vide"?C.type="video":ee==="soun"?C.type="audio":C.type=ee}var le=Qe(x,["mdia","minf","stbl","stsd"])[0];if(le){var ge=le.subarray(8);C.codec=Zt(ge.subarray(4,8));var He=Qe(ge,[C.codec])[0],Ee,gt;He&&(/^[asm]vc[1-9]$/i.test(C.codec)?(Ee=He.subarray(78),gt=Zt(Ee.subarray(4,8)),gt==="avcC"&&Ee.length>11?(C.codec+=".",C.codec+=Mt(Ee[9]),C.codec+=Mt(Ee[10]),C.codec+=Mt(Ee[11])):C.codec="avc1.4d400d"):/^mp4[a,v]$/i.test(C.codec)?(Ee=He.subarray(28),gt=Zt(Ee.subarray(4,8)),gt==="esds"&&Ee.length>20&&Ee[19]!==0?(C.codec+="."+Mt(Ee[19]),C.codec+="."+Mt(Ee[20]>>>2&63).replace(/^0/,"")):C.codec="mp4a.40.2"):C.codec=C.codec.toLowerCase())}var Bt=Qe(x,["mdia","mdhd"])[0];Bt&&(C.timescale=Ha(Bt)),b.push(C)}),b},$n=function(f,v=0){var b=Qe(f,["emsg"]);return b.map(x=>{var C=xi.parseEmsgBox(new Uint8Array(x)),I=Bh(C.message_data);return{cueTime:xi.scaleTime(C.presentation_time,C.timescale,C.presentation_time_delta,v),duration:xi.scaleTime(C.event_duration,C.timescale),frames:I}})};var Rl={findBox:Qe,parseType:Zt,timescale:go,startTime:Yo,compositionStartTime:da,videoTrackIds:Us,tracks:di,getTimescaleFromMediaHeader:Ha,getEmsgID3:$n},Ll=ui,Ic=function(f){var v=f[1]&31;return v<<=8,v|=f[2],v},vo=function(f){return!!(f[1]&64)},jn=function(f){var v=0;return(f[3]&48)>>>4>1&&(v+=f[4]+1),v},kd=function(f,v){var b=Ic(f);return b===0?"pat":b===v?"pmt":v?"pes":null},Ad=function(f){var v=vo(f),b=4+jn(f);return v&&(b+=f[b]+1),(f[b+10]&31)<<8|f[b+11]},Xp=function(f){var v={},b=vo(f),x=4+jn(f);if(b&&(x+=f[x]+1),!!(f[x+5]&1)){var C,I,W;C=(f[x+1]&15)<<8|f[x+2],I=3+C-4,W=(f[x+10]&15)<<8|f[x+11];for(var Y=12+W;Y<I;){var Q=x+Y;v[(f[Q+1]&31)<<8|f[Q+2]]=f[Q],Y+=((f[Q+3]&15)<<8|f[Q+4])+5}return v}},Yp=function(f,v){var b=Ic(f),x=v[b];switch(x){case Ll.H264_STREAM_TYPE:return"video";case Ll.ADTS_STREAM_TYPE:return"audio";case Ll.METADATA_STREAM_TYPE:return"timed-metadata";default:return null}},Du=function(f){var v=vo(f);if(!v)return null;var b=4+jn(f);if(b>=f.byteLength)return null;var x=null,C;return C=f[b+7],C&192&&(x={},x.pts=(f[b+9]&14)<<27|(f[b+10]&255)<<20|(f[b+11]&254)<<12|(f[b+12]&255)<<5|(f[b+13]&254)>>>3,x.pts*=4,x.pts+=(f[b+13]&6)>>>1,x.dts=x.pts,C&64&&(x.dts=(f[b+14]&14)<<27|(f[b+15]&255)<<20|(f[b+16]&254)<<12|(f[b+17]&255)<<5|(f[b+18]&254)>>>3,x.dts*=4,x.dts+=(f[b+18]&6)>>>1)),x},Pu=function(f){switch(f){case 5:return"slice_layer_without_partitioning_rbsp_idr";case 6:return"sei_rbsp";case 7:return"seq_parameter_set_rbsp";case 8:return"pic_parameter_set_rbsp";case 9:return"access_unit_delimiter_rbsp";default:return null}},Nh=function(f){for(var v=4+jn(f),b=f.subarray(v),x=0,C=0,I=!1,W;C<b.byteLength-3;C++)if(b[C+2]===1){x=C+5;break}for(;x<b.byteLength;)switch(b[x]){case 0:if(b[x-1]!==0){x+=2;break}else if(b[x-2]!==0){x++;break}C+3!==x-2&&(W=Pu(b[C+3]&31),W==="slice_layer_without_partitioning_rbsp_idr"&&(I=!0));do x++;while(b[x]!==1&&x<b.length);C=x-2,x+=3;break;case 1:if(b[x-1]!==0||b[x-2]!==0){x+=3;break}W=Pu(b[C+3]&31),W==="slice_layer_without_partitioning_rbsp_idr"&&(I=!0),C=x-2,x+=3;break;default:x+=3;break}return b=b.subarray(C),x-=C,C=0,b&&b.byteLength>3&&(W=Pu(b[C+3]&31),W==="slice_layer_without_partitioning_rbsp_idr"&&(I=!0)),I},Uh={parseType:kd,parsePat:Ad,parsePmt:Xp,parsePayloadUnitStartIndicator:vo,parsePesType:Yp,parsePesTime:Du,videoPacketContainsKeyFrame:Nh},hi=ui,ns=we.handleRollover,er={};er.ts=Uh,er.aac=Fs;var un=$t.ONE_SECOND_IN_TS,ii=188,Oi=71,Ru=function(f,v){for(var b=0,x=ii,C,I;x<f.byteLength;){if(f[b]===Oi&&f[x]===Oi){switch(C=f.subarray(b,x),I=er.ts.parseType(C,v.pid),I){case"pat":v.pid=er.ts.parsePat(C);break;case"pmt":var W=er.ts.parsePmt(C);v.table=v.table||{},Object.keys(W).forEach(function(Y){v.table[Y]=W[Y]});break}b+=ii,x+=ii;continue}b++,x++}},Ol=function(f,v,b){for(var x=0,C=ii,I,W,Y,Q,ee,le=!1;C<=f.byteLength;){if(f[x]===Oi&&(f[C]===Oi||C===f.byteLength)){switch(I=f.subarray(x,C),W=er.ts.parseType(I,v.pid),W){case"pes":Y=er.ts.parsePesType(I,v.table),Q=er.ts.parsePayloadUnitStartIndicator(I),Y==="audio"&&Q&&(ee=er.ts.parsePesTime(I),ee&&(ee.type="audio",b.audio.push(ee),le=!0));break}if(le)break;x+=ii,C+=ii;continue}x++,C++}for(C=f.byteLength,x=C-ii,le=!1;x>=0;){if(f[x]===Oi&&(f[C]===Oi||C===f.byteLength)){switch(I=f.subarray(x,C),W=er.ts.parseType(I,v.pid),W){case"pes":Y=er.ts.parsePesType(I,v.table),Q=er.ts.parsePayloadUnitStartIndicator(I),Y==="audio"&&Q&&(ee=er.ts.parsePesTime(I),ee&&(ee.type="audio",b.audio.push(ee),le=!0));break}if(le)break;x-=ii,C-=ii;continue}x--,C--}},Ml=function(f,v,b){for(var x=0,C=ii,I,W,Y,Q,ee,le,ge,He,Ee=!1,gt={data:[],size:0};C<f.byteLength;){if(f[x]===Oi&&f[C]===Oi){switch(I=f.subarray(x,C),W=er.ts.parseType(I,v.pid),W){case"pes":if(Y=er.ts.parsePesType(I,v.table),Q=er.ts.parsePayloadUnitStartIndicator(I),Y==="video"&&(Q&&!Ee&&(ee=er.ts.parsePesTime(I),ee&&(ee.type="video",b.video.push(ee),Ee=!0)),!b.firstKeyFrame)){if(Q&&gt.size!==0){for(le=new Uint8Array(gt.size),ge=0;gt.data.length;)He=gt.data.shift(),le.set(He,ge),ge+=He.byteLength;if(er.ts.videoPacketContainsKeyFrame(le)){var Bt=er.ts.parsePesTime(le);Bt?(b.firstKeyFrame=Bt,b.firstKeyFrame.type="video"):console.warn("Failed to extract PTS/DTS from PES at first keyframe. This could be an unusual TS segment, or else mux.js did not parse your TS segment correctly. If you know your TS segments do contain PTS/DTS on keyframes please file a bug report! You can try ffprobe to double check for yourself.")}gt.size=0}gt.data.push(I),gt.size+=I.byteLength}break}if(Ee&&b.firstKeyFrame)break;x+=ii,C+=ii;continue}x++,C++}for(C=f.byteLength,x=C-ii,Ee=!1;x>=0;){if(f[x]===Oi&&f[C]===Oi){switch(I=f.subarray(x,C),W=er.ts.parseType(I,v.pid),W){case"pes":Y=er.ts.parsePesType(I,v.table),Q=er.ts.parsePayloadUnitStartIndicator(I),Y==="video"&&Q&&(ee=er.ts.parsePesTime(I),ee&&(ee.type="video",b.video.push(ee),Ee=!0));break}if(Ee)break;x-=ii,C-=ii;continue}x--,C--}},$h=function(f,v){if(f.audio&&f.audio.length){var b=v;(typeof b>"u"||isNaN(b))&&(b=f.audio[0].dts),f.audio.forEach(function(I){I.dts=ns(I.dts,b),I.pts=ns(I.pts,b),I.dtsTime=I.dts/un,I.ptsTime=I.pts/un})}if(f.video&&f.video.length){var x=v;if((typeof x>"u"||isNaN(x))&&(x=f.video[0].dts),f.video.forEach(function(I){I.dts=ns(I.dts,x),I.pts=ns(I.pts,x),I.dtsTime=I.dts/un,I.ptsTime=I.pts/un}),f.firstKeyFrame){var C=f.firstKeyFrame;C.dts=ns(C.dts,x),C.pts=ns(C.pts,x),C.dtsTime=C.dts/un,C.ptsTime=C.pts/un}}},Qp=function(f){for(var v=!1,b=0,x=null,C=null,I=0,W=0,Y;f.length-W>=3;){var Q=er.aac.parseType(f,W);switch(Q){case"timed-metadata":if(f.length-W<10){v=!0;break}if(I=er.aac.parseId3TagSize(f,W),I>f.length){v=!0;break}C===null&&(Y=f.subarray(W,W+I),C=er.aac.parseAacTimestamp(Y)),W+=I;break;case"audio":if(f.length-W<7){v=!0;break}if(I=er.aac.parseAdtsSize(f,W),I>f.length){v=!0;break}x===null&&(Y=f.subarray(W,W+I),x=er.aac.parseSampleRate(Y)),b++,W+=I;break;default:W++;break}if(v)return null}if(x===null||C===null)return null;var ee=un/x,le={audio:[{type:"audio",dts:C,pts:C},{type:"audio",dts:C+b*1024*ee,pts:C+b*1024*ee}]};return le},Jp=function(f){var v={pid:null,table:null},b={};Ru(f,v);for(var x in v.table)if(v.table.hasOwnProperty(x)){var C=v.table[x];switch(C){case hi.H264_STREAM_TYPE:b.video=[],Ml(f,v,b),b.video.length===0&&delete b.video;break;case hi.ADTS_STREAM_TYPE:b.audio=[],Ol(f,v,b),b.audio.length===0&&delete b.audio;break}}return b},jh=function(f,v){var b=er.aac.isLikelyAacData(f),x;return b?x=Qp(f):x=Jp(f),!x||!x.audio&&!x.video?null:($h(x,v),x)},Dc={inspect:jh,parseAudioPes_:Ol};const Pc=function(f,v){v.on("data",function(b){const x=b.initSegment;b.initSegment={data:x.buffer,byteOffset:x.byteOffset,byteLength:x.byteLength};const C=b.data;b.data=C.buffer,f.postMessage({action:"data",segment:b,byteOffset:C.byteOffset,byteLength:C.byteLength},[b.data])}),v.on("done",function(b){f.postMessage({action:"done"})}),v.on("gopInfo",function(b){f.postMessage({action:"gopInfo",gopInfo:b})}),v.on("videoSegmentTimingInfo",function(b){const x={start:{decode:$t.videoTsToSeconds(b.start.dts),presentation:$t.videoTsToSeconds(b.start.pts)},end:{decode:$t.videoTsToSeconds(b.end.dts),presentation:$t.videoTsToSeconds(b.end.pts)},baseMediaDecodeTime:$t.videoTsToSeconds(b.baseMediaDecodeTime)};b.prependedContentDuration&&(x.prependedContentDuration=$t.videoTsToSeconds(b.prependedContentDuration)),f.postMessage({action:"videoSegmentTimingInfo",videoSegmentTimingInfo:x})}),v.on("audioSegmentTimingInfo",function(b){const x={start:{decode:$t.videoTsToSeconds(b.start.dts),presentation:$t.videoTsToSeconds(b.start.pts)},end:{decode:$t.videoTsToSeconds(b.end.dts),presentation:$t.videoTsToSeconds(b.end.pts)},baseMediaDecodeTime:$t.videoTsToSeconds(b.baseMediaDecodeTime)};b.prependedContentDuration&&(x.prependedContentDuration=$t.videoTsToSeconds(b.prependedContentDuration)),f.postMessage({action:"audioSegmentTimingInfo",audioSegmentTimingInfo:x})}),v.on("id3Frame",function(b){f.postMessage({action:"id3Frame",id3Frame:b})}),v.on("caption",function(b){f.postMessage({action:"caption",caption:b})}),v.on("trackinfo",function(b){f.postMessage({action:"trackinfo",trackInfo:b})}),v.on("audioTimingInfo",function(b){f.postMessage({action:"audioTimingInfo",audioTimingInfo:{start:$t.videoTsToSeconds(b.start),end:$t.videoTsToSeconds(b.end)}})}),v.on("videoTimingInfo",function(b){f.postMessage({action:"videoTimingInfo",videoTimingInfo:{start:$t.videoTsToSeconds(b.start),end:$t.videoTsToSeconds(b.end)}})}),v.on("log",function(b){f.postMessage({action:"log",log:b})})};class Lu{constructor(v,b){this.options=b||{},this.self=v,this.init()}init(){this.transmuxer&&this.transmuxer.dispose(),this.transmuxer=new Tc.Transmuxer(this.options),Pc(this.self,this.transmuxer)}pushMp4Captions(v){this.captionParser||(this.captionParser=new U,this.captionParser.init());const b=new Uint8Array(v.data,v.byteOffset,v.byteLength),x=this.captionParser.parse(b,v.trackIds,v.timescales);this.self.postMessage({action:"mp4Captions",captions:x&&x.captions||[],logs:x&&x.logs||[],data:b.buffer},[b.buffer])}probeMp4StartTime({timescales:v,data:b}){const x=Rl.startTime(v,b);this.self.postMessage({action:"probeMp4StartTime",startTime:x,data:b},[b.buffer])}probeMp4Tracks({data:v}){const b=Rl.tracks(v);this.self.postMessage({action:"probeMp4Tracks",tracks:b,data:v},[v.buffer])}probeEmsgID3({data:v,offset:b}){const x=Rl.getEmsgID3(v,b);this.self.postMessage({action:"probeEmsgID3",id3Frames:x,emsgData:v},[v.buffer])}probeTs({data:v,baseStartTime:b}){const x=typeof b=="number"&&!isNaN(b)?b*$t.ONE_SECOND_IN_TS:void 0,C=Dc.inspect(v,x);let I=null;C&&(I={hasVideo:C.video&&C.video.length===2||!1,hasAudio:C.audio&&C.audio.length===2||!1},I.hasVideo&&(I.videoStart=C.video[0].ptsTime),I.hasAudio&&(I.audioStart=C.audio[0].ptsTime)),this.self.postMessage({action:"probeTs",result:I,data:v},[v.buffer])}clearAllMp4Captions(){this.captionParser&&this.captionParser.clearAllCaptions()}clearParsedMp4Captions(){this.captionParser&&this.captionParser.clearParsedCaptions()}push(v){const b=new Uint8Array(v.data,v.byteOffset,v.byteLength);this.transmuxer.push(b)}reset(){this.transmuxer.reset()}setTimestampOffset(v){const b=v.timestampOffset||0;this.transmuxer.setBaseMediaDecodeTime(Math.round($t.secondsToVideoTs(b)))}setAudioAppendStart(v){this.transmuxer.setAudioAppendStart(Math.ceil($t.secondsToVideoTs(v.appendStart)))}setRemux(v){this.transmuxer.setRemux(v.remux)}flush(v){this.transmuxer.flush(),self.postMessage({action:"done",type:"transmuxed"})}endTimeline(){this.transmuxer.endTimeline(),self.postMessage({action:"endedtimeline",type:"transmuxed"})}alignGopsWith(v){this.transmuxer.alignGopsWith(v.gopsToAlignWith.slice())}}self.onmessage=function(f){if(f.data.action==="init"&&f.data.options){this.messageHandlers=new Lu(self,f.data.options);return}this.messageHandlers||(this.messageHandlers=new Lu(self)),f.data&&f.data.action&&f.data.action!=="init"&&this.messageHandlers[f.data.action]&&this.messageHandlers[f.data.action](f.data)}}));var Ole=V5(Lle);const Mle=(i,e,t)=>{const{type:r,initSegment:n,captions:s,captionStreams:a,metadata:o,videoFrameDtsTime:l,videoFramePtsTime:u}=i.data.segment;e.buffer.push({captions:s,captionStreams:a,metadata:o});const c=i.data.segment.boxes||{data:i.data.segment.data},h={type:r,data:new Uint8Array(c.data,c.data.byteOffset,c.data.byteLength),initSegment:new Uint8Array(n.data,n.byteOffset,n.byteLength)};typeof l<"u"&&(h.videoFrameDtsTime=l),typeof u<"u"&&(h.videoFramePtsTime=u),t(h)},Fle=({transmuxedData:i,callback:e})=>{i.buffer=[],e(i)},Ble=(i,e)=>{e.gopInfo=i.data.gopInfo},G5=i=>{const{transmuxer:e,bytes:t,audioAppendStart:r,gopsToAlignWith:n,remux:s,onData:a,onTrackInfo:o,onAudioTimingInfo:l,onVideoTimingInfo:u,onVideoSegmentTimingInfo:c,onAudioSegmentTimingInfo:h,onId3:m,onCaptions:g,onDone:y,onEndedTimeline:_,onTransmuxerLog:T,isEndOfTimeline:E,segment:w,triggerSegmentEventFn:D}=i,R={buffer:[]};let A=E;const L=B=>{e.currentTransmux===i&&(B.data.action==="data"&&Mle(B,R,a),B.data.action==="trackinfo"&&o(B.data.trackInfo),B.data.action==="gopInfo"&&Ble(B,R),B.data.action==="audioTimingInfo"&&l(B.data.audioTimingInfo),B.data.action==="videoTimingInfo"&&u(B.data.videoTimingInfo),B.data.action==="videoSegmentTimingInfo"&&c(B.data.videoSegmentTimingInfo),B.data.action==="audioSegmentTimingInfo"&&h(B.data.audioSegmentTimingInfo),B.data.action==="id3Frame"&&m([B.data.id3Frame],B.data.id3Frame.dispatchType),B.data.action==="caption"&&g(B.data.caption),B.data.action==="endedtimeline"&&(A=!1,_()),B.data.action==="log"&&T(B.data.log),B.data.type==="transmuxed"&&(A||(e.onmessage=null,Fle({transmuxedData:R,callback:y}),K5(e))))},F=()=>{const B={message:"Received an error message from the transmuxer worker",metadata:{errorType:_e.Error.StreamingFailedToTransmuxSegment,segmentInfo:th({segment:w})}};y(null,B)};if(e.onmessage=L,e.onerror=F,r&&e.postMessage({action:"setAudioAppendStart",appendStart:r}),Array.isArray(n)&&e.postMessage({action:"alignGopsWith",gopsToAlignWith:n}),typeof s<"u"&&e.postMessage({action:"setRemux",remux:s}),t.byteLength){const B=t instanceof ArrayBuffer?t:t.buffer,M=t instanceof ArrayBuffer?0:t.byteOffset;D({type:"segmenttransmuxingstart",segment:w}),e.postMessage({action:"push",data:B,byteOffset:M,byteLength:t.byteLength},[B])}E&&e.postMessage({action:"endTimeline"}),e.postMessage({action:"flush"})},K5=i=>{i.currentTransmux=null,i.transmuxQueue.length&&(i.currentTransmux=i.transmuxQueue.shift(),typeof i.currentTransmux=="function"?i.currentTransmux():G5(i.currentTransmux))},UO=(i,e)=>{i.postMessage({action:e}),K5(i)},X5=(i,e)=>{if(!e.currentTransmux){e.currentTransmux=i,UO(e,i);return}e.transmuxQueue.push(UO.bind(null,e,i))},Nle=i=>{X5("reset",i)},Ule=i=>{X5("endTimeline",i)},Y5=i=>{if(!i.transmuxer.currentTransmux){i.transmuxer.currentTransmux=i,G5(i);return}i.transmuxer.transmuxQueue.push(i)},$le=i=>{const e=new Ole;e.currentTransmux=null,e.transmuxQueue=[];const t=e.terminate;return e.terminate=()=>(e.currentTransmux=null,e.transmuxQueue.length=0,t.call(e)),e.postMessage({action:"init",options:i}),e};var n1={reset:Nle,endTimeline:Ule,transmux:Y5,createTransmuxer:$le};const d0=function(i){const e=i.transmuxer,t=i.endAction||i.action,r=i.callback,n=Jt({},i,{endAction:null,transmuxer:null,callback:null}),s=a=>{a.data.action===t&&(e.removeEventListener("message",s),a.data.data&&(a.data.data=new Uint8Array(a.data.data,i.byteOffset||0,i.byteLength||a.data.data.byteLength),i.data&&(i.data=a.data.data)),r(a.data))};if(e.addEventListener("message",s),i.data){const a=i.data instanceof ArrayBuffer;n.byteOffset=a?0:i.data.byteOffset,n.byteLength=i.data.byteLength;const o=[a?i.data:i.data.buffer];e.postMessage(n,o)}else e.postMessage(n)},ru={FAILURE:2,TIMEOUT:-101,ABORTED:-102},ZC=i=>{i.forEach(e=>{e.abort()})},jle=i=>({bandwidth:i.bandwidth,bytesReceived:i.bytesReceived||0,roundTripTime:i.roundTripTime||0}),zle=i=>{const e=i.target,r={bandwidth:1/0,bytesReceived:0,roundTripTime:Date.now()-e.requestTime||0};return r.bytesReceived=i.loaded,r.bandwidth=Math.floor(r.bytesReceived/r.roundTripTime*8*1e3),r},I2=(i,e)=>{const{requestType:t}=e,r=yh({requestType:t,request:e,error:i});return e.timedout?{status:e.status,message:"HLS request timed-out at URL: "+e.uri,code:ru.TIMEOUT,xhr:e,metadata:r}:e.aborted?{status:e.status,message:"HLS request aborted at URL: "+e.uri,code:ru.ABORTED,xhr:e,metadata:r}:i?{status:e.status,message:"HLS request errored at URL: "+e.uri,code:ru.FAILURE,xhr:e,metadata:r}:e.responseType==="arraybuffer"&&e.response.byteLength===0?{status:e.status,message:"Empty HLS response at URL: "+e.uri,code:ru.FAILURE,xhr:e,metadata:r}:null},$O=(i,e,t,r)=>(n,s)=>{const a=s.response,o=I2(n,s);if(o)return t(o,i);if(a.byteLength!==16)return t({status:s.status,message:"Invalid HLS key at URL: "+s.uri,code:ru.FAILURE,xhr:s},i);const l=new DataView(a),u=new Uint32Array([l.getUint32(0),l.getUint32(4),l.getUint32(8),l.getUint32(12)]);for(let h=0;h<e.length;h++)e[h].bytes=u;const c={uri:s.uri};return r({type:"segmentkeyloadcomplete",segment:i,keyInfo:c}),t(null,i)},Q5=(i,e)=>{const t=Pp(i.map.bytes);if(t!=="mp4"){const r=i.map.resolvedUri||i.map.uri,n=t||"unknown";return e({internal:!0,message:`Found unsupported ${n} container for initialization segment at URL: ${r}`,code:ru.FAILURE,metadata:{mediaType:n}})}d0({action:"probeMp4Tracks",data:i.map.bytes,transmuxer:i.transmuxer,callback:({tracks:r,data:n})=>(i.map.bytes=n,r.forEach(function(s){i.map.tracks=i.map.tracks||{},!i.map.tracks[s.type]&&(i.map.tracks[s.type]=s,typeof s.id=="number"&&s.timescale&&(i.map.timescales=i.map.timescales||{},i.map.timescales[s.id]=s.timescale))}),e(null))})},Hle=({segment:i,finishProcessingFn:e,triggerSegmentEventFn:t})=>(r,n)=>{const s=I2(r,n);if(s)return e(s,i);const a=new Uint8Array(n.response);if(t({type:"segmentloaded",segment:i}),i.map.key)return i.map.encryptedBytes=a,e(null,i);i.map.bytes=a,Q5(i,function(o){if(o)return o.xhr=n,o.status=n.status,e(o,i);e(null,i)})},Vle=({segment:i,finishProcessingFn:e,responseType:t,triggerSegmentEventFn:r})=>(n,s)=>{const a=I2(n,s);if(a)return e(a,i);r({type:"segmentloaded",segment:i});const o=t==="arraybuffer"||!s.responseText?s.response:Ple(s.responseText.substring(i.lastReachedChar||0));return i.stats=jle(s),i.key?i.encryptedBytes=new Uint8Array(o):i.bytes=new Uint8Array(o),e(null,i)},qle=({segment:i,bytes:e,trackInfoFn:t,timingInfoFn:r,videoSegmentTimingInfoFn:n,audioSegmentTimingInfoFn:s,id3Fn:a,captionsFn:o,isEndOfTimeline:l,endedTimelineFn:u,dataFn:c,doneFn:h,onTransmuxerLog:m,triggerSegmentEventFn:g})=>{const y=i.map&&i.map.tracks||{},_=!!(y.audio&&y.video);let T=r.bind(null,i,"audio","start");const E=r.bind(null,i,"audio","end");let w=r.bind(null,i,"video","start");const D=r.bind(null,i,"video","end"),R=()=>Y5({bytes:e,transmuxer:i.transmuxer,audioAppendStart:i.audioAppendStart,gopsToAlignWith:i.gopsToAlignWith,remux:_,onData:A=>{A.type=A.type==="combined"?"video":A.type,c(i,A)},onTrackInfo:A=>{t&&(_&&(A.isMuxed=!0),t(i,A))},onAudioTimingInfo:A=>{T&&typeof A.start<"u"&&(T(A.start),T=null),E&&typeof A.end<"u"&&E(A.end)},onVideoTimingInfo:A=>{w&&typeof A.start<"u"&&(w(A.start),w=null),D&&typeof A.end<"u"&&D(A.end)},onVideoSegmentTimingInfo:A=>{const L={pts:{start:A.start.presentation,end:A.end.presentation},dts:{start:A.start.decode,end:A.end.decode}};g({type:"segmenttransmuxingtiminginfoavailable",segment:i,timingInfo:L}),n(A)},onAudioSegmentTimingInfo:A=>{const L={pts:{start:A.start.pts,end:A.end.pts},dts:{start:A.start.dts,end:A.end.dts}};g({type:"segmenttransmuxingtiminginfoavailable",segment:i,timingInfo:L}),s(A)},onId3:(A,L)=>{a(i,A,L)},onCaptions:A=>{o(i,[A])},isEndOfTimeline:l,onEndedTimeline:()=>{u()},onTransmuxerLog:m,onDone:(A,L)=>{h&&(A.type=A.type==="combined"?"video":A.type,g({type:"segmenttransmuxingcomplete",segment:i}),h(L,i,A))},segment:i,triggerSegmentEventFn:g});d0({action:"probeTs",transmuxer:i.transmuxer,data:e,baseStartTime:i.baseStartTime,callback:A=>{i.bytes=e=A.data;const L=A.result;L&&(t(i,{hasAudio:L.hasAudio,hasVideo:L.hasVideo,isMuxed:_}),t=null),R()}})},J5=({segment:i,bytes:e,trackInfoFn:t,timingInfoFn:r,videoSegmentTimingInfoFn:n,audioSegmentTimingInfoFn:s,id3Fn:a,captionsFn:o,isEndOfTimeline:l,endedTimelineFn:u,dataFn:c,doneFn:h,onTransmuxerLog:m,triggerSegmentEventFn:g})=>{let y=new Uint8Array(e);if(Q8(y)){i.isFmp4=!0;const{tracks:_}=i.map,T={isFmp4:!0,hasVideo:!!_.video,hasAudio:!!_.audio};_.audio&&_.audio.codec&&_.audio.codec!=="enca"&&(T.audioCodec=_.audio.codec),_.video&&_.video.codec&&_.video.codec!=="encv"&&(T.videoCodec=_.video.codec),_.video&&_.audio&&(T.isMuxed=!0),t(i,T);const E=(w,D)=>{c(i,{data:y,type:T.hasAudio&&!T.isMuxed?"audio":"video"}),D&&D.length&&a(i,D),w&&w.length&&o(i,w),h(null,i,{})};d0({action:"probeMp4StartTime",timescales:i.map.timescales,data:y,transmuxer:i.transmuxer,callback:({data:w,startTime:D})=>{e=w.buffer,i.bytes=y=w,T.hasAudio&&!T.isMuxed&&r(i,"audio","start",D),T.hasVideo&&r(i,"video","start",D),d0({action:"probeEmsgID3",data:y,transmuxer:i.transmuxer,offset:D,callback:({emsgData:R,id3Frames:A})=>{if(e=R.buffer,i.bytes=y=R,!_.video||!R.byteLength||!i.transmuxer){E(void 0,A);return}d0({action:"pushMp4Captions",endAction:"mp4Captions",transmuxer:i.transmuxer,data:y,timescales:i.map.timescales,trackIds:[_.video.id],callback:L=>{e=L.data.buffer,i.bytes=y=L.data,L.logs.forEach(function(F){m(_i(F,{stream:"mp4CaptionParser"}))}),E(L.captions,A)}})}})}});return}if(!i.transmuxer){h(null,i,{});return}if(typeof i.container>"u"&&(i.container=Pp(y)),i.container!=="ts"&&i.container!=="aac"){t(i,{hasAudio:!1,hasVideo:!1}),h(null,i,{});return}qle({segment:i,bytes:e,trackInfoFn:t,timingInfoFn:r,videoSegmentTimingInfoFn:n,audioSegmentTimingInfoFn:s,id3Fn:a,captionsFn:o,isEndOfTimeline:l,endedTimelineFn:u,dataFn:c,doneFn:h,onTransmuxerLog:m,triggerSegmentEventFn:g})},Z5=function({id:i,key:e,encryptedBytes:t,decryptionWorker:r,segment:n,doneFn:s},a){const o=u=>{if(u.data.source===i){r.removeEventListener("message",o);const c=u.data.decrypted;a(new Uint8Array(c.bytes,c.byteOffset,c.byteLength))}};r.onerror=()=>{const u="An error occurred in the decryption worker",c=th({segment:n}),h={message:u,metadata:{error:new Error(u),errorType:_e.Error.StreamingFailedToDecryptSegment,segmentInfo:c,keyInfo:{uri:n.key.resolvedUri||n.map.key.resolvedUri}}};s(h,n)},r.addEventListener("message",o);let l;e.bytes.slice?l=e.bytes.slice():l=new Uint32Array(Array.prototype.slice.call(e.bytes)),r.postMessage(N5({source:i,encrypted:t,key:l,iv:e.iv}),[t.buffer,l.buffer])},Wle=({decryptionWorker:i,segment:e,trackInfoFn:t,timingInfoFn:r,videoSegmentTimingInfoFn:n,audioSegmentTimingInfoFn:s,id3Fn:a,captionsFn:o,isEndOfTimeline:l,endedTimelineFn:u,dataFn:c,doneFn:h,onTransmuxerLog:m,triggerSegmentEventFn:g})=>{g({type:"segmentdecryptionstart"}),Z5({id:e.requestId,key:e.key,encryptedBytes:e.encryptedBytes,decryptionWorker:i,segment:e,doneFn:h},y=>{e.bytes=y,g({type:"segmentdecryptioncomplete",segment:e}),J5({segment:e,bytes:e.bytes,trackInfoFn:t,timingInfoFn:r,videoSegmentTimingInfoFn:n,audioSegmentTimingInfoFn:s,id3Fn:a,captionsFn:o,isEndOfTimeline:l,endedTimelineFn:u,dataFn:c,doneFn:h,onTransmuxerLog:m,triggerSegmentEventFn:g})})},Gle=({activeXhrs:i,decryptionWorker:e,trackInfoFn:t,timingInfoFn:r,videoSegmentTimingInfoFn:n,audioSegmentTimingInfoFn:s,id3Fn:a,captionsFn:o,isEndOfTimeline:l,endedTimelineFn:u,dataFn:c,doneFn:h,onTransmuxerLog:m,triggerSegmentEventFn:g})=>{let y=0,_=!1;return(T,E)=>{if(!_){if(T)return _=!0,ZC(i),h(T,E);if(y+=1,y===i.length){const w=function(){if(E.encryptedBytes)return Wle({decryptionWorker:e,segment:E,trackInfoFn:t,timingInfoFn:r,videoSegmentTimingInfoFn:n,audioSegmentTimingInfoFn:s,id3Fn:a,captionsFn:o,isEndOfTimeline:l,endedTimelineFn:u,dataFn:c,doneFn:h,onTransmuxerLog:m,triggerSegmentEventFn:g});J5({segment:E,bytes:E.bytes,trackInfoFn:t,timingInfoFn:r,videoSegmentTimingInfoFn:n,audioSegmentTimingInfoFn:s,id3Fn:a,captionsFn:o,isEndOfTimeline:l,endedTimelineFn:u,dataFn:c,doneFn:h,onTransmuxerLog:m,triggerSegmentEventFn:g})};if(E.endOfAllRequests=Date.now(),E.map&&E.map.encryptedBytes&&!E.map.bytes)return g({type:"segmentdecryptionstart",segment:E}),Z5({decryptionWorker:e,id:E.requestId+"-init",encryptedBytes:E.map.encryptedBytes,key:E.map.key,segment:E,doneFn:h},D=>{E.map.bytes=D,g({type:"segmentdecryptioncomplete",segment:E}),Q5(E,R=>{if(R)return ZC(i),h(R,E);w()})});w()}}}},Kle=({loadendState:i,abortFn:e})=>t=>{t.target.aborted&&e&&!i.calledAbortFn&&(e(),i.calledAbortFn=!0)},Xle=({segment:i,progressFn:e,trackInfoFn:t,timingInfoFn:r,videoSegmentTimingInfoFn:n,audioSegmentTimingInfoFn:s,id3Fn:a,captionsFn:o,isEndOfTimeline:l,endedTimelineFn:u,dataFn:c})=>h=>{if(!h.target.aborted)return i.stats=_i(i.stats,zle(h)),!i.stats.firstBytesReceivedAt&&i.stats.bytesReceived&&(i.stats.firstBytesReceivedAt=Date.now()),e(h,i)},Yle=({xhr:i,xhrOptions:e,decryptionWorker:t,segment:r,abortFn:n,progressFn:s,trackInfoFn:a,timingInfoFn:o,videoSegmentTimingInfoFn:l,audioSegmentTimingInfoFn:u,id3Fn:c,captionsFn:h,isEndOfTimeline:m,endedTimelineFn:g,dataFn:y,doneFn:_,onTransmuxerLog:T,triggerSegmentEventFn:E})=>{const w=[],D=Gle({activeXhrs:w,decryptionWorker:t,trackInfoFn:a,timingInfoFn:o,videoSegmentTimingInfoFn:l,audioSegmentTimingInfoFn:u,id3Fn:c,captionsFn:h,isEndOfTimeline:m,endedTimelineFn:g,dataFn:y,doneFn:_,onTransmuxerLog:T,triggerSegmentEventFn:E});if(r.key&&!r.key.bytes){const B=[r.key];r.map&&!r.map.bytes&&r.map.key&&r.map.key.resolvedUri===r.key.resolvedUri&&B.push(r.map.key);const M=_i(e,{uri:r.key.resolvedUri,responseType:"arraybuffer",requestType:"segment-key"}),k=$O(r,B,D,E),q={uri:r.key.resolvedUri};E({type:"segmentkeyloadstart",segment:r,keyInfo:q});const G=i(M,k);w.push(G)}if(r.map&&!r.map.bytes){if(r.map.key&&(!r.key||r.key.resolvedUri!==r.map.key.resolvedUri)){const G=_i(e,{uri:r.map.key.resolvedUri,responseType:"arraybuffer",requestType:"segment-key"}),H=$O(r,[r.map.key],D,E),re={uri:r.map.key.resolvedUri};E({type:"segmentkeyloadstart",segment:r,keyInfo:re});const se=i(G,H);w.push(se)}const M=_i(e,{uri:r.map.resolvedUri,responseType:"arraybuffer",headers:QC(r.map),requestType:"segment-media-initialization"}),k=Hle({segment:r,finishProcessingFn:D,triggerSegmentEventFn:E});E({type:"segmentloadstart",segment:r});const q=i(M,k);w.push(q)}const R=_i(e,{uri:r.part&&r.part.resolvedUri||r.resolvedUri,responseType:"arraybuffer",headers:QC(r),requestType:"segment"}),A=Vle({segment:r,finishProcessingFn:D,responseType:R.responseType,triggerSegmentEventFn:E});E({type:"segmentloadstart",segment:r});const L=i(R,A);L.addEventListener("progress",Xle({segment:r,progressFn:s,trackInfoFn:a,timingInfoFn:o,videoSegmentTimingInfoFn:l,audioSegmentTimingInfoFn:u,id3Fn:c,captionsFn:h,isEndOfTimeline:m,endedTimelineFn:g,dataFn:y})),w.push(L);const F={};return w.forEach(B=>{B.addEventListener("loadend",Kle({loadendState:F,abortFn:n}))}),()=>ZC(w)},Qle=$o("CodecUtils"),Jle=function(i){const e=i.attributes||{};if(e.CODECS)return Rn(e.CODECS)},e6=(i,e)=>{const t=e.attributes||{};return i&&i.mediaGroups&&i.mediaGroups.AUDIO&&t.AUDIO&&i.mediaGroups.AUDIO[t.AUDIO]},Zle=(i,e)=>{if(!e6(i,e))return!0;const t=e.attributes||{},r=i.mediaGroups.AUDIO[t.AUDIO];for(const n in r)if(!r[n].uri&&!r[n].playlists)return!0;return!1},j_=function(i){const e={};return i.forEach(({mediaType:t,type:r,details:n})=>{e[t]=e[t]||[],e[t].push($w(`${r}${n}`))}),Object.keys(e).forEach(function(t){if(e[t].length>1){Qle(`multiple ${t} codecs found as attributes: ${e[t].join(", ")}. Setting playlist codecs to null so that we wait for mux.js to probe segments for real codecs.`),e[t]=null;return}e[t]=e[t][0]}),e},jO=function(i){let e=0;return i.audio&&e++,i.video&&e++,e},h0=function(i,e){const t=e.attributes||{},r=j_(Jle(e)||[]);if(e6(i,e)&&!r.audio&&!Zle(i,e)){const n=j_(F8(i,t.AUDIO)||[]);n.audio&&(r.audio=n.audio)}return r},Sv=$o("PlaylistSelector"),zO=function(i){if(!i||!i.playlist)return;const e=i.playlist;return JSON.stringify({id:e.id,bandwidth:i.bandwidth,width:i.width,height:i.height,codecs:e.attributes&&e.attributes.CODECS||""})},z_=function(i,e){if(!i)return"";const t=X.getComputedStyle(i);return t?t[e]:""},Yf=function(i,e){const t=i.slice();i.sort(function(r,n){const s=e(r,n);return s===0?t.indexOf(r)-t.indexOf(n):s})},D2=function(i,e){let t,r;return i.attributes.BANDWIDTH&&(t=i.attributes.BANDWIDTH),t=t||X.Number.MAX_VALUE,e.attributes.BANDWIDTH&&(r=e.attributes.BANDWIDTH),r=r||X.Number.MAX_VALUE,t-r},eue=function(i,e){let t,r;return i.attributes.RESOLUTION&&i.attributes.RESOLUTION.width&&(t=i.attributes.RESOLUTION.width),t=t||X.Number.MAX_VALUE,e.attributes.RESOLUTION&&e.attributes.RESOLUTION.width&&(r=e.attributes.RESOLUTION.width),r=r||X.Number.MAX_VALUE,t===r&&i.attributes.BANDWIDTH&&e.attributes.BANDWIDTH?i.attributes.BANDWIDTH-e.attributes.BANDWIDTH:t-r};let t6=function(i,e,t,r,n,s){if(!i)return;const a={bandwidth:e,width:t,height:r,limitRenditionByPlayerDimensions:n};let o=i.playlists;wa.isAudioOnly(i)&&(o=s.getAudioTrackPlaylists_(),a.audioOnly=!0);let l=o.map(A=>{let L;const F=A.attributes&&A.attributes.RESOLUTION&&A.attributes.RESOLUTION.width,B=A.attributes&&A.attributes.RESOLUTION&&A.attributes.RESOLUTION.height;return L=A.attributes&&A.attributes.BANDWIDTH,L=L||X.Number.MAX_VALUE,{bandwidth:L,width:F,height:B,playlist:A}});Yf(l,(A,L)=>A.bandwidth-L.bandwidth),l=l.filter(A=>!wa.isIncompatible(A.playlist));let u=l.filter(A=>wa.isEnabled(A.playlist));u.length||(u=l.filter(A=>!wa.isDisabled(A.playlist)));const c=u.filter(A=>A.bandwidth*Wn.BANDWIDTH_VARIANCE<e);let h=c[c.length-1];const m=c.filter(A=>A.bandwidth===h.bandwidth)[0];if(n===!1){const A=m||u[0]||l[0];if(A&&A.playlist){let L="sortedPlaylistReps";return m&&(L="bandwidthBestRep"),u[0]&&(L="enabledPlaylistReps"),Sv(`choosing ${zO(A)} using ${L} with options`,a),A.playlist}return Sv("could not choose a playlist with options",a),null}const g=c.filter(A=>A.width&&A.height);Yf(g,(A,L)=>A.width-L.width);const y=g.filter(A=>A.width===t&&A.height===r);h=y[y.length-1];const _=y.filter(A=>A.bandwidth===h.bandwidth)[0];let T,E,w;_||(T=g.filter(A=>A.width>t||A.height>r),E=T.filter(A=>A.width===T[0].width&&A.height===T[0].height),h=E[E.length-1],w=E.filter(A=>A.bandwidth===h.bandwidth)[0]);let D;if(s.leastPixelDiffSelector){const A=g.map(L=>(L.pixelDiff=Math.abs(L.width-t)+Math.abs(L.height-r),L));Yf(A,(L,F)=>L.pixelDiff===F.pixelDiff?F.bandwidth-L.bandwidth:L.pixelDiff-F.pixelDiff),D=A[0]}const R=D||w||_||m||u[0]||l[0];if(R&&R.playlist){let A="sortedPlaylistReps";return D?A="leastPixelDiffRep":w?A="resolutionPlusOneRep":_?A="resolutionBestRep":m?A="bandwidthBestRep":u[0]&&(A="enabledPlaylistReps"),Sv(`choosing ${zO(R)} using ${A} with options`,a),R.playlist}return Sv("could not choose a playlist with options",a),null};const HO=function(){let i=this.useDevicePixelRatio&&X.devicePixelRatio||1;return isNaN(this.customPixelRatio)||(i=this.customPixelRatio),t6(this.playlists.main,this.systemBandwidth,parseInt(z_(this.tech_.el(),"width"),10)*i,parseInt(z_(this.tech_.el(),"height"),10)*i,this.limitRenditionByPlayerDimensions,this.playlistController_)},tue=function(i){let e=-1,t=-1;if(i<0||i>1)throw new Error("Moving average bandwidth decay must be between 0 and 1.");return function(){let r=this.useDevicePixelRatio&&X.devicePixelRatio||1;return isNaN(this.customPixelRatio)||(r=this.customPixelRatio),e<0&&(e=this.systemBandwidth,t=this.systemBandwidth),this.systemBandwidth>0&&this.systemBandwidth!==t&&(e=i*this.systemBandwidth+(1-i)*e,t=this.systemBandwidth),t6(this.playlists.main,e,parseInt(z_(this.tech_.el(),"width"),10)*r,parseInt(z_(this.tech_.el(),"height"),10)*r,this.limitRenditionByPlayerDimensions,this.playlistController_)}},rue=function(i){const{main:e,currentTime:t,bandwidth:r,duration:n,segmentDuration:s,timeUntilRebuffer:a,currentTimeline:o,syncController:l}=i,u=e.playlists.filter(y=>!wa.isIncompatible(y));let c=u.filter(wa.isEnabled);c.length||(c=u.filter(y=>!wa.isDisabled(y)));const m=c.filter(wa.hasAttribute.bind(null,"BANDWIDTH")).map(y=>{const T=l.getSyncPoint(y,n,o,t)?1:2,w=wa.estimateSegmentRequestTime(s,r,y)*T-a;return{playlist:y,rebufferingImpact:w}}),g=m.filter(y=>y.rebufferingImpact<=0);return Yf(g,(y,_)=>D2(_.playlist,y.playlist)),g.length?g[0]:(Yf(m,(y,_)=>y.rebufferingImpact-_.rebufferingImpact),m[0]||null)},iue=function(){const i=this.playlists.main.playlists.filter(wa.isEnabled);return Yf(i,(t,r)=>D2(t,r)),i.filter(t=>!!h0(this.playlists.main,t).video)[0]||null},nue=i=>{let e=0,t;return i.bytes&&(t=new Uint8Array(i.bytes),i.segments.forEach(r=>{t.set(r,e),e+=r.byteLength})),t};function r6(i){try{return new URL(i).pathname.split("/").slice(-2).join("/")}catch{return""}}const sue=function(i,e,t){if(!i[t]){e.trigger({type:"usage",name:"vhs-608"});let r=t;/^cc708_/.test(t)&&(r="SERVICE"+t.split("_")[1]);const n=e.textTracks().getTrackById(r);if(n)i[t]=n;else{const s=e.options_.vhs&&e.options_.vhs.captionServices||{};let a=t,o=t,l=!1;const u=s[r];u&&(a=u.label,o=u.language,l=u.default),i[t]=e.addRemoteTextTrack({kind:"captions",id:r,default:l,label:a,language:o},!1).track}}},aue=function({inbandTextTracks:i,captionArray:e,timestampOffset:t}){if(!e)return;const r=X.WebKitDataCue||X.VTTCue;e.forEach(n=>{const s=n.stream;n.content?n.content.forEach(a=>{const o=new r(n.startTime+t,n.endTime+t,a.text);o.line=a.line,o.align="left",o.position=a.position,o.positionAlign="line-left",i[s].addCue(o)}):i[s].addCue(new r(n.startTime+t,n.endTime+t,n.text))})},oue=function(i){Object.defineProperties(i.frame,{id:{get(){return _e.log.warn("cue.frame.id is deprecated. Use cue.value.key instead."),i.value.key}},value:{get(){return _e.log.warn("cue.frame.value is deprecated. Use cue.value.data instead."),i.value.data}},privateData:{get(){return _e.log.warn("cue.frame.privateData is deprecated. Use cue.value.data instead."),i.value.data}}})},lue=({inbandTextTracks:i,metadataArray:e,timestampOffset:t,videoDuration:r})=>{if(!e)return;const n=X.WebKitDataCue||X.VTTCue,s=i.metadataTrack_;if(!s||(e.forEach(c=>{const h=c.cueTime+t;typeof h!="number"||X.isNaN(h)||h<0||!(h<1/0)||!c.frames||!c.frames.length||c.frames.forEach(m=>{const g=new n(h,h,m.value||m.url||m.data||"");g.frame=m,g.value=m,oue(g),s.addCue(g)})}),!s.cues||!s.cues.length))return;const a=s.cues,o=[];for(let c=0;c<a.length;c++)a[c]&&o.push(a[c]);const l=o.reduce((c,h)=>{const m=c[h.startTime]||[];return m.push(h),c[h.startTime]=m,c},{}),u=Object.keys(l).sort((c,h)=>Number(c)-Number(h));u.forEach((c,h)=>{const m=l[c],g=isFinite(r)?r:c,y=Number(u[h+1])||g;m.forEach(_=>{_.endTime=y})})},uue={id:"ID",class:"CLASS",startDate:"START-DATE",duration:"DURATION",endDate:"END-DATE",endOnNext:"END-ON-NEXT",plannedDuration:"PLANNED-DURATION",scte35Out:"SCTE35-OUT",scte35In:"SCTE35-IN"},cue=new Set(["id","class","startDate","duration","endDate","endOnNext","startTime","endTime","processDateRange"]),due=({inbandTextTracks:i,dateRanges:e})=>{const t=i.metadataTrack_;if(!t)return;const r=X.WebKitDataCue||X.VTTCue;e.forEach(n=>{for(const s of Object.keys(n)){if(cue.has(s))continue;const a=new r(n.startTime,n.endTime,"");a.id=n.id,a.type="com.apple.quicktime.HLS",a.value={key:uue[s],data:n[s]},(s==="scte35Out"||s==="scte35In")&&(a.value.data=new Uint8Array(a.value.data.match(/[\da-f]{2}/gi)).buffer),t.addCue(a)}n.processDateRange()})},VO=(i,e,t)=>{i.metadataTrack_||(i.metadataTrack_=t.addRemoteTextTrack({kind:"metadata",label:"Timed Metadata"},!1).track,_e.browser.IS_ANY_SAFARI||(i.metadataTrack_.inBandMetadataTrackDispatchType=e))},Xm=function(i,e,t){let r,n;if(t&&t.cues)for(r=t.cues.length;r--;)n=t.cues[r],n.startTime>=i&&n.endTime<=e&&t.removeCue(n)},hue=function(i){const e=i.cues;if(!e)return;const t={};for(let r=e.length-1;r>=0;r--){const n=e[r],s=`${n.startTime}-${n.endTime}-${n.text}`;t[s]?i.removeCue(n):t[s]=n}},fue=(i,e,t)=>{if(typeof e>"u"||e===null||!i.length)return[];const r=Math.ceil((e-t+3)*Aa.ONE_SECOND_IN_TS);let n;for(n=0;n<i.length&&!(i[n].pts>r);n++);return i.slice(n)},pue=(i,e,t)=>{if(!e.length)return i;if(t)return e.slice();const r=e[0].pts;let n=0;for(n;n<i.length&&!(i[n].pts>=r);n++);return i.slice(0,n).concat(e)},mue=(i,e,t,r)=>{const n=Math.ceil((e-r)*Aa.ONE_SECOND_IN_TS),s=Math.ceil((t-r)*Aa.ONE_SECOND_IN_TS),a=i.slice();let o=i.length;for(;o--&&!(i[o].pts<=s););if(o===-1)return a;let l=o+1;for(;l--&&!(i[l].pts<=n););return l=Math.max(l,0),a.splice(l,o-l+1),a},gue=function(i,e){if(!i&&!e||!i&&e||i&&!e)return!1;if(i===e)return!0;const t=Object.keys(i).sort(),r=Object.keys(e).sort();if(t.length!==r.length)return!1;for(let n=0;n<t.length;n++){const s=t[n];if(s!==r[n]||i[s]!==e[s])return!1}return!0},vue=function(i,e,t){e=e||[];const r=[];let n=0;for(let s=0;s<e.length;s++){const a=e[s];if(i===a.timeline&&(r.push(s),n+=a.duration,n>t))return s}return r.length===0?0:r[r.length-1]},Rm=1,yue=500,qO=i=>typeof i=="number"&&isFinite(i),Cv=1/60,_ue=(i,e,t)=>i!=="main"||!e||!t?null:!t.hasAudio&&!t.hasVideo?"Neither audio nor video found in segment.":e.hasVideo&&!t.hasVideo?"Only audio found in segment when we expected video. We can't switch to audio only from a stream that had video. To get rid of this message, please add codec information to the manifest.":!e.hasVideo&&t.hasVideo?"Video found in segment when we expected only audio. We can't switch to a stream with video from an audio only stream. To get rid of this message, please add codec information to the manifest.":null,xue=(i,e,t)=>{let r=e-Wn.BACK_BUFFER_LENGTH;i.length&&(r=Math.max(r,i.start(0)));const n=e-t;return Math.min(n,r)},pf=i=>{const{startOfSegment:e,duration:t,segment:r,part:n,playlist:{mediaSequence:s,id:a,segments:o=[]},mediaIndex:l,partIndex:u,timeline:c}=i,h=o.length-1;let m="mediaIndex/partIndex increment";i.getMediaInfoForTime?m=`getMediaInfoForTime (${i.getMediaInfoForTime})`:i.isSyncRequest&&(m="getSyncSegmentCandidate (isSyncRequest)"),i.independent&&(m+=` with independent ${i.independent}`);const g=typeof u=="number",y=i.segment.uri?"segment":"pre-segment",_=g?b5({preloadSegment:r})-1:0;return`${y} [${s+l}/${s+h}]`+(g?` part [${u}/${_}]`:"")+` segment start/end [${r.start} => ${r.end}]`+(g?` part start/end [${n.start} => ${n.end}]`:"")+` startOfSegment [${e}] duration [${t}] timeline [${c}] selected by [${m}] playlist [${a}]`},WO=i=>`${i}TimingInfo`,Tue=({segmentTimeline:i,currentTimeline:e,startOfSegment:t,buffered:r,overrideCheck:n})=>!n&&i===e?null:i<e?t:r.length?r.end(r.length-1):t,eE=({timelineChangeController:i,currentTimeline:e,segmentTimeline:t,loaderType:r,audioDisabled:n})=>{if(e===t)return!1;if(r==="audio"){const s=i.lastTimelineChange({type:"main"});return!s||s.to!==t}if(r==="main"&&n){const s=i.pendingTimelineChange({type:"audio"});return!(s&&s.to===t)}return!1},bue=i=>{if(!i)return!1;const e=i.pendingTimelineChange({type:"audio"}),t=i.pendingTimelineChange({type:"main"}),r=e&&t,n=r&&e.to!==t.to;return!!(r&&e.from!==-1&&t.from!==-1&&n)},Sue=i=>{i&&(i.pause(),i.resetEverything(),i.load())},Cue=i=>{const e=i.timelineChangeController_.pendingTimelineChange({type:"audio"}),t=i.timelineChangeController_.pendingTimelineChange({type:"main"});return e&&t&&e.to<t.to},Gc=i=>{const e=i.pendingSegment_;if(!e)return;if(eE({timelineChangeController:i.timelineChangeController_,currentTimeline:i.currentTimeline_,segmentTimeline:e.timeline,loaderType:i.loaderType_,audioDisabled:i.audioDisabled_})&&bue(i.timelineChangeController_)){if(Cue(i)){i.timelineChangeController_.trigger("audioTimelineBehind");return}Sue(i)}},Eue=i=>{let e=0;return["video","audio"].forEach(function(t){const r=i[`${t}TimingInfo`];if(!r)return;const{start:n,end:s}=r;let a;typeof n=="bigint"||typeof s=="bigint"?a=X.BigInt(s)-X.BigInt(n):typeof n=="number"&&typeof s=="number"&&(a=s-n),typeof a<"u"&&a>e&&(e=a)}),typeof e=="bigint"&&e<Number.MAX_SAFE_INTEGER&&(e=Number(e)),e},GO=({segmentDuration:i,maxDuration:e})=>i?Math.round(i)>e+eu:!1,wue=(i,e)=>{if(e!=="hls")return null;const t=Eue({audioTimingInfo:i.audioTimingInfo,videoTimingInfo:i.videoTimingInfo});if(!t)return null;const r=i.playlist.targetDuration,n=GO({segmentDuration:t,maxDuration:r*2}),s=GO({segmentDuration:t,maxDuration:r}),a=`Segment with index ${i.mediaIndex} from playlist ${i.playlist.id} has a duration of ${t} when the reported duration is ${i.duration} and the target duration is ${r}. For HLS content, a duration in excess of the target duration may result in playback issues. See the HLS specification section on EXT-X-TARGETDURATION for more details: https://tools.ietf.org/html/draft-pantos-http-live-streaming-23#section-4.3.3.1`;return n||s?{severity:n?"warn":"info",message:a}:null},th=({type:i,segment:e})=>{if(!e)return;const t=!!(e.key||e.map&&e.map.ke),r=!!(e.map&&!e.map.bytes),n=e.startOfSegment===void 0?e.start:e.startOfSegment;return{type:i||e.type,uri:e.resolvedUri||e.uri,start:n,duration:e.duration,isEncrypted:t,isMediaInitialization:r}};let tE=class extends _e.EventTarget{constructor(e,t={}){if(super(),!e)throw new TypeError("Initialization settings are required");if(typeof e.currentTime!="function")throw new TypeError("No currentTime getter specified");if(!e.mediaSource)throw new TypeError("No MediaSource specified");this.bandwidth=e.bandwidth,this.throughput={rate:0,count:0},this.roundTrip=NaN,this.resetStats_(),this.mediaIndex=null,this.partIndex=null,this.hasPlayed_=e.hasPlayed,this.currentTime_=e.currentTime,this.seekable_=e.seekable,this.seeking_=e.seeking,this.duration_=e.duration,this.mediaSource_=e.mediaSource,this.vhs_=e.vhs,this.loaderType_=e.loaderType,this.currentMediaInfo_=void 0,this.startingMediaInfo_=void 0,this.segmentMetadataTrack_=e.segmentMetadataTrack,this.goalBufferLength_=e.goalBufferLength,this.sourceType_=e.sourceType,this.sourceUpdater_=e.sourceUpdater,this.inbandTextTracks_=e.inbandTextTracks,this.state_="INIT",this.timelineChangeController_=e.timelineChangeController,this.shouldSaveSegmentTimingInfo_=!0,this.parse708captions_=e.parse708captions,this.useDtsForTimestampOffset_=e.useDtsForTimestampOffset,this.captionServices_=e.captionServices,this.exactManifestTimings=e.exactManifestTimings,this.addMetadataToTextTrack=e.addMetadataToTextTrack,this.checkBufferTimeout_=null,this.error_=void 0,this.currentTimeline_=-1,this.shouldForceTimestampOffsetAfterResync_=!1,this.pendingSegment_=null,this.xhrOptions_=null,this.pendingSegments_=[],this.audioDisabled_=!1,this.isPendingTimestampOffset_=!1,this.gopBuffer_=[],this.timeMapping_=0,this.safeAppend_=!1,this.appendInitSegment_={audio:!0,video:!0},this.playlistOfLastInitSegment_={audio:null,video:null},this.callQueue_=[],this.loadQueue_=[],this.metadataQueue_={id3:[],caption:[]},this.waitingOnRemove_=!1,this.quotaExceededErrorRetryTimeout_=null,this.activeInitSegmentId_=null,this.initSegments_={},this.cacheEncryptionKeys_=e.cacheEncryptionKeys,this.keyCache_={},this.decrypter_=e.decrypter,this.syncController_=e.syncController,this.syncPoint_={segmentIndex:0,time:0},this.transmuxer_=this.createTransmuxer_(),this.triggerSyncInfoUpdate_=()=>this.trigger("syncinfoupdate"),this.syncController_.on("syncinfoupdate",this.triggerSyncInfoUpdate_),this.mediaSource_.addEventListener("sourceopen",()=>{this.isEndOfStream_()||(this.ended_=!1)}),this.fetchAtBuffer_=!1,this.logger_=$o(`SegmentLoader[${this.loaderType_}]`),Object.defineProperty(this,"state",{get(){return this.state_},set(r){r!==this.state_&&(this.logger_(`${this.state_} -> ${r}`),this.state_=r,this.trigger("statechange"))}}),this.sourceUpdater_.on("ready",()=>{this.hasEnoughInfoToAppend_()?this.processCallQueue_():Gc(this)}),this.sourceUpdater_.on("codecschange",r=>{this.trigger(Jt({type:"codecschange"},r))}),this.loaderType_==="main"&&this.timelineChangeController_.on("pendingtimelinechange",()=>{this.hasEnoughInfoToAppend_()?this.processCallQueue_():Gc(this)}),this.loaderType_==="audio"&&this.timelineChangeController_.on("timelinechange",r=>{this.trigger(Jt({type:"timelinechange"},r)),this.hasEnoughInfoToLoad_()?this.processLoadQueue_():Gc(this),this.hasEnoughInfoToAppend_()?this.processCallQueue_():Gc(this)})}get mediaSequenceSync_(){return this.syncController_.getMediaSequenceSync(this.loaderType_)}createTransmuxer_(){return n1.createTransmuxer({remux:!1,alignGopsAtEnd:this.safeAppend_,keepOriginalTimestamps:!0,parse708captions:this.parse708captions_,captionServices:this.captionServices_})}resetStats_(){this.mediaBytesTransferred=0,this.mediaRequests=0,this.mediaRequestsAborted=0,this.mediaRequestsTimedout=0,this.mediaRequestsErrored=0,this.mediaTransferDuration=0,this.mediaSecondsLoaded=0,this.mediaAppends=0}dispose(){this.trigger("dispose"),this.state="DISPOSED",this.pause(),this.abort_(),this.transmuxer_&&this.transmuxer_.terminate(),this.resetStats_(),this.checkBufferTimeout_&&X.clearTimeout(this.checkBufferTimeout_),this.syncController_&&this.triggerSyncInfoUpdate_&&this.syncController_.off("syncinfoupdate",this.triggerSyncInfoUpdate_),this.off()}setAudio(e){this.audioDisabled_=!e,e?this.appendInitSegment_.audio=!0:this.sourceUpdater_.removeAudio(0,this.duration_())}abort(){if(this.state!=="WAITING"){this.pendingSegment_&&(this.pendingSegment_=null);return}this.abort_(),this.state="READY",this.paused()||this.monitorBuffer_()}abort_(){this.pendingSegment_&&this.pendingSegment_.abortRequests&&this.pendingSegment_.abortRequests(),this.pendingSegment_=null,this.callQueue_=[],this.loadQueue_=[],this.metadataQueue_.id3=[],this.metadataQueue_.caption=[],this.timelineChangeController_.clearPendingTimelineChange(this.loaderType_),this.waitingOnRemove_=!1,X.clearTimeout(this.quotaExceededErrorRetryTimeout_),this.quotaExceededErrorRetryTimeout_=null}checkForAbort_(e){return this.state==="APPENDING"&&!this.pendingSegment_?(this.state="READY",!0):!this.pendingSegment_||this.pendingSegment_.requestId!==e}error(e){return typeof e<"u"&&(this.logger_("error occurred:",e),this.error_=e),this.pendingSegment_=null,this.error_}endOfStream(){this.ended_=!0,this.transmuxer_&&n1.reset(this.transmuxer_),this.gopBuffer_.length=0,this.pause(),this.trigger("ended")}buffered_(){const e=this.getMediaInfo_();if(!this.sourceUpdater_||!e)return fs();if(this.loaderType_==="main"){const{hasAudio:t,hasVideo:r,isMuxed:n}=e;if(r&&t&&!this.audioDisabled_&&!n)return this.sourceUpdater_.buffered();if(r)return this.sourceUpdater_.videoBuffered()}return this.sourceUpdater_.audioBuffered()}initSegmentForMap(e,t=!1){if(!e)return null;const r=$_(e);let n=this.initSegments_[r];return t&&!n&&e.bytes&&(this.initSegments_[r]=n={resolvedUri:e.resolvedUri,byterange:e.byterange,bytes:e.bytes,tracks:e.tracks,timescales:e.timescales}),n||e}segmentKey(e,t=!1){if(!e)return null;const r=U5(e);let n=this.keyCache_[r];this.cacheEncryptionKeys_&&t&&!n&&e.bytes&&(this.keyCache_[r]=n={resolvedUri:e.resolvedUri,bytes:e.bytes});const s={resolvedUri:(n||e).resolvedUri};return n&&(s.bytes=n.bytes),s}couldBeginLoading_(){return this.playlist_&&!this.paused()}load(){if(this.monitorBuffer_(),!!this.playlist_){if(this.state==="INIT"&&this.couldBeginLoading_())return this.init_();!this.couldBeginLoading_()||this.state!=="READY"&&this.state!=="INIT"||(this.state="READY")}}init_(){return this.state="READY",this.resetEverything(),this.monitorBuffer_()}playlist(e,t={}){if(!e)return;const r=this.playlist_,n=this.pendingSegment_;this.playlist_=e,this.xhrOptions_=t,this.state==="INIT"&&(e.syncInfo={mediaSequence:e.mediaSequence,time:0},this.loaderType_==="main"&&this.syncController_.setDateTimeMappingForStart(e));let s=null;if(r&&(r.id?s=r.id:r.uri&&(s=r.uri)),this.logger_(`playlist update [${s} => ${e.id||e.uri}]`),this.mediaSequenceSync_&&(this.mediaSequenceSync_.update(e,this.currentTime_()),this.logger_(`Playlist update:
currentTime: ${this.currentTime_()}
bufferedEnd: ${r1(this.buffered_())}
`,this.mediaSequenceSync_.diagnostics)),this.trigger("syncinfoupdate"),this.state==="INIT"&&this.couldBeginLoading_())return this.init_();if(!r||r.uri!==e.uri){this.mediaIndex!==null&&(!e.endList&&typeof e.partTargetDuration=="number"?this.resetLoader():this.resyncLoader()),this.currentMediaInfo_=void 0,this.trigger("playlistupdate");return}const a=e.mediaSequence-r.mediaSequence;if(this.logger_(`live window shift [${a}]`),this.mediaIndex!==null)if(this.mediaIndex-=a,this.mediaIndex<0)this.mediaIndex=null,this.partIndex=null;else{const o=this.playlist_.segments[this.mediaIndex];if(this.partIndex&&(!o.parts||!o.parts.length||!o.parts[this.partIndex])){const l=this.mediaIndex;this.logger_(`currently processing part (index ${this.partIndex}) no longer exists.`),this.resetLoader(),this.mediaIndex=l}}n&&(n.mediaIndex-=a,n.mediaIndex<0?(n.mediaIndex=null,n.partIndex=null):(n.mediaIndex>=0&&(n.segment=e.segments[n.mediaIndex]),n.partIndex>=0&&n.segment.parts&&(n.part=n.segment.parts[n.partIndex]))),this.syncController_.saveExpiredSegmentInfo(r,e)}pause(){this.checkBufferTimeout_&&(X.clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=null)}paused(){return this.checkBufferTimeout_===null}resetEverything(e){this.ended_=!1,this.activeInitSegmentId_=null,this.appendInitSegment_={audio:!0,video:!0},this.resetLoader(),this.remove(0,1/0,e),this.transmuxer_&&(this.transmuxer_.postMessage({action:"clearAllMp4Captions"}),this.transmuxer_.postMessage({action:"reset"}))}resetLoader(){this.fetchAtBuffer_=!1,this.mediaSequenceSync_&&this.mediaSequenceSync_.resetAppendedStatus(),this.resyncLoader()}resyncLoader(){this.transmuxer_&&n1.reset(this.transmuxer_),this.mediaIndex=null,this.partIndex=null,this.syncPoint_=null,this.isPendingTimestampOffset_=!1;const e=this.currentMediaInfo_&&this.currentMediaInfo_.isFmp4;this.sourceType_==="hls"&&!e&&(this.shouldForceTimestampOffsetAfterResync_=!0),this.callQueue_=[],this.loadQueue_=[],this.metadataQueue_.id3=[],this.metadataQueue_.caption=[],this.abort(),this.transmuxer_&&this.transmuxer_.postMessage({action:"clearParsedMp4Captions"})}remove(e,t,r=()=>{},n=!1){if(t===1/0&&(t=this.duration_()),t<=e){this.logger_("skipping remove because end ${end} is <= start ${start}");return}if(!this.sourceUpdater_||!this.getMediaInfo_()){this.logger_("skipping remove because no source updater or starting media info");return}let s=1;const a=()=>{s--,s===0&&r()};(n||!this.audioDisabled_)&&(s++,this.sourceUpdater_.removeAudio(e,t,a)),(n||this.loaderType_==="main")&&(this.gopBuffer_=mue(this.gopBuffer_,e,t,this.timeMapping_),s++,this.sourceUpdater_.removeVideo(e,t,a));for(const o in this.inbandTextTracks_)Xm(e,t,this.inbandTextTracks_[o]);Xm(e,t,this.segmentMetadataTrack_),a()}monitorBuffer_(){this.checkBufferTimeout_&&X.clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=X.setTimeout(this.monitorBufferTick_.bind(this),1)}monitorBufferTick_(){this.state==="READY"&&this.fillBuffer_(),this.checkBufferTimeout_&&X.clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=X.setTimeout(this.monitorBufferTick_.bind(this),yue)}fillBuffer_(){if(this.sourceUpdater_.updating())return;const e=this.chooseNextRequest_();if(!e)return;const t={segmentInfo:th({type:this.loaderType_,segment:e})};this.trigger({type:"segmentselected",metadata:t}),typeof e.timestampOffset=="number"&&(this.isPendingTimestampOffset_=!1,this.timelineChangeController_.pendingTimelineChange({type:this.loaderType_,from:this.currentTimeline_,to:e.timeline})),this.loadSegment_(e)}isEndOfStream_(e=this.mediaIndex,t=this.playlist_,r=this.partIndex){if(!t||!this.mediaSource_)return!1;const n=typeof e=="number"&&t.segments[e],s=e+1===t.segments.length,a=!n||!n.parts||r+1===n.parts.length;return t.endList&&this.mediaSource_.readyState==="open"&&s&&a}chooseNextRequest_(){const e=this.buffered_(),t=r1(e)||0,r=E2(e,this.currentTime_()),n=!this.hasPlayed_()&&r>=1,s=r>=this.goalBufferLength_(),a=this.playlist_.segments;if(!a.length||n||s)return null;this.syncPoint_=this.syncPoint_||this.syncController_.getSyncPoint(this.playlist_,this.duration_(),this.currentTimeline_,this.currentTime_(),this.loaderType_);const o={partIndex:null,mediaIndex:null,startOfSegment:null,playlist:this.playlist_,isSyncRequest:!this.syncPoint_};if(o.isSyncRequest)o.mediaIndex=vue(this.currentTimeline_,a,t),this.logger_(`choose next request. Can not find sync point. Fallback to media Index: ${o.mediaIndex}`);else if(this.mediaIndex!==null){const m=a[this.mediaIndex],g=typeof this.partIndex=="number"?this.partIndex:-1;o.startOfSegment=m.end?m.end:t,m.parts&&m.parts[g+1]?(o.mediaIndex=this.mediaIndex,o.partIndex=g+1):o.mediaIndex=this.mediaIndex+1}else{let m,g,y;const _=this.fetchAtBuffer_?t:this.currentTime_();if(this.mediaSequenceSync_&&this.logger_(`chooseNextRequest_ request after Quality Switch:
For TargetTime: ${_}.
CurrentTime: ${this.currentTime_()}
BufferedEnd: ${t}
Fetch At Buffer: ${this.fetchAtBuffer_}
`,this.mediaSequenceSync_.diagnostics),this.mediaSequenceSync_&&this.mediaSequenceSync_.isReliable){const T=this.getSyncInfoFromMediaSequenceSync_(_);if(!T){const E="No sync info found while using media sequence sync";return this.error({message:E,metadata:{errorType:_e.Error.StreamingFailedToSelectNextSegment,error:new Error(E)}}),this.logger_("chooseNextRequest_ - no sync info found using media sequence sync"),null}this.logger_(`chooseNextRequest_ mediaSequence syncInfo (${T.start} --> ${T.end})`),m=T.segmentIndex,g=T.partIndex,y=T.start}else{this.logger_("chooseNextRequest_ - fallback to a regular segment selection algorithm, based on a syncPoint.");const T=wa.getMediaInfoForTime({exactManifestTimings:this.exactManifestTimings,playlist:this.playlist_,currentTime:_,startingPartIndex:this.syncPoint_.partIndex,startingSegmentIndex:this.syncPoint_.segmentIndex,startTime:this.syncPoint_.time});m=T.segmentIndex,g=T.partIndex,y=T.startTime}o.getMediaInfoForTime=this.fetchAtBuffer_?`bufferedEnd ${_}`:`currentTime ${_}`,o.mediaIndex=m,o.startOfSegment=y,o.partIndex=g,this.logger_(`choose next request. Playlist switched and we have a sync point. Media Index: ${o.mediaIndex} `)}const l=a[o.mediaIndex];let u=l&&typeof o.partIndex=="number"&&l.parts&&l.parts[o.partIndex];if(!l||typeof o.partIndex=="number"&&!u)return null;typeof o.partIndex!="number"&&l.parts&&(o.partIndex=0,u=l.parts[0]);const c=this.vhs_.playlists&&this.vhs_.playlists.main&&this.vhs_.playlists.main.independentSegments||this.playlist_.independentSegments;if(!r&&u&&!c&&!u.independent)if(o.partIndex===0){const m=a[o.mediaIndex-1],g=m.parts&&m.parts.length&&m.parts[m.parts.length-1];g&&g.independent&&(o.mediaIndex-=1,o.partIndex=m.parts.length-1,o.independent="previous segment")}else l.parts[o.partIndex-1].independent&&(o.partIndex-=1,o.independent="previous part");const h=this.mediaSource_&&this.mediaSource_.readyState==="ended";return o.mediaIndex>=a.length-1&&h&&!this.seeking_()?null:(this.shouldForceTimestampOffsetAfterResync_&&(this.shouldForceTimestampOffsetAfterResync_=!1,o.forceTimestampOffset=!0,this.logger_("choose next request. Force timestamp offset after loader resync")),this.generateSegmentInfo_(o))}getSyncInfoFromMediaSequenceSync_(e){if(!this.mediaSequenceSync_)return null;const t=Math.max(e,this.mediaSequenceSync_.start);e!==t&&this.logger_(`getSyncInfoFromMediaSequenceSync_. Pulled target time from ${e} to ${t}`);const r=this.mediaSequenceSync_.getSyncInfoForTime(t);if(!r)return null;if(!r.isAppended)return r;const n=this.mediaSequenceSync_.getSyncInfoForTime(r.end);return n?(n.isAppended&&this.logger_("getSyncInfoFromMediaSequenceSync_: We encounter unexpected scenario where next media sequence sync info is also appended!"),n):null}generateSegmentInfo_(e){const{independent:t,playlist:r,mediaIndex:n,startOfSegment:s,isSyncRequest:a,partIndex:o,forceTimestampOffset:l,getMediaInfoForTime:u}=e,c=r.segments[n],h=typeof o=="number"&&c.parts[o],m={requestId:"segment-loader-"+Math.random(),uri:h&&h.resolvedUri||c.resolvedUri,mediaIndex:n,partIndex:h?o:null,isSyncRequest:a,startOfSegment:s,playlist:r,bytes:null,encryptedBytes:null,timestampOffset:null,timeline:c.timeline,duration:h&&h.duration||c.duration,segment:c,part:h,byteLength:0,transmuxer:this.transmuxer_,getMediaInfoForTime:u,independent:t},g=typeof l<"u"?l:this.isPendingTimestampOffset_;m.timestampOffset=this.timestampOffsetForSegment_({segmentTimeline:c.timeline,currentTimeline:this.currentTimeline_,startOfSegment:s,buffered:this.buffered_(),overrideCheck:g});const y=r1(this.sourceUpdater_.audioBuffered());return typeof y=="number"&&(m.audioAppendStart=y-this.sourceUpdater_.audioTimestampOffset()),this.sourceUpdater_.videoBuffered().length&&(m.gopsToAlignWith=fue(this.gopBuffer_,this.currentTime_()-this.sourceUpdater_.videoTimestampOffset(),this.timeMapping_)),m}timestampOffsetForSegment_(e){return Tue(e)}earlyAbortWhenNeeded_(e){if(this.vhs_.tech_.paused()||!this.xhrOptions_.timeout||!this.playlist_.attributes.BANDWIDTH||Date.now()-(e.firstBytesReceivedAt||Date.now())<1e3)return;const t=this.currentTime_(),r=e.bandwidth,n=this.pendingSegment_.duration,s=wa.estimateSegmentRequestTime(n,r,this.playlist_,e.bytesReceived),a=Voe(this.buffered_(),t,this.vhs_.tech_.playbackRate())-1;if(s<=a)return;const o=rue({main:this.vhs_.playlists.main,currentTime:t,bandwidth:r,duration:this.duration_(),segmentDuration:n,timeUntilRebuffer:a,currentTimeline:this.currentTimeline_,syncController:this.syncController_});if(!o)return;const u=s-a-o.rebufferingImpact;let c=.5;a<=eu&&(c=1),!(!o.playlist||o.playlist.uri===this.playlist_.uri||u<c)&&(this.bandwidth=o.playlist.attributes.BANDWIDTH*Wn.BANDWIDTH_VARIANCE+1,this.trigger("earlyabort"))}handleAbort_(e){this.logger_(`Aborting ${pf(e)}`),this.mediaRequestsAborted+=1}handleProgress_(e,t){this.earlyAbortWhenNeeded_(t.stats),!this.checkForAbort_(t.requestId)&&this.trigger("progress")}handleTrackInfo_(e,t){const{hasAudio:r,hasVideo:n}=t,s={segmentInfo:th({type:this.loaderType_,segment:e}),trackInfo:{hasAudio:r,hasVideo:n}};this.trigger({type:"segmenttransmuxingtrackinfoavailable",metadata:s}),this.earlyAbortWhenNeeded_(e.stats),!this.checkForAbort_(e.requestId)&&(this.checkForIllegalMediaSwitch(t)||(t=t||{},gue(this.currentMediaInfo_,t)||(this.appendInitSegment_={audio:!0,video:!0},this.startingMediaInfo_=t,this.currentMediaInfo_=t,this.logger_("trackinfo update",t),this.trigger("trackinfo")),!this.checkForAbort_(e.requestId)&&(this.pendingSegment_.trackInfo=t,this.hasEnoughInfoToAppend_()?this.processCallQueue_():Gc(this))))}handleTimingInfo_(e,t,r,n){if(this.earlyAbortWhenNeeded_(e.stats),this.checkForAbort_(e.requestId))return;const s=this.pendingSegment_,a=WO(t);s[a]=s[a]||{},s[a][r]=n,this.logger_(`timinginfo: ${t} - ${r} - ${n}`),this.hasEnoughInfoToAppend_()?this.processCallQueue_():Gc(this)}handleCaptions_(e,t){if(this.earlyAbortWhenNeeded_(e.stats),this.checkForAbort_(e.requestId))return;if(t.length===0){this.logger_("SegmentLoader received no captions from a caption event");return}if(!this.pendingSegment_.hasAppendedData_){this.metadataQueue_.caption.push(this.handleCaptions_.bind(this,e,t));return}const n=this.sourceUpdater_.videoTimestampOffset()===null?this.sourceUpdater_.audioTimestampOffset():this.sourceUpdater_.videoTimestampOffset(),s={};t.forEach(a=>{s[a.stream]=s[a.stream]||{startTime:1/0,captions:[],endTime:0};const o=s[a.stream];o.startTime=Math.min(o.startTime,a.startTime+n),o.endTime=Math.max(o.endTime,a.endTime+n),o.captions.push(a)}),Object.keys(s).forEach(a=>{const{startTime:o,endTime:l,captions:u}=s[a],c=this.inbandTextTracks_;this.logger_(`adding cues from ${o} -> ${l} for ${a}`),sue(c,this.vhs_.tech_,a),Xm(o,l,c[a]),aue({captionArray:u,inbandTextTracks:c,timestampOffset:n})}),this.transmuxer_&&this.transmuxer_.postMessage({action:"clearParsedMp4Captions"})}handleId3_(e,t,r){if(this.earlyAbortWhenNeeded_(e.stats),this.checkForAbort_(e.requestId))return;if(!this.pendingSegment_.hasAppendedData_){this.metadataQueue_.id3.push(this.handleId3_.bind(this,e,t,r));return}this.addMetadataToTextTrack(r,t,this.duration_())}processMetadataQueue_(){this.metadataQueue_.id3.forEach(e=>e()),this.metadataQueue_.caption.forEach(e=>e()),this.metadataQueue_.id3=[],this.metadataQueue_.caption=[]}processCallQueue_(){const e=this.callQueue_;this.callQueue_=[],e.forEach(t=>t())}processLoadQueue_(){const e=this.loadQueue_;this.loadQueue_=[],e.forEach(t=>t())}hasEnoughInfoToLoad_(){if(this.loaderType_!=="audio")return!0;const e=this.pendingSegment_;return e?this.getCurrentMediaInfo_()?!eE({timelineChangeController:this.timelineChangeController_,currentTimeline:this.currentTimeline_,segmentTimeline:e.timeline,loaderType:this.loaderType_,audioDisabled:this.audioDisabled_}):!0:!1}getCurrentMediaInfo_(e=this.pendingSegment_){return e&&e.trackInfo||this.currentMediaInfo_}getMediaInfo_(e=this.pendingSegment_){return this.getCurrentMediaInfo_(e)||this.startingMediaInfo_}getPendingSegmentPlaylist(){return this.pendingSegment_?this.pendingSegment_.playlist:null}hasEnoughInfoToAppend_(){if(!this.sourceUpdater_.ready()||this.waitingOnRemove_||this.quotaExceededErrorRetryTimeout_)return!1;const e=this.pendingSegment_,t=this.getCurrentMediaInfo_();if(!e||!t)return!1;const{hasAudio:r,hasVideo:n,isMuxed:s}=t;return!(n&&!e.videoTimingInfo||r&&!this.audioDisabled_&&!s&&!e.audioTimingInfo||eE({timelineChangeController:this.timelineChangeController_,currentTimeline:this.currentTimeline_,segmentTimeline:e.timeline,loaderType:this.loaderType_,audioDisabled:this.audioDisabled_}))}handleData_(e,t){if(this.earlyAbortWhenNeeded_(e.stats),this.checkForAbort_(e.requestId))return;if(this.callQueue_.length||!this.hasEnoughInfoToAppend_()){Gc(this),this.callQueue_.push(this.handleData_.bind(this,e,t));return}const r=this.pendingSegment_;if(this.setTimeMapping_(r.timeline),this.updateMediaSecondsLoaded_(r.part||r.segment),this.mediaSource_.readyState!=="closed"){if(e.map&&(e.map=this.initSegmentForMap(e.map,!0),r.segment.map=e.map),e.key&&this.segmentKey(e.key,!0),r.isFmp4=e.isFmp4,r.timingInfo=r.timingInfo||{},r.isFmp4)this.trigger("fmp4"),r.timingInfo.start=r[WO(t.type)].start;else{const n=this.getCurrentMediaInfo_(),s=this.loaderType_==="main"&&n&&n.hasVideo;let a;s&&(a=r.videoTimingInfo.start),r.timingInfo.start=this.trueSegmentStart_({currentStart:r.timingInfo.start,playlist:r.playlist,mediaIndex:r.mediaIndex,currentVideoTimestampOffset:this.sourceUpdater_.videoTimestampOffset(),useVideoTimingInfo:s,firstVideoFrameTimeForData:a,videoTimingInfo:r.videoTimingInfo,audioTimingInfo:r.audioTimingInfo})}if(this.updateAppendInitSegmentStatus(r,t.type),this.updateSourceBufferTimestampOffset_(r),r.isSyncRequest){this.updateTimingInfoEnd_(r),this.syncController_.saveSegmentTimingInfo({segmentInfo:r,shouldSaveTimelineMapping:this.loaderType_==="main"});const n=this.chooseNextRequest_();if(n.mediaIndex!==r.mediaIndex||n.partIndex!==r.partIndex){this.logger_("sync segment was incorrect, not appending");return}this.logger_("sync segment was correct, appending")}r.hasAppendedData_=!0,this.processMetadataQueue_(),this.appendData_(r,t)}}updateAppendInitSegmentStatus(e,t){this.loaderType_==="main"&&typeof e.timestampOffset=="number"&&!e.changedTimestampOffset&&(this.appendInitSegment_={audio:!0,video:!0}),this.playlistOfLastInitSegment_[t]!==e.playlist&&(this.appendInitSegment_[t]=!0)}getInitSegmentAndUpdateState_({type:e,initSegment:t,map:r,playlist:n}){if(r){const s=$_(r);if(this.activeInitSegmentId_===s)return null;t=this.initSegmentForMap(r,!0).bytes,this.activeInitSegmentId_=s}return t&&this.appendInitSegment_[e]?(this.playlistOfLastInitSegment_[e]=n,this.appendInitSegment_[e]=!1,this.activeInitSegmentId_=null,t):null}handleQuotaExceededError_({segmentInfo:e,type:t,bytes:r},n){const s=this.sourceUpdater_.audioBuffered(),a=this.sourceUpdater_.videoBuffered();s.length>1&&this.logger_("On QUOTA_EXCEEDED_ERR, found gaps in the audio buffer: "+oh(s).join(", ")),a.length>1&&this.logger_("On QUOTA_EXCEEDED_ERR, found gaps in the video buffer: "+oh(a).join(", "));const o=s.length?s.start(0):0,l=s.length?s.end(s.length-1):0,u=a.length?a.start(0):0,c=a.length?a.end(a.length-1):0;if(l-o<=Rm&&c-u<=Rm){this.logger_(`On QUOTA_EXCEEDED_ERR, single segment too large to append to buffer, triggering an error. Appended byte length: ${r.byteLength}, audio buffer: ${oh(s).join(", ")}, video buffer: ${oh(a).join(", ")}, `),this.error({message:"Quota exceeded error with append of a single segment of content",excludeUntil:1/0}),this.trigger("error");return}this.waitingOnRemove_=!0,this.callQueue_.push(this.appendToSourceBuffer_.bind(this,{segmentInfo:e,type:t,bytes:r}));const m=this.currentTime_()-Rm;this.logger_(`On QUOTA_EXCEEDED_ERR, removing audio/video from 0 to ${m}`),this.remove(0,m,()=>{this.logger_(`On QUOTA_EXCEEDED_ERR, retrying append in ${Rm}s`),this.waitingOnRemove_=!1,this.quotaExceededErrorRetryTimeout_=X.setTimeout(()=>{this.logger_("On QUOTA_EXCEEDED_ERR, re-processing call queue"),this.quotaExceededErrorRetryTimeout_=null,this.processCallQueue_()},Rm*1e3)},!0)}handleAppendError_({segmentInfo:e,type:t,bytes:r},n){if(n){if(n.code===L5){this.handleQuotaExceededError_({segmentInfo:e,type:t,bytes:r});return}this.logger_("Received non QUOTA_EXCEEDED_ERR on append",n),this.error({message:`${t} append of ${r.length}b failed for segment #${e.mediaIndex} in playlist ${e.playlist.id}`,metadata:{errorType:_e.Error.StreamingFailedToAppendSegment}}),this.trigger("appenderror")}}appendToSourceBuffer_({segmentInfo:e,type:t,initSegment:r,data:n,bytes:s}){if(!s){const o=[n];let l=n.byteLength;r&&(o.unshift(r),l+=r.byteLength),s=nue({bytes:l,segments:o})}const a={segmentInfo:th({type:this.loaderType_,segment:e})};this.trigger({type:"segmentappendstart",metadata:a}),this.sourceUpdater_.appendBuffer({segmentInfo:e,type:t,bytes:s},this.handleAppendError_.bind(this,{segmentInfo:e,type:t,bytes:s}))}handleSegmentTimingInfo_(e,t,r){if(!this.pendingSegment_||t!==this.pendingSegment_.requestId)return;const n=this.pendingSegment_.segment,s=`${e}TimingInfo`;n[s]||(n[s]={}),n[s].transmuxerPrependedSeconds=r.prependedContentDuration||0,n[s].transmuxedPresentationStart=r.start.presentation,n[s].transmuxedDecodeStart=r.start.decode,n[s].transmuxedPresentationEnd=r.end.presentation,n[s].transmuxedDecodeEnd=r.end.decode,n[s].baseMediaDecodeTime=r.baseMediaDecodeTime}appendData_(e,t){const{type:r,data:n}=t;if(!n||!n.byteLength||r==="audio"&&this.audioDisabled_)return;const s=this.getInitSegmentAndUpdateState_({type:r,initSegment:t.initSegment,playlist:e.playlist,map:e.isFmp4?e.segment.map:null});this.appendToSourceBuffer_({segmentInfo:e,type:r,initSegment:s,data:n})}loadSegment_(e){if(this.state="WAITING",this.pendingSegment_=e,this.trimBackBuffer_(e),typeof e.timestampOffset=="number"&&this.transmuxer_&&this.transmuxer_.postMessage({action:"clearAllMp4Captions"}),!this.hasEnoughInfoToLoad_()){Gc(this),this.loadQueue_.push(()=>{const t=Jt({},e,{forceTimestampOffset:!0});Jt(e,this.generateSegmentInfo_(t)),this.isPendingTimestampOffset_=!1,this.updateTransmuxerAndRequestSegment_(e)});return}this.updateTransmuxerAndRequestSegment_(e)}updateTransmuxerAndRequestSegment_(e){this.shouldUpdateTransmuxerTimestampOffset_(e.timestampOffset)&&(this.gopBuffer_.length=0,e.gopsToAlignWith=[],this.timeMapping_=0,this.transmuxer_.postMessage({action:"reset"}),this.transmuxer_.postMessage({action:"setTimestampOffset",timestampOffset:e.timestampOffset}));const t=this.createSimplifiedSegmentObj_(e),r=this.isEndOfStream_(e.mediaIndex,e.playlist,e.partIndex),n=this.mediaIndex!==null,s=e.timeline!==this.currentTimeline_&&e.timeline>0,a=r||n&&s;this.logger_(`Requesting
${r6(e.uri)}
${pf(e)}`),t.map&&!t.map.bytes&&(this.logger_("going to request init segment."),this.appendInitSegment_={video:!0,audio:!0}),e.abortRequests=Yle({xhr:this.vhs_.xhr,xhrOptions:this.xhrOptions_,decryptionWorker:this.decrypter_,segment:t,abortFn:this.handleAbort_.bind(this,e),progressFn:this.handleProgress_.bind(this),trackInfoFn:this.handleTrackInfo_.bind(this),timingInfoFn:this.handleTimingInfo_.bind(this),videoSegmentTimingInfoFn:this.handleSegmentTimingInfo_.bind(this,"video",e.requestId),audioSegmentTimingInfoFn:this.handleSegmentTimingInfo_.bind(this,"audio",e.requestId),captionsFn:this.handleCaptions_.bind(this),isEndOfTimeline:a,endedTimelineFn:()=>{this.logger_("received endedtimeline callback")},id3Fn:this.handleId3_.bind(this),dataFn:this.handleData_.bind(this),doneFn:this.segmentRequestFinished_.bind(this),onTransmuxerLog:({message:o,level:l,stream:u})=>{this.logger_(`${pf(e)} logged from transmuxer stream ${u} as a ${l}: ${o}`)},triggerSegmentEventFn:({type:o,segment:l,keyInfo:u,trackInfo:c,timingInfo:h})=>{const g={segmentInfo:th({segment:l})};u&&(g.keyInfo=u),c&&(g.trackInfo=c),h&&(g.timingInfo=h),this.trigger({type:o,metadata:g})}})}trimBackBuffer_(e){const t=xue(this.seekable_(),this.currentTime_(),this.playlist_.targetDuration||10);t>0&&this.remove(0,t)}createSimplifiedSegmentObj_(e){const t=e.segment,r=e.part,n=e.segment.key||e.segment.map&&e.segment.map.key,s=e.segment.map&&!e.segment.map.bytes,a={resolvedUri:r?r.resolvedUri:t.resolvedUri,byterange:r?r.byterange:t.byterange,requestId:e.requestId,transmuxer:e.transmuxer,audioAppendStart:e.audioAppendStart,gopsToAlignWith:e.gopsToAlignWith,part:e.part,type:this.loaderType_,start:e.startOfSegment,duration:e.duration,isEncrypted:n,isMediaInitialization:s},o=e.playlist.segments[e.mediaIndex-1];if(o&&o.timeline===t.timeline&&(o.videoTimingInfo?a.baseStartTime=o.videoTimingInfo.transmuxedDecodeEnd:o.audioTimingInfo&&(a.baseStartTime=o.audioTimingInfo.transmuxedDecodeEnd)),t.key){const l=t.key.iv||new Uint32Array([0,0,0,e.mediaIndex+e.playlist.mediaSequence]);a.key=this.segmentKey(t.key),a.key.iv=l}return t.map&&(a.map=this.initSegmentForMap(t.map)),a}saveTransferStats_(e){this.mediaRequests+=1,e&&(this.mediaBytesTransferred+=e.bytesReceived,this.mediaTransferDuration+=e.roundTripTime)}saveBandwidthRelatedStats_(e,t){if(this.pendingSegment_.byteLength=t.bytesReceived,e<Cv){this.logger_(`Ignoring segment's bandwidth because its duration of ${e} is less than the min to record ${Cv}`);return}const r={bandwidthInfo:{from:this.bandwidth,to:t.bandwidth}};this.trigger({type:"bandwidthupdated",metadata:r}),this.bandwidth=t.bandwidth,this.roundTrip=t.roundTripTime}handleTimeout_(){this.mediaRequestsTimedout+=1,this.bandwidth=1,this.roundTrip=NaN,this.trigger("bandwidthupdate"),this.trigger("timeout")}segmentRequestFinished_(e,t,r){if(this.callQueue_.length){this.callQueue_.push(this.segmentRequestFinished_.bind(this,e,t,r));return}if(this.saveTransferStats_(t.stats),!this.pendingSegment_||t.requestId!==this.pendingSegment_.requestId)return;if(e){if(this.pendingSegment_=null,this.state="READY",e.code===ru.ABORTED)return;if(this.pause(),e.code===ru.TIMEOUT){this.handleTimeout_();return}this.mediaRequestsErrored+=1,this.error(e),this.trigger("error");return}const n=this.pendingSegment_;this.saveBandwidthRelatedStats_(n.duration,t.stats),n.endOfAllRequests=t.endOfAllRequests,r.gopInfo&&(this.gopBuffer_=pue(this.gopBuffer_,r.gopInfo,this.safeAppend_)),this.state="APPENDING",this.trigger("appending"),this.waitForAppendsToComplete_(n)}setTimeMapping_(e){const t=this.syncController_.mappingForTimeline(e);t!==null&&(this.timeMapping_=t)}updateMediaSecondsLoaded_(e){typeof e.start=="number"&&typeof e.end=="number"?this.mediaSecondsLoaded+=e.end-e.start:this.mediaSecondsLoaded+=e.duration}shouldUpdateTransmuxerTimestampOffset_(e){return e===null?!1:this.loaderType_==="main"&&e!==this.sourceUpdater_.videoTimestampOffset()||!this.audioDisabled_&&e!==this.sourceUpdater_.audioTimestampOffset()}trueSegmentStart_({currentStart:e,playlist:t,mediaIndex:r,firstVideoFrameTimeForData:n,currentVideoTimestampOffset:s,useVideoTimingInfo:a,videoTimingInfo:o,audioTimingInfo:l}){if(typeof e<"u")return e;if(!a)return l.start;const u=t.segments[r-1];return r===0||!u||typeof u.start>"u"||u.end!==n+s?n:o.start}waitForAppendsToComplete_(e){const t=this.getCurrentMediaInfo_(e);if(!t){this.error({message:"No starting media returned, likely due to an unsupported media format.",playlistExclusionDuration:1/0}),this.trigger("error");return}const{hasAudio:r,hasVideo:n,isMuxed:s}=t,a=this.loaderType_==="main"&&n,o=!this.audioDisabled_&&r&&!s;if(e.waitingOnAppends=0,!e.hasAppendedData_){!e.timingInfo&&typeof e.timestampOffset=="number"&&(this.isPendingTimestampOffset_=!0),e.timingInfo={start:0},e.waitingOnAppends++,this.isPendingTimestampOffset_||(this.updateSourceBufferTimestampOffset_(e),this.processMetadataQueue_()),this.checkAppendsDone_(e);return}a&&e.waitingOnAppends++,o&&e.waitingOnAppends++,a&&this.sourceUpdater_.videoQueueCallback(this.checkAppendsDone_.bind(this,e)),o&&this.sourceUpdater_.audioQueueCallback(this.checkAppendsDone_.bind(this,e))}checkAppendsDone_(e){this.checkForAbort_(e.requestId)||(e.waitingOnAppends--,e.waitingOnAppends===0&&this.handleAppendsDone_())}checkForIllegalMediaSwitch(e){const t=_ue(this.loaderType_,this.getCurrentMediaInfo_(),e);return t?(this.error({message:t,playlistExclusionDuration:1/0}),this.trigger("error"),!0):!1}updateSourceBufferTimestampOffset_(e){if(e.timestampOffset===null||typeof e.timingInfo.start!="number"||e.changedTimestampOffset||this.loaderType_!=="main")return;let t=!1;e.timestampOffset-=this.getSegmentStartTimeForTimestampOffsetCalculation_({videoTimingInfo:e.segment.videoTimingInfo,audioTimingInfo:e.segment.audioTimingInfo,timingInfo:e.timingInfo}),e.changedTimestampOffset=!0,e.timestampOffset!==this.sourceUpdater_.videoTimestampOffset()&&(this.sourceUpdater_.videoTimestampOffset(e.timestampOffset),t=!0),e.timestampOffset!==this.sourceUpdater_.audioTimestampOffset()&&(this.sourceUpdater_.audioTimestampOffset(e.timestampOffset),t=!0),t&&this.trigger("timestampoffset")}getSegmentStartTimeForTimestampOffsetCalculation_({videoTimingInfo:e,audioTimingInfo:t,timingInfo:r}){return this.useDtsForTimestampOffset_?e&&typeof e.transmuxedDecodeStart=="number"?e.transmuxedDecodeStart:t&&typeof t.transmuxedDecodeStart=="number"?t.transmuxedDecodeStart:r.start:r.start}updateTimingInfoEnd_(e){e.timingInfo=e.timingInfo||{};const t=this.getMediaInfo_(),n=this.loaderType_==="main"&&t&&t.hasVideo&&e.videoTimingInfo?e.videoTimingInfo:e.audioTimingInfo;n&&(e.timingInfo.end=typeof n.end=="number"?n.end:n.start+e.duration)}handleAppendsDone_(){if(this.pendingSegment_){const l={segmentInfo:th({type:this.loaderType_,segment:this.pendingSegment_})};this.trigger({type:"appendsdone",metadata:l})}if(!this.pendingSegment_){this.state="READY",this.paused()||this.monitorBuffer_();return}const e=this.pendingSegment_;e.part&&e.part.syncInfo?e.part.syncInfo.markAppended():e.segment.syncInfo&&e.segment.syncInfo.markAppended(),this.updateTimingInfoEnd_(e),this.shouldSaveSegmentTimingInfo_&&this.syncController_.saveSegmentTimingInfo({segmentInfo:e,shouldSaveTimelineMapping:this.loaderType_==="main"});const t=wue(e,this.sourceType_);if(t&&(t.severity==="warn"?_e.log.warn(t.message):this.logger_(t.message)),this.recordThroughput_(e),this.pendingSegment_=null,this.state="READY",e.isSyncRequest&&(this.trigger("syncinfoupdate"),!e.hasAppendedData_)){this.logger_(`Throwing away un-appended sync request ${pf(e)}`);return}this.logger_(`Appended ${pf(e)}`),this.addSegmentMetadataCue_(e),this.fetchAtBuffer_=!0,this.currentTimeline_!==e.timeline&&(this.timelineChangeController_.lastTimelineChange({type:this.loaderType_,from:this.currentTimeline_,to:e.timeline}),this.loaderType_==="main"&&!this.audioDisabled_&&this.timelineChangeController_.lastTimelineChange({type:"audio",from:this.currentTimeline_,to:e.timeline})),this.currentTimeline_=e.timeline,this.trigger("syncinfoupdate");const r=e.segment,n=e.part,s=r.end&&this.currentTime_()-r.end>e.playlist.targetDuration*3,a=n&&n.end&&this.currentTime_()-n.end>e.playlist.partTargetDuration*3;if(s||a){this.logger_(`bad ${s?"segment":"part"} ${pf(e)}`),this.resetEverything();return}this.mediaIndex!==null&&this.trigger("bandwidthupdate"),this.trigger("progress"),this.mediaIndex=e.mediaIndex,this.partIndex=e.partIndex,this.isEndOfStream_(e.mediaIndex,e.playlist,e.partIndex)&&this.endOfStream(),this.trigger("appended"),e.hasAppendedData_&&this.mediaAppends++,this.paused()||this.monitorBuffer_()}recordThroughput_(e){if(e.duration<Cv){this.logger_(`Ignoring segment's throughput because its duration of ${e.duration} is less than the min to record ${Cv}`);return}const t=this.throughput.rate,r=Date.now()-e.endOfAllRequests+1,n=Math.floor(e.byteLength/r*8*1e3);this.throughput.rate+=(n-t)/++this.throughput.count}addSegmentMetadataCue_(e){if(!this.segmentMetadataTrack_)return;const t=e.segment,r=t.start,n=t.end;if(!qO(r)||!qO(n))return;Xm(r,n,this.segmentMetadataTrack_);const s=X.WebKitDataCue||X.VTTCue,a={custom:t.custom,dateTimeObject:t.dateTimeObject,dateTimeString:t.dateTimeString,programDateTime:t.programDateTime,bandwidth:e.playlist.attributes.BANDWIDTH,resolution:e.playlist.attributes.RESOLUTION,codecs:e.playlist.attributes.CODECS,byteLength:e.byteLength,uri:e.uri,timeline:e.timeline,playlist:e.playlist.id,start:r,end:n},o=JSON.stringify(a),l=new s(r,n,o);l.value=a,this.segmentMetadataTrack_.addCue(l)}};function Zu(){}const i6=function(i){return typeof i!="string"?i:i.replace(/./,e=>e.toUpperCase())},kue=["video","audio"],rE=(i,e)=>{const t=e[`${i}Buffer`];return t&&t.updating||e.queuePending[i]},Aue=(i,e)=>{for(let t=0;t<e.length;t++){const r=e[t];if(r.type==="mediaSource")return null;if(r.type===i)return t}return null},Qf=(i,e)=>{if(e.queue.length===0)return;let t=0,r=e.queue[t];if(r.type==="mediaSource"){!e.updating()&&e.mediaSource.readyState!=="closed"&&(e.queue.shift(),r.action(e),r.doneFn&&r.doneFn(),Qf("audio",e),Qf("video",e));return}if(i!=="mediaSource"&&!(!e.ready()||e.mediaSource.readyState==="closed"||rE(i,e))){if(r.type!==i){if(t=Aue(i,e.queue),t===null)return;r=e.queue[t]}if(e.queue.splice(t,1),e.queuePending[i]=r,r.action(i,e),!r.doneFn){e.queuePending[i]=null,Qf(i,e);return}}},n6=(i,e)=>{const t=e[`${i}Buffer`],r=i6(i);t&&(t.removeEventListener("updateend",e[`on${r}UpdateEnd_`]),t.removeEventListener("error",e[`on${r}Error_`]),e.codecs[i]=null,e[`${i}Buffer`]=null)},Gl=(i,e)=>i&&e&&Array.prototype.indexOf.call(i.sourceBuffers,e)!==-1,Xa={appendBuffer:(i,e,t)=>(r,n)=>{const s=n[`${r}Buffer`];if(Gl(n.mediaSource,s)){n.logger_(`Appending segment ${e.mediaIndex}'s ${i.length} bytes to ${r}Buffer`);try{s.appendBuffer(i)}catch(a){n.logger_(`Error with code ${a.code} `+(a.code===L5?"(QUOTA_EXCEEDED_ERR) ":"")+`when appending segment ${e.mediaIndex} to ${r}Buffer`),n.queuePending[r]=null,t(a)}}},remove:(i,e)=>(t,r)=>{const n=r[`${t}Buffer`];if(Gl(r.mediaSource,n)){r.logger_(`Removing ${i} to ${e} from ${t}Buffer`);try{n.remove(i,e)}catch{r.logger_(`Remove ${i} to ${e} from ${t}Buffer failed`)}}},timestampOffset:i=>(e,t)=>{const r=t[`${e}Buffer`];Gl(t.mediaSource,r)&&(t.logger_(`Setting ${e}timestampOffset to ${i}`),r.timestampOffset=i)},callback:i=>(e,t)=>{i()},endOfStream:i=>e=>{if(e.mediaSource.readyState==="open"){e.logger_(`Calling mediaSource endOfStream(${i||""})`);try{e.mediaSource.endOfStream(i)}catch(t){_e.log.warn("Failed to call media source endOfStream",t)}}},duration:i=>e=>{e.logger_(`Setting mediaSource duration to ${i}`);try{e.mediaSource.duration=i}catch(t){_e.log.warn("Failed to set media source duration",t)}},abort:()=>(i,e)=>{if(e.mediaSource.readyState!=="open")return;const t=e[`${i}Buffer`];if(Gl(e.mediaSource,t)){e.logger_(`calling abort on ${i}Buffer`);try{t.abort()}catch(r){_e.log.warn(`Failed to abort on ${i}Buffer`,r)}}},addSourceBuffer:(i,e)=>t=>{const r=i6(i),n=du(e);t.logger_(`Adding ${i}Buffer with codec ${e} to mediaSource`);const s=t.mediaSource.addSourceBuffer(n);s.addEventListener("updateend",t[`on${r}UpdateEnd_`]),s.addEventListener("error",t[`on${r}Error_`]),t.codecs[i]=e,t[`${i}Buffer`]=s},removeSourceBuffer:i=>e=>{const t=e[`${i}Buffer`];if(n6(i,e),!!Gl(e.mediaSource,t)){e.logger_(`Removing ${i}Buffer with codec ${e.codecs[i]} from mediaSource`);try{e.mediaSource.removeSourceBuffer(t)}catch(r){_e.log.warn(`Failed to removeSourceBuffer ${i}Buffer`,r)}}},changeType:i=>(e,t)=>{const r=t[`${e}Buffer`],n=du(i);if(!Gl(t.mediaSource,r))return;const s=i.substring(0,i.indexOf(".")),a=t.codecs[e];if(a.substring(0,a.indexOf("."))===s)return;const l={codecsChangeInfo:{from:a,to:i}};t.trigger({type:"codecschange",metadata:l}),t.logger_(`changing ${e}Buffer codec from ${a} to ${i}`);try{r.changeType(n),t.codecs[e]=i}catch(u){l.errorType=_e.Error.StreamingCodecsChangeError,l.error=u,u.metadata=l,t.error_=u,t.trigger("error"),_e.log.warn(`Failed to changeType on ${e}Buffer`,u)}}},Ya=({type:i,sourceUpdater:e,action:t,doneFn:r,name:n})=>{e.queue.push({type:i,action:t,doneFn:r,name:n}),Qf(i,e)},KO=(i,e)=>t=>{const r=e[`${i}Buffered`](),n=joe(r);if(e.logger_(`received "updateend" event for ${i} Source Buffer: `,n),e.queuePending[i]){const s=e.queuePending[i].doneFn;e.queuePending[i]=null,s&&s(e[`${i}Error_`])}Qf(i,e)};let s6=class extends _e.EventTarget{constructor(e){super(),this.mediaSource=e,this.sourceopenListener_=()=>Qf("mediaSource",this),this.mediaSource.addEventListener("sourceopen",this.sourceopenListener_),this.logger_=$o("SourceUpdater"),this.audioTimestampOffset_=0,this.videoTimestampOffset_=0,this.queue=[],this.queuePending={audio:null,video:null},this.delayedAudioAppendQueue_=[],this.videoAppendQueued_=!1,this.codecs={},this.onVideoUpdateEnd_=KO("video",this),this.onAudioUpdateEnd_=KO("audio",this),this.onVideoError_=t=>{this.videoError_=t},this.onAudioError_=t=>{this.audioError_=t},this.createdSourceBuffers_=!1,this.initializedEme_=!1,this.triggeredReady_=!1}initializedEme(){this.initializedEme_=!0,this.triggerReady()}hasCreatedSourceBuffers(){return this.createdSourceBuffers_}hasInitializedAnyEme(){return this.initializedEme_}ready(){return this.hasCreatedSourceBuffers()&&this.hasInitializedAnyEme()}createSourceBuffers(e){this.hasCreatedSourceBuffers()||(this.addOrChangeSourceBuffers(e),this.createdSourceBuffers_=!0,this.trigger("createdsourcebuffers"),this.triggerReady())}triggerReady(){this.ready()&&!this.triggeredReady_&&(this.triggeredReady_=!0,this.trigger("ready"))}addSourceBuffer(e,t){Ya({type:"mediaSource",sourceUpdater:this,action:Xa.addSourceBuffer(e,t),name:"addSourceBuffer"})}abort(e){Ya({type:e,sourceUpdater:this,action:Xa.abort(e),name:"abort"})}removeSourceBuffer(e){if(!this.canRemoveSourceBuffer()){_e.log.error("removeSourceBuffer is not supported!");return}Ya({type:"mediaSource",sourceUpdater:this,action:Xa.removeSourceBuffer(e),name:"removeSourceBuffer"})}canRemoveSourceBuffer(){return!_e.browser.IS_FIREFOX&&X.MediaSource&&X.MediaSource.prototype&&typeof X.MediaSource.prototype.removeSourceBuffer=="function"}static canChangeType(){return X.SourceBuffer&&X.SourceBuffer.prototype&&typeof X.SourceBuffer.prototype.changeType=="function"}canChangeType(){return this.constructor.canChangeType()}changeType(e,t){if(!this.canChangeType()){_e.log.error("changeType is not supported!");return}Ya({type:e,sourceUpdater:this,action:Xa.changeType(t),name:"changeType"})}addOrChangeSourceBuffers(e){if(!e||typeof e!="object"||Object.keys(e).length===0)throw new Error("Cannot addOrChangeSourceBuffers to undefined codecs");Object.keys(e).forEach(t=>{const r=e[t];if(!this.hasCreatedSourceBuffers())return this.addSourceBuffer(t,r);this.canChangeType()&&this.changeType(t,r)})}appendBuffer(e,t){const{segmentInfo:r,type:n,bytes:s}=e;if(this.processedAppend_=!0,n==="audio"&&this.videoBuffer&&!this.videoAppendQueued_){this.delayedAudioAppendQueue_.push([e,t]),this.logger_(`delayed audio append of ${s.length} until video append`);return}const a=t;if(Ya({type:n,sourceUpdater:this,action:Xa.appendBuffer(s,r||{mediaIndex:-1},a),doneFn:t,name:"appendBuffer"}),n==="video"){if(this.videoAppendQueued_=!0,!this.delayedAudioAppendQueue_.length)return;const o=this.delayedAudioAppendQueue_.slice();this.logger_(`queuing delayed audio ${o.length} appendBuffers`),this.delayedAudioAppendQueue_.length=0,o.forEach(l=>{this.appendBuffer.apply(this,l)})}}audioBuffered(){return Gl(this.mediaSource,this.audioBuffer)&&this.audioBuffer.buffered?this.audioBuffer.buffered:fs()}videoBuffered(){return Gl(this.mediaSource,this.videoBuffer)&&this.videoBuffer.buffered?this.videoBuffer.buffered:fs()}buffered(){const e=Gl(this.mediaSource,this.videoBuffer)?this.videoBuffer:null,t=Gl(this.mediaSource,this.audioBuffer)?this.audioBuffer:null;return t&&!e?this.audioBuffered():e&&!t?this.videoBuffered():Hoe(this.audioBuffered(),this.videoBuffered())}setDuration(e,t=Zu){Ya({type:"mediaSource",sourceUpdater:this,action:Xa.duration(e),name:"duration",doneFn:t})}endOfStream(e=null,t=Zu){typeof e!="string"&&(e=void 0),Ya({type:"mediaSource",sourceUpdater:this,action:Xa.endOfStream(e),name:"endOfStream",doneFn:t})}removeAudio(e,t,r=Zu){if(!this.audioBuffered().length||this.audioBuffered().end(0)===0){r();return}Ya({type:"audio",sourceUpdater:this,action:Xa.remove(e,t),doneFn:r,name:"remove"})}removeVideo(e,t,r=Zu){if(!this.videoBuffered().length||this.videoBuffered().end(0)===0){r();return}Ya({type:"video",sourceUpdater:this,action:Xa.remove(e,t),doneFn:r,name:"remove"})}updating(){return!!(rE("audio",this)||rE("video",this))}audioTimestampOffset(e){return typeof e<"u"&&this.audioBuffer&&this.audioTimestampOffset_!==e&&(Ya({type:"audio",sourceUpdater:this,action:Xa.timestampOffset(e),name:"timestampOffset"}),this.audioTimestampOffset_=e),this.audioTimestampOffset_}videoTimestampOffset(e){return typeof e<"u"&&this.videoBuffer&&this.videoTimestampOffset_!==e&&(Ya({type:"video",sourceUpdater:this,action:Xa.timestampOffset(e),name:"timestampOffset"}),this.videoTimestampOffset_=e),this.videoTimestampOffset_}audioQueueCallback(e){this.audioBuffer&&Ya({type:"audio",sourceUpdater:this,action:Xa.callback(e),name:"callback"})}videoQueueCallback(e){this.videoBuffer&&Ya({type:"video",sourceUpdater:this,action:Xa.callback(e),name:"callback"})}dispose(){this.trigger("dispose"),kue.forEach(e=>{this.abort(e),this.canRemoveSourceBuffer()?this.removeSourceBuffer(e):this[`${e}QueueCallback`](()=>n6(e,this))}),this.videoAppendQueued_=!1,this.delayedAudioAppendQueue_.length=0,this.sourceopenListener_&&this.mediaSource.removeEventListener("sourceopen",this.sourceopenListener_),this.off()}};const XO=i=>decodeURIComponent(escape(String.fromCharCode.apply(null,i))),Iue=i=>{const e=new Uint8Array(i);return Array.from(e).map(t=>t.toString(16).padStart(2,"0")).join("")},YO=new Uint8Array(`

`.split("").map(i=>i.charCodeAt(0)));let Due=class extends Error{constructor(){super("Trying to parse received VTT cues, but there is no WebVTT. Make sure vtt.js is loaded.")}},Pue=class extends tE{constructor(e,t={}){super(e,t),this.mediaSource_=null,this.subtitlesTrack_=null,this.featuresNativeTextTracks_=e.featuresNativeTextTracks,this.loadVttJs=e.loadVttJs,this.shouldSaveSegmentTimingInfo_=!1}createTransmuxer_(){return null}buffered_(){if(!this.subtitlesTrack_||!this.subtitlesTrack_.cues||!this.subtitlesTrack_.cues.length)return fs();const e=this.subtitlesTrack_.cues,t=e[0].startTime,r=e[e.length-1].startTime;return fs([[t,r]])}initSegmentForMap(e,t=!1){if(!e)return null;const r=$_(e);let n=this.initSegments_[r];if(t&&!n&&e.bytes){const s=YO.byteLength+e.bytes.byteLength,a=new Uint8Array(s);a.set(e.bytes),a.set(YO,e.bytes.byteLength),this.initSegments_[r]=n={resolvedUri:e.resolvedUri,byterange:e.byterange,bytes:a}}return n||e}couldBeginLoading_(){return this.playlist_&&this.subtitlesTrack_&&!this.paused()}init_(){return this.state="READY",this.resetEverything(),this.monitorBuffer_()}track(e){return typeof e>"u"?this.subtitlesTrack_:(this.subtitlesTrack_=e,this.state==="INIT"&&this.couldBeginLoading_()&&this.init_(),this.subtitlesTrack_)}remove(e,t){Xm(e,t,this.subtitlesTrack_)}fillBuffer_(){const e=this.chooseNextRequest_();if(e){if(this.syncController_.timestampOffsetForTimeline(e.timeline)===null){const t=()=>{this.state="READY",this.paused()||this.monitorBuffer_()};this.syncController_.one("timestampoffset",t),this.state="WAITING_ON_TIMELINE";return}this.loadSegment_(e)}}timestampOffsetForSegment_(){return null}chooseNextRequest_(){return this.skipEmptySegments_(super.chooseNextRequest_())}skipEmptySegments_(e){for(;e&&e.segment.empty;){if(e.mediaIndex+1>=e.playlist.segments.length){e=null;break}e=this.generateSegmentInfo_({playlist:e.playlist,mediaIndex:e.mediaIndex+1,startOfSegment:e.startOfSegment+e.duration,isSyncRequest:e.isSyncRequest})}return e}stopForError(e){this.error(e),this.state="READY",this.pause(),this.trigger("error")}segmentRequestFinished_(e,t,r){if(!this.subtitlesTrack_){this.state="READY";return}if(this.saveTransferStats_(t.stats),!this.pendingSegment_){this.state="READY",this.mediaRequestsAborted+=1;return}if(e){e.code===ru.TIMEOUT&&this.handleTimeout_(),e.code===ru.ABORTED?this.mediaRequestsAborted+=1:this.mediaRequestsErrored+=1,this.stopForError(e);return}const n=this.pendingSegment_;this.saveBandwidthRelatedStats_(n.duration,t.stats),t.key&&this.segmentKey(t.key,!0),this.state="APPENDING",this.trigger("appending");const s=n.segment;if(s.map&&(s.map.bytes=t.map.bytes),n.bytes=t.bytes,typeof X.WebVTT!="function"&&typeof this.loadVttJs=="function"){this.state="WAITING_ON_VTTJS",this.loadVttJs().then(()=>this.segmentRequestFinished_(e,t,r),()=>this.stopForError({message:"Error loading vtt.js"}));return}s.requested=!0;try{this.parseVTTCues_(n)}catch(a){this.stopForError({message:a.message,metadata:{errorType:_e.Error.StreamingVttParserError,error:a}});return}if(this.updateTimeMapping_(n,this.syncController_.timelines[n.timeline],this.playlist_),n.cues.length?n.timingInfo={start:n.cues[0].startTime,end:n.cues[n.cues.length-1].endTime}:n.timingInfo={start:n.startOfSegment,end:n.startOfSegment+n.duration},n.isSyncRequest){this.trigger("syncinfoupdate"),this.pendingSegment_=null,this.state="READY";return}n.byteLength=n.bytes.byteLength,this.mediaSecondsLoaded+=s.duration,n.cues.forEach(a=>{this.subtitlesTrack_.addCue(this.featuresNativeTextTracks_?new X.VTTCue(a.startTime,a.endTime,a.text):a)}),hue(this.subtitlesTrack_),this.handleAppendsDone_()}handleData_(){}updateTimingInfoEnd_(){}parseVTTCues_(e){let t,r=!1;if(typeof X.WebVTT!="function")throw new Due;typeof X.TextDecoder=="function"?t=new X.TextDecoder("utf8"):(t=X.WebVTT.StringDecoder(),r=!0);const n=new X.WebVTT.Parser(X,X.vttjs,t);if(e.cues=[],e.timestampmap={MPEGTS:0,LOCAL:0},n.oncue=e.cues.push.bind(e.cues),n.ontimestampmap=a=>{e.timestampmap=a},n.onparsingerror=a=>{_e.log.warn("Error encountered when parsing cues: "+a.message)},e.segment.map){let a=e.segment.map.bytes;r&&(a=XO(a)),n.parse(a)}let s=e.bytes;r&&(s=XO(s)),n.parse(s),n.flush()}updateTimeMapping_(e,t,r){const n=e.segment;if(!t)return;if(!e.cues.length){n.empty=!0;return}const{MPEGTS:s,LOCAL:a}=e.timestampmap,l=s/Aa.ONE_SECOND_IN_TS-a+t.mapping;if(e.cues.forEach(u=>{const c=u.endTime-u.startTime,h=this.handleRollover_(u.startTime+l,t.time);u.startTime=Math.max(h,0),u.endTime=Math.max(h+c,0)}),!r.syncInfo){const u=e.cues[0].startTime,c=e.cues[e.cues.length-1].startTime;r.syncInfo={mediaSequence:r.mediaSequence+e.mediaIndex,time:Math.min(u,c-n.duration)}}}handleRollover_(e,t){if(t===null)return e;let r=e*Aa.ONE_SECOND_IN_TS;const n=t*Aa.ONE_SECOND_IN_TS;let s;for(n<r?s=-8589934592:s=8589934592;Math.abs(r-n)>4294967296;)r+=s;return r/Aa.ONE_SECOND_IN_TS}};const Rue=function(i,e){const t=i.cues;for(let r=0;r<t.length;r++){const n=t[r];if(e>=n.adStartTime&&e<=n.adEndTime)return n}return null},Lue=function(i,e,t=0){if(!i.segments)return;let r=t,n;for(let s=0;s<i.segments.length;s++){const a=i.segments[s];if(n||(n=Rue(e,r+a.duration/2)),n){if("cueIn"in a){n.endTime=r,n.adEndTime=r,r+=a.duration,n=null;continue}if(r<n.endTime){r+=a.duration;continue}n.endTime+=a.duration}else if("cueOut"in a&&(n=new X.VTTCue(r,r+a.duration,a.cueOut),n.adStartTime=r,n.adEndTime=r+parseFloat(a.cueOut),e.addCue(n)),"cueOutCont"in a){const[o,l]=a.cueOutCont.split("/").map(parseFloat);n=new X.VTTCue(r,r+a.duration,""),n.adStartTime=r-o,n.adEndTime=n.adStartTime+l,e.addCue(n)}r+=a.duration}};class QO{constructor({start:e,end:t,segmentIndex:r,partIndex:n=null,appended:s=!1}){this.start_=e,this.end_=t,this.segmentIndex_=r,this.partIndex_=n,this.appended_=s}isInRange(e){return e>=this.start&&e<this.end}markAppended(){this.appended_=!0}resetAppendedStatus(){this.appended_=!1}get isAppended(){return this.appended_}get start(){return this.start_}get end(){return this.end_}get segmentIndex(){return this.segmentIndex_}get partIndex(){return this.partIndex_}}class Oue{constructor(e,t=[]){this.segmentSyncInfo_=e,this.partsSyncInfo_=t}get segmentSyncInfo(){return this.segmentSyncInfo_}get partsSyncInfo(){return this.partsSyncInfo_}get hasPartsSyncInfo(){return this.partsSyncInfo_.length>0}resetAppendStatus(){this.segmentSyncInfo_.resetAppendedStatus(),this.partsSyncInfo_.forEach(e=>e.resetAppendedStatus())}}class a6{constructor(){this.storage_=new Map,this.diagnostics_="",this.isReliable_=!1,this.start_=-1/0,this.end_=1/0}get start(){return this.start_}get end(){return this.end_}get diagnostics(){return this.diagnostics_}get isReliable(){return this.isReliable_}resetAppendedStatus(){this.storage_.forEach(e=>e.resetAppendStatus())}update(e,t){const{mediaSequence:r,segments:n}=e;if(this.isReliable_=this.isReliablePlaylist_(r,n),!!this.isReliable_)return this.updateStorage_(n,r,this.calculateBaseTime_(r,t))}getSyncInfoForTime(e){for(const{segmentSyncInfo:t,partsSyncInfo:r}of this.storage_.values())if(r.length){for(const n of r)if(n.isInRange(e))return n}else if(t.isInRange(e))return t;return null}getSyncInfoForMediaSequence(e){return this.storage_.get(e)}updateStorage_(e,t,r){const n=new Map;let s=`
`,a=r,o=t;this.start_=a,e.forEach((l,u)=>{const c=this.storage_.get(o),h=a,m=h+l.duration,g=!!(c&&c.segmentSyncInfo&&c.segmentSyncInfo.isAppended),y=new QO({start:h,end:m,appended:g,segmentIndex:u});l.syncInfo=y;let _=a;const T=(l.parts||[]).map((E,w)=>{const D=_,R=_+E.duration,A=!!(c&&c.partsSyncInfo&&c.partsSyncInfo[w]&&c.partsSyncInfo[w].isAppended),L=new QO({start:D,end:R,appended:A,segmentIndex:u,partIndex:w});return _=R,s+=`Media Sequence: ${o}.${w} | Range: ${D} --> ${R} | Appended: ${A}
`,E.syncInfo=L,L});n.set(o,new Oue(y,T)),s+=`${r6(l.resolvedUri)} | Media Sequence: ${o} | Range: ${h} --> ${m} | Appended: ${g}
`,o++,a=m}),this.end_=a,this.storage_=n,this.diagnostics_=s}calculateBaseTime_(e,t){return this.storage_.size?this.storage_.has(e)?this.storage_.get(e).segmentSyncInfo.start:t:0}isReliablePlaylist_(e,t){return e!=null&&Array.isArray(t)&&t.length}}class JO extends a6{constructor(e){super(),this.parent_=e}calculateBaseTime_(e,t){if(!this.storage_.size){const r=this.parent_.getSyncInfoForMediaSequence(e);return r?r.segmentSyncInfo.start:0}return super.calculateBaseTime_(e,t)}}const Mue=86400,s1=[{name:"VOD",run:(i,e,t,r,n)=>t!==1/0?{time:0,segmentIndex:0,partIndex:null}:null},{name:"MediaSequence",run:(i,e,t,r,n,s)=>{const a=i.getMediaSequenceSync(s);if(!a||!a.isReliable)return null;const o=a.getSyncInfoForTime(n);return o?{time:o.start,partIndex:o.partIndex,segmentIndex:o.segmentIndex}:null}},{name:"ProgramDateTime",run:(i,e,t,r,n)=>{if(!Object.keys(i.timelineToDatetimeMappings).length)return null;let s=null,a=null;const o=WC(e);n=n||0;for(let l=0;l<o.length;l++){const u=e.endList||n===0?l:o.length-(l+1),c=o[u],h=c.segment,m=i.timelineToDatetimeMappings[h.timeline];if(!m||!h.dateTimeObject)continue;let y=h.dateTimeObject.getTime()/1e3+m;if(h.parts&&typeof c.partIndex=="number")for(let T=0;T<c.partIndex;T++)y+=h.parts[T].duration;const _=Math.abs(n-y);if(a!==null&&(_===0||a<_))break;a=_,s={time:y,segmentIndex:c.segmentIndex,partIndex:c.partIndex}}return s}},{name:"Segment",run:(i,e,t,r,n)=>{let s=null,a=null;n=n||0;const o=WC(e);for(let l=0;l<o.length;l++){const u=e.endList||n===0?l:o.length-(l+1),c=o[u],h=c.segment,m=c.part&&c.part.start||h&&h.start;if(h.timeline===r&&typeof m<"u"){const g=Math.abs(n-m);if(a!==null&&a<g)break;(!s||a===null||a>=g)&&(a=g,s={time:m,segmentIndex:c.segmentIndex,partIndex:c.partIndex})}}return s}},{name:"Discontinuity",run:(i,e,t,r,n)=>{let s=null;if(n=n||0,e.discontinuityStarts&&e.discontinuityStarts.length){let a=null;for(let o=0;o<e.discontinuityStarts.length;o++){const l=e.discontinuityStarts[o],u=e.discontinuitySequence+o+1,c=i.discontinuities[u];if(c){const h=Math.abs(n-c.time);if(a!==null&&a<h)break;(!s||a===null||a>=h)&&(a=h,s={time:c.time,segmentIndex:l,partIndex:null})}}}return s}},{name:"Playlist",run:(i,e,t,r,n)=>e.syncInfo?{time:e.syncInfo.time,segmentIndex:e.syncInfo.mediaSequence-e.mediaSequence,partIndex:null}:null}];let Fue=class extends _e.EventTarget{constructor(e={}){super(),this.timelines=[],this.discontinuities=[],this.timelineToDatetimeMappings={};const t=new a6,r=new JO(t),n=new JO(t);this.mediaSequenceStorage_={main:t,audio:r,vtt:n},this.logger_=$o("SyncController")}getMediaSequenceSync(e){return this.mediaSequenceStorage_[e]||null}getSyncPoint(e,t,r,n,s){if(t!==1/0)return s1.find(({name:l})=>l==="VOD").run(this,e,t);const a=this.runStrategies_(e,t,r,n,s);if(!a.length)return null;for(const o of a){const{syncPoint:l,strategy:u}=o,{segmentIndex:c,time:h}=l;if(c<0)continue;const m=e.segments[c],g=h,y=g+m.duration;if(this.logger_(`Strategy: ${u}. Current time: ${n}. selected segment: ${c}. Time: [${g} -> ${y}]}`),n>=g&&n<y)return this.logger_("Found sync point with exact match: ",l),l}return this.selectSyncPoint_(a,{key:"time",value:n})}getExpiredTime(e,t){if(!e||!e.segments)return null;const r=this.runStrategies_(e,t,e.discontinuitySequence,0);if(!r.length)return null;const n=this.selectSyncPoint_(r,{key:"segmentIndex",value:0});return n.segmentIndex>0&&(n.time*=-1),Math.abs(n.time+c0({defaultDuration:e.targetDuration,durationList:e.segments,startIndex:n.segmentIndex,endIndex:0}))}runStrategies_(e,t,r,n,s){const a=[];for(let o=0;o<s1.length;o++){const l=s1[o],u=l.run(this,e,t,r,n,s);u&&(u.strategy=l.name,a.push({strategy:l.name,syncPoint:u}))}return a}selectSyncPoint_(e,t){let r=e[0].syncPoint,n=Math.abs(e[0].syncPoint[t.key]-t.value),s=e[0].strategy;for(let a=1;a<e.length;a++){const o=Math.abs(e[a].syncPoint[t.key]-t.value);o<n&&(n=o,r=e[a].syncPoint,s=e[a].strategy)}return this.logger_(`syncPoint for [${t.key}: ${t.value}] chosen with strategy [${s}]: [time:${r.time}, segmentIndex:${r.segmentIndex}`+(typeof r.partIndex=="number"?`,partIndex:${r.partIndex}`:"")+"]"),r}saveExpiredSegmentInfo(e,t){const r=t.mediaSequence-e.mediaSequence;if(r>Mue){_e.log.warn(`Not saving expired segment info. Media sequence gap ${r} is too large.`);return}for(let n=r-1;n>=0;n--){const s=e.segments[n];if(s&&typeof s.start<"u"){t.syncInfo={mediaSequence:e.mediaSequence+n,time:s.start},this.logger_(`playlist refresh sync: [time:${t.syncInfo.time}, mediaSequence: ${t.syncInfo.mediaSequence}]`),this.trigger("syncinfoupdate");break}}}setDateTimeMappingForStart(e){if(this.timelineToDatetimeMappings={},e.segments&&e.segments.length&&e.segments[0].dateTimeObject){const t=e.segments[0],r=t.dateTimeObject.getTime()/1e3;this.timelineToDatetimeMappings[t.timeline]=-r}}saveSegmentTimingInfo({segmentInfo:e,shouldSaveTimelineMapping:t}){const r=this.calculateSegmentTimeMapping_(e,e.timingInfo,t),n=e.segment;r&&(this.saveDiscontinuitySyncInfo_(e),e.playlist.syncInfo||(e.playlist.syncInfo={mediaSequence:e.playlist.mediaSequence+e.mediaIndex,time:n.start}));const s=n.dateTimeObject;n.discontinuity&&t&&s&&(this.timelineToDatetimeMappings[n.timeline]=-(s.getTime()/1e3))}timestampOffsetForTimeline(e){return typeof this.timelines[e]>"u"?null:this.timelines[e].time}mappingForTimeline(e){return typeof this.timelines[e]>"u"?null:this.timelines[e].mapping}calculateSegmentTimeMapping_(e,t,r){const n=e.segment,s=e.part;let a=this.timelines[e.timeline],o,l;if(typeof e.timestampOffset=="number")a={time:e.startOfSegment,mapping:e.startOfSegment-t.start},r&&(this.timelines[e.timeline]=a,this.trigger("timestampoffset"),this.logger_(`time mapping for timeline ${e.timeline}: [time: ${a.time}] [mapping: ${a.mapping}]`)),o=e.startOfSegment,l=t.end+a.mapping;else if(a)o=t.start+a.mapping,l=t.end+a.mapping;else return!1;return s&&(s.start=o,s.end=l),(!n.start||o<n.start)&&(n.start=o),n.end=l,!0}saveDiscontinuitySyncInfo_(e){const t=e.playlist,r=e.segment;if(r.discontinuity)this.discontinuities[r.timeline]={time:r.start,accuracy:0};else if(t.discontinuityStarts&&t.discontinuityStarts.length)for(let n=0;n<t.discontinuityStarts.length;n++){const s=t.discontinuityStarts[n],a=t.discontinuitySequence+n+1,o=s-e.mediaIndex,l=Math.abs(o);if(!this.discontinuities[a]||this.discontinuities[a].accuracy>l){let u;o<0?u=r.start-c0({defaultDuration:t.targetDuration,durationList:t.segments,startIndex:e.mediaIndex,endIndex:s}):u=r.end+c0({defaultDuration:t.targetDuration,durationList:t.segments,startIndex:e.mediaIndex+1,endIndex:s}),this.discontinuities[a]={time:u,accuracy:l}}}}dispose(){this.trigger("dispose"),this.off()}},Bue=class extends _e.EventTarget{constructor(){super(),this.pendingTimelineChanges_={},this.lastTimelineChanges_={}}clearPendingTimelineChange(e){this.pendingTimelineChanges_[e]=null,this.trigger("pendingtimelinechange")}pendingTimelineChange({type:e,from:t,to:r}){return typeof t=="number"&&typeof r=="number"&&(this.pendingTimelineChanges_[e]={type:e,from:t,to:r},this.trigger("pendingtimelinechange")),this.pendingTimelineChanges_[e]}lastTimelineChange({type:e,from:t,to:r}){if(typeof t=="number"&&typeof r=="number"){this.lastTimelineChanges_[e]={type:e,from:t,to:r},delete this.pendingTimelineChanges_[e];const n={timelineChangeInfo:{from:t,to:r}};this.trigger({type:"timelinechange",metadata:n})}return this.lastTimelineChanges_[e]}dispose(){this.trigger("dispose"),this.pendingTimelineChanges_={},this.lastTimelineChanges_={},this.off()}};const Nue=q5(W5(function(){var i=(function(){function _(){this.listeners={}}var T=_.prototype;return T.on=function(w,D){this.listeners[w]||(this.listeners[w]=[]),this.listeners[w].push(D)},T.off=function(w,D){if(!this.listeners[w])return!1;var R=this.listeners[w].indexOf(D);return this.listeners[w]=this.listeners[w].slice(0),this.listeners[w].splice(R,1),R>-1},T.trigger=function(w){var D=this.listeners[w];if(D)if(arguments.length===2)for(var R=D.length,A=0;A<R;++A)D[A].call(this,arguments[1]);else for(var L=Array.prototype.slice.call(arguments,1),F=D.length,B=0;B<F;++B)D[B].apply(this,L)},T.dispose=function(){this.listeners={}},T.pipe=function(w){this.on("data",function(D){w.push(D)})},_})();/*! @name pkcs7 @version 1.0.4 @license Apache-2.0 */function e(_){return _.subarray(0,_.byteLength-_[_.byteLength-1])}/*! @name aes-decrypter @version 4.0.2 @license Apache-2.0 */const t=function(){const _=[[[],[],[],[],[]],[[],[],[],[],[]]],T=_[0],E=_[1],w=T[4],D=E[4];let R,A,L;const F=[],B=[];let M,k,q,G,H,re;for(R=0;R<256;R++)B[(F[R]=R<<1^(R>>7)*283)^R]=R;for(A=L=0;!w[A];A^=M||1,L=B[L]||1)for(G=L^L<<1^L<<2^L<<3^L<<4,G=G>>8^G&255^99,w[A]=G,D[G]=A,q=F[k=F[M=F[A]]],re=q*16843009^k*65537^M*257^A*16843008,H=F[G]*257^G*16843008,R=0;R<4;R++)T[R][A]=H=H<<24^H>>>8,E[R][G]=re=re<<24^re>>>8;for(R=0;R<5;R++)T[R]=T[R].slice(0),E[R]=E[R].slice(0);return _};let r=null;class n{constructor(T){r||(r=t()),this._tables=[[r[0][0].slice(),r[0][1].slice(),r[0][2].slice(),r[0][3].slice(),r[0][4].slice()],[r[1][0].slice(),r[1][1].slice(),r[1][2].slice(),r[1][3].slice(),r[1][4].slice()]];let E,w,D;const R=this._tables[0][4],A=this._tables[1],L=T.length;let F=1;if(L!==4&&L!==6&&L!==8)throw new Error("Invalid aes key size");const B=T.slice(0),M=[];for(this._key=[B,M],E=L;E<4*L+28;E++)D=B[E-1],(E%L===0||L===8&&E%L===4)&&(D=R[D>>>24]<<24^R[D>>16&255]<<16^R[D>>8&255]<<8^R[D&255],E%L===0&&(D=D<<8^D>>>24^F<<24,F=F<<1^(F>>7)*283)),B[E]=B[E-L]^D;for(w=0;E;w++,E--)D=B[w&3?E:E-4],E<=4||w<4?M[w]=D:M[w]=A[0][R[D>>>24]]^A[1][R[D>>16&255]]^A[2][R[D>>8&255]]^A[3][R[D&255]]}decrypt(T,E,w,D,R,A){const L=this._key[1];let F=T^L[0],B=D^L[1],M=w^L[2],k=E^L[3],q,G,H;const re=L.length/4-2;let se,de=4;const me=this._tables[1],ue=me[0],oe=me[1],ce=me[2],te=me[3],fe=me[4];for(se=0;se<re;se++)q=ue[F>>>24]^oe[B>>16&255]^ce[M>>8&255]^te[k&255]^L[de],G=ue[B>>>24]^oe[M>>16&255]^ce[k>>8&255]^te[F&255]^L[de+1],H=ue[M>>>24]^oe[k>>16&255]^ce[F>>8&255]^te[B&255]^L[de+2],k=ue[k>>>24]^oe[F>>16&255]^ce[B>>8&255]^te[M&255]^L[de+3],de+=4,F=q,B=G,M=H;for(se=0;se<4;se++)R[(3&-se)+A]=fe[F>>>24]<<24^fe[B>>16&255]<<16^fe[M>>8&255]<<8^fe[k&255]^L[de++],q=F,F=B,B=M,M=k,k=q}}class s extends i{constructor(){super(i),this.jobs=[],this.delay=1,this.timeout_=null}processJob_(){this.jobs.shift()(),this.jobs.length?this.timeout_=setTimeout(this.processJob_.bind(this),this.delay):this.timeout_=null}push(T){this.jobs.push(T),this.timeout_||(this.timeout_=setTimeout(this.processJob_.bind(this),this.delay))}}const a=function(_){return _<<24|(_&65280)<<8|(_&16711680)>>8|_>>>24},o=function(_,T,E){const w=new Int32Array(_.buffer,_.byteOffset,_.byteLength>>2),D=new n(Array.prototype.slice.call(T)),R=new Uint8Array(_.byteLength),A=new Int32Array(R.buffer);let L,F,B,M,k,q,G,H,re;for(L=E[0],F=E[1],B=E[2],M=E[3],re=0;re<w.length;re+=4)k=a(w[re]),q=a(w[re+1]),G=a(w[re+2]),H=a(w[re+3]),D.decrypt(k,q,G,H,A,re),A[re]=a(A[re]^L),A[re+1]=a(A[re+1]^F),A[re+2]=a(A[re+2]^B),A[re+3]=a(A[re+3]^M),L=k,F=q,B=G,M=H;return R};class l{constructor(T,E,w,D){const R=l.STEP,A=new Int32Array(T.buffer),L=new Uint8Array(T.byteLength);let F=0;for(this.asyncStream_=new s,this.asyncStream_.push(this.decryptChunk_(A.subarray(F,F+R),E,w,L)),F=R;F<A.length;F+=R)w=new Uint32Array([a(A[F-4]),a(A[F-3]),a(A[F-2]),a(A[F-1])]),this.asyncStream_.push(this.decryptChunk_(A.subarray(F,F+R),E,w,L));this.asyncStream_.push(function(){D(null,e(L))})}static get STEP(){return 32e3}decryptChunk_(T,E,w,D){return function(){const R=o(T,E,w);D.set(R,T.byteOffset)}}}var u=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},c;typeof window<"u"?c=window:typeof u<"u"?c=u:typeof self<"u"?c=self:c={};var h=c,m=function(T){return ArrayBuffer.isView==="function"?ArrayBuffer.isView(T):T&&T.buffer instanceof ArrayBuffer},g=h.BigInt||Number;g("0x1"),g("0x100"),g("0x10000"),g("0x1000000"),g("0x100000000"),g("0x10000000000"),g("0x1000000000000"),g("0x100000000000000"),g("0x10000000000000000"),(function(){var _=new Uint16Array([65484]),T=new Uint8Array(_.buffer,_.byteOffset,_.byteLength);return T[0]===255?"big":T[0]===204?"little":"unknown"})();const y=function(_){const T={};return Object.keys(_).forEach(E=>{const w=_[E];m(w)?T[E]={bytes:w.buffer,byteOffset:w.byteOffset,byteLength:w.byteLength}:T[E]=w}),T};self.onmessage=function(_){const T=_.data,E=new Uint8Array(T.encrypted.bytes,T.encrypted.byteOffset,T.encrypted.byteLength),w=new Uint32Array(T.key.bytes,T.key.byteOffset,T.key.byteLength/4),D=new Uint32Array(T.iv.bytes,T.iv.byteOffset,T.iv.byteLength/4);new l(E,w,D,function(R,A){self.postMessage(y({source:T.source,decrypted:A}),[A.buffer])})}}));var Uue=V5(Nue);const $ue=i=>{let e=i.default?"main":"alternative";return i.characteristics&&i.characteristics.indexOf("public.accessibility.describes-video")>=0&&(e="main-desc"),e},o6=(i,e)=>{i.abort(),i.pause(),e&&e.activePlaylistLoader&&(e.activePlaylistLoader.pause(),e.activePlaylistLoader=null)},iE=(i,e)=>{e.activePlaylistLoader=i,i.load()},jue=(i,e)=>()=>{const{segmentLoaders:{[i]:t,main:r},mediaTypes:{[i]:n}}=e,s=n.activeTrack(),a=n.getActiveGroup(),o=n.activePlaylistLoader,l=n.lastGroup_;if(!(a&&l&&a.id===l.id)&&(n.lastGroup_=a,n.lastTrack_=s,o6(t,n),!(!a||a.isMainPlaylist))){if(!a.playlistLoader){o&&r.resetEverything();return}t.resyncLoader(),iE(a.playlistLoader,n)}},zue=(i,e)=>()=>{const{segmentLoaders:{[i]:t},mediaTypes:{[i]:r}}=e;r.lastGroup_=null,t.abort(),t.pause()},Hue=(i,e)=>()=>{const{mainPlaylistLoader:t,segmentLoaders:{[i]:r,main:n},mediaTypes:{[i]:s}}=e,a=s.activeTrack(),o=s.getActiveGroup(),l=s.activePlaylistLoader,u=s.lastTrack_;if(!(u&&a&&u.id===a.id)&&(s.lastGroup_=o,s.lastTrack_=a,o6(r,s),!!o)){if(o.isMainPlaylist){if(!a||!u||a.id===u.id)return;const c=e.vhs.playlistController_,h=c.selectPlaylist();if(c.media()===h)return;s.logger_(`track change. Switching main audio from ${u.id} to ${a.id}`),t.pause(),n.resetEverything(),c.fastQualityChange_(h);return}if(i==="AUDIO"){if(!o.playlistLoader){n.setAudio(!0),n.resetEverything();return}r.setAudio(!0),n.setAudio(!1)}if(l===o.playlistLoader){iE(o.playlistLoader,s);return}r.track&&r.track(a),r.resetEverything(),iE(o.playlistLoader,s)}},H_={AUDIO:(i,e)=>()=>{const{mediaTypes:{[i]:t},excludePlaylist:r}=e,n=t.activeTrack(),s=t.activeGroup(),a=(s.filter(l=>l.default)[0]||s[0]).id,o=t.tracks[a];if(n===o){r({error:{message:"Problem encountered loading the default audio track."}});return}_e.log.warn("Problem encountered loading the alternate audio track.Switching back to default.");for(const l in t.tracks)t.tracks[l].enabled=t.tracks[l]===o;t.onTrackChanged()},SUBTITLES:(i,e)=>()=>{const{mediaTypes:{[i]:t}}=e;_e.log.warn("Problem encountered loading the subtitle track.Disabling subtitle track.");const r=t.activeTrack();r&&(r.mode="disabled"),t.onTrackChanged()}},ZO={AUDIO:(i,e,t)=>{if(!e)return;const{tech:r,requestOptions:n,segmentLoaders:{[i]:s}}=t;e.on("loadedmetadata",()=>{const a=e.media();s.playlist(a,n),(!r.paused()||a.endList&&r.preload()!=="none")&&s.load()}),e.on("loadedplaylist",()=>{s.playlist(e.media(),n),r.paused()||s.load()}),e.on("error",H_[i](i,t))},SUBTITLES:(i,e,t)=>{const{tech:r,requestOptions:n,segmentLoaders:{[i]:s},mediaTypes:{[i]:a}}=t;e.on("loadedmetadata",()=>{const o=e.media();s.playlist(o,n),s.track(a.activeTrack()),(!r.paused()||o.endList&&r.preload()!=="none")&&s.load()}),e.on("loadedplaylist",()=>{s.playlist(e.media(),n),r.paused()||s.load()}),e.on("error",H_[i](i,t))}},Vue={AUDIO:(i,e)=>{const{vhs:t,sourceType:r,segmentLoaders:{[i]:n},requestOptions:s,main:{mediaGroups:a},mediaTypes:{[i]:{groups:o,tracks:l,logger_:u}},mainPlaylistLoader:c}=e,h=lg(c.main);(!a[i]||Object.keys(a[i]).length===0)&&(a[i]={main:{default:{default:!0}}},h&&(a[i].main.default.playlists=c.main.playlists));for(const m in a[i]){o[m]||(o[m]=[]);for(const g in a[i][m]){let y=a[i][m][g],_;if(h?(u(`AUDIO group '${m}' label '${g}' is a main playlist`),y.isMainPlaylist=!0,_=null):r==="vhs-json"&&y.playlists?_=new Lf(y.playlists[0],t,s):y.resolvedUri?_=new Lf(y.resolvedUri,t,s):y.playlists&&r==="dash"?_=new JC(y.playlists[0],t,s,c):_=null,y=_i({id:g,playlistLoader:_},y),ZO[i](i,y.playlistLoader,e),o[m].push(y),typeof l[g]>"u"){const T=new _e.AudioTrack({id:g,kind:$ue(y),enabled:!1,language:y.language,default:y.default,label:g});l[g]=T}}}n.on("error",H_[i](i,e))},SUBTITLES:(i,e)=>{const{tech:t,vhs:r,sourceType:n,segmentLoaders:{[i]:s},requestOptions:a,main:{mediaGroups:o},mediaTypes:{[i]:{groups:l,tracks:u}},mainPlaylistLoader:c}=e;for(const h in o[i]){l[h]||(l[h]=[]);for(const m in o[i][h]){if(!r.options_.useForcedSubtitles&&o[i][h][m].forced)continue;let g=o[i][h][m],y;if(n==="hls")y=new Lf(g.resolvedUri,r,a);else if(n==="dash"){if(!g.playlists.filter(T=>T.excludeUntil!==1/0).length)return;y=new JC(g.playlists[0],r,a,c)}else n==="vhs-json"&&(y=new Lf(g.playlists?g.playlists[0]:g.resolvedUri,r,a));if(g=_i({id:m,playlistLoader:y},g),ZO[i](i,g.playlistLoader,e),l[h].push(g),typeof u[m]>"u"){const _=t.addRemoteTextTrack({id:m,kind:"subtitles",default:g.default&&g.autoselect,language:g.language,label:m},!1).track;u[m]=_}}}s.on("error",H_[i](i,e))},"CLOSED-CAPTIONS":(i,e)=>{const{tech:t,main:{mediaGroups:r},mediaTypes:{[i]:{groups:n,tracks:s}}}=e;for(const a in r[i]){n[a]||(n[a]=[]);for(const o in r[i][a]){const l=r[i][a][o];if(!/^(?:CC|SERVICE)/.test(l.instreamId))continue;const u=t.options_.vhs&&t.options_.vhs.captionServices||{};let c={label:o,language:l.language,instreamId:l.instreamId,default:l.default&&l.autoselect};if(u[c.instreamId]&&(c=_i(c,u[c.instreamId])),c.default===void 0&&delete c.default,n[a].push(_i({id:o},l)),typeof s[o]>"u"){const h=t.addRemoteTextTrack({id:c.instreamId,kind:"captions",default:c.default,language:c.language,label:c.label},!1).track;s[o]=h}}}}},l6=(i,e)=>{for(let t=0;t<i.length;t++)if(A2(e,i[t])||i[t].playlists&&l6(i[t].playlists,e))return!0;return!1},que=(i,e)=>t=>{const{mainPlaylistLoader:r,mediaTypes:{[i]:{groups:n}}}=e,s=r.media();if(!s)return null;let a=null;s.attributes[i]&&(a=n[s.attributes[i]]);const o=Object.keys(n);if(!a)if(i==="AUDIO"&&o.length>1&&lg(e.main))for(let l=0;l<o.length;l++){const u=n[o[l]];if(l6(u,s)){a=u;break}}else n.main?a=n.main:o.length===1&&(a=n[o[0]]);return typeof t>"u"?a:t===null||!a?null:a.filter(l=>l.id===t.id)[0]||null},Wue={AUDIO:(i,e)=>()=>{const{mediaTypes:{[i]:{tracks:t}}}=e;for(const r in t)if(t[r].enabled)return t[r];return null},SUBTITLES:(i,e)=>()=>{const{mediaTypes:{[i]:{tracks:t}}}=e;for(const r in t)if(t[r].mode==="showing"||t[r].mode==="hidden")return t[r];return null}},Gue=(i,{mediaTypes:e})=>()=>{const t=e[i].activeTrack();return t?e[i].activeGroup(t):null},Kue=i=>{["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(u=>{Vue[u](u,i)});const{mediaTypes:e,mainPlaylistLoader:t,tech:r,vhs:n,segmentLoaders:{["AUDIO"]:s,main:a}}=i;["AUDIO","SUBTITLES"].forEach(u=>{e[u].activeGroup=que(u,i),e[u].activeTrack=Wue[u](u,i),e[u].onGroupChanged=jue(u,i),e[u].onGroupChanging=zue(u,i),e[u].onTrackChanged=Hue(u,i),e[u].getActiveGroup=Gue(u,i)});const o=e.AUDIO.activeGroup();if(o){const u=(o.filter(h=>h.default)[0]||o[0]).id;e.AUDIO.tracks[u].enabled=!0,e.AUDIO.onGroupChanged(),e.AUDIO.onTrackChanged(),e.AUDIO.getActiveGroup().playlistLoader?(a.setAudio(!1),s.setAudio(!0)):a.setAudio(!0)}t.on("mediachange",()=>{["AUDIO","SUBTITLES"].forEach(u=>e[u].onGroupChanged())}),t.on("mediachanging",()=>{["AUDIO","SUBTITLES"].forEach(u=>e[u].onGroupChanging())});const l=()=>{e.AUDIO.onTrackChanged(),r.trigger({type:"usage",name:"vhs-audio-change"})};r.audioTracks().addEventListener("change",l),r.remoteTextTracks().addEventListener("change",e.SUBTITLES.onTrackChanged),n.on("dispose",()=>{r.audioTracks().removeEventListener("change",l),r.remoteTextTracks().removeEventListener("change",e.SUBTITLES.onTrackChanged)}),r.clearTracks("audio");for(const u in e.AUDIO.tracks)r.audioTracks().addTrack(e.AUDIO.tracks[u])},Xue=()=>{const i={};return["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(e=>{i[e]={groups:{},tracks:{},activePlaylistLoader:null,activeGroup:Zu,activeTrack:Zu,getActiveGroup:Zu,onGroupChanged:Zu,onTrackChanged:Zu,lastTrack_:null,logger_:$o(`MediaGroups[${e}]`)}}),i};class e4{constructor(){this.priority_=[],this.pathwayClones_=new Map}set version(e){e===1&&(this.version_=e)}set ttl(e){this.ttl_=e||300}set reloadUri(e){e&&(this.reloadUri_=Ca(this.reloadUri_,e))}set priority(e){e&&e.length&&(this.priority_=e)}set pathwayClones(e){e&&e.length&&(this.pathwayClones_=new Map(e.map(t=>[t.ID,t])))}get version(){return this.version_}get ttl(){return this.ttl_}get reloadUri(){return this.reloadUri_}get priority(){return this.priority_}get pathwayClones(){return this.pathwayClones_}}class Yue extends _e.EventTarget{constructor(e,t){super(),this.currentPathway=null,this.defaultPathway=null,this.queryBeforeStart=!1,this.availablePathways_=new Set,this.steeringManifest=new e4,this.proxyServerUrl_=null,this.manifestType_=null,this.ttlTimeout_=null,this.request_=null,this.currentPathwayClones=new Map,this.nextPathwayClones=new Map,this.excludedSteeringManifestURLs=new Set,this.logger_=$o("Content Steering"),this.xhr_=e,this.getBandwidth_=t}assignTagProperties(e,t){this.manifestType_=t.serverUri?"HLS":"DASH";const r=t.serverUri||t.serverURL;if(!r){this.logger_(`steering manifest URL is ${r}, cannot request steering manifest.`),this.trigger("error");return}if(r.startsWith("data:")){this.decodeDataUriManifest_(r.substring(r.indexOf(",")+1));return}this.steeringManifest.reloadUri=Ca(e,r),this.defaultPathway=t.pathwayId||t.defaultServiceLocation,this.queryBeforeStart=t.queryBeforeStart,this.proxyServerUrl_=t.proxyServerURL,this.defaultPathway&&!this.queryBeforeStart&&this.trigger("content-steering")}requestSteeringManifest(e){const t=this.steeringManifest.reloadUri;if(!t)return;const r=e?t:this.getRequestURI(t);if(!r){this.logger_("No valid content steering manifest URIs. Stopping content steering."),this.trigger("error"),this.dispose();return}const n={contentSteeringInfo:{uri:r}};this.trigger({type:"contentsteeringloadstart",metadata:n}),this.request_=this.xhr_({uri:r,requestType:"content-steering-manifest"},(s,a)=>{if(s){if(a.status===410){this.logger_(`manifest request 410 ${s}.`),this.logger_(`There will be no more content steering requests to ${r} this session.`),this.excludedSteeringManifestURLs.add(r);return}if(a.status===429){const u=a.responseHeaders["retry-after"];this.logger_(`manifest request 429 ${s}.`),this.logger_(`content steering will retry in ${u} seconds.`),this.startTTLTimeout_(parseInt(u,10));return}this.logger_(`manifest failed to load ${s}.`),this.startTTLTimeout_();return}this.trigger({type:"contentsteeringloadcomplete",metadata:n});let o;try{o=JSON.parse(this.request_.responseText)}catch(u){const c={errorType:_e.Error.StreamingContentSteeringParserError,error:u};this.trigger({type:"error",metadata:c})}this.assignSteeringProperties_(o);const l={contentSteeringInfo:n.contentSteeringInfo,contentSteeringManifest:{version:this.steeringManifest.version,reloadUri:this.steeringManifest.reloadUri,priority:this.steeringManifest.priority}};this.trigger({type:"contentsteeringparsed",metadata:l}),this.startTTLTimeout_()})}setProxyServerUrl_(e){const t=new X.URL(e),r=new X.URL(this.proxyServerUrl_);return r.searchParams.set("url",encodeURI(t.toString())),this.setSteeringParams_(r.toString())}decodeDataUriManifest_(e){const t=JSON.parse(X.atob(e));this.assignSteeringProperties_(t)}setSteeringParams_(e){const t=new X.URL(e),r=this.getPathway(),n=this.getBandwidth_();if(r){const s=`_${this.manifestType_}_pathway`;t.searchParams.set(s,r)}if(n){const s=`_${this.manifestType_}_throughput`;t.searchParams.set(s,n)}return t.toString()}assignSteeringProperties_(e){if(this.steeringManifest.version=e.VERSION,!this.steeringManifest.version){this.logger_(`manifest version is ${e.VERSION}, which is not supported.`),this.trigger("error");return}this.steeringManifest.ttl=e.TTL,this.steeringManifest.reloadUri=e["RELOAD-URI"],this.steeringManifest.priority=e["PATHWAY-PRIORITY"]||e["SERVICE-LOCATION-PRIORITY"],this.steeringManifest.pathwayClones=e["PATHWAY-CLONES"],this.nextPathwayClones=this.steeringManifest.pathwayClones,this.availablePathways_.size||(this.logger_("There are no available pathways for content steering. Ending content steering."),this.trigger("error"),this.dispose());const r=(n=>{for(const s of n)if(this.availablePathways_.has(s))return s;return[...this.availablePathways_][0]})(this.steeringManifest.priority);this.currentPathway!==r&&(this.currentPathway=r,this.trigger("content-steering"))}getPathway(){return this.currentPathway||this.defaultPathway}getRequestURI(e){if(!e)return null;const t=n=>this.excludedSteeringManifestURLs.has(n);if(this.proxyServerUrl_){const n=this.setProxyServerUrl_(e);if(!t(n))return n}const r=this.setSteeringParams_(e);return t(r)?null:r}startTTLTimeout_(e=this.steeringManifest.ttl){const t=e*1e3;this.ttlTimeout_=X.setTimeout(()=>{this.requestSteeringManifest()},t)}clearTTLTimeout_(){X.clearTimeout(this.ttlTimeout_),this.ttlTimeout_=null}abort(){this.request_&&this.request_.abort(),this.request_=null}dispose(){this.off("content-steering"),this.off("error"),this.abort(),this.clearTTLTimeout_(),this.currentPathway=null,this.defaultPathway=null,this.queryBeforeStart=null,this.proxyServerUrl_=null,this.manifestType_=null,this.ttlTimeout_=null,this.request_=null,this.excludedSteeringManifestURLs=new Set,this.availablePathways_=new Set,this.steeringManifest=new e4}addAvailablePathway(e){e&&this.availablePathways_.add(e)}clearAvailablePathways(){this.availablePathways_.clear()}excludePathway(e){return this.availablePathways_.delete(e)}didDASHTagChange(e,t){return!t&&this.steeringManifest.reloadUri||t&&(Ca(e,t.serverURL)!==this.steeringManifest.reloadUri||t.defaultServiceLocation!==this.defaultPathway||t.queryBeforeStart!==this.queryBeforeStart||t.proxyServerURL!==this.proxyServerUrl_)}getAvailablePathways(){return this.availablePathways_}}const Que=10;let Gu;const Jue=["mediaRequests","mediaRequestsAborted","mediaRequestsTimedout","mediaRequestsErrored","mediaTransferDuration","mediaBytesTransferred","mediaAppends"],Zue=function(i){return this.audioSegmentLoader_[i]+this.mainSegmentLoader_[i]},ece=function({currentPlaylist:i,buffered:e,currentTime:t,nextPlaylist:r,bufferLowWaterLine:n,bufferHighWaterLine:s,duration:a,bufferBasedABR:o,log:l}){if(!r)return _e.log.warn("We received no playlist to switch to. Please check your stream."),!1;const u=`allowing switch ${i&&i.id||"null"} -> ${r.id}`;if(!i)return l(`${u} as current playlist is not set`),!0;if(r.id===i.id)return!1;const c=!!Rf(e,t).length;if(!i.endList)return!c&&typeof i.partTargetDuration=="number"?(l(`not ${u} as current playlist is live llhls, but currentTime isn't in buffered.`),!1):(l(`${u} as current playlist is live`),!0);const h=E2(e,t),m=o?Wn.EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE:Wn.MAX_BUFFER_LOW_WATER_LINE;if(a<m)return l(`${u} as duration < max low water line (${a} < ${m})`),!0;const g=r.attributes.BANDWIDTH,y=i.attributes.BANDWIDTH;if(g<y&&(!o||h<s)){let _=`${u} as next bandwidth < current bandwidth (${g} < ${y})`;return o&&(_+=` and forwardBuffer < bufferHighWaterLine (${h} < ${s})`),l(_),!0}if((!o||g>y)&&h>=n){let _=`${u} as forwardBuffer >= bufferLowWaterLine (${h} >= ${n})`;return o&&(_+=` and next bandwidth > current bandwidth (${g} > ${y})`),l(_),!0}return l(`not ${u} as no switching criteria met`),!1};class tce extends _e.EventTarget{constructor(e){super();const{src:t,withCredentials:r,tech:n,bandwidth:s,externVhs:a,useCueTags:o,playlistExclusionDuration:l,enableLowInitialPlaylist:u,sourceType:c,cacheEncryptionKeys:h,bufferBasedABR:m,leastPixelDiffSelector:g,captionServices:y,experimentalUseMMS:_}=e;if(!t)throw new Error("A non-empty playlist URL or JSON manifest string is required");let{maxPlaylistRetries:T}=e;(T===null||typeof T>"u")&&(T=1/0),Gu=a,this.bufferBasedABR=!!m,this.leastPixelDiffSelector=!!g,this.withCredentials=r,this.tech_=n,this.vhs_=n.vhs,this.player_=e.player_,this.sourceType_=c,this.useCueTags_=o,this.playlistExclusionDuration=l,this.maxPlaylistRetries=T,this.enableLowInitialPlaylist=u,this.useCueTags_&&(this.cueTagsTrack_=this.tech_.addTextTrack("metadata","ad-cues"),this.cueTagsTrack_.inBandMetadataTrackDispatchType=""),this.requestOptions_={withCredentials:r,maxPlaylistRetries:T,timeout:null},this.on("error",this.pauseLoading),this.mediaTypes_=Xue(),_&&X.ManagedMediaSource?(this.tech_.el_.disableRemotePlayback=!0,this.mediaSource=new X.ManagedMediaSource,_e.log("Using ManagedMediaSource")):X.MediaSource&&(this.mediaSource=new X.MediaSource),this.handleDurationChange_=this.handleDurationChange_.bind(this),this.handleSourceOpen_=this.handleSourceOpen_.bind(this),this.handleSourceEnded_=this.handleSourceEnded_.bind(this),this.load=this.load.bind(this),this.pause=this.pause.bind(this),this.mediaSource.addEventListener("durationchange",this.handleDurationChange_),this.mediaSource.addEventListener("sourceopen",this.handleSourceOpen_),this.mediaSource.addEventListener("sourceended",this.handleSourceEnded_),this.mediaSource.addEventListener("startstreaming",this.load),this.mediaSource.addEventListener("endstreaming",this.pause),this.seekable_=fs(),this.hasPlayed_=!1,this.syncController_=new Fue(e),this.segmentMetadataTrack_=n.addRemoteTextTrack({kind:"metadata",label:"segment-metadata"},!1).track,this.decrypter_=new Uue,this.sourceUpdater_=new s6(this.mediaSource),this.inbandTextTracks_={},this.timelineChangeController_=new Bue,this.keyStatusMap_=new Map;const E={vhs:this.vhs_,parse708captions:e.parse708captions,useDtsForTimestampOffset:e.useDtsForTimestampOffset,captionServices:y,mediaSource:this.mediaSource,currentTime:this.tech_.currentTime.bind(this.tech_),seekable:()=>this.seekable(),seeking:()=>this.tech_.seeking(),duration:()=>this.duration(),hasPlayed:()=>this.hasPlayed_,goalBufferLength:()=>this.goalBufferLength(),bandwidth:s,syncController:this.syncController_,decrypter:this.decrypter_,sourceType:this.sourceType_,inbandTextTracks:this.inbandTextTracks_,cacheEncryptionKeys:h,sourceUpdater:this.sourceUpdater_,timelineChangeController:this.timelineChangeController_,exactManifestTimings:e.exactManifestTimings,addMetadataToTextTrack:this.addMetadataToTextTrack.bind(this)};this.mainPlaylistLoader_=this.sourceType_==="dash"?new JC(t,this.vhs_,_i(this.requestOptions_,{addMetadataToTextTrack:this.addMetadataToTextTrack.bind(this)})):new Lf(t,this.vhs_,_i(this.requestOptions_,{addDateRangesToTextTrack:this.addDateRangesToTextTrack_.bind(this)})),this.setupMainPlaylistLoaderListeners_(),this.mainSegmentLoader_=new tE(_i(E,{segmentMetadataTrack:this.segmentMetadataTrack_,loaderType:"main"}),e),this.audioSegmentLoader_=new tE(_i(E,{loaderType:"audio"}),e),this.subtitleSegmentLoader_=new Pue(_i(E,{loaderType:"vtt",featuresNativeTextTracks:this.tech_.featuresNativeTextTracks,loadVttJs:()=>new Promise((R,A)=>{function L(){n.off("vttjserror",F),R()}function F(){n.off("vttjsloaded",L),A()}n.one("vttjsloaded",L),n.one("vttjserror",F),n.addWebVttScript_()})}),e);const w=()=>this.mainSegmentLoader_.bandwidth;this.contentSteeringController_=new Yue(this.vhs_.xhr,w),this.setupSegmentLoaderListeners_(),this.bufferBasedABR&&(this.mainPlaylistLoader_.one("loadedplaylist",()=>this.startABRTimer_()),this.tech_.on("pause",()=>this.stopABRTimer_()),this.tech_.on("play",()=>this.startABRTimer_())),Jue.forEach(R=>{this[R+"_"]=Zue.bind(this,R)}),this.logger_=$o("pc"),this.triggeredFmp4Usage=!1,this.tech_.preload()==="none"?(this.loadOnPlay_=()=>{this.loadOnPlay_=null,this.mainPlaylistLoader_.load()},this.tech_.one("play",this.loadOnPlay_)):this.mainPlaylistLoader_.load(),this.timeToLoadedData__=-1,this.mainAppendsToLoadedData__=-1,this.audioAppendsToLoadedData__=-1;const D=this.tech_.preload()==="none"?"play":"loadstart";this.tech_.one(D,()=>{const R=Date.now();this.tech_.one("loadeddata",()=>{this.timeToLoadedData__=Date.now()-R,this.mainAppendsToLoadedData__=this.mainSegmentLoader_.mediaAppends,this.audioAppendsToLoadedData__=this.audioSegmentLoader_.mediaAppends})})}mainAppendsToLoadedData_(){return this.mainAppendsToLoadedData__}audioAppendsToLoadedData_(){return this.audioAppendsToLoadedData__}appendsToLoadedData_(){const e=this.mainAppendsToLoadedData_(),t=this.audioAppendsToLoadedData_();return e===-1||t===-1?-1:e+t}timeToLoadedData_(){return this.timeToLoadedData__}checkABR_(e="abr"){const t=this.selectPlaylist();t&&this.shouldSwitchToMedia_(t)&&this.switchMedia_(t,e)}switchMedia_(e,t,r){const n=this.media(),s=n&&(n.id||n.uri),a=e&&(e.id||e.uri);if(s&&s!==a){this.logger_(`switch media ${s} -> ${a} from ${t}`);const o={renditionInfo:{id:a,bandwidth:e.attributes.BANDWIDTH,resolution:e.attributes.RESOLUTION,codecs:e.attributes.CODECS},cause:t};this.trigger({type:"renditionselected",metadata:o}),this.tech_.trigger({type:"usage",name:`vhs-rendition-change-${t}`})}this.mainPlaylistLoader_.media(e,r)}switchMediaForDASHContentSteering_(){["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(e=>{const t=this.mediaTypes_[e],r=t?t.activeGroup():null,n=this.contentSteeringController_.getPathway();if(r&&n){const a=(r.length?r[0].playlists:r.playlists).filter(o=>o.attributes.serviceLocation===n);a.length&&this.mediaTypes_[e].activePlaylistLoader.media(a[0])}})}startABRTimer_(){this.stopABRTimer_(),this.abrTimer_=X.setInterval(()=>this.checkABR_(),250)}stopABRTimer_(){this.tech_.scrubbing&&this.tech_.scrubbing()||(X.clearInterval(this.abrTimer_),this.abrTimer_=null)}getAudioTrackPlaylists_(){const e=this.main(),t=e&&e.playlists||[];if(!e||!e.mediaGroups||!e.mediaGroups.AUDIO)return t;const r=e.mediaGroups.AUDIO,n=Object.keys(r);let s;if(Object.keys(this.mediaTypes_.AUDIO.groups).length)s=this.mediaTypes_.AUDIO.activeTrack();else{const o=r.main||n.length&&r[n[0]];for(const l in o)if(o[l].default){s={label:l};break}}if(!s)return t;const a=[];for(const o in r)if(r[o][s.label]){const l=r[o][s.label];if(l.playlists&&l.playlists.length)a.push.apply(a,l.playlists);else if(l.uri)a.push(l);else if(e.playlists.length)for(let u=0;u<e.playlists.length;u++){const c=e.playlists[u];c.attributes&&c.attributes.AUDIO&&c.attributes.AUDIO===o&&a.push(c)}}return a.length?a:t}setupMainPlaylistLoaderListeners_(){this.mainPlaylistLoader_.on("loadedmetadata",()=>{const t=this.mainPlaylistLoader_.media(),r=t.targetDuration*1.5*1e3;GC(this.mainPlaylistLoader_.main,this.mainPlaylistLoader_.media())?this.requestOptions_.timeout=0:this.requestOptions_.timeout=r,t.endList&&this.tech_.preload()!=="none"&&(this.mainSegmentLoader_.playlist(t,this.requestOptions_),this.mainSegmentLoader_.load()),Kue({sourceType:this.sourceType_,segmentLoaders:{AUDIO:this.audioSegmentLoader_,SUBTITLES:this.subtitleSegmentLoader_,main:this.mainSegmentLoader_},tech:this.tech_,requestOptions:this.requestOptions_,mainPlaylistLoader:this.mainPlaylistLoader_,vhs:this.vhs_,main:this.main(),mediaTypes:this.mediaTypes_,excludePlaylist:this.excludePlaylist.bind(this)}),this.triggerPresenceUsage_(this.main(),t),this.setupFirstPlay(),!this.mediaTypes_.AUDIO.activePlaylistLoader||this.mediaTypes_.AUDIO.activePlaylistLoader.media()?this.trigger("selectedinitialmedia"):this.mediaTypes_.AUDIO.activePlaylistLoader.one("loadedmetadata",()=>{this.trigger("selectedinitialmedia")})}),this.mainPlaylistLoader_.on("loadedplaylist",()=>{this.loadOnPlay_&&this.tech_.off("play",this.loadOnPlay_);let t=this.mainPlaylistLoader_.media();if(!t){this.attachContentSteeringListeners_(),this.initContentSteeringController_(),this.excludeUnsupportedVariants_();let r;if(this.enableLowInitialPlaylist&&(r=this.selectInitialPlaylist()),r||(r=this.selectPlaylist()),!r||!this.shouldSwitchToMedia_(r)||(this.initialMedia_=r,this.switchMedia_(this.initialMedia_,"initial"),!(this.sourceType_==="vhs-json"&&this.initialMedia_.segments)))return;t=this.initialMedia_}this.handleUpdatedMediaPlaylist(t)}),this.mainPlaylistLoader_.on("error",()=>{const t=this.mainPlaylistLoader_.error;this.excludePlaylist({playlistToExclude:t.playlist,error:t})}),this.mainPlaylistLoader_.on("mediachanging",()=>{this.mainSegmentLoader_.abort(),this.mainSegmentLoader_.pause()}),this.mainPlaylistLoader_.on("mediachange",()=>{const t=this.mainPlaylistLoader_.media(),r=t.targetDuration*1.5*1e3;GC(this.mainPlaylistLoader_.main,this.mainPlaylistLoader_.media())?this.requestOptions_.timeout=0:this.requestOptions_.timeout=r,this.sourceType_==="dash"&&this.mainPlaylistLoader_.load(),this.mainSegmentLoader_.pause(),this.mainSegmentLoader_.playlist(t,this.requestOptions_),this.waitingForFastQualityPlaylistReceived_?this.runFastQualitySwitch_():this.mainSegmentLoader_.load(),this.tech_.trigger({type:"mediachange",bubbles:!0})}),this.mainPlaylistLoader_.on("playlistunchanged",()=>{const t=this.mainPlaylistLoader_.media();if(t.lastExcludeReason_==="playlist-unchanged")return;this.stuckAtPlaylistEnd_(t)&&(this.excludePlaylist({error:{message:"Playlist no longer updating.",reason:"playlist-unchanged"}}),this.tech_.trigger("playliststuck"))}),this.mainPlaylistLoader_.on("renditiondisabled",()=>{this.tech_.trigger({type:"usage",name:"vhs-rendition-disabled"})}),this.mainPlaylistLoader_.on("renditionenabled",()=>{this.tech_.trigger({type:"usage",name:"vhs-rendition-enabled"})}),["manifestrequeststart","manifestrequestcomplete","manifestparsestart","manifestparsecomplete","playlistrequeststart","playlistrequestcomplete","playlistparsestart","playlistparsecomplete","renditiondisabled","renditionenabled"].forEach(t=>{this.mainPlaylistLoader_.on(t,r=>{this.player_.trigger(Jt({},r))})})}handleUpdatedMediaPlaylist(e){this.useCueTags_&&this.updateAdCues_(e),this.mainSegmentLoader_.pause(),this.mainSegmentLoader_.playlist(e,this.requestOptions_),this.waitingForFastQualityPlaylistReceived_&&this.runFastQualitySwitch_(),this.updateDuration(!e.endList),this.tech_.paused()||(this.mainSegmentLoader_.load(),this.audioSegmentLoader_&&this.audioSegmentLoader_.load())}triggerPresenceUsage_(e,t){const r=e.mediaGroups||{};let n=!0;const s=Object.keys(r.AUDIO);for(const a in r.AUDIO)for(const o in r.AUDIO[a])r.AUDIO[a][o].uri||(n=!1);n&&this.tech_.trigger({type:"usage",name:"vhs-demuxed"}),Object.keys(r.SUBTITLES).length&&this.tech_.trigger({type:"usage",name:"vhs-webvtt"}),Gu.Playlist.isAes(t)&&this.tech_.trigger({type:"usage",name:"vhs-aes"}),s.length&&Object.keys(r.AUDIO[s[0]]).length>1&&this.tech_.trigger({type:"usage",name:"vhs-alternate-audio"}),this.useCueTags_&&this.tech_.trigger({type:"usage",name:"vhs-playlist-cue-tags"})}shouldSwitchToMedia_(e){const t=this.mainPlaylistLoader_.media()||this.mainPlaylistLoader_.pendingMedia_,r=this.tech_.currentTime(),n=this.bufferLowWaterLine(),s=this.bufferHighWaterLine(),a=this.tech_.buffered();return ece({buffered:a,currentTime:r,currentPlaylist:t,nextPlaylist:e,bufferLowWaterLine:n,bufferHighWaterLine:s,duration:this.duration(),bufferBasedABR:this.bufferBasedABR,log:this.logger_})}setupSegmentLoaderListeners_(){this.mainSegmentLoader_.on("bandwidthupdate",()=>{this.checkABR_("bandwidthupdate"),this.tech_.trigger("bandwidthupdate")}),this.mainSegmentLoader_.on("timeout",()=>{this.bufferBasedABR&&this.mainSegmentLoader_.load()}),this.bufferBasedABR||this.mainSegmentLoader_.on("progress",()=>{this.trigger("progress")}),this.mainSegmentLoader_.on("error",()=>{const r=this.mainSegmentLoader_.error();this.excludePlaylist({playlistToExclude:r.playlist,error:r})}),this.mainSegmentLoader_.on("appenderror",()=>{this.error=this.mainSegmentLoader_.error_,this.trigger("error")}),this.mainSegmentLoader_.on("syncinfoupdate",()=>{this.onSyncInfoUpdate_()}),this.mainSegmentLoader_.on("timestampoffset",()=>{this.tech_.trigger({type:"usage",name:"vhs-timestamp-offset"})}),this.audioSegmentLoader_.on("syncinfoupdate",()=>{this.onSyncInfoUpdate_()}),this.audioSegmentLoader_.on("appenderror",()=>{this.error=this.audioSegmentLoader_.error_,this.trigger("error")}),this.mainSegmentLoader_.on("ended",()=>{this.logger_("main segment loader ended"),this.onEndOfStream()}),this.timelineChangeController_.on("audioTimelineBehind",()=>{const r=this.audioSegmentLoader_.pendingSegment_;if(!r||!r.segment||!r.segment.syncInfo)return;const n=r.segment.syncInfo.end+.01;this.tech_.setCurrentTime(n)}),this.mainSegmentLoader_.on("earlyabort",r=>{this.bufferBasedABR||(this.delegateLoaders_("all",["abort"]),this.excludePlaylist({error:{message:"Aborted early because there isn't enough bandwidth to complete the request without rebuffering."},playlistExclusionDuration:Que}))});const e=()=>{if(!this.sourceUpdater_.hasCreatedSourceBuffers())return this.tryToCreateSourceBuffers_();const r=this.getCodecsOrExclude_();r&&this.sourceUpdater_.addOrChangeSourceBuffers(r)};this.mainSegmentLoader_.on("trackinfo",e),this.audioSegmentLoader_.on("trackinfo",e),this.mainSegmentLoader_.on("fmp4",()=>{this.triggeredFmp4Usage||(this.tech_.trigger({type:"usage",name:"vhs-fmp4"}),this.triggeredFmp4Usage=!0)}),this.audioSegmentLoader_.on("fmp4",()=>{this.triggeredFmp4Usage||(this.tech_.trigger({type:"usage",name:"vhs-fmp4"}),this.triggeredFmp4Usage=!0)}),this.audioSegmentLoader_.on("ended",()=>{this.logger_("audioSegmentLoader ended"),this.onEndOfStream()}),["segmentselected","segmentloadstart","segmentloaded","segmentkeyloadstart","segmentkeyloadcomplete","segmentdecryptionstart","segmentdecryptioncomplete","segmenttransmuxingstart","segmenttransmuxingcomplete","segmenttransmuxingtrackinfoavailable","segmenttransmuxingtiminginfoavailable","segmentappendstart","appendsdone","bandwidthupdated","timelinechange","codecschange"].forEach(r=>{this.mainSegmentLoader_.on(r,n=>{this.player_.trigger(Jt({},n))}),this.audioSegmentLoader_.on(r,n=>{this.player_.trigger(Jt({},n))}),this.subtitleSegmentLoader_.on(r,n=>{this.player_.trigger(Jt({},n))})})}mediaSecondsLoaded_(){return Math.max(this.audioSegmentLoader_.mediaSecondsLoaded+this.mainSegmentLoader_.mediaSecondsLoaded)}load(){this.mainSegmentLoader_.load(),this.mediaTypes_.AUDIO.activePlaylistLoader&&this.audioSegmentLoader_.load(),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&this.subtitleSegmentLoader_.load()}pause(){this.mainSegmentLoader_.pause(),this.mediaTypes_.AUDIO.activePlaylistLoader&&this.audioSegmentLoader_.pause(),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&this.subtitleSegmentLoader_.pause()}fastQualityChange_(e=this.selectPlaylist()){if(e&&e===this.mainPlaylistLoader_.media()){this.logger_("skipping fastQualityChange because new media is same as old");return}this.switchMedia_(e,"fast-quality"),this.waitingForFastQualityPlaylistReceived_=!0}runFastQualitySwitch_(){this.waitingForFastQualityPlaylistReceived_=!1,this.mainSegmentLoader_.pause(),this.mainSegmentLoader_.resetEverything(()=>{this.mainSegmentLoader_.load()})}play(){if(this.setupFirstPlay())return;this.tech_.ended()&&this.tech_.setCurrentTime(0),this.hasPlayed_&&this.load();const e=this.tech_.seekable();if(this.tech_.duration()===1/0&&this.tech_.currentTime()<e.start(0))return this.tech_.setCurrentTime(e.end(e.length-1))}setupFirstPlay(){const e=this.mainPlaylistLoader_.media();if(!e||this.tech_.paused()||this.hasPlayed_)return!1;if(!e.endList||e.start){const t=this.seekable();if(!t.length)return!1;const r=t.end(0);let n=r;if(e.start){const s=e.start.timeOffset;s<0?n=Math.max(r+s,t.start(0)):n=Math.min(r,s)}this.trigger("firstplay"),this.tech_.setCurrentTime(n)}return this.hasPlayed_=!0,this.load(),!0}handleSourceOpen_(){if(this.tryToCreateSourceBuffers_(),this.tech_.autoplay()){const e=this.tech_.play();typeof e<"u"&&typeof e.then=="function"&&e.then(null,t=>{})}this.trigger("sourceopen")}handleSourceEnded_(){if(!this.inbandTextTracks_.metadataTrack_)return;const e=this.inbandTextTracks_.metadataTrack_.cues;if(!e||!e.length)return;const t=this.duration();e[e.length-1].endTime=isNaN(t)||Math.abs(t)===1/0?Number.MAX_VALUE:t}handleDurationChange_(){this.tech_.trigger("durationchange")}onEndOfStream(){let e=this.mainSegmentLoader_.ended_;if(this.mediaTypes_.AUDIO.activePlaylistLoader){const t=this.mainSegmentLoader_.getCurrentMediaInfo_();!t||t.hasVideo?e=e&&this.audioSegmentLoader_.ended_:e=this.audioSegmentLoader_.ended_}e&&(this.stopABRTimer_(),this.sourceUpdater_.endOfStream())}stuckAtPlaylistEnd_(e){if(!this.seekable().length)return!1;const r=this.syncController_.getExpiredTime(e,this.duration());if(r===null)return!1;const n=Gu.Playlist.playlistEnd(e,r),s=this.tech_.currentTime(),a=this.tech_.buffered();if(!a.length)return n-s<=tu;const o=a.end(a.length-1);return o-s<=tu&&n-o<=tu}excludePlaylist({playlistToExclude:e=this.mainPlaylistLoader_.media(),error:t={},playlistExclusionDuration:r}){if(e=e||this.mainPlaylistLoader_.media(),r=r||t.playlistExclusionDuration||this.playlistExclusionDuration,!e){this.error=t,this.mediaSource.readyState!=="open"?this.trigger("error"):this.sourceUpdater_.endOfStream("network");return}e.playlistErrors_++;const n=this.mainPlaylistLoader_.main.playlists,s=n.filter(mT),a=s.length===1&&s[0]===e;if(n.length===1&&r!==1/0)return _e.log.warn(`Problem encountered with playlist ${e.id}. Trying again since it is the only playlist.`),this.tech_.trigger("retryplaylist"),this.mainPlaylistLoader_.load(a);if(a){if(this.main().contentSteering){const y=this.pathwayAttribute_(e),_=this.contentSteeringController_.steeringManifest.ttl*1e3;this.contentSteeringController_.excludePathway(y),this.excludeThenChangePathway_(),setTimeout(()=>{this.contentSteeringController_.addAvailablePathway(y)},_);return}let g=!1;n.forEach(y=>{if(y===e)return;const _=y.excludeUntil;typeof _<"u"&&_!==1/0&&(g=!0,delete y.excludeUntil)}),g&&(_e.log.warn("Removing other playlists from the exclusion list because the last rendition is about to be excluded."),this.tech_.trigger("retryplaylist"))}let o;e.playlistErrors_>this.maxPlaylistRetries?o=1/0:o=Date.now()+r*1e3,e.excludeUntil=o,t.reason&&(e.lastExcludeReason_=t.reason),this.tech_.trigger("excludeplaylist"),this.tech_.trigger({type:"usage",name:"vhs-rendition-excluded"});const l=this.selectPlaylist();if(!l){this.error="Playback cannot continue. No available working or supported playlists.",this.trigger("error");return}const u=t.internal?this.logger_:_e.log.warn,c=t.message?" "+t.message:"";u(`${t.internal?"Internal problem":"Problem"} encountered with playlist ${e.id}.${c} Switching to playlist ${l.id}.`),l.attributes.AUDIO!==e.attributes.AUDIO&&this.delegateLoaders_("audio",["abort","pause"]),l.attributes.SUBTITLES!==e.attributes.SUBTITLES&&this.delegateLoaders_("subtitle",["abort","pause"]),this.delegateLoaders_("main",["abort","pause"]);const h=l.targetDuration/2*1e3||5*1e3,m=typeof l.lastRequest=="number"&&Date.now()-l.lastRequest<=h;return this.switchMedia_(l,"exclude",a||m)}pauseLoading(){this.delegateLoaders_("all",["abort","pause"]),this.stopABRTimer_()}delegateLoaders_(e,t){const r=[],n=e==="all";(n||e==="main")&&r.push(this.mainPlaylistLoader_);const s=[];(n||e==="audio")&&s.push("AUDIO"),(n||e==="subtitle")&&(s.push("CLOSED-CAPTIONS"),s.push("SUBTITLES")),s.forEach(a=>{const o=this.mediaTypes_[a]&&this.mediaTypes_[a].activePlaylistLoader;o&&r.push(o)}),["main","audio","subtitle"].forEach(a=>{const o=this[`${a}SegmentLoader_`];o&&(e===a||e==="all")&&r.push(o)}),r.forEach(a=>t.forEach(o=>{typeof a[o]=="function"&&a[o]()}))}setCurrentTime(e){const t=Rf(this.tech_.buffered(),e);if(!(this.mainPlaylistLoader_&&this.mainPlaylistLoader_.media())||!this.mainPlaylistLoader_.media().segments)return 0;if(t&&t.length)return e;this.mainSegmentLoader_.pause(),this.mainSegmentLoader_.resetEverything(),this.mediaTypes_.AUDIO.activePlaylistLoader&&(this.audioSegmentLoader_.pause(),this.audioSegmentLoader_.resetEverything()),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&(this.subtitleSegmentLoader_.pause(),this.subtitleSegmentLoader_.resetEverything()),this.load()}duration(){if(!this.mainPlaylistLoader_)return 0;const e=this.mainPlaylistLoader_.media();return e?e.endList?this.mediaSource?this.mediaSource.duration:Gu.Playlist.duration(e):1/0:0}seekable(){return this.seekable_}onSyncInfoUpdate_(){let e;if(!this.mainPlaylistLoader_)return;let t=this.mainPlaylistLoader_.media();if(!t)return;let r=this.syncController_.getExpiredTime(t,this.duration());if(r===null)return;const n=this.mainPlaylistLoader_.main,s=Gu.Playlist.seekable(t,r,Gu.Playlist.liveEdgeDelay(n,t));if(s.length===0||this.mediaTypes_.AUDIO.activePlaylistLoader&&(t=this.mediaTypes_.AUDIO.activePlaylistLoader.media(),r=this.syncController_.getExpiredTime(t,this.duration()),r===null||(e=Gu.Playlist.seekable(t,r,Gu.Playlist.liveEdgeDelay(n,t)),e.length===0)))return;let a,o;if(this.seekable_&&this.seekable_.length&&(a=this.seekable_.end(0),o=this.seekable_.start(0)),e?e.start(0)>s.end(0)||s.start(0)>e.end(0)?this.seekable_=s:this.seekable_=fs([[e.start(0)>s.start(0)?e.start(0):s.start(0),e.end(0)<s.end(0)?e.end(0):s.end(0)]]):this.seekable_=s,this.seekable_&&this.seekable_.length&&this.seekable_.end(0)===a&&this.seekable_.start(0)===o)return;this.logger_(`seekable updated [${x5(this.seekable_)}]`);const l={seekableRanges:this.seekable_};this.trigger({type:"seekablerangeschanged",metadata:l}),this.tech_.trigger("seekablechanged")}updateDuration(e){if(this.updateDuration_&&(this.mediaSource.removeEventListener("sourceopen",this.updateDuration_),this.updateDuration_=null),this.mediaSource.readyState!=="open"){this.updateDuration_=this.updateDuration.bind(this,e),this.mediaSource.addEventListener("sourceopen",this.updateDuration_);return}if(e){const n=this.seekable();if(!n.length)return;(isNaN(this.mediaSource.duration)||this.mediaSource.duration<n.end(n.length-1))&&this.sourceUpdater_.setDuration(n.end(n.length-1));return}const t=this.tech_.buffered();let r=Gu.Playlist.duration(this.mainPlaylistLoader_.media());t.length>0&&(r=Math.max(r,t.end(t.length-1))),this.mediaSource.duration!==r&&this.sourceUpdater_.setDuration(r)}dispose(){this.trigger("dispose"),this.decrypter_.terminate(),this.mainPlaylistLoader_.dispose(),this.mainSegmentLoader_.dispose(),this.contentSteeringController_.dispose(),this.keyStatusMap_.clear(),this.loadOnPlay_&&this.tech_.off("play",this.loadOnPlay_),["AUDIO","SUBTITLES"].forEach(e=>{const t=this.mediaTypes_[e].groups;for(const r in t)t[r].forEach(n=>{n.playlistLoader&&n.playlistLoader.dispose()})}),this.audioSegmentLoader_.dispose(),this.subtitleSegmentLoader_.dispose(),this.sourceUpdater_.dispose(),this.timelineChangeController_.dispose(),this.stopABRTimer_(),this.updateDuration_&&this.mediaSource.removeEventListener("sourceopen",this.updateDuration_),this.mediaSource.removeEventListener("durationchange",this.handleDurationChange_),this.mediaSource.removeEventListener("sourceopen",this.handleSourceOpen_),this.mediaSource.removeEventListener("sourceended",this.handleSourceEnded_),this.off()}main(){return this.mainPlaylistLoader_.main}media(){return this.mainPlaylistLoader_.media()||this.initialMedia_}areMediaTypesKnown_(){const e=!!this.mediaTypes_.AUDIO.activePlaylistLoader,t=!!this.mainSegmentLoader_.getCurrentMediaInfo_(),r=e?!!this.audioSegmentLoader_.getCurrentMediaInfo_():!0;return!(!t||!r)}getCodecsOrExclude_(){const e={main:this.mainSegmentLoader_.getCurrentMediaInfo_()||{},audio:this.audioSegmentLoader_.getCurrentMediaInfo_()||{}},t=this.mainSegmentLoader_.getPendingSegmentPlaylist()||this.media();e.video=e.main;const r=h0(this.main(),t),n={},s=!!this.mediaTypes_.AUDIO.activePlaylistLoader;if(e.main.hasVideo&&(n.video=r.video||e.main.videoCodec||B8),e.main.isMuxed&&(n.video+=`,${r.audio||e.main.audioCodec||v_}`),(e.main.hasAudio&&!e.main.isMuxed||e.audio.hasAudio||s)&&(n.audio=r.audio||e.main.audioCodec||e.audio.audioCodec||v_,e.audio.isFmp4=e.main.hasAudio&&!e.main.isMuxed?e.main.isFmp4:e.audio.isFmp4),!n.audio&&!n.video){this.excludePlaylist({playlistToExclude:t,error:{message:"Could not determine codecs for playlist."},playlistExclusionDuration:1/0});return}const a=(u,c)=>u?cu(c):jf(c),o={};let l;if(["video","audio"].forEach(function(u){if(n.hasOwnProperty(u)&&!a(e[u].isFmp4,n[u])){const c=e[u].isFmp4?"browser":"muxer";o[c]=o[c]||[],o[c].push(n[u]),u==="audio"&&(l=c)}}),s&&l&&t.attributes.AUDIO){const u=t.attributes.AUDIO;this.main().playlists.forEach(c=>{(c.attributes&&c.attributes.AUDIO)===u&&c!==t&&(c.excludeUntil=1/0)}),this.logger_(`excluding audio group ${u} as ${l} does not support codec(s): "${n.audio}"`)}if(Object.keys(o).length){const u=Object.keys(o).reduce((c,h)=>(c&&(c+=", "),c+=`${h} does not support codec(s): "${o[h].join(",")}"`,c),"")+".";this.excludePlaylist({playlistToExclude:t,error:{internal:!0,message:u},playlistExclusionDuration:1/0});return}if(this.sourceUpdater_.hasCreatedSourceBuffers()&&!this.sourceUpdater_.canChangeType()){const u=[];if(["video","audio"].forEach(c=>{const h=(Rn(this.sourceUpdater_.codecs[c]||"")[0]||{}).type,m=(Rn(n[c]||"")[0]||{}).type;h&&m&&h.toLowerCase()!==m.toLowerCase()&&u.push(`"${this.sourceUpdater_.codecs[c]}" -> "${n[c]}"`)}),u.length){this.excludePlaylist({playlistToExclude:t,error:{message:`Codec switching not supported: ${u.join(", ")}.`,internal:!0},playlistExclusionDuration:1/0});return}}return n}tryToCreateSourceBuffers_(){if(this.mediaSource.readyState!=="open"||this.sourceUpdater_.hasCreatedSourceBuffers()||!this.areMediaTypesKnown_())return;const e=this.getCodecsOrExclude_();if(!e)return;this.sourceUpdater_.createSourceBuffers(e);const t=[e.video,e.audio].filter(Boolean).join(",");this.excludeIncompatibleVariants_(t)}excludeUnsupportedVariants_(){const e=this.main().playlists,t=[];Object.keys(e).forEach(r=>{const n=e[r];if(t.indexOf(n.id)!==-1)return;t.push(n.id);const s=h0(this.main,n),a=[];s.audio&&!jf(s.audio)&&!cu(s.audio)&&a.push(`audio codec ${s.audio}`),s.video&&!jf(s.video)&&!cu(s.video)&&a.push(`video codec ${s.video}`),s.text&&s.text==="stpp.ttml.im1t"&&a.push(`text codec ${s.text}`),a.length&&(n.excludeUntil=1/0,this.logger_(`excluding ${n.id} for unsupported: ${a.join(", ")}`))})}excludeIncompatibleVariants_(e){const t=[],r=this.main().playlists,n=j_(Rn(e)),s=jO(n),a=n.video&&Rn(n.video)[0]||null,o=n.audio&&Rn(n.audio)[0]||null;Object.keys(r).forEach(l=>{const u=r[l];if(t.indexOf(u.id)!==-1||u.excludeUntil===1/0)return;t.push(u.id);const c=[],h=h0(this.mainPlaylistLoader_.main,u),m=jO(h);if(!(!h.audio&&!h.video)){if(m!==s&&c.push(`codec count "${m}" !== "${s}"`),!this.sourceUpdater_.canChangeType()){const g=h.video&&Rn(h.video)[0]||null,y=h.audio&&Rn(h.audio)[0]||null;g&&a&&g.type.toLowerCase()!==a.type.toLowerCase()&&c.push(`video codec "${g.type}" !== "${a.type}"`),y&&o&&y.type.toLowerCase()!==o.type.toLowerCase()&&c.push(`audio codec "${y.type}" !== "${o.type}"`)}c.length&&(u.excludeUntil=1/0,this.logger_(`excluding ${u.id}: ${c.join(" && ")}`))}})}updateAdCues_(e){let t=0;const r=this.seekable();r.length&&(t=r.start(0)),Lue(e,this.cueTagsTrack_,t)}goalBufferLength(){const e=this.tech_.currentTime(),t=Wn.GOAL_BUFFER_LENGTH,r=Wn.GOAL_BUFFER_LENGTH_RATE,n=Math.max(t,Wn.MAX_GOAL_BUFFER_LENGTH);return Math.min(t+e*r,n)}bufferLowWaterLine(){const e=this.tech_.currentTime(),t=Wn.BUFFER_LOW_WATER_LINE,r=Wn.BUFFER_LOW_WATER_LINE_RATE,n=Math.max(t,Wn.MAX_BUFFER_LOW_WATER_LINE),s=Math.max(t,Wn.EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE);return Math.min(t+e*r,this.bufferBasedABR?s:n)}bufferHighWaterLine(){return Wn.BUFFER_HIGH_WATER_LINE}addDateRangesToTextTrack_(e){VO(this.inbandTextTracks_,"com.apple.streaming",this.tech_),due({inbandTextTracks:this.inbandTextTracks_,dateRanges:e})}addMetadataToTextTrack(e,t,r){const n=this.sourceUpdater_.videoBuffer?this.sourceUpdater_.videoTimestampOffset():this.sourceUpdater_.audioTimestampOffset();VO(this.inbandTextTracks_,e,this.tech_),lue({inbandTextTracks:this.inbandTextTracks_,metadataArray:t,timestampOffset:n,videoDuration:r})}pathwayAttribute_(e){return e.attributes["PATHWAY-ID"]||e.attributes.serviceLocation}initContentSteeringController_(){const e=this.main();if(e.contentSteering){for(const t of e.playlists)this.contentSteeringController_.addAvailablePathway(this.pathwayAttribute_(t));if(this.contentSteeringController_.assignTagProperties(e.uri,e.contentSteering),this.contentSteeringController_.queryBeforeStart){this.contentSteeringController_.requestSteeringManifest(!0);return}this.tech_.one("canplay",()=>{this.contentSteeringController_.requestSteeringManifest()})}}resetContentSteeringController_(){this.contentSteeringController_.clearAvailablePathways(),this.contentSteeringController_.dispose(),this.initContentSteeringController_()}attachContentSteeringListeners_(){this.contentSteeringController_.on("content-steering",this.excludeThenChangePathway_.bind(this)),["contentsteeringloadstart","contentsteeringloadcomplete","contentsteeringparsed"].forEach(t=>{this.contentSteeringController_.on(t,r=>{this.trigger(Jt({},r))})}),this.sourceType_==="dash"&&this.mainPlaylistLoader_.on("loadedplaylist",()=>{const t=this.main();(this.contentSteeringController_.didDASHTagChange(t.uri,t.contentSteering)||(()=>{const s=this.contentSteeringController_.getAvailablePathways(),a=[];for(const o of t.playlists){const l=o.attributes.serviceLocation;if(l&&(a.push(l),!s.has(l)))return!0}return!!(!a.length&&s.size)})())&&this.resetContentSteeringController_()})}excludeThenChangePathway_(){const e=this.contentSteeringController_.getPathway();if(!e)return;this.handlePathwayClones_();const r=this.main().playlists,n=new Set;let s=!1;Object.keys(r).forEach(a=>{const o=r[a],l=this.pathwayAttribute_(o),u=l&&e!==l;o.excludeUntil===1/0&&o.lastExcludeReason_==="content-steering"&&!u&&(delete o.excludeUntil,delete o.lastExcludeReason_,s=!0);const h=!o.excludeUntil&&o.excludeUntil!==1/0;!n.has(o.id)&&u&&h&&(n.add(o.id),o.excludeUntil=1/0,o.lastExcludeReason_="content-steering",this.logger_(`excluding ${o.id} for ${o.lastExcludeReason_}`))}),this.contentSteeringController_.manifestType_==="DASH"&&Object.keys(this.mediaTypes_).forEach(a=>{const o=this.mediaTypes_[a];if(o.activePlaylistLoader){const l=o.activePlaylistLoader.media_;l&&l.attributes.serviceLocation!==e&&(s=!0)}}),s&&this.changeSegmentPathway_()}handlePathwayClones_(){const t=this.main().playlists,r=this.contentSteeringController_.currentPathwayClones,n=this.contentSteeringController_.nextPathwayClones;if(r&&r.size||n&&n.size){for(const[a,o]of r.entries())n.get(a)||(this.mainPlaylistLoader_.updateOrDeleteClone(o),this.contentSteeringController_.excludePathway(a));for(const[a,o]of n.entries()){const l=r.get(a);if(!l){t.filter(c=>c.attributes["PATHWAY-ID"]===o["BASE-ID"]).forEach(c=>{this.mainPlaylistLoader_.addClonePathway(o,c)}),this.contentSteeringController_.addAvailablePathway(a);continue}this.equalPathwayClones_(l,o)||(this.mainPlaylistLoader_.updateOrDeleteClone(o,!0),this.contentSteeringController_.addAvailablePathway(a))}this.contentSteeringController_.currentPathwayClones=new Map(JSON.parse(JSON.stringify([...n])))}}equalPathwayClones_(e,t){if(e["BASE-ID"]!==t["BASE-ID"]||e.ID!==t.ID||e["URI-REPLACEMENT"].HOST!==t["URI-REPLACEMENT"].HOST)return!1;const r=e["URI-REPLACEMENT"].PARAMS,n=t["URI-REPLACEMENT"].PARAMS;for(const s in r)if(r[s]!==n[s])return!1;for(const s in n)if(r[s]!==n[s])return!1;return!0}changeSegmentPathway_(){const e=this.selectPlaylist();this.pauseLoading(),this.contentSteeringController_.manifestType_==="DASH"&&this.switchMediaForDASHContentSteering_(),this.switchMedia_(e,"content-steering")}excludeNonUsablePlaylistsByKeyId_(){if(!this.mainPlaylistLoader_||!this.mainPlaylistLoader_.main)return;let e=0;const t="non-usable";this.mainPlaylistLoader_.main.playlists.forEach(r=>{const n=this.mainPlaylistLoader_.getKeyIdSet(r);!n||!n.size||n.forEach(s=>{const a="usable",o=this.keyStatusMap_.has(s)&&this.keyStatusMap_.get(s)===a,l=r.lastExcludeReason_===t&&r.excludeUntil===1/0;o?o&&l&&(delete r.excludeUntil,delete r.lastExcludeReason_,this.logger_(`enabling playlist ${r.id} because key ID ${s} is ${a}`)):(r.excludeUntil!==1/0&&r.lastExcludeReason_!==t&&(r.excludeUntil=1/0,r.lastExcludeReason_=t,this.logger_(`excluding playlist ${r.id} because the key ID ${s} doesn't exist in the keyStatusMap or is not ${a}`)),e++)})}),e>=this.mainPlaylistLoader_.main.playlists.length&&this.mainPlaylistLoader_.main.playlists.forEach(r=>{const n=r&&r.attributes&&r.attributes.RESOLUTION&&r.attributes.RESOLUTION.height<720,s=r.excludeUntil===1/0&&r.lastExcludeReason_===t;n&&s&&(delete r.excludeUntil,_e.log.warn(`enabling non-HD playlist ${r.id} because all playlists were excluded due to ${t} key IDs`))})}addKeyStatus_(e,t){const s=(typeof e=="string"?e:Iue(e)).slice(0,32).toLowerCase();this.logger_(`KeyStatus '${t}' with key ID ${s} added to the keyStatusMap`),this.keyStatusMap_.set(s,t)}updatePlaylistByKeyStatus(e,t){this.addKeyStatus_(e,t),this.waitingForFastQualityPlaylistReceived_||this.excludeNonUsableThenChangePlaylist_(),this.mainPlaylistLoader_.off("loadedplaylist",this.excludeNonUsableThenChangePlaylist_.bind(this)),this.mainPlaylistLoader_.on("loadedplaylist",this.excludeNonUsableThenChangePlaylist_.bind(this))}excludeNonUsableThenChangePlaylist_(){this.excludeNonUsablePlaylistsByKeyId_(),this.fastQualityChange_()}}const rce=(i,e,t)=>r=>{const n=i.main.playlists[e],s=k2(n),a=mT(n);if(typeof r>"u")return a;r?delete n.disabled:n.disabled=!0;const o={renditionInfo:{id:e,bandwidth:n.attributes.BANDWIDTH,resolution:n.attributes.RESOLUTION,codecs:n.attributes.CODECS},cause:"fast-quality"};return r!==a&&!s&&(t(n),r?i.trigger({type:"renditionenabled",metadata:o}):i.trigger({type:"renditiondisabled",metadata:o})),r};let ice=class{constructor(e,t,r){const{playlistController_:n}=e,s=n.fastQualityChange_.bind(n);if(t.attributes){const a=t.attributes.RESOLUTION;this.width=a&&a.width,this.height=a&&a.height,this.bandwidth=t.attributes.BANDWIDTH,this.frameRate=t.attributes["FRAME-RATE"]}this.codecs=h0(n.main(),t),this.playlist=t,this.id=r,this.enabled=rce(e.playlists,t.id,s)}};const nce=function(i){i.representations=()=>{const e=i.playlistController_.main(),t=lg(e)?i.playlistController_.getAudioTrackPlaylists_():e.playlists;return t?t.filter(r=>!k2(r)).map((r,n)=>new ice(i,r,r.id)):[]}},t4=["seeking","seeked","pause","playing","error"];let sce=class extends _e.EventTarget{constructor(e){super(),this.playlistController_=e.playlistController,this.tech_=e.tech,this.seekable=e.seekable,this.allowSeeksWithinUnsafeLiveWindow=e.allowSeeksWithinUnsafeLiveWindow,this.liveRangeSafeTimeDelta=e.liveRangeSafeTimeDelta,this.media=e.media,this.playedRanges_=[],this.consecutiveUpdates=0,this.lastRecordedTime=null,this.checkCurrentTimeTimeout_=null,this.logger_=$o("PlaybackWatcher"),this.logger_("initialize");const t=()=>this.monitorCurrentTime_(),r=()=>this.monitorCurrentTime_(),n=()=>this.techWaiting_(),s=()=>this.resetTimeUpdate_(),a=this.playlistController_,o=["main","subtitle","audio"],l={};o.forEach(c=>{l[c]={reset:()=>this.resetSegmentDownloads_(c),updateend:()=>this.checkSegmentDownloads_(c)},a[`${c}SegmentLoader_`].on("appendsdone",l[c].updateend),a[`${c}SegmentLoader_`].on("playlistupdate",l[c].reset),this.tech_.on(["seeked","seeking"],l[c].reset)});const u=c=>{["main","audio"].forEach(h=>{a[`${h}SegmentLoader_`][c]("appended",this.seekingAppendCheck_)})};this.seekingAppendCheck_=()=>{this.fixesBadSeeks_()&&(this.consecutiveUpdates=0,this.lastRecordedTime=this.tech_.currentTime(),u("off"))},this.clearSeekingAppendCheck_=()=>u("off"),this.watchForBadSeeking_=()=>{this.clearSeekingAppendCheck_(),u("on")},this.tech_.on("seeked",this.clearSeekingAppendCheck_),this.tech_.on("seeking",this.watchForBadSeeking_),this.tech_.on("waiting",n),this.tech_.on(t4,s),this.tech_.on("canplay",r),this.tech_.one("play",t),this.dispose=()=>{this.clearSeekingAppendCheck_(),this.logger_("dispose"),this.tech_.off("waiting",n),this.tech_.off(t4,s),this.tech_.off("canplay",r),this.tech_.off("play",t),this.tech_.off("seeking",this.watchForBadSeeking_),this.tech_.off("seeked",this.clearSeekingAppendCheck_),o.forEach(c=>{a[`${c}SegmentLoader_`].off("appendsdone",l[c].updateend),a[`${c}SegmentLoader_`].off("playlistupdate",l[c].reset),this.tech_.off(["seeked","seeking"],l[c].reset)}),this.checkCurrentTimeTimeout_&&X.clearTimeout(this.checkCurrentTimeTimeout_),this.resetTimeUpdate_()}}monitorCurrentTime_(){this.checkCurrentTime_(),this.checkCurrentTimeTimeout_&&X.clearTimeout(this.checkCurrentTimeTimeout_),this.checkCurrentTimeTimeout_=X.setTimeout(this.monitorCurrentTime_.bind(this),250)}resetSegmentDownloads_(e){const t=this.playlistController_[`${e}SegmentLoader_`];this[`${e}StalledDownloads_`]>0&&this.logger_(`resetting possible stalled download count for ${e} loader`),this[`${e}StalledDownloads_`]=0,this[`${e}Buffered_`]=t.buffered_()}checkSegmentDownloads_(e){const t=this.playlistController_,r=t[`${e}SegmentLoader_`],n=r.buffered_(),s=qoe(this[`${e}Buffered_`],n);if(this[`${e}Buffered_`]=n,s){const a={bufferedRanges:n};t.trigger({type:"bufferedrangeschanged",metadata:a}),this.resetSegmentDownloads_(e);return}this[`${e}StalledDownloads_`]++,this.logger_(`found #${this[`${e}StalledDownloads_`]} ${e} appends that did not increase buffer (possible stalled download)`,{playlistId:r.playlist_&&r.playlist_.id,buffered:oh(n)}),!(this[`${e}StalledDownloads_`]<10)&&(this.logger_(`${e} loader stalled download exclusion`),this.resetSegmentDownloads_(e),this.tech_.trigger({type:"usage",name:`vhs-${e}-download-exclusion`}),e!=="subtitle"&&t.excludePlaylist({error:{message:`Excessive ${e} segment downloading detected.`},playlistExclusionDuration:1/0}))}checkCurrentTime_(){if(this.tech_.paused()||this.tech_.seeking())return;const e=this.tech_.currentTime(),t=this.tech_.buffered();if(this.lastRecordedTime===e&&(!t.length||e+tu>=t.end(t.length-1)))return this.techWaiting_();if(this.consecutiveUpdates>=5&&e===this.lastRecordedTime)this.consecutiveUpdates++,this.waiting_();else if(e===this.lastRecordedTime)this.consecutiveUpdates++;else{this.playedRanges_.push(fs([this.lastRecordedTime,e]));const r={playedRanges:this.playedRanges_};this.playlistController_.trigger({type:"playedrangeschanged",metadata:r}),this.consecutiveUpdates=0,this.lastRecordedTime=e}}resetTimeUpdate_(){this.consecutiveUpdates=0}fixesBadSeeks_(){if(!this.tech_.seeking())return!1;const t=this.seekable(),r=this.tech_.currentTime(),n=this.afterSeekableWindow_(t,r,this.media(),this.allowSeeksWithinUnsafeLiveWindow);let s;if(n&&(s=t.end(t.length-1)),this.beforeSeekableWindow_(t,r)){const y=t.start(0);s=y+(y===t.end(0)?0:tu)}if(typeof s<"u")return this.logger_(`Trying to seek outside of seekable at time ${r} with seekable range ${x5(t)}. Seeking to ${s}.`),this.tech_.setCurrentTime(s),!0;const a=this.playlistController_.sourceUpdater_,o=this.tech_.buffered(),l=a.audioBuffer?a.audioBuffered():null,u=a.videoBuffer?a.videoBuffered():null,c=this.media(),h=c.partTargetDuration?c.partTargetDuration:(c.targetDuration-eu)*2,m=[l,u];for(let y=0;y<m.length;y++){if(!m[y])continue;if(E2(m[y],r)<h)return!1}const g=bv(o,r);return g.length===0?!1:(s=g.start(0)+tu,this.logger_(`Buffered region starts (${g.start(0)})  just beyond seek point (${r}). Seeking to ${s}.`),this.tech_.setCurrentTime(s),!0)}waiting_(){if(this.techWaiting_())return;const e=this.tech_.currentTime(),t=this.tech_.buffered(),r=Rf(t,e);if(r.length&&e+3<=r.end(0)){this.resetTimeUpdate_(),this.tech_.setCurrentTime(e),this.logger_(`Stopped at ${e} while inside a buffered region [${r.start(0)} -> ${r.end(0)}]. Attempting to resume playback by seeking to the current time.`),this.tech_.trigger({type:"usage",name:"vhs-unknown-waiting"});return}}techWaiting_(){const e=this.seekable(),t=this.tech_.currentTime();if(this.tech_.seeking())return!0;if(this.beforeSeekableWindow_(e,t)){const o=e.end(e.length-1);return this.logger_(`Fell out of live window at time ${t}. Seeking to live point (seekable end) ${o}`),this.resetTimeUpdate_(),this.tech_.setCurrentTime(o),this.tech_.trigger({type:"usage",name:"vhs-live-resync"}),!0}const r=this.tech_.vhs.playlistController_.sourceUpdater_,n=this.tech_.buffered();if(this.videoUnderflow_({audioBuffered:r.audioBuffered(),videoBuffered:r.videoBuffered(),currentTime:t}))return this.resetTimeUpdate_(),this.tech_.setCurrentTime(t),this.tech_.trigger({type:"usage",name:"vhs-video-underflow"}),!0;const a=bv(n,t);return a.length>0?(this.logger_(`Stopped at ${t} and seeking to ${a.start(0)}`),this.resetTimeUpdate_(),this.skipTheGap_(t),!0):!1}afterSeekableWindow_(e,t,r,n=!1){if(!e.length)return!1;let s=e.end(e.length-1)+tu;const a=!r.endList,o=typeof r.partTargetDuration=="number";return a&&(o||n)&&(s=e.end(e.length-1)+r.targetDuration*3),t>s}beforeSeekableWindow_(e,t){return!!(e.length&&e.start(0)>0&&t<e.start(0)-this.liveRangeSafeTimeDelta)}videoUnderflow_({videoBuffered:e,audioBuffered:t,currentTime:r}){if(!e)return;let n;if(e.length&&t.length){const s=Rf(e,r-3),a=Rf(e,r),o=Rf(t,r);o.length&&!a.length&&s.length&&(n={start:s.end(0),end:o.end(0)})}else bv(e,r).length||(n=this.gapFromVideoUnderflow_(e,r));return n?(this.logger_(`Encountered a gap in video from ${n.start} to ${n.end}. Seeking to current time ${r}`),!0):!1}skipTheGap_(e){const t=this.tech_.buffered(),r=this.tech_.currentTime(),n=bv(t,r);if(this.resetTimeUpdate_(),n.length===0||r!==e)return;this.logger_("skipTheGap_:","currentTime:",r,"scheduled currentTime:",e,"nextRange start:",n.start(0)),this.tech_.setCurrentTime(n.start(0)+eu);const s={gapInfo:{from:r,to:n.start(0)}};this.playlistController_.trigger({type:"gapjumped",metadata:s}),this.tech_.trigger({type:"usage",name:"vhs-gap-skip"})}gapFromVideoUnderflow_(e,t){const r=zoe(e);for(let n=0;n<r.length;n++){const s=r.start(n),a=r.end(n);if(t-s<4&&t-s>2)return{start:s,end:a}}return null}};const ace={errorInterval:30,getSource(i){const t=this.tech({IWillNotUseThisInPlugins:!0}).currentSource_||this.currentSource();return i(t)}},u6=function(i,e){let t=0,r=0;const n=_i(ace,e);i.ready(()=>{i.trigger({type:"usage",name:"vhs-error-reload-initialized"})});const s=function(){r&&i.currentTime(r)},a=function(c){c!=null&&(r=i.duration()!==1/0&&i.currentTime()||0,i.one("loadedmetadata",s),i.src(c),i.trigger({type:"usage",name:"vhs-error-reload"}),i.play())},o=function(){if(Date.now()-t<n.errorInterval*1e3){i.trigger({type:"usage",name:"vhs-error-reload-canceled"});return}if(!n.getSource||typeof n.getSource!="function"){_e.log.error("ERROR: reloadSourceOnError - The option getSource must be a function!");return}return t=Date.now(),n.getSource.call(i,a)},l=function(){i.off("loadedmetadata",s),i.off("error",o),i.off("dispose",l)},u=function(c){l(),u6(i,c)};i.on("error",o),i.on("dispose",l),i.reloadSourceOnError=u},oce=function(i){u6(this,i)};var c6="3.15.0",lce="7.0.3",uce="1.3.1",cce="7.2.0",dce="4.0.2";const Yi={PlaylistLoader:Lf,Playlist:wa,utils:mle,STANDARD_PLAYLIST_SELECTOR:HO,INITIAL_PLAYLIST_SELECTOR:iue,lastBandwidthSelector:HO,movingAverageBandwidthSelector:tue,comparePlaylistBandwidth:D2,comparePlaylistResolution:eue,xhr:B5()};Object.keys(Wn).forEach(i=>{Object.defineProperty(Yi,i,{get(){return _e.log.warn(`using Vhs.${i} is UNSAFE be sure you know what you are doing`),Wn[i]},set(e){if(_e.log.warn(`using Vhs.${i} is UNSAFE be sure you know what you are doing`),typeof e!="number"||e<0){_e.log.warn(`value of Vhs.${i} must be greater than or equal to 0`);return}Wn[i]=e}})});const d6="videojs-vhs",h6=function(i,e){const t=e.media();let r=-1;for(let n=0;n<i.length;n++)if(i[n].id===t.id){r=n;break}i.selectedIndex_=r,i.trigger({selectedIndex:r,type:"change"})},hce=function(i,e){e.representations().forEach(t=>{i.addQualityLevel(t)}),h6(i,e.playlists)};Yi.canPlaySource=function(){return _e.log.warn("VHS is no longer a tech. Please remove it from your player's techOrder.")};const fce=(i,e,t)=>{if(!i)return i;let r={};e&&e.attributes&&e.attributes.CODECS&&(r=j_(Rn(e.attributes.CODECS))),t&&t.attributes&&t.attributes.CODECS&&(r.audio=t.attributes.CODECS);const n=du(r.video),s=du(r.audio),a={};for(const o in i)a[o]={},s&&(a[o].audioContentType=s),n&&(a[o].videoContentType=n),e.contentProtection&&e.contentProtection[o]&&e.contentProtection[o].pssh&&(a[o].pssh=e.contentProtection[o].pssh),typeof i[o]=="string"&&(a[o].url=i[o]);return _i(i,a)},pce=(i,e)=>i.reduce((t,r)=>{if(!r.contentProtection)return t;const n=e.reduce((s,a)=>{const o=r.contentProtection[a];return o&&o.pssh&&(s[a]={pssh:o.pssh}),s},{});return Object.keys(n).length&&t.push(n),t},[]),mce=({player:i,sourceKeySystems:e,audioMedia:t,mainPlaylists:r})=>{if(!i.eme.initializeMediaKeys)return Promise.resolve();const n=t?r.concat([t]):r,s=pce(n,Object.keys(e)),a=[],o=[];return s.forEach(l=>{o.push(new Promise((u,c)=>{i.tech_.one("keysessioncreated",u)})),a.push(new Promise((u,c)=>{i.eme.initializeMediaKeys({keySystems:l},h=>{if(h){c(h);return}u()})}))}),Promise.race([Promise.all(a),Promise.race(o)])},gce=({player:i,sourceKeySystems:e,media:t,audioMedia:r})=>{const n=fce(e,t,r);return n?(i.currentSource().keySystems=n,n&&!i.eme?(_e.log.warn("DRM encrypted source cannot be decrypted without a DRM plugin"),!1):!0):!1},f6=()=>{if(!X.localStorage)return null;const i=X.localStorage.getItem(d6);if(!i)return null;try{return JSON.parse(i)}catch{return null}},vce=i=>{if(!X.localStorage)return!1;let e=f6();e=e?_i(e,i):i;try{X.localStorage.setItem(d6,JSON.stringify(e))}catch{return!1}return e},yce=i=>i.toLowerCase().indexOf("data:application/vnd.videojs.vhs+json,")===0?JSON.parse(i.substring(i.indexOf(",")+1)):i,p6=(i,e)=>{i._requestCallbackSet||(i._requestCallbackSet=new Set),i._requestCallbackSet.add(e)},m6=(i,e)=>{i._responseCallbackSet||(i._responseCallbackSet=new Set),i._responseCallbackSet.add(e)},g6=(i,e)=>{i._requestCallbackSet&&(i._requestCallbackSet.delete(e),i._requestCallbackSet.size||delete i._requestCallbackSet)},v6=(i,e)=>{i._responseCallbackSet&&(i._responseCallbackSet.delete(e),i._responseCallbackSet.size||delete i._responseCallbackSet)};Yi.supportsNativeHls=(function(){if(!Me||!Me.createElement)return!1;const i=Me.createElement("video");return _e.getTech("Html5").isSupported()?["application/vnd.apple.mpegurl","audio/mpegurl","audio/x-mpegurl","application/x-mpegurl","video/x-mpegurl","video/mpegurl","application/mpegurl"].some(function(t){return/maybe|probably/i.test(i.canPlayType(t))}):!1})();Yi.supportsNativeDash=(function(){return!Me||!Me.createElement||!_e.getTech("Html5").isSupported()?!1:/maybe|probably/i.test(Me.createElement("video").canPlayType("application/dash+xml"))})();Yi.supportsTypeNatively=i=>i==="hls"?Yi.supportsNativeHls:i==="dash"?Yi.supportsNativeDash:!1;Yi.isSupported=function(){return _e.log.warn("VHS is no longer a tech. Please remove it from your player's techOrder.")};Yi.xhr.onRequest=function(i){p6(Yi.xhr,i)};Yi.xhr.onResponse=function(i){m6(Yi.xhr,i)};Yi.xhr.offRequest=function(i){g6(Yi.xhr,i)};Yi.xhr.offResponse=function(i){v6(Yi.xhr,i)};const _ce=_e.getComponent("Component");let y6=class extends _ce{constructor(e,t,r){if(super(t,r.vhs),typeof r.initialBandwidth=="number"&&(this.options_.bandwidth=r.initialBandwidth),this.logger_=$o("VhsHandler"),t.options_&&t.options_.playerId){const n=_e.getPlayer(t.options_.playerId);this.player_=n}if(this.tech_=t,this.source_=e,this.stats={},this.ignoreNextSeekingEvent_=!1,this.setOptions_(),this.options_.overrideNative&&t.overrideNativeAudioTracks&&t.overrideNativeVideoTracks)t.overrideNativeAudioTracks(!0),t.overrideNativeVideoTracks(!0);else if(this.options_.overrideNative&&(t.featuresNativeVideoTracks||t.featuresNativeAudioTracks))throw new Error("Overriding native VHS requires emulated tracks. See https://git.io/vMpjB");this.on(Me,["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","MSFullscreenChange"],n=>{const s=Me.fullscreenElement||Me.webkitFullscreenElement||Me.mozFullScreenElement||Me.msFullscreenElement;s&&s.contains(this.tech_.el())?this.playlistController_.fastQualityChange_():this.playlistController_.checkABR_()}),this.on(this.tech_,"seeking",function(){if(this.ignoreNextSeekingEvent_){this.ignoreNextSeekingEvent_=!1;return}this.setCurrentTime(this.tech_.currentTime())}),this.on(this.tech_,"error",function(){this.tech_.error()&&this.playlistController_&&this.playlistController_.pauseLoading()}),this.on(this.tech_,"play",this.play)}setOptions_(e={}){if(this.options_=_i(this.options_,e),this.options_.withCredentials=this.options_.withCredentials||!1,this.options_.limitRenditionByPlayerDimensions=this.options_.limitRenditionByPlayerDimensions!==!1,this.options_.useDevicePixelRatio=this.options_.useDevicePixelRatio||!1,this.options_.useBandwidthFromLocalStorage=typeof this.source_.useBandwidthFromLocalStorage<"u"?this.source_.useBandwidthFromLocalStorage:this.options_.useBandwidthFromLocalStorage||!1,this.options_.useForcedSubtitles=this.options_.useForcedSubtitles||!1,this.options_.useNetworkInformationApi=this.options_.useNetworkInformationApi||!1,this.options_.useDtsForTimestampOffset=this.options_.useDtsForTimestampOffset||!1,this.options_.customTagParsers=this.options_.customTagParsers||[],this.options_.customTagMappers=this.options_.customTagMappers||[],this.options_.cacheEncryptionKeys=this.options_.cacheEncryptionKeys||!1,this.options_.llhls=this.options_.llhls!==!1,this.options_.bufferBasedABR=this.options_.bufferBasedABR||!1,typeof this.options_.playlistExclusionDuration!="number"&&(this.options_.playlistExclusionDuration=60),typeof this.options_.bandwidth!="number"&&this.options_.useBandwidthFromLocalStorage){const r=f6();r&&r.bandwidth&&(this.options_.bandwidth=r.bandwidth,this.tech_.trigger({type:"usage",name:"vhs-bandwidth-from-local-storage"})),r&&r.throughput&&(this.options_.throughput=r.throughput,this.tech_.trigger({type:"usage",name:"vhs-throughput-from-local-storage"}))}typeof this.options_.bandwidth!="number"&&(this.options_.bandwidth=Wn.INITIAL_BANDWIDTH),this.options_.enableLowInitialPlaylist=this.options_.enableLowInitialPlaylist&&this.options_.bandwidth===Wn.INITIAL_BANDWIDTH,["withCredentials","useDevicePixelRatio","customPixelRatio","limitRenditionByPlayerDimensions","bandwidth","customTagParsers","customTagMappers","cacheEncryptionKeys","playlistSelector","initialPlaylistSelector","bufferBasedABR","liveRangeSafeTimeDelta","llhls","useForcedSubtitles","useNetworkInformationApi","useDtsForTimestampOffset","exactManifestTimings","leastPixelDiffSelector"].forEach(r=>{typeof this.source_[r]<"u"&&(this.options_[r]=this.source_[r])}),this.limitRenditionByPlayerDimensions=this.options_.limitRenditionByPlayerDimensions,this.useDevicePixelRatio=this.options_.useDevicePixelRatio;const t=this.options_.customPixelRatio;typeof t=="number"&&t>=0&&(this.customPixelRatio=t)}setOptions(e={}){this.setOptions_(e)}src(e,t){if(!e)return;this.setOptions_(),this.options_.src=yce(this.source_.src),this.options_.tech=this.tech_,this.options_.externVhs=Yi,this.options_.sourceType=Yx(t),this.options_.seekTo=s=>{this.tech_.setCurrentTime(s)},this.options_.player_=this.player_,this.playlistController_=new tce(this.options_);const r=_i({liveRangeSafeTimeDelta:tu},this.options_,{seekable:()=>this.seekable(),media:()=>this.playlistController_.media(),playlistController:this.playlistController_});this.playbackWatcher_=new sce(r),this.attachStreamingEventListeners_(),this.playlistController_.on("error",()=>{const s=_e.players[this.tech_.options_.playerId];let a=this.playlistController_.error;typeof a=="object"&&!a.code?a.code=3:typeof a=="string"&&(a={message:a,code:3}),s.error(a)});const n=this.options_.bufferBasedABR?Yi.movingAverageBandwidthSelector(.55):Yi.STANDARD_PLAYLIST_SELECTOR;this.playlistController_.selectPlaylist=this.selectPlaylist?this.selectPlaylist.bind(this):n.bind(this),this.playlistController_.selectInitialPlaylist=Yi.INITIAL_PLAYLIST_SELECTOR.bind(this),this.playlists=this.playlistController_.mainPlaylistLoader_,this.mediaSource=this.playlistController_.mediaSource,Object.defineProperties(this,{selectPlaylist:{get(){return this.playlistController_.selectPlaylist},set(s){this.playlistController_.selectPlaylist=s.bind(this)}},throughput:{get(){return this.playlistController_.mainSegmentLoader_.throughput.rate},set(s){this.playlistController_.mainSegmentLoader_.throughput.rate=s,this.playlistController_.mainSegmentLoader_.throughput.count=1}},bandwidth:{get(){let s=this.playlistController_.mainSegmentLoader_.bandwidth;const a=X.navigator.connection||X.navigator.mozConnection||X.navigator.webkitConnection,o=1e7;if(this.options_.useNetworkInformationApi&&a){const l=a.downlink*1e3*1e3;l>=o&&s>=o?s=Math.max(s,l):s=l}return s},set(s){this.playlistController_.mainSegmentLoader_.bandwidth=s,this.playlistController_.mainSegmentLoader_.throughput={rate:0,count:0}}},systemBandwidth:{get(){const s=1/(this.bandwidth||1);let a;return this.throughput>0?a=1/this.throughput:a=0,Math.floor(1/(s+a))},set(){_e.log.error('The "systemBandwidth" property is read-only')}}}),this.options_.bandwidth&&(this.bandwidth=this.options_.bandwidth),this.options_.throughput&&(this.throughput=this.options_.throughput),Object.defineProperties(this.stats,{bandwidth:{get:()=>this.bandwidth||0,enumerable:!0},mediaRequests:{get:()=>this.playlistController_.mediaRequests_()||0,enumerable:!0},mediaRequestsAborted:{get:()=>this.playlistController_.mediaRequestsAborted_()||0,enumerable:!0},mediaRequestsTimedout:{get:()=>this.playlistController_.mediaRequestsTimedout_()||0,enumerable:!0},mediaRequestsErrored:{get:()=>this.playlistController_.mediaRequestsErrored_()||0,enumerable:!0},mediaTransferDuration:{get:()=>this.playlistController_.mediaTransferDuration_()||0,enumerable:!0},mediaBytesTransferred:{get:()=>this.playlistController_.mediaBytesTransferred_()||0,enumerable:!0},mediaSecondsLoaded:{get:()=>this.playlistController_.mediaSecondsLoaded_()||0,enumerable:!0},mediaAppends:{get:()=>this.playlistController_.mediaAppends_()||0,enumerable:!0},mainAppendsToLoadedData:{get:()=>this.playlistController_.mainAppendsToLoadedData_()||0,enumerable:!0},audioAppendsToLoadedData:{get:()=>this.playlistController_.audioAppendsToLoadedData_()||0,enumerable:!0},appendsToLoadedData:{get:()=>this.playlistController_.appendsToLoadedData_()||0,enumerable:!0},timeToLoadedData:{get:()=>this.playlistController_.timeToLoadedData_()||0,enumerable:!0},buffered:{get:()=>oh(this.tech_.buffered()),enumerable:!0},currentTime:{get:()=>this.tech_.currentTime(),enumerable:!0},currentSource:{get:()=>this.tech_.currentSource_,enumerable:!0},currentTech:{get:()=>this.tech_.name_,enumerable:!0},duration:{get:()=>this.tech_.duration(),enumerable:!0},main:{get:()=>this.playlists.main,enumerable:!0},playerDimensions:{get:()=>this.tech_.currentDimensions(),enumerable:!0},seekable:{get:()=>oh(this.tech_.seekable()),enumerable:!0},timestamp:{get:()=>Date.now(),enumerable:!0},videoPlaybackQuality:{get:()=>this.tech_.getVideoPlaybackQuality(),enumerable:!0}}),this.tech_.one("canplay",this.playlistController_.setupFirstPlay.bind(this.playlistController_)),this.tech_.on("bandwidthupdate",()=>{this.options_.useBandwidthFromLocalStorage&&vce({bandwidth:this.bandwidth,throughput:Math.round(this.throughput)})}),this.playlistController_.on("selectedinitialmedia",()=>{nce(this)}),this.playlistController_.sourceUpdater_.on("createdsourcebuffers",()=>{this.setupEme_()}),this.on(this.playlistController_,"progress",function(){this.tech_.trigger("progress")}),this.on(this.playlistController_,"firstplay",function(){this.ignoreNextSeekingEvent_=!0}),this.setupQualityLevels_(),this.tech_.el()&&(this.mediaSourceUrl_=X.URL.createObjectURL(this.playlistController_.mediaSource),(_e.browser.IS_ANY_SAFARI||_e.browser.IS_IOS)&&this.options_.overrideNative&&this.options_.sourceType==="hls"&&typeof this.tech_.addSourceElement=="function"?(this.tech_.addSourceElement(this.mediaSourceUrl_),this.tech_.addSourceElement(this.source_.src)):this.tech_.src(this.mediaSourceUrl_))}createKeySessions_(){const e=this.playlistController_.mediaTypes_.AUDIO.activePlaylistLoader;this.logger_("waiting for EME key session creation"),mce({player:this.player_,sourceKeySystems:this.source_.keySystems,audioMedia:e&&e.media(),mainPlaylists:this.playlists.main.playlists}).then(()=>{this.logger_("created EME key session"),this.playlistController_.sourceUpdater_.initializedEme()}).catch(t=>{this.logger_("error while creating EME key session",t),this.player_.error({message:"Failed to initialize media keys for EME",code:3})})}handleWaitingForKey_(){this.logger_("waitingforkey fired, attempting to create any new key sessions"),this.createKeySessions_()}setupEme_(){const e=this.playlistController_.mediaTypes_.AUDIO.activePlaylistLoader,t=gce({player:this.player_,sourceKeySystems:this.source_.keySystems,media:this.playlists.media(),audioMedia:e&&e.media()});if(this.player_.tech_.on("keystatuschange",r=>{this.playlistController_.updatePlaylistByKeyStatus(r.keyId,r.status)}),this.handleWaitingForKey_=this.handleWaitingForKey_.bind(this),this.player_.tech_.on("waitingforkey",this.handleWaitingForKey_),!t){this.playlistController_.sourceUpdater_.initializedEme();return}this.createKeySessions_()}setupQualityLevels_(){const e=_e.players[this.tech_.options_.playerId];!e||!e.qualityLevels||this.qualityLevels_||(this.qualityLevels_=e.qualityLevels(),this.playlistController_.on("selectedinitialmedia",()=>{hce(this.qualityLevels_,this)}),this.playlists.on("mediachange",()=>{h6(this.qualityLevels_,this.playlists)}))}static version(){return{"@videojs/http-streaming":c6,"mux.js":lce,"mpd-parser":uce,"m3u8-parser":cce,"aes-decrypter":dce}}version(){return this.constructor.version()}canChangeType(){return s6.canChangeType()}play(){this.playlistController_.play()}setCurrentTime(e){this.playlistController_.setCurrentTime(e)}duration(){return this.playlistController_.duration()}seekable(){return this.playlistController_.seekable()}dispose(){this.playbackWatcher_&&this.playbackWatcher_.dispose(),this.playlistController_&&this.playlistController_.dispose(),this.qualityLevels_&&this.qualityLevels_.dispose(),this.tech_&&this.tech_.vhs&&delete this.tech_.vhs,this.mediaSourceUrl_&&X.URL.revokeObjectURL&&(X.URL.revokeObjectURL(this.mediaSourceUrl_),this.mediaSourceUrl_=null),this.tech_&&this.tech_.off("waitingforkey",this.handleWaitingForKey_),super.dispose()}convertToProgramTime(e,t){return ble({playlist:this.playlistController_.media(),time:e,callback:t})}seekToProgramTime(e,t,r=!0,n=2){return z5({programTime:e,playlist:this.playlistController_.media(),retryCount:n,pauseAfterSeek:r,seekTo:this.options_.seekTo,tech:this.options_.tech,callback:t})}setupXhrHooks_(){this.xhr.onRequest=e=>{p6(this.xhr,e)},this.xhr.onResponse=e=>{m6(this.xhr,e)},this.xhr.offRequest=e=>{g6(this.xhr,e)},this.xhr.offResponse=e=>{v6(this.xhr,e)},this.player_.trigger("xhr-hooks-ready")}attachStreamingEventListeners_(){const e=["seekablerangeschanged","bufferedrangeschanged","contentsteeringloadstart","contentsteeringloadcomplete","contentsteeringparsed"],t=["gapjumped","playedrangeschanged"];e.forEach(r=>{this.playlistController_.on(r,n=>{this.player_.trigger(Jt({},n))})}),t.forEach(r=>{this.playbackWatcher_.on(r,n=>{this.player_.trigger(Jt({},n))})})}};const V_={name:"videojs-http-streaming",VERSION:c6,canHandleSource(i,e={}){const t=_i(_e.options,e);return!t.vhs.experimentalUseMMS&&!cu("avc1.4d400d,mp4a.40.2",!1)?!1:V_.canPlayType(i.type,t)},handleSource(i,e,t={}){const r=_i(_e.options,t);return e.vhs=new y6(i,e,r),e.vhs.xhr=B5(),e.vhs.setupXhrHooks_(),e.vhs.src(i.src,i.type),e.vhs},canPlayType(i,e){const t=Yx(i);if(!t)return"";const r=V_.getOverrideNative(e);return!Yi.supportsTypeNatively(t)||r?"maybe":""},getOverrideNative(i={}){const{vhs:e={}}=i,t=!(_e.browser.IS_ANY_SAFARI||_e.browser.IS_IOS),{overrideNative:r=t}=e;return r}},xce=()=>cu("avc1.4d400d,mp4a.40.2",!0);xce()&&_e.getTech("Html5").registerSourceHandler(V_,0);_e.VhsHandler=y6;_e.VhsSourceHandler=V_;_e.Vhs=Yi;_e.use||_e.registerComponent("Vhs",Yi);_e.options.vhs=_e.options.vhs||{};(!_e.getPlugin||!_e.getPlugin("reloadSourceOnError"))&&_e.registerPlugin("reloadSourceOnError",oce);var Ev={exports:{}},r4;function Tce(){return r4||(r4=1,(function(i,e){function t(l){if(l&&typeof l=="object"){var u=l.which||l.keyCode||l.charCode;u&&(l=u)}if(typeof l=="number")return a[l];var c=String(l),h=r[c.toLowerCase()];if(h)return h;var h=n[c.toLowerCase()];if(h)return h;if(c.length===1)return c.charCodeAt(0)}t.isEventKey=function(u,c){if(u&&typeof u=="object"){var h=u.which||u.keyCode||u.charCode;if(h==null)return!1;if(typeof c=="string"){var m=r[c.toLowerCase()];if(m)return m===h;var m=n[c.toLowerCase()];if(m)return m===h}else if(typeof c=="number")return c===h;return!1}},e=i.exports=t;var r=e.code=e.codes={backspace:8,tab:9,enter:13,shift:16,ctrl:17,alt:18,"pause/break":19,"caps lock":20,esc:27,space:32,"page up":33,"page down":34,end:35,home:36,left:37,up:38,right:39,down:40,insert:45,delete:46,command:91,"left command":91,"right command":93,"numpad *":106,"numpad +":107,"numpad -":109,"numpad .":110,"numpad /":111,"num lock":144,"scroll lock":145,"my computer":182,"my calculator":183,";":186,"=":187,",":188,"-":189,".":190,"/":191,"`":192,"[":219,"\\":220,"]":221,"'":222},n=e.aliases={windows:91,"":16,"":18,"":17,"":91,ctl:17,control:17,option:18,pause:19,break:19,caps:20,return:13,escape:27,spc:32,spacebar:32,pgup:33,pgdn:34,ins:45,del:46,cmd:91};/*!
 * Programatically add the following
 */for(s=97;s<123;s++)r[String.fromCharCode(s)]=s-32;for(var s=48;s<58;s++)r[s-48]=s;for(s=1;s<13;s++)r["f"+s]=s+111;for(s=0;s<10;s++)r["numpad "+s]=s+96;var a=e.names=e.title={};for(s in r)a[r[s]]=s;for(var o in n)r[o]=n[o]})(Ev,Ev.exports)),Ev.exports}var bce=Tce();const Ar=ia(bce);var a1,i4;function Sce(){if(i4)return a1;i4=1,a1=i;function i(e,t){var r,n=null;try{r=JSON.parse(e,t)}catch(s){n=s}return[n,r]}return a1}var Cce=Sce();const Ece=ia(Cce);var wv={exports:{}},o1,n4;function wce(){if(n4)return o1;n4=1;var i=Dp(),e=function(n,s){return s===void 0&&(s=!1),function(a,o,l){if(a){n(a);return}if(o.statusCode>=400&&o.statusCode<=599){var u=l;if(s)if(i.TextDecoder){var c=t(o.headers&&o.headers["content-type"]);try{u=new TextDecoder(c).decode(l)}catch{}}else u=String.fromCharCode.apply(null,new Uint8Array(l));n({cause:u});return}n(null,l)}};function t(r){return r===void 0&&(r=""),r.toLowerCase().split(";").reduce(function(n,s){var a=s.split("="),o=a[0],l=a[1];return o.trim()==="charset"?l.trim():n},"utf-8")}return o1=e,o1}var s4;function kce(){if(s4)return wv.exports;s4=1;var i=Dp(),e=P8(),t=R8();o.httpHandler=wce();/**
 * @license
 * slighly modified parse-headers 2.0.2 <https://github.com/kesla/parse-headers/>
 * Copyright (c) 2014 David Bjrklund
 * Available under the MIT license
 * <https://github.com/kesla/parse-headers/blob/master/LICENCE>
 */var r=function(m){var g={};return m&&m.trim().split(`
`).forEach(function(y){var _=y.indexOf(":"),T=y.slice(0,_).trim().toLowerCase(),E=y.slice(_+1).trim();typeof g[T]>"u"?g[T]=E:Array.isArray(g[T])?g[T].push(E):g[T]=[g[T],E]}),g};wv.exports=o,wv.exports.default=o,o.XMLHttpRequest=i.XMLHttpRequest||c,o.XDomainRequest="withCredentials"in new o.XMLHttpRequest?o.XMLHttpRequest:i.XDomainRequest,n(["get","put","post","patch","head","delete"],function(h){o[h==="delete"?"del":h]=function(m,g,y){return g=a(m,g,y),g.method=h.toUpperCase(),l(g)}});function n(h,m){for(var g=0;g<h.length;g++)m(h[g])}function s(h){for(var m in h)if(h.hasOwnProperty(m))return!1;return!0}function a(h,m,g){var y=h;return t(m)?(g=m,typeof h=="string"&&(y={uri:h})):y=e({},m,{uri:h}),y.callback=g,y}function o(h,m,g){return m=a(h,m,g),l(m)}function l(h){if(typeof h.callback>"u")throw new Error("callback argument missing");var m=!1,g=function(re,se,de){m||(m=!0,h.callback(re,se,de))};function y(){w.readyState===4&&setTimeout(E,0)}function _(){var H=void 0;if(w.response?H=w.response:H=w.responseText||u(w),k)try{H=JSON.parse(H)}catch{}return H}function T(H){return clearTimeout(q),H instanceof Error||(H=new Error(""+(H||"Unknown XMLHttpRequest Error"))),H.statusCode=0,g(H,G)}function E(){if(!R){var H;clearTimeout(q),h.useXDR&&w.status===void 0?H=200:H=w.status===1223?204:w.status;var re=G,se=null;return H!==0?(re={body:_(),statusCode:H,method:L,headers:{},url:A,rawRequest:w},w.getAllResponseHeaders&&(re.headers=r(w.getAllResponseHeaders()))):se=new Error("Internal XMLHttpRequest Error"),g(se,re,re.body)}}var w=h.xhr||null;w||(h.cors||h.useXDR?w=new o.XDomainRequest:w=new o.XMLHttpRequest);var D,R,A=w.url=h.uri||h.url,L=w.method=h.method||"GET",F=h.body||h.data,B=w.headers=h.headers||{},M=!!h.sync,k=!1,q,G={body:void 0,headers:{},statusCode:0,method:L,url:A,rawRequest:w};if("json"in h&&h.json!==!1&&(k=!0,B.accept||B.Accept||(B.Accept="application/json"),L!=="GET"&&L!=="HEAD"&&(B["content-type"]||B["Content-Type"]||(B["Content-Type"]="application/json"),F=JSON.stringify(h.json===!0?F:h.json))),w.onreadystatechange=y,w.onload=E,w.onerror=T,w.onprogress=function(){},w.onabort=function(){R=!0},w.ontimeout=T,w.open(L,A,!M,h.username,h.password),M||(w.withCredentials=!!h.withCredentials),!M&&h.timeout>0&&(q=setTimeout(function(){if(!R){R=!0,w.abort("timeout");var H=new Error("XMLHttpRequest timeout");H.code="ETIMEDOUT",T(H)}},h.timeout)),w.setRequestHeader)for(D in B)B.hasOwnProperty(D)&&w.setRequestHeader(D,B[D]);else if(h.headers&&!s(h.headers))throw new Error("Headers cannot be set on an XDomainRequest object");return"responseType"in h&&(w.responseType=h.responseType),"beforeSend"in h&&typeof h.beforeSend=="function"&&h.beforeSend(w),w.send(F||null),w}function u(h){try{if(h.responseType==="document")return h.responseXML;var m=h.responseXML&&h.responseXML.documentElement.nodeName==="parsererror";if(h.responseType===""&&!m)return h.responseXML}catch{}return null}function c(){}return wv.exports}var Ace=kce();const _6=ia(Ace);function x6(){try{var i=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(x6=function(){return!!i})()}function T6(i,e,t){if(x6())return Reflect.construct.apply(null,arguments);var r=[null];r.push.apply(r,e);var n=new(i.bind.apply(i,r));return t&&ip(n,t.prototype),n}var l1={exports:{}},a4;function Ice(){return a4||(a4=1,(function(i,e){(function(t){var r=/^(?=((?:[a-zA-Z0-9+\-.]+:)?))\1(?=((?:\/\/[^\/?#]*)?))\2(?=((?:(?:[^?#\/]*\/)*[^;?#\/]*)?))\3((?:;[^?#]*)?)(\?[^#]*)?(#[^]*)?$/,n=/^(?=([^\/?#]*))\1([^]*)$/,s=/(?:\/|^)\.(?=\/)/g,a=/(?:\/|^)\.\.\/(?!\.\.\/)[^\/]*(?=\/)/g,o={buildAbsoluteURL:function(l,u,c){if(c=c||{},l=l.trim(),u=u.trim(),!u){if(!c.alwaysNormalize)return l;var h=o.parseURL(l);if(!h)throw new Error("Error trying to parse base URL.");return h.path=o.normalizePath(h.path),o.buildURLFromParts(h)}var m=o.parseURL(u);if(!m)throw new Error("Error trying to parse relative URL.");if(m.scheme)return c.alwaysNormalize?(m.path=o.normalizePath(m.path),o.buildURLFromParts(m)):u;var g=o.parseURL(l);if(!g)throw new Error("Error trying to parse base URL.");if(!g.netLoc&&g.path&&g.path[0]!=="/"){var y=n.exec(g.path);g.netLoc=y[1],g.path=y[2]}g.netLoc&&!g.path&&(g.path="/");var _={scheme:g.scheme,netLoc:m.netLoc,path:null,params:m.params,query:m.query,fragment:m.fragment};if(!m.netLoc&&(_.netLoc=g.netLoc,m.path[0]!=="/"))if(!m.path)_.path=g.path,m.params||(_.params=g.params,m.query||(_.query=g.query));else{var T=g.path,E=T.substring(0,T.lastIndexOf("/")+1)+m.path;_.path=o.normalizePath(E)}return _.path===null&&(_.path=c.alwaysNormalize?o.normalizePath(m.path):m.path),o.buildURLFromParts(_)},parseURL:function(l){var u=r.exec(l);return u?{scheme:u[1]||"",netLoc:u[2]||"",path:u[3]||"",params:u[4]||"",query:u[5]||"",fragment:u[6]||""}:null},normalizePath:function(l){for(l=l.split("").reverse().join("").replace(s,"");l.length!==(l=l.replace(a,"")).length;);return l.split("").reverse().join("")},buildURLFromParts:function(l){return l.scheme+l.netLoc+l.path+l.params+l.query+l.fragment}};i.exports=o})()})(l1)),l1.exports}var Dce=Ice();const o4=ia(Dce);var l4="http://example.com",gT=function(e,t){if(/^[a-z]+:/i.test(t))return t;/^data:/.test(e)&&(e=X.location&&X.location.href||"");var r=typeof X.URL=="function",n=/^\/\//.test(e),s=!X.location&&!/\/\//i.test(e);if(r?e=new X.URL(e,X.location||l4):/\/\//i.test(e)||(e=o4.buildAbsoluteURL(X.location&&X.location.href||"",e)),r){var a=new URL(t,e);return s?a.href.slice(l4.length):n?a.href.slice(a.protocol.length):a.href}return o4.buildAbsoluteURL(e,t)},P2=(function(){function i(){this.listeners={}}var e=i.prototype;return e.on=function(r,n){this.listeners[r]||(this.listeners[r]=[]),this.listeners[r].push(n)},e.off=function(r,n){if(!this.listeners[r])return!1;var s=this.listeners[r].indexOf(n);return this.listeners[r]=this.listeners[r].slice(0),this.listeners[r].splice(s,1),s>-1},e.trigger=function(r){var n=this.listeners[r];if(n)if(arguments.length===2)for(var s=n.length,a=0;a<s;++a)n[a].call(this,arguments[1]);else for(var o=Array.prototype.slice.call(arguments,1),l=n.length,u=0;u<l;++u)n[u].apply(this,o)},e.dispose=function(){this.listeners={}},e.pipe=function(r){this.on("data",function(n){r.push(n)})},i})(),Pce=function(e){return X.atob?X.atob(e):Buffer.from(e,"base64").toString("binary")};function b6(i){for(var e=Pce(i),t=new Uint8Array(e.length),r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}/*! @name m3u8-parser @version 4.8.0 @license Apache-2.0 */var Rce=(function(i){Ft(e,i);function e(){var r;return r=i.call(this)||this,r.buffer="",r}var t=e.prototype;return t.push=function(n){var s;for(this.buffer+=n,s=this.buffer.indexOf(`
`);s>-1;s=this.buffer.indexOf(`
`))this.trigger("data",this.buffer.substring(0,s)),this.buffer=this.buffer.substring(s+1)},e})(P2),Lce="	",u1=function(e){var t=/([0-9.]*)?@?([0-9.]*)?/.exec(e||""),r={};return t[1]&&(r.length=parseInt(t[1],10)),t[2]&&(r.offset=parseInt(t[2],10)),r},Oce=function(){var e="[^=]*",t='"[^"]*"|[^,]*',r="(?:"+e+")=(?:"+t+")";return new RegExp("(?:^|,)("+r+")")},rl=function(e){for(var t=e.split(Oce()),r={},n=t.length,s;n--;)t[n]!==""&&(s=/([^=]*)=(.*)/.exec(t[n]).slice(1),s[0]=s[0].replace(/^\s+|\s+$/g,""),s[1]=s[1].replace(/^\s+|\s+$/g,""),s[1]=s[1].replace(/^['"](.*)['"]$/g,"$1"),r[s[0]]=s[1]);return r},Mce=(function(i){Ft(e,i);function e(){var r;return r=i.call(this)||this,r.customParsers=[],r.tagMappers=[],r}var t=e.prototype;return t.push=function(n){var s=this,a,o;if(n=n.trim(),n.length!==0){if(n[0]!=="#"){this.trigger("data",{type:"uri",uri:n});return}var l=this.tagMappers.reduce(function(u,c){var h=c(n);return h===n?u:u.concat([h])},[n]);l.forEach(function(u){for(var c=0;c<s.customParsers.length;c++)if(s.customParsers[c].call(s,u))return;if(u.indexOf("#EXT")!==0){s.trigger("data",{type:"comment",text:u.slice(1)});return}if(u=u.replace("\r",""),a=/^#EXTM3U/.exec(u),a){s.trigger("data",{type:"tag",tagType:"m3u"});return}if(a=/^#EXTINF:?([0-9\.]*)?,?(.*)?$/.exec(u),a){o={type:"tag",tagType:"inf"},a[1]&&(o.duration=parseFloat(a[1])),a[2]&&(o.title=a[2]),s.trigger("data",o);return}if(a=/^#EXT-X-TARGETDURATION:?([0-9.]*)?/.exec(u),a){o={type:"tag",tagType:"targetduration"},a[1]&&(o.duration=parseInt(a[1],10)),s.trigger("data",o);return}if(a=/^#EXT-X-VERSION:?([0-9.]*)?/.exec(u),a){o={type:"tag",tagType:"version"},a[1]&&(o.version=parseInt(a[1],10)),s.trigger("data",o);return}if(a=/^#EXT-X-MEDIA-SEQUENCE:?(\-?[0-9.]*)?/.exec(u),a){o={type:"tag",tagType:"media-sequence"},a[1]&&(o.number=parseInt(a[1],10)),s.trigger("data",o);return}if(a=/^#EXT-X-DISCONTINUITY-SEQUENCE:?(\-?[0-9.]*)?/.exec(u),a){o={type:"tag",tagType:"discontinuity-sequence"},a[1]&&(o.number=parseInt(a[1],10)),s.trigger("data",o);return}if(a=/^#EXT-X-PLAYLIST-TYPE:?(.*)?$/.exec(u),a){o={type:"tag",tagType:"playlist-type"},a[1]&&(o.playlistType=a[1]),s.trigger("data",o);return}if(a=/^#EXT-X-BYTERANGE:?(.*)?$/.exec(u),a){o=Jt(u1(a[1]),{type:"tag",tagType:"byterange"}),s.trigger("data",o);return}if(a=/^#EXT-X-ALLOW-CACHE:?(YES|NO)?/.exec(u),a){o={type:"tag",tagType:"allow-cache"},a[1]&&(o.allowed=!/NO/.test(a[1])),s.trigger("data",o);return}if(a=/^#EXT-X-MAP:?(.*)$/.exec(u),a){if(o={type:"tag",tagType:"map"},a[1]){var h=rl(a[1]);h.URI&&(o.uri=h.URI),h.BYTERANGE&&(o.byterange=u1(h.BYTERANGE))}s.trigger("data",o);return}if(a=/^#EXT-X-STREAM-INF:?(.*)$/.exec(u),a){if(o={type:"tag",tagType:"stream-inf"},a[1]){if(o.attributes=rl(a[1]),o.attributes.RESOLUTION){var m=o.attributes.RESOLUTION.split("x"),g={};m[0]&&(g.width=parseInt(m[0],10)),m[1]&&(g.height=parseInt(m[1],10)),o.attributes.RESOLUTION=g}o.attributes.BANDWIDTH&&(o.attributes.BANDWIDTH=parseInt(o.attributes.BANDWIDTH,10)),o.attributes["FRAME-RATE"]&&(o.attributes["FRAME-RATE"]=parseFloat(o.attributes["FRAME-RATE"])),o.attributes["PROGRAM-ID"]&&(o.attributes["PROGRAM-ID"]=parseInt(o.attributes["PROGRAM-ID"],10))}s.trigger("data",o);return}if(a=/^#EXT-X-MEDIA:?(.*)$/.exec(u),a){o={type:"tag",tagType:"media"},a[1]&&(o.attributes=rl(a[1])),s.trigger("data",o);return}if(a=/^#EXT-X-ENDLIST/.exec(u),a){s.trigger("data",{type:"tag",tagType:"endlist"});return}if(a=/^#EXT-X-DISCONTINUITY/.exec(u),a){s.trigger("data",{type:"tag",tagType:"discontinuity"});return}if(a=/^#EXT-X-PROGRAM-DATE-TIME:?(.*)$/.exec(u),a){o={type:"tag",tagType:"program-date-time"},a[1]&&(o.dateTimeString=a[1],o.dateTimeObject=new Date(a[1])),s.trigger("data",o);return}if(a=/^#EXT-X-KEY:?(.*)$/.exec(u),a){o={type:"tag",tagType:"key"},a[1]&&(o.attributes=rl(a[1]),o.attributes.IV&&(o.attributes.IV.substring(0,2).toLowerCase()==="0x"&&(o.attributes.IV=o.attributes.IV.substring(2)),o.attributes.IV=o.attributes.IV.match(/.{8}/g),o.attributes.IV[0]=parseInt(o.attributes.IV[0],16),o.attributes.IV[1]=parseInt(o.attributes.IV[1],16),o.attributes.IV[2]=parseInt(o.attributes.IV[2],16),o.attributes.IV[3]=parseInt(o.attributes.IV[3],16),o.attributes.IV=new Uint32Array(o.attributes.IV))),s.trigger("data",o);return}if(a=/^#EXT-X-START:?(.*)$/.exec(u),a){o={type:"tag",tagType:"start"},a[1]&&(o.attributes=rl(a[1]),o.attributes["TIME-OFFSET"]=parseFloat(o.attributes["TIME-OFFSET"]),o.attributes.PRECISE=/YES/.test(o.attributes.PRECISE)),s.trigger("data",o);return}if(a=/^#EXT-X-CUE-OUT-CONT:?(.*)?$/.exec(u),a){o={type:"tag",tagType:"cue-out-cont"},a[1]?o.data=a[1]:o.data="",s.trigger("data",o);return}if(a=/^#EXT-X-CUE-OUT:?(.*)?$/.exec(u),a){o={type:"tag",tagType:"cue-out"},a[1]?o.data=a[1]:o.data="",s.trigger("data",o);return}if(a=/^#EXT-X-CUE-IN:?(.*)?$/.exec(u),a){o={type:"tag",tagType:"cue-in"},a[1]?o.data=a[1]:o.data="",s.trigger("data",o);return}if(a=/^#EXT-X-SKIP:(.*)$/.exec(u),a&&a[1]){o={type:"tag",tagType:"skip"},o.attributes=rl(a[1]),o.attributes.hasOwnProperty("SKIPPED-SEGMENTS")&&(o.attributes["SKIPPED-SEGMENTS"]=parseInt(o.attributes["SKIPPED-SEGMENTS"],10)),o.attributes.hasOwnProperty("RECENTLY-REMOVED-DATERANGES")&&(o.attributes["RECENTLY-REMOVED-DATERANGES"]=o.attributes["RECENTLY-REMOVED-DATERANGES"].split(Lce)),s.trigger("data",o);return}if(a=/^#EXT-X-PART:(.*)$/.exec(u),a&&a[1]){o={type:"tag",tagType:"part"},o.attributes=rl(a[1]),["DURATION"].forEach(function(y){o.attributes.hasOwnProperty(y)&&(o.attributes[y]=parseFloat(o.attributes[y]))}),["INDEPENDENT","GAP"].forEach(function(y){o.attributes.hasOwnProperty(y)&&(o.attributes[y]=/YES/.test(o.attributes[y]))}),o.attributes.hasOwnProperty("BYTERANGE")&&(o.attributes.byterange=u1(o.attributes.BYTERANGE)),s.trigger("data",o);return}if(a=/^#EXT-X-SERVER-CONTROL:(.*)$/.exec(u),a&&a[1]){o={type:"tag",tagType:"server-control"},o.attributes=rl(a[1]),["CAN-SKIP-UNTIL","PART-HOLD-BACK","HOLD-BACK"].forEach(function(y){o.attributes.hasOwnProperty(y)&&(o.attributes[y]=parseFloat(o.attributes[y]))}),["CAN-SKIP-DATERANGES","CAN-BLOCK-RELOAD"].forEach(function(y){o.attributes.hasOwnProperty(y)&&(o.attributes[y]=/YES/.test(o.attributes[y]))}),s.trigger("data",o);return}if(a=/^#EXT-X-PART-INF:(.*)$/.exec(u),a&&a[1]){o={type:"tag",tagType:"part-inf"},o.attributes=rl(a[1]),["PART-TARGET"].forEach(function(y){o.attributes.hasOwnProperty(y)&&(o.attributes[y]=parseFloat(o.attributes[y]))}),s.trigger("data",o);return}if(a=/^#EXT-X-PRELOAD-HINT:(.*)$/.exec(u),a&&a[1]){o={type:"tag",tagType:"preload-hint"},o.attributes=rl(a[1]),["BYTERANGE-START","BYTERANGE-LENGTH"].forEach(function(y){if(o.attributes.hasOwnProperty(y)){o.attributes[y]=parseInt(o.attributes[y],10);var _=y==="BYTERANGE-LENGTH"?"length":"offset";o.attributes.byterange=o.attributes.byterange||{},o.attributes.byterange[_]=o.attributes[y],delete o.attributes[y]}}),s.trigger("data",o);return}if(a=/^#EXT-X-RENDITION-REPORT:(.*)$/.exec(u),a&&a[1]){o={type:"tag",tagType:"rendition-report"},o.attributes=rl(a[1]),["LAST-MSN","LAST-PART"].forEach(function(y){o.attributes.hasOwnProperty(y)&&(o.attributes[y]=parseInt(o.attributes[y],10))}),s.trigger("data",o);return}s.trigger("data",{type:"tag",data:u.slice(4)})})}},t.addParser=function(n){var s=this,a=n.expression,o=n.customType,l=n.dataParser,u=n.segment;typeof l!="function"&&(l=function(h){return h}),this.customParsers.push(function(c){var h=a.exec(c);if(h)return s.trigger("data",{type:"custom",data:l(c),customType:o,segment:u}),!0})},t.addTagMapper=function(n){var s=n.expression,a=n.map,o=function(u){return s.test(u)?a(u):u};this.tagMappers.push(o)},e})(P2),Fce=function(e){return e.toLowerCase().replace(/-(\w)/g,function(t){return t[1].toUpperCase()})},mf=function(e){var t={};return Object.keys(e).forEach(function(r){t[Fce(r)]=e[r]}),t},c1=function(e){var t=e.serverControl,r=e.targetDuration,n=e.partTargetDuration;if(t){var s="#EXT-X-SERVER-CONTROL",a="holdBack",o="partHoldBack",l=r&&r*3,u=n&&n*2;r&&!t.hasOwnProperty(a)&&(t[a]=l,this.trigger("info",{message:s+" defaulting HOLD-BACK to targetDuration * 3 ("+l+")."})),l&&t[a]<l&&(this.trigger("warn",{message:s+" clamping HOLD-BACK ("+t[a]+") to targetDuration * 3 ("+l+")"}),t[a]=l),n&&!t.hasOwnProperty(o)&&(t[o]=n*3,this.trigger("info",{message:s+" defaulting PART-HOLD-BACK to partTargetDuration * 3 ("+t[o]+")."})),n&&t[o]<u&&(this.trigger("warn",{message:s+" clamping PART-HOLD-BACK ("+t[o]+") to partTargetDuration * 2 ("+u+")."}),t[o]=u)}},Bce=(function(i){Ft(e,i);function e(){var r;r=i.call(this)||this,r.lineStream=new Rce,r.parseStream=new Mce,r.lineStream.pipe(r.parseStream);var n=je(r),s=[],a={},o,l,u=!1,c=function(){},h={AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},m="urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed",g=0;r.manifest={allowCache:!0,discontinuityStarts:[],segments:[]};var y=0,_=0;return r.on("end",function(){a.uri||!a.parts&&!a.preloadHints||(!a.map&&o&&(a.map=o),!a.key&&l&&(a.key=l),!a.timeline&&typeof g=="number"&&(a.timeline=g),r.manifest.preloadSegment=a)}),r.parseStream.on("data",function(T){var E,w;({tag:function(){({version:function(){T.version&&(this.manifest.version=T.version)},"allow-cache":function(){this.manifest.allowCache=T.allowed,"allowed"in T||(this.trigger("info",{message:"defaulting allowCache to YES"}),this.manifest.allowCache=!0)},byterange:function(){var A={};"length"in T&&(a.byterange=A,A.length=T.length,"offset"in T||(T.offset=y)),"offset"in T&&(a.byterange=A,A.offset=T.offset),y=A.offset+A.length},endlist:function(){this.manifest.endList=!0},inf:function(){"mediaSequence"in this.manifest||(this.manifest.mediaSequence=0,this.trigger("info",{message:"defaulting media sequence to zero"})),"discontinuitySequence"in this.manifest||(this.manifest.discontinuitySequence=0,this.trigger("info",{message:"defaulting discontinuity sequence to zero"})),T.duration>0&&(a.duration=T.duration),T.duration===0&&(a.duration=.01,this.trigger("info",{message:"updating zero segment duration to a small value"})),this.manifest.segments=s},key:function(){if(!T.attributes){this.trigger("warn",{message:"ignoring key declaration without attribute list"});return}if(T.attributes.METHOD==="NONE"){l=null;return}if(!T.attributes.URI){this.trigger("warn",{message:"ignoring key declaration without URI"});return}if(T.attributes.KEYFORMAT==="com.apple.streamingkeydelivery"){this.manifest.contentProtection=this.manifest.contentProtection||{},this.manifest.contentProtection["com.apple.fps.1_0"]={attributes:T.attributes};return}if(T.attributes.KEYFORMAT==="com.microsoft.playready"){this.manifest.contentProtection=this.manifest.contentProtection||{},this.manifest.contentProtection["com.microsoft.playready"]={uri:T.attributes.URI};return}if(T.attributes.KEYFORMAT===m){var A=["SAMPLE-AES","SAMPLE-AES-CTR","SAMPLE-AES-CENC"];if(A.indexOf(T.attributes.METHOD)===-1){this.trigger("warn",{message:"invalid key method provided for Widevine"});return}if(T.attributes.METHOD==="SAMPLE-AES-CENC"&&this.trigger("warn",{message:"SAMPLE-AES-CENC is deprecated, please use SAMPLE-AES-CTR instead"}),T.attributes.URI.substring(0,23)!=="data:text/plain;base64,"){this.trigger("warn",{message:"invalid key URI provided for Widevine"});return}if(!(T.attributes.KEYID&&T.attributes.KEYID.substring(0,2)==="0x")){this.trigger("warn",{message:"invalid key ID provided for Widevine"});return}this.manifest.contentProtection=this.manifest.contentProtection||{},this.manifest.contentProtection["com.widevine.alpha"]={attributes:{schemeIdUri:T.attributes.KEYFORMAT,keyId:T.attributes.KEYID.substring(2)},pssh:b6(T.attributes.URI.split(",")[1])};return}T.attributes.METHOD||this.trigger("warn",{message:"defaulting key method to AES-128"}),l={method:T.attributes.METHOD||"AES-128",uri:T.attributes.URI},typeof T.attributes.IV<"u"&&(l.iv=T.attributes.IV)},"media-sequence":function(){if(!isFinite(T.number)){this.trigger("warn",{message:"ignoring invalid media sequence: "+T.number});return}this.manifest.mediaSequence=T.number},"discontinuity-sequence":function(){if(!isFinite(T.number)){this.trigger("warn",{message:"ignoring invalid discontinuity sequence: "+T.number});return}this.manifest.discontinuitySequence=T.number,g=T.number},"playlist-type":function(){if(!/VOD|EVENT/.test(T.playlistType)){this.trigger("warn",{message:"ignoring unknown playlist type: "+T.playlist});return}this.manifest.playlistType=T.playlistType},map:function(){o={},T.uri&&(o.uri=T.uri),T.byterange&&(o.byterange=T.byterange),l&&(o.key=l)},"stream-inf":function(){if(this.manifest.playlists=s,this.manifest.mediaGroups=this.manifest.mediaGroups||h,!T.attributes){this.trigger("warn",{message:"ignoring empty stream-inf attributes"});return}a.attributes||(a.attributes={}),Jt(a.attributes,T.attributes)},media:function(){if(this.manifest.mediaGroups=this.manifest.mediaGroups||h,!(T.attributes&&T.attributes.TYPE&&T.attributes["GROUP-ID"]&&T.attributes.NAME)){this.trigger("warn",{message:"ignoring incomplete or missing media group"});return}var A=this.manifest.mediaGroups[T.attributes.TYPE];A[T.attributes["GROUP-ID"]]=A[T.attributes["GROUP-ID"]]||{},E=A[T.attributes["GROUP-ID"]],w={default:/yes/i.test(T.attributes.DEFAULT)},w.default?w.autoselect=!0:w.autoselect=/yes/i.test(T.attributes.AUTOSELECT),T.attributes.LANGUAGE&&(w.language=T.attributes.LANGUAGE),T.attributes.URI&&(w.uri=T.attributes.URI),T.attributes["INSTREAM-ID"]&&(w.instreamId=T.attributes["INSTREAM-ID"]),T.attributes.CHARACTERISTICS&&(w.characteristics=T.attributes.CHARACTERISTICS),T.attributes.FORCED&&(w.forced=/yes/i.test(T.attributes.FORCED)),E[T.attributes.NAME]=w},discontinuity:function(){g+=1,a.discontinuity=!0,this.manifest.discontinuityStarts.push(s.length)},"program-date-time":function(){typeof this.manifest.dateTimeString>"u"&&(this.manifest.dateTimeString=T.dateTimeString,this.manifest.dateTimeObject=T.dateTimeObject),a.dateTimeString=T.dateTimeString,a.dateTimeObject=T.dateTimeObject},targetduration:function(){if(!isFinite(T.duration)||T.duration<0){this.trigger("warn",{message:"ignoring invalid target duration: "+T.duration});return}this.manifest.targetDuration=T.duration,c1.call(this,this.manifest)},start:function(){if(!T.attributes||isNaN(T.attributes["TIME-OFFSET"])){this.trigger("warn",{message:"ignoring start declaration without appropriate attribute list"});return}this.manifest.start={timeOffset:T.attributes["TIME-OFFSET"],precise:T.attributes.PRECISE}},"cue-out":function(){a.cueOut=T.data},"cue-out-cont":function(){a.cueOutCont=T.data},"cue-in":function(){a.cueIn=T.data},skip:function(){this.manifest.skip=mf(T.attributes),this.warnOnMissingAttributes_("#EXT-X-SKIP",T.attributes,["SKIPPED-SEGMENTS"])},part:function(){var A=this;u=!0;var L=this.manifest.segments.length,F=mf(T.attributes);a.parts=a.parts||[],a.parts.push(F),F.byterange&&(F.byterange.hasOwnProperty("offset")||(F.byterange.offset=_),_=F.byterange.offset+F.byterange.length);var B=a.parts.length-1;this.warnOnMissingAttributes_("#EXT-X-PART #"+B+" for segment #"+L,T.attributes,["URI","DURATION"]),this.manifest.renditionReports&&this.manifest.renditionReports.forEach(function(M,k){M.hasOwnProperty("lastPart")||A.trigger("warn",{message:"#EXT-X-RENDITION-REPORT #"+k+" lacks required attribute(s): LAST-PART"})})},"server-control":function(){var A=this.manifest.serverControl=mf(T.attributes);A.hasOwnProperty("canBlockReload")||(A.canBlockReload=!1,this.trigger("info",{message:"#EXT-X-SERVER-CONTROL defaulting CAN-BLOCK-RELOAD to false"})),c1.call(this,this.manifest),A.canSkipDateranges&&!A.hasOwnProperty("canSkipUntil")&&this.trigger("warn",{message:"#EXT-X-SERVER-CONTROL lacks required attribute CAN-SKIP-UNTIL which is required when CAN-SKIP-DATERANGES is set"})},"preload-hint":function(){var A=this.manifest.segments.length,L=mf(T.attributes),F=L.type&&L.type==="PART";a.preloadHints=a.preloadHints||[],a.preloadHints.push(L),L.byterange&&(L.byterange.hasOwnProperty("offset")||(L.byterange.offset=F?_:0,F&&(_=L.byterange.offset+L.byterange.length)));var B=a.preloadHints.length-1;if(this.warnOnMissingAttributes_("#EXT-X-PRELOAD-HINT #"+B+" for segment #"+A,T.attributes,["TYPE","URI"]),!!L.type)for(var M=0;M<a.preloadHints.length-1;M++){var k=a.preloadHints[M];k.type&&k.type===L.type&&this.trigger("warn",{message:"#EXT-X-PRELOAD-HINT #"+B+" for segment #"+A+" has the same TYPE "+L.type+" as preload hint #"+M})}},"rendition-report":function(){var A=mf(T.attributes);this.manifest.renditionReports=this.manifest.renditionReports||[],this.manifest.renditionReports.push(A);var L=this.manifest.renditionReports.length-1,F=["LAST-MSN","URI"];u&&F.push("LAST-PART"),this.warnOnMissingAttributes_("#EXT-X-RENDITION-REPORT #"+L,T.attributes,F)},"part-inf":function(){this.manifest.partInf=mf(T.attributes),this.warnOnMissingAttributes_("#EXT-X-PART-INF",T.attributes,["PART-TARGET"]),this.manifest.partInf.partTarget&&(this.manifest.partTargetDuration=this.manifest.partInf.partTarget),c1.call(this,this.manifest)}}[T.tagType]||c).call(n)},uri:function(){a.uri=T.uri,s.push(a),this.manifest.targetDuration&&!("duration"in a)&&(this.trigger("warn",{message:"defaulting segment duration to the target duration"}),a.duration=this.manifest.targetDuration),l&&(a.key=l),a.timeline=g,o&&(a.map=o),_=0,a={}},comment:function(){},custom:function(){T.segment?(a.custom=a.custom||{},a.custom[T.customType]=T.data):(this.manifest.custom=this.manifest.custom||{},this.manifest.custom[T.customType]=T.data)}})[T.type].call(n)}),r}var t=e.prototype;return t.warnOnMissingAttributes_=function(n,s,a){var o=[];a.forEach(function(l){s.hasOwnProperty(l)||o.push(l)}),o.length&&this.trigger("warn",{message:n+" lacks required attribute(s): "+o.join(", ")})},t.push=function(n){this.lineStream.push(n)},t.end=function(){this.lineStream.push(`
`),this.trigger("end")},t.addParser=function(n){this.parseStream.addParser(n)},t.addTagMapper=function(n){this.parseStream.addTagMapper(n)},e})(P2),_h={mp4:/^(av0?1|avc0?[1234]|vp0?9|flac|opus|mp3|mp4a|mp4v|stpp.ttml.im1t)/,webm:/^(vp0?[89]|av0?1|opus|vorbis)/,ogg:/^(vp0?[89]|theora|flac|opus|vorbis)/,video:/^(av0?1|avc0?[1234]|vp0?[89]|hvc1|hev1|theora|mp4v)/,audio:/^(mp4a|flac|vorbis|opus|ac-[34]|ec-3|alac|mp3|speex|aac)/,text:/^(stpp.ttml.im1t)/,muxerVideo:/^(avc0?1)/,muxerAudio:/^(mp4a)/,muxerText:/a^/},Nce=["video","audio","text"],u4=["Video","Audio","Text"],S6=function(e){return e&&e.replace(/avc1\.(\d+)\.(\d+)/i,function(t,r,n){var s=("00"+Number(r).toString(16)).slice(-2),a=("00"+Number(n).toString(16)).slice(-2);return"avc1."+s+"00"+a})},Hl=function(e){e===void 0&&(e="");var t=e.split(","),r=[];return t.forEach(function(n){n=n.trim();var s;Nce.forEach(function(a){var o=_h[a].exec(n.toLowerCase());if(!(!o||o.length<=1)){s=a;var l=n.substring(0,o[1].length),u=n.replace(l,"");r.push({type:l,details:u,mediaType:a})}}),s||r.push({type:n,details:"",mediaType:"unknown"})}),r},Uce=function(e,t){if(!e.mediaGroups.AUDIO||!t)return null;var r=e.mediaGroups.AUDIO[t];if(!r)return null;for(var n in r){var s=r[n];if(s.default&&s.playlists)return Hl(s.playlists[0].attributes.CODECS)}return null},C6=function(e){return e===void 0&&(e=""),_h.audio.test(e.trim().toLowerCase())},$ce=function(e){return e===void 0&&(e=""),_h.text.test(e.trim().toLowerCase())},R0=function(e){if(!(!e||typeof e!="string")){var t=e.toLowerCase().split(",").map(function(s){return S6(s.trim())}),r="video";t.length===1&&C6(t[0])?r="audio":t.length===1&&$ce(t[0])&&(r="application");var n="mp4";return t.every(function(s){return _h.mp4.test(s)})?n="mp4":t.every(function(s){return _h.webm.test(s)})?n="webm":t.every(function(s){return _h.ogg.test(s)})&&(n="ogg"),r+"/"+n+';codecs="'+e+'"'}},Uy=function(e){return e===void 0&&(e=""),X.MediaSource&&X.MediaSource.isTypeSupported&&X.MediaSource.isTypeSupported(R0(e))||!1},d1=function(e){return e===void 0&&(e=""),e.toLowerCase().split(",").every(function(t){t=t.trim();for(var r=0;r<u4.length;r++){var n=u4[r];if(_h["muxer"+n].test(t))return!0}return!1})},c4="mp4a.40.2",jce="avc1.4d400d",zce=/^(audio|video|application)\/(x-|vnd\.apple\.)?mpegurl/i,Hce=/^application\/dash\+xml/i,E6=function(e){return zce.test(e)?"hls":Hce.test(e)?"dash":e==="application/vnd.videojs.vhs+json"?"vhs-json":null},Vce=function(e){return e.toString(2).length},qce=function(e){return Math.ceil(Vce(e)/8)},w6=function(e){return ArrayBuffer.isView==="function"?ArrayBuffer.isView(e):e&&e.buffer instanceof ArrayBuffer},Wce=function(e){return w6(e)},pr=function(e){return e instanceof Uint8Array?e:(!Array.isArray(e)&&!Wce(e)&&!(e instanceof ArrayBuffer)&&(typeof e!="number"||typeof e=="number"&&e!==e?e=0:e=[e]),new Uint8Array(e&&e.buffer||e,e&&e.byteOffset||0,e&&e.byteLength||0))},us=X.BigInt||Number,nE=[us("0x1"),us("0x100"),us("0x10000"),us("0x1000000"),us("0x100000000"),us("0x10000000000"),us("0x1000000000000"),us("0x100000000000000"),us("0x10000000000000000")];(function(){var i=new Uint16Array([65484]),e=new Uint8Array(i.buffer,i.byteOffset,i.byteLength);return e[0]===255?"big":e[0]===204?"little":"unknown"})();var Gce=function(e,t){var r=t===void 0?{}:t,n=r.signed,s=n===void 0?!1:n,a=r.le,o=a===void 0?!1:a;e=pr(e);var l=o?"reduce":"reduceRight",u=e[l]?e[l]:Array.prototype[l],c=u.call(e,function(m,g,y){var _=o?y:Math.abs(y+1-e.length);return m+us(g)*nE[_]},us(0));if(s){var h=nE[e.length]/us(2)-us(1);c=us(c),c>h&&(c-=h,c-=h,c-=us(2))}return Number(c)},Kce=function(e,t){var r={},n=r.le,s=n===void 0?!1:n;(typeof e!="bigint"&&typeof e!="number"||typeof e=="number"&&e!==e)&&(e=0),e=us(e);for(var a=qce(e),o=new Uint8Array(new ArrayBuffer(a)),l=0;l<a;l++){var u=s?l:Math.abs(l+1-o.length);o[u]=Number(e/nE[l]&us(255)),e<0&&(o[u]=Math.abs(~o[u]),o[u]-=l===0?1:2)}return o},k6=function(e,t){if(typeof e!="string"&&e&&typeof e.toString=="function"&&(e=e.toString()),typeof e!="string")return new Uint8Array;t||(e=unescape(encodeURIComponent(e)));for(var r=new Uint8Array(e.length),n=0;n<e.length;n++)r[n]=e.charCodeAt(n);return r},Xce=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];if(t=t.filter(function(o){return o&&(o.byteLength||o.length)&&typeof o!="string"}),t.length<=1)return pr(t[0]);var n=t.reduce(function(o,l,u){return o+(l.byteLength||l.length)},0),s=new Uint8Array(n),a=0;return t.forEach(function(o){o=pr(o),s.set(o,a),a+=o.byteLength}),s},Vi=function(e,t,r){var n=r===void 0?{}:r,s=n.offset,a=s===void 0?0:s,o=n.mask,l=o===void 0?[]:o;e=pr(e),t=pr(t);var u=t.every?t.every:Array.prototype.every;return t.length&&e.length-a>=t.length&&u.call(t,function(c,h){var m=l[h]?l[h]&e[a+h]:e[a+h];return c===m})},Yce=function(e,t,r){t.forEach(function(n){for(var s in e.mediaGroups[n])for(var a in e.mediaGroups[n][s]){var o=e.mediaGroups[n][s][a];r(o,n,s,a)}})};/*! @name mpd-parser @version 0.22.1 @license Apache-2.0 */var d4=function(e){return!!e&&typeof e=="object"},Qs=function i(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.reduce(function(n,s){return typeof s!="object"||Object.keys(s).forEach(function(a){Array.isArray(n[a])&&Array.isArray(s[a])?n[a]=n[a].concat(s[a]):d4(n[a])&&d4(s[a])?n[a]=i(n[a],s[a]):n[a]=s[a]}),n},{})},A6=function(e){return Object.keys(e).map(function(t){return e[t]})},Qce=function(e,t){for(var r=[],n=e;n<t;n++)r.push(n);return r},vT=function(e){return e.reduce(function(t,r){return t.concat(r)},[])},I6=function(e){if(!e.length)return[];for(var t=[],r=0;r<e.length;r++)t.push(e[r]);return t},Jce=function(e,t){return e.reduce(function(r,n,s){return n[t]&&r.push(s),r},[])},sE=function(e,t){for(var r=0;r<e.length;r++)if(t(e[r]))return r;return-1},Zce=function(e,t){return A6(e.reduce(function(r,n){return n.forEach(function(s){r[t(s)]=s}),r},{}))},vp={INVALID_NUMBER_OF_PERIOD:"INVALID_NUMBER_OF_PERIOD",DASH_EMPTY_MANIFEST:"DASH_EMPTY_MANIFEST",DASH_INVALID_XML:"DASH_INVALID_XML",NO_BASE_URL:"NO_BASE_URL",SEGMENT_TIME_UNSPECIFIED:"SEGMENT_TIME_UNSPECIFIED",UNSUPPORTED_UTC_TIMING_SCHEME:"UNSUPPORTED_UTC_TIMING_SCHEME"},L0=function(e){var t=e.baseUrl,r=t===void 0?"":t,n=e.source,s=n===void 0?"":n,a=e.range,o=a===void 0?"":a,l=e.indexRange,u=l===void 0?"":l,c={uri:s,resolvedUri:gT(r||"",s)};if(o||u){var h=o||u,m=h.split("-"),g=X.BigInt?X.BigInt(m[0]):parseInt(m[0],10),y=X.BigInt?X.BigInt(m[1]):parseInt(m[1],10);g<Number.MAX_SAFE_INTEGER&&typeof g=="bigint"&&(g=Number(g)),y<Number.MAX_SAFE_INTEGER&&typeof y=="bigint"&&(y=Number(y));var _;typeof y=="bigint"||typeof g=="bigint"?_=X.BigInt(y)-X.BigInt(g)+X.BigInt(1):_=y-g+1,typeof _=="bigint"&&_<Number.MAX_SAFE_INTEGER&&(_=Number(_)),c.byterange={length:_,offset:g}}return c},ede=function(e){var t;return typeof e.offset=="bigint"||typeof e.length=="bigint"?t=X.BigInt(e.offset)+X.BigInt(e.length)-X.BigInt(1):t=e.offset+e.length-1,e.offset+"-"+t},h4=function(e){return e&&typeof e!="number"&&(e=parseInt(e,10)),isNaN(e)?null:e},tde={static:function(e){var t=e.duration,r=e.timescale,n=r===void 0?1:r,s=e.sourceDuration,a=e.periodDuration,o=h4(e.endNumber),l=t/n;return typeof o=="number"?{start:0,end:o}:typeof a=="number"?{start:0,end:a/l}:{start:0,end:s/l}},dynamic:function(e){var t=e.NOW,r=e.clientOffset,n=e.availabilityStartTime,s=e.timescale,a=s===void 0?1:s,o=e.duration,l=e.periodStart,u=l===void 0?0:l,c=e.minimumUpdatePeriod,h=c===void 0?0:c,m=e.timeShiftBufferDepth,g=m===void 0?1/0:m,y=h4(e.endNumber),_=(t+r)/1e3,T=n+u,E=_+h,w=E-T,D=Math.ceil(w*a/o),R=Math.floor((_-T-g)*a/o),A=Math.floor((_-T)*a/o);return{start:Math.max(0,R),end:typeof y=="number"?y:Math.min(D,A)}}},rde=function(e){return function(t){var r=e.duration,n=e.timescale,s=n===void 0?1:n,a=e.periodStart,o=e.startNumber,l=o===void 0?1:o;return{number:l+t,duration:r/s,timeline:a,time:t*r}}},R2=function(e){var t=e.type,r=e.duration,n=e.timescale,s=n===void 0?1:n,a=e.periodDuration,o=e.sourceDuration,l=tde[t](e),u=l.start,c=l.end,h=Qce(u,c).map(rde(e));if(t==="static"){var m=h.length-1,g=typeof a=="number"?a:o;h[m].duration=g-r/s*m}return h},D6=function(e){var t=e.baseUrl,r=e.initialization,n=r===void 0?{}:r,s=e.sourceDuration,a=e.indexRange,o=a===void 0?"":a,l=e.periodStart,u=e.presentationTime,c=e.number,h=c===void 0?0:c,m=e.duration;if(!t)throw new Error(vp.NO_BASE_URL);var g=L0({baseUrl:t,source:n.sourceURL,range:n.range}),y=L0({baseUrl:t,source:t,indexRange:o});if(y.map=g,m){var _=R2(e);_.length&&(y.duration=_[0].duration,y.timeline=_[0].timeline)}else s&&(y.duration=s,y.timeline=l);return y.presentationTime=u||l,y.number=h,[y]},L2=function(e,t,r){var n=e.sidx.map?e.sidx.map:null,s=e.sidx.duration,a=e.timeline||0,o=e.sidx.byterange,l=o.offset+o.length,u=t.timescale,c=t.references.filter(function(M){return M.referenceType!==1}),h=[],m=e.endList?"static":"dynamic",g=e.sidx.timeline,y=g,_=e.mediaSequence||0,T;typeof t.firstOffset=="bigint"?T=X.BigInt(l)+t.firstOffset:T=l+t.firstOffset;for(var E=0;E<c.length;E++){var w=t.references[E],D=w.referencedSize,R=w.subsegmentDuration,A=void 0;typeof T=="bigint"?A=T+X.BigInt(D)-X.BigInt(1):A=T+D-1;var L=T+"-"+A,F={baseUrl:r,timescale:u,timeline:a,periodStart:g,presentationTime:y,number:_,duration:R,sourceDuration:s,indexRange:L,type:m},B=D6(F)[0];n&&(B.map=n),h.push(B),typeof T=="bigint"?T+=X.BigInt(D):T+=D,y+=R/u,_++}return e.segments=h,e},ide=["AUDIO","SUBTITLES"],nde=1/60,P6=function(e){return Zce(e,function(t){var r=t.timeline;return r}).sort(function(t,r){return t.timeline>r.timeline?1:-1})},sde=function(e,t){for(var r=0;r<e.length;r++)if(e[r].attributes.NAME===t)return e[r];return null},f4=function(e){var t=[];return Yce(e,ide,function(r,n,s,a){t=t.concat(r.playlists||[])}),t},p4=function(e){var t=e.playlist,r=e.mediaSequence;t.mediaSequence=r,t.segments.forEach(function(n,s){n.number=t.mediaSequence+s})},ade=function(e){var t=e.oldPlaylists,r=e.newPlaylists,n=e.timelineStarts;r.forEach(function(s){s.discontinuitySequence=sE(n,function(c){var h=c.timeline;return h===s.timeline});var a=sde(t,s.attributes.NAME);if(a&&!s.sidx){var o=s.segments[0],l=sE(a.segments,function(c){return Math.abs(c.presentationTime-o.presentationTime)<nde});if(l===-1){p4({playlist:s,mediaSequence:a.mediaSequence+a.segments.length}),s.segments[0].discontinuity=!0,s.discontinuityStarts.unshift(0),(!a.segments.length&&s.timeline>a.timeline||a.segments.length&&s.timeline>a.segments[a.segments.length-1].timeline)&&s.discontinuitySequence--;return}var u=a.segments[l];u.discontinuity&&!o.discontinuity&&(o.discontinuity=!0,s.discontinuityStarts.unshift(0),s.discontinuitySequence--),p4({playlist:s,mediaSequence:a.segments[l].number})}})},ode=function(e){var t=e.oldManifest,r=e.newManifest,n=t.playlists.concat(f4(t)),s=r.playlists.concat(f4(r));return r.timelineStarts=P6([t.timelineStarts,r.timelineStarts]),ade({oldPlaylists:n,newPlaylists:s,timelineStarts:r.timelineStarts}),r},yT=function(e){return e&&e.uri+"-"+ede(e.byterange)},h1=function(e){var t=A6(e.reduce(function(r,n){var s=n.attributes.id+(n.attributes.lang||"");if(!r[s])r[s]=n,r[s].attributes.timelineStarts=[];else{if(n.segments){var a;n.segments[0]&&(n.segments[0].discontinuity=!0),(a=r[s].segments).push.apply(a,n.segments)}n.attributes.contentProtection&&(r[s].attributes.contentProtection=n.attributes.contentProtection)}return r[s].attributes.timelineStarts.push({start:n.attributes.periodStart,timeline:n.attributes.periodStart}),r},{}));return t.map(function(r){return r.discontinuityStarts=Jce(r.segments||[],"discontinuity"),r})},O2=function(e,t){var r=yT(e.sidx),n=r&&t[r]&&t[r].sidx;return n&&L2(e,n,e.sidx.resolvedUri),e},lde=function(e,t){if(t===void 0&&(t={}),!Object.keys(t).length)return e;for(var r in e)e[r]=O2(e[r],t);return e},ude=function(e,t){var r,n=e.attributes,s=e.segments,a=e.sidx,o=e.mediaSequence,l=e.discontinuitySequence,u=e.discontinuityStarts,c={attributes:(r={NAME:n.id,BANDWIDTH:n.bandwidth,CODECS:n.codecs},r["PROGRAM-ID"]=1,r),uri:"",endList:n.type==="static",timeline:n.periodStart,resolvedUri:"",targetDuration:n.duration,discontinuitySequence:l,discontinuityStarts:u,timelineStarts:n.timelineStarts,mediaSequence:o,segments:s};return n.contentProtection&&(c.contentProtection=n.contentProtection),a&&(c.sidx=a),t&&(c.attributes.AUDIO="audio",c.attributes.SUBTITLES="subs"),c},cde=function(e){var t,r=e.attributes,n=e.segments,s=e.mediaSequence,a=e.discontinuityStarts,o=e.discontinuitySequence;typeof n>"u"&&(n=[{uri:r.baseUrl,timeline:r.periodStart,resolvedUri:r.baseUrl||"",duration:r.sourceDuration,number:0}],r.duration=r.sourceDuration);var l=(t={NAME:r.id,BANDWIDTH:r.bandwidth},t["PROGRAM-ID"]=1,t);return r.codecs&&(l.CODECS=r.codecs),{attributes:l,uri:"",endList:r.type==="static",timeline:r.periodStart,resolvedUri:r.baseUrl||"",targetDuration:r.duration,timelineStarts:r.timelineStarts,discontinuityStarts:a,discontinuitySequence:o,mediaSequence:s,segments:n}},dde=function(e,t,r){t===void 0&&(t={}),r===void 0&&(r=!1);var n,s=e.reduce(function(o,l){var u=l.attributes.role&&l.attributes.role.value||"",c=l.attributes.lang||"",h=l.attributes.label||"main";if(c&&!l.attributes.label){var m=u?" ("+u+")":"";h=""+l.attributes.lang+m}o[h]||(o[h]={language:c,autoselect:!0,default:u==="main",playlists:[],uri:""});var g=O2(ude(l,r),t);return o[h].playlists.push(g),typeof n>"u"&&u==="main"&&(n=l,n.default=!0),o},{});if(!n){var a=Object.keys(s)[0];s[a].default=!0}return s},hde=function(e,t){return t===void 0&&(t={}),e.reduce(function(r,n){var s=n.attributes.lang||"text";return r[s]||(r[s]={language:s,default:!1,autoselect:!1,playlists:[],uri:""}),r[s].playlists.push(O2(cde(n),t)),r},{})},fde=function(e){return e.reduce(function(t,r){return r&&r.forEach(function(n){var s=n.channel,a=n.language;t[a]={autoselect:!1,default:!1,instreamId:s,language:a},n.hasOwnProperty("aspectRatio")&&(t[a].aspectRatio=n.aspectRatio),n.hasOwnProperty("easyReader")&&(t[a].easyReader=n.easyReader),n.hasOwnProperty("3D")&&(t[a]["3D"]=n["3D"])}),t},{})},pde=function(e){var t,r=e.attributes,n=e.segments,s=e.sidx,a=e.discontinuityStarts,o={attributes:(t={NAME:r.id,AUDIO:"audio",SUBTITLES:"subs",RESOLUTION:{width:r.width,height:r.height},CODECS:r.codecs,BANDWIDTH:r.bandwidth},t["PROGRAM-ID"]=1,t),uri:"",endList:r.type==="static",timeline:r.periodStart,resolvedUri:"",targetDuration:r.duration,discontinuityStarts:a,timelineStarts:r.timelineStarts,segments:n};return r.frameRate&&(o.attributes["FRAME-RATE"]=r.frameRate),r.contentProtection&&(o.contentProtection=r.contentProtection),s&&(o.sidx=s),o},mde=function(e){var t=e.attributes;return t.mimeType==="video/mp4"||t.mimeType==="video/webm"||t.contentType==="video"},gde=function(e){var t=e.attributes;return t.mimeType==="audio/mp4"||t.mimeType==="audio/webm"||t.contentType==="audio"},vde=function(e){var t=e.attributes;return t.mimeType==="text/vtt"||t.contentType==="text"},yde=function(e,t){e.forEach(function(r){r.mediaSequence=0,r.discontinuitySequence=sE(t,function(n){var s=n.timeline;return s===r.timeline}),r.segments&&r.segments.forEach(function(n,s){n.number=s})})},m4=function(e){return e?Object.keys(e).reduce(function(t,r){var n=e[r];return t.concat(n.playlists)},[]):[]},_de=function(e){var t,r=e.dashPlaylists,n=e.locations,s=e.sidxMapping,a=s===void 0?{}:s,o=e.previousManifest;if(!r.length)return{};var l=r[0].attributes,u=l.sourceDuration,c=l.type,h=l.suggestedPresentationDelay,m=l.minimumUpdatePeriod,g=h1(r.filter(mde)).map(pde),y=h1(r.filter(gde)),_=h1(r.filter(vde)),T=r.map(function(F){return F.attributes.captionServices}).filter(Boolean),E={allowCache:!0,discontinuityStarts:[],segments:[],endList:!0,mediaGroups:(t={AUDIO:{},VIDEO:{}},t["CLOSED-CAPTIONS"]={},t.SUBTITLES={},t),uri:"",duration:u,playlists:lde(g,a)};m>=0&&(E.minimumUpdatePeriod=m*1e3),n&&(E.locations=n),c==="dynamic"&&(E.suggestedPresentationDelay=h);var w=E.playlists.length===0,D=y.length?dde(y,a,w):null,R=_.length?hde(_,a):null,A=g.concat(m4(D),m4(R)),L=A.map(function(F){var B=F.timelineStarts;return B});return E.timelineStarts=P6(L),yde(A,E.timelineStarts),D&&(E.mediaGroups.AUDIO.audio=D),R&&(E.mediaGroups.SUBTITLES.subs=R),T.length&&(E.mediaGroups["CLOSED-CAPTIONS"].cc=fde(T)),o?ode({oldManifest:o,newManifest:E}):E},xde=function(e,t,r){var n=e.NOW,s=e.clientOffset,a=e.availabilityStartTime,o=e.timescale,l=o===void 0?1:o,u=e.periodStart,c=u===void 0?0:u,h=e.minimumUpdatePeriod,m=h===void 0?0:h,g=(n+s)/1e3,y=a+c,_=g+m,T=_-y;return Math.ceil((T*l-t)/r)},R6=function(e,t){for(var r=e.type,n=e.minimumUpdatePeriod,s=n===void 0?0:n,a=e.media,o=a===void 0?"":a,l=e.sourceDuration,u=e.timescale,c=u===void 0?1:u,h=e.startNumber,m=h===void 0?1:h,g=e.periodStart,y=[],_=-1,T=0;T<t.length;T++){var E=t[T],w=E.d,D=E.r||0,R=E.t||0;_<0&&(_=R),R&&R>_&&(_=R);var A=void 0;if(D<0){var L=T+1;L===t.length?r==="dynamic"&&s>0&&o.indexOf("$Number$")>0?A=xde(e,_,w):A=(l*c-_)/w:A=(t[L].t-_)/w}else A=D+1;for(var F=m+y.length+A,B=m+y.length;B<F;)y.push({number:B,duration:w/c,time:_,timeline:g}),_+=w,B++}return y},Tde=/\$([A-z]*)(?:(%0)([0-9]+)d)?\$/g,bde=function(e){return function(t,r,n,s){if(t==="$$")return"$";if(typeof e[r]>"u")return t;var a=""+e[r];return r==="RepresentationID"||(n?s=parseInt(s,10):s=1,a.length>=s)?a:""+new Array(s-a.length+1).join("0")+a}},g4=function(e,t){return e.replace(Tde,bde(t))},Sde=function(e,t){return!e.duration&&!t?[{number:e.startNumber||1,duration:e.sourceDuration,time:0,timeline:e.periodStart}]:e.duration?R2(e):R6(e,t)},Cde=function(e,t){var r={RepresentationID:e.id,Bandwidth:e.bandwidth||0},n=e.initialization,s=n===void 0?{sourceURL:"",range:""}:n,a=L0({baseUrl:e.baseUrl,source:g4(s.sourceURL,r),range:s.range}),o=Sde(e,t);return o.map(function(l){r.Number=l.number,r.Time=l.time;var u=g4(e.media||"",r),c=e.timescale||1,h=e.presentationTimeOffset||0,m=e.periodStart+(l.time-h)/c,g={uri:u,timeline:l.timeline,duration:l.duration,resolvedUri:gT(e.baseUrl||"",u),map:a,number:l.number,presentationTime:m};return g})},Ede=function(e,t){var r=e.baseUrl,n=e.initialization,s=n===void 0?{}:n,a=L0({baseUrl:r,source:s.sourceURL,range:s.range}),o=L0({baseUrl:r,source:t.media,range:t.mediaRange});return o.map=a,o},wde=function(e,t){var r=e.duration,n=e.segmentUrls,s=n===void 0?[]:n,a=e.periodStart;if(!r&&!t||r&&t)throw new Error(vp.SEGMENT_TIME_UNSPECIFIED);var o=s.map(function(c){return Ede(e,c)}),l;r&&(l=R2(e)),t&&(l=R6(e,t));var u=l.map(function(c,h){if(o[h]){var m=o[h],g=e.timescale||1,y=e.presentationTimeOffset||0;return m.timeline=c.timeline,m.duration=c.duration,m.number=c.number,m.presentationTime=a+(c.time-y)/g,m}}).filter(function(c){return c});return u},kde=function(e){var t=e.attributes,r=e.segmentInfo,n,s;r.template?(s=Cde,n=Qs(t,r.template)):r.base?(s=D6,n=Qs(t,r.base)):r.list&&(s=wde,n=Qs(t,r.list));var a={attributes:t};if(!s)return a;var o=s(n,r.segmentTimeline);if(n.duration){var l=n,u=l.duration,c=l.timescale,h=c===void 0?1:c;n.duration=u/h}else o.length?n.duration=o.reduce(function(m,g){return Math.max(m,Math.ceil(g.duration))},0):n.duration=0;return a.attributes=n,a.segments=o,r.base&&n.indexRange&&(a.sidx=o[0],a.segments=[]),a},Ade=function(e){return e.map(kde)},hn=function(e,t){return I6(e.childNodes).filter(function(r){var n=r.tagName;return n===t})},M2=function(e){return e.textContent.trim()},Ide=function(e){return parseFloat(e.split("/").reduce(function(t,r){return t/r}))},gf=function(e){var t=31536e3,r=720*60*60,n=1440*60,s=3600,a=60,o=/P(?:(\d*)Y)?(?:(\d*)M)?(?:(\d*)D)?(?:T(?:(\d*)H)?(?:(\d*)M)?(?:([\d.]*)S)?)?/,l=o.exec(e);if(!l)return 0;var u=l.slice(1),c=u[0],h=u[1],m=u[2],g=u[3],y=u[4],_=u[5];return parseFloat(c||0)*t+parseFloat(h||0)*r+parseFloat(m||0)*n+parseFloat(g||0)*s+parseFloat(y||0)*a+parseFloat(_||0)},Dde=function(e){var t=/^\d+-\d+-\d+T\d+:\d+:\d+(\.\d+)?$/;return t.test(e)&&(e+="Z"),Date.parse(e)},v4={mediaPresentationDuration:function(e){return gf(e)},availabilityStartTime:function(e){return Dde(e)/1e3},minimumUpdatePeriod:function(e){return gf(e)},suggestedPresentationDelay:function(e){return gf(e)},type:function(e){return e},timeShiftBufferDepth:function(e){return gf(e)},start:function(e){return gf(e)},width:function(e){return parseInt(e,10)},height:function(e){return parseInt(e,10)},bandwidth:function(e){return parseInt(e,10)},frameRate:function(e){return Ide(e)},startNumber:function(e){return parseInt(e,10)},timescale:function(e){return parseInt(e,10)},presentationTimeOffset:function(e){return parseInt(e,10)},duration:function(e){var t=parseInt(e,10);return isNaN(t)?gf(e):t},d:function(e){return parseInt(e,10)},t:function(e){return parseInt(e,10)},r:function(e){return parseInt(e,10)},DEFAULT:function(e){return e}},Ps=function(e){return e&&e.attributes?I6(e.attributes).reduce(function(t,r){var n=v4[r.name]||v4.DEFAULT;return t[r.name]=n(r.value),t},{}):{}},Pde={"urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b":"org.w3.clearkey","urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":"com.widevine.alpha","urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95":"com.microsoft.playready","urn:uuid:f239e769-efa3-4850-9c16-a903c6932efb":"com.adobe.primetime"},_T=function(e,t){return t.length?vT(e.map(function(r){return t.map(function(n){return gT(r,M2(n))})})):e},F2=function(e){var t=hn(e,"SegmentTemplate")[0],r=hn(e,"SegmentList")[0],n=r&&hn(r,"SegmentURL").map(function(m){return Qs({tag:"SegmentURL"},Ps(m))}),s=hn(e,"SegmentBase")[0],a=r||t,o=a&&hn(a,"SegmentTimeline")[0],l=r||s||t,u=l&&hn(l,"Initialization")[0],c=t&&Ps(t);c&&u?c.initialization=u&&Ps(u):c&&c.initialization&&(c.initialization={sourceURL:c.initialization});var h={template:c,segmentTimeline:o&&hn(o,"S").map(function(m){return Ps(m)}),list:r&&Qs(Ps(r),{segmentUrls:n,initialization:Ps(u)}),base:s&&Qs(Ps(s),{initialization:Ps(u)})};return Object.keys(h).forEach(function(m){h[m]||delete h[m]}),h},Rde=function(e,t,r){return function(n){var s=hn(n,"BaseURL"),a=_T(t,s),o=Qs(e,Ps(n)),l=F2(n);return a.map(function(u){return{segmentInfo:Qs(r,l),attributes:Qs(o,{baseUrl:u})}})}},Lde=function(e){return e.reduce(function(t,r){var n=Ps(r);n.schemeIdUri&&(n.schemeIdUri=n.schemeIdUri.toLowerCase());var s=Pde[n.schemeIdUri];if(s){t[s]={attributes:n};var a=hn(r,"cenc:pssh")[0];if(a){var o=M2(a);t[s].pssh=o&&b6(o)}}return t},{})},Ode=function(e){if(e.schemeIdUri==="urn:scte:dash:cc:cea-608:2015"){var t=typeof e.value!="string"?[]:e.value.split(";");return t.map(function(n){var s,a;if(a=n,/^CC\d=/.test(n)){var o=n.split("=");s=o[0],a=o[1]}else/^CC\d$/.test(n)&&(s=n);return{channel:s,language:a}})}else if(e.schemeIdUri==="urn:scte:dash:cc:cea-708:2015"){var r=typeof e.value!="string"?[]:e.value.split(";");return r.map(function(n){var s={channel:void 0,language:void 0,aspectRatio:1,easyReader:0,"3D":0};if(/=/.test(n)){var a=n.split("="),o=a[0],l=a[1],u=l===void 0?"":l;s.channel=o,s.language=n,u.split(",").forEach(function(c){var h=c.split(":"),m=h[0],g=h[1];m==="lang"?s.language=g:m==="er"?s.easyReader=Number(g):m==="war"?s.aspectRatio=Number(g):m==="3D"&&(s["3D"]=Number(g))})}else s.language=n;return s.channel&&(s.channel="SERVICE"+s.channel),s})}},Mde=function(e,t,r){return function(n){var s=Ps(n),a=_T(t,hn(n,"BaseURL")),o=hn(n,"Role")[0],l={role:Ps(o)},u=Qs(e,s,l),c=hn(n,"Accessibility")[0],h=Ode(Ps(c));h&&(u=Qs(u,{captionServices:h}));var m=hn(n,"Label")[0];if(m&&m.childNodes.length){var g=m.childNodes[0].nodeValue.trim();u=Qs(u,{label:g})}var y=Lde(hn(n,"ContentProtection"));Object.keys(y).length&&(u=Qs(u,{contentProtection:y}));var _=F2(n),T=hn(n,"Representation"),E=Qs(r,_);return vT(T.map(Rde(u,a,E)))}},Fde=function(e,t){return function(r,n){var s=_T(t,hn(r.node,"BaseURL")),a=Qs(e,{periodStart:r.attributes.start});typeof r.attributes.duration=="number"&&(a.periodDuration=r.attributes.duration);var o=hn(r.node,"AdaptationSet"),l=F2(r.node);return vT(o.map(Mde(a,s,l)))}},Bde=function(e){var t=e.attributes,r=e.priorPeriodAttributes,n=e.mpdType;return typeof t.start=="number"?t.start:r&&typeof r.start=="number"&&typeof r.duration=="number"?r.start+r.duration:!r&&n==="static"?0:null},Nde=function(e,t){t===void 0&&(t={});var r=t,n=r.manifestUri,s=n===void 0?"":n,a=r.NOW,o=a===void 0?Date.now():a,l=r.clientOffset,u=l===void 0?0:l,c=hn(e,"Period");if(!c.length)throw new Error(vp.INVALID_NUMBER_OF_PERIOD);var h=hn(e,"Location"),m=Ps(e),g=_T([s],hn(e,"BaseURL"));m.type=m.type||"static",m.sourceDuration=m.mediaPresentationDuration||0,m.NOW=o,m.clientOffset=u,h.length&&(m.locations=h.map(M2));var y=[];return c.forEach(function(_,T){var E=Ps(_),w=y[T-1];E.start=Bde({attributes:E,priorPeriodAttributes:w?w.attributes:null,mpdType:m.type}),y.push({node:_,attributes:E})}),{locations:m.locations,representationInfo:vT(y.map(Fde(m,g)))}},L6=function(e){if(e==="")throw new Error(vp.DASH_EMPTY_MANIFEST);var t=new $8.DOMParser,r,n;try{r=t.parseFromString(e,"application/xml"),n=r&&r.documentElement.tagName==="MPD"?r.documentElement:null}catch{}if(!n||n&&n.getElementsByTagName("parsererror").length>0)throw new Error(vp.DASH_INVALID_XML);return n},Ude=function(e){var t=hn(e,"UTCTiming")[0];if(!t)return null;var r=Ps(t);switch(r.schemeIdUri){case"urn:mpeg:dash:utc:http-head:2014":case"urn:mpeg:dash:utc:http-head:2012":r.method="HEAD";break;case"urn:mpeg:dash:utc:http-xsdate:2014":case"urn:mpeg:dash:utc:http-iso:2014":case"urn:mpeg:dash:utc:http-xsdate:2012":case"urn:mpeg:dash:utc:http-iso:2012":r.method="GET";break;case"urn:mpeg:dash:utc:direct:2014":case"urn:mpeg:dash:utc:direct:2012":r.method="DIRECT",r.value=Date.parse(r.value);break;case"urn:mpeg:dash:utc:http-ntp:2014":case"urn:mpeg:dash:utc:ntp:2014":case"urn:mpeg:dash:utc:sntp:2014":default:throw new Error(vp.UNSUPPORTED_UTC_TIMING_SCHEME)}return r},$de=function(e,t){t===void 0&&(t={});var r=Nde(L6(e),t),n=Ade(r.representationInfo);return _de({dashPlaylists:n,locations:r.locations,sidxMapping:t.sidxMapping,previousManifest:t.previousManifest})},jde=function(e){return Ude(L6(e))},f1,y4;function zde(){if(y4)return f1;y4=1;var i=Math.pow(2,32),e=function(t){var r=new DataView(t.buffer,t.byteOffset,t.byteLength),n;return r.getBigUint64?(n=r.getBigUint64(0),n<Number.MAX_SAFE_INTEGER?Number(n):n):r.getUint32(0)*i+r.getUint32(4)};return f1={getUint64:e,MAX_UINT32:i},f1}var p1,_4;function Hde(){if(_4)return p1;_4=1;var i=zde().getUint64,e=function(t){var r=new DataView(t.buffer,t.byteOffset,t.byteLength),n={version:t[0],flags:new Uint8Array(t.subarray(1,4)),references:[],referenceId:r.getUint32(4),timescale:r.getUint32(8)},s=12;n.version===0?(n.earliestPresentationTime=r.getUint32(s),n.firstOffset=r.getUint32(s+4),s+=8):(n.earliestPresentationTime=i(t.subarray(s)),n.firstOffset=i(t.subarray(s+8)),s+=16),s+=2;var a=r.getUint16(s);for(s+=2;a>0;s+=12,a--)n.references.push({referenceType:(t[s]&128)>>>7,referencedSize:r.getUint32(s)&2147483647,subsegmentDuration:r.getUint32(s+4),startsWithSap:!!(t[s+8]&128),sapType:(t[s+8]&112)>>>4,sapDeltaTime:r.getUint32(s+8)&268435455});return n};return p1=e,p1}var Vde=Hde();const qde=ia(Vde);var Wde=pr([73,68,51]),Gde=function(e,t){t===void 0&&(t=0),e=pr(e);var r=e[t+5],n=e[t+6]<<21|e[t+7]<<14|e[t+8]<<7|e[t+9],s=(r&16)>>4;return s?n+20:n+10},Ym=function i(e,t){return t===void 0&&(t=0),e=pr(e),e.length-t<10||!Vi(e,Wde,{offset:t})?t:(t+=Gde(e,t),i(e,t))},x4=function(e){return typeof e=="string"?k6(e):e},Kde=function(e){return Array.isArray(e)?e.map(function(t){return x4(t)}):[x4(e)]},Xde=function i(e,t,r){r===void 0&&(r=!1),t=Kde(t),e=pr(e);var n=[];if(!t.length)return n;for(var s=0;s<e.length;){var a=(e[s]<<24|e[s+1]<<16|e[s+2]<<8|e[s+3])>>>0,o=e.subarray(s+4,s+8);if(a===0)break;var l=s+a;if(l>e.length){if(r)break;l=e.length}var u=e.subarray(s+8,l);Vi(o,t[0])&&(t.length===1?n.push(u):n.push.apply(n,i(u,t.slice(1),r))),s=l}return n},kv={EBML:pr([26,69,223,163]),DocType:pr([66,130]),Segment:pr([24,83,128,103]),SegmentInfo:pr([21,73,169,102]),Tracks:pr([22,84,174,107]),Track:pr([174]),TrackNumber:pr([215]),DefaultDuration:pr([35,227,131]),TrackEntry:pr([174]),TrackType:pr([131]),FlagDefault:pr([136]),CodecID:pr([134]),CodecPrivate:pr([99,162]),VideoTrack:pr([224]),AudioTrack:pr([225]),Cluster:pr([31,67,182,117]),Timestamp:pr([231]),TimestampScale:pr([42,215,177]),BlockGroup:pr([160]),BlockDuration:pr([155]),Block:pr([161]),SimpleBlock:pr([163])},aE=[128,64,32,16,8,4,2,1],Yde=function(e){for(var t=1,r=0;r<aE.length&&!(e&aE[r]);r++)t++;return t},q_=function(e,t,r,n){r===void 0&&(r=!0),n===void 0&&(n=!1);var s=Yde(e[t]),a=e.subarray(t,t+s);return r&&(a=Array.prototype.slice.call(e,t,t+s),a[0]^=aE[s-1]),{length:s,value:Gce(a,{signed:n}),bytes:a}},T4=function i(e){return typeof e=="string"?e.match(/.{1,2}/g).map(function(t){return i(t)}):typeof e=="number"?Kce(e):e},Qde=function(e){return Array.isArray(e)?e.map(function(t){return T4(t)}):[T4(e)]},Jde=function i(e,t,r){if(r>=t.length)return t.length;var n=q_(t,r,!1);if(Vi(e.bytes,n.bytes))return r;var s=q_(t,r+n.length);return i(e,t,r+s.length+s.value+n.length)},b4=function i(e,t){t=Qde(t),e=pr(e);var r=[];if(!t.length)return r;for(var n=0;n<e.length;){var s=q_(e,n,!1),a=q_(e,n+s.length),o=n+s.length+a.length;a.value===127&&(a.value=Jde(s,e,o),a.value!==e.length&&(a.value-=o));var l=o+a.value>e.length?e.length:o+a.value,u=e.subarray(o,l);Vi(t[0],s.bytes)&&(t.length===1?r.push(u):r=r.concat(i(u,t.slice(1))));var c=s.length+a.length+u.length;n+=c}return r},Zde=pr([0,0,0,1]),ehe=pr([0,0,1]),the=pr([0,0,3]),rhe=function(e){for(var t=[],r=1;r<e.length-2;)Vi(e.subarray(r,r+3),the)&&(t.push(r+2),r++),r++;if(t.length===0)return e;var n=e.length-t.length,s=new Uint8Array(n),a=0;for(r=0;r<n;a++,r++)a===t[0]&&(a++,t.shift()),s[r]=e[a];return s},O6=function(e,t,r,n){e=pr(e),r=[].concat(r);for(var s=0,a,o=0;s<e.length&&(o<n||a);){var l=void 0;if(Vi(e.subarray(s),Zde)?l=4:Vi(e.subarray(s),ehe)&&(l=3),!l){s++;continue}if(o++,a)return rhe(e.subarray(a,s));var u=void 0;t==="h264"?u=e[s+l]&31:t==="h265"&&(u=e[s+l]>>1&63),r.indexOf(u)!==-1&&(a=s+l),s+=l+(t==="h264"?1:2)}return e.subarray(0,0)},ihe=function(e,t,r){return O6(e,"h264",t,r)},nhe=function(e,t,r){return O6(e,"h265",t,r)},Vs={webm:pr([119,101,98,109]),matroska:pr([109,97,116,114,111,115,107,97]),flac:pr([102,76,97,67]),ogg:pr([79,103,103,83]),ac3:pr([11,119]),riff:pr([82,73,70,70]),avi:pr([65,86,73]),wav:pr([87,65,86,69]),"3gp":pr([102,116,121,112,51,103]),mp4:pr([102,116,121,112]),fmp4:pr([115,116,121,112]),mov:pr([102,116,121,112,113,116]),moov:pr([109,111,111,118]),moof:pr([109,111,111,102])},yp={aac:function(e){var t=Ym(e);return Vi(e,[255,16],{offset:t,mask:[255,22]})},mp3:function(e){var t=Ym(e);return Vi(e,[255,2],{offset:t,mask:[255,6]})},webm:function(e){var t=b4(e,[kv.EBML,kv.DocType])[0];return Vi(t,Vs.webm)},mkv:function(e){var t=b4(e,[kv.EBML,kv.DocType])[0];return Vi(t,Vs.matroska)},mp4:function(e){if(yp["3gp"](e)||yp.mov(e))return!1;if(Vi(e,Vs.mp4,{offset:4})||Vi(e,Vs.fmp4,{offset:4})||Vi(e,Vs.moof,{offset:4})||Vi(e,Vs.moov,{offset:4}))return!0},mov:function(e){return Vi(e,Vs.mov,{offset:4})},"3gp":function(e){return Vi(e,Vs["3gp"],{offset:4})},ac3:function(e){var t=Ym(e);return Vi(e,Vs.ac3,{offset:t})},ts:function(e){if(e.length<189&&e.length>=1)return e[0]===71;for(var t=0;t+188<e.length&&t<188;){if(e[t]===71&&e[t+188]===71)return!0;t+=1}return!1},flac:function(e){var t=Ym(e);return Vi(e,Vs.flac,{offset:t})},ogg:function(e){return Vi(e,Vs.ogg)},avi:function(e){return Vi(e,Vs.riff)&&Vi(e,Vs.avi,{offset:8})},wav:function(e){return Vi(e,Vs.riff)&&Vi(e,Vs.wav,{offset:8})},h264:function(e){return ihe(e,7,3).length},h265:function(e){return nhe(e,[32,33],3).length}},oE=Object.keys(yp).filter(function(i){return i!=="ts"&&i!=="h264"&&i!=="h265"}).concat(["ts","h264","h265"]);oE.forEach(function(i){var e=yp[i];yp[i]=function(t){return e(pr(t))}});var she=yp,B2=function(e){e=pr(e);for(var t=0;t<oE.length;t++){var r=oE[t];if(she[r](e))return r}return""},ahe=function(e){return Xde(e,["moof"]).length>0},m1,S4;function ohe(){if(S4)return m1;S4=1;var i=9e4,e,t,r,n,s,a,o;return e=function(l){return l*i},t=function(l,u){return l*u},r=function(l){return l/i},n=function(l,u){return l/u},s=function(l,u){return e(n(l,u))},a=function(l,u){return t(r(l),u)},o=function(l,u,c){return r(c?l:l-u)},m1={ONE_SECOND_IN_TS:i,secondsToVideoTs:e,secondsToAudioTs:t,videoTsToSeconds:r,audioTsToSeconds:n,audioTsToVideoTs:s,videoTsToAudioTs:a,metadataTsToSeconds:o},m1}var W_=ohe();function lhe(i){try{return Function.toString.call(i).indexOf("[native code]")!==-1}catch{return typeof i=="function"}}function lE(i){var e=typeof Map=="function"?new Map:void 0;return lE=function(r){if(r===null||!lhe(r))return r;if(typeof r!="function")throw new TypeError("Super expression must either be null or a function");if(e!==void 0){if(e.has(r))return e.get(r);e.set(r,n)}function n(){return T6(r,arguments,Ms(this).constructor)}return n.prototype=Object.create(r.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),ip(n,r)},lE(i)}/**
 * @license
 * Video.js 7.21.6 <http://videojs.com/>
 * Copyright Brightcove, Inc. <https://www.brightcove.com/>
 * Available under Apache License Version 2.0
 * <https://github.com/videojs/video.js/blob/main/LICENSE>
 *
 * Includes vtt.js <https://github.com/mozilla/vtt.js>
 * Available under Apache License Version 2.0
 * <https://github.com/mozilla/vtt.js/blob/main/LICENSE>
 */var M6="7.21.6",ec={},pd=function(e,t){return ec[e]=ec[e]||[],t&&(ec[e]=ec[e].concat(t)),ec[e]},uhe=function(e,t){pd(e,t)},F6=function(e,t){var r=pd(e).indexOf(t);return r<=-1?!1:(ec[e]=ec[e].slice(),ec[e].splice(r,1),!0)},che=function(e,t){pd(e,[].concat(t).map(function(r){var n=function s(){return F6(e,s),r.apply(void 0,arguments)};return n}))},G_={prefixed:!0},$y=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror","fullscreen"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror","-webkit-full-screen"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror","-moz-full-screen"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError","-ms-fullscreen"]],C4=$y[0],Qm;for(var Av=0;Av<$y.length;Av++)if($y[Av][1]in Me){Qm=$y[Av];break}if(Qm){for(var Iv=0;Iv<Qm.length;Iv++)G_[C4[Iv]]=Qm[Iv];G_.prefixed=Qm[0]!==C4[0]}var ba=[],dhe=function(e,t){return function(r,n,s){var a=t.levels[n],o=new RegExp("^("+a+")$");if(r!=="log"&&s.unshift(r.toUpperCase()+":"),s.unshift(e+":"),ba){ba.push([].concat(s));var l=ba.length-1e3;ba.splice(0,l>0?l:0)}if(X.console){var u=X.console[r];!u&&r==="debug"&&(u=X.console.info||X.console.log),!(!u||!a||!o.test(r))&&u[Array.isArray(s)?"apply":"call"](X.console,s)}}};function B6(i){var e="info",t,r=function(){for(var s=arguments.length,a=new Array(s),o=0;o<s;o++)a[o]=arguments[o];t("log",e,a)};return t=dhe(i,r),r.createLogger=function(n){return B6(i+": "+n)},r.levels={all:"debug|log|warn|error",off:"",debug:"debug|log|warn|error",info:"log|warn|error",warn:"warn|error",error:"error",DEFAULT:e},r.level=function(n){if(typeof n=="string"){if(!r.levels.hasOwnProperty(n))throw new Error('"'+n+'" in not a valid log level');e=n}return e},r.history=function(){return ba?[].concat(ba):[]},r.history.filter=function(n){return(ba||[]).filter(function(s){return new RegExp(".*"+n+".*").test(s[0])})},r.history.clear=function(){ba&&(ba.length=0)},r.history.disable=function(){ba!==null&&(ba.length=0,ba=null)},r.history.enable=function(){ba===null&&(ba=[])},r.error=function(){for(var n=arguments.length,s=new Array(n),a=0;a<n;a++)s[a]=arguments[a];return t("error",e,s)},r.warn=function(){for(var n=arguments.length,s=new Array(n),a=0;a<n;a++)s[a]=arguments[a];return t("warn",e,s)},r.debug=function(){for(var n=arguments.length,s=new Array(n),a=0;a<n;a++)s[a]=arguments[a];return t("debug",e,s)},r}var Nr=B6("VIDEOJS"),N6=Nr.createLogger,hhe=Object.prototype.toString,U6=function(e){return oc(e)?Object.keys(e):[]};function Jf(i,e){U6(i).forEach(function(t){return e(i[t],t)})}function fhe(i,e,t){return t===void 0&&(t=0),U6(i).reduce(function(r,n){return e(r,i[n],n)},t)}function rn(i){for(var e=arguments.length,t=new Array(e>1?e-1:0),r=1;r<e;r++)t[r-1]=arguments[r];return Object.assign?Jt.apply(void 0,[i].concat(t)):(t.forEach(function(n){n&&Jf(n,function(s,a){i[a]=s})}),i)}function oc(i){return!!i&&typeof i=="object"}function O0(i){return oc(i)&&hhe.call(i)==="[object Object]"&&i.constructor===Object}function M0(i,e){if(!i||!e)return"";if(typeof X.getComputedStyle=="function"){var t;try{t=X.getComputedStyle(i)}catch{return""}return t?t.getPropertyValue(e)||t[e]:""}return""}var Xn=X.navigator&&X.navigator.userAgent||"",E4=/AppleWebKit\/([\d.]+)/i.exec(Xn),phe=E4?parseFloat(E4.pop()):null,$6=/iPod/i.test(Xn),mhe=(function(){var i=Xn.match(/OS (\d+)_/i);return i&&i[1]?i[1]:null})(),dc=/Android/i.test(Xn),N2=(function(){var i=Xn.match(/Android (\d+)(?:\.(\d+))?(?:\.(\d+))*/i);if(!i)return null;var e=i[1]&&parseFloat(i[1]),t=i[2]&&parseFloat(i[2]);return e&&t?parseFloat(i[1]+"."+i[2]):e||null})(),j6=dc&&N2<5&&phe<537,z6=/Firefox/i.test(Xn),ug=/Edg/i.test(Xn),hc=!ug&&(/Chrome/i.test(Xn)||/CriOS/i.test(Xn)),H6=(function(){var i=Xn.match(/(Chrome|CriOS)\/(\d+)/);return i&&i[2]?parseFloat(i[2]):null})(),cg=(function(){var i=/MSIE\s(\d+)\.\d/.exec(Xn),e=i&&parseFloat(i[1]);return!e&&/Trident\/7.0/i.test(Xn)&&/rv:11.0/.test(Xn)&&(e=11),e})(),U2=/Safari/i.test(Xn)&&!hc&&!dc&&!ug,V6=/Windows/i.test(Xn),_p=!!(jp()&&("ontouchstart"in X||X.navigator.maxTouchPoints||X.DocumentTouch&&X.document instanceof X.DocumentTouch)),$2=/iPad/i.test(Xn)||U2&&_p&&!/iPhone/i.test(Xn),j2=/iPhone/i.test(Xn)&&!$2,ra=j2||$2||$6,xT=(U2||ra)&&!hc,ghe=Object.freeze({__proto__:null,IS_IPOD:$6,IOS_VERSION:mhe,IS_ANDROID:dc,ANDROID_VERSION:N2,IS_NATIVE_ANDROID:j6,IS_FIREFOX:z6,IS_EDGE:ug,IS_CHROME:hc,CHROME_VERSION:H6,IE_VERSION:cg,IS_SAFARI:U2,IS_WINDOWS:V6,TOUCH_ENABLED:_p,IS_IPAD:$2,IS_IPHONE:j2,IS_IOS:ra,IS_ANY_SAFARI:xT});function w4(i){return typeof i=="string"&&!!i.trim()}function q6(i){if(i.indexOf(" ")>=0)throw new Error("class has illegal whitespace characters")}function vhe(i){return new RegExp("(^|\\s)"+i+"($|\\s)")}function jp(){return Me===X.document}function zp(i){return oc(i)&&i.nodeType===1}function W6(){try{return X.parent!==X.self}catch{return!0}}function G6(i){return function(e,t){if(!w4(e))return Me[i](null);w4(t)&&(t=Me.querySelector(t));var r=zp(t)?t:Me;return r[i]&&r[i](e)}}function ni(i,e,t,r){i===void 0&&(i="div"),e===void 0&&(e={}),t===void 0&&(t={});var n=Me.createElement(i);return Object.getOwnPropertyNames(e).forEach(function(s){var a=e[s];s.indexOf("aria-")!==-1||s==="role"||s==="type"?(Nr.warn(`Setting attributes in the second argument of createEl()
has been deprecated. Use the third argument instead.
`+("createEl(type, properties, attributes). Attempting to set "+s+" to "+a+".")),n.setAttribute(s,a)):s==="textContent"?Fh(n,a):(n[s]!==a||s==="tabIndex")&&(n[s]=a)}),Object.getOwnPropertyNames(t).forEach(function(s){n.setAttribute(s,t[s])}),r&&H2(n,r),n}function Fh(i,e){return typeof i.textContent>"u"?i.innerText=e:i.textContent=e,i}function uE(i,e){e.firstChild?e.insertBefore(i,e.firstChild):e.appendChild(i)}function xh(i,e){return q6(e),i.classList?i.classList.contains(e):vhe(e).test(i.className)}function nc(i,e){return i.classList?i.classList.add(e):xh(i,e)||(i.className=(i.className+" "+e).trim()),i}function dg(i,e){return i?(i.classList?i.classList.remove(e):(q6(e),i.className=i.className.split(/\s+/).filter(function(t){return t!==e}).join(" ")),i):(Nr.warn("removeClass was called with an element that doesn't exist"),null)}function K6(i,e,t){var r=xh(i,e);if(typeof t=="function"&&(t=t(i,e)),typeof t!="boolean"&&(t=!r),t!==r)return t?nc(i,e):dg(i,e),i}function X6(i,e){Object.getOwnPropertyNames(e).forEach(function(t){var r=e[t];r===null||typeof r>"u"||r===!1?i.removeAttribute(t):i.setAttribute(t,r===!0?"":r)})}function Yu(i){var e={},t=",autoplay,controls,playsinline,loop,muted,default,defaultMuted,";if(i&&i.attributes&&i.attributes.length>0)for(var r=i.attributes,n=r.length-1;n>=0;n--){var s=r[n].name,a=r[n].value;(typeof i[s]=="boolean"||t.indexOf(","+s+",")!==-1)&&(a=a!==null),e[s]=a}return e}function Y6(i,e){return i.getAttribute(e)}function xp(i,e,t){i.setAttribute(e,t)}function TT(i,e){i.removeAttribute(e)}function Q6(){Me.body.focus(),Me.onselectstart=function(){return!1}}function J6(){Me.onselectstart=function(){return!0}}function Tp(i){if(i&&i.getBoundingClientRect&&i.parentNode){var e=i.getBoundingClientRect(),t={};return["bottom","height","left","right","top","width"].forEach(function(r){e[r]!==void 0&&(t[r]=e[r])}),t.height||(t.height=parseFloat(M0(i,"height"))),t.width||(t.width=parseFloat(M0(i,"width"))),t}}function F0(i){if(!i||i&&!i.offsetParent)return{left:0,top:0,width:0,height:0};for(var e=i.offsetWidth,t=i.offsetHeight,r=0,n=0;i.offsetParent&&i!==Me[G_.fullscreenElement];)r+=i.offsetLeft,n+=i.offsetTop,i=i.offsetParent;return{left:r,top:n,width:e,height:t}}function bT(i,e){var t={x:0,y:0};if(ra)for(var r=i;r&&r.nodeName.toLowerCase()!=="html";){var n=M0(r,"transform");if(/^matrix/.test(n)){var s=n.slice(7,-1).split(/,\s/).map(Number);t.x+=s[4],t.y+=s[5]}else if(/^matrix3d/.test(n)){var a=n.slice(9,-1).split(/,\s/).map(Number);t.x+=a[12],t.y+=a[13]}r=r.parentNode}var o={},l=F0(e.target),u=F0(i),c=u.width,h=u.height,m=e.offsetY-(u.top-l.top),g=e.offsetX-(u.left-l.left);return e.changedTouches&&(g=e.changedTouches[0].pageX-u.left,m=e.changedTouches[0].pageY+u.top,ra&&(g-=t.x,m-=t.y)),o.y=1-Math.max(0,Math.min(1,m/h)),o.x=Math.max(0,Math.min(1,g/c)),o}function Z6(i){return oc(i)&&i.nodeType===3}function z2(i){for(;i.firstChild;)i.removeChild(i.firstChild);return i}function eU(i){return typeof i=="function"&&(i=i()),(Array.isArray(i)?i:[i]).map(function(e){if(typeof e=="function"&&(e=e()),zp(e)||Z6(e))return e;if(typeof e=="string"&&/\S/.test(e))return Me.createTextNode(e)}).filter(function(e){return e})}function H2(i,e){return eU(e).forEach(function(t){return i.appendChild(t)}),i}function tU(i,e){return H2(z2(i),e)}function B0(i){return i.button===void 0&&i.buttons===void 0||i.button===0&&i.buttons===void 0||i.type==="mouseup"&&i.button===0&&i.buttons===0?!0:!(i.button!==0||i.buttons!==1)}var md=G6("querySelector"),rU=G6("querySelectorAll"),iU=Object.freeze({__proto__:null,isReal:jp,isEl:zp,isInFrame:W6,createEl:ni,textContent:Fh,prependTo:uE,hasClass:xh,addClass:nc,removeClass:dg,toggleClass:K6,setAttributes:X6,getAttributes:Yu,getAttribute:Y6,setAttribute:xp,removeAttribute:TT,blockTextSelection:Q6,unblockTextSelection:J6,getBoundingClientRect:Tp,findPosition:F0,getPointerPosition:bT,isTextNode:Z6,emptyEl:z2,normalizeContent:eU,appendContent:H2,insertContent:tU,isSingleLeftClick:B0,$:md,$$:rU}),nU=!1,cE,yhe=function(){if(cE.options.autoSetup!==!1){var e=Array.prototype.slice.call(Me.getElementsByTagName("video")),t=Array.prototype.slice.call(Me.getElementsByTagName("audio")),r=Array.prototype.slice.call(Me.getElementsByTagName("video-js")),n=e.concat(t,r);if(n&&n.length>0)for(var s=0,a=n.length;s<a;s++){var o=n[s];if(o&&o.getAttribute){if(o.player===void 0){var l=o.getAttribute("data-setup");l!==null&&cE(o)}}else{dE(1);break}}else nU||dE(1)}};function dE(i,e){jp()&&(e&&(cE=e),X.setTimeout(yhe,i))}function hE(){nU=!0,X.removeEventListener("load",hE)}jp()&&(Me.readyState==="complete"?hE():X.addEventListener("load",hE));var sU=function(e){var t=Me.createElement("style");return t.className=e,t},aU=function(e,t){e.styleSheet?e.styleSheet.cssText=t:e.textContent=t},_he=3,xhe=_he;function fc(){return xhe++}var oU;X.WeakMap||(oU=(function(){function i(){this.vdata="vdata"+Math.floor(X.performance&&X.performance.now()||Date.now()),this.data={}}var e=i.prototype;return e.set=function(r,n){var s=r[this.vdata]||fc();return r[this.vdata]||(r[this.vdata]=s),this.data[s]=n,this},e.get=function(r){var n=r[this.vdata];if(n)return this.data[n];Nr("We have no data for this element",r)},e.has=function(r){var n=r[this.vdata];return n in this.data},e.delete=function(r){var n=r[this.vdata];n&&(delete this.data[n],delete r[this.vdata])},i})());var Js=X.WeakMap?new WeakMap:new oU;function k4(i,e){if(Js.has(i)){var t=Js.get(i);t.handlers[e].length===0&&(delete t.handlers[e],i.removeEventListener?i.removeEventListener(e,t.dispatcher,!1):i.detachEvent&&i.detachEvent("on"+e,t.dispatcher)),Object.getOwnPropertyNames(t.handlers).length<=0&&(delete t.handlers,delete t.dispatcher,delete t.disabled),Object.getOwnPropertyNames(t).length===0&&Js.delete(i)}}function V2(i,e,t,r){t.forEach(function(n){i(e,n,r)})}function ST(i){if(i.fixed_)return i;function e(){return!0}function t(){return!1}if(!i||!i.isPropagationStopped||!i.isImmediatePropagationStopped){var r=i||X.event;i={};for(var n in r)n!=="layerX"&&n!=="layerY"&&n!=="keyLocation"&&n!=="webkitMovementX"&&n!=="webkitMovementY"&&n!=="path"&&(n==="returnValue"&&r.preventDefault||(i[n]=r[n]));if(i.target||(i.target=i.srcElement||Me),i.relatedTarget||(i.relatedTarget=i.fromElement===i.target?i.toElement:i.fromElement),i.preventDefault=function(){r.preventDefault&&r.preventDefault(),i.returnValue=!1,r.returnValue=!1,i.defaultPrevented=!0},i.defaultPrevented=!1,i.stopPropagation=function(){r.stopPropagation&&r.stopPropagation(),i.cancelBubble=!0,r.cancelBubble=!0,i.isPropagationStopped=e},i.isPropagationStopped=t,i.stopImmediatePropagation=function(){r.stopImmediatePropagation&&r.stopImmediatePropagation(),i.isImmediatePropagationStopped=e,i.stopPropagation()},i.isImmediatePropagationStopped=t,i.clientX!==null&&i.clientX!==void 0){var s=Me.documentElement,a=Me.body;i.pageX=i.clientX+(s&&s.scrollLeft||a&&a.scrollLeft||0)-(s&&s.clientLeft||a&&a.clientLeft||0),i.pageY=i.clientY+(s&&s.scrollTop||a&&a.scrollTop||0)-(s&&s.clientTop||a&&a.clientTop||0)}i.which=i.charCode||i.keyCode,i.button!==null&&i.button!==void 0&&(i.button=i.button&1?0:i.button&4?1:i.button&2?2:0)}return i.fixed_=!0,i}var Dv,The=function(){if(typeof Dv!="boolean"){Dv=!1;try{var e=Object.defineProperty({},"passive",{get:function(){Dv=!0}});X.addEventListener("test",null,e),X.removeEventListener("test",null,e)}catch{}}return Dv},bhe=["touchstart","touchmove"];function ao(i,e,t){if(Array.isArray(e))return V2(ao,i,e,t);Js.has(i)||Js.set(i,{});var r=Js.get(i);if(r.handlers||(r.handlers={}),r.handlers[e]||(r.handlers[e]=[]),t.guid||(t.guid=fc()),r.handlers[e].push(t),r.dispatcher||(r.disabled=!1,r.dispatcher=function(s,a){if(!r.disabled){s=ST(s);var o=r.handlers[s.type];if(o)for(var l=o.slice(0),u=0,c=l.length;u<c&&!s.isImmediatePropagationStopped();u++)try{l[u].call(i,s,a)}catch(h){Nr.error(h)}}}),r.handlers[e].length===1)if(i.addEventListener){var n=!1;The()&&bhe.indexOf(e)>-1&&(n={passive:!0}),i.addEventListener(e,r.dispatcher,n)}else i.attachEvent&&i.attachEvent("on"+e,r.dispatcher)}function Os(i,e,t){if(Js.has(i)){var r=Js.get(i);if(r.handlers){if(Array.isArray(e))return V2(Os,i,e,t);var n=function(u,c){r.handlers[c]=[],k4(u,c)};if(e===void 0){for(var s in r.handlers)Object.prototype.hasOwnProperty.call(r.handlers||{},s)&&n(i,s);return}var a=r.handlers[e];if(a){if(!t){n(i,e);return}if(t.guid)for(var o=0;o<a.length;o++)a[o].guid===t.guid&&a.splice(o--,1);k4(i,e)}}}}function Hp(i,e,t){var r=Js.has(i)?Js.get(i):{},n=i.parentNode||i.ownerDocument;if(typeof e=="string"?e={type:e,target:i}:e.target||(e.target=i),e=ST(e),r.dispatcher&&r.dispatcher.call(i,e,t),n&&!e.isPropagationStopped()&&e.bubbles===!0)Hp.call(null,n,e,t);else if(!n&&!e.defaultPrevented&&e.target&&e.target[e.type]){Js.has(e.target)||Js.set(e.target,{});var s=Js.get(e.target);e.target[e.type]&&(s.disabled=!0,typeof e.target[e.type]=="function"&&e.target[e.type](),s.disabled=!1)}return!e.defaultPrevented}function CT(i,e,t){if(Array.isArray(e))return V2(CT,i,e,t);var r=function n(){Os(i,e,n),t.apply(this,arguments)};r.guid=t.guid=t.guid||fc(),ao(i,e,r)}function lU(i,e,t){var r=function n(){Os(i,e,n),t.apply(this,arguments)};r.guid=t.guid=t.guid||fc(),ao(i,e,r)}var She=Object.freeze({__proto__:null,fixEvent:ST,on:ao,off:Os,trigger:Hp,one:CT,any:lU}),ml=30,Fi=function(e,t,r){t.guid||(t.guid=fc());var n=t.bind(e);return n.guid=r?r+"_"+t.guid:t.guid,n},lc=function(e,t){var r=X.performance.now(),n=function(){var a=X.performance.now();a-r>=t&&(e.apply(void 0,arguments),r=a)};return n},Che=function(e,t,r,n){n===void 0&&(n=X);var s,a=function(){n.clearTimeout(s),s=null},o=function(){var u=this,c=arguments,h=function(){s=null,h=null,e.apply(u,c)};n.clearTimeout(s),s=n.setTimeout(h,t)};return o.cancel=a,o},Yn=function(){};Yn.prototype.allowedEvents_={};Yn.prototype.on=function(i,e){var t=this.addEventListener;this.addEventListener=function(){},ao(this,i,e),this.addEventListener=t};Yn.prototype.addEventListener=Yn.prototype.on;Yn.prototype.off=function(i,e){Os(this,i,e)};Yn.prototype.removeEventListener=Yn.prototype.off;Yn.prototype.one=function(i,e){var t=this.addEventListener;this.addEventListener=function(){},CT(this,i,e),this.addEventListener=t};Yn.prototype.any=function(i,e){var t=this.addEventListener;this.addEventListener=function(){},lU(this,i,e),this.addEventListener=t};Yn.prototype.trigger=function(i){var e=i.type||i;typeof i=="string"&&(i={type:e}),i=ST(i),this.allowedEvents_[e]&&this["on"+e]&&this["on"+e](i),Hp(this,i)};Yn.prototype.dispatchEvent=Yn.prototype.trigger;var Lm;Yn.prototype.queueTrigger=function(i){var e=this;Lm||(Lm=new Map);var t=i.type||i,r=Lm.get(this);r||(r=new Map,Lm.set(this,r));var n=r.get(t);r.delete(t),X.clearTimeout(n);var s=X.setTimeout(function(){r.delete(t),r.size===0&&(r=null,Lm.delete(e)),e.trigger(i)},0);r.set(t,s)};var ET=function(e){return typeof e.name=="function"?e.name():typeof e.name=="string"?e.name:e.name_?e.name_:e.constructor&&e.constructor.name?e.constructor.name:typeof e},sc=function(e){return e instanceof Yn||!!e.eventBusEl_&&["on","one","off","trigger"].every(function(t){return typeof e[t]=="function"})},Ehe=function(e,t){sc(e)?t():(e.eventedCallbacks||(e.eventedCallbacks=[]),e.eventedCallbacks.push(t))},fE=function(e){return typeof e=="string"&&/\S/.test(e)||Array.isArray(e)&&!!e.length},K_=function(e,t,r){if(!e||!e.nodeName&&!sc(e))throw new Error("Invalid target for "+ET(t)+"#"+r+"; must be a DOM node or evented object.")},uU=function(e,t,r){if(!fE(e))throw new Error("Invalid event type for "+ET(t)+"#"+r+"; must be a non-empty string or array.")},cU=function(e,t,r){if(typeof e!="function")throw new Error("Invalid listener for "+ET(t)+"#"+r+"; must be a function.")},g1=function(e,t,r){var n=t.length<3||t[0]===e||t[0]===e.eventBusEl_,s,a,o;return n?(s=e.eventBusEl_,t.length>=3&&t.shift(),a=t[0],o=t[1]):(s=t[0],a=t[1],o=t[2]),K_(s,e,r),uU(a,e,r),cU(o,e,r),o=Fi(e,o),{isTargetingSelf:n,target:s,type:a,listener:o}},Gd=function(e,t,r,n){K_(e,e,t),e.nodeName?She[t](e,r,n):e[t](r,n)},whe={on:function(){for(var e=this,t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];var s=g1(this,r,"on"),a=s.isTargetingSelf,o=s.target,l=s.type,u=s.listener;if(Gd(o,"on",l,u),!a){var c=function(){return e.off(o,l,u)};c.guid=u.guid;var h=function(){return e.off("dispose",c)};h.guid=u.guid,Gd(this,"on","dispose",c),Gd(o,"on","dispose",h)}},one:function(){for(var e=this,t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];var s=g1(this,r,"one"),a=s.isTargetingSelf,o=s.target,l=s.type,u=s.listener;if(a)Gd(o,"one",l,u);else{var c=function h(){e.off(o,l,h);for(var m=arguments.length,g=new Array(m),y=0;y<m;y++)g[y]=arguments[y];u.apply(null,g)};c.guid=u.guid,Gd(o,"one",l,c)}},any:function(){for(var e=this,t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];var s=g1(this,r,"any"),a=s.isTargetingSelf,o=s.target,l=s.type,u=s.listener;if(a)Gd(o,"any",l,u);else{var c=function h(){e.off(o,l,h);for(var m=arguments.length,g=new Array(m),y=0;y<m;y++)g[y]=arguments[y];u.apply(null,g)};c.guid=u.guid,Gd(o,"any",l,c)}},off:function(e,t,r){if(!e||fE(e))Os(this.eventBusEl_,e,t);else{var n=e,s=t;K_(n,this,"off"),uU(s,this,"off"),cU(r,this,"off"),r=Fi(this,r),this.off("dispose",r),n.nodeName?(Os(n,s,r),Os(n,"dispose",r)):sc(n)&&(n.off(s,r),n.off("dispose",r))}},trigger:function(e,t){K_(this.eventBusEl_,this,"trigger");var r=e&&typeof e!="string"?e.type:e;if(!fE(r)){var n="Invalid event type for "+ET(this)+"#trigger; must be a non-empty string or object with a type key that has a non-empty value.";if(e)(this.log||Nr).error(n);else throw new Error(n)}return Hp(this.eventBusEl_,e,t)}};function q2(i,e){e===void 0&&(e={});var t=e,r=t.eventBusKey;if(r){if(!i[r].nodeName)throw new Error('The eventBusKey "'+r+'" does not refer to an element.');i.eventBusEl_=i[r]}else i.eventBusEl_=ni("span",{className:"vjs-event-bus"});return rn(i,whe),i.eventedCallbacks&&i.eventedCallbacks.forEach(function(n){n()}),i.on("dispose",function(){i.off(),[i,i.el_,i.eventBusEl_].forEach(function(n){n&&Js.has(n)&&Js.delete(n)}),X.setTimeout(function(){i.eventBusEl_=null},0)}),i}var khe={state:{},setState:function(e){var t=this;typeof e=="function"&&(e=e());var r;return Jf(e,function(n,s){t.state[s]!==n&&(r=r||{},r[s]={from:t.state[s],to:n}),t.state[s]=n}),r&&sc(this)&&this.trigger({changes:r,type:"statechanged"}),r}};function dU(i,e){return rn(i,khe),i.state=rn({},i.state,e),typeof i.handleStateChanged=="function"&&sc(i)&&i.on("statechanged",i.handleStateChanged),i}var jy=function(e){return typeof e!="string"?e:e.replace(/./,function(t){return t.toLowerCase()})},fn=function(e){return typeof e!="string"?e:e.replace(/./,function(t){return t.toUpperCase()})},Ahe=function(e,t){return fn(e)===fn(t)};function Mi(){for(var i={},e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.forEach(function(n){n&&Jf(n,function(s,a){if(!O0(s)){i[a]=s;return}O0(i[a])||(i[a]={}),i[a]=Mi(i[a],s)})}),i}var Ihe=(function(){function i(){this.map_={}}var e=i.prototype;return e.has=function(r){return r in this.map_},e.delete=function(r){var n=this.has(r);return delete this.map_[r],n},e.set=function(r,n){return this.map_[r]=n,this},e.forEach=function(r,n){for(var s in this.map_)r.call(n,this.map_[s],s,this)},i})(),Dhe=X.Map?X.Map:Ihe,Phe=(function(){function i(){this.set_={}}var e=i.prototype;return e.has=function(r){return r in this.set_},e.delete=function(r){var n=this.has(r);return delete this.set_[r],n},e.add=function(r){return this.set_[r]=1,this},e.forEach=function(r,n){for(var s in this.set_)r.call(n,s,s,this)},i})(),v1=X.Set?X.Set:Phe,xt=(function(){function i(t,r,n){var s=this;if(!t&&this.play?this.player_=t=this:this.player_=t,this.isDisposed_=!1,this.parentComponent_=null,this.options_=Mi({},this.options_),r=this.options_=Mi(this.options_,r),this.id_=r.id||r.el&&r.el.id,!this.id_){var a=t&&t.id&&t.id()||"no_player";this.id_=a+"_component_"+fc()}this.name_=r.name||null,r.el?this.el_=r.el:r.createEl!==!1&&(this.el_=this.createEl()),r.className&&this.el_&&r.className.split(" ").forEach(function(o){return s.addClass(o)}),r.evented!==!1&&(q2(this,{eventBusKey:this.el_?"el_":null}),this.handleLanguagechange=this.handleLanguagechange.bind(this),this.on(this.player_,"languagechange",this.handleLanguagechange)),dU(this,this.constructor.defaultState),this.children_=[],this.childIndex_={},this.childNameIndex_={},this.setTimeoutIds_=new v1,this.setIntervalIds_=new v1,this.rafIds_=new v1,this.namedRafs_=new Dhe,this.clearingTimersOnDispose_=!1,r.initChildren!==!1&&this.initChildren(),this.ready(n),r.reportTouchActivity!==!1&&this.enableTouchActivity()}var e=i.prototype;return e.dispose=function(r){if(r===void 0&&(r={}),!this.isDisposed_){if(this.readyQueue_&&(this.readyQueue_.length=0),this.trigger({type:"dispose",bubbles:!1}),this.isDisposed_=!0,this.children_)for(var n=this.children_.length-1;n>=0;n--)this.children_[n].dispose&&this.children_[n].dispose();this.children_=null,this.childIndex_=null,this.childNameIndex_=null,this.parentComponent_=null,this.el_&&(this.el_.parentNode&&(r.restoreEl?this.el_.parentNode.replaceChild(r.restoreEl,this.el_):this.el_.parentNode.removeChild(this.el_)),this.el_=null),this.player_=null}},e.isDisposed=function(){return!!this.isDisposed_},e.player=function(){return this.player_},e.options=function(r){return r?(this.options_=Mi(this.options_,r),this.options_):this.options_},e.el=function(){return this.el_},e.createEl=function(r,n,s){return ni(r,n,s)},e.localize=function(r,n,s){s===void 0&&(s=r);var a=this.player_.language&&this.player_.language(),o=this.player_.languages&&this.player_.languages(),l=o&&o[a],u=a&&a.split("-")[0],c=o&&o[u],h=s;return l&&l[r]?h=l[r]:c&&c[r]&&(h=c[r]),n&&(h=h.replace(/\{(\d+)\}/g,function(m,g){var y=n[g-1],_=y;return typeof y>"u"&&(_=m),_})),h},e.handleLanguagechange=function(){},e.contentEl=function(){return this.contentEl_||this.el_},e.id=function(){return this.id_},e.name=function(){return this.name_},e.children=function(){return this.children_},e.getChildById=function(r){return this.childIndex_[r]},e.getChild=function(r){if(r)return this.childNameIndex_[r]},e.getDescendant=function(){for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];n=n.reduce(function(l,u){return l.concat(u)},[]);for(var a=this,o=0;o<n.length;o++)if(a=a.getChild(n[o]),!a||!a.getChild)return;return a},e.addChild=function(r,n,s){n===void 0&&(n={}),s===void 0&&(s=this.children_.length);var a,o;if(typeof r=="string"){o=fn(r);var l=n.componentClass||o;n.name=o;var u=i.getComponent(l);if(!u)throw new Error("Component "+l+" does not exist");if(typeof u!="function")return null;a=new u(this.player_||this,n)}else a=r;if(a.parentComponent_&&a.parentComponent_.removeChild(a),this.children_.splice(s,0,a),a.parentComponent_=this,typeof a.id=="function"&&(this.childIndex_[a.id()]=a),o=o||a.name&&fn(a.name()),o&&(this.childNameIndex_[o]=a,this.childNameIndex_[jy(o)]=a),typeof a.el=="function"&&a.el()){var c=null;this.children_[s+1]&&(this.children_[s+1].el_?c=this.children_[s+1].el_:zp(this.children_[s+1])&&(c=this.children_[s+1])),this.contentEl().insertBefore(a.el(),c)}return a},e.removeChild=function(r){if(typeof r=="string"&&(r=this.getChild(r)),!(!r||!this.children_)){for(var n=!1,s=this.children_.length-1;s>=0;s--)if(this.children_[s]===r){n=!0,this.children_.splice(s,1);break}if(n){r.parentComponent_=null,this.childIndex_[r.id()]=null,this.childNameIndex_[fn(r.name())]=null,this.childNameIndex_[jy(r.name())]=null;var a=r.el();a&&a.parentNode===this.contentEl()&&this.contentEl().removeChild(r.el())}}},e.initChildren=function(){var r=this,n=this.options_.children;if(n){var s=this.options_,a=function(c){var h=c.name,m=c.opts;if(s[h]!==void 0&&(m=s[h]),m!==!1){m===!0&&(m={}),m.playerOptions=r.options_.playerOptions;var g=r.addChild(h,m);g&&(r[h]=g)}},o,l=i.getComponent("Tech");Array.isArray(n)?o=n:o=Object.keys(n),o.concat(Object.keys(this.options_).filter(function(u){return!o.some(function(c){return typeof c=="string"?u===c:u===c.name})})).map(function(u){var c,h;return typeof u=="string"?(c=u,h=n[c]||r.options_[c]||{}):(c=u.name,h=u),{name:c,opts:h}}).filter(function(u){var c=i.getComponent(u.opts.componentClass||fn(u.name));return c&&!l.isTech(c)}).forEach(a)}},e.buildCSSClass=function(){return""},e.ready=function(r,n){if(n===void 0&&(n=!1),!!r){if(!this.isReady_){this.readyQueue_=this.readyQueue_||[],this.readyQueue_.push(r);return}n?r.call(this):this.setTimeout(r,1)}},e.triggerReady=function(){this.isReady_=!0,this.setTimeout(function(){var r=this.readyQueue_;this.readyQueue_=[],r&&r.length>0&&r.forEach(function(n){n.call(this)},this),this.trigger("ready")},1)},e.$=function(r,n){return md(r,n||this.contentEl())},e.$$=function(r,n){return rU(r,n||this.contentEl())},e.hasClass=function(r){return xh(this.el_,r)},e.addClass=function(r){nc(this.el_,r)},e.removeClass=function(r){dg(this.el_,r)},e.toggleClass=function(r,n){K6(this.el_,r,n)},e.show=function(){this.removeClass("vjs-hidden")},e.hide=function(){this.addClass("vjs-hidden")},e.lockShowing=function(){this.addClass("vjs-lock-showing")},e.unlockShowing=function(){this.removeClass("vjs-lock-showing")},e.getAttribute=function(r){return Y6(this.el_,r)},e.setAttribute=function(r,n){xp(this.el_,r,n)},e.removeAttribute=function(r){TT(this.el_,r)},e.width=function(r,n){return this.dimension("width",r,n)},e.height=function(r,n){return this.dimension("height",r,n)},e.dimensions=function(r,n){this.width(r,!0),this.height(n)},e.dimension=function(r,n,s){if(n!==void 0){(n===null||n!==n)&&(n=0),(""+n).indexOf("%")!==-1||(""+n).indexOf("px")!==-1?this.el_.style[r]=n:n==="auto"?this.el_.style[r]="":this.el_.style[r]=n+"px",s||this.trigger("componentresize");return}if(!this.el_)return 0;var a=this.el_.style[r],o=a.indexOf("px");return parseInt(o!==-1?a.slice(0,o):this.el_["offset"+fn(r)],10)},e.currentDimension=function(r){var n=0;if(r!=="width"&&r!=="height")throw new Error("currentDimension only accepts width or height value");if(n=M0(this.el_,r),n=parseFloat(n),n===0||isNaN(n)){var s="offset"+fn(r);n=this.el_[s]}return n},e.currentDimensions=function(){return{width:this.currentDimension("width"),height:this.currentDimension("height")}},e.currentWidth=function(){return this.currentDimension("width")},e.currentHeight=function(){return this.currentDimension("height")},e.focus=function(){this.el_.focus()},e.blur=function(){this.el_.blur()},e.handleKeyDown=function(r){this.player_&&(Ar.isEventKey(r,"Tab")||r.stopPropagation(),this.player_.handleKeyDown(r))},e.handleKeyPress=function(r){this.handleKeyDown(r)},e.emitTapEvents=function(){var r=0,n=null,s=10,a=200,o;this.on("touchstart",function(u){u.touches.length===1&&(n={pageX:u.touches[0].pageX,pageY:u.touches[0].pageY},r=X.performance.now(),o=!0)}),this.on("touchmove",function(u){if(u.touches.length>1)o=!1;else if(n){var c=u.touches[0].pageX-n.pageX,h=u.touches[0].pageY-n.pageY,m=Math.sqrt(c*c+h*h);m>s&&(o=!1)}});var l=function(){o=!1};this.on("touchleave",l),this.on("touchcancel",l),this.on("touchend",function(u){if(n=null,o===!0){var c=X.performance.now()-r;c<a&&(u.preventDefault(),this.trigger("tap"))}})},e.enableTouchActivity=function(){if(!(!this.player()||!this.player().reportUserActivity)){var r=Fi(this.player(),this.player().reportUserActivity),n;this.on("touchstart",function(){r(),this.clearInterval(n),n=this.setInterval(r,250)});var s=function(o){r(),this.clearInterval(n)};this.on("touchmove",r),this.on("touchend",s),this.on("touchcancel",s)}},e.setTimeout=function(r,n){var s=this,a;return r=Fi(this,r),this.clearTimersOnDispose_(),a=X.setTimeout(function(){s.setTimeoutIds_.has(a)&&s.setTimeoutIds_.delete(a),r()},n),this.setTimeoutIds_.add(a),a},e.clearTimeout=function(r){return this.setTimeoutIds_.has(r)&&(this.setTimeoutIds_.delete(r),X.clearTimeout(r)),r},e.setInterval=function(r,n){r=Fi(this,r),this.clearTimersOnDispose_();var s=X.setInterval(r,n);return this.setIntervalIds_.add(s),s},e.clearInterval=function(r){return this.setIntervalIds_.has(r)&&(this.setIntervalIds_.delete(r),X.clearInterval(r)),r},e.requestAnimationFrame=function(r){var n=this;if(!this.supportsRaf_)return this.setTimeout(r,1e3/60);this.clearTimersOnDispose_();var s;return r=Fi(this,r),s=X.requestAnimationFrame(function(){n.rafIds_.has(s)&&n.rafIds_.delete(s),r()}),this.rafIds_.add(s),s},e.requestNamedAnimationFrame=function(r,n){var s=this;if(!this.namedRafs_.has(r)){this.clearTimersOnDispose_(),n=Fi(this,n);var a=this.requestAnimationFrame(function(){n(),s.namedRafs_.has(r)&&s.namedRafs_.delete(r)});return this.namedRafs_.set(r,a),r}},e.cancelNamedAnimationFrame=function(r){this.namedRafs_.has(r)&&(this.cancelAnimationFrame(this.namedRafs_.get(r)),this.namedRafs_.delete(r))},e.cancelAnimationFrame=function(r){return this.supportsRaf_?(this.rafIds_.has(r)&&(this.rafIds_.delete(r),X.cancelAnimationFrame(r)),r):this.clearTimeout(r)},e.clearTimersOnDispose_=function(){var r=this;this.clearingTimersOnDispose_||(this.clearingTimersOnDispose_=!0,this.one("dispose",function(){[["namedRafs_","cancelNamedAnimationFrame"],["rafIds_","cancelAnimationFrame"],["setTimeoutIds_","clearTimeout"],["setIntervalIds_","clearInterval"]].forEach(function(n){var s=n[0],a=n[1];r[s].forEach(function(o,l){return r[a](l)})}),r.clearingTimersOnDispose_=!1}))},i.registerComponent=function(r,n){if(typeof r!="string"||!r)throw new Error('Illegal component name, "'+r+'"; must be a non-empty string.');var s=i.getComponent("Tech"),a=s&&s.isTech(n),o=i===n||i.prototype.isPrototypeOf(n.prototype);if(a||!o){var l;throw a?l="techs must be registered using Tech.registerTech()":l="must be a Component subclass",new Error('Illegal component, "'+r+'"; '+l+".")}r=fn(r),i.components_||(i.components_={});var u=i.getComponent("Player");if(r==="Player"&&u&&u.players){var c=u.players,h=Object.keys(c);if(c&&h.length>0&&h.map(function(m){return c[m]}).every(Boolean))throw new Error("Can not register Player component after player has been created.")}return i.components_[r]=n,i.components_[jy(r)]=n,n},i.getComponent=function(r){if(!(!r||!i.components_))return i.components_[r]},i})();xt.prototype.supportsRaf_=typeof X.requestAnimationFrame=="function"&&typeof X.cancelAnimationFrame=="function";xt.registerComponent("Component",xt);function Rhe(i,e,t){if(typeof e!="number"||e<0||e>t)throw new Error("Failed to execute '"+i+"' on 'TimeRanges': The index provided ("+e+") is non-numeric or out of bounds (0-"+t+").")}function A4(i,e,t,r){return Rhe(i,r,t.length-1),t[r][e]}function y1(i){var e;return i===void 0||i.length===0?e={length:0,start:function(){throw new Error("This TimeRanges object is empty")},end:function(){throw new Error("This TimeRanges object is empty")}}:e={length:i.length,start:A4.bind(null,"start",0,i),end:A4.bind(null,"end",1,i)},X.Symbol&&X.Symbol.iterator&&(e[X.Symbol.iterator]=function(){return(i||[]).values()}),e}function Th(i,e){return Array.isArray(i)?y1(i):i===void 0||e===void 0?y1():y1([[i,e]])}function hU(i,e){var t=0,r,n;if(!e)return 0;(!i||!i.length)&&(i=Th(0,0));for(var s=0;s<i.length;s++)r=i.start(s),n=i.end(s),n>e&&(n=e),t+=n-r;return t/e}function Zs(i){if(i instanceof Zs)return i;typeof i=="number"?this.code=i:typeof i=="string"?this.message=i:oc(i)&&(typeof i.code=="number"&&(this.code=i.code),rn(this,i)),this.message||(this.message=Zs.defaultMessages[this.code]||"")}Zs.prototype.code=0;Zs.prototype.message="";Zs.prototype.status=null;Zs.errorTypes=["MEDIA_ERR_CUSTOM","MEDIA_ERR_ABORTED","MEDIA_ERR_NETWORK","MEDIA_ERR_DECODE","MEDIA_ERR_SRC_NOT_SUPPORTED","MEDIA_ERR_ENCRYPTED"];Zs.defaultMessages={1:"You aborted the media playback",2:"A network error caused the media download to fail part-way.",3:"The media playback was aborted due to a corruption problem or because the media used features your browser did not support.",4:"The media could not be loaded, either because the server or network failed or because the format is not supported.",5:"The media is encrypted and we do not have the keys to decrypt it."};for(var vf=0;vf<Zs.errorTypes.length;vf++)Zs[Zs.errorTypes[vf]]=vf,Zs.prototype[Zs.errorTypes[vf]]=vf;function f0(i){return i!=null&&typeof i.then=="function"}function iu(i){f0(i)&&i.then(null,function(e){})}var pE=function(e){var t=["kind","label","language","id","inBandMetadataTrackDispatchType","mode","src"].reduce(function(r,n,s){return e[n]&&(r[n]=e[n]),r},{cues:e.cues&&Array.prototype.map.call(e.cues,function(r){return{startTime:r.startTime,endTime:r.endTime,text:r.text,id:r.id}})});return t},Lhe=function(e){var t=e.$$("track"),r=Array.prototype.map.call(t,function(s){return s.track}),n=Array.prototype.map.call(t,function(s){var a=pE(s.track);return s.src&&(a.src=s.src),a});return n.concat(Array.prototype.filter.call(e.textTracks(),function(s){return r.indexOf(s)===-1}).map(pE))},Ohe=function(e,t){return e.forEach(function(r){var n=t.addRemoteTextTrack(r).track;!r.src&&r.cues&&r.cues.forEach(function(s){return n.addCue(s)})}),t.textTracks()},I4={textTracksToJson:Lhe,jsonToTextTracks:Ohe,trackToJson_:pE},_1="vjs-modal-dialog",Vp=(function(i){Ft(e,i);function e(r,n){var s;return s=i.call(this,r,n)||this,s.handleKeyDown_=function(a){return s.handleKeyDown(a)},s.close_=function(a){return s.close(a)},s.opened_=s.hasBeenOpened_=s.hasBeenFilled_=!1,s.closeable(!s.options_.uncloseable),s.content(s.options_.content),s.contentEl_=ni("div",{className:_1+"-content"},{role:"document"}),s.descEl_=ni("p",{className:_1+"-description vjs-control-text",id:s.el().getAttribute("aria-describedby")}),Fh(s.descEl_,s.description()),s.el_.appendChild(s.descEl_),s.el_.appendChild(s.contentEl_),s}var t=e.prototype;return t.createEl=function(){return i.prototype.createEl.call(this,"div",{className:this.buildCSSClass(),tabIndex:-1},{"aria-describedby":this.id()+"_description","aria-hidden":"true","aria-label":this.label(),role:"dialog"})},t.dispose=function(){this.contentEl_=null,this.descEl_=null,this.previouslyActiveEl_=null,i.prototype.dispose.call(this)},t.buildCSSClass=function(){return _1+" vjs-hidden "+i.prototype.buildCSSClass.call(this)},t.label=function(){return this.localize(this.options_.label||"Modal Window")},t.description=function(){var n=this.options_.description||this.localize("This is a modal window.");return this.closeable()&&(n+=" "+this.localize("This modal can be closed by pressing the Escape key or activating the close button.")),n},t.open=function(){if(!this.opened_){var n=this.player();this.trigger("beforemodalopen"),this.opened_=!0,(this.options_.fillAlways||!this.hasBeenOpened_&&!this.hasBeenFilled_)&&this.fill(),this.wasPlaying_=!n.paused(),this.options_.pauseOnOpen&&this.wasPlaying_&&n.pause(),this.on("keydown",this.handleKeyDown_),this.hadControls_=n.controls(),n.controls(!1),this.show(),this.conditionalFocus_(),this.el().setAttribute("aria-hidden","false"),this.trigger("modalopen"),this.hasBeenOpened_=!0}},t.opened=function(n){return typeof n=="boolean"&&this[n?"open":"close"](),this.opened_},t.close=function(){if(this.opened_){var n=this.player();this.trigger("beforemodalclose"),this.opened_=!1,this.wasPlaying_&&this.options_.pauseOnOpen&&n.play(),this.off("keydown",this.handleKeyDown_),this.hadControls_&&n.controls(!0),this.hide(),this.el().setAttribute("aria-hidden","true"),this.trigger("modalclose"),this.conditionalBlur_(),this.options_.temporary&&this.dispose()}},t.closeable=function(n){if(typeof n=="boolean"){var s=this.closeable_=!!n,a=this.getChild("closeButton");if(s&&!a){var o=this.contentEl_;this.contentEl_=this.el_,a=this.addChild("closeButton",{controlText:"Close Modal Dialog"}),this.contentEl_=o,this.on(a,"close",this.close_)}!s&&a&&(this.off(a,"close",this.close_),this.removeChild(a),a.dispose())}return this.closeable_},t.fill=function(){this.fillWith(this.content())},t.fillWith=function(n){var s=this.contentEl(),a=s.parentNode,o=s.nextSibling;this.trigger("beforemodalfill"),this.hasBeenFilled_=!0,a.removeChild(s),this.empty(),tU(s,n),this.trigger("modalfill"),o?a.insertBefore(s,o):a.appendChild(s);var l=this.getChild("closeButton");l&&a.appendChild(l.el_)},t.empty=function(){this.trigger("beforemodalempty"),z2(this.contentEl()),this.trigger("modalempty")},t.content=function(n){return typeof n<"u"&&(this.content_=n),this.content_},t.conditionalFocus_=function(){var n=Me.activeElement,s=this.player_.el_;this.previouslyActiveEl_=null,(s.contains(n)||s===n)&&(this.previouslyActiveEl_=n,this.focus())},t.conditionalBlur_=function(){this.previouslyActiveEl_&&(this.previouslyActiveEl_.focus(),this.previouslyActiveEl_=null)},t.handleKeyDown=function(n){if(n.stopPropagation(),Ar.isEventKey(n,"Escape")&&this.closeable()){n.preventDefault(),this.close();return}if(Ar.isEventKey(n,"Tab")){for(var s=this.focusableEls_(),a=this.el_.querySelector(":focus"),o,l=0;l<s.length;l++)if(a===s[l]){o=l;break}Me.activeElement===this.el_&&(o=0),n.shiftKey&&o===0?(s[s.length-1].focus(),n.preventDefault()):!n.shiftKey&&o===s.length-1&&(s[0].focus(),n.preventDefault())}},t.focusableEls_=function(){var n=this.el_.querySelectorAll("*");return Array.prototype.filter.call(n,function(s){return(s instanceof X.HTMLAnchorElement||s instanceof X.HTMLAreaElement)&&s.hasAttribute("href")||(s instanceof X.HTMLInputElement||s instanceof X.HTMLSelectElement||s instanceof X.HTMLTextAreaElement||s instanceof X.HTMLButtonElement)&&!s.hasAttribute("disabled")||s instanceof X.HTMLIFrameElement||s instanceof X.HTMLObjectElement||s instanceof X.HTMLEmbedElement||s.hasAttribute("tabindex")&&s.getAttribute("tabindex")!==-1||s.hasAttribute("contenteditable")})},e})(xt);Vp.prototype.options_={pauseOnOpen:!0,temporary:!0};xt.registerComponent("ModalDialog",Vp);var bp=(function(i){Ft(e,i);function e(r){var n;r===void 0&&(r=[]),n=i.call(this)||this,n.tracks_=[],Object.defineProperty(je(n),"length",{get:function(){return this.tracks_.length}});for(var s=0;s<r.length;s++)n.addTrack(r[s]);return n}var t=e.prototype;return t.addTrack=function(n){var s=this,a=this.tracks_.length;""+a in this||Object.defineProperty(this,a,{get:function(){return this.tracks_[a]}}),this.tracks_.indexOf(n)===-1&&(this.tracks_.push(n),this.trigger({track:n,type:"addtrack",target:this})),n.labelchange_=function(){s.trigger({track:n,type:"labelchange",target:s})},sc(n)&&n.addEventListener("labelchange",n.labelchange_)},t.removeTrack=function(n){for(var s,a=0,o=this.length;a<o;a++)if(this[a]===n){s=this[a],s.off&&s.off(),this.tracks_.splice(a,1);break}s&&this.trigger({track:s,type:"removetrack",target:this})},t.getTrackById=function(n){for(var s=null,a=0,o=this.length;a<o;a++){var l=this[a];if(l.id===n){s=l;break}}return s},e})(Yn);bp.prototype.allowedEvents_={change:"change",addtrack:"addtrack",removetrack:"removetrack",labelchange:"labelchange"};for(var Mhe in bp.prototype.allowedEvents_)bp.prototype["on"+Mhe]=null;var x1=function(e,t){for(var r=0;r<e.length;r++)!Object.keys(e[r]).length||t.id===e[r].id||(e[r].enabled=!1)},Fhe=(function(i){Ft(e,i);function e(r){var n;r===void 0&&(r=[]);for(var s=r.length-1;s>=0;s--)if(r[s].enabled){x1(r,r[s]);break}return n=i.call(this,r)||this,n.changing_=!1,n}var t=e.prototype;return t.addTrack=function(n){var s=this;n.enabled&&x1(this,n),i.prototype.addTrack.call(this,n),n.addEventListener&&(n.enabledChange_=function(){s.changing_||(s.changing_=!0,x1(s,n),s.changing_=!1,s.trigger("change"))},n.addEventListener("enabledchange",n.enabledChange_))},t.removeTrack=function(n){i.prototype.removeTrack.call(this,n),n.removeEventListener&&n.enabledChange_&&(n.removeEventListener("enabledchange",n.enabledChange_),n.enabledChange_=null)},e})(bp),T1=function(e,t){for(var r=0;r<e.length;r++)!Object.keys(e[r]).length||t.id===e[r].id||(e[r].selected=!1)},Bhe=(function(i){Ft(e,i);function e(r){var n;r===void 0&&(r=[]);for(var s=r.length-1;s>=0;s--)if(r[s].selected){T1(r,r[s]);break}return n=i.call(this,r)||this,n.changing_=!1,Object.defineProperty(je(n),"selectedIndex",{get:function(){for(var o=0;o<this.length;o++)if(this[o].selected)return o;return-1},set:function(){}}),n}var t=e.prototype;return t.addTrack=function(n){var s=this;n.selected&&T1(this,n),i.prototype.addTrack.call(this,n),n.addEventListener&&(n.selectedChange_=function(){s.changing_||(s.changing_=!0,T1(s,n),s.changing_=!1,s.trigger("change"))},n.addEventListener("selectedchange",n.selectedChange_))},t.removeTrack=function(n){i.prototype.removeTrack.call(this,n),n.removeEventListener&&n.selectedChange_&&(n.removeEventListener("selectedchange",n.selectedChange_),n.selectedChange_=null)},e})(bp),fU=(function(i){Ft(e,i);function e(){return i.apply(this,arguments)||this}var t=e.prototype;return t.addTrack=function(n){var s=this;i.prototype.addTrack.call(this,n),this.queueChange_||(this.queueChange_=function(){return s.queueTrigger("change")}),this.triggerSelectedlanguagechange||(this.triggerSelectedlanguagechange_=function(){return s.trigger("selectedlanguagechange")}),n.addEventListener("modechange",this.queueChange_);var a=["metadata","chapters"];a.indexOf(n.kind)===-1&&n.addEventListener("modechange",this.triggerSelectedlanguagechange_)},t.removeTrack=function(n){i.prototype.removeTrack.call(this,n),n.removeEventListener&&(this.queueChange_&&n.removeEventListener("modechange",this.queueChange_),this.selectedlanguagechange_&&n.removeEventListener("modechange",this.triggerSelectedlanguagechange_))},e})(bp),Nhe=(function(){function i(t){t===void 0&&(t=[]),this.trackElements_=[],Object.defineProperty(this,"length",{get:function(){return this.trackElements_.length}});for(var r=0,n=t.length;r<n;r++)this.addTrackElement_(t[r])}var e=i.prototype;return e.addTrackElement_=function(r){var n=this.trackElements_.length;""+n in this||Object.defineProperty(this,n,{get:function(){return this.trackElements_[n]}}),this.trackElements_.indexOf(r)===-1&&this.trackElements_.push(r)},e.getTrackElementByTrack_=function(r){for(var n,s=0,a=this.trackElements_.length;s<a;s++)if(r===this.trackElements_[s].track){n=this.trackElements_[s];break}return n},e.removeTrackElement_=function(r){for(var n=0,s=this.trackElements_.length;n<s;n++)if(r===this.trackElements_[n]){this.trackElements_[n].track&&typeof this.trackElements_[n].track.off=="function"&&this.trackElements_[n].track.off(),typeof this.trackElements_[n].off=="function"&&this.trackElements_[n].off(),this.trackElements_.splice(n,1);break}},i})(),D4=(function(){function i(t){i.prototype.setCues_.call(this,t),Object.defineProperty(this,"length",{get:function(){return this.length_}})}var e=i.prototype;return e.setCues_=function(r){var n=this.length||0,s=0,a=r.length;this.cues_=r,this.length_=r.length;var o=function(u){""+u in this||Object.defineProperty(this,""+u,{get:function(){return this.cues_[u]}})};if(n<a)for(s=n;s<a;s++)o.call(this,s)},e.getCueById=function(r){for(var n=null,s=0,a=this.length;s<a;s++){var o=this[s];if(o.id===r){n=o;break}}return n},i})(),Uhe={alternative:"alternative",captions:"captions",main:"main",sign:"sign",subtitles:"subtitles",commentary:"commentary"},$he={alternative:"alternative",descriptions:"descriptions",main:"main","main-desc":"main-desc",translation:"translation",commentary:"commentary"},jhe={subtitles:"subtitles",captions:"captions",descriptions:"descriptions",chapters:"chapters",metadata:"metadata"},P4={disabled:"disabled",hidden:"hidden",showing:"showing"},W2=(function(i){Ft(e,i);function e(t){var r;t===void 0&&(t={}),r=i.call(this)||this;var n={id:t.id||"vjs_track_"+fc(),kind:t.kind||"",language:t.language||""},s=t.label||"",a=function(u){Object.defineProperty(je(r),u,{get:function(){return n[u]},set:function(){}})};for(var o in n)a(o);return Object.defineProperty(je(r),"label",{get:function(){return s},set:function(u){u!==s&&(s=u,this.trigger("labelchange"))}}),r}return e})(Yn),G2=function(e){var t=["protocol","hostname","port","pathname","search","hash","host"],r=Me.createElement("a");r.href=e;for(var n={},s=0;s<t.length;s++)n[t[s]]=r[t[s]];return n.protocol==="http:"&&(n.host=n.host.replace(/:80$/,"")),n.protocol==="https:"&&(n.host=n.host.replace(/:443$/,"")),n.protocol||(n.protocol=X.location.protocol),n.host||(n.host=X.location.host),n},pU=function(e){if(!e.match(/^https?:\/\//)){var t=Me.createElement("a");t.href=e,e=t.href}return e},K2=function(e){if(typeof e=="string"){var t=/^(\/?)([\s\S]*?)((?:\.{1,2}|[^\/]+?)(\.([^\.\/\?]+)))(?:[\/]*|[\?].*)$/,r=t.exec(e);if(r)return r.pop().toLowerCase()}return""},wT=function(e,t){t===void 0&&(t=X.location);var r=G2(e),n=r.protocol===":"?t.protocol:r.protocol,s=n+r.host!==t.protocol+t.host;return s},zhe=Object.freeze({__proto__:null,parseUrl:G2,getAbsoluteURL:pU,getFileExtension:K2,isCrossOrigin:wT}),R4=function(e,t){var r=new X.WebVTT.Parser(X,X.vttjs,X.WebVTT.StringDecoder()),n=[];r.oncue=function(s){t.addCue(s)},r.onparsingerror=function(s){n.push(s)},r.onflush=function(){t.trigger({type:"loadeddata",target:t})},r.parse(e),n.length>0&&(X.console&&X.console.groupCollapsed&&X.console.groupCollapsed("Text Track parsing errors for "+t.src),n.forEach(function(s){return Nr.error(s)}),X.console&&X.console.groupEnd&&X.console.groupEnd()),r.flush()},L4=function(e,t){var r={uri:e},n=wT(e);n&&(r.cors=n);var s=t.tech_.crossOrigin()==="use-credentials";s&&(r.withCredentials=s),_6(r,Fi(this,function(a,o,l){if(a)return Nr.error(a,o);t.loaded_=!0,typeof X.WebVTT!="function"?t.tech_&&t.tech_.any(["vttjsloaded","vttjserror"],function(u){if(u.type==="vttjserror"){Nr.error("vttjs failed to load, stopping trying to process "+t.src);return}return R4(l,t)}):R4(l,t)}))},hg=(function(i){Ft(e,i);function e(r){var n;if(r===void 0&&(r={}),!r.tech)throw new Error("A tech was not provided.");var s=Mi(r,{kind:jhe[r.kind]||"subtitles",language:r.language||r.srclang||""}),a=P4[s.mode]||"disabled",o=s.default;(s.kind==="metadata"||s.kind==="chapters")&&(a="hidden"),n=i.call(this,s)||this,n.tech_=s.tech,n.cues_=[],n.activeCues_=[],n.preload_=n.tech_.preloadTextTracks!==!1;var l=new D4(n.cues_),u=new D4(n.activeCues_),c=!1;n.timeupdateHandler=Fi(je(n),function(m){if(m===void 0&&(m={}),!this.tech_.isDisposed()){if(!this.tech_.isReady_){m.type!=="timeupdate"&&(this.rvf_=this.tech_.requestVideoFrameCallback(this.timeupdateHandler));return}this.activeCues=this.activeCues,c&&(this.trigger("cuechange"),c=!1),m.type!=="timeupdate"&&(this.rvf_=this.tech_.requestVideoFrameCallback(this.timeupdateHandler))}});var h=function(){n.stopTracking()};return n.tech_.one("dispose",h),a!=="disabled"&&n.startTracking(),Object.defineProperties(je(n),{default:{get:function(){return o},set:function(){}},mode:{get:function(){return a},set:function(g){P4[g]&&a!==g&&(a=g,!this.preload_&&a!=="disabled"&&this.cues.length===0&&L4(this.src,this),this.stopTracking(),a!=="disabled"&&this.startTracking(),this.trigger("modechange"))}},cues:{get:function(){return this.loaded_?l:null},set:function(){}},activeCues:{get:function(){if(!this.loaded_)return null;if(this.cues.length===0)return u;for(var g=this.tech_.currentTime(),y=[],_=0,T=this.cues.length;_<T;_++){var E=this.cues[_];(E.startTime<=g&&E.endTime>=g||E.startTime===E.endTime&&E.startTime<=g&&E.startTime+.5>=g)&&y.push(E)}if(c=!1,y.length!==this.activeCues_.length)c=!0;else for(var w=0;w<y.length;w++)this.activeCues_.indexOf(y[w])===-1&&(c=!0);return this.activeCues_=y,u.setCues_(this.activeCues_),u},set:function(){}}}),s.src?(n.src=s.src,n.preload_||(n.loaded_=!0),(n.preload_||s.kind!=="subtitles"&&s.kind!=="captions")&&L4(n.src,je(n))):n.loaded_=!0,n}var t=e.prototype;return t.startTracking=function(){this.rvf_=this.tech_.requestVideoFrameCallback(this.timeupdateHandler),this.tech_.on("timeupdate",this.timeupdateHandler)},t.stopTracking=function(){this.rvf_&&(this.tech_.cancelVideoFrameCallback(this.rvf_),this.rvf_=void 0),this.tech_.off("timeupdate",this.timeupdateHandler)},t.addCue=function(n){var s=n;if(s.constructor&&s.constructor.name!=="VTTCue"){s=new X.vttjs.VTTCue(n.startTime,n.endTime,n.text);for(var a in n)a in s||(s[a]=n[a]);s.id=n.id,s.originalCue_=n}for(var o=this.tech_.textTracks(),l=0;l<o.length;l++)o[l]!==this&&o[l].removeCue(s);this.cues_.push(s),this.cues.setCues_(this.cues_)},t.removeCue=function(n){for(var s=this.cues_.length;s--;){var a=this.cues_[s];if(a===n||a.originalCue_&&a.originalCue_===n){this.cues_.splice(s,1),this.cues.setCues_(this.cues_);break}}},e})(W2);hg.prototype.allowedEvents_={cuechange:"cuechange"};var mU=(function(i){Ft(e,i);function e(t){var r;t===void 0&&(t={});var n=Mi(t,{kind:$he[t.kind]||""});r=i.call(this,n)||this;var s=!1;return Object.defineProperty(je(r),"enabled",{get:function(){return s},set:function(o){typeof o!="boolean"||o===s||(s=o,this.trigger("enabledchange"))}}),n.enabled&&(r.enabled=n.enabled),r.loaded_=!0,r}return e})(W2),gU=(function(i){Ft(e,i);function e(t){var r;t===void 0&&(t={});var n=Mi(t,{kind:Uhe[t.kind]||""});r=i.call(this,n)||this;var s=!1;return Object.defineProperty(je(r),"selected",{get:function(){return s},set:function(o){typeof o!="boolean"||o===s||(s=o,this.trigger("selectedchange"))}}),n.selected&&(r.selected=n.selected),r}return e})(W2),vU=0,Hhe=1,yU=2,Vhe=3,qp=(function(i){Ft(e,i);function e(t){var r;t===void 0&&(t={}),r=i.call(this)||this;var n,s=new hg(t);return r.kind=s.kind,r.src=s.src,r.srclang=s.language,r.label=s.label,r.default=s.default,Object.defineProperties(je(r),{readyState:{get:function(){return n}},track:{get:function(){return s}}}),n=vU,s.addEventListener("loadeddata",function(){n=yU,r.trigger({type:"load",target:je(r)})}),r}return e})(Yn);qp.prototype.allowedEvents_={load:"load"};qp.NONE=vU;qp.LOADING=Hhe;qp.LOADED=yU;qp.ERROR=Vhe;var Ro={audio:{ListClass:Fhe,TrackClass:mU,capitalName:"Audio"},video:{ListClass:Bhe,TrackClass:gU,capitalName:"Video"},text:{ListClass:fU,TrackClass:hg,capitalName:"Text"}};Object.keys(Ro).forEach(function(i){Ro[i].getterName=i+"Tracks",Ro[i].privateName=i+"Tracks_"});var Sp={remoteText:{ListClass:fU,TrackClass:hg,capitalName:"RemoteText",getterName:"remoteTextTracks",privateName:"remoteTextTracks_"},remoteTextEl:{ListClass:Nhe,TrackClass:qp,capitalName:"RemoteTextTrackEls",getterName:"remoteTextTrackEls",privateName:"remoteTextTrackEls_"}},Xs=Jt({},Ro,Sp);Sp.names=Object.keys(Sp);Ro.names=Object.keys(Ro);Xs.names=[].concat(Sp.names).concat(Ro.names);function qhe(i,e,t,r,n){n===void 0&&(n={});var s=i.textTracks();n.kind=e,t&&(n.label=t),r&&(n.language=r),n.tech=i;var a=new Xs.text.TrackClass(n);return s.addTrack(a),a}var Di=(function(i){Ft(e,i);function e(r,n){var s;return r===void 0&&(r={}),n===void 0&&(n=function(){}),r.reportTouchActivity=!1,s=i.call(this,null,r,n)||this,s.onDurationChange_=function(a){return s.onDurationChange(a)},s.trackProgress_=function(a){return s.trackProgress(a)},s.trackCurrentTime_=function(a){return s.trackCurrentTime(a)},s.stopTrackingCurrentTime_=function(a){return s.stopTrackingCurrentTime(a)},s.disposeSourceHandler_=function(a){return s.disposeSourceHandler(a)},s.queuedHanders_=new Set,s.hasStarted_=!1,s.on("playing",function(){this.hasStarted_=!0}),s.on("loadstart",function(){this.hasStarted_=!1}),Xs.names.forEach(function(a){var o=Xs[a];r&&r[o.getterName]&&(s[o.privateName]=r[o.getterName])}),s.featuresProgressEvents||s.manualProgressOn(),s.featuresTimeupdateEvents||s.manualTimeUpdatesOn(),["Text","Audio","Video"].forEach(function(a){r["native"+a+"Tracks"]===!1&&(s["featuresNative"+a+"Tracks"]=!1)}),r.nativeCaptions===!1||r.nativeTextTracks===!1?s.featuresNativeTextTracks=!1:(r.nativeCaptions===!0||r.nativeTextTracks===!0)&&(s.featuresNativeTextTracks=!0),s.featuresNativeTextTracks||s.emulateTextTracks(),s.preloadTextTracks=r.preloadTextTracks!==!1,s.autoRemoteTextTracks_=new Xs.text.ListClass,s.initTrackListeners(),r.nativeControlsForTouch||s.emitTapEvents(),s.constructor&&(s.name_=s.constructor.name||"Unknown Tech"),s}var t=e.prototype;return t.triggerSourceset=function(n){var s=this;this.isReady_||this.one("ready",function(){return s.setTimeout(function(){return s.triggerSourceset(n)},1)}),this.trigger({src:n,type:"sourceset"})},t.manualProgressOn=function(){this.on("durationchange",this.onDurationChange_),this.manualProgress=!0,this.one("ready",this.trackProgress_)},t.manualProgressOff=function(){this.manualProgress=!1,this.stopTrackingProgress(),this.off("durationchange",this.onDurationChange_)},t.trackProgress=function(n){this.stopTrackingProgress(),this.progressInterval=this.setInterval(Fi(this,function(){var s=this.bufferedPercent();this.bufferedPercent_!==s&&this.trigger("progress"),this.bufferedPercent_=s,s===1&&this.stopTrackingProgress()}),500)},t.onDurationChange=function(n){this.duration_=this.duration()},t.buffered=function(){return Th(0,0)},t.bufferedPercent=function(){return hU(this.buffered(),this.duration_)},t.stopTrackingProgress=function(){this.clearInterval(this.progressInterval)},t.manualTimeUpdatesOn=function(){this.manualTimeUpdates=!0,this.on("play",this.trackCurrentTime_),this.on("pause",this.stopTrackingCurrentTime_)},t.manualTimeUpdatesOff=function(){this.manualTimeUpdates=!1,this.stopTrackingCurrentTime(),this.off("play",this.trackCurrentTime_),this.off("pause",this.stopTrackingCurrentTime_)},t.trackCurrentTime=function(){this.currentTimeInterval&&this.stopTrackingCurrentTime(),this.currentTimeInterval=this.setInterval(function(){this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},250)},t.stopTrackingCurrentTime=function(){this.clearInterval(this.currentTimeInterval),this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},t.dispose=function(){this.clearTracks(Ro.names),this.manualProgress&&this.manualProgressOff(),this.manualTimeUpdates&&this.manualTimeUpdatesOff(),i.prototype.dispose.call(this)},t.clearTracks=function(n){var s=this;n=[].concat(n),n.forEach(function(a){for(var o=s[a+"Tracks"]()||[],l=o.length;l--;){var u=o[l];a==="text"&&s.removeRemoteTextTrack(u),o.removeTrack(u)}})},t.cleanupAutoTextTracks=function(){for(var n=this.autoRemoteTextTracks_||[],s=n.length;s--;){var a=n[s];this.removeRemoteTextTrack(a)}},t.reset=function(){},t.crossOrigin=function(){},t.setCrossOrigin=function(){},t.error=function(n){return n!==void 0&&(this.error_=new Zs(n),this.trigger("error")),this.error_},t.played=function(){return this.hasStarted_?Th(0,0):Th()},t.play=function(){},t.setScrubbing=function(){},t.scrubbing=function(){},t.setCurrentTime=function(){this.manualTimeUpdates&&this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},t.initTrackListeners=function(){var n=this;Ro.names.forEach(function(s){var a=Ro[s],o=function(){n.trigger(s+"trackchange")},l=n[a.getterName]();l.addEventListener("removetrack",o),l.addEventListener("addtrack",o),n.on("dispose",function(){l.removeEventListener("removetrack",o),l.removeEventListener("addtrack",o)})})},t.addWebVttScript_=function(){var n=this;if(!X.WebVTT)if(Me.body.contains(this.el())){if(!this.options_["vtt.js"]&&O0(g_)&&Object.keys(g_).length>0){this.trigger("vttjsloaded");return}var s=Me.createElement("script");s.src=this.options_["vtt.js"]||"https://vjs.zencdn.net/vttjs/0.14.1/vtt.min.js",s.onload=function(){n.trigger("vttjsloaded")},s.onerror=function(){n.trigger("vttjserror")},this.on("dispose",function(){s.onload=null,s.onerror=null}),X.WebVTT=!0,this.el().parentNode.appendChild(s)}else this.ready(this.addWebVttScript_)},t.emulateTextTracks=function(){var n=this,s=this.textTracks(),a=this.remoteTextTracks(),o=function(m){return s.addTrack(m.track)},l=function(m){return s.removeTrack(m.track)};a.on("addtrack",o),a.on("removetrack",l),this.addWebVttScript_();var u=function(){return n.trigger("texttrackchange")},c=function(){u();for(var m=0;m<s.length;m++){var g=s[m];g.removeEventListener("cuechange",u),g.mode==="showing"&&g.addEventListener("cuechange",u)}};c(),s.addEventListener("change",c),s.addEventListener("addtrack",c),s.addEventListener("removetrack",c),this.on("dispose",function(){a.off("addtrack",o),a.off("removetrack",l),s.removeEventListener("change",c),s.removeEventListener("addtrack",c),s.removeEventListener("removetrack",c);for(var h=0;h<s.length;h++){var m=s[h];m.removeEventListener("cuechange",u)}})},t.addTextTrack=function(n,s,a){if(!n)throw new Error("TextTrack kind is required but was not provided");return qhe(this,n,s,a)},t.createRemoteTextTrack=function(n){var s=Mi(n,{tech:this});return new Sp.remoteTextEl.TrackClass(s)},t.addRemoteTextTrack=function(n,s){var a=this;n===void 0&&(n={});var o=this.createRemoteTextTrack(n);return s!==!0&&s!==!1&&(Nr.warn('Calling addRemoteTextTrack without explicitly setting the "manualCleanup" parameter to `true` is deprecated and default to `false` in future version of video.js'),s=!0),this.remoteTextTrackEls().addTrackElement_(o),this.remoteTextTracks().addTrack(o.track),s!==!0&&this.ready(function(){return a.autoRemoteTextTracks_.addTrack(o.track)}),o},t.removeRemoteTextTrack=function(n){var s=this.remoteTextTrackEls().getTrackElementByTrack_(n);this.remoteTextTrackEls().removeTrackElement_(s),this.remoteTextTracks().removeTrack(n),this.autoRemoteTextTracks_.removeTrack(n)},t.getVideoPlaybackQuality=function(){return{}},t.requestPictureInPicture=function(){var n=this.options_.Promise||X.Promise;if(n)return n.reject()},t.disablePictureInPicture=function(){return!0},t.setDisablePictureInPicture=function(){},t.requestVideoFrameCallback=function(n){var s=this,a=fc();return!this.isReady_||this.paused()?(this.queuedHanders_.add(a),this.one("playing",function(){s.queuedHanders_.has(a)&&(s.queuedHanders_.delete(a),n())})):this.requestNamedAnimationFrame(a,n),a},t.cancelVideoFrameCallback=function(n){this.queuedHanders_.has(n)?this.queuedHanders_.delete(n):this.cancelNamedAnimationFrame(n)},t.setPoster=function(){},t.playsinline=function(){},t.setPlaysinline=function(){},t.overrideNativeAudioTracks=function(){},t.overrideNativeVideoTracks=function(){},t.canPlayType=function(){return""},e.canPlayType=function(){return""},e.canPlaySource=function(n,s){return e.canPlayType(n.type)},e.isTech=function(n){return n.prototype instanceof e||n instanceof e||n===e},e.registerTech=function(n,s){if(e.techs_||(e.techs_={}),!e.isTech(s))throw new Error("Tech "+n+" must be a Tech");if(!e.canPlayType)throw new Error("Techs must have a static canPlayType method on them");if(!e.canPlaySource)throw new Error("Techs must have a static canPlaySource method on them");return n=fn(n),e.techs_[n]=s,e.techs_[jy(n)]=s,n!=="Tech"&&e.defaultTechOrder_.push(n),s},e.getTech=function(n){if(n){if(e.techs_&&e.techs_[n])return e.techs_[n];if(n=fn(n),X&&X.videojs&&X.videojs[n])return Nr.warn("The "+n+" tech was added to the videojs object when it should be registered using videojs.registerTech(name, tech)"),X.videojs[n]}},e})(xt);Xs.names.forEach(function(i){var e=Xs[i];Di.prototype[e.getterName]=function(){return this[e.privateName]=this[e.privateName]||new e.ListClass,this[e.privateName]}});Di.prototype.featuresVolumeControl=!0;Di.prototype.featuresMuteControl=!0;Di.prototype.featuresFullscreenResize=!1;Di.prototype.featuresPlaybackRate=!1;Di.prototype.featuresProgressEvents=!1;Di.prototype.featuresSourceset=!1;Di.prototype.featuresTimeupdateEvents=!1;Di.prototype.featuresNativeTextTracks=!1;Di.prototype.featuresVideoFrameCallback=!1;Di.withSourceHandlers=function(i){i.registerSourceHandler=function(t,r){var n=i.sourceHandlers;n||(n=i.sourceHandlers=[]),r===void 0&&(r=n.length),n.splice(r,0,t)},i.canPlayType=function(t){for(var r=i.sourceHandlers||[],n,s=0;s<r.length;s++)if(n=r[s].canPlayType(t),n)return n;return""},i.selectSourceHandler=function(t,r){for(var n=i.sourceHandlers||[],s,a=0;a<n.length;a++)if(s=n[a].canHandleSource(t,r),s)return n[a];return null},i.canPlaySource=function(t,r){var n=i.selectSourceHandler(t,r);return n?n.canHandleSource(t,r):""};var e=["seekable","seeking","duration"];e.forEach(function(t){var r=this[t];typeof r=="function"&&(this[t]=function(){return this.sourceHandler_&&this.sourceHandler_[t]?this.sourceHandler_[t].apply(this.sourceHandler_,arguments):r.apply(this,arguments)})},i.prototype),i.prototype.setSource=function(t){var r=i.selectSourceHandler(t,this.options_);r||(i.nativeSourceHandler?r=i.nativeSourceHandler:Nr.error("No source handler found for the current source.")),this.disposeSourceHandler(),this.off("dispose",this.disposeSourceHandler_),r!==i.nativeSourceHandler&&(this.currentSource_=t),this.sourceHandler_=r.handleSource(t,this,this.options_),this.one("dispose",this.disposeSourceHandler_)},i.prototype.disposeSourceHandler=function(){this.currentSource_&&(this.clearTracks(["audio","video"]),this.currentSource_=null),this.cleanupAutoTextTracks(),this.sourceHandler_&&(this.sourceHandler_.dispose&&this.sourceHandler_.dispose(),this.sourceHandler_=null)}};xt.registerComponent("Tech",Di);Di.registerTech("Tech",Di);Di.defaultTechOrder_=[];var bh={},mE={},X_={};function Whe(i,e){bh[i]=bh[i]||[],bh[i].push(e)}function Ghe(i,e,t){i.setTimeout(function(){return Jd(e,bh[e.type],t,i)},1)}function Khe(i,e){i.forEach(function(t){return t.setTech&&t.setTech(e)})}function Xhe(i,e,t){return i.reduceRight(X2(t),e[t]())}function Yhe(i,e,t,r){return e[t](i.reduce(X2(t),r))}function O4(i,e,t,r){r===void 0&&(r=null);var n="call"+fn(t),s=i.reduce(X2(n),r),a=s===X_,o=a?null:e[t](s);return Zhe(i,t,o,a),o}var Qhe={buffered:1,currentTime:1,duration:1,muted:1,played:1,paused:1,seekable:1,volume:1,ended:1},Jhe={setCurrentTime:1,setMuted:1,setVolume:1},M4={play:1,pause:1};function X2(i){return function(e,t){return e===X_?X_:t[i]?t[i](e):e}}function Zhe(i,e,t,r){for(var n=i.length-1;n>=0;n--){var s=i[n];s[e]&&s[e](r,t)}}function efe(i){mE[i.id()]=null}function tfe(i,e){var t=mE[i.id()],r=null;if(t==null)return r=e(i),mE[i.id()]=[[e,r]],r;for(var n=0;n<t.length;n++){var s=t[n],a=s[0],o=s[1];a===e&&(r=o)}return r===null&&(r=e(i),t.push([e,r])),r}function Jd(i,e,t,r,n,s){i===void 0&&(i={}),e===void 0&&(e=[]),n===void 0&&(n=[]),s===void 0&&(s=!1);var a=e,o=a[0],l=a.slice(1);if(typeof o=="string")Jd(i,bh[o],t,r,n,s);else if(o){var u=tfe(r,o);if(!u.setSource)return n.push(u),Jd(i,l,t,r,n,s);u.setSource(rn({},i),function(c,h){if(c)return Jd(i,l,t,r,n,s);n.push(u),Jd(h,i.type===h.type?l:bh[h.type],t,r,n,s)})}else l.length?Jd(i,l,t,r,n,s):s?t(i,n):Jd(i,bh["*"],t,r,n,!0)}var rfe={opus:"video/ogg",ogv:"video/ogg",mp4:"video/mp4",mov:"video/mp4",m4v:"video/mp4",mkv:"video/x-matroska",m4a:"audio/mp4",mp3:"audio/mpeg",aac:"audio/aac",caf:"audio/x-caf",flac:"audio/flac",oga:"audio/ogg",wav:"audio/wav",m3u8:"application/x-mpegURL",mpd:"application/dash+xml",jpg:"image/jpeg",jpeg:"image/jpeg",gif:"image/gif",png:"image/png",svg:"image/svg+xml",webp:"image/webp"},Y_=function(e){e===void 0&&(e="");var t=K2(e),r=rfe[t.toLowerCase()];return r||""},ife=function(e,t){if(!t)return"";if(e.cache_.source.src===t&&e.cache_.source.type)return e.cache_.source.type;var r=e.cache_.sources.filter(function(o){return o.src===t});if(r.length)return r[0].type;for(var n=e.$$("source"),s=0;s<n.length;s++){var a=n[s];if(a.type&&a.src&&a.src===t)return a.type}return Y_(t)},nfe=function i(e){if(Array.isArray(e)){var t=[];e.forEach(function(r){r=i(r),Array.isArray(r)?t=t.concat(r):oc(r)&&t.push(r)}),e=t}else typeof e=="string"&&e.trim()?e=[F4({src:e})]:oc(e)&&typeof e.src=="string"&&e.src&&e.src.trim()?e=[F4(e)]:e=[];return e};function F4(i){if(!i.type){var e=Y_(i.src);e&&(i.type=e)}return i}var sfe=(function(i){Ft(e,i);function e(t,r,n){var s,a=Mi({createEl:!1},r);if(s=i.call(this,t,a,n)||this,!r.playerOptions.sources||r.playerOptions.sources.length===0)for(var o=0,l=r.playerOptions.techOrder;o<l.length;o++){var u=fn(l[o]),c=Di.getTech(u);if(u||(c=xt.getComponent(u)),c&&c.isSupported()){t.loadTech_(u);break}}else t.src(r.playerOptions.sources);return s}return e})(xt);xt.registerComponent("MediaLoader",sfe);var kT=(function(i){Ft(e,i);function e(r,n){var s;return s=i.call(this,r,n)||this,s.options_.controlText&&s.controlText(s.options_.controlText),s.handleMouseOver_=function(a){return s.handleMouseOver(a)},s.handleMouseOut_=function(a){return s.handleMouseOut(a)},s.handleClick_=function(a){return s.handleClick(a)},s.handleKeyDown_=function(a){return s.handleKeyDown(a)},s.emitTapEvents(),s.enable(),s}var t=e.prototype;return t.createEl=function(n,s,a){n===void 0&&(n="div"),s===void 0&&(s={}),a===void 0&&(a={}),s=rn({className:this.buildCSSClass(),tabIndex:0},s),n==="button"&&Nr.error("Creating a ClickableComponent with an HTML element of "+n+" is not supported; use a Button instead."),a=rn({role:"button"},a),this.tabIndex_=s.tabIndex;var o=ni(n,s,a);return o.appendChild(ni("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),this.createControlTextEl(o),o},t.dispose=function(){this.controlTextEl_=null,i.prototype.dispose.call(this)},t.createControlTextEl=function(n){return this.controlTextEl_=ni("span",{className:"vjs-control-text"},{"aria-live":"polite"}),n&&n.appendChild(this.controlTextEl_),this.controlText(this.controlText_,n),this.controlTextEl_},t.controlText=function(n,s){if(s===void 0&&(s=this.el()),n===void 0)return this.controlText_||"Need Text";var a=this.localize(n);this.controlText_=n,Fh(this.controlTextEl_,a),!this.nonIconControl&&!this.player_.options_.noUITitleAttributes&&s.setAttribute("title",a)},t.buildCSSClass=function(){return"vjs-control vjs-button "+i.prototype.buildCSSClass.call(this)},t.enable=function(){this.enabled_||(this.enabled_=!0,this.removeClass("vjs-disabled"),this.el_.setAttribute("aria-disabled","false"),typeof this.tabIndex_<"u"&&this.el_.setAttribute("tabIndex",this.tabIndex_),this.on(["tap","click"],this.handleClick_),this.on("keydown",this.handleKeyDown_))},t.disable=function(){this.enabled_=!1,this.addClass("vjs-disabled"),this.el_.setAttribute("aria-disabled","true"),typeof this.tabIndex_<"u"&&this.el_.removeAttribute("tabIndex"),this.off("mouseover",this.handleMouseOver_),this.off("mouseout",this.handleMouseOut_),this.off(["tap","click"],this.handleClick_),this.off("keydown",this.handleKeyDown_)},t.handleLanguagechange=function(){this.controlText(this.controlText_)},t.handleClick=function(n){this.options_.clickHandler&&this.options_.clickHandler.call(this,arguments)},t.handleKeyDown=function(n){Ar.isEventKey(n,"Space")||Ar.isEventKey(n,"Enter")?(n.preventDefault(),n.stopPropagation(),this.trigger("click")):i.prototype.handleKeyDown.call(this,n)},e})(xt);xt.registerComponent("ClickableComponent",kT);var afe=(function(i){Ft(e,i);function e(r,n){var s;return s=i.call(this,r,n)||this,s.update(),s.update_=function(a){return s.update(a)},r.on("posterchange",s.update_),s}var t=e.prototype;return t.dispose=function(){this.player().off("posterchange",this.update_),i.prototype.dispose.call(this)},t.createEl=function(){var n=ni("div",{className:"vjs-poster",tabIndex:-1});return n},t.update=function(n){var s=this.player().poster();this.setSrc(s),s?this.show():this.hide()},t.setSrc=function(n){var s="";n&&(s='url("'+n+'")'),this.el_.style.backgroundImage=s},t.handleClick=function(n){if(this.player_.controls()){var s=this.player_.usingPlugin("eme")&&this.player_.eme.sessions&&this.player_.eme.sessions.length>0;this.player_.tech(!0)&&!((cg||ug)&&s)&&this.player_.tech(!0).focus(),this.player_.paused()?iu(this.player_.play()):this.player_.pause()}},e})(kT);xt.registerComponent("PosterImage",afe);var wo="#222",B4="#ccc",ofe={monospace:"monospace",sansSerif:"sans-serif",serif:"serif",monospaceSansSerif:'"Andale Mono", "Lucida Console", monospace',monospaceSerif:'"Courier New", monospace',proportionalSansSerif:"sans-serif",proportionalSerif:"serif",casual:'"Comic Sans MS", Impact, fantasy',script:'"Monotype Corsiva", cursive',smallcaps:'"Andale Mono", "Lucida Console", monospace, sans-serif'};function b1(i,e){var t;if(i.length===4)t=i[1]+i[1]+i[2]+i[2]+i[3]+i[3];else if(i.length===7)t=i.slice(1);else throw new Error("Invalid color code provided, "+i+"; must be formatted as e.g. #f0e or #f604e2.");return"rgba("+parseInt(t.slice(0,2),16)+","+parseInt(t.slice(2,4),16)+","+parseInt(t.slice(4,6),16)+","+e+")"}function S1(i,e,t){try{i.style[e]=t}catch{return}}var lfe=(function(i){Ft(e,i);function e(r,n,s){var a;a=i.call(this,r,n,s)||this;var o=function(u){return a.updateDisplay(u)};return r.on("loadstart",function(l){return a.toggleDisplay(l)}),r.on("texttrackchange",o),r.on("loadedmetadata",function(l){return a.preselectTrack(l)}),r.ready(Fi(je(a),function(){if(r.tech_&&r.tech_.featuresNativeTextTracks){this.hide();return}r.on("fullscreenchange",o),r.on("playerresize",o),X.addEventListener("orientationchange",o),r.on("dispose",function(){return X.removeEventListener("orientationchange",o)});for(var l=this.options_.playerOptions.tracks||[],u=0;u<l.length;u++)this.player_.addRemoteTextTrack(l[u],!0);this.preselectTrack()})),a}var t=e.prototype;return t.preselectTrack=function(){for(var n={captions:1,subtitles:1},s=this.player_.textTracks(),a=this.player_.cache_.selectedLanguage,o,l,u,c=0;c<s.length;c++){var h=s[c];a&&a.enabled&&a.language&&a.language===h.language&&h.kind in n?h.kind===a.kind?u=h:u||(u=h):a&&!a.enabled?(u=null,o=null,l=null):h.default&&(h.kind==="descriptions"&&!o?o=h:h.kind in n&&!l&&(l=h))}u?u.mode="showing":l?l.mode="showing":o&&(o.mode="showing")},t.toggleDisplay=function(){this.player_.tech_&&this.player_.tech_.featuresNativeTextTracks?this.hide():this.show()},t.createEl=function(){return i.prototype.createEl.call(this,"div",{className:"vjs-text-track-display"},{translate:"yes","aria-live":"off","aria-atomic":"true"})},t.clearDisplay=function(){typeof X.WebVTT=="function"&&X.WebVTT.processCues(X,[],this.el_)},t.updateDisplay=function(){var n=this.player_.textTracks(),s=this.options_.allowMultipleShowingTracks;if(this.clearDisplay(),s){for(var a=[],o=0;o<n.length;++o){var l=n[o];l.mode==="showing"&&a.push(l)}this.updateForTrack(a);return}for(var u=null,c=null,h=n.length;h--;){var m=n[h];m.mode==="showing"&&(m.kind==="descriptions"?u=m:c=m)}c?(this.getAttribute("aria-live")!=="off"&&this.setAttribute("aria-live","off"),this.updateForTrack(c)):u&&(this.getAttribute("aria-live")!=="assertive"&&this.setAttribute("aria-live","assertive"),this.updateForTrack(u))},t.updateDisplayState=function(n){for(var s=this.player_.textTrackSettings.getValues(),a=n.activeCues,o=a.length;o--;){var l=a[o];if(l){var u=l.displayState;if(s.color&&(u.firstChild.style.color=s.color),s.textOpacity&&S1(u.firstChild,"color",b1(s.color||"#fff",s.textOpacity)),s.backgroundColor&&(u.firstChild.style.backgroundColor=s.backgroundColor),s.backgroundOpacity&&S1(u.firstChild,"backgroundColor",b1(s.backgroundColor||"#000",s.backgroundOpacity)),s.windowColor&&(s.windowOpacity?S1(u,"backgroundColor",b1(s.windowColor,s.windowOpacity)):u.style.backgroundColor=s.windowColor),s.edgeStyle&&(s.edgeStyle==="dropshadow"?u.firstChild.style.textShadow="2px 2px 3px "+wo+", 2px 2px 4px "+wo+", 2px 2px 5px "+wo:s.edgeStyle==="raised"?u.firstChild.style.textShadow="1px 1px "+wo+", 2px 2px "+wo+", 3px 3px "+wo:s.edgeStyle==="depressed"?u.firstChild.style.textShadow="1px 1px "+B4+", 0 1px "+B4+", -1px -1px "+wo+", 0 -1px "+wo:s.edgeStyle==="uniform"&&(u.firstChild.style.textShadow="0 0 4px "+wo+", 0 0 4px "+wo+", 0 0 4px "+wo+", 0 0 4px "+wo)),s.fontPercent&&s.fontPercent!==1){var c=X.parseFloat(u.style.fontSize);u.style.fontSize=c*s.fontPercent+"px",u.style.height="auto",u.style.top="auto"}s.fontFamily&&s.fontFamily!=="default"&&(s.fontFamily==="small-caps"?u.firstChild.style.fontVariant="small-caps":u.firstChild.style.fontFamily=ofe[s.fontFamily])}}},t.updateForTrack=function(n){if(Array.isArray(n)||(n=[n]),!(typeof X.WebVTT!="function"||n.every(function(g){return!g.activeCues}))){for(var s=[],a=0;a<n.length;++a)for(var o=n[a],l=0;l<o.activeCues.length;++l)s.push(o.activeCues[l]);X.WebVTT.processCues(X,s,this.el_);for(var u=0;u<n.length;++u){for(var c=n[u],h=0;h<c.activeCues.length;++h){var m=c.activeCues[h].displayState;nc(m,"vjs-text-track-cue"),nc(m,"vjs-text-track-cue-"+(c.language?c.language:u)),c.language&&xp(m,"lang",c.language)}this.player_.textTrackSettings&&this.updateDisplayState(c)}}},e})(xt);xt.registerComponent("TextTrackDisplay",lfe);var ufe=(function(i){Ft(e,i);function e(){return i.apply(this,arguments)||this}var t=e.prototype;return t.createEl=function(){var n=this.player_.isAudio(),s=this.localize(n?"Audio Player":"Video Player"),a=ni("span",{className:"vjs-control-text",textContent:this.localize("{1} is loading.",[s])}),o=i.prototype.createEl.call(this,"div",{className:"vjs-loading-spinner",dir:"ltr"});return o.appendChild(a),o},e})(xt);xt.registerComponent("LoadingSpinner",ufe);var hl=(function(i){Ft(e,i);function e(){return i.apply(this,arguments)||this}var t=e.prototype;return t.createEl=function(n,s,a){s===void 0&&(s={}),a===void 0&&(a={}),n="button",s=rn({className:this.buildCSSClass()},s),a=rn({type:"button"},a);var o=ni(n,s,a);return o.appendChild(ni("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),this.createControlTextEl(o),o},t.addChild=function(n,s){s===void 0&&(s={});var a=this.constructor.name;return Nr.warn("Adding an actionable (user controllable) child to a Button ("+a+") is not supported; use a ClickableComponent instead."),xt.prototype.addChild.call(this,n,s)},t.enable=function(){i.prototype.enable.call(this),this.el_.removeAttribute("disabled")},t.disable=function(){i.prototype.disable.call(this),this.el_.setAttribute("disabled","disabled")},t.handleKeyDown=function(n){if(Ar.isEventKey(n,"Space")||Ar.isEventKey(n,"Enter")){n.stopPropagation();return}i.prototype.handleKeyDown.call(this,n)},e})(kT);xt.registerComponent("Button",hl);var _U=(function(i){Ft(e,i);function e(r,n){var s;return s=i.call(this,r,n)||this,s.mouseused_=!1,s.on("mousedown",function(a){return s.handleMouseDown(a)}),s}var t=e.prototype;return t.buildCSSClass=function(){return"vjs-big-play-button"},t.handleClick=function(n){var s=this.player_.play();if(this.mouseused_&&n.clientX&&n.clientY){var a=this.player_.usingPlugin("eme")&&this.player_.eme.sessions&&this.player_.eme.sessions.length>0;iu(s),this.player_.tech(!0)&&!((cg||ug)&&a)&&this.player_.tech(!0).focus();return}var o=this.player_.getChild("controlBar"),l=o&&o.getChild("playToggle");if(!l){this.player_.tech(!0).focus();return}var u=function(){return l.focus()};f0(s)?s.then(u,function(){}):this.setTimeout(u,1)},t.handleKeyDown=function(n){this.mouseused_=!1,i.prototype.handleKeyDown.call(this,n)},t.handleMouseDown=function(n){this.mouseused_=!0},e})(hl);_U.prototype.controlText_="Play Video";xt.registerComponent("BigPlayButton",_U);var cfe=(function(i){Ft(e,i);function e(r,n){var s;return s=i.call(this,r,n)||this,s.controlText(n&&n.controlText||s.localize("Close")),s}var t=e.prototype;return t.buildCSSClass=function(){return"vjs-close-button "+i.prototype.buildCSSClass.call(this)},t.handleClick=function(n){this.trigger({type:"close",bubbles:!1})},t.handleKeyDown=function(n){Ar.isEventKey(n,"Esc")?(n.preventDefault(),n.stopPropagation(),this.trigger("click")):i.prototype.handleKeyDown.call(this,n)},e})(hl);xt.registerComponent("CloseButton",cfe);var xU=(function(i){Ft(e,i);function e(r,n){var s;return n===void 0&&(n={}),s=i.call(this,r,n)||this,n.replay=n.replay===void 0||n.replay,s.on(r,"play",function(a){return s.handlePlay(a)}),s.on(r,"pause",function(a){return s.handlePause(a)}),n.replay&&s.on(r,"ended",function(a){return s.handleEnded(a)}),s}var t=e.prototype;return t.buildCSSClass=function(){return"vjs-play-control "+i.prototype.buildCSSClass.call(this)},t.handleClick=function(n){this.player_.paused()?iu(this.player_.play()):this.player_.pause()},t.handleSeeked=function(n){this.removeClass("vjs-ended"),this.player_.paused()?this.handlePause(n):this.handlePlay(n)},t.handlePlay=function(n){this.removeClass("vjs-ended"),this.removeClass("vjs-paused"),this.addClass("vjs-playing"),this.controlText("Pause")},t.handlePause=function(n){this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.controlText("Play")},t.handleEnded=function(n){var s=this;this.removeClass("vjs-playing"),this.addClass("vjs-ended"),this.controlText("Replay"),this.one(this.player_,"seeked",function(a){return s.handleSeeked(a)})},e})(hl);xU.prototype.controlText_="Play";xt.registerComponent("PlayToggle",xU);var TU=function(e,t){e=e<0?0:e;var r=Math.floor(e%60),n=Math.floor(e/60%60),s=Math.floor(e/3600),a=Math.floor(t/60%60),o=Math.floor(t/3600);return(isNaN(e)||e===1/0)&&(s=n=r="-"),s=s>0||o>0?s+":":"",n=((s||a>=10)&&n<10?"0"+n:n)+":",r=r<10?"0"+r:r,s+n+r},Y2=TU;function dfe(i){Y2=i}function hfe(){Y2=TU}function Cp(i,e){return e===void 0&&(e=i),Y2(i,e)}var Wp=(function(i){Ft(e,i);function e(r,n){var s;return s=i.call(this,r,n)||this,s.on(r,["timeupdate","ended"],function(a){return s.updateContent(a)}),s.updateTextNode_(),s}var t=e.prototype;return t.createEl=function(){var n=this.buildCSSClass(),s=i.prototype.createEl.call(this,"div",{className:n+" vjs-time-control vjs-control"}),a=ni("span",{className:"vjs-control-text",textContent:this.localize(this.labelText_)+""},{role:"presentation"});return s.appendChild(a),this.contentEl_=ni("span",{className:n+"-display"},{"aria-live":"off",role:"presentation"}),s.appendChild(this.contentEl_),s},t.dispose=function(){this.contentEl_=null,this.textNode_=null,i.prototype.dispose.call(this)},t.updateTextNode_=function(n){var s=this;n===void 0&&(n=0),n=Cp(n),this.formattedTime_!==n&&(this.formattedTime_=n,this.requestNamedAnimationFrame("TimeDisplay#updateTextNode_",function(){if(s.contentEl_){var a=s.textNode_;a&&s.contentEl_.firstChild!==a&&(a=null,Nr.warn("TimeDisplay#updateTextnode_: Prevented replacement of text node element since it was no longer a child of this node. Appending a new node instead.")),s.textNode_=Me.createTextNode(s.formattedTime_),s.textNode_&&(a?s.contentEl_.replaceChild(s.textNode_,a):s.contentEl_.appendChild(s.textNode_))}}))},t.updateContent=function(n){},e})(xt);Wp.prototype.labelText_="Time";Wp.prototype.controlText_="Time";xt.registerComponent("TimeDisplay",Wp);var Q2=(function(i){Ft(e,i);function e(){return i.apply(this,arguments)||this}var t=e.prototype;return t.buildCSSClass=function(){return"vjs-current-time"},t.updateContent=function(n){var s;this.player_.ended()?s=this.player_.duration():s=this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime(),this.updateTextNode_(s)},e})(Wp);Q2.prototype.labelText_="Current Time";Q2.prototype.controlText_="Current Time";xt.registerComponent("CurrentTimeDisplay",Q2);var J2=(function(i){Ft(e,i);function e(r,n){var s;s=i.call(this,r,n)||this;var a=function(l){return s.updateContent(l)};return s.on(r,"durationchange",a),s.on(r,"loadstart",a),s.on(r,"loadedmetadata",a),s}var t=e.prototype;return t.buildCSSClass=function(){return"vjs-duration"},t.updateContent=function(n){var s=this.player_.duration();this.updateTextNode_(s)},e})(Wp);J2.prototype.labelText_="Duration";J2.prototype.controlText_="Duration";xt.registerComponent("DurationDisplay",J2);var ffe=(function(i){Ft(e,i);function e(){return i.apply(this,arguments)||this}var t=e.prototype;return t.createEl=function(){var n=i.prototype.createEl.call(this,"div",{className:"vjs-time-control vjs-time-divider"},{"aria-hidden":!0}),s=i.prototype.createEl.call(this,"div"),a=i.prototype.createEl.call(this,"span",{textContent:"/"});return s.appendChild(a),n.appendChild(s),n},e})(xt);xt.registerComponent("TimeDivider",ffe);var Z2=(function(i){Ft(e,i);function e(r,n){var s;return s=i.call(this,r,n)||this,s.on(r,"durationchange",function(a){return s.updateContent(a)}),s}var t=e.prototype;return t.buildCSSClass=function(){return"vjs-remaining-time"},t.createEl=function(){var n=i.prototype.createEl.call(this);return this.options_.displayNegative!==!1&&n.insertBefore(ni("span",{},{"aria-hidden":!0},"-"),this.contentEl_),n},t.updateContent=function(n){if(typeof this.player_.duration()=="number"){var s;this.player_.ended()?s=0:this.player_.remainingTimeDisplay?s=this.player_.remainingTimeDisplay():s=this.player_.remainingTime(),this.updateTextNode_(s)}},e})(Wp);Z2.prototype.labelText_="Remaining Time";Z2.prototype.controlText_="Remaining Time";xt.registerComponent("RemainingTimeDisplay",Z2);var pfe=(function(i){Ft(e,i);function e(r,n){var s;return s=i.call(this,r,n)||this,s.updateShowing(),s.on(s.player(),"durationchange",function(a){return s.updateShowing(a)}),s}var t=e.prototype;return t.createEl=function(){var n=i.prototype.createEl.call(this,"div",{className:"vjs-live-control vjs-control"});return this.contentEl_=ni("div",{className:"vjs-live-display"},{"aria-live":"off"}),this.contentEl_.appendChild(ni("span",{className:"vjs-control-text",textContent:this.localize("Stream Type")+""})),this.contentEl_.appendChild(Me.createTextNode(this.localize("LIVE"))),n.appendChild(this.contentEl_),n},t.dispose=function(){this.contentEl_=null,i.prototype.dispose.call(this)},t.updateShowing=function(n){this.player().duration()===1/0?this.show():this.hide()},e})(xt);xt.registerComponent("LiveDisplay",pfe);var bU=(function(i){Ft(e,i);function e(r,n){var s;return s=i.call(this,r,n)||this,s.updateLiveEdgeStatus(),s.player_.liveTracker&&(s.updateLiveEdgeStatusHandler_=function(a){return s.updateLiveEdgeStatus(a)},s.on(s.player_.liveTracker,"liveedgechange",s.updateLiveEdgeStatusHandler_)),s}var t=e.prototype;return t.createEl=function(){var n=i.prototype.createEl.call(this,"button",{className:"vjs-seek-to-live-control vjs-control"});return this.textEl_=ni("span",{className:"vjs-seek-to-live-text",textContent:this.localize("LIVE")},{"aria-hidden":"true"}),n.appendChild(this.textEl_),n},t.updateLiveEdgeStatus=function(){!this.player_.liveTracker||this.player_.liveTracker.atLiveEdge()?(this.setAttribute("aria-disabled",!0),this.addClass("vjs-at-live-edge"),this.controlText("Seek to live, currently playing live")):(this.setAttribute("aria-disabled",!1),this.removeClass("vjs-at-live-edge"),this.controlText("Seek to live, currently behind live"))},t.handleClick=function(){this.player_.liveTracker.seekToLiveEdge()},t.dispose=function(){this.player_.liveTracker&&this.off(this.player_.liveTracker,"liveedgechange",this.updateLiveEdgeStatusHandler_),this.textEl_=null,i.prototype.dispose.call(this)},e})(hl);bU.prototype.controlText_="Seek to live, currently playing live";xt.registerComponent("SeekToLive",bU);var AT=function(e,t,r){return e=Number(e),Math.min(r,Math.max(t,isNaN(e)?t:e))},ek=(function(i){Ft(e,i);function e(r,n){var s;return s=i.call(this,r,n)||this,s.handleMouseDown_=function(a){return s.handleMouseDown(a)},s.handleMouseUp_=function(a){return s.handleMouseUp(a)},s.handleKeyDown_=function(a){return s.handleKeyDown(a)},s.handleClick_=function(a){return s.handleClick(a)},s.handleMouseMove_=function(a){return s.handleMouseMove(a)},s.update_=function(a){return s.update(a)},s.bar=s.getChild(s.options_.barName),s.vertical(!!s.options_.vertical),s.enable(),s}var t=e.prototype;return t.enabled=function(){return this.enabled_},t.enable=function(){this.enabled()||(this.on("mousedown",this.handleMouseDown_),this.on("touchstart",this.handleMouseDown_),this.on("keydown",this.handleKeyDown_),this.on("click",this.handleClick_),this.on(this.player_,"controlsvisible",this.update),this.playerEvent&&this.on(this.player_,this.playerEvent,this.update),this.removeClass("disabled"),this.setAttribute("tabindex",0),this.enabled_=!0)},t.disable=function(){if(this.enabled()){var n=this.bar.el_.ownerDocument;this.off("mousedown",this.handleMouseDown_),this.off("touchstart",this.handleMouseDown_),this.off("keydown",this.handleKeyDown_),this.off("click",this.handleClick_),this.off(this.player_,"controlsvisible",this.update_),this.off(n,"mousemove",this.handleMouseMove_),this.off(n,"mouseup",this.handleMouseUp_),this.off(n,"touchmove",this.handleMouseMove_),this.off(n,"touchend",this.handleMouseUp_),this.removeAttribute("tabindex"),this.addClass("disabled"),this.playerEvent&&this.off(this.player_,this.playerEvent,this.update),this.enabled_=!1}},t.createEl=function(n,s,a){return s===void 0&&(s={}),a===void 0&&(a={}),s.className=s.className+" vjs-slider",s=rn({tabIndex:0},s),a=rn({role:"slider","aria-valuenow":0,"aria-valuemin":0,"aria-valuemax":100,tabIndex:0},a),i.prototype.createEl.call(this,n,s,a)},t.handleMouseDown=function(n){var s=this.bar.el_.ownerDocument;n.type==="mousedown"&&n.preventDefault(),n.type==="touchstart"&&!hc&&n.preventDefault(),Q6(),this.addClass("vjs-sliding"),this.trigger("slideractive"),this.on(s,"mousemove",this.handleMouseMove_),this.on(s,"mouseup",this.handleMouseUp_),this.on(s,"touchmove",this.handleMouseMove_),this.on(s,"touchend",this.handleMouseUp_),this.handleMouseMove(n,!0)},t.handleMouseMove=function(n){},t.handleMouseUp=function(){var n=this.bar.el_.ownerDocument;J6(),this.removeClass("vjs-sliding"),this.trigger("sliderinactive"),this.off(n,"mousemove",this.handleMouseMove_),this.off(n,"mouseup",this.handleMouseUp_),this.off(n,"touchmove",this.handleMouseMove_),this.off(n,"touchend",this.handleMouseUp_),this.update()},t.update=function(){var n=this;if(!(!this.el_||!this.bar)){var s=this.getProgress();return s===this.progress_||(this.progress_=s,this.requestNamedAnimationFrame("Slider#update",function(){var a=n.vertical()?"height":"width";n.bar.el().style[a]=(s*100).toFixed(2)+"%"})),s}},t.getProgress=function(){return Number(AT(this.getPercent(),0,1).toFixed(4))},t.calculateDistance=function(n){var s=bT(this.el_,n);return this.vertical()?s.y:s.x},t.handleKeyDown=function(n){Ar.isEventKey(n,"Left")||Ar.isEventKey(n,"Down")?(n.preventDefault(),n.stopPropagation(),this.stepBack()):Ar.isEventKey(n,"Right")||Ar.isEventKey(n,"Up")?(n.preventDefault(),n.stopPropagation(),this.stepForward()):i.prototype.handleKeyDown.call(this,n)},t.handleClick=function(n){n.stopPropagation(),n.preventDefault()},t.vertical=function(n){if(n===void 0)return this.vertical_||!1;this.vertical_=!!n,this.vertical_?this.addClass("vjs-slider-vertical"):this.addClass("vjs-slider-horizontal")},e})(xt);xt.registerComponent("Slider",ek);var C1=function(e,t){return AT(e/t*100,0,100).toFixed(2)+"%"},mfe=(function(i){Ft(e,i);function e(r,n){var s;return s=i.call(this,r,n)||this,s.partEls_=[],s.on(r,"progress",function(a){return s.update(a)}),s}var t=e.prototype;return t.createEl=function(){var n=i.prototype.createEl.call(this,"div",{className:"vjs-load-progress"}),s=ni("span",{className:"vjs-control-text"}),a=ni("span",{textContent:this.localize("Loaded")}),o=Me.createTextNode(": ");return this.percentageEl_=ni("span",{className:"vjs-control-text-loaded-percentage",textContent:"0%"}),n.appendChild(s),s.appendChild(a),s.appendChild(o),s.appendChild(this.percentageEl_),n},t.dispose=function(){this.partEls_=null,this.percentageEl_=null,i.prototype.dispose.call(this)},t.update=function(n){var s=this;this.requestNamedAnimationFrame("LoadProgressBar#update",function(){var a=s.player_.liveTracker,o=s.player_.buffered(),l=a&&a.isLive()?a.seekableEnd():s.player_.duration(),u=s.player_.bufferedEnd(),c=s.partEls_,h=C1(u,l);s.percent_!==h&&(s.el_.style.width=h,Fh(s.percentageEl_,h),s.percent_=h);for(var m=0;m<o.length;m++){var g=o.start(m),y=o.end(m),_=c[m];_||(_=s.el_.appendChild(ni()),c[m]=_),!(_.dataset.start===g&&_.dataset.end===y)&&(_.dataset.start=g,_.dataset.end=y,_.style.left=C1(g,u),_.style.width=C1(y-g,u))}for(var T=c.length;T>o.length;T--)s.el_.removeChild(c[T-1]);c.length=o.length})},e})(xt);xt.registerComponent("LoadProgressBar",mfe);var gfe=(function(i){Ft(e,i);function e(r,n){var s;return s=i.call(this,r,n)||this,s.update=lc(Fi(je(s),s.update),ml),s}var t=e.prototype;return t.createEl=function(){return i.prototype.createEl.call(this,"div",{className:"vjs-time-tooltip"},{"aria-hidden":"true"})},t.update=function(n,s,a){var o=F0(this.el_),l=Tp(this.player_.el()),u=n.width*s;if(!(!l||!o)){var c=n.left-l.left+u,h=n.width-u+(l.right-n.right),m=o.width/2;c<m?m+=m-c:h<m&&(m=h),m<0?m=0:m>o.width&&(m=o.width),m=Math.round(m),this.el_.style.right="-"+m+"px",this.write(a)}},t.write=function(n){Fh(this.el_,n)},t.updateTime=function(n,s,a,o){var l=this;this.requestNamedAnimationFrame("TimeTooltip#updateTime",function(){var u,c=l.player_.duration();if(l.player_.liveTracker&&l.player_.liveTracker.isLive()){var h=l.player_.liveTracker.liveWindow(),m=h-s*h;u=(m<1?"":"-")+Cp(m,h)}else u=Cp(a,c);l.update(n,s,u),o&&o()})},e})(xt);xt.registerComponent("TimeTooltip",gfe);var tk=(function(i){Ft(e,i);function e(r,n){var s;return s=i.call(this,r,n)||this,s.update=lc(Fi(je(s),s.update),ml),s}var t=e.prototype;return t.createEl=function(){return i.prototype.createEl.call(this,"div",{className:"vjs-play-progress vjs-slider-bar"},{"aria-hidden":"true"})},t.update=function(n,s){var a=this.getChild("timeTooltip");if(a){var o=this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime();a.updateTime(n,s,o)}},e})(xt);tk.prototype.options_={children:[]};!ra&&!dc&&tk.prototype.options_.children.push("timeTooltip");xt.registerComponent("PlayProgressBar",tk);var SU=(function(i){Ft(e,i);function e(r,n){var s;return s=i.call(this,r,n)||this,s.update=lc(Fi(je(s),s.update),ml),s}var t=e.prototype;return t.createEl=function(){return i.prototype.createEl.call(this,"div",{className:"vjs-mouse-display"})},t.update=function(n,s){var a=this,o=s*this.player_.duration();this.getChild("timeTooltip").updateTime(n,s,o,function(){a.el_.style.left=n.width*s+"px"})},e})(xt);SU.prototype.options_={children:["timeTooltip"]};xt.registerComponent("MouseTimeDisplay",SU);var Pv=5,N4=12,rk=(function(i){Ft(e,i);function e(r,n){var s;return s=i.call(this,r,n)||this,s.setEventHandlers_(),s}var t=e.prototype;return t.setEventHandlers_=function(){var n=this;this.update_=Fi(this,this.update),this.update=lc(this.update_,ml),this.on(this.player_,["ended","durationchange","timeupdate"],this.update),this.player_.liveTracker&&this.on(this.player_.liveTracker,"liveedgechange",this.update),this.updateInterval=null,this.enableIntervalHandler_=function(s){return n.enableInterval_(s)},this.disableIntervalHandler_=function(s){return n.disableInterval_(s)},this.on(this.player_,["playing"],this.enableIntervalHandler_),this.on(this.player_,["ended","pause","waiting"],this.disableIntervalHandler_),"hidden"in Me&&"visibilityState"in Me&&this.on(Me,"visibilitychange",this.toggleVisibility_)},t.toggleVisibility_=function(n){Me.visibilityState==="hidden"?(this.cancelNamedAnimationFrame("SeekBar#update"),this.cancelNamedAnimationFrame("Slider#update"),this.disableInterval_(n)):(!this.player_.ended()&&!this.player_.paused()&&this.enableInterval_(),this.update())},t.enableInterval_=function(){this.updateInterval||(this.updateInterval=this.setInterval(this.update,ml))},t.disableInterval_=function(n){this.player_.liveTracker&&this.player_.liveTracker.isLive()&&n&&n.type!=="ended"||this.updateInterval&&(this.clearInterval(this.updateInterval),this.updateInterval=null)},t.createEl=function(){return i.prototype.createEl.call(this,"div",{className:"vjs-progress-holder"},{"aria-label":this.localize("Progress Bar")})},t.update=function(n){var s=this;if(Me.visibilityState!=="hidden"){var a=i.prototype.update.call(this);return this.requestNamedAnimationFrame("SeekBar#update",function(){var o=s.player_.ended()?s.player_.duration():s.getCurrentTime_(),l=s.player_.liveTracker,u=s.player_.duration();l&&l.isLive()&&(u=s.player_.liveTracker.liveCurrentTime()),s.percent_!==a&&(s.el_.setAttribute("aria-valuenow",(a*100).toFixed(2)),s.percent_=a),(s.currentTime_!==o||s.duration_!==u)&&(s.el_.setAttribute("aria-valuetext",s.localize("progress bar timing: currentTime={1} duration={2}",[Cp(o,u),Cp(u,u)],"{1} of {2}")),s.currentTime_=o,s.duration_=u),s.bar&&s.bar.update(Tp(s.el()),s.getProgress())}),a}},t.userSeek_=function(n){this.player_.liveTracker&&this.player_.liveTracker.isLive()&&this.player_.liveTracker.nextSeekedFromUser(),this.player_.currentTime(n)},t.getCurrentTime_=function(){return this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime()},t.getPercent=function(){var n=this.getCurrentTime_(),s,a=this.player_.liveTracker;return a&&a.isLive()?(s=(n-a.seekableStart())/a.liveWindow(),a.atLiveEdge()&&(s=1)):s=n/this.player_.duration(),s},t.handleMouseDown=function(n){B0(n)&&(n.stopPropagation(),this.videoWasPlaying=!this.player_.paused(),this.player_.pause(),i.prototype.handleMouseDown.call(this,n))},t.handleMouseMove=function(n,s){if(s===void 0&&(s=!1),!!B0(n)){!s&&!this.player_.scrubbing()&&this.player_.scrubbing(!0);var a,o=this.calculateDistance(n),l=this.player_.liveTracker;if(!l||!l.isLive())a=o*this.player_.duration(),a===this.player_.duration()&&(a=a-.1);else{if(o>=.99){l.seekToLiveEdge();return}var u=l.seekableStart(),c=l.liveCurrentTime();if(a=u+o*l.liveWindow(),a>=c&&(a=c),a<=u&&(a=u+.1),a===1/0)return}this.userSeek_(a)}},t.enable=function(){i.prototype.enable.call(this);var n=this.getChild("mouseTimeDisplay");n&&n.show()},t.disable=function(){i.prototype.disable.call(this);var n=this.getChild("mouseTimeDisplay");n&&n.hide()},t.handleMouseUp=function(n){i.prototype.handleMouseUp.call(this,n),n&&n.stopPropagation(),this.player_.scrubbing(!1),this.player_.trigger({type:"timeupdate",target:this,manuallyTriggered:!0}),this.videoWasPlaying?iu(this.player_.play()):this.update_()},t.stepForward=function(){this.userSeek_(this.player_.currentTime()+Pv)},t.stepBack=function(){this.userSeek_(this.player_.currentTime()-Pv)},t.handleAction=function(n){this.player_.paused()?this.player_.play():this.player_.pause()},t.handleKeyDown=function(n){var s=this.player_.liveTracker;if(Ar.isEventKey(n,"Space")||Ar.isEventKey(n,"Enter"))n.preventDefault(),n.stopPropagation(),this.handleAction(n);else if(Ar.isEventKey(n,"Home"))n.preventDefault(),n.stopPropagation(),this.userSeek_(0);else if(Ar.isEventKey(n,"End"))n.preventDefault(),n.stopPropagation(),s&&s.isLive()?this.userSeek_(s.liveCurrentTime()):this.userSeek_(this.player_.duration());else if(/^[0-9]$/.test(Ar(n))){n.preventDefault(),n.stopPropagation();var a=(Ar.codes[Ar(n)]-Ar.codes[0])*10/100;s&&s.isLive()?this.userSeek_(s.seekableStart()+s.liveWindow()*a):this.userSeek_(this.player_.duration()*a)}else Ar.isEventKey(n,"PgDn")?(n.preventDefault(),n.stopPropagation(),this.userSeek_(this.player_.currentTime()-Pv*N4)):Ar.isEventKey(n,"PgUp")?(n.preventDefault(),n.stopPropagation(),this.userSeek_(this.player_.currentTime()+Pv*N4)):i.prototype.handleKeyDown.call(this,n)},t.dispose=function(){this.disableInterval_(),this.off(this.player_,["ended","durationchange","timeupdate"],this.update),this.player_.liveTracker&&this.off(this.player_.liveTracker,"liveedgechange",this.update),this.off(this.player_,["playing"],this.enableIntervalHandler_),this.off(this.player_,["ended","pause","waiting"],this.disableIntervalHandler_),"hidden"in Me&&"visibilityState"in Me&&this.off(Me,"visibilitychange",this.toggleVisibility_),i.prototype.dispose.call(this)},e})(ek);rk.prototype.options_={children:["loadProgressBar","playProgressBar"],barName:"playProgressBar"};!ra&&!dc&&rk.prototype.options_.children.splice(1,0,"mouseTimeDisplay");xt.registerComponent("SeekBar",rk);var CU=(function(i){Ft(e,i);function e(r,n){var s;return s=i.call(this,r,n)||this,s.handleMouseMove=lc(Fi(je(s),s.handleMouseMove),ml),s.throttledHandleMouseSeek=lc(Fi(je(s),s.handleMouseSeek),ml),s.handleMouseUpHandler_=function(a){return s.handleMouseUp(a)},s.handleMouseDownHandler_=function(a){return s.handleMouseDown(a)},s.enable(),s}var t=e.prototype;return t.createEl=function(){return i.prototype.createEl.call(this,"div",{className:"vjs-progress-control vjs-control"})},t.handleMouseMove=function(n){var s=this.getChild("seekBar");if(s){var a=s.getChild("playProgressBar"),o=s.getChild("mouseTimeDisplay");if(!(!a&&!o)){var l=s.el(),u=F0(l),c=bT(l,n).x;c=AT(c,0,1),o&&o.update(u,c),a&&a.update(u,s.getProgress())}}},t.handleMouseSeek=function(n){var s=this.getChild("seekBar");s&&s.handleMouseMove(n)},t.enabled=function(){return this.enabled_},t.disable=function(){if(this.children().forEach(function(s){return s.disable&&s.disable()}),!!this.enabled()&&(this.off(["mousedown","touchstart"],this.handleMouseDownHandler_),this.off(this.el_,"mousemove",this.handleMouseMove),this.removeListenersAddedOnMousedownAndTouchstart(),this.addClass("disabled"),this.enabled_=!1,this.player_.scrubbing())){var n=this.getChild("seekBar");this.player_.scrubbing(!1),n.videoWasPlaying&&iu(this.player_.play())}},t.enable=function(){this.children().forEach(function(n){return n.enable&&n.enable()}),!this.enabled()&&(this.on(["mousedown","touchstart"],this.handleMouseDownHandler_),this.on(this.el_,"mousemove",this.handleMouseMove),this.removeClass("disabled"),this.enabled_=!0)},t.removeListenersAddedOnMousedownAndTouchstart=function(){var n=this.el_.ownerDocument;this.off(n,"mousemove",this.throttledHandleMouseSeek),this.off(n,"touchmove",this.throttledHandleMouseSeek),this.off(n,"mouseup",this.handleMouseUpHandler_),this.off(n,"touchend",this.handleMouseUpHandler_)},t.handleMouseDown=function(n){var s=this.el_.ownerDocument,a=this.getChild("seekBar");a&&a.handleMouseDown(n),this.on(s,"mousemove",this.throttledHandleMouseSeek),this.on(s,"touchmove",this.throttledHandleMouseSeek),this.on(s,"mouseup",this.handleMouseUpHandler_),this.on(s,"touchend",this.handleMouseUpHandler_)},t.handleMouseUp=function(n){var s=this.getChild("seekBar");s&&s.handleMouseUp(n),this.removeListenersAddedOnMousedownAndTouchstart()},e})(xt);CU.prototype.options_={children:["seekBar"]};xt.registerComponent("ProgressControl",CU);var EU=(function(i){Ft(e,i);function e(r,n){var s;return s=i.call(this,r,n)||this,s.on(r,["enterpictureinpicture","leavepictureinpicture"],function(a){return s.handlePictureInPictureChange(a)}),s.on(r,["disablepictureinpicturechanged","loadedmetadata"],function(a){return s.handlePictureInPictureEnabledChange(a)}),s.on(r,["loadedmetadata","audioonlymodechange","audiopostermodechange"],function(){var a=r.currentType().substring(0,5)==="audio";a||r.audioPosterMode()||r.audioOnlyMode()?(r.isInPictureInPicture()&&r.exitPictureInPicture(),s.hide()):s.show()}),s.disable(),s}var t=e.prototype;return t.buildCSSClass=function(){return"vjs-picture-in-picture-control "+i.prototype.buildCSSClass.call(this)},t.handlePictureInPictureEnabledChange=function(){Me.pictureInPictureEnabled&&this.player_.disablePictureInPicture()===!1?this.enable():this.disable()},t.handlePictureInPictureChange=function(n){this.player_.isInPictureInPicture()?this.controlText("Exit Picture-in-Picture"):this.controlText("Picture-in-Picture"),this.handlePictureInPictureEnabledChange()},t.handleClick=function(n){this.player_.isInPictureInPicture()?this.player_.exitPictureInPicture():this.player_.requestPictureInPicture()},e})(hl);EU.prototype.controlText_="Picture-in-Picture";xt.registerComponent("PictureInPictureToggle",EU);var wU=(function(i){Ft(e,i);function e(r,n){var s;return s=i.call(this,r,n)||this,s.on(r,"fullscreenchange",function(a){return s.handleFullscreenChange(a)}),Me[r.fsApi_.fullscreenEnabled]===!1&&s.disable(),s}var t=e.prototype;return t.buildCSSClass=function(){return"vjs-fullscreen-control "+i.prototype.buildCSSClass.call(this)},t.handleFullscreenChange=function(n){this.player_.isFullscreen()?this.controlText("Non-Fullscreen"):this.controlText("Fullscreen")},t.handleClick=function(n){this.player_.isFullscreen()?this.player_.exitFullscreen():this.player_.requestFullscreen()},e})(hl);wU.prototype.controlText_="Fullscreen";xt.registerComponent("FullscreenToggle",wU);var vfe=function(e,t){t.tech_&&!t.tech_.featuresVolumeControl&&e.addClass("vjs-hidden"),e.on(t,"loadstart",function(){t.tech_.featuresVolumeControl?e.removeClass("vjs-hidden"):e.addClass("vjs-hidden")})},yfe=(function(i){Ft(e,i);function e(){return i.apply(this,arguments)||this}var t=e.prototype;return t.createEl=function(){var n=i.prototype.createEl.call(this,"div",{className:"vjs-volume-level"});return n.appendChild(i.prototype.createEl.call(this,"span",{className:"vjs-control-text"})),n},e})(xt);xt.registerComponent("VolumeLevel",yfe);var _fe=(function(i){Ft(e,i);function e(r,n){var s;return s=i.call(this,r,n)||this,s.update=lc(Fi(je(s),s.update),ml),s}var t=e.prototype;return t.createEl=function(){return i.prototype.createEl.call(this,"div",{className:"vjs-volume-tooltip"},{"aria-hidden":"true"})},t.update=function(n,s,a,o){if(!a){var l=Tp(this.el_),u=Tp(this.player_.el()),c=n.width*s;if(!u||!l)return;var h=n.left-u.left+c,m=n.width-c+(u.right-n.right),g=l.width/2;h<g?g+=g-h:m<g&&(g=m),g<0?g=0:g>l.width&&(g=l.width),this.el_.style.right="-"+g+"px"}this.write(o+"%")},t.write=function(n){Fh(this.el_,n)},t.updateVolume=function(n,s,a,o,l){var u=this;this.requestNamedAnimationFrame("VolumeLevelTooltip#updateVolume",function(){u.update(n,s,a,o.toFixed(0)),l&&l()})},e})(xt);xt.registerComponent("VolumeLevelTooltip",_fe);var kU=(function(i){Ft(e,i);function e(r,n){var s;return s=i.call(this,r,n)||this,s.update=lc(Fi(je(s),s.update),ml),s}var t=e.prototype;return t.createEl=function(){return i.prototype.createEl.call(this,"div",{className:"vjs-mouse-display"})},t.update=function(n,s,a){var o=this,l=100*s;this.getChild("volumeLevelTooltip").updateVolume(n,s,a,l,function(){a?o.el_.style.bottom=n.height*s+"px":o.el_.style.left=n.width*s+"px"})},e})(xt);kU.prototype.options_={children:["volumeLevelTooltip"]};xt.registerComponent("MouseVolumeLevelDisplay",kU);var IT=(function(i){Ft(e,i);function e(r,n){var s;return s=i.call(this,r,n)||this,s.on("slideractive",function(a){return s.updateLastVolume_(a)}),s.on(r,"volumechange",function(a){return s.updateARIAAttributes(a)}),r.ready(function(){return s.updateARIAAttributes()}),s}var t=e.prototype;return t.createEl=function(){return i.prototype.createEl.call(this,"div",{className:"vjs-volume-bar vjs-slider-bar"},{"aria-label":this.localize("Volume Level"),"aria-live":"polite"})},t.handleMouseDown=function(n){B0(n)&&i.prototype.handleMouseDown.call(this,n)},t.handleMouseMove=function(n){var s=this.getChild("mouseVolumeLevelDisplay");if(s){var a=this.el(),o=Tp(a),l=this.vertical(),u=bT(a,n);u=l?u.y:u.x,u=AT(u,0,1),s.update(o,u,l)}B0(n)&&(this.checkMuted(),this.player_.volume(this.calculateDistance(n)))},t.checkMuted=function(){this.player_.muted()&&this.player_.muted(!1)},t.getPercent=function(){return this.player_.muted()?0:this.player_.volume()},t.stepForward=function(){this.checkMuted(),this.player_.volume(this.player_.volume()+.1)},t.stepBack=function(){this.checkMuted(),this.player_.volume(this.player_.volume()-.1)},t.updateARIAAttributes=function(n){var s=this.player_.muted()?0:this.volumeAsPercentage_();this.el_.setAttribute("aria-valuenow",s),this.el_.setAttribute("aria-valuetext",s+"%")},t.volumeAsPercentage_=function(){return Math.round(this.player_.volume()*100)},t.updateLastVolume_=function(){var n=this,s=this.player_.volume();this.one("sliderinactive",function(){n.player_.volume()===0&&n.player_.lastVolume_(s)})},e})(ek);IT.prototype.options_={children:["volumeLevel"],barName:"volumeLevel"};!ra&&!dc&&IT.prototype.options_.children.splice(0,0,"mouseVolumeLevelDisplay");IT.prototype.playerEvent="volumechange";xt.registerComponent("VolumeBar",IT);var AU=(function(i){Ft(e,i);function e(r,n){var s;return n===void 0&&(n={}),n.vertical=n.vertical||!1,(typeof n.volumeBar>"u"||O0(n.volumeBar))&&(n.volumeBar=n.volumeBar||{},n.volumeBar.vertical=n.vertical),s=i.call(this,r,n)||this,vfe(je(s),r),s.throttledHandleMouseMove=lc(Fi(je(s),s.handleMouseMove),ml),s.handleMouseUpHandler_=function(a){return s.handleMouseUp(a)},s.on("mousedown",function(a){return s.handleMouseDown(a)}),s.on("touchstart",function(a){return s.handleMouseDown(a)}),s.on("mousemove",function(a){return s.handleMouseMove(a)}),s.on(s.volumeBar,["focus","slideractive"],function(){s.volumeBar.addClass("vjs-slider-active"),s.addClass("vjs-slider-active"),s.trigger("slideractive")}),s.on(s.volumeBar,["blur","sliderinactive"],function(){s.volumeBar.removeClass("vjs-slider-active"),s.removeClass("vjs-slider-active"),s.trigger("sliderinactive")}),s}var t=e.prototype;return t.createEl=function(){var n="vjs-volume-horizontal";return this.options_.vertical&&(n="vjs-volume-vertical"),i.prototype.createEl.call(this,"div",{className:"vjs-volume-control vjs-control "+n})},t.handleMouseDown=function(n){var s=this.el_.ownerDocument;this.on(s,"mousemove",this.throttledHandleMouseMove),this.on(s,"touchmove",this.throttledHandleMouseMove),this.on(s,"mouseup",this.handleMouseUpHandler_),this.on(s,"touchend",this.handleMouseUpHandler_)},t.handleMouseUp=function(n){var s=this.el_.ownerDocument;this.off(s,"mousemove",this.throttledHandleMouseMove),this.off(s,"touchmove",this.throttledHandleMouseMove),this.off(s,"mouseup",this.handleMouseUpHandler_),this.off(s,"touchend",this.handleMouseUpHandler_)},t.handleMouseMove=function(n){this.volumeBar.handleMouseMove(n)},e})(xt);AU.prototype.options_={children:["volumeBar"]};xt.registerComponent("VolumeControl",AU);var xfe=function(e,t){t.tech_&&!t.tech_.featuresMuteControl&&e.addClass("vjs-hidden"),e.on(t,"loadstart",function(){t.tech_.featuresMuteControl?e.removeClass("vjs-hidden"):e.addClass("vjs-hidden")})},IU=(function(i){Ft(e,i);function e(r,n){var s;return s=i.call(this,r,n)||this,xfe(je(s),r),s.on(r,["loadstart","volumechange"],function(a){return s.update(a)}),s}var t=e.prototype;return t.buildCSSClass=function(){return"vjs-mute-control "+i.prototype.buildCSSClass.call(this)},t.handleClick=function(n){var s=this.player_.volume(),a=this.player_.lastVolume_();if(s===0){var o=a<.1?.1:a;this.player_.volume(o),this.player_.muted(!1)}else this.player_.muted(!this.player_.muted())},t.update=function(n){this.updateIcon_(),this.updateControlText_()},t.updateIcon_=function(){var n=this.player_.volume(),s=3;ra&&this.player_.tech_&&this.player_.tech_.el_&&this.player_.muted(this.player_.tech_.el_.muted),n===0||this.player_.muted()?s=0:n<.33?s=1:n<.67&&(s=2);for(var a=0;a<4;a++)dg(this.el_,"vjs-vol-"+a);nc(this.el_,"vjs-vol-"+s)},t.updateControlText_=function(){var n=this.player_.muted()||this.player_.volume()===0,s=n?"Unmute":"Mute";this.controlText()!==s&&this.controlText(s)},e})(hl);IU.prototype.controlText_="Mute";xt.registerComponent("MuteToggle",IU);var DU=(function(i){Ft(e,i);function e(r,n){var s;return n===void 0&&(n={}),typeof n.inline<"u"?n.inline=n.inline:n.inline=!0,(typeof n.volumeControl>"u"||O0(n.volumeControl))&&(n.volumeControl=n.volumeControl||{},n.volumeControl.vertical=!n.inline),s=i.call(this,r,n)||this,s.handleKeyPressHandler_=function(a){return s.handleKeyPress(a)},s.on(r,["loadstart"],function(a){return s.volumePanelState_(a)}),s.on(s.muteToggle,"keyup",function(a){return s.handleKeyPress(a)}),s.on(s.volumeControl,"keyup",function(a){return s.handleVolumeControlKeyUp(a)}),s.on("keydown",function(a){return s.handleKeyPress(a)}),s.on("mouseover",function(a){return s.handleMouseOver(a)}),s.on("mouseout",function(a){return s.handleMouseOut(a)}),s.on(s.volumeControl,["slideractive"],s.sliderActive_),s.on(s.volumeControl,["sliderinactive"],s.sliderInactive_),s}var t=e.prototype;return t.sliderActive_=function(){this.addClass("vjs-slider-active")},t.sliderInactive_=function(){this.removeClass("vjs-slider-active")},t.volumePanelState_=function(){this.volumeControl.hasClass("vjs-hidden")&&this.muteToggle.hasClass("vjs-hidden")&&this.addClass("vjs-hidden"),this.volumeControl.hasClass("vjs-hidden")&&!this.muteToggle.hasClass("vjs-hidden")&&this.addClass("vjs-mute-toggle-only")},t.createEl=function(){var n="vjs-volume-panel-horizontal";return this.options_.inline||(n="vjs-volume-panel-vertical"),i.prototype.createEl.call(this,"div",{className:"vjs-volume-panel vjs-control "+n})},t.dispose=function(){this.handleMouseOut(),i.prototype.dispose.call(this)},t.handleVolumeControlKeyUp=function(n){Ar.isEventKey(n,"Esc")&&this.muteToggle.focus()},t.handleMouseOver=function(n){this.addClass("vjs-hover"),ao(Me,"keyup",this.handleKeyPressHandler_)},t.handleMouseOut=function(n){this.removeClass("vjs-hover"),Os(Me,"keyup",this.handleKeyPressHandler_)},t.handleKeyPress=function(n){Ar.isEventKey(n,"Esc")&&this.handleMouseOut()},e})(xt);DU.prototype.options_={children:["muteToggle","volumeControl"]};xt.registerComponent("VolumePanel",DU);var PU=(function(i){Ft(e,i);function e(r,n){var s;return s=i.call(this,r,n)||this,n&&(s.menuButton_=n.menuButton),s.focusedChild_=-1,s.on("keydown",function(a){return s.handleKeyDown(a)}),s.boundHandleBlur_=function(a){return s.handleBlur(a)},s.boundHandleTapClick_=function(a){return s.handleTapClick(a)},s}var t=e.prototype;return t.addEventListenerForItem=function(n){n instanceof xt&&(this.on(n,"blur",this.boundHandleBlur_),this.on(n,["tap","click"],this.boundHandleTapClick_))},t.removeEventListenerForItem=function(n){n instanceof xt&&(this.off(n,"blur",this.boundHandleBlur_),this.off(n,["tap","click"],this.boundHandleTapClick_))},t.removeChild=function(n){typeof n=="string"&&(n=this.getChild(n)),this.removeEventListenerForItem(n),i.prototype.removeChild.call(this,n)},t.addItem=function(n){var s=this.addChild(n);s&&this.addEventListenerForItem(s)},t.createEl=function(){var n=this.options_.contentElType||"ul";this.contentEl_=ni(n,{className:"vjs-menu-content"}),this.contentEl_.setAttribute("role","menu");var s=i.prototype.createEl.call(this,"div",{append:this.contentEl_,className:"vjs-menu"});return s.appendChild(this.contentEl_),ao(s,"click",function(a){a.preventDefault(),a.stopImmediatePropagation()}),s},t.dispose=function(){this.contentEl_=null,this.boundHandleBlur_=null,this.boundHandleTapClick_=null,i.prototype.dispose.call(this)},t.handleBlur=function(n){var s=n.relatedTarget||Me.activeElement;if(!this.children().some(function(o){return o.el()===s})){var a=this.menuButton_;a&&a.buttonPressed_&&s!==a.el().firstChild&&a.unpressButton()}},t.handleTapClick=function(n){if(this.menuButton_){this.menuButton_.unpressButton();var s=this.children();if(!Array.isArray(s))return;var a=s.filter(function(o){return o.el()===n.target})[0];if(!a)return;a.name()!=="CaptionSettingsMenuItem"&&this.menuButton_.focus()}},t.handleKeyDown=function(n){Ar.isEventKey(n,"Left")||Ar.isEventKey(n,"Down")?(n.preventDefault(),n.stopPropagation(),this.stepForward()):(Ar.isEventKey(n,"Right")||Ar.isEventKey(n,"Up"))&&(n.preventDefault(),n.stopPropagation(),this.stepBack())},t.stepForward=function(){var n=0;this.focusedChild_!==void 0&&(n=this.focusedChild_+1),this.focus(n)},t.stepBack=function(){var n=0;this.focusedChild_!==void 0&&(n=this.focusedChild_-1),this.focus(n)},t.focus=function(n){n===void 0&&(n=0);var s=this.children().slice(),a=s.length&&s[0].hasClass("vjs-menu-title");a&&s.shift(),s.length>0&&(n<0?n=0:n>=s.length&&(n=s.length-1),this.focusedChild_=n,s[n].el_.focus())},e})(xt);xt.registerComponent("Menu",PU);var ik=(function(i){Ft(e,i);function e(r,n){var s;n===void 0&&(n={}),s=i.call(this,r,n)||this,s.menuButton_=new hl(r,n),s.menuButton_.controlText(s.controlText_),s.menuButton_.el_.setAttribute("aria-haspopup","true");var a=hl.prototype.buildCSSClass();s.menuButton_.el_.className=s.buildCSSClass()+" "+a,s.menuButton_.removeClass("vjs-control"),s.addChild(s.menuButton_),s.update(),s.enabled_=!0;var o=function(u){return s.handleClick(u)};return s.handleMenuKeyUp_=function(l){return s.handleMenuKeyUp(l)},s.on(s.menuButton_,"tap",o),s.on(s.menuButton_,"click",o),s.on(s.menuButton_,"keydown",function(l){return s.handleKeyDown(l)}),s.on(s.menuButton_,"mouseenter",function(){s.addClass("vjs-hover"),s.menu.show(),ao(Me,"keyup",s.handleMenuKeyUp_)}),s.on("mouseleave",function(l){return s.handleMouseLeave(l)}),s.on("keydown",function(l){return s.handleSubmenuKeyDown(l)}),s}var t=e.prototype;return t.update=function(){var n=this.createMenu();this.menu&&(this.menu.dispose(),this.removeChild(this.menu)),this.menu=n,this.addChild(n),this.buttonPressed_=!1,this.menuButton_.el_.setAttribute("aria-expanded","false"),this.items&&this.items.length<=this.hideThreshold_?(this.hide(),this.menu.contentEl_.removeAttribute("role")):(this.show(),this.menu.contentEl_.setAttribute("role","menu"))},t.createMenu=function(){var n=new PU(this.player_,{menuButton:this});if(this.hideThreshold_=0,this.options_.title){var s=ni("li",{className:"vjs-menu-title",textContent:fn(this.options_.title),tabIndex:-1}),a=new xt(this.player_,{el:s});n.addItem(a)}if(this.items=this.createItems(),this.items)for(var o=0;o<this.items.length;o++)n.addItem(this.items[o]);return n},t.createItems=function(){},t.createEl=function(){return i.prototype.createEl.call(this,"div",{className:this.buildWrapperCSSClass()},{})},t.buildWrapperCSSClass=function(){var n="vjs-menu-button";this.options_.inline===!0?n+="-inline":n+="-popup";var s=hl.prototype.buildCSSClass();return"vjs-menu-button "+n+" "+s+" "+i.prototype.buildCSSClass.call(this)},t.buildCSSClass=function(){var n="vjs-menu-button";return this.options_.inline===!0?n+="-inline":n+="-popup","vjs-menu-button "+n+" "+i.prototype.buildCSSClass.call(this)},t.controlText=function(n,s){return s===void 0&&(s=this.menuButton_.el()),this.menuButton_.controlText(n,s)},t.dispose=function(){this.handleMouseLeave(),i.prototype.dispose.call(this)},t.handleClick=function(n){this.buttonPressed_?this.unpressButton():this.pressButton()},t.handleMouseLeave=function(n){this.removeClass("vjs-hover"),Os(Me,"keyup",this.handleMenuKeyUp_)},t.focus=function(){this.menuButton_.focus()},t.blur=function(){this.menuButton_.blur()},t.handleKeyDown=function(n){Ar.isEventKey(n,"Esc")||Ar.isEventKey(n,"Tab")?(this.buttonPressed_&&this.unpressButton(),Ar.isEventKey(n,"Tab")||(n.preventDefault(),this.menuButton_.focus())):(Ar.isEventKey(n,"Up")||Ar.isEventKey(n,"Down"))&&(this.buttonPressed_||(n.preventDefault(),this.pressButton()))},t.handleMenuKeyUp=function(n){(Ar.isEventKey(n,"Esc")||Ar.isEventKey(n,"Tab"))&&this.removeClass("vjs-hover")},t.handleSubmenuKeyPress=function(n){this.handleSubmenuKeyDown(n)},t.handleSubmenuKeyDown=function(n){(Ar.isEventKey(n,"Esc")||Ar.isEventKey(n,"Tab"))&&(this.buttonPressed_&&this.unpressButton(),Ar.isEventKey(n,"Tab")||(n.preventDefault(),this.menuButton_.focus()))},t.pressButton=function(){if(this.enabled_){if(this.buttonPressed_=!0,this.menu.show(),this.menu.lockShowing(),this.menuButton_.el_.setAttribute("aria-expanded","true"),ra&&W6())return;this.menu.focus()}},t.unpressButton=function(){this.enabled_&&(this.buttonPressed_=!1,this.menu.unlockShowing(),this.menu.hide(),this.menuButton_.el_.setAttribute("aria-expanded","false"))},t.disable=function(){this.unpressButton(),this.enabled_=!1,this.addClass("vjs-disabled"),this.menuButton_.disable()},t.enable=function(){this.enabled_=!0,this.removeClass("vjs-disabled"),this.menuButton_.enable()},e})(xt);xt.registerComponent("MenuButton",ik);var nk=(function(i){Ft(e,i);function e(t,r){var n,s=r.tracks;if(n=i.call(this,t,r)||this,n.items.length<=1&&n.hide(),!s)return je(n);var a=Fi(je(n),n.update);return s.addEventListener("removetrack",a),s.addEventListener("addtrack",a),s.addEventListener("labelchange",a),n.player_.on("ready",a),n.player_.on("dispose",function(){s.removeEventListener("removetrack",a),s.removeEventListener("addtrack",a),s.removeEventListener("labelchange",a)}),n}return e})(ik);xt.registerComponent("TrackButton",nk);var Tfe=["Tab","Esc","Up","Down","Right","Left"],fg=(function(i){Ft(e,i);function e(r,n){var s;return s=i.call(this,r,n)||this,s.selectable=n.selectable,s.isSelected_=n.selected||!1,s.multiSelectable=n.multiSelectable,s.selected(s.isSelected_),s.selectable?s.multiSelectable?s.el_.setAttribute("role","menuitemcheckbox"):s.el_.setAttribute("role","menuitemradio"):s.el_.setAttribute("role","menuitem"),s}var t=e.prototype;return t.createEl=function(n,s,a){this.nonIconControl=!0;var o=i.prototype.createEl.call(this,"li",rn({className:"vjs-menu-item",tabIndex:-1},s),a);return o.replaceChild(ni("span",{className:"vjs-menu-item-text",textContent:this.localize(this.options_.label)}),o.querySelector(".vjs-icon-placeholder")),o},t.handleKeyDown=function(n){Tfe.some(function(s){return Ar.isEventKey(n,s)})||i.prototype.handleKeyDown.call(this,n)},t.handleClick=function(n){this.selected(!0)},t.selected=function(n){this.selectable&&(n?(this.addClass("vjs-selected"),this.el_.setAttribute("aria-checked","true"),this.controlText(", selected"),this.isSelected_=!0):(this.removeClass("vjs-selected"),this.el_.setAttribute("aria-checked","false"),this.controlText(""),this.isSelected_=!1))},e})(kT);xt.registerComponent("MenuItem",fg);var pg=(function(i){Ft(e,i);function e(r,n){var s,a=n.track,o=r.textTracks();n.label=a.label||a.language||"Unknown",n.selected=a.mode==="showing",s=i.call(this,r,n)||this,s.track=a,s.kinds=(n.kinds||[n.kind||s.track.kind]).filter(Boolean);var l=function(){for(var m=arguments.length,g=new Array(m),y=0;y<m;y++)g[y]=arguments[y];s.handleTracksChange.apply(je(s),g)},u=function(){for(var m=arguments.length,g=new Array(m),y=0;y<m;y++)g[y]=arguments[y];s.handleSelectedLanguageChange.apply(je(s),g)};if(r.on(["loadstart","texttrackchange"],l),o.addEventListener("change",l),o.addEventListener("selectedlanguagechange",u),s.on("dispose",function(){r.off(["loadstart","texttrackchange"],l),o.removeEventListener("change",l),o.removeEventListener("selectedlanguagechange",u)}),o.onchange===void 0){var c;s.on(["tap","click"],function(){if(typeof X.Event!="object")try{c=new X.Event("change")}catch{}c||(c=Me.createEvent("Event"),c.initEvent("change",!0,!0)),o.dispatchEvent(c)})}return s.handleTracksChange(),s}var t=e.prototype;return t.handleClick=function(n){var s=this.track,a=this.player_.textTracks();if(i.prototype.handleClick.call(this,n),!!a)for(var o=0;o<a.length;o++){var l=a[o];this.kinds.indexOf(l.kind)!==-1&&(l===s?l.mode!=="showing"&&(l.mode="showing"):l.mode!=="disabled"&&(l.mode="disabled"))}},t.handleTracksChange=function(n){var s=this.track.mode==="showing";s!==this.isSelected_&&this.selected(s)},t.handleSelectedLanguageChange=function(n){if(this.track.mode==="showing"){var s=this.player_.cache_.selectedLanguage;if(s&&s.enabled&&s.language===this.track.language&&s.kind!==this.track.kind)return;this.player_.cache_.selectedLanguage={enabled:!0,language:this.track.language,kind:this.track.kind}}},t.dispose=function(){this.track=null,i.prototype.dispose.call(this)},e})(fg);xt.registerComponent("TextTrackMenuItem",pg);var RU=(function(i){Ft(e,i);function e(r,n){return n.track={player:r,kind:n.kind,kinds:n.kinds,default:!1,mode:"disabled"},n.kinds||(n.kinds=[n.kind]),n.label?n.track.label=n.label:n.track.label=n.kinds.join(" and ")+" off",n.selectable=!0,n.multiSelectable=!1,i.call(this,r,n)||this}var t=e.prototype;return t.handleTracksChange=function(n){for(var s=this.player().textTracks(),a=!0,o=0,l=s.length;o<l;o++){var u=s[o];if(this.options_.kinds.indexOf(u.kind)>-1&&u.mode==="showing"){a=!1;break}}a!==this.isSelected_&&this.selected(a)},t.handleSelectedLanguageChange=function(n){for(var s=this.player().textTracks(),a=!0,o=0,l=s.length;o<l;o++){var u=s[o];if(["captions","descriptions","subtitles"].indexOf(u.kind)>-1&&u.mode==="showing"){a=!1;break}}a&&(this.player_.cache_.selectedLanguage={enabled:!1})},e})(pg);xt.registerComponent("OffTextTrackMenuItem",RU);var Gp=(function(i){Ft(e,i);function e(r,n){return n===void 0&&(n={}),n.tracks=r.textTracks(),i.call(this,r,n)||this}var t=e.prototype;return t.createItems=function(n,s){n===void 0&&(n=[]),s===void 0&&(s=pg);var a;this.label_&&(a=this.label_+" off"),n.push(new RU(this.player_,{kinds:this.kinds_,kind:this.kind_,label:a})),this.hideThreshold_+=1;var o=this.player_.textTracks();Array.isArray(this.kinds_)||(this.kinds_=[this.kind_]);for(var l=0;l<o.length;l++){var u=o[l];if(this.kinds_.indexOf(u.kind)>-1){var c=new s(this.player_,{track:u,kinds:this.kinds_,kind:this.kind_,selectable:!0,multiSelectable:!1});c.addClass("vjs-"+u.kind+"-menu-item"),n.push(c)}}return n},e})(nk);xt.registerComponent("TextTrackButton",Gp);var LU=(function(i){Ft(e,i);function e(r,n){var s,a=n.track,o=n.cue,l=r.currentTime();return n.selectable=!0,n.multiSelectable=!1,n.label=o.text,n.selected=o.startTime<=l&&l<o.endTime,s=i.call(this,r,n)||this,s.track=a,s.cue=o,s}var t=e.prototype;return t.handleClick=function(n){i.prototype.handleClick.call(this),this.player_.currentTime(this.cue.startTime)},e})(fg);xt.registerComponent("ChaptersTrackMenuItem",LU);var sk=(function(i){Ft(e,i);function e(r,n,s){var a;return a=i.call(this,r,n,s)||this,a.selectCurrentItem_=function(){a.items.forEach(function(o){o.selected(a.track_.activeCues[0]===o.cue)})},a}var t=e.prototype;return t.buildCSSClass=function(){return"vjs-chapters-button "+i.prototype.buildCSSClass.call(this)},t.buildWrapperCSSClass=function(){return"vjs-chapters-button "+i.prototype.buildWrapperCSSClass.call(this)},t.update=function(n){if(!(n&&n.track&&n.track.kind!=="chapters")){var s=this.findChaptersTrack();s!==this.track_?(this.setTrack(s),i.prototype.update.call(this)):(!this.items||s&&s.cues&&s.cues.length!==this.items.length)&&i.prototype.update.call(this)}},t.setTrack=function(n){if(this.track_!==n){if(this.updateHandler_||(this.updateHandler_=this.update.bind(this)),this.track_){var s=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_);s&&s.removeEventListener("load",this.updateHandler_),this.track_.removeEventListener("cuechange",this.selectCurrentItem_),this.track_=null}if(this.track_=n,this.track_){this.track_.mode="hidden";var a=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_);a&&a.addEventListener("load",this.updateHandler_),this.track_.addEventListener("cuechange",this.selectCurrentItem_)}}},t.findChaptersTrack=function(){for(var n=this.player_.textTracks()||[],s=n.length-1;s>=0;s--){var a=n[s];if(a.kind===this.kind_)return a}},t.getMenuCaption=function(){return this.track_&&this.track_.label?this.track_.label:this.localize(fn(this.kind_))},t.createMenu=function(){return this.options_.title=this.getMenuCaption(),i.prototype.createMenu.call(this)},t.createItems=function(){var n=[];if(!this.track_)return n;var s=this.track_.cues;if(!s)return n;for(var a=0,o=s.length;a<o;a++){var l=s[a],u=new LU(this.player_,{track:this.track_,cue:l});n.push(u)}return n},e})(Gp);sk.prototype.kind_="chapters";sk.prototype.controlText_="Chapters";xt.registerComponent("ChaptersButton",sk);var ak=(function(i){Ft(e,i);function e(r,n,s){var a;a=i.call(this,r,n,s)||this;var o=r.textTracks(),l=Fi(je(a),a.handleTracksChange);return o.addEventListener("change",l),a.on("dispose",function(){o.removeEventListener("change",l)}),a}var t=e.prototype;return t.handleTracksChange=function(n){for(var s=this.player().textTracks(),a=!1,o=0,l=s.length;o<l;o++){var u=s[o];if(u.kind!==this.kind_&&u.mode==="showing"){a=!0;break}}a?this.disable():this.enable()},t.buildCSSClass=function(){return"vjs-descriptions-button "+i.prototype.buildCSSClass.call(this)},t.buildWrapperCSSClass=function(){return"vjs-descriptions-button "+i.prototype.buildWrapperCSSClass.call(this)},e})(Gp);ak.prototype.kind_="descriptions";ak.prototype.controlText_="Descriptions";xt.registerComponent("DescriptionsButton",ak);var ok=(function(i){Ft(e,i);function e(r,n,s){return i.call(this,r,n,s)||this}var t=e.prototype;return t.buildCSSClass=function(){return"vjs-subtitles-button "+i.prototype.buildCSSClass.call(this)},t.buildWrapperCSSClass=function(){return"vjs-subtitles-button "+i.prototype.buildWrapperCSSClass.call(this)},e})(Gp);ok.prototype.kind_="subtitles";ok.prototype.controlText_="Subtitles";xt.registerComponent("SubtitlesButton",ok);var lk=(function(i){Ft(e,i);function e(r,n){var s;return n.track={player:r,kind:n.kind,label:n.kind+" settings",selectable:!1,default:!1,mode:"disabled"},n.selectable=!1,n.name="CaptionSettingsMenuItem",s=i.call(this,r,n)||this,s.addClass("vjs-texttrack-settings"),s.controlText(", opens "+n.kind+" settings dialog"),s}var t=e.prototype;return t.handleClick=function(n){this.player().getChild("textTrackSettings").open()},e})(pg);xt.registerComponent("CaptionSettingsMenuItem",lk);var uk=(function(i){Ft(e,i);function e(r,n,s){return i.call(this,r,n,s)||this}var t=e.prototype;return t.buildCSSClass=function(){return"vjs-captions-button "+i.prototype.buildCSSClass.call(this)},t.buildWrapperCSSClass=function(){return"vjs-captions-button "+i.prototype.buildWrapperCSSClass.call(this)},t.createItems=function(){var n=[];return!(this.player().tech_&&this.player().tech_.featuresNativeTextTracks)&&this.player().getChild("textTrackSettings")&&(n.push(new lk(this.player_,{kind:this.kind_})),this.hideThreshold_+=1),i.prototype.createItems.call(this,n)},e})(Gp);uk.prototype.kind_="captions";uk.prototype.controlText_="Captions";xt.registerComponent("CaptionsButton",uk);var OU=(function(i){Ft(e,i);function e(){return i.apply(this,arguments)||this}var t=e.prototype;return t.createEl=function(n,s,a){var o=i.prototype.createEl.call(this,n,s,a),l=o.querySelector(".vjs-menu-item-text");return this.options_.track.kind==="captions"&&(l.appendChild(ni("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),l.appendChild(ni("span",{className:"vjs-control-text",textContent:" "+this.localize("Captions")}))),o},e})(pg);xt.registerComponent("SubsCapsMenuItem",OU);var ck=(function(i){Ft(e,i);function e(r,n){var s;return n===void 0&&(n={}),s=i.call(this,r,n)||this,s.label_="subtitles",["en","en-us","en-ca","fr-ca"].indexOf(s.player_.language_)>-1&&(s.label_="captions"),s.menuButton_.controlText(fn(s.label_)),s}var t=e.prototype;return t.buildCSSClass=function(){return"vjs-subs-caps-button "+i.prototype.buildCSSClass.call(this)},t.buildWrapperCSSClass=function(){return"vjs-subs-caps-button "+i.prototype.buildWrapperCSSClass.call(this)},t.createItems=function(){var n=[];return!(this.player().tech_&&this.player().tech_.featuresNativeTextTracks)&&this.player().getChild("textTrackSettings")&&(n.push(new lk(this.player_,{kind:this.label_})),this.hideThreshold_+=1),n=i.prototype.createItems.call(this,n,OU),n},e})(Gp);ck.prototype.kinds_=["captions","subtitles"];ck.prototype.controlText_="Subtitles";xt.registerComponent("SubsCapsButton",ck);var MU=(function(i){Ft(e,i);function e(r,n){var s,a=n.track,o=r.audioTracks();n.label=a.label||a.language||"Unknown",n.selected=a.enabled,s=i.call(this,r,n)||this,s.track=a,s.addClass("vjs-"+a.kind+"-menu-item");var l=function(){for(var c=arguments.length,h=new Array(c),m=0;m<c;m++)h[m]=arguments[m];s.handleTracksChange.apply(je(s),h)};return o.addEventListener("change",l),s.on("dispose",function(){o.removeEventListener("change",l)}),s}var t=e.prototype;return t.createEl=function(n,s,a){var o=i.prototype.createEl.call(this,n,s,a),l=o.querySelector(".vjs-menu-item-text");return this.options_.track.kind==="main-desc"&&(l.appendChild(ni("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),l.appendChild(ni("span",{className:"vjs-control-text",textContent:" "+this.localize("Descriptions")}))),o},t.handleClick=function(n){if(i.prototype.handleClick.call(this,n),this.track.enabled=!0,this.player_.tech_.featuresNativeAudioTracks)for(var s=this.player_.audioTracks(),a=0;a<s.length;a++){var o=s[a];o!==this.track&&(o.enabled=o===this.track)}},t.handleTracksChange=function(n){this.selected(this.track.enabled)},e})(fg);xt.registerComponent("AudioTrackMenuItem",MU);var FU=(function(i){Ft(e,i);function e(r,n){return n===void 0&&(n={}),n.tracks=r.audioTracks(),i.call(this,r,n)||this}var t=e.prototype;return t.buildCSSClass=function(){return"vjs-audio-button "+i.prototype.buildCSSClass.call(this)},t.buildWrapperCSSClass=function(){return"vjs-audio-button "+i.prototype.buildWrapperCSSClass.call(this)},t.createItems=function(n){n===void 0&&(n=[]),this.hideThreshold_=1;for(var s=this.player_.audioTracks(),a=0;a<s.length;a++){var o=s[a];n.push(new MU(this.player_,{track:o,selectable:!0,multiSelectable:!1}))}return n},e})(nk);FU.prototype.controlText_="Audio Track";xt.registerComponent("AudioTrackButton",FU);var dk=(function(i){Ft(e,i);function e(r,n){var s,a=n.rate,o=parseFloat(a,10);return n.label=a,n.selected=o===r.playbackRate(),n.selectable=!0,n.multiSelectable=!1,s=i.call(this,r,n)||this,s.label=a,s.rate=o,s.on(r,"ratechange",function(l){return s.update(l)}),s}var t=e.prototype;return t.handleClick=function(n){i.prototype.handleClick.call(this),this.player().playbackRate(this.rate)},t.update=function(n){this.selected(this.player().playbackRate()===this.rate)},e})(fg);dk.prototype.contentElType="button";xt.registerComponent("PlaybackRateMenuItem",dk);var BU=(function(i){Ft(e,i);function e(r,n){var s;return s=i.call(this,r,n)||this,s.menuButton_.el_.setAttribute("aria-describedby",s.labelElId_),s.updateVisibility(),s.updateLabel(),s.on(r,"loadstart",function(a){return s.updateVisibility(a)}),s.on(r,"ratechange",function(a){return s.updateLabel(a)}),s.on(r,"playbackrateschange",function(a){return s.handlePlaybackRateschange(a)}),s}var t=e.prototype;return t.createEl=function(){var n=i.prototype.createEl.call(this);return this.labelElId_="vjs-playback-rate-value-label-"+this.id_,this.labelEl_=ni("div",{className:"vjs-playback-rate-value",id:this.labelElId_,textContent:"1x"}),n.appendChild(this.labelEl_),n},t.dispose=function(){this.labelEl_=null,i.prototype.dispose.call(this)},t.buildCSSClass=function(){return"vjs-playback-rate "+i.prototype.buildCSSClass.call(this)},t.buildWrapperCSSClass=function(){return"vjs-playback-rate "+i.prototype.buildWrapperCSSClass.call(this)},t.createItems=function(){for(var n=this.playbackRates(),s=[],a=n.length-1;a>=0;a--)s.push(new dk(this.player(),{rate:n[a]+"x"}));return s},t.updateARIAAttributes=function(){this.el().setAttribute("aria-valuenow",this.player().playbackRate())},t.handleClick=function(n){var s=this.player().playbackRate(),a=this.playbackRates(),o=a.indexOf(s),l=(o+1)%a.length;this.player().playbackRate(a[l])},t.handlePlaybackRateschange=function(n){this.update()},t.playbackRates=function(){var n=this.player();return n.playbackRates&&n.playbackRates()||[]},t.playbackRateSupported=function(){return this.player().tech_&&this.player().tech_.featuresPlaybackRate&&this.playbackRates()&&this.playbackRates().length>0},t.updateVisibility=function(n){this.playbackRateSupported()?this.removeClass("vjs-hidden"):this.addClass("vjs-hidden")},t.updateLabel=function(n){this.playbackRateSupported()&&(this.labelEl_.textContent=this.player().playbackRate()+"x")},e})(ik);BU.prototype.controlText_="Playback Rate";xt.registerComponent("PlaybackRateMenuButton",BU);var NU=(function(i){Ft(e,i);function e(){return i.apply(this,arguments)||this}var t=e.prototype;return t.buildCSSClass=function(){return"vjs-spacer "+i.prototype.buildCSSClass.call(this)},t.createEl=function(n,s,a){return n===void 0&&(n="div"),s===void 0&&(s={}),a===void 0&&(a={}),s.className||(s.className=this.buildCSSClass()),i.prototype.createEl.call(this,n,s,a)},e})(xt);xt.registerComponent("Spacer",NU);var bfe=(function(i){Ft(e,i);function e(){return i.apply(this,arguments)||this}var t=e.prototype;return t.buildCSSClass=function(){return"vjs-custom-control-spacer "+i.prototype.buildCSSClass.call(this)},t.createEl=function(){return i.prototype.createEl.call(this,"div",{className:this.buildCSSClass(),textContent:""})},e})(NU);xt.registerComponent("CustomControlSpacer",bfe);var Q_=(function(i){Ft(e,i);function e(){return i.apply(this,arguments)||this}var t=e.prototype;return t.createEl=function(){return i.prototype.createEl.call(this,"div",{className:"vjs-control-bar",dir:"ltr"})},e})(xt);Q_.prototype.options_={children:["playToggle","volumePanel","currentTimeDisplay","timeDivider","durationDisplay","progressControl","liveDisplay","seekToLive","remainingTimeDisplay","customControlSpacer","playbackRateMenuButton","chaptersButton","descriptionsButton","subsCapsButton","audioTrackButton","fullscreenToggle"]};"exitPictureInPicture"in Me&&Q_.prototype.options_.children.splice(Q_.prototype.options_.children.length-1,0,"pictureInPictureToggle");xt.registerComponent("ControlBar",Q_);var UU=(function(i){Ft(e,i);function e(r,n){var s;return s=i.call(this,r,n)||this,s.on(r,"error",function(a){return s.open(a)}),s}var t=e.prototype;return t.buildCSSClass=function(){return"vjs-error-display "+i.prototype.buildCSSClass.call(this)},t.content=function(){var n=this.player().error();return n?this.localize(n.message):""},e})(Vp);UU.prototype.options_=Jt({},Vp.prototype.options_,{pauseOnOpen:!1,fillAlways:!0,temporary:!1,uncloseable:!0});xt.registerComponent("ErrorDisplay",UU);var E1="vjs-text-track-settings",U4=["#000","Black"],$4=["#00F","Blue"],j4=["#0FF","Cyan"],z4=["#0F0","Green"],H4=["#F0F","Magenta"],V4=["#F00","Red"],q4=["#FFF","White"],W4=["#FF0","Yellow"],w1=["1","Opaque"],k1=["0.5","Semi-Transparent"],G4=["0","Transparent"],rh={backgroundColor:{selector:".vjs-bg-color > select",id:"captions-background-color-%s",label:"Color",options:[U4,q4,V4,z4,$4,W4,H4,j4]},backgroundOpacity:{selector:".vjs-bg-opacity > select",id:"captions-background-opacity-%s",label:"Transparency",options:[w1,k1,G4]},color:{selector:".vjs-fg-color > select",id:"captions-foreground-color-%s",label:"Color",options:[q4,U4,V4,z4,$4,W4,H4,j4]},edgeStyle:{selector:".vjs-edge-style > select",id:"%s",label:"Text Edge Style",options:[["none","None"],["raised","Raised"],["depressed","Depressed"],["uniform","Uniform"],["dropshadow","Dropshadow"]]},fontFamily:{selector:".vjs-font-family > select",id:"captions-font-family-%s",label:"Font Family",options:[["proportionalSansSerif","Proportional Sans-Serif"],["monospaceSansSerif","Monospace Sans-Serif"],["proportionalSerif","Proportional Serif"],["monospaceSerif","Monospace Serif"],["casual","Casual"],["script","Script"],["small-caps","Small Caps"]]},fontPercent:{selector:".vjs-font-percent > select",id:"captions-font-size-%s",label:"Font Size",options:[["0.50","50%"],["0.75","75%"],["1.00","100%"],["1.25","125%"],["1.50","150%"],["1.75","175%"],["2.00","200%"],["3.00","300%"],["4.00","400%"]],default:2,parser:function(e){return e==="1.00"?null:Number(e)}},textOpacity:{selector:".vjs-text-opacity > select",id:"captions-foreground-opacity-%s",label:"Transparency",options:[w1,k1]},windowColor:{selector:".vjs-window-color > select",id:"captions-window-color-%s",label:"Color"},windowOpacity:{selector:".vjs-window-opacity > select",id:"captions-window-opacity-%s",label:"Transparency",options:[G4,k1,w1]}};rh.windowColor.options=rh.backgroundColor.options;function $U(i,e){if(e&&(i=e(i)),i&&i!=="none")return i}function Sfe(i,e){var t=i.options[i.options.selectedIndex].value;return $U(t,e)}function Cfe(i,e,t){if(e){for(var r=0;r<i.options.length;r++)if($U(i.options[r].value,t)===e){i.selectedIndex=r;break}}}var Efe=(function(i){Ft(e,i);function e(r,n){var s;return n.temporary=!1,s=i.call(this,r,n)||this,s.updateDisplay=s.updateDisplay.bind(je(s)),s.fill(),s.hasBeenOpened_=s.hasBeenFilled_=!0,s.endDialog=ni("p",{className:"vjs-control-text",textContent:s.localize("End of dialog window.")}),s.el().appendChild(s.endDialog),s.setDefaults(),n.persistTextTrackSettings===void 0&&(s.options_.persistTextTrackSettings=s.options_.playerOptions.persistTextTrackSettings),s.on(s.$(".vjs-done-button"),"click",function(){s.saveSettings(),s.close()}),s.on(s.$(".vjs-default-button"),"click",function(){s.setDefaults(),s.updateDisplay()}),Jf(rh,function(a){s.on(s.$(a.selector),"change",s.updateDisplay)}),s.options_.persistTextTrackSettings&&s.restoreSettings(),s}var t=e.prototype;return t.dispose=function(){this.endDialog=null,i.prototype.dispose.call(this)},t.createElSelect_=function(n,s,a){var o=this;s===void 0&&(s=""),a===void 0&&(a="label");var l=rh[n],u=l.id.replace("%s",this.id_),c=[s,u].join(" ").trim();return["<"+a+' id="'+u+'" class="'+(a==="label"?"vjs-label":"")+'">',this.localize(l.label),"</"+a+">",'<select aria-labelledby="'+c+'">'].concat(l.options.map(function(h){var m=u+"-"+h[1].replace(/\W+/g,"");return['<option id="'+m+'" value="'+h[0]+'" ','aria-labelledby="'+c+" "+m+'">',o.localize(h[1]),"</option>"].join("")})).concat("</select>").join("")},t.createElFgColor_=function(){var n="captions-text-legend-"+this.id_;return['<fieldset class="vjs-fg-color vjs-track-setting">','<legend id="'+n+'">',this.localize("Text"),"</legend>",this.createElSelect_("color",n),'<span class="vjs-text-opacity vjs-opacity">',this.createElSelect_("textOpacity",n),"</span>","</fieldset>"].join("")},t.createElBgColor_=function(){var n="captions-background-"+this.id_;return['<fieldset class="vjs-bg-color vjs-track-setting">','<legend id="'+n+'">',this.localize("Background"),"</legend>",this.createElSelect_("backgroundColor",n),'<span class="vjs-bg-opacity vjs-opacity">',this.createElSelect_("backgroundOpacity",n),"</span>","</fieldset>"].join("")},t.createElWinColor_=function(){var n="captions-window-"+this.id_;return['<fieldset class="vjs-window-color vjs-track-setting">','<legend id="'+n+'">',this.localize("Window"),"</legend>",this.createElSelect_("windowColor",n),'<span class="vjs-window-opacity vjs-opacity">',this.createElSelect_("windowOpacity",n),"</span>","</fieldset>"].join("")},t.createElColors_=function(){return ni("div",{className:"vjs-track-settings-colors",innerHTML:[this.createElFgColor_(),this.createElBgColor_(),this.createElWinColor_()].join("")})},t.createElFont_=function(){return ni("div",{className:"vjs-track-settings-font",innerHTML:['<fieldset class="vjs-font-percent vjs-track-setting">',this.createElSelect_("fontPercent","","legend"),"</fieldset>",'<fieldset class="vjs-edge-style vjs-track-setting">',this.createElSelect_("edgeStyle","","legend"),"</fieldset>",'<fieldset class="vjs-font-family vjs-track-setting">',this.createElSelect_("fontFamily","","legend"),"</fieldset>"].join("")})},t.createElControls_=function(){var n=this.localize("restore all settings to the default values");return ni("div",{className:"vjs-track-settings-controls",innerHTML:['<button type="button" class="vjs-default-button" title="'+n+'">',this.localize("Reset"),'<span class="vjs-control-text"> '+n+"</span>","</button>",'<button type="button" class="vjs-done-button">'+this.localize("Done")+"</button>"].join("")})},t.content=function(){return[this.createElColors_(),this.createElFont_(),this.createElControls_()]},t.label=function(){return this.localize("Caption Settings Dialog")},t.description=function(){return this.localize("Beginning of dialog window. Escape will cancel and close the window.")},t.buildCSSClass=function(){return i.prototype.buildCSSClass.call(this)+" vjs-text-track-settings"},t.getValues=function(){var n=this;return fhe(rh,function(s,a,o){var l=Sfe(n.$(a.selector),a.parser);return l!==void 0&&(s[o]=l),s},{})},t.setValues=function(n){var s=this;Jf(rh,function(a,o){Cfe(s.$(a.selector),n[o],a.parser)})},t.setDefaults=function(){var n=this;Jf(rh,function(s){var a=s.hasOwnProperty("default")?s.default:0;n.$(s.selector).selectedIndex=a})},t.restoreSettings=function(){var n;try{n=JSON.parse(X.localStorage.getItem(E1))}catch(s){Nr.warn(s)}n&&this.setValues(n)},t.saveSettings=function(){if(this.options_.persistTextTrackSettings){var n=this.getValues();try{Object.keys(n).length?X.localStorage.setItem(E1,JSON.stringify(n)):X.localStorage.removeItem(E1)}catch(s){Nr.warn(s)}}},t.updateDisplay=function(){var n=this.player_.getChild("textTrackDisplay");n&&n.updateDisplay()},t.conditionalBlur_=function(){this.previouslyActiveEl_=null;var n=this.player_.controlBar,s=n&&n.subsCapsButton,a=n&&n.captionsButton;s?s.focus():a&&a.focus()},e})(Vp);xt.registerComponent("TextTrackSettings",Efe);var wfe=(function(i){Ft(e,i);function e(r,n){var s,a=n.ResizeObserver||X.ResizeObserver;n.ResizeObserver===null&&(a=!1);var o=Mi({createEl:!a,reportTouchActivity:!1},n);return s=i.call(this,r,o)||this,s.ResizeObserver=n.ResizeObserver||X.ResizeObserver,s.loadListener_=null,s.resizeObserver_=null,s.debouncedHandler_=Che(function(){s.resizeHandler()},100,!1,je(s)),a?(s.resizeObserver_=new s.ResizeObserver(s.debouncedHandler_),s.resizeObserver_.observe(r.el())):(s.loadListener_=function(){if(!(!s.el_||!s.el_.contentWindow)){var l=s.debouncedHandler_,u=s.unloadListener_=function(){Os(this,"resize",l),Os(this,"unload",u),u=null};ao(s.el_.contentWindow,"unload",u),ao(s.el_.contentWindow,"resize",l)}},s.one("load",s.loadListener_)),s}var t=e.prototype;return t.createEl=function(){return i.prototype.createEl.call(this,"iframe",{className:"vjs-resize-manager",tabIndex:-1,title:this.localize("No content")},{"aria-hidden":"true"})},t.resizeHandler=function(){!this.player_||!this.player_.trigger||this.player_.trigger("playerresize")},t.dispose=function(){this.debouncedHandler_&&this.debouncedHandler_.cancel(),this.resizeObserver_&&(this.player_.el()&&this.resizeObserver_.unobserve(this.player_.el()),this.resizeObserver_.disconnect()),this.loadListener_&&this.off("load",this.loadListener_),this.el_&&this.el_.contentWindow&&this.unloadListener_&&this.unloadListener_.call(this.el_.contentWindow),this.ResizeObserver=null,this.resizeObserver=null,this.debouncedHandler_=null,this.loadListener_=null,i.prototype.dispose.call(this)},e})(xt);xt.registerComponent("ResizeManager",wfe);var kfe={trackingThreshold:20,liveTolerance:15},Afe=(function(i){Ft(e,i);function e(r,n){var s,a=Mi(kfe,n,{createEl:!1});return s=i.call(this,r,a)||this,s.handleVisibilityChange_=function(o){return s.handleVisibilityChange(o)},s.trackLiveHandler_=function(){return s.trackLive_()},s.handlePlay_=function(o){return s.handlePlay(o)},s.handleFirstTimeupdate_=function(o){return s.handleFirstTimeupdate(o)},s.handleSeeked_=function(o){return s.handleSeeked(o)},s.seekToLiveEdge_=function(o){return s.seekToLiveEdge(o)},s.reset_(),s.on(s.player_,"durationchange",function(o){return s.handleDurationchange(o)}),s.on(s.player_,"canplay",function(){return s.toggleTracking()}),cg&&"hidden"in Me&&"visibilityState"in Me&&s.on(Me,"visibilitychange",s.handleVisibilityChange_),s}var t=e.prototype;return t.handleVisibilityChange=function(){this.player_.duration()===1/0&&(Me.hidden?this.stopTracking():this.startTracking())},t.trackLive_=function(){var n=this.player_.seekable();if(!(!n||!n.length)){var s=Number(X.performance.now().toFixed(4)),a=this.lastTime_===-1?0:(s-this.lastTime_)/1e3;this.lastTime_=s,this.pastSeekEnd_=this.pastSeekEnd()+a;var o=this.liveCurrentTime(),l=this.player_.currentTime(),u=this.player_.paused()||this.seekedBehindLive_||Math.abs(o-l)>this.options_.liveTolerance;(!this.timeupdateSeen_||o===1/0)&&(u=!1),u!==this.behindLiveEdge_&&(this.behindLiveEdge_=u,this.trigger("liveedgechange"))}},t.handleDurationchange=function(){this.toggleTracking()},t.toggleTracking=function(){this.player_.duration()===1/0&&this.liveWindow()>=this.options_.trackingThreshold?(this.player_.options_.liveui&&this.player_.addClass("vjs-liveui"),this.startTracking()):(this.player_.removeClass("vjs-liveui"),this.stopTracking())},t.startTracking=function(){this.isTracking()||(this.timeupdateSeen_||(this.timeupdateSeen_=this.player_.hasStarted()),this.trackingInterval_=this.setInterval(this.trackLiveHandler_,ml),this.trackLive_(),this.on(this.player_,["play","pause"],this.trackLiveHandler_),this.timeupdateSeen_?this.on(this.player_,"seeked",this.handleSeeked_):(this.one(this.player_,"play",this.handlePlay_),this.one(this.player_,"timeupdate",this.handleFirstTimeupdate_)))},t.handleFirstTimeupdate=function(){this.timeupdateSeen_=!0,this.on(this.player_,"seeked",this.handleSeeked_)},t.handleSeeked=function(){var n=Math.abs(this.liveCurrentTime()-this.player_.currentTime());this.seekedBehindLive_=this.nextSeekedFromUser_&&n>2,this.nextSeekedFromUser_=!1,this.trackLive_()},t.handlePlay=function(){this.one(this.player_,"timeupdate",this.seekToLiveEdge_)},t.reset_=function(){this.lastTime_=-1,this.pastSeekEnd_=0,this.lastSeekEnd_=-1,this.behindLiveEdge_=!0,this.timeupdateSeen_=!1,this.seekedBehindLive_=!1,this.nextSeekedFromUser_=!1,this.clearInterval(this.trackingInterval_),this.trackingInterval_=null,this.off(this.player_,["play","pause"],this.trackLiveHandler_),this.off(this.player_,"seeked",this.handleSeeked_),this.off(this.player_,"play",this.handlePlay_),this.off(this.player_,"timeupdate",this.handleFirstTimeupdate_),this.off(this.player_,"timeupdate",this.seekToLiveEdge_)},t.nextSeekedFromUser=function(){this.nextSeekedFromUser_=!0},t.stopTracking=function(){this.isTracking()&&(this.reset_(),this.trigger("liveedgechange"))},t.seekableEnd=function(){for(var n=this.player_.seekable(),s=[],a=n?n.length:0;a--;)s.push(n.end(a));return s.length?s.sort()[s.length-1]:1/0},t.seekableStart=function(){for(var n=this.player_.seekable(),s=[],a=n?n.length:0;a--;)s.push(n.start(a));return s.length?s.sort()[0]:0},t.liveWindow=function(){var n=this.liveCurrentTime();return n===1/0?0:n-this.seekableStart()},t.isLive=function(){return this.isTracking()},t.atLiveEdge=function(){return!this.behindLiveEdge()},t.liveCurrentTime=function(){return this.pastSeekEnd()+this.seekableEnd()},t.pastSeekEnd=function(){var n=this.seekableEnd();return this.lastSeekEnd_!==-1&&n!==this.lastSeekEnd_&&(this.pastSeekEnd_=0),this.lastSeekEnd_=n,this.pastSeekEnd_},t.behindLiveEdge=function(){return this.behindLiveEdge_},t.isTracking=function(){return typeof this.trackingInterval_=="number"},t.seekToLiveEdge=function(){this.seekedBehindLive_=!1,!this.atLiveEdge()&&(this.nextSeekedFromUser_=!1,this.player_.currentTime(this.liveCurrentTime()))},t.dispose=function(){this.off(Me,"visibilitychange",this.handleVisibilityChange_),this.stopTracking(),i.prototype.dispose.call(this)},e})(xt);xt.registerComponent("LiveTracker",Afe);var gE=function(e){var t=e.el();if(t.hasAttribute("src"))return e.triggerSourceset(t.src),!0;var r=e.$$("source"),n=[],s="";if(!r.length)return!1;for(var a=0;a<r.length;a++){var o=r[a].src;o&&n.indexOf(o)===-1&&n.push(o)}return n.length?(n.length===1&&(s=n[0]),e.triggerSourceset(s),!0):!1},Ife=Object.defineProperty({},"innerHTML",{get:function(){return this.cloneNode(!0).innerHTML},set:function(e){var t=Me.createElement(this.nodeName.toLowerCase());t.innerHTML=e;for(var r=Me.createDocumentFragment();t.childNodes.length;)r.appendChild(t.childNodes[0]);return this.innerText="",X.Element.prototype.appendChild.call(this,r),this.innerHTML}}),jU=function(e,t){for(var r={},n=0;n<e.length&&(r=Object.getOwnPropertyDescriptor(e[n],t),!(r&&r.set&&r.get));n++);return r.enumerable=!0,r.configurable=!0,r},Dfe=function(e){return jU([e.el(),X.HTMLMediaElement.prototype,X.Element.prototype,Ife],"innerHTML")},K4=function(e){var t=e.el();if(!t.resetSourceWatch_){var r={},n=Dfe(e),s=function(o){return function(){for(var l=arguments.length,u=new Array(l),c=0;c<l;c++)u[c]=arguments[c];var h=o.apply(t,u);return gE(e),h}};["append","appendChild","insertAdjacentHTML"].forEach(function(a){t[a]&&(r[a]=t[a],t[a]=s(r[a]))}),Object.defineProperty(t,"innerHTML",Mi(n,{set:s(n.set)})),t.resetSourceWatch_=function(){t.resetSourceWatch_=null,Object.keys(r).forEach(function(a){t[a]=r[a]}),Object.defineProperty(t,"innerHTML",n)},e.one("sourceset",t.resetSourceWatch_)}},Pfe=Object.defineProperty({},"src",{get:function(){return this.hasAttribute("src")?pU(X.Element.prototype.getAttribute.call(this,"src")):""},set:function(e){return X.Element.prototype.setAttribute.call(this,"src",e),e}}),Rfe=function(e){return jU([e.el(),X.HTMLMediaElement.prototype,Pfe],"src")},Lfe=function(e){if(e.featuresSourceset){var t=e.el();if(!t.resetSourceset_){var r=Rfe(e),n=t.setAttribute,s=t.load;Object.defineProperty(t,"src",Mi(r,{set:function(o){var l=r.set.call(t,o);return e.triggerSourceset(t.src),l}})),t.setAttribute=function(a,o){var l=n.call(t,a,o);return/src/i.test(a)&&e.triggerSourceset(t.src),l},t.load=function(){var a=s.call(t);return gE(e)||(e.triggerSourceset(""),K4(e)),a},t.currentSrc?e.triggerSourceset(t.currentSrc):gE(e)||K4(e),t.resetSourceset_=function(){t.resetSourceset_=null,t.load=s,t.setAttribute=n,Object.defineProperty(t,"src",r),t.resetSourceWatch_&&t.resetSourceWatch_()}}}},hk=function(e,t,r,n){n===void 0&&(n=!0);var s=function(l){return Object.defineProperty(e,t,{value:l,enumerable:!0,writable:!0})},a={configurable:!0,enumerable:!0,get:function(){var l=r();return s(l),l}};return n&&(a.set=s),Object.defineProperty(e,t,a)},Ht=(function(i){Ft(e,i);function e(r,n){var s;s=i.call(this,r,n)||this;var a=r.source,o=!1;if(s.featuresVideoFrameCallback=s.featuresVideoFrameCallback&&s.el_.tagName==="VIDEO",a&&(s.el_.currentSrc!==a.src||r.tag&&r.tag.initNetworkState_===3)?s.setSource(a):s.handleLateInit_(s.el_),r.enableSourceset&&s.setupSourcesetHandling_(),s.isScrubbing_=!1,s.el_.hasChildNodes()){for(var l=s.el_.childNodes,u=l.length,c=[];u--;){var h=l[u],m=h.nodeName.toLowerCase();m==="track"&&(s.featuresNativeTextTracks?(s.remoteTextTrackEls().addTrackElement_(h),s.remoteTextTracks().addTrack(h.track),s.textTracks().addTrack(h.track),!o&&!s.el_.hasAttribute("crossorigin")&&wT(h.src)&&(o=!0)):c.push(h))}for(var g=0;g<c.length;g++)s.el_.removeChild(c[g])}return s.proxyNativeTracks_(),s.featuresNativeTextTracks&&o&&Nr.warn(`Text Tracks are being loaded from another origin but the crossorigin attribute isn't used.
This may prevent text tracks from loading.`),s.restoreMetadataTracksInIOSNativePlayer_(),(_p||j2||j6)&&r.nativeControlsForTouch===!0&&s.setControls(!0),s.proxyWebkitFullscreen_(),s.triggerReady(),s}var t=e.prototype;return t.dispose=function(){this.el_&&this.el_.resetSourceset_&&this.el_.resetSourceset_(),e.disposeMediaElement(this.el_),this.options_=null,i.prototype.dispose.call(this)},t.setupSourcesetHandling_=function(){Lfe(this)},t.restoreMetadataTracksInIOSNativePlayer_=function(){var n=this.textTracks(),s,a=function(){s=[];for(var u=0;u<n.length;u++){var c=n[u];c.kind==="metadata"&&s.push({track:c,storedMode:c.mode})}};a(),n.addEventListener("change",a),this.on("dispose",function(){return n.removeEventListener("change",a)});var o=function l(){for(var u=0;u<s.length;u++){var c=s[u];c.track.mode==="disabled"&&c.track.mode!==c.storedMode&&(c.track.mode=c.storedMode)}n.removeEventListener("change",l)};this.on("webkitbeginfullscreen",function(){n.removeEventListener("change",a),n.removeEventListener("change",o),n.addEventListener("change",o)}),this.on("webkitendfullscreen",function(){n.removeEventListener("change",a),n.addEventListener("change",a),n.removeEventListener("change",o)})},t.overrideNative_=function(n,s){var a=this;if(s===this["featuresNative"+n+"Tracks"]){var o=n.toLowerCase();this[o+"TracksListeners_"]&&Object.keys(this[o+"TracksListeners_"]).forEach(function(l){var u=a.el()[o+"Tracks"];u.removeEventListener(l,a[o+"TracksListeners_"][l])}),this["featuresNative"+n+"Tracks"]=!s,this[o+"TracksListeners_"]=null,this.proxyNativeTracksForType_(o)}},t.overrideNativeAudioTracks=function(n){this.overrideNative_("Audio",n)},t.overrideNativeVideoTracks=function(n){this.overrideNative_("Video",n)},t.proxyNativeTracksForType_=function(n){var s=this,a=Ro[n],o=this.el()[a.getterName],l=this[a.getterName]();if(!(!this["featuresNative"+a.capitalName+"Tracks"]||!o||!o.addEventListener)){var u={change:function(m){var g={type:"change",target:l,currentTarget:l,srcElement:l};l.trigger(g),n==="text"&&s[Sp.remoteText.getterName]().trigger(g)},addtrack:function(m){l.addTrack(m.track)},removetrack:function(m){l.removeTrack(m.track)}},c=function(){for(var m=[],g=0;g<l.length;g++){for(var y=!1,_=0;_<o.length;_++)if(o[_]===l[g]){y=!0;break}y||m.push(l[g])}for(;m.length;)l.removeTrack(m.shift())};this[a.getterName+"Listeners_"]=u,Object.keys(u).forEach(function(h){var m=u[h];o.addEventListener(h,m),s.on("dispose",function(g){return o.removeEventListener(h,m)})}),this.on("loadstart",c),this.on("dispose",function(h){return s.off("loadstart",c)})}},t.proxyNativeTracks_=function(){var n=this;Ro.names.forEach(function(s){n.proxyNativeTracksForType_(s)})},t.createEl=function(){var n=this.options_.tag;if(!n||!(this.options_.playerElIngest||this.movingMediaElementInDOM)){if(n){var s=n.cloneNode(!0);n.parentNode&&n.parentNode.insertBefore(s,n),e.disposeMediaElement(n),n=s}else{n=Me.createElement("video");var a=this.options_.tag&&Yu(this.options_.tag),o=Mi({},a);(!_p||this.options_.nativeControlsForTouch!==!0)&&delete o.controls,X6(n,rn(o,{id:this.options_.techId,class:"vjs-tech"}))}n.playerId=this.options_.playerId}typeof this.options_.preload<"u"&&xp(n,"preload",this.options_.preload),this.options_.disablePictureInPicture!==void 0&&(n.disablePictureInPicture=this.options_.disablePictureInPicture);for(var l=["loop","muted","playsinline","autoplay"],u=0;u<l.length;u++){var c=l[u],h=this.options_[c];typeof h<"u"&&(h?xp(n,c,c):TT(n,c),n[c]=h)}return n},t.handleLateInit_=function(n){if(!(n.networkState===0||n.networkState===3)){if(n.readyState===0){var s=!1,a=function(){s=!0};this.on("loadstart",a);var o=function(){s||this.trigger("loadstart")};this.on("loadedmetadata",o),this.ready(function(){this.off("loadstart",a),this.off("loadedmetadata",o),s||this.trigger("loadstart")});return}var l=["loadstart"];l.push("loadedmetadata"),n.readyState>=2&&l.push("loadeddata"),n.readyState>=3&&l.push("canplay"),n.readyState>=4&&l.push("canplaythrough"),this.ready(function(){l.forEach(function(u){this.trigger(u)},this)})}},t.setScrubbing=function(n){this.isScrubbing_=n},t.scrubbing=function(){return this.isScrubbing_},t.setCurrentTime=function(n){try{this.isScrubbing_&&this.el_.fastSeek&&xT?this.el_.fastSeek(n):this.el_.currentTime=n}catch(s){Nr(s,"Video is not ready. (Video.js)")}},t.duration=function(){var n=this;if(this.el_.duration===1/0&&dc&&hc&&this.el_.currentTime===0){var s=function a(){n.el_.currentTime>0&&(n.el_.duration===1/0&&n.trigger("durationchange"),n.off("timeupdate",a))};return this.on("timeupdate",s),NaN}return this.el_.duration||NaN},t.width=function(){return this.el_.offsetWidth},t.height=function(){return this.el_.offsetHeight},t.proxyWebkitFullscreen_=function(){var n=this;if("webkitDisplayingFullscreen"in this.el_){var s=function(){this.trigger("fullscreenchange",{isFullscreen:!1}),this.el_.controls&&!this.options_.nativeControlsForTouch&&this.controls()&&(this.el_.controls=!1)},a=function(){"webkitPresentationMode"in this.el_&&this.el_.webkitPresentationMode!=="picture-in-picture"&&(this.one("webkitendfullscreen",s),this.trigger("fullscreenchange",{isFullscreen:!0,nativeIOSFullscreen:!0}))};this.on("webkitbeginfullscreen",a),this.on("dispose",function(){n.off("webkitbeginfullscreen",a),n.off("webkitendfullscreen",s)})}},t.supportsFullScreen=function(){if(typeof this.el_.webkitEnterFullScreen=="function"){var n=X.navigator&&X.navigator.userAgent||"";if(/Android/.test(n)||!/Chrome|Mac OS X 10.5/.test(n))return!0}return!1},t.enterFullScreen=function(){var n=this.el_;if(n.paused&&n.networkState<=n.HAVE_METADATA)iu(this.el_.play()),this.setTimeout(function(){n.pause();try{n.webkitEnterFullScreen()}catch(s){this.trigger("fullscreenerror",s)}},0);else try{n.webkitEnterFullScreen()}catch(s){this.trigger("fullscreenerror",s)}},t.exitFullScreen=function(){if(!this.el_.webkitDisplayingFullscreen){this.trigger("fullscreenerror",new Error("The video is not fullscreen"));return}this.el_.webkitExitFullScreen()},t.requestPictureInPicture=function(){return this.el_.requestPictureInPicture()},t.requestVideoFrameCallback=function(n){return this.featuresVideoFrameCallback&&!this.el_.webkitKeys?this.el_.requestVideoFrameCallback(n):i.prototype.requestVideoFrameCallback.call(this,n)},t.cancelVideoFrameCallback=function(n){this.featuresVideoFrameCallback&&!this.el_.webkitKeys?this.el_.cancelVideoFrameCallback(n):i.prototype.cancelVideoFrameCallback.call(this,n)},t.src=function(n){if(n===void 0)return this.el_.src;this.setSrc(n)},t.reset=function(){e.resetMediaElement(this.el_)},t.currentSrc=function(){return this.currentSource_?this.currentSource_.src:this.el_.currentSrc},t.setControls=function(n){this.el_.controls=!!n},t.addTextTrack=function(n,s,a){return this.featuresNativeTextTracks?this.el_.addTextTrack(n,s,a):i.prototype.addTextTrack.call(this,n,s,a)},t.createRemoteTextTrack=function(n){if(!this.featuresNativeTextTracks)return i.prototype.createRemoteTextTrack.call(this,n);var s=Me.createElement("track");return n.kind&&(s.kind=n.kind),n.label&&(s.label=n.label),(n.language||n.srclang)&&(s.srclang=n.language||n.srclang),n.default&&(s.default=n.default),n.id&&(s.id=n.id),n.src&&(s.src=n.src),s},t.addRemoteTextTrack=function(n,s){var a=i.prototype.addRemoteTextTrack.call(this,n,s);return this.featuresNativeTextTracks&&this.el().appendChild(a),a},t.removeRemoteTextTrack=function(n){if(i.prototype.removeRemoteTextTrack.call(this,n),this.featuresNativeTextTracks)for(var s=this.$$("track"),a=s.length;a--;)(n===s[a]||n===s[a].track)&&this.el().removeChild(s[a])},t.getVideoPlaybackQuality=function(){if(typeof this.el().getVideoPlaybackQuality=="function")return this.el().getVideoPlaybackQuality();var n={};return typeof this.el().webkitDroppedFrameCount<"u"&&typeof this.el().webkitDecodedFrameCount<"u"&&(n.droppedVideoFrames=this.el().webkitDroppedFrameCount,n.totalVideoFrames=this.el().webkitDecodedFrameCount),X.performance&&typeof X.performance.now=="function"?n.creationTime=X.performance.now():X.performance&&X.performance.timing&&typeof X.performance.timing.navigationStart=="number"&&(n.creationTime=X.Date.now()-X.performance.timing.navigationStart),n},e})(Di);hk(Ht,"TEST_VID",function(){if(jp()){var i=Me.createElement("video"),e=Me.createElement("track");return e.kind="captions",e.srclang="en",e.label="English",i.appendChild(e),i}});Ht.isSupported=function(){try{Ht.TEST_VID.volume=.5}catch{return!1}return!!(Ht.TEST_VID&&Ht.TEST_VID.canPlayType)};Ht.canPlayType=function(i){return Ht.TEST_VID.canPlayType(i)};Ht.canPlaySource=function(i,e){return Ht.canPlayType(i.type)};Ht.canControlVolume=function(){try{var i=Ht.TEST_VID.volume;Ht.TEST_VID.volume=i/2+.1;var e=i!==Ht.TEST_VID.volume;return e&&ra?(X.setTimeout(function(){Ht&&Ht.prototype&&(Ht.prototype.featuresVolumeControl=i!==Ht.TEST_VID.volume)}),!1):e}catch{return!1}};Ht.canMuteVolume=function(){try{var i=Ht.TEST_VID.muted;return Ht.TEST_VID.muted=!i,Ht.TEST_VID.muted?xp(Ht.TEST_VID,"muted","muted"):TT(Ht.TEST_VID,"muted","muted"),i!==Ht.TEST_VID.muted}catch{return!1}};Ht.canControlPlaybackRate=function(){if(dc&&hc&&H6<58)return!1;try{var i=Ht.TEST_VID.playbackRate;return Ht.TEST_VID.playbackRate=i/2+.1,i!==Ht.TEST_VID.playbackRate}catch{return!1}};Ht.canOverrideAttributes=function(){try{var i=function(){};Object.defineProperty(Me.createElement("video"),"src",{get:i,set:i}),Object.defineProperty(Me.createElement("audio"),"src",{get:i,set:i}),Object.defineProperty(Me.createElement("video"),"innerHTML",{get:i,set:i}),Object.defineProperty(Me.createElement("audio"),"innerHTML",{get:i,set:i})}catch{return!1}return!0};Ht.supportsNativeTextTracks=function(){return xT||ra&&hc};Ht.supportsNativeVideoTracks=function(){return!!(Ht.TEST_VID&&Ht.TEST_VID.videoTracks)};Ht.supportsNativeAudioTracks=function(){return!!(Ht.TEST_VID&&Ht.TEST_VID.audioTracks)};Ht.Events=["loadstart","suspend","abort","error","emptied","stalled","loadedmetadata","loadeddata","canplay","canplaythrough","playing","waiting","seeking","seeked","ended","durationchange","timeupdate","progress","play","pause","ratechange","resize","volumechange"];[["featuresMuteControl","canMuteVolume"],["featuresPlaybackRate","canControlPlaybackRate"],["featuresSourceset","canOverrideAttributes"],["featuresNativeTextTracks","supportsNativeTextTracks"],["featuresNativeVideoTracks","supportsNativeVideoTracks"],["featuresNativeAudioTracks","supportsNativeAudioTracks"]].forEach(function(i){var e=i[0],t=i[1];hk(Ht.prototype,e,function(){return Ht[t]()},!0)});Ht.prototype.featuresVolumeControl=Ht.canControlVolume();Ht.prototype.movingMediaElementInDOM=!ra;Ht.prototype.featuresFullscreenResize=!0;Ht.prototype.featuresProgressEvents=!0;Ht.prototype.featuresTimeupdateEvents=!0;Ht.prototype.featuresVideoFrameCallback=!!(Ht.TEST_VID&&Ht.TEST_VID.requestVideoFrameCallback);var J_;Ht.patchCanPlayType=function(){N2>=4&&!z6&&!hc&&(J_=Ht.TEST_VID&&Ht.TEST_VID.constructor.prototype.canPlayType,Ht.TEST_VID.constructor.prototype.canPlayType=function(i){var e=/^application\/(?:x-|vnd\.apple\.)mpegurl/i;return i&&e.test(i)?"maybe":J_.call(this,i)})};Ht.unpatchCanPlayType=function(){var i=Ht.TEST_VID.constructor.prototype.canPlayType;return J_&&(Ht.TEST_VID.constructor.prototype.canPlayType=J_),i};Ht.patchCanPlayType();Ht.disposeMediaElement=function(i){if(i){for(i.parentNode&&i.parentNode.removeChild(i);i.hasChildNodes();)i.removeChild(i.firstChild);i.removeAttribute("src"),typeof i.load=="function"&&(function(){try{i.load()}catch{}})()}};Ht.resetMediaElement=function(i){if(i){for(var e=i.querySelectorAll("source"),t=e.length;t--;)i.removeChild(e[t]);i.removeAttribute("src"),typeof i.load=="function"&&(function(){try{i.load()}catch{}})()}};["muted","defaultMuted","autoplay","controls","loop","playsinline"].forEach(function(i){Ht.prototype[i]=function(){return this.el_[i]||this.el_.hasAttribute(i)}});["muted","defaultMuted","autoplay","loop","playsinline"].forEach(function(i){Ht.prototype["set"+fn(i)]=function(e){this.el_[i]=e,e?this.el_.setAttribute(i,i):this.el_.removeAttribute(i)}});["paused","currentTime","buffered","volume","poster","preload","error","seeking","seekable","ended","playbackRate","defaultPlaybackRate","disablePictureInPicture","played","networkState","readyState","videoWidth","videoHeight","crossOrigin"].forEach(function(i){Ht.prototype[i]=function(){return this.el_[i]}});["volume","src","poster","preload","playbackRate","defaultPlaybackRate","disablePictureInPicture","crossOrigin"].forEach(function(i){Ht.prototype["set"+fn(i)]=function(e){this.el_[i]=e}});["pause","load","play"].forEach(function(i){Ht.prototype[i]=function(){return this.el_[i]()}});Di.withSourceHandlers(Ht);Ht.nativeSourceHandler={};Ht.nativeSourceHandler.canPlayType=function(i){try{return Ht.TEST_VID.canPlayType(i)}catch{return""}};Ht.nativeSourceHandler.canHandleSource=function(i,e){if(i.type)return Ht.nativeSourceHandler.canPlayType(i.type);if(i.src){var t=K2(i.src);return Ht.nativeSourceHandler.canPlayType("video/"+t)}return""};Ht.nativeSourceHandler.handleSource=function(i,e,t){e.setSrc(i.src)};Ht.nativeSourceHandler.dispose=function(){};Ht.registerSourceHandler(Ht.nativeSourceHandler);Di.registerTech("Html5",Ht);var zU=["progress","abort","suspend","emptied","stalled","loadedmetadata","loadeddata","timeupdate","resize","volumechange","texttrackchange"],A1={canplay:"CanPlay",canplaythrough:"CanPlayThrough",playing:"Playing",seeked:"Seeked"},vE=["tiny","xsmall","small","medium","large","xlarge","huge"],zy={};vE.forEach(function(i){var e=i.charAt(0)==="x"?"x-"+i.substring(1):i;zy[i]="vjs-layout-"+e});var Ofe={tiny:210,xsmall:320,small:425,medium:768,large:1440,xlarge:2560,huge:1/0},Cn=(function(i){Ft(e,i);function e(r,n,s){var a;if(r.id=r.id||n.id||"vjs_video_"+fc(),n=rn(e.getTagSettings(r),n),n.initChildren=!1,n.createEl=!1,n.evented=!1,n.reportTouchActivity=!1,!n.language)if(typeof r.closest=="function"){var o=r.closest("[lang]");o&&o.getAttribute&&(n.language=o.getAttribute("lang"))}else for(var l=r;l&&l.nodeType===1;){if(Yu(l).hasOwnProperty("lang")){n.language=l.getAttribute("lang");break}l=l.parentNode}if(a=i.call(this,null,n,s)||this,a.boundDocumentFullscreenChange_=function(m){return a.documentFullscreenChange_(m)},a.boundFullWindowOnEscKey_=function(m){return a.fullWindowOnEscKey(m)},a.boundUpdateStyleEl_=function(m){return a.updateStyleEl_(m)},a.boundApplyInitTime_=function(m){return a.applyInitTime_(m)},a.boundUpdateCurrentBreakpoint_=function(m){return a.updateCurrentBreakpoint_(m)},a.boundHandleTechClick_=function(m){return a.handleTechClick_(m)},a.boundHandleTechDoubleClick_=function(m){return a.handleTechDoubleClick_(m)},a.boundHandleTechTouchStart_=function(m){return a.handleTechTouchStart_(m)},a.boundHandleTechTouchMove_=function(m){return a.handleTechTouchMove_(m)},a.boundHandleTechTouchEnd_=function(m){return a.handleTechTouchEnd_(m)},a.boundHandleTechTap_=function(m){return a.handleTechTap_(m)},a.isFullscreen_=!1,a.log=N6(a.id_),a.fsApi_=G_,a.isPosterFromTech_=!1,a.queuedCallbacks_=[],a.isReady_=!1,a.hasStarted_=!1,a.userActive_=!1,a.debugEnabled_=!1,a.audioOnlyMode_=!1,a.audioPosterMode_=!1,a.audioOnlyCache_={playerHeight:null,hiddenChildren:[]},!a.options_||!a.options_.techOrder||!a.options_.techOrder.length)throw new Error("No techOrder specified. Did you overwrite videojs.options instead of just changing the properties you want to override?");if(a.tag=r,a.tagAttributes=r&&Yu(r),a.language(a.options_.language),n.languages){var u={};Object.getOwnPropertyNames(n.languages).forEach(function(m){u[m.toLowerCase()]=n.languages[m]}),a.languages_=u}else a.languages_=e.prototype.options_.languages;a.resetCache_(),a.poster_=n.poster||"",a.controls_=!!n.controls,r.controls=!1,r.removeAttribute("controls"),a.changingSrc_=!1,a.playCallbacks_=[],a.playTerminatedQueue_=[],r.hasAttribute("autoplay")?a.autoplay(!0):a.autoplay(a.options_.autoplay),n.plugins&&Object.keys(n.plugins).forEach(function(m){if(typeof a[m]!="function")throw new Error('plugin "'+m+'" does not exist')}),a.scrubbing_=!1,a.el_=a.createEl(),q2(je(a),{eventBusKey:"el_"}),a.fsApi_.requestFullscreen&&(ao(Me,a.fsApi_.fullscreenchange,a.boundDocumentFullscreenChange_),a.on(a.fsApi_.fullscreenchange,a.boundDocumentFullscreenChange_)),a.fluid_&&a.on(["playerreset","resize"],a.boundUpdateStyleEl_);var c=Mi(a.options_);n.plugins&&Object.keys(n.plugins).forEach(function(m){a[m](n.plugins[m])}),n.debug&&a.debug(!0),a.options_.playerOptions=c,a.middleware_=[],a.playbackRates(n.playbackRates),a.initChildren(),a.isAudio(r.nodeName.toLowerCase()==="audio"),a.controls()?a.addClass("vjs-controls-enabled"):a.addClass("vjs-controls-disabled"),a.el_.setAttribute("role","region"),a.isAudio()?a.el_.setAttribute("aria-label",a.localize("Audio Player")):a.el_.setAttribute("aria-label",a.localize("Video Player")),a.isAudio()&&a.addClass("vjs-audio"),a.flexNotSupported_()&&a.addClass("vjs-no-flex"),_p&&a.addClass("vjs-touch-enabled"),ra||a.addClass("vjs-workinghover"),e.players[a.id_]=je(a);var h=M6.split(".")[0];return a.addClass("vjs-v"+h),a.userActive(!0),a.reportUserActivity(),a.one("play",function(m){return a.listenForUserActivity_(m)}),a.on("stageclick",function(m){return a.handleStageClick_(m)}),a.on("keydown",function(m){return a.handleKeyDown(m)}),a.on("languagechange",function(m){return a.handleLanguagechange(m)}),a.breakpoints(a.options_.breakpoints),a.responsive(a.options_.responsive),a.on("ready",function(){a.audioPosterMode(a.options_.audioPosterMode),a.audioOnlyMode(a.options_.audioOnlyMode)}),a}var t=e.prototype;return t.dispose=function(){var n=this;this.trigger("dispose"),this.off("dispose"),Os(Me,this.fsApi_.fullscreenchange,this.boundDocumentFullscreenChange_),Os(Me,"keydown",this.boundFullWindowOnEscKey_),this.styleEl_&&this.styleEl_.parentNode&&(this.styleEl_.parentNode.removeChild(this.styleEl_),this.styleEl_=null),e.players[this.id_]=null,this.tag&&this.tag.player&&(this.tag.player=null),this.el_&&this.el_.player&&(this.el_.player=null),this.tech_&&(this.tech_.dispose(),this.isPosterFromTech_=!1,this.poster_=""),this.playerElIngest_&&(this.playerElIngest_=null),this.tag&&(this.tag=null),efe(this),Xs.names.forEach(function(s){var a=Xs[s],o=n[a.getterName]();o&&o.off&&o.off()}),i.prototype.dispose.call(this,{restoreEl:this.options_.restoreEl})},t.createEl=function(){var n=this.tag,s,a=this.playerElIngest_=n.parentNode&&n.parentNode.hasAttribute&&n.parentNode.hasAttribute("data-vjs-player"),o=this.tag.tagName.toLowerCase()==="video-js";a?s=this.el_=n.parentNode:o||(s=this.el_=i.prototype.createEl.call(this,"div"));var l=Yu(n);if(o){for(s=this.el_=n,n=this.tag=Me.createElement("video");s.children.length;)n.appendChild(s.firstChild);xh(s,"video-js")||nc(s,"video-js"),s.appendChild(n),a=this.playerElIngest_=s,Object.keys(s).forEach(function(y){try{n[y]=s[y]}catch{}})}if(n.setAttribute("tabindex","-1"),l.tabindex="-1",(cg||hc&&V6)&&(n.setAttribute("role","application"),l.role="application"),n.removeAttribute("width"),n.removeAttribute("height"),"width"in l&&delete l.width,"height"in l&&delete l.height,Object.getOwnPropertyNames(l).forEach(function(y){o&&y==="class"||s.setAttribute(y,l[y]),o&&n.setAttribute(y,l[y])}),n.playerId=n.id,n.id+="_html5_api",n.className="vjs-tech",n.player=s.player=this,this.addClass("vjs-paused"),X.VIDEOJS_NO_DYNAMIC_STYLE!==!0){this.styleEl_=sU("vjs-styles-dimensions");var u=md(".vjs-styles-defaults"),c=md("head");c.insertBefore(this.styleEl_,u?u.nextSibling:c.firstChild)}this.fill_=!1,this.fluid_=!1,this.width(this.options_.width),this.height(this.options_.height),this.fill(this.options_.fill),this.fluid(this.options_.fluid),this.aspectRatio(this.options_.aspectRatio),this.crossOrigin(this.options_.crossOrigin||this.options_.crossorigin);for(var h=n.getElementsByTagName("a"),m=0;m<h.length;m++){var g=h.item(m);nc(g,"vjs-hidden"),g.setAttribute("hidden","hidden")}return n.initNetworkState_=n.networkState,n.parentNode&&!a&&n.parentNode.insertBefore(s,n),uE(n,s),this.children_.unshift(n),this.el_.setAttribute("lang",this.language_),this.el_.setAttribute("translate","no"),this.el_=s,s},t.crossOrigin=function(n){if(!n)return this.techGet_("crossOrigin");if(n!=="anonymous"&&n!=="use-credentials"){Nr.warn('crossOrigin must be "anonymous" or "use-credentials", given "'+n+'"');return}this.techCall_("setCrossOrigin",n)},t.width=function(n){return this.dimension("width",n)},t.height=function(n){return this.dimension("height",n)},t.dimension=function(n,s){var a=n+"_";if(s===void 0)return this[a]||0;if(s===""||s==="auto"){this[a]=void 0,this.updateStyleEl_();return}var o=parseFloat(s);if(isNaN(o)){Nr.error('Improper value "'+s+'" supplied for for '+n);return}this[a]=o,this.updateStyleEl_()},t.fluid=function(n){var s=this;if(n===void 0)return!!this.fluid_;this.fluid_=!!n,sc(this)&&this.off(["playerreset","resize"],this.boundUpdateStyleEl_),n?(this.addClass("vjs-fluid"),this.fill(!1),Ehe(this,function(){s.on(["playerreset","resize"],s.boundUpdateStyleEl_)})):this.removeClass("vjs-fluid"),this.updateStyleEl_()},t.fill=function(n){if(n===void 0)return!!this.fill_;this.fill_=!!n,n?(this.addClass("vjs-fill"),this.fluid(!1)):this.removeClass("vjs-fill")},t.aspectRatio=function(n){if(n===void 0)return this.aspectRatio_;if(!/^\d+\:\d+$/.test(n))throw new Error("Improper value supplied for aspect ratio. The format should be width:height, for example 16:9.");this.aspectRatio_=n,this.fluid(!0),this.updateStyleEl_()},t.updateStyleEl_=function(){if(X.VIDEOJS_NO_DYNAMIC_STYLE===!0){var n=typeof this.width_=="number"?this.width_:this.options_.width,s=typeof this.height_=="number"?this.height_:this.options_.height,a=this.tech_&&this.tech_.el();a&&(n>=0&&(a.width=n),s>=0&&(a.height=s));return}var o,l,u,c;this.aspectRatio_!==void 0&&this.aspectRatio_!=="auto"?u=this.aspectRatio_:this.videoWidth()>0?u=this.videoWidth()+":"+this.videoHeight():u="16:9";var h=u.split(":"),m=h[1]/h[0];this.width_!==void 0?o=this.width_:this.height_!==void 0?o=this.height_/m:o=this.videoWidth()||300,this.height_!==void 0?l=this.height_:l=o*m,/^[^a-zA-Z]/.test(this.id())?c="dimensions-"+this.id():c=this.id()+"-dimensions",this.addClass(c),aU(this.styleEl_,`
      .`+c+` {
        width: `+o+`px;
        height: `+l+`px;
      }

      .`+c+`.vjs-fluid:not(.vjs-audio-only-mode) {
        padding-top: `+m*100+`%;
      }
    `)},t.loadTech_=function(n,s){var a=this;this.tech_&&this.unloadTech_();var o=fn(n),l=n.charAt(0).toLowerCase()+n.slice(1);o!=="Html5"&&this.tag&&(Di.getTech("Html5").disposeMediaElement(this.tag),this.tag.player=null,this.tag=null),this.techName_=o,this.isReady_=!1;var u=this.autoplay();(typeof this.autoplay()=="string"||this.autoplay()===!0&&this.options_.normalizeAutoplay)&&(u=!1);var c={source:s,autoplay:u,nativeControlsForTouch:this.options_.nativeControlsForTouch,playerId:this.id(),techId:this.id()+"_"+l+"_api",playsinline:this.options_.playsinline,preload:this.options_.preload,loop:this.options_.loop,disablePictureInPicture:this.options_.disablePictureInPicture,muted:this.options_.muted,poster:this.poster(),language:this.language(),playerElIngest:this.playerElIngest_||!1,"vtt.js":this.options_["vtt.js"],canOverridePoster:!!this.options_.techCanOverridePoster,enableSourceset:this.options_.enableSourceset,Promise:this.options_.Promise};Xs.names.forEach(function(m){var g=Xs[m];c[g.getterName]=a[g.privateName]}),rn(c,this.options_[o]),rn(c,this.options_[l]),rn(c,this.options_[n.toLowerCase()]),this.tag&&(c.tag=this.tag),s&&s.src===this.cache_.src&&this.cache_.currentTime>0&&(c.startTime=this.cache_.currentTime);var h=Di.getTech(n);if(!h)throw new Error("No Tech named '"+o+"' exists! '"+o+"' should be registered using videojs.registerTech()'");this.tech_=new h(c),this.tech_.ready(Fi(this,this.handleTechReady_),!0),I4.jsonToTextTracks(this.textTracksJson_||[],this.tech_),zU.forEach(function(m){a.on(a.tech_,m,function(g){return a["handleTech"+fn(m)+"_"](g)})}),Object.keys(A1).forEach(function(m){a.on(a.tech_,m,function(g){if(a.tech_.playbackRate()===0&&a.tech_.seeking()){a.queuedCallbacks_.push({callback:a["handleTech"+A1[m]+"_"].bind(a),event:g});return}a["handleTech"+A1[m]+"_"](g)})}),this.on(this.tech_,"loadstart",function(m){return a.handleTechLoadStart_(m)}),this.on(this.tech_,"sourceset",function(m){return a.handleTechSourceset_(m)}),this.on(this.tech_,"waiting",function(m){return a.handleTechWaiting_(m)}),this.on(this.tech_,"ended",function(m){return a.handleTechEnded_(m)}),this.on(this.tech_,"seeking",function(m){return a.handleTechSeeking_(m)}),this.on(this.tech_,"play",function(m){return a.handleTechPlay_(m)}),this.on(this.tech_,"firstplay",function(m){return a.handleTechFirstPlay_(m)}),this.on(this.tech_,"pause",function(m){return a.handleTechPause_(m)}),this.on(this.tech_,"durationchange",function(m){return a.handleTechDurationChange_(m)}),this.on(this.tech_,"fullscreenchange",function(m,g){return a.handleTechFullscreenChange_(m,g)}),this.on(this.tech_,"fullscreenerror",function(m,g){return a.handleTechFullscreenError_(m,g)}),this.on(this.tech_,"enterpictureinpicture",function(m){return a.handleTechEnterPictureInPicture_(m)}),this.on(this.tech_,"leavepictureinpicture",function(m){return a.handleTechLeavePictureInPicture_(m)}),this.on(this.tech_,"error",function(m){return a.handleTechError_(m)}),this.on(this.tech_,"posterchange",function(m){return a.handleTechPosterChange_(m)}),this.on(this.tech_,"textdata",function(m){return a.handleTechTextData_(m)}),this.on(this.tech_,"ratechange",function(m){return a.handleTechRateChange_(m)}),this.on(this.tech_,"loadedmetadata",this.boundUpdateStyleEl_),this.usingNativeControls(this.techGet_("controls")),this.controls()&&!this.usingNativeControls()&&this.addTechControlsListeners_(),this.tech_.el().parentNode!==this.el()&&(o!=="Html5"||!this.tag)&&uE(this.tech_.el(),this.el()),this.tag&&(this.tag.player=null,this.tag=null)},t.unloadTech_=function(){var n=this;Xs.names.forEach(function(s){var a=Xs[s];n[a.privateName]=n[a.getterName]()}),this.textTracksJson_=I4.textTracksToJson(this.tech_),this.isReady_=!1,this.tech_.dispose(),this.tech_=!1,this.isPosterFromTech_&&(this.poster_="",this.trigger("posterchange")),this.isPosterFromTech_=!1},t.tech=function(n){return n===void 0&&Nr.warn(`Using the tech directly can be dangerous. I hope you know what you're doing.
See https://github.com/videojs/video.js/issues/2617 for more info.
`),this.tech_},t.addTechControlsListeners_=function(){this.removeTechControlsListeners_(),this.on(this.tech_,"click",this.boundHandleTechClick_),this.on(this.tech_,"dblclick",this.boundHandleTechDoubleClick_),this.on(this.tech_,"touchstart",this.boundHandleTechTouchStart_),this.on(this.tech_,"touchmove",this.boundHandleTechTouchMove_),this.on(this.tech_,"touchend",this.boundHandleTechTouchEnd_),this.on(this.tech_,"tap",this.boundHandleTechTap_)},t.removeTechControlsListeners_=function(){this.off(this.tech_,"tap",this.boundHandleTechTap_),this.off(this.tech_,"touchstart",this.boundHandleTechTouchStart_),this.off(this.tech_,"touchmove",this.boundHandleTechTouchMove_),this.off(this.tech_,"touchend",this.boundHandleTechTouchEnd_),this.off(this.tech_,"click",this.boundHandleTechClick_),this.off(this.tech_,"dblclick",this.boundHandleTechDoubleClick_)},t.handleTechReady_=function(){this.triggerReady(),this.cache_.volume&&this.techCall_("setVolume",this.cache_.volume),this.handleTechPosterChange_(),this.handleTechDurationChange_()},t.handleTechLoadStart_=function(){this.removeClass("vjs-ended"),this.removeClass("vjs-seeking"),this.error(null),this.handleTechDurationChange_(),this.paused()?(this.hasStarted(!1),this.trigger("loadstart")):(this.trigger("loadstart"),this.trigger("firstplay")),this.manualAutoplay_(this.autoplay()===!0&&this.options_.normalizeAutoplay?"play":this.autoplay())},t.manualAutoplay_=function(n){var s=this;if(!(!this.tech_||typeof n!="string")){var a=function(){var u=s.muted();s.muted(!0);var c=function(){s.muted(u)};s.playTerminatedQueue_.push(c);var h=s.play();if(f0(h))return h.catch(function(m){throw c(),new Error("Rejection at manualAutoplay. Restoring muted value. "+(m||""))})},o;if(n==="any"&&!this.muted()?(o=this.play(),f0(o)&&(o=o.catch(a))):n==="muted"&&!this.muted()?o=a():o=this.play(),!!f0(o))return o.then(function(){s.trigger({type:"autoplay-success",autoplay:n})}).catch(function(){s.trigger({type:"autoplay-failure",autoplay:n})})}},t.updateSourceCaches_=function(n){n===void 0&&(n="");var s=n,a="";typeof s!="string"&&(s=n.src,a=n.type),this.cache_.source=this.cache_.source||{},this.cache_.sources=this.cache_.sources||[],s&&!a&&(a=ife(this,s)),this.cache_.source=Mi({},n,{src:s,type:a});for(var o=this.cache_.sources.filter(function(g){return g.src&&g.src===s}),l=[],u=this.$$("source"),c=[],h=0;h<u.length;h++){var m=Yu(u[h]);l.push(m),m.src&&m.src===s&&c.push(m.src)}c.length&&!o.length?this.cache_.sources=l:o.length||(this.cache_.sources=[this.cache_.source]),this.cache_.src=s},t.handleTechSourceset_=function(n){var s=this;if(!this.changingSrc_){var a=function(c){return s.updateSourceCaches_(c)},o=this.currentSource().src,l=n.src;o&&!/^blob:/.test(o)&&/^blob:/.test(l)&&(!this.lastSource_||this.lastSource_.tech!==l&&this.lastSource_.player!==o)&&(a=function(){}),a(l),n.src||this.tech_.any(["sourceset","loadstart"],function(u){if(u.type!=="sourceset"){var c=s.techGet("currentSrc");s.lastSource_.tech=c,s.updateSourceCaches_(c)}})}this.lastSource_={player:this.currentSource().src,tech:n.src},this.trigger({src:n.src,type:"sourceset"})},t.hasStarted=function(n){if(n===void 0)return this.hasStarted_;n!==this.hasStarted_&&(this.hasStarted_=n,this.hasStarted_?(this.addClass("vjs-has-started"),this.trigger("firstplay")):this.removeClass("vjs-has-started"))},t.handleTechPlay_=function(){this.removeClass("vjs-ended"),this.removeClass("vjs-paused"),this.addClass("vjs-playing"),this.hasStarted(!0),this.trigger("play")},t.handleTechRateChange_=function(){this.tech_.playbackRate()>0&&this.cache_.lastPlaybackRate===0&&(this.queuedCallbacks_.forEach(function(n){return n.callback(n.event)}),this.queuedCallbacks_=[]),this.cache_.lastPlaybackRate=this.tech_.playbackRate(),this.trigger("ratechange")},t.handleTechWaiting_=function(){var n=this;this.addClass("vjs-waiting"),this.trigger("waiting");var s=this.currentTime(),a=function o(){s!==n.currentTime()&&(n.removeClass("vjs-waiting"),n.off("timeupdate",o))};this.on("timeupdate",a)},t.handleTechCanPlay_=function(){this.removeClass("vjs-waiting"),this.trigger("canplay")},t.handleTechCanPlayThrough_=function(){this.removeClass("vjs-waiting"),this.trigger("canplaythrough")},t.handleTechPlaying_=function(){this.removeClass("vjs-waiting"),this.trigger("playing")},t.handleTechSeeking_=function(){this.addClass("vjs-seeking"),this.trigger("seeking")},t.handleTechSeeked_=function(){this.removeClass("vjs-seeking"),this.removeClass("vjs-ended"),this.trigger("seeked")},t.handleTechFirstPlay_=function(){this.options_.starttime&&(Nr.warn("Passing the `starttime` option to the player will be deprecated in 6.0"),this.currentTime(this.options_.starttime)),this.addClass("vjs-has-started"),this.trigger("firstplay")},t.handleTechPause_=function(){this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.trigger("pause")},t.handleTechEnded_=function(){this.addClass("vjs-ended"),this.removeClass("vjs-waiting"),this.options_.loop?(this.currentTime(0),this.play()):this.paused()||this.pause(),this.trigger("ended")},t.handleTechDurationChange_=function(){this.duration(this.techGet_("duration"))},t.handleTechClick_=function(n){this.controls_&&(this.options_===void 0||this.options_.userActions===void 0||this.options_.userActions.click===void 0||this.options_.userActions.click!==!1)&&(this.options_!==void 0&&this.options_.userActions!==void 0&&typeof this.options_.userActions.click=="function"?this.options_.userActions.click.call(this,n):this.paused()?iu(this.play()):this.pause())},t.handleTechDoubleClick_=function(n){if(this.controls_){var s=Array.prototype.some.call(this.$$(".vjs-control-bar, .vjs-modal-dialog"),function(a){return a.contains(n.target)});s||(this.options_===void 0||this.options_.userActions===void 0||this.options_.userActions.doubleClick===void 0||this.options_.userActions.doubleClick!==!1)&&(this.options_!==void 0&&this.options_.userActions!==void 0&&typeof this.options_.userActions.doubleClick=="function"?this.options_.userActions.doubleClick.call(this,n):this.isFullscreen()?this.exitFullscreen():this.requestFullscreen())}},t.handleTechTap_=function(){this.userActive(!this.userActive())},t.handleTechTouchStart_=function(){this.userWasActive=this.userActive()},t.handleTechTouchMove_=function(){this.userWasActive&&this.reportUserActivity()},t.handleTechTouchEnd_=function(n){n.cancelable&&n.preventDefault()},t.handleStageClick_=function(){this.reportUserActivity()},t.toggleFullscreenClass_=function(){this.isFullscreen()?this.addClass("vjs-fullscreen"):this.removeClass("vjs-fullscreen")},t.documentFullscreenChange_=function(n){var s=n.target.player;if(!(s&&s!==this)){var a=this.el(),o=Me[this.fsApi_.fullscreenElement]===a;!o&&a.matches?o=a.matches(":"+this.fsApi_.fullscreen):!o&&a.msMatchesSelector&&(o=a.msMatchesSelector(":"+this.fsApi_.fullscreen)),this.isFullscreen(o)}},t.handleTechFullscreenChange_=function(n,s){var a=this;s&&(s.nativeIOSFullscreen&&(this.addClass("vjs-ios-native-fs"),this.tech_.one("webkitendfullscreen",function(){a.removeClass("vjs-ios-native-fs")})),this.isFullscreen(s.isFullscreen))},t.handleTechFullscreenError_=function(n,s){this.trigger("fullscreenerror",s)},t.togglePictureInPictureClass_=function(){this.isInPictureInPicture()?this.addClass("vjs-picture-in-picture"):this.removeClass("vjs-picture-in-picture")},t.handleTechEnterPictureInPicture_=function(n){this.isInPictureInPicture(!0)},t.handleTechLeavePictureInPicture_=function(n){this.isInPictureInPicture(!1)},t.handleTechError_=function(){var n=this.tech_.error();this.error(n)},t.handleTechTextData_=function(){var n=null;arguments.length>1&&(n=arguments[1]),this.trigger("textdata",n)},t.getCache=function(){return this.cache_},t.resetCache_=function(){this.cache_={currentTime:0,initTime:0,inactivityTimeout:this.options_.inactivityTimeout,duration:NaN,lastVolume:1,lastPlaybackRate:this.defaultPlaybackRate(),media:null,src:"",source:{},sources:[],playbackRates:[],volume:1}},t.techCall_=function(n,s){this.ready(function(){if(n in Jhe)return Yhe(this.middleware_,this.tech_,n,s);if(n in M4)return O4(this.middleware_,this.tech_,n,s);try{this.tech_&&this.tech_[n](s)}catch(a){throw Nr(a),a}},!0)},t.techGet_=function(n){if(!(!this.tech_||!this.tech_.isReady_)){if(n in Qhe)return Xhe(this.middleware_,this.tech_,n);if(n in M4)return O4(this.middleware_,this.tech_,n);try{return this.tech_[n]()}catch(s){throw this.tech_[n]===void 0?(Nr("Video.js: "+n+" method not defined for "+this.techName_+" playback technology.",s),s):s.name==="TypeError"?(Nr("Video.js: "+n+" unavailable on "+this.techName_+" playback technology element.",s),this.tech_.isReady_=!1,s):(Nr(s),s)}}},t.play=function(){var n=this,s=this.options_.Promise||X.Promise;return s?new s(function(a){n.play_(a)}):this.play_()},t.play_=function(n){var s=this;n===void 0&&(n=iu),this.playCallbacks_.push(n);var a=!!(!this.changingSrc_&&(this.src()||this.currentSrc())),o=!!(xT||ra);if(this.waitToPlay_&&(this.off(["ready","loadstart"],this.waitToPlay_),this.waitToPlay_=null),!this.isReady_||!a){this.waitToPlay_=function(c){s.play_()},this.one(["ready","loadstart"],this.waitToPlay_),!a&&o&&this.load();return}var l=this.techGet_("play"),u=o&&this.hasClass("vjs-ended");u&&this.resetProgressBar_(),l===null?this.runPlayTerminatedQueue_():this.runPlayCallbacks_(l)},t.runPlayTerminatedQueue_=function(){var n=this.playTerminatedQueue_.slice(0);this.playTerminatedQueue_=[],n.forEach(function(s){s()})},t.runPlayCallbacks_=function(n){var s=this.playCallbacks_.slice(0);this.playCallbacks_=[],this.playTerminatedQueue_=[],s.forEach(function(a){a(n)})},t.pause=function(){this.techCall_("pause")},t.paused=function(){return this.techGet_("paused")!==!1},t.played=function(){return this.techGet_("played")||Th(0,0)},t.scrubbing=function(n){if(typeof n>"u")return this.scrubbing_;this.scrubbing_=!!n,this.techCall_("setScrubbing",this.scrubbing_),n?this.addClass("vjs-scrubbing"):this.removeClass("vjs-scrubbing")},t.currentTime=function(n){if(typeof n<"u"){if(n<0&&(n=0),!this.isReady_||this.changingSrc_||!this.tech_||!this.tech_.isReady_){this.cache_.initTime=n,this.off("canplay",this.boundApplyInitTime_),this.one("canplay",this.boundApplyInitTime_);return}this.techCall_("setCurrentTime",n),this.cache_.initTime=0;return}return this.cache_.currentTime=this.techGet_("currentTime")||0,this.cache_.currentTime},t.applyInitTime_=function(){this.currentTime(this.cache_.initTime)},t.duration=function(n){if(n===void 0)return this.cache_.duration!==void 0?this.cache_.duration:NaN;n=parseFloat(n),n<0&&(n=1/0),n!==this.cache_.duration&&(this.cache_.duration=n,n===1/0?this.addClass("vjs-live"):this.removeClass("vjs-live"),isNaN(n)||this.trigger("durationchange"))},t.remainingTime=function(){return this.duration()-this.currentTime()},t.remainingTimeDisplay=function(){return Math.floor(this.duration())-Math.floor(this.currentTime())},t.buffered=function(){var n=this.techGet_("buffered");return(!n||!n.length)&&(n=Th(0,0)),n},t.bufferedPercent=function(){return hU(this.buffered(),this.duration())},t.bufferedEnd=function(){var n=this.buffered(),s=this.duration(),a=n.end(n.length-1);return a>s&&(a=s),a},t.volume=function(n){var s;if(n!==void 0){s=Math.max(0,Math.min(1,parseFloat(n))),this.cache_.volume=s,this.techCall_("setVolume",s),s>0&&this.lastVolume_(s);return}return s=parseFloat(this.techGet_("volume")),isNaN(s)?1:s},t.muted=function(n){if(n!==void 0){this.techCall_("setMuted",n);return}return this.techGet_("muted")||!1},t.defaultMuted=function(n){return n!==void 0?this.techCall_("setDefaultMuted",n):this.techGet_("defaultMuted")||!1},t.lastVolume_=function(n){if(n!==void 0&&n!==0){this.cache_.lastVolume=n;return}return this.cache_.lastVolume},t.supportsFullScreen=function(){return this.techGet_("supportsFullScreen")||!1},t.isFullscreen=function(n){if(n!==void 0){var s=this.isFullscreen_;this.isFullscreen_=!!n,this.isFullscreen_!==s&&this.fsApi_.prefixed&&this.trigger("fullscreenchange"),this.toggleFullscreenClass_();return}return this.isFullscreen_},t.requestFullscreen=function(n){var s=this.options_.Promise||X.Promise;if(s){var a=this;return new s(function(o,l){function u(){a.off("fullscreenerror",h),a.off("fullscreenchange",c)}function c(){u(),o()}function h(g,y){u(),l(y)}a.one("fullscreenchange",c),a.one("fullscreenerror",h);var m=a.requestFullscreenHelper_(n);m&&(m.then(u,u),m.then(o,l))})}return this.requestFullscreenHelper_()},t.requestFullscreenHelper_=function(n){var s=this,a;if(this.fsApi_.prefixed||(a=this.options_.fullscreen&&this.options_.fullscreen.options||{},n!==void 0&&(a=n)),this.fsApi_.requestFullscreen){var o=this.el_[this.fsApi_.requestFullscreen](a);return o&&o.then(function(){return s.isFullscreen(!0)},function(){return s.isFullscreen(!1)}),o}else this.tech_.supportsFullScreen()&&!this.options_.preferFullWindow?this.techCall_("enterFullScreen"):this.enterFullWindow()},t.exitFullscreen=function(){var n=this.options_.Promise||X.Promise;if(n){var s=this;return new n(function(a,o){function l(){s.off("fullscreenerror",c),s.off("fullscreenchange",u)}function u(){l(),a()}function c(m,g){l(),o(g)}s.one("fullscreenchange",u),s.one("fullscreenerror",c);var h=s.exitFullscreenHelper_();h&&(h.then(l,l),h.then(a,o))})}return this.exitFullscreenHelper_()},t.exitFullscreenHelper_=function(){var n=this;if(this.fsApi_.requestFullscreen){var s=Me[this.fsApi_.exitFullscreen]();return s&&iu(s.then(function(){return n.isFullscreen(!1)})),s}else this.tech_.supportsFullScreen()&&!this.options_.preferFullWindow?this.techCall_("exitFullScreen"):this.exitFullWindow()},t.enterFullWindow=function(){this.isFullscreen(!0),this.isFullWindow=!0,this.docOrigOverflow=Me.documentElement.style.overflow,ao(Me,"keydown",this.boundFullWindowOnEscKey_),Me.documentElement.style.overflow="hidden",nc(Me.body,"vjs-full-window"),this.trigger("enterFullWindow")},t.fullWindowOnEscKey=function(n){Ar.isEventKey(n,"Esc")&&this.isFullscreen()===!0&&(this.isFullWindow?this.exitFullWindow():this.exitFullscreen())},t.exitFullWindow=function(){this.isFullscreen(!1),this.isFullWindow=!1,Os(Me,"keydown",this.boundFullWindowOnEscKey_),Me.documentElement.style.overflow=this.docOrigOverflow,dg(Me.body,"vjs-full-window"),this.trigger("exitFullWindow")},t.disablePictureInPicture=function(n){if(n===void 0)return this.techGet_("disablePictureInPicture");this.techCall_("setDisablePictureInPicture",n),this.options_.disablePictureInPicture=n,this.trigger("disablepictureinpicturechanged")},t.isInPictureInPicture=function(n){if(n!==void 0){this.isInPictureInPicture_=!!n,this.togglePictureInPictureClass_();return}return!!this.isInPictureInPicture_},t.requestPictureInPicture=function(){if("pictureInPictureEnabled"in Me&&this.disablePictureInPicture()===!1)return this.techGet_("requestPictureInPicture")},t.exitPictureInPicture=function(){if("pictureInPictureEnabled"in Me)return Me.exitPictureInPicture()},t.handleKeyDown=function(n){var s=this.options_.userActions;if(!(!s||!s.hotkeys)){var a=function(l){var u=l.tagName.toLowerCase();if(l.isContentEditable)return!0;var c=["button","checkbox","hidden","radio","reset","submit"];if(u==="input")return c.indexOf(l.type)===-1;var h=["textarea"];return h.indexOf(u)!==-1};a(this.el_.ownerDocument.activeElement)||(typeof s.hotkeys=="function"?s.hotkeys.call(this,n):this.handleHotkeys(n))}},t.handleHotkeys=function(n){var s=this.options_.userActions?this.options_.userActions.hotkeys:{},a=s.fullscreenKey,o=a===void 0?function(_){return Ar.isEventKey(_,"f")}:a,l=s.muteKey,u=l===void 0?function(_){return Ar.isEventKey(_,"m")}:l,c=s.playPauseKey,h=c===void 0?function(_){return Ar.isEventKey(_,"k")||Ar.isEventKey(_,"Space")}:c;if(o.call(this,n)){n.preventDefault(),n.stopPropagation();var m=xt.getComponent("FullscreenToggle");Me[this.fsApi_.fullscreenEnabled]!==!1&&m.prototype.handleClick.call(this,n)}else if(u.call(this,n)){n.preventDefault(),n.stopPropagation();var g=xt.getComponent("MuteToggle");g.prototype.handleClick.call(this,n)}else if(h.call(this,n)){n.preventDefault(),n.stopPropagation();var y=xt.getComponent("PlayToggle");y.prototype.handleClick.call(this,n)}},t.canPlayType=function(n){for(var s,a=0,o=this.options_.techOrder;a<o.length;a++){var l=o[a],u=Di.getTech(l);if(u||(u=xt.getComponent(l)),!u){Nr.error('The "'+l+'" tech is undefined. Skipped browser support check for that tech.');continue}if(u.isSupported()&&(s=u.canPlayType(n),s))return s}return""},t.selectSource=function(n){var s=this,a=this.options_.techOrder.map(function(h){return[h,Di.getTech(h)]}).filter(function(h){var m=h[0],g=h[1];return g?g.isSupported():(Nr.error('The "'+m+'" tech is undefined. Skipped browser support check for that tech.'),!1)}),o=function(m,g,y){var _;return m.some(function(T){return g.some(function(E){if(_=y(T,E),_)return!0})}),_},l,u=function(m){return function(g,y){return m(y,g)}},c=function(m,g){var y=m[0],_=m[1];if(_.canPlaySource(g,s.options_[y.toLowerCase()]))return{source:g,tech:y}};return this.options_.sourceOrder?l=o(n,a,u(c)):l=o(a,n,c),l||!1},t.handleSrc_=function(n,s){var a=this;if(typeof n>"u")return this.cache_.src||"";this.resetRetryOnError_&&this.resetRetryOnError_();var o=nfe(n);if(!o.length){this.setTimeout(function(){this.error({code:4,message:this.options_.notSupportedMessage})},0);return}if(this.changingSrc_=!0,s||(this.cache_.sources=o),this.updateSourceCaches_(o[0]),Ghe(this,o[0],function(c,h){a.middleware_=h,s||(a.cache_.sources=o),a.updateSourceCaches_(c);var m=a.src_(c);if(m){if(o.length>1)return a.handleSrc_(o.slice(1));a.changingSrc_=!1,a.setTimeout(function(){this.error({code:4,message:this.options_.notSupportedMessage})},0),a.triggerReady();return}Khe(h,a.tech_)}),this.options_.retryOnError&&o.length>1){var l=function(){a.error(null),a.handleSrc_(o.slice(1),!0)},u=function(){a.off("error",l)};this.one("error",l),this.one("playing",u),this.resetRetryOnError_=function(){a.off("error",l),a.off("playing",u)}}},t.src=function(n){return this.handleSrc_(n,!1)},t.src_=function(n){var s=this,a=this.selectSource([n]);return a?Ahe(a.tech,this.techName_)?(this.ready(function(){this.tech_.constructor.prototype.hasOwnProperty("setSource")?this.techCall_("setSource",n):this.techCall_("src",n.src),this.changingSrc_=!1},!0),!1):(this.changingSrc_=!0,this.loadTech_(a.tech,a.source),this.tech_.ready(function(){s.changingSrc_=!1}),!1):!0},t.load=function(){this.techCall_("load")},t.reset=function(){var n=this,s=this.options_.Promise||X.Promise;if(this.paused()||!s)this.doReset_();else{var a=this.play();iu(a.then(function(){return n.doReset_()}))}},t.doReset_=function(){this.tech_&&this.tech_.clearTracks("text"),this.resetCache_(),this.poster(""),this.loadTech_(this.options_.techOrder[0],null),this.techCall_("reset"),this.resetControlBarUI_(),sc(this)&&this.trigger("playerreset")},t.resetControlBarUI_=function(){this.resetProgressBar_(),this.resetPlaybackRate_(),this.resetVolumeBar_()},t.resetProgressBar_=function(){this.currentTime(0);var n=this.controlBar||{},s=n.durationDisplay,a=n.remainingTimeDisplay;s&&s.updateContent(),a&&a.updateContent()},t.resetPlaybackRate_=function(){this.playbackRate(this.defaultPlaybackRate()),this.handleTechRateChange_()},t.resetVolumeBar_=function(){this.volume(1),this.trigger("volumechange")},t.currentSources=function(){var n=this.currentSource(),s=[];return Object.keys(n).length!==0&&s.push(n),this.cache_.sources||s},t.currentSource=function(){return this.cache_.source||{}},t.currentSrc=function(){return this.currentSource()&&this.currentSource().src||""},t.currentType=function(){return this.currentSource()&&this.currentSource().type||""},t.preload=function(n){if(n!==void 0){this.techCall_("setPreload",n),this.options_.preload=n;return}return this.techGet_("preload")},t.autoplay=function(n){if(n===void 0)return this.options_.autoplay||!1;var s;typeof n=="string"&&/(any|play|muted)/.test(n)||n===!0&&this.options_.normalizeAutoplay?(this.options_.autoplay=n,this.manualAutoplay_(typeof n=="string"?n:"play"),s=!1):n?this.options_.autoplay=!0:this.options_.autoplay=!1,s=typeof s>"u"?this.options_.autoplay:s,this.tech_&&this.techCall_("setAutoplay",s)},t.playsinline=function(n){return n!==void 0?(this.techCall_("setPlaysinline",n),this.options_.playsinline=n,this):this.techGet_("playsinline")},t.loop=function(n){if(n!==void 0){this.techCall_("setLoop",n),this.options_.loop=n;return}return this.techGet_("loop")},t.poster=function(n){if(n===void 0)return this.poster_;n||(n=""),n!==this.poster_&&(this.poster_=n,this.techCall_("setPoster",n),this.isPosterFromTech_=!1,this.trigger("posterchange"))},t.handleTechPosterChange_=function(){if((!this.poster_||this.options_.techCanOverridePoster)&&this.tech_&&this.tech_.poster){var n=this.tech_.poster()||"";n!==this.poster_&&(this.poster_=n,this.isPosterFromTech_=!0,this.trigger("posterchange"))}},t.controls=function(n){if(n===void 0)return!!this.controls_;n=!!n,this.controls_!==n&&(this.controls_=n,this.usingNativeControls()&&this.techCall_("setControls",n),this.controls_?(this.removeClass("vjs-controls-disabled"),this.addClass("vjs-controls-enabled"),this.trigger("controlsenabled"),this.usingNativeControls()||this.addTechControlsListeners_()):(this.removeClass("vjs-controls-enabled"),this.addClass("vjs-controls-disabled"),this.trigger("controlsdisabled"),this.usingNativeControls()||this.removeTechControlsListeners_()))},t.usingNativeControls=function(n){if(n===void 0)return!!this.usingNativeControls_;n=!!n,this.usingNativeControls_!==n&&(this.usingNativeControls_=n,this.usingNativeControls_?(this.addClass("vjs-using-native-controls"),this.trigger("usingnativecontrols")):(this.removeClass("vjs-using-native-controls"),this.trigger("usingcustomcontrols")))},t.error=function(n){var s=this;if(n===void 0)return this.error_||null;if(pd("beforeerror").forEach(function(o){var l=o(s,n);if(!(oc(l)&&!Array.isArray(l)||typeof l=="string"||typeof l=="number"||l===null)){s.log.error("please return a value that MediaError expects in beforeerror hooks");return}n=l}),this.options_.suppressNotSupportedError&&n&&n.code===4){var a=function(){this.error(n)};this.options_.suppressNotSupportedError=!1,this.any(["click","touchstart"],a),this.one("loadstart",function(){this.off(["click","touchstart"],a)});return}if(n===null){this.error_=n,this.removeClass("vjs-error"),this.errorDisplay&&this.errorDisplay.close();return}this.error_=new Zs(n),this.addClass("vjs-error"),Nr.error("(CODE:"+this.error_.code+" "+Zs.errorTypes[this.error_.code]+")",this.error_.message,this.error_),this.trigger("error"),pd("error").forEach(function(o){return o(s,s.error_)})},t.reportUserActivity=function(n){this.userActivity_=!0},t.userActive=function(n){if(n===void 0)return this.userActive_;if(n=!!n,n!==this.userActive_){if(this.userActive_=n,this.userActive_){this.userActivity_=!0,this.removeClass("vjs-user-inactive"),this.addClass("vjs-user-active"),this.trigger("useractive");return}this.tech_&&this.tech_.one("mousemove",function(s){s.stopPropagation(),s.preventDefault()}),this.userActivity_=!1,this.removeClass("vjs-user-active"),this.addClass("vjs-user-inactive"),this.trigger("userinactive")}},t.listenForUserActivity_=function(){var n,s,a,o=Fi(this,this.reportUserActivity),l=function(y){(y.screenX!==s||y.screenY!==a)&&(s=y.screenX,a=y.screenY,o())},u=function(){o(),this.clearInterval(n),n=this.setInterval(o,250)},c=function(y){o(),this.clearInterval(n)};this.on("mousedown",u),this.on("mousemove",l),this.on("mouseup",c),this.on("mouseleave",c);var h=this.getChild("controlBar");h&&!ra&&!dc&&(h.on("mouseenter",function(g){this.player().options_.inactivityTimeout!==0&&(this.player().cache_.inactivityTimeout=this.player().options_.inactivityTimeout),this.player().options_.inactivityTimeout=0}),h.on("mouseleave",function(g){this.player().options_.inactivityTimeout=this.player().cache_.inactivityTimeout})),this.on("keydown",o),this.on("keyup",o);var m;this.setInterval(function(){if(this.userActivity_){this.userActivity_=!1,this.userActive(!0),this.clearTimeout(m);var g=this.options_.inactivityTimeout;g<=0||(m=this.setTimeout(function(){this.userActivity_||this.userActive(!1)},g))}},250)},t.playbackRate=function(n){if(n!==void 0){this.techCall_("setPlaybackRate",n);return}return this.tech_&&this.tech_.featuresPlaybackRate?this.cache_.lastPlaybackRate||this.techGet_("playbackRate"):1},t.defaultPlaybackRate=function(n){return n!==void 0?this.techCall_("setDefaultPlaybackRate",n):this.tech_&&this.tech_.featuresPlaybackRate?this.techGet_("defaultPlaybackRate"):1},t.isAudio=function(n){if(n!==void 0){this.isAudio_=!!n;return}return!!this.isAudio_},t.enableAudioOnlyUI_=function(){var n=this;this.addClass("vjs-audio-only-mode");var s=this.children(),a=this.getChild("ControlBar"),o=a&&a.currentHeight();s.forEach(function(l){l!==a&&l.el_&&!l.hasClass("vjs-hidden")&&(l.hide(),n.audioOnlyCache_.hiddenChildren.push(l))}),this.audioOnlyCache_.playerHeight=this.currentHeight(),this.height(o),this.trigger("audioonlymodechange")},t.disableAudioOnlyUI_=function(){this.removeClass("vjs-audio-only-mode"),this.audioOnlyCache_.hiddenChildren.forEach(function(n){return n.show()}),this.height(this.audioOnlyCache_.playerHeight),this.trigger("audioonlymodechange")},t.audioOnlyMode=function(n){var s=this;if(typeof n!="boolean"||n===this.audioOnlyMode_)return this.audioOnlyMode_;this.audioOnlyMode_=n;var a=this.options_.Promise||X.Promise;if(a){if(n){var o=[];return this.isInPictureInPicture()&&o.push(this.exitPictureInPicture()),this.isFullscreen()&&o.push(this.exitFullscreen()),this.audioPosterMode()&&o.push(this.audioPosterMode(!1)),a.all(o).then(function(){return s.enableAudioOnlyUI_()})}return a.resolve().then(function(){return s.disableAudioOnlyUI_()})}n?(this.isInPictureInPicture()&&this.exitPictureInPicture(),this.isFullscreen()&&this.exitFullscreen(),this.enableAudioOnlyUI_()):this.disableAudioOnlyUI_()},t.enablePosterModeUI_=function(){var n=this.tech_&&this.tech_;n.hide(),this.addClass("vjs-audio-poster-mode"),this.trigger("audiopostermodechange")},t.disablePosterModeUI_=function(){var n=this.tech_&&this.tech_;n.show(),this.removeClass("vjs-audio-poster-mode"),this.trigger("audiopostermodechange")},t.audioPosterMode=function(n){var s=this;if(typeof n!="boolean"||n===this.audioPosterMode_)return this.audioPosterMode_;this.audioPosterMode_=n;var a=this.options_.Promise||X.Promise;if(a){if(n){if(this.audioOnlyMode()){var o=this.audioOnlyMode(!1);return o.then(function(){s.enablePosterModeUI_()})}return a.resolve().then(function(){s.enablePosterModeUI_()})}return a.resolve().then(function(){s.disablePosterModeUI_()})}if(n){this.audioOnlyMode()&&this.audioOnlyMode(!1),this.enablePosterModeUI_();return}this.disablePosterModeUI_()},t.addTextTrack=function(n,s,a){if(this.tech_)return this.tech_.addTextTrack(n,s,a)},t.addRemoteTextTrack=function(n,s){if(this.tech_)return this.tech_.addRemoteTextTrack(n,s)},t.removeRemoteTextTrack=function(n){n===void 0&&(n={});var s=n,a=s.track;if(a||(a=n),this.tech_)return this.tech_.removeRemoteTextTrack(a)},t.getVideoPlaybackQuality=function(){return this.techGet_("getVideoPlaybackQuality")},t.videoWidth=function(){return this.tech_&&this.tech_.videoWidth&&this.tech_.videoWidth()||0},t.videoHeight=function(){return this.tech_&&this.tech_.videoHeight&&this.tech_.videoHeight()||0},t.language=function(n){if(n===void 0)return this.language_;this.language_!==String(n).toLowerCase()&&(this.language_=String(n).toLowerCase(),sc(this)&&this.trigger("languagechange"))},t.languages=function(){return Mi(e.prototype.options_.languages,this.languages_)},t.toJSON=function(){var n=Mi(this.options_),s=n.tracks;n.tracks=[];for(var a=0;a<s.length;a++){var o=s[a];o=Mi(o),o.player=void 0,n.tracks[a]=o}return n},t.createModal=function(n,s){var a=this;s=s||{},s.content=n||"";var o=new Vp(this,s);return this.addChild(o),o.on("dispose",function(){a.removeChild(o)}),o.open(),o},t.updateCurrentBreakpoint_=function(){if(this.responsive())for(var n=this.currentBreakpoint(),s=this.currentWidth(),a=0;a<vE.length;a++){var o=vE[a],l=this.breakpoints_[o];if(s<=l){if(n===o)return;n&&this.removeClass(zy[n]),this.addClass(zy[o]),this.breakpoint_=o;break}}},t.removeCurrentBreakpoint_=function(){var n=this.currentBreakpointClass();this.breakpoint_="",n&&this.removeClass(n)},t.breakpoints=function(n){return n===void 0?rn(this.breakpoints_):(this.breakpoint_="",this.breakpoints_=rn({},Ofe,n),this.updateCurrentBreakpoint_(),rn(this.breakpoints_))},t.responsive=function(n){if(n===void 0)return this.responsive_;n=!!n;var s=this.responsive_;if(n!==s)return this.responsive_=n,n?(this.on("playerresize",this.boundUpdateCurrentBreakpoint_),this.updateCurrentBreakpoint_()):(this.off("playerresize",this.boundUpdateCurrentBreakpoint_),this.removeCurrentBreakpoint_()),n},t.currentBreakpoint=function(){return this.breakpoint_},t.currentBreakpointClass=function(){return zy[this.breakpoint_]||""},t.loadMedia=function(n,s){var a=this;if(!(!n||typeof n!="object")){this.reset(),this.cache_.media=Mi(n);var o=this.cache_.media,l=o.artwork,u=o.poster,c=o.src,h=o.textTracks;!l&&u&&(this.cache_.media.artwork=[{src:u,type:Y_(u)}]),c&&this.src(c),u&&this.poster(u),Array.isArray(h)&&h.forEach(function(m){return a.addRemoteTextTrack(m,!1)}),this.ready(s)}},t.getMedia=function(){if(!this.cache_.media){var n=this.poster(),s=this.currentSources(),a=Array.prototype.map.call(this.remoteTextTracks(),function(l){return{kind:l.kind,label:l.label,language:l.language,src:l.src}}),o={src:s,textTracks:a};return n&&(o.poster=n,o.artwork=[{src:o.poster,type:Y_(o.poster)}]),o}return Mi(this.cache_.media)},e.getTagSettings=function(n){var s={sources:[],tracks:[]},a=Yu(n),o=a["data-setup"];if(xh(n,"vjs-fill")&&(a.fill=!0),xh(n,"vjs-fluid")&&(a.fluid=!0),o!==null){var l=Ece(o||"{}"),u=l[0],c=l[1];u&&Nr.error(u),rn(a,c)}if(rn(s,a),n.hasChildNodes())for(var h=n.childNodes,m=0,g=h.length;m<g;m++){var y=h[m],_=y.nodeName.toLowerCase();_==="source"?s.sources.push(Yu(y)):_==="track"&&s.tracks.push(Yu(y))}return s},t.flexNotSupported_=function(){var n=Me.createElement("i");return!("flexBasis"in n.style||"webkitFlexBasis"in n.style||"mozFlexBasis"in n.style||"msFlexBasis"in n.style||"msFlexOrder"in n.style)},t.debug=function(n){if(n===void 0)return this.debugEnabled_;n?(this.trigger("debugon"),this.previousLogLevel_=this.log.level,this.log.level("debug"),this.debugEnabled_=!0):(this.trigger("debugoff"),this.log.level(this.previousLogLevel_),this.previousLogLevel_=void 0,this.debugEnabled_=!1)},t.playbackRates=function(n){if(n===void 0)return this.cache_.playbackRates;Array.isArray(n)&&n.every(function(s){return typeof s=="number"})&&(this.cache_.playbackRates=n,this.trigger("playbackrateschange"))},e})(xt);Xs.names.forEach(function(i){var e=Xs[i];Cn.prototype[e.getterName]=function(){return this.tech_?this.tech_[e.getterName]():(this[e.privateName]=this[e.privateName]||new e.ListClass,this[e.privateName])}});Cn.prototype.crossorigin=Cn.prototype.crossOrigin;Cn.players={};var Om=X.navigator;Cn.prototype.options_={techOrder:Di.defaultTechOrder_,html5:{},inactivityTimeout:2e3,playbackRates:[],liveui:!1,children:["mediaLoader","posterImage","textTrackDisplay","loadingSpinner","bigPlayButton","liveTracker","controlBar","errorDisplay","textTrackSettings","resizeManager"],language:Om&&(Om.languages&&Om.languages[0]||Om.userLanguage||Om.language)||"en",languages:{},notSupportedMessage:"No compatible source was found for this media.",normalizeAutoplay:!1,fullscreen:{options:{navigationUI:"hide"}},breakpoints:{},responsive:!1,audioOnlyMode:!1,audioPosterMode:!1};["ended","seeking","seekable","networkState","readyState"].forEach(function(i){Cn.prototype[i]=function(){return this.techGet_(i)}});zU.forEach(function(i){Cn.prototype["handleTech"+fn(i)+"_"]=function(){return this.trigger(i)}});xt.registerComponent("Player",Cn);var Z_="plugin",Zf="activePlugins_",Of={},ex=function(e){return Of.hasOwnProperty(e)},Hy=function(e){return ex(e)?Of[e]:void 0},HU=function(e,t){e[Zf]=e[Zf]||{},e[Zf][t]=!0},tx=function(e,t,r){var n=(r?"before":"")+"pluginsetup";e.trigger(n,t),e.trigger(n+":"+t.name,t)},Mfe=function(e,t){var r=function(){tx(this,{name:e,plugin:t,instance:null},!0);var s=t.apply(this,arguments);return HU(this,e),tx(this,{name:e,plugin:t,instance:s}),s};return Object.keys(t).forEach(function(n){r[n]=t[n]}),r},X4=function(e,t){return t.prototype.name=e,function(){tx(this,{name:e,plugin:t,instance:null},!0);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];var a=T6(t,[this].concat(n));return this[e]=function(){return a},tx(this,a.getEventHash()),a}},vu=(function(){function i(t){if(this.constructor===i)throw new Error("Plugin must be sub-classed; not directly instantiated.");this.player=t,this.log||(this.log=this.player.log.createLogger(this.name)),q2(this),delete this.trigger,dU(this,this.constructor.defaultState),HU(t,this.name),this.dispose=this.dispose.bind(this),t.on("dispose",this.dispose)}var e=i.prototype;return e.version=function(){return this.constructor.VERSION},e.getEventHash=function(r){return r===void 0&&(r={}),r.name=this.name,r.plugin=this.constructor,r.instance=this,r},e.trigger=function(r,n){return n===void 0&&(n={}),Hp(this.eventBusEl_,r,this.getEventHash(n))},e.handleStateChanged=function(r){},e.dispose=function(){var r=this.name,n=this.player;this.trigger("dispose"),this.off(),n.off("dispose",this.dispose),n[Zf][r]=!1,this.player=this.state=null,n[r]=X4(r,Of[r])},i.isBasic=function(r){var n=typeof r=="string"?Hy(r):r;return typeof n=="function"&&!i.prototype.isPrototypeOf(n.prototype)},i.registerPlugin=function(r,n){if(typeof r!="string")throw new Error('Illegal plugin name, "'+r+'", must be a string, was '+typeof r+".");if(ex(r))Nr.warn('A plugin named "'+r+'" already exists. You may want to avoid re-registering plugins!');else if(Cn.prototype.hasOwnProperty(r))throw new Error('Illegal plugin name, "'+r+'", cannot share a name with an existing player method!');if(typeof n!="function")throw new Error('Illegal plugin for "'+r+'", must be a function, was '+typeof n+".");return Of[r]=n,r!==Z_&&(i.isBasic(n)?Cn.prototype[r]=Mfe(r,n):Cn.prototype[r]=X4(r,n)),n},i.deregisterPlugin=function(r){if(r===Z_)throw new Error("Cannot de-register base plugin.");ex(r)&&(delete Of[r],delete Cn.prototype[r])},i.getPlugins=function(r){r===void 0&&(r=Object.keys(Of));var n;return r.forEach(function(s){var a=Hy(s);a&&(n=n||{},n[s]=a)}),n},i.getPluginVersion=function(r){var n=Hy(r);return n&&n.VERSION||""},i})();vu.getPlugin=Hy;vu.BASE_PLUGIN_NAME=Z_;vu.registerPlugin(Z_,vu);Cn.prototype.usingPlugin=function(i){return!!this[Zf]&&this[Zf][i]===!0};Cn.prototype.hasPlugin=function(i){return!!ex(i)};var Y4=!1,Ffe=function(e,t){t===void 0&&(t={}),Y4||(Nr.warn("videojs.extend is deprecated as of Video.js 7.22.0 and will be removed in Video.js 8.0.0"),Y4=!0);var r=function(){e.apply(this,arguments)},n={};typeof t=="object"?(t.constructor!==Object.prototype.constructor&&(r=t.constructor),n=t):typeof t=="function"&&(r=t),La(r,e),e&&(r.super_=e);for(var s in n)n.hasOwnProperty(s)&&(r.prototype[s]=n[s]);return r},VU=function(e){return e.indexOf("#")===0?e.slice(1):e};function Re(i,e,t){var r=Re.getPlayer(i);if(r)return e&&Nr.warn('Player "'+i+'" is already initialised. Options will not be applied.'),t&&r.ready(t),r;var n=typeof i=="string"?md("#"+VU(i)):i;if(!zp(n))throw new TypeError("The element or ID supplied is not valid. (videojs)");(!n.ownerDocument.defaultView||!n.ownerDocument.body.contains(n))&&Nr.warn("The element supplied is not included in the DOM"),e=e||{},e.restoreEl===!0&&(e.restoreEl=(n.parentNode&&n.parentNode.hasAttribute("data-vjs-player")?n.parentNode:n).cloneNode(!0)),pd("beforesetup").forEach(function(a){var o=a(n,Mi(e));if(!oc(o)||Array.isArray(o)){Nr.error("please return an object in beforesetup hooks");return}e=Mi(e,o)});var s=xt.getComponent("Player");return r=new s(n,e,t),pd("setup").forEach(function(a){return a(r)}),r}Re.hooks_=ec;Re.hooks=pd;Re.hook=uhe;Re.hookOnce=che;Re.removeHook=F6;if(X.VIDEOJS_NO_DYNAMIC_STYLE!==!0&&jp()){var Rv=md(".vjs-styles-defaults");if(!Rv){Rv=sU("vjs-styles-defaults");var I1=md("head");I1&&I1.insertBefore(Rv,I1.firstChild),aU(Rv,`
      .video-js {
        width: 300px;
        height: 150px;
      }

      .vjs-fluid:not(.vjs-audio-only-mode) {
        padding-top: 56.25%
      }
    `)}}dE(1,Re);Re.VERSION=M6;Re.options=Cn.prototype.options_;Re.getPlayers=function(){return Cn.players};Re.getPlayer=function(i){var e=Cn.players,t;if(typeof i=="string"){var r=VU(i),n=e[r];if(n)return n;t=md("#"+r)}else t=i;if(zp(t)){var s=t,a=s.player,o=s.playerId;if(a||e[o])return a||e[o]}};Re.getAllPlayers=function(){return Object.keys(Cn.players).map(function(i){return Cn.players[i]}).filter(Boolean)};Re.players=Cn.players;Re.getComponent=xt.getComponent;Re.registerComponent=function(i,e){Di.isTech(e)&&Nr.warn("The "+i+" tech was registered as a component. It should instead be registered using videojs.registerTech(name, tech)"),xt.registerComponent.call(xt,i,e)};Re.getTech=Di.getTech;Re.registerTech=Di.registerTech;Re.use=Whe;Object.defineProperty(Re,"middleware",{value:{},writeable:!1,enumerable:!0});Object.defineProperty(Re.middleware,"TERMINATOR",{value:X_,writeable:!1,enumerable:!0});Re.browser=ghe;Re.TOUCH_ENABLED=_p;Re.extend=Ffe;Re.mergeOptions=Mi;Re.bind=Fi;Re.registerPlugin=vu.registerPlugin;Re.deregisterPlugin=vu.deregisterPlugin;Re.plugin=function(i,e){return Nr.warn("videojs.plugin() is deprecated; use videojs.registerPlugin() instead"),vu.registerPlugin(i,e)};Re.getPlugins=vu.getPlugins;Re.getPlugin=vu.getPlugin;Re.getPluginVersion=vu.getPluginVersion;Re.addLanguage=function(i,e){var t;return i=(""+i).toLowerCase(),Re.options.languages=Mi(Re.options.languages,(t={},t[i]=e,t)),Re.options.languages[i]};Re.log=Nr;Re.createLogger=N6;Re.createTimeRange=Re.createTimeRanges=Th;Re.formatTime=Cp;Re.setFormatTime=dfe;Re.resetFormatTime=hfe;Re.parseUrl=G2;Re.isCrossOrigin=wT;Re.EventTarget=Yn;Re.on=ao;Re.one=CT;Re.off=Os;Re.trigger=Hp;Re.xhr=_6;Re.TextTrack=hg;Re.AudioTrack=mU;Re.VideoTrack=gU;["isEl","isTextNode","createEl","hasClass","addClass","removeClass","toggleClass","setAttributes","getAttributes","emptyEl","appendContent","insertContent"].forEach(function(i){Re[i]=function(){return Nr.warn("videojs."+i+"() is deprecated; use videojs.dom."+i+"() instead"),iU[i].apply(null,arguments)}});Re.computedStyle=M0;Re.dom=iU;Re.url=zhe;Re.defineLazyProperty=hk;Re.addLanguage("en",{"Non-Fullscreen":"Exit Fullscreen"});/*! @name @videojs/http-streaming @version 2.16.3 @license Apache-2.0 */var ol=gT,rx=function(e,t,r){return e&&r&&r.responseURL&&t!==r.responseURL?r.responseURL:t},xl=function(e){return Re.log.debug?Re.log.debug.bind(Re,"VHS:",e+" >"):function(){}},gd=1/30,nu=gd*3,qU=function(e,t){var r=[],n;if(e&&e.length)for(n=0;n<e.length;n++)t(e.start(n),e.end(n))&&r.push([e.start(n),e.end(n)]);return Re.createTimeRanges(r)},Mf=function(e,t){return qU(e,function(r,n){return r-nu<=t&&n+nu>=t})},Lv=function(e,t){return qU(e,function(r){return r-gd>=t})},Bfe=function(e){if(e.length<2)return Re.createTimeRanges();for(var t=[],r=1;r<e.length;r++){var n=e.end(r-1),s=e.start(r);t.push([n,s])}return Re.createTimeRanges(t)},Nfe=function(e,t){var r=null,n=null,s=0,a=[],o=[];if(!e||!e.length||!t||!t.length)return Re.createTimeRange();for(var l=e.length;l--;)a.push({time:e.start(l),type:"start"}),a.push({time:e.end(l),type:"end"});for(l=t.length;l--;)a.push({time:t.start(l),type:"start"}),a.push({time:t.end(l),type:"end"});for(a.sort(function(u,c){return u.time-c.time}),l=0;l<a.length;l++)a[l].type==="start"?(s++,s===2&&(r=a[l].time)):a[l].type==="end"&&(s--,s===1&&(n=a[l].time)),r!==null&&n!==null&&(o.push([r,n]),r=null,n=null);return Re.createTimeRanges(o)},WU=function(e){var t=[];if(!e||!e.length)return"";for(var r=0;r<e.length;r++)t.push(e.start(r)+" => "+e.end(r));return t.join(", ")},Ufe=function(e,t,r){r===void 0&&(r=1);var n=e.length?e.end(e.length-1):0;return(n-t)/r},lh=function(e){for(var t=[],r=0;r<e.length;r++)t.push({start:e.start(r),end:e.end(r)});return t},$fe=function(e,t){if(e===t)return!1;if(!e&&t||!t&&e||e.length!==t.length)return!0;for(var r=0;r<e.length;r++)if(e.start(r)!==t.start(r)||e.end(r)!==t.end(r))return!0;return!1},Q4=function(e){if(!(!e||!e.length||!e.end))return e.end(e.length-1)},fk=function(e,t){var r=0;if(!e||!e.length)return r;for(var n=0;n<e.length;n++){var s=e.start(n),a=e.end(n);if(!(t>a)){if(t>s&&t<=a){r+=a-t;continue}r+=a-s}}return r},J4=Re.createTimeRange,pk=function(e,t){if(!t.preload)return t.duration;var r=0;return(t.parts||[]).forEach(function(n){r+=n.duration}),(t.preloadHints||[]).forEach(function(n){n.type==="PART"&&(r+=e.partTargetDuration)}),r},yE=function(e){return(e.segments||[]).reduce(function(t,r,n){return r.parts?r.parts.forEach(function(s,a){t.push({duration:s.duration,segmentIndex:n,partIndex:a,part:s,segment:r})}):t.push({duration:r.duration,segmentIndex:n,partIndex:null,segment:r,part:null}),t},[])},GU=function(e){var t=e.segments&&e.segments.length&&e.segments[e.segments.length-1];return t&&t.parts||[]},KU=function(e){var t=e.preloadSegment;if(t){var r=t.parts,n=t.preloadHints,s=(n||[]).reduce(function(a,o){return a+(o.type==="PART"?1:0)},0);return s+=r&&r.length?r.length:0,s}},XU=function(e,t){if(t.endList)return 0;if(e&&e.suggestedPresentationDelay)return e.suggestedPresentationDelay;var r=GU(t).length>0;return r&&t.serverControl&&t.serverControl.partHoldBack?t.serverControl.partHoldBack:r&&t.partTargetDuration?t.partTargetDuration*3:t.serverControl&&t.serverControl.holdBack?t.serverControl.holdBack:t.targetDuration?t.targetDuration*3:0},jfe=function(e,t){var r=0,n=t-e.mediaSequence,s=e.segments[n];if(s){if(typeof s.start<"u")return{result:s.start,precise:!0};if(typeof s.end<"u")return{result:s.end-s.duration,precise:!0}}for(;n--;){if(s=e.segments[n],typeof s.end<"u")return{result:r+s.end,precise:!0};if(r+=pk(e,s),typeof s.start<"u")return{result:r+s.start,precise:!0}}return{result:r,precise:!1}},zfe=function(e,t){for(var r=0,n,s=t-e.mediaSequence;s<e.segments.length;s++){if(n=e.segments[s],typeof n.start<"u")return{result:n.start-r,precise:!0};if(r+=pk(e,n),typeof n.end<"u")return{result:n.end-r,precise:!0}}return{result:-1,precise:!1}},YU=function(e,t,r){if(typeof t>"u"&&(t=e.mediaSequence+e.segments.length),t<e.mediaSequence)return 0;var n=jfe(e,t);if(n.precise)return n.result;var s=zfe(e,t);return s.precise?s.result:n.result+r},QU=function(e,t,r){if(!e)return 0;if(typeof r!="number"&&(r=0),typeof t>"u"){if(e.totalDuration)return e.totalDuration;if(!e.endList)return X.Infinity}return YU(e,t,r)},p0=function(e){var t=e.defaultDuration,r=e.durationList,n=e.startIndex,s=e.endIndex,a=0;if(n>s){var o=[s,n];n=o[0],s=o[1]}if(n<0){for(var l=n;l<Math.min(0,s);l++)a+=t;n=0}for(var u=n;u<s;u++)a+=r[u].duration;return a},JU=function(e,t,r,n){if(!e||!e.segments)return null;if(e.endList)return QU(e);if(t===null)return null;t=t||0;var s=YU(e,e.mediaSequence+e.segments.length,t);return r&&(n=typeof n=="number"?n:XU(null,e),s-=n),Math.max(0,s)},Hfe=function(e,t,r){var n=!0,s=t||0,a=JU(e,t,n,r);return a===null?J4():J4(s,a)},Vfe=function(e){for(var t=e.playlist,r=e.currentTime,n=e.startingSegmentIndex,s=e.startingPartIndex,a=e.startTime,o=e.experimentalExactManifestTimings,l=r-a,u=yE(t),c=0,h=0;h<u.length;h++){var m=u[h];if(n===m.segmentIndex&&!(typeof s=="number"&&typeof m.partIndex=="number"&&s!==m.partIndex)){c=h;break}}if(l<0){if(c>0)for(var g=c-1;g>=0;g--){var y=u[g];if(l+=y.duration,o){if(l<0)continue}else if(l+gd<=0)continue;return{partIndex:y.partIndex,segmentIndex:y.segmentIndex,startTime:a-p0({defaultDuration:t.targetDuration,durationList:u,startIndex:c,endIndex:g})}}return{partIndex:u[0]&&u[0].partIndex||null,segmentIndex:u[0]&&u[0].segmentIndex||0,startTime:r}}if(c<0){for(var _=c;_<0;_++)if(l-=t.targetDuration,l<0)return{partIndex:u[0]&&u[0].partIndex||null,segmentIndex:u[0]&&u[0].segmentIndex||0,startTime:r};c=0}for(var T=c;T<u.length;T++){var E=u[T];if(l-=E.duration,o){if(l>0)continue}else if(l-gd>=0)continue;return{partIndex:E.partIndex,segmentIndex:E.segmentIndex,startTime:a+p0({defaultDuration:t.targetDuration,durationList:u,startIndex:c,endIndex:T})}}return{segmentIndex:u[u.length-1].segmentIndex,partIndex:u[u.length-1].partIndex,startTime:r}},ZU=function(e){return e.excludeUntil&&e.excludeUntil>Date.now()},mk=function(e){return e.excludeUntil&&e.excludeUntil===1/0},DT=function(e){var t=ZU(e);return!e.disabled&&!t},qfe=function(e){return e.disabled},Wfe=function(e){for(var t=0;t<e.segments.length;t++)if(e.segments[t].key)return!0;return!1},e$=function(e,t){return t.attributes&&t.attributes[e]},Gfe=function(e,t,r,n){if(n===void 0&&(n=0),!e$("BANDWIDTH",r))return NaN;var s=e*r.attributes.BANDWIDTH;return(s-n*8)/t},_E=function(e,t){if(e.playlists.length===1)return!0;var r=t.attributes.BANDWIDTH||Number.MAX_VALUE;return e.playlists.filter(function(n){return DT(n)?(n.attributes.BANDWIDTH||0)<r:!1}).length===0},gk=function(e,t){return!e&&!t||!e&&t||e&&!t?!1:!!(e===t||e.id&&t.id&&e.id===t.id||e.resolvedUri&&t.resolvedUri&&e.resolvedUri===t.resolvedUri||e.uri&&t.uri&&e.uri===t.uri)},Z4=function(e,t){var r=e&&e.mediaGroups&&e.mediaGroups.AUDIO||{},n=!1;for(var s in r){for(var a in r[s])if(n=t(r[s][a]),n)break;if(n)break}return!!n},mg=function(e){if(!e||!e.playlists||!e.playlists.length){var t=Z4(e,function(a){return a.playlists&&a.playlists.length||a.uri});return t}for(var r=function(o){var l=e.playlists[o],u=l.attributes&&l.attributes.CODECS;if(u&&u.split(",").every(function(h){return C6(h)}))return"continue";var c=Z4(e,function(h){return gk(l,h)});return c?"continue":{v:!1}},n=0;n<e.playlists.length;n++){var s=r(n);if(s!=="continue"&&typeof s=="object")return s.v}return!0},ka={liveEdgeDelay:XU,duration:QU,seekable:Hfe,getMediaInfoForTime:Vfe,isEnabled:DT,isDisabled:qfe,isBlacklisted:ZU,isIncompatible:mk,playlistEnd:JU,isAes:Wfe,hasAttribute:e$,estimateSegmentRequestTime:Gfe,isLowestEnabledRendition:_E,isAudioOnly:mg,playlistMatch:gk,segmentDurationWithParts:pk},t$=Re.log,vk=function(e,t){return e+"-"+t},Kfe=function(e,t,r){return"placeholder-uri-"+e+"-"+t+"-"+r},Xfe=function(e){var t=e.onwarn,r=e.oninfo,n=e.manifestString,s=e.customTagParsers,a=s===void 0?[]:s,o=e.customTagMappers,l=o===void 0?[]:o,u=e.experimentalLLHLS,c=new Bce;t&&c.on("warn",t),r&&c.on("info",r),a.forEach(function(_){return c.addParser(_)}),l.forEach(function(_){return c.addTagMapper(_)}),c.push(n),c.end();var h=c.manifest;if(u||(["preloadSegment","skip","serverControl","renditionReports","partInf","partTargetDuration"].forEach(function(_){h.hasOwnProperty(_)&&delete h[_]}),h.segments&&h.segments.forEach(function(_){["parts","preloadHints"].forEach(function(T){_.hasOwnProperty(T)&&delete _[T]})})),!h.targetDuration){var m=10;h.segments&&h.segments.length&&(m=h.segments.reduce(function(_,T){return Math.max(_,T.duration)},0)),t&&t("manifest has no targetDuration defaulting to "+m),h.targetDuration=m}var g=GU(h);if(g.length&&!h.partTargetDuration){var y=g.reduce(function(_,T){return Math.max(_,T.duration)},0);t&&(t("manifest has no partTargetDuration defaulting to "+y),t$.error("LL-HLS manifest has parts but lacks required #EXT-X-PART-INF:PART-TARGET value. See https://datatracker.ietf.org/doc/html/draft-pantos-hls-rfc8216bis-09#section-4.4.3.7. Playback is not guaranteed.")),h.partTargetDuration=y}return h},Kp=function(e,t){e.mediaGroups&&["AUDIO","SUBTITLES"].forEach(function(r){if(e.mediaGroups[r])for(var n in e.mediaGroups[r])for(var s in e.mediaGroups[r][n]){var a=e.mediaGroups[r][n][s];t(a,r,n,s)}})},r$=function(e){var t=e.playlist,r=e.uri,n=e.id;t.id=n,t.playlistErrors_=0,r&&(t.uri=r),t.attributes=t.attributes||{}},Yfe=function(e){for(var t=e.playlists.length;t--;){var r=e.playlists[t];r$({playlist:r,id:vk(t,r.uri)}),r.resolvedUri=ol(e.uri,r.uri),e.playlists[r.id]=r,e.playlists[r.uri]=r,r.attributes.BANDWIDTH||t$.warn("Invalid playlist STREAM-INF detected. Missing BANDWIDTH attribute.")}},Qfe=function(e){Kp(e,function(t){t.uri&&(t.resolvedUri=ol(e.uri,t.uri))})},Jfe=function(e,t){var r=vk(0,t),n={mediaGroups:{AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},uri:X.location.href,resolvedUri:X.location.href,playlists:[{uri:t,id:r,resolvedUri:t,attributes:{}}]};return n.playlists[r]=n.playlists[0],n.playlists[t]=n.playlists[0],n},i$=function(e,t,r){r===void 0&&(r=Kfe),e.uri=t;for(var n=0;n<e.playlists.length;n++)if(!e.playlists[n].uri){var s="placeholder-uri-"+n;e.playlists[n].uri=s}var a=mg(e);Kp(e,function(o,l,u,c){if(!o.playlists||!o.playlists.length){if(a&&l==="AUDIO"&&!o.uri)for(var h=0;h<e.playlists.length;h++){var m=e.playlists[h];if(m.attributes&&m.attributes.AUDIO&&m.attributes.AUDIO===u)return}o.playlists=[Jt({},o)]}o.playlists.forEach(function(g,y){var _=r(l,u,c,g),T=vk(y,_);g.uri?g.resolvedUri=g.resolvedUri||ol(e.uri,g.uri):(g.uri=y===0?_:T,g.resolvedUri=g.uri),g.id=g.id||T,g.attributes=g.attributes||{},e.playlists[g.id]=g,e.playlists[g.uri]=g})}),Yfe(e),Qfe(e)},ix=Re.mergeOptions,Zfe=Re.EventTarget,epe=function(e,t){if(t.endList||!t.serverControl)return e;var r={};if(t.serverControl.canBlockReload){var n=t.preloadSegment,s=t.mediaSequence+t.segments.length;if(n){var a=n.parts||[],o=KU(t)-1;o>-1&&o!==a.length-1&&(r._HLS_part=o),(o>-1||a.length)&&s--}r._HLS_msn=s}if(t.serverControl&&t.serverControl.canSkipUntil&&(r._HLS_skip=t.serverControl.canSkipDateranges?"v2":"YES"),Object.keys(r).length){var l=new X.URL(e);["_HLS_skip","_HLS_msn","_HLS_part"].forEach(function(u){r.hasOwnProperty(u)&&l.searchParams.set(u,r[u])}),e=l.toString()}return e},tpe=function(e,t){if(!e)return t;var r=ix(e,t);if(e.preloadHints&&!t.preloadHints&&delete r.preloadHints,e.parts&&!t.parts)delete r.parts;else if(e.parts&&t.parts)for(var n=0;n<t.parts.length;n++)e.parts&&e.parts[n]&&(r.parts[n]=ix(e.parts[n],t.parts[n]));return!e.skipped&&t.skipped&&(r.skipped=!1),e.preload&&!t.preload&&(r.preload=!1),r},rpe=function(e,t,r){var n=e.slice(),s=t.slice();r=r||0;for(var a=[],o,l=0;l<s.length;l++){var u=n[l+r],c=s[l];u?(o=u.map||o,a.push(tpe(u,c))):(o&&!c.map&&(c.map=o),a.push(c))}return a},n$=function(e,t){!e.resolvedUri&&e.uri&&(e.resolvedUri=ol(t,e.uri)),e.key&&!e.key.resolvedUri&&(e.key.resolvedUri=ol(t,e.key.uri)),e.map&&!e.map.resolvedUri&&(e.map.resolvedUri=ol(t,e.map.uri)),e.map&&e.map.key&&!e.map.key.resolvedUri&&(e.map.key.resolvedUri=ol(t,e.map.key.uri)),e.parts&&e.parts.length&&e.parts.forEach(function(r){r.resolvedUri||(r.resolvedUri=ol(t,r.uri))}),e.preloadHints&&e.preloadHints.length&&e.preloadHints.forEach(function(r){r.resolvedUri||(r.resolvedUri=ol(t,r.uri))})},s$=function(e){var t=e.segments||[],r=e.preloadSegment;if(r&&r.parts&&r.parts.length){if(r.preloadHints){for(var n=0;n<r.preloadHints.length;n++)if(r.preloadHints[n].type==="MAP")return t}r.duration=e.targetDuration,r.preload=!0,t.push(r)}return t},a$=function(e,t){return e===t||e.segments&&t.segments&&e.segments.length===t.segments.length&&e.endList===t.endList&&e.mediaSequence===t.mediaSequence&&e.preloadSegment===t.preloadSegment},xE=function(e,t,r){r===void 0&&(r=a$);var n=ix(e,{}),s=n.playlists[t.id];if(!s||r(s,t))return null;t.segments=s$(t);var a=ix(s,t);if(a.preloadSegment&&!t.preloadSegment&&delete a.preloadSegment,s.segments){if(t.skip){t.segments=t.segments||[];for(var o=0;o<t.skip.skippedSegments;o++)t.segments.unshift({skipped:!0})}a.segments=rpe(s.segments,t.segments,t.mediaSequence-s.mediaSequence)}a.segments.forEach(function(u){n$(u,a.resolvedUri)});for(var l=0;l<n.playlists.length;l++)n.playlists[l].id===t.id&&(n.playlists[l]=a);return n.playlists[t.id]=a,n.playlists[t.uri]=a,Kp(e,function(u,c,h,m){if(u.playlists)for(var g=0;g<u.playlists.length;g++)t.id===u.playlists[g].id&&(u.playlists[g]=a)}),n},TE=function(e,t){var r=e.segments||[],n=r[r.length-1],s=n&&n.parts&&n.parts[n.parts.length-1],a=s&&s.duration||n&&n.duration;return t&&a?a*1e3:(e.partTargetDuration||e.targetDuration||10)*500},Ff=(function(i){Ft(e,i);function e(r,n,s){var a;if(s===void 0&&(s={}),a=i.call(this)||this,!r)throw new Error("A non-empty playlist URL or object is required");a.logger_=xl("PlaylistLoader");var o=s,l=o.withCredentials,u=l===void 0?!1:l,c=o.handleManifestRedirects,h=c===void 0?!1:c;a.src=r,a.vhs_=n,a.withCredentials=u,a.handleManifestRedirects=h;var m=n.options_;return a.customTagParsers=m&&m.customTagParsers||[],a.customTagMappers=m&&m.customTagMappers||[],a.experimentalLLHLS=m&&m.experimentalLLHLS||!1,Re.browser.IE_VERSION&&(a.experimentalLLHLS=!1),a.state="HAVE_NOTHING",a.handleMediaupdatetimeout_=a.handleMediaupdatetimeout_.bind(je(a)),a.on("mediaupdatetimeout",a.handleMediaupdatetimeout_),a}var t=e.prototype;return t.handleMediaupdatetimeout_=function(){var n=this;if(this.state==="HAVE_METADATA"){var s=this.media(),a=ol(this.master.uri,s.uri);this.experimentalLLHLS&&(a=epe(a,s)),this.state="HAVE_CURRENT_METADATA",this.request=this.vhs_.xhr({uri:a,withCredentials:this.withCredentials},function(o,l){if(n.request){if(o)return n.playlistRequestError(n.request,n.media(),"HAVE_METADATA");n.haveMetadata({playlistString:n.request.responseText,url:n.media().uri,id:n.media().id})}})}},t.playlistRequestError=function(n,s,a){var o=s.uri,l=s.id;this.request=null,a&&(this.state=a),this.error={playlist:this.master.playlists[l],status:n.status,message:"HLS playlist request error at URL: "+o+".",responseText:n.responseText,code:n.status>=500?4:2},this.trigger("error")},t.parseManifest_=function(n){var s=this,a=n.url,o=n.manifestString;return Xfe({onwarn:function(u){var c=u.message;return s.logger_("m3u8-parser warn for "+a+": "+c)},oninfo:function(u){var c=u.message;return s.logger_("m3u8-parser info for "+a+": "+c)},manifestString:o,customTagParsers:this.customTagParsers,customTagMappers:this.customTagMappers,experimentalLLHLS:this.experimentalLLHLS})},t.haveMetadata=function(n){var s=n.playlistString,a=n.playlistObject,o=n.url,l=n.id;this.request=null,this.state="HAVE_METADATA";var u=a||this.parseManifest_({url:o,manifestString:s});u.lastRequest=Date.now(),r$({playlist:u,uri:o,id:l});var c=xE(this.master,u);this.targetDuration=u.partTargetDuration||u.targetDuration,this.pendingMedia_=null,c?(this.master=c,this.media_=this.master.playlists[l]):this.trigger("playlistunchanged"),this.updateMediaUpdateTimeout_(TE(this.media(),!!c)),this.trigger("loadedplaylist")},t.dispose=function(){this.trigger("dispose"),this.stopRequest(),X.clearTimeout(this.mediaUpdateTimeout),X.clearTimeout(this.finalRenditionTimeout),this.off()},t.stopRequest=function(){if(this.request){var n=this.request;this.request=null,n.onreadystatechange=null,n.abort()}},t.media=function(n,s){var a=this;if(!n)return this.media_;if(this.state==="HAVE_NOTHING")throw new Error("Cannot switch media playlist from "+this.state);if(typeof n=="string"){if(!this.master.playlists[n])throw new Error("Unknown playlist URI: "+n);n=this.master.playlists[n]}if(X.clearTimeout(this.finalRenditionTimeout),s){var o=(n.partTargetDuration||n.targetDuration)/2*1e3||5e3;this.finalRenditionTimeout=X.setTimeout(this.media.bind(this,n,!1),o);return}var l=this.state,u=!this.media_||n.id!==this.media_.id,c=this.master.playlists[n.id];if(c&&c.endList||n.endList&&n.segments.length){this.request&&(this.request.onreadystatechange=null,this.request.abort(),this.request=null),this.state="HAVE_METADATA",this.media_=n,u&&(this.trigger("mediachanging"),l==="HAVE_MASTER"?this.trigger("loadedmetadata"):this.trigger("mediachange"));return}if(this.updateMediaUpdateTimeout_(TE(n,!0)),!!u){if(this.state="SWITCHING_MEDIA",this.request){if(n.resolvedUri===this.request.url)return;this.request.onreadystatechange=null,this.request.abort(),this.request=null}this.media_&&this.trigger("mediachanging"),this.pendingMedia_=n,this.request=this.vhs_.xhr({uri:n.resolvedUri,withCredentials:this.withCredentials},function(h,m){if(a.request){if(n.lastRequest=Date.now(),n.resolvedUri=rx(a.handleManifestRedirects,n.resolvedUri,m),h)return a.playlistRequestError(a.request,n,l);a.haveMetadata({playlistString:m.responseText,url:n.uri,id:n.id}),l==="HAVE_MASTER"?a.trigger("loadedmetadata"):a.trigger("mediachange")}})}},t.pause=function(){this.mediaUpdateTimeout&&(X.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null),this.stopRequest(),this.state==="HAVE_NOTHING"&&(this.started=!1),this.state==="SWITCHING_MEDIA"?this.media_?this.state="HAVE_METADATA":this.state="HAVE_MASTER":this.state==="HAVE_CURRENT_METADATA"&&(this.state="HAVE_METADATA")},t.load=function(n){var s=this;this.mediaUpdateTimeout&&(X.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null);var a=this.media();if(n){var o=a?(a.partTargetDuration||a.targetDuration)/2*1e3:5e3;this.mediaUpdateTimeout=X.setTimeout(function(){s.mediaUpdateTimeout=null,s.load()},o);return}if(!this.started){this.start();return}a&&!a.endList?this.trigger("mediaupdatetimeout"):this.trigger("loadedplaylist")},t.updateMediaUpdateTimeout_=function(n){var s=this;this.mediaUpdateTimeout&&(X.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null),!(!this.media()||this.media().endList)&&(this.mediaUpdateTimeout=X.setTimeout(function(){s.mediaUpdateTimeout=null,s.trigger("mediaupdatetimeout"),s.updateMediaUpdateTimeout_(n)},n))},t.start=function(){var n=this;if(this.started=!0,typeof this.src=="object"){this.src.uri||(this.src.uri=X.location.href),this.src.resolvedUri=this.src.uri,setTimeout(function(){n.setupInitialPlaylist(n.src)},0);return}this.request=this.vhs_.xhr({uri:this.src,withCredentials:this.withCredentials},function(s,a){if(n.request){if(n.request=null,s)return n.error={status:a.status,message:"HLS playlist request error at URL: "+n.src+".",responseText:a.responseText,code:2},n.state==="HAVE_NOTHING"&&(n.started=!1),n.trigger("error");n.src=rx(n.handleManifestRedirects,n.src,a);var o=n.parseManifest_({manifestString:a.responseText,url:n.src});n.setupInitialPlaylist(o)}})},t.srcUri=function(){return typeof this.src=="string"?this.src:this.src.uri},t.setupInitialPlaylist=function(n){if(this.state="HAVE_MASTER",n.playlists){this.master=n,i$(this.master,this.srcUri()),n.playlists.forEach(function(a){a.segments=s$(a),a.segments.forEach(function(o){n$(o,a.resolvedUri)})}),this.trigger("loadedplaylist"),this.request||this.media(this.master.playlists[0]);return}var s=this.srcUri()||X.location.href;this.master=Jfe(n,s),this.haveMetadata({playlistObject:n,url:s,id:this.master.playlists[0].id}),this.trigger("loadedmetadata")},e})(Zfe),ipe=Re.xhr,npe=Re.mergeOptions,bE=function(e,t,r,n){var s=e.responseType==="arraybuffer"?e.response:e.responseText;!t&&s&&(e.responseTime=Date.now(),e.roundTripTime=e.responseTime-e.requestTime,e.bytesReceived=s.byteLength||s.length,e.bandwidth||(e.bandwidth=Math.floor(e.bytesReceived/e.roundTripTime*8*1e3))),r.headers&&(e.responseHeaders=r.headers),t&&t.code==="ETIMEDOUT"&&(e.timedout=!0),!t&&!e.aborted&&r.statusCode!==200&&r.statusCode!==206&&r.statusCode!==0&&(t=new Error("XHR Failed with a response of: "+(e&&(s||e.responseText)))),n(t,e)},o$=function(){var e=function t(r,n){r=npe({timeout:45e3},r);var s=t.beforeRequest||Re.Vhs.xhr.beforeRequest;if(s&&typeof s=="function"){var a=s(r);a&&(r=a)}var o=Re.Vhs.xhr.original===!0?ipe:Re.Vhs.xhr,l=o(r,function(c,h){return bE(l,c,h,n)}),u=l.abort;return l.abort=function(){return l.aborted=!0,u.apply(l,arguments)},l.uri=r.uri,l.requestTime=Date.now(),l};return e.original=!0,e},spe=function(e){var t,r=e.offset;return typeof e.offset=="bigint"||typeof e.length=="bigint"?t=X.BigInt(e.offset)+X.BigInt(e.length)-X.BigInt(1):t=e.offset+e.length-1,"bytes="+r+"-"+t},SE=function(e){var t={};return e.byterange&&(t.Range=spe(e.byterange)),t},ape=function(e,t){return e.start(t)+"-"+e.end(t)},ope=function(e,t){var r=e.toString(16);return"00".substring(0,2-r.length)+r+(t%2?" ":"")},lpe=function(e){return e>=32&&e<126?String.fromCharCode(e):"."},l$=function(e){var t={};return Object.keys(e).forEach(function(r){var n=e[r];w6(n)?t[r]={bytes:n.buffer,byteOffset:n.byteOffset,byteLength:n.byteLength}:t[r]=n}),t},nx=function(e){var t=e.byterange||{length:1/0,offset:0};return[t.length,t.offset,e.resolvedUri].join(",")},u$=function(e){return e.resolvedUri},c$=function(e){for(var t=Array.prototype.slice.call(e),r=16,n="",s,a,o=0;o<t.length/r;o++)s=t.slice(o*r,o*r+r).map(ope).join(""),a=t.slice(o*r,o*r+r).map(lpe).join(""),n+=s+" "+a+`
`;return n},upe=function(e){var t=e.bytes;return c$(t)},cpe=function(e){var t="",r;for(r=0;r<e.length;r++)t+=ape(e,r)+" ";return t},dpe=Object.freeze({__proto__:null,createTransferableMessage:l$,initSegmentId:nx,segmentKeyId:u$,hexDump:c$,tagDump:upe,textRanges:cpe}),d$=.25,hpe=function(e,t){if(!t.dateTimeObject)return null;var r=t.videoTimingInfo.transmuxerPrependedSeconds,n=t.videoTimingInfo.transmuxedPresentationStart,s=n+r,a=e-s;return new Date(t.dateTimeObject.getTime()+a*1e3)},fpe=function(e){return e.transmuxedPresentationEnd-e.transmuxedPresentationStart-e.transmuxerPrependedSeconds},ppe=function(e,t){var r;try{r=new Date(e)}catch{return null}if(!t||!t.segments||t.segments.length===0)return null;var n=t.segments[0];if(r<n.dateTimeObject)return null;for(var s=0;s<t.segments.length-1;s++){n=t.segments[s];var a=t.segments[s+1].dateTimeObject;if(r<a)break}var o=t.segments[t.segments.length-1],l=o.dateTimeObject,u=o.videoTimingInfo?fpe(o.videoTimingInfo):o.duration+o.duration*d$,c=new Date(l.getTime()+u*1e3);return r>c?null:(r>l&&(n=o),{segment:n,estimatedStart:n.videoTimingInfo?n.videoTimingInfo.transmuxedPresentationStart:ka.duration(t,t.mediaSequence+t.segments.indexOf(n)),type:n.videoTimingInfo?"accurate":"estimate"})},mpe=function(e,t){if(!t||!t.segments||t.segments.length===0)return null;for(var r=0,n,s=0;s<t.segments.length&&(n=t.segments[s],r=n.videoTimingInfo?n.videoTimingInfo.transmuxedPresentationEnd:r+n.duration,!(e<=r));s++);var a=t.segments[t.segments.length-1];if(a.videoTimingInfo&&a.videoTimingInfo.transmuxedPresentationEnd<e)return null;if(e>r){if(e>r+a.duration*d$)return null;n=a}return{segment:n,estimatedStart:n.videoTimingInfo?n.videoTimingInfo.transmuxedPresentationStart:r-n.duration,type:n.videoTimingInfo?"accurate":"estimate"}},gpe=function(e,t){var r,n;try{r=new Date(e),n=new Date(t)}catch{}var s=r.getTime(),a=n.getTime();return(a-s)/1e3},vpe=function(e){if(!e.segments||e.segments.length===0)return!1;for(var t=0;t<e.segments.length;t++){var r=e.segments[t];if(!r.dateTimeObject)return!1}return!0},ype=function(e){var t=e.playlist,r=e.time,n=r===void 0?void 0:r,s=e.callback;if(!s)throw new Error("getProgramTime: callback must be provided");if(!t||n===void 0)return s({message:"getProgramTime: playlist and time must be provided"});var a=mpe(n,t);if(!a)return s({message:"valid programTime was not found"});if(a.type==="estimate")return s({message:"Accurate programTime could not be determined. Please seek to e.seekTime and try again",seekTime:a.estimatedStart});var o={mediaSeconds:n},l=hpe(n,a.segment);return l&&(o.programDateTime=l.toISOString()),s(null,o)},_pe=function i(e){var t=e.programTime,r=e.playlist,n=e.retryCount,s=n===void 0?2:n,a=e.seekTo,o=e.pauseAfterSeek,l=o===void 0?!0:o,u=e.tech,c=e.callback;if(!c)throw new Error("seekToProgramTime: callback must be provided");if(typeof t>"u"||!r||!a)return c({message:"seekToProgramTime: programTime, seekTo and playlist must be provided"});if(!r.endList&&!u.hasStarted_)return c({message:"player must be playing a live stream to start buffering"});if(!vpe(r))return c({message:"programDateTime tags must be provided in the manifest "+r.resolvedUri});var h=ppe(t,r);if(!h)return c({message:t+" was not found in the stream"});var m=h.segment,g=gpe(m.dateTimeObject,t);if(h.type==="estimate"){if(s===0)return c({message:t+" is not buffered yet. Try again"});a(h.estimatedStart+g),u.one("seeked",function(){i({programTime:t,playlist:r,retryCount:s-1,seekTo:a,pauseAfterSeek:l,tech:u,callback:c})});return}var y=m.start+g,_=function(){return c(null,u.currentTime())};u.one("seeked",_),l&&u.pause(),a(y)},D1=function(e,t){if(e.readyState===4)return t()},xpe=function(e,t,r){var n=[],s,a=!1,o=function(m,g,y,_){return g.abort(),a=!0,r(m,g,y,_)},l=function(m,g){if(!a){if(m)return o(m,g,"",n);var y=g.responseText.substring(n&&n.byteLength||0,g.responseText.length);if(n=Xce(n,k6(y,!0)),s=s||Ym(n),n.length<10||s&&n.length<s+2)return D1(g,function(){return o(m,g,"",n)});var _=B2(n);return _==="ts"&&n.length<188?D1(g,function(){return o(m,g,"",n)}):!_&&n.length<376?D1(g,function(){return o(m,g,"",n)}):o(null,g,_,n)}},u={uri:e,beforeSend:function(m){m.overrideMimeType("text/plain; charset=x-user-defined"),m.addEventListener("progress",function(g){return g.total,g.loaded,bE(m,null,{statusCode:m.status},l)})}},c=t(u,function(h,m){return bE(c,h,m,l)});return c},Tpe=Re.EventTarget,h$=Re.mergeOptions,eM=function(e,t){if(!a$(e,t)||e.sidx&&t.sidx&&(e.sidx.offset!==t.sidx.offset||e.sidx.length!==t.sidx.length))return!1;if(!e.sidx&&t.sidx||e.sidx&&!t.sidx||e.segments&&!t.segments||!e.segments&&t.segments)return!1;if(!e.segments&&!t.segments)return!0;for(var r=0;r<e.segments.length;r++){var n=e.segments[r],s=t.segments[r];if(n.uri!==s.uri)return!1;if(!(!n.byterange&&!s.byterange)){var a=n.byterange,o=s.byterange;if(a&&!o||!a&&o||a.offset!==o.offset||a.length!==o.length)return!1}}return!0},bpe=function(e,t,r,n){var s=n.attributes.NAME||r;return"placeholder-uri-"+e+"-"+t+"-"+s},Spe=function(e){var t=e.masterXml,r=e.srcUrl,n=e.clientOffset,s=e.sidxMapping,a=e.previousManifest,o=$de(t,{manifestUri:r,clientOffset:n,sidxMapping:s,previousManifest:a});return i$(o,r,bpe),o},Cpe=function(e,t){Kp(e,function(r,n,s,a){a in t.mediaGroups[n][s]||delete e.mediaGroups[n][s][a]})},Epe=function(e,t,r){for(var n=!0,s=h$(e,{duration:t.duration,minimumUpdatePeriod:t.minimumUpdatePeriod,timelineStarts:t.timelineStarts}),a=0;a<t.playlists.length;a++){var o=t.playlists[a];if(o.sidx){var l=yT(o.sidx);r&&r[l]&&r[l].sidx&&L2(o,r[l].sidx,o.sidx.resolvedUri)}var u=xE(s,o,eM);u&&(s=u,n=!1)}return Kp(t,function(c,h,m,g){if(c.playlists&&c.playlists.length){var y=c.playlists[0].id,_=xE(s,c.playlists[0],eM);_&&(s=_,g in s.mediaGroups[h][m]||(s.mediaGroups[h][m][g]=c),s.mediaGroups[h][m][g].playlists[0]=s.playlists[y],n=!1)}}),Cpe(s,t),t.minimumUpdatePeriod!==e.minimumUpdatePeriod&&(n=!1),n?null:s},wpe=function(e,t){var r=!e.map&&!t.map,n=r||!!(e.map&&t.map&&e.map.byterange.offset===t.map.byterange.offset&&e.map.byterange.length===t.map.byterange.length);return n&&e.uri===t.uri&&e.byterange.offset===t.byterange.offset&&e.byterange.length===t.byterange.length},tM=function(e,t){var r={};for(var n in e){var s=e[n],a=s.sidx;if(a){var o=yT(a);if(!t[o])break;var l=t[o].sidxInfo;wpe(l,a)&&(r[o]=t[o])}}return r},kpe=function(e,t){var r=tM(e.playlists,t),n=r;return Kp(e,function(s,a,o,l){if(s.playlists&&s.playlists.length){var u=s.playlists;n=h$(n,tM(u,t))}}),n},CE=(function(i){Ft(e,i);function e(r,n,s,a){var o;s===void 0&&(s={}),o=i.call(this)||this,o.masterPlaylistLoader_=a||je(o),a||(o.isMaster_=!0);var l=s,u=l.withCredentials,c=u===void 0?!1:u,h=l.handleManifestRedirects,m=h===void 0?!1:h;if(o.vhs_=n,o.withCredentials=c,o.handleManifestRedirects=m,!r)throw new Error("A non-empty playlist URL or object is required");return o.on("minimumUpdatePeriod",function(){o.refreshXml_()}),o.on("mediaupdatetimeout",function(){o.refreshMedia_(o.media().id)}),o.state="HAVE_NOTHING",o.loadedPlaylists_={},o.logger_=xl("DashPlaylistLoader"),o.isMaster_?(o.masterPlaylistLoader_.srcUrl=r,o.masterPlaylistLoader_.sidxMapping_={}):o.childPlaylist_=r,o}var t=e.prototype;return t.requestErrored_=function(n,s,a){if(!this.request)return!0;if(this.request=null,n)return this.error=typeof n=="object"&&!(n instanceof Error)?n:{status:s.status,message:"DASH request error at URL: "+s.uri,response:s.response,code:2},a&&(this.state=a),this.trigger("error"),!0},t.addSidxSegments_=function(n,s,a){var o=this,l=n.sidx&&yT(n.sidx);if(!n.sidx||!l||this.masterPlaylistLoader_.sidxMapping_[l]){this.mediaRequest_=X.setTimeout(function(){return a(!1)},0);return}var u=rx(this.handleManifestRedirects,n.sidx.resolvedUri),c=function(m,g){if(!o.requestErrored_(m,g,s)){var y=o.masterPlaylistLoader_.sidxMapping_,_;try{_=qde(pr(g.response).subarray(8))}catch(T){o.requestErrored_(T,g,s);return}return y[l]={sidxInfo:n.sidx,sidx:_},L2(n,_,n.sidx.resolvedUri),a(!0)}};this.request=xpe(u,this.vhs_.xhr,function(h,m,g,y){if(h)return c(h,m);if(!g||g!=="mp4")return c({status:m.status,message:"Unsupported "+(g||"unknown")+" container type for sidx segment at URL: "+u,response:"",playlist:n,internal:!0,blacklistDuration:1/0,code:2},m);var _=n.sidx.byterange,T=_.offset,E=_.length;if(y.length>=E+T)return c(h,{response:y.subarray(T,T+E),status:m.status,uri:m.uri});o.request=o.vhs_.xhr({uri:u,responseType:"arraybuffer",headers:SE({byterange:n.sidx.byterange})},c)})},t.dispose=function(){this.trigger("dispose"),this.stopRequest(),this.loadedPlaylists_={},X.clearTimeout(this.minimumUpdatePeriodTimeout_),X.clearTimeout(this.mediaRequest_),X.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null,this.mediaRequest_=null,this.minimumUpdatePeriodTimeout_=null,this.masterPlaylistLoader_.createMupOnMedia_&&(this.off("loadedmetadata",this.masterPlaylistLoader_.createMupOnMedia_),this.masterPlaylistLoader_.createMupOnMedia_=null),this.off()},t.hasPendingRequest=function(){return this.request||this.mediaRequest_},t.stopRequest=function(){if(this.request){var n=this.request;this.request=null,n.onreadystatechange=null,n.abort()}},t.media=function(n){var s=this;if(!n)return this.media_;if(this.state==="HAVE_NOTHING")throw new Error("Cannot switch media playlist from "+this.state);var a=this.state;if(typeof n=="string"){if(!this.masterPlaylistLoader_.master.playlists[n])throw new Error("Unknown playlist URI: "+n);n=this.masterPlaylistLoader_.master.playlists[n]}var o=!this.media_||n.id!==this.media_.id;if(o&&this.loadedPlaylists_[n.id]&&this.loadedPlaylists_[n.id].endList){this.state="HAVE_METADATA",this.media_=n,o&&(this.trigger("mediachanging"),this.trigger("mediachange"));return}o&&(this.media_&&this.trigger("mediachanging"),this.addSidxSegments_(n,a,function(l){s.haveMetadata({startingState:a,playlist:n})}))},t.haveMetadata=function(n){var s=n.startingState,a=n.playlist;this.state="HAVE_METADATA",this.loadedPlaylists_[a.id]=a,this.mediaRequest_=null,this.refreshMedia_(a.id),s==="HAVE_MASTER"?this.trigger("loadedmetadata"):this.trigger("mediachange")},t.pause=function(){this.masterPlaylistLoader_.createMupOnMedia_&&(this.off("loadedmetadata",this.masterPlaylistLoader_.createMupOnMedia_),this.masterPlaylistLoader_.createMupOnMedia_=null),this.stopRequest(),X.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null,this.isMaster_&&(X.clearTimeout(this.masterPlaylistLoader_.minimumUpdatePeriodTimeout_),this.masterPlaylistLoader_.minimumUpdatePeriodTimeout_=null),this.state==="HAVE_NOTHING"&&(this.started=!1)},t.load=function(n){var s=this;X.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null;var a=this.media();if(n){var o=a?a.targetDuration/2*1e3:5e3;this.mediaUpdateTimeout=X.setTimeout(function(){return s.load()},o);return}if(!this.started){this.start();return}a&&!a.endList?(this.isMaster_&&!this.minimumUpdatePeriodTimeout_&&(this.trigger("minimumUpdatePeriod"),this.updateMinimumUpdatePeriodTimeout_()),this.trigger("mediaupdatetimeout")):this.trigger("loadedplaylist")},t.start=function(){var n=this;if(this.started=!0,!this.isMaster_){this.mediaRequest_=X.setTimeout(function(){return n.haveMaster_()},0);return}this.requestMaster_(function(s,a){n.haveMaster_(),!n.hasPendingRequest()&&!n.media_&&n.media(n.masterPlaylistLoader_.master.playlists[0])})},t.requestMaster_=function(n){var s=this;this.request=this.vhs_.xhr({uri:this.masterPlaylistLoader_.srcUrl,withCredentials:this.withCredentials},function(a,o){if(s.requestErrored_(a,o)){s.state==="HAVE_NOTHING"&&(s.started=!1);return}var l=o.responseText!==s.masterPlaylistLoader_.masterXml_;if(s.masterPlaylistLoader_.masterXml_=o.responseText,o.responseHeaders&&o.responseHeaders.date?s.masterLoaded_=Date.parse(o.responseHeaders.date):s.masterLoaded_=Date.now(),s.masterPlaylistLoader_.srcUrl=rx(s.handleManifestRedirects,s.masterPlaylistLoader_.srcUrl,o),l){s.handleMaster_(),s.syncClientServerClock_(function(){return n(o,l)});return}return n(o,l)})},t.syncClientServerClock_=function(n){var s=this,a=jde(this.masterPlaylistLoader_.masterXml_);if(a===null)return this.masterPlaylistLoader_.clientOffset_=this.masterLoaded_-Date.now(),n();if(a.method==="DIRECT")return this.masterPlaylistLoader_.clientOffset_=a.value-Date.now(),n();this.request=this.vhs_.xhr({uri:ol(this.masterPlaylistLoader_.srcUrl,a.value),method:a.method,withCredentials:this.withCredentials},function(o,l){if(s.request){if(o)return s.masterPlaylistLoader_.clientOffset_=s.masterLoaded_-Date.now(),n();var u;a.method==="HEAD"?!l.responseHeaders||!l.responseHeaders.date?u=s.masterLoaded_:u=Date.parse(l.responseHeaders.date):u=Date.parse(l.responseText),s.masterPlaylistLoader_.clientOffset_=u-Date.now(),n()}})},t.haveMaster_=function(){this.state="HAVE_MASTER",this.isMaster_?this.trigger("loadedplaylist"):this.media_||this.media(this.childPlaylist_)},t.handleMaster_=function(){this.mediaRequest_=null;var n=this.masterPlaylistLoader_.master,s=Spe({masterXml:this.masterPlaylistLoader_.masterXml_,srcUrl:this.masterPlaylistLoader_.srcUrl,clientOffset:this.masterPlaylistLoader_.clientOffset_,sidxMapping:this.masterPlaylistLoader_.sidxMapping_,previousManifest:n});n&&(s=Epe(n,s,this.masterPlaylistLoader_.sidxMapping_)),this.masterPlaylistLoader_.master=s||n;var a=this.masterPlaylistLoader_.master.locations&&this.masterPlaylistLoader_.master.locations[0];return a&&a!==this.masterPlaylistLoader_.srcUrl&&(this.masterPlaylistLoader_.srcUrl=a),(!n||s&&s.minimumUpdatePeriod!==n.minimumUpdatePeriod)&&this.updateMinimumUpdatePeriodTimeout_(),!!s},t.updateMinimumUpdatePeriodTimeout_=function(){var n=this.masterPlaylistLoader_;n.createMupOnMedia_&&(n.off("loadedmetadata",n.createMupOnMedia_),n.createMupOnMedia_=null),n.minimumUpdatePeriodTimeout_&&(X.clearTimeout(n.minimumUpdatePeriodTimeout_),n.minimumUpdatePeriodTimeout_=null);var s=n.master&&n.master.minimumUpdatePeriod;if(s===0&&(n.media()?s=n.media().targetDuration*1e3:(n.createMupOnMedia_=n.updateMinimumUpdatePeriodTimeout_,n.one("loadedmetadata",n.createMupOnMedia_))),typeof s!="number"||s<=0){s<0&&this.logger_("found invalid minimumUpdatePeriod of "+s+", not setting a timeout");return}this.createMUPTimeout_(s)},t.createMUPTimeout_=function(n){var s=this.masterPlaylistLoader_;s.minimumUpdatePeriodTimeout_=X.setTimeout(function(){s.minimumUpdatePeriodTimeout_=null,s.trigger("minimumUpdatePeriod"),s.createMUPTimeout_(n)},n)},t.refreshXml_=function(){var n=this;this.requestMaster_(function(s,a){a&&(n.media_&&(n.media_=n.masterPlaylistLoader_.master.playlists[n.media_.id]),n.masterPlaylistLoader_.sidxMapping_=kpe(n.masterPlaylistLoader_.master,n.masterPlaylistLoader_.sidxMapping_),n.addSidxSegments_(n.media(),n.state,function(o){n.refreshMedia_(n.media().id)}))})},t.refreshMedia_=function(n){var s=this;if(!n)throw new Error("refreshMedia_ must take a media id");this.media_&&this.isMaster_&&this.handleMaster_();var a=this.masterPlaylistLoader_.master.playlists,o=!this.media_||this.media_!==a[n];if(o?this.media_=a[n]:this.trigger("playlistunchanged"),!this.mediaUpdateTimeout){var l=function u(){s.media().endList||(s.mediaUpdateTimeout=X.setTimeout(function(){s.trigger("mediaupdatetimeout"),u()},TE(s.media(),!!o)))};l()}this.trigger("loadedplaylist")},e})(Tpe),Gn={GOAL_BUFFER_LENGTH:30,MAX_GOAL_BUFFER_LENGTH:60,BACK_BUFFER_LENGTH:30,GOAL_BUFFER_LENGTH_RATE:1,INITIAL_BANDWIDTH:4194304,BANDWIDTH_VARIANCE:1.2,BUFFER_LOW_WATER_LINE:0,MAX_BUFFER_LOW_WATER_LINE:30,EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE:16,BUFFER_LOW_WATER_LINE_RATE:1,BUFFER_HIGH_WATER_LINE:30},Ape=function(e){for(var t=new Uint8Array(new ArrayBuffer(e.length)),r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t.buffer},f$=function(e){return e.on=e.addEventListener,e.off=e.removeEventListener,e},Ipe=function(e){try{return URL.createObjectURL(new Blob([e],{type:"application/javascript"}))}catch{var t=new BlobBuilder;return t.append(e),URL.createObjectURL(t.getBlob())}},p$=function(e){return function(){var t=Ipe(e),r=f$(new Worker(t));r.objURL=t;var n=r.terminate;return r.on=r.addEventListener,r.off=r.removeEventListener,r.terminate=function(){return URL.revokeObjectURL(t),n.call(this)},r}},m$=function(e){return"var browserWorkerPolyFill = "+f$.toString()+`;
browserWorkerPolyFill(self);
`+e},g$=function(e){return e.toString().replace(/^function.+?{/,"").slice(0,-1)},Dpe=m$(g$(function(){var i=function(){this.init=function(){var O={};this.on=function($,U){O[$]||(O[$]=[]),O[$]=O[$].concat(U)},this.off=function($,U){var z;return O[$]?(z=O[$].indexOf(U),O[$]=O[$].slice(),O[$].splice(z,1),z>-1):!1},this.trigger=function($){var U,z,J,Z;if(U=O[$],!!U)if(arguments.length===2)for(J=U.length,z=0;z<J;++z)U[z].call(this,arguments[1]);else{for(Z=[],z=arguments.length,z=1;z<arguments.length;++z)Z.push(arguments[z]);for(J=U.length,z=0;z<J;++z)U[z].apply(this,Z)}},this.dispose=function(){O={}}}};i.prototype.pipe=function(ie){return this.on("data",function(O){ie.push(O)}),this.on("done",function(O){ie.flush(O)}),this.on("partialdone",function(O){ie.partialFlush(O)}),this.on("endedtimeline",function(O){ie.endTimeline(O)}),this.on("reset",function(O){ie.reset(O)}),ie},i.prototype.push=function(ie){this.trigger("data",ie)},i.prototype.flush=function(ie){this.trigger("done",ie)},i.prototype.partialFlush=function(ie){this.trigger("partialdone",ie)},i.prototype.endTimeline=function(ie){this.trigger("endedtimeline",ie)},i.prototype.reset=function(ie){this.trigger("reset",ie)};var e=i,t=Math.pow(2,32),r=function(O){var $=new DataView(O.buffer,O.byteOffset,O.byteLength),U;return $.getBigUint64?(U=$.getBigUint64(0),U<Number.MAX_SAFE_INTEGER?Number(U):U):$.getUint32(0)*t+$.getUint32(4)},n={getUint64:r,MAX_UINT32:t},s=n.MAX_UINT32,a,o,l,u,c,h,m,g,y,_,T,E,w,D,R,A,L,F,B,M,k,q,G,H,re,se,de,me,ue,oe,ce,te,fe,ye,Se,ke;(function(){var ie;if(G={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],mvex:[],mvhd:[],pasp:[],sdtp:[],smhd:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],styp:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[]},!(typeof Uint8Array>"u")){for(ie in G)G.hasOwnProperty(ie)&&(G[ie]=[ie.charCodeAt(0),ie.charCodeAt(1),ie.charCodeAt(2),ie.charCodeAt(3)]);H=new Uint8Array([105,115,111,109]),se=new Uint8Array([97,118,99,49]),re=new Uint8Array([0,0,0,1]),de=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),me=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]),ue={video:de,audio:me},te=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),ce=new Uint8Array([0,0,0,0,0,0,0,0]),fe=new Uint8Array([0,0,0,0,0,0,0,0]),ye=fe,Se=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),ke=fe,oe=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0])}})(),a=function(O){var $=[],U=0,z,J,Z;for(z=1;z<arguments.length;z++)$.push(arguments[z]);for(z=$.length;z--;)U+=$[z].byteLength;for(J=new Uint8Array(U+8),Z=new DataView(J.buffer,J.byteOffset,J.byteLength),Z.setUint32(0,J.byteLength),J.set(O,4),z=0,U=8;z<$.length;z++)J.set($[z],U),U+=$[z].byteLength;return J},o=function(){return a(G.dinf,a(G.dref,te))},l=function(O){return a(G.esds,new Uint8Array([0,0,0,0,3,25,0,0,0,4,17,64,21,0,6,0,0,0,218,192,0,0,218,192,5,2,O.audioobjecttype<<3|O.samplingfrequencyindex>>>1,O.samplingfrequencyindex<<7|O.channelcount<<3,6,1,2]))},u=function(){return a(G.ftyp,H,re,H,se)},A=function(O){return a(G.hdlr,ue[O])},c=function(O){return a(G.mdat,O)},R=function(O){var $=new Uint8Array([0,0,0,0,0,0,0,2,0,0,0,3,0,1,95,144,O.duration>>>24&255,O.duration>>>16&255,O.duration>>>8&255,O.duration&255,85,196,0,0]);return O.samplerate&&($[12]=O.samplerate>>>24&255,$[13]=O.samplerate>>>16&255,$[14]=O.samplerate>>>8&255,$[15]=O.samplerate&255),a(G.mdhd,$)},D=function(O){return a(G.mdia,R(O),A(O.type),m(O))},h=function(O){return a(G.mfhd,new Uint8Array([0,0,0,0,(O&4278190080)>>24,(O&16711680)>>16,(O&65280)>>8,O&255]))},m=function(O){return a(G.minf,O.type==="video"?a(G.vmhd,oe):a(G.smhd,ce),o(),F(O))},g=function(O,$){for(var U=[],z=$.length;z--;)U[z]=M($[z]);return a.apply(null,[G.moof,h(O)].concat(U))},y=function(O){for(var $=O.length,U=[];$--;)U[$]=E(O[$]);return a.apply(null,[G.moov,T(4294967295)].concat(U).concat(_(O)))},_=function(O){for(var $=O.length,U=[];$--;)U[$]=k(O[$]);return a.apply(null,[G.mvex].concat(U))},T=function(O){var $=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,2,0,1,95,144,(O&4278190080)>>24,(O&16711680)>>16,(O&65280)>>8,O&255,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return a(G.mvhd,$)},L=function(O){var $=O.samples||[],U=new Uint8Array(4+$.length),z,J;for(J=0;J<$.length;J++)z=$[J].flags,U[J+4]=z.dependsOn<<4|z.isDependedOn<<2|z.hasRedundancy;return a(G.sdtp,U)},F=function(O){return a(G.stbl,B(O),a(G.stts,ke),a(G.stsc,ye),a(G.stsz,Se),a(G.stco,fe))},(function(){var ie,O;B=function(U){return a(G.stsd,new Uint8Array([0,0,0,0,0,0,0,1]),U.type==="video"?ie(U):O(U))},ie=function(U){var z=U.sps||[],J=U.pps||[],Z=[],pe=[],ve,Ae;for(ve=0;ve<z.length;ve++)Z.push((z[ve].byteLength&65280)>>>8),Z.push(z[ve].byteLength&255),Z=Z.concat(Array.prototype.slice.call(z[ve]));for(ve=0;ve<J.length;ve++)pe.push((J[ve].byteLength&65280)>>>8),pe.push(J[ve].byteLength&255),pe=pe.concat(Array.prototype.slice.call(J[ve]));if(Ae=[G.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,(U.width&65280)>>8,U.width&255,(U.height&65280)>>8,U.height&255,0,72,0,0,0,72,0,0,0,0,0,0,0,1,19,118,105,100,101,111,106,115,45,99,111,110,116,114,105,98,45,104,108,115,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),a(G.avcC,new Uint8Array([1,U.profileIdc,U.profileCompatibility,U.levelIdc,255].concat([z.length],Z,[J.length],pe))),a(G.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192]))],U.sarRatio){var be=U.sarRatio[0],De=U.sarRatio[1];Ae.push(a(G.pasp,new Uint8Array([(be&4278190080)>>24,(be&16711680)>>16,(be&65280)>>8,be&255,(De&4278190080)>>24,(De&16711680)>>16,(De&65280)>>8,De&255])))}return a.apply(null,Ae)},O=function(U){return a(G.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,(U.channelcount&65280)>>8,U.channelcount&255,(U.samplesize&65280)>>8,U.samplesize&255,0,0,0,0,(U.samplerate&65280)>>8,U.samplerate&255,0,0]),l(U))}})(),w=function(O){var $=new Uint8Array([0,0,0,7,0,0,0,0,0,0,0,0,(O.id&4278190080)>>24,(O.id&16711680)>>16,(O.id&65280)>>8,O.id&255,0,0,0,0,(O.duration&4278190080)>>24,(O.duration&16711680)>>16,(O.duration&65280)>>8,O.duration&255,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,(O.width&65280)>>8,O.width&255,0,0,(O.height&65280)>>8,O.height&255,0,0]);return a(G.tkhd,$)},M=function(O){var $,U,z,J,Z,pe,ve;return $=a(G.tfhd,new Uint8Array([0,0,0,58,(O.id&4278190080)>>24,(O.id&16711680)>>16,(O.id&65280)>>8,O.id&255,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0])),pe=Math.floor(O.baseMediaDecodeTime/s),ve=Math.floor(O.baseMediaDecodeTime%s),U=a(G.tfdt,new Uint8Array([1,0,0,0,pe>>>24&255,pe>>>16&255,pe>>>8&255,pe&255,ve>>>24&255,ve>>>16&255,ve>>>8&255,ve&255])),Z=92,O.type==="audio"?(z=q(O,Z),a(G.traf,$,U,z)):(J=L(O),z=q(O,J.length+Z),a(G.traf,$,U,z,J))},E=function(O){return O.duration=O.duration||4294967295,a(G.trak,w(O),D(O))},k=function(O){var $=new Uint8Array([0,0,0,0,(O.id&4278190080)>>24,(O.id&16711680)>>16,(O.id&65280)>>8,O.id&255,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]);return O.type!=="video"&&($[$.length-1]=0),a(G.trex,$)},(function(){var ie,O,$;$=function(z,J){var Z=0,pe=0,ve=0,Ae=0;return z.length&&(z[0].duration!==void 0&&(Z=1),z[0].size!==void 0&&(pe=2),z[0].flags!==void 0&&(ve=4),z[0].compositionTimeOffset!==void 0&&(Ae=8)),[0,0,Z|pe|ve|Ae,1,(z.length&4278190080)>>>24,(z.length&16711680)>>>16,(z.length&65280)>>>8,z.length&255,(J&4278190080)>>>24,(J&16711680)>>>16,(J&65280)>>>8,J&255]},O=function(z,J){var Z,pe,ve,Ae,be,De;for(Ae=z.samples||[],J+=20+16*Ae.length,ve=$(Ae,J),pe=new Uint8Array(ve.length+Ae.length*16),pe.set(ve),Z=ve.length,De=0;De<Ae.length;De++)be=Ae[De],pe[Z++]=(be.duration&4278190080)>>>24,pe[Z++]=(be.duration&16711680)>>>16,pe[Z++]=(be.duration&65280)>>>8,pe[Z++]=be.duration&255,pe[Z++]=(be.size&4278190080)>>>24,pe[Z++]=(be.size&16711680)>>>16,pe[Z++]=(be.size&65280)>>>8,pe[Z++]=be.size&255,pe[Z++]=be.flags.isLeading<<2|be.flags.dependsOn,pe[Z++]=be.flags.isDependedOn<<6|be.flags.hasRedundancy<<4|be.flags.paddingValue<<1|be.flags.isNonSyncSample,pe[Z++]=be.flags.degradationPriority&61440,pe[Z++]=be.flags.degradationPriority&15,pe[Z++]=(be.compositionTimeOffset&4278190080)>>>24,pe[Z++]=(be.compositionTimeOffset&16711680)>>>16,pe[Z++]=(be.compositionTimeOffset&65280)>>>8,pe[Z++]=be.compositionTimeOffset&255;return a(G.trun,pe)},ie=function(z,J){var Z,pe,ve,Ae,be,De;for(Ae=z.samples||[],J+=20+8*Ae.length,ve=$(Ae,J),Z=new Uint8Array(ve.length+Ae.length*8),Z.set(ve),pe=ve.length,De=0;De<Ae.length;De++)be=Ae[De],Z[pe++]=(be.duration&4278190080)>>>24,Z[pe++]=(be.duration&16711680)>>>16,Z[pe++]=(be.duration&65280)>>>8,Z[pe++]=be.duration&255,Z[pe++]=(be.size&4278190080)>>>24,Z[pe++]=(be.size&16711680)>>>16,Z[pe++]=(be.size&65280)>>>8,Z[pe++]=be.size&255;return a(G.trun,Z)},q=function(z,J){return z.type==="audio"?ie(z,J):O(z,J)}})();var qe={ftyp:u,mdat:c,moof:g,moov:y,initSegment:function(O){var $=u(),U=y(O),z;return z=new Uint8Array($.byteLength+U.byteLength),z.set($),z.set(U,$.byteLength),z}},vt=function(O){var $,U,z=[],J=[];for(J.byteLength=0,J.nalCount=0,J.duration=0,z.byteLength=0,$=0;$<O.length;$++)U=O[$],U.nalUnitType==="access_unit_delimiter_rbsp"?(z.length&&(z.duration=U.dts-z.dts,J.byteLength+=z.byteLength,J.nalCount+=z.length,J.duration+=z.duration,J.push(z)),z=[U],z.byteLength=U.data.byteLength,z.pts=U.pts,z.dts=U.dts):(U.nalUnitType==="slice_layer_without_partitioning_rbsp_idr"&&(z.keyFrame=!0),z.duration=U.dts-z.dts,z.byteLength+=U.data.byteLength,z.push(U));return J.length&&(!z.duration||z.duration<=0)&&(z.duration=J[J.length-1].duration),J.byteLength+=z.byteLength,J.nalCount+=z.length,J.duration+=z.duration,J.push(z),J},et=function(O){var $,U,z=[],J=[];for(z.byteLength=0,z.nalCount=0,z.duration=0,z.pts=O[0].pts,z.dts=O[0].dts,J.byteLength=0,J.nalCount=0,J.duration=0,J.pts=O[0].pts,J.dts=O[0].dts,$=0;$<O.length;$++)U=O[$],U.keyFrame?(z.length&&(J.push(z),J.byteLength+=z.byteLength,J.nalCount+=z.nalCount,J.duration+=z.duration),z=[U],z.nalCount=U.length,z.byteLength=U.byteLength,z.pts=U.pts,z.dts=U.dts,z.duration=U.duration):(z.duration+=U.duration,z.nalCount+=U.length,z.byteLength+=U.byteLength,z.push(U));return J.length&&z.duration<=0&&(z.duration=J[J.length-1].duration),J.byteLength+=z.byteLength,J.nalCount+=z.nalCount,J.duration+=z.duration,J.push(z),J},kt=function(O){var $;return!O[0][0].keyFrame&&O.length>1&&($=O.shift(),O.byteLength-=$.byteLength,O.nalCount-=$.nalCount,O[0][0].dts=$.dts,O[0][0].pts=$.pts,O[0][0].duration+=$.duration),O},pt=function(){return{size:0,flags:{isLeading:0,dependsOn:1,isDependedOn:0,hasRedundancy:0,degradationPriority:0,isNonSyncSample:1}}},Ut=function(O,$){var U=pt();return U.dataOffset=$,U.compositionTimeOffset=O.pts-O.dts,U.duration=O.duration,U.size=4*O.length,U.size+=O.byteLength,O.keyFrame&&(U.flags.dependsOn=2,U.flags.isNonSyncSample=0),U},Vt=function(O,$){var U,z,J,Z,pe,ve=$||0,Ae=[];for(U=0;U<O.length;U++)for(Z=O[U],z=0;z<Z.length;z++)pe=Z[z],J=Ut(pe,ve),ve+=J.size,Ae.push(J);return Ae},Xe=function(O){var $,U,z,J,Z,pe,ve=0,Ae=O.byteLength,be=O.nalCount,De=Ae+4*be,Je=new Uint8Array(De),Et=new DataView(Je.buffer);for($=0;$<O.length;$++)for(J=O[$],U=0;U<J.length;U++)for(Z=J[U],z=0;z<Z.length;z++)pe=Z[z],Et.setUint32(ve,pe.data.byteLength),ve+=4,Je.set(pe.data,ve),ve+=pe.data.byteLength;return Je},Ue=function(O,$){var U,z=$||0,J=[];return U=Ut(O,z),J.push(U),J},Le=function(O){var $,U,z=0,J=O.byteLength,Z=O.length,pe=J+4*Z,ve=new Uint8Array(pe),Ae=new DataView(ve.buffer);for($=0;$<O.length;$++)U=O[$],Ae.setUint32(z,U.data.byteLength),z+=4,ve.set(U.data,z),z+=U.data.byteLength;return ve},Ne={groupNalsIntoFrames:vt,groupFramesIntoGops:et,extendFirstKeyFrame:kt,generateSampleTable:Vt,concatenateNalData:Xe,generateSampleTableForFrame:Ue,concatenateNalDataForFrame:Le},rt=[33,16,5,32,164,27],lt=[33,65,108,84,1,2,4,8,168,2,4,8,17,191,252],dt=function(O){for(var $=[];O--;)$.push(0);return $},ut=function(O){return Object.keys(O).reduce(function($,U){return $[U]=new Uint8Array(O[U].reduce(function(z,J){return z.concat(J)},[])),$},{})},At,it=function(){if(!At){var O={96e3:[rt,[227,64],dt(154),[56]],88200:[rt,[231],dt(170),[56]],64e3:[rt,[248,192],dt(240),[56]],48e3:[rt,[255,192],dt(268),[55,148,128],dt(54),[112]],44100:[rt,[255,192],dt(268),[55,163,128],dt(84),[112]],32e3:[rt,[255,192],dt(268),[55,234],dt(226),[112]],24e3:[rt,[255,192],dt(268),[55,255,128],dt(268),[111,112],dt(126),[224]],16e3:[rt,[255,192],dt(268),[55,255,128],dt(268),[111,255],dt(269),[223,108],dt(195),[1,192]],12e3:[lt,dt(268),[3,127,248],dt(268),[6,255,240],dt(268),[13,255,224],dt(268),[27,253,128],dt(259),[56]],11025:[lt,dt(268),[3,127,248],dt(268),[6,255,240],dt(268),[13,255,224],dt(268),[27,255,192],dt(268),[55,175,128],dt(108),[112]],8e3:[lt,dt(268),[3,121,16],dt(47),[7]]};At=ut(O)}return At},Sr=9e4,xr,zr,cr,Gt,Er,Ir,Hr;xr=function(O){return O*Sr},zr=function(O,$){return O*$},cr=function(O){return O/Sr},Gt=function(O,$){return O/$},Er=function(O,$){return xr(Gt(O,$))},Ir=function(O,$){return zr(cr(O),$)},Hr=function(O,$,U){return cr(U?O:O-$)};var It={ONE_SECOND_IN_TS:Sr,secondsToVideoTs:xr,secondsToAudioTs:zr,videoTsToSeconds:cr,audioTsToSeconds:Gt,audioTsToVideoTs:Er,videoTsToAudioTs:Ir,metadataTsToSeconds:Hr},$t=function(O){var $,U,z=0;for($=0;$<O.length;$++)U=O[$],z+=U.data.byteLength;return z},Bi=function(O,$,U,z){var J,Z=0,pe=0,ve=0,Ae=0,be,De,Je;if($.length&&(J=It.audioTsToVideoTs(O.baseMediaDecodeTime,O.samplerate),Z=Math.ceil(It.ONE_SECOND_IN_TS/(O.samplerate/1024)),U&&z&&(pe=J-Math.max(U,z),ve=Math.floor(pe/Z),Ae=ve*Z),!(ve<1||Ae>It.ONE_SECOND_IN_TS/2))){for(be=it()[O.samplerate],be||(be=$[0].data),De=0;De<ve;De++)Je=$[0],$.splice(0,0,{data:be,dts:Je.dts-Z,pts:Je.pts-Z});return O.baseMediaDecodeTime-=Math.floor(It.videoTsToAudioTs(Ae,O.samplerate)),Ae}},zt=function(O,$,U){return $.minSegmentDts>=U?O:($.minSegmentDts=1/0,O.filter(function(z){return z.dts>=U?($.minSegmentDts=Math.min($.minSegmentDts,z.dts),$.minSegmentPts=$.minSegmentDts,!0):!1}))},Dr=function(O){var $,U,z=[];for($=0;$<O.length;$++)U=O[$],z.push({size:U.data.byteLength,duration:1024});return z},$r=function(O){var $,U,z=0,J=new Uint8Array($t(O));for($=0;$<O.length;$++)U=O[$],J.set(U.data,z),z+=U.data.byteLength;return J},Jr={prefixWithSilence:Bi,trimAdtsFramesByEarliestDts:zt,generateSampleTable:Dr,concatenateFrameData:$r},Ni=It.ONE_SECOND_IN_TS,sn=function(O,$){typeof $.pts=="number"&&(O.timelineStartInfo.pts===void 0&&(O.timelineStartInfo.pts=$.pts),O.minSegmentPts===void 0?O.minSegmentPts=$.pts:O.minSegmentPts=Math.min(O.minSegmentPts,$.pts),O.maxSegmentPts===void 0?O.maxSegmentPts=$.pts:O.maxSegmentPts=Math.max(O.maxSegmentPts,$.pts)),typeof $.dts=="number"&&(O.timelineStartInfo.dts===void 0&&(O.timelineStartInfo.dts=$.dts),O.minSegmentDts===void 0?O.minSegmentDts=$.dts:O.minSegmentDts=Math.min(O.minSegmentDts,$.dts),O.maxSegmentDts===void 0?O.maxSegmentDts=$.dts:O.maxSegmentDts=Math.max(O.maxSegmentDts,$.dts))},Ui=function(O){delete O.minSegmentDts,delete O.maxSegmentDts,delete O.minSegmentPts,delete O.maxSegmentPts},Wi=function(O,$){var U,z,J=O.minSegmentDts;return $||(J-=O.timelineStartInfo.dts),U=O.timelineStartInfo.baseMediaDecodeTime,U+=J,U=Math.max(0,U),O.type==="audio"&&(z=O.samplerate/Ni,U*=z,U=Math.floor(U)),U},ne={clearDtsInfo:Ui,calculateTrackBaseMediaDecodeTime:Wi,collectDtsInfo:sn},he=4,Ce=128,ze=function(O){for(var $=0,U={payloadType:-1,payloadSize:0},z=0,J=0;$<O.byteLength&&O[$]!==Ce;){for(;O[$]===255;)z+=255,$++;for(z+=O[$++];O[$]===255;)J+=255,$++;if(J+=O[$++],!U.payload&&z===he){var Z=String.fromCharCode(O[$+3],O[$+4],O[$+5],O[$+6]);if(Z==="GA94"){U.payloadType=z,U.payloadSize=J,U.payload=O.subarray($,$+J);break}else U.payload=void 0}$+=J,z=0,J=0}return U},yt=function(O){return O.payload[0]!==181||(O.payload[1]<<8|O.payload[2])!==49||String.fromCharCode(O.payload[3],O.payload[4],O.payload[5],O.payload[6])!=="GA94"||O.payload[7]!==3?null:O.payload.subarray(8,O.payload.length-1)},ir=function(O,$){var U=[],z,J,Z,pe;if(!($[0]&64))return U;for(J=$[0]&31,z=0;z<J;z++)Z=z*3,pe={type:$[Z+2]&3,pts:O},$[Z+2]&4&&(pe.ccData=$[Z+3]<<8|$[Z+4],U.push(pe));return U},xe=function(O){for(var $=O.byteLength,U=[],z=1,J,Z;z<$-2;)O[z]===0&&O[z+1]===0&&O[z+2]===3?(U.push(z+2),z+=2):z++;if(U.length===0)return O;J=$-U.length,Z=new Uint8Array(J);var pe=0;for(z=0;z<J;pe++,z++)pe===U[0]&&(pe++,U.shift()),Z[z]=O[pe];return Z},Pe={parseSei:ze,parseUserData:yt,parseCaptionPackets:ir,discardEmulationPreventionBytes:xe,USER_DATA_REGISTERED_ITU_T_T35:he},Be=function ie(O){O=O||{},ie.prototype.init.call(this),this.parse708captions_=typeof O.parse708captions=="boolean"?O.parse708captions:!0,this.captionPackets_=[],this.ccStreams_=[new dr(0,0),new dr(0,1),new dr(1,0),new dr(1,1)],this.parse708captions_&&(this.cc708Stream_=new _t({captionServices:O.captionServices})),this.reset(),this.ccStreams_.forEach(function($){$.on("data",this.trigger.bind(this,"data")),$.on("partialdone",this.trigger.bind(this,"partialdone")),$.on("done",this.trigger.bind(this,"done"))},this),this.parse708captions_&&(this.cc708Stream_.on("data",this.trigger.bind(this,"data")),this.cc708Stream_.on("partialdone",this.trigger.bind(this,"partialdone")),this.cc708Stream_.on("done",this.trigger.bind(this,"done")))};Be.prototype=new e,Be.prototype.push=function(ie){var O,$,U;if(ie.nalUnitType==="sei_rbsp"&&(O=Pe.parseSei(ie.escapedRBSP),!!O.payload&&O.payloadType===Pe.USER_DATA_REGISTERED_ITU_T_T35&&($=Pe.parseUserData(O),!!$))){if(ie.dts<this.latestDts_){this.ignoreNextEqualDts_=!0;return}else if(ie.dts===this.latestDts_&&this.ignoreNextEqualDts_){this.numSameDts_--,this.numSameDts_||(this.ignoreNextEqualDts_=!1);return}U=Pe.parseCaptionPackets(ie.pts,$),this.captionPackets_=this.captionPackets_.concat(U),this.latestDts_!==ie.dts&&(this.numSameDts_=0),this.numSameDts_++,this.latestDts_=ie.dts}},Be.prototype.flushCCStreams=function(ie){this.ccStreams_.forEach(function(O){return ie==="flush"?O.flush():O.partialFlush()},this)},Be.prototype.flushStream=function(ie){if(!this.captionPackets_.length){this.flushCCStreams(ie);return}this.captionPackets_.forEach(function(O,$){O.presortIndex=$}),this.captionPackets_.sort(function(O,$){return O.pts===$.pts?O.presortIndex-$.presortIndex:O.pts-$.pts}),this.captionPackets_.forEach(function(O){O.type<2?this.dispatchCea608Packet(O):this.dispatchCea708Packet(O)},this),this.captionPackets_.length=0,this.flushCCStreams(ie)},Be.prototype.flush=function(){return this.flushStream("flush")},Be.prototype.partialFlush=function(){return this.flushStream("partialFlush")},Be.prototype.reset=function(){this.latestDts_=null,this.ignoreNextEqualDts_=!1,this.numSameDts_=0,this.activeCea608Channel_=[null,null],this.ccStreams_.forEach(function(ie){ie.reset()})},Be.prototype.dispatchCea608Packet=function(ie){this.setsTextOrXDSActive(ie)?this.activeCea608Channel_[ie.type]=null:this.setsChannel1Active(ie)?this.activeCea608Channel_[ie.type]=0:this.setsChannel2Active(ie)&&(this.activeCea608Channel_[ie.type]=1),this.activeCea608Channel_[ie.type]!==null&&this.ccStreams_[(ie.type<<1)+this.activeCea608Channel_[ie.type]].push(ie)},Be.prototype.setsChannel1Active=function(ie){return(ie.ccData&30720)===4096},Be.prototype.setsChannel2Active=function(ie){return(ie.ccData&30720)===6144},Be.prototype.setsTextOrXDSActive=function(ie){return(ie.ccData&28928)===256||(ie.ccData&30974)===4138||(ie.ccData&30974)===6186},Be.prototype.dispatchCea708Packet=function(ie){this.parse708captions_&&this.cc708Stream_.push(ie)};var nt={127:9834,4128:32,4129:160,4133:8230,4138:352,4140:338,4144:9608,4145:8216,4146:8217,4147:8220,4148:8221,4149:8226,4153:8482,4154:353,4156:339,4157:8480,4159:376,4214:8539,4215:8540,4216:8541,4217:8542,4218:9168,4219:9124,4220:9123,4221:9135,4222:9126,4223:9121,4256:12600},ct=function(O){var $=nt[O]||O;return O&4096&&O===$?"":String.fromCharCode($)},Rt=function(O){return 32<=O&&O<=127||160<=O&&O<=255},Ot=function(O){this.windowNum=O,this.reset()};Ot.prototype.reset=function(){this.clearText(),this.pendingNewLine=!1,this.winAttr={},this.penAttr={},this.penLoc={},this.penColor={},this.visible=0,this.rowLock=0,this.columnLock=0,this.priority=0,this.relativePositioning=0,this.anchorVertical=0,this.anchorHorizontal=0,this.anchorPoint=0,this.rowCount=1,this.virtualRowCount=this.rowCount+1,this.columnCount=41,this.windowStyle=0,this.penStyle=0},Ot.prototype.getText=function(){return this.rows.join(`
`)},Ot.prototype.clearText=function(){this.rows=[""],this.rowIdx=0},Ot.prototype.newLine=function(ie){for(this.rows.length>=this.virtualRowCount&&typeof this.beforeRowOverflow=="function"&&this.beforeRowOverflow(ie),this.rows.length>0&&(this.rows.push(""),this.rowIdx++);this.rows.length>this.virtualRowCount;)this.rows.shift(),this.rowIdx--},Ot.prototype.isEmpty=function(){return this.rows.length===0?!0:this.rows.length===1?this.rows[0]==="":!1},Ot.prototype.addText=function(ie){this.rows[this.rowIdx]+=ie},Ot.prototype.backspace=function(){if(!this.isEmpty()){var ie=this.rows[this.rowIdx];this.rows[this.rowIdx]=ie.substr(0,ie.length-1)}};var st=function(O,$,U){this.serviceNum=O,this.text="",this.currentWindow=new Ot(-1),this.windows=[],this.stream=U,typeof $=="string"&&this.createTextDecoder($)};st.prototype.init=function(ie,O){this.startPts=ie;for(var $=0;$<8;$++)this.windows[$]=new Ot($),typeof O=="function"&&(this.windows[$].beforeRowOverflow=O)},st.prototype.setCurrentWindow=function(ie){this.currentWindow=this.windows[ie]},st.prototype.createTextDecoder=function(ie){if(typeof TextDecoder>"u")this.stream.trigger("log",{level:"warn",message:"The `encoding` option is unsupported without TextDecoder support"});else try{this.textDecoder_=new TextDecoder(ie)}catch(O){this.stream.trigger("log",{level:"warn",message:"TextDecoder could not be created with "+ie+" encoding. "+O})}};var _t=function ie(O){O=O||{},ie.prototype.init.call(this);var $=this,U=O.captionServices||{},z={},J;Object.keys(U).forEach(function(Z){J=U[Z],/^SERVICE/.test(Z)&&(z[Z]=J.encoding)}),this.serviceEncodings=z,this.current708Packet=null,this.services={},this.push=function(Z){Z.type===3?($.new708Packet(),$.add708Bytes(Z)):($.current708Packet===null&&$.new708Packet(),$.add708Bytes(Z))}};_t.prototype=new e,_t.prototype.new708Packet=function(){this.current708Packet!==null&&this.push708Packet(),this.current708Packet={data:[],ptsVals:[]}},_t.prototype.add708Bytes=function(ie){var O=ie.ccData,$=O>>>8,U=O&255;this.current708Packet.ptsVals.push(ie.pts),this.current708Packet.data.push($),this.current708Packet.data.push(U)},_t.prototype.push708Packet=function(){var ie=this.current708Packet,O=ie.data,$=null,U=null,z=0,J=O[z++];for(ie.seq=J>>6,ie.sizeCode=J&63;z<O.length;z++)J=O[z++],$=J>>5,U=J&31,$===7&&U>0&&(J=O[z++],$=J),this.pushServiceBlock($,z,U),U>0&&(z+=U-1)},_t.prototype.pushServiceBlock=function(ie,O,$){var U,z=O,J=this.current708Packet.data,Z=this.services[ie];for(Z||(Z=this.initService(ie,z));z<O+$&&z<J.length;z++)U=J[z],Rt(U)?z=this.handleText(z,Z):U===24?z=this.multiByteCharacter(z,Z):U===16?z=this.extendedCommands(z,Z):128<=U&&U<=135?z=this.setCurrentWindow(z,Z):152<=U&&U<=159?z=this.defineWindow(z,Z):U===136?z=this.clearWindows(z,Z):U===140?z=this.deleteWindows(z,Z):U===137?z=this.displayWindows(z,Z):U===138?z=this.hideWindows(z,Z):U===139?z=this.toggleWindows(z,Z):U===151?z=this.setWindowAttributes(z,Z):U===144?z=this.setPenAttributes(z,Z):U===145?z=this.setPenColor(z,Z):U===146?z=this.setPenLocation(z,Z):U===143?Z=this.reset(z,Z):U===8?Z.currentWindow.backspace():U===12?Z.currentWindow.clearText():U===13?Z.currentWindow.pendingNewLine=!0:U===14?Z.currentWindow.clearText():U===141&&z++},_t.prototype.extendedCommands=function(ie,O){var $=this.current708Packet.data,U=$[++ie];return Rt(U)&&(ie=this.handleText(ie,O,{isExtended:!0})),ie},_t.prototype.getPts=function(ie){return this.current708Packet.ptsVals[Math.floor(ie/2)]},_t.prototype.initService=function(ie,O){var U="SERVICE"+ie,$=this,U,z;return U in this.serviceEncodings&&(z=this.serviceEncodings[U]),this.services[ie]=new st(ie,z,$),this.services[ie].init(this.getPts(O),function(J){$.flushDisplayed(J,$.services[ie])}),this.services[ie]},_t.prototype.handleText=function(ie,O,$){var U=$&&$.isExtended,z=$&&$.isMultiByte,J=this.current708Packet.data,Z=U?4096:0,pe=J[ie],ve=J[ie+1],Ae=O.currentWindow,be,De;return O.textDecoder_&&!U?(z?(De=[pe,ve],ie++):De=[pe],be=O.textDecoder_.decode(new Uint8Array(De))):be=ct(Z|pe),Ae.pendingNewLine&&!Ae.isEmpty()&&Ae.newLine(this.getPts(ie)),Ae.pendingNewLine=!1,Ae.addText(be),ie},_t.prototype.multiByteCharacter=function(ie,O){var $=this.current708Packet.data,U=$[ie+1],z=$[ie+2];return Rt(U)&&Rt(z)&&(ie=this.handleText(++ie,O,{isMultiByte:!0})),ie},_t.prototype.setCurrentWindow=function(ie,O){var $=this.current708Packet.data,U=$[ie],z=U&7;return O.setCurrentWindow(z),ie},_t.prototype.defineWindow=function(ie,O){var $=this.current708Packet.data,U=$[ie],z=U&7;O.setCurrentWindow(z);var J=O.currentWindow;return U=$[++ie],J.visible=(U&32)>>5,J.rowLock=(U&16)>>4,J.columnLock=(U&8)>>3,J.priority=U&7,U=$[++ie],J.relativePositioning=(U&128)>>7,J.anchorVertical=U&127,U=$[++ie],J.anchorHorizontal=U,U=$[++ie],J.anchorPoint=(U&240)>>4,J.rowCount=U&15,U=$[++ie],J.columnCount=U&63,U=$[++ie],J.windowStyle=(U&56)>>3,J.penStyle=U&7,J.virtualRowCount=J.rowCount+1,ie},_t.prototype.setWindowAttributes=function(ie,O){var $=this.current708Packet.data,U=$[ie],z=O.currentWindow.winAttr;return U=$[++ie],z.fillOpacity=(U&192)>>6,z.fillRed=(U&48)>>4,z.fillGreen=(U&12)>>2,z.fillBlue=U&3,U=$[++ie],z.borderType=(U&192)>>6,z.borderRed=(U&48)>>4,z.borderGreen=(U&12)>>2,z.borderBlue=U&3,U=$[++ie],z.borderType+=(U&128)>>5,z.wordWrap=(U&64)>>6,z.printDirection=(U&48)>>4,z.scrollDirection=(U&12)>>2,z.justify=U&3,U=$[++ie],z.effectSpeed=(U&240)>>4,z.effectDirection=(U&12)>>2,z.displayEffect=U&3,ie},_t.prototype.flushDisplayed=function(ie,O){for(var $=[],U=0;U<8;U++)O.windows[U].visible&&!O.windows[U].isEmpty()&&$.push(O.windows[U].getText());O.endPts=ie,O.text=$.join(`

`),this.pushCaption(O),O.startPts=ie},_t.prototype.pushCaption=function(ie){ie.text!==""&&(this.trigger("data",{startPts:ie.startPts,endPts:ie.endPts,text:ie.text,stream:"cc708_"+ie.serviceNum}),ie.text="",ie.startPts=ie.endPts)},_t.prototype.displayWindows=function(ie,O){var $=this.current708Packet.data,U=$[++ie],z=this.getPts(ie);this.flushDisplayed(z,O);for(var J=0;J<8;J++)U&1<<J&&(O.windows[J].visible=1);return ie},_t.prototype.hideWindows=function(ie,O){var $=this.current708Packet.data,U=$[++ie],z=this.getPts(ie);this.flushDisplayed(z,O);for(var J=0;J<8;J++)U&1<<J&&(O.windows[J].visible=0);return ie},_t.prototype.toggleWindows=function(ie,O){var $=this.current708Packet.data,U=$[++ie],z=this.getPts(ie);this.flushDisplayed(z,O);for(var J=0;J<8;J++)U&1<<J&&(O.windows[J].visible^=1);return ie},_t.prototype.clearWindows=function(ie,O){var $=this.current708Packet.data,U=$[++ie],z=this.getPts(ie);this.flushDisplayed(z,O);for(var J=0;J<8;J++)U&1<<J&&O.windows[J].clearText();return ie},_t.prototype.deleteWindows=function(ie,O){var $=this.current708Packet.data,U=$[++ie],z=this.getPts(ie);this.flushDisplayed(z,O);for(var J=0;J<8;J++)U&1<<J&&O.windows[J].reset();return ie},_t.prototype.setPenAttributes=function(ie,O){var $=this.current708Packet.data,U=$[ie],z=O.currentWindow.penAttr;return U=$[++ie],z.textTag=(U&240)>>4,z.offset=(U&12)>>2,z.penSize=U&3,U=$[++ie],z.italics=(U&128)>>7,z.underline=(U&64)>>6,z.edgeType=(U&56)>>3,z.fontStyle=U&7,ie},_t.prototype.setPenColor=function(ie,O){var $=this.current708Packet.data,U=$[ie],z=O.currentWindow.penColor;return U=$[++ie],z.fgOpacity=(U&192)>>6,z.fgRed=(U&48)>>4,z.fgGreen=(U&12)>>2,z.fgBlue=U&3,U=$[++ie],z.bgOpacity=(U&192)>>6,z.bgRed=(U&48)>>4,z.bgGreen=(U&12)>>2,z.bgBlue=U&3,U=$[++ie],z.edgeRed=(U&48)>>4,z.edgeGreen=(U&12)>>2,z.edgeBlue=U&3,ie},_t.prototype.setPenLocation=function(ie,O){var $=this.current708Packet.data,U=$[ie],z=O.currentWindow.penLoc;return O.currentWindow.pendingNewLine=!0,U=$[++ie],z.row=U&15,U=$[++ie],z.column=U&63,ie},_t.prototype.reset=function(ie,O){var $=this.getPts(ie);return this.flushDisplayed($,O),this.initService(O.serviceNum,ie)};var jt={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,304:174,305:176,306:189,307:191,308:8482,309:162,310:163,311:9834,312:224,313:160,314:232,315:226,316:234,317:238,318:244,319:251,544:193,545:201,546:211,547:218,548:220,549:252,550:8216,551:161,552:42,553:39,554:8212,555:169,556:8480,557:8226,558:8220,559:8221,560:192,561:194,562:199,563:200,564:202,565:203,566:235,567:206,568:207,569:239,570:212,571:217,572:249,573:219,574:171,575:187,800:195,801:227,802:205,803:204,804:236,805:210,806:242,807:213,808:245,809:123,810:125,811:92,812:94,813:95,814:124,815:126,816:196,817:228,818:214,819:246,820:223,821:165,822:164,823:9474,824:197,825:229,826:216,827:248,828:9484,829:9488,830:9492,831:9496},Kt=function(O){return O===null?"":(O=jt[O]||O,String.fromCharCode(O))},Pt=14,sr=[4352,4384,4608,4640,5376,5408,5632,5664,5888,5920,4096,4864,4896,5120,5152],mt=function(){for(var O=[],$=Pt+1;$--;)O.push("");return O},dr=function ie(O,$){ie.prototype.init.call(this),this.field_=O||0,this.dataChannel_=$||0,this.name_="CC"+((this.field_<<1|this.dataChannel_)+1),this.setConstants(),this.reset(),this.push=function(U){var z,J,Z,pe,ve;if(z=U.ccData&32639,z===this.lastControlCode_){this.lastControlCode_=null;return}if((z&61440)===4096?this.lastControlCode_=z:z!==this.PADDING_&&(this.lastControlCode_=null),Z=z>>>8,pe=z&255,z!==this.PADDING_)if(z===this.RESUME_CAPTION_LOADING_)this.mode_="popOn";else if(z===this.END_OF_CAPTION_)this.mode_="popOn",this.clearFormatting(U.pts),this.flushDisplayed(U.pts),J=this.displayed_,this.displayed_=this.nonDisplayed_,this.nonDisplayed_=J,this.startPts_=U.pts;else if(z===this.ROLL_UP_2_ROWS_)this.rollUpRows_=2,this.setRollUp(U.pts);else if(z===this.ROLL_UP_3_ROWS_)this.rollUpRows_=3,this.setRollUp(U.pts);else if(z===this.ROLL_UP_4_ROWS_)this.rollUpRows_=4,this.setRollUp(U.pts);else if(z===this.CARRIAGE_RETURN_)this.clearFormatting(U.pts),this.flushDisplayed(U.pts),this.shiftRowsUp_(),this.startPts_=U.pts;else if(z===this.BACKSPACE_)this.mode_==="popOn"?this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,-1):this.displayed_[this.row_]=this.displayed_[this.row_].slice(0,-1);else if(z===this.ERASE_DISPLAYED_MEMORY_)this.flushDisplayed(U.pts),this.displayed_=mt();else if(z===this.ERASE_NON_DISPLAYED_MEMORY_)this.nonDisplayed_=mt();else if(z===this.RESUME_DIRECT_CAPTIONING_)this.mode_!=="paintOn"&&(this.flushDisplayed(U.pts),this.displayed_=mt()),this.mode_="paintOn",this.startPts_=U.pts;else if(this.isSpecialCharacter(Z,pe))Z=(Z&3)<<8,ve=Kt(Z|pe),this[this.mode_](U.pts,ve),this.column_++;else if(this.isExtCharacter(Z,pe))this.mode_==="popOn"?this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,-1):this.displayed_[this.row_]=this.displayed_[this.row_].slice(0,-1),Z=(Z&3)<<8,ve=Kt(Z|pe),this[this.mode_](U.pts,ve),this.column_++;else if(this.isMidRowCode(Z,pe))this.clearFormatting(U.pts),this[this.mode_](U.pts," "),this.column_++,(pe&14)===14&&this.addFormatting(U.pts,["i"]),(pe&1)===1&&this.addFormatting(U.pts,["u"]);else if(this.isOffsetControlCode(Z,pe))this.column_+=pe&3;else if(this.isPAC(Z,pe)){var Ae=sr.indexOf(z&7968);this.mode_==="rollUp"&&(Ae-this.rollUpRows_+1<0&&(Ae=this.rollUpRows_-1),this.setRollUp(U.pts,Ae)),Ae!==this.row_&&(this.clearFormatting(U.pts),this.row_=Ae),pe&1&&this.formatting_.indexOf("u")===-1&&this.addFormatting(U.pts,["u"]),(z&16)===16&&(this.column_=((z&14)>>1)*4),this.isColorPAC(pe)&&(pe&14)===14&&this.addFormatting(U.pts,["i"])}else this.isNormalChar(Z)&&(pe===0&&(pe=null),ve=Kt(Z),ve+=Kt(pe),this[this.mode_](U.pts,ve),this.column_+=ve.length)}};dr.prototype=new e,dr.prototype.flushDisplayed=function(ie){var O=this.displayed_.map(function($,U){try{return $.trim()}catch{return this.trigger("log",{level:"warn",message:"Skipping a malformed 608 caption at index "+U+"."}),""}},this).join(`
`).replace(/^\n+|\n+$/g,"");O.length&&this.trigger("data",{startPts:this.startPts_,endPts:ie,text:O,stream:this.name_})},dr.prototype.reset=function(){this.mode_="popOn",this.topRow_=0,this.startPts_=0,this.displayed_=mt(),this.nonDisplayed_=mt(),this.lastControlCode_=null,this.column_=0,this.row_=Pt,this.rollUpRows_=2,this.formatting_=[]},dr.prototype.setConstants=function(){this.dataChannel_===0?(this.BASE_=16,this.EXT_=17,this.CONTROL_=(20|this.field_)<<8,this.OFFSET_=23):this.dataChannel_===1&&(this.BASE_=24,this.EXT_=25,this.CONTROL_=(28|this.field_)<<8,this.OFFSET_=31),this.PADDING_=0,this.RESUME_CAPTION_LOADING_=this.CONTROL_|32,this.END_OF_CAPTION_=this.CONTROL_|47,this.ROLL_UP_2_ROWS_=this.CONTROL_|37,this.ROLL_UP_3_ROWS_=this.CONTROL_|38,this.ROLL_UP_4_ROWS_=this.CONTROL_|39,this.CARRIAGE_RETURN_=this.CONTROL_|45,this.RESUME_DIRECT_CAPTIONING_=this.CONTROL_|41,this.BACKSPACE_=this.CONTROL_|33,this.ERASE_DISPLAYED_MEMORY_=this.CONTROL_|44,this.ERASE_NON_DISPLAYED_MEMORY_=this.CONTROL_|46},dr.prototype.isSpecialCharacter=function(ie,O){return ie===this.EXT_&&O>=48&&O<=63},dr.prototype.isExtCharacter=function(ie,O){return(ie===this.EXT_+1||ie===this.EXT_+2)&&O>=32&&O<=63},dr.prototype.isMidRowCode=function(ie,O){return ie===this.EXT_&&O>=32&&O<=47},dr.prototype.isOffsetControlCode=function(ie,O){return ie===this.OFFSET_&&O>=33&&O<=35},dr.prototype.isPAC=function(ie,O){return ie>=this.BASE_&&ie<this.BASE_+8&&O>=64&&O<=127},dr.prototype.isColorPAC=function(ie){return ie>=64&&ie<=79||ie>=96&&ie<=127},dr.prototype.isNormalChar=function(ie){return ie>=32&&ie<=127},dr.prototype.setRollUp=function(ie,O){if(this.mode_!=="rollUp"&&(this.row_=Pt,this.mode_="rollUp",this.flushDisplayed(ie),this.nonDisplayed_=mt(),this.displayed_=mt()),O!==void 0&&O!==this.row_)for(var $=0;$<this.rollUpRows_;$++)this.displayed_[O-$]=this.displayed_[this.row_-$],this.displayed_[this.row_-$]="";O===void 0&&(O=this.row_),this.topRow_=O-this.rollUpRows_+1},dr.prototype.addFormatting=function(ie,O){this.formatting_=this.formatting_.concat(O);var $=O.reduce(function(U,z){return U+"<"+z+">"},"");this[this.mode_](ie,$)},dr.prototype.clearFormatting=function(ie){if(this.formatting_.length){var O=this.formatting_.reverse().reduce(function($,U){return $+"</"+U+">"},"");this.formatting_=[],this[this.mode_](ie,O)}},dr.prototype.popOn=function(ie,O){var $=this.nonDisplayed_[this.row_];$+=O,this.nonDisplayed_[this.row_]=$},dr.prototype.rollUp=function(ie,O){var $=this.displayed_[this.row_];$+=O,this.displayed_[this.row_]=$},dr.prototype.shiftRowsUp_=function(){var ie;for(ie=0;ie<this.topRow_;ie++)this.displayed_[ie]="";for(ie=this.row_+1;ie<Pt+1;ie++)this.displayed_[ie]="";for(ie=this.topRow_;ie<this.row_;ie++)this.displayed_[ie]=this.displayed_[ie+1];this.displayed_[this.row_]=""},dr.prototype.paintOn=function(ie,O){var $=this.displayed_[this.row_];$+=O,this.displayed_[this.row_]=$};var Vr={CaptionStream:Be,Cea608Stream:dr,Cea708Stream:_t},wr={H264_STREAM_TYPE:27,ADTS_STREAM_TYPE:15,METADATA_STREAM_TYPE:21},Pr=8589934592,Ti=4294967296,Qt="shared",vn=function(O,$){var U=1;for(O>$&&(U=-1);Math.abs($-O)>Ti;)O+=U*Pr;return O},ui=function ie(O){var $,U;ie.prototype.init.call(this),this.type_=O||Qt,this.push=function(z){this.type_!==Qt&&z.type!==this.type_||(U===void 0&&(U=z.dts),z.dts=vn(z.dts,U),z.pts=vn(z.pts,U),$=z.dts,this.trigger("data",z))},this.flush=function(){U=$,this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")},this.discontinuity=function(){U=void 0,$=void 0},this.reset=function(){this.discontinuity(),this.trigger("reset")}};ui.prototype=new e;var gs={TimestampRolloverStream:ui,handleRollover:vn},Xr=function(O,$,U){var z,J="";for(z=$;z<U;z++)J+="%"+("00"+O[z].toString(16)).slice(-2);return J},vs=function(O,$,U){return decodeURIComponent(Xr(O,$,U))},an=function(O,$,U){return unescape(Xr(O,$,U))},Ji=function(O){return O[0]<<21|O[1]<<14|O[2]<<7|O[3]},Cr={TXXX:function(O){var $;if(O.data[0]===3){for($=1;$<O.data.length;$++)if(O.data[$]===0){O.description=vs(O.data,1,$),O.value=vs(O.data,$+1,O.data.length).replace(/\0*$/,"");break}O.data=O.value}},WXXX:function(O){var $;if(O.data[0]===3){for($=1;$<O.data.length;$++)if(O.data[$]===0){O.description=vs(O.data,1,$),O.url=vs(O.data,$+1,O.data.length);break}}},PRIV:function(O){var $;for($=0;$<O.data.length;$++)if(O.data[$]===0){O.owner=an(O.data,0,$);break}O.privateData=O.data.subarray($+1),O.data=O.privateData}},we;we=function(O){var $={descriptor:O&&O.descriptor},U=0,z=[],J=0,Z;if(we.prototype.init.call(this),this.dispatchType=wr.METADATA_STREAM_TYPE.toString(16),$.descriptor)for(Z=0;Z<$.descriptor.length;Z++)this.dispatchType+=("00"+$.descriptor[Z].toString(16)).slice(-2);this.push=function(pe){var ve,Ae,be,De,Je,Et;if(pe.type==="timed-metadata"){if(pe.dataAlignmentIndicator&&(J=0,z.length=0),z.length===0&&(pe.data.length<10||pe.data[0]!==73||pe.data[1]!==68||pe.data[2]!==51)){this.trigger("log",{level:"warn",message:"Skipping unrecognized metadata packet"});return}if(z.push(pe),J+=pe.data.byteLength,z.length===1&&(U=Ji(pe.data.subarray(6,10)),U+=10),!(J<U)){for(ve={data:new Uint8Array(U),frames:[],pts:z[0].pts,dts:z[0].dts},Je=0;Je<U;)ve.data.set(z[0].data.subarray(0,U-Je),Je),Je+=z[0].data.byteLength,J-=z[0].data.byteLength,z.shift();Ae=10,ve.data[5]&64&&(Ae+=4,Ae+=Ji(ve.data.subarray(10,14)),U-=Ji(ve.data.subarray(16,20)));do{if(be=Ji(ve.data.subarray(Ae+4,Ae+8)),be<1){this.trigger("log",{level:"warn",message:"Malformed ID3 frame encountered. Skipping metadata parsing."});return}if(Et=String.fromCharCode(ve.data[Ae],ve.data[Ae+1],ve.data[Ae+2],ve.data[Ae+3]),De={id:Et,data:ve.data.subarray(Ae+10,Ae+be+10)},De.key=De.id,Cr[De.id]&&(Cr[De.id](De),De.owner==="com.apple.streaming.transportStreamTimestamp")){var Mt=De.data,Qe=(Mt[3]&1)<<30|Mt[4]<<22|Mt[5]<<14|Mt[6]<<6|Mt[7]>>>2;Qe*=4,Qe+=Mt[7]&3,De.timeStamp=Qe,ve.pts===void 0&&ve.dts===void 0&&(ve.pts=De.timeStamp,ve.dts=De.timeStamp),this.trigger("timestamp",De)}ve.frames.push(De),Ae+=10,Ae+=be}while(Ae<U);this.trigger("data",ve)}}}},we.prototype=new e;var Fe=we,Ge=gs.TimestampRolloverStream,Ye,ot,Tt,Dt=188,mr=71;Ye=function(){var O=new Uint8Array(Dt),$=0;Ye.prototype.init.call(this),this.push=function(U){var z=0,J=Dt,Z;for($?(Z=new Uint8Array(U.byteLength+$),Z.set(O.subarray(0,$)),Z.set(U,$),$=0):Z=U;J<Z.byteLength;){if(Z[z]===mr&&Z[J]===mr){this.trigger("data",Z.subarray(z,J)),z+=Dt,J+=Dt;continue}z++,J++}z<Z.byteLength&&(O.set(Z.subarray(z),0),$=Z.byteLength-z)},this.flush=function(){$===Dt&&O[0]===mr&&(this.trigger("data",O),$=0),this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")},this.reset=function(){$=0,this.trigger("reset")}},Ye.prototype=new e,ot=function(){var O,$,U,z;ot.prototype.init.call(this),z=this,this.packetsWaitingForPmt=[],this.programMapTable=void 0,O=function(Z,pe){var ve=0;pe.payloadUnitStartIndicator&&(ve+=Z[ve]+1),pe.type==="pat"?$(Z.subarray(ve),pe):U(Z.subarray(ve),pe)},$=function(Z,pe){pe.section_number=Z[7],pe.last_section_number=Z[8],z.pmtPid=(Z[10]&31)<<8|Z[11],pe.pmtPid=z.pmtPid},U=function(Z,pe){var ve,Ae,be,De;if(Z[5]&1){for(z.programMapTable={video:null,audio:null,"timed-metadata":{}},ve=(Z[1]&15)<<8|Z[2],Ae=3+ve-4,be=(Z[10]&15)<<8|Z[11],De=12+be;De<Ae;){var Je=Z[De],Et=(Z[De+1]&31)<<8|Z[De+2];Je===wr.H264_STREAM_TYPE&&z.programMapTable.video===null?z.programMapTable.video=Et:Je===wr.ADTS_STREAM_TYPE&&z.programMapTable.audio===null?z.programMapTable.audio=Et:Je===wr.METADATA_STREAM_TYPE&&(z.programMapTable["timed-metadata"][Et]=Je),De+=((Z[De+3]&15)<<8|Z[De+4])+5}pe.programMapTable=z.programMapTable}},this.push=function(J){var Z={},pe=4;if(Z.payloadUnitStartIndicator=!!(J[1]&64),Z.pid=J[1]&31,Z.pid<<=8,Z.pid|=J[2],(J[3]&48)>>>4>1&&(pe+=J[pe]+1),Z.pid===0)Z.type="pat",O(J.subarray(pe),Z),this.trigger("data",Z);else if(Z.pid===this.pmtPid)for(Z.type="pmt",O(J.subarray(pe),Z),this.trigger("data",Z);this.packetsWaitingForPmt.length;)this.processPes_.apply(this,this.packetsWaitingForPmt.shift());else this.programMapTable===void 0?this.packetsWaitingForPmt.push([J,pe,Z]):this.processPes_(J,pe,Z)},this.processPes_=function(J,Z,pe){pe.pid===this.programMapTable.video?pe.streamType=wr.H264_STREAM_TYPE:pe.pid===this.programMapTable.audio?pe.streamType=wr.ADTS_STREAM_TYPE:pe.streamType=this.programMapTable["timed-metadata"][pe.pid],pe.type="pes",pe.data=J.subarray(Z),this.trigger("data",pe)}},ot.prototype=new e,ot.STREAM_TYPES={h264:27,adts:15},Tt=function(){var O=this,$=!1,U={data:[],size:0},z={data:[],size:0},J={data:[],size:0},Z,pe=function(be,De){var Je,Et=be[0]<<16|be[1]<<8|be[2];De.data=new Uint8Array,Et===1&&(De.packetLength=6+(be[4]<<8|be[5]),De.dataAlignmentIndicator=(be[6]&4)!==0,Je=be[7],Je&192&&(De.pts=(be[9]&14)<<27|(be[10]&255)<<20|(be[11]&254)<<12|(be[12]&255)<<5|(be[13]&254)>>>3,De.pts*=4,De.pts+=(be[13]&6)>>>1,De.dts=De.pts,Je&64&&(De.dts=(be[14]&14)<<27|(be[15]&255)<<20|(be[16]&254)<<12|(be[17]&255)<<5|(be[18]&254)>>>3,De.dts*=4,De.dts+=(be[18]&6)>>>1)),De.data=be.subarray(9+be[8]))},ve=function(be,De,Je){var Et=new Uint8Array(be.size),Mt={type:De},Qe=0,Zt=0,xi=!1,ln;if(!(!be.data.length||be.size<9)){for(Mt.trackId=be.data[0].pid,Qe=0;Qe<be.data.length;Qe++)ln=be.data[Qe],Et.set(ln.data,Zt),Zt+=ln.data.byteLength;pe(Et,Mt),xi=De==="video"||Mt.packetLength<=be.size,(Je||xi)&&(be.size=0,be.data.length=0),xi&&O.trigger("data",Mt)}};Tt.prototype.init.call(this),this.push=function(Ae){({pat:function(){},pes:function(){var De,Je;switch(Ae.streamType){case wr.H264_STREAM_TYPE:De=U,Je="video";break;case wr.ADTS_STREAM_TYPE:De=z,Je="audio";break;case wr.METADATA_STREAM_TYPE:De=J,Je="timed-metadata";break;default:return}Ae.payloadUnitStartIndicator&&ve(De,Je,!0),De.data.push(Ae),De.size+=Ae.data.byteLength},pmt:function(){var De={type:"metadata",tracks:[]};Z=Ae.programMapTable,Z.video!==null&&De.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+Z.video,codec:"avc",type:"video"}),Z.audio!==null&&De.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+Z.audio,codec:"adts",type:"audio"}),$=!0,O.trigger("data",De)}})[Ae.type]()},this.reset=function(){U.size=0,U.data.length=0,z.size=0,z.data.length=0,this.trigger("reset")},this.flushStreams_=function(){ve(U,"video"),ve(z,"audio"),ve(J,"timed-metadata")},this.flush=function(){if(!$&&Z){var Ae={type:"metadata",tracks:[]};Z.video!==null&&Ae.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+Z.video,codec:"avc",type:"video"}),Z.audio!==null&&Ae.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+Z.audio,codec:"adts",type:"audio"}),O.trigger("data",Ae)}$=!1,this.flushStreams_(),this.trigger("done")}},Tt.prototype=new e;var Mr={PAT_PID:0,MP2T_PACKET_LENGTH:Dt,TransportPacketStream:Ye,TransportParseStream:ot,ElementaryStream:Tt,TimestampRolloverStream:Ge,CaptionStream:Vr.CaptionStream,Cea608Stream:Vr.Cea608Stream,Cea708Stream:Vr.Cea708Stream,MetadataStream:Fe};for(var ci in wr)wr.hasOwnProperty(ci)&&(Mr[ci]=wr[ci]);var yr=Mr,on=It.ONE_SECOND_IN_TS,Rr,Ci=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];Rr=function(O){var $,U=0;Rr.prototype.init.call(this),this.skipWarn_=function(z,J){this.trigger("log",{level:"warn",message:"adts skiping bytes "+z+" to "+J+" in frame "+U+" outside syncword"})},this.push=function(z){var J=0,Z,pe,ve,Ae,be;if(O||(U=0),z.type==="audio"){$&&$.length?(ve=$,$=new Uint8Array(ve.byteLength+z.data.byteLength),$.set(ve),$.set(z.data,ve.byteLength)):$=z.data;for(var De;J+7<$.length;){if($[J]!==255||($[J+1]&246)!==240){typeof De!="number"&&(De=J),J++;continue}if(typeof De=="number"&&(this.skipWarn_(De,J),De=null),pe=(~$[J+1]&1)*2,Z=($[J+3]&3)<<11|$[J+4]<<3|($[J+5]&224)>>5,Ae=(($[J+6]&3)+1)*1024,be=Ae*on/Ci[($[J+2]&60)>>>2],$.byteLength-J<Z)break;this.trigger("data",{pts:z.pts+U*be,dts:z.dts+U*be,sampleCount:Ae,audioobjecttype:($[J+2]>>>6&3)+1,channelcount:($[J+2]&1)<<2|($[J+3]&192)>>>6,samplerate:Ci[($[J+2]&60)>>>2],samplingfrequencyindex:($[J+2]&60)>>>2,samplesize:16,data:$.subarray(J+7+pe,J+Z)}),U++,J+=Z}typeof De=="number"&&(this.skipWarn_(De,J),De=null),$=$.subarray(J)}},this.flush=function(){U=0,this.trigger("done")},this.reset=function(){$=void 0,this.trigger("reset")},this.endTimeline=function(){$=void 0,this.trigger("endedtimeline")}},Rr.prototype=new e;var Pi=Rr,ys;ys=function(O){var $=O.byteLength,U=0,z=0;this.length=function(){return 8*$},this.bitsAvailable=function(){return 8*$+z},this.loadWord=function(){var J=O.byteLength-$,Z=new Uint8Array(4),pe=Math.min(4,$);if(pe===0)throw new Error("no bytes available");Z.set(O.subarray(J,J+pe)),U=new DataView(Z.buffer).getUint32(0),z=pe*8,$-=pe},this.skipBits=function(J){var Z;z>J?(U<<=J,z-=J):(J-=z,Z=Math.floor(J/8),J-=Z*8,$-=Z,this.loadWord(),U<<=J,z-=J)},this.readBits=function(J){var Z=Math.min(z,J),pe=U>>>32-Z;return z-=Z,z>0?U<<=Z:$>0&&this.loadWord(),Z=J-Z,Z>0?pe<<Z|this.readBits(Z):pe},this.skipLeadingZeros=function(){var J;for(J=0;J<z;++J)if((U&2147483648>>>J)!==0)return U<<=J,z-=J,J;return this.loadWord(),J+this.skipLeadingZeros()},this.skipUnsignedExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.skipExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.readUnsignedExpGolomb=function(){var J=this.skipLeadingZeros();return this.readBits(J+1)-1},this.readExpGolomb=function(){var J=this.readUnsignedExpGolomb();return 1&J?1+J>>>1:-1*(J>>>1)},this.readBoolean=function(){return this.readBits(1)===1},this.readUnsignedByte=function(){return this.readBits(8)},this.loadWord()};var pc=ys,_s,Mn,bi;Mn=function(){var O=0,$,U;Mn.prototype.init.call(this),this.push=function(z){var J;U?(J=new Uint8Array(U.byteLength+z.data.byteLength),J.set(U),J.set(z.data,U.byteLength),U=J):U=z.data;for(var Z=U.byteLength;O<Z-3;O++)if(U[O+2]===1){$=O+5;break}for(;$<Z;)switch(U[$]){case 0:if(U[$-1]!==0){$+=2;break}else if(U[$-2]!==0){$++;break}O+3!==$-2&&this.trigger("data",U.subarray(O+3,$-2));do $++;while(U[$]!==1&&$<Z);O=$-2,$+=3;break;case 1:if(U[$-1]!==0||U[$-2]!==0){$+=3;break}this.trigger("data",U.subarray(O+3,$-2)),O=$-2,$+=3;break;default:$+=3;break}U=U.subarray(O),$-=O,O=0},this.reset=function(){U=null,O=0,this.trigger("reset")},this.flush=function(){U&&U.byteLength>3&&this.trigger("data",U.subarray(O+3)),U=null,O=0,this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")}},Mn.prototype=new e,bi={100:!0,110:!0,122:!0,244:!0,44:!0,83:!0,86:!0,118:!0,128:!0,138:!0,139:!0,134:!0},_s=function(){var O=new Mn,$,U,z,J,Z,pe,ve;_s.prototype.init.call(this),$=this,this.push=function(Ae){Ae.type==="video"&&(U=Ae.trackId,z=Ae.pts,J=Ae.dts,O.push(Ae))},O.on("data",function(Ae){var be={trackId:U,pts:z,dts:J,data:Ae,nalUnitTypeCode:Ae[0]&31};switch(be.nalUnitTypeCode){case 5:be.nalUnitType="slice_layer_without_partitioning_rbsp_idr";break;case 6:be.nalUnitType="sei_rbsp",be.escapedRBSP=Z(Ae.subarray(1));break;case 7:be.nalUnitType="seq_parameter_set_rbsp",be.escapedRBSP=Z(Ae.subarray(1)),be.config=pe(be.escapedRBSP);break;case 8:be.nalUnitType="pic_parameter_set_rbsp";break;case 9:be.nalUnitType="access_unit_delimiter_rbsp";break}$.trigger("data",be)}),O.on("done",function(){$.trigger("done")}),O.on("partialdone",function(){$.trigger("partialdone")}),O.on("reset",function(){$.trigger("reset")}),O.on("endedtimeline",function(){$.trigger("endedtimeline")}),this.flush=function(){O.flush()},this.partialFlush=function(){O.partialFlush()},this.reset=function(){O.reset()},this.endTimeline=function(){O.endTimeline()},ve=function(be,De){var Je=8,Et=8,Mt,Qe;for(Mt=0;Mt<be;Mt++)Et!==0&&(Qe=De.readExpGolomb(),Et=(Je+Qe+256)%256),Je=Et===0?Je:Et},Z=function(be){for(var De=be.byteLength,Je=[],Et=1,Mt,Qe;Et<De-2;)be[Et]===0&&be[Et+1]===0&&be[Et+2]===3?(Je.push(Et+2),Et+=2):Et++;if(Je.length===0)return be;Mt=De-Je.length,Qe=new Uint8Array(Mt);var Zt=0;for(Et=0;Et<Mt;Zt++,Et++)Zt===Je[0]&&(Zt++,Je.shift()),Qe[Et]=be[Zt];return Qe},pe=function(be){var De=0,Je=0,Et=0,Mt=0,Qe,Zt,xi,ln,Un,Xo,mo,go,Yo,da,Us,di=[1,1],Ha,$n;if(Qe=new pc(be),Zt=Qe.readUnsignedByte(),ln=Qe.readUnsignedByte(),xi=Qe.readUnsignedByte(),Qe.skipUnsignedExpGolomb(),bi[Zt]&&(Un=Qe.readUnsignedExpGolomb(),Un===3&&Qe.skipBits(1),Qe.skipUnsignedExpGolomb(),Qe.skipUnsignedExpGolomb(),Qe.skipBits(1),Qe.readBoolean()))for(Us=Un!==3?8:12,$n=0;$n<Us;$n++)Qe.readBoolean()&&($n<6?ve(16,Qe):ve(64,Qe));if(Qe.skipUnsignedExpGolomb(),Xo=Qe.readUnsignedExpGolomb(),Xo===0)Qe.readUnsignedExpGolomb();else if(Xo===1)for(Qe.skipBits(1),Qe.skipExpGolomb(),Qe.skipExpGolomb(),mo=Qe.readUnsignedExpGolomb(),$n=0;$n<mo;$n++)Qe.skipExpGolomb();if(Qe.skipUnsignedExpGolomb(),Qe.skipBits(1),go=Qe.readUnsignedExpGolomb(),Yo=Qe.readUnsignedExpGolomb(),da=Qe.readBits(1),da===0&&Qe.skipBits(1),Qe.skipBits(1),Qe.readBoolean()&&(De=Qe.readUnsignedExpGolomb(),Je=Qe.readUnsignedExpGolomb(),Et=Qe.readUnsignedExpGolomb(),Mt=Qe.readUnsignedExpGolomb()),Qe.readBoolean()&&Qe.readBoolean()){switch(Ha=Qe.readUnsignedByte(),Ha){case 1:di=[1,1];break;case 2:di=[12,11];break;case 3:di=[10,11];break;case 4:di=[16,11];break;case 5:di=[40,33];break;case 6:di=[24,11];break;case 7:di=[20,11];break;case 8:di=[32,11];break;case 9:di=[80,33];break;case 10:di=[18,11];break;case 11:di=[15,11];break;case 12:di=[64,33];break;case 13:di=[160,99];break;case 14:di=[4,3];break;case 15:di=[3,2];break;case 16:di=[2,1];break;case 255:{di=[Qe.readUnsignedByte()<<8|Qe.readUnsignedByte(),Qe.readUnsignedByte()<<8|Qe.readUnsignedByte()];break}}di&&di[0]/di[1]}return{profileIdc:Zt,levelIdc:xi,profileCompatibility:ln,width:(go+1)*16-De*2-Je*2,height:(2-da)*(Yo+1)*16-Et*2-Mt*2,sarRatio:di}}},_s.prototype=new e;var Tu={H264Stream:_s},Fr=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],es=function(O,$){var U=O[$+6]<<21|O[$+7]<<14|O[$+8]<<7|O[$+9],z=O[$+5],J=(z&16)>>4;return U=U>=0?U:0,J?U+20:U+10},na=function ie(O,$){return O.length-$<10||O[$]!==73||O[$+1]!==68||O[$+2]!==51?$:($+=es(O,$),ie(O,$))},En=function(O){var $=na(O,0);return O.length>=$+2&&(O[$]&255)===255&&(O[$+1]&240)===240&&(O[$+1]&22)===16},Oa=function(O){return O[0]<<21|O[1]<<14|O[2]<<7|O[3]},Tl=function(O,$,U){var z,J="";for(z=$;z<U;z++)J+="%"+("00"+O[z].toString(16)).slice(-2);return J},lo=function(O,$,U){return unescape(Tl(O,$,U))},bu=function(O,$){var U=(O[$+5]&224)>>5,z=O[$+4]<<3,J=O[$+3]&6144;return J|z|U},bl=function(O,$){return O[$]===73&&O[$+1]===68&&O[$+2]===51?"timed-metadata":O[$]&!0&&(O[$+1]&240)===240?"audio":null},sa=function(O){for(var $=0;$+5<O.length;){if(O[$]!==255||(O[$+1]&246)!==240){$++;continue}return Fr[(O[$+2]&60)>>>2]}return null},yn=function(O){var $,U,z,J;$=10,O[5]&64&&($+=4,$+=Oa(O.subarray(10,14)));do{if(U=Oa(O.subarray($+4,$+8)),U<1)return null;if(J=String.fromCharCode(O[$],O[$+1],O[$+2],O[$+3]),J==="PRIV"){z=O.subarray($+10,$+U+10);for(var Z=0;Z<z.byteLength;Z++)if(z[Z]===0){var pe=lo(z,0,Z);if(pe==="com.apple.streaming.transportStreamTimestamp"){var ve=z.subarray(Z+1),Ae=(ve[3]&1)<<30|ve[4]<<22|ve[5]<<14|ve[6]<<6|ve[7]>>>2;return Ae*=4,Ae+=ve[7]&3,Ae}break}}$+=10,$+=U}while($<O.byteLength);return null},wn={isLikelyAacData:En,parseId3TagSize:es,parseAdtsSize:bu,parseType:bl,parseSampleRate:sa,parseAacTimestamp:yn},aa;aa=function(){var O=new Uint8Array,$=0;aa.prototype.init.call(this),this.setTimestamp=function(U){$=U},this.push=function(U){var z=0,J=0,Z,pe,ve,Ae;for(O.length?(Ae=O.length,O=new Uint8Array(U.byteLength+Ae),O.set(O.subarray(0,Ae)),O.set(U,Ae)):O=U;O.length-J>=3;){if(O[J]===73&&O[J+1]===68&&O[J+2]===51){if(O.length-J<10||(z=wn.parseId3TagSize(O,J),J+z>O.length))break;pe={type:"timed-metadata",data:O.subarray(J,J+z)},this.trigger("data",pe),J+=z;continue}else if((O[J]&255)===255&&(O[J+1]&240)===240){if(O.length-J<7||(z=wn.parseAdtsSize(O,J),J+z>O.length))break;ve={type:"audio",data:O.subarray(J,J+z),pts:$,dts:$},this.trigger("data",ve),J+=z;continue}J++}Z=O.length-J,Z>0?O=O.subarray(J):O=new Uint8Array},this.reset=function(){O=new Uint8Array,this.trigger("reset")},this.endTimeline=function(){O=new Uint8Array,this.trigger("endedtimeline")}},aa.prototype=new e;var Ma=aa,oa=["audioobjecttype","channelcount","samplerate","samplingfrequencyindex","samplesize"],Sl=oa,mc=["width","height","profileIdc","levelIdc","profileCompatibility","sarRatio"],Fn=mc,Fa=Tu.H264Stream,Cl=wn.isLikelyAacData,El=It.ONE_SECOND_IN_TS,jo,Ba,xs,ts,la=function(O,$){$.stream=O,this.trigger("log",$)},zo=function(O,$){for(var U=Object.keys($),z=0;z<U.length;z++){var J=U[z];J==="headOfPipeline"||!$[J].on||$[J].on("log",la.bind(O,J))}},gc=function(O,$){var U;if(O.length!==$.length)return!1;for(U=0;U<O.length;U++)if(O[U]!==$[U])return!1;return!0},vc=function(O,$,U,z,J,Z){var pe=U-$,ve=z-$,Ae=J-U;return{start:{dts:O,pts:O+pe},end:{dts:O+ve,pts:O+Ae},prependedContentDuration:Z,baseMediaDecodeTime:O}};Ba=function(O,$){var U=[],z,J=0,Z=0,pe=1/0;$=$||{},z=$.firstSequenceNumber||0,Ba.prototype.init.call(this),this.push=function(ve){ne.collectDtsInfo(O,ve),O&&Sl.forEach(function(Ae){O[Ae]=ve[Ae]}),U.push(ve)},this.setEarliestDts=function(ve){J=ve},this.setVideoBaseMediaDecodeTime=function(ve){pe=ve},this.setAudioAppendStart=function(ve){Z=ve},this.flush=function(){var ve,Ae,be,De,Je,Et,Mt;if(U.length===0){this.trigger("done","AudioSegmentStream");return}ve=Jr.trimAdtsFramesByEarliestDts(U,O,J),O.baseMediaDecodeTime=ne.calculateTrackBaseMediaDecodeTime(O,$.keepOriginalTimestamps),Mt=Jr.prefixWithSilence(O,ve,Z,pe),O.samples=Jr.generateSampleTable(ve),be=qe.mdat(Jr.concatenateFrameData(ve)),U=[],Ae=qe.moof(z,[O]),De=new Uint8Array(Ae.byteLength+be.byteLength),z++,De.set(Ae),De.set(be,Ae.byteLength),ne.clearDtsInfo(O),Je=Math.ceil(El*1024/O.samplerate),ve.length&&(Et=ve.length*Je,this.trigger("segmentTimingInfo",vc(It.audioTsToVideoTs(O.baseMediaDecodeTime,O.samplerate),ve[0].dts,ve[0].pts,ve[0].dts+Et,ve[0].pts+Et,Mt||0)),this.trigger("timingInfo",{start:ve[0].pts,end:ve[0].pts+Et})),this.trigger("data",{track:O,boxes:De}),this.trigger("done","AudioSegmentStream")},this.reset=function(){ne.clearDtsInfo(O),U=[],this.trigger("reset")}},Ba.prototype=new e,jo=function(O,$){var U,z=[],J=[],Z,pe;$=$||{},U=$.firstSequenceNumber||0,jo.prototype.init.call(this),delete O.minPTS,this.gopCache_=[],this.push=function(ve){ne.collectDtsInfo(O,ve),ve.nalUnitType==="seq_parameter_set_rbsp"&&!Z&&(Z=ve.config,O.sps=[ve.data],Fn.forEach(function(Ae){O[Ae]=Z[Ae]},this)),ve.nalUnitType==="pic_parameter_set_rbsp"&&!pe&&(pe=ve.data,O.pps=[ve.data]),z.push(ve)},this.flush=function(){for(var ve,Ae,be,De,Je,Et,Mt=0,Qe,Zt;z.length&&z[0].nalUnitType!=="access_unit_delimiter_rbsp";)z.shift();if(z.length===0){this.resetStream_(),this.trigger("done","VideoSegmentStream");return}if(ve=Ne.groupNalsIntoFrames(z),be=Ne.groupFramesIntoGops(ve),be[0][0].keyFrame||(Ae=this.getGopForFusion_(z[0],O),Ae?(Mt=Ae.duration,be.unshift(Ae),be.byteLength+=Ae.byteLength,be.nalCount+=Ae.nalCount,be.pts=Ae.pts,be.dts=Ae.dts,be.duration+=Ae.duration):be=Ne.extendFirstKeyFrame(be)),J.length){var xi;if($.alignGopsAtEnd?xi=this.alignGopsAtEnd_(be):xi=this.alignGopsAtStart_(be),!xi){this.gopCache_.unshift({gop:be.pop(),pps:O.pps,sps:O.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),z=[],this.resetStream_(),this.trigger("done","VideoSegmentStream");return}ne.clearDtsInfo(O),be=xi}ne.collectDtsInfo(O,be),O.samples=Ne.generateSampleTable(be),Je=qe.mdat(Ne.concatenateNalData(be)),O.baseMediaDecodeTime=ne.calculateTrackBaseMediaDecodeTime(O,$.keepOriginalTimestamps),this.trigger("processedGopsInfo",be.map(function(ln){return{pts:ln.pts,dts:ln.dts,byteLength:ln.byteLength}})),Qe=be[0],Zt=be[be.length-1],this.trigger("segmentTimingInfo",vc(O.baseMediaDecodeTime,Qe.dts,Qe.pts,Zt.dts+Zt.duration,Zt.pts+Zt.duration,Mt)),this.trigger("timingInfo",{start:be[0].pts,end:be[be.length-1].pts+be[be.length-1].duration}),this.gopCache_.unshift({gop:be.pop(),pps:O.pps,sps:O.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),z=[],this.trigger("baseMediaDecodeTime",O.baseMediaDecodeTime),this.trigger("timelineStartInfo",O.timelineStartInfo),De=qe.moof(U,[O]),Et=new Uint8Array(De.byteLength+Je.byteLength),U++,Et.set(De),Et.set(Je,De.byteLength),this.trigger("data",{track:O,boxes:Et}),this.resetStream_(),this.trigger("done","VideoSegmentStream")},this.reset=function(){this.resetStream_(),z=[],this.gopCache_.length=0,J.length=0,this.trigger("reset")},this.resetStream_=function(){ne.clearDtsInfo(O),Z=void 0,pe=void 0},this.getGopForFusion_=function(ve){var Ae=45e3,be=1/0,De,Je,Et,Mt,Qe;for(Qe=0;Qe<this.gopCache_.length;Qe++)Mt=this.gopCache_[Qe],Et=Mt.gop,!(!(O.pps&&gc(O.pps[0],Mt.pps[0]))||!(O.sps&&gc(O.sps[0],Mt.sps[0])))&&(Et.dts<O.timelineStartInfo.dts||(De=ve.dts-Et.dts-Et.duration,De>=-1e4&&De<=Ae&&(!Je||be>De)&&(Je=Mt,be=De)));return Je?Je.gop:null},this.alignGopsAtStart_=function(ve){var Ae,be,De,Je,Et,Mt,Qe,Zt;for(Et=ve.byteLength,Mt=ve.nalCount,Qe=ve.duration,Ae=be=0;Ae<J.length&&be<ve.length&&(De=J[Ae],Je=ve[be],De.pts!==Je.pts);){if(Je.pts>De.pts){Ae++;continue}be++,Et-=Je.byteLength,Mt-=Je.nalCount,Qe-=Je.duration}return be===0?ve:be===ve.length?null:(Zt=ve.slice(be),Zt.byteLength=Et,Zt.duration=Qe,Zt.nalCount=Mt,Zt.pts=Zt[0].pts,Zt.dts=Zt[0].dts,Zt)},this.alignGopsAtEnd_=function(ve){var Ae,be,De,Je,Et,Mt;for(Ae=J.length-1,be=ve.length-1,Et=null,Mt=!1;Ae>=0&&be>=0;){if(De=J[Ae],Je=ve[be],De.pts===Je.pts){Mt=!0;break}if(De.pts>Je.pts){Ae--;continue}Ae===J.length-1&&(Et=be),be--}if(!Mt&&Et===null)return null;var Qe;if(Mt?Qe=be:Qe=Et,Qe===0)return ve;var Zt=ve.slice(Qe),xi=Zt.reduce(function(ln,Un){return ln.byteLength+=Un.byteLength,ln.duration+=Un.duration,ln.nalCount+=Un.nalCount,ln},{byteLength:0,duration:0,nalCount:0});return Zt.byteLength=xi.byteLength,Zt.duration=xi.duration,Zt.nalCount=xi.nalCount,Zt.pts=Zt[0].pts,Zt.dts=Zt[0].dts,Zt},this.alignGopsWith=function(ve){J=ve}},jo.prototype=new e,ts=function(O,$){this.numberOfTracks=0,this.metadataStream=$,O=O||{},typeof O.remux<"u"?this.remuxTracks=!!O.remux:this.remuxTracks=!0,typeof O.keepOriginalTimestamps=="boolean"?this.keepOriginalTimestamps=O.keepOriginalTimestamps:this.keepOriginalTimestamps=!1,this.pendingTracks=[],this.videoTrack=null,this.pendingBoxes=[],this.pendingCaptions=[],this.pendingMetadata=[],this.pendingBytes=0,this.emittedTracks=0,ts.prototype.init.call(this),this.push=function(U){if(U.text)return this.pendingCaptions.push(U);if(U.frames)return this.pendingMetadata.push(U);this.pendingTracks.push(U.track),this.pendingBytes+=U.boxes.byteLength,U.track.type==="video"&&(this.videoTrack=U.track,this.pendingBoxes.push(U.boxes)),U.track.type==="audio"&&(this.audioTrack=U.track,this.pendingBoxes.unshift(U.boxes))}},ts.prototype=new e,ts.prototype.flush=function(ie){var O=0,$={captions:[],captionStreams:{},metadata:[],info:{}},U,z,J,Z=0,pe;if(this.pendingTracks.length<this.numberOfTracks){if(ie!=="VideoSegmentStream"&&ie!=="AudioSegmentStream")return;if(this.remuxTracks)return;if(this.pendingTracks.length===0){this.emittedTracks++,this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0);return}}if(this.videoTrack?(Z=this.videoTrack.timelineStartInfo.pts,Fn.forEach(function(ve){$.info[ve]=this.videoTrack[ve]},this)):this.audioTrack&&(Z=this.audioTrack.timelineStartInfo.pts,Sl.forEach(function(ve){$.info[ve]=this.audioTrack[ve]},this)),this.videoTrack||this.audioTrack){for(this.pendingTracks.length===1?$.type=this.pendingTracks[0].type:$.type="combined",this.emittedTracks+=this.pendingTracks.length,J=qe.initSegment(this.pendingTracks),$.initSegment=new Uint8Array(J.byteLength),$.initSegment.set(J),$.data=new Uint8Array(this.pendingBytes),pe=0;pe<this.pendingBoxes.length;pe++)$.data.set(this.pendingBoxes[pe],O),O+=this.pendingBoxes[pe].byteLength;for(pe=0;pe<this.pendingCaptions.length;pe++)U=this.pendingCaptions[pe],U.startTime=It.metadataTsToSeconds(U.startPts,Z,this.keepOriginalTimestamps),U.endTime=It.metadataTsToSeconds(U.endPts,Z,this.keepOriginalTimestamps),$.captionStreams[U.stream]=!0,$.captions.push(U);for(pe=0;pe<this.pendingMetadata.length;pe++)z=this.pendingMetadata[pe],z.cueTime=It.metadataTsToSeconds(z.pts,Z,this.keepOriginalTimestamps),$.metadata.push(z);for($.metadata.dispatchType=this.metadataStream.dispatchType,this.pendingTracks.length=0,this.videoTrack=null,this.pendingBoxes.length=0,this.pendingCaptions.length=0,this.pendingBytes=0,this.pendingMetadata.length=0,this.trigger("data",$),pe=0;pe<$.captions.length;pe++)U=$.captions[pe],this.trigger("caption",U);for(pe=0;pe<$.metadata.length;pe++)z=$.metadata[pe],this.trigger("id3Frame",z)}this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0)},ts.prototype.setRemux=function(ie){this.remuxTracks=ie},xs=function(O){var $=this,U=!0,z,J;xs.prototype.init.call(this),O=O||{},this.baseMediaDecodeTime=O.baseMediaDecodeTime||0,this.transmuxPipeline_={},this.setupAacPipeline=function(){var Z={};this.transmuxPipeline_=Z,Z.type="aac",Z.metadataStream=new yr.MetadataStream,Z.aacStream=new Ma,Z.audioTimestampRolloverStream=new yr.TimestampRolloverStream("audio"),Z.timedMetadataTimestampRolloverStream=new yr.TimestampRolloverStream("timed-metadata"),Z.adtsStream=new Pi,Z.coalesceStream=new ts(O,Z.metadataStream),Z.headOfPipeline=Z.aacStream,Z.aacStream.pipe(Z.audioTimestampRolloverStream).pipe(Z.adtsStream),Z.aacStream.pipe(Z.timedMetadataTimestampRolloverStream).pipe(Z.metadataStream).pipe(Z.coalesceStream),Z.metadataStream.on("timestamp",function(pe){Z.aacStream.setTimestamp(pe.timeStamp)}),Z.aacStream.on("data",function(pe){pe.type!=="timed-metadata"&&pe.type!=="audio"||Z.audioSegmentStream||(J=J||{timelineStartInfo:{baseMediaDecodeTime:$.baseMediaDecodeTime},codec:"adts",type:"audio"},Z.coalesceStream.numberOfTracks++,Z.audioSegmentStream=new Ba(J,O),Z.audioSegmentStream.on("log",$.getLogTrigger_("audioSegmentStream")),Z.audioSegmentStream.on("timingInfo",$.trigger.bind($,"audioTimingInfo")),Z.adtsStream.pipe(Z.audioSegmentStream).pipe(Z.coalesceStream),$.trigger("trackinfo",{hasAudio:!!J,hasVideo:!!z}))}),Z.coalesceStream.on("data",this.trigger.bind(this,"data")),Z.coalesceStream.on("done",this.trigger.bind(this,"done")),zo(this,Z)},this.setupTsPipeline=function(){var Z={};this.transmuxPipeline_=Z,Z.type="ts",Z.metadataStream=new yr.MetadataStream,Z.packetStream=new yr.TransportPacketStream,Z.parseStream=new yr.TransportParseStream,Z.elementaryStream=new yr.ElementaryStream,Z.timestampRolloverStream=new yr.TimestampRolloverStream,Z.adtsStream=new Pi,Z.h264Stream=new Fa,Z.captionStream=new yr.CaptionStream(O),Z.coalesceStream=new ts(O,Z.metadataStream),Z.headOfPipeline=Z.packetStream,Z.packetStream.pipe(Z.parseStream).pipe(Z.elementaryStream).pipe(Z.timestampRolloverStream),Z.timestampRolloverStream.pipe(Z.h264Stream),Z.timestampRolloverStream.pipe(Z.adtsStream),Z.timestampRolloverStream.pipe(Z.metadataStream).pipe(Z.coalesceStream),Z.h264Stream.pipe(Z.captionStream).pipe(Z.coalesceStream),Z.elementaryStream.on("data",function(pe){var ve;if(pe.type==="metadata"){for(ve=pe.tracks.length;ve--;)!z&&pe.tracks[ve].type==="video"?(z=pe.tracks[ve],z.timelineStartInfo.baseMediaDecodeTime=$.baseMediaDecodeTime):!J&&pe.tracks[ve].type==="audio"&&(J=pe.tracks[ve],J.timelineStartInfo.baseMediaDecodeTime=$.baseMediaDecodeTime);z&&!Z.videoSegmentStream&&(Z.coalesceStream.numberOfTracks++,Z.videoSegmentStream=new jo(z,O),Z.videoSegmentStream.on("log",$.getLogTrigger_("videoSegmentStream")),Z.videoSegmentStream.on("timelineStartInfo",function(Ae){J&&!O.keepOriginalTimestamps&&(J.timelineStartInfo=Ae,Z.audioSegmentStream.setEarliestDts(Ae.dts-$.baseMediaDecodeTime))}),Z.videoSegmentStream.on("processedGopsInfo",$.trigger.bind($,"gopInfo")),Z.videoSegmentStream.on("segmentTimingInfo",$.trigger.bind($,"videoSegmentTimingInfo")),Z.videoSegmentStream.on("baseMediaDecodeTime",function(Ae){J&&Z.audioSegmentStream.setVideoBaseMediaDecodeTime(Ae)}),Z.videoSegmentStream.on("timingInfo",$.trigger.bind($,"videoTimingInfo")),Z.h264Stream.pipe(Z.videoSegmentStream).pipe(Z.coalesceStream)),J&&!Z.audioSegmentStream&&(Z.coalesceStream.numberOfTracks++,Z.audioSegmentStream=new Ba(J,O),Z.audioSegmentStream.on("log",$.getLogTrigger_("audioSegmentStream")),Z.audioSegmentStream.on("timingInfo",$.trigger.bind($,"audioTimingInfo")),Z.audioSegmentStream.on("segmentTimingInfo",$.trigger.bind($,"audioSegmentTimingInfo")),Z.adtsStream.pipe(Z.audioSegmentStream).pipe(Z.coalesceStream)),$.trigger("trackinfo",{hasAudio:!!J,hasVideo:!!z})}}),Z.coalesceStream.on("data",this.trigger.bind(this,"data")),Z.coalesceStream.on("id3Frame",function(pe){pe.dispatchType=Z.metadataStream.dispatchType,$.trigger("id3Frame",pe)}),Z.coalesceStream.on("caption",this.trigger.bind(this,"caption")),Z.coalesceStream.on("done",this.trigger.bind(this,"done")),zo(this,Z)},this.setBaseMediaDecodeTime=function(Z){var pe=this.transmuxPipeline_;O.keepOriginalTimestamps||(this.baseMediaDecodeTime=Z),J&&(J.timelineStartInfo.dts=void 0,J.timelineStartInfo.pts=void 0,ne.clearDtsInfo(J),pe.audioTimestampRolloverStream&&pe.audioTimestampRolloverStream.discontinuity()),z&&(pe.videoSegmentStream&&(pe.videoSegmentStream.gopCache_=[]),z.timelineStartInfo.dts=void 0,z.timelineStartInfo.pts=void 0,ne.clearDtsInfo(z),pe.captionStream.reset()),pe.timestampRolloverStream&&pe.timestampRolloverStream.discontinuity()},this.setAudioAppendStart=function(Z){J&&this.transmuxPipeline_.audioSegmentStream.setAudioAppendStart(Z)},this.setRemux=function(Z){var pe=this.transmuxPipeline_;O.remux=Z,pe&&pe.coalesceStream&&pe.coalesceStream.setRemux(Z)},this.alignGopsWith=function(Z){z&&this.transmuxPipeline_.videoSegmentStream&&this.transmuxPipeline_.videoSegmentStream.alignGopsWith(Z)},this.getLogTrigger_=function(Z){var pe=this;return function(ve){ve.stream=Z,pe.trigger("log",ve)}},this.push=function(Z){if(U){var pe=Cl(Z);pe&&this.transmuxPipeline_.type!=="aac"?this.setupAacPipeline():!pe&&this.transmuxPipeline_.type!=="ts"&&this.setupTsPipeline(),U=!1}this.transmuxPipeline_.headOfPipeline.push(Z)},this.flush=function(){U=!0,this.transmuxPipeline_.headOfPipeline.flush()},this.endTimeline=function(){this.transmuxPipeline_.headOfPipeline.endTimeline()},this.reset=function(){this.transmuxPipeline_.headOfPipeline&&this.transmuxPipeline_.headOfPipeline.reset()},this.resetCaptions=function(){this.transmuxPipeline_.captionStream&&this.transmuxPipeline_.captionStream.reset()}},xs.prototype=new e;var Su={Transmuxer:xs},wl=function(O){return O>>>0},Cu=function(O){return("00"+O.toString(16)).slice(-2)},Fs={toUnsigned:wl,toHexString:Cu},ua=function(O){var $="";return $+=String.fromCharCode(O[0]),$+=String.fromCharCode(O[1]),$+=String.fromCharCode(O[2]),$+=String.fromCharCode(O[3]),$},rs=ua,Ts=Fs.toUnsigned,yc=function ie(O,$){var U=[],z,J,Z,pe,ve;if(!$.length)return null;for(z=0;z<O.byteLength;)J=Ts(O[z]<<24|O[z+1]<<16|O[z+2]<<8|O[z+3]),Z=rs(O.subarray(z+4,z+8)),pe=J>1?z+J:O.byteLength,Z===$[0]&&($.length===1?U.push(O.subarray(z+8,pe)):(ve=ie(O.subarray(z+8,pe),$.slice(1)),ve.length&&(U=U.concat(ve)))),z=pe;return U},ti=yc,kl=Fs.toUnsigned,_c=n.getUint64,kn=function(O){var $={version:O[0],flags:new Uint8Array(O.subarray(1,4))};return $.version===1?$.baseMediaDecodeTime=_c(O.subarray(4)):$.baseMediaDecodeTime=kl(O[4]<<24|O[5]<<16|O[6]<<8|O[7]),$},An=kn,is=function(O){return{isLeading:(O[0]&12)>>>2,dependsOn:O[0]&3,isDependedOn:(O[1]&192)>>>6,hasRedundancy:(O[1]&48)>>>4,paddingValue:(O[1]&14)>>>1,isNonSyncSample:O[1]&1,degradationPriority:O[2]<<8|O[3]}},_n=is,Na=function(O){var $={version:O[0],flags:new Uint8Array(O.subarray(1,4)),samples:[]},U=new DataView(O.buffer,O.byteOffset,O.byteLength),z=$.flags[2]&1,J=$.flags[2]&4,Z=$.flags[1]&1,pe=$.flags[1]&2,ve=$.flags[1]&4,Ae=$.flags[1]&8,be=U.getUint32(4),De=8,Je;for(z&&($.dataOffset=U.getInt32(De),De+=4),J&&be&&(Je={flags:_n(O.subarray(De,De+4))},De+=4,Z&&(Je.duration=U.getUint32(De),De+=4),pe&&(Je.size=U.getUint32(De),De+=4),Ae&&($.version===1?Je.compositionTimeOffset=U.getInt32(De):Je.compositionTimeOffset=U.getUint32(De),De+=4),$.samples.push(Je),be--);be--;)Je={},Z&&(Je.duration=U.getUint32(De),De+=4),pe&&(Je.size=U.getUint32(De),De+=4),ve&&(Je.flags=_n(O.subarray(De,De+4)),De+=4),Ae&&($.version===1?Je.compositionTimeOffset=U.getInt32(De):Je.compositionTimeOffset=U.getUint32(De),De+=4),$.samples.push(Je);return $},gi=Na,Li=function(O){var $=new DataView(O.buffer,O.byteOffset,O.byteLength),U={version:O[0],flags:new Uint8Array(O.subarray(1,4)),trackId:$.getUint32(4)},z=U.flags[2]&1,J=U.flags[2]&2,Z=U.flags[2]&8,pe=U.flags[2]&16,ve=U.flags[2]&32,Ae=U.flags[0]&65536,be=U.flags[0]&131072,De;return De=8,z&&(De+=4,U.baseDataOffset=$.getUint32(12),De+=4),J&&(U.sampleDescriptionIndex=$.getUint32(De),De+=4),Z&&(U.defaultSampleDuration=$.getUint32(De),De+=4),pe&&(U.defaultSampleSize=$.getUint32(De),De+=4),ve&&(U.defaultSampleFlags=$.getUint32(De)),Ae&&(U.durationIsEmpty=!0),!z&&be&&(U.baseDataOffsetIsMoof=!0),U},Bn=Li,Ua=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},uo;typeof window<"u"?uo=window:typeof Ua<"u"?uo=Ua:typeof self<"u"?uo=self:uo={};var Ho=uo,xd=Pe.discardEmulationPreventionBytes,Td=Vr.CaptionStream,Vo=function(O,$){for(var U=O,z=0;z<$.length;z++){var J=$[z];if(U<J.size)return J;U-=J.size}return null},Eu=function(O,$,U){var z=new DataView(O.buffer,O.byteOffset,O.byteLength),J={logs:[],seiNals:[]},Z,pe,ve,Ae;for(pe=0;pe+4<O.length;pe+=ve)if(ve=z.getUint32(pe),pe+=4,!(ve<=0))switch(O[pe]&31){case 6:var be=O.subarray(pe+1,pe+1+ve),De=Vo(pe,$);if(Z={nalUnitType:"sei_rbsp",size:ve,data:be,escapedRBSP:xd(be),trackId:U},De)Z.pts=De.pts,Z.dts=De.dts,Ae=De;else if(Ae)Z.pts=Ae.pts,Z.dts=Ae.dts;else{J.logs.push({level:"warn",message:"We've encountered a nal unit without data at "+pe+" for trackId "+U+". See mux.js#223."});break}J.seiNals.push(Z);break}return J},$a=function(O,$,U){var z=$,J=U.defaultSampleDuration||0,Z=U.defaultSampleSize||0,pe=U.trackId,ve=[];return O.forEach(function(Ae){var be=gi(Ae),De=be.samples;De.forEach(function(Je){Je.duration===void 0&&(Je.duration=J),Je.size===void 0&&(Je.size=Z),Je.trackId=pe,Je.dts=z,Je.compositionTimeOffset===void 0&&(Je.compositionTimeOffset=0),typeof z=="bigint"?(Je.pts=z+Ho.BigInt(Je.compositionTimeOffset),z+=Ho.BigInt(Je.duration)):(Je.pts=z+Je.compositionTimeOffset,z+=Je.duration)}),ve=ve.concat(De)}),ve},Bs=function(O,$){var U=ti(O,["moof","traf"]),z=ti(O,["mdat"]),J={},Z=[];return z.forEach(function(pe,ve){var Ae=U[ve];Z.push({mdat:pe,traf:Ae})}),Z.forEach(function(pe){var ve=pe.mdat,Ae=pe.traf,be=ti(Ae,["tfhd"]),De=Bn(be[0]),Je=De.trackId,Et=ti(Ae,["tfdt"]),Mt=Et.length>0?An(Et[0]).baseMediaDecodeTime:0,Qe=ti(Ae,["trun"]),Zt,xi;$===Je&&Qe.length>0&&(Zt=$a(Qe,Mt,De),xi=Eu(ve,Zt,Je),J[Je]||(J[Je]={seiNals:[],logs:[]}),J[Je].seiNals=J[Je].seiNals.concat(xi.seiNals),J[Je].logs=J[Je].logs.concat(xi.logs))}),J},ja=function(O,$,U){var z;if($===null)return null;z=Bs(O,$);var J=z[$]||{};return{seiNals:J.seiNals,logs:J.logs,timescale:U}},In=function(){var O=!1,$,U,z,J,Z,pe;this.isInitialized=function(){return O},this.init=function(ve){$=new Td,O=!0,pe=ve?ve.isPartial:!1,$.on("data",function(Ae){Ae.startTime=Ae.startPts/J,Ae.endTime=Ae.endPts/J,Z.captions.push(Ae),Z.captionStreams[Ae.stream]=!0}),$.on("log",function(Ae){Z.logs.push(Ae)})},this.isNewInit=function(ve,Ae){return ve&&ve.length===0||Ae&&typeof Ae=="object"&&Object.keys(Ae).length===0?!1:z!==ve[0]||J!==Ae[z]},this.parse=function(ve,Ae,be){var De;if(this.isInitialized()){if(!Ae||!be)return null;if(this.isNewInit(Ae,be))z=Ae[0],J=be[z];else if(z===null||!J)return U.push(ve),null}else return null;for(;U.length>0;){var Je=U.shift();this.parse(Je,Ae,be)}return De=ja(ve,z,J),De&&De.logs&&(Z.logs=Z.logs.concat(De.logs)),De===null||!De.seiNals?Z.logs.length?{logs:Z.logs,captions:[],captionStreams:[]}:null:(this.pushNals(De.seiNals),this.flushStream(),Z)},this.pushNals=function(ve){if(!this.isInitialized()||!ve||ve.length===0)return null;ve.forEach(function(Ae){$.push(Ae)})},this.flushStream=function(){if(!this.isInitialized())return null;pe?$.partialFlush():$.flush()},this.clearParsedCaptions=function(){Z.captions=[],Z.captionStreams={},Z.logs=[]},this.resetCaptionStream=function(){if(!this.isInitialized())return null;$.reset()},this.clearAllCaptions=function(){this.clearParsedCaptions(),this.resetCaptionStream()},this.reset=function(){U=[],z=null,J=null,Z?this.clearParsedCaptions():Z={captions:[],captionStreams:{},logs:[]},this.resetCaptionStream()},this.reset()},xc=In,co=Fs.toUnsigned,za=Fs.toHexString,wu=n.getUint64,Tc,Al,bc,ca,Sc,ho;Tc=function(O){var $={},U=ti(O,["moov","trak"]);return U.reduce(function(z,J){var Z,pe,ve,Ae,be;return Z=ti(J,["tkhd"])[0],!Z||(pe=Z[0],ve=pe===0?12:20,Ae=co(Z[ve]<<24|Z[ve+1]<<16|Z[ve+2]<<8|Z[ve+3]),be=ti(J,["mdia","mdhd"])[0],!be)?null:(pe=be[0],ve=pe===0?12:20,z[Ae]=co(be[ve]<<24|be[ve+1]<<16|be[ve+2]<<8|be[ve+3]),z)},$)},Al=function(O,$){var U;U=ti($,["moof","traf"]);var z=U.reduce(function(J,Z){var pe=ti(Z,["tfhd"])[0],ve=co(pe[4]<<24|pe[5]<<16|pe[6]<<8|pe[7]),Ae=O[ve]||9e4,be=ti(Z,["tfdt"])[0],De=new DataView(be.buffer,be.byteOffset,be.byteLength),Je;be[0]===1?Je=wu(be.subarray(4,12)):Je=De.getUint32(4);var Et;return typeof Je=="bigint"?Et=Je/Ho.BigInt(Ae):typeof Je=="number"&&!isNaN(Je)&&(Et=Je/Ae),Et<Number.MAX_SAFE_INTEGER&&(Et=Number(Et)),Et<J&&(J=Et),J},1/0);return typeof z=="bigint"||isFinite(z)?z:0},bc=function(O,$){var U=ti($,["moof","traf"]),z=0,J=0,Z;if(U&&U.length){var pe=ti(U[0],["tfhd"])[0],ve=ti(U[0],["trun"])[0],Ae=ti(U[0],["tfdt"])[0];if(pe){var be=Bn(pe);Z=be.trackId}if(Ae){var De=An(Ae);z=De.baseMediaDecodeTime}if(ve){var Je=gi(ve);Je.samples&&Je.samples.length&&(J=Je.samples[0].compositionTimeOffset||0)}}var Et=O[Z]||9e4;typeof z=="bigint"&&(J=Ho.BigInt(J),Et=Ho.BigInt(Et));var Mt=(z+J)/Et;return typeof Mt=="bigint"&&Mt<Number.MAX_SAFE_INTEGER&&(Mt=Number(Mt)),Mt},ca=function(O){var $=ti(O,["moov","trak"]),U=[];return $.forEach(function(z){var J=ti(z,["mdia","hdlr"]),Z=ti(z,["tkhd"]);J.forEach(function(pe,ve){var Ae=rs(pe.subarray(8,12)),be=Z[ve],De,Je,Et;Ae==="vide"&&(De=new DataView(be.buffer,be.byteOffset,be.byteLength),Je=De.getUint8(0),Et=Je===0?De.getUint32(12):De.getUint32(20),U.push(Et))})}),U},ho=function(O){var $=O[0],U=$===0?12:20;return co(O[U]<<24|O[U+1]<<16|O[U+2]<<8|O[U+3])},Sc=function(O){var $=ti(O,["moov","trak"]),U=[];return $.forEach(function(z){var J={},Z=ti(z,["tkhd"])[0],pe,ve;Z&&(pe=new DataView(Z.buffer,Z.byteOffset,Z.byteLength),ve=pe.getUint8(0),J.id=ve===0?pe.getUint32(12):pe.getUint32(20));var Ae=ti(z,["mdia","hdlr"])[0];if(Ae){var be=rs(Ae.subarray(8,12));be==="vide"?J.type="video":be==="soun"?J.type="audio":J.type=be}var De=ti(z,["mdia","minf","stbl","stsd"])[0];if(De){var Je=De.subarray(8);J.codec=rs(Je.subarray(4,8));var Et=ti(Je,[J.codec])[0],Mt,Qe;Et&&(/^[asm]vc[1-9]$/i.test(J.codec)?(Mt=Et.subarray(78),Qe=rs(Mt.subarray(4,8)),Qe==="avcC"&&Mt.length>11?(J.codec+=".",J.codec+=za(Mt[9]),J.codec+=za(Mt[10]),J.codec+=za(Mt[11])):J.codec="avc1.4d400d"):/^mp4[a,v]$/i.test(J.codec)?(Mt=Et.subarray(28),Qe=rs(Mt.subarray(4,8)),Qe==="esds"&&Mt.length>20&&Mt[19]!==0?(J.codec+="."+za(Mt[19]),J.codec+="."+za(Mt[20]>>>2&63).replace(/^0/,"")):J.codec="mp4a.40.2"):J.codec=J.codec.toLowerCase())}var Zt=ti(z,["mdia","mdhd"])[0];Zt&&(J.timescale=ho(Zt)),U.push(J)}),U};var Cc={findBox:ti,parseType:rs,timescale:Tc,startTime:Al,compositionStartTime:bc,videoTrackIds:ca,tracks:Sc,getTimescaleFromMediaHeader:ho},Ec=function(O){var $=O[1]&31;return $<<=8,$|=O[2],$},fo=function(O){return!!(O[1]&64)},po=function(O){var $=0;return(O[3]&48)>>>4>1&&($+=O[4]+1),$},bd=function(O,$){var U=Ec(O);return U===0?"pat":U===$?"pmt":$?"pes":null},Sd=function(O){var $=fo(O),U=4+po(O);return $&&(U+=O[U]+1),(O[U+10]&31)<<8|O[U+11]},Cd=function(O){var $={},U=fo(O),z=4+po(O);if(U&&(z+=O[z]+1),!!(O[z+5]&1)){var J,Z,pe;J=(O[z+1]&15)<<8|O[z+2],Z=3+J-4,pe=(O[z+10]&15)<<8|O[z+11];for(var ve=12+pe;ve<Z;){var Ae=z+ve;$[(O[Ae+1]&31)<<8|O[Ae+2]]=O[Ae],ve+=((O[Ae+3]&15)<<8|O[Ae+4])+5}return $}},qo=function(O,$){var U=Ec(O),z=$[U];switch(z){case wr.H264_STREAM_TYPE:return"video";case wr.ADTS_STREAM_TYPE:return"audio";case wr.METADATA_STREAM_TYPE:return"timed-metadata";default:return null}},Wo=function(O){var $=fo(O);if(!$)return null;var U=4+po(O);if(U>=O.byteLength)return null;var z=null,J;return J=O[U+7],J&192&&(z={},z.pts=(O[U+9]&14)<<27|(O[U+10]&255)<<20|(O[U+11]&254)<<12|(O[U+12]&255)<<5|(O[U+13]&254)>>>3,z.pts*=4,z.pts+=(O[U+13]&6)>>>1,z.dts=z.pts,J&64&&(z.dts=(O[U+14]&14)<<27|(O[U+15]&255)<<20|(O[U+16]&254)<<12|(O[U+17]&255)<<5|(O[U+18]&254)>>>3,z.dts*=4,z.dts+=(O[U+18]&6)>>>1)),z},ku=function(O){switch(O){case 5:return"slice_layer_without_partitioning_rbsp_idr";case 6:return"sei_rbsp";case 7:return"seq_parameter_set_rbsp";case 8:return"pic_parameter_set_rbsp";case 9:return"access_unit_delimiter_rbsp";default:return null}},Il=function(O){for(var $=4+po(O),U=O.subarray($),z=0,J=0,Z=!1,pe;J<U.byteLength-3;J++)if(U[J+2]===1){z=J+5;break}for(;z<U.byteLength;)switch(U[z]){case 0:if(U[z-1]!==0){z+=2;break}else if(U[z-2]!==0){z++;break}J+3!==z-2&&(pe=ku(U[J+3]&31),pe==="slice_layer_without_partitioning_rbsp_idr"&&(Z=!0));do z++;while(U[z]!==1&&z<U.length);J=z-2,z+=3;break;case 1:if(U[z-1]!==0||U[z-2]!==0){z+=3;break}pe=ku(U[J+3]&31),pe==="slice_layer_without_partitioning_rbsp_idr"&&(Z=!0),J=z-2,z+=3;break;default:z+=3;break}return U=U.subarray(J),z-=J,J=0,U&&U.byteLength>3&&(pe=ku(U[J+3]&31),pe==="slice_layer_without_partitioning_rbsp_idr"&&(Z=!0)),Z},wc={parseType:bd,parsePat:Sd,parsePmt:Cd,parsePayloadUnitStartIndicator:fo,parsePesType:qo,parsePesTime:Wo,videoPacketContainsKeyFrame:Il},Ns=gs.handleRollover,Yr={};Yr.ts=wc,Yr.aac=wn;var bs=It.ONE_SECOND_IN_TS,ri=188,Nn=71,Ed=function(O,$){for(var U=0,z=ri,J,Z;z<O.byteLength;){if(O[U]===Nn&&O[z]===Nn){switch(J=O.subarray(U,z),Z=Yr.ts.parseType(J,$.pid),Z){case"pat":$.pid=Yr.ts.parsePat(J);break;case"pmt":var pe=Yr.ts.parsePmt(J);$.table=$.table||{},Object.keys(pe).forEach(function(ve){$.table[ve]=pe[ve]});break}U+=ri,z+=ri;continue}U++,z++}},kc=function(O,$,U){for(var z=0,J=ri,Z,pe,ve,Ae,be,De=!1;J<=O.byteLength;){if(O[z]===Nn&&(O[J]===Nn||J===O.byteLength)){switch(Z=O.subarray(z,J),pe=Yr.ts.parseType(Z,$.pid),pe){case"pes":ve=Yr.ts.parsePesType(Z,$.table),Ae=Yr.ts.parsePayloadUnitStartIndicator(Z),ve==="audio"&&Ae&&(be=Yr.ts.parsePesTime(Z),be&&(be.type="audio",U.audio.push(be),De=!0));break}if(De)break;z+=ri,J+=ri;continue}z++,J++}for(J=O.byteLength,z=J-ri,De=!1;z>=0;){if(O[z]===Nn&&(O[J]===Nn||J===O.byteLength)){switch(Z=O.subarray(z,J),pe=Yr.ts.parseType(Z,$.pid),pe){case"pes":ve=Yr.ts.parsePesType(Z,$.table),Ae=Yr.ts.parsePayloadUnitStartIndicator(Z),ve==="audio"&&Ae&&(be=Yr.ts.parsePesTime(Z),be&&(be.type="audio",U.audio.push(be),De=!0));break}if(De)break;z-=ri,J-=ri;continue}z--,J--}},Ss=function(O,$,U){for(var z=0,J=ri,Z,pe,ve,Ae,be,De,Je,Et,Mt=!1,Qe={data:[],size:0};J<O.byteLength;){if(O[z]===Nn&&O[J]===Nn){switch(Z=O.subarray(z,J),pe=Yr.ts.parseType(Z,$.pid),pe){case"pes":if(ve=Yr.ts.parsePesType(Z,$.table),Ae=Yr.ts.parsePayloadUnitStartIndicator(Z),ve==="video"&&(Ae&&!Mt&&(be=Yr.ts.parsePesTime(Z),be&&(be.type="video",U.video.push(be),Mt=!0)),!U.firstKeyFrame)){if(Ae&&Qe.size!==0){for(De=new Uint8Array(Qe.size),Je=0;Qe.data.length;)Et=Qe.data.shift(),De.set(Et,Je),Je+=Et.byteLength;if(Yr.ts.videoPacketContainsKeyFrame(De)){var Zt=Yr.ts.parsePesTime(De);Zt?(U.firstKeyFrame=Zt,U.firstKeyFrame.type="video"):console.warn("Failed to extract PTS/DTS from PES at first keyframe. This could be an unusual TS segment, or else mux.js did not parse your TS segment correctly. If you know your TS segments do contain PTS/DTS on keyframes please file a bug report! You can try ffprobe to double check for yourself.")}Qe.size=0}Qe.data.push(Z),Qe.size+=Z.byteLength}break}if(Mt&&U.firstKeyFrame)break;z+=ri,J+=ri;continue}z++,J++}for(J=O.byteLength,z=J-ri,Mt=!1;z>=0;){if(O[z]===Nn&&O[J]===Nn){switch(Z=O.subarray(z,J),pe=Yr.ts.parseType(Z,$.pid),pe){case"pes":ve=Yr.ts.parsePesType(Z,$.table),Ae=Yr.ts.parsePayloadUnitStartIndicator(Z),ve==="video"&&Ae&&(be=Yr.ts.parsePesTime(Z),be&&(be.type="video",U.video.push(be),Mt=!0));break}if(Mt)break;z-=ri,J-=ri;continue}z--,J--}},Ac=function(O,$){if(O.audio&&O.audio.length){var U=$;(typeof U>"u"||isNaN(U))&&(U=O.audio[0].dts),O.audio.forEach(function(Z){Z.dts=Ns(Z.dts,U),Z.pts=Ns(Z.pts,U),Z.dtsTime=Z.dts/bs,Z.ptsTime=Z.pts/bs})}if(O.video&&O.video.length){var z=$;if((typeof z>"u"||isNaN(z))&&(z=O.video[0].dts),O.video.forEach(function(Z){Z.dts=Ns(Z.dts,z),Z.pts=Ns(Z.pts,z),Z.dtsTime=Z.dts/bs,Z.ptsTime=Z.pts/bs}),O.firstKeyFrame){var J=O.firstKeyFrame;J.dts=Ns(J.dts,z),J.pts=Ns(J.pts,z),J.dtsTime=J.dts/bs,J.ptsTime=J.pts/bs}}},Go=function(O){for(var $=!1,U=0,z=null,J=null,Z=0,pe=0,ve;O.length-pe>=3;){var Ae=Yr.aac.parseType(O,pe);switch(Ae){case"timed-metadata":if(O.length-pe<10){$=!0;break}if(Z=Yr.aac.parseId3TagSize(O,pe),Z>O.length){$=!0;break}J===null&&(ve=O.subarray(pe,pe+Z),J=Yr.aac.parseAacTimestamp(ve)),pe+=Z;break;case"audio":if(O.length-pe<7){$=!0;break}if(Z=Yr.aac.parseAdtsSize(O,pe),Z>O.length){$=!0;break}z===null&&(ve=O.subarray(pe,pe+Z),z=Yr.aac.parseSampleRate(ve)),U++,pe+=Z;break;default:pe++;break}if($)return null}if(z===null||J===null)return null;var be=bs/z,De={audio:[{type:"audio",dts:J,pts:J},{type:"audio",dts:J+U*1024*be,pts:J+U*1024*be}]};return De},Ko=function(O){var $={pid:null,table:null},U={};Ed(O,$);for(var z in $.table)if($.table.hasOwnProperty(z)){var J=$.table[z];switch(J){case wr.H264_STREAM_TYPE:U.video=[],Ss(O,$,U),U.video.length===0&&delete U.video;break;case wr.ADTS_STREAM_TYPE:U.audio=[],kc(O,$,U),U.audio.length===0&&delete U.audio;break}}return U},Au=function(O,$){var U=Yr.aac.isLikelyAacData(O),z;return U?z=Go(O):z=Ko(O),!z||!z.audio&&!z.video?null:(Ac(z,$),z)},Dl={inspect:Au,parseAudioPes_:kc},wd=function(O,$){$.on("data",function(U){var z=U.initSegment;U.initSegment={data:z.buffer,byteOffset:z.byteOffset,byteLength:z.byteLength};var J=U.data;U.data=J.buffer,O.postMessage({action:"data",segment:U,byteOffset:J.byteOffset,byteLength:J.byteLength},[U.data])}),$.on("done",function(U){O.postMessage({action:"done"})}),$.on("gopInfo",function(U){O.postMessage({action:"gopInfo",gopInfo:U})}),$.on("videoSegmentTimingInfo",function(U){var z={start:{decode:It.videoTsToSeconds(U.start.dts),presentation:It.videoTsToSeconds(U.start.pts)},end:{decode:It.videoTsToSeconds(U.end.dts),presentation:It.videoTsToSeconds(U.end.pts)},baseMediaDecodeTime:It.videoTsToSeconds(U.baseMediaDecodeTime)};U.prependedContentDuration&&(z.prependedContentDuration=It.videoTsToSeconds(U.prependedContentDuration)),O.postMessage({action:"videoSegmentTimingInfo",videoSegmentTimingInfo:z})}),$.on("audioSegmentTimingInfo",function(U){var z={start:{decode:It.videoTsToSeconds(U.start.dts),presentation:It.videoTsToSeconds(U.start.pts)},end:{decode:It.videoTsToSeconds(U.end.dts),presentation:It.videoTsToSeconds(U.end.pts)},baseMediaDecodeTime:It.videoTsToSeconds(U.baseMediaDecodeTime)};U.prependedContentDuration&&(z.prependedContentDuration=It.videoTsToSeconds(U.prependedContentDuration)),O.postMessage({action:"audioSegmentTimingInfo",audioSegmentTimingInfo:z})}),$.on("id3Frame",function(U){O.postMessage({action:"id3Frame",id3Frame:U})}),$.on("caption",function(U){O.postMessage({action:"caption",caption:U})}),$.on("trackinfo",function(U){O.postMessage({action:"trackinfo",trackInfo:U})}),$.on("audioTimingInfo",function(U){O.postMessage({action:"audioTimingInfo",audioTimingInfo:{start:It.videoTsToSeconds(U.start),end:It.videoTsToSeconds(U.end)}})}),$.on("videoTimingInfo",function(U){O.postMessage({action:"videoTimingInfo",videoTimingInfo:{start:It.videoTsToSeconds(U.start),end:It.videoTsToSeconds(U.end)}})}),$.on("log",function(U){O.postMessage({action:"log",log:U})})},Iu=(function(){function ie($,U){this.options=U||{},this.self=$,this.init()}var O=ie.prototype;return O.init=function(){this.transmuxer&&this.transmuxer.dispose(),this.transmuxer=new Su.Transmuxer(this.options),wd(this.self,this.transmuxer)},O.pushMp4Captions=function(U){this.captionParser||(this.captionParser=new xc,this.captionParser.init());var z=new Uint8Array(U.data,U.byteOffset,U.byteLength),J=this.captionParser.parse(z,U.trackIds,U.timescales);this.self.postMessage({action:"mp4Captions",captions:J&&J.captions||[],logs:J&&J.logs||[],data:z.buffer},[z.buffer])},O.probeMp4StartTime=function(U){var z=U.timescales,J=U.data,Z=Cc.startTime(z,J);this.self.postMessage({action:"probeMp4StartTime",startTime:Z,data:J},[J.buffer])},O.probeMp4Tracks=function(U){var z=U.data,J=Cc.tracks(z);this.self.postMessage({action:"probeMp4Tracks",tracks:J,data:z},[z.buffer])},O.probeTs=function(U){var z=U.data,J=U.baseStartTime,Z=typeof J=="number"&&!isNaN(J)?J*It.ONE_SECOND_IN_TS:void 0,pe=Dl.inspect(z,Z),ve=null;pe&&(ve={hasVideo:pe.video&&pe.video.length===2||!1,hasAudio:pe.audio&&pe.audio.length===2||!1},ve.hasVideo&&(ve.videoStart=pe.video[0].ptsTime),ve.hasAudio&&(ve.audioStart=pe.audio[0].ptsTime)),this.self.postMessage({action:"probeTs",result:ve,data:z},[z.buffer])},O.clearAllMp4Captions=function(){this.captionParser&&this.captionParser.clearAllCaptions()},O.clearParsedMp4Captions=function(){this.captionParser&&this.captionParser.clearParsedCaptions()},O.push=function(U){var z=new Uint8Array(U.data,U.byteOffset,U.byteLength);this.transmuxer.push(z)},O.reset=function(){this.transmuxer.reset()},O.setTimestampOffset=function(U){var z=U.timestampOffset||0;this.transmuxer.setBaseMediaDecodeTime(Math.round(It.secondsToVideoTs(z)))},O.setAudioAppendStart=function(U){this.transmuxer.setAudioAppendStart(Math.ceil(It.secondsToVideoTs(U.appendStart)))},O.setRemux=function(U){this.transmuxer.setRemux(U.remux)},O.flush=function(U){this.transmuxer.flush(),self.postMessage({action:"done",type:"transmuxed"})},O.endTimeline=function(){this.transmuxer.endTimeline(),self.postMessage({action:"endedtimeline",type:"transmuxed"})},O.alignGopsWith=function(U){this.transmuxer.alignGopsWith(U.gopsToAlignWith.slice())},ie})();self.onmessage=function(ie){if(ie.data.action==="init"&&ie.data.options){this.messageHandlers=new Iu(self,ie.data.options);return}this.messageHandlers||(this.messageHandlers=new Iu(self)),ie.data&&ie.data.action&&ie.data.action!=="init"&&this.messageHandlers[ie.data.action]&&this.messageHandlers[ie.data.action](ie.data)}})),Ppe=p$(Dpe),Rpe=function(e,t,r){var n=e.data.segment,s=n.type,a=n.initSegment,o=n.captions,l=n.captionStreams,u=n.metadata,c=n.videoFrameDtsTime,h=n.videoFramePtsTime;t.buffer.push({captions:o,captionStreams:l,metadata:u});var m=e.data.segment.boxes||{data:e.data.segment.data},g={type:s,data:new Uint8Array(m.data,m.data.byteOffset,m.data.byteLength),initSegment:new Uint8Array(a.data,a.byteOffset,a.byteLength)};typeof c<"u"&&(g.videoFrameDtsTime=c),typeof h<"u"&&(g.videoFramePtsTime=h),r(g)},Lpe=function(e){var t=e.transmuxedData,r=e.callback;t.buffer=[],r(t)},Ope=function(e,t){t.gopInfo=e.data.gopInfo},v$=function(e){var t=e.transmuxer,r=e.bytes,n=e.audioAppendStart,s=e.gopsToAlignWith,a=e.remux,o=e.onData,l=e.onTrackInfo,u=e.onAudioTimingInfo,c=e.onVideoTimingInfo,h=e.onVideoSegmentTimingInfo,m=e.onAudioSegmentTimingInfo,g=e.onId3,y=e.onCaptions,_=e.onDone,T=e.onEndedTimeline,E=e.onTransmuxerLog,w=e.isEndOfTimeline,D={buffer:[]},R=w,A=function(M){t.currentTransmux===e&&(M.data.action==="data"&&Rpe(M,D,o),M.data.action==="trackinfo"&&l(M.data.trackInfo),M.data.action==="gopInfo"&&Ope(M,D),M.data.action==="audioTimingInfo"&&u(M.data.audioTimingInfo),M.data.action==="videoTimingInfo"&&c(M.data.videoTimingInfo),M.data.action==="videoSegmentTimingInfo"&&h(M.data.videoSegmentTimingInfo),M.data.action==="audioSegmentTimingInfo"&&m(M.data.audioSegmentTimingInfo),M.data.action==="id3Frame"&&g([M.data.id3Frame],M.data.id3Frame.dispatchType),M.data.action==="caption"&&y(M.data.caption),M.data.action==="endedtimeline"&&(R=!1,T()),M.data.action==="log"&&E(M.data.log),M.data.type==="transmuxed"&&(R||(t.onmessage=null,Lpe({transmuxedData:D,callback:_}),y$(t))))};if(t.onmessage=A,n&&t.postMessage({action:"setAudioAppendStart",appendStart:n}),Array.isArray(s)&&t.postMessage({action:"alignGopsWith",gopsToAlignWith:s}),typeof a<"u"&&t.postMessage({action:"setRemux",remux:a}),r.byteLength){var L=r instanceof ArrayBuffer?r:r.buffer,F=r instanceof ArrayBuffer?0:r.byteOffset;t.postMessage({action:"push",data:L,byteOffset:F,byteLength:r.byteLength},[L])}w&&t.postMessage({action:"endTimeline"}),t.postMessage({action:"flush"})},y$=function(e){e.currentTransmux=null,e.transmuxQueue.length&&(e.currentTransmux=e.transmuxQueue.shift(),typeof e.currentTransmux=="function"?e.currentTransmux():v$(e.currentTransmux))},rM=function(e,t){e.postMessage({action:t}),y$(e)},_$=function(e,t){if(!t.currentTransmux){t.currentTransmux=e,rM(t,e);return}t.transmuxQueue.push(rM.bind(null,t,e))},Mpe=function(e){_$("reset",e)},Fpe=function(e){_$("endTimeline",e)},x$=function(e){if(!e.transmuxer.currentTransmux){e.transmuxer.currentTransmux=e,v$(e);return}e.transmuxer.transmuxQueue.push(e)},Bpe=function(e){var t=new Ppe;t.currentTransmux=null,t.transmuxQueue=[];var r=t.terminate;return t.terminate=function(){return t.currentTransmux=null,t.transmuxQueue.length=0,r.call(t)},t.postMessage({action:"init",options:e}),t},P1={reset:Mpe,endTimeline:Fpe,transmux:x$,createTransmuxer:Bpe},sx=function(e){var t=e.transmuxer,r=e.endAction||e.action,n=e.callback,s=Jt({},e,{endAction:null,transmuxer:null,callback:null}),a=function u(c){c.data.action===r&&(t.removeEventListener("message",u),c.data.data&&(c.data.data=new Uint8Array(c.data.data,e.byteOffset||0,e.byteLength||c.data.data.byteLength),e.data&&(e.data=c.data.data)),n(c.data))};if(t.addEventListener("message",a),e.data){var o=e.data instanceof ArrayBuffer;s.byteOffset=o?0:e.data.byteOffset,s.byteLength=e.data.byteLength;var l=[o?e.data:e.data.buffer];t.postMessage(s,l)}else t.postMessage(s)},su={FAILURE:2,TIMEOUT:-101,ABORTED:-102},EE=function(e){e.forEach(function(t){t.abort()})},Npe=function(e){return{bandwidth:e.bandwidth,bytesReceived:e.bytesReceived||0,roundTripTime:e.roundTripTime||0}},Upe=function(e){var t=e.target,r=Date.now()-t.requestTime,n={bandwidth:1/0,bytesReceived:0,roundTripTime:r||0};return n.bytesReceived=e.loaded,n.bandwidth=Math.floor(n.bytesReceived/n.roundTripTime*8*1e3),n},yk=function(e,t){return t.timedout?{status:t.status,message:"HLS request timed-out at URL: "+t.uri,code:su.TIMEOUT,xhr:t}:t.aborted?{status:t.status,message:"HLS request aborted at URL: "+t.uri,code:su.ABORTED,xhr:t}:e?{status:t.status,message:"HLS request errored at URL: "+t.uri,code:su.FAILURE,xhr:t}:t.responseType==="arraybuffer"&&t.response.byteLength===0?{status:t.status,message:"Empty HLS response at URL: "+t.uri,code:su.FAILURE,xhr:t}:null},iM=function(e,t,r){return function(n,s){var a=s.response,o=yk(n,s);if(o)return r(o,e);if(a.byteLength!==16)return r({status:s.status,message:"Invalid HLS key at URL: "+s.uri,code:su.FAILURE,xhr:s},e);for(var l=new DataView(a),u=new Uint32Array([l.getUint32(0),l.getUint32(4),l.getUint32(8),l.getUint32(12)]),c=0;c<t.length;c++)t[c].bytes=u;return r(null,e)}},T$=function(e,t){var r=B2(e.map.bytes);if(r!=="mp4"){var n=e.map.resolvedUri||e.map.uri;return t({internal:!0,message:"Found unsupported "+(r||"unknown")+" container for initialization segment at URL: "+n,code:su.FAILURE})}sx({action:"probeMp4Tracks",data:e.map.bytes,transmuxer:e.transmuxer,callback:function(a){var o=a.tracks,l=a.data;return e.map.bytes=l,o.forEach(function(u){e.map.tracks=e.map.tracks||{},!e.map.tracks[u.type]&&(e.map.tracks[u.type]=u,typeof u.id=="number"&&u.timescale&&(e.map.timescales=e.map.timescales||{},e.map.timescales[u.id]=u.timescale))}),t(null)}})},$pe=function(e){var t=e.segment,r=e.finishProcessingFn;return function(n,s){var a=yk(n,s);if(a)return r(a,t);var o=new Uint8Array(s.response);if(t.map.key)return t.map.encryptedBytes=o,r(null,t);t.map.bytes=o,T$(t,function(l){if(l)return l.xhr=s,l.status=s.status,r(l,t);r(null,t)})}},jpe=function(e){var t=e.segment,r=e.finishProcessingFn,n=e.responseType;return function(s,a){var o=yk(s,a);if(o)return r(o,t);var l=n==="arraybuffer"||!a.responseText?a.response:Ape(a.responseText.substring(t.lastReachedChar||0));return t.stats=Npe(a),t.key?t.encryptedBytes=new Uint8Array(l):t.bytes=new Uint8Array(l),r(null,t)}},zpe=function(e){var t=e.segment,r=e.bytes,n=e.trackInfoFn,s=e.timingInfoFn,a=e.videoSegmentTimingInfoFn,o=e.audioSegmentTimingInfoFn,l=e.id3Fn,u=e.captionsFn,c=e.isEndOfTimeline,h=e.endedTimelineFn,m=e.dataFn,g=e.doneFn,y=e.onTransmuxerLog,_=t.map&&t.map.tracks||{},T=!!(_.audio&&_.video),E=s.bind(null,t,"audio","start"),w=s.bind(null,t,"audio","end"),D=s.bind(null,t,"video","start"),R=s.bind(null,t,"video","end"),A=function(){return x$({bytes:r,transmuxer:t.transmuxer,audioAppendStart:t.audioAppendStart,gopsToAlignWith:t.gopsToAlignWith,remux:T,onData:function(B){B.type=B.type==="combined"?"video":B.type,m(t,B)},onTrackInfo:function(B){n&&(T&&(B.isMuxed=!0),n(t,B))},onAudioTimingInfo:function(B){E&&typeof B.start<"u"&&(E(B.start),E=null),w&&typeof B.end<"u"&&w(B.end)},onVideoTimingInfo:function(B){D&&typeof B.start<"u"&&(D(B.start),D=null),R&&typeof B.end<"u"&&R(B.end)},onVideoSegmentTimingInfo:function(B){a(B)},onAudioSegmentTimingInfo:function(B){o(B)},onId3:function(B,M){l(t,B,M)},onCaptions:function(B){u(t,[B])},isEndOfTimeline:c,onEndedTimeline:function(){h()},onTransmuxerLog:y,onDone:function(B){g&&(B.type=B.type==="combined"?"video":B.type,g(null,t,B))}})};sx({action:"probeTs",transmuxer:t.transmuxer,data:r,baseStartTime:t.baseStartTime,callback:function(F){t.bytes=r=F.data;var B=F.result;B&&(n(t,{hasAudio:B.hasAudio,hasVideo:B.hasVideo,isMuxed:T}),n=null,B.hasAudio&&!T&&E(B.audioStart),B.hasVideo&&D(B.videoStart),E=null,D=null),A()}})},b$=function(e){var t=e.segment,r=e.bytes,n=e.trackInfoFn,s=e.timingInfoFn,a=e.videoSegmentTimingInfoFn,o=e.audioSegmentTimingInfoFn,l=e.id3Fn,u=e.captionsFn,c=e.isEndOfTimeline,h=e.endedTimelineFn,m=e.dataFn,g=e.doneFn,y=e.onTransmuxerLog,_=new Uint8Array(r);if(ahe(_)){t.isFmp4=!0;var T=t.map.tracks,E={isFmp4:!0,hasVideo:!!T.video,hasAudio:!!T.audio};T.audio&&T.audio.codec&&T.audio.codec!=="enca"&&(E.audioCodec=T.audio.codec),T.video&&T.video.codec&&T.video.codec!=="encv"&&(E.videoCodec=T.video.codec),T.video&&T.audio&&(E.isMuxed=!0),n(t,E);var w=function(R){m(t,{data:_,type:E.hasAudio&&!E.isMuxed?"audio":"video"}),R&&R.length&&u(t,R),g(null,t,{})};sx({action:"probeMp4StartTime",timescales:t.map.timescales,data:_,transmuxer:t.transmuxer,callback:function(R){var A=R.data,L=R.startTime;if(r=A.buffer,t.bytes=_=A,E.hasAudio&&!E.isMuxed&&s(t,"audio","start",L),E.hasVideo&&s(t,"video","start",L),!T.video||!A.byteLength||!t.transmuxer){w();return}sx({action:"pushMp4Captions",endAction:"mp4Captions",transmuxer:t.transmuxer,data:_,timescales:t.map.timescales,trackIds:[T.video.id],callback:function(B){r=B.data.buffer,t.bytes=_=B.data,B.logs.forEach(function(M){y(Re.mergeOptions(M,{stream:"mp4CaptionParser"}))}),w(B.captions)}})}});return}if(!t.transmuxer){g(null,t,{});return}if(typeof t.container>"u"&&(t.container=B2(_)),t.container!=="ts"&&t.container!=="aac"){n(t,{hasAudio:!1,hasVideo:!1}),g(null,t,{});return}zpe({segment:t,bytes:r,trackInfoFn:n,timingInfoFn:s,videoSegmentTimingInfoFn:a,audioSegmentTimingInfoFn:o,id3Fn:l,captionsFn:u,isEndOfTimeline:c,endedTimelineFn:h,dataFn:m,doneFn:g,onTransmuxerLog:y})},S$=function(e,t){var r=e.id,n=e.key,s=e.encryptedBytes,a=e.decryptionWorker,o=function u(c){if(c.data.source===r){a.removeEventListener("message",u);var h=c.data.decrypted;t(new Uint8Array(h.bytes,h.byteOffset,h.byteLength))}};a.addEventListener("message",o);var l;n.bytes.slice?l=n.bytes.slice():l=new Uint32Array(Array.prototype.slice.call(n.bytes)),a.postMessage(l$({source:r,encrypted:s,key:l,iv:n.iv}),[s.buffer,l.buffer])},Hpe=function(e){var t=e.decryptionWorker,r=e.segment,n=e.trackInfoFn,s=e.timingInfoFn,a=e.videoSegmentTimingInfoFn,o=e.audioSegmentTimingInfoFn,l=e.id3Fn,u=e.captionsFn,c=e.isEndOfTimeline,h=e.endedTimelineFn,m=e.dataFn,g=e.doneFn,y=e.onTransmuxerLog;S$({id:r.requestId,key:r.key,encryptedBytes:r.encryptedBytes,decryptionWorker:t},function(_){r.bytes=_,b$({segment:r,bytes:r.bytes,trackInfoFn:n,timingInfoFn:s,videoSegmentTimingInfoFn:a,audioSegmentTimingInfoFn:o,id3Fn:l,captionsFn:u,isEndOfTimeline:c,endedTimelineFn:h,dataFn:m,doneFn:g,onTransmuxerLog:y})})},Vpe=function(e){var t=e.activeXhrs,r=e.decryptionWorker,n=e.trackInfoFn,s=e.timingInfoFn,a=e.videoSegmentTimingInfoFn,o=e.audioSegmentTimingInfoFn,l=e.id3Fn,u=e.captionsFn,c=e.isEndOfTimeline,h=e.endedTimelineFn,m=e.dataFn,g=e.doneFn,y=e.onTransmuxerLog,_=0,T=!1;return function(E,w){if(!T){if(E)return T=!0,EE(t),g(E,w);if(_+=1,_===t.length){var D=function(){if(w.encryptedBytes)return Hpe({decryptionWorker:r,segment:w,trackInfoFn:n,timingInfoFn:s,videoSegmentTimingInfoFn:a,audioSegmentTimingInfoFn:o,id3Fn:l,captionsFn:u,isEndOfTimeline:c,endedTimelineFn:h,dataFn:m,doneFn:g,onTransmuxerLog:y});b$({segment:w,bytes:w.bytes,trackInfoFn:n,timingInfoFn:s,videoSegmentTimingInfoFn:a,audioSegmentTimingInfoFn:o,id3Fn:l,captionsFn:u,isEndOfTimeline:c,endedTimelineFn:h,dataFn:m,doneFn:g,onTransmuxerLog:y})};if(w.endOfAllRequests=Date.now(),w.map&&w.map.encryptedBytes&&!w.map.bytes)return S$({decryptionWorker:r,id:w.requestId+"-init",encryptedBytes:w.map.encryptedBytes,key:w.map.key},function(R){w.map.bytes=R,T$(w,function(A){if(A)return EE(t),g(A,w);D()})});D()}}}},qpe=function(e){var t=e.loadendState,r=e.abortFn;return function(n){var s=n.target;s.aborted&&r&&!t.calledAbortFn&&(r(),t.calledAbortFn=!0)}},Wpe=function(e){var t=e.segment,r=e.progressFn;return function(n){var s=n.target;if(!s.aborted)return t.stats=Re.mergeOptions(t.stats,Upe(n)),!t.stats.firstBytesReceivedAt&&t.stats.bytesReceived&&(t.stats.firstBytesReceivedAt=Date.now()),r(n,t)}},Gpe=function(e){var t=e.xhr,r=e.xhrOptions,n=e.decryptionWorker,s=e.segment,a=e.abortFn,o=e.progressFn,l=e.trackInfoFn,u=e.timingInfoFn,c=e.videoSegmentTimingInfoFn,h=e.audioSegmentTimingInfoFn,m=e.id3Fn,g=e.captionsFn,y=e.isEndOfTimeline,_=e.endedTimelineFn,T=e.dataFn,E=e.doneFn,w=e.onTransmuxerLog,D=[],R=Vpe({activeXhrs:D,decryptionWorker:n,trackInfoFn:l,timingInfoFn:u,videoSegmentTimingInfoFn:c,audioSegmentTimingInfoFn:h,id3Fn:m,captionsFn:g,isEndOfTimeline:y,endedTimelineFn:_,dataFn:T,doneFn:E,onTransmuxerLog:w});if(s.key&&!s.key.bytes){var A=[s.key];s.map&&!s.map.bytes&&s.map.key&&s.map.key.resolvedUri===s.key.resolvedUri&&A.push(s.map.key);var L=Re.mergeOptions(r,{uri:s.key.resolvedUri,responseType:"arraybuffer"}),F=iM(s,A,R),B=t(L,F);D.push(B)}if(s.map&&!s.map.bytes){var M=s.map.key&&(!s.key||s.key.resolvedUri!==s.map.key.resolvedUri);if(M){var k=Re.mergeOptions(r,{uri:s.map.key.resolvedUri,responseType:"arraybuffer"}),q=iM(s,[s.map.key],R),G=t(k,q);D.push(G)}var H=Re.mergeOptions(r,{uri:s.map.resolvedUri,responseType:"arraybuffer",headers:SE(s.map)}),re=$pe({segment:s,finishProcessingFn:R}),se=t(H,re);D.push(se)}var de=Re.mergeOptions(r,{uri:s.part&&s.part.resolvedUri||s.resolvedUri,responseType:"arraybuffer",headers:SE(s)}),me=jpe({segment:s,finishProcessingFn:R,responseType:de.responseType}),ue=t(de,me);ue.addEventListener("progress",Wpe({segment:s,progressFn:o})),D.push(ue);var oe={};return D.forEach(function(ce){ce.addEventListener("loadend",qpe({loadendState:oe,abortFn:a}))}),function(){return EE(D)}},Kpe=xl("CodecUtils"),Xpe=function(e){var t=e.attributes||{};if(t.CODECS)return Hl(t.CODECS)},C$=function(e,t){var r=t.attributes||{};return e&&e.mediaGroups&&e.mediaGroups.AUDIO&&r.AUDIO&&e.mediaGroups.AUDIO[r.AUDIO]},Ype=function(e,t){if(!C$(e,t))return!0;var r=t.attributes||{},n=e.mediaGroups.AUDIO[r.AUDIO];for(var s in n)if(!n[s].uri&&!n[s].playlists)return!0;return!1},ax=function(e){var t={};return e.forEach(function(r){var n=r.mediaType,s=r.type,a=r.details;t[n]=t[n]||[],t[n].push(S6(""+s+a))}),Object.keys(t).forEach(function(r){if(t[r].length>1){Kpe("multiple "+r+" codecs found as attributes: "+t[r].join(", ")+". Setting playlist codecs to null so that we wait for mux.js to probe segments for real codecs."),t[r]=null;return}t[r]=t[r][0]}),t},nM=function(e){var t=0;return e.audio&&t++,e.video&&t++,t},m0=function(e,t){var r=t.attributes||{},n=ax(Xpe(t)||[]);if(C$(e,t)&&!n.audio&&!Ype(e,t)){var s=ax(Uce(e,r.AUDIO)||[]);s.audio&&(n.audio=s.audio)}return n},Ov=xl("PlaylistSelector"),sM=function(e){if(!(!e||!e.playlist)){var t=e.playlist;return JSON.stringify({id:t.id,bandwidth:e.bandwidth,width:e.width,height:e.height,codecs:t.attributes&&t.attributes.CODECS||""})}},ox=function(e,t){if(!e)return"";var r=X.getComputedStyle(e);return r?r[t]:""},ep=function(e,t){var r=e.slice();e.sort(function(n,s){var a=t(n,s);return a===0?r.indexOf(n)-r.indexOf(s):a})},_k=function(e,t){var r,n;return e.attributes.BANDWIDTH&&(r=e.attributes.BANDWIDTH),r=r||X.Number.MAX_VALUE,t.attributes.BANDWIDTH&&(n=t.attributes.BANDWIDTH),n=n||X.Number.MAX_VALUE,r-n},Qpe=function(e,t){var r,n;return e.attributes.RESOLUTION&&e.attributes.RESOLUTION.width&&(r=e.attributes.RESOLUTION.width),r=r||X.Number.MAX_VALUE,t.attributes.RESOLUTION&&t.attributes.RESOLUTION.width&&(n=t.attributes.RESOLUTION.width),n=n||X.Number.MAX_VALUE,r===n&&e.attributes.BANDWIDTH&&t.attributes.BANDWIDTH?e.attributes.BANDWIDTH-t.attributes.BANDWIDTH:r-n},E$=function(e,t,r,n,s,a){if(e){var o={bandwidth:t,width:r,height:n,limitRenditionByPlayerDimensions:s},l=e.playlists;ka.isAudioOnly(e)&&(l=a.getAudioTrackPlaylists_(),o.audioOnly=!0);var u=l.map(function(k){var q,G=k.attributes&&k.attributes.RESOLUTION&&k.attributes.RESOLUTION.width,H=k.attributes&&k.attributes.RESOLUTION&&k.attributes.RESOLUTION.height;return q=k.attributes&&k.attributes.BANDWIDTH,q=q||X.Number.MAX_VALUE,{bandwidth:q,width:G,height:H,playlist:k}});ep(u,function(k,q){return k.bandwidth-q.bandwidth}),u=u.filter(function(k){return!ka.isIncompatible(k.playlist)});var c=u.filter(function(k){return ka.isEnabled(k.playlist)});c.length||(c=u.filter(function(k){return!ka.isDisabled(k.playlist)}));var h=c.filter(function(k){return k.bandwidth*Gn.BANDWIDTH_VARIANCE<t}),m=h[h.length-1],g=h.filter(function(k){return k.bandwidth===m.bandwidth})[0];if(s===!1){var y=g||c[0]||u[0];if(y&&y.playlist){var _="sortedPlaylistReps";return g&&(_="bandwidthBestRep"),c[0]&&(_="enabledPlaylistReps"),Ov("choosing "+sM(y)+" using "+_+" with options",o),y.playlist}return Ov("could not choose a playlist with options",o),null}var T=h.filter(function(k){return k.width&&k.height});ep(T,function(k,q){return k.width-q.width});var E=T.filter(function(k){return k.width===r&&k.height===n});m=E[E.length-1];var w=E.filter(function(k){return k.bandwidth===m.bandwidth})[0],D,R,A;w||(D=T.filter(function(k){return k.width>r||k.height>n}),R=D.filter(function(k){return k.width===D[0].width&&k.height===D[0].height}),m=R[R.length-1],A=R.filter(function(k){return k.bandwidth===m.bandwidth})[0]);var L;if(a.experimentalLeastPixelDiffSelector){var F=T.map(function(k){return k.pixelDiff=Math.abs(k.width-r)+Math.abs(k.height-n),k});ep(F,function(k,q){return k.pixelDiff===q.pixelDiff?q.bandwidth-k.bandwidth:k.pixelDiff-q.pixelDiff}),L=F[0]}var B=L||A||w||g||c[0]||u[0];if(B&&B.playlist){var M="sortedPlaylistReps";return L?M="leastPixelDiffRep":A?M="resolutionPlusOneRep":w?M="resolutionBestRep":g?M="bandwidthBestRep":c[0]&&(M="enabledPlaylistReps"),Ov("choosing "+sM(B)+" using "+M+" with options",o),B.playlist}return Ov("could not choose a playlist with options",o),null}},aM=function(){var e=this.useDevicePixelRatio&&X.devicePixelRatio||1;return E$(this.playlists.master,this.systemBandwidth,parseInt(ox(this.tech_.el(),"width"),10)*e,parseInt(ox(this.tech_.el(),"height"),10)*e,this.limitRenditionByPlayerDimensions,this.masterPlaylistController_)},Jpe=function(e){var t=-1,r=-1;if(e<0||e>1)throw new Error("Moving average bandwidth decay must be between 0 and 1.");return function(){var n=this.useDevicePixelRatio&&X.devicePixelRatio||1;return t<0&&(t=this.systemBandwidth,r=this.systemBandwidth),this.systemBandwidth>0&&this.systemBandwidth!==r&&(t=e*this.systemBandwidth+(1-e)*t,r=this.systemBandwidth),E$(this.playlists.master,t,parseInt(ox(this.tech_.el(),"width"),10)*n,parseInt(ox(this.tech_.el(),"height"),10)*n,this.limitRenditionByPlayerDimensions,this.masterPlaylistController_)}},Zpe=function(e){var t=e.master,r=e.currentTime,n=e.bandwidth,s=e.duration,a=e.segmentDuration,o=e.timeUntilRebuffer,l=e.currentTimeline,u=e.syncController,c=t.playlists.filter(function(_){return!ka.isIncompatible(_)}),h=c.filter(ka.isEnabled);h.length||(h=c.filter(function(_){return!ka.isDisabled(_)}));var m=h.filter(ka.hasAttribute.bind(null,"BANDWIDTH")),g=m.map(function(_){var T=u.getSyncPoint(_,s,l,r),E=T?1:2,w=ka.estimateSegmentRequestTime(a,n,_),D=w*E-o;return{playlist:_,rebufferingImpact:D}}),y=g.filter(function(_){return _.rebufferingImpact<=0});return ep(y,function(_,T){return _k(T.playlist,_.playlist)}),y.length?y[0]:(ep(g,function(_,T){return _.rebufferingImpact-T.rebufferingImpact}),g[0]||null)},eme=function(){var e=this,t=this.playlists.master.playlists.filter(ka.isEnabled);ep(t,function(n,s){return _k(n,s)});var r=t.filter(function(n){return!!m0(e.playlists.master,n).video});return r[0]||null},tme=function(e){var t=0,r;return e.bytes&&(r=new Uint8Array(e.bytes),e.segments.forEach(function(n){r.set(n,t),t+=n.byteLength})),r},rme=function(e,t,r){if(!e[r]){t.trigger({type:"usage",name:"vhs-608"}),t.trigger({type:"usage",name:"hls-608"});var n=r;/^cc708_/.test(r)&&(n="SERVICE"+r.split("_")[1]);var s=t.textTracks().getTrackById(n);if(s)e[r]=s;else{var a=t.options_.vhs&&t.options_.vhs.captionServices||{},o=r,l=r,u=!1,c=a[n];c&&(o=c.label,l=c.language,u=c.default),e[r]=t.addRemoteTextTrack({kind:"captions",id:n,default:u,label:o,language:l},!1).track}}},ime=function(e){var t=e.inbandTextTracks,r=e.captionArray,n=e.timestampOffset;if(r){var s=X.WebKitDataCue||X.VTTCue;r.forEach(function(a){var o=a.stream;t[o].addCue(new s(a.startTime+n,a.endTime+n,a.text))})}},nme=function(e){Object.defineProperties(e.frame,{id:{get:function(){return Re.log.warn("cue.frame.id is deprecated. Use cue.value.key instead."),e.value.key}},value:{get:function(){return Re.log.warn("cue.frame.value is deprecated. Use cue.value.data instead."),e.value.data}},privateData:{get:function(){return Re.log.warn("cue.frame.privateData is deprecated. Use cue.value.data instead."),e.value.data}}})},sme=function(e){var t=e.inbandTextTracks,r=e.metadataArray,n=e.timestampOffset,s=e.videoDuration;if(r){var a=X.WebKitDataCue||X.VTTCue,o=t.metadataTrack_;if(o&&(r.forEach(function(g){var y=g.cueTime+n;typeof y!="number"||X.isNaN(y)||y<0||!(y<1/0)||g.frames.forEach(function(_){var T=new a(y,y,_.value||_.url||_.data||"");T.frame=_,T.value=_,nme(T),o.addCue(T)})}),!(!o.cues||!o.cues.length))){for(var l=o.cues,u=[],c=0;c<l.length;c++)l[c]&&u.push(l[c]);var h=u.reduce(function(g,y){var _=g[y.startTime]||[];return _.push(y),g[y.startTime]=_,g},{}),m=Object.keys(h).sort(function(g,y){return Number(g)-Number(y)});m.forEach(function(g,y){var _=h[g],T=Number(m[y+1])||s;_.forEach(function(E){E.endTime=T})})}}},ame=function(e,t,r){e.metadataTrack_||(e.metadataTrack_=r.addRemoteTextTrack({kind:"metadata",label:"Timed Metadata"},!1).track,e.metadataTrack_.inBandMetadataTrackDispatchType=t)},Jm=function(e,t,r){var n,s;if(r&&r.cues)for(n=r.cues.length;n--;)s=r.cues[n],s.startTime>=e&&s.endTime<=t&&r.removeCue(s)},ome=function(e){var t=e.cues;if(t)for(var r=0;r<t.length;r++){for(var n=[],s=0,a=0;a<t.length;a++)t[r].startTime===t[a].startTime&&t[r].endTime===t[a].endTime&&t[r].text===t[a].text&&(s++,s>1&&n.push(t[a]));n.length&&n.forEach(function(o){return e.removeCue(o)})}},lme=function(e,t,r){if(typeof t>"u"||t===null||!e.length)return[];var n=Math.ceil((t-r+3)*W_.ONE_SECOND_IN_TS),s;for(s=0;s<e.length&&!(e[s].pts>n);s++);return e.slice(s)},ume=function(e,t,r){if(!t.length)return e;if(r)return t.slice();var n=t[0].pts,s=0;for(s;s<e.length&&!(e[s].pts>=n);s++);return e.slice(0,s).concat(t)},cme=function(e,t,r,n){for(var s=Math.ceil((t-n)*W_.ONE_SECOND_IN_TS),a=Math.ceil((r-n)*W_.ONE_SECOND_IN_TS),o=e.slice(),l=e.length;l--&&!(e[l].pts<=a););if(l===-1)return o;for(var u=l+1;u--&&!(e[u].pts<=s););return u=Math.max(u,0),o.splice(u,l-u+1),o},dme=function(e,t){if(!e&&!t||!e&&t||e&&!t)return!1;if(e===t)return!0;var r=Object.keys(e).sort(),n=Object.keys(t).sort();if(r.length!==n.length)return!1;for(var s=0;s<r.length;s++){var a=r[s];if(a!==n[s]||e[a]!==t[a])return!1}return!0},w$=22,hme=function(e,t,r){t=t||[];for(var n=[],s=0,a=0;a<t.length;a++){var o=t[a];if(e===o.timeline&&(n.push(a),s+=o.duration,s>r))return a}return n.length===0?0:n[n.length-1]},Mm=1,fme=500,oM=function(e){return typeof e=="number"&&isFinite(e)},Mv=1/60,pme=function(e,t,r){return e!=="main"||!t||!r?null:!r.hasAudio&&!r.hasVideo?"Neither audio nor video found in segment.":t.hasVideo&&!r.hasVideo?"Only audio found in segment when we expected video. We can't switch to audio only from a stream that had video. To get rid of this message, please add codec information to the manifest.":!t.hasVideo&&r.hasVideo?"Video found in segment when we expected only audio. We can't switch to a stream with video from an audio only stream. To get rid of this message, please add codec information to the manifest.":null},mme=function(e,t,r){var n=t-Gn.BACK_BUFFER_LENGTH;e.length&&(n=Math.max(n,e.start(0)));var s=t-r;return Math.min(s,n)},yf=function(e){var t=e.startOfSegment,r=e.duration,n=e.segment,s=e.part,a=e.playlist,o=a.mediaSequence,l=a.id,u=a.segments,c=u===void 0?[]:u,h=e.mediaIndex,m=e.partIndex,g=e.timeline,y=c.length-1,_="mediaIndex/partIndex increment";e.getMediaInfoForTime?_="getMediaInfoForTime ("+e.getMediaInfoForTime+")":e.isSyncRequest&&(_="getSyncSegmentCandidate (isSyncRequest)"),e.independent&&(_+=" with independent "+e.independent);var T=typeof m=="number",E=e.segment.uri?"segment":"pre-segment",w=T?KU({preloadSegment:n})-1:0;return E+" ["+(o+h)+"/"+(o+y)+"]"+(T?" part ["+m+"/"+w+"]":"")+(" segment start/end ["+n.start+" => "+n.end+"]")+(T?" part start/end ["+s.start+" => "+s.end+"]":"")+(" startOfSegment ["+t+"]")+(" duration ["+r+"]")+(" timeline ["+g+"]")+(" selected by ["+_+"]")+(" playlist ["+l+"]")},lM=function(e){return e+"TimingInfo"},gme=function(e){var t=e.segmentTimeline,r=e.currentTimeline,n=e.startOfSegment,s=e.buffered,a=e.overrideCheck;return!a&&t===r?null:t<r?n:s.length?s.end(s.length-1):n},uM=function(e){var t=e.timelineChangeController,r=e.currentTimeline,n=e.segmentTimeline,s=e.loaderType,a=e.audioDisabled;if(r===n)return!1;if(s==="audio"){var o=t.lastTimelineChange({type:"main"});return!o||o.to!==n}if(s==="main"&&a){var l=t.pendingTimelineChange({type:"audio"});return!(l&&l.to===n)}return!1},vme=function(e){var t=0;return["video","audio"].forEach(function(r){var n=e[r+"TimingInfo"];if(n){var s=n.start,a=n.end,o;typeof s=="bigint"||typeof a=="bigint"?o=X.BigInt(a)-X.BigInt(s):typeof s=="number"&&typeof a=="number"&&(o=a-s),typeof o<"u"&&o>t&&(t=o)}}),typeof t=="bigint"&&t<Number.MAX_SAFE_INTEGER&&(t=Number(t)),t},cM=function(e){var t=e.segmentDuration,r=e.maxDuration;return t?Math.round(t)>r+gd:!1},yme=function(e,t){if(t!=="hls")return null;var r=vme({audioTimingInfo:e.audioTimingInfo,videoTimingInfo:e.videoTimingInfo});if(!r)return null;var n=e.playlist.targetDuration,s=cM({segmentDuration:r,maxDuration:n*2}),a=cM({segmentDuration:r,maxDuration:n}),o="Segment with index "+e.mediaIndex+" "+("from playlist "+e.playlist.id+" ")+("has a duration of "+r+" ")+("when the reported duration is "+e.duration+" ")+("and the target duration is "+n+". ")+"For HLS content, a duration in excess of the target duration may result in playback issues. See the HLS specification section on EXT-X-TARGETDURATION for more details: https://tools.ietf.org/html/draft-pantos-http-live-streaming-23#section-4.3.3.1";return s||a?{severity:s?"warn":"info",message:o}:null},wE=(function(i){Ft(e,i);function e(r,n){var s;if(s=i.call(this)||this,!r)throw new TypeError("Initialization settings are required");if(typeof r.currentTime!="function")throw new TypeError("No currentTime getter specified");if(!r.mediaSource)throw new TypeError("No MediaSource specified");return s.bandwidth=r.bandwidth,s.throughput={rate:0,count:0},s.roundTrip=NaN,s.resetStats_(),s.mediaIndex=null,s.partIndex=null,s.hasPlayed_=r.hasPlayed,s.currentTime_=r.currentTime,s.seekable_=r.seekable,s.seeking_=r.seeking,s.duration_=r.duration,s.mediaSource_=r.mediaSource,s.vhs_=r.vhs,s.loaderType_=r.loaderType,s.currentMediaInfo_=void 0,s.startingMediaInfo_=void 0,s.segmentMetadataTrack_=r.segmentMetadataTrack,s.goalBufferLength_=r.goalBufferLength,s.sourceType_=r.sourceType,s.sourceUpdater_=r.sourceUpdater,s.inbandTextTracks_=r.inbandTextTracks,s.state_="INIT",s.timelineChangeController_=r.timelineChangeController,s.shouldSaveSegmentTimingInfo_=!0,s.parse708captions_=r.parse708captions,s.useDtsForTimestampOffset_=r.useDtsForTimestampOffset,s.captionServices_=r.captionServices,s.experimentalExactManifestTimings=r.experimentalExactManifestTimings,s.checkBufferTimeout_=null,s.error_=void 0,s.currentTimeline_=-1,s.pendingSegment_=null,s.xhrOptions_=null,s.pendingSegments_=[],s.audioDisabled_=!1,s.isPendingTimestampOffset_=!1,s.gopBuffer_=[],s.timeMapping_=0,s.safeAppend_=Re.browser.IE_VERSION>=11,s.appendInitSegment_={audio:!0,video:!0},s.playlistOfLastInitSegment_={audio:null,video:null},s.callQueue_=[],s.loadQueue_=[],s.metadataQueue_={id3:[],caption:[]},s.waitingOnRemove_=!1,s.quotaExceededErrorRetryTimeout_=null,s.activeInitSegmentId_=null,s.initSegments_={},s.cacheEncryptionKeys_=r.cacheEncryptionKeys,s.keyCache_={},s.decrypter_=r.decrypter,s.syncController_=r.syncController,s.syncPoint_={segmentIndex:0,time:0},s.transmuxer_=s.createTransmuxer_(),s.triggerSyncInfoUpdate_=function(){return s.trigger("syncinfoupdate")},s.syncController_.on("syncinfoupdate",s.triggerSyncInfoUpdate_),s.mediaSource_.addEventListener("sourceopen",function(){s.isEndOfStream_()||(s.ended_=!1)}),s.fetchAtBuffer_=!1,s.logger_=xl("SegmentLoader["+s.loaderType_+"]"),Object.defineProperty(je(s),"state",{get:function(){return this.state_},set:function(o){o!==this.state_&&(this.logger_(this.state_+" -> "+o),this.state_=o,this.trigger("statechange"))}}),s.sourceUpdater_.on("ready",function(){s.hasEnoughInfoToAppend_()&&s.processCallQueue_()}),s.loaderType_==="main"&&s.timelineChangeController_.on("pendingtimelinechange",function(){s.hasEnoughInfoToAppend_()&&s.processCallQueue_()}),s.loaderType_==="audio"&&s.timelineChangeController_.on("timelinechange",function(){s.hasEnoughInfoToLoad_()&&s.processLoadQueue_(),s.hasEnoughInfoToAppend_()&&s.processCallQueue_()}),s}var t=e.prototype;return t.createTransmuxer_=function(){return P1.createTransmuxer({remux:!1,alignGopsAtEnd:this.safeAppend_,keepOriginalTimestamps:!0,parse708captions:this.parse708captions_,captionServices:this.captionServices_})},t.resetStats_=function(){this.mediaBytesTransferred=0,this.mediaRequests=0,this.mediaRequestsAborted=0,this.mediaRequestsTimedout=0,this.mediaRequestsErrored=0,this.mediaTransferDuration=0,this.mediaSecondsLoaded=0,this.mediaAppends=0},t.dispose=function(){this.trigger("dispose"),this.state="DISPOSED",this.pause(),this.abort_(),this.transmuxer_&&this.transmuxer_.terminate(),this.resetStats_(),this.checkBufferTimeout_&&X.clearTimeout(this.checkBufferTimeout_),this.syncController_&&this.triggerSyncInfoUpdate_&&this.syncController_.off("syncinfoupdate",this.triggerSyncInfoUpdate_),this.off()},t.setAudio=function(n){this.audioDisabled_=!n,n?this.appendInitSegment_.audio=!0:this.sourceUpdater_.removeAudio(0,this.duration_())},t.abort=function(){if(this.state!=="WAITING"){this.pendingSegment_&&(this.pendingSegment_=null);return}this.abort_(),this.state="READY",this.paused()||this.monitorBuffer_()},t.abort_=function(){this.pendingSegment_&&this.pendingSegment_.abortRequests&&this.pendingSegment_.abortRequests(),this.pendingSegment_=null,this.callQueue_=[],this.loadQueue_=[],this.metadataQueue_.id3=[],this.metadataQueue_.caption=[],this.timelineChangeController_.clearPendingTimelineChange(this.loaderType_),this.waitingOnRemove_=!1,X.clearTimeout(this.quotaExceededErrorRetryTimeout_),this.quotaExceededErrorRetryTimeout_=null},t.checkForAbort_=function(n){return this.state==="APPENDING"&&!this.pendingSegment_?(this.state="READY",!0):!this.pendingSegment_||this.pendingSegment_.requestId!==n},t.error=function(n){return typeof n<"u"&&(this.logger_("error occurred:",n),this.error_=n),this.pendingSegment_=null,this.error_},t.endOfStream=function(){this.ended_=!0,this.transmuxer_&&P1.reset(this.transmuxer_),this.gopBuffer_.length=0,this.pause(),this.trigger("ended")},t.buffered_=function(){var n=this.getMediaInfo_();if(!this.sourceUpdater_||!n)return Re.createTimeRanges();if(this.loaderType_==="main"){var s=n.hasAudio,a=n.hasVideo,o=n.isMuxed;if(a&&s&&!this.audioDisabled_&&!o)return this.sourceUpdater_.buffered();if(a)return this.sourceUpdater_.videoBuffered()}return this.sourceUpdater_.audioBuffered()},t.initSegmentForMap=function(n,s){if(s===void 0&&(s=!1),!n)return null;var a=nx(n),o=this.initSegments_[a];return s&&!o&&n.bytes&&(this.initSegments_[a]=o={resolvedUri:n.resolvedUri,byterange:n.byterange,bytes:n.bytes,tracks:n.tracks,timescales:n.timescales}),o||n},t.segmentKey=function(n,s){if(s===void 0&&(s=!1),!n)return null;var a=u$(n),o=this.keyCache_[a];this.cacheEncryptionKeys_&&s&&!o&&n.bytes&&(this.keyCache_[a]=o={resolvedUri:n.resolvedUri,bytes:n.bytes});var l={resolvedUri:(o||n).resolvedUri};return o&&(l.bytes=o.bytes),l},t.couldBeginLoading_=function(){return this.playlist_&&!this.paused()},t.load=function(){if(this.monitorBuffer_(),!!this.playlist_){if(this.state==="INIT"&&this.couldBeginLoading_())return this.init_();!this.couldBeginLoading_()||this.state!=="READY"&&this.state!=="INIT"||(this.state="READY")}},t.init_=function(){return this.state="READY",this.resetEverything(),this.monitorBuffer_()},t.playlist=function(n,s){if(s===void 0&&(s={}),!!n){var a=this.playlist_,o=this.pendingSegment_;this.playlist_=n,this.xhrOptions_=s,this.state==="INIT"&&(n.syncInfo={mediaSequence:n.mediaSequence,time:0},this.loaderType_==="main"&&this.syncController_.setDateTimeMappingForStart(n));var l=null;if(a&&(a.id?l=a.id:a.uri&&(l=a.uri)),this.logger_("playlist update ["+l+" => "+(n.id||n.uri)+"]"),this.trigger("syncinfoupdate"),this.state==="INIT"&&this.couldBeginLoading_())return this.init_();if(!a||a.uri!==n.uri){this.mediaIndex!==null&&(n.endList?this.resyncLoader():this.resetLoader()),this.currentMediaInfo_=void 0,this.trigger("playlistupdate");return}var u=n.mediaSequence-a.mediaSequence;if(this.logger_("live window shift ["+u+"]"),this.mediaIndex!==null)if(this.mediaIndex-=u,this.mediaIndex<0)this.mediaIndex=null,this.partIndex=null;else{var c=this.playlist_.segments[this.mediaIndex];if(this.partIndex&&(!c.parts||!c.parts.length||!c.parts[this.partIndex])){var h=this.mediaIndex;this.logger_("currently processing part (index "+this.partIndex+") no longer exists."),this.resetLoader(),this.mediaIndex=h}}o&&(o.mediaIndex-=u,o.mediaIndex<0?(o.mediaIndex=null,o.partIndex=null):(o.mediaIndex>=0&&(o.segment=n.segments[o.mediaIndex]),o.partIndex>=0&&o.segment.parts&&(o.part=o.segment.parts[o.partIndex]))),this.syncController_.saveExpiredSegmentInfo(a,n)}},t.pause=function(){this.checkBufferTimeout_&&(X.clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=null)},t.paused=function(){return this.checkBufferTimeout_===null},t.resetEverything=function(n){this.ended_=!1,this.activeInitSegmentId_=null,this.appendInitSegment_={audio:!0,video:!0},this.resetLoader(),this.remove(0,1/0,n),this.transmuxer_&&(this.transmuxer_.postMessage({action:"clearAllMp4Captions"}),this.transmuxer_.postMessage({action:"reset"}))},t.resetLoader=function(){this.fetchAtBuffer_=!1,this.resyncLoader()},t.resyncLoader=function(){this.transmuxer_&&P1.reset(this.transmuxer_),this.mediaIndex=null,this.partIndex=null,this.syncPoint_=null,this.isPendingTimestampOffset_=!1,this.callQueue_=[],this.loadQueue_=[],this.metadataQueue_.id3=[],this.metadataQueue_.caption=[],this.abort(),this.transmuxer_&&this.transmuxer_.postMessage({action:"clearParsedMp4Captions"})},t.remove=function(n,s,a,o){if(a===void 0&&(a=function(){}),o===void 0&&(o=!1),s===1/0&&(s=this.duration_()),s<=n){this.logger_("skipping remove because end ${end} is <= start ${start}");return}if(!this.sourceUpdater_||!this.getMediaInfo_()){this.logger_("skipping remove because no source updater or starting media info");return}var l=1,u=function(){l--,l===0&&a()};(o||!this.audioDisabled_)&&(l++,this.sourceUpdater_.removeAudio(n,s,u)),(o||this.loaderType_==="main")&&(this.gopBuffer_=cme(this.gopBuffer_,n,s,this.timeMapping_),l++,this.sourceUpdater_.removeVideo(n,s,u));for(var c in this.inbandTextTracks_)Jm(n,s,this.inbandTextTracks_[c]);Jm(n,s,this.segmentMetadataTrack_),u()},t.monitorBuffer_=function(){this.checkBufferTimeout_&&X.clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=X.setTimeout(this.monitorBufferTick_.bind(this),1)},t.monitorBufferTick_=function(){this.state==="READY"&&this.fillBuffer_(),this.checkBufferTimeout_&&X.clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=X.setTimeout(this.monitorBufferTick_.bind(this),fme)},t.fillBuffer_=function(){if(!this.sourceUpdater_.updating()){var n=this.chooseNextRequest_();n&&(typeof n.timestampOffset=="number"&&(this.isPendingTimestampOffset_=!1,this.timelineChangeController_.pendingTimelineChange({type:this.loaderType_,from:this.currentTimeline_,to:n.timeline})),this.loadSegment_(n))}},t.isEndOfStream_=function(n,s,a){if(n===void 0&&(n=this.mediaIndex),s===void 0&&(s=this.playlist_),a===void 0&&(a=this.partIndex),!s||!this.mediaSource_)return!1;var o=typeof n=="number"&&s.segments[n],l=n+1===s.segments.length,u=!o||!o.parts||a+1===o.parts.length;return s.endList&&this.mediaSource_.readyState==="open"&&l&&u},t.chooseNextRequest_=function(){var n=this.buffered_(),s=Q4(n)||0,a=fk(n,this.currentTime_()),o=!this.hasPlayed_()&&a>=1,l=a>=this.goalBufferLength_(),u=this.playlist_.segments;if(!u.length||o||l)return null;this.syncPoint_=this.syncPoint_||this.syncController_.getSyncPoint(this.playlist_,this.duration_(),this.currentTimeline_,this.currentTime_());var c={partIndex:null,mediaIndex:null,startOfSegment:null,playlist:this.playlist_,isSyncRequest:!this.syncPoint_};if(c.isSyncRequest)c.mediaIndex=hme(this.currentTimeline_,u,s);else if(this.mediaIndex!==null){var h=u[this.mediaIndex],m=typeof this.partIndex=="number"?this.partIndex:-1;c.startOfSegment=h.end?h.end:s,h.parts&&h.parts[m+1]?(c.mediaIndex=this.mediaIndex,c.partIndex=m+1):c.mediaIndex=this.mediaIndex+1}else{var g=ka.getMediaInfoForTime({experimentalExactManifestTimings:this.experimentalExactManifestTimings,playlist:this.playlist_,currentTime:this.fetchAtBuffer_?s:this.currentTime_(),startingPartIndex:this.syncPoint_.partIndex,startingSegmentIndex:this.syncPoint_.segmentIndex,startTime:this.syncPoint_.time}),y=g.segmentIndex,_=g.startTime,T=g.partIndex;c.getMediaInfoForTime=this.fetchAtBuffer_?"bufferedEnd "+s:"currentTime "+this.currentTime_(),c.mediaIndex=y,c.startOfSegment=_,c.partIndex=T}var E=u[c.mediaIndex],w=E&&typeof c.partIndex=="number"&&E.parts&&E.parts[c.partIndex];if(!E||typeof c.partIndex=="number"&&!w)return null;if(typeof c.partIndex!="number"&&E.parts&&(c.partIndex=0,w=E.parts[0]),!a&&w&&!w.independent)if(c.partIndex===0){var D=u[c.mediaIndex-1],R=D.parts&&D.parts.length&&D.parts[D.parts.length-1];R&&R.independent&&(c.mediaIndex-=1,c.partIndex=D.parts.length-1,c.independent="previous segment")}else E.parts[c.partIndex-1].independent&&(c.partIndex-=1,c.independent="previous part");var A=this.mediaSource_&&this.mediaSource_.readyState==="ended";return c.mediaIndex>=u.length-1&&A&&!this.seeking_()?null:this.generateSegmentInfo_(c)},t.generateSegmentInfo_=function(n){var s=n.independent,a=n.playlist,o=n.mediaIndex,l=n.startOfSegment,u=n.isSyncRequest,c=n.partIndex,h=n.forceTimestampOffset,m=n.getMediaInfoForTime,g=a.segments[o],y=typeof c=="number"&&g.parts[c],_={requestId:"segment-loader-"+Math.random(),uri:y&&y.resolvedUri||g.resolvedUri,mediaIndex:o,partIndex:y?c:null,isSyncRequest:u,startOfSegment:l,playlist:a,bytes:null,encryptedBytes:null,timestampOffset:null,timeline:g.timeline,duration:y&&y.duration||g.duration,segment:g,part:y,byteLength:0,transmuxer:this.transmuxer_,getMediaInfoForTime:m,independent:s},T=typeof h<"u"?h:this.isPendingTimestampOffset_;_.timestampOffset=this.timestampOffsetForSegment_({segmentTimeline:g.timeline,currentTimeline:this.currentTimeline_,startOfSegment:l,buffered:this.buffered_(),overrideCheck:T});var E=Q4(this.sourceUpdater_.audioBuffered());return typeof E=="number"&&(_.audioAppendStart=E-this.sourceUpdater_.audioTimestampOffset()),this.sourceUpdater_.videoBuffered().length&&(_.gopsToAlignWith=lme(this.gopBuffer_,this.currentTime_()-this.sourceUpdater_.videoTimestampOffset(),this.timeMapping_)),_},t.timestampOffsetForSegment_=function(n){return gme(n)},t.earlyAbortWhenNeeded_=function(n){if(!(this.vhs_.tech_.paused()||!this.xhrOptions_.timeout||!this.playlist_.attributes.BANDWIDTH)&&!(Date.now()-(n.firstBytesReceivedAt||Date.now())<1e3)){var s=this.currentTime_(),a=n.bandwidth,o=this.pendingSegment_.duration,l=ka.estimateSegmentRequestTime(o,a,this.playlist_,n.bytesReceived),u=Ufe(this.buffered_(),s,this.vhs_.tech_.playbackRate())-1;if(!(l<=u)){var c=Zpe({master:this.vhs_.playlists.master,currentTime:s,bandwidth:a,duration:this.duration_(),segmentDuration:o,timeUntilRebuffer:u,currentTimeline:this.currentTimeline_,syncController:this.syncController_});if(c){var h=l-u,m=h-c.rebufferingImpact,g=.5;u<=gd&&(g=1),!(!c.playlist||c.playlist.uri===this.playlist_.uri||m<g)&&(this.bandwidth=c.playlist.attributes.BANDWIDTH*Gn.BANDWIDTH_VARIANCE+1,this.trigger("earlyabort"))}}}},t.handleAbort_=function(n){this.logger_("Aborting "+yf(n)),this.mediaRequestsAborted+=1},t.handleProgress_=function(n,s){this.earlyAbortWhenNeeded_(s.stats),!this.checkForAbort_(s.requestId)&&this.trigger("progress")},t.handleTrackInfo_=function(n,s){this.earlyAbortWhenNeeded_(n.stats),!this.checkForAbort_(n.requestId)&&(this.checkForIllegalMediaSwitch(s)||(s=s||{},dme(this.currentMediaInfo_,s)||(this.appendInitSegment_={audio:!0,video:!0},this.startingMediaInfo_=s,this.currentMediaInfo_=s,this.logger_("trackinfo update",s),this.trigger("trackinfo")),!this.checkForAbort_(n.requestId)&&(this.pendingSegment_.trackInfo=s,this.hasEnoughInfoToAppend_()&&this.processCallQueue_())))},t.handleTimingInfo_=function(n,s,a,o){if(this.earlyAbortWhenNeeded_(n.stats),!this.checkForAbort_(n.requestId)){var l=this.pendingSegment_,u=lM(s);l[u]=l[u]||{},l[u][a]=o,this.logger_("timinginfo: "+s+" - "+a+" - "+o),this.hasEnoughInfoToAppend_()&&this.processCallQueue_()}},t.handleCaptions_=function(n,s){var a=this;if(this.earlyAbortWhenNeeded_(n.stats),!this.checkForAbort_(n.requestId)){if(s.length===0){this.logger_("SegmentLoader received no captions from a caption event");return}var o=this.pendingSegment_;if(!o.hasAppendedData_){this.metadataQueue_.caption.push(this.handleCaptions_.bind(this,n,s));return}var l=this.sourceUpdater_.videoTimestampOffset()===null?this.sourceUpdater_.audioTimestampOffset():this.sourceUpdater_.videoTimestampOffset(),u={};s.forEach(function(c){u[c.stream]=u[c.stream]||{startTime:1/0,captions:[],endTime:0};var h=u[c.stream];h.startTime=Math.min(h.startTime,c.startTime+l),h.endTime=Math.max(h.endTime,c.endTime+l),h.captions.push(c)}),Object.keys(u).forEach(function(c){var h=u[c],m=h.startTime,g=h.endTime,y=h.captions,_=a.inbandTextTracks_;a.logger_("adding cues from "+m+" -> "+g+" for "+c),rme(_,a.vhs_.tech_,c),Jm(m,g,_[c]),ime({captionArray:y,inbandTextTracks:_,timestampOffset:l})}),this.transmuxer_&&this.transmuxer_.postMessage({action:"clearParsedMp4Captions"})}},t.handleId3_=function(n,s,a){if(this.earlyAbortWhenNeeded_(n.stats),!this.checkForAbort_(n.requestId)){var o=this.pendingSegment_;if(!o.hasAppendedData_){this.metadataQueue_.id3.push(this.handleId3_.bind(this,n,s,a));return}var l=this.sourceUpdater_.videoTimestampOffset()===null?this.sourceUpdater_.audioTimestampOffset():this.sourceUpdater_.videoTimestampOffset();ame(this.inbandTextTracks_,a,this.vhs_.tech_),sme({inbandTextTracks:this.inbandTextTracks_,metadataArray:s,timestampOffset:l,videoDuration:this.duration_()})}},t.processMetadataQueue_=function(){this.metadataQueue_.id3.forEach(function(n){return n()}),this.metadataQueue_.caption.forEach(function(n){return n()}),this.metadataQueue_.id3=[],this.metadataQueue_.caption=[]},t.processCallQueue_=function(){var n=this.callQueue_;this.callQueue_=[],n.forEach(function(s){return s()})},t.processLoadQueue_=function(){var n=this.loadQueue_;this.loadQueue_=[],n.forEach(function(s){return s()})},t.hasEnoughInfoToLoad_=function(){if(this.loaderType_!=="audio")return!0;var n=this.pendingSegment_;return n?this.getCurrentMediaInfo_()?!uM({timelineChangeController:this.timelineChangeController_,currentTimeline:this.currentTimeline_,segmentTimeline:n.timeline,loaderType:this.loaderType_,audioDisabled:this.audioDisabled_}):!0:!1},t.getCurrentMediaInfo_=function(n){return n===void 0&&(n=this.pendingSegment_),n&&n.trackInfo||this.currentMediaInfo_},t.getMediaInfo_=function(n){return n===void 0&&(n=this.pendingSegment_),this.getCurrentMediaInfo_(n)||this.startingMediaInfo_},t.getPendingSegmentPlaylist=function(){return this.pendingSegment_?this.pendingSegment_.playlist:null},t.hasEnoughInfoToAppend_=function(){if(!this.sourceUpdater_.ready()||this.waitingOnRemove_||this.quotaExceededErrorRetryTimeout_)return!1;var n=this.pendingSegment_,s=this.getCurrentMediaInfo_();if(!n||!s)return!1;var a=s.hasAudio,o=s.hasVideo,l=s.isMuxed;return!(o&&!n.videoTimingInfo||a&&!this.audioDisabled_&&!l&&!n.audioTimingInfo||uM({timelineChangeController:this.timelineChangeController_,currentTimeline:this.currentTimeline_,segmentTimeline:n.timeline,loaderType:this.loaderType_,audioDisabled:this.audioDisabled_}))},t.handleData_=function(n,s){if(this.earlyAbortWhenNeeded_(n.stats),!this.checkForAbort_(n.requestId)){if(this.callQueue_.length||!this.hasEnoughInfoToAppend_()){this.callQueue_.push(this.handleData_.bind(this,n,s));return}var a=this.pendingSegment_;if(this.setTimeMapping_(a.timeline),this.updateMediaSecondsLoaded_(a.part||a.segment),this.mediaSource_.readyState!=="closed"){if(n.map&&(n.map=this.initSegmentForMap(n.map,!0),a.segment.map=n.map),n.key&&this.segmentKey(n.key,!0),a.isFmp4=n.isFmp4,a.timingInfo=a.timingInfo||{},a.isFmp4)this.trigger("fmp4"),a.timingInfo.start=a[lM(s.type)].start;else{var o=this.getCurrentMediaInfo_(),l=this.loaderType_==="main"&&o&&o.hasVideo,u;l&&(u=a.videoTimingInfo.start),a.timingInfo.start=this.trueSegmentStart_({currentStart:a.timingInfo.start,playlist:a.playlist,mediaIndex:a.mediaIndex,currentVideoTimestampOffset:this.sourceUpdater_.videoTimestampOffset(),useVideoTimingInfo:l,firstVideoFrameTimeForData:u,videoTimingInfo:a.videoTimingInfo,audioTimingInfo:a.audioTimingInfo})}if(this.updateAppendInitSegmentStatus(a,s.type),this.updateSourceBufferTimestampOffset_(a),a.isSyncRequest){this.updateTimingInfoEnd_(a),this.syncController_.saveSegmentTimingInfo({segmentInfo:a,shouldSaveTimelineMapping:this.loaderType_==="main"});var c=this.chooseNextRequest_();if(c.mediaIndex!==a.mediaIndex||c.partIndex!==a.partIndex){this.logger_("sync segment was incorrect, not appending");return}this.logger_("sync segment was correct, appending")}a.hasAppendedData_=!0,this.processMetadataQueue_(),this.appendData_(a,s)}}},t.updateAppendInitSegmentStatus=function(n,s){this.loaderType_==="main"&&typeof n.timestampOffset=="number"&&!n.changedTimestampOffset&&(this.appendInitSegment_={audio:!0,video:!0}),this.playlistOfLastInitSegment_[s]!==n.playlist&&(this.appendInitSegment_[s]=!0)},t.getInitSegmentAndUpdateState_=function(n){var s=n.type,a=n.initSegment,o=n.map,l=n.playlist;if(o){var u=nx(o);if(this.activeInitSegmentId_===u)return null;a=this.initSegmentForMap(o,!0).bytes,this.activeInitSegmentId_=u}return a&&this.appendInitSegment_[s]?(this.playlistOfLastInitSegment_[s]=l,this.appendInitSegment_[s]=!1,this.activeInitSegmentId_=null,a):null},t.handleQuotaExceededError_=function(n,s){var a=this,o=n.segmentInfo,l=n.type,u=n.bytes,c=this.sourceUpdater_.audioBuffered(),h=this.sourceUpdater_.videoBuffered();c.length>1&&this.logger_("On QUOTA_EXCEEDED_ERR, found gaps in the audio buffer: "+lh(c).join(", ")),h.length>1&&this.logger_("On QUOTA_EXCEEDED_ERR, found gaps in the video buffer: "+lh(h).join(", "));var m=c.length?c.start(0):0,g=c.length?c.end(c.length-1):0,y=h.length?h.start(0):0,_=h.length?h.end(h.length-1):0;if(g-m<=Mm&&_-y<=Mm){this.logger_("On QUOTA_EXCEEDED_ERR, single segment too large to append to buffer, triggering an error. "+("Appended byte length: "+u.byteLength+", ")+("audio buffer: "+lh(c).join(", ")+", ")+("video buffer: "+lh(h).join(", ")+", ")),this.error({message:"Quota exceeded error with append of a single segment of content",excludeUntil:1/0}),this.trigger("error");return}this.waitingOnRemove_=!0,this.callQueue_.push(this.appendToSourceBuffer_.bind(this,{segmentInfo:o,type:l,bytes:u}));var T=this.currentTime_(),E=T-Mm;this.logger_("On QUOTA_EXCEEDED_ERR, removing audio/video from 0 to "+E),this.remove(0,E,function(){a.logger_("On QUOTA_EXCEEDED_ERR, retrying append in "+Mm+"s"),a.waitingOnRemove_=!1,a.quotaExceededErrorRetryTimeout_=X.setTimeout(function(){a.logger_("On QUOTA_EXCEEDED_ERR, re-processing call queue"),a.quotaExceededErrorRetryTimeout_=null,a.processCallQueue_()},Mm*1e3)},!0)},t.handleAppendError_=function(n,s){var a=n.segmentInfo,o=n.type,l=n.bytes;if(s){if(s.code===w$){this.handleQuotaExceededError_({segmentInfo:a,type:o,bytes:l});return}this.logger_("Received non QUOTA_EXCEEDED_ERR on append",s),this.error(o+" append of "+l.length+"b failed for segment "+("#"+a.mediaIndex+" in playlist "+a.playlist.id)),this.trigger("appenderror")}},t.appendToSourceBuffer_=function(n){var s=n.segmentInfo,a=n.type,o=n.initSegment,l=n.data,u=n.bytes;if(!u){var c=[l],h=l.byteLength;o&&(c.unshift(o),h+=o.byteLength),u=tme({bytes:h,segments:c})}this.sourceUpdater_.appendBuffer({segmentInfo:s,type:a,bytes:u},this.handleAppendError_.bind(this,{segmentInfo:s,type:a,bytes:u}))},t.handleSegmentTimingInfo_=function(n,s,a){if(!(!this.pendingSegment_||s!==this.pendingSegment_.requestId)){var o=this.pendingSegment_.segment,l=n+"TimingInfo";o[l]||(o[l]={}),o[l].transmuxerPrependedSeconds=a.prependedContentDuration||0,o[l].transmuxedPresentationStart=a.start.presentation,o[l].transmuxedDecodeStart=a.start.decode,o[l].transmuxedPresentationEnd=a.end.presentation,o[l].transmuxedDecodeEnd=a.end.decode,o[l].baseMediaDecodeTime=a.baseMediaDecodeTime}},t.appendData_=function(n,s){var a=s.type,o=s.data;if(!(!o||!o.byteLength)&&!(a==="audio"&&this.audioDisabled_)){var l=this.getInitSegmentAndUpdateState_({type:a,initSegment:s.initSegment,playlist:n.playlist,map:n.isFmp4?n.segment.map:null});this.appendToSourceBuffer_({segmentInfo:n,type:a,initSegment:l,data:o})}},t.loadSegment_=function(n){var s=this;if(this.state="WAITING",this.pendingSegment_=n,this.trimBackBuffer_(n),typeof n.timestampOffset=="number"&&this.transmuxer_&&this.transmuxer_.postMessage({action:"clearAllMp4Captions"}),!this.hasEnoughInfoToLoad_()){this.loadQueue_.push(function(){var a=Jt({},n,{forceTimestampOffset:!0});Jt(n,s.generateSegmentInfo_(a)),s.isPendingTimestampOffset_=!1,s.updateTransmuxerAndRequestSegment_(n)});return}this.updateTransmuxerAndRequestSegment_(n)},t.updateTransmuxerAndRequestSegment_=function(n){var s=this;this.shouldUpdateTransmuxerTimestampOffset_(n.timestampOffset)&&(this.gopBuffer_.length=0,n.gopsToAlignWith=[],this.timeMapping_=0,this.transmuxer_.postMessage({action:"reset"}),this.transmuxer_.postMessage({action:"setTimestampOffset",timestampOffset:n.timestampOffset}));var a=this.createSimplifiedSegmentObj_(n),o=this.isEndOfStream_(n.mediaIndex,n.playlist,n.partIndex),l=this.mediaIndex!==null,u=n.timeline!==this.currentTimeline_&&n.timeline>0,c=o||l&&u;this.logger_("Requesting "+yf(n)),a.map&&!a.map.bytes&&(this.logger_("going to request init segment."),this.appendInitSegment_={video:!0,audio:!0}),n.abortRequests=Gpe({xhr:this.vhs_.xhr,xhrOptions:this.xhrOptions_,decryptionWorker:this.decrypter_,segment:a,abortFn:this.handleAbort_.bind(this,n),progressFn:this.handleProgress_.bind(this),trackInfoFn:this.handleTrackInfo_.bind(this),timingInfoFn:this.handleTimingInfo_.bind(this),videoSegmentTimingInfoFn:this.handleSegmentTimingInfo_.bind(this,"video",n.requestId),audioSegmentTimingInfoFn:this.handleSegmentTimingInfo_.bind(this,"audio",n.requestId),captionsFn:this.handleCaptions_.bind(this),isEndOfTimeline:c,endedTimelineFn:function(){s.logger_("received endedtimeline callback")},id3Fn:this.handleId3_.bind(this),dataFn:this.handleData_.bind(this),doneFn:this.segmentRequestFinished_.bind(this),onTransmuxerLog:function(m){var g=m.message,y=m.level,_=m.stream;s.logger_(yf(n)+" logged from transmuxer stream "+_+" as a "+y+": "+g)}})},t.trimBackBuffer_=function(n){var s=mme(this.seekable_(),this.currentTime_(),this.playlist_.targetDuration||10);s>0&&this.remove(0,s)},t.createSimplifiedSegmentObj_=function(n){var s=n.segment,a=n.part,o={resolvedUri:a?a.resolvedUri:s.resolvedUri,byterange:a?a.byterange:s.byterange,requestId:n.requestId,transmuxer:n.transmuxer,audioAppendStart:n.audioAppendStart,gopsToAlignWith:n.gopsToAlignWith,part:n.part},l=n.playlist.segments[n.mediaIndex-1];if(l&&l.timeline===s.timeline&&(l.videoTimingInfo?o.baseStartTime=l.videoTimingInfo.transmuxedDecodeEnd:l.audioTimingInfo&&(o.baseStartTime=l.audioTimingInfo.transmuxedDecodeEnd)),s.key){var u=s.key.iv||new Uint32Array([0,0,0,n.mediaIndex+n.playlist.mediaSequence]);o.key=this.segmentKey(s.key),o.key.iv=u}return s.map&&(o.map=this.initSegmentForMap(s.map)),o},t.saveTransferStats_=function(n){this.mediaRequests+=1,n&&(this.mediaBytesTransferred+=n.bytesReceived,this.mediaTransferDuration+=n.roundTripTime)},t.saveBandwidthRelatedStats_=function(n,s){if(this.pendingSegment_.byteLength=s.bytesReceived,n<Mv){this.logger_("Ignoring segment's bandwidth because its duration of "+n+(" is less than the min to record "+Mv));return}this.bandwidth=s.bandwidth,this.roundTrip=s.roundTripTime},t.handleTimeout_=function(){this.mediaRequestsTimedout+=1,this.bandwidth=1,this.roundTrip=NaN,this.trigger("bandwidthupdate"),this.trigger("timeout")},t.segmentRequestFinished_=function(n,s,a){if(this.callQueue_.length){this.callQueue_.push(this.segmentRequestFinished_.bind(this,n,s,a));return}if(this.saveTransferStats_(s.stats),!!this.pendingSegment_&&s.requestId===this.pendingSegment_.requestId){if(n){if(this.pendingSegment_=null,this.state="READY",n.code===su.ABORTED)return;if(this.pause(),n.code===su.TIMEOUT){this.handleTimeout_();return}this.mediaRequestsErrored+=1,this.error(n),this.trigger("error");return}var o=this.pendingSegment_;this.saveBandwidthRelatedStats_(o.duration,s.stats),o.endOfAllRequests=s.endOfAllRequests,a.gopInfo&&(this.gopBuffer_=ume(this.gopBuffer_,a.gopInfo,this.safeAppend_)),this.state="APPENDING",this.trigger("appending"),this.waitForAppendsToComplete_(o)}},t.setTimeMapping_=function(n){var s=this.syncController_.mappingForTimeline(n);s!==null&&(this.timeMapping_=s)},t.updateMediaSecondsLoaded_=function(n){typeof n.start=="number"&&typeof n.end=="number"?this.mediaSecondsLoaded+=n.end-n.start:this.mediaSecondsLoaded+=n.duration},t.shouldUpdateTransmuxerTimestampOffset_=function(n){return n===null?!1:this.loaderType_==="main"&&n!==this.sourceUpdater_.videoTimestampOffset()||!this.audioDisabled_&&n!==this.sourceUpdater_.audioTimestampOffset()},t.trueSegmentStart_=function(n){var s=n.currentStart,a=n.playlist,o=n.mediaIndex,l=n.firstVideoFrameTimeForData,u=n.currentVideoTimestampOffset,c=n.useVideoTimingInfo,h=n.videoTimingInfo,m=n.audioTimingInfo;if(typeof s<"u")return s;if(!c)return m.start;var g=a.segments[o-1];return o===0||!g||typeof g.start>"u"||g.end!==l+u?l:h.start},t.waitForAppendsToComplete_=function(n){var s=this.getCurrentMediaInfo_(n);if(!s){this.error({message:"No starting media returned, likely due to an unsupported media format.",blacklistDuration:1/0}),this.trigger("error");return}var a=s.hasAudio,o=s.hasVideo,l=s.isMuxed,u=this.loaderType_==="main"&&o,c=!this.audioDisabled_&&a&&!l;if(n.waitingOnAppends=0,!n.hasAppendedData_){!n.timingInfo&&typeof n.timestampOffset=="number"&&(this.isPendingTimestampOffset_=!0),n.timingInfo={start:0},n.waitingOnAppends++,this.isPendingTimestampOffset_||(this.updateSourceBufferTimestampOffset_(n),this.processMetadataQueue_()),this.checkAppendsDone_(n);return}u&&n.waitingOnAppends++,c&&n.waitingOnAppends++,u&&this.sourceUpdater_.videoQueueCallback(this.checkAppendsDone_.bind(this,n)),c&&this.sourceUpdater_.audioQueueCallback(this.checkAppendsDone_.bind(this,n))},t.checkAppendsDone_=function(n){this.checkForAbort_(n.requestId)||(n.waitingOnAppends--,n.waitingOnAppends===0&&this.handleAppendsDone_())},t.checkForIllegalMediaSwitch=function(n){var s=pme(this.loaderType_,this.getCurrentMediaInfo_(),n);return s?(this.error({message:s,blacklistDuration:1/0}),this.trigger("error"),!0):!1},t.updateSourceBufferTimestampOffset_=function(n){if(!(n.timestampOffset===null||typeof n.timingInfo.start!="number"||n.changedTimestampOffset||this.loaderType_!=="main")){var s=!1;n.timestampOffset-=this.getSegmentStartTimeForTimestampOffsetCalculation_({videoTimingInfo:n.segment.videoTimingInfo,audioTimingInfo:n.segment.audioTimingInfo,timingInfo:n.timingInfo}),n.changedTimestampOffset=!0,n.timestampOffset!==this.sourceUpdater_.videoTimestampOffset()&&(this.sourceUpdater_.videoTimestampOffset(n.timestampOffset),s=!0),n.timestampOffset!==this.sourceUpdater_.audioTimestampOffset()&&(this.sourceUpdater_.audioTimestampOffset(n.timestampOffset),s=!0),s&&this.trigger("timestampoffset")}},t.getSegmentStartTimeForTimestampOffsetCalculation_=function(n){var s=n.videoTimingInfo,a=n.audioTimingInfo,o=n.timingInfo;return this.useDtsForTimestampOffset_?s&&typeof s.transmuxedDecodeStart=="number"?s.transmuxedDecodeStart:a&&typeof a.transmuxedDecodeStart=="number"?a.transmuxedDecodeStart:o.start:o.start},t.updateTimingInfoEnd_=function(n){n.timingInfo=n.timingInfo||{};var s=this.getMediaInfo_(),a=this.loaderType_==="main"&&s&&s.hasVideo,o=a&&n.videoTimingInfo?n.videoTimingInfo:n.audioTimingInfo;o&&(n.timingInfo.end=typeof o.end=="number"?o.end:o.start+n.duration)},t.handleAppendsDone_=function(){if(this.pendingSegment_&&this.trigger("appendsdone"),!this.pendingSegment_){this.state="READY",this.paused()||this.monitorBuffer_();return}var n=this.pendingSegment_;this.updateTimingInfoEnd_(n),this.shouldSaveSegmentTimingInfo_&&this.syncController_.saveSegmentTimingInfo({segmentInfo:n,shouldSaveTimelineMapping:this.loaderType_==="main"});var s=yme(n,this.sourceType_);if(s&&(s.severity==="warn"?Re.log.warn(s.message):this.logger_(s.message)),this.recordThroughput_(n),this.pendingSegment_=null,this.state="READY",n.isSyncRequest&&(this.trigger("syncinfoupdate"),!n.hasAppendedData_)){this.logger_("Throwing away un-appended sync request "+yf(n));return}this.logger_("Appended "+yf(n)),this.addSegmentMetadataCue_(n),this.fetchAtBuffer_=!0,this.currentTimeline_!==n.timeline&&(this.timelineChangeController_.lastTimelineChange({type:this.loaderType_,from:this.currentTimeline_,to:n.timeline}),this.loaderType_==="main"&&!this.audioDisabled_&&this.timelineChangeController_.lastTimelineChange({type:"audio",from:this.currentTimeline_,to:n.timeline})),this.currentTimeline_=n.timeline,this.trigger("syncinfoupdate");var a=n.segment,o=n.part,l=a.end&&this.currentTime_()-a.end>n.playlist.targetDuration*3,u=o&&o.end&&this.currentTime_()-o.end>n.playlist.partTargetDuration*3;if(l||u){this.logger_("bad "+(l?"segment":"part")+" "+yf(n)),this.resetEverything();return}var c=this.mediaIndex!==null;c&&this.trigger("bandwidthupdate"),this.trigger("progress"),this.mediaIndex=n.mediaIndex,this.partIndex=n.partIndex,this.isEndOfStream_(n.mediaIndex,n.playlist,n.partIndex)&&this.endOfStream(),this.trigger("appended"),n.hasAppendedData_&&this.mediaAppends++,this.paused()||this.monitorBuffer_()},t.recordThroughput_=function(n){if(n.duration<Mv){this.logger_("Ignoring segment's throughput because its duration of "+n.duration+(" is less than the min to record "+Mv));return}var s=this.throughput.rate,a=Date.now()-n.endOfAllRequests+1,o=Math.floor(n.byteLength/a*8*1e3);this.throughput.rate+=(o-s)/++this.throughput.count},t.addSegmentMetadataCue_=function(n){if(this.segmentMetadataTrack_){var s=n.segment,a=s.start,o=s.end;if(!(!oM(a)||!oM(o))){Jm(a,o,this.segmentMetadataTrack_);var l=X.WebKitDataCue||X.VTTCue,u={custom:s.custom,dateTimeObject:s.dateTimeObject,dateTimeString:s.dateTimeString,bandwidth:n.playlist.attributes.BANDWIDTH,resolution:n.playlist.attributes.RESOLUTION,codecs:n.playlist.attributes.CODECS,byteLength:n.byteLength,uri:n.uri,timeline:n.timeline,playlist:n.playlist.id,start:a,end:o},c=JSON.stringify(u),h=new l(a,o,c);h.value=u,this.segmentMetadataTrack_.addCue(h)}}},e})(Re.EventTarget);function tc(){}var k$=function(e){return typeof e!="string"?e:e.replace(/./,function(t){return t.toUpperCase()})},_me=["video","audio"],kE=function(e,t){var r=t[e+"Buffer"];return r&&r.updating||t.queuePending[e]},xme=function(e,t){for(var r=0;r<t.length;r++){var n=t[r];if(n.type==="mediaSource")return null;if(n.type===e)return r}return null},xk=function i(e,t){if(t.queue.length!==0){var r=0,n=t.queue[r];if(n.type==="mediaSource"){!t.updating()&&t.mediaSource.readyState!=="closed"&&(t.queue.shift(),n.action(t),n.doneFn&&n.doneFn(),i("audio",t),i("video",t));return}if(e!=="mediaSource"&&!(!t.ready()||t.mediaSource.readyState==="closed"||kE(e,t))){if(n.type!==e){if(r=xme(e,t.queue),r===null)return;n=t.queue[r]}if(t.queue.splice(r,1),t.queuePending[e]=n,n.action(e,t),!n.doneFn){t.queuePending[e]=null,i(e,t);return}}}},A$=function(e,t){var r=t[e+"Buffer"],n=k$(e);r&&(r.removeEventListener("updateend",t["on"+n+"UpdateEnd_"]),r.removeEventListener("error",t["on"+n+"Error_"]),t.codecs[e]=null,t[e+"Buffer"]=null)},Kl=function(e,t){return e&&t&&Array.prototype.indexOf.call(e.sourceBuffers,t)!==-1},Qa={appendBuffer:function(e,t,r){return function(n,s){var a=s[n+"Buffer"];if(Kl(s.mediaSource,a)){s.logger_("Appending segment "+t.mediaIndex+"'s "+e.length+" bytes to "+n+"Buffer");try{a.appendBuffer(e)}catch(o){s.logger_("Error with code "+o.code+" "+(o.code===w$?"(QUOTA_EXCEEDED_ERR) ":"")+("when appending segment "+t.mediaIndex+" to "+n+"Buffer")),s.queuePending[n]=null,r(o)}}}},remove:function(e,t){return function(r,n){var s=n[r+"Buffer"];if(Kl(n.mediaSource,s)){n.logger_("Removing "+e+" to "+t+" from "+r+"Buffer");try{s.remove(e,t)}catch{n.logger_("Remove "+e+" to "+t+" from "+r+"Buffer failed")}}}},timestampOffset:function(e){return function(t,r){var n=r[t+"Buffer"];Kl(r.mediaSource,n)&&(r.logger_("Setting "+t+"timestampOffset to "+e),n.timestampOffset=e)}},callback:function(e){return function(t,r){e()}},endOfStream:function(e){return function(t){if(t.mediaSource.readyState==="open"){t.logger_("Calling mediaSource endOfStream("+(e||"")+")");try{t.mediaSource.endOfStream(e)}catch(r){Re.log.warn("Failed to call media source endOfStream",r)}}}},duration:function(e){return function(t){t.logger_("Setting mediaSource duration to "+e);try{t.mediaSource.duration=e}catch(r){Re.log.warn("Failed to set media source duration",r)}}},abort:function(){return function(e,t){if(t.mediaSource.readyState==="open"){var r=t[e+"Buffer"];if(Kl(t.mediaSource,r)){t.logger_("calling abort on "+e+"Buffer");try{r.abort()}catch(n){Re.log.warn("Failed to abort on "+e+"Buffer",n)}}}}},addSourceBuffer:function(e,t){return function(r){var n=k$(e),s=R0(t);r.logger_("Adding "+e+"Buffer with codec "+t+" to mediaSource");var a=r.mediaSource.addSourceBuffer(s);a.addEventListener("updateend",r["on"+n+"UpdateEnd_"]),a.addEventListener("error",r["on"+n+"Error_"]),r.codecs[e]=t,r[e+"Buffer"]=a}},removeSourceBuffer:function(e){return function(t){var r=t[e+"Buffer"];if(A$(e,t),!!Kl(t.mediaSource,r)){t.logger_("Removing "+e+"Buffer with codec "+t.codecs[e]+" from mediaSource");try{t.mediaSource.removeSourceBuffer(r)}catch(n){Re.log.warn("Failed to removeSourceBuffer "+e+"Buffer",n)}}}},changeType:function(e){return function(t,r){var n=r[t+"Buffer"],s=R0(e);if(Kl(r.mediaSource,n)&&r.codecs[t]!==e){r.logger_("changing "+t+"Buffer codec from "+r.codecs[t]+" to "+e);try{n.changeType(s),r.codecs[t]=e}catch(a){Re.log.warn("Failed to changeType on "+t+"Buffer",a)}}}}},Ja=function(e){var t=e.type,r=e.sourceUpdater,n=e.action,s=e.doneFn,a=e.name;r.queue.push({type:t,action:n,doneFn:s,name:a}),xk(t,r)},dM=function(e,t){return function(r){if(t.queuePending[e]){var n=t.queuePending[e].doneFn;t.queuePending[e]=null,n&&n(t[e+"Error_"])}xk(e,t)}},I$=(function(i){Ft(e,i);function e(r){var n;return n=i.call(this)||this,n.mediaSource=r,n.sourceopenListener_=function(){return xk("mediaSource",je(n))},n.mediaSource.addEventListener("sourceopen",n.sourceopenListener_),n.logger_=xl("SourceUpdater"),n.audioTimestampOffset_=0,n.videoTimestampOffset_=0,n.queue=[],n.queuePending={audio:null,video:null},n.delayedAudioAppendQueue_=[],n.videoAppendQueued_=!1,n.codecs={},n.onVideoUpdateEnd_=dM("video",je(n)),n.onAudioUpdateEnd_=dM("audio",je(n)),n.onVideoError_=function(s){n.videoError_=s},n.onAudioError_=function(s){n.audioError_=s},n.createdSourceBuffers_=!1,n.initializedEme_=!1,n.triggeredReady_=!1,n}var t=e.prototype;return t.initializedEme=function(){this.initializedEme_=!0,this.triggerReady()},t.hasCreatedSourceBuffers=function(){return this.createdSourceBuffers_},t.hasInitializedAnyEme=function(){return this.initializedEme_},t.ready=function(){return this.hasCreatedSourceBuffers()&&this.hasInitializedAnyEme()},t.createSourceBuffers=function(n){this.hasCreatedSourceBuffers()||(this.addOrChangeSourceBuffers(n),this.createdSourceBuffers_=!0,this.trigger("createdsourcebuffers"),this.triggerReady())},t.triggerReady=function(){this.ready()&&!this.triggeredReady_&&(this.triggeredReady_=!0,this.trigger("ready"))},t.addSourceBuffer=function(n,s){Ja({type:"mediaSource",sourceUpdater:this,action:Qa.addSourceBuffer(n,s),name:"addSourceBuffer"})},t.abort=function(n){Ja({type:n,sourceUpdater:this,action:Qa.abort(n),name:"abort"})},t.removeSourceBuffer=function(n){if(!this.canRemoveSourceBuffer()){Re.log.error("removeSourceBuffer is not supported!");return}Ja({type:"mediaSource",sourceUpdater:this,action:Qa.removeSourceBuffer(n),name:"removeSourceBuffer"})},t.canRemoveSourceBuffer=function(){return!Re.browser.IE_VERSION&&!Re.browser.IS_FIREFOX&&X.MediaSource&&X.MediaSource.prototype&&typeof X.MediaSource.prototype.removeSourceBuffer=="function"},e.canChangeType=function(){return X.SourceBuffer&&X.SourceBuffer.prototype&&typeof X.SourceBuffer.prototype.changeType=="function"},t.canChangeType=function(){return this.constructor.canChangeType()},t.changeType=function(n,s){if(!this.canChangeType()){Re.log.error("changeType is not supported!");return}Ja({type:n,sourceUpdater:this,action:Qa.changeType(s),name:"changeType"})},t.addOrChangeSourceBuffers=function(n){var s=this;if(!n||typeof n!="object"||Object.keys(n).length===0)throw new Error("Cannot addOrChangeSourceBuffers to undefined codecs");Object.keys(n).forEach(function(a){var o=n[a];if(!s.hasCreatedSourceBuffers())return s.addSourceBuffer(a,o);s.canChangeType()&&s.changeType(a,o)})},t.appendBuffer=function(n,s){var a=this,o=n.segmentInfo,l=n.type,u=n.bytes;if(this.processedAppend_=!0,l==="audio"&&this.videoBuffer&&!this.videoAppendQueued_){this.delayedAudioAppendQueue_.push([n,s]),this.logger_("delayed audio append of "+u.length+" until video append");return}var c=s;if(Ja({type:l,sourceUpdater:this,action:Qa.appendBuffer(u,o||{mediaIndex:-1},c),doneFn:s,name:"appendBuffer"}),l==="video"){if(this.videoAppendQueued_=!0,!this.delayedAudioAppendQueue_.length)return;var h=this.delayedAudioAppendQueue_.slice();this.logger_("queuing delayed audio "+h.length+" appendBuffers"),this.delayedAudioAppendQueue_.length=0,h.forEach(function(m){a.appendBuffer.apply(a,m)})}},t.audioBuffered=function(){return Kl(this.mediaSource,this.audioBuffer)&&this.audioBuffer.buffered?this.audioBuffer.buffered:Re.createTimeRange()},t.videoBuffered=function(){return Kl(this.mediaSource,this.videoBuffer)&&this.videoBuffer.buffered?this.videoBuffer.buffered:Re.createTimeRange()},t.buffered=function(){var n=Kl(this.mediaSource,this.videoBuffer)?this.videoBuffer:null,s=Kl(this.mediaSource,this.audioBuffer)?this.audioBuffer:null;return s&&!n?this.audioBuffered():n&&!s?this.videoBuffered():Nfe(this.audioBuffered(),this.videoBuffered())},t.setDuration=function(n,s){s===void 0&&(s=tc),Ja({type:"mediaSource",sourceUpdater:this,action:Qa.duration(n),name:"duration",doneFn:s})},t.endOfStream=function(n,s){n===void 0&&(n=null),s===void 0&&(s=tc),typeof n!="string"&&(n=void 0),Ja({type:"mediaSource",sourceUpdater:this,action:Qa.endOfStream(n),name:"endOfStream",doneFn:s})},t.removeAudio=function(n,s,a){if(a===void 0&&(a=tc),!this.audioBuffered().length||this.audioBuffered().end(0)===0){a();return}Ja({type:"audio",sourceUpdater:this,action:Qa.remove(n,s),doneFn:a,name:"remove"})},t.removeVideo=function(n,s,a){if(a===void 0&&(a=tc),!this.videoBuffered().length||this.videoBuffered().end(0)===0){a();return}Ja({type:"video",sourceUpdater:this,action:Qa.remove(n,s),doneFn:a,name:"remove"})},t.updating=function(){return!!(kE("audio",this)||kE("video",this))},t.audioTimestampOffset=function(n){return typeof n<"u"&&this.audioBuffer&&this.audioTimestampOffset_!==n&&(Ja({type:"audio",sourceUpdater:this,action:Qa.timestampOffset(n),name:"timestampOffset"}),this.audioTimestampOffset_=n),this.audioTimestampOffset_},t.videoTimestampOffset=function(n){return typeof n<"u"&&this.videoBuffer&&this.videoTimestampOffset!==n&&(Ja({type:"video",sourceUpdater:this,action:Qa.timestampOffset(n),name:"timestampOffset"}),this.videoTimestampOffset_=n),this.videoTimestampOffset_},t.audioQueueCallback=function(n){this.audioBuffer&&Ja({type:"audio",sourceUpdater:this,action:Qa.callback(n),name:"callback"})},t.videoQueueCallback=function(n){this.videoBuffer&&Ja({type:"video",sourceUpdater:this,action:Qa.callback(n),name:"callback"})},t.dispose=function(){var n=this;this.trigger("dispose"),_me.forEach(function(s){n.abort(s),n.canRemoveSourceBuffer()?n.removeSourceBuffer(s):n[s+"QueueCallback"](function(){return A$(s,n)})}),this.videoAppendQueued_=!1,this.delayedAudioAppendQueue_.length=0,this.sourceopenListener_&&this.mediaSource.removeEventListener("sourceopen",this.sourceopenListener_),this.off()},e})(Re.EventTarget),hM=function(e){return decodeURIComponent(escape(String.fromCharCode.apply(null,e)))},fM=new Uint8Array(`

`.split("").map(function(i){return i.charCodeAt(0)})),Tme=(function(i){Ft(e,i);function e(){return i.call(this,"Trying to parse received VTT cues, but there is no WebVTT. Make sure vtt.js is loaded.")||this}return e})(lE(Error)),bme=(function(i){Ft(e,i);function e(r,n){var s;return n===void 0&&(n={}),s=i.call(this,r,n)||this,s.mediaSource_=null,s.subtitlesTrack_=null,s.loaderType_="subtitle",s.featuresNativeTextTracks_=r.featuresNativeTextTracks,s.loadVttJs=r.loadVttJs,s.shouldSaveSegmentTimingInfo_=!1,s}var t=e.prototype;return t.createTransmuxer_=function(){return null},t.buffered_=function(){if(!this.subtitlesTrack_||!this.subtitlesTrack_.cues||!this.subtitlesTrack_.cues.length)return Re.createTimeRanges();var n=this.subtitlesTrack_.cues,s=n[0].startTime,a=n[n.length-1].startTime;return Re.createTimeRanges([[s,a]])},t.initSegmentForMap=function(n,s){if(s===void 0&&(s=!1),!n)return null;var a=nx(n),o=this.initSegments_[a];if(s&&!o&&n.bytes){var l=fM.byteLength+n.bytes.byteLength,u=new Uint8Array(l);u.set(n.bytes),u.set(fM,n.bytes.byteLength),this.initSegments_[a]=o={resolvedUri:n.resolvedUri,byterange:n.byterange,bytes:u}}return o||n},t.couldBeginLoading_=function(){return this.playlist_&&this.subtitlesTrack_&&!this.paused()},t.init_=function(){return this.state="READY",this.resetEverything(),this.monitorBuffer_()},t.track=function(n){return typeof n>"u"?this.subtitlesTrack_:(this.subtitlesTrack_=n,this.state==="INIT"&&this.couldBeginLoading_()&&this.init_(),this.subtitlesTrack_)},t.remove=function(n,s){Jm(n,s,this.subtitlesTrack_)},t.fillBuffer_=function(){var n=this,s=this.chooseNextRequest_();if(s){if(this.syncController_.timestampOffsetForTimeline(s.timeline)===null){var a=function(){n.state="READY",n.paused()||n.monitorBuffer_()};this.syncController_.one("timestampoffset",a),this.state="WAITING_ON_TIMELINE";return}this.loadSegment_(s)}},t.timestampOffsetForSegment_=function(){return null},t.chooseNextRequest_=function(){return this.skipEmptySegments_(i.prototype.chooseNextRequest_.call(this))},t.skipEmptySegments_=function(n){for(;n&&n.segment.empty;){if(n.mediaIndex+1>=n.playlist.segments.length){n=null;break}n=this.generateSegmentInfo_({playlist:n.playlist,mediaIndex:n.mediaIndex+1,startOfSegment:n.startOfSegment+n.duration,isSyncRequest:n.isSyncRequest})}return n},t.stopForError=function(n){this.error(n),this.state="READY",this.pause(),this.trigger("error")},t.segmentRequestFinished_=function(n,s,a){var o=this;if(!this.subtitlesTrack_){this.state="READY";return}if(this.saveTransferStats_(s.stats),!this.pendingSegment_){this.state="READY",this.mediaRequestsAborted+=1;return}if(n){n.code===su.TIMEOUT&&this.handleTimeout_(),n.code===su.ABORTED?this.mediaRequestsAborted+=1:this.mediaRequestsErrored+=1,this.stopForError(n);return}var l=this.pendingSegment_;this.saveBandwidthRelatedStats_(l.duration,s.stats),s.key&&this.segmentKey(s.key,!0),this.state="APPENDING",this.trigger("appending");var u=l.segment;if(u.map&&(u.map.bytes=s.map.bytes),l.bytes=s.bytes,typeof X.WebVTT!="function"&&typeof this.loadVttJs=="function"){this.state="WAITING_ON_VTTJS",this.loadVttJs().then(function(){return o.segmentRequestFinished_(n,s,a)},function(){return o.stopForError({message:"Error loading vtt.js"})});return}u.requested=!0;try{this.parseVTTCues_(l)}catch(c){this.stopForError({message:c.message});return}if(this.updateTimeMapping_(l,this.syncController_.timelines[l.timeline],this.playlist_),l.cues.length?l.timingInfo={start:l.cues[0].startTime,end:l.cues[l.cues.length-1].endTime}:l.timingInfo={start:l.startOfSegment,end:l.startOfSegment+l.duration},l.isSyncRequest){this.trigger("syncinfoupdate"),this.pendingSegment_=null,this.state="READY";return}l.byteLength=l.bytes.byteLength,this.mediaSecondsLoaded+=u.duration,l.cues.forEach(function(c){o.subtitlesTrack_.addCue(o.featuresNativeTextTracks_?new X.VTTCue(c.startTime,c.endTime,c.text):c)}),ome(this.subtitlesTrack_),this.handleAppendsDone_()},t.handleData_=function(){},t.updateTimingInfoEnd_=function(){},t.parseVTTCues_=function(n){var s,a=!1;if(typeof X.WebVTT!="function")throw new Tme;typeof X.TextDecoder=="function"?s=new X.TextDecoder("utf8"):(s=X.WebVTT.StringDecoder(),a=!0);var o=new X.WebVTT.Parser(X,X.vttjs,s);if(n.cues=[],n.timestampmap={MPEGTS:0,LOCAL:0},o.oncue=n.cues.push.bind(n.cues),o.ontimestampmap=function(c){n.timestampmap=c},o.onparsingerror=function(c){Re.log.warn("Error encountered when parsing cues: "+c.message)},n.segment.map){var l=n.segment.map.bytes;a&&(l=hM(l)),o.parse(l)}var u=n.bytes;a&&(u=hM(u)),o.parse(u),o.flush()},t.updateTimeMapping_=function(n,s,a){var o=n.segment;if(s){if(!n.cues.length){o.empty=!0;return}var l=n.timestampmap,u=l.MPEGTS/W_.ONE_SECOND_IN_TS-l.LOCAL+s.mapping;if(n.cues.forEach(function(m){m.startTime+=u,m.endTime+=u}),!a.syncInfo){var c=n.cues[0].startTime,h=n.cues[n.cues.length-1].startTime;a.syncInfo={mediaSequence:a.mediaSequence+n.mediaIndex,time:Math.min(c,h-o.duration)}}}},e})(wE),Sme=function(e,t){for(var r=e.cues,n=0;n<r.length;n++){var s=r[n];if(t>=s.adStartTime&&t<=s.adEndTime)return s}return null},Cme=function(e,t,r){if(r===void 0&&(r=0),!!e.segments)for(var n=r,s,a=0;a<e.segments.length;a++){var o=e.segments[a];if(s||(s=Sme(t,n+o.duration/2)),s){if("cueIn"in o){s.endTime=n,s.adEndTime=n,n+=o.duration,s=null;continue}if(n<s.endTime){n+=o.duration;continue}s.endTime+=o.duration}else if("cueOut"in o&&(s=new X.VTTCue(n,n+o.duration,o.cueOut),s.adStartTime=n,s.adEndTime=n+parseFloat(o.cueOut),t.addCue(s)),"cueOutCont"in o){var l=o.cueOutCont.split("/").map(parseFloat),u=l[0],c=l[1];s=new X.VTTCue(n,n+o.duration,""),s.adStartTime=n-u,s.adEndTime=s.adStartTime+c,t.addCue(s)}n+=o.duration}},Eme=86400,pM=[{name:"VOD",run:function(e,t,r,n,s){if(r!==1/0){var a={time:0,segmentIndex:0,partIndex:null};return a}return null}},{name:"ProgramDateTime",run:function(e,t,r,n,s){if(!Object.keys(e.timelineToDatetimeMappings).length)return null;var a=null,o=null,l=yE(t);s=s||0;for(var u=0;u<l.length;u++){var c=t.endList||s===0?u:l.length-(u+1),h=l[c],m=h.segment,g=e.timelineToDatetimeMappings[m.timeline];if(!(!g||!m.dateTimeObject)){var y=m.dateTimeObject.getTime()/1e3,_=y+g;if(m.parts&&typeof h.partIndex=="number")for(var T=0;T<h.partIndex;T++)_+=m.parts[T].duration;var E=Math.abs(s-_);if(o!==null&&(E===0||o<E))break;o=E,a={time:_,segmentIndex:h.segmentIndex,partIndex:h.partIndex}}}return a}},{name:"Segment",run:function(e,t,r,n,s){var a=null,o=null;s=s||0;for(var l=yE(t),u=0;u<l.length;u++){var c=t.endList||s===0?u:l.length-(u+1),h=l[c],m=h.segment,g=h.part&&h.part.start||m&&m.start;if(m.timeline===n&&typeof g<"u"){var y=Math.abs(s-g);if(o!==null&&o<y)break;(!a||o===null||o>=y)&&(o=y,a={time:g,segmentIndex:h.segmentIndex,partIndex:h.partIndex})}}return a}},{name:"Discontinuity",run:function(e,t,r,n,s){var a=null;if(s=s||0,t.discontinuityStarts&&t.discontinuityStarts.length)for(var o=null,l=0;l<t.discontinuityStarts.length;l++){var u=t.discontinuityStarts[l],c=t.discontinuitySequence+l+1,h=e.discontinuities[c];if(h){var m=Math.abs(s-h.time);if(o!==null&&o<m)break;(!a||o===null||o>=m)&&(o=m,a={time:h.time,segmentIndex:u,partIndex:null})}}return a}},{name:"Playlist",run:function(e,t,r,n,s){if(t.syncInfo){var a={time:t.syncInfo.time,segmentIndex:t.syncInfo.mediaSequence-t.mediaSequence,partIndex:null};return a}return null}}],wme=(function(i){Ft(e,i);function e(r){var n;return n=i.call(this)||this,n.timelines=[],n.discontinuities=[],n.timelineToDatetimeMappings={},n.logger_=xl("SyncController"),n}var t=e.prototype;return t.getSyncPoint=function(n,s,a,o){var l=this.runStrategies_(n,s,a,o);return l.length?this.selectSyncPoint_(l,{key:"time",value:o}):null},t.getExpiredTime=function(n,s){if(!n||!n.segments)return null;var a=this.runStrategies_(n,s,n.discontinuitySequence,0);if(!a.length)return null;var o=this.selectSyncPoint_(a,{key:"segmentIndex",value:0});return o.segmentIndex>0&&(o.time*=-1),Math.abs(o.time+p0({defaultDuration:n.targetDuration,durationList:n.segments,startIndex:o.segmentIndex,endIndex:0}))},t.runStrategies_=function(n,s,a,o){for(var l=[],u=0;u<pM.length;u++){var c=pM[u],h=c.run(this,n,s,a,o);h&&(h.strategy=c.name,l.push({strategy:c.name,syncPoint:h}))}return l},t.selectSyncPoint_=function(n,s){for(var a=n[0].syncPoint,o=Math.abs(n[0].syncPoint[s.key]-s.value),l=n[0].strategy,u=1;u<n.length;u++){var c=Math.abs(n[u].syncPoint[s.key]-s.value);c<o&&(o=c,a=n[u].syncPoint,l=n[u].strategy)}return this.logger_("syncPoint for ["+s.key+": "+s.value+"] chosen with strategy"+(" ["+l+"]: [time:"+a.time+",")+(" segmentIndex:"+a.segmentIndex)+(typeof a.partIndex=="number"?",partIndex:"+a.partIndex:"")+"]"),a},t.saveExpiredSegmentInfo=function(n,s){var a=s.mediaSequence-n.mediaSequence;if(a>Eme){Re.log.warn("Not saving expired segment info. Media sequence gap "+a+" is too large.");return}for(var o=a-1;o>=0;o--){var l=n.segments[o];if(l&&typeof l.start<"u"){s.syncInfo={mediaSequence:n.mediaSequence+o,time:l.start},this.logger_("playlist refresh sync: [time:"+s.syncInfo.time+","+(" mediaSequence: "+s.syncInfo.mediaSequence+"]")),this.trigger("syncinfoupdate");break}}},t.setDateTimeMappingForStart=function(n){if(this.timelineToDatetimeMappings={},n.segments&&n.segments.length&&n.segments[0].dateTimeObject){var s=n.segments[0],a=s.dateTimeObject.getTime()/1e3;this.timelineToDatetimeMappings[s.timeline]=-a}},t.saveSegmentTimingInfo=function(n){var s=n.segmentInfo,a=n.shouldSaveTimelineMapping,o=this.calculateSegmentTimeMapping_(s,s.timingInfo,a),l=s.segment;o&&(this.saveDiscontinuitySyncInfo_(s),s.playlist.syncInfo||(s.playlist.syncInfo={mediaSequence:s.playlist.mediaSequence+s.mediaIndex,time:l.start}));var u=l.dateTimeObject;l.discontinuity&&a&&u&&(this.timelineToDatetimeMappings[l.timeline]=-(u.getTime()/1e3))},t.timestampOffsetForTimeline=function(n){return typeof this.timelines[n]>"u"?null:this.timelines[n].time},t.mappingForTimeline=function(n){return typeof this.timelines[n]>"u"?null:this.timelines[n].mapping},t.calculateSegmentTimeMapping_=function(n,s,a){var o=n.segment,l=n.part,u=this.timelines[n.timeline],c,h;if(typeof n.timestampOffset=="number")u={time:n.startOfSegment,mapping:n.startOfSegment-s.start},a&&(this.timelines[n.timeline]=u,this.trigger("timestampoffset"),this.logger_("time mapping for timeline "+n.timeline+": "+("[time: "+u.time+"] [mapping: "+u.mapping+"]"))),c=n.startOfSegment,h=s.end+u.mapping;else if(u)c=s.start+u.mapping,h=s.end+u.mapping;else return!1;return l&&(l.start=c,l.end=h),(!o.start||c<o.start)&&(o.start=c),o.end=h,!0},t.saveDiscontinuitySyncInfo_=function(n){var s=n.playlist,a=n.segment;if(a.discontinuity)this.discontinuities[a.timeline]={time:a.start,accuracy:0};else if(s.discontinuityStarts&&s.discontinuityStarts.length)for(var o=0;o<s.discontinuityStarts.length;o++){var l=s.discontinuityStarts[o],u=s.discontinuitySequence+o+1,c=l-n.mediaIndex,h=Math.abs(c);if(!this.discontinuities[u]||this.discontinuities[u].accuracy>h){var m=void 0;c<0?m=a.start-p0({defaultDuration:s.targetDuration,durationList:s.segments,startIndex:n.mediaIndex,endIndex:l}):m=a.end+p0({defaultDuration:s.targetDuration,durationList:s.segments,startIndex:n.mediaIndex+1,endIndex:l}),this.discontinuities[u]={time:m,accuracy:h}}}},t.dispose=function(){this.trigger("dispose"),this.off()},e})(Re.EventTarget),kme=(function(i){Ft(e,i);function e(){var r;return r=i.call(this)||this,r.pendingTimelineChanges_={},r.lastTimelineChanges_={},r}var t=e.prototype;return t.clearPendingTimelineChange=function(n){this.pendingTimelineChanges_[n]=null,this.trigger("pendingtimelinechange")},t.pendingTimelineChange=function(n){var s=n.type,a=n.from,o=n.to;return typeof a=="number"&&typeof o=="number"&&(this.pendingTimelineChanges_[s]={type:s,from:a,to:o},this.trigger("pendingtimelinechange")),this.pendingTimelineChanges_[s]},t.lastTimelineChange=function(n){var s=n.type,a=n.from,o=n.to;return typeof a=="number"&&typeof o=="number"&&(this.lastTimelineChanges_[s]={type:s,from:a,to:o},delete this.pendingTimelineChanges_[s],this.trigger("timelinechange")),this.lastTimelineChanges_[s]},t.dispose=function(){this.trigger("dispose"),this.pendingTimelineChanges_={},this.lastTimelineChanges_={},this.off()},e})(Re.EventTarget),Ame=m$(g$(function(){var i=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function e(R,A,L){return L={path:A,exports:{},require:function(B,M){return t(B,M??L.path)}},R(L,L.exports),L.exports}function t(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}var r=e(function(R){function A(F,B){for(var M=0;M<B.length;M++){var k=B[M];k.enumerable=k.enumerable||!1,k.configurable=!0,"value"in k&&(k.writable=!0),Object.defineProperty(F,k.key,k)}}function L(F,B,M){return B&&A(F.prototype,B),M&&A(F,M),F}R.exports=L,R.exports.default=R.exports,R.exports.__esModule=!0}),n=e(function(R){function A(L,F){return R.exports=A=Object.setPrototypeOf||function(M,k){return M.__proto__=k,M},R.exports.default=R.exports,R.exports.__esModule=!0,A(L,F)}R.exports=A,R.exports.default=R.exports,R.exports.__esModule=!0}),s=e(function(R){function A(L,F){L.prototype=Object.create(F.prototype),L.prototype.constructor=L,n(L,F)}R.exports=A,R.exports.default=R.exports,R.exports.__esModule=!0}),a=(function(){function R(){this.listeners={}}var A=R.prototype;return A.on=function(F,B){this.listeners[F]||(this.listeners[F]=[]),this.listeners[F].push(B)},A.off=function(F,B){if(!this.listeners[F])return!1;var M=this.listeners[F].indexOf(B);return this.listeners[F]=this.listeners[F].slice(0),this.listeners[F].splice(M,1),M>-1},A.trigger=function(F){var B=this.listeners[F];if(B)if(arguments.length===2)for(var M=B.length,k=0;k<M;++k)B[k].call(this,arguments[1]);else for(var q=Array.prototype.slice.call(arguments,1),G=B.length,H=0;H<G;++H)B[H].apply(this,q)},A.dispose=function(){this.listeners={}},A.pipe=function(F){this.on("data",function(B){F.push(B)})},R})();/*! @name pkcs7 @version 1.0.4 @license Apache-2.0 */function o(R){return R.subarray(0,R.byteLength-R[R.byteLength-1])}/*! @name aes-decrypter @version 3.1.3 @license Apache-2.0 */var l=function(){var A=[[[],[],[],[],[]],[[],[],[],[],[]]],L=A[0],F=A[1],B=L[4],M=F[4],k,q,G,H=[],re=[],se,de,me,ue,oe,ce;for(k=0;k<256;k++)re[(H[k]=k<<1^(k>>7)*283)^k]=k;for(q=G=0;!B[q];q^=se||1,G=re[G]||1)for(ue=G^G<<1^G<<2^G<<3^G<<4,ue=ue>>8^ue&255^99,B[q]=ue,M[ue]=q,me=H[de=H[se=H[q]]],ce=me*16843009^de*65537^se*257^q*16843008,oe=H[ue]*257^ue*16843008,k=0;k<4;k++)L[k][q]=oe=oe<<24^oe>>>8,F[k][ue]=ce=ce<<24^ce>>>8;for(k=0;k<5;k++)L[k]=L[k].slice(0),F[k]=F[k].slice(0);return A},u=null,c=(function(){function R(L){u||(u=l()),this._tables=[[u[0][0].slice(),u[0][1].slice(),u[0][2].slice(),u[0][3].slice(),u[0][4].slice()],[u[1][0].slice(),u[1][1].slice(),u[1][2].slice(),u[1][3].slice(),u[1][4].slice()]];var F,B,M,k=this._tables[0][4],q=this._tables[1],G=L.length,H=1;if(G!==4&&G!==6&&G!==8)throw new Error("Invalid aes key size");var re=L.slice(0),se=[];for(this._key=[re,se],F=G;F<4*G+28;F++)M=re[F-1],(F%G===0||G===8&&F%G===4)&&(M=k[M>>>24]<<24^k[M>>16&255]<<16^k[M>>8&255]<<8^k[M&255],F%G===0&&(M=M<<8^M>>>24^H<<24,H=H<<1^(H>>7)*283)),re[F]=re[F-G]^M;for(B=0;F;B++,F--)M=re[B&3?F:F-4],F<=4||B<4?se[B]=M:se[B]=q[0][k[M>>>24]]^q[1][k[M>>16&255]]^q[2][k[M>>8&255]]^q[3][k[M&255]]}var A=R.prototype;return A.decrypt=function(F,B,M,k,q,G){var H=this._key[1],re=F^H[0],se=k^H[1],de=M^H[2],me=B^H[3],ue,oe,ce,te=H.length/4-2,fe,ye=4,Se=this._tables[1],ke=Se[0],qe=Se[1],vt=Se[2],et=Se[3],kt=Se[4];for(fe=0;fe<te;fe++)ue=ke[re>>>24]^qe[se>>16&255]^vt[de>>8&255]^et[me&255]^H[ye],oe=ke[se>>>24]^qe[de>>16&255]^vt[me>>8&255]^et[re&255]^H[ye+1],ce=ke[de>>>24]^qe[me>>16&255]^vt[re>>8&255]^et[se&255]^H[ye+2],me=ke[me>>>24]^qe[re>>16&255]^vt[se>>8&255]^et[de&255]^H[ye+3],ye+=4,re=ue,se=oe,de=ce;for(fe=0;fe<4;fe++)q[(3&-fe)+G]=kt[re>>>24]<<24^kt[se>>16&255]<<16^kt[de>>8&255]<<8^kt[me&255]^H[ye++],ue=re,re=se,se=de,de=me,me=ue},R})(),h=(function(R){s(A,R);function A(){var F;return F=R.call(this,a)||this,F.jobs=[],F.delay=1,F.timeout_=null,F}var L=A.prototype;return L.processJob_=function(){this.jobs.shift()(),this.jobs.length?this.timeout_=setTimeout(this.processJob_.bind(this),this.delay):this.timeout_=null},L.push=function(B){this.jobs.push(B),this.timeout_||(this.timeout_=setTimeout(this.processJob_.bind(this),this.delay))},A})(a),m=function(A){return A<<24|(A&65280)<<8|(A&16711680)>>8|A>>>24},g=function(A,L,F){var B=new Int32Array(A.buffer,A.byteOffset,A.byteLength>>2),M=new c(Array.prototype.slice.call(L)),k=new Uint8Array(A.byteLength),q=new Int32Array(k.buffer),G,H,re,se,de,me,ue,oe,ce;for(G=F[0],H=F[1],re=F[2],se=F[3],ce=0;ce<B.length;ce+=4)de=m(B[ce]),me=m(B[ce+1]),ue=m(B[ce+2]),oe=m(B[ce+3]),M.decrypt(de,me,ue,oe,q,ce),q[ce]=m(q[ce]^G),q[ce+1]=m(q[ce+1]^H),q[ce+2]=m(q[ce+2]^re),q[ce+3]=m(q[ce+3]^se),G=de,H=me,re=ue,se=oe;return k},y=(function(){function R(L,F,B,M){var k=R.STEP,q=new Int32Array(L.buffer),G=new Uint8Array(L.byteLength),H=0;for(this.asyncStream_=new h,this.asyncStream_.push(this.decryptChunk_(q.subarray(H,H+k),F,B,G)),H=k;H<q.length;H+=k)B=new Uint32Array([m(q[H-4]),m(q[H-3]),m(q[H-2]),m(q[H-1])]),this.asyncStream_.push(this.decryptChunk_(q.subarray(H,H+k),F,B,G));this.asyncStream_.push(function(){M(null,o(G))})}var A=R.prototype;return A.decryptChunk_=function(F,B,M,k){return function(){var q=g(F,B,M);k.set(q,F.byteOffset)}},r(R,null,[{key:"STEP",get:function(){return 32e3}}]),R})(),_;typeof window<"u"?_=window:typeof i<"u"?_=i:typeof self<"u"?_=self:_={};var T=_,E=function(A){return ArrayBuffer.isView==="function"?ArrayBuffer.isView(A):A&&A.buffer instanceof ArrayBuffer},w=T.BigInt||Number;w("0x1"),w("0x100"),w("0x10000"),w("0x1000000"),w("0x100000000"),w("0x10000000000"),w("0x1000000000000"),w("0x100000000000000"),w("0x10000000000000000");var D=function(A){var L={};return Object.keys(A).forEach(function(F){var B=A[F];E(B)?L[F]={bytes:B.buffer,byteOffset:B.byteOffset,byteLength:B.byteLength}:L[F]=B}),L};self.onmessage=function(R){var A=R.data,L=new Uint8Array(A.encrypted.bytes,A.encrypted.byteOffset,A.encrypted.byteLength),F=new Uint32Array(A.key.bytes,A.key.byteOffset,A.key.byteLength/4),B=new Uint32Array(A.iv.bytes,A.iv.byteOffset,A.iv.byteLength/4);new y(L,F,B,function(M,k){self.postMessage(D({source:A.source,decrypted:k}),[k.buffer])})}})),Ime=p$(Ame),Dme=function(e){var t=e.default?"main":"alternative";return e.characteristics&&e.characteristics.indexOf("public.accessibility.describes-video")>=0&&(t="main-desc"),t},lx=function(e,t){e.abort(),e.pause(),t&&t.activePlaylistLoader&&(t.activePlaylistLoader.pause(),t.activePlaylistLoader=null)},AE=function(e,t){t.activePlaylistLoader=e,e.load()},Pme=function(e,t){return function(){var r=t.segmentLoaders,n=r[e],s=r.main,a=t.mediaTypes[e],o=a.activeTrack(),l=a.getActiveGroup(),u=a.activePlaylistLoader,c=a.lastGroup_;if(!(l&&c&&l.id===c.id)&&(a.lastGroup_=l,a.lastTrack_=o,lx(n,a),!(!l||l.isMasterPlaylist))){if(!l.playlistLoader){u&&s.resetEverything();return}n.resyncLoader(),AE(l.playlistLoader,a)}}},Rme=function(e,t){return function(){var r=t.segmentLoaders[e],n=t.mediaTypes[e];n.lastGroup_=null,r.abort(),r.pause()}},Lme=function(e,t){return function(){var r=t.masterPlaylistLoader,n=t.segmentLoaders,s=n[e],a=n.main,o=t.mediaTypes[e],l=o.activeTrack(),u=o.getActiveGroup(),c=o.activePlaylistLoader,h=o.lastTrack_;if(!(h&&l&&h.id===l.id)&&(o.lastGroup_=u,o.lastTrack_=l,lx(s,o),!!u)){if(u.isMasterPlaylist){if(!l||!h||l.id===h.id)return;var m=t.vhs.masterPlaylistController_,g=m.selectPlaylist();if(m.media()===g)return;o.logger_("track change. Switching master audio from "+h.id+" to "+l.id),r.pause(),a.resetEverything(),m.fastQualityChange_(g);return}if(e==="AUDIO"){if(!u.playlistLoader){a.setAudio(!0),a.resetEverything();return}s.setAudio(!0),a.setAudio(!1)}if(c===u.playlistLoader){AE(u.playlistLoader,o);return}s.track&&s.track(l),s.resetEverything(),AE(u.playlistLoader,o)}}},ux={AUDIO:function(e,t){return function(){var r=t.segmentLoaders[e],n=t.mediaTypes[e],s=t.blacklistCurrentPlaylist;lx(r,n);var a=n.activeTrack(),o=n.activeGroup(),l=(o.filter(function(h){return h.default})[0]||o[0]).id,u=n.tracks[l];if(a===u){s({message:"Problem encountered loading the default audio track."});return}Re.log.warn("Problem encountered loading the alternate audio track.Switching back to default.");for(var c in n.tracks)n.tracks[c].enabled=n.tracks[c]===u;n.onTrackChanged()}},SUBTITLES:function(e,t){return function(){var r=t.segmentLoaders[e],n=t.mediaTypes[e];Re.log.warn("Problem encountered loading the subtitle track.Disabling subtitle track."),lx(r,n);var s=n.activeTrack();s&&(s.mode="disabled"),n.onTrackChanged()}}},mM={AUDIO:function(e,t,r){if(t){var n=r.tech,s=r.requestOptions,a=r.segmentLoaders[e];t.on("loadedmetadata",function(){var o=t.media();a.playlist(o,s),(!n.paused()||o.endList&&n.preload()!=="none")&&a.load()}),t.on("loadedplaylist",function(){a.playlist(t.media(),s),n.paused()||a.load()}),t.on("error",ux[e](e,r))}},SUBTITLES:function(e,t,r){var n=r.tech,s=r.requestOptions,a=r.segmentLoaders[e],o=r.mediaTypes[e];t.on("loadedmetadata",function(){var l=t.media();a.playlist(l,s),a.track(o.activeTrack()),(!n.paused()||l.endList&&n.preload()!=="none")&&a.load()}),t.on("loadedplaylist",function(){a.playlist(t.media(),s),n.paused()||a.load()}),t.on("error",ux[e](e,r))}},Ome={AUDIO:function(e,t){var r=t.vhs,n=t.sourceType,s=t.segmentLoaders[e],a=t.requestOptions,o=t.master.mediaGroups,l=t.mediaTypes[e],u=l.groups,c=l.tracks,h=l.logger_,m=t.masterPlaylistLoader,g=mg(m.master);(!o[e]||Object.keys(o[e]).length===0)&&(o[e]={main:{default:{default:!0}}},g&&(o[e].main.default.playlists=m.master.playlists));for(var y in o[e]){u[y]||(u[y]=[]);for(var _ in o[e][y]){var T=o[e][y][_],E=void 0;if(g?(h("AUDIO group '"+y+"' label '"+_+"' is a master playlist"),T.isMasterPlaylist=!0,E=null):n==="vhs-json"&&T.playlists?E=new Ff(T.playlists[0],r,a):T.resolvedUri?E=new Ff(T.resolvedUri,r,a):T.playlists&&n==="dash"?E=new CE(T.playlists[0],r,a,m):E=null,T=Re.mergeOptions({id:_,playlistLoader:E},T),mM[e](e,T.playlistLoader,t),u[y].push(T),typeof c[_]>"u"){var w=new Re.AudioTrack({id:_,kind:Dme(T),enabled:!1,language:T.language,default:T.default,label:_});c[_]=w}}}s.on("error",ux[e](e,t))},SUBTITLES:function(e,t){var r=t.tech,n=t.vhs,s=t.sourceType,a=t.segmentLoaders[e],o=t.requestOptions,l=t.master.mediaGroups,u=t.mediaTypes[e],c=u.groups,h=u.tracks,m=t.masterPlaylistLoader;for(var g in l[e]){c[g]||(c[g]=[]);for(var y in l[e][g])if(!l[e][g][y].forced){var _=l[e][g][y],T=void 0;if(s==="hls")T=new Ff(_.resolvedUri,n,o);else if(s==="dash"){var E=_.playlists.filter(function(D){return D.excludeUntil!==1/0});if(!E.length)return;T=new CE(_.playlists[0],n,o,m)}else s==="vhs-json"&&(T=new Ff(_.playlists?_.playlists[0]:_.resolvedUri,n,o));if(_=Re.mergeOptions({id:y,playlistLoader:T},_),mM[e](e,_.playlistLoader,t),c[g].push(_),typeof h[y]>"u"){var w=r.addRemoteTextTrack({id:y,kind:"subtitles",default:_.default&&_.autoselect,language:_.language,label:y},!1).track;h[y]=w}}}a.on("error",ux[e](e,t))},"CLOSED-CAPTIONS":function(e,t){var r=t.tech,n=t.master.mediaGroups,s=t.mediaTypes[e],a=s.groups,o=s.tracks;for(var l in n[e]){a[l]||(a[l]=[]);for(var u in n[e][l]){var c=n[e][l][u];if(/^(?:CC|SERVICE)/.test(c.instreamId)){var h=r.options_.vhs&&r.options_.vhs.captionServices||{},m={label:u,language:c.language,instreamId:c.instreamId,default:c.default&&c.autoselect};if(h[m.instreamId]&&(m=Re.mergeOptions(m,h[m.instreamId])),m.default===void 0&&delete m.default,a[l].push(Re.mergeOptions({id:u},c)),typeof o[u]>"u"){var g=r.addRemoteTextTrack({id:m.instreamId,kind:"captions",default:m.default,language:m.language,label:m.label},!1).track;o[u]=g}}}}}},Mme=function i(e,t){for(var r=0;r<e.length;r++)if(gk(t,e[r])||e[r].playlists&&i(e[r].playlists,t))return!0;return!1},Fme=function(e,t){return function(r){var n=t.masterPlaylistLoader,s=t.mediaTypes[e].groups,a=n.media();if(!a)return null;var o=null;a.attributes[e]&&(o=s[a.attributes[e]]);var l=Object.keys(s);if(!o)if(e==="AUDIO"&&l.length>1&&mg(t.master))for(var u=0;u<l.length;u++){var c=s[l[u]];if(Mme(c,a)){o=c;break}}else s.main?o=s.main:l.length===1&&(o=s[l[0]]);return typeof r>"u"?o:r===null||!o?null:o.filter(function(h){return h.id===r.id})[0]||null}},Bme={AUDIO:function(e,t){return function(){var r=t.mediaTypes[e].tracks;for(var n in r)if(r[n].enabled)return r[n];return null}},SUBTITLES:function(e,t){return function(){var r=t.mediaTypes[e].tracks;for(var n in r)if(r[n].mode==="showing"||r[n].mode==="hidden")return r[n];return null}}},Nme=function(e,t){var r=t.mediaTypes;return function(){var n=r[e].activeTrack();return n?r[e].activeGroup(n):null}},Ume=function(e){["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(function(y){Ome[y](y,e)});var t=e.mediaTypes,r=e.masterPlaylistLoader,n=e.tech,s=e.vhs,a=e.segmentLoaders,o=a.AUDIO,l=a.main;["AUDIO","SUBTITLES"].forEach(function(y){t[y].activeGroup=Fme(y,e),t[y].activeTrack=Bme[y](y,e),t[y].onGroupChanged=Pme(y,e),t[y].onGroupChanging=Rme(y,e),t[y].onTrackChanged=Lme(y,e),t[y].getActiveGroup=Nme(y,e)});var u=t.AUDIO.activeGroup();if(u){var c=(u.filter(function(y){return y.default})[0]||u[0]).id;t.AUDIO.tracks[c].enabled=!0,t.AUDIO.onGroupChanged(),t.AUDIO.onTrackChanged();var h=t.AUDIO.getActiveGroup();h.playlistLoader?(l.setAudio(!1),o.setAudio(!0)):l.setAudio(!0)}r.on("mediachange",function(){["AUDIO","SUBTITLES"].forEach(function(y){return t[y].onGroupChanged()})}),r.on("mediachanging",function(){["AUDIO","SUBTITLES"].forEach(function(y){return t[y].onGroupChanging()})});var m=function(){t.AUDIO.onTrackChanged(),n.trigger({type:"usage",name:"vhs-audio-change"}),n.trigger({type:"usage",name:"hls-audio-change"})};n.audioTracks().addEventListener("change",m),n.remoteTextTracks().addEventListener("change",t.SUBTITLES.onTrackChanged),s.on("dispose",function(){n.audioTracks().removeEventListener("change",m),n.remoteTextTracks().removeEventListener("change",t.SUBTITLES.onTrackChanged)}),n.clearTracks("audio");for(var g in t.AUDIO.tracks)n.audioTracks().addTrack(t.AUDIO.tracks[g])},$me=function(){var e={};return["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(function(t){e[t]={groups:{},tracks:{},activePlaylistLoader:null,activeGroup:tc,activeTrack:tc,getActiveGroup:tc,onGroupChanged:tc,onTrackChanged:tc,lastTrack_:null,logger_:xl("MediaGroups["+t+"]")}}),e},jme=120,Ku,zme=["mediaRequests","mediaRequestsAborted","mediaRequestsTimedout","mediaRequestsErrored","mediaTransferDuration","mediaBytesTransferred","mediaAppends"],Hme=function(e){return this.audioSegmentLoader_[e]+this.mainSegmentLoader_[e]},Vme=function(e){var t=e.currentPlaylist,r=e.buffered,n=e.currentTime,s=e.nextPlaylist,a=e.bufferLowWaterLine,o=e.bufferHighWaterLine,l=e.duration,u=e.experimentalBufferBasedABR,c=e.log;if(!s)return Re.log.warn("We received no playlist to switch to. Please check your stream."),!1;var h="allowing switch "+(t&&t.id||"null")+" -> "+s.id;if(!t)return c(h+" as current playlist is not set"),!0;if(s.id===t.id)return!1;var m=!!Mf(r,n).length;if(!t.endList)return!m&&typeof t.partTargetDuration=="number"?(c("not "+h+" as current playlist is live llhls, but currentTime isn't in buffered."),!1):(c(h+" as current playlist is live"),!0);var g=fk(r,n),y=u?Gn.EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE:Gn.MAX_BUFFER_LOW_WATER_LINE;if(l<y)return c(h+" as duration < max low water line ("+l+" < "+y+")"),!0;var _=s.attributes.BANDWIDTH,T=t.attributes.BANDWIDTH;if(_<T&&(!u||g<o)){var E=h+" as next bandwidth < current bandwidth ("+_+" < "+T+")";return u&&(E+=" and forwardBuffer < bufferHighWaterLine ("+g+" < "+o+")"),c(E),!0}if((!u||_>T)&&g>=a){var w=h+" as forwardBuffer >= bufferLowWaterLine ("+g+" >= "+a+")";return u&&(w+=" and next bandwidth > current bandwidth ("+_+" > "+T+")"),c(w),!0}return c("not "+h+" as no switching criteria met"),!1},qme=(function(i){Ft(e,i);function e(r){var n;n=i.call(this)||this;var s=r.src,a=r.handleManifestRedirects,o=r.withCredentials,l=r.tech,u=r.bandwidth,c=r.externVhs,h=r.useCueTags,m=r.blacklistDuration,g=r.enableLowInitialPlaylist,y=r.sourceType,_=r.cacheEncryptionKeys,T=r.experimentalBufferBasedABR,E=r.experimentalLeastPixelDiffSelector,w=r.captionServices;if(!s)throw new Error("A non-empty playlist URL or JSON manifest string is required");var D=r.maxPlaylistRetries;(D===null||typeof D>"u")&&(D=1/0),Ku=c,n.experimentalBufferBasedABR=!!T,n.experimentalLeastPixelDiffSelector=!!E,n.withCredentials=o,n.tech_=l,n.vhs_=l.vhs,n.sourceType_=y,n.useCueTags_=h,n.blacklistDuration=m,n.maxPlaylistRetries=D,n.enableLowInitialPlaylist=g,n.useCueTags_&&(n.cueTagsTrack_=n.tech_.addTextTrack("metadata","ad-cues"),n.cueTagsTrack_.inBandMetadataTrackDispatchType=""),n.requestOptions_={withCredentials:o,handleManifestRedirects:a,maxPlaylistRetries:D,timeout:null},n.on("error",n.pauseLoading),n.mediaTypes_=$me(),n.mediaSource=new X.MediaSource,n.handleDurationChange_=n.handleDurationChange_.bind(je(n)),n.handleSourceOpen_=n.handleSourceOpen_.bind(je(n)),n.handleSourceEnded_=n.handleSourceEnded_.bind(je(n)),n.mediaSource.addEventListener("durationchange",n.handleDurationChange_),n.mediaSource.addEventListener("sourceopen",n.handleSourceOpen_),n.mediaSource.addEventListener("sourceended",n.handleSourceEnded_),n.seekable_=Re.createTimeRanges(),n.hasPlayed_=!1,n.syncController_=new wme(r),n.segmentMetadataTrack_=l.addRemoteTextTrack({kind:"metadata",label:"segment-metadata"},!1).track,n.decrypter_=new Ime,n.sourceUpdater_=new I$(n.mediaSource),n.inbandTextTracks_={},n.timelineChangeController_=new kme;var R={vhs:n.vhs_,parse708captions:r.parse708captions,useDtsForTimestampOffset:r.useDtsForTimestampOffset,captionServices:w,mediaSource:n.mediaSource,currentTime:n.tech_.currentTime.bind(n.tech_),seekable:function(){return n.seekable()},seeking:function(){return n.tech_.seeking()},duration:function(){return n.duration()},hasPlayed:function(){return n.hasPlayed_},goalBufferLength:function(){return n.goalBufferLength()},bandwidth:u,syncController:n.syncController_,decrypter:n.decrypter_,sourceType:n.sourceType_,inbandTextTracks:n.inbandTextTracks_,cacheEncryptionKeys:_,sourceUpdater:n.sourceUpdater_,timelineChangeController:n.timelineChangeController_,experimentalExactManifestTimings:r.experimentalExactManifestTimings};n.masterPlaylistLoader_=n.sourceType_==="dash"?new CE(s,n.vhs_,n.requestOptions_):new Ff(s,n.vhs_,n.requestOptions_),n.setupMasterPlaylistLoaderListeners_(),n.mainSegmentLoader_=new wE(Re.mergeOptions(R,{segmentMetadataTrack:n.segmentMetadataTrack_,loaderType:"main"}),r),n.audioSegmentLoader_=new wE(Re.mergeOptions(R,{loaderType:"audio"}),r),n.subtitleSegmentLoader_=new bme(Re.mergeOptions(R,{loaderType:"vtt",featuresNativeTextTracks:n.tech_.featuresNativeTextTracks,loadVttJs:function(){return new Promise(function(F,B){function M(){l.off("vttjserror",k),F()}function k(){l.off("vttjsloaded",M),B()}l.one("vttjsloaded",M),l.one("vttjserror",k),l.addWebVttScript_()})}}),r),n.setupSegmentLoaderListeners_(),n.experimentalBufferBasedABR&&(n.masterPlaylistLoader_.one("loadedplaylist",function(){return n.startABRTimer_()}),n.tech_.on("pause",function(){return n.stopABRTimer_()}),n.tech_.on("play",function(){return n.startABRTimer_()})),zme.forEach(function(L){n[L+"_"]=Hme.bind(je(n),L)}),n.logger_=xl("MPC"),n.triggeredFmp4Usage=!1,n.tech_.preload()==="none"?(n.loadOnPlay_=function(){n.loadOnPlay_=null,n.masterPlaylistLoader_.load()},n.tech_.one("play",n.loadOnPlay_)):n.masterPlaylistLoader_.load(),n.timeToLoadedData__=-1,n.mainAppendsToLoadedData__=-1,n.audioAppendsToLoadedData__=-1;var A=n.tech_.preload()==="none"?"play":"loadstart";return n.tech_.one(A,function(){var L=Date.now();n.tech_.one("loadeddata",function(){n.timeToLoadedData__=Date.now()-L,n.mainAppendsToLoadedData__=n.mainSegmentLoader_.mediaAppends,n.audioAppendsToLoadedData__=n.audioSegmentLoader_.mediaAppends})}),n}var t=e.prototype;return t.mainAppendsToLoadedData_=function(){return this.mainAppendsToLoadedData__},t.audioAppendsToLoadedData_=function(){return this.audioAppendsToLoadedData__},t.appendsToLoadedData_=function(){var n=this.mainAppendsToLoadedData_(),s=this.audioAppendsToLoadedData_();return n===-1||s===-1?-1:n+s},t.timeToLoadedData_=function(){return this.timeToLoadedData__},t.checkABR_=function(n){n===void 0&&(n="abr");var s=this.selectPlaylist();s&&this.shouldSwitchToMedia_(s)&&this.switchMedia_(s,n)},t.switchMedia_=function(n,s,a){var o=this.media(),l=o&&(o.id||o.uri),u=n.id||n.uri;l&&l!==u&&(this.logger_("switch media "+l+" -> "+u+" from "+s),this.tech_.trigger({type:"usage",name:"vhs-rendition-change-"+s})),this.masterPlaylistLoader_.media(n,a)},t.startABRTimer_=function(){var n=this;this.stopABRTimer_(),this.abrTimer_=X.setInterval(function(){return n.checkABR_()},250)},t.stopABRTimer_=function(){this.tech_.scrubbing&&this.tech_.scrubbing()||(X.clearInterval(this.abrTimer_),this.abrTimer_=null)},t.getAudioTrackPlaylists_=function(){var n=this.master(),s=n&&n.playlists||[];if(!n||!n.mediaGroups||!n.mediaGroups.AUDIO)return s;var a=n.mediaGroups.AUDIO,o=Object.keys(a),l;if(Object.keys(this.mediaTypes_.AUDIO.groups).length)l=this.mediaTypes_.AUDIO.activeTrack();else{var u=a.main||o.length&&a[o[0]];for(var c in u)if(u[c].default){l={label:c};break}}if(!l)return s;var h=[];for(var m in a)if(a[m][l.label]){var g=a[m][l.label];if(g.playlists&&g.playlists.length)h.push.apply(h,g.playlists);else if(g.uri)h.push(g);else if(n.playlists.length)for(var y=0;y<n.playlists.length;y++){var _=n.playlists[y];_.attributes&&_.attributes.AUDIO&&_.attributes.AUDIO===m&&h.push(_)}}return h.length?h:s},t.setupMasterPlaylistLoaderListeners_=function(){var n=this;this.masterPlaylistLoader_.on("loadedmetadata",function(){var s=n.masterPlaylistLoader_.media(),a=s.targetDuration*1.5*1e3;_E(n.masterPlaylistLoader_.master,n.masterPlaylistLoader_.media())?n.requestOptions_.timeout=0:n.requestOptions_.timeout=a,s.endList&&n.tech_.preload()!=="none"&&(n.mainSegmentLoader_.playlist(s,n.requestOptions_),n.mainSegmentLoader_.load()),Ume({sourceType:n.sourceType_,segmentLoaders:{AUDIO:n.audioSegmentLoader_,SUBTITLES:n.subtitleSegmentLoader_,main:n.mainSegmentLoader_},tech:n.tech_,requestOptions:n.requestOptions_,masterPlaylistLoader:n.masterPlaylistLoader_,vhs:n.vhs_,master:n.master(),mediaTypes:n.mediaTypes_,blacklistCurrentPlaylist:n.blacklistCurrentPlaylist.bind(n)}),n.triggerPresenceUsage_(n.master(),s),n.setupFirstPlay(),!n.mediaTypes_.AUDIO.activePlaylistLoader||n.mediaTypes_.AUDIO.activePlaylistLoader.media()?n.trigger("selectedinitialmedia"):n.mediaTypes_.AUDIO.activePlaylistLoader.one("loadedmetadata",function(){n.trigger("selectedinitialmedia")})}),this.masterPlaylistLoader_.on("loadedplaylist",function(){n.loadOnPlay_&&n.tech_.off("play",n.loadOnPlay_);var s=n.masterPlaylistLoader_.media();if(!s){n.excludeUnsupportedVariants_();var a;if(n.enableLowInitialPlaylist&&(a=n.selectInitialPlaylist()),a||(a=n.selectPlaylist()),!a||!n.shouldSwitchToMedia_(a))return;n.initialMedia_=a,n.switchMedia_(n.initialMedia_,"initial");var o=n.sourceType_==="vhs-json"&&n.initialMedia_.segments;if(!o)return;s=n.initialMedia_}n.handleUpdatedMediaPlaylist(s)}),this.masterPlaylistLoader_.on("error",function(){n.blacklistCurrentPlaylist(n.masterPlaylistLoader_.error)}),this.masterPlaylistLoader_.on("mediachanging",function(){n.mainSegmentLoader_.abort(),n.mainSegmentLoader_.pause()}),this.masterPlaylistLoader_.on("mediachange",function(){var s=n.masterPlaylistLoader_.media(),a=s.targetDuration*1.5*1e3;_E(n.masterPlaylistLoader_.master,n.masterPlaylistLoader_.media())?n.requestOptions_.timeout=0:n.requestOptions_.timeout=a,n.masterPlaylistLoader_.load(),n.mainSegmentLoader_.playlist(s,n.requestOptions_),n.mainSegmentLoader_.load(),n.tech_.trigger({type:"mediachange",bubbles:!0})}),this.masterPlaylistLoader_.on("playlistunchanged",function(){var s=n.masterPlaylistLoader_.media();if(s.lastExcludeReason_!=="playlist-unchanged"){var a=n.stuckAtPlaylistEnd_(s);a&&(n.blacklistCurrentPlaylist({message:"Playlist no longer updating.",reason:"playlist-unchanged"}),n.tech_.trigger("playliststuck"))}}),this.masterPlaylistLoader_.on("renditiondisabled",function(){n.tech_.trigger({type:"usage",name:"vhs-rendition-disabled"}),n.tech_.trigger({type:"usage",name:"hls-rendition-disabled"})}),this.masterPlaylistLoader_.on("renditionenabled",function(){n.tech_.trigger({type:"usage",name:"vhs-rendition-enabled"}),n.tech_.trigger({type:"usage",name:"hls-rendition-enabled"})})},t.handleUpdatedMediaPlaylist=function(n){this.useCueTags_&&this.updateAdCues_(n),this.mainSegmentLoader_.playlist(n,this.requestOptions_),this.updateDuration(!n.endList),this.tech_.paused()||(this.mainSegmentLoader_.load(),this.audioSegmentLoader_&&this.audioSegmentLoader_.load())},t.triggerPresenceUsage_=function(n,s){var a=n.mediaGroups||{},o=!0,l=Object.keys(a.AUDIO);for(var u in a.AUDIO)for(var c in a.AUDIO[u]){var h=a.AUDIO[u][c];h.uri||(o=!1)}o&&(this.tech_.trigger({type:"usage",name:"vhs-demuxed"}),this.tech_.trigger({type:"usage",name:"hls-demuxed"})),Object.keys(a.SUBTITLES).length&&(this.tech_.trigger({type:"usage",name:"vhs-webvtt"}),this.tech_.trigger({type:"usage",name:"hls-webvtt"})),Ku.Playlist.isAes(s)&&(this.tech_.trigger({type:"usage",name:"vhs-aes"}),this.tech_.trigger({type:"usage",name:"hls-aes"})),l.length&&Object.keys(a.AUDIO[l[0]]).length>1&&(this.tech_.trigger({type:"usage",name:"vhs-alternate-audio"}),this.tech_.trigger({type:"usage",name:"hls-alternate-audio"})),this.useCueTags_&&(this.tech_.trigger({type:"usage",name:"vhs-playlist-cue-tags"}),this.tech_.trigger({type:"usage",name:"hls-playlist-cue-tags"}))},t.shouldSwitchToMedia_=function(n){var s=this.masterPlaylistLoader_.media()||this.masterPlaylistLoader_.pendingMedia_,a=this.tech_.currentTime(),o=this.bufferLowWaterLine(),l=this.bufferHighWaterLine(),u=this.tech_.buffered();return Vme({buffered:u,currentTime:a,currentPlaylist:s,nextPlaylist:n,bufferLowWaterLine:o,bufferHighWaterLine:l,duration:this.duration(),experimentalBufferBasedABR:this.experimentalBufferBasedABR,log:this.logger_})},t.setupSegmentLoaderListeners_=function(){var n=this;this.mainSegmentLoader_.on("bandwidthupdate",function(){n.checkABR_("bandwidthupdate"),n.tech_.trigger("bandwidthupdate")}),this.mainSegmentLoader_.on("timeout",function(){n.experimentalBufferBasedABR&&n.mainSegmentLoader_.load()}),this.experimentalBufferBasedABR||this.mainSegmentLoader_.on("progress",function(){n.trigger("progress")}),this.mainSegmentLoader_.on("error",function(){n.blacklistCurrentPlaylist(n.mainSegmentLoader_.error())}),this.mainSegmentLoader_.on("appenderror",function(){n.error=n.mainSegmentLoader_.error_,n.trigger("error")}),this.mainSegmentLoader_.on("syncinfoupdate",function(){n.onSyncInfoUpdate_()}),this.mainSegmentLoader_.on("timestampoffset",function(){n.tech_.trigger({type:"usage",name:"vhs-timestamp-offset"}),n.tech_.trigger({type:"usage",name:"hls-timestamp-offset"})}),this.audioSegmentLoader_.on("syncinfoupdate",function(){n.onSyncInfoUpdate_()}),this.audioSegmentLoader_.on("appenderror",function(){n.error=n.audioSegmentLoader_.error_,n.trigger("error")}),this.mainSegmentLoader_.on("ended",function(){n.logger_("main segment loader ended"),n.onEndOfStream()}),this.mainSegmentLoader_.on("earlyabort",function(a){n.experimentalBufferBasedABR||(n.delegateLoaders_("all",["abort"]),n.blacklistCurrentPlaylist({message:"Aborted early because there isn't enough bandwidth to complete the request without rebuffering."},jme))});var s=function(){if(!n.sourceUpdater_.hasCreatedSourceBuffers())return n.tryToCreateSourceBuffers_();var o=n.getCodecsOrExclude_();o&&n.sourceUpdater_.addOrChangeSourceBuffers(o)};this.mainSegmentLoader_.on("trackinfo",s),this.audioSegmentLoader_.on("trackinfo",s),this.mainSegmentLoader_.on("fmp4",function(){n.triggeredFmp4Usage||(n.tech_.trigger({type:"usage",name:"vhs-fmp4"}),n.tech_.trigger({type:"usage",name:"hls-fmp4"}),n.triggeredFmp4Usage=!0)}),this.audioSegmentLoader_.on("fmp4",function(){n.triggeredFmp4Usage||(n.tech_.trigger({type:"usage",name:"vhs-fmp4"}),n.tech_.trigger({type:"usage",name:"hls-fmp4"}),n.triggeredFmp4Usage=!0)}),this.audioSegmentLoader_.on("ended",function(){n.logger_("audioSegmentLoader ended"),n.onEndOfStream()})},t.mediaSecondsLoaded_=function(){return Math.max(this.audioSegmentLoader_.mediaSecondsLoaded+this.mainSegmentLoader_.mediaSecondsLoaded)},t.load=function(){this.mainSegmentLoader_.load(),this.mediaTypes_.AUDIO.activePlaylistLoader&&this.audioSegmentLoader_.load(),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&this.subtitleSegmentLoader_.load()},t.smoothQualityChange_=function(n){n===void 0&&(n=this.selectPlaylist()),this.fastQualityChange_(n)},t.fastQualityChange_=function(n){var s=this;if(n===void 0&&(n=this.selectPlaylist()),n===this.masterPlaylistLoader_.media()){this.logger_("skipping fastQualityChange because new media is same as old");return}this.switchMedia_(n,"fast-quality"),this.mainSegmentLoader_.resetEverything(function(){Re.browser.IE_VERSION||Re.browser.IS_EDGE?s.tech_.setCurrentTime(s.tech_.currentTime()+.04):s.tech_.setCurrentTime(s.tech_.currentTime())})},t.play=function(){if(!this.setupFirstPlay()){this.tech_.ended()&&this.tech_.setCurrentTime(0),this.hasPlayed_&&this.load();var n=this.tech_.seekable();if(this.tech_.duration()===1/0&&this.tech_.currentTime()<n.start(0))return this.tech_.setCurrentTime(n.end(n.length-1))}},t.setupFirstPlay=function(){var n=this,s=this.masterPlaylistLoader_.media();if(!s||this.tech_.paused()||this.hasPlayed_)return!1;if(!s.endList){var a=this.seekable();if(!a.length)return!1;if(Re.browser.IE_VERSION&&this.tech_.readyState()===0)return this.tech_.one("loadedmetadata",function(){n.trigger("firstplay"),n.tech_.setCurrentTime(a.end(0)),n.hasPlayed_=!0}),!1;this.trigger("firstplay"),this.tech_.setCurrentTime(a.end(0))}return this.hasPlayed_=!0,this.load(),!0},t.handleSourceOpen_=function(){if(this.tryToCreateSourceBuffers_(),this.tech_.autoplay()){var n=this.tech_.play();typeof n<"u"&&typeof n.then=="function"&&n.then(null,function(s){})}this.trigger("sourceopen")},t.handleSourceEnded_=function(){if(this.inbandTextTracks_.metadataTrack_){var n=this.inbandTextTracks_.metadataTrack_.cues;if(!(!n||!n.length)){var s=this.duration();n[n.length-1].endTime=isNaN(s)||Math.abs(s)===1/0?Number.MAX_VALUE:s}}},t.handleDurationChange_=function(){this.tech_.trigger("durationchange")},t.onEndOfStream=function(){var n=this.mainSegmentLoader_.ended_;if(this.mediaTypes_.AUDIO.activePlaylistLoader){var s=this.mainSegmentLoader_.getCurrentMediaInfo_();!s||s.hasVideo?n=n&&this.audioSegmentLoader_.ended_:n=this.audioSegmentLoader_.ended_}n&&(this.stopABRTimer_(),this.sourceUpdater_.endOfStream())},t.stuckAtPlaylistEnd_=function(n){var s=this.seekable();if(!s.length)return!1;var a=this.syncController_.getExpiredTime(n,this.duration());if(a===null)return!1;var o=Ku.Playlist.playlistEnd(n,a),l=this.tech_.currentTime(),u=this.tech_.buffered();if(!u.length)return o-l<=nu;var c=u.end(u.length-1);return c-l<=nu&&o-c<=nu},t.blacklistCurrentPlaylist=function(n,s){n===void 0&&(n={});var a=n.playlist||this.masterPlaylistLoader_.media();if(s=s||n.blacklistDuration||this.blacklistDuration,!a){this.error=n,this.mediaSource.readyState!=="open"?this.trigger("error"):this.sourceUpdater_.endOfStream("network");return}a.playlistErrors_++;var o=this.masterPlaylistLoader_.master.playlists,l=o.filter(DT),u=l.length===1&&l[0]===a;if(o.length===1&&s!==1/0)return Re.log.warn("Problem encountered with playlist "+a.id+". Trying again since it is the only playlist."),this.tech_.trigger("retryplaylist"),this.masterPlaylistLoader_.load(u);if(u){var c=!1;o.forEach(function(E){if(E!==a){var w=E.excludeUntil;typeof w<"u"&&w!==1/0&&(c=!0,delete E.excludeUntil)}}),c&&(Re.log.warn("Removing other playlists from the exclusion list because the last rendition is about to be excluded."),this.tech_.trigger("retryplaylist"))}var h;a.playlistErrors_>this.maxPlaylistRetries?h=1/0:h=Date.now()+s*1e3,a.excludeUntil=h,n.reason&&(a.lastExcludeReason_=n.reason),this.tech_.trigger("blacklistplaylist"),this.tech_.trigger({type:"usage",name:"vhs-rendition-blacklisted"}),this.tech_.trigger({type:"usage",name:"hls-rendition-blacklisted"});var m=this.selectPlaylist();if(!m){this.error="Playback cannot continue. No available working or supported playlists.",this.trigger("error");return}var g=n.internal?this.logger_:Re.log.warn,y=n.message?" "+n.message:"";g((n.internal?"Internal problem":"Problem")+" encountered with playlist "+a.id+"."+(y+" Switching to playlist "+m.id+".")),m.attributes.AUDIO!==a.attributes.AUDIO&&this.delegateLoaders_("audio",["abort","pause"]),m.attributes.SUBTITLES!==a.attributes.SUBTITLES&&this.delegateLoaders_("subtitle",["abort","pause"]),this.delegateLoaders_("main",["abort","pause"]);var _=m.targetDuration/2*1e3||5*1e3,T=typeof m.lastRequest=="number"&&Date.now()-m.lastRequest<=_;return this.switchMedia_(m,"exclude",u||T)},t.pauseLoading=function(){this.delegateLoaders_("all",["abort","pause"]),this.stopABRTimer_()},t.delegateLoaders_=function(n,s){var a=this,o=[],l=n==="all";(l||n==="main")&&o.push(this.masterPlaylistLoader_);var u=[];(l||n==="audio")&&u.push("AUDIO"),(l||n==="subtitle")&&(u.push("CLOSED-CAPTIONS"),u.push("SUBTITLES")),u.forEach(function(c){var h=a.mediaTypes_[c]&&a.mediaTypes_[c].activePlaylistLoader;h&&o.push(h)}),["main","audio","subtitle"].forEach(function(c){var h=a[c+"SegmentLoader_"];h&&(n===c||n==="all")&&o.push(h)}),o.forEach(function(c){return s.forEach(function(h){typeof c[h]=="function"&&c[h]()})})},t.setCurrentTime=function(n){var s=Mf(this.tech_.buffered(),n);if(!(this.masterPlaylistLoader_&&this.masterPlaylistLoader_.media())||!this.masterPlaylistLoader_.media().segments)return 0;if(s&&s.length)return n;this.mainSegmentLoader_.resetEverything(),this.mainSegmentLoader_.abort(),this.mediaTypes_.AUDIO.activePlaylistLoader&&(this.audioSegmentLoader_.resetEverything(),this.audioSegmentLoader_.abort()),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&(this.subtitleSegmentLoader_.resetEverything(),this.subtitleSegmentLoader_.abort()),this.load()},t.duration=function(){if(!this.masterPlaylistLoader_)return 0;var n=this.masterPlaylistLoader_.media();return n?n.endList?this.mediaSource?this.mediaSource.duration:Ku.Playlist.duration(n):1/0:0},t.seekable=function(){return this.seekable_},t.onSyncInfoUpdate_=function(){var n;if(this.masterPlaylistLoader_){var s=this.masterPlaylistLoader_.media();if(s){var a=this.syncController_.getExpiredTime(s,this.duration());if(a!==null){var o=this.masterPlaylistLoader_.master,l=Ku.Playlist.seekable(s,a,Ku.Playlist.liveEdgeDelay(o,s));if(l.length!==0&&!(this.mediaTypes_.AUDIO.activePlaylistLoader&&(s=this.mediaTypes_.AUDIO.activePlaylistLoader.media(),a=this.syncController_.getExpiredTime(s,this.duration()),a===null||(n=Ku.Playlist.seekable(s,a,Ku.Playlist.liveEdgeDelay(o,s)),n.length===0)))){var u,c;this.seekable_&&this.seekable_.length&&(u=this.seekable_.end(0),c=this.seekable_.start(0)),n?n.start(0)>l.end(0)||l.start(0)>n.end(0)?this.seekable_=l:this.seekable_=Re.createTimeRanges([[n.start(0)>l.start(0)?n.start(0):l.start(0),n.end(0)<l.end(0)?n.end(0):l.end(0)]]):this.seekable_=l,!(this.seekable_&&this.seekable_.length&&this.seekable_.end(0)===u&&this.seekable_.start(0)===c)&&(this.logger_("seekable updated ["+WU(this.seekable_)+"]"),this.tech_.trigger("seekablechanged"))}}}}},t.updateDuration=function(n){if(this.updateDuration_&&(this.mediaSource.removeEventListener("sourceopen",this.updateDuration_),this.updateDuration_=null),this.mediaSource.readyState!=="open"){this.updateDuration_=this.updateDuration.bind(this,n),this.mediaSource.addEventListener("sourceopen",this.updateDuration_);return}if(n){var s=this.seekable();if(!s.length)return;(isNaN(this.mediaSource.duration)||this.mediaSource.duration<s.end(s.length-1))&&this.sourceUpdater_.setDuration(s.end(s.length-1));return}var a=this.tech_.buffered(),o=Ku.Playlist.duration(this.masterPlaylistLoader_.media());a.length>0&&(o=Math.max(o,a.end(a.length-1))),this.mediaSource.duration!==o&&this.sourceUpdater_.setDuration(o)},t.dispose=function(){var n=this;this.trigger("dispose"),this.decrypter_.terminate(),this.masterPlaylistLoader_.dispose(),this.mainSegmentLoader_.dispose(),this.loadOnPlay_&&this.tech_.off("play",this.loadOnPlay_),["AUDIO","SUBTITLES"].forEach(function(s){var a=n.mediaTypes_[s].groups;for(var o in a)a[o].forEach(function(l){l.playlistLoader&&l.playlistLoader.dispose()})}),this.audioSegmentLoader_.dispose(),this.subtitleSegmentLoader_.dispose(),this.sourceUpdater_.dispose(),this.timelineChangeController_.dispose(),this.stopABRTimer_(),this.updateDuration_&&this.mediaSource.removeEventListener("sourceopen",this.updateDuration_),this.mediaSource.removeEventListener("durationchange",this.handleDurationChange_),this.mediaSource.removeEventListener("sourceopen",this.handleSourceOpen_),this.mediaSource.removeEventListener("sourceended",this.handleSourceEnded_),this.off()},t.master=function(){return this.masterPlaylistLoader_.master},t.media=function(){return this.masterPlaylistLoader_.media()||this.initialMedia_},t.areMediaTypesKnown_=function(){var n=!!this.mediaTypes_.AUDIO.activePlaylistLoader,s=!!this.mainSegmentLoader_.getCurrentMediaInfo_(),a=n?!!this.audioSegmentLoader_.getCurrentMediaInfo_():!0;return!(!s||!a)},t.getCodecsOrExclude_=function(){var n=this,s={main:this.mainSegmentLoader_.getCurrentMediaInfo_()||{},audio:this.audioSegmentLoader_.getCurrentMediaInfo_()||{}},a=this.mainSegmentLoader_.getPendingSegmentPlaylist()||this.media();s.video=s.main;var o=m0(this.master(),a),l={},u=!!this.mediaTypes_.AUDIO.activePlaylistLoader;if(s.main.hasVideo&&(l.video=o.video||s.main.videoCodec||jce),s.main.isMuxed&&(l.video+=","+(o.audio||s.main.audioCodec||c4)),(s.main.hasAudio&&!s.main.isMuxed||s.audio.hasAudio||u)&&(l.audio=o.audio||s.main.audioCodec||s.audio.audioCodec||c4,s.audio.isFmp4=s.main.hasAudio&&!s.main.isMuxed?s.main.isFmp4:s.audio.isFmp4),!l.audio&&!l.video){this.blacklistCurrentPlaylist({playlist:a,message:"Could not determine codecs for playlist.",blacklistDuration:1/0});return}var c=function(E,w){return E?Uy(w):d1(w)},h={},m;if(["video","audio"].forEach(function(T){if(l.hasOwnProperty(T)&&!c(s[T].isFmp4,l[T])){var E=s[T].isFmp4?"browser":"muxer";h[E]=h[E]||[],h[E].push(l[T]),T==="audio"&&(m=E)}}),u&&m&&a.attributes.AUDIO){var g=a.attributes.AUDIO;this.master().playlists.forEach(function(T){var E=T.attributes&&T.attributes.AUDIO;E===g&&T!==a&&(T.excludeUntil=1/0)}),this.logger_("excluding audio group "+g+" as "+m+' does not support codec(s): "'+l.audio+'"')}if(Object.keys(h).length){var y=Object.keys(h).reduce(function(T,E){return T&&(T+=", "),T+=E+' does not support codec(s): "'+h[E].join(",")+'"',T},"")+".";this.blacklistCurrentPlaylist({playlist:a,internal:!0,message:y,blacklistDuration:1/0});return}if(this.sourceUpdater_.hasCreatedSourceBuffers()&&!this.sourceUpdater_.canChangeType()){var _=[];if(["video","audio"].forEach(function(T){var E=(Hl(n.sourceUpdater_.codecs[T]||"")[0]||{}).type,w=(Hl(l[T]||"")[0]||{}).type;E&&w&&E.toLowerCase()!==w.toLowerCase()&&_.push('"'+n.sourceUpdater_.codecs[T]+'" -> "'+l[T]+'"')}),_.length){this.blacklistCurrentPlaylist({playlist:a,message:"Codec switching not supported: "+_.join(", ")+".",blacklistDuration:1/0,internal:!0});return}}return l},t.tryToCreateSourceBuffers_=function(){if(!(this.mediaSource.readyState!=="open"||this.sourceUpdater_.hasCreatedSourceBuffers())&&this.areMediaTypesKnown_()){var n=this.getCodecsOrExclude_();if(n){this.sourceUpdater_.createSourceBuffers(n);var s=[n.video,n.audio].filter(Boolean).join(",");this.excludeIncompatibleVariants_(s)}}},t.excludeUnsupportedVariants_=function(){var n=this,s=this.master().playlists,a=[];Object.keys(s).forEach(function(o){var l=s[o];if(a.indexOf(l.id)===-1){a.push(l.id);var u=m0(n.master,l),c=[];u.audio&&!d1(u.audio)&&!Uy(u.audio)&&c.push("audio codec "+u.audio),u.video&&!d1(u.video)&&!Uy(u.video)&&c.push("video codec "+u.video),u.text&&u.text==="stpp.ttml.im1t"&&c.push("text codec "+u.text),c.length&&(l.excludeUntil=1/0,n.logger_("excluding "+l.id+" for unsupported: "+c.join(", ")))}})},t.excludeIncompatibleVariants_=function(n){var s=this,a=[],o=this.master().playlists,l=ax(Hl(n)),u=nM(l),c=l.video&&Hl(l.video)[0]||null,h=l.audio&&Hl(l.audio)[0]||null;Object.keys(o).forEach(function(m){var g=o[m];if(!(a.indexOf(g.id)!==-1||g.excludeUntil===1/0)){a.push(g.id);var y=[],_=m0(s.masterPlaylistLoader_.master,g),T=nM(_);if(!(!_.audio&&!_.video)){if(T!==u&&y.push('codec count "'+T+'" !== "'+u+'"'),!s.sourceUpdater_.canChangeType()){var E=_.video&&Hl(_.video)[0]||null,w=_.audio&&Hl(_.audio)[0]||null;E&&c&&E.type.toLowerCase()!==c.type.toLowerCase()&&y.push('video codec "'+E.type+'" !== "'+c.type+'"'),w&&h&&w.type.toLowerCase()!==h.type.toLowerCase()&&y.push('audio codec "'+w.type+'" !== "'+h.type+'"')}y.length&&(g.excludeUntil=1/0,s.logger_("blacklisting "+g.id+": "+y.join(" && ")))}}})},t.updateAdCues_=function(n){var s=0,a=this.seekable();a.length&&(s=a.start(0)),Cme(n,this.cueTagsTrack_,s)},t.goalBufferLength=function(){var n=this.tech_.currentTime(),s=Gn.GOAL_BUFFER_LENGTH,a=Gn.GOAL_BUFFER_LENGTH_RATE,o=Math.max(s,Gn.MAX_GOAL_BUFFER_LENGTH);return Math.min(s+n*a,o)},t.bufferLowWaterLine=function(){var n=this.tech_.currentTime(),s=Gn.BUFFER_LOW_WATER_LINE,a=Gn.BUFFER_LOW_WATER_LINE_RATE,o=Math.max(s,Gn.MAX_BUFFER_LOW_WATER_LINE),l=Math.max(s,Gn.EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE);return Math.min(s+n*a,this.experimentalBufferBasedABR?l:o)},t.bufferHighWaterLine=function(){return Gn.BUFFER_HIGH_WATER_LINE},e})(Re.EventTarget),Wme=function(e,t,r){return function(n){var s=e.master.playlists[t],a=mk(s),o=DT(s);return typeof n>"u"?o:(n?delete s.disabled:s.disabled=!0,n!==o&&!a&&(r(),n?e.trigger("renditionenabled"):e.trigger("renditiondisabled")),n)}},Gme=function(e,t,r){var n=e.masterPlaylistController_,s=e.options_.smoothQualityChange,a=s?"smooth":"fast",o=n[a+"QualityChange_"].bind(n);if(t.attributes){var l=t.attributes.RESOLUTION;this.width=l&&l.width,this.height=l&&l.height,this.bandwidth=t.attributes.BANDWIDTH,this.frameRate=t.attributes["FRAME-RATE"]}this.codecs=m0(n.master(),t),this.playlist=t,this.id=r,this.enabled=Wme(e.playlists,t.id,o)},Kme=function(e){e.representations=function(){var t=e.masterPlaylistController_.master(),r=mg(t)?e.masterPlaylistController_.getAudioTrackPlaylists_():t.playlists;return r?r.filter(function(n){return!mk(n)}).map(function(n,s){return new Gme(e,n,n.id)}):[]}},gM=["seeking","seeked","pause","playing","error"],Xme=(function(){function i(t){var r=this;this.masterPlaylistController_=t.masterPlaylistController,this.tech_=t.tech,this.seekable=t.seekable,this.allowSeeksWithinUnsafeLiveWindow=t.allowSeeksWithinUnsafeLiveWindow,this.liveRangeSafeTimeDelta=t.liveRangeSafeTimeDelta,this.media=t.media,this.consecutiveUpdates=0,this.lastRecordedTime=null,this.timer_=null,this.checkCurrentTimeTimeout_=null,this.logger_=xl("PlaybackWatcher"),this.logger_("initialize");var n=function(){return r.monitorCurrentTime_()},s=function(){return r.monitorCurrentTime_()},a=function(){return r.techWaiting_()},o=function(){return r.cancelTimer_()},l=this.masterPlaylistController_,u=["main","subtitle","audio"],c={};u.forEach(function(m){c[m]={reset:function(){return r.resetSegmentDownloads_(m)},updateend:function(){return r.checkSegmentDownloads_(m)}},l[m+"SegmentLoader_"].on("appendsdone",c[m].updateend),l[m+"SegmentLoader_"].on("playlistupdate",c[m].reset),r.tech_.on(["seeked","seeking"],c[m].reset)});var h=function(g){["main","audio"].forEach(function(y){l[y+"SegmentLoader_"][g]("appended",r.seekingAppendCheck_)})};this.seekingAppendCheck_=function(){r.fixesBadSeeks_()&&(r.consecutiveUpdates=0,r.lastRecordedTime=r.tech_.currentTime(),h("off"))},this.clearSeekingAppendCheck_=function(){return h("off")},this.watchForBadSeeking_=function(){r.clearSeekingAppendCheck_(),h("on")},this.tech_.on("seeked",this.clearSeekingAppendCheck_),this.tech_.on("seeking",this.watchForBadSeeking_),this.tech_.on("waiting",a),this.tech_.on(gM,o),this.tech_.on("canplay",s),this.tech_.one("play",n),this.dispose=function(){r.clearSeekingAppendCheck_(),r.logger_("dispose"),r.tech_.off("waiting",a),r.tech_.off(gM,o),r.tech_.off("canplay",s),r.tech_.off("play",n),r.tech_.off("seeking",r.watchForBadSeeking_),r.tech_.off("seeked",r.clearSeekingAppendCheck_),u.forEach(function(m){l[m+"SegmentLoader_"].off("appendsdone",c[m].updateend),l[m+"SegmentLoader_"].off("playlistupdate",c[m].reset),r.tech_.off(["seeked","seeking"],c[m].reset)}),r.checkCurrentTimeTimeout_&&X.clearTimeout(r.checkCurrentTimeTimeout_),r.cancelTimer_()}}var e=i.prototype;return e.monitorCurrentTime_=function(){this.checkCurrentTime_(),this.checkCurrentTimeTimeout_&&X.clearTimeout(this.checkCurrentTimeTimeout_),this.checkCurrentTimeTimeout_=X.setTimeout(this.monitorCurrentTime_.bind(this),250)},e.resetSegmentDownloads_=function(r){var n=this.masterPlaylistController_[r+"SegmentLoader_"];this[r+"StalledDownloads_"]>0&&this.logger_("resetting possible stalled download count for "+r+" loader"),this[r+"StalledDownloads_"]=0,this[r+"Buffered_"]=n.buffered_()},e.checkSegmentDownloads_=function(r){var n=this.masterPlaylistController_,s=n[r+"SegmentLoader_"],a=s.buffered_(),o=$fe(this[r+"Buffered_"],a);if(this[r+"Buffered_"]=a,o){this.resetSegmentDownloads_(r);return}this[r+"StalledDownloads_"]++,this.logger_("found #"+this[r+"StalledDownloads_"]+" "+r+" appends that did not increase buffer (possible stalled download)",{playlistId:s.playlist_&&s.playlist_.id,buffered:lh(a)}),!(this[r+"StalledDownloads_"]<10)&&(this.logger_(r+" loader stalled download exclusion"),this.resetSegmentDownloads_(r),this.tech_.trigger({type:"usage",name:"vhs-"+r+"-download-exclusion"}),r!=="subtitle"&&n.blacklistCurrentPlaylist({message:"Excessive "+r+" segment downloading detected."},1/0))},e.checkCurrentTime_=function(){if(!(this.tech_.paused()||this.tech_.seeking())){var r=this.tech_.currentTime(),n=this.tech_.buffered();if(this.lastRecordedTime===r&&(!n.length||r+nu>=n.end(n.length-1)))return this.techWaiting_();this.consecutiveUpdates>=5&&r===this.lastRecordedTime?(this.consecutiveUpdates++,this.waiting_()):r===this.lastRecordedTime?this.consecutiveUpdates++:(this.consecutiveUpdates=0,this.lastRecordedTime=r)}},e.cancelTimer_=function(){this.consecutiveUpdates=0,this.timer_&&(this.logger_("cancelTimer_"),clearTimeout(this.timer_)),this.timer_=null},e.fixesBadSeeks_=function(){var r=this.tech_.seeking();if(!r)return!1;var n=this.seekable(),s=this.tech_.currentTime(),a=this.afterSeekableWindow_(n,s,this.media(),this.allowSeeksWithinUnsafeLiveWindow),o;if(a){var l=n.end(n.length-1);o=l}if(this.beforeSeekableWindow_(n,s)){var u=n.start(0);o=u+(u===n.end(0)?0:nu)}if(typeof o<"u")return this.logger_("Trying to seek outside of seekable at time "+s+" with "+("seekable range "+WU(n)+". Seeking to ")+(o+".")),this.tech_.setCurrentTime(o),!0;for(var c=this.masterPlaylistController_.sourceUpdater_,h=this.tech_.buffered(),m=c.audioBuffer?c.audioBuffered():null,g=c.videoBuffer?c.videoBuffered():null,y=this.media(),_=y.partTargetDuration?y.partTargetDuration:(y.targetDuration-gd)*2,T=[m,g],E=0;E<T.length;E++)if(T[E]){var w=fk(T[E],s);if(w<_)return!1}var D=Lv(h,s);return D.length===0?!1:(o=D.start(0)+nu,this.logger_("Buffered region starts ("+D.start(0)+") "+(" just beyond seek point ("+s+"). Seeking to "+o+".")),this.tech_.setCurrentTime(o),!0)},e.waiting_=function(){if(!this.techWaiting_()){var r=this.tech_.currentTime(),n=this.tech_.buffered(),s=Mf(n,r);if(s.length&&r+3<=s.end(0)){this.cancelTimer_(),this.tech_.setCurrentTime(r),this.logger_("Stopped at "+r+" while inside a buffered region "+("["+s.start(0)+" -> "+s.end(0)+"]. Attempting to resume ")+"playback by seeking to the current time."),this.tech_.trigger({type:"usage",name:"vhs-unknown-waiting"}),this.tech_.trigger({type:"usage",name:"hls-unknown-waiting"});return}}},e.techWaiting_=function(){var r=this.seekable(),n=this.tech_.currentTime();if(this.tech_.seeking()||this.timer_!==null)return!0;if(this.beforeSeekableWindow_(r,n)){var s=r.end(r.length-1);return this.logger_("Fell out of live window at time "+n+". Seeking to "+("live point (seekable end) "+s)),this.cancelTimer_(),this.tech_.setCurrentTime(s),this.tech_.trigger({type:"usage",name:"vhs-live-resync"}),this.tech_.trigger({type:"usage",name:"hls-live-resync"}),!0}var a=this.tech_.vhs.masterPlaylistController_.sourceUpdater_,o=this.tech_.buffered(),l=this.videoUnderflow_({audioBuffered:a.audioBuffered(),videoBuffered:a.videoBuffered(),currentTime:n});if(l)return this.cancelTimer_(),this.tech_.setCurrentTime(n),this.tech_.trigger({type:"usage",name:"vhs-video-underflow"}),this.tech_.trigger({type:"usage",name:"hls-video-underflow"}),!0;var u=Lv(o,n);if(u.length>0){var c=u.start(0)-n;return this.logger_("Stopped at "+n+", setting timer for "+c+", seeking "+("to "+u.start(0))),this.cancelTimer_(),this.timer_=setTimeout(this.skipTheGap_.bind(this),c*1e3,n),!0}return!1},e.afterSeekableWindow_=function(r,n,s,a){if(a===void 0&&(a=!1),!r.length)return!1;var o=r.end(r.length-1)+nu,l=!s.endList;return l&&a&&(o=r.end(r.length-1)+s.targetDuration*3),n>o},e.beforeSeekableWindow_=function(r,n){return!!(r.length&&r.start(0)>0&&n<r.start(0)-this.liveRangeSafeTimeDelta)},e.videoUnderflow_=function(r){var n=r.videoBuffered,s=r.audioBuffered,a=r.currentTime;if(n){var o;if(n.length&&s.length){var l=Mf(n,a-3),u=Mf(n,a),c=Mf(s,a);c.length&&!u.length&&l.length&&(o={start:l.end(0),end:c.end(0)})}else{var h=Lv(n,a);h.length||(o=this.gapFromVideoUnderflow_(n,a))}return o?(this.logger_("Encountered a gap in video from "+o.start+" to "+o.end+". "+("Seeking to current time "+a)),!0):!1}},e.skipTheGap_=function(r){var n=this.tech_.buffered(),s=this.tech_.currentTime(),a=Lv(n,s);this.cancelTimer_(),!(a.length===0||s!==r)&&(this.logger_("skipTheGap_:","currentTime:",s,"scheduled currentTime:",r,"nextRange start:",a.start(0)),this.tech_.setCurrentTime(a.start(0)+gd),this.tech_.trigger({type:"usage",name:"vhs-gap-skip"}),this.tech_.trigger({type:"usage",name:"hls-gap-skip"}))},e.gapFromVideoUnderflow_=function(r,n){for(var s=Bfe(r),a=0;a<s.length;a++){var o=s.start(a),l=s.end(a);if(n-o<4&&n-o>2)return{start:o,end:l}}return null},i})(),Yme={errorInterval:30,getSource:function(e){var t=this.tech({IWillNotUseThisInPlugins:!0}),r=t.currentSource_||this.currentSource();return e(r)}},Qme=function i(e,t){var r=0,n=0,s=Re.mergeOptions(Yme,t);e.ready(function(){e.trigger({type:"usage",name:"vhs-error-reload-initialized"}),e.trigger({type:"usage",name:"hls-error-reload-initialized"})});var a=function(){n&&e.currentTime(n)},o=function(m){m!=null&&(n=e.duration()!==1/0&&e.currentTime()||0,e.one("loadedmetadata",a),e.src(m),e.trigger({type:"usage",name:"vhs-error-reload"}),e.trigger({type:"usage",name:"hls-error-reload"}),e.play())},l=function(){if(Date.now()-r<s.errorInterval*1e3){e.trigger({type:"usage",name:"vhs-error-reload-canceled"}),e.trigger({type:"usage",name:"hls-error-reload-canceled"});return}if(!s.getSource||typeof s.getSource!="function"){Re.log.error("ERROR: reloadSourceOnError - The option getSource must be a function!");return}return r=Date.now(),s.getSource.call(e,o)},u=function h(){e.off("loadedmetadata",a),e.off("error",l),e.off("dispose",h)},c=function(m){u(),i(e,m)};e.on("error",l),e.on("dispose",u),e.reloadSourceOnError=c},Jme=function(e){Qme(this,e)},D$="2.16.3",Zme="6.0.1",e0e="0.22.1",t0e="4.8.0",r0e="3.1.3",ps={PlaylistLoader:Ff,Playlist:ka,utils:dpe,STANDARD_PLAYLIST_SELECTOR:aM,INITIAL_PLAYLIST_SELECTOR:eme,lastBandwidthSelector:aM,movingAverageBandwidthSelector:Jpe,comparePlaylistBandwidth:_k,comparePlaylistResolution:Qpe,xhr:o$()};Object.keys(Gn).forEach(function(i){Object.defineProperty(ps,i,{get:function(){return Re.log.warn("using Vhs."+i+" is UNSAFE be sure you know what you are doing"),Gn[i]},set:function(t){if(Re.log.warn("using Vhs."+i+" is UNSAFE be sure you know what you are doing"),typeof t!="number"||t<0){Re.log.warn("value of Vhs."+i+" must be greater than or equal to 0");return}Gn[i]=t}})});var P$="videojs-vhs",R$=function(e,t){for(var r=t.media(),n=-1,s=0;s<e.length;s++)if(e[s].id===r.id){n=s;break}e.selectedIndex_=n,e.trigger({selectedIndex:n,type:"change"})},i0e=function(e,t){t.representations().forEach(function(r){e.addQualityLevel(r)}),R$(e,t.playlists)};ps.canPlaySource=function(){return Re.log.warn("HLS is no longer a tech. Please remove it from your player's techOrder.")};var n0e=function(e,t,r){if(!e)return e;var n={};t&&t.attributes&&t.attributes.CODECS&&(n=ax(Hl(t.attributes.CODECS))),r&&r.attributes&&r.attributes.CODECS&&(n.audio=r.attributes.CODECS);var s=R0(n.video),a=R0(n.audio),o={};for(var l in e)o[l]={},a&&(o[l].audioContentType=a),s&&(o[l].videoContentType=s),t.contentProtection&&t.contentProtection[l]&&t.contentProtection[l].pssh&&(o[l].pssh=t.contentProtection[l].pssh),typeof e[l]=="string"&&(o[l].url=e[l]);return Re.mergeOptions(e,o)},s0e=function(e,t){return e.reduce(function(r,n){if(!n.contentProtection)return r;var s=t.reduce(function(a,o){var l=n.contentProtection[o];return l&&l.pssh&&(a[o]={pssh:l.pssh}),a},{});return Object.keys(s).length&&r.push(s),r},[])},a0e=function(e){var t=e.player,r=e.sourceKeySystems,n=e.audioMedia,s=e.mainPlaylists;if(!t.eme.initializeMediaKeys)return Promise.resolve();var a=n?s.concat([n]):s,o=s0e(a,Object.keys(r)),l=[],u=[];return o.forEach(function(c){u.push(new Promise(function(h,m){t.tech_.one("keysessioncreated",h)})),l.push(new Promise(function(h,m){t.eme.initializeMediaKeys({keySystems:c},function(g){if(g){m(g);return}h()})}))}),Promise.race([Promise.all(l),Promise.race(u)])},o0e=function(e){var t=e.player,r=e.sourceKeySystems,n=e.media,s=e.audioMedia,a=n0e(r,n,s);return a?(t.currentSource().keySystems=a,a&&!t.eme?(Re.log.warn("DRM encrypted source cannot be decrypted without a DRM plugin"),!1):!0):!1},L$=function(){if(!X.localStorage)return null;var e=X.localStorage.getItem(P$);if(!e)return null;try{return JSON.parse(e)}catch{return null}},l0e=function(e){if(!X.localStorage)return!1;var t=L$();t=t?Re.mergeOptions(t,e):e;try{X.localStorage.setItem(P$,JSON.stringify(t))}catch{return!1}return t},u0e=function(e){return e.toLowerCase().indexOf("data:application/vnd.videojs.vhs+json,")===0?JSON.parse(e.substring(e.indexOf(",")+1)):e};ps.supportsNativeHls=(function(){if(!Me||!Me.createElement)return!1;var i=Me.createElement("video");if(!Re.getTech("Html5").isSupported())return!1;var e=["application/vnd.apple.mpegurl","audio/mpegurl","audio/x-mpegurl","application/x-mpegurl","video/x-mpegurl","video/mpegurl","application/mpegurl"];return e.some(function(t){return/maybe|probably/i.test(i.canPlayType(t))})})();ps.supportsNativeDash=(function(){return!Me||!Me.createElement||!Re.getTech("Html5").isSupported()?!1:/maybe|probably/i.test(Me.createElement("video").canPlayType("application/dash+xml"))})();ps.supportsTypeNatively=function(i){return i==="hls"?ps.supportsNativeHls:i==="dash"?ps.supportsNativeDash:!1};ps.isSupported=function(){return Re.log.warn("HLS is no longer a tech. Please remove it from your player's techOrder.")};var c0e=Re.getComponent("Component"),Tk=(function(i){Ft(e,i);function e(r,n,s){var a;if(a=i.call(this,n,Re.mergeOptions(s.hls,s.vhs))||this,s.hls&&Object.keys(s.hls).length&&Re.log.warn("Using hls options is deprecated. Please rename `hls` to `vhs` in your options object."),typeof s.initialBandwidth=="number"&&(a.options_.bandwidth=s.initialBandwidth),a.logger_=xl("VhsHandler"),n.options_&&n.options_.playerId){var o=Re(n.options_.playerId);o.hasOwnProperty("hls")||Object.defineProperty(o,"hls",{get:function(){return Re.log.warn("player.hls is deprecated. Use player.tech().vhs instead."),n.trigger({type:"usage",name:"hls-player-access"}),je(a)},configurable:!0}),o.hasOwnProperty("vhs")||Object.defineProperty(o,"vhs",{get:function(){return Re.log.warn("player.vhs is deprecated. Use player.tech().vhs instead."),n.trigger({type:"usage",name:"vhs-player-access"}),je(a)},configurable:!0}),o.hasOwnProperty("dash")||Object.defineProperty(o,"dash",{get:function(){return Re.log.warn("player.dash is deprecated. Use player.tech().vhs instead."),je(a)},configurable:!0}),a.player_=o}if(a.tech_=n,a.source_=r,a.stats={},a.ignoreNextSeekingEvent_=!1,a.setOptions_(),a.options_.overrideNative&&n.overrideNativeAudioTracks&&n.overrideNativeVideoTracks)n.overrideNativeAudioTracks(!0),n.overrideNativeVideoTracks(!0);else if(a.options_.overrideNative&&(n.featuresNativeVideoTracks||n.featuresNativeAudioTracks))throw new Error("Overriding native HLS requires emulated tracks. See https://git.io/vMpjB");return a.on(Me,["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","MSFullscreenChange"],function(l){var u=Me.fullscreenElement||Me.webkitFullscreenElement||Me.mozFullScreenElement||Me.msFullscreenElement;u&&u.contains(a.tech_.el())?a.masterPlaylistController_.fastQualityChange_():a.masterPlaylistController_.checkABR_()}),a.on(a.tech_,"seeking",function(){if(this.ignoreNextSeekingEvent_){this.ignoreNextSeekingEvent_=!1;return}this.setCurrentTime(this.tech_.currentTime())}),a.on(a.tech_,"error",function(){this.tech_.error()&&this.masterPlaylistController_&&this.masterPlaylistController_.pauseLoading()}),a.on(a.tech_,"play",a.play),a}var t=e.prototype;return t.setOptions_=function(){var n=this;if(this.options_.withCredentials=this.options_.withCredentials||!1,this.options_.handleManifestRedirects=this.options_.handleManifestRedirects!==!1,this.options_.limitRenditionByPlayerDimensions=this.options_.limitRenditionByPlayerDimensions!==!1,this.options_.useDevicePixelRatio=this.options_.useDevicePixelRatio||!1,this.options_.smoothQualityChange=this.options_.smoothQualityChange||!1,this.options_.useBandwidthFromLocalStorage=typeof this.source_.useBandwidthFromLocalStorage<"u"?this.source_.useBandwidthFromLocalStorage:this.options_.useBandwidthFromLocalStorage||!1,this.options_.useNetworkInformationApi=this.options_.useNetworkInformationApi||!1,this.options_.useDtsForTimestampOffset=this.options_.useDtsForTimestampOffset||!1,this.options_.customTagParsers=this.options_.customTagParsers||[],this.options_.customTagMappers=this.options_.customTagMappers||[],this.options_.cacheEncryptionKeys=this.options_.cacheEncryptionKeys||!1,typeof this.options_.blacklistDuration!="number"&&(this.options_.blacklistDuration=300),typeof this.options_.bandwidth!="number"&&this.options_.useBandwidthFromLocalStorage){var s=L$();s&&s.bandwidth&&(this.options_.bandwidth=s.bandwidth,this.tech_.trigger({type:"usage",name:"vhs-bandwidth-from-local-storage"}),this.tech_.trigger({type:"usage",name:"hls-bandwidth-from-local-storage"})),s&&s.throughput&&(this.options_.throughput=s.throughput,this.tech_.trigger({type:"usage",name:"vhs-throughput-from-local-storage"}),this.tech_.trigger({type:"usage",name:"hls-throughput-from-local-storage"}))}typeof this.options_.bandwidth!="number"&&(this.options_.bandwidth=Gn.INITIAL_BANDWIDTH),this.options_.enableLowInitialPlaylist=this.options_.enableLowInitialPlaylist&&this.options_.bandwidth===Gn.INITIAL_BANDWIDTH,["withCredentials","useDevicePixelRatio","limitRenditionByPlayerDimensions","bandwidth","smoothQualityChange","customTagParsers","customTagMappers","handleManifestRedirects","cacheEncryptionKeys","playlistSelector","initialPlaylistSelector","experimentalBufferBasedABR","liveRangeSafeTimeDelta","experimentalLLHLS","useNetworkInformationApi","useDtsForTimestampOffset","experimentalExactManifestTimings","experimentalLeastPixelDiffSelector"].forEach(function(a){typeof n.source_[a]<"u"&&(n.options_[a]=n.source_[a])}),this.limitRenditionByPlayerDimensions=this.options_.limitRenditionByPlayerDimensions,this.useDevicePixelRatio=this.options_.useDevicePixelRatio},t.src=function(n,s){var a=this;if(n){this.setOptions_(),this.options_.src=u0e(this.source_.src),this.options_.tech=this.tech_,this.options_.externVhs=ps,this.options_.sourceType=E6(s),this.options_.seekTo=function(u){a.tech_.setCurrentTime(u)},this.options_.smoothQualityChange&&Re.log.warn("smoothQualityChange is deprecated and will be removed in the next major version"),this.masterPlaylistController_=new qme(this.options_);var o=Re.mergeOptions({liveRangeSafeTimeDelta:nu},this.options_,{seekable:function(){return a.seekable()},media:function(){return a.masterPlaylistController_.media()},masterPlaylistController:this.masterPlaylistController_});this.playbackWatcher_=new Xme(o),this.masterPlaylistController_.on("error",function(){var u=Re.players[a.tech_.options_.playerId],c=a.masterPlaylistController_.error;typeof c=="object"&&!c.code?c.code=3:typeof c=="string"&&(c={message:c,code:3}),u.error(c)});var l=this.options_.experimentalBufferBasedABR?ps.movingAverageBandwidthSelector(.55):ps.STANDARD_PLAYLIST_SELECTOR;this.masterPlaylistController_.selectPlaylist=this.selectPlaylist?this.selectPlaylist.bind(this):l.bind(this),this.masterPlaylistController_.selectInitialPlaylist=ps.INITIAL_PLAYLIST_SELECTOR.bind(this),this.playlists=this.masterPlaylistController_.masterPlaylistLoader_,this.mediaSource=this.masterPlaylistController_.mediaSource,Object.defineProperties(this,{selectPlaylist:{get:function(){return this.masterPlaylistController_.selectPlaylist},set:function(c){this.masterPlaylistController_.selectPlaylist=c.bind(this)}},throughput:{get:function(){return this.masterPlaylistController_.mainSegmentLoader_.throughput.rate},set:function(c){this.masterPlaylistController_.mainSegmentLoader_.throughput.rate=c,this.masterPlaylistController_.mainSegmentLoader_.throughput.count=1}},bandwidth:{get:function(){var c=this.masterPlaylistController_.mainSegmentLoader_.bandwidth,h=X.navigator.connection||X.navigator.mozConnection||X.navigator.webkitConnection,m=1e7;if(this.options_.useNetworkInformationApi&&h){var g=h.downlink*1e3*1e3;g>=m&&c>=m?c=Math.max(c,g):c=g}return c},set:function(c){this.masterPlaylistController_.mainSegmentLoader_.bandwidth=c,this.masterPlaylistController_.mainSegmentLoader_.throughput={rate:0,count:0}}},systemBandwidth:{get:function(){var c=1/(this.bandwidth||1),h;this.throughput>0?h=1/this.throughput:h=0;var m=Math.floor(1/(c+h));return m},set:function(){Re.log.error('The "systemBandwidth" property is read-only')}}}),this.options_.bandwidth&&(this.bandwidth=this.options_.bandwidth),this.options_.throughput&&(this.throughput=this.options_.throughput),Object.defineProperties(this.stats,{bandwidth:{get:function(){return a.bandwidth||0},enumerable:!0},mediaRequests:{get:function(){return a.masterPlaylistController_.mediaRequests_()||0},enumerable:!0},mediaRequestsAborted:{get:function(){return a.masterPlaylistController_.mediaRequestsAborted_()||0},enumerable:!0},mediaRequestsTimedout:{get:function(){return a.masterPlaylistController_.mediaRequestsTimedout_()||0},enumerable:!0},mediaRequestsErrored:{get:function(){return a.masterPlaylistController_.mediaRequestsErrored_()||0},enumerable:!0},mediaTransferDuration:{get:function(){return a.masterPlaylistController_.mediaTransferDuration_()||0},enumerable:!0},mediaBytesTransferred:{get:function(){return a.masterPlaylistController_.mediaBytesTransferred_()||0},enumerable:!0},mediaSecondsLoaded:{get:function(){return a.masterPlaylistController_.mediaSecondsLoaded_()||0},enumerable:!0},mediaAppends:{get:function(){return a.masterPlaylistController_.mediaAppends_()||0},enumerable:!0},mainAppendsToLoadedData:{get:function(){return a.masterPlaylistController_.mainAppendsToLoadedData_()||0},enumerable:!0},audioAppendsToLoadedData:{get:function(){return a.masterPlaylistController_.audioAppendsToLoadedData_()||0},enumerable:!0},appendsToLoadedData:{get:function(){return a.masterPlaylistController_.appendsToLoadedData_()||0},enumerable:!0},timeToLoadedData:{get:function(){return a.masterPlaylistController_.timeToLoadedData_()||0},enumerable:!0},buffered:{get:function(){return lh(a.tech_.buffered())},enumerable:!0},currentTime:{get:function(){return a.tech_.currentTime()},enumerable:!0},currentSource:{get:function(){return a.tech_.currentSource_},enumerable:!0},currentTech:{get:function(){return a.tech_.name_},enumerable:!0},duration:{get:function(){return a.tech_.duration()},enumerable:!0},master:{get:function(){return a.playlists.master},enumerable:!0},playerDimensions:{get:function(){return a.tech_.currentDimensions()},enumerable:!0},seekable:{get:function(){return lh(a.tech_.seekable())},enumerable:!0},timestamp:{get:function(){return Date.now()},enumerable:!0},videoPlaybackQuality:{get:function(){return a.tech_.getVideoPlaybackQuality()},enumerable:!0}}),this.tech_.one("canplay",this.masterPlaylistController_.setupFirstPlay.bind(this.masterPlaylistController_)),this.tech_.on("bandwidthupdate",function(){a.options_.useBandwidthFromLocalStorage&&l0e({bandwidth:a.bandwidth,throughput:Math.round(a.throughput)})}),this.masterPlaylistController_.on("selectedinitialmedia",function(){Kme(a)}),this.masterPlaylistController_.sourceUpdater_.on("createdsourcebuffers",function(){a.setupEme_()}),this.on(this.masterPlaylistController_,"progress",function(){this.tech_.trigger("progress")}),this.on(this.masterPlaylistController_,"firstplay",function(){this.ignoreNextSeekingEvent_=!0}),this.setupQualityLevels_(),this.tech_.el()&&(this.mediaSourceUrl_=X.URL.createObjectURL(this.masterPlaylistController_.mediaSource),this.tech_.src(this.mediaSourceUrl_))}},t.createKeySessions_=function(){var n=this,s=this.masterPlaylistController_.mediaTypes_.AUDIO.activePlaylistLoader;this.logger_("waiting for EME key session creation"),a0e({player:this.player_,sourceKeySystems:this.source_.keySystems,audioMedia:s&&s.media(),mainPlaylists:this.playlists.master.playlists}).then(function(){n.logger_("created EME key session"),n.masterPlaylistController_.sourceUpdater_.initializedEme()}).catch(function(a){n.logger_("error while creating EME key session",a),n.player_.error({message:"Failed to initialize media keys for EME",code:3})})},t.handleWaitingForKey_=function(){this.logger_("waitingforkey fired, attempting to create any new key sessions"),this.createKeySessions_()},t.setupEme_=function(){var n=this,s=this.masterPlaylistController_.mediaTypes_.AUDIO.activePlaylistLoader,a=o0e({player:this.player_,sourceKeySystems:this.source_.keySystems,media:this.playlists.media(),audioMedia:s&&s.media()});if(this.player_.tech_.on("keystatuschange",function(o){if(o.status==="output-restricted"){var l=n.masterPlaylistController_.master();if(!(!l||!l.playlists)){var u=[];if(l.playlists.forEach(function(h){h&&h.attributes&&h.attributes.RESOLUTION&&h.attributes.RESOLUTION.height>=720&&(!h.excludeUntil||h.excludeUntil<1/0)&&(h.excludeUntil=1/0,u.push(h))}),u.length){var c;(c=Re.log).warn.apply(c,['DRM keystatus changed to "output-restricted." Removing the following HD playlists that will most likely fail to play and clearing the buffer. This may be due to HDCP restrictions on the stream and the capabilities of the current device.'].concat(u)),n.masterPlaylistController_.fastQualityChange_()}}}}),this.handleWaitingForKey_=this.handleWaitingForKey_.bind(this),this.player_.tech_.on("waitingforkey",this.handleWaitingForKey_),Re.browser.IE_VERSION===11||!a){this.masterPlaylistController_.sourceUpdater_.initializedEme();return}this.createKeySessions_()},t.setupQualityLevels_=function(){var n=this,s=Re.players[this.tech_.options_.playerId];!s||!s.qualityLevels||this.qualityLevels_||(this.qualityLevels_=s.qualityLevels(),this.masterPlaylistController_.on("selectedinitialmedia",function(){i0e(n.qualityLevels_,n)}),this.playlists.on("mediachange",function(){R$(n.qualityLevels_,n.playlists)}))},e.version=function(){return{"@videojs/http-streaming":D$,"mux.js":Zme,"mpd-parser":e0e,"m3u8-parser":t0e,"aes-decrypter":r0e}},t.version=function(){return this.constructor.version()},t.canChangeType=function(){return I$.canChangeType()},t.play=function(){this.masterPlaylistController_.play()},t.setCurrentTime=function(n){this.masterPlaylistController_.setCurrentTime(n)},t.duration=function(){return this.masterPlaylistController_.duration()},t.seekable=function(){return this.masterPlaylistController_.seekable()},t.dispose=function(){this.playbackWatcher_&&this.playbackWatcher_.dispose(),this.masterPlaylistController_&&this.masterPlaylistController_.dispose(),this.qualityLevels_&&this.qualityLevels_.dispose(),this.player_&&(delete this.player_.vhs,delete this.player_.dash,delete this.player_.hls),this.tech_&&this.tech_.vhs&&delete this.tech_.vhs,this.tech_&&delete this.tech_.hls,this.mediaSourceUrl_&&X.URL.revokeObjectURL&&(X.URL.revokeObjectURL(this.mediaSourceUrl_),this.mediaSourceUrl_=null),this.tech_&&this.tech_.off("waitingforkey",this.handleWaitingForKey_),i.prototype.dispose.call(this)},t.convertToProgramTime=function(n,s){return ype({playlist:this.masterPlaylistController_.media(),time:n,callback:s})},t.seekToProgramTime=function(n,s,a,o){return a===void 0&&(a=!0),o===void 0&&(o=2),_pe({programTime:n,playlist:this.masterPlaylistController_.media(),retryCount:o,pauseAfterSeek:a,seekTo:this.options_.seekTo,tech:this.options_.tech,callback:s})},e})(c0e),N0={name:"videojs-http-streaming",VERSION:D$,canHandleSource:function(e,t){t===void 0&&(t={});var r=Re.mergeOptions(Re.options,t);return N0.canPlayType(e.type,r)},handleSource:function(e,t,r){r===void 0&&(r={});var n=Re.mergeOptions(Re.options,r);return t.vhs=new Tk(e,t,n),Re.hasOwnProperty("hls")||Object.defineProperty(t,"hls",{get:function(){return Re.log.warn("player.tech().hls is deprecated. Use player.tech().vhs instead."),t.vhs},configurable:!0}),t.vhs.xhr=o$(),t.vhs.src(e.src,e.type),t.vhs},canPlayType:function(e,t){var r=E6(e);if(!r)return"";var n=N0.getOverrideNative(t),s=ps.supportsTypeNatively(r),a=!s||n;return a?"maybe":""},getOverrideNative:function(e){e===void 0&&(e={});var t=e,r=t.vhs,n=r===void 0?{}:r,s=t.hls,a=s===void 0?{}:s,o=!(Re.browser.IS_ANY_SAFARI||Re.browser.IS_IOS),l=n.overrideNative,u=l===void 0?o:l,c=a.overrideNative,h=c===void 0?!1:c;return h||u}},d0e=function(){return Uy("avc1.4d400d,mp4a.40.2")};d0e()&&Re.getTech("Html5").registerSourceHandler(N0,0);Re.VhsHandler=Tk;Object.defineProperty(Re,"HlsHandler",{get:function(){return Re.log.warn("videojs.HlsHandler is deprecated. Use videojs.VhsHandler instead."),Tk},configurable:!0});Re.VhsSourceHandler=N0;Object.defineProperty(Re,"HlsSourceHandler",{get:function(){return Re.log.warn("videojs.HlsSourceHandler is deprecated. Use videojs.VhsSourceHandler instead."),N0},configurable:!0});Re.Vhs=ps;Object.defineProperty(Re,"Hls",{get:function(){return Re.log.warn("videojs.Hls is deprecated. Use videojs.Vhs instead."),ps},configurable:!0});Re.use||(Re.registerComponent("Hls",ps),Re.registerComponent("Vhs",ps));Re.options.vhs=Re.options.vhs||{};Re.options.hls=Re.options.hls||{};if(!Re.getPlugin||!Re.getPlugin("reloadSourceOnError")){var h0e=Re.registerPlugin||Re.plugin;h0e("reloadSourceOnError",Jme)}var f0e="1.1.6";function O$(i,e){i.prototype=Object.create(e.prototype),i.prototype.constructor=i,i.__proto__=e}function vM(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}var p0e=Re.getComponent("MenuItem"),m0e=Re.getComponent("Component"),cx=(function(i){O$(e,i);function e(r,n){return n.selectable=!0,n.multiSelectable=!1,i.call(this,r,n)||this}var t=e.prototype;return t.handleClick=function(){var n=this.options_;console.log("Changing quality to:",n.label),i.prototype.handleClick.call(this);for(var s=this.player().qualityLevels(),a=0;a<s.length;a++)n.index==s.length||n.index==a?s[a].enabled=!0:s[a].enabled=!1},t.update=function(){var n=this.player().qualityLevels().selectedIndex;this.selected(this.options_.index==n)},e})(p0e);m0e.registerComponent("SourceMenuItem",cx);var Fv=Re.getComponent("MenuButton"),g0e=(function(i){O$(e,i);function e(r,n){var s;s=i.call(this,r,n)||this,Fv.apply(vM(s),arguments);var a=s.player().qualityLevels();if(n&&n.default){if(n.default=="low")for(var o=0;o<a.length;o++)a[o].enabled=o==0;else if(n.default="high")for(var o=0;o<a.length;o++)a[o].enabled=o==a.length-1}return s.player().qualityLevels().on(["change","addqualitylevel"],Re.bind(vM(s),s.update)),s}var t=e.prototype;return t.createEl=function(){return Re.dom.createEl("div",{className:"vjs-http-source-selector vjs-menu-button vjs-menu-button-popup vjs-control vjs-button"})},t.buildCSSClass=function(){return Fv.prototype.buildCSSClass.call(this)+" vjs-icon-cog"},t.update=function(){return Fv.prototype.update.call(this)},t.createItems=function(){for(var n=[],s=this.player().qualityLevels(),a=[],o=0;o<s.length;o++){var l=s.length-(o+1),u=l===s.selectedIndex,c=""+l,h=l;s[l].height?(c=s[l].height+"p",h=parseInt(s[l].height,10)):s[l].bitrate&&(c=Math.floor(s[l].bitrate/1e3)+" kbps",h=parseInt(s[l].bitrate,10)),!(a.indexOf(c)>=0)&&(a.push(c),n.push(new cx(this.player_,{label:c,index:l,selected:u,sortVal:h})))}return s.length>1&&n.push(new cx(this.player_,{label:"Auto",index:s.length,selected:!1,sortVal:99999})),n.sort(function(m,g){return m.options_.sortVal<g.options_.sortVal?1:m.options_.sortVal>g.options_.sortVal?-1:0}),n},e})(Fv),v0e={},y0e=Re.registerPlugin||Re.plugin,_0e=function(e,t){if(e.addClass("vjs-http-source-selector"),console.log("videojs-http-source-selector initialized!"),console.log("player.techName_:"+e.techName_),e.techName_!="Html5")return!1;e.on(["loadedmetadata"],function(r){if(e.qualityLevels(),Re.log("loadmetadata event"),e.videojs_http_source_selector_initialized=="undefined"||e.videojs_http_source_selector_initialized==!0)console.log("player.videojs_http_source_selector_initialized == true");else{console.log("player.videojs_http_source_selector_initialized == false"),e.videojs_http_source_selector_initialized=!0;var n=e.controlBar,s=n.getChild("fullscreenToggle").el();n.el().insertBefore(n.addChild("SourceMenuButton").el(),s)}})},M$=function(e){var t=this;this.ready(function(){_0e(t,Re.mergeOptions(v0e,e))}),Re.registerComponent("SourceMenuButton",g0e),Re.registerComponent("SourceMenuItem",cx)};y0e("httpSourceSelector",M$);M$.VERSION=f0e;const F$=i=>{const e=ea.useRef(null),t=ea.useRef(null),{options:r,onReady:n,headers:s}=i;return ea.useEffect(()=>{if(t.current){const a=t.current;typeof a.httpSourceSelector=="function"&&a&&a.httpSourceSelector(),a.autoplay(r.autoplay),a.src(r.sources)}else{const a=document.createElement("video-js");a.classList.add("vjs-big-play-centered"),e.current.appendChild(a),_e.Vhs.xhr.onRequest=l=>{if(l.headers||(l.headers={}),s.length>0)for(let u=0;u<s.length;u++)s[u].key!==""&&s[u].key!=="User-Agent"&&(l.headers[s[u].key]=s[u].value)};const o=t.current=_e(a,r,()=>{_e.log("player is ready"),n&&n(o)});typeof o.httpSourceSelector=="function"&&o&&o.httpSourceSelector()}},[r,e]),ea.useEffect(()=>{const a=t.current;return()=>{a&&!a.isDisposed()&&(a.dispose(),t.current=null)}},[t]),V.jsx("div",{"data-vjs-player":!0,children:V.jsx("div",{ref:e})})};function x0e(){const{t:i}=No(),e=j.useContext(yu);cc();const[t,r]=j.useState(null),n=G=>{let H=e.settings.playerSource;console.log("os_type",H);let re={autoplay:!0,controls:!0,responsive:!0,fluid:!0,muted:!0,playsinline:!0,html5:{vhs:{overrideNative:!0}},sources:[{src:G,type:H}]};console.log("data",re),r(re)},s=j.useRef(null),[a,o]=j.useState([]),[l,u]=j.useState(""),[c,h]=j.useState(""),[m,g]=j.useState(""),[y,_]=j.useState(!1),[T,E]=j.useState([]);j.useEffect(()=>{let G={},H=new URLSearchParams(window.location.search).entries();for(let[re,se]of H)G[re]=se;G.url!==void 0&&(g(G.url),R(G.url))},[]);const w=G=>{g(G.target.value)},D=()=>{n(m),s.current!==null&&s.current.play()},R=G=>{n(G),s.current!==null&&s.current.play()},A=()=>{L()},L=()=>{_(!1)},F=(G,H,re)=>{E(se=>se.map((de,me)=>me===H?{...de,key:re.target.value}:de))},B=(G,H,re)=>{E(se=>se.map((de,me)=>me===H?{...de,value:re.target.value}:de))},M=G=>{E(H=>H.filter((re,se)=>se!==G))},k=()=>{E([...T,{key:"",value:""}])},q=G=>{s.current=G,o([G.error()]),G.on("waiting",()=>{console.log("player is waiting")}),G.on("error",H=>{console.log("error",H)}),G.on("dispose",()=>{console.log("player will dispose")})};return V.jsxs(hr,{style:{padding:"0 20px"},children:[V.jsxs(hr,{style:{display:"flex",alignItems:"center"},children:[V.jsx(ki,{sx:{width:550,margin:"10px"},children:V.jsx(Ws,{sx:{fontSize:"11px"},label:i("m3u8"),size:"small",id:"standard-multiline-static",value:m,onChange:w})}),m!==""&&!y?V.jsx(f_,{size:"small",onClick:D,variant:"contained",startIcon:V.jsx(Gte,{}),children:i("")}):"",m!==""&&y?V.jsx(f_,{size:"small",onClick:A,variant:"contained",startIcon:V.jsx(Kte,{}),children:i("")}):""]}),V.jsx(hr,{children:V.jsxs(ki,{sx:{width:550,margin:"10px"},children:[V.jsx(hr,{sx:{marginBottom:"10px"},children:V.jsxs(mi,{size:"small",onClick:k,variant:"contained",children:["+ ",i("")]})}),T.map((G,H)=>V.jsxs(hr,{sx:{marginBottom:"10px",display:"flex",alignItems:"center"},children:[V.jsx(Ws,{sx:{fontSize:"11px",marginRight:"5px"},label:"key",size:"small",id:"standard-multiline-static",value:G.key,onChange:F.bind(this,G,H)}),V.jsx(Ws,{sx:{fontSize:"11px"},label:"value",size:"small",id:"standard-multiline-static",value:G.value,onChange:B.bind(this,G,H)}),V.jsx(p_,{color:"disabled",onClick:()=>M(H)})]},H))]})}),V.jsxs(hr,{sx:{display:"flex",flexDirection:"column"},children:[V.jsxs(hr,{sx:{display:"flex",alignItems:"center"},children:[V.jsx(hr,{sx:{marginLeft:"10px"},children:c!==""?V.jsx("img",{src:c,height:"50"}):""}),V.jsx("h2",{style:{display:"flex",alignItems:"center"},children:l})]}),V.jsx(ki,{sx:{margin:"10px"},children:t===null?"":V.jsx(F$,{options:t,onReady:q,headers:T})})]})]})}const T0e=Qr(V.jsx("path",{d:"M20 18c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2H4c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2H0v2h24v-2zM4 6h16v10H4z"})),b0e="/assets/icon-BiexIA3y.png";function S0e(i){return or("MuiListItem",i)}ar("MuiListItem",["root","container","dense","alignItemsFlexStart","divider","gutters","padding","secondaryAction"]);function C0e(i){return or("MuiListItemButton",i)}const Sf=ar("MuiListItemButton",["root","focusVisible","dense","alignItemsFlexStart","disabled","divider","gutters","selected"]),E0e=(i,e)=>{const{ownerState:t}=i;return[e.root,t.dense&&e.dense,t.alignItems==="flex-start"&&e.alignItemsFlexStart,t.divider&&e.divider,!t.disableGutters&&e.gutters]},w0e=i=>{const{alignItems:e,classes:t,dense:r,disabled:n,disableGutters:s,divider:a,selected:o}=i,u=lr({root:["root",r&&"dense",!s&&"gutters",a&&"divider",n&&"disabled",e==="flex-start"&&"alignItemsFlexStart",o&&"selected"]},C0e,t);return{...t,...u}},k0e=ft(wh,{shouldForwardProp:i=>Jn(i)||i==="classes",name:"MuiListItemButton",slot:"Root",overridesResolver:E0e})(Tr(({theme:i})=>({display:"flex",flexGrow:1,justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",minWidth:0,boxSizing:"border-box",textAlign:"left",paddingTop:8,paddingBottom:8,transition:i.transitions.create("background-color",{duration:i.transitions.duration.shortest}),"&:hover":{textDecoration:"none",backgroundColor:(i.vars||i).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${Sf.selected}`]:{backgroundColor:i.vars?`rgba(${i.vars.palette.primary.mainChannel} / ${i.vars.palette.action.selectedOpacity})`:Gr(i.palette.primary.main,i.palette.action.selectedOpacity),[`&.${Sf.focusVisible}`]:{backgroundColor:i.vars?`rgba(${i.vars.palette.primary.mainChannel} / calc(${i.vars.palette.action.selectedOpacity} + ${i.vars.palette.action.focusOpacity}))`:Gr(i.palette.primary.main,i.palette.action.selectedOpacity+i.palette.action.focusOpacity)}},[`&.${Sf.selected}:hover`]:{backgroundColor:i.vars?`rgba(${i.vars.palette.primary.mainChannel} / calc(${i.vars.palette.action.selectedOpacity} + ${i.vars.palette.action.hoverOpacity}))`:Gr(i.palette.primary.main,i.palette.action.selectedOpacity+i.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:i.vars?`rgba(${i.vars.palette.primary.mainChannel} / ${i.vars.palette.action.selectedOpacity})`:Gr(i.palette.primary.main,i.palette.action.selectedOpacity)}},[`&.${Sf.focusVisible}`]:{backgroundColor:(i.vars||i).palette.action.focus},[`&.${Sf.disabled}`]:{opacity:(i.vars||i).palette.action.disabledOpacity},variants:[{props:({ownerState:e})=>e.divider,style:{borderBottom:`1px solid ${(i.vars||i).palette.divider}`,backgroundClip:"padding-box"}},{props:{alignItems:"flex-start"},style:{alignItems:"flex-start"}},{props:({ownerState:e})=>!e.disableGutters,style:{paddingLeft:16,paddingRight:16}},{props:({ownerState:e})=>e.dense,style:{paddingTop:4,paddingBottom:4}}]}))),A0e=j.forwardRef(function(e,t){const r=ur({props:e,name:"MuiListItemButton"}),{alignItems:n="center",autoFocus:s=!1,component:a="div",children:o,dense:l=!1,disableGutters:u=!1,divider:c=!1,focusVisibleClassName:h,selected:m=!1,className:g,...y}=r,_=j.useContext(cl),T=j.useMemo(()=>({dense:l||_.dense||!1,alignItems:n,disableGutters:u}),[n,_.dense,l,u]),E=j.useRef(null);ac(()=>{s&&E.current&&E.current.focus()},[s]);const w={...r,alignItems:n,dense:T.dense,disableGutters:u,divider:c,selected:m},D=w0e(w),R=mn(E,t);return V.jsx(cl.Provider,{value:T,children:V.jsx(k0e,{ref:R,href:y.href||y.to,component:(y.href||y.to)&&a==="div"?"button":a,focusVisibleClassName:Nt(D.focusVisible,h),ownerState:w,className:Nt(D.root,g),...y,classes:D,children:o})})});function I0e(i){return or("MuiListItemSecondaryAction",i)}ar("MuiListItemSecondaryAction",["root","disableGutters"]);const D0e=i=>{const{disableGutters:e,classes:t}=i;return lr({root:["root",e&&"disableGutters"]},I0e,t)},P0e=ft("div",{name:"MuiListItemSecondaryAction",slot:"Root",overridesResolver:(i,e)=>{const{ownerState:t}=i;return[e.root,t.disableGutters&&e.disableGutters]}})({position:"absolute",right:16,top:"50%",transform:"translateY(-50%)",variants:[{props:({ownerState:i})=>i.disableGutters,style:{right:0}}]}),B$=j.forwardRef(function(e,t){const r=ur({props:e,name:"MuiListItemSecondaryAction"}),{className:n,...s}=r,a=j.useContext(cl),o={...r,disableGutters:a.disableGutters},l=D0e(o);return V.jsx(P0e,{className:Nt(l.root,n),ownerState:o,ref:t,...s})});B$.muiName="ListItemSecondaryAction";const R0e=(i,e)=>{const{ownerState:t}=i;return[e.root,t.dense&&e.dense,t.alignItems==="flex-start"&&e.alignItemsFlexStart,t.divider&&e.divider,!t.disableGutters&&e.gutters,!t.disablePadding&&e.padding,t.hasSecondaryAction&&e.secondaryAction]},L0e=i=>{const{alignItems:e,classes:t,dense:r,disableGutters:n,disablePadding:s,divider:a,hasSecondaryAction:o}=i;return lr({root:["root",r&&"dense",!n&&"gutters",!s&&"padding",a&&"divider",e==="flex-start"&&"alignItemsFlexStart",o&&"secondaryAction"],container:["container"]},S0e,t)},O0e=ft("div",{name:"MuiListItem",slot:"Root",overridesResolver:R0e})(Tr(({theme:i})=>({display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",width:"100%",boxSizing:"border-box",textAlign:"left",variants:[{props:({ownerState:e})=>!e.disablePadding,style:{paddingTop:8,paddingBottom:8}},{props:({ownerState:e})=>!e.disablePadding&&e.dense,style:{paddingTop:4,paddingBottom:4}},{props:({ownerState:e})=>!e.disablePadding&&!e.disableGutters,style:{paddingLeft:16,paddingRight:16}},{props:({ownerState:e})=>!e.disablePadding&&!!e.secondaryAction,style:{paddingRight:48}},{props:({ownerState:e})=>!!e.secondaryAction,style:{[`& > .${Sf.root}`]:{paddingRight:48}}},{props:{alignItems:"flex-start"},style:{alignItems:"flex-start"}},{props:({ownerState:e})=>e.divider,style:{borderBottom:`1px solid ${(i.vars||i).palette.divider}`,backgroundClip:"padding-box"}},{props:({ownerState:e})=>e.button,style:{transition:i.transitions.create("background-color",{duration:i.transitions.duration.shortest}),"&:hover":{textDecoration:"none",backgroundColor:(i.vars||i).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}}}},{props:({ownerState:e})=>e.hasSecondaryAction,style:{paddingRight:48}}]}))),M0e=ft("li",{name:"MuiListItem",slot:"Container"})({position:"relative"}),F0e=j.forwardRef(function(e,t){const r=ur({props:e,name:"MuiListItem"}),{alignItems:n="center",children:s,className:a,component:o,components:l={},componentsProps:u={},ContainerComponent:c="li",ContainerProps:{className:h,...m}={},dense:g=!1,disableGutters:y=!1,disablePadding:_=!1,divider:T=!1,secondaryAction:E,slotProps:w={},slots:D={},...R}=r,A=j.useContext(cl),L=j.useMemo(()=>({dense:g||A.dense||!1,alignItems:n,disableGutters:y}),[n,A.dense,g,y]),F=j.useRef(null),B=j.Children.toArray(s),M=B.length&&Ry(B[B.length-1],["ListItemSecondaryAction"]),k={...r,alignItems:n,dense:L.dense,disableGutters:y,disablePadding:_,divider:T,hasSecondaryAction:M},q=L0e(k),G=mn(F,t),H=D.root||l.Root||O0e,re=w.root||u.root||{},se={className:Nt(q.root,re.className,a),...R};let de=o||"li";return M?(de=!se.component&&!o?"div":de,c==="li"&&(de==="li"?de="div":se.component==="li"&&(se.component="div")),V.jsx(cl.Provider,{value:L,children:V.jsxs(M0e,{as:c,className:Nt(q.container,h),ref:G,ownerState:k,...m,children:[V.jsx(H,{...re,...!C0(H)&&{as:de,ownerState:{...k,...re.ownerState}},...se,children:B}),B.pop()]})})):V.jsx(cl.Provider,{value:L,children:V.jsxs(H,{...re,as:de,ref:G,...!C0(H)&&{ownerState:{...k,...re.ownerState}},...se,children:[B,E&&V.jsx(B$,{children:E})]})})}),B0e=Qr(V.jsx("path",{d:"M11 21h-1l1-7H7.5c-.58 0-.57-.32-.38-.66s.05-.08.07-.12C8.48 10.94 10.42 7.54 13 3h1l-1 7h3.5c.49 0 .56.33.47.51l-.07.15C12.96 17.55 11 21 11 21"})),N0e=Qr(V.jsx("path",{d:"M19.14 12.94c.04-.3.06-.61.06-.94 0-.32-.02-.64-.07-.94l2.03-1.58c.18-.14.23-.41.12-.61l-1.92-3.32c-.12-.22-.37-.29-.59-.22l-2.39.96c-.5-.38-1.03-.7-1.62-.94l-.36-2.54c-.04-.24-.24-.41-.48-.41h-3.84c-.24 0-.43.17-.47.41l-.36 2.54c-.59.24-1.13.57-1.62.94l-2.39-.96c-.22-.08-.47 0-.59.22L2.74 8.87c-.12.21-.08.47.12.61l2.03 1.58c-.05.3-.09.63-.09.94s.02.64.07.94l-2.03 1.58c-.18.14-.23.41-.12.61l1.92 3.32c.12.22.37.29.59.22l2.39-.96c.5.38 1.03.7 1.62.94l.36 2.54c.05.24.24.41.48.41h3.84c.24 0 .44-.17.47-.41l.36-2.54c.59-.24 1.13-.56 1.62-.94l2.39.96c.22.08.47 0 .59-.22l1.92-3.32c.12-.22.07-.47-.12-.61zM12 15.6c-1.98 0-3.6-1.62-3.6-3.6s1.62-3.6 3.6-3.6 3.6 1.62 3.6 3.6-1.62 3.6-3.6 3.6"})),U0e=Qr(V.jsx("path",{d:"M12 2C6.49 2 2 6.49 2 12s4.49 10 10 10 10-4.49 10-10S17.51 2 12 2m0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8m3-8c0 1.66-1.34 3-3 3s-3-1.34-3-3 1.34-3 3-3 3 1.34 3 3"})),N$=Qr(V.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m-1 17.93c-3.95-.49-7-3.85-7-7.93 0-.62.08-1.21.21-1.79L9 15v1c0 1.1.9 2 2 2zm6.9-2.54c-.26-.81-1-1.39-1.9-1.39h-1v-3c0-.55-.45-1-1-1H8v-2h2c.55 0 1-.45 1-1V7h2c1.1 0 2-.9 2-2v-.41c2.93 1.19 5 4.06 5 7.41 0 2.08-.8 3.97-2.1 5.39"})),$0e=Qr(V.jsx("path",{d:"M19.35 10.04C18.67 6.59 15.64 4 12 4 9.11 4 6.6 5.64 5.35 8.04 2.34 8.36 0 10.91 0 14c0 3.31 2.69 6 6 6h13c2.76 0 5-2.24 5-5 0-2.64-2.05-4.78-4.65-4.96M19 18H6c-2.21 0-4-1.79-4-4s1.79-4 4-4h.71C7.37 7.69 9.48 6 12 6c3.04 0 5.5 2.46 5.5 5.5v.5H19c1.66 0 3 1.34 3 3s-1.34 3-3 3"})),U$=Qr(V.jsx("path",{d:"M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5M12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5m0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3"})),j0e=Qr(V.jsx("path",{d:"m12 8-6 6 1.41 1.41L12 10.83l4.59 4.58L18 14z"})),z0e=Qr(V.jsx("path",{d:"M16.59 8.59 12 13.17 7.41 8.59 6 10l6 6 6-6z"}));function H0e(i,e,t){const r=e.getBoundingClientRect(),n=t&&t.getBoundingClientRect(),s=pl(e);let a;if(e.fakeTransform)a=e.fakeTransform;else{const u=s.getComputedStyle(e);a=u.getPropertyValue("-webkit-transform")||u.getPropertyValue("transform")}let o=0,l=0;if(a&&a!=="none"&&typeof a=="string"){const u=a.split("(")[1].split(")")[0].split(",");o=parseInt(u[4],10),l=parseInt(u[5],10)}return i==="left"?n?`translateX(${n.right+o-r.left}px)`:`translateX(${s.innerWidth+o-r.left}px)`:i==="right"?n?`translateX(-${r.right-n.left-o}px)`:`translateX(-${r.left+r.width-o}px)`:i==="up"?n?`translateY(${n.bottom+l-r.top}px)`:`translateY(${s.innerHeight+l-r.top}px)`:n?`translateY(-${r.top-n.top+r.height-l}px)`:`translateY(-${r.top+r.height-l}px)`}function V0e(i){return typeof i=="function"?i():i}function Bv(i,e,t){const r=V0e(t),n=H0e(i,e,r);n&&(e.style.webkitTransform=n,e.style.transform=n)}const q0e=j.forwardRef(function(e,t){const r=Ph(),n={enter:r.transitions.easing.easeOut,exit:r.transitions.easing.sharp},s={enter:r.transitions.duration.enteringScreen,exit:r.transitions.duration.leavingScreen},{addEndListener:a,appear:o=!0,children:l,container:u,direction:c="down",easing:h=n,in:m,onEnter:g,onEntered:y,onEntering:_,onExit:T,onExited:E,onExiting:w,style:D,timeout:R=s,TransitionComponent:A=yl,...L}=e,F=j.useRef(null),B=mn(Oh(l),F,t),M=ue=>oe=>{ue&&(oe===void 0?ue(F.current):ue(F.current,oe))},k=M((ue,oe)=>{Bv(c,ue,u),Ew(ue),g&&g(ue,oe)}),q=M((ue,oe)=>{const ce=np({timeout:R,style:D,easing:h},{mode:"enter"});ue.style.webkitTransition=r.transitions.create("-webkit-transform",{...ce}),ue.style.transition=r.transitions.create("transform",{...ce}),ue.style.webkitTransform="none",ue.style.transform="none",_&&_(ue,oe)}),G=M(y),H=M(w),re=M(ue=>{const oe=np({timeout:R,style:D,easing:h},{mode:"exit"});ue.style.webkitTransition=r.transitions.create("-webkit-transform",oe),ue.style.transition=r.transitions.create("transform",oe),Bv(c,ue,u),T&&T(ue)}),se=M(ue=>{ue.style.webkitTransition="",ue.style.transition="",E&&E(ue)}),de=ue=>{a&&a(F.current,ue)},me=j.useCallback(()=>{F.current&&Bv(c,F.current,u)},[c,u]);return j.useEffect(()=>{if(m||c==="down"||c==="right")return;const ue=gw(()=>{F.current&&Bv(c,F.current,u)}),oe=pl(F.current);return oe.addEventListener("resize",ue),()=>{ue.clear(),oe.removeEventListener("resize",ue)}},[c,m,u]),j.useEffect(()=>{m||me()},[m,me]),V.jsx(A,{nodeRef:F,onEnter:k,onEntered:G,onEntering:q,onExit:re,onExited:se,onExiting:H,addEndListener:de,appear:o,in:m,timeout:R,...L,children:(ue,{ownerState:oe,...ce})=>j.cloneElement(l,{ref:B,style:{visibility:ue==="exited"&&!m?"hidden":void 0,...D,...l.props.style},...ce})})});function W0e(i){return or("MuiDrawer",i)}ar("MuiDrawer",["root","docked","paper","anchorLeft","anchorRight","anchorTop","anchorBottom","paperAnchorLeft","paperAnchorRight","paperAnchorTop","paperAnchorBottom","paperAnchorDockedLeft","paperAnchorDockedRight","paperAnchorDockedTop","paperAnchorDockedBottom","modal"]);const $$=(i,e)=>{const{ownerState:t}=i;return[e.root,(t.variant==="permanent"||t.variant==="persistent")&&e.docked,e.modal]},G0e=i=>{const{classes:e,anchor:t,variant:r}=i,n={root:["root",`anchor${ht(t)}`],docked:[(r==="permanent"||r==="persistent")&&"docked"],modal:["modal"],paper:["paper",`paperAnchor${ht(t)}`,r!=="temporary"&&`paperAnchorDocked${ht(t)}`]};return lr(n,W0e,e)},K0e=ft(ww,{name:"MuiDrawer",slot:"Root",overridesResolver:$$})(Tr(({theme:i})=>({zIndex:(i.vars||i).zIndex.drawer}))),X0e=ft("div",{shouldForwardProp:Jn,name:"MuiDrawer",slot:"Docked",skipVariantsResolver:!1,overridesResolver:$$})({flex:"0 0 auto"}),Y0e=ft(Rh,{name:"MuiDrawer",slot:"Paper",overridesResolver:(i,e)=>{const{ownerState:t}=i;return[e.paper,e[`paperAnchor${ht(t.anchor)}`],t.variant!=="temporary"&&e[`paperAnchorDocked${ht(t.anchor)}`]]}})(Tr(({theme:i})=>({overflowY:"auto",display:"flex",flexDirection:"column",height:"100%",flex:"1 0 auto",zIndex:(i.vars||i).zIndex.drawer,WebkitOverflowScrolling:"touch",position:"fixed",top:0,outline:0,variants:[{props:{anchor:"left"},style:{left:0}},{props:{anchor:"top"},style:{top:0,left:0,right:0,height:"auto",maxHeight:"100%"}},{props:{anchor:"right"},style:{right:0}},{props:{anchor:"bottom"},style:{top:"auto",left:0,bottom:0,right:0,height:"auto",maxHeight:"100%"}},{props:({ownerState:e})=>e.anchor==="left"&&e.variant!=="temporary",style:{borderRight:`1px solid ${(i.vars||i).palette.divider}`}},{props:({ownerState:e})=>e.anchor==="top"&&e.variant!=="temporary",style:{borderBottom:`1px solid ${(i.vars||i).palette.divider}`}},{props:({ownerState:e})=>e.anchor==="right"&&e.variant!=="temporary",style:{borderLeft:`1px solid ${(i.vars||i).palette.divider}`}},{props:({ownerState:e})=>e.anchor==="bottom"&&e.variant!=="temporary",style:{borderTop:`1px solid ${(i.vars||i).palette.divider}`}}]}))),j$={left:"right",right:"left",top:"down",bottom:"up"};function Q0e(i){return["left","right"].includes(i)}function J0e({direction:i},e){return i==="rtl"&&Q0e(e)?j$[e]:e}const Z0e=j.forwardRef(function(e,t){const r=ur({props:e,name:"MuiDrawer"}),n=Ph(),s=yF(),a={enter:n.transitions.duration.enteringScreen,exit:n.transitions.duration.leavingScreen},{anchor:o="left",BackdropProps:l,children:u,className:c,elevation:h=16,hideBackdrop:m=!1,ModalProps:{BackdropProps:g,...y}={},onClose:_,open:T=!1,PaperProps:E={},SlideProps:w,TransitionComponent:D,transitionDuration:R=a,variant:A="temporary",slots:L={},slotProps:F={},...B}=r,M=j.useRef(!1);j.useEffect(()=>{M.current=!0},[]);const k=J0e({direction:s?"rtl":"ltr"},o),G={...r,anchor:o,elevation:h,open:T,variant:A,...B},H=G0e(G),re={slots:{transition:D,...L},slotProps:{paper:E,transition:w,...F,backdrop:_w(F.backdrop||{...l,...g},{transitionDuration:R})}},[se,de]=Lr("root",{ref:t,elementType:K0e,className:Nt(H.root,H.modal,c),shouldForwardComponentProp:!0,ownerState:G,externalForwardedProps:{...re,...B,...y},additionalProps:{open:T,onClose:_,hideBackdrop:m,slots:{backdrop:re.slots.backdrop},slotProps:{backdrop:re.slotProps.backdrop}}}),[me,ue]=Lr("paper",{elementType:Y0e,shouldForwardComponentProp:!0,className:Nt(H.paper,E.className),ownerState:G,externalForwardedProps:re,additionalProps:{elevation:A==="temporary"?h:0,square:!0}}),[oe,ce]=Lr("docked",{elementType:X0e,ref:t,className:Nt(H.root,H.docked,c),ownerState:G,externalForwardedProps:re,additionalProps:B}),[te,fe]=Lr("transition",{elementType:q0e,ownerState:G,externalForwardedProps:re,additionalProps:{in:T,direction:j$[k],timeout:R,appear:M.current}}),ye=V.jsx(me,{...ue,children:u});if(A==="permanent")return V.jsx(oe,{...ce,children:ye});const Se=V.jsx(te,{...fe,children:ye});return A==="persistent"?V.jsx(oe,{...ce,children:Se}):V.jsx(se,{...de,children:Se})}),ege=Qr(V.jsx("path",{d:"M2 15.5v2h20v-2zm0-5v2h20v-2zm0-5v2h20v-2z"})),tge=fF({themeId:ul}),IE=typeof mw({})=="function",rge=(i,e)=>({WebkitFontSmoothing:"antialiased",MozOsxFontSmoothing:"grayscale",boxSizing:"border-box",WebkitTextSizeAdjust:"100%",...e&&!i.vars&&{colorScheme:i.palette.mode}}),ige=i=>({color:(i.vars||i).palette.text.primary,...i.typography.body1,backgroundColor:(i.vars||i).palette.background.default,"@media print":{backgroundColor:(i.vars||i).palette.common.white}}),z$=(i,e=!1)=>{const t={};e&&i.colorSchemes&&typeof i.getColorSchemeSelector=="function"&&Object.entries(i.colorSchemes).forEach(([s,a])=>{const o=i.getColorSchemeSelector(s);o.startsWith("@")?t[o]={":root":{colorScheme:a.palette?.mode}}:t[o.replace(/\s*&/,"")]={colorScheme:a.palette?.mode}});let r={html:rge(i,e),"*, *::before, *::after":{boxSizing:"inherit"},"strong, b":{fontWeight:i.typography.fontWeightBold},body:{margin:0,...ige(i),"&::backdrop":{backgroundColor:(i.vars||i).palette.background.default}},...t};const n=i.components?.MuiCssBaseline?.styleOverrides;return n&&(r=[r,n]),r},Vy="mui-ecs",nge=i=>{const e=z$(i,!1),t=Array.isArray(e)?e[0]:e;return!i.vars&&t&&(t.html[`:root:has(${Vy})`]={colorScheme:i.palette.mode}),i.colorSchemes&&Object.entries(i.colorSchemes).forEach(([r,n])=>{const s=i.getColorSchemeSelector(r);s.startsWith("@")?t[s]={[`:root:not(:has(.${Vy}))`]:{colorScheme:n.palette?.mode}}:t[s.replace(/\s*&/,"")]={[`&:not(:has(.${Vy}))`]:{colorScheme:n.palette?.mode}}}),e},sge=mw(IE?({theme:i,enableColorScheme:e})=>z$(i,e):({theme:i})=>nge(i));function age(i){const e=ur({props:i,name:"MuiCssBaseline"}),{children:t,enableColorScheme:r=!1}=e;return V.jsxs(j.Fragment,{children:[IE&&V.jsx(sge,{enableColorScheme:r}),!IE&&!r&&V.jsx("span",{className:Vy,style:{display:"none"}}),t]})}let Fm=[{name:"",uri:"/",icon:"LaptopIcon",showMod:[0,1],showHeader:!0},{name:"",uri:"/watch",icon:"RemoveRedEyeIcon",showMod:[1],showHeader:!0},{name:"",uri:"/task",icon:"CloudQueueIcon",showMod:[0],showHeader:!0},{name:"",uri:"/settings",icon:"SettingsIcon",showMod:[0,1],showHeader:!0}];const Bm="/detail",yM=240;function oge(){const{t:i}=No();let e=cc();const t=j.useContext(yu),r=P3(),[n,s]=j.useState(Fm[0]),[a,o]=j.useState(!1),[l,u]=j.useState(null),[c,h]=j.useState(!1),[m,g]=j.useState(!0),[y,_]=j.useState(!1),[T,E]=j.useState(""),[w,D]=j.useState(null);j.useEffect(()=>{if(e.pathname==Bm)s({showHeader:!1});else{t.updateDetailMd5("");for(let H=0;H<Fm.length;H++)e.pathname==Fm[H].uri&&s(Fm[H])}},[e]);const R=H=>{H.uri===Bm?o(!a):(s(H),r(H.uri))},A=H=>()=>{g(H)},L=H=>{_(!0);let re=null;for(let se=0;se<t.configInfo.sponsor.length;se++)t.configInfo.sponsor[se].name===H&&(re=t.configInfo.sponsor[se]);D(re)},F=()=>{_(!1)},B=H=>{E(H.target.value),L(H.target.value)},M=()=>{h(!c)},k=tge("(prefers-color-scheme: dark)"),q=j.useMemo(()=>Nx({palette:{mode:k?"dark":"light",sideBarBgColor:{dark:"#021d2a",light:"antiquewhite"}}}),[k]),G=V.jsxs(hr,{className:"side-bar",style:{backgroundColor:q.palette.sideBarBgColor[k?"dark":"light"]},sx:{width:yM},role:"presentation",children:[V.jsxs(MF,{children:[V.jsx(hr,{className:"side-bar-logo",children:V.jsxs(hr,{className:"side-bar-logo-item",children:[V.jsx("img",{src:b0e,height:"60"}),V.jsxs(hr,{className:"go-github",children:["iptv-checker",t.showNewVersion?V.jsx("a",{href:"/#/settings",style:{color:"green"},children:i("")}):""]})]})}),Fm.map((H,re)=>H.showMod.includes(t.nowMod)?V.jsx(hr,{children:H.uri!==Bm||H.uri===Bm&&t.subCheckMenuList.length>0?V.jsx(F0e,{disablePadding:!0,onClick:()=>R(H),children:V.jsxs(A0e,{children:[V.jsxs(LJ,{children:[H.icon==="LaptopIcon"?V.jsx(T0e,{}):"",H.icon==="SettingsIcon"?V.jsx(N0e,{}):"",H.icon==="AdjustIcon"?V.jsx(U0e,{}):"",H.icon==="PublicIcon"?V.jsx(N$,{}):"",H.icon==="CloudQueueIcon"?V.jsx($0e,{}):"",H.icon==="RemoveRedEyeIcon"?V.jsx(U$,{}):"",H.icon==="BoltIcon"?V.jsx(B0e,{}):""]}),V.jsx(zJ,{primary:i(H.name)}),H.uri===Bm?a?V.jsx(j0e,{}):V.jsx(z0e,{}):""]})},re):""},re):"")]}),t.configInfo.sponsor.length>0?V.jsxs(ki,{sx:{display:"flex",justifyContent:"center",alignItems:"center",fontSize:"12px"},children:[V.jsx(OF,{sx:{fontSize:"12px",cursor:"pointer"},onClick:M,id:"demo-radio-buttons-group-label",children:i("")}),c?V.jsx(V.Fragment,{children:V.jsx(Tf,{"aria-labelledby":"demo-radio-buttons-group-label",name:"radio-buttons-group",onChange:B,value:T,sx:{fontSize:"12px"},children:t.configInfo.sponsor.map((H,re)=>V.jsx(il,{sx:{fontSize:"12px"},value:H.name,control:V.jsx(nl,{size:"small"}),label:H.name},re))})}):""]}):""]});return V.jsxs(vX,{theme:q,children:[V.jsx(age,{}),V.jsx(lge,{open:y,sponsorInfo:w,onClose:F}),V.jsxs(hr,{className:"layout",children:[V.jsx(Z0e,{sx:{".MuiPaper-root":{borderTopLeftRadius:"12px",borderBottomLeftRadius:"12px",backgroundColor:"transparent"}},open:m,anchor:"left",variant:m?"permanent":"temporary",children:G}),V.jsxs(hr,{className:"container-inner",style:{marginLeft:m?yM+"px":""},children:[V.jsx(hr,{"data-tauri-drag-region":!0,style:{width:"100%",height:"20px"}}),V.jsx(hr,{style:{padding:"0 20px",display:"flex",justifyContent:"space-between",height:"60px"},children:V.jsxs(hr,{style:{display:"flex",justifyContent:"space-between",height:"60px",width:"100%"},children:[V.jsxs(hr,{style:{display:"flex",justifyContent:"center",alignItems:"center"},children:[V.jsx(hr,{children:V.jsx(Kx,{"aria-label":"delete",size:"small",onClick:A(!m),children:V.jsx(ege,{})})}),V.jsx(hr,{style:{fontWeight:"bold",fontSize:"20px"},children:n.name!==null&&n.name!==void 0?i(n.name):t.detailMd5})]}),V.jsxs(hr,{"data-tauri-drag-region":!0,style:{display:t.nowMod===1?"flex":"none",justifyContent:"center",alignItems:"center"},children:[V.jsx(hr,{className:"titlebar-button",id:"titlebar-minimize",children:V.jsx("img",{src:"https://api.iconify.design/mdi:window-minimize.svg",alt:"minimize"})}),V.jsx(hr,{className:"titlebar-button",id:"titlebar-close",children:V.jsx("img",{src:"https://api.iconify.design/mdi:close.svg",alt:"close"})})]})]})}),V.jsx(hr,{style:{width:"100%",height:"20px"}}),V.jsx(fC,{style:{marginBottom:"10px"}}),V.jsx(YV,{})]})]})]})}function lge(i){const{t:e}=No(),{onClose:t,sponsorInfo:r,open:n}=i,s=()=>{t()};return V.jsxs(cd,{onClose:s,open:n,children:[V.jsx(Xx,{children:e("")}),r!==null&&r.url!==""?V.jsx(hr,{sx:{display:"flex",justifyContent:"center"},children:V.jsx("img",{src:r.url,height:"400"})}):""]})}function uge(i){return or("MuiTable",i)}ar("MuiTable",["root","stickyHeader"]);const cge=i=>{const{classes:e,stickyHeader:t}=i;return lr({root:["root",t&&"stickyHeader"]},uge,e)},dge=ft("table",{name:"MuiTable",slot:"Root",overridesResolver:(i,e)=>{const{ownerState:t}=i;return[e.root,t.stickyHeader&&e.stickyHeader]}})(Tr(({theme:i})=>({display:"table",width:"100%",borderCollapse:"collapse",borderSpacing:0,"& caption":{...i.typography.body2,padding:i.spacing(2),color:(i.vars||i).palette.text.secondary,textAlign:"left",captionSide:"bottom"},variants:[{props:({ownerState:e})=>e.stickyHeader,style:{borderCollapse:"separate"}}]}))),_M="table",H$=j.forwardRef(function(e,t){const r=ur({props:e,name:"MuiTable"}),{className:n,component:s=_M,padding:a="normal",size:o="medium",stickyHeader:l=!1,...u}=r,c={...r,component:s,padding:a,size:o,stickyHeader:l},h=cge(c),m=j.useMemo(()=>({padding:a,size:o,stickyHeader:l}),[a,o,l]);return V.jsx(e8.Provider,{value:m,children:V.jsx(dge,{as:s,role:s===_M?null:"table",ref:t,className:Nt(h.root,n),ownerState:c,...u})})});function hge(i){return or("MuiTableBody",i)}ar("MuiTableBody",["root"]);const fge=i=>{const{classes:e}=i;return lr({root:["root"]},hge,e)},pge=ft("tbody",{name:"MuiTableBody",slot:"Root"})({display:"table-row-group"}),mge={variant:"body"},xM="tbody",V$=j.forwardRef(function(e,t){const r=ur({props:e,name:"MuiTableBody"}),{className:n,component:s=xM,...a}=r,o={...r,component:s},l=fge(o);return V.jsx(Wx.Provider,{value:mge,children:V.jsx(pge,{className:Nt(l.root,n),as:s,ref:t,role:s===xM?null:"rowgroup",ownerState:o,...a})})});function gge(i){return or("MuiTableContainer",i)}ar("MuiTableContainer",["root"]);const vge=i=>{const{classes:e}=i;return lr({root:["root"]},gge,e)},yge=ft("div",{name:"MuiTableContainer",slot:"Root"})({width:"100%",overflowX:"auto"}),q$=j.forwardRef(function(e,t){const r=ur({props:e,name:"MuiTableContainer"}),{className:n,component:s="div",...a}=r,o={...r,component:s},l=vge(o);return V.jsx(yge,{ref:t,as:s,className:Nt(l.root,n),ownerState:o,...a})});function _ge(i){return or("MuiTableHead",i)}ar("MuiTableHead",["root"]);const xge=i=>{const{classes:e}=i;return lr({root:["root"]},_ge,e)},Tge=ft("thead",{name:"MuiTableHead",slot:"Root"})({display:"table-header-group"}),bge={variant:"head"},TM="thead",W$=j.forwardRef(function(e,t){const r=ur({props:e,name:"MuiTableHead"}),{className:n,component:s=TM,...a}=r,o={...r,component:s},l=xge(o);return V.jsx(Wx.Provider,{value:bge,children:V.jsx(Tge,{as:s,className:Nt(l.root,n),ref:t,role:s===TM?null:"rowgroup",ownerState:o,...a})})});function Sge(i){return or("MuiTableRow",i)}const bM=ar("MuiTableRow",["root","selected","hover","head","footer"]),Cge=i=>{const{classes:e,selected:t,hover:r,head:n,footer:s}=i;return lr({root:["root",t&&"selected",r&&"hover",n&&"head",s&&"footer"]},Sge,e)},Ege=ft("tr",{name:"MuiTableRow",slot:"Root",overridesResolver:(i,e)=>{const{ownerState:t}=i;return[e.root,t.head&&e.head,t.footer&&e.footer]}})(Tr(({theme:i})=>({color:"inherit",display:"table-row",verticalAlign:"middle",outline:0,[`&.${bM.hover}:hover`]:{backgroundColor:(i.vars||i).palette.action.hover},[`&.${bM.selected}`]:{backgroundColor:i.vars?`rgba(${i.vars.palette.primary.mainChannel} / ${i.vars.palette.action.selectedOpacity})`:Gr(i.palette.primary.main,i.palette.action.selectedOpacity),"&:hover":{backgroundColor:i.vars?`rgba(${i.vars.palette.primary.mainChannel} / calc(${i.vars.palette.action.selectedOpacity} + ${i.vars.palette.action.hoverOpacity}))`:Gr(i.palette.primary.main,i.palette.action.selectedOpacity+i.palette.action.hoverOpacity)}}}))),SM="tr",bk=j.forwardRef(function(e,t){const r=ur({props:e,name:"MuiTableRow"}),{className:n,component:s=SM,hover:a=!1,selected:o=!1,...l}=r,u=j.useContext(Wx),c={...r,component:s,hover:a,selected:o,head:u&&u.variant==="head",footer:u&&u.variant==="footer"},h=Cge(c);return V.jsx(Ege,{as:s,ref:t,className:Nt(h.root,n),role:s===SM?null:"row",ownerState:c,...l})}),wge=Qr(V.jsx("path",{d:"M11 6c1.38 0 2.63.56 3.54 1.46L12 10h6V4l-2.05 2.05C14.68 4.78 12.93 4 11 4c-3.53 0-6.43 2.61-6.92 6H6.1c.46-2.28 2.48-4 4.9-4m5.64 9.14c.66-.9 1.12-1.97 1.28-3.14H15.9c-.46 2.28-2.48 4-4.9 4-1.38 0-2.63-.56-3.54-1.46L10 12H4v6l2.05-2.05C7.32 17.22 9.07 18 11 18c1.55 0 2.98-.51 4.14-1.36L20 21.49 21.49 20z"})),G$=Qr(V.jsx("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6z"})),kge=Qr(V.jsx("path",{d:"M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4z"})),Age=Qr(V.jsx("path",{d:"M5 4v2h14V4zm0 10h4v6h6v-6h4l-7-7z"}));class K${constructor(e=""){this.baseUrl=e}async getTaskList(){return(await Wr.get(`${this.baseUrl}/tasks/list?page=1`)).data}async uploadFile(e){const t=await Wr.post(`${this.baseUrl}/media/upload`,e,{headers:{"Content-Type":"multipart/form-data"}});return console.log("response---",t.data),t.data}async getReplaceList(){const e=await Wr.get(`${this.baseUrl}/system/replace`);if(e.status!==200)throw new Error(e.data.msg);return e.data}async updateReplaceList(e){const t=await Wr.post(`${this.baseUrl}/system/replace`,e);if(t.status!==200)throw new Error(t.data.msg);return t.data}async addTask(e){const t=await Wr.post(`${this.baseUrl}/tasks/add`,e);if(t.data.code!=="200")throw new Error(t.data.msg);return t.data}async updateTask(e,t){const r=await Wr.post(`${this.baseUrl}/tasks/update?task_id=${e}`,t);if(r.data.code!=="200")throw new Error(r.data.msg);return r.data}async deleteTask(e){const t=await Wr.delete(`${this.baseUrl}/tasks/delete/${e}`);if(t.data.code!=="200")throw new Error(t.data.msg);return t.data}async runTask(e){return(await Wr.get(`${this.baseUrl}/tasks/run?task_id=${e}`)).data}async getDownloadBody(e){return(await Wr.get(`${this.baseUrl}/tasks/get-download-body?task_id=${e}`)).data}async exportTasks(){return(await Wr.get(`${this.baseUrl}/system/tasks/export`)).data}async importTasks(e){return(await Wr.post(`${this.baseUrl}/system/tasks/import`,e)).data}}function Ige(i){return or("MuiDialogActions",i)}ar("MuiDialogActions",["root","spacing"]);const Dge=i=>{const{classes:e,disableSpacing:t}=i;return lr({root:["root",!t&&"spacing"]},Ige,e)},Pge=ft("div",{name:"MuiDialogActions",slot:"Root",overridesResolver:(i,e)=>{const{ownerState:t}=i;return[e.root,!t.disableSpacing&&e.spacing]}})({display:"flex",alignItems:"center",padding:8,justifyContent:"flex-end",flex:"0 0 auto",variants:[{props:({ownerState:i})=>!i.disableSpacing,style:{"& > :not(style) ~ :not(style)":{marginLeft:8}}}]}),Rge=j.forwardRef(function(e,t){const r=ur({props:e,name:"MuiDialogActions"}),{className:n,disableSpacing:s=!1,...a}=r,o={...r,disableSpacing:s},l=Dge(o);return V.jsx(Pge,{className:Nt(l.root,n),ownerState:o,ref:t,...a})});function Lge(i){return or("MuiInputAdornment",i)}const CM=ar("MuiInputAdornment",["root","filled","standard","outlined","positionStart","positionEnd","disablePointerEvents","hiddenLabel","sizeSmall"]);var EM;const Oge=(i,e)=>{const{ownerState:t}=i;return[e.root,e[`position${ht(t.position)}`],t.disablePointerEvents===!0&&e.disablePointerEvents,e[t.variant]]},Mge=i=>{const{classes:e,disablePointerEvents:t,hiddenLabel:r,position:n,size:s,variant:a}=i,o={root:["root",t&&"disablePointerEvents",n&&`position${ht(n)}`,a,r&&"hiddenLabel",s&&`size${ht(s)}`]};return lr(o,Lge,e)},Fge=ft("div",{name:"MuiInputAdornment",slot:"Root",overridesResolver:Oge})(Tr(({theme:i})=>({display:"flex",maxHeight:"2em",alignItems:"center",whiteSpace:"nowrap",color:(i.vars||i).palette.action.active,variants:[{props:{variant:"filled"},style:{[`&.${CM.positionStart}&:not(.${CM.hiddenLabel})`]:{marginTop:16}}},{props:{position:"start"},style:{marginRight:8}},{props:{position:"end"},style:{marginLeft:8}},{props:{disablePointerEvents:!0},style:{pointerEvents:"none"}}]}))),wM=j.forwardRef(function(e,t){const r=ur({props:e,name:"MuiInputAdornment"}),{children:n,className:s,component:a="div",disablePointerEvents:o=!1,disableTypography:l=!1,position:u,variant:c,...h}=r,m=vl()||{};let g=c;c&&m.variant,m&&!g&&(g=m.variant);const y={...r,hiddenLabel:m.hiddenLabel,size:m.size,disablePointerEvents:o,position:u,variant:g},_=Mge(y);return V.jsx(Ux.Provider,{value:null,children:V.jsx(Fge,{as:a,ownerState:y,className:Nt(_.root,s),ref:t,...h,children:typeof n=="string"&&!l?V.jsx(Tn,{color:"textSecondary",children:n}):V.jsxs(j.Fragment,{children:[u==="start"?EM||(EM=V.jsx("span",{className:"notranslate","aria-hidden":!0,children:""})):null,n]})})})}),Nm=MK({createStyledComponent:ft("div",{name:"MuiStack",slot:"Root"}),useThemeProps:i=>ur({props:i,name:"MuiStack"})}),PT=j.createContext({}),Sk=j.createContext({});function Bge(i){return or("MuiStep",i)}ar("MuiStep",["root","horizontal","vertical","alternativeLabel","completed"]);const Nge=i=>{const{classes:e,orientation:t,alternativeLabel:r,completed:n}=i;return lr({root:["root",t,r&&"alternativeLabel",n&&"completed"]},Bge,e)},Uge=ft("div",{name:"MuiStep",slot:"Root",overridesResolver:(i,e)=>{const{ownerState:t}=i;return[e.root,e[t.orientation],t.alternativeLabel&&e.alternativeLabel,t.completed&&e.completed]}})({variants:[{props:{orientation:"horizontal"},style:{paddingLeft:8,paddingRight:8}},{props:{alternativeLabel:!0},style:{flex:1,position:"relative"}}]}),$ge=j.forwardRef(function(e,t){const r=ur({props:e,name:"MuiStep"}),{active:n,children:s,className:a,component:o="div",completed:l,disabled:u,expanded:c=!1,index:h,last:m,...g}=r,{activeStep:y,connector:_,alternativeLabel:T,orientation:E,nonLinear:w}=j.useContext(PT);let[D=!1,R=!1,A=!1]=[n,l,u];y===h?D=n!==void 0?n:!0:!w&&y>h?R=l!==void 0?l:!0:!w&&y<h&&(A=u!==void 0?u:!0);const L=j.useMemo(()=>({index:h,last:m,expanded:c,icon:h+1,active:D,completed:R,disabled:A}),[h,m,c,D,R,A]),F={...r,active:D,orientation:E,alternativeLabel:T,completed:R,disabled:A,expanded:c,component:o},B=Nge(F),M=V.jsxs(Uge,{as:o,className:Nt(B.root,a),ref:t,ownerState:F,...g,children:[_&&T&&h!==0?_:null,s]});return V.jsx(Sk.Provider,{value:L,children:_&&!T&&h!==0?V.jsxs(j.Fragment,{children:[_,M]}):M})}),jge=Qr(V.jsx("path",{d:"M12 0a12 12 0 1 0 0 24 12 12 0 0 0 0-24zm-2 17l-5-5 1.4-1.4 3.6 3.6 7.6-7.6L19 8l-9 9z"})),zge=Qr(V.jsx("path",{d:"M1 21h22L12 2 1 21zm12-3h-2v-2h2v2zm0-4h-2v-4h2v4z"}));function Hge(i){return or("MuiStepIcon",i)}const R1=ar("MuiStepIcon",["root","active","completed","error","text"]);var kM;const Vge=i=>{const{classes:e,active:t,completed:r,error:n}=i;return lr({root:["root",t&&"active",r&&"completed",n&&"error"],text:["text"]},Hge,e)},L1=ft(o_,{name:"MuiStepIcon",slot:"Root"})(Tr(({theme:i})=>({display:"block",transition:i.transitions.create("color",{duration:i.transitions.duration.shortest}),color:(i.vars||i).palette.text.disabled,[`&.${R1.completed}`]:{color:(i.vars||i).palette.primary.main},[`&.${R1.active}`]:{color:(i.vars||i).palette.primary.main},[`&.${R1.error}`]:{color:(i.vars||i).palette.error.main}}))),qge=ft("text",{name:"MuiStepIcon",slot:"Text"})(Tr(({theme:i})=>({fill:(i.vars||i).palette.primary.contrastText,fontSize:i.typography.caption.fontSize,fontFamily:i.typography.fontFamily}))),Wge=j.forwardRef(function(e,t){const r=ur({props:e,name:"MuiStepIcon"}),{active:n=!1,className:s,completed:a=!1,error:o=!1,icon:l,...u}=r,c={...r,active:n,completed:a,error:o},h=Vge(c);if(typeof l=="number"||typeof l=="string"){const m=Nt(s,h.root);return o?V.jsx(L1,{as:zge,className:m,ref:t,ownerState:c,...u}):a?V.jsx(L1,{as:jge,className:m,ref:t,ownerState:c,...u}):V.jsxs(L1,{className:m,ref:t,ownerState:c,...u,children:[kM||(kM=V.jsx("circle",{cx:"12",cy:"12",r:"12"})),V.jsx(qge,{className:h.text,x:"12",y:"12",textAnchor:"middle",dominantBaseline:"central",ownerState:c,children:l})]})}return l});function Gge(i){return or("MuiStepLabel",i)}const sd=ar("MuiStepLabel",["root","horizontal","vertical","label","active","completed","error","disabled","iconContainer","alternativeLabel","labelContainer"]),Kge=i=>{const{classes:e,orientation:t,active:r,completed:n,error:s,disabled:a,alternativeLabel:o}=i;return lr({root:["root",t,s&&"error",a&&"disabled",o&&"alternativeLabel"],label:["label",r&&"active",n&&"completed",s&&"error",a&&"disabled",o&&"alternativeLabel"],iconContainer:["iconContainer",r&&"active",n&&"completed",s&&"error",a&&"disabled",o&&"alternativeLabel"],labelContainer:["labelContainer",o&&"alternativeLabel"]},Gge,e)},Xge=ft("span",{name:"MuiStepLabel",slot:"Root",overridesResolver:(i,e)=>{const{ownerState:t}=i;return[e.root,e[t.orientation]]}})({display:"flex",alignItems:"center",[`&.${sd.alternativeLabel}`]:{flexDirection:"column"},[`&.${sd.disabled}`]:{cursor:"default"},variants:[{props:{orientation:"vertical"},style:{textAlign:"left",padding:"8px 0"}}]}),Yge=ft("span",{name:"MuiStepLabel",slot:"Label"})(Tr(({theme:i})=>({...i.typography.body2,display:"block",transition:i.transitions.create("color",{duration:i.transitions.duration.shortest}),[`&.${sd.active}`]:{color:(i.vars||i).palette.text.primary,fontWeight:500},[`&.${sd.completed}`]:{color:(i.vars||i).palette.text.primary,fontWeight:500},[`&.${sd.alternativeLabel}`]:{marginTop:16},[`&.${sd.error}`]:{color:(i.vars||i).palette.error.main}}))),Qge=ft("span",{name:"MuiStepLabel",slot:"IconContainer"})({flexShrink:0,display:"flex",paddingRight:8,[`&.${sd.alternativeLabel}`]:{paddingRight:0}}),Jge=ft("span",{name:"MuiStepLabel",slot:"LabelContainer"})(Tr(({theme:i})=>({width:"100%",color:(i.vars||i).palette.text.secondary,[`&.${sd.alternativeLabel}`]:{textAlign:"center"}}))),X$=j.forwardRef(function(e,t){const r=ur({props:e,name:"MuiStepLabel"}),{children:n,className:s,componentsProps:a={},error:o=!1,icon:l,optional:u,slots:c={},slotProps:h={},StepIconComponent:m,StepIconProps:g,...y}=r,{alternativeLabel:_,orientation:T}=j.useContext(PT),{active:E,disabled:w,completed:D,icon:R}=j.useContext(Sk),A=l||R;let L=m;A&&!L&&(L=Wge);const F={...r,active:E,alternativeLabel:_,completed:D,disabled:w,error:o,orientation:T},B=Kge(F),M={slots:c,slotProps:{stepIcon:g,...a,...h}},[k,q]=Lr("root",{elementType:Xge,externalForwardedProps:{...M,...y},ownerState:F,ref:t,className:Nt(B.root,s)}),[G,H]=Lr("label",{elementType:Yge,externalForwardedProps:M,ownerState:F}),[re,se]=Lr("stepIcon",{elementType:L,externalForwardedProps:M,ownerState:F});return V.jsxs(k,{...q,children:[A||re?V.jsx(Qge,{className:B.iconContainer,ownerState:F,children:V.jsx(re,{completed:D,active:E,error:o,icon:A,...se})}):null,V.jsxs(Jge,{className:B.labelContainer,ownerState:F,children:[n?V.jsx(G,{...H,className:Nt(B.label,H?.className),children:n}):null,u]})]})});X$.muiName="StepLabel";function Zge(i){return or("MuiStepConnector",i)}ar("MuiStepConnector",["root","horizontal","vertical","alternativeLabel","active","completed","disabled","line","lineHorizontal","lineVertical"]);const eve=i=>{const{classes:e,orientation:t,alternativeLabel:r,active:n,completed:s,disabled:a}=i,o={root:["root",t,r&&"alternativeLabel",n&&"active",s&&"completed",a&&"disabled"],line:["line",`line${ht(t)}`]};return lr(o,Zge,e)},tve=ft("div",{name:"MuiStepConnector",slot:"Root",overridesResolver:(i,e)=>{const{ownerState:t}=i;return[e.root,e[t.orientation],t.alternativeLabel&&e.alternativeLabel,t.completed&&e.completed]}})({flex:"1 1 auto",variants:[{props:{orientation:"vertical"},style:{marginLeft:12}},{props:{alternativeLabel:!0},style:{position:"absolute",top:12,left:"calc(-50% + 20px)",right:"calc(50% + 20px)"}}]}),rve=ft("span",{name:"MuiStepConnector",slot:"Line",overridesResolver:(i,e)=>{const{ownerState:t}=i;return[e.line,e[`line${ht(t.orientation)}`]]}})(Tr(({theme:i})=>{const e=i.palette.mode==="light"?i.palette.grey[400]:i.palette.grey[600];return{display:"block",borderColor:i.vars?i.vars.palette.StepConnector.border:e,variants:[{props:{orientation:"horizontal"},style:{borderTopStyle:"solid",borderTopWidth:1}},{props:{orientation:"vertical"},style:{borderLeftStyle:"solid",borderLeftWidth:1,minHeight:24}}]}})),ive=j.forwardRef(function(e,t){const r=ur({props:e,name:"MuiStepConnector"}),{className:n,...s}=r,{alternativeLabel:a,orientation:o="horizontal"}=j.useContext(PT),{active:l,disabled:u,completed:c}=j.useContext(Sk),h={...r,alternativeLabel:a,orientation:o,active:l,completed:c,disabled:u},m=eve(h);return V.jsx(tve,{className:Nt(m.root,n),ref:t,ownerState:h,...s,children:V.jsx(rve,{className:m.line,ownerState:h})})});function nve(i){return or("MuiStepper",i)}ar("MuiStepper",["root","horizontal","vertical","nonLinear","alternativeLabel"]);const sve=i=>{const{orientation:e,nonLinear:t,alternativeLabel:r,classes:n}=i;return lr({root:["root",e,t&&"nonLinear",r&&"alternativeLabel"]},nve,n)},ave=ft("div",{name:"MuiStepper",slot:"Root",overridesResolver:(i,e)=>{const{ownerState:t}=i;return[e.root,e[t.orientation],t.alternativeLabel&&e.alternativeLabel,t.nonLinear&&e.nonLinear]}})({display:"flex",variants:[{props:{orientation:"horizontal"},style:{flexDirection:"row",alignItems:"center"}},{props:{orientation:"vertical"},style:{flexDirection:"column"}},{props:{alternativeLabel:!0},style:{alignItems:"flex-start"}}]}),ove=V.jsx(ive,{}),lve=j.forwardRef(function(e,t){const r=ur({props:e,name:"MuiStepper"}),{activeStep:n=0,alternativeLabel:s=!1,children:a,className:o,component:l="div",connector:u=ove,nonLinear:c=!1,orientation:h="horizontal",...m}=r,g={...r,nonLinear:c,alternativeLabel:s,orientation:h,component:l},y=sve(g),_=j.Children.toArray(a).filter(Boolean),T=_.map((w,D)=>j.cloneElement(w,{index:D,last:D+1===_.length,...w.props})),E=j.useMemo(()=>({activeStep:n,alternativeLabel:s,connector:u,nonLinear:c,orientation:h}),[n,s,u,c,h]);return V.jsx(PT.Provider,{value:E,children:V.jsx(ave,{as:l,ownerState:g,className:Nt(y.root,o),ref:t,...m,children:T})})}),uve=Qr(V.jsx("path",{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2M12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8m3.5-9c.83 0 1.5-.67 1.5-1.5S16.33 8 15.5 8 14 8.67 14 9.5s.67 1.5 1.5 1.5m-7 0c.83 0 1.5-.67 1.5-1.5S9.33 8 8.5 8 7 8.67 7 9.5 7.67 11 8.5 11m3.5 6.5c2.33 0 4.31-1.46 5.11-3.5H6.89c.8 2.04 2.78 3.5 5.11 3.5"})),cve=Qr(V.jsx("path",{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2M12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8m3.5-9c.83 0 1.5-.67 1.5-1.5S16.33 8 15.5 8 14 8.67 14 9.5s.67 1.5 1.5 1.5m-7 0c.83 0 1.5-.67 1.5-1.5S9.33 8 8.5 8 7 8.67 7 9.5 7.67 11 8.5 11m3.5 3c-2.33 0-4.31 1.46-5.11 3.5h10.22c-.8-2.04-2.78-3.5-5.11-3.5"})),dve=Qr(V.jsx("path",{d:"M5 20h14v-2H5zm0-10h4v6h6v-6h4l-7-7z"})),hve=[{value:"EveryDay",name:""},{value:"EveryHour",name:""}],AM=".m3u",O1={original:{urls:[],result_name:"",md5:"",run_type:"EveryDay",keyword_dislike:[],keyword_like:[],http_timeout:2e4,check_timeout:2e4,concurrent:30,sort:!1,no_check:!1,rename:!1,ffmpeg_check:!1,not_http_skip:!1,same_save_num:0},id:"",create_time:0,task_info:{run_type:"EveryDay",last_run_time:0,next_run_time:0,is_running:!1,task_status:"Pending"}},Y$=({onClose:i,formValue:e,open:t,onSave:r,handleSave:n,handleDelete:s,taskService:a,checkType:o,output_folder:l})=>{const{t:u}=No(),c=j.useContext(yu),[h,m]=j.useState(O1),[g,y]=j.useState(""),[_,T]=j.useState(""),[E,w]=j.useState(0),[D,R]=j.useState(!1),A=["","",""];j.useEffect(()=>{if(!t){let Le=JSON.parse(JSON.stringify(O1));Le.original.result_name===""&&(Le.original.result_name=L(10)),m(Le),T(""),y(""),w(0),R(!1)}},[t]),j.useEffect(()=>{if(w(0),e!==null){const Le={...e,original:{...e.original,result_name:e.original.result_name.replace(l,"").replace(AM,""),http_timeout:e.original.http_timeout??0,check_timeout:e.original.check_timeout??0,concurrent:e.original.concurrent??0,sort:e.original.sort??!1,no_check:e.original.no_check??!1,rename:e.original.rename??!1,ffmpeg_check:e.original.ffmpeg_check??!1,not_http_skip:e.original.not_http_skip??!1,same_save_num:e.original.same_save_num??0}};m(Le)}else{let Le=JSON.parse(JSON.stringify(O1));Le.original.result_name===""&&(Le.original.result_name=L(10)),m(Le)}},[e]);const L=Le=>{Le=Le||32;const Ne="ABCDEFGHJKMNPQRSTWXYZabcdefhijkmnprstwxyz2345678",rt=Ne.length;let lt="";for(let dt=0;dt<Le;dt++)lt+=Ne.charAt(Math.floor(Math.random()*rt));return lt},F=()=>{w(Le=>Le+1)},B=()=>{w(Le=>Le-1)},M=()=>{if(h.original.urls.length===0){let Le=u("");alert(Le)}else n(h),i()},k=()=>{s(h),se(),i()},q=Le=>{const Ne=[...h.original.urls,Le];m({...h,original:{...h.original,urls:Ne}})},G=Le=>parseInt(Le.replace("url-",""),10),H=()=>{q("")},re=()=>{R(!0)},se=()=>{R(!1)},de=Le=>{m(Ne=>({...Ne,original:{...Ne.original,urls:Ne.original.urls.filter((rt,lt)=>lt!==Le)}}))},me=Le=>{m({...h,original:{...h.original,check_timeout:parseInt(Le.target.value,10)}})},ue=async Le=>{const Ne=Le.target.files[0];if(Ne)try{const rt=new FormData;rt.append("file",Ne);let lt=await a.uploadFile(rt);q(lt.url)}catch(rt){console.error("",rt)}},oe=Le=>{m({...h,original:{...h.original,http_timeout:parseInt(Le.target.value,10)}})},ce=Le=>{if(Le===1&&g!=""){let Ne=h.original.keyword_like??[];Ne.push(g),m({...h,original:{...h.original,keyword_like:te(Ne)}}),y("")}else if(Le===2&&_!=""){let Ne=h.original.keyword_dislike??[];Ne.push(_),m({...h,original:{...h.original,keyword_dislike:te(Ne)}}),T("")}},te=Le=>Le.filter((Ne,rt)=>Le.indexOf(Ne)===rt),fe=Le=>{y(Le.target.value)},ye=Le=>{T(Le.target.value)},Se=Le=>{const Ne=G(Le.target.name),rt=[...h.original.urls];rt[Ne]=Le.target.value;const lt={...h,original:{...h.original,urls:rt}};m(lt)},ke=Le=>{m({...h,original:{...h.original,result_name:Le.target.value}})},qe=Le=>{m({...h,original:{...h.original,run_type:Le.target.value}})},vt=Le=>{m({...h,original:{...h.original,concurrent:parseInt(Le.target.value,10)}})},et=Le=>{let Ne=!1;Le.target.defaultValue==="false"?Ne=!1:Ne=!0,m({...h,original:{...h.original,sort:Ne}})},kt=Le=>{m({...h,original:{...h.original,same_save_num:parseInt(Le.target.value,10)}})},pt=Le=>{let Ne=!1;Le.target.defaultValue==="false"?Ne=!1:Ne=!0,m({...h,original:{...h.original,rename:Ne}})},Ut=Le=>{let Ne=!1;Le.target.defaultValue==="false"?Ne=!1:Ne=!0,m({...h,original:{...h.original,not_http_skip:Ne}})},Vt=Le=>{let Ne=!1;Le.target.defaultValue==="false"?Ne=!1:Ne=!0,m({...h,original:{...h.original,ffmpeg_check:Ne}})},Xe=Le=>{let Ne=!1;Le.target.defaultValue==="false"?Ne=!1:Ne=!0,m({...h,original:{...h.original,no_check:Ne}})},Ue=Le=>{switch(Le){case 0:return V.jsxs(hr,{sx:{mt:2},children:[h.original.urls.length>0?V.jsxs(ki,{fullWidth:!0,style:{padding:"0 0 20px"},children:[V.jsx(Tn,{variant:"subtitle1",component:"div",children:u("")}),h.original.urls.map((Ne,rt)=>V.jsxs(Nm,{direction:"row",spacing:1,children:[V.jsx(Ws,{style:{width:"100%"},disabled:Ne.startsWith("static")||Ne.startsWith("localstorage"),id:"standard-basic",variant:"standard",name:"url-"+rt,value:Ne,onChange:Se}),V.jsx(Kx,{"aria-label":"delete",onClick:()=>de(rt),children:V.jsx(p_,{})})]},rt))]}):"",V.jsxs(ki,{fullWidth:!0,style:{padding:"20px 0 20px",display:"flex",flexDirection:"row",justifyContent:"space-between"},children:[V.jsx(mi,{variant:"outlined",onClick:()=>H(),startIcon:V.jsx(N$,{}),children:u("")}),V.jsxs(mi,{variant:"contained",component:"label",startIcon:V.jsx(dve,{}),children:[u(""),V.jsx("input",{hidden:!0,accept:"*",multiple:!0,type:"file",onChange:ue})]})]}),o==="server"?V.jsxs(ki,{fullWidth:!0,style:{margin:"0 0 20px"},children:[V.jsx(E0,{id:"demo-simple-select-standard-label",children:u("")}),V.jsx(w0,{labelId:"demo-simple-select-standard-label",id:"demo-simple-select-standard",value:h.original.run_type,label:u(""),onChange:qe,children:hve.map((Ne,rt)=>V.jsx(pC,{value:Ne.value,children:u(Ne.name)},rt))})]}):"",o==="server"?V.jsxs(ki,{fullWidth:!0,style:{margin:"20px 0 20px"},children:[V.jsx(E0,{htmlFor:"outlined-adornment-amount",children:u("")}),V.jsx(Vx,{style:{width:"100%"},name:"resultName",endAdornment:V.jsx(wM,{position:"end",children:AM}),startAdornment:V.jsx(wM,{position:"start",children:l}),"aria-describedby":"outlined-weight-helper-text",label:u(""),value:h.original.result_name,onChange:ke})]}):""]});case 1:return V.jsxs(hr,{sx:{mt:2},children:[V.jsx(ki,{fullWidth:!0,style:{margin:"10px 0 20px"},children:V.jsxs(Nm,{direction:"row",spacing:2,children:[V.jsx(Ws,{id:"standard-basic",label:u(""),variant:"standard",fullWidth:!0,value:g,onChange:fe}),V.jsx(mi,{size:"small",variant:"outlined",onClick:()=>ce(1),startIcon:V.jsx(uve,{}),children:u("")})]})}),h.original.keyword_like!==null&&h.original.keyword_like.length>0?V.jsxs(ki,{fullWidth:!0,style:{padding:"0 0 20px"},children:[V.jsx(Tn,{variant:"subtitle1",component:"div",children:u("")}),V.jsx(Nm,{direction:"row",spacing:1,style:{display:"flex",flexWrap:"wrap"},children:h.original.keyword_like!==null&&h.original.keyword_like.map((Ne,rt)=>V.jsx(yR,{label:Ne,onDelete:()=>deleteThisLikeKw(rt),variant:"outlined",style:{margin:"5px"}},rt))})]}):"",V.jsx(ki,{fullWidth:!0,style:{margin:"10px 0 20px"},children:V.jsxs(Nm,{direction:"row",spacing:2,children:[V.jsx(Ws,{id:"standard-basic",label:u(""),variant:"standard",fullWidth:!0,value:_,onChange:ye}),V.jsx(mi,{size:"small",variant:"outlined",onClick:()=>ce(2),startIcon:V.jsx(cve,{}),children:u("")})]})}),h.original.keyword_dislike!==null&&h.original.keyword_dislike.length>0?V.jsxs(ki,{fullWidth:!0,style:{padding:"0 0 10px"},children:[V.jsx(Tn,{variant:"subtitle1",component:"div",children:u("")}),V.jsx(Nm,{direction:"row",spacing:1,style:{display:"flex",flexWrap:"wrap"},children:h.original.keyword_dislike.map((Ne,rt)=>V.jsx(yR,{label:Ne,variant:"outlined",onDelete:()=>deleteThisDislikeKw(rt),style:{margin:"5px"}},rt))})]}):""]});case 2:return V.jsxs(hr,{sx:{mt:2},children:[V.jsxs(ki,{fullWidth:!0,style:{margin:"20px 0 20px"},children:[V.jsx(Tn,{variant:"subtitle1",component:"div",children:u("http(ms)")}),V.jsx(Ws,{id:"standard-basic",variant:"standard",value:h.original.http_timeout,onChange:oe})]}),V.jsxs(ki,{fullWidth:!0,style:{margin:"20px 0 20px"},children:[V.jsx(Tn,{variant:"subtitle1",component:"div",children:u("(ms)")}),V.jsx(Ws,{id:"standard-basic",variant:"standard",value:h.original.check_timeout,onChange:me})]}),V.jsxs(ki,{fullWidth:!0,style:{margin:"10px 0 20px"},children:[V.jsx(Tn,{variant:"subtitle1",component:"div",children:u("")}),V.jsxs(Tf,{row:!0,"aria-labelledby":"demo-row-radio-buttons-group-label",name:"row-radio-buttons-group",value:h.original.no_check,onChange:Xe,children:[V.jsx(il,{value:"false",control:V.jsx(nl,{}),label:u("")}),V.jsx(il,{value:"true",control:V.jsx(nl,{}),label:u("")})]})]}),h.original.no_check===!1?V.jsxs(V.Fragment,{children:[V.jsxs(ki,{fullWidth:!0,style:{margin:"10px 0 20px"},children:[V.jsx(Tn,{variant:"subtitle1",component:"div",children:u("")}),V.jsx(Ws,{id:"standard-basic",variant:"standard",value:h.original.concurrent,onChange:vt})]}),V.jsxs(ki,{fullWidth:!0,style:{margin:"10px 0 20px"},children:[V.jsx(Tn,{variant:"subtitle1",component:"div",children:u("")}),V.jsxs(Tf,{row:!0,"aria-labelledby":"demo-row-radio-buttons-group-label",name:"row-radio-buttons-group",value:h.original.ffmpeg_check,onChange:Vt,children:[V.jsx(il,{value:"false",control:V.jsx(nl,{}),label:u("http")}),V.jsx(il,{value:"true",disabled:c.ffmepgCheck==0&&c.nowMod===1,control:V.jsx(nl,{}),label:u("ffmpeg")})]})]}),h.original.ffmpeg_check===!1?V.jsxs(ki,{fullWidth:!0,style:{margin:"10px 0 20px"},children:[V.jsx(Tn,{variant:"subtitle1",component:"div",children:u("http")}),V.jsxs(Tf,{row:!0,"aria-labelledby":"demo-row-radio-buttons-group-label",name:"row-radio-buttons-group",value:h.original.not_http_skip,onChange:Ut,children:[V.jsx(il,{value:"false",control:V.jsx(nl,{}),label:u("")}),V.jsx(il,{value:"true",control:V.jsx(nl,{}),label:u("")})]})]}):""]}):"",V.jsxs(ki,{fullWidth:!0,style:{margin:"10px 0 20px"},children:[V.jsx(Tn,{variant:"subtitle1",component:"div",children:u('("[HD]CCTV1""[HD]")')}),V.jsxs(Tf,{row:!0,"aria-labelledby":"demo-row-radio-buttons-group-label",name:"row-radio-buttons-group",value:h.original.rename,onChange:pt,children:[V.jsx(il,{value:"false",control:V.jsx(nl,{}),label:u("")}),V.jsx(il,{value:"true",control:V.jsx(nl,{}),label:u("")})]})]}),V.jsxs(ki,{fullWidth:!0,style:{margin:"10px 0 20px"},children:[V.jsx(Tn,{variant:"subtitle1",component:"div",children:u("")}),V.jsxs(Tf,{row:!0,"aria-labelledby":"demo-row-radio-buttons-group-label",name:"row-radio-buttons-group",value:h.original.sort,onChange:et,children:[V.jsx(il,{value:"false",control:V.jsx(nl,{}),label:u("")}),V.jsx(il,{value:"true",control:V.jsx(nl,{}),label:u("")})]})]}),V.jsxs(ki,{fullWidth:!0,style:{margin:"10px 0 20px"},children:[V.jsx(Tn,{variant:"subtitle1",component:"div",children:u("(0 0)")}),V.jsx(Ws,{id:"standard-basic",variant:"standard",value:h.original.same_save_num,onChange:kt})]})]});default:return null}};return V.jsxs(V.Fragment,{children:[V.jsxs(cd,{open:D,onClose:se,"aria-describedby":"alert-dialog-slide-description",children:[V.jsx(Xx,{children:""}),V.jsxs(Rge,{children:[V.jsx(mi,{onClick:se,children:"No"}),V.jsx(mi,{onClick:k,children:"Yes"})]})]}),V.jsx(cd,{onClose:i,open:t,disableEnforceFocus:!0,disableAutoFocus:!0,disableRestoreFocus:!0,children:V.jsxs(hr,{sx:{width:"100%",padding:"40px"},children:[V.jsx(lve,{activeStep:E,children:A.map(Le=>V.jsx($ge,{children:V.jsx(X$,{children:u(Le)})},Le))}),V.jsxs(j.Fragment,{children:[Ue(E),V.jsxs(hr,{sx:{display:"flex",flexDirection:"row",pt:2},children:[E!==0&&V.jsx(mi,{color:"inherit",onClick:B,sx:{mr:1},children:u("")}),E===0&&h.id!==""&&V.jsx(mi,{color:"error",onClick:re,startIcon:V.jsx(p_,{}),children:u("")}),V.jsx(hr,{sx:{flex:"1 1 auto"}}),E===A.length-1?o==="server"||h.id===""?V.jsx(mi,{onClick:M,children:u("")}):"":V.jsx(mi,{onClick:F,children:u("")})]})]})]})})]})},IM=Qr(V.jsx("path",{d:"M19 9h-4V3H9v6H5l7 7zM5 18v2h14v-2z"})),Q$=({isNowHandle:i,row:e,clickTask:t,doTaskRightNow:r,source:n,showDownloadDialog:s,checkTaskRefetch:a,checkTaskContinue:o,checkTaskAgain:l})=>{const u=j.useContext(yu),{t:c}=No(),h=E=>{r(E)},m=E=>{s(E)},g=E=>{console.log("handleTaskRefetch",E),a(E)},y=E=>{console.log("handleTaskContinue",E),o(E)},_=E=>{console.log("handleTaskContinue",E),l(E)},T=(E,w)=>{let D=[],R=e.original.same_save_num;for(let A=0;A<e.list.length;A++)e.list[A].status===200&&D.push(e.list[A]);if(R>0){const A={};D.forEach(L=>{A[L.name]||(A[L.name]=[]),A[L.name].push(L)}),D=Object.values(A).flatMap(L=>L.slice(0,R))}n==="ltask"&&u.nowMod===1?u.clientSaveFile(D,w==="txt"?"txt":"m3u"):u.webSaveFile(D,w==="txt"?"txt":"m3u")};return V.jsx(j.Fragment,{children:V.jsxs(bk,{children:[V.jsxs(dd,{width:400,children:[V.jsx(mi,{onClick:()=>t(),variant:"text",children:e.id}),V.jsx(hr,{children:n==="task"?V.jsxs(hr,{children:[V.jsx(mi,{color:"success",onClick:()=>m(e.id),size:"small",startIcon:V.jsx(U$,{}),children:c("")}),!i&&e.task_info.next_run_time>0&&e.task_info.next_run_time-new Date().getTime()/1e3>=120?V.jsx(mi,{color:"success",onClick:()=>h(e.id),children:c("")}):""]}):V.jsxs(hr,{style:{display:"flex"},children:[V.jsx(mi,{size:"small",color:"success",startIcon:V.jsx(IM,{}),onClick:()=>T(e.id,"m3u"),children:".m3u"}),V.jsx(mi,{size:"small",color:"success",startIcon:V.jsx(IM,{}),onClick:()=>T(e.id,"txt"),children:".txt"})]})})]}),V.jsxs(dd,{align:"right",width:300,children:[V.jsxs("div",{children:[c(""),"",e.create_time>0?new Date(e.create_time*1e3).toLocaleTimeString("zh-CN",{month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",hour12:!1}):""]}),e.task_info.last_run_time>0?V.jsxs("div",{children:[c(""),"",new Date(e.task_info.last_run_time*1e3).toLocaleTimeString("zh-CN",{month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",hour12:!1})]}):"",V.jsxs("div",{children:[c(""),"",c(i?"":"")]}),n==="task"&&e.task_info.next_run_time>0?V.jsxs("div",{children:[c(""),"",new Date(e.task_info.next_run_time*1e3).toLocaleTimeString("zh-CN",{month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",hour12:!1})]}):"",n==="task"?V.jsxs("div",{children:[c(""),"",e.task_info.run_type==="EveryHour"?c(""):c("")]}):"",V.jsxs("div",{children:[e.task_info.task_status==="FetchDataError"?V.jsx(mi,{onClick:()=>g(e.id),style:{color:"red",cursor:"pointer"},children:c("")}):"",e.task_info.task_status==="FetchSomeDataError"?V.jsx(mi,{onClick:()=>y(e.id),style:{color:"orange",cursor:"pointer"},children:c("")}):"",e.task_info.task_status==="Completed"?V.jsx(mi,{onClick:()=>_(e.id),style:{color:"green",cursor:"pointer"},children:c("")}):""]})]})]})})},J$=({onClose:i,formValue:e,open:t})=>{const{t:r}=No(),[n,s]=j.useState([]),[a,o]=j.useState(""),l=j.useContext(yu);j.useEffect(()=>{o(window.document.location.origin+"/"+e.url),e.content!==""?s(e.content.split(`
`)):s([])},[e]);const u=async()=>{l.saveFile(),l.nowMod===0?window.open(a):l.clientSaveFile(e.content,"m3u")};return V.jsx(cd,{onClose:()=>i(!1),open:t,children:V.jsx("div",{style:{width:"960px",minHeight:"400px"},children:V.jsxs("div",{style:{overflow:"hidden",padding:"0 20px"},children:[V.jsxs("div",{style:{position:"fixed",overflow:"hidden",backgroundColor:"#fff",zIndex:9,width:"560px"},children:[V.jsxs("div",{children:[r(""),"",V.jsx("b",{children:a})]}),n.length>0&&V.jsx("div",{children:V.jsx(mi,{variant:"text",onClick:()=>u(e.url),children:r("")})})]}),n.length>0?V.jsx("div",{style:{padding:"60px 0",position:"relative",textWrap:"nowrap"},children:n.map((c,h)=>V.jsx("div",{children:c},h))}):V.jsx("div",{style:{padding:"60px 0",position:"relative"},children:V.jsx("div",{children:r("")})})]})})})},Z$=({onClose:i,open:e,onSave:t})=>{const{t:r}=No(),[n,s]=j.useState(""),a=()=>{s(""),i(!1)},o=()=>{t(n)},l=u=>{s(u.target.value)};return V.jsxs(cd,{onClose:a,open:e,children:[V.jsx(hr,{sx:{width:500,padding:"20px"},children:V.jsx(Ws,{id:"outlined-multiline-flexible",multiline:!0,value:n,maxRows:4,style:{width:"500px"},onChange:l})}),V.jsx(mi,{variant:"text",onClick:o,children:r("")})]})},e7=({onClose:i,formValue:e,open:t})=>{const r=()=>{i(!1)};return V.jsx(cd,{onClose:r,open:t,children:V.jsx(hr,{sx:{width:500,padding:"20px"},children:V.jsx(Ws,{id:"outlined-multiline-flexible",multiline:!0,value:e,maxRows:4,style:{width:"500px"}})})})},fve=({onClose:i,formValue:e,open:t})=>{const{t:r}=No(),[n,s]=j.useState([]);j.useContext(yu);const[a,o]=j.useState([]),[l]=j.useState(()=>new K$);j.useEffect(()=>{u()},[]);const u=async()=>{try{const y=await l.getReplaceList();console.log("response---",y),s(y)}catch(y){console.error("Error fetching data:",y)}};j.useEffect(()=>{if(!n){o([]);return}Array.isArray(n)?o(n.map(y=>({key:y.key??"",value:y.value??""}))):o(typeof n=="object"?Object.entries(n).map(([y,_])=>({key:y,value:_??""})):[])},[n]);const c=(y,_,T)=>{o(E=>{const w=E.map(D=>({...D}));return w[y][_]=T,w})},h=()=>{o(y=>[...y,{key:"",value:""}])},m=y=>{o(_=>_.filter((T,E)=>E!==y))},g=async()=>{const y={};a.forEach(T=>{T.key!==void 0&&T.key!==""&&(y[T.key]=T.value??"")}),s(y);let _={content:JSON.stringify(y)};try{await l.updateReplaceList(_)}catch(T){console.error("Error saving replace list:",T)}};return V.jsxs(cd,{onClose:()=>i(!1),open:t,children:[V.jsx(Xx,{id:"alert-dialog-title",children:r("")}),V.jsxs("div",{style:{padding:"0 20px 10px",fontSize:"12px",color:"#666"},children:[V.jsx("p",{style:{padding:"0",margin:"0"},children:r("")}),V.jsx("p",{style:{padding:"0",margin:"0"},children:r("[HD][HD]")})]}),V.jsx("div",{children:V.jsxs("div",{style:{overflow:"hidden",padding:"0 20px"},children:[V.jsx("div",{style:{maxHeight:"60vh",overflow:"auto",padding:"12px 0"},children:a.length===0?V.jsx("div",{style:{padding:"8px 0",color:"#666"},children:r("No items")||"No items"}):a.map((y,_)=>V.jsxs("div",{style:{display:"flex",gap:8,alignItems:"center",marginBottom:8},children:[V.jsx(Ws,{label:r(""),value:y.key,onChange:T=>c(_,"key",T.target.value),size:"small",style:{width:220}}),V.jsx(Ws,{label:r(""),value:y.value,onChange:T=>c(_,"value",T.target.value),size:"small",style:{flex:1}}),V.jsx(Kx,{"aria-label":"delete",onClick:()=>m(_),children:V.jsx(p_,{})})]},_))}),V.jsxs("div",{style:{display:"flex",gap:8,padding:"12px 0",alignItems:"center"},children:[V.jsx(mi,{variant:"contained",onClick:h,children:r("")}),V.jsx("div",{style:{flex:1}}),V.jsx(mi,{variant:"contained",color:"primary",onClick:g,children:r("")}),V.jsx(mi,{variant:"outlined",onClick:()=>i(!1),children:r("")})]})]})})]})};function pve(){j.useContext(yu);const{t:i}=No(),[e]=j.useState(()=>new K$),[t,r]=j.useState(!1),[n,s]=j.useState(null),[a,o]=j.useState([]),[l,u]=j.useState(!1),[c,h]=j.useState(""),[m,g]=j.useState(!1),[y,_]=j.useState({content:"",url:""}),[T,E]=j.useState(!1),[w,D]=j.useState(!1),[R,A]=j.useState(""),[L,F]=j.useState(""),[B,M]=j.useState(!1);j.useEffect(()=>{se()},[]);const k=ke=>{s(ke),r(!0)},q=()=>{r(!1),s(null)},G=async ke=>{try{ke.id===""?await e.addTask(H(ke)):await e.updateTask(ke.id,H(ke)),se()}catch(qe){de(qe.message)}},H=ke=>({urls:ke.original.urls,result_name:"static/output/"+ke.original.result_name+".m3u",md5:"",run_type:ke.original.run_type,keyword_dislike:ke.original.keyword_dislike,keyword_like:ke.original.keyword_like,http_timeout:ke.original.http_timeout,check_timeout:ke.original.check_timeout,sort:ke.original.sort,no_check:ke.original.no_check,concurrent:ke.original.concurrent,rename:ke.original.rename,ffmpeg_check:ke.original.ffmpeg_check,not_http_skip:ke.original.not_http_skip,same_save_num:ke.original.same_save_num}),re=async ke=>{try{await e.deleteTask(ke.id),se()}catch(qe){de(qe.message)}},se=async()=>{try{let ke=await e.getTaskList();o(ke.list),F(ke.now_id)}catch{o([]),de(i(""))}},de=ke=>{h(ke),u(!0)},me=()=>{h(""),u(!1)},ue=async ke=>{try{await e.runTask(ke),se()}catch{de(i(""))}},oe=async ke=>{try{const qe=await e.getDownloadBody(ke);g(!0),_({content:qe.content,url:qe.url})}catch{de(i(""))}},ce=ke=>{g(ke)},te=()=>{o([]),se()},fe=ke=>{E(ke)},ye=async ke=>{if(ke)try{const qe=await e.exportTasks();D(!0),A(JSON.stringify(qe))}catch{de(i(""))}else D(!1)},Se=async ke=>{try{const qe=JSON.parse(ke);await e.importTasks(qe),E(!1),te()}catch{de(i(""))}};return V.jsxs(hr,{style:{padding:"0 20px"},children:[V.jsxs(hr,{style:{marginBottom:"10px",display:"flex",justifyContent:"space-between"},children:[V.jsxs(hr,{children:[V.jsx(mi,{variant:"contained",size:"small",startIcon:V.jsx(G$,{}),onClick:()=>k(null),style:{marginRight:"10px"},children:i("")}),V.jsx(mi,{variant:"outlined",size:"small",startIcon:V.jsx(kge,{}),onClick:te,style:{marginRight:"10px"},children:i("")}),V.jsx(mi,{variant:"outlined",size:"small",color:"secondary",startIcon:V.jsx(wge,{}),onClick:B?()=>M(!1):()=>M(!0),children:i("")})]}),V.jsxs(hr,{children:[V.jsx(mi,{variant:"outlined",size:"small",startIcon:V.jsx(Age,{}),style:{marginRight:"10px"},onClick:()=>fe(!0),children:i("")}),V.jsx(mi,{variant:"outlined",size:"small",startIcon:V.jsx(CJ,{}),onClick:()=>ye(!0),children:i("")})]})]}),V.jsx(Nw,{open:l,autoHideDuration:6e3,onClose:me,message:c}),V.jsx(Y$,{taskService:e,formValue:n,open:t,onClose:q,handleSave:G,handleDelete:re,checkType:"server",output_folder:"static/output/"}),V.jsx(J$,{formValue:y,open:m,onClose:ce}),V.jsx(fve,{formValue:y,open:B,onClose:()=>M(!1)}),V.jsx(Z$,{open:T,onClose:fe,onSave:Se}),V.jsx(e7,{open:w,formValue:R,onClose:ye}),V.jsx(Rh,{sx:{overflow:"hidden"},children:V.jsx(q$,{children:V.jsxs(H$,{"aria-label":"simple table",children:[V.jsx(W$,{children:V.jsxs(bk,{children:[V.jsx(dd,{children:i("id")}),V.jsx(dd,{align:"right",children:i("")})]})}),V.jsx(V$,{children:a.map(ke=>V.jsx(Q$,{row:ke,doTaskRightNow:ue,showDownloadDialog:oe,clickTask:()=>k(ke),source:"task",isNowHandle:ke.id===L},ke.id))})]})})})]})}class Xc{static STORAGE_KEY="local_tasks";static getTasks(){try{const e=localStorage.getItem(this.STORAGE_KEY);return e?JSON.parse(e):[]}catch(e){return console.error("Error getting tasks from localStorage:",e),[]}}static addTask(e){try{const t=this.getTasks(),r={...e,id:this.generateTaskId(),create_time:Date.now(),task_info:{run_type:e.original.run_type,last_run_time:0,next_run_time:0,is_running:!1,task_status:"Prepare"}};return t.push(r),localStorage.setItem(this.STORAGE_KEY,JSON.stringify(t)),r}catch(t){throw console.error("Error adding task to localStorage:",t),new Error("Failed to add task")}}static updateTask(e,t){try{const r=this.getTasks(),n=r.findIndex(a=>a.id===e);if(n===-1)throw new Error("Task not found");const s={...t,id:e,task_info:{...r[n].task_info,...t.task_info}};return r[n]=s,localStorage.setItem(this.STORAGE_KEY,JSON.stringify(r)),s}catch(r){throw console.error("Error updating task in localStorage:",r),new Error("Failed to update task")}}static deleteTask(e){try{const t=this.getTasks(),r=t.filter(n=>n.id!==e);if(r.length===t.length)throw new Error("Task not found");return localStorage.setItem(this.STORAGE_KEY,JSON.stringify(r)),!0}catch(t){throw console.error("Error deleting task from localStorage:",t),new Error("Failed to delete task")}}static generateTaskId(){return"task_"+Date.now()+"_"+Math.random().toString(36).substr(2,9)}static clearAllTasks(){try{localStorage.removeItem(this.STORAGE_KEY)}catch(e){throw console.error("Error clearing tasks from localStorage:",e),new Error("Failed to clear tasks")}}}const t7=j.createContext(),mve=({children:i})=>{const[e,t]=j.useState(0),[r,n]=j.useState(4),[s,a]=j.useState(""),[o,l]=j.useState([]),[u,c]=j.useState([]),[h,m]=j.useState(new Set),g=j.useRef([]);j.useRef(0);const y=j.useRef([]),_=j.useRef(""),T=j.useRef([]),E=j.useRef(null),w=j.useRef(null),D=j.useRef(0),R="local_tasks",A="nowTaskId",L="nowTaskList",F=(Xe,Ue)=>{localStorage.setItem(Ue,JSON.stringify(Xe))},B=()=>{console.log("start load data"),M(),k();const Xe=localStorage.getItem(A);if(Xe!==""){for(let Ue=0;Ue<T.current.length;Ue++)T.current[Ue].id===Xe&&(w.current=T.current[Ue]);re(Xe,!1)}else re("",!1)},M=()=>{let Xe=Xc.getTasks();c(Xe),T.current=Xe},k=()=>{const Xe=localStorage.getItem(L);if(Xe)try{let Ue=JSON.parse(Xe);H(Ue)}catch{H([])}else H([])},q=Xe=>{try{return Zr.parseM3uBody(Xe)}catch(Ue){return console.log("m3u8BodyToStructList err",Ue),[]}},G=(Xe,Ue)=>{c(Le=>{const Ne=Le.map(rt=>rt.id===Xe?{...rt,task_info:{...rt.task_info,task_status:"Completed"},list:Ue}:rt);return F(Ne,R),T.current=Ne,Ne}),H([]),re("",!0)},H=Xe=>{l(Xe),F(Xe,L),y.current=Xe},re=(Xe,Ue)=>{a(Xe),Ue&&localStorage.setItem(A,Xe),_.current=Xe},se=(Xe,Ue)=>{c(Le=>{const Ne=Le.map(rt=>rt.id===Xe?{...rt,list:Ue}:rt);return F(Ne,R),T.current=Ne,Ne})},de=()=>{E.current||(E.current=setInterval(fe,1e4))},me=async(Xe,Ue)=>{console.log(`Checking URL: ${Xe.url}`);let Le=!1;Ue.no_check&&(Le=!0);let Ne=null;return Le?Ne={status:300,audio:null,video:null,error:""}:Ue.ffmpeg_check?Ne=await ue(Xe):Ne=await oe(Xe,Ue),console.log("checkUrl result",Ne),Ne},ue=async(Xe,Ue)=>{try{let Le=await Ct("get_video_info",{url:Xe.url});if(console.log("checkUrlByCmd",Le),Le?.streams?.length>0){let Ne=[],rt=[];for(let lt=0;lt<Le.streams.length;lt++)Le.streams[lt].codec_type==="video"&&Ne.push(Le.streams[lt]);for(let lt=0;lt<Le.streams.length;lt++)Le.streams[lt].codec_type==="audio"&&rt.push(Le.streams[lt]);return{status:200,audio:rt,video:Ne,error:""}}else return console.log("checkUrlByCmd error empty"),{status:500,audio:null,video:null,error:"empty data"}}catch(Le){return console.log("checkUrlByCmd error",Le),{status:500,audio:null,video:null,error:Le}}},oe=async(Xe,Ue)=>{try{let Le=!1;if(!Xe.url.startsWith("http://")&&!Xe.url.startsWith("https://")&&(Le=!0),Le)return{status:300,audio:null,video:null,error:""};console.log("checkUrlByWeb, task timout ",Ue.http_timeout);const Ne=new AbortController,rt=setTimeout(()=>Ne.abort(),Ue.http_timeout),lt=await fetch(Xe.url,{method:"HEAD",signal:Ne.signal});if(!lt.ok||lt.bodyUsed)return console.log(`Request failed for ${Xe.url}:`,{ok:lt.ok,bodyUsed:lt.bodyUsed}),clearTimeout(rt),Ne.abort(),{status:500,audio:null,video:null};clearTimeout(rt);const dt=lt.headers.get("content-type");return console.log(`Content-Type for ${Xe.url}:`,dt),!dt||!(dt.includes("application/vnd.apple.mpegurl")||dt.includes("application/x-mpegurl")||dt.includes("audio/mpegurl")||dt.includes("audio/x-mpegurl")||dt.includes("text/plain")||dt.includes("application/x-mpegURL")||dt.includes("application/vnd.apple.mpegURL"))?{status:500,audio:null,video:null,contentType:dt}:{status:200,audio:null,video:null,contentType:dt}}catch(Le){return console.log(`Error checking ${Xe.url}:`,Le),{status:500,audio:null,video:null,contentType:""}}},ce=async Xe=>{for(;;){console.log("createTaskProcessor, nowIndex:",Xe);let Ue=null;for(let Le=0;Le<y.current.length;Le++)if(y.current[Le].status===0){Ue=y.current[Le];break}if(!Ue)break;y.current=y.current.map(Le=>Le.index===Ue.index?{...Le,status:1}:Le),ke(y.current);try{const Le=await me(Ue,w.current.original);console.log("checkUrl result",Le),console.log(Le.status),y.current=y.current.map(Ne=>Ne.index===Ue.index?{...Ne,status:Le.status,audio:Le.audio,video:Le.video}:Ne),ke(y.current)}catch(Le){console.error(`Task processor ${Xe} error:`,Le),y.current=y.current.map(Ne=>Ne.index===Ue.index?{...Ne,status:500}:Ne),ke(y.current)}}},te=()=>{const Xe=[];if(console.log("startJobWorker, nowTaskRef.current",w.current),w.current!==null){D.current=1;for(let Ue=0;Ue<w.current.original.concurrent;Ue++)Xe.push(ce(Ue));Promise.all(Xe).then(()=>{D.current=0,console.log("All task processors completed"),g.current=[]}).catch(Ue=>{D.current=0,console.error("Task processor error:",Ue),g.current=[]})}},fe=async()=>{await et();let Xe=!1,Ue="";if(_.current!==""&&y.current.length>0||_.current===""&&y.current.length>0){let Le=!1;for(let Ne=0;Ne<T.current.length;Ne++)T.current[Ne].id===_.current&&(Le=!0);(!Le||_.current==="")&&(re("",!0),H([]))}if(y.current.length===0){let Le="",Ne=[],rt=null;for(let lt=0;lt<T.current.length;lt++)T.current[lt].task_info.task_status.toLowerCase()==="pending"&&Le===""&&T.current[lt].id!==Ue&&(Le=T.current[lt].id,Ne=T.current[lt].list,rt=T.current[lt]);w.current=rt,console.log("----- task list reset",Le,Ne),H(Ne),re(Le,!0),Ne.length>0&&(Xe=!0)}else{let Le=!0;for(let Ne=0;Ne<y.current.length;Ne++)y.current[Ne].status==0&&(Le=!1);Le?(Ue=_.current,console.log("set task complate",Ue,y.current),G(Ue,y.current)):Xe=!0}if(console.log("nowTaskIdRef.current",_.current),_.current!==""&&w.current!==null)for(let Le=0;Le<T.current.length;Le++)T.current[Le].id===_.current&&(w.current=T.current[Le]);Xe&&D.current===0&&(console.log("startJobWorker"),te())},ye=()=>{Se(),E.current&&(clearInterval(E.current),E.current=null)},Se=()=>{g.current.forEach(Xe=>Xe.terminate())};j.useEffect(()=>(B(),console.log("-----task start--",u,T.current),de(),()=>{ye()}),[]);const ke=Xe=>{l(Xe),F(Xe,L)},qe=(Xe,Ue)=>{c(Le=>{const Ne=Le.map(rt=>rt.id===Xe?Ue==="Prepare"?{...rt,task_info:{...rt.task_info,task_status:Ue},list:[],bodies:[]}:{...rt,task_info:{...rt.task_info,task_status:Ue}}:rt);return F(Ne,R),T.current=Ne,Ne})},vt=(Xe,Ue)=>{c(Le=>{const Ne=Le.map(rt=>rt.id===Xe?{...rt,bodies:Ue}:rt);return F(Ne,R),T.current=Ne,Ne})},et=async()=>{console.log("------prepare");for(const Xe of T.current)if(Xe.task_info.task_status==="Prepare")try{let Ue=await Ut(Xe.original.urls),Le="Pending",Ne=!1,rt=!1;for(let lt=0;lt<Ue.length;lt++)Ue[lt].status===200&&(rt=!0),Ue[lt].status!==200&&(Ne=!0);if(Ne&&rt&&(Le="FetchSomeDataError"),Ne&&!rt&&(Le="FetchDataError"),rt){let lt=[];for(let dt=0;dt<Ue.length;dt++)if(Ue[dt].status===200){let ut=q(Ue[dt].body,Xe.original.rename);for(let At=0;At<ut.length;At++)lt.push(ut[At])}lt=lt.filter((dt,ut,At)=>ut===At.findIndex(it=>it.url===dt.url)),se(Xe.id,lt)}vt(Xe.id,Ue),qe(Xe.id,Le)}catch(Ue){console.error("Error preparing task:",Ue)}},kt=(Xe,Ue)=>{if(e===0)return Xe;let Le=parseInt(Ue,10);return"/fetch/m3u-body?url="+Xe+"&timeout="+(isNaN(Le)?"-1":Le)},pt=Xe=>Xe.substr(0,7)==="#EXTM3U",Ut=async Xe=>{let Ue=[],Le=[];for(let Ne=0;Ne<Xe.length;Ne++){let rt=Xe[Ne];if(!rt.startsWith("localstorage/")){let lt=2e3;rt=kt(rt,lt),Ue.push(Wr.get(rt,{timeout:lt}))}}for(let Ne=0;Ne<Xe.length;Ne++){let rt=Xe[Ne];if(rt.startsWith("localstorage/")){const lt=localStorage.getItem(rt);if(lt){let dt={status:200,url:rt,body:lt};Le.push(dt)}else{let dt={status:404,url:rt,body:"Data not found in localStorage"};Le.push(dt)}}}return Ue.length>0&&(await Promise.allSettled(Ue)).forEach((rt,lt)=>{let dt=!0,ut="";if(rt.status==="fulfilled"){const it=rt.value.data;pt(it)?(dt=!1,ut=it):(dt=!0,ut=it)}else dt=!0,ut=rt.reason.message;let At=Xe[lt];dt?Le.push({status:500,url:At,body:ut}):Le.push({status:200,url:At,body:ut})}),Le},Vt={tasks:u,runningTasks:h,freshTaskList:M,updateTaskStatus:qe};return V.jsx(t7.Provider,{value:Vt,children:i})};class gve{static STORAGE_PREFIX="localstorage/";static saveFile(e,t){const r=this.STORAGE_PREFIX+e;try{return localStorage.setItem(r,t),r}catch(n){throw console.error("Error saving file to localStorage:",n),new Error("Failed to save file to localStorage")}}static getFile(e){const t=this.STORAGE_PREFIX+e;try{return localStorage.getItem(t)}catch(r){return console.error("Error reading file from localStorage:",r),null}}static deleteFile(e){const t=this.STORAGE_PREFIX+e;try{localStorage.removeItem(t)}catch(r){console.error("Error deleting file from localStorage:",r)}}static async readAndSaveFile(e){return new Promise((t,r)=>{if(!e||!(e instanceof Blob)){r(new Error("Invalid file object"));return}const n=new FileReader;n.onload=s=>{try{const a=s.target.result,o=e.name||`file_${Date.now()}`,l=this.saveFile(o,a);t(l)}catch(a){r(a)}},n.onerror=s=>{r(new Error("Failed to read file: "+s.message))};try{n.readAsText(e)}catch(s){r(new Error("Failed to read file: "+s.message))}})}static hasFile(e){const t=this.STORAGE_PREFIX+e;return localStorage.getItem(t)!==null}static getAllFileKeys(){const e=[];for(let t=0;t<localStorage.length;t++){const r=localStorage.key(t);r.startsWith(this.STORAGE_PREFIX)&&e.push(r.replace(this.STORAGE_PREFIX,""))}return e}}class vve{constructor(e=""){this.baseUrl=e}async getTaskList(){try{return{list:Xc.getTasks()}}catch(e){return console.error("Error getting task list:",e),{list:[]}}}async addTask(e){try{return{code:"200",msg:"Success",data:Xc.addTask(e)}}catch(t){return console.error("Error adding task:",t),{code:"500",msg:t.message}}}async uploadFile(e){try{const t=e.get("file");if(!t)throw new Error("No file found in FormData");return{code:"200",msg:"Success",url:await gve.readAndSaveFile(t)}}catch(t){throw console.error("File upload failed:",t),t}}async updateTask(e,t){try{return{code:"200",msg:"Success",data:Xc.updateTask(e,t)}}catch(r){return console.error("Error updating task:",r),{code:"500",msg:r.message}}}async deleteTask(e){try{return Xc.deleteTask(e),{code:"200",msg:"Success"}}catch(t){return console.error("Error deleting task:",t),{code:"500",msg:t.message}}}async runTask(e){return{code:"200",msg:"Success"}}async getDownloadBody(e){return{content:"",url:""}}async exportTasks(){try{return Xc.getTasks()}catch(e){return console.error("Error exporting tasks:",e),[]}}async importTasks(e){try{return Xc.clearAllTasks(),e.forEach(t=>{Xc.addTask(t)}),{code:"200",msg:"Success"}}catch(t){return console.error("Error importing tasks:",t),{code:"500",msg:t.message}}}}function yve(){const i=j.useContext(t7),{t:e}=No(),[t]=j.useState(()=>new vve),[r,n]=j.useState(!1),[s,a]=j.useState(null),[o,l]=j.useState(!1),[u,c]=j.useState(""),[h,m]=j.useState(!1),[g,y]=j.useState({content:"",url:""}),[_,T]=j.useState(!1),[E,w]=j.useState(!1),[D,R]=j.useState(""),A=ce=>{a(ce),n(!0)},L=()=>{n(!1),a(null)},F=async ce=>{try{ce.id===""?await t.addTask(ce):await t.updateTask(ce.id,ce),i.freshTaskList()}catch(te){M(te.message)}},B=async ce=>{try{await t.deleteTask(ce.id),i.freshTaskList()}catch(te){M(te.message)}},M=ce=>{c(ce),l(!0)},k=()=>{c(""),l(!1)},q=async ce=>{try{await t.runTask(ce)}catch{M(e(""))}},G=async ce=>{i.updateTaskStatus(ce,"Prepare")},H=async ce=>{i.updateTaskStatus(ce,"Pending")},re=async ce=>{i.updateTaskStatus(ce,"Prepare")},se=async ce=>{try{const te=await t.getDownloadBody(ce);m(!0),y({content:te.content,url:te.url})}catch{M(e(""))}},de=ce=>{m(ce)},me=ce=>{T(ce)},ue=async ce=>{if(ce)try{const te=await t.exportTasks();w(!0),R(JSON.stringify(te))}catch{M(e(""))}else w(!1)},oe=async ce=>{try{const te=JSON.parse(ce);await t.importTasks(te),T(!1)}catch{M(e(""))}};return V.jsx(hr,{style:{padding:"0 20px"},children:V.jsxs(V.Fragment,{children:[V.jsx(hr,{style:{marginBottom:"10px",display:"flex",justifyContent:"space-between"},children:V.jsx(hr,{children:V.jsx(mi,{variant:"contained",startIcon:V.jsx(G$,{}),onClick:()=>A(null),style:{marginRight:"10px"},children:e("")})})}),V.jsx(Nw,{open:o,autoHideDuration:6e3,onClose:k,message:u}),V.jsx(Y$,{taskService:t,formValue:s,open:r,onClose:L,handleSave:F,handleDelete:B,checkType:"local",output_folder:""}),V.jsx(J$,{formValue:g,open:h,onClose:de}),V.jsx(Z$,{open:_,onClose:me,onSave:oe}),V.jsx(e7,{open:E,formValue:D,onClose:ue}),V.jsx(Rh,{sx:{overflow:"hidden"},children:V.jsx(q$,{children:V.jsxs(H$,{"aria-label":"simple table",children:[V.jsx(W$,{children:V.jsxs(bk,{children:[V.jsx(dd,{children:e("id")}),V.jsx(dd,{align:"right",children:e("")})]})}),V.jsx(V$,{children:i.tasks.map(ce=>V.jsx(Q$,{row:ce,doTaskRightNow:q,showDownloadDialog:se,clickTask:()=>A(ce),checkTaskRefetch:G,checkTaskContinue:H,checkTaskAgain:re,source:"ltask"},ce.id))})]})})})]})})}function _ve(i){const e=j.useContext(yu),{nowPlatform:t}=i,[r,n]=j.useState(!1),[s,a]=j.useState(null),o=T=>{let E=e.settings.playerSource;console.log(E),a({autoplay:!0,controls:!0,responsive:!0,fluid:!0,muted:!0,playsinline:!0,html5:{vhs:{overrideNative:!0}},sources:[{src:T,type:E}]})},l=j.useRef(null),[u,c]=j.useState(""),[h,m]=j.useState([]),g=async()=>{const T=Jy();await j0("changeWatchUrl",E=>{E.event==="changeWatchUrl"&&(c(E.payload.data.url),y(E.payload.data.url),T.setTitle(E.payload.data.name))})};j.useEffect(()=>{let T={},E=new URLSearchParams(window.location.search).entries();for(let[w,D]of E)T[w]=D;T.url!==void 0&&(c(T.url),y(T.url)),g()},[]);const y=T=>{o(T),l.current!==null&&l.current.play()},_=T=>{console.log("load video"),l.current=T,T.on("waiting",()=>{console.log("player is waiting"),console.log(l.current)}),T.on("canplay",()=>{console.log("videojs canplay")}),T.on("dispose",()=>{console.log("player will dispose")}),T.on("fullscreenchange",E=>{console.log("full s",E)}),T.on("error",E=>{console.log("videojs error",E)}),T.ready(function(){console.log(T.controlBar);var E=T.controlBar.fullscreenToggle;const w=Jy();E.on("click",function(){console.log("user click full"),w.isFullscreen().then(D=>{if(console.log("now fullscreen status",D,window.screen),D){w.setFullscreen(!1),console.log("---exit full screen");const R=T.el().parentElement;R.style.width="",R.style.height="",R.style.alignContent="",R.style.backgroundColor="",T.el().style.width="",T.el().style.height=""}else{w.setFullscreen(!0);const R=T.el().parentElement;R.style.width=window.screen.width+"px",R.style.height=window.screen.height+"px",R.style.alignContent="center",R.style.backgroundColor="#000",T.el().style.width=window.screen.width+"px",T.el().style.height=window.screen.height+"px"}})})})};return V.jsx(V.Fragment,{children:s===null?"":V.jsx("div",{children:V.jsx(F$,{options:s,onReady:_,headers:h})})})}const xve={"Welcome to React":"iptv-checker","System Setting":"","menu source check":"","menu public source":"","menu watch online":"","menu background task":"","menu system settings":"","Please enter the data to be checked":"",:"",:""},Tve={translation:xve},bve={ffmpeg:"ffmpeg check",:"Support developers to develop and continue to maintain the project",:"Run Time Info",:"Task Info",:"Output files",:"donate",".txt":"Download the results .txt format",".m3u":"Download the results .m3u format",:"edit data",:"Checking",:"records",:"total",:"Local Tasks",:"status",:"create time",:"File Type",:"And",:"New Version",:"Only Support",:"Check",Github:"Github link",:"Now version","STAR":" If you think the project is good, please open the link above and give it a STAR",:"Public Source",:"Check Again",:"Detection history",:"Data Check",:"Data preparation",:"Needs to be checked?",",.m3u.txt":"Please enter the link, only .m3u and .txt suffix links are supported",:"Please select a detection file",:"Local",:"Network",:"File Type","":"Buy me a drink",:"Fast Check",:"Please enter the data you want to check",m3u:"M3U information of your choice",:"raw data",:"Settings",:"Previous",csv:"Download CSV",:"Deal with it again",:"There are already groups",:"A new group has been added",m3u:"Download m3u",:"change",:"Or",:"Filter groups",:"Only the grouping is displayed",:"Resume checks",:"data",:"Filter video clarity",:"And",:"keyword",:"Start checking",:"Search",:"The save was successful",:"Multi-keyword search",:"Pause the check",:"The link is empty",:"After refreshing, you will be redirected to the home page",:"Valid links",:"Delay",:"Replaces the selected group",:"The channel name contains",:"Invalid link",:"Invalid",",https://xxxx.m3u + ":"Format: Name, https://xxxx.m3u + line break, where the name needs to be unique as shown below",:"Check the progress","":"You need to click the [Search] button to filter","()":"Export (next step)",:"Select the source with the lowest latency",:"Edit",:"Delete the selection","/":"Cancel/Close",:"Watch",:"Custom source additions",m3u8:"m3u8 link",:"The name of the channel",:"Invalid",:"Valid",:"Save and close",:"Group name",:"Enter a new group name",:"System Settings","(,,)":"Sorting (If there is a large amount of data, the performance of the sorted list may be affected, so it is recommended to operate in batches)",:"Change the grouping",:"Check configuration",:"Previous",:"Next",:"Checking methods",http:"http fast check",http:"If it's a non-http link, skip it",'("[HD]CCTV1""[HD]")':'Should the extra characters in the channel name be removed (for example, "[HD]CCTV1" will remove the "[HD]" characters)',"(0 0)":"Number of channels to save with the same name (default 0 means save all; if set greater than 0, it will save the specified number of channels)",:"Basic configuration",:"Output file name",:"online link",:"local file",:"every day",:"Add",:"Waiting",:"Checking",:"Completed",:"Stopped",:"Operation failed",:"Channel Name Replacement Configuration",:"Character Replacement Configuration",:"Search Value",:"Replace Value",:"Cancel",:"Add a line","":"There are often some special characters before and after the channel name on the Internet. You can add this configuration to replace these characters and improve the tidiness of the channel name.","[HD][HD]":'For example, if "[HD]" appears in the channel name and you need to remove this character, add a line: fill in "[HD]" for the search value and leave the replacement value blank.',:"Basic configuration is empty",:"Favorite Channel Name",:"Dislike channel Name",:"Favorite Channel",:"Dislike channel",:"every hour",:"Timed check time",:"Add keywords",:"The name of the resulting file",:"Add not to see",:"No",:"Check the number of concurrent transactions",:"Yes",:"Execute it now","(ms)":"Check timeout (millisecond)","http(ms)":"HTTP Timeout (millisecond)",:"Add just look",:"Check the list of files",:"Need Sort",:"No need to check",:"Just look at the channel keywords",:"Subscribe link",:"Click Download",:"The operation failed",:"Don't look at channel keywords","":"If the fetch task fails, check whether the service starts normally",:"Not yet generated",id:"Task ID",:"Creation time",:"Run type",:"Love keywords",:"Play",:"Stop",:"Request header",m3u8:"Please enter the M3U8 playback address",:"Don't like keywords",m3u:"Upload the m3u file locally",:"Last run time",:"Next run time",:"Personalized configuration",:"Operational status",:"System configuration",:"Source Check",:"Public Source",:"Watch Online",:"Background Tasks",:"Please enter the data to be checked",:"New",:"Language",:"Remove",:"Example",:"name",:"Custom network source",:"Check concurrency","":"Check timeout (milliseconds)",:"Save",:"Player platform",:"Get data failed",:"Save failed",:"invalid parameters",:"Import tasks",:"Export tasks",:"Refetch Data",:"detail",:"Continue",:"Check Again",:"Refresh",:"last run time",:"Next Step",:"The input box supports the following formats","m3u,":"Supports standard format m3u links, if there are multiple, please use a comma as the separator, for example",:"Support similar","m3u":"Support original content of m3u files, similar to",:"Please select the source","githubiptv-org":"The current source is from iptv-org on GitHub. If you have relevant source links, please add them in the settings.","server":"The current setting for Background check server domain is",server:"Background check server domain","server":"I'm sorry, you haven't set the Background check server domain yet. Please go to the settings page to set it up before checking again."},Sve={translation:bve},Cve={en:Sve,zh:Tve};ms.use(sZ).init({resources:Cve,lng:"zh",interpolation:{escapeValue:!1}});const Eve=Tq([{path:"/",element:V.jsx(oge,{}),children:[{path:"/",element:V.jsx(yve,{})},{path:"/watch",element:V.jsx(x0e,{})},{path:"/task",element:V.jsx(pve,{})},{path:"/settings",element:V.jsx(Wte,{})}]},{path:"/watch/single",element:V.jsx(_ve,{})}]);G7.createRoot(document.getElementById("root")).render(V.jsx(ea.StrictMode,{children:V.jsx(EH,{children:V.jsx(mve,{children:V.jsx(Lq,{router:Eve})})})}));
