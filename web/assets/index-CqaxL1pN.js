function W9(r,e){for(var t=0;t<e.length;t++){const n=e[t];if(typeof n!="string"&&!Array.isArray(n)){for(const i in n)if(i!=="default"&&!(i in r)){const s=Object.getOwnPropertyDescriptor(n,i);s&&Object.defineProperty(r,i,s.get?s:{enumerable:!0,get:()=>n[i]})}}}return Object.freeze(Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function t(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(i){if(i.ep)return;i.ep=!0;const s=t(i);fetch(i.href,s)}})();var Dh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function ua(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}function q9(r){if(Object.prototype.hasOwnProperty.call(r,"__esModule"))return r;var e=r.default;if(typeof e=="function"){var t=function n(){var i=!1;try{i=this instanceof n}catch{}return i?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(r).forEach(function(n){var i=Object.getOwnPropertyDescriptor(r,n);Object.defineProperty(t,n,i.get?i:{enumerable:!0,get:function(){return r[n]}})}),t}var IT={exports:{}},Fm={},PT={exports:{}},Qr={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mI;function G9(){if(mI)return Qr;mI=1;var r=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),a=Symbol.for("react.context"),o=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),u=Symbol.for("react.memo"),c=Symbol.for("react.lazy"),h=Symbol.iterator;function m(ee){return ee===null||typeof ee!="object"?null:(ee=h&&ee[h]||ee["@@iterator"],typeof ee=="function"?ee:null)}var g={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},y=Object.assign,v={};function x(ee,pe,me){this.props=ee,this.context=pe,this.refs=v,this.updater=me||g}x.prototype.isReactComponent={},x.prototype.setState=function(ee,pe){if(typeof ee!="object"&&typeof ee!="function"&&ee!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,ee,pe,"setState")},x.prototype.forceUpdate=function(ee){this.updater.enqueueForceUpdate(this,ee,"forceUpdate")};function w(){}w.prototype=x.prototype;function E(ee,pe,me){this.props=ee,this.context=pe,this.refs=v,this.updater=me||g}var D=E.prototype=new w;D.constructor=E,y(D,x.prototype),D.isPureReactComponent=!0;var I=Array.isArray,A=Object.prototype.hasOwnProperty,L={current:null},N={key:!0,ref:!0,__self:!0,__source:!0};function U(ee,pe,me){var xe,Be={},Oe=null,dt=null;if(pe!=null)for(xe in pe.ref!==void 0&&(dt=pe.ref),pe.key!==void 0&&(Oe=""+pe.key),pe)A.call(pe,xe)&&!N.hasOwnProperty(xe)&&(Be[xe]=pe[xe]);var Ke=arguments.length-2;if(Ke===1)Be.children=me;else if(1<Ke){for(var _t=Array(Ke),Ze=0;Ze<Ke;Ze++)_t[Ze]=arguments[Ze+2];Be.children=_t}if(ee&&ee.defaultProps)for(xe in Ke=ee.defaultProps,Ke)Be[xe]===void 0&&(Be[xe]=Ke[xe]);return{$$typeof:r,type:ee,key:Oe,ref:dt,props:Be,_owner:L.current}}function B(ee,pe){return{$$typeof:r,type:ee.type,key:pe,ref:ee.ref,props:ee.props,_owner:ee._owner}}function k(ee){return typeof ee=="object"&&ee!==null&&ee.$$typeof===r}function H(ee){var pe={"=":"=0",":":"=2"};return"$"+ee.replace(/[=:]/g,function(me){return pe[me]})}var q=/\/+/g;function V(ee,pe){return typeof ee=="object"&&ee!==null&&ee.key!=null?H(""+ee.key):pe.toString(36)}function Q(ee,pe,me,xe,Be){var Oe=typeof ee;(Oe==="undefined"||Oe==="boolean")&&(ee=null);var dt=!1;if(ee===null)dt=!0;else switch(Oe){case"string":case"number":dt=!0;break;case"object":switch(ee.$$typeof){case r:case e:dt=!0}}if(dt)return dt=ee,Be=Be(dt),ee=xe===""?"."+V(dt,0):xe,I(Be)?(me="",ee!=null&&(me=ee.replace(q,"$&/")+"/"),Q(Be,pe,me,"",function(Ze){return Ze})):Be!=null&&(k(Be)&&(Be=B(Be,me+(!Be.key||dt&&dt.key===Be.key?"":(""+Be.key).replace(q,"$&/")+"/")+ee)),pe.push(Be)),1;if(dt=0,xe=xe===""?".":xe+":",I(ee))for(var Ke=0;Ke<ee.length;Ke++){Oe=ee[Ke];var _t=xe+V(Oe,Ke);dt+=Q(Oe,pe,me,_t,Be)}else if(_t=m(ee),typeof _t=="function")for(ee=_t.call(ee),Ke=0;!(Oe=ee.next()).done;)Oe=Oe.value,_t=xe+V(Oe,Ke++),dt+=Q(Oe,pe,me,_t,Be);else if(Oe==="object")throw pe=String(ee),Error("Objects are not valid as a React child (found: "+(pe==="[object Object]"?"object with keys {"+Object.keys(ee).join(", ")+"}":pe)+"). If you meant to render a collection of children, use an array instead.");return dt}function ie(ee,pe,me){if(ee==null)return ee;var xe=[],Be=0;return Q(ee,xe,"","",function(Oe){return pe.call(me,Oe,Be++)}),xe}function le(ee){if(ee._status===-1){var pe=ee._result;pe=pe(),pe.then(function(me){(ee._status===0||ee._status===-1)&&(ee._status=1,ee._result=me)},function(me){(ee._status===0||ee._status===-1)&&(ee._status=2,ee._result=me)}),ee._status===-1&&(ee._status=0,ee._result=pe)}if(ee._status===1)return ee._result.default;throw ee._result}var he={current:null},ae={transition:null},ne={ReactCurrentDispatcher:he,ReactCurrentBatchConfig:ae,ReactCurrentOwner:L};function ue(){throw Error("act(...) is not supported in production builds of React.")}return Qr.Children={map:ie,forEach:function(ee,pe,me){ie(ee,function(){pe.apply(this,arguments)},me)},count:function(ee){var pe=0;return ie(ee,function(){pe++}),pe},toArray:function(ee){return ie(ee,function(pe){return pe})||[]},only:function(ee){if(!k(ee))throw Error("React.Children.only expected to receive a single React element child.");return ee}},Qr.Component=x,Qr.Fragment=t,Qr.Profiler=i,Qr.PureComponent=E,Qr.StrictMode=n,Qr.Suspense=l,Qr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ne,Qr.act=ue,Qr.cloneElement=function(ee,pe,me){if(ee==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+ee+".");var xe=y({},ee.props),Be=ee.key,Oe=ee.ref,dt=ee._owner;if(pe!=null){if(pe.ref!==void 0&&(Oe=pe.ref,dt=L.current),pe.key!==void 0&&(Be=""+pe.key),ee.type&&ee.type.defaultProps)var Ke=ee.type.defaultProps;for(_t in pe)A.call(pe,_t)&&!N.hasOwnProperty(_t)&&(xe[_t]=pe[_t]===void 0&&Ke!==void 0?Ke[_t]:pe[_t])}var _t=arguments.length-2;if(_t===1)xe.children=me;else if(1<_t){Ke=Array(_t);for(var Ze=0;Ze<_t;Ze++)Ke[Ze]=arguments[Ze+2];xe.children=Ke}return{$$typeof:r,type:ee.type,key:Be,ref:Oe,props:xe,_owner:dt}},Qr.createContext=function(ee){return ee={$$typeof:a,_currentValue:ee,_currentValue2:ee,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},ee.Provider={$$typeof:s,_context:ee},ee.Consumer=ee},Qr.createElement=U,Qr.createFactory=function(ee){var pe=U.bind(null,ee);return pe.type=ee,pe},Qr.createRef=function(){return{current:null}},Qr.forwardRef=function(ee){return{$$typeof:o,render:ee}},Qr.isValidElement=k,Qr.lazy=function(ee){return{$$typeof:c,_payload:{_status:-1,_result:ee},_init:le}},Qr.memo=function(ee,pe){return{$$typeof:u,type:ee,compare:pe===void 0?null:pe}},Qr.startTransition=function(ee){var pe=ae.transition;ae.transition={};try{ee()}finally{ae.transition=pe}},Qr.unstable_act=ue,Qr.useCallback=function(ee,pe){return he.current.useCallback(ee,pe)},Qr.useContext=function(ee){return he.current.useContext(ee)},Qr.useDebugValue=function(){},Qr.useDeferredValue=function(ee){return he.current.useDeferredValue(ee)},Qr.useEffect=function(ee,pe){return he.current.useEffect(ee,pe)},Qr.useId=function(){return he.current.useId()},Qr.useImperativeHandle=function(ee,pe,me){return he.current.useImperativeHandle(ee,pe,me)},Qr.useInsertionEffect=function(ee,pe){return he.current.useInsertionEffect(ee,pe)},Qr.useLayoutEffect=function(ee,pe){return he.current.useLayoutEffect(ee,pe)},Qr.useMemo=function(ee,pe){return he.current.useMemo(ee,pe)},Qr.useReducer=function(ee,pe,me){return he.current.useReducer(ee,pe,me)},Qr.useRef=function(ee){return he.current.useRef(ee)},Qr.useState=function(ee){return he.current.useState(ee)},Qr.useSyncExternalStore=function(ee,pe,me){return he.current.useSyncExternalStore(ee,pe,me)},Qr.useTransition=function(){return he.current.useTransition()},Qr.version="18.3.1",Qr}var gI;function BE(){return gI||(gI=1,PT.exports=G9()),PT.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vI;function K9(){if(vI)return Fm;vI=1;var r=BE(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),n=Object.prototype.hasOwnProperty,i=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function a(o,l,u){var c,h={},m=null,g=null;u!==void 0&&(m=""+u),l.key!==void 0&&(m=""+l.key),l.ref!==void 0&&(g=l.ref);for(c in l)n.call(l,c)&&!s.hasOwnProperty(c)&&(h[c]=l[c]);if(o&&o.defaultProps)for(c in l=o.defaultProps,l)h[c]===void 0&&(h[c]=l[c]);return{$$typeof:e,type:o,key:m,ref:g,props:h,_owner:i.current}}return Fm.Fragment=t,Fm.jsx=a,Fm.jsxs=a,Fm}var yI;function X9(){return yI||(yI=1,IT.exports=K9()),IT.exports}var F=X9(),M=BE();const Yr=ua(M),P_=W9({__proto__:null,default:Yr},[M]);var Bv={},RT={exports:{}},Ea={},LT={exports:{}},OT={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _I;function Y9(){return _I||(_I=1,(function(r){function e(ae,ne){var ue=ae.length;ae.push(ne);e:for(;0<ue;){var ee=ue-1>>>1,pe=ae[ee];if(0<i(pe,ne))ae[ee]=ne,ae[ue]=pe,ue=ee;else break e}}function t(ae){return ae.length===0?null:ae[0]}function n(ae){if(ae.length===0)return null;var ne=ae[0],ue=ae.pop();if(ue!==ne){ae[0]=ue;e:for(var ee=0,pe=ae.length,me=pe>>>1;ee<me;){var xe=2*(ee+1)-1,Be=ae[xe],Oe=xe+1,dt=ae[Oe];if(0>i(Be,ue))Oe<pe&&0>i(dt,Be)?(ae[ee]=dt,ae[Oe]=ue,ee=Oe):(ae[ee]=Be,ae[xe]=ue,ee=xe);else if(Oe<pe&&0>i(dt,ue))ae[ee]=dt,ae[Oe]=ue,ee=Oe;else break e}}return ne}function i(ae,ne){var ue=ae.sortIndex-ne.sortIndex;return ue!==0?ue:ae.id-ne.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;r.unstable_now=function(){return s.now()}}else{var a=Date,o=a.now();r.unstable_now=function(){return a.now()-o}}var l=[],u=[],c=1,h=null,m=3,g=!1,y=!1,v=!1,x=typeof setTimeout=="function"?setTimeout:null,w=typeof clearTimeout=="function"?clearTimeout:null,E=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function D(ae){for(var ne=t(u);ne!==null;){if(ne.callback===null)n(u);else if(ne.startTime<=ae)n(u),ne.sortIndex=ne.expirationTime,e(l,ne);else break;ne=t(u)}}function I(ae){if(v=!1,D(ae),!y)if(t(l)!==null)y=!0,le(A);else{var ne=t(u);ne!==null&&he(I,ne.startTime-ae)}}function A(ae,ne){y=!1,v&&(v=!1,w(U),U=-1),g=!0;var ue=m;try{for(D(ne),h=t(l);h!==null&&(!(h.expirationTime>ne)||ae&&!H());){var ee=h.callback;if(typeof ee=="function"){h.callback=null,m=h.priorityLevel;var pe=ee(h.expirationTime<=ne);ne=r.unstable_now(),typeof pe=="function"?h.callback=pe:h===t(l)&&n(l),D(ne)}else n(l);h=t(l)}if(h!==null)var me=!0;else{var xe=t(u);xe!==null&&he(I,xe.startTime-ne),me=!1}return me}finally{h=null,m=ue,g=!1}}var L=!1,N=null,U=-1,B=5,k=-1;function H(){return!(r.unstable_now()-k<B)}function q(){if(N!==null){var ae=r.unstable_now();k=ae;var ne=!0;try{ne=N(!0,ae)}finally{ne?V():(L=!1,N=null)}}else L=!1}var V;if(typeof E=="function")V=function(){E(q)};else if(typeof MessageChannel<"u"){var Q=new MessageChannel,ie=Q.port2;Q.port1.onmessage=q,V=function(){ie.postMessage(null)}}else V=function(){x(q,0)};function le(ae){N=ae,L||(L=!0,V())}function he(ae,ne){U=x(function(){ae(r.unstable_now())},ne)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(ae){ae.callback=null},r.unstable_continueExecution=function(){y||g||(y=!0,le(A))},r.unstable_forceFrameRate=function(ae){0>ae||125<ae?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):B=0<ae?Math.floor(1e3/ae):5},r.unstable_getCurrentPriorityLevel=function(){return m},r.unstable_getFirstCallbackNode=function(){return t(l)},r.unstable_next=function(ae){switch(m){case 1:case 2:case 3:var ne=3;break;default:ne=m}var ue=m;m=ne;try{return ae()}finally{m=ue}},r.unstable_pauseExecution=function(){},r.unstable_requestPaint=function(){},r.unstable_runWithPriority=function(ae,ne){switch(ae){case 1:case 2:case 3:case 4:case 5:break;default:ae=3}var ue=m;m=ae;try{return ne()}finally{m=ue}},r.unstable_scheduleCallback=function(ae,ne,ue){var ee=r.unstable_now();switch(typeof ue=="object"&&ue!==null?(ue=ue.delay,ue=typeof ue=="number"&&0<ue?ee+ue:ee):ue=ee,ae){case 1:var pe=-1;break;case 2:pe=250;break;case 5:pe=1073741823;break;case 4:pe=1e4;break;default:pe=5e3}return pe=ue+pe,ae={id:c++,callback:ne,priorityLevel:ae,startTime:ue,expirationTime:pe,sortIndex:-1},ue>ee?(ae.sortIndex=ue,e(u,ae),t(l)===null&&ae===t(u)&&(v?(w(U),U=-1):v=!0,he(I,ue-ee))):(ae.sortIndex=pe,e(l,ae),y||g||(y=!0,le(A))),ae},r.unstable_shouldYield=H,r.unstable_wrapCallback=function(ae){var ne=m;return function(){var ue=m;m=ne;try{return ae.apply(this,arguments)}finally{m=ue}}}})(OT)),OT}var xI;function Q9(){return xI||(xI=1,LT.exports=Y9()),LT.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bI;function J9(){if(bI)return Ea;bI=1;var r=BE(),e=Q9();function t(d){for(var p="https://reactjs.org/docs/error-decoder.html?invariant="+d,T=1;T<arguments.length;T++)p+="&args[]="+encodeURIComponent(arguments[T]);return"Minified React error #"+d+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var n=new Set,i={};function s(d,p){a(d,p),a(d+"Capture",p)}function a(d,p){for(i[d]=p,d=0;d<p.length;d++)n.add(p[d])}var o=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),l=Object.prototype.hasOwnProperty,u=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,c={},h={};function m(d){return l.call(h,d)?!0:l.call(c,d)?!1:u.test(d)?h[d]=!0:(c[d]=!0,!1)}function g(d,p,T,R){if(T!==null&&T.type===0)return!1;switch(typeof p){case"function":case"symbol":return!0;case"boolean":return R?!1:T!==null?!T.acceptsBooleans:(d=d.toLowerCase().slice(0,5),d!=="data-"&&d!=="aria-");default:return!1}}function y(d,p,T,R){if(p===null||typeof p>"u"||g(d,p,T,R))return!0;if(R)return!1;if(T!==null)switch(T.type){case 3:return!p;case 4:return p===!1;case 5:return isNaN(p);case 6:return isNaN(p)||1>p}return!1}function v(d,p,T,R,$,K,ce){this.acceptsBooleans=p===2||p===3||p===4,this.attributeName=R,this.attributeNamespace=$,this.mustUseProperty=T,this.propertyName=d,this.type=p,this.sanitizeURL=K,this.removeEmptyString=ce}var x={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(d){x[d]=new v(d,0,!1,d,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(d){var p=d[0];x[p]=new v(p,1,!1,d[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(d){x[d]=new v(d,2,!1,d.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(d){x[d]=new v(d,2,!1,d,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(d){x[d]=new v(d,3,!1,d.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(d){x[d]=new v(d,3,!0,d,null,!1,!1)}),["capture","download"].forEach(function(d){x[d]=new v(d,4,!1,d,null,!1,!1)}),["cols","rows","size","span"].forEach(function(d){x[d]=new v(d,6,!1,d,null,!1,!1)}),["rowSpan","start"].forEach(function(d){x[d]=new v(d,5,!1,d.toLowerCase(),null,!1,!1)});var w=/[\-:]([a-z])/g;function E(d){return d[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(d){var p=d.replace(w,E);x[p]=new v(p,1,!1,d,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(d){var p=d.replace(w,E);x[p]=new v(p,1,!1,d,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(d){var p=d.replace(w,E);x[p]=new v(p,1,!1,d,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(d){x[d]=new v(d,1,!1,d.toLowerCase(),null,!1,!1)}),x.xlinkHref=new v("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(d){x[d]=new v(d,1,!1,d.toLowerCase(),null,!0,!0)});function D(d,p,T,R){var $=x.hasOwnProperty(p)?x[p]:null;($!==null?$.type!==0:R||!(2<p.length)||p[0]!=="o"&&p[0]!=="O"||p[1]!=="n"&&p[1]!=="N")&&(y(p,T,$,R)&&(T=null),R||$===null?m(p)&&(T===null?d.removeAttribute(p):d.setAttribute(p,""+T)):$.mustUseProperty?d[$.propertyName]=T===null?$.type===3?!1:"":T:(p=$.attributeName,R=$.attributeNamespace,T===null?d.removeAttribute(p):($=$.type,T=$===3||$===4&&T===!0?"":""+T,R?d.setAttributeNS(R,p,T):d.setAttribute(p,T))))}var I=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,A=Symbol.for("react.element"),L=Symbol.for("react.portal"),N=Symbol.for("react.fragment"),U=Symbol.for("react.strict_mode"),B=Symbol.for("react.profiler"),k=Symbol.for("react.provider"),H=Symbol.for("react.context"),q=Symbol.for("react.forward_ref"),V=Symbol.for("react.suspense"),Q=Symbol.for("react.suspense_list"),ie=Symbol.for("react.memo"),le=Symbol.for("react.lazy"),he=Symbol.for("react.offscreen"),ae=Symbol.iterator;function ne(d){return d===null||typeof d!="object"?null:(d=ae&&d[ae]||d["@@iterator"],typeof d=="function"?d:null)}var ue=Object.assign,ee;function pe(d){if(ee===void 0)try{throw Error()}catch(T){var p=T.stack.trim().match(/\n( *(at )?)/);ee=p&&p[1]||""}return`
`+ee+d}var me=!1;function xe(d,p){if(!d||me)return"";me=!0;var T=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(p)if(p=function(){throw Error()},Object.defineProperty(p.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(p,[])}catch(Je){var R=Je}Reflect.construct(d,[],p)}else{try{p.call()}catch(Je){R=Je}d.call(p.prototype)}else{try{throw Error()}catch(Je){R=Je}d()}}catch(Je){if(Je&&R&&typeof Je.stack=="string"){for(var $=Je.stack.split(`
`),K=R.stack.split(`
`),ce=$.length-1,Ce=K.length-1;1<=ce&&0<=Ce&&$[ce]!==K[Ce];)Ce--;for(;1<=ce&&0<=Ce;ce--,Ce--)if($[ce]!==K[Ce]){if(ce!==1||Ce!==1)do if(ce--,Ce--,0>Ce||$[ce]!==K[Ce]){var Ie=`
`+$[ce].replace(" at new "," at ");return d.displayName&&Ie.includes("<anonymous>")&&(Ie=Ie.replace("<anonymous>",d.displayName)),Ie}while(1<=ce&&0<=Ce);break}}}finally{me=!1,Error.prepareStackTrace=T}return(d=d?d.displayName||d.name:"")?pe(d):""}function Be(d){switch(d.tag){case 5:return pe(d.type);case 16:return pe("Lazy");case 13:return pe("Suspense");case 19:return pe("SuspenseList");case 0:case 2:case 15:return d=xe(d.type,!1),d;case 11:return d=xe(d.type.render,!1),d;case 1:return d=xe(d.type,!0),d;default:return""}}function Oe(d){if(d==null)return null;if(typeof d=="function")return d.displayName||d.name||null;if(typeof d=="string")return d;switch(d){case N:return"Fragment";case L:return"Portal";case B:return"Profiler";case U:return"StrictMode";case V:return"Suspense";case Q:return"SuspenseList"}if(typeof d=="object")switch(d.$$typeof){case H:return(d.displayName||"Context")+".Consumer";case k:return(d._context.displayName||"Context")+".Provider";case q:var p=d.render;return d=d.displayName,d||(d=p.displayName||p.name||"",d=d!==""?"ForwardRef("+d+")":"ForwardRef"),d;case ie:return p=d.displayName||null,p!==null?p:Oe(d.type)||"Memo";case le:p=d._payload,d=d._init;try{return Oe(d(p))}catch{}}return null}function dt(d){var p=d.type;switch(d.tag){case 24:return"Cache";case 9:return(p.displayName||"Context")+".Consumer";case 10:return(p._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return d=p.render,d=d.displayName||d.name||"",p.displayName||(d!==""?"ForwardRef("+d+")":"ForwardRef");case 7:return"Fragment";case 5:return p;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Oe(p);case 8:return p===U?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof p=="function")return p.displayName||p.name||null;if(typeof p=="string")return p}return null}function Ke(d){switch(typeof d){case"boolean":case"number":case"string":case"undefined":return d;case"object":return d;default:return""}}function _t(d){var p=d.type;return(d=d.nodeName)&&d.toLowerCase()==="input"&&(p==="checkbox"||p==="radio")}function Ze(d){var p=_t(d)?"checked":"value",T=Object.getOwnPropertyDescriptor(d.constructor.prototype,p),R=""+d[p];if(!d.hasOwnProperty(p)&&typeof T<"u"&&typeof T.get=="function"&&typeof T.set=="function"){var $=T.get,K=T.set;return Object.defineProperty(d,p,{configurable:!0,get:function(){return $.call(this)},set:function(ce){R=""+ce,K.call(this,ce)}}),Object.defineProperty(d,p,{enumerable:T.enumerable}),{getValue:function(){return R},setValue:function(ce){R=""+ce},stopTracking:function(){d._valueTracker=null,delete d[p]}}}}function Ot(d){d._valueTracker||(d._valueTracker=Ze(d))}function Nt(d){if(!d)return!1;var p=d._valueTracker;if(!p)return!0;var T=p.getValue(),R="";return d&&(R=_t(d)?d.checked?"true":"false":d.value),d=R,d!==T?(p.setValue(d),!0):!1}function qe(d){if(d=d||(typeof document<"u"?document:void 0),typeof d>"u")return null;try{return d.activeElement||d.body}catch{return d.body}}function Ue(d,p){var T=p.checked;return ue({},p,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:T??d._wrapperState.initialChecked})}function Pe(d,p){var T=p.defaultValue==null?"":p.defaultValue,R=p.checked!=null?p.checked:p.defaultChecked;T=Ke(p.value!=null?p.value:T),d._wrapperState={initialChecked:R,initialValue:T,controlled:p.type==="checkbox"||p.type==="radio"?p.checked!=null:p.value!=null}}function $e(d,p){p=p.checked,p!=null&&D(d,"checked",p,!1)}function rt(d,p){$e(d,p);var T=Ke(p.value),R=p.type;if(T!=null)R==="number"?(T===0&&d.value===""||d.value!=T)&&(d.value=""+T):d.value!==""+T&&(d.value=""+T);else if(R==="submit"||R==="reset"){d.removeAttribute("value");return}p.hasOwnProperty("value")?ht(d,p.type,T):p.hasOwnProperty("defaultValue")&&ht(d,p.type,Ke(p.defaultValue)),p.checked==null&&p.defaultChecked!=null&&(d.defaultChecked=!!p.defaultChecked)}function lt(d,p,T){if(p.hasOwnProperty("value")||p.hasOwnProperty("defaultValue")){var R=p.type;if(!(R!=="submit"&&R!=="reset"||p.value!==void 0&&p.value!==null))return;p=""+d._wrapperState.initialValue,T||p===d.value||(d.value=p),d.defaultValue=p}T=d.name,T!==""&&(d.name=""),d.defaultChecked=!!d._wrapperState.initialChecked,T!==""&&(d.name=T)}function ht(d,p,T){(p!=="number"||qe(d.ownerDocument)!==d)&&(T==null?d.defaultValue=""+d._wrapperState.initialValue:d.defaultValue!==""+T&&(d.defaultValue=""+T))}var ut=Array.isArray;function St(d,p,T,R){if(d=d.options,p){p={};for(var $=0;$<T.length;$++)p["$"+T[$]]=!0;for(T=0;T<d.length;T++)$=p.hasOwnProperty("$"+d[T].value),d[T].selected!==$&&(d[T].selected=$),$&&R&&(d[T].defaultSelected=!0)}else{for(T=""+Ke(T),p=null,$=0;$<d.length;$++){if(d[$].value===T){d[$].selected=!0,R&&(d[$].defaultSelected=!0);return}p!==null||d[$].disabled||(p=d[$])}p!==null&&(p.selected=!0)}}function ot(d,p){if(p.dangerouslySetInnerHTML!=null)throw Error(t(91));return ue({},p,{value:void 0,defaultValue:void 0,children:""+d._wrapperState.initialValue})}function yr(d,p){var T=p.value;if(T==null){if(T=p.children,p=p.defaultValue,T!=null){if(p!=null)throw Error(t(92));if(ut(T)){if(1<T.length)throw Error(t(93));T=T[0]}p=T}p==null&&(p=""),T=p}d._wrapperState={initialValue:Ke(T)}}function pr(d,p){var T=Ke(p.value),R=Ke(p.defaultValue);T!=null&&(T=""+T,T!==d.value&&(d.value=T),p.defaultValue==null&&d.defaultValue!==T&&(d.defaultValue=T)),R!=null&&(d.defaultValue=""+R)}function jr(d){var p=d.textContent;p===d._wrapperState.initialValue&&p!==""&&p!==null&&(d.value=p)}function ur(d){switch(d){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Wt(d,p){return d==null||d==="http://www.w3.org/1999/xhtml"?ur(p):d==="http://www.w3.org/2000/svg"&&p==="foreignObject"?"http://www.w3.org/1999/xhtml":d}var mr,Tr=(function(d){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(p,T,R,$){MSApp.execUnsafeLocalFunction(function(){return d(p,T,R,$)})}:d})(function(d,p){if(d.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in d)d.innerHTML=p;else{for(mr=mr||document.createElement("div"),mr.innerHTML="<svg>"+p.valueOf().toString()+"</svg>",p=mr.firstChild;d.firstChild;)d.removeChild(d.firstChild);for(;p.firstChild;)d.appendChild(p.firstChild)}});function Nr(d,p){if(p){var T=d.firstChild;if(T&&T===d.lastChild&&T.nodeType===3){T.nodeValue=p;return}}d.textContent=p}var Tt={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Ht=["Webkit","ms","Moz","O"];Object.keys(Tt).forEach(function(d){Ht.forEach(function(p){p=p+d.charAt(0).toUpperCase()+d.substring(1),Tt[p]=Tt[d]})});function An(d,p,T){return p==null||typeof p=="boolean"||p===""?"":T||typeof p!="number"||p===0||Tt.hasOwnProperty(d)&&Tt[d]?(""+p).trim():p+"px"}function Vt(d,p){d=d.style;for(var T in p)if(p.hasOwnProperty(T)){var R=T.indexOf("--")===0,$=An(T,p[T],R);T==="float"&&(T="cssFloat"),R?d.setProperty(T,$):d[T]=$}}var Cr=ue({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ur(d,p){if(p){if(Cr[d]&&(p.children!=null||p.dangerouslySetInnerHTML!=null))throw Error(t(137,d));if(p.dangerouslySetInnerHTML!=null){if(p.children!=null)throw Error(t(60));if(typeof p.dangerouslySetInnerHTML!="object"||!("__html"in p.dangerouslySetInnerHTML))throw Error(t(61))}if(p.style!=null&&typeof p.style!="object")throw Error(t(62))}}function qr(d,p){if(d.indexOf("-")===-1)return typeof p.is=="string";switch(d){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var En=null;function Dn(d){return d=d.target||d.srcElement||window,d.correspondingUseElement&&(d=d.correspondingUseElement),d.nodeType===3?d.parentNode:d}var In=null,Mr=null,se=null;function fe(d){if(d=mi(d)){if(typeof In!="function")throw Error(t(280));var p=d.stateNode;p&&(p=Kl(p),In(d.stateNode,d.type,p))}}function Te(d){Mr?se?se.push(d):se=[d]:Mr=d}function je(){if(Mr){var d=Mr,p=se;if(se=Mr=null,fe(d),p)for(d=0;d<p.length;d++)fe(p[d])}}function pt(d,p){return d(p)}function Gt(){}var be=!1;function ye(d,p,T){if(be)return d(p,T);be=!0;try{return pt(d,p,T)}finally{be=!1,(Mr!==null||se!==null)&&(Gt(),je())}}function Ae(d,p){var T=d.stateNode;if(T===null)return null;var R=Kl(T);if(R===null)return null;T=R[p];e:switch(p){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(R=!R.disabled)||(d=d.type,R=!(d==="button"||d==="input"||d==="select"||d==="textarea")),d=!R;break e;default:d=!1}if(d)return null;if(T&&typeof T!="function")throw Error(t(231,p,typeof T));return T}var Ge=!1;if(o)try{var Xe={};Object.defineProperty(Xe,"passive",{get:function(){Ge=!0}}),window.addEventListener("test",Xe,Xe),window.removeEventListener("test",Xe,Xe)}catch{Ge=!1}function yt(d,p,T,R,$,K,ce,Ce,Ie){var Je=Array.prototype.slice.call(arguments,3);try{p.apply(T,Je)}catch(kt){this.onError(kt)}}var At=!1,st=null,gt=!1,jt=null,Kt={onError:function(d){At=!0,st=d}};function Ft(d,p,T,R,$,K,ce,Ce,Ie){At=!1,st=null,yt.apply(Kt,arguments)}function dr(d,p,T,R,$,K,ce,Ce,Ie){if(Ft.apply(this,arguments),At){if(At){var Je=st;At=!1,st=null}else throw Error(t(198));gt||(gt=!0,jt=Je)}}function xt(d){var p=d,T=d;if(d.alternate)for(;p.return;)p=p.return;else{d=p;do p=d,(p.flags&4098)!==0&&(T=p.return),d=p.return;while(d)}return p.tag===3?T:null}function fr(d){if(d.tag===13){var p=d.memoizedState;if(p===null&&(d=d.alternate,d!==null&&(p=d.memoizedState)),p!==null)return p.dehydrated}return null}function Jr(d){if(xt(d)!==d)throw Error(t(188))}function Pr(d){var p=d.alternate;if(!p){if(p=xt(d),p===null)throw Error(t(188));return p!==d?null:d}for(var T=d,R=p;;){var $=T.return;if($===null)break;var K=$.alternate;if(K===null){if(R=$.return,R!==null){T=R;continue}break}if($.child===K.child){for(K=$.child;K;){if(K===T)return Jr($),d;if(K===R)return Jr($),p;K=K.sibling}throw Error(t(188))}if(T.return!==R.return)T=$,R=K;else{for(var ce=!1,Ce=$.child;Ce;){if(Ce===T){ce=!0,T=$,R=K;break}if(Ce===R){ce=!0,R=$,T=K;break}Ce=Ce.sibling}if(!ce){for(Ce=K.child;Ce;){if(Ce===T){ce=!0,T=K,R=$;break}if(Ce===R){ce=!0,R=K,T=$;break}Ce=Ce.sibling}if(!ce)throw Error(t(189))}}if(T.alternate!==R)throw Error(t(190))}if(T.tag!==3)throw Error(t(188));return T.stateNode.current===T?d:p}function Fr(d){return d=Pr(d),d!==null?Pn(d):null}function Pn(d){if(d.tag===5||d.tag===6)return d;for(d=d.child;d!==null;){var p=Pn(d);if(p!==null)return p;d=d.sibling}return null}var er=e.unstable_scheduleCallback,bi=e.unstable_cancelCallback,mn=e.unstable_shouldYield,Ss=e.unstable_requestPaint,tn=e.unstable_now,Ts=e.unstable_getCurrentPriorityLevel,di=e.unstable_ImmediatePriority,ii=e.unstable_UserBlockingPriority,Dr=e.unstable_NormalPriority,ke=e.unstable_LowPriority,Ne=e.unstable_IdlePriority,Qe=null,et=null;function vt(d){if(et&&typeof et.onCommitFiberRoot=="function")try{et.onCommitFiberRoot(Qe,d,void 0,(d.current.flags&128)===128)}catch{}}var wt=Math.clz32?Math.clz32:zr,Mt=Math.log,_r=Math.LN2;function zr(d){return d>>>=0,d===0?32:31-(Mt(d)/_r|0)|0}var gn=64,wr=4194304;function hi(d){switch(d&-d){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return d&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return d&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return d}}function Br(d,p){var T=d.pendingLanes;if(T===0)return 0;var R=0,$=d.suspendedLanes,K=d.pingedLanes,ce=T&268435455;if(ce!==0){var Ce=ce&~$;Ce!==0?R=hi(Ce):(K&=ce,K!==0&&(R=hi(K)))}else ce=T&~$,ce!==0?R=hi(ce):K!==0&&(R=hi(K));if(R===0)return 0;if(p!==0&&p!==R&&(p&$)===0&&($=R&-R,K=p&-p,$>=K||$===16&&(K&4194240)!==0))return p;if((R&4)!==0&&(R|=T&16),p=d.entangledLanes,p!==0)for(d=d.entanglements,p&=R;0<p;)T=31-wt(p),$=1<<T,R|=d[T],p&=~$;return R}function On(d,p){switch(d){case 1:case 2:case 4:return p+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return p+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function $n(d,p){for(var T=d.suspendedLanes,R=d.pingedLanes,$=d.expirationTimes,K=d.pendingLanes;0<K;){var ce=31-wt(K),Ce=1<<ce,Ie=$[ce];Ie===-1?((Ce&T)===0||(Ce&R)!==0)&&($[ce]=On(Ce,p)):Ie<=p&&(d.expiredLanes|=Ce),K&=~Ce}}function Cs(d){return d=d.pendingLanes&-1073741825,d!==0?d:d&1073741824?1073741824:0}function Pc(){var d=gn;return gn<<=1,(gn&4194240)===0&&(gn=64),d}function ws(d){for(var p=[],T=0;31>T;T++)p.push(d);return p}function Ui(d,p,T){d.pendingLanes|=p,p!==536870912&&(d.suspendedLanes=0,d.pingedLanes=0),d=d.eventTimes,p=31-wt(p),d[p]=T}function Rn(d,p){var T=d.pendingLanes&~p;d.pendingLanes=p,d.suspendedLanes=0,d.pingedLanes=0,d.expiredLanes&=p,d.mutableReadLanes&=p,d.entangledLanes&=p,p=d.entanglements;var R=d.eventTimes;for(d=d.expirationTimes;0<T;){var $=31-wt(T),K=1<<$;p[$]=0,R[$]=-1,d[$]=-1,T&=~K}}function Fu(d,p){var T=d.entangledLanes|=p;for(d=d.entanglements;T;){var R=31-wt(T),$=1<<R;$&p|d[R]&p&&(d[R]|=p),T&=~$}}var Hr=0;function as(d){return d&=-d,1<d?4<d?(d&268435455)!==0?16:536870912:4:1}var da,Ai,ja,Ll,_o,Bu=!1,Ol=[],ha=null,Si=null,Di=null,fa=new Map,za=new Map,pa=[],Ml="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Rc(d,p){switch(d){case"focusin":case"focusout":ha=null;break;case"dragenter":case"dragleave":Si=null;break;case"mouseover":case"mouseout":Di=null;break;case"pointerover":case"pointerout":fa.delete(p.pointerId);break;case"gotpointercapture":case"lostpointercapture":za.delete(p.pointerId)}}function $i(d,p,T,R,$,K){return d===null||d.nativeEvent!==K?(d={blockedOn:p,domEventName:T,eventSystemFlags:R,nativeEvent:K,targetContainers:[$]},p!==null&&(p=mi(p),p!==null&&Ai(p)),d):(d.eventSystemFlags|=R,p=d.targetContainers,$!==null&&p.indexOf($)===-1&&p.push($),d)}function Ha(d,p,T,R,$){switch(p){case"focusin":return ha=$i(ha,d,p,T,R,$),!0;case"dragenter":return Si=$i(Si,d,p,T,R,$),!0;case"mouseover":return Di=$i(Di,d,p,T,R,$),!0;case"pointerover":var K=$.pointerId;return fa.set(K,$i(fa.get(K)||null,d,p,T,R,$)),!0;case"gotpointercapture":return K=$.pointerId,za.set(K,$i(za.get(K)||null,d,p,T,R,$)),!0}return!1}function Fl(d){var p=dn(d.target);if(p!==null){var T=xt(p);if(T!==null){if(p=T.tag,p===13){if(p=fr(T),p!==null){d.blockedOn=p,_o(d.priority,function(){ja(T)});return}}else if(p===3&&T.stateNode.current.memoizedState.isDehydrated){d.blockedOn=T.tag===3?T.stateNode.containerInfo:null;return}}}d.blockedOn=null}function Bl(d){if(d.blockedOn!==null)return!1;for(var p=d.targetContainers;0<p.length;){var T=Uu(d.domEventName,d.eventSystemFlags,p[0],d.nativeEvent);if(T===null){T=d.nativeEvent;var R=new T.constructor(T.type,T);En=R,T.target.dispatchEvent(R),En=null}else return p=mi(T),p!==null&&Ai(p),d.blockedOn=T,!1;p.shift()}return!0}function rl(d,p,T){Bl(d)&&T.delete(p)}function Va(){Bu=!1,ha!==null&&Bl(ha)&&(ha=null),Si!==null&&Bl(Si)&&(Si=null),Di!==null&&Bl(Di)&&(Di=null),fa.forEach(rl),za.forEach(rl)}function Es(d,p){d.blockedOn===p&&(d.blockedOn=null,Bu||(Bu=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Va)))}function os(d){function p($){return Es($,d)}if(0<Ol.length){Es(Ol[0],d);for(var T=1;T<Ol.length;T++){var R=Ol[T];R.blockedOn===d&&(R.blockedOn=null)}}for(ha!==null&&Es(ha,d),Si!==null&&Es(Si,d),Di!==null&&Es(Di,d),fa.forEach(p),za.forEach(p),T=0;T<pa.length;T++)R=pa[T],R.blockedOn===d&&(R.blockedOn=null);for(;0<pa.length&&(T=pa[0],T.blockedOn===null);)Fl(T),T.blockedOn===null&&pa.shift()}var ma=I.ReactCurrentBatchConfig,nl=!0;function Lc(d,p,T,R){var $=Hr,K=ma.transition;ma.transition=null;try{Hr=1,Nu(d,p,T,R)}finally{Hr=$,ma.transition=K}}function Oc(d,p,T,R){var $=Hr,K=ma.transition;ma.transition=null;try{Hr=4,Nu(d,p,T,R)}finally{Hr=$,ma.transition=K}}function Nu(d,p,T,R){if(nl){var $=Uu(d,p,T,R);if($===null)Hn(d,p,R,Nl,T),Rc(d,R);else if(Ha($,d,p,T,R))R.stopPropagation();else if(Rc(d,R),p&4&&-1<Ml.indexOf(d)){for(;$!==null;){var K=mi($);if(K!==null&&da(K),K=Uu(d,p,T,R),K===null&&Hn(d,p,R,Nl,T),K===$)break;$=K}$!==null&&R.stopPropagation()}else Hn(d,p,R,null,T)}}var Nl=null;function Uu(d,p,T,R){if(Nl=null,d=Dn(R),d=dn(d),d!==null)if(p=xt(d),p===null)d=null;else if(T=p.tag,T===13){if(d=fr(p),d!==null)return d;d=null}else if(T===3){if(p.stateNode.current.memoizedState.isDehydrated)return p.tag===3?p.stateNode.containerInfo:null;d=null}else p!==d&&(d=null);return Nl=d,null}function zs(d){switch(d){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Ts()){case di:return 1;case ii:return 4;case Dr:case ke:return 16;case Ne:return 536870912;default:return 16}default:return 16}}var ga=null,ls=null,ks=null;function Mc(){if(ks)return ks;var d,p=ls,T=p.length,R,$="value"in ga?ga.value:ga.textContent,K=$.length;for(d=0;d<T&&p[d]===$[d];d++);var ce=T-d;for(R=1;R<=ce&&p[T-R]===$[K-R];R++);return ks=$.slice(d,1<R?1-R:void 0)}function an(d){var p=d.keyCode;return"charCode"in d?(d=d.charCode,d===0&&p===13&&(d=13)):d=p,d===10&&(d=13),32<=d||d===13?d:0}function Ul(){return!0}function Fc(){return!1}function Ii(d){function p(T,R,$,K,ce){this._reactName=T,this._targetInst=$,this.type=R,this.nativeEvent=K,this.target=ce,this.currentTarget=null;for(var Ce in d)d.hasOwnProperty(Ce)&&(T=d[Ce],this[Ce]=T?T(K):K[Ce]);return this.isDefaultPrevented=(K.defaultPrevented!=null?K.defaultPrevented:K.returnValue===!1)?Ul:Fc,this.isPropagationStopped=Fc,this}return ue(p.prototype,{preventDefault:function(){this.defaultPrevented=!0;var T=this.nativeEvent;T&&(T.preventDefault?T.preventDefault():typeof T.returnValue!="unknown"&&(T.returnValue=!1),this.isDefaultPrevented=Ul)},stopPropagation:function(){var T=this.nativeEvent;T&&(T.stopPropagation?T.stopPropagation():typeof T.cancelBubble!="unknown"&&(T.cancelBubble=!0),this.isPropagationStopped=Ul)},persist:function(){},isPersistent:Ul}),p}var Pi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(d){return d.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},us=Ii(Pi),Ti=ue({},Pi,{view:0,detail:0}),Wa=Ii(Ti),Sn,zn,ji,qa=ue({},Ti,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:$l,button:0,buttons:0,relatedTarget:function(d){return d.relatedTarget===void 0?d.fromElement===d.srcElement?d.toElement:d.fromElement:d.relatedTarget},movementX:function(d){return"movementX"in d?d.movementX:(d!==ji&&(ji&&d.type==="mousemove"?(Sn=d.screenX-ji.screenX,zn=d.screenY-ji.screenY):zn=Sn=0,ji=d),Sn)},movementY:function(d){return"movementY"in d?d.movementY:zn}}),xo=Ii(qa),il=ue({},qa,{dataTransfer:0}),$d=Ii(il),jd=ue({},Ti,{relatedTarget:0}),sl=Ii(jd),$u=ue({},Pi,{animationName:0,elapsedTime:0,pseudoElement:0}),Ga=Ii($u),Hs=ue({},Pi,{clipboardData:function(d){return"clipboardData"in d?d.clipboardData:window.clipboardData}}),Ka=Ii(Hs),Ri=ue({},Pi,{data:0}),Bc=Ii(Ri),bo={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Xa={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ju={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Nc(d){var p=this.nativeEvent;return p.getModifierState?p.getModifierState(d):(d=ju[d])?!!p[d]:!1}function $l(){return Nc}var Uc=ue({},Ti,{key:function(d){if(d.key){var p=bo[d.key]||d.key;if(p!=="Unidentified")return p}return d.type==="keypress"?(d=an(d),d===13?"Enter":String.fromCharCode(d)):d.type==="keydown"||d.type==="keyup"?Xa[d.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:$l,charCode:function(d){return d.type==="keypress"?an(d):0},keyCode:function(d){return d.type==="keydown"||d.type==="keyup"?d.keyCode:0},which:function(d){return d.type==="keypress"?an(d):d.type==="keydown"||d.type==="keyup"?d.keyCode:0}}),va=Ii(Uc),$c=ue({},qa,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),So=Ii($c),jc=ue({},Ti,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:$l}),zc=Ii(jc),To=ue({},Pi,{propertyName:0,elapsedTime:0,pseudoElement:0}),Co=Ii(To),zd=ue({},qa,{deltaX:function(d){return"deltaX"in d?d.deltaX:"wheelDeltaX"in d?-d.wheelDeltaX:0},deltaY:function(d){return"deltaY"in d?d.deltaY:"wheelDeltaY"in d?-d.wheelDeltaY:"wheelDelta"in d?-d.wheelDelta:0},deltaZ:0,deltaMode:0}),Hd=Ii(zd),Vd=[9,13,27,32],al=o&&"CompositionEvent"in window,ol=null;o&&"documentMode"in document&&(ol=document.documentMode);var zu=o&&"TextEvent"in window&&!ol,jl=o&&(!al||ol&&8<ol&&11>=ol),Hc=" ",Vs=!1;function rn(d,p){switch(d){case"keyup":return Vd.indexOf(p.keyCode)!==-1;case"keydown":return p.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function As(d){return d=d.detail,typeof d=="object"&&"data"in d?d.data:null}var on=!1;function zi(d,p){switch(d){case"compositionend":return As(p);case"keypress":return p.which!==32?null:(Vs=!0,Hc);case"textInput":return d=p.data,d===Hc&&Vs?null:d;default:return null}}function Wd(d,p){if(on)return d==="compositionend"||!al&&rn(d,p)?(d=Mc(),ks=ls=ga=null,on=!1,d):null;switch(d){case"paste":return null;case"keypress":if(!(p.ctrlKey||p.altKey||p.metaKey)||p.ctrlKey&&p.altKey){if(p.char&&1<p.char.length)return p.char;if(p.which)return String.fromCharCode(p.which)}return null;case"compositionend":return jl&&p.locale!=="ko"?null:p.data;default:return null}}var Vc={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ds(d){var p=d&&d.nodeName&&d.nodeName.toLowerCase();return p==="input"?!!Vc[d.type]:p==="textarea"}function Wc(d,p,T,R){Te(R),p=ql(p,"onChange"),0<p.length&&(T=new us("onChange","change",null,T,R),d.push({event:T,listeners:p}))}var ll=null,ul=null;function Hu(d){sf(d,0)}function zl(d){var p=Ao(d);if(Nt(p))return d}function qd(d,p){if(d==="change")return p}var Vu=!1;if(o){var oe;if(o){var O="oninput"in document;if(!O){var z=document.createElement("div");z.setAttribute("oninput","return;"),O=typeof z.oninput=="function"}oe=O}else oe=!1;Vu=oe&&(!document.documentMode||9<document.documentMode)}function j(){ll&&(ll.detachEvent("onpropertychange",W),ul=ll=null)}function W(d){if(d.propertyName==="value"&&zl(ul)){var p=[];Wc(p,ul,d,Dn(d)),ye(Hu,p)}}function Z(d,p,T){d==="focusin"?(j(),ll=p,ul=T,ll.attachEvent("onpropertychange",W)):d==="focusout"&&j()}function te(d){if(d==="selectionchange"||d==="keyup"||d==="keydown")return zl(ul)}function ge(d,p){if(d==="click")return zl(p)}function _e(d,p){if(d==="input"||d==="change")return zl(p)}function De(d,p){return d===p&&(d!==0||1/d===1/p)||d!==d&&p!==p}var we=typeof Object.is=="function"?Object.is:De;function Re(d,p){if(we(d,p))return!0;if(typeof d!="object"||d===null||typeof p!="object"||p===null)return!1;var T=Object.keys(d),R=Object.keys(p);if(T.length!==R.length)return!1;for(R=0;R<T.length;R++){var $=T[R];if(!l.call(p,$)||!we(d[$],p[$]))return!1}return!0}function nt(d){for(;d&&d.firstChild;)d=d.firstChild;return d}function Pt(d,p){var T=nt(d);d=0;for(var R;T;){if(T.nodeType===3){if(R=d+T.textContent.length,d<=p&&R>=p)return{node:T,offset:p-d};d=R}e:{for(;T;){if(T.nextSibling){T=T.nextSibling;break e}T=T.parentNode}T=void 0}T=nt(T)}}function Ut(d,p){return d&&p?d===p?!0:d&&d.nodeType===3?!1:p&&p.nodeType===3?Ut(d,p.parentNode):"contains"in d?d.contains(p):d.compareDocumentPosition?!!(d.compareDocumentPosition(p)&16):!1:!1}function tt(){for(var d=window,p=qe();p instanceof d.HTMLIFrameElement;){try{var T=typeof p.contentWindow.location.href=="string"}catch{T=!1}if(T)d=p.contentWindow;else break;p=qe(d.document)}return p}function sr(d){var p=d&&d.nodeName&&d.nodeName.toLowerCase();return p&&(p==="input"&&(d.type==="text"||d.type==="search"||d.type==="tel"||d.type==="url"||d.type==="password")||p==="textarea"||d.contentEditable==="true")}function kn(d){var p=tt(),T=d.focusedElem,R=d.selectionRange;if(p!==T&&T&&T.ownerDocument&&Ut(T.ownerDocument.documentElement,T)){if(R!==null&&sr(T)){if(p=R.start,d=R.end,d===void 0&&(d=p),"selectionStart"in T)T.selectionStart=p,T.selectionEnd=Math.min(d,T.value.length);else if(d=(p=T.ownerDocument||document)&&p.defaultView||window,d.getSelection){d=d.getSelection();var $=T.textContent.length,K=Math.min(R.start,$);R=R.end===void 0?K:Math.min(R.end,$),!d.extend&&K>R&&($=R,R=K,K=$),$=Pt(T,K);var ce=Pt(T,R);$&&ce&&(d.rangeCount!==1||d.anchorNode!==$.node||d.anchorOffset!==$.offset||d.focusNode!==ce.node||d.focusOffset!==ce.offset)&&(p=p.createRange(),p.setStart($.node,$.offset),d.removeAllRanges(),K>R?(d.addRange(p),d.extend(ce.node,ce.offset)):(p.setEnd(ce.node,ce.offset),d.addRange(p)))}}for(p=[],d=T;d=d.parentNode;)d.nodeType===1&&p.push({element:d,left:d.scrollLeft,top:d.scrollTop});for(typeof T.focus=="function"&&T.focus(),T=0;T<p.length;T++)d=p[T],d.element.scrollLeft=d.left,d.element.scrollTop=d.top}}var fi=o&&"documentMode"in document&&11>=document.documentMode,Hi=null,cl=null,wo=null,Eo=!1;function dl(d,p,T){var R=T.window===T?T.document:T.nodeType===9?T:T.ownerDocument;Eo||Hi==null||Hi!==qe(R)||(R=Hi,"selectionStart"in R&&sr(R)?R={start:R.selectionStart,end:R.selectionEnd}:(R=(R.ownerDocument&&R.ownerDocument.defaultView||window).getSelection(),R={anchorNode:R.anchorNode,anchorOffset:R.anchorOffset,focusNode:R.focusNode,focusOffset:R.focusOffset}),wo&&Re(wo,R)||(wo=R,R=ql(cl,"onSelect"),0<R.length&&(p=new us("onSelect","select",null,p,T),d.push({event:p,listeners:R}),p.target=Hi)))}function ya(d,p){var T={};return T[d.toLowerCase()]=p.toLowerCase(),T["Webkit"+d]="webkit"+p,T["Moz"+d]="moz"+p,T}var Ws={animationend:ya("Animation","AnimationEnd"),animationiteration:ya("Animation","AnimationIteration"),animationstart:ya("Animation","AnimationStart"),transitionend:ya("Transition","TransitionEnd")},vn={},Ya={};o&&(Ya=document.createElement("div").style,"AnimationEvent"in window||(delete Ws.animationend.animation,delete Ws.animationiteration.animation,delete Ws.animationstart.animation),"TransitionEvent"in window||delete Ws.transitionend.transition);function Vi(d){if(vn[d])return vn[d];if(!Ws[d])return d;var p=Ws[d],T;for(T in p)if(p.hasOwnProperty(T)&&T in Ya)return vn[d]=p[T];return d}var Hl=Vi("animationend"),rf=Vi("animationiteration"),Vl=Vi("animationstart"),Wl=Vi("transitionend"),qc=new Map,ko="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Wi(d,p){qc.set(d,p),s(p,[d])}for(var Gd=0;Gd<ko.length;Gd++){var Kd=ko[Gd],ym=Kd.toLowerCase(),_m=Kd[0].toUpperCase()+Kd.slice(1);Wi(ym,"on"+_m)}Wi(Hl,"onAnimationEnd"),Wi(rf,"onAnimationIteration"),Wi(Vl,"onAnimationStart"),Wi("dblclick","onDoubleClick"),Wi("focusin","onFocus"),Wi("focusout","onBlur"),Wi(Wl,"onTransitionEnd"),a("onMouseEnter",["mouseout","mouseover"]),a("onMouseLeave",["mouseout","mouseover"]),a("onPointerEnter",["pointerout","pointerover"]),a("onPointerLeave",["pointerout","pointerover"]),s("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),s("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),s("onBeforeInput",["compositionend","keypress","textInput","paste"]),s("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Wu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),qu=new Set("cancel close invalid load scroll toggle".split(" ").concat(Wu));function nf(d,p,T){var R=d.type||"unknown-event";d.currentTarget=T,dr(R,p,void 0,d),d.currentTarget=null}function sf(d,p){p=(p&4)!==0;for(var T=0;T<d.length;T++){var R=d[T],$=R.event;R=R.listeners;e:{var K=void 0;if(p)for(var ce=R.length-1;0<=ce;ce--){var Ce=R[ce],Ie=Ce.instance,Je=Ce.currentTarget;if(Ce=Ce.listener,Ie!==K&&$.isPropagationStopped())break e;nf($,Ce,Je),K=Ie}else for(ce=0;ce<R.length;ce++){if(Ce=R[ce],Ie=Ce.instance,Je=Ce.currentTarget,Ce=Ce.listener,Ie!==K&&$.isPropagationStopped())break e;nf($,Ce,Je),K=Ie}}}if(gt)throw d=jt,gt=!1,jt=null,d}function yn(d,p){var T=p[bt];T===void 0&&(T=p[bt]=new Set);var R=d+"__bubble";T.has(R)||(ln(p,d,2,!1),T.add(R))}function cs(d,p,T){var R=0;p&&(R|=4),ln(T,d,R,p)}var ar="_reactListening"+Math.random().toString(36).slice(2);function pi(d){if(!d[ar]){d[ar]=!0,n.forEach(function(T){T!=="selectionchange"&&(qu.has(T)||cs(T,!1,d),cs(T,!0,d))});var p=d.nodeType===9?d:d.ownerDocument;p===null||p[ar]||(p[ar]=!0,cs("selectionchange",!1,p))}}function ln(d,p,T,R){switch(zs(p)){case 1:var $=Lc;break;case 4:$=Oc;break;default:$=Nu}T=$.bind(null,p,T,d),$=void 0,!Ge||p!=="touchstart"&&p!=="touchmove"&&p!=="wheel"||($=!0),R?$!==void 0?d.addEventListener(p,T,{capture:!0,passive:$}):d.addEventListener(p,T,!0):$!==void 0?d.addEventListener(p,T,{passive:$}):d.addEventListener(p,T,!1)}function Hn(d,p,T,R,$){var K=R;if((p&1)===0&&(p&2)===0&&R!==null)e:for(;;){if(R===null)return;var ce=R.tag;if(ce===3||ce===4){var Ce=R.stateNode.containerInfo;if(Ce===$||Ce.nodeType===8&&Ce.parentNode===$)break;if(ce===4)for(ce=R.return;ce!==null;){var Ie=ce.tag;if((Ie===3||Ie===4)&&(Ie=ce.stateNode.containerInfo,Ie===$||Ie.nodeType===8&&Ie.parentNode===$))return;ce=ce.return}for(;Ce!==null;){if(ce=dn(Ce),ce===null)return;if(Ie=ce.tag,Ie===5||Ie===6){R=K=ce;continue e}Ce=Ce.parentNode}}R=R.return}ye(function(){var Je=K,kt=Dn(T),Rt=[];e:{var Et=qc.get(d);if(Et!==void 0){var Xt=us,or=d;switch(d){case"keypress":if(an(T)===0)break e;case"keydown":case"keyup":Xt=va;break;case"focusin":or="focus",Xt=sl;break;case"focusout":or="blur",Xt=sl;break;case"beforeblur":case"afterblur":Xt=sl;break;case"click":if(T.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Xt=xo;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Xt=$d;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Xt=zc;break;case Hl:case rf:case Vl:Xt=Ga;break;case Wl:Xt=Co;break;case"scroll":Xt=Wa;break;case"wheel":Xt=Hd;break;case"copy":case"cut":case"paste":Xt=Ka;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Xt=So}var lr=(p&4)!==0,gi=!lr&&d==="scroll",ze=lr?Et!==null?Et+"Capture":null:Et;lr=[];for(var Me=Je,We;Me!==null;){We=Me;var Bt=We.stateNode;if(We.tag===5&&Bt!==null&&(We=Bt,ze!==null&&(Bt=Ae(Me,ze),Bt!=null&&lr.push(Gu(Me,Bt,We)))),gi)break;Me=Me.return}0<lr.length&&(Et=new Xt(Et,or,null,T,kt),Rt.push({event:Et,listeners:lr}))}}if((p&7)===0){e:{if(Et=d==="mouseover"||d==="pointerover",Xt=d==="mouseout"||d==="pointerout",Et&&T!==En&&(or=T.relatedTarget||T.fromElement)&&(dn(or)||or[Ee]))break e;if((Xt||Et)&&(Et=kt.window===kt?kt:(Et=kt.ownerDocument)?Et.defaultView||Et.parentWindow:window,Xt?(or=T.relatedTarget||T.toElement,Xt=Je,or=or?dn(or):null,or!==null&&(gi=xt(or),or!==gi||or.tag!==5&&or.tag!==6)&&(or=null)):(Xt=null,or=Je),Xt!==or)){if(lr=xo,Bt="onMouseLeave",ze="onMouseEnter",Me="mouse",(d==="pointerout"||d==="pointerover")&&(lr=So,Bt="onPointerLeave",ze="onPointerEnter",Me="pointer"),gi=Xt==null?Et:Ao(Xt),We=or==null?Et:Ao(or),Et=new lr(Bt,Me+"leave",Xt,T,kt),Et.target=gi,Et.relatedTarget=We,Bt=null,dn(kt)===Je&&(lr=new lr(ze,Me+"enter",or,T,kt),lr.target=We,lr.relatedTarget=gi,Bt=lr),gi=Bt,Xt&&or)t:{for(lr=Xt,ze=or,Me=0,We=lr;We;We=Gl(We))Me++;for(We=0,Bt=ze;Bt;Bt=Gl(Bt))We++;for(;0<Me-We;)lr=Gl(lr),Me--;for(;0<We-Me;)ze=Gl(ze),We--;for(;Me--;){if(lr===ze||ze!==null&&lr===ze.alternate)break t;lr=Gl(lr),ze=Gl(ze)}lr=null}else lr=null;Xt!==null&&af(Rt,Et,Xt,lr,!1),or!==null&&gi!==null&&af(Rt,gi,or,lr,!0)}}e:{if(Et=Je?Ao(Je):window,Xt=Et.nodeName&&Et.nodeName.toLowerCase(),Xt==="select"||Xt==="input"&&Et.type==="file")var cr=qd;else if(Ds(Et))if(Vu)cr=_e;else{cr=te;var xr=Z}else(Xt=Et.nodeName)&&Xt.toLowerCase()==="input"&&(Et.type==="checkbox"||Et.type==="radio")&&(cr=ge);if(cr&&(cr=cr(d,Je))){Wc(Rt,cr,T,kt);break e}xr&&xr(d,Et,Je),d==="focusout"&&(xr=Et._wrapperState)&&xr.controlled&&Et.type==="number"&&ht(Et,"number",Et.value)}switch(xr=Je?Ao(Je):window,d){case"focusin":(Ds(xr)||xr.contentEditable==="true")&&(Hi=xr,cl=Je,wo=null);break;case"focusout":wo=cl=Hi=null;break;case"mousedown":Eo=!0;break;case"contextmenu":case"mouseup":case"dragend":Eo=!1,dl(Rt,T,kt);break;case"selectionchange":if(fi)break;case"keydown":case"keyup":dl(Rt,T,kt)}var br;if(al)e:{switch(d){case"compositionstart":var kr="onCompositionStart";break e;case"compositionend":kr="onCompositionEnd";break e;case"compositionupdate":kr="onCompositionUpdate";break e}kr=void 0}else on?rn(d,T)&&(kr="onCompositionEnd"):d==="keydown"&&T.keyCode===229&&(kr="onCompositionStart");kr&&(jl&&T.locale!=="ko"&&(on||kr!=="onCompositionStart"?kr==="onCompositionEnd"&&on&&(br=Mc()):(ga=kt,ls="value"in ga?ga.value:ga.textContent,on=!0)),xr=ql(Je,kr),0<xr.length&&(kr=new Bc(kr,d,null,T,kt),Rt.push({event:kr,listeners:xr}),br?kr.data=br:(br=As(T),br!==null&&(kr.data=br)))),(br=zu?zi(d,T):Wd(d,T))&&(Je=ql(Je,"onBeforeInput"),0<Je.length&&(kt=new Bc("onBeforeInput","beforeinput",null,T,kt),Rt.push({event:kt,listeners:Je}),kt.data=br))}sf(Rt,p)})}function Gu(d,p,T){return{instance:d,listener:p,currentTarget:T}}function ql(d,p){for(var T=p+"Capture",R=[];d!==null;){var $=d,K=$.stateNode;$.tag===5&&K!==null&&($=K,K=Ae(d,T),K!=null&&R.unshift(Gu(d,K,$)),K=Ae(d,p),K!=null&&R.push(Gu(d,K,$))),d=d.return}return R}function Gl(d){if(d===null)return null;do d=d.return;while(d&&d.tag!==5);return d||null}function af(d,p,T,R,$){for(var K=p._reactName,ce=[];T!==null&&T!==R;){var Ce=T,Ie=Ce.alternate,Je=Ce.stateNode;if(Ie!==null&&Ie===R)break;Ce.tag===5&&Je!==null&&(Ce=Je,$?(Ie=Ae(T,K),Ie!=null&&ce.unshift(Gu(T,Ie,Ce))):$||(Ie=Ae(T,K),Ie!=null&&ce.push(Gu(T,Ie,Ce)))),T=T.return}ce.length!==0&&d.push({event:p,listeners:ce})}var xm=/\r\n?/g,bm=/\u0000|\uFFFD/g;function of(d){return(typeof d=="string"?d:""+d).replace(xm,`
`).replace(bm,"")}function Gc(d,p,T){if(p=of(p),of(d)!==p&&T)throw Error(t(425))}function Kc(){}var Ku=null,f=null;function _(d,p){return d==="textarea"||d==="noscript"||typeof p.children=="string"||typeof p.children=="number"||typeof p.dangerouslySetInnerHTML=="object"&&p.dangerouslySetInnerHTML!==null&&p.dangerouslySetInnerHTML.__html!=null}var S=typeof setTimeout=="function"?setTimeout:void 0,b=typeof clearTimeout=="function"?clearTimeout:void 0,C=typeof Promise=="function"?Promise:void 0,P=typeof queueMicrotask=="function"?queueMicrotask:typeof C<"u"?function(d){return C.resolve(null).then(d).catch(G)}:S;function G(d){setTimeout(function(){throw d})}function Y(d,p){var T=p,R=0;do{var $=T.nextSibling;if(d.removeChild(T),$&&$.nodeType===8)if(T=$.data,T==="/$"){if(R===0){d.removeChild($),os(p);return}R--}else T!=="$"&&T!=="$?"&&T!=="$!"||R++;T=$}while(T);os(p)}function J(d){for(;d!=null;d=d.nextSibling){var p=d.nodeType;if(p===1||p===3)break;if(p===8){if(p=d.data,p==="$"||p==="$!"||p==="$?")break;if(p==="/$")return null}}return d}function re(d){d=d.previousSibling;for(var p=0;d;){if(d.nodeType===8){var T=d.data;if(T==="$"||T==="$!"||T==="$?"){if(p===0)return d;p--}else T==="/$"&&p++}d=d.previousSibling}return null}var de=Math.random().toString(36).slice(2),ve="__reactFiber$"+de,Ve="__reactProps$"+de,Ee="__reactContainer$"+de,bt="__reactEvents$"+de,zt="__reactListeners$"+de,Vr="__reactHandles$"+de;function dn(d){var p=d[ve];if(p)return p;for(var T=d.parentNode;T;){if(p=T[Ee]||T[ve]){if(T=p.alternate,p.child!==null||T!==null&&T.child!==null)for(d=re(d);d!==null;){if(T=d[ve])return T;d=re(d)}return p}d=T,T=d.parentNode}return null}function mi(d){return d=d[ve]||d[Ee],!d||d.tag!==5&&d.tag!==6&&d.tag!==13&&d.tag!==3?null:d}function Ao(d){if(d.tag===5||d.tag===6)return d.stateNode;throw Error(t(33))}function Kl(d){return d[Ve]||null}var Xu=[],_a=-1;function xa(d){return{current:d}}function Yt(d){0>_a||(d.current=Xu[_a],Xu[_a]=null,_a--)}function fn(d,p){_a++,Xu[_a]=d.current,d.current=p}var qn={},Is=xa(qn),ba=xa(!1),Xd=qn;function lf(d,p){var T=d.type.contextTypes;if(!T)return qn;var R=d.stateNode;if(R&&R.__reactInternalMemoizedUnmaskedChildContext===p)return R.__reactInternalMemoizedMaskedChildContext;var $={},K;for(K in T)$[K]=p[K];return R&&(d=d.stateNode,d.__reactInternalMemoizedUnmaskedChildContext=p,d.__reactInternalMemoizedMaskedChildContext=$),$}function Sa(d){return d=d.childContextTypes,d!=null}function Zg(){Yt(ba),Yt(Is)}function BA(d,p,T){if(Is.current!==qn)throw Error(t(168));fn(Is,p),fn(ba,T)}function NA(d,p,T){var R=d.stateNode;if(p=p.childContextTypes,typeof R.getChildContext!="function")return T;R=R.getChildContext();for(var $ in R)if(!($ in p))throw Error(t(108,dt(d)||"Unknown",$));return ue({},T,R)}function ev(d){return d=(d=d.stateNode)&&d.__reactInternalMemoizedMergedChildContext||qn,Xd=Is.current,fn(Is,d),fn(ba,ba.current),!0}function UA(d,p,T){var R=d.stateNode;if(!R)throw Error(t(169));T?(d=NA(d,p,Xd),R.__reactInternalMemoizedMergedChildContext=d,Yt(ba),Yt(Is),fn(Is,d)):Yt(ba),fn(ba,T)}var Yu=null,tv=!1,AS=!1;function $A(d){Yu===null?Yu=[d]:Yu.push(d)}function c9(d){tv=!0,$A(d)}function Xc(){if(!AS&&Yu!==null){AS=!0;var d=0,p=Hr;try{var T=Yu;for(Hr=1;d<T.length;d++){var R=T[d];do R=R(!0);while(R!==null)}Yu=null,tv=!1}catch($){throw Yu!==null&&(Yu=Yu.slice(d+1)),er(di,Xc),$}finally{Hr=p,AS=!1}}return null}var uf=[],cf=0,rv=null,nv=0,Do=[],Io=0,Yd=null,Qu=1,Ju="";function Qd(d,p){uf[cf++]=nv,uf[cf++]=rv,rv=d,nv=p}function jA(d,p,T){Do[Io++]=Qu,Do[Io++]=Ju,Do[Io++]=Yd,Yd=d;var R=Qu;d=Ju;var $=32-wt(R)-1;R&=~(1<<$),T+=1;var K=32-wt(p)+$;if(30<K){var ce=$-$%5;K=(R&(1<<ce)-1).toString(32),R>>=ce,$-=ce,Qu=1<<32-wt(p)+$|T<<$|R,Ju=K+d}else Qu=1<<K|T<<$|R,Ju=d}function DS(d){d.return!==null&&(Qd(d,1),jA(d,1,0))}function IS(d){for(;d===rv;)rv=uf[--cf],uf[cf]=null,nv=uf[--cf],uf[cf]=null;for(;d===Yd;)Yd=Do[--Io],Do[Io]=null,Ju=Do[--Io],Do[Io]=null,Qu=Do[--Io],Do[Io]=null}var Qa=null,Ja=null,Gn=!1,hl=null;function zA(d,p){var T=Oo(5,null,null,0);T.elementType="DELETED",T.stateNode=p,T.return=d,p=d.deletions,p===null?(d.deletions=[T],d.flags|=16):p.push(T)}function HA(d,p){switch(d.tag){case 5:var T=d.type;return p=p.nodeType!==1||T.toLowerCase()!==p.nodeName.toLowerCase()?null:p,p!==null?(d.stateNode=p,Qa=d,Ja=J(p.firstChild),!0):!1;case 6:return p=d.pendingProps===""||p.nodeType!==3?null:p,p!==null?(d.stateNode=p,Qa=d,Ja=null,!0):!1;case 13:return p=p.nodeType!==8?null:p,p!==null?(T=Yd!==null?{id:Qu,overflow:Ju}:null,d.memoizedState={dehydrated:p,treeContext:T,retryLane:1073741824},T=Oo(18,null,null,0),T.stateNode=p,T.return=d,d.child=T,Qa=d,Ja=null,!0):!1;default:return!1}}function PS(d){return(d.mode&1)!==0&&(d.flags&128)===0}function RS(d){if(Gn){var p=Ja;if(p){var T=p;if(!HA(d,p)){if(PS(d))throw Error(t(418));p=J(T.nextSibling);var R=Qa;p&&HA(d,p)?zA(R,T):(d.flags=d.flags&-4097|2,Gn=!1,Qa=d)}}else{if(PS(d))throw Error(t(418));d.flags=d.flags&-4097|2,Gn=!1,Qa=d}}}function VA(d){for(d=d.return;d!==null&&d.tag!==5&&d.tag!==3&&d.tag!==13;)d=d.return;Qa=d}function iv(d){if(d!==Qa)return!1;if(!Gn)return VA(d),Gn=!0,!1;var p;if((p=d.tag!==3)&&!(p=d.tag!==5)&&(p=d.type,p=p!=="head"&&p!=="body"&&!_(d.type,d.memoizedProps)),p&&(p=Ja)){if(PS(d))throw WA(),Error(t(418));for(;p;)zA(d,p),p=J(p.nextSibling)}if(VA(d),d.tag===13){if(d=d.memoizedState,d=d!==null?d.dehydrated:null,!d)throw Error(t(317));e:{for(d=d.nextSibling,p=0;d;){if(d.nodeType===8){var T=d.data;if(T==="/$"){if(p===0){Ja=J(d.nextSibling);break e}p--}else T!=="$"&&T!=="$!"&&T!=="$?"||p++}d=d.nextSibling}Ja=null}}else Ja=Qa?J(d.stateNode.nextSibling):null;return!0}function WA(){for(var d=Ja;d;)d=J(d.nextSibling)}function df(){Ja=Qa=null,Gn=!1}function LS(d){hl===null?hl=[d]:hl.push(d)}var d9=I.ReactCurrentBatchConfig;function Sm(d,p,T){if(d=T.ref,d!==null&&typeof d!="function"&&typeof d!="object"){if(T._owner){if(T=T._owner,T){if(T.tag!==1)throw Error(t(309));var R=T.stateNode}if(!R)throw Error(t(147,d));var $=R,K=""+d;return p!==null&&p.ref!==null&&typeof p.ref=="function"&&p.ref._stringRef===K?p.ref:(p=function(ce){var Ce=$.refs;ce===null?delete Ce[K]:Ce[K]=ce},p._stringRef=K,p)}if(typeof d!="string")throw Error(t(284));if(!T._owner)throw Error(t(290,d))}return d}function sv(d,p){throw d=Object.prototype.toString.call(p),Error(t(31,d==="[object Object]"?"object with keys {"+Object.keys(p).join(", ")+"}":d))}function qA(d){var p=d._init;return p(d._payload)}function GA(d){function p(ze,Me){if(d){var We=ze.deletions;We===null?(ze.deletions=[Me],ze.flags|=16):We.push(Me)}}function T(ze,Me){if(!d)return null;for(;Me!==null;)p(ze,Me),Me=Me.sibling;return null}function R(ze,Me){for(ze=new Map;Me!==null;)Me.key!==null?ze.set(Me.key,Me):ze.set(Me.index,Me),Me=Me.sibling;return ze}function $(ze,Me){return ze=nd(ze,Me),ze.index=0,ze.sibling=null,ze}function K(ze,Me,We){return ze.index=We,d?(We=ze.alternate,We!==null?(We=We.index,We<Me?(ze.flags|=2,Me):We):(ze.flags|=2,Me)):(ze.flags|=1048576,Me)}function ce(ze){return d&&ze.alternate===null&&(ze.flags|=2),ze}function Ce(ze,Me,We,Bt){return Me===null||Me.tag!==6?(Me=CT(We,ze.mode,Bt),Me.return=ze,Me):(Me=$(Me,We),Me.return=ze,Me)}function Ie(ze,Me,We,Bt){var cr=We.type;return cr===N?kt(ze,Me,We.props.children,Bt,We.key):Me!==null&&(Me.elementType===cr||typeof cr=="object"&&cr!==null&&cr.$$typeof===le&&qA(cr)===Me.type)?(Bt=$(Me,We.props),Bt.ref=Sm(ze,Me,We),Bt.return=ze,Bt):(Bt=Dv(We.type,We.key,We.props,null,ze.mode,Bt),Bt.ref=Sm(ze,Me,We),Bt.return=ze,Bt)}function Je(ze,Me,We,Bt){return Me===null||Me.tag!==4||Me.stateNode.containerInfo!==We.containerInfo||Me.stateNode.implementation!==We.implementation?(Me=wT(We,ze.mode,Bt),Me.return=ze,Me):(Me=$(Me,We.children||[]),Me.return=ze,Me)}function kt(ze,Me,We,Bt,cr){return Me===null||Me.tag!==7?(Me=sh(We,ze.mode,Bt,cr),Me.return=ze,Me):(Me=$(Me,We),Me.return=ze,Me)}function Rt(ze,Me,We){if(typeof Me=="string"&&Me!==""||typeof Me=="number")return Me=CT(""+Me,ze.mode,We),Me.return=ze,Me;if(typeof Me=="object"&&Me!==null){switch(Me.$$typeof){case A:return We=Dv(Me.type,Me.key,Me.props,null,ze.mode,We),We.ref=Sm(ze,null,Me),We.return=ze,We;case L:return Me=wT(Me,ze.mode,We),Me.return=ze,Me;case le:var Bt=Me._init;return Rt(ze,Bt(Me._payload),We)}if(ut(Me)||ne(Me))return Me=sh(Me,ze.mode,We,null),Me.return=ze,Me;sv(ze,Me)}return null}function Et(ze,Me,We,Bt){var cr=Me!==null?Me.key:null;if(typeof We=="string"&&We!==""||typeof We=="number")return cr!==null?null:Ce(ze,Me,""+We,Bt);if(typeof We=="object"&&We!==null){switch(We.$$typeof){case A:return We.key===cr?Ie(ze,Me,We,Bt):null;case L:return We.key===cr?Je(ze,Me,We,Bt):null;case le:return cr=We._init,Et(ze,Me,cr(We._payload),Bt)}if(ut(We)||ne(We))return cr!==null?null:kt(ze,Me,We,Bt,null);sv(ze,We)}return null}function Xt(ze,Me,We,Bt,cr){if(typeof Bt=="string"&&Bt!==""||typeof Bt=="number")return ze=ze.get(We)||null,Ce(Me,ze,""+Bt,cr);if(typeof Bt=="object"&&Bt!==null){switch(Bt.$$typeof){case A:return ze=ze.get(Bt.key===null?We:Bt.key)||null,Ie(Me,ze,Bt,cr);case L:return ze=ze.get(Bt.key===null?We:Bt.key)||null,Je(Me,ze,Bt,cr);case le:var xr=Bt._init;return Xt(ze,Me,We,xr(Bt._payload),cr)}if(ut(Bt)||ne(Bt))return ze=ze.get(We)||null,kt(Me,ze,Bt,cr,null);sv(Me,Bt)}return null}function or(ze,Me,We,Bt){for(var cr=null,xr=null,br=Me,kr=Me=0,Ki=null;br!==null&&kr<We.length;kr++){br.index>kr?(Ki=br,br=null):Ki=br.sibling;var pn=Et(ze,br,We[kr],Bt);if(pn===null){br===null&&(br=Ki);break}d&&br&&pn.alternate===null&&p(ze,br),Me=K(pn,Me,kr),xr===null?cr=pn:xr.sibling=pn,xr=pn,br=Ki}if(kr===We.length)return T(ze,br),Gn&&Qd(ze,kr),cr;if(br===null){for(;kr<We.length;kr++)br=Rt(ze,We[kr],Bt),br!==null&&(Me=K(br,Me,kr),xr===null?cr=br:xr.sibling=br,xr=br);return Gn&&Qd(ze,kr),cr}for(br=R(ze,br);kr<We.length;kr++)Ki=Xt(br,ze,kr,We[kr],Bt),Ki!==null&&(d&&Ki.alternate!==null&&br.delete(Ki.key===null?kr:Ki.key),Me=K(Ki,Me,kr),xr===null?cr=Ki:xr.sibling=Ki,xr=Ki);return d&&br.forEach(function(id){return p(ze,id)}),Gn&&Qd(ze,kr),cr}function lr(ze,Me,We,Bt){var cr=ne(We);if(typeof cr!="function")throw Error(t(150));if(We=cr.call(We),We==null)throw Error(t(151));for(var xr=cr=null,br=Me,kr=Me=0,Ki=null,pn=We.next();br!==null&&!pn.done;kr++,pn=We.next()){br.index>kr?(Ki=br,br=null):Ki=br.sibling;var id=Et(ze,br,pn.value,Bt);if(id===null){br===null&&(br=Ki);break}d&&br&&id.alternate===null&&p(ze,br),Me=K(id,Me,kr),xr===null?cr=id:xr.sibling=id,xr=id,br=Ki}if(pn.done)return T(ze,br),Gn&&Qd(ze,kr),cr;if(br===null){for(;!pn.done;kr++,pn=We.next())pn=Rt(ze,pn.value,Bt),pn!==null&&(Me=K(pn,Me,kr),xr===null?cr=pn:xr.sibling=pn,xr=pn);return Gn&&Qd(ze,kr),cr}for(br=R(ze,br);!pn.done;kr++,pn=We.next())pn=Xt(br,ze,kr,pn.value,Bt),pn!==null&&(d&&pn.alternate!==null&&br.delete(pn.key===null?kr:pn.key),Me=K(pn,Me,kr),xr===null?cr=pn:xr.sibling=pn,xr=pn);return d&&br.forEach(function(V9){return p(ze,V9)}),Gn&&Qd(ze,kr),cr}function gi(ze,Me,We,Bt){if(typeof We=="object"&&We!==null&&We.type===N&&We.key===null&&(We=We.props.children),typeof We=="object"&&We!==null){switch(We.$$typeof){case A:e:{for(var cr=We.key,xr=Me;xr!==null;){if(xr.key===cr){if(cr=We.type,cr===N){if(xr.tag===7){T(ze,xr.sibling),Me=$(xr,We.props.children),Me.return=ze,ze=Me;break e}}else if(xr.elementType===cr||typeof cr=="object"&&cr!==null&&cr.$$typeof===le&&qA(cr)===xr.type){T(ze,xr.sibling),Me=$(xr,We.props),Me.ref=Sm(ze,xr,We),Me.return=ze,ze=Me;break e}T(ze,xr);break}else p(ze,xr);xr=xr.sibling}We.type===N?(Me=sh(We.props.children,ze.mode,Bt,We.key),Me.return=ze,ze=Me):(Bt=Dv(We.type,We.key,We.props,null,ze.mode,Bt),Bt.ref=Sm(ze,Me,We),Bt.return=ze,ze=Bt)}return ce(ze);case L:e:{for(xr=We.key;Me!==null;){if(Me.key===xr)if(Me.tag===4&&Me.stateNode.containerInfo===We.containerInfo&&Me.stateNode.implementation===We.implementation){T(ze,Me.sibling),Me=$(Me,We.children||[]),Me.return=ze,ze=Me;break e}else{T(ze,Me);break}else p(ze,Me);Me=Me.sibling}Me=wT(We,ze.mode,Bt),Me.return=ze,ze=Me}return ce(ze);case le:return xr=We._init,gi(ze,Me,xr(We._payload),Bt)}if(ut(We))return or(ze,Me,We,Bt);if(ne(We))return lr(ze,Me,We,Bt);sv(ze,We)}return typeof We=="string"&&We!==""||typeof We=="number"?(We=""+We,Me!==null&&Me.tag===6?(T(ze,Me.sibling),Me=$(Me,We),Me.return=ze,ze=Me):(T(ze,Me),Me=CT(We,ze.mode,Bt),Me.return=ze,ze=Me),ce(ze)):T(ze,Me)}return gi}var hf=GA(!0),KA=GA(!1),av=xa(null),ov=null,ff=null,OS=null;function MS(){OS=ff=ov=null}function FS(d){var p=av.current;Yt(av),d._currentValue=p}function BS(d,p,T){for(;d!==null;){var R=d.alternate;if((d.childLanes&p)!==p?(d.childLanes|=p,R!==null&&(R.childLanes|=p)):R!==null&&(R.childLanes&p)!==p&&(R.childLanes|=p),d===T)break;d=d.return}}function pf(d,p){ov=d,OS=ff=null,d=d.dependencies,d!==null&&d.firstContext!==null&&((d.lanes&p)!==0&&(Ta=!0),d.firstContext=null)}function Po(d){var p=d._currentValue;if(OS!==d)if(d={context:d,memoizedValue:p,next:null},ff===null){if(ov===null)throw Error(t(308));ff=d,ov.dependencies={lanes:0,firstContext:d}}else ff=ff.next=d;return p}var Jd=null;function NS(d){Jd===null?Jd=[d]:Jd.push(d)}function XA(d,p,T,R){var $=p.interleaved;return $===null?(T.next=T,NS(p)):(T.next=$.next,$.next=T),p.interleaved=T,Zu(d,R)}function Zu(d,p){d.lanes|=p;var T=d.alternate;for(T!==null&&(T.lanes|=p),T=d,d=d.return;d!==null;)d.childLanes|=p,T=d.alternate,T!==null&&(T.childLanes|=p),T=d,d=d.return;return T.tag===3?T.stateNode:null}var Yc=!1;function US(d){d.updateQueue={baseState:d.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function YA(d,p){d=d.updateQueue,p.updateQueue===d&&(p.updateQueue={baseState:d.baseState,firstBaseUpdate:d.firstBaseUpdate,lastBaseUpdate:d.lastBaseUpdate,shared:d.shared,effects:d.effects})}function ec(d,p){return{eventTime:d,lane:p,tag:0,payload:null,callback:null,next:null}}function Qc(d,p,T){var R=d.updateQueue;if(R===null)return null;if(R=R.shared,(hn&2)!==0){var $=R.pending;return $===null?p.next=p:(p.next=$.next,$.next=p),R.pending=p,Zu(d,T)}return $=R.interleaved,$===null?(p.next=p,NS(R)):(p.next=$.next,$.next=p),R.interleaved=p,Zu(d,T)}function lv(d,p,T){if(p=p.updateQueue,p!==null&&(p=p.shared,(T&4194240)!==0)){var R=p.lanes;R&=d.pendingLanes,T|=R,p.lanes=T,Fu(d,T)}}function QA(d,p){var T=d.updateQueue,R=d.alternate;if(R!==null&&(R=R.updateQueue,T===R)){var $=null,K=null;if(T=T.firstBaseUpdate,T!==null){do{var ce={eventTime:T.eventTime,lane:T.lane,tag:T.tag,payload:T.payload,callback:T.callback,next:null};K===null?$=K=ce:K=K.next=ce,T=T.next}while(T!==null);K===null?$=K=p:K=K.next=p}else $=K=p;T={baseState:R.baseState,firstBaseUpdate:$,lastBaseUpdate:K,shared:R.shared,effects:R.effects},d.updateQueue=T;return}d=T.lastBaseUpdate,d===null?T.firstBaseUpdate=p:d.next=p,T.lastBaseUpdate=p}function uv(d,p,T,R){var $=d.updateQueue;Yc=!1;var K=$.firstBaseUpdate,ce=$.lastBaseUpdate,Ce=$.shared.pending;if(Ce!==null){$.shared.pending=null;var Ie=Ce,Je=Ie.next;Ie.next=null,ce===null?K=Je:ce.next=Je,ce=Ie;var kt=d.alternate;kt!==null&&(kt=kt.updateQueue,Ce=kt.lastBaseUpdate,Ce!==ce&&(Ce===null?kt.firstBaseUpdate=Je:Ce.next=Je,kt.lastBaseUpdate=Ie))}if(K!==null){var Rt=$.baseState;ce=0,kt=Je=Ie=null,Ce=K;do{var Et=Ce.lane,Xt=Ce.eventTime;if((R&Et)===Et){kt!==null&&(kt=kt.next={eventTime:Xt,lane:0,tag:Ce.tag,payload:Ce.payload,callback:Ce.callback,next:null});e:{var or=d,lr=Ce;switch(Et=p,Xt=T,lr.tag){case 1:if(or=lr.payload,typeof or=="function"){Rt=or.call(Xt,Rt,Et);break e}Rt=or;break e;case 3:or.flags=or.flags&-65537|128;case 0:if(or=lr.payload,Et=typeof or=="function"?or.call(Xt,Rt,Et):or,Et==null)break e;Rt=ue({},Rt,Et);break e;case 2:Yc=!0}}Ce.callback!==null&&Ce.lane!==0&&(d.flags|=64,Et=$.effects,Et===null?$.effects=[Ce]:Et.push(Ce))}else Xt={eventTime:Xt,lane:Et,tag:Ce.tag,payload:Ce.payload,callback:Ce.callback,next:null},kt===null?(Je=kt=Xt,Ie=Rt):kt=kt.next=Xt,ce|=Et;if(Ce=Ce.next,Ce===null){if(Ce=$.shared.pending,Ce===null)break;Et=Ce,Ce=Et.next,Et.next=null,$.lastBaseUpdate=Et,$.shared.pending=null}}while(!0);if(kt===null&&(Ie=Rt),$.baseState=Ie,$.firstBaseUpdate=Je,$.lastBaseUpdate=kt,p=$.shared.interleaved,p!==null){$=p;do ce|=$.lane,$=$.next;while($!==p)}else K===null&&($.shared.lanes=0);th|=ce,d.lanes=ce,d.memoizedState=Rt}}function JA(d,p,T){if(d=p.effects,p.effects=null,d!==null)for(p=0;p<d.length;p++){var R=d[p],$=R.callback;if($!==null){if(R.callback=null,R=T,typeof $!="function")throw Error(t(191,$));$.call(R)}}}var Tm={},Xl=xa(Tm),Cm=xa(Tm),wm=xa(Tm);function Zd(d){if(d===Tm)throw Error(t(174));return d}function $S(d,p){switch(fn(wm,p),fn(Cm,d),fn(Xl,Tm),d=p.nodeType,d){case 9:case 11:p=(p=p.documentElement)?p.namespaceURI:Wt(null,"");break;default:d=d===8?p.parentNode:p,p=d.namespaceURI||null,d=d.tagName,p=Wt(p,d)}Yt(Xl),fn(Xl,p)}function mf(){Yt(Xl),Yt(Cm),Yt(wm)}function ZA(d){Zd(wm.current);var p=Zd(Xl.current),T=Wt(p,d.type);p!==T&&(fn(Cm,d),fn(Xl,T))}function jS(d){Cm.current===d&&(Yt(Xl),Yt(Cm))}var Zn=xa(0);function cv(d){for(var p=d;p!==null;){if(p.tag===13){var T=p.memoizedState;if(T!==null&&(T=T.dehydrated,T===null||T.data==="$?"||T.data==="$!"))return p}else if(p.tag===19&&p.memoizedProps.revealOrder!==void 0){if((p.flags&128)!==0)return p}else if(p.child!==null){p.child.return=p,p=p.child;continue}if(p===d)break;for(;p.sibling===null;){if(p.return===null||p.return===d)return null;p=p.return}p.sibling.return=p.return,p=p.sibling}return null}var zS=[];function HS(){for(var d=0;d<zS.length;d++)zS[d]._workInProgressVersionPrimary=null;zS.length=0}var dv=I.ReactCurrentDispatcher,VS=I.ReactCurrentBatchConfig,eh=0,ei=null,Li=null,qi=null,hv=!1,Em=!1,km=0,h9=0;function Ps(){throw Error(t(321))}function WS(d,p){if(p===null)return!1;for(var T=0;T<p.length&&T<d.length;T++)if(!we(d[T],p[T]))return!1;return!0}function qS(d,p,T,R,$,K){if(eh=K,ei=p,p.memoizedState=null,p.updateQueue=null,p.lanes=0,dv.current=d===null||d.memoizedState===null?g9:v9,d=T(R,$),Em){K=0;do{if(Em=!1,km=0,25<=K)throw Error(t(301));K+=1,qi=Li=null,p.updateQueue=null,dv.current=y9,d=T(R,$)}while(Em)}if(dv.current=mv,p=Li!==null&&Li.next!==null,eh=0,qi=Li=ei=null,hv=!1,p)throw Error(t(300));return d}function GS(){var d=km!==0;return km=0,d}function Yl(){var d={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return qi===null?ei.memoizedState=qi=d:qi=qi.next=d,qi}function Ro(){if(Li===null){var d=ei.alternate;d=d!==null?d.memoizedState:null}else d=Li.next;var p=qi===null?ei.memoizedState:qi.next;if(p!==null)qi=p,Li=d;else{if(d===null)throw Error(t(310));Li=d,d={memoizedState:Li.memoizedState,baseState:Li.baseState,baseQueue:Li.baseQueue,queue:Li.queue,next:null},qi===null?ei.memoizedState=qi=d:qi=qi.next=d}return qi}function Am(d,p){return typeof p=="function"?p(d):p}function KS(d){var p=Ro(),T=p.queue;if(T===null)throw Error(t(311));T.lastRenderedReducer=d;var R=Li,$=R.baseQueue,K=T.pending;if(K!==null){if($!==null){var ce=$.next;$.next=K.next,K.next=ce}R.baseQueue=$=K,T.pending=null}if($!==null){K=$.next,R=R.baseState;var Ce=ce=null,Ie=null,Je=K;do{var kt=Je.lane;if((eh&kt)===kt)Ie!==null&&(Ie=Ie.next={lane:0,action:Je.action,hasEagerState:Je.hasEagerState,eagerState:Je.eagerState,next:null}),R=Je.hasEagerState?Je.eagerState:d(R,Je.action);else{var Rt={lane:kt,action:Je.action,hasEagerState:Je.hasEagerState,eagerState:Je.eagerState,next:null};Ie===null?(Ce=Ie=Rt,ce=R):Ie=Ie.next=Rt,ei.lanes|=kt,th|=kt}Je=Je.next}while(Je!==null&&Je!==K);Ie===null?ce=R:Ie.next=Ce,we(R,p.memoizedState)||(Ta=!0),p.memoizedState=R,p.baseState=ce,p.baseQueue=Ie,T.lastRenderedState=R}if(d=T.interleaved,d!==null){$=d;do K=$.lane,ei.lanes|=K,th|=K,$=$.next;while($!==d)}else $===null&&(T.lanes=0);return[p.memoizedState,T.dispatch]}function XS(d){var p=Ro(),T=p.queue;if(T===null)throw Error(t(311));T.lastRenderedReducer=d;var R=T.dispatch,$=T.pending,K=p.memoizedState;if($!==null){T.pending=null;var ce=$=$.next;do K=d(K,ce.action),ce=ce.next;while(ce!==$);we(K,p.memoizedState)||(Ta=!0),p.memoizedState=K,p.baseQueue===null&&(p.baseState=K),T.lastRenderedState=K}return[K,R]}function eD(){}function tD(d,p){var T=ei,R=Ro(),$=p(),K=!we(R.memoizedState,$);if(K&&(R.memoizedState=$,Ta=!0),R=R.queue,YS(iD.bind(null,T,R,d),[d]),R.getSnapshot!==p||K||qi!==null&&qi.memoizedState.tag&1){if(T.flags|=2048,Dm(9,nD.bind(null,T,R,$,p),void 0,null),Gi===null)throw Error(t(349));(eh&30)!==0||rD(T,p,$)}return $}function rD(d,p,T){d.flags|=16384,d={getSnapshot:p,value:T},p=ei.updateQueue,p===null?(p={lastEffect:null,stores:null},ei.updateQueue=p,p.stores=[d]):(T=p.stores,T===null?p.stores=[d]:T.push(d))}function nD(d,p,T,R){p.value=T,p.getSnapshot=R,sD(p)&&aD(d)}function iD(d,p,T){return T(function(){sD(p)&&aD(d)})}function sD(d){var p=d.getSnapshot;d=d.value;try{var T=p();return!we(d,T)}catch{return!0}}function aD(d){var p=Zu(d,1);p!==null&&gl(p,d,1,-1)}function oD(d){var p=Yl();return typeof d=="function"&&(d=d()),p.memoizedState=p.baseState=d,d={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Am,lastRenderedState:d},p.queue=d,d=d.dispatch=m9.bind(null,ei,d),[p.memoizedState,d]}function Dm(d,p,T,R){return d={tag:d,create:p,destroy:T,deps:R,next:null},p=ei.updateQueue,p===null?(p={lastEffect:null,stores:null},ei.updateQueue=p,p.lastEffect=d.next=d):(T=p.lastEffect,T===null?p.lastEffect=d.next=d:(R=T.next,T.next=d,d.next=R,p.lastEffect=d)),d}function lD(){return Ro().memoizedState}function fv(d,p,T,R){var $=Yl();ei.flags|=d,$.memoizedState=Dm(1|p,T,void 0,R===void 0?null:R)}function pv(d,p,T,R){var $=Ro();R=R===void 0?null:R;var K=void 0;if(Li!==null){var ce=Li.memoizedState;if(K=ce.destroy,R!==null&&WS(R,ce.deps)){$.memoizedState=Dm(p,T,K,R);return}}ei.flags|=d,$.memoizedState=Dm(1|p,T,K,R)}function uD(d,p){return fv(8390656,8,d,p)}function YS(d,p){return pv(2048,8,d,p)}function cD(d,p){return pv(4,2,d,p)}function dD(d,p){return pv(4,4,d,p)}function hD(d,p){if(typeof p=="function")return d=d(),p(d),function(){p(null)};if(p!=null)return d=d(),p.current=d,function(){p.current=null}}function fD(d,p,T){return T=T!=null?T.concat([d]):null,pv(4,4,hD.bind(null,p,d),T)}function QS(){}function pD(d,p){var T=Ro();p=p===void 0?null:p;var R=T.memoizedState;return R!==null&&p!==null&&WS(p,R[1])?R[0]:(T.memoizedState=[d,p],d)}function mD(d,p){var T=Ro();p=p===void 0?null:p;var R=T.memoizedState;return R!==null&&p!==null&&WS(p,R[1])?R[0]:(d=d(),T.memoizedState=[d,p],d)}function gD(d,p,T){return(eh&21)===0?(d.baseState&&(d.baseState=!1,Ta=!0),d.memoizedState=T):(we(T,p)||(T=Pc(),ei.lanes|=T,th|=T,d.baseState=!0),p)}function f9(d,p){var T=Hr;Hr=T!==0&&4>T?T:4,d(!0);var R=VS.transition;VS.transition={};try{d(!1),p()}finally{Hr=T,VS.transition=R}}function vD(){return Ro().memoizedState}function p9(d,p,T){var R=td(d);if(T={lane:R,action:T,hasEagerState:!1,eagerState:null,next:null},yD(d))_D(p,T);else if(T=XA(d,p,T,R),T!==null){var $=Gs();gl(T,d,R,$),xD(T,p,R)}}function m9(d,p,T){var R=td(d),$={lane:R,action:T,hasEagerState:!1,eagerState:null,next:null};if(yD(d))_D(p,$);else{var K=d.alternate;if(d.lanes===0&&(K===null||K.lanes===0)&&(K=p.lastRenderedReducer,K!==null))try{var ce=p.lastRenderedState,Ce=K(ce,T);if($.hasEagerState=!0,$.eagerState=Ce,we(Ce,ce)){var Ie=p.interleaved;Ie===null?($.next=$,NS(p)):($.next=Ie.next,Ie.next=$),p.interleaved=$;return}}catch{}finally{}T=XA(d,p,$,R),T!==null&&($=Gs(),gl(T,d,R,$),xD(T,p,R))}}function yD(d){var p=d.alternate;return d===ei||p!==null&&p===ei}function _D(d,p){Em=hv=!0;var T=d.pending;T===null?p.next=p:(p.next=T.next,T.next=p),d.pending=p}function xD(d,p,T){if((T&4194240)!==0){var R=p.lanes;R&=d.pendingLanes,T|=R,p.lanes=T,Fu(d,T)}}var mv={readContext:Po,useCallback:Ps,useContext:Ps,useEffect:Ps,useImperativeHandle:Ps,useInsertionEffect:Ps,useLayoutEffect:Ps,useMemo:Ps,useReducer:Ps,useRef:Ps,useState:Ps,useDebugValue:Ps,useDeferredValue:Ps,useTransition:Ps,useMutableSource:Ps,useSyncExternalStore:Ps,useId:Ps,unstable_isNewReconciler:!1},g9={readContext:Po,useCallback:function(d,p){return Yl().memoizedState=[d,p===void 0?null:p],d},useContext:Po,useEffect:uD,useImperativeHandle:function(d,p,T){return T=T!=null?T.concat([d]):null,fv(4194308,4,hD.bind(null,p,d),T)},useLayoutEffect:function(d,p){return fv(4194308,4,d,p)},useInsertionEffect:function(d,p){return fv(4,2,d,p)},useMemo:function(d,p){var T=Yl();return p=p===void 0?null:p,d=d(),T.memoizedState=[d,p],d},useReducer:function(d,p,T){var R=Yl();return p=T!==void 0?T(p):p,R.memoizedState=R.baseState=p,d={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:d,lastRenderedState:p},R.queue=d,d=d.dispatch=p9.bind(null,ei,d),[R.memoizedState,d]},useRef:function(d){var p=Yl();return d={current:d},p.memoizedState=d},useState:oD,useDebugValue:QS,useDeferredValue:function(d){return Yl().memoizedState=d},useTransition:function(){var d=oD(!1),p=d[0];return d=f9.bind(null,d[1]),Yl().memoizedState=d,[p,d]},useMutableSource:function(){},useSyncExternalStore:function(d,p,T){var R=ei,$=Yl();if(Gn){if(T===void 0)throw Error(t(407));T=T()}else{if(T=p(),Gi===null)throw Error(t(349));(eh&30)!==0||rD(R,p,T)}$.memoizedState=T;var K={value:T,getSnapshot:p};return $.queue=K,uD(iD.bind(null,R,K,d),[d]),R.flags|=2048,Dm(9,nD.bind(null,R,K,T,p),void 0,null),T},useId:function(){var d=Yl(),p=Gi.identifierPrefix;if(Gn){var T=Ju,R=Qu;T=(R&~(1<<32-wt(R)-1)).toString(32)+T,p=":"+p+"R"+T,T=km++,0<T&&(p+="H"+T.toString(32)),p+=":"}else T=h9++,p=":"+p+"r"+T.toString(32)+":";return d.memoizedState=p},unstable_isNewReconciler:!1},v9={readContext:Po,useCallback:pD,useContext:Po,useEffect:YS,useImperativeHandle:fD,useInsertionEffect:cD,useLayoutEffect:dD,useMemo:mD,useReducer:KS,useRef:lD,useState:function(){return KS(Am)},useDebugValue:QS,useDeferredValue:function(d){var p=Ro();return gD(p,Li.memoizedState,d)},useTransition:function(){var d=KS(Am)[0],p=Ro().memoizedState;return[d,p]},useMutableSource:eD,useSyncExternalStore:tD,useId:vD,unstable_isNewReconciler:!1},y9={readContext:Po,useCallback:pD,useContext:Po,useEffect:YS,useImperativeHandle:fD,useInsertionEffect:cD,useLayoutEffect:dD,useMemo:mD,useReducer:XS,useRef:lD,useState:function(){return XS(Am)},useDebugValue:QS,useDeferredValue:function(d){var p=Ro();return Li===null?p.memoizedState=d:gD(p,Li.memoizedState,d)},useTransition:function(){var d=XS(Am)[0],p=Ro().memoizedState;return[d,p]},useMutableSource:eD,useSyncExternalStore:tD,useId:vD,unstable_isNewReconciler:!1};function fl(d,p){if(d&&d.defaultProps){p=ue({},p),d=d.defaultProps;for(var T in d)p[T]===void 0&&(p[T]=d[T]);return p}return p}function JS(d,p,T,R){p=d.memoizedState,T=T(R,p),T=T==null?p:ue({},p,T),d.memoizedState=T,d.lanes===0&&(d.updateQueue.baseState=T)}var gv={isMounted:function(d){return(d=d._reactInternals)?xt(d)===d:!1},enqueueSetState:function(d,p,T){d=d._reactInternals;var R=Gs(),$=td(d),K=ec(R,$);K.payload=p,T!=null&&(K.callback=T),p=Qc(d,K,$),p!==null&&(gl(p,d,$,R),lv(p,d,$))},enqueueReplaceState:function(d,p,T){d=d._reactInternals;var R=Gs(),$=td(d),K=ec(R,$);K.tag=1,K.payload=p,T!=null&&(K.callback=T),p=Qc(d,K,$),p!==null&&(gl(p,d,$,R),lv(p,d,$))},enqueueForceUpdate:function(d,p){d=d._reactInternals;var T=Gs(),R=td(d),$=ec(T,R);$.tag=2,p!=null&&($.callback=p),p=Qc(d,$,R),p!==null&&(gl(p,d,R,T),lv(p,d,R))}};function bD(d,p,T,R,$,K,ce){return d=d.stateNode,typeof d.shouldComponentUpdate=="function"?d.shouldComponentUpdate(R,K,ce):p.prototype&&p.prototype.isPureReactComponent?!Re(T,R)||!Re($,K):!0}function SD(d,p,T){var R=!1,$=qn,K=p.contextType;return typeof K=="object"&&K!==null?K=Po(K):($=Sa(p)?Xd:Is.current,R=p.contextTypes,K=(R=R!=null)?lf(d,$):qn),p=new p(T,K),d.memoizedState=p.state!==null&&p.state!==void 0?p.state:null,p.updater=gv,d.stateNode=p,p._reactInternals=d,R&&(d=d.stateNode,d.__reactInternalMemoizedUnmaskedChildContext=$,d.__reactInternalMemoizedMaskedChildContext=K),p}function TD(d,p,T,R){d=p.state,typeof p.componentWillReceiveProps=="function"&&p.componentWillReceiveProps(T,R),typeof p.UNSAFE_componentWillReceiveProps=="function"&&p.UNSAFE_componentWillReceiveProps(T,R),p.state!==d&&gv.enqueueReplaceState(p,p.state,null)}function ZS(d,p,T,R){var $=d.stateNode;$.props=T,$.state=d.memoizedState,$.refs={},US(d);var K=p.contextType;typeof K=="object"&&K!==null?$.context=Po(K):(K=Sa(p)?Xd:Is.current,$.context=lf(d,K)),$.state=d.memoizedState,K=p.getDerivedStateFromProps,typeof K=="function"&&(JS(d,p,K,T),$.state=d.memoizedState),typeof p.getDerivedStateFromProps=="function"||typeof $.getSnapshotBeforeUpdate=="function"||typeof $.UNSAFE_componentWillMount!="function"&&typeof $.componentWillMount!="function"||(p=$.state,typeof $.componentWillMount=="function"&&$.componentWillMount(),typeof $.UNSAFE_componentWillMount=="function"&&$.UNSAFE_componentWillMount(),p!==$.state&&gv.enqueueReplaceState($,$.state,null),uv(d,T,$,R),$.state=d.memoizedState),typeof $.componentDidMount=="function"&&(d.flags|=4194308)}function gf(d,p){try{var T="",R=p;do T+=Be(R),R=R.return;while(R);var $=T}catch(K){$=`
Error generating stack: `+K.message+`
`+K.stack}return{value:d,source:p,stack:$,digest:null}}function eT(d,p,T){return{value:d,source:null,stack:T??null,digest:p??null}}function tT(d,p){try{console.error(p.value)}catch(T){setTimeout(function(){throw T})}}var _9=typeof WeakMap=="function"?WeakMap:Map;function CD(d,p,T){T=ec(-1,T),T.tag=3,T.payload={element:null};var R=p.value;return T.callback=function(){Tv||(Tv=!0,gT=R),tT(d,p)},T}function wD(d,p,T){T=ec(-1,T),T.tag=3;var R=d.type.getDerivedStateFromError;if(typeof R=="function"){var $=p.value;T.payload=function(){return R($)},T.callback=function(){tT(d,p)}}var K=d.stateNode;return K!==null&&typeof K.componentDidCatch=="function"&&(T.callback=function(){tT(d,p),typeof R!="function"&&(Zc===null?Zc=new Set([this]):Zc.add(this));var ce=p.stack;this.componentDidCatch(p.value,{componentStack:ce!==null?ce:""})}),T}function ED(d,p,T){var R=d.pingCache;if(R===null){R=d.pingCache=new _9;var $=new Set;R.set(p,$)}else $=R.get(p),$===void 0&&($=new Set,R.set(p,$));$.has(T)||($.add(T),d=L9.bind(null,d,p,T),p.then(d,d))}function kD(d){do{var p;if((p=d.tag===13)&&(p=d.memoizedState,p=p!==null?p.dehydrated!==null:!0),p)return d;d=d.return}while(d!==null);return null}function AD(d,p,T,R,$){return(d.mode&1)===0?(d===p?d.flags|=65536:(d.flags|=128,T.flags|=131072,T.flags&=-52805,T.tag===1&&(T.alternate===null?T.tag=17:(p=ec(-1,1),p.tag=2,Qc(T,p,1))),T.lanes|=1),d):(d.flags|=65536,d.lanes=$,d)}var x9=I.ReactCurrentOwner,Ta=!1;function qs(d,p,T,R){p.child=d===null?KA(p,null,T,R):hf(p,d.child,T,R)}function DD(d,p,T,R,$){T=T.render;var K=p.ref;return pf(p,$),R=qS(d,p,T,R,K,$),T=GS(),d!==null&&!Ta?(p.updateQueue=d.updateQueue,p.flags&=-2053,d.lanes&=~$,tc(d,p,$)):(Gn&&T&&DS(p),p.flags|=1,qs(d,p,R,$),p.child)}function ID(d,p,T,R,$){if(d===null){var K=T.type;return typeof K=="function"&&!TT(K)&&K.defaultProps===void 0&&T.compare===null&&T.defaultProps===void 0?(p.tag=15,p.type=K,PD(d,p,K,R,$)):(d=Dv(T.type,null,R,p,p.mode,$),d.ref=p.ref,d.return=p,p.child=d)}if(K=d.child,(d.lanes&$)===0){var ce=K.memoizedProps;if(T=T.compare,T=T!==null?T:Re,T(ce,R)&&d.ref===p.ref)return tc(d,p,$)}return p.flags|=1,d=nd(K,R),d.ref=p.ref,d.return=p,p.child=d}function PD(d,p,T,R,$){if(d!==null){var K=d.memoizedProps;if(Re(K,R)&&d.ref===p.ref)if(Ta=!1,p.pendingProps=R=K,(d.lanes&$)!==0)(d.flags&131072)!==0&&(Ta=!0);else return p.lanes=d.lanes,tc(d,p,$)}return rT(d,p,T,R,$)}function RD(d,p,T){var R=p.pendingProps,$=R.children,K=d!==null?d.memoizedState:null;if(R.mode==="hidden")if((p.mode&1)===0)p.memoizedState={baseLanes:0,cachePool:null,transitions:null},fn(yf,Za),Za|=T;else{if((T&1073741824)===0)return d=K!==null?K.baseLanes|T:T,p.lanes=p.childLanes=1073741824,p.memoizedState={baseLanes:d,cachePool:null,transitions:null},p.updateQueue=null,fn(yf,Za),Za|=d,null;p.memoizedState={baseLanes:0,cachePool:null,transitions:null},R=K!==null?K.baseLanes:T,fn(yf,Za),Za|=R}else K!==null?(R=K.baseLanes|T,p.memoizedState=null):R=T,fn(yf,Za),Za|=R;return qs(d,p,$,T),p.child}function LD(d,p){var T=p.ref;(d===null&&T!==null||d!==null&&d.ref!==T)&&(p.flags|=512,p.flags|=2097152)}function rT(d,p,T,R,$){var K=Sa(T)?Xd:Is.current;return K=lf(p,K),pf(p,$),T=qS(d,p,T,R,K,$),R=GS(),d!==null&&!Ta?(p.updateQueue=d.updateQueue,p.flags&=-2053,d.lanes&=~$,tc(d,p,$)):(Gn&&R&&DS(p),p.flags|=1,qs(d,p,T,$),p.child)}function OD(d,p,T,R,$){if(Sa(T)){var K=!0;ev(p)}else K=!1;if(pf(p,$),p.stateNode===null)yv(d,p),SD(p,T,R),ZS(p,T,R,$),R=!0;else if(d===null){var ce=p.stateNode,Ce=p.memoizedProps;ce.props=Ce;var Ie=ce.context,Je=T.contextType;typeof Je=="object"&&Je!==null?Je=Po(Je):(Je=Sa(T)?Xd:Is.current,Je=lf(p,Je));var kt=T.getDerivedStateFromProps,Rt=typeof kt=="function"||typeof ce.getSnapshotBeforeUpdate=="function";Rt||typeof ce.UNSAFE_componentWillReceiveProps!="function"&&typeof ce.componentWillReceiveProps!="function"||(Ce!==R||Ie!==Je)&&TD(p,ce,R,Je),Yc=!1;var Et=p.memoizedState;ce.state=Et,uv(p,R,ce,$),Ie=p.memoizedState,Ce!==R||Et!==Ie||ba.current||Yc?(typeof kt=="function"&&(JS(p,T,kt,R),Ie=p.memoizedState),(Ce=Yc||bD(p,T,Ce,R,Et,Ie,Je))?(Rt||typeof ce.UNSAFE_componentWillMount!="function"&&typeof ce.componentWillMount!="function"||(typeof ce.componentWillMount=="function"&&ce.componentWillMount(),typeof ce.UNSAFE_componentWillMount=="function"&&ce.UNSAFE_componentWillMount()),typeof ce.componentDidMount=="function"&&(p.flags|=4194308)):(typeof ce.componentDidMount=="function"&&(p.flags|=4194308),p.memoizedProps=R,p.memoizedState=Ie),ce.props=R,ce.state=Ie,ce.context=Je,R=Ce):(typeof ce.componentDidMount=="function"&&(p.flags|=4194308),R=!1)}else{ce=p.stateNode,YA(d,p),Ce=p.memoizedProps,Je=p.type===p.elementType?Ce:fl(p.type,Ce),ce.props=Je,Rt=p.pendingProps,Et=ce.context,Ie=T.contextType,typeof Ie=="object"&&Ie!==null?Ie=Po(Ie):(Ie=Sa(T)?Xd:Is.current,Ie=lf(p,Ie));var Xt=T.getDerivedStateFromProps;(kt=typeof Xt=="function"||typeof ce.getSnapshotBeforeUpdate=="function")||typeof ce.UNSAFE_componentWillReceiveProps!="function"&&typeof ce.componentWillReceiveProps!="function"||(Ce!==Rt||Et!==Ie)&&TD(p,ce,R,Ie),Yc=!1,Et=p.memoizedState,ce.state=Et,uv(p,R,ce,$);var or=p.memoizedState;Ce!==Rt||Et!==or||ba.current||Yc?(typeof Xt=="function"&&(JS(p,T,Xt,R),or=p.memoizedState),(Je=Yc||bD(p,T,Je,R,Et,or,Ie)||!1)?(kt||typeof ce.UNSAFE_componentWillUpdate!="function"&&typeof ce.componentWillUpdate!="function"||(typeof ce.componentWillUpdate=="function"&&ce.componentWillUpdate(R,or,Ie),typeof ce.UNSAFE_componentWillUpdate=="function"&&ce.UNSAFE_componentWillUpdate(R,or,Ie)),typeof ce.componentDidUpdate=="function"&&(p.flags|=4),typeof ce.getSnapshotBeforeUpdate=="function"&&(p.flags|=1024)):(typeof ce.componentDidUpdate!="function"||Ce===d.memoizedProps&&Et===d.memoizedState||(p.flags|=4),typeof ce.getSnapshotBeforeUpdate!="function"||Ce===d.memoizedProps&&Et===d.memoizedState||(p.flags|=1024),p.memoizedProps=R,p.memoizedState=or),ce.props=R,ce.state=or,ce.context=Ie,R=Je):(typeof ce.componentDidUpdate!="function"||Ce===d.memoizedProps&&Et===d.memoizedState||(p.flags|=4),typeof ce.getSnapshotBeforeUpdate!="function"||Ce===d.memoizedProps&&Et===d.memoizedState||(p.flags|=1024),R=!1)}return nT(d,p,T,R,K,$)}function nT(d,p,T,R,$,K){LD(d,p);var ce=(p.flags&128)!==0;if(!R&&!ce)return $&&UA(p,T,!1),tc(d,p,K);R=p.stateNode,x9.current=p;var Ce=ce&&typeof T.getDerivedStateFromError!="function"?null:R.render();return p.flags|=1,d!==null&&ce?(p.child=hf(p,d.child,null,K),p.child=hf(p,null,Ce,K)):qs(d,p,Ce,K),p.memoizedState=R.state,$&&UA(p,T,!0),p.child}function MD(d){var p=d.stateNode;p.pendingContext?BA(d,p.pendingContext,p.pendingContext!==p.context):p.context&&BA(d,p.context,!1),$S(d,p.containerInfo)}function FD(d,p,T,R,$){return df(),LS($),p.flags|=256,qs(d,p,T,R),p.child}var iT={dehydrated:null,treeContext:null,retryLane:0};function sT(d){return{baseLanes:d,cachePool:null,transitions:null}}function BD(d,p,T){var R=p.pendingProps,$=Zn.current,K=!1,ce=(p.flags&128)!==0,Ce;if((Ce=ce)||(Ce=d!==null&&d.memoizedState===null?!1:($&2)!==0),Ce?(K=!0,p.flags&=-129):(d===null||d.memoizedState!==null)&&($|=1),fn(Zn,$&1),d===null)return RS(p),d=p.memoizedState,d!==null&&(d=d.dehydrated,d!==null)?((p.mode&1)===0?p.lanes=1:d.data==="$!"?p.lanes=8:p.lanes=1073741824,null):(ce=R.children,d=R.fallback,K?(R=p.mode,K=p.child,ce={mode:"hidden",children:ce},(R&1)===0&&K!==null?(K.childLanes=0,K.pendingProps=ce):K=Iv(ce,R,0,null),d=sh(d,R,T,null),K.return=p,d.return=p,K.sibling=d,p.child=K,p.child.memoizedState=sT(T),p.memoizedState=iT,d):aT(p,ce));if($=d.memoizedState,$!==null&&(Ce=$.dehydrated,Ce!==null))return b9(d,p,ce,R,Ce,$,T);if(K){K=R.fallback,ce=p.mode,$=d.child,Ce=$.sibling;var Ie={mode:"hidden",children:R.children};return(ce&1)===0&&p.child!==$?(R=p.child,R.childLanes=0,R.pendingProps=Ie,p.deletions=null):(R=nd($,Ie),R.subtreeFlags=$.subtreeFlags&14680064),Ce!==null?K=nd(Ce,K):(K=sh(K,ce,T,null),K.flags|=2),K.return=p,R.return=p,R.sibling=K,p.child=R,R=K,K=p.child,ce=d.child.memoizedState,ce=ce===null?sT(T):{baseLanes:ce.baseLanes|T,cachePool:null,transitions:ce.transitions},K.memoizedState=ce,K.childLanes=d.childLanes&~T,p.memoizedState=iT,R}return K=d.child,d=K.sibling,R=nd(K,{mode:"visible",children:R.children}),(p.mode&1)===0&&(R.lanes=T),R.return=p,R.sibling=null,d!==null&&(T=p.deletions,T===null?(p.deletions=[d],p.flags|=16):T.push(d)),p.child=R,p.memoizedState=null,R}function aT(d,p){return p=Iv({mode:"visible",children:p},d.mode,0,null),p.return=d,d.child=p}function vv(d,p,T,R){return R!==null&&LS(R),hf(p,d.child,null,T),d=aT(p,p.pendingProps.children),d.flags|=2,p.memoizedState=null,d}function b9(d,p,T,R,$,K,ce){if(T)return p.flags&256?(p.flags&=-257,R=eT(Error(t(422))),vv(d,p,ce,R)):p.memoizedState!==null?(p.child=d.child,p.flags|=128,null):(K=R.fallback,$=p.mode,R=Iv({mode:"visible",children:R.children},$,0,null),K=sh(K,$,ce,null),K.flags|=2,R.return=p,K.return=p,R.sibling=K,p.child=R,(p.mode&1)!==0&&hf(p,d.child,null,ce),p.child.memoizedState=sT(ce),p.memoizedState=iT,K);if((p.mode&1)===0)return vv(d,p,ce,null);if($.data==="$!"){if(R=$.nextSibling&&$.nextSibling.dataset,R)var Ce=R.dgst;return R=Ce,K=Error(t(419)),R=eT(K,R,void 0),vv(d,p,ce,R)}if(Ce=(ce&d.childLanes)!==0,Ta||Ce){if(R=Gi,R!==null){switch(ce&-ce){case 4:$=2;break;case 16:$=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:$=32;break;case 536870912:$=268435456;break;default:$=0}$=($&(R.suspendedLanes|ce))!==0?0:$,$!==0&&$!==K.retryLane&&(K.retryLane=$,Zu(d,$),gl(R,d,$,-1))}return ST(),R=eT(Error(t(421))),vv(d,p,ce,R)}return $.data==="$?"?(p.flags|=128,p.child=d.child,p=O9.bind(null,d),$._reactRetry=p,null):(d=K.treeContext,Ja=J($.nextSibling),Qa=p,Gn=!0,hl=null,d!==null&&(Do[Io++]=Qu,Do[Io++]=Ju,Do[Io++]=Yd,Qu=d.id,Ju=d.overflow,Yd=p),p=aT(p,R.children),p.flags|=4096,p)}function ND(d,p,T){d.lanes|=p;var R=d.alternate;R!==null&&(R.lanes|=p),BS(d.return,p,T)}function oT(d,p,T,R,$){var K=d.memoizedState;K===null?d.memoizedState={isBackwards:p,rendering:null,renderingStartTime:0,last:R,tail:T,tailMode:$}:(K.isBackwards=p,K.rendering=null,K.renderingStartTime=0,K.last=R,K.tail=T,K.tailMode=$)}function UD(d,p,T){var R=p.pendingProps,$=R.revealOrder,K=R.tail;if(qs(d,p,R.children,T),R=Zn.current,(R&2)!==0)R=R&1|2,p.flags|=128;else{if(d!==null&&(d.flags&128)!==0)e:for(d=p.child;d!==null;){if(d.tag===13)d.memoizedState!==null&&ND(d,T,p);else if(d.tag===19)ND(d,T,p);else if(d.child!==null){d.child.return=d,d=d.child;continue}if(d===p)break e;for(;d.sibling===null;){if(d.return===null||d.return===p)break e;d=d.return}d.sibling.return=d.return,d=d.sibling}R&=1}if(fn(Zn,R),(p.mode&1)===0)p.memoizedState=null;else switch($){case"forwards":for(T=p.child,$=null;T!==null;)d=T.alternate,d!==null&&cv(d)===null&&($=T),T=T.sibling;T=$,T===null?($=p.child,p.child=null):($=T.sibling,T.sibling=null),oT(p,!1,$,T,K);break;case"backwards":for(T=null,$=p.child,p.child=null;$!==null;){if(d=$.alternate,d!==null&&cv(d)===null){p.child=$;break}d=$.sibling,$.sibling=T,T=$,$=d}oT(p,!0,T,null,K);break;case"together":oT(p,!1,null,null,void 0);break;default:p.memoizedState=null}return p.child}function yv(d,p){(p.mode&1)===0&&d!==null&&(d.alternate=null,p.alternate=null,p.flags|=2)}function tc(d,p,T){if(d!==null&&(p.dependencies=d.dependencies),th|=p.lanes,(T&p.childLanes)===0)return null;if(d!==null&&p.child!==d.child)throw Error(t(153));if(p.child!==null){for(d=p.child,T=nd(d,d.pendingProps),p.child=T,T.return=p;d.sibling!==null;)d=d.sibling,T=T.sibling=nd(d,d.pendingProps),T.return=p;T.sibling=null}return p.child}function S9(d,p,T){switch(p.tag){case 3:MD(p),df();break;case 5:ZA(p);break;case 1:Sa(p.type)&&ev(p);break;case 4:$S(p,p.stateNode.containerInfo);break;case 10:var R=p.type._context,$=p.memoizedProps.value;fn(av,R._currentValue),R._currentValue=$;break;case 13:if(R=p.memoizedState,R!==null)return R.dehydrated!==null?(fn(Zn,Zn.current&1),p.flags|=128,null):(T&p.child.childLanes)!==0?BD(d,p,T):(fn(Zn,Zn.current&1),d=tc(d,p,T),d!==null?d.sibling:null);fn(Zn,Zn.current&1);break;case 19:if(R=(T&p.childLanes)!==0,(d.flags&128)!==0){if(R)return UD(d,p,T);p.flags|=128}if($=p.memoizedState,$!==null&&($.rendering=null,$.tail=null,$.lastEffect=null),fn(Zn,Zn.current),R)break;return null;case 22:case 23:return p.lanes=0,RD(d,p,T)}return tc(d,p,T)}var $D,lT,jD,zD;$D=function(d,p){for(var T=p.child;T!==null;){if(T.tag===5||T.tag===6)d.appendChild(T.stateNode);else if(T.tag!==4&&T.child!==null){T.child.return=T,T=T.child;continue}if(T===p)break;for(;T.sibling===null;){if(T.return===null||T.return===p)return;T=T.return}T.sibling.return=T.return,T=T.sibling}},lT=function(){},jD=function(d,p,T,R){var $=d.memoizedProps;if($!==R){d=p.stateNode,Zd(Xl.current);var K=null;switch(T){case"input":$=Ue(d,$),R=Ue(d,R),K=[];break;case"select":$=ue({},$,{value:void 0}),R=ue({},R,{value:void 0}),K=[];break;case"textarea":$=ot(d,$),R=ot(d,R),K=[];break;default:typeof $.onClick!="function"&&typeof R.onClick=="function"&&(d.onclick=Kc)}Ur(T,R);var ce;T=null;for(Je in $)if(!R.hasOwnProperty(Je)&&$.hasOwnProperty(Je)&&$[Je]!=null)if(Je==="style"){var Ce=$[Je];for(ce in Ce)Ce.hasOwnProperty(ce)&&(T||(T={}),T[ce]="")}else Je!=="dangerouslySetInnerHTML"&&Je!=="children"&&Je!=="suppressContentEditableWarning"&&Je!=="suppressHydrationWarning"&&Je!=="autoFocus"&&(i.hasOwnProperty(Je)?K||(K=[]):(K=K||[]).push(Je,null));for(Je in R){var Ie=R[Je];if(Ce=$?.[Je],R.hasOwnProperty(Je)&&Ie!==Ce&&(Ie!=null||Ce!=null))if(Je==="style")if(Ce){for(ce in Ce)!Ce.hasOwnProperty(ce)||Ie&&Ie.hasOwnProperty(ce)||(T||(T={}),T[ce]="");for(ce in Ie)Ie.hasOwnProperty(ce)&&Ce[ce]!==Ie[ce]&&(T||(T={}),T[ce]=Ie[ce])}else T||(K||(K=[]),K.push(Je,T)),T=Ie;else Je==="dangerouslySetInnerHTML"?(Ie=Ie?Ie.__html:void 0,Ce=Ce?Ce.__html:void 0,Ie!=null&&Ce!==Ie&&(K=K||[]).push(Je,Ie)):Je==="children"?typeof Ie!="string"&&typeof Ie!="number"||(K=K||[]).push(Je,""+Ie):Je!=="suppressContentEditableWarning"&&Je!=="suppressHydrationWarning"&&(i.hasOwnProperty(Je)?(Ie!=null&&Je==="onScroll"&&yn("scroll",d),K||Ce===Ie||(K=[])):(K=K||[]).push(Je,Ie))}T&&(K=K||[]).push("style",T);var Je=K;(p.updateQueue=Je)&&(p.flags|=4)}},zD=function(d,p,T,R){T!==R&&(p.flags|=4)};function Im(d,p){if(!Gn)switch(d.tailMode){case"hidden":p=d.tail;for(var T=null;p!==null;)p.alternate!==null&&(T=p),p=p.sibling;T===null?d.tail=null:T.sibling=null;break;case"collapsed":T=d.tail;for(var R=null;T!==null;)T.alternate!==null&&(R=T),T=T.sibling;R===null?p||d.tail===null?d.tail=null:d.tail.sibling=null:R.sibling=null}}function Rs(d){var p=d.alternate!==null&&d.alternate.child===d.child,T=0,R=0;if(p)for(var $=d.child;$!==null;)T|=$.lanes|$.childLanes,R|=$.subtreeFlags&14680064,R|=$.flags&14680064,$.return=d,$=$.sibling;else for($=d.child;$!==null;)T|=$.lanes|$.childLanes,R|=$.subtreeFlags,R|=$.flags,$.return=d,$=$.sibling;return d.subtreeFlags|=R,d.childLanes=T,p}function T9(d,p,T){var R=p.pendingProps;switch(IS(p),p.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Rs(p),null;case 1:return Sa(p.type)&&Zg(),Rs(p),null;case 3:return R=p.stateNode,mf(),Yt(ba),Yt(Is),HS(),R.pendingContext&&(R.context=R.pendingContext,R.pendingContext=null),(d===null||d.child===null)&&(iv(p)?p.flags|=4:d===null||d.memoizedState.isDehydrated&&(p.flags&256)===0||(p.flags|=1024,hl!==null&&(_T(hl),hl=null))),lT(d,p),Rs(p),null;case 5:jS(p);var $=Zd(wm.current);if(T=p.type,d!==null&&p.stateNode!=null)jD(d,p,T,R,$),d.ref!==p.ref&&(p.flags|=512,p.flags|=2097152);else{if(!R){if(p.stateNode===null)throw Error(t(166));return Rs(p),null}if(d=Zd(Xl.current),iv(p)){R=p.stateNode,T=p.type;var K=p.memoizedProps;switch(R[ve]=p,R[Ve]=K,d=(p.mode&1)!==0,T){case"dialog":yn("cancel",R),yn("close",R);break;case"iframe":case"object":case"embed":yn("load",R);break;case"video":case"audio":for($=0;$<Wu.length;$++)yn(Wu[$],R);break;case"source":yn("error",R);break;case"img":case"image":case"link":yn("error",R),yn("load",R);break;case"details":yn("toggle",R);break;case"input":Pe(R,K),yn("invalid",R);break;case"select":R._wrapperState={wasMultiple:!!K.multiple},yn("invalid",R);break;case"textarea":yr(R,K),yn("invalid",R)}Ur(T,K),$=null;for(var ce in K)if(K.hasOwnProperty(ce)){var Ce=K[ce];ce==="children"?typeof Ce=="string"?R.textContent!==Ce&&(K.suppressHydrationWarning!==!0&&Gc(R.textContent,Ce,d),$=["children",Ce]):typeof Ce=="number"&&R.textContent!==""+Ce&&(K.suppressHydrationWarning!==!0&&Gc(R.textContent,Ce,d),$=["children",""+Ce]):i.hasOwnProperty(ce)&&Ce!=null&&ce==="onScroll"&&yn("scroll",R)}switch(T){case"input":Ot(R),lt(R,K,!0);break;case"textarea":Ot(R),jr(R);break;case"select":case"option":break;default:typeof K.onClick=="function"&&(R.onclick=Kc)}R=$,p.updateQueue=R,R!==null&&(p.flags|=4)}else{ce=$.nodeType===9?$:$.ownerDocument,d==="http://www.w3.org/1999/xhtml"&&(d=ur(T)),d==="http://www.w3.org/1999/xhtml"?T==="script"?(d=ce.createElement("div"),d.innerHTML="<script><\/script>",d=d.removeChild(d.firstChild)):typeof R.is=="string"?d=ce.createElement(T,{is:R.is}):(d=ce.createElement(T),T==="select"&&(ce=d,R.multiple?ce.multiple=!0:R.size&&(ce.size=R.size))):d=ce.createElementNS(d,T),d[ve]=p,d[Ve]=R,$D(d,p,!1,!1),p.stateNode=d;e:{switch(ce=qr(T,R),T){case"dialog":yn("cancel",d),yn("close",d),$=R;break;case"iframe":case"object":case"embed":yn("load",d),$=R;break;case"video":case"audio":for($=0;$<Wu.length;$++)yn(Wu[$],d);$=R;break;case"source":yn("error",d),$=R;break;case"img":case"image":case"link":yn("error",d),yn("load",d),$=R;break;case"details":yn("toggle",d),$=R;break;case"input":Pe(d,R),$=Ue(d,R),yn("invalid",d);break;case"option":$=R;break;case"select":d._wrapperState={wasMultiple:!!R.multiple},$=ue({},R,{value:void 0}),yn("invalid",d);break;case"textarea":yr(d,R),$=ot(d,R),yn("invalid",d);break;default:$=R}Ur(T,$),Ce=$;for(K in Ce)if(Ce.hasOwnProperty(K)){var Ie=Ce[K];K==="style"?Vt(d,Ie):K==="dangerouslySetInnerHTML"?(Ie=Ie?Ie.__html:void 0,Ie!=null&&Tr(d,Ie)):K==="children"?typeof Ie=="string"?(T!=="textarea"||Ie!=="")&&Nr(d,Ie):typeof Ie=="number"&&Nr(d,""+Ie):K!=="suppressContentEditableWarning"&&K!=="suppressHydrationWarning"&&K!=="autoFocus"&&(i.hasOwnProperty(K)?Ie!=null&&K==="onScroll"&&yn("scroll",d):Ie!=null&&D(d,K,Ie,ce))}switch(T){case"input":Ot(d),lt(d,R,!1);break;case"textarea":Ot(d),jr(d);break;case"option":R.value!=null&&d.setAttribute("value",""+Ke(R.value));break;case"select":d.multiple=!!R.multiple,K=R.value,K!=null?St(d,!!R.multiple,K,!1):R.defaultValue!=null&&St(d,!!R.multiple,R.defaultValue,!0);break;default:typeof $.onClick=="function"&&(d.onclick=Kc)}switch(T){case"button":case"input":case"select":case"textarea":R=!!R.autoFocus;break e;case"img":R=!0;break e;default:R=!1}}R&&(p.flags|=4)}p.ref!==null&&(p.flags|=512,p.flags|=2097152)}return Rs(p),null;case 6:if(d&&p.stateNode!=null)zD(d,p,d.memoizedProps,R);else{if(typeof R!="string"&&p.stateNode===null)throw Error(t(166));if(T=Zd(wm.current),Zd(Xl.current),iv(p)){if(R=p.stateNode,T=p.memoizedProps,R[ve]=p,(K=R.nodeValue!==T)&&(d=Qa,d!==null))switch(d.tag){case 3:Gc(R.nodeValue,T,(d.mode&1)!==0);break;case 5:d.memoizedProps.suppressHydrationWarning!==!0&&Gc(R.nodeValue,T,(d.mode&1)!==0)}K&&(p.flags|=4)}else R=(T.nodeType===9?T:T.ownerDocument).createTextNode(R),R[ve]=p,p.stateNode=R}return Rs(p),null;case 13:if(Yt(Zn),R=p.memoizedState,d===null||d.memoizedState!==null&&d.memoizedState.dehydrated!==null){if(Gn&&Ja!==null&&(p.mode&1)!==0&&(p.flags&128)===0)WA(),df(),p.flags|=98560,K=!1;else if(K=iv(p),R!==null&&R.dehydrated!==null){if(d===null){if(!K)throw Error(t(318));if(K=p.memoizedState,K=K!==null?K.dehydrated:null,!K)throw Error(t(317));K[ve]=p}else df(),(p.flags&128)===0&&(p.memoizedState=null),p.flags|=4;Rs(p),K=!1}else hl!==null&&(_T(hl),hl=null),K=!0;if(!K)return p.flags&65536?p:null}return(p.flags&128)!==0?(p.lanes=T,p):(R=R!==null,R!==(d!==null&&d.memoizedState!==null)&&R&&(p.child.flags|=8192,(p.mode&1)!==0&&(d===null||(Zn.current&1)!==0?Oi===0&&(Oi=3):ST())),p.updateQueue!==null&&(p.flags|=4),Rs(p),null);case 4:return mf(),lT(d,p),d===null&&pi(p.stateNode.containerInfo),Rs(p),null;case 10:return FS(p.type._context),Rs(p),null;case 17:return Sa(p.type)&&Zg(),Rs(p),null;case 19:if(Yt(Zn),K=p.memoizedState,K===null)return Rs(p),null;if(R=(p.flags&128)!==0,ce=K.rendering,ce===null)if(R)Im(K,!1);else{if(Oi!==0||d!==null&&(d.flags&128)!==0)for(d=p.child;d!==null;){if(ce=cv(d),ce!==null){for(p.flags|=128,Im(K,!1),R=ce.updateQueue,R!==null&&(p.updateQueue=R,p.flags|=4),p.subtreeFlags=0,R=T,T=p.child;T!==null;)K=T,d=R,K.flags&=14680066,ce=K.alternate,ce===null?(K.childLanes=0,K.lanes=d,K.child=null,K.subtreeFlags=0,K.memoizedProps=null,K.memoizedState=null,K.updateQueue=null,K.dependencies=null,K.stateNode=null):(K.childLanes=ce.childLanes,K.lanes=ce.lanes,K.child=ce.child,K.subtreeFlags=0,K.deletions=null,K.memoizedProps=ce.memoizedProps,K.memoizedState=ce.memoizedState,K.updateQueue=ce.updateQueue,K.type=ce.type,d=ce.dependencies,K.dependencies=d===null?null:{lanes:d.lanes,firstContext:d.firstContext}),T=T.sibling;return fn(Zn,Zn.current&1|2),p.child}d=d.sibling}K.tail!==null&&tn()>_f&&(p.flags|=128,R=!0,Im(K,!1),p.lanes=4194304)}else{if(!R)if(d=cv(ce),d!==null){if(p.flags|=128,R=!0,T=d.updateQueue,T!==null&&(p.updateQueue=T,p.flags|=4),Im(K,!0),K.tail===null&&K.tailMode==="hidden"&&!ce.alternate&&!Gn)return Rs(p),null}else 2*tn()-K.renderingStartTime>_f&&T!==1073741824&&(p.flags|=128,R=!0,Im(K,!1),p.lanes=4194304);K.isBackwards?(ce.sibling=p.child,p.child=ce):(T=K.last,T!==null?T.sibling=ce:p.child=ce,K.last=ce)}return K.tail!==null?(p=K.tail,K.rendering=p,K.tail=p.sibling,K.renderingStartTime=tn(),p.sibling=null,T=Zn.current,fn(Zn,R?T&1|2:T&1),p):(Rs(p),null);case 22:case 23:return bT(),R=p.memoizedState!==null,d!==null&&d.memoizedState!==null!==R&&(p.flags|=8192),R&&(p.mode&1)!==0?(Za&1073741824)!==0&&(Rs(p),p.subtreeFlags&6&&(p.flags|=8192)):Rs(p),null;case 24:return null;case 25:return null}throw Error(t(156,p.tag))}function C9(d,p){switch(IS(p),p.tag){case 1:return Sa(p.type)&&Zg(),d=p.flags,d&65536?(p.flags=d&-65537|128,p):null;case 3:return mf(),Yt(ba),Yt(Is),HS(),d=p.flags,(d&65536)!==0&&(d&128)===0?(p.flags=d&-65537|128,p):null;case 5:return jS(p),null;case 13:if(Yt(Zn),d=p.memoizedState,d!==null&&d.dehydrated!==null){if(p.alternate===null)throw Error(t(340));df()}return d=p.flags,d&65536?(p.flags=d&-65537|128,p):null;case 19:return Yt(Zn),null;case 4:return mf(),null;case 10:return FS(p.type._context),null;case 22:case 23:return bT(),null;case 24:return null;default:return null}}var _v=!1,Ls=!1,w9=typeof WeakSet=="function"?WeakSet:Set,Jt=null;function vf(d,p){var T=d.ref;if(T!==null)if(typeof T=="function")try{T(null)}catch(R){si(d,p,R)}else T.current=null}function uT(d,p,T){try{T()}catch(R){si(d,p,R)}}var HD=!1;function E9(d,p){if(Ku=nl,d=tt(),sr(d)){if("selectionStart"in d)var T={start:d.selectionStart,end:d.selectionEnd};else e:{T=(T=d.ownerDocument)&&T.defaultView||window;var R=T.getSelection&&T.getSelection();if(R&&R.rangeCount!==0){T=R.anchorNode;var $=R.anchorOffset,K=R.focusNode;R=R.focusOffset;try{T.nodeType,K.nodeType}catch{T=null;break e}var ce=0,Ce=-1,Ie=-1,Je=0,kt=0,Rt=d,Et=null;t:for(;;){for(var Xt;Rt!==T||$!==0&&Rt.nodeType!==3||(Ce=ce+$),Rt!==K||R!==0&&Rt.nodeType!==3||(Ie=ce+R),Rt.nodeType===3&&(ce+=Rt.nodeValue.length),(Xt=Rt.firstChild)!==null;)Et=Rt,Rt=Xt;for(;;){if(Rt===d)break t;if(Et===T&&++Je===$&&(Ce=ce),Et===K&&++kt===R&&(Ie=ce),(Xt=Rt.nextSibling)!==null)break;Rt=Et,Et=Rt.parentNode}Rt=Xt}T=Ce===-1||Ie===-1?null:{start:Ce,end:Ie}}else T=null}T=T||{start:0,end:0}}else T=null;for(f={focusedElem:d,selectionRange:T},nl=!1,Jt=p;Jt!==null;)if(p=Jt,d=p.child,(p.subtreeFlags&1028)!==0&&d!==null)d.return=p,Jt=d;else for(;Jt!==null;){p=Jt;try{var or=p.alternate;if((p.flags&1024)!==0)switch(p.tag){case 0:case 11:case 15:break;case 1:if(or!==null){var lr=or.memoizedProps,gi=or.memoizedState,ze=p.stateNode,Me=ze.getSnapshotBeforeUpdate(p.elementType===p.type?lr:fl(p.type,lr),gi);ze.__reactInternalSnapshotBeforeUpdate=Me}break;case 3:var We=p.stateNode.containerInfo;We.nodeType===1?We.textContent="":We.nodeType===9&&We.documentElement&&We.removeChild(We.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(Bt){si(p,p.return,Bt)}if(d=p.sibling,d!==null){d.return=p.return,Jt=d;break}Jt=p.return}return or=HD,HD=!1,or}function Pm(d,p,T){var R=p.updateQueue;if(R=R!==null?R.lastEffect:null,R!==null){var $=R=R.next;do{if(($.tag&d)===d){var K=$.destroy;$.destroy=void 0,K!==void 0&&uT(p,T,K)}$=$.next}while($!==R)}}function xv(d,p){if(p=p.updateQueue,p=p!==null?p.lastEffect:null,p!==null){var T=p=p.next;do{if((T.tag&d)===d){var R=T.create;T.destroy=R()}T=T.next}while(T!==p)}}function cT(d){var p=d.ref;if(p!==null){var T=d.stateNode;switch(d.tag){case 5:d=T;break;default:d=T}typeof p=="function"?p(d):p.current=d}}function VD(d){var p=d.alternate;p!==null&&(d.alternate=null,VD(p)),d.child=null,d.deletions=null,d.sibling=null,d.tag===5&&(p=d.stateNode,p!==null&&(delete p[ve],delete p[Ve],delete p[bt],delete p[zt],delete p[Vr])),d.stateNode=null,d.return=null,d.dependencies=null,d.memoizedProps=null,d.memoizedState=null,d.pendingProps=null,d.stateNode=null,d.updateQueue=null}function WD(d){return d.tag===5||d.tag===3||d.tag===4}function qD(d){e:for(;;){for(;d.sibling===null;){if(d.return===null||WD(d.return))return null;d=d.return}for(d.sibling.return=d.return,d=d.sibling;d.tag!==5&&d.tag!==6&&d.tag!==18;){if(d.flags&2||d.child===null||d.tag===4)continue e;d.child.return=d,d=d.child}if(!(d.flags&2))return d.stateNode}}function dT(d,p,T){var R=d.tag;if(R===5||R===6)d=d.stateNode,p?T.nodeType===8?T.parentNode.insertBefore(d,p):T.insertBefore(d,p):(T.nodeType===8?(p=T.parentNode,p.insertBefore(d,T)):(p=T,p.appendChild(d)),T=T._reactRootContainer,T!=null||p.onclick!==null||(p.onclick=Kc));else if(R!==4&&(d=d.child,d!==null))for(dT(d,p,T),d=d.sibling;d!==null;)dT(d,p,T),d=d.sibling}function hT(d,p,T){var R=d.tag;if(R===5||R===6)d=d.stateNode,p?T.insertBefore(d,p):T.appendChild(d);else if(R!==4&&(d=d.child,d!==null))for(hT(d,p,T),d=d.sibling;d!==null;)hT(d,p,T),d=d.sibling}var ds=null,pl=!1;function Jc(d,p,T){for(T=T.child;T!==null;)GD(d,p,T),T=T.sibling}function GD(d,p,T){if(et&&typeof et.onCommitFiberUnmount=="function")try{et.onCommitFiberUnmount(Qe,T)}catch{}switch(T.tag){case 5:Ls||vf(T,p);case 6:var R=ds,$=pl;ds=null,Jc(d,p,T),ds=R,pl=$,ds!==null&&(pl?(d=ds,T=T.stateNode,d.nodeType===8?d.parentNode.removeChild(T):d.removeChild(T)):ds.removeChild(T.stateNode));break;case 18:ds!==null&&(pl?(d=ds,T=T.stateNode,d.nodeType===8?Y(d.parentNode,T):d.nodeType===1&&Y(d,T),os(d)):Y(ds,T.stateNode));break;case 4:R=ds,$=pl,ds=T.stateNode.containerInfo,pl=!0,Jc(d,p,T),ds=R,pl=$;break;case 0:case 11:case 14:case 15:if(!Ls&&(R=T.updateQueue,R!==null&&(R=R.lastEffect,R!==null))){$=R=R.next;do{var K=$,ce=K.destroy;K=K.tag,ce!==void 0&&((K&2)!==0||(K&4)!==0)&&uT(T,p,ce),$=$.next}while($!==R)}Jc(d,p,T);break;case 1:if(!Ls&&(vf(T,p),R=T.stateNode,typeof R.componentWillUnmount=="function"))try{R.props=T.memoizedProps,R.state=T.memoizedState,R.componentWillUnmount()}catch(Ce){si(T,p,Ce)}Jc(d,p,T);break;case 21:Jc(d,p,T);break;case 22:T.mode&1?(Ls=(R=Ls)||T.memoizedState!==null,Jc(d,p,T),Ls=R):Jc(d,p,T);break;default:Jc(d,p,T)}}function KD(d){var p=d.updateQueue;if(p!==null){d.updateQueue=null;var T=d.stateNode;T===null&&(T=d.stateNode=new w9),p.forEach(function(R){var $=M9.bind(null,d,R);T.has(R)||(T.add(R),R.then($,$))})}}function ml(d,p){var T=p.deletions;if(T!==null)for(var R=0;R<T.length;R++){var $=T[R];try{var K=d,ce=p,Ce=ce;e:for(;Ce!==null;){switch(Ce.tag){case 5:ds=Ce.stateNode,pl=!1;break e;case 3:ds=Ce.stateNode.containerInfo,pl=!0;break e;case 4:ds=Ce.stateNode.containerInfo,pl=!0;break e}Ce=Ce.return}if(ds===null)throw Error(t(160));GD(K,ce,$),ds=null,pl=!1;var Ie=$.alternate;Ie!==null&&(Ie.return=null),$.return=null}catch(Je){si($,p,Je)}}if(p.subtreeFlags&12854)for(p=p.child;p!==null;)XD(p,d),p=p.sibling}function XD(d,p){var T=d.alternate,R=d.flags;switch(d.tag){case 0:case 11:case 14:case 15:if(ml(p,d),Ql(d),R&4){try{Pm(3,d,d.return),xv(3,d)}catch(lr){si(d,d.return,lr)}try{Pm(5,d,d.return)}catch(lr){si(d,d.return,lr)}}break;case 1:ml(p,d),Ql(d),R&512&&T!==null&&vf(T,T.return);break;case 5:if(ml(p,d),Ql(d),R&512&&T!==null&&vf(T,T.return),d.flags&32){var $=d.stateNode;try{Nr($,"")}catch(lr){si(d,d.return,lr)}}if(R&4&&($=d.stateNode,$!=null)){var K=d.memoizedProps,ce=T!==null?T.memoizedProps:K,Ce=d.type,Ie=d.updateQueue;if(d.updateQueue=null,Ie!==null)try{Ce==="input"&&K.type==="radio"&&K.name!=null&&$e($,K),qr(Ce,ce);var Je=qr(Ce,K);for(ce=0;ce<Ie.length;ce+=2){var kt=Ie[ce],Rt=Ie[ce+1];kt==="style"?Vt($,Rt):kt==="dangerouslySetInnerHTML"?Tr($,Rt):kt==="children"?Nr($,Rt):D($,kt,Rt,Je)}switch(Ce){case"input":rt($,K);break;case"textarea":pr($,K);break;case"select":var Et=$._wrapperState.wasMultiple;$._wrapperState.wasMultiple=!!K.multiple;var Xt=K.value;Xt!=null?St($,!!K.multiple,Xt,!1):Et!==!!K.multiple&&(K.defaultValue!=null?St($,!!K.multiple,K.defaultValue,!0):St($,!!K.multiple,K.multiple?[]:"",!1))}$[Ve]=K}catch(lr){si(d,d.return,lr)}}break;case 6:if(ml(p,d),Ql(d),R&4){if(d.stateNode===null)throw Error(t(162));$=d.stateNode,K=d.memoizedProps;try{$.nodeValue=K}catch(lr){si(d,d.return,lr)}}break;case 3:if(ml(p,d),Ql(d),R&4&&T!==null&&T.memoizedState.isDehydrated)try{os(p.containerInfo)}catch(lr){si(d,d.return,lr)}break;case 4:ml(p,d),Ql(d);break;case 13:ml(p,d),Ql(d),$=d.child,$.flags&8192&&(K=$.memoizedState!==null,$.stateNode.isHidden=K,!K||$.alternate!==null&&$.alternate.memoizedState!==null||(mT=tn())),R&4&&KD(d);break;case 22:if(kt=T!==null&&T.memoizedState!==null,d.mode&1?(Ls=(Je=Ls)||kt,ml(p,d),Ls=Je):ml(p,d),Ql(d),R&8192){if(Je=d.memoizedState!==null,(d.stateNode.isHidden=Je)&&!kt&&(d.mode&1)!==0)for(Jt=d,kt=d.child;kt!==null;){for(Rt=Jt=kt;Jt!==null;){switch(Et=Jt,Xt=Et.child,Et.tag){case 0:case 11:case 14:case 15:Pm(4,Et,Et.return);break;case 1:vf(Et,Et.return);var or=Et.stateNode;if(typeof or.componentWillUnmount=="function"){R=Et,T=Et.return;try{p=R,or.props=p.memoizedProps,or.state=p.memoizedState,or.componentWillUnmount()}catch(lr){si(R,T,lr)}}break;case 5:vf(Et,Et.return);break;case 22:if(Et.memoizedState!==null){JD(Rt);continue}}Xt!==null?(Xt.return=Et,Jt=Xt):JD(Rt)}kt=kt.sibling}e:for(kt=null,Rt=d;;){if(Rt.tag===5){if(kt===null){kt=Rt;try{$=Rt.stateNode,Je?(K=$.style,typeof K.setProperty=="function"?K.setProperty("display","none","important"):K.display="none"):(Ce=Rt.stateNode,Ie=Rt.memoizedProps.style,ce=Ie!=null&&Ie.hasOwnProperty("display")?Ie.display:null,Ce.style.display=An("display",ce))}catch(lr){si(d,d.return,lr)}}}else if(Rt.tag===6){if(kt===null)try{Rt.stateNode.nodeValue=Je?"":Rt.memoizedProps}catch(lr){si(d,d.return,lr)}}else if((Rt.tag!==22&&Rt.tag!==23||Rt.memoizedState===null||Rt===d)&&Rt.child!==null){Rt.child.return=Rt,Rt=Rt.child;continue}if(Rt===d)break e;for(;Rt.sibling===null;){if(Rt.return===null||Rt.return===d)break e;kt===Rt&&(kt=null),Rt=Rt.return}kt===Rt&&(kt=null),Rt.sibling.return=Rt.return,Rt=Rt.sibling}}break;case 19:ml(p,d),Ql(d),R&4&&KD(d);break;case 21:break;default:ml(p,d),Ql(d)}}function Ql(d){var p=d.flags;if(p&2){try{e:{for(var T=d.return;T!==null;){if(WD(T)){var R=T;break e}T=T.return}throw Error(t(160))}switch(R.tag){case 5:var $=R.stateNode;R.flags&32&&(Nr($,""),R.flags&=-33);var K=qD(d);hT(d,K,$);break;case 3:case 4:var ce=R.stateNode.containerInfo,Ce=qD(d);dT(d,Ce,ce);break;default:throw Error(t(161))}}catch(Ie){si(d,d.return,Ie)}d.flags&=-3}p&4096&&(d.flags&=-4097)}function k9(d,p,T){Jt=d,YD(d)}function YD(d,p,T){for(var R=(d.mode&1)!==0;Jt!==null;){var $=Jt,K=$.child;if($.tag===22&&R){var ce=$.memoizedState!==null||_v;if(!ce){var Ce=$.alternate,Ie=Ce!==null&&Ce.memoizedState!==null||Ls;Ce=_v;var Je=Ls;if(_v=ce,(Ls=Ie)&&!Je)for(Jt=$;Jt!==null;)ce=Jt,Ie=ce.child,ce.tag===22&&ce.memoizedState!==null?ZD($):Ie!==null?(Ie.return=ce,Jt=Ie):ZD($);for(;K!==null;)Jt=K,YD(K),K=K.sibling;Jt=$,_v=Ce,Ls=Je}QD(d)}else($.subtreeFlags&8772)!==0&&K!==null?(K.return=$,Jt=K):QD(d)}}function QD(d){for(;Jt!==null;){var p=Jt;if((p.flags&8772)!==0){var T=p.alternate;try{if((p.flags&8772)!==0)switch(p.tag){case 0:case 11:case 15:Ls||xv(5,p);break;case 1:var R=p.stateNode;if(p.flags&4&&!Ls)if(T===null)R.componentDidMount();else{var $=p.elementType===p.type?T.memoizedProps:fl(p.type,T.memoizedProps);R.componentDidUpdate($,T.memoizedState,R.__reactInternalSnapshotBeforeUpdate)}var K=p.updateQueue;K!==null&&JA(p,K,R);break;case 3:var ce=p.updateQueue;if(ce!==null){if(T=null,p.child!==null)switch(p.child.tag){case 5:T=p.child.stateNode;break;case 1:T=p.child.stateNode}JA(p,ce,T)}break;case 5:var Ce=p.stateNode;if(T===null&&p.flags&4){T=Ce;var Ie=p.memoizedProps;switch(p.type){case"button":case"input":case"select":case"textarea":Ie.autoFocus&&T.focus();break;case"img":Ie.src&&(T.src=Ie.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(p.memoizedState===null){var Je=p.alternate;if(Je!==null){var kt=Je.memoizedState;if(kt!==null){var Rt=kt.dehydrated;Rt!==null&&os(Rt)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}Ls||p.flags&512&&cT(p)}catch(Et){si(p,p.return,Et)}}if(p===d){Jt=null;break}if(T=p.sibling,T!==null){T.return=p.return,Jt=T;break}Jt=p.return}}function JD(d){for(;Jt!==null;){var p=Jt;if(p===d){Jt=null;break}var T=p.sibling;if(T!==null){T.return=p.return,Jt=T;break}Jt=p.return}}function ZD(d){for(;Jt!==null;){var p=Jt;try{switch(p.tag){case 0:case 11:case 15:var T=p.return;try{xv(4,p)}catch(Ie){si(p,T,Ie)}break;case 1:var R=p.stateNode;if(typeof R.componentDidMount=="function"){var $=p.return;try{R.componentDidMount()}catch(Ie){si(p,$,Ie)}}var K=p.return;try{cT(p)}catch(Ie){si(p,K,Ie)}break;case 5:var ce=p.return;try{cT(p)}catch(Ie){si(p,ce,Ie)}}}catch(Ie){si(p,p.return,Ie)}if(p===d){Jt=null;break}var Ce=p.sibling;if(Ce!==null){Ce.return=p.return,Jt=Ce;break}Jt=p.return}}var A9=Math.ceil,bv=I.ReactCurrentDispatcher,fT=I.ReactCurrentOwner,Lo=I.ReactCurrentBatchConfig,hn=0,Gi=null,Ci=null,hs=0,Za=0,yf=xa(0),Oi=0,Rm=null,th=0,Sv=0,pT=0,Lm=null,Ca=null,mT=0,_f=1/0,rc=null,Tv=!1,gT=null,Zc=null,Cv=!1,ed=null,wv=0,Om=0,vT=null,Ev=-1,kv=0;function Gs(){return(hn&6)!==0?tn():Ev!==-1?Ev:Ev=tn()}function td(d){return(d.mode&1)===0?1:(hn&2)!==0&&hs!==0?hs&-hs:d9.transition!==null?(kv===0&&(kv=Pc()),kv):(d=Hr,d!==0||(d=window.event,d=d===void 0?16:zs(d.type)),d)}function gl(d,p,T,R){if(50<Om)throw Om=0,vT=null,Error(t(185));Ui(d,T,R),((hn&2)===0||d!==Gi)&&(d===Gi&&((hn&2)===0&&(Sv|=T),Oi===4&&rd(d,hs)),wa(d,R),T===1&&hn===0&&(p.mode&1)===0&&(_f=tn()+500,tv&&Xc()))}function wa(d,p){var T=d.callbackNode;$n(d,p);var R=Br(d,d===Gi?hs:0);if(R===0)T!==null&&bi(T),d.callbackNode=null,d.callbackPriority=0;else if(p=R&-R,d.callbackPriority!==p){if(T!=null&&bi(T),p===1)d.tag===0?c9(tI.bind(null,d)):$A(tI.bind(null,d)),P(function(){(hn&6)===0&&Xc()}),T=null;else{switch(as(R)){case 1:T=di;break;case 4:T=ii;break;case 16:T=Dr;break;case 536870912:T=Ne;break;default:T=Dr}T=uI(T,eI.bind(null,d))}d.callbackPriority=p,d.callbackNode=T}}function eI(d,p){if(Ev=-1,kv=0,(hn&6)!==0)throw Error(t(327));var T=d.callbackNode;if(xf()&&d.callbackNode!==T)return null;var R=Br(d,d===Gi?hs:0);if(R===0)return null;if((R&30)!==0||(R&d.expiredLanes)!==0||p)p=Av(d,R);else{p=R;var $=hn;hn|=2;var K=nI();(Gi!==d||hs!==p)&&(rc=null,_f=tn()+500,nh(d,p));do try{P9();break}catch(Ce){rI(d,Ce)}while(!0);MS(),bv.current=K,hn=$,Ci!==null?p=0:(Gi=null,hs=0,p=Oi)}if(p!==0){if(p===2&&($=Cs(d),$!==0&&(R=$,p=yT(d,$))),p===1)throw T=Rm,nh(d,0),rd(d,R),wa(d,tn()),T;if(p===6)rd(d,R);else{if($=d.current.alternate,(R&30)===0&&!D9($)&&(p=Av(d,R),p===2&&(K=Cs(d),K!==0&&(R=K,p=yT(d,K))),p===1))throw T=Rm,nh(d,0),rd(d,R),wa(d,tn()),T;switch(d.finishedWork=$,d.finishedLanes=R,p){case 0:case 1:throw Error(t(345));case 2:ih(d,Ca,rc);break;case 3:if(rd(d,R),(R&130023424)===R&&(p=mT+500-tn(),10<p)){if(Br(d,0)!==0)break;if($=d.suspendedLanes,($&R)!==R){Gs(),d.pingedLanes|=d.suspendedLanes&$;break}d.timeoutHandle=S(ih.bind(null,d,Ca,rc),p);break}ih(d,Ca,rc);break;case 4:if(rd(d,R),(R&4194240)===R)break;for(p=d.eventTimes,$=-1;0<R;){var ce=31-wt(R);K=1<<ce,ce=p[ce],ce>$&&($=ce),R&=~K}if(R=$,R=tn()-R,R=(120>R?120:480>R?480:1080>R?1080:1920>R?1920:3e3>R?3e3:4320>R?4320:1960*A9(R/1960))-R,10<R){d.timeoutHandle=S(ih.bind(null,d,Ca,rc),R);break}ih(d,Ca,rc);break;case 5:ih(d,Ca,rc);break;default:throw Error(t(329))}}}return wa(d,tn()),d.callbackNode===T?eI.bind(null,d):null}function yT(d,p){var T=Lm;return d.current.memoizedState.isDehydrated&&(nh(d,p).flags|=256),d=Av(d,p),d!==2&&(p=Ca,Ca=T,p!==null&&_T(p)),d}function _T(d){Ca===null?Ca=d:Ca.push.apply(Ca,d)}function D9(d){for(var p=d;;){if(p.flags&16384){var T=p.updateQueue;if(T!==null&&(T=T.stores,T!==null))for(var R=0;R<T.length;R++){var $=T[R],K=$.getSnapshot;$=$.value;try{if(!we(K(),$))return!1}catch{return!1}}}if(T=p.child,p.subtreeFlags&16384&&T!==null)T.return=p,p=T;else{if(p===d)break;for(;p.sibling===null;){if(p.return===null||p.return===d)return!0;p=p.return}p.sibling.return=p.return,p=p.sibling}}return!0}function rd(d,p){for(p&=~pT,p&=~Sv,d.suspendedLanes|=p,d.pingedLanes&=~p,d=d.expirationTimes;0<p;){var T=31-wt(p),R=1<<T;d[T]=-1,p&=~R}}function tI(d){if((hn&6)!==0)throw Error(t(327));xf();var p=Br(d,0);if((p&1)===0)return wa(d,tn()),null;var T=Av(d,p);if(d.tag!==0&&T===2){var R=Cs(d);R!==0&&(p=R,T=yT(d,R))}if(T===1)throw T=Rm,nh(d,0),rd(d,p),wa(d,tn()),T;if(T===6)throw Error(t(345));return d.finishedWork=d.current.alternate,d.finishedLanes=p,ih(d,Ca,rc),wa(d,tn()),null}function xT(d,p){var T=hn;hn|=1;try{return d(p)}finally{hn=T,hn===0&&(_f=tn()+500,tv&&Xc())}}function rh(d){ed!==null&&ed.tag===0&&(hn&6)===0&&xf();var p=hn;hn|=1;var T=Lo.transition,R=Hr;try{if(Lo.transition=null,Hr=1,d)return d()}finally{Hr=R,Lo.transition=T,hn=p,(hn&6)===0&&Xc()}}function bT(){Za=yf.current,Yt(yf)}function nh(d,p){d.finishedWork=null,d.finishedLanes=0;var T=d.timeoutHandle;if(T!==-1&&(d.timeoutHandle=-1,b(T)),Ci!==null)for(T=Ci.return;T!==null;){var R=T;switch(IS(R),R.tag){case 1:R=R.type.childContextTypes,R!=null&&Zg();break;case 3:mf(),Yt(ba),Yt(Is),HS();break;case 5:jS(R);break;case 4:mf();break;case 13:Yt(Zn);break;case 19:Yt(Zn);break;case 10:FS(R.type._context);break;case 22:case 23:bT()}T=T.return}if(Gi=d,Ci=d=nd(d.current,null),hs=Za=p,Oi=0,Rm=null,pT=Sv=th=0,Ca=Lm=null,Jd!==null){for(p=0;p<Jd.length;p++)if(T=Jd[p],R=T.interleaved,R!==null){T.interleaved=null;var $=R.next,K=T.pending;if(K!==null){var ce=K.next;K.next=$,R.next=ce}T.pending=R}Jd=null}return d}function rI(d,p){do{var T=Ci;try{if(MS(),dv.current=mv,hv){for(var R=ei.memoizedState;R!==null;){var $=R.queue;$!==null&&($.pending=null),R=R.next}hv=!1}if(eh=0,qi=Li=ei=null,Em=!1,km=0,fT.current=null,T===null||T.return===null){Oi=1,Rm=p,Ci=null;break}e:{var K=d,ce=T.return,Ce=T,Ie=p;if(p=hs,Ce.flags|=32768,Ie!==null&&typeof Ie=="object"&&typeof Ie.then=="function"){var Je=Ie,kt=Ce,Rt=kt.tag;if((kt.mode&1)===0&&(Rt===0||Rt===11||Rt===15)){var Et=kt.alternate;Et?(kt.updateQueue=Et.updateQueue,kt.memoizedState=Et.memoizedState,kt.lanes=Et.lanes):(kt.updateQueue=null,kt.memoizedState=null)}var Xt=kD(ce);if(Xt!==null){Xt.flags&=-257,AD(Xt,ce,Ce,K,p),Xt.mode&1&&ED(K,Je,p),p=Xt,Ie=Je;var or=p.updateQueue;if(or===null){var lr=new Set;lr.add(Ie),p.updateQueue=lr}else or.add(Ie);break e}else{if((p&1)===0){ED(K,Je,p),ST();break e}Ie=Error(t(426))}}else if(Gn&&Ce.mode&1){var gi=kD(ce);if(gi!==null){(gi.flags&65536)===0&&(gi.flags|=256),AD(gi,ce,Ce,K,p),LS(gf(Ie,Ce));break e}}K=Ie=gf(Ie,Ce),Oi!==4&&(Oi=2),Lm===null?Lm=[K]:Lm.push(K),K=ce;do{switch(K.tag){case 3:K.flags|=65536,p&=-p,K.lanes|=p;var ze=CD(K,Ie,p);QA(K,ze);break e;case 1:Ce=Ie;var Me=K.type,We=K.stateNode;if((K.flags&128)===0&&(typeof Me.getDerivedStateFromError=="function"||We!==null&&typeof We.componentDidCatch=="function"&&(Zc===null||!Zc.has(We)))){K.flags|=65536,p&=-p,K.lanes|=p;var Bt=wD(K,Ce,p);QA(K,Bt);break e}}K=K.return}while(K!==null)}sI(T)}catch(cr){p=cr,Ci===T&&T!==null&&(Ci=T=T.return);continue}break}while(!0)}function nI(){var d=bv.current;return bv.current=mv,d===null?mv:d}function ST(){(Oi===0||Oi===3||Oi===2)&&(Oi=4),Gi===null||(th&268435455)===0&&(Sv&268435455)===0||rd(Gi,hs)}function Av(d,p){var T=hn;hn|=2;var R=nI();(Gi!==d||hs!==p)&&(rc=null,nh(d,p));do try{I9();break}catch($){rI(d,$)}while(!0);if(MS(),hn=T,bv.current=R,Ci!==null)throw Error(t(261));return Gi=null,hs=0,Oi}function I9(){for(;Ci!==null;)iI(Ci)}function P9(){for(;Ci!==null&&!mn();)iI(Ci)}function iI(d){var p=lI(d.alternate,d,Za);d.memoizedProps=d.pendingProps,p===null?sI(d):Ci=p,fT.current=null}function sI(d){var p=d;do{var T=p.alternate;if(d=p.return,(p.flags&32768)===0){if(T=T9(T,p,Za),T!==null){Ci=T;return}}else{if(T=C9(T,p),T!==null){T.flags&=32767,Ci=T;return}if(d!==null)d.flags|=32768,d.subtreeFlags=0,d.deletions=null;else{Oi=6,Ci=null;return}}if(p=p.sibling,p!==null){Ci=p;return}Ci=p=d}while(p!==null);Oi===0&&(Oi=5)}function ih(d,p,T){var R=Hr,$=Lo.transition;try{Lo.transition=null,Hr=1,R9(d,p,T,R)}finally{Lo.transition=$,Hr=R}return null}function R9(d,p,T,R){do xf();while(ed!==null);if((hn&6)!==0)throw Error(t(327));T=d.finishedWork;var $=d.finishedLanes;if(T===null)return null;if(d.finishedWork=null,d.finishedLanes=0,T===d.current)throw Error(t(177));d.callbackNode=null,d.callbackPriority=0;var K=T.lanes|T.childLanes;if(Rn(d,K),d===Gi&&(Ci=Gi=null,hs=0),(T.subtreeFlags&2064)===0&&(T.flags&2064)===0||Cv||(Cv=!0,uI(Dr,function(){return xf(),null})),K=(T.flags&15990)!==0,(T.subtreeFlags&15990)!==0||K){K=Lo.transition,Lo.transition=null;var ce=Hr;Hr=1;var Ce=hn;hn|=4,fT.current=null,E9(d,T),XD(T,d),kn(f),nl=!!Ku,f=Ku=null,d.current=T,k9(T),Ss(),hn=Ce,Hr=ce,Lo.transition=K}else d.current=T;if(Cv&&(Cv=!1,ed=d,wv=$),K=d.pendingLanes,K===0&&(Zc=null),vt(T.stateNode),wa(d,tn()),p!==null)for(R=d.onRecoverableError,T=0;T<p.length;T++)$=p[T],R($.value,{componentStack:$.stack,digest:$.digest});if(Tv)throw Tv=!1,d=gT,gT=null,d;return(wv&1)!==0&&d.tag!==0&&xf(),K=d.pendingLanes,(K&1)!==0?d===vT?Om++:(Om=0,vT=d):Om=0,Xc(),null}function xf(){if(ed!==null){var d=as(wv),p=Lo.transition,T=Hr;try{if(Lo.transition=null,Hr=16>d?16:d,ed===null)var R=!1;else{if(d=ed,ed=null,wv=0,(hn&6)!==0)throw Error(t(331));var $=hn;for(hn|=4,Jt=d.current;Jt!==null;){var K=Jt,ce=K.child;if((Jt.flags&16)!==0){var Ce=K.deletions;if(Ce!==null){for(var Ie=0;Ie<Ce.length;Ie++){var Je=Ce[Ie];for(Jt=Je;Jt!==null;){var kt=Jt;switch(kt.tag){case 0:case 11:case 15:Pm(8,kt,K)}var Rt=kt.child;if(Rt!==null)Rt.return=kt,Jt=Rt;else for(;Jt!==null;){kt=Jt;var Et=kt.sibling,Xt=kt.return;if(VD(kt),kt===Je){Jt=null;break}if(Et!==null){Et.return=Xt,Jt=Et;break}Jt=Xt}}}var or=K.alternate;if(or!==null){var lr=or.child;if(lr!==null){or.child=null;do{var gi=lr.sibling;lr.sibling=null,lr=gi}while(lr!==null)}}Jt=K}}if((K.subtreeFlags&2064)!==0&&ce!==null)ce.return=K,Jt=ce;else e:for(;Jt!==null;){if(K=Jt,(K.flags&2048)!==0)switch(K.tag){case 0:case 11:case 15:Pm(9,K,K.return)}var ze=K.sibling;if(ze!==null){ze.return=K.return,Jt=ze;break e}Jt=K.return}}var Me=d.current;for(Jt=Me;Jt!==null;){ce=Jt;var We=ce.child;if((ce.subtreeFlags&2064)!==0&&We!==null)We.return=ce,Jt=We;else e:for(ce=Me;Jt!==null;){if(Ce=Jt,(Ce.flags&2048)!==0)try{switch(Ce.tag){case 0:case 11:case 15:xv(9,Ce)}}catch(cr){si(Ce,Ce.return,cr)}if(Ce===ce){Jt=null;break e}var Bt=Ce.sibling;if(Bt!==null){Bt.return=Ce.return,Jt=Bt;break e}Jt=Ce.return}}if(hn=$,Xc(),et&&typeof et.onPostCommitFiberRoot=="function")try{et.onPostCommitFiberRoot(Qe,d)}catch{}R=!0}return R}finally{Hr=T,Lo.transition=p}}return!1}function aI(d,p,T){p=gf(T,p),p=CD(d,p,1),d=Qc(d,p,1),p=Gs(),d!==null&&(Ui(d,1,p),wa(d,p))}function si(d,p,T){if(d.tag===3)aI(d,d,T);else for(;p!==null;){if(p.tag===3){aI(p,d,T);break}else if(p.tag===1){var R=p.stateNode;if(typeof p.type.getDerivedStateFromError=="function"||typeof R.componentDidCatch=="function"&&(Zc===null||!Zc.has(R))){d=gf(T,d),d=wD(p,d,1),p=Qc(p,d,1),d=Gs(),p!==null&&(Ui(p,1,d),wa(p,d));break}}p=p.return}}function L9(d,p,T){var R=d.pingCache;R!==null&&R.delete(p),p=Gs(),d.pingedLanes|=d.suspendedLanes&T,Gi===d&&(hs&T)===T&&(Oi===4||Oi===3&&(hs&130023424)===hs&&500>tn()-mT?nh(d,0):pT|=T),wa(d,p)}function oI(d,p){p===0&&((d.mode&1)===0?p=1:(p=wr,wr<<=1,(wr&130023424)===0&&(wr=4194304)));var T=Gs();d=Zu(d,p),d!==null&&(Ui(d,p,T),wa(d,T))}function O9(d){var p=d.memoizedState,T=0;p!==null&&(T=p.retryLane),oI(d,T)}function M9(d,p){var T=0;switch(d.tag){case 13:var R=d.stateNode,$=d.memoizedState;$!==null&&(T=$.retryLane);break;case 19:R=d.stateNode;break;default:throw Error(t(314))}R!==null&&R.delete(p),oI(d,T)}var lI;lI=function(d,p,T){if(d!==null)if(d.memoizedProps!==p.pendingProps||ba.current)Ta=!0;else{if((d.lanes&T)===0&&(p.flags&128)===0)return Ta=!1,S9(d,p,T);Ta=(d.flags&131072)!==0}else Ta=!1,Gn&&(p.flags&1048576)!==0&&jA(p,nv,p.index);switch(p.lanes=0,p.tag){case 2:var R=p.type;yv(d,p),d=p.pendingProps;var $=lf(p,Is.current);pf(p,T),$=qS(null,p,R,d,$,T);var K=GS();return p.flags|=1,typeof $=="object"&&$!==null&&typeof $.render=="function"&&$.$$typeof===void 0?(p.tag=1,p.memoizedState=null,p.updateQueue=null,Sa(R)?(K=!0,ev(p)):K=!1,p.memoizedState=$.state!==null&&$.state!==void 0?$.state:null,US(p),$.updater=gv,p.stateNode=$,$._reactInternals=p,ZS(p,R,d,T),p=nT(null,p,R,!0,K,T)):(p.tag=0,Gn&&K&&DS(p),qs(null,p,$,T),p=p.child),p;case 16:R=p.elementType;e:{switch(yv(d,p),d=p.pendingProps,$=R._init,R=$(R._payload),p.type=R,$=p.tag=B9(R),d=fl(R,d),$){case 0:p=rT(null,p,R,d,T);break e;case 1:p=OD(null,p,R,d,T);break e;case 11:p=DD(null,p,R,d,T);break e;case 14:p=ID(null,p,R,fl(R.type,d),T);break e}throw Error(t(306,R,""))}return p;case 0:return R=p.type,$=p.pendingProps,$=p.elementType===R?$:fl(R,$),rT(d,p,R,$,T);case 1:return R=p.type,$=p.pendingProps,$=p.elementType===R?$:fl(R,$),OD(d,p,R,$,T);case 3:e:{if(MD(p),d===null)throw Error(t(387));R=p.pendingProps,K=p.memoizedState,$=K.element,YA(d,p),uv(p,R,null,T);var ce=p.memoizedState;if(R=ce.element,K.isDehydrated)if(K={element:R,isDehydrated:!1,cache:ce.cache,pendingSuspenseBoundaries:ce.pendingSuspenseBoundaries,transitions:ce.transitions},p.updateQueue.baseState=K,p.memoizedState=K,p.flags&256){$=gf(Error(t(423)),p),p=FD(d,p,R,T,$);break e}else if(R!==$){$=gf(Error(t(424)),p),p=FD(d,p,R,T,$);break e}else for(Ja=J(p.stateNode.containerInfo.firstChild),Qa=p,Gn=!0,hl=null,T=KA(p,null,R,T),p.child=T;T;)T.flags=T.flags&-3|4096,T=T.sibling;else{if(df(),R===$){p=tc(d,p,T);break e}qs(d,p,R,T)}p=p.child}return p;case 5:return ZA(p),d===null&&RS(p),R=p.type,$=p.pendingProps,K=d!==null?d.memoizedProps:null,ce=$.children,_(R,$)?ce=null:K!==null&&_(R,K)&&(p.flags|=32),LD(d,p),qs(d,p,ce,T),p.child;case 6:return d===null&&RS(p),null;case 13:return BD(d,p,T);case 4:return $S(p,p.stateNode.containerInfo),R=p.pendingProps,d===null?p.child=hf(p,null,R,T):qs(d,p,R,T),p.child;case 11:return R=p.type,$=p.pendingProps,$=p.elementType===R?$:fl(R,$),DD(d,p,R,$,T);case 7:return qs(d,p,p.pendingProps,T),p.child;case 8:return qs(d,p,p.pendingProps.children,T),p.child;case 12:return qs(d,p,p.pendingProps.children,T),p.child;case 10:e:{if(R=p.type._context,$=p.pendingProps,K=p.memoizedProps,ce=$.value,fn(av,R._currentValue),R._currentValue=ce,K!==null)if(we(K.value,ce)){if(K.children===$.children&&!ba.current){p=tc(d,p,T);break e}}else for(K=p.child,K!==null&&(K.return=p);K!==null;){var Ce=K.dependencies;if(Ce!==null){ce=K.child;for(var Ie=Ce.firstContext;Ie!==null;){if(Ie.context===R){if(K.tag===1){Ie=ec(-1,T&-T),Ie.tag=2;var Je=K.updateQueue;if(Je!==null){Je=Je.shared;var kt=Je.pending;kt===null?Ie.next=Ie:(Ie.next=kt.next,kt.next=Ie),Je.pending=Ie}}K.lanes|=T,Ie=K.alternate,Ie!==null&&(Ie.lanes|=T),BS(K.return,T,p),Ce.lanes|=T;break}Ie=Ie.next}}else if(K.tag===10)ce=K.type===p.type?null:K.child;else if(K.tag===18){if(ce=K.return,ce===null)throw Error(t(341));ce.lanes|=T,Ce=ce.alternate,Ce!==null&&(Ce.lanes|=T),BS(ce,T,p),ce=K.sibling}else ce=K.child;if(ce!==null)ce.return=K;else for(ce=K;ce!==null;){if(ce===p){ce=null;break}if(K=ce.sibling,K!==null){K.return=ce.return,ce=K;break}ce=ce.return}K=ce}qs(d,p,$.children,T),p=p.child}return p;case 9:return $=p.type,R=p.pendingProps.children,pf(p,T),$=Po($),R=R($),p.flags|=1,qs(d,p,R,T),p.child;case 14:return R=p.type,$=fl(R,p.pendingProps),$=fl(R.type,$),ID(d,p,R,$,T);case 15:return PD(d,p,p.type,p.pendingProps,T);case 17:return R=p.type,$=p.pendingProps,$=p.elementType===R?$:fl(R,$),yv(d,p),p.tag=1,Sa(R)?(d=!0,ev(p)):d=!1,pf(p,T),SD(p,R,$),ZS(p,R,$,T),nT(null,p,R,!0,d,T);case 19:return UD(d,p,T);case 22:return RD(d,p,T)}throw Error(t(156,p.tag))};function uI(d,p){return er(d,p)}function F9(d,p,T,R){this.tag=d,this.key=T,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=p,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=R,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Oo(d,p,T,R){return new F9(d,p,T,R)}function TT(d){return d=d.prototype,!(!d||!d.isReactComponent)}function B9(d){if(typeof d=="function")return TT(d)?1:0;if(d!=null){if(d=d.$$typeof,d===q)return 11;if(d===ie)return 14}return 2}function nd(d,p){var T=d.alternate;return T===null?(T=Oo(d.tag,p,d.key,d.mode),T.elementType=d.elementType,T.type=d.type,T.stateNode=d.stateNode,T.alternate=d,d.alternate=T):(T.pendingProps=p,T.type=d.type,T.flags=0,T.subtreeFlags=0,T.deletions=null),T.flags=d.flags&14680064,T.childLanes=d.childLanes,T.lanes=d.lanes,T.child=d.child,T.memoizedProps=d.memoizedProps,T.memoizedState=d.memoizedState,T.updateQueue=d.updateQueue,p=d.dependencies,T.dependencies=p===null?null:{lanes:p.lanes,firstContext:p.firstContext},T.sibling=d.sibling,T.index=d.index,T.ref=d.ref,T}function Dv(d,p,T,R,$,K){var ce=2;if(R=d,typeof d=="function")TT(d)&&(ce=1);else if(typeof d=="string")ce=5;else e:switch(d){case N:return sh(T.children,$,K,p);case U:ce=8,$|=8;break;case B:return d=Oo(12,T,p,$|2),d.elementType=B,d.lanes=K,d;case V:return d=Oo(13,T,p,$),d.elementType=V,d.lanes=K,d;case Q:return d=Oo(19,T,p,$),d.elementType=Q,d.lanes=K,d;case he:return Iv(T,$,K,p);default:if(typeof d=="object"&&d!==null)switch(d.$$typeof){case k:ce=10;break e;case H:ce=9;break e;case q:ce=11;break e;case ie:ce=14;break e;case le:ce=16,R=null;break e}throw Error(t(130,d==null?d:typeof d,""))}return p=Oo(ce,T,p,$),p.elementType=d,p.type=R,p.lanes=K,p}function sh(d,p,T,R){return d=Oo(7,d,R,p),d.lanes=T,d}function Iv(d,p,T,R){return d=Oo(22,d,R,p),d.elementType=he,d.lanes=T,d.stateNode={isHidden:!1},d}function CT(d,p,T){return d=Oo(6,d,null,p),d.lanes=T,d}function wT(d,p,T){return p=Oo(4,d.children!==null?d.children:[],d.key,p),p.lanes=T,p.stateNode={containerInfo:d.containerInfo,pendingChildren:null,implementation:d.implementation},p}function N9(d,p,T,R,$){this.tag=p,this.containerInfo=d,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ws(0),this.expirationTimes=ws(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ws(0),this.identifierPrefix=R,this.onRecoverableError=$,this.mutableSourceEagerHydrationData=null}function ET(d,p,T,R,$,K,ce,Ce,Ie){return d=new N9(d,p,T,Ce,Ie),p===1?(p=1,K===!0&&(p|=8)):p=0,K=Oo(3,null,null,p),d.current=K,K.stateNode=d,K.memoizedState={element:R,isDehydrated:T,cache:null,transitions:null,pendingSuspenseBoundaries:null},US(K),d}function U9(d,p,T){var R=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:L,key:R==null?null:""+R,children:d,containerInfo:p,implementation:T}}function cI(d){if(!d)return qn;d=d._reactInternals;e:{if(xt(d)!==d||d.tag!==1)throw Error(t(170));var p=d;do{switch(p.tag){case 3:p=p.stateNode.context;break e;case 1:if(Sa(p.type)){p=p.stateNode.__reactInternalMemoizedMergedChildContext;break e}}p=p.return}while(p!==null);throw Error(t(171))}if(d.tag===1){var T=d.type;if(Sa(T))return NA(d,T,p)}return p}function dI(d,p,T,R,$,K,ce,Ce,Ie){return d=ET(T,R,!0,d,$,K,ce,Ce,Ie),d.context=cI(null),T=d.current,R=Gs(),$=td(T),K=ec(R,$),K.callback=p??null,Qc(T,K,$),d.current.lanes=$,Ui(d,$,R),wa(d,R),d}function Pv(d,p,T,R){var $=p.current,K=Gs(),ce=td($);return T=cI(T),p.context===null?p.context=T:p.pendingContext=T,p=ec(K,ce),p.payload={element:d},R=R===void 0?null:R,R!==null&&(p.callback=R),d=Qc($,p,ce),d!==null&&(gl(d,$,ce,K),lv(d,$,ce)),ce}function Rv(d){if(d=d.current,!d.child)return null;switch(d.child.tag){case 5:return d.child.stateNode;default:return d.child.stateNode}}function hI(d,p){if(d=d.memoizedState,d!==null&&d.dehydrated!==null){var T=d.retryLane;d.retryLane=T!==0&&T<p?T:p}}function kT(d,p){hI(d,p),(d=d.alternate)&&hI(d,p)}function $9(){return null}var fI=typeof reportError=="function"?reportError:function(d){console.error(d)};function AT(d){this._internalRoot=d}Lv.prototype.render=AT.prototype.render=function(d){var p=this._internalRoot;if(p===null)throw Error(t(409));Pv(d,p,null,null)},Lv.prototype.unmount=AT.prototype.unmount=function(){var d=this._internalRoot;if(d!==null){this._internalRoot=null;var p=d.containerInfo;rh(function(){Pv(null,d,null,null)}),p[Ee]=null}};function Lv(d){this._internalRoot=d}Lv.prototype.unstable_scheduleHydration=function(d){if(d){var p=Ll();d={blockedOn:null,target:d,priority:p};for(var T=0;T<pa.length&&p!==0&&p<pa[T].priority;T++);pa.splice(T,0,d),T===0&&Fl(d)}};function DT(d){return!(!d||d.nodeType!==1&&d.nodeType!==9&&d.nodeType!==11)}function Ov(d){return!(!d||d.nodeType!==1&&d.nodeType!==9&&d.nodeType!==11&&(d.nodeType!==8||d.nodeValue!==" react-mount-point-unstable "))}function pI(){}function j9(d,p,T,R,$){if($){if(typeof R=="function"){var K=R;R=function(){var Je=Rv(ce);K.call(Je)}}var ce=dI(p,R,d,0,null,!1,!1,"",pI);return d._reactRootContainer=ce,d[Ee]=ce.current,pi(d.nodeType===8?d.parentNode:d),rh(),ce}for(;$=d.lastChild;)d.removeChild($);if(typeof R=="function"){var Ce=R;R=function(){var Je=Rv(Ie);Ce.call(Je)}}var Ie=ET(d,0,!1,null,null,!1,!1,"",pI);return d._reactRootContainer=Ie,d[Ee]=Ie.current,pi(d.nodeType===8?d.parentNode:d),rh(function(){Pv(p,Ie,T,R)}),Ie}function Mv(d,p,T,R,$){var K=T._reactRootContainer;if(K){var ce=K;if(typeof $=="function"){var Ce=$;$=function(){var Ie=Rv(ce);Ce.call(Ie)}}Pv(p,ce,d,$)}else ce=j9(T,p,d,$,R);return Rv(ce)}da=function(d){switch(d.tag){case 3:var p=d.stateNode;if(p.current.memoizedState.isDehydrated){var T=hi(p.pendingLanes);T!==0&&(Fu(p,T|1),wa(p,tn()),(hn&6)===0&&(_f=tn()+500,Xc()))}break;case 13:rh(function(){var R=Zu(d,1);if(R!==null){var $=Gs();gl(R,d,1,$)}}),kT(d,1)}},Ai=function(d){if(d.tag===13){var p=Zu(d,134217728);if(p!==null){var T=Gs();gl(p,d,134217728,T)}kT(d,134217728)}},ja=function(d){if(d.tag===13){var p=td(d),T=Zu(d,p);if(T!==null){var R=Gs();gl(T,d,p,R)}kT(d,p)}},Ll=function(){return Hr},_o=function(d,p){var T=Hr;try{return Hr=d,p()}finally{Hr=T}},In=function(d,p,T){switch(p){case"input":if(rt(d,T),p=T.name,T.type==="radio"&&p!=null){for(T=d;T.parentNode;)T=T.parentNode;for(T=T.querySelectorAll("input[name="+JSON.stringify(""+p)+'][type="radio"]'),p=0;p<T.length;p++){var R=T[p];if(R!==d&&R.form===d.form){var $=Kl(R);if(!$)throw Error(t(90));Nt(R),rt(R,$)}}}break;case"textarea":pr(d,T);break;case"select":p=T.value,p!=null&&St(d,!!T.multiple,p,!1)}},pt=xT,Gt=rh;var z9={usingClientEntryPoint:!1,Events:[mi,Ao,Kl,Te,je,xT]},Mm={findFiberByHostInstance:dn,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},H9={bundleType:Mm.bundleType,version:Mm.version,rendererPackageName:Mm.rendererPackageName,rendererConfig:Mm.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:I.ReactCurrentDispatcher,findHostInstanceByFiber:function(d){return d=Fr(d),d===null?null:d.stateNode},findFiberByHostInstance:Mm.findFiberByHostInstance||$9,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Fv=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Fv.isDisabled&&Fv.supportsFiber)try{Qe=Fv.inject(H9),et=Fv}catch{}}return Ea.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=z9,Ea.createPortal=function(d,p){var T=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!DT(p))throw Error(t(200));return U9(d,p,null,T)},Ea.createRoot=function(d,p){if(!DT(d))throw Error(t(299));var T=!1,R="",$=fI;return p!=null&&(p.unstable_strictMode===!0&&(T=!0),p.identifierPrefix!==void 0&&(R=p.identifierPrefix),p.onRecoverableError!==void 0&&($=p.onRecoverableError)),p=ET(d,1,!1,null,null,T,!1,R,$),d[Ee]=p.current,pi(d.nodeType===8?d.parentNode:d),new AT(p)},Ea.findDOMNode=function(d){if(d==null)return null;if(d.nodeType===1)return d;var p=d._reactInternals;if(p===void 0)throw typeof d.render=="function"?Error(t(188)):(d=Object.keys(d).join(","),Error(t(268,d)));return d=Fr(p),d=d===null?null:d.stateNode,d},Ea.flushSync=function(d){return rh(d)},Ea.hydrate=function(d,p,T){if(!Ov(p))throw Error(t(200));return Mv(null,d,p,!0,T)},Ea.hydrateRoot=function(d,p,T){if(!DT(d))throw Error(t(405));var R=T!=null&&T.hydratedSources||null,$=!1,K="",ce=fI;if(T!=null&&(T.unstable_strictMode===!0&&($=!0),T.identifierPrefix!==void 0&&(K=T.identifierPrefix),T.onRecoverableError!==void 0&&(ce=T.onRecoverableError)),p=dI(p,null,d,1,T??null,$,!1,K,ce),d[Ee]=p.current,pi(d),R)for(d=0;d<R.length;d++)T=R[d],$=T._getVersion,$=$(T._source),p.mutableSourceEagerHydrationData==null?p.mutableSourceEagerHydrationData=[T,$]:p.mutableSourceEagerHydrationData.push(T,$);return new Lv(p)},Ea.render=function(d,p,T){if(!Ov(p))throw Error(t(200));return Mv(null,d,p,!1,T)},Ea.unmountComponentAtNode=function(d){if(!Ov(d))throw Error(t(40));return d._reactRootContainer?(rh(function(){Mv(null,null,d,!1,function(){d._reactRootContainer=null,d[Ee]=null})}),!0):!1},Ea.unstable_batchedUpdates=xT,Ea.unstable_renderSubtreeIntoContainer=function(d,p,T,R){if(!Ov(T))throw Error(t(200));if(d==null||d._reactInternals===void 0)throw Error(t(38));return Mv(d,p,T,!1,R)},Ea.version="18.3.1-next-f1338f8080-20240426",Ea}var SI;function uF(){if(SI)return RT.exports;SI=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),RT.exports=J9(),RT.exports}var TI;function Z9(){if(TI)return Bv;TI=1;var r=uF();return Bv.createRoot=r.createRoot,Bv.hydrateRoot=r.hydrateRoot,Bv}var ez=Z9();const tz=ua(ez);function cF(r,e){return function(){return r.apply(e,arguments)}}const{toString:rz}=Object.prototype,{getPrototypeOf:NE}=Object,rb=(r=>e=>{const t=rz.call(e);return r[t]||(r[t]=t.slice(8,-1).toLowerCase())})(Object.create(null)),Dl=r=>(r=r.toLowerCase(),e=>rb(e)===r),nb=r=>e=>typeof e===r,{isArray:Wp}=Array,z0=nb("undefined");function nz(r){return r!==null&&!z0(r)&&r.constructor!==null&&!z0(r.constructor)&&uo(r.constructor.isBuffer)&&r.constructor.isBuffer(r)}const dF=Dl("ArrayBuffer");function iz(r){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(r):e=r&&r.buffer&&dF(r.buffer),e}const sz=nb("string"),uo=nb("function"),hF=nb("number"),ib=r=>r!==null&&typeof r=="object",az=r=>r===!0||r===!1,Ty=r=>{if(rb(r)!=="object")return!1;const e=NE(r);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in r)&&!(Symbol.iterator in r)},oz=Dl("Date"),lz=Dl("File"),uz=Dl("Blob"),cz=Dl("FileList"),dz=r=>ib(r)&&uo(r.pipe),hz=r=>{let e;return r&&(typeof FormData=="function"&&r instanceof FormData||uo(r.append)&&((e=rb(r))==="formdata"||e==="object"&&uo(r.toString)&&r.toString()==="[object FormData]"))},fz=Dl("URLSearchParams"),[pz,mz,gz,vz]=["ReadableStream","Request","Response","Headers"].map(Dl),yz=r=>r.trim?r.trim():r.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function pg(r,e,{allOwnKeys:t=!1}={}){if(r===null||typeof r>"u")return;let n,i;if(typeof r!="object"&&(r=[r]),Wp(r))for(n=0,i=r.length;n<i;n++)e.call(null,r[n],n,r);else{const s=t?Object.getOwnPropertyNames(r):Object.keys(r),a=s.length;let o;for(n=0;n<a;n++)o=s[n],e.call(null,r[o],o,r)}}function fF(r,e){e=e.toLowerCase();const t=Object.keys(r);let n=t.length,i;for(;n-- >0;)if(i=t[n],e===i.toLowerCase())return i;return null}const Th=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,pF=r=>!z0(r)&&r!==Th;function BC(){const{caseless:r}=pF(this)&&this||{},e={},t=(n,i)=>{const s=r&&fF(e,i)||i;Ty(e[s])&&Ty(n)?e[s]=BC(e[s],n):Ty(n)?e[s]=BC({},n):Wp(n)?e[s]=n.slice():e[s]=n};for(let n=0,i=arguments.length;n<i;n++)arguments[n]&&pg(arguments[n],t);return e}const _z=(r,e,t,{allOwnKeys:n}={})=>(pg(e,(i,s)=>{t&&uo(i)?r[s]=cF(i,t):r[s]=i},{allOwnKeys:n}),r),xz=r=>(r.charCodeAt(0)===65279&&(r=r.slice(1)),r),bz=(r,e,t,n)=>{r.prototype=Object.create(e.prototype,n),r.prototype.constructor=r,Object.defineProperty(r,"super",{value:e.prototype}),t&&Object.assign(r.prototype,t)},Sz=(r,e,t,n)=>{let i,s,a;const o={};if(e=e||{},r==null)return e;do{for(i=Object.getOwnPropertyNames(r),s=i.length;s-- >0;)a=i[s],(!n||n(a,r,e))&&!o[a]&&(e[a]=r[a],o[a]=!0);r=t!==!1&&NE(r)}while(r&&(!t||t(r,e))&&r!==Object.prototype);return e},Tz=(r,e,t)=>{r=String(r),(t===void 0||t>r.length)&&(t=r.length),t-=e.length;const n=r.indexOf(e,t);return n!==-1&&n===t},Cz=r=>{if(!r)return null;if(Wp(r))return r;let e=r.length;if(!hF(e))return null;const t=new Array(e);for(;e-- >0;)t[e]=r[e];return t},wz=(r=>e=>r&&e instanceof r)(typeof Uint8Array<"u"&&NE(Uint8Array)),Ez=(r,e)=>{const n=(r&&r[Symbol.iterator]).call(r);let i;for(;(i=n.next())&&!i.done;){const s=i.value;e.call(r,s[0],s[1])}},kz=(r,e)=>{let t;const n=[];for(;(t=r.exec(e))!==null;)n.push(t);return n},Az=Dl("HTMLFormElement"),Dz=r=>r.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(t,n,i){return n.toUpperCase()+i}),CI=(({hasOwnProperty:r})=>(e,t)=>r.call(e,t))(Object.prototype),Iz=Dl("RegExp"),mF=(r,e)=>{const t=Object.getOwnPropertyDescriptors(r),n={};pg(t,(i,s)=>{let a;(a=e(i,s,r))!==!1&&(n[s]=a||i)}),Object.defineProperties(r,n)},Pz=r=>{mF(r,(e,t)=>{if(uo(r)&&["arguments","caller","callee"].indexOf(t)!==-1)return!1;const n=r[t];if(uo(n)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+t+"'")})}})},Rz=(r,e)=>{const t={},n=i=>{i.forEach(s=>{t[s]=!0})};return Wp(r)?n(r):n(String(r).split(e)),t},Lz=()=>{},Oz=(r,e)=>r!=null&&Number.isFinite(r=+r)?r:e,MT="abcdefghijklmnopqrstuvwxyz",wI="0123456789",gF={DIGIT:wI,ALPHA:MT,ALPHA_DIGIT:MT+MT.toUpperCase()+wI},Mz=(r=16,e=gF.ALPHA_DIGIT)=>{let t="";const{length:n}=e;for(;r--;)t+=e[Math.random()*n|0];return t};function Fz(r){return!!(r&&uo(r.append)&&r[Symbol.toStringTag]==="FormData"&&r[Symbol.iterator])}const Bz=r=>{const e=new Array(10),t=(n,i)=>{if(ib(n)){if(e.indexOf(n)>=0)return;if(!("toJSON"in n)){e[i]=n;const s=Wp(n)?[]:{};return pg(n,(a,o)=>{const l=t(a,i+1);!z0(l)&&(s[o]=l)}),e[i]=void 0,s}}return n};return t(r,0)},Nz=Dl("AsyncFunction"),Uz=r=>r&&(ib(r)||uo(r))&&uo(r.then)&&uo(r.catch),vF=((r,e)=>r?setImmediate:e?((t,n)=>(Th.addEventListener("message",({source:i,data:s})=>{i===Th&&s===t&&n.length&&n.shift()()},!1),i=>{n.push(i),Th.postMessage(t,"*")}))(`axios@${Math.random()}`,[]):t=>setTimeout(t))(typeof setImmediate=="function",uo(Th.postMessage)),$z=typeof queueMicrotask<"u"?queueMicrotask.bind(Th):typeof process<"u"&&process.nextTick||vF,it={isArray:Wp,isArrayBuffer:dF,isBuffer:nz,isFormData:hz,isArrayBufferView:iz,isString:sz,isNumber:hF,isBoolean:az,isObject:ib,isPlainObject:Ty,isReadableStream:pz,isRequest:mz,isResponse:gz,isHeaders:vz,isUndefined:z0,isDate:oz,isFile:lz,isBlob:uz,isRegExp:Iz,isFunction:uo,isStream:dz,isURLSearchParams:fz,isTypedArray:wz,isFileList:cz,forEach:pg,merge:BC,extend:_z,trim:yz,stripBOM:xz,inherits:bz,toFlatObject:Sz,kindOf:rb,kindOfTest:Dl,endsWith:Tz,toArray:Cz,forEachEntry:Ez,matchAll:kz,isHTMLForm:Az,hasOwnProperty:CI,hasOwnProp:CI,reduceDescriptors:mF,freezeMethods:Pz,toObjectSet:Rz,toCamelCase:Dz,noop:Lz,toFiniteNumber:Oz,findKey:fF,global:Th,isContextDefined:pF,ALPHABET:gF,generateString:Mz,isSpecCompliantForm:Fz,toJSONObject:Bz,isAsyncFn:Nz,isThenable:Uz,setImmediate:vF,asap:$z};function $r(r,e,t,n,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=r,this.name="AxiosError",e&&(this.code=e),t&&(this.config=t),n&&(this.request=n),i&&(this.response=i,this.status=i.status?i.status:null)}it.inherits($r,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:it.toJSONObject(this.config),code:this.code,status:this.status}}});const yF=$r.prototype,_F={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(r=>{_F[r]={value:r}});Object.defineProperties($r,_F);Object.defineProperty(yF,"isAxiosError",{value:!0});$r.from=(r,e,t,n,i,s)=>{const a=Object.create(yF);return it.toFlatObject(r,a,function(l){return l!==Error.prototype},o=>o!=="isAxiosError"),$r.call(a,r.message,e,t,n,i),a.cause=r,a.name=r.name,s&&Object.assign(a,s),a};const jz=null;function NC(r){return it.isPlainObject(r)||it.isArray(r)}function xF(r){return it.endsWith(r,"[]")?r.slice(0,-2):r}function EI(r,e,t){return r?r.concat(e).map(function(i,s){return i=xF(i),!t&&s?"["+i+"]":i}).join(t?".":""):e}function zz(r){return it.isArray(r)&&!r.some(NC)}const Hz=it.toFlatObject(it,{},null,function(e){return/^is[A-Z]/.test(e)});function sb(r,e,t){if(!it.isObject(r))throw new TypeError("target must be an object");e=e||new FormData,t=it.toFlatObject(t,{metaTokens:!0,dots:!1,indexes:!1},!1,function(v,x){return!it.isUndefined(x[v])});const n=t.metaTokens,i=t.visitor||c,s=t.dots,a=t.indexes,l=(t.Blob||typeof Blob<"u"&&Blob)&&it.isSpecCompliantForm(e);if(!it.isFunction(i))throw new TypeError("visitor must be a function");function u(y){if(y===null)return"";if(it.isDate(y))return y.toISOString();if(!l&&it.isBlob(y))throw new $r("Blob is not supported. Use a Buffer instead.");return it.isArrayBuffer(y)||it.isTypedArray(y)?l&&typeof Blob=="function"?new Blob([y]):Buffer.from(y):y}function c(y,v,x){let w=y;if(y&&!x&&typeof y=="object"){if(it.endsWith(v,"{}"))v=n?v:v.slice(0,-2),y=JSON.stringify(y);else if(it.isArray(y)&&zz(y)||(it.isFileList(y)||it.endsWith(v,"[]"))&&(w=it.toArray(y)))return v=xF(v),w.forEach(function(D,I){!(it.isUndefined(D)||D===null)&&e.append(a===!0?EI([v],I,s):a===null?v:v+"[]",u(D))}),!1}return NC(y)?!0:(e.append(EI(x,v,s),u(y)),!1)}const h=[],m=Object.assign(Hz,{defaultVisitor:c,convertValue:u,isVisitable:NC});function g(y,v){if(!it.isUndefined(y)){if(h.indexOf(y)!==-1)throw Error("Circular reference detected in "+v.join("."));h.push(y),it.forEach(y,function(w,E){(!(it.isUndefined(w)||w===null)&&i.call(e,w,it.isString(E)?E.trim():E,v,m))===!0&&g(w,v?v.concat(E):[E])}),h.pop()}}if(!it.isObject(r))throw new TypeError("data must be an object");return g(r),e}function kI(r){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(r).replace(/[!'()~]|%20|%00/g,function(n){return e[n]})}function UE(r,e){this._pairs=[],r&&sb(r,this,e)}const bF=UE.prototype;bF.append=function(e,t){this._pairs.push([e,t])};bF.toString=function(e){const t=e?function(n){return e.call(this,n,kI)}:kI;return this._pairs.map(function(i){return t(i[0])+"="+t(i[1])},"").join("&")};function Vz(r){return encodeURIComponent(r).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function SF(r,e,t){if(!e)return r;const n=t&&t.encode||Vz,i=t&&t.serialize;let s;if(i?s=i(e,t):s=it.isURLSearchParams(e)?e.toString():new UE(e,t).toString(n),s){const a=r.indexOf("#");a!==-1&&(r=r.slice(0,a)),r+=(r.indexOf("?")===-1?"?":"&")+s}return r}class AI{constructor(){this.handlers=[]}use(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){it.forEach(this.handlers,function(n){n!==null&&e(n)})}}const TF={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Wz=typeof URLSearchParams<"u"?URLSearchParams:UE,qz=typeof FormData<"u"?FormData:null,Gz=typeof Blob<"u"?Blob:null,Kz={isBrowser:!0,classes:{URLSearchParams:Wz,FormData:qz,Blob:Gz},protocols:["http","https","file","blob","url","data"]},$E=typeof window<"u"&&typeof document<"u",UC=typeof navigator=="object"&&navigator||void 0,Xz=$E&&(!UC||["ReactNative","NativeScript","NS"].indexOf(UC.product)<0),Yz=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",Qz=$E&&window.location.href||"http://localhost",Jz=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:$E,hasStandardBrowserEnv:Xz,hasStandardBrowserWebWorkerEnv:Yz,navigator:UC,origin:Qz},Symbol.toStringTag,{value:"Module"})),Ba={...Jz,...Kz};function Zz(r,e){return sb(r,new Ba.classes.URLSearchParams,Object.assign({visitor:function(t,n,i,s){return Ba.isNode&&it.isBuffer(t)?(this.append(n,t.toString("base64")),!1):s.defaultVisitor.apply(this,arguments)}},e))}function eH(r){return it.matchAll(/\w+|\[(\w*)]/g,r).map(e=>e[0]==="[]"?"":e[1]||e[0])}function tH(r){const e={},t=Object.keys(r);let n;const i=t.length;let s;for(n=0;n<i;n++)s=t[n],e[s]=r[s];return e}function CF(r){function e(t,n,i,s){let a=t[s++];if(a==="__proto__")return!0;const o=Number.isFinite(+a),l=s>=t.length;return a=!a&&it.isArray(i)?i.length:a,l?(it.hasOwnProp(i,a)?i[a]=[i[a],n]:i[a]=n,!o):((!i[a]||!it.isObject(i[a]))&&(i[a]=[]),e(t,n,i[a],s)&&it.isArray(i[a])&&(i[a]=tH(i[a])),!o)}if(it.isFormData(r)&&it.isFunction(r.entries)){const t={};return it.forEachEntry(r,(n,i)=>{e(eH(n),i,t,0)}),t}return null}function rH(r,e,t){if(it.isString(r))try{return(e||JSON.parse)(r),it.trim(r)}catch(n){if(n.name!=="SyntaxError")throw n}return(t||JSON.stringify)(r)}const mg={transitional:TF,adapter:["xhr","http","fetch"],transformRequest:[function(e,t){const n=t.getContentType()||"",i=n.indexOf("application/json")>-1,s=it.isObject(e);if(s&&it.isHTMLForm(e)&&(e=new FormData(e)),it.isFormData(e))return i?JSON.stringify(CF(e)):e;if(it.isArrayBuffer(e)||it.isBuffer(e)||it.isStream(e)||it.isFile(e)||it.isBlob(e)||it.isReadableStream(e))return e;if(it.isArrayBufferView(e))return e.buffer;if(it.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let o;if(s){if(n.indexOf("application/x-www-form-urlencoded")>-1)return Zz(e,this.formSerializer).toString();if((o=it.isFileList(e))||n.indexOf("multipart/form-data")>-1){const l=this.env&&this.env.FormData;return sb(o?{"files[]":e}:e,l&&new l,this.formSerializer)}}return s||i?(t.setContentType("application/json",!1),rH(e)):e}],transformResponse:[function(e){const t=this.transitional||mg.transitional,n=t&&t.forcedJSONParsing,i=this.responseType==="json";if(it.isResponse(e)||it.isReadableStream(e))return e;if(e&&it.isString(e)&&(n&&!this.responseType||i)){const a=!(t&&t.silentJSONParsing)&&i;try{return JSON.parse(e)}catch(o){if(a)throw o.name==="SyntaxError"?$r.from(o,$r.ERR_BAD_RESPONSE,this,null,this.response):o}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Ba.classes.FormData,Blob:Ba.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};it.forEach(["delete","get","head","post","put","patch"],r=>{mg.headers[r]={}});const nH=it.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),iH=r=>{const e={};let t,n,i;return r&&r.split(`
`).forEach(function(a){i=a.indexOf(":"),t=a.substring(0,i).trim().toLowerCase(),n=a.substring(i+1).trim(),!(!t||e[t]&&nH[t])&&(t==="set-cookie"?e[t]?e[t].push(n):e[t]=[n]:e[t]=e[t]?e[t]+", "+n:n)}),e},DI=Symbol("internals");function Bm(r){return r&&String(r).trim().toLowerCase()}function Cy(r){return r===!1||r==null?r:it.isArray(r)?r.map(Cy):String(r)}function sH(r){const e=Object.create(null),t=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let n;for(;n=t.exec(r);)e[n[1]]=n[2];return e}const aH=r=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(r.trim());function FT(r,e,t,n,i){if(it.isFunction(n))return n.call(this,e,t);if(i&&(e=t),!!it.isString(e)){if(it.isString(n))return e.indexOf(n)!==-1;if(it.isRegExp(n))return n.test(e)}}function oH(r){return r.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,t,n)=>t.toUpperCase()+n)}function lH(r,e){const t=it.toCamelCase(" "+e);["get","set","has"].forEach(n=>{Object.defineProperty(r,n+t,{value:function(i,s,a){return this[n].call(this,e,i,s,a)},configurable:!0})})}let Na=class{constructor(e){e&&this.set(e)}set(e,t,n){const i=this;function s(o,l,u){const c=Bm(l);if(!c)throw new Error("header name must be a non-empty string");const h=it.findKey(i,c);(!h||i[h]===void 0||u===!0||u===void 0&&i[h]!==!1)&&(i[h||l]=Cy(o))}const a=(o,l)=>it.forEach(o,(u,c)=>s(u,c,l));if(it.isPlainObject(e)||e instanceof this.constructor)a(e,t);else if(it.isString(e)&&(e=e.trim())&&!aH(e))a(iH(e),t);else if(it.isHeaders(e))for(const[o,l]of e.entries())s(l,o,n);else e!=null&&s(t,e,n);return this}get(e,t){if(e=Bm(e),e){const n=it.findKey(this,e);if(n){const i=this[n];if(!t)return i;if(t===!0)return sH(i);if(it.isFunction(t))return t.call(this,i,n);if(it.isRegExp(t))return t.exec(i);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=Bm(e),e){const n=it.findKey(this,e);return!!(n&&this[n]!==void 0&&(!t||FT(this,this[n],n,t)))}return!1}delete(e,t){const n=this;let i=!1;function s(a){if(a=Bm(a),a){const o=it.findKey(n,a);o&&(!t||FT(n,n[o],o,t))&&(delete n[o],i=!0)}}return it.isArray(e)?e.forEach(s):s(e),i}clear(e){const t=Object.keys(this);let n=t.length,i=!1;for(;n--;){const s=t[n];(!e||FT(this,this[s],s,e,!0))&&(delete this[s],i=!0)}return i}normalize(e){const t=this,n={};return it.forEach(this,(i,s)=>{const a=it.findKey(n,s);if(a){t[a]=Cy(i),delete t[s];return}const o=e?oH(s):String(s).trim();o!==s&&delete t[s],t[o]=Cy(i),n[o]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const t=Object.create(null);return it.forEach(this,(n,i)=>{n!=null&&n!==!1&&(t[i]=e&&it.isArray(n)?n.join(", "):n)}),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,t])=>e+": "+t).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...t){const n=new this(e);return t.forEach(i=>n.set(i)),n}static accessor(e){const n=(this[DI]=this[DI]={accessors:{}}).accessors,i=this.prototype;function s(a){const o=Bm(a);n[o]||(lH(i,a),n[o]=!0)}return it.isArray(e)?e.forEach(s):s(e),this}};Na.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);it.reduceDescriptors(Na.prototype,({value:r},e)=>{let t=e[0].toUpperCase()+e.slice(1);return{get:()=>r,set(n){this[t]=n}}});it.freezeMethods(Na);function BT(r,e){const t=this||mg,n=e||t,i=Na.from(n.headers);let s=n.data;return it.forEach(r,function(o){s=o.call(t,s,i.normalize(),e?e.status:void 0)}),i.normalize(),s}function wF(r){return!!(r&&r.__CANCEL__)}function qp(r,e,t){$r.call(this,r??"canceled",$r.ERR_CANCELED,e,t),this.name="CanceledError"}it.inherits(qp,$r,{__CANCEL__:!0});function EF(r,e,t){const n=t.config.validateStatus;!t.status||!n||n(t.status)?r(t):e(new $r("Request failed with status code "+t.status,[$r.ERR_BAD_REQUEST,$r.ERR_BAD_RESPONSE][Math.floor(t.status/100)-4],t.config,t.request,t))}function uH(r){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(r);return e&&e[1]||""}function cH(r,e){r=r||10;const t=new Array(r),n=new Array(r);let i=0,s=0,a;return e=e!==void 0?e:1e3,function(l){const u=Date.now(),c=n[s];a||(a=u),t[i]=l,n[i]=u;let h=s,m=0;for(;h!==i;)m+=t[h++],h=h%r;if(i=(i+1)%r,i===s&&(s=(s+1)%r),u-a<e)return;const g=c&&u-c;return g?Math.round(m*1e3/g):void 0}}function dH(r,e){let t=0,n=1e3/e,i,s;const a=(u,c=Date.now())=>{t=c,i=null,s&&(clearTimeout(s),s=null),r.apply(null,u)};return[(...u)=>{const c=Date.now(),h=c-t;h>=n?a(u,c):(i=u,s||(s=setTimeout(()=>{s=null,a(i)},n-h)))},()=>i&&a(i)]}const R_=(r,e,t=3)=>{let n=0;const i=cH(50,250);return dH(s=>{const a=s.loaded,o=s.lengthComputable?s.total:void 0,l=a-n,u=i(l),c=a<=o;n=a;const h={loaded:a,total:o,progress:o?a/o:void 0,bytes:l,rate:u||void 0,estimated:u&&o&&c?(o-a)/u:void 0,event:s,lengthComputable:o!=null,[e?"download":"upload"]:!0};r(h)},t)},II=(r,e)=>{const t=r!=null;return[n=>e[0]({lengthComputable:t,total:r,loaded:n}),e[1]]},PI=r=>(...e)=>it.asap(()=>r(...e)),hH=Ba.hasStandardBrowserEnv?(function(){const e=Ba.navigator&&/(msie|trident)/i.test(Ba.navigator.userAgent),t=document.createElement("a");let n;function i(s){let a=s;return e&&(t.setAttribute("href",a),a=t.href),t.setAttribute("href",a),{href:t.href,protocol:t.protocol?t.protocol.replace(/:$/,""):"",host:t.host,search:t.search?t.search.replace(/^\?/,""):"",hash:t.hash?t.hash.replace(/^#/,""):"",hostname:t.hostname,port:t.port,pathname:t.pathname.charAt(0)==="/"?t.pathname:"/"+t.pathname}}return n=i(window.location.href),function(a){const o=it.isString(a)?i(a):a;return o.protocol===n.protocol&&o.host===n.host}})():(function(){return function(){return!0}})(),fH=Ba.hasStandardBrowserEnv?{write(r,e,t,n,i,s){const a=[r+"="+encodeURIComponent(e)];it.isNumber(t)&&a.push("expires="+new Date(t).toGMTString()),it.isString(n)&&a.push("path="+n),it.isString(i)&&a.push("domain="+i),s===!0&&a.push("secure"),document.cookie=a.join("; ")},read(r){const e=document.cookie.match(new RegExp("(^|;\\s*)("+r+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(r){this.write(r,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function pH(r){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(r)}function mH(r,e){return e?r.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):r}function kF(r,e){return r&&!pH(e)?mH(r,e):e}const RI=r=>r instanceof Na?{...r}:r;function Hh(r,e){e=e||{};const t={};function n(u,c,h){return it.isPlainObject(u)&&it.isPlainObject(c)?it.merge.call({caseless:h},u,c):it.isPlainObject(c)?it.merge({},c):it.isArray(c)?c.slice():c}function i(u,c,h){if(it.isUndefined(c)){if(!it.isUndefined(u))return n(void 0,u,h)}else return n(u,c,h)}function s(u,c){if(!it.isUndefined(c))return n(void 0,c)}function a(u,c){if(it.isUndefined(c)){if(!it.isUndefined(u))return n(void 0,u)}else return n(void 0,c)}function o(u,c,h){if(h in e)return n(u,c);if(h in r)return n(void 0,u)}const l={url:s,method:s,data:s,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,withXSRFToken:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,beforeRedirect:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:o,headers:(u,c)=>i(RI(u),RI(c),!0)};return it.forEach(Object.keys(Object.assign({},r,e)),function(c){const h=l[c]||i,m=h(r[c],e[c],c);it.isUndefined(m)&&h!==o||(t[c]=m)}),t}const AF=r=>{const e=Hh({},r);let{data:t,withXSRFToken:n,xsrfHeaderName:i,xsrfCookieName:s,headers:a,auth:o}=e;e.headers=a=Na.from(a),e.url=SF(kF(e.baseURL,e.url),r.params,r.paramsSerializer),o&&a.set("Authorization","Basic "+btoa((o.username||"")+":"+(o.password?unescape(encodeURIComponent(o.password)):"")));let l;if(it.isFormData(t)){if(Ba.hasStandardBrowserEnv||Ba.hasStandardBrowserWebWorkerEnv)a.setContentType(void 0);else if((l=a.getContentType())!==!1){const[u,...c]=l?l.split(";").map(h=>h.trim()).filter(Boolean):[];a.setContentType([u||"multipart/form-data",...c].join("; "))}}if(Ba.hasStandardBrowserEnv&&(n&&it.isFunction(n)&&(n=n(e)),n||n!==!1&&hH(e.url))){const u=i&&s&&fH.read(s);u&&a.set(i,u)}return e},gH=typeof XMLHttpRequest<"u",vH=gH&&function(r){return new Promise(function(t,n){const i=AF(r);let s=i.data;const a=Na.from(i.headers).normalize();let{responseType:o,onUploadProgress:l,onDownloadProgress:u}=i,c,h,m,g,y;function v(){g&&g(),y&&y(),i.cancelToken&&i.cancelToken.unsubscribe(c),i.signal&&i.signal.removeEventListener("abort",c)}let x=new XMLHttpRequest;x.open(i.method.toUpperCase(),i.url,!0),x.timeout=i.timeout;function w(){if(!x)return;const D=Na.from("getAllResponseHeaders"in x&&x.getAllResponseHeaders()),A={data:!o||o==="text"||o==="json"?x.responseText:x.response,status:x.status,statusText:x.statusText,headers:D,config:r,request:x};EF(function(N){t(N),v()},function(N){n(N),v()},A),x=null}"onloadend"in x?x.onloadend=w:x.onreadystatechange=function(){!x||x.readyState!==4||x.status===0&&!(x.responseURL&&x.responseURL.indexOf("file:")===0)||setTimeout(w)},x.onabort=function(){x&&(n(new $r("Request aborted",$r.ECONNABORTED,r,x)),x=null)},x.onerror=function(){n(new $r("Network Error",$r.ERR_NETWORK,r,x)),x=null},x.ontimeout=function(){let I=i.timeout?"timeout of "+i.timeout+"ms exceeded":"timeout exceeded";const A=i.transitional||TF;i.timeoutErrorMessage&&(I=i.timeoutErrorMessage),n(new $r(I,A.clarifyTimeoutError?$r.ETIMEDOUT:$r.ECONNABORTED,r,x)),x=null},s===void 0&&a.setContentType(null),"setRequestHeader"in x&&it.forEach(a.toJSON(),function(I,A){x.setRequestHeader(A,I)}),it.isUndefined(i.withCredentials)||(x.withCredentials=!!i.withCredentials),o&&o!=="json"&&(x.responseType=i.responseType),u&&([m,y]=R_(u,!0),x.addEventListener("progress",m)),l&&x.upload&&([h,g]=R_(l),x.upload.addEventListener("progress",h),x.upload.addEventListener("loadend",g)),(i.cancelToken||i.signal)&&(c=D=>{x&&(n(!D||D.type?new qp(null,r,x):D),x.abort(),x=null)},i.cancelToken&&i.cancelToken.subscribe(c),i.signal&&(i.signal.aborted?c():i.signal.addEventListener("abort",c)));const E=uH(i.url);if(E&&Ba.protocols.indexOf(E)===-1){n(new $r("Unsupported protocol "+E+":",$r.ERR_BAD_REQUEST,r));return}x.send(s||null)})},yH=(r,e)=>{const{length:t}=r=r?r.filter(Boolean):[];if(e||t){let n=new AbortController,i;const s=function(u){if(!i){i=!0,o();const c=u instanceof Error?u:this.reason;n.abort(c instanceof $r?c:new qp(c instanceof Error?c.message:c))}};let a=e&&setTimeout(()=>{a=null,s(new $r(`timeout ${e} of ms exceeded`,$r.ETIMEDOUT))},e);const o=()=>{r&&(a&&clearTimeout(a),a=null,r.forEach(u=>{u.unsubscribe?u.unsubscribe(s):u.removeEventListener("abort",s)}),r=null)};r.forEach(u=>u.addEventListener("abort",s));const{signal:l}=n;return l.unsubscribe=()=>it.asap(o),l}},_H=function*(r,e){let t=r.byteLength;if(t<e){yield r;return}let n=0,i;for(;n<t;)i=n+e,yield r.slice(n,i),n=i},xH=async function*(r,e){for await(const t of bH(r))yield*_H(t,e)},bH=async function*(r){if(r[Symbol.asyncIterator]){yield*r;return}const e=r.getReader();try{for(;;){const{done:t,value:n}=await e.read();if(t)break;yield n}}finally{await e.cancel()}},LI=(r,e,t,n)=>{const i=xH(r,e);let s=0,a,o=l=>{a||(a=!0,n&&n(l))};return new ReadableStream({async pull(l){try{const{done:u,value:c}=await i.next();if(u){o(),l.close();return}let h=c.byteLength;if(t){let m=s+=h;t(m)}l.enqueue(new Uint8Array(c))}catch(u){throw o(u),u}},cancel(l){return o(l),i.return()}},{highWaterMark:2})},ab=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",DF=ab&&typeof ReadableStream=="function",SH=ab&&(typeof TextEncoder=="function"?(r=>e=>r.encode(e))(new TextEncoder):async r=>new Uint8Array(await new Response(r).arrayBuffer())),IF=(r,...e)=>{try{return!!r(...e)}catch{return!1}},TH=DF&&IF(()=>{let r=!1;const e=new Request(Ba.origin,{body:new ReadableStream,method:"POST",get duplex(){return r=!0,"half"}}).headers.has("Content-Type");return r&&!e}),OI=64*1024,$C=DF&&IF(()=>it.isReadableStream(new Response("").body)),L_={stream:$C&&(r=>r.body)};ab&&(r=>{["text","arrayBuffer","blob","formData","stream"].forEach(e=>{!L_[e]&&(L_[e]=it.isFunction(r[e])?t=>t[e]():(t,n)=>{throw new $r(`Response type '${e}' is not supported`,$r.ERR_NOT_SUPPORT,n)})})})(new Response);const CH=async r=>{if(r==null)return 0;if(it.isBlob(r))return r.size;if(it.isSpecCompliantForm(r))return(await new Request(Ba.origin,{method:"POST",body:r}).arrayBuffer()).byteLength;if(it.isArrayBufferView(r)||it.isArrayBuffer(r))return r.byteLength;if(it.isURLSearchParams(r)&&(r=r+""),it.isString(r))return(await SH(r)).byteLength},wH=async(r,e)=>{const t=it.toFiniteNumber(r.getContentLength());return t??CH(e)},EH=ab&&(async r=>{let{url:e,method:t,data:n,signal:i,cancelToken:s,timeout:a,onDownloadProgress:o,onUploadProgress:l,responseType:u,headers:c,withCredentials:h="same-origin",fetchOptions:m}=AF(r);u=u?(u+"").toLowerCase():"text";let g=yH([i,s&&s.toAbortSignal()],a),y;const v=g&&g.unsubscribe&&(()=>{g.unsubscribe()});let x;try{if(l&&TH&&t!=="get"&&t!=="head"&&(x=await wH(c,n))!==0){let A=new Request(e,{method:"POST",body:n,duplex:"half"}),L;if(it.isFormData(n)&&(L=A.headers.get("content-type"))&&c.setContentType(L),A.body){const[N,U]=II(x,R_(PI(l)));n=LI(A.body,OI,N,U)}}it.isString(h)||(h=h?"include":"omit");const w="credentials"in Request.prototype;y=new Request(e,{...m,signal:g,method:t.toUpperCase(),headers:c.normalize().toJSON(),body:n,duplex:"half",credentials:w?h:void 0});let E=await fetch(y);const D=$C&&(u==="stream"||u==="response");if($C&&(o||D&&v)){const A={};["status","statusText","headers"].forEach(B=>{A[B]=E[B]});const L=it.toFiniteNumber(E.headers.get("content-length")),[N,U]=o&&II(L,R_(PI(o),!0))||[];E=new Response(LI(E.body,OI,N,()=>{U&&U(),v&&v()}),A)}u=u||"text";let I=await L_[it.findKey(L_,u)||"text"](E,r);return!D&&v&&v(),await new Promise((A,L)=>{EF(A,L,{data:I,headers:Na.from(E.headers),status:E.status,statusText:E.statusText,config:r,request:y})})}catch(w){throw v&&v(),w&&w.name==="TypeError"&&/fetch/i.test(w.message)?Object.assign(new $r("Network Error",$r.ERR_NETWORK,r,y),{cause:w.cause||w}):$r.from(w,w&&w.code,r,y)}}),jC={http:jz,xhr:vH,fetch:EH};it.forEach(jC,(r,e)=>{if(r){try{Object.defineProperty(r,"name",{value:e})}catch{}Object.defineProperty(r,"adapterName",{value:e})}});const MI=r=>`- ${r}`,kH=r=>it.isFunction(r)||r===null||r===!1,PF={getAdapter:r=>{r=it.isArray(r)?r:[r];const{length:e}=r;let t,n;const i={};for(let s=0;s<e;s++){t=r[s];let a;if(n=t,!kH(t)&&(n=jC[(a=String(t)).toLowerCase()],n===void 0))throw new $r(`Unknown adapter '${a}'`);if(n)break;i[a||"#"+s]=n}if(!n){const s=Object.entries(i).map(([o,l])=>`adapter ${o} `+(l===!1?"is not supported by the environment":"is not available in the build"));let a=e?s.length>1?`since :
`+s.map(MI).join(`
`):" "+MI(s[0]):"as no adapter specified";throw new $r("There is no suitable adapter to dispatch the request "+a,"ERR_NOT_SUPPORT")}return n},adapters:jC};function NT(r){if(r.cancelToken&&r.cancelToken.throwIfRequested(),r.signal&&r.signal.aborted)throw new qp(null,r)}function FI(r){return NT(r),r.headers=Na.from(r.headers),r.data=BT.call(r,r.transformRequest),["post","put","patch"].indexOf(r.method)!==-1&&r.headers.setContentType("application/x-www-form-urlencoded",!1),PF.getAdapter(r.adapter||mg.adapter)(r).then(function(n){return NT(r),n.data=BT.call(r,r.transformResponse,n),n.headers=Na.from(n.headers),n},function(n){return wF(n)||(NT(r),n&&n.response&&(n.response.data=BT.call(r,r.transformResponse,n.response),n.response.headers=Na.from(n.response.headers))),Promise.reject(n)})}const RF="1.7.7",jE={};["object","boolean","number","function","string","symbol"].forEach((r,e)=>{jE[r]=function(n){return typeof n===r||"a"+(e<1?"n ":" ")+r}});const BI={};jE.transitional=function(e,t,n){function i(s,a){return"[Axios v"+RF+"] Transitional option '"+s+"'"+a+(n?". "+n:"")}return(s,a,o)=>{if(e===!1)throw new $r(i(a," has been removed"+(t?" in "+t:"")),$r.ERR_DEPRECATED);return t&&!BI[a]&&(BI[a]=!0,console.warn(i(a," has been deprecated since v"+t+" and will be removed in the near future"))),e?e(s,a,o):!0}};function AH(r,e,t){if(typeof r!="object")throw new $r("options must be an object",$r.ERR_BAD_OPTION_VALUE);const n=Object.keys(r);let i=n.length;for(;i-- >0;){const s=n[i],a=e[s];if(a){const o=r[s],l=o===void 0||a(o,s,r);if(l!==!0)throw new $r("option "+s+" must be "+l,$r.ERR_BAD_OPTION_VALUE);continue}if(t!==!0)throw new $r("Unknown option "+s,$r.ERR_BAD_OPTION)}}const zC={assertOptions:AH,validators:jE},sd=zC.validators;let Ih=class{constructor(e){this.defaults=e,this.interceptors={request:new AI,response:new AI}}async request(e,t){try{return await this._request(e,t)}catch(n){if(n instanceof Error){let i;Error.captureStackTrace?Error.captureStackTrace(i={}):i=new Error;const s=i.stack?i.stack.replace(/^.+\n/,""):"";try{n.stack?s&&!String(n.stack).endsWith(s.replace(/^.+\n.+\n/,""))&&(n.stack+=`
`+s):n.stack=s}catch{}}throw n}}_request(e,t){typeof e=="string"?(t=t||{},t.url=e):t=e||{},t=Hh(this.defaults,t);const{transitional:n,paramsSerializer:i,headers:s}=t;n!==void 0&&zC.assertOptions(n,{silentJSONParsing:sd.transitional(sd.boolean),forcedJSONParsing:sd.transitional(sd.boolean),clarifyTimeoutError:sd.transitional(sd.boolean)},!1),i!=null&&(it.isFunction(i)?t.paramsSerializer={serialize:i}:zC.assertOptions(i,{encode:sd.function,serialize:sd.function},!0)),t.method=(t.method||this.defaults.method||"get").toLowerCase();let a=s&&it.merge(s.common,s[t.method]);s&&it.forEach(["delete","get","head","post","put","patch","common"],y=>{delete s[y]}),t.headers=Na.concat(a,s);const o=[];let l=!0;this.interceptors.request.forEach(function(v){typeof v.runWhen=="function"&&v.runWhen(t)===!1||(l=l&&v.synchronous,o.unshift(v.fulfilled,v.rejected))});const u=[];this.interceptors.response.forEach(function(v){u.push(v.fulfilled,v.rejected)});let c,h=0,m;if(!l){const y=[FI.bind(this),void 0];for(y.unshift.apply(y,o),y.push.apply(y,u),m=y.length,c=Promise.resolve(t);h<m;)c=c.then(y[h++],y[h++]);return c}m=o.length;let g=t;for(h=0;h<m;){const y=o[h++],v=o[h++];try{g=y(g)}catch(x){v.call(this,x);break}}try{c=FI.call(this,g)}catch(y){return Promise.reject(y)}for(h=0,m=u.length;h<m;)c=c.then(u[h++],u[h++]);return c}getUri(e){e=Hh(this.defaults,e);const t=kF(e.baseURL,e.url);return SF(t,e.params,e.paramsSerializer)}};it.forEach(["delete","get","head","options"],function(e){Ih.prototype[e]=function(t,n){return this.request(Hh(n||{},{method:e,url:t,data:(n||{}).data}))}});it.forEach(["post","put","patch"],function(e){function t(n){return function(s,a,o){return this.request(Hh(o||{},{method:e,headers:n?{"Content-Type":"multipart/form-data"}:{},url:s,data:a}))}}Ih.prototype[e]=t(),Ih.prototype[e+"Form"]=t(!0)});let DH=class LF{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let t;this.promise=new Promise(function(s){t=s});const n=this;this.promise.then(i=>{if(!n._listeners)return;let s=n._listeners.length;for(;s-- >0;)n._listeners[s](i);n._listeners=null}),this.promise.then=i=>{let s;const a=new Promise(o=>{n.subscribe(o),s=o}).then(i);return a.cancel=function(){n.unsubscribe(s)},a},e(function(s,a,o){n.reason||(n.reason=new qp(s,a,o),t(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);t!==-1&&this._listeners.splice(t,1)}toAbortSignal(){const e=new AbortController,t=n=>{e.abort(n)};return this.subscribe(t),e.signal.unsubscribe=()=>this.unsubscribe(t),e.signal}static source(){let e;return{token:new LF(function(i){e=i}),cancel:e}}};function IH(r){return function(t){return r.apply(null,t)}}function PH(r){return it.isObject(r)&&r.isAxiosError===!0}const HC={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(HC).forEach(([r,e])=>{HC[e]=r});function OF(r){const e=new Ih(r),t=cF(Ih.prototype.request,e);return it.extend(t,Ih.prototype,e,{allOwnKeys:!0}),it.extend(t,e,null,{allOwnKeys:!0}),t.create=function(i){return OF(Hh(r,i))},t}const Ar=OF(mg);Ar.Axios=Ih;Ar.CanceledError=qp;Ar.CancelToken=DH;Ar.isCancel=wF;Ar.VERSION=RF;Ar.toFormData=sb;Ar.AxiosError=$r;Ar.Cancel=Ar.CanceledError;Ar.all=function(e){return Promise.all(e)};Ar.spread=IH;Ar.isAxiosError=PH;Ar.mergeConfig=Hh;Ar.AxiosHeaders=Na;Ar.formToJSON=r=>CF(it.isHTMLForm(r)?new FormData(r):r);Ar.getAdapter=PF.getAdapter;Ar.HttpStatusCode=HC;Ar.default=Ar;const{Axios:bSe,AxiosError:SSe,CanceledError:TSe,isCancel:CSe,CancelToken:wSe,VERSION:ESe,all:kSe,Cancel:ASe,isAxiosError:DSe,spread:ISe,toFormData:PSe,AxiosHeaders:RSe,HttpStatusCode:LSe,formToJSON:OSe,getAdapter:MSe,mergeConfig:FSe}=Ar,nn={parseOneM3uData:r=>{let e=r.split(`
`);if(e.length>0){let t={};t.url=e[e.length-1];let n=[];if(e.length>2)for(let i=1;i<e.length-1;i++){let o=e[i].replace("#EXTVLCOPT:","").split("="),l=[];for(let y=0;y<o.length;y++)y!==0&&l.push(o[y]);let c=o[0].replace("http-","").split("-"),h=[];for(let y=0;y<c.length;y++)h.push(c[y].charAt(0).toUpperCase()+c[y].slice(1));let m=h.join("-"),g=l.join(":");n.push({key:m,value:g})}return t.tvgId=nn.pregValue(e[0],"tvg-id"),t.copt=n,t.name=nn.parseName(e[0]),t.logoUrl=nn.pregValue(e[0],"tvg-logo"),t.exist=!0,t}return[]},parseM3uBody:(r,e=!1)=>{if(!r)return[];let t=r.split(`
`),n=[],i=null,s=1;for(let a=0;a<t.length;a++){let o=t[a].trim();if(o.startsWith("#EXTINF:")){i&&n.push(i),i=nn.buildM3uBaseObject(),i.index=s;let l=nn.parseName(o);e&&(l=l.replace(/[\[].*?[\]]/g,"").trim()),i.name=l,i.tvgName=nn.pregValue(o,"tvg-name"),i.tvgId=nn.pregValue(o,"tvg-id"),i.groupTitle=nn.pregValue(o,"group-title"),i.tvgLogo=nn.pregValue(o,"tvg-logo"),i.tvgLanguage=nn.pregValue(o,"tvg-language"),i.tvgCountry=nn.pregValue(o,"tvg-country")}else if(o.startsWith("#EXTVLCOPT:")){if(i){let l=o.replace("#EXTVLCOPT:","").split("=");l.length>=2&&i.copt.push({key:l[0],value:l.slice(1).join("=")})}}else o.startsWith("http")&&i&&(i.url=o,i.exist=!0,n.push(i),s++,i=null)}return i&&i.url&&n.push(i),n},parseOriginalBodyToList:(r,e)=>{const t=/#EXTINF:(.*)\n(#EXTVLCOPT:.*\n)*(http[s]*)(.*)/gm;let n=[],i;for(;(i=t.exec(r))!==null;){i.index===t.lastIndex&&t.lastIndex++;let a=[];i.forEach((o,l)=>{a.push(o)}),n.push(a)}let s=[];for(let a=0;a<n.length;a+=1)s.push(nn.parseRowToData(a+1,"#EXTINF:"+n[a][1],n[a][3]+""+n[a][4],n[a][0]));return s.length===0?nn.removeRepeatList(nn.parseQuoteFormat(r),e):nn.removeRepeatList(s,e)},removeRepeatList(r,e){let t={},n=[];for(let i=0;i<r.length;i++)if(t[r[i].url]===void 0){let s=r[i];e!==void 0&&e[r[i].url]!==void 0&&e[r[i].url]!==null&&(s={...s,...e[r[i].url]}),n.push(s),t[r[i].url]=!0}return n},parseQuoteFormat(r){let e=[],t="Undefined",n=r.split(`
`);for(let i=0;i<n.length;i++)if(n[i]!==""){let s=n[i].split(",");if(s!=="")if(s.length>=2&&nn.checkStrIsLink(s[1])&&!nn.checkStrIsLink(s[0])){let a='#EXTINF:-1 tvg-id="" tvg-logo="" group-title="Undefined",'+s[0]+`
`+s[1],o='#EXTINF:-1 tvg-id="" tvg-logo="" group-title="Undefined",'+s[0]+`
`+s[1],l=this.buildM3uBaseObject(i+1,s[1],t,"","","","",s[0],a,o);e.push(l)}else t=s[0];else t="Undefined"}if(e.length===0)throw new Error("");return e},buildM3uBaseObject(r,e,t,n,i,s,a,o,l,u){return o==null&&(o=""),{index:r,url:e,groupTitle:t,tvgLogo:n,tvgName:o,tvgLanguage:i,tvgCountry:s,tvgId:a,name:o,sName:nn.removeNameExtraInfo(o.toLowerCase()).trim(),originalData:l,raw:u,copt:[],status:0,checked:!1,video:null,audio:null,videoType:"",delay:0}},getVideoResolutionList(){return[{name:"",value:"SD"},{name:"720P",value:"HD"},{name:"1080P",value:"FHD"},{name:"4K",value:"UHD"},{name:"8K",value:"FUHD"}]},getVideoResolution(r,e){return r<1280||e<720?"SD":r<1920||e<1080?"HD":r<3840||e<2160?"FHD":r<8192||e<4320?"UHD":"FUHD"},checkStrIsLink(r){const e=/(http|https|lwb|P2p|p2p|p9p|rmtp):\/\/([\w.]+\/?)\S*/;let t=[];return(t=e.exec(r))!==null&&t.forEach((n,i)=>{t.push(n)}),t!==null&&t.length>0},parseRowToData(r,e,t,n){let i=nn.pregValue(e,"group-title");i===""&&(i="Undefined");let s=`${e}
${t}`;return this.buildM3uBaseObject(r,t,i,nn.pregValue(e,"tvg-logo"),nn.parseLanguages(nn.pregValue(e,"tvg-language")),nn.pregValue(e,"tvg-country"),nn.pregValue(e,"tvg-id"),nn.parseName(e),s,n)},parseName:r=>{const e=r.split(",");return e[e.length-1]},parseLanguages:r=>r!==""?r.split(";"):[],pregValue:(r,e)=>{let t;e==="group-title"?t=/group-title="(.*)"/gm:e==="tvg-logo"?t=/tvg-logo="(.*)"/gm:e==="tvg-language"?t=/tvg-language="(.*)"/gm:e==="tvg-country"?t=/tvg-country="(.*)"/gm:e==="tvg-id"?t=/tvg-id="(.*)"/gm:e==="tvg-name"&&(t=/tvg-name="(.*)"/gm);let n,i="";for(;(n=t.exec(r))!==null;)n.index===t.lastIndex&&(t.lastIndex+=1),n.forEach((s,a)=>{a===1&&(i=s)});return i!==""?i.split('" ')[0]:""},checkRespIsValudM3u8Data:r=>r.split(`
`)[0].indexOf("#EXTM3U")!==-1,removeNameExtraInfo:r=>{const e=/\((.*)/gm;let t,n=[];for(;(t=e.exec(r))!==null;)t.index===e.lastIndex&&e.lastIndex++,t.forEach((i,s)=>{n.push(i)});return n.length>=2?r.replace(n[0],""):r}};function RH(r,e,t,n){if(typeof e=="function"?r!==e||!n:!e.has(r))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?n:t==="a"?n.call(r):n?n.value:e.get(r)}function LH(r,e,t,n,i){if(typeof e=="function"?r!==e||!0:!e.has(r))throw new TypeError("Cannot write private member to an object whose class did not declare it");return e.set(r,t),t}var wy;const Go="__TAURI_TO_IPC_KEY__";function OH(r,e=!1){return window.__TAURI_INTERNALS__.transformCallback(r,e)}async function Dt(r,e={},t){return window.__TAURI_INTERNALS__.invoke(r,e,t)}class MH{get rid(){return RH(this,wy,"f")}constructor(e){wy.set(this,void 0),LH(this,wy,e)}async close(){return Dt("plugin:resources|close",{rid:this.rid})}}wy=new WeakMap;const Lr=r=>typeof r=="string",Nm=()=>{let r,e;const t=new Promise((n,i)=>{r=n,e=i});return t.resolve=r,t.reject=e,t},NI=r=>r==null?"":""+r,FH=(r,e,t)=>{r.forEach(n=>{e[n]&&(t[n]=e[n])})},BH=/###/g,UI=r=>r&&r.indexOf("###")>-1?r.replace(BH,"."):r,$I=r=>!r||Lr(r),b0=(r,e,t)=>{const n=Lr(e)?e.split("."):e;let i=0;for(;i<n.length-1;){if($I(r))return{};const s=UI(n[i]);!r[s]&&t&&(r[s]=new t),Object.prototype.hasOwnProperty.call(r,s)?r=r[s]:r={},++i}return $I(r)?{}:{obj:r,k:UI(n[i])}},jI=(r,e,t)=>{const{obj:n,k:i}=b0(r,e,Object);if(n!==void 0||e.length===1){n[i]=t;return}let s=e[e.length-1],a=e.slice(0,e.length-1),o=b0(r,a,Object);for(;o.obj===void 0&&a.length;)s=`${a[a.length-1]}.${s}`,a=a.slice(0,a.length-1),o=b0(r,a,Object),o&&o.obj&&typeof o.obj[`${o.k}.${s}`]<"u"&&(o.obj=void 0);o.obj[`${o.k}.${s}`]=t},NH=(r,e,t,n)=>{const{obj:i,k:s}=b0(r,e,Object);i[s]=i[s]||[],i[s].push(t)},O_=(r,e)=>{const{obj:t,k:n}=b0(r,e);if(t)return t[n]},UH=(r,e,t)=>{const n=O_(r,t);return n!==void 0?n:O_(e,t)},MF=(r,e,t)=>{for(const n in e)n!=="__proto__"&&n!=="constructor"&&(n in r?Lr(r[n])||r[n]instanceof String||Lr(e[n])||e[n]instanceof String?t&&(r[n]=e[n]):MF(r[n],e[n],t):r[n]=e[n]);return r},bf=r=>r.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");var $H={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};const jH=r=>Lr(r)?r.replace(/[&<>"'\/]/g,e=>$H[e]):r;class zH{constructor(e){this.capacity=e,this.regExpMap=new Map,this.regExpQueue=[]}getRegExp(e){const t=this.regExpMap.get(e);if(t!==void 0)return t;const n=new RegExp(e);return this.regExpQueue.length===this.capacity&&this.regExpMap.delete(this.regExpQueue.shift()),this.regExpMap.set(e,n),this.regExpQueue.push(e),n}}const HH=[" ",",","?","!",";"],VH=new zH(20),WH=(r,e,t)=>{e=e||"",t=t||"";const n=HH.filter(a=>e.indexOf(a)<0&&t.indexOf(a)<0);if(n.length===0)return!0;const i=VH.getRegExp(`(${n.map(a=>a==="?"?"\\?":a).join("|")})`);let s=!i.test(r);if(!s){const a=r.indexOf(t);a>0&&!i.test(r.substring(0,a))&&(s=!0)}return s},VC=function(r,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:".";if(!r)return;if(r[e])return r[e];const n=e.split(t);let i=r;for(let s=0;s<n.length;){if(!i||typeof i!="object")return;let a,o="";for(let l=s;l<n.length;++l)if(l!==s&&(o+=t),o+=n[l],a=i[o],a!==void 0){if(["string","number","boolean"].indexOf(typeof a)>-1&&l<n.length-1)continue;s+=l-s+1;break}i=a}return i},M_=r=>r&&r.replace("_","-"),qH={type:"logger",log(r){this.output("log",r)},warn(r){this.output("warn",r)},error(r){this.output("error",r)},output(r,e){console&&console[r]&&console[r].apply(console,e)}};class F_{constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.init(e,t)}init(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.prefix=t.prefix||"i18next:",this.logger=e||qH,this.options=t,this.debug=t.debug}log(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.forward(t,"log","",!0)}warn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.forward(t,"warn","",!0)}error(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.forward(t,"error","")}deprecate(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.forward(t,"warn","WARNING DEPRECATED: ",!0)}forward(e,t,n,i){return i&&!this.debug?null:(Lr(e[0])&&(e[0]=`${n}${this.prefix} ${e[0]}`),this.logger[t](e))}create(e){return new F_(this.logger,{prefix:`${this.prefix}:${e}:`,...this.options})}clone(e){return e=e||this.options,e.prefix=e.prefix||this.prefix,new F_(this.logger,e)}}var ou=new F_;class ob{constructor(){this.observers={}}on(e,t){return e.split(" ").forEach(n=>{this.observers[n]||(this.observers[n]=new Map);const i=this.observers[n].get(t)||0;this.observers[n].set(t,i+1)}),this}off(e,t){if(this.observers[e]){if(!t){delete this.observers[e];return}this.observers[e].delete(t)}}emit(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];this.observers[e]&&Array.from(this.observers[e].entries()).forEach(a=>{let[o,l]=a;for(let u=0;u<l;u++)o(...n)}),this.observers["*"]&&Array.from(this.observers["*"].entries()).forEach(a=>{let[o,l]=a;for(let u=0;u<l;u++)o.apply(o,[e,...n])})}}class zI extends ob{constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{ns:["translation"],defaultNS:"translation"};super(),this.data=e||{},this.options=t,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.options.ignoreJSONStructure===void 0&&(this.options.ignoreJSONStructure=!0)}addNamespaces(e){this.options.ns.indexOf(e)<0&&this.options.ns.push(e)}removeNamespaces(e){const t=this.options.ns.indexOf(e);t>-1&&this.options.ns.splice(t,1)}getResource(e,t,n){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const s=i.keySeparator!==void 0?i.keySeparator:this.options.keySeparator,a=i.ignoreJSONStructure!==void 0?i.ignoreJSONStructure:this.options.ignoreJSONStructure;let o;e.indexOf(".")>-1?o=e.split("."):(o=[e,t],n&&(Array.isArray(n)?o.push(...n):Lr(n)&&s?o.push(...n.split(s)):o.push(n)));const l=O_(this.data,o);return!l&&!t&&!n&&e.indexOf(".")>-1&&(e=o[0],t=o[1],n=o.slice(2).join(".")),l||!a||!Lr(n)?l:VC(this.data&&this.data[e]&&this.data[e][t],n,s)}addResource(e,t,n,i){let s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{silent:!1};const a=s.keySeparator!==void 0?s.keySeparator:this.options.keySeparator;let o=[e,t];n&&(o=o.concat(a?n.split(a):n)),e.indexOf(".")>-1&&(o=e.split("."),i=t,t=o[1]),this.addNamespaces(t),jI(this.data,o,i),s.silent||this.emit("added",e,t,n,i)}addResources(e,t,n){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{silent:!1};for(const s in n)(Lr(n[s])||Array.isArray(n[s]))&&this.addResource(e,t,s,n[s],{silent:!0});i.silent||this.emit("added",e,t,n)}addResourceBundle(e,t,n,i,s){let a=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{silent:!1,skipCopy:!1},o=[e,t];e.indexOf(".")>-1&&(o=e.split("."),i=n,n=t,t=o[1]),this.addNamespaces(t);let l=O_(this.data,o)||{};a.skipCopy||(n=JSON.parse(JSON.stringify(n))),i?MF(l,n,s):l={...l,...n},jI(this.data,o,l),a.silent||this.emit("added",e,t,n)}removeResourceBundle(e,t){this.hasResourceBundle(e,t)&&delete this.data[e][t],this.removeNamespaces(t),this.emit("removed",e,t)}hasResourceBundle(e,t){return this.getResource(e,t)!==void 0}getResourceBundle(e,t){return t||(t=this.options.defaultNS),this.options.compatibilityAPI==="v1"?{...this.getResource(e,t)}:this.getResource(e,t)}getDataByLanguage(e){return this.data[e]}hasLanguageSomeTranslations(e){const t=this.getDataByLanguage(e);return!!(t&&Object.keys(t)||[]).find(i=>t[i]&&Object.keys(t[i]).length>0)}toJSON(){return this.data}}var FF={processors:{},addPostProcessor(r){this.processors[r.name]=r},handle(r,e,t,n,i){return r.forEach(s=>{this.processors[s]&&(e=this.processors[s].process(e,t,n,i))}),e}};const HI={};class B_ extends ob{constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),FH(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],e,this),this.options=t,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.logger=ou.create("translator")}changeLanguage(e){e&&(this.language=e)}exists(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}};if(e==null)return!1;const n=this.resolve(e,t);return n&&n.res!==void 0}extractFromKey(e,t){let n=t.nsSeparator!==void 0?t.nsSeparator:this.options.nsSeparator;n===void 0&&(n=":");const i=t.keySeparator!==void 0?t.keySeparator:this.options.keySeparator;let s=t.ns||this.options.defaultNS||[];const a=n&&e.indexOf(n)>-1,o=!this.options.userDefinedKeySeparator&&!t.keySeparator&&!this.options.userDefinedNsSeparator&&!t.nsSeparator&&!WH(e,n,i);if(a&&!o){const l=e.match(this.interpolator.nestingRegexp);if(l&&l.length>0)return{key:e,namespaces:Lr(s)?[s]:s};const u=e.split(n);(n!==i||n===i&&this.options.ns.indexOf(u[0])>-1)&&(s=u.shift()),e=u.join(i)}return{key:e,namespaces:Lr(s)?[s]:s}}translate(e,t,n){if(typeof t!="object"&&this.options.overloadTranslationOptionHandler&&(t=this.options.overloadTranslationOptionHandler(arguments)),typeof t=="object"&&(t={...t}),t||(t={}),e==null)return"";Array.isArray(e)||(e=[String(e)]);const i=t.returnDetails!==void 0?t.returnDetails:this.options.returnDetails,s=t.keySeparator!==void 0?t.keySeparator:this.options.keySeparator,{key:a,namespaces:o}=this.extractFromKey(e[e.length-1],t),l=o[o.length-1],u=t.lng||this.language,c=t.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(u&&u.toLowerCase()==="cimode"){if(c){const I=t.nsSeparator||this.options.nsSeparator;return i?{res:`${l}${I}${a}`,usedKey:a,exactUsedKey:a,usedLng:u,usedNS:l,usedParams:this.getUsedParamsDetails(t)}:`${l}${I}${a}`}return i?{res:a,usedKey:a,exactUsedKey:a,usedLng:u,usedNS:l,usedParams:this.getUsedParamsDetails(t)}:a}const h=this.resolve(e,t);let m=h&&h.res;const g=h&&h.usedKey||a,y=h&&h.exactUsedKey||a,v=Object.prototype.toString.apply(m),x=["[object Number]","[object Function]","[object RegExp]"],w=t.joinArrays!==void 0?t.joinArrays:this.options.joinArrays,E=!this.i18nFormat||this.i18nFormat.handleAsObject,D=!Lr(m)&&typeof m!="boolean"&&typeof m!="number";if(E&&m&&D&&x.indexOf(v)<0&&!(Lr(w)&&Array.isArray(m))){if(!t.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");const I=this.options.returnedObjectHandler?this.options.returnedObjectHandler(g,m,{...t,ns:o}):`key '${a} (${this.language})' returned an object instead of string.`;return i?(h.res=I,h.usedParams=this.getUsedParamsDetails(t),h):I}if(s){const I=Array.isArray(m),A=I?[]:{},L=I?y:g;for(const N in m)if(Object.prototype.hasOwnProperty.call(m,N)){const U=`${L}${s}${N}`;A[N]=this.translate(U,{...t,joinArrays:!1,ns:o}),A[N]===U&&(A[N]=m[N])}m=A}}else if(E&&Lr(w)&&Array.isArray(m))m=m.join(w),m&&(m=this.extendTranslation(m,e,t,n));else{let I=!1,A=!1;const L=t.count!==void 0&&!Lr(t.count),N=B_.hasDefaultValue(t),U=L?this.pluralResolver.getSuffix(u,t.count,t):"",B=t.ordinal&&L?this.pluralResolver.getSuffix(u,t.count,{ordinal:!1}):"",k=L&&!t.ordinal&&t.count===0&&this.pluralResolver.shouldUseIntlApi(),H=k&&t[`defaultValue${this.options.pluralSeparator}zero`]||t[`defaultValue${U}`]||t[`defaultValue${B}`]||t.defaultValue;!this.isValidLookup(m)&&N&&(I=!0,m=H),this.isValidLookup(m)||(A=!0,m=a);const V=(t.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&A?void 0:m,Q=N&&H!==m&&this.options.updateMissing;if(A||I||Q){if(this.logger.log(Q?"updateKey":"missingKey",u,l,a,Q?H:m),s){const ae=this.resolve(a,{...t,keySeparator:!1});ae&&ae.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let ie=[];const le=this.languageUtils.getFallbackCodes(this.options.fallbackLng,t.lng||this.language);if(this.options.saveMissingTo==="fallback"&&le&&le[0])for(let ae=0;ae<le.length;ae++)ie.push(le[ae]);else this.options.saveMissingTo==="all"?ie=this.languageUtils.toResolveHierarchy(t.lng||this.language):ie.push(t.lng||this.language);const he=(ae,ne,ue)=>{const ee=N&&ue!==m?ue:V;this.options.missingKeyHandler?this.options.missingKeyHandler(ae,l,ne,ee,Q,t):this.backendConnector&&this.backendConnector.saveMissing&&this.backendConnector.saveMissing(ae,l,ne,ee,Q,t),this.emit("missingKey",ae,l,ne,m)};this.options.saveMissing&&(this.options.saveMissingPlurals&&L?ie.forEach(ae=>{const ne=this.pluralResolver.getSuffixes(ae,t);k&&t[`defaultValue${this.options.pluralSeparator}zero`]&&ne.indexOf(`${this.options.pluralSeparator}zero`)<0&&ne.push(`${this.options.pluralSeparator}zero`),ne.forEach(ue=>{he([ae],a+ue,t[`defaultValue${ue}`]||H)})}):he(ie,a,H))}m=this.extendTranslation(m,e,t,h,n),A&&m===a&&this.options.appendNamespaceToMissingKey&&(m=`${l}:${a}`),(A||I)&&this.options.parseMissingKeyHandler&&(this.options.compatibilityAPI!=="v1"?m=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?`${l}:${a}`:a,I?m:void 0):m=this.options.parseMissingKeyHandler(m))}return i?(h.res=m,h.usedParams=this.getUsedParamsDetails(t),h):m}extendTranslation(e,t,n,i,s){var a=this;if(this.i18nFormat&&this.i18nFormat.parse)e=this.i18nFormat.parse(e,{...this.options.interpolation.defaultVariables,...n},n.lng||this.language||i.usedLng,i.usedNS,i.usedKey,{resolved:i});else if(!n.skipInterpolation){n.interpolation&&this.interpolator.init({...n,interpolation:{...this.options.interpolation,...n.interpolation}});const u=Lr(e)&&(n&&n.interpolation&&n.interpolation.skipOnVariables!==void 0?n.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);let c;if(u){const m=e.match(this.interpolator.nestingRegexp);c=m&&m.length}let h=n.replace&&!Lr(n.replace)?n.replace:n;if(this.options.interpolation.defaultVariables&&(h={...this.options.interpolation.defaultVariables,...h}),e=this.interpolator.interpolate(e,h,n.lng||this.language||i.usedLng,n),u){const m=e.match(this.interpolator.nestingRegexp),g=m&&m.length;c<g&&(n.nest=!1)}!n.lng&&this.options.compatibilityAPI!=="v1"&&i&&i.res&&(n.lng=this.language||i.usedLng),n.nest!==!1&&(e=this.interpolator.nest(e,function(){for(var m=arguments.length,g=new Array(m),y=0;y<m;y++)g[y]=arguments[y];return s&&s[0]===g[0]&&!n.context?(a.logger.warn(`It seems you are nesting recursively key: ${g[0]} in key: ${t[0]}`),null):a.translate(...g,t)},n)),n.interpolation&&this.interpolator.reset()}const o=n.postProcess||this.options.postProcess,l=Lr(o)?[o]:o;return e!=null&&l&&l.length&&n.applyPostProcessor!==!1&&(e=FF.handle(l,e,t,this.options&&this.options.postProcessPassResolved?{i18nResolved:{...i,usedParams:this.getUsedParamsDetails(n)},...n}:n,this)),e}resolve(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n,i,s,a,o;return Lr(e)&&(e=[e]),e.forEach(l=>{if(this.isValidLookup(n))return;const u=this.extractFromKey(l,t),c=u.key;i=c;let h=u.namespaces;this.options.fallbackNS&&(h=h.concat(this.options.fallbackNS));const m=t.count!==void 0&&!Lr(t.count),g=m&&!t.ordinal&&t.count===0&&this.pluralResolver.shouldUseIntlApi(),y=t.context!==void 0&&(Lr(t.context)||typeof t.context=="number")&&t.context!=="",v=t.lngs?t.lngs:this.languageUtils.toResolveHierarchy(t.lng||this.language,t.fallbackLng);h.forEach(x=>{this.isValidLookup(n)||(o=x,!HI[`${v[0]}-${x}`]&&this.utils&&this.utils.hasLoadedNamespace&&!this.utils.hasLoadedNamespace(o)&&(HI[`${v[0]}-${x}`]=!0,this.logger.warn(`key "${i}" for languages "${v.join(", ")}" won't get resolved as namespace "${o}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),v.forEach(w=>{if(this.isValidLookup(n))return;a=w;const E=[c];if(this.i18nFormat&&this.i18nFormat.addLookupKeys)this.i18nFormat.addLookupKeys(E,c,w,x,t);else{let I;m&&(I=this.pluralResolver.getSuffix(w,t.count,t));const A=`${this.options.pluralSeparator}zero`,L=`${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;if(m&&(E.push(c+I),t.ordinal&&I.indexOf(L)===0&&E.push(c+I.replace(L,this.options.pluralSeparator)),g&&E.push(c+A)),y){const N=`${c}${this.options.contextSeparator}${t.context}`;E.push(N),m&&(E.push(N+I),t.ordinal&&I.indexOf(L)===0&&E.push(N+I.replace(L,this.options.pluralSeparator)),g&&E.push(N+A))}}let D;for(;D=E.pop();)this.isValidLookup(n)||(s=D,n=this.getResource(w,x,D,t))}))})}),{res:n,usedKey:i,exactUsedKey:s,usedLng:a,usedNS:o}}isValidLookup(e){return e!==void 0&&!(!this.options.returnNull&&e===null)&&!(!this.options.returnEmptyString&&e==="")}getResource(e,t,n){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return this.i18nFormat&&this.i18nFormat.getResource?this.i18nFormat.getResource(e,t,n,i):this.resourceStore.getResource(e,t,n,i)}getUsedParamsDetails(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const t=["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"],n=e.replace&&!Lr(e.replace);let i=n?e.replace:e;if(n&&typeof e.count<"u"&&(i.count=e.count),this.options.interpolation.defaultVariables&&(i={...this.options.interpolation.defaultVariables,...i}),!n){i={...i};for(const s of t)delete i[s]}return i}static hasDefaultValue(e){const t="defaultValue";for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&t===n.substring(0,t.length)&&e[n]!==void 0)return!0;return!1}}const UT=r=>r.charAt(0).toUpperCase()+r.slice(1);class VI{constructor(e){this.options=e,this.supportedLngs=this.options.supportedLngs||!1,this.logger=ou.create("languageUtils")}getScriptPartFromCode(e){if(e=M_(e),!e||e.indexOf("-")<0)return null;const t=e.split("-");return t.length===2||(t.pop(),t[t.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(t.join("-"))}getLanguagePartFromCode(e){if(e=M_(e),!e||e.indexOf("-")<0)return e;const t=e.split("-");return this.formatLanguageCode(t[0])}formatLanguageCode(e){if(Lr(e)&&e.indexOf("-")>-1){if(typeof Intl<"u"&&typeof Intl.getCanonicalLocales<"u")try{let i=Intl.getCanonicalLocales(e)[0];if(i&&this.options.lowerCaseLng&&(i=i.toLowerCase()),i)return i}catch{}const t=["hans","hant","latn","cyrl","cans","mong","arab"];let n=e.split("-");return this.options.lowerCaseLng?n=n.map(i=>i.toLowerCase()):n.length===2?(n[0]=n[0].toLowerCase(),n[1]=n[1].toUpperCase(),t.indexOf(n[1].toLowerCase())>-1&&(n[1]=UT(n[1].toLowerCase()))):n.length===3&&(n[0]=n[0].toLowerCase(),n[1].length===2&&(n[1]=n[1].toUpperCase()),n[0]!=="sgn"&&n[2].length===2&&(n[2]=n[2].toUpperCase()),t.indexOf(n[1].toLowerCase())>-1&&(n[1]=UT(n[1].toLowerCase())),t.indexOf(n[2].toLowerCase())>-1&&(n[2]=UT(n[2].toLowerCase()))),n.join("-")}return this.options.cleanCode||this.options.lowerCaseLng?e.toLowerCase():e}isSupportedCode(e){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(e=this.getLanguagePartFromCode(e)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(e)>-1}getBestMatchFromCodes(e){if(!e)return null;let t;return e.forEach(n=>{if(t)return;const i=this.formatLanguageCode(n);(!this.options.supportedLngs||this.isSupportedCode(i))&&(t=i)}),!t&&this.options.supportedLngs&&e.forEach(n=>{if(t)return;const i=this.getLanguagePartFromCode(n);if(this.isSupportedCode(i))return t=i;t=this.options.supportedLngs.find(s=>{if(s===i)return s;if(!(s.indexOf("-")<0&&i.indexOf("-")<0)&&(s.indexOf("-")>0&&i.indexOf("-")<0&&s.substring(0,s.indexOf("-"))===i||s.indexOf(i)===0&&i.length>1))return s})}),t||(t=this.getFallbackCodes(this.options.fallbackLng)[0]),t}getFallbackCodes(e,t){if(!e)return[];if(typeof e=="function"&&(e=e(t)),Lr(e)&&(e=[e]),Array.isArray(e))return e;if(!t)return e.default||[];let n=e[t];return n||(n=e[this.getScriptPartFromCode(t)]),n||(n=e[this.formatLanguageCode(t)]),n||(n=e[this.getLanguagePartFromCode(t)]),n||(n=e.default),n||[]}toResolveHierarchy(e,t){const n=this.getFallbackCodes(t||this.options.fallbackLng||[],e),i=[],s=a=>{a&&(this.isSupportedCode(a)?i.push(a):this.logger.warn(`rejecting language code not found in supportedLngs: ${a}`))};return Lr(e)&&(e.indexOf("-")>-1||e.indexOf("_")>-1)?(this.options.load!=="languageOnly"&&s(this.formatLanguageCode(e)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&s(this.getScriptPartFromCode(e)),this.options.load!=="currentOnly"&&s(this.getLanguagePartFromCode(e))):Lr(e)&&s(this.formatLanguageCode(e)),n.forEach(a=>{i.indexOf(a)<0&&s(this.formatLanguageCode(a))}),i}}let GH=[{lngs:["ach","ak","am","arn","br","fil","gun","ln","mfe","mg","mi","oc","pt","pt-BR","tg","tl","ti","tr","uz","wa"],nr:[1,2],fc:1},{lngs:["af","an","ast","az","bg","bn","ca","da","de","dev","el","en","eo","es","et","eu","fi","fo","fur","fy","gl","gu","ha","hi","hu","hy","ia","it","kk","kn","ku","lb","mai","ml","mn","mr","nah","nap","nb","ne","nl","nn","no","nso","pa","pap","pms","ps","pt-PT","rm","sco","se","si","so","son","sq","sv","sw","ta","te","tk","ur","yo"],nr:[1,2],fc:2},{lngs:["ay","bo","cgg","fa","ht","id","ja","jbo","ka","km","ko","ky","lo","ms","sah","su","th","tt","ug","vi","wo","zh"],nr:[1],fc:3},{lngs:["be","bs","cnr","dz","hr","ru","sr","uk"],nr:[1,2,5],fc:4},{lngs:["ar"],nr:[0,1,2,3,11,100],fc:5},{lngs:["cs","sk"],nr:[1,2,5],fc:6},{lngs:["csb","pl"],nr:[1,2,5],fc:7},{lngs:["cy"],nr:[1,2,3,8],fc:8},{lngs:["fr"],nr:[1,2],fc:9},{lngs:["ga"],nr:[1,2,3,7,11],fc:10},{lngs:["gd"],nr:[1,2,3,20],fc:11},{lngs:["is"],nr:[1,2],fc:12},{lngs:["jv"],nr:[0,1],fc:13},{lngs:["kw"],nr:[1,2,3,4],fc:14},{lngs:["lt"],nr:[1,2,10],fc:15},{lngs:["lv"],nr:[1,2,0],fc:16},{lngs:["mk"],nr:[1,2],fc:17},{lngs:["mnk"],nr:[0,1,2],fc:18},{lngs:["mt"],nr:[1,2,11,20],fc:19},{lngs:["or"],nr:[2,1],fc:2},{lngs:["ro"],nr:[1,2,20],fc:20},{lngs:["sl"],nr:[5,1,2,3],fc:21},{lngs:["he","iw"],nr:[1,2,20,21],fc:22}],KH={1:r=>+(r>1),2:r=>+(r!=1),3:r=>0,4:r=>r%10==1&&r%100!=11?0:r%10>=2&&r%10<=4&&(r%100<10||r%100>=20)?1:2,5:r=>r==0?0:r==1?1:r==2?2:r%100>=3&&r%100<=10?3:r%100>=11?4:5,6:r=>r==1?0:r>=2&&r<=4?1:2,7:r=>r==1?0:r%10>=2&&r%10<=4&&(r%100<10||r%100>=20)?1:2,8:r=>r==1?0:r==2?1:r!=8&&r!=11?2:3,9:r=>+(r>=2),10:r=>r==1?0:r==2?1:r<7?2:r<11?3:4,11:r=>r==1||r==11?0:r==2||r==12?1:r>2&&r<20?2:3,12:r=>+(r%10!=1||r%100==11),13:r=>+(r!==0),14:r=>r==1?0:r==2?1:r==3?2:3,15:r=>r%10==1&&r%100!=11?0:r%10>=2&&(r%100<10||r%100>=20)?1:2,16:r=>r%10==1&&r%100!=11?0:r!==0?1:2,17:r=>r==1||r%10==1&&r%100!=11?0:1,18:r=>r==0?0:r==1?1:2,19:r=>r==1?0:r==0||r%100>1&&r%100<11?1:r%100>10&&r%100<20?2:3,20:r=>r==1?0:r==0||r%100>0&&r%100<20?1:2,21:r=>r%100==1?1:r%100==2?2:r%100==3||r%100==4?3:0,22:r=>r==1?0:r==2?1:(r<0||r>10)&&r%10==0?2:3};const XH=["v1","v2","v3"],YH=["v4"],WI={zero:0,one:1,two:2,few:3,many:4,other:5},QH=()=>{const r={};return GH.forEach(e=>{e.lngs.forEach(t=>{r[t]={numbers:e.nr,plurals:KH[e.fc]}})}),r};class JH{constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.languageUtils=e,this.options=t,this.logger=ou.create("pluralResolver"),(!this.options.compatibilityJSON||YH.includes(this.options.compatibilityJSON))&&(typeof Intl>"u"||!Intl.PluralRules)&&(this.options.compatibilityJSON="v3",this.logger.error("Your environment seems not to be Intl API compatible, use an Intl.PluralRules polyfill. Will fallback to the compatibilityJSON v3 format handling.")),this.rules=QH(),this.pluralRulesCache={}}addRule(e,t){this.rules[e]=t}clearCache(){this.pluralRulesCache={}}getRule(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(this.shouldUseIntlApi()){const n=M_(e==="dev"?"en":e),i=t.ordinal?"ordinal":"cardinal",s=JSON.stringify({cleanedCode:n,type:i});if(s in this.pluralRulesCache)return this.pluralRulesCache[s];let a;try{a=new Intl.PluralRules(n,{type:i})}catch{if(!e.match(/-|_/))return;const l=this.languageUtils.getLanguagePartFromCode(e);a=this.getRule(l,t)}return this.pluralRulesCache[s]=a,a}return this.rules[e]||this.rules[this.languageUtils.getLanguagePartFromCode(e)]}needsPlural(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const n=this.getRule(e,t);return this.shouldUseIntlApi()?n&&n.resolvedOptions().pluralCategories.length>1:n&&n.numbers.length>1}getPluralFormsOfKey(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.getSuffixes(e,n).map(i=>`${t}${i}`)}getSuffixes(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const n=this.getRule(e,t);return n?this.shouldUseIntlApi()?n.resolvedOptions().pluralCategories.sort((i,s)=>WI[i]-WI[s]).map(i=>`${this.options.prepend}${t.ordinal?`ordinal${this.options.prepend}`:""}${i}`):n.numbers.map(i=>this.getSuffix(e,i,t)):[]}getSuffix(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const i=this.getRule(e,n);return i?this.shouldUseIntlApi()?`${this.options.prepend}${n.ordinal?`ordinal${this.options.prepend}`:""}${i.select(t)}`:this.getSuffixRetroCompatible(i,t):(this.logger.warn(`no plural rule found for: ${e}`),"")}getSuffixRetroCompatible(e,t){const n=e.noAbs?e.plurals(t):e.plurals(Math.abs(t));let i=e.numbers[n];this.options.simplifyPluralSuffix&&e.numbers.length===2&&e.numbers[0]===1&&(i===2?i="plural":i===1&&(i=""));const s=()=>this.options.prepend&&i.toString()?this.options.prepend+i.toString():i.toString();return this.options.compatibilityJSON==="v1"?i===1?"":typeof i=="number"?`_plural_${i.toString()}`:s():this.options.compatibilityJSON==="v2"||this.options.simplifyPluralSuffix&&e.numbers.length===2&&e.numbers[0]===1?s():this.options.prepend&&n.toString()?this.options.prepend+n.toString():n.toString()}shouldUseIntlApi(){return!XH.includes(this.options.compatibilityJSON)}}const qI=function(r,e,t){let n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:".",i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,s=UH(r,e,t);return!s&&i&&Lr(t)&&(s=VC(r,t,n),s===void 0&&(s=VC(e,t,n))),s},$T=r=>r.replace(/\$/g,"$$$$");class ZH{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.logger=ou.create("interpolator"),this.options=e,this.format=e.interpolation&&e.interpolation.format||(t=>t),this.init(e)}init(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};e.interpolation||(e.interpolation={escapeValue:!0});const{escape:t,escapeValue:n,useRawValueToEscape:i,prefix:s,prefixEscaped:a,suffix:o,suffixEscaped:l,formatSeparator:u,unescapeSuffix:c,unescapePrefix:h,nestingPrefix:m,nestingPrefixEscaped:g,nestingSuffix:y,nestingSuffixEscaped:v,nestingOptionsSeparator:x,maxReplaces:w,alwaysFormat:E}=e.interpolation;this.escape=t!==void 0?t:jH,this.escapeValue=n!==void 0?n:!0,this.useRawValueToEscape=i!==void 0?i:!1,this.prefix=s?bf(s):a||"{{",this.suffix=o?bf(o):l||"}}",this.formatSeparator=u||",",this.unescapePrefix=c?"":h||"-",this.unescapeSuffix=this.unescapePrefix?"":c||"",this.nestingPrefix=m?bf(m):g||bf("$t("),this.nestingSuffix=y?bf(y):v||bf(")"),this.nestingOptionsSeparator=x||",",this.maxReplaces=w||1e3,this.alwaysFormat=E!==void 0?E:!1,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){const e=(t,n)=>t&&t.source===n?(t.lastIndex=0,t):new RegExp(n,"g");this.regexp=e(this.regexp,`${this.prefix}(.+?)${this.suffix}`),this.regexpUnescape=e(this.regexpUnescape,`${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`),this.nestingRegexp=e(this.nestingRegexp,`${this.nestingPrefix}(.+?)${this.nestingSuffix}`)}interpolate(e,t,n,i){let s,a,o;const l=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{},u=g=>{if(g.indexOf(this.formatSeparator)<0){const w=qI(t,l,g,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(w,void 0,n,{...i,...t,interpolationkey:g}):w}const y=g.split(this.formatSeparator),v=y.shift().trim(),x=y.join(this.formatSeparator).trim();return this.format(qI(t,l,v,this.options.keySeparator,this.options.ignoreJSONStructure),x,n,{...i,...t,interpolationkey:v})};this.resetRegExp();const c=i&&i.missingInterpolationHandler||this.options.missingInterpolationHandler,h=i&&i.interpolation&&i.interpolation.skipOnVariables!==void 0?i.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:g=>$T(g)},{regex:this.regexp,safeValue:g=>this.escapeValue?$T(this.escape(g)):$T(g)}].forEach(g=>{for(o=0;s=g.regex.exec(e);){const y=s[1].trim();if(a=u(y),a===void 0)if(typeof c=="function"){const x=c(e,s,i);a=Lr(x)?x:""}else if(i&&Object.prototype.hasOwnProperty.call(i,y))a="";else if(h){a=s[0];continue}else this.logger.warn(`missed to pass in variable ${y} for interpolating ${e}`),a="";else!Lr(a)&&!this.useRawValueToEscape&&(a=NI(a));const v=g.safeValue(a);if(e=e.replace(s[0],v),h?(g.regex.lastIndex+=a.length,g.regex.lastIndex-=s[0].length):g.regex.lastIndex=0,o++,o>=this.maxReplaces)break}}),e}nest(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i,s,a;const o=(l,u)=>{const c=this.nestingOptionsSeparator;if(l.indexOf(c)<0)return l;const h=l.split(new RegExp(`${c}[ ]*{`));let m=`{${h[1]}`;l=h[0],m=this.interpolate(m,a);const g=m.match(/'/g),y=m.match(/"/g);(g&&g.length%2===0&&!y||y.length%2!==0)&&(m=m.replace(/'/g,'"'));try{a=JSON.parse(m),u&&(a={...u,...a})}catch(v){return this.logger.warn(`failed parsing options string in nesting for key ${l}`,v),`${l}${c}${m}`}return a.defaultValue&&a.defaultValue.indexOf(this.prefix)>-1&&delete a.defaultValue,l};for(;i=this.nestingRegexp.exec(e);){let l=[];a={...n},a=a.replace&&!Lr(a.replace)?a.replace:a,a.applyPostProcessor=!1,delete a.defaultValue;let u=!1;if(i[0].indexOf(this.formatSeparator)!==-1&&!/{.*}/.test(i[1])){const c=i[1].split(this.formatSeparator).map(h=>h.trim());i[1]=c.shift(),l=c,u=!0}if(s=t(o.call(this,i[1].trim(),a),a),s&&i[0]===e&&!Lr(s))return s;Lr(s)||(s=NI(s)),s||(this.logger.warn(`missed to resolve ${i[1]} for nesting ${e}`),s=""),u&&(s=l.reduce((c,h)=>this.format(c,h,n.lng,{...n,interpolationkey:i[1].trim()}),s.trim())),e=e.replace(i[0],s),this.regexp.lastIndex=0}return e}}const eV=r=>{let e=r.toLowerCase().trim();const t={};if(r.indexOf("(")>-1){const n=r.split("(");e=n[0].toLowerCase().trim();const i=n[1].substring(0,n[1].length-1);e==="currency"&&i.indexOf(":")<0?t.currency||(t.currency=i.trim()):e==="relativetime"&&i.indexOf(":")<0?t.range||(t.range=i.trim()):i.split(";").forEach(a=>{if(a){const[o,...l]=a.split(":"),u=l.join(":").trim().replace(/^'+|'+$/g,""),c=o.trim();t[c]||(t[c]=u),u==="false"&&(t[c]=!1),u==="true"&&(t[c]=!0),isNaN(u)||(t[c]=parseInt(u,10))}})}return{formatName:e,formatOptions:t}},Sf=r=>{const e={};return(t,n,i)=>{let s=i;i&&i.interpolationkey&&i.formatParams&&i.formatParams[i.interpolationkey]&&i[i.interpolationkey]&&(s={...s,[i.interpolationkey]:void 0});const a=n+JSON.stringify(s);let o=e[a];return o||(o=r(M_(n),i),e[a]=o),o(t)}};class tV{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.logger=ou.create("formatter"),this.options=e,this.formats={number:Sf((t,n)=>{const i=new Intl.NumberFormat(t,{...n});return s=>i.format(s)}),currency:Sf((t,n)=>{const i=new Intl.NumberFormat(t,{...n,style:"currency"});return s=>i.format(s)}),datetime:Sf((t,n)=>{const i=new Intl.DateTimeFormat(t,{...n});return s=>i.format(s)}),relativetime:Sf((t,n)=>{const i=new Intl.RelativeTimeFormat(t,{...n});return s=>i.format(s,n.range||"day")}),list:Sf((t,n)=>{const i=new Intl.ListFormat(t,{...n});return s=>i.format(s)})},this.init(e)}init(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}};this.formatSeparator=t.interpolation.formatSeparator||","}add(e,t){this.formats[e.toLowerCase().trim()]=t}addCached(e,t){this.formats[e.toLowerCase().trim()]=Sf(t)}format(e,t,n){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const s=t.split(this.formatSeparator);if(s.length>1&&s[0].indexOf("(")>1&&s[0].indexOf(")")<0&&s.find(o=>o.indexOf(")")>-1)){const o=s.findIndex(l=>l.indexOf(")")>-1);s[0]=[s[0],...s.splice(1,o)].join(this.formatSeparator)}return s.reduce((o,l)=>{const{formatName:u,formatOptions:c}=eV(l);if(this.formats[u]){let h=o;try{const m=i&&i.formatParams&&i.formatParams[i.interpolationkey]||{},g=m.locale||m.lng||i.locale||i.lng||n;h=this.formats[u](o,g,{...c,...i,...m})}catch(m){this.logger.warn(m)}return h}else this.logger.warn(`there was no format function for ${u}`);return o},e)}}const rV=(r,e)=>{r.pending[e]!==void 0&&(delete r.pending[e],r.pendingCount--)};class nV extends ob{constructor(e,t,n){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};super(),this.backend=e,this.store=t,this.services=n,this.languageUtils=n.languageUtils,this.options=i,this.logger=ou.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=i.maxParallelReads||10,this.readingCalls=0,this.maxRetries=i.maxRetries>=0?i.maxRetries:5,this.retryTimeout=i.retryTimeout>=1?i.retryTimeout:350,this.state={},this.queue=[],this.backend&&this.backend.init&&this.backend.init(n,i.backend,i)}queueLoad(e,t,n,i){const s={},a={},o={},l={};return e.forEach(u=>{let c=!0;t.forEach(h=>{const m=`${u}|${h}`;!n.reload&&this.store.hasResourceBundle(u,h)?this.state[m]=2:this.state[m]<0||(this.state[m]===1?a[m]===void 0&&(a[m]=!0):(this.state[m]=1,c=!1,a[m]===void 0&&(a[m]=!0),s[m]===void 0&&(s[m]=!0),l[h]===void 0&&(l[h]=!0)))}),c||(o[u]=!0)}),(Object.keys(s).length||Object.keys(a).length)&&this.queue.push({pending:a,pendingCount:Object.keys(a).length,loaded:{},errors:[],callback:i}),{toLoad:Object.keys(s),pending:Object.keys(a),toLoadLanguages:Object.keys(o),toLoadNamespaces:Object.keys(l)}}loaded(e,t,n){const i=e.split("|"),s=i[0],a=i[1];t&&this.emit("failedLoading",s,a,t),!t&&n&&this.store.addResourceBundle(s,a,n,void 0,void 0,{skipCopy:!0}),this.state[e]=t?-1:2,t&&n&&(this.state[e]=0);const o={};this.queue.forEach(l=>{NH(l.loaded,[s],a),rV(l,e),t&&l.errors.push(t),l.pendingCount===0&&!l.done&&(Object.keys(l.loaded).forEach(u=>{o[u]||(o[u]={});const c=l.loaded[u];c.length&&c.forEach(h=>{o[u][h]===void 0&&(o[u][h]=!0)})}),l.done=!0,l.errors.length?l.callback(l.errors):l.callback())}),this.emit("loaded",o),this.queue=this.queue.filter(l=>!l.done)}read(e,t,n){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:this.retryTimeout,a=arguments.length>5?arguments[5]:void 0;if(!e.length)return a(null,{});if(this.readingCalls>=this.maxParallelReads){this.waitingReads.push({lng:e,ns:t,fcName:n,tried:i,wait:s,callback:a});return}this.readingCalls++;const o=(u,c)=>{if(this.readingCalls--,this.waitingReads.length>0){const h=this.waitingReads.shift();this.read(h.lng,h.ns,h.fcName,h.tried,h.wait,h.callback)}if(u&&c&&i<this.maxRetries){setTimeout(()=>{this.read.call(this,e,t,n,i+1,s*2,a)},s);return}a(u,c)},l=this.backend[n].bind(this.backend);if(l.length===2){try{const u=l(e,t);u&&typeof u.then=="function"?u.then(c=>o(null,c)).catch(o):o(null,u)}catch(u){o(u)}return}return l(e,t,o)}prepareLoading(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i=arguments.length>3?arguments[3]:void 0;if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),i&&i();Lr(e)&&(e=this.languageUtils.toResolveHierarchy(e)),Lr(t)&&(t=[t]);const s=this.queueLoad(e,t,n,i);if(!s.toLoad.length)return s.pending.length||i(),null;s.toLoad.forEach(a=>{this.loadOne(a)})}load(e,t,n){this.prepareLoading(e,t,{},n)}reload(e,t,n){this.prepareLoading(e,t,{reload:!0},n)}loadOne(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";const n=e.split("|"),i=n[0],s=n[1];this.read(i,s,"read",void 0,void 0,(a,o)=>{a&&this.logger.warn(`${t}loading namespace ${s} for language ${i} failed`,a),!a&&o&&this.logger.log(`${t}loaded namespace ${s} for language ${i}`,o),this.loaded(e,a,o)})}saveMissing(e,t,n,i,s){let a=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{},o=arguments.length>6&&arguments[6]!==void 0?arguments[6]:()=>{};if(this.services.utils&&this.services.utils.hasLoadedNamespace&&!this.services.utils.hasLoadedNamespace(t)){this.logger.warn(`did not save key "${n}" as the namespace "${t}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}if(!(n==null||n==="")){if(this.backend&&this.backend.create){const l={...a,isUpdate:s},u=this.backend.create.bind(this.backend);if(u.length<6)try{let c;u.length===5?c=u(e,t,n,i,l):c=u(e,t,n,i),c&&typeof c.then=="function"?c.then(h=>o(null,h)).catch(o):o(null,c)}catch(c){o(c)}else u(e,t,n,i,o,l)}!e||!e[0]||this.store.addResource(e[0],t,n,i)}}}const GI=()=>({debug:!1,initImmediate:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:r=>{let e={};if(typeof r[1]=="object"&&(e=r[1]),Lr(r[1])&&(e.defaultValue=r[1]),Lr(r[2])&&(e.tDescription=r[2]),typeof r[2]=="object"||typeof r[3]=="object"){const t=r[3]||r[2];Object.keys(t).forEach(n=>{e[n]=t[n]})}return e},interpolation:{escapeValue:!0,format:r=>r,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0}}),KI=r=>(Lr(r.ns)&&(r.ns=[r.ns]),Lr(r.fallbackLng)&&(r.fallbackLng=[r.fallbackLng]),Lr(r.fallbackNS)&&(r.fallbackNS=[r.fallbackNS]),r.supportedLngs&&r.supportedLngs.indexOf("cimode")<0&&(r.supportedLngs=r.supportedLngs.concat(["cimode"])),r),Nv=()=>{},iV=r=>{Object.getOwnPropertyNames(Object.getPrototypeOf(r)).forEach(t=>{typeof r[t]=="function"&&(r[t]=r[t].bind(r))})};class H0 extends ob{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;if(super(),this.options=KI(e),this.services={},this.logger=ou,this.modules={external:[]},iV(this),t&&!this.isInitialized&&!e.isClone){if(!this.options.initImmediate)return this.init(e,t),this;setTimeout(()=>{this.init(e,t)},0)}}init(){var e=this;let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;this.isInitializing=!0,typeof t=="function"&&(n=t,t={}),!t.defaultNS&&t.defaultNS!==!1&&t.ns&&(Lr(t.ns)?t.defaultNS=t.ns:t.ns.indexOf("translation")<0&&(t.defaultNS=t.ns[0]));const i=GI();this.options={...i,...this.options,...KI(t)},this.options.compatibilityAPI!=="v1"&&(this.options.interpolation={...i.interpolation,...this.options.interpolation}),t.keySeparator!==void 0&&(this.options.userDefinedKeySeparator=t.keySeparator),t.nsSeparator!==void 0&&(this.options.userDefinedNsSeparator=t.nsSeparator);const s=c=>c?typeof c=="function"?new c:c:null;if(!this.options.isClone){this.modules.logger?ou.init(s(this.modules.logger),this.options):ou.init(null,this.options);let c;this.modules.formatter?c=this.modules.formatter:typeof Intl<"u"&&(c=tV);const h=new VI(this.options);this.store=new zI(this.options.resources,this.options);const m=this.services;m.logger=ou,m.resourceStore=this.store,m.languageUtils=h,m.pluralResolver=new JH(h,{prepend:this.options.pluralSeparator,compatibilityJSON:this.options.compatibilityJSON,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),c&&(!this.options.interpolation.format||this.options.interpolation.format===i.interpolation.format)&&(m.formatter=s(c),m.formatter.init(m,this.options),this.options.interpolation.format=m.formatter.format.bind(m.formatter)),m.interpolator=new ZH(this.options),m.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},m.backendConnector=new nV(s(this.modules.backend),m.resourceStore,m,this.options),m.backendConnector.on("*",function(g){for(var y=arguments.length,v=new Array(y>1?y-1:0),x=1;x<y;x++)v[x-1]=arguments[x];e.emit(g,...v)}),this.modules.languageDetector&&(m.languageDetector=s(this.modules.languageDetector),m.languageDetector.init&&m.languageDetector.init(m,this.options.detection,this.options)),this.modules.i18nFormat&&(m.i18nFormat=s(this.modules.i18nFormat),m.i18nFormat.init&&m.i18nFormat.init(this)),this.translator=new B_(this.services,this.options),this.translator.on("*",function(g){for(var y=arguments.length,v=new Array(y>1?y-1:0),x=1;x<y;x++)v[x-1]=arguments[x];e.emit(g,...v)}),this.modules.external.forEach(g=>{g.init&&g.init(this)})}if(this.format=this.options.interpolation.format,n||(n=Nv),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){const c=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);c.length>0&&c[0]!=="dev"&&(this.options.lng=c[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined"),["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach(c=>{this[c]=function(){return e.store[c](...arguments)}}),["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach(c=>{this[c]=function(){return e.store[c](...arguments),e}});const l=Nm(),u=()=>{const c=(h,m)=>{this.isInitializing=!1,this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),l.resolve(m),n(h,m)};if(this.languages&&this.options.compatibilityAPI!=="v1"&&!this.isInitialized)return c(null,this.t.bind(this));this.changeLanguage(this.options.lng,c)};return this.options.resources||!this.options.initImmediate?u():setTimeout(u,0),l}loadResources(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Nv;const i=Lr(e)?e:this.language;if(typeof e=="function"&&(n=e),!this.options.resources||this.options.partialBundledLanguages){if(i&&i.toLowerCase()==="cimode"&&(!this.options.preload||this.options.preload.length===0))return n();const s=[],a=o=>{if(!o||o==="cimode")return;this.services.languageUtils.toResolveHierarchy(o).forEach(u=>{u!=="cimode"&&s.indexOf(u)<0&&s.push(u)})};i?a(i):this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach(l=>a(l)),this.options.preload&&this.options.preload.forEach(o=>a(o)),this.services.backendConnector.load(s,this.options.ns,o=>{!o&&!this.resolvedLanguage&&this.language&&this.setResolvedLanguage(this.language),n(o)})}else n(null)}reloadResources(e,t,n){const i=Nm();return typeof e=="function"&&(n=e,e=void 0),typeof t=="function"&&(n=t,t=void 0),e||(e=this.languages),t||(t=this.options.ns),n||(n=Nv),this.services.backendConnector.reload(e,t,s=>{i.resolve(),n(s)}),i}use(e){if(!e)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!e.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return e.type==="backend"&&(this.modules.backend=e),(e.type==="logger"||e.log&&e.warn&&e.error)&&(this.modules.logger=e),e.type==="languageDetector"&&(this.modules.languageDetector=e),e.type==="i18nFormat"&&(this.modules.i18nFormat=e),e.type==="postProcessor"&&FF.addPostProcessor(e),e.type==="formatter"&&(this.modules.formatter=e),e.type==="3rdParty"&&this.modules.external.push(e),this}setResolvedLanguage(e){if(!(!e||!this.languages)&&!(["cimode","dev"].indexOf(e)>-1))for(let t=0;t<this.languages.length;t++){const n=this.languages[t];if(!(["cimode","dev"].indexOf(n)>-1)&&this.store.hasLanguageSomeTranslations(n)){this.resolvedLanguage=n;break}}}changeLanguage(e,t){var n=this;this.isLanguageChangingTo=e;const i=Nm();this.emit("languageChanging",e);const s=l=>{this.language=l,this.languages=this.services.languageUtils.toResolveHierarchy(l),this.resolvedLanguage=void 0,this.setResolvedLanguage(l)},a=(l,u)=>{u?(s(u),this.translator.changeLanguage(u),this.isLanguageChangingTo=void 0,this.emit("languageChanged",u),this.logger.log("languageChanged",u)):this.isLanguageChangingTo=void 0,i.resolve(function(){return n.t(...arguments)}),t&&t(l,function(){return n.t(...arguments)})},o=l=>{!e&&!l&&this.services.languageDetector&&(l=[]);const u=Lr(l)?l:this.services.languageUtils.getBestMatchFromCodes(l);u&&(this.language||s(u),this.translator.language||this.translator.changeLanguage(u),this.services.languageDetector&&this.services.languageDetector.cacheUserLanguage&&this.services.languageDetector.cacheUserLanguage(u)),this.loadResources(u,c=>{a(c,u)})};return!e&&this.services.languageDetector&&!this.services.languageDetector.async?o(this.services.languageDetector.detect()):!e&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect.length===0?this.services.languageDetector.detect().then(o):this.services.languageDetector.detect(o):o(e),i}getFixedT(e,t,n){var i=this;const s=function(a,o){let l;if(typeof o!="object"){for(var u=arguments.length,c=new Array(u>2?u-2:0),h=2;h<u;h++)c[h-2]=arguments[h];l=i.options.overloadTranslationOptionHandler([a,o].concat(c))}else l={...o};l.lng=l.lng||s.lng,l.lngs=l.lngs||s.lngs,l.ns=l.ns||s.ns,l.keyPrefix!==""&&(l.keyPrefix=l.keyPrefix||n||s.keyPrefix);const m=i.options.keySeparator||".";let g;return l.keyPrefix&&Array.isArray(a)?g=a.map(y=>`${l.keyPrefix}${m}${y}`):g=l.keyPrefix?`${l.keyPrefix}${m}${a}`:a,i.t(g,l)};return Lr(e)?s.lng=e:s.lngs=e,s.ns=t,s.keyPrefix=n,s}t(){return this.translator&&this.translator.translate(...arguments)}exists(){return this.translator&&this.translator.exists(...arguments)}setDefaultNamespace(e){this.options.defaultNS=e}hasLoadedNamespace(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;const n=t.lng||this.resolvedLanguage||this.languages[0],i=this.options?this.options.fallbackLng:!1,s=this.languages[this.languages.length-1];if(n.toLowerCase()==="cimode")return!0;const a=(o,l)=>{const u=this.services.backendConnector.state[`${o}|${l}`];return u===-1||u===0||u===2};if(t.precheck){const o=t.precheck(this,a);if(o!==void 0)return o}return!!(this.hasResourceBundle(n,e)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||a(n,e)&&(!i||a(s,e)))}loadNamespaces(e,t){const n=Nm();return this.options.ns?(Lr(e)&&(e=[e]),e.forEach(i=>{this.options.ns.indexOf(i)<0&&this.options.ns.push(i)}),this.loadResources(i=>{n.resolve(),t&&t(i)}),n):(t&&t(),Promise.resolve())}loadLanguages(e,t){const n=Nm();Lr(e)&&(e=[e]);const i=this.options.preload||[],s=e.filter(a=>i.indexOf(a)<0&&this.services.languageUtils.isSupportedCode(a));return s.length?(this.options.preload=i.concat(s),this.loadResources(a=>{n.resolve(),t&&t(a)}),n):(t&&t(),Promise.resolve())}dir(e){if(e||(e=this.resolvedLanguage||(this.languages&&this.languages.length>0?this.languages[0]:this.language)),!e)return"rtl";const t=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"],n=this.services&&this.services.languageUtils||new VI(GI());return t.indexOf(n.getLanguagePartFromCode(e))>-1||e.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return new H0(e,t)}cloneInstance(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Nv;const n=e.forkResourceStore;n&&delete e.forkResourceStore;const i={...this.options,...e,isClone:!0},s=new H0(i);return(e.debug!==void 0||e.prefix!==void 0)&&(s.logger=s.logger.clone(e)),["store","services","language"].forEach(o=>{s[o]=this[o]}),s.services={...this.services},s.services.utils={hasLoadedNamespace:s.hasLoadedNamespace.bind(s)},n&&(s.store=new zI(this.store.data,i),s.services.resourceStore=s.store),s.translator=new B_(s.services,i),s.translator.on("*",function(o){for(var l=arguments.length,u=new Array(l>1?l-1:0),c=1;c<l;c++)u[c-1]=arguments[c];s.emit(o,...u)}),s.init(i,t),s.translator.options=i,s.translator.backendConnector.services.utils={hasLoadedNamespace:s.hasLoadedNamespace.bind(s)},s}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}const xs=H0.createInstance();xs.createInstance=H0.createInstance;xs.createInstance;xs.dir;xs.init;xs.loadResources;xs.reloadResources;xs.use;xs.changeLanguage;xs.getFixedT;xs.t;xs.exists;xs.setDefaultNamespace;xs.hasLoadedNamespace;xs.loadNamespaces;xs.loadLanguages;class zE{constructor(...e){this.type="Logical",e.length===1?"Logical"in e[0]?(this.width=e[0].Logical.width,this.height=e[0].Logical.height):(this.width=e[0].width,this.height=e[0].height):(this.width=e[0],this.height=e[1])}toPhysical(e){return new tp(this.width*e,this.height*e)}[Go](){return{width:this.width,height:this.height}}toJSON(){return this[Go]()}}class tp{constructor(...e){this.type="Physical",e.length===1?"Physical"in e[0]?(this.width=e[0].Physical.width,this.height=e[0].Physical.height):(this.width=e[0].width,this.height=e[0].height):(this.width=e[0],this.height=e[1])}toLogical(e){return new zE(this.width/e,this.height/e)}[Go](){return{width:this.width,height:this.height}}toJSON(){return this[Go]()}}class fd{constructor(e){this.size=e}toLogical(e){return this.size instanceof zE?this.size:this.size.toLogical(e)}toPhysical(e){return this.size instanceof tp?this.size:this.size.toPhysical(e)}[Go](){return{[`${this.size.type}`]:{width:this.size.width,height:this.size.height}}}toJSON(){return this[Go]()}}class BF{constructor(...e){this.type="Logical",e.length===1?"Logical"in e[0]?(this.x=e[0].Logical.x,this.y=e[0].Logical.y):(this.x=e[0].x,this.y=e[0].y):(this.x=e[0],this.y=e[1])}toPhysical(e){return new jo(this.x*e,this.y*e)}[Go](){return{x:this.x,y:this.y}}toJSON(){return this[Go]()}}class jo{constructor(...e){this.type="Physical",e.length===1?"Physical"in e[0]?(this.x=e[0].Physical.x,this.y=e[0].Physical.y):(this.x=e[0].x,this.y=e[0].y):(this.x=e[0],this.y=e[1])}toLogical(e){return new BF(this.x/e,this.y/e)}[Go](){return{x:this.x,y:this.y}}toJSON(){return this[Go]()}}class Hf{constructor(e){this.position=e}toLogical(e){return this.position instanceof BF?this.position:this.position.toLogical(e)}toPhysical(e){return this.position instanceof jo?this.position:this.position.toPhysical(e)}[Go](){return{[`${this.position.type}`]:{x:this.position.x,y:this.position.y}}}toJSON(){return this[Go]()}}var fs;(function(r){r.WINDOW_RESIZED="tauri://resize",r.WINDOW_MOVED="tauri://move",r.WINDOW_CLOSE_REQUESTED="tauri://close-requested",r.WINDOW_DESTROYED="tauri://destroyed",r.WINDOW_FOCUS="tauri://focus",r.WINDOW_BLUR="tauri://blur",r.WINDOW_SCALE_FACTOR_CHANGED="tauri://scale-change",r.WINDOW_THEME_CHANGED="tauri://theme-changed",r.WINDOW_CREATED="tauri://window-created",r.WEBVIEW_CREATED="tauri://webview-created",r.DRAG_ENTER="tauri://drag-enter",r.DRAG_OVER="tauri://drag-over",r.DRAG_DROP="tauri://drag-drop",r.DRAG_LEAVE="tauri://drag-leave"})(fs||(fs={}));async function NF(r,e){await Dt("plugin:event|unlisten",{event:r,eventId:e})}async function gg(r,e,t){var n;const i=typeof t?.target=="string"?{kind:"AnyLabel",label:t.target}:(n=t?.target)!==null&&n!==void 0?n:{kind:"Any"};return Dt("plugin:event|listen",{event:r,target:i,handler:OH(e)}).then(s=>async()=>NF(r,s))}async function HE(r,e,t){return gg(r,n=>{NF(r,n.id),e(n)},t)}async function VE(r,e){await Dt("plugin:event|emit",{event:r,payload:e})}async function UF(r,e,t){await Dt("plugin:event|emit_to",{target:typeof r=="string"?{kind:"AnyLabel",label:r}:r,event:e,payload:t})}let sV=class Ey extends MH{constructor(e){super(e)}static async new(e,t,n){return Dt("plugin:image|new",{rgba:WC(e),width:t,height:n}).then(i=>new Ey(i))}static async fromBytes(e){return Dt("plugin:image|from_bytes",{bytes:WC(e)}).then(t=>new Ey(t))}static async fromPath(e){return Dt("plugin:image|from_path",{path:e}).then(t=>new Ey(t))}async rgba(){return Dt("plugin:image|rgba",{rid:this.rid}).then(e=>new Uint8Array(e))}async size(){return Dt("plugin:image|size",{rid:this.rid})}};function WC(r){return r==null?null:typeof r=="string"?r:r instanceof sV?r.rid:r}var qC;(function(r){r[r.Critical=1]="Critical",r[r.Informational=2]="Informational"})(qC||(qC={}));class aV{constructor(e){this._preventDefault=!1,this.event=e.event,this.id=e.id}preventDefault(){this._preventDefault=!0}isPreventDefault(){return this._preventDefault}}var XI;(function(r){r.None="none",r.Normal="normal",r.Indeterminate="indeterminate",r.Paused="paused",r.Error="error"})(XI||(XI={}));function $F(){return new lb(window.__TAURI_INTERNALS__.metadata.currentWindow.label,{skip:!0})}async function jT(){return Dt("plugin:window|get_all_windows").then(r=>r.map(e=>new lb(e,{skip:!0})))}const zT=["tauri://created","tauri://error"];class lb{constructor(e,t={}){var n;this.label=e,this.listeners=Object.create(null),t?.skip||Dt("plugin:window|create",{options:{...t,parent:typeof t.parent=="string"?t.parent:(n=t.parent)===null||n===void 0?void 0:n.label,label:e}}).then(async()=>this.emit("tauri://created")).catch(async i=>this.emit("tauri://error",i))}static async getByLabel(e){var t;return(t=(await jT()).find(n=>n.label===e))!==null&&t!==void 0?t:null}static getCurrent(){return $F()}static async getAll(){return jT()}static async getFocusedWindow(){for(const e of await jT())if(await e.isFocused())return e;return null}async listen(e,t){return this._handleTauriEvent(e,t)?()=>{const n=this.listeners[e];n.splice(n.indexOf(t),1)}:gg(e,t,{target:{kind:"Window",label:this.label}})}async once(e,t){return this._handleTauriEvent(e,t)?()=>{const n=this.listeners[e];n.splice(n.indexOf(t),1)}:HE(e,t,{target:{kind:"Window",label:this.label}})}async emit(e,t){if(zT.includes(e)){for(const n of this.listeners[e]||[])n({event:e,id:-1,payload:t});return}return VE(e,t)}async emitTo(e,t,n){if(zT.includes(t)){for(const i of this.listeners[t]||[])i({event:t,id:-1,payload:n});return}return UF(e,t,n)}_handleTauriEvent(e,t){return zT.includes(e)?(e in this.listeners?this.listeners[e].push(t):this.listeners[e]=[t],!0):!1}async scaleFactor(){return Dt("plugin:window|scale_factor",{label:this.label})}async innerPosition(){return Dt("plugin:window|inner_position",{label:this.label}).then(e=>new jo(e))}async outerPosition(){return Dt("plugin:window|outer_position",{label:this.label}).then(e=>new jo(e))}async innerSize(){return Dt("plugin:window|inner_size",{label:this.label}).then(e=>new tp(e))}async outerSize(){return Dt("plugin:window|outer_size",{label:this.label}).then(e=>new tp(e))}async isFullscreen(){return Dt("plugin:window|is_fullscreen",{label:this.label})}async isMinimized(){return Dt("plugin:window|is_minimized",{label:this.label})}async isMaximized(){return Dt("plugin:window|is_maximized",{label:this.label})}async isFocused(){return Dt("plugin:window|is_focused",{label:this.label})}async isDecorated(){return Dt("plugin:window|is_decorated",{label:this.label})}async isResizable(){return Dt("plugin:window|is_resizable",{label:this.label})}async isMaximizable(){return Dt("plugin:window|is_maximizable",{label:this.label})}async isMinimizable(){return Dt("plugin:window|is_minimizable",{label:this.label})}async isClosable(){return Dt("plugin:window|is_closable",{label:this.label})}async isVisible(){return Dt("plugin:window|is_visible",{label:this.label})}async title(){return Dt("plugin:window|title",{label:this.label})}async theme(){return Dt("plugin:window|theme",{label:this.label})}async center(){return Dt("plugin:window|center",{label:this.label})}async requestUserAttention(e){let t=null;return e&&(e===qC.Critical?t={type:"Critical"}:t={type:"Informational"}),Dt("plugin:window|request_user_attention",{label:this.label,value:t})}async setResizable(e){return Dt("plugin:window|set_resizable",{label:this.label,value:e})}async setEnabled(e){return Dt("plugin:window|set_enabled",{label:this.label,value:e})}async isEnabled(){return Dt("plugin:window|is_enabled",{label:this.label})}async setMaximizable(e){return Dt("plugin:window|set_maximizable",{label:this.label,value:e})}async setMinimizable(e){return Dt("plugin:window|set_minimizable",{label:this.label,value:e})}async setClosable(e){return Dt("plugin:window|set_closable",{label:this.label,value:e})}async setTitle(e){return Dt("plugin:window|set_title",{label:this.label,value:e})}async maximize(){return Dt("plugin:window|maximize",{label:this.label})}async unmaximize(){return Dt("plugin:window|unmaximize",{label:this.label})}async toggleMaximize(){return Dt("plugin:window|toggle_maximize",{label:this.label})}async minimize(){return Dt("plugin:window|minimize",{label:this.label})}async unminimize(){return Dt("plugin:window|unminimize",{label:this.label})}async show(){return Dt("plugin:window|show",{label:this.label})}async hide(){return Dt("plugin:window|hide",{label:this.label})}async close(){return Dt("plugin:window|close",{label:this.label})}async destroy(){return Dt("plugin:window|destroy",{label:this.label})}async setDecorations(e){return Dt("plugin:window|set_decorations",{label:this.label,value:e})}async setShadow(e){return Dt("plugin:window|set_shadow",{label:this.label,value:e})}async setEffects(e){return Dt("plugin:window|set_effects",{label:this.label,value:e})}async clearEffects(){return Dt("plugin:window|set_effects",{label:this.label,value:null})}async setAlwaysOnTop(e){return Dt("plugin:window|set_always_on_top",{label:this.label,value:e})}async setAlwaysOnBottom(e){return Dt("plugin:window|set_always_on_bottom",{label:this.label,value:e})}async setContentProtected(e){return Dt("plugin:window|set_content_protected",{label:this.label,value:e})}async setSize(e){return Dt("plugin:window|set_size",{label:this.label,value:e instanceof fd?e:new fd(e)})}async setMinSize(e){return Dt("plugin:window|set_min_size",{label:this.label,value:e instanceof fd?e:e?new fd(e):null})}async setMaxSize(e){return Dt("plugin:window|set_max_size",{label:this.label,value:e instanceof fd?e:e?new fd(e):null})}async setSizeConstraints(e){function t(n){return n?{Logical:n}:null}return Dt("plugin:window|set_size_constraints",{label:this.label,value:{minWidth:t(e?.minWidth),minHeight:t(e?.minHeight),maxWidth:t(e?.maxWidth),maxHeight:t(e?.maxHeight)}})}async setPosition(e){return Dt("plugin:window|set_position",{label:this.label,value:e instanceof Hf?e:new Hf(e)})}async setFullscreen(e){return Dt("plugin:window|set_fullscreen",{label:this.label,value:e})}async setFocus(){return Dt("plugin:window|set_focus",{label:this.label})}async setIcon(e){return Dt("plugin:window|set_icon",{label:this.label,value:WC(e)})}async setSkipTaskbar(e){return Dt("plugin:window|set_skip_taskbar",{label:this.label,value:e})}async setCursorGrab(e){return Dt("plugin:window|set_cursor_grab",{label:this.label,value:e})}async setCursorVisible(e){return Dt("plugin:window|set_cursor_visible",{label:this.label,value:e})}async setCursorIcon(e){return Dt("plugin:window|set_cursor_icon",{label:this.label,value:e})}async setBackgroundColor(e){return Dt("plugin:window|set_background_color",{color:e})}async setCursorPosition(e){return Dt("plugin:window|set_cursor_position",{label:this.label,value:e instanceof Hf?e:new Hf(e)})}async setIgnoreCursorEvents(e){return Dt("plugin:window|set_ignore_cursor_events",{label:this.label,value:e})}async startDragging(){return Dt("plugin:window|start_dragging",{label:this.label})}async startResizeDragging(e){return Dt("plugin:window|start_resize_dragging",{label:this.label,value:e})}async setProgressBar(e){return Dt("plugin:window|set_progress_bar",{label:this.label,value:e})}async setVisibleOnAllWorkspaces(e){return Dt("plugin:window|set_visible_on_all_workspaces",{label:this.label,value:e})}async setTitleBarStyle(e){return Dt("plugin:window|set_title_bar_style",{label:this.label,value:e})}async setTheme(e){return Dt("plugin:window|set_theme",{label:this.label,value:e})}async onResized(e){return this.listen(fs.WINDOW_RESIZED,t=>{t.payload=new tp(t.payload),e(t)})}async onMoved(e){return this.listen(fs.WINDOW_MOVED,t=>{t.payload=new jo(t.payload),e(t)})}async onCloseRequested(e){return this.listen(fs.WINDOW_CLOSE_REQUESTED,async t=>{const n=new aV(t);await e(n),n.isPreventDefault()||await this.destroy()})}async onDragDropEvent(e){const t=await this.listen(fs.DRAG_ENTER,a=>{e({...a,payload:{type:"enter",paths:a.payload.paths,position:new jo(a.payload.position)}})}),n=await this.listen(fs.DRAG_OVER,a=>{e({...a,payload:{type:"over",position:new jo(a.payload.position)}})}),i=await this.listen(fs.DRAG_DROP,a=>{e({...a,payload:{type:"drop",paths:a.payload.paths,position:new jo(a.payload.position)}})}),s=await this.listen(fs.DRAG_LEAVE,a=>{e({...a,payload:{type:"leave"}})});return()=>{t(),i(),n(),s()}}async onFocusChanged(e){const t=await this.listen(fs.WINDOW_FOCUS,i=>{e({...i,payload:!0})}),n=await this.listen(fs.WINDOW_BLUR,i=>{e({...i,payload:!1})});return()=>{t(),n()}}async onScaleChanged(e){return this.listen(fs.WINDOW_SCALE_FACTOR_CHANGED,e)}async onThemeChanged(e){return this.listen(fs.WINDOW_THEME_CHANGED,e)}}var YI;(function(r){r.AppearanceBased="appearanceBased",r.Light="light",r.Dark="dark",r.MediumLight="mediumLight",r.UltraDark="ultraDark",r.Titlebar="titlebar",r.Selection="selection",r.Menu="menu",r.Popover="popover",r.Sidebar="sidebar",r.HeaderView="headerView",r.Sheet="sheet",r.WindowBackground="windowBackground",r.HudWindow="hudWindow",r.FullScreenUI="fullScreenUI",r.Tooltip="tooltip",r.ContentBackground="contentBackground",r.UnderWindowBackground="underWindowBackground",r.UnderPageBackground="underPageBackground",r.Mica="mica",r.Blur="blur",r.Acrylic="acrylic",r.Tabbed="tabbed",r.TabbedDark="tabbedDark",r.TabbedLight="tabbedLight"})(YI||(YI={}));var QI;(function(r){r.FollowsWindowActiveState="followsWindowActiveState",r.Active="active",r.Inactive="inactive"})(QI||(QI={}));function jF(){return new WE($F(),window.__TAURI_INTERNALS__.metadata.currentWebview.label,{skip:!0})}async function JI(){return Dt("plugin:webview|get_all_webviews").then(r=>r.map(e=>new WE(new lb(e.windowLabel,{skip:!0}),e.label,{skip:!0})))}const HT=["tauri://created","tauri://error"];class WE{constructor(e,t,n){this.window=e,this.label=t,this.listeners=Object.create(null),n?.skip||Dt("plugin:webview|create_webview",{windowLabel:e.label,label:t,options:n}).then(async()=>this.emit("tauri://created")).catch(async i=>this.emit("tauri://error",i))}static async getByLabel(e){var t;return(t=(await JI()).find(n=>n.label===e))!==null&&t!==void 0?t:null}static getCurrent(){return jF()}static async getAll(){return JI()}async listen(e,t){return this._handleTauriEvent(e,t)?()=>{const n=this.listeners[e];n.splice(n.indexOf(t),1)}:gg(e,t,{target:{kind:"Webview",label:this.label}})}async once(e,t){return this._handleTauriEvent(e,t)?()=>{const n=this.listeners[e];n.splice(n.indexOf(t),1)}:HE(e,t,{target:{kind:"Webview",label:this.label}})}async emit(e,t){if(HT.includes(e)){for(const n of this.listeners[e]||[])n({event:e,id:-1,payload:t});return}return VE(e,t)}async emitTo(e,t,n){if(HT.includes(t)){for(const i of this.listeners[t]||[])i({event:t,id:-1,payload:n});return}return UF(e,t,n)}_handleTauriEvent(e,t){return HT.includes(e)?(e in this.listeners?this.listeners[e].push(t):this.listeners[e]=[t],!0):!1}async position(){return Dt("plugin:webview|webview_position",{label:this.label}).then(e=>new jo(e))}async size(){return Dt("plugin:webview|webview_size",{label:this.label}).then(e=>new tp(e))}async close(){return Dt("plugin:webview|close",{label:this.label})}async setSize(e){return Dt("plugin:webview|set_webview_size",{label:this.label,value:e instanceof fd?e:new fd(e)})}async setPosition(e){return Dt("plugin:webview|set_webview_position",{label:this.label,value:e instanceof Hf?e:new Hf(e)})}async setFocus(){return Dt("plugin:webview|set_webview_focus",{label:this.label})}async hide(){return Dt("plugin:webview|webview_hide",{label:this.label})}async show(){return Dt("plugin:webview|webview_show",{label:this.label})}async setZoom(e){return Dt("plugin:webview|set_webview_zoom",{label:this.label,value:e})}async reparent(e){return Dt("plugin:webview|reparent",{label:this.label,window:typeof e=="string"?e:e.label})}async clearAllBrowsingData(){return Dt("plugin:webview|clear_all_browsing_data")}async setBackgroundColor(e){return Dt("plugin:webview|set_webview_background_color",{color:e})}async onDragDropEvent(e){const t=await this.listen(fs.DRAG_ENTER,a=>{e({...a,payload:{type:"enter",paths:a.payload.paths,position:new jo(a.payload.position)}})}),n=await this.listen(fs.DRAG_OVER,a=>{e({...a,payload:{type:"over",position:new jo(a.payload.position)}})}),i=await this.listen(fs.DRAG_DROP,a=>{e({...a,payload:{type:"drop",paths:a.payload.paths,position:new jo(a.payload.position)}})}),s=await this.listen(fs.DRAG_LEAVE,a=>{e({...a,payload:{type:"leave"}})});return()=>{t(),i(),n(),s()}}}function N_(){const r=jF();return new Vh(r.label,{skip:!0})}async function ZI(){return Dt("plugin:window|get_all_windows").then(r=>r.map(e=>new Vh(e,{skip:!0})))}class Vh{constructor(e,t={}){var n;this.label=e,this.listeners=Object.create(null),t?.skip||Dt("plugin:webview|create_webview_window",{options:{...t,parent:typeof t.parent=="string"?t.parent:(n=t.parent)===null||n===void 0?void 0:n.label,label:e}}).then(async()=>this.emit("tauri://created")).catch(async i=>this.emit("tauri://error",i))}static async getByLabel(e){var t;const n=(t=(await ZI()).find(i=>i.label===e))!==null&&t!==void 0?t:null;return n?new Vh(n.label,{skip:!0}):null}static getCurrent(){return N_()}static async getAll(){return ZI()}async listen(e,t){return this._handleTauriEvent(e,t)?()=>{const n=this.listeners[e];n.splice(n.indexOf(t),1)}:gg(e,t,{target:{kind:"WebviewWindow",label:this.label}})}async once(e,t){return this._handleTauriEvent(e,t)?()=>{const n=this.listeners[e];n.splice(n.indexOf(t),1)}:HE(e,t,{target:{kind:"WebviewWindow",label:this.label}})}async setBackgroundColor(e){return Dt("plugin:window|set_background_color",{color:e}).then(()=>Dt("plugin:webview|set_webview_background_color",{color:e}))}}oV(Vh,[lb,WE]);function oV(r,e){(Array.isArray(e)?e:[e]).forEach(t=>{Object.getOwnPropertyNames(t.prototype).forEach(n=>{var i;typeof r.prototype=="object"&&r.prototype&&n in r.prototype||Object.defineProperty(r.prototype,n,(i=Object.getOwnPropertyDescriptor(t.prototype,n))!==null&&i!==void 0?i:Object.create(null))})})}var ah={},oh={},VT={},WT={},Um={},eP;function lV(){if(eP)return Um;eP=1;function r(){return window.crypto.getRandomValues(new Uint32Array(1))[0]}function e(i,s=!1){const a=r(),o=`_${a}`;return Object.defineProperty(window,o,{value:l=>(s&&Reflect.deleteProperty(window,o),i?.(l)),writable:!1,configurable:!0}),a}async function t(i,s={}){return new Promise((a,o)=>{const l=e(c=>{a(c),Reflect.deleteProperty(window,`_${u}`)},!0),u=e(c=>{o(c),Reflect.deleteProperty(window,`_${l}`)},!0);window.__TAURI_IPC__({cmd:i,callback:l,error:u,...s})})}function n(i,s="asset"){return window.__TAURI__.convertFileSrc(i,s)}return Um.convertFileSrc=n,Um.invoke=t,Um.transformCallback=e,Um}var tP;function uV(){if(tP)return WT;tP=1;var r=lV();async function e(t){return r.invoke("tauri",t)}return WT.invokeTauriCommand=e,WT}var rP;function cV(){return rP||(rP=1,(function(r){var e=uV();r.ResponseType=void 0,(function(u){u[u.JSON=1]="JSON",u[u.Text=2]="Text",u[u.Binary=3]="Binary"})(r.ResponseType||(r.ResponseType={}));async function t(u){const c={},h=async(m,g)=>{if(g!==null){let y;typeof g=="string"?y=g:g instanceof Uint8Array||Array.isArray(g)?y=Array.from(g):g instanceof File?y={file:Array.from(new Uint8Array(await g.arrayBuffer())),mime:g.type,fileName:g.name}:typeof g.file=="string"?y={file:g.file,mime:g.mime,fileName:g.fileName}:y={file:Array.from(g.file),mime:g.mime,fileName:g.fileName},c[String(m)]=y}};if(u instanceof FormData)for(const[m,g]of u)await h(m,g);else for(const[m,g]of Object.entries(u))await h(m,g);return c}class n{constructor(c,h){this.type=c,this.payload=h}static form(c){return new n("Form",c)}static json(c){return new n("Json",c)}static text(c){return new n("Text",c)}static bytes(c){return new n("Bytes",Array.from(c instanceof ArrayBuffer?new Uint8Array(c):c))}}class i{constructor(c){this.url=c.url,this.status=c.status,this.ok=this.status>=200&&this.status<300,this.headers=c.headers,this.rawHeaders=c.rawHeaders,this.data=c.data}}class s{constructor(c){this.id=c}async drop(){return e.invokeTauriCommand({__tauriModule:"Http",message:{cmd:"dropClient",client:this.id}})}async request(c){var h;const m=!c.responseType||c.responseType===r.ResponseType.JSON;return m&&(c.responseType=r.ResponseType.Text),((h=c.body)===null||h===void 0?void 0:h.type)==="Form"&&(c.body.payload=await t(c.body.payload)),e.invokeTauriCommand({__tauriModule:"Http",message:{cmd:"httpRequest",client:this.id,options:c}}).then(g=>{const y=new i(g);if(m){try{y.data=JSON.parse(y.data)}catch(v){if(y.ok&&y.data==="")y.data={};else if(y.ok)throw Error(`Failed to parse response \`${y.data}\` as JSON: ${v};
              try setting the \`responseType\` option to \`ResponseType.Text\` or \`ResponseType.Binary\` if the API does not return a JSON response.`)}return y}return y})}async get(c,h){return this.request({method:"GET",url:c,...h})}async post(c,h,m){return this.request({method:"POST",url:c,body:h,...m})}async put(c,h,m){return this.request({method:"PUT",url:c,body:h,...m})}async patch(c,h){return this.request({method:"PATCH",url:c,...h})}async delete(c,h){return this.request({method:"DELETE",url:c,...h})}}async function a(u){return e.invokeTauriCommand({__tauriModule:"Http",message:{cmd:"createClient",options:u}}).then(c=>new s(c))}let o=null;async function l(u,c){var h;return o===null&&(o=await a()),o.request({url:u,method:(h=c?.method)!==null&&h!==void 0?h:"GET",...c})}r.Body=n,r.Client=s,r.Response=i,r.fetch=l,r.getClient=a})(VT)),VT}var nP;function dV(){if(nP)return oh;nP=1,Object.defineProperty(oh,"__esModule",{value:!0}),oh.overrideGlobalXHR=oh.TauriXMLHttpRequest=void 0;const r=cV();var e;(function(i){i[i.Unsent=0]="Unsent",i[i.Opened=1]="Opened",i[i.HeadersReceived=2]="HeadersReceived",i[i.Loading=3]="Loading",i[i.Done=4]="Done"})(e||(e={}));class t extends EventTarget{method;url="";headers={};responseHeaders={};_readyState=e.Unsent;_response;_status=0;responseType="";timeout=0;withCredentials=!1;onabort=null;onerror=null;onload=null;onloadend=null;onloadstart=null;onprogress=null;ontimeout=null;onreadystatechange=null;UNSENT=e.Unsent;OPENED=e.Opened;HEADERS_RECEIVED=e.HeadersReceived;LOADING=e.Loading;DONE=e.Done;constructor(){super(),this.addEventListener("abort",s=>{this.onabort?.(s)}),this.addEventListener("error",s=>{this.onerror?.(s)}),this.addEventListener("load",s=>{this.onload?.(s)}),this.addEventListener("loadend",s=>{this.onloadend?.(s)}),this.addEventListener("loadstart",s=>{this.onloadstart?.(s)}),this.addEventListener("progress",s=>{this.onprogress?.(s)}),this.addEventListener("timeout",s=>{this.ontimeout?.(s)}),this.addEventListener("readystatechange",s=>{this.onreadystatechange?.(s)})}set readyState(s){this._readyState=s,this.dispatchEvent(new Event("readystatechange"))}get readyState(){return this._readyState}get response(){return this._response}get responseText(){if(typeof this._response!="string")throw new DOMException("response is not a string");return this._response}get responseURL(){return this.url}get responseXML(){throw new DOMException("git responseXML not implemented")}get status(){return this._status}get statusText(){return String(this._status)}get upload(){throw new DOMException("upload is not implemented")}abort(){throw new DOMException("abort is not implemented")}getAllResponseHeaders(){return Object.entries(this.responseHeaders).map(([s,a])=>`${s}: ${a}`).join(`
`)}getResponseHeader(s){return this.responseHeaders[s]??null}open(s,a){console.debug("open",s,a),this.method=s,this.url=a,this.readyState=e.Opened}overrideMimeType(s){throw new DOMException("overrideMimeType is not implemented")}send(s){console.debug("send",s);const{method:a,url:o,readyState:l}=this;if(!a||!o)throw new Error("method or url is not set");if(l!==e.Opened)throw new DOMException("readyState is not opened");if(s===null&&(s=""),typeof s!="string")throw new DOMException("using non-string body is not implemented");(async()=>{try{const u=await(0,r.getClient)();this.readyState=e.HeadersReceived,this.readyState=e.Loading,this.dispatchEvent(new ProgressEvent("loadstart",{lengthComputable:!0,loaded:0,total:0}));const c=await u.request({method:a,url:o,headers:this.headers,body:r.Body.text(s),responseType:r.ResponseType.Text});console.debug(`response of ${this.url}`,c),this._response=c.data,this._status=c.status,this.responseHeaders=c.headers;const h={lengthComputable:!0,loaded:c.data.length,total:c.data.length};this.dispatchEvent(new ProgressEvent("progress",h)),this.dispatchEvent(new ProgressEvent("load",h)),this.dispatchEvent(new ProgressEvent("loadend",h))}catch(u){console.error(u),this.dispatchEvent(new ErrorEvent("error",{error:u}))}finally{this.readyState=e.Done}})()}setRequestHeader(s,a){this.headers[s]=a}}oh.TauriXMLHttpRequest=t;const n=()=>{window.XMLHttpRequest=t};return oh.overrideGlobalXHR=n,oh}var iP;function hV(){return iP||(iP=1,(function(r){var e=ah&&ah.__createBinding||(Object.create?(function(n,i,s,a){a===void 0&&(a=s);var o=Object.getOwnPropertyDescriptor(i,s);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[s]}}),Object.defineProperty(n,a,o)}):(function(n,i,s,a){a===void 0&&(a=s),n[a]=i[s]})),t=ah&&ah.__exportStar||function(n,i){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(i,s)&&e(i,n,s)};Object.defineProperty(r,"__esModule",{value:!0}),t(dV(),r)})(ah)),ah}hV();var GC;(function(r){r[r.Audio=1]="Audio",r[r.Cache=2]="Cache",r[r.Config=3]="Config",r[r.Data=4]="Data",r[r.LocalData=5]="LocalData",r[r.Document=6]="Document",r[r.Download=7]="Download",r[r.Picture=8]="Picture",r[r.Public=9]="Public",r[r.Video=10]="Video",r[r.Resource=11]="Resource",r[r.Temp=12]="Temp",r[r.AppConfig=13]="AppConfig",r[r.AppData=14]="AppData",r[r.AppLocalData=15]="AppLocalData",r[r.AppCache=16]="AppCache",r[r.AppLog=17]="AppLog",r[r.Desktop=18]="Desktop",r[r.Executable=19]="Executable",r[r.Font=20]="Font",r[r.Home=21]="Home",r[r.Runtime=22]="Runtime",r[r.Template=23]="Template"})(GC||(GC={}));async function fV(){return Dt("plugin:path|resolve_directory",{directory:GC.Download})}var sP;(function(r){r[r.Start=0]="Start",r[r.Current=1]="Current",r[r.End=2]="End"})(sP||(sP={}));async function pV(r,e,t){if(r instanceof URL&&r.protocol!=="file:")throw new TypeError("Must be a file URL.");const n=new TextEncoder;await Dt("plugin:fs|write_text_file",n.encode(e),{headers:{path:encodeURIComponent(r instanceof URL?r.toString():r),options:JSON.stringify(t)}})}async function mV(r={}){return typeof r=="object"&&Object.freeze(r),await Dt("plugin:dialog|save",{options:r})}function gV(){return window.__TAURI_OS_PLUGIN_INTERNALS__.os_type}var ky={exports:{}};function vV(r){throw new Error('Could not dynamically require "'+r+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Ay={exports:{}};const yV={},_V=Object.freeze(Object.defineProperty({__proto__:null,default:yV},Symbol.toStringTag,{value:"Module"})),zF=q9(_V);var xV=Ay.exports,aP;function sn(){return aP||(aP=1,(function(r,e){(function(t,n){r.exports=n()})(xV,function(){var t=t||(function(n,i){var s;if(typeof window<"u"&&window.crypto&&(s=window.crypto),typeof self<"u"&&self.crypto&&(s=self.crypto),typeof globalThis<"u"&&globalThis.crypto&&(s=globalThis.crypto),!s&&typeof window<"u"&&window.msCrypto&&(s=window.msCrypto),!s&&typeof Dh<"u"&&Dh.crypto&&(s=Dh.crypto),!s&&typeof vV=="function")try{s=zF}catch{}var a=function(){if(s){if(typeof s.getRandomValues=="function")try{return s.getRandomValues(new Uint32Array(1))[0]}catch{}if(typeof s.randomBytes=="function")try{return s.randomBytes(4).readInt32LE()}catch{}}throw new Error("Native crypto module could not be used to get secure random number.")},o=Object.create||(function(){function E(){}return function(D){var I;return E.prototype=D,I=new E,E.prototype=null,I}})(),l={},u=l.lib={},c=u.Base=(function(){return{extend:function(E){var D=o(this);return E&&D.mixIn(E),(!D.hasOwnProperty("init")||this.init===D.init)&&(D.init=function(){D.$super.init.apply(this,arguments)}),D.init.prototype=D,D.$super=this,D},create:function(){var E=this.extend();return E.init.apply(E,arguments),E},init:function(){},mixIn:function(E){for(var D in E)E.hasOwnProperty(D)&&(this[D]=E[D]);E.hasOwnProperty("toString")&&(this.toString=E.toString)},clone:function(){return this.init.prototype.extend(this)}}})(),h=u.WordArray=c.extend({init:function(E,D){E=this.words=E||[],D!=i?this.sigBytes=D:this.sigBytes=E.length*4},toString:function(E){return(E||g).stringify(this)},concat:function(E){var D=this.words,I=E.words,A=this.sigBytes,L=E.sigBytes;if(this.clamp(),A%4)for(var N=0;N<L;N++){var U=I[N>>>2]>>>24-N%4*8&255;D[A+N>>>2]|=U<<24-(A+N)%4*8}else for(var B=0;B<L;B+=4)D[A+B>>>2]=I[B>>>2];return this.sigBytes+=L,this},clamp:function(){var E=this.words,D=this.sigBytes;E[D>>>2]&=4294967295<<32-D%4*8,E.length=n.ceil(D/4)},clone:function(){var E=c.clone.call(this);return E.words=this.words.slice(0),E},random:function(E){for(var D=[],I=0;I<E;I+=4)D.push(a());return new h.init(D,E)}}),m=l.enc={},g=m.Hex={stringify:function(E){for(var D=E.words,I=E.sigBytes,A=[],L=0;L<I;L++){var N=D[L>>>2]>>>24-L%4*8&255;A.push((N>>>4).toString(16)),A.push((N&15).toString(16))}return A.join("")},parse:function(E){for(var D=E.length,I=[],A=0;A<D;A+=2)I[A>>>3]|=parseInt(E.substr(A,2),16)<<24-A%8*4;return new h.init(I,D/2)}},y=m.Latin1={stringify:function(E){for(var D=E.words,I=E.sigBytes,A=[],L=0;L<I;L++){var N=D[L>>>2]>>>24-L%4*8&255;A.push(String.fromCharCode(N))}return A.join("")},parse:function(E){for(var D=E.length,I=[],A=0;A<D;A++)I[A>>>2]|=(E.charCodeAt(A)&255)<<24-A%4*8;return new h.init(I,D)}},v=m.Utf8={stringify:function(E){try{return decodeURIComponent(escape(y.stringify(E)))}catch{throw new Error("Malformed UTF-8 data")}},parse:function(E){return y.parse(unescape(encodeURIComponent(E)))}},x=u.BufferedBlockAlgorithm=c.extend({reset:function(){this._data=new h.init,this._nDataBytes=0},_append:function(E){typeof E=="string"&&(E=v.parse(E)),this._data.concat(E),this._nDataBytes+=E.sigBytes},_process:function(E){var D,I=this._data,A=I.words,L=I.sigBytes,N=this.blockSize,U=N*4,B=L/U;E?B=n.ceil(B):B=n.max((B|0)-this._minBufferSize,0);var k=B*N,H=n.min(k*4,L);if(k){for(var q=0;q<k;q+=N)this._doProcessBlock(A,q);D=A.splice(0,k),I.sigBytes-=H}return new h.init(D,H)},clone:function(){var E=c.clone.call(this);return E._data=this._data.clone(),E},_minBufferSize:0});u.Hasher=x.extend({cfg:c.extend(),init:function(E){this.cfg=this.cfg.extend(E),this.reset()},reset:function(){x.reset.call(this),this._doReset()},update:function(E){return this._append(E),this._process(),this},finalize:function(E){E&&this._append(E);var D=this._doFinalize();return D},blockSize:16,_createHelper:function(E){return function(D,I){return new E.init(I).finalize(D)}},_createHmacHelper:function(E){return function(D,I){return new w.HMAC.init(E,I).finalize(D)}}});var w=l.algo={};return l})(Math);return t})})(Ay)),Ay.exports}var Dy={exports:{}},bV=Dy.exports,oP;function ub(){return oP||(oP=1,(function(r,e){(function(t,n){r.exports=n(sn())})(bV,function(t){return(function(n){var i=t,s=i.lib,a=s.Base,o=s.WordArray,l=i.x64={};l.Word=a.extend({init:function(u,c){this.high=u,this.low=c}}),l.WordArray=a.extend({init:function(u,c){u=this.words=u||[],c!=n?this.sigBytes=c:this.sigBytes=u.length*8},toX32:function(){for(var u=this.words,c=u.length,h=[],m=0;m<c;m++){var g=u[m];h.push(g.high),h.push(g.low)}return o.create(h,this.sigBytes)},clone:function(){for(var u=a.clone.call(this),c=u.words=this.words.slice(0),h=c.length,m=0;m<h;m++)c[m]=c[m].clone();return u}})})(),t})})(Dy)),Dy.exports}var Iy={exports:{}},SV=Iy.exports,lP;function TV(){return lP||(lP=1,(function(r,e){(function(t,n){r.exports=n(sn())})(SV,function(t){return(function(){if(typeof ArrayBuffer=="function"){var n=t,i=n.lib,s=i.WordArray,a=s.init,o=s.init=function(l){if(l instanceof ArrayBuffer&&(l=new Uint8Array(l)),(l instanceof Int8Array||typeof Uint8ClampedArray<"u"&&l instanceof Uint8ClampedArray||l instanceof Int16Array||l instanceof Uint16Array||l instanceof Int32Array||l instanceof Uint32Array||l instanceof Float32Array||l instanceof Float64Array)&&(l=new Uint8Array(l.buffer,l.byteOffset,l.byteLength)),l instanceof Uint8Array){for(var u=l.byteLength,c=[],h=0;h<u;h++)c[h>>>2]|=l[h]<<24-h%4*8;a.call(this,c,u)}else a.apply(this,arguments)};o.prototype=s}})(),t.lib.WordArray})})(Iy)),Iy.exports}var Py={exports:{}},CV=Py.exports,uP;function wV(){return uP||(uP=1,(function(r,e){(function(t,n){r.exports=n(sn())})(CV,function(t){return(function(){var n=t,i=n.lib,s=i.WordArray,a=n.enc;a.Utf16=a.Utf16BE={stringify:function(l){for(var u=l.words,c=l.sigBytes,h=[],m=0;m<c;m+=2){var g=u[m>>>2]>>>16-m%4*8&65535;h.push(String.fromCharCode(g))}return h.join("")},parse:function(l){for(var u=l.length,c=[],h=0;h<u;h++)c[h>>>1]|=l.charCodeAt(h)<<16-h%2*16;return s.create(c,u*2)}},a.Utf16LE={stringify:function(l){for(var u=l.words,c=l.sigBytes,h=[],m=0;m<c;m+=2){var g=o(u[m>>>2]>>>16-m%4*8&65535);h.push(String.fromCharCode(g))}return h.join("")},parse:function(l){for(var u=l.length,c=[],h=0;h<u;h++)c[h>>>1]|=o(l.charCodeAt(h)<<16-h%2*16);return s.create(c,u*2)}};function o(l){return l<<8&4278255360|l>>>8&16711935}})(),t.enc.Utf16})})(Py)),Py.exports}var Ry={exports:{}},EV=Ry.exports,cP;function Kh(){return cP||(cP=1,(function(r,e){(function(t,n){r.exports=n(sn())})(EV,function(t){return(function(){var n=t,i=n.lib,s=i.WordArray,a=n.enc;a.Base64={stringify:function(l){var u=l.words,c=l.sigBytes,h=this._map;l.clamp();for(var m=[],g=0;g<c;g+=3)for(var y=u[g>>>2]>>>24-g%4*8&255,v=u[g+1>>>2]>>>24-(g+1)%4*8&255,x=u[g+2>>>2]>>>24-(g+2)%4*8&255,w=y<<16|v<<8|x,E=0;E<4&&g+E*.75<c;E++)m.push(h.charAt(w>>>6*(3-E)&63));var D=h.charAt(64);if(D)for(;m.length%4;)m.push(D);return m.join("")},parse:function(l){var u=l.length,c=this._map,h=this._reverseMap;if(!h){h=this._reverseMap=[];for(var m=0;m<c.length;m++)h[c.charCodeAt(m)]=m}var g=c.charAt(64);if(g){var y=l.indexOf(g);y!==-1&&(u=y)}return o(l,u,h)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="};function o(l,u,c){for(var h=[],m=0,g=0;g<u;g++)if(g%4){var y=c[l.charCodeAt(g-1)]<<g%4*2,v=c[l.charCodeAt(g)]>>>6-g%4*2,x=y|v;h[m>>>2]|=x<<24-m%4*8,m++}return s.create(h,m)}})(),t.enc.Base64})})(Ry)),Ry.exports}var Ly={exports:{}},kV=Ly.exports,dP;function AV(){return dP||(dP=1,(function(r,e){(function(t,n){r.exports=n(sn())})(kV,function(t){return(function(){var n=t,i=n.lib,s=i.WordArray,a=n.enc;a.Base64url={stringify:function(l,u){u===void 0&&(u=!0);var c=l.words,h=l.sigBytes,m=u?this._safe_map:this._map;l.clamp();for(var g=[],y=0;y<h;y+=3)for(var v=c[y>>>2]>>>24-y%4*8&255,x=c[y+1>>>2]>>>24-(y+1)%4*8&255,w=c[y+2>>>2]>>>24-(y+2)%4*8&255,E=v<<16|x<<8|w,D=0;D<4&&y+D*.75<h;D++)g.push(m.charAt(E>>>6*(3-D)&63));var I=m.charAt(64);if(I)for(;g.length%4;)g.push(I);return g.join("")},parse:function(l,u){u===void 0&&(u=!0);var c=l.length,h=u?this._safe_map:this._map,m=this._reverseMap;if(!m){m=this._reverseMap=[];for(var g=0;g<h.length;g++)m[h.charCodeAt(g)]=g}var y=h.charAt(64);if(y){var v=l.indexOf(y);v!==-1&&(c=v)}return o(l,c,m)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",_safe_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"};function o(l,u,c){for(var h=[],m=0,g=0;g<u;g++)if(g%4){var y=c[l.charCodeAt(g-1)]<<g%4*2,v=c[l.charCodeAt(g)]>>>6-g%4*2,x=y|v;h[m>>>2]|=x<<24-m%4*8,m++}return s.create(h,m)}})(),t.enc.Base64url})})(Ly)),Ly.exports}var Oy={exports:{}},DV=Oy.exports,hP;function Xh(){return hP||(hP=1,(function(r,e){(function(t,n){r.exports=n(sn())})(DV,function(t){return(function(n){var i=t,s=i.lib,a=s.WordArray,o=s.Hasher,l=i.algo,u=[];(function(){for(var v=0;v<64;v++)u[v]=n.abs(n.sin(v+1))*4294967296|0})();var c=l.MD5=o.extend({_doReset:function(){this._hash=new a.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(v,x){for(var w=0;w<16;w++){var E=x+w,D=v[E];v[E]=(D<<8|D>>>24)&16711935|(D<<24|D>>>8)&4278255360}var I=this._hash.words,A=v[x+0],L=v[x+1],N=v[x+2],U=v[x+3],B=v[x+4],k=v[x+5],H=v[x+6],q=v[x+7],V=v[x+8],Q=v[x+9],ie=v[x+10],le=v[x+11],he=v[x+12],ae=v[x+13],ne=v[x+14],ue=v[x+15],ee=I[0],pe=I[1],me=I[2],xe=I[3];ee=h(ee,pe,me,xe,A,7,u[0]),xe=h(xe,ee,pe,me,L,12,u[1]),me=h(me,xe,ee,pe,N,17,u[2]),pe=h(pe,me,xe,ee,U,22,u[3]),ee=h(ee,pe,me,xe,B,7,u[4]),xe=h(xe,ee,pe,me,k,12,u[5]),me=h(me,xe,ee,pe,H,17,u[6]),pe=h(pe,me,xe,ee,q,22,u[7]),ee=h(ee,pe,me,xe,V,7,u[8]),xe=h(xe,ee,pe,me,Q,12,u[9]),me=h(me,xe,ee,pe,ie,17,u[10]),pe=h(pe,me,xe,ee,le,22,u[11]),ee=h(ee,pe,me,xe,he,7,u[12]),xe=h(xe,ee,pe,me,ae,12,u[13]),me=h(me,xe,ee,pe,ne,17,u[14]),pe=h(pe,me,xe,ee,ue,22,u[15]),ee=m(ee,pe,me,xe,L,5,u[16]),xe=m(xe,ee,pe,me,H,9,u[17]),me=m(me,xe,ee,pe,le,14,u[18]),pe=m(pe,me,xe,ee,A,20,u[19]),ee=m(ee,pe,me,xe,k,5,u[20]),xe=m(xe,ee,pe,me,ie,9,u[21]),me=m(me,xe,ee,pe,ue,14,u[22]),pe=m(pe,me,xe,ee,B,20,u[23]),ee=m(ee,pe,me,xe,Q,5,u[24]),xe=m(xe,ee,pe,me,ne,9,u[25]),me=m(me,xe,ee,pe,U,14,u[26]),pe=m(pe,me,xe,ee,V,20,u[27]),ee=m(ee,pe,me,xe,ae,5,u[28]),xe=m(xe,ee,pe,me,N,9,u[29]),me=m(me,xe,ee,pe,q,14,u[30]),pe=m(pe,me,xe,ee,he,20,u[31]),ee=g(ee,pe,me,xe,k,4,u[32]),xe=g(xe,ee,pe,me,V,11,u[33]),me=g(me,xe,ee,pe,le,16,u[34]),pe=g(pe,me,xe,ee,ne,23,u[35]),ee=g(ee,pe,me,xe,L,4,u[36]),xe=g(xe,ee,pe,me,B,11,u[37]),me=g(me,xe,ee,pe,q,16,u[38]),pe=g(pe,me,xe,ee,ie,23,u[39]),ee=g(ee,pe,me,xe,ae,4,u[40]),xe=g(xe,ee,pe,me,A,11,u[41]),me=g(me,xe,ee,pe,U,16,u[42]),pe=g(pe,me,xe,ee,H,23,u[43]),ee=g(ee,pe,me,xe,Q,4,u[44]),xe=g(xe,ee,pe,me,he,11,u[45]),me=g(me,xe,ee,pe,ue,16,u[46]),pe=g(pe,me,xe,ee,N,23,u[47]),ee=y(ee,pe,me,xe,A,6,u[48]),xe=y(xe,ee,pe,me,q,10,u[49]),me=y(me,xe,ee,pe,ne,15,u[50]),pe=y(pe,me,xe,ee,k,21,u[51]),ee=y(ee,pe,me,xe,he,6,u[52]),xe=y(xe,ee,pe,me,U,10,u[53]),me=y(me,xe,ee,pe,ie,15,u[54]),pe=y(pe,me,xe,ee,L,21,u[55]),ee=y(ee,pe,me,xe,V,6,u[56]),xe=y(xe,ee,pe,me,ue,10,u[57]),me=y(me,xe,ee,pe,H,15,u[58]),pe=y(pe,me,xe,ee,ae,21,u[59]),ee=y(ee,pe,me,xe,B,6,u[60]),xe=y(xe,ee,pe,me,le,10,u[61]),me=y(me,xe,ee,pe,N,15,u[62]),pe=y(pe,me,xe,ee,Q,21,u[63]),I[0]=I[0]+ee|0,I[1]=I[1]+pe|0,I[2]=I[2]+me|0,I[3]=I[3]+xe|0},_doFinalize:function(){var v=this._data,x=v.words,w=this._nDataBytes*8,E=v.sigBytes*8;x[E>>>5]|=128<<24-E%32;var D=n.floor(w/4294967296),I=w;x[(E+64>>>9<<4)+15]=(D<<8|D>>>24)&16711935|(D<<24|D>>>8)&4278255360,x[(E+64>>>9<<4)+14]=(I<<8|I>>>24)&16711935|(I<<24|I>>>8)&4278255360,v.sigBytes=(x.length+1)*4,this._process();for(var A=this._hash,L=A.words,N=0;N<4;N++){var U=L[N];L[N]=(U<<8|U>>>24)&16711935|(U<<24|U>>>8)&4278255360}return A},clone:function(){var v=o.clone.call(this);return v._hash=this._hash.clone(),v}});function h(v,x,w,E,D,I,A){var L=v+(x&w|~x&E)+D+A;return(L<<I|L>>>32-I)+x}function m(v,x,w,E,D,I,A){var L=v+(x&E|w&~E)+D+A;return(L<<I|L>>>32-I)+x}function g(v,x,w,E,D,I,A){var L=v+(x^w^E)+D+A;return(L<<I|L>>>32-I)+x}function y(v,x,w,E,D,I,A){var L=v+(w^(x|~E))+D+A;return(L<<I|L>>>32-I)+x}i.MD5=o._createHelper(c),i.HmacMD5=o._createHmacHelper(c)})(Math),t.MD5})})(Oy)),Oy.exports}var My={exports:{}},IV=My.exports,fP;function HF(){return fP||(fP=1,(function(r,e){(function(t,n){r.exports=n(sn())})(IV,function(t){return(function(){var n=t,i=n.lib,s=i.WordArray,a=i.Hasher,o=n.algo,l=[],u=o.SHA1=a.extend({_doReset:function(){this._hash=new s.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(c,h){for(var m=this._hash.words,g=m[0],y=m[1],v=m[2],x=m[3],w=m[4],E=0;E<80;E++){if(E<16)l[E]=c[h+E]|0;else{var D=l[E-3]^l[E-8]^l[E-14]^l[E-16];l[E]=D<<1|D>>>31}var I=(g<<5|g>>>27)+w+l[E];E<20?I+=(y&v|~y&x)+1518500249:E<40?I+=(y^v^x)+1859775393:E<60?I+=(y&v|y&x|v&x)-1894007588:I+=(y^v^x)-899497514,w=x,x=v,v=y<<30|y>>>2,y=g,g=I}m[0]=m[0]+g|0,m[1]=m[1]+y|0,m[2]=m[2]+v|0,m[3]=m[3]+x|0,m[4]=m[4]+w|0},_doFinalize:function(){var c=this._data,h=c.words,m=this._nDataBytes*8,g=c.sigBytes*8;return h[g>>>5]|=128<<24-g%32,h[(g+64>>>9<<4)+14]=Math.floor(m/4294967296),h[(g+64>>>9<<4)+15]=m,c.sigBytes=h.length*4,this._process(),this._hash},clone:function(){var c=a.clone.call(this);return c._hash=this._hash.clone(),c}});n.SHA1=a._createHelper(u),n.HmacSHA1=a._createHmacHelper(u)})(),t.SHA1})})(My)),My.exports}var Fy={exports:{}},PV=Fy.exports,pP;function qE(){return pP||(pP=1,(function(r,e){(function(t,n){r.exports=n(sn())})(PV,function(t){return(function(n){var i=t,s=i.lib,a=s.WordArray,o=s.Hasher,l=i.algo,u=[],c=[];(function(){function g(w){for(var E=n.sqrt(w),D=2;D<=E;D++)if(!(w%D))return!1;return!0}function y(w){return(w-(w|0))*4294967296|0}for(var v=2,x=0;x<64;)g(v)&&(x<8&&(u[x]=y(n.pow(v,1/2))),c[x]=y(n.pow(v,1/3)),x++),v++})();var h=[],m=l.SHA256=o.extend({_doReset:function(){this._hash=new a.init(u.slice(0))},_doProcessBlock:function(g,y){for(var v=this._hash.words,x=v[0],w=v[1],E=v[2],D=v[3],I=v[4],A=v[5],L=v[6],N=v[7],U=0;U<64;U++){if(U<16)h[U]=g[y+U]|0;else{var B=h[U-15],k=(B<<25|B>>>7)^(B<<14|B>>>18)^B>>>3,H=h[U-2],q=(H<<15|H>>>17)^(H<<13|H>>>19)^H>>>10;h[U]=k+h[U-7]+q+h[U-16]}var V=I&A^~I&L,Q=x&w^x&E^w&E,ie=(x<<30|x>>>2)^(x<<19|x>>>13)^(x<<10|x>>>22),le=(I<<26|I>>>6)^(I<<21|I>>>11)^(I<<7|I>>>25),he=N+le+V+c[U]+h[U],ae=ie+Q;N=L,L=A,A=I,I=D+he|0,D=E,E=w,w=x,x=he+ae|0}v[0]=v[0]+x|0,v[1]=v[1]+w|0,v[2]=v[2]+E|0,v[3]=v[3]+D|0,v[4]=v[4]+I|0,v[5]=v[5]+A|0,v[6]=v[6]+L|0,v[7]=v[7]+N|0},_doFinalize:function(){var g=this._data,y=g.words,v=this._nDataBytes*8,x=g.sigBytes*8;return y[x>>>5]|=128<<24-x%32,y[(x+64>>>9<<4)+14]=n.floor(v/4294967296),y[(x+64>>>9<<4)+15]=v,g.sigBytes=y.length*4,this._process(),this._hash},clone:function(){var g=o.clone.call(this);return g._hash=this._hash.clone(),g}});i.SHA256=o._createHelper(m),i.HmacSHA256=o._createHmacHelper(m)})(Math),t.SHA256})})(Fy)),Fy.exports}var By={exports:{}},RV=By.exports,mP;function LV(){return mP||(mP=1,(function(r,e){(function(t,n,i){r.exports=n(sn(),qE())})(RV,function(t){return(function(){var n=t,i=n.lib,s=i.WordArray,a=n.algo,o=a.SHA256,l=a.SHA224=o.extend({_doReset:function(){this._hash=new s.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},_doFinalize:function(){var u=o._doFinalize.call(this);return u.sigBytes-=4,u}});n.SHA224=o._createHelper(l),n.HmacSHA224=o._createHmacHelper(l)})(),t.SHA224})})(By)),By.exports}var Ny={exports:{}},OV=Ny.exports,gP;function VF(){return gP||(gP=1,(function(r,e){(function(t,n,i){r.exports=n(sn(),ub())})(OV,function(t){return(function(){var n=t,i=n.lib,s=i.Hasher,a=n.x64,o=a.Word,l=a.WordArray,u=n.algo;function c(){return o.create.apply(o,arguments)}var h=[c(1116352408,3609767458),c(1899447441,602891725),c(3049323471,3964484399),c(3921009573,2173295548),c(961987163,4081628472),c(1508970993,3053834265),c(2453635748,2937671579),c(2870763221,3664609560),c(3624381080,2734883394),c(310598401,1164996542),c(607225278,1323610764),c(1426881987,3590304994),c(1925078388,4068182383),c(2162078206,991336113),c(2614888103,633803317),c(3248222580,3479774868),c(3835390401,2666613458),c(4022224774,944711139),c(264347078,2341262773),c(604807628,2007800933),c(770255983,1495990901),c(1249150122,1856431235),c(1555081692,3175218132),c(1996064986,2198950837),c(2554220882,3999719339),c(2821834349,766784016),c(2952996808,2566594879),c(3210313671,3203337956),c(3336571891,1034457026),c(3584528711,2466948901),c(113926993,3758326383),c(338241895,168717936),c(666307205,1188179964),c(773529912,1546045734),c(1294757372,1522805485),c(1396182291,2643833823),c(1695183700,2343527390),c(1986661051,1014477480),c(2177026350,1206759142),c(2456956037,344077627),c(2730485921,1290863460),c(2820302411,3158454273),c(3259730800,3505952657),c(3345764771,106217008),c(3516065817,3606008344),c(3600352804,1432725776),c(4094571909,1467031594),c(275423344,851169720),c(430227734,3100823752),c(506948616,1363258195),c(659060556,3750685593),c(883997877,3785050280),c(958139571,3318307427),c(1322822218,3812723403),c(1537002063,2003034995),c(1747873779,3602036899),c(1955562222,1575990012),c(2024104815,1125592928),c(2227730452,2716904306),c(2361852424,442776044),c(2428436474,593698344),c(2756734187,3733110249),c(3204031479,2999351573),c(3329325298,3815920427),c(3391569614,3928383900),c(3515267271,566280711),c(3940187606,3454069534),c(4118630271,4000239992),c(116418474,1914138554),c(174292421,2731055270),c(289380356,3203993006),c(460393269,320620315),c(685471733,587496836),c(852142971,1086792851),c(1017036298,365543100),c(1126000580,2618297676),c(1288033470,3409855158),c(1501505948,4234509866),c(1607167915,987167468),c(1816402316,1246189591)],m=[];(function(){for(var y=0;y<80;y++)m[y]=c()})();var g=u.SHA512=s.extend({_doReset:function(){this._hash=new l.init([new o.init(1779033703,4089235720),new o.init(3144134277,2227873595),new o.init(1013904242,4271175723),new o.init(2773480762,1595750129),new o.init(1359893119,2917565137),new o.init(2600822924,725511199),new o.init(528734635,4215389547),new o.init(1541459225,327033209)])},_doProcessBlock:function(y,v){for(var x=this._hash.words,w=x[0],E=x[1],D=x[2],I=x[3],A=x[4],L=x[5],N=x[6],U=x[7],B=w.high,k=w.low,H=E.high,q=E.low,V=D.high,Q=D.low,ie=I.high,le=I.low,he=A.high,ae=A.low,ne=L.high,ue=L.low,ee=N.high,pe=N.low,me=U.high,xe=U.low,Be=B,Oe=k,dt=H,Ke=q,_t=V,Ze=Q,Ot=ie,Nt=le,qe=he,Ue=ae,Pe=ne,$e=ue,rt=ee,lt=pe,ht=me,ut=xe,St=0;St<80;St++){var ot,yr,pr=m[St];if(St<16)yr=pr.high=y[v+St*2]|0,ot=pr.low=y[v+St*2+1]|0;else{var jr=m[St-15],ur=jr.high,Wt=jr.low,mr=(ur>>>1|Wt<<31)^(ur>>>8|Wt<<24)^ur>>>7,Tr=(Wt>>>1|ur<<31)^(Wt>>>8|ur<<24)^(Wt>>>7|ur<<25),Nr=m[St-2],Tt=Nr.high,Ht=Nr.low,An=(Tt>>>19|Ht<<13)^(Tt<<3|Ht>>>29)^Tt>>>6,Vt=(Ht>>>19|Tt<<13)^(Ht<<3|Tt>>>29)^(Ht>>>6|Tt<<26),Cr=m[St-7],Ur=Cr.high,qr=Cr.low,En=m[St-16],Dn=En.high,In=En.low;ot=Tr+qr,yr=mr+Ur+(ot>>>0<Tr>>>0?1:0),ot=ot+Vt,yr=yr+An+(ot>>>0<Vt>>>0?1:0),ot=ot+In,yr=yr+Dn+(ot>>>0<In>>>0?1:0),pr.high=yr,pr.low=ot}var Mr=qe&Pe^~qe&rt,se=Ue&$e^~Ue&lt,fe=Be&dt^Be&_t^dt&_t,Te=Oe&Ke^Oe&Ze^Ke&Ze,je=(Be>>>28|Oe<<4)^(Be<<30|Oe>>>2)^(Be<<25|Oe>>>7),pt=(Oe>>>28|Be<<4)^(Oe<<30|Be>>>2)^(Oe<<25|Be>>>7),Gt=(qe>>>14|Ue<<18)^(qe>>>18|Ue<<14)^(qe<<23|Ue>>>9),be=(Ue>>>14|qe<<18)^(Ue>>>18|qe<<14)^(Ue<<23|qe>>>9),ye=h[St],Ae=ye.high,Ge=ye.low,Xe=ut+be,yt=ht+Gt+(Xe>>>0<ut>>>0?1:0),Xe=Xe+se,yt=yt+Mr+(Xe>>>0<se>>>0?1:0),Xe=Xe+Ge,yt=yt+Ae+(Xe>>>0<Ge>>>0?1:0),Xe=Xe+ot,yt=yt+yr+(Xe>>>0<ot>>>0?1:0),At=pt+Te,st=je+fe+(At>>>0<pt>>>0?1:0);ht=rt,ut=lt,rt=Pe,lt=$e,Pe=qe,$e=Ue,Ue=Nt+Xe|0,qe=Ot+yt+(Ue>>>0<Nt>>>0?1:0)|0,Ot=_t,Nt=Ze,_t=dt,Ze=Ke,dt=Be,Ke=Oe,Oe=Xe+At|0,Be=yt+st+(Oe>>>0<Xe>>>0?1:0)|0}k=w.low=k+Oe,w.high=B+Be+(k>>>0<Oe>>>0?1:0),q=E.low=q+Ke,E.high=H+dt+(q>>>0<Ke>>>0?1:0),Q=D.low=Q+Ze,D.high=V+_t+(Q>>>0<Ze>>>0?1:0),le=I.low=le+Nt,I.high=ie+Ot+(le>>>0<Nt>>>0?1:0),ae=A.low=ae+Ue,A.high=he+qe+(ae>>>0<Ue>>>0?1:0),ue=L.low=ue+$e,L.high=ne+Pe+(ue>>>0<$e>>>0?1:0),pe=N.low=pe+lt,N.high=ee+rt+(pe>>>0<lt>>>0?1:0),xe=U.low=xe+ut,U.high=me+ht+(xe>>>0<ut>>>0?1:0)},_doFinalize:function(){var y=this._data,v=y.words,x=this._nDataBytes*8,w=y.sigBytes*8;v[w>>>5]|=128<<24-w%32,v[(w+128>>>10<<5)+30]=Math.floor(x/4294967296),v[(w+128>>>10<<5)+31]=x,y.sigBytes=v.length*4,this._process();var E=this._hash.toX32();return E},clone:function(){var y=s.clone.call(this);return y._hash=this._hash.clone(),y},blockSize:1024/32});n.SHA512=s._createHelper(g),n.HmacSHA512=s._createHmacHelper(g)})(),t.SHA512})})(Ny)),Ny.exports}var Uy={exports:{}},MV=Uy.exports,vP;function FV(){return vP||(vP=1,(function(r,e){(function(t,n,i){r.exports=n(sn(),ub(),VF())})(MV,function(t){return(function(){var n=t,i=n.x64,s=i.Word,a=i.WordArray,o=n.algo,l=o.SHA512,u=o.SHA384=l.extend({_doReset:function(){this._hash=new a.init([new s.init(3418070365,3238371032),new s.init(1654270250,914150663),new s.init(2438529370,812702999),new s.init(355462360,4144912697),new s.init(1731405415,4290775857),new s.init(2394180231,1750603025),new s.init(3675008525,1694076839),new s.init(1203062813,3204075428)])},_doFinalize:function(){var c=l._doFinalize.call(this);return c.sigBytes-=16,c}});n.SHA384=l._createHelper(u),n.HmacSHA384=l._createHmacHelper(u)})(),t.SHA384})})(Uy)),Uy.exports}var $y={exports:{}},BV=$y.exports,yP;function NV(){return yP||(yP=1,(function(r,e){(function(t,n,i){r.exports=n(sn(),ub())})(BV,function(t){return(function(n){var i=t,s=i.lib,a=s.WordArray,o=s.Hasher,l=i.x64,u=l.Word,c=i.algo,h=[],m=[],g=[];(function(){for(var x=1,w=0,E=0;E<24;E++){h[x+5*w]=(E+1)*(E+2)/2%64;var D=w%5,I=(2*x+3*w)%5;x=D,w=I}for(var x=0;x<5;x++)for(var w=0;w<5;w++)m[x+5*w]=w+(2*x+3*w)%5*5;for(var A=1,L=0;L<24;L++){for(var N=0,U=0,B=0;B<7;B++){if(A&1){var k=(1<<B)-1;k<32?U^=1<<k:N^=1<<k-32}A&128?A=A<<1^113:A<<=1}g[L]=u.create(N,U)}})();var y=[];(function(){for(var x=0;x<25;x++)y[x]=u.create()})();var v=c.SHA3=o.extend({cfg:o.cfg.extend({outputLength:512}),_doReset:function(){for(var x=this._state=[],w=0;w<25;w++)x[w]=new u.init;this.blockSize=(1600-2*this.cfg.outputLength)/32},_doProcessBlock:function(x,w){for(var E=this._state,D=this.blockSize/2,I=0;I<D;I++){var A=x[w+2*I],L=x[w+2*I+1];A=(A<<8|A>>>24)&16711935|(A<<24|A>>>8)&4278255360,L=(L<<8|L>>>24)&16711935|(L<<24|L>>>8)&4278255360;var N=E[I];N.high^=L,N.low^=A}for(var U=0;U<24;U++){for(var B=0;B<5;B++){for(var k=0,H=0,q=0;q<5;q++){var N=E[B+5*q];k^=N.high,H^=N.low}var V=y[B];V.high=k,V.low=H}for(var B=0;B<5;B++)for(var Q=y[(B+4)%5],ie=y[(B+1)%5],le=ie.high,he=ie.low,k=Q.high^(le<<1|he>>>31),H=Q.low^(he<<1|le>>>31),q=0;q<5;q++){var N=E[B+5*q];N.high^=k,N.low^=H}for(var ae=1;ae<25;ae++){var k,H,N=E[ae],ne=N.high,ue=N.low,ee=h[ae];ee<32?(k=ne<<ee|ue>>>32-ee,H=ue<<ee|ne>>>32-ee):(k=ue<<ee-32|ne>>>64-ee,H=ne<<ee-32|ue>>>64-ee);var pe=y[m[ae]];pe.high=k,pe.low=H}var me=y[0],xe=E[0];me.high=xe.high,me.low=xe.low;for(var B=0;B<5;B++)for(var q=0;q<5;q++){var ae=B+5*q,N=E[ae],Be=y[ae],Oe=y[(B+1)%5+5*q],dt=y[(B+2)%5+5*q];N.high=Be.high^~Oe.high&dt.high,N.low=Be.low^~Oe.low&dt.low}var N=E[0],Ke=g[U];N.high^=Ke.high,N.low^=Ke.low}},_doFinalize:function(){var x=this._data,w=x.words;this._nDataBytes*8;var E=x.sigBytes*8,D=this.blockSize*32;w[E>>>5]|=1<<24-E%32,w[(n.ceil((E+1)/D)*D>>>5)-1]|=128,x.sigBytes=w.length*4,this._process();for(var I=this._state,A=this.cfg.outputLength/8,L=A/8,N=[],U=0;U<L;U++){var B=I[U],k=B.high,H=B.low;k=(k<<8|k>>>24)&16711935|(k<<24|k>>>8)&4278255360,H=(H<<8|H>>>24)&16711935|(H<<24|H>>>8)&4278255360,N.push(H),N.push(k)}return new a.init(N,A)},clone:function(){for(var x=o.clone.call(this),w=x._state=this._state.slice(0),E=0;E<25;E++)w[E]=w[E].clone();return x}});i.SHA3=o._createHelper(v),i.HmacSHA3=o._createHmacHelper(v)})(Math),t.SHA3})})($y)),$y.exports}var jy={exports:{}},UV=jy.exports,_P;function $V(){return _P||(_P=1,(function(r,e){(function(t,n){r.exports=n(sn())})(UV,function(t){/** @preserve
			(c) 2012 by Cdric Mesnil. All rights reserved.

			Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:

			    - Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.
			    - Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.

			THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
			*/return(function(n){var i=t,s=i.lib,a=s.WordArray,o=s.Hasher,l=i.algo,u=a.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),c=a.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),h=a.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),m=a.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),g=a.create([0,1518500249,1859775393,2400959708,2840853838]),y=a.create([1352829926,1548603684,1836072691,2053994217,0]),v=l.RIPEMD160=o.extend({_doReset:function(){this._hash=a.create([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(L,N){for(var U=0;U<16;U++){var B=N+U,k=L[B];L[B]=(k<<8|k>>>24)&16711935|(k<<24|k>>>8)&4278255360}var H=this._hash.words,q=g.words,V=y.words,Q=u.words,ie=c.words,le=h.words,he=m.words,ae,ne,ue,ee,pe,me,xe,Be,Oe,dt;me=ae=H[0],xe=ne=H[1],Be=ue=H[2],Oe=ee=H[3],dt=pe=H[4];for(var Ke,U=0;U<80;U+=1)Ke=ae+L[N+Q[U]]|0,U<16?Ke+=x(ne,ue,ee)+q[0]:U<32?Ke+=w(ne,ue,ee)+q[1]:U<48?Ke+=E(ne,ue,ee)+q[2]:U<64?Ke+=D(ne,ue,ee)+q[3]:Ke+=I(ne,ue,ee)+q[4],Ke=Ke|0,Ke=A(Ke,le[U]),Ke=Ke+pe|0,ae=pe,pe=ee,ee=A(ue,10),ue=ne,ne=Ke,Ke=me+L[N+ie[U]]|0,U<16?Ke+=I(xe,Be,Oe)+V[0]:U<32?Ke+=D(xe,Be,Oe)+V[1]:U<48?Ke+=E(xe,Be,Oe)+V[2]:U<64?Ke+=w(xe,Be,Oe)+V[3]:Ke+=x(xe,Be,Oe)+V[4],Ke=Ke|0,Ke=A(Ke,he[U]),Ke=Ke+dt|0,me=dt,dt=Oe,Oe=A(Be,10),Be=xe,xe=Ke;Ke=H[1]+ue+Oe|0,H[1]=H[2]+ee+dt|0,H[2]=H[3]+pe+me|0,H[3]=H[4]+ae+xe|0,H[4]=H[0]+ne+Be|0,H[0]=Ke},_doFinalize:function(){var L=this._data,N=L.words,U=this._nDataBytes*8,B=L.sigBytes*8;N[B>>>5]|=128<<24-B%32,N[(B+64>>>9<<4)+14]=(U<<8|U>>>24)&16711935|(U<<24|U>>>8)&4278255360,L.sigBytes=(N.length+1)*4,this._process();for(var k=this._hash,H=k.words,q=0;q<5;q++){var V=H[q];H[q]=(V<<8|V>>>24)&16711935|(V<<24|V>>>8)&4278255360}return k},clone:function(){var L=o.clone.call(this);return L._hash=this._hash.clone(),L}});function x(L,N,U){return L^N^U}function w(L,N,U){return L&N|~L&U}function E(L,N,U){return(L|~N)^U}function D(L,N,U){return L&U|N&~U}function I(L,N,U){return L^(N|~U)}function A(L,N){return L<<N|L>>>32-N}i.RIPEMD160=o._createHelper(v),i.HmacRIPEMD160=o._createHmacHelper(v)})(),t.RIPEMD160})})(jy)),jy.exports}var zy={exports:{}},jV=zy.exports,xP;function GE(){return xP||(xP=1,(function(r,e){(function(t,n){r.exports=n(sn())})(jV,function(t){(function(){var n=t,i=n.lib,s=i.Base,a=n.enc,o=a.Utf8,l=n.algo;l.HMAC=s.extend({init:function(u,c){u=this._hasher=new u.init,typeof c=="string"&&(c=o.parse(c));var h=u.blockSize,m=h*4;c.sigBytes>m&&(c=u.finalize(c)),c.clamp();for(var g=this._oKey=c.clone(),y=this._iKey=c.clone(),v=g.words,x=y.words,w=0;w<h;w++)v[w]^=1549556828,x[w]^=909522486;g.sigBytes=y.sigBytes=m,this.reset()},reset:function(){var u=this._hasher;u.reset(),u.update(this._iKey)},update:function(u){return this._hasher.update(u),this},finalize:function(u){var c=this._hasher,h=c.finalize(u);c.reset();var m=c.finalize(this._oKey.clone().concat(h));return m}})})()})})(zy)),zy.exports}var Hy={exports:{}},zV=Hy.exports,bP;function HV(){return bP||(bP=1,(function(r,e){(function(t,n,i){r.exports=n(sn(),qE(),GE())})(zV,function(t){return(function(){var n=t,i=n.lib,s=i.Base,a=i.WordArray,o=n.algo,l=o.SHA256,u=o.HMAC,c=o.PBKDF2=s.extend({cfg:s.extend({keySize:128/32,hasher:l,iterations:25e4}),init:function(h){this.cfg=this.cfg.extend(h)},compute:function(h,m){for(var g=this.cfg,y=u.create(g.hasher,h),v=a.create(),x=a.create([1]),w=v.words,E=x.words,D=g.keySize,I=g.iterations;w.length<D;){var A=y.update(m).finalize(x);y.reset();for(var L=A.words,N=L.length,U=A,B=1;B<I;B++){U=y.finalize(U),y.reset();for(var k=U.words,H=0;H<N;H++)L[H]^=k[H]}v.concat(A),E[0]++}return v.sigBytes=D*4,v}});n.PBKDF2=function(h,m,g){return c.create(g).compute(h,m)}})(),t.PBKDF2})})(Hy)),Hy.exports}var Vy={exports:{}},VV=Vy.exports,SP;function Bd(){return SP||(SP=1,(function(r,e){(function(t,n,i){r.exports=n(sn(),HF(),GE())})(VV,function(t){return(function(){var n=t,i=n.lib,s=i.Base,a=i.WordArray,o=n.algo,l=o.MD5,u=o.EvpKDF=s.extend({cfg:s.extend({keySize:128/32,hasher:l,iterations:1}),init:function(c){this.cfg=this.cfg.extend(c)},compute:function(c,h){for(var m,g=this.cfg,y=g.hasher.create(),v=a.create(),x=v.words,w=g.keySize,E=g.iterations;x.length<w;){m&&y.update(m),m=y.update(c).finalize(h),y.reset();for(var D=1;D<E;D++)m=y.finalize(m),y.reset();v.concat(m)}return v.sigBytes=w*4,v}});n.EvpKDF=function(c,h,m){return u.create(m).compute(c,h)}})(),t.EvpKDF})})(Vy)),Vy.exports}var Wy={exports:{}},WV=Wy.exports,TP;function ns(){return TP||(TP=1,(function(r,e){(function(t,n,i){r.exports=n(sn(),Bd())})(WV,function(t){t.lib.Cipher||(function(n){var i=t,s=i.lib,a=s.Base,o=s.WordArray,l=s.BufferedBlockAlgorithm,u=i.enc;u.Utf8;var c=u.Base64,h=i.algo,m=h.EvpKDF,g=s.Cipher=l.extend({cfg:a.extend(),createEncryptor:function(k,H){return this.create(this._ENC_XFORM_MODE,k,H)},createDecryptor:function(k,H){return this.create(this._DEC_XFORM_MODE,k,H)},init:function(k,H,q){this.cfg=this.cfg.extend(q),this._xformMode=k,this._key=H,this.reset()},reset:function(){l.reset.call(this),this._doReset()},process:function(k){return this._append(k),this._process()},finalize:function(k){k&&this._append(k);var H=this._doFinalize();return H},keySize:128/32,ivSize:128/32,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:(function(){function k(H){return typeof H=="string"?B:L}return function(H){return{encrypt:function(q,V,Q){return k(V).encrypt(H,q,V,Q)},decrypt:function(q,V,Q){return k(V).decrypt(H,q,V,Q)}}}})()});s.StreamCipher=g.extend({_doFinalize:function(){var k=this._process(!0);return k},blockSize:1});var y=i.mode={},v=s.BlockCipherMode=a.extend({createEncryptor:function(k,H){return this.Encryptor.create(k,H)},createDecryptor:function(k,H){return this.Decryptor.create(k,H)},init:function(k,H){this._cipher=k,this._iv=H}}),x=y.CBC=(function(){var k=v.extend();k.Encryptor=k.extend({processBlock:function(q,V){var Q=this._cipher,ie=Q.blockSize;H.call(this,q,V,ie),Q.encryptBlock(q,V),this._prevBlock=q.slice(V,V+ie)}}),k.Decryptor=k.extend({processBlock:function(q,V){var Q=this._cipher,ie=Q.blockSize,le=q.slice(V,V+ie);Q.decryptBlock(q,V),H.call(this,q,V,ie),this._prevBlock=le}});function H(q,V,Q){var ie,le=this._iv;le?(ie=le,this._iv=n):ie=this._prevBlock;for(var he=0;he<Q;he++)q[V+he]^=ie[he]}return k})(),w=i.pad={},E=w.Pkcs7={pad:function(k,H){for(var q=H*4,V=q-k.sigBytes%q,Q=V<<24|V<<16|V<<8|V,ie=[],le=0;le<V;le+=4)ie.push(Q);var he=o.create(ie,V);k.concat(he)},unpad:function(k){var H=k.words[k.sigBytes-1>>>2]&255;k.sigBytes-=H}};s.BlockCipher=g.extend({cfg:g.cfg.extend({mode:x,padding:E}),reset:function(){var k;g.reset.call(this);var H=this.cfg,q=H.iv,V=H.mode;this._xformMode==this._ENC_XFORM_MODE?k=V.createEncryptor:(k=V.createDecryptor,this._minBufferSize=1),this._mode&&this._mode.__creator==k?this._mode.init(this,q&&q.words):(this._mode=k.call(V,this,q&&q.words),this._mode.__creator=k)},_doProcessBlock:function(k,H){this._mode.processBlock(k,H)},_doFinalize:function(){var k,H=this.cfg.padding;return this._xformMode==this._ENC_XFORM_MODE?(H.pad(this._data,this.blockSize),k=this._process(!0)):(k=this._process(!0),H.unpad(k)),k},blockSize:128/32});var D=s.CipherParams=a.extend({init:function(k){this.mixIn(k)},toString:function(k){return(k||this.formatter).stringify(this)}}),I=i.format={},A=I.OpenSSL={stringify:function(k){var H,q=k.ciphertext,V=k.salt;return V?H=o.create([1398893684,1701076831]).concat(V).concat(q):H=q,H.toString(c)},parse:function(k){var H,q=c.parse(k),V=q.words;return V[0]==1398893684&&V[1]==1701076831&&(H=o.create(V.slice(2,4)),V.splice(0,4),q.sigBytes-=16),D.create({ciphertext:q,salt:H})}},L=s.SerializableCipher=a.extend({cfg:a.extend({format:A}),encrypt:function(k,H,q,V){V=this.cfg.extend(V);var Q=k.createEncryptor(q,V),ie=Q.finalize(H),le=Q.cfg;return D.create({ciphertext:ie,key:q,iv:le.iv,algorithm:k,mode:le.mode,padding:le.padding,blockSize:k.blockSize,formatter:V.format})},decrypt:function(k,H,q,V){V=this.cfg.extend(V),H=this._parse(H,V.format);var Q=k.createDecryptor(q,V).finalize(H.ciphertext);return Q},_parse:function(k,H){return typeof k=="string"?H.parse(k,this):k}}),N=i.kdf={},U=N.OpenSSL={execute:function(k,H,q,V,Q){if(V||(V=o.random(64/8)),Q)var ie=m.create({keySize:H+q,hasher:Q}).compute(k,V);else var ie=m.create({keySize:H+q}).compute(k,V);var le=o.create(ie.words.slice(H),q*4);return ie.sigBytes=H*4,D.create({key:ie,iv:le,salt:V})}},B=s.PasswordBasedCipher=L.extend({cfg:L.cfg.extend({kdf:U}),encrypt:function(k,H,q,V){V=this.cfg.extend(V);var Q=V.kdf.execute(q,k.keySize,k.ivSize,V.salt,V.hasher);V.iv=Q.iv;var ie=L.encrypt.call(this,k,H,Q.key,V);return ie.mixIn(Q),ie},decrypt:function(k,H,q,V){V=this.cfg.extend(V),H=this._parse(H,V.format);var Q=V.kdf.execute(q,k.keySize,k.ivSize,H.salt,V.hasher);V.iv=Q.iv;var ie=L.decrypt.call(this,k,H,Q.key,V);return ie}})})()})})(Wy)),Wy.exports}var qy={exports:{}},qV=qy.exports,CP;function GV(){return CP||(CP=1,(function(r,e){(function(t,n,i){r.exports=n(sn(),ns())})(qV,function(t){return t.mode.CFB=(function(){var n=t.lib.BlockCipherMode.extend();n.Encryptor=n.extend({processBlock:function(s,a){var o=this._cipher,l=o.blockSize;i.call(this,s,a,l,o),this._prevBlock=s.slice(a,a+l)}}),n.Decryptor=n.extend({processBlock:function(s,a){var o=this._cipher,l=o.blockSize,u=s.slice(a,a+l);i.call(this,s,a,l,o),this._prevBlock=u}});function i(s,a,o,l){var u,c=this._iv;c?(u=c.slice(0),this._iv=void 0):u=this._prevBlock,l.encryptBlock(u,0);for(var h=0;h<o;h++)s[a+h]^=u[h]}return n})(),t.mode.CFB})})(qy)),qy.exports}var Gy={exports:{}},KV=Gy.exports,wP;function XV(){return wP||(wP=1,(function(r,e){(function(t,n,i){r.exports=n(sn(),ns())})(KV,function(t){return t.mode.CTR=(function(){var n=t.lib.BlockCipherMode.extend(),i=n.Encryptor=n.extend({processBlock:function(s,a){var o=this._cipher,l=o.blockSize,u=this._iv,c=this._counter;u&&(c=this._counter=u.slice(0),this._iv=void 0);var h=c.slice(0);o.encryptBlock(h,0),c[l-1]=c[l-1]+1|0;for(var m=0;m<l;m++)s[a+m]^=h[m]}});return n.Decryptor=i,n})(),t.mode.CTR})})(Gy)),Gy.exports}var Ky={exports:{}},YV=Ky.exports,EP;function QV(){return EP||(EP=1,(function(r,e){(function(t,n,i){r.exports=n(sn(),ns())})(YV,function(t){/** @preserve
 * Counter block mode compatible with  Dr Brian Gladman fileenc.c
 * derived from CryptoJS.mode.CTR
 * Jan Hruby jhruby.web@gmail.com
 */return t.mode.CTRGladman=(function(){var n=t.lib.BlockCipherMode.extend();function i(o){if((o>>24&255)===255){var l=o>>16&255,u=o>>8&255,c=o&255;l===255?(l=0,u===255?(u=0,c===255?c=0:++c):++u):++l,o=0,o+=l<<16,o+=u<<8,o+=c}else o+=1<<24;return o}function s(o){return(o[0]=i(o[0]))===0&&(o[1]=i(o[1])),o}var a=n.Encryptor=n.extend({processBlock:function(o,l){var u=this._cipher,c=u.blockSize,h=this._iv,m=this._counter;h&&(m=this._counter=h.slice(0),this._iv=void 0),s(m);var g=m.slice(0);u.encryptBlock(g,0);for(var y=0;y<c;y++)o[l+y]^=g[y]}});return n.Decryptor=a,n})(),t.mode.CTRGladman})})(Ky)),Ky.exports}var Xy={exports:{}},JV=Xy.exports,kP;function ZV(){return kP||(kP=1,(function(r,e){(function(t,n,i){r.exports=n(sn(),ns())})(JV,function(t){return t.mode.OFB=(function(){var n=t.lib.BlockCipherMode.extend(),i=n.Encryptor=n.extend({processBlock:function(s,a){var o=this._cipher,l=o.blockSize,u=this._iv,c=this._keystream;u&&(c=this._keystream=u.slice(0),this._iv=void 0),o.encryptBlock(c,0);for(var h=0;h<l;h++)s[a+h]^=c[h]}});return n.Decryptor=i,n})(),t.mode.OFB})})(Xy)),Xy.exports}var Yy={exports:{}},eW=Yy.exports,AP;function tW(){return AP||(AP=1,(function(r,e){(function(t,n,i){r.exports=n(sn(),ns())})(eW,function(t){return t.mode.ECB=(function(){var n=t.lib.BlockCipherMode.extend();return n.Encryptor=n.extend({processBlock:function(i,s){this._cipher.encryptBlock(i,s)}}),n.Decryptor=n.extend({processBlock:function(i,s){this._cipher.decryptBlock(i,s)}}),n})(),t.mode.ECB})})(Yy)),Yy.exports}var Qy={exports:{}},rW=Qy.exports,DP;function nW(){return DP||(DP=1,(function(r,e){(function(t,n,i){r.exports=n(sn(),ns())})(rW,function(t){return t.pad.AnsiX923={pad:function(n,i){var s=n.sigBytes,a=i*4,o=a-s%a,l=s+o-1;n.clamp(),n.words[l>>>2]|=o<<24-l%4*8,n.sigBytes+=o},unpad:function(n){var i=n.words[n.sigBytes-1>>>2]&255;n.sigBytes-=i}},t.pad.Ansix923})})(Qy)),Qy.exports}var Jy={exports:{}},iW=Jy.exports,IP;function sW(){return IP||(IP=1,(function(r,e){(function(t,n,i){r.exports=n(sn(),ns())})(iW,function(t){return t.pad.Iso10126={pad:function(n,i){var s=i*4,a=s-n.sigBytes%s;n.concat(t.lib.WordArray.random(a-1)).concat(t.lib.WordArray.create([a<<24],1))},unpad:function(n){var i=n.words[n.sigBytes-1>>>2]&255;n.sigBytes-=i}},t.pad.Iso10126})})(Jy)),Jy.exports}var Zy={exports:{}},aW=Zy.exports,PP;function oW(){return PP||(PP=1,(function(r,e){(function(t,n,i){r.exports=n(sn(),ns())})(aW,function(t){return t.pad.Iso97971={pad:function(n,i){n.concat(t.lib.WordArray.create([2147483648],1)),t.pad.ZeroPadding.pad(n,i)},unpad:function(n){t.pad.ZeroPadding.unpad(n),n.sigBytes--}},t.pad.Iso97971})})(Zy)),Zy.exports}var e_={exports:{}},lW=e_.exports,RP;function uW(){return RP||(RP=1,(function(r,e){(function(t,n,i){r.exports=n(sn(),ns())})(lW,function(t){return t.pad.ZeroPadding={pad:function(n,i){var s=i*4;n.clamp(),n.sigBytes+=s-(n.sigBytes%s||s)},unpad:function(n){for(var i=n.words,s=n.sigBytes-1,s=n.sigBytes-1;s>=0;s--)if(i[s>>>2]>>>24-s%4*8&255){n.sigBytes=s+1;break}}},t.pad.ZeroPadding})})(e_)),e_.exports}var t_={exports:{}},cW=t_.exports,LP;function dW(){return LP||(LP=1,(function(r,e){(function(t,n,i){r.exports=n(sn(),ns())})(cW,function(t){return t.pad.NoPadding={pad:function(){},unpad:function(){}},t.pad.NoPadding})})(t_)),t_.exports}var r_={exports:{}},hW=r_.exports,OP;function fW(){return OP||(OP=1,(function(r,e){(function(t,n,i){r.exports=n(sn(),ns())})(hW,function(t){return(function(n){var i=t,s=i.lib,a=s.CipherParams,o=i.enc,l=o.Hex,u=i.format;u.Hex={stringify:function(c){return c.ciphertext.toString(l)},parse:function(c){var h=l.parse(c);return a.create({ciphertext:h})}}})(),t.format.Hex})})(r_)),r_.exports}var n_={exports:{}},pW=n_.exports,MP;function mW(){return MP||(MP=1,(function(r,e){(function(t,n,i){r.exports=n(sn(),Kh(),Xh(),Bd(),ns())})(pW,function(t){return(function(){var n=t,i=n.lib,s=i.BlockCipher,a=n.algo,o=[],l=[],u=[],c=[],h=[],m=[],g=[],y=[],v=[],x=[];(function(){for(var D=[],I=0;I<256;I++)I<128?D[I]=I<<1:D[I]=I<<1^283;for(var A=0,L=0,I=0;I<256;I++){var N=L^L<<1^L<<2^L<<3^L<<4;N=N>>>8^N&255^99,o[A]=N,l[N]=A;var U=D[A],B=D[U],k=D[B],H=D[N]*257^N*16843008;u[A]=H<<24|H>>>8,c[A]=H<<16|H>>>16,h[A]=H<<8|H>>>24,m[A]=H;var H=k*16843009^B*65537^U*257^A*16843008;g[N]=H<<24|H>>>8,y[N]=H<<16|H>>>16,v[N]=H<<8|H>>>24,x[N]=H,A?(A=U^D[D[D[k^U]]],L^=D[D[L]]):A=L=1}})();var w=[0,1,2,4,8,16,32,64,128,27,54],E=a.AES=s.extend({_doReset:function(){var D;if(!(this._nRounds&&this._keyPriorReset===this._key)){for(var I=this._keyPriorReset=this._key,A=I.words,L=I.sigBytes/4,N=this._nRounds=L+6,U=(N+1)*4,B=this._keySchedule=[],k=0;k<U;k++)k<L?B[k]=A[k]:(D=B[k-1],k%L?L>6&&k%L==4&&(D=o[D>>>24]<<24|o[D>>>16&255]<<16|o[D>>>8&255]<<8|o[D&255]):(D=D<<8|D>>>24,D=o[D>>>24]<<24|o[D>>>16&255]<<16|o[D>>>8&255]<<8|o[D&255],D^=w[k/L|0]<<24),B[k]=B[k-L]^D);for(var H=this._invKeySchedule=[],q=0;q<U;q++){var k=U-q;if(q%4)var D=B[k];else var D=B[k-4];q<4||k<=4?H[q]=D:H[q]=g[o[D>>>24]]^y[o[D>>>16&255]]^v[o[D>>>8&255]]^x[o[D&255]]}}},encryptBlock:function(D,I){this._doCryptBlock(D,I,this._keySchedule,u,c,h,m,o)},decryptBlock:function(D,I){var A=D[I+1];D[I+1]=D[I+3],D[I+3]=A,this._doCryptBlock(D,I,this._invKeySchedule,g,y,v,x,l);var A=D[I+1];D[I+1]=D[I+3],D[I+3]=A},_doCryptBlock:function(D,I,A,L,N,U,B,k){for(var H=this._nRounds,q=D[I]^A[0],V=D[I+1]^A[1],Q=D[I+2]^A[2],ie=D[I+3]^A[3],le=4,he=1;he<H;he++){var ae=L[q>>>24]^N[V>>>16&255]^U[Q>>>8&255]^B[ie&255]^A[le++],ne=L[V>>>24]^N[Q>>>16&255]^U[ie>>>8&255]^B[q&255]^A[le++],ue=L[Q>>>24]^N[ie>>>16&255]^U[q>>>8&255]^B[V&255]^A[le++],ee=L[ie>>>24]^N[q>>>16&255]^U[V>>>8&255]^B[Q&255]^A[le++];q=ae,V=ne,Q=ue,ie=ee}var ae=(k[q>>>24]<<24|k[V>>>16&255]<<16|k[Q>>>8&255]<<8|k[ie&255])^A[le++],ne=(k[V>>>24]<<24|k[Q>>>16&255]<<16|k[ie>>>8&255]<<8|k[q&255])^A[le++],ue=(k[Q>>>24]<<24|k[ie>>>16&255]<<16|k[q>>>8&255]<<8|k[V&255])^A[le++],ee=(k[ie>>>24]<<24|k[q>>>16&255]<<16|k[V>>>8&255]<<8|k[Q&255])^A[le++];D[I]=ae,D[I+1]=ne,D[I+2]=ue,D[I+3]=ee},keySize:256/32});n.AES=s._createHelper(E)})(),t.AES})})(n_)),n_.exports}var i_={exports:{}},gW=i_.exports,FP;function vW(){return FP||(FP=1,(function(r,e){(function(t,n,i){r.exports=n(sn(),Kh(),Xh(),Bd(),ns())})(gW,function(t){return(function(){var n=t,i=n.lib,s=i.WordArray,a=i.BlockCipher,o=n.algo,l=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],u=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],c=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],h=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],m=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],g=o.DES=a.extend({_doReset:function(){for(var w=this._key,E=w.words,D=[],I=0;I<56;I++){var A=l[I]-1;D[I]=E[A>>>5]>>>31-A%32&1}for(var L=this._subKeys=[],N=0;N<16;N++){for(var U=L[N]=[],B=c[N],I=0;I<24;I++)U[I/6|0]|=D[(u[I]-1+B)%28]<<31-I%6,U[4+(I/6|0)]|=D[28+(u[I+24]-1+B)%28]<<31-I%6;U[0]=U[0]<<1|U[0]>>>31;for(var I=1;I<7;I++)U[I]=U[I]>>>(I-1)*4+3;U[7]=U[7]<<5|U[7]>>>27}for(var k=this._invSubKeys=[],I=0;I<16;I++)k[I]=L[15-I]},encryptBlock:function(w,E){this._doCryptBlock(w,E,this._subKeys)},decryptBlock:function(w,E){this._doCryptBlock(w,E,this._invSubKeys)},_doCryptBlock:function(w,E,D){this._lBlock=w[E],this._rBlock=w[E+1],y.call(this,4,252645135),y.call(this,16,65535),v.call(this,2,858993459),v.call(this,8,16711935),y.call(this,1,1431655765);for(var I=0;I<16;I++){for(var A=D[I],L=this._lBlock,N=this._rBlock,U=0,B=0;B<8;B++)U|=h[B][((N^A[B])&m[B])>>>0];this._lBlock=N,this._rBlock=L^U}var k=this._lBlock;this._lBlock=this._rBlock,this._rBlock=k,y.call(this,1,1431655765),v.call(this,8,16711935),v.call(this,2,858993459),y.call(this,16,65535),y.call(this,4,252645135),w[E]=this._lBlock,w[E+1]=this._rBlock},keySize:64/32,ivSize:64/32,blockSize:64/32});function y(w,E){var D=(this._lBlock>>>w^this._rBlock)&E;this._rBlock^=D,this._lBlock^=D<<w}function v(w,E){var D=(this._rBlock>>>w^this._lBlock)&E;this._lBlock^=D,this._rBlock^=D<<w}n.DES=a._createHelper(g);var x=o.TripleDES=a.extend({_doReset:function(){var w=this._key,E=w.words;if(E.length!==2&&E.length!==4&&E.length<6)throw new Error("Invalid key length - 3DES requires the key length to be 64, 128, 192 or >192.");var D=E.slice(0,2),I=E.length<4?E.slice(0,2):E.slice(2,4),A=E.length<6?E.slice(0,2):E.slice(4,6);this._des1=g.createEncryptor(s.create(D)),this._des2=g.createEncryptor(s.create(I)),this._des3=g.createEncryptor(s.create(A))},encryptBlock:function(w,E){this._des1.encryptBlock(w,E),this._des2.decryptBlock(w,E),this._des3.encryptBlock(w,E)},decryptBlock:function(w,E){this._des3.decryptBlock(w,E),this._des2.encryptBlock(w,E),this._des1.decryptBlock(w,E)},keySize:192/32,ivSize:64/32,blockSize:64/32});n.TripleDES=a._createHelper(x)})(),t.TripleDES})})(i_)),i_.exports}var s_={exports:{}},yW=s_.exports,BP;function _W(){return BP||(BP=1,(function(r,e){(function(t,n,i){r.exports=n(sn(),Kh(),Xh(),Bd(),ns())})(yW,function(t){return(function(){var n=t,i=n.lib,s=i.StreamCipher,a=n.algo,o=a.RC4=s.extend({_doReset:function(){for(var c=this._key,h=c.words,m=c.sigBytes,g=this._S=[],y=0;y<256;y++)g[y]=y;for(var y=0,v=0;y<256;y++){var x=y%m,w=h[x>>>2]>>>24-x%4*8&255;v=(v+g[y]+w)%256;var E=g[y];g[y]=g[v],g[v]=E}this._i=this._j=0},_doProcessBlock:function(c,h){c[h]^=l.call(this)},keySize:256/32,ivSize:0});function l(){for(var c=this._S,h=this._i,m=this._j,g=0,y=0;y<4;y++){h=(h+1)%256,m=(m+c[h])%256;var v=c[h];c[h]=c[m],c[m]=v,g|=c[(c[h]+c[m])%256]<<24-y*8}return this._i=h,this._j=m,g}n.RC4=s._createHelper(o);var u=a.RC4Drop=o.extend({cfg:o.cfg.extend({drop:192}),_doReset:function(){o._doReset.call(this);for(var c=this.cfg.drop;c>0;c--)l.call(this)}});n.RC4Drop=s._createHelper(u)})(),t.RC4})})(s_)),s_.exports}var a_={exports:{}},xW=a_.exports,NP;function bW(){return NP||(NP=1,(function(r,e){(function(t,n,i){r.exports=n(sn(),Kh(),Xh(),Bd(),ns())})(xW,function(t){return(function(){var n=t,i=n.lib,s=i.StreamCipher,a=n.algo,o=[],l=[],u=[],c=a.Rabbit=s.extend({_doReset:function(){for(var m=this._key.words,g=this.cfg.iv,y=0;y<4;y++)m[y]=(m[y]<<8|m[y]>>>24)&16711935|(m[y]<<24|m[y]>>>8)&4278255360;var v=this._X=[m[0],m[3]<<16|m[2]>>>16,m[1],m[0]<<16|m[3]>>>16,m[2],m[1]<<16|m[0]>>>16,m[3],m[2]<<16|m[1]>>>16],x=this._C=[m[2]<<16|m[2]>>>16,m[0]&4294901760|m[1]&65535,m[3]<<16|m[3]>>>16,m[1]&4294901760|m[2]&65535,m[0]<<16|m[0]>>>16,m[2]&4294901760|m[3]&65535,m[1]<<16|m[1]>>>16,m[3]&4294901760|m[0]&65535];this._b=0;for(var y=0;y<4;y++)h.call(this);for(var y=0;y<8;y++)x[y]^=v[y+4&7];if(g){var w=g.words,E=w[0],D=w[1],I=(E<<8|E>>>24)&16711935|(E<<24|E>>>8)&4278255360,A=(D<<8|D>>>24)&16711935|(D<<24|D>>>8)&4278255360,L=I>>>16|A&4294901760,N=A<<16|I&65535;x[0]^=I,x[1]^=L,x[2]^=A,x[3]^=N,x[4]^=I,x[5]^=L,x[6]^=A,x[7]^=N;for(var y=0;y<4;y++)h.call(this)}},_doProcessBlock:function(m,g){var y=this._X;h.call(this),o[0]=y[0]^y[5]>>>16^y[3]<<16,o[1]=y[2]^y[7]>>>16^y[5]<<16,o[2]=y[4]^y[1]>>>16^y[7]<<16,o[3]=y[6]^y[3]>>>16^y[1]<<16;for(var v=0;v<4;v++)o[v]=(o[v]<<8|o[v]>>>24)&16711935|(o[v]<<24|o[v]>>>8)&4278255360,m[g+v]^=o[v]},blockSize:128/32,ivSize:64/32});function h(){for(var m=this._X,g=this._C,y=0;y<8;y++)l[y]=g[y];g[0]=g[0]+1295307597+this._b|0,g[1]=g[1]+3545052371+(g[0]>>>0<l[0]>>>0?1:0)|0,g[2]=g[2]+886263092+(g[1]>>>0<l[1]>>>0?1:0)|0,g[3]=g[3]+1295307597+(g[2]>>>0<l[2]>>>0?1:0)|0,g[4]=g[4]+3545052371+(g[3]>>>0<l[3]>>>0?1:0)|0,g[5]=g[5]+886263092+(g[4]>>>0<l[4]>>>0?1:0)|0,g[6]=g[6]+1295307597+(g[5]>>>0<l[5]>>>0?1:0)|0,g[7]=g[7]+3545052371+(g[6]>>>0<l[6]>>>0?1:0)|0,this._b=g[7]>>>0<l[7]>>>0?1:0;for(var y=0;y<8;y++){var v=m[y]+g[y],x=v&65535,w=v>>>16,E=((x*x>>>17)+x*w>>>15)+w*w,D=((v&4294901760)*v|0)+((v&65535)*v|0);u[y]=E^D}m[0]=u[0]+(u[7]<<16|u[7]>>>16)+(u[6]<<16|u[6]>>>16)|0,m[1]=u[1]+(u[0]<<8|u[0]>>>24)+u[7]|0,m[2]=u[2]+(u[1]<<16|u[1]>>>16)+(u[0]<<16|u[0]>>>16)|0,m[3]=u[3]+(u[2]<<8|u[2]>>>24)+u[1]|0,m[4]=u[4]+(u[3]<<16|u[3]>>>16)+(u[2]<<16|u[2]>>>16)|0,m[5]=u[5]+(u[4]<<8|u[4]>>>24)+u[3]|0,m[6]=u[6]+(u[5]<<16|u[5]>>>16)+(u[4]<<16|u[4]>>>16)|0,m[7]=u[7]+(u[6]<<8|u[6]>>>24)+u[5]|0}n.Rabbit=s._createHelper(c)})(),t.Rabbit})})(a_)),a_.exports}var o_={exports:{}},SW=o_.exports,UP;function TW(){return UP||(UP=1,(function(r,e){(function(t,n,i){r.exports=n(sn(),Kh(),Xh(),Bd(),ns())})(SW,function(t){return(function(){var n=t,i=n.lib,s=i.StreamCipher,a=n.algo,o=[],l=[],u=[],c=a.RabbitLegacy=s.extend({_doReset:function(){var m=this._key.words,g=this.cfg.iv,y=this._X=[m[0],m[3]<<16|m[2]>>>16,m[1],m[0]<<16|m[3]>>>16,m[2],m[1]<<16|m[0]>>>16,m[3],m[2]<<16|m[1]>>>16],v=this._C=[m[2]<<16|m[2]>>>16,m[0]&4294901760|m[1]&65535,m[3]<<16|m[3]>>>16,m[1]&4294901760|m[2]&65535,m[0]<<16|m[0]>>>16,m[2]&4294901760|m[3]&65535,m[1]<<16|m[1]>>>16,m[3]&4294901760|m[0]&65535];this._b=0;for(var x=0;x<4;x++)h.call(this);for(var x=0;x<8;x++)v[x]^=y[x+4&7];if(g){var w=g.words,E=w[0],D=w[1],I=(E<<8|E>>>24)&16711935|(E<<24|E>>>8)&4278255360,A=(D<<8|D>>>24)&16711935|(D<<24|D>>>8)&4278255360,L=I>>>16|A&4294901760,N=A<<16|I&65535;v[0]^=I,v[1]^=L,v[2]^=A,v[3]^=N,v[4]^=I,v[5]^=L,v[6]^=A,v[7]^=N;for(var x=0;x<4;x++)h.call(this)}},_doProcessBlock:function(m,g){var y=this._X;h.call(this),o[0]=y[0]^y[5]>>>16^y[3]<<16,o[1]=y[2]^y[7]>>>16^y[5]<<16,o[2]=y[4]^y[1]>>>16^y[7]<<16,o[3]=y[6]^y[3]>>>16^y[1]<<16;for(var v=0;v<4;v++)o[v]=(o[v]<<8|o[v]>>>24)&16711935|(o[v]<<24|o[v]>>>8)&4278255360,m[g+v]^=o[v]},blockSize:128/32,ivSize:64/32});function h(){for(var m=this._X,g=this._C,y=0;y<8;y++)l[y]=g[y];g[0]=g[0]+1295307597+this._b|0,g[1]=g[1]+3545052371+(g[0]>>>0<l[0]>>>0?1:0)|0,g[2]=g[2]+886263092+(g[1]>>>0<l[1]>>>0?1:0)|0,g[3]=g[3]+1295307597+(g[2]>>>0<l[2]>>>0?1:0)|0,g[4]=g[4]+3545052371+(g[3]>>>0<l[3]>>>0?1:0)|0,g[5]=g[5]+886263092+(g[4]>>>0<l[4]>>>0?1:0)|0,g[6]=g[6]+1295307597+(g[5]>>>0<l[5]>>>0?1:0)|0,g[7]=g[7]+3545052371+(g[6]>>>0<l[6]>>>0?1:0)|0,this._b=g[7]>>>0<l[7]>>>0?1:0;for(var y=0;y<8;y++){var v=m[y]+g[y],x=v&65535,w=v>>>16,E=((x*x>>>17)+x*w>>>15)+w*w,D=((v&4294901760)*v|0)+((v&65535)*v|0);u[y]=E^D}m[0]=u[0]+(u[7]<<16|u[7]>>>16)+(u[6]<<16|u[6]>>>16)|0,m[1]=u[1]+(u[0]<<8|u[0]>>>24)+u[7]|0,m[2]=u[2]+(u[1]<<16|u[1]>>>16)+(u[0]<<16|u[0]>>>16)|0,m[3]=u[3]+(u[2]<<8|u[2]>>>24)+u[1]|0,m[4]=u[4]+(u[3]<<16|u[3]>>>16)+(u[2]<<16|u[2]>>>16)|0,m[5]=u[5]+(u[4]<<8|u[4]>>>24)+u[3]|0,m[6]=u[6]+(u[5]<<16|u[5]>>>16)+(u[4]<<16|u[4]>>>16)|0,m[7]=u[7]+(u[6]<<8|u[6]>>>24)+u[5]|0}n.RabbitLegacy=s._createHelper(c)})(),t.RabbitLegacy})})(o_)),o_.exports}var l_={exports:{}},CW=l_.exports,$P;function wW(){return $P||($P=1,(function(r,e){(function(t,n,i){r.exports=n(sn(),Kh(),Xh(),Bd(),ns())})(CW,function(t){return(function(){var n=t,i=n.lib,s=i.BlockCipher,a=n.algo;const o=16,l=[608135816,2242054355,320440878,57701188,2752067618,698298832,137296536,3964562569,1160258022,953160567,3193202383,887688300,3232508343,3380367581,1065670069,3041331479,2450970073,2306472731],u=[[3509652390,2564797868,805139163,3491422135,3101798381,1780907670,3128725573,4046225305,614570311,3012652279,134345442,2240740374,1667834072,1901547113,2757295779,4103290238,227898511,1921955416,1904987480,2182433518,2069144605,3260701109,2620446009,720527379,3318853667,677414384,3393288472,3101374703,2390351024,1614419982,1822297739,2954791486,3608508353,3174124327,2024746970,1432378464,3864339955,2857741204,1464375394,1676153920,1439316330,715854006,3033291828,289532110,2706671279,2087905683,3018724369,1668267050,732546397,1947742710,3462151702,2609353502,2950085171,1814351708,2050118529,680887927,999245976,1800124847,3300911131,1713906067,1641548236,4213287313,1216130144,1575780402,4018429277,3917837745,3693486850,3949271944,596196993,3549867205,258830323,2213823033,772490370,2760122372,1774776394,2652871518,566650946,4142492826,1728879713,2882767088,1783734482,3629395816,2517608232,2874225571,1861159788,326777828,3124490320,2130389656,2716951837,967770486,1724537150,2185432712,2364442137,1164943284,2105845187,998989502,3765401048,2244026483,1075463327,1455516326,1322494562,910128902,469688178,1117454909,936433444,3490320968,3675253459,1240580251,122909385,2157517691,634681816,4142456567,3825094682,3061402683,2540495037,79693498,3249098678,1084186820,1583128258,426386531,1761308591,1047286709,322548459,995290223,1845252383,2603652396,3431023940,2942221577,3202600964,3727903485,1712269319,422464435,3234572375,1170764815,3523960633,3117677531,1434042557,442511882,3600875718,1076654713,1738483198,4213154764,2393238008,3677496056,1014306527,4251020053,793779912,2902807211,842905082,4246964064,1395751752,1040244610,2656851899,3396308128,445077038,3742853595,3577915638,679411651,2892444358,2354009459,1767581616,3150600392,3791627101,3102740896,284835224,4246832056,1258075500,768725851,2589189241,3069724005,3532540348,1274779536,3789419226,2764799539,1660621633,3471099624,4011903706,913787905,3497959166,737222580,2514213453,2928710040,3937242737,1804850592,3499020752,2949064160,2386320175,2390070455,2415321851,4061277028,2290661394,2416832540,1336762016,1754252060,3520065937,3014181293,791618072,3188594551,3933548030,2332172193,3852520463,3043980520,413987798,3465142937,3030929376,4245938359,2093235073,3534596313,375366246,2157278981,2479649556,555357303,3870105701,2008414854,3344188149,4221384143,3956125452,2067696032,3594591187,2921233993,2428461,544322398,577241275,1471733935,610547355,4027169054,1432588573,1507829418,2025931657,3646575487,545086370,48609733,2200306550,1653985193,298326376,1316178497,3007786442,2064951626,458293330,2589141269,3591329599,3164325604,727753846,2179363840,146436021,1461446943,4069977195,705550613,3059967265,3887724982,4281599278,3313849956,1404054877,2845806497,146425753,1854211946],[1266315497,3048417604,3681880366,3289982499,290971e4,1235738493,2632868024,2414719590,3970600049,1771706367,1449415276,3266420449,422970021,1963543593,2690192192,3826793022,1062508698,1531092325,1804592342,2583117782,2714934279,4024971509,1294809318,4028980673,1289560198,2221992742,1669523910,35572830,157838143,1052438473,1016535060,1802137761,1753167236,1386275462,3080475397,2857371447,1040679964,2145300060,2390574316,1461121720,2956646967,4031777805,4028374788,33600511,2920084762,1018524850,629373528,3691585981,3515945977,2091462646,2486323059,586499841,988145025,935516892,3367335476,2599673255,2839830854,265290510,3972581182,2759138881,3795373465,1005194799,847297441,406762289,1314163512,1332590856,1866599683,4127851711,750260880,613907577,1450815602,3165620655,3734664991,3650291728,3012275730,3704569646,1427272223,778793252,1343938022,2676280711,2052605720,1946737175,3164576444,3914038668,3967478842,3682934266,1661551462,3294938066,4011595847,840292616,3712170807,616741398,312560963,711312465,1351876610,322626781,1910503582,271666773,2175563734,1594956187,70604529,3617834859,1007753275,1495573769,4069517037,2549218298,2663038764,504708206,2263041392,3941167025,2249088522,1514023603,1998579484,1312622330,694541497,2582060303,2151582166,1382467621,776784248,2618340202,3323268794,2497899128,2784771155,503983604,4076293799,907881277,423175695,432175456,1378068232,4145222326,3954048622,3938656102,3820766613,2793130115,2977904593,26017576,3274890735,3194772133,1700274565,1756076034,4006520079,3677328699,720338349,1533947780,354530856,688349552,3973924725,1637815568,332179504,3949051286,53804574,2852348879,3044236432,1282449977,3583942155,3416972820,4006381244,1617046695,2628476075,3002303598,1686838959,431878346,2686675385,1700445008,1080580658,1009431731,832498133,3223435511,2605976345,2271191193,2516031870,1648197032,4164389018,2548247927,300782431,375919233,238389289,3353747414,2531188641,2019080857,1475708069,455242339,2609103871,448939670,3451063019,1395535956,2413381860,1841049896,1491858159,885456874,4264095073,4001119347,1565136089,3898914787,1108368660,540939232,1173283510,2745871338,3681308437,4207628240,3343053890,4016749493,1699691293,1103962373,3625875870,2256883143,3830138730,1031889488,3479347698,1535977030,4236805024,3251091107,2132092099,1774941330,1199868427,1452454533,157007616,2904115357,342012276,595725824,1480756522,206960106,497939518,591360097,863170706,2375253569,3596610801,1814182875,2094937945,3421402208,1082520231,3463918190,2785509508,435703966,3908032597,1641649973,2842273706,3305899714,1510255612,2148256476,2655287854,3276092548,4258621189,236887753,3681803219,274041037,1734335097,3815195456,3317970021,1899903192,1026095262,4050517792,356393447,2410691914,3873677099,3682840055],[3913112168,2491498743,4132185628,2489919796,1091903735,1979897079,3170134830,3567386728,3557303409,857797738,1136121015,1342202287,507115054,2535736646,337727348,3213592640,1301675037,2528481711,1895095763,1721773893,3216771564,62756741,2142006736,835421444,2531993523,1442658625,3659876326,2882144922,676362277,1392781812,170690266,3921047035,1759253602,3611846912,1745797284,664899054,1329594018,3901205900,3045908486,2062866102,2865634940,3543621612,3464012697,1080764994,553557557,3656615353,3996768171,991055499,499776247,1265440854,648242737,3940784050,980351604,3713745714,1749149687,3396870395,4211799374,3640570775,1161844396,3125318951,1431517754,545492359,4268468663,3499529547,1437099964,2702547544,3433638243,2581715763,2787789398,1060185593,1593081372,2418618748,4260947970,69676912,2159744348,86519011,2512459080,3838209314,1220612927,3339683548,133810670,1090789135,1078426020,1569222167,845107691,3583754449,4072456591,1091646820,628848692,1613405280,3757631651,526609435,236106946,48312990,2942717905,3402727701,1797494240,859738849,992217954,4005476642,2243076622,3870952857,3732016268,765654824,3490871365,2511836413,1685915746,3888969200,1414112111,2273134842,3281911079,4080962846,172450625,2569994100,980381355,4109958455,2819808352,2716589560,2568741196,3681446669,3329971472,1835478071,660984891,3704678404,4045999559,3422617507,3040415634,1762651403,1719377915,3470491036,2693910283,3642056355,3138596744,1364962596,2073328063,1983633131,926494387,3423689081,2150032023,4096667949,1749200295,3328846651,309677260,2016342300,1779581495,3079819751,111262694,1274766160,443224088,298511866,1025883608,3806446537,1145181785,168956806,3641502830,3584813610,1689216846,3666258015,3200248200,1692713982,2646376535,4042768518,1618508792,1610833997,3523052358,4130873264,2001055236,3610705100,2202168115,4028541809,2961195399,1006657119,2006996926,3186142756,1430667929,3210227297,1314452623,4074634658,4101304120,2273951170,1399257539,3367210612,3027628629,1190975929,2062231137,2333990788,2221543033,2438960610,1181637006,548689776,2362791313,3372408396,3104550113,3145860560,296247880,1970579870,3078560182,3769228297,1714227617,3291629107,3898220290,166772364,1251581989,493813264,448347421,195405023,2709975567,677966185,3703036547,1463355134,2715995803,1338867538,1343315457,2802222074,2684532164,233230375,2599980071,2000651841,3277868038,1638401717,4028070440,3237316320,6314154,819756386,300326615,590932579,1405279636,3267499572,3150704214,2428286686,3959192993,3461946742,1862657033,1266418056,963775037,2089974820,2263052895,1917689273,448879540,3550394620,3981727096,150775221,3627908307,1303187396,508620638,2975983352,2726630617,1817252668,1876281319,1457606340,908771278,3720792119,3617206836,2455994898,1729034894,1080033504],[976866871,3556439503,2881648439,1522871579,1555064734,1336096578,3548522304,2579274686,3574697629,3205460757,3593280638,3338716283,3079412587,564236357,2993598910,1781952180,1464380207,3163844217,3332601554,1699332808,1393555694,1183702653,3581086237,1288719814,691649499,2847557200,2895455976,3193889540,2717570544,1781354906,1676643554,2592534050,3230253752,1126444790,2770207658,2633158820,2210423226,2615765581,2414155088,3127139286,673620729,2805611233,1269405062,4015350505,3341807571,4149409754,1057255273,2012875353,2162469141,2276492801,2601117357,993977747,3918593370,2654263191,753973209,36408145,2530585658,25011837,3520020182,2088578344,530523599,2918365339,1524020338,1518925132,3760827505,3759777254,1202760957,3985898139,3906192525,674977740,4174734889,2031300136,2019492241,3983892565,4153806404,3822280332,352677332,2297720250,60907813,90501309,3286998549,1016092578,2535922412,2839152426,457141659,509813237,4120667899,652014361,1966332200,2975202805,55981186,2327461051,676427537,3255491064,2882294119,3433927263,1307055953,942726286,933058658,2468411793,3933900994,4215176142,1361170020,2001714738,2830558078,3274259782,1222529897,1679025792,2729314320,3714953764,1770335741,151462246,3013232138,1682292957,1483529935,471910574,1539241949,458788160,3436315007,1807016891,3718408830,978976581,1043663428,3165965781,1927990952,4200891579,2372276910,3208408903,3533431907,1412390302,2931980059,4132332400,1947078029,3881505623,4168226417,2941484381,1077988104,1320477388,886195818,18198404,3786409e3,2509781533,112762804,3463356488,1866414978,891333506,18488651,661792760,1628790961,3885187036,3141171499,876946877,2693282273,1372485963,791857591,2686433993,3759982718,3167212022,3472953795,2716379847,445679433,3561995674,3504004811,3574258232,54117162,3331405415,2381918588,3769707343,4154350007,1140177722,4074052095,668550556,3214352940,367459370,261225585,2610173221,4209349473,3468074219,3265815641,314222801,3066103646,3808782860,282218597,3406013506,3773591054,379116347,1285071038,846784868,2669647154,3771962079,3550491691,2305946142,453669953,1268987020,3317592352,3279303384,3744833421,2610507566,3859509063,266596637,3847019092,517658769,3462560207,3443424879,370717030,4247526661,2224018117,4143653529,4112773975,2788324899,2477274417,1456262402,2901442914,1517677493,1846949527,2295493580,3734397586,2176403920,1280348187,1908823572,3871786941,846861322,1172426758,3287448474,3383383037,1655181056,3139813346,901632758,1897031941,2986607138,3066810236,3447102507,1393639104,373351379,950779232,625454576,3124240540,4148612726,2007998917,544563296,2244738638,2330496472,2058025392,1291430526,424198748,50039436,29584100,3605783033,2429876329,2791104160,1057563949,3255363231,3075367218,3463963227,1469046755,985887462]];var c={pbox:[],sbox:[]};function h(x,w){let E=w>>24&255,D=w>>16&255,I=w>>8&255,A=w&255,L=x.sbox[0][E]+x.sbox[1][D];return L=L^x.sbox[2][I],L=L+x.sbox[3][A],L}function m(x,w,E){let D=w,I=E,A;for(let L=0;L<o;++L)D=D^x.pbox[L],I=h(x,D)^I,A=D,D=I,I=A;return A=D,D=I,I=A,I=I^x.pbox[o],D=D^x.pbox[o+1],{left:D,right:I}}function g(x,w,E){let D=w,I=E,A;for(let L=o+1;L>1;--L)D=D^x.pbox[L],I=h(x,D)^I,A=D,D=I,I=A;return A=D,D=I,I=A,I=I^x.pbox[1],D=D^x.pbox[0],{left:D,right:I}}function y(x,w,E){for(let N=0;N<4;N++){x.sbox[N]=[];for(let U=0;U<256;U++)x.sbox[N][U]=u[N][U]}let D=0;for(let N=0;N<o+2;N++)x.pbox[N]=l[N]^w[D],D++,D>=E&&(D=0);let I=0,A=0,L=0;for(let N=0;N<o+2;N+=2)L=m(x,I,A),I=L.left,A=L.right,x.pbox[N]=I,x.pbox[N+1]=A;for(let N=0;N<4;N++)for(let U=0;U<256;U+=2)L=m(x,I,A),I=L.left,A=L.right,x.sbox[N][U]=I,x.sbox[N][U+1]=A;return!0}var v=a.Blowfish=s.extend({_doReset:function(){if(this._keyPriorReset!==this._key){var x=this._keyPriorReset=this._key,w=x.words,E=x.sigBytes/4;y(c,w,E)}},encryptBlock:function(x,w){var E=m(c,x[w],x[w+1]);x[w]=E.left,x[w+1]=E.right},decryptBlock:function(x,w){var E=g(c,x[w],x[w+1]);x[w]=E.left,x[w+1]=E.right},blockSize:64/32,keySize:128/32,ivSize:64/32});n.Blowfish=s._createHelper(v)})(),t.Blowfish})})(l_)),l_.exports}var EW=ky.exports,jP;function kW(){return jP||(jP=1,(function(r,e){(function(t,n,i){r.exports=n(sn(),ub(),TV(),wV(),Kh(),AV(),Xh(),HF(),qE(),LV(),VF(),FV(),NV(),$V(),GE(),HV(),Bd(),ns(),GV(),XV(),QV(),ZV(),tW(),nW(),sW(),oW(),uW(),dW(),fW(),mW(),vW(),_W(),bW(),TW(),wW())})(EW,function(t){return t})})(ky)),ky.exports}var AW=kW();const DW=ua(AW),IW="https://github.com/zhimin-dev/iptv-checker",PW="4.2.0",u_={homepage_url:IW,version:PW},vo=M.createContext(),RW="https://static.zmis.me/public/iptv-checker/init.json",LW=function({children:r}){const[t,n]=M.useState(""),[i,s]=M.useState([]),[a,o]=M.useState(""),[l,u]=M.useState([]),[c,h]=M.useState(!1),[m,g]=M.useState(0),[y,v]=M.useState(""),[x,w]=M.useState(!0),[E,D]=M.useState([]),[I,A]=M.useState(!1),[L,N]=M.useState(0),[U,B]=M.useState({version:"",sponsor:[]}),[k,H]=M.useState(""),[q,V]=M.useState(null),[Q,ie]=M.useState({groups:[""],videoRevolution:[]}),[le,he]=M.useState(null),[ae,ne]=M.useState([]),[ue,ee]=M.useState([]),pe=[{name:"mac",value:"application/x-mpegURL"},{name:"windows",value:"video/mp2t"}],me=[{code:"zh",name:""},{code:"en",name:"English"}],[xe,Be]=M.useState({checkSleepTime:300,httpRequestTimeout:8e3,customLink:[],concurrent:1,language:"zh",privateHost:"",playerSource:"application/x-mpegURL"}),Oe=(...ke)=>{console.log(...ke)},dt=ke=>{xs.changeLanguage(ke)},Ke=()=>{const ke=new Date,Ne=ke.getFullYear(),Qe=ke.getMonth()+1,et=ke.getDate(),vt=ke.getHours();return`${Ne}${Qe}${et}${vt}`},_t=()=>{Ar.get(RW+"?date="+Ke()).then(ke=>{if(ke.status===200)try{B(ke.data)}catch(Ne){console.log(Ne)}})},Ze=()=>{},Ot=()=>{let ke=U.version;m===1&&(ke=U.app_version),Nt(ke,u_.version)>0?A(!0):A(!1)},Nt=(ke,Ne)=>{const Qe=ke.split(".").map(Number),et=Ne.split(".").map(Number),vt=Math.max(Qe.length,et.length);for(let wt=0;wt<vt;wt++){const Mt=Qe[wt]||0,_r=et[wt]||0;if(Mt>_r)return 1;if(Mt<_r)return-1}return 0},qe=()=>{Dt("check_ffmpeg").then(ke=>{ke&&(N(1),console.log("FFmpeg is installed"))}).catch(ke=>{console.log("invoke error",ke)})},Ue=(ke,Ne)=>{document.getElementById("titlebar-minimize")?.addEventListener("click",()=>ke.minimize()),document.getElementById("titlebar-maximize")?.addEventListener("click",()=>{ke.isFullscreen().then(Qe=>{console.log("isfull",Qe),Qe?ke.setSize(new zE(1024,800)).then(()=>{}):(ke.setTitleBarStyle("transparent"),ke.setFullscreen(!0),ke.center(),w(!1))})}),document.getElementById("titlebar-close")?.addEventListener("click",()=>ke.close())},Pe=()=>{const ke=N_();Ue(ke)},$e=async(ke,Ne)=>{let et=await fV()+"/iptv-checker-file-"+new Date().getTime()+"."+Ne,vt="";Ne==="txt"?vt=gt(ke):vt=st(ke);const wt=await mV({defaultPath:et,filters:[{name:et,extensions:[Ne]}]});console.log("filePath---",wt),wt&&await pV(wt,vt)},rt=async(ke,Ne)=>{var Qe=document.createElement("a");let et="";Ne==="txt"?et=gt(ke):et=st(ke);var vt=new Blob([et]),wt=window.URL.createObjectURL(vt);Qe.href=wt,Qe.download="iptv-checker-"+new Date().getTime()+"."+Ne,Qe.click()},lt=ke=>DW.MD5(ke).toString();M.useEffect(()=>{qe(),_t(),Pr(),bi(),Dt("now_mod",{}).then(Ne=>{g(Ne),Pe(),console.log("now mod",Ne);let Qe=gV();Qe!==""&&(console.log("now os type",Qe),v(Qe))}).catch(Ne=>{console.log("invoke---",Ne)});let ke=localStorage.getItem("settings")??"";if(ke!=="")try{let Ne=JSON.parse(ke);dt(Ne.language),Be(Ne)}catch(Ne){console.log(Ne)}},[]);const ht=ke=>{h(ke)},ut=async ke=>{let Ne=ke.split(","),Qe=[];for(let et=0;et<Ne.length;et++)if(ot(Ne[et])&&Ne[et].includes(".m3u8")){let vt="channel "+et,wt='#EXTINF:-1 tvg-id="" tvg-logo="" group-title="Undefined",'+vt+`
`+Ne[et],Mt='#EXTINF:-1 tvg-id="" tvg-logo="" group-title="Undefined",'+vt+`
`+Ne[et],_r=nn.buildM3uBaseObject(et,Ne[et],"Undefined","","","","",vt,wt,Mt);Qe.push(_r)}return Qe.length===0?[]:St(Qe)},St=ke=>{let Ne=[];for(let Qe=0;Qe<ke.length;Qe++)Ne.push(ke[Qe].raw);return Ne},ot=ke=>new RegExp("^(https?:\\/\\/)?((([a-z\\d]([a-z\\d-]*[a-z\\d])*)\\.)+[a-z]{2,}|((\\d{1,3}\\.){3}\\d{1,3}))(\\:\\d+)?(\\/[-a-z\\d%_.~+]*)*(\\?[;&a-z\\d%_.~+=-]*)?(\\#[-a-z\\d_]*)?$","i").test(ke),yr=async ke=>{let Ne=ke.split(","),Qe=[];for(let Mt=0;Mt<Ne.length;Mt++)ot(Ne[Mt])&&Ne[Mt].includes(".m3u")&&Qe.push(Ne[Mt]);let et=[];for(let Mt=0;Mt<Qe.length;Mt++){let _r=ye(Qe[Mt]);et.push(Ar.get(_r,{timeout:xe.httpRequestTimeout}))}const vt=await Promise.allSettled(et);let wt=[];return vt.forEach((Mt,_r)=>{if(Mt.status==="fulfilled"){const zr=Mt.value.data;try{let gn=nn.parseOriginalBodyToList(zr);for(let wr=0;wr<gn.length;wr++)wt.push(gn[wr])}catch(gn){console.log("err",gn)}}}),St(wt)},pr=async ke=>{try{let Ne=nn.parseQuoteFormat(ke);return St(Ne)}catch{return[]}},jr=ke=>{try{return nn.parseOriginalBodyToList(ke)}catch{return[]}},ur=async ke=>{let Ne=[ut,yr,pr],Qe=[],et=!1;for(const vt of Ne)if(!et){let wt=await vt(ke);wt.length>0&&(et=!0,Qe=wt)}return Qe.length>0?`#EXTM3U
`+Qe.join(`
`):ke},Wt=ke=>{localStorage.setItem("settings",JSON.stringify(ke)),Be(ke)},mr=ke=>{u(ke)},Tr=()=>{o(""),ne([]),n("")},Nr=(ke,Ne)=>ke.indexOf(Ne)!==-1,Tt=ke=>{let Ne=[];for(let et=0;et<ae.length;et++){let vt=!0;for(let wt=0;wt<ke.length;wt++)ke[wt]===ae[et].index&&(vt=!1);vt&&Ne.push(ae[et])}ne(et=>et.filter(function(vt,wt){for(let Mt=0;Mt<ke.length;Mt++)if(ke[Mt]===vt.index)return!1;return!0})),console.log("detailList---",Ne,ae);let Qe=Ht(k);Qe!==null&&(Qe.data=Ne,console.log("updateOriginalData data---",Qe),An(Qe))},Ht=ke=>{for(let Ne=0;Ne<ue.length;Ne++)if(ue[Ne].md5===ke)return ue[Ne];return null},An=ke=>{let Ne=[];for(let Qe=0;Qe<ue.length;Qe++){let et=ue[Qe];ue[Qe].md5===k&&(et=ke),Ne.push(et)}mn(Ne)},Vt=(ke,Ne)=>{for(let Qe=0;Qe<ke.length;Qe++)if(ke[Qe]===Ne)return!0;return!1},Cr=(ke,Ne,Qe)=>{if(console.log("filterM3u",ke,Ne,Qe),ke.length===0&&Ne.length===0&&Qe.length===0)return;let et=Te();console.log("temp",et);let vt=[],wt=1;for(let Mt=0;Mt<et.length;Mt++){let _r=!0;if(Qe.length>0&&et[Mt].videoType!==""){_r=!1;for(let wr=0;wr<Qe.length;wr++)et[Mt].videoType===Qe[wr]&&(_r=!0)}let zr=!0;if(ke.length>0){zr=!1;for(let wr=0;wr<ke.length;wr++)Nr(et[Mt].sName,ke[wr].toLowerCase())&&(zr=!0)}let gn=!0;if(Ne.length>0&&(gn=!1,Vt(Ne,et[Mt].groupTitle)&&(gn=!0)),gn&&_r&&zr){let wr=et[Mt];wr.index=wt,vt.push(wr),wt++}}Oe("setShowM3uBody---",vt),ne(vt)},Ur=ke=>{let Ne=nn.parseOriginalBodyToList(ke),Qe=[];Qe.push(["","","",""]);for(let et=0;et<Ne.length;et++)Qe.push([Ne[et].name,Ne[et].url,Ne[et].groupTitle,Ne[et].tvgLogo]);return Qe},qr=ke=>{Tr(),n(ke);let Ne=nn.parseOriginalBodyToList(ke);ne(Ne)},En=ke=>{let Ne=!1;for(let Qe=0;Qe<Q.groups.length;Qe++)Q.groups[Qe]===ke&&(Ne=!0);if(!Ne){let Qe=In(Q.groups);Qe.push(ke),ie({...Q,groups:Qe})}},Dn=ke=>{let Ne=[],Qe="",et=1;for(let vt=0;vt<ke.length;vt++){Qe+=ke[vt]+`
`;let wt=nn.parseOriginalBodyToList(ke[vt]);for(let Mt=0;Mt<wt.length;Mt++)wt[Mt].index=et,Ne.push(wt[Mt]),et++}Tr(),ne(Ne),n(Qe)},In=ke=>JSON.parse(JSON.stringify(ke)),Mr=(ke,Ne,Qe,et,vt,wt)=>{console.log("data",ke);for(let Mt=0;Mt<ke.length;Mt++)if(ke[Mt].index===Ne){let _r="";et!==null&&(_r=nn.getVideoResolution(et.width,et.height));let zr={...ke[Mt],status:Qe,video:et,audio:vt,videoType:_r,delay:wt};ke[Mt]=zr}return ke},se=()=>{let ke=[];for(let Ne=0;Ne<ae.length;Ne+=1)ae[Ne].checked&&ke.push(ae[Ne]);s(ke)},fe=()=>{let ke=Te();o(st(ke))},Te=()=>{let ke=null;for(let Ne=0;Ne<ue.length;Ne++)ue[Ne].md5===k&&(ke=ue[Ne].data);return ke},je=ke=>{let Ne=[...ae];const Qe=Ne.findIndex(et=>et.index===ke);Ne[Qe].checked=!Ne[Qe].checked,ne(Ne)},pt=(ke,Ne)=>{const et=[...ke].findIndex(vt=>vt.index===Ne);return ke[et]},Gt=ke=>{ne(ke===1?Ne=>Ne.map((Qe,et)=>({...Qe,checked:!0})):Ne=>Ne.map((Qe,et)=>({...Qe,checked:!1})))},be=(ke,Ne)=>{if(m===1)return ke;let Qe=parseInt(Ne,10);return"/check/url-is-available?url="+ke+"&timeout="+(isNaN(Qe)?"-1":Qe)},ye=(ke,Ne)=>{if(m===1)return ke;let Qe=parseInt(Ne,10);return Oe(ke,Qe),"/fetch/m3u-body?url="+ke+"&timeout="+(isNaN(Qe)?"-1":Qe)},Ae=(ke,Ne)=>{const Qe=[];for(let et=0;et<ke.length;et+=Ne)Qe.push(ke.slice(et,et+Ne));return Qe},Ge=async(ke,Ne,Qe)=>{let et={},vt={},wt=Ae(ke,Ne.concurrent);if(m===1){console.log("start check");for(let Mt=0;Mt<wt.length;Mt++){let _r=[],zr=[];for(let wr=0;wr<wt[Mt].length;wr++){let hi=wt[Mt][wr];if(pt(In(ke),hi.index).status!==0){Oe("do check status != 0");continue}_r.push(wt[Mt][wr]),zr.push(Ar.get(wt[Mt][wr].url,{timeout:Ne.httpRequestTimeout}))}if(zr.length===0)continue;(await Promise.allSettled(zr)).forEach((wr,hi)=>{let Br=_r[hi];if(wr.status==="fulfilled"){wr.value;let On=-1;et[Br.url]={video:null,audio:null,videoType:null,status:1,delay:On},vt[Br.sName]===void 0||vt[Br.sName]===null?vt[Br.sName]={index:Br.index,delay:On}:vt[Br.sName].delay>=On&&(vt[Br.sName]={index:Br.index,delay:On}),ke=Mr(ke,Br.index,1,null,null,On),Qe(200,Br.index)}else et[Br.url]={status:2},ke=Mr(ke,Br.index,2,null,null,0),Qe(500,Br.index)})}console.log("end check")}else{console.log("start server check");for(let Mt=0;Mt<wt.length;Mt++){console.log("----now",wt[Mt]);let _r=[],zr=[];for(let wr=0;wr<wt[Mt].length;wr++){let hi=wt[Mt][wr];if(pt(ke,hi.index).status!==0){Oe("do check status != 0");continue}_r.push(wt[Mt][wr]);let On=be(wt[Mt][wr].url,Ne.httpRequestTimeout);zr.push(Ar.get(On,{timeout:Ne.httpRequestTimeout}))}if(zr.length===0)continue;(await Promise.allSettled(zr)).forEach((wr,hi)=>{let Br=_r[hi];if(wr.status==="fulfilled"){const On=wr.value;console.log("resp",On);let $n=On.data.delay;et[Br.url]={video:On.data.video,audio:On.data.audio,videoType:nn.getVideoResolution(On.data.video.width,On.data.video.height),status:1,delay:On.data.delay},vt[Br.sName]===void 0||vt[Br.sName]===null?vt[Br.sName]={index:Br.index,delay:$n}:vt[Br.sName].delay>=$n&&(vt[Br.sName]={index:Br.index,delay:$n}),ke=Mr(ke,Br.index,1,On.data.video,On.data.audio,On.data.delay),Qe(200,Br.index)}else et[Br.url]={status:2},ke=Mr(ke,Br.index,2,null,null,0),Qe(500,Br.index)})}}return ke},Xe=async(ke,Ne,Qe,et)=>{let vt=In(ke);return Qe(vt.length),await Ge(vt,Ne,et)},yt=ke=>{ne(ke)},At=()=>{o(dr(ae))},st=ke=>dr(ke),gt=ke=>{let Ne=[];for(let Qe=0;Qe<ke.length;Qe++)Ne.push(ke[Qe].name+","+ke[Qe].url);return Ne.join(`
`)},jt=(ke,Ne)=>{Ft(ke,{groupTitle:Ne})},Kt=ke=>{En(ke)},Ft=(ke,Ne)=>{let Qe=In(ae);Ne.groupTitle!==void 0&&Ne.groupTitle!==null&&En(Ne.groupTitle);for(let vt=0;vt<Qe.length;vt++)if(Vt(ke,Qe[vt].index))for(let wt in Ne)wt==="name"&&(Qe[vt].sName=Ne[wt]),Qe[vt][wt]=Ne[wt];let et=ae;for(let vt=0;vt<et.length;vt++)if(Vt(ke,et[vt].index))for(let wt in Ne)wt==="name"&&(et[vt].sName=Ne[wt].toLowerCase()),et[vt][wt]=Ne[wt];ne(Qe)},dr=ke=>{let Ne=`#EXTM3U
`;for(let Qe=0;Qe<ke.length;Qe+=1)Ne+=`#EXTINF:-1 tvg-name="${ke[Qe].tvgName}" tvg-id="${ke[Qe].tvgId}" tvg-logo="${ke[Qe].tvgLogo}" group-title="${ke[Qe].groupTitle}",${ke[Qe].name}
${ke[Qe].url}
`;return Ne},xt=ke=>{let Ne=lt(JSON.stringify(ke)),Qe={urls:ke,md5:Ne},et=In(E),vt=!1;for(let wt=0;wt<et.length;wt++)et[wt].md5===Ne&&(vt=!0);vt||(et.length>=5&&et.splice(0,1),et.push(Qe),Fr(et))},fr="checkHistory",Jr="subCheckMenuList",Pr=()=>{let ke=localStorage.getItem(fr);try{let Ne=JSON.parse(ke)??[];D(Ne)}catch{console.log("read checkHistory from local error")}},Fr=ke=>{D(ke),localStorage.setItem(fr,JSON.stringify(ke))},Pn=(ke,Ne)=>{const Qe=/(\D+)(\d+)/;if(ke===null||Ne===null)return-1;console.log("----a",ke),console.log("----b",Ne);let et="",vt="",wt=-1,Mt=-1,_r=ke.sName.match(Qe);_r&&_r.length>=3&&(et=_r[1],vt=_r[2]);let zr=Ne.sName.match(Qe);return zr&&zr.length>=3&&(wt=zr[1],Mt=zr[2]),et<wt?-1:et>wt?1:parseInt(vt)-parseInt(Mt)},er=(ke,Ne,Qe,et,vt)=>{vt&&(console.log("addDetail----sort----",ke),ke.sort(Pn));let wt=In(ue);console.log("dataList--",wt);let Mt=lt(JSON.stringify(Ne)),_r=!1;for(let zr=0;zr<wt.length;zr++)wt[zr].md5===Mt&&(_r=!0);return _r||(wt.push({md5:Mt,data:ke,original:{urls:Ne,local:Qe,ffmpeg:0,sort:vt,check:et},menu:{groups:Ss(ke)},query:{needFast:!1,searchName:[],group:""}}),mn(wt)),Mt},bi=()=>{let ke=localStorage.getItem(Jr);try{let Ne=JSON.parse(ke)??[];ee(Ne)}catch{console.log("read checkHistory from local error")}},mn=ke=>{ee(ke),localStorage.setItem(Jr,JSON.stringify(ke))},Ss=ke=>{let Ne={};for(let et=0;et<ke.length;et++)ke[et].groupTitle!==""&&(Ne[ke[et].groupTitle]=ke[et].groupTitle);let Qe=[];for(let et in Ne)Qe.push(Ne[et]);return Qe},tn=async ke=>{let Ne=[];for(let et=0;et<ke.length;et++){let vt=ye(ke[et].url);Ne.push(Ar.get(vt,{timeout:xe.httpRequestTimeout}))}return(await Promise.allSettled(Ne)).forEach((et,vt)=>{let wt=!0,Mt="";if(et.status==="fulfilled"){const _r=et.value.data;Ts(_r)?(wt=!1,Mt=_r):(wt=!0,Mt=_r)}else wt=!0,Mt=et.reason.message;wt?ke[vt].status=500:ke[vt].status=200,ke[vt].body=Mt}),ke},Ts=ke=>ke.substr(0,7)==="#EXTM3U",di=ke=>{let Ne=[];for(let Qe=0;Qe<ue.length;Qe++)ue[Qe].md5!==ke&&Ne.push(ue[Qe]);mn(Ne),Dr()},ii=ke=>{H(ke);let Ne=Ht(ke);Ne&&(ne(Ne.data),V(Ne.query),ie(Ne.menu),he(Ne))},Dr=()=>{H(""),ne([]),V(null),ie(null),he([])};return F.jsx(vo.Provider,{value:{originalM3uBody:t,changeOriginalM3uBody:qr,exportDataStr:a,setExportDataStr:o,exportData:i,onChangeExportData:yt,videoResolution:l,changeVideoResolution:mr,settings:xe,onChangeSettings:Wt,headerHeight:145,filterM3u:Cr,deleteShowM3uRow:Tt,onExportValidM3uData:se,onSelectedRow:je,onSelectedOrNotAll:Gt,changeDialogBodyData:fe,changeOriginalM3uBodies:Dn,updateDataByIndex:Ft,onChangeExportStr:At,batchChangeGroupName:jt,addGroupName:Kt,getCheckUrl:be,strToCsv:Ur,clearDetailData:Tr,getM3uBody:ye,needFastSource:c,onChangeNeedFastSource:ht,nowMod:m,getBodyType:ur,changeLanguage:dt,languageList:me,clientSaveFile:$e,nowPlatform:y,videoPlayTypes:pe,initControlBar:Ue,showWindowsTopBar:x,doFastCheck:Xe,subCheckMenuList:ue,checkHistory:E,saveDataToHistory:xt,addDetail:er,get_m3u_body:tn,get_m3u8_info_by_m3u_ori_data:jr,m3uObjectToM3uBody:st,m3uObjectToTxtBody:gt,webSaveFile:rt,detailList:ae,detailQuery:q,detailMenu:Q,ffmepgCheck:L,detailOriginal:le,updateDetailMd5:ii,delDetailData:di,detailMd5:k,configInfo:U,showNewVersion:I,check_version:Ot,saveFile:Ze},children:r})};var $m={},zP;function OW(){if(zP)return $m;zP=1,Object.defineProperty($m,"__esModule",{value:!0}),$m.parse=a,$m.serialize=u;const r=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,e=/^[\u0021-\u003A\u003C-\u007E]*$/,t=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,n=/^[\u0020-\u003A\u003D-\u007E]*$/,i=Object.prototype.toString,s=(()=>{const m=function(){};return m.prototype=Object.create(null),m})();function a(m,g){const y=new s,v=m.length;if(v<2)return y;const x=g?.decode||c;let w=0;do{const E=m.indexOf("=",w);if(E===-1)break;const D=m.indexOf(";",w),I=D===-1?v:D;if(E>I){w=m.lastIndexOf(";",E-1)+1;continue}const A=o(m,w,E),L=l(m,E,A),N=m.slice(A,L);if(y[N]===void 0){let U=o(m,E+1,I),B=l(m,I,U);const k=x(m.slice(U,B));y[N]=k}w=I+1}while(w<v);return y}function o(m,g,y){do{const v=m.charCodeAt(g);if(v!==32&&v!==9)return g}while(++g<y);return y}function l(m,g,y){for(;g>y;){const v=m.charCodeAt(--g);if(v!==32&&v!==9)return g+1}return y}function u(m,g,y){const v=y?.encode||encodeURIComponent;if(!r.test(m))throw new TypeError(`argument name is invalid: ${m}`);const x=v(g);if(!e.test(x))throw new TypeError(`argument val is invalid: ${g}`);let w=m+"="+x;if(!y)return w;if(y.maxAge!==void 0){if(!Number.isInteger(y.maxAge))throw new TypeError(`option maxAge is invalid: ${y.maxAge}`);w+="; Max-Age="+y.maxAge}if(y.domain){if(!t.test(y.domain))throw new TypeError(`option domain is invalid: ${y.domain}`);w+="; Domain="+y.domain}if(y.path){if(!n.test(y.path))throw new TypeError(`option path is invalid: ${y.path}`);w+="; Path="+y.path}if(y.expires){if(!h(y.expires)||!Number.isFinite(y.expires.valueOf()))throw new TypeError(`option expires is invalid: ${y.expires}`);w+="; Expires="+y.expires.toUTCString()}if(y.httpOnly&&(w+="; HttpOnly"),y.secure&&(w+="; Secure"),y.partitioned&&(w+="; Partitioned"),y.priority)switch(typeof y.priority=="string"?y.priority.toLowerCase():void 0){case"low":w+="; Priority=Low";break;case"medium":w+="; Priority=Medium";break;case"high":w+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${y.priority}`)}if(y.sameSite)switch(typeof y.sameSite=="string"?y.sameSite.toLowerCase():y.sameSite){case!0:case"strict":w+="; SameSite=Strict";break;case"lax":w+="; SameSite=Lax";break;case"none":w+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${y.sameSite}`)}return w}function c(m){if(m.indexOf("%")===-1)return m;try{return decodeURIComponent(m)}catch{return m}}function h(m){return i.call(m)==="[object Date]"}return $m}OW();/**
 * react-router v7.6.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var WF=r=>{throw TypeError(r)},MW=(r,e,t)=>e.has(r)||WF("Cannot "+t),qT=(r,e,t)=>(MW(r,e,"read from private field"),t?t.call(r):e.get(r)),FW=(r,e,t)=>e.has(r)?WF("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(r):e.set(r,t),HP="popstate";function BW(r={}){function e(i,s){let{pathname:a="/",search:o="",hash:l=""}=wc(i.location.hash.substring(1));return!a.startsWith("/")&&!a.startsWith(".")&&(a="/"+a),V0("",{pathname:a,search:o,hash:l},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function t(i,s){let a=i.document.querySelector("base"),o="";if(a&&a.getAttribute("href")){let l=i.location.href,u=l.indexOf("#");o=u===-1?l:l.slice(0,u)}return o+"#"+(typeof s=="string"?s:wd(s))}function n(i,s){_i(i.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(s)})`)}return UW(e,t,n,r)}function en(r,e){if(r===!1||r===null||typeof r>"u")throw new Error(e)}function _i(r,e){if(!r){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function NW(){return Math.random().toString(36).substring(2,10)}function VP(r,e){return{usr:r.state,key:r.key,idx:e}}function V0(r,e,t=null,n){return{pathname:typeof r=="string"?r:r.pathname,search:"",hash:"",...typeof e=="string"?wc(e):e,state:t,key:e&&e.key||n||NW()}}function wd({pathname:r="/",search:e="",hash:t=""}){return e&&e!=="?"&&(r+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(r+=t.charAt(0)==="#"?t:"#"+t),r}function wc(r){let e={};if(r){let t=r.indexOf("#");t>=0&&(e.hash=r.substring(t),r=r.substring(0,t));let n=r.indexOf("?");n>=0&&(e.search=r.substring(n),r=r.substring(0,n)),r&&(e.pathname=r)}return e}function UW(r,e,t,n={}){let{window:i=document.defaultView,v5Compat:s=!1}=n,a=i.history,o="POP",l=null,u=c();u==null&&(u=0,a.replaceState({...a.state,idx:u},""));function c(){return(a.state||{idx:null}).idx}function h(){o="POP";let x=c(),w=x==null?null:x-u;u=x,l&&l({action:o,location:v.location,delta:w})}function m(x,w){o="PUSH";let E=V0(v.location,x,w);t&&t(E,x),u=c()+1;let D=VP(E,u),I=v.createHref(E);try{a.pushState(D,"",I)}catch(A){if(A instanceof DOMException&&A.name==="DataCloneError")throw A;i.location.assign(I)}s&&l&&l({action:o,location:v.location,delta:1})}function g(x,w){o="REPLACE";let E=V0(v.location,x,w);t&&t(E,x),u=c();let D=VP(E,u),I=v.createHref(E);a.replaceState(D,"",I),s&&l&&l({action:o,location:v.location,delta:0})}function y(x){return qF(x)}let v={get action(){return o},get location(){return r(i,a)},listen(x){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(HP,h),l=x,()=>{i.removeEventListener(HP,h),l=null}},createHref(x){return e(i,x)},createURL:y,encodeLocation(x){let w=y(x);return{pathname:w.pathname,search:w.search,hash:w.hash}},push:m,replace:g,go(x){return a.go(x)}};return v}function qF(r,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),en(t,"No window.location.(origin|href) available to create URL");let n=typeof r=="string"?r:wd(r);return n=n.replace(/ $/,"%20"),!e&&n.startsWith("//")&&(n=t+n),new URL(n,t)}var o0,WP=class{constructor(r){if(FW(this,o0,new Map),r)for(let[e,t]of r)this.set(e,t)}get(r){if(qT(this,o0).has(r))return qT(this,o0).get(r);if(r.defaultValue!==void 0)return r.defaultValue;throw new Error("No value found for context")}set(r,e){qT(this,o0).set(r,e)}};o0=new WeakMap;var $W=new Set(["lazy","caseSensitive","path","id","index","children"]);function jW(r){return $W.has(r)}var zW=new Set(["lazy","caseSensitive","path","id","index","unstable_middleware","children"]);function HW(r){return zW.has(r)}function VW(r){return r.index===!0}function U_(r,e,t=[],n={}){return r.map((i,s)=>{let a=[...t,String(s)],o=typeof i.id=="string"?i.id:a.join("-");if(en(i.index!==!0||!i.children,"Cannot specify children on an index route"),en(!n[o],`Found a route id collision on id "${o}".  Route id's must be globally unique within Data Router usages`),VW(i)){let l={...i,...e(i),id:o};return n[o]=l,l}else{let l={...i,...e(i),id:o,children:void 0};return n[o]=l,i.children&&(l.children=U_(i.children,e,a,n)),l}})}function yd(r,e,t="/"){return c_(r,e,t,!1)}function c_(r,e,t,n){let i=typeof e=="string"?wc(e):e,s=Ko(i.pathname||"/",t);if(s==null)return null;let a=KF(r);WW(a);let o=null;for(let l=0;o==null&&l<a.length;++l){let u=rq(s);o=eq(a[l],u,n)}return o}function GF(r,e){let{route:t,pathname:n,params:i}=r;return{id:t.id,pathname:n,params:i,data:e[t.id],handle:t.handle}}function KF(r,e=[],t=[],n=""){let i=(s,a,o)=>{let l={relativePath:o===void 0?s.path||"":o,caseSensitive:s.caseSensitive===!0,childrenIndex:a,route:s};l.relativePath.startsWith("/")&&(en(l.relativePath.startsWith(n),`Absolute route path "${l.relativePath}" nested under path "${n}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),l.relativePath=l.relativePath.slice(n.length));let u=yu([n,l.relativePath]),c=t.concat(l);s.children&&s.children.length>0&&(en(s.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${u}".`),KF(s.children,e,c,u)),!(s.path==null&&!s.index)&&e.push({path:u,score:JW(u,s.index),routesMeta:c})};return r.forEach((s,a)=>{if(s.path===""||!s.path?.includes("?"))i(s,a);else for(let o of XF(s.path))i(s,a,o)}),e}function XF(r){let e=r.split("/");if(e.length===0)return[];let[t,...n]=e,i=t.endsWith("?"),s=t.replace(/\?$/,"");if(n.length===0)return i?[s,""]:[s];let a=XF(n.join("/")),o=[];return o.push(...a.map(l=>l===""?s:[s,l].join("/"))),i&&o.push(...a),o.map(l=>r.startsWith("/")&&l===""?"/":l)}function WW(r){r.sort((e,t)=>e.score!==t.score?t.score-e.score:ZW(e.routesMeta.map(n=>n.childrenIndex),t.routesMeta.map(n=>n.childrenIndex)))}var qW=/^:[\w-]+$/,GW=3,KW=2,XW=1,YW=10,QW=-2,qP=r=>r==="*";function JW(r,e){let t=r.split("/"),n=t.length;return t.some(qP)&&(n+=QW),e&&(n+=KW),t.filter(i=>!qP(i)).reduce((i,s)=>i+(qW.test(s)?GW:s===""?XW:YW),n)}function ZW(r,e){return r.length===e.length&&r.slice(0,-1).every((n,i)=>n===e[i])?r[r.length-1]-e[e.length-1]:0}function eq(r,e,t=!1){let{routesMeta:n}=r,i={},s="/",a=[];for(let o=0;o<n.length;++o){let l=n[o],u=o===n.length-1,c=s==="/"?e:e.slice(s.length)||"/",h=$_({path:l.relativePath,caseSensitive:l.caseSensitive,end:u},c),m=l.route;if(!h&&u&&t&&!n[n.length-1].route.index&&(h=$_({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},c)),!h)return null;Object.assign(i,h.params),a.push({params:i,pathname:yu([s,h.pathname]),pathnameBase:sq(yu([s,h.pathnameBase])),route:m}),h.pathnameBase!=="/"&&(s=yu([s,h.pathnameBase]))}return a}function $_(r,e){typeof r=="string"&&(r={path:r,caseSensitive:!1,end:!0});let[t,n]=tq(r.path,r.caseSensitive,r.end),i=e.match(t);if(!i)return null;let s=i[0],a=s.replace(/(.)\/+$/,"$1"),o=i.slice(1);return{params:n.reduce((u,{paramName:c,isOptional:h},m)=>{if(c==="*"){let y=o[m]||"";a=s.slice(0,s.length-y.length).replace(/(.)\/+$/,"$1")}const g=o[m];return h&&!g?u[c]=void 0:u[c]=(g||"").replace(/%2F/g,"/"),u},{}),pathname:s,pathnameBase:a,pattern:r}}function tq(r,e=!1,t=!0){_i(r==="*"||!r.endsWith("*")||r.endsWith("/*"),`Route path "${r}" will be treated as if it were "${r.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${r.replace(/\*$/,"/*")}".`);let n=[],i="^"+r.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,o,l)=>(n.push({paramName:o,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return r.endsWith("*")?(n.push({paramName:"*"}),i+=r==="*"||r==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?i+="\\/*$":r!==""&&r!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),n]}function rq(r){try{return r.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return _i(!1,`The URL path "${r}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),r}}function Ko(r,e){if(e==="/")return r;if(!r.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,n=r.charAt(t);return n&&n!=="/"?null:r.slice(t)||"/"}function nq(r,e="/"){let{pathname:t,search:n="",hash:i=""}=typeof r=="string"?wc(r):r;return{pathname:t?t.startsWith("/")?t:iq(t,e):e,search:aq(n),hash:oq(i)}}function iq(r,e){let t=e.replace(/\/+$/,"").split("/");return r.split("/").forEach(i=>{i===".."?t.length>1&&t.pop():i!=="."&&t.push(i)}),t.length>1?t.join("/"):"/"}function GT(r,e,t,n){return`Cannot include a '${r}' character in a manually specified \`to.${e}\` field [${JSON.stringify(n)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function YF(r){return r.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function KE(r){let e=YF(r);return e.map((t,n)=>n===e.length-1?t.pathname:t.pathnameBase)}function XE(r,e,t,n=!1){let i;typeof r=="string"?i=wc(r):(i={...r},en(!i.pathname||!i.pathname.includes("?"),GT("?","pathname","search",i)),en(!i.pathname||!i.pathname.includes("#"),GT("#","pathname","hash",i)),en(!i.search||!i.search.includes("#"),GT("#","search","hash",i)));let s=r===""||i.pathname==="",a=s?"/":i.pathname,o;if(a==null)o=t;else{let h=e.length-1;if(!n&&a.startsWith("..")){let m=a.split("/");for(;m[0]==="..";)m.shift(),h-=1;i.pathname=m.join("/")}o=h>=0?e[h]:"/"}let l=nq(i,o),u=a&&a!=="/"&&a.endsWith("/"),c=(s||a===".")&&t.endsWith("/");return!l.pathname.endsWith("/")&&(u||c)&&(l.pathname+="/"),l}var yu=r=>r.join("/").replace(/\/\/+/g,"/"),sq=r=>r.replace(/\/+$/,"").replace(/^\/*/,"/"),aq=r=>!r||r==="?"?"":r.startsWith("?")?r:"?"+r,oq=r=>!r||r==="#"?"":r.startsWith("#")?r:"#"+r,j_=class{constructor(r,e,t,n=!1){this.status=r,this.statusText=e||"",this.internal=n,t instanceof Error?(this.data=t.toString(),this.error=t):this.data=t}};function W0(r){return r!=null&&typeof r.status=="number"&&typeof r.statusText=="string"&&typeof r.internal=="boolean"&&"data"in r}var QF=["POST","PUT","PATCH","DELETE"],lq=new Set(QF),uq=["GET",...QF],cq=new Set(uq),dq=new Set([301,302,303,307,308]),hq=new Set([307,308]),KT={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},fq={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},jm={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},YE=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,pq=r=>({hasErrorBoundary:!!r.hasErrorBoundary}),JF="remix-router-transitions",ZF=Symbol("ResetLoaderData");function mq(r){const e=r.window?r.window:typeof window<"u"?window:void 0,t=typeof e<"u"&&typeof e.document<"u"&&typeof e.document.createElement<"u";en(r.routes.length>0,"You must provide a non-empty routes array to createRouter");let n=r.hydrationRouteProperties||[],i=r.mapRouteProperties||pq,s={},a=U_(r.routes,i,void 0,s),o,l=r.basename||"/",u=r.dataStrategy||xq,c={unstable_middleware:!1,...r.future},h=null,m=new Set,g=null,y=null,v=null,x=r.hydrationData!=null,w=yd(a,r.history.location,l),E=!1,D=null,I;if(w==null&&!r.patchRoutesOnNavigation){let be=No(404,{pathname:r.history.location.pathname}),{matches:ye,route:Ae}=iR(a);I=!0,w=ye,D={[Ae.id]:be}}else if(w&&!r.hydrationData&&Te(w,a,r.history.location.pathname).active&&(w=null),w)if(w.some(be=>be.route.lazy))I=!1;else if(!w.some(be=>be.route.loader))I=!0;else{let be=r.hydrationData?r.hydrationData.loaderData:null,ye=r.hydrationData?r.hydrationData.errors:null;if(ye){let Ae=w.findIndex(Ge=>ye[Ge.route.id]!==void 0);I=w.slice(0,Ae+1).every(Ge=>!XC(Ge.route,be,ye))}else I=w.every(Ae=>!XC(Ae.route,be,ye))}else{I=!1,w=[];let be=Te(null,a,r.history.location.pathname);be.active&&be.matches&&(E=!0,w=be.matches)}let A,L={historyAction:r.history.action,location:r.history.location,matches:w,initialized:I,navigation:KT,restoreScrollPosition:r.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:r.hydrationData&&r.hydrationData.loaderData||{},actionData:r.hydrationData&&r.hydrationData.actionData||null,errors:r.hydrationData&&r.hydrationData.errors||D,fetchers:new Map,blockers:new Map},N="POP",U=!1,B,k=!1,H=new Map,q=null,V=!1,Q=!1,ie=new Set,le=new Map,he=0,ae=-1,ne=new Map,ue=new Set,ee=new Map,pe=new Map,me=new Set,xe=new Map,Be,Oe=null;function dt(){if(h=r.history.listen(({action:be,location:ye,delta:Ae})=>{if(Be){Be(),Be=void 0;return}_i(xe.size===0||Ae!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let Ge=En({currentLocation:L.location,nextLocation:ye,historyAction:be});if(Ge&&Ae!=null){let Xe=new Promise(yt=>{Be=yt});r.history.go(Ae*-1),qr(Ge,{state:"blocked",location:ye,proceed(){qr(Ge,{state:"proceeding",proceed:void 0,reset:void 0,location:ye}),Xe.then(()=>r.history.go(Ae))},reset(){let yt=new Map(L.blockers);yt.set(Ge,jm),Ze({blockers:yt})}});return}return Ue(be,ye)}),t){Pq(e,H);let be=()=>Rq(e,H);e.addEventListener("pagehide",be),q=()=>e.removeEventListener("pagehide",be)}return L.initialized||Ue("POP",L.location,{initialHydration:!0}),A}function Ke(){h&&h(),q&&q(),m.clear(),B&&B.abort(),L.fetchers.forEach((be,ye)=>Tr(ye)),L.blockers.forEach((be,ye)=>Ur(ye))}function _t(be){return m.add(be),()=>m.delete(be)}function Ze(be,ye={}){L={...L,...be};let Ae=[],Ge=[];L.fetchers.forEach((Xe,yt)=>{Xe.state==="idle"&&(me.has(yt)?Ae.push(yt):Ge.push(yt))}),me.forEach(Xe=>{!L.fetchers.has(Xe)&&!le.has(Xe)&&Ae.push(Xe)}),[...m].forEach(Xe=>Xe(L,{deletedFetchers:Ae,viewTransitionOpts:ye.viewTransitionOpts,flushSync:ye.flushSync===!0})),Ae.forEach(Xe=>Tr(Xe)),Ge.forEach(Xe=>L.fetchers.delete(Xe))}function Ot(be,ye,{flushSync:Ae}={}){let Ge=L.actionData!=null&&L.navigation.formMethod!=null&&oo(L.navigation.formMethod)&&L.navigation.state==="loading"&&be.state?._isRedirect!==!0,Xe;ye.actionData?Object.keys(ye.actionData).length>0?Xe=ye.actionData:Xe=null:Ge?Xe=L.actionData:Xe=null;let yt=ye.loaderData?rR(L.loaderData,ye.loaderData,ye.matches||[],ye.errors):L.loaderData,At=L.blockers;At.size>0&&(At=new Map(At),At.forEach((jt,Kt)=>At.set(Kt,jm)));let st=U===!0||L.navigation.formMethod!=null&&oo(L.navigation.formMethod)&&be.state?._isRedirect!==!0;o&&(a=o,o=void 0),V||N==="POP"||(N==="PUSH"?r.history.push(be,be.state):N==="REPLACE"&&r.history.replace(be,be.state));let gt;if(N==="POP"){let jt=H.get(L.location.pathname);jt&&jt.has(be.pathname)?gt={currentLocation:L.location,nextLocation:be}:H.has(be.pathname)&&(gt={currentLocation:be,nextLocation:L.location})}else if(k){let jt=H.get(L.location.pathname);jt?jt.add(be.pathname):(jt=new Set([be.pathname]),H.set(L.location.pathname,jt)),gt={currentLocation:L.location,nextLocation:be}}Ze({...ye,actionData:Xe,loaderData:yt,historyAction:N,location:be,initialized:!0,navigation:KT,revalidation:"idle",restoreScrollPosition:fe(be,ye.matches||L.matches),preventScrollReset:st,blockers:At},{viewTransitionOpts:gt,flushSync:Ae===!0}),N="POP",U=!1,k=!1,V=!1,Q=!1,Oe?.resolve(),Oe=null}async function Nt(be,ye){if(typeof be=="number"){r.history.go(be);return}let Ae=KC(L.location,L.matches,l,be,ye?.fromRouteId,ye?.relative),{path:Ge,submission:Xe,error:yt}=GP(!1,Ae,ye),At=L.location,st=V0(L.location,Ge,ye&&ye.state);st={...st,...r.history.encodeLocation(st)};let gt=ye&&ye.replace!=null?ye.replace:void 0,jt="PUSH";gt===!0?jt="REPLACE":gt===!1||Xe!=null&&oo(Xe.formMethod)&&Xe.formAction===L.location.pathname+L.location.search&&(jt="REPLACE");let Kt=ye&&"preventScrollReset"in ye?ye.preventScrollReset===!0:void 0,Ft=(ye&&ye.flushSync)===!0,dr=En({currentLocation:At,nextLocation:st,historyAction:jt});if(dr){qr(dr,{state:"blocked",location:st,proceed(){qr(dr,{state:"proceeding",proceed:void 0,reset:void 0,location:st}),Nt(be,ye)},reset(){let xt=new Map(L.blockers);xt.set(dr,jm),Ze({blockers:xt})}});return}await Ue(jt,st,{submission:Xe,pendingError:yt,preventScrollReset:Kt,replace:ye&&ye.replace,enableViewTransition:ye&&ye.viewTransition,flushSync:Ft})}function qe(){Oe||(Oe=Lq()),jr(),Ze({revalidation:"loading"});let be=Oe.promise;return L.navigation.state==="submitting"?be:L.navigation.state==="idle"?(Ue(L.historyAction,L.location,{startUninterruptedRevalidation:!0}),be):(Ue(N||L.historyAction,L.navigation.location,{overrideNavigation:L.navigation,enableViewTransition:k===!0}),be)}async function Ue(be,ye,Ae){B&&B.abort(),B=null,N=be,V=(Ae&&Ae.startUninterruptedRevalidation)===!0,se(L.location,L.matches),U=(Ae&&Ae.preventScrollReset)===!0,k=(Ae&&Ae.enableViewTransition)===!0;let Ge=o||a,Xe=Ae&&Ae.overrideNavigation,yt=Ae?.initialHydration&&L.matches&&L.matches.length>0&&!E?L.matches:yd(Ge,ye,l),At=(Ae&&Ae.flushSync)===!0;if(yt&&L.initialized&&!Q&&Eq(L.location,ye)&&!(Ae&&Ae.submission&&oo(Ae.submission.formMethod))){Ot(ye,{matches:yt},{flushSync:At});return}let st=Te(yt,Ge,ye.pathname);if(st.active&&st.matches&&(yt=st.matches),!yt){let{error:Jr,notFoundMatches:Pr,route:Fr}=Dn(ye.pathname);Ot(ye,{matches:Pr,loaderData:{},errors:{[Fr.id]:Jr}},{flushSync:At});return}B=new AbortController;let gt=Nf(r.history,ye,B.signal,Ae&&Ae.submission),jt=new WP(r.unstable_getContext?await r.unstable_getContext():void 0),Kt;if(Ae&&Ae.pendingError)Kt=[_h(yt).route.id,{type:"error",error:Ae.pendingError}];else if(Ae&&Ae.submission&&oo(Ae.submission.formMethod)){let Jr=await Pe(gt,ye,Ae.submission,yt,jt,st.active,Ae&&Ae.initialHydration===!0,{replace:Ae.replace,flushSync:At});if(Jr.shortCircuited)return;if(Jr.pendingActionResult){let[Pr,Fr]=Jr.pendingActionResult;if(ao(Fr)&&W0(Fr.error)&&Fr.error.status===404){B=null,Ot(ye,{matches:Jr.matches,loaderData:{},errors:{[Pr]:Fr.error}});return}}yt=Jr.matches||yt,Kt=Jr.pendingActionResult,Xe=XT(ye,Ae.submission),At=!1,st.active=!1,gt=Nf(r.history,gt.url,gt.signal)}let{shortCircuited:Ft,matches:dr,loaderData:xt,errors:fr}=await $e(gt,ye,yt,jt,st.active,Xe,Ae&&Ae.submission,Ae&&Ae.fetcherSubmission,Ae&&Ae.replace,Ae&&Ae.initialHydration===!0,At,Kt);Ft||(B=null,Ot(ye,{matches:dr||yt,...nR(Kt),loaderData:xt,errors:fr}))}async function Pe(be,ye,Ae,Ge,Xe,yt,At,st={}){jr();let gt=Dq(ye,Ae);if(Ze({navigation:gt},{flushSync:st.flushSync===!0}),yt){let Ft=await je(Ge,ye.pathname,be.signal);if(Ft.type==="aborted")return{shortCircuited:!0};if(Ft.type==="error"){let dr=_h(Ft.partialMatches).route.id;return{matches:Ft.partialMatches,pendingActionResult:[dr,{type:"error",error:Ft.error}]}}else if(Ft.matches)Ge=Ft.matches;else{let{notFoundMatches:dr,error:xt,route:fr}=Dn(ye.pathname);return{matches:dr,pendingActionResult:[fr.id,{type:"error",error:xt}]}}}let jt,Kt=l0(Ge,ye);if(!Kt.route.action&&!Kt.route.lazy)jt={type:"error",error:No(405,{method:be.method,pathname:ye.pathname,routeId:Kt.route.id})};else{let Ft=rp(i,s,be,Ge,Kt,At?[]:n,Xe),dr=await yr(be,Ft,Xe,null);if(jt=dr[Kt.route.id],!jt){for(let xt of Ge)if(dr[xt.route.id]){jt=dr[xt.route.id];break}}if(be.signal.aborted)return{shortCircuited:!0}}if(Ch(jt)){let Ft;return st&&st.replace!=null?Ft=st.replace:Ft=ZP(jt.response.headers.get("Location"),new URL(be.url),l)===L.location.pathname+L.location.search,await ot(be,jt,!0,{submission:Ae,replace:Ft}),{shortCircuited:!0}}if(ao(jt)){let Ft=_h(Ge,Kt.route.id);return(st&&st.replace)!==!0&&(N="PUSH"),{matches:Ge,pendingActionResult:[Ft.route.id,jt,Kt.route.id]}}return{matches:Ge,pendingActionResult:[Kt.route.id,jt]}}async function $e(be,ye,Ae,Ge,Xe,yt,At,st,gt,jt,Kt,Ft){let dr=yt||XT(ye,At),xt=At||st||aR(dr),fr=!V&&!jt;if(Xe){if(fr){let ke=rt(Ft);Ze({navigation:dr,...ke!==void 0?{actionData:ke}:{}},{flushSync:Kt})}let Dr=await je(Ae,ye.pathname,be.signal);if(Dr.type==="aborted")return{shortCircuited:!0};if(Dr.type==="error"){let ke=_h(Dr.partialMatches).route.id;return{matches:Dr.partialMatches,loaderData:{},errors:{[ke]:Dr.error}}}else if(Dr.matches)Ae=Dr.matches;else{let{error:ke,notFoundMatches:Ne,route:Qe}=Dn(ye.pathname);return{matches:Ne,loaderData:{},errors:{[Qe.id]:ke}}}}let Jr=o||a,{dsMatches:Pr,revalidatingFetchers:Fr}=KP(be,Ge,i,s,r.history,L,Ae,xt,ye,jt?[]:n,jt===!0,Q,ie,me,ee,ue,Jr,l,Ft);if(ae=++he,!r.dataStrategy&&!Pr.some(Dr=>Dr.shouldLoad)&&Fr.length===0){let Dr=An();return Ot(ye,{matches:Ae,loaderData:{},errors:Ft&&ao(Ft[1])?{[Ft[0]]:Ft[1].error}:null,...nR(Ft),...Dr?{fetchers:new Map(L.fetchers)}:{}},{flushSync:Kt}),{shortCircuited:!0}}if(fr){let Dr={};if(!Xe){Dr.navigation=dr;let ke=rt(Ft);ke!==void 0&&(Dr.actionData=ke)}Fr.length>0&&(Dr.fetchers=lt(Fr)),Ze(Dr,{flushSync:Kt})}Fr.forEach(Dr=>{Tt(Dr.key),Dr.controller&&le.set(Dr.key,Dr.controller)});let Pn=()=>Fr.forEach(Dr=>Tt(Dr.key));B&&B.signal.addEventListener("abort",Pn);let{loaderResults:er,fetcherResults:bi}=await pr(Pr,Fr,be,Ge);if(be.signal.aborted)return{shortCircuited:!0};B&&B.signal.removeEventListener("abort",Pn),Fr.forEach(Dr=>le.delete(Dr.key));let mn=Uv(er);if(mn)return await ot(be,mn.result,!0,{replace:gt}),{shortCircuited:!0};if(mn=Uv(bi),mn)return ue.add(mn.key),await ot(be,mn.result,!0,{replace:gt}),{shortCircuited:!0};let{loaderData:Ss,errors:tn}=tR(L,Ae,er,Ft,Fr,bi);jt&&L.errors&&(tn={...L.errors,...tn});let Ts=An(),di=Vt(ae),ii=Ts||di||Fr.length>0;return{matches:Ae,loaderData:Ss,errors:tn,...ii?{fetchers:new Map(L.fetchers)}:{}}}function rt(be){if(be&&!ao(be[1]))return{[be[0]]:be[1].data};if(L.actionData)return Object.keys(L.actionData).length===0?null:L.actionData}function lt(be){return be.forEach(ye=>{let Ae=L.fetchers.get(ye.key),Ge=zm(void 0,Ae?Ae.data:void 0);L.fetchers.set(ye.key,Ge)}),new Map(L.fetchers)}async function ht(be,ye,Ae,Ge){Tt(be);let Xe=(Ge&&Ge.flushSync)===!0,yt=o||a,At=KC(L.location,L.matches,l,Ae,ye,Ge?.relative),st=yd(yt,At,l),gt=Te(st,yt,At);if(gt.active&&gt.matches&&(st=gt.matches),!st){Wt(be,ye,No(404,{pathname:At}),{flushSync:Xe});return}let{path:jt,submission:Kt,error:Ft}=GP(!0,At,Ge);if(Ft){Wt(be,ye,Ft,{flushSync:Xe});return}let dr=l0(st,jt),xt=new WP(r.unstable_getContext?await r.unstable_getContext():void 0),fr=(Ge&&Ge.preventScrollReset)===!0;if(Kt&&oo(Kt.formMethod)){await ut(be,ye,jt,dr,st,xt,gt.active,Xe,fr,Kt);return}ee.set(be,{routeId:ye,path:jt}),await St(be,ye,jt,dr,st,xt,gt.active,Xe,fr,Kt)}async function ut(be,ye,Ae,Ge,Xe,yt,At,st,gt,jt){jr(),ee.delete(be);function Kt(vt){if(!vt.route.action&&!vt.route.lazy){let wt=No(405,{method:jt.formMethod,pathname:Ae,routeId:ye});return Wt(be,ye,wt,{flushSync:st}),!0}return!1}if(!At&&Kt(Ge))return;let Ft=L.fetchers.get(be);ur(be,Iq(jt,Ft),{flushSync:st});let dr=new AbortController,xt=Nf(r.history,Ae,dr.signal,jt);if(At){let vt=await je(Xe,Ae,xt.signal,be);if(vt.type==="aborted")return;if(vt.type==="error"){Wt(be,ye,vt.error,{flushSync:st});return}else if(vt.matches){if(Xe=vt.matches,Ge=l0(Xe,Ae),Kt(Ge))return}else{Wt(be,ye,No(404,{pathname:Ae}),{flushSync:st});return}}le.set(be,dr);let fr=he,Jr=rp(i,s,xt,Xe,Ge,n,yt),Fr=(await yr(xt,Jr,yt,be))[Ge.route.id];if(xt.signal.aborted){le.get(be)===dr&&le.delete(be);return}if(me.has(be)){if(Ch(Fr)||ao(Fr)){ur(be,dd(void 0));return}}else{if(Ch(Fr))if(le.delete(be),ae>fr){ur(be,dd(void 0));return}else return ue.add(be),ur(be,zm(jt)),ot(xt,Fr,!1,{fetcherSubmission:jt,preventScrollReset:gt});if(ao(Fr)){Wt(be,ye,Fr.error);return}}let Pn=L.navigation.location||L.location,er=Nf(r.history,Pn,dr.signal),bi=o||a,mn=L.navigation.state!=="idle"?yd(bi,L.navigation.location,l):L.matches;en(mn,"Didn't find any matches after fetcher action");let Ss=++he;ne.set(be,Ss);let tn=zm(jt,Fr.data);L.fetchers.set(be,tn);let{dsMatches:Ts,revalidatingFetchers:di}=KP(er,yt,i,s,r.history,L,mn,jt,Pn,n,!1,Q,ie,me,ee,ue,bi,l,[Ge.route.id,Fr]);di.filter(vt=>vt.key!==be).forEach(vt=>{let wt=vt.key,Mt=L.fetchers.get(wt),_r=zm(void 0,Mt?Mt.data:void 0);L.fetchers.set(wt,_r),Tt(wt),vt.controller&&le.set(wt,vt.controller)}),Ze({fetchers:new Map(L.fetchers)});let ii=()=>di.forEach(vt=>Tt(vt.key));dr.signal.addEventListener("abort",ii);let{loaderResults:Dr,fetcherResults:ke}=await pr(Ts,di,er,yt);if(dr.signal.aborted)return;if(dr.signal.removeEventListener("abort",ii),ne.delete(be),le.delete(be),di.forEach(vt=>le.delete(vt.key)),L.fetchers.has(be)){let vt=dd(Fr.data);L.fetchers.set(be,vt)}let Ne=Uv(Dr);if(Ne)return ot(er,Ne.result,!1,{preventScrollReset:gt});if(Ne=Uv(ke),Ne)return ue.add(Ne.key),ot(er,Ne.result,!1,{preventScrollReset:gt});let{loaderData:Qe,errors:et}=tR(L,mn,Dr,void 0,di,ke);Vt(Ss),L.navigation.state==="loading"&&Ss>ae?(en(N,"Expected pending action"),B&&B.abort(),Ot(L.navigation.location,{matches:mn,loaderData:Qe,errors:et,fetchers:new Map(L.fetchers)})):(Ze({errors:et,loaderData:rR(L.loaderData,Qe,mn,et),fetchers:new Map(L.fetchers)}),Q=!1)}async function St(be,ye,Ae,Ge,Xe,yt,At,st,gt,jt){let Kt=L.fetchers.get(be);ur(be,zm(jt,Kt?Kt.data:void 0),{flushSync:st});let Ft=new AbortController,dr=Nf(r.history,Ae,Ft.signal);if(At){let Fr=await je(Xe,Ae,dr.signal,be);if(Fr.type==="aborted")return;if(Fr.type==="error"){Wt(be,ye,Fr.error,{flushSync:st});return}else if(Fr.matches)Xe=Fr.matches,Ge=l0(Xe,Ae);else{Wt(be,ye,No(404,{pathname:Ae}),{flushSync:st});return}}le.set(be,Ft);let xt=he,fr=rp(i,s,dr,Xe,Ge,n,yt),Pr=(await yr(dr,fr,yt,be))[Ge.route.id];if(le.get(be)===Ft&&le.delete(be),!dr.signal.aborted){if(me.has(be)){ur(be,dd(void 0));return}if(Ch(Pr))if(ae>xt){ur(be,dd(void 0));return}else{ue.add(be),await ot(dr,Pr,!1,{preventScrollReset:gt});return}if(ao(Pr)){Wt(be,ye,Pr.error);return}ur(be,dd(Pr.data))}}async function ot(be,ye,Ae,{submission:Ge,fetcherSubmission:Xe,preventScrollReset:yt,replace:At}={}){ye.response.headers.has("X-Remix-Revalidate")&&(Q=!0);let st=ye.response.headers.get("Location");en(st,"Expected a Location header on the redirect Response"),st=ZP(st,new URL(be.url),l);let gt=V0(L.location,st,{_isRedirect:!0});if(t){let fr=!1;if(ye.response.headers.has("X-Remix-Reload-Document"))fr=!0;else if(YE.test(st)){const Jr=qF(st,!0);fr=Jr.origin!==e.location.origin||Ko(Jr.pathname,l)==null}if(fr){At?e.location.replace(st):e.location.assign(st);return}}B=null;let jt=At===!0||ye.response.headers.has("X-Remix-Replace")?"REPLACE":"PUSH",{formMethod:Kt,formAction:Ft,formEncType:dr}=L.navigation;!Ge&&!Xe&&Kt&&Ft&&dr&&(Ge=aR(L.navigation));let xt=Ge||Xe;if(hq.has(ye.response.status)&&xt&&oo(xt.formMethod))await Ue(jt,gt,{submission:{...xt,formAction:st},preventScrollReset:yt||U,enableViewTransition:Ae?k:void 0});else{let fr=XT(gt,Ge);await Ue(jt,gt,{overrideNavigation:fr,fetcherSubmission:Xe,preventScrollReset:yt||U,enableViewTransition:Ae?k:void 0})}}async function yr(be,ye,Ae,Ge){let Xe,yt={};try{Xe=await bq(u,be,ye,Ge,Ae,!1)}catch(At){return ye.filter(st=>st.shouldLoad).forEach(st=>{yt[st.route.id]={type:"error",error:At}}),yt}if(be.signal.aborted)return yt;for(let[At,st]of Object.entries(Xe))if(kq(st)){let gt=st.result;yt[At]={type:"redirect",response:Cq(gt,be,At,ye,l)}}else yt[At]=await Tq(st);return yt}async function pr(be,ye,Ae,Ge){let Xe=yr(Ae,be,Ge,null),yt=Promise.all(ye.map(async gt=>{if(gt.matches&&gt.match&&gt.request&&gt.controller){let Kt=(await yr(gt.request,gt.matches,Ge,gt.key))[gt.match.route.id];return{[gt.key]:Kt}}else return Promise.resolve({[gt.key]:{type:"error",error:No(404,{pathname:gt.path})}})})),At=await Xe,st=(await yt).reduce((gt,jt)=>Object.assign(gt,jt),{});return{loaderResults:At,fetcherResults:st}}function jr(){Q=!0,ee.forEach((be,ye)=>{le.has(ye)&&ie.add(ye),Tt(ye)})}function ur(be,ye,Ae={}){L.fetchers.set(be,ye),Ze({fetchers:new Map(L.fetchers)},{flushSync:(Ae&&Ae.flushSync)===!0})}function Wt(be,ye,Ae,Ge={}){let Xe=_h(L.matches,ye);Tr(be),Ze({errors:{[Xe.route.id]:Ae},fetchers:new Map(L.fetchers)},{flushSync:(Ge&&Ge.flushSync)===!0})}function mr(be){return pe.set(be,(pe.get(be)||0)+1),me.has(be)&&me.delete(be),L.fetchers.get(be)||fq}function Tr(be){let ye=L.fetchers.get(be);le.has(be)&&!(ye&&ye.state==="loading"&&ne.has(be))&&Tt(be),ee.delete(be),ne.delete(be),ue.delete(be),me.delete(be),ie.delete(be),L.fetchers.delete(be)}function Nr(be){let ye=(pe.get(be)||0)-1;ye<=0?(pe.delete(be),me.add(be)):pe.set(be,ye),Ze({fetchers:new Map(L.fetchers)})}function Tt(be){let ye=le.get(be);ye&&(ye.abort(),le.delete(be))}function Ht(be){for(let ye of be){let Ae=mr(ye),Ge=dd(Ae.data);L.fetchers.set(ye,Ge)}}function An(){let be=[],ye=!1;for(let Ae of ue){let Ge=L.fetchers.get(Ae);en(Ge,`Expected fetcher: ${Ae}`),Ge.state==="loading"&&(ue.delete(Ae),be.push(Ae),ye=!0)}return Ht(be),ye}function Vt(be){let ye=[];for(let[Ae,Ge]of ne)if(Ge<be){let Xe=L.fetchers.get(Ae);en(Xe,`Expected fetcher: ${Ae}`),Xe.state==="loading"&&(Tt(Ae),ne.delete(Ae),ye.push(Ae))}return Ht(ye),ye.length>0}function Cr(be,ye){let Ae=L.blockers.get(be)||jm;return xe.get(be)!==ye&&xe.set(be,ye),Ae}function Ur(be){L.blockers.delete(be),xe.delete(be)}function qr(be,ye){let Ae=L.blockers.get(be)||jm;en(Ae.state==="unblocked"&&ye.state==="blocked"||Ae.state==="blocked"&&ye.state==="blocked"||Ae.state==="blocked"&&ye.state==="proceeding"||Ae.state==="blocked"&&ye.state==="unblocked"||Ae.state==="proceeding"&&ye.state==="unblocked",`Invalid blocker state transition: ${Ae.state} -> ${ye.state}`);let Ge=new Map(L.blockers);Ge.set(be,ye),Ze({blockers:Ge})}function En({currentLocation:be,nextLocation:ye,historyAction:Ae}){if(xe.size===0)return;xe.size>1&&_i(!1,"A router only supports one blocker at a time");let Ge=Array.from(xe.entries()),[Xe,yt]=Ge[Ge.length-1],At=L.blockers.get(Xe);if(!(At&&At.state==="proceeding")&&yt({currentLocation:be,nextLocation:ye,historyAction:Ae}))return Xe}function Dn(be){let ye=No(404,{pathname:be}),Ae=o||a,{matches:Ge,route:Xe}=iR(Ae);return{notFoundMatches:Ge,route:Xe,error:ye}}function In(be,ye,Ae){if(g=be,v=ye,y=Ae||null,!x&&L.navigation===KT){x=!0;let Ge=fe(L.location,L.matches);Ge!=null&&Ze({restoreScrollPosition:Ge})}return()=>{g=null,v=null,y=null}}function Mr(be,ye){return y&&y(be,ye.map(Ge=>GF(Ge,L.loaderData)))||be.key}function se(be,ye){if(g&&v){let Ae=Mr(be,ye);g[Ae]=v()}}function fe(be,ye){if(g){let Ae=Mr(be,ye),Ge=g[Ae];if(typeof Ge=="number")return Ge}return null}function Te(be,ye,Ae){if(r.patchRoutesOnNavigation)if(be){if(Object.keys(be[0].params).length>0)return{active:!0,matches:c_(ye,Ae,l,!0)}}else return{active:!0,matches:c_(ye,Ae,l,!0)||[]};return{active:!1,matches:null}}async function je(be,ye,Ae,Ge){if(!r.patchRoutesOnNavigation)return{type:"success",matches:be};let Xe=be;for(;;){let yt=o==null,At=o||a,st=s;try{await r.patchRoutesOnNavigation({signal:Ae,path:ye,matches:Xe,fetcherKey:Ge,patch:(Kt,Ft)=>{Ae.aborted||XP(Kt,Ft,At,st,i)}})}catch(Kt){return{type:"error",error:Kt,partialMatches:Xe}}finally{yt&&!Ae.aborted&&(a=[...a])}if(Ae.aborted)return{type:"aborted"};let gt=yd(At,ye,l);if(gt)return{type:"success",matches:gt};let jt=c_(At,ye,l,!0);if(!jt||Xe.length===jt.length&&Xe.every((Kt,Ft)=>Kt.route.id===jt[Ft].route.id))return{type:"success",matches:null};Xe=jt}}function pt(be){s={},o=U_(be,i,void 0,s)}function Gt(be,ye){let Ae=o==null;XP(be,ye,o||a,s,i),Ae&&(a=[...a],Ze({}))}return A={get basename(){return l},get future(){return c},get state(){return L},get routes(){return a},get window(){return e},initialize:dt,subscribe:_t,enableScrollRestoration:In,navigate:Nt,fetch:ht,revalidate:qe,createHref:be=>r.history.createHref(be),encodeLocation:be=>r.history.encodeLocation(be),getFetcher:mr,deleteFetcher:Nr,dispose:Ke,getBlocker:Cr,deleteBlocker:Ur,patchRoutes:Gt,_internalFetchControllers:le,_internalSetRoutes:pt},A}function gq(r){return r!=null&&("formData"in r&&r.formData!=null||"body"in r&&r.body!==void 0)}function KC(r,e,t,n,i,s){let a,o;if(i){a=[];for(let u of e)if(a.push(u),u.route.id===i){o=u;break}}else a=e,o=e[e.length-1];let l=XE(n||".",KE(a),Ko(r.pathname,t)||r.pathname,s==="path");if(n==null&&(l.search=r.search,l.hash=r.hash),(n==null||n===""||n===".")&&o){let u=QE(l.search);if(o.route.index&&!u)l.search=l.search?l.search.replace(/^\?/,"?index&"):"?index";else if(!o.route.index&&u){let c=new URLSearchParams(l.search),h=c.getAll("index");c.delete("index"),h.filter(g=>g).forEach(g=>c.append("index",g));let m=c.toString();l.search=m?`?${m}`:""}}return t!=="/"&&(l.pathname=l.pathname==="/"?t:yu([t,l.pathname])),wd(l)}function GP(r,e,t){if(!t||!gq(t))return{path:e};if(t.formMethod&&!Aq(t.formMethod))return{path:e,error:No(405,{method:t.formMethod})};let n=()=>({path:e,error:No(400,{type:"invalid-body"})}),s=(t.formMethod||"get").toUpperCase(),a=sB(e);if(t.body!==void 0){if(t.formEncType==="text/plain"){if(!oo(s))return n();let h=typeof t.body=="string"?t.body:t.body instanceof FormData||t.body instanceof URLSearchParams?Array.from(t.body.entries()).reduce((m,[g,y])=>`${m}${g}=${y}
`,""):String(t.body);return{path:e,submission:{formMethod:s,formAction:a,formEncType:t.formEncType,formData:void 0,json:void 0,text:h}}}else if(t.formEncType==="application/json"){if(!oo(s))return n();try{let h=typeof t.body=="string"?JSON.parse(t.body):t.body;return{path:e,submission:{formMethod:s,formAction:a,formEncType:t.formEncType,formData:void 0,json:h,text:void 0}}}catch{return n()}}}en(typeof FormData=="function","FormData is not available in this environment");let o,l;if(t.formData)o=QC(t.formData),l=t.formData;else if(t.body instanceof FormData)o=QC(t.body),l=t.body;else if(t.body instanceof URLSearchParams)o=t.body,l=eR(o);else if(t.body==null)o=new URLSearchParams,l=new FormData;else try{o=new URLSearchParams(t.body),l=eR(o)}catch{return n()}let u={formMethod:s,formAction:a,formEncType:t&&t.formEncType||"application/x-www-form-urlencoded",formData:l,json:void 0,text:void 0};if(oo(u.formMethod))return{path:e,submission:u};let c=wc(e);return r&&c.search&&QE(c.search)&&o.append("index",""),c.search=`?${o}`,{path:wd(c),submission:u}}function KP(r,e,t,n,i,s,a,o,l,u,c,h,m,g,y,v,x,w,E){let D=E?ao(E[1])?E[1].error:E[1].data:void 0,I=i.createURL(s.location),A=i.createURL(l),L;if(c&&s.errors){let q=Object.keys(s.errors)[0];L=a.findIndex(V=>V.route.id===q)}else if(E&&ao(E[1])){let q=E[0];L=a.findIndex(V=>V.route.id===q)-1}let N=E?E[1].statusCode:void 0,U=N&&N>=400,B={currentUrl:I,currentParams:s.matches[0]?.params||{},nextUrl:A,nextParams:a[0].params,...o,actionResult:D,actionStatus:N},k=a.map((q,V)=>{let{route:Q}=q,ie=null;if(L!=null&&V>L?ie=!1:Q.lazy?ie=!0:Q.loader==null?ie=!1:c?ie=XC(Q,s.loaderData,s.errors):vq(s.loaderData,s.matches[V],q)&&(ie=!0),ie!==null)return YC(t,n,r,q,u,e,ie);let le=U?!1:h||I.pathname+I.search===A.pathname+A.search||I.search!==A.search||yq(s.matches[V],q),he={...B,defaultShouldRevalidate:le},ae=z_(q,he);return YC(t,n,r,q,u,e,ae,he)}),H=[];return y.forEach((q,V)=>{if(c||!a.some(ue=>ue.route.id===q.routeId)||g.has(V))return;let Q=yd(x,q.path,w);if(!Q){H.push({key:V,routeId:q.routeId,path:q.path,matches:null,match:null,request:null,controller:null});return}if(v.has(V))return;let ie=s.fetchers.get(V),le=l0(Q,q.path),he=new AbortController,ae=Nf(i,q.path,he.signal),ne=null;if(m.has(V))m.delete(V),ne=rp(t,n,ae,Q,le,u,e);else if(ie&&ie.state!=="idle"&&ie.data===void 0)h&&(ne=rp(t,n,ae,Q,le,u,e));else{let ue={...B,defaultShouldRevalidate:U?!1:h};z_(le,ue)&&(ne=rp(t,n,ae,Q,le,u,e,ue))}ne&&H.push({key:V,routeId:q.routeId,path:q.path,matches:ne,match:le,request:ae,controller:he})}),{dsMatches:k,revalidatingFetchers:H}}function XC(r,e,t){if(r.lazy)return!0;if(!r.loader)return!1;let n=e!=null&&r.id in e,i=t!=null&&t[r.id]!==void 0;return!n&&i?!1:typeof r.loader=="function"&&r.loader.hydrate===!0?!0:!n&&!i}function vq(r,e,t){let n=!e||t.route.id!==e.route.id,i=!r.hasOwnProperty(t.route.id);return n||i}function yq(r,e){let t=r.route.path;return r.pathname!==e.pathname||t!=null&&t.endsWith("*")&&r.params["*"]!==e.params["*"]}function z_(r,e){if(r.route.shouldRevalidate){let t=r.route.shouldRevalidate(e);if(typeof t=="boolean")return t}return e.defaultShouldRevalidate}function XP(r,e,t,n,i){let s;if(r){let l=n[r];en(l,`No route found to patch children into: routeId = ${r}`),l.children||(l.children=[]),s=l.children}else s=t;let a=e.filter(l=>!s.some(u=>eB(l,u))),o=U_(a,i,[r||"_","patch",String(s?.length||"0")],n);s.push(...o)}function eB(r,e){return"id"in r&&"id"in e&&r.id===e.id?!0:r.index===e.index&&r.path===e.path&&r.caseSensitive===e.caseSensitive?(!r.children||r.children.length===0)&&(!e.children||e.children.length===0)?!0:r.children.every((t,n)=>e.children?.some(i=>eB(t,i))):!1}var YP=new WeakMap,tB=({key:r,route:e,manifest:t,mapRouteProperties:n})=>{let i=t[e.id];if(en(i,"No route found in manifest"),!i.lazy||typeof i.lazy!="object")return;let s=i.lazy[r];if(!s)return;let a=YP.get(i);a||(a={},YP.set(i,a));let o=a[r];if(o)return o;let l=(async()=>{let u=jW(r),h=i[r]!==void 0&&r!=="hasErrorBoundary";if(u)_i(!u,"Route property "+r+" is not a supported lazy route property. This property will be ignored."),a[r]=Promise.resolve();else if(h)_i(!1,`Route "${i.id}" has a static property "${r}" defined. The lazy property will be ignored.`);else{let m=await s();m!=null&&(Object.assign(i,{[r]:m}),Object.assign(i,n(i)))}typeof i.lazy=="object"&&(i.lazy[r]=void 0,Object.values(i.lazy).every(m=>m===void 0)&&(i.lazy=void 0))})();return a[r]=l,l},QP=new WeakMap;function _q(r,e,t,n,i){let s=t[r.id];if(en(s,"No route found in manifest"),!r.lazy)return{lazyRoutePromise:void 0,lazyHandlerPromise:void 0};if(typeof r.lazy=="function"){let c=QP.get(s);if(c)return{lazyRoutePromise:c,lazyHandlerPromise:c};let h=(async()=>{en(typeof r.lazy=="function","No lazy route function found");let m=await r.lazy(),g={};for(let y in m){let v=m[y];if(v===void 0)continue;let x=HW(y),E=s[y]!==void 0&&y!=="hasErrorBoundary";x?_i(!x,"Route property "+y+" is not a supported property to be returned from a lazy route function. This property will be ignored."):E?_i(!E,`Route "${s.id}" has a static property "${y}" defined but its lazy function is also returning a value for this property. The lazy route property "${y}" will be ignored.`):g[y]=v}Object.assign(s,g),Object.assign(s,{...n(s),lazy:void 0})})();return QP.set(s,h),h.catch(()=>{}),{lazyRoutePromise:h,lazyHandlerPromise:h}}let a=Object.keys(r.lazy),o=[],l;for(let c of a){if(i&&i.includes(c))continue;let h=tB({key:c,route:r,manifest:t,mapRouteProperties:n});h&&(o.push(h),c===e&&(l=h))}let u=o.length>0?Promise.all(o).then(()=>{}):void 0;return u?.catch(()=>{}),l?.catch(()=>{}),{lazyRoutePromise:u,lazyHandlerPromise:l}}async function JP(r){let e=r.matches.filter(i=>i.shouldLoad),t={};return(await Promise.all(e.map(i=>i.resolve()))).forEach((i,s)=>{t[e[s].route.id]=i}),t}async function xq(r){return r.matches.some(e=>e.route.unstable_middleware)?rB(r,!1,()=>JP(r),(e,t)=>({[t]:{type:"error",result:e}})):JP(r)}async function rB(r,e,t,n){let{matches:i,request:s,params:a,context:o}=r,l={handlerResult:void 0};try{let u=i.flatMap(h=>h.route.unstable_middleware?h.route.unstable_middleware.map(m=>[h.route.id,m]):[]),c=await nB({request:s,params:a,context:o},u,e,l,t);return e?c:l.handlerResult}catch(u){if(!l.middlewareError)throw u;let c=await n(l.middlewareError.error,l.middlewareError.routeId);return l.handlerResult?Object.assign(l.handlerResult,c):c}}async function nB(r,e,t,n,i,s=0){let{request:a}=r;if(a.signal.aborted)throw a.signal.reason?a.signal.reason:new Error(`Request aborted without an \`AbortSignal.reason\`: ${a.method} ${a.url}`);let o=e[s];if(!o)return n.handlerResult=await i(),n.handlerResult;let[l,u]=o,c=!1,h,m=async()=>{if(c)throw new Error("You may only call `next()` once per middleware");c=!0,await nB(r,e,t,n,i,s+1)};try{let g=await u({request:r.request,params:r.params,context:r.context},m);return c?g===void 0?h:g:m()}catch(g){throw n.middlewareError?n.middlewareError.error!==g&&(n.middlewareError={routeId:l,error:g}):n.middlewareError={routeId:l,error:g},g}}function iB(r,e,t,n,i){let s=tB({key:"unstable_middleware",route:n.route,manifest:e,mapRouteProperties:r}),a=_q(n.route,oo(t.method)?"action":"loader",e,r,i);return{middleware:s,route:a.lazyRoutePromise,handler:a.lazyHandlerPromise}}function YC(r,e,t,n,i,s,a,o=null){let l=!1,u=iB(r,e,t,n,i);return{...n,_lazyPromises:u,shouldLoad:a,unstable_shouldRevalidateArgs:o,unstable_shouldCallHandler(c){return l=!0,o?typeof c=="boolean"?z_(n,{...o,defaultShouldRevalidate:c}):z_(n,o):a},resolve(c){return l||a||c&&t.method==="GET"&&(n.route.lazy||n.route.loader)?Sq({request:t,match:n,lazyHandlerPromise:u?.handler,lazyRoutePromise:u?.route,handlerOverride:c,scopedContext:s}):Promise.resolve({type:"data",result:void 0})}}}function rp(r,e,t,n,i,s,a,o=null){return n.map(l=>l.route.id!==i.route.id?{...l,shouldLoad:!1,unstable_shouldRevalidateArgs:o,unstable_shouldCallHandler:()=>!1,_lazyPromises:iB(r,e,t,l,s),resolve:()=>Promise.resolve({type:"data",result:void 0})}:YC(r,e,t,l,s,a,!0,o))}async function bq(r,e,t,n,i,s){t.some(u=>u._lazyPromises?.middleware)&&await Promise.all(t.map(u=>u._lazyPromises?.middleware));let a={request:e,params:t[0].params,context:i,matches:t},l=await r({...a,fetcherKey:n,unstable_runClientMiddleware:u=>{let c=a;return rB(c,!1,()=>u({...c,fetcherKey:n,unstable_runClientMiddleware:()=>{throw new Error("Cannot call `unstable_runClientMiddleware()` from within an `unstable_runClientMiddleware` handler")}}),(h,m)=>({[m]:{type:"error",result:h}}))}});try{await Promise.all(t.flatMap(u=>[u._lazyPromises?.handler,u._lazyPromises?.route]))}catch{}return l}async function Sq({request:r,match:e,lazyHandlerPromise:t,lazyRoutePromise:n,handlerOverride:i,scopedContext:s}){let a,o,l=oo(r.method),u=l?"action":"loader",c=h=>{let m,g=new Promise((x,w)=>m=w);o=()=>m(),r.signal.addEventListener("abort",o);let y=x=>typeof h!="function"?Promise.reject(new Error(`You cannot call the handler for a route which defines a boolean "${u}" [routeId: ${e.route.id}]`)):h({request:r,params:e.params,context:s},...x!==void 0?[x]:[]),v=(async()=>{try{return{type:"data",result:await(i?i(w=>y(w)):y())}}catch(x){return{type:"error",result:x}}})();return Promise.race([v,g])};try{let h=l?e.route.action:e.route.loader;if(t||n)if(h){let m,[g]=await Promise.all([c(h).catch(y=>{m=y}),t,n]);if(m!==void 0)throw m;a=g}else{await t;let m=l?e.route.action:e.route.loader;if(m)[a]=await Promise.all([c(m),n]);else if(u==="action"){let g=new URL(r.url),y=g.pathname+g.search;throw No(405,{method:r.method,pathname:y,routeId:e.route.id})}else return{type:"data",result:void 0}}else if(h)a=await c(h);else{let m=new URL(r.url),g=m.pathname+m.search;throw No(404,{pathname:g})}}catch(h){return{type:"error",result:h}}finally{o&&r.signal.removeEventListener("abort",o)}return a}async function Tq(r){let{result:e,type:t}=r;if(aB(e)){let n;try{let i=e.headers.get("Content-Type");i&&/\bapplication\/json\b/.test(i)?e.body==null?n=null:n=await e.json():n=await e.text()}catch(i){return{type:"error",error:i}}return t==="error"?{type:"error",error:new j_(e.status,e.statusText,n),statusCode:e.status,headers:e.headers}:{type:"data",data:n,statusCode:e.status,headers:e.headers}}return t==="error"?sR(e)?e.data instanceof Error?{type:"error",error:e.data,statusCode:e.init?.status,headers:e.init?.headers?new Headers(e.init.headers):void 0}:{type:"error",error:new j_(e.init?.status||500,void 0,e.data),statusCode:W0(e)?e.status:void 0,headers:e.init?.headers?new Headers(e.init.headers):void 0}:{type:"error",error:e,statusCode:W0(e)?e.status:void 0}:sR(e)?{type:"data",data:e.data,statusCode:e.init?.status,headers:e.init?.headers?new Headers(e.init.headers):void 0}:{type:"data",data:e}}function Cq(r,e,t,n,i){let s=r.headers.get("Location");if(en(s,"Redirects returned/thrown from loaders/actions must have a Location header"),!YE.test(s)){let a=n.slice(0,n.findIndex(o=>o.route.id===t)+1);s=KC(new URL(e.url),a,i,s),r.headers.set("Location",s)}return r}function ZP(r,e,t){if(YE.test(r)){let n=r,i=n.startsWith("//")?new URL(e.protocol+n):new URL(n),s=Ko(i.pathname,t)!=null;if(i.origin===e.origin&&s)return i.pathname+i.search+i.hash}return r}function Nf(r,e,t,n){let i=r.createURL(sB(e)).toString(),s={signal:t};if(n&&oo(n.formMethod)){let{formMethod:a,formEncType:o}=n;s.method=a.toUpperCase(),o==="application/json"?(s.headers=new Headers({"Content-Type":o}),s.body=JSON.stringify(n.json)):o==="text/plain"?s.body=n.text:o==="application/x-www-form-urlencoded"&&n.formData?s.body=QC(n.formData):s.body=n.formData}return new Request(i,s)}function QC(r){let e=new URLSearchParams;for(let[t,n]of r.entries())e.append(t,typeof n=="string"?n:n.name);return e}function eR(r){let e=new FormData;for(let[t,n]of r.entries())e.append(t,n);return e}function wq(r,e,t,n=!1,i=!1){let s={},a=null,o,l=!1,u={},c=t&&ao(t[1])?t[1].error:void 0;return r.forEach(h=>{if(!(h.route.id in e))return;let m=h.route.id,g=e[m];if(en(!Ch(g),"Cannot handle redirect results in processLoaderData"),ao(g)){let y=g.error;if(c!==void 0&&(y=c,c=void 0),a=a||{},i)a[m]=y;else{let v=_h(r,m);a[v.route.id]==null&&(a[v.route.id]=y)}n||(s[m]=ZF),l||(l=!0,o=W0(g.error)?g.error.status:500),g.headers&&(u[m]=g.headers)}else s[m]=g.data,g.statusCode&&g.statusCode!==200&&!l&&(o=g.statusCode),g.headers&&(u[m]=g.headers)}),c!==void 0&&t&&(a={[t[0]]:c},t[2]&&(s[t[2]]=void 0)),{loaderData:s,errors:a,statusCode:o||200,loaderHeaders:u}}function tR(r,e,t,n,i,s){let{loaderData:a,errors:o}=wq(e,t,n);return i.filter(l=>!l.matches||l.matches.some(u=>u.shouldLoad)).forEach(l=>{let{key:u,match:c,controller:h}=l,m=s[u];if(en(m,"Did not find corresponding fetcher result"),!(h&&h.signal.aborted))if(ao(m)){let g=_h(r.matches,c?.route.id);o&&o[g.route.id]||(o={...o,[g.route.id]:m.error}),r.fetchers.delete(u)}else if(Ch(m))en(!1,"Unhandled fetcher revalidation redirect");else{let g=dd(m.data);r.fetchers.set(u,g)}}),{loaderData:a,errors:o}}function rR(r,e,t,n){let i=Object.entries(e).filter(([,s])=>s!==ZF).reduce((s,[a,o])=>(s[a]=o,s),{});for(let s of t){let a=s.route.id;if(!e.hasOwnProperty(a)&&r.hasOwnProperty(a)&&s.route.loader&&(i[a]=r[a]),n&&n.hasOwnProperty(a))break}return i}function nR(r){return r?ao(r[1])?{actionData:{}}:{actionData:{[r[0]]:r[1].data}}:{}}function _h(r,e){return(e?r.slice(0,r.findIndex(n=>n.route.id===e)+1):[...r]).reverse().find(n=>n.route.hasErrorBoundary===!0)||r[0]}function iR(r){let e=r.length===1?r[0]:r.find(t=>t.index||!t.path||t.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:e}],route:e}}function No(r,{pathname:e,routeId:t,method:n,type:i,message:s}={}){let a="Unknown Server Error",o="Unknown @remix-run/router error";return r===400?(a="Bad Request",n&&e&&t?o=`You made a ${n} request to "${e}" but did not provide a \`loader\` for route "${t}", so there is no way to handle the request.`:i==="invalid-body"&&(o="Unable to encode submission body")):r===403?(a="Forbidden",o=`Route "${t}" does not match URL "${e}"`):r===404?(a="Not Found",o=`No route matches URL "${e}"`):r===405&&(a="Method Not Allowed",n&&e&&t?o=`You made a ${n.toUpperCase()} request to "${e}" but did not provide an \`action\` for route "${t}", so there is no way to handle the request.`:n&&(o=`Invalid request method "${n.toUpperCase()}"`)),new j_(r||500,a,new Error(o),!0)}function Uv(r){let e=Object.entries(r);for(let t=e.length-1;t>=0;t--){let[n,i]=e[t];if(Ch(i))return{key:n,result:i}}}function sB(r){let e=typeof r=="string"?wc(r):r;return wd({...e,hash:""})}function Eq(r,e){return r.pathname!==e.pathname||r.search!==e.search?!1:r.hash===""?e.hash!=="":r.hash===e.hash?!0:e.hash!==""}function kq(r){return aB(r.result)&&dq.has(r.result.status)}function ao(r){return r.type==="error"}function Ch(r){return(r&&r.type)==="redirect"}function sR(r){return typeof r=="object"&&r!=null&&"type"in r&&"data"in r&&"init"in r&&r.type==="DataWithResponseInit"}function aB(r){return r!=null&&typeof r.status=="number"&&typeof r.statusText=="string"&&typeof r.headers=="object"&&typeof r.body<"u"}function Aq(r){return cq.has(r.toUpperCase())}function oo(r){return lq.has(r.toUpperCase())}function QE(r){return new URLSearchParams(r).getAll("index").some(e=>e==="")}function l0(r,e){let t=typeof e=="string"?wc(e).search:e.search;if(r[r.length-1].route.index&&QE(t||""))return r[r.length-1];let n=YF(r);return n[n.length-1]}function aR(r){let{formMethod:e,formAction:t,formEncType:n,text:i,formData:s,json:a}=r;if(!(!e||!t||!n)){if(i!=null)return{formMethod:e,formAction:t,formEncType:n,formData:void 0,json:void 0,text:i};if(s!=null)return{formMethod:e,formAction:t,formEncType:n,formData:s,json:void 0,text:void 0};if(a!==void 0)return{formMethod:e,formAction:t,formEncType:n,formData:void 0,json:a,text:void 0}}}function XT(r,e){return e?{state:"loading",location:r,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}:{state:"loading",location:r,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function Dq(r,e){return{state:"submitting",location:r,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}}function zm(r,e){return r?{state:"loading",formMethod:r.formMethod,formAction:r.formAction,formEncType:r.formEncType,formData:r.formData,json:r.json,text:r.text,data:e}:{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:e}}function Iq(r,e){return{state:"submitting",formMethod:r.formMethod,formAction:r.formAction,formEncType:r.formEncType,formData:r.formData,json:r.json,text:r.text,data:e?e.data:void 0}}function dd(r){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:r}}function Pq(r,e){try{let t=r.sessionStorage.getItem(JF);if(t){let n=JSON.parse(t);for(let[i,s]of Object.entries(n||{}))s&&Array.isArray(s)&&e.set(i,new Set(s||[]))}}catch{}}function Rq(r,e){if(e.size>0){let t={};for(let[n,i]of e)t[n]=[...i];try{r.sessionStorage.setItem(JF,JSON.stringify(t))}catch(n){_i(!1,`Failed to save applied view transitions in sessionStorage (${n}).`)}}}function Lq(){let r,e,t=new Promise((n,i)=>{r=async s=>{n(s);try{await t}catch{}},e=async s=>{i(s);try{await t}catch{}}});return{promise:t,resolve:r,reject:e}}var Yh=M.createContext(null);Yh.displayName="DataRouter";var vg=M.createContext(null);vg.displayName="DataRouterState";var JE=M.createContext({isTransitioning:!1});JE.displayName="ViewTransition";var oB=M.createContext(new Map);oB.displayName="Fetchers";var Oq=M.createContext(null);Oq.displayName="Await";var Lu=M.createContext(null);Lu.displayName="Navigation";var cb=M.createContext(null);cb.displayName="Location";var Ou=M.createContext({outlet:null,matches:[],isDataRoute:!1});Ou.displayName="Route";var ZE=M.createContext(null);ZE.displayName="RouteError";function Mq(r,{relative:e}={}){en(yg(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:n}=M.useContext(Lu),{hash:i,pathname:s,search:a}=_g(r,{relative:e}),o=s;return t!=="/"&&(o=s==="/"?t:yu([t,s])),n.createHref({pathname:o,search:a,hash:i})}function yg(){return M.useContext(cb)!=null}function Mu(){return en(yg(),"useLocation() may be used only in the context of a <Router> component."),M.useContext(cb).location}var lB="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function uB(r){M.useContext(Lu).static||M.useLayoutEffect(r)}function db(){let{isDataRoute:r}=M.useContext(Ou);return r?Yq():Fq()}function Fq(){en(yg(),"useNavigate() may be used only in the context of a <Router> component.");let r=M.useContext(Yh),{basename:e,navigator:t}=M.useContext(Lu),{matches:n}=M.useContext(Ou),{pathname:i}=Mu(),s=JSON.stringify(KE(n)),a=M.useRef(!1);return uB(()=>{a.current=!0}),M.useCallback((l,u={})=>{if(_i(a.current,lB),!a.current)return;if(typeof l=="number"){t.go(l);return}let c=XE(l,JSON.parse(s),i,u.relative==="path");r==null&&e!=="/"&&(c.pathname=c.pathname==="/"?e:yu([e,c.pathname])),(u.replace?t.replace:t.push)(c,u.state,u)},[e,t,s,i,r])}var Bq=M.createContext(null);function Nq(r){let e=M.useContext(Ou).outlet;return e&&M.createElement(Bq.Provider,{value:r},e)}function _g(r,{relative:e}={}){let{matches:t}=M.useContext(Ou),{pathname:n}=Mu(),i=JSON.stringify(KE(t));return M.useMemo(()=>XE(r,JSON.parse(i),n,e==="path"),[r,i,n,e])}function Uq(r,e,t,n){en(yg(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:i,static:s}=M.useContext(Lu),{matches:a}=M.useContext(Ou),o=a[a.length-1],l=o?o.params:{},u=o?o.pathname:"/",c=o?o.pathnameBase:"/",h=o&&o.route;{let E=h&&h.path||"";dB(u,!h||E.endsWith("*")||E.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${u}" (under <Route path="${E}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${E}"> to <Route path="${E==="/"?"*":`${E}/*`}">.`)}let m=Mu(),g;g=m;let y=g.pathname||"/",v=y;if(c!=="/"){let E=c.replace(/^\//,"").split("/");v="/"+y.replace(/^\//,"").split("/").slice(E.length).join("/")}let x=!s&&t&&t.matches&&t.matches.length>0?t.matches:yd(r,{pathname:v});return _i(h||x!=null,`No routes matched location "${g.pathname}${g.search}${g.hash}" `),_i(x==null||x[x.length-1].route.element!==void 0||x[x.length-1].route.Component!==void 0||x[x.length-1].route.lazy!==void 0,`Matched leaf route at location "${g.pathname}${g.search}${g.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`),Vq(x&&x.map(E=>Object.assign({},E,{params:Object.assign({},l,E.params),pathname:yu([c,i.encodeLocation?i.encodeLocation(E.pathname).pathname:E.pathname]),pathnameBase:E.pathnameBase==="/"?c:yu([c,i.encodeLocation?i.encodeLocation(E.pathnameBase).pathname:E.pathnameBase])})),a,t,n)}function $q(){let r=Xq(),e=W0(r)?`${r.status} ${r.statusText}`:r instanceof Error?r.message:JSON.stringify(r),t=r instanceof Error?r.stack:null,n="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:n},s={padding:"2px 4px",backgroundColor:n},a=null;return console.error("Error handled by React Router default ErrorBoundary:",r),a=M.createElement(M.Fragment,null,M.createElement("p",null," Hey developer "),M.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",M.createElement("code",{style:s},"ErrorBoundary")," or"," ",M.createElement("code",{style:s},"errorElement")," prop on your route.")),M.createElement(M.Fragment,null,M.createElement("h2",null,"Unexpected Application Error!"),M.createElement("h3",{style:{fontStyle:"italic"}},e),t?M.createElement("pre",{style:i},t):null,a)}var jq=M.createElement($q,null),zq=class extends M.Component{constructor(r){super(r),this.state={location:r.location,revalidation:r.revalidation,error:r.error}}static getDerivedStateFromError(r){return{error:r}}static getDerivedStateFromProps(r,e){return e.location!==r.location||e.revalidation!=="idle"&&r.revalidation==="idle"?{error:r.error,location:r.location,revalidation:r.revalidation}:{error:r.error!==void 0?r.error:e.error,location:e.location,revalidation:r.revalidation||e.revalidation}}componentDidCatch(r,e){console.error("React Router caught the following error during render",r,e)}render(){return this.state.error!==void 0?M.createElement(Ou.Provider,{value:this.props.routeContext},M.createElement(ZE.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function Hq({routeContext:r,match:e,children:t}){let n=M.useContext(Yh);return n&&n.static&&n.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=e.route.id),M.createElement(Ou.Provider,{value:r},t)}function Vq(r,e=[],t=null,n=null){if(r==null){if(!t)return null;if(t.errors)r=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)r=t.matches;else return null}let i=r,s=t?.errors;if(s!=null){let l=i.findIndex(u=>u.route.id&&s?.[u.route.id]!==void 0);en(l>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(s).join(",")}`),i=i.slice(0,Math.min(i.length,l+1))}let a=!1,o=-1;if(t)for(let l=0;l<i.length;l++){let u=i[l];if((u.route.HydrateFallback||u.route.hydrateFallbackElement)&&(o=l),u.route.id){let{loaderData:c,errors:h}=t,m=u.route.loader&&!c.hasOwnProperty(u.route.id)&&(!h||h[u.route.id]===void 0);if(u.route.lazy||m){a=!0,o>=0?i=i.slice(0,o+1):i=[i[0]];break}}}return i.reduceRight((l,u,c)=>{let h,m=!1,g=null,y=null;t&&(h=s&&u.route.id?s[u.route.id]:void 0,g=u.route.errorElement||jq,a&&(o<0&&c===0?(dB("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),m=!0,y=null):o===c&&(m=!0,y=u.route.hydrateFallbackElement||null)));let v=e.concat(i.slice(0,c+1)),x=()=>{let w;return h?w=g:m?w=y:u.route.Component?w=M.createElement(u.route.Component,null):u.route.element?w=u.route.element:w=l,M.createElement(Hq,{match:u,routeContext:{outlet:l,matches:v,isDataRoute:t!=null},children:w})};return t&&(u.route.ErrorBoundary||u.route.errorElement||c===0)?M.createElement(zq,{location:t.location,revalidation:t.revalidation,component:g,error:h,children:x(),routeContext:{outlet:null,matches:v,isDataRoute:!0}}):x()},null)}function e2(r){return`${r} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Wq(r){let e=M.useContext(Yh);return en(e,e2(r)),e}function cB(r){let e=M.useContext(vg);return en(e,e2(r)),e}function qq(r){let e=M.useContext(Ou);return en(e,e2(r)),e}function t2(r){let e=qq(r),t=e.matches[e.matches.length-1];return en(t.route.id,`${r} can only be used on routes that contain a unique "id"`),t.route.id}function Gq(){return t2("useRouteId")}function Kq(){let{matches:r,loaderData:e}=cB("useMatches");return M.useMemo(()=>r.map(t=>GF(t,e)),[r,e])}function Xq(){let r=M.useContext(ZE),e=cB("useRouteError"),t=t2("useRouteError");return r!==void 0?r:e.errors?.[t]}function Yq(){let{router:r}=Wq("useNavigate"),e=t2("useNavigate"),t=M.useRef(!1);return uB(()=>{t.current=!0}),M.useCallback(async(i,s={})=>{_i(t.current,lB),t.current&&(typeof i=="number"?r.navigate(i):await r.navigate(i,{fromRouteId:e,...s}))},[r,e])}var oR={};function dB(r,e,t){!e&&!oR[r]&&(oR[r]=!0,_i(!1,t))}var lR={};function uR(r,e){!r&&!lR[e]&&(lR[e]=!0,console.warn(e))}function Qq(r){let e={hasErrorBoundary:r.hasErrorBoundary||r.ErrorBoundary!=null||r.errorElement!=null};return r.Component&&(r.element&&_i(!1,"You should not include both `Component` and `element` on your route - `Component` will be used."),Object.assign(e,{element:M.createElement(r.Component),Component:void 0})),r.HydrateFallback&&(r.hydrateFallbackElement&&_i(!1,"You should not include both `HydrateFallback` and `hydrateFallbackElement` on your route - `HydrateFallback` will be used."),Object.assign(e,{hydrateFallbackElement:M.createElement(r.HydrateFallback),HydrateFallback:void 0})),r.ErrorBoundary&&(r.errorElement&&_i(!1,"You should not include both `ErrorBoundary` and `errorElement` on your route - `ErrorBoundary` will be used."),Object.assign(e,{errorElement:M.createElement(r.ErrorBoundary),ErrorBoundary:void 0})),e}var Jq=["HydrateFallback","hydrateFallbackElement"],Zq=class{constructor(){this.status="pending",this.promise=new Promise((r,e)=>{this.resolve=t=>{this.status==="pending"&&(this.status="resolved",r(t))},this.reject=t=>{this.status==="pending"&&(this.status="rejected",e(t))}})}};function eG({router:r,flushSync:e}){let[t,n]=M.useState(r.state),[i,s]=M.useState(),[a,o]=M.useState({isTransitioning:!1}),[l,u]=M.useState(),[c,h]=M.useState(),[m,g]=M.useState(),y=M.useRef(new Map),v=M.useCallback((D,{deletedFetchers:I,flushSync:A,viewTransitionOpts:L})=>{D.fetchers.forEach((U,B)=>{U.data!==void 0&&y.current.set(B,U.data)}),I.forEach(U=>y.current.delete(U)),uR(A===!1||e!=null,'You provided the `flushSync` option to a router update, but you are not using the `<RouterProvider>` from `react-router/dom` so `ReactDOM.flushSync()` is unavailable.  Please update your app to `import { RouterProvider } from "react-router/dom"` and ensure you have `react-dom` installed as a dependency to use the `flushSync` option.');let N=r.window!=null&&r.window.document!=null&&typeof r.window.document.startViewTransition=="function";if(uR(L==null||N,"You provided the `viewTransition` option to a router update, but you do not appear to be running in a DOM environment as `window.startViewTransition` is not available."),!L||!N){e&&A?e(()=>n(D)):M.startTransition(()=>n(D));return}if(e&&A){e(()=>{c&&(l&&l.resolve(),c.skipTransition()),o({isTransitioning:!0,flushSync:!0,currentLocation:L.currentLocation,nextLocation:L.nextLocation})});let U=r.window.document.startViewTransition(()=>{e(()=>n(D))});U.finished.finally(()=>{e(()=>{u(void 0),h(void 0),s(void 0),o({isTransitioning:!1})})}),e(()=>h(U));return}c?(l&&l.resolve(),c.skipTransition(),g({state:D,currentLocation:L.currentLocation,nextLocation:L.nextLocation})):(s(D),o({isTransitioning:!0,flushSync:!1,currentLocation:L.currentLocation,nextLocation:L.nextLocation}))},[r.window,e,c,l]);M.useLayoutEffect(()=>r.subscribe(v),[r,v]),M.useEffect(()=>{a.isTransitioning&&!a.flushSync&&u(new Zq)},[a]),M.useEffect(()=>{if(l&&i&&r.window){let D=i,I=l.promise,A=r.window.document.startViewTransition(async()=>{M.startTransition(()=>n(D)),await I});A.finished.finally(()=>{u(void 0),h(void 0),s(void 0),o({isTransitioning:!1})}),h(A)}},[i,l,r.window]),M.useEffect(()=>{l&&i&&t.location.key===i.location.key&&l.resolve()},[l,c,t.location,i]),M.useEffect(()=>{!a.isTransitioning&&m&&(s(m.state),o({isTransitioning:!0,flushSync:!1,currentLocation:m.currentLocation,nextLocation:m.nextLocation}),g(void 0))},[a.isTransitioning,m]);let x=M.useMemo(()=>({createHref:r.createHref,encodeLocation:r.encodeLocation,go:D=>r.navigate(D),push:(D,I,A)=>r.navigate(D,{state:I,preventScrollReset:A?.preventScrollReset}),replace:(D,I,A)=>r.navigate(D,{replace:!0,state:I,preventScrollReset:A?.preventScrollReset})}),[r]),w=r.basename||"/",E=M.useMemo(()=>({router:r,navigator:x,static:!1,basename:w}),[r,x,w]);return M.createElement(M.Fragment,null,M.createElement(Yh.Provider,{value:E},M.createElement(vg.Provider,{value:t},M.createElement(oB.Provider,{value:y.current},M.createElement(JE.Provider,{value:a},M.createElement(iG,{basename:w,location:t.location,navigationType:t.historyAction,navigator:x},M.createElement(tG,{routes:r.routes,future:r.future,state:t})))))),null)}var tG=M.memo(rG);function rG({routes:r,future:e,state:t}){return Uq(r,void 0,t,e)}function nG(r){return Nq(r.context)}function iG({basename:r="/",children:e=null,location:t,navigationType:n="POP",navigator:i,static:s=!1}){en(!yg(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let a=r.replace(/^\/*/,"/"),o=M.useMemo(()=>({basename:a,navigator:i,static:s,future:{}}),[a,i,s]);typeof t=="string"&&(t=wc(t));let{pathname:l="/",search:u="",hash:c="",state:h=null,key:m="default"}=t,g=M.useMemo(()=>{let y=Ko(l,a);return y==null?null:{location:{pathname:y,search:u,hash:c,state:h,key:m},navigationType:n}},[a,l,u,c,h,m,n]);return _i(g!=null,`<Router basename="${a}"> is not able to match the URL "${l}${u}${c}" because it does not start with the basename, so the <Router> won't render anything.`),g==null?null:M.createElement(Lu.Provider,{value:o},M.createElement(cb.Provider,{children:e,value:g}))}var d_="get",h_="application/x-www-form-urlencoded";function hb(r){return r!=null&&typeof r.tagName=="string"}function sG(r){return hb(r)&&r.tagName.toLowerCase()==="button"}function aG(r){return hb(r)&&r.tagName.toLowerCase()==="form"}function oG(r){return hb(r)&&r.tagName.toLowerCase()==="input"}function lG(r){return!!(r.metaKey||r.altKey||r.ctrlKey||r.shiftKey)}function uG(r,e){return r.button===0&&(!e||e==="_self")&&!lG(r)}var $v=null;function cG(){if($v===null)try{new FormData(document.createElement("form"),0),$v=!1}catch{$v=!0}return $v}var dG=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function YT(r){return r!=null&&!dG.has(r)?(_i(!1,`"${r}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${h_}"`),null):r}function hG(r,e){let t,n,i,s,a;if(aG(r)){let o=r.getAttribute("action");n=o?Ko(o,e):null,t=r.getAttribute("method")||d_,i=YT(r.getAttribute("enctype"))||h_,s=new FormData(r)}else if(sG(r)||oG(r)&&(r.type==="submit"||r.type==="image")){let o=r.form;if(o==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let l=r.getAttribute("formaction")||o.getAttribute("action");if(n=l?Ko(l,e):null,t=r.getAttribute("formmethod")||o.getAttribute("method")||d_,i=YT(r.getAttribute("formenctype"))||YT(o.getAttribute("enctype"))||h_,s=new FormData(o,r),!cG()){let{name:u,type:c,value:h}=r;if(c==="image"){let m=u?`${u}.`:"";s.append(`${m}x`,"0"),s.append(`${m}y`,"0")}else u&&s.append(u,h)}}else{if(hb(r))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=d_,n=null,i=h_,a=r}return s&&i==="text/plain"&&(a=s,s=void 0),{action:n,method:t.toLowerCase(),encType:i,formData:s,body:a}}function r2(r,e){if(r===!1||r===null||typeof r>"u")throw new Error(e)}async function fG(r,e){if(r.id in e)return e[r.id];try{let t=await import(r.module);return e[r.id]=t,t}catch(t){return console.error(`Error loading route module \`${r.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function pG(r){return r==null?!1:r.href==null?r.rel==="preload"&&typeof r.imageSrcSet=="string"&&typeof r.imageSizes=="string":typeof r.rel=="string"&&typeof r.href=="string"}async function mG(r,e,t){let n=await Promise.all(r.map(async i=>{let s=e.routes[i.route.id];if(s){let a=await fG(s,t);return a.links?a.links():[]}return[]}));return _G(n.flat(1).filter(pG).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function cR(r,e,t,n,i,s){let a=(l,u)=>t[u]?l.route.id!==t[u].route.id:!0,o=(l,u)=>t[u].pathname!==l.pathname||t[u].route.path?.endsWith("*")&&t[u].params["*"]!==l.params["*"];return s==="assets"?e.filter((l,u)=>a(l,u)||o(l,u)):s==="data"?e.filter((l,u)=>{let c=n.routes[l.route.id];if(!c||!c.hasLoader)return!1;if(a(l,u)||o(l,u))return!0;if(l.route.shouldRevalidate){let h=l.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:t[0]?.params||{},nextUrl:new URL(r,window.origin),nextParams:l.params,defaultShouldRevalidate:!0});if(typeof h=="boolean")return h}return!0}):[]}function gG(r,e,{includeHydrateFallback:t}={}){return vG(r.map(n=>{let i=e.routes[n.route.id];if(!i)return[];let s=[i.module];return i.clientActionModule&&(s=s.concat(i.clientActionModule)),i.clientLoaderModule&&(s=s.concat(i.clientLoaderModule)),t&&i.hydrateFallbackModule&&(s=s.concat(i.hydrateFallbackModule)),i.imports&&(s=s.concat(i.imports)),s}).flat(1))}function vG(r){return[...new Set(r)]}function yG(r){let e={},t=Object.keys(r).sort();for(let n of t)e[n]=r[n];return e}function _G(r,e){let t=new Set;return new Set(e),r.reduce((n,i)=>{let s=JSON.stringify(yG(i));return t.has(s)||(t.add(s),n.push({key:s,link:i})),n},[])}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var xG=new Set([100,101,204,205]);function bG(r,e){let t=typeof r=="string"?new URL(r,typeof window>"u"?"server://singlefetch/":window.location.origin):r;return t.pathname==="/"?t.pathname="_root.data":e&&Ko(t.pathname,e)==="/"?t.pathname=`${e.replace(/\/$/,"")}/_root.data`:t.pathname=`${t.pathname.replace(/\/$/,"")}.data`,t}function hB(){let r=M.useContext(Yh);return r2(r,"You must render this element inside a <DataRouterContext.Provider> element"),r}function SG(){let r=M.useContext(vg);return r2(r,"You must render this element inside a <DataRouterStateContext.Provider> element"),r}var n2=M.createContext(void 0);n2.displayName="FrameworkContext";function fB(){let r=M.useContext(n2);return r2(r,"You must render this element inside a <HydratedRouter> element"),r}function TG(r,e){let t=M.useContext(n2),[n,i]=M.useState(!1),[s,a]=M.useState(!1),{onFocus:o,onBlur:l,onMouseEnter:u,onMouseLeave:c,onTouchStart:h}=e,m=M.useRef(null);M.useEffect(()=>{if(r==="render"&&a(!0),r==="viewport"){let v=w=>{w.forEach(E=>{a(E.isIntersecting)})},x=new IntersectionObserver(v,{threshold:.5});return m.current&&x.observe(m.current),()=>{x.disconnect()}}},[r]),M.useEffect(()=>{if(n){let v=setTimeout(()=>{a(!0)},100);return()=>{clearTimeout(v)}}},[n]);let g=()=>{i(!0)},y=()=>{i(!1),a(!1)};return t?r!=="intent"?[s,m,{}]:[s,m,{onFocus:Hm(o,g),onBlur:Hm(l,y),onMouseEnter:Hm(u,g),onMouseLeave:Hm(c,y),onTouchStart:Hm(h,g)}]:[!1,m,{}]}function Hm(r,e){return t=>{r&&r(t),t.defaultPrevented||e(t)}}function CG({page:r,...e}){let{router:t}=hB(),n=M.useMemo(()=>yd(t.routes,r,t.basename),[t.routes,r,t.basename]);return n?M.createElement(EG,{page:r,matches:n,...e}):null}function wG(r){let{manifest:e,routeModules:t}=fB(),[n,i]=M.useState([]);return M.useEffect(()=>{let s=!1;return mG(r,e,t).then(a=>{s||i(a)}),()=>{s=!0}},[r,e,t]),n}function EG({page:r,matches:e,...t}){let n=Mu(),{manifest:i,routeModules:s}=fB(),{basename:a}=hB(),{loaderData:o,matches:l}=SG(),u=M.useMemo(()=>cR(r,e,l,i,n,"data"),[r,e,l,i,n]),c=M.useMemo(()=>cR(r,e,l,i,n,"assets"),[r,e,l,i,n]),h=M.useMemo(()=>{if(r===n.pathname+n.search+n.hash)return[];let y=new Set,v=!1;if(e.forEach(w=>{let E=i.routes[w.route.id];!E||!E.hasLoader||(!u.some(D=>D.route.id===w.route.id)&&w.route.id in o&&s[w.route.id]?.shouldRevalidate||E.hasClientLoader?v=!0:y.add(w.route.id))}),y.size===0)return[];let x=bG(r,a);return v&&y.size>0&&x.searchParams.set("_routes",e.filter(w=>y.has(w.route.id)).map(w=>w.route.id).join(",")),[x.pathname+x.search]},[a,o,n,i,u,e,r,s]),m=M.useMemo(()=>gG(c,i),[c,i]),g=wG(c);return M.createElement(M.Fragment,null,h.map(y=>M.createElement("link",{key:y,rel:"prefetch",as:"fetch",href:y,...t})),m.map(y=>M.createElement("link",{key:y,rel:"modulepreload",href:y,...t})),g.map(({key:y,link:v})=>M.createElement("link",{key:y,...v})))}function kG(...r){return e=>{r.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var pB=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{pB&&(window.__reactRouterVersion="7.6.0")}catch{}function AG(r,e){return mq({basename:e?.basename,unstable_getContext:e?.unstable_getContext,future:e?.future,history:BW({window:e?.window}),hydrationData:DG(),routes:r,mapRouteProperties:Qq,hydrationRouteProperties:Jq,dataStrategy:e?.dataStrategy,patchRoutesOnNavigation:e?.patchRoutesOnNavigation,window:e?.window}).initialize()}function DG(){let r=window?.__staticRouterHydrationData;return r&&r.errors&&(r={...r,errors:IG(r.errors)}),r}function IG(r){if(!r)return null;let e=Object.entries(r),t={};for(let[n,i]of e)if(i&&i.__type==="RouteErrorResponse")t[n]=new j_(i.status,i.statusText,i.data,i.internal===!0);else if(i&&i.__type==="Error"){if(i.__subType){let s=window[i.__subType];if(typeof s=="function")try{let a=new s(i.message);a.stack="",t[n]=a}catch{}}if(t[n]==null){let s=new Error(i.message);s.stack="",t[n]=s}}else t[n]=i;return t}var mB=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,gB=M.forwardRef(function({onClick:e,discover:t="render",prefetch:n="none",relative:i,reloadDocument:s,replace:a,state:o,target:l,to:u,preventScrollReset:c,viewTransition:h,...m},g){let{basename:y}=M.useContext(Lu),v=typeof u=="string"&&mB.test(u),x,w=!1;if(typeof u=="string"&&v&&(x=u,pB))try{let B=new URL(window.location.href),k=u.startsWith("//")?new URL(B.protocol+u):new URL(u),H=Ko(k.pathname,y);k.origin===B.origin&&H!=null?u=H+k.search+k.hash:w=!0}catch{_i(!1,`<Link to="${u}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let E=Mq(u,{relative:i}),[D,I,A]=TG(n,m),L=OG(u,{replace:a,state:o,target:l,preventScrollReset:c,relative:i,viewTransition:h});function N(B){e&&e(B),B.defaultPrevented||L(B)}let U=M.createElement("a",{...m,...A,href:x||E,onClick:w||s?e:N,ref:kG(g,I),target:l,"data-discover":!v&&t==="render"?"true":void 0});return D&&!v?M.createElement(M.Fragment,null,U,M.createElement(CG,{page:E})):U});gB.displayName="Link";var PG=M.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:n="",end:i=!1,style:s,to:a,viewTransition:o,children:l,...u},c){let h=_g(a,{relative:u.relative}),m=Mu(),g=M.useContext(vg),{navigator:y,basename:v}=M.useContext(Lu),x=g!=null&&UG(h)&&o===!0,w=y.encodeLocation?y.encodeLocation(h).pathname:h.pathname,E=m.pathname,D=g&&g.navigation&&g.navigation.location?g.navigation.location.pathname:null;t||(E=E.toLowerCase(),D=D?D.toLowerCase():null,w=w.toLowerCase()),D&&v&&(D=Ko(D,v)||D);const I=w!=="/"&&w.endsWith("/")?w.length-1:w.length;let A=E===w||!i&&E.startsWith(w)&&E.charAt(I)==="/",L=D!=null&&(D===w||!i&&D.startsWith(w)&&D.charAt(w.length)==="/"),N={isActive:A,isPending:L,isTransitioning:x},U=A?e:void 0,B;typeof n=="function"?B=n(N):B=[n,A?"active":null,L?"pending":null,x?"transitioning":null].filter(Boolean).join(" ");let k=typeof s=="function"?s(N):s;return M.createElement(gB,{...u,"aria-current":U,className:B,ref:c,style:k,to:a,viewTransition:o},typeof l=="function"?l(N):l)});PG.displayName="NavLink";var RG=M.forwardRef(({discover:r="render",fetcherKey:e,navigate:t,reloadDocument:n,replace:i,state:s,method:a=d_,action:o,onSubmit:l,relative:u,preventScrollReset:c,viewTransition:h,...m},g)=>{let y=BG(),v=NG(o,{relative:u}),x=a.toLowerCase()==="get"?"get":"post",w=typeof o=="string"&&mB.test(o),E=D=>{if(l&&l(D),D.defaultPrevented)return;D.preventDefault();let I=D.nativeEvent.submitter,A=I?.getAttribute("formmethod")||a;y(I||D.currentTarget,{fetcherKey:e,method:A,navigate:t,replace:i,state:s,relative:u,preventScrollReset:c,viewTransition:h})};return M.createElement("form",{ref:g,method:x,action:v,onSubmit:n?l:E,...m,"data-discover":!w&&r==="render"?"true":void 0})});RG.displayName="Form";function LG(r){return`${r} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function vB(r){let e=M.useContext(Yh);return en(e,LG(r)),e}function OG(r,{target:e,replace:t,state:n,preventScrollReset:i,relative:s,viewTransition:a}={}){let o=db(),l=Mu(),u=_g(r,{relative:s});return M.useCallback(c=>{if(uG(c,e)){c.preventDefault();let h=t!==void 0?t:wd(l)===wd(u);o(r,{replace:h,state:n,preventScrollReset:i,relative:s,viewTransition:a})}},[l,o,u,t,n,e,r,i,s,a])}var MG=0,FG=()=>`__${String(++MG)}__`;function BG(){let{router:r}=vB("useSubmit"),{basename:e}=M.useContext(Lu),t=Gq();return M.useCallback(async(n,i={})=>{let{action:s,method:a,encType:o,formData:l,body:u}=hG(n,e);if(i.navigate===!1){let c=i.fetcherKey||FG();await r.fetch(c,t,i.action||s,{preventScrollReset:i.preventScrollReset,formData:l,body:u,formMethod:i.method||a,formEncType:i.encType||o,flushSync:i.flushSync})}else await r.navigate(i.action||s,{preventScrollReset:i.preventScrollReset,formData:l,body:u,formMethod:i.method||a,formEncType:i.encType||o,replace:i.replace,state:i.state,fromRouteId:t,flushSync:i.flushSync,viewTransition:i.viewTransition})},[r,e,t])}function NG(r,{relative:e}={}){let{basename:t}=M.useContext(Lu),n=M.useContext(Ou);en(n,"useFormAction must be used inside a RouteContext");let[i]=n.matches.slice(-1),s={..._g(r||".",{relative:e})},a=Mu();if(r==null){s.search=a.search;let o=new URLSearchParams(s.search),l=o.getAll("index");if(l.some(c=>c==="")){o.delete("index"),l.filter(h=>h).forEach(h=>o.append("index",h));let c=o.toString();s.search=c?`?${c}`:""}}return(!r||r===".")&&i.route.index&&(s.search=s.search?s.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(s.pathname=s.pathname==="/"?t:yu([t,s.pathname])),wd(s)}function UG(r,e={}){let t=M.useContext(JE);en(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:n}=vB("useViewTransitionState"),i=_g(r,{relative:e.relative});if(!t.isTransitioning)return!1;let s=Ko(t.currentLocation.pathname,n)||t.currentLocation.pathname,a=Ko(t.nextLocation.pathname,n)||t.nextLocation.pathname;return $_(i.pathname,a)!=null||$_(i.pathname,s)!=null}[...xG];var Ho=uF();const jv=ua(Ho);/**
 * react-router v7.6.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function $G(r){return M.createElement(eG,{flushSync:Ho.flushSync,...r})}var QT={exports:{}},JT,dR;function jG(){if(dR)return JT;dR=1;var r="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return JT=r,JT}var ZT,hR;function zG(){if(hR)return ZT;hR=1;var r=jG();function e(){}function t(){}return t.resetWarningCache=e,ZT=function(){function n(a,o,l,u,c,h){if(h!==r){var m=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw m.name="Invariant Violation",m}}n.isRequired=n;function i(){return n}var s={array:n,bigint:n,bool:n,func:n,number:n,object:n,string:n,symbol:n,any:n,arrayOf:i,element:n,elementType:n,instanceOf:i,node:n,objectOf:i,oneOf:i,oneOfType:i,shape:i,exact:i,checkPropTypes:t,resetWarningCache:e};return s.PropTypes=s,s},ZT}var fR;function HG(){return fR||(fR=1,QT.exports=zG()()),QT.exports}var VG=HG();const _l=ua(VG);function yB(r){var e,t,n="";if(typeof r=="string"||typeof r=="number")n+=r;else if(typeof r=="object")if(Array.isArray(r)){var i=r.length;for(e=0;e<i;e++)r[e]&&(t=yB(r[e]))&&(n&&(n+=" "),n+=t)}else for(t in r)r[t]&&(n&&(n+=" "),n+=t);return n}function It(){for(var r,e,t=0,n="",i=arguments.length;t<i;t++)(r=arguments[t])&&(e=yB(r))&&(n&&(n+=" "),n+=e);return n}function rr(r,e,t=void 0){const n={};for(const i in r){const s=r[i];let a="",o=!0;for(let l=0;l<s.length;l+=1){const u=s[l];u&&(a+=(o===!0?"":" ")+e(u),o=!1,t&&t[u]&&(a+=" "+t[u]))}n[i]=a}return n}function JC(r,...e){const t=new URL(`https://mui.com/production-error/?code=${r}`);return e.forEach(n=>t.searchParams.append("args[]",n)),`Minified MUI error #${r}; visit ${t} for the full message.`}function _B(r){if(typeof r!="string")throw new Error(JC(7));return r.charAt(0).toUpperCase()+r.slice(1)}var e1={exports:{}},Ln={};/**
 * @license React
 * react-is.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pR;function WG(){if(pR)return Ln;pR=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),s=Symbol.for("react.consumer"),a=Symbol.for("react.context"),o=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),u=Symbol.for("react.suspense_list"),c=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),m=Symbol.for("react.view_transition"),g=Symbol.for("react.client.reference");function y(v){if(typeof v=="object"&&v!==null){var x=v.$$typeof;switch(x){case r:switch(v=v.type,v){case t:case i:case n:case l:case u:case m:return v;default:switch(v=v&&v.$$typeof,v){case a:case o:case h:case c:return v;case s:return v;default:return x}}case e:return x}}}return Ln.ContextConsumer=s,Ln.ContextProvider=a,Ln.Element=r,Ln.ForwardRef=o,Ln.Fragment=t,Ln.Lazy=h,Ln.Memo=c,Ln.Portal=e,Ln.Profiler=i,Ln.StrictMode=n,Ln.Suspense=l,Ln.SuspenseList=u,Ln.isContextConsumer=function(v){return y(v)===s},Ln.isContextProvider=function(v){return y(v)===a},Ln.isElement=function(v){return typeof v=="object"&&v!==null&&v.$$typeof===r},Ln.isForwardRef=function(v){return y(v)===o},Ln.isFragment=function(v){return y(v)===t},Ln.isLazy=function(v){return y(v)===h},Ln.isMemo=function(v){return y(v)===c},Ln.isPortal=function(v){return y(v)===e},Ln.isProfiler=function(v){return y(v)===i},Ln.isStrictMode=function(v){return y(v)===n},Ln.isSuspense=function(v){return y(v)===l},Ln.isSuspenseList=function(v){return y(v)===u},Ln.isValidElementType=function(v){return typeof v=="string"||typeof v=="function"||v===t||v===i||v===n||v===l||v===u||typeof v=="object"&&v!==null&&(v.$$typeof===h||v.$$typeof===c||v.$$typeof===a||v.$$typeof===s||v.$$typeof===o||v.$$typeof===g||v.getModuleId!==void 0)},Ln.typeOf=y,Ln}var mR;function qG(){return mR||(mR=1,e1.exports=WG()),e1.exports}var fb=qG();function _d(r){if(typeof r!="object"||r===null)return!1;const e=Object.getPrototypeOf(r);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in r)&&!(Symbol.iterator in r)}function xB(r){if(M.isValidElement(r)||fb.isValidElementType(r)||!_d(r))return r;const e={};return Object.keys(r).forEach(t=>{e[t]=xB(r[t])}),e}function vc(r,e,t={clone:!0}){const n=t.clone?{...r}:r;return _d(r)&&_d(e)&&Object.keys(e).forEach(i=>{M.isValidElement(e[i])||fb.isValidElementType(e[i])?n[i]=e[i]:_d(e[i])&&Object.prototype.hasOwnProperty.call(r,i)&&_d(r[i])?n[i]=vc(r[i],e[i],t):t.clone?n[i]=_d(e[i])?xB(e[i]):e[i]:n[i]=e[i]}),n}function S0(r,e){return e?vc(r,e,{clone:!1}):r}function GG(r,e){if(!r.containerQueries)return e;const t=Object.keys(e).filter(n=>n.startsWith("@container")).sort((n,i)=>{const s=/min-width:\s*([0-9.]+)/;return+(n.match(s)?.[1]||0)-+(i.match(s)?.[1]||0)});return t.length?t.reduce((n,i)=>{const s=e[i];return delete n[i],n[i]=s,n},{...e}):e}function KG(r,e){return e==="@"||e.startsWith("@")&&(r.some(t=>e.startsWith(`@${t}`))||!!e.match(/^@\d/))}function XG(r,e){const t=e.match(/^@([^/]+)?\/?(.+)?$/);if(!t)return null;const[,n,i]=t,s=Number.isNaN(+n)?n||0:+n;return r.containerQueries(i).up(s)}function YG(r){const e=(s,a)=>s.replace("@media",a?`@container ${a}`:"@container");function t(s,a){s.up=(...o)=>e(r.breakpoints.up(...o),a),s.down=(...o)=>e(r.breakpoints.down(...o),a),s.between=(...o)=>e(r.breakpoints.between(...o),a),s.only=(...o)=>e(r.breakpoints.only(...o),a),s.not=(...o)=>{const l=e(r.breakpoints.not(...o),a);return l.includes("not all and")?l.replace("not all and ","").replace("min-width:","width<").replace("max-width:","width>").replace("and","or"):l}}const n={},i=s=>(t(n,s),n);return t(i),{...r,containerQueries:i}}const pb={xs:0,sm:600,md:900,lg:1200,xl:1536},gR={keys:["xs","sm","md","lg","xl"],up:r=>`@media (min-width:${pb[r]}px)`},QG={containerQueries:r=>({up:e=>{let t=typeof e=="number"?e:pb[e]||e;return typeof t=="number"&&(t=`${t}px`),r?`@container ${r} (min-width:${t})`:`@container (min-width:${t})`}})};function El(r,e,t){const n=r.theme||{};if(Array.isArray(e)){const s=n.breakpoints||gR;return e.reduce((a,o,l)=>(a[s.up(s.keys[l])]=t(e[l]),a),{})}if(typeof e=="object"){const s=n.breakpoints||gR;return Object.keys(e).reduce((a,o)=>{if(KG(s.keys,o)){const l=XG(n.containerQueries?n:QG,o);l&&(a[l]=t(e[o],o))}else if(Object.keys(s.values||pb).includes(o)){const l=s.up(o);a[l]=t(e[o],o)}else{const l=o;a[l]=e[l]}return a},{})}return t(e)}function bB(r={}){return r.keys?.reduce((t,n)=>{const i=r.up(n);return t[i]={},t},{})||{}}function SB(r,e){return r.reduce((t,n)=>{const i=t[n];return(!i||Object.keys(i).length===0)&&delete t[n],t},e)}function JG(r,...e){const t=bB(r),n=[t,...e].reduce((i,s)=>vc(i,s),{});return SB(Object.keys(t),n)}function ZG(r,e){if(typeof r!="object")return{};const t={},n=Object.keys(e);return Array.isArray(r)?n.forEach((i,s)=>{s<r.length&&(t[i]=!0)}):n.forEach(i=>{r[i]!=null&&(t[i]=!0)}),t}function t1({values:r,breakpoints:e,base:t}){const n=t||ZG(r,e),i=Object.keys(n);if(i.length===0)return r;let s;return i.reduce((a,o,l)=>(Array.isArray(r)?(a[o]=r[l]!=null?r[l]:r[s],s=l):typeof r=="object"?(a[o]=r[o]!=null?r[o]:r[s],s=o):a[o]=r,a),{})}function mb(r,e,t=!0){if(!e||typeof e!="string")return null;if(r&&r.vars&&t){const n=`vars.${e}`.split(".").reduce((i,s)=>i&&i[s]?i[s]:null,r);if(n!=null)return n}return e.split(".").reduce((n,i)=>n&&n[i]!=null?n[i]:null,r)}function H_(r,e,t,n=t){let i;return typeof r=="function"?i=r(t):Array.isArray(r)?i=r[t]||n:i=mb(r,t)||n,e&&(i=e(i,n,r)),i}function xi(r){const{prop:e,cssProperty:t=r.prop,themeKey:n,transform:i}=r,s=a=>{if(a[e]==null)return null;const o=a[e],l=a.theme,u=mb(l,n)||{};return El(a,o,h=>{let m=H_(u,i,h);return h===m&&typeof h=="string"&&(m=H_(u,i,`${e}${h==="default"?"":_B(h)}`,h)),t===!1?m:{[t]:m}})};return s.propTypes={},s.filterProps=[e],s}function eK(r){const e={};return t=>(e[t]===void 0&&(e[t]=r(t)),e[t])}const tK={m:"margin",p:"padding"},rK={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},vR={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},nK=eK(r=>{if(r.length>2)if(vR[r])r=vR[r];else return[r];const[e,t]=r.split(""),n=tK[e],i=rK[t]||"";return Array.isArray(i)?i.map(s=>n+s):[n+i]}),i2=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],s2=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"];[...i2,...s2];function xg(r,e,t,n){const i=mb(r,e,!0)??t;return typeof i=="number"||typeof i=="string"?s=>typeof s=="string"?s:typeof i=="string"?i.startsWith("var(")&&s===0?0:i.startsWith("var(")&&s===1?i:`calc(${s} * ${i})`:i*s:Array.isArray(i)?s=>{if(typeof s=="string")return s;const a=Math.abs(s),o=i[a];return s>=0?o:typeof o=="number"?-o:typeof o=="string"&&o.startsWith("var(")?`calc(-1 * ${o})`:`-${o}`}:typeof i=="function"?i:()=>{}}function gb(r){return xg(r,"spacing",8)}function Wh(r,e){return typeof e=="string"||e==null?e:r(e)}function iK(r,e){return t=>r.reduce((n,i)=>(n[i]=Wh(e,t),n),{})}function sK(r,e,t,n){if(!e.includes(t))return null;const i=nK(t),s=iK(i,n),a=r[t];return El(r,a,s)}function TB(r,e){const t=gb(r.theme);return Object.keys(r).map(n=>sK(r,e,n,t)).reduce(S0,{})}function ai(r){return TB(r,i2)}ai.propTypes={};ai.filterProps=i2;function oi(r){return TB(r,s2)}oi.propTypes={};oi.filterProps=s2;function vb(...r){const e=r.reduce((n,i)=>(i.filterProps.forEach(s=>{n[s]=i}),n),{}),t=n=>Object.keys(n).reduce((i,s)=>e[s]?S0(i,e[s](n)):i,{});return t.propTypes={},t.filterProps=r.reduce((n,i)=>n.concat(i.filterProps),[]),t}function zo(r){return typeof r!="number"?r:`${r}px solid`}function Jo(r,e){return xi({prop:r,themeKey:"borders",transform:e})}const aK=Jo("border",zo),oK=Jo("borderTop",zo),lK=Jo("borderRight",zo),uK=Jo("borderBottom",zo),cK=Jo("borderLeft",zo),dK=Jo("borderColor"),hK=Jo("borderTopColor"),fK=Jo("borderRightColor"),pK=Jo("borderBottomColor"),mK=Jo("borderLeftColor"),gK=Jo("outline",zo),vK=Jo("outlineColor"),yb=r=>{if(r.borderRadius!==void 0&&r.borderRadius!==null){const e=xg(r.theme,"shape.borderRadius",4),t=n=>({borderRadius:Wh(e,n)});return El(r,r.borderRadius,t)}return null};yb.propTypes={};yb.filterProps=["borderRadius"];vb(aK,oK,lK,uK,cK,dK,hK,fK,pK,mK,yb,gK,vK);const _b=r=>{if(r.gap!==void 0&&r.gap!==null){const e=xg(r.theme,"spacing",8),t=n=>({gap:Wh(e,n)});return El(r,r.gap,t)}return null};_b.propTypes={};_b.filterProps=["gap"];const xb=r=>{if(r.columnGap!==void 0&&r.columnGap!==null){const e=xg(r.theme,"spacing",8),t=n=>({columnGap:Wh(e,n)});return El(r,r.columnGap,t)}return null};xb.propTypes={};xb.filterProps=["columnGap"];const bb=r=>{if(r.rowGap!==void 0&&r.rowGap!==null){const e=xg(r.theme,"spacing",8),t=n=>({rowGap:Wh(e,n)});return El(r,r.rowGap,t)}return null};bb.propTypes={};bb.filterProps=["rowGap"];const yK=xi({prop:"gridColumn"}),_K=xi({prop:"gridRow"}),xK=xi({prop:"gridAutoFlow"}),bK=xi({prop:"gridAutoColumns"}),SK=xi({prop:"gridAutoRows"}),TK=xi({prop:"gridTemplateColumns"}),CK=xi({prop:"gridTemplateRows"}),wK=xi({prop:"gridTemplateAreas"}),EK=xi({prop:"gridArea"});vb(_b,xb,bb,yK,_K,xK,bK,SK,TK,CK,wK,EK);function np(r,e){return e==="grey"?e:r}const kK=xi({prop:"color",themeKey:"palette",transform:np}),AK=xi({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette",transform:np}),DK=xi({prop:"backgroundColor",themeKey:"palette",transform:np});vb(kK,AK,DK);function lo(r){return r<=1&&r!==0?`${r*100}%`:r}const IK=xi({prop:"width",transform:lo}),a2=r=>{if(r.maxWidth!==void 0&&r.maxWidth!==null){const e=t=>{const n=r.theme?.breakpoints?.values?.[t]||pb[t];return n?r.theme?.breakpoints?.unit!=="px"?{maxWidth:`${n}${r.theme.breakpoints.unit}`}:{maxWidth:n}:{maxWidth:lo(t)}};return El(r,r.maxWidth,e)}return null};a2.filterProps=["maxWidth"];const PK=xi({prop:"minWidth",transform:lo}),RK=xi({prop:"height",transform:lo}),LK=xi({prop:"maxHeight",transform:lo}),OK=xi({prop:"minHeight",transform:lo});xi({prop:"size",cssProperty:"width",transform:lo});xi({prop:"size",cssProperty:"height",transform:lo});const MK=xi({prop:"boxSizing"});vb(IK,a2,PK,RK,LK,OK,MK);const bg={border:{themeKey:"borders",transform:zo},borderTop:{themeKey:"borders",transform:zo},borderRight:{themeKey:"borders",transform:zo},borderBottom:{themeKey:"borders",transform:zo},borderLeft:{themeKey:"borders",transform:zo},borderColor:{themeKey:"palette"},borderTopColor:{themeKey:"palette"},borderRightColor:{themeKey:"palette"},borderBottomColor:{themeKey:"palette"},borderLeftColor:{themeKey:"palette"},outline:{themeKey:"borders",transform:zo},outlineColor:{themeKey:"palette"},borderRadius:{themeKey:"shape.borderRadius",style:yb},color:{themeKey:"palette",transform:np},bgcolor:{themeKey:"palette",cssProperty:"backgroundColor",transform:np},backgroundColor:{themeKey:"palette",transform:np},p:{style:oi},pt:{style:oi},pr:{style:oi},pb:{style:oi},pl:{style:oi},px:{style:oi},py:{style:oi},padding:{style:oi},paddingTop:{style:oi},paddingRight:{style:oi},paddingBottom:{style:oi},paddingLeft:{style:oi},paddingX:{style:oi},paddingY:{style:oi},paddingInline:{style:oi},paddingInlineStart:{style:oi},paddingInlineEnd:{style:oi},paddingBlock:{style:oi},paddingBlockStart:{style:oi},paddingBlockEnd:{style:oi},m:{style:ai},mt:{style:ai},mr:{style:ai},mb:{style:ai},ml:{style:ai},mx:{style:ai},my:{style:ai},margin:{style:ai},marginTop:{style:ai},marginRight:{style:ai},marginBottom:{style:ai},marginLeft:{style:ai},marginX:{style:ai},marginY:{style:ai},marginInline:{style:ai},marginInlineStart:{style:ai},marginInlineEnd:{style:ai},marginBlock:{style:ai},marginBlockStart:{style:ai},marginBlockEnd:{style:ai},displayPrint:{cssProperty:!1,transform:r=>({"@media print":{display:r}})},display:{},overflow:{},textOverflow:{},visibility:{},whiteSpace:{},flexBasis:{},flexDirection:{},flexWrap:{},justifyContent:{},alignItems:{},alignContent:{},order:{},flex:{},flexGrow:{},flexShrink:{},alignSelf:{},justifyItems:{},justifySelf:{},gap:{style:_b},rowGap:{style:bb},columnGap:{style:xb},gridColumn:{},gridRow:{},gridAutoFlow:{},gridAutoColumns:{},gridAutoRows:{},gridTemplateColumns:{},gridTemplateRows:{},gridTemplateAreas:{},gridArea:{},position:{},zIndex:{themeKey:"zIndex"},top:{},right:{},bottom:{},left:{},boxShadow:{themeKey:"shadows"},width:{transform:lo},maxWidth:{style:a2},minWidth:{transform:lo},height:{transform:lo},maxHeight:{transform:lo},minHeight:{transform:lo},boxSizing:{},font:{themeKey:"font"},fontFamily:{themeKey:"typography"},fontSize:{themeKey:"typography"},fontStyle:{themeKey:"typography"},fontWeight:{themeKey:"typography"},letterSpacing:{},textTransform:{},lineHeight:{},textAlign:{},typography:{cssProperty:!1,themeKey:"typography"}};function FK(...r){const e=r.reduce((n,i)=>n.concat(Object.keys(i)),[]),t=new Set(e);return r.every(n=>t.size===Object.keys(n).length)}function BK(r,e){return typeof r=="function"?r(e):r}function NK(){function r(t,n,i,s){const a={[t]:n,theme:i},o=s[t];if(!o)return{[t]:n};const{cssProperty:l=t,themeKey:u,transform:c,style:h}=o;if(n==null)return null;if(u==="typography"&&n==="inherit")return{[t]:n};const m=mb(i,u)||{};return h?h(a):El(a,n,y=>{let v=H_(m,c,y);return y===v&&typeof y=="string"&&(v=H_(m,c,`${t}${y==="default"?"":_B(y)}`,y)),l===!1?v:{[l]:v}})}function e(t){const{sx:n,theme:i={}}=t||{};if(!n)return null;const s=i.unstable_sxConfig??bg;function a(o){let l=o;if(typeof o=="function")l=o(i);else if(typeof o!="object")return o;if(!l)return null;const u=bB(i.breakpoints),c=Object.keys(u);let h=u;return Object.keys(l).forEach(m=>{const g=BK(l[m],i);if(g!=null)if(typeof g=="object")if(s[m])h=S0(h,r(m,g,i,s));else{const y=El({theme:i},g,v=>({[m]:v}));FK(y,g)?h[m]=e({sx:g,theme:i}):h=S0(h,y)}else h=S0(h,r(m,g,i,s))}),GG(i,SB(c,h))}return Array.isArray(n)?n.map(a):a(n)}return e}const Ed=NK();Ed.filterProps=["sx"];const UK=r=>{const e={systemProps:{},otherProps:{}},t=r?.theme?.unstable_sxConfig??bg;return Object.keys(r).forEach(n=>{t[n]?e.systemProps[n]=r[n]:e.otherProps[n]=r[n]}),e};function o2(r){const{sx:e,...t}=r,{systemProps:n,otherProps:i}=UK(t);let s;return Array.isArray(e)?s=[n,...e]:typeof e=="function"?s=(...a)=>{const o=e(...a);return _d(o)?{...n,...o}:n}:s={...n,...e},{...i,sx:s}}function tr(){return tr=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)({}).hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},tr.apply(null,arguments)}function $K(r){if(r.sheet)return r.sheet;for(var e=0;e<document.styleSheets.length;e++)if(document.styleSheets[e].ownerNode===r)return document.styleSheets[e]}function jK(r){var e=document.createElement("style");return e.setAttribute("data-emotion",r.key),r.nonce!==void 0&&e.setAttribute("nonce",r.nonce),e.appendChild(document.createTextNode("")),e.setAttribute("data-s",""),e}var zK=(function(){function r(t){var n=this;this._insertTag=function(i){var s;n.tags.length===0?n.insertionPoint?s=n.insertionPoint.nextSibling:n.prepend?s=n.container.firstChild:s=n.before:s=n.tags[n.tags.length-1].nextSibling,n.container.insertBefore(i,s),n.tags.push(i)},this.isSpeedy=t.speedy===void 0?!0:t.speedy,this.tags=[],this.ctr=0,this.nonce=t.nonce,this.key=t.key,this.container=t.container,this.prepend=t.prepend,this.insertionPoint=t.insertionPoint,this.before=null}var e=r.prototype;return e.hydrate=function(n){n.forEach(this._insertTag)},e.insert=function(n){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(jK(this));var i=this.tags[this.tags.length-1];if(this.isSpeedy){var s=$K(i);try{s.insertRule(n,s.cssRules.length)}catch{}}else i.appendChild(document.createTextNode(n));this.ctr++},e.flush=function(){this.tags.forEach(function(n){var i;return(i=n.parentNode)==null?void 0:i.removeChild(n)}),this.tags=[],this.ctr=0},r})(),Ms="-ms-",V_="-moz-",_n="-webkit-",CB="comm",l2="rule",u2="decl",HK="@import",wB="@keyframes",VK="@layer",WK=Math.abs,Sb=String.fromCharCode,qK=Object.assign;function GK(r,e){return gs(r,0)^45?(((e<<2^gs(r,0))<<2^gs(r,1))<<2^gs(r,2))<<2^gs(r,3):0}function EB(r){return r.trim()}function KK(r,e){return(r=e.exec(r))?r[0]:r}function xn(r,e,t){return r.replace(e,t)}function ZC(r,e){return r.indexOf(e)}function gs(r,e){return r.charCodeAt(e)|0}function q0(r,e,t){return r.slice(e,t)}function ru(r){return r.length}function c2(r){return r.length}function zv(r,e){return e.push(r),r}function XK(r,e){return r.map(e).join("")}var Tb=1,bp=1,kB=0,Ua=0,Ei=0,Gp="";function Cb(r,e,t,n,i,s,a){return{value:r,root:e,parent:t,type:n,props:i,children:s,line:Tb,column:bp,length:a,return:""}}function Vm(r,e){return qK(Cb("",null,null,"",null,null,0),r,{length:-r.length},e)}function YK(){return Ei}function QK(){return Ei=Ua>0?gs(Gp,--Ua):0,bp--,Ei===10&&(bp=1,Tb--),Ei}function co(){return Ei=Ua<kB?gs(Gp,Ua++):0,bp++,Ei===10&&(bp=1,Tb++),Ei}function _u(){return gs(Gp,Ua)}function f_(){return Ua}function Sg(r,e){return q0(Gp,r,e)}function G0(r){switch(r){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function AB(r){return Tb=bp=1,kB=ru(Gp=r),Ua=0,[]}function DB(r){return Gp="",r}function p_(r){return EB(Sg(Ua-1,ew(r===91?r+2:r===40?r+1:r)))}function JK(r){for(;(Ei=_u())&&Ei<33;)co();return G0(r)>2||G0(Ei)>3?"":" "}function ZK(r,e){for(;--e&&co()&&!(Ei<48||Ei>102||Ei>57&&Ei<65||Ei>70&&Ei<97););return Sg(r,f_()+(e<6&&_u()==32&&co()==32))}function ew(r){for(;co();)switch(Ei){case r:return Ua;case 34:case 39:r!==34&&r!==39&&ew(Ei);break;case 40:r===41&&ew(r);break;case 92:co();break}return Ua}function eX(r,e){for(;co()&&r+Ei!==57;)if(r+Ei===84&&_u()===47)break;return"/*"+Sg(e,Ua-1)+"*"+Sb(r===47?r:co())}function tX(r){for(;!G0(_u());)co();return Sg(r,Ua)}function rX(r){return DB(m_("",null,null,null,[""],r=AB(r),0,[0],r))}function m_(r,e,t,n,i,s,a,o,l){for(var u=0,c=0,h=a,m=0,g=0,y=0,v=1,x=1,w=1,E=0,D="",I=i,A=s,L=n,N=D;x;)switch(y=E,E=co()){case 40:if(y!=108&&gs(N,h-1)==58){ZC(N+=xn(p_(E),"&","&\f"),"&\f")!=-1&&(w=-1);break}case 34:case 39:case 91:N+=p_(E);break;case 9:case 10:case 13:case 32:N+=JK(y);break;case 92:N+=ZK(f_()-1,7);continue;case 47:switch(_u()){case 42:case 47:zv(nX(eX(co(),f_()),e,t),l);break;default:N+="/"}break;case 123*v:o[u++]=ru(N)*w;case 125*v:case 59:case 0:switch(E){case 0:case 125:x=0;case 59+c:w==-1&&(N=xn(N,/\f/g,"")),g>0&&ru(N)-h&&zv(g>32?_R(N+";",n,t,h-1):_R(xn(N," ","")+";",n,t,h-2),l);break;case 59:N+=";";default:if(zv(L=yR(N,e,t,u,c,i,o,D,I=[],A=[],h),s),E===123)if(c===0)m_(N,e,L,L,I,s,h,o,A);else switch(m===99&&gs(N,3)===110?100:m){case 100:case 108:case 109:case 115:m_(r,L,L,n&&zv(yR(r,L,L,0,0,i,o,D,i,I=[],h),A),i,A,h,o,n?I:A);break;default:m_(N,L,L,L,[""],A,0,o,A)}}u=c=g=0,v=w=1,D=N="",h=a;break;case 58:h=1+ru(N),g=y;default:if(v<1){if(E==123)--v;else if(E==125&&v++==0&&QK()==125)continue}switch(N+=Sb(E),E*v){case 38:w=c>0?1:(N+="\f",-1);break;case 44:o[u++]=(ru(N)-1)*w,w=1;break;case 64:_u()===45&&(N+=p_(co())),m=_u(),c=h=ru(D=N+=tX(f_())),E++;break;case 45:y===45&&ru(N)==2&&(v=0)}}return s}function yR(r,e,t,n,i,s,a,o,l,u,c){for(var h=i-1,m=i===0?s:[""],g=c2(m),y=0,v=0,x=0;y<n;++y)for(var w=0,E=q0(r,h+1,h=WK(v=a[y])),D=r;w<g;++w)(D=EB(v>0?m[w]+" "+E:xn(E,/&\f/g,m[w])))&&(l[x++]=D);return Cb(r,e,t,i===0?l2:o,l,u,c)}function nX(r,e,t){return Cb(r,e,t,CB,Sb(YK()),q0(r,2,-2),0)}function _R(r,e,t,n){return Cb(r,e,t,u2,q0(r,0,n),q0(r,n+1,-1),n)}function ip(r,e){for(var t="",n=c2(r),i=0;i<n;i++)t+=e(r[i],i,r,e)||"";return t}function iX(r,e,t,n){switch(r.type){case VK:if(r.children.length)break;case HK:case u2:return r.return=r.return||r.value;case CB:return"";case wB:return r.return=r.value+"{"+ip(r.children,n)+"}";case l2:r.value=r.props.join(",")}return ru(t=ip(r.children,n))?r.return=r.value+"{"+t+"}":""}function sX(r){var e=c2(r);return function(t,n,i,s){for(var a="",o=0;o<e;o++)a+=r[o](t,n,i,s)||"";return a}}function aX(r){return function(e){e.root||(e=e.return)&&r(e)}}function IB(r){var e=Object.create(null);return function(t){return e[t]===void 0&&(e[t]=r(t)),e[t]}}var oX=function(e,t,n){for(var i=0,s=0;i=s,s=_u(),i===38&&s===12&&(t[n]=1),!G0(s);)co();return Sg(e,Ua)},lX=function(e,t){var n=-1,i=44;do switch(G0(i)){case 0:i===38&&_u()===12&&(t[n]=1),e[n]+=oX(Ua-1,t,n);break;case 2:e[n]+=p_(i);break;case 4:if(i===44){e[++n]=_u()===58?"&\f":"",t[n]=e[n].length;break}default:e[n]+=Sb(i)}while(i=co());return e},uX=function(e,t){return DB(lX(AB(e),t))},xR=new WeakMap,cX=function(e){if(!(e.type!=="rule"||!e.parent||e.length<1)){for(var t=e.value,n=e.parent,i=e.column===n.column&&e.line===n.line;n.type!=="rule";)if(n=n.parent,!n)return;if(!(e.props.length===1&&t.charCodeAt(0)!==58&&!xR.get(n))&&!i){xR.set(e,!0);for(var s=[],a=uX(t,s),o=n.props,l=0,u=0;l<a.length;l++)for(var c=0;c<o.length;c++,u++)e.props[u]=s[l]?a[l].replace(/&\f/g,o[c]):o[c]+" "+a[l]}}},dX=function(e){if(e.type==="decl"){var t=e.value;t.charCodeAt(0)===108&&t.charCodeAt(2)===98&&(e.return="",e.value="")}};function PB(r,e){switch(GK(r,e)){case 5103:return _n+"print-"+r+r;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return _n+r+r;case 5349:case 4246:case 4810:case 6968:case 2756:return _n+r+V_+r+Ms+r+r;case 6828:case 4268:return _n+r+Ms+r+r;case 6165:return _n+r+Ms+"flex-"+r+r;case 5187:return _n+r+xn(r,/(\w+).+(:[^]+)/,_n+"box-$1$2"+Ms+"flex-$1$2")+r;case 5443:return _n+r+Ms+"flex-item-"+xn(r,/flex-|-self/,"")+r;case 4675:return _n+r+Ms+"flex-line-pack"+xn(r,/align-content|flex-|-self/,"")+r;case 5548:return _n+r+Ms+xn(r,"shrink","negative")+r;case 5292:return _n+r+Ms+xn(r,"basis","preferred-size")+r;case 6060:return _n+"box-"+xn(r,"-grow","")+_n+r+Ms+xn(r,"grow","positive")+r;case 4554:return _n+xn(r,/([^-])(transform)/g,"$1"+_n+"$2")+r;case 6187:return xn(xn(xn(r,/(zoom-|grab)/,_n+"$1"),/(image-set)/,_n+"$1"),r,"")+r;case 5495:case 3959:return xn(r,/(image-set\([^]*)/,_n+"$1$`$1");case 4968:return xn(xn(r,/(.+:)(flex-)?(.*)/,_n+"box-pack:$3"+Ms+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+_n+r+r;case 4095:case 3583:case 4068:case 2532:return xn(r,/(.+)-inline(.+)/,_n+"$1$2")+r;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(ru(r)-1-e>6)switch(gs(r,e+1)){case 109:if(gs(r,e+4)!==45)break;case 102:return xn(r,/(.+:)(.+)-([^]+)/,"$1"+_n+"$2-$3$1"+V_+(gs(r,e+3)==108?"$3":"$2-$3"))+r;case 115:return~ZC(r,"stretch")?PB(xn(r,"stretch","fill-available"),e)+r:r}break;case 4949:if(gs(r,e+1)!==115)break;case 6444:switch(gs(r,ru(r)-3-(~ZC(r,"!important")&&10))){case 107:return xn(r,":",":"+_n)+r;case 101:return xn(r,/(.+:)([^;!]+)(;|!.+)?/,"$1"+_n+(gs(r,14)===45?"inline-":"")+"box$3$1"+_n+"$2$3$1"+Ms+"$2box$3")+r}break;case 5936:switch(gs(r,e+11)){case 114:return _n+r+Ms+xn(r,/[svh]\w+-[tblr]{2}/,"tb")+r;case 108:return _n+r+Ms+xn(r,/[svh]\w+-[tblr]{2}/,"tb-rl")+r;case 45:return _n+r+Ms+xn(r,/[svh]\w+-[tblr]{2}/,"lr")+r}return _n+r+Ms+r+r}return r}var hX=function(e,t,n,i){if(e.length>-1&&!e.return)switch(e.type){case u2:e.return=PB(e.value,e.length);break;case wB:return ip([Vm(e,{value:xn(e.value,"@","@"+_n)})],i);case l2:if(e.length)return XK(e.props,function(s){switch(KK(s,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return ip([Vm(e,{props:[xn(s,/:(read-\w+)/,":"+V_+"$1")]})],i);case"::placeholder":return ip([Vm(e,{props:[xn(s,/:(plac\w+)/,":"+_n+"input-$1")]}),Vm(e,{props:[xn(s,/:(plac\w+)/,":"+V_+"$1")]}),Vm(e,{props:[xn(s,/:(plac\w+)/,Ms+"input-$1")]})],i)}return""})}},fX=[hX],pX=function(e){var t=e.key;if(t==="css"){var n=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(n,function(v){var x=v.getAttribute("data-emotion");x.indexOf(" ")!==-1&&(document.head.appendChild(v),v.setAttribute("data-s",""))})}var i=e.stylisPlugins||fX,s={},a,o=[];a=e.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+t+' "]'),function(v){for(var x=v.getAttribute("data-emotion").split(" "),w=1;w<x.length;w++)s[x[w]]=!0;o.push(v)});var l,u=[cX,dX];{var c,h=[iX,aX(function(v){c.insert(v)})],m=sX(u.concat(i,h)),g=function(x){return ip(rX(x),m)};l=function(x,w,E,D){c=E,g(x?x+"{"+w.styles+"}":w.styles),D&&(y.inserted[w.name]=!0)}}var y={key:t,sheet:new zK({key:t,container:a,nonce:e.nonce,speedy:e.speedy,prepend:e.prepend,insertionPoint:e.insertionPoint}),nonce:e.nonce,inserted:s,registered:{},insert:l};return y.sheet.hydrate(o),y},r1={exports:{}},Tn={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bR;function mX(){if(bR)return Tn;bR=1;var r=typeof Symbol=="function"&&Symbol.for,e=r?Symbol.for("react.element"):60103,t=r?Symbol.for("react.portal"):60106,n=r?Symbol.for("react.fragment"):60107,i=r?Symbol.for("react.strict_mode"):60108,s=r?Symbol.for("react.profiler"):60114,a=r?Symbol.for("react.provider"):60109,o=r?Symbol.for("react.context"):60110,l=r?Symbol.for("react.async_mode"):60111,u=r?Symbol.for("react.concurrent_mode"):60111,c=r?Symbol.for("react.forward_ref"):60112,h=r?Symbol.for("react.suspense"):60113,m=r?Symbol.for("react.suspense_list"):60120,g=r?Symbol.for("react.memo"):60115,y=r?Symbol.for("react.lazy"):60116,v=r?Symbol.for("react.block"):60121,x=r?Symbol.for("react.fundamental"):60117,w=r?Symbol.for("react.responder"):60118,E=r?Symbol.for("react.scope"):60119;function D(A){if(typeof A=="object"&&A!==null){var L=A.$$typeof;switch(L){case e:switch(A=A.type,A){case l:case u:case n:case s:case i:case h:return A;default:switch(A=A&&A.$$typeof,A){case o:case c:case y:case g:case a:return A;default:return L}}case t:return L}}}function I(A){return D(A)===u}return Tn.AsyncMode=l,Tn.ConcurrentMode=u,Tn.ContextConsumer=o,Tn.ContextProvider=a,Tn.Element=e,Tn.ForwardRef=c,Tn.Fragment=n,Tn.Lazy=y,Tn.Memo=g,Tn.Portal=t,Tn.Profiler=s,Tn.StrictMode=i,Tn.Suspense=h,Tn.isAsyncMode=function(A){return I(A)||D(A)===l},Tn.isConcurrentMode=I,Tn.isContextConsumer=function(A){return D(A)===o},Tn.isContextProvider=function(A){return D(A)===a},Tn.isElement=function(A){return typeof A=="object"&&A!==null&&A.$$typeof===e},Tn.isForwardRef=function(A){return D(A)===c},Tn.isFragment=function(A){return D(A)===n},Tn.isLazy=function(A){return D(A)===y},Tn.isMemo=function(A){return D(A)===g},Tn.isPortal=function(A){return D(A)===t},Tn.isProfiler=function(A){return D(A)===s},Tn.isStrictMode=function(A){return D(A)===i},Tn.isSuspense=function(A){return D(A)===h},Tn.isValidElementType=function(A){return typeof A=="string"||typeof A=="function"||A===n||A===u||A===s||A===i||A===h||A===m||typeof A=="object"&&A!==null&&(A.$$typeof===y||A.$$typeof===g||A.$$typeof===a||A.$$typeof===o||A.$$typeof===c||A.$$typeof===x||A.$$typeof===w||A.$$typeof===E||A.$$typeof===v)},Tn.typeOf=D,Tn}var SR;function gX(){return SR||(SR=1,r1.exports=mX()),r1.exports}var n1,TR;function vX(){if(TR)return n1;TR=1;var r=gX(),e={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},t={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},n={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},i={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},s={};s[r.ForwardRef]=n,s[r.Memo]=i;function a(y){return r.isMemo(y)?i:s[y.$$typeof]||e}var o=Object.defineProperty,l=Object.getOwnPropertyNames,u=Object.getOwnPropertySymbols,c=Object.getOwnPropertyDescriptor,h=Object.getPrototypeOf,m=Object.prototype;function g(y,v,x){if(typeof v!="string"){if(m){var w=h(v);w&&w!==m&&g(y,w,x)}var E=l(v);u&&(E=E.concat(u(v)));for(var D=a(y),I=a(v),A=0;A<E.length;++A){var L=E[A];if(!t[L]&&!(x&&x[L])&&!(I&&I[L])&&!(D&&D[L])){var N=c(v,L);try{o(y,L,N)}catch{}}}}return y}return n1=g,n1}vX();var yX=!0;function RB(r,e,t){var n="";return t.split(" ").forEach(function(i){r[i]!==void 0?e.push(r[i]+";"):i&&(n+=i+" ")}),n}var d2=function(e,t,n){var i=e.key+"-"+t.name;(n===!1||yX===!1)&&e.registered[i]===void 0&&(e.registered[i]=t.styles)},h2=function(e,t,n){d2(e,t,n);var i=e.key+"-"+t.name;if(e.inserted[t.name]===void 0){var s=t;do e.insert(t===s?"."+i:"",s,e.sheet,!0),s=s.next;while(s!==void 0)}};function _X(r){for(var e=0,t,n=0,i=r.length;i>=4;++n,i-=4)t=r.charCodeAt(n)&255|(r.charCodeAt(++n)&255)<<8|(r.charCodeAt(++n)&255)<<16|(r.charCodeAt(++n)&255)<<24,t=(t&65535)*1540483477+((t>>>16)*59797<<16),t^=t>>>24,e=(t&65535)*1540483477+((t>>>16)*59797<<16)^(e&65535)*1540483477+((e>>>16)*59797<<16);switch(i){case 3:e^=(r.charCodeAt(n+2)&255)<<16;case 2:e^=(r.charCodeAt(n+1)&255)<<8;case 1:e^=r.charCodeAt(n)&255,e=(e&65535)*1540483477+((e>>>16)*59797<<16)}return e^=e>>>13,e=(e&65535)*1540483477+((e>>>16)*59797<<16),((e^e>>>15)>>>0).toString(36)}var xX={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,scale:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},bX=/[A-Z]|^ms/g,SX=/_EMO_([^_]+?)_([^]*?)_EMO_/g,LB=function(e){return e.charCodeAt(1)===45},CR=function(e){return e!=null&&typeof e!="boolean"},i1=IB(function(r){return LB(r)?r:r.replace(bX,"-$&").toLowerCase()}),wR=function(e,t){switch(e){case"animation":case"animationName":if(typeof t=="string")return t.replace(SX,function(n,i,s){return nu={name:i,styles:s,next:nu},i})}return xX[e]!==1&&!LB(e)&&typeof t=="number"&&t!==0?t+"px":t};function K0(r,e,t){if(t==null)return"";var n=t;if(n.__emotion_styles!==void 0)return n;switch(typeof t){case"boolean":return"";case"object":{var i=t;if(i.anim===1)return nu={name:i.name,styles:i.styles,next:nu},i.name;var s=t;if(s.styles!==void 0){var a=s.next;if(a!==void 0)for(;a!==void 0;)nu={name:a.name,styles:a.styles,next:nu},a=a.next;var o=s.styles+";";return o}return TX(r,e,t)}case"function":{if(r!==void 0){var l=nu,u=t(r);return nu=l,K0(r,e,u)}break}}var c=t;if(e==null)return c;var h=e[c];return h!==void 0?h:c}function TX(r,e,t){var n="";if(Array.isArray(t))for(var i=0;i<t.length;i++)n+=K0(r,e,t[i])+";";else for(var s in t){var a=t[s];if(typeof a!="object"){var o=a;e!=null&&e[o]!==void 0?n+=s+"{"+e[o]+"}":CR(o)&&(n+=i1(s)+":"+wR(s,o)+";")}else if(Array.isArray(a)&&typeof a[0]=="string"&&(e==null||e[a[0]]===void 0))for(var l=0;l<a.length;l++)CR(a[l])&&(n+=i1(s)+":"+wR(s,a[l])+";");else{var u=K0(r,e,a);switch(s){case"animation":case"animationName":{n+=i1(s)+":"+u+";";break}default:n+=s+"{"+u+"}"}}}return n}var ER=/label:\s*([^\s;{]+)\s*(;|$)/g,nu;function Tg(r,e,t){if(r.length===1&&typeof r[0]=="object"&&r[0]!==null&&r[0].styles!==void 0)return r[0];var n=!0,i="";nu=void 0;var s=r[0];if(s==null||s.raw===void 0)n=!1,i+=K0(t,e,s);else{var a=s;i+=a[0]}for(var o=1;o<r.length;o++)if(i+=K0(t,e,r[o]),n){var l=s;i+=l[o]}ER.lastIndex=0;for(var u="",c;(c=ER.exec(i))!==null;)u+="-"+c[1];var h=_X(i)+u;return{name:h,styles:i,next:nu}}var CX=function(e){return e()},OB=P_.useInsertionEffect?P_.useInsertionEffect:!1,MB=OB||CX,kR=OB||M.useLayoutEffect,FB=M.createContext(typeof HTMLElement<"u"?pX({key:"css"}):null);FB.Provider;var f2=function(e){return M.forwardRef(function(t,n){var i=M.useContext(FB);return e(t,i,n)})},Cg=M.createContext({}),p2={}.hasOwnProperty,tw="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",wX=function(e,t){var n={};for(var i in t)p2.call(t,i)&&(n[i]=t[i]);return n[tw]=e,n},EX=function(e){var t=e.cache,n=e.serialized,i=e.isStringTag;return d2(t,n,i),MB(function(){return h2(t,n,i)}),null},kX=f2(function(r,e,t){var n=r.css;typeof n=="string"&&e.registered[n]!==void 0&&(n=e.registered[n]);var i=r[tw],s=[n],a="";typeof r.className=="string"?a=RB(e.registered,s,r.className):r.className!=null&&(a=r.className+" ");var o=Tg(s,void 0,M.useContext(Cg));a+=e.key+"-"+o.name;var l={};for(var u in r)p2.call(r,u)&&u!=="css"&&u!==tw&&(l[u]=r[u]);return l.className=a,t&&(l.ref=t),M.createElement(M.Fragment,null,M.createElement(EX,{cache:e,serialized:o,isStringTag:typeof i=="string"}),M.createElement(i,l))}),AX=kX,AR=function(e,t){var n=arguments;if(t==null||!p2.call(t,"css"))return M.createElement.apply(void 0,n);var i=n.length,s=new Array(i);s[0]=AX,s[1]=wX(e,t);for(var a=2;a<i;a++)s[a]=n[a];return M.createElement.apply(null,s)};(function(r){var e;e||(e=r.JSX||(r.JSX={}))})(AR||(AR={}));var DX=f2(function(r,e){var t=r.styles,n=Tg([t],void 0,M.useContext(Cg)),i=M.useRef();return kR(function(){var s=e.key+"-global",a=new e.sheet.constructor({key:s,nonce:e.sheet.nonce,container:e.sheet.container,speedy:e.sheet.isSpeedy}),o=!1,l=document.querySelector('style[data-emotion="'+s+" "+n.name+'"]');return e.sheet.tags.length&&(a.before=e.sheet.tags[0]),l!==null&&(o=!0,l.setAttribute("data-emotion",s),a.hydrate([l])),i.current=[a,o],function(){a.flush()}},[e]),kR(function(){var s=i.current,a=s[0],o=s[1];if(o){s[1]=!1;return}if(n.next!==void 0&&h2(e,n.next,!0),a.tags.length){var l=a.tags[a.tags.length-1].nextElementSibling;a.before=l,a.flush()}e.insert("",n,a,!1)},[e,n.name]),null});function m2(){for(var r=arguments.length,e=new Array(r),t=0;t<r;t++)e[t]=arguments[t];return Tg(e)}function wg(){var r=m2.apply(void 0,arguments),e="animation-"+r.name;return{name:e,styles:"@keyframes "+e+"{"+r.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}}var IX=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|disableRemotePlayback|download|draggable|encType|enterKeyHint|fetchpriority|fetchPriority|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,PX=IB(function(r){return IX.test(r)||r.charCodeAt(0)===111&&r.charCodeAt(1)===110&&r.charCodeAt(2)<91}),RX=PX,LX=function(e){return e!=="theme"},DR=function(e){return typeof e=="string"&&e.charCodeAt(0)>96?RX:LX},IR=function(e,t,n){var i;if(t){var s=t.shouldForwardProp;i=e.__emotion_forwardProp&&s?function(a){return e.__emotion_forwardProp(a)&&s(a)}:s}return typeof i!="function"&&n&&(i=e.__emotion_forwardProp),i},OX=function(e){var t=e.cache,n=e.serialized,i=e.isStringTag;return d2(t,n,i),MB(function(){return h2(t,n,i)}),null},MX=function r(e,t){var n=e.__emotion_real===e,i=n&&e.__emotion_base||e,s,a;t!==void 0&&(s=t.label,a=t.target);var o=IR(e,t,n),l=o||DR(i),u=!l("as");return function(){var c=arguments,h=n&&e.__emotion_styles!==void 0?e.__emotion_styles.slice(0):[];if(s!==void 0&&h.push("label:"+s+";"),c[0]==null||c[0].raw===void 0)h.push.apply(h,c);else{var m=c[0];h.push(m[0]);for(var g=c.length,y=1;y<g;y++)h.push(c[y],m[y])}var v=f2(function(x,w,E){var D=u&&x.as||i,I="",A=[],L=x;if(x.theme==null){L={};for(var N in x)L[N]=x[N];L.theme=M.useContext(Cg)}typeof x.className=="string"?I=RB(w.registered,A,x.className):x.className!=null&&(I=x.className+" ");var U=Tg(h.concat(A),w.registered,L);I+=w.key+"-"+U.name,a!==void 0&&(I+=" "+a);var B=u&&o===void 0?DR(D):l,k={};for(var H in x)u&&H==="as"||B(H)&&(k[H]=x[H]);return k.className=I,E&&(k.ref=E),M.createElement(M.Fragment,null,M.createElement(OX,{cache:w,serialized:U,isStringTag:typeof D=="string"}),M.createElement(D,k))});return v.displayName=s!==void 0?s:"Styled("+(typeof i=="string"?i:i.displayName||i.name||"Component")+")",v.defaultProps=e.defaultProps,v.__emotion_real=v,v.__emotion_base=i,v.__emotion_styles=h,v.__emotion_forwardProp=o,Object.defineProperty(v,"toString",{value:function(){return"."+a}}),v.withComponent=function(x,w){var E=r(x,tr({},t,w,{shouldForwardProp:IR(v,w,!0)}));return E.apply(void 0,h)},v}},FX=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"],rw=MX.bind(null);FX.forEach(function(r){rw[r]=rw(r)});function BX(r){return r==null||Object.keys(r).length===0}function BB(r){const{styles:e,defaultTheme:t={}}=r,n=typeof e=="function"?i=>e(BX(i)?t:i):e;return F.jsx(DX,{styles:n})}function NB(r,e){return rw(r,e)}function NX(r,e){Array.isArray(r.__emotion_styles)&&(r.__emotion_styles=e(r.__emotion_styles))}const PR=[];function RR(r){return PR[0]=r,Tg(PR)}const UX=r=>{const e=Object.keys(r).map(t=>({key:t,val:r[t]}))||[];return e.sort((t,n)=>t.val-n.val),e.reduce((t,n)=>({...t,[n.key]:n.val}),{})};function $X(r){const{values:e={xs:0,sm:600,md:900,lg:1200,xl:1536},unit:t="px",step:n=5,...i}=r,s=UX(e),a=Object.keys(s);function o(m){return`@media (min-width:${typeof e[m]=="number"?e[m]:m}${t})`}function l(m){return`@media (max-width:${(typeof e[m]=="number"?e[m]:m)-n/100}${t})`}function u(m,g){const y=a.indexOf(g);return`@media (min-width:${typeof e[m]=="number"?e[m]:m}${t}) and (max-width:${(y!==-1&&typeof e[a[y]]=="number"?e[a[y]]:g)-n/100}${t})`}function c(m){return a.indexOf(m)+1<a.length?u(m,a[a.indexOf(m)+1]):o(m)}function h(m){const g=a.indexOf(m);return g===0?o(a[1]):g===a.length-1?l(a[g]):u(m,a[a.indexOf(m)+1]).replace("@media","@media not all and")}return{keys:a,values:s,up:o,down:l,between:u,only:c,not:h,unit:t,...i}}const jX={borderRadius:4};function UB(r=8,e=gb({spacing:r})){if(r.mui)return r;const t=(...n)=>(n.length===0?[1]:n).map(s=>{const a=e(s);return typeof a=="number"?`${a}px`:a}).join(" ");return t.mui=!0,t}function zX(r,e){const t=this;if(t.vars){if(!t.colorSchemes?.[r]||typeof t.getColorSchemeSelector!="function")return{};let n=t.getColorSchemeSelector(r);return n==="&"?e:((n.includes("data-")||n.includes("."))&&(n=`*:where(${n.replace(/\s*&$/,"")}) &`),{[n]:e})}return t.palette.mode===r?e:{}}function wb(r={},...e){const{breakpoints:t={},palette:n={},spacing:i,shape:s={},...a}=r,o=$X(t),l=UB(i);let u=vc({breakpoints:o,direction:"ltr",components:{},palette:{mode:"light",...n},spacing:l,shape:{...jX,...s}},a);return u=YG(u),u.applyStyles=zX,u=e.reduce((c,h)=>vc(c,h),u),u.unstable_sxConfig={...bg,...a?.unstable_sxConfig},u.unstable_sx=function(h){return Ed({sx:h,theme:this})},u}function HX(r){return Object.keys(r).length===0}function g2(r=null){const e=M.useContext(Cg);return!e||HX(e)?r:e}const VX=wb();function Eb(r=VX){return g2(r)}function WX({styles:r,themeId:e,defaultTheme:t={}}){const n=Eb(t),i=typeof r=="function"?r(e&&n[e]||n):r;return F.jsx(BB,{styles:i})}const LR=r=>r,qX=()=>{let r=LR;return{configure(e){r=e},generate(e){return r(e)},reset(){r=LR}}},GX=qX();function KX(r={}){const{themeId:e,defaultTheme:t,defaultClassName:n="MuiBox-root",generateClassName:i}=r,s=NB("div",{shouldForwardProp:o=>o!=="theme"&&o!=="sx"&&o!=="as"})(Ed);return M.forwardRef(function(l,u){const c=Eb(t),{className:h,component:m="div",...g}=o2(l);return F.jsx(s,{as:m,ref:u,className:It(h,i?i(n):n),theme:e&&c[e]||c,...g})})}const XX={active:"active",checked:"checked",completed:"completed",disabled:"disabled",error:"error",expanded:"expanded",focused:"focused",focusVisible:"focusVisible",open:"open",readOnly:"readOnly",required:"required",selected:"selected"};function YX(r,e,t="Mui"){const n=XX[e];return n?`${t}-${n}`:`${GX.generate(r)}-${e}`}function $B(r){const{variants:e,...t}=r,n={variants:e,style:RR(t),isProcessed:!0};return n.style===t||e&&e.forEach(i=>{typeof i.style!="function"&&(i.style=RR(i.style))}),n}const QX=wb();function s1(r){return r!=="ownerState"&&r!=="theme"&&r!=="sx"&&r!=="as"}function JX(r){return r?(e,t)=>t[r]:null}function ZX(r,e,t){r.theme=tY(r.theme)?t:r.theme[e]||r.theme}function g_(r,e){const t=typeof e=="function"?e(r):e;if(Array.isArray(t))return t.flatMap(n=>g_(r,n));if(Array.isArray(t?.variants)){let n;if(t.isProcessed)n=t.style;else{const{variants:i,...s}=t;n=s}return jB(r,t.variants,[n])}return t?.isProcessed?t.style:t}function jB(r,e,t=[]){let n;e:for(let i=0;i<e.length;i+=1){const s=e[i];if(typeof s.props=="function"){if(n??={...r,...r.ownerState,ownerState:r.ownerState},!s.props(n))continue}else for(const a in s.props)if(r[a]!==s.props[a]&&r.ownerState?.[a]!==s.props[a])continue e;typeof s.style=="function"?(n??={...r,...r.ownerState,ownerState:r.ownerState},t.push(s.style(n))):t.push(s.style)}return t}function zB(r={}){const{themeId:e,defaultTheme:t=QX,rootShouldForwardProp:n=s1,slotShouldForwardProp:i=s1}=r;function s(o){ZX(o,e,t)}return(o,l={})=>{NX(o,A=>A.filter(L=>L!==Ed));const{name:u,slot:c,skipVariantsResolver:h,skipSx:m,overridesResolver:g=JX(nY(c)),...y}=l,v=h!==void 0?h:c&&c!=="Root"&&c!=="root"||!1,x=m||!1;let w=s1;c==="Root"||c==="root"?w=n:c?w=i:rY(o)&&(w=void 0);const E=NB(o,{shouldForwardProp:w,label:eY(),...y}),D=A=>{if(typeof A=="function"&&A.__emotion_real!==A)return function(N){return g_(N,A)};if(_d(A)){const L=$B(A);return L.variants?function(U){return g_(U,L)}:L.style}return A},I=(...A)=>{const L=[],N=A.map(D),U=[];if(L.push(s),u&&g&&U.push(function(q){const Q=q.theme.components?.[u]?.styleOverrides;if(!Q)return null;const ie={};for(const le in Q)ie[le]=g_(q,Q[le]);return g(q,ie)}),u&&!v&&U.push(function(q){const Q=q.theme?.components?.[u]?.variants;return Q?jB(q,Q):null}),x||U.push(Ed),Array.isArray(N[0])){const H=N.shift(),q=new Array(L.length).fill(""),V=new Array(U.length).fill("");let Q;Q=[...q,...H,...V],Q.raw=[...q,...H.raw,...V],L.unshift(Q)}const B=[...L,...N,...U],k=E(...B);return o.muiName&&(k.muiName=o.muiName),k};return E.withConfig&&(I.withConfig=E.withConfig),I}}function eY(r,e){return void 0}function tY(r){for(const e in r)return!1;return!0}function rY(r){return typeof r=="string"&&r.charCodeAt(0)>96}function nY(r){return r&&r.charAt(0).toLowerCase()+r.slice(1)}const iY=zB();function W_(r,e){const t={...e};for(const n in r)if(Object.prototype.hasOwnProperty.call(r,n)){const i=n;if(i==="components"||i==="slots")t[i]={...r[i],...t[i]};else if(i==="componentsProps"||i==="slotProps"){const s=r[i],a=e[i];if(!a)t[i]=s||{};else if(!s)t[i]=a;else{t[i]={...a};for(const o in s)if(Object.prototype.hasOwnProperty.call(s,o)){const l=o;t[i][l]=W_(s[l],a[l])}}}else t[i]===void 0&&(t[i]=r[i])}return t}function HB(r){const{theme:e,name:t,props:n}=r;return!e||!e.components||!e.components[t]||!e.components[t].defaultProps?n:W_(e.components[t].defaultProps,n)}function sY({props:r,name:e,defaultTheme:t,themeId:n}){let i=Eb(t);return n&&(i=i[n]||i),HB({theme:i,name:e,props:r})}const VB=typeof window<"u"?M.useLayoutEffect:M.useEffect;function aY(r,e,t,n,i){const[s,a]=M.useState(()=>i&&t?t(r).matches:n?n(r).matches:e);return VB(()=>{if(!t)return;const o=t(r),l=()=>{a(o.matches)};return l(),o.addEventListener("change",l),()=>{o.removeEventListener("change",l)}},[r,t]),s}const oY={...P_},WB=oY.useSyncExternalStore;function lY(r,e,t,n,i){const s=M.useCallback(()=>e,[e]),a=M.useMemo(()=>{if(i&&t)return()=>t(r).matches;if(n!==null){const{matches:c}=n(r);return()=>c}return s},[s,r,n,i,t]),[o,l]=M.useMemo(()=>{if(t===null)return[s,()=>()=>{}];const c=t(r);return[()=>c.matches,h=>(c.addEventListener("change",h),()=>{c.removeEventListener("change",h)})]},[s,t,r]);return WB(l,o,a)}function qB(r={}){const{themeId:e}=r;return function(n,i={}){let s=g2();s&&e&&(s=s[e]||s);const a=typeof window<"u"&&typeof window.matchMedia<"u",{defaultMatches:o=!1,matchMedia:l=a?window.matchMedia:null,ssrMatchMedia:u=null,noSsr:c=!1}=HB({name:"MuiUseMediaQuery",props:i,theme:s});let h=typeof n=="function"?n(s):n;return h=h.replace(/^@media( ?)/m,""),h.includes("print")&&console.warn(["MUI: You have provided a `print` query to the `useMediaQuery` hook.","Using the print media query to modify print styles can lead to unexpected results.","Consider using the `displayPrint` field in the `sx` prop instead.","More information about `displayPrint` on our docs: https://mui.com/system/display/#display-in-print."].join(`
`)),(WB!==void 0?lY:aY)(h,o,l,u,c)}}qB();function uY(r,e=Number.MIN_SAFE_INTEGER,t=Number.MAX_SAFE_INTEGER){return Math.max(e,Math.min(r,t))}function v2(r,e=0,t=1){return uY(r,e,t)}function cY(r){r=r.slice(1);const e=new RegExp(`.{1,${r.length>=6?2:1}}`,"g");let t=r.match(e);return t&&t[0].length===1&&(t=t.map(n=>n+n)),t?`rgb${t.length===4?"a":""}(${t.map((n,i)=>i<3?parseInt(n,16):Math.round(parseInt(n,16)/255*1e3)/1e3).join(", ")})`:""}function kd(r){if(r.type)return r;if(r.charAt(0)==="#")return kd(cY(r));const e=r.indexOf("("),t=r.substring(0,e);if(!["rgb","rgba","hsl","hsla","color"].includes(t))throw new Error(JC(9,r));let n=r.substring(e+1,r.length-1),i;if(t==="color"){if(n=n.split(" "),i=n.shift(),n.length===4&&n[3].charAt(0)==="/"&&(n[3]=n[3].slice(1)),!["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].includes(i))throw new Error(JC(10,i))}else n=n.split(",");return n=n.map(s=>parseFloat(s)),{type:t,values:n,colorSpace:i}}const dY=r=>{const e=kd(r);return e.values.slice(0,3).map((t,n)=>e.type.includes("hsl")&&n!==0?`${t}%`:t).join(" ")},u0=(r,e)=>{try{return dY(r)}catch{return r}};function kb(r){const{type:e,colorSpace:t}=r;let{values:n}=r;return e.includes("rgb")?n=n.map((i,s)=>s<3?parseInt(i,10):i):e.includes("hsl")&&(n[1]=`${n[1]}%`,n[2]=`${n[2]}%`),e.includes("color")?n=`${t} ${n.join(" ")}`:n=`${n.join(", ")}`,`${e}(${n})`}function GB(r){r=kd(r);const{values:e}=r,t=e[0],n=e[1]/100,i=e[2]/100,s=n*Math.min(i,1-i),a=(u,c=(u+t/30)%12)=>i-s*Math.max(Math.min(c-3,9-c,1),-1);let o="rgb";const l=[Math.round(a(0)*255),Math.round(a(8)*255),Math.round(a(4)*255)];return r.type==="hsla"&&(o+="a",l.push(e[3])),kb({type:o,values:l})}function nw(r){r=kd(r);let e=r.type==="hsl"||r.type==="hsla"?kd(GB(r)).values:r.values;return e=e.map(t=>(r.type!=="color"&&(t/=255),t<=.03928?t/12.92:((t+.055)/1.055)**2.4)),Number((.2126*e[0]+.7152*e[1]+.0722*e[2]).toFixed(3))}function hY(r,e){const t=nw(r),n=nw(e);return(Math.max(t,n)+.05)/(Math.min(t,n)+.05)}function Xr(r,e){return r=kd(r),e=v2(e),(r.type==="rgb"||r.type==="hsl")&&(r.type+="a"),r.type==="color"?r.values[3]=`/${e}`:r.values[3]=e,kb(r)}function Hv(r,e,t){try{return Xr(r,e)}catch{return r}}function Eg(r,e){if(r=kd(r),e=v2(e),r.type.includes("hsl"))r.values[2]*=1-e;else if(r.type.includes("rgb")||r.type.includes("color"))for(let t=0;t<3;t+=1)r.values[t]*=1-e;return kb(r)}function Mn(r,e,t){try{return Eg(r,e)}catch{return r}}function kg(r,e){if(r=kd(r),e=v2(e),r.type.includes("hsl"))r.values[2]+=(100-r.values[2])*e;else if(r.type.includes("rgb"))for(let t=0;t<3;t+=1)r.values[t]+=(255-r.values[t])*e;else if(r.type.includes("color"))for(let t=0;t<3;t+=1)r.values[t]+=(1-r.values[t])*e;return kb(r)}function Fn(r,e,t){try{return kg(r,e)}catch{return r}}function KB(r,e=.15){return nw(r)>.5?Eg(r,e):kg(r,e)}function Vv(r,e,t){try{return KB(r,e)}catch{return r}}const XB=M.createContext(null);function y2(){return M.useContext(XB)}const fY=typeof Symbol=="function"&&Symbol.for,pY=fY?Symbol.for("mui.nested"):"__THEME_NESTED__";function mY(r,e){return typeof e=="function"?e(r):{...r,...e}}function gY(r){const{children:e,theme:t}=r,n=y2(),i=M.useMemo(()=>{const s=n===null?{...t}:mY(n,t);return s!=null&&(s[pY]=n!==null),s},[t,n]);return F.jsx(XB.Provider,{value:i,children:e})}const YB=M.createContext();function vY({value:r,...e}){return F.jsx(YB.Provider,{value:r??!0,...e})}const Ab=()=>M.useContext(YB)??!1,QB=M.createContext(void 0);function yY({value:r,children:e}){return F.jsx(QB.Provider,{value:r,children:e})}function _Y(r){const{theme:e,name:t,props:n}=r;if(!e||!e.components||!e.components[t])return n;const i=e.components[t];return i.defaultProps?W_(i.defaultProps,n):!i.styleOverrides&&!i.variants?W_(i,n):n}function xY({props:r,name:e}){const t=M.useContext(QB);return _Y({props:r,name:e,theme:{components:t}})}const OR={};function MR(r,e,t,n=!1){return M.useMemo(()=>{const i=r&&e[r]||e;if(typeof t=="function"){const s=t(i),a=r?{...e,[r]:s}:s;return n?()=>a:a}return r?{...e,[r]:t}:{...e,...t}},[r,e,t,n])}function JB(r){const{children:e,theme:t,themeId:n}=r,i=g2(OR),s=y2()||OR,a=MR(n,i,t),o=MR(n,s,t,!0),l=(n?a[n]:a).direction==="rtl";return F.jsx(gY,{theme:o,children:F.jsx(Cg.Provider,{value:a,children:F.jsx(vY,{value:l,children:F.jsx(yY,{value:n?a[n].components:a.components,children:e})})})})}const FR={theme:void 0};function bY(r){let e,t;return function(i){let s=e;return(s===void 0||i.theme!==t)&&(FR.theme=i.theme,s=$B(r(FR)),e=s,t=i.theme),s}}const _2="mode",x2="color-scheme",SY="data-color-scheme";function TY(r){const{defaultMode:e="system",defaultLightColorScheme:t="light",defaultDarkColorScheme:n="dark",modeStorageKey:i=_2,colorSchemeStorageKey:s=x2,attribute:a=SY,colorSchemeNode:o="document.documentElement",nonce:l}=r||{};let u="",c=a;if(a==="class"&&(c=".%s"),a==="data"&&(c="[data-%s]"),c.startsWith(".")){const m=c.substring(1);u+=`${o}.classList.remove('${m}'.replace('%s', light), '${m}'.replace('%s', dark));
      ${o}.classList.add('${m}'.replace('%s', colorScheme));`}const h=c.match(/\[([^\]]+)\]/);if(h){const[m,g]=h[1].split("=");g||(u+=`${o}.removeAttribute('${m}'.replace('%s', light));
      ${o}.removeAttribute('${m}'.replace('%s', dark));`),u+=`
      ${o}.setAttribute('${m}'.replace('%s', colorScheme), ${g?`${g}.replace('%s', colorScheme)`:'""'});`}else u+=`${o}.setAttribute('${c}', colorScheme);`;return F.jsx("script",{suppressHydrationWarning:!0,nonce:typeof window>"u"?l:"",dangerouslySetInnerHTML:{__html:`(function() {
try {
  let colorScheme = '';
  const mode = localStorage.getItem('${i}') || '${e}';
  const dark = localStorage.getItem('${s}-dark') || '${n}';
  const light = localStorage.getItem('${s}-light') || '${t}';
  if (mode === 'system') {
    // handle system mode
    const mql = window.matchMedia('(prefers-color-scheme: dark)');
    if (mql.matches) {
      colorScheme = dark
    } else {
      colorScheme = light
    }
  }
  if (mode === 'light') {
    colorScheme = light;
  }
  if (mode === 'dark') {
    colorScheme = dark;
  }
  if (colorScheme) {
    ${u}
  }
} catch(e){}})();`}},"mui-color-scheme-init")}function CY(){}const wY=({key:r,storageWindow:e})=>(!e&&typeof window<"u"&&(e=window),{get(t){if(typeof window>"u")return;if(!e)return t;let n;try{n=e.localStorage.getItem(r)}catch{}return n||t},set:t=>{if(e)try{e.localStorage.setItem(r,t)}catch{}},subscribe:t=>{if(!e)return CY;const n=i=>{const s=i.newValue;i.key===r&&t(s)};return e.addEventListener("storage",n),()=>{e.removeEventListener("storage",n)}}});function a1(){}function BR(r){if(typeof window<"u"&&typeof window.matchMedia=="function"&&r==="system")return window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}function ZB(r,e){if(r.mode==="light"||r.mode==="system"&&r.systemMode==="light")return e("light");if(r.mode==="dark"||r.mode==="system"&&r.systemMode==="dark")return e("dark")}function EY(r){return ZB(r,e=>{if(e==="light")return r.lightColorScheme;if(e==="dark")return r.darkColorScheme})}function kY(r){const{defaultMode:e="light",defaultLightColorScheme:t,defaultDarkColorScheme:n,supportedColorSchemes:i=[],modeStorageKey:s=_2,colorSchemeStorageKey:a=x2,storageWindow:o=typeof window>"u"?void 0:window,storageManager:l=wY,noSsr:u=!1}=r,c=i.join(","),h=i.length>1,m=M.useMemo(()=>l?.({key:s,storageWindow:o}),[l,s,o]),g=M.useMemo(()=>l?.({key:`${a}-light`,storageWindow:o}),[l,a,o]),y=M.useMemo(()=>l?.({key:`${a}-dark`,storageWindow:o}),[l,a,o]),[v,x]=M.useState(()=>{const U=m?.get(e)||e,B=g?.get(t)||t,k=y?.get(n)||n;return{mode:U,systemMode:BR(U),lightColorScheme:B,darkColorScheme:k}}),[w,E]=M.useState(u||!h);M.useEffect(()=>{E(!0)},[]);const D=EY(v),I=M.useCallback(U=>{x(B=>{if(U===B.mode)return B;const k=U??e;return m?.set(k),{...B,mode:k,systemMode:BR(k)}})},[m,e]),A=M.useCallback(U=>{U?typeof U=="string"?U&&!c.includes(U)?console.error(`\`${U}\` does not exist in \`theme.colorSchemes\`.`):x(B=>{const k={...B};return ZB(B,H=>{H==="light"&&(g?.set(U),k.lightColorScheme=U),H==="dark"&&(y?.set(U),k.darkColorScheme=U)}),k}):x(B=>{const k={...B},H=U.light===null?t:U.light,q=U.dark===null?n:U.dark;return H&&(c.includes(H)?(k.lightColorScheme=H,g?.set(H)):console.error(`\`${H}\` does not exist in \`theme.colorSchemes\`.`)),q&&(c.includes(q)?(k.darkColorScheme=q,y?.set(q)):console.error(`\`${q}\` does not exist in \`theme.colorSchemes\`.`)),k}):x(B=>(g?.set(t),y?.set(n),{...B,lightColorScheme:t,darkColorScheme:n}))},[c,g,y,t,n]),L=M.useCallback(U=>{v.mode==="system"&&x(B=>{const k=U?.matches?"dark":"light";return B.systemMode===k?B:{...B,systemMode:k}})},[v.mode]),N=M.useRef(L);return N.current=L,M.useEffect(()=>{if(typeof window.matchMedia!="function"||!h)return;const U=(...k)=>N.current(...k),B=window.matchMedia("(prefers-color-scheme: dark)");return B.addListener(U),U(B),()=>{B.removeListener(U)}},[h]),M.useEffect(()=>{if(h){const U=m?.subscribe(H=>{(!H||["light","dark","system"].includes(H))&&I(H||e)})||a1,B=g?.subscribe(H=>{(!H||c.match(H))&&A({light:H})})||a1,k=y?.subscribe(H=>{(!H||c.match(H))&&A({dark:H})})||a1;return()=>{U(),B(),k()}}},[A,I,c,e,o,h,m,g,y]),{...v,mode:w?v.mode:void 0,systemMode:w?v.systemMode:void 0,colorScheme:w?D:void 0,setMode:I,setColorScheme:A}}const AY="*{-webkit-transition:none!important;-moz-transition:none!important;-o-transition:none!important;-ms-transition:none!important;transition:none!important}";function DY(r){const{themeId:e,theme:t={},modeStorageKey:n=_2,colorSchemeStorageKey:i=x2,disableTransitionOnChange:s=!1,defaultColorScheme:a,resolveTheme:o}=r,l={allColorSchemes:[],colorScheme:void 0,darkColorScheme:void 0,lightColorScheme:void 0,mode:void 0,setColorScheme:()=>{},setMode:()=>{},systemMode:void 0},u=M.createContext(void 0),c=()=>M.useContext(u)||l,h={},m={};function g(w){const{children:E,theme:D,modeStorageKey:I=n,colorSchemeStorageKey:A=i,disableTransitionOnChange:L=s,storageManager:N,storageWindow:U=typeof window>"u"?void 0:window,documentNode:B=typeof document>"u"?void 0:document,colorSchemeNode:k=typeof document>"u"?void 0:document.documentElement,disableNestedContext:H=!1,disableStyleSheetGeneration:q=!1,defaultMode:V="system",forceThemeRerender:Q=!1,noSsr:ie}=w,le=M.useRef(!1),he=y2(),ae=M.useContext(u),ne=!!ae&&!H,ue=M.useMemo(()=>D||(typeof t=="function"?t():t),[D]),ee=ue[e],pe=ee||ue,{colorSchemes:me=h,components:xe=m,cssVarPrefix:Be}=pe,Oe=Object.keys(me).filter(ur=>!!me[ur]).join(","),dt=M.useMemo(()=>Oe.split(","),[Oe]),Ke=typeof a=="string"?a:a.light,_t=typeof a=="string"?a:a.dark,Ze=me[Ke]&&me[_t]?V:me[pe.defaultColorScheme]?.palette?.mode||pe.palette?.mode,{mode:Ot,setMode:Nt,systemMode:qe,lightColorScheme:Ue,darkColorScheme:Pe,colorScheme:$e,setColorScheme:rt}=kY({supportedColorSchemes:dt,defaultLightColorScheme:Ke,defaultDarkColorScheme:_t,modeStorageKey:I,colorSchemeStorageKey:A,defaultMode:Ze,storageManager:N,storageWindow:U,noSsr:ie});let lt=Ot,ht=$e;ne&&(lt=ae.mode,ht=ae.colorScheme);let ut=ht||pe.defaultColorScheme;pe.vars&&!Q&&(ut=pe.defaultColorScheme);const St=M.useMemo(()=>{const ur=pe.generateThemeVars?.()||pe.vars,Wt={...pe,components:xe,colorSchemes:me,cssVarPrefix:Be,vars:ur};if(typeof Wt.generateSpacing=="function"&&(Wt.spacing=Wt.generateSpacing()),ut){const mr=me[ut];mr&&typeof mr=="object"&&Object.keys(mr).forEach(Tr=>{mr[Tr]&&typeof mr[Tr]=="object"?Wt[Tr]={...Wt[Tr],...mr[Tr]}:Wt[Tr]=mr[Tr]})}return o?o(Wt):Wt},[pe,ut,xe,me,Be]),ot=pe.colorSchemeSelector;VB(()=>{if(ht&&k&&ot&&ot!=="media"){const ur=ot;let Wt=ot;if(ur==="class"&&(Wt=".%s"),ur==="data"&&(Wt="[data-%s]"),ur?.startsWith("data-")&&!ur.includes("%s")&&(Wt=`[${ur}="%s"]`),Wt.startsWith("."))k.classList.remove(...dt.map(mr=>Wt.substring(1).replace("%s",mr))),k.classList.add(Wt.substring(1).replace("%s",ht));else{const mr=Wt.replace("%s",ht).match(/\[([^\]]+)\]/);if(mr){const[Tr,Nr]=mr[1].split("=");Nr||dt.forEach(Tt=>{k.removeAttribute(Tr.replace(ht,Tt))}),k.setAttribute(Tr,Nr?Nr.replace(/"|'/g,""):"")}else k.setAttribute(Wt,ht)}}},[ht,ot,k,dt]),M.useEffect(()=>{let ur;if(L&&le.current&&B){const Wt=B.createElement("style");Wt.appendChild(B.createTextNode(AY)),B.head.appendChild(Wt),window.getComputedStyle(B.body),ur=setTimeout(()=>{B.head.removeChild(Wt)},1)}return()=>{clearTimeout(ur)}},[ht,L,B]),M.useEffect(()=>(le.current=!0,()=>{le.current=!1}),[]);const yr=M.useMemo(()=>({allColorSchemes:dt,colorScheme:ht,darkColorScheme:Pe,lightColorScheme:Ue,mode:lt,setColorScheme:rt,setMode:Nt,systemMode:qe}),[dt,ht,Pe,Ue,lt,rt,Nt,qe,St.colorSchemeSelector]);let pr=!0;(q||pe.cssVariables===!1||ne&&he?.cssVarPrefix===Be)&&(pr=!1);const jr=F.jsxs(M.Fragment,{children:[F.jsx(JB,{themeId:ee?e:void 0,theme:St,children:E}),pr&&F.jsx(BB,{styles:St.generateStyleSheets?.()||[]})]});return ne?jr:F.jsx(u.Provider,{value:yr,children:jr})}const y=typeof a=="string"?a:a.light,v=typeof a=="string"?a:a.dark;return{CssVarsProvider:g,useColorScheme:c,getInitColorSchemeScript:w=>TY({colorSchemeStorageKey:i,defaultLightColorScheme:y,defaultDarkColorScheme:v,modeStorageKey:n,...w})}}function IY(r=""){function e(...n){if(!n.length)return"";const i=n[0];return typeof i=="string"&&!i.match(/(#|\(|\)|(-?(\d*\.)?\d+)(px|em|%|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc))|^(-?(\d*\.)?\d+)$|(\d+ \d+ \d+)/)?`, var(--${r?`${r}-`:""}${i}${e(...n.slice(1))})`:`, ${i}`}return(n,...i)=>`var(--${r?`${r}-`:""}${n}${e(...i)})`}const NR=(r,e,t,n=[])=>{let i=r;e.forEach((s,a)=>{a===e.length-1?Array.isArray(i)?i[Number(s)]=t:i&&typeof i=="object"&&(i[s]=t):i&&typeof i=="object"&&(i[s]||(i[s]=n.includes(s)?[]:{}),i=i[s])})},PY=(r,e,t)=>{function n(i,s=[],a=[]){Object.entries(i).forEach(([o,l])=>{(!t||t&&!t([...s,o]))&&l!=null&&(typeof l=="object"&&Object.keys(l).length>0?n(l,[...s,o],Array.isArray(l)?[...a,o]:a):e([...s,o],l,a))})}n(r)},RY=(r,e)=>typeof e=="number"?["lineHeight","fontWeight","opacity","zIndex"].some(n=>r.includes(n))||r[r.length-1].toLowerCase().includes("opacity")?e:`${e}px`:e;function o1(r,e){const{prefix:t,shouldSkipGeneratingVar:n}=e||{},i={},s={},a={};return PY(r,(o,l,u)=>{if((typeof l=="string"||typeof l=="number")&&(!n||!n(o,l))){const c=`--${t?`${t}-`:""}${o.join("-")}`,h=RY(o,l);Object.assign(i,{[c]:h}),NR(s,o,`var(${c})`,u),NR(a,o,`var(${c}, ${h})`,u)}},o=>o[0]==="vars"),{css:i,vars:s,varsWithDefaults:a}}function LY(r,e={}){const{getSelector:t=x,disableCssColorScheme:n,colorSchemeSelector:i}=e,{colorSchemes:s={},components:a,defaultColorScheme:o="light",...l}=r,{vars:u,css:c,varsWithDefaults:h}=o1(l,e);let m=h;const g={},{[o]:y,...v}=s;if(Object.entries(v||{}).forEach(([D,I])=>{const{vars:A,css:L,varsWithDefaults:N}=o1(I,e);m=vc(m,N),g[D]={css:L,vars:A}}),y){const{css:D,vars:I,varsWithDefaults:A}=o1(y,e);m=vc(m,A),g[o]={css:D,vars:I}}function x(D,I){let A=i;if(i==="class"&&(A=".%s"),i==="data"&&(A="[data-%s]"),i?.startsWith("data-")&&!i.includes("%s")&&(A=`[${i}="%s"]`),D){if(A==="media")return r.defaultColorScheme===D?":root":{[`@media (prefers-color-scheme: ${s[D]?.palette?.mode||D})`]:{":root":I}};if(A)return r.defaultColorScheme===D?`:root, ${A.replace("%s",String(D))}`:A.replace("%s",String(D))}return":root"}return{vars:m,generateThemeVars:()=>{let D={...u};return Object.entries(g).forEach(([,{vars:I}])=>{D=vc(D,I)}),D},generateStyleSheets:()=>{const D=[],I=r.defaultColorScheme||"light";function A(U,B){Object.keys(B).length&&D.push(typeof U=="string"?{[U]:{...B}}:U)}A(t(void 0,{...c}),c);const{[I]:L,...N}=g;if(L){const{css:U}=L,B=s[I]?.palette?.mode,k=!n&&B?{colorScheme:B,...U}:{...U};A(t(I,{...k}),k)}return Object.entries(N).forEach(([U,{css:B}])=>{const k=s[U]?.palette?.mode,H=!n&&k?{colorScheme:k,...B}:{...B};A(t(U,{...H}),H)}),D}}}function OY(r){return function(t){return r==="media"?`@media (prefers-color-scheme: ${t})`:r?r.startsWith("data-")&&!r.includes("%s")?`[${r}="${t}"] &`:r==="class"?`.${t} &`:r==="data"?`[data-${t}] &`:`${r.replace("%s",t)} &`:"&"}}function MY(r,e,t=void 0){const n={};for(const i in r){const s=r[i];let a="",o=!0;for(let l=0;l<s.length;l+=1){const u=s[l];u&&(a+=(o===!0?"":" ")+e(u),o=!1,t&&t[u]&&(a+=" "+t[u]))}n[i]=a}return n}const FY=wb(),BY=iY("div",{name:"MuiStack",slot:"Root"});function NY(r){return sY({props:r,name:"MuiStack",defaultTheme:FY})}function UY(r,e){const t=M.Children.toArray(r).filter(Boolean);return t.reduce((n,i,s)=>(n.push(i),s<t.length-1&&n.push(M.cloneElement(e,{key:`separator-${s}`})),n),[])}const $Y=r=>({row:"Left","row-reverse":"Right",column:"Top","column-reverse":"Bottom"})[r],jY=({ownerState:r,theme:e})=>{let t={display:"flex",flexDirection:"column",...El({theme:e},t1({values:r.direction,breakpoints:e.breakpoints.values}),n=>({flexDirection:n}))};if(r.spacing){const n=gb(e),i=Object.keys(e.breakpoints.values).reduce((l,u)=>((typeof r.spacing=="object"&&r.spacing[u]!=null||typeof r.direction=="object"&&r.direction[u]!=null)&&(l[u]=!0),l),{}),s=t1({values:r.direction,base:i}),a=t1({values:r.spacing,base:i});typeof s=="object"&&Object.keys(s).forEach((l,u,c)=>{if(!s[l]){const m=u>0?s[c[u-1]]:"column";s[l]=m}}),t=vc(t,El({theme:e},a,(l,u)=>r.useFlexGap?{gap:Wh(n,l)}:{"& > :not(style):not(style)":{margin:0},"& > :not(style) ~ :not(style)":{[`margin${$Y(u?s[u]:r.direction)}`]:Wh(n,l)}}))}return t=JG(e.breakpoints,t),t};function zY(r={}){const{createStyledComponent:e=BY,useThemeProps:t=NY,componentName:n="MuiStack"}=r,i=()=>MY({root:["root"]},l=>YX(n,l),{}),s=e(jY);return M.forwardRef(function(l,u){const c=t(l),h=o2(c),{component:m="div",direction:g="column",spacing:y=0,divider:v,children:x,className:w,useFlexGap:E=!1,...D}=h,I={direction:g,spacing:y,useFlexGap:E},A=i();return F.jsx(s,{as:m,ownerState:I,ref:u,className:It(A.root,w),...D,children:v?UY(x,v):x})})}function qh(r,...e){const t=new URL(`https://mui.com/production-error/?code=${r}`);return e.forEach(n=>t.searchParams.append("args[]",n)),`Minified MUI error #${r}; visit ${t} for the full message.`}function xd(r){if(typeof r!="object"||r===null)return!1;const e=Object.getPrototypeOf(r);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in r)&&!(Symbol.iterator in r)}function e8(r){if(M.isValidElement(r)||fb.isValidElementType(r)||!xd(r))return r;const e={};return Object.keys(r).forEach(t=>{e[t]=e8(r[t])}),e}function xu(r,e,t={clone:!0}){const n=t.clone?{...r}:r;return xd(r)&&xd(e)&&Object.keys(e).forEach(i=>{M.isValidElement(e[i])||fb.isValidElementType(e[i])?n[i]=e[i]:xd(e[i])&&Object.prototype.hasOwnProperty.call(r,i)&&xd(r[i])?n[i]=xu(r[i],e[i],t):t.clone?n[i]=xd(e[i])?e8(e[i]):e[i]:n[i]=e[i]}),n}const X0={black:"#000",white:"#fff"},HY={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"},Tf={50:"#f3e5f5",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",700:"#7b1fa2"},Cf={300:"#e57373",400:"#ef5350",500:"#f44336",700:"#d32f2f",800:"#c62828"},Wm={300:"#ffb74d",400:"#ffa726",500:"#ff9800",700:"#f57c00",900:"#e65100"},wf={50:"#e3f2fd",200:"#90caf9",400:"#42a5f5",700:"#1976d2",800:"#1565c0"},Ef={300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",700:"#0288d1",900:"#01579b"},pd={300:"#81c784",400:"#66bb6a",500:"#4caf50",700:"#388e3c",800:"#2e7d32",900:"#1b5e20"};function t8(){return{text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:X0.white,default:X0.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}}}const VY=t8();function r8(){return{text:{primary:X0.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:X0.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}}}const UR=r8();function $R(r,e,t,n){const i=n.light||n,s=n.dark||n*1.5;r[e]||(r.hasOwnProperty(t)?r[e]=r[t]:e==="light"?r.light=kg(r.main,i):e==="dark"&&(r.dark=Eg(r.main,s)))}function WY(r="light"){return r==="dark"?{main:wf[200],light:wf[50],dark:wf[400]}:{main:wf[700],light:wf[400],dark:wf[800]}}function qY(r="light"){return r==="dark"?{main:Tf[200],light:Tf[50],dark:Tf[400]}:{main:Tf[500],light:Tf[300],dark:Tf[700]}}function GY(r="light"){return r==="dark"?{main:Cf[500],light:Cf[300],dark:Cf[700]}:{main:Cf[700],light:Cf[400],dark:Cf[800]}}function KY(r="light"){return r==="dark"?{main:Ef[400],light:Ef[300],dark:Ef[700]}:{main:Ef[700],light:Ef[500],dark:Ef[900]}}function XY(r="light"){return r==="dark"?{main:pd[400],light:pd[300],dark:pd[700]}:{main:pd[800],light:pd[500],dark:pd[900]}}function YY(r="light"){return r==="dark"?{main:Wm[400],light:Wm[300],dark:Wm[700]}:{main:"#ed6c02",light:Wm[500],dark:Wm[900]}}function b2(r){const{mode:e="light",contrastThreshold:t=3,tonalOffset:n=.2,...i}=r,s=r.primary||WY(e),a=r.secondary||qY(e),o=r.error||GY(e),l=r.info||KY(e),u=r.success||XY(e),c=r.warning||YY(e);function h(v){return hY(v,UR.text.primary)>=t?UR.text.primary:VY.text.primary}const m=({color:v,name:x,mainShade:w=500,lightShade:E=300,darkShade:D=700})=>{if(v={...v},!v.main&&v[w]&&(v.main=v[w]),!v.hasOwnProperty("main"))throw new Error(qh(11,x?` (${x})`:"",w));if(typeof v.main!="string")throw new Error(qh(12,x?` (${x})`:"",JSON.stringify(v.main)));return $R(v,"light",E,n),$R(v,"dark",D,n),v.contrastText||(v.contrastText=h(v.main)),v};let g;return e==="light"?g=t8():e==="dark"&&(g=r8()),xu({common:{...X0},mode:e,primary:m({color:s,name:"primary"}),secondary:m({color:a,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:m({color:o,name:"error"}),warning:m({color:c,name:"warning"}),info:m({color:l,name:"info"}),success:m({color:u,name:"success"}),grey:HY,contrastThreshold:t,getContrastText:h,augmentColor:m,tonalOffset:n,...g},i)}function QY(r){const e={};return Object.entries(r).forEach(n=>{const[i,s]=n;typeof s=="object"&&(e[i]=`${s.fontStyle?`${s.fontStyle} `:""}${s.fontVariant?`${s.fontVariant} `:""}${s.fontWeight?`${s.fontWeight} `:""}${s.fontStretch?`${s.fontStretch} `:""}${s.fontSize||""}${s.lineHeight?`/${s.lineHeight} `:""}${s.fontFamily||""}`)}),e}const jR=r=>r,JY=()=>{let r=jR;return{configure(e){r=e},generate(e){return r(e)},reset(){r=jR}}},n8=JY(),ZY={active:"active",checked:"checked",completed:"completed",disabled:"disabled",error:"error",expanded:"expanded",focused:"focused",focusVisible:"focusVisible",open:"open",readOnly:"readOnly",required:"required",selected:"selected"};function nr(r,e,t="Mui"){const n=ZY[e];return n?`${t}-${n}`:`${n8.generate(r)}-${e}`}function eQ(r,e){return{toolbar:{minHeight:56,[r.up("xs")]:{"@media (orientation: landscape)":{minHeight:48}},[r.up("sm")]:{minHeight:64}},...e}}function tQ(r){return Math.round(r*1e5)/1e5}const zR={textTransform:"uppercase"},HR='"Roboto", "Helvetica", "Arial", sans-serif';function i8(r,e){const{fontFamily:t=HR,fontSize:n=14,fontWeightLight:i=300,fontWeightRegular:s=400,fontWeightMedium:a=500,fontWeightBold:o=700,htmlFontSize:l=16,allVariants:u,pxToRem:c,...h}=typeof e=="function"?e(r):e,m=n/14,g=c||(x=>`${x/l*m}rem`),y=(x,w,E,D,I)=>({fontFamily:t,fontWeight:x,fontSize:g(w),lineHeight:E,...t===HR?{letterSpacing:`${tQ(D/w)}em`}:{},...I,...u}),v={h1:y(i,96,1.167,-1.5),h2:y(i,60,1.2,-.5),h3:y(s,48,1.167,0),h4:y(s,34,1.235,.25),h5:y(s,24,1.334,0),h6:y(a,20,1.6,.15),subtitle1:y(s,16,1.75,.15),subtitle2:y(a,14,1.57,.1),body1:y(s,16,1.5,.15),body2:y(s,14,1.43,.15),button:y(a,14,1.75,.4,zR),caption:y(s,12,1.66,.4),overline:y(s,12,2.66,1,zR),inherit:{fontFamily:"inherit",fontWeight:"inherit",fontSize:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}};return xu({htmlFontSize:l,pxToRem:g,fontFamily:t,fontSize:n,fontWeightLight:i,fontWeightRegular:s,fontWeightMedium:a,fontWeightBold:o,...v},h,{clone:!1})}const rQ=.2,nQ=.14,iQ=.12;function Kn(...r){return[`${r[0]}px ${r[1]}px ${r[2]}px ${r[3]}px rgba(0,0,0,${rQ})`,`${r[4]}px ${r[5]}px ${r[6]}px ${r[7]}px rgba(0,0,0,${nQ})`,`${r[8]}px ${r[9]}px ${r[10]}px ${r[11]}px rgba(0,0,0,${iQ})`].join(",")}const sQ=["none",Kn(0,2,1,-1,0,1,1,0,0,1,3,0),Kn(0,3,1,-2,0,2,2,0,0,1,5,0),Kn(0,3,3,-2,0,3,4,0,0,1,8,0),Kn(0,2,4,-1,0,4,5,0,0,1,10,0),Kn(0,3,5,-1,0,5,8,0,0,1,14,0),Kn(0,3,5,-1,0,6,10,0,0,1,18,0),Kn(0,4,5,-2,0,7,10,1,0,2,16,1),Kn(0,5,5,-3,0,8,10,1,0,3,14,2),Kn(0,5,6,-3,0,9,12,1,0,3,16,2),Kn(0,6,6,-3,0,10,14,1,0,4,18,3),Kn(0,6,7,-4,0,11,15,1,0,4,20,3),Kn(0,7,8,-4,0,12,17,2,0,5,22,4),Kn(0,7,8,-4,0,13,19,2,0,5,24,4),Kn(0,7,9,-4,0,14,21,2,0,5,26,4),Kn(0,8,9,-5,0,15,22,2,0,6,28,5),Kn(0,8,10,-5,0,16,24,2,0,6,30,5),Kn(0,8,11,-5,0,17,26,2,0,6,32,5),Kn(0,9,11,-5,0,18,28,2,0,7,34,6),Kn(0,9,12,-6,0,19,29,2,0,7,36,6),Kn(0,10,13,-6,0,20,31,3,0,8,38,7),Kn(0,10,13,-6,0,21,33,3,0,8,40,7),Kn(0,10,14,-6,0,22,35,3,0,8,42,7),Kn(0,11,14,-7,0,23,36,3,0,9,44,8),Kn(0,11,15,-7,0,24,38,3,0,9,46,8)],aQ={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},s8={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function VR(r){return`${Math.round(r)}ms`}function oQ(r){if(!r)return 0;const e=r/36;return Math.min(Math.round((4+15*e**.25+e/5)*10),3e3)}function lQ(r){const e={...aQ,...r.easing},t={...s8,...r.duration};return{getAutoHeightDuration:oQ,create:(i=["all"],s={})=>{const{duration:a=t.standard,easing:o=e.easeInOut,delay:l=0,...u}=s;return(Array.isArray(i)?i:[i]).map(c=>`${c} ${typeof a=="string"?a:VR(a)} ${o} ${typeof l=="string"?l:VR(l)}`).join(",")},...r,easing:e,duration:t}}const uQ={mobileStepper:1e3,fab:1050,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500};function cQ(r){return xd(r)||typeof r>"u"||typeof r=="string"||typeof r=="boolean"||typeof r=="number"||Array.isArray(r)}function a8(r={}){const e={...r};function t(n){const i=Object.entries(n);for(let s=0;s<i.length;s++){const[a,o]=i[s];!cQ(o)||a.startsWith("unstable_")?delete n[a]:xd(o)&&(n[a]={...o},t(n[a]))}}return t(e),`import { unstable_createBreakpoints as createBreakpoints, createTransitions } from '@mui/material/styles';

const theme = ${JSON.stringify(e,null,2)};

theme.breakpoints = createBreakpoints(theme.breakpoints || {});
theme.transitions = createTransitions(theme.transitions || {});

export default theme;`}function iw(r={},...e){const{breakpoints:t,mixins:n={},spacing:i,palette:s={},transitions:a={},typography:o={},shape:l,...u}=r;if(r.vars&&r.generateThemeVars===void 0)throw new Error(qh(20));const c=b2(s),h=wb(r);let m=xu(h,{mixins:eQ(h.breakpoints,n),palette:c,shadows:sQ.slice(),typography:i8(c,o),transitions:lQ(a),zIndex:{...uQ}});return m=xu(m,u),m=e.reduce((g,y)=>xu(g,y),m),m.unstable_sxConfig={...bg,...u?.unstable_sxConfig},m.unstable_sx=function(y){return Ed({sx:y,theme:this})},m.toRuntimeSource=a8,m}function sw(r){let e;return r<1?e=5.11916*r**2:e=4.5*Math.log(r+1)+2,Math.round(e*10)/1e3}const dQ=[...Array(25)].map((r,e)=>{if(e===0)return"none";const t=sw(e);return`linear-gradient(rgba(255 255 255 / ${t}), rgba(255 255 255 / ${t}))`});function o8(r){return{inputPlaceholder:r==="dark"?.5:.42,inputUnderline:r==="dark"?.7:.42,switchTrackDisabled:r==="dark"?.2:.12,switchTrack:r==="dark"?.3:.38}}function l8(r){return r==="dark"?dQ:[]}function hQ(r){const{palette:e={mode:"light"},opacity:t,overlays:n,...i}=r,s=b2(e);return{palette:s,opacity:{...o8(s.mode),...t},overlays:n||l8(s.mode),...i}}function fQ(r){return!!r[0].match(/(cssVarPrefix|colorSchemeSelector|rootSelector|typography|mixins|breakpoints|direction|transitions)/)||!!r[0].match(/sxConfig$/)||r[0]==="palette"&&!!r[1]?.match(/(mode|contrastThreshold|tonalOffset)/)}const pQ=r=>[...[...Array(25)].map((e,t)=>`--${r?`${r}-`:""}overlays-${t}`),`--${r?`${r}-`:""}palette-AppBar-darkBg`,`--${r?`${r}-`:""}palette-AppBar-darkColor`],mQ=r=>(e,t)=>{const n=r.rootSelector||":root",i=r.colorSchemeSelector;let s=i;if(i==="class"&&(s=".%s"),i==="data"&&(s="[data-%s]"),i?.startsWith("data-")&&!i.includes("%s")&&(s=`[${i}="%s"]`),r.defaultColorScheme===e){if(e==="dark"){const a={};return pQ(r.cssVarPrefix).forEach(o=>{a[o]=t[o],delete t[o]}),s==="media"?{[n]:t,"@media (prefers-color-scheme: dark)":{[n]:a}}:s?{[s.replace("%s",e)]:a,[`${n}, ${s.replace("%s",e)}`]:t}:{[n]:{...t,...a}}}if(s&&s!=="media")return`${n}, ${s.replace("%s",String(e))}`}else if(e){if(s==="media")return{[`@media (prefers-color-scheme: ${String(e)})`]:{[n]:t}};if(s)return s.replace("%s",String(e))}return n};function gQ(r,e){e.forEach(t=>{r[t]||(r[t]={})})}function ct(r,e,t){!r[e]&&t&&(r[e]=t)}function c0(r){return typeof r!="string"||!r.startsWith("hsl")?r:GB(r)}function nc(r,e){`${e}Channel`in r||(r[`${e}Channel`]=u0(c0(r[e])))}function vQ(r){return typeof r=="number"?`${r}px`:typeof r=="string"||typeof r=="function"||Array.isArray(r)?r:"8px"}const Jl=r=>{try{return r()}catch{}},yQ=(r="mui")=>IY(r);function l1(r,e,t,n){if(!e)return;e=e===!0?{}:e;const i=n==="dark"?"dark":"light";if(!t){r[n]=hQ({...e,palette:{mode:i,...e?.palette}});return}const{palette:s,...a}=iw({...t,palette:{mode:i,...e?.palette}});return r[n]={...e,palette:s,opacity:{...o8(i),...e?.opacity},overlays:e?.overlays||l8(i)},a}function _Q(r={},...e){const{colorSchemes:t={light:!0},defaultColorScheme:n,disableCssColorScheme:i=!1,cssVarPrefix:s="mui",shouldSkipGeneratingVar:a=fQ,colorSchemeSelector:o=t.light&&t.dark?"media":void 0,rootSelector:l=":root",...u}=r,c=Object.keys(t)[0],h=n||(t.light&&c!=="light"?"light":c),m=yQ(s),{[h]:g,light:y,dark:v,...x}=t,w={...x};let E=g;if((h==="dark"&&!("dark"in t)||h==="light"&&!("light"in t))&&(E=!0),!E)throw new Error(qh(21,h));const D=l1(w,E,u,h);y&&!w.light&&l1(w,y,void 0,"light"),v&&!w.dark&&l1(w,v,void 0,"dark");let I={defaultColorScheme:h,...D,cssVarPrefix:s,colorSchemeSelector:o,rootSelector:l,getCssVar:m,colorSchemes:w,font:{...QY(D.typography),...D.font},spacing:vQ(u.spacing)};Object.keys(I.colorSchemes).forEach(B=>{const k=I.colorSchemes[B].palette,H=q=>{const V=q.split("-"),Q=V[1],ie=V[2];return m(q,k[Q][ie])};if(k.mode==="light"&&(ct(k.common,"background","#fff"),ct(k.common,"onBackground","#000")),k.mode==="dark"&&(ct(k.common,"background","#000"),ct(k.common,"onBackground","#fff")),gQ(k,["Alert","AppBar","Avatar","Button","Chip","FilledInput","LinearProgress","Skeleton","Slider","SnackbarContent","SpeedDialAction","StepConnector","StepContent","Switch","TableCell","Tooltip"]),k.mode==="light"){ct(k.Alert,"errorColor",Mn(k.error.light,.6)),ct(k.Alert,"infoColor",Mn(k.info.light,.6)),ct(k.Alert,"successColor",Mn(k.success.light,.6)),ct(k.Alert,"warningColor",Mn(k.warning.light,.6)),ct(k.Alert,"errorFilledBg",H("palette-error-main")),ct(k.Alert,"infoFilledBg",H("palette-info-main")),ct(k.Alert,"successFilledBg",H("palette-success-main")),ct(k.Alert,"warningFilledBg",H("palette-warning-main")),ct(k.Alert,"errorFilledColor",Jl(()=>k.getContrastText(k.error.main))),ct(k.Alert,"infoFilledColor",Jl(()=>k.getContrastText(k.info.main))),ct(k.Alert,"successFilledColor",Jl(()=>k.getContrastText(k.success.main))),ct(k.Alert,"warningFilledColor",Jl(()=>k.getContrastText(k.warning.main))),ct(k.Alert,"errorStandardBg",Fn(k.error.light,.9)),ct(k.Alert,"infoStandardBg",Fn(k.info.light,.9)),ct(k.Alert,"successStandardBg",Fn(k.success.light,.9)),ct(k.Alert,"warningStandardBg",Fn(k.warning.light,.9)),ct(k.Alert,"errorIconColor",H("palette-error-main")),ct(k.Alert,"infoIconColor",H("palette-info-main")),ct(k.Alert,"successIconColor",H("palette-success-main")),ct(k.Alert,"warningIconColor",H("palette-warning-main")),ct(k.AppBar,"defaultBg",H("palette-grey-100")),ct(k.Avatar,"defaultBg",H("palette-grey-400")),ct(k.Button,"inheritContainedBg",H("palette-grey-300")),ct(k.Button,"inheritContainedHoverBg",H("palette-grey-A100")),ct(k.Chip,"defaultBorder",H("palette-grey-400")),ct(k.Chip,"defaultAvatarColor",H("palette-grey-700")),ct(k.Chip,"defaultIconColor",H("palette-grey-700")),ct(k.FilledInput,"bg","rgba(0, 0, 0, 0.06)"),ct(k.FilledInput,"hoverBg","rgba(0, 0, 0, 0.09)"),ct(k.FilledInput,"disabledBg","rgba(0, 0, 0, 0.12)"),ct(k.LinearProgress,"primaryBg",Fn(k.primary.main,.62)),ct(k.LinearProgress,"secondaryBg",Fn(k.secondary.main,.62)),ct(k.LinearProgress,"errorBg",Fn(k.error.main,.62)),ct(k.LinearProgress,"infoBg",Fn(k.info.main,.62)),ct(k.LinearProgress,"successBg",Fn(k.success.main,.62)),ct(k.LinearProgress,"warningBg",Fn(k.warning.main,.62)),ct(k.Skeleton,"bg",`rgba(${H("palette-text-primaryChannel")} / 0.11)`),ct(k.Slider,"primaryTrack",Fn(k.primary.main,.62)),ct(k.Slider,"secondaryTrack",Fn(k.secondary.main,.62)),ct(k.Slider,"errorTrack",Fn(k.error.main,.62)),ct(k.Slider,"infoTrack",Fn(k.info.main,.62)),ct(k.Slider,"successTrack",Fn(k.success.main,.62)),ct(k.Slider,"warningTrack",Fn(k.warning.main,.62));const q=Vv(k.background.default,.8);ct(k.SnackbarContent,"bg",q),ct(k.SnackbarContent,"color",Jl(()=>k.getContrastText(q))),ct(k.SpeedDialAction,"fabHoverBg",Vv(k.background.paper,.15)),ct(k.StepConnector,"border",H("palette-grey-400")),ct(k.StepContent,"border",H("palette-grey-400")),ct(k.Switch,"defaultColor",H("palette-common-white")),ct(k.Switch,"defaultDisabledColor",H("palette-grey-100")),ct(k.Switch,"primaryDisabledColor",Fn(k.primary.main,.62)),ct(k.Switch,"secondaryDisabledColor",Fn(k.secondary.main,.62)),ct(k.Switch,"errorDisabledColor",Fn(k.error.main,.62)),ct(k.Switch,"infoDisabledColor",Fn(k.info.main,.62)),ct(k.Switch,"successDisabledColor",Fn(k.success.main,.62)),ct(k.Switch,"warningDisabledColor",Fn(k.warning.main,.62)),ct(k.TableCell,"border",Fn(Hv(k.divider,1),.88)),ct(k.Tooltip,"bg",Hv(k.grey[700],.92))}if(k.mode==="dark"){ct(k.Alert,"errorColor",Fn(k.error.light,.6)),ct(k.Alert,"infoColor",Fn(k.info.light,.6)),ct(k.Alert,"successColor",Fn(k.success.light,.6)),ct(k.Alert,"warningColor",Fn(k.warning.light,.6)),ct(k.Alert,"errorFilledBg",H("palette-error-dark")),ct(k.Alert,"infoFilledBg",H("palette-info-dark")),ct(k.Alert,"successFilledBg",H("palette-success-dark")),ct(k.Alert,"warningFilledBg",H("palette-warning-dark")),ct(k.Alert,"errorFilledColor",Jl(()=>k.getContrastText(k.error.dark))),ct(k.Alert,"infoFilledColor",Jl(()=>k.getContrastText(k.info.dark))),ct(k.Alert,"successFilledColor",Jl(()=>k.getContrastText(k.success.dark))),ct(k.Alert,"warningFilledColor",Jl(()=>k.getContrastText(k.warning.dark))),ct(k.Alert,"errorStandardBg",Mn(k.error.light,.9)),ct(k.Alert,"infoStandardBg",Mn(k.info.light,.9)),ct(k.Alert,"successStandardBg",Mn(k.success.light,.9)),ct(k.Alert,"warningStandardBg",Mn(k.warning.light,.9)),ct(k.Alert,"errorIconColor",H("palette-error-main")),ct(k.Alert,"infoIconColor",H("palette-info-main")),ct(k.Alert,"successIconColor",H("palette-success-main")),ct(k.Alert,"warningIconColor",H("palette-warning-main")),ct(k.AppBar,"defaultBg",H("palette-grey-900")),ct(k.AppBar,"darkBg",H("palette-background-paper")),ct(k.AppBar,"darkColor",H("palette-text-primary")),ct(k.Avatar,"defaultBg",H("palette-grey-600")),ct(k.Button,"inheritContainedBg",H("palette-grey-800")),ct(k.Button,"inheritContainedHoverBg",H("palette-grey-700")),ct(k.Chip,"defaultBorder",H("palette-grey-700")),ct(k.Chip,"defaultAvatarColor",H("palette-grey-300")),ct(k.Chip,"defaultIconColor",H("palette-grey-300")),ct(k.FilledInput,"bg","rgba(255, 255, 255, 0.09)"),ct(k.FilledInput,"hoverBg","rgba(255, 255, 255, 0.13)"),ct(k.FilledInput,"disabledBg","rgba(255, 255, 255, 0.12)"),ct(k.LinearProgress,"primaryBg",Mn(k.primary.main,.5)),ct(k.LinearProgress,"secondaryBg",Mn(k.secondary.main,.5)),ct(k.LinearProgress,"errorBg",Mn(k.error.main,.5)),ct(k.LinearProgress,"infoBg",Mn(k.info.main,.5)),ct(k.LinearProgress,"successBg",Mn(k.success.main,.5)),ct(k.LinearProgress,"warningBg",Mn(k.warning.main,.5)),ct(k.Skeleton,"bg",`rgba(${H("palette-text-primaryChannel")} / 0.13)`),ct(k.Slider,"primaryTrack",Mn(k.primary.main,.5)),ct(k.Slider,"secondaryTrack",Mn(k.secondary.main,.5)),ct(k.Slider,"errorTrack",Mn(k.error.main,.5)),ct(k.Slider,"infoTrack",Mn(k.info.main,.5)),ct(k.Slider,"successTrack",Mn(k.success.main,.5)),ct(k.Slider,"warningTrack",Mn(k.warning.main,.5));const q=Vv(k.background.default,.98);ct(k.SnackbarContent,"bg",q),ct(k.SnackbarContent,"color",Jl(()=>k.getContrastText(q))),ct(k.SpeedDialAction,"fabHoverBg",Vv(k.background.paper,.15)),ct(k.StepConnector,"border",H("palette-grey-600")),ct(k.StepContent,"border",H("palette-grey-600")),ct(k.Switch,"defaultColor",H("palette-grey-300")),ct(k.Switch,"defaultDisabledColor",H("palette-grey-600")),ct(k.Switch,"primaryDisabledColor",Mn(k.primary.main,.55)),ct(k.Switch,"secondaryDisabledColor",Mn(k.secondary.main,.55)),ct(k.Switch,"errorDisabledColor",Mn(k.error.main,.55)),ct(k.Switch,"infoDisabledColor",Mn(k.info.main,.55)),ct(k.Switch,"successDisabledColor",Mn(k.success.main,.55)),ct(k.Switch,"warningDisabledColor",Mn(k.warning.main,.55)),ct(k.TableCell,"border",Mn(Hv(k.divider,1),.68)),ct(k.Tooltip,"bg",Hv(k.grey[700],.92))}nc(k.background,"default"),nc(k.background,"paper"),nc(k.common,"background"),nc(k.common,"onBackground"),nc(k,"divider"),Object.keys(k).forEach(q=>{const V=k[q];q!=="tonalOffset"&&V&&typeof V=="object"&&(V.main&&ct(k[q],"mainChannel",u0(c0(V.main))),V.light&&ct(k[q],"lightChannel",u0(c0(V.light))),V.dark&&ct(k[q],"darkChannel",u0(c0(V.dark))),V.contrastText&&ct(k[q],"contrastTextChannel",u0(c0(V.contrastText))),q==="text"&&(nc(k[q],"primary"),nc(k[q],"secondary")),q==="action"&&(V.active&&nc(k[q],"active"),V.selected&&nc(k[q],"selected")))})}),I=e.reduce((B,k)=>xu(B,k),I);const A={prefix:s,disableCssColorScheme:i,shouldSkipGeneratingVar:a,getSelector:mQ(I)},{vars:L,generateThemeVars:N,generateStyleSheets:U}=LY(I,A);return I.vars=L,Object.entries(I.colorSchemes[I.defaultColorScheme]).forEach(([B,k])=>{I[B]=k}),I.generateThemeVars=N,I.generateStyleSheets=U,I.generateSpacing=function(){return UB(u.spacing,gb(this))},I.getColorSchemeSelector=OY(o),I.spacing=I.generateSpacing(),I.shouldSkipGeneratingVar=a,I.unstable_sxConfig={...bg,...u?.unstable_sxConfig},I.unstable_sx=function(k){return Ed({sx:k,theme:this})},I.toRuntimeSource=a8,I}function WR(r,e,t){r.colorSchemes&&t&&(r.colorSchemes[e]={...t!==!0&&t,palette:b2({...t===!0?{}:t.palette,mode:e})})}function Db(r={},...e){const{palette:t,cssVariables:n=!1,colorSchemes:i=t?void 0:{light:!0},defaultColorScheme:s=t?.mode,...a}=r,o=s||"light",l=i?.[o],u={...i,...t?{[o]:{...typeof l!="boolean"&&l,palette:t}}:void 0};if(n===!1){if(!("colorSchemes"in r))return iw(r,...e);let c=t;"palette"in r||u[o]&&(u[o]!==!0?c=u[o].palette:o==="dark"&&(c={mode:"dark"}));const h=iw({...r,palette:c},...e);return h.defaultColorScheme=o,h.colorSchemes=u,h.palette.mode==="light"&&(h.colorSchemes.light={...u.light!==!0&&u.light,palette:h.palette},WR(h,"dark",u.dark)),h.palette.mode==="dark"&&(h.colorSchemes.dark={...u.dark!==!0&&u.dark,palette:h.palette},WR(h,"light",u.light)),h}return!t&&!("light"in u)&&o==="light"&&(u.light=!0),_Q({...a,colorSchemes:u,defaultColorScheme:o,...typeof n!="boolean"&&n},...e)}const S2=Db(),Sl="$$material";function Ec(){const r=Eb(S2);return r[Sl]||r}function xQ(r){return F.jsx(WX,{...r,defaultTheme:S2,themeId:Sl})}function u8(r){return r!=="ownerState"&&r!=="theme"&&r!=="sx"&&r!=="as"}const is=r=>u8(r)&&r!=="classes",at=zB({themeId:Sl,defaultTheme:S2,rootShouldForwardProp:is});function T2(r){return function(t){return F.jsx(xQ,{styles:typeof r=="function"?n=>r({theme:n,...t}):r})}}function bQ(){return o2}const hr=bY;function ir(r){return xY(r)}function ft(r){if(typeof r!="string")throw new Error(qh(7));return r.charAt(0).toUpperCase()+r.slice(1)}function SQ(r){return typeof r.main=="string"}function TQ(r,e=[]){if(!SQ(r))return!1;for(const t of e)if(!r.hasOwnProperty(t)||typeof r[t]!="string")return!1;return!0}function es(r=[]){return([,e])=>e&&TQ(e,r)}function Zt(r,e,t="Mui"){const n={};return e.forEach(i=>{n[i]=nr(r,i,t)}),n}function CQ(r){return nr("MuiTypography",r)}const qR=Zt("MuiTypography",["root","h1","h2","h3","h4","h5","h6","subtitle1","subtitle2","body1","body2","inherit","button","caption","overline","alignLeft","alignRight","alignCenter","alignJustify","noWrap","gutterBottom","paragraph"]),wQ={primary:!0,secondary:!0,error:!0,info:!0,success:!0,warning:!0,textPrimary:!0,textSecondary:!0,textDisabled:!0},EQ=bQ(),kQ=r=>{const{align:e,gutterBottom:t,noWrap:n,paragraph:i,variant:s,classes:a}=r,o={root:["root",s,r.align!=="inherit"&&`align${ft(e)}`,t&&"gutterBottom",n&&"noWrap",i&&"paragraph"]};return rr(o,CQ,a)},AQ=at("span",{name:"MuiTypography",slot:"Root",overridesResolver:(r,e)=>{const{ownerState:t}=r;return[e.root,t.variant&&e[t.variant],t.align!=="inherit"&&e[`align${ft(t.align)}`],t.noWrap&&e.noWrap,t.gutterBottom&&e.gutterBottom,t.paragraph&&e.paragraph]}})(hr(({theme:r})=>({margin:0,variants:[{props:{variant:"inherit"},style:{font:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}},...Object.entries(r.typography).filter(([e,t])=>e!=="inherit"&&t&&typeof t=="object").map(([e,t])=>({props:{variant:e},style:t})),...Object.entries(r.palette).filter(es()).map(([e])=>({props:{color:e},style:{color:(r.vars||r).palette[e].main}})),...Object.entries(r.palette?.text||{}).filter(([,e])=>typeof e=="string").map(([e])=>({props:{color:`text${ft(e)}`},style:{color:(r.vars||r).palette.text[e]}})),{props:({ownerState:e})=>e.align!=="inherit",style:{textAlign:"var(--Typography-textAlign)"}},{props:({ownerState:e})=>e.noWrap,style:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}},{props:({ownerState:e})=>e.gutterBottom,style:{marginBottom:"0.35em"}},{props:({ownerState:e})=>e.paragraph,style:{marginBottom:16}}]}))),GR={h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",subtitle1:"h6",subtitle2:"h6",body1:"p",body2:"p",inherit:"p"},bn=M.forwardRef(function(e,t){const{color:n,...i}=ir({props:e,name:"MuiTypography"}),s=!wQ[n],a=EQ({...i,...s&&{color:n}}),{align:o="inherit",className:l,component:u,gutterBottom:c=!1,noWrap:h=!1,paragraph:m=!1,variant:g="body1",variantMapping:y=GR,...v}=a,x={...a,align:o,color:n,className:l,component:u,gutterBottom:c,noWrap:h,paragraph:m,variant:g,variantMapping:y},w=u||(m?"p":y[g]||GR[g])||"span",E=kQ(x);return F.jsx(AQ,{as:w,ref:t,className:It(E.root,l),...v,ownerState:x,style:{...o!=="inherit"&&{"--Typography-textAlign":o},...v.style}})});function DQ(r){return nr("MuiDialogTitle",r)}const IQ=Zt("MuiDialogTitle",["root"]),c8=M.createContext({}),PQ=r=>{const{classes:e}=r;return rr({root:["root"]},DQ,e)},RQ=at(bn,{name:"MuiDialogTitle",slot:"Root"})({padding:"16px 24px",flex:"0 0 auto"}),Ag=M.forwardRef(function(e,t){const n=ir({props:e,name:"MuiDialogTitle"}),{className:i,id:s,...a}=n,o=n,l=PQ(o),{titleId:u=s}=M.useContext(c8);return F.jsx(RQ,{component:"h2",className:It(l.root,i),ownerState:o,ref:t,variant:"h6",id:s??u,...a})});let KR=0;function LQ(r){const[e,t]=M.useState(r),n=r||e;return M.useEffect(()=>{e==null&&(KR+=1,t(`mui-${KR}`))},[e]),n}const OQ={...P_},XR=OQ.useId;function Qh(r){if(XR!==void 0){const e=XR();return r??e}return LQ(r)}function aa(r){return r&&r.ownerDocument||document}function fo(r){return aa(r).defaultView||window}function d8(r=window){const e=r.document.documentElement.clientWidth;return r.innerWidth-e}function MQ(r){const e=aa(r);return e.body===r?fo(r).innerWidth>e.documentElement.clientWidth:r.scrollHeight>r.clientHeight}function T0(r,e){e?r.setAttribute("aria-hidden","true"):r.removeAttribute("aria-hidden")}function YR(r){return parseInt(fo(r).getComputedStyle(r).paddingRight,10)||0}function FQ(r){const t=["TEMPLATE","SCRIPT","STYLE","LINK","MAP","META","NOSCRIPT","PICTURE","COL","COLGROUP","PARAM","SLOT","SOURCE","TRACK"].includes(r.tagName),n=r.tagName==="INPUT"&&r.getAttribute("type")==="hidden";return t||n}function QR(r,e,t,n,i){const s=[e,t,...n];[].forEach.call(r.children,a=>{const o=!s.includes(a),l=!FQ(a);o&&l&&T0(a,i)})}function u1(r,e){let t=-1;return r.some((n,i)=>e(n)?(t=i,!0):!1),t}function BQ(r,e){const t=[],n=r.container;if(!e.disableScrollLock){if(MQ(n)){const a=d8(fo(n));t.push({value:n.style.paddingRight,property:"padding-right",el:n}),n.style.paddingRight=`${YR(n)+a}px`;const o=aa(n).querySelectorAll(".mui-fixed");[].forEach.call(o,l=>{t.push({value:l.style.paddingRight,property:"padding-right",el:l}),l.style.paddingRight=`${YR(l)+a}px`})}let s;if(n.parentNode instanceof DocumentFragment)s=aa(n).body;else{const a=n.parentElement,o=fo(n);s=a?.nodeName==="HTML"&&o.getComputedStyle(a).overflowY==="scroll"?a:n}t.push({value:s.style.overflow,property:"overflow",el:s},{value:s.style.overflowX,property:"overflow-x",el:s},{value:s.style.overflowY,property:"overflow-y",el:s}),s.style.overflow="hidden"}return()=>{t.forEach(({value:s,el:a,property:o})=>{s?a.style.setProperty(o,s):a.style.removeProperty(o)})}}function NQ(r){const e=[];return[].forEach.call(r.children,t=>{t.getAttribute("aria-hidden")==="true"&&e.push(t)}),e}class UQ{constructor(){this.modals=[],this.containers=[]}add(e,t){let n=this.modals.indexOf(e);if(n!==-1)return n;n=this.modals.length,this.modals.push(e),e.modalRef&&T0(e.modalRef,!1);const i=NQ(t);QR(t,e.mount,e.modalRef,i,!0);const s=u1(this.containers,a=>a.container===t);return s!==-1?(this.containers[s].modals.push(e),n):(this.containers.push({modals:[e],container:t,restore:null,hiddenSiblings:i}),n)}mount(e,t){const n=u1(this.containers,s=>s.modals.includes(e)),i=this.containers[n];i.restore||(i.restore=BQ(i,t))}remove(e,t=!0){const n=this.modals.indexOf(e);if(n===-1)return n;const i=u1(this.containers,a=>a.modals.includes(e)),s=this.containers[i];if(s.modals.splice(s.modals.indexOf(e),1),this.modals.splice(n,1),s.modals.length===0)s.restore&&s.restore(),e.modalRef&&T0(e.modalRef,t),QR(s.container,e.mount,e.modalRef,s.hiddenSiblings,!1),this.containers.splice(i,1);else{const a=s.modals[s.modals.length-1];a.modalRef&&T0(a.modalRef,!1)}return n}isTopModal(e){return this.modals.length>0&&this.modals[this.modals.length-1]===e}}function ci(...r){const e=M.useRef(void 0),t=M.useCallback(n=>{const i=r.map(s=>{if(s==null)return null;if(typeof s=="function"){const a=s,o=a(n);return typeof o=="function"?o:()=>{a(null)}}return s.current=n,()=>{s.current=null}});return()=>{i.forEach(s=>s?.())}},r);return M.useMemo(()=>r.every(n=>n==null)?null:n=>{e.current&&(e.current(),e.current=void 0),n!=null&&(e.current=t(n))},r)}function Jh(r){return parseInt(M.version,10)>=19?r?.props?.ref||null:r?.ref||null}const $Q=["input","select","textarea","a[href]","button","[tabindex]","audio[controls]","video[controls]",'[contenteditable]:not([contenteditable="false"])'].join(",");function jQ(r){const e=parseInt(r.getAttribute("tabindex")||"",10);return Number.isNaN(e)?r.contentEditable==="true"||(r.nodeName==="AUDIO"||r.nodeName==="VIDEO"||r.nodeName==="DETAILS")&&r.getAttribute("tabindex")===null?0:r.tabIndex:e}function zQ(r){if(r.tagName!=="INPUT"||r.type!=="radio"||!r.name)return!1;const e=n=>r.ownerDocument.querySelector(`input[type="radio"]${n}`);let t=e(`[name="${r.name}"]:checked`);return t||(t=e(`[name="${r.name}"]`)),t!==r}function HQ(r){return!(r.disabled||r.tagName==="INPUT"&&r.type==="hidden"||zQ(r))}function VQ(r){const e=[],t=[];return Array.from(r.querySelectorAll($Q)).forEach((n,i)=>{const s=jQ(n);s===-1||!HQ(n)||(s===0?e.push(n):t.push({documentOrder:i,tabIndex:s,node:n}))}),t.sort((n,i)=>n.tabIndex===i.tabIndex?n.documentOrder-i.documentOrder:n.tabIndex-i.tabIndex).map(n=>n.node).concat(e)}function WQ(){return!0}function qQ(r){const{children:e,disableAutoFocus:t=!1,disableEnforceFocus:n=!1,disableRestoreFocus:i=!1,getTabbable:s=VQ,isEnabled:a=WQ,open:o}=r,l=M.useRef(!1),u=M.useRef(null),c=M.useRef(null),h=M.useRef(null),m=M.useRef(null),g=M.useRef(!1),y=M.useRef(null),v=ci(Jh(e),y),x=M.useRef(null);M.useEffect(()=>{!o||!y.current||(g.current=!t)},[t,o]),M.useEffect(()=>{if(!o||!y.current)return;const D=aa(y.current);return y.current.contains(D.activeElement)||(y.current.hasAttribute("tabIndex")||y.current.setAttribute("tabIndex","-1"),g.current&&y.current.focus()),()=>{i||(h.current&&h.current.focus&&(l.current=!0,h.current.focus()),h.current=null)}},[o]),M.useEffect(()=>{if(!o||!y.current)return;const D=aa(y.current),I=N=>{x.current=N,!(n||!a()||N.key!=="Tab")&&D.activeElement===y.current&&N.shiftKey&&(l.current=!0,c.current&&c.current.focus())},A=()=>{const N=y.current;if(N===null)return;if(!D.hasFocus()||!a()||l.current){l.current=!1;return}if(N.contains(D.activeElement)||n&&D.activeElement!==u.current&&D.activeElement!==c.current)return;if(D.activeElement!==m.current)m.current=null;else if(m.current!==null)return;if(!g.current)return;let U=[];if((D.activeElement===u.current||D.activeElement===c.current)&&(U=s(y.current)),U.length>0){const B=!!(x.current?.shiftKey&&x.current?.key==="Tab"),k=U[0],H=U[U.length-1];typeof k!="string"&&typeof H!="string"&&(B?H.focus():k.focus())}else N.focus()};D.addEventListener("focusin",A),D.addEventListener("keydown",I,!0);const L=setInterval(()=>{D.activeElement&&D.activeElement.tagName==="BODY"&&A()},50);return()=>{clearInterval(L),D.removeEventListener("focusin",A),D.removeEventListener("keydown",I,!0)}},[t,n,i,a,o,s]);const w=D=>{h.current===null&&(h.current=D.relatedTarget),g.current=!0,m.current=D.target;const I=e.props.onFocus;I&&I(D)},E=D=>{h.current===null&&(h.current=D.relatedTarget),g.current=!0};return F.jsxs(M.Fragment,{children:[F.jsx("div",{tabIndex:o?0:-1,onFocus:E,ref:u,"data-testid":"sentinelStart"}),M.cloneElement(e,{ref:v,onFocus:w}),F.jsx("div",{tabIndex:o?0:-1,onFocus:E,ref:c,"data-testid":"sentinelEnd"})]})}const Su=typeof window<"u"?M.useLayoutEffect:M.useEffect;function JR(r,e){typeof r=="function"?r(e):r&&(r.current=e)}function GQ(r){return typeof r=="function"?r():r}const KQ=M.forwardRef(function(e,t){const{children:n,container:i,disablePortal:s=!1}=e,[a,o]=M.useState(null),l=ci(M.isValidElement(n)?Jh(n):null,t);if(Su(()=>{s||o(GQ(i)||document.body)},[i,s]),Su(()=>{if(a&&!s)return JR(t,a),()=>{JR(t,null)}},[t,a,s]),s){if(M.isValidElement(n)){const u={ref:l};return M.cloneElement(n,u)}return n}return a&&Ho.createPortal(n,a)});function XQ(r){return typeof r=="string"}function h8(r,e,t){return r===void 0||XQ(r)?e:{...e,ownerState:{...e.ownerState,...t}}}function f8(r,e,t){return typeof r=="function"?r(e,t):r}function q_(r,e=[]){if(r===void 0)return{};const t={};return Object.keys(r).filter(n=>n.match(/^on[A-Z]/)&&typeof r[n]=="function"&&!e.includes(n)).forEach(n=>{t[n]=r[n]}),t}function ZR(r){if(r===void 0)return{};const e={};return Object.keys(r).filter(t=>!(t.match(/^on[A-Z]/)&&typeof r[t]=="function")).forEach(t=>{e[t]=r[t]}),e}function p8(r){const{getSlotProps:e,additionalProps:t,externalSlotProps:n,externalForwardedProps:i,className:s}=r;if(!e){const g=It(t?.className,s,i?.className,n?.className),y={...t?.style,...i?.style,...n?.style},v={...t,...i,...n};return g.length>0&&(v.className=g),Object.keys(y).length>0&&(v.style=y),{props:v,internalRef:void 0}}const a=q_({...i,...n}),o=ZR(n),l=ZR(i),u=e(a),c=It(u?.className,t?.className,s,i?.className,n?.className),h={...u?.style,...t?.style,...i?.style,...n?.style},m={...u,...t,...l,...o};return c.length>0&&(m.className=c),Object.keys(h).length>0&&(m.style=h),{props:m,internalRef:u.ref}}function Sr(r,e){const{className:t,elementType:n,ownerState:i,externalForwardedProps:s,internalForwardedProps:a,shouldForwardComponentProp:o=!1,...l}=e,{component:u,slots:c={[r]:void 0},slotProps:h={[r]:void 0},...m}=s,g=c[r]||n,y=f8(h[r],i),{props:{component:v,...x},internalRef:w}=p8({className:t,...l,externalForwardedProps:r==="root"?m:void 0,externalSlotProps:y}),E=ci(w,y?.ref,e.ref),D=r==="root"?v||u:v,I=h8(g,{...r==="root"&&!u&&!c[r]&&a,...r!=="root"&&!c[r]&&a,...x,...D&&!o&&{as:D},...D&&o&&{component:D},ref:E},i);return[g,I]}function Ib(r,e){if(r==null)return{};var t={};for(var n in r)if({}.hasOwnProperty.call(r,n)){if(e.indexOf(n)!==-1)continue;t[n]=r[n]}return t}function Sp(r,e){return Sp=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,n){return t.__proto__=n,t},Sp(r,e)}function $t(r,e){r.prototype=Object.create(e.prototype),r.prototype.constructor=r,Sp(r,e)}const eL={disabled:!1},G_=Yr.createContext(null);var YQ=function(e){return e.scrollTop},d0="unmounted",ph="exited",mh="entering",Uf="entered",aw="exiting",Zo=(function(r){$t(e,r);function e(n,i){var s;s=r.call(this,n,i)||this;var a=i,o=a&&!a.isMounting?n.enter:n.appear,l;return s.appearStatus=null,n.in?o?(l=ph,s.appearStatus=mh):l=Uf:n.unmountOnExit||n.mountOnEnter?l=d0:l=ph,s.state={status:l},s.nextCallback=null,s}e.getDerivedStateFromProps=function(i,s){var a=i.in;return a&&s.status===d0?{status:ph}:null};var t=e.prototype;return t.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},t.componentDidUpdate=function(i){var s=null;if(i!==this.props){var a=this.state.status;this.props.in?a!==mh&&a!==Uf&&(s=mh):(a===mh||a===Uf)&&(s=aw)}this.updateStatus(!1,s)},t.componentWillUnmount=function(){this.cancelNextCallback()},t.getTimeouts=function(){var i=this.props.timeout,s,a,o;return s=a=o=i,i!=null&&typeof i!="number"&&(s=i.exit,a=i.enter,o=i.appear!==void 0?i.appear:a),{exit:s,enter:a,appear:o}},t.updateStatus=function(i,s){if(i===void 0&&(i=!1),s!==null)if(this.cancelNextCallback(),s===mh){if(this.props.unmountOnExit||this.props.mountOnEnter){var a=this.props.nodeRef?this.props.nodeRef.current:jv.findDOMNode(this);a&&YQ(a)}this.performEnter(i)}else this.performExit();else this.props.unmountOnExit&&this.state.status===ph&&this.setState({status:d0})},t.performEnter=function(i){var s=this,a=this.props.enter,o=this.context?this.context.isMounting:i,l=this.props.nodeRef?[o]:[jv.findDOMNode(this),o],u=l[0],c=l[1],h=this.getTimeouts(),m=o?h.appear:h.enter;if(!i&&!a||eL.disabled){this.safeSetState({status:Uf},function(){s.props.onEntered(u)});return}this.props.onEnter(u,c),this.safeSetState({status:mh},function(){s.props.onEntering(u,c),s.onTransitionEnd(m,function(){s.safeSetState({status:Uf},function(){s.props.onEntered(u,c)})})})},t.performExit=function(){var i=this,s=this.props.exit,a=this.getTimeouts(),o=this.props.nodeRef?void 0:jv.findDOMNode(this);if(!s||eL.disabled){this.safeSetState({status:ph},function(){i.props.onExited(o)});return}this.props.onExit(o),this.safeSetState({status:aw},function(){i.props.onExiting(o),i.onTransitionEnd(a.exit,function(){i.safeSetState({status:ph},function(){i.props.onExited(o)})})})},t.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},t.safeSetState=function(i,s){s=this.setNextCallback(s),this.setState(i,s)},t.setNextCallback=function(i){var s=this,a=!0;return this.nextCallback=function(o){a&&(a=!1,s.nextCallback=null,i(o))},this.nextCallback.cancel=function(){a=!1},this.nextCallback},t.onTransitionEnd=function(i,s){this.setNextCallback(s);var a=this.props.nodeRef?this.props.nodeRef.current:jv.findDOMNode(this),o=i==null&&!this.props.addEndListener;if(!a||o){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var l=this.props.nodeRef?[this.nextCallback]:[a,this.nextCallback],u=l[0],c=l[1];this.props.addEndListener(u,c)}i!=null&&setTimeout(this.nextCallback,i)},t.render=function(){var i=this.state.status;if(i===d0)return null;var s=this.props,a=s.children;s.in,s.mountOnEnter,s.unmountOnExit,s.appear,s.enter,s.exit,s.timeout,s.addEndListener,s.onEnter,s.onEntering,s.onEntered,s.onExit,s.onExiting,s.onExited,s.nodeRef;var o=Ib(s,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return Yr.createElement(G_.Provider,{value:null},typeof a=="function"?a(i,o):Yr.cloneElement(Yr.Children.only(a),o))},e})(Yr.Component);Zo.contextType=G_;Zo.propTypes={};function kf(){}Zo.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:kf,onEntering:kf,onEntered:kf,onExit:kf,onExiting:kf,onExited:kf};Zo.UNMOUNTED=d0;Zo.EXITED=ph;Zo.ENTERING=mh;Zo.ENTERED=Uf;Zo.EXITING=aw;function He(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function C2(r,e){var t=function(s){return e&&M.isValidElement(s)?e(s):s},n=Object.create(null);return r&&M.Children.map(r,function(i){return i}).forEach(function(i){n[i.key]=t(i)}),n}function QQ(r,e){r=r||{},e=e||{};function t(c){return c in e?e[c]:r[c]}var n=Object.create(null),i=[];for(var s in r)s in e?i.length&&(n[s]=i,i=[]):i.push(s);var a,o={};for(var l in e){if(n[l])for(a=0;a<n[l].length;a++){var u=n[l][a];o[n[l][a]]=t(u)}o[l]=t(l)}for(a=0;a<i.length;a++)o[i[a]]=t(i[a]);return o}function wh(r,e,t){return t[e]!=null?t[e]:r.props[e]}function JQ(r,e){return C2(r.children,function(t){return M.cloneElement(t,{onExited:e.bind(null,t),in:!0,appear:wh(t,"appear",r),enter:wh(t,"enter",r),exit:wh(t,"exit",r)})})}function ZQ(r,e,t){var n=C2(r.children),i=QQ(e,n);return Object.keys(i).forEach(function(s){var a=i[s];if(M.isValidElement(a)){var o=s in e,l=s in n,u=e[s],c=M.isValidElement(u)&&!u.props.in;l&&(!o||c)?i[s]=M.cloneElement(a,{onExited:t.bind(null,a),in:!0,exit:wh(a,"exit",r),enter:wh(a,"enter",r)}):!l&&o&&!c?i[s]=M.cloneElement(a,{in:!1}):l&&o&&M.isValidElement(u)&&(i[s]=M.cloneElement(a,{onExited:t.bind(null,a),in:u.props.in,exit:wh(a,"exit",r),enter:wh(a,"enter",r)}))}}),i}var eJ=Object.values||function(r){return Object.keys(r).map(function(e){return r[e]})},tJ={component:"div",childFactory:function(e){return e}},w2=(function(r){$t(e,r);function e(n,i){var s;s=r.call(this,n,i)||this;var a=s.handleExited.bind(He(s));return s.state={contextValue:{isMounting:!0},handleExited:a,firstRender:!0},s}var t=e.prototype;return t.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},t.componentWillUnmount=function(){this.mounted=!1},e.getDerivedStateFromProps=function(i,s){var a=s.children,o=s.handleExited,l=s.firstRender;return{children:l?JQ(i,o):ZQ(i,a,o),firstRender:!1}},t.handleExited=function(i,s){var a=C2(this.props.children);i.key in a||(i.props.onExited&&i.props.onExited(s),this.mounted&&this.setState(function(o){var l=tr({},o.children);return delete l[i.key],{children:l}}))},t.render=function(){var i=this.props,s=i.component,a=i.childFactory,o=Ib(i,["component","childFactory"]),l=this.state.contextValue,u=eJ(this.state.children).map(a);return delete o.appear,delete o.enter,delete o.exit,s===null?Yr.createElement(G_.Provider,{value:l},u):Yr.createElement(G_.Provider,{value:l},Yr.createElement(s,o,u))},e})(Yr.Component);w2.propTypes={};w2.defaultProps=tJ;const E2=r=>r.scrollTop;function Ad(r,e){const{timeout:t,easing:n,style:i={}}=r;return{duration:i.transitionDuration??(typeof t=="number"?t:t[e.mode]||0),easing:i.transitionTimingFunction??(typeof n=="object"?n[e.mode]:n),delay:i.transitionDelay}}const rJ={entering:{opacity:1},entered:{opacity:1}},ow=M.forwardRef(function(e,t){const n=Ec(),i={enter:n.transitions.duration.enteringScreen,exit:n.transitions.duration.leavingScreen},{addEndListener:s,appear:a=!0,children:o,easing:l,in:u,onEnter:c,onEntered:h,onEntering:m,onExit:g,onExited:y,onExiting:v,style:x,timeout:w=i,TransitionComponent:E=Zo,...D}=e,I=M.useRef(null),A=ci(I,Jh(o),t),L=Q=>ie=>{if(Q){const le=I.current;ie===void 0?Q(le):Q(le,ie)}},N=L(m),U=L((Q,ie)=>{E2(Q);const le=Ad({style:x,timeout:w,easing:l},{mode:"enter"});Q.style.webkitTransition=n.transitions.create("opacity",le),Q.style.transition=n.transitions.create("opacity",le),c&&c(Q,ie)}),B=L(h),k=L(v),H=L(Q=>{const ie=Ad({style:x,timeout:w,easing:l},{mode:"exit"});Q.style.webkitTransition=n.transitions.create("opacity",ie),Q.style.transition=n.transitions.create("opacity",ie),g&&g(Q)}),q=L(y),V=Q=>{s&&s(I.current,Q)};return F.jsx(E,{appear:a,in:u,nodeRef:I,onEnter:U,onEntered:B,onEntering:N,onExit:H,onExited:q,onExiting:k,addEndListener:V,timeout:w,...D,children:(Q,{ownerState:ie,...le})=>M.cloneElement(o,{style:{opacity:0,visibility:Q==="exited"&&!u?"hidden":void 0,...rJ[Q],...x,...o.props.style},ref:A,...le})})});function nJ(r){return nr("MuiBackdrop",r)}Zt("MuiBackdrop",["root","invisible"]);const iJ=r=>{const{classes:e,invisible:t}=r;return rr({root:["root",t&&"invisible"]},nJ,e)},sJ=at("div",{name:"MuiBackdrop",slot:"Root",overridesResolver:(r,e)=>{const{ownerState:t}=r;return[e.root,t.invisible&&e.invisible]}})({position:"fixed",display:"flex",alignItems:"center",justifyContent:"center",right:0,bottom:0,top:0,left:0,backgroundColor:"rgba(0, 0, 0, 0.5)",WebkitTapHighlightColor:"transparent",variants:[{props:{invisible:!0},style:{backgroundColor:"transparent"}}]}),m8=M.forwardRef(function(e,t){const n=ir({props:e,name:"MuiBackdrop"}),{children:i,className:s,component:a="div",invisible:o=!1,open:l,components:u={},componentsProps:c={},slotProps:h={},slots:m={},TransitionComponent:g,transitionDuration:y,...v}=n,x={...n,component:a,invisible:o},w=iJ(x),E={transition:g,root:u.Root,...m},D={...c,...h},I={slots:E,slotProps:D},[A,L]=Sr("root",{elementType:sJ,externalForwardedProps:I,className:It(w.root,s),ownerState:x}),[N,U]=Sr("transition",{elementType:ow,externalForwardedProps:I,ownerState:x});return F.jsx(N,{in:l,timeout:y,...v,...U,children:F.jsx(A,{"aria-hidden":!0,...L,classes:w,ref:t,children:i})})});function ho(r){const e=M.useRef(r);return Su(()=>{e.current=r}),M.useRef((...t)=>(0,e.current)(...t)).current}function lw(...r){return r.reduce((e,t)=>t==null?e:function(...i){e.apply(this,i),t.apply(this,i)},()=>{})}function aJ(r){return typeof r=="function"?r():r}function oJ(r){return r?r.props.hasOwnProperty("in"):!1}const tL=()=>{},Wv=new UQ;function lJ(r){const{container:e,disableEscapeKeyDown:t=!1,disableScrollLock:n=!1,closeAfterTransition:i=!1,onTransitionEnter:s,onTransitionExited:a,children:o,onClose:l,open:u,rootRef:c}=r,h=M.useRef({}),m=M.useRef(null),g=M.useRef(null),y=ci(g,c),[v,x]=M.useState(!u),w=oJ(o);let E=!0;(r["aria-hidden"]==="false"||r["aria-hidden"]===!1)&&(E=!1);const D=()=>aa(m.current),I=()=>(h.current.modalRef=g.current,h.current.mount=m.current,h.current),A=()=>{Wv.mount(I(),{disableScrollLock:n}),g.current&&(g.current.scrollTop=0)},L=ho(()=>{const ie=aJ(e)||D().body;Wv.add(I(),ie),g.current&&A()}),N=()=>Wv.isTopModal(I()),U=ho(ie=>{m.current=ie,ie&&(u&&N()?A():g.current&&T0(g.current,E))}),B=M.useCallback(()=>{Wv.remove(I(),E)},[E]);M.useEffect(()=>()=>{B()},[B]),M.useEffect(()=>{u?L():(!w||!i)&&B()},[u,B,w,i,L]);const k=ie=>le=>{ie.onKeyDown?.(le),!(le.key!=="Escape"||le.which===229||!N())&&(t||(le.stopPropagation(),l&&l(le,"escapeKeyDown")))},H=ie=>le=>{ie.onClick?.(le),le.target===le.currentTarget&&l&&l(le,"backdropClick")};return{getRootProps:(ie={})=>{const le=q_(r);delete le.onTransitionEnter,delete le.onTransitionExited;const he={...le,...ie};return{role:"presentation",...he,onKeyDown:k(he),ref:y}},getBackdropProps:(ie={})=>{const le=ie;return{"aria-hidden":!0,...le,onClick:H(le),open:u}},getTransitionProps:()=>{const ie=()=>{x(!1),s&&s()},le=()=>{x(!0),a&&a(),i&&B()};return{onEnter:lw(ie,o?.props.onEnter??tL),onExited:lw(le,o?.props.onExited??tL)}},rootRef:y,portalRef:U,isTopModal:N,exited:v,hasTransition:w}}function uJ(r){return nr("MuiModal",r)}Zt("MuiModal",["root","hidden","backdrop"]);const cJ=r=>{const{open:e,exited:t,classes:n}=r;return rr({root:["root",!e&&t&&"hidden"],backdrop:["backdrop"]},uJ,n)},dJ=at("div",{name:"MuiModal",slot:"Root",overridesResolver:(r,e)=>{const{ownerState:t}=r;return[e.root,!t.open&&t.exited&&e.hidden]}})(hr(({theme:r})=>({position:"fixed",zIndex:(r.vars||r).zIndex.modal,right:0,bottom:0,top:0,left:0,variants:[{props:({ownerState:e})=>!e.open&&e.exited,style:{visibility:"hidden"}}]}))),hJ=at(m8,{name:"MuiModal",slot:"Backdrop"})({zIndex:-1}),k2=M.forwardRef(function(e,t){const n=ir({name:"MuiModal",props:e}),{BackdropComponent:i=hJ,BackdropProps:s,classes:a,className:o,closeAfterTransition:l=!1,children:u,container:c,component:h,components:m={},componentsProps:g={},disableAutoFocus:y=!1,disableEnforceFocus:v=!1,disableEscapeKeyDown:x=!1,disablePortal:w=!1,disableRestoreFocus:E=!1,disableScrollLock:D=!1,hideBackdrop:I=!1,keepMounted:A=!1,onClose:L,onTransitionEnter:N,onTransitionExited:U,open:B,slotProps:k={},slots:H={},theme:q,...V}=n,Q={...n,closeAfterTransition:l,disableAutoFocus:y,disableEnforceFocus:v,disableEscapeKeyDown:x,disablePortal:w,disableRestoreFocus:E,disableScrollLock:D,hideBackdrop:I,keepMounted:A},{getRootProps:ie,getBackdropProps:le,getTransitionProps:he,portalRef:ae,isTopModal:ne,exited:ue,hasTransition:ee}=lJ({...Q,rootRef:t}),pe={...Q,exited:ue},me=cJ(pe),xe={};if(u.props.tabIndex===void 0&&(xe.tabIndex="-1"),ee){const{onEnter:Ze,onExited:Ot}=he();xe.onEnter=Ze,xe.onExited=Ot}const Be={slots:{root:m.Root,backdrop:m.Backdrop,...H},slotProps:{...g,...k}},[Oe,dt]=Sr("root",{ref:t,elementType:dJ,externalForwardedProps:{...Be,...V,component:h},getSlotProps:ie,ownerState:pe,className:It(o,me?.root,!pe.open&&pe.exited&&me?.hidden)}),[Ke,_t]=Sr("backdrop",{ref:s?.ref,elementType:i,externalForwardedProps:Be,shouldForwardComponentProp:!0,additionalProps:s,getSlotProps:Ze=>le({...Ze,onClick:Ot=>{Ze?.onClick&&Ze.onClick(Ot)}}),className:It(s?.className,me?.backdrop),ownerState:pe});return!A&&!B&&(!ee||ue)?null:F.jsx(KQ,{ref:ae,container:c,disablePortal:w,children:F.jsxs(Oe,{...dt,children:[!I&&i?F.jsx(Ke,{..._t}):null,F.jsx(qQ,{disableEnforceFocus:v,disableAutoFocus:y,disableRestoreFocus:E,isEnabled:ne,open:B,children:M.cloneElement(u,xe)})]})})});function fJ(r){return nr("MuiPaper",r)}Zt("MuiPaper",["root","rounded","outlined","elevation","elevation0","elevation1","elevation2","elevation3","elevation4","elevation5","elevation6","elevation7","elevation8","elevation9","elevation10","elevation11","elevation12","elevation13","elevation14","elevation15","elevation16","elevation17","elevation18","elevation19","elevation20","elevation21","elevation22","elevation23","elevation24"]);const pJ=r=>{const{square:e,elevation:t,variant:n,classes:i}=r,s={root:["root",n,!e&&"rounded",n==="elevation"&&`elevation${t}`]};return rr(s,fJ,i)},mJ=at("div",{name:"MuiPaper",slot:"Root",overridesResolver:(r,e)=>{const{ownerState:t}=r;return[e.root,e[t.variant],!t.square&&e.rounded,t.variant==="elevation"&&e[`elevation${t.elevation}`]]}})(hr(({theme:r})=>({backgroundColor:(r.vars||r).palette.background.paper,color:(r.vars||r).palette.text.primary,transition:r.transitions.create("box-shadow"),variants:[{props:({ownerState:e})=>!e.square,style:{borderRadius:r.shape.borderRadius}},{props:{variant:"outlined"},style:{border:`1px solid ${(r.vars||r).palette.divider}`}},{props:{variant:"elevation"},style:{boxShadow:"var(--Paper-shadow)",backgroundImage:"var(--Paper-overlay)"}}]}))),kc=M.forwardRef(function(e,t){const n=ir({props:e,name:"MuiPaper"}),i=Ec(),{className:s,component:a="div",elevation:o=1,square:l=!1,variant:u="elevation",...c}=n,h={...n,component:a,elevation:o,square:l,variant:u},m=pJ(h);return F.jsx(mJ,{as:a,ownerState:h,className:It(m.root,s),ref:t,...c,style:{...u==="elevation"&&{"--Paper-shadow":(i.vars||i).shadows[o],...i.vars&&{"--Paper-overlay":i.vars.overlays?.[o]},...!i.vars&&i.palette.mode==="dark"&&{"--Paper-overlay":`linear-gradient(${Xr("#fff",sw(o))}, ${Xr("#fff",sw(o))})`}},...c.style}})});function gJ(r){return nr("MuiDialog",r)}const c1=Zt("MuiDialog",["root","scrollPaper","scrollBody","container","paper","paperScrollPaper","paperScrollBody","paperWidthFalse","paperWidthXs","paperWidthSm","paperWidthMd","paperWidthLg","paperWidthXl","paperFullWidth","paperFullScreen"]),vJ=at(m8,{name:"MuiDialog",slot:"Backdrop",overrides:(r,e)=>e.backdrop})({zIndex:-1}),yJ=r=>{const{classes:e,scroll:t,maxWidth:n,fullWidth:i,fullScreen:s}=r,a={root:["root"],container:["container",`scroll${ft(t)}`],paper:["paper",`paperScroll${ft(t)}`,`paperWidth${ft(String(n))}`,i&&"paperFullWidth",s&&"paperFullScreen"]};return rr(a,gJ,e)},_J=at(k2,{name:"MuiDialog",slot:"Root"})({"@media print":{position:"absolute !important"}}),xJ=at("div",{name:"MuiDialog",slot:"Container",overridesResolver:(r,e)=>{const{ownerState:t}=r;return[e.container,e[`scroll${ft(t.scroll)}`]]}})({height:"100%","@media print":{height:"auto"},outline:0,variants:[{props:{scroll:"paper"},style:{display:"flex",justifyContent:"center",alignItems:"center"}},{props:{scroll:"body"},style:{overflowY:"auto",overflowX:"hidden",textAlign:"center","&::after":{content:'""',display:"inline-block",verticalAlign:"middle",height:"100%",width:"0"}}}]}),bJ=at(kc,{name:"MuiDialog",slot:"Paper",overridesResolver:(r,e)=>{const{ownerState:t}=r;return[e.paper,e[`scrollPaper${ft(t.scroll)}`],e[`paperWidth${ft(String(t.maxWidth))}`],t.fullWidth&&e.paperFullWidth,t.fullScreen&&e.paperFullScreen]}})(hr(({theme:r})=>({margin:32,position:"relative",overflowY:"auto","@media print":{overflowY:"visible",boxShadow:"none"},variants:[{props:{scroll:"paper"},style:{display:"flex",flexDirection:"column",maxHeight:"calc(100% - 64px)"}},{props:{scroll:"body"},style:{display:"inline-block",verticalAlign:"middle",textAlign:"initial"}},{props:({ownerState:e})=>!e.maxWidth,style:{maxWidth:"calc(100% - 64px)"}},{props:{maxWidth:"xs"},style:{maxWidth:r.breakpoints.unit==="px"?Math.max(r.breakpoints.values.xs,444):`max(${r.breakpoints.values.xs}${r.breakpoints.unit}, 444px)`,[`&.${c1.paperScrollBody}`]:{[r.breakpoints.down(Math.max(r.breakpoints.values.xs,444)+64)]:{maxWidth:"calc(100% - 64px)"}}}},...Object.keys(r.breakpoints.values).filter(e=>e!=="xs").map(e=>({props:{maxWidth:e},style:{maxWidth:`${r.breakpoints.values[e]}${r.breakpoints.unit}`,[`&.${c1.paperScrollBody}`]:{[r.breakpoints.down(r.breakpoints.values[e]+64)]:{maxWidth:"calc(100% - 64px)"}}}})),{props:({ownerState:e})=>e.fullWidth,style:{width:"calc(100% - 64px)"}},{props:({ownerState:e})=>e.fullScreen,style:{margin:0,width:"100%",maxWidth:"100%",height:"100%",maxHeight:"none",borderRadius:0,[`&.${c1.paperScrollBody}`]:{margin:0,maxWidth:"100%"}}}]}))),Tu=M.forwardRef(function(e,t){const n=ir({props:e,name:"MuiDialog"}),i=Ec(),s={enter:i.transitions.duration.enteringScreen,exit:i.transitions.duration.leavingScreen},{"aria-describedby":a,"aria-labelledby":o,"aria-modal":l=!0,BackdropComponent:u,BackdropProps:c,children:h,className:m,disableEscapeKeyDown:g=!1,fullScreen:y=!1,fullWidth:v=!1,maxWidth:x="sm",onClick:w,onClose:E,open:D,PaperComponent:I=kc,PaperProps:A={},scroll:L="paper",slots:N={},slotProps:U={},TransitionComponent:B=ow,transitionDuration:k=s,TransitionProps:H,...q}=n,V={...n,disableEscapeKeyDown:g,fullScreen:y,fullWidth:v,maxWidth:x,scroll:L},Q=yJ(V),ie=M.useRef(),le=qe=>{ie.current=qe.target===qe.currentTarget},he=qe=>{w&&w(qe),ie.current&&(ie.current=null,E&&E(qe,"backdropClick"))},ae=Qh(o),ne=M.useMemo(()=>({titleId:ae}),[ae]),ue={transition:B,...N},ee={transition:H,paper:A,backdrop:c,...U},pe={slots:ue,slotProps:ee},[me,xe]=Sr("root",{elementType:_J,shouldForwardComponentProp:!0,externalForwardedProps:pe,ownerState:V,className:It(Q.root,m),ref:t}),[Be,Oe]=Sr("backdrop",{elementType:vJ,shouldForwardComponentProp:!0,externalForwardedProps:pe,ownerState:V}),[dt,Ke]=Sr("paper",{elementType:bJ,shouldForwardComponentProp:!0,externalForwardedProps:pe,ownerState:V,className:It(Q.paper,A.className)}),[_t,Ze]=Sr("container",{elementType:xJ,externalForwardedProps:pe,ownerState:V,className:Q.container}),[Ot,Nt]=Sr("transition",{elementType:ow,externalForwardedProps:pe,ownerState:V,additionalProps:{appear:!0,in:D,timeout:k,role:"presentation"}});return F.jsx(me,{closeAfterTransition:!0,slots:{backdrop:Be},slotProps:{backdrop:{transitionDuration:k,as:u,...Oe}},disableEscapeKeyDown:g,onClose:E,open:D,onClick:he,...xe,...q,children:F.jsx(Ot,{...Nt,children:F.jsx(_t,{onMouseDown:le,...Ze,children:F.jsx(dt,{as:I,elevation:24,role:"dialog","aria-describedby":a,"aria-labelledby":ae,"aria-modal":l,...Ke,children:F.jsx(c8.Provider,{value:ne,children:h})})})})})});function SJ(r){return nr("MuiSvgIcon",r)}Zt("MuiSvgIcon",["root","colorPrimary","colorSecondary","colorAction","colorError","colorDisabled","fontSizeInherit","fontSizeSmall","fontSizeMedium","fontSizeLarge"]);const TJ=r=>{const{color:e,fontSize:t,classes:n}=r,i={root:["root",e!=="inherit"&&`color${ft(e)}`,`fontSize${ft(t)}`]};return rr(i,SJ,n)},CJ=at("svg",{name:"MuiSvgIcon",slot:"Root",overridesResolver:(r,e)=>{const{ownerState:t}=r;return[e.root,t.color!=="inherit"&&e[`color${ft(t.color)}`],e[`fontSize${ft(t.fontSize)}`]]}})(hr(({theme:r})=>({userSelect:"none",width:"1em",height:"1em",display:"inline-block",flexShrink:0,transition:r.transitions?.create?.("fill",{duration:(r.vars??r).transitions?.duration?.shorter}),variants:[{props:e=>!e.hasSvgAsChild,style:{fill:"currentColor"}},{props:{fontSize:"inherit"},style:{fontSize:"inherit"}},{props:{fontSize:"small"},style:{fontSize:r.typography?.pxToRem?.(20)||"1.25rem"}},{props:{fontSize:"medium"},style:{fontSize:r.typography?.pxToRem?.(24)||"1.5rem"}},{props:{fontSize:"large"},style:{fontSize:r.typography?.pxToRem?.(35)||"2.1875rem"}},...Object.entries((r.vars??r).palette).filter(([,e])=>e&&e.main).map(([e])=>({props:{color:e},style:{color:(r.vars??r).palette?.[e]?.main}})),{props:{color:"action"},style:{color:(r.vars??r).palette?.action?.active}},{props:{color:"disabled"},style:{color:(r.vars??r).palette?.action?.disabled}},{props:{color:"inherit"},style:{color:void 0}}]}))),K_=M.forwardRef(function(e,t){const n=ir({props:e,name:"MuiSvgIcon"}),{children:i,className:s,color:a="inherit",component:o="svg",fontSize:l="medium",htmlColor:u,inheritViewBox:c=!1,titleAccess:h,viewBox:m="0 0 24 24",...g}=n,y=M.isValidElement(i)&&i.type==="svg",v={...n,color:a,component:o,fontSize:l,instanceFontSize:e.fontSize,inheritViewBox:c,viewBox:m,hasSvgAsChild:y},x={};c||(x.viewBox=m);const w=TJ(v);return F.jsxs(CJ,{as:o,className:It(w.root,s),focusable:"false",color:u,"aria-hidden":h?void 0:!0,role:h?"img":void 0,ref:t,...x,...g,...y&&i.props,ownerState:v,children:[y?i.props.children:i,h?F.jsx("title",{children:h}):null]})});K_.muiName="SvgIcon";function Ir(r,e){function t(n,i){return F.jsx(K_,{"data-testid":void 0,ref:i,...n,children:r})}return t.muiName=K_.muiName,M.memo(M.forwardRef(t))}function Dg(r,e=166){let t;function n(...i){const s=()=>{r.apply(this,i)};clearTimeout(t),t=setTimeout(s,e)}return n.clear=()=>{clearTimeout(t)},n}function v_(r,e){return M.isValidElement(r)&&e.indexOf(r.type.muiName??r.type?._payload?.value?.muiName)!==-1}function X_(r){const{controlled:e,default:t,name:n,state:i="value"}=r,{current:s}=M.useRef(e!==void 0),[a,o]=M.useState(t),l=s?e:a,u=M.useCallback(c=>{s||o(c)},[]);return[l,u]}function wJ(r,e){const t=r.charCodeAt(2);return r[0]==="o"&&r[1]==="n"&&t>=65&&t<=90&&typeof e=="function"}function A2(r,e){if(!r)return e;function t(a,o){const l={};return Object.keys(o).forEach(u=>{wJ(u,o[u])&&typeof a[u]=="function"&&(l[u]=(...c)=>{a[u](...c),o[u](...c)})}),l}if(typeof r=="function"||typeof e=="function")return a=>{const o=typeof e=="function"?e(a):e,l=typeof r=="function"?r({...a,...o}):r,u=It(a?.className,o?.className,l?.className),c=t(l,o);return{...o,...l,...c,...!!u&&{className:u},...o?.style&&l?.style&&{style:{...o.style,...l.style}},...o?.sx&&l?.sx&&{sx:[...Array.isArray(o.sx)?o.sx:[o.sx],...Array.isArray(l.sx)?l.sx:[l.sx]]}}};const n=e,i=t(r,n),s=It(n?.className,r?.className);return{...e,...r,...i,...!!s&&{className:s},...n?.style&&r?.style&&{style:{...n.style,...r.style}},...n?.sx&&r?.sx&&{sx:[...Array.isArray(n.sx)?n.sx:[n.sx],...Array.isArray(r.sx)?r.sx:[r.sx]]}}}const EJ=Ir(F.jsx("path",{d:"M20 18c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2H4c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2H0v2h24v-2zM4 6h16v10H4z"}));function g8(r,e){const t=tr({},e);return Object.keys(r).forEach(n=>{if(n.toString().match(/^(components|slots)$/))t[n]=tr({},r[n],t[n]);else if(n.toString().match(/^(componentsProps|slotProps)$/)){const i=r[n]||{},s=e[n];t[n]={},!s||!Object.keys(s)?t[n]=i:!i||!Object.keys(i)?t[n]=s:(t[n]=tr({},s),Object.keys(i).forEach(a=>{t[n][a]=g8(i[a],s[a])}))}else t[n]===void 0&&(t[n]=r[n])}),t}function kJ(r,e,t=void 0){const n={};return Object.keys(r).forEach(i=>{n[i]=r[i].reduce((s,a)=>{if(a){const o=e(a);o!==""&&s.push(o),t&&t[a]&&s.push(t[a])}return s},[]).join(" ")}),n}const rL=r=>r,AJ=()=>{let r=rL;return{configure(e){r=e},generate(e){return r(e)},reset(){r=rL}}},DJ=AJ(),IJ={active:"active",checked:"checked",completed:"completed",disabled:"disabled",error:"error",expanded:"expanded",focused:"focused",focusVisible:"focusVisible",open:"open",readOnly:"readOnly",required:"required",selected:"selected"};function v8(r,e,t="Mui"){const n=IJ[e];return n?`${t}-${n}`:`${DJ.generate(r)}-${e}`}function PJ(r,e,t="Mui"){const n={};return e.forEach(i=>{n[i]=v8(r,i,t)}),n}function RJ({theme:r,...e}){const t=Sl in r?r[Sl]:void 0;return F.jsx(JB,{...e,themeId:t?Sl:void 0,theme:t||r})}const qv={colorSchemeStorageKey:"mui-color-scheme",defaultLightColorScheme:"light",defaultDarkColorScheme:"dark",modeStorageKey:"mui-mode"},{CssVarsProvider:LJ}=DY({themeId:Sl,theme:()=>Db({cssVariables:!0}),colorSchemeStorageKey:qv.colorSchemeStorageKey,modeStorageKey:qv.modeStorageKey,defaultColorScheme:{light:qv.defaultLightColorScheme,dark:qv.defaultDarkColorScheme},resolveTheme:r=>{const e={...r,typography:i8(r.palette,r.typography)};return e.unstable_sx=function(n){return Ed({sx:n,theme:this})},e}}),OJ=LJ;function MJ({theme:r,...e}){const t=M.useMemo(()=>{if(typeof r=="function")return r;const n=Sl in r?r[Sl]:r;return"colorSchemes"in n?null:"vars"in n?r:{...r,vars:null}},[r]);return t?F.jsx(RJ,{theme:t,...e}):F.jsx(OJ,{theme:r,...e})}function y8(r,e){const t={...e};for(const n in r)if(Object.prototype.hasOwnProperty.call(r,n)){const i=n;if(i==="components"||i==="slots")t[i]={...r[i],...t[i]};else if(i==="componentsProps"||i==="slotProps"){const s=r[i],a=e[i];if(!a)t[i]=s||{};else if(!s)t[i]=a;else{t[i]={...a};for(const o in s)if(Object.prototype.hasOwnProperty.call(s,o)){const l=o;t[i][l]=y8(s[l],a[l])}}}else t[i]===void 0&&(t[i]=r[i])}return t}function nL(r){try{return r.matches(":focus-visible")}catch{}return!1}const iL={};function _8(r,e){const t=M.useRef(iL);return t.current===iL&&(t.current=r(e)),t}class Y_{static create(){return new Y_}static use(){const e=_8(Y_.create).current,[t,n]=M.useState(!1);return e.shouldMount=t,e.setShouldMount=n,M.useEffect(e.mountEffect,[t]),e}constructor(){this.ref={current:null},this.mounted=null,this.didMount=!1,this.shouldMount=!1,this.setShouldMount=null}mount(){return this.mounted||(this.mounted=BJ(),this.shouldMount=!0,this.setShouldMount(this.shouldMount)),this.mounted}mountEffect=()=>{this.shouldMount&&!this.didMount&&this.ref.current!==null&&(this.didMount=!0,this.mounted.resolve())};start(...e){this.mount().then(()=>this.ref.current?.start(...e))}stop(...e){this.mount().then(()=>this.ref.current?.stop(...e))}pulsate(...e){this.mount().then(()=>this.ref.current?.pulsate(...e))}}function FJ(){return Y_.use()}function BJ(){let r,e;const t=new Promise((n,i)=>{r=n,e=i});return t.resolve=r,t.reject=e,t}const NJ=[];function UJ(r){M.useEffect(r,NJ)}class D2{static create(){return new D2}currentId=null;start(e,t){this.clear(),this.currentId=setTimeout(()=>{this.currentId=null,t()},e)}clear=()=>{this.currentId!==null&&(clearTimeout(this.currentId),this.currentId=null)};disposeEffect=()=>this.clear}function Pb(){const r=_8(D2.create).current;return UJ(r.disposeEffect),r}function $J(r){const{className:e,classes:t,pulsate:n=!1,rippleX:i,rippleY:s,rippleSize:a,in:o,onExited:l,timeout:u}=r,[c,h]=M.useState(!1),m=It(e,t.ripple,t.rippleVisible,n&&t.ripplePulsate),g={width:a,height:a,top:-(a/2)+s,left:-(a/2)+i},y=It(t.child,c&&t.childLeaving,n&&t.childPulsate);return!o&&!c&&h(!0),M.useEffect(()=>{if(!o&&l!=null){const v=setTimeout(l,u);return()=>{clearTimeout(v)}}},[l,o,u]),F.jsx("span",{className:m,style:g,children:F.jsx("span",{className:y})})}const Uo=Zt("MuiTouchRipple",["root","ripple","rippleVisible","ripplePulsate","child","childLeaving","childPulsate"]),uw=550,jJ=80,zJ=wg`
  0% {
    transform: scale(0);
    opacity: 0.1;
  }

  100% {
    transform: scale(1);
    opacity: 0.3;
  }
`,HJ=wg`
  0% {
    opacity: 1;
  }

  100% {
    opacity: 0;
  }
`,VJ=wg`
  0% {
    transform: scale(1);
  }

  50% {
    transform: scale(0.92);
  }

  100% {
    transform: scale(1);
  }
`,WJ=at("span",{name:"MuiTouchRipple",slot:"Root"})({overflow:"hidden",pointerEvents:"none",position:"absolute",zIndex:0,top:0,right:0,bottom:0,left:0,borderRadius:"inherit"}),qJ=at($J,{name:"MuiTouchRipple",slot:"Ripple"})`
  opacity: 0;
  position: absolute;

  &.${Uo.rippleVisible} {
    opacity: 0.3;
    transform: scale(1);
    animation-name: ${zJ};
    animation-duration: ${uw}ms;
    animation-timing-function: ${({theme:r})=>r.transitions.easing.easeInOut};
  }

  &.${Uo.ripplePulsate} {
    animation-duration: ${({theme:r})=>r.transitions.duration.shorter}ms;
  }

  & .${Uo.child} {
    opacity: 1;
    display: block;
    width: 100%;
    height: 100%;
    border-radius: 50%;
    background-color: currentColor;
  }

  & .${Uo.childLeaving} {
    opacity: 0;
    animation-name: ${HJ};
    animation-duration: ${uw}ms;
    animation-timing-function: ${({theme:r})=>r.transitions.easing.easeInOut};
  }

  & .${Uo.childPulsate} {
    position: absolute;
    /* @noflip */
    left: 0px;
    top: 0;
    animation-name: ${VJ};
    animation-duration: 2500ms;
    animation-timing-function: ${({theme:r})=>r.transitions.easing.easeInOut};
    animation-iteration-count: infinite;
    animation-delay: 200ms;
  }
`,GJ=M.forwardRef(function(e,t){const n=ir({props:e,name:"MuiTouchRipple"}),{center:i=!1,classes:s={},className:a,...o}=n,[l,u]=M.useState([]),c=M.useRef(0),h=M.useRef(null);M.useEffect(()=>{h.current&&(h.current(),h.current=null)},[l]);const m=M.useRef(!1),g=Pb(),y=M.useRef(null),v=M.useRef(null),x=M.useCallback(I=>{const{pulsate:A,rippleX:L,rippleY:N,rippleSize:U,cb:B}=I;u(k=>[...k,F.jsx(qJ,{classes:{ripple:It(s.ripple,Uo.ripple),rippleVisible:It(s.rippleVisible,Uo.rippleVisible),ripplePulsate:It(s.ripplePulsate,Uo.ripplePulsate),child:It(s.child,Uo.child),childLeaving:It(s.childLeaving,Uo.childLeaving),childPulsate:It(s.childPulsate,Uo.childPulsate)},timeout:uw,pulsate:A,rippleX:L,rippleY:N,rippleSize:U},c.current)]),c.current+=1,h.current=B},[s]),w=M.useCallback((I={},A={},L=()=>{})=>{const{pulsate:N=!1,center:U=i||A.pulsate,fakeElement:B=!1}=A;if(I?.type==="mousedown"&&m.current){m.current=!1;return}I?.type==="touchstart"&&(m.current=!0);const k=B?null:v.current,H=k?k.getBoundingClientRect():{width:0,height:0,left:0,top:0};let q,V,Q;if(U||I===void 0||I.clientX===0&&I.clientY===0||!I.clientX&&!I.touches)q=Math.round(H.width/2),V=Math.round(H.height/2);else{const{clientX:ie,clientY:le}=I.touches&&I.touches.length>0?I.touches[0]:I;q=Math.round(ie-H.left),V=Math.round(le-H.top)}if(U)Q=Math.sqrt((2*H.width**2+H.height**2)/3),Q%2===0&&(Q+=1);else{const ie=Math.max(Math.abs((k?k.clientWidth:0)-q),q)*2+2,le=Math.max(Math.abs((k?k.clientHeight:0)-V),V)*2+2;Q=Math.sqrt(ie**2+le**2)}I?.touches?y.current===null&&(y.current=()=>{x({pulsate:N,rippleX:q,rippleY:V,rippleSize:Q,cb:L})},g.start(jJ,()=>{y.current&&(y.current(),y.current=null)})):x({pulsate:N,rippleX:q,rippleY:V,rippleSize:Q,cb:L})},[i,x,g]),E=M.useCallback(()=>{w({},{pulsate:!0})},[w]),D=M.useCallback((I,A)=>{if(g.clear(),I?.type==="touchend"&&y.current){y.current(),y.current=null,g.start(0,()=>{D(I,A)});return}y.current=null,u(L=>L.length>0?L.slice(1):L),h.current=A},[g]);return M.useImperativeHandle(t,()=>({pulsate:E,start:w,stop:D}),[E,w,D]),F.jsx(WJ,{className:It(Uo.root,s.root,a),ref:v,...o,children:F.jsx(w2,{component:null,exit:!0,children:l})})});function KJ(r){return nr("MuiButtonBase",r)}const XJ=Zt("MuiButtonBase",["root","disabled","focusVisible"]),YJ=r=>{const{disabled:e,focusVisible:t,focusVisibleClassName:n,classes:i}=r,a=rr({root:["root",e&&"disabled",t&&"focusVisible"]},KJ,i);return t&&n&&(a.root+=` ${n}`),a},QJ=at("button",{name:"MuiButtonBase",slot:"Root"})({display:"inline-flex",alignItems:"center",justifyContent:"center",position:"relative",boxSizing:"border-box",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none",textDecoration:"none",color:"inherit","&::-moz-focus-inner":{borderStyle:"none"},[`&.${XJ.disabled}`]:{pointerEvents:"none",cursor:"default"},"@media print":{colorAdjust:"exact"}}),bc=M.forwardRef(function(e,t){const n=ir({props:e,name:"MuiButtonBase"}),{action:i,centerRipple:s=!1,children:a,className:o,component:l="button",disabled:u=!1,disableRipple:c=!1,disableTouchRipple:h=!1,focusRipple:m=!1,focusVisibleClassName:g,LinkComponent:y="a",onBlur:v,onClick:x,onContextMenu:w,onDragLeave:E,onFocus:D,onFocusVisible:I,onKeyDown:A,onKeyUp:L,onMouseDown:N,onMouseLeave:U,onMouseUp:B,onTouchEnd:k,onTouchMove:H,onTouchStart:q,tabIndex:V=0,TouchRippleProps:Q,touchRippleRef:ie,type:le,...he}=n,ae=M.useRef(null),ne=FJ(),ue=ci(ne.ref,ie),[ee,pe]=M.useState(!1);u&&ee&&pe(!1),M.useImperativeHandle(i,()=>({focusVisible:()=>{pe(!0),ae.current.focus()}}),[]);const me=ne.shouldMount&&!c&&!u;M.useEffect(()=>{ee&&m&&!c&&ne.pulsate()},[c,m,ee,ne]);const xe=ic(ne,"start",N,h),Be=ic(ne,"stop",w,h),Oe=ic(ne,"stop",E,h),dt=ic(ne,"stop",B,h),Ke=ic(ne,"stop",ot=>{ee&&ot.preventDefault(),U&&U(ot)},h),_t=ic(ne,"start",q,h),Ze=ic(ne,"stop",k,h),Ot=ic(ne,"stop",H,h),Nt=ic(ne,"stop",ot=>{nL(ot.target)||pe(!1),v&&v(ot)},!1),qe=ho(ot=>{ae.current||(ae.current=ot.currentTarget),nL(ot.target)&&(pe(!0),I&&I(ot)),D&&D(ot)}),Ue=()=>{const ot=ae.current;return l&&l!=="button"&&!(ot.tagName==="A"&&ot.href)},Pe=ho(ot=>{m&&!ot.repeat&&ee&&ot.key===" "&&ne.stop(ot,()=>{ne.start(ot)}),ot.target===ot.currentTarget&&Ue()&&ot.key===" "&&ot.preventDefault(),A&&A(ot),ot.target===ot.currentTarget&&Ue()&&ot.key==="Enter"&&!u&&(ot.preventDefault(),x&&x(ot))}),$e=ho(ot=>{m&&ot.key===" "&&ee&&!ot.defaultPrevented&&ne.stop(ot,()=>{ne.pulsate(ot)}),L&&L(ot),x&&ot.target===ot.currentTarget&&Ue()&&ot.key===" "&&!ot.defaultPrevented&&x(ot)});let rt=l;rt==="button"&&(he.href||he.to)&&(rt=y);const lt={};rt==="button"?(lt.type=le===void 0?"button":le,lt.disabled=u):(!he.href&&!he.to&&(lt.role="button"),u&&(lt["aria-disabled"]=u));const ht=ci(t,ae),ut={...n,centerRipple:s,component:l,disabled:u,disableRipple:c,disableTouchRipple:h,focusRipple:m,tabIndex:V,focusVisible:ee},St=YJ(ut);return F.jsxs(QJ,{as:rt,className:It(St.root,o),ownerState:ut,onBlur:Nt,onClick:x,onContextMenu:Be,onFocus:qe,onKeyDown:Pe,onKeyUp:$e,onMouseDown:xe,onMouseLeave:Ke,onMouseUp:dt,onDragLeave:Oe,onTouchEnd:Ze,onTouchMove:Ot,onTouchStart:_t,ref:ht,tabIndex:u?-1:V,type:le,...lt,...he,children:[a,me?F.jsx(GJ,{ref:ue,center:s,...Q}):null]})});function ic(r,e,t,n=!1){return ho(i=>(t&&t(i),n||r[e](i),!0))}function JJ(r){return nr("MuiCircularProgress",r)}Zt("MuiCircularProgress",["root","determinate","indeterminate","colorPrimary","colorSecondary","svg","circle","circleDeterminate","circleIndeterminate","circleDisableShrink"]);const ad=44,cw=wg`
  0% {
    transform: rotate(0deg);
  }

  100% {
    transform: rotate(360deg);
  }
`,dw=wg`
  0% {
    stroke-dasharray: 1px, 200px;
    stroke-dashoffset: 0;
  }

  50% {
    stroke-dasharray: 100px, 200px;
    stroke-dashoffset: -15px;
  }

  100% {
    stroke-dasharray: 1px, 200px;
    stroke-dashoffset: -126px;
  }
`,ZJ=typeof cw!="string"?m2`
        animation: ${cw} 1.4s linear infinite;
      `:null,eZ=typeof dw!="string"?m2`
        animation: ${dw} 1.4s ease-in-out infinite;
      `:null,tZ=r=>{const{classes:e,variant:t,color:n,disableShrink:i}=r,s={root:["root",t,`color${ft(n)}`],svg:["svg"],circle:["circle",`circle${ft(t)}`,i&&"circleDisableShrink"]};return rr(s,JJ,e)},rZ=at("span",{name:"MuiCircularProgress",slot:"Root",overridesResolver:(r,e)=>{const{ownerState:t}=r;return[e.root,e[t.variant],e[`color${ft(t.color)}`]]}})(hr(({theme:r})=>({display:"inline-block",variants:[{props:{variant:"determinate"},style:{transition:r.transitions.create("transform")}},{props:{variant:"indeterminate"},style:ZJ||{animation:`${cw} 1.4s linear infinite`}},...Object.entries(r.palette).filter(es()).map(([e])=>({props:{color:e},style:{color:(r.vars||r).palette[e].main}}))]}))),nZ=at("svg",{name:"MuiCircularProgress",slot:"Svg"})({display:"block"}),iZ=at("circle",{name:"MuiCircularProgress",slot:"Circle",overridesResolver:(r,e)=>{const{ownerState:t}=r;return[e.circle,e[`circle${ft(t.variant)}`],t.disableShrink&&e.circleDisableShrink]}})(hr(({theme:r})=>({stroke:"currentColor",variants:[{props:{variant:"determinate"},style:{transition:r.transitions.create("stroke-dashoffset")}},{props:{variant:"indeterminate"},style:{strokeDasharray:"80px, 200px",strokeDashoffset:0}},{props:({ownerState:e})=>e.variant==="indeterminate"&&!e.disableShrink,style:eZ||{animation:`${dw} 1.4s ease-in-out infinite`}}]}))),Y0=M.forwardRef(function(e,t){const n=ir({props:e,name:"MuiCircularProgress"}),{className:i,color:s="primary",disableShrink:a=!1,size:o=40,style:l,thickness:u=3.6,value:c=0,variant:h="indeterminate",...m}=n,g={...n,color:s,disableShrink:a,size:o,thickness:u,value:c,variant:h},y=tZ(g),v={},x={},w={};if(h==="determinate"){const E=2*Math.PI*((ad-u)/2);v.strokeDasharray=E.toFixed(3),w["aria-valuenow"]=Math.round(c),v.strokeDashoffset=`${((100-c)/100*E).toFixed(3)}px`,x.transform="rotate(-90deg)"}return F.jsx(rZ,{className:It(y.root,i),style:{width:o,height:o,...x,...l},ownerState:g,ref:t,role:"progressbar",...w,...m,children:F.jsx(nZ,{className:y.svg,ownerState:g,viewBox:`${ad/2} ${ad/2} ${ad} ${ad}`,children:F.jsx(iZ,{className:y.circle,style:v,ownerState:g,cx:ad,cy:ad,r:(ad-u)/2,fill:"none",strokeWidth:u})})})});function sZ(r){return nr("MuiButton",r)}const lh=Zt("MuiButton",["root","text","textInherit","textPrimary","textSecondary","textSuccess","textError","textInfo","textWarning","outlined","outlinedInherit","outlinedPrimary","outlinedSecondary","outlinedSuccess","outlinedError","outlinedInfo","outlinedWarning","contained","containedInherit","containedPrimary","containedSecondary","containedSuccess","containedError","containedInfo","containedWarning","disableElevation","focusVisible","disabled","colorInherit","colorPrimary","colorSecondary","colorSuccess","colorError","colorInfo","colorWarning","textSizeSmall","textSizeMedium","textSizeLarge","outlinedSizeSmall","outlinedSizeMedium","outlinedSizeLarge","containedSizeSmall","containedSizeMedium","containedSizeLarge","sizeMedium","sizeSmall","sizeLarge","fullWidth","startIcon","endIcon","icon","iconSizeSmall","iconSizeMedium","iconSizeLarge","loading","loadingWrapper","loadingIconPlaceholder","loadingIndicator","loadingPositionCenter","loadingPositionStart","loadingPositionEnd"]),x8=M.createContext({}),aZ=M.createContext(void 0),oZ=r=>{const{color:e,disableElevation:t,fullWidth:n,size:i,variant:s,loading:a,loadingPosition:o,classes:l}=r,u={root:["root",a&&"loading",s,`${s}${ft(e)}`,`size${ft(i)}`,`${s}Size${ft(i)}`,`color${ft(e)}`,t&&"disableElevation",n&&"fullWidth",a&&`loadingPosition${ft(o)}`],startIcon:["icon","startIcon",`iconSize${ft(i)}`],endIcon:["icon","endIcon",`iconSize${ft(i)}`],loadingIndicator:["loadingIndicator"],loadingWrapper:["loadingWrapper"]},c=rr(u,sZ,l);return{...l,...c}},b8=[{props:{size:"small"},style:{"& > *:nth-of-type(1)":{fontSize:18}}},{props:{size:"medium"},style:{"& > *:nth-of-type(1)":{fontSize:20}}},{props:{size:"large"},style:{"& > *:nth-of-type(1)":{fontSize:22}}}],lZ=at(bc,{shouldForwardProp:r=>is(r)||r==="classes",name:"MuiButton",slot:"Root",overridesResolver:(r,e)=>{const{ownerState:t}=r;return[e.root,e[t.variant],e[`${t.variant}${ft(t.color)}`],e[`size${ft(t.size)}`],e[`${t.variant}Size${ft(t.size)}`],t.color==="inherit"&&e.colorInherit,t.disableElevation&&e.disableElevation,t.fullWidth&&e.fullWidth,t.loading&&e.loading]}})(hr(({theme:r})=>{const e=r.palette.mode==="light"?r.palette.grey[300]:r.palette.grey[800],t=r.palette.mode==="light"?r.palette.grey.A100:r.palette.grey[700];return{...r.typography.button,minWidth:64,padding:"6px 16px",border:0,borderRadius:(r.vars||r).shape.borderRadius,transition:r.transitions.create(["background-color","box-shadow","border-color","color"],{duration:r.transitions.duration.short}),"&:hover":{textDecoration:"none"},[`&.${lh.disabled}`]:{color:(r.vars||r).palette.action.disabled},variants:[{props:{variant:"contained"},style:{color:"var(--variant-containedColor)",backgroundColor:"var(--variant-containedBg)",boxShadow:(r.vars||r).shadows[2],"&:hover":{boxShadow:(r.vars||r).shadows[4],"@media (hover: none)":{boxShadow:(r.vars||r).shadows[2]}},"&:active":{boxShadow:(r.vars||r).shadows[8]},[`&.${lh.focusVisible}`]:{boxShadow:(r.vars||r).shadows[6]},[`&.${lh.disabled}`]:{color:(r.vars||r).palette.action.disabled,boxShadow:(r.vars||r).shadows[0],backgroundColor:(r.vars||r).palette.action.disabledBackground}}},{props:{variant:"outlined"},style:{padding:"5px 15px",border:"1px solid currentColor",borderColor:"var(--variant-outlinedBorder, currentColor)",backgroundColor:"var(--variant-outlinedBg)",color:"var(--variant-outlinedColor)",[`&.${lh.disabled}`]:{border:`1px solid ${(r.vars||r).palette.action.disabledBackground}`}}},{props:{variant:"text"},style:{padding:"6px 8px",color:"var(--variant-textColor)",backgroundColor:"var(--variant-textBg)"}},...Object.entries(r.palette).filter(es()).map(([n])=>({props:{color:n},style:{"--variant-textColor":(r.vars||r).palette[n].main,"--variant-outlinedColor":(r.vars||r).palette[n].main,"--variant-outlinedBorder":r.vars?`rgba(${r.vars.palette[n].mainChannel} / 0.5)`:Xr(r.palette[n].main,.5),"--variant-containedColor":(r.vars||r).palette[n].contrastText,"--variant-containedBg":(r.vars||r).palette[n].main,"@media (hover: hover)":{"&:hover":{"--variant-containedBg":(r.vars||r).palette[n].dark,"--variant-textBg":r.vars?`rgba(${r.vars.palette[n].mainChannel} / ${r.vars.palette.action.hoverOpacity})`:Xr(r.palette[n].main,r.palette.action.hoverOpacity),"--variant-outlinedBorder":(r.vars||r).palette[n].main,"--variant-outlinedBg":r.vars?`rgba(${r.vars.palette[n].mainChannel} / ${r.vars.palette.action.hoverOpacity})`:Xr(r.palette[n].main,r.palette.action.hoverOpacity)}}}})),{props:{color:"inherit"},style:{color:"inherit",borderColor:"currentColor","--variant-containedBg":r.vars?r.vars.palette.Button.inheritContainedBg:e,"@media (hover: hover)":{"&:hover":{"--variant-containedBg":r.vars?r.vars.palette.Button.inheritContainedHoverBg:t,"--variant-textBg":r.vars?`rgba(${r.vars.palette.text.primaryChannel} / ${r.vars.palette.action.hoverOpacity})`:Xr(r.palette.text.primary,r.palette.action.hoverOpacity),"--variant-outlinedBg":r.vars?`rgba(${r.vars.palette.text.primaryChannel} / ${r.vars.palette.action.hoverOpacity})`:Xr(r.palette.text.primary,r.palette.action.hoverOpacity)}}}},{props:{size:"small",variant:"text"},style:{padding:"4px 5px",fontSize:r.typography.pxToRem(13)}},{props:{size:"large",variant:"text"},style:{padding:"8px 11px",fontSize:r.typography.pxToRem(15)}},{props:{size:"small",variant:"outlined"},style:{padding:"3px 9px",fontSize:r.typography.pxToRem(13)}},{props:{size:"large",variant:"outlined"},style:{padding:"7px 21px",fontSize:r.typography.pxToRem(15)}},{props:{size:"small",variant:"contained"},style:{padding:"4px 10px",fontSize:r.typography.pxToRem(13)}},{props:{size:"large",variant:"contained"},style:{padding:"8px 22px",fontSize:r.typography.pxToRem(15)}},{props:{disableElevation:!0},style:{boxShadow:"none","&:hover":{boxShadow:"none"},[`&.${lh.focusVisible}`]:{boxShadow:"none"},"&:active":{boxShadow:"none"},[`&.${lh.disabled}`]:{boxShadow:"none"}}},{props:{fullWidth:!0},style:{width:"100%"}},{props:{loadingPosition:"center"},style:{transition:r.transitions.create(["background-color","box-shadow","border-color"],{duration:r.transitions.duration.short}),[`&.${lh.loading}`]:{color:"transparent"}}}]}})),uZ=at("span",{name:"MuiButton",slot:"StartIcon",overridesResolver:(r,e)=>{const{ownerState:t}=r;return[e.startIcon,t.loading&&e.startIconLoadingStart,e[`iconSize${ft(t.size)}`]]}})(({theme:r})=>({display:"inherit",marginRight:8,marginLeft:-4,variants:[{props:{size:"small"},style:{marginLeft:-2}},{props:{loadingPosition:"start",loading:!0},style:{transition:r.transitions.create(["opacity"],{duration:r.transitions.duration.short}),opacity:0}},{props:{loadingPosition:"start",loading:!0,fullWidth:!0},style:{marginRight:-8}},...b8]})),cZ=at("span",{name:"MuiButton",slot:"EndIcon",overridesResolver:(r,e)=>{const{ownerState:t}=r;return[e.endIcon,t.loading&&e.endIconLoadingEnd,e[`iconSize${ft(t.size)}`]]}})(({theme:r})=>({display:"inherit",marginRight:-4,marginLeft:8,variants:[{props:{size:"small"},style:{marginRight:-2}},{props:{loadingPosition:"end",loading:!0},style:{transition:r.transitions.create(["opacity"],{duration:r.transitions.duration.short}),opacity:0}},{props:{loadingPosition:"end",loading:!0,fullWidth:!0},style:{marginLeft:-8}},...b8]})),dZ=at("span",{name:"MuiButton",slot:"LoadingIndicator"})(({theme:r})=>({display:"none",position:"absolute",visibility:"visible",variants:[{props:{loading:!0},style:{display:"flex"}},{props:{loadingPosition:"start"},style:{left:14}},{props:{loadingPosition:"start",size:"small"},style:{left:10}},{props:{variant:"text",loadingPosition:"start"},style:{left:6}},{props:{loadingPosition:"center"},style:{left:"50%",transform:"translate(-50%)",color:(r.vars||r).palette.action.disabled}},{props:{loadingPosition:"end"},style:{right:14}},{props:{loadingPosition:"end",size:"small"},style:{right:10}},{props:{variant:"text",loadingPosition:"end"},style:{right:6}},{props:{loadingPosition:"start",fullWidth:!0},style:{position:"relative",left:-10}},{props:{loadingPosition:"end",fullWidth:!0},style:{position:"relative",right:-10}}]})),sL=at("span",{name:"MuiButton",slot:"LoadingIconPlaceholder"})({display:"inline-block",width:"1em",height:"1em"}),Wr=M.forwardRef(function(e,t){const n=M.useContext(x8),i=M.useContext(aZ),s=y8(n,e),a=ir({props:s,name:"MuiButton"}),{children:o,color:l="primary",component:u="button",className:c,disabled:h=!1,disableElevation:m=!1,disableFocusRipple:g=!1,endIcon:y,focusVisibleClassName:v,fullWidth:x=!1,id:w,loading:E=null,loadingIndicator:D,loadingPosition:I="center",size:A="medium",startIcon:L,type:N,variant:U="text",...B}=a,k=Qh(w),H=D??F.jsx(Y0,{"aria-labelledby":k,color:"inherit",size:16}),q={...a,color:l,component:u,disabled:h,disableElevation:m,disableFocusRipple:g,fullWidth:x,loading:E,loadingIndicator:H,loadingPosition:I,size:A,type:N,variant:U},V=oZ(q),Q=(L||E&&I==="start")&&F.jsx(uZ,{className:V.startIcon,ownerState:q,children:L||F.jsx(sL,{className:V.loadingIconPlaceholder,ownerState:q})}),ie=(y||E&&I==="end")&&F.jsx(cZ,{className:V.endIcon,ownerState:q,children:y||F.jsx(sL,{className:V.loadingIconPlaceholder,ownerState:q})}),le=i||"",he=typeof E=="boolean"?F.jsx("span",{className:V.loadingWrapper,style:{display:"contents"},children:E&&F.jsx(dZ,{className:V.loadingIndicator,ownerState:q,children:H})}):null;return F.jsxs(lZ,{ownerState:q,className:It(n.className,V.root,c,le),component:u,disabled:h||E,focusRipple:!g,focusVisibleClassName:It(V.focusVisible,v),ref:t,type:N,id:E?k:w,...B,classes:V,children:[Q,I!=="end"&&he,o,I==="end"&&he,ie]})});function hZ(r){return v8("MuiLoadingButton",r)}const sc=PJ("MuiLoadingButton",["root","loading","loadingIndicator","loadingIndicatorCenter","loadingIndicatorStart","loadingIndicatorEnd","endIconLoadingEnd","startIconLoadingStart"]),fZ=["children","disabled","id","loading","loadingIndicator","loadingPosition","variant"],pZ=r=>{const{loading:e,loadingPosition:t,classes:n}=r,i={root:["root",e&&"loading"],startIcon:[e&&`startIconLoading${ft(t)}`],endIcon:[e&&`endIconLoading${ft(t)}`],loadingIndicator:["loadingIndicator",e&&`loadingIndicator${ft(t)}`]},s=kJ(i,hZ,n);return tr({},n,s)},mZ=r=>r!=="ownerState"&&r!=="theme"&&r!=="sx"&&r!=="as"&&r!=="classes",gZ=at(Wr,{shouldForwardProp:r=>mZ(r)||r==="classes",name:"MuiLoadingButton",slot:"Root",overridesResolver:(r,e)=>[e.root,e.startIconLoadingStart&&{[`& .${sc.startIconLoadingStart}`]:e.startIconLoadingStart},e.endIconLoadingEnd&&{[`& .${sc.endIconLoadingEnd}`]:e.endIconLoadingEnd}]})(({ownerState:r,theme:e})=>tr({[`& .${sc.startIconLoadingStart}, & .${sc.endIconLoadingEnd}`]:{transition:e.transitions.create(["opacity"],{duration:e.transitions.duration.short}),opacity:0}},r.loadingPosition==="center"&&{transition:e.transitions.create(["background-color","box-shadow","border-color"],{duration:e.transitions.duration.short}),[`&.${sc.loading}`]:{color:"transparent"}},r.loadingPosition==="start"&&r.fullWidth&&{[`& .${sc.startIconLoadingStart}, & .${sc.endIconLoadingEnd}`]:{transition:e.transitions.create(["opacity"],{duration:e.transitions.duration.short}),opacity:0,marginRight:-8}},r.loadingPosition==="end"&&r.fullWidth&&{[`& .${sc.startIconLoadingStart}, & .${sc.endIconLoadingEnd}`]:{transition:e.transitions.create(["opacity"],{duration:e.transitions.duration.short}),opacity:0,marginLeft:-8}})),vZ=at("span",{name:"MuiLoadingButton",slot:"LoadingIndicator",overridesResolver:(r,e)=>{const{ownerState:t}=r;return[e.loadingIndicator,e[`loadingIndicator${ft(t.loadingPosition)}`]]}})(({theme:r,ownerState:e})=>tr({position:"absolute",visibility:"visible",display:"flex"},e.loadingPosition==="start"&&(e.variant==="outlined"||e.variant==="contained")&&{left:e.size==="small"?10:14},e.loadingPosition==="start"&&e.variant==="text"&&{left:6},e.loadingPosition==="center"&&{left:"50%",transform:"translate(-50%)",color:(r.vars||r).palette.action.disabled},e.loadingPosition==="end"&&(e.variant==="outlined"||e.variant==="contained")&&{right:e.size==="small"?10:14},e.loadingPosition==="end"&&e.variant==="text"&&{right:6},e.loadingPosition==="start"&&e.fullWidth&&{position:"relative",left:-10},e.loadingPosition==="end"&&e.fullWidth&&{position:"relative",right:-10})),Vo=M.forwardRef(function(e,t){const n=M.useContext(x8),i=g8(n,e),s=ir({props:i,name:"MuiLoadingButton"}),{children:a,disabled:o=!1,id:l,loading:u=!1,loadingIndicator:c,loadingPosition:h="center",variant:m="text"}=s,g=Ib(s,fZ),y=Qh(l),v=c??F.jsx(Y0,{"aria-labelledby":y,color:"inherit",size:16}),x=tr({},s,{disabled:o,loading:u,loadingIndicator:v,loadingPosition:h,variant:m}),w=pZ(x),E=u?F.jsx(vZ,{className:w.loadingIndicator,ownerState:x,children:v}):null;return F.jsxs(gZ,tr({disabled:o||u,id:y,ref:t},g,{variant:m,classes:w,ownerState:x,children:[x.loadingPosition==="end"?a:E,x.loadingPosition==="end"?E:a]}))}),hw=Ir(F.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m-1 17.93c-3.95-.49-7-3.85-7-7.93 0-.62.08-1.21.21-1.79L9 15v1c0 1.1.9 2 2 2zm6.9-2.54c-.26-.81-1-1.39-1.9-1.39h-1v-3c0-.55-.45-1-1-1H8v-2h2c.55 0 1-.45 1-1V7h2c1.1 0 2-.9 2-2v-.41c2.93 1.19 5 4.06 5 7.41 0 2.08-.8 3.97-2.1 5.39"})),yZ="/assets/icon-BiexIA3y.png",_Z=Zt("MuiBox",["root"]),xZ=Db(),Lt=KX({themeId:Sl,defaultTheme:xZ,defaultClassName:_Z.root,generateClassName:n8.generate}),aL=Ir(F.jsx("path",{d:"M19 3H4.99C3.89 3 3 3.9 3 5l.01 14c0 1.1.89 2 1.99 2h10l6-6V5c0-1.1-.9-2-2-2M7 8h10v2H7zm5 6H7v-2h5zm2 5.5V14h5.5z"})),Tl=M.createContext({});function bZ(r){return nr("MuiList",r)}Zt("MuiList",["root","padding","dense","subheader"]);const SZ=r=>{const{classes:e,disablePadding:t,dense:n,subheader:i}=r;return rr({root:["root",!t&&"padding",n&&"dense",i&&"subheader"]},bZ,e)},TZ=at("ul",{name:"MuiList",slot:"Root",overridesResolver:(r,e)=>{const{ownerState:t}=r;return[e.root,!t.disablePadding&&e.padding,t.dense&&e.dense,t.subheader&&e.subheader]}})({listStyle:"none",margin:0,padding:0,position:"relative",variants:[{props:({ownerState:r})=>!r.disablePadding,style:{paddingTop:8,paddingBottom:8}},{props:({ownerState:r})=>r.subheader,style:{paddingTop:0}}]}),fw=M.forwardRef(function(e,t){const n=ir({props:e,name:"MuiList"}),{children:i,className:s,component:a="ul",dense:o=!1,disablePadding:l=!1,subheader:u,...c}=n,h=M.useMemo(()=>({dense:o}),[o]),m={...n,component:a,dense:o,disablePadding:l},g=SZ(m);return F.jsx(Tl.Provider,{value:h,children:F.jsxs(TZ,{as:a,className:It(g.root,s),ref:t,ownerState:m,...c,children:[u,i]})})});function Q0(r){return typeof r=="string"}function CZ(r){return nr("MuiListItem",r)}Zt("MuiListItem",["root","container","dense","alignItemsFlexStart","divider","gutters","padding","secondaryAction"]);function wZ(r){return nr("MuiListItemButton",r)}const $f=Zt("MuiListItemButton",["root","focusVisible","dense","alignItemsFlexStart","disabled","divider","gutters","selected"]),EZ=(r,e)=>{const{ownerState:t}=r;return[e.root,t.dense&&e.dense,t.alignItems==="flex-start"&&e.alignItemsFlexStart,t.divider&&e.divider,!t.disableGutters&&e.gutters]},kZ=r=>{const{alignItems:e,classes:t,dense:n,disabled:i,disableGutters:s,divider:a,selected:o}=r,u=rr({root:["root",n&&"dense",!s&&"gutters",a&&"divider",i&&"disabled",e==="flex-start"&&"alignItemsFlexStart",o&&"selected"]},wZ,t);return{...t,...u}},AZ=at(bc,{shouldForwardProp:r=>is(r)||r==="classes",name:"MuiListItemButton",slot:"Root",overridesResolver:EZ})(hr(({theme:r})=>({display:"flex",flexGrow:1,justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",minWidth:0,boxSizing:"border-box",textAlign:"left",paddingTop:8,paddingBottom:8,transition:r.transitions.create("background-color",{duration:r.transitions.duration.shortest}),"&:hover":{textDecoration:"none",backgroundColor:(r.vars||r).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${$f.selected}`]:{backgroundColor:r.vars?`rgba(${r.vars.palette.primary.mainChannel} / ${r.vars.palette.action.selectedOpacity})`:Xr(r.palette.primary.main,r.palette.action.selectedOpacity),[`&.${$f.focusVisible}`]:{backgroundColor:r.vars?`rgba(${r.vars.palette.primary.mainChannel} / calc(${r.vars.palette.action.selectedOpacity} + ${r.vars.palette.action.focusOpacity}))`:Xr(r.palette.primary.main,r.palette.action.selectedOpacity+r.palette.action.focusOpacity)}},[`&.${$f.selected}:hover`]:{backgroundColor:r.vars?`rgba(${r.vars.palette.primary.mainChannel} / calc(${r.vars.palette.action.selectedOpacity} + ${r.vars.palette.action.hoverOpacity}))`:Xr(r.palette.primary.main,r.palette.action.selectedOpacity+r.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:r.vars?`rgba(${r.vars.palette.primary.mainChannel} / ${r.vars.palette.action.selectedOpacity})`:Xr(r.palette.primary.main,r.palette.action.selectedOpacity)}},[`&.${$f.focusVisible}`]:{backgroundColor:(r.vars||r).palette.action.focus},[`&.${$f.disabled}`]:{opacity:(r.vars||r).palette.action.disabledOpacity},variants:[{props:({ownerState:e})=>e.divider,style:{borderBottom:`1px solid ${(r.vars||r).palette.divider}`,backgroundClip:"padding-box"}},{props:{alignItems:"flex-start"},style:{alignItems:"flex-start"}},{props:({ownerState:e})=>!e.disableGutters,style:{paddingLeft:16,paddingRight:16}},{props:({ownerState:e})=>e.dense,style:{paddingTop:4,paddingBottom:4}}]}))),oL=M.forwardRef(function(e,t){const n=ir({props:e,name:"MuiListItemButton"}),{alignItems:i="center",autoFocus:s=!1,component:a="div",children:o,dense:l=!1,disableGutters:u=!1,divider:c=!1,focusVisibleClassName:h,selected:m=!1,className:g,...y}=n,v=M.useContext(Tl),x=M.useMemo(()=>({dense:l||v.dense||!1,alignItems:i,disableGutters:u}),[i,v.dense,l,u]),w=M.useRef(null);Su(()=>{s&&w.current&&w.current.focus()},[s]);const E={...n,alignItems:i,dense:x.dense,disableGutters:u,divider:c,selected:m},D=kZ(E),I=ci(w,t);return F.jsx(Tl.Provider,{value:x,children:F.jsx(AZ,{ref:I,href:y.href||y.to,component:(y.href||y.to)&&a==="div"?"button":a,focusVisibleClassName:It(D.focusVisible,h),ownerState:E,className:It(D.root,g),...y,classes:D,children:o})})});function DZ(r){return nr("MuiListItemSecondaryAction",r)}Zt("MuiListItemSecondaryAction",["root","disableGutters"]);const IZ=r=>{const{disableGutters:e,classes:t}=r;return rr({root:["root",e&&"disableGutters"]},DZ,t)},PZ=at("div",{name:"MuiListItemSecondaryAction",slot:"Root",overridesResolver:(r,e)=>{const{ownerState:t}=r;return[e.root,t.disableGutters&&e.disableGutters]}})({position:"absolute",right:16,top:"50%",transform:"translateY(-50%)",variants:[{props:({ownerState:r})=>r.disableGutters,style:{right:0}}]}),S8=M.forwardRef(function(e,t){const n=ir({props:e,name:"MuiListItemSecondaryAction"}),{className:i,...s}=n,a=M.useContext(Tl),o={...n,disableGutters:a.disableGutters},l=IZ(o);return F.jsx(PZ,{className:It(l.root,i),ownerState:o,ref:t,...s})});S8.muiName="ListItemSecondaryAction";const RZ=(r,e)=>{const{ownerState:t}=r;return[e.root,t.dense&&e.dense,t.alignItems==="flex-start"&&e.alignItemsFlexStart,t.divider&&e.divider,!t.disableGutters&&e.gutters,!t.disablePadding&&e.padding,t.hasSecondaryAction&&e.secondaryAction]},LZ=r=>{const{alignItems:e,classes:t,dense:n,disableGutters:i,disablePadding:s,divider:a,hasSecondaryAction:o}=r;return rr({root:["root",n&&"dense",!i&&"gutters",!s&&"padding",a&&"divider",e==="flex-start"&&"alignItemsFlexStart",o&&"secondaryAction"],container:["container"]},CZ,t)},OZ=at("div",{name:"MuiListItem",slot:"Root",overridesResolver:RZ})(hr(({theme:r})=>({display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",width:"100%",boxSizing:"border-box",textAlign:"left",variants:[{props:({ownerState:e})=>!e.disablePadding,style:{paddingTop:8,paddingBottom:8}},{props:({ownerState:e})=>!e.disablePadding&&e.dense,style:{paddingTop:4,paddingBottom:4}},{props:({ownerState:e})=>!e.disablePadding&&!e.disableGutters,style:{paddingLeft:16,paddingRight:16}},{props:({ownerState:e})=>!e.disablePadding&&!!e.secondaryAction,style:{paddingRight:48}},{props:({ownerState:e})=>!!e.secondaryAction,style:{[`& > .${$f.root}`]:{paddingRight:48}}},{props:{alignItems:"flex-start"},style:{alignItems:"flex-start"}},{props:({ownerState:e})=>e.divider,style:{borderBottom:`1px solid ${(r.vars||r).palette.divider}`,backgroundClip:"padding-box"}},{props:({ownerState:e})=>e.button,style:{transition:r.transitions.create("background-color",{duration:r.transitions.duration.shortest}),"&:hover":{textDecoration:"none",backgroundColor:(r.vars||r).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}}}},{props:({ownerState:e})=>e.hasSecondaryAction,style:{paddingRight:48}}]}))),MZ=at("li",{name:"MuiListItem",slot:"Container"})({position:"relative"}),FZ=M.forwardRef(function(e,t){const n=ir({props:e,name:"MuiListItem"}),{alignItems:i="center",children:s,className:a,component:o,components:l={},componentsProps:u={},ContainerComponent:c="li",ContainerProps:{className:h,...m}={},dense:g=!1,disableGutters:y=!1,disablePadding:v=!1,divider:x=!1,secondaryAction:w,slotProps:E={},slots:D={},...I}=n,A=M.useContext(Tl),L=M.useMemo(()=>({dense:g||A.dense||!1,alignItems:i,disableGutters:y}),[i,A.dense,g,y]),N=M.useRef(null),U=M.Children.toArray(s),B=U.length&&v_(U[U.length-1],["ListItemSecondaryAction"]),k={...n,alignItems:i,dense:L.dense,disableGutters:y,disablePadding:v,divider:x,hasSecondaryAction:B},H=LZ(k),q=ci(N,t),V=D.root||l.Root||OZ,Q=E.root||u.root||{},ie={className:It(H.root,Q.className,a),...I};let le=o||"li";return B?(le=!ie.component&&!o?"div":le,c==="li"&&(le==="li"?le="div":ie.component==="li"&&(ie.component="div")),F.jsx(Tl.Provider,{value:L,children:F.jsxs(MZ,{as:c,className:It(H.container,h),ref:q,ownerState:k,...m,children:[F.jsx(V,{...Q,...!Q0(V)&&{as:le,ownerState:{...k,...Q.ownerState}},...ie,children:U}),U.pop()]})})):F.jsx(Tl.Provider,{value:L,children:F.jsxs(V,{...Q,as:le,ref:q,...!Q0(V)&&{ownerState:{...k,...Q.ownerState}},...ie,children:[U,w&&F.jsx(S8,{children:w})]})})});function BZ(r){return nr("MuiListItemIcon",r)}const lL=Zt("MuiListItemIcon",["root","alignItemsFlexStart"]),NZ=r=>{const{alignItems:e,classes:t}=r;return rr({root:["root",e==="flex-start"&&"alignItemsFlexStart"]},BZ,t)},UZ=at("div",{name:"MuiListItemIcon",slot:"Root",overridesResolver:(r,e)=>{const{ownerState:t}=r;return[e.root,t.alignItems==="flex-start"&&e.alignItemsFlexStart]}})(hr(({theme:r})=>({minWidth:56,color:(r.vars||r).palette.action.active,flexShrink:0,display:"inline-flex",variants:[{props:{alignItems:"flex-start"},style:{marginTop:8}}]}))),uL=M.forwardRef(function(e,t){const n=ir({props:e,name:"MuiListItemIcon"}),{className:i,...s}=n,a=M.useContext(Tl),o={...n,alignItems:a.alignItems},l=NZ(o);return F.jsx(UZ,{className:It(l.root,i),ownerState:o,ref:t,...s})});function $Z(r){return nr("MuiListItemText",r)}const Vf=Zt("MuiListItemText",["root","multiline","dense","inset","primary","secondary"]),jZ=r=>{const{classes:e,inset:t,primary:n,secondary:i,dense:s}=r;return rr({root:["root",t&&"inset",s&&"dense",n&&i&&"multiline"],primary:["primary"],secondary:["secondary"]},$Z,e)},zZ=at("div",{name:"MuiListItemText",slot:"Root",overridesResolver:(r,e)=>{const{ownerState:t}=r;return[{[`& .${Vf.primary}`]:e.primary},{[`& .${Vf.secondary}`]:e.secondary},e.root,t.inset&&e.inset,t.primary&&t.secondary&&e.multiline,t.dense&&e.dense]}})({flex:"1 1 auto",minWidth:0,marginTop:4,marginBottom:4,[`.${qR.root}:where(& .${Vf.primary})`]:{display:"block"},[`.${qR.root}:where(& .${Vf.secondary})`]:{display:"block"},variants:[{props:({ownerState:r})=>r.primary&&r.secondary,style:{marginTop:6,marginBottom:6}},{props:({ownerState:r})=>r.inset,style:{paddingLeft:56}}]}),Q_=M.forwardRef(function(e,t){const n=ir({props:e,name:"MuiListItemText"}),{children:i,className:s,disableTypography:a=!1,inset:o=!1,primary:l,primaryTypographyProps:u,secondary:c,secondaryTypographyProps:h,slots:m={},slotProps:g={},...y}=n,{dense:v}=M.useContext(Tl);let x=l??i,w=c;const E={...n,disableTypography:a,inset:o,primary:!!x,secondary:!!w,dense:v},D=jZ(E),I={slots:m,slotProps:{primary:u,secondary:h,...g}},[A,L]=Sr("root",{className:It(D.root,s),elementType:zZ,externalForwardedProps:{...I,...y},ownerState:E,ref:t}),[N,U]=Sr("primary",{className:D.primary,elementType:bn,externalForwardedProps:I,ownerState:E}),[B,k]=Sr("secondary",{className:D.secondary,elementType:bn,externalForwardedProps:I,ownerState:E});return x!=null&&x.type!==bn&&!a&&(x=F.jsx(N,{variant:v?"body2":"body1",component:U?.variant?void 0:"span",...U,children:x})),w!=null&&w.type!==bn&&!a&&(w=F.jsx(B,{variant:"body2",color:"textSecondary",...k,children:w})),F.jsxs(A,{...L,children:[x,w]})}),HZ=Ir(F.jsx("path",{d:"M11 21h-1l1-7H7.5c-.58 0-.57-.32-.38-.66s.05-.08.07-.12C8.48 10.94 10.42 7.54 13 3h1l-1 7h3.5c.49 0 .56.33.47.51l-.07.15C12.96 17.55 11 21 11 21"})),cL=Ir(F.jsx("path",{d:"M19.14 12.94c.04-.3.06-.61.06-.94 0-.32-.02-.64-.07-.94l2.03-1.58c.18-.14.23-.41.12-.61l-1.92-3.32c-.12-.22-.37-.29-.59-.22l-2.39.96c-.5-.38-1.03-.7-1.62-.94l-.36-2.54c-.04-.24-.24-.41-.48-.41h-3.84c-.24 0-.43.17-.47.41l-.36 2.54c-.59.24-1.13.57-1.62.94l-2.39-.96c-.22-.08-.47 0-.59.22L2.74 8.87c-.12.21-.08.47.12.61l2.03 1.58c-.05.3-.09.63-.09.94s.02.64.07.94l-2.03 1.58c-.18.14-.23.41-.12.61l1.92 3.32c.12.22.37.29.59.22l2.39-.96c.5.38 1.03.7 1.62.94l.36 2.54c.05.24.24.41.48.41h3.84c.24 0 .44-.17.47-.41l.36-2.54c.59-.24 1.13-.56 1.62-.94l2.39.96c.22.08.47 0 .59-.22l1.92-3.32c.12-.22.07-.47-.12-.61zM12 15.6c-1.98 0-3.6-1.62-3.6-3.6s1.62-3.6 3.6-3.6 3.6 1.62 3.6 3.6-1.62 3.6-3.6 3.6"})),VZ=Ir(F.jsx("path",{d:"M12 2C6.49 2 2 6.49 2 12s4.49 10 10 10 10-4.49 10-10S17.51 2 12 2m0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8m3-8c0 1.66-1.34 3-3 3s-3-1.34-3-3 1.34-3 3-3 3 1.34 3 3"})),WZ=Ir(F.jsx("path",{d:"M19.35 10.04C18.67 6.59 15.64 4 12 4 9.11 4 6.6 5.64 5.35 8.04 2.34 8.36 0 10.91 0 14c0 3.31 2.69 6 6 6h13c2.76 0 5-2.24 5-5 0-2.64-2.05-4.78-4.65-4.96M19 18H6c-2.21 0-4-1.79-4-4s1.79-4 4-4h.71C7.37 7.69 9.48 6 12 6c3.04 0 5.5 2.46 5.5 5.5v.5H19c1.66 0 3 1.34 3 3s-1.34 3-3 3"})),T8=Ir(F.jsx("path",{d:"M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5M12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5m0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3"})),C8=Ir(F.jsx("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14"})),qZ=Ir(F.jsx("path",{d:"M7 9H2V7h5zm0 3H2v2h5zm13.59 7-3.83-3.83c-.8.52-1.74.83-2.76.83-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5c0 1.02-.31 1.96-.83 2.75L22 17.59zM17 11c0-1.65-1.35-3-3-3s-3 1.35-3 3 1.35 3 3 3 3-1.35 3-3M2 19h10v-2H2z"})),GZ=Ir(F.jsx("path",{d:"M16.5 3c-1.74 0-3.41.81-4.5 2.09C10.91 3.81 9.24 3 7.5 3 4.42 3 2 5.42 2 8.5c0 3.78 3.4 6.86 8.55 11.54L12 21.35l1.45-1.32C18.6 15.36 22 12.28 22 8.5 22 5.42 19.58 3 16.5 3m-4.4 15.55-.1.1-.1-.1C7.14 14.24 4 11.39 4 8.5 4 6.5 5.5 5 7.5 5c1.54 0 3.04.99 3.57 2.36h1.87C13.46 5.99 14.96 5 16.5 5c2 0 3.5 1.5 3.5 3.5 0 2.89-3.14 5.74-7.9 10.05"})),dL=Ir(F.jsx("path",{d:"m12 21.35-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54z"}));function KZ(r){return nr("MuiCollapse",r)}Zt("MuiCollapse",["root","horizontal","vertical","entered","hidden","wrapper","wrapperInner"]);const XZ=r=>{const{orientation:e,classes:t}=r,n={root:["root",`${e}`],entered:["entered"],hidden:["hidden"],wrapper:["wrapper",`${e}`],wrapperInner:["wrapperInner",`${e}`]};return rr(n,KZ,t)},YZ=at("div",{name:"MuiCollapse",slot:"Root",overridesResolver:(r,e)=>{const{ownerState:t}=r;return[e.root,e[t.orientation],t.state==="entered"&&e.entered,t.state==="exited"&&!t.in&&t.collapsedSize==="0px"&&e.hidden]}})(hr(({theme:r})=>({height:0,overflow:"hidden",transition:r.transitions.create("height"),variants:[{props:{orientation:"horizontal"},style:{height:"auto",width:0,transition:r.transitions.create("width")}},{props:{state:"entered"},style:{height:"auto",overflow:"visible"}},{props:{state:"entered",orientation:"horizontal"},style:{width:"auto"}},{props:({ownerState:e})=>e.state==="exited"&&!e.in&&e.collapsedSize==="0px",style:{visibility:"hidden"}}]}))),QZ=at("div",{name:"MuiCollapse",slot:"Wrapper"})({display:"flex",width:"100%",variants:[{props:{orientation:"horizontal"},style:{width:"auto",height:"100%"}}]}),JZ=at("div",{name:"MuiCollapse",slot:"WrapperInner"})({width:"100%",variants:[{props:{orientation:"horizontal"},style:{width:"auto",height:"100%"}}]}),pw=M.forwardRef(function(e,t){const n=ir({props:e,name:"MuiCollapse"}),{addEndListener:i,children:s,className:a,collapsedSize:o="0px",component:l,easing:u,in:c,onEnter:h,onEntered:m,onEntering:g,onExit:y,onExited:v,onExiting:x,orientation:w="vertical",style:E,timeout:D=s8.standard,TransitionComponent:I=Zo,...A}=n,L={...n,orientation:w,collapsedSize:o},N=XZ(L),U=Ec(),B=Pb(),k=M.useRef(null),H=M.useRef(),q=typeof o=="number"?`${o}px`:o,V=w==="horizontal",Q=V?"width":"height",ie=M.useRef(null),le=ci(t,ie),he=Oe=>dt=>{if(Oe){const Ke=ie.current;dt===void 0?Oe(Ke):Oe(Ke,dt)}},ae=()=>k.current?k.current[V?"clientWidth":"clientHeight"]:0,ne=he((Oe,dt)=>{k.current&&V&&(k.current.style.position="absolute"),Oe.style[Q]=q,h&&h(Oe,dt)}),ue=he((Oe,dt)=>{const Ke=ae();k.current&&V&&(k.current.style.position="");const{duration:_t,easing:Ze}=Ad({style:E,timeout:D,easing:u},{mode:"enter"});if(D==="auto"){const Ot=U.transitions.getAutoHeightDuration(Ke);Oe.style.transitionDuration=`${Ot}ms`,H.current=Ot}else Oe.style.transitionDuration=typeof _t=="string"?_t:`${_t}ms`;Oe.style[Q]=`${Ke}px`,Oe.style.transitionTimingFunction=Ze,g&&g(Oe,dt)}),ee=he((Oe,dt)=>{Oe.style[Q]="auto",m&&m(Oe,dt)}),pe=he(Oe=>{Oe.style[Q]=`${ae()}px`,y&&y(Oe)}),me=he(v),xe=he(Oe=>{const dt=ae(),{duration:Ke,easing:_t}=Ad({style:E,timeout:D,easing:u},{mode:"exit"});if(D==="auto"){const Ze=U.transitions.getAutoHeightDuration(dt);Oe.style.transitionDuration=`${Ze}ms`,H.current=Ze}else Oe.style.transitionDuration=typeof Ke=="string"?Ke:`${Ke}ms`;Oe.style[Q]=q,Oe.style.transitionTimingFunction=_t,x&&x(Oe)}),Be=Oe=>{D==="auto"&&B.start(H.current||0,Oe),i&&i(ie.current,Oe)};return F.jsx(I,{in:c,onEnter:ne,onEntered:ee,onEntering:ue,onExit:pe,onExited:me,onExiting:xe,addEndListener:Be,nodeRef:ie,timeout:D==="auto"?null:D,...A,children:(Oe,{ownerState:dt,...Ke})=>F.jsx(YZ,{as:l,className:It(N.root,a,{entered:N.entered,exited:!c&&q==="0px"&&N.hidden}[Oe]),style:{[V?"minWidth":"minHeight"]:q,...E},ref:le,ownerState:{...L,state:Oe},...Ke,children:F.jsx(QZ,{ownerState:{...L,state:Oe},className:N.wrapper,ref:k,children:F.jsx(JZ,{ownerState:{...L,state:Oe},className:N.wrapperInner,children:s})})})})});pw&&(pw.muiSupportAuto=!0);function ZZ(){if(console&&console.warn){for(var r=arguments.length,e=new Array(r),t=0;t<r;t++)e[t]=arguments[t];Ph(e[0])&&(e[0]=`react-i18next:: ${e[0]}`),console.warn(...e)}}const hL={};function mw(){for(var r=arguments.length,e=new Array(r),t=0;t<r;t++)e[t]=arguments[t];Ph(e[0])&&hL[e[0]]||(Ph(e[0])&&(hL[e[0]]=new Date),ZZ(...e))}const w8=(r,e)=>()=>{if(r.isInitialized)e();else{const t=()=>{setTimeout(()=>{r.off("initialized",t)},0),e()};r.on("initialized",t)}},fL=(r,e,t)=>{r.loadNamespaces(e,w8(r,t))},pL=(r,e,t,n)=>{Ph(t)&&(t=[t]),t.forEach(i=>{r.options.ns.indexOf(i)<0&&r.options.ns.push(i)}),r.loadLanguages(e,w8(r,n))},eee=function(r,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const n=e.languages[0],i=e.options?e.options.fallbackLng:!1,s=e.languages[e.languages.length-1];if(n.toLowerCase()==="cimode")return!0;const a=(o,l)=>{const u=e.services.backendConnector.state[`${o}|${l}`];return u===-1||u===2};return t.bindI18n&&t.bindI18n.indexOf("languageChanging")>-1&&e.services.backendConnector.backend&&e.isLanguageChangingTo&&!a(e.isLanguageChangingTo,r)?!1:!!(e.hasResourceBundle(n,r)||!e.services.backendConnector.backend||e.options.resources&&!e.options.partialBundledLanguages||a(n,r)&&(!i||a(s,r)))},tee=function(r,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return!e.languages||!e.languages.length?(mw("i18n.languages were undefined or empty",e.languages),!0):e.options.ignoreJSONStructure!==void 0?e.hasLoadedNamespace(r,{lng:t.lng,precheck:(i,s)=>{if(t.bindI18n&&t.bindI18n.indexOf("languageChanging")>-1&&i.services.backendConnector.backend&&i.isLanguageChangingTo&&!s(i.isLanguageChangingTo,r))return!1}}):eee(r,e,t)},Ph=r=>typeof r=="string",ree=r=>typeof r=="object"&&r!==null,nee=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34|nbsp|#160|copy|#169|reg|#174|hellip|#8230|#x2F|#47);/g,iee={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"',"&nbsp;":" ","&#160;":" ","&copy;":"","&#169;":"","&reg;":"","&#174;":"","&hellip;":"","&#8230;":"","&#x2F;":"/","&#47;":"/"},see=r=>iee[r],aee=r=>r.replace(nee,see);let gw={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transWrapTextNodes:"",transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0,unescape:aee};const oee=function(){let r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};gw={...gw,...r}},lee=()=>gw;let E8;const uee=r=>{E8=r},cee=()=>E8,dee={type:"3rdParty",init(r){oee(r.options.react),uee(r)}},hee=M.createContext();class fee{constructor(){this.usedNamespaces={}}addUsedNamespaces(e){e.forEach(t=>{this.usedNamespaces[t]||(this.usedNamespaces[t]=!0)})}getUsedNamespaces=()=>Object.keys(this.usedNamespaces)}const pee=(r,e)=>{const t=M.useRef();return M.useEffect(()=>{t.current=r},[r,e]),t.current},k8=(r,e,t,n)=>r.getFixedT(e,t,n),mee=(r,e,t,n)=>M.useCallback(k8(r,e,t,n),[r,e,t,n]),bs=function(r){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{i18n:t}=e,{i18n:n,defaultNS:i}=M.useContext(hee)||{},s=t||n||cee();if(s&&!s.reportNamespaces&&(s.reportNamespaces=new fee),!s){mw("You will need to pass in an i18next instance by using initReactI18next");const I=(L,N)=>Ph(N)?N:ree(N)&&Ph(N.defaultValue)?N.defaultValue:Array.isArray(L)?L[L.length-1]:L,A=[I,{},!1];return A.t=I,A.i18n={},A.ready=!1,A}s.options.react&&s.options.react.wait!==void 0&&mw("It seems you are still using the old wait option, you may migrate to the new useSuspense behaviour.");const a={...lee(),...s.options.react,...e},{useSuspense:o,keyPrefix:l}=a;let u=i||s.options&&s.options.defaultNS;u=Ph(u)?[u]:u||["translation"],s.reportNamespaces.addUsedNamespaces&&s.reportNamespaces.addUsedNamespaces(u);const c=(s.isInitialized||s.initializedStoreOnce)&&u.every(I=>tee(I,s,a)),h=mee(s,e.lng||null,a.nsMode==="fallback"?u:u[0],l),m=()=>h,g=()=>k8(s,e.lng||null,a.nsMode==="fallback"?u:u[0],l),[y,v]=M.useState(m);let x=u.join();e.lng&&(x=`${e.lng}${x}`);const w=pee(x),E=M.useRef(!0);M.useEffect(()=>{const{bindI18n:I,bindI18nStore:A}=a;E.current=!0,!c&&!o&&(e.lng?pL(s,e.lng,u,()=>{E.current&&v(g)}):fL(s,u,()=>{E.current&&v(g)})),c&&w&&w!==x&&E.current&&v(g);const L=()=>{E.current&&v(g)};return I&&s&&s.on(I,L),A&&s&&s.store.on(A,L),()=>{E.current=!1,I&&s&&I.split(" ").forEach(N=>s.off(N,L)),A&&s&&A.split(" ").forEach(N=>s.store.off(N,L))}},[s,x]),M.useEffect(()=>{E.current&&c&&v(m)},[s,l,c]);const D=[y,s,c];if(D.t=y,D.i18n=s,D.ready=c,c||!c&&!o)return D;throw new Promise(I=>{e.lng?pL(s,e.lng,u,()=>I()):fL(s,u,()=>I())})};function gee(r){return nr("MuiDivider",r)}const mL=Zt("MuiDivider",["root","absolute","fullWidth","inset","middle","flexItem","light","vertical","withChildren","withChildrenVertical","textAlignRight","textAlignLeft","wrapper","wrapperVertical"]),vee=r=>{const{absolute:e,children:t,classes:n,flexItem:i,light:s,orientation:a,textAlign:o,variant:l}=r;return rr({root:["root",e&&"absolute",l,s&&"light",a==="vertical"&&"vertical",i&&"flexItem",t&&"withChildren",t&&a==="vertical"&&"withChildrenVertical",o==="right"&&a!=="vertical"&&"textAlignRight",o==="left"&&a!=="vertical"&&"textAlignLeft"],wrapper:["wrapper",a==="vertical"&&"wrapperVertical"]},gee,n)},yee=at("div",{name:"MuiDivider",slot:"Root",overridesResolver:(r,e)=>{const{ownerState:t}=r;return[e.root,t.absolute&&e.absolute,e[t.variant],t.light&&e.light,t.orientation==="vertical"&&e.vertical,t.flexItem&&e.flexItem,t.children&&e.withChildren,t.children&&t.orientation==="vertical"&&e.withChildrenVertical,t.textAlign==="right"&&t.orientation!=="vertical"&&e.textAlignRight,t.textAlign==="left"&&t.orientation!=="vertical"&&e.textAlignLeft]}})(hr(({theme:r})=>({margin:0,flexShrink:0,borderWidth:0,borderStyle:"solid",borderColor:(r.vars||r).palette.divider,borderBottomWidth:"thin",variants:[{props:{absolute:!0},style:{position:"absolute",bottom:0,left:0,width:"100%"}},{props:{light:!0},style:{borderColor:r.vars?`rgba(${r.vars.palette.dividerChannel} / 0.08)`:Xr(r.palette.divider,.08)}},{props:{variant:"inset"},style:{marginLeft:72}},{props:{variant:"middle",orientation:"horizontal"},style:{marginLeft:r.spacing(2),marginRight:r.spacing(2)}},{props:{variant:"middle",orientation:"vertical"},style:{marginTop:r.spacing(1),marginBottom:r.spacing(1)}},{props:{orientation:"vertical"},style:{height:"100%",borderBottomWidth:0,borderRightWidth:"thin"}},{props:{flexItem:!0},style:{alignSelf:"stretch",height:"auto"}},{props:({ownerState:e})=>!!e.children,style:{display:"flex",textAlign:"center",border:0,borderTopStyle:"solid",borderLeftStyle:"solid","&::before, &::after":{content:'""',alignSelf:"center"}}},{props:({ownerState:e})=>e.children&&e.orientation!=="vertical",style:{"&::before, &::after":{width:"100%",borderTop:`thin solid ${(r.vars||r).palette.divider}`,borderTopStyle:"inherit"}}},{props:({ownerState:e})=>e.orientation==="vertical"&&e.children,style:{flexDirection:"column","&::before, &::after":{height:"100%",borderLeft:`thin solid ${(r.vars||r).palette.divider}`,borderLeftStyle:"inherit"}}},{props:({ownerState:e})=>e.textAlign==="right"&&e.orientation!=="vertical",style:{"&::before":{width:"90%"},"&::after":{width:"10%"}}},{props:({ownerState:e})=>e.textAlign==="left"&&e.orientation!=="vertical",style:{"&::before":{width:"10%"},"&::after":{width:"90%"}}}]}))),_ee=at("span",{name:"MuiDivider",slot:"Wrapper",overridesResolver:(r,e)=>{const{ownerState:t}=r;return[e.wrapper,t.orientation==="vertical"&&e.wrapperVertical]}})(hr(({theme:r})=>({display:"inline-block",paddingLeft:`calc(${r.spacing(1)} * 1.2)`,paddingRight:`calc(${r.spacing(1)} * 1.2)`,whiteSpace:"nowrap",variants:[{props:{orientation:"vertical"},style:{paddingTop:`calc(${r.spacing(1)} * 1.2)`,paddingBottom:`calc(${r.spacing(1)} * 1.2)`}}]}))),vw=M.forwardRef(function(e,t){const n=ir({props:e,name:"MuiDivider"}),{absolute:i=!1,children:s,className:a,orientation:o="horizontal",component:l=s||o==="vertical"?"div":"hr",flexItem:u=!1,light:c=!1,role:h=l!=="hr"?"separator":void 0,textAlign:m="center",variant:g="fullWidth",...y}=n,v={...n,absolute:i,component:l,flexItem:u,light:c,orientation:o,role:h,textAlign:m,variant:g},x=vee(v);return F.jsx(yee,{as:l,className:It(x.root,a),role:h,ref:t,ownerState:v,"aria-orientation":h==="separator"&&(l!=="hr"||o==="vertical")?o:void 0,...y,children:s?F.jsx(_ee,{className:x.wrapper,ownerState:v,children:s}):null})});vw&&(vw.muiSkipListHighlight=!0);const gL=Ir(F.jsx("path",{d:"m12 8-6 6 1.41 1.41L12 10.83l4.59 4.58L18 14z"})),vL=Ir(F.jsx("path",{d:"M16.59 8.59 12 13.17 7.41 8.59 6 10l6 6 6-6z"}));function xee(r,e,t){const n=e.getBoundingClientRect(),i=t&&t.getBoundingClientRect(),s=fo(e);let a;if(e.fakeTransform)a=e.fakeTransform;else{const u=s.getComputedStyle(e);a=u.getPropertyValue("-webkit-transform")||u.getPropertyValue("transform")}let o=0,l=0;if(a&&a!=="none"&&typeof a=="string"){const u=a.split("(")[1].split(")")[0].split(",");o=parseInt(u[4],10),l=parseInt(u[5],10)}return r==="left"?i?`translateX(${i.right+o-n.left}px)`:`translateX(${s.innerWidth+o-n.left}px)`:r==="right"?i?`translateX(-${n.right-i.left-o}px)`:`translateX(-${n.left+n.width-o}px)`:r==="up"?i?`translateY(${i.bottom+l-n.top}px)`:`translateY(${s.innerHeight+l-n.top}px)`:i?`translateY(-${n.top-i.top+n.height-l}px)`:`translateY(-${n.top+n.height-l}px)`}function bee(r){return typeof r=="function"?r():r}function Gv(r,e,t){const n=bee(t),i=xee(r,e,n);i&&(e.style.webkitTransform=i,e.style.transform=i)}const See=M.forwardRef(function(e,t){const n=Ec(),i={enter:n.transitions.easing.easeOut,exit:n.transitions.easing.sharp},s={enter:n.transitions.duration.enteringScreen,exit:n.transitions.duration.leavingScreen},{addEndListener:a,appear:o=!0,children:l,container:u,direction:c="down",easing:h=i,in:m,onEnter:g,onEntered:y,onEntering:v,onExit:x,onExited:w,onExiting:E,style:D,timeout:I=s,TransitionComponent:A=Zo,...L}=e,N=M.useRef(null),U=ci(Jh(l),N,t),B=ae=>ne=>{ae&&(ne===void 0?ae(N.current):ae(N.current,ne))},k=B((ae,ne)=>{Gv(c,ae,u),E2(ae),g&&g(ae,ne)}),H=B((ae,ne)=>{const ue=Ad({timeout:I,style:D,easing:h},{mode:"enter"});ae.style.webkitTransition=n.transitions.create("-webkit-transform",{...ue}),ae.style.transition=n.transitions.create("transform",{...ue}),ae.style.webkitTransform="none",ae.style.transform="none",v&&v(ae,ne)}),q=B(y),V=B(E),Q=B(ae=>{const ne=Ad({timeout:I,style:D,easing:h},{mode:"exit"});ae.style.webkitTransition=n.transitions.create("-webkit-transform",ne),ae.style.transition=n.transitions.create("transform",ne),Gv(c,ae,u),x&&x(ae)}),ie=B(ae=>{ae.style.webkitTransition="",ae.style.transition="",w&&w(ae)}),le=ae=>{a&&a(N.current,ae)},he=M.useCallback(()=>{N.current&&Gv(c,N.current,u)},[c,u]);return M.useEffect(()=>{if(m||c==="down"||c==="right")return;const ae=Dg(()=>{N.current&&Gv(c,N.current,u)}),ne=fo(N.current);return ne.addEventListener("resize",ae),()=>{ae.clear(),ne.removeEventListener("resize",ae)}},[c,m,u]),M.useEffect(()=>{m||he()},[m,he]),F.jsx(A,{nodeRef:N,onEnter:k,onEntered:q,onEntering:H,onExit:Q,onExited:ie,onExiting:V,addEndListener:le,appear:o,in:m,timeout:I,...L,children:(ae,{ownerState:ne,...ue})=>M.cloneElement(l,{ref:U,style:{visibility:ae==="exited"&&!m?"hidden":void 0,...D,...l.props.style},...ue})})});function Tee(r){return nr("MuiDrawer",r)}Zt("MuiDrawer",["root","docked","paper","anchorLeft","anchorRight","anchorTop","anchorBottom","paperAnchorLeft","paperAnchorRight","paperAnchorTop","paperAnchorBottom","paperAnchorDockedLeft","paperAnchorDockedRight","paperAnchorDockedTop","paperAnchorDockedBottom","modal"]);const A8=(r,e)=>{const{ownerState:t}=r;return[e.root,(t.variant==="permanent"||t.variant==="persistent")&&e.docked,e.modal]},Cee=r=>{const{classes:e,anchor:t,variant:n}=r,i={root:["root",`anchor${ft(t)}`],docked:[(n==="permanent"||n==="persistent")&&"docked"],modal:["modal"],paper:["paper",`paperAnchor${ft(t)}`,n!=="temporary"&&`paperAnchorDocked${ft(t)}`]};return rr(i,Tee,e)},wee=at(k2,{name:"MuiDrawer",slot:"Root",overridesResolver:A8})(hr(({theme:r})=>({zIndex:(r.vars||r).zIndex.drawer}))),Eee=at("div",{shouldForwardProp:is,name:"MuiDrawer",slot:"Docked",skipVariantsResolver:!1,overridesResolver:A8})({flex:"0 0 auto"}),kee=at(kc,{name:"MuiDrawer",slot:"Paper",overridesResolver:(r,e)=>{const{ownerState:t}=r;return[e.paper,e[`paperAnchor${ft(t.anchor)}`],t.variant!=="temporary"&&e[`paperAnchorDocked${ft(t.anchor)}`]]}})(hr(({theme:r})=>({overflowY:"auto",display:"flex",flexDirection:"column",height:"100%",flex:"1 0 auto",zIndex:(r.vars||r).zIndex.drawer,WebkitOverflowScrolling:"touch",position:"fixed",top:0,outline:0,variants:[{props:{anchor:"left"},style:{left:0}},{props:{anchor:"top"},style:{top:0,left:0,right:0,height:"auto",maxHeight:"100%"}},{props:{anchor:"right"},style:{right:0}},{props:{anchor:"bottom"},style:{top:"auto",left:0,bottom:0,right:0,height:"auto",maxHeight:"100%"}},{props:({ownerState:e})=>e.anchor==="left"&&e.variant!=="temporary",style:{borderRight:`1px solid ${(r.vars||r).palette.divider}`}},{props:({ownerState:e})=>e.anchor==="top"&&e.variant!=="temporary",style:{borderBottom:`1px solid ${(r.vars||r).palette.divider}`}},{props:({ownerState:e})=>e.anchor==="right"&&e.variant!=="temporary",style:{borderLeft:`1px solid ${(r.vars||r).palette.divider}`}},{props:({ownerState:e})=>e.anchor==="bottom"&&e.variant!=="temporary",style:{borderTop:`1px solid ${(r.vars||r).palette.divider}`}}]}))),D8={left:"right",right:"left",top:"down",bottom:"up"};function Aee(r){return["left","right"].includes(r)}function Dee({direction:r},e){return r==="rtl"&&Aee(e)?D8[e]:e}const Iee=M.forwardRef(function(e,t){const n=ir({props:e,name:"MuiDrawer"}),i=Ec(),s=Ab(),a={enter:i.transitions.duration.enteringScreen,exit:i.transitions.duration.leavingScreen},{anchor:o="left",BackdropProps:l,children:u,className:c,elevation:h=16,hideBackdrop:m=!1,ModalProps:{BackdropProps:g,...y}={},onClose:v,open:x=!1,PaperProps:w={},SlideProps:E,TransitionComponent:D,transitionDuration:I=a,variant:A="temporary",slots:L={},slotProps:N={},...U}=n,B=M.useRef(!1);M.useEffect(()=>{B.current=!0},[]);const k=Dee({direction:s?"rtl":"ltr"},o),q={...n,anchor:o,elevation:h,open:x,variant:A,...U},V=Cee(q),Q={slots:{transition:D,...L},slotProps:{paper:w,transition:E,...N,backdrop:A2(N.backdrop||{...l,...g},{transitionDuration:I})}},[ie,le]=Sr("root",{ref:t,elementType:wee,className:It(V.root,V.modal,c),shouldForwardComponentProp:!0,ownerState:q,externalForwardedProps:{...Q,...U,...y},additionalProps:{open:x,onClose:v,hideBackdrop:m,slots:{backdrop:Q.slots.backdrop},slotProps:{backdrop:Q.slotProps.backdrop}}}),[he,ae]=Sr("paper",{elementType:kee,shouldForwardComponentProp:!0,className:It(V.paper,w.className),ownerState:q,externalForwardedProps:Q,additionalProps:{elevation:A==="temporary"?h:0,square:!0}}),[ne,ue]=Sr("docked",{elementType:Eee,ref:t,className:It(V.root,V.docked,c),ownerState:q,externalForwardedProps:Q,additionalProps:U}),[ee,pe]=Sr("transition",{elementType:See,ownerState:q,externalForwardedProps:Q,additionalProps:{in:x,direction:D8[k],timeout:I,appear:B.current}}),me=F.jsx(he,{...ae,children:u});if(A==="permanent")return F.jsx(ne,{...ue,children:me});const xe=F.jsx(ee,{...pe,children:me});return A==="persistent"?F.jsx(ne,{...ue,children:xe}):F.jsx(ie,{...le,children:xe})});function Pee(r){return nr("MuiIconButton",r)}const yL=Zt("MuiIconButton",["root","disabled","colorInherit","colorPrimary","colorSecondary","colorError","colorInfo","colorSuccess","colorWarning","edgeStart","edgeEnd","sizeSmall","sizeMedium","sizeLarge","loading","loadingIndicator","loadingWrapper"]),Ree=r=>{const{classes:e,disabled:t,color:n,edge:i,size:s,loading:a}=r,o={root:["root",a&&"loading",t&&"disabled",n!=="default"&&`color${ft(n)}`,i&&`edge${ft(i)}`,`size${ft(s)}`],loadingIndicator:["loadingIndicator"],loadingWrapper:["loadingWrapper"]};return rr(o,Pee,e)},Lee=at(bc,{name:"MuiIconButton",slot:"Root",overridesResolver:(r,e)=>{const{ownerState:t}=r;return[e.root,t.loading&&e.loading,t.color!=="default"&&e[`color${ft(t.color)}`],t.edge&&e[`edge${ft(t.edge)}`],e[`size${ft(t.size)}`]]}})(hr(({theme:r})=>({textAlign:"center",flex:"0 0 auto",fontSize:r.typography.pxToRem(24),padding:8,borderRadius:"50%",color:(r.vars||r).palette.action.active,transition:r.transitions.create("background-color",{duration:r.transitions.duration.shortest}),variants:[{props:e=>!e.disableRipple,style:{"--IconButton-hoverBg":r.vars?`rgba(${r.vars.palette.action.activeChannel} / ${r.vars.palette.action.hoverOpacity})`:Xr(r.palette.action.active,r.palette.action.hoverOpacity),"&:hover":{backgroundColor:"var(--IconButton-hoverBg)","@media (hover: none)":{backgroundColor:"transparent"}}}},{props:{edge:"start"},style:{marginLeft:-12}},{props:{edge:"start",size:"small"},style:{marginLeft:-3}},{props:{edge:"end"},style:{marginRight:-12}},{props:{edge:"end",size:"small"},style:{marginRight:-3}}]})),hr(({theme:r})=>({variants:[{props:{color:"inherit"},style:{color:"inherit"}},...Object.entries(r.palette).filter(es()).map(([e])=>({props:{color:e},style:{color:(r.vars||r).palette[e].main}})),...Object.entries(r.palette).filter(es()).map(([e])=>({props:{color:e},style:{"--IconButton-hoverBg":r.vars?`rgba(${(r.vars||r).palette[e].mainChannel} / ${r.vars.palette.action.hoverOpacity})`:Xr((r.vars||r).palette[e].main,r.palette.action.hoverOpacity)}})),{props:{size:"small"},style:{padding:5,fontSize:r.typography.pxToRem(18)}},{props:{size:"large"},style:{padding:12,fontSize:r.typography.pxToRem(28)}}],[`&.${yL.disabled}`]:{backgroundColor:"transparent",color:(r.vars||r).palette.action.disabled},[`&.${yL.loading}`]:{color:"transparent"}}))),Oee=at("span",{name:"MuiIconButton",slot:"LoadingIndicator"})(({theme:r})=>({display:"none",position:"absolute",visibility:"visible",top:"50%",left:"50%",transform:"translate(-50%, -50%)",color:(r.vars||r).palette.action.disabled,variants:[{props:{loading:!0},style:{display:"flex"}}]})),Zh=M.forwardRef(function(e,t){const n=ir({props:e,name:"MuiIconButton"}),{edge:i=!1,children:s,className:a,color:o="default",disabled:l=!1,disableFocusRipple:u=!1,size:c="medium",id:h,loading:m=null,loadingIndicator:g,...y}=n,v=Qh(h),x=g??F.jsx(Y0,{"aria-labelledby":v,color:"inherit",size:16}),w={...n,edge:i,color:o,disabled:l,disableFocusRipple:u,loading:m,loadingIndicator:x,size:c},E=Ree(w);return F.jsxs(Lee,{id:m?v:h,className:It(E.root,a),centerRipple:!0,focusRipple:!u,disabled:l||m,ref:t,...y,ownerState:w,children:[typeof m=="boolean"&&F.jsx("span",{className:E.loadingWrapper,style:{display:"contents"},children:F.jsx(Oee,{className:E.loadingIndicator,ownerState:w,children:m&&x})}),s]})}),Mee=Ir(F.jsx("path",{d:"M2 15.5v2h20v-2zm0-5v2h20v-2zm0-5v2h20v-2z"})),Fee=qB({themeId:Sl}),yw=typeof T2({})=="function",Bee=(r,e)=>({WebkitFontSmoothing:"antialiased",MozOsxFontSmoothing:"grayscale",boxSizing:"border-box",WebkitTextSizeAdjust:"100%",...e&&!r.vars&&{colorScheme:r.palette.mode}}),Nee=r=>({color:(r.vars||r).palette.text.primary,...r.typography.body1,backgroundColor:(r.vars||r).palette.background.default,"@media print":{backgroundColor:(r.vars||r).palette.common.white}}),I8=(r,e=!1)=>{const t={};e&&r.colorSchemes&&typeof r.getColorSchemeSelector=="function"&&Object.entries(r.colorSchemes).forEach(([s,a])=>{const o=r.getColorSchemeSelector(s);o.startsWith("@")?t[o]={":root":{colorScheme:a.palette?.mode}}:t[o.replace(/\s*&/,"")]={colorScheme:a.palette?.mode}});let n={html:Bee(r,e),"*, *::before, *::after":{boxSizing:"inherit"},"strong, b":{fontWeight:r.typography.fontWeightBold},body:{margin:0,...Nee(r),"&::backdrop":{backgroundColor:(r.vars||r).palette.background.default}},...t};const i=r.components?.MuiCssBaseline?.styleOverrides;return i&&(n=[n,i]),n},y_="mui-ecs",Uee=r=>{const e=I8(r,!1),t=Array.isArray(e)?e[0]:e;return!r.vars&&t&&(t.html[`:root:has(${y_})`]={colorScheme:r.palette.mode}),r.colorSchemes&&Object.entries(r.colorSchemes).forEach(([n,i])=>{const s=r.getColorSchemeSelector(n);s.startsWith("@")?t[s]={[`:root:not(:has(.${y_}))`]:{colorScheme:i.palette?.mode}}:t[s.replace(/\s*&/,"")]={[`&:not(:has(.${y_}))`]:{colorScheme:i.palette?.mode}}}),e},$ee=T2(yw?({theme:r,enableColorScheme:e})=>I8(r,e):({theme:r})=>Uee(r));function jee(r){const e=ir({props:r,name:"MuiCssBaseline"}),{children:t,enableColorScheme:n=!1}=e;return F.jsxs(M.Fragment,{children:[yw&&F.jsx($ee,{enableColorScheme:n}),!yw&&!n&&F.jsx("span",{className:y_,style:{display:"none"}}),t]})}const Rb=M.createContext(void 0);function Il(){return M.useContext(Rb)}function zee(r){return nr("PrivateSwitchBase",r)}Zt("PrivateSwitchBase",["root","checked","disabled","input","edgeStart","edgeEnd"]);const Hee=r=>{const{classes:e,checked:t,disabled:n,edge:i}=r,s={root:["root",t&&"checked",n&&"disabled",i&&`edge${ft(i)}`],input:["input"]};return rr(s,zee,e)},Vee=at(bc)({padding:9,borderRadius:"50%",variants:[{props:{edge:"start",size:"small"},style:{marginLeft:-3}},{props:({edge:r,ownerState:e})=>r==="start"&&e.size!=="small",style:{marginLeft:-12}},{props:{edge:"end",size:"small"},style:{marginRight:-3}},{props:({edge:r,ownerState:e})=>r==="end"&&e.size!=="small",style:{marginRight:-12}}]}),Wee=at("input",{shouldForwardProp:is})({cursor:"inherit",position:"absolute",opacity:0,width:"100%",height:"100%",top:0,left:0,margin:0,padding:0,zIndex:1}),I2=M.forwardRef(function(e,t){const{autoFocus:n,checked:i,checkedIcon:s,defaultChecked:a,disabled:o,disableFocusRipple:l=!1,edge:u=!1,icon:c,id:h,inputProps:m,inputRef:g,name:y,onBlur:v,onChange:x,onFocus:w,readOnly:E,required:D=!1,tabIndex:I,type:A,value:L,slots:N={},slotProps:U={},...B}=e,[k,H]=X_({controlled:i,default:!!a,name:"SwitchBase",state:"checked"}),q=Il(),V=Be=>{w&&w(Be),q&&q.onFocus&&q.onFocus(Be)},Q=Be=>{v&&v(Be),q&&q.onBlur&&q.onBlur(Be)},ie=Be=>{if(Be.nativeEvent.defaultPrevented)return;const Oe=Be.target.checked;H(Oe),x&&x(Be,Oe)};let le=o;q&&typeof le>"u"&&(le=q.disabled);const he=A==="checkbox"||A==="radio",ae={...e,checked:k,disabled:le,disableFocusRipple:l,edge:u},ne=Hee(ae),ue={slots:N,slotProps:{input:m,...U}},[ee,pe]=Sr("root",{ref:t,elementType:Vee,className:ne.root,shouldForwardComponentProp:!0,externalForwardedProps:{...ue,component:"span",...B},getSlotProps:Be=>({...Be,onFocus:Oe=>{Be.onFocus?.(Oe),V(Oe)},onBlur:Oe=>{Be.onBlur?.(Oe),Q(Oe)}}),ownerState:ae,additionalProps:{centerRipple:!0,focusRipple:!l,disabled:le,role:void 0,tabIndex:null}}),[me,xe]=Sr("input",{ref:g,elementType:Wee,className:ne.input,externalForwardedProps:ue,getSlotProps:Be=>({...Be,onChange:Oe=>{Be.onChange?.(Oe),ie(Oe)}}),ownerState:ae,additionalProps:{autoFocus:n,checked:i,defaultChecked:a,disabled:le,id:he?h:void 0,name:y,readOnly:E,required:D,tabIndex:I,type:A,...A==="checkbox"&&L===void 0?{}:{value:L}}});return F.jsxs(ee,{...pe,children:[F.jsx(me,{...xe}),k?s:c]})}),qee=Ir(F.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"})),Gee=Ir(F.jsx("path",{d:"M8.465 8.465C9.37 7.56 10.62 7 12 7C14.76 7 17 9.24 17 12C17 13.38 16.44 14.63 15.535 15.535C14.63 16.44 13.38 17 12 17C9.24 17 7 14.76 7 12C7 10.62 7.56 9.37 8.465 8.465Z"})),Kee=at("span",{shouldForwardProp:is})({position:"relative",display:"flex"}),Xee=at(qee)({transform:"scale(1)"}),Yee=at(Gee)(hr(({theme:r})=>({left:0,position:"absolute",transform:"scale(0)",transition:r.transitions.create("transform",{easing:r.transitions.easing.easeIn,duration:r.transitions.duration.shortest}),variants:[{props:{checked:!0},style:{transform:"scale(1)",transition:r.transitions.create("transform",{easing:r.transitions.easing.easeOut,duration:r.transitions.duration.shortest})}}]})));function P8(r){const{checked:e=!1,classes:t={},fontSize:n}=r,i={...r,checked:e};return F.jsxs(Kee,{className:t.root,ownerState:i,children:[F.jsx(Xee,{fontSize:n,className:t.background,ownerState:i}),F.jsx(Yee,{fontSize:n,className:t.dot,ownerState:i})]})}const R8=M.createContext(void 0);function Qee(){return M.useContext(R8)}function Jee(r){return nr("MuiRadio",r)}const _L=Zt("MuiRadio",["root","checked","disabled","colorPrimary","colorSecondary","sizeSmall"]),Zee=r=>{const{classes:e,color:t,size:n}=r,i={root:["root",`color${ft(t)}`,n!=="medium"&&`size${ft(n)}`]};return{...e,...rr(i,Jee,e)}},ete=at(I2,{shouldForwardProp:r=>is(r)||r==="classes",name:"MuiRadio",slot:"Root",overridesResolver:(r,e)=>{const{ownerState:t}=r;return[e.root,t.size!=="medium"&&e[`size${ft(t.size)}`],e[`color${ft(t.color)}`]]}})(hr(({theme:r})=>({color:(r.vars||r).palette.text.secondary,[`&.${_L.disabled}`]:{color:(r.vars||r).palette.action.disabled},variants:[{props:{color:"default",disabled:!1,disableRipple:!1},style:{"&:hover":{backgroundColor:r.vars?`rgba(${r.vars.palette.action.activeChannel} / ${r.vars.palette.action.hoverOpacity})`:Xr(r.palette.action.active,r.palette.action.hoverOpacity)}}},...Object.entries(r.palette).filter(es()).map(([e])=>({props:{color:e,disabled:!1,disableRipple:!1},style:{"&:hover":{backgroundColor:r.vars?`rgba(${r.vars.palette[e].mainChannel} / ${r.vars.palette.action.hoverOpacity})`:Xr(r.palette[e].main,r.palette.action.hoverOpacity)}}})),...Object.entries(r.palette).filter(es()).map(([e])=>({props:{color:e,disabled:!1},style:{[`&.${_L.checked}`]:{color:(r.vars||r).palette[e].main}}})),{props:{disableRipple:!1},style:{"&:hover":{"@media (hover: none)":{backgroundColor:"transparent"}}}}]})));function tte(r,e){return typeof e=="object"&&e!==null?r===e:String(r)===String(e)}const rte=F.jsx(P8,{checked:!0}),nte=F.jsx(P8,{}),yl=M.forwardRef(function(e,t){const n=ir({props:e,name:"MuiRadio"}),{checked:i,checkedIcon:s=rte,color:a="primary",icon:o=nte,name:l,onChange:u,size:c="medium",className:h,disabled:m,disableRipple:g=!1,slots:y={},slotProps:v={},inputProps:x,...w}=n,E=Il();let D=m;E&&typeof D>"u"&&(D=E.disabled),D??=!1;const I={...n,disabled:D,disableRipple:g,color:a,size:c},A=Zee(I),L=Qee();let N=i;const U=lw(u,L&&L.onChange);let B=l;L&&(typeof N>"u"&&(N=tte(L.value,n.value)),typeof B>"u"&&(B=L.name));const k=v.input??x,[H,q]=Sr("root",{ref:t,elementType:ete,className:It(A.root,h),shouldForwardComponentProp:!0,externalForwardedProps:{slots:y,slotProps:v,...w},getSlotProps:V=>({...V,onChange:(Q,...ie)=>{V.onChange?.(Q,...ie),U(Q,...ie)}}),ownerState:I,additionalProps:{type:"radio",icon:M.cloneElement(o,{fontSize:o.props.fontSize??c}),checkedIcon:M.cloneElement(s,{fontSize:s.props.fontSize??c}),disabled:D,name:B,checked:N,slots:y,slotProps:{input:typeof k=="function"?k(I):k}}});return F.jsx(H,{...q,classes:A})});function ite(r){return nr("MuiFormGroup",r)}Zt("MuiFormGroup",["root","row","error"]);function Nd({props:r,states:e,muiFormControl:t}){return e.reduce((n,i)=>(n[i]=r[i],t&&typeof r[i]>"u"&&(n[i]=t[i]),n),{})}const ste=r=>{const{classes:e,row:t,error:n}=r;return rr({root:["root",t&&"row",n&&"error"]},ite,e)},ate=at("div",{name:"MuiFormGroup",slot:"Root",overridesResolver:(r,e)=>{const{ownerState:t}=r;return[e.root,t.row&&e.row]}})({display:"flex",flexDirection:"column",flexWrap:"wrap",variants:[{props:{row:!0},style:{flexDirection:"row"}}]}),L8=M.forwardRef(function(e,t){const n=ir({props:e,name:"MuiFormGroup"}),{className:i,row:s=!1,...a}=n,o=Il(),l=Nd({props:n,muiFormControl:o,states:["error"]}),u={...n,row:s,error:l.error},c=ste(u);return F.jsx(ate,{className:It(c.root,i),ownerState:u,ref:t,...a})});function ote(r){return nr("MuiRadioGroup",r)}Zt("MuiRadioGroup",["root","row","error"]);const lte=r=>{const{classes:e,row:t,error:n}=r;return rr({root:["root",t&&"row",n&&"error"]},ote,e)},jf=M.forwardRef(function(e,t){const{actions:n,children:i,className:s,defaultValue:a,name:o,onChange:l,value:u,...c}=e,h=M.useRef(null),m=lte(e),[g,y]=X_({controlled:u,default:a,name:"RadioGroup"});M.useImperativeHandle(n,()=>({focus:()=>{let E=h.current.querySelector("input:not(:disabled):checked");E||(E=h.current.querySelector("input:not(:disabled)")),E&&E.focus()}}),[]);const v=ci(t,h),x=Qh(o),w=M.useMemo(()=>({name:x,onChange(E){y(E.target.value),l&&l(E,E.target.value)},value:g}),[x,l,y,g]);return F.jsx(R8.Provider,{value:w,children:F.jsx(L8,{role:"radiogroup",ref:v,className:It(m.root,s),...c,children:i})})});function xL(r){return r!=null&&!(Array.isArray(r)&&r.length===0)}function J_(r,e=!1){return r&&(xL(r.value)&&r.value!==""||e&&xL(r.defaultValue)&&r.defaultValue!=="")}function ute(r){return r.startAdornment}function cte(r){return nr("MuiFormControl",r)}Zt("MuiFormControl",["root","marginNone","marginNormal","marginDense","fullWidth","disabled"]);const dte=r=>{const{classes:e,margin:t,fullWidth:n}=r,i={root:["root",t!=="none"&&`margin${ft(t)}`,n&&"fullWidth"]};return rr(i,cte,e)},hte=at("div",{name:"MuiFormControl",slot:"Root",overridesResolver:(r,e)=>{const{ownerState:t}=r;return[e.root,e[`margin${ft(t.margin)}`],t.fullWidth&&e.fullWidth]}})({display:"inline-flex",flexDirection:"column",position:"relative",minWidth:0,padding:0,margin:0,border:0,verticalAlign:"top",variants:[{props:{margin:"normal"},style:{marginTop:16,marginBottom:8}},{props:{margin:"dense"},style:{marginTop:8,marginBottom:4}},{props:{fullWidth:!0},style:{width:"100%"}}]}),Rr=M.forwardRef(function(e,t){const n=ir({props:e,name:"MuiFormControl"}),{children:i,className:s,color:a="primary",component:o="div",disabled:l=!1,error:u=!1,focused:c,fullWidth:h=!1,hiddenLabel:m=!1,margin:g="none",required:y=!1,size:v="medium",variant:x="outlined",...w}=n,E={...n,color:a,component:o,disabled:l,error:u,fullWidth:h,hiddenLabel:m,margin:g,required:y,size:v,variant:x},D=dte(E),[I,A]=M.useState(()=>{let ie=!1;return i&&M.Children.forEach(i,le=>{if(!v_(le,["Input","Select"]))return;const he=v_(le,["Select"])?le.props.input:le;he&&ute(he.props)&&(ie=!0)}),ie}),[L,N]=M.useState(()=>{let ie=!1;return i&&M.Children.forEach(i,le=>{v_(le,["Input","Select"])&&(J_(le.props,!0)||J_(le.props.inputProps,!0))&&(ie=!0)}),ie}),[U,B]=M.useState(!1);l&&U&&B(!1);const k=c!==void 0&&!l?c:U;let H;M.useRef(!1);const q=M.useCallback(()=>{N(!0)},[]),V=M.useCallback(()=>{N(!1)},[]),Q=M.useMemo(()=>({adornedStart:I,setAdornedStart:A,color:a,disabled:l,error:u,filled:L,focused:k,fullWidth:h,hiddenLabel:m,size:v,onBlur:()=>{B(!1)},onFocus:()=>{B(!0)},onEmpty:V,onFilled:q,registerEffect:H,required:y,variant:x}),[I,a,l,u,L,k,h,m,H,V,q,y,v,x]);return F.jsx(Rb.Provider,{value:Q,children:F.jsx(hte,{as:o,ownerState:E,className:It(D.root,s),ref:t,...w,children:i})})});function fte(r){return nr("MuiFormControlLabel",r)}const h0=Zt("MuiFormControlLabel",["root","labelPlacementStart","labelPlacementTop","labelPlacementBottom","disabled","label","error","required","asterisk"]),pte=r=>{const{classes:e,disabled:t,labelPlacement:n,error:i,required:s}=r,a={root:["root",t&&"disabled",`labelPlacement${ft(n)}`,i&&"error",s&&"required"],label:["label",t&&"disabled"],asterisk:["asterisk",i&&"error"]};return rr(a,fte,e)},mte=at("label",{name:"MuiFormControlLabel",slot:"Root",overridesResolver:(r,e)=>{const{ownerState:t}=r;return[{[`& .${h0.label}`]:e.label},e.root,e[`labelPlacement${ft(t.labelPlacement)}`]]}})(hr(({theme:r})=>({display:"inline-flex",alignItems:"center",cursor:"pointer",verticalAlign:"middle",WebkitTapHighlightColor:"transparent",marginLeft:-11,marginRight:16,[`&.${h0.disabled}`]:{cursor:"default"},[`& .${h0.label}`]:{[`&.${h0.disabled}`]:{color:(r.vars||r).palette.text.disabled}},variants:[{props:{labelPlacement:"start"},style:{flexDirection:"row-reverse",marginRight:-11}},{props:{labelPlacement:"top"},style:{flexDirection:"column-reverse"}},{props:{labelPlacement:"bottom"},style:{flexDirection:"column"}},{props:({labelPlacement:e})=>e==="start"||e==="top"||e==="bottom",style:{marginLeft:16}}]}))),gte=at("span",{name:"MuiFormControlLabel",slot:"Asterisk"})(hr(({theme:r})=>({[`&.${h0.error}`]:{color:(r.vars||r).palette.error.main}}))),Aa=M.forwardRef(function(e,t){const n=ir({props:e,name:"MuiFormControlLabel"}),{checked:i,className:s,componentsProps:a={},control:o,disabled:l,disableTypography:u,inputRef:c,label:h,labelPlacement:m="end",name:g,onChange:y,required:v,slots:x={},slotProps:w={},value:E,...D}=n,I=Il(),A=l??o.props.disabled??I?.disabled,L=v??o.props.required,N={disabled:A,required:L};["checked","name","onChange","value","inputRef"].forEach(ie=>{typeof o.props[ie]>"u"&&typeof n[ie]<"u"&&(N[ie]=n[ie])});const U=Nd({props:n,muiFormControl:I,states:["error"]}),B={...n,disabled:A,labelPlacement:m,required:L,error:U.error},k=pte(B),H={slots:x,slotProps:{...a,...w}},[q,V]=Sr("typography",{elementType:bn,externalForwardedProps:H,ownerState:B});let Q=h;return Q!=null&&Q.type!==bn&&!u&&(Q=F.jsx(q,{component:"span",...V,className:It(k.label,V?.className),children:Q})),F.jsxs(mte,{className:It(k.root,s),ownerState:B,ref:t,...D,children:[M.cloneElement(o,N),L?F.jsxs("div",{children:[Q,F.jsxs(gte,{ownerState:B,"aria-hidden":!0,className:k.asterisk,children:["","*"]})]}):Q]})});function vte(r){return nr("MuiFormLabel",r)}const C0=Zt("MuiFormLabel",["root","colorSecondary","focused","disabled","error","filled","required","asterisk"]),yte=r=>{const{classes:e,color:t,focused:n,disabled:i,error:s,filled:a,required:o}=r,l={root:["root",`color${ft(t)}`,i&&"disabled",s&&"error",a&&"filled",n&&"focused",o&&"required"],asterisk:["asterisk",s&&"error"]};return rr(l,vte,e)},_te=at("label",{name:"MuiFormLabel",slot:"Root",overridesResolver:(r,e)=>{const{ownerState:t}=r;return[e.root,t.color==="secondary"&&e.colorSecondary,t.filled&&e.filled]}})(hr(({theme:r})=>({color:(r.vars||r).palette.text.secondary,...r.typography.body1,lineHeight:"1.4375em",padding:0,position:"relative",variants:[...Object.entries(r.palette).filter(es()).map(([e])=>({props:{color:e},style:{[`&.${C0.focused}`]:{color:(r.vars||r).palette[e].main}}})),{props:{},style:{[`&.${C0.disabled}`]:{color:(r.vars||r).palette.text.disabled},[`&.${C0.error}`]:{color:(r.vars||r).palette.error.main}}}]}))),xte=at("span",{name:"MuiFormLabel",slot:"Asterisk"})(hr(({theme:r})=>({[`&.${C0.error}`]:{color:(r.vars||r).palette.error.main}}))),O8=M.forwardRef(function(e,t){const n=ir({props:e,name:"MuiFormLabel"}),{children:i,className:s,color:a,component:o="label",disabled:l,error:u,filled:c,focused:h,required:m,...g}=n,y=Il(),v=Nd({props:n,muiFormControl:y,states:["color","required","focused","disabled","error","filled"]}),x={...n,color:v.color||"primary",component:o,disabled:v.disabled,error:v.error,filled:v.filled,focused:v.focused,required:v.required},w=yte(x);return F.jsxs(_te,{as:o,ownerState:x,className:It(w.root,s),ref:t,...g,children:[i,v.required&&F.jsxs(xte,{ownerState:x,"aria-hidden":!0,className:w.asterisk,children:["","*"]})]})});class hd{static STORAGE_KEY="local_tasks";static getTasks(){try{const e=localStorage.getItem(this.STORAGE_KEY);return e?JSON.parse(e):[]}catch(e){return console.error("Error getting tasks from localStorage:",e),[]}}static addTask(e){try{const t=this.getTasks(),n={...e,id:this.generateTaskId(),create_time:Date.now(),task_info:{run_type:e.original.run_type,last_run_time:0,next_run_time:0,is_running:!1,task_status:"Prepare"}};return t.push(n),localStorage.setItem(this.STORAGE_KEY,JSON.stringify(t)),n}catch(t){throw console.error("Error adding task to localStorage:",t),new Error("Failed to add task")}}static updateTask(e,t){try{const n=this.getTasks(),i=n.findIndex(a=>a.id===e);if(i===-1)throw new Error("Task not found");const s={...t,id:e,task_info:{...n[i].task_info,...t.task_info}};return n[i]=s,localStorage.setItem(this.STORAGE_KEY,JSON.stringify(n)),s}catch(n){throw console.error("Error updating task in localStorage:",n),new Error("Failed to update task")}}static deleteTask(e){try{const t=this.getTasks(),n=t.filter(i=>i.id!==e);if(n.length===t.length)throw new Error("Task not found");return localStorage.setItem(this.STORAGE_KEY,JSON.stringify(n)),!0}catch(t){throw console.error("Error deleting task from localStorage:",t),new Error("Failed to delete task")}}static generateTaskId(){return"task_"+Date.now()+"_"+Math.random().toString(36).substr(2,9)}static clearAllTasks(){try{localStorage.removeItem(this.STORAGE_KEY)}catch(e){throw console.error("Error clearing tasks from localStorage:",e),new Error("Failed to clear tasks")}}}const M8=M.createContext(),bte=({children:r})=>{const[e,t]=M.useState(0),[n,i]=M.useState(4),[s,a]=M.useState(""),[o,l]=M.useState([]),[u,c]=M.useState([]),[h,m]=M.useState(new Set),g=M.useRef([]);M.useRef(0);const y=M.useRef([]),v=M.useRef(""),x=M.useRef([]),w=M.useRef(null),E=M.useRef(null),D=M.useRef(0),I="local_tasks",A="nowTaskId",L="nowTaskList",N=(qe,Ue)=>{localStorage.setItem(Ue,JSON.stringify(qe))},U=()=>{console.log("start load data"),B(),k();const qe=localStorage.getItem(A);if(qe!==""){for(let Ue=0;Ue<x.current.length;Ue++)x.current[Ue].id===qe&&(E.current=x.current[Ue]);Q(qe,!1)}else Q("",!1)},B=()=>{let qe=hd.getTasks();c(qe),x.current=qe},k=()=>{const qe=localStorage.getItem(L);if(qe)try{let Ue=JSON.parse(qe);V(Ue)}catch{V([])}else V([])},H=qe=>{try{return nn.parseM3uBody(qe)}catch(Ue){return console.log("m3u8BodyToStructList err",Ue),[]}},q=(qe,Ue)=>{c(Pe=>{const $e=Pe.map(rt=>rt.id===qe?{...rt,task_info:{...rt.task_info,task_status:"Completed"},list:Ue}:rt);return N($e,I),x.current=$e,$e}),V([]),Q("",!0)},V=qe=>{l(qe),N(qe,L),y.current=qe},Q=(qe,Ue)=>{a(qe),Ue&&localStorage.setItem(A,qe),v.current=qe},ie=(qe,Ue)=>{c(Pe=>{const $e=Pe.map(rt=>rt.id===qe?{...rt,list:Ue}:rt);return N($e,I),x.current=$e,$e})},le=()=>{w.current||(w.current=setInterval(pe,1e4))},he=async(qe,Ue)=>{console.log(`Checking URL: ${qe.url}`);let Pe=!1;Ue.no_check&&(Pe=!0);let $e=null;return Pe?$e={status:300,audio:null,video:null,error:""}:Ue.ffmpeg_check?$e=await ae(qe):$e=await ne(qe,Ue),console.log("checkUrl result",$e),$e},ae=async(qe,Ue)=>{try{let Pe=await Dt("get_video_info",{url:qe.url});if(console.log("checkUrlByCmd",Pe),Pe?.streams?.length>0){let $e=[],rt=[];for(let lt=0;lt<Pe.streams.length;lt++)Pe.streams[lt].codec_type==="video"&&$e.push(Pe.streams[lt]);for(let lt=0;lt<Pe.streams.length;lt++)Pe.streams[lt].codec_type==="audio"&&rt.push(Pe.streams[lt]);return{status:200,audio:rt,video:$e,error:""}}else return console.log("checkUrlByCmd error empty"),{status:500,audio:null,video:null,error:"empty data"}}catch(Pe){return console.log("checkUrlByCmd error",Pe),{status:500,audio:null,video:null,error:Pe}}},ne=async(qe,Ue)=>{try{let Pe=!1;if(!qe.url.startsWith("http://")&&!qe.url.startsWith("https://")&&(Pe=!0),Pe)return{status:300,audio:null,video:null,error:""};console.log("checkUrlByWeb, task timout ",Ue.http_timeout);const $e=new AbortController,rt=setTimeout(()=>$e.abort(),Ue.http_timeout),lt=await fetch(qe.url,{method:"HEAD",signal:$e.signal});if(!lt.ok||lt.bodyUsed)return console.log(`Request failed for ${qe.url}:`,{ok:lt.ok,bodyUsed:lt.bodyUsed}),clearTimeout(rt),$e.abort(),{status:500,audio:null,video:null};clearTimeout(rt);const ht=lt.headers.get("content-type");return console.log(`Content-Type for ${qe.url}:`,ht),!ht||!(ht.includes("application/vnd.apple.mpegurl")||ht.includes("application/x-mpegurl")||ht.includes("audio/mpegurl")||ht.includes("audio/x-mpegurl")||ht.includes("text/plain")||ht.includes("application/x-mpegURL")||ht.includes("application/vnd.apple.mpegURL"))?{status:500,audio:null,video:null,contentType:ht}:{status:200,audio:null,video:null,contentType:ht}}catch(Pe){return console.log(`Error checking ${qe.url}:`,Pe),{status:500,audio:null,video:null,contentType:""}}},ue=async qe=>{for(;;){console.log("createTaskProcessor, nowIndex:",qe);let Ue=null;for(let Pe=0;Pe<y.current.length;Pe++)if(y.current[Pe].status===0){Ue=y.current[Pe];break}if(!Ue)break;y.current=y.current.map(Pe=>Pe.index===Ue.index?{...Pe,status:1}:Pe),Be(y.current);try{const Pe=await he(Ue,E.current.original);console.log("checkUrl result",Pe),console.log(Pe.status),y.current=y.current.map($e=>$e.index===Ue.index?{...$e,status:Pe.status,audio:Pe.audio,video:Pe.video}:$e),Be(y.current)}catch(Pe){console.error(`Task processor ${qe} error:`,Pe),y.current=y.current.map($e=>$e.index===Ue.index?{...$e,status:500}:$e),Be(y.current)}}},ee=()=>{const qe=[];if(console.log("startJobWorker, nowTaskRef.current",E.current),E.current!==null){D.current=1;for(let Ue=0;Ue<E.current.original.concurrent;Ue++)qe.push(ue(Ue));Promise.all(qe).then(()=>{D.current=0,console.log("All task processors completed"),g.current=[]}).catch(Ue=>{D.current=0,console.error("Task processor error:",Ue),g.current=[]})}},pe=async()=>{await Ke();let qe=!1,Ue="";if(v.current!==""&&y.current.length>0||v.current===""&&y.current.length>0){let Pe=!1;for(let $e=0;$e<x.current.length;$e++)x.current[$e].id===v.current&&(Pe=!0);(!Pe||v.current==="")&&(Q("",!0),V([]))}if(y.current.length===0){let Pe="",$e=[],rt=null;for(let lt=0;lt<x.current.length;lt++)x.current[lt].task_info.task_status.toLowerCase()==="pending"&&Pe===""&&x.current[lt].id!==Ue&&(Pe=x.current[lt].id,$e=x.current[lt].list,rt=x.current[lt]);E.current=rt,console.log("----- task list reset",Pe,$e),V($e),Q(Pe,!0),$e.length>0&&(qe=!0)}else{let Pe=!0;for(let $e=0;$e<y.current.length;$e++)y.current[$e].status==0&&(Pe=!1);Pe?(Ue=v.current,console.log("set task complate",Ue,y.current),q(Ue,y.current)):qe=!0}if(console.log("nowTaskIdRef.current",v.current),v.current!==""&&E.current!==null)for(let Pe=0;Pe<x.current.length;Pe++)x.current[Pe].id===v.current&&(E.current=x.current[Pe]);qe&&D.current===0&&(console.log("startJobWorker"),ee())},me=()=>{xe(),w.current&&(clearInterval(w.current),w.current=null)},xe=()=>{g.current.forEach(qe=>qe.terminate())};M.useEffect(()=>(U(),console.log("-----task start--",u,x.current),le(),()=>{me()}),[]);const Be=qe=>{l(qe),N(qe,L)},Oe=(qe,Ue)=>{c(Pe=>{const $e=Pe.map(rt=>rt.id===qe?Ue==="Prepare"?{...rt,task_info:{...rt.task_info,task_status:Ue},list:[],bodies:[]}:{...rt,task_info:{...rt.task_info,task_status:Ue}}:rt);return N($e,I),x.current=$e,$e})},dt=(qe,Ue)=>{c(Pe=>{const $e=Pe.map(rt=>rt.id===qe?{...rt,bodies:Ue}:rt);return N($e,I),x.current=$e,$e})},Ke=async()=>{console.log("------prepare");for(const qe of x.current)if(qe.task_info.task_status==="Prepare")try{let Ue=await Ot(qe.original.urls),Pe="Pending",$e=!1,rt=!1;for(let lt=0;lt<Ue.length;lt++)Ue[lt].status===200&&(rt=!0),Ue[lt].status!==200&&($e=!0);if($e&&rt&&(Pe="FetchSomeDataError"),$e&&!rt&&(Pe="FetchDataError"),rt){let lt=[];for(let ht=0;ht<Ue.length;ht++)if(Ue[ht].status===200){let ut=H(Ue[ht].body,qe.original.rename);for(let St=0;St<ut.length;St++)lt.push(ut[St])}lt=lt.filter((ht,ut,St)=>ut===St.findIndex(ot=>ot.url===ht.url)),ie(qe.id,lt)}dt(qe.id,Ue),Oe(qe.id,Pe)}catch(Ue){console.error("Error preparing task:",Ue)}},_t=(qe,Ue)=>{if(e===0)return qe;let Pe=parseInt(Ue,10);return"/fetch/m3u-body?url="+qe+"&timeout="+(isNaN(Pe)?"-1":Pe)},Ze=qe=>qe.substr(0,7)==="#EXTM3U",Ot=async qe=>{let Ue=[],Pe=[];for(let $e=0;$e<qe.length;$e++){let rt=qe[$e];if(!rt.startsWith("localstorage/")){let lt=2e3;rt=_t(rt,lt),Ue.push(Ar.get(rt,{timeout:lt}))}}for(let $e=0;$e<qe.length;$e++){let rt=qe[$e];if(rt.startsWith("localstorage/")){const lt=localStorage.getItem(rt);if(lt){let ht={status:200,url:rt,body:lt};Pe.push(ht)}else{let ht={status:404,url:rt,body:"Data not found in localStorage"};Pe.push(ht)}}}return Ue.length>0&&(await Promise.allSettled(Ue)).forEach((rt,lt)=>{let ht=!0,ut="";if(rt.status==="fulfilled"){const ot=rt.value.data;Ze(ot)?(ht=!1,ut=ot):(ht=!0,ut=ot)}else ht=!0,ut=rt.reason.message;let St=qe[lt];ht?Pe.push({status:500,url:St,body:ut}):Pe.push({status:200,url:St,body:ut})}),Pe},Nt={tasks:u,runningTasks:h,freshTaskList:B,updateTaskStatus:Oe};return F.jsx(M8.Provider,{value:Nt,children:r})},F8=M.createContext();function Ste(r){return nr("MuiTable",r)}Zt("MuiTable",["root","stickyHeader"]);const Tte=r=>{const{classes:e,stickyHeader:t}=r;return rr({root:["root",t&&"stickyHeader"]},Ste,e)},Cte=at("table",{name:"MuiTable",slot:"Root",overridesResolver:(r,e)=>{const{ownerState:t}=r;return[e.root,t.stickyHeader&&e.stickyHeader]}})(hr(({theme:r})=>({display:"table",width:"100%",borderCollapse:"collapse",borderSpacing:0,"& caption":{...r.typography.body2,padding:r.spacing(2),color:(r.vars||r).palette.text.secondary,textAlign:"left",captionSide:"bottom"},variants:[{props:({ownerState:e})=>e.stickyHeader,style:{borderCollapse:"separate"}}]}))),bL="table",B8=M.forwardRef(function(e,t){const n=ir({props:e,name:"MuiTable"}),{className:i,component:s=bL,padding:a="normal",size:o="medium",stickyHeader:l=!1,...u}=n,c={...n,component:s,padding:a,size:o,stickyHeader:l},h=Tte(c),m=M.useMemo(()=>({padding:a,size:o,stickyHeader:l}),[a,o,l]);return F.jsx(F8.Provider,{value:m,children:F.jsx(Cte,{as:s,role:s===bL?null:"table",ref:t,className:It(h.root,i),ownerState:c,...u})})}),Lb=M.createContext();function wte(r){return nr("MuiTableBody",r)}Zt("MuiTableBody",["root"]);const Ete=r=>{const{classes:e}=r;return rr({root:["root"]},wte,e)},kte=at("tbody",{name:"MuiTableBody",slot:"Root"})({display:"table-row-group"}),Ate={variant:"body"},SL="tbody",N8=M.forwardRef(function(e,t){const n=ir({props:e,name:"MuiTableBody"}),{className:i,component:s=SL,...a}=n,o={...n,component:s},l=Ete(o);return F.jsx(Lb.Provider,{value:Ate,children:F.jsx(kte,{className:It(l.root,i),as:s,ref:t,role:s===SL?null:"rowgroup",ownerState:o,...a})})});function Dte(r){return nr("MuiTableCell",r)}const Ite=Zt("MuiTableCell",["root","head","body","footer","sizeSmall","sizeMedium","paddingCheckbox","paddingNone","alignLeft","alignCenter","alignRight","alignJustify","stickyHeader"]),Pte=r=>{const{classes:e,variant:t,align:n,padding:i,size:s,stickyHeader:a}=r,o={root:["root",t,a&&"stickyHeader",n!=="inherit"&&`align${ft(n)}`,i!=="normal"&&`padding${ft(i)}`,`size${ft(s)}`]};return rr(o,Dte,e)},Rte=at("td",{name:"MuiTableCell",slot:"Root",overridesResolver:(r,e)=>{const{ownerState:t}=r;return[e.root,e[t.variant],e[`size${ft(t.size)}`],t.padding!=="normal"&&e[`padding${ft(t.padding)}`],t.align!=="inherit"&&e[`align${ft(t.align)}`],t.stickyHeader&&e.stickyHeader]}})(hr(({theme:r})=>({...r.typography.body2,display:"table-cell",verticalAlign:"inherit",borderBottom:r.vars?`1px solid ${r.vars.palette.TableCell.border}`:`1px solid
    ${r.palette.mode==="light"?kg(Xr(r.palette.divider,1),.88):Eg(Xr(r.palette.divider,1),.68)}`,textAlign:"left",padding:16,variants:[{props:{variant:"head"},style:{color:(r.vars||r).palette.text.primary,lineHeight:r.typography.pxToRem(24),fontWeight:r.typography.fontWeightMedium}},{props:{variant:"body"},style:{color:(r.vars||r).palette.text.primary}},{props:{variant:"footer"},style:{color:(r.vars||r).palette.text.secondary,lineHeight:r.typography.pxToRem(21),fontSize:r.typography.pxToRem(12)}},{props:{size:"small"},style:{padding:"6px 16px",[`&.${Ite.paddingCheckbox}`]:{width:24,padding:"0 12px 0 16px","& > *":{padding:0}}}},{props:{padding:"checkbox"},style:{width:48,padding:"0 0 0 4px"}},{props:{padding:"none"},style:{padding:0}},{props:{align:"left"},style:{textAlign:"left"}},{props:{align:"center"},style:{textAlign:"center"}},{props:{align:"right"},style:{textAlign:"right",flexDirection:"row-reverse"}},{props:{align:"justify"},style:{textAlign:"justify"}},{props:({ownerState:e})=>e.stickyHeader,style:{position:"sticky",top:0,zIndex:2,backgroundColor:(r.vars||r).palette.background.default}}]}))),Dd=M.forwardRef(function(e,t){const n=ir({props:e,name:"MuiTableCell"}),{align:i="inherit",className:s,component:a,padding:o,scope:l,size:u,sortDirection:c,variant:h,...m}=n,g=M.useContext(F8),y=M.useContext(Lb),v=y&&y.variant==="head";let x;a?x=a:x=v?"th":"td";let w=l;x==="td"?w=void 0:!w&&v&&(w="col");const E=h||y&&y.variant,D={...n,align:i,component:x,padding:o||(g&&g.padding?g.padding:"normal"),size:u||(g&&g.size?g.size:"medium"),sortDirection:c,stickyHeader:E==="head"&&g&&g.stickyHeader,variant:E},I=Pte(D);let A=null;return c&&(A=c==="asc"?"ascending":"descending"),F.jsx(Rte,{as:x,ref:t,className:It(I.root,s),"aria-sort":A,scope:w,ownerState:D,...m})});function Lte(r){return nr("MuiTableContainer",r)}Zt("MuiTableContainer",["root"]);const Ote=r=>{const{classes:e}=r;return rr({root:["root"]},Lte,e)},Mte=at("div",{name:"MuiTableContainer",slot:"Root"})({width:"100%",overflowX:"auto"}),U8=M.forwardRef(function(e,t){const n=ir({props:e,name:"MuiTableContainer"}),{className:i,component:s="div",...a}=n,o={...n,component:s},l=Ote(o);return F.jsx(Mte,{ref:t,as:s,className:It(l.root,i),ownerState:o,...a})});function Fte(r){return nr("MuiTableHead",r)}Zt("MuiTableHead",["root"]);const Bte=r=>{const{classes:e}=r;return rr({root:["root"]},Fte,e)},Nte=at("thead",{name:"MuiTableHead",slot:"Root"})({display:"table-header-group"}),Ute={variant:"head"},TL="thead",$8=M.forwardRef(function(e,t){const n=ir({props:e,name:"MuiTableHead"}),{className:i,component:s=TL,...a}=n,o={...n,component:s},l=Bte(o);return F.jsx(Lb.Provider,{value:Ute,children:F.jsx(Nte,{as:s,className:It(l.root,i),ref:t,role:s===TL?null:"rowgroup",ownerState:o,...a})})});function $te(r){return nr("MuiTableRow",r)}const CL=Zt("MuiTableRow",["root","selected","hover","head","footer"]),jte=r=>{const{classes:e,selected:t,hover:n,head:i,footer:s}=r;return rr({root:["root",t&&"selected",n&&"hover",i&&"head",s&&"footer"]},$te,e)},zte=at("tr",{name:"MuiTableRow",slot:"Root",overridesResolver:(r,e)=>{const{ownerState:t}=r;return[e.root,t.head&&e.head,t.footer&&e.footer]}})(hr(({theme:r})=>({color:"inherit",display:"table-row",verticalAlign:"middle",outline:0,[`&.${CL.hover}:hover`]:{backgroundColor:(r.vars||r).palette.action.hover},[`&.${CL.selected}`]:{backgroundColor:r.vars?`rgba(${r.vars.palette.primary.mainChannel} / ${r.vars.palette.action.selectedOpacity})`:Xr(r.palette.primary.main,r.palette.action.selectedOpacity),"&:hover":{backgroundColor:r.vars?`rgba(${r.vars.palette.primary.mainChannel} / calc(${r.vars.palette.action.selectedOpacity} + ${r.vars.palette.action.hoverOpacity}))`:Xr(r.palette.primary.main,r.palette.action.selectedOpacity+r.palette.action.hoverOpacity)}}}))),wL="tr",P2=M.forwardRef(function(e,t){const n=ir({props:e,name:"MuiTableRow"}),{className:i,component:s=wL,hover:a=!1,selected:o=!1,...l}=n,u=M.useContext(Lb),c={...n,component:s,hover:a,selected:o,head:u&&u.variant==="head",footer:u&&u.variant==="footer"},h=jte(c);return F.jsx(zte,{as:s,ref:t,className:It(h.root,i),role:s===wL?null:"row",ownerState:c,...l})});function Hte(r={}){const{autoHideDuration:e=null,disableWindowBlurListener:t=!1,onClose:n,open:i,resumeHideDuration:s}=r,a=Pb();M.useEffect(()=>{if(!i)return;function w(E){E.defaultPrevented||E.key==="Escape"&&n?.(E,"escapeKeyDown")}return document.addEventListener("keydown",w),()=>{document.removeEventListener("keydown",w)}},[i,n]);const o=ho((w,E)=>{n?.(w,E)}),l=ho(w=>{!n||w==null||a.start(w,()=>{o(null,"timeout")})});M.useEffect(()=>(i&&l(e),a.clear),[i,e,l,a]);const u=w=>{n?.(w,"clickaway")},c=a.clear,h=M.useCallback(()=>{e!=null&&l(s??e*.5)},[e,s,l]),m=w=>E=>{const D=w.onBlur;D?.(E),h()},g=w=>E=>{const D=w.onFocus;D?.(E),c()},y=w=>E=>{const D=w.onMouseEnter;D?.(E),c()},v=w=>E=>{const D=w.onMouseLeave;D?.(E),h()};return M.useEffect(()=>{if(!t&&i)return window.addEventListener("focus",h),window.addEventListener("blur",c),()=>{window.removeEventListener("focus",h),window.removeEventListener("blur",c)}},[t,i,h,c]),{getRootProps:(w={})=>{const E={...q_(r),...q_(w)};return{role:"presentation",...w,...E,onBlur:m(E),onFocus:g(E),onMouseEnter:y(E),onMouseLeave:v(E)}},onClickAway:u}}function EL(r){return r.substring(2).toLowerCase()}function Vte(r,e){return e.documentElement.clientWidth<r.clientX||e.documentElement.clientHeight<r.clientY}function Wte(r){const{children:e,disableReactTree:t=!1,mouseEvent:n="onClick",onClickAway:i,touchEvent:s="onTouchEnd"}=r,a=M.useRef(!1),o=M.useRef(null),l=M.useRef(!1),u=M.useRef(!1);M.useEffect(()=>(setTimeout(()=>{l.current=!0},0),()=>{l.current=!1}),[]);const c=ci(Jh(e),o),h=ho(y=>{const v=u.current;u.current=!1;const x=aa(o.current);if(!l.current||!o.current||"clientX"in y&&Vte(y,x))return;if(a.current){a.current=!1;return}let w;y.composedPath?w=y.composedPath().includes(o.current):w=!x.documentElement.contains(y.target)||o.current.contains(y.target),!w&&(t||!v)&&i(y)}),m=y=>v=>{u.current=!0;const x=e.props[y];x&&x(v)},g={ref:c};return s!==!1&&(g[s]=m(s)),M.useEffect(()=>{if(s!==!1){const y=EL(s),v=aa(o.current),x=()=>{a.current=!0};return v.addEventListener(y,h),v.addEventListener("touchmove",x),()=>{v.removeEventListener(y,h),v.removeEventListener("touchmove",x)}}},[h,s]),n!==!1&&(g[n]=m(n)),M.useEffect(()=>{if(n!==!1){const y=EL(n),v=aa(o.current);return v.addEventListener(y,h),()=>{v.removeEventListener(y,h)}}},[h,n]),M.cloneElement(e,g)}function _w(r){return`scale(${r}, ${r**2})`}const qte={entering:{opacity:1,transform:_w(1)},entered:{opacity:1,transform:"none"}},d1=typeof navigator<"u"&&/^((?!chrome|android).)*(safari|mobile)/i.test(navigator.userAgent)&&/(os |version\/)15(.|_)4/i.test(navigator.userAgent),Z_=M.forwardRef(function(e,t){const{addEndListener:n,appear:i=!0,children:s,easing:a,in:o,onEnter:l,onEntered:u,onEntering:c,onExit:h,onExited:m,onExiting:g,style:y,timeout:v="auto",TransitionComponent:x=Zo,...w}=e,E=Pb(),D=M.useRef(),I=Ec(),A=M.useRef(null),L=ci(A,Jh(s),t),N=ie=>le=>{if(ie){const he=A.current;le===void 0?ie(he):ie(he,le)}},U=N(c),B=N((ie,le)=>{E2(ie);const{duration:he,delay:ae,easing:ne}=Ad({style:y,timeout:v,easing:a},{mode:"enter"});let ue;v==="auto"?(ue=I.transitions.getAutoHeightDuration(ie.clientHeight),D.current=ue):ue=he,ie.style.transition=[I.transitions.create("opacity",{duration:ue,delay:ae}),I.transitions.create("transform",{duration:d1?ue:ue*.666,delay:ae,easing:ne})].join(","),l&&l(ie,le)}),k=N(u),H=N(g),q=N(ie=>{const{duration:le,delay:he,easing:ae}=Ad({style:y,timeout:v,easing:a},{mode:"exit"});let ne;v==="auto"?(ne=I.transitions.getAutoHeightDuration(ie.clientHeight),D.current=ne):ne=le,ie.style.transition=[I.transitions.create("opacity",{duration:ne,delay:he}),I.transitions.create("transform",{duration:d1?ne:ne*.666,delay:d1?he:he||ne*.333,easing:ae})].join(","),ie.style.opacity=0,ie.style.transform=_w(.75),h&&h(ie)}),V=N(m),Q=ie=>{v==="auto"&&E.start(D.current||0,ie),n&&n(A.current,ie)};return F.jsx(x,{appear:i,in:o,nodeRef:A,onEnter:B,onEntered:k,onEntering:U,onExit:q,onExited:V,onExiting:H,addEndListener:Q,timeout:v==="auto"?null:v,...w,children:(ie,{ownerState:le,...he})=>M.cloneElement(s,{style:{opacity:0,transform:_w(.75),visibility:ie==="exited"&&!o?"hidden":void 0,...qte[ie],...y,...s.props.style},ref:L,...he})})});Z_&&(Z_.muiSupportAuto=!0);function Gte(r){return nr("MuiSnackbarContent",r)}Zt("MuiSnackbarContent",["root","message","action"]);const Kte=r=>{const{classes:e}=r;return rr({root:["root"],action:["action"],message:["message"]},Gte,e)},Xte=at(kc,{name:"MuiSnackbarContent",slot:"Root"})(hr(({theme:r})=>{const e=r.palette.mode==="light"?.8:.98,t=KB(r.palette.background.default,e);return{...r.typography.body2,color:r.vars?r.vars.palette.SnackbarContent.color:r.palette.getContrastText(t),backgroundColor:r.vars?r.vars.palette.SnackbarContent.bg:t,display:"flex",alignItems:"center",flexWrap:"wrap",padding:"6px 16px",borderRadius:(r.vars||r).shape.borderRadius,flexGrow:1,[r.breakpoints.up("sm")]:{flexGrow:"initial",minWidth:288}}})),Yte=at("div",{name:"MuiSnackbarContent",slot:"Message"})({padding:"8px 0"}),Qte=at("div",{name:"MuiSnackbarContent",slot:"Action"})({display:"flex",alignItems:"center",marginLeft:"auto",paddingLeft:16,marginRight:-8}),Jte=M.forwardRef(function(e,t){const n=ir({props:e,name:"MuiSnackbarContent"}),{action:i,className:s,message:a,role:o="alert",...l}=n,u=n,c=Kte(u);return F.jsxs(Xte,{role:o,square:!0,elevation:6,className:It(c.root,s),ownerState:u,ref:t,...l,children:[F.jsx(Yte,{className:c.message,ownerState:u,children:a}),i?F.jsx(Qte,{className:c.action,ownerState:u,children:i}):null]})});function Zte(r){return nr("MuiSnackbar",r)}Zt("MuiSnackbar",["root","anchorOriginTopCenter","anchorOriginBottomCenter","anchorOriginTopRight","anchorOriginBottomRight","anchorOriginTopLeft","anchorOriginBottomLeft"]);const ere=r=>{const{classes:e,anchorOrigin:t}=r,n={root:["root",`anchorOrigin${ft(t.vertical)}${ft(t.horizontal)}`]};return rr(n,Zte,e)},tre=at("div",{name:"MuiSnackbar",slot:"Root",overridesResolver:(r,e)=>{const{ownerState:t}=r;return[e.root,e[`anchorOrigin${ft(t.anchorOrigin.vertical)}${ft(t.anchorOrigin.horizontal)}`]]}})(hr(({theme:r})=>({zIndex:(r.vars||r).zIndex.snackbar,position:"fixed",display:"flex",left:8,right:8,justifyContent:"center",alignItems:"center",variants:[{props:({ownerState:e})=>e.anchorOrigin.vertical==="top",style:{top:8,[r.breakpoints.up("sm")]:{top:24}}},{props:({ownerState:e})=>e.anchorOrigin.vertical!=="top",style:{bottom:8,[r.breakpoints.up("sm")]:{bottom:24}}},{props:({ownerState:e})=>e.anchorOrigin.horizontal==="left",style:{justifyContent:"flex-start",[r.breakpoints.up("sm")]:{left:24,right:"auto"}}},{props:({ownerState:e})=>e.anchorOrigin.horizontal==="right",style:{justifyContent:"flex-end",[r.breakpoints.up("sm")]:{right:24,left:"auto"}}},{props:({ownerState:e})=>e.anchorOrigin.horizontal==="center",style:{[r.breakpoints.up("sm")]:{left:"50%",right:"auto",transform:"translateX(-50%)"}}}]}))),Kp=M.forwardRef(function(e,t){const n=ir({props:e,name:"MuiSnackbar"}),i=Ec(),s={enter:i.transitions.duration.enteringScreen,exit:i.transitions.duration.leavingScreen},{action:a,anchorOrigin:{vertical:o,horizontal:l}={vertical:"bottom",horizontal:"left"},autoHideDuration:u=null,children:c,className:h,ClickAwayListenerProps:m,ContentProps:g,disableWindowBlurListener:y=!1,message:v,onBlur:x,onClose:w,onFocus:E,onMouseEnter:D,onMouseLeave:I,open:A,resumeHideDuration:L,slots:N={},slotProps:U={},TransitionComponent:B,transitionDuration:k=s,TransitionProps:{onEnter:H,onExited:q,...V}={},...Q}=n,ie={...n,anchorOrigin:{vertical:o,horizontal:l},autoHideDuration:u,disableWindowBlurListener:y,TransitionComponent:B,transitionDuration:k},le=ere(ie),{getRootProps:he,onClickAway:ae}=Hte({...ie}),[ne,ue]=M.useState(!0),ee=qe=>{ue(!0),q&&q(qe)},pe=(qe,Ue)=>{ue(!1),H&&H(qe,Ue)},me={slots:{transition:B,...N},slotProps:{content:g,clickAwayListener:m,transition:V,...U}},[xe,Be]=Sr("root",{ref:t,className:[le.root,h],elementType:tre,getSlotProps:he,externalForwardedProps:{...me,...Q},ownerState:ie}),[Oe,{ownerState:dt,...Ke}]=Sr("clickAwayListener",{elementType:Wte,externalForwardedProps:me,getSlotProps:qe=>({onClickAway:(...Ue)=>{const Pe=Ue[0];qe.onClickAway?.(...Ue),!Pe?.defaultMuiPrevented&&ae(...Ue)}}),ownerState:ie}),[_t,Ze]=Sr("content",{elementType:Jte,shouldForwardComponentProp:!0,externalForwardedProps:me,additionalProps:{message:v,action:a},ownerState:ie}),[Ot,Nt]=Sr("transition",{elementType:Z_,externalForwardedProps:me,getSlotProps:qe=>({onEnter:(...Ue)=>{qe.onEnter?.(...Ue),pe(...Ue)},onExited:(...Ue)=>{qe.onExited?.(...Ue),ee(...Ue)}}),additionalProps:{appear:!0,in:A,timeout:k,direction:o==="top"?"down":"up"},ownerState:ie});return!A&&ne?null:F.jsx(Oe,{...Ke,...N.clickAwayListener&&{ownerState:dt},children:F.jsx(xe,{...Be,children:F.jsx(Ot,{...Nt,children:c||F.jsx(_t,{...Ze})})})})}),Ig=Ir(F.jsx("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6z"})),rre=Ir(F.jsx("path",{d:"M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4z"})),xw=Ir(F.jsx("path",{d:"M19 9h-4V3H9v6H5l7 7zM5 18v2h14v-2z"})),nre=Ir(F.jsx("path",{d:"M5 4v2h14V4zm0 10h4v6h6v-6h4l-7-7z"}));class ire{static STORAGE_PREFIX="localstorage/";static saveFile(e,t){const n=this.STORAGE_PREFIX+e;try{return localStorage.setItem(n,t),n}catch(i){throw console.error("Error saving file to localStorage:",i),new Error("Failed to save file to localStorage")}}static getFile(e){const t=this.STORAGE_PREFIX+e;try{return localStorage.getItem(t)}catch(n){return console.error("Error reading file from localStorage:",n),null}}static deleteFile(e){const t=this.STORAGE_PREFIX+e;try{localStorage.removeItem(t)}catch(n){console.error("Error deleting file from localStorage:",n)}}static async readAndSaveFile(e){return new Promise((t,n)=>{if(!e||!(e instanceof Blob)){n(new Error("Invalid file object"));return}const i=new FileReader;i.onload=s=>{try{const a=s.target.result,o=e.name||`file_${Date.now()}`,l=this.saveFile(o,a);t(l)}catch(a){n(a)}},i.onerror=s=>{n(new Error("Failed to read file: "+s.message))};try{i.readAsText(e)}catch(s){n(new Error("Failed to read file: "+s.message))}})}static hasFile(e){const t=this.STORAGE_PREFIX+e;return localStorage.getItem(t)!==null}static getAllFileKeys(){const e=[];for(let t=0;t<localStorage.length;t++){const n=localStorage.key(t);n.startsWith(this.STORAGE_PREFIX)&&e.push(n.replace(this.STORAGE_PREFIX,""))}return e}}class sre{constructor(e=""){this.baseUrl=e}async getTaskList(){try{return{list:hd.getTasks()}}catch(e){return console.error("Error getting task list:",e),{list:[]}}}async addTask(e){try{return{code:"200",msg:"Success",data:hd.addTask(e)}}catch(t){return console.error("Error adding task:",t),{code:"500",msg:t.message}}}async uploadFile(e){try{const t=e.get("file");if(!t)throw new Error("No file found in FormData");return{code:"200",msg:"Success",url:await ire.readAndSaveFile(t)}}catch(t){throw console.error("File upload failed:",t),t}}async updateTask(e,t){try{return{code:"200",msg:"Success",data:hd.updateTask(e,t)}}catch(n){return console.error("Error updating task:",n),{code:"500",msg:n.message}}}async deleteTask(e){try{return hd.deleteTask(e),{code:"200",msg:"Success"}}catch(t){return console.error("Error deleting task:",t),{code:"500",msg:t.message}}}async runTask(e){return{code:"200",msg:"Success"}}async getDownloadBody(e){return{content:"",url:""}}async exportTasks(){try{return hd.getTasks()}catch(e){return console.error("Error exporting tasks:",e),[]}}async importTasks(e){try{return hd.clearAllTasks(),e.forEach(t=>{hd.addTask(t)}),{code:"200",msg:"Success"}}catch(t){return console.error("Error importing tasks:",t),{code:"500",msg:t.message}}}}const are={500:"#e91e63"};function J0(r){const{elementType:e,externalSlotProps:t,ownerState:n,skipResolvingSlotProps:i=!1,...s}=r,a=i?{}:f8(t,n),{props:o,internalRef:l}=p8({...s,externalSlotProps:a}),u=ci(l,a?.ref,r.additionalProps?.ref);return h8(e,{...o,ref:u},n)}const ore=Ir(F.jsx("path",{d:"M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm5 13.59L15.59 17 12 13.41 8.41 17 7 15.59 10.59 12 7 8.41 8.41 7 12 10.59 15.59 7 17 8.41 13.41 12 17 15.59z"}));function lre(r){return nr("MuiChip",r)}const Zr=Zt("MuiChip",["root","sizeSmall","sizeMedium","colorDefault","colorError","colorInfo","colorPrimary","colorSecondary","colorSuccess","colorWarning","disabled","clickable","clickableColorPrimary","clickableColorSecondary","deletable","deletableColorPrimary","deletableColorSecondary","outlined","filled","outlinedPrimary","outlinedSecondary","filledPrimary","filledSecondary","avatar","avatarSmall","avatarMedium","avatarColorPrimary","avatarColorSecondary","icon","iconSmall","iconMedium","iconColorPrimary","iconColorSecondary","label","labelSmall","labelMedium","deleteIcon","deleteIconSmall","deleteIconMedium","deleteIconColorPrimary","deleteIconColorSecondary","deleteIconOutlinedColorPrimary","deleteIconOutlinedColorSecondary","deleteIconFilledColorPrimary","deleteIconFilledColorSecondary","focusVisible"]),ure=r=>{const{classes:e,disabled:t,size:n,color:i,iconColor:s,onDelete:a,clickable:o,variant:l}=r,u={root:["root",l,t&&"disabled",`size${ft(n)}`,`color${ft(i)}`,o&&"clickable",o&&`clickableColor${ft(i)}`,a&&"deletable",a&&`deletableColor${ft(i)}`,`${l}${ft(i)}`],label:["label",`label${ft(n)}`],avatar:["avatar",`avatar${ft(n)}`,`avatarColor${ft(i)}`],icon:["icon",`icon${ft(n)}`,`iconColor${ft(s)}`],deleteIcon:["deleteIcon",`deleteIcon${ft(n)}`,`deleteIconColor${ft(i)}`,`deleteIcon${ft(l)}Color${ft(i)}`]};return rr(u,lre,e)},cre=at("div",{name:"MuiChip",slot:"Root",overridesResolver:(r,e)=>{const{ownerState:t}=r,{color:n,iconColor:i,clickable:s,onDelete:a,size:o,variant:l}=t;return[{[`& .${Zr.avatar}`]:e.avatar},{[`& .${Zr.avatar}`]:e[`avatar${ft(o)}`]},{[`& .${Zr.avatar}`]:e[`avatarColor${ft(n)}`]},{[`& .${Zr.icon}`]:e.icon},{[`& .${Zr.icon}`]:e[`icon${ft(o)}`]},{[`& .${Zr.icon}`]:e[`iconColor${ft(i)}`]},{[`& .${Zr.deleteIcon}`]:e.deleteIcon},{[`& .${Zr.deleteIcon}`]:e[`deleteIcon${ft(o)}`]},{[`& .${Zr.deleteIcon}`]:e[`deleteIconColor${ft(n)}`]},{[`& .${Zr.deleteIcon}`]:e[`deleteIcon${ft(l)}Color${ft(n)}`]},e.root,e[`size${ft(o)}`],e[`color${ft(n)}`],s&&e.clickable,s&&n!=="default"&&e[`clickableColor${ft(n)})`],a&&e.deletable,a&&n!=="default"&&e[`deletableColor${ft(n)}`],e[l],e[`${l}${ft(n)}`]]}})(hr(({theme:r})=>{const e=r.palette.mode==="light"?r.palette.grey[700]:r.palette.grey[300];return{maxWidth:"100%",fontFamily:r.typography.fontFamily,fontSize:r.typography.pxToRem(13),display:"inline-flex",alignItems:"center",justifyContent:"center",height:32,color:(r.vars||r).palette.text.primary,backgroundColor:(r.vars||r).palette.action.selected,borderRadius:32/2,whiteSpace:"nowrap",transition:r.transitions.create(["background-color","box-shadow"]),cursor:"unset",outline:0,textDecoration:"none",border:0,padding:0,verticalAlign:"middle",boxSizing:"border-box",[`&.${Zr.disabled}`]:{opacity:(r.vars||r).palette.action.disabledOpacity,pointerEvents:"none"},[`& .${Zr.avatar}`]:{marginLeft:5,marginRight:-6,width:24,height:24,color:r.vars?r.vars.palette.Chip.defaultAvatarColor:e,fontSize:r.typography.pxToRem(12)},[`& .${Zr.avatarColorPrimary}`]:{color:(r.vars||r).palette.primary.contrastText,backgroundColor:(r.vars||r).palette.primary.dark},[`& .${Zr.avatarColorSecondary}`]:{color:(r.vars||r).palette.secondary.contrastText,backgroundColor:(r.vars||r).palette.secondary.dark},[`& .${Zr.avatarSmall}`]:{marginLeft:4,marginRight:-4,width:18,height:18,fontSize:r.typography.pxToRem(10)},[`& .${Zr.icon}`]:{marginLeft:5,marginRight:-6},[`& .${Zr.deleteIcon}`]:{WebkitTapHighlightColor:"transparent",color:r.vars?`rgba(${r.vars.palette.text.primaryChannel} / 0.26)`:Xr(r.palette.text.primary,.26),fontSize:22,cursor:"pointer",margin:"0 5px 0 -6px","&:hover":{color:r.vars?`rgba(${r.vars.palette.text.primaryChannel} / 0.4)`:Xr(r.palette.text.primary,.4)}},variants:[{props:{size:"small"},style:{height:24,[`& .${Zr.icon}`]:{fontSize:18,marginLeft:4,marginRight:-4},[`& .${Zr.deleteIcon}`]:{fontSize:16,marginRight:4,marginLeft:-4}}},...Object.entries(r.palette).filter(es(["contrastText"])).map(([t])=>({props:{color:t},style:{backgroundColor:(r.vars||r).palette[t].main,color:(r.vars||r).palette[t].contrastText,[`& .${Zr.deleteIcon}`]:{color:r.vars?`rgba(${r.vars.palette[t].contrastTextChannel} / 0.7)`:Xr(r.palette[t].contrastText,.7),"&:hover, &:active":{color:(r.vars||r).palette[t].contrastText}}}})),{props:t=>t.iconColor===t.color,style:{[`& .${Zr.icon}`]:{color:r.vars?r.vars.palette.Chip.defaultIconColor:e}}},{props:t=>t.iconColor===t.color&&t.color!=="default",style:{[`& .${Zr.icon}`]:{color:"inherit"}}},{props:{onDelete:!0},style:{[`&.${Zr.focusVisible}`]:{backgroundColor:r.vars?`rgba(${r.vars.palette.action.selectedChannel} / calc(${r.vars.palette.action.selectedOpacity} + ${r.vars.palette.action.focusOpacity}))`:Xr(r.palette.action.selected,r.palette.action.selectedOpacity+r.palette.action.focusOpacity)}}},...Object.entries(r.palette).filter(es(["dark"])).map(([t])=>({props:{color:t,onDelete:!0},style:{[`&.${Zr.focusVisible}`]:{background:(r.vars||r).palette[t].dark}}})),{props:{clickable:!0},style:{userSelect:"none",WebkitTapHighlightColor:"transparent",cursor:"pointer","&:hover":{backgroundColor:r.vars?`rgba(${r.vars.palette.action.selectedChannel} / calc(${r.vars.palette.action.selectedOpacity} + ${r.vars.palette.action.hoverOpacity}))`:Xr(r.palette.action.selected,r.palette.action.selectedOpacity+r.palette.action.hoverOpacity)},[`&.${Zr.focusVisible}`]:{backgroundColor:r.vars?`rgba(${r.vars.palette.action.selectedChannel} / calc(${r.vars.palette.action.selectedOpacity} + ${r.vars.palette.action.focusOpacity}))`:Xr(r.palette.action.selected,r.palette.action.selectedOpacity+r.palette.action.focusOpacity)},"&:active":{boxShadow:(r.vars||r).shadows[1]}}},...Object.entries(r.palette).filter(es(["dark"])).map(([t])=>({props:{color:t,clickable:!0},style:{[`&:hover, &.${Zr.focusVisible}`]:{backgroundColor:(r.vars||r).palette[t].dark}}})),{props:{variant:"outlined"},style:{backgroundColor:"transparent",border:r.vars?`1px solid ${r.vars.palette.Chip.defaultBorder}`:`1px solid ${r.palette.mode==="light"?r.palette.grey[400]:r.palette.grey[700]}`,[`&.${Zr.clickable}:hover`]:{backgroundColor:(r.vars||r).palette.action.hover},[`&.${Zr.focusVisible}`]:{backgroundColor:(r.vars||r).palette.action.focus},[`& .${Zr.avatar}`]:{marginLeft:4},[`& .${Zr.avatarSmall}`]:{marginLeft:2},[`& .${Zr.icon}`]:{marginLeft:4},[`& .${Zr.iconSmall}`]:{marginLeft:2},[`& .${Zr.deleteIcon}`]:{marginRight:5},[`& .${Zr.deleteIconSmall}`]:{marginRight:3}}},...Object.entries(r.palette).filter(es()).map(([t])=>({props:{variant:"outlined",color:t},style:{color:(r.vars||r).palette[t].main,border:`1px solid ${r.vars?`rgba(${r.vars.palette[t].mainChannel} / 0.7)`:Xr(r.palette[t].main,.7)}`,[`&.${Zr.clickable}:hover`]:{backgroundColor:r.vars?`rgba(${r.vars.palette[t].mainChannel} / ${r.vars.palette.action.hoverOpacity})`:Xr(r.palette[t].main,r.palette.action.hoverOpacity)},[`&.${Zr.focusVisible}`]:{backgroundColor:r.vars?`rgba(${r.vars.palette[t].mainChannel} / ${r.vars.palette.action.focusOpacity})`:Xr(r.palette[t].main,r.palette.action.focusOpacity)},[`& .${Zr.deleteIcon}`]:{color:r.vars?`rgba(${r.vars.palette[t].mainChannel} / 0.7)`:Xr(r.palette[t].main,.7),"&:hover, &:active":{color:(r.vars||r).palette[t].main}}}}))]}})),dre=at("span",{name:"MuiChip",slot:"Label",overridesResolver:(r,e)=>{const{ownerState:t}=r,{size:n}=t;return[e.label,e[`label${ft(n)}`]]}})({overflow:"hidden",textOverflow:"ellipsis",paddingLeft:12,paddingRight:12,whiteSpace:"nowrap",variants:[{props:{variant:"outlined"},style:{paddingLeft:11,paddingRight:11}},{props:{size:"small"},style:{paddingLeft:8,paddingRight:8}},{props:{size:"small",variant:"outlined"},style:{paddingLeft:7,paddingRight:7}}]});function kL(r){return r.key==="Backspace"||r.key==="Delete"}const AL=M.forwardRef(function(e,t){const n=ir({props:e,name:"MuiChip"}),{avatar:i,className:s,clickable:a,color:o="default",component:l,deleteIcon:u,disabled:c=!1,icon:h,label:m,onClick:g,onDelete:y,onKeyDown:v,onKeyUp:x,size:w="medium",variant:E="filled",tabIndex:D,skipFocusWhenDisabled:I=!1,...A}=n,L=M.useRef(null),N=ci(L,t),U=ne=>{ne.stopPropagation(),y&&y(ne)},B=ne=>{ne.currentTarget===ne.target&&kL(ne)&&ne.preventDefault(),v&&v(ne)},k=ne=>{ne.currentTarget===ne.target&&y&&kL(ne)&&y(ne),x&&x(ne)},H=a!==!1&&g?!0:a,q=H||y?bc:l||"div",V={...n,component:q,disabled:c,size:w,color:o,iconColor:M.isValidElement(h)&&h.props.color||o,onDelete:!!y,clickable:H,variant:E},Q=ure(V),ie=q===bc?{component:l||"div",focusVisibleClassName:Q.focusVisible,...y&&{disableRipple:!0}}:{};let le=null;y&&(le=u&&M.isValidElement(u)?M.cloneElement(u,{className:It(u.props.className,Q.deleteIcon),onClick:U}):F.jsx(ore,{className:Q.deleteIcon,onClick:U}));let he=null;i&&M.isValidElement(i)&&(he=M.cloneElement(i,{className:It(Q.avatar,i.props.className)}));let ae=null;return h&&M.isValidElement(h)&&(ae=M.cloneElement(h,{className:It(Q.icon,h.props.className)})),F.jsxs(cre,{as:q,className:It(Q.root,s),disabled:H&&c?!0:void 0,onClick:g,onKeyDown:B,onKeyUp:k,ref:N,tabIndex:I&&c?-1:D,ownerState:V,...ie,...A,children:[he||ae,F.jsx(dre,{className:Q.label,ownerState:V,children:m}),le]})});function Kv(r){return parseInt(r,10)||0}const hre={shadow:{visibility:"hidden",position:"absolute",overflow:"hidden",height:0,top:0,left:0,transform:"translateZ(0)"}};function fre(r){for(const e in r)return!1;return!0}function DL(r){return fre(r)||r.outerHeightStyle===0&&!r.overflowing}const pre=M.forwardRef(function(e,t){const{onChange:n,maxRows:i,minRows:s=1,style:a,value:o,...l}=e,{current:u}=M.useRef(o!=null),c=M.useRef(null),h=ci(t,c),m=M.useRef(null),g=M.useRef(null),y=M.useCallback(()=>{const D=c.current,I=g.current;if(!D||!I)return;const L=fo(D).getComputedStyle(D);if(L.width==="0px")return{outerHeightStyle:0,overflowing:!1};I.style.width=L.width,I.value=D.value||e.placeholder||"x",I.value.slice(-1)===`
`&&(I.value+=" ");const N=L.boxSizing,U=Kv(L.paddingBottom)+Kv(L.paddingTop),B=Kv(L.borderBottomWidth)+Kv(L.borderTopWidth),k=I.scrollHeight;I.value="x";const H=I.scrollHeight;let q=k;s&&(q=Math.max(Number(s)*H,q)),i&&(q=Math.min(Number(i)*H,q)),q=Math.max(q,H);const V=q+(N==="border-box"?U+B:0),Q=Math.abs(q-k)<=1;return{outerHeightStyle:V,overflowing:Q}},[i,s,e.placeholder]),v=ho(()=>{const D=c.current,I=y();if(!D||!I||DL(I))return!1;const A=I.outerHeightStyle;return m.current!=null&&m.current!==A}),x=M.useCallback(()=>{const D=c.current,I=y();if(!D||!I||DL(I))return;const A=I.outerHeightStyle;m.current!==A&&(m.current=A,D.style.height=`${A}px`),D.style.overflow=I.overflowing?"hidden":""},[y]),w=M.useRef(-1);Su(()=>{const D=Dg(x),I=c?.current;if(!I)return;const A=fo(I);A.addEventListener("resize",D);let L;return typeof ResizeObserver<"u"&&(L=new ResizeObserver(()=>{v()&&(L.unobserve(I),cancelAnimationFrame(w.current),x(),w.current=requestAnimationFrame(()=>{L.observe(I)}))}),L.observe(I)),()=>{D.clear(),cancelAnimationFrame(w.current),A.removeEventListener("resize",D),L&&L.disconnect()}},[y,x,v]),Su(()=>{x()});const E=D=>{u||x();const I=D.target,A=I.value.length,L=I.value.endsWith(`
`),N=I.selectionStart===A;L&&N&&I.setSelectionRange(A,A),n&&n(D)};return F.jsxs(M.Fragment,{children:[F.jsx("textarea",{value:o,onChange:E,ref:h,rows:s,style:a,...l}),F.jsx("textarea",{"aria-hidden":!0,className:e.className,readOnly:!0,ref:g,tabIndex:-1,style:{...hre.shadow,...a,paddingTop:0,paddingBottom:0}})]})});function mre(r){return nr("MuiInputBase",r)}const Tp=Zt("MuiInputBase",["root","formControl","focused","disabled","adornedStart","adornedEnd","error","sizeSmall","multiline","colorSecondary","fullWidth","hiddenLabel","readOnly","input","inputSizeSmall","inputMultiline","inputTypeSearch","inputAdornedStart","inputAdornedEnd","inputHiddenLabel"]);var IL;const Ob=(r,e)=>{const{ownerState:t}=r;return[e.root,t.formControl&&e.formControl,t.startAdornment&&e.adornedStart,t.endAdornment&&e.adornedEnd,t.error&&e.error,t.size==="small"&&e.sizeSmall,t.multiline&&e.multiline,t.color&&e[`color${ft(t.color)}`],t.fullWidth&&e.fullWidth,t.hiddenLabel&&e.hiddenLabel]},Mb=(r,e)=>{const{ownerState:t}=r;return[e.input,t.size==="small"&&e.inputSizeSmall,t.multiline&&e.inputMultiline,t.type==="search"&&e.inputTypeSearch,t.startAdornment&&e.inputAdornedStart,t.endAdornment&&e.inputAdornedEnd,t.hiddenLabel&&e.inputHiddenLabel]},gre=r=>{const{classes:e,color:t,disabled:n,error:i,endAdornment:s,focused:a,formControl:o,fullWidth:l,hiddenLabel:u,multiline:c,readOnly:h,size:m,startAdornment:g,type:y}=r,v={root:["root",`color${ft(t)}`,n&&"disabled",i&&"error",l&&"fullWidth",a&&"focused",o&&"formControl",m&&m!=="medium"&&`size${ft(m)}`,c&&"multiline",g&&"adornedStart",s&&"adornedEnd",u&&"hiddenLabel",h&&"readOnly"],input:["input",n&&"disabled",y==="search"&&"inputTypeSearch",c&&"inputMultiline",m==="small"&&"inputSizeSmall",u&&"inputHiddenLabel",g&&"inputAdornedStart",s&&"inputAdornedEnd",h&&"readOnly"]};return rr(v,mre,e)},Fb=at("div",{name:"MuiInputBase",slot:"Root",overridesResolver:Ob})(hr(({theme:r})=>({...r.typography.body1,color:(r.vars||r).palette.text.primary,lineHeight:"1.4375em",boxSizing:"border-box",position:"relative",cursor:"text",display:"inline-flex",alignItems:"center",[`&.${Tp.disabled}`]:{color:(r.vars||r).palette.text.disabled,cursor:"default"},variants:[{props:({ownerState:e})=>e.multiline,style:{padding:"4px 0 5px"}},{props:({ownerState:e,size:t})=>e.multiline&&t==="small",style:{paddingTop:1}},{props:({ownerState:e})=>e.fullWidth,style:{width:"100%"}}]}))),Bb=at("input",{name:"MuiInputBase",slot:"Input",overridesResolver:Mb})(hr(({theme:r})=>{const e=r.palette.mode==="light",t={color:"currentColor",...r.vars?{opacity:r.vars.opacity.inputPlaceholder}:{opacity:e?.42:.5},transition:r.transitions.create("opacity",{duration:r.transitions.duration.shorter})},n={opacity:"0 !important"},i=r.vars?{opacity:r.vars.opacity.inputPlaceholder}:{opacity:e?.42:.5};return{font:"inherit",letterSpacing:"inherit",color:"currentColor",padding:"4px 0 5px",border:0,boxSizing:"content-box",background:"none",height:"1.4375em",margin:0,WebkitTapHighlightColor:"transparent",display:"block",minWidth:0,width:"100%","&::-webkit-input-placeholder":t,"&::-moz-placeholder":t,"&::-ms-input-placeholder":t,"&:focus":{outline:0},"&:invalid":{boxShadow:"none"},"&::-webkit-search-decoration":{WebkitAppearance:"none"},[`label[data-shrink=false] + .${Tp.formControl} &`]:{"&::-webkit-input-placeholder":n,"&::-moz-placeholder":n,"&::-ms-input-placeholder":n,"&:focus::-webkit-input-placeholder":i,"&:focus::-moz-placeholder":i,"&:focus::-ms-input-placeholder":i},[`&.${Tp.disabled}`]:{opacity:1,WebkitTextFillColor:(r.vars||r).palette.text.disabled},variants:[{props:({ownerState:s})=>!s.disableInjectingGlobalStyles,style:{animationName:"mui-auto-fill-cancel",animationDuration:"10ms","&:-webkit-autofill":{animationDuration:"5000s",animationName:"mui-auto-fill"}}},{props:{size:"small"},style:{paddingTop:1}},{props:({ownerState:s})=>s.multiline,style:{height:"auto",resize:"none",padding:0,paddingTop:0}},{props:{type:"search"},style:{MozAppearance:"textfield"}}]}})),PL=T2({"@keyframes mui-auto-fill":{from:{display:"block"}},"@keyframes mui-auto-fill-cancel":{from:{display:"block"}}}),R2=M.forwardRef(function(e,t){const n=ir({props:e,name:"MuiInputBase"}),{"aria-describedby":i,autoComplete:s,autoFocus:a,className:o,color:l,components:u={},componentsProps:c={},defaultValue:h,disabled:m,disableInjectingGlobalStyles:g,endAdornment:y,error:v,fullWidth:x=!1,id:w,inputComponent:E="input",inputProps:D={},inputRef:I,margin:A,maxRows:L,minRows:N,multiline:U=!1,name:B,onBlur:k,onChange:H,onClick:q,onFocus:V,onKeyDown:Q,onKeyUp:ie,placeholder:le,readOnly:he,renderSuffix:ae,rows:ne,size:ue,slotProps:ee={},slots:pe={},startAdornment:me,type:xe="text",value:Be,...Oe}=n,dt=D.value!=null?D.value:Be,{current:Ke}=M.useRef(dt!=null),_t=M.useRef(),Ze=M.useCallback(Tt=>{},[]),Ot=ci(_t,I,D.ref,Ze),[Nt,qe]=M.useState(!1),Ue=Il(),Pe=Nd({props:n,muiFormControl:Ue,states:["color","disabled","error","hiddenLabel","size","required","filled"]});Pe.focused=Ue?Ue.focused:Nt,M.useEffect(()=>{!Ue&&m&&Nt&&(qe(!1),k&&k())},[Ue,m,Nt,k]);const $e=Ue&&Ue.onFilled,rt=Ue&&Ue.onEmpty,lt=M.useCallback(Tt=>{J_(Tt)?$e&&$e():rt&&rt()},[$e,rt]);Su(()=>{Ke&&lt({value:dt})},[dt,lt,Ke]);const ht=Tt=>{V&&V(Tt),D.onFocus&&D.onFocus(Tt),Ue&&Ue.onFocus?Ue.onFocus(Tt):qe(!0)},ut=Tt=>{k&&k(Tt),D.onBlur&&D.onBlur(Tt),Ue&&Ue.onBlur?Ue.onBlur(Tt):qe(!1)},St=(Tt,...Ht)=>{if(!Ke){const An=Tt.target||_t.current;if(An==null)throw new Error(qh(1));lt({value:An.value})}D.onChange&&D.onChange(Tt,...Ht),H&&H(Tt,...Ht)};M.useEffect(()=>{lt(_t.current)},[]);const ot=Tt=>{_t.current&&Tt.currentTarget===Tt.target&&_t.current.focus(),q&&q(Tt)};let yr=E,pr=D;U&&yr==="input"&&(ne?pr={type:void 0,minRows:ne,maxRows:ne,...pr}:pr={type:void 0,maxRows:L,minRows:N,...pr},yr=pre);const jr=Tt=>{lt(Tt.animationName==="mui-auto-fill-cancel"?_t.current:{value:"x"})};M.useEffect(()=>{Ue&&Ue.setAdornedStart(!!me)},[Ue,me]);const ur={...n,color:Pe.color||"primary",disabled:Pe.disabled,endAdornment:y,error:Pe.error,focused:Pe.focused,formControl:Ue,fullWidth:x,hiddenLabel:Pe.hiddenLabel,multiline:U,size:Pe.size,startAdornment:me,type:xe},Wt=gre(ur),mr=pe.root||u.Root||Fb,Tr=ee.root||c.root||{},Nr=pe.input||u.Input||Bb;return pr={...pr,...ee.input??c.input},F.jsxs(M.Fragment,{children:[!g&&typeof PL=="function"&&(IL||(IL=F.jsx(PL,{}))),F.jsxs(mr,{...Tr,ref:t,onClick:ot,...Oe,...!Q0(mr)&&{ownerState:{...ur,...Tr.ownerState}},className:It(Wt.root,Tr.className,o,he&&"MuiInputBase-readOnly"),children:[me,F.jsx(Rb.Provider,{value:null,children:F.jsx(Nr,{"aria-invalid":Pe.error,"aria-describedby":i,autoComplete:s,autoFocus:a,defaultValue:h,disabled:Pe.disabled,id:w,onAnimationStart:jr,name:B,placeholder:le,readOnly:he,required:Pe.required,rows:ne,value:dt,onKeyDown:Q,onKeyUp:ie,type:xe,...pr,...!Q0(Nr)&&{as:yr,ownerState:{...ur,...pr.ownerState}},ref:Ot,className:It(Wt.input,pr.className,he&&"MuiInputBase-readOnly"),onBlur:ut,onChange:St,onFocus:ht})}),y,ae?ae({...Pe,startAdornment:me}):null]})]})});function vre(r){return nr("MuiInput",r)}const qm={...Tp,...Zt("MuiInput",["root","underline","input"])};function yre(r){return nr("MuiOutlinedInput",r)}const Zl={...Tp,...Zt("MuiOutlinedInput",["root","notchedOutline","input"])};function _re(r){return nr("MuiFilledInput",r)}const uh={...Tp,...Zt("MuiFilledInput",["root","underline","input","adornedStart","adornedEnd","sizeSmall","multiline","hiddenLabel"])},xre=Ir(F.jsx("path",{d:"M7 10l5 5 5-5z"})),bre=Ir(F.jsx("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"}));function Sre(r){return nr("MuiAvatar",r)}Zt("MuiAvatar",["root","colorDefault","circular","rounded","square","img","fallback"]);const Tre=r=>{const{classes:e,variant:t,colorDefault:n}=r;return rr({root:["root",t,n&&"colorDefault"],img:["img"],fallback:["fallback"]},Sre,e)},Cre=at("div",{name:"MuiAvatar",slot:"Root",overridesResolver:(r,e)=>{const{ownerState:t}=r;return[e.root,e[t.variant],t.colorDefault&&e.colorDefault]}})(hr(({theme:r})=>({position:"relative",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,width:40,height:40,fontFamily:r.typography.fontFamily,fontSize:r.typography.pxToRem(20),lineHeight:1,borderRadius:"50%",overflow:"hidden",userSelect:"none",variants:[{props:{variant:"rounded"},style:{borderRadius:(r.vars||r).shape.borderRadius}},{props:{variant:"square"},style:{borderRadius:0}},{props:{colorDefault:!0},style:{color:(r.vars||r).palette.background.default,...r.vars?{backgroundColor:r.vars.palette.Avatar.defaultBg}:{backgroundColor:r.palette.grey[400],...r.applyStyles("dark",{backgroundColor:r.palette.grey[600]})}}}]}))),wre=at("img",{name:"MuiAvatar",slot:"Img"})({width:"100%",height:"100%",textAlign:"center",objectFit:"cover",color:"transparent",textIndent:1e4}),Ere=at(bre,{name:"MuiAvatar",slot:"Fallback"})({width:"75%",height:"75%"});function kre({crossOrigin:r,referrerPolicy:e,src:t,srcSet:n}){const[i,s]=M.useState(!1);return M.useEffect(()=>{if(!t&&!n)return;s(!1);let a=!0;const o=new Image;return o.onload=()=>{a&&s("loaded")},o.onerror=()=>{a&&s("error")},o.crossOrigin=r,o.referrerPolicy=e,o.src=t,n&&(o.srcset=n),()=>{a=!1}},[r,e,t,n]),i}const h1=M.forwardRef(function(e,t){const n=ir({props:e,name:"MuiAvatar"}),{alt:i,children:s,className:a,component:o="div",slots:l={},slotProps:u={},imgProps:c,sizes:h,src:m,srcSet:g,variant:y="circular",...v}=n;let x=null;const w={...n,component:o,variant:y},E=kre({...c,...typeof u.img=="function"?u.img(w):u.img,src:m,srcSet:g}),D=m||g,I=D&&E!=="error";w.colorDefault=!I,delete w.ownerState;const A=Tre(w),[L,N]=Sr("root",{ref:t,className:It(A.root,a),elementType:Cre,externalForwardedProps:{slots:l,slotProps:u,component:o,...v},ownerState:w}),[U,B]=Sr("img",{className:A.img,elementType:wre,externalForwardedProps:{slots:l,slotProps:{img:{...c,...u.img}}},additionalProps:{alt:i,src:m,srcSet:g,sizes:h},ownerState:w}),[k,H]=Sr("fallback",{className:A.fallback,elementType:Ere,externalForwardedProps:{slots:l,slotProps:u},shouldForwardComponentProp:!0,ownerState:w});return I?x=F.jsx(U,{...B}):s||s===0?x=s:D&&i?x=i[0]:x=F.jsx(k,{...H}),F.jsx(L,{...N,children:x})});function Are(r){return nr("MuiCard",r)}Zt("MuiCard",["root"]);const Dre=r=>{const{classes:e}=r;return rr({root:["root"]},Are,e)},Ire=at(kc,{name:"MuiCard",slot:"Root"})({overflow:"hidden"}),j8=M.forwardRef(function(e,t){const n=ir({props:e,name:"MuiCard"}),{className:i,raised:s=!1,...a}=n,o={...n,raised:s},l=Dre(o);return F.jsx(Ire,{className:It(l.root,i),elevation:s?8:void 0,ref:t,ownerState:o,...a})});function Pre(r){return nr("MuiCardContent",r)}Zt("MuiCardContent",["root"]);const Rre=r=>{const{classes:e}=r;return rr({root:["root"]},Pre,e)},Lre=at("div",{name:"MuiCardContent",slot:"Root"})({padding:16,"&:last-child":{paddingBottom:24}}),z8=M.forwardRef(function(e,t){const n=ir({props:e,name:"MuiCardContent"}),{className:i,component:s="div",...a}=n,o={...n,component:s},l=Rre(o);return F.jsx(Lre,{as:s,className:It(l.root,i),ownerState:o,ref:t,...a})}),Ore=Ir(F.jsx("path",{d:"M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"})),Mre=Ir(F.jsx("path",{d:"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm-9 14l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"})),Fre=Ir(F.jsx("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-2 10H7v-2h10v2z"}));function Bre(r){return nr("MuiCheckbox",r)}const f1=Zt("MuiCheckbox",["root","checked","disabled","indeterminate","colorPrimary","colorSecondary","sizeSmall","sizeMedium"]),Nre=r=>{const{classes:e,indeterminate:t,color:n,size:i}=r,s={root:["root",t&&"indeterminate",`color${ft(n)}`,`size${ft(i)}`]},a=rr(s,Bre,e);return{...e,...a}},Ure=at(I2,{shouldForwardProp:r=>is(r)||r==="classes",name:"MuiCheckbox",slot:"Root",overridesResolver:(r,e)=>{const{ownerState:t}=r;return[e.root,t.indeterminate&&e.indeterminate,e[`size${ft(t.size)}`],t.color!=="default"&&e[`color${ft(t.color)}`]]}})(hr(({theme:r})=>({color:(r.vars||r).palette.text.secondary,variants:[{props:{color:"default",disableRipple:!1},style:{"&:hover":{backgroundColor:r.vars?`rgba(${r.vars.palette.action.activeChannel} / ${r.vars.palette.action.hoverOpacity})`:Xr(r.palette.action.active,r.palette.action.hoverOpacity)}}},...Object.entries(r.palette).filter(es()).map(([e])=>({props:{color:e,disableRipple:!1},style:{"&:hover":{backgroundColor:r.vars?`rgba(${r.vars.palette[e].mainChannel} / ${r.vars.palette.action.hoverOpacity})`:Xr(r.palette[e].main,r.palette.action.hoverOpacity)}}})),...Object.entries(r.palette).filter(es()).map(([e])=>({props:{color:e},style:{[`&.${f1.checked}, &.${f1.indeterminate}`]:{color:(r.vars||r).palette[e].main},[`&.${f1.disabled}`]:{color:(r.vars||r).palette.action.disabled}}})),{props:{disableRipple:!1},style:{"&:hover":{"@media (hover: none)":{backgroundColor:"transparent"}}}}]}))),$re=F.jsx(Mre,{}),jre=F.jsx(Ore,{}),zre=F.jsx(Fre,{}),sp=M.forwardRef(function(e,t){const n=ir({props:e,name:"MuiCheckbox"}),{checkedIcon:i=$re,color:s="primary",icon:a=jre,indeterminate:o=!1,indeterminateIcon:l=zre,inputProps:u,size:c="medium",disableRipple:h=!1,className:m,slots:g={},slotProps:y={},...v}=n,x=o?l:a,w=o?l:i,E={...n,disableRipple:h,color:s,indeterminate:o,size:c},D=Nre(E),I=y.input??u,[A,L]=Sr("root",{ref:t,elementType:Ure,className:It(D.root,m),shouldForwardComponentProp:!0,externalForwardedProps:{slots:g,slotProps:y,...v},ownerState:E,additionalProps:{type:"checkbox",icon:M.cloneElement(x,{fontSize:x.props.fontSize??c}),checkedIcon:M.cloneElement(w,{fontSize:w.props.fontSize??c}),disableRipple:h,slots:g,slotProps:{input:A2(typeof I=="function"?I(E):I,{"data-indeterminate":o})}}});return F.jsx(A,{...L,classes:D})});function Hre(r){return nr("MuiDialogActions",r)}Zt("MuiDialogActions",["root","spacing"]);const Vre=r=>{const{classes:e,disableSpacing:t}=r;return rr({root:["root",!t&&"spacing"]},Hre,e)},Wre=at("div",{name:"MuiDialogActions",slot:"Root",overridesResolver:(r,e)=>{const{ownerState:t}=r;return[e.root,!t.disableSpacing&&e.spacing]}})({display:"flex",alignItems:"center",padding:8,justifyContent:"flex-end",flex:"0 0 auto",variants:[{props:({ownerState:r})=>!r.disableSpacing,style:{"& > :not(style) ~ :not(style)":{marginLeft:8}}}]}),qre=M.forwardRef(function(e,t){const n=ir({props:e,name:"MuiDialogActions"}),{className:i,disableSpacing:s=!1,...a}=n,o={...n,disableSpacing:s},l=Vre(o);return F.jsx(Wre,{className:It(l.root,i),ownerState:o,ref:t,...a})});function Gre(r){return nr("MuiDialogContent",r)}Zt("MuiDialogContent",["root","dividers"]);const Kre=r=>{const{classes:e,dividers:t}=r;return rr({root:["root",t&&"dividers"]},Gre,e)},Xre=at("div",{name:"MuiDialogContent",slot:"Root",overridesResolver:(r,e)=>{const{ownerState:t}=r;return[e.root,t.dividers&&e.dividers]}})(hr(({theme:r})=>({flex:"1 1 auto",WebkitOverflowScrolling:"touch",overflowY:"auto",padding:"20px 24px",variants:[{props:({ownerState:e})=>e.dividers,style:{padding:"16px 24px",borderTop:`1px solid ${(r.vars||r).palette.divider}`,borderBottom:`1px solid ${(r.vars||r).palette.divider}`}},{props:({ownerState:e})=>!e.dividers,style:{[`.${IQ.root} + &`]:{paddingTop:0}}}]}))),H8=M.forwardRef(function(e,t){const n=ir({props:e,name:"MuiDialogContent"}),{className:i,dividers:s=!1,...a}=n,o={...n,dividers:s},l=Kre(o);return F.jsx(Xre,{className:It(l.root,i),ownerState:o,ref:t,...a})}),Yre=r=>{const{classes:e,disableUnderline:t,startAdornment:n,endAdornment:i,size:s,hiddenLabel:a,multiline:o}=r,l={root:["root",!t&&"underline",n&&"adornedStart",i&&"adornedEnd",s==="small"&&`size${ft(s)}`,a&&"hiddenLabel",o&&"multiline"],input:["input"]},u=rr(l,_re,e);return{...e,...u}},Qre=at(Fb,{shouldForwardProp:r=>is(r)||r==="classes",name:"MuiFilledInput",slot:"Root",overridesResolver:(r,e)=>{const{ownerState:t}=r;return[...Ob(r,e),!t.disableUnderline&&e.underline]}})(hr(({theme:r})=>{const e=r.palette.mode==="light",t=e?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)",n=e?"rgba(0, 0, 0, 0.06)":"rgba(255, 255, 255, 0.09)",i=e?"rgba(0, 0, 0, 0.09)":"rgba(255, 255, 255, 0.13)",s=e?"rgba(0, 0, 0, 0.12)":"rgba(255, 255, 255, 0.12)";return{position:"relative",backgroundColor:r.vars?r.vars.palette.FilledInput.bg:n,borderTopLeftRadius:(r.vars||r).shape.borderRadius,borderTopRightRadius:(r.vars||r).shape.borderRadius,transition:r.transitions.create("background-color",{duration:r.transitions.duration.shorter,easing:r.transitions.easing.easeOut}),"&:hover":{backgroundColor:r.vars?r.vars.palette.FilledInput.hoverBg:i,"@media (hover: none)":{backgroundColor:r.vars?r.vars.palette.FilledInput.bg:n}},[`&.${uh.focused}`]:{backgroundColor:r.vars?r.vars.palette.FilledInput.bg:n},[`&.${uh.disabled}`]:{backgroundColor:r.vars?r.vars.palette.FilledInput.disabledBg:s},variants:[{props:({ownerState:a})=>!a.disableUnderline,style:{"&::after":{left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:r.transitions.create("transform",{duration:r.transitions.duration.shorter,easing:r.transitions.easing.easeOut}),pointerEvents:"none"},[`&.${uh.focused}:after`]:{transform:"scaleX(1) translateX(0)"},[`&.${uh.error}`]:{"&::before, &::after":{borderBottomColor:(r.vars||r).palette.error.main}},"&::before":{borderBottom:`1px solid ${r.vars?`rgba(${r.vars.palette.common.onBackgroundChannel} / ${r.vars.opacity.inputUnderline})`:t}`,left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:r.transitions.create("border-bottom-color",{duration:r.transitions.duration.shorter}),pointerEvents:"none"},[`&:hover:not(.${uh.disabled}, .${uh.error}):before`]:{borderBottom:`1px solid ${(r.vars||r).palette.text.primary}`},[`&.${uh.disabled}:before`]:{borderBottomStyle:"dotted"}}},...Object.entries(r.palette).filter(es()).map(([a])=>({props:{disableUnderline:!1,color:a},style:{"&::after":{borderBottom:`2px solid ${(r.vars||r).palette[a]?.main}`}}})),{props:({ownerState:a})=>a.startAdornment,style:{paddingLeft:12}},{props:({ownerState:a})=>a.endAdornment,style:{paddingRight:12}},{props:({ownerState:a})=>a.multiline,style:{padding:"25px 12px 8px"}},{props:({ownerState:a,size:o})=>a.multiline&&o==="small",style:{paddingTop:21,paddingBottom:4}},{props:({ownerState:a})=>a.multiline&&a.hiddenLabel,style:{paddingTop:16,paddingBottom:17}},{props:({ownerState:a})=>a.multiline&&a.hiddenLabel&&a.size==="small",style:{paddingTop:8,paddingBottom:9}}]}})),Jre=at(Bb,{name:"MuiFilledInput",slot:"Input",overridesResolver:Mb})(hr(({theme:r})=>({paddingTop:25,paddingRight:12,paddingBottom:8,paddingLeft:12,...!r.vars&&{"&:-webkit-autofill":{WebkitBoxShadow:r.palette.mode==="light"?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:r.palette.mode==="light"?null:"#fff",caretColor:r.palette.mode==="light"?null:"#fff",borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"}},...r.vars&&{"&:-webkit-autofill":{borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"},[r.getColorSchemeSelector("dark")]:{"&:-webkit-autofill":{WebkitBoxShadow:"0 0 0 100px #266798 inset",WebkitTextFillColor:"#fff",caretColor:"#fff"}}},variants:[{props:{size:"small"},style:{paddingTop:21,paddingBottom:4}},{props:({ownerState:e})=>e.hiddenLabel,style:{paddingTop:16,paddingBottom:17}},{props:({ownerState:e})=>e.startAdornment,style:{paddingLeft:0}},{props:({ownerState:e})=>e.endAdornment,style:{paddingRight:0}},{props:({ownerState:e})=>e.hiddenLabel&&e.size==="small",style:{paddingTop:8,paddingBottom:9}},{props:({ownerState:e})=>e.multiline,style:{paddingTop:0,paddingBottom:0,paddingLeft:0,paddingRight:0}}]}))),L2=M.forwardRef(function(e,t){const n=ir({props:e,name:"MuiFilledInput"}),{disableUnderline:i=!1,components:s={},componentsProps:a,fullWidth:o=!1,hiddenLabel:l,inputComponent:u="input",multiline:c=!1,slotProps:h,slots:m={},type:g="text",...y}=n,v={...n,disableUnderline:i,fullWidth:o,inputComponent:u,multiline:c,type:g},x=Yre(n),w={root:{ownerState:v},input:{ownerState:v}},E=h??a?xu(w,h??a):w,D=m.root??s.Root??Qre,I=m.input??s.Input??Jre;return F.jsx(R2,{slots:{root:D,input:I},slotProps:E,fullWidth:o,inputComponent:u,multiline:c,ref:t,type:g,...y,classes:x})});L2.muiName="Input";function Zre(r){return nr("MuiFormHelperText",r)}const RL=Zt("MuiFormHelperText",["root","error","disabled","sizeSmall","sizeMedium","contained","focused","filled","required"]);var LL;const ene=r=>{const{classes:e,contained:t,size:n,disabled:i,error:s,filled:a,focused:o,required:l}=r,u={root:["root",i&&"disabled",s&&"error",n&&`size${ft(n)}`,t&&"contained",o&&"focused",a&&"filled",l&&"required"]};return rr(u,Zre,e)},tne=at("p",{name:"MuiFormHelperText",slot:"Root",overridesResolver:(r,e)=>{const{ownerState:t}=r;return[e.root,t.size&&e[`size${ft(t.size)}`],t.contained&&e.contained,t.filled&&e.filled]}})(hr(({theme:r})=>({color:(r.vars||r).palette.text.secondary,...r.typography.caption,textAlign:"left",marginTop:3,marginRight:0,marginBottom:0,marginLeft:0,[`&.${RL.disabled}`]:{color:(r.vars||r).palette.text.disabled},[`&.${RL.error}`]:{color:(r.vars||r).palette.error.main},variants:[{props:{size:"small"},style:{marginTop:4}},{props:({ownerState:e})=>e.contained,style:{marginLeft:14,marginRight:14}}]}))),rne=M.forwardRef(function(e,t){const n=ir({props:e,name:"MuiFormHelperText"}),{children:i,className:s,component:a="p",disabled:o,error:l,filled:u,focused:c,margin:h,required:m,variant:g,...y}=n,v=Il(),x=Nd({props:n,muiFormControl:v,states:["variant","size","disabled","error","filled","focused","required"]}),w={...n,component:a,contained:x.variant==="filled"||x.variant==="outlined",variant:x.variant,size:x.size,disabled:x.disabled,error:x.error,filled:x.filled,focused:x.focused,required:x.required};delete w.ownerState;const E=ene(w);return F.jsx(tne,{as:a,className:It(E.root,s),ref:t,...y,ownerState:w,children:i===" "?LL||(LL=F.jsx("span",{className:"notranslate","aria-hidden":!0,children:""})):i})}),nne=r=>{const{classes:e,disableUnderline:t}=r,i=rr({root:["root",!t&&"underline"],input:["input"]},vre,e);return{...e,...i}},ine=at(Fb,{shouldForwardProp:r=>is(r)||r==="classes",name:"MuiInput",slot:"Root",overridesResolver:(r,e)=>{const{ownerState:t}=r;return[...Ob(r,e),!t.disableUnderline&&e.underline]}})(hr(({theme:r})=>{let t=r.palette.mode==="light"?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)";return r.vars&&(t=`rgba(${r.vars.palette.common.onBackgroundChannel} / ${r.vars.opacity.inputUnderline})`),{position:"relative",variants:[{props:({ownerState:n})=>n.formControl,style:{"label + &":{marginTop:16}}},{props:({ownerState:n})=>!n.disableUnderline,style:{"&::after":{left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:r.transitions.create("transform",{duration:r.transitions.duration.shorter,easing:r.transitions.easing.easeOut}),pointerEvents:"none"},[`&.${qm.focused}:after`]:{transform:"scaleX(1) translateX(0)"},[`&.${qm.error}`]:{"&::before, &::after":{borderBottomColor:(r.vars||r).palette.error.main}},"&::before":{borderBottom:`1px solid ${t}`,left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:r.transitions.create("border-bottom-color",{duration:r.transitions.duration.shorter}),pointerEvents:"none"},[`&:hover:not(.${qm.disabled}, .${qm.error}):before`]:{borderBottom:`2px solid ${(r.vars||r).palette.text.primary}`,"@media (hover: none)":{borderBottom:`1px solid ${t}`}},[`&.${qm.disabled}:before`]:{borderBottomStyle:"dotted"}}},...Object.entries(r.palette).filter(es()).map(([n])=>({props:{color:n,disableUnderline:!1},style:{"&::after":{borderBottom:`2px solid ${(r.vars||r).palette[n].main}`}}}))]}})),sne=at(Bb,{name:"MuiInput",slot:"Input",overridesResolver:Mb})({}),O2=M.forwardRef(function(e,t){const n=ir({props:e,name:"MuiInput"}),{disableUnderline:i=!1,components:s={},componentsProps:a,fullWidth:o=!1,inputComponent:l="input",multiline:u=!1,slotProps:c,slots:h={},type:m="text",...g}=n,y=nne(n),x={root:{ownerState:{disableUnderline:i}}},w=c??a?xu(c??a,x):x,E=h.root??s.Root??ine,D=h.input??s.Input??sne;return F.jsx(R2,{slots:{root:E,input:D},slotProps:w,fullWidth:o,inputComponent:l,multiline:u,ref:t,type:m,...g,classes:y})});O2.muiName="Input";function ane(r){return nr("MuiInputAdornment",r)}const OL=Zt("MuiInputAdornment",["root","filled","standard","outlined","positionStart","positionEnd","disablePointerEvents","hiddenLabel","sizeSmall"]);var ML;const one=(r,e)=>{const{ownerState:t}=r;return[e.root,e[`position${ft(t.position)}`],t.disablePointerEvents===!0&&e.disablePointerEvents,e[t.variant]]},lne=r=>{const{classes:e,disablePointerEvents:t,hiddenLabel:n,position:i,size:s,variant:a}=r,o={root:["root",t&&"disablePointerEvents",i&&`position${ft(i)}`,a,n&&"hiddenLabel",s&&`size${ft(s)}`]};return rr(o,ane,e)},une=at("div",{name:"MuiInputAdornment",slot:"Root",overridesResolver:one})(hr(({theme:r})=>({display:"flex",maxHeight:"2em",alignItems:"center",whiteSpace:"nowrap",color:(r.vars||r).palette.action.active,variants:[{props:{variant:"filled"},style:{[`&.${OL.positionStart}&:not(.${OL.hiddenLabel})`]:{marginTop:16}}},{props:{position:"start"},style:{marginRight:8}},{props:{position:"end"},style:{marginLeft:8}},{props:{disablePointerEvents:!0},style:{pointerEvents:"none"}}]}))),FL=M.forwardRef(function(e,t){const n=ir({props:e,name:"MuiInputAdornment"}),{children:i,className:s,component:a="div",disablePointerEvents:o=!1,disableTypography:l=!1,position:u,variant:c,...h}=n,m=Il()||{};let g=c;c&&m.variant,m&&!g&&(g=m.variant);const y={...n,hiddenLabel:m.hiddenLabel,size:m.size,disablePointerEvents:o,position:u,variant:g},v=lne(y);return F.jsx(Rb.Provider,{value:null,children:F.jsx(une,{as:a,ownerState:y,className:It(v.root,s),ref:t,...h,children:typeof i=="string"&&!l?F.jsx(bn,{color:"textSecondary",children:i}):F.jsxs(M.Fragment,{children:[u==="start"?ML||(ML=F.jsx("span",{className:"notranslate","aria-hidden":!0,children:""})):null,i]})})})});function cne(r){return nr("MuiInputLabel",r)}Zt("MuiInputLabel",["root","focused","disabled","error","required","asterisk","formControl","sizeSmall","shrink","animated","standard","filled","outlined"]);const dne=r=>{const{classes:e,formControl:t,size:n,shrink:i,disableAnimation:s,variant:a,required:o}=r,l={root:["root",t&&"formControl",!s&&"animated",i&&"shrink",n&&n!=="medium"&&`size${ft(n)}`,a],asterisk:[o&&"asterisk"]},u=rr(l,cne,e);return{...e,...u}},hne=at(O8,{shouldForwardProp:r=>is(r)||r==="classes",name:"MuiInputLabel",slot:"Root",overridesResolver:(r,e)=>{const{ownerState:t}=r;return[{[`& .${C0.asterisk}`]:e.asterisk},e.root,t.formControl&&e.formControl,t.size==="small"&&e.sizeSmall,t.shrink&&e.shrink,!t.disableAnimation&&e.animated,t.focused&&e.focused,e[t.variant]]}})(hr(({theme:r})=>({display:"block",transformOrigin:"top left",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:"100%",variants:[{props:({ownerState:e})=>e.formControl,style:{position:"absolute",left:0,top:0,transform:"translate(0, 20px) scale(1)"}},{props:{size:"small"},style:{transform:"translate(0, 17px) scale(1)"}},{props:({ownerState:e})=>e.shrink,style:{transform:"translate(0, -1.5px) scale(0.75)",transformOrigin:"top left",maxWidth:"133%"}},{props:({ownerState:e})=>!e.disableAnimation,style:{transition:r.transitions.create(["color","transform","max-width"],{duration:r.transitions.duration.shorter,easing:r.transitions.easing.easeOut})}},{props:{variant:"filled"},style:{zIndex:1,pointerEvents:"none",transform:"translate(12px, 16px) scale(1)",maxWidth:"calc(100% - 24px)"}},{props:{variant:"filled",size:"small"},style:{transform:"translate(12px, 13px) scale(1)"}},{props:({variant:e,ownerState:t})=>e==="filled"&&t.shrink,style:{userSelect:"none",pointerEvents:"auto",transform:"translate(12px, 7px) scale(0.75)",maxWidth:"calc(133% - 24px)"}},{props:({variant:e,ownerState:t,size:n})=>e==="filled"&&t.shrink&&n==="small",style:{transform:"translate(12px, 4px) scale(0.75)"}},{props:{variant:"outlined"},style:{zIndex:1,pointerEvents:"none",transform:"translate(14px, 16px) scale(1)",maxWidth:"calc(100% - 24px)"}},{props:{variant:"outlined",size:"small"},style:{transform:"translate(14px, 9px) scale(1)"}},{props:({variant:e,ownerState:t})=>e==="outlined"&&t.shrink,style:{userSelect:"none",pointerEvents:"auto",maxWidth:"calc(133% - 32px)",transform:"translate(14px, -9px) scale(0.75)"}}]}))),Cu=M.forwardRef(function(e,t){const n=ir({name:"MuiInputLabel",props:e}),{disableAnimation:i=!1,margin:s,shrink:a,variant:o,className:l,...u}=n,c=Il();let h=a;typeof h>"u"&&c&&(h=c.filled||c.focused||c.adornedStart);const m=Nd({props:n,muiFormControl:c,states:["size","variant","required","focused"]}),g={...n,disableAnimation:i,formControl:c,shrink:h,size:m.size,variant:m.variant,required:m.required,focused:m.focused},y=dne(g);return F.jsx(hne,{"data-shrink":h,ref:t,className:It(y.root,l),...u,ownerState:g,classes:y})});function p1(r,e,t){return r===e?r.firstChild:e&&e.nextElementSibling?e.nextElementSibling:t?null:r.firstChild}function BL(r,e,t){return r===e?t?r.firstChild:r.lastChild:e&&e.previousElementSibling?e.previousElementSibling:t?null:r.lastChild}function V8(r,e){if(e===void 0)return!0;let t=r.innerText;return t===void 0&&(t=r.textContent),t=t.trim().toLowerCase(),t.length===0?!1:e.repeating?t[0]===e.keys[0]:t.startsWith(e.keys.join(""))}function Gm(r,e,t,n,i,s){let a=!1,o=i(r,e,e?t:!1);for(;o;){if(o===r.firstChild){if(a)return!1;a=!0}const l=n?!1:o.disabled||o.getAttribute("aria-disabled")==="true";if(!o.hasAttribute("tabindex")||!V8(o,s)||l)o=i(r,o,t);else return o.focus(),!0}return!1}const fne=M.forwardRef(function(e,t){const{actions:n,autoFocus:i=!1,autoFocusItem:s=!1,children:a,className:o,disabledItemsFocusable:l=!1,disableListWrap:u=!1,onKeyDown:c,variant:h="selectedMenu",...m}=e,g=M.useRef(null),y=M.useRef({keys:[],repeating:!0,previousKeyMatched:!0,lastTime:null});Su(()=>{i&&g.current.focus()},[i]),M.useImperativeHandle(n,()=>({adjustStyleForScrollbar:(D,{direction:I})=>{const A=!g.current.style.width;if(D.clientHeight<g.current.clientHeight&&A){const L=`${d8(fo(D))}px`;g.current.style[I==="rtl"?"paddingLeft":"paddingRight"]=L,g.current.style.width=`calc(100% + ${L})`}return g.current}}),[]);const v=D=>{const I=g.current,A=D.key;if(D.ctrlKey||D.metaKey||D.altKey){c&&c(D);return}const N=aa(I).activeElement;if(A==="ArrowDown")D.preventDefault(),Gm(I,N,u,l,p1);else if(A==="ArrowUp")D.preventDefault(),Gm(I,N,u,l,BL);else if(A==="Home")D.preventDefault(),Gm(I,null,u,l,p1);else if(A==="End")D.preventDefault(),Gm(I,null,u,l,BL);else if(A.length===1){const U=y.current,B=A.toLowerCase(),k=performance.now();U.keys.length>0&&(k-U.lastTime>500?(U.keys=[],U.repeating=!0,U.previousKeyMatched=!0):U.repeating&&B!==U.keys[0]&&(U.repeating=!1)),U.lastTime=k,U.keys.push(B);const H=N&&!U.repeating&&V8(N,U);U.previousKeyMatched&&(H||Gm(I,N,!1,l,p1,U))?D.preventDefault():U.previousKeyMatched=!1}c&&c(D)},x=ci(g,t);let w=-1;M.Children.forEach(a,(D,I)=>{if(!M.isValidElement(D)){w===I&&(w+=1,w>=a.length&&(w=-1));return}D.props.disabled||(h==="selectedMenu"&&D.props.selected||w===-1)&&(w=I),w===I&&(D.props.disabled||D.props.muiSkipListHighlight||D.type.muiSkipListHighlight)&&(w+=1,w>=a.length&&(w=-1))});const E=M.Children.map(a,(D,I)=>{if(I===w){const A={};return s&&(A.autoFocus=!0),D.props.tabIndex===void 0&&h==="selectedMenu"&&(A.tabIndex=0),M.cloneElement(D,A)}return D});return F.jsx(fw,{role:"menu",ref:x,className:o,onKeyDown:v,tabIndex:i?0:-1,...m,children:E})});function pne(r){return nr("MuiPopover",r)}Zt("MuiPopover",["root","paper"]);function NL(r,e){let t=0;return typeof e=="number"?t=e:e==="center"?t=r.height/2:e==="bottom"&&(t=r.height),t}function UL(r,e){let t=0;return typeof e=="number"?t=e:e==="center"?t=r.width/2:e==="right"&&(t=r.width),t}function $L(r){return[r.horizontal,r.vertical].map(e=>typeof e=="number"?`${e}px`:e).join(" ")}function Xv(r){return typeof r=="function"?r():r}const mne=r=>{const{classes:e}=r;return rr({root:["root"],paper:["paper"]},pne,e)},gne=at(k2,{name:"MuiPopover",slot:"Root"})({}),W8=at(kc,{name:"MuiPopover",slot:"Paper"})({position:"absolute",overflowY:"auto",overflowX:"hidden",minWidth:16,minHeight:16,maxWidth:"calc(100% - 32px)",maxHeight:"calc(100% - 32px)",outline:0}),vne=M.forwardRef(function(e,t){const n=ir({props:e,name:"MuiPopover"}),{action:i,anchorEl:s,anchorOrigin:a={vertical:"top",horizontal:"left"},anchorPosition:o,anchorReference:l="anchorEl",children:u,className:c,container:h,elevation:m=8,marginThreshold:g=16,open:y,PaperProps:v={},slots:x={},slotProps:w={},transformOrigin:E={vertical:"top",horizontal:"left"},TransitionComponent:D,transitionDuration:I="auto",TransitionProps:A={},disableScrollLock:L=!1,...N}=n,U=M.useRef(),B={...n,anchorOrigin:a,anchorReference:l,elevation:m,marginThreshold:g,transformOrigin:E,TransitionComponent:D,transitionDuration:I,TransitionProps:A},k=mne(B),H=M.useCallback(()=>{if(l==="anchorPosition")return o;const Ze=Xv(s),Nt=(Ze&&Ze.nodeType===1?Ze:aa(U.current).body).getBoundingClientRect();return{top:Nt.top+NL(Nt,a.vertical),left:Nt.left+UL(Nt,a.horizontal)}},[s,a.horizontal,a.vertical,o,l]),q=M.useCallback(Ze=>({vertical:NL(Ze,E.vertical),horizontal:UL(Ze,E.horizontal)}),[E.horizontal,E.vertical]),V=M.useCallback(Ze=>{const Ot={width:Ze.offsetWidth,height:Ze.offsetHeight},Nt=q(Ot);if(l==="none")return{top:null,left:null,transformOrigin:$L(Nt)};const qe=H();let Ue=qe.top-Nt.vertical,Pe=qe.left-Nt.horizontal;const $e=Ue+Ot.height,rt=Pe+Ot.width,lt=fo(Xv(s)),ht=lt.innerHeight-g,ut=lt.innerWidth-g;if(g!==null&&Ue<g){const St=Ue-g;Ue-=St,Nt.vertical+=St}else if(g!==null&&$e>ht){const St=$e-ht;Ue-=St,Nt.vertical+=St}if(g!==null&&Pe<g){const St=Pe-g;Pe-=St,Nt.horizontal+=St}else if(rt>ut){const St=rt-ut;Pe-=St,Nt.horizontal+=St}return{top:`${Math.round(Ue)}px`,left:`${Math.round(Pe)}px`,transformOrigin:$L(Nt)}},[s,l,H,q,g]),[Q,ie]=M.useState(y),le=M.useCallback(()=>{const Ze=U.current;if(!Ze)return;const Ot=V(Ze);Ot.top!==null&&Ze.style.setProperty("top",Ot.top),Ot.left!==null&&(Ze.style.left=Ot.left),Ze.style.transformOrigin=Ot.transformOrigin,ie(!0)},[V]);M.useEffect(()=>(L&&window.addEventListener("scroll",le),()=>window.removeEventListener("scroll",le)),[s,L,le]);const he=()=>{le()},ae=()=>{ie(!1)};M.useEffect(()=>{y&&le()}),M.useImperativeHandle(i,()=>y?{updatePosition:()=>{le()}}:null,[y,le]),M.useEffect(()=>{if(!y)return;const Ze=Dg(()=>{le()}),Ot=fo(Xv(s));return Ot.addEventListener("resize",Ze),()=>{Ze.clear(),Ot.removeEventListener("resize",Ze)}},[s,y,le]);let ne=I;const ue={slots:{transition:D,...x},slotProps:{transition:A,paper:v,...w}},[ee,pe]=Sr("transition",{elementType:Z_,externalForwardedProps:ue,ownerState:B,getSlotProps:Ze=>({...Ze,onEntering:(Ot,Nt)=>{Ze.onEntering?.(Ot,Nt),he()},onExited:Ot=>{Ze.onExited?.(Ot),ae()}}),additionalProps:{appear:!0,in:y}});I==="auto"&&!ee.muiSupportAuto&&(ne=void 0);const me=h||(s?aa(Xv(s)).body:void 0),[xe,{slots:Be,slotProps:Oe,...dt}]=Sr("root",{ref:t,elementType:gne,externalForwardedProps:{...ue,...N},shouldForwardComponentProp:!0,additionalProps:{slots:{backdrop:x.backdrop},slotProps:{backdrop:A2(typeof w.backdrop=="function"?w.backdrop(B):w.backdrop,{invisible:!0})},container:me,open:y},ownerState:B,className:It(k.root,c)}),[Ke,_t]=Sr("paper",{ref:U,className:k.paper,elementType:W8,externalForwardedProps:ue,shouldForwardComponentProp:!0,additionalProps:{elevation:m,style:Q?void 0:{opacity:0}},ownerState:B});return F.jsx(xe,{...dt,...!Q0(xe)&&{slots:Be,slotProps:Oe,disableScrollLock:L},children:F.jsx(ee,{...pe,timeout:ne,children:F.jsx(Ke,{..._t,children:u})})})});function yne(r){return nr("MuiMenu",r)}Zt("MuiMenu",["root","paper","list"]);const _ne={vertical:"top",horizontal:"right"},xne={vertical:"top",horizontal:"left"},bne=r=>{const{classes:e}=r;return rr({root:["root"],paper:["paper"],list:["list"]},yne,e)},Sne=at(vne,{shouldForwardProp:r=>is(r)||r==="classes",name:"MuiMenu",slot:"Root"})({}),Tne=at(W8,{name:"MuiMenu",slot:"Paper"})({maxHeight:"calc(100% - 96px)",WebkitOverflowScrolling:"touch"}),Cne=at(fne,{name:"MuiMenu",slot:"List"})({outline:0}),wne=M.forwardRef(function(e,t){const n=ir({props:e,name:"MuiMenu"}),{autoFocus:i=!0,children:s,className:a,disableAutoFocusItem:o=!1,MenuListProps:l={},onClose:u,open:c,PaperProps:h={},PopoverClasses:m,transitionDuration:g="auto",TransitionProps:{onEntering:y,...v}={},variant:x="selectedMenu",slots:w={},slotProps:E={},...D}=n,I=Ab(),A={...n,autoFocus:i,disableAutoFocusItem:o,MenuListProps:l,onEntering:y,PaperProps:h,transitionDuration:g,TransitionProps:v,variant:x},L=bne(A),N=i&&!o&&c,U=M.useRef(null),B=(ne,ue)=>{U.current&&U.current.adjustStyleForScrollbar(ne,{direction:I?"rtl":"ltr"}),y&&y(ne,ue)},k=ne=>{ne.key==="Tab"&&(ne.preventDefault(),u&&u(ne,"tabKeyDown"))};let H=-1;M.Children.map(s,(ne,ue)=>{M.isValidElement(ne)&&(ne.props.disabled||(x==="selectedMenu"&&ne.props.selected||H===-1)&&(H=ue))});const q={slots:w,slotProps:{list:l,transition:v,paper:h,...E}},V=J0({elementType:w.root,externalSlotProps:E.root,ownerState:A,className:[L.root,a]}),[Q,ie]=Sr("paper",{className:L.paper,elementType:Tne,externalForwardedProps:q,shouldForwardComponentProp:!0,ownerState:A}),[le,he]=Sr("list",{className:It(L.list,l.className),elementType:Cne,shouldForwardComponentProp:!0,externalForwardedProps:q,getSlotProps:ne=>({...ne,onKeyDown:ue=>{k(ue),ne.onKeyDown?.(ue)}}),ownerState:A}),ae=typeof q.slotProps.transition=="function"?q.slotProps.transition(A):q.slotProps.transition;return F.jsx(Sne,{onClose:u,anchorOrigin:{vertical:"bottom",horizontal:I?"right":"left"},transformOrigin:I?_ne:xne,slots:{root:w.root,paper:Q,backdrop:w.backdrop,...w.transition&&{transition:w.transition}},slotProps:{root:V,paper:ie,backdrop:typeof E.backdrop=="function"?E.backdrop(A):E.backdrop,transition:{...ae,onEntering:(...ne)=>{B(...ne),ae?.onEntering?.(...ne)}}},open:c,ref:t,transitionDuration:g,ownerState:A,...D,classes:m,children:F.jsx(le,{actions:U,autoFocus:i&&(H===-1||o),autoFocusItem:N,variant:x,...he,children:s})})});function Ene(r){return nr("MuiMenuItem",r)}const Km=Zt("MuiMenuItem",["root","focusVisible","dense","disabled","divider","gutters","selected"]),kne=(r,e)=>{const{ownerState:t}=r;return[e.root,t.dense&&e.dense,t.divider&&e.divider,!t.disableGutters&&e.gutters]},Ane=r=>{const{disabled:e,dense:t,divider:n,disableGutters:i,selected:s,classes:a}=r,l=rr({root:["root",t&&"dense",e&&"disabled",!i&&"gutters",n&&"divider",s&&"selected"]},Ene,a);return{...a,...l}},Dne=at(bc,{shouldForwardProp:r=>is(r)||r==="classes",name:"MuiMenuItem",slot:"Root",overridesResolver:kne})(hr(({theme:r})=>({...r.typography.body1,display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",minHeight:48,paddingTop:6,paddingBottom:6,boxSizing:"border-box",whiteSpace:"nowrap","&:hover":{textDecoration:"none",backgroundColor:(r.vars||r).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${Km.selected}`]:{backgroundColor:r.vars?`rgba(${r.vars.palette.primary.mainChannel} / ${r.vars.palette.action.selectedOpacity})`:Xr(r.palette.primary.main,r.palette.action.selectedOpacity),[`&.${Km.focusVisible}`]:{backgroundColor:r.vars?`rgba(${r.vars.palette.primary.mainChannel} / calc(${r.vars.palette.action.selectedOpacity} + ${r.vars.palette.action.focusOpacity}))`:Xr(r.palette.primary.main,r.palette.action.selectedOpacity+r.palette.action.focusOpacity)}},[`&.${Km.selected}:hover`]:{backgroundColor:r.vars?`rgba(${r.vars.palette.primary.mainChannel} / calc(${r.vars.palette.action.selectedOpacity} + ${r.vars.palette.action.hoverOpacity}))`:Xr(r.palette.primary.main,r.palette.action.selectedOpacity+r.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:r.vars?`rgba(${r.vars.palette.primary.mainChannel} / ${r.vars.palette.action.selectedOpacity})`:Xr(r.palette.primary.main,r.palette.action.selectedOpacity)}},[`&.${Km.focusVisible}`]:{backgroundColor:(r.vars||r).palette.action.focus},[`&.${Km.disabled}`]:{opacity:(r.vars||r).palette.action.disabledOpacity},[`& + .${mL.root}`]:{marginTop:r.spacing(1),marginBottom:r.spacing(1)},[`& + .${mL.inset}`]:{marginLeft:52},[`& .${Vf.root}`]:{marginTop:0,marginBottom:0},[`& .${Vf.inset}`]:{paddingLeft:36},[`& .${lL.root}`]:{minWidth:36},variants:[{props:({ownerState:e})=>!e.disableGutters,style:{paddingLeft:16,paddingRight:16}},{props:({ownerState:e})=>e.divider,style:{borderBottom:`1px solid ${(r.vars||r).palette.divider}`,backgroundClip:"padding-box"}},{props:({ownerState:e})=>!e.dense,style:{[r.breakpoints.up("sm")]:{minHeight:"auto"}}},{props:({ownerState:e})=>e.dense,style:{minHeight:32,paddingTop:4,paddingBottom:4,...r.typography.body2,[`& .${lL.root} svg`]:{fontSize:"1.25rem"}}}]}))),Sc=M.forwardRef(function(e,t){const n=ir({props:e,name:"MuiMenuItem"}),{autoFocus:i=!1,component:s="li",dense:a=!1,divider:o=!1,disableGutters:l=!1,focusVisibleClassName:u,role:c="menuitem",tabIndex:h,className:m,...g}=n,y=M.useContext(Tl),v=M.useMemo(()=>({dense:a||y.dense||!1,disableGutters:l}),[y.dense,a,l]),x=M.useRef(null);Su(()=>{i&&x.current&&x.current.focus()},[i]);const w={...n,dense:v.dense,divider:o,disableGutters:l},E=Ane(n),D=ci(x,t);let I;return n.disabled||(I=h!==void 0?h:-1),F.jsx(Tl.Provider,{value:v,children:F.jsx(Dne,{ref:D,role:c,tabIndex:I,component:s,focusVisibleClassName:It(E.focusVisible,u),className:It(E.root,m),...g,ownerState:w,classes:E})})});function Ine(r){return nr("MuiNativeSelect",r)}const M2=Zt("MuiNativeSelect",["root","select","multiple","filled","outlined","standard","disabled","icon","iconOpen","iconFilled","iconOutlined","iconStandard","nativeInput","error"]),Pne=r=>{const{classes:e,variant:t,disabled:n,multiple:i,open:s,error:a}=r,o={select:["select",t,n&&"disabled",i&&"multiple",a&&"error"],icon:["icon",`icon${ft(t)}`,s&&"iconOpen",n&&"disabled"]};return rr(o,Ine,e)},q8=at("select")(({theme:r})=>({MozAppearance:"none",WebkitAppearance:"none",userSelect:"none",borderRadius:0,cursor:"pointer","&:focus":{borderRadius:0},[`&.${M2.disabled}`]:{cursor:"default"},"&[multiple]":{height:"auto"},"&:not([multiple]) option, &:not([multiple]) optgroup":{backgroundColor:(r.vars||r).palette.background.paper},variants:[{props:({ownerState:e})=>e.variant!=="filled"&&e.variant!=="outlined",style:{"&&&":{paddingRight:24,minWidth:16}}},{props:{variant:"filled"},style:{"&&&":{paddingRight:32}}},{props:{variant:"outlined"},style:{borderRadius:(r.vars||r).shape.borderRadius,"&:focus":{borderRadius:(r.vars||r).shape.borderRadius},"&&&":{paddingRight:32}}}]})),Rne=at(q8,{name:"MuiNativeSelect",slot:"Select",shouldForwardProp:is,overridesResolver:(r,e)=>{const{ownerState:t}=r;return[e.select,e[t.variant],t.error&&e.error,{[`&.${M2.multiple}`]:e.multiple}]}})({}),G8=at("svg")(({theme:r})=>({position:"absolute",right:0,top:"calc(50% - .5em)",pointerEvents:"none",color:(r.vars||r).palette.action.active,[`&.${M2.disabled}`]:{color:(r.vars||r).palette.action.disabled},variants:[{props:({ownerState:e})=>e.open,style:{transform:"rotate(180deg)"}},{props:{variant:"filled"},style:{right:7}},{props:{variant:"outlined"},style:{right:7}}]})),Lne=at(G8,{name:"MuiNativeSelect",slot:"Icon",overridesResolver:(r,e)=>{const{ownerState:t}=r;return[e.icon,t.variant&&e[`icon${ft(t.variant)}`],t.open&&e.iconOpen]}})({}),One=M.forwardRef(function(e,t){const{className:n,disabled:i,error:s,IconComponent:a,inputRef:o,variant:l="standard",...u}=e,c={...e,disabled:i,variant:l,error:s},h=Pne(c);return F.jsxs(M.Fragment,{children:[F.jsx(Rne,{ownerState:c,className:It(h.select,n),disabled:i,ref:o||t,...u}),e.multiple?null:F.jsx(Lne,{as:a,ownerState:c,className:h.icon})]})});var jL;const Mne=at("fieldset",{shouldForwardProp:is})({textAlign:"left",position:"absolute",bottom:0,right:0,top:-5,left:0,margin:0,padding:"0 8px",pointerEvents:"none",borderRadius:"inherit",borderStyle:"solid",borderWidth:1,overflow:"hidden",minWidth:"0%"}),Fne=at("legend",{shouldForwardProp:is})(hr(({theme:r})=>({float:"unset",width:"auto",overflow:"hidden",variants:[{props:({ownerState:e})=>!e.withLabel,style:{padding:0,lineHeight:"11px",transition:r.transitions.create("width",{duration:150,easing:r.transitions.easing.easeOut})}},{props:({ownerState:e})=>e.withLabel,style:{display:"block",padding:0,height:11,fontSize:"0.75em",visibility:"hidden",maxWidth:.01,transition:r.transitions.create("max-width",{duration:50,easing:r.transitions.easing.easeOut}),whiteSpace:"nowrap","& > span":{paddingLeft:5,paddingRight:5,display:"inline-block",opacity:0,visibility:"visible"}}},{props:({ownerState:e})=>e.withLabel&&e.notched,style:{maxWidth:"100%",transition:r.transitions.create("max-width",{duration:100,easing:r.transitions.easing.easeOut,delay:50})}}]})));function Bne(r){const{children:e,classes:t,className:n,label:i,notched:s,...a}=r,o=i!=null&&i!=="",l={...r,notched:s,withLabel:o};return F.jsx(Mne,{"aria-hidden":!0,className:n,ownerState:l,...a,children:F.jsx(Fne,{ownerState:l,children:o?F.jsx("span",{children:i}):jL||(jL=F.jsx("span",{className:"notranslate","aria-hidden":!0,children:""}))})})}const Nne=r=>{const{classes:e}=r,n=rr({root:["root"],notchedOutline:["notchedOutline"],input:["input"]},yre,e);return{...e,...n}},Une=at(Fb,{shouldForwardProp:r=>is(r)||r==="classes",name:"MuiOutlinedInput",slot:"Root",overridesResolver:Ob})(hr(({theme:r})=>{const e=r.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return{position:"relative",borderRadius:(r.vars||r).shape.borderRadius,[`&:hover .${Zl.notchedOutline}`]:{borderColor:(r.vars||r).palette.text.primary},"@media (hover: none)":{[`&:hover .${Zl.notchedOutline}`]:{borderColor:r.vars?`rgba(${r.vars.palette.common.onBackgroundChannel} / 0.23)`:e}},[`&.${Zl.focused} .${Zl.notchedOutline}`]:{borderWidth:2},variants:[...Object.entries(r.palette).filter(es()).map(([t])=>({props:{color:t},style:{[`&.${Zl.focused} .${Zl.notchedOutline}`]:{borderColor:(r.vars||r).palette[t].main}}})),{props:{},style:{[`&.${Zl.error} .${Zl.notchedOutline}`]:{borderColor:(r.vars||r).palette.error.main},[`&.${Zl.disabled} .${Zl.notchedOutline}`]:{borderColor:(r.vars||r).palette.action.disabled}}},{props:({ownerState:t})=>t.startAdornment,style:{paddingLeft:14}},{props:({ownerState:t})=>t.endAdornment,style:{paddingRight:14}},{props:({ownerState:t})=>t.multiline,style:{padding:"16.5px 14px"}},{props:({ownerState:t,size:n})=>t.multiline&&n==="small",style:{padding:"8.5px 14px"}}]}})),$ne=at(Bne,{name:"MuiOutlinedInput",slot:"NotchedOutline"})(hr(({theme:r})=>{const e=r.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return{borderColor:r.vars?`rgba(${r.vars.palette.common.onBackgroundChannel} / 0.23)`:e}})),jne=at(Bb,{name:"MuiOutlinedInput",slot:"Input",overridesResolver:Mb})(hr(({theme:r})=>({padding:"16.5px 14px",...!r.vars&&{"&:-webkit-autofill":{WebkitBoxShadow:r.palette.mode==="light"?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:r.palette.mode==="light"?null:"#fff",caretColor:r.palette.mode==="light"?null:"#fff",borderRadius:"inherit"}},...r.vars&&{"&:-webkit-autofill":{borderRadius:"inherit"},[r.getColorSchemeSelector("dark")]:{"&:-webkit-autofill":{WebkitBoxShadow:"0 0 0 100px #266798 inset",WebkitTextFillColor:"#fff",caretColor:"#fff"}}},variants:[{props:{size:"small"},style:{padding:"8.5px 14px"}},{props:({ownerState:e})=>e.multiline,style:{padding:0}},{props:({ownerState:e})=>e.startAdornment,style:{paddingLeft:0}},{props:({ownerState:e})=>e.endAdornment,style:{paddingRight:0}}]}))),Cp=M.forwardRef(function(e,t){const n=ir({props:e,name:"MuiOutlinedInput"}),{components:i={},fullWidth:s=!1,inputComponent:a="input",label:o,multiline:l=!1,notched:u,slots:c={},slotProps:h={},type:m="text",...g}=n,y=Nne(n),v=Il(),x=Nd({props:n,muiFormControl:v,states:["color","disabled","error","focused","hiddenLabel","size","required"]}),w={...n,color:x.color||"primary",disabled:x.disabled,error:x.error,focused:x.focused,formControl:v,fullWidth:s,hiddenLabel:x.hiddenLabel,multiline:l,size:x.size,type:m},E=c.root??i.Root??Une,D=c.input??i.Input??jne,[I,A]=Sr("notchedOutline",{elementType:$ne,className:y.notchedOutline,shouldForwardComponentProp:!0,ownerState:w,externalForwardedProps:{slots:c,slotProps:h},additionalProps:{label:o!=null&&o!==""&&x.required?F.jsxs(M.Fragment,{children:[o,"","*"]}):o}});return F.jsx(R2,{slots:{root:E,input:D},slotProps:h,renderSuffix:L=>F.jsx(I,{...A,notched:typeof u<"u"?u:!!(L.startAdornment||L.filled||L.focused)}),fullWidth:s,inputComponent:a,multiline:l,ref:t,type:m,...g,classes:{...y,notchedOutline:null}})});Cp.muiName="Input";function K8(r){return nr("MuiSelect",r)}const Xm=Zt("MuiSelect",["root","select","multiple","filled","outlined","standard","disabled","focused","icon","iconOpen","iconFilled","iconOutlined","iconStandard","nativeInput","error"]);var zL;const zne=at(q8,{name:"MuiSelect",slot:"Select",overridesResolver:(r,e)=>{const{ownerState:t}=r;return[{[`&.${Xm.select}`]:e.select},{[`&.${Xm.select}`]:e[t.variant]},{[`&.${Xm.error}`]:e.error},{[`&.${Xm.multiple}`]:e.multiple}]}})({[`&.${Xm.select}`]:{height:"auto",minHeight:"1.4375em",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"}}),Hne=at(G8,{name:"MuiSelect",slot:"Icon",overridesResolver:(r,e)=>{const{ownerState:t}=r;return[e.icon,t.variant&&e[`icon${ft(t.variant)}`],t.open&&e.iconOpen]}})({}),Vne=at("input",{shouldForwardProp:r=>u8(r)&&r!=="classes",name:"MuiSelect",slot:"NativeInput"})({bottom:0,left:0,position:"absolute",opacity:0,pointerEvents:"none",width:"100%",boxSizing:"border-box"});function HL(r,e){return typeof e=="object"&&e!==null?r===e:String(r)===String(e)}function Wne(r){return r==null||typeof r=="string"&&!r.trim()}const qne=r=>{const{classes:e,variant:t,disabled:n,multiple:i,open:s,error:a}=r,o={select:["select",t,n&&"disabled",i&&"multiple",a&&"error"],icon:["icon",`icon${ft(t)}`,s&&"iconOpen",n&&"disabled"],nativeInput:["nativeInput"]};return rr(o,K8,e)},Gne=M.forwardRef(function(e,t){const{"aria-describedby":n,"aria-label":i,autoFocus:s,autoWidth:a,children:o,className:l,defaultOpen:u,defaultValue:c,disabled:h,displayEmpty:m,error:g=!1,IconComponent:y,inputRef:v,labelId:x,MenuProps:w={},multiple:E,name:D,onBlur:I,onChange:A,onClose:L,onFocus:N,onOpen:U,open:B,readOnly:k,renderValue:H,required:q,SelectDisplayProps:V={},tabIndex:Q,type:ie,value:le,variant:he="standard",...ae}=e,[ne,ue]=X_({controlled:le,default:c,name:"Select"}),[ee,pe]=X_({controlled:B,default:u,name:"Select"}),me=M.useRef(null),xe=M.useRef(null),[Be,Oe]=M.useState(null),{current:dt}=M.useRef(B!=null),[Ke,_t]=M.useState(),Ze=ci(t,v),Ot=M.useCallback(Vt=>{xe.current=Vt,Vt&&Oe(Vt)},[]),Nt=Be?.parentNode;M.useImperativeHandle(Ze,()=>({focus:()=>{xe.current.focus()},node:me.current,value:ne}),[ne]),M.useEffect(()=>{u&&ee&&Be&&!dt&&(_t(a?null:Nt.clientWidth),xe.current.focus())},[Be,a]),M.useEffect(()=>{s&&xe.current.focus()},[s]),M.useEffect(()=>{if(!x)return;const Vt=aa(xe.current).getElementById(x);if(Vt){const Cr=()=>{getSelection().isCollapsed&&xe.current.focus()};return Vt.addEventListener("click",Cr),()=>{Vt.removeEventListener("click",Cr)}}},[x]);const qe=(Vt,Cr)=>{Vt?U&&U(Cr):L&&L(Cr),dt||(_t(a?null:Nt.clientWidth),pe(Vt))},Ue=Vt=>{Vt.button===0&&(Vt.preventDefault(),xe.current.focus(),qe(!0,Vt))},Pe=Vt=>{qe(!1,Vt)},$e=M.Children.toArray(o),rt=Vt=>{const Cr=$e.find(Ur=>Ur.props.value===Vt.target.value);Cr!==void 0&&(ue(Cr.props.value),A&&A(Vt,Cr))},lt=Vt=>Cr=>{let Ur;if(Cr.currentTarget.hasAttribute("tabindex")){if(E){Ur=Array.isArray(ne)?ne.slice():[];const qr=ne.indexOf(Vt.props.value);qr===-1?Ur.push(Vt.props.value):Ur.splice(qr,1)}else Ur=Vt.props.value;if(Vt.props.onClick&&Vt.props.onClick(Cr),ne!==Ur&&(ue(Ur),A)){const qr=Cr.nativeEvent||Cr,En=new qr.constructor(qr.type,qr);Object.defineProperty(En,"target",{writable:!0,value:{value:Ur,name:D}}),A(En,Vt)}E||qe(!1,Cr)}},ht=Vt=>{k||[" ","ArrowUp","ArrowDown","Enter"].includes(Vt.key)&&(Vt.preventDefault(),qe(!0,Vt))},ut=Be!==null&&ee,St=Vt=>{!ut&&I&&(Object.defineProperty(Vt,"target",{writable:!0,value:{value:ne,name:D}}),I(Vt))};delete ae["aria-invalid"];let ot,yr;const pr=[];let jr=!1;(J_({value:ne})||m)&&(H?ot=H(ne):jr=!0);const ur=$e.map(Vt=>{if(!M.isValidElement(Vt))return null;let Cr;if(E){if(!Array.isArray(ne))throw new Error(qh(2));Cr=ne.some(Ur=>HL(Ur,Vt.props.value)),Cr&&jr&&pr.push(Vt.props.children)}else Cr=HL(ne,Vt.props.value),Cr&&jr&&(yr=Vt.props.children);return M.cloneElement(Vt,{"aria-selected":Cr?"true":"false",onClick:lt(Vt),onKeyUp:Ur=>{Ur.key===" "&&Ur.preventDefault(),Vt.props.onKeyUp&&Vt.props.onKeyUp(Ur)},role:"option",selected:Cr,value:void 0,"data-value":Vt.props.value})});jr&&(E?pr.length===0?ot=null:ot=pr.reduce((Vt,Cr,Ur)=>(Vt.push(Cr),Ur<pr.length-1&&Vt.push(", "),Vt),[]):ot=yr);let Wt=Ke;!a&&dt&&Be&&(Wt=Nt.clientWidth);let mr;typeof Q<"u"?mr=Q:mr=h?null:0;const Tr=V.id||(D?`mui-component-select-${D}`:void 0),Nr={...e,variant:he,value:ne,open:ut,error:g},Tt=qne(Nr),Ht={...w.PaperProps,...w.slotProps?.paper},An=Qh();return F.jsxs(M.Fragment,{children:[F.jsx(zne,{as:"div",ref:Ot,tabIndex:mr,role:"combobox","aria-controls":ut?An:void 0,"aria-disabled":h?"true":void 0,"aria-expanded":ut?"true":"false","aria-haspopup":"listbox","aria-label":i,"aria-labelledby":[x,Tr].filter(Boolean).join(" ")||void 0,"aria-describedby":n,"aria-required":q?"true":void 0,"aria-invalid":g?"true":void 0,onKeyDown:ht,onMouseDown:h||k?null:Ue,onBlur:St,onFocus:N,...V,ownerState:Nr,className:It(V.className,Tt.select,l),id:Tr,children:Wne(ot)?zL||(zL=F.jsx("span",{className:"notranslate","aria-hidden":!0,children:""})):ot}),F.jsx(Vne,{"aria-invalid":g,value:Array.isArray(ne)?ne.join(","):ne,name:D,ref:me,"aria-hidden":!0,onChange:rt,tabIndex:-1,disabled:h,className:Tt.nativeInput,autoFocus:s,required:q,...ae,ownerState:Nr}),F.jsx(Hne,{as:y,className:Tt.icon,ownerState:Nr}),F.jsx(wne,{id:`menu-${D||""}`,anchorEl:Nt,open:ut,onClose:Pe,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"},...w,slotProps:{...w.slotProps,list:{"aria-labelledby":x,role:"listbox","aria-multiselectable":E?"true":void 0,disableListWrap:!0,id:An,...w.MenuListProps},paper:{...Ht,style:{minWidth:Wt,...Ht!=null?Ht.style:null}}},children:ur})]})}),Kne=r=>{const{classes:e}=r,n=rr({root:["root"]},K8,e);return{...e,...n}},F2={name:"MuiSelect",slot:"Root",shouldForwardProp:r=>is(r)&&r!=="variant"},Xne=at(O2,F2)(""),Yne=at(Cp,F2)(""),Qne=at(L2,F2)(""),wu=M.forwardRef(function(e,t){const n=ir({name:"MuiSelect",props:e}),{autoWidth:i=!1,children:s,classes:a={},className:o,defaultOpen:l=!1,displayEmpty:u=!1,IconComponent:c=xre,id:h,input:m,inputProps:g,label:y,labelId:v,MenuProps:x,multiple:w=!1,native:E=!1,onClose:D,onOpen:I,open:A,renderValue:L,SelectDisplayProps:N,variant:U="outlined",...B}=n,k=E?One:Gne,H=Il(),q=Nd({props:n,muiFormControl:H,states:["variant","error"]}),V=q.variant||U,Q={...n,variant:V,classes:a},ie=Kne(Q),{root:le,...he}=ie,ae=m||{standard:F.jsx(Xne,{ownerState:Q}),outlined:F.jsx(Yne,{label:y,ownerState:Q}),filled:F.jsx(Qne,{ownerState:Q})}[V],ne=ci(t,Jh(ae));return F.jsx(M.Fragment,{children:M.cloneElement(ae,{inputComponent:k,inputProps:{children:s,error:q.error,IconComponent:c,variant:V,type:void 0,multiple:w,...E?{id:h}:{autoWidth:i,defaultOpen:l,displayEmpty:u,labelId:v,MenuProps:x,onClose:D,onOpen:I,open:A,renderValue:L,SelectDisplayProps:{id:h,...N}},...g,classes:g?xu(he,g.classes):he,...m?m.props.inputProps:{}},...(w&&E||u)&&V==="outlined"?{notched:!0}:{},ref:ne,className:It(ae.props.className,o,ie.root),...!m&&{variant:V},...B})})});wu.muiName="Select";const Ym=zY({createStyledComponent:at("div",{name:"MuiStack",slot:"Root"}),useThemeProps:r=>ir({props:r,name:"MuiStack"})}),Nb=M.createContext({}),B2=M.createContext({});function Jne(r){return nr("MuiStep",r)}Zt("MuiStep",["root","horizontal","vertical","alternativeLabel","completed"]);const Zne=r=>{const{classes:e,orientation:t,alternativeLabel:n,completed:i}=r;return rr({root:["root",t,n&&"alternativeLabel",i&&"completed"]},Jne,e)},eie=at("div",{name:"MuiStep",slot:"Root",overridesResolver:(r,e)=>{const{ownerState:t}=r;return[e.root,e[t.orientation],t.alternativeLabel&&e.alternativeLabel,t.completed&&e.completed]}})({variants:[{props:{orientation:"horizontal"},style:{paddingLeft:8,paddingRight:8}},{props:{alternativeLabel:!0},style:{flex:1,position:"relative"}}]}),tie=M.forwardRef(function(e,t){const n=ir({props:e,name:"MuiStep"}),{active:i,children:s,className:a,component:o="div",completed:l,disabled:u,expanded:c=!1,index:h,last:m,...g}=n,{activeStep:y,connector:v,alternativeLabel:x,orientation:w,nonLinear:E}=M.useContext(Nb);let[D=!1,I=!1,A=!1]=[i,l,u];y===h?D=i!==void 0?i:!0:!E&&y>h?I=l!==void 0?l:!0:!E&&y<h&&(A=u!==void 0?u:!0);const L=M.useMemo(()=>({index:h,last:m,expanded:c,icon:h+1,active:D,completed:I,disabled:A}),[h,m,c,D,I,A]),N={...n,active:D,orientation:w,alternativeLabel:x,completed:I,disabled:A,expanded:c,component:o},U=Zne(N),B=F.jsxs(eie,{as:o,className:It(U.root,a),ref:t,ownerState:N,...g,children:[v&&x&&h!==0?v:null,s]});return F.jsx(B2.Provider,{value:L,children:v&&!x&&h!==0?F.jsxs(M.Fragment,{children:[v,B]}):B})}),rie=Ir(F.jsx("path",{d:"M12 0a12 12 0 1 0 0 24 12 12 0 0 0 0-24zm-2 17l-5-5 1.4-1.4 3.6 3.6 7.6-7.6L19 8l-9 9z"})),nie=Ir(F.jsx("path",{d:"M1 21h22L12 2 1 21zm12-3h-2v-2h2v2zm0-4h-2v-4h2v4z"}));function iie(r){return nr("MuiStepIcon",r)}const m1=Zt("MuiStepIcon",["root","active","completed","error","text"]);var VL;const sie=r=>{const{classes:e,active:t,completed:n,error:i}=r;return rr({root:["root",t&&"active",n&&"completed",i&&"error"],text:["text"]},iie,e)},g1=at(K_,{name:"MuiStepIcon",slot:"Root"})(hr(({theme:r})=>({display:"block",transition:r.transitions.create("color",{duration:r.transitions.duration.shortest}),color:(r.vars||r).palette.text.disabled,[`&.${m1.completed}`]:{color:(r.vars||r).palette.primary.main},[`&.${m1.active}`]:{color:(r.vars||r).palette.primary.main},[`&.${m1.error}`]:{color:(r.vars||r).palette.error.main}}))),aie=at("text",{name:"MuiStepIcon",slot:"Text"})(hr(({theme:r})=>({fill:(r.vars||r).palette.primary.contrastText,fontSize:r.typography.caption.fontSize,fontFamily:r.typography.fontFamily}))),oie=M.forwardRef(function(e,t){const n=ir({props:e,name:"MuiStepIcon"}),{active:i=!1,className:s,completed:a=!1,error:o=!1,icon:l,...u}=n,c={...n,active:i,completed:a,error:o},h=sie(c);if(typeof l=="number"||typeof l=="string"){const m=It(s,h.root);return o?F.jsx(g1,{as:nie,className:m,ref:t,ownerState:c,...u}):a?F.jsx(g1,{as:rie,className:m,ref:t,ownerState:c,...u}):F.jsxs(g1,{className:m,ref:t,ownerState:c,...u,children:[VL||(VL=F.jsx("circle",{cx:"12",cy:"12",r:"12"})),F.jsx(aie,{className:h.text,x:"12",y:"12",textAnchor:"middle",dominantBaseline:"central",ownerState:c,children:l})]})}return l});function lie(r){return nr("MuiStepLabel",r)}const bd=Zt("MuiStepLabel",["root","horizontal","vertical","label","active","completed","error","disabled","iconContainer","alternativeLabel","labelContainer"]),uie=r=>{const{classes:e,orientation:t,active:n,completed:i,error:s,disabled:a,alternativeLabel:o}=r;return rr({root:["root",t,s&&"error",a&&"disabled",o&&"alternativeLabel"],label:["label",n&&"active",i&&"completed",s&&"error",a&&"disabled",o&&"alternativeLabel"],iconContainer:["iconContainer",n&&"active",i&&"completed",s&&"error",a&&"disabled",o&&"alternativeLabel"],labelContainer:["labelContainer",o&&"alternativeLabel"]},lie,e)},cie=at("span",{name:"MuiStepLabel",slot:"Root",overridesResolver:(r,e)=>{const{ownerState:t}=r;return[e.root,e[t.orientation]]}})({display:"flex",alignItems:"center",[`&.${bd.alternativeLabel}`]:{flexDirection:"column"},[`&.${bd.disabled}`]:{cursor:"default"},variants:[{props:{orientation:"vertical"},style:{textAlign:"left",padding:"8px 0"}}]}),die=at("span",{name:"MuiStepLabel",slot:"Label"})(hr(({theme:r})=>({...r.typography.body2,display:"block",transition:r.transitions.create("color",{duration:r.transitions.duration.shortest}),[`&.${bd.active}`]:{color:(r.vars||r).palette.text.primary,fontWeight:500},[`&.${bd.completed}`]:{color:(r.vars||r).palette.text.primary,fontWeight:500},[`&.${bd.alternativeLabel}`]:{marginTop:16},[`&.${bd.error}`]:{color:(r.vars||r).palette.error.main}}))),hie=at("span",{name:"MuiStepLabel",slot:"IconContainer"})({flexShrink:0,display:"flex",paddingRight:8,[`&.${bd.alternativeLabel}`]:{paddingRight:0}}),fie=at("span",{name:"MuiStepLabel",slot:"LabelContainer"})(hr(({theme:r})=>({width:"100%",color:(r.vars||r).palette.text.secondary,[`&.${bd.alternativeLabel}`]:{textAlign:"center"}}))),X8=M.forwardRef(function(e,t){const n=ir({props:e,name:"MuiStepLabel"}),{children:i,className:s,componentsProps:a={},error:o=!1,icon:l,optional:u,slots:c={},slotProps:h={},StepIconComponent:m,StepIconProps:g,...y}=n,{alternativeLabel:v,orientation:x}=M.useContext(Nb),{active:w,disabled:E,completed:D,icon:I}=M.useContext(B2),A=l||I;let L=m;A&&!L&&(L=oie);const N={...n,active:w,alternativeLabel:v,completed:D,disabled:E,error:o,orientation:x},U=uie(N),B={slots:c,slotProps:{stepIcon:g,...a,...h}},[k,H]=Sr("root",{elementType:cie,externalForwardedProps:{...B,...y},ownerState:N,ref:t,className:It(U.root,s)}),[q,V]=Sr("label",{elementType:die,externalForwardedProps:B,ownerState:N}),[Q,ie]=Sr("stepIcon",{elementType:L,externalForwardedProps:B,ownerState:N});return F.jsxs(k,{...H,children:[A||Q?F.jsx(hie,{className:U.iconContainer,ownerState:N,children:F.jsx(Q,{completed:D,active:w,error:o,icon:A,...ie})}):null,F.jsxs(fie,{className:U.labelContainer,ownerState:N,children:[i?F.jsx(q,{...V,className:It(U.label,V?.className),children:i}):null,u]})]})});X8.muiName="StepLabel";function pie(r){return nr("MuiStepConnector",r)}Zt("MuiStepConnector",["root","horizontal","vertical","alternativeLabel","active","completed","disabled","line","lineHorizontal","lineVertical"]);const mie=r=>{const{classes:e,orientation:t,alternativeLabel:n,active:i,completed:s,disabled:a}=r,o={root:["root",t,n&&"alternativeLabel",i&&"active",s&&"completed",a&&"disabled"],line:["line",`line${ft(t)}`]};return rr(o,pie,e)},gie=at("div",{name:"MuiStepConnector",slot:"Root",overridesResolver:(r,e)=>{const{ownerState:t}=r;return[e.root,e[t.orientation],t.alternativeLabel&&e.alternativeLabel,t.completed&&e.completed]}})({flex:"1 1 auto",variants:[{props:{orientation:"vertical"},style:{marginLeft:12}},{props:{alternativeLabel:!0},style:{position:"absolute",top:12,left:"calc(-50% + 20px)",right:"calc(50% + 20px)"}}]}),vie=at("span",{name:"MuiStepConnector",slot:"Line",overridesResolver:(r,e)=>{const{ownerState:t}=r;return[e.line,e[`line${ft(t.orientation)}`]]}})(hr(({theme:r})=>{const e=r.palette.mode==="light"?r.palette.grey[400]:r.palette.grey[600];return{display:"block",borderColor:r.vars?r.vars.palette.StepConnector.border:e,variants:[{props:{orientation:"horizontal"},style:{borderTopStyle:"solid",borderTopWidth:1}},{props:{orientation:"vertical"},style:{borderLeftStyle:"solid",borderLeftWidth:1,minHeight:24}}]}})),yie=M.forwardRef(function(e,t){const n=ir({props:e,name:"MuiStepConnector"}),{className:i,...s}=n,{alternativeLabel:a,orientation:o="horizontal"}=M.useContext(Nb),{active:l,disabled:u,completed:c}=M.useContext(B2),h={...n,alternativeLabel:a,orientation:o,active:l,completed:c,disabled:u},m=mie(h);return F.jsx(gie,{className:It(m.root,i),ref:t,ownerState:h,...s,children:F.jsx(vie,{className:m.line,ownerState:h})})});function _ie(r){return nr("MuiStepper",r)}Zt("MuiStepper",["root","horizontal","vertical","nonLinear","alternativeLabel"]);const xie=r=>{const{orientation:e,nonLinear:t,alternativeLabel:n,classes:i}=r;return rr({root:["root",e,t&&"nonLinear",n&&"alternativeLabel"]},_ie,i)},bie=at("div",{name:"MuiStepper",slot:"Root",overridesResolver:(r,e)=>{const{ownerState:t}=r;return[e.root,e[t.orientation],t.alternativeLabel&&e.alternativeLabel,t.nonLinear&&e.nonLinear]}})({display:"flex",variants:[{props:{orientation:"horizontal"},style:{flexDirection:"row",alignItems:"center"}},{props:{orientation:"vertical"},style:{flexDirection:"column"}},{props:{alternativeLabel:!0},style:{alignItems:"flex-start"}}]}),Sie=F.jsx(yie,{}),Tie=M.forwardRef(function(e,t){const n=ir({props:e,name:"MuiStepper"}),{activeStep:i=0,alternativeLabel:s=!1,children:a,className:o,component:l="div",connector:u=Sie,nonLinear:c=!1,orientation:h="horizontal",...m}=n,g={...n,nonLinear:c,alternativeLabel:s,orientation:h,component:l},y=xie(g),v=M.Children.toArray(a).filter(Boolean),x=v.map((E,D)=>M.cloneElement(E,{index:D,last:D+1===v.length,...E.props})),w=M.useMemo(()=>({activeStep:i,alternativeLabel:s,connector:u,nonLinear:c,orientation:h}),[i,s,u,c,h]);return F.jsx(Nb.Provider,{value:w,children:F.jsx(bie,{as:l,ownerState:g,className:It(y.root,o),ref:t,...m,children:x})})});function Cie(r){return nr("MuiSwitch",r)}const Qs=Zt("MuiSwitch",["root","edgeStart","edgeEnd","switchBase","colorPrimary","colorSecondary","sizeSmall","sizeMedium","checked","disabled","input","thumb","track"]),wie=r=>{const{classes:e,edge:t,size:n,color:i,checked:s,disabled:a}=r,o={root:["root",t&&`edge${ft(t)}`,`size${ft(n)}`],switchBase:["switchBase",`color${ft(i)}`,s&&"checked",a&&"disabled"],thumb:["thumb"],track:["track"],input:["input"]},l=rr(o,Cie,e);return{...e,...l}},Eie=at("span",{name:"MuiSwitch",slot:"Root",overridesResolver:(r,e)=>{const{ownerState:t}=r;return[e.root,t.edge&&e[`edge${ft(t.edge)}`],e[`size${ft(t.size)}`]]}})({display:"inline-flex",width:58,height:38,overflow:"hidden",padding:12,boxSizing:"border-box",position:"relative",flexShrink:0,zIndex:0,verticalAlign:"middle","@media print":{colorAdjust:"exact"},variants:[{props:{edge:"start"},style:{marginLeft:-8}},{props:{edge:"end"},style:{marginRight:-8}},{props:{size:"small"},style:{width:40,height:24,padding:7,[`& .${Qs.thumb}`]:{width:16,height:16},[`& .${Qs.switchBase}`]:{padding:4,[`&.${Qs.checked}`]:{transform:"translateX(16px)"}}}}]}),kie=at(I2,{name:"MuiSwitch",slot:"SwitchBase",overridesResolver:(r,e)=>{const{ownerState:t}=r;return[e.switchBase,{[`& .${Qs.input}`]:e.input},t.color!=="default"&&e[`color${ft(t.color)}`]]}})(hr(({theme:r})=>({position:"absolute",top:0,left:0,zIndex:1,color:r.vars?r.vars.palette.Switch.defaultColor:`${r.palette.mode==="light"?r.palette.common.white:r.palette.grey[300]}`,transition:r.transitions.create(["left","transform"],{duration:r.transitions.duration.shortest}),[`&.${Qs.checked}`]:{transform:"translateX(20px)"},[`&.${Qs.disabled}`]:{color:r.vars?r.vars.palette.Switch.defaultDisabledColor:`${r.palette.mode==="light"?r.palette.grey[100]:r.palette.grey[600]}`},[`&.${Qs.checked} + .${Qs.track}`]:{opacity:.5},[`&.${Qs.disabled} + .${Qs.track}`]:{opacity:r.vars?r.vars.opacity.switchTrackDisabled:`${r.palette.mode==="light"?.12:.2}`},[`& .${Qs.input}`]:{left:"-100%",width:"300%"}})),hr(({theme:r})=>({"&:hover":{backgroundColor:r.vars?`rgba(${r.vars.palette.action.activeChannel} / ${r.vars.palette.action.hoverOpacity})`:Xr(r.palette.action.active,r.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},variants:[...Object.entries(r.palette).filter(es(["light"])).map(([e])=>({props:{color:e},style:{[`&.${Qs.checked}`]:{color:(r.vars||r).palette[e].main,"&:hover":{backgroundColor:r.vars?`rgba(${r.vars.palette[e].mainChannel} / ${r.vars.palette.action.hoverOpacity})`:Xr(r.palette[e].main,r.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${Qs.disabled}`]:{color:r.vars?r.vars.palette.Switch[`${e}DisabledColor`]:`${r.palette.mode==="light"?kg(r.palette[e].main,.62):Eg(r.palette[e].main,.55)}`}},[`&.${Qs.checked} + .${Qs.track}`]:{backgroundColor:(r.vars||r).palette[e].main}}}))]}))),Aie=at("span",{name:"MuiSwitch",slot:"Track"})(hr(({theme:r})=>({height:"100%",width:"100%",borderRadius:14/2,zIndex:-1,transition:r.transitions.create(["opacity","background-color"],{duration:r.transitions.duration.shortest}),backgroundColor:r.vars?r.vars.palette.common.onBackground:`${r.palette.mode==="light"?r.palette.common.black:r.palette.common.white}`,opacity:r.vars?r.vars.opacity.switchTrack:`${r.palette.mode==="light"?.38:.3}`}))),Die=at("span",{name:"MuiSwitch",slot:"Thumb"})(hr(({theme:r})=>({boxShadow:(r.vars||r).shadows[1],backgroundColor:"currentColor",width:20,height:20,borderRadius:"50%"}))),Iie=M.forwardRef(function(e,t){const n=ir({props:e,name:"MuiSwitch"}),{className:i,color:s="primary",edge:a=!1,size:o="medium",sx:l,slots:u={},slotProps:c={},...h}=n,m={...n,color:s,edge:a,size:o},g=wie(m),y={slots:u,slotProps:c},[v,x]=Sr("root",{className:It(g.root,i),elementType:Eie,externalForwardedProps:y,ownerState:m,additionalProps:{sx:l}}),[w,E]=Sr("thumb",{className:g.thumb,elementType:Die,externalForwardedProps:y,ownerState:m}),D=F.jsx(w,{...E}),[I,A]=Sr("track",{className:g.track,elementType:Aie,externalForwardedProps:y,ownerState:m});return F.jsxs(v,{...x,children:[F.jsx(kie,{type:"checkbox",icon:D,checkedIcon:D,ref:t,ownerState:m,...h,classes:{...g,root:g.switchBase},slots:{...u.switchBase&&{root:u.switchBase},...u.input&&{input:u.input}},slotProps:{...c.switchBase&&{root:typeof c.switchBase=="function"?c.switchBase(m):c.switchBase},...c.input&&{input:typeof c.input=="function"?c.input(m):c.input}}}),F.jsx(I,{...A})]})});function Pie(r){return nr("MuiTab",r)}const Mo=Zt("MuiTab",["root","labelIcon","textColorInherit","textColorPrimary","textColorSecondary","selected","disabled","fullWidth","wrapped","iconWrapper","icon"]),Rie=r=>{const{classes:e,textColor:t,fullWidth:n,wrapped:i,icon:s,label:a,selected:o,disabled:l}=r,u={root:["root",s&&a&&"labelIcon",`textColor${ft(t)}`,n&&"fullWidth",i&&"wrapped",o&&"selected",l&&"disabled"],icon:["iconWrapper","icon"]};return rr(u,Pie,e)},Lie=at(bc,{name:"MuiTab",slot:"Root",overridesResolver:(r,e)=>{const{ownerState:t}=r;return[e.root,t.label&&t.icon&&e.labelIcon,e[`textColor${ft(t.textColor)}`],t.fullWidth&&e.fullWidth,t.wrapped&&e.wrapped,{[`& .${Mo.iconWrapper}`]:e.iconWrapper},{[`& .${Mo.icon}`]:e.icon}]}})(hr(({theme:r})=>({...r.typography.button,maxWidth:360,minWidth:90,position:"relative",minHeight:48,flexShrink:0,padding:"12px 16px",overflow:"hidden",whiteSpace:"normal",textAlign:"center",lineHeight:1.25,variants:[{props:({ownerState:e})=>e.label&&(e.iconPosition==="top"||e.iconPosition==="bottom"),style:{flexDirection:"column"}},{props:({ownerState:e})=>e.label&&e.iconPosition!=="top"&&e.iconPosition!=="bottom",style:{flexDirection:"row"}},{props:({ownerState:e})=>e.icon&&e.label,style:{minHeight:72,paddingTop:9,paddingBottom:9}},{props:({ownerState:e,iconPosition:t})=>e.icon&&e.label&&t==="top",style:{[`& > .${Mo.icon}`]:{marginBottom:6}}},{props:({ownerState:e,iconPosition:t})=>e.icon&&e.label&&t==="bottom",style:{[`& > .${Mo.icon}`]:{marginTop:6}}},{props:({ownerState:e,iconPosition:t})=>e.icon&&e.label&&t==="start",style:{[`& > .${Mo.icon}`]:{marginRight:r.spacing(1)}}},{props:({ownerState:e,iconPosition:t})=>e.icon&&e.label&&t==="end",style:{[`& > .${Mo.icon}`]:{marginLeft:r.spacing(1)}}},{props:{textColor:"inherit"},style:{color:"inherit",opacity:.6,[`&.${Mo.selected}`]:{opacity:1},[`&.${Mo.disabled}`]:{opacity:(r.vars||r).palette.action.disabledOpacity}}},{props:{textColor:"primary"},style:{color:(r.vars||r).palette.text.secondary,[`&.${Mo.selected}`]:{color:(r.vars||r).palette.primary.main},[`&.${Mo.disabled}`]:{color:(r.vars||r).palette.text.disabled}}},{props:{textColor:"secondary"},style:{color:(r.vars||r).palette.text.secondary,[`&.${Mo.selected}`]:{color:(r.vars||r).palette.secondary.main},[`&.${Mo.disabled}`]:{color:(r.vars||r).palette.text.disabled}}},{props:({ownerState:e})=>e.fullWidth,style:{flexShrink:1,flexGrow:1,flexBasis:0,maxWidth:"none"}},{props:({ownerState:e})=>e.wrapped,style:{fontSize:r.typography.pxToRem(12)}}]}))),bw=M.forwardRef(function(e,t){const n=ir({props:e,name:"MuiTab"}),{className:i,disabled:s=!1,disableFocusRipple:a=!1,fullWidth:o,icon:l,iconPosition:u="top",indicator:c,label:h,onChange:m,onClick:g,onFocus:y,selected:v,selectionFollowsFocus:x,textColor:w="inherit",value:E,wrapped:D=!1,...I}=n,A={...n,disabled:s,disableFocusRipple:a,selected:v,icon:!!l,iconPosition:u,label:!!h,fullWidth:o,textColor:w,wrapped:D},L=Rie(A),N=l&&h&&M.isValidElement(l)?M.cloneElement(l,{className:It(L.icon,l.props.className)}):l,U=k=>{!v&&m&&m(k,E),g&&g(k)},B=k=>{x&&!v&&m&&m(k,E),y&&y(k)};return F.jsxs(Lie,{focusRipple:!a,className:It(L.root,i),ref:t,role:"tab","aria-selected":v,disabled:s,onClick:U,onFocus:B,ownerState:A,tabIndex:v?0:-1,...I,children:[u==="top"||u==="start"?F.jsxs(M.Fragment,{children:[N,h]}):F.jsxs(M.Fragment,{children:[h,N]}),c]})}),Oie=Ir(F.jsx("path",{d:"M15.41 16.09l-4.58-4.59 4.58-4.59L14 5.5l-6 6 6 6z"})),Mie=Ir(F.jsx("path",{d:"M8.59 16.34l4.58-4.59-4.58-4.59L10 5.75l6 6-6 6z"}));function Fie(r){return(1+Math.sin(Math.PI*r-Math.PI/2))/2}function Bie(r,e,t,n={},i=()=>{}){const{ease:s=Fie,duration:a=300}=n;let o=null;const l=e[r];let u=!1;const c=()=>{u=!0},h=m=>{if(u){i(new Error("Animation cancelled"));return}o===null&&(o=m);const g=Math.min(1,(m-o)/a);if(e[r]=s(g)*(t-l)+l,g>=1){requestAnimationFrame(()=>{i(null)});return}requestAnimationFrame(h)};return l===t?(i(new Error("Element already at target position")),c):(requestAnimationFrame(h),c)}const Nie={width:99,height:99,position:"absolute",top:-9999,overflow:"scroll"};function Uie(r){const{onChange:e,...t}=r,n=M.useRef(),i=M.useRef(null),s=()=>{n.current=i.current.offsetHeight-i.current.clientHeight};return Su(()=>{const a=Dg(()=>{const l=n.current;s(),l!==n.current&&e(n.current)}),o=fo(i.current);return o.addEventListener("resize",a),()=>{a.clear(),o.removeEventListener("resize",a)}},[e]),M.useEffect(()=>{s(),e(n.current)},[e]),F.jsx("div",{style:Nie,...t,ref:i})}function $ie(r){return nr("MuiTabScrollButton",r)}const jie=Zt("MuiTabScrollButton",["root","vertical","horizontal","disabled"]),zie=r=>{const{classes:e,orientation:t,disabled:n}=r;return rr({root:["root",t,n&&"disabled"]},$ie,e)},Hie=at(bc,{name:"MuiTabScrollButton",slot:"Root",overridesResolver:(r,e)=>{const{ownerState:t}=r;return[e.root,t.orientation&&e[t.orientation]]}})({width:40,flexShrink:0,opacity:.8,[`&.${jie.disabled}`]:{opacity:0},variants:[{props:{orientation:"vertical"},style:{width:"100%",height:40,"& svg":{transform:"var(--TabScrollButton-svgRotate)"}}}]}),Vie=M.forwardRef(function(e,t){const n=ir({props:e,name:"MuiTabScrollButton"}),{className:i,slots:s={},slotProps:a={},direction:o,orientation:l,disabled:u,...c}=n,h=Ab(),m={isRtl:h,...n},g=zie(m),y=s.StartScrollButtonIcon??Oie,v=s.EndScrollButtonIcon??Mie,x=J0({elementType:y,externalSlotProps:a.startScrollButtonIcon,additionalProps:{fontSize:"small"},ownerState:m}),w=J0({elementType:v,externalSlotProps:a.endScrollButtonIcon,additionalProps:{fontSize:"small"},ownerState:m});return F.jsx(Hie,{component:"div",className:It(g.root,i),ref:t,role:null,ownerState:m,tabIndex:null,...c,style:{...c.style,...l==="vertical"&&{"--TabScrollButton-svgRotate":`rotate(${h?-90:90}deg)`}},children:o==="left"?F.jsx(y,{...x}):F.jsx(v,{...w})})});function Wie(r){return nr("MuiTabs",r)}const v1=Zt("MuiTabs",["root","vertical","list","flexContainer","flexContainerVertical","centered","scroller","fixed","scrollableX","scrollableY","hideScrollbar","scrollButtons","scrollButtonsHideMobile","indicator"]),WL=(r,e)=>r===e?r.firstChild:e&&e.nextElementSibling?e.nextElementSibling:r.firstChild,qL=(r,e)=>r===e?r.lastChild:e&&e.previousElementSibling?e.previousElementSibling:r.lastChild,Yv=(r,e,t)=>{let n=!1,i=t(r,e);for(;i;){if(i===r.firstChild){if(n)return;n=!0}const s=i.disabled||i.getAttribute("aria-disabled")==="true";if(!i.hasAttribute("tabindex")||s)i=t(r,i);else{i.focus();return}}},qie=r=>{const{vertical:e,fixed:t,hideScrollbar:n,scrollableX:i,scrollableY:s,centered:a,scrollButtonsHideMobile:o,classes:l}=r;return rr({root:["root",e&&"vertical"],scroller:["scroller",t&&"fixed",n&&"hideScrollbar",i&&"scrollableX",s&&"scrollableY"],list:["list","flexContainer",e&&"flexContainerVertical",e&&"vertical",a&&"centered"],indicator:["indicator"],scrollButtons:["scrollButtons",o&&"scrollButtonsHideMobile"],scrollableX:[i&&"scrollableX"],hideScrollbar:[n&&"hideScrollbar"]},Wie,l)},Gie=at("div",{name:"MuiTabs",slot:"Root",overridesResolver:(r,e)=>{const{ownerState:t}=r;return[{[`& .${v1.scrollButtons}`]:e.scrollButtons},{[`& .${v1.scrollButtons}`]:t.scrollButtonsHideMobile&&e.scrollButtonsHideMobile},e.root,t.vertical&&e.vertical]}})(hr(({theme:r})=>({overflow:"hidden",minHeight:48,WebkitOverflowScrolling:"touch",display:"flex",variants:[{props:({ownerState:e})=>e.vertical,style:{flexDirection:"column"}},{props:({ownerState:e})=>e.scrollButtonsHideMobile,style:{[`& .${v1.scrollButtons}`]:{[r.breakpoints.down("sm")]:{display:"none"}}}}]}))),Kie=at("div",{name:"MuiTabs",slot:"Scroller",overridesResolver:(r,e)=>{const{ownerState:t}=r;return[e.scroller,t.fixed&&e.fixed,t.hideScrollbar&&e.hideScrollbar,t.scrollableX&&e.scrollableX,t.scrollableY&&e.scrollableY]}})({position:"relative",display:"inline-block",flex:"1 1 auto",whiteSpace:"nowrap",variants:[{props:({ownerState:r})=>r.fixed,style:{overflowX:"hidden",width:"100%"}},{props:({ownerState:r})=>r.hideScrollbar,style:{scrollbarWidth:"none","&::-webkit-scrollbar":{display:"none"}}},{props:({ownerState:r})=>r.scrollableX,style:{overflowX:"auto",overflowY:"hidden"}},{props:({ownerState:r})=>r.scrollableY,style:{overflowY:"auto",overflowX:"hidden"}}]}),Xie=at("div",{name:"MuiTabs",slot:"List",overridesResolver:(r,e)=>{const{ownerState:t}=r;return[e.list,e.flexContainer,t.vertical&&e.flexContainerVertical,t.centered&&e.centered]}})({display:"flex",variants:[{props:({ownerState:r})=>r.vertical,style:{flexDirection:"column"}},{props:({ownerState:r})=>r.centered,style:{justifyContent:"center"}}]}),Yie=at("span",{name:"MuiTabs",slot:"Indicator"})(hr(({theme:r})=>({position:"absolute",height:2,bottom:0,width:"100%",transition:r.transitions.create(),variants:[{props:{indicatorColor:"primary"},style:{backgroundColor:(r.vars||r).palette.primary.main}},{props:{indicatorColor:"secondary"},style:{backgroundColor:(r.vars||r).palette.secondary.main}},{props:({ownerState:e})=>e.vertical,style:{height:"100%",width:2,right:0}}]}))),Qie=at(Uie)({overflowX:"auto",overflowY:"hidden",scrollbarWidth:"none","&::-webkit-scrollbar":{display:"none"}}),GL={},Y8=M.forwardRef(function(e,t){const n=ir({props:e,name:"MuiTabs"}),i=Ec(),s=Ab(),{"aria-label":a,"aria-labelledby":o,action:l,centered:u=!1,children:c,className:h,component:m="div",allowScrollButtonsMobile:g=!1,indicatorColor:y="primary",onChange:v,orientation:x="horizontal",ScrollButtonComponent:w,scrollButtons:E="auto",selectionFollowsFocus:D,slots:I={},slotProps:A={},TabIndicatorProps:L={},TabScrollButtonProps:N={},textColor:U="primary",value:B,variant:k="standard",visibleScrollbar:H=!1,...q}=n,V=k==="scrollable",Q=x==="vertical",ie=Q?"scrollTop":"scrollLeft",le=Q?"top":"left",he=Q?"bottom":"right",ae=Q?"clientHeight":"clientWidth",ne=Q?"height":"width",ue={...n,component:m,allowScrollButtonsMobile:g,indicatorColor:y,orientation:x,vertical:Q,scrollButtons:E,textColor:U,variant:k,visibleScrollbar:H,fixed:!V,hideScrollbar:V&&!H,scrollableX:V&&!Q,scrollableY:V&&Q,centered:u&&!V,scrollButtonsHideMobile:!g},ee=qie(ue),pe=J0({elementType:I.StartScrollButtonIcon,externalSlotProps:A.startScrollButtonIcon,ownerState:ue}),me=J0({elementType:I.EndScrollButtonIcon,externalSlotProps:A.endScrollButtonIcon,ownerState:ue}),[xe,Be]=M.useState(!1),[Oe,dt]=M.useState(GL),[Ke,_t]=M.useState(!1),[Ze,Ot]=M.useState(!1),[Nt,qe]=M.useState(!1),[Ue,Pe]=M.useState({overflow:"hidden",scrollbarWidth:0}),$e=new Map,rt=M.useRef(null),lt=M.useRef(null),ht={slots:I,slotProps:{indicator:L,scrollButton:N,...A}},ut=()=>{const ye=rt.current;let Ae;if(ye){const Xe=ye.getBoundingClientRect();Ae={clientWidth:ye.clientWidth,scrollLeft:ye.scrollLeft,scrollTop:ye.scrollTop,scrollWidth:ye.scrollWidth,top:Xe.top,bottom:Xe.bottom,left:Xe.left,right:Xe.right}}let Ge;if(ye&&B!==!1){const Xe=lt.current.children;if(Xe.length>0){const yt=Xe[$e.get(B)];Ge=yt?yt.getBoundingClientRect():null}}return{tabsMeta:Ae,tabMeta:Ge}},St=ho(()=>{const{tabsMeta:ye,tabMeta:Ae}=ut();let Ge=0,Xe;Q?(Xe="top",Ae&&ye&&(Ge=Ae.top-ye.top+ye.scrollTop)):(Xe=s?"right":"left",Ae&&ye&&(Ge=(s?-1:1)*(Ae[Xe]-ye[Xe]+ye.scrollLeft)));const yt={[Xe]:Ge,[ne]:Ae?Ae[ne]:0};if(typeof Oe[Xe]!="number"||typeof Oe[ne]!="number")dt(yt);else{const At=Math.abs(Oe[Xe]-yt[Xe]),st=Math.abs(Oe[ne]-yt[ne]);(At>=1||st>=1)&&dt(yt)}}),ot=(ye,{animation:Ae=!0}={})=>{Ae?Bie(ie,rt.current,ye,{duration:i.transitions.duration.standard}):rt.current[ie]=ye},yr=ye=>{let Ae=rt.current[ie];Q?Ae+=ye:Ae+=ye*(s?-1:1),ot(Ae)},pr=()=>{const ye=rt.current[ae];let Ae=0;const Ge=Array.from(lt.current.children);for(let Xe=0;Xe<Ge.length;Xe+=1){const yt=Ge[Xe];if(Ae+yt[ae]>ye){Xe===0&&(Ae=ye);break}Ae+=yt[ae]}return Ae},jr=()=>{yr(-1*pr())},ur=()=>{yr(pr())},[Wt,{onChange:mr,...Tr}]=Sr("scrollbar",{className:It(ee.scrollableX,ee.hideScrollbar),elementType:Qie,shouldForwardComponentProp:!0,externalForwardedProps:ht,ownerState:ue}),Nr=M.useCallback(ye=>{mr?.(ye),Pe({overflow:null,scrollbarWidth:ye})},[mr]),[Tt,Ht]=Sr("scrollButtons",{className:It(ee.scrollButtons,N.className),elementType:Vie,externalForwardedProps:ht,ownerState:ue,additionalProps:{orientation:x,slots:{StartScrollButtonIcon:I.startScrollButtonIcon||I.StartScrollButtonIcon,EndScrollButtonIcon:I.endScrollButtonIcon||I.EndScrollButtonIcon},slotProps:{startScrollButtonIcon:pe,endScrollButtonIcon:me}}}),An=()=>{const ye={};ye.scrollbarSizeListener=V?F.jsx(Wt,{...Tr,onChange:Nr}):null;const Ge=V&&(E==="auto"&&(Ke||Ze)||E===!0);return ye.scrollButtonStart=Ge?F.jsx(Tt,{direction:s?"right":"left",onClick:jr,disabled:!Ke,...Ht}):null,ye.scrollButtonEnd=Ge?F.jsx(Tt,{direction:s?"left":"right",onClick:ur,disabled:!Ze,...Ht}):null,ye},Vt=ho(ye=>{const{tabsMeta:Ae,tabMeta:Ge}=ut();if(!(!Ge||!Ae)){if(Ge[le]<Ae[le]){const Xe=Ae[ie]+(Ge[le]-Ae[le]);ot(Xe,{animation:ye})}else if(Ge[he]>Ae[he]){const Xe=Ae[ie]+(Ge[he]-Ae[he]);ot(Xe,{animation:ye})}}}),Cr=ho(()=>{V&&E!==!1&&qe(!Nt)});M.useEffect(()=>{const ye=Dg(()=>{rt.current&&St()});let Ae;const Ge=At=>{At.forEach(st=>{st.removedNodes.forEach(gt=>{Ae?.unobserve(gt)}),st.addedNodes.forEach(gt=>{Ae?.observe(gt)})}),ye(),Cr()},Xe=fo(rt.current);Xe.addEventListener("resize",ye);let yt;return typeof ResizeObserver<"u"&&(Ae=new ResizeObserver(ye),Array.from(lt.current.children).forEach(At=>{Ae.observe(At)})),typeof MutationObserver<"u"&&(yt=new MutationObserver(Ge),yt.observe(lt.current,{childList:!0})),()=>{ye.clear(),Xe.removeEventListener("resize",ye),yt?.disconnect(),Ae?.disconnect()}},[St,Cr]),M.useEffect(()=>{const ye=Array.from(lt.current.children),Ae=ye.length;if(typeof IntersectionObserver<"u"&&Ae>0&&V&&E!==!1){const Ge=ye[0],Xe=ye[Ae-1],yt={root:rt.current,threshold:.99},At=Kt=>{_t(!Kt[0].isIntersecting)},st=new IntersectionObserver(At,yt);st.observe(Ge);const gt=Kt=>{Ot(!Kt[0].isIntersecting)},jt=new IntersectionObserver(gt,yt);return jt.observe(Xe),()=>{st.disconnect(),jt.disconnect()}}},[V,E,Nt,c?.length]),M.useEffect(()=>{Be(!0)},[]),M.useEffect(()=>{St()}),M.useEffect(()=>{Vt(GL!==Oe)},[Vt,Oe]),M.useImperativeHandle(l,()=>({updateIndicator:St,updateScrollButtons:Cr}),[St,Cr]);const[Ur,qr]=Sr("indicator",{className:It(ee.indicator,L.className),elementType:Yie,externalForwardedProps:ht,ownerState:ue,additionalProps:{style:Oe}}),En=F.jsx(Ur,{...qr});let Dn=0;const In=M.Children.map(c,ye=>{if(!M.isValidElement(ye))return null;const Ae=ye.props.value===void 0?Dn:ye.props.value;$e.set(Ae,Dn);const Ge=Ae===B;return Dn+=1,M.cloneElement(ye,{fullWidth:k==="fullWidth",indicator:Ge&&!xe&&En,selected:Ge,selectionFollowsFocus:D,onChange:v,textColor:U,value:Ae,...Dn===1&&B===!1&&!ye.props.tabIndex?{tabIndex:0}:{}})}),Mr=ye=>{if(ye.altKey||ye.shiftKey||ye.ctrlKey||ye.metaKey)return;const Ae=lt.current,Ge=aa(Ae).activeElement;if(Ge.getAttribute("role")!=="tab")return;let yt=x==="horizontal"?"ArrowLeft":"ArrowUp",At=x==="horizontal"?"ArrowRight":"ArrowDown";switch(x==="horizontal"&&s&&(yt="ArrowRight",At="ArrowLeft"),ye.key){case yt:ye.preventDefault(),Yv(Ae,Ge,qL);break;case At:ye.preventDefault(),Yv(Ae,Ge,WL);break;case"Home":ye.preventDefault(),Yv(Ae,null,WL);break;case"End":ye.preventDefault(),Yv(Ae,null,qL);break}},se=An(),[fe,Te]=Sr("root",{ref:t,className:It(ee.root,h),elementType:Gie,externalForwardedProps:{...ht,...q,component:m},ownerState:ue}),[je,pt]=Sr("scroller",{ref:rt,className:ee.scroller,elementType:Kie,externalForwardedProps:ht,ownerState:ue,additionalProps:{style:{overflow:Ue.overflow,[Q?`margin${s?"Left":"Right"}`:"marginBottom"]:H?void 0:-Ue.scrollbarWidth}}}),[Gt,be]=Sr("list",{ref:lt,className:It(ee.list,ee.flexContainer),elementType:Xie,externalForwardedProps:ht,ownerState:ue,getSlotProps:ye=>({...ye,onKeyDown:Ae=>{Mr(Ae),ye.onKeyDown?.(Ae)}})});return F.jsxs(fe,{...Te,children:[se.scrollButtonStart,se.scrollbarSizeListener,F.jsxs(je,{...pt,children:[F.jsx(Gt,{"aria-label":a,"aria-labelledby":o,"aria-orientation":x==="vertical"?"vertical":null,role:"tablist",...be,children:In}),xe&&En]}),se.scrollButtonEnd]})});function Jie(r){return nr("MuiTextField",r)}Zt("MuiTextField",["root"]);const Zie={standard:O2,filled:L2,outlined:Cp},ese=r=>{const{classes:e}=r;return rr({root:["root"]},Jie,e)},tse=at(Rr,{name:"MuiTextField",slot:"Root"})({}),Qn=M.forwardRef(function(e,t){const n=ir({props:e,name:"MuiTextField"}),{autoComplete:i,autoFocus:s=!1,children:a,className:o,color:l="primary",defaultValue:u,disabled:c=!1,error:h=!1,FormHelperTextProps:m,fullWidth:g=!1,helperText:y,id:v,InputLabelProps:x,inputProps:w,InputProps:E,inputRef:D,label:I,maxRows:A,minRows:L,multiline:N=!1,name:U,onBlur:B,onChange:k,onFocus:H,placeholder:q,required:V=!1,rows:Q,select:ie=!1,SelectProps:le,slots:he={},slotProps:ae={},type:ne,value:ue,variant:ee="outlined",...pe}=n,me={...n,autoFocus:s,color:l,disabled:c,error:h,fullWidth:g,multiline:N,required:V,select:ie,variant:ee},xe=ese(me),Be=Qh(v),Oe=y&&Be?`${Be}-helper-text`:void 0,dt=I&&Be?`${Be}-label`:void 0,Ke=Zie[ee],_t={slots:he,slotProps:{input:E,inputLabel:x,htmlInput:w,formHelperText:m,select:le,...ae}},Ze={},Ot=_t.slotProps.inputLabel;ee==="outlined"&&(Ot&&typeof Ot.shrink<"u"&&(Ze.notched=Ot.shrink),Ze.label=I),ie&&((!le||!le.native)&&(Ze.id=void 0),Ze["aria-describedby"]=void 0);const[Nt,qe]=Sr("root",{elementType:tse,shouldForwardComponentProp:!0,externalForwardedProps:{..._t,...pe},ownerState:me,className:It(xe.root,o),ref:t,additionalProps:{disabled:c,error:h,fullWidth:g,required:V,color:l,variant:ee}}),[Ue,Pe]=Sr("input",{elementType:Ke,externalForwardedProps:_t,additionalProps:Ze,ownerState:me}),[$e,rt]=Sr("inputLabel",{elementType:Cu,externalForwardedProps:_t,ownerState:me}),[lt,ht]=Sr("htmlInput",{elementType:"input",externalForwardedProps:_t,ownerState:me}),[ut,St]=Sr("formHelperText",{elementType:rne,externalForwardedProps:_t,ownerState:me}),[ot,yr]=Sr("select",{elementType:wu,externalForwardedProps:_t,ownerState:me}),pr=F.jsx(Ue,{"aria-describedby":Oe,autoComplete:i,autoFocus:s,defaultValue:u,fullWidth:g,multiline:N,name:U,rows:Q,maxRows:A,minRows:L,type:ne,value:ue,id:Be,inputRef:D,onBlur:B,onChange:k,onFocus:H,placeholder:q,inputProps:ht,slots:{input:he.htmlInput?lt:void 0},...Pe});return F.jsxs(Nt,{...qe,children:[I!=null&&I!==""&&F.jsx($e,{htmlFor:Be,id:dt,...rt,children:I}),ie?F.jsx(ot,{"aria-describedby":Oe,id:Be,labelId:dt,value:ue,input:pr,...yr,children:a}):pr,y&&F.jsx(ut,{id:Oe,...St,children:y})]})}),Id=Ir(F.jsx("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6zM19 4h-3.5l-1-1h-5l-1 1H5v2h14z"})),rse=Ir(F.jsx("path",{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2M12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8m3.5-9c.83 0 1.5-.67 1.5-1.5S16.33 8 15.5 8 14 8.67 14 9.5s.67 1.5 1.5 1.5m-7 0c.83 0 1.5-.67 1.5-1.5S9.33 8 8.5 8 7 8.67 7 9.5 7.67 11 8.5 11m3.5 6.5c2.33 0 4.31-1.46 5.11-3.5H6.89c.8 2.04 2.78 3.5 5.11 3.5"})),nse=Ir(F.jsx("path",{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2M12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8m3.5-9c.83 0 1.5-.67 1.5-1.5S16.33 8 15.5 8 14 8.67 14 9.5s.67 1.5 1.5 1.5m-7 0c.83 0 1.5-.67 1.5-1.5S9.33 8 8.5 8 7 8.67 7 9.5 7.67 11 8.5 11m3.5 3c-2.33 0-4.31 1.46-5.11 3.5h10.22c-.8-2.04-2.78-3.5-5.11-3.5"})),ise=Ir(F.jsx("path",{d:"M5 20h14v-2H5zm0-10h4v6h6v-6h4l-7-7z"})),sse=[{value:"EveryDay",name:""},{value:"EveryHour",name:""}],KL=".m3u",y1={original:{urls:[],result_name:"",md5:"",run_type:"EveryDay",keyword_dislike:[],keyword_like:[],http_timeout:2e4,check_timeout:2e4,concurrent:30,sort:!1,no_check:!1,rename:!1,ffmpeg_check:!1,not_http_skip:!1,same_save_num:0},id:"",create_time:0,task_info:{run_type:"EveryDay",last_run_time:0,next_run_time:0,is_running:!1,task_status:"Pending"}},Q8=({onClose:r,formValue:e,open:t,onSave:n,handleSave:i,handleDelete:s,taskService:a,checkType:o,output_folder:l})=>{const{t:u}=bs(),c=M.useContext(vo),[h,m]=M.useState(y1),[g,y]=M.useState(""),[v,x]=M.useState(""),[w,E]=M.useState(0),[D,I]=M.useState(!1),A=["","",""];M.useEffect(()=>{if(!t){let Pe=JSON.parse(JSON.stringify(y1));Pe.original.result_name===""&&(Pe.original.result_name=L(10)),m(Pe),x(""),y(""),E(0),I(!1)}},[t]),M.useEffect(()=>{if(E(0),e!==null){const Pe={...e,original:{...e.original,result_name:e.original.result_name.replace(l,"").replace(KL,""),http_timeout:e.original.http_timeout??0,check_timeout:e.original.check_timeout??0,concurrent:e.original.concurrent??0,sort:e.original.sort??!1,no_check:e.original.no_check??!1,rename:e.original.rename??!1,ffmpeg_check:e.original.ffmpeg_check??!1,not_http_skip:e.original.not_http_skip??!1,same_save_num:e.original.same_save_num??0}};m(Pe)}else{let Pe=JSON.parse(JSON.stringify(y1));Pe.original.result_name===""&&(Pe.original.result_name=L(10)),m(Pe)}},[e]);const L=Pe=>{Pe=Pe||32;const $e="ABCDEFGHJKMNPQRSTWXYZabcdefhijkmnprstwxyz2345678",rt=$e.length;let lt="";for(let ht=0;ht<Pe;ht++)lt+=$e.charAt(Math.floor(Math.random()*rt));return lt},N=()=>{E(Pe=>Pe+1)},U=()=>{E(Pe=>Pe-1)},B=()=>{if(h.original.urls.length===0){let Pe=u("");alert(Pe)}else i(h),r()},k=()=>{s(h),ie(),r()},H=Pe=>{const $e=[...h.original.urls,Pe];m({...h,original:{...h.original,urls:$e}})},q=Pe=>parseInt(Pe.replace("url-",""),10),V=()=>{H("")},Q=()=>{I(!0)},ie=()=>{I(!1)},le=Pe=>{m($e=>({...$e,original:{...$e.original,urls:$e.original.urls.filter((rt,lt)=>lt!==Pe)}}))},he=Pe=>{m({...h,original:{...h.original,check_timeout:parseInt(Pe.target.value,10)}})},ae=async Pe=>{const $e=Pe.target.files[0];if($e)try{const rt=new FormData;rt.append("file",$e);let lt=await a.uploadFile(rt);H(lt.url)}catch(rt){console.error("",rt)}},ne=Pe=>{m({...h,original:{...h.original,http_timeout:parseInt(Pe.target.value,10)}})},ue=Pe=>{if(Pe===1&&g!=""){let $e=h.original.keyword_like??[];$e.push(g),m({...h,original:{...h.original,keyword_like:ee($e)}}),y("")}else if(Pe===2&&v!=""){let $e=h.original.keyword_dislike??[];$e.push(v),m({...h,original:{...h.original,keyword_dislike:ee($e)}}),x("")}},ee=Pe=>Pe.filter(($e,rt)=>Pe.indexOf($e)===rt),pe=Pe=>{y(Pe.target.value)},me=Pe=>{x(Pe.target.value)},xe=Pe=>{const $e=q(Pe.target.name),rt=[...h.original.urls];rt[$e]=Pe.target.value;const lt={...h,original:{...h.original,urls:rt}};m(lt)},Be=Pe=>{m({...h,original:{...h.original,result_name:Pe.target.value}})},Oe=Pe=>{m({...h,original:{...h.original,run_type:Pe.target.value}})},dt=Pe=>{m({...h,original:{...h.original,concurrent:parseInt(Pe.target.value,10)}})},Ke=Pe=>{let $e=!1;Pe.target.defaultValue==="false"?$e=!1:$e=!0,m({...h,original:{...h.original,sort:$e}})},_t=Pe=>{m({...h,original:{...h.original,same_save_num:parseInt(Pe.target.value,10)}})},Ze=Pe=>{let $e=!1;Pe.target.defaultValue==="false"?$e=!1:$e=!0,m({...h,original:{...h.original,rename:$e}})},Ot=Pe=>{let $e=!1;Pe.target.defaultValue==="false"?$e=!1:$e=!0,m({...h,original:{...h.original,not_http_skip:$e}})},Nt=Pe=>{let $e=!1;Pe.target.defaultValue==="false"?$e=!1:$e=!0,m({...h,original:{...h.original,ffmpeg_check:$e}})},qe=Pe=>{let $e=!1;Pe.target.defaultValue==="false"?$e=!1:$e=!0,m({...h,original:{...h.original,no_check:$e}})},Ue=Pe=>{switch(Pe){case 0:return F.jsxs(Lt,{sx:{mt:2},children:[h.original.urls.length>0?F.jsxs(Rr,{fullWidth:!0,style:{padding:"0 0 20px"},children:[F.jsx(bn,{variant:"subtitle1",component:"div",children:u("")}),h.original.urls.map(($e,rt)=>F.jsxs(Ym,{direction:"row",spacing:1,children:[F.jsx(Qn,{style:{width:"100%"},disabled:$e.startsWith("static")||$e.startsWith("localstorage"),id:"standard-basic",variant:"standard",name:"url-"+rt,value:$e,onChange:xe}),F.jsx(Zh,{"aria-label":"delete",onClick:()=>le(rt),children:F.jsx(Id,{})})]},rt))]}):"",F.jsxs(Rr,{fullWidth:!0,style:{padding:"20px 0 20px",display:"flex",flexDirection:"row",justifyContent:"space-between"},children:[F.jsx(Wr,{variant:"outlined",onClick:()=>V(),startIcon:F.jsx(hw,{}),children:u("")}),F.jsxs(Wr,{variant:"contained",component:"label",startIcon:F.jsx(ise,{}),children:[u(""),F.jsx("input",{hidden:!0,accept:"*",multiple:!0,type:"file",onChange:ae})]})]}),o==="server"?F.jsxs(Rr,{fullWidth:!0,style:{margin:"0 0 20px"},children:[F.jsx(Cu,{id:"demo-simple-select-standard-label",children:u("")}),F.jsx(wu,{labelId:"demo-simple-select-standard-label",id:"demo-simple-select-standard",value:h.original.run_type,label:u(""),onChange:Oe,children:sse.map(($e,rt)=>F.jsx(Sc,{value:$e.value,children:u($e.name)},rt))})]}):"",o==="server"?F.jsxs(Rr,{fullWidth:!0,style:{margin:"20px 0 20px"},children:[F.jsx(Cu,{htmlFor:"outlined-adornment-amount",children:u("")}),F.jsx(Cp,{style:{width:"100%"},name:"resultName",endAdornment:F.jsx(FL,{position:"end",children:KL}),startAdornment:F.jsx(FL,{position:"start",children:l}),"aria-describedby":"outlined-weight-helper-text",label:u(""),value:h.original.result_name,onChange:Be})]}):""]});case 1:return F.jsxs(Lt,{sx:{mt:2},children:[F.jsx(Rr,{fullWidth:!0,style:{margin:"10px 0 20px"},children:F.jsxs(Ym,{direction:"row",spacing:2,children:[F.jsx(Qn,{id:"standard-basic",label:u(""),variant:"standard",fullWidth:!0,value:g,onChange:pe}),F.jsx(Wr,{size:"small",variant:"outlined",onClick:()=>ue(1),startIcon:F.jsx(rse,{}),children:u("")})]})}),h.original.keyword_like!==null&&h.original.keyword_like.length>0?F.jsxs(Rr,{fullWidth:!0,style:{padding:"0 0 20px"},children:[F.jsx(bn,{variant:"subtitle1",component:"div",children:u("")}),F.jsx(Ym,{direction:"row",spacing:1,style:{display:"flex",flexWrap:"wrap"},children:h.original.keyword_like!==null&&h.original.keyword_like.map(($e,rt)=>F.jsx(AL,{label:$e,onDelete:()=>deleteThisLikeKw(rt),variant:"outlined",style:{margin:"5px"}},rt))})]}):"",F.jsx(Rr,{fullWidth:!0,style:{margin:"10px 0 20px"},children:F.jsxs(Ym,{direction:"row",spacing:2,children:[F.jsx(Qn,{id:"standard-basic",label:u(""),variant:"standard",fullWidth:!0,value:v,onChange:me}),F.jsx(Wr,{size:"small",variant:"outlined",onClick:()=>ue(2),startIcon:F.jsx(nse,{}),children:u("")})]})}),h.original.keyword_dislike!==null&&h.original.keyword_dislike.length>0?F.jsxs(Rr,{fullWidth:!0,style:{padding:"0 0 10px"},children:[F.jsx(bn,{variant:"subtitle1",component:"div",children:u("")}),F.jsx(Ym,{direction:"row",spacing:1,style:{display:"flex",flexWrap:"wrap"},children:h.original.keyword_dislike.map(($e,rt)=>F.jsx(AL,{label:$e,variant:"outlined",onDelete:()=>deleteThisDislikeKw(rt),style:{margin:"5px"}},rt))})]}):""]});case 2:return F.jsxs(Lt,{sx:{mt:2},children:[F.jsxs(Rr,{fullWidth:!0,style:{margin:"20px 0 20px"},children:[F.jsx(bn,{variant:"subtitle1",component:"div",children:u("http(ms)")}),F.jsx(Qn,{id:"standard-basic",variant:"standard",value:h.original.http_timeout,onChange:ne})]}),F.jsxs(Rr,{fullWidth:!0,style:{margin:"20px 0 20px"},children:[F.jsx(bn,{variant:"subtitle1",component:"div",children:u("(ms)")}),F.jsx(Qn,{id:"standard-basic",variant:"standard",value:h.original.check_timeout,onChange:he})]}),F.jsxs(Rr,{fullWidth:!0,style:{margin:"10px 0 20px"},children:[F.jsx(bn,{variant:"subtitle1",component:"div",children:u("")}),F.jsxs(jf,{row:!0,"aria-labelledby":"demo-row-radio-buttons-group-label",name:"row-radio-buttons-group",value:h.original.no_check,onChange:qe,children:[F.jsx(Aa,{value:"false",control:F.jsx(yl,{}),label:u("")}),F.jsx(Aa,{value:"true",control:F.jsx(yl,{}),label:u("")})]})]}),h.original.no_check===!1?F.jsxs(F.Fragment,{children:[F.jsxs(Rr,{fullWidth:!0,style:{margin:"10px 0 20px"},children:[F.jsx(bn,{variant:"subtitle1",component:"div",children:u("")}),F.jsx(Qn,{id:"standard-basic",variant:"standard",value:h.original.concurrent,onChange:dt})]}),F.jsxs(Rr,{fullWidth:!0,style:{margin:"10px 0 20px"},children:[F.jsx(bn,{variant:"subtitle1",component:"div",children:u("")}),F.jsxs(jf,{row:!0,"aria-labelledby":"demo-row-radio-buttons-group-label",name:"row-radio-buttons-group",value:h.original.ffmpeg_check,onChange:Nt,children:[F.jsx(Aa,{value:"false",control:F.jsx(yl,{}),label:u("http")}),F.jsx(Aa,{value:"true",disabled:c.ffmepgCheck==0&&c.nowMod===1,control:F.jsx(yl,{}),label:u("ffmpeg")})]})]}),h.original.ffmpeg_check===!1?F.jsxs(Rr,{fullWidth:!0,style:{margin:"10px 0 20px"},children:[F.jsx(bn,{variant:"subtitle1",component:"div",children:u("http")}),F.jsxs(jf,{row:!0,"aria-labelledby":"demo-row-radio-buttons-group-label",name:"row-radio-buttons-group",value:h.original.not_http_skip,onChange:Ot,children:[F.jsx(Aa,{value:"false",control:F.jsx(yl,{}),label:u("")}),F.jsx(Aa,{value:"true",control:F.jsx(yl,{}),label:u("")})]})]}):""]}):"",F.jsxs(Rr,{fullWidth:!0,style:{margin:"10px 0 20px"},children:[F.jsx(bn,{variant:"subtitle1",component:"div",children:u('("[HD]CCTV1""[HD]")')}),F.jsxs(jf,{row:!0,"aria-labelledby":"demo-row-radio-buttons-group-label",name:"row-radio-buttons-group",value:h.original.rename,onChange:Ze,children:[F.jsx(Aa,{value:"false",control:F.jsx(yl,{}),label:u("")}),F.jsx(Aa,{value:"true",control:F.jsx(yl,{}),label:u("")})]})]}),F.jsxs(Rr,{fullWidth:!0,style:{margin:"10px 0 20px"},children:[F.jsx(bn,{variant:"subtitle1",component:"div",children:u("")}),F.jsxs(jf,{row:!0,"aria-labelledby":"demo-row-radio-buttons-group-label",name:"row-radio-buttons-group",value:h.original.sort,onChange:Ke,children:[F.jsx(Aa,{value:"false",control:F.jsx(yl,{}),label:u("")}),F.jsx(Aa,{value:"true",control:F.jsx(yl,{}),label:u("")})]})]}),F.jsxs(Rr,{fullWidth:!0,style:{margin:"10px 0 20px"},children:[F.jsx(bn,{variant:"subtitle1",component:"div",children:u("(0 0)")}),F.jsx(Qn,{id:"standard-basic",variant:"standard",value:h.original.same_save_num,onChange:_t})]})]});default:return null}};return F.jsxs(F.Fragment,{children:[F.jsxs(Tu,{open:D,onClose:ie,"aria-describedby":"alert-dialog-slide-description",children:[F.jsx(Ag,{children:""}),F.jsxs(qre,{children:[F.jsx(Wr,{onClick:ie,children:"No"}),F.jsx(Wr,{onClick:k,children:"Yes"})]})]}),F.jsx(Tu,{onClose:r,open:t,disableEnforceFocus:!0,disableAutoFocus:!0,disableRestoreFocus:!0,children:F.jsxs(Lt,{sx:{width:"100%",padding:"40px"},children:[F.jsx(Tie,{activeStep:w,children:A.map(Pe=>F.jsx(tie,{children:F.jsx(X8,{children:u(Pe)})},Pe))}),F.jsxs(M.Fragment,{children:[Ue(w),F.jsxs(Lt,{sx:{display:"flex",flexDirection:"row",pt:2},children:[w!==0&&F.jsx(Wr,{color:"inherit",onClick:U,sx:{mr:1},children:u("")}),w===0&&h.id!==""&&F.jsx(Wr,{color:"error",onClick:Q,startIcon:F.jsx(Id,{}),children:u("")}),F.jsx(Lt,{sx:{flex:"1 1 auto"}}),w===A.length-1?o==="server"||h.id===""?F.jsx(Wr,{onClick:B,children:u("")}):"":F.jsx(Wr,{onClick:N,children:u("")})]})]})]})})]})},XL=Ir(F.jsx("path",{d:"M19 9h-4V3H9v6H5l7 7zM5 18v2h14v-2z"})),J8=({isNowHandle:r,row:e,clickTask:t,doTaskRightNow:n,source:i,showDownloadDialog:s,checkTaskRefetch:a,checkTaskContinue:o,checkTaskAgain:l})=>{const u=M.useContext(vo),{t:c}=bs(),h=w=>{n(w)},m=w=>{s(w)},g=w=>{console.log("handleTaskRefetch",w),a(w)},y=w=>{console.log("handleTaskContinue",w),o(w)},v=w=>{console.log("handleTaskContinue",w),l(w)},x=(w,E)=>{let D=[],I=e.original.same_save_num;for(let A=0;A<e.list.length;A++)e.list[A].status===200&&D.push(e.list[A]);if(I>0){const A={};D.forEach(L=>{A[L.name]||(A[L.name]=[]),A[L.name].push(L)}),D=Object.values(A).flatMap(L=>L.slice(0,I))}i==="ltask"&&u.nowMod===1?u.clientSaveFile(D,E==="txt"?"txt":"m3u"):u.webSaveFile(D,E==="txt"?"txt":"m3u")};return F.jsx(M.Fragment,{children:F.jsxs(P2,{children:[F.jsxs(Dd,{width:400,children:[F.jsx(Wr,{onClick:()=>t(),variant:"text",children:e.id}),F.jsx(Lt,{children:i==="task"?F.jsxs(Lt,{children:[F.jsx(Wr,{color:"success",onClick:()=>m(e.id),size:"small",startIcon:F.jsx(T8,{}),children:c("")}),!r&&e.task_info.next_run_time>0&&e.task_info.next_run_time-new Date().getTime()/1e3>=120?F.jsx(Wr,{color:"success",onClick:()=>h(e.id),children:c("")}):""]}):F.jsxs(Lt,{style:{display:"flex"},children:[F.jsx(Wr,{size:"small",color:"success",startIcon:F.jsx(XL,{}),onClick:()=>x(e.id,"m3u"),children:".m3u"}),F.jsx(Wr,{size:"small",color:"success",startIcon:F.jsx(XL,{}),onClick:()=>x(e.id,"txt"),children:".txt"})]})})]}),F.jsxs(Dd,{align:"right",width:300,children:[F.jsxs("div",{children:[c(""),"",e.create_time>0?new Date(e.create_time*1e3).toLocaleTimeString("zh-CN",{month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",hour12:!1}):""]}),e.task_info.last_run_time>0?F.jsxs("div",{children:[c(""),"",new Date(e.task_info.last_run_time*1e3).toLocaleTimeString("zh-CN",{month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",hour12:!1})]}):"",F.jsxs("div",{children:[c(""),"",c(r?"":"")]}),i==="task"&&e.task_info.next_run_time>0?F.jsxs("div",{children:[c(""),"",new Date(e.task_info.next_run_time*1e3).toLocaleTimeString("zh-CN",{month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",hour12:!1})]}):"",i==="task"?F.jsxs("div",{children:[c(""),"",e.task_info.run_type==="EveryHour"?c(""):c("")]}):"",F.jsxs("div",{children:[e.task_info.task_status==="FetchDataError"?F.jsx(Wr,{onClick:()=>g(e.id),style:{color:"red",cursor:"pointer"},children:c("")}):"",e.task_info.task_status==="FetchSomeDataError"?F.jsx(Wr,{onClick:()=>y(e.id),style:{color:"orange",cursor:"pointer"},children:c("")}):"",e.task_info.task_status==="Completed"?F.jsx(Wr,{onClick:()=>v(e.id),style:{color:"green",cursor:"pointer"},children:c("")}):""]})]})]})})},Z8=({onClose:r,formValue:e,open:t})=>{const{t:n}=bs(),[i,s]=M.useState([]),[a,o]=M.useState(""),l=M.useContext(vo);M.useEffect(()=>{o(window.document.location.origin+"/"+e.url),e.content!==""?s(e.content.split(`
`)):s([])},[e]);const u=async()=>{l.saveFile(),l.nowMod===0?window.open(a):l.clientSaveFile(e.content,"m3u")};return F.jsx(Tu,{onClose:()=>r(!1),open:t,children:F.jsx("div",{style:{width:"960px",minHeight:"400px"},children:F.jsxs("div",{style:{overflow:"hidden",padding:"0 20px"},children:[F.jsxs("div",{style:{position:"fixed",overflow:"hidden",backgroundColor:"#fff",zIndex:9,width:"560px"},children:[F.jsxs("div",{children:[n(""),"",F.jsx("b",{children:a})]}),i.length>0&&F.jsx("div",{children:F.jsx(Wr,{variant:"text",onClick:()=>u(e.url),children:n("")})})]}),i.length>0?F.jsx("div",{style:{padding:"60px 0",position:"relative",textWrap:"nowrap"},children:i.map((c,h)=>F.jsx("div",{children:c},h))}):F.jsx("div",{style:{padding:"60px 0",position:"relative"},children:F.jsx("div",{children:n("")})})]})})})},eN=({onClose:r,open:e,onSave:t})=>{const{t:n}=bs(),[i,s]=M.useState(""),a=()=>{s(""),r(!1)},o=()=>{t(i)},l=u=>{s(u.target.value)};return F.jsxs(Tu,{onClose:a,open:e,children:[F.jsx(Lt,{sx:{width:500,padding:"20px"},children:F.jsx(Qn,{id:"outlined-multiline-flexible",multiline:!0,value:i,maxRows:4,style:{width:"500px"},onChange:l})}),F.jsx(Wr,{variant:"text",onClick:o,children:n("")})]})},tN=({onClose:r,formValue:e,open:t})=>{const n=()=>{r(!1)};return F.jsx(Tu,{onClose:n,open:t,children:F.jsx(Lt,{sx:{width:500,padding:"20px"},children:F.jsx(Qn,{id:"outlined-multiline-flexible",multiline:!0,value:e,maxRows:4,style:{width:"500px"}})})})};function ase(){const r=M.useContext(M8),{t:e}=bs(),[t]=M.useState(()=>new sre),[n,i]=M.useState(!1),[s,a]=M.useState(null),[o,l]=M.useState(!1),[u,c]=M.useState(""),[h,m]=M.useState(!1),[g,y]=M.useState({content:"",url:""}),[v,x]=M.useState(!1),[w,E]=M.useState(!1),[D,I]=M.useState(""),A=ue=>{a(ue),i(!0)},L=()=>{i(!1),a(null)},N=async ue=>{try{ue.id===""?await t.addTask(ue):await t.updateTask(ue.id,ue),r.freshTaskList()}catch(ee){B(ee.message)}},U=async ue=>{try{await t.deleteTask(ue.id),r.freshTaskList()}catch(ee){B(ee.message)}},B=ue=>{c(ue),l(!0)},k=()=>{c(""),l(!1)},H=async ue=>{try{await t.runTask(ue)}catch{B(e(""))}},q=async ue=>{r.updateTaskStatus(ue,"Prepare")},V=async ue=>{r.updateTaskStatus(ue,"Pending")},Q=async ue=>{r.updateTaskStatus(ue,"Prepare")},ie=async ue=>{try{const ee=await t.getDownloadBody(ue);m(!0),y({content:ee.content,url:ee.url})}catch{B(e(""))}},le=ue=>{m(ue)},he=ue=>{x(ue)},ae=async ue=>{if(ue)try{const ee=await t.exportTasks();E(!0),I(JSON.stringify(ee))}catch{B(e(""))}else E(!1)},ne=async ue=>{try{const ee=JSON.parse(ue);await t.importTasks(ee),x(!1)}catch{B(e(""))}};return F.jsx(Lt,{style:{padding:"0 20px"},children:F.jsxs(F.Fragment,{children:[F.jsx(Lt,{style:{marginBottom:"10px",display:"flex",justifyContent:"space-between"},children:F.jsx(Lt,{children:F.jsx(Wr,{variant:"contained",startIcon:F.jsx(Ig,{}),onClick:()=>A(null),style:{marginRight:"10px"},size:"small",children:e("")})})}),F.jsx(Kp,{open:o,autoHideDuration:6e3,onClose:k,message:u}),F.jsx(Q8,{taskService:t,formValue:s,open:n,onClose:L,handleSave:N,handleDelete:U,checkType:"local",output_folder:""}),F.jsx(Z8,{formValue:g,open:h,onClose:le}),F.jsx(eN,{open:v,onClose:he,onSave:ne}),F.jsx(tN,{open:w,formValue:D,onClose:ae}),F.jsx(kc,{sx:{overflow:"hidden"},children:F.jsx(U8,{children:F.jsxs(B8,{"aria-label":"simple table",children:[F.jsx($8,{children:F.jsxs(P2,{children:[F.jsx(Dd,{children:e("id")}),F.jsx(Dd,{align:"right",children:e("")})]})}),F.jsx(N8,{children:r.tasks.map(ue=>F.jsx(J8,{row:ue,doTaskRightNow:H,showDownloadDialog:ie,clickTask:()=>A(ue),checkTaskRefetch:q,checkTaskContinue:V,checkTaskAgain:Q,source:"ltask"},ue.id))})]})})})]})})}const ose=Ir(F.jsx("path",{d:"m10 16.5 6-4.5-6-4.5zM12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8"})),lse=Ir(F.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m4 14H8V8h8z"}));var _1,YL;function Xp(){if(YL)return _1;YL=1;var r;return typeof window<"u"?r=window:typeof Dh<"u"?r=Dh:typeof self<"u"?r=self:r={},_1=r,_1}var use=Xp();const X=ua(use);var x1,QL;function rN(){if(QL)return x1;QL=1;var r=typeof Dh<"u"?Dh:typeof window<"u"?window:{},e=zF,t;return typeof document<"u"?t=document:(t=r["__GLOBAL_DOCUMENT_CACHE@4"],t||(t=r["__GLOBAL_DOCUMENT_CACHE@4"]=e)),x1=t,x1}var cse=rN();const Fe=ua(cse);var Qv={exports:{}},b1={exports:{}},JL;function nN(){return JL||(JL=1,(function(r){function e(){return r.exports=e=Object.assign?Object.assign.bind():function(t){for(var n=1;n<arguments.length;n++){var i=arguments[n];for(var s in i)({}).hasOwnProperty.call(i,s)&&(t[s]=i[s])}return t},r.exports.__esModule=!0,r.exports.default=r.exports,e.apply(null,arguments)}r.exports=e,r.exports.__esModule=!0,r.exports.default=r.exports})(b1)),b1.exports}var S1,ZL;function iN(){if(ZL)return S1;ZL=1,S1=e;var r=Object.prototype.toString;function e(t){if(!t)return!1;var n=r.call(t);return n==="[object Function]"||typeof t=="function"&&n!=="[object RegExp]"||typeof window<"u"&&(t===window.setTimeout||t===window.alert||t===window.confirm||t===window.prompt)}return S1}var T1,eO;function dse(){if(eO)return T1;eO=1;function r(i,s){var a=typeof Symbol<"u"&&i[Symbol.iterator]||i["@@iterator"];if(a)return(a=a.call(i)).next.bind(a);if(Array.isArray(i)||(a=e(i))||s){a&&(i=a);var o=0;return function(){return o>=i.length?{done:!0}:{done:!1,value:i[o++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function e(i,s){if(i){if(typeof i=="string")return t(i,s);var a=Object.prototype.toString.call(i).slice(8,-1);if(a==="Object"&&i.constructor&&(a=i.constructor.name),a==="Map"||a==="Set")return Array.from(i);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return t(i,s)}}function t(i,s){(s==null||s>i.length)&&(s=i.length);for(var a=0,o=new Array(s);a<s;a++)o[a]=i[a];return o}var n=(function(){function i(){this.typeToInterceptorsMap_=new Map,this.enabled_=!1}var s=i.prototype;return s.getIsEnabled=function(){return this.enabled_},s.enable=function(){this.enabled_=!0},s.disable=function(){this.enabled_=!1},s.reset=function(){this.typeToInterceptorsMap_=new Map,this.enabled_=!1},s.addInterceptor=function(o,l){this.typeToInterceptorsMap_.has(o)||this.typeToInterceptorsMap_.set(o,new Set);var u=this.typeToInterceptorsMap_.get(o);return u.has(l)?!1:(u.add(l),!0)},s.removeInterceptor=function(o,l){var u=this.typeToInterceptorsMap_.get(o);return u&&u.has(l)?(u.delete(l),!0):!1},s.clearInterceptorsByType=function(o){var l=this.typeToInterceptorsMap_.get(o);return l?(this.typeToInterceptorsMap_.delete(o),this.typeToInterceptorsMap_.set(o,new Set),!0):!1},s.clear=function(){return this.typeToInterceptorsMap_.size?(this.typeToInterceptorsMap_=new Map,!0):!1},s.getForType=function(o){return this.typeToInterceptorsMap_.get(o)||new Set},s.execute=function(o,l){for(var u=this.getForType(o),c=r(u),h;!(h=c()).done;){var m=h.value;try{l=m(l)}catch{}}return l},i})();return T1=n,T1}var C1,tO;function hse(){if(tO)return C1;tO=1;var r=(function(){function t(){this.maxAttempts_=1,this.delayFactor_=.1,this.fuzzFactor_=.1,this.initialDelay_=1e3,this.enabled_=!1}var n=t.prototype;return n.getIsEnabled=function(){return this.enabled_},n.enable=function(){this.enabled_=!0},n.disable=function(){this.enabled_=!1},n.reset=function(){this.maxAttempts_=1,this.delayFactor_=.1,this.fuzzFactor_=.1,this.initialDelay_=1e3,this.enabled_=!1},n.getMaxAttempts=function(){return this.maxAttempts_},n.setMaxAttempts=function(s){this.maxAttempts_=s},n.getDelayFactor=function(){return this.delayFactor_},n.setDelayFactor=function(s){this.delayFactor_=s},n.getFuzzFactor=function(){return this.fuzzFactor_},n.setFuzzFactor=function(s){this.fuzzFactor_=s},n.getInitialDelay=function(){return this.initialDelay_},n.setInitialDelay=function(s){this.initialDelay_=s},n.createRetry=function(s){var a=s===void 0?{}:s,o=a.maxAttempts,l=a.delayFactor,u=a.fuzzFactor,c=a.initialDelay;return new e({maxAttempts:o||this.maxAttempts_,delayFactor:l||this.delayFactor_,fuzzFactor:u||this.fuzzFactor_,initialDelay:c||this.initialDelay_})},t})(),e=(function(){function t(i){this.maxAttempts_=i.maxAttempts,this.delayFactor_=i.delayFactor,this.fuzzFactor_=i.fuzzFactor,this.currentDelay_=i.initialDelay,this.currentAttempt_=1}var n=t.prototype;return n.moveToNextAttempt=function(){this.currentAttempt_++;var s=this.currentDelay_*this.delayFactor_;this.currentDelay_=this.currentDelay_+s},n.shouldRetry=function(){return this.currentAttempt_<this.maxAttempts_},n.getCurrentDelay=function(){return this.currentDelay_},n.getCurrentMinPossibleDelay=function(){return(1-this.fuzzFactor_)*this.currentDelay_},n.getCurrentMaxPossibleDelay=function(){return(1+this.fuzzFactor_)*this.currentDelay_},n.getCurrentFuzzedDelay=function(){var s=this.getCurrentMinPossibleDelay(),a=this.getCurrentMaxPossibleDelay();return s+Math.random()*(a-s)},t})();return C1=r,C1}var w1,rO;function fse(){if(rO)return w1;rO=1;var r=Xp(),e=function(i,s){return s===void 0&&(s=!1),function(a,o,l){if(a){i(a);return}if(o.statusCode>=400&&o.statusCode<=599){var u=l;if(s)if(r.TextDecoder){var c=t(o.headers&&o.headers["content-type"]);try{u=new TextDecoder(c).decode(l)}catch{}}else u=String.fromCharCode.apply(null,new Uint8Array(l));i({cause:u});return}i(null,l)}};function t(n){return n===void 0&&(n=""),n.toLowerCase().split(";").reduce(function(i,s){var a=s.split("="),o=a[0],l=a[1];return o.trim()==="charset"?l.trim():i},"utf-8")}return w1=e,w1}var nO;function pse(){if(nO)return Qv.exports;nO=1;var r=Xp(),e=nN(),t=iN(),n=dse(),i=hse();u.httpHandler=fse(),u.requestInterceptorsStorage=new n,u.responseInterceptorsStorage=new n,u.retryManager=new i;/**
 * @license
 * slighly modified parse-headers 2.0.2 <https://github.com/kesla/parse-headers/>
 * Copyright (c) 2014 David Bjrklund
 * Available under the MIT license
 * <https://github.com/kesla/parse-headers/blob/master/LICENCE>
 */var s=function(y){var v={};return y&&y.trim().split(`
`).forEach(function(x){var w=x.indexOf(":"),E=x.slice(0,w).trim().toLowerCase(),D=x.slice(w+1).trim();typeof v[E]>"u"?v[E]=D:Array.isArray(v[E])?v[E].push(D):v[E]=[v[E],D]}),v};Qv.exports=u,Qv.exports.default=u,u.XMLHttpRequest=r.XMLHttpRequest||m,u.XDomainRequest="withCredentials"in new u.XMLHttpRequest?u.XMLHttpRequest:r.XDomainRequest,a(["get","put","post","patch","head","delete"],function(g){u[g==="delete"?"del":g]=function(y,v,x){return v=l(y,v,x),v.method=g.toUpperCase(),c(v)}});function a(g,y){for(var v=0;v<g.length;v++)y(g[v])}function o(g){for(var y in g)if(g.hasOwnProperty(y))return!1;return!0}function l(g,y,v){var x=g;return t(y)?(v=y,typeof g=="string"&&(x={uri:g})):x=e({},y,{uri:g}),x.callback=v,x}function u(g,y,v){return y=l(g,y,v),c(y)}function c(g){if(typeof g.callback>"u")throw new Error("callback argument missing");if(g.requestType&&u.requestInterceptorsStorage.getIsEnabled()){var y={uri:g.uri||g.url,headers:g.headers||{},body:g.body,metadata:g.metadata||{},retry:g.retry,timeout:g.timeout},v=u.requestInterceptorsStorage.execute(g.requestType,y);g.uri=v.uri,g.headers=v.headers,g.body=v.body,g.metadata=v.metadata,g.retry=v.retry,g.timeout=v.timeout}var x=!1,w=function(ae,ne,ue){x||(x=!0,g.callback(ae,ne,ue))};function E(){L.readyState===4&&!u.responseInterceptorsStorage.getIsEnabled()&&setTimeout(A,0)}function D(){var he=void 0;if(L.response?he=L.response:he=L.responseText||h(L),Q)try{he=JSON.parse(he)}catch{}return he}function I(he){if(clearTimeout(ie),clearTimeout(g.retryTimeout),he instanceof Error||(he=new Error(""+(he||"Unknown XMLHttpRequest Error"))),he.statusCode=0,!U&&u.retryManager.getIsEnabled()&&g.retry&&g.retry.shouldRetry()){g.retryTimeout=setTimeout(function(){g.retry.moveToNextAttempt(),g.xhr=L,c(g)},g.retry.getCurrentFuzzedDelay());return}if(g.requestType&&u.responseInterceptorsStorage.getIsEnabled()){var ae={headers:le.headers||{},body:le.body,responseUrl:L.responseURL,responseType:L.responseType},ne=u.responseInterceptorsStorage.execute(g.requestType,ae);le.body=ne.body,le.headers=ne.headers}return w(he,le)}function A(){if(!U){var he;clearTimeout(ie),clearTimeout(g.retryTimeout),g.useXDR&&L.status===void 0?he=200:he=L.status===1223?204:L.status;var ae=le,ne=null;if(he!==0?(ae={body:D(),statusCode:he,method:k,headers:{},url:B,rawRequest:L},L.getAllResponseHeaders&&(ae.headers=s(L.getAllResponseHeaders()))):ne=new Error("Internal XMLHttpRequest Error"),g.requestType&&u.responseInterceptorsStorage.getIsEnabled()){var ue={headers:ae.headers||{},body:ae.body,responseUrl:L.responseURL,responseType:L.responseType},ee=u.responseInterceptorsStorage.execute(g.requestType,ue);ae.body=ee.body,ae.headers=ee.headers}return w(ne,ae,ae.body)}}var L=g.xhr||null;L||(g.cors||g.useXDR?L=new u.XDomainRequest:L=new u.XMLHttpRequest);var N,U,B=L.url=g.uri||g.url,k=L.method=g.method||"GET",H=g.body||g.data,q=L.headers=g.headers||{},V=!!g.sync,Q=!1,ie,le={body:void 0,headers:{},statusCode:0,method:k,url:B,rawRequest:L};if("json"in g&&g.json!==!1&&(Q=!0,q.accept||q.Accept||(q.Accept="application/json"),k!=="GET"&&k!=="HEAD"&&(q["content-type"]||q["Content-Type"]||(q["Content-Type"]="application/json"),H=JSON.stringify(g.json===!0?H:g.json))),L.onreadystatechange=E,L.onload=A,L.onerror=I,L.onprogress=function(){},L.onabort=function(){U=!0,clearTimeout(g.retryTimeout)},L.ontimeout=I,L.open(k,B,!V,g.username,g.password),V||(L.withCredentials=!!g.withCredentials),!V&&g.timeout>0&&(ie=setTimeout(function(){if(!U){U=!0,L.abort("timeout");var he=new Error("XMLHttpRequest timeout");he.code="ETIMEDOUT",I(he)}},g.timeout)),L.setRequestHeader)for(N in q)q.hasOwnProperty(N)&&L.setRequestHeader(N,q[N]);else if(g.headers&&!o(g.headers))throw new Error("Headers cannot be set on an XDomainRequest object");return"responseType"in g&&(L.responseType=g.responseType),"beforeSend"in g&&typeof g.beforeSend=="function"&&g.beforeSend(L),L.send(H||null),L}function h(g){try{if(g.responseType==="document")return g.responseXML;var y=g.responseXML&&g.responseXML.documentElement.nodeName==="parsererror";if(g.responseType===""&&!y)return g.responseXML}catch{}return null}function m(){}return Qv.exports}var mse=pse();const sN=ua(mse);var E1={exports:{}},k1,iO;function gse(){if(iO)return k1;iO=1;var r=rN(),e=Object.create||(function(){function B(){}return function(k){if(arguments.length!==1)throw new Error("Object.create shim only accepts one parameter.");return B.prototype=k,new B}})();function t(B,k){this.name="ParsingError",this.code=B.code,this.message=k||B.message}t.prototype=e(Error.prototype),t.prototype.constructor=t,t.Errors={BadSignature:{code:0,message:"Malformed WebVTT signature."},BadTimeStamp:{code:1,message:"Malformed time stamp."}};function n(B){function k(q,V,Q,ie){return(q|0)*3600+(V|0)*60+(Q|0)+(ie|0)/1e3}var H=B.match(/^(\d+):(\d{1,2})(:\d{1,2})?\.(\d{3})/);return H?H[3]?k(H[1],H[2],H[3].replace(":",""),H[4]):H[1]>59?k(H[1],H[2],0,H[4]):k(0,H[1],H[2],H[4]):null}function i(){this.values=e(null)}i.prototype={set:function(B,k){!this.get(B)&&k!==""&&(this.values[B]=k)},get:function(B,k,H){return H?this.has(B)?this.values[B]:k[H]:this.has(B)?this.values[B]:k},has:function(B){return B in this.values},alt:function(B,k,H){for(var q=0;q<H.length;++q)if(k===H[q]){this.set(B,k);break}},integer:function(B,k){/^-?\d+$/.test(k)&&this.set(B,parseInt(k,10))},percent:function(B,k){return k.match(/^([\d]{1,3})(\.[\d]*)?%$/)&&(k=parseFloat(k),k>=0&&k<=100)?(this.set(B,k),!0):!1}};function s(B,k,H,q){var V=q?B.split(q):[B];for(var Q in V)if(typeof V[Q]=="string"){var ie=V[Q].split(H);if(ie.length===2){var le=ie[0].trim(),he=ie[1].trim();k(le,he)}}}function a(B,k,H){var q=B;function V(){var le=n(B);if(le===null)throw new t(t.Errors.BadTimeStamp,"Malformed timestamp: "+q);return B=B.replace(/^[^\sa-zA-Z-]+/,""),le}function Q(le,he){var ae=new i;s(le,function(ne,ue){switch(ne){case"region":for(var ee=H.length-1;ee>=0;ee--)if(H[ee].id===ue){ae.set(ne,H[ee].region);break}break;case"vertical":ae.alt(ne,ue,["rl","lr"]);break;case"line":var pe=ue.split(","),me=pe[0];ae.integer(ne,me),ae.percent(ne,me)&&ae.set("snapToLines",!1),ae.alt(ne,me,["auto"]),pe.length===2&&ae.alt("lineAlign",pe[1],["start","center","end"]);break;case"position":pe=ue.split(","),ae.percent(ne,pe[0]),pe.length===2&&ae.alt("positionAlign",pe[1],["start","center","end"]);break;case"size":ae.percent(ne,ue);break;case"align":ae.alt(ne,ue,["start","center","end","left","right"]);break}},/:/,/\s/),he.region=ae.get("region",null),he.vertical=ae.get("vertical","");try{he.line=ae.get("line","auto")}catch{}he.lineAlign=ae.get("lineAlign","start"),he.snapToLines=ae.get("snapToLines",!0),he.size=ae.get("size",100);try{he.align=ae.get("align","center")}catch{he.align=ae.get("align","middle")}try{he.position=ae.get("position","auto")}catch{he.position=ae.get("position",{start:0,left:0,center:50,middle:50,end:100,right:100},he.align)}he.positionAlign=ae.get("positionAlign",{start:"start",left:"start",center:"center",middle:"center",end:"end",right:"end"},he.align)}function ie(){B=B.replace(/^\s+/,"")}if(ie(),k.startTime=V(),ie(),B.substr(0,3)!=="-->")throw new t(t.Errors.BadTimeStamp,"Malformed time stamp (time stamps must be separated by '-->'): "+q);B=B.substr(3),ie(),k.endTime=V(),ie(),Q(B,k)}var o=r.createElement&&r.createElement("textarea"),l={c:"span",i:"i",b:"b",u:"u",ruby:"ruby",rt:"rt",v:"span",lang:"span"},u={white:"rgba(255,255,255,1)",lime:"rgba(0,255,0,1)",cyan:"rgba(0,255,255,1)",red:"rgba(255,0,0,1)",yellow:"rgba(255,255,0,1)",magenta:"rgba(255,0,255,1)",blue:"rgba(0,0,255,1)",black:"rgba(0,0,0,1)"},c={v:"title",lang:"lang"},h={rt:"ruby"};function m(B,k){function H(){if(!k)return null;function me(Be){return k=k.substr(Be.length),Be}var xe=k.match(/^([^<]*)(<[^>]*>?)?/);return me(xe[1]?xe[1]:xe[2])}function q(me){return o.innerHTML=me,me=o.textContent,o.textContent="",me}function V(me,xe){return!h[xe.localName]||h[xe.localName]===me.localName}function Q(me,xe){var Be=l[me];if(!Be)return null;var Oe=B.document.createElement(Be),dt=c[me];return dt&&xe&&(Oe[dt]=xe.trim()),Oe}for(var ie=B.document.createElement("div"),le=ie,he,ae=[];(he=H())!==null;){if(he[0]==="<"){if(he[1]==="/"){ae.length&&ae[ae.length-1]===he.substr(2).replace(">","")&&(ae.pop(),le=le.parentNode);continue}var ne=n(he.substr(1,he.length-2)),ue;if(ne){ue=B.document.createProcessingInstruction("timestamp",ne),le.appendChild(ue);continue}var ee=he.match(/^<([^.\s/0-9>]+)(\.[^\s\\>]+)?([^>\\]+)?(\\?)>?$/);if(!ee||(ue=Q(ee[1],ee[3]),!ue)||!V(le,ue))continue;if(ee[2]){var pe=ee[2].split(".");pe.forEach(function(me){var xe=/^bg_/.test(me),Be=xe?me.slice(3):me;if(u.hasOwnProperty(Be)){var Oe=xe?"background-color":"color",dt=u[Be];ue.style[Oe]=dt}}),ue.className=pe.join(" ")}ae.push(ee[1]),le.appendChild(ue),le=ue;continue}le.appendChild(B.document.createTextNode(q(he)))}return ie}var g=[[1470,1470],[1472,1472],[1475,1475],[1478,1478],[1488,1514],[1520,1524],[1544,1544],[1547,1547],[1549,1549],[1563,1563],[1566,1610],[1645,1647],[1649,1749],[1765,1766],[1774,1775],[1786,1805],[1807,1808],[1810,1839],[1869,1957],[1969,1969],[1984,2026],[2036,2037],[2042,2042],[2048,2069],[2074,2074],[2084,2084],[2088,2088],[2096,2110],[2112,2136],[2142,2142],[2208,2208],[2210,2220],[8207,8207],[64285,64285],[64287,64296],[64298,64310],[64312,64316],[64318,64318],[64320,64321],[64323,64324],[64326,64449],[64467,64829],[64848,64911],[64914,64967],[65008,65020],[65136,65140],[65142,65276],[67584,67589],[67592,67592],[67594,67637],[67639,67640],[67644,67644],[67647,67669],[67671,67679],[67840,67867],[67872,67897],[67903,67903],[67968,68023],[68030,68031],[68096,68096],[68112,68115],[68117,68119],[68121,68147],[68160,68167],[68176,68184],[68192,68223],[68352,68405],[68416,68437],[68440,68466],[68472,68479],[68608,68680],[126464,126467],[126469,126495],[126497,126498],[126500,126500],[126503,126503],[126505,126514],[126516,126519],[126521,126521],[126523,126523],[126530,126530],[126535,126535],[126537,126537],[126539,126539],[126541,126543],[126545,126546],[126548,126548],[126551,126551],[126553,126553],[126555,126555],[126557,126557],[126559,126559],[126561,126562],[126564,126564],[126567,126570],[126572,126578],[126580,126583],[126585,126588],[126590,126590],[126592,126601],[126603,126619],[126625,126627],[126629,126633],[126635,126651],[1114109,1114109]];function y(B){for(var k=0;k<g.length;k++){var H=g[k];if(B>=H[0]&&B<=H[1])return!0}return!1}function v(B){var k=[],H="",q;if(!B||!B.childNodes)return"ltr";function V(le,he){for(var ae=he.childNodes.length-1;ae>=0;ae--)le.push(he.childNodes[ae])}function Q(le){if(!le||!le.length)return null;var he=le.pop(),ae=he.textContent||he.innerText;if(ae){var ne=ae.match(/^.*(\n|\r)/);return ne?(le.length=0,ne[0]):ae}if(he.tagName==="ruby")return Q(le);if(he.childNodes)return V(le,he),Q(le)}for(V(k,B);H=Q(k);)for(var ie=0;ie<H.length;ie++)if(q=H.charCodeAt(ie),y(q))return"rtl";return"ltr"}function x(B){if(typeof B.line=="number"&&(B.snapToLines||B.line>=0&&B.line<=100))return B.line;if(!B.track||!B.track.textTrackList||!B.track.textTrackList.mediaElement)return-1;for(var k=B.track,H=k.textTrackList,q=0,V=0;V<H.length&&H[V]!==k;V++)H[V].mode==="showing"&&q++;return++q*-1}function w(){}w.prototype.applyStyles=function(B,k){k=k||this.div;for(var H in B)B.hasOwnProperty(H)&&(k.style[H]=B[H])},w.prototype.formatStyle=function(B,k){return B===0?0:B+k};function E(B,k,H){w.call(this),this.cue=k,this.cueDiv=m(B,k.text);var q={color:"rgba(255, 255, 255, 1)",backgroundColor:"rgba(0, 0, 0, 0.8)",position:"relative",left:0,right:0,top:0,bottom:0,display:"inline",writingMode:k.vertical===""?"horizontal-tb":k.vertical==="lr"?"vertical-lr":"vertical-rl",unicodeBidi:"plaintext"};this.applyStyles(q,this.cueDiv),this.div=B.document.createElement("div"),q={direction:v(this.cueDiv),writingMode:k.vertical===""?"horizontal-tb":k.vertical==="lr"?"vertical-lr":"vertical-rl",unicodeBidi:"plaintext",textAlign:k.align==="middle"?"center":k.align,font:H.font,whiteSpace:"pre-line",position:"absolute"},this.applyStyles(q),this.div.appendChild(this.cueDiv);var V=0;switch(k.positionAlign){case"start":case"line-left":V=k.position;break;case"center":V=k.position-k.size/2;break;case"end":case"line-right":V=k.position-k.size;break}k.vertical===""?this.applyStyles({left:this.formatStyle(V,"%"),width:this.formatStyle(k.size,"%")}):this.applyStyles({top:this.formatStyle(V,"%"),height:this.formatStyle(k.size,"%")}),this.move=function(Q){this.applyStyles({top:this.formatStyle(Q.top,"px"),bottom:this.formatStyle(Q.bottom,"px"),left:this.formatStyle(Q.left,"px"),right:this.formatStyle(Q.right,"px"),height:this.formatStyle(Q.height,"px"),width:this.formatStyle(Q.width,"px")})}}E.prototype=e(w.prototype),E.prototype.constructor=E;function D(B){var k,H,q,V;if(B.div){H=B.div.offsetHeight,q=B.div.offsetWidth,V=B.div.offsetTop;var Q=(Q=B.div.childNodes)&&(Q=Q[0])&&Q.getClientRects&&Q.getClientRects();B=B.div.getBoundingClientRect(),k=Q?Math.max(Q[0]&&Q[0].height||0,B.height/Q.length):0}this.left=B.left,this.right=B.right,this.top=B.top||V,this.height=B.height||H,this.bottom=B.bottom||V+(B.height||H),this.width=B.width||q,this.lineHeight=k!==void 0?k:B.lineHeight}D.prototype.move=function(B,k){switch(k=k!==void 0?k:this.lineHeight,B){case"+x":this.left+=k,this.right+=k;break;case"-x":this.left-=k,this.right-=k;break;case"+y":this.top+=k,this.bottom+=k;break;case"-y":this.top-=k,this.bottom-=k;break}},D.prototype.overlaps=function(B){return this.left<B.right&&this.right>B.left&&this.top<B.bottom&&this.bottom>B.top},D.prototype.overlapsAny=function(B){for(var k=0;k<B.length;k++)if(this.overlaps(B[k]))return!0;return!1},D.prototype.within=function(B){return this.top>=B.top&&this.bottom<=B.bottom&&this.left>=B.left&&this.right<=B.right},D.prototype.overlapsOppositeAxis=function(B,k){switch(k){case"+x":return this.left<B.left;case"-x":return this.right>B.right;case"+y":return this.top<B.top;case"-y":return this.bottom>B.bottom}},D.prototype.intersectPercentage=function(B){var k=Math.max(0,Math.min(this.right,B.right)-Math.max(this.left,B.left)),H=Math.max(0,Math.min(this.bottom,B.bottom)-Math.max(this.top,B.top)),q=k*H;return q/(this.height*this.width)},D.prototype.toCSSCompatValues=function(B){return{top:this.top-B.top,bottom:B.bottom-this.bottom,left:this.left-B.left,right:B.right-this.right,height:this.height,width:this.width}},D.getSimpleBoxPosition=function(B){var k=B.div?B.div.offsetHeight:B.tagName?B.offsetHeight:0,H=B.div?B.div.offsetWidth:B.tagName?B.offsetWidth:0,q=B.div?B.div.offsetTop:B.tagName?B.offsetTop:0;B=B.div?B.div.getBoundingClientRect():B.tagName?B.getBoundingClientRect():B;var V={left:B.left,right:B.right,top:B.top||q,height:B.height||k,bottom:B.bottom||q+(B.height||k),width:B.width||H};return V};function I(B,k,H,q){function V(Be,Oe){for(var dt,Ke=new D(Be),_t=1,Ze=0;Ze<Oe.length;Ze++){for(;Be.overlapsOppositeAxis(H,Oe[Ze])||Be.within(H)&&Be.overlapsAny(q);)Be.move(Oe[Ze]);if(Be.within(H))return Be;var Ot=Be.intersectPercentage(H);_t>Ot&&(dt=new D(Be),_t=Ot),Be=new D(Ke)}return dt||Ke}var Q=new D(k),ie=k.cue,le=x(ie),he=[];if(ie.snapToLines){var ae;switch(ie.vertical){case"":he=["+y","-y"],ae="height";break;case"rl":he=["+x","-x"],ae="width";break;case"lr":he=["-x","+x"],ae="width";break}var ne=Q.lineHeight,ue=ne*Math.round(le),ee=H[ae]+ne,pe=he[0];Math.abs(ue)>ee&&(ue=ue<0?-1:1,ue*=Math.ceil(ee/ne)*ne),le<0&&(ue+=ie.vertical===""?H.height:H.width,he=he.reverse()),Q.move(pe,ue)}else{var me=Q.lineHeight/H.height*100;switch(ie.lineAlign){case"center":le-=me/2;break;case"end":le-=me;break}switch(ie.vertical){case"":k.applyStyles({top:k.formatStyle(le,"%")});break;case"rl":k.applyStyles({left:k.formatStyle(le,"%")});break;case"lr":k.applyStyles({right:k.formatStyle(le,"%")});break}he=["+y","-x","+x","-y"],Q=new D(k)}var xe=V(Q,he);k.move(xe.toCSSCompatValues(H))}function A(){}A.StringDecoder=function(){return{decode:function(B){if(!B)return"";if(typeof B!="string")throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(B))}}},A.convertCueToDOMTree=function(B,k){return!B||!k?null:m(B,k)};var L=.05,N="sans-serif",U="1.5%";return A.processCues=function(B,k,H){if(!B||!k||!H)return null;for(;H.firstChild;)H.removeChild(H.firstChild);var q=B.document.createElement("div");q.style.position="absolute",q.style.left="0",q.style.right="0",q.style.top="0",q.style.bottom="0",q.style.margin=U,H.appendChild(q);function V(ne){for(var ue=0;ue<ne.length;ue++)if(ne[ue].hasBeenReset||!ne[ue].displayState)return!0;return!1}if(!V(k)){for(var Q=0;Q<k.length;Q++)q.appendChild(k[Q].displayState);return}var ie=[],le=D.getSimpleBoxPosition(q),he=Math.round(le.height*L*100)/100,ae={font:he+"px "+N};(function(){for(var ne,ue,ee=0;ee<k.length;ee++)ue=k[ee],ne=new E(B,ue,ae),q.appendChild(ne.div),I(B,ne,le,ie),ue.displayState=ne.div,ie.push(D.getSimpleBoxPosition(ne))})()},A.Parser=function(B,k,H){H||(H=k,k={}),k||(k={}),this.window=B,this.vttjs=k,this.state="INITIAL",this.buffer="",this.decoder=H||new TextDecoder("utf8"),this.regionList=[]},A.Parser.prototype={reportOrThrowError:function(B){if(B instanceof t)this.onparsingerror&&this.onparsingerror(B);else throw B},parse:function(B){var k=this;B&&(k.buffer+=k.decoder.decode(B,{stream:!0}));function H(){for(var ne=k.buffer,ue=0;ue<ne.length&&ne[ue]!=="\r"&&ne[ue]!==`
`;)++ue;var ee=ne.substr(0,ue);return ne[ue]==="\r"&&++ue,ne[ue]===`
`&&++ue,k.buffer=ne.substr(ue),ee}function q(ne){var ue=new i;if(s(ne,function(pe,me){switch(pe){case"id":ue.set(pe,me);break;case"width":ue.percent(pe,me);break;case"lines":ue.integer(pe,me);break;case"regionanchor":case"viewportanchor":var xe=me.split(",");if(xe.length!==2)break;var Be=new i;if(Be.percent("x",xe[0]),Be.percent("y",xe[1]),!Be.has("x")||!Be.has("y"))break;ue.set(pe+"X",Be.get("x")),ue.set(pe+"Y",Be.get("y"));break;case"scroll":ue.alt(pe,me,["up"]);break}},/=/,/\s/),ue.has("id")){var ee=new(k.vttjs.VTTRegion||k.window.VTTRegion);ee.width=ue.get("width",100),ee.lines=ue.get("lines",3),ee.regionAnchorX=ue.get("regionanchorX",0),ee.regionAnchorY=ue.get("regionanchorY",100),ee.viewportAnchorX=ue.get("viewportanchorX",0),ee.viewportAnchorY=ue.get("viewportanchorY",100),ee.scroll=ue.get("scroll",""),k.onregion&&k.onregion(ee),k.regionList.push({id:ue.get("id"),region:ee})}}function V(ne){var ue=new i;s(ne,function(ee,pe){switch(ee){case"MPEGT":ue.integer(ee+"S",pe);break;case"LOCA":ue.set(ee+"L",n(pe));break}},/[^\d]:/,/,/),k.ontimestampmap&&k.ontimestampmap({MPEGTS:ue.get("MPEGTS"),LOCAL:ue.get("LOCAL")})}function Q(ne){ne.match(/X-TIMESTAMP-MAP/)?s(ne,function(ue,ee){switch(ue){case"X-TIMESTAMP-MAP":V(ee);break}},/=/):s(ne,function(ue,ee){switch(ue){case"Region":q(ee);break}},/:/)}try{var ie;if(k.state==="INITIAL"){if(!/\r\n|\n/.test(k.buffer))return this;ie=H();var le=ie.match(/^WEBVTT([ \t].*)?$/);if(!le||!le[0])throw new t(t.Errors.BadSignature);k.state="HEADER"}for(var he=!1;k.buffer;){if(!/\r\n|\n/.test(k.buffer))return this;switch(he?he=!1:ie=H(),k.state){case"HEADER":/:/.test(ie)?Q(ie):ie||(k.state="ID");continue;case"NOTE":ie||(k.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(ie)){k.state="NOTE";break}if(!ie)continue;k.cue=new(k.vttjs.VTTCue||k.window.VTTCue)(0,0,"");try{k.cue.align="center"}catch{k.cue.align="middle"}if(k.state="CUE",ie.indexOf("-->")===-1){k.cue.id=ie;continue}case"CUE":try{a(ie,k.cue,k.regionList)}catch(ne){k.reportOrThrowError(ne),k.cue=null,k.state="BADCUE";continue}k.state="CUETEXT";continue;case"CUETEXT":var ae=ie.indexOf("-->")!==-1;if(!ie||ae&&(he=!0)){k.oncue&&k.oncue(k.cue),k.cue=null,k.state="ID";continue}k.cue.text&&(k.cue.text+=`
`),k.cue.text+=ie.replace(/\u2028/g,`
`).replace(/u2029/g,`
`);continue;case"BADCUE":ie||(k.state="ID");continue}}}catch(ne){k.reportOrThrowError(ne),k.state==="CUETEXT"&&k.cue&&k.oncue&&k.oncue(k.cue),k.cue=null,k.state=k.state==="INITIAL"?"BADWEBVTT":"BADCUE"}return this},flush:function(){var B=this;try{if(B.buffer+=B.decoder.decode(),(B.cue||B.state==="HEADER")&&(B.buffer+=`

`,B.parse()),B.state==="INITIAL")throw new t(t.Errors.BadSignature)}catch(k){B.reportOrThrowError(k)}return B.onflush&&B.onflush(),this}},k1=A,k1}var A1,sO;function vse(){if(sO)return A1;sO=1;var r="auto",e={"":1,lr:1,rl:1},t={start:1,center:1,end:1,left:1,right:1,auto:1,"line-left":1,"line-right":1};function n(a){if(typeof a!="string")return!1;var o=e[a.toLowerCase()];return o?a.toLowerCase():!1}function i(a){if(typeof a!="string")return!1;var o=t[a.toLowerCase()];return o?a.toLowerCase():!1}function s(a,o,l){this.hasBeenReset=!1;var u="",c=!1,h=a,m=o,g=l,y=null,v="",x=!0,w="auto",E="start",D="auto",I="auto",A=100,L="center";Object.defineProperties(this,{id:{enumerable:!0,get:function(){return u},set:function(N){u=""+N}},pauseOnExit:{enumerable:!0,get:function(){return c},set:function(N){c=!!N}},startTime:{enumerable:!0,get:function(){return h},set:function(N){if(typeof N!="number")throw new TypeError("Start time must be set to a number.");h=N,this.hasBeenReset=!0}},endTime:{enumerable:!0,get:function(){return m},set:function(N){if(typeof N!="number")throw new TypeError("End time must be set to a number.");m=N,this.hasBeenReset=!0}},text:{enumerable:!0,get:function(){return g},set:function(N){g=""+N,this.hasBeenReset=!0}},region:{enumerable:!0,get:function(){return y},set:function(N){y=N,this.hasBeenReset=!0}},vertical:{enumerable:!0,get:function(){return v},set:function(N){var U=n(N);if(U===!1)throw new SyntaxError("Vertical: an invalid or illegal direction string was specified.");v=U,this.hasBeenReset=!0}},snapToLines:{enumerable:!0,get:function(){return x},set:function(N){x=!!N,this.hasBeenReset=!0}},line:{enumerable:!0,get:function(){return w},set:function(N){if(typeof N!="number"&&N!==r)throw new SyntaxError("Line: an invalid number or illegal string was specified.");w=N,this.hasBeenReset=!0}},lineAlign:{enumerable:!0,get:function(){return E},set:function(N){var U=i(N);U?(E=U,this.hasBeenReset=!0):console.warn("lineAlign: an invalid or illegal string was specified.")}},position:{enumerable:!0,get:function(){return D},set:function(N){if(N<0||N>100)throw new Error("Position must be between 0 and 100.");D=N,this.hasBeenReset=!0}},positionAlign:{enumerable:!0,get:function(){return I},set:function(N){var U=i(N);U?(I=U,this.hasBeenReset=!0):console.warn("positionAlign: an invalid or illegal string was specified.")}},size:{enumerable:!0,get:function(){return A},set:function(N){if(N<0||N>100)throw new Error("Size must be between 0 and 100.");A=N,this.hasBeenReset=!0}},align:{enumerable:!0,get:function(){return L},set:function(N){var U=i(N);if(!U)throw new SyntaxError("align: an invalid or illegal alignment string was specified.");L=U,this.hasBeenReset=!0}}}),this.displayState=void 0}return s.prototype.getCueAsHTML=function(){return WebVTT.convertCueToDOMTree(window,this.text)},A1=s,A1}var D1,aO;function yse(){if(aO)return D1;aO=1;var r={"":!0,up:!0};function e(i){if(typeof i!="string")return!1;var s=r[i.toLowerCase()];return s?i.toLowerCase():!1}function t(i){return typeof i=="number"&&i>=0&&i<=100}function n(){var i=100,s=3,a=0,o=100,l=0,u=100,c="";Object.defineProperties(this,{width:{enumerable:!0,get:function(){return i},set:function(h){if(!t(h))throw new Error("Width must be between 0 and 100.");i=h}},lines:{enumerable:!0,get:function(){return s},set:function(h){if(typeof h!="number")throw new TypeError("Lines must be set to a number.");s=h}},regionAnchorY:{enumerable:!0,get:function(){return o},set:function(h){if(!t(h))throw new Error("RegionAnchorX must be between 0 and 100.");o=h}},regionAnchorX:{enumerable:!0,get:function(){return a},set:function(h){if(!t(h))throw new Error("RegionAnchorY must be between 0 and 100.");a=h}},viewportAnchorY:{enumerable:!0,get:function(){return u},set:function(h){if(!t(h))throw new Error("ViewportAnchorY must be between 0 and 100.");u=h}},viewportAnchorX:{enumerable:!0,get:function(){return l},set:function(h){if(!t(h))throw new Error("ViewportAnchorX must be between 0 and 100.");l=h}},scroll:{enumerable:!0,get:function(){return c},set:function(h){var m=e(h);m===!1?console.warn("Scroll: an invalid or illegal string was specified."):c=m}}})}return D1=n,D1}var oO;function _se(){if(oO)return E1.exports;oO=1;var r=Xp(),e=E1.exports={WebVTT:gse(),VTTCue:vse(),VTTRegion:yse()};r.vttjs=e,r.WebVTT=e.WebVTT;var t=e.VTTCue,n=e.VTTRegion,i=r.VTTCue,s=r.VTTRegion;return e.shim=function(){r.VTTCue=t,r.VTTRegion=n},e.restore=function(){r.VTTCue=i,r.VTTRegion=s},r.VTTCue||e.shim(),E1.exports}var xse=_se();const ex=ua(xse);var lO="https://example.com",Pg=function(e,t){if(/^[a-z]+:/i.test(t))return t;/^data:/.test(e)&&(e=X.location&&X.location.href||"");var n=/^\/\//.test(e),i=!X.location&&!/\/\//i.test(e);e=new X.URL(e,X.location||lO);var s=new URL(t,e);return i?s.href.slice(lO.length):n?s.href.slice(s.protocol.length):s.href},N2=(function(){function r(){this.listeners={}}var e=r.prototype;return e.on=function(n,i){this.listeners[n]||(this.listeners[n]=[]),this.listeners[n].push(i)},e.off=function(n,i){if(!this.listeners[n])return!1;var s=this.listeners[n].indexOf(i);return this.listeners[n]=this.listeners[n].slice(0),this.listeners[n].splice(s,1),s>-1},e.trigger=function(n){var i=this.listeners[n];if(i)if(arguments.length===2)for(var s=i.length,a=0;a<s;++a)i[a].call(this,arguments[1]);else for(var o=Array.prototype.slice.call(arguments,1),l=i.length,u=0;u<l;++u)i[u].apply(this,o)},e.dispose=function(){this.listeners={}},e.pipe=function(n){this.on("data",function(i){n.push(i)})},r})(),bse=function(e){return X.atob?X.atob(e):Buffer.from(e,"base64").toString("binary")};function aN(r){for(var e=bse(r),t=new Uint8Array(e.length),n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}/*! @name m3u8-parser @version 7.2.0 @license Apache-2.0 */let Sse=class extends N2{constructor(){super(),this.buffer=""}push(e){let t;for(this.buffer+=e,t=this.buffer.indexOf(`
`);t>-1;t=this.buffer.indexOf(`
`))this.trigger("data",this.buffer.substring(0,t)),this.buffer=this.buffer.substring(t+1)}};const Tse="	",I1=function(r){const e=/([0-9.]*)?@?([0-9.]*)?/.exec(r||""),t={};return e[1]&&(t.length=parseInt(e[1],10)),e[2]&&(t.offset=parseInt(e[2],10)),t},Cse=function(){const t="(?:"+"[^=]*"+")=(?:"+'"[^"]*"|[^,]*'+")";return new RegExp("(?:^|,)("+t+")")},Ks=function(r){const e={};if(!r)return e;const t=r.split(Cse());let n=t.length,i;for(;n--;)t[n]!==""&&(i=/([^=]*)=(.*)/.exec(t[n]).slice(1),i[0]=i[0].replace(/^\s+|\s+$/g,""),i[1]=i[1].replace(/^\s+|\s+$/g,""),i[1]=i[1].replace(/^['"](.*)['"]$/g,"$1"),e[i[0]]=i[1]);return e},uO=r=>{const e=r.split("x"),t={};return e[0]&&(t.width=parseInt(e[0],10)),e[1]&&(t.height=parseInt(e[1],10)),t};let wse=class extends N2{constructor(){super(),this.customParsers=[],this.tagMappers=[]}push(e){let t,n;if(e=e.trim(),e.length===0)return;if(e[0]!=="#"){this.trigger("data",{type:"uri",uri:e});return}this.tagMappers.reduce((s,a)=>{const o=a(e);return o===e?s:s.concat([o])},[e]).forEach(s=>{for(let a=0;a<this.customParsers.length;a++)if(this.customParsers[a].call(this,s))return;if(s.indexOf("#EXT")!==0){this.trigger("data",{type:"comment",text:s.slice(1)});return}if(s=s.replace("\r",""),t=/^#EXTM3U/.exec(s),t){this.trigger("data",{type:"tag",tagType:"m3u"});return}if(t=/^#EXTINF:([0-9\.]*)?,?(.*)?$/.exec(s),t){n={type:"tag",tagType:"inf"},t[1]&&(n.duration=parseFloat(t[1])),t[2]&&(n.title=t[2]),this.trigger("data",n);return}if(t=/^#EXT-X-TARGETDURATION:([0-9.]*)?/.exec(s),t){n={type:"tag",tagType:"targetduration"},t[1]&&(n.duration=parseInt(t[1],10)),this.trigger("data",n);return}if(t=/^#EXT-X-VERSION:([0-9.]*)?/.exec(s),t){n={type:"tag",tagType:"version"},t[1]&&(n.version=parseInt(t[1],10)),this.trigger("data",n);return}if(t=/^#EXT-X-MEDIA-SEQUENCE:(\-?[0-9.]*)?/.exec(s),t){n={type:"tag",tagType:"media-sequence"},t[1]&&(n.number=parseInt(t[1],10)),this.trigger("data",n);return}if(t=/^#EXT-X-DISCONTINUITY-SEQUENCE:(\-?[0-9.]*)?/.exec(s),t){n={type:"tag",tagType:"discontinuity-sequence"},t[1]&&(n.number=parseInt(t[1],10)),this.trigger("data",n);return}if(t=/^#EXT-X-PLAYLIST-TYPE:(.*)?$/.exec(s),t){n={type:"tag",tagType:"playlist-type"},t[1]&&(n.playlistType=t[1]),this.trigger("data",n);return}if(t=/^#EXT-X-BYTERANGE:(.*)?$/.exec(s),t){n=tr(I1(t[1]),{type:"tag",tagType:"byterange"}),this.trigger("data",n);return}if(t=/^#EXT-X-ALLOW-CACHE:(YES|NO)?/.exec(s),t){n={type:"tag",tagType:"allow-cache"},t[1]&&(n.allowed=!/NO/.test(t[1])),this.trigger("data",n);return}if(t=/^#EXT-X-MAP:(.*)$/.exec(s),t){if(n={type:"tag",tagType:"map"},t[1]){const a=Ks(t[1]);a.URI&&(n.uri=a.URI),a.BYTERANGE&&(n.byterange=I1(a.BYTERANGE))}this.trigger("data",n);return}if(t=/^#EXT-X-STREAM-INF:(.*)$/.exec(s),t){n={type:"tag",tagType:"stream-inf"},t[1]&&(n.attributes=Ks(t[1]),n.attributes.RESOLUTION&&(n.attributes.RESOLUTION=uO(n.attributes.RESOLUTION)),n.attributes.BANDWIDTH&&(n.attributes.BANDWIDTH=parseInt(n.attributes.BANDWIDTH,10)),n.attributes["FRAME-RATE"]&&(n.attributes["FRAME-RATE"]=parseFloat(n.attributes["FRAME-RATE"])),n.attributes["PROGRAM-ID"]&&(n.attributes["PROGRAM-ID"]=parseInt(n.attributes["PROGRAM-ID"],10))),this.trigger("data",n);return}if(t=/^#EXT-X-MEDIA:(.*)$/.exec(s),t){n={type:"tag",tagType:"media"},t[1]&&(n.attributes=Ks(t[1])),this.trigger("data",n);return}if(t=/^#EXT-X-ENDLIST/.exec(s),t){this.trigger("data",{type:"tag",tagType:"endlist"});return}if(t=/^#EXT-X-DISCONTINUITY/.exec(s),t){this.trigger("data",{type:"tag",tagType:"discontinuity"});return}if(t=/^#EXT-X-PROGRAM-DATE-TIME:(.*)$/.exec(s),t){n={type:"tag",tagType:"program-date-time"},t[1]&&(n.dateTimeString=t[1],n.dateTimeObject=new Date(t[1])),this.trigger("data",n);return}if(t=/^#EXT-X-KEY:(.*)$/.exec(s),t){n={type:"tag",tagType:"key"},t[1]&&(n.attributes=Ks(t[1]),n.attributes.IV&&(n.attributes.IV.substring(0,2).toLowerCase()==="0x"&&(n.attributes.IV=n.attributes.IV.substring(2)),n.attributes.IV=n.attributes.IV.match(/.{8}/g),n.attributes.IV[0]=parseInt(n.attributes.IV[0],16),n.attributes.IV[1]=parseInt(n.attributes.IV[1],16),n.attributes.IV[2]=parseInt(n.attributes.IV[2],16),n.attributes.IV[3]=parseInt(n.attributes.IV[3],16),n.attributes.IV=new Uint32Array(n.attributes.IV))),this.trigger("data",n);return}if(t=/^#EXT-X-START:(.*)$/.exec(s),t){n={type:"tag",tagType:"start"},t[1]&&(n.attributes=Ks(t[1]),n.attributes["TIME-OFFSET"]=parseFloat(n.attributes["TIME-OFFSET"]),n.attributes.PRECISE=/YES/.test(n.attributes.PRECISE)),this.trigger("data",n);return}if(t=/^#EXT-X-CUE-OUT-CONT:(.*)?$/.exec(s),t){n={type:"tag",tagType:"cue-out-cont"},t[1]?n.data=t[1]:n.data="",this.trigger("data",n);return}if(t=/^#EXT-X-CUE-OUT:(.*)?$/.exec(s),t){n={type:"tag",tagType:"cue-out"},t[1]?n.data=t[1]:n.data="",this.trigger("data",n);return}if(t=/^#EXT-X-CUE-IN:?(.*)?$/.exec(s),t){n={type:"tag",tagType:"cue-in"},t[1]?n.data=t[1]:n.data="",this.trigger("data",n);return}if(t=/^#EXT-X-SKIP:(.*)$/.exec(s),t&&t[1]){n={type:"tag",tagType:"skip"},n.attributes=Ks(t[1]),n.attributes.hasOwnProperty("SKIPPED-SEGMENTS")&&(n.attributes["SKIPPED-SEGMENTS"]=parseInt(n.attributes["SKIPPED-SEGMENTS"],10)),n.attributes.hasOwnProperty("RECENTLY-REMOVED-DATERANGES")&&(n.attributes["RECENTLY-REMOVED-DATERANGES"]=n.attributes["RECENTLY-REMOVED-DATERANGES"].split(Tse)),this.trigger("data",n);return}if(t=/^#EXT-X-PART:(.*)$/.exec(s),t&&t[1]){n={type:"tag",tagType:"part"},n.attributes=Ks(t[1]),["DURATION"].forEach(function(a){n.attributes.hasOwnProperty(a)&&(n.attributes[a]=parseFloat(n.attributes[a]))}),["INDEPENDENT","GAP"].forEach(function(a){n.attributes.hasOwnProperty(a)&&(n.attributes[a]=/YES/.test(n.attributes[a]))}),n.attributes.hasOwnProperty("BYTERANGE")&&(n.attributes.byterange=I1(n.attributes.BYTERANGE)),this.trigger("data",n);return}if(t=/^#EXT-X-SERVER-CONTROL:(.*)$/.exec(s),t&&t[1]){n={type:"tag",tagType:"server-control"},n.attributes=Ks(t[1]),["CAN-SKIP-UNTIL","PART-HOLD-BACK","HOLD-BACK"].forEach(function(a){n.attributes.hasOwnProperty(a)&&(n.attributes[a]=parseFloat(n.attributes[a]))}),["CAN-SKIP-DATERANGES","CAN-BLOCK-RELOAD"].forEach(function(a){n.attributes.hasOwnProperty(a)&&(n.attributes[a]=/YES/.test(n.attributes[a]))}),this.trigger("data",n);return}if(t=/^#EXT-X-PART-INF:(.*)$/.exec(s),t&&t[1]){n={type:"tag",tagType:"part-inf"},n.attributes=Ks(t[1]),["PART-TARGET"].forEach(function(a){n.attributes.hasOwnProperty(a)&&(n.attributes[a]=parseFloat(n.attributes[a]))}),this.trigger("data",n);return}if(t=/^#EXT-X-PRELOAD-HINT:(.*)$/.exec(s),t&&t[1]){n={type:"tag",tagType:"preload-hint"},n.attributes=Ks(t[1]),["BYTERANGE-START","BYTERANGE-LENGTH"].forEach(function(a){if(n.attributes.hasOwnProperty(a)){n.attributes[a]=parseInt(n.attributes[a],10);const o=a==="BYTERANGE-LENGTH"?"length":"offset";n.attributes.byterange=n.attributes.byterange||{},n.attributes.byterange[o]=n.attributes[a],delete n.attributes[a]}}),this.trigger("data",n);return}if(t=/^#EXT-X-RENDITION-REPORT:(.*)$/.exec(s),t&&t[1]){n={type:"tag",tagType:"rendition-report"},n.attributes=Ks(t[1]),["LAST-MSN","LAST-PART"].forEach(function(a){n.attributes.hasOwnProperty(a)&&(n.attributes[a]=parseInt(n.attributes[a],10))}),this.trigger("data",n);return}if(t=/^#EXT-X-DATERANGE:(.*)$/.exec(s),t&&t[1]){n={type:"tag",tagType:"daterange"},n.attributes=Ks(t[1]),["ID","CLASS"].forEach(function(o){n.attributes.hasOwnProperty(o)&&(n.attributes[o]=String(n.attributes[o]))}),["START-DATE","END-DATE"].forEach(function(o){n.attributes.hasOwnProperty(o)&&(n.attributes[o]=new Date(n.attributes[o]))}),["DURATION","PLANNED-DURATION"].forEach(function(o){n.attributes.hasOwnProperty(o)&&(n.attributes[o]=parseFloat(n.attributes[o]))}),["END-ON-NEXT"].forEach(function(o){n.attributes.hasOwnProperty(o)&&(n.attributes[o]=/YES/i.test(n.attributes[o]))}),["SCTE35-CMD"," SCTE35-OUT","SCTE35-IN"].forEach(function(o){n.attributes.hasOwnProperty(o)&&(n.attributes[o]=n.attributes[o].toString(16))});const a=/^X-([A-Z]+-)+[A-Z]+$/;for(const o in n.attributes){if(!a.test(o))continue;const l=/[0-9A-Fa-f]{6}/g.test(n.attributes[o]),u=/^\d+(\.\d+)?$/.test(n.attributes[o]);n.attributes[o]=l?n.attributes[o].toString(16):u?parseFloat(n.attributes[o]):String(n.attributes[o])}this.trigger("data",n);return}if(t=/^#EXT-X-INDEPENDENT-SEGMENTS/.exec(s),t){this.trigger("data",{type:"tag",tagType:"independent-segments"});return}if(t=/^#EXT-X-I-FRAMES-ONLY/.exec(s),t){this.trigger("data",{type:"tag",tagType:"i-frames-only"});return}if(t=/^#EXT-X-CONTENT-STEERING:(.*)$/.exec(s),t){n={type:"tag",tagType:"content-steering"},n.attributes=Ks(t[1]),this.trigger("data",n);return}if(t=/^#EXT-X-I-FRAME-STREAM-INF:(.*)$/.exec(s),t){n={type:"tag",tagType:"i-frame-playlist"},n.attributes=Ks(t[1]),n.attributes.URI&&(n.uri=n.attributes.URI),n.attributes.BANDWIDTH&&(n.attributes.BANDWIDTH=parseInt(n.attributes.BANDWIDTH,10)),n.attributes.RESOLUTION&&(n.attributes.RESOLUTION=uO(n.attributes.RESOLUTION)),n.attributes["AVERAGE-BANDWIDTH"]&&(n.attributes["AVERAGE-BANDWIDTH"]=parseInt(n.attributes["AVERAGE-BANDWIDTH"],10)),n.attributes["FRAME-RATE"]&&(n.attributes["FRAME-RATE"]=parseFloat(n.attributes["FRAME-RATE"])),this.trigger("data",n);return}if(t=/^#EXT-X-DEFINE:(.*)$/.exec(s),t){n={type:"tag",tagType:"define"},n.attributes=Ks(t[1]),this.trigger("data",n);return}this.trigger("data",{type:"tag",data:s.slice(4)})})}addParser({expression:e,customType:t,dataParser:n,segment:i}){typeof n!="function"&&(n=s=>s),this.customParsers.push(s=>{if(e.exec(s))return this.trigger("data",{type:"custom",data:n(s),customType:t,segment:i}),!0})}addTagMapper({expression:e,map:t}){const n=i=>e.test(i)?t(i):i;this.tagMappers.push(n)}};const Ese=r=>r.toLowerCase().replace(/-(\w)/g,e=>e[1].toUpperCase()),od=function(r){const e={};return Object.keys(r).forEach(function(t){e[Ese(t)]=r[t]}),e},P1=function(r){const{serverControl:e,targetDuration:t,partTargetDuration:n}=r;if(!e)return;const i="#EXT-X-SERVER-CONTROL",s="holdBack",a="partHoldBack",o=t&&t*3,l=n&&n*2;t&&!e.hasOwnProperty(s)&&(e[s]=o,this.trigger("info",{message:`${i} defaulting HOLD-BACK to targetDuration * 3 (${o}).`})),o&&e[s]<o&&(this.trigger("warn",{message:`${i} clamping HOLD-BACK (${e[s]}) to targetDuration * 3 (${o})`}),e[s]=o),n&&!e.hasOwnProperty(a)&&(e[a]=n*3,this.trigger("info",{message:`${i} defaulting PART-HOLD-BACK to partTargetDuration * 3 (${e[a]}).`})),n&&e[a]<l&&(this.trigger("warn",{message:`${i} clamping PART-HOLD-BACK (${e[a]}) to partTargetDuration * 2 (${l}).`}),e[a]=l)};let oN=class extends N2{constructor(e={}){super(),this.lineStream=new Sse,this.parseStream=new wse,this.lineStream.pipe(this.parseStream),this.mainDefinitions=e.mainDefinitions||{},this.params=new URL(e.uri,"https://a.com").searchParams,this.lastProgramDateTime=null;const t=this,n=[];let i={},s,a,o=!1;const l=function(){},u={AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},c="urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed";let h=0;this.manifest={allowCache:!0,discontinuityStarts:[],dateRanges:[],iFramePlaylists:[],segments:[]};let m=0,g=0;const y={};this.on("end",()=>{i.uri||!i.parts&&!i.preloadHints||(!i.map&&s&&(i.map=s),!i.key&&a&&(i.key=a),!i.timeline&&typeof h=="number"&&(i.timeline=h),this.manifest.preloadSegment=i)}),this.parseStream.on("data",function(v){let x,w;if(t.manifest.definitions){for(const E in t.manifest.definitions)if(v.uri&&(v.uri=v.uri.replace(`{$${E}}`,t.manifest.definitions[E])),v.attributes)for(const D in v.attributes)typeof v.attributes[D]=="string"&&(v.attributes[D]=v.attributes[D].replace(`{$${E}}`,t.manifest.definitions[E]))}({tag(){({version(){v.version&&(this.manifest.version=v.version)},"allow-cache"(){this.manifest.allowCache=v.allowed,"allowed"in v||(this.trigger("info",{message:"defaulting allowCache to YES"}),this.manifest.allowCache=!0)},byterange(){const E={};"length"in v&&(i.byterange=E,E.length=v.length,"offset"in v||(v.offset=m)),"offset"in v&&(i.byterange=E,E.offset=v.offset),m=E.offset+E.length},endlist(){this.manifest.endList=!0},inf(){"mediaSequence"in this.manifest||(this.manifest.mediaSequence=0,this.trigger("info",{message:"defaulting media sequence to zero"})),"discontinuitySequence"in this.manifest||(this.manifest.discontinuitySequence=0,this.trigger("info",{message:"defaulting discontinuity sequence to zero"})),v.title&&(i.title=v.title),v.duration>0&&(i.duration=v.duration),v.duration===0&&(i.duration=.01,this.trigger("info",{message:"updating zero segment duration to a small value"})),this.manifest.segments=n},key(){if(!v.attributes){this.trigger("warn",{message:"ignoring key declaration without attribute list"});return}if(v.attributes.METHOD==="NONE"){a=null;return}if(!v.attributes.URI){this.trigger("warn",{message:"ignoring key declaration without URI"});return}if(v.attributes.KEYFORMAT==="com.apple.streamingkeydelivery"){this.manifest.contentProtection=this.manifest.contentProtection||{},this.manifest.contentProtection["com.apple.fps.1_0"]={attributes:v.attributes};return}if(v.attributes.KEYFORMAT==="com.microsoft.playready"){this.manifest.contentProtection=this.manifest.contentProtection||{},this.manifest.contentProtection["com.microsoft.playready"]={uri:v.attributes.URI};return}if(v.attributes.KEYFORMAT===c){if(["SAMPLE-AES","SAMPLE-AES-CTR","SAMPLE-AES-CENC"].indexOf(v.attributes.METHOD)===-1){this.trigger("warn",{message:"invalid key method provided for Widevine"});return}if(v.attributes.METHOD==="SAMPLE-AES-CENC"&&this.trigger("warn",{message:"SAMPLE-AES-CENC is deprecated, please use SAMPLE-AES-CTR instead"}),v.attributes.URI.substring(0,23)!=="data:text/plain;base64,"){this.trigger("warn",{message:"invalid key URI provided for Widevine"});return}if(!(v.attributes.KEYID&&v.attributes.KEYID.substring(0,2)==="0x")){this.trigger("warn",{message:"invalid key ID provided for Widevine"});return}this.manifest.contentProtection=this.manifest.contentProtection||{},this.manifest.contentProtection["com.widevine.alpha"]={attributes:{schemeIdUri:v.attributes.KEYFORMAT,keyId:v.attributes.KEYID.substring(2)},pssh:aN(v.attributes.URI.split(",")[1])};return}v.attributes.METHOD||this.trigger("warn",{message:"defaulting key method to AES-128"}),a={method:v.attributes.METHOD||"AES-128",uri:v.attributes.URI},typeof v.attributes.IV<"u"&&(a.iv=v.attributes.IV)},"media-sequence"(){if(!isFinite(v.number)){this.trigger("warn",{message:"ignoring invalid media sequence: "+v.number});return}this.manifest.mediaSequence=v.number},"discontinuity-sequence"(){if(!isFinite(v.number)){this.trigger("warn",{message:"ignoring invalid discontinuity sequence: "+v.number});return}this.manifest.discontinuitySequence=v.number,h=v.number},"playlist-type"(){if(!/VOD|EVENT/.test(v.playlistType)){this.trigger("warn",{message:"ignoring unknown playlist type: "+v.playlist});return}this.manifest.playlistType=v.playlistType},map(){s={},v.uri&&(s.uri=v.uri),v.byterange&&(s.byterange=v.byterange),a&&(s.key=a)},"stream-inf"(){if(this.manifest.playlists=n,this.manifest.mediaGroups=this.manifest.mediaGroups||u,!v.attributes){this.trigger("warn",{message:"ignoring empty stream-inf attributes"});return}i.attributes||(i.attributes={}),tr(i.attributes,v.attributes)},media(){if(this.manifest.mediaGroups=this.manifest.mediaGroups||u,!(v.attributes&&v.attributes.TYPE&&v.attributes["GROUP-ID"]&&v.attributes.NAME)){this.trigger("warn",{message:"ignoring incomplete or missing media group"});return}const E=this.manifest.mediaGroups[v.attributes.TYPE];E[v.attributes["GROUP-ID"]]=E[v.attributes["GROUP-ID"]]||{},x=E[v.attributes["GROUP-ID"]],w={default:/yes/i.test(v.attributes.DEFAULT)},w.default?w.autoselect=!0:w.autoselect=/yes/i.test(v.attributes.AUTOSELECT),v.attributes.LANGUAGE&&(w.language=v.attributes.LANGUAGE),v.attributes.URI&&(w.uri=v.attributes.URI),v.attributes["INSTREAM-ID"]&&(w.instreamId=v.attributes["INSTREAM-ID"]),v.attributes.CHARACTERISTICS&&(w.characteristics=v.attributes.CHARACTERISTICS),v.attributes.FORCED&&(w.forced=/yes/i.test(v.attributes.FORCED)),x[v.attributes.NAME]=w},discontinuity(){h+=1,i.discontinuity=!0,this.manifest.discontinuityStarts.push(n.length)},"program-date-time"(){typeof this.manifest.dateTimeString>"u"&&(this.manifest.dateTimeString=v.dateTimeString,this.manifest.dateTimeObject=v.dateTimeObject),i.dateTimeString=v.dateTimeString,i.dateTimeObject=v.dateTimeObject;const{lastProgramDateTime:E}=this;this.lastProgramDateTime=new Date(v.dateTimeString).getTime(),E===null&&this.manifest.segments.reduceRight((D,I)=>(I.programDateTime=D-I.duration*1e3,I.programDateTime),this.lastProgramDateTime)},targetduration(){if(!isFinite(v.duration)||v.duration<0){this.trigger("warn",{message:"ignoring invalid target duration: "+v.duration});return}this.manifest.targetDuration=v.duration,P1.call(this,this.manifest)},start(){if(!v.attributes||isNaN(v.attributes["TIME-OFFSET"])){this.trigger("warn",{message:"ignoring start declaration without appropriate attribute list"});return}this.manifest.start={timeOffset:v.attributes["TIME-OFFSET"],precise:v.attributes.PRECISE}},"cue-out"(){i.cueOut=v.data},"cue-out-cont"(){i.cueOutCont=v.data},"cue-in"(){i.cueIn=v.data},skip(){this.manifest.skip=od(v.attributes),this.warnOnMissingAttributes_("#EXT-X-SKIP",v.attributes,["SKIPPED-SEGMENTS"])},part(){o=!0;const E=this.manifest.segments.length,D=od(v.attributes);i.parts=i.parts||[],i.parts.push(D),D.byterange&&(D.byterange.hasOwnProperty("offset")||(D.byterange.offset=g),g=D.byterange.offset+D.byterange.length);const I=i.parts.length-1;this.warnOnMissingAttributes_(`#EXT-X-PART #${I} for segment #${E}`,v.attributes,["URI","DURATION"]),this.manifest.renditionReports&&this.manifest.renditionReports.forEach((A,L)=>{A.hasOwnProperty("lastPart")||this.trigger("warn",{message:`#EXT-X-RENDITION-REPORT #${L} lacks required attribute(s): LAST-PART`})})},"server-control"(){const E=this.manifest.serverControl=od(v.attributes);E.hasOwnProperty("canBlockReload")||(E.canBlockReload=!1,this.trigger("info",{message:"#EXT-X-SERVER-CONTROL defaulting CAN-BLOCK-RELOAD to false"})),P1.call(this,this.manifest),E.canSkipDateranges&&!E.hasOwnProperty("canSkipUntil")&&this.trigger("warn",{message:"#EXT-X-SERVER-CONTROL lacks required attribute CAN-SKIP-UNTIL which is required when CAN-SKIP-DATERANGES is set"})},"preload-hint"(){const E=this.manifest.segments.length,D=od(v.attributes),I=D.type&&D.type==="PART";i.preloadHints=i.preloadHints||[],i.preloadHints.push(D),D.byterange&&(D.byterange.hasOwnProperty("offset")||(D.byterange.offset=I?g:0,I&&(g=D.byterange.offset+D.byterange.length)));const A=i.preloadHints.length-1;if(this.warnOnMissingAttributes_(`#EXT-X-PRELOAD-HINT #${A} for segment #${E}`,v.attributes,["TYPE","URI"]),!!D.type)for(let L=0;L<i.preloadHints.length-1;L++){const N=i.preloadHints[L];N.type&&N.type===D.type&&this.trigger("warn",{message:`#EXT-X-PRELOAD-HINT #${A} for segment #${E} has the same TYPE ${D.type} as preload hint #${L}`})}},"rendition-report"(){const E=od(v.attributes);this.manifest.renditionReports=this.manifest.renditionReports||[],this.manifest.renditionReports.push(E);const D=this.manifest.renditionReports.length-1,I=["LAST-MSN","URI"];o&&I.push("LAST-PART"),this.warnOnMissingAttributes_(`#EXT-X-RENDITION-REPORT #${D}`,v.attributes,I)},"part-inf"(){this.manifest.partInf=od(v.attributes),this.warnOnMissingAttributes_("#EXT-X-PART-INF",v.attributes,["PART-TARGET"]),this.manifest.partInf.partTarget&&(this.manifest.partTargetDuration=this.manifest.partInf.partTarget),P1.call(this,this.manifest)},daterange(){this.manifest.dateRanges.push(od(v.attributes));const E=this.manifest.dateRanges.length-1;this.warnOnMissingAttributes_(`#EXT-X-DATERANGE #${E}`,v.attributes,["ID","START-DATE"]);const D=this.manifest.dateRanges[E];D.endDate&&D.startDate&&new Date(D.endDate)<new Date(D.startDate)&&this.trigger("warn",{message:"EXT-X-DATERANGE END-DATE must be equal to or later than the value of the START-DATE"}),D.duration&&D.duration<0&&this.trigger("warn",{message:"EXT-X-DATERANGE DURATION must not be negative"}),D.plannedDuration&&D.plannedDuration<0&&this.trigger("warn",{message:"EXT-X-DATERANGE PLANNED-DURATION must not be negative"});const I=!!D.endOnNext;if(I&&!D.class&&this.trigger("warn",{message:"EXT-X-DATERANGE with an END-ON-NEXT=YES attribute must have a CLASS attribute"}),I&&(D.duration||D.endDate)&&this.trigger("warn",{message:"EXT-X-DATERANGE with an END-ON-NEXT=YES attribute must not contain DURATION or END-DATE attributes"}),D.duration&&D.endDate){const L=D.startDate.getTime()+D.duration*1e3;this.manifest.dateRanges[E].endDate=new Date(L)}if(!y[D.id])y[D.id]=D;else{for(const L in y[D.id])if(D[L]&&JSON.stringify(y[D.id][L])!==JSON.stringify(D[L])){this.trigger("warn",{message:"EXT-X-DATERANGE tags with the same ID in a playlist must have the same attributes values"});break}const A=this.manifest.dateRanges.findIndex(L=>L.id===D.id);this.manifest.dateRanges[A]=tr(this.manifest.dateRanges[A],D),y[D.id]=tr(y[D.id],D),this.manifest.dateRanges.pop()}},"independent-segments"(){this.manifest.independentSegments=!0},"i-frames-only"(){this.manifest.iFramesOnly=!0,this.requiredCompatibilityversion(this.manifest.version,4)},"content-steering"(){this.manifest.contentSteering=od(v.attributes),this.warnOnMissingAttributes_("#EXT-X-CONTENT-STEERING",v.attributes,["SERVER-URI"])},define(){this.manifest.definitions=this.manifest.definitions||{};const E=(D,I)=>{if(D in this.manifest.definitions){this.trigger("error",{message:`EXT-X-DEFINE: Duplicate name ${D}`});return}this.manifest.definitions[D]=I};if("QUERYPARAM"in v.attributes){if("NAME"in v.attributes||"IMPORT"in v.attributes){this.trigger("error",{message:"EXT-X-DEFINE: Invalid attributes"});return}const D=this.params.get(v.attributes.QUERYPARAM);if(!D){this.trigger("error",{message:`EXT-X-DEFINE: No query param ${v.attributes.QUERYPARAM}`});return}E(v.attributes.QUERYPARAM,decodeURIComponent(D));return}if("NAME"in v.attributes){if("IMPORT"in v.attributes){this.trigger("error",{message:"EXT-X-DEFINE: Invalid attributes"});return}if(!("VALUE"in v.attributes)||typeof v.attributes.VALUE!="string"){this.trigger("error",{message:`EXT-X-DEFINE: No value for ${v.attributes.NAME}`});return}E(v.attributes.NAME,v.attributes.VALUE);return}if("IMPORT"in v.attributes){if(!this.mainDefinitions[v.attributes.IMPORT]){this.trigger("error",{message:`EXT-X-DEFINE: No value ${v.attributes.IMPORT} to import, or IMPORT used on main playlist`});return}E(v.attributes.IMPORT,this.mainDefinitions[v.attributes.IMPORT]);return}this.trigger("error",{message:"EXT-X-DEFINE: No attribute"})},"i-frame-playlist"(){this.manifest.iFramePlaylists.push({attributes:v.attributes,uri:v.uri,timeline:h}),this.warnOnMissingAttributes_("#EXT-X-I-FRAME-STREAM-INF",v.attributes,["BANDWIDTH","URI"])}}[v.tagType]||l).call(t)},uri(){i.uri=v.uri,n.push(i),this.manifest.targetDuration&&!("duration"in i)&&(this.trigger("warn",{message:"defaulting segment duration to the target duration"}),i.duration=this.manifest.targetDuration),a&&(i.key=a),i.timeline=h,s&&(i.map=s),g=0,this.lastProgramDateTime!==null&&(i.programDateTime=this.lastProgramDateTime,this.lastProgramDateTime+=i.duration*1e3),i={}},comment(){},custom(){v.segment?(i.custom=i.custom||{},i.custom[v.customType]=v.data):(this.manifest.custom=this.manifest.custom||{},this.manifest.custom[v.customType]=v.data)}})[v.type].call(t)})}requiredCompatibilityversion(e,t){(e<t||!e)&&this.trigger("warn",{message:`manifest must be at least version ${t}`})}warnOnMissingAttributes_(e,t,n){const i=[];n.forEach(function(s){t.hasOwnProperty(s)||i.push(s)}),i.length&&this.trigger("warn",{message:`${e} lacks required attribute(s): ${i.join(", ")}`})}push(e){this.lineStream.push(e)}end(){this.lineStream.push(`
`),this.manifest.dateRanges.length&&this.lastProgramDateTime===null&&this.trigger("warn",{message:"A playlist with EXT-X-DATERANGE tag must contain atleast one EXT-X-PROGRAM-DATE-TIME tag"}),this.lastProgramDateTime=null,this.trigger("end")}addParser(e){this.parseStream.addParser(e)}addTagMapper(e){this.parseStream.addTagMapper(e)}};var Rh={mp4:/^(av0?1|avc0?[1234]|vp0?9|flac|opus|mp3|mp4a|mp4v|stpp.ttml.im1t)/,webm:/^(vp0?[89]|av0?1|opus|vorbis)/,ogg:/^(vp0?[89]|theora|flac|opus|vorbis)/,video:/^(av0?1|avc0?[1234]|vp0?[89]|hvc1|hev1|theora|mp4v)/,audio:/^(mp4a|flac|vorbis|opus|ac-[34]|ec-3|alac|mp3|speex|aac)/,text:/^(stpp.ttml.im1t)/,muxerVideo:/^(avc0?1)/,muxerAudio:/^(mp4a)/,muxerText:/a^/},kse=["video","audio","text"],cO=["Video","Audio","Text"],U2=function(e){return e&&e.replace(/avc1\.(\d+)\.(\d+)/i,function(t,n,i){var s=("00"+Number(n).toString(16)).slice(-2),a=("00"+Number(i).toString(16)).slice(-2);return"avc1."+s+"00"+a})},Mi=function(e){e===void 0&&(e="");var t=e.split(","),n=[];return t.forEach(function(i){i=i.trim();var s;kse.forEach(function(a){var o=Rh[a].exec(i.toLowerCase());if(!(!o||o.length<=1)){s=a;var l=i.substring(0,o[1].length),u=i.replace(l,"");n.push({type:l,details:u,mediaType:a})}}),s||n.push({type:i,details:"",mediaType:"unknown"})}),n},lN=function(e,t){if(!e.mediaGroups.AUDIO||!t)return null;var n=e.mediaGroups.AUDIO[t];if(!n)return null;for(var i in n){var s=n[i];if(s.default&&s.playlists)return Mi(s.playlists[0].attributes.CODECS)}return null},$2=function(e){return e===void 0&&(e=""),Rh.audio.test(e.trim().toLowerCase())},Ase=function(e){return e===void 0&&(e=""),Rh.text.test(e.trim().toLowerCase())},Eu=function(e){if(!(!e||typeof e!="string")){var t=e.toLowerCase().split(",").map(function(s){return U2(s.trim())}),n="video";t.length===1&&$2(t[0])?n="audio":t.length===1&&Ase(t[0])&&(n="application");var i="mp4";return t.every(function(s){return Rh.mp4.test(s)})?i="mp4":t.every(function(s){return Rh.webm.test(s)})?i="webm":t.every(function(s){return Rh.ogg.test(s)})&&(i="ogg"),n+"/"+i+';codecs="'+e+'"'}},bu=function(e,t){return e===void 0&&(e=""),t===void 0&&(t=!1),X.MediaSource&&X.MediaSource.isTypeSupported&&X.MediaSource.isTypeSupported(Eu(e))||t&&X.ManagedMediaSource&&X.ManagedMediaSource.isTypeSupported&&X.ManagedMediaSource.isTypeSupported(Eu(e))||!1},ap=function(e){return e===void 0&&(e=""),e.toLowerCase().split(",").every(function(t){t=t.trim();for(var n=0;n<cO.length;n++){var i=cO[n];if(Rh["muxer"+i].test(t))return!0}return!1})},tx="mp4a.40.2",uN="avc1.4d400d",Dse=/^(audio|video|application)\/(x-|vnd\.apple\.)?mpegurl/i,Ise=/^application\/dash\+xml/i,Ub=function(e){return Dse.test(e)?"hls":Ise.test(e)?"dash":e==="application/vnd.videojs.vhs+json"?"vhs-json":null},Pse=function(e){return e.toString(2).length},Rse=function(e){return Math.ceil(Pse(e)/8)},j2=function(e){return ArrayBuffer.isView==="function"?ArrayBuffer.isView(e):e&&e.buffer instanceof ArrayBuffer},Lse=function(e){return j2(e)},gr=function(e){return e instanceof Uint8Array?e:(!Array.isArray(e)&&!Lse(e)&&!(e instanceof ArrayBuffer)&&(typeof e!="number"||typeof e=="number"&&e!==e?e=0:e=[e]),new Uint8Array(e&&e.buffer||e,e&&e.byteOffset||0,e&&e.byteLength||0))},ps=X.BigInt||Number,Sw=[ps("0x1"),ps("0x100"),ps("0x10000"),ps("0x1000000"),ps("0x100000000"),ps("0x10000000000"),ps("0x1000000000000"),ps("0x100000000000000"),ps("0x10000000000000000")];(function(){var r=new Uint16Array([65484]),e=new Uint8Array(r.buffer,r.byteOffset,r.byteLength);return e[0]===255?"big":e[0]===204?"little":"unknown"})();var Ose=function(e,t){var n=t===void 0?{}:t,i=n.signed,s=i===void 0?!1:i,a=n.le,o=a===void 0?!1:a;e=gr(e);var l=o?"reduce":"reduceRight",u=e[l]?e[l]:Array.prototype[l],c=u.call(e,function(m,g,y){var v=o?y:Math.abs(y+1-e.length);return m+ps(g)*Sw[v]},ps(0));if(s){var h=Sw[e.length]/ps(2)-ps(1);c=ps(c),c>h&&(c-=h,c-=h,c-=ps(2))}return Number(c)},Mse=function(e,t){var n={},i=n.le,s=i===void 0?!1:i;(typeof e!="bigint"&&typeof e!="number"||typeof e=="number"&&e!==e)&&(e=0),e=ps(e);for(var a=Rse(e),o=new Uint8Array(new ArrayBuffer(a)),l=0;l<a;l++){var u=s?l:Math.abs(l+1-o.length);o[u]=Number(e/Sw[l]&ps(255)),e<0&&(o[u]=Math.abs(~o[u]),o[u]-=l===0?1:2)}return o},z2=function(e,t){if(typeof e!="string"&&e&&typeof e.toString=="function"&&(e=e.toString()),typeof e!="string")return new Uint8Array;t||(e=unescape(encodeURIComponent(e)));for(var n=new Uint8Array(e.length),i=0;i<e.length;i++)n[i]=e.charCodeAt(i);return n},cN=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(t=t.filter(function(o){return o&&(o.byteLength||o.length)&&typeof o!="string"}),t.length<=1)return gr(t[0]);var i=t.reduce(function(o,l,u){return o+(l.byteLength||l.length)},0),s=new Uint8Array(i),a=0;return t.forEach(function(o){o=gr(o),s.set(o,a),a+=o.byteLength}),s},Xn=function(e,t,n){var i=n===void 0?{}:n,s=i.offset,a=s===void 0?0:s,o=i.mask,l=o===void 0?[]:o;e=gr(e),t=gr(t);var u=t.every?t.every:Array.prototype.every;return t.length&&e.length-a>=t.length&&u.call(t,function(c,h){var m=l[h]?l[h]&e[a+h]:e[a+h];return c===m})},Fse=function(e,t,n){t.forEach(function(i){for(var s in e.mediaGroups[i])for(var a in e.mediaGroups[i][s]){var o=e.mediaGroups[i][s][a];n(o,i,s,a)}})},Qm={},ac={},ch={},dO;function $b(){if(dO)return ch;dO=1;function r(s,a,o){if(o===void 0&&(o=Array.prototype),s&&typeof o.find=="function")return o.find.call(s,a);for(var l=0;l<s.length;l++)if(Object.prototype.hasOwnProperty.call(s,l)){var u=s[l];if(a.call(void 0,u,l,s))return u}}function e(s,a){return a===void 0&&(a=Object),a&&typeof a.freeze=="function"?a.freeze(s):s}function t(s,a){if(s===null||typeof s!="object")throw new TypeError("target is not an object");for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(s[o]=a[o]);return s}var n=e({HTML:"text/html",isHTML:function(s){return s===n.HTML},XML_APPLICATION:"application/xml",XML_TEXT:"text/xml",XML_XHTML_APPLICATION:"application/xhtml+xml",XML_SVG_IMAGE:"image/svg+xml"}),i=e({HTML:"http://www.w3.org/1999/xhtml",isHTML:function(s){return s===i.HTML},SVG:"http://www.w3.org/2000/svg",XML:"http://www.w3.org/XML/1998/namespace",XMLNS:"http://www.w3.org/2000/xmlns/"});return ch.assign=t,ch.find=r,ch.freeze=e,ch.MIME_TYPE=n,ch.NAMESPACE=i,ch}var hO;function dN(){if(hO)return ac;hO=1;var r=$b(),e=r.find,t=r.NAMESPACE;function n(se){return se!==""}function i(se){return se?se.split(/[\t\n\f\r ]+/).filter(n):[]}function s(se,fe){return se.hasOwnProperty(fe)||(se[fe]=!0),se}function a(se){if(!se)return[];var fe=i(se);return Object.keys(fe.reduce(s,{}))}function o(se){return function(fe){return se&&se.indexOf(fe)!==-1}}function l(se,fe){for(var Te in se)Object.prototype.hasOwnProperty.call(se,Te)&&(fe[Te]=se[Te])}function u(se,fe){var Te=se.prototype;if(!(Te instanceof fe)){let pt=function(){};var je=pt;pt.prototype=fe.prototype,pt=new pt,l(Te,pt),se.prototype=Te=pt}Te.constructor!=se&&(typeof se!="function"&&console.error("unknown Class:"+se),Te.constructor=se)}var c={},h=c.ELEMENT_NODE=1,m=c.ATTRIBUTE_NODE=2,g=c.TEXT_NODE=3,y=c.CDATA_SECTION_NODE=4,v=c.ENTITY_REFERENCE_NODE=5,x=c.ENTITY_NODE=6,w=c.PROCESSING_INSTRUCTION_NODE=7,E=c.COMMENT_NODE=8,D=c.DOCUMENT_NODE=9,I=c.DOCUMENT_TYPE_NODE=10,A=c.DOCUMENT_FRAGMENT_NODE=11,L=c.NOTATION_NODE=12,N={},U={};N.INDEX_SIZE_ERR=(U[1]="Index size error",1),N.DOMSTRING_SIZE_ERR=(U[2]="DOMString size error",2);var B=N.HIERARCHY_REQUEST_ERR=(U[3]="Hierarchy request error",3);N.WRONG_DOCUMENT_ERR=(U[4]="Wrong document",4),N.INVALID_CHARACTER_ERR=(U[5]="Invalid character",5),N.NO_DATA_ALLOWED_ERR=(U[6]="No data allowed",6),N.NO_MODIFICATION_ALLOWED_ERR=(U[7]="No modification allowed",7);var k=N.NOT_FOUND_ERR=(U[8]="Not found",8);N.NOT_SUPPORTED_ERR=(U[9]="Not supported",9);var H=N.INUSE_ATTRIBUTE_ERR=(U[10]="Attribute in use",10);N.INVALID_STATE_ERR=(U[11]="Invalid state",11),N.SYNTAX_ERR=(U[12]="Syntax error",12),N.INVALID_MODIFICATION_ERR=(U[13]="Invalid modification",13),N.NAMESPACE_ERR=(U[14]="Invalid namespace",14),N.INVALID_ACCESS_ERR=(U[15]="Invalid access",15);function q(se,fe){if(fe instanceof Error)var Te=fe;else Te=this,Error.call(this,U[se]),this.message=U[se],Error.captureStackTrace&&Error.captureStackTrace(this,q);return Te.code=se,fe&&(this.message=this.message+": "+fe),Te}q.prototype=Error.prototype,l(N,q);function V(){}V.prototype={length:0,item:function(se){return se>=0&&se<this.length?this[se]:null},toString:function(se,fe){for(var Te=[],je=0;je<this.length;je++)qr(this[je],Te,se,fe);return Te.join("")},filter:function(se){return Array.prototype.filter.call(this,se)},indexOf:function(se){return Array.prototype.indexOf.call(this,se)}};function Q(se,fe){this._node=se,this._refresh=fe,ie(this)}function ie(se){var fe=se._node._inc||se._node.ownerDocument._inc;if(se._inc!==fe){var Te=se._refresh(se._node);if(In(se,"length",Te.length),!se.$$length||Te.length<se.$$length)for(var je=Te.length;je in se;je++)Object.prototype.hasOwnProperty.call(se,je)&&delete se[je];l(Te,se),se._inc=fe}}Q.prototype.item=function(se){return ie(this),this[se]||null},u(Q,V);function le(){}function he(se,fe){for(var Te=se.length;Te--;)if(se[Te]===fe)return Te}function ae(se,fe,Te,je){if(je?fe[he(fe,je)]=Te:fe[fe.length++]=Te,se){Te.ownerElement=se;var pt=se.ownerDocument;pt&&(je&&Oe(pt,se,je),Be(pt,se,Te))}}function ne(se,fe,Te){var je=he(fe,Te);if(je>=0){for(var pt=fe.length-1;je<pt;)fe[je]=fe[++je];if(fe.length=pt,se){var Gt=se.ownerDocument;Gt&&(Oe(Gt,se,Te),Te.ownerElement=null)}}else throw new q(k,new Error(se.tagName+"@"+Te))}le.prototype={length:0,item:V.prototype.item,getNamedItem:function(se){for(var fe=this.length;fe--;){var Te=this[fe];if(Te.nodeName==se)return Te}},setNamedItem:function(se){var fe=se.ownerElement;if(fe&&fe!=this._ownerElement)throw new q(H);var Te=this.getNamedItem(se.nodeName);return ae(this._ownerElement,this,se,Te),Te},setNamedItemNS:function(se){var fe=se.ownerElement,Te;if(fe&&fe!=this._ownerElement)throw new q(H);return Te=this.getNamedItemNS(se.namespaceURI,se.localName),ae(this._ownerElement,this,se,Te),Te},removeNamedItem:function(se){var fe=this.getNamedItem(se);return ne(this._ownerElement,this,fe),fe},removeNamedItemNS:function(se,fe){var Te=this.getNamedItemNS(se,fe);return ne(this._ownerElement,this,Te),Te},getNamedItemNS:function(se,fe){for(var Te=this.length;Te--;){var je=this[Te];if(je.localName==fe&&je.namespaceURI==se)return je}return null}};function ue(){}ue.prototype={hasFeature:function(se,fe){return!0},createDocument:function(se,fe,Te){var je=new xe;if(je.implementation=this,je.childNodes=new V,je.doctype=Te||null,Te&&je.appendChild(Te),fe){var pt=je.createElementNS(se,fe);je.appendChild(pt)}return je},createDocumentType:function(se,fe,Te){var je=new Wt;return je.name=se,je.nodeName=se,je.publicId=fe||"",je.systemId=Te||"",je}};function ee(){}ee.prototype={firstChild:null,lastChild:null,previousSibling:null,nextSibling:null,attributes:null,parentNode:null,childNodes:null,ownerDocument:null,nodeValue:null,namespaceURI:null,prefix:null,localName:null,insertBefore:function(se,fe){return ht(this,se,fe)},replaceChild:function(se,fe){ht(this,se,fe,lt),fe&&this.removeChild(fe)},removeChild:function(se){return Ke(this,se)},appendChild:function(se){return this.insertBefore(se,null)},hasChildNodes:function(){return this.firstChild!=null},cloneNode:function(se){return Dn(this.ownerDocument||this,this,se)},normalize:function(){for(var se=this.firstChild;se;){var fe=se.nextSibling;fe&&fe.nodeType==g&&se.nodeType==g?(this.removeChild(fe),se.appendData(fe.data)):(se.normalize(),se=fe)}},isSupported:function(se,fe){return this.ownerDocument.implementation.hasFeature(se,fe)},hasAttributes:function(){return this.attributes.length>0},lookupPrefix:function(se){for(var fe=this;fe;){var Te=fe._nsMap;if(Te){for(var je in Te)if(Object.prototype.hasOwnProperty.call(Te,je)&&Te[je]===se)return je}fe=fe.nodeType==m?fe.ownerDocument:fe.parentNode}return null},lookupNamespaceURI:function(se){for(var fe=this;fe;){var Te=fe._nsMap;if(Te&&Object.prototype.hasOwnProperty.call(Te,se))return Te[se];fe=fe.nodeType==m?fe.ownerDocument:fe.parentNode}return null},isDefaultNamespace:function(se){var fe=this.lookupPrefix(se);return fe==null}};function pe(se){return se=="<"&&"&lt;"||se==">"&&"&gt;"||se=="&"&&"&amp;"||se=='"'&&"&quot;"||"&#"+se.charCodeAt()+";"}l(c,ee),l(c,ee.prototype);function me(se,fe){if(fe(se))return!0;if(se=se.firstChild)do if(me(se,fe))return!0;while(se=se.nextSibling)}function xe(){this.ownerDocument=this}function Be(se,fe,Te){se&&se._inc++;var je=Te.namespaceURI;je===t.XMLNS&&(fe._nsMap[Te.prefix?Te.localName:""]=Te.value)}function Oe(se,fe,Te,je){se&&se._inc++;var pt=Te.namespaceURI;pt===t.XMLNS&&delete fe._nsMap[Te.prefix?Te.localName:""]}function dt(se,fe,Te){if(se&&se._inc){se._inc++;var je=fe.childNodes;if(Te)je[je.length++]=Te;else{for(var pt=fe.firstChild,Gt=0;pt;)je[Gt++]=pt,pt=pt.nextSibling;je.length=Gt,delete je[je.length]}}}function Ke(se,fe){var Te=fe.previousSibling,je=fe.nextSibling;return Te?Te.nextSibling=je:se.firstChild=je,je?je.previousSibling=Te:se.lastChild=Te,fe.parentNode=null,fe.previousSibling=null,fe.nextSibling=null,dt(se.ownerDocument,se),fe}function _t(se){return se&&(se.nodeType===ee.DOCUMENT_NODE||se.nodeType===ee.DOCUMENT_FRAGMENT_NODE||se.nodeType===ee.ELEMENT_NODE)}function Ze(se){return se&&(Nt(se)||qe(se)||Ot(se)||se.nodeType===ee.DOCUMENT_FRAGMENT_NODE||se.nodeType===ee.COMMENT_NODE||se.nodeType===ee.PROCESSING_INSTRUCTION_NODE)}function Ot(se){return se&&se.nodeType===ee.DOCUMENT_TYPE_NODE}function Nt(se){return se&&se.nodeType===ee.ELEMENT_NODE}function qe(se){return se&&se.nodeType===ee.TEXT_NODE}function Ue(se,fe){var Te=se.childNodes||[];if(e(Te,Nt)||Ot(fe))return!1;var je=e(Te,Ot);return!(fe&&je&&Te.indexOf(je)>Te.indexOf(fe))}function Pe(se,fe){var Te=se.childNodes||[];function je(Gt){return Nt(Gt)&&Gt!==fe}if(e(Te,je))return!1;var pt=e(Te,Ot);return!(fe&&pt&&Te.indexOf(pt)>Te.indexOf(fe))}function $e(se,fe,Te){if(!_t(se))throw new q(B,"Unexpected parent node type "+se.nodeType);if(Te&&Te.parentNode!==se)throw new q(k,"child not in parent");if(!Ze(fe)||Ot(fe)&&se.nodeType!==ee.DOCUMENT_NODE)throw new q(B,"Unexpected node type "+fe.nodeType+" for parent node type "+se.nodeType)}function rt(se,fe,Te){var je=se.childNodes||[],pt=fe.childNodes||[];if(fe.nodeType===ee.DOCUMENT_FRAGMENT_NODE){var Gt=pt.filter(Nt);if(Gt.length>1||e(pt,qe))throw new q(B,"More than one element or text in fragment");if(Gt.length===1&&!Ue(se,Te))throw new q(B,"Element in fragment can not be inserted before doctype")}if(Nt(fe)&&!Ue(se,Te))throw new q(B,"Only one element can be added and only after doctype");if(Ot(fe)){if(e(je,Ot))throw new q(B,"Only one doctype is allowed");var be=e(je,Nt);if(Te&&je.indexOf(be)<je.indexOf(Te))throw new q(B,"Doctype can only be inserted before an element");if(!Te&&be)throw new q(B,"Doctype can not be appended since element is present")}}function lt(se,fe,Te){var je=se.childNodes||[],pt=fe.childNodes||[];if(fe.nodeType===ee.DOCUMENT_FRAGMENT_NODE){var Gt=pt.filter(Nt);if(Gt.length>1||e(pt,qe))throw new q(B,"More than one element or text in fragment");if(Gt.length===1&&!Pe(se,Te))throw new q(B,"Element in fragment can not be inserted before doctype")}if(Nt(fe)&&!Pe(se,Te))throw new q(B,"Only one element can be added and only after doctype");if(Ot(fe)){let Ae=function(Ge){return Ot(Ge)&&Ge!==Te};var ye=Ae;if(e(je,Ae))throw new q(B,"Only one doctype is allowed");var be=e(je,Nt);if(Te&&je.indexOf(be)<je.indexOf(Te))throw new q(B,"Doctype can only be inserted before an element")}}function ht(se,fe,Te,je){$e(se,fe,Te),se.nodeType===ee.DOCUMENT_NODE&&(je||rt)(se,fe,Te);var pt=fe.parentNode;if(pt&&pt.removeChild(fe),fe.nodeType===A){var Gt=fe.firstChild;if(Gt==null)return fe;var be=fe.lastChild}else Gt=be=fe;var ye=Te?Te.previousSibling:se.lastChild;Gt.previousSibling=ye,be.nextSibling=Te,ye?ye.nextSibling=Gt:se.firstChild=Gt,Te==null?se.lastChild=be:Te.previousSibling=be;do Gt.parentNode=se;while(Gt!==be&&(Gt=Gt.nextSibling));return dt(se.ownerDocument||se,se),fe.nodeType==A&&(fe.firstChild=fe.lastChild=null),fe}function ut(se,fe){return fe.parentNode&&fe.parentNode.removeChild(fe),fe.parentNode=se,fe.previousSibling=se.lastChild,fe.nextSibling=null,fe.previousSibling?fe.previousSibling.nextSibling=fe:se.firstChild=fe,se.lastChild=fe,dt(se.ownerDocument,se,fe),fe}xe.prototype={nodeName:"#document",nodeType:D,doctype:null,documentElement:null,_inc:1,insertBefore:function(se,fe){if(se.nodeType==A){for(var Te=se.firstChild;Te;){var je=Te.nextSibling;this.insertBefore(Te,fe),Te=je}return se}return ht(this,se,fe),se.ownerDocument=this,this.documentElement===null&&se.nodeType===h&&(this.documentElement=se),se},removeChild:function(se){return this.documentElement==se&&(this.documentElement=null),Ke(this,se)},replaceChild:function(se,fe){ht(this,se,fe,lt),se.ownerDocument=this,fe&&this.removeChild(fe),Nt(se)&&(this.documentElement=se)},importNode:function(se,fe){return En(this,se,fe)},getElementById:function(se){var fe=null;return me(this.documentElement,function(Te){if(Te.nodeType==h&&Te.getAttribute("id")==se)return fe=Te,!0}),fe},getElementsByClassName:function(se){var fe=a(se);return new Q(this,function(Te){var je=[];return fe.length>0&&me(Te.documentElement,function(pt){if(pt!==Te&&pt.nodeType===h){var Gt=pt.getAttribute("class");if(Gt){var be=se===Gt;if(!be){var ye=a(Gt);be=fe.every(o(ye))}be&&je.push(pt)}}}),je})},createElement:function(se){var fe=new St;fe.ownerDocument=this,fe.nodeName=se,fe.tagName=se,fe.localName=se,fe.childNodes=new V;var Te=fe.attributes=new le;return Te._ownerElement=fe,fe},createDocumentFragment:function(){var se=new Tt;return se.ownerDocument=this,se.childNodes=new V,se},createTextNode:function(se){var fe=new pr;return fe.ownerDocument=this,fe.appendData(se),fe},createComment:function(se){var fe=new jr;return fe.ownerDocument=this,fe.appendData(se),fe},createCDATASection:function(se){var fe=new ur;return fe.ownerDocument=this,fe.appendData(se),fe},createProcessingInstruction:function(se,fe){var Te=new Ht;return Te.ownerDocument=this,Te.tagName=Te.nodeName=Te.target=se,Te.nodeValue=Te.data=fe,Te},createAttribute:function(se){var fe=new ot;return fe.ownerDocument=this,fe.name=se,fe.nodeName=se,fe.localName=se,fe.specified=!0,fe},createEntityReference:function(se){var fe=new Nr;return fe.ownerDocument=this,fe.nodeName=se,fe},createElementNS:function(se,fe){var Te=new St,je=fe.split(":"),pt=Te.attributes=new le;return Te.childNodes=new V,Te.ownerDocument=this,Te.nodeName=fe,Te.tagName=fe,Te.namespaceURI=se,je.length==2?(Te.prefix=je[0],Te.localName=je[1]):Te.localName=fe,pt._ownerElement=Te,Te},createAttributeNS:function(se,fe){var Te=new ot,je=fe.split(":");return Te.ownerDocument=this,Te.nodeName=fe,Te.name=fe,Te.namespaceURI=se,Te.specified=!0,je.length==2?(Te.prefix=je[0],Te.localName=je[1]):Te.localName=fe,Te}},u(xe,ee);function St(){this._nsMap={}}St.prototype={nodeType:h,hasAttribute:function(se){return this.getAttributeNode(se)!=null},getAttribute:function(se){var fe=this.getAttributeNode(se);return fe&&fe.value||""},getAttributeNode:function(se){return this.attributes.getNamedItem(se)},setAttribute:function(se,fe){var Te=this.ownerDocument.createAttribute(se);Te.value=Te.nodeValue=""+fe,this.setAttributeNode(Te)},removeAttribute:function(se){var fe=this.getAttributeNode(se);fe&&this.removeAttributeNode(fe)},appendChild:function(se){return se.nodeType===A?this.insertBefore(se,null):ut(this,se)},setAttributeNode:function(se){return this.attributes.setNamedItem(se)},setAttributeNodeNS:function(se){return this.attributes.setNamedItemNS(se)},removeAttributeNode:function(se){return this.attributes.removeNamedItem(se.nodeName)},removeAttributeNS:function(se,fe){var Te=this.getAttributeNodeNS(se,fe);Te&&this.removeAttributeNode(Te)},hasAttributeNS:function(se,fe){return this.getAttributeNodeNS(se,fe)!=null},getAttributeNS:function(se,fe){var Te=this.getAttributeNodeNS(se,fe);return Te&&Te.value||""},setAttributeNS:function(se,fe,Te){var je=this.ownerDocument.createAttributeNS(se,fe);je.value=je.nodeValue=""+Te,this.setAttributeNode(je)},getAttributeNodeNS:function(se,fe){return this.attributes.getNamedItemNS(se,fe)},getElementsByTagName:function(se){return new Q(this,function(fe){var Te=[];return me(fe,function(je){je!==fe&&je.nodeType==h&&(se==="*"||je.tagName==se)&&Te.push(je)}),Te})},getElementsByTagNameNS:function(se,fe){return new Q(this,function(Te){var je=[];return me(Te,function(pt){pt!==Te&&pt.nodeType===h&&(se==="*"||pt.namespaceURI===se)&&(fe==="*"||pt.localName==fe)&&je.push(pt)}),je})}},xe.prototype.getElementsByTagName=St.prototype.getElementsByTagName,xe.prototype.getElementsByTagNameNS=St.prototype.getElementsByTagNameNS,u(St,ee);function ot(){}ot.prototype.nodeType=m,u(ot,ee);function yr(){}yr.prototype={data:"",substringData:function(se,fe){return this.data.substring(se,se+fe)},appendData:function(se){se=this.data+se,this.nodeValue=this.data=se,this.length=se.length},insertData:function(se,fe){this.replaceData(se,0,fe)},appendChild:function(se){throw new Error(U[B])},deleteData:function(se,fe){this.replaceData(se,fe,"")},replaceData:function(se,fe,Te){var je=this.data.substring(0,se),pt=this.data.substring(se+fe);Te=je+Te+pt,this.nodeValue=this.data=Te,this.length=Te.length}},u(yr,ee);function pr(){}pr.prototype={nodeName:"#text",nodeType:g,splitText:function(se){var fe=this.data,Te=fe.substring(se);fe=fe.substring(0,se),this.data=this.nodeValue=fe,this.length=fe.length;var je=this.ownerDocument.createTextNode(Te);return this.parentNode&&this.parentNode.insertBefore(je,this.nextSibling),je}},u(pr,yr);function jr(){}jr.prototype={nodeName:"#comment",nodeType:E},u(jr,yr);function ur(){}ur.prototype={nodeName:"#cdata-section",nodeType:y},u(ur,yr);function Wt(){}Wt.prototype.nodeType=I,u(Wt,ee);function mr(){}mr.prototype.nodeType=L,u(mr,ee);function Tr(){}Tr.prototype.nodeType=x,u(Tr,ee);function Nr(){}Nr.prototype.nodeType=v,u(Nr,ee);function Tt(){}Tt.prototype.nodeName="#document-fragment",Tt.prototype.nodeType=A,u(Tt,ee);function Ht(){}Ht.prototype.nodeType=w,u(Ht,ee);function An(){}An.prototype.serializeToString=function(se,fe,Te){return Vt.call(se,fe,Te)},ee.prototype.toString=Vt;function Vt(se,fe){var Te=[],je=this.nodeType==9&&this.documentElement||this,pt=je.prefix,Gt=je.namespaceURI;if(Gt&&pt==null){var pt=je.lookupPrefix(Gt);if(pt==null)var be=[{namespace:Gt,prefix:null}]}return qr(this,Te,se,fe,be),Te.join("")}function Cr(se,fe,Te){var je=se.prefix||"",pt=se.namespaceURI;if(!pt||je==="xml"&&pt===t.XML||pt===t.XMLNS)return!1;for(var Gt=Te.length;Gt--;){var be=Te[Gt];if(be.prefix===je)return be.namespace!==pt}return!0}function Ur(se,fe,Te){se.push(" ",fe,'="',Te.replace(/[<>&"\t\n\r]/g,pe),'"')}function qr(se,fe,Te,je,pt){if(pt||(pt=[]),je)if(se=je(se),se){if(typeof se=="string"){fe.push(se);return}}else return;switch(se.nodeType){case h:var Gt=se.attributes,be=Gt.length,Ft=se.firstChild,ye=se.tagName;Te=t.isHTML(se.namespaceURI)||Te;var Ae=ye;if(!Te&&!se.prefix&&se.namespaceURI){for(var Ge,Xe=0;Xe<Gt.length;Xe++)if(Gt.item(Xe).name==="xmlns"){Ge=Gt.item(Xe).value;break}if(!Ge)for(var yt=pt.length-1;yt>=0;yt--){var At=pt[yt];if(At.prefix===""&&At.namespace===se.namespaceURI){Ge=At.namespace;break}}if(Ge!==se.namespaceURI)for(var yt=pt.length-1;yt>=0;yt--){var At=pt[yt];if(At.namespace===se.namespaceURI){At.prefix&&(Ae=At.prefix+":"+ye);break}}}fe.push("<",Ae);for(var st=0;st<be;st++){var gt=Gt.item(st);gt.prefix=="xmlns"?pt.push({prefix:gt.localName,namespace:gt.value}):gt.nodeName=="xmlns"&&pt.push({prefix:"",namespace:gt.value})}for(var st=0;st<be;st++){var gt=Gt.item(st);if(Cr(gt,Te,pt)){var jt=gt.prefix||"",Kt=gt.namespaceURI;Ur(fe,jt?"xmlns:"+jt:"xmlns",Kt),pt.push({prefix:jt,namespace:Kt})}qr(gt,fe,Te,je,pt)}if(ye===Ae&&Cr(se,Te,pt)){var jt=se.prefix||"",Kt=se.namespaceURI;Ur(fe,jt?"xmlns:"+jt:"xmlns",Kt),pt.push({prefix:jt,namespace:Kt})}if(Ft||Te&&!/^(?:meta|link|img|br|hr|input)$/i.test(ye)){if(fe.push(">"),Te&&/^script$/i.test(ye))for(;Ft;)Ft.data?fe.push(Ft.data):qr(Ft,fe,Te,je,pt.slice()),Ft=Ft.nextSibling;else for(;Ft;)qr(Ft,fe,Te,je,pt.slice()),Ft=Ft.nextSibling;fe.push("</",Ae,">")}else fe.push("/>");return;case D:case A:for(var Ft=se.firstChild;Ft;)qr(Ft,fe,Te,je,pt.slice()),Ft=Ft.nextSibling;return;case m:return Ur(fe,se.name,se.value);case g:return fe.push(se.data.replace(/[<&>]/g,pe));case y:return fe.push("<![CDATA[",se.data,"]]>");case E:return fe.push("<!--",se.data,"-->");case I:var dr=se.publicId,xt=se.systemId;if(fe.push("<!DOCTYPE ",se.name),dr)fe.push(" PUBLIC ",dr),xt&&xt!="."&&fe.push(" ",xt),fe.push(">");else if(xt&&xt!=".")fe.push(" SYSTEM ",xt,">");else{var fr=se.internalSubset;fr&&fe.push(" [",fr,"]"),fe.push(">")}return;case w:return fe.push("<?",se.target," ",se.data,"?>");case v:return fe.push("&",se.nodeName,";");default:fe.push("??",se.nodeName)}}function En(se,fe,Te){var je;switch(fe.nodeType){case h:je=fe.cloneNode(!1),je.ownerDocument=se;case A:break;case m:Te=!0;break}if(je||(je=fe.cloneNode(!1)),je.ownerDocument=se,je.parentNode=null,Te)for(var pt=fe.firstChild;pt;)je.appendChild(En(se,pt,Te)),pt=pt.nextSibling;return je}function Dn(se,fe,Te){var je=new fe.constructor;for(var pt in fe)if(Object.prototype.hasOwnProperty.call(fe,pt)){var Gt=fe[pt];typeof Gt!="object"&&Gt!=je[pt]&&(je[pt]=Gt)}switch(fe.childNodes&&(je.childNodes=new V),je.ownerDocument=se,je.nodeType){case h:var be=fe.attributes,ye=je.attributes=new le,Ae=be.length;ye._ownerElement=je;for(var Ge=0;Ge<Ae;Ge++)je.setAttributeNode(Dn(se,be.item(Ge),!0));break;case m:Te=!0}if(Te)for(var Xe=fe.firstChild;Xe;)je.appendChild(Dn(se,Xe,Te)),Xe=Xe.nextSibling;return je}function In(se,fe,Te){se[fe]=Te}try{if(Object.defineProperty){let se=function(fe){switch(fe.nodeType){case h:case A:var Te=[];for(fe=fe.firstChild;fe;)fe.nodeType!==7&&fe.nodeType!==8&&Te.push(se(fe)),fe=fe.nextSibling;return Te.join("");default:return fe.nodeValue}};var Mr=se;Object.defineProperty(Q.prototype,"length",{get:function(){return ie(this),this.$$length}}),Object.defineProperty(ee.prototype,"textContent",{get:function(){return se(this)},set:function(fe){switch(this.nodeType){case h:case A:for(;this.firstChild;)this.removeChild(this.firstChild);(fe||String(fe))&&this.appendChild(this.ownerDocument.createTextNode(fe));break;default:this.data=fe,this.value=fe,this.nodeValue=fe}}}),In=function(fe,Te,je){fe["$$"+Te]=je}}}catch{}return ac.DocumentType=Wt,ac.DOMException=q,ac.DOMImplementation=ue,ac.Element=St,ac.Node=ee,ac.NodeList=V,ac.XMLSerializer=An,ac}var Jm={},R1={},fO;function Bse(){return fO||(fO=1,(function(r){var e=$b().freeze;r.XML_ENTITIES=e({amp:"&",apos:"'",gt:">",lt:"<",quot:'"'}),r.HTML_ENTITIES=e({Aacute:"",aacute:"",Abreve:"",abreve:"",ac:"",acd:"",acE:"",Acirc:"",acirc:"",acute:"",Acy:"",acy:"",AElig:"",aelig:"",af:"",Afr:"",afr:"",Agrave:"",agrave:"",alefsym:"",aleph:"",Alpha:"",alpha:"",Amacr:"",amacr:"",amalg:"",AMP:"&",amp:"&",And:"",and:"",andand:"",andd:"",andslope:"",andv:"",ang:"",ange:"",angle:"",angmsd:"",angmsdaa:"",angmsdab:"",angmsdac:"",angmsdad:"",angmsdae:"",angmsdaf:"",angmsdag:"",angmsdah:"",angrt:"",angrtvb:"",angrtvbd:"",angsph:"",angst:"",angzarr:"",Aogon:"",aogon:"",Aopf:"",aopf:"",ap:"",apacir:"",apE:"",ape:"",apid:"",apos:"'",ApplyFunction:"",approx:"",approxeq:"",Aring:"",aring:"",Ascr:"",ascr:"",Assign:"",ast:"*",asymp:"",asympeq:"",Atilde:"",atilde:"",Auml:"",auml:"",awconint:"",awint:"",backcong:"",backepsilon:"",backprime:"",backsim:"",backsimeq:"",Backslash:"",Barv:"",barvee:"",Barwed:"",barwed:"",barwedge:"",bbrk:"",bbrktbrk:"",bcong:"",Bcy:"",bcy:"",bdquo:"",becaus:"",Because:"",because:"",bemptyv:"",bepsi:"",bernou:"",Bernoullis:"",Beta:"",beta:"",beth:"",between:"",Bfr:"",bfr:"",bigcap:"",bigcirc:"",bigcup:"",bigodot:"",bigoplus:"",bigotimes:"",bigsqcup:"",bigstar:"",bigtriangledown:"",bigtriangleup:"",biguplus:"",bigvee:"",bigwedge:"",bkarow:"",blacklozenge:"",blacksquare:"",blacktriangle:"",blacktriangledown:"",blacktriangleleft:"",blacktriangleright:"",blank:"",blk12:"",blk14:"",blk34:"",block:"",bne:"=",bnequiv:"",bNot:"",bnot:"",Bopf:"",bopf:"",bot:"",bottom:"",bowtie:"",boxbox:"",boxDL:"",boxDl:"",boxdL:"",boxdl:"",boxDR:"",boxDr:"",boxdR:"",boxdr:"",boxH:"",boxh:"",boxHD:"",boxHd:"",boxhD:"",boxhd:"",boxHU:"",boxHu:"",boxhU:"",boxhu:"",boxminus:"",boxplus:"",boxtimes:"",boxUL:"",boxUl:"",boxuL:"",boxul:"",boxUR:"",boxUr:"",boxuR:"",boxur:"",boxV:"",boxv:"",boxVH:"",boxVh:"",boxvH:"",boxvh:"",boxVL:"",boxVl:"",boxvL:"",boxvl:"",boxVR:"",boxVr:"",boxvR:"",boxvr:"",bprime:"",Breve:"",breve:"",brvbar:"",Bscr:"",bscr:"",bsemi:"",bsim:"",bsime:"",bsol:"\\",bsolb:"",bsolhsub:"",bull:"",bullet:"",bump:"",bumpE:"",bumpe:"",Bumpeq:"",bumpeq:"",Cacute:"",cacute:"",Cap:"",cap:"",capand:"",capbrcup:"",capcap:"",capcup:"",capdot:"",CapitalDifferentialD:"",caps:"",caret:"",caron:"",Cayleys:"",ccaps:"",Ccaron:"",ccaron:"",Ccedil:"",ccedil:"",Ccirc:"",ccirc:"",Cconint:"",ccups:"",ccupssm:"",Cdot:"",cdot:"",cedil:"",Cedilla:"",cemptyv:"",cent:"",CenterDot:"",centerdot:"",Cfr:"",cfr:"",CHcy:"",chcy:"",check:"",checkmark:"",Chi:"",chi:"",cir:"",circ:"",circeq:"",circlearrowleft:"",circlearrowright:"",circledast:"",circledcirc:"",circleddash:"",CircleDot:"",circledR:"",circledS:"",CircleMinus:"",CirclePlus:"",CircleTimes:"",cirE:"",cire:"",cirfnint:"",cirmid:"",cirscir:"",ClockwiseContourIntegral:"",CloseCurlyDoubleQuote:"",CloseCurlyQuote:"",clubs:"",clubsuit:"",Colon:"",colon:":",Colone:"",colone:"",coloneq:"",comma:",",commat:"@",comp:"",compfn:"",complement:"",complexes:"",cong:"",congdot:"",Congruent:"",Conint:"",conint:"",ContourIntegral:"",Copf:"",copf:"",coprod:"",Coproduct:"",COPY:"",copy:"",copysr:"",CounterClockwiseContourIntegral:"",crarr:"",Cross:"",cross:"",Cscr:"",cscr:"",csub:"",csube:"",csup:"",csupe:"",ctdot:"",cudarrl:"",cudarrr:"",cuepr:"",cuesc:"",cularr:"",cularrp:"",Cup:"",cup:"",cupbrcap:"",CupCap:"",cupcap:"",cupcup:"",cupdot:"",cupor:"",cups:"",curarr:"",curarrm:"",curlyeqprec:"",curlyeqsucc:"",curlyvee:"",curlywedge:"",curren:"",curvearrowleft:"",curvearrowright:"",cuvee:"",cuwed:"",cwconint:"",cwint:"",cylcty:"",Dagger:"",dagger:"",daleth:"",Darr:"",dArr:"",darr:"",dash:"",Dashv:"",dashv:"",dbkarow:"",dblac:"",Dcaron:"",dcaron:"",Dcy:"",dcy:"",DD:"",dd:"",ddagger:"",ddarr:"",DDotrahd:"",ddotseq:"",deg:"",Del:"",Delta:"",delta:"",demptyv:"",dfisht:"",Dfr:"",dfr:"",dHar:"",dharl:"",dharr:"",DiacriticalAcute:"",DiacriticalDot:"",DiacriticalDoubleAcute:"",DiacriticalGrave:"`",DiacriticalTilde:"",diam:"",Diamond:"",diamond:"",diamondsuit:"",diams:"",die:"",DifferentialD:"",digamma:"",disin:"",div:"",divide:"",divideontimes:"",divonx:"",DJcy:"",djcy:"",dlcorn:"",dlcrop:"",dollar:"$",Dopf:"",dopf:"",Dot:"",dot:"",DotDot:"",doteq:"",doteqdot:"",DotEqual:"",dotminus:"",dotplus:"",dotsquare:"",doublebarwedge:"",DoubleContourIntegral:"",DoubleDot:"",DoubleDownArrow:"",DoubleLeftArrow:"",DoubleLeftRightArrow:"",DoubleLeftTee:"",DoubleLongLeftArrow:"",DoubleLongLeftRightArrow:"",DoubleLongRightArrow:"",DoubleRightArrow:"",DoubleRightTee:"",DoubleUpArrow:"",DoubleUpDownArrow:"",DoubleVerticalBar:"",DownArrow:"",Downarrow:"",downarrow:"",DownArrowBar:"",DownArrowUpArrow:"",DownBreve:"",downdownarrows:"",downharpoonleft:"",downharpoonright:"",DownLeftRightVector:"",DownLeftTeeVector:"",DownLeftVector:"",DownLeftVectorBar:"",DownRightTeeVector:"",DownRightVector:"",DownRightVectorBar:"",DownTee:"",DownTeeArrow:"",drbkarow:"",drcorn:"",drcrop:"",Dscr:"",dscr:"",DScy:"",dscy:"",dsol:"",Dstrok:"",dstrok:"",dtdot:"",dtri:"",dtrif:"",duarr:"",duhar:"",dwangle:"",DZcy:"",dzcy:"",dzigrarr:"",Eacute:"",eacute:"",easter:"",Ecaron:"",ecaron:"",ecir:"",Ecirc:"",ecirc:"",ecolon:"",Ecy:"",ecy:"",eDDot:"",Edot:"",eDot:"",edot:"",ee:"",efDot:"",Efr:"",efr:"",eg:"",Egrave:"",egrave:"",egs:"",egsdot:"",el:"",Element:"",elinters:"",ell:"",els:"",elsdot:"",Emacr:"",emacr:"",empty:"",emptyset:"",EmptySmallSquare:"",emptyv:"",EmptyVerySmallSquare:"",emsp:"",emsp13:"",emsp14:"",ENG:"",eng:"",ensp:"",Eogon:"",eogon:"",Eopf:"",eopf:"",epar:"",eparsl:"",eplus:"",epsi:"",Epsilon:"",epsilon:"",epsiv:"",eqcirc:"",eqcolon:"",eqsim:"",eqslantgtr:"",eqslantless:"",Equal:"",equals:"=",EqualTilde:"",equest:"",Equilibrium:"",equiv:"",equivDD:"",eqvparsl:"",erarr:"",erDot:"",Escr:"",escr:"",esdot:"",Esim:"",esim:"",Eta:"",eta:"",ETH:"",eth:"",Euml:"",euml:"",euro:"",excl:"!",exist:"",Exists:"",expectation:"",ExponentialE:"",exponentiale:"",fallingdotseq:"",Fcy:"",fcy:"",female:"",ffilig:"",fflig:"",ffllig:"",Ffr:"",ffr:"",filig:"",FilledSmallSquare:"",FilledVerySmallSquare:"",fjlig:"fj",flat:"",fllig:"",fltns:"",fnof:"",Fopf:"",fopf:"",ForAll:"",forall:"",fork:"",forkv:"",Fouriertrf:"",fpartint:"",frac12:"",frac13:"",frac14:"",frac15:"",frac16:"",frac18:"",frac23:"",frac25:"",frac34:"",frac35:"",frac38:"",frac45:"",frac56:"",frac58:"",frac78:"",frasl:"",frown:"",Fscr:"",fscr:"",gacute:"",Gamma:"",gamma:"",Gammad:"",gammad:"",gap:"",Gbreve:"",gbreve:"",Gcedil:"",Gcirc:"",gcirc:"",Gcy:"",gcy:"",Gdot:"",gdot:"",gE:"",ge:"",gEl:"",gel:"",geq:"",geqq:"",geqslant:"",ges:"",gescc:"",gesdot:"",gesdoto:"",gesdotol:"",gesl:"",gesles:"",Gfr:"",gfr:"",Gg:"",gg:"",ggg:"",gimel:"",GJcy:"",gjcy:"",gl:"",gla:"",glE:"",glj:"",gnap:"",gnapprox:"",gnE:"",gne:"",gneq:"",gneqq:"",gnsim:"",Gopf:"",gopf:"",grave:"`",GreaterEqual:"",GreaterEqualLess:"",GreaterFullEqual:"",GreaterGreater:"",GreaterLess:"",GreaterSlantEqual:"",GreaterTilde:"",Gscr:"",gscr:"",gsim:"",gsime:"",gsiml:"",Gt:"",GT:">",gt:">",gtcc:"",gtcir:"",gtdot:"",gtlPar:"",gtquest:"",gtrapprox:"",gtrarr:"",gtrdot:"",gtreqless:"",gtreqqless:"",gtrless:"",gtrsim:"",gvertneqq:"",gvnE:"",Hacek:"",hairsp:"",half:"",hamilt:"",HARDcy:"",hardcy:"",hArr:"",harr:"",harrcir:"",harrw:"",Hat:"^",hbar:"",Hcirc:"",hcirc:"",hearts:"",heartsuit:"",hellip:"",hercon:"",Hfr:"",hfr:"",HilbertSpace:"",hksearow:"",hkswarow:"",hoarr:"",homtht:"",hookleftarrow:"",hookrightarrow:"",Hopf:"",hopf:"",horbar:"",HorizontalLine:"",Hscr:"",hscr:"",hslash:"",Hstrok:"",hstrok:"",HumpDownHump:"",HumpEqual:"",hybull:"",hyphen:"",Iacute:"",iacute:"",ic:"",Icirc:"",icirc:"",Icy:"",icy:"",Idot:"",IEcy:"",iecy:"",iexcl:"",iff:"",Ifr:"",ifr:"",Igrave:"",igrave:"",ii:"",iiiint:"",iiint:"",iinfin:"",iiota:"",IJlig:"",ijlig:"",Im:"",Imacr:"",imacr:"",image:"",ImaginaryI:"",imagline:"",imagpart:"",imath:"",imof:"",imped:"",Implies:"",in:"",incare:"",infin:"",infintie:"",inodot:"",Int:"",int:"",intcal:"",integers:"",Integral:"",intercal:"",Intersection:"",intlarhk:"",intprod:"",InvisibleComma:"",InvisibleTimes:"",IOcy:"",iocy:"",Iogon:"",iogon:"",Iopf:"",iopf:"",Iota:"",iota:"",iprod:"",iquest:"",Iscr:"",iscr:"",isin:"",isindot:"",isinE:"",isins:"",isinsv:"",isinv:"",it:"",Itilde:"",itilde:"",Iukcy:"",iukcy:"",Iuml:"",iuml:"",Jcirc:"",jcirc:"",Jcy:"",jcy:"",Jfr:"",jfr:"",jmath:"",Jopf:"",jopf:"",Jscr:"",jscr:"",Jsercy:"",jsercy:"",Jukcy:"",jukcy:"",Kappa:"",kappa:"",kappav:"",Kcedil:"",kcedil:"",Kcy:"",kcy:"",Kfr:"",kfr:"",kgreen:"",KHcy:"",khcy:"",KJcy:"",kjcy:"",Kopf:"",kopf:"",Kscr:"",kscr:"",lAarr:"",Lacute:"",lacute:"",laemptyv:"",lagran:"",Lambda:"",lambda:"",Lang:"",lang:"",langd:"",langle:"",lap:"",Laplacetrf:"",laquo:"",Larr:"",lArr:"",larr:"",larrb:"",larrbfs:"",larrfs:"",larrhk:"",larrlp:"",larrpl:"",larrsim:"",larrtl:"",lat:"",lAtail:"",latail:"",late:"",lates:"",lBarr:"",lbarr:"",lbbrk:"",lbrace:"{",lbrack:"[",lbrke:"",lbrksld:"",lbrkslu:"",Lcaron:"",lcaron:"",Lcedil:"",lcedil:"",lceil:"",lcub:"{",Lcy:"",lcy:"",ldca:"",ldquo:"",ldquor:"",ldrdhar:"",ldrushar:"",ldsh:"",lE:"",le:"",LeftAngleBracket:"",LeftArrow:"",Leftarrow:"",leftarrow:"",LeftArrowBar:"",LeftArrowRightArrow:"",leftarrowtail:"",LeftCeiling:"",LeftDoubleBracket:"",LeftDownTeeVector:"",LeftDownVector:"",LeftDownVectorBar:"",LeftFloor:"",leftharpoondown:"",leftharpoonup:"",leftleftarrows:"",LeftRightArrow:"",Leftrightarrow:"",leftrightarrow:"",leftrightarrows:"",leftrightharpoons:"",leftrightsquigarrow:"",LeftRightVector:"",LeftTee:"",LeftTeeArrow:"",LeftTeeVector:"",leftthreetimes:"",LeftTriangle:"",LeftTriangleBar:"",LeftTriangleEqual:"",LeftUpDownVector:"",LeftUpTeeVector:"",LeftUpVector:"",LeftUpVectorBar:"",LeftVector:"",LeftVectorBar:"",lEg:"",leg:"",leq:"",leqq:"",leqslant:"",les:"",lescc:"",lesdot:"",lesdoto:"",lesdotor:"",lesg:"",lesges:"",lessapprox:"",lessdot:"",lesseqgtr:"",lesseqqgtr:"",LessEqualGreater:"",LessFullEqual:"",LessGreater:"",lessgtr:"",LessLess:"",lesssim:"",LessSlantEqual:"",LessTilde:"",lfisht:"",lfloor:"",Lfr:"",lfr:"",lg:"",lgE:"",lHar:"",lhard:"",lharu:"",lharul:"",lhblk:"",LJcy:"",ljcy:"",Ll:"",ll:"",llarr:"",llcorner:"",Lleftarrow:"",llhard:"",lltri:"",Lmidot:"",lmidot:"",lmoust:"",lmoustache:"",lnap:"",lnapprox:"",lnE:"",lne:"",lneq:"",lneqq:"",lnsim:"",loang:"",loarr:"",lobrk:"",LongLeftArrow:"",Longleftarrow:"",longleftarrow:"",LongLeftRightArrow:"",Longleftrightarrow:"",longleftrightarrow:"",longmapsto:"",LongRightArrow:"",Longrightarrow:"",longrightarrow:"",looparrowleft:"",looparrowright:"",lopar:"",Lopf:"",lopf:"",loplus:"",lotimes:"",lowast:"",lowbar:"_",LowerLeftArrow:"",LowerRightArrow:"",loz:"",lozenge:"",lozf:"",lpar:"(",lparlt:"",lrarr:"",lrcorner:"",lrhar:"",lrhard:"",lrm:"",lrtri:"",lsaquo:"",Lscr:"",lscr:"",Lsh:"",lsh:"",lsim:"",lsime:"",lsimg:"",lsqb:"[",lsquo:"",lsquor:"",Lstrok:"",lstrok:"",Lt:"",LT:"<",lt:"<",ltcc:"",ltcir:"",ltdot:"",lthree:"",ltimes:"",ltlarr:"",ltquest:"",ltri:"",ltrie:"",ltrif:"",ltrPar:"",lurdshar:"",luruhar:"",lvertneqq:"",lvnE:"",macr:"",male:"",malt:"",maltese:"",Map:"",map:"",mapsto:"",mapstodown:"",mapstoleft:"",mapstoup:"",marker:"",mcomma:"",Mcy:"",mcy:"",mdash:"",mDDot:"",measuredangle:"",MediumSpace:"",Mellintrf:"",Mfr:"",mfr:"",mho:"",micro:"",mid:"",midast:"*",midcir:"",middot:"",minus:"",minusb:"",minusd:"",minusdu:"",MinusPlus:"",mlcp:"",mldr:"",mnplus:"",models:"",Mopf:"",mopf:"",mp:"",Mscr:"",mscr:"",mstpos:"",Mu:"",mu:"",multimap:"",mumap:"",nabla:"",Nacute:"",nacute:"",nang:"",nap:"",napE:"",napid:"",napos:"",napprox:"",natur:"",natural:"",naturals:"",nbsp:"",nbump:"",nbumpe:"",ncap:"",Ncaron:"",ncaron:"",Ncedil:"",ncedil:"",ncong:"",ncongdot:"",ncup:"",Ncy:"",ncy:"",ndash:"",ne:"",nearhk:"",neArr:"",nearr:"",nearrow:"",nedot:"",NegativeMediumSpace:"",NegativeThickSpace:"",NegativeThinSpace:"",NegativeVeryThinSpace:"",nequiv:"",nesear:"",nesim:"",NestedGreaterGreater:"",NestedLessLess:"",NewLine:`
`,nexist:"",nexists:"",Nfr:"",nfr:"",ngE:"",nge:"",ngeq:"",ngeqq:"",ngeqslant:"",nges:"",nGg:"",ngsim:"",nGt:"",ngt:"",ngtr:"",nGtv:"",nhArr:"",nharr:"",nhpar:"",ni:"",nis:"",nisd:"",niv:"",NJcy:"",njcy:"",nlArr:"",nlarr:"",nldr:"",nlE:"",nle:"",nLeftarrow:"",nleftarrow:"",nLeftrightarrow:"",nleftrightarrow:"",nleq:"",nleqq:"",nleqslant:"",nles:"",nless:"",nLl:"",nlsim:"",nLt:"",nlt:"",nltri:"",nltrie:"",nLtv:"",nmid:"",NoBreak:"",NonBreakingSpace:"",Nopf:"",nopf:"",Not:"",not:"",NotCongruent:"",NotCupCap:"",NotDoubleVerticalBar:"",NotElement:"",NotEqual:"",NotEqualTilde:"",NotExists:"",NotGreater:"",NotGreaterEqual:"",NotGreaterFullEqual:"",NotGreaterGreater:"",NotGreaterLess:"",NotGreaterSlantEqual:"",NotGreaterTilde:"",NotHumpDownHump:"",NotHumpEqual:"",notin:"",notindot:"",notinE:"",notinva:"",notinvb:"",notinvc:"",NotLeftTriangle:"",NotLeftTriangleBar:"",NotLeftTriangleEqual:"",NotLess:"",NotLessEqual:"",NotLessGreater:"",NotLessLess:"",NotLessSlantEqual:"",NotLessTilde:"",NotNestedGreaterGreater:"",NotNestedLessLess:"",notni:"",notniva:"",notnivb:"",notnivc:"",NotPrecedes:"",NotPrecedesEqual:"",NotPrecedesSlantEqual:"",NotReverseElement:"",NotRightTriangle:"",NotRightTriangleBar:"",NotRightTriangleEqual:"",NotSquareSubset:"",NotSquareSubsetEqual:"",NotSquareSuperset:"",NotSquareSupersetEqual:"",NotSubset:"",NotSubsetEqual:"",NotSucceeds:"",NotSucceedsEqual:"",NotSucceedsSlantEqual:"",NotSucceedsTilde:"",NotSuperset:"",NotSupersetEqual:"",NotTilde:"",NotTildeEqual:"",NotTildeFullEqual:"",NotTildeTilde:"",NotVerticalBar:"",npar:"",nparallel:"",nparsl:"",npart:"",npolint:"",npr:"",nprcue:"",npre:"",nprec:"",npreceq:"",nrArr:"",nrarr:"",nrarrc:"",nrarrw:"",nRightarrow:"",nrightarrow:"",nrtri:"",nrtrie:"",nsc:"",nsccue:"",nsce:"",Nscr:"",nscr:"",nshortmid:"",nshortparallel:"",nsim:"",nsime:"",nsimeq:"",nsmid:"",nspar:"",nsqsube:"",nsqsupe:"",nsub:"",nsubE:"",nsube:"",nsubset:"",nsubseteq:"",nsubseteqq:"",nsucc:"",nsucceq:"",nsup:"",nsupE:"",nsupe:"",nsupset:"",nsupseteq:"",nsupseteqq:"",ntgl:"",Ntilde:"",ntilde:"",ntlg:"",ntriangleleft:"",ntrianglelefteq:"",ntriangleright:"",ntrianglerighteq:"",Nu:"",nu:"",num:"#",numero:"",numsp:"",nvap:"",nVDash:"",nVdash:"",nvDash:"",nvdash:"",nvge:"",nvgt:">",nvHarr:"",nvinfin:"",nvlArr:"",nvle:"",nvlt:"<",nvltrie:"",nvrArr:"",nvrtrie:"",nvsim:"",nwarhk:"",nwArr:"",nwarr:"",nwarrow:"",nwnear:"",Oacute:"",oacute:"",oast:"",ocir:"",Ocirc:"",ocirc:"",Ocy:"",ocy:"",odash:"",Odblac:"",odblac:"",odiv:"",odot:"",odsold:"",OElig:"",oelig:"",ofcir:"",Ofr:"",ofr:"",ogon:"",Ograve:"",ograve:"",ogt:"",ohbar:"",ohm:"",oint:"",olarr:"",olcir:"",olcross:"",oline:"",olt:"",Omacr:"",omacr:"",Omega:"",omega:"",Omicron:"",omicron:"",omid:"",ominus:"",Oopf:"",oopf:"",opar:"",OpenCurlyDoubleQuote:"",OpenCurlyQuote:"",operp:"",oplus:"",Or:"",or:"",orarr:"",ord:"",order:"",orderof:"",ordf:"",ordm:"",origof:"",oror:"",orslope:"",orv:"",oS:"",Oscr:"",oscr:"",Oslash:"",oslash:"",osol:"",Otilde:"",otilde:"",Otimes:"",otimes:"",otimesas:"",Ouml:"",ouml:"",ovbar:"",OverBar:"",OverBrace:"",OverBracket:"",OverParenthesis:"",par:"",para:"",parallel:"",parsim:"",parsl:"",part:"",PartialD:"",Pcy:"",pcy:"",percnt:"%",period:".",permil:"",perp:"",pertenk:"",Pfr:"",pfr:"",Phi:"",phi:"",phiv:"",phmmat:"",phone:"",Pi:"",pi:"",pitchfork:"",piv:"",planck:"",planckh:"",plankv:"",plus:"+",plusacir:"",plusb:"",pluscir:"",plusdo:"",plusdu:"",pluse:"",PlusMinus:"",plusmn:"",plussim:"",plustwo:"",pm:"",Poincareplane:"",pointint:"",Popf:"",popf:"",pound:"",Pr:"",pr:"",prap:"",prcue:"",prE:"",pre:"",prec:"",precapprox:"",preccurlyeq:"",Precedes:"",PrecedesEqual:"",PrecedesSlantEqual:"",PrecedesTilde:"",preceq:"",precnapprox:"",precneqq:"",precnsim:"",precsim:"",Prime:"",prime:"",primes:"",prnap:"",prnE:"",prnsim:"",prod:"",Product:"",profalar:"",profline:"",profsurf:"",prop:"",Proportion:"",Proportional:"",propto:"",prsim:"",prurel:"",Pscr:"",pscr:"",Psi:"",psi:"",puncsp:"",Qfr:"",qfr:"",qint:"",Qopf:"",qopf:"",qprime:"",Qscr:"",qscr:"",quaternions:"",quatint:"",quest:"?",questeq:"",QUOT:'"',quot:'"',rAarr:"",race:"",Racute:"",racute:"",radic:"",raemptyv:"",Rang:"",rang:"",rangd:"",range:"",rangle:"",raquo:"",Rarr:"",rArr:"",rarr:"",rarrap:"",rarrb:"",rarrbfs:"",rarrc:"",rarrfs:"",rarrhk:"",rarrlp:"",rarrpl:"",rarrsim:"",Rarrtl:"",rarrtl:"",rarrw:"",rAtail:"",ratail:"",ratio:"",rationals:"",RBarr:"",rBarr:"",rbarr:"",rbbrk:"",rbrace:"}",rbrack:"]",rbrke:"",rbrksld:"",rbrkslu:"",Rcaron:"",rcaron:"",Rcedil:"",rcedil:"",rceil:"",rcub:"}",Rcy:"",rcy:"",rdca:"",rdldhar:"",rdquo:"",rdquor:"",rdsh:"",Re:"",real:"",realine:"",realpart:"",reals:"",rect:"",REG:"",reg:"",ReverseElement:"",ReverseEquilibrium:"",ReverseUpEquilibrium:"",rfisht:"",rfloor:"",Rfr:"",rfr:"",rHar:"",rhard:"",rharu:"",rharul:"",Rho:"",rho:"",rhov:"",RightAngleBracket:"",RightArrow:"",Rightarrow:"",rightarrow:"",RightArrowBar:"",RightArrowLeftArrow:"",rightarrowtail:"",RightCeiling:"",RightDoubleBracket:"",RightDownTeeVector:"",RightDownVector:"",RightDownVectorBar:"",RightFloor:"",rightharpoondown:"",rightharpoonup:"",rightleftarrows:"",rightleftharpoons:"",rightrightarrows:"",rightsquigarrow:"",RightTee:"",RightTeeArrow:"",RightTeeVector:"",rightthreetimes:"",RightTriangle:"",RightTriangleBar:"",RightTriangleEqual:"",RightUpDownVector:"",RightUpTeeVector:"",RightUpVector:"",RightUpVectorBar:"",RightVector:"",RightVectorBar:"",ring:"",risingdotseq:"",rlarr:"",rlhar:"",rlm:"",rmoust:"",rmoustache:"",rnmid:"",roang:"",roarr:"",robrk:"",ropar:"",Ropf:"",ropf:"",roplus:"",rotimes:"",RoundImplies:"",rpar:")",rpargt:"",rppolint:"",rrarr:"",Rrightarrow:"",rsaquo:"",Rscr:"",rscr:"",Rsh:"",rsh:"",rsqb:"]",rsquo:"",rsquor:"",rthree:"",rtimes:"",rtri:"",rtrie:"",rtrif:"",rtriltri:"",RuleDelayed:"",ruluhar:"",rx:"",Sacute:"",sacute:"",sbquo:"",Sc:"",sc:"",scap:"",Scaron:"",scaron:"",sccue:"",scE:"",sce:"",Scedil:"",scedil:"",Scirc:"",scirc:"",scnap:"",scnE:"",scnsim:"",scpolint:"",scsim:"",Scy:"",scy:"",sdot:"",sdotb:"",sdote:"",searhk:"",seArr:"",searr:"",searrow:"",sect:"",semi:";",seswar:"",setminus:"",setmn:"",sext:"",Sfr:"",sfr:"",sfrown:"",sharp:"",SHCHcy:"",shchcy:"",SHcy:"",shcy:"",ShortDownArrow:"",ShortLeftArrow:"",shortmid:"",shortparallel:"",ShortRightArrow:"",ShortUpArrow:"",shy:"",Sigma:"",sigma:"",sigmaf:"",sigmav:"",sim:"",simdot:"",sime:"",simeq:"",simg:"",simgE:"",siml:"",simlE:"",simne:"",simplus:"",simrarr:"",slarr:"",SmallCircle:"",smallsetminus:"",smashp:"",smeparsl:"",smid:"",smile:"",smt:"",smte:"",smtes:"",SOFTcy:"",softcy:"",sol:"/",solb:"",solbar:"",Sopf:"",sopf:"",spades:"",spadesuit:"",spar:"",sqcap:"",sqcaps:"",sqcup:"",sqcups:"",Sqrt:"",sqsub:"",sqsube:"",sqsubset:"",sqsubseteq:"",sqsup:"",sqsupe:"",sqsupset:"",sqsupseteq:"",squ:"",Square:"",square:"",SquareIntersection:"",SquareSubset:"",SquareSubsetEqual:"",SquareSuperset:"",SquareSupersetEqual:"",SquareUnion:"",squarf:"",squf:"",srarr:"",Sscr:"",sscr:"",ssetmn:"",ssmile:"",sstarf:"",Star:"",star:"",starf:"",straightepsilon:"",straightphi:"",strns:"",Sub:"",sub:"",subdot:"",subE:"",sube:"",subedot:"",submult:"",subnE:"",subne:"",subplus:"",subrarr:"",Subset:"",subset:"",subseteq:"",subseteqq:"",SubsetEqual:"",subsetneq:"",subsetneqq:"",subsim:"",subsub:"",subsup:"",succ:"",succapprox:"",succcurlyeq:"",Succeeds:"",SucceedsEqual:"",SucceedsSlantEqual:"",SucceedsTilde:"",succeq:"",succnapprox:"",succneqq:"",succnsim:"",succsim:"",SuchThat:"",Sum:"",sum:"",sung:"",Sup:"",sup:"",sup1:"",sup2:"",sup3:"",supdot:"",supdsub:"",supE:"",supe:"",supedot:"",Superset:"",SupersetEqual:"",suphsol:"",suphsub:"",suplarr:"",supmult:"",supnE:"",supne:"",supplus:"",Supset:"",supset:"",supseteq:"",supseteqq:"",supsetneq:"",supsetneqq:"",supsim:"",supsub:"",supsup:"",swarhk:"",swArr:"",swarr:"",swarrow:"",swnwar:"",szlig:"",Tab:"	",target:"",Tau:"",tau:"",tbrk:"",Tcaron:"",tcaron:"",Tcedil:"",tcedil:"",Tcy:"",tcy:"",tdot:"",telrec:"",Tfr:"",tfr:"",there4:"",Therefore:"",therefore:"",Theta:"",theta:"",thetasym:"",thetav:"",thickapprox:"",thicksim:"",ThickSpace:"",thinsp:"",ThinSpace:"",thkap:"",thksim:"",THORN:"",thorn:"",Tilde:"",tilde:"",TildeEqual:"",TildeFullEqual:"",TildeTilde:"",times:"",timesb:"",timesbar:"",timesd:"",tint:"",toea:"",top:"",topbot:"",topcir:"",Topf:"",topf:"",topfork:"",tosa:"",tprime:"",TRADE:"",trade:"",triangle:"",triangledown:"",triangleleft:"",trianglelefteq:"",triangleq:"",triangleright:"",trianglerighteq:"",tridot:"",trie:"",triminus:"",TripleDot:"",triplus:"",trisb:"",tritime:"",trpezium:"",Tscr:"",tscr:"",TScy:"",tscy:"",TSHcy:"",tshcy:"",Tstrok:"",tstrok:"",twixt:"",twoheadleftarrow:"",twoheadrightarrow:"",Uacute:"",uacute:"",Uarr:"",uArr:"",uarr:"",Uarrocir:"",Ubrcy:"",ubrcy:"",Ubreve:"",ubreve:"",Ucirc:"",ucirc:"",Ucy:"",ucy:"",udarr:"",Udblac:"",udblac:"",udhar:"",ufisht:"",Ufr:"",ufr:"",Ugrave:"",ugrave:"",uHar:"",uharl:"",uharr:"",uhblk:"",ulcorn:"",ulcorner:"",ulcrop:"",ultri:"",Umacr:"",umacr:"",uml:"",UnderBar:"_",UnderBrace:"",UnderBracket:"",UnderParenthesis:"",Union:"",UnionPlus:"",Uogon:"",uogon:"",Uopf:"",uopf:"",UpArrow:"",Uparrow:"",uparrow:"",UpArrowBar:"",UpArrowDownArrow:"",UpDownArrow:"",Updownarrow:"",updownarrow:"",UpEquilibrium:"",upharpoonleft:"",upharpoonright:"",uplus:"",UpperLeftArrow:"",UpperRightArrow:"",Upsi:"",upsi:"",upsih:"",Upsilon:"",upsilon:"",UpTee:"",UpTeeArrow:"",upuparrows:"",urcorn:"",urcorner:"",urcrop:"",Uring:"",uring:"",urtri:"",Uscr:"",uscr:"",utdot:"",Utilde:"",utilde:"",utri:"",utrif:"",uuarr:"",Uuml:"",uuml:"",uwangle:"",vangrt:"",varepsilon:"",varkappa:"",varnothing:"",varphi:"",varpi:"",varpropto:"",vArr:"",varr:"",varrho:"",varsigma:"",varsubsetneq:"",varsubsetneqq:"",varsupsetneq:"",varsupsetneqq:"",vartheta:"",vartriangleleft:"",vartriangleright:"",Vbar:"",vBar:"",vBarv:"",Vcy:"",vcy:"",VDash:"",Vdash:"",vDash:"",vdash:"",Vdashl:"",Vee:"",vee:"",veebar:"",veeeq:"",vellip:"",Verbar:"",verbar:"|",Vert:"",vert:"|",VerticalBar:"",VerticalLine:"|",VerticalSeparator:"",VerticalTilde:"",VeryThinSpace:"",Vfr:"",vfr:"",vltri:"",vnsub:"",vnsup:"",Vopf:"",vopf:"",vprop:"",vrtri:"",Vscr:"",vscr:"",vsubnE:"",vsubne:"",vsupnE:"",vsupne:"",Vvdash:"",vzigzag:"",Wcirc:"",wcirc:"",wedbar:"",Wedge:"",wedge:"",wedgeq:"",weierp:"",Wfr:"",wfr:"",Wopf:"",wopf:"",wp:"",wr:"",wreath:"",Wscr:"",wscr:"",xcap:"",xcirc:"",xcup:"",xdtri:"",Xfr:"",xfr:"",xhArr:"",xharr:"",Xi:"",xi:"",xlArr:"",xlarr:"",xmap:"",xnis:"",xodot:"",Xopf:"",xopf:"",xoplus:"",xotime:"",xrArr:"",xrarr:"",Xscr:"",xscr:"",xsqcup:"",xuplus:"",xutri:"",xvee:"",xwedge:"",Yacute:"",yacute:"",YAcy:"",yacy:"",Ycirc:"",ycirc:"",Ycy:"",ycy:"",yen:"",Yfr:"",yfr:"",YIcy:"",yicy:"",Yopf:"",yopf:"",Yscr:"",yscr:"",YUcy:"",yucy:"",Yuml:"",yuml:"",Zacute:"",zacute:"",Zcaron:"",zcaron:"",Zcy:"",zcy:"",Zdot:"",zdot:"",zeetrf:"",ZeroWidthSpace:"",Zeta:"",zeta:"",Zfr:"",zfr:"",ZHcy:"",zhcy:"",zigrarr:"",Zopf:"",zopf:"",Zscr:"",zscr:"",zwj:"",zwnj:""}),r.entityMap=r.HTML_ENTITIES})(R1)),R1}var Jv={},pO;function Nse(){if(pO)return Jv;pO=1;var r=$b().NAMESPACE,e=/[A-Z_a-z\xC0-\xD6\xD8-\xF6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,t=new RegExp("[\\-\\.0-9"+e.source.slice(1,-1)+"\\u00B7\\u0300-\\u036F\\u203F-\\u2040]"),n=new RegExp("^"+e.source+t.source+"*(?::"+e.source+t.source+"*)?$"),i=0,s=1,a=2,o=3,l=4,u=5,c=6,h=7;function m(B,k){this.message=B,this.locator=k,Error.captureStackTrace&&Error.captureStackTrace(this,m)}m.prototype=new Error,m.prototype.name=m.name;function g(){}g.prototype={parse:function(B,k,H){var q=this.domBuilder;q.startDocument(),I(k,k={}),y(B,k,H,q,this.errorHandler),q.endDocument()}};function y(B,k,H,q,V){function Q(St){if(St>65535){St-=65536;var ot=55296+(St>>10),yr=56320+(St&1023);return String.fromCharCode(ot,yr)}else return String.fromCharCode(St)}function ie(St){var ot=St.slice(1,-1);return Object.hasOwnProperty.call(H,ot)?H[ot]:ot.charAt(0)==="#"?Q(parseInt(ot.substr(1).replace("x","0x"))):(V.error("entity not found:"+St),St)}function le(St){if(St>xe){var ot=B.substring(xe,St).replace(/&#?\w+;/g,ie);ee&&he(xe),q.characters(ot,0,St-xe),xe=St}}function he(St,ot){for(;St>=ne&&(ot=ue.exec(B));)ae=ot.index,ne=ae+ot[0].length,ee.lineNumber++;ee.columnNumber=St-ae+1}for(var ae=0,ne=0,ue=/.*(?:\r\n?|\n)|.*$/g,ee=q.locator,pe=[{currentNSMap:k}],me={},xe=0;;){try{var Be=B.indexOf("<",xe);if(Be<0){if(!B.substr(xe).match(/^\s*$/)){var Oe=q.doc,dt=Oe.createTextNode(B.substr(xe));Oe.appendChild(dt),q.currentElement=dt}return}switch(Be>xe&&le(Be),B.charAt(Be+1)){case"/":var $e=B.indexOf(">",Be+3),Ke=B.substring(Be+2,$e).replace(/[ \t\n\r]+$/g,""),_t=pe.pop();$e<0?(Ke=B.substring(Be+2).replace(/[\s<].*/,""),V.error("end tag name: "+Ke+" is not complete:"+_t.tagName),$e=Be+1+Ke.length):Ke.match(/\s</)&&(Ke=Ke.replace(/[\s<].*/,""),V.error("end tag name: "+Ke+" maybe not complete"),$e=Be+1+Ke.length);var Ze=_t.localNSMap,Ot=_t.tagName==Ke,Nt=Ot||_t.tagName&&_t.tagName.toLowerCase()==Ke.toLowerCase();if(Nt){if(q.endElement(_t.uri,_t.localName,Ke),Ze)for(var qe in Ze)Object.prototype.hasOwnProperty.call(Ze,qe)&&q.endPrefixMapping(qe);Ot||V.fatalError("end tag name: "+Ke+" is not match the current start tagName:"+_t.tagName)}else pe.push(_t);$e++;break;case"?":ee&&he(Be),$e=L(B,Be,q);break;case"!":ee&&he(Be),$e=A(B,Be,q,V);break;default:ee&&he(Be);var Ue=new N,Pe=pe[pe.length-1].currentNSMap,$e=x(B,Be,Ue,Pe,ie,V),rt=Ue.length;if(!Ue.closed&&D(B,$e,Ue.tagName,me)&&(Ue.closed=!0,H.nbsp||V.warning("unclosed xml attribute")),ee&&rt){for(var lt=v(ee,{}),ht=0;ht<rt;ht++){var ut=Ue[ht];he(ut.offset),ut.locator=v(ee,{})}q.locator=lt,w(Ue,q,Pe)&&pe.push(Ue),q.locator=ee}else w(Ue,q,Pe)&&pe.push(Ue);r.isHTML(Ue.uri)&&!Ue.closed?$e=E(B,$e,Ue.tagName,ie,q):$e++}}catch(St){if(St instanceof m)throw St;V.error("element parse error: "+St),$e=-1}$e>xe?xe=$e:le(Math.max(Be,xe)+1)}}function v(B,k){return k.lineNumber=B.lineNumber,k.columnNumber=B.columnNumber,k}function x(B,k,H,q,V,Q){function ie(ee,pe,me){H.attributeNames.hasOwnProperty(ee)&&Q.fatalError("Attribute "+ee+" redefined"),H.addValue(ee,pe.replace(/[\t\n\r]/g," ").replace(/&#?\w+;/g,V),me)}for(var le,he,ae=++k,ne=i;;){var ue=B.charAt(ae);switch(ue){case"=":if(ne===s)le=B.slice(k,ae),ne=o;else if(ne===a)ne=o;else throw new Error("attribute equal must after attrName");break;case"'":case'"':if(ne===o||ne===s)if(ne===s&&(Q.warning('attribute value must after "="'),le=B.slice(k,ae)),k=ae+1,ae=B.indexOf(ue,k),ae>0)he=B.slice(k,ae),ie(le,he,k-1),ne=u;else throw new Error("attribute value no end '"+ue+"' match");else if(ne==l)he=B.slice(k,ae),ie(le,he,k),Q.warning('attribute "'+le+'" missed start quot('+ue+")!!"),k=ae+1,ne=u;else throw new Error('attribute value must after "="');break;case"/":switch(ne){case i:H.setTagName(B.slice(k,ae));case u:case c:case h:ne=h,H.closed=!0;case l:case s:break;case a:H.closed=!0;break;default:throw new Error("attribute invalid close char('/')")}break;case"":return Q.error("unexpected end of input"),ne==i&&H.setTagName(B.slice(k,ae)),ae;case">":switch(ne){case i:H.setTagName(B.slice(k,ae));case u:case c:case h:break;case l:case s:he=B.slice(k,ae),he.slice(-1)==="/"&&(H.closed=!0,he=he.slice(0,-1));case a:ne===a&&(he=le),ne==l?(Q.warning('attribute "'+he+'" missed quot(")!'),ie(le,he,k)):((!r.isHTML(q[""])||!he.match(/^(?:disabled|checked|selected)$/i))&&Q.warning('attribute "'+he+'" missed value!! "'+he+'" instead!!'),ie(he,he,k));break;case o:throw new Error("attribute value missed!!")}return ae;case"":ue=" ";default:if(ue<=" ")switch(ne){case i:H.setTagName(B.slice(k,ae)),ne=c;break;case s:le=B.slice(k,ae),ne=a;break;case l:var he=B.slice(k,ae);Q.warning('attribute "'+he+'" missed quot(")!!'),ie(le,he,k);case u:ne=c;break}else switch(ne){case a:H.tagName,(!r.isHTML(q[""])||!le.match(/^(?:disabled|checked|selected)$/i))&&Q.warning('attribute "'+le+'" missed value!! "'+le+'" instead2!!'),ie(le,le,k),k=ae,ne=s;break;case u:Q.warning('attribute space is required"'+le+'"!!');case c:ne=s,k=ae;break;case o:ne=l,k=ae;break;case h:throw new Error("elements closed character '/' and '>' must be connected to")}}ae++}}function w(B,k,H){for(var q=B.tagName,V=null,ue=B.length;ue--;){var Q=B[ue],ie=Q.qName,le=Q.value,ee=ie.indexOf(":");if(ee>0)var he=Q.prefix=ie.slice(0,ee),ae=ie.slice(ee+1),ne=he==="xmlns"&&ae;else ae=ie,he=null,ne=ie==="xmlns"&&"";Q.localName=ae,ne!==!1&&(V==null&&(V={},I(H,H={})),H[ne]=V[ne]=le,Q.uri=r.XMLNS,k.startPrefixMapping(ne,le))}for(var ue=B.length;ue--;){Q=B[ue];var he=Q.prefix;he&&(he==="xml"&&(Q.uri=r.XML),he!=="xmlns"&&(Q.uri=H[he||""]))}var ee=q.indexOf(":");ee>0?(he=B.prefix=q.slice(0,ee),ae=B.localName=q.slice(ee+1)):(he=null,ae=B.localName=q);var pe=B.uri=H[he||""];if(k.startElement(pe,ae,q,B),B.closed){if(k.endElement(pe,ae,q),V)for(he in V)Object.prototype.hasOwnProperty.call(V,he)&&k.endPrefixMapping(he)}else return B.currentNSMap=H,B.localNSMap=V,!0}function E(B,k,H,q,V){if(/^(?:script|textarea)$/i.test(H)){var Q=B.indexOf("</"+H+">",k),ie=B.substring(k+1,Q);if(/[&<]/.test(ie))return/^script$/i.test(H)?(V.characters(ie,0,ie.length),Q):(ie=ie.replace(/&#?\w+;/g,q),V.characters(ie,0,ie.length),Q)}return k+1}function D(B,k,H,q){var V=q[H];return V==null&&(V=B.lastIndexOf("</"+H+">"),V<k&&(V=B.lastIndexOf("</"+H)),q[H]=V),V<k}function I(B,k){for(var H in B)Object.prototype.hasOwnProperty.call(B,H)&&(k[H]=B[H])}function A(B,k,H,q){var V=B.charAt(k+2);switch(V){case"-":if(B.charAt(k+3)==="-"){var Q=B.indexOf("-->",k+4);return Q>k?(H.comment(B,k+4,Q-k-4),Q+3):(q.error("Unclosed comment"),-1)}else return-1;default:if(B.substr(k+3,6)=="CDATA["){var Q=B.indexOf("]]>",k+9);return H.startCDATA(),H.characters(B,k+9,Q-k-9),H.endCDATA(),Q+3}var ie=U(B,k),le=ie.length;if(le>1&&/!doctype/i.test(ie[0][0])){var he=ie[1][0],ae=!1,ne=!1;le>3&&(/^public$/i.test(ie[2][0])?(ae=ie[3][0],ne=le>4&&ie[4][0]):/^system$/i.test(ie[2][0])&&(ne=ie[3][0]));var ue=ie[le-1];return H.startDTD(he,ae,ne),H.endDTD(),ue.index+ue[0].length}}return-1}function L(B,k,H){var q=B.indexOf("?>",k);if(q){var V=B.substring(k,q).match(/^<\?(\S*)\s*([\s\S]*?)\s*$/);return V?(V[0].length,H.processingInstruction(V[1],V[2]),q+2):-1}return-1}function N(){this.attributeNames={}}N.prototype={setTagName:function(B){if(!n.test(B))throw new Error("invalid tagName:"+B);this.tagName=B},addValue:function(B,k,H){if(!n.test(B))throw new Error("invalid attribute:"+B);this.attributeNames[B]=this.length,this[this.length++]={qName:B,value:k,offset:H}},length:0,getLocalName:function(B){return this[B].localName},getLocator:function(B){return this[B].locator},getQName:function(B){return this[B].qName},getURI:function(B){return this[B].uri},getValue:function(B){return this[B].value}};function U(B,k){var H,q=[],V=/'[^']+'|"[^"]+"|[^\s<>\/=]+=?|(\/?\s*>|<)/g;for(V.lastIndex=k,V.exec(B);H=V.exec(B);)if(q.push(H),H[1])return q}return Jv.XMLReader=g,Jv.ParseError=m,Jv}var mO;function Use(){if(mO)return Jm;mO=1;var r=$b(),e=dN(),t=Bse(),n=Nse(),i=e.DOMImplementation,s=r.NAMESPACE,a=n.ParseError,o=n.XMLReader;function l(x){return x.replace(/\r[\n\u0085]/g,`
`).replace(/[\r\u0085\u2028]/g,`
`)}function u(x){this.options=x||{locator:{}}}u.prototype.parseFromString=function(x,w){var E=this.options,D=new o,I=E.domBuilder||new h,A=E.errorHandler,L=E.locator,N=E.xmlns||{},U=/\/x?html?$/.test(w),B=U?t.HTML_ENTITIES:t.XML_ENTITIES;L&&I.setDocumentLocator(L),D.errorHandler=c(A,I,L),D.domBuilder=E.domBuilder||I,U&&(N[""]=s.HTML),N.xml=N.xml||s.XML;var k=E.normalizeLineEndings||l;return x&&typeof x=="string"?D.parse(k(x),N,B):D.errorHandler.error("invalid doc source"),I.doc};function c(x,w,E){if(!x){if(w instanceof h)return w;x=w}var D={},I=x instanceof Function;E=E||{};function A(L){var N=x[L];!N&&I&&(N=x.length==2?function(U){x(L,U)}:x),D[L]=N&&function(U){N("[xmldom "+L+"]	"+U+g(E))}||function(){}}return A("warning"),A("error"),A("fatalError"),D}function h(){this.cdata=!1}function m(x,w){w.lineNumber=x.lineNumber,w.columnNumber=x.columnNumber}h.prototype={startDocument:function(){this.doc=new i().createDocument(null,null,null),this.locator&&(this.doc.documentURI=this.locator.systemId)},startElement:function(x,w,E,D){var I=this.doc,A=I.createElementNS(x,E||w),L=D.length;v(this,A),this.currentElement=A,this.locator&&m(this.locator,A);for(var N=0;N<L;N++){var x=D.getURI(N),U=D.getValue(N),E=D.getQName(N),B=I.createAttributeNS(x,E);this.locator&&m(D.getLocator(N),B),B.value=B.nodeValue=U,A.setAttributeNode(B)}},endElement:function(x,w,E){var D=this.currentElement;D.tagName,this.currentElement=D.parentNode},startPrefixMapping:function(x,w){},endPrefixMapping:function(x){},processingInstruction:function(x,w){var E=this.doc.createProcessingInstruction(x,w);this.locator&&m(this.locator,E),v(this,E)},ignorableWhitespace:function(x,w,E){},characters:function(x,w,E){if(x=y.apply(this,arguments),x){if(this.cdata)var D=this.doc.createCDATASection(x);else var D=this.doc.createTextNode(x);this.currentElement?this.currentElement.appendChild(D):/^\s*$/.test(x)&&this.doc.appendChild(D),this.locator&&m(this.locator,D)}},skippedEntity:function(x){},endDocument:function(){this.doc.normalize()},setDocumentLocator:function(x){(this.locator=x)&&(x.lineNumber=0)},comment:function(x,w,E){x=y.apply(this,arguments);var D=this.doc.createComment(x);this.locator&&m(this.locator,D),v(this,D)},startCDATA:function(){this.cdata=!0},endCDATA:function(){this.cdata=!1},startDTD:function(x,w,E){var D=this.doc.implementation;if(D&&D.createDocumentType){var I=D.createDocumentType(x,w,E);this.locator&&m(this.locator,I),v(this,I),this.doc.doctype=I}},warning:function(x){console.warn("[xmldom warning]	"+x,g(this.locator))},error:function(x){console.error("[xmldom error]	"+x,g(this.locator))},fatalError:function(x){throw new a(x,this.locator)}};function g(x){if(x)return`
@`+(x.systemId||"")+"#[line:"+x.lineNumber+",col:"+x.columnNumber+"]"}function y(x,w,E){return typeof x=="string"?x.substr(w,E):x.length>=w+E||w?new java.lang.String(x,w,E)+"":x}"endDTD,startEntity,endEntity,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,resolveEntity,getExternalSubset,notationDecl,unparsedEntityDecl".replace(/\w+/g,function(x){h.prototype[x]=function(){return null}});function v(x,w){x.currentElement?x.currentElement.appendChild(w):x.doc.appendChild(w)}return Jm.__DOMHandler=h,Jm.normalizeLineEndings=l,Jm.DOMParser=u,Jm}var gO;function $se(){if(gO)return Qm;gO=1;var r=dN();return Qm.DOMImplementation=r.DOMImplementation,Qm.XMLSerializer=r.XMLSerializer,Qm.DOMParser=Use().DOMParser,Qm}var hN=$se();/*! @name mpd-parser @version 1.3.1 @license Apache-2.0 */const vO=r=>!!r&&typeof r=="object",Zi=(...r)=>r.reduce((e,t)=>(typeof t!="object"||Object.keys(t).forEach(n=>{Array.isArray(e[n])&&Array.isArray(t[n])?e[n]=e[n].concat(t[n]):vO(e[n])&&vO(t[n])?e[n]=Zi(e[n],t[n]):e[n]=t[n]}),e),{}),fN=r=>Object.keys(r).map(e=>r[e]),jse=(r,e)=>{const t=[];for(let n=r;n<e;n++)t.push(n);return t},wp=r=>r.reduce((e,t)=>e.concat(t),[]),pN=r=>{if(!r.length)return[];const e=[];for(let t=0;t<r.length;t++)e.push(r[t]);return e},zse=(r,e)=>r.reduce((t,n,i)=>(n[e]&&t.push(i),t),[]),Hse=(r,e)=>fN(r.reduce((t,n)=>(n.forEach(i=>{t[e(i)]=i}),t),{}));var Ep={INVALID_NUMBER_OF_PERIOD:"INVALID_NUMBER_OF_PERIOD",DASH_EMPTY_MANIFEST:"DASH_EMPTY_MANIFEST",DASH_INVALID_XML:"DASH_INVALID_XML",NO_BASE_URL:"NO_BASE_URL",SEGMENT_TIME_UNSPECIFIED:"SEGMENT_TIME_UNSPECIFIED",UNSUPPORTED_UTC_TIMING_SCHEME:"UNSUPPORTED_UTC_TIMING_SCHEME"};const Z0=({baseUrl:r="",source:e="",range:t="",indexRange:n=""})=>{const i={uri:e,resolvedUri:Pg(r||"",e)};if(t||n){const a=(t||n).split("-");let o=X.BigInt?X.BigInt(a[0]):parseInt(a[0],10),l=X.BigInt?X.BigInt(a[1]):parseInt(a[1],10);o<Number.MAX_SAFE_INTEGER&&typeof o=="bigint"&&(o=Number(o)),l<Number.MAX_SAFE_INTEGER&&typeof l=="bigint"&&(l=Number(l));let u;typeof l=="bigint"||typeof o=="bigint"?u=X.BigInt(l)-X.BigInt(o)+X.BigInt(1):u=l-o+1,typeof u=="bigint"&&u<Number.MAX_SAFE_INTEGER&&(u=Number(u)),i.byterange={length:u,offset:o}}return i},Vse=r=>{let e;return typeof r.offset=="bigint"||typeof r.length=="bigint"?e=X.BigInt(r.offset)+X.BigInt(r.length)-X.BigInt(1):e=r.offset+r.length-1,`${r.offset}-${e}`},yO=r=>(r&&typeof r!="number"&&(r=parseInt(r,10)),isNaN(r)?null:r),Wse={static(r){const{duration:e,timescale:t=1,sourceDuration:n,periodDuration:i}=r,s=yO(r.endNumber),a=e/t;return typeof s=="number"?{start:0,end:s}:typeof i=="number"?{start:0,end:i/a}:{start:0,end:n/a}},dynamic(r){const{NOW:e,clientOffset:t,availabilityStartTime:n,timescale:i=1,duration:s,periodStart:a=0,minimumUpdatePeriod:o=0,timeShiftBufferDepth:l=1/0}=r,u=yO(r.endNumber),c=(e+t)/1e3,h=n+a,g=c+o-h,y=Math.ceil(g*i/s),v=Math.floor((c-h-l)*i/s),x=Math.floor((c-h)*i/s);return{start:Math.max(0,v),end:typeof u=="number"?u:Math.min(y,x)}}},qse=r=>e=>{const{duration:t,timescale:n=1,periodStart:i,startNumber:s=1}=r;return{number:s+e,duration:t/n,timeline:i,time:e*t}},H2=r=>{const{type:e,duration:t,timescale:n=1,periodDuration:i,sourceDuration:s}=r,{start:a,end:o}=Wse[e](r),l=jse(a,o).map(qse(r));if(e==="static"){const u=l.length-1,c=typeof i=="number"?i:s;l[u].duration=c-t/n*u}return l},mN=r=>{const{baseUrl:e,initialization:t={},sourceDuration:n,indexRange:i="",periodStart:s,presentationTime:a,number:o=0,duration:l}=r;if(!e)throw new Error(Ep.NO_BASE_URL);const u=Z0({baseUrl:e,source:t.sourceURL,range:t.range}),c=Z0({baseUrl:e,source:e,indexRange:i});if(c.map=u,l){const h=H2(r);h.length&&(c.duration=h[0].duration,c.timeline=h[0].timeline)}else n&&(c.duration=n,c.timeline=s);return c.presentationTime=a||s,c.number=o,[c]},Rg=(r,e,t)=>{const n=r.sidx.map?r.sidx.map:null,i=r.sidx.duration,s=r.timeline||0,a=r.sidx.byterange,o=a.offset+a.length,l=e.timescale,u=e.references.filter(x=>x.referenceType!==1),c=[],h=r.endList?"static":"dynamic",m=r.sidx.timeline;let g=m,y=r.mediaSequence||0,v;typeof e.firstOffset=="bigint"?v=X.BigInt(o)+e.firstOffset:v=o+e.firstOffset;for(let x=0;x<u.length;x++){const w=e.references[x],E=w.referencedSize,D=w.subsegmentDuration;let I;typeof v=="bigint"?I=v+X.BigInt(E)-X.BigInt(1):I=v+E-1;const A=`${v}-${I}`,N=mN({baseUrl:t,timescale:l,timeline:s,periodStart:m,presentationTime:g,number:y,duration:D,sourceDuration:i,indexRange:A,type:h})[0];n&&(N.map=n),c.push(N),typeof v=="bigint"?v+=X.BigInt(E):v+=E,g+=D/l,y++}return r.segments=c,r},Gse=["AUDIO","SUBTITLES"],Kse=1/60,gN=r=>Hse(r,({timeline:e})=>e).sort((e,t)=>e.timeline>t.timeline?1:-1),Xse=(r,e)=>{for(let t=0;t<r.length;t++)if(r[t].attributes.NAME===e)return r[t];return null},_O=r=>{let e=[];return Fse(r,Gse,(t,n,i,s)=>{e=e.concat(t.playlists||[])}),e},xO=({playlist:r,mediaSequence:e})=>{r.mediaSequence=e,r.segments.forEach((t,n)=>{t.number=r.mediaSequence+n})},Yse=({oldPlaylists:r,newPlaylists:e,timelineStarts:t})=>{e.forEach(n=>{n.discontinuitySequence=t.findIndex(function({timeline:l}){return l===n.timeline});const i=Xse(r,n.attributes.NAME);if(!i||n.sidx)return;const s=n.segments[0],a=i.segments.findIndex(function(l){return Math.abs(l.presentationTime-s.presentationTime)<Kse});if(a===-1){xO({playlist:n,mediaSequence:i.mediaSequence+i.segments.length}),n.segments[0].discontinuity=!0,n.discontinuityStarts.unshift(0),(!i.segments.length&&n.timeline>i.timeline||i.segments.length&&n.timeline>i.segments[i.segments.length-1].timeline)&&n.discontinuitySequence--;return}i.segments[a].discontinuity&&!s.discontinuity&&(s.discontinuity=!0,n.discontinuityStarts.unshift(0),n.discontinuitySequence--),xO({playlist:n,mediaSequence:i.segments[a].number})})},Qse=({oldManifest:r,newManifest:e})=>{const t=r.playlists.concat(_O(r)),n=e.playlists.concat(_O(e));return e.timelineStarts=gN([r.timelineStarts,e.timelineStarts]),Yse({oldPlaylists:t,newPlaylists:n,timelineStarts:e.timelineStarts}),e},ef=r=>r&&r.uri+"-"+Vse(r.byterange),L1=r=>{const e=r.reduce(function(n,i){return n[i.attributes.baseUrl]||(n[i.attributes.baseUrl]=[]),n[i.attributes.baseUrl].push(i),n},{});let t=[];return Object.values(e).forEach(n=>{const i=fN(n.reduce((s,a)=>{const o=a.attributes.id+(a.attributes.lang||"");return s[o]?(a.segments&&(a.segments[0]&&(a.segments[0].discontinuity=!0),s[o].segments.push(...a.segments)),a.attributes.contentProtection&&(s[o].attributes.contentProtection=a.attributes.contentProtection)):(s[o]=a,s[o].attributes.timelineStarts=[]),s[o].attributes.timelineStarts.push({start:a.attributes.periodStart,timeline:a.attributes.periodStart}),s},{}));t=t.concat(i)}),t.map(n=>(n.discontinuityStarts=zse(n.segments||[],"discontinuity"),n))},V2=(r,e)=>{const t=ef(r.sidx),n=t&&e[t]&&e[t].sidx;return n&&Rg(r,n,r.sidx.resolvedUri),r},Jse=(r,e={})=>{if(!Object.keys(e).length)return r;for(const t in r)r[t]=V2(r[t],e);return r},Zse=({attributes:r,segments:e,sidx:t,mediaSequence:n,discontinuitySequence:i,discontinuityStarts:s},a)=>{const o={attributes:{NAME:r.id,BANDWIDTH:r.bandwidth,CODECS:r.codecs,"PROGRAM-ID":1},uri:"",endList:r.type==="static",timeline:r.periodStart,resolvedUri:r.baseUrl||"",targetDuration:r.duration,discontinuitySequence:i,discontinuityStarts:s,timelineStarts:r.timelineStarts,mediaSequence:n,segments:e};return r.contentProtection&&(o.contentProtection=r.contentProtection),r.serviceLocation&&(o.attributes.serviceLocation=r.serviceLocation),t&&(o.sidx=t),a&&(o.attributes.AUDIO="audio",o.attributes.SUBTITLES="subs"),o},eae=({attributes:r,segments:e,mediaSequence:t,discontinuityStarts:n,discontinuitySequence:i})=>{typeof e>"u"&&(e=[{uri:r.baseUrl,timeline:r.periodStart,resolvedUri:r.baseUrl||"",duration:r.sourceDuration,number:0}],r.duration=r.sourceDuration);const s={NAME:r.id,BANDWIDTH:r.bandwidth,"PROGRAM-ID":1};r.codecs&&(s.CODECS=r.codecs);const a={attributes:s,uri:"",endList:r.type==="static",timeline:r.periodStart,resolvedUri:r.baseUrl||"",targetDuration:r.duration,timelineStarts:r.timelineStarts,discontinuityStarts:n,discontinuitySequence:i,mediaSequence:t,segments:e};return r.serviceLocation&&(a.attributes.serviceLocation=r.serviceLocation),a},tae=(r,e={},t=!1)=>{let n;const i=r.reduce((s,a)=>{const o=a.attributes.role&&a.attributes.role.value||"",l=a.attributes.lang||"";let u=a.attributes.label||"main";if(l&&!a.attributes.label){const h=o?` (${o})`:"";u=`${a.attributes.lang}${h}`}s[u]||(s[u]={language:l,autoselect:!0,default:o==="main",playlists:[],uri:""});const c=V2(Zse(a,t),e);return s[u].playlists.push(c),typeof n>"u"&&o==="main"&&(n=a,n.default=!0),s},{});if(!n){const s=Object.keys(i)[0];i[s].default=!0}return i},rae=(r,e={})=>r.reduce((t,n)=>{const i=n.attributes.label||n.attributes.lang||"text",s=n.attributes.lang||"und";return t[i]||(t[i]={language:s,default:!1,autoselect:!1,playlists:[],uri:""}),t[i].playlists.push(V2(eae(n),e)),t},{}),nae=r=>r.reduce((e,t)=>(t&&t.forEach(n=>{const{channel:i,language:s}=n;e[s]={autoselect:!1,default:!1,instreamId:i,language:s},n.hasOwnProperty("aspectRatio")&&(e[s].aspectRatio=n.aspectRatio),n.hasOwnProperty("easyReader")&&(e[s].easyReader=n.easyReader),n.hasOwnProperty("3D")&&(e[s]["3D"]=n["3D"])}),e),{}),iae=({attributes:r,segments:e,sidx:t,discontinuityStarts:n})=>{const i={attributes:{NAME:r.id,AUDIO:"audio",SUBTITLES:"subs",RESOLUTION:{width:r.width,height:r.height},CODECS:r.codecs,BANDWIDTH:r.bandwidth,"PROGRAM-ID":1},uri:"",endList:r.type==="static",timeline:r.periodStart,resolvedUri:r.baseUrl||"",targetDuration:r.duration,discontinuityStarts:n,timelineStarts:r.timelineStarts,segments:e};return r.frameRate&&(i.attributes["FRAME-RATE"]=r.frameRate),r.contentProtection&&(i.contentProtection=r.contentProtection),r.serviceLocation&&(i.attributes.serviceLocation=r.serviceLocation),t&&(i.sidx=t),i},sae=({attributes:r})=>r.mimeType==="video/mp4"||r.mimeType==="video/webm"||r.contentType==="video",aae=({attributes:r})=>r.mimeType==="audio/mp4"||r.mimeType==="audio/webm"||r.contentType==="audio",oae=({attributes:r})=>r.mimeType==="text/vtt"||r.contentType==="text",lae=(r,e)=>{r.forEach(t=>{t.mediaSequence=0,t.discontinuitySequence=e.findIndex(function({timeline:n}){return n===t.timeline}),t.segments&&t.segments.forEach((n,i)=>{n.number=i})})},bO=r=>r?Object.keys(r).reduce((e,t)=>{const n=r[t];return e.concat(n.playlists)},[]):[],uae=({dashPlaylists:r,locations:e,contentSteering:t,sidxMapping:n={},previousManifest:i,eventStream:s})=>{if(!r.length)return{};const{sourceDuration:a,type:o,suggestedPresentationDelay:l,minimumUpdatePeriod:u}=r[0].attributes,c=L1(r.filter(sae)).map(iae),h=L1(r.filter(aae)),m=L1(r.filter(oae)),g=r.map(I=>I.attributes.captionServices).filter(Boolean),y={allowCache:!0,discontinuityStarts:[],segments:[],endList:!0,mediaGroups:{AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},uri:"",duration:a,playlists:Jse(c,n)};u>=0&&(y.minimumUpdatePeriod=u*1e3),e&&(y.locations=e),t&&(y.contentSteering=t),o==="dynamic"&&(y.suggestedPresentationDelay=l),s&&s.length>0&&(y.eventStream=s);const v=y.playlists.length===0,x=h.length?tae(h,n,v):null,w=m.length?rae(m,n):null,E=c.concat(bO(x),bO(w)),D=E.map(({timelineStarts:I})=>I);return y.timelineStarts=gN(D),lae(E,y.timelineStarts),x&&(y.mediaGroups.AUDIO.audio=x),w&&(y.mediaGroups.SUBTITLES.subs=w),g.length&&(y.mediaGroups["CLOSED-CAPTIONS"].cc=nae(g)),i?Qse({oldManifest:i,newManifest:y}):y},cae=(r,e,t)=>{const{NOW:n,clientOffset:i,availabilityStartTime:s,timescale:a=1,periodStart:o=0,minimumUpdatePeriod:l=0}=r,u=(n+i)/1e3,c=s+o,m=u+l-c;return Math.ceil((m*a-e)/t)},vN=(r,e)=>{const{type:t,minimumUpdatePeriod:n=0,media:i="",sourceDuration:s,timescale:a=1,startNumber:o=1,periodStart:l}=r,u=[];let c=-1;for(let h=0;h<e.length;h++){const m=e[h],g=m.d,y=m.r||0,v=m.t||0;c<0&&(c=v),v&&v>c&&(c=v);let x;if(y<0){const D=h+1;D===e.length?t==="dynamic"&&n>0&&i.indexOf("$Number$")>0?x=cae(r,c,g):x=(s*a-c)/g:x=(e[D].t-c)/g}else x=y+1;const w=o+u.length+x;let E=o+u.length;for(;E<w;)u.push({number:E,duration:g/a,time:c,timeline:l}),c+=g,E++}return u},dae=/\$([A-z]*)(?:(%0)([0-9]+)d)?\$/g,hae=r=>(e,t,n,i)=>{if(e==="$$")return"$";if(typeof r[t]>"u")return e;const s=""+r[t];return t==="RepresentationID"||(n?i=parseInt(i,10):i=1,s.length>=i)?s:`${new Array(i-s.length+1).join("0")}${s}`},SO=(r,e)=>r.replace(dae,hae(e)),fae=(r,e)=>!r.duration&&!e?[{number:r.startNumber||1,duration:r.sourceDuration,time:0,timeline:r.periodStart}]:r.duration?H2(r):vN(r,e),pae=(r,e)=>{const t={RepresentationID:r.id,Bandwidth:r.bandwidth||0},{initialization:n={sourceURL:"",range:""}}=r,i=Z0({baseUrl:r.baseUrl,source:SO(n.sourceURL,t),range:n.range});return fae(r,e).map(a=>{t.Number=a.number,t.Time=a.time;const o=SO(r.media||"",t),l=r.timescale||1,u=r.presentationTimeOffset||0,c=r.periodStart+(a.time-u)/l;return{uri:o,timeline:a.timeline,duration:a.duration,resolvedUri:Pg(r.baseUrl||"",o),map:i,number:a.number,presentationTime:c}})},mae=(r,e)=>{const{baseUrl:t,initialization:n={}}=r,i=Z0({baseUrl:t,source:n.sourceURL,range:n.range}),s=Z0({baseUrl:t,source:e.media,range:e.mediaRange});return s.map=i,s},gae=(r,e)=>{const{duration:t,segmentUrls:n=[],periodStart:i}=r;if(!t&&!e||t&&e)throw new Error(Ep.SEGMENT_TIME_UNSPECIFIED);const s=n.map(l=>mae(r,l));let a;return t&&(a=H2(r)),e&&(a=vN(r,e)),a.map((l,u)=>{if(s[u]){const c=s[u],h=r.timescale||1,m=r.presentationTimeOffset||0;return c.timeline=l.timeline,c.duration=l.duration,c.number=l.number,c.presentationTime=i+(l.time-m)/h,c}}).filter(l=>l)},vae=({attributes:r,segmentInfo:e})=>{let t,n;e.template?(n=pae,t=Zi(r,e.template)):e.base?(n=mN,t=Zi(r,e.base)):e.list&&(n=gae,t=Zi(r,e.list));const i={attributes:r};if(!n)return i;const s=n(t,e.segmentTimeline);if(t.duration){const{duration:a,timescale:o=1}=t;t.duration=a/o}else s.length?t.duration=s.reduce((a,o)=>Math.max(a,Math.ceil(o.duration)),0):t.duration=0;return i.attributes=t,i.segments=s,e.base&&t.indexRange&&(i.sidx=s[0],i.segments=[]),i},yae=r=>r.map(vae),Jn=(r,e)=>pN(r.childNodes).filter(({tagName:t})=>t===e),Lg=r=>r.textContent.trim(),_ae=r=>parseFloat(r.split("/").reduce((e,t)=>e/t)),Af=r=>{const o=/P(?:(\d*)Y)?(?:(\d*)M)?(?:(\d*)D)?(?:T(?:(\d*)H)?(?:(\d*)M)?(?:([\d.]*)S)?)?/.exec(r);if(!o)return 0;const[l,u,c,h,m,g]=o.slice(1);return parseFloat(l||0)*31536e3+parseFloat(u||0)*2592e3+parseFloat(c||0)*86400+parseFloat(h||0)*3600+parseFloat(m||0)*60+parseFloat(g||0)},xae=r=>(/^\d+-\d+-\d+T\d+:\d+:\d+(\.\d+)?$/.test(r)&&(r+="Z"),Date.parse(r)),TO={mediaPresentationDuration(r){return Af(r)},availabilityStartTime(r){return xae(r)/1e3},minimumUpdatePeriod(r){return Af(r)},suggestedPresentationDelay(r){return Af(r)},type(r){return r},timeShiftBufferDepth(r){return Af(r)},start(r){return Af(r)},width(r){return parseInt(r,10)},height(r){return parseInt(r,10)},bandwidth(r){return parseInt(r,10)},frameRate(r){return _ae(r)},startNumber(r){return parseInt(r,10)},timescale(r){return parseInt(r,10)},presentationTimeOffset(r){return parseInt(r,10)},duration(r){const e=parseInt(r,10);return isNaN(e)?Af(r):e},d(r){return parseInt(r,10)},t(r){return parseInt(r,10)},r(r){return parseInt(r,10)},presentationTime(r){return parseInt(r,10)},DEFAULT(r){return r}},wi=r=>r&&r.attributes?pN(r.attributes).reduce((e,t)=>{const n=TO[t.name]||TO.DEFAULT;return e[t.name]=n(t.value),e},{}):{},bae={"urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b":"org.w3.clearkey","urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":"com.widevine.alpha","urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95":"com.microsoft.playready","urn:uuid:f239e769-efa3-4850-9c16-a903c6932efb":"com.adobe.primetime","urn:mpeg:dash:mp4protection:2011":"mp4protection"},jb=(r,e)=>e.length?wp(r.map(function(t){return e.map(function(n){const i=Lg(n),s=Pg(t.baseUrl,i),a=Zi(wi(n),{baseUrl:s});return s!==i&&!a.serviceLocation&&t.serviceLocation&&(a.serviceLocation=t.serviceLocation),a})})):r,W2=r=>{const e=Jn(r,"SegmentTemplate")[0],t=Jn(r,"SegmentList")[0],n=t&&Jn(t,"SegmentURL").map(h=>Zi({tag:"SegmentURL"},wi(h))),i=Jn(r,"SegmentBase")[0],s=t||e,a=s&&Jn(s,"SegmentTimeline")[0],o=t||i||e,l=o&&Jn(o,"Initialization")[0],u=e&&wi(e);u&&l?u.initialization=l&&wi(l):u&&u.initialization&&(u.initialization={sourceURL:u.initialization});const c={template:u,segmentTimeline:a&&Jn(a,"S").map(h=>wi(h)),list:t&&Zi(wi(t),{segmentUrls:n,initialization:wi(l)}),base:i&&Zi(wi(i),{initialization:wi(l)})};return Object.keys(c).forEach(h=>{c[h]||delete c[h]}),c},Sae=(r,e,t)=>n=>{const i=Jn(n,"BaseURL"),s=jb(e,i),a=Zi(r,wi(n)),o=W2(n);return s.map(l=>({segmentInfo:Zi(t,o),attributes:Zi(a,l)}))},Tae=r=>r.reduce((e,t)=>{const n=wi(t);n.schemeIdUri&&(n.schemeIdUri=n.schemeIdUri.toLowerCase());const i=bae[n.schemeIdUri];if(i){e[i]={attributes:n};const s=Jn(t,"cenc:pssh")[0];if(s){const a=Lg(s);e[i].pssh=a&&aN(a)}}return e},{}),Cae=r=>{if(r.schemeIdUri==="urn:scte:dash:cc:cea-608:2015")return(typeof r.value!="string"?[]:r.value.split(";")).map(t=>{let n,i;return i=t,/^CC\d=/.test(t)?[n,i]=t.split("="):/^CC\d$/.test(t)&&(n=t),{channel:n,language:i}});if(r.schemeIdUri==="urn:scte:dash:cc:cea-708:2015")return(typeof r.value!="string"?[]:r.value.split(";")).map(t=>{const n={channel:void 0,language:void 0,aspectRatio:1,easyReader:0,"3D":0};if(/=/.test(t)){const[i,s=""]=t.split("=");n.channel=i,n.language=t,s.split(",").forEach(a=>{const[o,l]=a.split(":");o==="lang"?n.language=l:o==="er"?n.easyReader=Number(l):o==="war"?n.aspectRatio=Number(l):o==="3D"&&(n["3D"]=Number(l))})}else n.language=t;return n.channel&&(n.channel="SERVICE"+n.channel),n})},wae=r=>wp(Jn(r.node,"EventStream").map(e=>{const t=wi(e),n=t.schemeIdUri;return Jn(e,"Event").map(i=>{const s=wi(i),a=s.presentationTime||0,o=t.timescale||1,l=s.duration||0,u=a/o+r.attributes.start;return{schemeIdUri:n,value:t.value,id:s.id,start:u,end:u+l/o,messageData:Lg(i)||s.messageData,contentEncoding:t.contentEncoding,presentationTimeOffset:t.presentationTimeOffset||0}})})),Eae=(r,e,t)=>n=>{const i=wi(n),s=jb(e,Jn(n,"BaseURL")),a=Jn(n,"Role")[0],o={role:wi(a)};let l=Zi(r,i,o);const u=Jn(n,"Accessibility")[0],c=Cae(wi(u));c&&(l=Zi(l,{captionServices:c}));const h=Jn(n,"Label")[0];if(h&&h.childNodes.length){const x=h.childNodes[0].nodeValue.trim();l=Zi(l,{label:x})}const m=Tae(Jn(n,"ContentProtection"));Object.keys(m).length&&(l=Zi(l,{contentProtection:m}));const g=W2(n),y=Jn(n,"Representation"),v=Zi(t,g);return wp(y.map(Sae(l,s,v)))},kae=(r,e)=>(t,n)=>{const i=jb(e,Jn(t.node,"BaseURL")),s=Zi(r,{periodStart:t.attributes.start});typeof t.attributes.duration=="number"&&(s.periodDuration=t.attributes.duration);const a=Jn(t.node,"AdaptationSet"),o=W2(t.node);return wp(a.map(Eae(s,i,o)))},Aae=(r,e)=>{if(r.length>1&&e({type:"warn",message:"The MPD manifest should contain no more than one ContentSteering tag"}),!r.length)return null;const t=Zi({serverURL:Lg(r[0])},wi(r[0]));return t.queryBeforeStart=t.queryBeforeStart==="true",t},Dae=({attributes:r,priorPeriodAttributes:e,mpdType:t})=>typeof r.start=="number"?r.start:e&&typeof e.start=="number"&&typeof e.duration=="number"?e.start+e.duration:!e&&t==="static"?0:null,Iae=(r,e={})=>{const{manifestUri:t="",NOW:n=Date.now(),clientOffset:i=0,eventHandler:s=function(){}}=e,a=Jn(r,"Period");if(!a.length)throw new Error(Ep.INVALID_NUMBER_OF_PERIOD);const o=Jn(r,"Location"),l=wi(r),u=jb([{baseUrl:t}],Jn(r,"BaseURL")),c=Jn(r,"ContentSteering");l.type=l.type||"static",l.sourceDuration=l.mediaPresentationDuration||0,l.NOW=n,l.clientOffset=i,o.length&&(l.locations=o.map(Lg));const h=[];return a.forEach((m,g)=>{const y=wi(m),v=h[g-1];y.start=Dae({attributes:y,priorPeriodAttributes:v?v.attributes:null,mpdType:l.type}),h.push({node:m,attributes:y})}),{locations:l.locations,contentSteeringInfo:Aae(c,s),representationInfo:wp(h.map(kae(l,u))),eventStream:wp(h.map(wae))}},yN=r=>{if(r==="")throw new Error(Ep.DASH_EMPTY_MANIFEST);const e=new hN.DOMParser;let t,n;try{t=e.parseFromString(r,"application/xml"),n=t&&t.documentElement.tagName==="MPD"?t.documentElement:null}catch{}if(!n||n&&n.getElementsByTagName("parsererror").length>0)throw new Error(Ep.DASH_INVALID_XML);return n},Pae=r=>{const e=Jn(r,"UTCTiming")[0];if(!e)return null;const t=wi(e);switch(t.schemeIdUri){case"urn:mpeg:dash:utc:http-head:2014":case"urn:mpeg:dash:utc:http-head:2012":t.method="HEAD";break;case"urn:mpeg:dash:utc:http-xsdate:2014":case"urn:mpeg:dash:utc:http-iso:2014":case"urn:mpeg:dash:utc:http-xsdate:2012":case"urn:mpeg:dash:utc:http-iso:2012":t.method="GET";break;case"urn:mpeg:dash:utc:direct:2014":case"urn:mpeg:dash:utc:direct:2012":t.method="DIRECT",t.value=Date.parse(t.value);break;case"urn:mpeg:dash:utc:http-ntp:2014":case"urn:mpeg:dash:utc:ntp:2014":case"urn:mpeg:dash:utc:sntp:2014":default:throw new Error(Ep.UNSUPPORTED_UTC_TIMING_SCHEME)}return t},_N=(r,e={})=>{const t=Iae(yN(r),e),n=yae(t.representationInfo);return uae({dashPlaylists:n,locations:t.locations,contentSteering:t.contentSteeringInfo,sidxMapping:e.sidxMapping,previousManifest:e.previousManifest,eventStream:t.eventStream})},xN=r=>Pae(yN(r));var O1,CO;function Rae(){if(CO)return O1;CO=1;var r=Math.pow(2,32),e=function(t){var n=new DataView(t.buffer,t.byteOffset,t.byteLength),i;return n.getBigUint64?(i=n.getBigUint64(0),i<Number.MAX_SAFE_INTEGER?Number(i):i):n.getUint32(0)*r+n.getUint32(4)};return O1={getUint64:e,MAX_UINT32:r},O1}var M1,wO;function Lae(){if(wO)return M1;wO=1;var r=Rae().getUint64,e=function(t){var n=new DataView(t.buffer,t.byteOffset,t.byteLength),i={version:t[0],flags:new Uint8Array(t.subarray(1,4)),references:[],referenceId:n.getUint32(4),timescale:n.getUint32(8)},s=12;i.version===0?(i.earliestPresentationTime=n.getUint32(s),i.firstOffset=n.getUint32(s+4),s+=8):(i.earliestPresentationTime=r(t.subarray(s)),i.firstOffset=r(t.subarray(s+8)),s+=16),s+=2;var a=n.getUint16(s);for(s+=2;a>0;s+=12,a--)i.references.push({referenceType:(t[s]&128)>>>7,referencedSize:n.getUint32(s)&2147483647,subsegmentDuration:n.getUint32(s+4),startsWithSap:!!(t[s+8]&128),sapType:(t[s+8]&112)>>>4,sapDeltaTime:n.getUint32(s+8)&268435455});return i};return M1=e,M1}var Oae=Lae();const bN=ua(Oae);var Mae=gr([73,68,51]),Fae=function(e,t){t===void 0&&(t=0),e=gr(e);var n=e[t+5],i=e[t+6]<<21|e[t+7]<<14|e[t+8]<<7|e[t+9],s=(n&16)>>4;return s?i+20:i+10},Wf=function r(e,t){return t===void 0&&(t=0),e=gr(e),e.length-t<10||!Xn(e,Mae,{offset:t})?t:(t+=Fae(e,t),r(e,t))},EO=function(e){return typeof e=="string"?z2(e):e},Bae=function(e){return Array.isArray(e)?e.map(function(t){return EO(t)}):[EO(e)]},Nae=function r(e,t,n){n===void 0&&(n=!1),t=Bae(t),e=gr(e);var i=[];if(!t.length)return i;for(var s=0;s<e.length;){var a=(e[s]<<24|e[s+1]<<16|e[s+2]<<8|e[s+3])>>>0,o=e.subarray(s+4,s+8);if(a===0)break;var l=s+a;if(l>e.length){if(n)break;l=e.length}var u=e.subarray(s+8,l);Xn(o,t[0])&&(t.length===1?i.push(u):i.push.apply(i,r(u,t.slice(1),n))),s=l}return i},Zv={EBML:gr([26,69,223,163]),DocType:gr([66,130]),Segment:gr([24,83,128,103]),SegmentInfo:gr([21,73,169,102]),Tracks:gr([22,84,174,107]),Track:gr([174]),TrackNumber:gr([215]),DefaultDuration:gr([35,227,131]),TrackEntry:gr([174]),TrackType:gr([131]),FlagDefault:gr([136]),CodecID:gr([134]),CodecPrivate:gr([99,162]),VideoTrack:gr([224]),AudioTrack:gr([225]),Cluster:gr([31,67,182,117]),Timestamp:gr([231]),TimestampScale:gr([42,215,177]),BlockGroup:gr([160]),BlockDuration:gr([155]),Block:gr([161]),SimpleBlock:gr([163])},Tw=[128,64,32,16,8,4,2,1],Uae=function(e){for(var t=1,n=0;n<Tw.length&&!(e&Tw[n]);n++)t++;return t},rx=function(e,t,n,i){n===void 0&&(n=!0),i===void 0&&(i=!1);var s=Uae(e[t]),a=e.subarray(t,t+s);return n&&(a=Array.prototype.slice.call(e,t,t+s),a[0]^=Tw[s-1]),{length:s,value:Ose(a,{signed:i}),bytes:a}},kO=function r(e){return typeof e=="string"?e.match(/.{1,2}/g).map(function(t){return r(t)}):typeof e=="number"?Mse(e):e},$ae=function(e){return Array.isArray(e)?e.map(function(t){return kO(t)}):[kO(e)]},jae=function r(e,t,n){if(n>=t.length)return t.length;var i=rx(t,n,!1);if(Xn(e.bytes,i.bytes))return n;var s=rx(t,n+i.length);return r(e,t,n+s.length+s.value+i.length)},AO=function r(e,t){t=$ae(t),e=gr(e);var n=[];if(!t.length)return n;for(var i=0;i<e.length;){var s=rx(e,i,!1),a=rx(e,i+s.length),o=i+s.length+a.length;a.value===127&&(a.value=jae(s,e,o),a.value!==e.length&&(a.value-=o));var l=o+a.value>e.length?e.length:o+a.value,u=e.subarray(o,l);Xn(t[0],s.bytes)&&(t.length===1?n.push(u):n=n.concat(r(u,t.slice(1))));var c=s.length+a.length+u.length;i+=c}return n},zae=gr([0,0,0,1]),Hae=gr([0,0,1]),Vae=gr([0,0,3]),Wae=function(e){for(var t=[],n=1;n<e.length-2;)Xn(e.subarray(n,n+3),Vae)&&(t.push(n+2),n++),n++;if(t.length===0)return e;var i=e.length-t.length,s=new Uint8Array(i),a=0;for(n=0;n<i;a++,n++)a===t[0]&&(a++,t.shift()),s[n]=e[a];return s},SN=function(e,t,n,i){e=gr(e),n=[].concat(n);for(var s=0,a,o=0;s<e.length&&(o<i||a);){var l=void 0;if(Xn(e.subarray(s),zae)?l=4:Xn(e.subarray(s),Hae)&&(l=3),!l){s++;continue}if(o++,a)return Wae(e.subarray(a,s));var u=void 0;t==="h264"?u=e[s+l]&31:t==="h265"&&(u=e[s+l]>>1&63),n.indexOf(u)!==-1&&(a=s+l),s+=l+(t==="h264"?1:2)}return e.subarray(0,0)},qae=function(e,t,n){return SN(e,"h264",t,n)},Gae=function(e,t,n){return SN(e,"h265",t,n)},Xs={webm:gr([119,101,98,109]),matroska:gr([109,97,116,114,111,115,107,97]),flac:gr([102,76,97,67]),ogg:gr([79,103,103,83]),ac3:gr([11,119]),riff:gr([82,73,70,70]),avi:gr([65,86,73]),wav:gr([87,65,86,69]),"3gp":gr([102,116,121,112,51,103]),mp4:gr([102,116,121,112]),fmp4:gr([115,116,121,112]),mov:gr([102,116,121,112,113,116]),moov:gr([109,111,111,118]),moof:gr([109,111,111,102])},kp={aac:function(e){var t=Wf(e);return Xn(e,[255,16],{offset:t,mask:[255,22]})},mp3:function(e){var t=Wf(e);return Xn(e,[255,2],{offset:t,mask:[255,6]})},webm:function(e){var t=AO(e,[Zv.EBML,Zv.DocType])[0];return Xn(t,Xs.webm)},mkv:function(e){var t=AO(e,[Zv.EBML,Zv.DocType])[0];return Xn(t,Xs.matroska)},mp4:function(e){if(kp["3gp"](e)||kp.mov(e))return!1;if(Xn(e,Xs.mp4,{offset:4})||Xn(e,Xs.fmp4,{offset:4})||Xn(e,Xs.moof,{offset:4})||Xn(e,Xs.moov,{offset:4}))return!0},mov:function(e){return Xn(e,Xs.mov,{offset:4})},"3gp":function(e){return Xn(e,Xs["3gp"],{offset:4})},ac3:function(e){var t=Wf(e);return Xn(e,Xs.ac3,{offset:t})},ts:function(e){if(e.length<189&&e.length>=1)return e[0]===71;for(var t=0;t+188<e.length&&t<188;){if(e[t]===71&&e[t+188]===71)return!0;t+=1}return!1},flac:function(e){var t=Wf(e);return Xn(e,Xs.flac,{offset:t})},ogg:function(e){return Xn(e,Xs.ogg)},avi:function(e){return Xn(e,Xs.riff)&&Xn(e,Xs.avi,{offset:8})},wav:function(e){return Xn(e,Xs.riff)&&Xn(e,Xs.wav,{offset:8})},h264:function(e){return qae(e,7,3).length},h265:function(e){return Gae(e,[32,33],3).length}},Cw=Object.keys(kp).filter(function(r){return r!=="ts"&&r!=="h264"&&r!=="h265"}).concat(["ts","h264","h265"]);Cw.forEach(function(r){var e=kp[r];kp[r]=function(t){return e(gr(t))}});var Kae=kp,Yp=function(e){e=gr(e);for(var t=0;t<Cw.length;t++){var n=Cw[t];if(Kae[n](e))return n}return""},TN=function(e){return Nae(e,["moof"]).length>0},F1,DO;function Xae(){if(DO)return F1;DO=1;var r=9e4,e,t,n,i,s,a,o;return e=function(l){return l*r},t=function(l,u){return l*u},n=function(l){return l/r},i=function(l,u){return l/u},s=function(l,u){return e(i(l,u))},a=function(l,u){return t(n(l),u)},o=function(l,u,c){return n(c?l:l-u)},F1={ONE_SECOND_IN_TS:r,secondsToVideoTs:e,secondsToAudioTs:t,videoTsToSeconds:n,audioTsToSeconds:i,audioTsToVideoTs:s,videoTsToAudioTs:a,metadataTsToSeconds:o},F1}var Fa=Xae();/**
 * @license
 * Video.js 8.19.1 <http://videojs.com/>
 * Copyright Brightcove, Inc. <https://www.brightcove.com/>
 * Available under Apache License Version 2.0
 * <https://github.com/videojs/video.js/blob/main/LICENSE>
 *
 * Includes vtt.js <https://github.com/mozilla/vtt.js>
 * Available under Apache License Version 2.0
 * <https://github.com/mozilla/vtt.js/blob/main/LICENSE>
 */var ww="8.19.1";const hc={},Pd=function(r,e){return hc[r]=hc[r]||[],e&&(hc[r]=hc[r].concat(e)),hc[r]},Yae=function(r,e){Pd(r,e)},CN=function(r,e){const t=Pd(r).indexOf(e);return t<=-1?!1:(hc[r]=hc[r].slice(),hc[r].splice(t,1),!0)},Qae=function(r,e){Pd(r,[].concat(e).map(t=>{const n=(...i)=>(CN(r,n),t(...i));return n}))},nx={prefixed:!0},__=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror","fullscreen"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror","-webkit-full-screen"]],IO=__[0];let f0;for(let r=0;r<__.length;r++)if(__[r][1]in Fe){f0=__[r];break}if(f0){for(let r=0;r<f0.length;r++)nx[IO[r]]=f0[r];nx.prefixed=f0[0]!==IO[0]}let Da=[];const Jae=(r,e,t)=>(n,i,s)=>{const a=e.levels[i],o=new RegExp(`^(${a})$`);let l=r;if(n!=="log"&&s.unshift(n.toUpperCase()+":"),t&&(l=`%c${r}`,s.unshift(t)),s.unshift(l+":"),Da){Da.push([].concat(s));const c=Da.length-1e3;Da.splice(0,c>0?c:0)}if(!X.console)return;let u=X.console[n];!u&&n==="debug"&&(u=X.console.info||X.console.log),!(!u||!a||!o.test(n))&&u[Array.isArray(s)?"apply":"call"](X.console,s)};function Ew(r,e=":",t=""){let n="info",i;function s(...a){i("log",n,a)}return i=Jae(r,s,t),s.createLogger=(a,o,l)=>{const u=o!==void 0?o:e,c=l!==void 0?l:t,h=`${r} ${u} ${a}`;return Ew(h,u,c)},s.createNewLogger=(a,o,l)=>Ew(a,o,l),s.levels={all:"debug|log|warn|error",off:"",debug:"debug|log|warn|error",info:"log|warn|error",warn:"warn|error",error:"error",DEFAULT:n},s.level=a=>{if(typeof a=="string"){if(!s.levels.hasOwnProperty(a))throw new Error(`"${a}" in not a valid log level`);n=a}return n},s.history=()=>Da?[].concat(Da):[],s.history.filter=a=>(Da||[]).filter(o=>new RegExp(`.*${a}.*`).test(o[0])),s.history.clear=()=>{Da&&(Da.length=0)},s.history.disable=()=>{Da!==null&&(Da.length=0,Da=null)},s.history.enable=()=>{Da===null&&(Da=[])},s.error=(...a)=>i("error",n,a),s.warn=(...a)=>i("warn",n,a),s.debug=(...a)=>i("debug",n,a),s}const Kr=Ew("VIDEOJS"),wN=Kr.createLogger,Zae=Object.prototype.toString,EN=function(r){return ku(r)?Object.keys(r):[]};function op(r,e){EN(r).forEach(t=>e(r[t],t))}function kN(r,e,t=0){return EN(r).reduce((n,i)=>e(n,r[i],i),t)}function ku(r){return!!r&&typeof r=="object"}function Ap(r){return ku(r)&&Zae.call(r)==="[object Object]"&&r.constructor===Object}function Bn(...r){const e={};return r.forEach(t=>{t&&op(t,(n,i)=>{if(!Ap(n)){e[i]=n;return}Ap(e[i])||(e[i]={}),e[i]=Bn(e[i],n)})}),e}function AN(r={}){const e=[];for(const t in r)if(r.hasOwnProperty(t)){const n=r[t];e.push(n)}return e}function zb(r,e,t,n=!0){const i=a=>Object.defineProperty(r,e,{value:a,enumerable:!0,writable:!0}),s={configurable:!0,enumerable:!0,get(){const a=t();return i(a),a}};return n&&(s.set=i),Object.defineProperty(r,e,s)}var eoe=Object.freeze({__proto__:null,each:op,reduce:kN,isObject:ku,isPlain:Ap,merge:Bn,values:AN,defineLazyProperty:zb});let q2=!1,DN=null,Au=!1,IN,PN=!1,lp=!1,up=!1,Du=!1,G2=null,Hb=null;const toe=!!(X.cast&&X.cast.framework&&X.cast.framework.CastReceiverContext);let RN=null,ix=!1,Vb=!1,sx=!1,Wb=!1,ax=!1,ox=!1,lx=!1;const eg=!!(Qp()&&("ontouchstart"in X||X.navigator.maxTouchPoints||X.DocumentTouch&&X.document instanceof X.DocumentTouch)),ld=X.navigator&&X.navigator.userAgentData;ld&&ld.platform&&ld.brands&&(Au=ld.platform==="Android",lp=!!ld.brands.find(r=>r.brand==="Microsoft Edge"),up=!!ld.brands.find(r=>r.brand==="Chromium"),Du=!lp&&up,G2=Hb=(ld.brands.find(r=>r.brand==="Chromium")||{}).version||null,Vb=ld.platform==="Windows");if(!up){const r=X.navigator&&X.navigator.userAgent||"";q2=/iPod/i.test(r),DN=(function(){const e=r.match(/OS (\d+)_/i);return e&&e[1]?e[1]:null})(),Au=/Android/i.test(r),IN=(function(){const e=r.match(/Android (\d+)(?:\.(\d+))?(?:\.(\d+))*/i);if(!e)return null;const t=e[1]&&parseFloat(e[1]),n=e[2]&&parseFloat(e[2]);return t&&n?parseFloat(e[1]+"."+e[2]):t||null})(),PN=/Firefox/i.test(r),lp=/Edg/i.test(r),up=/Chrome/i.test(r)||/CriOS/i.test(r),Du=!lp&&up,G2=Hb=(function(){const e=r.match(/(Chrome|CriOS)\/(\d+)/);return e&&e[2]?parseFloat(e[2]):null})(),RN=(function(){const e=/MSIE\s(\d+)\.\d/.exec(r);let t=e&&parseFloat(e[1]);return!t&&/Trident\/7.0/i.test(r)&&/rv:11.0/.test(r)&&(t=11),t})(),ax=/Tizen/i.test(r),ox=/Web0S/i.test(r),lx=ax||ox,ix=/Safari/i.test(r)&&!Du&&!Au&&!lp&&!lx,Vb=/Windows/i.test(r),sx=/iPad/i.test(r)||ix&&eg&&!/iPhone/i.test(r),Wb=/iPhone/i.test(r)&&!sx}const oa=Wb||sx||q2,qb=(ix||oa)&&!Du;var LN=Object.freeze({__proto__:null,get IS_IPOD(){return q2},get IOS_VERSION(){return DN},get IS_ANDROID(){return Au},get ANDROID_VERSION(){return IN},get IS_FIREFOX(){return PN},get IS_EDGE(){return lp},get IS_CHROMIUM(){return up},get IS_CHROME(){return Du},get CHROMIUM_VERSION(){return G2},get CHROME_VERSION(){return Hb},IS_CHROMECAST_RECEIVER:toe,get IE_VERSION(){return RN},get IS_SAFARI(){return ix},get IS_WINDOWS(){return Vb},get IS_IPAD(){return sx},get IS_IPHONE(){return Wb},get IS_TIZEN(){return ax},get IS_WEBOS(){return ox},get IS_SMART_TV(){return lx},TOUCH_ENABLED:eg,IS_IOS:oa,IS_ANY_SAFARI:qb});function PO(r){return typeof r=="string"&&!!r.trim()}function roe(r){if(r.indexOf(" ")>=0)throw new Error("class has illegal whitespace characters")}function Qp(){return Fe===X.document}function Jp(r){return ku(r)&&r.nodeType===1}function ON(){try{return X.parent!==X.self}catch{return!0}}function MN(r){return function(e,t){if(!PO(e))return Fe[r](null);PO(t)&&(t=Fe.querySelector(t));const n=Jp(t)?t:Fe;return n[r]&&n[r](e)}}function Er(r="div",e={},t={},n){const i=Fe.createElement(r);return Object.getOwnPropertyNames(e).forEach(function(s){const a=e[s];s==="textContent"?Ud(i,a):(i[s]!==a||s==="tabIndex")&&(i[s]=a)}),Object.getOwnPropertyNames(t).forEach(function(s){i.setAttribute(s,t[s])}),n&&K2(i,n),i}function Ud(r,e){return typeof r.textContent>"u"?r.innerText=e:r.textContent=e,r}function kw(r,e){e.firstChild?e.insertBefore(r,e.firstChild):e.appendChild(r)}function w0(r,e){return roe(e),r.classList.contains(e)}function Lh(r,...e){return r.classList.add(...e.reduce((t,n)=>t.concat(n.split(/\s+/)),[])),r}function Gb(r,...e){return r?(r.classList.remove(...e.reduce((t,n)=>t.concat(n.split(/\s+/)),[])),r):(Kr.warn("removeClass was called with an element that doesn't exist"),null)}function FN(r,e,t){return typeof t=="function"&&(t=t(r,e)),typeof t!="boolean"&&(t=void 0),e.split(/\s+/).forEach(n=>r.classList.toggle(n,t)),r}function BN(r,e){Object.getOwnPropertyNames(e).forEach(function(t){const n=e[t];n===null||typeof n>"u"||n===!1?r.removeAttribute(t):r.setAttribute(t,n===!0?"":n)})}function md(r){const e={},t=["autoplay","controls","playsinline","loop","muted","default","defaultMuted"];if(r&&r.attributes&&r.attributes.length>0){const n=r.attributes;for(let i=n.length-1;i>=0;i--){const s=n[i].name;let a=n[i].value;t.includes(s)&&(a=a!==null),e[s]=a}}return e}function NN(r,e){return r.getAttribute(e)}function Dp(r,e,t){r.setAttribute(e,t)}function Kb(r,e){r.removeAttribute(e)}function UN(){Fe.body.focus(),Fe.onselectstart=function(){return!1}}function $N(){Fe.onselectstart=function(){return!0}}function Ip(r){if(r&&r.getBoundingClientRect&&r.parentNode){const e=r.getBoundingClientRect(),t={};return["bottom","height","left","right","top","width"].forEach(n=>{e[n]!==void 0&&(t[n]=e[n])}),t.height||(t.height=parseFloat(Pp(r,"height"))),t.width||(t.width=parseFloat(Pp(r,"width"))),t}}function tg(r){if(!r||r&&!r.offsetParent)return{left:0,top:0,width:0,height:0};const e=r.offsetWidth,t=r.offsetHeight;let n=0,i=0;for(;r.offsetParent&&r!==Fe[nx.fullscreenElement];)n+=r.offsetLeft,i+=r.offsetTop,r=r.offsetParent;return{left:n,top:i,width:e,height:t}}function Xb(r,e){const t={x:0,y:0};if(oa){let c=r;for(;c&&c.nodeName.toLowerCase()!=="html";){const h=Pp(c,"transform");if(/^matrix/.test(h)){const m=h.slice(7,-1).split(/,\s/).map(Number);t.x+=m[4],t.y+=m[5]}else if(/^matrix3d/.test(h)){const m=h.slice(9,-1).split(/,\s/).map(Number);t.x+=m[12],t.y+=m[13]}if(c.assignedSlot&&c.assignedSlot.parentElement&&X.WebKitCSSMatrix){const m=X.getComputedStyle(c.assignedSlot.parentElement).transform,g=new X.WebKitCSSMatrix(m);t.x+=g.m41,t.y+=g.m42}c=c.parentNode||c.host}}const n={},i=tg(e.target),s=tg(r),a=s.width,o=s.height;let l=e.offsetY-(s.top-i.top),u=e.offsetX-(s.left-i.left);return e.changedTouches&&(u=e.changedTouches[0].pageX-s.left,l=e.changedTouches[0].pageY+s.top,oa&&(u-=t.x,l-=t.y)),n.y=1-Math.max(0,Math.min(1,l/o)),n.x=Math.max(0,Math.min(1,u/a)),n}function jN(r){return ku(r)&&r.nodeType===3}function Yb(r){for(;r.firstChild;)r.removeChild(r.firstChild);return r}function zN(r){return typeof r=="function"&&(r=r()),(Array.isArray(r)?r:[r]).map(e=>{if(typeof e=="function"&&(e=e()),Jp(e)||jN(e))return e;if(typeof e=="string"&&/\S/.test(e))return Fe.createTextNode(e)}).filter(e=>e)}function K2(r,e){return zN(e).forEach(t=>r.appendChild(t)),r}function HN(r,e){return K2(Yb(r),e)}function rg(r){return r.button===void 0&&r.buttons===void 0||r.button===0&&r.buttons===void 0||r.type==="mouseup"&&r.button===0&&r.buttons===0||r.type==="mousedown"&&r.button===0&&r.buttons===0?!0:!(r.button!==0||r.buttons!==1)}const Rd=MN("querySelector"),VN=MN("querySelectorAll");function Pp(r,e){if(!r||!e)return"";if(typeof X.getComputedStyle=="function"){let t;try{t=X.getComputedStyle(r)}catch{return""}return t?t.getPropertyValue(e)||t[e]:""}return""}function WN(r){[...Fe.styleSheets].forEach(e=>{try{const t=[...e.cssRules].map(i=>i.cssText).join(""),n=Fe.createElement("style");n.textContent=t,r.document.head.appendChild(n)}catch{const n=Fe.createElement("link");n.rel="stylesheet",n.type=e.type,n.media=e.media.mediaText,n.href=e.href,r.document.head.appendChild(n)}})}var qN=Object.freeze({__proto__:null,isReal:Qp,isEl:Jp,isInFrame:ON,createEl:Er,textContent:Ud,prependTo:kw,hasClass:w0,addClass:Lh,removeClass:Gb,toggleClass:FN,setAttributes:BN,getAttributes:md,getAttribute:NN,setAttribute:Dp,removeAttribute:Kb,blockTextSelection:UN,unblockTextSelection:$N,getBoundingClientRect:Ip,findPosition:tg,getPointerPosition:Xb,isTextNode:jN,emptyEl:Yb,normalizeContent:zN,appendContent:K2,insertContent:HN,isSingleLeftClick:rg,$:Rd,$$:VN,computedStyle:Pp,copyStyleSheetsToWindow:WN});let GN=!1,Aw;const noe=function(){if(Aw.options.autoSetup===!1)return;const r=Array.prototype.slice.call(Fe.getElementsByTagName("video")),e=Array.prototype.slice.call(Fe.getElementsByTagName("audio")),t=Array.prototype.slice.call(Fe.getElementsByTagName("video-js")),n=r.concat(e,t);if(n&&n.length>0)for(let i=0,s=n.length;i<s;i++){const a=n[i];if(a&&a.getAttribute)a.player===void 0&&a.getAttribute("data-setup")!==null&&Aw(a);else{Dw(1);break}}else GN||Dw(1)};function Dw(r,e){Qp()&&(e&&(Aw=e),X.setTimeout(noe,r))}function Iw(){GN=!0,X.removeEventListener("load",Iw)}Qp()&&(Fe.readyState==="complete"?Iw():X.addEventListener("load",Iw));const KN=function(r){const e=Fe.createElement("style");return e.className=r,e},XN=function(r,e){r.styleSheet?r.styleSheet.cssText=e:r.textContent=e};var ra=new WeakMap;const ioe=3;let soe=ioe;function Xo(){return soe++}function RO(r,e){if(!ra.has(r))return;const t=ra.get(r);t.handlers[e].length===0&&(delete t.handlers[e],r.removeEventListener?r.removeEventListener(e,t.dispatcher,!1):r.detachEvent&&r.detachEvent("on"+e,t.dispatcher)),Object.getOwnPropertyNames(t.handlers).length<=0&&(delete t.handlers,delete t.dispatcher,delete t.disabled),Object.getOwnPropertyNames(t).length===0&&ra.delete(r)}function X2(r,e,t,n){t.forEach(function(i){r(e,i,n)})}function Qb(r){if(r.fixed_)return r;function e(){return!0}function t(){return!1}if(!r||!r.isPropagationStopped||!r.isImmediatePropagationStopped){const n=r||X.event;r={};const i=["layerX","layerY","keyLocation","path","webkitMovementX","webkitMovementY","mozPressure","mozInputSource"];for(const s in n)i.includes(s)||s==="returnValue"&&n.preventDefault||(r[s]=n[s]);if(r.target||(r.target=r.srcElement||Fe),r.relatedTarget||(r.relatedTarget=r.fromElement===r.target?r.toElement:r.fromElement),r.preventDefault=function(){n.preventDefault&&n.preventDefault(),r.returnValue=!1,n.returnValue=!1,r.defaultPrevented=!0},r.defaultPrevented=!1,r.stopPropagation=function(){n.stopPropagation&&n.stopPropagation(),r.cancelBubble=!0,n.cancelBubble=!0,r.isPropagationStopped=e},r.isPropagationStopped=t,r.stopImmediatePropagation=function(){n.stopImmediatePropagation&&n.stopImmediatePropagation(),r.isImmediatePropagationStopped=e,r.stopPropagation()},r.isImmediatePropagationStopped=t,r.clientX!==null&&r.clientX!==void 0){const s=Fe.documentElement,a=Fe.body;r.pageX=r.clientX+(s&&s.scrollLeft||a&&a.scrollLeft||0)-(s&&s.clientLeft||a&&a.clientLeft||0),r.pageY=r.clientY+(s&&s.scrollTop||a&&a.scrollTop||0)-(s&&s.clientTop||a&&a.clientTop||0)}r.which=r.charCode||r.keyCode,r.button!==null&&r.button!==void 0&&(r.button=r.button&1?0:r.button&4?1:r.button&2?2:0)}return r.fixed_=!0,r}let ey;const aoe=function(){if(typeof ey!="boolean"){ey=!1;try{const r=Object.defineProperty({},"passive",{get(){ey=!0}});X.addEventListener("test",null,r),X.removeEventListener("test",null,r)}catch{}}return ey},ooe=["touchstart","touchmove"];function po(r,e,t){if(Array.isArray(e))return X2(po,r,e,t);ra.has(r)||ra.set(r,{});const n=ra.get(r);if(n.handlers||(n.handlers={}),n.handlers[e]||(n.handlers[e]=[]),t.guid||(t.guid=Xo()),n.handlers[e].push(t),n.dispatcher||(n.disabled=!1,n.dispatcher=function(i,s){if(n.disabled)return;i=Qb(i);const a=n.handlers[i.type];if(a){const o=a.slice(0);for(let l=0,u=o.length;l<u&&!i.isImmediatePropagationStopped();l++)try{o[l].call(r,i,s)}catch(c){Kr.error(c)}}}),n.handlers[e].length===1)if(r.addEventListener){let i=!1;aoe()&&ooe.indexOf(e)>-1&&(i={passive:!0}),r.addEventListener(e,n.dispatcher,i)}else r.attachEvent&&r.attachEvent("on"+e,n.dispatcher)}function Ns(r,e,t){if(!ra.has(r))return;const n=ra.get(r);if(!n.handlers)return;if(Array.isArray(e))return X2(Ns,r,e,t);const i=function(a,o){n.handlers[o]=[],RO(a,o)};if(e===void 0){for(const a in n.handlers)Object.prototype.hasOwnProperty.call(n.handlers||{},a)&&i(r,a);return}const s=n.handlers[e];if(s){if(!t){i(r,e);return}if(t.guid)for(let a=0;a<s.length;a++)s[a].guid===t.guid&&s.splice(a--,1);RO(r,e)}}function Zp(r,e,t){const n=ra.has(r)?ra.get(r):{},i=r.parentNode||r.ownerDocument;if(typeof e=="string"?e={type:e,target:r}:e.target||(e.target=r),e=Qb(e),n.dispatcher&&n.dispatcher.call(r,e,t),i&&!e.isPropagationStopped()&&e.bubbles===!0)Zp.call(null,i,e,t);else if(!i&&!e.defaultPrevented&&e.target&&e.target[e.type]){ra.has(e.target)||ra.set(e.target,{});const s=ra.get(e.target);e.target[e.type]&&(s.disabled=!0,typeof e.target[e.type]=="function"&&e.target[e.type](),s.disabled=!1)}return!e.defaultPrevented}function Jb(r,e,t){if(Array.isArray(e))return X2(Jb,r,e,t);const n=function(){Ns(r,e,n),t.apply(this,arguments)};n.guid=t.guid=t.guid||Xo(),po(r,e,n)}function Y2(r,e,t){const n=function(){Ns(r,e,n),t.apply(this,arguments)};n.guid=t.guid=t.guid||Xo(),po(r,e,n)}var loe=Object.freeze({__proto__:null,fixEvent:Qb,on:po,off:Ns,trigger:Zp,one:Jb,any:Y2});const Yo=30,jn=function(r,e,t){e.guid||(e.guid=Xo());const n=e.bind(r);return n.guid=t?t+"_"+e.guid:e.guid,n},Iu=function(r,e){let t=X.performance.now();return function(...i){const s=X.performance.now();s-t>=e&&(r(...i),t=s)}},YN=function(r,e,t,n=X){let i;const s=()=>{n.clearTimeout(i),i=null},a=function(){const o=this,l=arguments;let u=function(){i=null,u=null,t||r.apply(o,l)};!i&&t&&r.apply(o,l),n.clearTimeout(i),i=n.setTimeout(u,e)};return a.cancel=s,a};var uoe=Object.freeze({__proto__:null,UPDATE_REFRESH_INTERVAL:Yo,bind_:jn,throttle:Iu,debounce:YN});let Zm,mo=class{on(e,t){const n=this.addEventListener;this.addEventListener=()=>{},po(this,e,t),this.addEventListener=n}off(e,t){Ns(this,e,t)}one(e,t){const n=this.addEventListener;this.addEventListener=()=>{},Jb(this,e,t),this.addEventListener=n}any(e,t){const n=this.addEventListener;this.addEventListener=()=>{},Y2(this,e,t),this.addEventListener=n}trigger(e){const t=e.type||e;typeof e=="string"&&(e={type:t}),e=Qb(e),this.allowedEvents_[t]&&this["on"+t]&&this["on"+t](e),Zp(this,e)}queueTrigger(e){Zm||(Zm=new Map);const t=e.type||e;let n=Zm.get(this);n||(n=new Map,Zm.set(this,n));const i=n.get(t);n.delete(t),X.clearTimeout(i);const s=X.setTimeout(()=>{n.delete(t),n.size===0&&(n=null,Zm.delete(this)),this.trigger(e)},0);n.set(t,s)}};mo.prototype.allowedEvents_={};mo.prototype.addEventListener=mo.prototype.on;mo.prototype.removeEventListener=mo.prototype.off;mo.prototype.dispatchEvent=mo.prototype.trigger;const Zb=r=>typeof r.name=="function"?r.name():typeof r.name=="string"?r.name:r.name_?r.name_:r.constructor&&r.constructor.name?r.constructor.name:typeof r,yc=r=>r instanceof mo||!!r.eventBusEl_&&["on","one","off","trigger"].every(e=>typeof r[e]=="function"),coe=(r,e)=>{yc(r)?e():(r.eventedCallbacks||(r.eventedCallbacks=[]),r.eventedCallbacks.push(e))},Pw=r=>typeof r=="string"&&/\S/.test(r)||Array.isArray(r)&&!!r.length,ux=(r,e,t)=>{if(!r||!r.nodeName&&!yc(r))throw new Error(`Invalid target for ${Zb(e)}#${t}; must be a DOM node or evented object.`)},QN=(r,e,t)=>{if(!Pw(r))throw new Error(`Invalid event type for ${Zb(e)}#${t}; must be a non-empty string or array.`)},JN=(r,e,t)=>{if(typeof r!="function")throw new Error(`Invalid listener for ${Zb(e)}#${t}; must be a function.`)},B1=(r,e,t)=>{const n=e.length<3||e[0]===r||e[0]===r.eventBusEl_;let i,s,a;return n?(i=r.eventBusEl_,e.length>=3&&e.shift(),[s,a]=e):(i=e[0],s=e[1],a=e[2]),ux(i,r,t),QN(s,r,t),JN(a,r,t),a=jn(r,a),{isTargetingSelf:n,target:i,type:s,listener:a}},dh=(r,e,t,n)=>{ux(r,r,e),r.nodeName?loe[e](r,t,n):r[e](t,n)},doe={on(...r){const{isTargetingSelf:e,target:t,type:n,listener:i}=B1(this,r,"on");if(dh(t,"on",n,i),!e){const s=()=>this.off(t,n,i);s.guid=i.guid;const a=()=>this.off("dispose",s);a.guid=i.guid,dh(this,"on","dispose",s),dh(t,"on","dispose",a)}},one(...r){const{isTargetingSelf:e,target:t,type:n,listener:i}=B1(this,r,"one");if(e)dh(t,"one",n,i);else{const s=(...a)=>{this.off(t,n,s),i.apply(null,a)};s.guid=i.guid,dh(t,"one",n,s)}},any(...r){const{isTargetingSelf:e,target:t,type:n,listener:i}=B1(this,r,"any");if(e)dh(t,"any",n,i);else{const s=(...a)=>{this.off(t,n,s),i.apply(null,a)};s.guid=i.guid,dh(t,"any",n,s)}},off(r,e,t){if(!r||Pw(r))Ns(this.eventBusEl_,r,e);else{const n=r,i=e;ux(n,this,"off"),QN(i,this,"off"),JN(t,this,"off"),t=jn(this,t),this.off("dispose",t),n.nodeName?(Ns(n,i,t),Ns(n,"dispose",t)):yc(n)&&(n.off(i,t),n.off("dispose",t))}},trigger(r,e){ux(this.eventBusEl_,this,"trigger");const t=r&&typeof r!="string"?r.type:r;if(!Pw(t))throw new Error(`Invalid event type for ${Zb(this)}#trigger; must be a non-empty string or object with a type key that has a non-empty value.`);return Zp(this.eventBusEl_,r,e)}};function Q2(r,e={}){const{eventBusKey:t}=e;if(t){if(!r[t].nodeName)throw new Error(`The eventBusKey "${t}" does not refer to an element.`);r.eventBusEl_=r[t]}else r.eventBusEl_=Er("span",{className:"vjs-event-bus"});return Object.assign(r,doe),r.eventedCallbacks&&r.eventedCallbacks.forEach(n=>{n()}),r.on("dispose",()=>{r.off(),[r,r.el_,r.eventBusEl_].forEach(function(n){n&&ra.has(n)&&ra.delete(n)}),X.setTimeout(()=>{r.eventBusEl_=null},0)}),r}const hoe={state:{},setState(r){typeof r=="function"&&(r=r());let e;return op(r,(t,n)=>{this.state[n]!==t&&(e=e||{},e[n]={from:this.state[n],to:t}),this.state[n]=t}),e&&yc(this)&&this.trigger({changes:e,type:"statechanged"}),e}};function ZN(r,e){return Object.assign(r,hoe),r.state=Object.assign({},r.state,e),typeof r.handleStateChanged=="function"&&yc(r)&&r.on("statechanged",r.handleStateChanged),r}const E0=function(r){return typeof r!="string"?r:r.replace(/./,e=>e.toLowerCase())},ui=function(r){return typeof r!="string"?r:r.replace(/./,e=>e.toUpperCase())},e5=function(r,e){return ui(r)===ui(e)};var foe=Object.freeze({__proto__:null,toLowerCase:E0,toTitleCase:ui,titleCaseEquals:e5});let mt=class ka{constructor(e,t,n){if(!e&&this.play?this.player_=e=this:this.player_=e,this.isDisposed_=!1,this.parentComponent_=null,this.options_=Bn({},this.options_),t=this.options_=Bn(this.options_,t),this.id_=t.id||t.el&&t.el.id,!this.id_){const i=e&&e.id&&e.id()||"no_player";this.id_=`${i}_component_${Xo()}`}this.name_=t.name||null,t.el?this.el_=t.el:t.createEl!==!1&&(this.el_=this.createEl()),t.className&&this.el_&&t.className.split(" ").forEach(i=>this.addClass(i)),["on","off","one","any","trigger"].forEach(i=>{this[i]=void 0}),t.evented!==!1&&(Q2(this,{eventBusKey:this.el_?"el_":null}),this.handleLanguagechange=this.handleLanguagechange.bind(this),this.on(this.player_,"languagechange",this.handleLanguagechange)),ZN(this,this.constructor.defaultState),this.children_=[],this.childIndex_={},this.childNameIndex_={},this.setTimeoutIds_=new Set,this.setIntervalIds_=new Set,this.rafIds_=new Set,this.namedRafs_=new Map,this.clearingTimersOnDispose_=!1,t.initChildren!==!1&&this.initChildren(),this.ready(n),t.reportTouchActivity!==!1&&this.enableTouchActivity()}dispose(e={}){if(!this.isDisposed_){if(this.readyQueue_&&(this.readyQueue_.length=0),this.trigger({type:"dispose",bubbles:!1}),this.isDisposed_=!0,this.children_)for(let t=this.children_.length-1;t>=0;t--)this.children_[t].dispose&&this.children_[t].dispose();this.children_=null,this.childIndex_=null,this.childNameIndex_=null,this.parentComponent_=null,this.el_&&(this.el_.parentNode&&(e.restoreEl?this.el_.parentNode.replaceChild(e.restoreEl,this.el_):this.el_.parentNode.removeChild(this.el_)),this.el_=null),this.player_=null}}isDisposed(){return!!this.isDisposed_}player(){return this.player_}options(e){return e?(this.options_=Bn(this.options_,e),this.options_):this.options_}el(){return this.el_}createEl(e,t,n){return Er(e,t,n)}localize(e,t,n=e){const i=this.player_.language&&this.player_.language(),s=this.player_.languages&&this.player_.languages(),a=s&&s[i],o=i&&i.split("-")[0],l=s&&s[o];let u=n;return a&&a[e]?u=a[e]:l&&l[e]&&(u=l[e]),t&&(u=u.replace(/\{(\d+)\}/g,function(c,h){const m=t[h-1];let g=m;return typeof m>"u"&&(g=c),g})),u}handleLanguagechange(){}contentEl(){return this.contentEl_||this.el_}id(){return this.id_}name(){return this.name_}children(){return this.children_}getChildById(e){return this.childIndex_[e]}getChild(e){if(e)return this.childNameIndex_[e]}getDescendant(...e){e=e.reduce((n,i)=>n.concat(i),[]);let t=this;for(let n=0;n<e.length;n++)if(t=t.getChild(e[n]),!t||!t.getChild)return;return t}setIcon(e,t=this.el()){if(!this.player_.options_.experimentalSvgIcons)return;const n="http://www.w3.org/2000/svg",i=Er("span",{className:"vjs-icon-placeholder vjs-svg-icon"},{"aria-hidden":"true"}),s=Fe.createElementNS(n,"svg");s.setAttributeNS(null,"viewBox","0 0 512 512");const a=Fe.createElementNS(n,"use");return s.appendChild(a),a.setAttributeNS(null,"href",`#vjs-icon-${e}`),i.appendChild(s),this.iconIsSet_?t.replaceChild(i,t.querySelector(".vjs-icon-placeholder")):t.appendChild(i),this.iconIsSet_=!0,i}addChild(e,t={},n=this.children_.length){let i,s;if(typeof e=="string"){s=ui(e);const a=t.componentClass||s;t.name=s;const o=ka.getComponent(a);if(!o)throw new Error(`Component ${a} does not exist`);if(typeof o!="function")return null;i=new o(this.player_||this,t)}else i=e;if(i.parentComponent_&&i.parentComponent_.removeChild(i),this.children_.splice(n,0,i),i.parentComponent_=this,typeof i.id=="function"&&(this.childIndex_[i.id()]=i),s=s||i.name&&ui(i.name()),s&&(this.childNameIndex_[s]=i,this.childNameIndex_[E0(s)]=i),typeof i.el=="function"&&i.el()){let a=null;this.children_[n+1]&&(this.children_[n+1].el_?a=this.children_[n+1].el_:Jp(this.children_[n+1])&&(a=this.children_[n+1])),this.contentEl().insertBefore(i.el(),a)}return i}removeChild(e){if(typeof e=="string"&&(e=this.getChild(e)),!e||!this.children_)return;let t=!1;for(let i=this.children_.length-1;i>=0;i--)if(this.children_[i]===e){t=!0,this.children_.splice(i,1);break}if(!t)return;e.parentComponent_=null,this.childIndex_[e.id()]=null,this.childNameIndex_[ui(e.name())]=null,this.childNameIndex_[E0(e.name())]=null;const n=e.el();n&&n.parentNode===this.contentEl()&&this.contentEl().removeChild(e.el())}initChildren(){const e=this.options_.children;if(e){const t=this.options_,n=a=>{const o=a.name;let l=a.opts;if(t[o]!==void 0&&(l=t[o]),l===!1)return;l===!0&&(l={}),l.playerOptions=this.options_.playerOptions;const u=this.addChild(o,l);u&&(this[o]=u)};let i;const s=ka.getComponent("Tech");Array.isArray(e)?i=e:i=Object.keys(e),i.concat(Object.keys(this.options_).filter(function(a){return!i.some(function(o){return typeof o=="string"?a===o:a===o.name})})).map(a=>{let o,l;return typeof a=="string"?(o=a,l=e[o]||this.options_[o]||{}):(o=a.name,l=a),{name:o,opts:l}}).filter(a=>{const o=ka.getComponent(a.opts.componentClass||ui(a.name));return o&&!s.isTech(o)}).forEach(n)}}buildCSSClass(){return""}ready(e,t=!1){if(e){if(!this.isReady_){this.readyQueue_=this.readyQueue_||[],this.readyQueue_.push(e);return}t?e.call(this):this.setTimeout(e,1)}}triggerReady(){this.isReady_=!0,this.setTimeout(function(){const e=this.readyQueue_;this.readyQueue_=[],e&&e.length>0&&e.forEach(function(t){t.call(this)},this),this.trigger("ready")},1)}$(e,t){return Rd(e,t||this.contentEl())}$$(e,t){return VN(e,t||this.contentEl())}hasClass(e){return w0(this.el_,e)}addClass(...e){Lh(this.el_,...e)}removeClass(...e){Gb(this.el_,...e)}toggleClass(e,t){FN(this.el_,e,t)}show(){this.removeClass("vjs-hidden")}hide(){this.addClass("vjs-hidden")}lockShowing(){this.addClass("vjs-lock-showing")}unlockShowing(){this.removeClass("vjs-lock-showing")}getAttribute(e){return NN(this.el_,e)}setAttribute(e,t){Dp(this.el_,e,t)}removeAttribute(e){Kb(this.el_,e)}width(e,t){return this.dimension("width",e,t)}height(e,t){return this.dimension("height",e,t)}dimensions(e,t){this.width(e,!0),this.height(t)}dimension(e,t,n){if(t!==void 0){(t===null||t!==t)&&(t=0),(""+t).indexOf("%")!==-1||(""+t).indexOf("px")!==-1?this.el_.style[e]=t:t==="auto"?this.el_.style[e]="":this.el_.style[e]=t+"px",n||this.trigger("componentresize");return}if(!this.el_)return 0;const i=this.el_.style[e],s=i.indexOf("px");return parseInt(s!==-1?i.slice(0,s):this.el_["offset"+ui(e)],10)}currentDimension(e){let t=0;if(e!=="width"&&e!=="height")throw new Error("currentDimension only accepts width or height value");if(t=Pp(this.el_,e),t=parseFloat(t),t===0||isNaN(t)){const n=`offset${ui(e)}`;t=this.el_[n]}return t}currentDimensions(){return{width:this.currentDimension("width"),height:this.currentDimension("height")}}currentWidth(){return this.currentDimension("width")}currentHeight(){return this.currentDimension("height")}getPositions(){const e=this.el_.getBoundingClientRect(),t={x:e.x,y:e.y,width:e.width,height:e.height,top:e.top,right:e.right,bottom:e.bottom,left:e.left},n={x:e.left+e.width/2,y:e.top+e.height/2,width:0,height:0,top:e.top+e.height/2,right:e.left+e.width/2,bottom:e.top+e.height/2,left:e.left+e.width/2};return{boundingClientRect:t,center:n}}focus(){this.el_.focus()}blur(){this.el_.blur()}handleKeyDown(e){this.player_&&(e.key!=="Tab"&&!(this.player_.options_.playerOptions.spatialNavigation&&this.player_.options_.playerOptions.spatialNavigation.enabled)&&e.stopPropagation(),this.player_.handleKeyDown(e))}handleKeyPress(e){this.handleKeyDown(e)}emitTapEvents(){let e=0,t=null;const n=10,i=200;let s;this.on("touchstart",function(o){o.touches.length===1&&(t={pageX:o.touches[0].pageX,pageY:o.touches[0].pageY},e=X.performance.now(),s=!0)}),this.on("touchmove",function(o){if(o.touches.length>1)s=!1;else if(t){const l=o.touches[0].pageX-t.pageX,u=o.touches[0].pageY-t.pageY;Math.sqrt(l*l+u*u)>n&&(s=!1)}});const a=function(){s=!1};this.on("touchleave",a),this.on("touchcancel",a),this.on("touchend",function(o){t=null,s===!0&&X.performance.now()-e<i&&(o.preventDefault(),this.trigger("tap"))})}enableTouchActivity(){if(!this.player()||!this.player().reportUserActivity)return;const e=jn(this.player(),this.player().reportUserActivity);let t;this.on("touchstart",function(){e(),this.clearInterval(t),t=this.setInterval(e,250)});const n=function(i){e(),this.clearInterval(t)};this.on("touchmove",e),this.on("touchend",n),this.on("touchcancel",n)}setTimeout(e,t){var n;return e=jn(this,e),this.clearTimersOnDispose_(),n=X.setTimeout(()=>{this.setTimeoutIds_.has(n)&&this.setTimeoutIds_.delete(n),e()},t),this.setTimeoutIds_.add(n),n}clearTimeout(e){return this.setTimeoutIds_.has(e)&&(this.setTimeoutIds_.delete(e),X.clearTimeout(e)),e}setInterval(e,t){e=jn(this,e),this.clearTimersOnDispose_();const n=X.setInterval(e,t);return this.setIntervalIds_.add(n),n}clearInterval(e){return this.setIntervalIds_.has(e)&&(this.setIntervalIds_.delete(e),X.clearInterval(e)),e}requestAnimationFrame(e){this.clearTimersOnDispose_();var t;return e=jn(this,e),t=X.requestAnimationFrame(()=>{this.rafIds_.has(t)&&this.rafIds_.delete(t),e()}),this.rafIds_.add(t),t}requestNamedAnimationFrame(e,t){this.namedRafs_.has(e)&&this.cancelNamedAnimationFrame(e),this.clearTimersOnDispose_(),t=jn(this,t);const n=this.requestAnimationFrame(()=>{t(),this.namedRafs_.has(e)&&this.namedRafs_.delete(e)});return this.namedRafs_.set(e,n),e}cancelNamedAnimationFrame(e){this.namedRafs_.has(e)&&(this.cancelAnimationFrame(this.namedRafs_.get(e)),this.namedRafs_.delete(e))}cancelAnimationFrame(e){return this.rafIds_.has(e)&&(this.rafIds_.delete(e),X.cancelAnimationFrame(e)),e}clearTimersOnDispose_(){this.clearingTimersOnDispose_||(this.clearingTimersOnDispose_=!0,this.one("dispose",()=>{[["namedRafs_","cancelNamedAnimationFrame"],["rafIds_","cancelAnimationFrame"],["setTimeoutIds_","clearTimeout"],["setIntervalIds_","clearInterval"]].forEach(([e,t])=>{this[e].forEach((n,i)=>this[t](i))}),this.clearingTimersOnDispose_=!1}))}getIsDisabled(){return!!this.el_.disabled}getIsExpresslyInert(){return this.el_.inert&&!this.el_.ownerDocument.documentElement.inert}getIsFocusable(e){return(e||this.el_).tabIndex>=0&&!(this.getIsDisabled()||this.getIsExpresslyInert())}getIsAvailableToBeFocused(e){function t(s){const a=X.getComputedStyle(s,null),o=a.getPropertyValue("visibility");return a.getPropertyValue("display")!=="none"&&!["hidden","collapse"].includes(o)}function n(s){return!(!t(s.parentElement)||!t(s)||s.style.opacity==="0"||X.getComputedStyle(s).height==="0px"||X.getComputedStyle(s).width==="0px")}function i(s){if(s.offsetWidth+s.offsetHeight+s.getBoundingClientRect().height+s.getBoundingClientRect().width===0)return!1;const a={x:s.getBoundingClientRect().left+s.offsetWidth/2,y:s.getBoundingClientRect().top+s.offsetHeight/2};if(a.x<0||a.x>(Fe.documentElement.clientWidth||X.innerWidth)||a.y<0||a.y>(Fe.documentElement.clientHeight||X.innerHeight))return!1;let o=Fe.elementFromPoint(a.x,a.y);for(;o;){if(o===s)return!0;if(o.parentNode)o=o.parentNode;else return!1}}return e||(e=this.el()),!!(i(e)&&n(e)&&(!e.parentElement||e.tabIndex>=0))}static registerComponent(e,t){if(typeof e!="string"||!e)throw new Error(`Illegal component name, "${e}"; must be a non-empty string.`);const n=ka.getComponent("Tech"),i=n&&n.isTech(t),s=ka===t||ka.prototype.isPrototypeOf(t.prototype);if(i||!s){let o;throw i?o="techs must be registered using Tech.registerTech()":o="must be a Component subclass",new Error(`Illegal component, "${e}"; ${o}.`)}e=ui(e),ka.components_||(ka.components_={});const a=ka.getComponent("Player");if(e==="Player"&&a&&a.players){const o=a.players,l=Object.keys(o);if(o&&l.length>0&&l.map(u=>o[u]).every(Boolean))throw new Error("Can not register Player component after player has been created.")}return ka.components_[e]=t,ka.components_[E0(e)]=t,t}static getComponent(e){if(!(!e||!ka.components_))return ka.components_[e]}};mt.registerComponent("Component",mt);function poe(r,e,t){if(typeof e!="number"||e<0||e>t)throw new Error(`Failed to execute '${r}' on 'TimeRanges': The index provided (${e}) is non-numeric or out of bounds (0-${t}).`)}function LO(r,e,t,n){return poe(r,n,t.length-1),t[n][e]}function N1(r){let e;return r===void 0||r.length===0?e={length:0,start(){throw new Error("This TimeRanges object is empty")},end(){throw new Error("This TimeRanges object is empty")}}:e={length:r.length,start:LO.bind(null,"start",0,r),end:LO.bind(null,"end",1,r)},X.Symbol&&X.Symbol.iterator&&(e[X.Symbol.iterator]=()=>(r||[]).values()),e}function Cl(r,e){return Array.isArray(r)?N1(r):r===void 0||e===void 0?N1():N1([[r,e]])}const t5=function(r,e){r=r<0?0:r;let t=Math.floor(r%60),n=Math.floor(r/60%60),i=Math.floor(r/3600);const s=Math.floor(e/60%60),a=Math.floor(e/3600);return(isNaN(r)||r===1/0)&&(i=n=t="-"),i=i>0||a>0?i+":":"",n=((i||s>=10)&&n<10?"0"+n:n)+":",t=t<10?"0"+t:t,i+n+t};let J2=t5;function r5(r){J2=r}function n5(){J2=t5}function Gh(r,e=r){return J2(r,e)}var moe=Object.freeze({__proto__:null,createTimeRanges:Cl,createTimeRange:Cl,setFormatTime:r5,resetFormatTime:n5,formatTime:Gh});function i5(r,e){let t=0,n,i;if(!e)return 0;(!r||!r.length)&&(r=Cl(0,0));for(let s=0;s<r.length;s++)n=r.start(s),i=r.end(s),i>e&&(i=e),t+=i-n;return t/e}function ni(r){if(r instanceof ni)return r;typeof r=="number"?this.code=r:typeof r=="string"?this.message=r:ku(r)&&(typeof r.code=="number"&&(this.code=r.code),Object.assign(this,r)),this.message||(this.message=ni.defaultMessages[this.code]||"")}ni.prototype.code=0;ni.prototype.message="";ni.prototype.status=null;ni.prototype.metadata=null;ni.errorTypes=["MEDIA_ERR_CUSTOM","MEDIA_ERR_ABORTED","MEDIA_ERR_NETWORK","MEDIA_ERR_DECODE","MEDIA_ERR_SRC_NOT_SUPPORTED","MEDIA_ERR_ENCRYPTED"];ni.defaultMessages={1:"You aborted the media playback",2:"A network error caused the media download to fail part-way.",3:"The media playback was aborted due to a corruption problem or because the media used features your browser did not support.",4:"The media could not be loaded, either because the server or network failed or because the format is not supported.",5:"The media is encrypted and we do not have the keys to decrypt it."};ni.MEDIA_ERR_CUSTOM=0;ni.prototype.MEDIA_ERR_CUSTOM=0;ni.MEDIA_ERR_ABORTED=1;ni.prototype.MEDIA_ERR_ABORTED=1;ni.MEDIA_ERR_NETWORK=2;ni.prototype.MEDIA_ERR_NETWORK=2;ni.MEDIA_ERR_DECODE=3;ni.prototype.MEDIA_ERR_DECODE=3;ni.MEDIA_ERR_SRC_NOT_SUPPORTED=4;ni.prototype.MEDIA_ERR_SRC_NOT_SUPPORTED=4;ni.MEDIA_ERR_ENCRYPTED=5;ni.prototype.MEDIA_ERR_ENCRYPTED=5;function k0(r){return r!=null&&typeof r.then=="function"}function lu(r){k0(r)&&r.then(null,e=>{})}const Rw=function(r){return["kind","label","language","id","inBandMetadataTrackDispatchType","mode","src"].reduce((t,n,i)=>(r[n]&&(t[n]=r[n]),t),{cues:r.cues&&Array.prototype.map.call(r.cues,function(t){return{startTime:t.startTime,endTime:t.endTime,text:t.text,id:t.id}})})},goe=function(r){const e=r.$$("track"),t=Array.prototype.map.call(e,i=>i.track);return Array.prototype.map.call(e,function(i){const s=Rw(i.track);return i.src&&(s.src=i.src),s}).concat(Array.prototype.filter.call(r.textTracks(),function(i){return t.indexOf(i)===-1}).map(Rw))},voe=function(r,e){return r.forEach(function(t){const n=e.addRemoteTextTrack(t).track;!t.src&&t.cues&&t.cues.forEach(i=>n.addCue(i))}),e.textTracks()};var OO={textTracksToJson:goe,jsonToTextTracks:voe,trackToJson_:Rw};const U1="vjs-modal-dialog";let em=class extends mt{constructor(e,t){super(e,t),this.handleKeyDown_=n=>this.handleKeyDown(n),this.close_=n=>this.close(n),this.opened_=this.hasBeenOpened_=this.hasBeenFilled_=!1,this.closeable(!this.options_.uncloseable),this.content(this.options_.content),this.contentEl_=Er("div",{className:`${U1}-content`},{role:"document"}),this.descEl_=Er("p",{className:`${U1}-description vjs-control-text`,id:this.el().getAttribute("aria-describedby")}),Ud(this.descEl_,this.description()),this.el_.appendChild(this.descEl_),this.el_.appendChild(this.contentEl_)}createEl(){return super.createEl("div",{className:this.buildCSSClass(),tabIndex:-1},{"aria-describedby":`${this.id()}_description`,"aria-hidden":"true","aria-label":this.label(),role:"dialog","aria-live":"polite"})}dispose(){this.contentEl_=null,this.descEl_=null,this.previouslyActiveEl_=null,super.dispose()}buildCSSClass(){return`${U1} vjs-hidden ${super.buildCSSClass()}`}label(){return this.localize(this.options_.label||"Modal Window")}description(){let e=this.options_.description||this.localize("This is a modal window.");return this.closeable()&&(e+=" "+this.localize("This modal can be closed by pressing the Escape key or activating the close button.")),e}open(){if(this.opened_){this.options_.fillAlways&&this.fill();return}const e=this.player();this.trigger("beforemodalopen"),this.opened_=!0,(this.options_.fillAlways||!this.hasBeenOpened_&&!this.hasBeenFilled_)&&this.fill(),this.wasPlaying_=!e.paused(),this.options_.pauseOnOpen&&this.wasPlaying_&&e.pause(),this.on("keydown",this.handleKeyDown_),this.hadControls_=e.controls(),e.controls(!1),this.show(),this.conditionalFocus_(),this.el().setAttribute("aria-hidden","false"),this.trigger("modalopen"),this.hasBeenOpened_=!0}opened(e){return typeof e=="boolean"&&this[e?"open":"close"](),this.opened_}close(){if(!this.opened_)return;const e=this.player();this.trigger("beforemodalclose"),this.opened_=!1,this.wasPlaying_&&this.options_.pauseOnOpen&&e.play(),this.off("keydown",this.handleKeyDown_),this.hadControls_&&e.controls(!0),this.hide(),this.el().setAttribute("aria-hidden","true"),this.trigger({type:"modalclose",bubbles:!0}),this.conditionalBlur_(),this.options_.temporary&&this.dispose()}closeable(e){if(typeof e=="boolean"){const t=this.closeable_=!!e;let n=this.getChild("closeButton");if(t&&!n){const i=this.contentEl_;this.contentEl_=this.el_,n=this.addChild("closeButton",{controlText:"Close Modal Dialog"}),this.contentEl_=i,this.on(n,"close",this.close_)}!t&&n&&(this.off(n,"close",this.close_),this.removeChild(n),n.dispose())}return this.closeable_}fill(){this.fillWith(this.content())}fillWith(e){const t=this.contentEl(),n=t.parentNode,i=t.nextSibling;this.trigger("beforemodalfill"),this.hasBeenFilled_=!0,n.removeChild(t),this.empty(),HN(t,e),this.trigger("modalfill"),i?n.insertBefore(t,i):n.appendChild(t);const s=this.getChild("closeButton");s&&n.appendChild(s.el_),this.trigger("aftermodalfill")}empty(){this.trigger("beforemodalempty"),Yb(this.contentEl()),this.trigger("modalempty")}content(e){return typeof e<"u"&&(this.content_=e),this.content_}conditionalFocus_(){const e=Fe.activeElement,t=this.player_.el_;this.previouslyActiveEl_=null,(t.contains(e)||t===e)&&(this.previouslyActiveEl_=e,this.focus())}conditionalBlur_(){this.previouslyActiveEl_&&(this.previouslyActiveEl_.focus(),this.previouslyActiveEl_=null)}handleKeyDown(e){if(this.trigger({type:"modalKeydown",originalEvent:e,target:this,bubbles:!0}),e.stopPropagation(),e.key==="Escape"&&this.closeable()){e.preventDefault(),this.close();return}if(e.key!=="Tab")return;const t=this.focusableEls_(),n=this.el_.querySelector(":focus");let i;for(let s=0;s<t.length;s++)if(n===t[s]){i=s;break}Fe.activeElement===this.el_&&(i=0),e.shiftKey&&i===0?(t[t.length-1].focus(),e.preventDefault()):!e.shiftKey&&i===t.length-1&&(t[0].focus(),e.preventDefault())}focusableEls_(){const e=this.el_.querySelectorAll("*");return Array.prototype.filter.call(e,t=>(t instanceof X.HTMLAnchorElement||t instanceof X.HTMLAreaElement)&&t.hasAttribute("href")||(t instanceof X.HTMLInputElement||t instanceof X.HTMLSelectElement||t instanceof X.HTMLTextAreaElement||t instanceof X.HTMLButtonElement)&&!t.hasAttribute("disabled")||t instanceof X.HTMLIFrameElement||t instanceof X.HTMLObjectElement||t instanceof X.HTMLEmbedElement||t.hasAttribute("tabindex")&&t.getAttribute("tabindex")!==-1||t.hasAttribute("contenteditable"))}};em.prototype.options_={pauseOnOpen:!0,temporary:!0};mt.registerComponent("ModalDialog",em);let Rp=class extends mo{constructor(e=[]){super(),this.tracks_=[],Object.defineProperty(this,"length",{get(){return this.tracks_.length}});for(let t=0;t<e.length;t++)this.addTrack(e[t])}addTrack(e){const t=this.tracks_.length;""+t in this||Object.defineProperty(this,t,{get(){return this.tracks_[t]}}),this.tracks_.indexOf(e)===-1&&(this.tracks_.push(e),this.trigger({track:e,type:"addtrack",target:this})),e.labelchange_=()=>{this.trigger({track:e,type:"labelchange",target:this})},yc(e)&&e.addEventListener("labelchange",e.labelchange_)}removeTrack(e){let t;for(let n=0,i=this.length;n<i;n++)if(this[n]===e){t=this[n],t.off&&t.off(),this.tracks_.splice(n,1);break}t&&this.trigger({track:t,type:"removetrack",target:this})}getTrackById(e){let t=null;for(let n=0,i=this.length;n<i;n++){const s=this[n];if(s.id===e){t=s;break}}return t}};Rp.prototype.allowedEvents_={change:"change",addtrack:"addtrack",removetrack:"removetrack",labelchange:"labelchange"};for(const r in Rp.prototype.allowedEvents_)Rp.prototype["on"+r]=null;const $1=function(r,e){for(let t=0;t<r.length;t++)!Object.keys(r[t]).length||e.id===r[t].id||(r[t].enabled=!1)};let yoe=class extends Rp{constructor(e=[]){for(let t=e.length-1;t>=0;t--)if(e[t].enabled){$1(e,e[t]);break}super(e),this.changing_=!1}addTrack(e){e.enabled&&$1(this,e),super.addTrack(e),e.addEventListener&&(e.enabledChange_=()=>{this.changing_||(this.changing_=!0,$1(this,e),this.changing_=!1,this.trigger("change"))},e.addEventListener("enabledchange",e.enabledChange_))}removeTrack(e){super.removeTrack(e),e.removeEventListener&&e.enabledChange_&&(e.removeEventListener("enabledchange",e.enabledChange_),e.enabledChange_=null)}};const j1=function(r,e){for(let t=0;t<r.length;t++)!Object.keys(r[t]).length||e.id===r[t].id||(r[t].selected=!1)};let _oe=class extends Rp{constructor(e=[]){for(let t=e.length-1;t>=0;t--)if(e[t].selected){j1(e,e[t]);break}super(e),this.changing_=!1,Object.defineProperty(this,"selectedIndex",{get(){for(let t=0;t<this.length;t++)if(this[t].selected)return t;return-1},set(){}})}addTrack(e){e.selected&&j1(this,e),super.addTrack(e),e.addEventListener&&(e.selectedChange_=()=>{this.changing_||(this.changing_=!0,j1(this,e),this.changing_=!1,this.trigger("change"))},e.addEventListener("selectedchange",e.selectedChange_))}removeTrack(e){super.removeTrack(e),e.removeEventListener&&e.selectedChange_&&(e.removeEventListener("selectedchange",e.selectedChange_),e.selectedChange_=null)}},s5=class extends Rp{addTrack(e){super.addTrack(e),this.queueChange_||(this.queueChange_=()=>this.queueTrigger("change")),this.triggerSelectedlanguagechange||(this.triggerSelectedlanguagechange_=()=>this.trigger("selectedlanguagechange")),e.addEventListener("modechange",this.queueChange_),["metadata","chapters"].indexOf(e.kind)===-1&&e.addEventListener("modechange",this.triggerSelectedlanguagechange_)}removeTrack(e){super.removeTrack(e),e.removeEventListener&&(this.queueChange_&&e.removeEventListener("modechange",this.queueChange_),this.selectedlanguagechange_&&e.removeEventListener("modechange",this.triggerSelectedlanguagechange_))}},xoe=class{constructor(e=[]){this.trackElements_=[],Object.defineProperty(this,"length",{get(){return this.trackElements_.length}});for(let t=0,n=e.length;t<n;t++)this.addTrackElement_(e[t])}addTrackElement_(e){const t=this.trackElements_.length;""+t in this||Object.defineProperty(this,t,{get(){return this.trackElements_[t]}}),this.trackElements_.indexOf(e)===-1&&this.trackElements_.push(e)}getTrackElementByTrack_(e){let t;for(let n=0,i=this.trackElements_.length;n<i;n++)if(e===this.trackElements_[n].track){t=this.trackElements_[n];break}return t}removeTrackElement_(e){for(let t=0,n=this.trackElements_.length;t<n;t++)if(e===this.trackElements_[t]){this.trackElements_[t].track&&typeof this.trackElements_[t].track.off=="function"&&this.trackElements_[t].track.off(),typeof this.trackElements_[t].off=="function"&&this.trackElements_[t].off(),this.trackElements_.splice(t,1);break}}},MO=class a5{constructor(e){a5.prototype.setCues_.call(this,e),Object.defineProperty(this,"length",{get(){return this.length_}})}setCues_(e){const t=this.length||0;let n=0;const i=e.length;this.cues_=e,this.length_=e.length;const s=function(a){""+a in this||Object.defineProperty(this,""+a,{get(){return this.cues_[a]}})};if(t<i)for(n=t;n<i;n++)s.call(this,n)}getCueById(e){let t=null;for(let n=0,i=this.length;n<i;n++){const s=this[n];if(s.id===e){t=s;break}}return t}};const boe={alternative:"alternative",captions:"captions",main:"main",sign:"sign",subtitles:"subtitles",commentary:"commentary"},Soe={alternative:"alternative",descriptions:"descriptions",main:"main","main-desc":"main-desc",translation:"translation",commentary:"commentary"},Toe={subtitles:"subtitles",captions:"captions",descriptions:"descriptions",chapters:"chapters",metadata:"metadata"},FO={disabled:"disabled",hidden:"hidden",showing:"showing"};let Z2=class extends mo{constructor(e={}){super();const t={id:e.id||"vjs_track_"+Xo(),kind:e.kind||"",language:e.language||""};let n=e.label||"";for(const i in t)Object.defineProperty(this,i,{get(){return t[i]},set(){}});Object.defineProperty(this,"label",{get(){return n},set(i){i!==n&&(n=i,this.trigger("labelchange"))}})}};const ek=function(r){return new URL(r,Fe.baseURI)},o5=function(r){return new URL(r,Fe.baseURI).href},tk=function(r){if(typeof r=="string"){const t=/^(\/?)([\s\S]*?)((?:\.{1,2}|[^\/]+?)(\.([^\.\/\?]+)))(?:[\/]*|[\?].*)$/.exec(r);if(t)return t.pop().toLowerCase()}return""},eS=function(r,e=X.location){return ek(r).origin!==e.origin};var Coe=Object.freeze({__proto__:null,parseUrl:ek,getAbsoluteURL:o5,getFileExtension:tk,isCrossOrigin:eS});const BO=function(r,e){const t=new X.WebVTT.Parser(X,X.vttjs,X.WebVTT.StringDecoder()),n=[];t.oncue=function(i){e.addCue(i)},t.onparsingerror=function(i){n.push(i)},t.onflush=function(){e.trigger({type:"loadeddata",target:e})},t.parse(r),n.length>0&&(X.console&&X.console.groupCollapsed&&X.console.groupCollapsed(`Text Track parsing errors for ${e.src}`),n.forEach(i=>Kr.error(i)),X.console&&X.console.groupEnd&&X.console.groupEnd()),t.flush()},NO=function(r,e){const t={uri:r},n=eS(r);n&&(t.cors=n);const i=e.tech_.crossOrigin()==="use-credentials";i&&(t.withCredentials=i),sN(t,jn(this,function(s,a,o){if(s)return Kr.error(s,a);e.loaded_=!0,typeof X.WebVTT!="function"?e.tech_&&e.tech_.any(["vttjsloaded","vttjserror"],l=>{if(l.type==="vttjserror"){Kr.error(`vttjs failed to load, stopping trying to process ${e.src}`);return}return BO(o,e)}):BO(o,e)}))};let Og=class extends Z2{constructor(e={}){if(!e.tech)throw new Error("A tech was not provided.");const t=Bn(e,{kind:Toe[e.kind]||"subtitles",language:e.language||e.srclang||""});let n=FO[t.mode]||"disabled";const i=t.default;(t.kind==="metadata"||t.kind==="chapters")&&(n="hidden"),super(t),this.tech_=t.tech,this.cues_=[],this.activeCues_=[],this.preload_=this.tech_.preloadTextTracks!==!1;const s=new MO(this.cues_),a=new MO(this.activeCues_);let o=!1;this.timeupdateHandler=jn(this,function(u={}){if(!this.tech_.isDisposed()){if(!this.tech_.isReady_){u.type!=="timeupdate"&&(this.rvf_=this.tech_.requestVideoFrameCallback(this.timeupdateHandler));return}this.activeCues=this.activeCues,o&&(this.trigger("cuechange"),o=!1),u.type!=="timeupdate"&&(this.rvf_=this.tech_.requestVideoFrameCallback(this.timeupdateHandler))}});const l=()=>{this.stopTracking()};this.tech_.one("dispose",l),n!=="disabled"&&this.startTracking(),Object.defineProperties(this,{default:{get(){return i},set(){}},mode:{get(){return n},set(u){FO[u]&&n!==u&&(n=u,!this.preload_&&n!=="disabled"&&this.cues.length===0&&NO(this.src,this),this.stopTracking(),n!=="disabled"&&this.startTracking(),this.trigger("modechange"))}},cues:{get(){return this.loaded_?s:null},set(){}},activeCues:{get(){if(!this.loaded_)return null;if(this.cues.length===0)return a;const u=this.tech_.currentTime(),c=[];for(let h=0,m=this.cues.length;h<m;h++){const g=this.cues[h];g.startTime<=u&&g.endTime>=u&&c.push(g)}if(o=!1,c.length!==this.activeCues_.length)o=!0;else for(let h=0;h<c.length;h++)this.activeCues_.indexOf(c[h])===-1&&(o=!0);return this.activeCues_=c,a.setCues_(this.activeCues_),a},set(){}}}),t.src?(this.src=t.src,this.preload_||(this.loaded_=!0),(this.preload_||t.kind!=="subtitles"&&t.kind!=="captions")&&NO(this.src,this)):this.loaded_=!0}startTracking(){this.rvf_=this.tech_.requestVideoFrameCallback(this.timeupdateHandler),this.tech_.on("timeupdate",this.timeupdateHandler)}stopTracking(){this.rvf_&&(this.tech_.cancelVideoFrameCallback(this.rvf_),this.rvf_=void 0),this.tech_.off("timeupdate",this.timeupdateHandler)}addCue(e){let t=e;if(!("getCueAsHTML"in t)){t=new X.vttjs.VTTCue(e.startTime,e.endTime,e.text);for(const i in e)i in t||(t[i]=e[i]);t.id=e.id,t.originalCue_=e}const n=this.tech_.textTracks();for(let i=0;i<n.length;i++)n[i]!==this&&n[i].removeCue(t);this.cues_.push(t),this.cues.setCues_(this.cues_)}removeCue(e){let t=this.cues_.length;for(;t--;){const n=this.cues_[t];if(n===e||n.originalCue_&&n.originalCue_===e){this.cues_.splice(t,1),this.cues.setCues_(this.cues_);break}}}};Og.prototype.allowedEvents_={cuechange:"cuechange"};let l5=class extends Z2{constructor(e={}){const t=Bn(e,{kind:Soe[e.kind]||""});super(t);let n=!1;Object.defineProperty(this,"enabled",{get(){return n},set(i){typeof i!="boolean"||i===n||(n=i,this.trigger("enabledchange"))}}),t.enabled&&(this.enabled=t.enabled),this.loaded_=!0}},u5=class extends Z2{constructor(e={}){const t=Bn(e,{kind:boe[e.kind]||""});super(t);let n=!1;Object.defineProperty(this,"selected",{get(){return n},set(i){typeof i!="boolean"||i===n||(n=i,this.trigger("selectedchange"))}}),t.selected&&(this.selected=t.selected)}},tm=class Lw extends mo{constructor(e={}){super();let t;const n=new Og(e);this.kind=n.kind,this.src=n.src,this.srclang=n.language,this.label=n.label,this.default=n.default,Object.defineProperties(this,{readyState:{get(){return t}},track:{get(){return n}}}),t=Lw.NONE,n.addEventListener("loadeddata",()=>{t=Lw.LOADED,this.trigger({type:"load",target:this})})}};tm.prototype.allowedEvents_={load:"load"};tm.NONE=0;tm.LOADING=1;tm.LOADED=2;tm.ERROR=3;const Wo={audio:{ListClass:yoe,TrackClass:l5,capitalName:"Audio"},video:{ListClass:_oe,TrackClass:u5,capitalName:"Video"},text:{ListClass:s5,TrackClass:Og,capitalName:"Text"}};Object.keys(Wo).forEach(function(r){Wo[r].getterName=`${r}Tracks`,Wo[r].privateName=`${r}Tracks_`});const Lp={remoteText:{ListClass:s5,TrackClass:Og,capitalName:"RemoteText",getterName:"remoteTextTracks",privateName:"remoteTextTracks_"},remoteTextEl:{ListClass:xoe,TrackClass:tm,capitalName:"RemoteTextTrackEls",getterName:"remoteTextTrackEls",privateName:"remoteTextTrackEls_"}},Zs=Object.assign({},Wo,Lp);Lp.names=Object.keys(Lp);Wo.names=Object.keys(Wo);Zs.names=[].concat(Lp.names).concat(Wo.names);function woe(r,e,t,n,i={}){const s=r.textTracks();i.kind=e,t&&(i.label=t),n&&(i.language=n),i.tech=r;const a=new Zs.text.TrackClass(i);return s.addTrack(a),a}let Nn=class Fs extends mt{constructor(e={},t=function(){}){e.reportTouchActivity=!1,super(null,e,t),this.onDurationChange_=n=>this.onDurationChange(n),this.trackProgress_=n=>this.trackProgress(n),this.trackCurrentTime_=n=>this.trackCurrentTime(n),this.stopTrackingCurrentTime_=n=>this.stopTrackingCurrentTime(n),this.disposeSourceHandler_=n=>this.disposeSourceHandler(n),this.queuedHanders_=new Set,this.hasStarted_=!1,this.on("playing",function(){this.hasStarted_=!0}),this.on("loadstart",function(){this.hasStarted_=!1}),Zs.names.forEach(n=>{const i=Zs[n];e&&e[i.getterName]&&(this[i.privateName]=e[i.getterName])}),this.featuresProgressEvents||this.manualProgressOn(),this.featuresTimeupdateEvents||this.manualTimeUpdatesOn(),["Text","Audio","Video"].forEach(n=>{e[`native${n}Tracks`]===!1&&(this[`featuresNative${n}Tracks`]=!1)}),e.nativeCaptions===!1||e.nativeTextTracks===!1?this.featuresNativeTextTracks=!1:(e.nativeCaptions===!0||e.nativeTextTracks===!0)&&(this.featuresNativeTextTracks=!0),this.featuresNativeTextTracks||this.emulateTextTracks(),this.preloadTextTracks=e.preloadTextTracks!==!1,this.autoRemoteTextTracks_=new Zs.text.ListClass,this.initTrackListeners(),e.nativeControlsForTouch||this.emitTapEvents(),this.constructor&&(this.name_=this.constructor.name||"Unknown Tech")}triggerSourceset(e){this.isReady_||this.one("ready",()=>this.setTimeout(()=>this.triggerSourceset(e),1)),this.trigger({src:e,type:"sourceset"})}manualProgressOn(){this.on("durationchange",this.onDurationChange_),this.manualProgress=!0,this.one("ready",this.trackProgress_)}manualProgressOff(){this.manualProgress=!1,this.stopTrackingProgress(),this.off("durationchange",this.onDurationChange_)}trackProgress(e){this.stopTrackingProgress(),this.progressInterval=this.setInterval(jn(this,function(){const t=this.bufferedPercent();this.bufferedPercent_!==t&&this.trigger("progress"),this.bufferedPercent_=t,t===1&&this.stopTrackingProgress()}),500)}onDurationChange(e){this.duration_=this.duration()}buffered(){return Cl(0,0)}bufferedPercent(){return i5(this.buffered(),this.duration_)}stopTrackingProgress(){this.clearInterval(this.progressInterval)}manualTimeUpdatesOn(){this.manualTimeUpdates=!0,this.on("play",this.trackCurrentTime_),this.on("pause",this.stopTrackingCurrentTime_)}manualTimeUpdatesOff(){this.manualTimeUpdates=!1,this.stopTrackingCurrentTime(),this.off("play",this.trackCurrentTime_),this.off("pause",this.stopTrackingCurrentTime_)}trackCurrentTime(){this.currentTimeInterval&&this.stopTrackingCurrentTime(),this.currentTimeInterval=this.setInterval(function(){this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},250)}stopTrackingCurrentTime(){this.clearInterval(this.currentTimeInterval),this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})}dispose(){this.clearTracks(Wo.names),this.manualProgress&&this.manualProgressOff(),this.manualTimeUpdates&&this.manualTimeUpdatesOff(),super.dispose()}clearTracks(e){e=[].concat(e),e.forEach(t=>{const n=this[`${t}Tracks`]()||[];let i=n.length;for(;i--;){const s=n[i];t==="text"&&this.removeRemoteTextTrack(s),n.removeTrack(s)}})}cleanupAutoTextTracks(){const e=this.autoRemoteTextTracks_||[];let t=e.length;for(;t--;){const n=e[t];this.removeRemoteTextTrack(n)}}reset(){}crossOrigin(){}setCrossOrigin(){}error(e){return e!==void 0&&(this.error_=new ni(e),this.trigger("error")),this.error_}played(){return this.hasStarted_?Cl(0,0):Cl()}play(){}setScrubbing(e){}scrubbing(){}setCurrentTime(e){this.manualTimeUpdates&&this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})}initTrackListeners(){Wo.names.forEach(e=>{const t=Wo[e],n=()=>{this.trigger(`${e}trackchange`)},i=this[t.getterName]();i.addEventListener("removetrack",n),i.addEventListener("addtrack",n),this.on("dispose",()=>{i.removeEventListener("removetrack",n),i.removeEventListener("addtrack",n)})})}addWebVttScript_(){if(!X.WebVTT)if(Fe.body.contains(this.el())){if(!this.options_["vtt.js"]&&Ap(ex)&&Object.keys(ex).length>0){this.trigger("vttjsloaded");return}const e=Fe.createElement("script");e.src=this.options_["vtt.js"]||"https://vjs.zencdn.net/vttjs/0.14.1/vtt.min.js",e.onload=()=>{this.trigger("vttjsloaded")},e.onerror=()=>{this.trigger("vttjserror")},this.on("dispose",()=>{e.onload=null,e.onerror=null}),X.WebVTT=!0,this.el().parentNode.appendChild(e)}else this.ready(this.addWebVttScript_)}emulateTextTracks(){const e=this.textTracks(),t=this.remoteTextTracks(),n=o=>e.addTrack(o.track),i=o=>e.removeTrack(o.track);t.on("addtrack",n),t.on("removetrack",i),this.addWebVttScript_();const s=()=>this.trigger("texttrackchange"),a=()=>{s();for(let o=0;o<e.length;o++){const l=e[o];l.removeEventListener("cuechange",s),l.mode==="showing"&&l.addEventListener("cuechange",s)}};a(),e.addEventListener("change",a),e.addEventListener("addtrack",a),e.addEventListener("removetrack",a),this.on("dispose",function(){t.off("addtrack",n),t.off("removetrack",i),e.removeEventListener("change",a),e.removeEventListener("addtrack",a),e.removeEventListener("removetrack",a);for(let o=0;o<e.length;o++)e[o].removeEventListener("cuechange",s)})}addTextTrack(e,t,n){if(!e)throw new Error("TextTrack kind is required but was not provided");return woe(this,e,t,n)}createRemoteTextTrack(e){const t=Bn(e,{tech:this});return new Lp.remoteTextEl.TrackClass(t)}addRemoteTextTrack(e={},t){const n=this.createRemoteTextTrack(e);return typeof t!="boolean"&&(t=!1),this.remoteTextTrackEls().addTrackElement_(n),this.remoteTextTracks().addTrack(n.track),t===!1&&this.ready(()=>this.autoRemoteTextTracks_.addTrack(n.track)),n}removeRemoteTextTrack(e){const t=this.remoteTextTrackEls().getTrackElementByTrack_(e);this.remoteTextTrackEls().removeTrackElement_(t),this.remoteTextTracks().removeTrack(e),this.autoRemoteTextTracks_.removeTrack(e)}getVideoPlaybackQuality(){return{}}requestPictureInPicture(){return Promise.reject()}disablePictureInPicture(){return!0}setDisablePictureInPicture(){}requestVideoFrameCallback(e){const t=Xo();return!this.isReady_||this.paused()?(this.queuedHanders_.add(t),this.one("playing",()=>{this.queuedHanders_.has(t)&&(this.queuedHanders_.delete(t),e())})):this.requestNamedAnimationFrame(t,e),t}cancelVideoFrameCallback(e){this.queuedHanders_.has(e)?this.queuedHanders_.delete(e):this.cancelNamedAnimationFrame(e)}setPoster(){}playsinline(){}setPlaysinline(){}overrideNativeAudioTracks(e){}overrideNativeVideoTracks(e){}canPlayType(e){return""}static canPlayType(e){return""}static canPlaySource(e,t){return Fs.canPlayType(e.type)}static isTech(e){return e.prototype instanceof Fs||e instanceof Fs||e===Fs}static registerTech(e,t){if(Fs.techs_||(Fs.techs_={}),!Fs.isTech(t))throw new Error(`Tech ${e} must be a Tech`);if(!Fs.canPlayType)throw new Error("Techs must have a static canPlayType method on them");if(!Fs.canPlaySource)throw new Error("Techs must have a static canPlaySource method on them");return e=ui(e),Fs.techs_[e]=t,Fs.techs_[E0(e)]=t,e!=="Tech"&&Fs.defaultTechOrder_.push(e),t}static getTech(e){if(e){if(Fs.techs_&&Fs.techs_[e])return Fs.techs_[e];if(e=ui(e),X&&X.videojs&&X.videojs[e])return Kr.warn(`The ${e} tech was added to the videojs object when it should be registered using videojs.registerTech(name, tech)`),X.videojs[e]}}};Zs.names.forEach(function(r){const e=Zs[r];Nn.prototype[e.getterName]=function(){return this[e.privateName]=this[e.privateName]||new e.ListClass,this[e.privateName]}});Nn.prototype.featuresVolumeControl=!0;Nn.prototype.featuresMuteControl=!0;Nn.prototype.featuresFullscreenResize=!1;Nn.prototype.featuresPlaybackRate=!1;Nn.prototype.featuresProgressEvents=!1;Nn.prototype.featuresSourceset=!1;Nn.prototype.featuresTimeupdateEvents=!1;Nn.prototype.featuresNativeTextTracks=!1;Nn.prototype.featuresVideoFrameCallback=!1;Nn.withSourceHandlers=function(r){r.registerSourceHandler=function(t,n){let i=r.sourceHandlers;i||(i=r.sourceHandlers=[]),n===void 0&&(n=i.length),i.splice(n,0,t)},r.canPlayType=function(t){const n=r.sourceHandlers||[];let i;for(let s=0;s<n.length;s++)if(i=n[s].canPlayType(t),i)return i;return""},r.selectSourceHandler=function(t,n){const i=r.sourceHandlers||[];let s;for(let a=0;a<i.length;a++)if(s=i[a].canHandleSource(t,n),s)return i[a];return null},r.canPlaySource=function(t,n){const i=r.selectSourceHandler(t,n);return i?i.canHandleSource(t,n):""},["seekable","seeking","duration"].forEach(function(t){const n=this[t];typeof n=="function"&&(this[t]=function(){return this.sourceHandler_&&this.sourceHandler_[t]?this.sourceHandler_[t].apply(this.sourceHandler_,arguments):n.apply(this,arguments)})},r.prototype),r.prototype.setSource=function(t){let n=r.selectSourceHandler(t,this.options_);n||(r.nativeSourceHandler?n=r.nativeSourceHandler:Kr.error("No source handler found for the current source.")),this.disposeSourceHandler(),this.off("dispose",this.disposeSourceHandler_),n!==r.nativeSourceHandler&&(this.currentSource_=t),this.sourceHandler_=n.handleSource(t,this,this.options_),this.one("dispose",this.disposeSourceHandler_)},r.prototype.disposeSourceHandler=function(){this.currentSource_&&(this.clearTracks(["audio","video"]),this.currentSource_=null),this.cleanupAutoTextTracks(),this.sourceHandler_&&(this.sourceHandler_.dispose&&this.sourceHandler_.dispose(),this.sourceHandler_=null)}};mt.registerComponent("Tech",Nn);Nn.registerTech("Tech",Nn);Nn.defaultTechOrder_=[];const Oh={},cx={},dx={};function Eoe(r,e){Oh[r]=Oh[r]||[],Oh[r].push(e)}function koe(r,e,t){r.setTimeout(()=>gh(e,Oh[e.type],t,r),1)}function Aoe(r,e){r.forEach(t=>t.setTech&&t.setTech(e))}function Doe(r,e,t){return r.reduceRight(rk(t),e[t]())}function Ioe(r,e,t,n){return e[t](r.reduce(rk(t),n))}function UO(r,e,t,n=null){const i="call"+ui(t),s=r.reduce(rk(i),n),a=s===dx,o=a?null:e[t](s);return Loe(r,t,o,a),o}const Poe={buffered:1,currentTime:1,duration:1,muted:1,played:1,paused:1,seekable:1,volume:1,ended:1},Roe={setCurrentTime:1,setMuted:1,setVolume:1},$O={play:1,pause:1};function rk(r){return(e,t)=>e===dx?dx:t[r]?t[r](e):e}function Loe(r,e,t,n){for(let i=r.length-1;i>=0;i--){const s=r[i];s[e]&&s[e](n,t)}}function Ooe(r){cx.hasOwnProperty(r.id())&&delete cx[r.id()]}function Moe(r,e){const t=cx[r.id()];let n=null;if(t==null)return n=e(r),cx[r.id()]=[[e,n]],n;for(let i=0;i<t.length;i++){const[s,a]=t[i];s===e&&(n=a)}return n===null&&(n=e(r),t.push([e,n])),n}function gh(r={},e=[],t,n,i=[],s=!1){const[a,...o]=e;if(typeof a=="string")gh(r,Oh[a],t,n,i,s);else if(a){const l=Moe(n,a);if(!l.setSource)return i.push(l),gh(r,o,t,n,i,s);l.setSource(Object.assign({},r),function(u,c){if(u)return gh(r,o,t,n,i,s);i.push(l),gh(c,r.type===c.type?o:Oh[c.type],t,n,i,s)})}else o.length?gh(r,o,t,n,i,s):s?t(r,i):gh(r,Oh["*"],t,n,i,!0)}const Foe={opus:"video/ogg",ogv:"video/ogg",mp4:"video/mp4",mov:"video/mp4",m4v:"video/mp4",mkv:"video/x-matroska",m4a:"audio/mp4",mp3:"audio/mpeg",aac:"audio/aac",caf:"audio/x-caf",flac:"audio/flac",oga:"audio/ogg",wav:"audio/wav",m3u8:"application/x-mpegURL",mpd:"application/dash+xml",jpg:"image/jpeg",jpeg:"image/jpeg",gif:"image/gif",png:"image/png",svg:"image/svg+xml",webp:"image/webp"},hx=function(r=""){const e=tk(r);return Foe[e.toLowerCase()]||""},Boe=(r,e)=>{if(!e)return"";if(r.cache_.source.src===e&&r.cache_.source.type)return r.cache_.source.type;const t=r.cache_.sources.filter(i=>i.src===e);if(t.length)return t[0].type;const n=r.$$("source");for(let i=0;i<n.length;i++){const s=n[i];if(s.type&&s.src&&s.src===e)return s.type}return hx(e)},c5=function(r){if(Array.isArray(r)){let e=[];r.forEach(function(t){t=c5(t),Array.isArray(t)?e=e.concat(t):ku(t)&&e.push(t)}),r=e}else typeof r=="string"&&r.trim()?r=[jO({src:r})]:ku(r)&&typeof r.src=="string"&&r.src&&r.src.trim()?r=[jO(r)]:r=[];return r};function jO(r){if(!r.type){const e=hx(r.src);e&&(r.type=e)}return r}var Noe=`<svg xmlns="http://www.w3.org/2000/svg">
  <defs>
    <symbol viewBox="0 0 48 48" id="vjs-icon-play">
      <path d="M16 10v28l22-14z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-pause">
      <path d="M12 38h8V10h-8v28zm16-28v28h8V10h-8z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-audio">
      <path d="M24 2C14.06 2 6 10.06 6 20v14c0 3.31 2.69 6 6 6h6V24h-8v-4c0-7.73 6.27-14 14-14s14 6.27 14 14v4h-8v16h6c3.31 0 6-2.69 6-6V20c0-9.94-8.06-18-18-18z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-captions">
      <path d="M38 8H10c-2.21 0-4 1.79-4 4v24c0 2.21 1.79 4 4 4h28c2.21 0 4-1.79 4-4V12c0-2.21-1.79-4-4-4zM22 22h-3v-1h-4v6h4v-1h3v2a2 2 0 0 1-2 2h-6a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v2zm14 0h-3v-1h-4v6h4v-1h3v2a2 2 0 0 1-2 2h-6a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v2z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-subtitles">
      <path d="M40 8H8c-2.21 0-4 1.79-4 4v24c0 2.21 1.79 4 4 4h32c2.21 0 4-1.79 4-4V12c0-2.21-1.79-4-4-4zM8 24h8v4H8v-4zm20 12H8v-4h20v4zm12 0h-8v-4h8v4zm0-8H20v-4h20v4z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-fullscreen-enter">
      <path d="M14 28h-4v10h10v-4h-6v-6zm-4-8h4v-6h6v-4H10v10zm24 14h-6v4h10V28h-4v6zm-6-24v4h6v6h4V10H28z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-fullscreen-exit">
      <path d="M10 32h6v6h4V28H10v4zm6-16h-6v4h10V10h-4v6zm12 22h4v-6h6v-4H28v10zm4-22v-6h-4v10h10v-4h-6z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-play-circle">
      <path d="M20 33l12-9-12-9v18zm4-29C12.95 4 4 12.95 4 24s8.95 20 20 20 20-8.95 20-20S35.05 4 24 4zm0 36c-8.82 0-16-7.18-16-16S15.18 8 24 8s16 7.18 16 16-7.18 16-16 16z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-volume-mute">
      <path d="M33 24c0-3.53-2.04-6.58-5-8.05v4.42l4.91 4.91c.06-.42.09-.85.09-1.28zm5 0c0 1.88-.41 3.65-1.08 5.28l3.03 3.03C41.25 29.82 42 27 42 24c0-8.56-5.99-15.72-14-17.54v4.13c5.78 1.72 10 7.07 10 13.41zM8.55 6L6 8.55 15.45 18H6v12h8l10 10V26.55l8.51 8.51c-1.34 1.03-2.85 1.86-4.51 2.36v4.13a17.94 17.94 0 0 0 7.37-3.62L39.45 42 42 39.45l-18-18L8.55 6zM24 8l-4.18 4.18L24 16.36V8z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-volume-low">
      <path d="M14 18v12h8l10 10V8L22 18h-8z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-volume-medium">
      <path d="M37 24c0-3.53-2.04-6.58-5-8.05v16.11c2.96-1.48 5-4.53 5-8.06zm-27-6v12h8l10 10V8L18 18h-8z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-volume-high">
      <path d="M6 18v12h8l10 10V8L14 18H6zm27 6c0-3.53-2.04-6.58-5-8.05v16.11c2.96-1.48 5-4.53 5-8.06zM28 6.46v4.13c5.78 1.72 10 7.07 10 13.41s-4.22 11.69-10 13.41v4.13c8.01-1.82 14-8.97 14-17.54S36.01 8.28 28 6.46z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-spinner">
      <path d="M18.8 21l9.53-16.51C26.94 4.18 25.49 4 24 4c-4.8 0-9.19 1.69-12.64 4.51l7.33 12.69.11-.2zm24.28-3c-1.84-5.85-6.3-10.52-11.99-12.68L23.77 18h19.31zm.52 2H28.62l.58 1 9.53 16.5C41.99 33.94 44 29.21 44 24c0-1.37-.14-2.71-.4-4zm-26.53 4l-7.8-13.5C6.01 14.06 4 18.79 4 24c0 1.37.14 2.71.4 4h14.98l-2.31-4zM4.92 30c1.84 5.85 6.3 10.52 11.99 12.68L24.23 30H4.92zm22.54 0l-7.8 13.51c1.4.31 2.85.49 4.34.49 4.8 0 9.19-1.69 12.64-4.51L29.31 26.8 27.46 30z"></path>
    </symbol>
    <symbol viewBox="0 0 24 24" id="vjs-icon-hd">
      <path d="M19 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-8 12H9.5v-2h-2v2H6V9h1.5v2.5h2V9H11v6zm2-6h4c.55 0 1 .45 1 1v4c0 .55-.45 1-1 1h-4V9zm1.5 4.5h2v-3h-2v3z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-chapters">
      <path d="M6 26h4v-4H6v4zm0 8h4v-4H6v4zm0-16h4v-4H6v4zm8 8h28v-4H14v4zm0 8h28v-4H14v4zm0-20v4h28v-4H14z"></path>
    </symbol>
    <symbol viewBox="0 0 40 40" id="vjs-icon-downloading">
      <path d="M18.208 36.875q-3.208-.292-5.979-1.729-2.771-1.438-4.812-3.729-2.042-2.292-3.188-5.229-1.146-2.938-1.146-6.23 0-6.583 4.334-11.416 4.333-4.834 10.833-5.5v3.166q-5.167.75-8.583 4.646Q6.25 14.75 6.25 19.958q0 5.209 3.396 9.104 3.396 3.896 8.562 4.646zM20 28.417L11.542 20l2.083-2.083 4.917 4.916v-11.25h2.916v11.25l4.875-4.916L28.417 20zm1.792 8.458v-3.167q1.833-.25 3.541-.958 1.709-.708 3.167-1.875l2.333 2.292q-1.958 1.583-4.25 2.541-2.291.959-4.791 1.167zm6.791-27.792q-1.541-1.125-3.25-1.854-1.708-.729-3.541-1.021V3.042q2.5.25 4.77 1.208 2.271.958 4.271 2.5zm4.584 21.584l-2.25-2.25q1.166-1.5 1.854-3.209.687-1.708.937-3.541h3.209q-.292 2.5-1.229 4.791-.938 2.292-2.521 4.209zm.541-12.417q-.291-1.833-.958-3.562-.667-1.73-1.833-3.188l2.375-2.208q1.541 1.916 2.458 4.208.917 2.292 1.167 4.75z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-file-download">
      <path d="M10.8 40.55q-1.35 0-2.375-1T7.4 37.15v-7.7h3.4v7.7h26.35v-7.7h3.4v7.7q0 1.4-1 2.4t-2.4 1zM24 32.1L13.9 22.05l2.45-2.45 5.95 5.95V7.15h3.4v18.4l5.95-5.95 2.45 2.45z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-file-download-done">
      <path d="M9.8 40.5v-3.45h28.4v3.45zm9.2-9.05L7.4 19.85l2.45-2.35L19 26.65l19.2-19.2 2.4 2.4z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-file-download-off">
      <path d="M4.9 4.75L43.25 43.1 41 45.3l-4.75-4.75q-.05.05-.075.025-.025-.025-.075-.025H10.8q-1.35 0-2.375-1T7.4 37.15v-7.7h3.4v7.7h22.05l-7-7-1.85 1.8L13.9 21.9l1.85-1.85L2.7 7zm26.75 14.7l2.45 2.45-3.75 3.8-2.45-2.5zM25.7 7.15V21.1l-3.4-3.45V7.15z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-share">
      <path d="M36 32.17c-1.52 0-2.89.59-3.93 1.54L17.82 25.4c.11-.45.18-.92.18-1.4s-.07-.95-.18-1.4l14.1-8.23c1.07 1 2.5 1.62 4.08 1.62 3.31 0 6-2.69 6-6s-2.69-6-6-6-6 2.69-6 6c0 .48.07.95.18 1.4l-14.1 8.23c-1.07-1-2.5-1.62-4.08-1.62-3.31 0-6 2.69-6 6s2.69 6 6 6c1.58 0 3.01-.62 4.08-1.62l14.25 8.31c-.1.42-.16.86-.16 1.31A5.83 5.83 0 1 0 36 32.17z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-cog">
      <path d="M38.86 25.95c.08-.64.14-1.29.14-1.95s-.06-1.31-.14-1.95l4.23-3.31c.38-.3.49-.84.24-1.28l-4-6.93c-.25-.43-.77-.61-1.22-.43l-4.98 2.01c-1.03-.79-2.16-1.46-3.38-1.97L29 4.84c-.09-.47-.5-.84-1-.84h-8c-.5 0-.91.37-.99.84l-.75 5.3a14.8 14.8 0 0 0-3.38 1.97L9.9 10.1a1 1 0 0 0-1.22.43l-4 6.93c-.25.43-.14.97.24 1.28l4.22 3.31C9.06 22.69 9 23.34 9 24s.06 1.31.14 1.95l-4.22 3.31c-.38.3-.49.84-.24 1.28l4 6.93c.25.43.77.61 1.22.43l4.98-2.01c1.03.79 2.16 1.46 3.38 1.97l.75 5.3c.08.47.49.84.99.84h8c.5 0 .91-.37.99-.84l.75-5.3a14.8 14.8 0 0 0 3.38-1.97l4.98 2.01a1 1 0 0 0 1.22-.43l4-6.93c.25-.43.14-.97-.24-1.28l-4.22-3.31zM24 31c-3.87 0-7-3.13-7-7s3.13-7 7-7 7 3.13 7 7-3.13 7-7 7z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-square">
      <path d="M36 8H12c-2.21 0-4 1.79-4 4v24c0 2.21 1.79 4 4 4h24c2.21 0 4-1.79 4-4V12c0-2.21-1.79-4-4-4zm0 28H12V12h24v24z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-circle">
      <circle cx="24" cy="24" r="20"></circle>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-circle-outline">
      <path d="M24 4C12.95 4 4 12.95 4 24s8.95 20 20 20 20-8.95 20-20S35.05 4 24 4zm0 36c-8.82 0-16-7.18-16-16S15.18 8 24 8s16 7.18 16 16-7.18 16-16 16z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-circle-inner-circle">
      <path d="M24 4C12.97 4 4 12.97 4 24s8.97 20 20 20 20-8.97 20-20S35.03 4 24 4zm0 36c-8.82 0-16-7.18-16-16S15.18 8 24 8s16 7.18 16 16-7.18 16-16 16zm6-16c0 3.31-2.69 6-6 6s-6-2.69-6-6 2.69-6 6-6 6 2.69 6 6z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-cancel">
      <path d="M24 4C12.95 4 4 12.95 4 24s8.95 20 20 20 20-8.95 20-20S35.05 4 24 4zm10 27.17L31.17 34 24 26.83 16.83 34 14 31.17 21.17 24 14 16.83 16.83 14 24 21.17 31.17 14 34 16.83 26.83 24 34 31.17z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-replay">
      <path d="M24 10V2L14 12l10 10v-8c6.63 0 12 5.37 12 12s-5.37 12-12 12-12-5.37-12-12H8c0 8.84 7.16 16 16 16s16-7.16 16-16-7.16-16-16-16z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-repeat">
      <path d="M14 14h20v6l8-8-8-8v6H10v12h4v-8zm20 20H14v-6l-8 8 8 8v-6h24V26h-4v8z"></path>
    </symbol>
    <symbol viewBox="0 96 48 48" id="vjs-icon-replay-5">
      <path d="M17.689 98l-8.697 8.696 8.697 8.697 2.486-2.485-4.32-4.319h1.302c4.93 0 9.071 1.722 12.424 5.165 3.352 3.443 5.029 7.638 5.029 12.584h3.55c0-2.958-.553-5.73-1.658-8.313-1.104-2.583-2.622-4.841-4.555-6.774-1.932-1.932-4.19-3.45-6.773-4.555-2.584-1.104-5.355-1.657-8.313-1.657H15.5l4.615-4.615zm-8.08 21.659v13.861h11.357v5.008H9.609V143h12.7c.834 0 1.55-.298 2.146-.894.596-.597.895-1.31.895-2.145v-7.781c0-.835-.299-1.55-.895-2.147a2.929 2.929 0 0 0-2.147-.894h-8.227v-5.096H25.35v-4.384z"></path>
    </symbol>
    <symbol viewBox="0 96 48 48" id="vjs-icon-replay-10">
      <path d="M42.315 125.63c0-4.997-1.694-9.235-5.08-12.713-3.388-3.479-7.571-5.218-12.552-5.218h-1.315l4.363 4.363-2.51 2.51-8.787-8.786L25.221 97l2.45 2.45-4.662 4.663h1.375c2.988 0 5.788.557 8.397 1.673 2.61 1.116 4.892 2.65 6.844 4.602 1.953 1.953 3.487 4.234 4.602 6.844 1.116 2.61 1.674 5.41 1.674 8.398zM8.183 142v-19.657H3.176V117.8h9.643V142zm13.63 0c-1.156 0-2.127-.393-2.912-1.178-.778-.778-1.168-1.746-1.168-2.902v-16.04c0-1.156.393-2.127 1.178-2.912.779-.779 1.746-1.168 2.902-1.168h7.696c1.156 0 2.126.392 2.911 1.177.779.78 1.168 1.747 1.168 2.903v16.04c0 1.156-.392 2.127-1.177 2.912-.779.779-1.746 1.168-2.902 1.168zm.556-4.636h6.583v-15.02H22.37z"></path>
    </symbol>
    <symbol viewBox="0 96 48 48" id="vjs-icon-replay-30">
      <path d="M26.047 97l-8.733 8.732 8.733 8.733 2.496-2.494-4.336-4.338h1.307c4.95 0 9.108 1.73 12.474 5.187 3.367 3.458 5.051 7.668 5.051 12.635h3.565c0-2.97-.556-5.751-1.665-8.346-1.109-2.594-2.633-4.862-4.574-6.802-1.94-1.941-4.208-3.466-6.803-4.575-2.594-1.109-5.375-1.664-8.345-1.664H23.85l4.634-4.634zM2.555 117.531v4.688h10.297v5.25H5.873v4.687h6.979v5.156H2.555V142H13.36c1.061 0 1.95-.395 2.668-1.186.718-.79 1.076-1.772 1.076-2.94v-16.218c0-1.168-.358-2.149-1.076-2.94-.717-.79-1.607-1.185-2.668-1.185zm22.482.14c-1.149 0-2.11.39-2.885 1.165-.78.78-1.172 1.744-1.172 2.893v15.943c0 1.149.388 2.11 1.163 2.885.78.78 1.745 1.172 2.894 1.172h7.649c1.148 0 2.11-.388 2.884-1.163.78-.78 1.17-1.745 1.17-2.894v-15.943c0-1.15-.386-2.111-1.16-2.885-.78-.78-1.746-1.172-2.894-1.172zm.553 4.518h6.545v14.93H25.59z"></path>
    </symbol>
    <symbol viewBox="0 96 48 48" id="vjs-icon-forward-5">
      <path d="M29.508 97l-2.431 2.43 4.625 4.625h-1.364c-2.965 0-5.742.554-8.332 1.66-2.589 1.107-4.851 2.629-6.788 4.566-1.937 1.937-3.458 4.2-4.565 6.788-1.107 2.59-1.66 5.367-1.66 8.331h3.557c0-4.957 1.68-9.16 5.04-12.611 3.36-3.45 7.51-5.177 12.451-5.177h1.304l-4.326 4.33 2.49 2.49 8.715-8.716zm-9.783 21.61v13.89h11.382v5.018H19.725V142h12.727a2.93 2.93 0 0 0 2.15-.896 2.93 2.93 0 0 0 .896-2.15v-7.798c0-.837-.299-1.554-.896-2.152a2.93 2.93 0 0 0-2.15-.896h-8.245V123h11.29v-4.392z"></path>
    </symbol>
    <symbol viewBox="0 96 48 48" id="vjs-icon-forward-10">
      <path d="M23.119 97l-2.386 2.383 4.538 4.538h-1.339c-2.908 0-5.633.543-8.173 1.63-2.54 1.085-4.76 2.577-6.66 4.478-1.9 1.9-3.392 4.12-4.478 6.66-1.085 2.54-1.629 5.264-1.629 8.172h3.49c0-4.863 1.648-8.986 4.944-12.372 3.297-3.385 7.368-5.078 12.216-5.078h1.279l-4.245 4.247 2.443 2.442 8.55-8.55zm-9.52 21.45v4.42h4.871V142h4.513v-23.55zm18.136 0c-1.125 0-2.066.377-2.824 1.135-.764.764-1.148 1.709-1.148 2.834v15.612c0 1.124.38 2.066 1.139 2.824.764.764 1.708 1.145 2.833 1.145h7.489c1.125 0 2.066-.378 2.824-1.136.764-.764 1.145-1.709 1.145-2.833v-15.612c0-1.125-.378-2.067-1.136-2.825-.764-.764-1.708-1.145-2.833-1.145zm.54 4.42h6.408v14.617h-6.407z"></path>
    </symbol>
    <symbol viewBox="0 96 48 48" id="vjs-icon-forward-30">
      <path d="M25.549 97l-2.437 2.434 4.634 4.635H26.38c-2.97 0-5.753.555-8.347 1.664-2.594 1.109-4.861 2.633-6.802 4.574-1.94 1.94-3.465 4.207-4.574 6.802-1.109 2.594-1.664 5.377-1.664 8.347h3.565c0-4.967 1.683-9.178 5.05-12.636 3.366-3.458 7.525-5.187 12.475-5.187h1.307l-4.335 4.338 2.495 2.494 8.732-8.732zm-11.553 20.53v4.689h10.297v5.249h-6.978v4.688h6.978v5.156H13.996V142h10.808c1.06 0 1.948-.395 2.666-1.186.718-.79 1.077-1.771 1.077-2.94v-16.217c0-1.169-.36-2.15-1.077-2.94-.718-.79-1.605-1.186-2.666-1.186zm21.174.168c-1.149 0-2.11.389-2.884 1.163-.78.78-1.172 1.745-1.172 2.894v15.942c0 1.15.388 2.11 1.162 2.885.78.78 1.745 1.17 2.894 1.17h7.649c1.149 0 2.11-.386 2.885-1.16.78-.78 1.17-1.746 1.17-2.895v-15.942c0-1.15-.387-2.11-1.161-2.885-.78-.78-1.745-1.172-2.894-1.172zm.552 4.516h6.542v14.931h-6.542z"></path>
    </symbol>
    <symbol viewBox="0 0 512 512" id="vjs-icon-audio-description">
      <g fill-rule="evenodd"><path d="M227.29 381.351V162.993c50.38-1.017 89.108-3.028 117.631 17.126 27.374 19.342 48.734 56.965 44.89 105.325-4.067 51.155-41.335 94.139-89.776 98.475-24.085 2.155-71.972 0-71.972 0s-.84-1.352-.773-2.568m48.755-54.804c31.43 1.26 53.208-16.633 56.495-45.386 4.403-38.51-21.188-63.552-58.041-60.796v103.612c-.036 1.466.575 2.22 1.546 2.57"></path><path d="M383.78 381.328c13.336 3.71 17.387-11.06 23.215-21.408 12.722-22.571 22.294-51.594 22.445-84.774.221-47.594-18.343-82.517-35.6-106.182h-8.51c-.587 3.874 2.226 7.315 3.865 10.276 13.166 23.762 25.367 56.553 25.54 94.194.2 43.176-14.162 79.278-30.955 107.894"></path><path d="M425.154 381.328c13.336 3.71 17.384-11.061 23.215-21.408 12.721-22.571 22.291-51.594 22.445-84.774.221-47.594-18.343-82.517-35.6-106.182h-8.511c-.586 3.874 2.226 7.315 3.866 10.276 13.166 23.762 25.367 56.553 25.54 94.194.2 43.176-14.162 79.278-30.955 107.894"></path><path d="M466.26 381.328c13.337 3.71 17.385-11.061 23.216-21.408 12.722-22.571 22.292-51.594 22.445-84.774.221-47.594-18.343-82.517-35.6-106.182h-8.51c-.587 3.874 2.225 7.315 3.865 10.276 13.166 23.762 25.367 56.553 25.54 94.194.2 43.176-14.162 79.278-30.955 107.894M4.477 383.005H72.58l18.573-28.484 64.169-.135s.065 19.413.065 28.62h48.756V160.307h-58.816c-5.653 9.537-140.85 222.697-140.85 222.697zm152.667-145.282v71.158l-40.453-.27 40.453-70.888z"></path></g>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-next-item">
      <path d="M12 36l17-12-17-12v24zm20-24v24h4V12h-4z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-previous-item">
      <path d="M12 12h4v24h-4zm7 12l17 12V12z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-shuffle">
      <path d="M21.17 18.34L10.83 8 8 10.83l10.34 10.34 2.83-2.83zM29 8l4.09 4.09L8 37.17 10.83 40l25.09-25.09L40 19V8H29zm.66 18.83l-2.83 2.83 6.26 6.26L29 40h11V29l-4.09 4.09-6.25-6.26z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-cast">
      <path d="M42 6H6c-2.21 0-4 1.79-4 4v6h4v-6h36v28H28v4h14c2.21 0 4-1.79 4-4V10c0-2.21-1.79-4-4-4zM2 36v6h6c0-3.31-2.69-6-6-6zm0-8v4c5.52 0 10 4.48 10 10h4c0-7.73-6.27-14-14-14zm0-8v4c9.94 0 18 8.06 18 18h4c0-12.15-9.85-22-22-22z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-picture-in-picture-enter">
      <path d="M38 22H22v11.99h16V22zm8 16V9.96C46 7.76 44.2 6 42 6H6C3.8 6 2 7.76 2 9.96V38c0 2.2 1.8 4 4 4h36c2.2 0 4-1.8 4-4zm-4 .04H6V9.94h36v28.1z"></path>
    </symbol>
    <symbol viewBox="0 0 22 18" id="vjs-icon-picture-in-picture-exit">
      <path d="M18 4H4v10h14V4zm4 12V1.98C22 .88 21.1 0 20 0H2C.9 0 0 .88 0 1.98V16c0 1.1.9 2 2 2h18c1.1 0 2-.9 2-2zm-2 .02H2V1.97h18v14.05z"></path>
      <path fill="none" d="M-1-3h24v24H-1z"></path>
    </symbol>
    <symbol viewBox="0 0 1792 1792" id="vjs-icon-facebook">
      <path d="M1343 12v264h-157q-86 0-116 36t-30 108v189h293l-39 296h-254v759H734V905H479V609h255V391q0-186 104-288.5T1115 0q147 0 228 12z"></path>
    </symbol>
    <symbol viewBox="0 0 1792 1792" id="vjs-icon-linkedin">
      <path d="M477 625v991H147V625h330zm21-306q1 73-50.5 122T312 490h-2q-82 0-132-49t-50-122q0-74 51.5-122.5T314 148t133 48.5T498 319zm1166 729v568h-329v-530q0-105-40.5-164.5T1168 862q-63 0-105.5 34.5T999 982q-11 30-11 81v553H659q2-399 2-647t-1-296l-1-48h329v144h-2q20-32 41-56t56.5-52 87-43.5T1285 602q171 0 275 113.5t104 332.5z"></path>
    </symbol>
    <symbol viewBox="0 0 1200 1227" id="vjs-icon-twitter">
      <path d="M714.163 519.284L1160.89 0H1055.03L667.137 450.887L357.328 0H0L468.492 681.821L0 1226.37H105.866L515.491 750.218L842.672 1226.37H1200L714.137 519.284H714.163ZM569.165 687.828L521.697 619.934L144.011 79.6944H306.615L611.412 515.685L658.88 583.579L1055.08 1150.3H892.476L569.165 687.854V687.828Z"/>
    </symbol>
    <symbol viewBox="0 0 1792 1792" id="vjs-icon-tumblr">
      <path d="M1328 1329l80 237q-23 35-111 66t-177 32q-104 2-190.5-26T787 1564t-95-106-55.5-120-16.5-118V676H452V461q72-26 129-69.5t91-90 58-102 34-99T779 12q1-5 4.5-8.5T791 0h244v424h333v252h-334v518q0 30 6.5 56t22.5 52.5 49.5 41.5 81.5 14q78-2 134-29z"></path>
    </symbol>
    <symbol viewBox="0 0 1792 1792" id="vjs-icon-pinterest">
      <path d="M1664 896q0 209-103 385.5T1281.5 1561 896 1664q-111 0-218-32 59-93 78-164 9-34 54-211 20 39 73 67.5t114 28.5q121 0 216-68.5t147-188.5 52-270q0-114-59.5-214T1180 449t-255-63q-105 0-196 29t-154.5 77-109 110.5-67 129.5T377 866q0 104 40 183t117 111q30 12 38-20 2-7 8-31t8-30q6-23-11-43-51-61-51-151 0-151 104.5-259.5T904 517q151 0 235.5 82t84.5 213q0 170-68.5 289T980 1220q-61 0-98-43.5T859 1072q8-35 26.5-93.5t30-103T927 800q0-50-27-83t-77-33q-62 0-105 57t-43 142q0 73 25 122l-99 418q-17 70-13 177-206-91-333-281T128 896q0-209 103-385.5T510.5 231 896 128t385.5 103T1561 510.5 1664 896z"></path>
    </symbol>
  </defs>
</svg>`;const zO=ax?10009:ox?461:8,Df={codes:{play:415,pause:19,ff:417,rw:412,back:zO},names:{415:"play",19:"pause",417:"ff",412:"rw",[zO]:"back"},isEventKey(r,e){return e=e.toLowerCase(),!!(this.names[r.keyCode]&&this.names[r.keyCode]===e)},getEventName(r){if(this.names[r.keyCode])return this.names[r.keyCode];if(this.codes[r.code]){const e=this.codes[r.code];return this.names[e]}return null}},HO=5;class Uoe extends mo{constructor(e){super(),this.player_=e,this.focusableComponents=[],this.isListening_=!1,this.isPaused_=!1,this.onKeyDown_=this.onKeyDown_.bind(this),this.lastFocusedComponent_=null}start(){this.isListening_||(this.player_.on("keydown",this.onKeyDown_),this.player_.on("modalKeydown",this.onKeyDown_),this.player_.on("loadedmetadata",()=>{this.focus(this.updateFocusableComponents()[0])}),this.player_.on("modalclose",()=>{this.refocusComponent()}),this.player_.on("focusin",this.handlePlayerFocus_.bind(this)),this.player_.on("focusout",this.handlePlayerBlur_.bind(this)),this.isListening_=!0,this.player_.errorDisplay&&this.player_.errorDisplay.on("aftermodalfill",()=>{this.updateFocusableComponents(),this.focusableComponents.length&&(this.focusableComponents.length>1?this.focusableComponents[1].focus():this.focusableComponents[0].focus())}))}stop(){this.player_.off("keydown",this.onKeyDown_),this.isListening_=!1}onKeyDown_(e){const t=e.originalEvent?e.originalEvent:e;if(["ArrowLeft","ArrowRight","ArrowUp","ArrowDown"].includes(t.key)){if(this.isPaused_)return;t.preventDefault();const n=t.key.substring(5).toLowerCase();this.move(n)}else if(Df.isEventKey(t,"play")||Df.isEventKey(t,"pause")||Df.isEventKey(t,"ff")||Df.isEventKey(t,"rw")){t.preventDefault();const n=Df.getEventName(t);this.performMediaAction_(n)}else Df.isEventKey(t,"Back")&&e.target&&typeof e.target.closeable=="function"&&e.target.closeable()&&(t.preventDefault(),e.target.close())}performMediaAction_(e){if(this.player_)switch(e){case"play":this.player_.paused()&&this.player_.play();break;case"pause":this.player_.paused()||this.player_.pause();break;case"ff":this.userSeek_(this.player_.currentTime()+HO);break;case"rw":this.userSeek_(this.player_.currentTime()-HO);break}}userSeek_(e){this.player_.liveTracker&&this.player_.liveTracker.isLive()&&this.player_.liveTracker.nextSeekedFromUser(),this.player_.currentTime(e)}pause(){this.isPaused_=!0}resume(){this.isPaused_=!1}handlePlayerBlur_(e){const t=e.relatedTarget;let n=null;const i=this.getCurrentComponent(e.target);t&&(n=!!t.closest(".video-js"),t.classList.contains("vjs-text-track-settings")&&!this.isPaused_&&this.searchForTrackSelect_()),(!e.currentTarget.contains(e.relatedTarget)&&!n||!t)&&(i&&i.name()==="CloseButton"?this.refocusComponent():(this.pause(),i&&i.el()&&(this.lastFocusedComponent_=i)))}handlePlayerFocus_(){this.getCurrentComponent()&&this.getCurrentComponent().getIsFocusable()&&this.resume()}updateFocusableComponents(){const e=this.player_,t=[];function n(i){for(const s of i)s.hasOwnProperty("el_")&&s.getIsFocusable()&&s.getIsAvailableToBeFocused(s.el())&&t.push(s),s.hasOwnProperty("children_")&&s.children_.length>0&&n(s.children_)}return e.children_.forEach(i=>{if(i.hasOwnProperty("el_"))if(i.getIsFocusable&&i.getIsAvailableToBeFocused&&i.getIsFocusable()&&i.getIsAvailableToBeFocused(i.el())){t.push(i);return}else i.hasOwnProperty("children_")&&i.children_.length>0?n(i.children_):i.hasOwnProperty("items")&&i.items.length>0?n(i.items):this.findSuitableDOMChild(i)&&t.push(i);if(i.name_==="ErrorDisplay"&&i.opened_){const s=i.el_.querySelector(".vjs-errors-ok-button-container");s&&s.querySelectorAll("button").forEach((o,l)=>{t.push({name:()=>"ModalButton"+(l+1),el:()=>o,getPositions:()=>{const u=o.getBoundingClientRect(),c={x:u.x,y:u.y,width:u.width,height:u.height,top:u.top,right:u.right,bottom:u.bottom,left:u.left},h={x:u.left+u.width/2,y:u.top+u.height/2,width:0,height:0,top:u.top+u.height/2,right:u.left+u.width/2,bottom:u.top+u.height/2,left:u.left+u.width/2};return{boundingClientRect:c,center:h}},getIsAvailableToBeFocused:()=>!0,getIsFocusable:u=>!0,focus:()=>o.focus()})})}}),this.focusableComponents=t,this.focusableComponents}findSuitableDOMChild(e){function t(n){if(e.getIsFocusable(n)&&e.getIsAvailableToBeFocused(n))return n;for(let i=0;i<n.children.length;i++){const s=n.children[i],a=t(s);if(a)return a}return null}return e.el()?t(e.el()):null}getCurrentComponent(e){this.updateFocusableComponents();const t=e||document.activeElement;if(this.focusableComponents.length){for(const n of this.focusableComponents)if(n.el()===t)return n}}add(e){const t=[...this.focusableComponents];e.hasOwnProperty("el_")&&e.getIsFocusable()&&e.getIsAvailableToBeFocused(e.el())&&t.push(e),this.focusableComponents=t,this.trigger({type:"focusableComponentsChanged",focusableComponents:this.focusableComponents})}remove(e){for(let t=0;t<this.focusableComponents.length;t++)if(this.focusableComponents[t].name()===e.name()){this.focusableComponents.splice(t,1),this.trigger({type:"focusableComponentsChanged",focusableComponents:this.focusableComponents});return}}clear(){this.focusableComponents.length>0&&(this.focusableComponents=[],this.trigger({type:"focusableComponentsChanged",focusableComponents:this.focusableComponents}))}move(e){const t=this.getCurrentComponent();if(!t)return;const n=t.getPositions(),i=this.focusableComponents.filter(a=>a!==t&&this.isInDirection_(n.boundingClientRect,a.getPositions().boundingClientRect,e)),s=this.findBestCandidate_(n.center,i,e);s?this.focus(s):this.trigger({type:"endOfFocusableComponents",direction:e,focusedComponent:t})}findBestCandidate_(e,t,n){let i=1/0,s=null;for(const a of t){const o=a.getPositions().center,l=this.calculateDistance_(e,o,n);l<i&&(i=l,s=a)}return s}isInDirection_(e,t,n){switch(n){case"right":return t.left>=e.right;case"left":return t.right<=e.left;case"down":return t.top>=e.bottom;case"up":return t.bottom<=e.top;default:return!1}}refocusComponent(){if(this.lastFocusedComponent_){this.player_.userActive()||this.player_.userActive(!0),this.updateFocusableComponents();for(let e=0;e<this.focusableComponents.length;e++)if(this.focusableComponents[e].name()===this.lastFocusedComponent_.name()){this.focus(this.focusableComponents[e]);return}}else this.focus(this.updateFocusableComponents()[0])}focus(e){typeof e=="object"&&(e.getIsAvailableToBeFocused(e.el())?e.focus():this.findSuitableDOMChild(e)&&this.findSuitableDOMChild(e).focus())}calculateDistance_(e,t,n){const i=Math.abs(e.x-t.x),s=Math.abs(e.y-t.y);let a;switch(n){case"right":case"left":a=i+s*100;break;case"up":a=s*2+i*.5;break;case"down":a=s*5+i;break;default:a=i+s}return a}searchForTrackSelect_(){const e=this;for(const t of e.updateFocusableComponents())if(t.constructor.name==="TextTrackSelect"){e.focus(t);break}}}let $oe=class extends mt{constructor(e,t,n){const i=Bn({createEl:!1},t);if(super(e,i,n),!t.playerOptions.sources||t.playerOptions.sources.length===0)for(let s=0,a=t.playerOptions.techOrder;s<a.length;s++){const o=ui(a[s]);let l=Nn.getTech(o);if(o||(l=mt.getComponent(o)),l&&l.isSupported()){e.loadTech_(o);break}}else e.src(t.playerOptions.sources)}};mt.registerComponent("MediaLoader",$oe);let tS=class extends mt{constructor(e,t){super(e,t),this.options_.controlText&&this.controlText(this.options_.controlText),this.handleMouseOver_=n=>this.handleMouseOver(n),this.handleMouseOut_=n=>this.handleMouseOut(n),this.handleClick_=n=>this.handleClick(n),this.handleKeyDown_=n=>this.handleKeyDown(n),this.emitTapEvents(),this.enable()}createEl(e="div",t={},n={}){t=Object.assign({className:this.buildCSSClass(),tabIndex:0},t),e==="button"&&Kr.error(`Creating a ClickableComponent with an HTML element of ${e} is not supported; use a Button instead.`),n=Object.assign({role:"button"},n),this.tabIndex_=t.tabIndex;const i=Er(e,t,n);return this.player_.options_.experimentalSvgIcons||i.appendChild(Er("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),this.createControlTextEl(i),i}dispose(){this.controlTextEl_=null,super.dispose()}createControlTextEl(e){return this.controlTextEl_=Er("span",{className:"vjs-control-text"},{"aria-live":"polite"}),e&&e.appendChild(this.controlTextEl_),this.controlText(this.controlText_,e),this.controlTextEl_}controlText(e,t=this.el()){if(e===void 0)return this.controlText_||"Need Text";const n=this.localize(e);this.controlText_=e,Ud(this.controlTextEl_,n),!this.nonIconControl&&!this.player_.options_.noUITitleAttributes&&t.setAttribute("title",n)}buildCSSClass(){return`vjs-control vjs-button ${super.buildCSSClass()}`}enable(){this.enabled_||(this.enabled_=!0,this.removeClass("vjs-disabled"),this.el_.setAttribute("aria-disabled","false"),typeof this.tabIndex_<"u"&&this.el_.setAttribute("tabIndex",this.tabIndex_),this.on(["tap","click"],this.handleClick_),this.on("keydown",this.handleKeyDown_))}disable(){this.enabled_=!1,this.addClass("vjs-disabled"),this.el_.setAttribute("aria-disabled","true"),typeof this.tabIndex_<"u"&&this.el_.removeAttribute("tabIndex"),this.off("mouseover",this.handleMouseOver_),this.off("mouseout",this.handleMouseOut_),this.off(["tap","click"],this.handleClick_),this.off("keydown",this.handleKeyDown_)}handleLanguagechange(){this.controlText(this.controlText_)}handleClick(e){this.options_.clickHandler&&this.options_.clickHandler.call(this,arguments)}handleKeyDown(e){e.key===" "||e.key==="Enter"?(e.preventDefault(),e.stopPropagation(),this.trigger("click")):super.handleKeyDown(e)}};mt.registerComponent("ClickableComponent",tS);let Ow=class extends tS{constructor(e,t){super(e,t),this.update(),this.update_=n=>this.update(n),e.on("posterchange",this.update_)}dispose(){this.player().off("posterchange",this.update_),super.dispose()}createEl(){return Er("div",{className:"vjs-poster"})}crossOrigin(e){if(typeof e>"u")return this.$("img")?this.$("img").crossOrigin:this.player_.tech_&&this.player_.tech_.isReady_?this.player_.crossOrigin():this.player_.options_.crossOrigin||this.player_.options_.crossorigin||null;if(e!==null&&e!=="anonymous"&&e!=="use-credentials"){this.player_.log.warn(`crossOrigin must be null,  "anonymous" or "use-credentials", given "${e}"`);return}this.$("img")&&(this.$("img").crossOrigin=e)}update(e){const t=this.player().poster();this.setSrc(t),t?this.show():this.hide()}setSrc(e){if(!e){this.el_.textContent="";return}this.$("img")||this.el_.appendChild(Er("picture",{className:"vjs-poster",tabIndex:-1},{},Er("img",{loading:"lazy",crossOrigin:this.crossOrigin()},{alt:""}))),this.$("img").src=e}handleClick(e){this.player_.controls()&&(this.player_.tech(!0)&&this.player_.tech(!0).focus(),this.player_.paused()?lu(this.player_.play()):this.player_.pause())}};Ow.prototype.crossorigin=Ow.prototype.crossOrigin;mt.registerComponent("PosterImage",Ow);const Fo="#222",VO="#ccc",joe={monospace:"monospace",sansSerif:"sans-serif",serif:"serif",monospaceSansSerif:'"Andale Mono", "Lucida Console", monospace',monospaceSerif:'"Courier New", monospace',proportionalSansSerif:"sans-serif",proportionalSerif:"serif",casual:'"Comic Sans MS", Impact, fantasy',script:'"Monotype Corsiva", cursive',smallcaps:'"Andale Mono", "Lucida Console", monospace, sans-serif'};function z1(r,e){let t;if(r.length===4)t=r[1]+r[1]+r[2]+r[2]+r[3]+r[3];else if(r.length===7)t=r.slice(1);else throw new Error("Invalid color code provided, "+r+"; must be formatted as e.g. #f0e or #f604e2.");return"rgba("+parseInt(t.slice(0,2),16)+","+parseInt(t.slice(2,4),16)+","+parseInt(t.slice(4,6),16)+","+e+")"}function eu(r,e,t){try{r.style[e]=t}catch{return}}function WO(r){return r?`${r}px`:""}let zoe=class extends mt{constructor(e,t,n){super(e,t,n);const i=a=>this.updateDisplay(a),s=a=>{this.updateDisplayOverlay(),this.updateDisplay(a)};e.on("loadstart",a=>this.toggleDisplay(a)),e.on("texttrackchange",i),e.on("loadedmetadata",a=>{this.updateDisplayOverlay(),this.preselectTrack(a)}),e.ready(jn(this,function(){if(e.tech_&&e.tech_.featuresNativeTextTracks){this.hide();return}e.on("fullscreenchange",s),e.on("playerresize",s);const a=X.screen.orientation||X,o=X.screen.orientation?"change":"orientationchange";a.addEventListener(o,s),e.on("dispose",()=>a.removeEventListener(o,s));const l=this.options_.playerOptions.tracks||[];for(let u=0;u<l.length;u++)this.player_.addRemoteTextTrack(l[u],!0);this.preselectTrack()}))}preselectTrack(){const e={captions:1,subtitles:1},t=this.player_.textTracks(),n=this.player_.cache_.selectedLanguage;let i,s,a;for(let o=0;o<t.length;o++){const l=t[o];n&&n.enabled&&n.language&&n.language===l.language&&l.kind in e?l.kind===n.kind?a=l:a||(a=l):n&&!n.enabled?(a=null,i=null,s=null):l.default&&(l.kind==="descriptions"&&!i?i=l:l.kind in e&&!s&&(s=l))}a?a.mode="showing":s?s.mode="showing":i&&(i.mode="showing")}toggleDisplay(){this.player_.tech_&&this.player_.tech_.featuresNativeTextTracks?this.hide():this.show()}createEl(){return super.createEl("div",{className:"vjs-text-track-display"},{translate:"yes","aria-live":"off","aria-atomic":"true"})}clearDisplay(){typeof X.WebVTT=="function"&&X.WebVTT.processCues(X,[],this.el_)}updateDisplay(){const e=this.player_.textTracks(),t=this.options_.allowMultipleShowingTracks;if(this.clearDisplay(),t){const a=[];for(let o=0;o<e.length;++o){const l=e[o];l.mode==="showing"&&a.push(l)}this.updateForTrack(a);return}let n=null,i=null,s=e.length;for(;s--;){const a=e[s];a.mode==="showing"&&(a.kind==="descriptions"?n=a:i=a)}if(i?(this.getAttribute("aria-live")!=="off"&&this.setAttribute("aria-live","off"),this.updateForTrack(i)):n&&(this.getAttribute("aria-live")!=="assertive"&&this.setAttribute("aria-live","assertive"),this.updateForTrack(n)),!X.CSS.supports("inset","10px")){const a=this.el_,o=a.querySelectorAll(".vjs-text-track-cue"),l=this.player_.controlBar.el_.getBoundingClientRect().height,u=this.player_.el_.getBoundingClientRect().height;a.style="",eu(a,"position","relative"),eu(a,"height",u-l+"px"),eu(a,"top","unset"),lx?eu(a,"bottom",u+"px"):eu(a,"bottom","0px"),o.length>0&&o.forEach(c=>{if(c.style.inset){const h=c.style.inset.split(" ");h.length===3&&Object.assign(c.style,{top:h[0],right:h[1],bottom:h[2],left:"unset"})}})}}updateDisplayOverlay(){if(!this.player_.videoHeight()||!X.CSS.supports("inset-inline: 10px"))return;const e=this.player_.currentWidth(),t=this.player_.currentHeight(),n=e/t,i=this.player_.videoWidth()/this.player_.videoHeight();let s=0,a=0;Math.abs(n-i)>.1&&(n>i?s=Math.round((e-t*i)/2):a=Math.round((t-e/i)/2)),eu(this.el_,"insetInline",WO(s)),eu(this.el_,"insetBlock",WO(a))}updateDisplayState(e){const t=this.player_.textTrackSettings.getValues(),n=e.activeCues;let i=n.length;for(;i--;){const s=n[i];if(!s)continue;const a=s.displayState;if(t.color&&(a.firstChild.style.color=t.color),t.textOpacity&&eu(a.firstChild,"color",z1(t.color||"#fff",t.textOpacity)),t.backgroundColor&&(a.firstChild.style.backgroundColor=t.backgroundColor),t.backgroundOpacity&&eu(a.firstChild,"backgroundColor",z1(t.backgroundColor||"#000",t.backgroundOpacity)),t.windowColor&&(t.windowOpacity?eu(a,"backgroundColor",z1(t.windowColor,t.windowOpacity)):a.style.backgroundColor=t.windowColor),t.edgeStyle&&(t.edgeStyle==="dropshadow"?a.firstChild.style.textShadow=`2px 2px 3px ${Fo}, 2px 2px 4px ${Fo}, 2px 2px 5px ${Fo}`:t.edgeStyle==="raised"?a.firstChild.style.textShadow=`1px 1px ${Fo}, 2px 2px ${Fo}, 3px 3px ${Fo}`:t.edgeStyle==="depressed"?a.firstChild.style.textShadow=`1px 1px ${VO}, 0 1px ${VO}, -1px -1px ${Fo}, 0 -1px ${Fo}`:t.edgeStyle==="uniform"&&(a.firstChild.style.textShadow=`0 0 4px ${Fo}, 0 0 4px ${Fo}, 0 0 4px ${Fo}, 0 0 4px ${Fo}`)),t.fontPercent&&t.fontPercent!==1){const o=X.parseFloat(a.style.fontSize);a.style.fontSize=o*t.fontPercent+"px",a.style.height="auto",a.style.top="auto"}t.fontFamily&&t.fontFamily!=="default"&&(t.fontFamily==="small-caps"?a.firstChild.style.fontVariant="small-caps":a.firstChild.style.fontFamily=joe[t.fontFamily])}}updateForTrack(e){if(Array.isArray(e)||(e=[e]),typeof X.WebVTT!="function"||e.every(n=>!n.activeCues))return;const t=[];for(let n=0;n<e.length;++n){const i=e[n];for(let s=0;s<i.activeCues.length;++s)t.push(i.activeCues[s])}X.WebVTT.processCues(X,t,this.el_);for(let n=0;n<e.length;++n){const i=e[n];for(let s=0;s<i.activeCues.length;++s){const a=i.activeCues[s].displayState;Lh(a,"vjs-text-track-cue","vjs-text-track-cue-"+(i.language?i.language:n)),i.language&&Dp(a,"lang",i.language)}this.player_.textTrackSettings&&this.updateDisplayState(i)}}};mt.registerComponent("TextTrackDisplay",zoe);let Hoe=class extends mt{createEl(){const e=this.player_.isAudio(),t=this.localize(e?"Audio Player":"Video Player"),n=Er("span",{className:"vjs-control-text",textContent:this.localize("{1} is loading.",[t])}),i=super.createEl("div",{className:"vjs-loading-spinner",dir:"ltr"});return i.appendChild(n),i}handleLanguagechange(){this.$(".vjs-control-text").textContent=this.localize("{1} is loading.",[this.player_.isAudio()?"Audio Player":"Video Player"])}};mt.registerComponent("LoadingSpinner",Hoe);let Us=class extends tS{createEl(e,t={},n={}){e="button",t=Object.assign({className:this.buildCSSClass()},t),n=Object.assign({type:"button"},n);const i=Er(e,t,n);return this.player_.options_.experimentalSvgIcons||i.appendChild(Er("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),this.createControlTextEl(i),i}addChild(e,t={}){const n=this.constructor.name;return Kr.warn(`Adding an actionable (user controllable) child to a Button (${n}) is not supported; use a ClickableComponent instead.`),mt.prototype.addChild.call(this,e,t)}enable(){super.enable(),this.el_.removeAttribute("disabled")}disable(){super.disable(),this.el_.setAttribute("disabled","disabled")}handleKeyDown(e){if(e.key===" "||e.key==="Enter"){e.stopPropagation();return}super.handleKeyDown(e)}};mt.registerComponent("Button",Us);let d5=class extends Us{constructor(e,t){super(e,t),this.mouseused_=!1,this.setIcon("play"),this.on("mousedown",n=>this.handleMouseDown(n))}buildCSSClass(){return"vjs-big-play-button"}handleClick(e){const t=this.player_.play();if(this.mouseused_&&"clientX"in e&&"clientY"in e){lu(t),this.player_.tech(!0)&&this.player_.tech(!0).focus();return}const n=this.player_.getChild("controlBar"),i=n&&n.getChild("playToggle");if(!i){this.player_.tech(!0).focus();return}const s=()=>i.focus();k0(t)?t.then(s,()=>{}):this.setTimeout(s,1)}handleKeyDown(e){this.mouseused_=!1,super.handleKeyDown(e)}handleMouseDown(e){this.mouseused_=!0}};d5.prototype.controlText_="Play Video";mt.registerComponent("BigPlayButton",d5);let Voe=class extends Us{constructor(e,t){super(e,t),this.setIcon("cancel"),this.controlText(t&&t.controlText||this.localize("Close"))}buildCSSClass(){return`vjs-close-button ${super.buildCSSClass()}`}handleClick(e){this.trigger({type:"close",bubbles:!1})}handleKeyDown(e){e.key==="Escape"?(e.preventDefault(),e.stopPropagation(),this.trigger("click")):super.handleKeyDown(e)}};mt.registerComponent("CloseButton",Voe);let h5=class extends Us{constructor(e,t={}){super(e,t),t.replay=t.replay===void 0||t.replay,this.setIcon("play"),this.on(e,"play",n=>this.handlePlay(n)),this.on(e,"pause",n=>this.handlePause(n)),t.replay&&this.on(e,"ended",n=>this.handleEnded(n))}buildCSSClass(){return`vjs-play-control ${super.buildCSSClass()}`}handleClick(e){this.player_.paused()?lu(this.player_.play()):this.player_.pause()}handleSeeked(e){this.removeClass("vjs-ended"),this.player_.paused()?this.handlePause(e):this.handlePlay(e)}handlePlay(e){this.removeClass("vjs-ended","vjs-paused"),this.addClass("vjs-playing"),this.setIcon("pause"),this.controlText("Pause")}handlePause(e){this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.setIcon("play"),this.controlText("Play")}handleEnded(e){this.removeClass("vjs-playing"),this.addClass("vjs-ended"),this.setIcon("replay"),this.controlText("Replay"),this.one(this.player_,"seeked",t=>this.handleSeeked(t))}};h5.prototype.controlText_="Play";mt.registerComponent("PlayToggle",h5);let rm=class extends mt{constructor(e,t){super(e,t),this.on(e,["timeupdate","ended","seeking"],n=>this.update(n)),this.updateTextNode_()}createEl(){const e=this.buildCSSClass(),t=super.createEl("div",{className:`${e} vjs-time-control vjs-control`}),n=Er("span",{className:"vjs-control-text",textContent:`${this.localize(this.labelText_)}`},{role:"presentation"});return t.appendChild(n),this.contentEl_=Er("span",{className:`${e}-display`},{role:"presentation"}),t.appendChild(this.contentEl_),t}dispose(){this.contentEl_=null,this.textNode_=null,super.dispose()}update(e){!this.player_.options_.enableSmoothSeeking&&e.type==="seeking"||this.updateContent(e)}updateTextNode_(e=0){e=Gh(e),this.formattedTime_!==e&&(this.formattedTime_=e,this.requestNamedAnimationFrame("TimeDisplay#updateTextNode_",()=>{if(!this.contentEl_)return;let t=this.textNode_;t&&this.contentEl_.firstChild!==t&&(t=null,Kr.warn("TimeDisplay#updateTextnode_: Prevented replacement of text node element since it was no longer a child of this node. Appending a new node instead.")),this.textNode_=Fe.createTextNode(this.formattedTime_),this.textNode_&&(t?this.contentEl_.replaceChild(this.textNode_,t):this.contentEl_.appendChild(this.textNode_))}))}updateContent(e){}};rm.prototype.labelText_="Time";rm.prototype.controlText_="Time";mt.registerComponent("TimeDisplay",rm);let nk=class extends rm{buildCSSClass(){return"vjs-current-time"}updateContent(e){let t;this.player_.ended()?t=this.player_.duration():t=this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime(),this.updateTextNode_(t)}};nk.prototype.labelText_="Current Time";nk.prototype.controlText_="Current Time";mt.registerComponent("CurrentTimeDisplay",nk);let ik=class extends rm{constructor(e,t){super(e,t);const n=i=>this.updateContent(i);this.on(e,"durationchange",n),this.on(e,"loadstart",n),this.on(e,"loadedmetadata",n)}buildCSSClass(){return"vjs-duration"}updateContent(e){const t=this.player_.duration();this.updateTextNode_(t)}};ik.prototype.labelText_="Duration";ik.prototype.controlText_="Duration";mt.registerComponent("DurationDisplay",ik);let Woe=class extends mt{createEl(){const e=super.createEl("div",{className:"vjs-time-control vjs-time-divider"},{"aria-hidden":!0}),t=super.createEl("div"),n=super.createEl("span",{textContent:"/"});return t.appendChild(n),e.appendChild(t),e}};mt.registerComponent("TimeDivider",Woe);let sk=class extends rm{constructor(e,t){super(e,t),this.on(e,"durationchange",n=>this.updateContent(n))}buildCSSClass(){return"vjs-remaining-time"}createEl(){const e=super.createEl();return this.options_.displayNegative!==!1&&e.insertBefore(Er("span",{},{"aria-hidden":!0},"-"),this.contentEl_),e}updateContent(e){if(typeof this.player_.duration()!="number")return;let t;this.player_.ended()?t=0:this.player_.remainingTimeDisplay?t=this.player_.remainingTimeDisplay():t=this.player_.remainingTime(),this.updateTextNode_(t)}};sk.prototype.labelText_="Remaining Time";sk.prototype.controlText_="Remaining Time";mt.registerComponent("RemainingTimeDisplay",sk);let qoe=class extends mt{constructor(e,t){super(e,t),this.updateShowing(),this.on(this.player(),"durationchange",n=>this.updateShowing(n))}createEl(){const e=super.createEl("div",{className:"vjs-live-control vjs-control"});return this.contentEl_=Er("div",{className:"vjs-live-display"},{"aria-live":"off"}),this.contentEl_.appendChild(Er("span",{className:"vjs-control-text",textContent:`${this.localize("Stream Type")}`})),this.contentEl_.appendChild(Fe.createTextNode(this.localize("LIVE"))),e.appendChild(this.contentEl_),e}dispose(){this.contentEl_=null,super.dispose()}updateShowing(e){this.player().duration()===1/0?this.show():this.hide()}};mt.registerComponent("LiveDisplay",qoe);let f5=class extends Us{constructor(e,t){super(e,t),this.updateLiveEdgeStatus(),this.player_.liveTracker&&(this.updateLiveEdgeStatusHandler_=n=>this.updateLiveEdgeStatus(n),this.on(this.player_.liveTracker,"liveedgechange",this.updateLiveEdgeStatusHandler_))}createEl(){const e=super.createEl("button",{className:"vjs-seek-to-live-control vjs-control"});return this.setIcon("circle",e),this.textEl_=Er("span",{className:"vjs-seek-to-live-text",textContent:this.localize("LIVE")},{"aria-hidden":"true"}),e.appendChild(this.textEl_),e}updateLiveEdgeStatus(){!this.player_.liveTracker||this.player_.liveTracker.atLiveEdge()?(this.setAttribute("aria-disabled",!0),this.addClass("vjs-at-live-edge"),this.controlText("Seek to live, currently playing live")):(this.setAttribute("aria-disabled",!1),this.removeClass("vjs-at-live-edge"),this.controlText("Seek to live, currently behind live"))}handleClick(){this.player_.liveTracker.seekToLiveEdge()}dispose(){this.player_.liveTracker&&this.off(this.player_.liveTracker,"liveedgechange",this.updateLiveEdgeStatusHandler_),this.textEl_=null,super.dispose()}};f5.prototype.controlText_="Seek to live, currently playing live";mt.registerComponent("SeekToLive",f5);function Mg(r,e,t){return r=Number(r),Math.min(t,Math.max(e,isNaN(r)?e:r))}var Goe=Object.freeze({__proto__:null,clamp:Mg});let ak=class extends mt{constructor(e,t){super(e,t),this.handleMouseDown_=n=>this.handleMouseDown(n),this.handleMouseUp_=n=>this.handleMouseUp(n),this.handleKeyDown_=n=>this.handleKeyDown(n),this.handleClick_=n=>this.handleClick(n),this.handleMouseMove_=n=>this.handleMouseMove(n),this.update_=n=>this.update(n),this.bar=this.getChild(this.options_.barName),this.vertical(!!this.options_.vertical),this.enable()}enabled(){return this.enabled_}enable(){this.enabled()||(this.on("mousedown",this.handleMouseDown_),this.on("touchstart",this.handleMouseDown_),this.on("keydown",this.handleKeyDown_),this.on("click",this.handleClick_),this.on(this.player_,"controlsvisible",this.update),this.playerEvent&&this.on(this.player_,this.playerEvent,this.update),this.removeClass("disabled"),this.setAttribute("tabindex",0),this.enabled_=!0)}disable(){if(!this.enabled())return;const e=this.bar.el_.ownerDocument;this.off("mousedown",this.handleMouseDown_),this.off("touchstart",this.handleMouseDown_),this.off("keydown",this.handleKeyDown_),this.off("click",this.handleClick_),this.off(this.player_,"controlsvisible",this.update_),this.off(e,"mousemove",this.handleMouseMove_),this.off(e,"mouseup",this.handleMouseUp_),this.off(e,"touchmove",this.handleMouseMove_),this.off(e,"touchend",this.handleMouseUp_),this.removeAttribute("tabindex"),this.addClass("disabled"),this.playerEvent&&this.off(this.player_,this.playerEvent,this.update),this.enabled_=!1}createEl(e,t={},n={}){return t.className=t.className+" vjs-slider",t=Object.assign({tabIndex:0},t),n=Object.assign({role:"slider","aria-valuenow":0,"aria-valuemin":0,"aria-valuemax":100},n),super.createEl(e,t,n)}handleMouseDown(e){const t=this.bar.el_.ownerDocument;e.type==="mousedown"&&e.preventDefault(),e.type==="touchstart"&&!Du&&e.preventDefault(),UN(),this.addClass("vjs-sliding"),this.trigger("slideractive"),this.on(t,"mousemove",this.handleMouseMove_),this.on(t,"mouseup",this.handleMouseUp_),this.on(t,"touchmove",this.handleMouseMove_),this.on(t,"touchend",this.handleMouseUp_),this.handleMouseMove(e,!0)}handleMouseMove(e){}handleMouseUp(e){const t=this.bar.el_.ownerDocument;$N(),this.removeClass("vjs-sliding"),this.trigger("sliderinactive"),this.off(t,"mousemove",this.handleMouseMove_),this.off(t,"mouseup",this.handleMouseUp_),this.off(t,"touchmove",this.handleMouseMove_),this.off(t,"touchend",this.handleMouseUp_),this.update()}update(){if(!this.el_||!this.bar)return;const e=this.getProgress();return e===this.progress_||(this.progress_=e,this.requestNamedAnimationFrame("Slider#update",()=>{const t=this.vertical()?"height":"width";this.bar.el().style[t]=(e*100).toFixed(2)+"%"})),e}getProgress(){return Number(Mg(this.getPercent(),0,1).toFixed(4))}calculateDistance(e){const t=Xb(this.el_,e);return this.vertical()?t.y:t.x}handleKeyDown(e){const t=this.options_.playerOptions.spatialNavigation,n=t&&t.enabled,i=t&&t.horizontalSeek;n?i&&e.key==="ArrowLeft"||!i&&e.key==="ArrowDown"?(e.preventDefault(),e.stopPropagation(),this.stepBack()):i&&e.key==="ArrowRight"||!i&&e.key==="ArrowUp"?(e.preventDefault(),e.stopPropagation(),this.stepForward()):super.handleKeyDown(e):e.key==="ArrowLeft"||e.key==="ArrowDown"?(e.preventDefault(),e.stopPropagation(),this.stepBack()):e.key==="ArrowUp"||e.key==="ArrowRight"?(e.preventDefault(),e.stopPropagation(),this.stepForward()):super.handleKeyDown(e)}handleClick(e){e.stopPropagation(),e.preventDefault()}vertical(e){if(e===void 0)return this.vertical_||!1;this.vertical_=!!e,this.vertical_?this.addClass("vjs-slider-vertical"):this.addClass("vjs-slider-horizontal")}};mt.registerComponent("Slider",ak);const H1=(r,e)=>Mg(r/e*100,0,100).toFixed(2)+"%";let Koe=class extends mt{constructor(e,t){super(e,t),this.partEls_=[],this.on(e,"progress",n=>this.update(n))}createEl(){const e=super.createEl("div",{className:"vjs-load-progress"}),t=Er("span",{className:"vjs-control-text"}),n=Er("span",{textContent:this.localize("Loaded")}),i=Fe.createTextNode(": ");return this.percentageEl_=Er("span",{className:"vjs-control-text-loaded-percentage",textContent:"0%"}),e.appendChild(t),t.appendChild(n),t.appendChild(i),t.appendChild(this.percentageEl_),e}dispose(){this.partEls_=null,this.percentageEl_=null,super.dispose()}update(e){this.requestNamedAnimationFrame("LoadProgressBar#update",()=>{const t=this.player_.liveTracker,n=this.player_.buffered(),i=t&&t.isLive()?t.seekableEnd():this.player_.duration(),s=this.player_.bufferedEnd(),a=this.partEls_,o=H1(s,i);this.percent_!==o&&(this.el_.style.width=o,Ud(this.percentageEl_,o),this.percent_=o);for(let l=0;l<n.length;l++){const u=n.start(l),c=n.end(l);let h=a[l];h||(h=this.el_.appendChild(Er()),a[l]=h),!(h.dataset.start===u&&h.dataset.end===c)&&(h.dataset.start=u,h.dataset.end=c,h.style.left=H1(u,s),h.style.width=H1(c-u,s))}for(let l=a.length;l>n.length;l--)this.el_.removeChild(a[l-1]);a.length=n.length})}};mt.registerComponent("LoadProgressBar",Koe);let Xoe=class extends mt{constructor(e,t){super(e,t),this.update=Iu(jn(this,this.update),Yo)}createEl(){return super.createEl("div",{className:"vjs-time-tooltip"},{"aria-hidden":"true"})}update(e,t,n){const i=tg(this.el_),s=Ip(this.player_.el()),a=e.width*t;if(!s||!i)return;let o=e.left-s.left+a,l=e.width-a+(s.right-e.right);l||(l=e.width-a,o=a);let u=i.width/2;o<u?u+=u-o:l<u&&(u=l),u<0?u=0:u>i.width&&(u=i.width),u=Math.round(u),this.el_.style.right=`-${u}px`,this.write(n)}write(e){Ud(this.el_,e)}updateTime(e,t,n,i){this.requestNamedAnimationFrame("TimeTooltip#updateTime",()=>{let s;const a=this.player_.duration();if(this.player_.liveTracker&&this.player_.liveTracker.isLive()){const o=this.player_.liveTracker.liveWindow(),l=o-t*o;s=(l<1?"":"-")+Gh(l,o)}else s=Gh(n,a);this.update(e,t,s),i&&i()})}};mt.registerComponent("TimeTooltip",Xoe);let ok=class extends mt{constructor(e,t){super(e,t),this.setIcon("circle"),this.update=Iu(jn(this,this.update),Yo)}createEl(){return super.createEl("div",{className:"vjs-play-progress vjs-slider-bar"},{"aria-hidden":"true"})}update(e,t){const n=this.getChild("timeTooltip");if(!n)return;const i=this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime();n.updateTime(e,t,i)}};ok.prototype.options_={children:[]};!oa&&!Au&&ok.prototype.options_.children.push("timeTooltip");mt.registerComponent("PlayProgressBar",ok);let p5=class extends mt{constructor(e,t){super(e,t),this.update=Iu(jn(this,this.update),Yo)}createEl(){return super.createEl("div",{className:"vjs-mouse-display"})}update(e,t){const n=t*this.player_.duration();this.getChild("timeTooltip").updateTime(e,t,n,()=>{this.el_.style.left=`${e.width*t}px`})}};p5.prototype.options_={children:["timeTooltip"]};mt.registerComponent("MouseTimeDisplay",p5);const ty=5,qO=12;let lk=class extends ak{constructor(e,t){super(e,t),this.setEventHandlers_()}setEventHandlers_(){this.update_=jn(this,this.update),this.update=Iu(this.update_,Yo),this.on(this.player_,["durationchange","timeupdate"],this.update),this.on(this.player_,["ended"],this.update_),this.player_.liveTracker&&this.on(this.player_.liveTracker,"liveedgechange",this.update),this.updateInterval=null,this.enableIntervalHandler_=e=>this.enableInterval_(e),this.disableIntervalHandler_=e=>this.disableInterval_(e),this.on(this.player_,["playing"],this.enableIntervalHandler_),this.on(this.player_,["ended","pause","waiting"],this.disableIntervalHandler_),"hidden"in Fe&&"visibilityState"in Fe&&this.on(Fe,"visibilitychange",this.toggleVisibility_)}toggleVisibility_(e){Fe.visibilityState==="hidden"?(this.cancelNamedAnimationFrame("SeekBar#update"),this.cancelNamedAnimationFrame("Slider#update"),this.disableInterval_(e)):(!this.player_.ended()&&!this.player_.paused()&&this.enableInterval_(),this.update())}enableInterval_(){this.updateInterval||(this.updateInterval=this.setInterval(this.update,Yo))}disableInterval_(e){this.player_.liveTracker&&this.player_.liveTracker.isLive()&&e&&e.type!=="ended"||this.updateInterval&&(this.clearInterval(this.updateInterval),this.updateInterval=null)}createEl(){return super.createEl("div",{className:"vjs-progress-holder"},{"aria-label":this.localize("Progress Bar")})}update(e){if(Fe.visibilityState==="hidden")return;const t=super.update();return this.requestNamedAnimationFrame("SeekBar#update",()=>{const n=this.player_.ended()?this.player_.duration():this.getCurrentTime_(),i=this.player_.liveTracker;let s=this.player_.duration();i&&i.isLive()&&(s=this.player_.liveTracker.liveCurrentTime()),this.percent_!==t&&(this.el_.setAttribute("aria-valuenow",(t*100).toFixed(2)),this.percent_=t),(this.currentTime_!==n||this.duration_!==s)&&(this.el_.setAttribute("aria-valuetext",this.localize("progress bar timing: currentTime={1} duration={2}",[Gh(n,s),Gh(s,s)],"{1} of {2}")),this.currentTime_=n,this.duration_=s),this.bar&&this.bar.update(Ip(this.el()),this.getProgress())}),t}userSeek_(e){this.player_.liveTracker&&this.player_.liveTracker.isLive()&&this.player_.liveTracker.nextSeekedFromUser(),this.player_.currentTime(e)}getCurrentTime_(){return this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime()}getPercent(){const e=this.getCurrentTime_();let t;const n=this.player_.liveTracker;return n&&n.isLive()?(t=(e-n.seekableStart())/n.liveWindow(),n.atLiveEdge()&&(t=1)):t=e/this.player_.duration(),t}handleMouseDown(e){rg(e)&&(e.stopPropagation(),this.videoWasPlaying=!this.player_.paused(),this.player_.pause(),super.handleMouseDown(e))}handleMouseMove(e,t=!1){if(!rg(e)||isNaN(this.player_.duration()))return;!t&&!this.player_.scrubbing()&&this.player_.scrubbing(!0);let n;const i=this.calculateDistance(e),s=this.player_.liveTracker;if(!s||!s.isLive())n=i*this.player_.duration(),n===this.player_.duration()&&(n=n-.1);else{if(i>=.99){s.seekToLiveEdge();return}const a=s.seekableStart(),o=s.liveCurrentTime();if(n=a+i*s.liveWindow(),n>=o&&(n=o),n<=a&&(n=a+.1),n===1/0)return}this.userSeek_(n),this.player_.options_.enableSmoothSeeking&&this.update()}enable(){super.enable();const e=this.getChild("mouseTimeDisplay");e&&e.show()}disable(){super.disable();const e=this.getChild("mouseTimeDisplay");e&&e.hide()}handleMouseUp(e){super.handleMouseUp(e),e&&e.stopPropagation(),this.player_.scrubbing(!1),this.player_.trigger({type:"timeupdate",target:this,manuallyTriggered:!0}),this.videoWasPlaying?lu(this.player_.play()):this.update_()}stepForward(){this.userSeek_(this.player_.currentTime()+ty)}stepBack(){this.userSeek_(this.player_.currentTime()-ty)}handleAction(e){this.player_.paused()?this.player_.play():this.player_.pause()}handleKeyDown(e){const t=this.player_.liveTracker;if(e.key===" "||e.key==="Enter")e.preventDefault(),e.stopPropagation(),this.handleAction(e);else if(e.key==="Home")e.preventDefault(),e.stopPropagation(),this.userSeek_(0);else if(e.key==="End")e.preventDefault(),e.stopPropagation(),t&&t.isLive()?this.userSeek_(t.liveCurrentTime()):this.userSeek_(this.player_.duration());else if(/^[0-9]$/.test(e.key)){e.preventDefault(),e.stopPropagation();const n=parseInt(e.key,10)*.1;t&&t.isLive()?this.userSeek_(t.seekableStart()+t.liveWindow()*n):this.userSeek_(this.player_.duration()*n)}else e.key==="PageDown"?(e.preventDefault(),e.stopPropagation(),this.userSeek_(this.player_.currentTime()-ty*qO)):e.key==="PageUp"?(e.preventDefault(),e.stopPropagation(),this.userSeek_(this.player_.currentTime()+ty*qO)):super.handleKeyDown(e)}dispose(){this.disableInterval_(),this.off(this.player_,["durationchange","timeupdate"],this.update),this.off(this.player_,["ended"],this.update_),this.player_.liveTracker&&this.off(this.player_.liveTracker,"liveedgechange",this.update),this.off(this.player_,["playing"],this.enableIntervalHandler_),this.off(this.player_,["ended","pause","waiting"],this.disableIntervalHandler_),"hidden"in Fe&&"visibilityState"in Fe&&this.off(Fe,"visibilitychange",this.toggleVisibility_),super.dispose()}};lk.prototype.options_={children:["loadProgressBar","playProgressBar"],barName:"playProgressBar"};!oa&&!Au&&lk.prototype.options_.children.splice(1,0,"mouseTimeDisplay");mt.registerComponent("SeekBar",lk);let m5=class extends mt{constructor(e,t){super(e,t),this.handleMouseMove=Iu(jn(this,this.handleMouseMove),Yo),this.throttledHandleMouseSeek=Iu(jn(this,this.handleMouseSeek),Yo),this.handleMouseUpHandler_=n=>this.handleMouseUp(n),this.handleMouseDownHandler_=n=>this.handleMouseDown(n),this.enable()}createEl(){return super.createEl("div",{className:"vjs-progress-control vjs-control"})}handleMouseMove(e){const t=this.getChild("seekBar");if(!t)return;const n=t.getChild("playProgressBar"),i=t.getChild("mouseTimeDisplay");if(!n&&!i)return;const s=t.el(),a=tg(s);let o=Xb(s,e).x;o=Mg(o,0,1),i&&i.update(a,o),n&&n.update(a,t.getProgress())}handleMouseSeek(e){const t=this.getChild("seekBar");t&&t.handleMouseMove(e)}enabled(){return this.enabled_}disable(){if(this.children().forEach(e=>e.disable&&e.disable()),!!this.enabled()&&(this.off(["mousedown","touchstart"],this.handleMouseDownHandler_),this.off(this.el_,"mousemove",this.handleMouseMove),this.removeListenersAddedOnMousedownAndTouchstart(),this.addClass("disabled"),this.enabled_=!1,this.player_.scrubbing())){const e=this.getChild("seekBar");this.player_.scrubbing(!1),e.videoWasPlaying&&lu(this.player_.play())}}enable(){this.children().forEach(e=>e.enable&&e.enable()),!this.enabled()&&(this.on(["mousedown","touchstart"],this.handleMouseDownHandler_),this.on(this.el_,"mousemove",this.handleMouseMove),this.removeClass("disabled"),this.enabled_=!0)}removeListenersAddedOnMousedownAndTouchstart(){const e=this.el_.ownerDocument;this.off(e,"mousemove",this.throttledHandleMouseSeek),this.off(e,"touchmove",this.throttledHandleMouseSeek),this.off(e,"mouseup",this.handleMouseUpHandler_),this.off(e,"touchend",this.handleMouseUpHandler_)}handleMouseDown(e){const t=this.el_.ownerDocument,n=this.getChild("seekBar");n&&n.handleMouseDown(e),this.on(t,"mousemove",this.throttledHandleMouseSeek),this.on(t,"touchmove",this.throttledHandleMouseSeek),this.on(t,"mouseup",this.handleMouseUpHandler_),this.on(t,"touchend",this.handleMouseUpHandler_)}handleMouseUp(e){const t=this.getChild("seekBar");t&&t.handleMouseUp(e),this.removeListenersAddedOnMousedownAndTouchstart()}};m5.prototype.options_={children:["seekBar"]};mt.registerComponent("ProgressControl",m5);let g5=class extends Us{constructor(e,t){super(e,t),this.setIcon("picture-in-picture-enter"),this.on(e,["enterpictureinpicture","leavepictureinpicture"],n=>this.handlePictureInPictureChange(n)),this.on(e,["disablepictureinpicturechanged","loadedmetadata"],n=>this.handlePictureInPictureEnabledChange(n)),this.on(e,["loadedmetadata","audioonlymodechange","audiopostermodechange"],()=>this.handlePictureInPictureAudioModeChange()),this.disable()}buildCSSClass(){return`vjs-picture-in-picture-control vjs-hidden ${super.buildCSSClass()}`}handlePictureInPictureAudioModeChange(){if(!(this.player_.currentType().substring(0,5)==="audio"||this.player_.audioPosterMode()||this.player_.audioOnlyMode())){this.show();return}this.player_.isInPictureInPicture()&&this.player_.exitPictureInPicture(),this.hide()}handlePictureInPictureEnabledChange(){Fe.pictureInPictureEnabled&&this.player_.disablePictureInPicture()===!1||this.player_.options_.enableDocumentPictureInPicture&&"documentPictureInPicture"in X?this.enable():this.disable()}handlePictureInPictureChange(e){this.player_.isInPictureInPicture()?(this.setIcon("picture-in-picture-exit"),this.controlText("Exit Picture-in-Picture")):(this.setIcon("picture-in-picture-enter"),this.controlText("Picture-in-Picture")),this.handlePictureInPictureEnabledChange()}handleClick(e){this.player_.isInPictureInPicture()?this.player_.exitPictureInPicture():this.player_.requestPictureInPicture()}show(){typeof Fe.exitPictureInPicture=="function"&&super.show()}};g5.prototype.controlText_="Picture-in-Picture";mt.registerComponent("PictureInPictureToggle",g5);let v5=class extends Us{constructor(e,t){super(e,t),this.setIcon("fullscreen-enter"),this.on(e,"fullscreenchange",n=>this.handleFullscreenChange(n)),Fe[e.fsApi_.fullscreenEnabled]===!1&&this.disable()}buildCSSClass(){return`vjs-fullscreen-control ${super.buildCSSClass()}`}handleFullscreenChange(e){this.player_.isFullscreen()?(this.controlText("Exit Fullscreen"),this.setIcon("fullscreen-exit")):(this.controlText("Fullscreen"),this.setIcon("fullscreen-enter"))}handleClick(e){this.player_.isFullscreen()?this.player_.exitFullscreen():this.player_.requestFullscreen()}};v5.prototype.controlText_="Fullscreen";mt.registerComponent("FullscreenToggle",v5);const Yoe=function(r,e){e.tech_&&!e.tech_.featuresVolumeControl&&r.addClass("vjs-hidden"),r.on(e,"loadstart",function(){e.tech_.featuresVolumeControl?r.removeClass("vjs-hidden"):r.addClass("vjs-hidden")})};let Qoe=class extends mt{createEl(){const e=super.createEl("div",{className:"vjs-volume-level"});return this.setIcon("circle",e),e.appendChild(super.createEl("span",{className:"vjs-control-text"})),e}};mt.registerComponent("VolumeLevel",Qoe);let Joe=class extends mt{constructor(e,t){super(e,t),this.update=Iu(jn(this,this.update),Yo)}createEl(){return super.createEl("div",{className:"vjs-volume-tooltip"},{"aria-hidden":"true"})}update(e,t,n,i){if(!n){const s=Ip(this.el_),a=Ip(this.player_.el()),o=e.width*t;if(!a||!s)return;const l=e.left-a.left+o,u=e.width-o+(a.right-e.right);let c=s.width/2;l<c?c+=c-l:u<c&&(c=u),c<0?c=0:c>s.width&&(c=s.width),this.el_.style.right=`-${c}px`}this.write(`${i}%`)}write(e){Ud(this.el_,e)}updateVolume(e,t,n,i,s){this.requestNamedAnimationFrame("VolumeLevelTooltip#updateVolume",()=>{this.update(e,t,n,i.toFixed(0)),s&&s()})}};mt.registerComponent("VolumeLevelTooltip",Joe);let y5=class extends mt{constructor(e,t){super(e,t),this.update=Iu(jn(this,this.update),Yo)}createEl(){return super.createEl("div",{className:"vjs-mouse-display"})}update(e,t,n){const i=100*t;this.getChild("volumeLevelTooltip").updateVolume(e,t,n,i,()=>{n?this.el_.style.bottom=`${e.height*t}px`:this.el_.style.left=`${e.width*t}px`})}};y5.prototype.options_={children:["volumeLevelTooltip"]};mt.registerComponent("MouseVolumeLevelDisplay",y5);let rS=class extends ak{constructor(e,t){super(e,t),this.on("slideractive",n=>this.updateLastVolume_(n)),this.on(e,"volumechange",n=>this.updateARIAAttributes(n)),e.ready(()=>this.updateARIAAttributes())}createEl(){return super.createEl("div",{className:"vjs-volume-bar vjs-slider-bar"},{"aria-label":this.localize("Volume Level"),"aria-live":"polite"})}handleMouseDown(e){rg(e)&&super.handleMouseDown(e)}handleMouseMove(e){const t=this.getChild("mouseVolumeLevelDisplay");if(t){const n=this.el(),i=Ip(n),s=this.vertical();let a=Xb(n,e);a=s?a.y:a.x,a=Mg(a,0,1),t.update(i,a,s)}rg(e)&&(this.checkMuted(),this.player_.volume(this.calculateDistance(e)))}checkMuted(){this.player_.muted()&&this.player_.muted(!1)}getPercent(){return this.player_.muted()?0:this.player_.volume()}stepForward(){this.checkMuted(),this.player_.volume(this.player_.volume()+.1)}stepBack(){this.checkMuted(),this.player_.volume(this.player_.volume()-.1)}updateARIAAttributes(e){const t=this.player_.muted()?0:this.volumeAsPercentage_();this.el_.setAttribute("aria-valuenow",t),this.el_.setAttribute("aria-valuetext",t+"%")}volumeAsPercentage_(){return Math.round(this.player_.volume()*100)}updateLastVolume_(){const e=this.player_.volume();this.one("sliderinactive",()=>{this.player_.volume()===0&&this.player_.lastVolume_(e)})}};rS.prototype.options_={children:["volumeLevel"],barName:"volumeLevel"};!oa&&!Au&&rS.prototype.options_.children.splice(0,0,"mouseVolumeLevelDisplay");rS.prototype.playerEvent="volumechange";mt.registerComponent("VolumeBar",rS);let _5=class extends mt{constructor(e,t={}){t.vertical=t.vertical||!1,(typeof t.volumeBar>"u"||Ap(t.volumeBar))&&(t.volumeBar=t.volumeBar||{},t.volumeBar.vertical=t.vertical),super(e,t),Yoe(this,e),this.throttledHandleMouseMove=Iu(jn(this,this.handleMouseMove),Yo),this.handleMouseUpHandler_=n=>this.handleMouseUp(n),this.on("mousedown",n=>this.handleMouseDown(n)),this.on("touchstart",n=>this.handleMouseDown(n)),this.on("mousemove",n=>this.handleMouseMove(n)),this.on(this.volumeBar,["focus","slideractive"],()=>{this.volumeBar.addClass("vjs-slider-active"),this.addClass("vjs-slider-active"),this.trigger("slideractive")}),this.on(this.volumeBar,["blur","sliderinactive"],()=>{this.volumeBar.removeClass("vjs-slider-active"),this.removeClass("vjs-slider-active"),this.trigger("sliderinactive")})}createEl(){let e="vjs-volume-horizontal";return this.options_.vertical&&(e="vjs-volume-vertical"),super.createEl("div",{className:`vjs-volume-control vjs-control ${e}`})}handleMouseDown(e){const t=this.el_.ownerDocument;this.on(t,"mousemove",this.throttledHandleMouseMove),this.on(t,"touchmove",this.throttledHandleMouseMove),this.on(t,"mouseup",this.handleMouseUpHandler_),this.on(t,"touchend",this.handleMouseUpHandler_)}handleMouseUp(e){const t=this.el_.ownerDocument;this.off(t,"mousemove",this.throttledHandleMouseMove),this.off(t,"touchmove",this.throttledHandleMouseMove),this.off(t,"mouseup",this.handleMouseUpHandler_),this.off(t,"touchend",this.handleMouseUpHandler_)}handleMouseMove(e){this.volumeBar.handleMouseMove(e)}};_5.prototype.options_={children:["volumeBar"]};mt.registerComponent("VolumeControl",_5);const Zoe=function(r,e){e.tech_&&!e.tech_.featuresMuteControl&&r.addClass("vjs-hidden"),r.on(e,"loadstart",function(){e.tech_.featuresMuteControl?r.removeClass("vjs-hidden"):r.addClass("vjs-hidden")})};let x5=class extends Us{constructor(e,t){super(e,t),Zoe(this,e),this.on(e,["loadstart","volumechange"],n=>this.update(n))}buildCSSClass(){return`vjs-mute-control ${super.buildCSSClass()}`}handleClick(e){const t=this.player_.volume(),n=this.player_.lastVolume_();if(t===0){const i=n<.1?.1:n;this.player_.volume(i),this.player_.muted(!1)}else this.player_.muted(!this.player_.muted())}update(e){this.updateIcon_(),this.updateControlText_()}updateIcon_(){const e=this.player_.volume();let t=3;this.setIcon("volume-high"),oa&&this.player_.tech_&&this.player_.tech_.el_&&this.player_.muted(this.player_.tech_.el_.muted),e===0||this.player_.muted()?(this.setIcon("volume-mute"),t=0):e<.33?(this.setIcon("volume-low"),t=1):e<.67&&(this.setIcon("volume-medium"),t=2),Gb(this.el_,[0,1,2,3].reduce((n,i)=>n+`${i?" ":""}vjs-vol-${i}`,"")),Lh(this.el_,`vjs-vol-${t}`)}updateControlText_(){const t=this.player_.muted()||this.player_.volume()===0?"Unmute":"Mute";this.controlText()!==t&&this.controlText(t)}};x5.prototype.controlText_="Mute";mt.registerComponent("MuteToggle",x5);let b5=class extends mt{constructor(e,t={}){typeof t.inline<"u"?t.inline=t.inline:t.inline=!0,(typeof t.volumeControl>"u"||Ap(t.volumeControl))&&(t.volumeControl=t.volumeControl||{},t.volumeControl.vertical=!t.inline),super(e,t),this.handleKeyPressHandler_=n=>this.handleKeyPress(n),this.on(e,["loadstart"],n=>this.volumePanelState_(n)),this.on(this.muteToggle,"keyup",n=>this.handleKeyPress(n)),this.on(this.volumeControl,"keyup",n=>this.handleVolumeControlKeyUp(n)),this.on("keydown",n=>this.handleKeyPress(n)),this.on("mouseover",n=>this.handleMouseOver(n)),this.on("mouseout",n=>this.handleMouseOut(n)),this.on(this.volumeControl,["slideractive"],this.sliderActive_),this.on(this.volumeControl,["sliderinactive"],this.sliderInactive_)}sliderActive_(){this.addClass("vjs-slider-active")}sliderInactive_(){this.removeClass("vjs-slider-active")}volumePanelState_(){this.volumeControl.hasClass("vjs-hidden")&&this.muteToggle.hasClass("vjs-hidden")&&this.addClass("vjs-hidden"),this.volumeControl.hasClass("vjs-hidden")&&!this.muteToggle.hasClass("vjs-hidden")&&this.addClass("vjs-mute-toggle-only")}createEl(){let e="vjs-volume-panel-horizontal";return this.options_.inline||(e="vjs-volume-panel-vertical"),super.createEl("div",{className:`vjs-volume-panel vjs-control ${e}`})}dispose(){this.handleMouseOut(),super.dispose()}handleVolumeControlKeyUp(e){e.key==="Escape"&&this.muteToggle.focus()}handleMouseOver(e){this.addClass("vjs-hover"),po(Fe,"keyup",this.handleKeyPressHandler_)}handleMouseOut(e){this.removeClass("vjs-hover"),Ns(Fe,"keyup",this.handleKeyPressHandler_)}handleKeyPress(e){e.key==="Escape"&&this.handleMouseOut()}};b5.prototype.options_={children:["muteToggle","volumeControl"]};mt.registerComponent("VolumePanel",b5);class S5 extends Us{constructor(e,t){super(e,t),this.validOptions=[5,10,30],this.skipTime=this.getSkipForwardTime(),this.skipTime&&this.validOptions.includes(this.skipTime)?(this.setIcon(`forward-${this.skipTime}`),this.controlText(this.localize("Skip forward {1} seconds",[this.skipTime.toLocaleString(e.language())])),this.show()):this.hide()}getSkipForwardTime(){const e=this.options_.playerOptions;return e.controlBar&&e.controlBar.skipButtons&&e.controlBar.skipButtons.forward}buildCSSClass(){return`vjs-skip-forward-${this.getSkipForwardTime()} ${super.buildCSSClass()}`}handleClick(e){if(isNaN(this.player_.duration()))return;const t=this.player_.currentTime(),n=this.player_.liveTracker,i=n&&n.isLive()?n.seekableEnd():this.player_.duration();let s;t+this.skipTime<=i?s=t+this.skipTime:s=i,this.player_.currentTime(s)}handleLanguagechange(){this.controlText(this.localize("Skip forward {1} seconds",[this.skipTime]))}}S5.prototype.controlText_="Skip Forward";mt.registerComponent("SkipForward",S5);class T5 extends Us{constructor(e,t){super(e,t),this.validOptions=[5,10,30],this.skipTime=this.getSkipBackwardTime(),this.skipTime&&this.validOptions.includes(this.skipTime)?(this.setIcon(`replay-${this.skipTime}`),this.controlText(this.localize("Skip backward {1} seconds",[this.skipTime.toLocaleString(e.language())])),this.show()):this.hide()}getSkipBackwardTime(){const e=this.options_.playerOptions;return e.controlBar&&e.controlBar.skipButtons&&e.controlBar.skipButtons.backward}buildCSSClass(){return`vjs-skip-backward-${this.getSkipBackwardTime()} ${super.buildCSSClass()}`}handleClick(e){const t=this.player_.currentTime(),n=this.player_.liveTracker,i=n&&n.isLive()&&n.seekableStart();let s;i&&t-this.skipTime<=i?s=i:t>=this.skipTime?s=t-this.skipTime:s=0,this.player_.currentTime(s)}handleLanguagechange(){this.controlText(this.localize("Skip backward {1} seconds",[this.skipTime]))}}T5.prototype.controlText_="Skip Backward";mt.registerComponent("SkipBackward",T5);let C5=class extends mt{constructor(e,t){super(e,t),t&&(this.menuButton_=t.menuButton),this.focusedChild_=-1,this.on("keydown",n=>this.handleKeyDown(n)),this.boundHandleBlur_=n=>this.handleBlur(n),this.boundHandleTapClick_=n=>this.handleTapClick(n)}addEventListenerForItem(e){e instanceof mt&&(this.on(e,"blur",this.boundHandleBlur_),this.on(e,["tap","click"],this.boundHandleTapClick_))}removeEventListenerForItem(e){e instanceof mt&&(this.off(e,"blur",this.boundHandleBlur_),this.off(e,["tap","click"],this.boundHandleTapClick_))}removeChild(e){typeof e=="string"&&(e=this.getChild(e)),this.removeEventListenerForItem(e),super.removeChild(e)}addItem(e){const t=this.addChild(e);t&&this.addEventListenerForItem(t)}createEl(){const e=this.options_.contentElType||"ul";this.contentEl_=Er(e,{className:"vjs-menu-content"}),this.contentEl_.setAttribute("role","menu");const t=super.createEl("div",{append:this.contentEl_,className:"vjs-menu"});return t.appendChild(this.contentEl_),po(t,"click",function(n){n.preventDefault(),n.stopImmediatePropagation()}),t}dispose(){this.contentEl_=null,this.boundHandleBlur_=null,this.boundHandleTapClick_=null,super.dispose()}handleBlur(e){const t=e.relatedTarget||Fe.activeElement;if(!this.children().some(n=>n.el()===t)){const n=this.menuButton_;n&&n.buttonPressed_&&t!==n.el().firstChild&&n.unpressButton()}}handleTapClick(e){if(this.menuButton_){this.menuButton_.unpressButton();const t=this.children();if(!Array.isArray(t))return;const n=t.filter(i=>i.el()===e.target)[0];if(!n)return;n.name()!=="CaptionSettingsMenuItem"&&this.menuButton_.focus()}}handleKeyDown(e){e.key==="ArrowLeft"||e.key==="ArrowDown"?(e.preventDefault(),e.stopPropagation(),this.stepForward()):(e.key==="ArrowRight"||e.key==="ArrowUp")&&(e.preventDefault(),e.stopPropagation(),this.stepBack())}stepForward(){let e=0;this.focusedChild_!==void 0&&(e=this.focusedChild_+1),this.focus(e)}stepBack(){let e=0;this.focusedChild_!==void 0&&(e=this.focusedChild_-1),this.focus(e)}focus(e=0){const t=this.children().slice();t.length&&t[0].hasClass("vjs-menu-title")&&t.shift(),t.length>0&&(e<0?e=0:e>=t.length&&(e=t.length-1),this.focusedChild_=e,t[e].el_.focus())}};mt.registerComponent("Menu",C5);let uk=class extends mt{constructor(e,t={}){super(e,t),this.menuButton_=new Us(e,t),this.menuButton_.controlText(this.controlText_),this.menuButton_.el_.setAttribute("aria-haspopup","true");const n=Us.prototype.buildCSSClass();this.menuButton_.el_.className=this.buildCSSClass()+" "+n,this.menuButton_.removeClass("vjs-control"),this.addChild(this.menuButton_),this.update(),this.enabled_=!0;const i=s=>this.handleClick(s);this.handleMenuKeyUp_=s=>this.handleMenuKeyUp(s),this.on(this.menuButton_,"tap",i),this.on(this.menuButton_,"click",i),this.on(this.menuButton_,"keydown",s=>this.handleKeyDown(s)),this.on(this.menuButton_,"mouseenter",()=>{this.addClass("vjs-hover"),this.menu.show(),po(Fe,"keyup",this.handleMenuKeyUp_)}),this.on("mouseleave",s=>this.handleMouseLeave(s)),this.on("keydown",s=>this.handleSubmenuKeyDown(s))}update(){const e=this.createMenu();this.menu&&(this.menu.dispose(),this.removeChild(this.menu)),this.menu=e,this.addChild(e),this.buttonPressed_=!1,this.menuButton_.el_.setAttribute("aria-expanded","false"),this.items&&this.items.length<=this.hideThreshold_?(this.hide(),this.menu.contentEl_.removeAttribute("role")):(this.show(),this.menu.contentEl_.setAttribute("role","menu"))}createMenu(){const e=new C5(this.player_,{menuButton:this});if(this.hideThreshold_=0,this.options_.title){const t=Er("li",{className:"vjs-menu-title",textContent:ui(this.options_.title),tabIndex:-1}),n=new mt(this.player_,{el:t});e.addItem(n)}if(this.items=this.createItems(),this.items)for(let t=0;t<this.items.length;t++)e.addItem(this.items[t]);return e}createItems(){}createEl(){return super.createEl("div",{className:this.buildWrapperCSSClass()},{})}setIcon(e){super.setIcon(e,this.menuButton_.el_)}buildWrapperCSSClass(){let e="vjs-menu-button";this.options_.inline===!0?e+="-inline":e+="-popup";const t=Us.prototype.buildCSSClass();return`vjs-menu-button ${e} ${t} ${super.buildCSSClass()}`}buildCSSClass(){let e="vjs-menu-button";return this.options_.inline===!0?e+="-inline":e+="-popup",`vjs-menu-button ${e} ${super.buildCSSClass()}`}controlText(e,t=this.menuButton_.el()){return this.menuButton_.controlText(e,t)}dispose(){this.handleMouseLeave(),super.dispose()}handleClick(e){this.buttonPressed_?this.unpressButton():this.pressButton()}handleMouseLeave(e){this.removeClass("vjs-hover"),Ns(Fe,"keyup",this.handleMenuKeyUp_)}focus(){this.menuButton_.focus()}blur(){this.menuButton_.blur()}handleKeyDown(e){e.key==="Esc"||e.key==="Tab"?(this.buttonPressed_&&this.unpressButton(),!e.key==="Tab"&&(e.preventDefault(),this.menuButton_.focus())):(e.key==="Up"||e.key==="Down"&&!(this.player_.options_.playerOptions.spatialNavigation&&this.player_.options_.playerOptions.spatialNavigation.enabled))&&(this.buttonPressed_||(e.preventDefault(),this.pressButton()))}handleMenuKeyUp(e){(e.key==="Esc"||e.key==="Tab")&&this.removeClass("vjs-hover")}handleSubmenuKeyPress(e){this.handleSubmenuKeyDown(e)}handleSubmenuKeyDown(e){(e.key==="Esc"||e.key==="Tab")&&(this.buttonPressed_&&this.unpressButton(),!e.key==="Tab"&&(e.preventDefault(),this.menuButton_.focus()))}pressButton(){if(this.enabled_){if(this.buttonPressed_=!0,this.menu.show(),this.menu.lockShowing(),this.menuButton_.el_.setAttribute("aria-expanded","true"),oa&&ON())return;this.menu.focus()}}unpressButton(){this.enabled_&&(this.buttonPressed_=!1,this.menu.unlockShowing(),this.menu.hide(),this.menuButton_.el_.setAttribute("aria-expanded","false"))}disable(){this.unpressButton(),this.enabled_=!1,this.addClass("vjs-disabled"),this.menuButton_.disable()}enable(){this.enabled_=!0,this.removeClass("vjs-disabled"),this.menuButton_.enable()}};mt.registerComponent("MenuButton",uk);let ck=class extends uk{constructor(e,t){const n=t.tracks;if(super(e,t),this.items.length<=1&&this.hide(),!n)return;const i=jn(this,this.update);n.addEventListener("removetrack",i),n.addEventListener("addtrack",i),n.addEventListener("labelchange",i),this.player_.on("ready",i),this.player_.on("dispose",function(){n.removeEventListener("removetrack",i),n.removeEventListener("addtrack",i),n.removeEventListener("labelchange",i)})}};mt.registerComponent("TrackButton",ck);let Fg=class extends tS{constructor(e,t){super(e,t),this.selectable=t.selectable,this.isSelected_=t.selected||!1,this.multiSelectable=t.multiSelectable,this.selected(this.isSelected_),this.selectable?this.multiSelectable?this.el_.setAttribute("role","menuitemcheckbox"):this.el_.setAttribute("role","menuitemradio"):this.el_.setAttribute("role","menuitem")}createEl(e,t,n){this.nonIconControl=!0;const i=super.createEl("li",Object.assign({className:"vjs-menu-item",tabIndex:-1},t),n),s=Er("span",{className:"vjs-menu-item-text",textContent:this.localize(this.options_.label)});return this.player_.options_.experimentalSvgIcons?i.appendChild(s):i.replaceChild(s,i.querySelector(".vjs-icon-placeholder")),i}handleKeyDown(e){["Tab","Escape","ArrowUp","ArrowLeft","ArrowRight","ArrowDown"].includes(e.key)||super.handleKeyDown(e)}handleClick(e){this.selected(!0)}selected(e){this.selectable&&(e?(this.addClass("vjs-selected"),this.el_.setAttribute("aria-checked","true"),this.controlText(", selected"),this.isSelected_=!0):(this.removeClass("vjs-selected"),this.el_.setAttribute("aria-checked","false"),this.controlText(""),this.isSelected_=!1))}};mt.registerComponent("MenuItem",Fg);let Bg=class extends Fg{constructor(e,t){const n=t.track,i=e.textTracks();t.label=n.label||n.language||"Unknown",t.selected=n.mode==="showing",super(e,t),this.track=n,this.kinds=(t.kinds||[t.kind||this.track.kind]).filter(Boolean);const s=(...o)=>{this.handleTracksChange.apply(this,o)},a=(...o)=>{this.handleSelectedLanguageChange.apply(this,o)};if(e.on(["loadstart","texttrackchange"],s),i.addEventListener("change",s),i.addEventListener("selectedlanguagechange",a),this.on("dispose",function(){e.off(["loadstart","texttrackchange"],s),i.removeEventListener("change",s),i.removeEventListener("selectedlanguagechange",a)}),i.onchange===void 0){let o;this.on(["tap","click"],function(){if(typeof X.Event!="object")try{o=new X.Event("change")}catch{}o||(o=Fe.createEvent("Event"),o.initEvent("change",!0,!0)),i.dispatchEvent(o)})}this.handleTracksChange()}handleClick(e){const t=this.track,n=this.player_.textTracks();if(super.handleClick(e),!!n)for(let i=0;i<n.length;i++){const s=n[i];this.kinds.indexOf(s.kind)!==-1&&(s===t?s.mode!=="showing"&&(s.mode="showing"):s.mode!=="disabled"&&(s.mode="disabled"))}}handleTracksChange(e){const t=this.track.mode==="showing";t!==this.isSelected_&&this.selected(t)}handleSelectedLanguageChange(e){if(this.track.mode==="showing"){const t=this.player_.cache_.selectedLanguage;if(t&&t.enabled&&t.language===this.track.language&&t.kind!==this.track.kind)return;this.player_.cache_.selectedLanguage={enabled:!0,language:this.track.language,kind:this.track.kind}}}dispose(){this.track=null,super.dispose()}};mt.registerComponent("TextTrackMenuItem",Bg);let w5=class extends Bg{constructor(e,t){t.track={player:e,kind:t.kind,kinds:t.kinds,default:!1,mode:"disabled"},t.kinds||(t.kinds=[t.kind]),t.label?t.track.label=t.label:t.track.label=t.kinds.join(" and ")+" off",t.selectable=!0,t.multiSelectable=!1,super(e,t)}handleTracksChange(e){const t=this.player().textTracks();let n=!0;for(let i=0,s=t.length;i<s;i++){const a=t[i];if(this.options_.kinds.indexOf(a.kind)>-1&&a.mode==="showing"){n=!1;break}}n!==this.isSelected_&&this.selected(n)}handleSelectedLanguageChange(e){const t=this.player().textTracks();let n=!0;for(let i=0,s=t.length;i<s;i++){const a=t[i];if(["captions","descriptions","subtitles"].indexOf(a.kind)>-1&&a.mode==="showing"){n=!1;break}}n&&(this.player_.cache_.selectedLanguage={enabled:!1})}handleLanguagechange(){this.$(".vjs-menu-item-text").textContent=this.player_.localize(this.options_.label),super.handleLanguagechange()}};mt.registerComponent("OffTextTrackMenuItem",w5);let nm=class extends ck{constructor(e,t={}){t.tracks=e.textTracks(),super(e,t)}createItems(e=[],t=Bg){let n;this.label_&&(n=`${this.label_} off`),e.push(new w5(this.player_,{kinds:this.kinds_,kind:this.kind_,label:n})),this.hideThreshold_+=1;const i=this.player_.textTracks();Array.isArray(this.kinds_)||(this.kinds_=[this.kind_]);for(let s=0;s<i.length;s++){const a=i[s];if(this.kinds_.indexOf(a.kind)>-1){const o=new t(this.player_,{track:a,kinds:this.kinds_,kind:this.kind_,selectable:!0,multiSelectable:!1});o.addClass(`vjs-${a.kind}-menu-item`),e.push(o)}}return e}};mt.registerComponent("TextTrackButton",nm);let E5=class extends Fg{constructor(e,t){const n=t.track,i=t.cue,s=e.currentTime();t.selectable=!0,t.multiSelectable=!1,t.label=i.text,t.selected=i.startTime<=s&&s<i.endTime,super(e,t),this.track=n,this.cue=i}handleClick(e){super.handleClick(),this.player_.currentTime(this.cue.startTime)}};mt.registerComponent("ChaptersTrackMenuItem",E5);let dk=class extends nm{constructor(e,t,n){super(e,t,n),this.setIcon("chapters"),this.selectCurrentItem_=()=>{this.items.forEach(i=>{i.selected(this.track_.activeCues[0]===i.cue)})}}buildCSSClass(){return`vjs-chapters-button ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-chapters-button ${super.buildWrapperCSSClass()}`}update(e){if(e&&e.track&&e.track.kind!=="chapters")return;const t=this.findChaptersTrack();t!==this.track_?(this.setTrack(t),super.update()):(!this.items||t&&t.cues&&t.cues.length!==this.items.length)&&super.update()}setTrack(e){if(this.track_!==e){if(this.updateHandler_||(this.updateHandler_=this.update.bind(this)),this.track_){const t=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_);t&&t.removeEventListener("load",this.updateHandler_),this.track_.removeEventListener("cuechange",this.selectCurrentItem_),this.track_=null}if(this.track_=e,this.track_){this.track_.mode="hidden";const t=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_);t&&t.addEventListener("load",this.updateHandler_),this.track_.addEventListener("cuechange",this.selectCurrentItem_)}}}findChaptersTrack(){const e=this.player_.textTracks()||[];for(let t=e.length-1;t>=0;t--){const n=e[t];if(n.kind===this.kind_)return n}}getMenuCaption(){return this.track_&&this.track_.label?this.track_.label:this.localize(ui(this.kind_))}createMenu(){return this.options_.title=this.getMenuCaption(),super.createMenu()}createItems(){const e=[];if(!this.track_)return e;const t=this.track_.cues;if(!t)return e;for(let n=0,i=t.length;n<i;n++){const s=t[n],a=new E5(this.player_,{track:this.track_,cue:s});e.push(a)}return e}};dk.prototype.kind_="chapters";dk.prototype.controlText_="Chapters";mt.registerComponent("ChaptersButton",dk);let hk=class extends nm{constructor(e,t,n){super(e,t,n),this.setIcon("audio-description");const i=e.textTracks(),s=jn(this,this.handleTracksChange);i.addEventListener("change",s),this.on("dispose",function(){i.removeEventListener("change",s)})}handleTracksChange(e){const t=this.player().textTracks();let n=!1;for(let i=0,s=t.length;i<s;i++){const a=t[i];if(a.kind!==this.kind_&&a.mode==="showing"){n=!0;break}}n?this.disable():this.enable()}buildCSSClass(){return`vjs-descriptions-button ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-descriptions-button ${super.buildWrapperCSSClass()}`}};hk.prototype.kind_="descriptions";hk.prototype.controlText_="Descriptions";mt.registerComponent("DescriptionsButton",hk);let fk=class extends nm{constructor(e,t,n){super(e,t,n),this.setIcon("subtitles")}buildCSSClass(){return`vjs-subtitles-button ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-subtitles-button ${super.buildWrapperCSSClass()}`}};fk.prototype.kind_="subtitles";fk.prototype.controlText_="Subtitles";mt.registerComponent("SubtitlesButton",fk);let pk=class extends Bg{constructor(e,t){t.track={player:e,kind:t.kind,label:t.kind+" settings",selectable:!1,default:!1,mode:"disabled"},t.selectable=!1,t.name="CaptionSettingsMenuItem",super(e,t),this.addClass("vjs-texttrack-settings"),this.controlText(", opens "+t.kind+" settings dialog")}handleClick(e){this.player().getChild("textTrackSettings").open()}handleLanguagechange(){this.$(".vjs-menu-item-text").textContent=this.player_.localize(this.options_.kind+" settings"),super.handleLanguagechange()}};mt.registerComponent("CaptionSettingsMenuItem",pk);let mk=class extends nm{constructor(e,t,n){super(e,t,n),this.setIcon("captions")}buildCSSClass(){return`vjs-captions-button ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-captions-button ${super.buildWrapperCSSClass()}`}createItems(){const e=[];return!(this.player().tech_&&this.player().tech_.featuresNativeTextTracks)&&this.player().getChild("textTrackSettings")&&(e.push(new pk(this.player_,{kind:this.kind_})),this.hideThreshold_+=1),super.createItems(e)}};mk.prototype.kind_="captions";mk.prototype.controlText_="Captions";mt.registerComponent("CaptionsButton",mk);let k5=class extends Bg{createEl(e,t,n){const i=super.createEl(e,t,n),s=i.querySelector(".vjs-menu-item-text");return this.options_.track.kind==="captions"&&(this.player_.options_.experimentalSvgIcons?this.setIcon("captions",i):s.appendChild(Er("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),s.appendChild(Er("span",{className:"vjs-control-text",textContent:` ${this.localize("Captions")}`}))),i}};mt.registerComponent("SubsCapsMenuItem",k5);let gk=class extends nm{constructor(e,t={}){super(e,t),this.label_="subtitles",this.setIcon("subtitles"),["en","en-us","en-ca","fr-ca"].indexOf(this.player_.language_)>-1&&(this.label_="captions",this.setIcon("captions")),this.menuButton_.controlText(ui(this.label_))}buildCSSClass(){return`vjs-subs-caps-button ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-subs-caps-button ${super.buildWrapperCSSClass()}`}createItems(){let e=[];return!(this.player().tech_&&this.player().tech_.featuresNativeTextTracks)&&this.player().getChild("textTrackSettings")&&(e.push(new pk(this.player_,{kind:this.label_})),this.hideThreshold_+=1),e=super.createItems(e,k5),e}};gk.prototype.kinds_=["captions","subtitles"];gk.prototype.controlText_="Subtitles";mt.registerComponent("SubsCapsButton",gk);let A5=class extends Fg{constructor(e,t){const n=t.track,i=e.audioTracks();t.label=n.label||n.language||"Unknown",t.selected=n.enabled,super(e,t),this.track=n,this.addClass(`vjs-${n.kind}-menu-item`);const s=(...a)=>{this.handleTracksChange.apply(this,a)};i.addEventListener("change",s),this.on("dispose",()=>{i.removeEventListener("change",s)})}createEl(e,t,n){const i=super.createEl(e,t,n),s=i.querySelector(".vjs-menu-item-text");return["main-desc","descriptions"].indexOf(this.options_.track.kind)>=0&&(s.appendChild(Er("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),s.appendChild(Er("span",{className:"vjs-control-text",textContent:" "+this.localize("Descriptions")}))),i}handleClick(e){if(super.handleClick(e),this.track.enabled=!0,this.player_.tech_.featuresNativeAudioTracks){const t=this.player_.audioTracks();for(let n=0;n<t.length;n++){const i=t[n];i!==this.track&&(i.enabled=i===this.track)}}}handleTracksChange(e){this.selected(this.track.enabled)}};mt.registerComponent("AudioTrackMenuItem",A5);let D5=class extends ck{constructor(e,t={}){t.tracks=e.audioTracks(),super(e,t),this.setIcon("audio")}buildCSSClass(){return`vjs-audio-button ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-audio-button ${super.buildWrapperCSSClass()}`}createItems(e=[]){this.hideThreshold_=1;const t=this.player_.audioTracks();for(let n=0;n<t.length;n++){const i=t[n];e.push(new A5(this.player_,{track:i,selectable:!0,multiSelectable:!1}))}return e}};D5.prototype.controlText_="Audio Track";mt.registerComponent("AudioTrackButton",D5);let vk=class extends Fg{constructor(e,t){const n=t.rate,i=parseFloat(n,10);t.label=n,t.selected=i===e.playbackRate(),t.selectable=!0,t.multiSelectable=!1,super(e,t),this.label=n,this.rate=i,this.on(e,"ratechange",s=>this.update(s))}handleClick(e){super.handleClick(),this.player().playbackRate(this.rate)}update(e){this.selected(this.player().playbackRate()===this.rate)}};vk.prototype.contentElType="button";mt.registerComponent("PlaybackRateMenuItem",vk);let I5=class extends uk{constructor(e,t){super(e,t),this.menuButton_.el_.setAttribute("aria-describedby",this.labelElId_),this.updateVisibility(),this.updateLabel(),this.on(e,"loadstart",n=>this.updateVisibility(n)),this.on(e,"ratechange",n=>this.updateLabel(n)),this.on(e,"playbackrateschange",n=>this.handlePlaybackRateschange(n))}createEl(){const e=super.createEl();return this.labelElId_="vjs-playback-rate-value-label-"+this.id_,this.labelEl_=Er("div",{className:"vjs-playback-rate-value",id:this.labelElId_,textContent:"1x"}),e.appendChild(this.labelEl_),e}dispose(){this.labelEl_=null,super.dispose()}buildCSSClass(){return`vjs-playback-rate ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-playback-rate ${super.buildWrapperCSSClass()}`}createItems(){const e=this.playbackRates(),t=[];for(let n=e.length-1;n>=0;n--)t.push(new vk(this.player(),{rate:e[n]+"x"}));return t}handlePlaybackRateschange(e){this.update()}playbackRates(){const e=this.player();return e.playbackRates&&e.playbackRates()||[]}playbackRateSupported(){return this.player().tech_&&this.player().tech_.featuresPlaybackRate&&this.playbackRates()&&this.playbackRates().length>0}updateVisibility(e){this.playbackRateSupported()?this.removeClass("vjs-hidden"):this.addClass("vjs-hidden")}updateLabel(e){this.playbackRateSupported()&&(this.labelEl_.textContent=this.player().playbackRate()+"x")}};I5.prototype.controlText_="Playback Rate";mt.registerComponent("PlaybackRateMenuButton",I5);let P5=class extends mt{buildCSSClass(){return`vjs-spacer ${super.buildCSSClass()}`}createEl(e="div",t={},n={}){return t.className||(t.className=this.buildCSSClass()),super.createEl(e,t,n)}};mt.registerComponent("Spacer",P5);let ele=class extends P5{buildCSSClass(){return`vjs-custom-control-spacer ${super.buildCSSClass()}`}createEl(){return super.createEl("div",{className:this.buildCSSClass(),textContent:""})}};mt.registerComponent("CustomControlSpacer",ele);let R5=class extends mt{createEl(){return super.createEl("div",{className:"vjs-control-bar",dir:"ltr"})}};R5.prototype.options_={children:["playToggle","skipBackward","skipForward","volumePanel","currentTimeDisplay","timeDivider","durationDisplay","progressControl","liveDisplay","seekToLive","remainingTimeDisplay","customControlSpacer","playbackRateMenuButton","chaptersButton","descriptionsButton","subsCapsButton","audioTrackButton","pictureInPictureToggle","fullscreenToggle"]};mt.registerComponent("ControlBar",R5);let L5=class extends em{constructor(e,t){super(e,t),this.on(e,"error",n=>{this.open(n)})}buildCSSClass(){return`vjs-error-display ${super.buildCSSClass()}`}content(){const e=this.player().error();return e?this.localize(e.message):""}};L5.prototype.options_=Object.assign({},em.prototype.options_,{pauseOnOpen:!1,fillAlways:!0,temporary:!1,uncloseable:!0});mt.registerComponent("ErrorDisplay",L5);class O5 extends mt{constructor(e,t={}){super(e,t),this.el_.setAttribute("aria-labelledby",this.selectLabelledbyIds)}createEl(){return this.selectLabelledbyIds=[this.options_.legendId,this.options_.labelId].join(" ").trim(),Er("select",{id:this.options_.id},{},this.options_.SelectOptions.map(t=>{const n=(this.options_.labelId?this.options_.labelId:`vjs-track-option-${Xo()}`)+"-"+t[1].replace(/\W+/g,""),i=Er("option",{id:n,value:this.localize(t[0]),textContent:t[1]});return i.setAttribute("aria-labelledby",`${this.selectLabelledbyIds} ${n}`),i}))}}mt.registerComponent("TextTrackSelect",O5);class Mh extends mt{constructor(e,t={}){super(e,t);const n=Er("legend",{textContent:this.localize(this.options_.legendText),id:this.options_.legendId});this.el().appendChild(n);const i=this.options_.selects;for(const s of i){const a=this.options_.selectConfigs[s],o=a.className,l=a.id.replace("%s",this.options_.id_);let u=null;const c=`vjs_select_${Xo()}`;if(this.options_.type==="colors"){u=Er("span",{className:o});const m=Er("label",{id:l,className:"vjs-label",textContent:a.label});m.setAttribute("for",c),u.appendChild(m)}const h=new O5(e,{SelectOptions:a.options,legendId:this.options_.legendId,id:c,labelId:l});this.addChild(h),this.options_.type==="colors"&&(u.appendChild(h.el()),this.el().appendChild(u))}}createEl(){return Er("fieldset",{className:this.options_.className})}}mt.registerComponent("TextTrackFieldset",Mh);class M5 extends mt{constructor(e,t={}){super(e,t);const n=this.options_.textTrackComponentid,i=new Mh(e,{id_:n,legendId:`captions-text-legend-${n}`,legendText:this.localize("Text"),className:"vjs-fg vjs-track-setting",selects:this.options_.fieldSets[0],selectConfigs:this.options_.selectConfigs,type:"colors"});this.addChild(i);const s=new Mh(e,{id_:n,legendId:`captions-background-${n}`,legendText:this.localize("Text Background"),className:"vjs-bg vjs-track-setting",selects:this.options_.fieldSets[1],selectConfigs:this.options_.selectConfigs,type:"colors"});this.addChild(s);const a=new Mh(e,{id_:n,legendId:`captions-window-${n}`,legendText:this.localize("Caption Area Background"),className:"vjs-window vjs-track-setting",selects:this.options_.fieldSets[2],selectConfigs:this.options_.selectConfigs,type:"colors"});this.addChild(a)}createEl(){return Er("div",{className:"vjs-track-settings-colors"})}}mt.registerComponent("TextTrackSettingsColors",M5);class F5 extends mt{constructor(e,t={}){super(e,t);const n=this.options_.textTrackComponentid,i=new Mh(e,{id_:n,legendId:`captions-font-size-${n}`,legendText:"Font Size",className:"vjs-font-percent vjs-track-setting",selects:this.options_.fieldSets[0],selectConfigs:this.options_.selectConfigs,type:"font"});this.addChild(i);const s=new Mh(e,{id_:n,legendId:`captions-edge-style-${n}`,legendText:this.localize("Text Edge Style"),className:"vjs-edge-style vjs-track-setting",selects:this.options_.fieldSets[1],selectConfigs:this.options_.selectConfigs,type:"font"});this.addChild(s);const a=new Mh(e,{id_:n,legendId:`captions-font-family-${n}`,legendText:this.localize("Font Family"),className:"vjs-font-family vjs-track-setting",selects:this.options_.fieldSets[2],selectConfigs:this.options_.selectConfigs,type:"font"});this.addChild(a)}createEl(){return Er("div",{className:"vjs-track-settings-font"})}}mt.registerComponent("TextTrackSettingsFont",F5);class B5 extends mt{constructor(e,t={}){super(e,t);const n=this.localize("restore all settings to the default values"),i=new Us(e,{controlText:n,className:"vjs-default-button"});i.el().classList.remove("vjs-control","vjs-button"),i.el().textContent=this.localize("Reset"),this.addChild(i);const s=new Us(e,{controlText:n,className:"vjs-done-button"});s.el().classList.remove("vjs-control","vjs-button"),s.el().textContent=this.localize("Done"),this.addChild(s)}createEl(){return Er("div",{className:"vjs-track-settings-controls"})}}mt.registerComponent("TrackSettingsControls",B5);const V1="vjs-text-track-settings",GO=["#000","Black"],KO=["#00F","Blue"],XO=["#0FF","Cyan"],YO=["#0F0","Green"],QO=["#F0F","Magenta"],JO=["#F00","Red"],ZO=["#FFF","White"],eM=["#FF0","Yellow"],W1=["1","Opaque"],q1=["0.5","Semi-Transparent"],tM=["0","Transparent"],gd={backgroundColor:{selector:".vjs-bg-color > select",id:"captions-background-color-%s",label:"Color",options:[GO,ZO,JO,YO,KO,eM,QO,XO],className:"vjs-bg-color"},backgroundOpacity:{selector:".vjs-bg-opacity > select",id:"captions-background-opacity-%s",label:"Opacity",options:[W1,q1,tM],className:"vjs-bg-opacity vjs-opacity"},color:{selector:".vjs-text-color > select",id:"captions-foreground-color-%s",label:"Color",options:[ZO,GO,JO,YO,KO,eM,QO,XO],className:"vjs-text-color"},edgeStyle:{selector:".vjs-edge-style > select",id:"",label:"Text Edge Style",options:[["none","None"],["raised","Raised"],["depressed","Depressed"],["uniform","Uniform"],["dropshadow","Drop shadow"]]},fontFamily:{selector:".vjs-font-family > select",id:"",label:"Font Family",options:[["proportionalSansSerif","Proportional Sans-Serif"],["monospaceSansSerif","Monospace Sans-Serif"],["proportionalSerif","Proportional Serif"],["monospaceSerif","Monospace Serif"],["casual","Casual"],["script","Script"],["small-caps","Small Caps"]]},fontPercent:{selector:".vjs-font-percent > select",id:"",label:"Font Size",options:[["0.50","50%"],["0.75","75%"],["1.00","100%"],["1.25","125%"],["1.50","150%"],["1.75","175%"],["2.00","200%"],["3.00","300%"],["4.00","400%"]],default:2,parser:r=>r==="1.00"?null:Number(r)},textOpacity:{selector:".vjs-text-opacity > select",id:"captions-foreground-opacity-%s",label:"Opacity",options:[W1,q1],className:"vjs-text-opacity vjs-opacity"},windowColor:{selector:".vjs-window-color > select",id:"captions-window-color-%s",label:"Color",className:"vjs-window-color"},windowOpacity:{selector:".vjs-window-opacity > select",id:"captions-window-opacity-%s",label:"Opacity",options:[tM,q1,W1],className:"vjs-window-opacity vjs-opacity"}};gd.windowColor.options=gd.backgroundColor.options;function N5(r,e){if(e&&(r=e(r)),r&&r!=="none")return r}function tle(r,e){const t=r.options[r.options.selectedIndex].value;return N5(t,e)}function rle(r,e,t){if(e){for(let n=0;n<r.options.length;n++)if(N5(r.options[n].value,t)===e){r.selectedIndex=n;break}}}let nle=class extends em{constructor(e,t){t.temporary=!1,super(e,t),this.updateDisplay=this.updateDisplay.bind(this),this.fill(),this.hasBeenOpened_=this.hasBeenFilled_=!0,this.renderModalComponents(e),this.endDialog=Er("p",{className:"vjs-control-text",textContent:this.localize("End of dialog window.")}),this.el().appendChild(this.endDialog),this.setDefaults(),t.persistTextTrackSettings===void 0&&(this.options_.persistTextTrackSettings=this.options_.playerOptions.persistTextTrackSettings),this.bindFunctionsToSelectsAndButtons(),this.options_.persistTextTrackSettings&&this.restoreSettings()}renderModalComponents(e){const t=new M5(e,{textTrackComponentid:this.id_,selectConfigs:gd,fieldSets:[["color","textOpacity"],["backgroundColor","backgroundOpacity"],["windowColor","windowOpacity"]]});this.addChild(t);const n=new F5(e,{textTrackComponentid:this.id_,selectConfigs:gd,fieldSets:[["fontPercent"],["edgeStyle"],["fontFamily"]]});this.addChild(n);const i=new B5(e);this.addChild(i)}bindFunctionsToSelectsAndButtons(){this.on(this.$(".vjs-done-button"),["click","tap"],()=>{this.saveSettings(),this.close()}),this.on(this.$(".vjs-default-button"),["click","tap"],()=>{this.setDefaults(),this.updateDisplay()}),op(gd,e=>{this.on(this.$(e.selector),"change",this.updateDisplay)})}dispose(){this.endDialog=null,super.dispose()}label(){return this.localize("Caption Settings Dialog")}description(){return this.localize("Beginning of dialog window. Escape will cancel and close the window.")}buildCSSClass(){return super.buildCSSClass()+" vjs-text-track-settings"}getValues(){return kN(gd,(e,t,n)=>{const i=tle(this.$(t.selector),t.parser);return i!==void 0&&(e[n]=i),e},{})}setValues(e){op(gd,(t,n)=>{rle(this.$(t.selector),e[n],t.parser)})}setDefaults(){op(gd,e=>{const t=e.hasOwnProperty("default")?e.default:0;this.$(e.selector).selectedIndex=t})}restoreSettings(){let e;try{e=JSON.parse(X.localStorage.getItem(V1))}catch(t){Kr.warn(t)}e&&this.setValues(e)}saveSettings(){if(!this.options_.persistTextTrackSettings)return;const e=this.getValues();try{Object.keys(e).length?X.localStorage.setItem(V1,JSON.stringify(e)):X.localStorage.removeItem(V1)}catch(t){Kr.warn(t)}}updateDisplay(){const e=this.player_.getChild("textTrackDisplay");e&&e.updateDisplay()}handleLanguagechange(){this.fill(),this.renderModalComponents(this.player_),this.bindFunctionsToSelectsAndButtons()}};mt.registerComponent("TextTrackSettings",nle);let ile=class extends mt{constructor(e,t){let n=t.ResizeObserver||X.ResizeObserver;t.ResizeObserver===null&&(n=!1);const i=Bn({createEl:!n,reportTouchActivity:!1},t);super(e,i),this.ResizeObserver=t.ResizeObserver||X.ResizeObserver,this.loadListener_=null,this.resizeObserver_=null,this.debouncedHandler_=YN(()=>{this.resizeHandler()},100,!1,this),n?(this.resizeObserver_=new this.ResizeObserver(this.debouncedHandler_),this.resizeObserver_.observe(e.el())):(this.loadListener_=()=>{if(!this.el_||!this.el_.contentWindow)return;const s=this.debouncedHandler_;let a=this.unloadListener_=function(){Ns(this,"resize",s),Ns(this,"unload",a),a=null};po(this.el_.contentWindow,"unload",a),po(this.el_.contentWindow,"resize",s)},this.one("load",this.loadListener_))}createEl(){return super.createEl("iframe",{className:"vjs-resize-manager",tabIndex:-1,title:this.localize("No content")},{"aria-hidden":"true"})}resizeHandler(){!this.player_||!this.player_.trigger||this.player_.trigger("playerresize")}dispose(){this.debouncedHandler_&&this.debouncedHandler_.cancel(),this.resizeObserver_&&(this.player_.el()&&this.resizeObserver_.unobserve(this.player_.el()),this.resizeObserver_.disconnect()),this.loadListener_&&this.off("load",this.loadListener_),this.el_&&this.el_.contentWindow&&this.unloadListener_&&this.unloadListener_.call(this.el_.contentWindow),this.ResizeObserver=null,this.resizeObserver=null,this.debouncedHandler_=null,this.loadListener_=null,super.dispose()}};mt.registerComponent("ResizeManager",ile);const sle={trackingThreshold:20,liveTolerance:15};let ale=class extends mt{constructor(e,t){const n=Bn(sle,t,{createEl:!1});super(e,n),this.trackLiveHandler_=()=>this.trackLive_(),this.handlePlay_=i=>this.handlePlay(i),this.handleFirstTimeupdate_=i=>this.handleFirstTimeupdate(i),this.handleSeeked_=i=>this.handleSeeked(i),this.seekToLiveEdge_=i=>this.seekToLiveEdge(i),this.reset_(),this.on(this.player_,"durationchange",i=>this.handleDurationchange(i)),this.on(this.player_,"canplay",()=>this.toggleTracking())}trackLive_(){const e=this.player_.seekable();if(!e||!e.length)return;const t=Number(X.performance.now().toFixed(4)),n=this.lastTime_===-1?0:(t-this.lastTime_)/1e3;this.lastTime_=t,this.pastSeekEnd_=this.pastSeekEnd()+n;const i=this.liveCurrentTime(),s=this.player_.currentTime();let a=this.player_.paused()||this.seekedBehindLive_||Math.abs(i-s)>this.options_.liveTolerance;(!this.timeupdateSeen_||i===1/0)&&(a=!1),a!==this.behindLiveEdge_&&(this.behindLiveEdge_=a,this.trigger("liveedgechange"))}handleDurationchange(){this.toggleTracking()}toggleTracking(){this.player_.duration()===1/0&&this.liveWindow()>=this.options_.trackingThreshold?(this.player_.options_.liveui&&this.player_.addClass("vjs-liveui"),this.startTracking()):(this.player_.removeClass("vjs-liveui"),this.stopTracking())}startTracking(){this.isTracking()||(this.timeupdateSeen_||(this.timeupdateSeen_=this.player_.hasStarted()),this.trackingInterval_=this.setInterval(this.trackLiveHandler_,Yo),this.trackLive_(),this.on(this.player_,["play","pause"],this.trackLiveHandler_),this.timeupdateSeen_?this.on(this.player_,"seeked",this.handleSeeked_):(this.one(this.player_,"play",this.handlePlay_),this.one(this.player_,"timeupdate",this.handleFirstTimeupdate_)))}handleFirstTimeupdate(){this.timeupdateSeen_=!0,this.on(this.player_,"seeked",this.handleSeeked_)}handleSeeked(){const e=Math.abs(this.liveCurrentTime()-this.player_.currentTime());this.seekedBehindLive_=this.nextSeekedFromUser_&&e>2,this.nextSeekedFromUser_=!1,this.trackLive_()}handlePlay(){this.one(this.player_,"timeupdate",this.seekToLiveEdge_)}reset_(){this.lastTime_=-1,this.pastSeekEnd_=0,this.lastSeekEnd_=-1,this.behindLiveEdge_=!0,this.timeupdateSeen_=!1,this.seekedBehindLive_=!1,this.nextSeekedFromUser_=!1,this.clearInterval(this.trackingInterval_),this.trackingInterval_=null,this.off(this.player_,["play","pause"],this.trackLiveHandler_),this.off(this.player_,"seeked",this.handleSeeked_),this.off(this.player_,"play",this.handlePlay_),this.off(this.player_,"timeupdate",this.handleFirstTimeupdate_),this.off(this.player_,"timeupdate",this.seekToLiveEdge_)}nextSeekedFromUser(){this.nextSeekedFromUser_=!0}stopTracking(){this.isTracking()&&(this.reset_(),this.trigger("liveedgechange"))}seekableEnd(){const e=this.player_.seekable(),t=[];let n=e?e.length:0;for(;n--;)t.push(e.end(n));return t.length?t.sort()[t.length-1]:1/0}seekableStart(){const e=this.player_.seekable(),t=[];let n=e?e.length:0;for(;n--;)t.push(e.start(n));return t.length?t.sort()[0]:0}liveWindow(){const e=this.liveCurrentTime();return e===1/0?0:e-this.seekableStart()}isLive(){return this.isTracking()}atLiveEdge(){return!this.behindLiveEdge()}liveCurrentTime(){return this.pastSeekEnd()+this.seekableEnd()}pastSeekEnd(){const e=this.seekableEnd();return this.lastSeekEnd_!==-1&&e!==this.lastSeekEnd_&&(this.pastSeekEnd_=0),this.lastSeekEnd_=e,this.pastSeekEnd_}behindLiveEdge(){return this.behindLiveEdge_}isTracking(){return typeof this.trackingInterval_=="number"}seekToLiveEdge(){this.seekedBehindLive_=!1,!this.atLiveEdge()&&(this.nextSeekedFromUser_=!1,this.player_.currentTime(this.liveCurrentTime()))}dispose(){this.stopTracking(),super.dispose()}};mt.registerComponent("LiveTracker",ale);class ole extends mt{constructor(e,t){super(e,t),this.on("statechanged",n=>this.updateDom_()),this.updateDom_()}createEl(){return this.els={title:Er("div",{className:"vjs-title-bar-title",id:`vjs-title-bar-title-${Xo()}`}),description:Er("div",{className:"vjs-title-bar-description",id:`vjs-title-bar-description-${Xo()}`})},Er("div",{className:"vjs-title-bar"},{},AN(this.els))}updateDom_(){const e=this.player_.tech_,t=e&&e.el_,n={title:"aria-labelledby",description:"aria-describedby"};["title","description"].forEach(i=>{const s=this.state[i],a=this.els[i],o=n[i];Yb(a),s&&Ud(a,s),t&&(t.removeAttribute(o),s&&t.setAttribute(o,a.id))}),this.state.title||this.state.description?this.show():this.hide()}update(e){this.setState(e)}dispose(){const e=this.player_.tech_,t=e&&e.el_;t&&(t.removeAttribute("aria-labelledby"),t.removeAttribute("aria-describedby")),super.dispose(),this.els=null}}mt.registerComponent("TitleBar",ole);const lle={initialDisplay:4e3,position:[],takeFocus:!1};class ule extends Us{constructor(e,t){t=Bn(lle,t),super(e,t),this.controlText(t.controlText),this.hide(),this.on(this.player_,["useractive","userinactive"],n=>{this.removeClass("force-display")})}buildCSSClass(){return`vjs-transient-button focus-visible ${this.options_.position.map(e=>`vjs-${e}`).join(" ")}`}createEl(){const e=Er("button",{},{type:"button",class:this.buildCSSClass()},Er("span"));return this.controlTextEl_=e.querySelector("span"),e}show(){super.show(),this.addClass("force-display"),this.options_.takeFocus&&this.el().focus({preventScroll:!0}),this.forceDisplayTimeout=this.player_.setTimeout(()=>{this.removeClass("force-display")},this.options_.initialDisplay)}hide(){this.removeClass("force-display"),super.hide()}dispose(){this.player_.clearTimeout(this.forceDisplayTimeout),super.dispose()}}mt.registerComponent("TransientButton",ule);const Mw=r=>{const e=r.el();if(e.hasAttribute("src"))return r.triggerSourceset(e.src),!0;const t=r.$$("source"),n=[];let i="";if(!t.length)return!1;for(let s=0;s<t.length;s++){const a=t[s].src;a&&n.indexOf(a)===-1&&n.push(a)}return n.length?(n.length===1&&(i=n[0]),r.triggerSourceset(i),!0):!1},cle=Object.defineProperty({},"innerHTML",{get(){return this.cloneNode(!0).innerHTML},set(r){const e=Fe.createElement(this.nodeName.toLowerCase());e.innerHTML=r;const t=Fe.createDocumentFragment();for(;e.childNodes.length;)t.appendChild(e.childNodes[0]);return this.innerText="",X.Element.prototype.appendChild.call(this,t),this.innerHTML}}),U5=(r,e)=>{let t={};for(let n=0;n<r.length&&(t=Object.getOwnPropertyDescriptor(r[n],e),!(t&&t.set&&t.get));n++);return t.enumerable=!0,t.configurable=!0,t},dle=r=>U5([r.el(),X.HTMLMediaElement.prototype,X.Element.prototype,cle],"innerHTML"),rM=function(r){const e=r.el();if(e.resetSourceWatch_)return;const t={},n=dle(r),i=s=>(...a)=>{const o=s.apply(e,a);return Mw(r),o};["append","appendChild","insertAdjacentHTML"].forEach(s=>{e[s]&&(t[s]=e[s],e[s]=i(t[s]))}),Object.defineProperty(e,"innerHTML",Bn(n,{set:i(n.set)})),e.resetSourceWatch_=()=>{e.resetSourceWatch_=null,Object.keys(t).forEach(s=>{e[s]=t[s]}),Object.defineProperty(e,"innerHTML",n)},r.one("sourceset",e.resetSourceWatch_)},hle=Object.defineProperty({},"src",{get(){return this.hasAttribute("src")?o5(X.Element.prototype.getAttribute.call(this,"src")):""},set(r){return X.Element.prototype.setAttribute.call(this,"src",r),r}}),fle=r=>U5([r.el(),X.HTMLMediaElement.prototype,hle],"src"),ple=function(r){if(!r.featuresSourceset)return;const e=r.el();if(e.resetSourceset_)return;const t=fle(r),n=e.setAttribute,i=e.load;Object.defineProperty(e,"src",Bn(t,{set:s=>{const a=t.set.call(e,s);return r.triggerSourceset(e.src),a}})),e.setAttribute=(s,a)=>{const o=n.call(e,s,a);return/src/i.test(s)&&r.triggerSourceset(e.src),o},e.load=()=>{const s=i.call(e);return Mw(r)||(r.triggerSourceset(""),rM(r)),s},e.currentSrc?r.triggerSourceset(e.currentSrc):Mw(r)||rM(r),e.resetSourceset_=()=>{e.resetSourceset_=null,e.load=i,e.setAttribute=n,Object.defineProperty(e,"src",t),e.resetSourceWatch_&&e.resetSourceWatch_()}};let Qt=class x_ extends Nn{constructor(e,t){super(e,t);const n=e.source;let i=!1;if(this.featuresVideoFrameCallback=this.featuresVideoFrameCallback&&this.el_.tagName==="VIDEO",n&&(this.el_.currentSrc!==n.src||e.tag&&e.tag.initNetworkState_===3)?this.setSource(n):this.handleLateInit_(this.el_),e.enableSourceset&&this.setupSourcesetHandling_(),this.isScrubbing_=!1,this.el_.hasChildNodes()){const s=this.el_.childNodes;let a=s.length;const o=[];for(;a--;){const l=s[a];l.nodeName.toLowerCase()==="track"&&(this.featuresNativeTextTracks?(this.remoteTextTrackEls().addTrackElement_(l),this.remoteTextTracks().addTrack(l.track),this.textTracks().addTrack(l.track),!i&&!this.el_.hasAttribute("crossorigin")&&eS(l.src)&&(i=!0)):o.push(l))}for(let l=0;l<o.length;l++)this.el_.removeChild(o[l])}this.proxyNativeTracks_(),this.featuresNativeTextTracks&&i&&Kr.warn(`Text Tracks are being loaded from another origin but the crossorigin attribute isn't used.
This may prevent text tracks from loading.`),this.restoreMetadataTracksInIOSNativePlayer_(),(eg||Wb)&&e.nativeControlsForTouch===!0&&this.setControls(!0),this.proxyWebkitFullscreen_(),this.triggerReady()}dispose(){this.el_&&this.el_.resetSourceset_&&this.el_.resetSourceset_(),x_.disposeMediaElement(this.el_),this.options_=null,super.dispose()}setupSourcesetHandling_(){ple(this)}restoreMetadataTracksInIOSNativePlayer_(){const e=this.textTracks();let t;const n=()=>{t=[];for(let s=0;s<e.length;s++){const a=e[s];a.kind==="metadata"&&t.push({track:a,storedMode:a.mode})}};n(),e.addEventListener("change",n),this.on("dispose",()=>e.removeEventListener("change",n));const i=()=>{for(let s=0;s<t.length;s++){const a=t[s];a.track.mode==="disabled"&&a.track.mode!==a.storedMode&&(a.track.mode=a.storedMode)}e.removeEventListener("change",i)};this.on("webkitbeginfullscreen",()=>{e.removeEventListener("change",n),e.removeEventListener("change",i),e.addEventListener("change",i)}),this.on("webkitendfullscreen",()=>{e.removeEventListener("change",n),e.addEventListener("change",n),e.removeEventListener("change",i)})}overrideNative_(e,t){if(t!==this[`featuresNative${e}Tracks`])return;const n=e.toLowerCase();this[`${n}TracksListeners_`]&&Object.keys(this[`${n}TracksListeners_`]).forEach(i=>{this.el()[`${n}Tracks`].removeEventListener(i,this[`${n}TracksListeners_`][i])}),this[`featuresNative${e}Tracks`]=!t,this[`${n}TracksListeners_`]=null,this.proxyNativeTracksForType_(n)}overrideNativeAudioTracks(e){this.overrideNative_("Audio",e)}overrideNativeVideoTracks(e){this.overrideNative_("Video",e)}proxyNativeTracksForType_(e){const t=Wo[e],n=this.el()[t.getterName],i=this[t.getterName]();if(!this[`featuresNative${t.capitalName}Tracks`]||!n||!n.addEventListener)return;const s={change:o=>{const l={type:"change",target:i,currentTarget:i,srcElement:i};i.trigger(l),e==="text"&&this[Lp.remoteText.getterName]().trigger(l)},addtrack(o){i.addTrack(o.track)},removetrack(o){i.removeTrack(o.track)}},a=function(){const o=[];for(let l=0;l<i.length;l++){let u=!1;for(let c=0;c<n.length;c++)if(n[c]===i[l]){u=!0;break}u||o.push(i[l])}for(;o.length;)i.removeTrack(o.shift())};this[t.getterName+"Listeners_"]=s,Object.keys(s).forEach(o=>{const l=s[o];n.addEventListener(o,l),this.on("dispose",u=>n.removeEventListener(o,l))}),this.on("loadstart",a),this.on("dispose",o=>this.off("loadstart",a))}proxyNativeTracks_(){Wo.names.forEach(e=>{this.proxyNativeTracksForType_(e)})}createEl(){let e=this.options_.tag;if(!e||!(this.options_.playerElIngest||this.movingMediaElementInDOM)){if(e){const n=e.cloneNode(!0);e.parentNode&&e.parentNode.insertBefore(n,e),x_.disposeMediaElement(e),e=n}else{e=Fe.createElement("video");const n=this.options_.tag&&md(this.options_.tag),i=Bn({},n);(!eg||this.options_.nativeControlsForTouch!==!0)&&delete i.controls,BN(e,Object.assign(i,{id:this.options_.techId,class:"vjs-tech"}))}e.playerId=this.options_.playerId}typeof this.options_.preload<"u"&&Dp(e,"preload",this.options_.preload),this.options_.disablePictureInPicture!==void 0&&(e.disablePictureInPicture=this.options_.disablePictureInPicture);const t=["loop","muted","playsinline","autoplay"];for(let n=0;n<t.length;n++){const i=t[n],s=this.options_[i];typeof s<"u"&&(s?Dp(e,i,i):Kb(e,i),e[i]=s)}return e}handleLateInit_(e){if(e.networkState===0||e.networkState===3)return;if(e.readyState===0){let n=!1;const i=function(){n=!0};this.on("loadstart",i);const s=function(){n||this.trigger("loadstart")};this.on("loadedmetadata",s),this.ready(function(){this.off("loadstart",i),this.off("loadedmetadata",s),n||this.trigger("loadstart")});return}const t=["loadstart"];t.push("loadedmetadata"),e.readyState>=2&&t.push("loadeddata"),e.readyState>=3&&t.push("canplay"),e.readyState>=4&&t.push("canplaythrough"),this.ready(function(){t.forEach(function(n){this.trigger(n)},this)})}setScrubbing(e){this.isScrubbing_=e}scrubbing(){return this.isScrubbing_}setCurrentTime(e){try{this.isScrubbing_&&this.el_.fastSeek&&qb?this.el_.fastSeek(e):this.el_.currentTime=e}catch(t){Kr(t,"Video is not ready. (Video.js)")}}duration(){if(this.el_.duration===1/0&&Au&&Du&&this.el_.currentTime===0){const e=()=>{this.el_.currentTime>0&&(this.el_.duration===1/0&&this.trigger("durationchange"),this.off("timeupdate",e))};return this.on("timeupdate",e),NaN}return this.el_.duration||NaN}width(){return this.el_.offsetWidth}height(){return this.el_.offsetHeight}proxyWebkitFullscreen_(){if(!("webkitDisplayingFullscreen"in this.el_))return;const e=function(){this.trigger("fullscreenchange",{isFullscreen:!1}),this.el_.controls&&!this.options_.nativeControlsForTouch&&this.controls()&&(this.el_.controls=!1)},t=function(){"webkitPresentationMode"in this.el_&&this.el_.webkitPresentationMode!=="picture-in-picture"&&(this.one("webkitendfullscreen",e),this.trigger("fullscreenchange",{isFullscreen:!0,nativeIOSFullscreen:!0}))};this.on("webkitbeginfullscreen",t),this.on("dispose",()=>{this.off("webkitbeginfullscreen",t),this.off("webkitendfullscreen",e)})}supportsFullScreen(){return typeof this.el_.webkitEnterFullScreen=="function"}enterFullScreen(){const e=this.el_;if(e.paused&&e.networkState<=e.HAVE_METADATA)lu(this.el_.play()),this.setTimeout(function(){e.pause();try{e.webkitEnterFullScreen()}catch(t){this.trigger("fullscreenerror",t)}},0);else try{e.webkitEnterFullScreen()}catch(t){this.trigger("fullscreenerror",t)}}exitFullScreen(){if(!this.el_.webkitDisplayingFullscreen){this.trigger("fullscreenerror",new Error("The video is not fullscreen"));return}this.el_.webkitExitFullScreen()}requestPictureInPicture(){return this.el_.requestPictureInPicture()}requestVideoFrameCallback(e){return this.featuresVideoFrameCallback&&!this.el_.webkitKeys?this.el_.requestVideoFrameCallback(e):super.requestVideoFrameCallback(e)}cancelVideoFrameCallback(e){this.featuresVideoFrameCallback&&!this.el_.webkitKeys?this.el_.cancelVideoFrameCallback(e):super.cancelVideoFrameCallback(e)}src(e){if(e===void 0)return this.el_.src;this.setSrc(e)}addSourceElement(e,t){if(!e)return Kr.error("Invalid source URL."),!1;const n={src:e};t&&(n.type=t);const i=Er("source",{},n);return this.el_.appendChild(i),!0}removeSourceElement(e){if(!e)return Kr.error("Source URL is required to remove the source element."),!1;const t=this.el_.querySelectorAll("source");for(const n of t)if(n.src===e)return this.el_.removeChild(n),!0;return Kr.warn(`No matching source element found with src: ${e}`),!1}reset(){x_.resetMediaElement(this.el_)}currentSrc(){return this.currentSource_?this.currentSource_.src:this.el_.currentSrc}setControls(e){this.el_.controls=!!e}addTextTrack(e,t,n){return this.featuresNativeTextTracks?this.el_.addTextTrack(e,t,n):super.addTextTrack(e,t,n)}createRemoteTextTrack(e){if(!this.featuresNativeTextTracks)return super.createRemoteTextTrack(e);const t=Fe.createElement("track");return e.kind&&(t.kind=e.kind),e.label&&(t.label=e.label),(e.language||e.srclang)&&(t.srclang=e.language||e.srclang),e.default&&(t.default=e.default),e.id&&(t.id=e.id),e.src&&(t.src=e.src),t}addRemoteTextTrack(e,t){const n=super.addRemoteTextTrack(e,t);return this.featuresNativeTextTracks&&this.el().appendChild(n),n}removeRemoteTextTrack(e){if(super.removeRemoteTextTrack(e),this.featuresNativeTextTracks){const t=this.$$("track");let n=t.length;for(;n--;)(e===t[n]||e===t[n].track)&&this.el().removeChild(t[n])}}getVideoPlaybackQuality(){if(typeof this.el().getVideoPlaybackQuality=="function")return this.el().getVideoPlaybackQuality();const e={};return typeof this.el().webkitDroppedFrameCount<"u"&&typeof this.el().webkitDecodedFrameCount<"u"&&(e.droppedVideoFrames=this.el().webkitDroppedFrameCount,e.totalVideoFrames=this.el().webkitDecodedFrameCount),X.performance&&(e.creationTime=X.performance.now()),e}};zb(Qt,"TEST_VID",function(){if(!Qp())return;const r=Fe.createElement("video"),e=Fe.createElement("track");return e.kind="captions",e.srclang="en",e.label="English",r.appendChild(e),r});Qt.isSupported=function(){try{Qt.TEST_VID.volume=.5}catch{return!1}return!!(Qt.TEST_VID&&Qt.TEST_VID.canPlayType)};Qt.canPlayType=function(r){return Qt.TEST_VID.canPlayType(r)};Qt.canPlaySource=function(r,e){return Qt.canPlayType(r.type)};Qt.canControlVolume=function(){try{const r=Qt.TEST_VID.volume;Qt.TEST_VID.volume=r/2+.1;const e=r!==Qt.TEST_VID.volume;return e&&oa?(X.setTimeout(()=>{Qt&&Qt.prototype&&(Qt.prototype.featuresVolumeControl=r!==Qt.TEST_VID.volume)}),!1):e}catch{return!1}};Qt.canMuteVolume=function(){try{const r=Qt.TEST_VID.muted;return Qt.TEST_VID.muted=!r,Qt.TEST_VID.muted?Dp(Qt.TEST_VID,"muted","muted"):Kb(Qt.TEST_VID,"muted","muted"),r!==Qt.TEST_VID.muted}catch{return!1}};Qt.canControlPlaybackRate=function(){if(Au&&Du&&Hb<58)return!1;try{const r=Qt.TEST_VID.playbackRate;return Qt.TEST_VID.playbackRate=r/2+.1,r!==Qt.TEST_VID.playbackRate}catch{return!1}};Qt.canOverrideAttributes=function(){try{const r=()=>{};Object.defineProperty(Fe.createElement("video"),"src",{get:r,set:r}),Object.defineProperty(Fe.createElement("audio"),"src",{get:r,set:r}),Object.defineProperty(Fe.createElement("video"),"innerHTML",{get:r,set:r}),Object.defineProperty(Fe.createElement("audio"),"innerHTML",{get:r,set:r})}catch{return!1}return!0};Qt.supportsNativeTextTracks=function(){return qb||oa&&Du};Qt.supportsNativeVideoTracks=function(){return!!(Qt.TEST_VID&&Qt.TEST_VID.videoTracks)};Qt.supportsNativeAudioTracks=function(){return!!(Qt.TEST_VID&&Qt.TEST_VID.audioTracks)};Qt.Events=["loadstart","suspend","abort","error","emptied","stalled","loadedmetadata","loadeddata","canplay","canplaythrough","playing","waiting","seeking","seeked","ended","durationchange","timeupdate","progress","play","pause","ratechange","resize","volumechange"];[["featuresMuteControl","canMuteVolume"],["featuresPlaybackRate","canControlPlaybackRate"],["featuresSourceset","canOverrideAttributes"],["featuresNativeTextTracks","supportsNativeTextTracks"],["featuresNativeVideoTracks","supportsNativeVideoTracks"],["featuresNativeAudioTracks","supportsNativeAudioTracks"]].forEach(function([r,e]){zb(Qt.prototype,r,()=>Qt[e](),!0)});Qt.prototype.featuresVolumeControl=Qt.canControlVolume();Qt.prototype.movingMediaElementInDOM=!oa;Qt.prototype.featuresFullscreenResize=!0;Qt.prototype.featuresProgressEvents=!0;Qt.prototype.featuresTimeupdateEvents=!0;Qt.prototype.featuresVideoFrameCallback=!!(Qt.TEST_VID&&Qt.TEST_VID.requestVideoFrameCallback);Qt.disposeMediaElement=function(r){if(r){for(r.parentNode&&r.parentNode.removeChild(r);r.hasChildNodes();)r.removeChild(r.firstChild);r.removeAttribute("src"),typeof r.load=="function"&&(function(){try{r.load()}catch{}})()}};Qt.resetMediaElement=function(r){if(!r)return;const e=r.querySelectorAll("source");let t=e.length;for(;t--;)r.removeChild(e[t]);r.removeAttribute("src"),typeof r.load=="function"&&(function(){try{r.load()}catch{}})()};["muted","defaultMuted","autoplay","controls","loop","playsinline"].forEach(function(r){Qt.prototype[r]=function(){return this.el_[r]||this.el_.hasAttribute(r)}});["muted","defaultMuted","autoplay","loop","playsinline"].forEach(function(r){Qt.prototype["set"+ui(r)]=function(e){this.el_[r]=e,e?this.el_.setAttribute(r,r):this.el_.removeAttribute(r)}});["paused","currentTime","buffered","volume","poster","preload","error","seeking","seekable","ended","playbackRate","defaultPlaybackRate","disablePictureInPicture","played","networkState","readyState","videoWidth","videoHeight","crossOrigin"].forEach(function(r){Qt.prototype[r]=function(){return this.el_[r]}});["volume","src","poster","preload","playbackRate","defaultPlaybackRate","disablePictureInPicture","crossOrigin"].forEach(function(r){Qt.prototype["set"+ui(r)]=function(e){this.el_[r]=e}});["pause","load","play"].forEach(function(r){Qt.prototype[r]=function(){return this.el_[r]()}});Nn.withSourceHandlers(Qt);Qt.nativeSourceHandler={};Qt.nativeSourceHandler.canPlayType=function(r){try{return Qt.TEST_VID.canPlayType(r)}catch{return""}};Qt.nativeSourceHandler.canHandleSource=function(r,e){if(r.type)return Qt.nativeSourceHandler.canPlayType(r.type);if(r.src){const t=tk(r.src);return Qt.nativeSourceHandler.canPlayType(`video/${t}`)}return""};Qt.nativeSourceHandler.handleSource=function(r,e,t){e.setSrc(r.src)};Qt.nativeSourceHandler.dispose=function(){};Qt.registerSourceHandler(Qt.nativeSourceHandler);Nn.registerTech("Html5",Qt);const $5=["progress","abort","suspend","emptied","stalled","loadedmetadata","loadeddata","timeupdate","resize","volumechange","texttrackchange"],G1={canplay:"CanPlay",canplaythrough:"CanPlayThrough",playing:"Playing",seeked:"Seeked"},Fw=["tiny","xsmall","small","medium","large","xlarge","huge"],b_={};Fw.forEach(r=>{const e=r.charAt(0)==="x"?`x-${r.substring(1)}`:r;b_[r]=`vjs-layout-${e}`});const mle={tiny:210,xsmall:320,small:425,medium:768,large:1440,xlarge:2560,huge:1/0};let Bi=class zf extends mt{constructor(e,t,n){if(e.id=e.id||t.id||`vjs_video_${Xo()}`,t=Object.assign(zf.getTagSettings(e),t),t.initChildren=!1,t.createEl=!1,t.evented=!1,t.reportTouchActivity=!1,!t.language){const a=e.closest("[lang]");a&&(t.language=a.getAttribute("lang"))}if(super(null,t,n),this.boundDocumentFullscreenChange_=a=>this.documentFullscreenChange_(a),this.boundFullWindowOnEscKey_=a=>this.fullWindowOnEscKey(a),this.boundUpdateStyleEl_=a=>this.updateStyleEl_(a),this.boundApplyInitTime_=a=>this.applyInitTime_(a),this.boundUpdateCurrentBreakpoint_=a=>this.updateCurrentBreakpoint_(a),this.boundHandleTechClick_=a=>this.handleTechClick_(a),this.boundHandleTechDoubleClick_=a=>this.handleTechDoubleClick_(a),this.boundHandleTechTouchStart_=a=>this.handleTechTouchStart_(a),this.boundHandleTechTouchMove_=a=>this.handleTechTouchMove_(a),this.boundHandleTechTouchEnd_=a=>this.handleTechTouchEnd_(a),this.boundHandleTechTap_=a=>this.handleTechTap_(a),this.boundUpdatePlayerHeightOnAudioOnlyMode_=a=>this.updatePlayerHeightOnAudioOnlyMode_(a),this.isFullscreen_=!1,this.log=wN(this.id_),this.fsApi_=nx,this.isPosterFromTech_=!1,this.queuedCallbacks_=[],this.isReady_=!1,this.hasStarted_=!1,this.userActive_=!1,this.debugEnabled_=!1,this.audioOnlyMode_=!1,this.audioPosterMode_=!1,this.audioOnlyCache_={controlBarHeight:null,playerHeight:null,hiddenChildren:[]},!this.options_||!this.options_.techOrder||!this.options_.techOrder.length)throw new Error("No techOrder specified. Did you overwrite videojs.options instead of just changing the properties you want to override?");if(this.tag=e,this.tagAttributes=e&&md(e),this.language(this.options_.language),t.languages){const a={};Object.getOwnPropertyNames(t.languages).forEach(function(o){a[o.toLowerCase()]=t.languages[o]}),this.languages_=a}else this.languages_=zf.prototype.options_.languages;this.resetCache_(),this.poster_=t.poster||"",this.controls_=!!t.controls,e.controls=!1,e.removeAttribute("controls"),this.changingSrc_=!1,this.playCallbacks_=[],this.playTerminatedQueue_=[],e.hasAttribute("autoplay")?this.autoplay(!0):this.autoplay(this.options_.autoplay),t.plugins&&Object.keys(t.plugins).forEach(a=>{if(typeof this[a]!="function")throw new Error(`plugin "${a}" does not exist`)}),this.scrubbing_=!1,this.el_=this.createEl(),Q2(this,{eventBusKey:"el_"}),this.fsApi_.requestFullscreen&&(po(Fe,this.fsApi_.fullscreenchange,this.boundDocumentFullscreenChange_),this.on(this.fsApi_.fullscreenchange,this.boundDocumentFullscreenChange_)),this.fluid_&&this.on(["playerreset","resize"],this.boundUpdateStyleEl_);const i=Bn(this.options_);if(t.plugins&&Object.keys(t.plugins).forEach(a=>{this[a](t.plugins[a])}),t.debug&&this.debug(!0),this.options_.playerOptions=i,this.middleware_=[],this.playbackRates(t.playbackRates),t.experimentalSvgIcons){const o=new X.DOMParser().parseFromString(Noe,"image/svg+xml");if(o.querySelector("parsererror"))Kr.warn("Failed to load SVG Icons. Falling back to Font Icons."),this.options_.experimentalSvgIcons=null;else{const u=o.documentElement;u.style.display="none",this.el_.appendChild(u),this.addClass("vjs-svg-icons-enabled")}}this.initChildren(),this.isAudio(e.nodeName.toLowerCase()==="audio"),this.controls()?this.addClass("vjs-controls-enabled"):this.addClass("vjs-controls-disabled"),this.el_.setAttribute("role","region"),this.isAudio()?this.el_.setAttribute("aria-label",this.localize("Audio Player")):this.el_.setAttribute("aria-label",this.localize("Video Player")),this.isAudio()&&this.addClass("vjs-audio"),t.spatialNavigation&&t.spatialNavigation.enabled&&(this.spatialNavigation=new Uoe(this),this.addClass("vjs-spatial-navigation-enabled")),eg&&this.addClass("vjs-touch-enabled"),oa||this.addClass("vjs-workinghover"),zf.players[this.id_]=this;const s=ww.split(".")[0];this.addClass(`vjs-v${s}`),this.userActive(!0),this.reportUserActivity(),this.one("play",a=>this.listenForUserActivity_(a)),this.on("keydown",a=>this.handleKeyDown(a)),this.on("languagechange",a=>this.handleLanguagechange(a)),this.breakpoints(this.options_.breakpoints),this.responsive(this.options_.responsive),this.on("ready",()=>{this.audioPosterMode(this.options_.audioPosterMode),this.audioOnlyMode(this.options_.audioOnlyMode)})}dispose(){this.trigger("dispose"),this.off("dispose"),Ns(Fe,this.fsApi_.fullscreenchange,this.boundDocumentFullscreenChange_),Ns(Fe,"keydown",this.boundFullWindowOnEscKey_),this.styleEl_&&this.styleEl_.parentNode&&(this.styleEl_.parentNode.removeChild(this.styleEl_),this.styleEl_=null),zf.players[this.id_]=null,this.tag&&this.tag.player&&(this.tag.player=null),this.el_&&this.el_.player&&(this.el_.player=null),this.tech_&&(this.tech_.dispose(),this.isPosterFromTech_=!1,this.poster_=""),this.playerElIngest_&&(this.playerElIngest_=null),this.tag&&(this.tag=null),Ooe(this),Zs.names.forEach(e=>{const t=Zs[e],n=this[t.getterName]();n&&n.off&&n.off()}),super.dispose({restoreEl:this.options_.restoreEl})}createEl(){let e=this.tag,t,n=this.playerElIngest_=e.parentNode&&e.parentNode.hasAttribute&&e.parentNode.hasAttribute("data-vjs-player");const i=this.tag.tagName.toLowerCase()==="video-js";n?t=this.el_=e.parentNode:i||(t=this.el_=super.createEl("div"));const s=md(e);if(i){for(t=this.el_=e,e=this.tag=Fe.createElement("video");t.children.length;)e.appendChild(t.firstChild);w0(t,"video-js")||Lh(t,"video-js"),t.appendChild(e),n=this.playerElIngest_=t,Object.keys(t).forEach(l=>{try{e[l]=t[l]}catch{}})}e.setAttribute("tabindex","-1"),s.tabindex="-1",Du&&Vb&&(e.setAttribute("role","application"),s.role="application"),e.removeAttribute("width"),e.removeAttribute("height"),"width"in s&&delete s.width,"height"in s&&delete s.height,Object.getOwnPropertyNames(s).forEach(function(l){i&&l==="class"||t.setAttribute(l,s[l]),i&&e.setAttribute(l,s[l])}),e.playerId=e.id,e.id+="_html5_api",e.className="vjs-tech",e.player=t.player=this,this.addClass("vjs-paused");const a=["IS_SMART_TV","IS_TIZEN","IS_WEBOS","IS_ANDROID","IS_IPAD","IS_IPHONE","IS_CHROMECAST_RECEIVER"].filter(l=>LN[l]).map(l=>"vjs-device-"+l.substring(3).toLowerCase().replace(/\_/g,"-"));if(this.addClass(...a),X.VIDEOJS_NO_DYNAMIC_STYLE!==!0){this.styleEl_=KN("vjs-styles-dimensions");const l=Rd(".vjs-styles-defaults"),u=Rd("head");u.insertBefore(this.styleEl_,l?l.nextSibling:u.firstChild)}this.fill_=!1,this.fluid_=!1,this.width(this.options_.width),this.height(this.options_.height),this.fill(this.options_.fill),this.fluid(this.options_.fluid),this.aspectRatio(this.options_.aspectRatio),this.crossOrigin(this.options_.crossOrigin||this.options_.crossorigin);const o=e.getElementsByTagName("a");for(let l=0;l<o.length;l++){const u=o.item(l);Lh(u,"vjs-hidden"),u.setAttribute("hidden","hidden")}return e.initNetworkState_=e.networkState,e.parentNode&&!n&&e.parentNode.insertBefore(t,e),kw(e,t),this.children_.unshift(e),this.el_.setAttribute("lang",this.language_),this.el_.setAttribute("translate","no"),this.el_=t,t}crossOrigin(e){if(typeof e>"u")return this.techGet_("crossOrigin");if(e!==null&&e!=="anonymous"&&e!=="use-credentials"){Kr.warn(`crossOrigin must be null,  "anonymous" or "use-credentials", given "${e}"`);return}this.techCall_("setCrossOrigin",e),this.posterImage&&this.posterImage.crossOrigin(e)}width(e){return this.dimension("width",e)}height(e){return this.dimension("height",e)}dimension(e,t){const n=e+"_";if(t===void 0)return this[n]||0;if(t===""||t==="auto"){this[n]=void 0,this.updateStyleEl_();return}const i=parseFloat(t);if(isNaN(i)){Kr.error(`Improper value "${t}" supplied for for ${e}`);return}this[n]=i,this.updateStyleEl_()}fluid(e){if(e===void 0)return!!this.fluid_;this.fluid_=!!e,yc(this)&&this.off(["playerreset","resize"],this.boundUpdateStyleEl_),e?(this.addClass("vjs-fluid"),this.fill(!1),coe(this,()=>{this.on(["playerreset","resize"],this.boundUpdateStyleEl_)})):this.removeClass("vjs-fluid"),this.updateStyleEl_()}fill(e){if(e===void 0)return!!this.fill_;this.fill_=!!e,e?(this.addClass("vjs-fill"),this.fluid(!1)):this.removeClass("vjs-fill")}aspectRatio(e){if(e===void 0)return this.aspectRatio_;if(!/^\d+\:\d+$/.test(e))throw new Error("Improper value supplied for aspect ratio. The format should be width:height, for example 16:9.");this.aspectRatio_=e,this.fluid(!0),this.updateStyleEl_()}updateStyleEl_(){if(X.VIDEOJS_NO_DYNAMIC_STYLE===!0){const o=typeof this.width_=="number"?this.width_:this.options_.width,l=typeof this.height_=="number"?this.height_:this.options_.height,u=this.tech_&&this.tech_.el();u&&(o>=0&&(u.width=o),l>=0&&(u.height=l));return}let e,t,n,i;this.aspectRatio_!==void 0&&this.aspectRatio_!=="auto"?n=this.aspectRatio_:this.videoWidth()>0?n=this.videoWidth()+":"+this.videoHeight():n="16:9";const s=n.split(":"),a=s[1]/s[0];this.width_!==void 0?e=this.width_:this.height_!==void 0?e=this.height_/a:e=this.videoWidth()||300,this.height_!==void 0?t=this.height_:t=e*a,/^[^a-zA-Z]/.test(this.id())?i="dimensions-"+this.id():i=this.id()+"-dimensions",this.addClass(i),XN(this.styleEl_,`
      .${i} {
        width: ${e}px;
        height: ${t}px;
      }

      .${i}.vjs-fluid:not(.vjs-audio-only-mode) {
        padding-top: ${a*100}%;
      }
    `)}loadTech_(e,t){this.tech_&&this.unloadTech_();const n=ui(e),i=e.charAt(0).toLowerCase()+e.slice(1);n!=="Html5"&&this.tag&&(Nn.getTech("Html5").disposeMediaElement(this.tag),this.tag.player=null,this.tag=null),this.techName_=n,this.isReady_=!1;let s=this.autoplay();(typeof this.autoplay()=="string"||this.autoplay()===!0&&this.options_.normalizeAutoplay)&&(s=!1);const a={source:t,autoplay:s,nativeControlsForTouch:this.options_.nativeControlsForTouch,playerId:this.id(),techId:`${this.id()}_${i}_api`,playsinline:this.options_.playsinline,preload:this.options_.preload,loop:this.options_.loop,disablePictureInPicture:this.options_.disablePictureInPicture,muted:this.options_.muted,poster:this.poster(),language:this.language(),playerElIngest:this.playerElIngest_||!1,"vtt.js":this.options_["vtt.js"],canOverridePoster:!!this.options_.techCanOverridePoster,enableSourceset:this.options_.enableSourceset};Zs.names.forEach(l=>{const u=Zs[l];a[u.getterName]=this[u.privateName]}),Object.assign(a,this.options_[n]),Object.assign(a,this.options_[i]),Object.assign(a,this.options_[e.toLowerCase()]),this.tag&&(a.tag=this.tag),t&&t.src===this.cache_.src&&this.cache_.currentTime>0&&(a.startTime=this.cache_.currentTime);const o=Nn.getTech(e);if(!o)throw new Error(`No Tech named '${n}' exists! '${n}' should be registered using videojs.registerTech()'`);this.tech_=new o(a),this.tech_.ready(jn(this,this.handleTechReady_),!0),OO.jsonToTextTracks(this.textTracksJson_||[],this.tech_),$5.forEach(l=>{this.on(this.tech_,l,u=>this[`handleTech${ui(l)}_`](u))}),Object.keys(G1).forEach(l=>{this.on(this.tech_,l,u=>{if(this.tech_.playbackRate()===0&&this.tech_.seeking()){this.queuedCallbacks_.push({callback:this[`handleTech${G1[l]}_`].bind(this),event:u});return}this[`handleTech${G1[l]}_`](u)})}),this.on(this.tech_,"loadstart",l=>this.handleTechLoadStart_(l)),this.on(this.tech_,"sourceset",l=>this.handleTechSourceset_(l)),this.on(this.tech_,"waiting",l=>this.handleTechWaiting_(l)),this.on(this.tech_,"ended",l=>this.handleTechEnded_(l)),this.on(this.tech_,"seeking",l=>this.handleTechSeeking_(l)),this.on(this.tech_,"play",l=>this.handleTechPlay_(l)),this.on(this.tech_,"pause",l=>this.handleTechPause_(l)),this.on(this.tech_,"durationchange",l=>this.handleTechDurationChange_(l)),this.on(this.tech_,"fullscreenchange",(l,u)=>this.handleTechFullscreenChange_(l,u)),this.on(this.tech_,"fullscreenerror",(l,u)=>this.handleTechFullscreenError_(l,u)),this.on(this.tech_,"enterpictureinpicture",l=>this.handleTechEnterPictureInPicture_(l)),this.on(this.tech_,"leavepictureinpicture",l=>this.handleTechLeavePictureInPicture_(l)),this.on(this.tech_,"error",l=>this.handleTechError_(l)),this.on(this.tech_,"posterchange",l=>this.handleTechPosterChange_(l)),this.on(this.tech_,"textdata",l=>this.handleTechTextData_(l)),this.on(this.tech_,"ratechange",l=>this.handleTechRateChange_(l)),this.on(this.tech_,"loadedmetadata",this.boundUpdateStyleEl_),this.usingNativeControls(this.techGet_("controls")),this.controls()&&!this.usingNativeControls()&&this.addTechControlsListeners_(),this.tech_.el().parentNode!==this.el()&&(n!=="Html5"||!this.tag)&&kw(this.tech_.el(),this.el()),this.tag&&(this.tag.player=null,this.tag=null)}unloadTech_(){Zs.names.forEach(e=>{const t=Zs[e];this[t.privateName]=this[t.getterName]()}),this.textTracksJson_=OO.textTracksToJson(this.tech_),this.isReady_=!1,this.tech_.dispose(),this.tech_=!1,this.isPosterFromTech_&&(this.poster_="",this.trigger("posterchange")),this.isPosterFromTech_=!1}tech(e){return e===void 0&&Kr.warn(`Using the tech directly can be dangerous. I hope you know what you're doing.
See https://github.com/videojs/video.js/issues/2617 for more info.
`),this.tech_}version(){return{"video.js":ww}}addTechControlsListeners_(){this.removeTechControlsListeners_(),this.on(this.tech_,"click",this.boundHandleTechClick_),this.on(this.tech_,"dblclick",this.boundHandleTechDoubleClick_),this.on(this.tech_,"touchstart",this.boundHandleTechTouchStart_),this.on(this.tech_,"touchmove",this.boundHandleTechTouchMove_),this.on(this.tech_,"touchend",this.boundHandleTechTouchEnd_),this.on(this.tech_,"tap",this.boundHandleTechTap_)}removeTechControlsListeners_(){this.off(this.tech_,"tap",this.boundHandleTechTap_),this.off(this.tech_,"touchstart",this.boundHandleTechTouchStart_),this.off(this.tech_,"touchmove",this.boundHandleTechTouchMove_),this.off(this.tech_,"touchend",this.boundHandleTechTouchEnd_),this.off(this.tech_,"click",this.boundHandleTechClick_),this.off(this.tech_,"dblclick",this.boundHandleTechDoubleClick_)}handleTechReady_(){this.triggerReady(),this.cache_.volume&&this.techCall_("setVolume",this.cache_.volume),this.handleTechPosterChange_(),this.handleTechDurationChange_()}handleTechLoadStart_(){this.removeClass("vjs-ended","vjs-seeking"),this.error(null),this.handleTechDurationChange_(),this.paused()?(this.hasStarted(!1),this.trigger("loadstart")):this.trigger("loadstart"),this.manualAutoplay_(this.autoplay()===!0&&this.options_.normalizeAutoplay?"play":this.autoplay())}manualAutoplay_(e){if(!this.tech_||typeof e!="string")return;const t=()=>{const i=this.muted();this.muted(!0);const s=()=>{this.muted(i)};this.playTerminatedQueue_.push(s);const a=this.play();if(k0(a))return a.catch(o=>{throw s(),new Error(`Rejection at manualAutoplay. Restoring muted value. ${o||""}`)})};let n;if(e==="any"&&!this.muted()?(n=this.play(),k0(n)&&(n=n.catch(t))):e==="muted"&&!this.muted()?n=t():n=this.play(),!!k0(n))return n.then(()=>{this.trigger({type:"autoplay-success",autoplay:e})}).catch(()=>{this.trigger({type:"autoplay-failure",autoplay:e})})}updateSourceCaches_(e=""){let t=e,n="";typeof t!="string"&&(t=e.src,n=e.type),this.cache_.source=this.cache_.source||{},this.cache_.sources=this.cache_.sources||[],t&&!n&&(n=Boe(this,t)),this.cache_.source=Bn({},e,{src:t,type:n});const i=this.cache_.sources.filter(l=>l.src&&l.src===t),s=[],a=this.$$("source"),o=[];for(let l=0;l<a.length;l++){const u=md(a[l]);s.push(u),u.src&&u.src===t&&o.push(u.src)}o.length&&!i.length?this.cache_.sources=s:i.length||(this.cache_.sources=[this.cache_.source]),this.cache_.src=t}handleTechSourceset_(e){if(!this.changingSrc_){let t=s=>this.updateSourceCaches_(s);const n=this.currentSource().src,i=e.src;n&&!/^blob:/.test(n)&&/^blob:/.test(i)&&(!this.lastSource_||this.lastSource_.tech!==i&&this.lastSource_.player!==n)&&(t=()=>{}),t(i),e.src||this.tech_.any(["sourceset","loadstart"],s=>{if(s.type==="sourceset")return;const a=this.techGet_("currentSrc");this.lastSource_.tech=a,this.updateSourceCaches_(a)})}this.lastSource_={player:this.currentSource().src,tech:e.src},this.trigger({src:e.src,type:"sourceset"})}hasStarted(e){if(e===void 0)return this.hasStarted_;e!==this.hasStarted_&&(this.hasStarted_=e,this.hasStarted_?this.addClass("vjs-has-started"):this.removeClass("vjs-has-started"))}handleTechPlay_(){this.removeClass("vjs-ended","vjs-paused"),this.addClass("vjs-playing"),this.hasStarted(!0),this.trigger("play")}handleTechRateChange_(){this.tech_.playbackRate()>0&&this.cache_.lastPlaybackRate===0&&(this.queuedCallbacks_.forEach(e=>e.callback(e.event)),this.queuedCallbacks_=[]),this.cache_.lastPlaybackRate=this.tech_.playbackRate(),this.trigger("ratechange")}handleTechWaiting_(){this.addClass("vjs-waiting"),this.trigger("waiting");const e=this.currentTime(),t=()=>{e!==this.currentTime()&&(this.removeClass("vjs-waiting"),this.off("timeupdate",t))};this.on("timeupdate",t)}handleTechCanPlay_(){this.removeClass("vjs-waiting"),this.trigger("canplay")}handleTechCanPlayThrough_(){this.removeClass("vjs-waiting"),this.trigger("canplaythrough")}handleTechPlaying_(){this.removeClass("vjs-waiting"),this.trigger("playing")}handleTechSeeking_(){this.addClass("vjs-seeking"),this.trigger("seeking")}handleTechSeeked_(){this.removeClass("vjs-seeking","vjs-ended"),this.trigger("seeked")}handleTechPause_(){this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.trigger("pause")}handleTechEnded_(){this.addClass("vjs-ended"),this.removeClass("vjs-waiting"),this.options_.loop?(this.currentTime(0),this.play()):this.paused()||this.pause(),this.trigger("ended")}handleTechDurationChange_(){this.duration(this.techGet_("duration"))}handleTechClick_(e){this.controls_&&(this.options_===void 0||this.options_.userActions===void 0||this.options_.userActions.click===void 0||this.options_.userActions.click!==!1)&&(this.options_!==void 0&&this.options_.userActions!==void 0&&typeof this.options_.userActions.click=="function"?this.options_.userActions.click.call(this,e):this.paused()?lu(this.play()):this.pause())}handleTechDoubleClick_(e){if(!this.controls_)return;Array.prototype.some.call(this.$$(".vjs-control-bar, .vjs-modal-dialog"),n=>n.contains(e.target))||(this.options_===void 0||this.options_.userActions===void 0||this.options_.userActions.doubleClick===void 0||this.options_.userActions.doubleClick!==!1)&&(this.options_!==void 0&&this.options_.userActions!==void 0&&typeof this.options_.userActions.doubleClick=="function"?this.options_.userActions.doubleClick.call(this,e):this.isInPictureInPicture()&&!Fe.pictureInPictureElement?this.exitPictureInPicture():this.isFullscreen()?this.exitFullscreen():this.requestFullscreen())}handleTechTap_(){this.userActive(!this.userActive())}handleTechTouchStart_(){this.userWasActive=this.userActive()}handleTechTouchMove_(){this.userWasActive&&this.reportUserActivity()}handleTechTouchEnd_(e){e.cancelable&&e.preventDefault()}toggleFullscreenClass_(){this.isFullscreen()?this.addClass("vjs-fullscreen"):this.removeClass("vjs-fullscreen")}documentFullscreenChange_(e){const t=e.target.player;if(t&&t!==this)return;const n=this.el();let i=Fe[this.fsApi_.fullscreenElement]===n;!i&&n.matches&&(i=n.matches(":"+this.fsApi_.fullscreen)),this.isFullscreen(i)}handleTechFullscreenChange_(e,t){t&&(t.nativeIOSFullscreen&&(this.addClass("vjs-ios-native-fs"),this.tech_.one("webkitendfullscreen",()=>{this.removeClass("vjs-ios-native-fs")})),this.isFullscreen(t.isFullscreen))}handleTechFullscreenError_(e,t){this.trigger("fullscreenerror",t)}togglePictureInPictureClass_(){this.isInPictureInPicture()?this.addClass("vjs-picture-in-picture"):this.removeClass("vjs-picture-in-picture")}handleTechEnterPictureInPicture_(e){this.isInPictureInPicture(!0)}handleTechLeavePictureInPicture_(e){this.isInPictureInPicture(!1)}handleTechError_(){const e=this.tech_.error();e&&this.error(e)}handleTechTextData_(){let e=null;arguments.length>1&&(e=arguments[1]),this.trigger("textdata",e)}getCache(){return this.cache_}resetCache_(){this.cache_={currentTime:0,initTime:0,inactivityTimeout:this.options_.inactivityTimeout,duration:NaN,lastVolume:1,lastPlaybackRate:this.defaultPlaybackRate(),media:null,src:"",source:{},sources:[],playbackRates:[],volume:1}}techCall_(e,t){this.ready(function(){if(e in Roe)return Ioe(this.middleware_,this.tech_,e,t);if(e in $O)return UO(this.middleware_,this.tech_,e,t);try{this.tech_&&this.tech_[e](t)}catch(n){throw Kr(n),n}},!0)}techGet_(e){if(!(!this.tech_||!this.tech_.isReady_)){if(e in Poe)return Doe(this.middleware_,this.tech_,e);if(e in $O)return UO(this.middleware_,this.tech_,e);try{return this.tech_[e]()}catch(t){throw this.tech_[e]===void 0?(Kr(`Video.js: ${e} method not defined for ${this.techName_} playback technology.`,t),t):t.name==="TypeError"?(Kr(`Video.js: ${e} unavailable on ${this.techName_} playback technology element.`,t),this.tech_.isReady_=!1,t):(Kr(t),t)}}}play(){return new Promise(e=>{this.play_(e)})}play_(e=lu){this.playCallbacks_.push(e);const t=!!(!this.changingSrc_&&(this.src()||this.currentSrc())),n=!!(qb||oa);if(this.waitToPlay_&&(this.off(["ready","loadstart"],this.waitToPlay_),this.waitToPlay_=null),!this.isReady_||!t){this.waitToPlay_=a=>{this.play_()},this.one(["ready","loadstart"],this.waitToPlay_),!t&&n&&this.load();return}const i=this.techGet_("play");n&&this.hasClass("vjs-ended")&&this.resetProgressBar_(),i===null?this.runPlayTerminatedQueue_():this.runPlayCallbacks_(i)}runPlayTerminatedQueue_(){const e=this.playTerminatedQueue_.slice(0);this.playTerminatedQueue_=[],e.forEach(function(t){t()})}runPlayCallbacks_(e){const t=this.playCallbacks_.slice(0);this.playCallbacks_=[],this.playTerminatedQueue_=[],t.forEach(function(n){n(e)})}pause(){this.techCall_("pause")}paused(){return this.techGet_("paused")!==!1}played(){return this.techGet_("played")||Cl(0,0)}scrubbing(e){if(typeof e>"u")return this.scrubbing_;this.scrubbing_=!!e,this.techCall_("setScrubbing",this.scrubbing_),e?this.addClass("vjs-scrubbing"):this.removeClass("vjs-scrubbing")}currentTime(e){if(e===void 0)return this.cache_.currentTime=this.techGet_("currentTime")||0,this.cache_.currentTime;if(e<0&&(e=0),!this.isReady_||this.changingSrc_||!this.tech_||!this.tech_.isReady_){this.cache_.initTime=e,this.off("canplay",this.boundApplyInitTime_),this.one("canplay",this.boundApplyInitTime_);return}this.techCall_("setCurrentTime",e),this.cache_.initTime=0,isFinite(e)&&(this.cache_.currentTime=Number(e))}applyInitTime_(){this.currentTime(this.cache_.initTime)}duration(e){if(e===void 0)return this.cache_.duration!==void 0?this.cache_.duration:NaN;e=parseFloat(e),e<0&&(e=1/0),e!==this.cache_.duration&&(this.cache_.duration=e,e===1/0?this.addClass("vjs-live"):this.removeClass("vjs-live"),isNaN(e)||this.trigger("durationchange"))}remainingTime(){return this.duration()-this.currentTime()}remainingTimeDisplay(){return Math.floor(this.duration())-Math.floor(this.currentTime())}buffered(){let e=this.techGet_("buffered");return(!e||!e.length)&&(e=Cl(0,0)),e}seekable(){let e=this.techGet_("seekable");return(!e||!e.length)&&(e=Cl(0,0)),e}seeking(){return this.techGet_("seeking")}ended(){return this.techGet_("ended")}networkState(){return this.techGet_("networkState")}readyState(){return this.techGet_("readyState")}bufferedPercent(){return i5(this.buffered(),this.duration())}bufferedEnd(){const e=this.buffered(),t=this.duration();let n=e.end(e.length-1);return n>t&&(n=t),n}volume(e){let t;if(e!==void 0){t=Math.max(0,Math.min(1,e)),this.cache_.volume=t,this.techCall_("setVolume",t),t>0&&this.lastVolume_(t);return}return t=parseFloat(this.techGet_("volume")),isNaN(t)?1:t}muted(e){if(e!==void 0){this.techCall_("setMuted",e);return}return this.techGet_("muted")||!1}defaultMuted(e){return e!==void 0&&this.techCall_("setDefaultMuted",e),this.techGet_("defaultMuted")||!1}lastVolume_(e){if(e!==void 0&&e!==0){this.cache_.lastVolume=e;return}return this.cache_.lastVolume}supportsFullScreen(){return this.techGet_("supportsFullScreen")||!1}isFullscreen(e){if(e!==void 0){const t=this.isFullscreen_;this.isFullscreen_=!!e,this.isFullscreen_!==t&&this.fsApi_.prefixed&&this.trigger("fullscreenchange"),this.toggleFullscreenClass_();return}return this.isFullscreen_}requestFullscreen(e){this.isInPictureInPicture()&&this.exitPictureInPicture();const t=this;return new Promise((n,i)=>{function s(){t.off("fullscreenerror",o),t.off("fullscreenchange",a)}function a(){s(),n()}function o(u,c){s(),i(c)}t.one("fullscreenchange",a),t.one("fullscreenerror",o);const l=t.requestFullscreenHelper_(e);l&&(l.then(s,s),l.then(n,i))})}requestFullscreenHelper_(e){let t;if(this.fsApi_.prefixed||(t=this.options_.fullscreen&&this.options_.fullscreen.options||{},e!==void 0&&(t=e)),this.fsApi_.requestFullscreen){const n=this.el_[this.fsApi_.requestFullscreen](t);return n&&n.then(()=>this.isFullscreen(!0),()=>this.isFullscreen(!1)),n}else this.tech_.supportsFullScreen()&&!this.options_.preferFullWindow?this.techCall_("enterFullScreen"):this.enterFullWindow()}exitFullscreen(){const e=this;return new Promise((t,n)=>{function i(){e.off("fullscreenerror",a),e.off("fullscreenchange",s)}function s(){i(),t()}function a(l,u){i(),n(u)}e.one("fullscreenchange",s),e.one("fullscreenerror",a);const o=e.exitFullscreenHelper_();o&&(o.then(i,i),o.then(t,n))})}exitFullscreenHelper_(){if(this.fsApi_.requestFullscreen){const e=Fe[this.fsApi_.exitFullscreen]();return e&&lu(e.then(()=>this.isFullscreen(!1))),e}else this.tech_.supportsFullScreen()&&!this.options_.preferFullWindow?this.techCall_("exitFullScreen"):this.exitFullWindow()}enterFullWindow(){this.isFullscreen(!0),this.isFullWindow=!0,this.docOrigOverflow=Fe.documentElement.style.overflow,po(Fe,"keydown",this.boundFullWindowOnEscKey_),Fe.documentElement.style.overflow="hidden",Lh(Fe.body,"vjs-full-window"),this.trigger("enterFullWindow")}fullWindowOnEscKey(e){e.key==="Escape"&&this.isFullscreen()===!0&&(this.isFullWindow?this.exitFullWindow():this.exitFullscreen())}exitFullWindow(){this.isFullscreen(!1),this.isFullWindow=!1,Ns(Fe,"keydown",this.boundFullWindowOnEscKey_),Fe.documentElement.style.overflow=this.docOrigOverflow,Gb(Fe.body,"vjs-full-window"),this.trigger("exitFullWindow")}disablePictureInPicture(e){if(e===void 0)return this.techGet_("disablePictureInPicture");this.techCall_("setDisablePictureInPicture",e),this.options_.disablePictureInPicture=e,this.trigger("disablepictureinpicturechanged")}isInPictureInPicture(e){if(e!==void 0){this.isInPictureInPicture_=!!e,this.togglePictureInPictureClass_();return}return!!this.isInPictureInPicture_}requestPictureInPicture(){if(this.options_.enableDocumentPictureInPicture&&X.documentPictureInPicture){const e=Fe.createElement(this.el().tagName);return e.classList=this.el().classList,e.classList.add("vjs-pip-container"),this.posterImage&&e.appendChild(this.posterImage.el().cloneNode(!0)),this.titleBar&&e.appendChild(this.titleBar.el().cloneNode(!0)),e.appendChild(Er("p",{className:"vjs-pip-text"},{},this.localize("Playing in picture-in-picture"))),X.documentPictureInPicture.requestWindow({width:this.videoWidth(),height:this.videoHeight()}).then(t=>(WN(t),this.el_.parentNode.insertBefore(e,this.el_),t.document.body.appendChild(this.el_),t.document.body.classList.add("vjs-pip-window"),this.player_.isInPictureInPicture(!0),this.player_.trigger({type:"enterpictureinpicture",pipWindow:t}),t.addEventListener("pagehide",n=>{const i=n.target.querySelector(".video-js");e.parentNode.replaceChild(i,e),this.player_.isInPictureInPicture(!1),this.player_.trigger("leavepictureinpicture")}),t))}return"pictureInPictureEnabled"in Fe&&this.disablePictureInPicture()===!1?this.techGet_("requestPictureInPicture"):Promise.reject("No PiP mode is available")}exitPictureInPicture(){if(X.documentPictureInPicture&&X.documentPictureInPicture.window)return X.documentPictureInPicture.window.close(),Promise.resolve();if("pictureInPictureEnabled"in Fe)return Fe.exitPictureInPicture()}handleKeyDown(e){const{userActions:t}=this.options_;!t||!t.hotkeys||(i=>{const s=i.tagName.toLowerCase();if(i.isContentEditable)return!0;const a=["button","checkbox","hidden","radio","reset","submit"];return s==="input"?a.indexOf(i.type)===-1:["textarea"].indexOf(s)!==-1})(this.el_.ownerDocument.activeElement)||(typeof t.hotkeys=="function"?t.hotkeys.call(this,e):this.handleHotkeys(e))}handleHotkeys(e){const t=this.options_.userActions?this.options_.userActions.hotkeys:{},{fullscreenKey:n=a=>e.key.toLowerCase()==="f",muteKey:i=a=>e.key.toLowerCase()==="m",playPauseKey:s=a=>e.key.toLowerCase()==="k"||e.key.toLowerCase()===" "}=t;if(n.call(this,e)){e.preventDefault(),e.stopPropagation();const a=mt.getComponent("FullscreenToggle");Fe[this.fsApi_.fullscreenEnabled]!==!1&&a.prototype.handleClick.call(this,e)}else i.call(this,e)?(e.preventDefault(),e.stopPropagation(),mt.getComponent("MuteToggle").prototype.handleClick.call(this,e)):s.call(this,e)&&(e.preventDefault(),e.stopPropagation(),mt.getComponent("PlayToggle").prototype.handleClick.call(this,e))}canPlayType(e){let t;for(let n=0,i=this.options_.techOrder;n<i.length;n++){const s=i[n];let a=Nn.getTech(s);if(a||(a=mt.getComponent(s)),!a){Kr.error(`The "${s}" tech is undefined. Skipped browser support check for that tech.`);continue}if(a.isSupported()&&(t=a.canPlayType(e),t))return t}return""}selectSource(e){const t=this.options_.techOrder.map(o=>[o,Nn.getTech(o)]).filter(([o,l])=>l?l.isSupported():(Kr.error(`The "${o}" tech is undefined. Skipped browser support check for that tech.`),!1)),n=function(o,l,u){let c;return o.some(h=>l.some(m=>{if(c=u(h,m),c)return!0})),c};let i;const s=o=>(l,u)=>o(u,l),a=([o,l],u)=>{if(l.canPlaySource(u,this.options_[o.toLowerCase()]))return{source:u,tech:o}};return this.options_.sourceOrder?i=n(e,t,s(a)):i=n(t,e,a),i||!1}handleSrc_(e,t){if(typeof e>"u")return this.cache_.src||"";this.resetRetryOnError_&&this.resetRetryOnError_();const n=c5(e);if(!n.length){this.setTimeout(function(){this.error({code:4,message:this.options_.notSupportedMessage})},0);return}if(this.changingSrc_=!0,t||(this.cache_.sources=n),this.updateSourceCaches_(n[0]),koe(this,n[0],(i,s)=>{if(this.middleware_=s,t||(this.cache_.sources=n),this.updateSourceCaches_(i),this.src_(i)){if(n.length>1)return this.handleSrc_(n.slice(1));this.changingSrc_=!1,this.setTimeout(function(){this.error({code:4,message:this.options_.notSupportedMessage})},0),this.triggerReady();return}Aoe(s,this.tech_)}),n.length>1){const i=()=>{this.error(null),this.handleSrc_(n.slice(1),!0)},s=()=>{this.off("error",i)};this.one("error",i),this.one("playing",s),this.resetRetryOnError_=()=>{this.off("error",i),this.off("playing",s)}}}src(e){return this.handleSrc_(e,!1)}src_(e){const t=this.selectSource([e]);return t?e5(t.tech,this.techName_)?(this.ready(function(){this.tech_.constructor.prototype.hasOwnProperty("setSource")?this.techCall_("setSource",e):this.techCall_("src",e.src),this.changingSrc_=!1},!0),!1):(this.changingSrc_=!0,this.loadTech_(t.tech,t.source),this.tech_.ready(()=>{this.changingSrc_=!1}),!1):!0}addSourceElement(e,t){return this.tech_?this.tech_.addSourceElement(e,t):!1}removeSourceElement(e){return this.tech_?this.tech_.removeSourceElement(e):!1}load(){if(this.tech_&&this.tech_.vhs){this.src(this.currentSource());return}this.techCall_("load")}reset(){if(this.paused())this.doReset_();else{const e=this.play();lu(e.then(()=>this.doReset_()))}}doReset_(){this.tech_&&this.tech_.clearTracks("text"),this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.resetCache_(),this.poster(""),this.loadTech_(this.options_.techOrder[0],null),this.techCall_("reset"),this.resetControlBarUI_(),this.error(null),this.titleBar&&this.titleBar.update({title:void 0,description:void 0}),yc(this)&&this.trigger("playerreset")}resetControlBarUI_(){this.resetProgressBar_(),this.resetPlaybackRate_(),this.resetVolumeBar_()}resetProgressBar_(){this.currentTime(0);const{currentTimeDisplay:e,durationDisplay:t,progressControl:n,remainingTimeDisplay:i}=this.controlBar||{},{seekBar:s}=n||{};e&&e.updateContent(),t&&t.updateContent(),i&&i.updateContent(),s&&(s.update(),s.loadProgressBar&&s.loadProgressBar.update())}resetPlaybackRate_(){this.playbackRate(this.defaultPlaybackRate()),this.handleTechRateChange_()}resetVolumeBar_(){this.volume(1),this.trigger("volumechange")}currentSources(){const e=this.currentSource(),t=[];return Object.keys(e).length!==0&&t.push(e),this.cache_.sources||t}currentSource(){return this.cache_.source||{}}currentSrc(){return this.currentSource()&&this.currentSource().src||""}currentType(){return this.currentSource()&&this.currentSource().type||""}preload(e){if(e!==void 0){this.techCall_("setPreload",e),this.options_.preload=e;return}return this.techGet_("preload")}autoplay(e){if(e===void 0)return this.options_.autoplay||!1;let t;typeof e=="string"&&/(any|play|muted)/.test(e)||e===!0&&this.options_.normalizeAutoplay?(this.options_.autoplay=e,this.manualAutoplay_(typeof e=="string"?e:"play"),t=!1):e?this.options_.autoplay=!0:this.options_.autoplay=!1,t=typeof t>"u"?this.options_.autoplay:t,this.tech_&&this.techCall_("setAutoplay",t)}playsinline(e){return e!==void 0&&(this.techCall_("setPlaysinline",e),this.options_.playsinline=e),this.techGet_("playsinline")}loop(e){if(e!==void 0){this.techCall_("setLoop",e),this.options_.loop=e;return}return this.techGet_("loop")}poster(e){if(e===void 0)return this.poster_;e||(e=""),e!==this.poster_&&(this.poster_=e,this.techCall_("setPoster",e),this.isPosterFromTech_=!1,this.trigger("posterchange"))}handleTechPosterChange_(){if((!this.poster_||this.options_.techCanOverridePoster)&&this.tech_&&this.tech_.poster){const e=this.tech_.poster()||"";e!==this.poster_&&(this.poster_=e,this.isPosterFromTech_=!0,this.trigger("posterchange"))}}controls(e){if(e===void 0)return!!this.controls_;e=!!e,this.controls_!==e&&(this.controls_=e,this.usingNativeControls()&&this.techCall_("setControls",e),this.controls_?(this.removeClass("vjs-controls-disabled"),this.addClass("vjs-controls-enabled"),this.trigger("controlsenabled"),this.usingNativeControls()||this.addTechControlsListeners_()):(this.removeClass("vjs-controls-enabled"),this.addClass("vjs-controls-disabled"),this.trigger("controlsdisabled"),this.usingNativeControls()||this.removeTechControlsListeners_()))}usingNativeControls(e){if(e===void 0)return!!this.usingNativeControls_;e=!!e,this.usingNativeControls_!==e&&(this.usingNativeControls_=e,this.usingNativeControls_?(this.addClass("vjs-using-native-controls"),this.trigger("usingnativecontrols")):(this.removeClass("vjs-using-native-controls"),this.trigger("usingcustomcontrols")))}error(e){if(e===void 0)return this.error_||null;if(Pd("beforeerror").forEach(t=>{const n=t(this,e);if(!(ku(n)&&!Array.isArray(n)||typeof n=="string"||typeof n=="number"||n===null)){this.log.error("please return a value that MediaError expects in beforeerror hooks");return}e=n}),this.options_.suppressNotSupportedError&&e&&e.code===4){const t=function(){this.error(e)};this.options_.suppressNotSupportedError=!1,this.any(["click","touchstart"],t),this.one("loadstart",function(){this.off(["click","touchstart"],t)});return}if(e===null){this.error_=null,this.removeClass("vjs-error"),this.errorDisplay&&this.errorDisplay.close();return}this.error_=new ni(e),this.addClass("vjs-error"),Kr.error(`(CODE:${this.error_.code} ${ni.errorTypes[this.error_.code]})`,this.error_.message,this.error_),this.trigger("error"),Pd("error").forEach(t=>t(this,this.error_))}reportUserActivity(e){this.userActivity_=!0}userActive(e){if(e===void 0)return this.userActive_;if(e=!!e,e!==this.userActive_){if(this.userActive_=e,this.userActive_){this.userActivity_=!0,this.removeClass("vjs-user-inactive"),this.addClass("vjs-user-active"),this.trigger("useractive");return}this.tech_&&this.tech_.one("mousemove",function(t){t.stopPropagation(),t.preventDefault()}),this.userActivity_=!1,this.removeClass("vjs-user-active"),this.addClass("vjs-user-inactive"),this.trigger("userinactive")}}listenForUserActivity_(){let e,t,n;const i=jn(this,this.reportUserActivity),s=function(h){(h.screenX!==t||h.screenY!==n)&&(t=h.screenX,n=h.screenY,i())},a=function(){i(),this.clearInterval(e),e=this.setInterval(i,250)},o=function(h){i(),this.clearInterval(e)};this.on("mousedown",a),this.on("mousemove",s),this.on("mouseup",o),this.on("mouseleave",o);const l=this.getChild("controlBar");l&&!oa&&!Au&&(l.on("mouseenter",function(h){this.player().options_.inactivityTimeout!==0&&(this.player().cache_.inactivityTimeout=this.player().options_.inactivityTimeout),this.player().options_.inactivityTimeout=0}),l.on("mouseleave",function(h){this.player().options_.inactivityTimeout=this.player().cache_.inactivityTimeout})),this.on("keydown",i),this.on("keyup",i);let u;const c=function(){if(!this.userActivity_)return;this.userActivity_=!1,this.userActive(!0),this.clearTimeout(u);const h=this.options_.inactivityTimeout;h<=0||(u=this.setTimeout(function(){this.userActivity_||this.userActive(!1)},h))};this.setInterval(c,250)}playbackRate(e){if(e!==void 0){this.techCall_("setPlaybackRate",e);return}return this.tech_&&this.tech_.featuresPlaybackRate?this.cache_.lastPlaybackRate||this.techGet_("playbackRate"):1}defaultPlaybackRate(e){return e!==void 0?this.techCall_("setDefaultPlaybackRate",e):this.tech_&&this.tech_.featuresPlaybackRate?this.techGet_("defaultPlaybackRate"):1}isAudio(e){if(e!==void 0){this.isAudio_=!!e;return}return!!this.isAudio_}updatePlayerHeightOnAudioOnlyMode_(){const e=this.getChild("ControlBar");!e||this.audioOnlyCache_.controlBarHeight===e.currentHeight()||(this.audioOnlyCache_.controlBarHeight=e.currentHeight(),this.height(this.audioOnlyCache_.controlBarHeight))}enableAudioOnlyUI_(){this.addClass("vjs-audio-only-mode");const e=this.children(),t=this.getChild("ControlBar"),n=t&&t.currentHeight();e.forEach(i=>{i!==t&&i.el_&&!i.hasClass("vjs-hidden")&&(i.hide(),this.audioOnlyCache_.hiddenChildren.push(i))}),this.audioOnlyCache_.playerHeight=this.currentHeight(),this.audioOnlyCache_.controlBarHeight=n,this.on("playerresize",this.boundUpdatePlayerHeightOnAudioOnlyMode_),this.height(n),this.trigger("audioonlymodechange")}disableAudioOnlyUI_(){this.removeClass("vjs-audio-only-mode"),this.off("playerresize",this.boundUpdatePlayerHeightOnAudioOnlyMode_),this.audioOnlyCache_.hiddenChildren.forEach(e=>e.show()),this.height(this.audioOnlyCache_.playerHeight),this.trigger("audioonlymodechange")}audioOnlyMode(e){if(typeof e!="boolean"||e===this.audioOnlyMode_)return this.audioOnlyMode_;if(this.audioOnlyMode_=e,e){const t=[];return this.isInPictureInPicture()&&t.push(this.exitPictureInPicture()),this.isFullscreen()&&t.push(this.exitFullscreen()),this.audioPosterMode()&&t.push(this.audioPosterMode(!1)),Promise.all(t).then(()=>this.enableAudioOnlyUI_())}return Promise.resolve().then(()=>this.disableAudioOnlyUI_())}enablePosterModeUI_(){(this.tech_&&this.tech_).hide(),this.addClass("vjs-audio-poster-mode"),this.trigger("audiopostermodechange")}disablePosterModeUI_(){(this.tech_&&this.tech_).show(),this.removeClass("vjs-audio-poster-mode"),this.trigger("audiopostermodechange")}audioPosterMode(e){return typeof e!="boolean"||e===this.audioPosterMode_?this.audioPosterMode_:(this.audioPosterMode_=e,e?this.audioOnlyMode()?this.audioOnlyMode(!1).then(()=>{this.enablePosterModeUI_()}):Promise.resolve().then(()=>{this.enablePosterModeUI_()}):Promise.resolve().then(()=>{this.disablePosterModeUI_()}))}addTextTrack(e,t,n){if(this.tech_)return this.tech_.addTextTrack(e,t,n)}addRemoteTextTrack(e,t){if(this.tech_)return this.tech_.addRemoteTextTrack(e,t)}removeRemoteTextTrack(e={}){let{track:t}=e;if(t||(t=e),this.tech_)return this.tech_.removeRemoteTextTrack(t)}getVideoPlaybackQuality(){return this.techGet_("getVideoPlaybackQuality")}videoWidth(){return this.tech_&&this.tech_.videoWidth&&this.tech_.videoWidth()||0}videoHeight(){return this.tech_&&this.tech_.videoHeight&&this.tech_.videoHeight()||0}language(e){if(e===void 0)return this.language_;this.language_!==String(e).toLowerCase()&&(this.language_=String(e).toLowerCase(),yc(this)&&this.trigger("languagechange"))}languages(){return Bn(zf.prototype.options_.languages,this.languages_)}toJSON(){const e=Bn(this.options_),t=e.tracks;e.tracks=[];for(let n=0;n<t.length;n++){let i=t[n];i=Bn(i),i.player=void 0,e.tracks[n]=i}return e}createModal(e,t){t=t||{},t.content=e||"";const n=new em(this,t);return this.addChild(n),n.on("dispose",()=>{this.removeChild(n)}),n.open(),n}updateCurrentBreakpoint_(){if(!this.responsive())return;const e=this.currentBreakpoint(),t=this.currentWidth();for(let n=0;n<Fw.length;n++){const i=Fw[n],s=this.breakpoints_[i];if(t<=s){if(e===i)return;e&&this.removeClass(b_[e]),this.addClass(b_[i]),this.breakpoint_=i;break}}}removeCurrentBreakpoint_(){const e=this.currentBreakpointClass();this.breakpoint_="",e&&this.removeClass(e)}breakpoints(e){return e===void 0?Object.assign(this.breakpoints_):(this.breakpoint_="",this.breakpoints_=Object.assign({},mle,e),this.updateCurrentBreakpoint_(),Object.assign(this.breakpoints_))}responsive(e){if(e===void 0)return this.responsive_;e=!!e;const t=this.responsive_;if(e!==t)return this.responsive_=e,e?(this.on("playerresize",this.boundUpdateCurrentBreakpoint_),this.updateCurrentBreakpoint_()):(this.off("playerresize",this.boundUpdateCurrentBreakpoint_),this.removeCurrentBreakpoint_()),e}currentBreakpoint(){return this.breakpoint_}currentBreakpointClass(){return b_[this.breakpoint_]||""}loadMedia(e,t){if(!e||typeof e!="object")return;const n=this.crossOrigin();this.reset(),this.cache_.media=Bn(e);const{artist:i,artwork:s,description:a,poster:o,src:l,textTracks:u,title:c}=this.cache_.media;!s&&o&&(this.cache_.media.artwork=[{src:o,type:hx(o)}]),n&&this.crossOrigin(n),l&&this.src(l),o&&this.poster(o),Array.isArray(u)&&u.forEach(h=>this.addRemoteTextTrack(h,!1)),this.titleBar&&this.titleBar.update({title:c,description:a||i||""}),this.ready(t)}getMedia(){if(!this.cache_.media){const e=this.poster(),t=this.currentSources(),n=Array.prototype.map.call(this.remoteTextTracks(),s=>({kind:s.kind,label:s.label,language:s.language,src:s.src})),i={src:t,textTracks:n};return e&&(i.poster=e,i.artwork=[{src:i.poster,type:hx(i.poster)}]),i}return Bn(this.cache_.media)}static getTagSettings(e){const t={sources:[],tracks:[]},n=md(e),i=n["data-setup"];if(w0(e,"vjs-fill")&&(n.fill=!0),w0(e,"vjs-fluid")&&(n.fluid=!0),i!==null)try{Object.assign(n,JSON.parse(i||"{}"))}catch(s){Kr.error("data-setup",s)}if(Object.assign(t,n),e.hasChildNodes()){const s=e.childNodes;for(let a=0,o=s.length;a<o;a++){const l=s[a],u=l.nodeName.toLowerCase();u==="source"?t.sources.push(md(l)):u==="track"&&t.tracks.push(md(l))}}return t}debug(e){if(e===void 0)return this.debugEnabled_;e?(this.trigger("debugon"),this.previousLogLevel_=this.log.level,this.log.level("debug"),this.debugEnabled_=!0):(this.trigger("debugoff"),this.log.level(this.previousLogLevel_),this.previousLogLevel_=void 0,this.debugEnabled_=!1)}playbackRates(e){if(e===void 0)return this.cache_.playbackRates;Array.isArray(e)&&e.every(t=>typeof t=="number")&&(this.cache_.playbackRates=e,this.trigger("playbackrateschange"))}};Zs.names.forEach(function(r){const e=Zs[r];Bi.prototype[e.getterName]=function(){return this.tech_?this.tech_[e.getterName]():(this[e.privateName]=this[e.privateName]||new e.ListClass,this[e.privateName])}});Bi.prototype.crossorigin=Bi.prototype.crossOrigin;Bi.players={};const e0=X.navigator;Bi.prototype.options_={techOrder:Nn.defaultTechOrder_,html5:{},enableSourceset:!0,inactivityTimeout:2e3,playbackRates:[],liveui:!1,children:["mediaLoader","posterImage","titleBar","textTrackDisplay","loadingSpinner","bigPlayButton","liveTracker","controlBar","errorDisplay","textTrackSettings","resizeManager"],language:e0&&(e0.languages&&e0.languages[0]||e0.userLanguage||e0.language)||"en",languages:{},notSupportedMessage:"No compatible source was found for this media.",normalizeAutoplay:!1,fullscreen:{options:{navigationUI:"hide"}},breakpoints:{},responsive:!1,audioOnlyMode:!1,audioPosterMode:!1,spatialNavigation:{enabled:!1,horizontalSeek:!1},enableSmoothSeeking:!1};$5.forEach(function(r){Bi.prototype[`handleTech${ui(r)}_`]=function(){return this.trigger(r)}});mt.registerComponent("Player",Bi);const fx="plugin",cp="activePlugins_",qf={},px=r=>qf.hasOwnProperty(r),S_=r=>px(r)?qf[r]:void 0,j5=(r,e)=>{r[cp]=r[cp]||{},r[cp][e]=!0},mx=(r,e,t)=>{const n=(t?"before":"")+"pluginsetup";r.trigger(n,e),r.trigger(n+":"+e.name,e)},gle=function(r,e){const t=function(){mx(this,{name:r,plugin:e,instance:null},!0);const n=e.apply(this,arguments);return j5(this,r),mx(this,{name:r,plugin:e,instance:n}),n};return Object.keys(e).forEach(function(n){t[n]=e[n]}),t},nM=(r,e)=>(e.prototype.name=r,function(...t){mx(this,{name:r,plugin:e,instance:null},!0);const n=new e(this,...t);return this[r]=()=>n,mx(this,n.getEventHash()),n});let Pu=class T_{constructor(e){if(this.constructor===T_)throw new Error("Plugin must be sub-classed; not directly instantiated.");this.player=e,this.log||(this.log=this.player.log.createLogger(this.name)),Q2(this),delete this.trigger,ZN(this,this.constructor.defaultState),j5(e,this.name),this.dispose=this.dispose.bind(this),e.on("dispose",this.dispose)}version(){return this.constructor.VERSION}getEventHash(e={}){return e.name=this.name,e.plugin=this.constructor,e.instance=this,e}trigger(e,t={}){return Zp(this.eventBusEl_,e,this.getEventHash(t))}handleStateChanged(e){}dispose(){const{name:e,player:t}=this;this.trigger("dispose"),this.off(),t.off("dispose",this.dispose),t[cp][e]=!1,this.player=this.state=null,t[e]=nM(e,qf[e])}static isBasic(e){const t=typeof e=="string"?S_(e):e;return typeof t=="function"&&!T_.prototype.isPrototypeOf(t.prototype)}static registerPlugin(e,t){if(typeof e!="string")throw new Error(`Illegal plugin name, "${e}", must be a string, was ${typeof e}.`);if(px(e))Kr.warn(`A plugin named "${e}" already exists. You may want to avoid re-registering plugins!`);else if(Bi.prototype.hasOwnProperty(e))throw new Error(`Illegal plugin name, "${e}", cannot share a name with an existing player method!`);if(typeof t!="function")throw new Error(`Illegal plugin for "${e}", must be a function, was ${typeof t}.`);return qf[e]=t,e!==fx&&(T_.isBasic(t)?Bi.prototype[e]=gle(e,t):Bi.prototype[e]=nM(e,t)),t}static deregisterPlugin(e){if(e===fx)throw new Error("Cannot de-register base plugin.");px(e)&&(delete qf[e],delete Bi.prototype[e])}static getPlugins(e=Object.keys(qf)){let t;return e.forEach(n=>{const i=S_(n);i&&(t=t||{},t[n]=i)}),t}static getPluginVersion(e){const t=S_(e);return t&&t.VERSION||""}};Pu.getPlugin=S_;Pu.BASE_PLUGIN_NAME=fx;Pu.registerPlugin(fx,Pu);Bi.prototype.usingPlugin=function(r){return!!this[cp]&&this[cp][r]===!0};Bi.prototype.hasPlugin=function(r){return!!px(r)};function vle(r,e){let t=!1;return function(...n){return t||Kr.warn(r),t=!0,e.apply(this,n)}}function Pl(r,e,t,n){return vle(`${e} is deprecated and will be removed in ${r}.0; please use ${t} instead.`,n)}var yle={NetworkBadStatus:"networkbadstatus",NetworkRequestFailed:"networkrequestfailed",NetworkRequestAborted:"networkrequestaborted",NetworkRequestTimeout:"networkrequesttimeout",NetworkBodyParserFailed:"networkbodyparserfailed",StreamingHlsPlaylistParserError:"streaminghlsplaylistparsererror",StreamingDashManifestParserError:"streamingdashmanifestparsererror",StreamingContentSteeringParserError:"streamingcontentsteeringparsererror",StreamingVttParserError:"streamingvttparsererror",StreamingFailedToSelectNextSegment:"streamingfailedtoselectnextsegment",StreamingFailedToDecryptSegment:"streamingfailedtodecryptsegment",StreamingFailedToTransmuxSegment:"streamingfailedtotransmuxsegment",StreamingFailedToAppendSegment:"streamingfailedtoappendsegment",StreamingCodecsChangeError:"streamingcodecschangeerror"};const z5=r=>r.indexOf("#")===0?r.slice(1):r;function Se(r,e,t){let n=Se.getPlayer(r);if(n)return e&&Kr.warn(`Player "${r}" is already initialised. Options will not be applied.`),t&&n.ready(t),n;const i=typeof r=="string"?Rd("#"+z5(r)):r;if(!Jp(i))throw new TypeError("The element or ID supplied is not valid. (videojs)");const a=("getRootNode"in i?i.getRootNode()instanceof X.ShadowRoot:!1)?i.getRootNode():i.ownerDocument.body;(!i.ownerDocument.defaultView||!a.contains(i))&&Kr.warn("The element supplied is not included in the DOM"),e=e||{},e.restoreEl===!0&&(e.restoreEl=(i.parentNode&&i.parentNode.hasAttribute&&i.parentNode.hasAttribute("data-vjs-player")?i.parentNode:i).cloneNode(!0)),Pd("beforesetup").forEach(l=>{const u=l(i,Bn(e));if(!ku(u)||Array.isArray(u)){Kr.error("please return an object in beforesetup hooks");return}e=Bn(e,u)});const o=mt.getComponent("Player");return n=new o(i,e,t),Pd("setup").forEach(l=>l(n)),n}Se.hooks_=hc;Se.hooks=Pd;Se.hook=Yae;Se.hookOnce=Qae;Se.removeHook=CN;if(X.VIDEOJS_NO_DYNAMIC_STYLE!==!0&&Qp()){let r=Rd(".vjs-styles-defaults");if(!r){r=KN("vjs-styles-defaults");const e=Rd("head");e&&e.insertBefore(r,e.firstChild),XN(r,`
      .video-js {
        width: 300px;
        height: 150px;
      }

      .vjs-fluid:not(.vjs-audio-only-mode) {
        padding-top: 56.25%
      }
    `)}}Dw(1,Se);Se.VERSION=ww;Se.options=Bi.prototype.options_;Se.getPlayers=()=>Bi.players;Se.getPlayer=r=>{const e=Bi.players;let t;if(typeof r=="string"){const n=z5(r),i=e[n];if(i)return i;t=Rd("#"+n)}else t=r;if(Jp(t)){const{player:n,playerId:i}=t;if(n||e[i])return n||e[i]}};Se.getAllPlayers=()=>Object.keys(Bi.players).map(r=>Bi.players[r]).filter(Boolean);Se.players=Bi.players;Se.getComponent=mt.getComponent;Se.registerComponent=(r,e)=>(Nn.isTech(e)&&Kr.warn(`The ${r} tech was registered as a component. It should instead be registered using videojs.registerTech(name, tech)`),mt.registerComponent.call(mt,r,e));Se.getTech=Nn.getTech;Se.registerTech=Nn.registerTech;Se.use=Eoe;Object.defineProperty(Se,"middleware",{value:{},writeable:!1,enumerable:!0});Object.defineProperty(Se.middleware,"TERMINATOR",{value:dx,writeable:!1,enumerable:!0});Se.browser=LN;Se.obj=eoe;Se.mergeOptions=Pl(9,"videojs.mergeOptions","videojs.obj.merge",Bn);Se.defineLazyProperty=Pl(9,"videojs.defineLazyProperty","videojs.obj.defineLazyProperty",zb);Se.bind=Pl(9,"videojs.bind","native Function.prototype.bind",jn);Se.registerPlugin=Pu.registerPlugin;Se.deregisterPlugin=Pu.deregisterPlugin;Se.plugin=(r,e)=>(Kr.warn("videojs.plugin() is deprecated; use videojs.registerPlugin() instead"),Pu.registerPlugin(r,e));Se.getPlugins=Pu.getPlugins;Se.getPlugin=Pu.getPlugin;Se.getPluginVersion=Pu.getPluginVersion;Se.addLanguage=function(r,e){return r=(""+r).toLowerCase(),Se.options.languages=Bn(Se.options.languages,{[r]:e}),Se.options.languages[r]};Se.log=Kr;Se.createLogger=wN;Se.time=moe;Se.createTimeRange=Pl(9,"videojs.createTimeRange","videojs.time.createTimeRanges",Cl);Se.createTimeRanges=Pl(9,"videojs.createTimeRanges","videojs.time.createTimeRanges",Cl);Se.formatTime=Pl(9,"videojs.formatTime","videojs.time.formatTime",Gh);Se.setFormatTime=Pl(9,"videojs.setFormatTime","videojs.time.setFormatTime",r5);Se.resetFormatTime=Pl(9,"videojs.resetFormatTime","videojs.time.resetFormatTime",n5);Se.parseUrl=Pl(9,"videojs.parseUrl","videojs.url.parseUrl",ek);Se.isCrossOrigin=Pl(9,"videojs.isCrossOrigin","videojs.url.isCrossOrigin",eS);Se.EventTarget=mo;Se.any=Y2;Se.on=po;Se.one=Jb;Se.off=Ns;Se.trigger=Zp;Se.xhr=sN;Se.TextTrack=Og;Se.AudioTrack=l5;Se.VideoTrack=u5;["isEl","isTextNode","createEl","hasClass","addClass","removeClass","toggleClass","setAttributes","getAttributes","emptyEl","appendContent","insertContent"].forEach(r=>{Se[r]=function(){return Kr.warn(`videojs.${r}() is deprecated; use videojs.dom.${r}() instead`),qN[r].apply(null,arguments)}});Se.computedStyle=Pl(9,"videojs.computedStyle","videojs.dom.computedStyle",Pp);Se.dom=qN;Se.fn=uoe;Se.num=Goe;Se.str=foe;Se.url=Coe;Se.Error=yle;/*! @name videojs-contrib-quality-levels @version 4.1.0 @license Apache-2.0 */class _le{constructor(e){let t=this;return t.id=e.id,t.label=t.id,t.width=e.width,t.height=e.height,t.bitrate=e.bandwidth,t.frameRate=e.frameRate,t.enabled_=e.enabled,Object.defineProperty(t,"enabled",{get(){return t.enabled_()},set(n){t.enabled_(n)}}),t}}class gx extends Se.EventTarget{constructor(){super();let e=this;return e.levels_=[],e.selectedIndex_=-1,Object.defineProperty(e,"selectedIndex",{get(){return e.selectedIndex_}}),Object.defineProperty(e,"length",{get(){return e.levels_.length}}),e[Symbol.iterator]=()=>e.levels_.values(),e}addQualityLevel(e){let t=this.getQualityLevelById(e.id);if(t)return t;const n=this.levels_.length;return t=new _le(e),""+n in this||Object.defineProperty(this,n,{get(){return this.levels_[n]}}),this.levels_.push(t),this.trigger({qualityLevel:t,type:"addqualitylevel"}),t}removeQualityLevel(e){let t=null;for(let n=0,i=this.length;n<i;n++)if(this[n]===e){t=this.levels_.splice(n,1)[0],this.selectedIndex_===n?this.selectedIndex_=-1:this.selectedIndex_>n&&this.selectedIndex_--;break}return t&&this.trigger({qualityLevel:e,type:"removequalitylevel"}),t}getQualityLevelById(e){for(let t=0,n=this.length;t<n;t++){const i=this[t];if(i.id===e)return i}return null}dispose(){this.selectedIndex_=-1,this.levels_.length=0}}gx.prototype.allowedEvents_={change:"change",addqualitylevel:"addqualitylevel",removequalitylevel:"removequalitylevel"};for(const r in gx.prototype.allowedEvents_)gx.prototype["on"+r]=null;var H5="4.1.0";const xle=function(r,e){const t=r.qualityLevels,n=new gx,i=function(){n.dispose(),r.qualityLevels=t,r.off("dispose",i)};return r.on("dispose",i),r.qualityLevels=()=>n,r.qualityLevels.VERSION=H5,n},V5=function(r){return xle(this,Se.obj.merge({},r))};Se.registerPlugin("qualityLevels",V5);V5.VERSION=H5;/*! @name @videojs/http-streaming @version 3.15.0 @license Apache-2.0 */const Pa=Pg,vx=(r,e)=>e&&e.responseURL&&r!==e.responseURL?e.responseURL:r,el=r=>Se.log.debug?Se.log.debug.bind(Se,"VHS:",`${r} >`):function(){};function Cn(...r){const e=Se.obj||Se;return(e.merge||e.mergeOptions).apply(e,r)}function vs(...r){const e=Se.time||Se;return(e.createTimeRanges||e.createTimeRanges).apply(e,r)}function ble(r){if(r.length===0)return"Buffered Ranges are empty";let e=`Buffered Ranges: 
`;for(let t=0;t<r.length;t++){const n=r.start(t),i=r.end(t);e+=`${n} --> ${i}. Duration (${i-n})
`}return e}const uu=1/30,cu=uu*3,W5=function(r,e){const t=[];let n;if(r&&r.length)for(n=0;n<r.length;n++)e(r.start(n),r.end(n))&&t.push([r.start(n),r.end(n)]);return vs(t)},Gf=function(r,e){return W5(r,function(t,n){return t-cu<=e&&n+cu>=e})},ry=function(r,e){return W5(r,function(t){return t-uu>=e})},Sle=function(r){if(r.length<2)return vs();const e=[];for(let t=1;t<r.length;t++){const n=r.end(t-1),i=r.start(t);e.push([n,i])}return vs(e)},Tle=function(r,e){let t=null,n=null,i=0;const s=[],a=[];if(!r||!r.length||!e||!e.length)return vs();let o=r.length;for(;o--;)s.push({time:r.start(o),type:"start"}),s.push({time:r.end(o),type:"end"});for(o=e.length;o--;)s.push({time:e.start(o),type:"start"}),s.push({time:e.end(o),type:"end"});for(s.sort(function(l,u){return l.time-u.time}),o=0;o<s.length;o++)s[o].type==="start"?(i++,i===2&&(t=s[o].time)):s[o].type==="end"&&(i--,i===1&&(n=s[o].time)),t!==null&&n!==null&&(a.push([t,n]),t=null,n=null);return vs(a)},q5=r=>{const e=[];if(!r||!r.length)return"";for(let t=0;t<r.length;t++)e.push(r.start(t)+" => "+r.end(t));return e.join(", ")},Cle=function(r,e,t=1){return((r.length?r.end(r.length-1):0)-e)/t},Eh=r=>{const e=[];for(let t=0;t<r.length;t++)e.push({start:r.start(t),end:r.end(t)});return e},wle=function(r,e){if(r===e)return!1;if(!r&&e||!e&&r||r.length!==e.length)return!0;for(let t=0;t<r.length;t++)if(r.start(t)!==e.start(t)||r.end(t)!==e.end(t))return!0;return!1},K1=function(r){if(!(!r||!r.length||!r.end))return r.end(r.length-1)},yk=function(r,e){let t=0;if(!r||!r.length)return t;for(let n=0;n<r.length;n++){const i=r.start(n),s=r.end(n);if(!(e>s)){if(e>i&&e<=s){t+=s-e;continue}t+=s-i}}return t},_k=(r,e)=>{if(!e.preload)return e.duration;let t=0;return(e.parts||[]).forEach(function(n){t+=n.duration}),(e.preloadHints||[]).forEach(function(n){n.type==="PART"&&(t+=r.partTargetDuration)}),t},Bw=r=>(r.segments||[]).reduce((e,t,n)=>(t.parts?t.parts.forEach(function(i,s){e.push({duration:i.duration,segmentIndex:n,partIndex:s,part:i,segment:t})}):e.push({duration:t.duration,segmentIndex:n,partIndex:null,segment:t,part:null}),e),[]),G5=r=>{const e=r.segments&&r.segments.length&&r.segments[r.segments.length-1];return e&&e.parts||[]},K5=({preloadSegment:r})=>{if(!r)return;const{parts:e,preloadHints:t}=r;let n=(t||[]).reduce((i,s)=>i+(s.type==="PART"?1:0),0);return n+=e&&e.length?e.length:0,n},X5=(r,e)=>{if(e.endList)return 0;if(r&&r.suggestedPresentationDelay)return r.suggestedPresentationDelay;const t=G5(e).length>0;return t&&e.serverControl&&e.serverControl.partHoldBack?e.serverControl.partHoldBack:t&&e.partTargetDuration?e.partTargetDuration*3:e.serverControl&&e.serverControl.holdBack?e.serverControl.holdBack:e.targetDuration?e.targetDuration*3:0},Ele=function(r,e){let t=0,n=e-r.mediaSequence,i=r.segments[n];if(i){if(typeof i.start<"u")return{result:i.start,precise:!0};if(typeof i.end<"u")return{result:i.end-i.duration,precise:!0}}for(;n--;){if(i=r.segments[n],typeof i.end<"u")return{result:t+i.end,precise:!0};if(t+=_k(r,i),typeof i.start<"u")return{result:t+i.start,precise:!0}}return{result:t,precise:!1}},kle=function(r,e){let t=0,n,i=e-r.mediaSequence;for(;i<r.segments.length;i++){if(n=r.segments[i],typeof n.start<"u")return{result:n.start-t,precise:!0};if(t+=_k(r,n),typeof n.end<"u")return{result:n.end-t,precise:!0}}return{result:-1,precise:!1}},Y5=function(r,e,t){if(typeof e>"u"&&(e=r.mediaSequence+r.segments.length),e<r.mediaSequence)return 0;const n=Ele(r,e);if(n.precise)return n.result;const i=kle(r,e);return i.precise?i.result:n.result+t},Q5=function(r,e,t){if(!r)return 0;if(typeof t!="number"&&(t=0),typeof e>"u"){if(r.totalDuration)return r.totalDuration;if(!r.endList)return X.Infinity}return Y5(r,e,t)},A0=function({defaultDuration:r,durationList:e,startIndex:t,endIndex:n}){let i=0;if(t>n&&([t,n]=[n,t]),t<0){for(let s=t;s<Math.min(0,n);s++)i+=r;t=0}for(let s=t;s<n;s++)i+=e[s].duration;return i},J5=function(r,e,t,n){if(!r||!r.segments)return null;if(r.endList)return Q5(r);if(e===null)return null;e=e||0;let i=Y5(r,r.mediaSequence+r.segments.length,e);return t&&(n=typeof n=="number"?n:X5(null,r),i-=n),Math.max(0,i)},Ale=function(r,e,t){const i=e||0;let s=J5(r,e,!0,t);return s===null?vs():(s<i&&(s=i),vs(i,s))},Dle=function({playlist:r,currentTime:e,startingSegmentIndex:t,startingPartIndex:n,startTime:i,exactManifestTimings:s}){let a=e-i;const o=Bw(r);let l=0;for(let u=0;u<o.length;u++){const c=o[u];if(t===c.segmentIndex&&!(typeof n=="number"&&typeof c.partIndex=="number"&&n!==c.partIndex)){l=u;break}}if(a<0){if(l>0)for(let u=l-1;u>=0;u--){const c=o[u];if(a+=c.duration,s){if(a<0)continue}else if(a+uu<=0)continue;return{partIndex:c.partIndex,segmentIndex:c.segmentIndex,startTime:i-A0({defaultDuration:r.targetDuration,durationList:o,startIndex:l,endIndex:u})}}return{partIndex:o[0]&&o[0].partIndex||null,segmentIndex:o[0]&&o[0].segmentIndex||0,startTime:e}}if(l<0){for(let u=l;u<0;u++)if(a-=r.targetDuration,a<0)return{partIndex:o[0]&&o[0].partIndex||null,segmentIndex:o[0]&&o[0].segmentIndex||0,startTime:e};l=0}for(let u=l;u<o.length;u++){const c=o[u];a-=c.duration;const h=c.duration>uu,m=a===0,g=h&&a+uu>=0;if(!((m||g)&&u!==o.length-1)){if(s){if(a>0)continue}else if(a-uu>=0)continue;return{partIndex:c.partIndex,segmentIndex:c.segmentIndex,startTime:i+A0({defaultDuration:r.targetDuration,durationList:o,startIndex:l,endIndex:u})}}}return{segmentIndex:o[o.length-1].segmentIndex,partIndex:o[o.length-1].partIndex,startTime:e}},Z5=function(r){return r.excludeUntil&&r.excludeUntil>Date.now()},xk=function(r){return r.excludeUntil&&r.excludeUntil===1/0},nS=function(r){const e=Z5(r);return!r.disabled&&!e},Ile=function(r){return r.disabled},Ple=function(r){for(let e=0;e<r.segments.length;e++)if(r.segments[e].key)return!0;return!1},e6=function(r,e){return e.attributes&&e.attributes[r]},Rle=function(r,e,t,n=0){return e6("BANDWIDTH",t)?(r*t.attributes.BANDWIDTH-n*8)/e:NaN},Nw=(r,e)=>{if(r.playlists.length===1)return!0;const t=e.attributes.BANDWIDTH||Number.MAX_VALUE;return r.playlists.filter(n=>nS(n)?(n.attributes.BANDWIDTH||0)<t:!1).length===0},bk=(r,e)=>!r&&!e||!r&&e||r&&!e?!1:!!(r===e||r.id&&e.id&&r.id===e.id||r.resolvedUri&&e.resolvedUri&&r.resolvedUri===e.resolvedUri||r.uri&&e.uri&&r.uri===e.uri),iM=function(r,e){const t=r&&r.mediaGroups&&r.mediaGroups.AUDIO||{};let n=!1;for(const i in t){for(const s in t[i])if(n=e(t[i][s]),n)break;if(n)break}return!!n},Ng=r=>{if(!r||!r.playlists||!r.playlists.length)return iM(r,t=>t.playlists&&t.playlists.length||t.uri);for(let e=0;e<r.playlists.length;e++){const t=r.playlists[e],n=t.attributes&&t.attributes.CODECS;if(!(n&&n.split(",").every(s=>$2(s))||iM(r,s=>bk(t,s))))return!1}return!0};var La={liveEdgeDelay:X5,duration:Q5,seekable:Ale,getMediaInfoForTime:Dle,isEnabled:nS,isDisabled:Ile,isExcluded:Z5,isIncompatible:xk,playlistEnd:J5,isAes:Ple,hasAttribute:e6,estimateSegmentRequestTime:Rle,isLowestEnabledRendition:Nw,isAudioOnly:Ng,playlistMatch:bk,segmentDurationWithParts:_k};const{log:t6}=Se,dp=(r,e)=>`${r}-${e}`,r6=(r,e,t)=>`placeholder-uri-${r}-${e}-${t}`,Lle=({onwarn:r,oninfo:e,manifestString:t,customTagParsers:n=[],customTagMappers:i=[],llhls:s})=>{const a=new oN;r&&a.on("warn",r),e&&a.on("info",e),n.forEach(u=>a.addParser(u)),i.forEach(u=>a.addTagMapper(u)),a.push(t),a.end();const o=a.manifest;if(s||(["preloadSegment","skip","serverControl","renditionReports","partInf","partTargetDuration"].forEach(function(u){o.hasOwnProperty(u)&&delete o[u]}),o.segments&&o.segments.forEach(function(u){["parts","preloadHints"].forEach(function(c){u.hasOwnProperty(c)&&delete u[c]})})),!o.targetDuration){let u=10;o.segments&&o.segments.length&&(u=o.segments.reduce((c,h)=>Math.max(c,h.duration),0)),r&&r({message:`manifest has no targetDuration defaulting to ${u}`}),o.targetDuration=u}const l=G5(o);if(l.length&&!o.partTargetDuration){const u=l.reduce((c,h)=>Math.max(c,h.duration),0);r&&(r({message:`manifest has no partTargetDuration defaulting to ${u}`}),t6.error("LL-HLS manifest has parts but lacks required #EXT-X-PART-INF:PART-TARGET value. See https://datatracker.ietf.org/doc/html/draft-pantos-hls-rfc8216bis-09#section-4.4.3.7. Playback is not guaranteed.")),o.partTargetDuration=u}return o},im=(r,e)=>{r.mediaGroups&&["AUDIO","SUBTITLES"].forEach(t=>{if(r.mediaGroups[t])for(const n in r.mediaGroups[t])for(const i in r.mediaGroups[t][n]){const s=r.mediaGroups[t][n][i];e(s,t,n,i)}})},n6=({playlist:r,uri:e,id:t})=>{r.id=t,r.playlistErrors_=0,e&&(r.uri=e),r.attributes=r.attributes||{}},Ole=r=>{let e=r.playlists.length;for(;e--;){const t=r.playlists[e];n6({playlist:t,id:dp(e,t.uri)}),t.resolvedUri=Pa(r.uri,t.uri),r.playlists[t.id]=t,r.playlists[t.uri]=t,t.attributes.BANDWIDTH||t6.warn("Invalid playlist STREAM-INF detected. Missing BANDWIDTH attribute.")}},Mle=r=>{im(r,e=>{e.uri&&(e.resolvedUri=Pa(r.uri,e.uri))})},Fle=(r,e)=>{const t=dp(0,e),n={mediaGroups:{AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},uri:X.location.href,resolvedUri:X.location.href,playlists:[{uri:e,id:t,resolvedUri:e,attributes:{}}]};return n.playlists[t]=n.playlists[0],n.playlists[e]=n.playlists[0],n},i6=(r,e,t=r6)=>{r.uri=e;for(let i=0;i<r.playlists.length;i++)if(!r.playlists[i].uri){const s=`placeholder-uri-${i}`;r.playlists[i].uri=s}const n=Ng(r);im(r,(i,s,a,o)=>{if(!i.playlists||!i.playlists.length){if(n&&s==="AUDIO"&&!i.uri)for(let l=0;l<r.playlists.length;l++){const u=r.playlists[l];if(u.attributes&&u.attributes.AUDIO&&u.attributes.AUDIO===a)return}i.playlists=[tr({},i)]}i.playlists.forEach(function(l,u){const c=t(s,a,o,l),h=dp(u,c);l.uri?l.resolvedUri=l.resolvedUri||Pa(r.uri,l.uri):(l.uri=u===0?c:h,l.resolvedUri=l.uri),l.id=l.id||h,l.attributes=l.attributes||{},r.playlists[l.id]=l,r.playlists[l.uri]=l})}),Ole(r),Mle(r)};let sM=class{constructor(){this.offset_=null,this.pendingDateRanges_=new Map,this.processedDateRanges_=new Map}setOffset(e=[]){if(this.offset_!==null||!e.length)return;const[t]=e;t.programDateTime!==void 0&&(this.offset_=t.programDateTime/1e3)}setPendingDateRanges(e=[]){if(!e.length)return;const[t]=e,n=t.startDate.getTime();this.trimProcessedDateRanges_(n),this.pendingDateRanges_=e.reduce((i,s)=>(i.set(s.id,s),i),new Map)}processDateRange(e){this.pendingDateRanges_.delete(e.id),this.processedDateRanges_.set(e.id,e)}getDateRangesToProcess(){if(this.offset_===null)return[];const e={},t=[];this.pendingDateRanges_.forEach((n,i)=>{if(!this.processedDateRanges_.has(i)&&(n.startTime=n.startDate.getTime()/1e3-this.offset_,n.processDateRange=()=>this.processDateRange(n),t.push(n),!!n.class))if(e[n.class]){const s=e[n.class].push(n);n.classListIndex=s-1}else e[n.class]=[n],n.classListIndex=0});for(const n of t){const i=e[n.class]||[];n.endDate?n.endTime=n.endDate.getTime()/1e3-this.offset_:n.endOnNext&&i[n.classListIndex+1]?n.endTime=i[n.classListIndex+1].startTime:n.duration?n.endTime=n.startTime+n.duration:n.plannedDuration?n.endTime=n.startTime+n.plannedDuration:n.endTime=n.startTime}return t}trimProcessedDateRanges_(e){new Map(this.processedDateRanges_).forEach((n,i)=>{n.startDate.getTime()<e&&this.processedDateRanges_.delete(i)})}};const s6=22,Fh=({requestType:r,request:e,error:t,parseFailure:n})=>{const i=e.status<200||e.status>299,s=e.status>=400&&e.status<=499,a={uri:e.uri,requestType:r},o=i&&!s||n;if(t&&s)a.error=tr({},t),a.errorType=Se.Error.NetworkRequestFailed;else if(e.aborted)a.errorType=Se.Error.NetworkRequestAborted;else if(e.timedout)a.erroType=Se.Error.NetworkRequestTimeout;else if(o){const l=n?Se.Error.NetworkBodyParserFailed:Se.Error.NetworkBadStatus;a.errorType=l,a.status=e.status,a.headers=e.headers}return a},{EventTarget:Ble}=Se,Nle=(r,e)=>{if(e.endList||!e.serverControl)return r;const t={};if(e.serverControl.canBlockReload){const{preloadSegment:n}=e;let i=e.mediaSequence+e.segments.length;if(n){const s=n.parts||[],a=K5(e)-1;a>-1&&a!==s.length-1&&(t._HLS_part=a),(a>-1||s.length)&&i--}t._HLS_msn=i}if(e.serverControl&&e.serverControl.canSkipUntil&&(t._HLS_skip=e.serverControl.canSkipDateranges?"v2":"YES"),Object.keys(t).length){const n=new X.URL(r);["_HLS_skip","_HLS_msn","_HLS_part"].forEach(function(i){t.hasOwnProperty(i)&&n.searchParams.set(i,t[i])}),r=n.toString()}return r},Ule=(r,e)=>{if(!r)return e;const t=Cn(r,e);if(r.preloadHints&&!e.preloadHints&&delete t.preloadHints,r.parts&&!e.parts)delete t.parts;else if(r.parts&&e.parts)for(let n=0;n<e.parts.length;n++)r.parts&&r.parts[n]&&(t.parts[n]=Cn(r.parts[n],e.parts[n]));return!r.skipped&&e.skipped&&(t.skipped=!1),r.preload&&!e.preload&&(t.preload=!1),t},$le=(r,e,t)=>{const n=r.slice(),i=e.slice();t=t||0;const s=[];let a;for(let o=0;o<i.length;o++){const l=n[o+t],u=i[o];l?(a=l.map||a,s.push(Ule(l,u))):(a&&!u.map&&(u.map=a),s.push(u))}return s},a6=(r,e)=>{!r.resolvedUri&&r.uri&&(r.resolvedUri=Pa(e,r.uri)),r.key&&!r.key.resolvedUri&&(r.key.resolvedUri=Pa(e,r.key.uri)),r.map&&!r.map.resolvedUri&&(r.map.resolvedUri=Pa(e,r.map.uri)),r.map&&r.map.key&&!r.map.key.resolvedUri&&(r.map.key.resolvedUri=Pa(e,r.map.key.uri)),r.parts&&r.parts.length&&r.parts.forEach(t=>{t.resolvedUri||(t.resolvedUri=Pa(e,t.uri))}),r.preloadHints&&r.preloadHints.length&&r.preloadHints.forEach(t=>{t.resolvedUri||(t.resolvedUri=Pa(e,t.uri))})},o6=function(r){const e=r.segments||[],t=r.preloadSegment;if(t&&t.parts&&t.parts.length){if(t.preloadHints){for(let n=0;n<t.preloadHints.length;n++)if(t.preloadHints[n].type==="MAP")return e}t.duration=r.targetDuration,t.preload=!0,e.push(t)}return e},l6=(r,e)=>r===e||r.segments&&e.segments&&r.segments.length===e.segments.length&&r.endList===e.endList&&r.mediaSequence===e.mediaSequence&&r.preloadSegment===e.preloadSegment,Uw=(r,e,t=l6)=>{const n=Cn(r,{}),i=n.playlists[e.id];if(!i||t(i,e))return null;e.segments=o6(e);const s=Cn(i,e);if(s.preloadSegment&&!e.preloadSegment&&delete s.preloadSegment,i.segments){if(e.skip){e.segments=e.segments||[];for(let a=0;a<e.skip.skippedSegments;a++)e.segments.unshift({skipped:!0})}s.segments=$le(i.segments,e.segments,e.mediaSequence-i.mediaSequence)}s.segments.forEach(a=>{a6(a,s.resolvedUri)});for(let a=0;a<n.playlists.length;a++)n.playlists[a].id===e.id&&(n.playlists[a]=s);return n.playlists[e.id]=s,n.playlists[e.uri]=s,im(r,(a,o,l,u)=>{if(a.playlists)for(let c=0;c<a.playlists.length;c++)e.id===a.playlists[c].id&&(a.playlists[c]=s)}),n},$w=(r,e)=>{const t=r.segments||[],n=t[t.length-1],i=n&&n.parts&&n.parts[n.parts.length-1],s=i&&i.duration||n&&n.duration;return e&&s?s*1e3:(r.partTargetDuration||r.targetDuration||10)*500},aM=(r,e,t)=>{if(!r)return;const n=[];return r.forEach(i=>{if(!i.attributes)return;const{BANDWIDTH:s,RESOLUTION:a,CODECS:o}=i.attributes;n.push({id:i.id,bandwidth:s,resolution:a,codecs:o})}),{type:e,isLive:t,renditions:n}};let Kf=class extends Ble{constructor(e,t,n={}){if(super(),!e)throw new Error("A non-empty playlist URL or object is required");this.logger_=el("PlaylistLoader");const{withCredentials:i=!1}=n;this.src=e,this.vhs_=t,this.withCredentials=i,this.addDateRangesToTextTrack_=n.addDateRangesToTextTrack;const s=t.options_;this.customTagParsers=s&&s.customTagParsers||[],this.customTagMappers=s&&s.customTagMappers||[],this.llhls=s&&s.llhls,this.dateRangesStorage_=new sM,this.state="HAVE_NOTHING",this.handleMediaupdatetimeout_=this.handleMediaupdatetimeout_.bind(this),this.on("mediaupdatetimeout",this.handleMediaupdatetimeout_),this.on("loadedplaylist",this.handleLoadedPlaylist_.bind(this))}handleLoadedPlaylist_(){const e=this.media();if(!e)return;this.dateRangesStorage_.setOffset(e.segments),this.dateRangesStorage_.setPendingDateRanges(e.dateRanges);const t=this.dateRangesStorage_.getDateRangesToProcess();!t.length||!this.addDateRangesToTextTrack_||this.addDateRangesToTextTrack_(t)}handleMediaupdatetimeout_(){if(this.state!=="HAVE_METADATA")return;const e=this.media();let t=Pa(this.main.uri,e.uri);this.llhls&&(t=Nle(t,e)),this.state="HAVE_CURRENT_METADATA",this.request=this.vhs_.xhr({uri:t,withCredentials:this.withCredentials,requestType:"hls-playlist"},(n,i)=>{if(this.request){if(n)return this.playlistRequestError(this.request,this.media(),"HAVE_METADATA");this.haveMetadata({playlistString:this.request.responseText,url:this.media().uri,id:this.media().id})}})}playlistRequestError(e,t,n){const{uri:i,id:s}=t;this.request=null,n&&(this.state=n),this.error={playlist:this.main.playlists[s],status:e.status,message:`HLS playlist request error at URL: ${i}.`,responseText:e.responseText,code:e.status>=500?4:2,metadata:Fh({requestType:e.requestType,request:e,error:e.error})},this.trigger("error")}parseManifest_({url:e,manifestString:t}){try{return Lle({onwarn:({message:n})=>this.logger_(`m3u8-parser warn for ${e}: ${n}`),oninfo:({message:n})=>this.logger_(`m3u8-parser info for ${e}: ${n}`),manifestString:t,customTagParsers:this.customTagParsers,customTagMappers:this.customTagMappers,llhls:this.llhls})}catch(n){this.error=n,this.error.metadata={errorType:Se.Error.StreamingHlsPlaylistParserError,error:n}}}haveMetadata({playlistString:e,playlistObject:t,url:n,id:i}){this.request=null,this.state="HAVE_METADATA";const s={playlistInfo:{type:"media",uri:n}};this.trigger({type:"playlistparsestart",metadata:s});const a=t||this.parseManifest_({url:n,manifestString:e});a.lastRequest=Date.now(),n6({playlist:a,uri:n,id:i});const o=Uw(this.main,a);this.targetDuration=a.partTargetDuration||a.targetDuration,this.pendingMedia_=null,o?(this.main=o,this.media_=this.main.playlists[i]):this.trigger("playlistunchanged"),this.updateMediaUpdateTimeout_($w(this.media(),!!o)),s.parsedPlaylist=aM(this.main.playlists,s.playlistInfo.type,!this.media_.endList),this.trigger({type:"playlistparsecomplete",metadata:s}),this.trigger("loadedplaylist")}dispose(){this.trigger("dispose"),this.stopRequest(),X.clearTimeout(this.mediaUpdateTimeout),X.clearTimeout(this.finalRenditionTimeout),this.dateRangesStorage_=new sM,this.off()}stopRequest(){if(this.request){const e=this.request;this.request=null,e.onreadystatechange=null,e.abort()}}media(e,t){if(!e)return this.media_;if(this.state==="HAVE_NOTHING")throw new Error("Cannot switch media playlist from "+this.state);if(typeof e=="string"){if(!this.main.playlists[e])throw new Error("Unknown playlist URI: "+e);e=this.main.playlists[e]}if(X.clearTimeout(this.finalRenditionTimeout),t){const o=(e.partTargetDuration||e.targetDuration)/2*1e3||5e3;this.finalRenditionTimeout=X.setTimeout(this.media.bind(this,e,!1),o);return}const n=this.state,i=!this.media_||e.id!==this.media_.id,s=this.main.playlists[e.id];if(s&&s.endList||e.endList&&e.segments.length){this.request&&(this.request.onreadystatechange=null,this.request.abort(),this.request=null),this.state="HAVE_METADATA",this.media_=e,i&&(this.trigger("mediachanging"),n==="HAVE_MAIN_MANIFEST"?this.trigger("loadedmetadata"):this.trigger("mediachange"));return}if(this.updateMediaUpdateTimeout_($w(e,!0)),!i)return;if(this.state="SWITCHING_MEDIA",this.request){if(e.resolvedUri===this.request.url)return;this.request.onreadystatechange=null,this.request.abort(),this.request=null}this.media_&&this.trigger("mediachanging"),this.pendingMedia_=e;const a={playlistInfo:{type:"media",uri:e.uri}};this.trigger({type:"playlistrequeststart",metadata:a}),this.request=this.vhs_.xhr({uri:e.resolvedUri,withCredentials:this.withCredentials,requestType:"hls-playlist"},(o,l)=>{if(this.request){if(e.lastRequest=Date.now(),e.resolvedUri=vx(e.resolvedUri,l),o)return this.playlistRequestError(this.request,e,n);this.trigger({type:"playlistrequestcomplete",metadata:a}),this.haveMetadata({playlistString:l.responseText,url:e.uri,id:e.id}),n==="HAVE_MAIN_MANIFEST"?this.trigger("loadedmetadata"):this.trigger("mediachange")}})}pause(){this.mediaUpdateTimeout&&(X.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null),this.stopRequest(),this.state==="HAVE_NOTHING"&&(this.started=!1),this.state==="SWITCHING_MEDIA"?this.media_?this.state="HAVE_METADATA":this.state="HAVE_MAIN_MANIFEST":this.state==="HAVE_CURRENT_METADATA"&&(this.state="HAVE_METADATA")}load(e){this.mediaUpdateTimeout&&(X.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null);const t=this.media();if(e){const n=t?(t.partTargetDuration||t.targetDuration)/2*1e3:5e3;this.mediaUpdateTimeout=X.setTimeout(()=>{this.mediaUpdateTimeout=null,this.load()},n);return}if(!this.started){this.start();return}t&&!t.endList?this.trigger("mediaupdatetimeout"):this.trigger("loadedplaylist")}updateMediaUpdateTimeout_(e){this.mediaUpdateTimeout&&(X.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null),!(!this.media()||this.media().endList)&&(this.mediaUpdateTimeout=X.setTimeout(()=>{this.mediaUpdateTimeout=null,this.trigger("mediaupdatetimeout"),this.updateMediaUpdateTimeout_(e)},e))}start(){if(this.started=!0,typeof this.src=="object"){this.src.uri||(this.src.uri=X.location.href),this.src.resolvedUri=this.src.uri,setTimeout(()=>{this.setupInitialPlaylist(this.src)},0);return}const e={playlistInfo:{type:"multivariant",uri:this.src}};this.trigger({type:"playlistrequeststart",metadata:e}),this.request=this.vhs_.xhr({uri:this.src,withCredentials:this.withCredentials,requestType:"hls-playlist"},(t,n)=>{if(!this.request)return;if(this.request=null,t)return this.error={status:n.status,message:`HLS playlist request error at URL: ${this.src}.`,responseText:n.responseText,code:2,metadata:Fh({requestType:n.requestType,request:n,error:t})},this.state==="HAVE_NOTHING"&&(this.started=!1),this.trigger("error");this.trigger({type:"playlistrequestcomplete",metadata:e}),this.src=vx(this.src,n),this.trigger({type:"playlistparsestart",metadata:e});const i=this.parseManifest_({manifestString:n.responseText,url:this.src});e.parsedPlaylist=aM(i.playlists,e.playlistInfo.type,!1),this.trigger({type:"playlistparsecomplete",metadata:e}),this.setupInitialPlaylist(i)})}srcUri(){return typeof this.src=="string"?this.src:this.src.uri}setupInitialPlaylist(e){if(this.state="HAVE_MAIN_MANIFEST",e.playlists){this.main=e,i6(this.main,this.srcUri()),e.playlists.forEach(n=>{n.segments=o6(n),n.segments.forEach(i=>{a6(i,n.resolvedUri)})}),this.trigger("loadedplaylist"),this.request||this.media(this.main.playlists[0]);return}const t=this.srcUri()||X.location.href;this.main=Fle(e,t),this.haveMetadata({playlistObject:e,url:t,id:this.main.playlists[0].id}),this.trigger("loadedmetadata")}updateOrDeleteClone(e,t){const n=this.main,i=e.ID;let s=n.playlists.length;for(;s--;){const a=n.playlists[s];if(a.attributes["PATHWAY-ID"]===i){const o=a.resolvedUri,l=a.id;if(t){const u=this.createCloneURI_(a.resolvedUri,e),c=dp(i,u),h=this.createCloneAttributes_(i,a.attributes),m=this.createClonePlaylist_(a,c,e,h);n.playlists[s]=m,n.playlists[c]=m,n.playlists[u]=m}else n.playlists.splice(s,1);delete n.playlists[l],delete n.playlists[o]}}this.updateOrDeleteCloneMedia(e,t)}updateOrDeleteCloneMedia(e,t){const n=this.main,i=e.ID;["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(s=>{if(!(!n.mediaGroups[s]||!n.mediaGroups[s][i])){for(const a in n.mediaGroups[s])if(a===i){for(const o in n.mediaGroups[s][a])n.mediaGroups[s][a][o].playlists.forEach((u,c)=>{const h=n.playlists[u.id],m=h.id,g=h.resolvedUri;delete n.playlists[m],delete n.playlists[g]});delete n.mediaGroups[s][a]}}}),t&&this.createClonedMediaGroups_(e)}addClonePathway(e,t={}){const n=this.main,i=n.playlists.length,s=this.createCloneURI_(t.resolvedUri,e),a=dp(e.ID,s),o=this.createCloneAttributes_(e.ID,t.attributes),l=this.createClonePlaylist_(t,a,e,o);n.playlists[i]=l,n.playlists[a]=l,n.playlists[s]=l,this.createClonedMediaGroups_(e)}createClonedMediaGroups_(e){const t=e.ID,n=e["BASE-ID"],i=this.main;["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(s=>{if(!(!i.mediaGroups[s]||i.mediaGroups[s][t]))for(const a in i.mediaGroups[s]){if(a===n)i.mediaGroups[s][t]={};else continue;for(const o in i.mediaGroups[s][a]){const l=i.mediaGroups[s][a][o];i.mediaGroups[s][t][o]=tr({},l);const u=i.mediaGroups[s][t][o],c=this.createCloneURI_(l.resolvedUri,e);u.resolvedUri=c,u.uri=c,u.playlists=[],l.playlists.forEach((h,m)=>{const g=i.playlists[h.id],y=r6(s,t,o),v=dp(t,y);if(g&&!i.playlists[v]){const x=this.createClonePlaylist_(g,v,e),w=x.resolvedUri;i.playlists[v]=x,i.playlists[w]=x}u.playlists[m]=this.createClonePlaylist_(h,v,e)})}}})}createClonePlaylist_(e,t,n,i){const s=this.createCloneURI_(e.resolvedUri,n),a={resolvedUri:s,uri:s,id:t};return e.segments&&(a.segments=[]),i&&(a.attributes=i),Cn(e,a)}createCloneURI_(e,t){const n=new URL(e);n.hostname=t["URI-REPLACEMENT"].HOST;const i=t["URI-REPLACEMENT"].PARAMS;for(const s of Object.keys(i))n.searchParams.set(s,i[s]);return n.href}createCloneAttributes_(e,t){const n={"PATHWAY-ID":e};return["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(i=>{t[i]&&(n[i]=e)}),n}getKeyIdSet(e){if(e.contentProtection){const t=new Set;for(const n in e.contentProtection){const i=e.contentProtection[n].attributes.keyId;i&&t.add(i.toLowerCase())}return t}}};const jw=function(r,e,t,n){const i=r.responseType==="arraybuffer"?r.response:r.responseText;!e&&i&&(r.responseTime=Date.now(),r.roundTripTime=r.responseTime-r.requestTime,r.bytesReceived=i.byteLength||i.length,r.bandwidth||(r.bandwidth=Math.floor(r.bytesReceived/r.roundTripTime*8*1e3))),t.headers&&(r.responseHeaders=t.headers),e&&e.code==="ETIMEDOUT"&&(r.timedout=!0),!e&&!r.aborted&&t.statusCode!==200&&t.statusCode!==206&&t.statusCode!==0&&(e=new Error("XHR Failed with a response of: "+(r&&(i||r.responseText)))),n(e,r)},jle=(r,e)=>{if(!r||!r.size)return;let t=e;return r.forEach(n=>{t=n(t)}),t},zle=(r,e,t,n)=>{!r||!r.size||r.forEach(i=>{i(e,t,n)})},u6=function(){const r=function e(t,n){t=Cn({timeout:45e3},t);const i=e.beforeRequest||Se.Vhs.xhr.beforeRequest,s=e._requestCallbackSet||Se.Vhs.xhr._requestCallbackSet||new Set,a=e._responseCallbackSet||Se.Vhs.xhr._responseCallbackSet;i&&typeof i=="function"&&(Se.log.warn("beforeRequest is deprecated, use onRequest instead."),s.add(i));const o=Se.Vhs.xhr.original===!0?Se.xhr:Se.Vhs.xhr,l=jle(s,t);s.delete(i);const u=o(l||t,function(h,m){return zle(a,u,h,m),jw(u,h,m,n)}),c=u.abort;return u.abort=function(){return u.aborted=!0,c.apply(u,arguments)},u.uri=t.uri,u.requestType=t.requestType,u.requestTime=Date.now(),u};return r.original=!0,r},Hle=function(r){let e;const t=r.offset;return typeof r.offset=="bigint"||typeof r.length=="bigint"?e=X.BigInt(r.offset)+X.BigInt(r.length)-X.BigInt(1):e=r.offset+r.length-1,"bytes="+t+"-"+e},zw=function(r){const e={};return r.byterange&&(e.Range=Hle(r.byterange)),e},Vle=function(r,e){return r.start(e)+"-"+r.end(e)},Wle=function(r,e){const t=r.toString(16);return"00".substring(0,2-t.length)+t+(e%2?" ":"")},qle=function(r){return r>=32&&r<126?String.fromCharCode(r):"."},c6=function(r){const e={};return Object.keys(r).forEach(t=>{const n=r[t];j2(n)?e[t]={bytes:n.buffer,byteOffset:n.byteOffset,byteLength:n.byteLength}:e[t]=n}),e},yx=function(r){const e=r.byterange||{length:1/0,offset:0};return[e.length,e.offset,r.resolvedUri].join(",")},d6=function(r){return r.resolvedUri},h6=r=>{const e=Array.prototype.slice.call(r),t=16;let n="",i,s;for(let a=0;a<e.length/t;a++)i=e.slice(a*t,a*t+t).map(Wle).join(""),s=e.slice(a*t,a*t+t).map(qle).join(""),n+=i+" "+s+`
`;return n},Gle=({bytes:r})=>h6(r),Kle=r=>{let e="",t;for(t=0;t<r.length;t++)e+=Vle(r,t)+" ";return e};var Xle=Object.freeze({__proto__:null,createTransferableMessage:c6,initSegmentId:yx,segmentKeyId:d6,hexDump:h6,tagDump:Gle,textRanges:Kle});const f6=.25,Yle=(r,e)=>{if(!e.dateTimeObject)return null;const t=e.videoTimingInfo.transmuxerPrependedSeconds,i=e.videoTimingInfo.transmuxedPresentationStart+t,s=r-i;return new Date(e.dateTimeObject.getTime()+s*1e3)},Qle=r=>r.transmuxedPresentationEnd-r.transmuxedPresentationStart-r.transmuxerPrependedSeconds,Jle=(r,e)=>{let t;try{t=new Date(r)}catch{return null}if(!e||!e.segments||e.segments.length===0)return null;let n=e.segments[0];if(t<new Date(n.dateTimeObject))return null;for(let l=0;l<e.segments.length-1;l++){n=e.segments[l];const u=new Date(e.segments[l+1].dateTimeObject);if(t<u)break}const i=e.segments[e.segments.length-1],s=i.dateTimeObject,a=i.videoTimingInfo?Qle(i.videoTimingInfo):i.duration+i.duration*f6,o=new Date(s.getTime()+a*1e3);return t>o?null:(t>new Date(s)&&(n=i),{segment:n,estimatedStart:n.videoTimingInfo?n.videoTimingInfo.transmuxedPresentationStart:La.duration(e,e.mediaSequence+e.segments.indexOf(n)),type:n.videoTimingInfo?"accurate":"estimate"})},Zle=(r,e)=>{if(!e||!e.segments||e.segments.length===0)return null;let t=0,n;for(let s=0;s<e.segments.length&&(n=e.segments[s],t=n.videoTimingInfo?n.videoTimingInfo.transmuxedPresentationEnd:t+n.duration,!(r<=t));s++);const i=e.segments[e.segments.length-1];if(i.videoTimingInfo&&i.videoTimingInfo.transmuxedPresentationEnd<r)return null;if(r>t){if(r>t+i.duration*f6)return null;n=i}return{segment:n,estimatedStart:n.videoTimingInfo?n.videoTimingInfo.transmuxedPresentationStart:t-n.duration,type:n.videoTimingInfo?"accurate":"estimate"}},eue=(r,e)=>{let t,n;try{t=new Date(r),n=new Date(e)}catch{}const i=t.getTime();return(n.getTime()-i)/1e3},tue=r=>{if(!r.segments||r.segments.length===0)return!1;for(let e=0;e<r.segments.length;e++)if(!r.segments[e].dateTimeObject)return!1;return!0},rue=({playlist:r,time:e=void 0,callback:t})=>{if(!t)throw new Error("getProgramTime: callback must be provided");if(!r||e===void 0)return t({message:"getProgramTime: playlist and time must be provided"});const n=Zle(e,r);if(!n)return t({message:"valid programTime was not found"});if(n.type==="estimate")return t({message:"Accurate programTime could not be determined. Please seek to e.seekTime and try again",seekTime:n.estimatedStart});const i={mediaSeconds:e},s=Yle(e,n.segment);return s&&(i.programDateTime=s.toISOString()),t(null,i)},p6=({programTime:r,playlist:e,retryCount:t=2,seekTo:n,pauseAfterSeek:i=!0,tech:s,callback:a})=>{if(!a)throw new Error("seekToProgramTime: callback must be provided");if(typeof r>"u"||!e||!n)return a({message:"seekToProgramTime: programTime, seekTo and playlist must be provided"});if(!e.endList&&!s.hasStarted_)return a({message:"player must be playing a live stream to start buffering"});if(!tue(e))return a({message:"programDateTime tags must be provided in the manifest "+e.resolvedUri});const o=Jle(r,e);if(!o)return a({message:`${r} was not found in the stream`});const l=o.segment,u=eue(l.dateTimeObject,r);if(o.type==="estimate"){if(t===0)return a({message:`${r} is not buffered yet. Try again`});n(o.estimatedStart+u),s.one("seeked",()=>{p6({programTime:r,playlist:e,retryCount:t-1,seekTo:n,pauseAfterSeek:i,tech:s,callback:a})});return}const c=l.start+u,h=()=>a(null,s.currentTime());s.one("seeked",h),i&&s.pause(),n(c)},X1=(r,e)=>{if(r.readyState===4)return e()},nue=(r,e,t,n)=>{let i=[],s,a=!1;const o=function(h,m,g,y){return m.abort(),a=!0,t(h,m,g,y)},l=function(h,m){if(a)return;if(h)return h.metadata=Fh({requestType:n,request:m,error:h}),o(h,m,"",i);const g=m.responseText.substring(i&&i.byteLength||0,m.responseText.length);if(i=cN(i,z2(g,!0)),s=s||Wf(i),i.length<10||s&&i.length<s+2)return X1(m,()=>o(h,m,"",i));const y=Yp(i);return y==="ts"&&i.length<188?X1(m,()=>o(h,m,"",i)):!y&&i.length<376?X1(m,()=>o(h,m,"",i)):o(null,m,y,i)},c=e({uri:r,beforeSend(h){h.overrideMimeType("text/plain; charset=x-user-defined"),h.addEventListener("progress",function({total:m,loaded:g}){return jw(h,null,{statusCode:h.status},l)})}},function(h,m){return jw(c,h,m,l)});return c},{EventTarget:iue}=Se,oM=function(r,e){if(!l6(r,e)||r.sidx&&e.sidx&&(r.sidx.offset!==e.sidx.offset||r.sidx.length!==e.sidx.length))return!1;if(!r.sidx&&e.sidx||r.sidx&&!e.sidx||r.segments&&!e.segments||!r.segments&&e.segments)return!1;if(!r.segments&&!e.segments)return!0;for(let t=0;t<r.segments.length;t++){const n=r.segments[t],i=e.segments[t];if(n.uri!==i.uri)return!1;if(!n.byterange&&!i.byterange)continue;const s=n.byterange,a=i.byterange;if(s&&!a||!s&&a||s.offset!==a.offset||s.length!==a.length)return!1}return!0},sue=(r,e,t,n)=>{const i=n.attributes.NAME||t;return`placeholder-uri-${r}-${e}-${i}`},aue=({mainXml:r,srcUrl:e,clientOffset:t,sidxMapping:n,previousManifest:i})=>{const s=_N(r,{manifestUri:e,clientOffset:t,sidxMapping:n,previousManifest:i});return i6(s,e,sue),s},oue=(r,e)=>{im(r,(t,n,i,s)=>{(!e.mediaGroups[n][i]||!(s in e.mediaGroups[n][i]))&&delete r.mediaGroups[n][i][s]})},lue=(r,e,t)=>{let n=!0,i=Cn(r,{duration:e.duration,minimumUpdatePeriod:e.minimumUpdatePeriod,timelineStarts:e.timelineStarts});for(let s=0;s<e.playlists.length;s++){const a=e.playlists[s];if(a.sidx){const l=ef(a.sidx);t&&t[l]&&t[l].sidx&&Rg(a,t[l].sidx,a.sidx.resolvedUri)}const o=Uw(i,a,oM);o&&(i=o,n=!1)}return im(e,(s,a,o,l)=>{if(s.playlists&&s.playlists.length){const u=s.playlists[0].id,c=Uw(i,s.playlists[0],oM);c&&(i=c,l in i.mediaGroups[a][o]||(i.mediaGroups[a][o][l]=s),i.mediaGroups[a][o][l].playlists[0]=i.playlists[u],n=!1)}}),oue(i,e),e.minimumUpdatePeriod!==r.minimumUpdatePeriod&&(n=!1),n?null:i},uue=(r,e)=>(!r.map&&!e.map||!!(r.map&&e.map&&r.map.byterange.offset===e.map.byterange.offset&&r.map.byterange.length===e.map.byterange.length))&&r.uri===e.uri&&r.byterange.offset===e.byterange.offset&&r.byterange.length===e.byterange.length,lM=(r,e)=>{const t={};for(const n in r){const s=r[n].sidx;if(s){const a=ef(s);if(!e[a])break;const o=e[a].sidxInfo;uue(o,s)&&(t[a]=e[a])}}return t},cue=(r,e)=>{let n=lM(r.playlists,e);return im(r,(i,s,a,o)=>{if(i.playlists&&i.playlists.length){const l=i.playlists;n=Cn(n,lM(l,e))}}),n};let Hw=class extends iue{constructor(e,t,n={},i){super(),this.mainPlaylistLoader_=i||this,i||(this.isMain_=!0);const{withCredentials:s=!1}=n;if(this.vhs_=t,this.withCredentials=s,this.addMetadataToTextTrack=n.addMetadataToTextTrack,!e)throw new Error("A non-empty playlist URL or object is required");this.on("minimumUpdatePeriod",()=>{this.refreshXml_()}),this.on("mediaupdatetimeout",()=>{this.refreshMedia_(this.media().id)}),this.state="HAVE_NOTHING",this.loadedPlaylists_={},this.logger_=el("DashPlaylistLoader"),this.isMain_?(this.mainPlaylistLoader_.srcUrl=e,this.mainPlaylistLoader_.sidxMapping_={}):this.childPlaylist_=e}requestErrored_(e,t,n){if(!this.request)return!0;if(this.request=null,e)return this.error=typeof e=="object"&&!(e instanceof Error)?e:{status:t.status,message:"DASH request error at URL: "+t.uri,response:t.response,code:2,metadata:e.metadata},n&&(this.state=n),this.trigger("error"),!0}addSidxSegments_(e,t,n){const i=e.sidx&&ef(e.sidx);if(!e.sidx||!i||this.mainPlaylistLoader_.sidxMapping_[i]){this.mediaRequest_=X.setTimeout(()=>n(!1),0);return}const s=vx(e.sidx.resolvedUri),a=(l,u)=>{if(this.requestErrored_(l,u,t))return;const c=this.mainPlaylistLoader_.sidxMapping_,{requestType:h}=u;let m;try{m=bN(gr(u.response).subarray(8))}catch(g){g.metadata=Fh({requestType:h,request:u,parseFailure:!0}),this.requestErrored_(g,u,t);return}return c[i]={sidxInfo:e.sidx,sidx:m},Rg(e,m,e.sidx.resolvedUri),n(!0)},o="dash-sidx";this.request=nue(s,this.vhs_.xhr,(l,u,c,h)=>{if(l)return a(l,u);if(!c||c!=="mp4"){const y=c||"unknown";return a({status:u.status,message:`Unsupported ${y} container type for sidx segment at URL: ${s}`,response:"",playlist:e,internal:!0,playlistExclusionDuration:1/0,code:2},u)}const{offset:m,length:g}=e.sidx.byterange;if(h.length>=g+m)return a(l,{response:h.subarray(m,m+g),status:u.status,uri:u.uri});this.request=this.vhs_.xhr({uri:s,responseType:"arraybuffer",requestType:"dash-sidx",headers:zw({byterange:e.sidx.byterange})},a)},o)}dispose(){this.trigger("dispose"),this.stopRequest(),this.loadedPlaylists_={},X.clearTimeout(this.minimumUpdatePeriodTimeout_),X.clearTimeout(this.mediaRequest_),X.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null,this.mediaRequest_=null,this.minimumUpdatePeriodTimeout_=null,this.mainPlaylistLoader_.createMupOnMedia_&&(this.off("loadedmetadata",this.mainPlaylistLoader_.createMupOnMedia_),this.mainPlaylistLoader_.createMupOnMedia_=null),this.off()}hasPendingRequest(){return this.request||this.mediaRequest_}stopRequest(){if(this.request){const e=this.request;this.request=null,e.onreadystatechange=null,e.abort()}}media(e){if(!e)return this.media_;if(this.state==="HAVE_NOTHING")throw new Error("Cannot switch media playlist from "+this.state);const t=this.state;if(typeof e=="string"){if(!this.mainPlaylistLoader_.main.playlists[e])throw new Error("Unknown playlist URI: "+e);e=this.mainPlaylistLoader_.main.playlists[e]}const n=!this.media_||e.id!==this.media_.id;if(n&&this.loadedPlaylists_[e.id]&&this.loadedPlaylists_[e.id].endList){this.state="HAVE_METADATA",this.media_=e,n&&(this.trigger("mediachanging"),this.trigger("mediachange"));return}n&&(this.media_&&this.trigger("mediachanging"),this.addSidxSegments_(e,t,i=>{this.haveMetadata({startingState:t,playlist:e})}))}haveMetadata({startingState:e,playlist:t}){this.state="HAVE_METADATA",this.loadedPlaylists_[t.id]=t,this.mediaRequest_=null,this.refreshMedia_(t.id),e==="HAVE_MAIN_MANIFEST"?this.trigger("loadedmetadata"):this.trigger("mediachange")}pause(){this.mainPlaylistLoader_.createMupOnMedia_&&(this.off("loadedmetadata",this.mainPlaylistLoader_.createMupOnMedia_),this.mainPlaylistLoader_.createMupOnMedia_=null),this.stopRequest(),X.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null,this.isMain_&&(X.clearTimeout(this.mainPlaylistLoader_.minimumUpdatePeriodTimeout_),this.mainPlaylistLoader_.minimumUpdatePeriodTimeout_=null),this.state==="HAVE_NOTHING"&&(this.started=!1)}load(e){X.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null;const t=this.media();if(e){const n=t?t.targetDuration/2*1e3:5e3;this.mediaUpdateTimeout=X.setTimeout(()=>this.load(),n);return}if(!this.started){this.start();return}t&&!t.endList?(this.isMain_&&!this.minimumUpdatePeriodTimeout_&&(this.trigger("minimumUpdatePeriod"),this.updateMinimumUpdatePeriodTimeout_()),this.trigger("mediaupdatetimeout")):this.trigger("loadedplaylist")}start(){if(this.started=!0,!this.isMain_){this.mediaRequest_=X.setTimeout(()=>this.haveMain_(),0);return}this.requestMain_((e,t)=>{this.haveMain_(),!this.hasPendingRequest()&&!this.media_&&this.media(this.mainPlaylistLoader_.main.playlists[0])})}requestMain_(e){const t={manifestInfo:{uri:this.mainPlaylistLoader_.srcUrl}};this.trigger({type:"manifestrequeststart",metadata:t}),this.request=this.vhs_.xhr({uri:this.mainPlaylistLoader_.srcUrl,withCredentials:this.withCredentials,requestType:"dash-manifest"},(n,i)=>{if(n){const{requestType:a}=i;n.metadata=Fh({requestType:a,request:i,error:n})}if(this.requestErrored_(n,i)){this.state==="HAVE_NOTHING"&&(this.started=!1);return}this.trigger({type:"manifestrequestcomplete",metadata:t});const s=i.responseText!==this.mainPlaylistLoader_.mainXml_;if(this.mainPlaylistLoader_.mainXml_=i.responseText,i.responseHeaders&&i.responseHeaders.date?this.mainLoaded_=Date.parse(i.responseHeaders.date):this.mainLoaded_=Date.now(),this.mainPlaylistLoader_.srcUrl=vx(this.mainPlaylistLoader_.srcUrl,i),s){this.handleMain_(),this.syncClientServerClock_(()=>e(i,s));return}return e(i,s)})}syncClientServerClock_(e){const t=xN(this.mainPlaylistLoader_.mainXml_);if(t===null)return this.mainPlaylistLoader_.clientOffset_=this.mainLoaded_-Date.now(),e();if(t.method==="DIRECT")return this.mainPlaylistLoader_.clientOffset_=t.value-Date.now(),e();this.request=this.vhs_.xhr({uri:Pa(this.mainPlaylistLoader_.srcUrl,t.value),method:t.method,withCredentials:this.withCredentials,requestType:"dash-clock-sync"},(n,i)=>{if(!this.request)return;if(n){const{requestType:a}=i;return this.error.metadata=Fh({requestType:a,request:i,error:n}),this.mainPlaylistLoader_.clientOffset_=this.mainLoaded_-Date.now(),e()}let s;t.method==="HEAD"?!i.responseHeaders||!i.responseHeaders.date?s=this.mainLoaded_:s=Date.parse(i.responseHeaders.date):s=Date.parse(i.responseText),this.mainPlaylistLoader_.clientOffset_=s-Date.now(),e()})}haveMain_(){this.state="HAVE_MAIN_MANIFEST",this.isMain_?this.trigger("loadedplaylist"):this.media_||this.media(this.childPlaylist_)}handleMain_(){this.mediaRequest_=null;const e=this.mainPlaylistLoader_.main,t={manifestInfo:{uri:this.mainPlaylistLoader_.srcUrl}};this.trigger({type:"manifestparsestart",metadata:t});let n;try{n=aue({mainXml:this.mainPlaylistLoader_.mainXml_,srcUrl:this.mainPlaylistLoader_.srcUrl,clientOffset:this.mainPlaylistLoader_.clientOffset_,sidxMapping:this.mainPlaylistLoader_.sidxMapping_,previousManifest:e})}catch(s){this.error=s,this.error.metadata={errorType:Se.Error.StreamingDashManifestParserError,error:s},this.trigger("error")}e&&(n=lue(e,n,this.mainPlaylistLoader_.sidxMapping_)),this.mainPlaylistLoader_.main=n||e;const i=this.mainPlaylistLoader_.main.locations&&this.mainPlaylistLoader_.main.locations[0];if(i&&i!==this.mainPlaylistLoader_.srcUrl&&(this.mainPlaylistLoader_.srcUrl=i),(!e||n&&n.minimumUpdatePeriod!==e.minimumUpdatePeriod)&&this.updateMinimumUpdatePeriodTimeout_(),this.addEventStreamToMetadataTrack_(n),n){const{duration:s,endList:a}=n,o=[];n.playlists.forEach(u=>{o.push({id:u.id,bandwidth:u.attributes.BANDWIDTH,resolution:u.attributes.RESOLUTION,codecs:u.attributes.CODECS})});const l={duration:s,isLive:!a,renditions:o};t.parsedManifest=l,this.trigger({type:"manifestparsecomplete",metadata:t})}return!!n}updateMinimumUpdatePeriodTimeout_(){const e=this.mainPlaylistLoader_;e.createMupOnMedia_&&(e.off("loadedmetadata",e.createMupOnMedia_),e.createMupOnMedia_=null),e.minimumUpdatePeriodTimeout_&&(X.clearTimeout(e.minimumUpdatePeriodTimeout_),e.minimumUpdatePeriodTimeout_=null);let t=e.main&&e.main.minimumUpdatePeriod;if(t===0&&(e.media()?t=e.media().targetDuration*1e3:(e.createMupOnMedia_=e.updateMinimumUpdatePeriodTimeout_,e.one("loadedmetadata",e.createMupOnMedia_))),typeof t!="number"||t<=0){t<0&&this.logger_(`found invalid minimumUpdatePeriod of ${t}, not setting a timeout`);return}this.createMUPTimeout_(t)}createMUPTimeout_(e){const t=this.mainPlaylistLoader_;t.minimumUpdatePeriodTimeout_=X.setTimeout(()=>{t.minimumUpdatePeriodTimeout_=null,t.trigger("minimumUpdatePeriod"),t.createMUPTimeout_(e)},e)}refreshXml_(){this.requestMain_((e,t)=>{t&&(this.media_&&(this.media_=this.mainPlaylistLoader_.main.playlists[this.media_.id]),this.mainPlaylistLoader_.sidxMapping_=cue(this.mainPlaylistLoader_.main,this.mainPlaylistLoader_.sidxMapping_),this.addSidxSegments_(this.media(),this.state,n=>{this.refreshMedia_(this.media().id)}))})}refreshMedia_(e){if(!e)throw new Error("refreshMedia_ must take a media id");this.media_&&this.isMain_&&this.handleMain_();const t=this.mainPlaylistLoader_.main.playlists,n=!this.media_||this.media_!==t[e];if(n?this.media_=t[e]:this.trigger("playlistunchanged"),!this.mediaUpdateTimeout){const i=()=>{this.media().endList||(this.mediaUpdateTimeout=X.setTimeout(()=>{this.trigger("mediaupdatetimeout"),i()},$w(this.media(),!!n)))};i()}this.trigger("loadedplaylist")}addEventStreamToMetadataTrack_(e){if(e&&this.mainPlaylistLoader_.main.eventStream){const t=this.mainPlaylistLoader_.main.eventStream.map(n=>({cueTime:n.start,frames:[{data:n.messageData}]}));this.addMetadataToTextTrack("EventStream",t,this.mainPlaylistLoader_.main.duration)}}getKeyIdSet(e){if(e.contentProtection){const t=new Set;for(const n in e.contentProtection){const i=e.contentProtection[n].attributes["cenc:default_KID"];i&&t.add(i.replace(/-/g,"").toLowerCase())}return t}}};var Xi={GOAL_BUFFER_LENGTH:30,MAX_GOAL_BUFFER_LENGTH:60,BACK_BUFFER_LENGTH:30,GOAL_BUFFER_LENGTH_RATE:1,INITIAL_BANDWIDTH:4194304,BANDWIDTH_VARIANCE:1.2,BUFFER_LOW_WATER_LINE:0,MAX_BUFFER_LOW_WATER_LINE:30,EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE:16,BUFFER_LOW_WATER_LINE_RATE:1,BUFFER_HIGH_WATER_LINE:30};const due=r=>{const e=new Uint8Array(new ArrayBuffer(r.length));for(let t=0;t<r.length;t++)e[t]=r.charCodeAt(t);return e.buffer},m6=function(r){return r.on=r.addEventListener,r.off=r.removeEventListener,r},hue=function(r){try{return URL.createObjectURL(new Blob([r],{type:"application/javascript"}))}catch{const t=new BlobBuilder;return t.append(r),URL.createObjectURL(t.getBlob())}},g6=function(r){return function(){const e=hue(r),t=m6(new Worker(e));t.objURL=e;const n=t.terminate;return t.on=t.addEventListener,t.off=t.removeEventListener,t.terminate=function(){return URL.revokeObjectURL(e),n.call(this)},t}},v6=function(r){return`var browserWorkerPolyFill = ${m6.toString()};
browserWorkerPolyFill(self);
`+r},y6=function(r){return r.toString().replace(/^function.+?{/,"").slice(0,-1)},fue=v6(y6(function(){var r=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},e=function(){this.init=function(){var f={};this.on=function(_,S){f[_]||(f[_]=[]),f[_]=f[_].concat(S)},this.off=function(_,S){var b;return f[_]?(b=f[_].indexOf(S),f[_]=f[_].slice(),f[_].splice(b,1),b>-1):!1},this.trigger=function(_){var S,b,C,P;if(S=f[_],!!S)if(arguments.length===2)for(C=S.length,b=0;b<C;++b)S[b].call(this,arguments[1]);else{for(P=[],b=arguments.length,b=1;b<arguments.length;++b)P.push(arguments[b]);for(C=S.length,b=0;b<C;++b)S[b].apply(this,P)}},this.dispose=function(){f={}}}};e.prototype.pipe=function(f){return this.on("data",function(_){f.push(_)}),this.on("done",function(_){f.flush(_)}),this.on("partialdone",function(_){f.partialFlush(_)}),this.on("endedtimeline",function(_){f.endTimeline(_)}),this.on("reset",function(_){f.reset(_)}),f},e.prototype.push=function(f){this.trigger("data",f)},e.prototype.flush=function(f){this.trigger("done",f)},e.prototype.partialFlush=function(f){this.trigger("partialdone",f)},e.prototype.endTimeline=function(f){this.trigger("endedtimeline",f)},e.prototype.reset=function(f){this.trigger("reset",f)};var t=e,n=Math.pow(2,32),i=function(f){var _=new DataView(f.buffer,f.byteOffset,f.byteLength),S;return _.getBigUint64?(S=_.getBigUint64(0),S<Number.MAX_SAFE_INTEGER?Number(S):S):_.getUint32(0)*n+_.getUint32(4)},s={getUint64:i,MAX_UINT32:n},a=s.MAX_UINT32,o,l,u,c,h,m,g,y,v,x,w,E,D,I,A,L,N,U,B,k,H,q,V,Q,ie,le,he,ae,ne,ue,ee,pe,me,xe,Be,Oe;(function(){var f;if(V={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],mvex:[],mvhd:[],pasp:[],sdtp:[],smhd:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],styp:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[]},!(typeof Uint8Array>"u")){for(f in V)V.hasOwnProperty(f)&&(V[f]=[f.charCodeAt(0),f.charCodeAt(1),f.charCodeAt(2),f.charCodeAt(3)]);Q=new Uint8Array([105,115,111,109]),le=new Uint8Array([97,118,99,49]),ie=new Uint8Array([0,0,0,1]),he=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),ae=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]),ne={video:he,audio:ae},pe=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),ee=new Uint8Array([0,0,0,0,0,0,0,0]),me=new Uint8Array([0,0,0,0,0,0,0,0]),xe=me,Be=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),Oe=me,ue=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0])}})(),o=function(f){var _=[],S=0,b,C,P;for(b=1;b<arguments.length;b++)_.push(arguments[b]);for(b=_.length;b--;)S+=_[b].byteLength;for(C=new Uint8Array(S+8),P=new DataView(C.buffer,C.byteOffset,C.byteLength),P.setUint32(0,C.byteLength),C.set(f,4),b=0,S=8;b<_.length;b++)C.set(_[b],S),S+=_[b].byteLength;return C},l=function(){return o(V.dinf,o(V.dref,pe))},u=function(f){return o(V.esds,new Uint8Array([0,0,0,0,3,25,0,0,0,4,17,64,21,0,6,0,0,0,218,192,0,0,218,192,5,2,f.audioobjecttype<<3|f.samplingfrequencyindex>>>1,f.samplingfrequencyindex<<7|f.channelcount<<3,6,1,2]))},c=function(){return o(V.ftyp,Q,ie,Q,le)},L=function(f){return o(V.hdlr,ne[f])},h=function(f){return o(V.mdat,f)},A=function(f){var _=new Uint8Array([0,0,0,0,0,0,0,2,0,0,0,3,0,1,95,144,f.duration>>>24&255,f.duration>>>16&255,f.duration>>>8&255,f.duration&255,85,196,0,0]);return f.samplerate&&(_[12]=f.samplerate>>>24&255,_[13]=f.samplerate>>>16&255,_[14]=f.samplerate>>>8&255,_[15]=f.samplerate&255),o(V.mdhd,_)},I=function(f){return o(V.mdia,A(f),L(f.type),g(f))},m=function(f){return o(V.mfhd,new Uint8Array([0,0,0,0,(f&4278190080)>>24,(f&16711680)>>16,(f&65280)>>8,f&255]))},g=function(f){return o(V.minf,f.type==="video"?o(V.vmhd,ue):o(V.smhd,ee),l(),U(f))},y=function(f,_){for(var S=[],b=_.length;b--;)S[b]=k(_[b]);return o.apply(null,[V.moof,m(f)].concat(S))},v=function(f){for(var _=f.length,S=[];_--;)S[_]=E(f[_]);return o.apply(null,[V.moov,w(4294967295)].concat(S).concat(x(f)))},x=function(f){for(var _=f.length,S=[];_--;)S[_]=H(f[_]);return o.apply(null,[V.mvex].concat(S))},w=function(f){var _=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,2,0,1,95,144,(f&4278190080)>>24,(f&16711680)>>16,(f&65280)>>8,f&255,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return o(V.mvhd,_)},N=function(f){var _=f.samples||[],S=new Uint8Array(4+_.length),b,C;for(C=0;C<_.length;C++)b=_[C].flags,S[C+4]=b.dependsOn<<4|b.isDependedOn<<2|b.hasRedundancy;return o(V.sdtp,S)},U=function(f){return o(V.stbl,B(f),o(V.stts,Oe),o(V.stsc,xe),o(V.stsz,Be),o(V.stco,me))},(function(){var f,_;B=function(S){return o(V.stsd,new Uint8Array([0,0,0,0,0,0,0,1]),S.type==="video"?f(S):_(S))},f=function(S){var b=S.sps||[],C=S.pps||[],P=[],G=[],Y,J;for(Y=0;Y<b.length;Y++)P.push((b[Y].byteLength&65280)>>>8),P.push(b[Y].byteLength&255),P=P.concat(Array.prototype.slice.call(b[Y]));for(Y=0;Y<C.length;Y++)G.push((C[Y].byteLength&65280)>>>8),G.push(C[Y].byteLength&255),G=G.concat(Array.prototype.slice.call(C[Y]));if(J=[V.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,(S.width&65280)>>8,S.width&255,(S.height&65280)>>8,S.height&255,0,72,0,0,0,72,0,0,0,0,0,0,0,1,19,118,105,100,101,111,106,115,45,99,111,110,116,114,105,98,45,104,108,115,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),o(V.avcC,new Uint8Array([1,S.profileIdc,S.profileCompatibility,S.levelIdc,255].concat([b.length],P,[C.length],G))),o(V.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192]))],S.sarRatio){var re=S.sarRatio[0],de=S.sarRatio[1];J.push(o(V.pasp,new Uint8Array([(re&4278190080)>>24,(re&16711680)>>16,(re&65280)>>8,re&255,(de&4278190080)>>24,(de&16711680)>>16,(de&65280)>>8,de&255])))}return o.apply(null,J)},_=function(S){return o(V.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,(S.channelcount&65280)>>8,S.channelcount&255,(S.samplesize&65280)>>8,S.samplesize&255,0,0,0,0,(S.samplerate&65280)>>8,S.samplerate&255,0,0]),u(S))}})(),D=function(f){var _=new Uint8Array([0,0,0,7,0,0,0,0,0,0,0,0,(f.id&4278190080)>>24,(f.id&16711680)>>16,(f.id&65280)>>8,f.id&255,0,0,0,0,(f.duration&4278190080)>>24,(f.duration&16711680)>>16,(f.duration&65280)>>8,f.duration&255,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,(f.width&65280)>>8,f.width&255,0,0,(f.height&65280)>>8,f.height&255,0,0]);return o(V.tkhd,_)},k=function(f){var _,S,b,C,P,G,Y;return _=o(V.tfhd,new Uint8Array([0,0,0,58,(f.id&4278190080)>>24,(f.id&16711680)>>16,(f.id&65280)>>8,f.id&255,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0])),G=Math.floor(f.baseMediaDecodeTime/a),Y=Math.floor(f.baseMediaDecodeTime%a),S=o(V.tfdt,new Uint8Array([1,0,0,0,G>>>24&255,G>>>16&255,G>>>8&255,G&255,Y>>>24&255,Y>>>16&255,Y>>>8&255,Y&255])),P=92,f.type==="audio"?(b=q(f,P),o(V.traf,_,S,b)):(C=N(f),b=q(f,C.length+P),o(V.traf,_,S,b,C))},E=function(f){return f.duration=f.duration||4294967295,o(V.trak,D(f),I(f))},H=function(f){var _=new Uint8Array([0,0,0,0,(f.id&4278190080)>>24,(f.id&16711680)>>16,(f.id&65280)>>8,f.id&255,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]);return f.type!=="video"&&(_[_.length-1]=0),o(V.trex,_)},(function(){var f,_,S;S=function(b,C){var P=0,G=0,Y=0,J=0;return b.length&&(b[0].duration!==void 0&&(P=1),b[0].size!==void 0&&(G=2),b[0].flags!==void 0&&(Y=4),b[0].compositionTimeOffset!==void 0&&(J=8)),[0,0,P|G|Y|J,1,(b.length&4278190080)>>>24,(b.length&16711680)>>>16,(b.length&65280)>>>8,b.length&255,(C&4278190080)>>>24,(C&16711680)>>>16,(C&65280)>>>8,C&255]},_=function(b,C){var P,G,Y,J,re,de;for(J=b.samples||[],C+=20+16*J.length,Y=S(J,C),G=new Uint8Array(Y.length+J.length*16),G.set(Y),P=Y.length,de=0;de<J.length;de++)re=J[de],G[P++]=(re.duration&4278190080)>>>24,G[P++]=(re.duration&16711680)>>>16,G[P++]=(re.duration&65280)>>>8,G[P++]=re.duration&255,G[P++]=(re.size&4278190080)>>>24,G[P++]=(re.size&16711680)>>>16,G[P++]=(re.size&65280)>>>8,G[P++]=re.size&255,G[P++]=re.flags.isLeading<<2|re.flags.dependsOn,G[P++]=re.flags.isDependedOn<<6|re.flags.hasRedundancy<<4|re.flags.paddingValue<<1|re.flags.isNonSyncSample,G[P++]=re.flags.degradationPriority&61440,G[P++]=re.flags.degradationPriority&15,G[P++]=(re.compositionTimeOffset&4278190080)>>>24,G[P++]=(re.compositionTimeOffset&16711680)>>>16,G[P++]=(re.compositionTimeOffset&65280)>>>8,G[P++]=re.compositionTimeOffset&255;return o(V.trun,G)},f=function(b,C){var P,G,Y,J,re,de;for(J=b.samples||[],C+=20+8*J.length,Y=S(J,C),P=new Uint8Array(Y.length+J.length*8),P.set(Y),G=Y.length,de=0;de<J.length;de++)re=J[de],P[G++]=(re.duration&4278190080)>>>24,P[G++]=(re.duration&16711680)>>>16,P[G++]=(re.duration&65280)>>>8,P[G++]=re.duration&255,P[G++]=(re.size&4278190080)>>>24,P[G++]=(re.size&16711680)>>>16,P[G++]=(re.size&65280)>>>8,P[G++]=re.size&255;return o(V.trun,P)},q=function(b,C){return b.type==="audio"?f(b,C):_(b,C)}})();var dt={ftyp:c,mdat:h,moof:y,moov:v,initSegment:function(f){var _=c(),S=v(f),b;return b=new Uint8Array(_.byteLength+S.byteLength),b.set(_),b.set(S,_.byteLength),b}},Ke=function(f){var _,S,b=[],C=[];for(C.byteLength=0,C.nalCount=0,C.duration=0,b.byteLength=0,_=0;_<f.length;_++)S=f[_],S.nalUnitType==="access_unit_delimiter_rbsp"?(b.length&&(b.duration=S.dts-b.dts,C.byteLength+=b.byteLength,C.nalCount+=b.length,C.duration+=b.duration,C.push(b)),b=[S],b.byteLength=S.data.byteLength,b.pts=S.pts,b.dts=S.dts):(S.nalUnitType==="slice_layer_without_partitioning_rbsp_idr"&&(b.keyFrame=!0),b.duration=S.dts-b.dts,b.byteLength+=S.data.byteLength,b.push(S));return C.length&&(!b.duration||b.duration<=0)&&(b.duration=C[C.length-1].duration),C.byteLength+=b.byteLength,C.nalCount+=b.length,C.duration+=b.duration,C.push(b),C},_t=function(f){var _,S,b=[],C=[];for(b.byteLength=0,b.nalCount=0,b.duration=0,b.pts=f[0].pts,b.dts=f[0].dts,C.byteLength=0,C.nalCount=0,C.duration=0,C.pts=f[0].pts,C.dts=f[0].dts,_=0;_<f.length;_++)S=f[_],S.keyFrame?(b.length&&(C.push(b),C.byteLength+=b.byteLength,C.nalCount+=b.nalCount,C.duration+=b.duration),b=[S],b.nalCount=S.length,b.byteLength=S.byteLength,b.pts=S.pts,b.dts=S.dts,b.duration=S.duration):(b.duration+=S.duration,b.nalCount+=S.length,b.byteLength+=S.byteLength,b.push(S));return C.length&&b.duration<=0&&(b.duration=C[C.length-1].duration),C.byteLength+=b.byteLength,C.nalCount+=b.nalCount,C.duration+=b.duration,C.push(b),C},Ze=function(f){var _;return!f[0][0].keyFrame&&f.length>1&&(_=f.shift(),f.byteLength-=_.byteLength,f.nalCount-=_.nalCount,f[0][0].dts=_.dts,f[0][0].pts=_.pts,f[0][0].duration+=_.duration),f},Ot=function(){return{size:0,flags:{isLeading:0,dependsOn:1,isDependedOn:0,hasRedundancy:0,degradationPriority:0,isNonSyncSample:1}}},Nt=function(f,_){var S=Ot();return S.dataOffset=_,S.compositionTimeOffset=f.pts-f.dts,S.duration=f.duration,S.size=4*f.length,S.size+=f.byteLength,f.keyFrame&&(S.flags.dependsOn=2,S.flags.isNonSyncSample=0),S},qe=function(f,_){var S,b,C,P,G,Y=_||0,J=[];for(S=0;S<f.length;S++)for(P=f[S],b=0;b<P.length;b++)G=P[b],C=Nt(G,Y),Y+=C.size,J.push(C);return J},Ue=function(f){var _,S,b,C,P,G,Y=0,J=f.byteLength,re=f.nalCount,de=J+4*re,ve=new Uint8Array(de),Ve=new DataView(ve.buffer);for(_=0;_<f.length;_++)for(C=f[_],S=0;S<C.length;S++)for(P=C[S],b=0;b<P.length;b++)G=P[b],Ve.setUint32(Y,G.data.byteLength),Y+=4,ve.set(G.data,Y),Y+=G.data.byteLength;return ve},Pe=function(f,_){var S,b=_||0,C=[];return S=Nt(f,b),C.push(S),C},$e=function(f){var _,S,b=0,C=f.byteLength,P=f.length,G=C+4*P,Y=new Uint8Array(G),J=new DataView(Y.buffer);for(_=0;_<f.length;_++)S=f[_],J.setUint32(b,S.data.byteLength),b+=4,Y.set(S.data,b),b+=S.data.byteLength;return Y},rt={groupNalsIntoFrames:Ke,groupFramesIntoGops:_t,extendFirstKeyFrame:Ze,generateSampleTable:qe,concatenateNalData:Ue,generateSampleTableForFrame:Pe,concatenateNalDataForFrame:$e},lt=[33,16,5,32,164,27],ht=[33,65,108,84,1,2,4,8,168,2,4,8,17,191,252],ut=function(f){for(var _=[];f--;)_.push(0);return _},St=function(f){return Object.keys(f).reduce(function(_,S){return _[S]=new Uint8Array(f[S].reduce(function(b,C){return b.concat(C)},[])),_},{})},ot,yr=function(){if(!ot){var f={96e3:[lt,[227,64],ut(154),[56]],88200:[lt,[231],ut(170),[56]],64e3:[lt,[248,192],ut(240),[56]],48e3:[lt,[255,192],ut(268),[55,148,128],ut(54),[112]],44100:[lt,[255,192],ut(268),[55,163,128],ut(84),[112]],32e3:[lt,[255,192],ut(268),[55,234],ut(226),[112]],24e3:[lt,[255,192],ut(268),[55,255,128],ut(268),[111,112],ut(126),[224]],16e3:[lt,[255,192],ut(268),[55,255,128],ut(268),[111,255],ut(269),[223,108],ut(195),[1,192]],12e3:[ht,ut(268),[3,127,248],ut(268),[6,255,240],ut(268),[13,255,224],ut(268),[27,253,128],ut(259),[56]],11025:[ht,ut(268),[3,127,248],ut(268),[6,255,240],ut(268),[13,255,224],ut(268),[27,255,192],ut(268),[55,175,128],ut(108),[112]],8e3:[ht,ut(268),[3,121,16],ut(47),[7]]};ot=St(f)}return ot},pr=9e4,jr,ur,Wt,mr,Tr,Nr,Tt;jr=function(f){return f*pr},ur=function(f,_){return f*_},Wt=function(f){return f/pr},mr=function(f,_){return f/_},Tr=function(f,_){return jr(mr(f,_))},Nr=function(f,_){return ur(Wt(f),_)},Tt=function(f,_,S){return Wt(S?f:f-_)};var Ht={ONE_SECOND_IN_TS:pr,secondsToVideoTs:jr,secondsToAudioTs:ur,videoTsToSeconds:Wt,audioTsToSeconds:mr,audioTsToVideoTs:Tr,videoTsToAudioTs:Nr,metadataTsToSeconds:Tt},An=yr,Vt=Ht,Cr=function(f){var _,S,b=0;for(_=0;_<f.length;_++)S=f[_],b+=S.data.byteLength;return b},Ur=function(f,_,S,b){var C,P=0,G=0,Y=0,J=0,re,de,ve;if(_.length&&(C=Vt.audioTsToVideoTs(f.baseMediaDecodeTime,f.samplerate),P=Math.ceil(Vt.ONE_SECOND_IN_TS/(f.samplerate/1024)),S&&b&&(G=C-Math.max(S,b),Y=Math.floor(G/P),J=Y*P),!(Y<1||J>Vt.ONE_SECOND_IN_TS/2))){for(re=An()[f.samplerate],re||(re=_[0].data),de=0;de<Y;de++)ve=_[0],_.splice(0,0,{data:re,dts:ve.dts-P,pts:ve.pts-P});return f.baseMediaDecodeTime-=Math.floor(Vt.videoTsToAudioTs(J,f.samplerate)),J}},qr=function(f,_,S){return _.minSegmentDts>=S?f:(_.minSegmentDts=1/0,f.filter(function(b){return b.dts>=S?(_.minSegmentDts=Math.min(_.minSegmentDts,b.dts),_.minSegmentPts=_.minSegmentDts,!0):!1}))},En=function(f){var _,S,b=[];for(_=0;_<f.length;_++)S=f[_],b.push({size:S.data.byteLength,duration:1024});return b},Dn=function(f){var _,S,b=0,C=new Uint8Array(Cr(f));for(_=0;_<f.length;_++)S=f[_],C.set(S.data,b),b+=S.data.byteLength;return C},In={prefixWithSilence:Ur,trimAdtsFramesByEarliestDts:qr,generateSampleTable:En,concatenateFrameData:Dn},Mr=Ht.ONE_SECOND_IN_TS,se=function(f,_){typeof _.pts=="number"&&(f.timelineStartInfo.pts===void 0&&(f.timelineStartInfo.pts=_.pts),f.minSegmentPts===void 0?f.minSegmentPts=_.pts:f.minSegmentPts=Math.min(f.minSegmentPts,_.pts),f.maxSegmentPts===void 0?f.maxSegmentPts=_.pts:f.maxSegmentPts=Math.max(f.maxSegmentPts,_.pts)),typeof _.dts=="number"&&(f.timelineStartInfo.dts===void 0&&(f.timelineStartInfo.dts=_.dts),f.minSegmentDts===void 0?f.minSegmentDts=_.dts:f.minSegmentDts=Math.min(f.minSegmentDts,_.dts),f.maxSegmentDts===void 0?f.maxSegmentDts=_.dts:f.maxSegmentDts=Math.max(f.maxSegmentDts,_.dts))},fe=function(f){delete f.minSegmentDts,delete f.maxSegmentDts,delete f.minSegmentPts,delete f.maxSegmentPts},Te=function(f,_){var S,b,C=f.minSegmentDts;return _||(C-=f.timelineStartInfo.dts),S=f.timelineStartInfo.baseMediaDecodeTime,S+=C,S=Math.max(0,S),f.type==="audio"&&(b=f.samplerate/Mr,S*=b,S=Math.floor(S)),S},je={clearDtsInfo:fe,calculateTrackBaseMediaDecodeTime:Te,collectDtsInfo:se},pt=4,Gt=128,be=function(f){for(var _=0,S={payloadType:-1,payloadSize:0},b=0,C=0;_<f.byteLength&&f[_]!==Gt;){for(;f[_]===255;)b+=255,_++;for(b+=f[_++];f[_]===255;)C+=255,_++;if(C+=f[_++],!S.payload&&b===pt){var P=String.fromCharCode(f[_+3],f[_+4],f[_+5],f[_+6]);if(P==="GA94"){S.payloadType=b,S.payloadSize=C,S.payload=f.subarray(_,_+C);break}else S.payload=void 0}_+=C,b=0,C=0}return S},ye=function(f){return f.payload[0]!==181||(f.payload[1]<<8|f.payload[2])!==49||String.fromCharCode(f.payload[3],f.payload[4],f.payload[5],f.payload[6])!=="GA94"||f.payload[7]!==3?null:f.payload.subarray(8,f.payload.length-1)},Ae=function(f,_){var S=[],b,C,P,G;if(!(_[0]&64))return S;for(C=_[0]&31,b=0;b<C;b++)P=b*3,G={type:_[P+2]&3,pts:f},_[P+2]&4&&(G.ccData=_[P+3]<<8|_[P+4],S.push(G));return S},Ge=function(f){for(var _=f.byteLength,S=[],b=1,C,P;b<_-2;)f[b]===0&&f[b+1]===0&&f[b+2]===3?(S.push(b+2),b+=2):b++;if(S.length===0)return f;C=_-S.length,P=new Uint8Array(C);var G=0;for(b=0;b<C;G++,b++)G===S[0]&&(G++,S.shift()),P[b]=f[G];return P},Xe={parseSei:be,parseUserData:ye,parseCaptionPackets:Ae,discardEmulationPreventionBytes:Ge,USER_DATA_REGISTERED_ITU_T_T35:pt},yt=t,At=Xe,st=function(f){f=f||{},st.prototype.init.call(this),this.parse708captions_=typeof f.parse708captions=="boolean"?f.parse708captions:!0,this.captionPackets_=[],this.ccStreams_=[new er(0,0),new er(0,1),new er(1,0),new er(1,1)],this.parse708captions_&&(this.cc708Stream_=new xt({captionServices:f.captionServices})),this.reset(),this.ccStreams_.forEach(function(_){_.on("data",this.trigger.bind(this,"data")),_.on("partialdone",this.trigger.bind(this,"partialdone")),_.on("done",this.trigger.bind(this,"done"))},this),this.parse708captions_&&(this.cc708Stream_.on("data",this.trigger.bind(this,"data")),this.cc708Stream_.on("partialdone",this.trigger.bind(this,"partialdone")),this.cc708Stream_.on("done",this.trigger.bind(this,"done")))};st.prototype=new yt,st.prototype.push=function(f){var _,S,b;if(f.nalUnitType==="sei_rbsp"&&(_=At.parseSei(f.escapedRBSP),!!_.payload&&_.payloadType===At.USER_DATA_REGISTERED_ITU_T_T35&&(S=At.parseUserData(_),!!S))){if(f.dts<this.latestDts_){this.ignoreNextEqualDts_=!0;return}else if(f.dts===this.latestDts_&&this.ignoreNextEqualDts_){this.numSameDts_--,this.numSameDts_||(this.ignoreNextEqualDts_=!1);return}b=At.parseCaptionPackets(f.pts,S),this.captionPackets_=this.captionPackets_.concat(b),this.latestDts_!==f.dts&&(this.numSameDts_=0),this.numSameDts_++,this.latestDts_=f.dts}},st.prototype.flushCCStreams=function(f){this.ccStreams_.forEach(function(_){return f==="flush"?_.flush():_.partialFlush()},this)},st.prototype.flushStream=function(f){if(!this.captionPackets_.length){this.flushCCStreams(f);return}this.captionPackets_.forEach(function(_,S){_.presortIndex=S}),this.captionPackets_.sort(function(_,S){return _.pts===S.pts?_.presortIndex-S.presortIndex:_.pts-S.pts}),this.captionPackets_.forEach(function(_){_.type<2?this.dispatchCea608Packet(_):this.dispatchCea708Packet(_)},this),this.captionPackets_.length=0,this.flushCCStreams(f)},st.prototype.flush=function(){return this.flushStream("flush")},st.prototype.partialFlush=function(){return this.flushStream("partialFlush")},st.prototype.reset=function(){this.latestDts_=null,this.ignoreNextEqualDts_=!1,this.numSameDts_=0,this.activeCea608Channel_=[null,null],this.ccStreams_.forEach(function(f){f.reset()})},st.prototype.dispatchCea608Packet=function(f){this.setsTextOrXDSActive(f)?this.activeCea608Channel_[f.type]=null:this.setsChannel1Active(f)?this.activeCea608Channel_[f.type]=0:this.setsChannel2Active(f)&&(this.activeCea608Channel_[f.type]=1),this.activeCea608Channel_[f.type]!==null&&this.ccStreams_[(f.type<<1)+this.activeCea608Channel_[f.type]].push(f)},st.prototype.setsChannel1Active=function(f){return(f.ccData&30720)===4096},st.prototype.setsChannel2Active=function(f){return(f.ccData&30720)===6144},st.prototype.setsTextOrXDSActive=function(f){return(f.ccData&28928)===256||(f.ccData&30974)===4138||(f.ccData&30974)===6186},st.prototype.dispatchCea708Packet=function(f){this.parse708captions_&&this.cc708Stream_.push(f)};var gt={127:9834,4128:32,4129:160,4133:8230,4138:352,4140:338,4144:9608,4145:8216,4146:8217,4147:8220,4148:8221,4149:8226,4153:8482,4154:353,4156:339,4157:8480,4159:376,4214:8539,4215:8540,4216:8541,4217:8542,4218:9168,4219:9124,4220:9123,4221:9135,4222:9126,4223:9121,4256:12600},jt=function(f){var _=gt[f]||f;return f&4096&&f===_?"":String.fromCharCode(_)},Kt=function(f){return 32<=f&&f<=127||160<=f&&f<=255},Ft=function(f){this.windowNum=f,this.reset()};Ft.prototype.reset=function(){this.clearText(),this.pendingNewLine=!1,this.winAttr={},this.penAttr={},this.penLoc={},this.penColor={},this.visible=0,this.rowLock=0,this.columnLock=0,this.priority=0,this.relativePositioning=0,this.anchorVertical=0,this.anchorHorizontal=0,this.anchorPoint=0,this.rowCount=1,this.virtualRowCount=this.rowCount+1,this.columnCount=41,this.windowStyle=0,this.penStyle=0},Ft.prototype.getText=function(){return this.rows.join(`
`)},Ft.prototype.clearText=function(){this.rows=[""],this.rowIdx=0},Ft.prototype.newLine=function(f){for(this.rows.length>=this.virtualRowCount&&typeof this.beforeRowOverflow=="function"&&this.beforeRowOverflow(f),this.rows.length>0&&(this.rows.push(""),this.rowIdx++);this.rows.length>this.virtualRowCount;)this.rows.shift(),this.rowIdx--},Ft.prototype.isEmpty=function(){return this.rows.length===0?!0:this.rows.length===1?this.rows[0]==="":!1},Ft.prototype.addText=function(f){this.rows[this.rowIdx]+=f},Ft.prototype.backspace=function(){if(!this.isEmpty()){var f=this.rows[this.rowIdx];this.rows[this.rowIdx]=f.substr(0,f.length-1)}};var dr=function(f,_,S){this.serviceNum=f,this.text="",this.currentWindow=new Ft(-1),this.windows=[],this.stream=S,typeof _=="string"&&this.createTextDecoder(_)};dr.prototype.init=function(f,_){this.startPts=f;for(var S=0;S<8;S++)this.windows[S]=new Ft(S),typeof _=="function"&&(this.windows[S].beforeRowOverflow=_)},dr.prototype.setCurrentWindow=function(f){this.currentWindow=this.windows[f]},dr.prototype.createTextDecoder=function(f){if(typeof TextDecoder>"u")this.stream.trigger("log",{level:"warn",message:"The `encoding` option is unsupported without TextDecoder support"});else try{this.textDecoder_=new TextDecoder(f)}catch(_){this.stream.trigger("log",{level:"warn",message:"TextDecoder could not be created with "+f+" encoding. "+_})}};var xt=function(f){f=f||{},xt.prototype.init.call(this);var _=this,S=f.captionServices||{},b={},C;Object.keys(S).forEach(P=>{C=S[P],/^SERVICE/.test(P)&&(b[P]=C.encoding)}),this.serviceEncodings=b,this.current708Packet=null,this.services={},this.push=function(P){P.type===3?(_.new708Packet(),_.add708Bytes(P)):(_.current708Packet===null&&_.new708Packet(),_.add708Bytes(P))}};xt.prototype=new yt,xt.prototype.new708Packet=function(){this.current708Packet!==null&&this.push708Packet(),this.current708Packet={data:[],ptsVals:[]}},xt.prototype.add708Bytes=function(f){var _=f.ccData,S=_>>>8,b=_&255;this.current708Packet.ptsVals.push(f.pts),this.current708Packet.data.push(S),this.current708Packet.data.push(b)},xt.prototype.push708Packet=function(){var f=this.current708Packet,_=f.data,S=null,b=null,C=0,P=_[C++];for(f.seq=P>>6,f.sizeCode=P&63;C<_.length;C++)P=_[C++],S=P>>5,b=P&31,S===7&&b>0&&(P=_[C++],S=P),this.pushServiceBlock(S,C,b),b>0&&(C+=b-1)},xt.prototype.pushServiceBlock=function(f,_,S){var b,C=_,P=this.current708Packet.data,G=this.services[f];for(G||(G=this.initService(f,C));C<_+S&&C<P.length;C++)b=P[C],Kt(b)?C=this.handleText(C,G):b===24?C=this.multiByteCharacter(C,G):b===16?C=this.extendedCommands(C,G):128<=b&&b<=135?C=this.setCurrentWindow(C,G):152<=b&&b<=159?C=this.defineWindow(C,G):b===136?C=this.clearWindows(C,G):b===140?C=this.deleteWindows(C,G):b===137?C=this.displayWindows(C,G):b===138?C=this.hideWindows(C,G):b===139?C=this.toggleWindows(C,G):b===151?C=this.setWindowAttributes(C,G):b===144?C=this.setPenAttributes(C,G):b===145?C=this.setPenColor(C,G):b===146?C=this.setPenLocation(C,G):b===143?G=this.reset(C,G):b===8?G.currentWindow.backspace():b===12?G.currentWindow.clearText():b===13?G.currentWindow.pendingNewLine=!0:b===14?G.currentWindow.clearText():b===141&&C++},xt.prototype.extendedCommands=function(f,_){var S=this.current708Packet.data,b=S[++f];return Kt(b)&&(f=this.handleText(f,_,{isExtended:!0})),f},xt.prototype.getPts=function(f){return this.current708Packet.ptsVals[Math.floor(f/2)]},xt.prototype.initService=function(f,_){var b="SERVICE"+f,S=this,b,C;return b in this.serviceEncodings&&(C=this.serviceEncodings[b]),this.services[f]=new dr(f,C,S),this.services[f].init(this.getPts(_),function(P){S.flushDisplayed(P,S.services[f])}),this.services[f]},xt.prototype.handleText=function(f,_,S){var b=S&&S.isExtended,C=S&&S.isMultiByte,P=this.current708Packet.data,G=b?4096:0,Y=P[f],J=P[f+1],re=_.currentWindow,de,ve;function Ve(Ee){return Ee.map(bt=>("0"+(bt&255).toString(16)).slice(-2)).join("")}if(C?(ve=[Y,J],f++):ve=[Y],_.textDecoder_&&!b)de=_.textDecoder_.decode(new Uint8Array(ve));else if(C){const Ee=Ve(ve);de=String.fromCharCode(parseInt(Ee,16))}else de=jt(G|Y);return re.pendingNewLine&&!re.isEmpty()&&re.newLine(this.getPts(f)),re.pendingNewLine=!1,re.addText(de),f},xt.prototype.multiByteCharacter=function(f,_){var S=this.current708Packet.data,b=S[f+1],C=S[f+2];return Kt(b)&&Kt(C)&&(f=this.handleText(++f,_,{isMultiByte:!0})),f},xt.prototype.setCurrentWindow=function(f,_){var S=this.current708Packet.data,b=S[f],C=b&7;return _.setCurrentWindow(C),f},xt.prototype.defineWindow=function(f,_){var S=this.current708Packet.data,b=S[f],C=b&7;_.setCurrentWindow(C);var P=_.currentWindow;return b=S[++f],P.visible=(b&32)>>5,P.rowLock=(b&16)>>4,P.columnLock=(b&8)>>3,P.priority=b&7,b=S[++f],P.relativePositioning=(b&128)>>7,P.anchorVertical=b&127,b=S[++f],P.anchorHorizontal=b,b=S[++f],P.anchorPoint=(b&240)>>4,P.rowCount=b&15,b=S[++f],P.columnCount=b&63,b=S[++f],P.windowStyle=(b&56)>>3,P.penStyle=b&7,P.virtualRowCount=P.rowCount+1,f},xt.prototype.setWindowAttributes=function(f,_){var S=this.current708Packet.data,b=S[f],C=_.currentWindow.winAttr;return b=S[++f],C.fillOpacity=(b&192)>>6,C.fillRed=(b&48)>>4,C.fillGreen=(b&12)>>2,C.fillBlue=b&3,b=S[++f],C.borderType=(b&192)>>6,C.borderRed=(b&48)>>4,C.borderGreen=(b&12)>>2,C.borderBlue=b&3,b=S[++f],C.borderType+=(b&128)>>5,C.wordWrap=(b&64)>>6,C.printDirection=(b&48)>>4,C.scrollDirection=(b&12)>>2,C.justify=b&3,b=S[++f],C.effectSpeed=(b&240)>>4,C.effectDirection=(b&12)>>2,C.displayEffect=b&3,f},xt.prototype.flushDisplayed=function(f,_){for(var S=[],b=0;b<8;b++)_.windows[b].visible&&!_.windows[b].isEmpty()&&S.push(_.windows[b].getText());_.endPts=f,_.text=S.join(`

`),this.pushCaption(_),_.startPts=f},xt.prototype.pushCaption=function(f){f.text!==""&&(this.trigger("data",{startPts:f.startPts,endPts:f.endPts,text:f.text,stream:"cc708_"+f.serviceNum}),f.text="",f.startPts=f.endPts)},xt.prototype.displayWindows=function(f,_){var S=this.current708Packet.data,b=S[++f],C=this.getPts(f);this.flushDisplayed(C,_);for(var P=0;P<8;P++)b&1<<P&&(_.windows[P].visible=1);return f},xt.prototype.hideWindows=function(f,_){var S=this.current708Packet.data,b=S[++f],C=this.getPts(f);this.flushDisplayed(C,_);for(var P=0;P<8;P++)b&1<<P&&(_.windows[P].visible=0);return f},xt.prototype.toggleWindows=function(f,_){var S=this.current708Packet.data,b=S[++f],C=this.getPts(f);this.flushDisplayed(C,_);for(var P=0;P<8;P++)b&1<<P&&(_.windows[P].visible^=1);return f},xt.prototype.clearWindows=function(f,_){var S=this.current708Packet.data,b=S[++f],C=this.getPts(f);this.flushDisplayed(C,_);for(var P=0;P<8;P++)b&1<<P&&_.windows[P].clearText();return f},xt.prototype.deleteWindows=function(f,_){var S=this.current708Packet.data,b=S[++f],C=this.getPts(f);this.flushDisplayed(C,_);for(var P=0;P<8;P++)b&1<<P&&_.windows[P].reset();return f},xt.prototype.setPenAttributes=function(f,_){var S=this.current708Packet.data,b=S[f],C=_.currentWindow.penAttr;return b=S[++f],C.textTag=(b&240)>>4,C.offset=(b&12)>>2,C.penSize=b&3,b=S[++f],C.italics=(b&128)>>7,C.underline=(b&64)>>6,C.edgeType=(b&56)>>3,C.fontStyle=b&7,f},xt.prototype.setPenColor=function(f,_){var S=this.current708Packet.data,b=S[f],C=_.currentWindow.penColor;return b=S[++f],C.fgOpacity=(b&192)>>6,C.fgRed=(b&48)>>4,C.fgGreen=(b&12)>>2,C.fgBlue=b&3,b=S[++f],C.bgOpacity=(b&192)>>6,C.bgRed=(b&48)>>4,C.bgGreen=(b&12)>>2,C.bgBlue=b&3,b=S[++f],C.edgeRed=(b&48)>>4,C.edgeGreen=(b&12)>>2,C.edgeBlue=b&3,f},xt.prototype.setPenLocation=function(f,_){var S=this.current708Packet.data,b=S[f],C=_.currentWindow.penLoc;return _.currentWindow.pendingNewLine=!0,b=S[++f],C.row=b&15,b=S[++f],C.column=b&63,f},xt.prototype.reset=function(f,_){var S=this.getPts(f);return this.flushDisplayed(S,_),this.initService(_.serviceNum,f)};var fr={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,304:174,305:176,306:189,307:191,308:8482,309:162,310:163,311:9834,312:224,313:160,314:232,315:226,316:234,317:238,318:244,319:251,544:193,545:201,546:211,547:218,548:220,549:252,550:8216,551:161,552:42,553:39,554:8212,555:169,556:8480,557:8226,558:8220,559:8221,560:192,561:194,562:199,563:200,564:202,565:203,566:235,567:206,568:207,569:239,570:212,571:217,572:249,573:219,574:171,575:187,800:195,801:227,802:205,803:204,804:236,805:210,806:242,807:213,808:245,809:123,810:125,811:92,812:94,813:95,814:124,815:126,816:196,817:228,818:214,819:246,820:223,821:165,822:164,823:9474,824:197,825:229,826:216,827:248,828:9484,829:9488,830:9492,831:9496},Jr=function(f){return f===null?"":(f=fr[f]||f,String.fromCharCode(f))},Pr=14,Fr=[4352,4384,4608,4640,5376,5408,5632,5664,5888,5920,4096,4864,4896,5120,5152],Pn=function(){for(var f=[],_=Pr+1;_--;)f.push({text:"",indent:0,offset:0});return f},er=function(f,_){er.prototype.init.call(this),this.field_=f||0,this.dataChannel_=_||0,this.name_="CC"+((this.field_<<1|this.dataChannel_)+1),this.setConstants(),this.reset(),this.push=function(S){var b,C,P,G,Y;if(b=S.ccData&32639,b===this.lastControlCode_){this.lastControlCode_=null;return}if((b&61440)===4096?this.lastControlCode_=b:b!==this.PADDING_&&(this.lastControlCode_=null),P=b>>>8,G=b&255,b!==this.PADDING_)if(b===this.RESUME_CAPTION_LOADING_)this.mode_="popOn";else if(b===this.END_OF_CAPTION_)this.mode_="popOn",this.clearFormatting(S.pts),this.flushDisplayed(S.pts),C=this.displayed_,this.displayed_=this.nonDisplayed_,this.nonDisplayed_=C,this.startPts_=S.pts;else if(b===this.ROLL_UP_2_ROWS_)this.rollUpRows_=2,this.setRollUp(S.pts);else if(b===this.ROLL_UP_3_ROWS_)this.rollUpRows_=3,this.setRollUp(S.pts);else if(b===this.ROLL_UP_4_ROWS_)this.rollUpRows_=4,this.setRollUp(S.pts);else if(b===this.CARRIAGE_RETURN_)this.clearFormatting(S.pts),this.flushDisplayed(S.pts),this.shiftRowsUp_(),this.startPts_=S.pts;else if(b===this.BACKSPACE_)this.mode_==="popOn"?this.nonDisplayed_[this.row_].text=this.nonDisplayed_[this.row_].text.slice(0,-1):this.displayed_[this.row_].text=this.displayed_[this.row_].text.slice(0,-1);else if(b===this.ERASE_DISPLAYED_MEMORY_)this.flushDisplayed(S.pts),this.displayed_=Pn();else if(b===this.ERASE_NON_DISPLAYED_MEMORY_)this.nonDisplayed_=Pn();else if(b===this.RESUME_DIRECT_CAPTIONING_)this.mode_!=="paintOn"&&(this.flushDisplayed(S.pts),this.displayed_=Pn()),this.mode_="paintOn",this.startPts_=S.pts;else if(this.isSpecialCharacter(P,G))P=(P&3)<<8,Y=Jr(P|G),this[this.mode_](S.pts,Y),this.column_++;else if(this.isExtCharacter(P,G))this.mode_==="popOn"?this.nonDisplayed_[this.row_].text=this.nonDisplayed_[this.row_].text.slice(0,-1):this.displayed_[this.row_].text=this.displayed_[this.row_].text.slice(0,-1),P=(P&3)<<8,Y=Jr(P|G),this[this.mode_](S.pts,Y),this.column_++;else if(this.isMidRowCode(P,G))this.clearFormatting(S.pts),this[this.mode_](S.pts," "),this.column_++,(G&14)===14&&this.addFormatting(S.pts,["i"]),(G&1)===1&&this.addFormatting(S.pts,["u"]);else if(this.isOffsetControlCode(P,G)){const re=G&3;this.nonDisplayed_[this.row_].offset=re,this.column_+=re}else if(this.isPAC(P,G)){var J=Fr.indexOf(b&7968);if(this.mode_==="rollUp"&&(J-this.rollUpRows_+1<0&&(J=this.rollUpRows_-1),this.setRollUp(S.pts,J)),J!==this.row_&&J>=0&&J<=14&&(this.clearFormatting(S.pts),this.row_=J),G&1&&this.formatting_.indexOf("u")===-1&&this.addFormatting(S.pts,["u"]),(b&16)===16){const re=(b&14)>>1;this.column_=re*4,this.nonDisplayed_[this.row_].indent+=re}this.isColorPAC(G)&&(G&14)===14&&this.addFormatting(S.pts,["i"])}else this.isNormalChar(P)&&(G===0&&(G=null),Y=Jr(P),Y+=Jr(G),this[this.mode_](S.pts,Y),this.column_+=Y.length)}};er.prototype=new yt,er.prototype.flushDisplayed=function(f){const _=b=>{this.trigger("log",{level:"warn",message:"Skipping a malformed 608 caption at index "+b+"."})},S=[];this.displayed_.forEach((b,C)=>{if(b&&b.text&&b.text.length){try{b.text=b.text.trim()}catch{_(C)}b.text.length&&S.push({text:b.text,line:C+1,position:10+Math.min(70,b.indent*10)+b.offset*2.5})}else b==null&&_(C)}),S.length&&this.trigger("data",{startPts:this.startPts_,endPts:f,content:S,stream:this.name_})},er.prototype.reset=function(){this.mode_="popOn",this.topRow_=0,this.startPts_=0,this.displayed_=Pn(),this.nonDisplayed_=Pn(),this.lastControlCode_=null,this.column_=0,this.row_=Pr,this.rollUpRows_=2,this.formatting_=[]},er.prototype.setConstants=function(){this.dataChannel_===0?(this.BASE_=16,this.EXT_=17,this.CONTROL_=(20|this.field_)<<8,this.OFFSET_=23):this.dataChannel_===1&&(this.BASE_=24,this.EXT_=25,this.CONTROL_=(28|this.field_)<<8,this.OFFSET_=31),this.PADDING_=0,this.RESUME_CAPTION_LOADING_=this.CONTROL_|32,this.END_OF_CAPTION_=this.CONTROL_|47,this.ROLL_UP_2_ROWS_=this.CONTROL_|37,this.ROLL_UP_3_ROWS_=this.CONTROL_|38,this.ROLL_UP_4_ROWS_=this.CONTROL_|39,this.CARRIAGE_RETURN_=this.CONTROL_|45,this.RESUME_DIRECT_CAPTIONING_=this.CONTROL_|41,this.BACKSPACE_=this.CONTROL_|33,this.ERASE_DISPLAYED_MEMORY_=this.CONTROL_|44,this.ERASE_NON_DISPLAYED_MEMORY_=this.CONTROL_|46},er.prototype.isSpecialCharacter=function(f,_){return f===this.EXT_&&_>=48&&_<=63},er.prototype.isExtCharacter=function(f,_){return(f===this.EXT_+1||f===this.EXT_+2)&&_>=32&&_<=63},er.prototype.isMidRowCode=function(f,_){return f===this.EXT_&&_>=32&&_<=47},er.prototype.isOffsetControlCode=function(f,_){return f===this.OFFSET_&&_>=33&&_<=35},er.prototype.isPAC=function(f,_){return f>=this.BASE_&&f<this.BASE_+8&&_>=64&&_<=127},er.prototype.isColorPAC=function(f){return f>=64&&f<=79||f>=96&&f<=127},er.prototype.isNormalChar=function(f){return f>=32&&f<=127},er.prototype.setRollUp=function(f,_){if(this.mode_!=="rollUp"&&(this.row_=Pr,this.mode_="rollUp",this.flushDisplayed(f),this.nonDisplayed_=Pn(),this.displayed_=Pn()),_!==void 0&&_!==this.row_)for(var S=0;S<this.rollUpRows_;S++)this.displayed_[_-S]=this.displayed_[this.row_-S],this.displayed_[this.row_-S]={text:"",indent:0,offset:0};_===void 0&&(_=this.row_),this.topRow_=_-this.rollUpRows_+1},er.prototype.addFormatting=function(f,_){this.formatting_=this.formatting_.concat(_);var S=_.reduce(function(b,C){return b+"<"+C+">"},"");this[this.mode_](f,S)},er.prototype.clearFormatting=function(f){if(this.formatting_.length){var _=this.formatting_.reverse().reduce(function(S,b){return S+"</"+b+">"},"");this.formatting_=[],this[this.mode_](f,_)}},er.prototype.popOn=function(f,_){var S=this.nonDisplayed_[this.row_].text;S+=_,this.nonDisplayed_[this.row_].text=S},er.prototype.rollUp=function(f,_){var S=this.displayed_[this.row_].text;S+=_,this.displayed_[this.row_].text=S},er.prototype.shiftRowsUp_=function(){var f;for(f=0;f<this.topRow_;f++)this.displayed_[f]={text:"",indent:0,offset:0};for(f=this.row_+1;f<Pr+1;f++)this.displayed_[f]={text:"",indent:0,offset:0};for(f=this.topRow_;f<this.row_;f++)this.displayed_[f]=this.displayed_[f+1];this.displayed_[this.row_]={text:"",indent:0,offset:0}},er.prototype.paintOn=function(f,_){var S=this.displayed_[this.row_].text;S+=_,this.displayed_[this.row_].text=S};var bi={CaptionStream:st,Cea608Stream:er,Cea708Stream:xt},mn={H264_STREAM_TYPE:27,ADTS_STREAM_TYPE:15,METADATA_STREAM_TYPE:21},Ss=t,tn=8589934592,Ts=4294967296,di="shared",ii=function(f,_){var S=1;for(f>_&&(S=-1);Math.abs(_-f)>Ts;)f+=S*tn;return f},Dr=function(f){var _,S;Dr.prototype.init.call(this),this.type_=f||di,this.push=function(b){if(b.type==="metadata"){this.trigger("data",b);return}this.type_!==di&&b.type!==this.type_||(S===void 0&&(S=b.dts),b.dts=ii(b.dts,S),b.pts=ii(b.pts,S),_=b.dts,this.trigger("data",b))},this.flush=function(){S=_,this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")},this.discontinuity=function(){S=void 0,_=void 0},this.reset=function(){this.discontinuity(),this.trigger("reset")}};Dr.prototype=new Ss;var ke={TimestampRolloverStream:Dr,handleRollover:ii},Ne=(f,_,S)=>{if(!f)return-1;for(var b=S;b<f.length;b++)if(f[b]===_)return b;return-1},Qe={typedArrayIndexOf:Ne},et=Qe.typedArrayIndexOf,vt={Utf8:3},wt=function(f,_,S){var b,C="";for(b=_;b<S;b++)C+="%"+("00"+f[b].toString(16)).slice(-2);return C},Mt=function(f,_,S){return decodeURIComponent(wt(f,_,S))},_r=function(f,_,S){return unescape(wt(f,_,S))},zr=function(f){return f[0]<<21|f[1]<<14|f[2]<<7|f[3]},gn={APIC:function(f){var _=1,S,b,C="-->";f.data[0]===vt.Utf8&&(S=et(f.data,0,_),!(S<0)&&(f.mimeType=_r(f.data,_,S),_=S+1,f.pictureType=f.data[_],_++,b=et(f.data,0,_),!(b<0)&&(f.description=Mt(f.data,_,b),_=b+1,f.mimeType===C?f.url=_r(f.data,_,f.data.length):f.pictureData=f.data.subarray(_,f.data.length))))},"T*":function(f){f.data[0]===vt.Utf8&&(f.value=Mt(f.data,1,f.data.length).replace(/\0*$/,""),f.values=f.value.split("\0"))},TXXX:function(f){var _;f.data[0]===vt.Utf8&&(_=et(f.data,0,1),_!==-1&&(f.description=Mt(f.data,1,_),f.value=Mt(f.data,_+1,f.data.length).replace(/\0*$/,""),f.data=f.value))},"W*":function(f){f.url=_r(f.data,0,f.data.length).replace(/\0.*$/,"")},WXXX:function(f){var _;f.data[0]===vt.Utf8&&(_=et(f.data,0,1),_!==-1&&(f.description=Mt(f.data,1,_),f.url=_r(f.data,_+1,f.data.length).replace(/\0.*$/,"")))},PRIV:function(f){var _;for(_=0;_<f.data.length;_++)if(f.data[_]===0){f.owner=_r(f.data,0,_);break}f.privateData=f.data.subarray(_+1),f.data=f.privateData}},wr=function(f){var _,S,b=10,C=0,P=[];if(!(f.length<10||f[0]!==73||f[1]!==68||f[2]!==51)){C=zr(f.subarray(6,10)),C+=10;var G=f[5]&64;G&&(b+=4,b+=zr(f.subarray(10,14)),C-=zr(f.subarray(16,20)));do{if(_=zr(f.subarray(b+4,b+8)),_<1)break;S=String.fromCharCode(f[b],f[b+1],f[b+2],f[b+3]);var Y={id:S,data:f.subarray(b+10,b+_+10)};Y.key=Y.id,gn[Y.id]?gn[Y.id](Y):Y.id[0]==="T"?gn["T*"](Y):Y.id[0]==="W"&&gn["W*"](Y),P.push(Y),b+=10,b+=_}while(b<C);return P}},hi={parseId3Frames:wr,parseSyncSafeInteger:zr,frameParsers:gn},Br=t,On=mn,$n=hi,Cs;Cs=function(f){var _={descriptor:f&&f.descriptor},S=0,b=[],C=0,P;if(Cs.prototype.init.call(this),this.dispatchType=On.METADATA_STREAM_TYPE.toString(16),_.descriptor)for(P=0;P<_.descriptor.length;P++)this.dispatchType+=("00"+_.descriptor[P].toString(16)).slice(-2);this.push=function(G){var Y,J,re,de,ve,Ve;if(G.type==="timed-metadata"){if(G.dataAlignmentIndicator&&(C=0,b.length=0),b.length===0&&(G.data.length<10||G.data[0]!==73||G.data[1]!==68||G.data[2]!==51)){this.trigger("log",{level:"warn",message:"Skipping unrecognized metadata packet"});return}if(b.push(G),C+=G.data.byteLength,b.length===1&&(S=$n.parseSyncSafeInteger(G.data.subarray(6,10)),S+=10),!(C<S)){for(Y={data:new Uint8Array(S),frames:[],pts:b[0].pts,dts:b[0].dts},ve=0;ve<S;)Y.data.set(b[0].data.subarray(0,S-ve),ve),ve+=b[0].data.byteLength,C-=b[0].data.byteLength,b.shift();J=10,Y.data[5]&64&&(J+=4,J+=$n.parseSyncSafeInteger(Y.data.subarray(10,14)),S-=$n.parseSyncSafeInteger(Y.data.subarray(16,20)));do{if(re=$n.parseSyncSafeInteger(Y.data.subarray(J+4,J+8)),re<1){this.trigger("log",{level:"warn",message:"Malformed ID3 frame encountered. Skipping remaining metadata parsing."});break}if(Ve=String.fromCharCode(Y.data[J],Y.data[J+1],Y.data[J+2],Y.data[J+3]),de={id:Ve,data:Y.data.subarray(J+10,J+re+10)},de.key=de.id,$n.frameParsers[de.id]?$n.frameParsers[de.id](de):de.id[0]==="T"?$n.frameParsers["T*"](de):de.id[0]==="W"&&$n.frameParsers["W*"](de),de.owner==="com.apple.streaming.transportStreamTimestamp"){var Ee=de.data,bt=(Ee[3]&1)<<30|Ee[4]<<22|Ee[5]<<14|Ee[6]<<6|Ee[7]>>>2;bt*=4,bt+=Ee[7]&3,de.timeStamp=bt,Y.pts===void 0&&Y.dts===void 0&&(Y.pts=de.timeStamp,Y.dts=de.timeStamp),this.trigger("timestamp",de)}Y.frames.push(de),J+=10,J+=re}while(J<S);this.trigger("data",Y)}}}},Cs.prototype=new Br;var Pc=Cs,ws=t,Ui=bi,Rn=mn,Fu=ke.TimestampRolloverStream,Hr,as,da,Ai=188,ja=71;Hr=function(){var f=new Uint8Array(Ai),_=0;Hr.prototype.init.call(this),this.push=function(S){var b=0,C=Ai,P;for(_?(P=new Uint8Array(S.byteLength+_),P.set(f.subarray(0,_)),P.set(S,_),_=0):P=S;C<P.byteLength;){if(P[b]===ja&&P[C]===ja){this.trigger("data",P.subarray(b,C)),b+=Ai,C+=Ai;continue}b++,C++}b<P.byteLength&&(f.set(P.subarray(b),0),_=P.byteLength-b)},this.flush=function(){_===Ai&&f[0]===ja&&(this.trigger("data",f),_=0),this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")},this.reset=function(){_=0,this.trigger("reset")}},Hr.prototype=new ws,as=function(){var f,_,S,b;as.prototype.init.call(this),b=this,this.packetsWaitingForPmt=[],this.programMapTable=void 0,f=function(C,P){var G=0;P.payloadUnitStartIndicator&&(G+=C[G]+1),P.type==="pat"?_(C.subarray(G),P):S(C.subarray(G),P)},_=function(C,P){P.section_number=C[7],P.last_section_number=C[8],b.pmtPid=(C[10]&31)<<8|C[11],P.pmtPid=b.pmtPid},S=function(C,P){var G,Y,J,re;if(C[5]&1){for(b.programMapTable={video:null,audio:null,"timed-metadata":{}},G=(C[1]&15)<<8|C[2],Y=3+G-4,J=(C[10]&15)<<8|C[11],re=12+J;re<Y;){var de=C[re],ve=(C[re+1]&31)<<8|C[re+2];de===Rn.H264_STREAM_TYPE&&b.programMapTable.video===null?b.programMapTable.video=ve:de===Rn.ADTS_STREAM_TYPE&&b.programMapTable.audio===null?b.programMapTable.audio=ve:de===Rn.METADATA_STREAM_TYPE&&(b.programMapTable["timed-metadata"][ve]=de),re+=((C[re+3]&15)<<8|C[re+4])+5}P.programMapTable=b.programMapTable}},this.push=function(C){var P={},G=4;if(P.payloadUnitStartIndicator=!!(C[1]&64),P.pid=C[1]&31,P.pid<<=8,P.pid|=C[2],(C[3]&48)>>>4>1&&(G+=C[G]+1),P.pid===0)P.type="pat",f(C.subarray(G),P),this.trigger("data",P);else if(P.pid===this.pmtPid)for(P.type="pmt",f(C.subarray(G),P),this.trigger("data",P);this.packetsWaitingForPmt.length;)this.processPes_.apply(this,this.packetsWaitingForPmt.shift());else this.programMapTable===void 0?this.packetsWaitingForPmt.push([C,G,P]):this.processPes_(C,G,P)},this.processPes_=function(C,P,G){G.pid===this.programMapTable.video?G.streamType=Rn.H264_STREAM_TYPE:G.pid===this.programMapTable.audio?G.streamType=Rn.ADTS_STREAM_TYPE:G.streamType=this.programMapTable["timed-metadata"][G.pid],G.type="pes",G.data=C.subarray(P),this.trigger("data",G)}},as.prototype=new ws,as.STREAM_TYPES={h264:27,adts:15},da=function(){var f=this,_=!1,S={data:[],size:0},b={data:[],size:0},C={data:[],size:0},P,G=function(J,re){var de;const ve=J[0]<<16|J[1]<<8|J[2];re.data=new Uint8Array,ve===1&&(re.packetLength=6+(J[4]<<8|J[5]),re.dataAlignmentIndicator=(J[6]&4)!==0,de=J[7],de&192&&(re.pts=(J[9]&14)<<27|(J[10]&255)<<20|(J[11]&254)<<12|(J[12]&255)<<5|(J[13]&254)>>>3,re.pts*=4,re.pts+=(J[13]&6)>>>1,re.dts=re.pts,de&64&&(re.dts=(J[14]&14)<<27|(J[15]&255)<<20|(J[16]&254)<<12|(J[17]&255)<<5|(J[18]&254)>>>3,re.dts*=4,re.dts+=(J[18]&6)>>>1)),re.data=J.subarray(9+J[8]))},Y=function(J,re,de){var ve=new Uint8Array(J.size),Ve={type:re},Ee=0,bt=0,zt=!1,Vr;if(!(!J.data.length||J.size<9)){for(Ve.trackId=J.data[0].pid,Ee=0;Ee<J.data.length;Ee++)Vr=J.data[Ee],ve.set(Vr.data,bt),bt+=Vr.data.byteLength;G(ve,Ve),zt=re==="video"||Ve.packetLength<=J.size,(de||zt)&&(J.size=0,J.data.length=0),zt&&f.trigger("data",Ve)}};da.prototype.init.call(this),this.push=function(J){({pat:function(){},pes:function(){var re,de;switch(J.streamType){case Rn.H264_STREAM_TYPE:re=S,de="video";break;case Rn.ADTS_STREAM_TYPE:re=b,de="audio";break;case Rn.METADATA_STREAM_TYPE:re=C,de="timed-metadata";break;default:return}J.payloadUnitStartIndicator&&Y(re,de,!0),re.data.push(J),re.size+=J.data.byteLength},pmt:function(){var re={type:"metadata",tracks:[]};P=J.programMapTable,P.video!==null&&re.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+P.video,codec:"avc",type:"video"}),P.audio!==null&&re.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+P.audio,codec:"adts",type:"audio"}),_=!0,f.trigger("data",re)}})[J.type]()},this.reset=function(){S.size=0,S.data.length=0,b.size=0,b.data.length=0,this.trigger("reset")},this.flushStreams_=function(){Y(S,"video"),Y(b,"audio"),Y(C,"timed-metadata")},this.flush=function(){if(!_&&P){var J={type:"metadata",tracks:[]};P.video!==null&&J.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+P.video,codec:"avc",type:"video"}),P.audio!==null&&J.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+P.audio,codec:"adts",type:"audio"}),f.trigger("data",J)}_=!1,this.flushStreams_(),this.trigger("done")}},da.prototype=new ws;var Ll={PAT_PID:0,MP2T_PACKET_LENGTH:Ai,TransportPacketStream:Hr,TransportParseStream:as,ElementaryStream:da,TimestampRolloverStream:Fu,CaptionStream:Ui.CaptionStream,Cea608Stream:Ui.Cea608Stream,Cea708Stream:Ui.Cea708Stream,MetadataStream:Pc};for(var _o in Rn)Rn.hasOwnProperty(_o)&&(Ll[_o]=Rn[_o]);var Bu=Ll,Ol=t,ha=Ht.ONE_SECOND_IN_TS,Si,Di=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];Si=function(f){var _,S=0;Si.prototype.init.call(this),this.skipWarn_=function(b,C){this.trigger("log",{level:"warn",message:`adts skiping bytes ${b} to ${C} in frame ${S} outside syncword`})},this.push=function(b){var C=0,P,G,Y,J,re;if(f||(S=0),b.type==="audio"){_&&_.length?(Y=_,_=new Uint8Array(Y.byteLength+b.data.byteLength),_.set(Y),_.set(b.data,Y.byteLength)):_=b.data;for(var de;C+7<_.length;){if(_[C]!==255||(_[C+1]&246)!==240){typeof de!="number"&&(de=C),C++;continue}if(typeof de=="number"&&(this.skipWarn_(de,C),de=null),G=(~_[C+1]&1)*2,P=(_[C+3]&3)<<11|_[C+4]<<3|(_[C+5]&224)>>5,J=((_[C+6]&3)+1)*1024,re=J*ha/Di[(_[C+2]&60)>>>2],_.byteLength-C<P)break;this.trigger("data",{pts:b.pts+S*re,dts:b.dts+S*re,sampleCount:J,audioobjecttype:(_[C+2]>>>6&3)+1,channelcount:(_[C+2]&1)<<2|(_[C+3]&192)>>>6,samplerate:Di[(_[C+2]&60)>>>2],samplingfrequencyindex:(_[C+2]&60)>>>2,samplesize:16,data:_.subarray(C+7+G,C+P)}),S++,C+=P}typeof de=="number"&&(this.skipWarn_(de,C),de=null),_=_.subarray(C)}},this.flush=function(){S=0,this.trigger("done")},this.reset=function(){_=void 0,this.trigger("reset")},this.endTimeline=function(){_=void 0,this.trigger("endedtimeline")}},Si.prototype=new Ol;var fa=Si,za;za=function(f){var _=f.byteLength,S=0,b=0;this.length=function(){return 8*_},this.bitsAvailable=function(){return 8*_+b},this.loadWord=function(){var C=f.byteLength-_,P=new Uint8Array(4),G=Math.min(4,_);if(G===0)throw new Error("no bytes available");P.set(f.subarray(C,C+G)),S=new DataView(P.buffer).getUint32(0),b=G*8,_-=G},this.skipBits=function(C){var P;b>C?(S<<=C,b-=C):(C-=b,P=Math.floor(C/8),C-=P*8,_-=P,this.loadWord(),S<<=C,b-=C)},this.readBits=function(C){var P=Math.min(b,C),G=S>>>32-P;return b-=P,b>0?S<<=P:_>0&&this.loadWord(),P=C-P,P>0?G<<P|this.readBits(P):G},this.skipLeadingZeros=function(){var C;for(C=0;C<b;++C)if((S&2147483648>>>C)!==0)return S<<=C,b-=C,C;return this.loadWord(),C+this.skipLeadingZeros()},this.skipUnsignedExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.skipExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.readUnsignedExpGolomb=function(){var C=this.skipLeadingZeros();return this.readBits(C+1)-1},this.readExpGolomb=function(){var C=this.readUnsignedExpGolomb();return 1&C?1+C>>>1:-1*(C>>>1)},this.readBoolean=function(){return this.readBits(1)===1},this.readUnsignedByte=function(){return this.readBits(8)},this.loadWord()};var pa=za,Ml=t,Rc=pa,$i,Ha,Fl;Ha=function(){var f=0,_,S;Ha.prototype.init.call(this),this.push=function(b){var C;S?(C=new Uint8Array(S.byteLength+b.data.byteLength),C.set(S),C.set(b.data,S.byteLength),S=C):S=b.data;for(var P=S.byteLength;f<P-3;f++)if(S[f+2]===1){_=f+5;break}for(;_<P;)switch(S[_]){case 0:if(S[_-1]!==0){_+=2;break}else if(S[_-2]!==0){_++;break}f+3!==_-2&&this.trigger("data",S.subarray(f+3,_-2));do _++;while(S[_]!==1&&_<P);f=_-2,_+=3;break;case 1:if(S[_-1]!==0||S[_-2]!==0){_+=3;break}this.trigger("data",S.subarray(f+3,_-2)),f=_-2,_+=3;break;default:_+=3;break}S=S.subarray(f),_-=f,f=0},this.reset=function(){S=null,f=0,this.trigger("reset")},this.flush=function(){S&&S.byteLength>3&&this.trigger("data",S.subarray(f+3)),S=null,f=0,this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")}},Ha.prototype=new Ml,Fl={100:!0,110:!0,122:!0,244:!0,44:!0,83:!0,86:!0,118:!0,128:!0,138:!0,139:!0,134:!0},$i=function(){var f=new Ha,_,S,b,C,P,G,Y;$i.prototype.init.call(this),_=this,this.push=function(J){J.type==="video"&&(S=J.trackId,b=J.pts,C=J.dts,f.push(J))},f.on("data",function(J){var re={trackId:S,pts:b,dts:C,data:J,nalUnitTypeCode:J[0]&31};switch(re.nalUnitTypeCode){case 5:re.nalUnitType="slice_layer_without_partitioning_rbsp_idr";break;case 6:re.nalUnitType="sei_rbsp",re.escapedRBSP=P(J.subarray(1));break;case 7:re.nalUnitType="seq_parameter_set_rbsp",re.escapedRBSP=P(J.subarray(1)),re.config=G(re.escapedRBSP);break;case 8:re.nalUnitType="pic_parameter_set_rbsp";break;case 9:re.nalUnitType="access_unit_delimiter_rbsp";break}_.trigger("data",re)}),f.on("done",function(){_.trigger("done")}),f.on("partialdone",function(){_.trigger("partialdone")}),f.on("reset",function(){_.trigger("reset")}),f.on("endedtimeline",function(){_.trigger("endedtimeline")}),this.flush=function(){f.flush()},this.partialFlush=function(){f.partialFlush()},this.reset=function(){f.reset()},this.endTimeline=function(){f.endTimeline()},Y=function(J,re){var de=8,ve=8,Ve,Ee;for(Ve=0;Ve<J;Ve++)ve!==0&&(Ee=re.readExpGolomb(),ve=(de+Ee+256)%256),de=ve===0?de:ve},P=function(J){for(var re=J.byteLength,de=[],ve=1,Ve,Ee;ve<re-2;)J[ve]===0&&J[ve+1]===0&&J[ve+2]===3?(de.push(ve+2),ve+=2):ve++;if(de.length===0)return J;Ve=re-de.length,Ee=new Uint8Array(Ve);var bt=0;for(ve=0;ve<Ve;bt++,ve++)bt===de[0]&&(bt++,de.shift()),Ee[ve]=J[bt];return Ee},G=function(J){var re=0,de=0,ve=0,Ve=0,Ee,bt,zt,Vr,dn,mi,Ao,Kl,Xu,_a,xa,Yt=[1,1],fn,qn;if(Ee=new Rc(J),bt=Ee.readUnsignedByte(),Vr=Ee.readUnsignedByte(),zt=Ee.readUnsignedByte(),Ee.skipUnsignedExpGolomb(),Fl[bt]&&(dn=Ee.readUnsignedExpGolomb(),dn===3&&Ee.skipBits(1),Ee.skipUnsignedExpGolomb(),Ee.skipUnsignedExpGolomb(),Ee.skipBits(1),Ee.readBoolean()))for(xa=dn!==3?8:12,qn=0;qn<xa;qn++)Ee.readBoolean()&&(qn<6?Y(16,Ee):Y(64,Ee));if(Ee.skipUnsignedExpGolomb(),mi=Ee.readUnsignedExpGolomb(),mi===0)Ee.readUnsignedExpGolomb();else if(mi===1)for(Ee.skipBits(1),Ee.skipExpGolomb(),Ee.skipExpGolomb(),Ao=Ee.readUnsignedExpGolomb(),qn=0;qn<Ao;qn++)Ee.skipExpGolomb();if(Ee.skipUnsignedExpGolomb(),Ee.skipBits(1),Kl=Ee.readUnsignedExpGolomb(),Xu=Ee.readUnsignedExpGolomb(),_a=Ee.readBits(1),_a===0&&Ee.skipBits(1),Ee.skipBits(1),Ee.readBoolean()&&(re=Ee.readUnsignedExpGolomb(),de=Ee.readUnsignedExpGolomb(),ve=Ee.readUnsignedExpGolomb(),Ve=Ee.readUnsignedExpGolomb()),Ee.readBoolean()&&Ee.readBoolean()){switch(fn=Ee.readUnsignedByte(),fn){case 1:Yt=[1,1];break;case 2:Yt=[12,11];break;case 3:Yt=[10,11];break;case 4:Yt=[16,11];break;case 5:Yt=[40,33];break;case 6:Yt=[24,11];break;case 7:Yt=[20,11];break;case 8:Yt=[32,11];break;case 9:Yt=[80,33];break;case 10:Yt=[18,11];break;case 11:Yt=[15,11];break;case 12:Yt=[64,33];break;case 13:Yt=[160,99];break;case 14:Yt=[4,3];break;case 15:Yt=[3,2];break;case 16:Yt=[2,1];break;case 255:{Yt=[Ee.readUnsignedByte()<<8|Ee.readUnsignedByte(),Ee.readUnsignedByte()<<8|Ee.readUnsignedByte()];break}}Yt&&Yt[0]/Yt[1]}return{profileIdc:bt,levelIdc:zt,profileCompatibility:Vr,width:(Kl+1)*16-re*2-de*2,height:(2-_a)*(Xu+1)*16-ve*2-Ve*2,sarRatio:Yt}}},$i.prototype=new Ml;var Bl={H264Stream:$i},rl=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],Va=function(f,_){var S=f[_+6]<<21|f[_+7]<<14|f[_+8]<<7|f[_+9],b=f[_+5],C=(b&16)>>4;return S=S>=0?S:0,C?S+20:S+10},Es=function(f,_){return f.length-_<10||f[_]!==73||f[_+1]!==68||f[_+2]!==51?_:(_+=Va(f,_),Es(f,_))},os=function(f){var _=Es(f,0);return f.length>=_+2&&(f[_]&255)===255&&(f[_+1]&240)===240&&(f[_+1]&22)===16},ma=function(f){return f[0]<<21|f[1]<<14|f[2]<<7|f[3]},nl=function(f,_,S){var b,C="";for(b=_;b<S;b++)C+="%"+("00"+f[b].toString(16)).slice(-2);return C},Lc=function(f,_,S){return unescape(nl(f,_,S))},Oc=function(f,_){var S=(f[_+5]&224)>>5,b=f[_+4]<<3,C=f[_+3]&6144;return C|b|S},Nu=function(f,_){return f[_]===73&&f[_+1]===68&&f[_+2]===51?"timed-metadata":f[_]&!0&&(f[_+1]&240)===240?"audio":null},Nl=function(f){for(var _=0;_+5<f.length;){if(f[_]!==255||(f[_+1]&246)!==240){_++;continue}return rl[(f[_+2]&60)>>>2]}return null},Uu=function(f){var _,S,b,C;_=10,f[5]&64&&(_+=4,_+=ma(f.subarray(10,14)));do{if(S=ma(f.subarray(_+4,_+8)),S<1)return null;if(C=String.fromCharCode(f[_],f[_+1],f[_+2],f[_+3]),C==="PRIV"){b=f.subarray(_+10,_+S+10);for(var P=0;P<b.byteLength;P++)if(b[P]===0){var G=Lc(b,0,P);if(G==="com.apple.streaming.transportStreamTimestamp"){var Y=b.subarray(P+1),J=(Y[3]&1)<<30|Y[4]<<22|Y[5]<<14|Y[6]<<6|Y[7]>>>2;return J*=4,J+=Y[7]&3,J}break}}_+=10,_+=S}while(_<f.byteLength);return null},zs={isLikelyAacData:os,parseId3TagSize:Va,parseAdtsSize:Oc,parseType:Nu,parseSampleRate:Nl,parseAacTimestamp:Uu},ga=t,ls=zs,ks;ks=function(){var f=new Uint8Array,_=0;ks.prototype.init.call(this),this.setTimestamp=function(S){_=S},this.push=function(S){var b=0,C=0,P,G,Y,J;for(f.length?(J=f.length,f=new Uint8Array(S.byteLength+J),f.set(f.subarray(0,J)),f.set(S,J)):f=S;f.length-C>=3;){if(f[C]===73&&f[C+1]===68&&f[C+2]===51){if(f.length-C<10||(b=ls.parseId3TagSize(f,C),C+b>f.length))break;G={type:"timed-metadata",data:f.subarray(C,C+b)},this.trigger("data",G),C+=b;continue}else if((f[C]&255)===255&&(f[C+1]&240)===240){if(f.length-C<7||(b=ls.parseAdtsSize(f,C),C+b>f.length))break;Y={type:"audio",data:f.subarray(C,C+b),pts:_,dts:_},this.trigger("data",Y),C+=b;continue}C++}P=f.length-C,P>0?f=f.subarray(C):f=new Uint8Array},this.reset=function(){f=new Uint8Array,this.trigger("reset")},this.endTimeline=function(){f=new Uint8Array,this.trigger("endedtimeline")}},ks.prototype=new ga;var Mc=ks,an=["audioobjecttype","channelcount","samplerate","samplingfrequencyindex","samplesize"],Ul=an,Fc=["width","height","profileIdc","levelIdc","profileCompatibility","sarRatio"],Ii=Fc,Pi=t,us=dt,Ti=rt,Wa=In,Sn=je,zn=Bu,ji=Ht,qa=fa,xo=Bl.H264Stream,il=Mc,$d=zs.isLikelyAacData,jd=Ht.ONE_SECOND_IN_TS,sl=Ul,$u=Ii,Ga,Hs,Ka,Ri,Bc=function(f,_){_.stream=f,this.trigger("log",_)},bo=function(f,_){for(var S=Object.keys(_),b=0;b<S.length;b++){var C=S[b];C==="headOfPipeline"||!_[C].on||_[C].on("log",Bc.bind(f,C))}},Xa=function(f,_){var S;if(f.length!==_.length)return!1;for(S=0;S<f.length;S++)if(f[S]!==_[S])return!1;return!0},ju=function(f,_,S,b,C,P){var G=S-_,Y=b-_,J=C-S;return{start:{dts:f,pts:f+G},end:{dts:f+Y,pts:f+J},prependedContentDuration:P,baseMediaDecodeTime:f}};Hs=function(f,_){var S=[],b,C=0,P=0,G=1/0;_=_||{},b=_.firstSequenceNumber||0,Hs.prototype.init.call(this),this.push=function(Y){Sn.collectDtsInfo(f,Y),f&&sl.forEach(function(J){f[J]=Y[J]}),S.push(Y)},this.setEarliestDts=function(Y){C=Y},this.setVideoBaseMediaDecodeTime=function(Y){G=Y},this.setAudioAppendStart=function(Y){P=Y},this.flush=function(){var Y,J,re,de,ve,Ve,Ee;if(S.length===0){this.trigger("done","AudioSegmentStream");return}Y=Wa.trimAdtsFramesByEarliestDts(S,f,C),f.baseMediaDecodeTime=Sn.calculateTrackBaseMediaDecodeTime(f,_.keepOriginalTimestamps),Ee=Wa.prefixWithSilence(f,Y,P,G),f.samples=Wa.generateSampleTable(Y),re=us.mdat(Wa.concatenateFrameData(Y)),S=[],J=us.moof(b,[f]),de=new Uint8Array(J.byteLength+re.byteLength),b++,de.set(J),de.set(re,J.byteLength),Sn.clearDtsInfo(f),ve=Math.ceil(jd*1024/f.samplerate),Y.length&&(Ve=Y.length*ve,this.trigger("segmentTimingInfo",ju(ji.audioTsToVideoTs(f.baseMediaDecodeTime,f.samplerate),Y[0].dts,Y[0].pts,Y[0].dts+Ve,Y[0].pts+Ve,Ee||0)),this.trigger("timingInfo",{start:Y[0].pts,end:Y[0].pts+Ve})),this.trigger("data",{track:f,boxes:de}),this.trigger("done","AudioSegmentStream")},this.reset=function(){Sn.clearDtsInfo(f),S=[],this.trigger("reset")}},Hs.prototype=new Pi,Ga=function(f,_){var S,b=[],C=[],P,G;_=_||{},S=_.firstSequenceNumber||0,Ga.prototype.init.call(this),delete f.minPTS,this.gopCache_=[],this.push=function(Y){Sn.collectDtsInfo(f,Y),Y.nalUnitType==="seq_parameter_set_rbsp"&&!P&&(P=Y.config,f.sps=[Y.data],$u.forEach(function(J){f[J]=P[J]},this)),Y.nalUnitType==="pic_parameter_set_rbsp"&&!G&&(G=Y.data,f.pps=[Y.data]),b.push(Y)},this.flush=function(){for(var Y,J,re,de,ve,Ve,Ee=0,bt,zt;b.length&&b[0].nalUnitType!=="access_unit_delimiter_rbsp";)b.shift();if(b.length===0){this.resetStream_(),this.trigger("done","VideoSegmentStream");return}if(Y=Ti.groupNalsIntoFrames(b),re=Ti.groupFramesIntoGops(Y),re[0][0].keyFrame||(J=this.getGopForFusion_(b[0],f),J?(Ee=J.duration,re.unshift(J),re.byteLength+=J.byteLength,re.nalCount+=J.nalCount,re.pts=J.pts,re.dts=J.dts,re.duration+=J.duration):re=Ti.extendFirstKeyFrame(re)),C.length){var Vr;if(_.alignGopsAtEnd?Vr=this.alignGopsAtEnd_(re):Vr=this.alignGopsAtStart_(re),!Vr){this.gopCache_.unshift({gop:re.pop(),pps:f.pps,sps:f.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),b=[],this.resetStream_(),this.trigger("done","VideoSegmentStream");return}Sn.clearDtsInfo(f),re=Vr}Sn.collectDtsInfo(f,re),f.samples=Ti.generateSampleTable(re),ve=us.mdat(Ti.concatenateNalData(re)),f.baseMediaDecodeTime=Sn.calculateTrackBaseMediaDecodeTime(f,_.keepOriginalTimestamps),this.trigger("processedGopsInfo",re.map(function(dn){return{pts:dn.pts,dts:dn.dts,byteLength:dn.byteLength}})),bt=re[0],zt=re[re.length-1],this.trigger("segmentTimingInfo",ju(f.baseMediaDecodeTime,bt.dts,bt.pts,zt.dts+zt.duration,zt.pts+zt.duration,Ee)),this.trigger("timingInfo",{start:re[0].pts,end:re[re.length-1].pts+re[re.length-1].duration}),this.gopCache_.unshift({gop:re.pop(),pps:f.pps,sps:f.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),b=[],this.trigger("baseMediaDecodeTime",f.baseMediaDecodeTime),this.trigger("timelineStartInfo",f.timelineStartInfo),de=us.moof(S,[f]),Ve=new Uint8Array(de.byteLength+ve.byteLength),S++,Ve.set(de),Ve.set(ve,de.byteLength),this.trigger("data",{track:f,boxes:Ve}),this.resetStream_(),this.trigger("done","VideoSegmentStream")},this.reset=function(){this.resetStream_(),b=[],this.gopCache_.length=0,C.length=0,this.trigger("reset")},this.resetStream_=function(){Sn.clearDtsInfo(f),P=void 0,G=void 0},this.getGopForFusion_=function(Y){var J=45e3,re=1/0,de,ve,Ve,Ee,bt;for(bt=0;bt<this.gopCache_.length;bt++)Ee=this.gopCache_[bt],Ve=Ee.gop,!(!(f.pps&&Xa(f.pps[0],Ee.pps[0]))||!(f.sps&&Xa(f.sps[0],Ee.sps[0])))&&(Ve.dts<f.timelineStartInfo.dts||(de=Y.dts-Ve.dts-Ve.duration,de>=-1e4&&de<=J&&(!ve||re>de)&&(ve=Ee,re=de)));return ve?ve.gop:null},this.alignGopsAtStart_=function(Y){var J,re,de,ve,Ve,Ee,bt,zt;for(Ve=Y.byteLength,Ee=Y.nalCount,bt=Y.duration,J=re=0;J<C.length&&re<Y.length&&(de=C[J],ve=Y[re],de.pts!==ve.pts);){if(ve.pts>de.pts){J++;continue}re++,Ve-=ve.byteLength,Ee-=ve.nalCount,bt-=ve.duration}return re===0?Y:re===Y.length?null:(zt=Y.slice(re),zt.byteLength=Ve,zt.duration=bt,zt.nalCount=Ee,zt.pts=zt[0].pts,zt.dts=zt[0].dts,zt)},this.alignGopsAtEnd_=function(Y){var J,re,de,ve,Ve,Ee;for(J=C.length-1,re=Y.length-1,Ve=null,Ee=!1;J>=0&&re>=0;){if(de=C[J],ve=Y[re],de.pts===ve.pts){Ee=!0;break}if(de.pts>ve.pts){J--;continue}J===C.length-1&&(Ve=re),re--}if(!Ee&&Ve===null)return null;var bt;if(Ee?bt=re:bt=Ve,bt===0)return Y;var zt=Y.slice(bt),Vr=zt.reduce(function(dn,mi){return dn.byteLength+=mi.byteLength,dn.duration+=mi.duration,dn.nalCount+=mi.nalCount,dn},{byteLength:0,duration:0,nalCount:0});return zt.byteLength=Vr.byteLength,zt.duration=Vr.duration,zt.nalCount=Vr.nalCount,zt.pts=zt[0].pts,zt.dts=zt[0].dts,zt},this.alignGopsWith=function(Y){C=Y}},Ga.prototype=new Pi,Ri=function(f,_){this.numberOfTracks=0,this.metadataStream=_,f=f||{},typeof f.remux<"u"?this.remuxTracks=!!f.remux:this.remuxTracks=!0,typeof f.keepOriginalTimestamps=="boolean"?this.keepOriginalTimestamps=f.keepOriginalTimestamps:this.keepOriginalTimestamps=!1,this.pendingTracks=[],this.videoTrack=null,this.pendingBoxes=[],this.pendingCaptions=[],this.pendingMetadata=[],this.pendingBytes=0,this.emittedTracks=0,Ri.prototype.init.call(this),this.push=function(S){if(S.content||S.text)return this.pendingCaptions.push(S);if(S.frames)return this.pendingMetadata.push(S);this.pendingTracks.push(S.track),this.pendingBytes+=S.boxes.byteLength,S.track.type==="video"&&(this.videoTrack=S.track,this.pendingBoxes.push(S.boxes)),S.track.type==="audio"&&(this.audioTrack=S.track,this.pendingBoxes.unshift(S.boxes))}},Ri.prototype=new Pi,Ri.prototype.flush=function(f){var _=0,S={captions:[],captionStreams:{},metadata:[],info:{}},b,C,P,G=0,Y;if(this.pendingTracks.length<this.numberOfTracks){if(f!=="VideoSegmentStream"&&f!=="AudioSegmentStream")return;if(this.remuxTracks)return;if(this.pendingTracks.length===0){this.emittedTracks++,this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0);return}}if(this.videoTrack?(G=this.videoTrack.timelineStartInfo.pts,$u.forEach(function(J){S.info[J]=this.videoTrack[J]},this)):this.audioTrack&&(G=this.audioTrack.timelineStartInfo.pts,sl.forEach(function(J){S.info[J]=this.audioTrack[J]},this)),this.videoTrack||this.audioTrack){for(this.pendingTracks.length===1?S.type=this.pendingTracks[0].type:S.type="combined",this.emittedTracks+=this.pendingTracks.length,P=us.initSegment(this.pendingTracks),S.initSegment=new Uint8Array(P.byteLength),S.initSegment.set(P),S.data=new Uint8Array(this.pendingBytes),Y=0;Y<this.pendingBoxes.length;Y++)S.data.set(this.pendingBoxes[Y],_),_+=this.pendingBoxes[Y].byteLength;for(Y=0;Y<this.pendingCaptions.length;Y++)b=this.pendingCaptions[Y],b.startTime=ji.metadataTsToSeconds(b.startPts,G,this.keepOriginalTimestamps),b.endTime=ji.metadataTsToSeconds(b.endPts,G,this.keepOriginalTimestamps),S.captionStreams[b.stream]=!0,S.captions.push(b);for(Y=0;Y<this.pendingMetadata.length;Y++)C=this.pendingMetadata[Y],C.cueTime=ji.metadataTsToSeconds(C.pts,G,this.keepOriginalTimestamps),S.metadata.push(C);for(S.metadata.dispatchType=this.metadataStream.dispatchType,this.pendingTracks.length=0,this.videoTrack=null,this.pendingBoxes.length=0,this.pendingCaptions.length=0,this.pendingBytes=0,this.pendingMetadata.length=0,this.trigger("data",S),Y=0;Y<S.captions.length;Y++)b=S.captions[Y],this.trigger("caption",b);for(Y=0;Y<S.metadata.length;Y++)C=S.metadata[Y],this.trigger("id3Frame",C)}this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0)},Ri.prototype.setRemux=function(f){this.remuxTracks=f},Ka=function(f){var _=this,S=!0,b,C;Ka.prototype.init.call(this),f=f||{},this.baseMediaDecodeTime=f.baseMediaDecodeTime||0,this.transmuxPipeline_={},this.setupAacPipeline=function(){var P={};this.transmuxPipeline_=P,P.type="aac",P.metadataStream=new zn.MetadataStream,P.aacStream=new il,P.audioTimestampRolloverStream=new zn.TimestampRolloverStream("audio"),P.timedMetadataTimestampRolloverStream=new zn.TimestampRolloverStream("timed-metadata"),P.adtsStream=new qa,P.coalesceStream=new Ri(f,P.metadataStream),P.headOfPipeline=P.aacStream,P.aacStream.pipe(P.audioTimestampRolloverStream).pipe(P.adtsStream),P.aacStream.pipe(P.timedMetadataTimestampRolloverStream).pipe(P.metadataStream).pipe(P.coalesceStream),P.metadataStream.on("timestamp",function(G){P.aacStream.setTimestamp(G.timeStamp)}),P.aacStream.on("data",function(G){G.type!=="timed-metadata"&&G.type!=="audio"||P.audioSegmentStream||(C=C||{timelineStartInfo:{baseMediaDecodeTime:_.baseMediaDecodeTime},codec:"adts",type:"audio"},P.coalesceStream.numberOfTracks++,P.audioSegmentStream=new Hs(C,f),P.audioSegmentStream.on("log",_.getLogTrigger_("audioSegmentStream")),P.audioSegmentStream.on("timingInfo",_.trigger.bind(_,"audioTimingInfo")),P.adtsStream.pipe(P.audioSegmentStream).pipe(P.coalesceStream),_.trigger("trackinfo",{hasAudio:!!C,hasVideo:!!b}))}),P.coalesceStream.on("data",this.trigger.bind(this,"data")),P.coalesceStream.on("done",this.trigger.bind(this,"done")),bo(this,P)},this.setupTsPipeline=function(){var P={};this.transmuxPipeline_=P,P.type="ts",P.metadataStream=new zn.MetadataStream,P.packetStream=new zn.TransportPacketStream,P.parseStream=new zn.TransportParseStream,P.elementaryStream=new zn.ElementaryStream,P.timestampRolloverStream=new zn.TimestampRolloverStream,P.adtsStream=new qa,P.h264Stream=new xo,P.captionStream=new zn.CaptionStream(f),P.coalesceStream=new Ri(f,P.metadataStream),P.headOfPipeline=P.packetStream,P.packetStream.pipe(P.parseStream).pipe(P.elementaryStream).pipe(P.timestampRolloverStream),P.timestampRolloverStream.pipe(P.h264Stream),P.timestampRolloverStream.pipe(P.adtsStream),P.timestampRolloverStream.pipe(P.metadataStream).pipe(P.coalesceStream),P.h264Stream.pipe(P.captionStream).pipe(P.coalesceStream),P.elementaryStream.on("data",function(G){var Y;if(G.type==="metadata"){for(Y=G.tracks.length;Y--;)!b&&G.tracks[Y].type==="video"?(b=G.tracks[Y],b.timelineStartInfo.baseMediaDecodeTime=_.baseMediaDecodeTime):!C&&G.tracks[Y].type==="audio"&&(C=G.tracks[Y],C.timelineStartInfo.baseMediaDecodeTime=_.baseMediaDecodeTime);b&&!P.videoSegmentStream&&(P.coalesceStream.numberOfTracks++,P.videoSegmentStream=new Ga(b,f),P.videoSegmentStream.on("log",_.getLogTrigger_("videoSegmentStream")),P.videoSegmentStream.on("timelineStartInfo",function(J){C&&!f.keepOriginalTimestamps&&(C.timelineStartInfo=J,P.audioSegmentStream.setEarliestDts(J.dts-_.baseMediaDecodeTime))}),P.videoSegmentStream.on("processedGopsInfo",_.trigger.bind(_,"gopInfo")),P.videoSegmentStream.on("segmentTimingInfo",_.trigger.bind(_,"videoSegmentTimingInfo")),P.videoSegmentStream.on("baseMediaDecodeTime",function(J){C&&P.audioSegmentStream.setVideoBaseMediaDecodeTime(J)}),P.videoSegmentStream.on("timingInfo",_.trigger.bind(_,"videoTimingInfo")),P.h264Stream.pipe(P.videoSegmentStream).pipe(P.coalesceStream)),C&&!P.audioSegmentStream&&(P.coalesceStream.numberOfTracks++,P.audioSegmentStream=new Hs(C,f),P.audioSegmentStream.on("log",_.getLogTrigger_("audioSegmentStream")),P.audioSegmentStream.on("timingInfo",_.trigger.bind(_,"audioTimingInfo")),P.audioSegmentStream.on("segmentTimingInfo",_.trigger.bind(_,"audioSegmentTimingInfo")),P.adtsStream.pipe(P.audioSegmentStream).pipe(P.coalesceStream)),_.trigger("trackinfo",{hasAudio:!!C,hasVideo:!!b})}}),P.coalesceStream.on("data",this.trigger.bind(this,"data")),P.coalesceStream.on("id3Frame",function(G){G.dispatchType=P.metadataStream.dispatchType,_.trigger("id3Frame",G)}),P.coalesceStream.on("caption",this.trigger.bind(this,"caption")),P.coalesceStream.on("done",this.trigger.bind(this,"done")),bo(this,P)},this.setBaseMediaDecodeTime=function(P){var G=this.transmuxPipeline_;f.keepOriginalTimestamps||(this.baseMediaDecodeTime=P),C&&(C.timelineStartInfo.dts=void 0,C.timelineStartInfo.pts=void 0,Sn.clearDtsInfo(C),G.audioTimestampRolloverStream&&G.audioTimestampRolloverStream.discontinuity()),b&&(G.videoSegmentStream&&(G.videoSegmentStream.gopCache_=[]),b.timelineStartInfo.dts=void 0,b.timelineStartInfo.pts=void 0,Sn.clearDtsInfo(b),G.captionStream.reset()),G.timestampRolloverStream&&G.timestampRolloverStream.discontinuity()},this.setAudioAppendStart=function(P){C&&this.transmuxPipeline_.audioSegmentStream.setAudioAppendStart(P)},this.setRemux=function(P){var G=this.transmuxPipeline_;f.remux=P,G&&G.coalesceStream&&G.coalesceStream.setRemux(P)},this.alignGopsWith=function(P){b&&this.transmuxPipeline_.videoSegmentStream&&this.transmuxPipeline_.videoSegmentStream.alignGopsWith(P)},this.getLogTrigger_=function(P){var G=this;return function(Y){Y.stream=P,G.trigger("log",Y)}},this.push=function(P){if(S){var G=$d(P);G&&this.transmuxPipeline_.type!=="aac"?this.setupAacPipeline():!G&&this.transmuxPipeline_.type!=="ts"&&this.setupTsPipeline(),S=!1}this.transmuxPipeline_.headOfPipeline.push(P)},this.flush=function(){S=!0,this.transmuxPipeline_.headOfPipeline.flush()},this.endTimeline=function(){this.transmuxPipeline_.headOfPipeline.endTimeline()},this.reset=function(){this.transmuxPipeline_.headOfPipeline&&this.transmuxPipeline_.headOfPipeline.reset()},this.resetCaptions=function(){this.transmuxPipeline_.captionStream&&this.transmuxPipeline_.captionStream.reset()}},Ka.prototype=new Pi;var Nc={Transmuxer:Ka},$l=function(f){return f>>>0},Uc=function(f){return("00"+f.toString(16)).slice(-2)},va={toUnsigned:$l,toHexString:Uc},$c=function(f){var _="";return _+=String.fromCharCode(f[0]),_+=String.fromCharCode(f[1]),_+=String.fromCharCode(f[2]),_+=String.fromCharCode(f[3]),_},So=$c,jc=va.toUnsigned,zc=So,To=function(f,_){var S=[],b,C,P,G,Y;if(!_.length)return null;for(b=0;b<f.byteLength;)C=jc(f[b]<<24|f[b+1]<<16|f[b+2]<<8|f[b+3]),P=zc(f.subarray(b+4,b+8)),G=C>1?b+C:f.byteLength,P===_[0]&&(_.length===1?S.push(f.subarray(b+8,G)):(Y=To(f.subarray(b+8,G),_.slice(1)),Y.length&&(S=S.concat(Y)))),b=G;return S},Co=To,zd=va.toUnsigned,Hd=s.getUint64,Vd=function(f){var _={version:f[0],flags:new Uint8Array(f.subarray(1,4))};return _.version===1?_.baseMediaDecodeTime=Hd(f.subarray(4)):_.baseMediaDecodeTime=zd(f[4]<<24|f[5]<<16|f[6]<<8|f[7]),_},al=Vd,ol=function(f){return{isLeading:(f[0]&12)>>>2,dependsOn:f[0]&3,isDependedOn:(f[1]&192)>>>6,hasRedundancy:(f[1]&48)>>>4,paddingValue:(f[1]&14)>>>1,isNonSyncSample:f[1]&1,degradationPriority:f[2]<<8|f[3]}},zu=ol,jl=zu,Hc=function(f){var _={version:f[0],flags:new Uint8Array(f.subarray(1,4)),samples:[]},S=new DataView(f.buffer,f.byteOffset,f.byteLength),b=_.flags[2]&1,C=_.flags[2]&4,P=_.flags[1]&1,G=_.flags[1]&2,Y=_.flags[1]&4,J=_.flags[1]&8,re=S.getUint32(4),de=8,ve;for(b&&(_.dataOffset=S.getInt32(de),de+=4),C&&re&&(ve={flags:jl(f.subarray(de,de+4))},de+=4,P&&(ve.duration=S.getUint32(de),de+=4),G&&(ve.size=S.getUint32(de),de+=4),J&&(_.version===1?ve.compositionTimeOffset=S.getInt32(de):ve.compositionTimeOffset=S.getUint32(de),de+=4),_.samples.push(ve),re--);re--;)ve={},P&&(ve.duration=S.getUint32(de),de+=4),G&&(ve.size=S.getUint32(de),de+=4),Y&&(ve.flags=jl(f.subarray(de,de+4)),de+=4),J&&(_.version===1?ve.compositionTimeOffset=S.getInt32(de):ve.compositionTimeOffset=S.getUint32(de),de+=4),_.samples.push(ve);return _},Vs=Hc,rn=function(f){var _=new DataView(f.buffer,f.byteOffset,f.byteLength),S={version:f[0],flags:new Uint8Array(f.subarray(1,4)),trackId:_.getUint32(4)},b=S.flags[2]&1,C=S.flags[2]&2,P=S.flags[2]&8,G=S.flags[2]&16,Y=S.flags[2]&32,J=S.flags[0]&65536,re=S.flags[0]&131072,de;return de=8,b&&(de+=4,S.baseDataOffset=_.getUint32(12),de+=4),C&&(S.sampleDescriptionIndex=_.getUint32(de),de+=4),P&&(S.defaultSampleDuration=_.getUint32(de),de+=4),G&&(S.defaultSampleSize=_.getUint32(de),de+=4),Y&&(S.defaultSampleFlags=_.getUint32(de)),J&&(S.durationIsEmpty=!0),!b&&re&&(S.baseDataOffsetIsMoof=!0),S},As=rn,on;typeof window<"u"?on=window:typeof r<"u"?on=r:typeof self<"u"?on=self:on={};var zi=on,Wd=Xe.discardEmulationPreventionBytes,Vc=bi.CaptionStream,Ds=Co,Wc=al,ll=Vs,ul=As,Hu=zi,zl=function(f,_){for(var S=f,b=0;b<_.length;b++){var C=_[b];if(S<C.size)return C;S-=C.size}return null},qd=function(f,_,S){var b=new DataView(f.buffer,f.byteOffset,f.byteLength),C={logs:[],seiNals:[]},P,G,Y,J;for(G=0;G+4<f.length;G+=Y)if(Y=b.getUint32(G),G+=4,!(Y<=0))switch(f[G]&31){case 6:var re=f.subarray(G+1,G+1+Y),de=zl(G,_);if(P={nalUnitType:"sei_rbsp",size:Y,data:re,escapedRBSP:Wd(re),trackId:S},de)P.pts=de.pts,P.dts=de.dts,J=de;else if(J)P.pts=J.pts,P.dts=J.dts;else{C.logs.push({level:"warn",message:"We've encountered a nal unit without data at "+G+" for trackId "+S+". See mux.js#223."});break}C.seiNals.push(P);break}return C},Vu=function(f,_,S){var b=_,C=S.defaultSampleDuration||0,P=S.defaultSampleSize||0,G=S.trackId,Y=[];return f.forEach(function(J){var re=ll(J),de=re.samples;de.forEach(function(ve){ve.duration===void 0&&(ve.duration=C),ve.size===void 0&&(ve.size=P),ve.trackId=G,ve.dts=b,ve.compositionTimeOffset===void 0&&(ve.compositionTimeOffset=0),typeof b=="bigint"?(ve.pts=b+Hu.BigInt(ve.compositionTimeOffset),b+=Hu.BigInt(ve.duration)):(ve.pts=b+ve.compositionTimeOffset,b+=ve.duration)}),Y=Y.concat(de)}),Y},oe=function(f,_){var S=Ds(f,["moof","traf"]),b=Ds(f,["mdat"]),C={},P=[];return b.forEach(function(G,Y){var J=S[Y];P.push({mdat:G,traf:J})}),P.forEach(function(G){var Y=G.mdat,J=G.traf,re=Ds(J,["tfhd"]),de=ul(re[0]),ve=de.trackId,Ve=Ds(J,["tfdt"]),Ee=Ve.length>0?Wc(Ve[0]).baseMediaDecodeTime:0,bt=Ds(J,["trun"]),zt,Vr;_===ve&&bt.length>0&&(zt=Vu(bt,Ee,de),Vr=qd(Y,zt,ve),C[ve]||(C[ve]={seiNals:[],logs:[]}),C[ve].seiNals=C[ve].seiNals.concat(Vr.seiNals),C[ve].logs=C[ve].logs.concat(Vr.logs))}),C},O=function(f,_,S){var b;if(_===null)return null;b=oe(f,_);var C=b[_]||{};return{seiNals:C.seiNals,logs:C.logs,timescale:S}},z=function(){var f=!1,_,S,b,C,P,G;this.isInitialized=function(){return f},this.init=function(Y){_=new Vc,f=!0,G=Y?Y.isPartial:!1,_.on("data",function(J){J.startTime=J.startPts/C,J.endTime=J.endPts/C,P.captions.push(J),P.captionStreams[J.stream]=!0}),_.on("log",function(J){P.logs.push(J)})},this.isNewInit=function(Y,J){return Y&&Y.length===0||J&&typeof J=="object"&&Object.keys(J).length===0?!1:b!==Y[0]||C!==J[b]},this.parse=function(Y,J,re){var de;if(this.isInitialized()){if(!J||!re)return null;if(this.isNewInit(J,re))b=J[0],C=re[b];else if(b===null||!C)return S.push(Y),null}else return null;for(;S.length>0;){var ve=S.shift();this.parse(ve,J,re)}return de=O(Y,b,C),de&&de.logs&&(P.logs=P.logs.concat(de.logs)),de===null||!de.seiNals?P.logs.length?{logs:P.logs,captions:[],captionStreams:[]}:null:(this.pushNals(de.seiNals),this.flushStream(),P)},this.pushNals=function(Y){if(!this.isInitialized()||!Y||Y.length===0)return null;Y.forEach(function(J){_.push(J)})},this.flushStream=function(){if(!this.isInitialized())return null;G?_.partialFlush():_.flush()},this.clearParsedCaptions=function(){P.captions=[],P.captionStreams={},P.logs=[]},this.resetCaptionStream=function(){if(!this.isInitialized())return null;_.reset()},this.clearAllCaptions=function(){this.clearParsedCaptions(),this.resetCaptionStream()},this.reset=function(){S=[],b=null,C=null,P?this.clearParsedCaptions():P={captions:[],captionStreams:{},logs:[]},this.resetCaptionStream()},this.reset()},j=z,W=function(f){for(var _=0,S=String.fromCharCode(f[_]),b="";S!=="\0";)b+=S,_++,S=String.fromCharCode(f[_]);return b+=S,b},Z={uint8ToCString:W},te=Z.uint8ToCString,ge=s.getUint64,_e=function(f){var _=4,S=f[0],b,C,P,G,Y,J,re,de;if(S===0){b=te(f.subarray(_)),_+=b.length,C=te(f.subarray(_)),_+=C.length;var ve=new DataView(f.buffer);P=ve.getUint32(_),_+=4,Y=ve.getUint32(_),_+=4,J=ve.getUint32(_),_+=4,re=ve.getUint32(_),_+=4}else if(S===1){var ve=new DataView(f.buffer);P=ve.getUint32(_),_+=4,G=ge(f.subarray(_)),_+=8,J=ve.getUint32(_),_+=4,re=ve.getUint32(_),_+=4,b=te(f.subarray(_)),_+=b.length,C=te(f.subarray(_)),_+=C.length}de=new Uint8Array(f.subarray(_,f.byteLength));var Ve={scheme_id_uri:b,value:C,timescale:P||1,presentation_time:G,presentation_time_delta:Y,event_duration:J,id:re,message_data:de};return we(S,Ve)?Ve:void 0},De=function(f,_,S,b){return f||f===0?f/_:b+S/_},we=function(f,_){var S=_.scheme_id_uri!=="\0",b=f===0&&Re(_.presentation_time_delta)&&S,C=f===1&&Re(_.presentation_time)&&S;return!(f>1)&&b||C},Re=function(f){return f!==void 0||f!==null},nt={parseEmsgBox:_e,scaleTime:De},Pt=va.toUnsigned,Ut=va.toHexString,tt=Co,sr=So,kn=nt,fi=As,Hi=Vs,cl=al,wo=s.getUint64,Eo,dl,ya,Ws,vn,Ya,Vi,Hl=zi,rf=hi.parseId3Frames;Eo=function(f){var _={},S=tt(f,["moov","trak"]);return S.reduce(function(b,C){var P,G,Y,J,re;return P=tt(C,["tkhd"])[0],!P||(G=P[0],Y=G===0?12:20,J=Pt(P[Y]<<24|P[Y+1]<<16|P[Y+2]<<8|P[Y+3]),re=tt(C,["mdia","mdhd"])[0],!re)?null:(G=re[0],Y=G===0?12:20,b[J]=Pt(re[Y]<<24|re[Y+1]<<16|re[Y+2]<<8|re[Y+3]),b)},_)},dl=function(f,_){var S;S=tt(_,["moof","traf"]);var b=S.reduce(function(C,P){var G=tt(P,["tfhd"])[0],Y=Pt(G[4]<<24|G[5]<<16|G[6]<<8|G[7]),J=f[Y]||9e4,re=tt(P,["tfdt"])[0],de=new DataView(re.buffer,re.byteOffset,re.byteLength),ve;re[0]===1?ve=wo(re.subarray(4,12)):ve=de.getUint32(4);let Ve;return typeof ve=="bigint"?Ve=ve/Hl.BigInt(J):typeof ve=="number"&&!isNaN(ve)&&(Ve=ve/J),Ve<Number.MAX_SAFE_INTEGER&&(Ve=Number(Ve)),Ve<C&&(C=Ve),C},1/0);return typeof b=="bigint"||isFinite(b)?b:0},ya=function(f,_){var S=tt(_,["moof","traf"]),b=0,C=0,P;if(S&&S.length){var G=tt(S[0],["tfhd"])[0],Y=tt(S[0],["trun"])[0],J=tt(S[0],["tfdt"])[0];if(G){var re=fi(G);P=re.trackId}if(J){var de=cl(J);b=de.baseMediaDecodeTime}if(Y){var ve=Hi(Y);ve.samples&&ve.samples.length&&(C=ve.samples[0].compositionTimeOffset||0)}}var Ve=f[P]||9e4;typeof b=="bigint"&&(C=Hl.BigInt(C),Ve=Hl.BigInt(Ve));var Ee=(b+C)/Ve;return typeof Ee=="bigint"&&Ee<Number.MAX_SAFE_INTEGER&&(Ee=Number(Ee)),Ee},Ws=function(f){var _=tt(f,["moov","trak"]),S=[];return _.forEach(function(b){var C=tt(b,["mdia","hdlr"]),P=tt(b,["tkhd"]);C.forEach(function(G,Y){var J=sr(G.subarray(8,12)),re=P[Y],de,ve,Ve;J==="vide"&&(de=new DataView(re.buffer,re.byteOffset,re.byteLength),ve=de.getUint8(0),Ve=ve===0?de.getUint32(12):de.getUint32(20),S.push(Ve))})}),S},Ya=function(f){var _=f[0],S=_===0?12:20;return Pt(f[S]<<24|f[S+1]<<16|f[S+2]<<8|f[S+3])},vn=function(f){var _=tt(f,["moov","trak"]),S=[];return _.forEach(function(b){var C={},P=tt(b,["tkhd"])[0],G,Y;P&&(G=new DataView(P.buffer,P.byteOffset,P.byteLength),Y=G.getUint8(0),C.id=Y===0?G.getUint32(12):G.getUint32(20));var J=tt(b,["mdia","hdlr"])[0];if(J){var re=sr(J.subarray(8,12));re==="vide"?C.type="video":re==="soun"?C.type="audio":C.type=re}var de=tt(b,["mdia","minf","stbl","stsd"])[0];if(de){var ve=de.subarray(8);C.codec=sr(ve.subarray(4,8));var Ve=tt(ve,[C.codec])[0],Ee,bt;Ve&&(/^[asm]vc[1-9]$/i.test(C.codec)?(Ee=Ve.subarray(78),bt=sr(Ee.subarray(4,8)),bt==="avcC"&&Ee.length>11?(C.codec+=".",C.codec+=Ut(Ee[9]),C.codec+=Ut(Ee[10]),C.codec+=Ut(Ee[11])):C.codec="avc1.4d400d"):/^mp4[a,v]$/i.test(C.codec)?(Ee=Ve.subarray(28),bt=sr(Ee.subarray(4,8)),bt==="esds"&&Ee.length>20&&Ee[19]!==0?(C.codec+="."+Ut(Ee[19]),C.codec+="."+Ut(Ee[20]>>>2&63).replace(/^0/,"")):C.codec="mp4a.40.2"):C.codec=C.codec.toLowerCase())}var zt=tt(b,["mdia","mdhd"])[0];zt&&(C.timescale=Ya(zt)),S.push(C)}),S},Vi=function(f,_=0){var S=tt(f,["emsg"]);return S.map(b=>{var C=kn.parseEmsgBox(new Uint8Array(b)),P=rf(C.message_data);return{cueTime:kn.scaleTime(C.presentation_time,C.timescale,C.presentation_time_delta,_),duration:kn.scaleTime(C.event_duration,C.timescale),frames:P}})};var Vl={findBox:tt,parseType:sr,timescale:Eo,startTime:dl,compositionStartTime:ya,videoTrackIds:Ws,tracks:vn,getTimescaleFromMediaHeader:Ya,getEmsgID3:Vi},Wl=mn,qc=function(f){var _=f[1]&31;return _<<=8,_|=f[2],_},ko=function(f){return!!(f[1]&64)},Wi=function(f){var _=0;return(f[3]&48)>>>4>1&&(_+=f[4]+1),_},Gd=function(f,_){var S=qc(f);return S===0?"pat":S===_?"pmt":_?"pes":null},Kd=function(f){var _=ko(f),S=4+Wi(f);return _&&(S+=f[S]+1),(f[S+10]&31)<<8|f[S+11]},ym=function(f){var _={},S=ko(f),b=4+Wi(f);if(S&&(b+=f[b]+1),!!(f[b+5]&1)){var C,P,G;C=(f[b+1]&15)<<8|f[b+2],P=3+C-4,G=(f[b+10]&15)<<8|f[b+11];for(var Y=12+G;Y<P;){var J=b+Y;_[(f[J+1]&31)<<8|f[J+2]]=f[J],Y+=((f[J+3]&15)<<8|f[J+4])+5}return _}},_m=function(f,_){var S=qc(f),b=_[S];switch(b){case Wl.H264_STREAM_TYPE:return"video";case Wl.ADTS_STREAM_TYPE:return"audio";case Wl.METADATA_STREAM_TYPE:return"timed-metadata";default:return null}},Wu=function(f){var _=ko(f);if(!_)return null;var S=4+Wi(f);if(S>=f.byteLength)return null;var b=null,C;return C=f[S+7],C&192&&(b={},b.pts=(f[S+9]&14)<<27|(f[S+10]&255)<<20|(f[S+11]&254)<<12|(f[S+12]&255)<<5|(f[S+13]&254)>>>3,b.pts*=4,b.pts+=(f[S+13]&6)>>>1,b.dts=b.pts,C&64&&(b.dts=(f[S+14]&14)<<27|(f[S+15]&255)<<20|(f[S+16]&254)<<12|(f[S+17]&255)<<5|(f[S+18]&254)>>>3,b.dts*=4,b.dts+=(f[S+18]&6)>>>1)),b},qu=function(f){switch(f){case 5:return"slice_layer_without_partitioning_rbsp_idr";case 6:return"sei_rbsp";case 7:return"seq_parameter_set_rbsp";case 8:return"pic_parameter_set_rbsp";case 9:return"access_unit_delimiter_rbsp";default:return null}},nf=function(f){for(var _=4+Wi(f),S=f.subarray(_),b=0,C=0,P=!1,G;C<S.byteLength-3;C++)if(S[C+2]===1){b=C+5;break}for(;b<S.byteLength;)switch(S[b]){case 0:if(S[b-1]!==0){b+=2;break}else if(S[b-2]!==0){b++;break}C+3!==b-2&&(G=qu(S[C+3]&31),G==="slice_layer_without_partitioning_rbsp_idr"&&(P=!0));do b++;while(S[b]!==1&&b<S.length);C=b-2,b+=3;break;case 1:if(S[b-1]!==0||S[b-2]!==0){b+=3;break}G=qu(S[C+3]&31),G==="slice_layer_without_partitioning_rbsp_idr"&&(P=!0),C=b-2,b+=3;break;default:b+=3;break}return S=S.subarray(C),b-=C,C=0,S&&S.byteLength>3&&(G=qu(S[C+3]&31),G==="slice_layer_without_partitioning_rbsp_idr"&&(P=!0)),P},sf={parseType:Gd,parsePat:Kd,parsePmt:ym,parsePayloadUnitStartIndicator:ko,parsePesType:_m,parsePesTime:Wu,videoPacketContainsKeyFrame:nf},yn=mn,cs=ke.handleRollover,ar={};ar.ts=sf,ar.aac=zs;var pi=Ht.ONE_SECOND_IN_TS,ln=188,Hn=71,Gu=function(f,_){for(var S=0,b=ln,C,P;b<f.byteLength;){if(f[S]===Hn&&f[b]===Hn){switch(C=f.subarray(S,b),P=ar.ts.parseType(C,_.pid),P){case"pat":_.pid=ar.ts.parsePat(C);break;case"pmt":var G=ar.ts.parsePmt(C);_.table=_.table||{},Object.keys(G).forEach(function(Y){_.table[Y]=G[Y]});break}S+=ln,b+=ln;continue}S++,b++}},ql=function(f,_,S){for(var b=0,C=ln,P,G,Y,J,re,de=!1;C<=f.byteLength;){if(f[b]===Hn&&(f[C]===Hn||C===f.byteLength)){switch(P=f.subarray(b,C),G=ar.ts.parseType(P,_.pid),G){case"pes":Y=ar.ts.parsePesType(P,_.table),J=ar.ts.parsePayloadUnitStartIndicator(P),Y==="audio"&&J&&(re=ar.ts.parsePesTime(P),re&&(re.type="audio",S.audio.push(re),de=!0));break}if(de)break;b+=ln,C+=ln;continue}b++,C++}for(C=f.byteLength,b=C-ln,de=!1;b>=0;){if(f[b]===Hn&&(f[C]===Hn||C===f.byteLength)){switch(P=f.subarray(b,C),G=ar.ts.parseType(P,_.pid),G){case"pes":Y=ar.ts.parsePesType(P,_.table),J=ar.ts.parsePayloadUnitStartIndicator(P),Y==="audio"&&J&&(re=ar.ts.parsePesTime(P),re&&(re.type="audio",S.audio.push(re),de=!0));break}if(de)break;b-=ln,C-=ln;continue}b--,C--}},Gl=function(f,_,S){for(var b=0,C=ln,P,G,Y,J,re,de,ve,Ve,Ee=!1,bt={data:[],size:0};C<f.byteLength;){if(f[b]===Hn&&f[C]===Hn){switch(P=f.subarray(b,C),G=ar.ts.parseType(P,_.pid),G){case"pes":if(Y=ar.ts.parsePesType(P,_.table),J=ar.ts.parsePayloadUnitStartIndicator(P),Y==="video"&&(J&&!Ee&&(re=ar.ts.parsePesTime(P),re&&(re.type="video",S.video.push(re),Ee=!0)),!S.firstKeyFrame)){if(J&&bt.size!==0){for(de=new Uint8Array(bt.size),ve=0;bt.data.length;)Ve=bt.data.shift(),de.set(Ve,ve),ve+=Ve.byteLength;if(ar.ts.videoPacketContainsKeyFrame(de)){var zt=ar.ts.parsePesTime(de);zt?(S.firstKeyFrame=zt,S.firstKeyFrame.type="video"):console.warn("Failed to extract PTS/DTS from PES at first keyframe. This could be an unusual TS segment, or else mux.js did not parse your TS segment correctly. If you know your TS segments do contain PTS/DTS on keyframes please file a bug report! You can try ffprobe to double check for yourself.")}bt.size=0}bt.data.push(P),bt.size+=P.byteLength}break}if(Ee&&S.firstKeyFrame)break;b+=ln,C+=ln;continue}b++,C++}for(C=f.byteLength,b=C-ln,Ee=!1;b>=0;){if(f[b]===Hn&&f[C]===Hn){switch(P=f.subarray(b,C),G=ar.ts.parseType(P,_.pid),G){case"pes":Y=ar.ts.parsePesType(P,_.table),J=ar.ts.parsePayloadUnitStartIndicator(P),Y==="video"&&J&&(re=ar.ts.parsePesTime(P),re&&(re.type="video",S.video.push(re),Ee=!0));break}if(Ee)break;b-=ln,C-=ln;continue}b--,C--}},af=function(f,_){if(f.audio&&f.audio.length){var S=_;(typeof S>"u"||isNaN(S))&&(S=f.audio[0].dts),f.audio.forEach(function(P){P.dts=cs(P.dts,S),P.pts=cs(P.pts,S),P.dtsTime=P.dts/pi,P.ptsTime=P.pts/pi})}if(f.video&&f.video.length){var b=_;if((typeof b>"u"||isNaN(b))&&(b=f.video[0].dts),f.video.forEach(function(P){P.dts=cs(P.dts,b),P.pts=cs(P.pts,b),P.dtsTime=P.dts/pi,P.ptsTime=P.pts/pi}),f.firstKeyFrame){var C=f.firstKeyFrame;C.dts=cs(C.dts,b),C.pts=cs(C.pts,b),C.dtsTime=C.dts/pi,C.ptsTime=C.pts/pi}}},xm=function(f){for(var _=!1,S=0,b=null,C=null,P=0,G=0,Y;f.length-G>=3;){var J=ar.aac.parseType(f,G);switch(J){case"timed-metadata":if(f.length-G<10){_=!0;break}if(P=ar.aac.parseId3TagSize(f,G),P>f.length){_=!0;break}C===null&&(Y=f.subarray(G,G+P),C=ar.aac.parseAacTimestamp(Y)),G+=P;break;case"audio":if(f.length-G<7){_=!0;break}if(P=ar.aac.parseAdtsSize(f,G),P>f.length){_=!0;break}b===null&&(Y=f.subarray(G,G+P),b=ar.aac.parseSampleRate(Y)),S++,G+=P;break;default:G++;break}if(_)return null}if(b===null||C===null)return null;var re=pi/b,de={audio:[{type:"audio",dts:C,pts:C},{type:"audio",dts:C+S*1024*re,pts:C+S*1024*re}]};return de},bm=function(f){var _={pid:null,table:null},S={};Gu(f,_);for(var b in _.table)if(_.table.hasOwnProperty(b)){var C=_.table[b];switch(C){case yn.H264_STREAM_TYPE:S.video=[],Gl(f,_,S),S.video.length===0&&delete S.video;break;case yn.ADTS_STREAM_TYPE:S.audio=[],ql(f,_,S),S.audio.length===0&&delete S.audio;break}}return S},of=function(f,_){var S=ar.aac.isLikelyAacData(f),b;return S?b=xm(f):b=bm(f),!b||!b.audio&&!b.video?null:(af(b,_),b)},Gc={inspect:of,parseAudioPes_:ql};const Kc=function(f,_){_.on("data",function(S){const b=S.initSegment;S.initSegment={data:b.buffer,byteOffset:b.byteOffset,byteLength:b.byteLength};const C=S.data;S.data=C.buffer,f.postMessage({action:"data",segment:S,byteOffset:C.byteOffset,byteLength:C.byteLength},[S.data])}),_.on("done",function(S){f.postMessage({action:"done"})}),_.on("gopInfo",function(S){f.postMessage({action:"gopInfo",gopInfo:S})}),_.on("videoSegmentTimingInfo",function(S){const b={start:{decode:Ht.videoTsToSeconds(S.start.dts),presentation:Ht.videoTsToSeconds(S.start.pts)},end:{decode:Ht.videoTsToSeconds(S.end.dts),presentation:Ht.videoTsToSeconds(S.end.pts)},baseMediaDecodeTime:Ht.videoTsToSeconds(S.baseMediaDecodeTime)};S.prependedContentDuration&&(b.prependedContentDuration=Ht.videoTsToSeconds(S.prependedContentDuration)),f.postMessage({action:"videoSegmentTimingInfo",videoSegmentTimingInfo:b})}),_.on("audioSegmentTimingInfo",function(S){const b={start:{decode:Ht.videoTsToSeconds(S.start.dts),presentation:Ht.videoTsToSeconds(S.start.pts)},end:{decode:Ht.videoTsToSeconds(S.end.dts),presentation:Ht.videoTsToSeconds(S.end.pts)},baseMediaDecodeTime:Ht.videoTsToSeconds(S.baseMediaDecodeTime)};S.prependedContentDuration&&(b.prependedContentDuration=Ht.videoTsToSeconds(S.prependedContentDuration)),f.postMessage({action:"audioSegmentTimingInfo",audioSegmentTimingInfo:b})}),_.on("id3Frame",function(S){f.postMessage({action:"id3Frame",id3Frame:S})}),_.on("caption",function(S){f.postMessage({action:"caption",caption:S})}),_.on("trackinfo",function(S){f.postMessage({action:"trackinfo",trackInfo:S})}),_.on("audioTimingInfo",function(S){f.postMessage({action:"audioTimingInfo",audioTimingInfo:{start:Ht.videoTsToSeconds(S.start),end:Ht.videoTsToSeconds(S.end)}})}),_.on("videoTimingInfo",function(S){f.postMessage({action:"videoTimingInfo",videoTimingInfo:{start:Ht.videoTsToSeconds(S.start),end:Ht.videoTsToSeconds(S.end)}})}),_.on("log",function(S){f.postMessage({action:"log",log:S})})};class Ku{constructor(_,S){this.options=S||{},this.self=_,this.init()}init(){this.transmuxer&&this.transmuxer.dispose(),this.transmuxer=new Nc.Transmuxer(this.options),Kc(this.self,this.transmuxer)}pushMp4Captions(_){this.captionParser||(this.captionParser=new j,this.captionParser.init());const S=new Uint8Array(_.data,_.byteOffset,_.byteLength),b=this.captionParser.parse(S,_.trackIds,_.timescales);this.self.postMessage({action:"mp4Captions",captions:b&&b.captions||[],logs:b&&b.logs||[],data:S.buffer},[S.buffer])}probeMp4StartTime({timescales:_,data:S}){const b=Vl.startTime(_,S);this.self.postMessage({action:"probeMp4StartTime",startTime:b,data:S},[S.buffer])}probeMp4Tracks({data:_}){const S=Vl.tracks(_);this.self.postMessage({action:"probeMp4Tracks",tracks:S,data:_},[_.buffer])}probeEmsgID3({data:_,offset:S}){const b=Vl.getEmsgID3(_,S);this.self.postMessage({action:"probeEmsgID3",id3Frames:b,emsgData:_},[_.buffer])}probeTs({data:_,baseStartTime:S}){const b=typeof S=="number"&&!isNaN(S)?S*Ht.ONE_SECOND_IN_TS:void 0,C=Gc.inspect(_,b);let P=null;C&&(P={hasVideo:C.video&&C.video.length===2||!1,hasAudio:C.audio&&C.audio.length===2||!1},P.hasVideo&&(P.videoStart=C.video[0].ptsTime),P.hasAudio&&(P.audioStart=C.audio[0].ptsTime)),this.self.postMessage({action:"probeTs",result:P,data:_},[_.buffer])}clearAllMp4Captions(){this.captionParser&&this.captionParser.clearAllCaptions()}clearParsedMp4Captions(){this.captionParser&&this.captionParser.clearParsedCaptions()}push(_){const S=new Uint8Array(_.data,_.byteOffset,_.byteLength);this.transmuxer.push(S)}reset(){this.transmuxer.reset()}setTimestampOffset(_){const S=_.timestampOffset||0;this.transmuxer.setBaseMediaDecodeTime(Math.round(Ht.secondsToVideoTs(S)))}setAudioAppendStart(_){this.transmuxer.setAudioAppendStart(Math.ceil(Ht.secondsToVideoTs(_.appendStart)))}setRemux(_){this.transmuxer.setRemux(_.remux)}flush(_){this.transmuxer.flush(),self.postMessage({action:"done",type:"transmuxed"})}endTimeline(){this.transmuxer.endTimeline(),self.postMessage({action:"endedtimeline",type:"transmuxed"})}alignGopsWith(_){this.transmuxer.alignGopsWith(_.gopsToAlignWith.slice())}}self.onmessage=function(f){if(f.data.action==="init"&&f.data.options){this.messageHandlers=new Ku(self,f.data.options);return}this.messageHandlers||(this.messageHandlers=new Ku(self)),f.data&&f.data.action&&f.data.action!=="init"&&this.messageHandlers[f.data.action]&&this.messageHandlers[f.data.action](f.data)}}));var pue=g6(fue);const mue=(r,e,t)=>{const{type:n,initSegment:i,captions:s,captionStreams:a,metadata:o,videoFrameDtsTime:l,videoFramePtsTime:u}=r.data.segment;e.buffer.push({captions:s,captionStreams:a,metadata:o});const c=r.data.segment.boxes||{data:r.data.segment.data},h={type:n,data:new Uint8Array(c.data,c.data.byteOffset,c.data.byteLength),initSegment:new Uint8Array(i.data,i.byteOffset,i.byteLength)};typeof l<"u"&&(h.videoFrameDtsTime=l),typeof u<"u"&&(h.videoFramePtsTime=u),t(h)},gue=({transmuxedData:r,callback:e})=>{r.buffer=[],e(r)},vue=(r,e)=>{e.gopInfo=r.data.gopInfo},_6=r=>{const{transmuxer:e,bytes:t,audioAppendStart:n,gopsToAlignWith:i,remux:s,onData:a,onTrackInfo:o,onAudioTimingInfo:l,onVideoTimingInfo:u,onVideoSegmentTimingInfo:c,onAudioSegmentTimingInfo:h,onId3:m,onCaptions:g,onDone:y,onEndedTimeline:v,onTransmuxerLog:x,isEndOfTimeline:w,segment:E,triggerSegmentEventFn:D}=r,I={buffer:[]};let A=w;const L=U=>{e.currentTransmux===r&&(U.data.action==="data"&&mue(U,I,a),U.data.action==="trackinfo"&&o(U.data.trackInfo),U.data.action==="gopInfo"&&vue(U,I),U.data.action==="audioTimingInfo"&&l(U.data.audioTimingInfo),U.data.action==="videoTimingInfo"&&u(U.data.videoTimingInfo),U.data.action==="videoSegmentTimingInfo"&&c(U.data.videoSegmentTimingInfo),U.data.action==="audioSegmentTimingInfo"&&h(U.data.audioSegmentTimingInfo),U.data.action==="id3Frame"&&m([U.data.id3Frame],U.data.id3Frame.dispatchType),U.data.action==="caption"&&g(U.data.caption),U.data.action==="endedtimeline"&&(A=!1,v()),U.data.action==="log"&&x(U.data.log),U.data.type==="transmuxed"&&(A||(e.onmessage=null,gue({transmuxedData:I,callback:y}),x6(e))))},N=()=>{const U={message:"Received an error message from the transmuxer worker",metadata:{errorType:Se.Error.StreamingFailedToTransmuxSegment,segmentInfo:xh({segment:E})}};y(null,U)};if(e.onmessage=L,e.onerror=N,n&&e.postMessage({action:"setAudioAppendStart",appendStart:n}),Array.isArray(i)&&e.postMessage({action:"alignGopsWith",gopsToAlignWith:i}),typeof s<"u"&&e.postMessage({action:"setRemux",remux:s}),t.byteLength){const U=t instanceof ArrayBuffer?t:t.buffer,B=t instanceof ArrayBuffer?0:t.byteOffset;D({type:"segmenttransmuxingstart",segment:E}),e.postMessage({action:"push",data:U,byteOffset:B,byteLength:t.byteLength},[U])}w&&e.postMessage({action:"endTimeline"}),e.postMessage({action:"flush"})},x6=r=>{r.currentTransmux=null,r.transmuxQueue.length&&(r.currentTransmux=r.transmuxQueue.shift(),typeof r.currentTransmux=="function"?r.currentTransmux():_6(r.currentTransmux))},uM=(r,e)=>{r.postMessage({action:e}),x6(r)},b6=(r,e)=>{if(!e.currentTransmux){e.currentTransmux=r,uM(e,r);return}e.transmuxQueue.push(uM.bind(null,e,r))},yue=r=>{b6("reset",r)},_ue=r=>{b6("endTimeline",r)},S6=r=>{if(!r.transmuxer.currentTransmux){r.transmuxer.currentTransmux=r,_6(r);return}r.transmuxer.transmuxQueue.push(r)},xue=r=>{const e=new pue;e.currentTransmux=null,e.transmuxQueue=[];const t=e.terminate;return e.terminate=()=>(e.currentTransmux=null,e.transmuxQueue.length=0,t.call(e)),e.postMessage({action:"init",options:r}),e};var Y1={reset:yue,endTimeline:_ue,transmux:S6,createTransmuxer:xue};const D0=function(r){const e=r.transmuxer,t=r.endAction||r.action,n=r.callback,i=tr({},r,{endAction:null,transmuxer:null,callback:null}),s=a=>{a.data.action===t&&(e.removeEventListener("message",s),a.data.data&&(a.data.data=new Uint8Array(a.data.data,r.byteOffset||0,r.byteLength||a.data.data.byteLength),r.data&&(r.data=a.data.data)),n(a.data))};if(e.addEventListener("message",s),r.data){const a=r.data instanceof ArrayBuffer;i.byteOffset=a?0:r.data.byteOffset,i.byteLength=r.data.byteLength;const o=[a?r.data:r.data.buffer];e.postMessage(i,o)}else e.postMessage(i)},du={FAILURE:2,TIMEOUT:-101,ABORTED:-102},Vw=r=>{r.forEach(e=>{e.abort()})},bue=r=>({bandwidth:r.bandwidth,bytesReceived:r.bytesReceived||0,roundTripTime:r.roundTripTime||0}),Sue=r=>{const e=r.target,n={bandwidth:1/0,bytesReceived:0,roundTripTime:Date.now()-e.requestTime||0};return n.bytesReceived=r.loaded,n.bandwidth=Math.floor(n.bytesReceived/n.roundTripTime*8*1e3),n},Sk=(r,e)=>{const{requestType:t}=e,n=Fh({requestType:t,request:e,error:r});return e.timedout?{status:e.status,message:"HLS request timed-out at URL: "+e.uri,code:du.TIMEOUT,xhr:e,metadata:n}:e.aborted?{status:e.status,message:"HLS request aborted at URL: "+e.uri,code:du.ABORTED,xhr:e,metadata:n}:r?{status:e.status,message:"HLS request errored at URL: "+e.uri,code:du.FAILURE,xhr:e,metadata:n}:e.responseType==="arraybuffer"&&e.response.byteLength===0?{status:e.status,message:"Empty HLS response at URL: "+e.uri,code:du.FAILURE,xhr:e,metadata:n}:null},cM=(r,e,t,n)=>(i,s)=>{const a=s.response,o=Sk(i,s);if(o)return t(o,r);if(a.byteLength!==16)return t({status:s.status,message:"Invalid HLS key at URL: "+s.uri,code:du.FAILURE,xhr:s},r);const l=new DataView(a),u=new Uint32Array([l.getUint32(0),l.getUint32(4),l.getUint32(8),l.getUint32(12)]);for(let h=0;h<e.length;h++)e[h].bytes=u;const c={uri:s.uri};return n({type:"segmentkeyloadcomplete",segment:r,keyInfo:c}),t(null,r)},T6=(r,e)=>{const t=Yp(r.map.bytes);if(t!=="mp4"){const n=r.map.resolvedUri||r.map.uri,i=t||"unknown";return e({internal:!0,message:`Found unsupported ${i} container for initialization segment at URL: ${n}`,code:du.FAILURE,metadata:{mediaType:i}})}D0({action:"probeMp4Tracks",data:r.map.bytes,transmuxer:r.transmuxer,callback:({tracks:n,data:i})=>(r.map.bytes=i,n.forEach(function(s){r.map.tracks=r.map.tracks||{},!r.map.tracks[s.type]&&(r.map.tracks[s.type]=s,typeof s.id=="number"&&s.timescale&&(r.map.timescales=r.map.timescales||{},r.map.timescales[s.id]=s.timescale))}),e(null))})},Tue=({segment:r,finishProcessingFn:e,triggerSegmentEventFn:t})=>(n,i)=>{const s=Sk(n,i);if(s)return e(s,r);const a=new Uint8Array(i.response);if(t({type:"segmentloaded",segment:r}),r.map.key)return r.map.encryptedBytes=a,e(null,r);r.map.bytes=a,T6(r,function(o){if(o)return o.xhr=i,o.status=i.status,e(o,r);e(null,r)})},Cue=({segment:r,finishProcessingFn:e,responseType:t,triggerSegmentEventFn:n})=>(i,s)=>{const a=Sk(i,s);if(a)return e(a,r);n({type:"segmentloaded",segment:r});const o=t==="arraybuffer"||!s.responseText?s.response:due(s.responseText.substring(r.lastReachedChar||0));return r.stats=bue(s),r.key?r.encryptedBytes=new Uint8Array(o):r.bytes=new Uint8Array(o),e(null,r)},wue=({segment:r,bytes:e,trackInfoFn:t,timingInfoFn:n,videoSegmentTimingInfoFn:i,audioSegmentTimingInfoFn:s,id3Fn:a,captionsFn:o,isEndOfTimeline:l,endedTimelineFn:u,dataFn:c,doneFn:h,onTransmuxerLog:m,triggerSegmentEventFn:g})=>{const y=r.map&&r.map.tracks||{},v=!!(y.audio&&y.video);let x=n.bind(null,r,"audio","start");const w=n.bind(null,r,"audio","end");let E=n.bind(null,r,"video","start");const D=n.bind(null,r,"video","end"),I=()=>S6({bytes:e,transmuxer:r.transmuxer,audioAppendStart:r.audioAppendStart,gopsToAlignWith:r.gopsToAlignWith,remux:v,onData:A=>{A.type=A.type==="combined"?"video":A.type,c(r,A)},onTrackInfo:A=>{t&&(v&&(A.isMuxed=!0),t(r,A))},onAudioTimingInfo:A=>{x&&typeof A.start<"u"&&(x(A.start),x=null),w&&typeof A.end<"u"&&w(A.end)},onVideoTimingInfo:A=>{E&&typeof A.start<"u"&&(E(A.start),E=null),D&&typeof A.end<"u"&&D(A.end)},onVideoSegmentTimingInfo:A=>{const L={pts:{start:A.start.presentation,end:A.end.presentation},dts:{start:A.start.decode,end:A.end.decode}};g({type:"segmenttransmuxingtiminginfoavailable",segment:r,timingInfo:L}),i(A)},onAudioSegmentTimingInfo:A=>{const L={pts:{start:A.start.pts,end:A.end.pts},dts:{start:A.start.dts,end:A.end.dts}};g({type:"segmenttransmuxingtiminginfoavailable",segment:r,timingInfo:L}),s(A)},onId3:(A,L)=>{a(r,A,L)},onCaptions:A=>{o(r,[A])},isEndOfTimeline:l,onEndedTimeline:()=>{u()},onTransmuxerLog:m,onDone:(A,L)=>{h&&(A.type=A.type==="combined"?"video":A.type,g({type:"segmenttransmuxingcomplete",segment:r}),h(L,r,A))},segment:r,triggerSegmentEventFn:g});D0({action:"probeTs",transmuxer:r.transmuxer,data:e,baseStartTime:r.baseStartTime,callback:A=>{r.bytes=e=A.data;const L=A.result;L&&(t(r,{hasAudio:L.hasAudio,hasVideo:L.hasVideo,isMuxed:v}),t=null),I()}})},C6=({segment:r,bytes:e,trackInfoFn:t,timingInfoFn:n,videoSegmentTimingInfoFn:i,audioSegmentTimingInfoFn:s,id3Fn:a,captionsFn:o,isEndOfTimeline:l,endedTimelineFn:u,dataFn:c,doneFn:h,onTransmuxerLog:m,triggerSegmentEventFn:g})=>{let y=new Uint8Array(e);if(TN(y)){r.isFmp4=!0;const{tracks:v}=r.map,x={isFmp4:!0,hasVideo:!!v.video,hasAudio:!!v.audio};v.audio&&v.audio.codec&&v.audio.codec!=="enca"&&(x.audioCodec=v.audio.codec),v.video&&v.video.codec&&v.video.codec!=="encv"&&(x.videoCodec=v.video.codec),v.video&&v.audio&&(x.isMuxed=!0),t(r,x);const w=(E,D)=>{c(r,{data:y,type:x.hasAudio&&!x.isMuxed?"audio":"video"}),D&&D.length&&a(r,D),E&&E.length&&o(r,E),h(null,r,{})};D0({action:"probeMp4StartTime",timescales:r.map.timescales,data:y,transmuxer:r.transmuxer,callback:({data:E,startTime:D})=>{e=E.buffer,r.bytes=y=E,x.hasAudio&&!x.isMuxed&&n(r,"audio","start",D),x.hasVideo&&n(r,"video","start",D),D0({action:"probeEmsgID3",data:y,transmuxer:r.transmuxer,offset:D,callback:({emsgData:I,id3Frames:A})=>{if(e=I.buffer,r.bytes=y=I,!v.video||!I.byteLength||!r.transmuxer){w(void 0,A);return}D0({action:"pushMp4Captions",endAction:"mp4Captions",transmuxer:r.transmuxer,data:y,timescales:r.map.timescales,trackIds:[v.video.id],callback:L=>{e=L.data.buffer,r.bytes=y=L.data,L.logs.forEach(function(N){m(Cn(N,{stream:"mp4CaptionParser"}))}),w(L.captions,A)}})}})}});return}if(!r.transmuxer){h(null,r,{});return}if(typeof r.container>"u"&&(r.container=Yp(y)),r.container!=="ts"&&r.container!=="aac"){t(r,{hasAudio:!1,hasVideo:!1}),h(null,r,{});return}wue({segment:r,bytes:e,trackInfoFn:t,timingInfoFn:n,videoSegmentTimingInfoFn:i,audioSegmentTimingInfoFn:s,id3Fn:a,captionsFn:o,isEndOfTimeline:l,endedTimelineFn:u,dataFn:c,doneFn:h,onTransmuxerLog:m,triggerSegmentEventFn:g})},w6=function({id:r,key:e,encryptedBytes:t,decryptionWorker:n,segment:i,doneFn:s},a){const o=u=>{if(u.data.source===r){n.removeEventListener("message",o);const c=u.data.decrypted;a(new Uint8Array(c.bytes,c.byteOffset,c.byteLength))}};n.onerror=()=>{const u="An error occurred in the decryption worker",c=xh({segment:i}),h={message:u,metadata:{error:new Error(u),errorType:Se.Error.StreamingFailedToDecryptSegment,segmentInfo:c,keyInfo:{uri:i.key.resolvedUri||i.map.key.resolvedUri}}};s(h,i)},n.addEventListener("message",o);let l;e.bytes.slice?l=e.bytes.slice():l=new Uint32Array(Array.prototype.slice.call(e.bytes)),n.postMessage(c6({source:r,encrypted:t,key:l,iv:e.iv}),[t.buffer,l.buffer])},Eue=({decryptionWorker:r,segment:e,trackInfoFn:t,timingInfoFn:n,videoSegmentTimingInfoFn:i,audioSegmentTimingInfoFn:s,id3Fn:a,captionsFn:o,isEndOfTimeline:l,endedTimelineFn:u,dataFn:c,doneFn:h,onTransmuxerLog:m,triggerSegmentEventFn:g})=>{g({type:"segmentdecryptionstart"}),w6({id:e.requestId,key:e.key,encryptedBytes:e.encryptedBytes,decryptionWorker:r,segment:e,doneFn:h},y=>{e.bytes=y,g({type:"segmentdecryptioncomplete",segment:e}),C6({segment:e,bytes:e.bytes,trackInfoFn:t,timingInfoFn:n,videoSegmentTimingInfoFn:i,audioSegmentTimingInfoFn:s,id3Fn:a,captionsFn:o,isEndOfTimeline:l,endedTimelineFn:u,dataFn:c,doneFn:h,onTransmuxerLog:m,triggerSegmentEventFn:g})})},kue=({activeXhrs:r,decryptionWorker:e,trackInfoFn:t,timingInfoFn:n,videoSegmentTimingInfoFn:i,audioSegmentTimingInfoFn:s,id3Fn:a,captionsFn:o,isEndOfTimeline:l,endedTimelineFn:u,dataFn:c,doneFn:h,onTransmuxerLog:m,triggerSegmentEventFn:g})=>{let y=0,v=!1;return(x,w)=>{if(!v){if(x)return v=!0,Vw(r),h(x,w);if(y+=1,y===r.length){const E=function(){if(w.encryptedBytes)return Eue({decryptionWorker:e,segment:w,trackInfoFn:t,timingInfoFn:n,videoSegmentTimingInfoFn:i,audioSegmentTimingInfoFn:s,id3Fn:a,captionsFn:o,isEndOfTimeline:l,endedTimelineFn:u,dataFn:c,doneFn:h,onTransmuxerLog:m,triggerSegmentEventFn:g});C6({segment:w,bytes:w.bytes,trackInfoFn:t,timingInfoFn:n,videoSegmentTimingInfoFn:i,audioSegmentTimingInfoFn:s,id3Fn:a,captionsFn:o,isEndOfTimeline:l,endedTimelineFn:u,dataFn:c,doneFn:h,onTransmuxerLog:m,triggerSegmentEventFn:g})};if(w.endOfAllRequests=Date.now(),w.map&&w.map.encryptedBytes&&!w.map.bytes)return g({type:"segmentdecryptionstart",segment:w}),w6({decryptionWorker:e,id:w.requestId+"-init",encryptedBytes:w.map.encryptedBytes,key:w.map.key,segment:w,doneFn:h},D=>{w.map.bytes=D,g({type:"segmentdecryptioncomplete",segment:w}),T6(w,I=>{if(I)return Vw(r),h(I,w);E()})});E()}}}},Aue=({loadendState:r,abortFn:e})=>t=>{t.target.aborted&&e&&!r.calledAbortFn&&(e(),r.calledAbortFn=!0)},Due=({segment:r,progressFn:e,trackInfoFn:t,timingInfoFn:n,videoSegmentTimingInfoFn:i,audioSegmentTimingInfoFn:s,id3Fn:a,captionsFn:o,isEndOfTimeline:l,endedTimelineFn:u,dataFn:c})=>h=>{if(!h.target.aborted)return r.stats=Cn(r.stats,Sue(h)),!r.stats.firstBytesReceivedAt&&r.stats.bytesReceived&&(r.stats.firstBytesReceivedAt=Date.now()),e(h,r)},Iue=({xhr:r,xhrOptions:e,decryptionWorker:t,segment:n,abortFn:i,progressFn:s,trackInfoFn:a,timingInfoFn:o,videoSegmentTimingInfoFn:l,audioSegmentTimingInfoFn:u,id3Fn:c,captionsFn:h,isEndOfTimeline:m,endedTimelineFn:g,dataFn:y,doneFn:v,onTransmuxerLog:x,triggerSegmentEventFn:w})=>{const E=[],D=kue({activeXhrs:E,decryptionWorker:t,trackInfoFn:a,timingInfoFn:o,videoSegmentTimingInfoFn:l,audioSegmentTimingInfoFn:u,id3Fn:c,captionsFn:h,isEndOfTimeline:m,endedTimelineFn:g,dataFn:y,doneFn:v,onTransmuxerLog:x,triggerSegmentEventFn:w});if(n.key&&!n.key.bytes){const U=[n.key];n.map&&!n.map.bytes&&n.map.key&&n.map.key.resolvedUri===n.key.resolvedUri&&U.push(n.map.key);const B=Cn(e,{uri:n.key.resolvedUri,responseType:"arraybuffer",requestType:"segment-key"}),k=cM(n,U,D,w),H={uri:n.key.resolvedUri};w({type:"segmentkeyloadstart",segment:n,keyInfo:H});const q=r(B,k);E.push(q)}if(n.map&&!n.map.bytes){if(n.map.key&&(!n.key||n.key.resolvedUri!==n.map.key.resolvedUri)){const q=Cn(e,{uri:n.map.key.resolvedUri,responseType:"arraybuffer",requestType:"segment-key"}),V=cM(n,[n.map.key],D,w),Q={uri:n.map.key.resolvedUri};w({type:"segmentkeyloadstart",segment:n,keyInfo:Q});const ie=r(q,V);E.push(ie)}const B=Cn(e,{uri:n.map.resolvedUri,responseType:"arraybuffer",headers:zw(n.map),requestType:"segment-media-initialization"}),k=Tue({segment:n,finishProcessingFn:D,triggerSegmentEventFn:w});w({type:"segmentloadstart",segment:n});const H=r(B,k);E.push(H)}const I=Cn(e,{uri:n.part&&n.part.resolvedUri||n.resolvedUri,responseType:"arraybuffer",headers:zw(n),requestType:"segment"}),A=Cue({segment:n,finishProcessingFn:D,responseType:I.responseType,triggerSegmentEventFn:w});w({type:"segmentloadstart",segment:n});const L=r(I,A);L.addEventListener("progress",Due({segment:n,progressFn:s,trackInfoFn:a,timingInfoFn:o,videoSegmentTimingInfoFn:l,audioSegmentTimingInfoFn:u,id3Fn:c,captionsFn:h,isEndOfTimeline:m,endedTimelineFn:g,dataFn:y})),E.push(L);const N={};return E.forEach(U=>{U.addEventListener("loadend",Aue({loadendState:N,abortFn:i}))}),()=>Vw(E)},Pue=el("CodecUtils"),Rue=function(r){const e=r.attributes||{};if(e.CODECS)return Mi(e.CODECS)},E6=(r,e)=>{const t=e.attributes||{};return r&&r.mediaGroups&&r.mediaGroups.AUDIO&&t.AUDIO&&r.mediaGroups.AUDIO[t.AUDIO]},Lue=(r,e)=>{if(!E6(r,e))return!0;const t=e.attributes||{},n=r.mediaGroups.AUDIO[t.AUDIO];for(const i in n)if(!n[i].uri&&!n[i].playlists)return!0;return!1},_x=function(r){const e={};return r.forEach(({mediaType:t,type:n,details:i})=>{e[t]=e[t]||[],e[t].push(U2(`${n}${i}`))}),Object.keys(e).forEach(function(t){if(e[t].length>1){Pue(`multiple ${t} codecs found as attributes: ${e[t].join(", ")}. Setting playlist codecs to null so that we wait for mux.js to probe segments for real codecs.`),e[t]=null;return}e[t]=e[t][0]}),e},dM=function(r){let e=0;return r.audio&&e++,r.video&&e++,e},I0=function(r,e){const t=e.attributes||{},n=_x(Rue(e)||[]);if(E6(r,e)&&!n.audio&&!Lue(r,e)){const i=_x(lN(r,t.AUDIO)||[]);i.audio&&(n.audio=i.audio)}return n},ny=el("PlaylistSelector"),hM=function(r){if(!r||!r.playlist)return;const e=r.playlist;return JSON.stringify({id:e.id,bandwidth:r.bandwidth,width:r.width,height:r.height,codecs:e.attributes&&e.attributes.CODECS||""})},xx=function(r,e){if(!r)return"";const t=X.getComputedStyle(r);return t?t[e]:""},hp=function(r,e){const t=r.slice();r.sort(function(n,i){const s=e(n,i);return s===0?t.indexOf(n)-t.indexOf(i):s})},Tk=function(r,e){let t,n;return r.attributes.BANDWIDTH&&(t=r.attributes.BANDWIDTH),t=t||X.Number.MAX_VALUE,e.attributes.BANDWIDTH&&(n=e.attributes.BANDWIDTH),n=n||X.Number.MAX_VALUE,t-n},Oue=function(r,e){let t,n;return r.attributes.RESOLUTION&&r.attributes.RESOLUTION.width&&(t=r.attributes.RESOLUTION.width),t=t||X.Number.MAX_VALUE,e.attributes.RESOLUTION&&e.attributes.RESOLUTION.width&&(n=e.attributes.RESOLUTION.width),n=n||X.Number.MAX_VALUE,t===n&&r.attributes.BANDWIDTH&&e.attributes.BANDWIDTH?r.attributes.BANDWIDTH-e.attributes.BANDWIDTH:t-n};let k6=function(r,e,t,n,i,s){if(!r)return;const a={bandwidth:e,width:t,height:n,limitRenditionByPlayerDimensions:i};let o=r.playlists;La.isAudioOnly(r)&&(o=s.getAudioTrackPlaylists_(),a.audioOnly=!0);let l=o.map(A=>{let L;const N=A.attributes&&A.attributes.RESOLUTION&&A.attributes.RESOLUTION.width,U=A.attributes&&A.attributes.RESOLUTION&&A.attributes.RESOLUTION.height;return L=A.attributes&&A.attributes.BANDWIDTH,L=L||X.Number.MAX_VALUE,{bandwidth:L,width:N,height:U,playlist:A}});hp(l,(A,L)=>A.bandwidth-L.bandwidth),l=l.filter(A=>!La.isIncompatible(A.playlist));let u=l.filter(A=>La.isEnabled(A.playlist));u.length||(u=l.filter(A=>!La.isDisabled(A.playlist)));const c=u.filter(A=>A.bandwidth*Xi.BANDWIDTH_VARIANCE<e);let h=c[c.length-1];const m=c.filter(A=>A.bandwidth===h.bandwidth)[0];if(i===!1){const A=m||u[0]||l[0];if(A&&A.playlist){let L="sortedPlaylistReps";return m&&(L="bandwidthBestRep"),u[0]&&(L="enabledPlaylistReps"),ny(`choosing ${hM(A)} using ${L} with options`,a),A.playlist}return ny("could not choose a playlist with options",a),null}const g=c.filter(A=>A.width&&A.height);hp(g,(A,L)=>A.width-L.width);const y=g.filter(A=>A.width===t&&A.height===n);h=y[y.length-1];const v=y.filter(A=>A.bandwidth===h.bandwidth)[0];let x,w,E;v||(x=g.filter(A=>A.width>t||A.height>n),w=x.filter(A=>A.width===x[0].width&&A.height===x[0].height),h=w[w.length-1],E=w.filter(A=>A.bandwidth===h.bandwidth)[0]);let D;if(s.leastPixelDiffSelector){const A=g.map(L=>(L.pixelDiff=Math.abs(L.width-t)+Math.abs(L.height-n),L));hp(A,(L,N)=>L.pixelDiff===N.pixelDiff?N.bandwidth-L.bandwidth:L.pixelDiff-N.pixelDiff),D=A[0]}const I=D||E||v||m||u[0]||l[0];if(I&&I.playlist){let A="sortedPlaylistReps";return D?A="leastPixelDiffRep":E?A="resolutionPlusOneRep":v?A="resolutionBestRep":m?A="bandwidthBestRep":u[0]&&(A="enabledPlaylistReps"),ny(`choosing ${hM(I)} using ${A} with options`,a),I.playlist}return ny("could not choose a playlist with options",a),null};const fM=function(){let r=this.useDevicePixelRatio&&X.devicePixelRatio||1;return isNaN(this.customPixelRatio)||(r=this.customPixelRatio),k6(this.playlists.main,this.systemBandwidth,parseInt(xx(this.tech_.el(),"width"),10)*r,parseInt(xx(this.tech_.el(),"height"),10)*r,this.limitRenditionByPlayerDimensions,this.playlistController_)},Mue=function(r){let e=-1,t=-1;if(r<0||r>1)throw new Error("Moving average bandwidth decay must be between 0 and 1.");return function(){let n=this.useDevicePixelRatio&&X.devicePixelRatio||1;return isNaN(this.customPixelRatio)||(n=this.customPixelRatio),e<0&&(e=this.systemBandwidth,t=this.systemBandwidth),this.systemBandwidth>0&&this.systemBandwidth!==t&&(e=r*this.systemBandwidth+(1-r)*e,t=this.systemBandwidth),k6(this.playlists.main,e,parseInt(xx(this.tech_.el(),"width"),10)*n,parseInt(xx(this.tech_.el(),"height"),10)*n,this.limitRenditionByPlayerDimensions,this.playlistController_)}},Fue=function(r){const{main:e,currentTime:t,bandwidth:n,duration:i,segmentDuration:s,timeUntilRebuffer:a,currentTimeline:o,syncController:l}=r,u=e.playlists.filter(y=>!La.isIncompatible(y));let c=u.filter(La.isEnabled);c.length||(c=u.filter(y=>!La.isDisabled(y)));const m=c.filter(La.hasAttribute.bind(null,"BANDWIDTH")).map(y=>{const x=l.getSyncPoint(y,i,o,t)?1:2,E=La.estimateSegmentRequestTime(s,n,y)*x-a;return{playlist:y,rebufferingImpact:E}}),g=m.filter(y=>y.rebufferingImpact<=0);return hp(g,(y,v)=>Tk(v.playlist,y.playlist)),g.length?g[0]:(hp(m,(y,v)=>y.rebufferingImpact-v.rebufferingImpact),m[0]||null)},Bue=function(){const r=this.playlists.main.playlists.filter(La.isEnabled);return hp(r,(t,n)=>Tk(t,n)),r.filter(t=>!!I0(this.playlists.main,t).video)[0]||null},Nue=r=>{let e=0,t;return r.bytes&&(t=new Uint8Array(r.bytes),r.segments.forEach(n=>{t.set(n,e),e+=n.byteLength})),t};function A6(r){try{return new URL(r).pathname.split("/").slice(-2).join("/")}catch{return""}}const Uue=function(r,e,t){if(!r[t]){e.trigger({type:"usage",name:"vhs-608"});let n=t;/^cc708_/.test(t)&&(n="SERVICE"+t.split("_")[1]);const i=e.textTracks().getTrackById(n);if(i)r[t]=i;else{const s=e.options_.vhs&&e.options_.vhs.captionServices||{};let a=t,o=t,l=!1;const u=s[n];u&&(a=u.label,o=u.language,l=u.default),r[t]=e.addRemoteTextTrack({kind:"captions",id:n,default:l,label:a,language:o},!1).track}}},$ue=function({inbandTextTracks:r,captionArray:e,timestampOffset:t}){if(!e)return;const n=X.WebKitDataCue||X.VTTCue;e.forEach(i=>{const s=i.stream;i.content?i.content.forEach(a=>{const o=new n(i.startTime+t,i.endTime+t,a.text);o.line=a.line,o.align="left",o.position=a.position,o.positionAlign="line-left",r[s].addCue(o)}):r[s].addCue(new n(i.startTime+t,i.endTime+t,i.text))})},jue=function(r){Object.defineProperties(r.frame,{id:{get(){return Se.log.warn("cue.frame.id is deprecated. Use cue.value.key instead."),r.value.key}},value:{get(){return Se.log.warn("cue.frame.value is deprecated. Use cue.value.data instead."),r.value.data}},privateData:{get(){return Se.log.warn("cue.frame.privateData is deprecated. Use cue.value.data instead."),r.value.data}}})},zue=({inbandTextTracks:r,metadataArray:e,timestampOffset:t,videoDuration:n})=>{if(!e)return;const i=X.WebKitDataCue||X.VTTCue,s=r.metadataTrack_;if(!s||(e.forEach(c=>{const h=c.cueTime+t;typeof h!="number"||X.isNaN(h)||h<0||!(h<1/0)||!c.frames||!c.frames.length||c.frames.forEach(m=>{const g=new i(h,h,m.value||m.url||m.data||"");g.frame=m,g.value=m,jue(g),s.addCue(g)})}),!s.cues||!s.cues.length))return;const a=s.cues,o=[];for(let c=0;c<a.length;c++)a[c]&&o.push(a[c]);const l=o.reduce((c,h)=>{const m=c[h.startTime]||[];return m.push(h),c[h.startTime]=m,c},{}),u=Object.keys(l).sort((c,h)=>Number(c)-Number(h));u.forEach((c,h)=>{const m=l[c],g=isFinite(n)?n:c,y=Number(u[h+1])||g;m.forEach(v=>{v.endTime=y})})},Hue={id:"ID",class:"CLASS",startDate:"START-DATE",duration:"DURATION",endDate:"END-DATE",endOnNext:"END-ON-NEXT",plannedDuration:"PLANNED-DURATION",scte35Out:"SCTE35-OUT",scte35In:"SCTE35-IN"},Vue=new Set(["id","class","startDate","duration","endDate","endOnNext","startTime","endTime","processDateRange"]),Wue=({inbandTextTracks:r,dateRanges:e})=>{const t=r.metadataTrack_;if(!t)return;const n=X.WebKitDataCue||X.VTTCue;e.forEach(i=>{for(const s of Object.keys(i)){if(Vue.has(s))continue;const a=new n(i.startTime,i.endTime,"");a.id=i.id,a.type="com.apple.quicktime.HLS",a.value={key:Hue[s],data:i[s]},(s==="scte35Out"||s==="scte35In")&&(a.value.data=new Uint8Array(a.value.data.match(/[\da-f]{2}/gi)).buffer),t.addCue(a)}i.processDateRange()})},pM=(r,e,t)=>{r.metadataTrack_||(r.metadataTrack_=t.addRemoteTextTrack({kind:"metadata",label:"Timed Metadata"},!1).track,Se.browser.IS_ANY_SAFARI||(r.metadataTrack_.inBandMetadataTrackDispatchType=e))},p0=function(r,e,t){let n,i;if(t&&t.cues)for(n=t.cues.length;n--;)i=t.cues[n],i.startTime>=r&&i.endTime<=e&&t.removeCue(i)},que=function(r){const e=r.cues;if(!e)return;const t={};for(let n=e.length-1;n>=0;n--){const i=e[n],s=`${i.startTime}-${i.endTime}-${i.text}`;t[s]?r.removeCue(i):t[s]=i}},Gue=(r,e,t)=>{if(typeof e>"u"||e===null||!r.length)return[];const n=Math.ceil((e-t+3)*Fa.ONE_SECOND_IN_TS);let i;for(i=0;i<r.length&&!(r[i].pts>n);i++);return r.slice(i)},Kue=(r,e,t)=>{if(!e.length)return r;if(t)return e.slice();const n=e[0].pts;let i=0;for(i;i<r.length&&!(r[i].pts>=n);i++);return r.slice(0,i).concat(e)},Xue=(r,e,t,n)=>{const i=Math.ceil((e-n)*Fa.ONE_SECOND_IN_TS),s=Math.ceil((t-n)*Fa.ONE_SECOND_IN_TS),a=r.slice();let o=r.length;for(;o--&&!(r[o].pts<=s););if(o===-1)return a;let l=o+1;for(;l--&&!(r[l].pts<=i););return l=Math.max(l,0),a.splice(l,o-l+1),a},Yue=function(r,e){if(!r&&!e||!r&&e||r&&!e)return!1;if(r===e)return!0;const t=Object.keys(r).sort(),n=Object.keys(e).sort();if(t.length!==n.length)return!1;for(let i=0;i<t.length;i++){const s=t[i];if(s!==n[i]||r[s]!==e[s])return!1}return!0},Que=function(r,e,t){e=e||[];const n=[];let i=0;for(let s=0;s<e.length;s++){const a=e[s];if(r===a.timeline&&(n.push(s),i+=a.duration,i>t))return s}return n.length===0?0:n[n.length-1]},t0=1,Jue=500,mM=r=>typeof r=="number"&&isFinite(r),iy=1/60,Zue=(r,e,t)=>r!=="main"||!e||!t?null:!t.hasAudio&&!t.hasVideo?"Neither audio nor video found in segment.":e.hasVideo&&!t.hasVideo?"Only audio found in segment when we expected video. We can't switch to audio only from a stream that had video. To get rid of this message, please add codec information to the manifest.":!e.hasVideo&&t.hasVideo?"Video found in segment when we expected only audio. We can't switch to a stream with video from an audio only stream. To get rid of this message, please add codec information to the manifest.":null,ece=(r,e,t)=>{let n=e-Xi.BACK_BUFFER_LENGTH;r.length&&(n=Math.max(n,r.start(0)));const i=e-t;return Math.min(i,n)},If=r=>{const{startOfSegment:e,duration:t,segment:n,part:i,playlist:{mediaSequence:s,id:a,segments:o=[]},mediaIndex:l,partIndex:u,timeline:c}=r,h=o.length-1;let m="mediaIndex/partIndex increment";r.getMediaInfoForTime?m=`getMediaInfoForTime (${r.getMediaInfoForTime})`:r.isSyncRequest&&(m="getSyncSegmentCandidate (isSyncRequest)"),r.independent&&(m+=` with independent ${r.independent}`);const g=typeof u=="number",y=r.segment.uri?"segment":"pre-segment",v=g?K5({preloadSegment:n})-1:0;return`${y} [${s+l}/${s+h}]`+(g?` part [${u}/${v}]`:"")+` segment start/end [${n.start} => ${n.end}]`+(g?` part start/end [${i.start} => ${i.end}]`:"")+` startOfSegment [${e}] duration [${t}] timeline [${c}] selected by [${m}] playlist [${a}]`},gM=r=>`${r}TimingInfo`,tce=({segmentTimeline:r,currentTimeline:e,startOfSegment:t,buffered:n,overrideCheck:i})=>!i&&r===e?null:r<e?t:n.length?n.end(n.length-1):t,Ww=({timelineChangeController:r,currentTimeline:e,segmentTimeline:t,loaderType:n,audioDisabled:i})=>{if(e===t)return!1;if(n==="audio"){const s=r.lastTimelineChange({type:"main"});return!s||s.to!==t}if(n==="main"&&i){const s=r.pendingTimelineChange({type:"audio"});return!(s&&s.to===t)}return!1},rce=r=>{if(!r)return!1;const e=r.pendingTimelineChange({type:"audio"}),t=r.pendingTimelineChange({type:"main"}),n=e&&t,i=n&&e.to!==t.to;return!!(n&&e.from!==-1&&t.from!==-1&&i)},nce=r=>{r&&(r.pause(),r.resetEverything(),r.load())},ice=r=>{const e=r.timelineChangeController_.pendingTimelineChange({type:"audio"}),t=r.timelineChangeController_.pendingTimelineChange({type:"main"});return e&&t&&e.to<t.to},ud=r=>{const e=r.pendingSegment_;if(!e)return;if(Ww({timelineChangeController:r.timelineChangeController_,currentTimeline:r.currentTimeline_,segmentTimeline:e.timeline,loaderType:r.loaderType_,audioDisabled:r.audioDisabled_})&&rce(r.timelineChangeController_)){if(ice(r)){r.timelineChangeController_.trigger("audioTimelineBehind");return}nce(r)}},sce=r=>{let e=0;return["video","audio"].forEach(function(t){const n=r[`${t}TimingInfo`];if(!n)return;const{start:i,end:s}=n;let a;typeof i=="bigint"||typeof s=="bigint"?a=X.BigInt(s)-X.BigInt(i):typeof i=="number"&&typeof s=="number"&&(a=s-i),typeof a<"u"&&a>e&&(e=a)}),typeof e=="bigint"&&e<Number.MAX_SAFE_INTEGER&&(e=Number(e)),e},vM=({segmentDuration:r,maxDuration:e})=>r?Math.round(r)>e+uu:!1,ace=(r,e)=>{if(e!=="hls")return null;const t=sce({audioTimingInfo:r.audioTimingInfo,videoTimingInfo:r.videoTimingInfo});if(!t)return null;const n=r.playlist.targetDuration,i=vM({segmentDuration:t,maxDuration:n*2}),s=vM({segmentDuration:t,maxDuration:n}),a=`Segment with index ${r.mediaIndex} from playlist ${r.playlist.id} has a duration of ${t} when the reported duration is ${r.duration} and the target duration is ${n}. For HLS content, a duration in excess of the target duration may result in playback issues. See the HLS specification section on EXT-X-TARGETDURATION for more details: https://tools.ietf.org/html/draft-pantos-http-live-streaming-23#section-4.3.3.1`;return i||s?{severity:i?"warn":"info",message:a}:null},xh=({type:r,segment:e})=>{if(!e)return;const t=!!(e.key||e.map&&e.map.ke),n=!!(e.map&&!e.map.bytes),i=e.startOfSegment===void 0?e.start:e.startOfSegment;return{type:r||e.type,uri:e.resolvedUri||e.uri,start:i,duration:e.duration,isEncrypted:t,isMediaInitialization:n}};let qw=class extends Se.EventTarget{constructor(e,t={}){if(super(),!e)throw new TypeError("Initialization settings are required");if(typeof e.currentTime!="function")throw new TypeError("No currentTime getter specified");if(!e.mediaSource)throw new TypeError("No MediaSource specified");this.bandwidth=e.bandwidth,this.throughput={rate:0,count:0},this.roundTrip=NaN,this.resetStats_(),this.mediaIndex=null,this.partIndex=null,this.hasPlayed_=e.hasPlayed,this.currentTime_=e.currentTime,this.seekable_=e.seekable,this.seeking_=e.seeking,this.duration_=e.duration,this.mediaSource_=e.mediaSource,this.vhs_=e.vhs,this.loaderType_=e.loaderType,this.currentMediaInfo_=void 0,this.startingMediaInfo_=void 0,this.segmentMetadataTrack_=e.segmentMetadataTrack,this.goalBufferLength_=e.goalBufferLength,this.sourceType_=e.sourceType,this.sourceUpdater_=e.sourceUpdater,this.inbandTextTracks_=e.inbandTextTracks,this.state_="INIT",this.timelineChangeController_=e.timelineChangeController,this.shouldSaveSegmentTimingInfo_=!0,this.parse708captions_=e.parse708captions,this.useDtsForTimestampOffset_=e.useDtsForTimestampOffset,this.captionServices_=e.captionServices,this.exactManifestTimings=e.exactManifestTimings,this.addMetadataToTextTrack=e.addMetadataToTextTrack,this.checkBufferTimeout_=null,this.error_=void 0,this.currentTimeline_=-1,this.shouldForceTimestampOffsetAfterResync_=!1,this.pendingSegment_=null,this.xhrOptions_=null,this.pendingSegments_=[],this.audioDisabled_=!1,this.isPendingTimestampOffset_=!1,this.gopBuffer_=[],this.timeMapping_=0,this.safeAppend_=!1,this.appendInitSegment_={audio:!0,video:!0},this.playlistOfLastInitSegment_={audio:null,video:null},this.callQueue_=[],this.loadQueue_=[],this.metadataQueue_={id3:[],caption:[]},this.waitingOnRemove_=!1,this.quotaExceededErrorRetryTimeout_=null,this.activeInitSegmentId_=null,this.initSegments_={},this.cacheEncryptionKeys_=e.cacheEncryptionKeys,this.keyCache_={},this.decrypter_=e.decrypter,this.syncController_=e.syncController,this.syncPoint_={segmentIndex:0,time:0},this.transmuxer_=this.createTransmuxer_(),this.triggerSyncInfoUpdate_=()=>this.trigger("syncinfoupdate"),this.syncController_.on("syncinfoupdate",this.triggerSyncInfoUpdate_),this.mediaSource_.addEventListener("sourceopen",()=>{this.isEndOfStream_()||(this.ended_=!1)}),this.fetchAtBuffer_=!1,this.logger_=el(`SegmentLoader[${this.loaderType_}]`),Object.defineProperty(this,"state",{get(){return this.state_},set(n){n!==this.state_&&(this.logger_(`${this.state_} -> ${n}`),this.state_=n,this.trigger("statechange"))}}),this.sourceUpdater_.on("ready",()=>{this.hasEnoughInfoToAppend_()?this.processCallQueue_():ud(this)}),this.sourceUpdater_.on("codecschange",n=>{this.trigger(tr({type:"codecschange"},n))}),this.loaderType_==="main"&&this.timelineChangeController_.on("pendingtimelinechange",()=>{this.hasEnoughInfoToAppend_()?this.processCallQueue_():ud(this)}),this.loaderType_==="audio"&&this.timelineChangeController_.on("timelinechange",n=>{this.trigger(tr({type:"timelinechange"},n)),this.hasEnoughInfoToLoad_()?this.processLoadQueue_():ud(this),this.hasEnoughInfoToAppend_()?this.processCallQueue_():ud(this)})}get mediaSequenceSync_(){return this.syncController_.getMediaSequenceSync(this.loaderType_)}createTransmuxer_(){return Y1.createTransmuxer({remux:!1,alignGopsAtEnd:this.safeAppend_,keepOriginalTimestamps:!0,parse708captions:this.parse708captions_,captionServices:this.captionServices_})}resetStats_(){this.mediaBytesTransferred=0,this.mediaRequests=0,this.mediaRequestsAborted=0,this.mediaRequestsTimedout=0,this.mediaRequestsErrored=0,this.mediaTransferDuration=0,this.mediaSecondsLoaded=0,this.mediaAppends=0}dispose(){this.trigger("dispose"),this.state="DISPOSED",this.pause(),this.abort_(),this.transmuxer_&&this.transmuxer_.terminate(),this.resetStats_(),this.checkBufferTimeout_&&X.clearTimeout(this.checkBufferTimeout_),this.syncController_&&this.triggerSyncInfoUpdate_&&this.syncController_.off("syncinfoupdate",this.triggerSyncInfoUpdate_),this.off()}setAudio(e){this.audioDisabled_=!e,e?this.appendInitSegment_.audio=!0:this.sourceUpdater_.removeAudio(0,this.duration_())}abort(){if(this.state!=="WAITING"){this.pendingSegment_&&(this.pendingSegment_=null);return}this.abort_(),this.state="READY",this.paused()||this.monitorBuffer_()}abort_(){this.pendingSegment_&&this.pendingSegment_.abortRequests&&this.pendingSegment_.abortRequests(),this.pendingSegment_=null,this.callQueue_=[],this.loadQueue_=[],this.metadataQueue_.id3=[],this.metadataQueue_.caption=[],this.timelineChangeController_.clearPendingTimelineChange(this.loaderType_),this.waitingOnRemove_=!1,X.clearTimeout(this.quotaExceededErrorRetryTimeout_),this.quotaExceededErrorRetryTimeout_=null}checkForAbort_(e){return this.state==="APPENDING"&&!this.pendingSegment_?(this.state="READY",!0):!this.pendingSegment_||this.pendingSegment_.requestId!==e}error(e){return typeof e<"u"&&(this.logger_("error occurred:",e),this.error_=e),this.pendingSegment_=null,this.error_}endOfStream(){this.ended_=!0,this.transmuxer_&&Y1.reset(this.transmuxer_),this.gopBuffer_.length=0,this.pause(),this.trigger("ended")}buffered_(){const e=this.getMediaInfo_();if(!this.sourceUpdater_||!e)return vs();if(this.loaderType_==="main"){const{hasAudio:t,hasVideo:n,isMuxed:i}=e;if(n&&t&&!this.audioDisabled_&&!i)return this.sourceUpdater_.buffered();if(n)return this.sourceUpdater_.videoBuffered()}return this.sourceUpdater_.audioBuffered()}initSegmentForMap(e,t=!1){if(!e)return null;const n=yx(e);let i=this.initSegments_[n];return t&&!i&&e.bytes&&(this.initSegments_[n]=i={resolvedUri:e.resolvedUri,byterange:e.byterange,bytes:e.bytes,tracks:e.tracks,timescales:e.timescales}),i||e}segmentKey(e,t=!1){if(!e)return null;const n=d6(e);let i=this.keyCache_[n];this.cacheEncryptionKeys_&&t&&!i&&e.bytes&&(this.keyCache_[n]=i={resolvedUri:e.resolvedUri,bytes:e.bytes});const s={resolvedUri:(i||e).resolvedUri};return i&&(s.bytes=i.bytes),s}couldBeginLoading_(){return this.playlist_&&!this.paused()}load(){if(this.monitorBuffer_(),!!this.playlist_){if(this.state==="INIT"&&this.couldBeginLoading_())return this.init_();!this.couldBeginLoading_()||this.state!=="READY"&&this.state!=="INIT"||(this.state="READY")}}init_(){return this.state="READY",this.resetEverything(),this.monitorBuffer_()}playlist(e,t={}){if(!e)return;const n=this.playlist_,i=this.pendingSegment_;this.playlist_=e,this.xhrOptions_=t,this.state==="INIT"&&(e.syncInfo={mediaSequence:e.mediaSequence,time:0},this.loaderType_==="main"&&this.syncController_.setDateTimeMappingForStart(e));let s=null;if(n&&(n.id?s=n.id:n.uri&&(s=n.uri)),this.logger_(`playlist update [${s} => ${e.id||e.uri}]`),this.mediaSequenceSync_&&(this.mediaSequenceSync_.update(e,this.currentTime_()),this.logger_(`Playlist update:
currentTime: ${this.currentTime_()}
bufferedEnd: ${K1(this.buffered_())}
`,this.mediaSequenceSync_.diagnostics)),this.trigger("syncinfoupdate"),this.state==="INIT"&&this.couldBeginLoading_())return this.init_();if(!n||n.uri!==e.uri){this.mediaIndex!==null&&(!e.endList&&typeof e.partTargetDuration=="number"?this.resetLoader():this.resyncLoader()),this.currentMediaInfo_=void 0,this.trigger("playlistupdate");return}const a=e.mediaSequence-n.mediaSequence;if(this.logger_(`live window shift [${a}]`),this.mediaIndex!==null)if(this.mediaIndex-=a,this.mediaIndex<0)this.mediaIndex=null,this.partIndex=null;else{const o=this.playlist_.segments[this.mediaIndex];if(this.partIndex&&(!o.parts||!o.parts.length||!o.parts[this.partIndex])){const l=this.mediaIndex;this.logger_(`currently processing part (index ${this.partIndex}) no longer exists.`),this.resetLoader(),this.mediaIndex=l}}i&&(i.mediaIndex-=a,i.mediaIndex<0?(i.mediaIndex=null,i.partIndex=null):(i.mediaIndex>=0&&(i.segment=e.segments[i.mediaIndex]),i.partIndex>=0&&i.segment.parts&&(i.part=i.segment.parts[i.partIndex]))),this.syncController_.saveExpiredSegmentInfo(n,e)}pause(){this.checkBufferTimeout_&&(X.clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=null)}paused(){return this.checkBufferTimeout_===null}resetEverything(e){this.ended_=!1,this.activeInitSegmentId_=null,this.appendInitSegment_={audio:!0,video:!0},this.resetLoader(),this.remove(0,1/0,e),this.transmuxer_&&(this.transmuxer_.postMessage({action:"clearAllMp4Captions"}),this.transmuxer_.postMessage({action:"reset"}))}resetLoader(){this.fetchAtBuffer_=!1,this.mediaSequenceSync_&&this.mediaSequenceSync_.resetAppendedStatus(),this.resyncLoader()}resyncLoader(){this.transmuxer_&&Y1.reset(this.transmuxer_),this.mediaIndex=null,this.partIndex=null,this.syncPoint_=null,this.isPendingTimestampOffset_=!1;const e=this.currentMediaInfo_&&this.currentMediaInfo_.isFmp4;this.sourceType_==="hls"&&!e&&(this.shouldForceTimestampOffsetAfterResync_=!0),this.callQueue_=[],this.loadQueue_=[],this.metadataQueue_.id3=[],this.metadataQueue_.caption=[],this.abort(),this.transmuxer_&&this.transmuxer_.postMessage({action:"clearParsedMp4Captions"})}remove(e,t,n=()=>{},i=!1){if(t===1/0&&(t=this.duration_()),t<=e){this.logger_("skipping remove because end ${end} is <= start ${start}");return}if(!this.sourceUpdater_||!this.getMediaInfo_()){this.logger_("skipping remove because no source updater or starting media info");return}let s=1;const a=()=>{s--,s===0&&n()};(i||!this.audioDisabled_)&&(s++,this.sourceUpdater_.removeAudio(e,t,a)),(i||this.loaderType_==="main")&&(this.gopBuffer_=Xue(this.gopBuffer_,e,t,this.timeMapping_),s++,this.sourceUpdater_.removeVideo(e,t,a));for(const o in this.inbandTextTracks_)p0(e,t,this.inbandTextTracks_[o]);p0(e,t,this.segmentMetadataTrack_),a()}monitorBuffer_(){this.checkBufferTimeout_&&X.clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=X.setTimeout(this.monitorBufferTick_.bind(this),1)}monitorBufferTick_(){this.state==="READY"&&this.fillBuffer_(),this.checkBufferTimeout_&&X.clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=X.setTimeout(this.monitorBufferTick_.bind(this),Jue)}fillBuffer_(){if(this.sourceUpdater_.updating())return;const e=this.chooseNextRequest_();if(!e)return;const t={segmentInfo:xh({type:this.loaderType_,segment:e})};this.trigger({type:"segmentselected",metadata:t}),typeof e.timestampOffset=="number"&&(this.isPendingTimestampOffset_=!1,this.timelineChangeController_.pendingTimelineChange({type:this.loaderType_,from:this.currentTimeline_,to:e.timeline})),this.loadSegment_(e)}isEndOfStream_(e=this.mediaIndex,t=this.playlist_,n=this.partIndex){if(!t||!this.mediaSource_)return!1;const i=typeof e=="number"&&t.segments[e],s=e+1===t.segments.length,a=!i||!i.parts||n+1===i.parts.length;return t.endList&&this.mediaSource_.readyState==="open"&&s&&a}chooseNextRequest_(){const e=this.buffered_(),t=K1(e)||0,n=yk(e,this.currentTime_()),i=!this.hasPlayed_()&&n>=1,s=n>=this.goalBufferLength_(),a=this.playlist_.segments;if(!a.length||i||s)return null;this.syncPoint_=this.syncPoint_||this.syncController_.getSyncPoint(this.playlist_,this.duration_(),this.currentTimeline_,this.currentTime_(),this.loaderType_);const o={partIndex:null,mediaIndex:null,startOfSegment:null,playlist:this.playlist_,isSyncRequest:!this.syncPoint_};if(o.isSyncRequest)o.mediaIndex=Que(this.currentTimeline_,a,t),this.logger_(`choose next request. Can not find sync point. Fallback to media Index: ${o.mediaIndex}`);else if(this.mediaIndex!==null){const m=a[this.mediaIndex],g=typeof this.partIndex=="number"?this.partIndex:-1;o.startOfSegment=m.end?m.end:t,m.parts&&m.parts[g+1]?(o.mediaIndex=this.mediaIndex,o.partIndex=g+1):o.mediaIndex=this.mediaIndex+1}else{let m,g,y;const v=this.fetchAtBuffer_?t:this.currentTime_();if(this.mediaSequenceSync_&&this.logger_(`chooseNextRequest_ request after Quality Switch:
For TargetTime: ${v}.
CurrentTime: ${this.currentTime_()}
BufferedEnd: ${t}
Fetch At Buffer: ${this.fetchAtBuffer_}
`,this.mediaSequenceSync_.diagnostics),this.mediaSequenceSync_&&this.mediaSequenceSync_.isReliable){const x=this.getSyncInfoFromMediaSequenceSync_(v);if(!x){const w="No sync info found while using media sequence sync";return this.error({message:w,metadata:{errorType:Se.Error.StreamingFailedToSelectNextSegment,error:new Error(w)}}),this.logger_("chooseNextRequest_ - no sync info found using media sequence sync"),null}this.logger_(`chooseNextRequest_ mediaSequence syncInfo (${x.start} --> ${x.end})`),m=x.segmentIndex,g=x.partIndex,y=x.start}else{this.logger_("chooseNextRequest_ - fallback to a regular segment selection algorithm, based on a syncPoint.");const x=La.getMediaInfoForTime({exactManifestTimings:this.exactManifestTimings,playlist:this.playlist_,currentTime:v,startingPartIndex:this.syncPoint_.partIndex,startingSegmentIndex:this.syncPoint_.segmentIndex,startTime:this.syncPoint_.time});m=x.segmentIndex,g=x.partIndex,y=x.startTime}o.getMediaInfoForTime=this.fetchAtBuffer_?`bufferedEnd ${v}`:`currentTime ${v}`,o.mediaIndex=m,o.startOfSegment=y,o.partIndex=g,this.logger_(`choose next request. Playlist switched and we have a sync point. Media Index: ${o.mediaIndex} `)}const l=a[o.mediaIndex];let u=l&&typeof o.partIndex=="number"&&l.parts&&l.parts[o.partIndex];if(!l||typeof o.partIndex=="number"&&!u)return null;typeof o.partIndex!="number"&&l.parts&&(o.partIndex=0,u=l.parts[0]);const c=this.vhs_.playlists&&this.vhs_.playlists.main&&this.vhs_.playlists.main.independentSegments||this.playlist_.independentSegments;if(!n&&u&&!c&&!u.independent)if(o.partIndex===0){const m=a[o.mediaIndex-1],g=m.parts&&m.parts.length&&m.parts[m.parts.length-1];g&&g.independent&&(o.mediaIndex-=1,o.partIndex=m.parts.length-1,o.independent="previous segment")}else l.parts[o.partIndex-1].independent&&(o.partIndex-=1,o.independent="previous part");const h=this.mediaSource_&&this.mediaSource_.readyState==="ended";return o.mediaIndex>=a.length-1&&h&&!this.seeking_()?null:(this.shouldForceTimestampOffsetAfterResync_&&(this.shouldForceTimestampOffsetAfterResync_=!1,o.forceTimestampOffset=!0,this.logger_("choose next request. Force timestamp offset after loader resync")),this.generateSegmentInfo_(o))}getSyncInfoFromMediaSequenceSync_(e){if(!this.mediaSequenceSync_)return null;const t=Math.max(e,this.mediaSequenceSync_.start);e!==t&&this.logger_(`getSyncInfoFromMediaSequenceSync_. Pulled target time from ${e} to ${t}`);const n=this.mediaSequenceSync_.getSyncInfoForTime(t);if(!n)return null;if(!n.isAppended)return n;const i=this.mediaSequenceSync_.getSyncInfoForTime(n.end);return i?(i.isAppended&&this.logger_("getSyncInfoFromMediaSequenceSync_: We encounter unexpected scenario where next media sequence sync info is also appended!"),i):null}generateSegmentInfo_(e){const{independent:t,playlist:n,mediaIndex:i,startOfSegment:s,isSyncRequest:a,partIndex:o,forceTimestampOffset:l,getMediaInfoForTime:u}=e,c=n.segments[i],h=typeof o=="number"&&c.parts[o],m={requestId:"segment-loader-"+Math.random(),uri:h&&h.resolvedUri||c.resolvedUri,mediaIndex:i,partIndex:h?o:null,isSyncRequest:a,startOfSegment:s,playlist:n,bytes:null,encryptedBytes:null,timestampOffset:null,timeline:c.timeline,duration:h&&h.duration||c.duration,segment:c,part:h,byteLength:0,transmuxer:this.transmuxer_,getMediaInfoForTime:u,independent:t},g=typeof l<"u"?l:this.isPendingTimestampOffset_;m.timestampOffset=this.timestampOffsetForSegment_({segmentTimeline:c.timeline,currentTimeline:this.currentTimeline_,startOfSegment:s,buffered:this.buffered_(),overrideCheck:g});const y=K1(this.sourceUpdater_.audioBuffered());return typeof y=="number"&&(m.audioAppendStart=y-this.sourceUpdater_.audioTimestampOffset()),this.sourceUpdater_.videoBuffered().length&&(m.gopsToAlignWith=Gue(this.gopBuffer_,this.currentTime_()-this.sourceUpdater_.videoTimestampOffset(),this.timeMapping_)),m}timestampOffsetForSegment_(e){return tce(e)}earlyAbortWhenNeeded_(e){if(this.vhs_.tech_.paused()||!this.xhrOptions_.timeout||!this.playlist_.attributes.BANDWIDTH||Date.now()-(e.firstBytesReceivedAt||Date.now())<1e3)return;const t=this.currentTime_(),n=e.bandwidth,i=this.pendingSegment_.duration,s=La.estimateSegmentRequestTime(i,n,this.playlist_,e.bytesReceived),a=Cle(this.buffered_(),t,this.vhs_.tech_.playbackRate())-1;if(s<=a)return;const o=Fue({main:this.vhs_.playlists.main,currentTime:t,bandwidth:n,duration:this.duration_(),segmentDuration:i,timeUntilRebuffer:a,currentTimeline:this.currentTimeline_,syncController:this.syncController_});if(!o)return;const u=s-a-o.rebufferingImpact;let c=.5;a<=uu&&(c=1),!(!o.playlist||o.playlist.uri===this.playlist_.uri||u<c)&&(this.bandwidth=o.playlist.attributes.BANDWIDTH*Xi.BANDWIDTH_VARIANCE+1,this.trigger("earlyabort"))}handleAbort_(e){this.logger_(`Aborting ${If(e)}`),this.mediaRequestsAborted+=1}handleProgress_(e,t){this.earlyAbortWhenNeeded_(t.stats),!this.checkForAbort_(t.requestId)&&this.trigger("progress")}handleTrackInfo_(e,t){const{hasAudio:n,hasVideo:i}=t,s={segmentInfo:xh({type:this.loaderType_,segment:e}),trackInfo:{hasAudio:n,hasVideo:i}};this.trigger({type:"segmenttransmuxingtrackinfoavailable",metadata:s}),this.earlyAbortWhenNeeded_(e.stats),!this.checkForAbort_(e.requestId)&&(this.checkForIllegalMediaSwitch(t)||(t=t||{},Yue(this.currentMediaInfo_,t)||(this.appendInitSegment_={audio:!0,video:!0},this.startingMediaInfo_=t,this.currentMediaInfo_=t,this.logger_("trackinfo update",t),this.trigger("trackinfo")),!this.checkForAbort_(e.requestId)&&(this.pendingSegment_.trackInfo=t,this.hasEnoughInfoToAppend_()?this.processCallQueue_():ud(this))))}handleTimingInfo_(e,t,n,i){if(this.earlyAbortWhenNeeded_(e.stats),this.checkForAbort_(e.requestId))return;const s=this.pendingSegment_,a=gM(t);s[a]=s[a]||{},s[a][n]=i,this.logger_(`timinginfo: ${t} - ${n} - ${i}`),this.hasEnoughInfoToAppend_()?this.processCallQueue_():ud(this)}handleCaptions_(e,t){if(this.earlyAbortWhenNeeded_(e.stats),this.checkForAbort_(e.requestId))return;if(t.length===0){this.logger_("SegmentLoader received no captions from a caption event");return}if(!this.pendingSegment_.hasAppendedData_){this.metadataQueue_.caption.push(this.handleCaptions_.bind(this,e,t));return}const i=this.sourceUpdater_.videoTimestampOffset()===null?this.sourceUpdater_.audioTimestampOffset():this.sourceUpdater_.videoTimestampOffset(),s={};t.forEach(a=>{s[a.stream]=s[a.stream]||{startTime:1/0,captions:[],endTime:0};const o=s[a.stream];o.startTime=Math.min(o.startTime,a.startTime+i),o.endTime=Math.max(o.endTime,a.endTime+i),o.captions.push(a)}),Object.keys(s).forEach(a=>{const{startTime:o,endTime:l,captions:u}=s[a],c=this.inbandTextTracks_;this.logger_(`adding cues from ${o} -> ${l} for ${a}`),Uue(c,this.vhs_.tech_,a),p0(o,l,c[a]),$ue({captionArray:u,inbandTextTracks:c,timestampOffset:i})}),this.transmuxer_&&this.transmuxer_.postMessage({action:"clearParsedMp4Captions"})}handleId3_(e,t,n){if(this.earlyAbortWhenNeeded_(e.stats),this.checkForAbort_(e.requestId))return;if(!this.pendingSegment_.hasAppendedData_){this.metadataQueue_.id3.push(this.handleId3_.bind(this,e,t,n));return}this.addMetadataToTextTrack(n,t,this.duration_())}processMetadataQueue_(){this.metadataQueue_.id3.forEach(e=>e()),this.metadataQueue_.caption.forEach(e=>e()),this.metadataQueue_.id3=[],this.metadataQueue_.caption=[]}processCallQueue_(){const e=this.callQueue_;this.callQueue_=[],e.forEach(t=>t())}processLoadQueue_(){const e=this.loadQueue_;this.loadQueue_=[],e.forEach(t=>t())}hasEnoughInfoToLoad_(){if(this.loaderType_!=="audio")return!0;const e=this.pendingSegment_;return e?this.getCurrentMediaInfo_()?!Ww({timelineChangeController:this.timelineChangeController_,currentTimeline:this.currentTimeline_,segmentTimeline:e.timeline,loaderType:this.loaderType_,audioDisabled:this.audioDisabled_}):!0:!1}getCurrentMediaInfo_(e=this.pendingSegment_){return e&&e.trackInfo||this.currentMediaInfo_}getMediaInfo_(e=this.pendingSegment_){return this.getCurrentMediaInfo_(e)||this.startingMediaInfo_}getPendingSegmentPlaylist(){return this.pendingSegment_?this.pendingSegment_.playlist:null}hasEnoughInfoToAppend_(){if(!this.sourceUpdater_.ready()||this.waitingOnRemove_||this.quotaExceededErrorRetryTimeout_)return!1;const e=this.pendingSegment_,t=this.getCurrentMediaInfo_();if(!e||!t)return!1;const{hasAudio:n,hasVideo:i,isMuxed:s}=t;return!(i&&!e.videoTimingInfo||n&&!this.audioDisabled_&&!s&&!e.audioTimingInfo||Ww({timelineChangeController:this.timelineChangeController_,currentTimeline:this.currentTimeline_,segmentTimeline:e.timeline,loaderType:this.loaderType_,audioDisabled:this.audioDisabled_}))}handleData_(e,t){if(this.earlyAbortWhenNeeded_(e.stats),this.checkForAbort_(e.requestId))return;if(this.callQueue_.length||!this.hasEnoughInfoToAppend_()){ud(this),this.callQueue_.push(this.handleData_.bind(this,e,t));return}const n=this.pendingSegment_;if(this.setTimeMapping_(n.timeline),this.updateMediaSecondsLoaded_(n.part||n.segment),this.mediaSource_.readyState!=="closed"){if(e.map&&(e.map=this.initSegmentForMap(e.map,!0),n.segment.map=e.map),e.key&&this.segmentKey(e.key,!0),n.isFmp4=e.isFmp4,n.timingInfo=n.timingInfo||{},n.isFmp4)this.trigger("fmp4"),n.timingInfo.start=n[gM(t.type)].start;else{const i=this.getCurrentMediaInfo_(),s=this.loaderType_==="main"&&i&&i.hasVideo;let a;s&&(a=n.videoTimingInfo.start),n.timingInfo.start=this.trueSegmentStart_({currentStart:n.timingInfo.start,playlist:n.playlist,mediaIndex:n.mediaIndex,currentVideoTimestampOffset:this.sourceUpdater_.videoTimestampOffset(),useVideoTimingInfo:s,firstVideoFrameTimeForData:a,videoTimingInfo:n.videoTimingInfo,audioTimingInfo:n.audioTimingInfo})}if(this.updateAppendInitSegmentStatus(n,t.type),this.updateSourceBufferTimestampOffset_(n),n.isSyncRequest){this.updateTimingInfoEnd_(n),this.syncController_.saveSegmentTimingInfo({segmentInfo:n,shouldSaveTimelineMapping:this.loaderType_==="main"});const i=this.chooseNextRequest_();if(i.mediaIndex!==n.mediaIndex||i.partIndex!==n.partIndex){this.logger_("sync segment was incorrect, not appending");return}this.logger_("sync segment was correct, appending")}n.hasAppendedData_=!0,this.processMetadataQueue_(),this.appendData_(n,t)}}updateAppendInitSegmentStatus(e,t){this.loaderType_==="main"&&typeof e.timestampOffset=="number"&&!e.changedTimestampOffset&&(this.appendInitSegment_={audio:!0,video:!0}),this.playlistOfLastInitSegment_[t]!==e.playlist&&(this.appendInitSegment_[t]=!0)}getInitSegmentAndUpdateState_({type:e,initSegment:t,map:n,playlist:i}){if(n){const s=yx(n);if(this.activeInitSegmentId_===s)return null;t=this.initSegmentForMap(n,!0).bytes,this.activeInitSegmentId_=s}return t&&this.appendInitSegment_[e]?(this.playlistOfLastInitSegment_[e]=i,this.appendInitSegment_[e]=!1,this.activeInitSegmentId_=null,t):null}handleQuotaExceededError_({segmentInfo:e,type:t,bytes:n},i){const s=this.sourceUpdater_.audioBuffered(),a=this.sourceUpdater_.videoBuffered();s.length>1&&this.logger_("On QUOTA_EXCEEDED_ERR, found gaps in the audio buffer: "+Eh(s).join(", ")),a.length>1&&this.logger_("On QUOTA_EXCEEDED_ERR, found gaps in the video buffer: "+Eh(a).join(", "));const o=s.length?s.start(0):0,l=s.length?s.end(s.length-1):0,u=a.length?a.start(0):0,c=a.length?a.end(a.length-1):0;if(l-o<=t0&&c-u<=t0){this.logger_(`On QUOTA_EXCEEDED_ERR, single segment too large to append to buffer, triggering an error. Appended byte length: ${n.byteLength}, audio buffer: ${Eh(s).join(", ")}, video buffer: ${Eh(a).join(", ")}, `),this.error({message:"Quota exceeded error with append of a single segment of content",excludeUntil:1/0}),this.trigger("error");return}this.waitingOnRemove_=!0,this.callQueue_.push(this.appendToSourceBuffer_.bind(this,{segmentInfo:e,type:t,bytes:n}));const m=this.currentTime_()-t0;this.logger_(`On QUOTA_EXCEEDED_ERR, removing audio/video from 0 to ${m}`),this.remove(0,m,()=>{this.logger_(`On QUOTA_EXCEEDED_ERR, retrying append in ${t0}s`),this.waitingOnRemove_=!1,this.quotaExceededErrorRetryTimeout_=X.setTimeout(()=>{this.logger_("On QUOTA_EXCEEDED_ERR, re-processing call queue"),this.quotaExceededErrorRetryTimeout_=null,this.processCallQueue_()},t0*1e3)},!0)}handleAppendError_({segmentInfo:e,type:t,bytes:n},i){if(i){if(i.code===s6){this.handleQuotaExceededError_({segmentInfo:e,type:t,bytes:n});return}this.logger_("Received non QUOTA_EXCEEDED_ERR on append",i),this.error({message:`${t} append of ${n.length}b failed for segment #${e.mediaIndex} in playlist ${e.playlist.id}`,metadata:{errorType:Se.Error.StreamingFailedToAppendSegment}}),this.trigger("appenderror")}}appendToSourceBuffer_({segmentInfo:e,type:t,initSegment:n,data:i,bytes:s}){if(!s){const o=[i];let l=i.byteLength;n&&(o.unshift(n),l+=n.byteLength),s=Nue({bytes:l,segments:o})}const a={segmentInfo:xh({type:this.loaderType_,segment:e})};this.trigger({type:"segmentappendstart",metadata:a}),this.sourceUpdater_.appendBuffer({segmentInfo:e,type:t,bytes:s},this.handleAppendError_.bind(this,{segmentInfo:e,type:t,bytes:s}))}handleSegmentTimingInfo_(e,t,n){if(!this.pendingSegment_||t!==this.pendingSegment_.requestId)return;const i=this.pendingSegment_.segment,s=`${e}TimingInfo`;i[s]||(i[s]={}),i[s].transmuxerPrependedSeconds=n.prependedContentDuration||0,i[s].transmuxedPresentationStart=n.start.presentation,i[s].transmuxedDecodeStart=n.start.decode,i[s].transmuxedPresentationEnd=n.end.presentation,i[s].transmuxedDecodeEnd=n.end.decode,i[s].baseMediaDecodeTime=n.baseMediaDecodeTime}appendData_(e,t){const{type:n,data:i}=t;if(!i||!i.byteLength||n==="audio"&&this.audioDisabled_)return;const s=this.getInitSegmentAndUpdateState_({type:n,initSegment:t.initSegment,playlist:e.playlist,map:e.isFmp4?e.segment.map:null});this.appendToSourceBuffer_({segmentInfo:e,type:n,initSegment:s,data:i})}loadSegment_(e){if(this.state="WAITING",this.pendingSegment_=e,this.trimBackBuffer_(e),typeof e.timestampOffset=="number"&&this.transmuxer_&&this.transmuxer_.postMessage({action:"clearAllMp4Captions"}),!this.hasEnoughInfoToLoad_()){ud(this),this.loadQueue_.push(()=>{const t=tr({},e,{forceTimestampOffset:!0});tr(e,this.generateSegmentInfo_(t)),this.isPendingTimestampOffset_=!1,this.updateTransmuxerAndRequestSegment_(e)});return}this.updateTransmuxerAndRequestSegment_(e)}updateTransmuxerAndRequestSegment_(e){this.shouldUpdateTransmuxerTimestampOffset_(e.timestampOffset)&&(this.gopBuffer_.length=0,e.gopsToAlignWith=[],this.timeMapping_=0,this.transmuxer_.postMessage({action:"reset"}),this.transmuxer_.postMessage({action:"setTimestampOffset",timestampOffset:e.timestampOffset}));const t=this.createSimplifiedSegmentObj_(e),n=this.isEndOfStream_(e.mediaIndex,e.playlist,e.partIndex),i=this.mediaIndex!==null,s=e.timeline!==this.currentTimeline_&&e.timeline>0,a=n||i&&s;this.logger_(`Requesting
${A6(e.uri)}
${If(e)}`),t.map&&!t.map.bytes&&(this.logger_("going to request init segment."),this.appendInitSegment_={video:!0,audio:!0}),e.abortRequests=Iue({xhr:this.vhs_.xhr,xhrOptions:this.xhrOptions_,decryptionWorker:this.decrypter_,segment:t,abortFn:this.handleAbort_.bind(this,e),progressFn:this.handleProgress_.bind(this),trackInfoFn:this.handleTrackInfo_.bind(this),timingInfoFn:this.handleTimingInfo_.bind(this),videoSegmentTimingInfoFn:this.handleSegmentTimingInfo_.bind(this,"video",e.requestId),audioSegmentTimingInfoFn:this.handleSegmentTimingInfo_.bind(this,"audio",e.requestId),captionsFn:this.handleCaptions_.bind(this),isEndOfTimeline:a,endedTimelineFn:()=>{this.logger_("received endedtimeline callback")},id3Fn:this.handleId3_.bind(this),dataFn:this.handleData_.bind(this),doneFn:this.segmentRequestFinished_.bind(this),onTransmuxerLog:({message:o,level:l,stream:u})=>{this.logger_(`${If(e)} logged from transmuxer stream ${u} as a ${l}: ${o}`)},triggerSegmentEventFn:({type:o,segment:l,keyInfo:u,trackInfo:c,timingInfo:h})=>{const g={segmentInfo:xh({segment:l})};u&&(g.keyInfo=u),c&&(g.trackInfo=c),h&&(g.timingInfo=h),this.trigger({type:o,metadata:g})}})}trimBackBuffer_(e){const t=ece(this.seekable_(),this.currentTime_(),this.playlist_.targetDuration||10);t>0&&this.remove(0,t)}createSimplifiedSegmentObj_(e){const t=e.segment,n=e.part,i=e.segment.key||e.segment.map&&e.segment.map.key,s=e.segment.map&&!e.segment.map.bytes,a={resolvedUri:n?n.resolvedUri:t.resolvedUri,byterange:n?n.byterange:t.byterange,requestId:e.requestId,transmuxer:e.transmuxer,audioAppendStart:e.audioAppendStart,gopsToAlignWith:e.gopsToAlignWith,part:e.part,type:this.loaderType_,start:e.startOfSegment,duration:e.duration,isEncrypted:i,isMediaInitialization:s},o=e.playlist.segments[e.mediaIndex-1];if(o&&o.timeline===t.timeline&&(o.videoTimingInfo?a.baseStartTime=o.videoTimingInfo.transmuxedDecodeEnd:o.audioTimingInfo&&(a.baseStartTime=o.audioTimingInfo.transmuxedDecodeEnd)),t.key){const l=t.key.iv||new Uint32Array([0,0,0,e.mediaIndex+e.playlist.mediaSequence]);a.key=this.segmentKey(t.key),a.key.iv=l}return t.map&&(a.map=this.initSegmentForMap(t.map)),a}saveTransferStats_(e){this.mediaRequests+=1,e&&(this.mediaBytesTransferred+=e.bytesReceived,this.mediaTransferDuration+=e.roundTripTime)}saveBandwidthRelatedStats_(e,t){if(this.pendingSegment_.byteLength=t.bytesReceived,e<iy){this.logger_(`Ignoring segment's bandwidth because its duration of ${e} is less than the min to record ${iy}`);return}const n={bandwidthInfo:{from:this.bandwidth,to:t.bandwidth}};this.trigger({type:"bandwidthupdated",metadata:n}),this.bandwidth=t.bandwidth,this.roundTrip=t.roundTripTime}handleTimeout_(){this.mediaRequestsTimedout+=1,this.bandwidth=1,this.roundTrip=NaN,this.trigger("bandwidthupdate"),this.trigger("timeout")}segmentRequestFinished_(e,t,n){if(this.callQueue_.length){this.callQueue_.push(this.segmentRequestFinished_.bind(this,e,t,n));return}if(this.saveTransferStats_(t.stats),!this.pendingSegment_||t.requestId!==this.pendingSegment_.requestId)return;if(e){if(this.pendingSegment_=null,this.state="READY",e.code===du.ABORTED)return;if(this.pause(),e.code===du.TIMEOUT){this.handleTimeout_();return}this.mediaRequestsErrored+=1,this.error(e),this.trigger("error");return}const i=this.pendingSegment_;this.saveBandwidthRelatedStats_(i.duration,t.stats),i.endOfAllRequests=t.endOfAllRequests,n.gopInfo&&(this.gopBuffer_=Kue(this.gopBuffer_,n.gopInfo,this.safeAppend_)),this.state="APPENDING",this.trigger("appending"),this.waitForAppendsToComplete_(i)}setTimeMapping_(e){const t=this.syncController_.mappingForTimeline(e);t!==null&&(this.timeMapping_=t)}updateMediaSecondsLoaded_(e){typeof e.start=="number"&&typeof e.end=="number"?this.mediaSecondsLoaded+=e.end-e.start:this.mediaSecondsLoaded+=e.duration}shouldUpdateTransmuxerTimestampOffset_(e){return e===null?!1:this.loaderType_==="main"&&e!==this.sourceUpdater_.videoTimestampOffset()||!this.audioDisabled_&&e!==this.sourceUpdater_.audioTimestampOffset()}trueSegmentStart_({currentStart:e,playlist:t,mediaIndex:n,firstVideoFrameTimeForData:i,currentVideoTimestampOffset:s,useVideoTimingInfo:a,videoTimingInfo:o,audioTimingInfo:l}){if(typeof e<"u")return e;if(!a)return l.start;const u=t.segments[n-1];return n===0||!u||typeof u.start>"u"||u.end!==i+s?i:o.start}waitForAppendsToComplete_(e){const t=this.getCurrentMediaInfo_(e);if(!t){this.error({message:"No starting media returned, likely due to an unsupported media format.",playlistExclusionDuration:1/0}),this.trigger("error");return}const{hasAudio:n,hasVideo:i,isMuxed:s}=t,a=this.loaderType_==="main"&&i,o=!this.audioDisabled_&&n&&!s;if(e.waitingOnAppends=0,!e.hasAppendedData_){!e.timingInfo&&typeof e.timestampOffset=="number"&&(this.isPendingTimestampOffset_=!0),e.timingInfo={start:0},e.waitingOnAppends++,this.isPendingTimestampOffset_||(this.updateSourceBufferTimestampOffset_(e),this.processMetadataQueue_()),this.checkAppendsDone_(e);return}a&&e.waitingOnAppends++,o&&e.waitingOnAppends++,a&&this.sourceUpdater_.videoQueueCallback(this.checkAppendsDone_.bind(this,e)),o&&this.sourceUpdater_.audioQueueCallback(this.checkAppendsDone_.bind(this,e))}checkAppendsDone_(e){this.checkForAbort_(e.requestId)||(e.waitingOnAppends--,e.waitingOnAppends===0&&this.handleAppendsDone_())}checkForIllegalMediaSwitch(e){const t=Zue(this.loaderType_,this.getCurrentMediaInfo_(),e);return t?(this.error({message:t,playlistExclusionDuration:1/0}),this.trigger("error"),!0):!1}updateSourceBufferTimestampOffset_(e){if(e.timestampOffset===null||typeof e.timingInfo.start!="number"||e.changedTimestampOffset||this.loaderType_!=="main")return;let t=!1;e.timestampOffset-=this.getSegmentStartTimeForTimestampOffsetCalculation_({videoTimingInfo:e.segment.videoTimingInfo,audioTimingInfo:e.segment.audioTimingInfo,timingInfo:e.timingInfo}),e.changedTimestampOffset=!0,e.timestampOffset!==this.sourceUpdater_.videoTimestampOffset()&&(this.sourceUpdater_.videoTimestampOffset(e.timestampOffset),t=!0),e.timestampOffset!==this.sourceUpdater_.audioTimestampOffset()&&(this.sourceUpdater_.audioTimestampOffset(e.timestampOffset),t=!0),t&&this.trigger("timestampoffset")}getSegmentStartTimeForTimestampOffsetCalculation_({videoTimingInfo:e,audioTimingInfo:t,timingInfo:n}){return this.useDtsForTimestampOffset_?e&&typeof e.transmuxedDecodeStart=="number"?e.transmuxedDecodeStart:t&&typeof t.transmuxedDecodeStart=="number"?t.transmuxedDecodeStart:n.start:n.start}updateTimingInfoEnd_(e){e.timingInfo=e.timingInfo||{};const t=this.getMediaInfo_(),i=this.loaderType_==="main"&&t&&t.hasVideo&&e.videoTimingInfo?e.videoTimingInfo:e.audioTimingInfo;i&&(e.timingInfo.end=typeof i.end=="number"?i.end:i.start+e.duration)}handleAppendsDone_(){if(this.pendingSegment_){const l={segmentInfo:xh({type:this.loaderType_,segment:this.pendingSegment_})};this.trigger({type:"appendsdone",metadata:l})}if(!this.pendingSegment_){this.state="READY",this.paused()||this.monitorBuffer_();return}const e=this.pendingSegment_;e.part&&e.part.syncInfo?e.part.syncInfo.markAppended():e.segment.syncInfo&&e.segment.syncInfo.markAppended(),this.updateTimingInfoEnd_(e),this.shouldSaveSegmentTimingInfo_&&this.syncController_.saveSegmentTimingInfo({segmentInfo:e,shouldSaveTimelineMapping:this.loaderType_==="main"});const t=ace(e,this.sourceType_);if(t&&(t.severity==="warn"?Se.log.warn(t.message):this.logger_(t.message)),this.recordThroughput_(e),this.pendingSegment_=null,this.state="READY",e.isSyncRequest&&(this.trigger("syncinfoupdate"),!e.hasAppendedData_)){this.logger_(`Throwing away un-appended sync request ${If(e)}`);return}this.logger_(`Appended ${If(e)}`),this.addSegmentMetadataCue_(e),this.fetchAtBuffer_=!0,this.currentTimeline_!==e.timeline&&(this.timelineChangeController_.lastTimelineChange({type:this.loaderType_,from:this.currentTimeline_,to:e.timeline}),this.loaderType_==="main"&&!this.audioDisabled_&&this.timelineChangeController_.lastTimelineChange({type:"audio",from:this.currentTimeline_,to:e.timeline})),this.currentTimeline_=e.timeline,this.trigger("syncinfoupdate");const n=e.segment,i=e.part,s=n.end&&this.currentTime_()-n.end>e.playlist.targetDuration*3,a=i&&i.end&&this.currentTime_()-i.end>e.playlist.partTargetDuration*3;if(s||a){this.logger_(`bad ${s?"segment":"part"} ${If(e)}`),this.resetEverything();return}this.mediaIndex!==null&&this.trigger("bandwidthupdate"),this.trigger("progress"),this.mediaIndex=e.mediaIndex,this.partIndex=e.partIndex,this.isEndOfStream_(e.mediaIndex,e.playlist,e.partIndex)&&this.endOfStream(),this.trigger("appended"),e.hasAppendedData_&&this.mediaAppends++,this.paused()||this.monitorBuffer_()}recordThroughput_(e){if(e.duration<iy){this.logger_(`Ignoring segment's throughput because its duration of ${e.duration} is less than the min to record ${iy}`);return}const t=this.throughput.rate,n=Date.now()-e.endOfAllRequests+1,i=Math.floor(e.byteLength/n*8*1e3);this.throughput.rate+=(i-t)/++this.throughput.count}addSegmentMetadataCue_(e){if(!this.segmentMetadataTrack_)return;const t=e.segment,n=t.start,i=t.end;if(!mM(n)||!mM(i))return;p0(n,i,this.segmentMetadataTrack_);const s=X.WebKitDataCue||X.VTTCue,a={custom:t.custom,dateTimeObject:t.dateTimeObject,dateTimeString:t.dateTimeString,programDateTime:t.programDateTime,bandwidth:e.playlist.attributes.BANDWIDTH,resolution:e.playlist.attributes.RESOLUTION,codecs:e.playlist.attributes.CODECS,byteLength:e.byteLength,uri:e.uri,timeline:e.timeline,playlist:e.playlist.id,start:n,end:i},o=JSON.stringify(a),l=new s(n,i,o);l.value=a,this.segmentMetadataTrack_.addCue(l)}};function fc(){}const D6=function(r){return typeof r!="string"?r:r.replace(/./,e=>e.toUpperCase())},oce=["video","audio"],Gw=(r,e)=>{const t=e[`${r}Buffer`];return t&&t.updating||e.queuePending[r]},lce=(r,e)=>{for(let t=0;t<e.length;t++){const n=e[t];if(n.type==="mediaSource")return null;if(n.type===r)return t}return null},fp=(r,e)=>{if(e.queue.length===0)return;let t=0,n=e.queue[t];if(n.type==="mediaSource"){!e.updating()&&e.mediaSource.readyState!=="closed"&&(e.queue.shift(),n.action(e),n.doneFn&&n.doneFn(),fp("audio",e),fp("video",e));return}if(r!=="mediaSource"&&!(!e.ready()||e.mediaSource.readyState==="closed"||Gw(r,e))){if(n.type!==r){if(t=lce(r,e.queue),t===null)return;n=e.queue[t]}if(e.queue.splice(t,1),e.queuePending[r]=n,n.action(r,e),!n.doneFn){e.queuePending[r]=null,fp(r,e);return}}},I6=(r,e)=>{const t=e[`${r}Buffer`],n=D6(r);t&&(t.removeEventListener("updateend",e[`on${n}UpdateEnd_`]),t.removeEventListener("error",e[`on${n}Error_`]),e.codecs[r]=null,e[`${r}Buffer`]=null)},iu=(r,e)=>r&&e&&Array.prototype.indexOf.call(r.sourceBuffers,e)!==-1,eo={appendBuffer:(r,e,t)=>(n,i)=>{const s=i[`${n}Buffer`];if(iu(i.mediaSource,s)){i.logger_(`Appending segment ${e.mediaIndex}'s ${r.length} bytes to ${n}Buffer`);try{s.appendBuffer(r)}catch(a){i.logger_(`Error with code ${a.code} `+(a.code===s6?"(QUOTA_EXCEEDED_ERR) ":"")+`when appending segment ${e.mediaIndex} to ${n}Buffer`),i.queuePending[n]=null,t(a)}}},remove:(r,e)=>(t,n)=>{const i=n[`${t}Buffer`];if(iu(n.mediaSource,i)){n.logger_(`Removing ${r} to ${e} from ${t}Buffer`);try{i.remove(r,e)}catch{n.logger_(`Remove ${r} to ${e} from ${t}Buffer failed`)}}},timestampOffset:r=>(e,t)=>{const n=t[`${e}Buffer`];iu(t.mediaSource,n)&&(t.logger_(`Setting ${e}timestampOffset to ${r}`),n.timestampOffset=r)},callback:r=>(e,t)=>{r()},endOfStream:r=>e=>{if(e.mediaSource.readyState==="open"){e.logger_(`Calling mediaSource endOfStream(${r||""})`);try{e.mediaSource.endOfStream(r)}catch(t){Se.log.warn("Failed to call media source endOfStream",t)}}},duration:r=>e=>{e.logger_(`Setting mediaSource duration to ${r}`);try{e.mediaSource.duration=r}catch(t){Se.log.warn("Failed to set media source duration",t)}},abort:()=>(r,e)=>{if(e.mediaSource.readyState!=="open")return;const t=e[`${r}Buffer`];if(iu(e.mediaSource,t)){e.logger_(`calling abort on ${r}Buffer`);try{t.abort()}catch(n){Se.log.warn(`Failed to abort on ${r}Buffer`,n)}}},addSourceBuffer:(r,e)=>t=>{const n=D6(r),i=Eu(e);t.logger_(`Adding ${r}Buffer with codec ${e} to mediaSource`);const s=t.mediaSource.addSourceBuffer(i);s.addEventListener("updateend",t[`on${n}UpdateEnd_`]),s.addEventListener("error",t[`on${n}Error_`]),t.codecs[r]=e,t[`${r}Buffer`]=s},removeSourceBuffer:r=>e=>{const t=e[`${r}Buffer`];if(I6(r,e),!!iu(e.mediaSource,t)){e.logger_(`Removing ${r}Buffer with codec ${e.codecs[r]} from mediaSource`);try{e.mediaSource.removeSourceBuffer(t)}catch(n){Se.log.warn(`Failed to removeSourceBuffer ${r}Buffer`,n)}}},changeType:r=>(e,t)=>{const n=t[`${e}Buffer`],i=Eu(r);if(!iu(t.mediaSource,n))return;const s=r.substring(0,r.indexOf(".")),a=t.codecs[e];if(a.substring(0,a.indexOf("."))===s)return;const l={codecsChangeInfo:{from:a,to:r}};t.trigger({type:"codecschange",metadata:l}),t.logger_(`changing ${e}Buffer codec from ${a} to ${r}`);try{n.changeType(i),t.codecs[e]=r}catch(u){l.errorType=Se.Error.StreamingCodecsChangeError,l.error=u,u.metadata=l,t.error_=u,t.trigger("error"),Se.log.warn(`Failed to changeType on ${e}Buffer`,u)}}},to=({type:r,sourceUpdater:e,action:t,doneFn:n,name:i})=>{e.queue.push({type:r,action:t,doneFn:n,name:i}),fp(r,e)},yM=(r,e)=>t=>{const n=e[`${r}Buffered`](),i=ble(n);if(e.logger_(`received "updateend" event for ${r} Source Buffer: `,i),e.queuePending[r]){const s=e.queuePending[r].doneFn;e.queuePending[r]=null,s&&s(e[`${r}Error_`])}fp(r,e)};let P6=class extends Se.EventTarget{constructor(e){super(),this.mediaSource=e,this.sourceopenListener_=()=>fp("mediaSource",this),this.mediaSource.addEventListener("sourceopen",this.sourceopenListener_),this.logger_=el("SourceUpdater"),this.audioTimestampOffset_=0,this.videoTimestampOffset_=0,this.queue=[],this.queuePending={audio:null,video:null},this.delayedAudioAppendQueue_=[],this.videoAppendQueued_=!1,this.codecs={},this.onVideoUpdateEnd_=yM("video",this),this.onAudioUpdateEnd_=yM("audio",this),this.onVideoError_=t=>{this.videoError_=t},this.onAudioError_=t=>{this.audioError_=t},this.createdSourceBuffers_=!1,this.initializedEme_=!1,this.triggeredReady_=!1}initializedEme(){this.initializedEme_=!0,this.triggerReady()}hasCreatedSourceBuffers(){return this.createdSourceBuffers_}hasInitializedAnyEme(){return this.initializedEme_}ready(){return this.hasCreatedSourceBuffers()&&this.hasInitializedAnyEme()}createSourceBuffers(e){this.hasCreatedSourceBuffers()||(this.addOrChangeSourceBuffers(e),this.createdSourceBuffers_=!0,this.trigger("createdsourcebuffers"),this.triggerReady())}triggerReady(){this.ready()&&!this.triggeredReady_&&(this.triggeredReady_=!0,this.trigger("ready"))}addSourceBuffer(e,t){to({type:"mediaSource",sourceUpdater:this,action:eo.addSourceBuffer(e,t),name:"addSourceBuffer"})}abort(e){to({type:e,sourceUpdater:this,action:eo.abort(e),name:"abort"})}removeSourceBuffer(e){if(!this.canRemoveSourceBuffer()){Se.log.error("removeSourceBuffer is not supported!");return}to({type:"mediaSource",sourceUpdater:this,action:eo.removeSourceBuffer(e),name:"removeSourceBuffer"})}canRemoveSourceBuffer(){return!Se.browser.IS_FIREFOX&&X.MediaSource&&X.MediaSource.prototype&&typeof X.MediaSource.prototype.removeSourceBuffer=="function"}static canChangeType(){return X.SourceBuffer&&X.SourceBuffer.prototype&&typeof X.SourceBuffer.prototype.changeType=="function"}canChangeType(){return this.constructor.canChangeType()}changeType(e,t){if(!this.canChangeType()){Se.log.error("changeType is not supported!");return}to({type:e,sourceUpdater:this,action:eo.changeType(t),name:"changeType"})}addOrChangeSourceBuffers(e){if(!e||typeof e!="object"||Object.keys(e).length===0)throw new Error("Cannot addOrChangeSourceBuffers to undefined codecs");Object.keys(e).forEach(t=>{const n=e[t];if(!this.hasCreatedSourceBuffers())return this.addSourceBuffer(t,n);this.canChangeType()&&this.changeType(t,n)})}appendBuffer(e,t){const{segmentInfo:n,type:i,bytes:s}=e;if(this.processedAppend_=!0,i==="audio"&&this.videoBuffer&&!this.videoAppendQueued_){this.delayedAudioAppendQueue_.push([e,t]),this.logger_(`delayed audio append of ${s.length} until video append`);return}const a=t;if(to({type:i,sourceUpdater:this,action:eo.appendBuffer(s,n||{mediaIndex:-1},a),doneFn:t,name:"appendBuffer"}),i==="video"){if(this.videoAppendQueued_=!0,!this.delayedAudioAppendQueue_.length)return;const o=this.delayedAudioAppendQueue_.slice();this.logger_(`queuing delayed audio ${o.length} appendBuffers`),this.delayedAudioAppendQueue_.length=0,o.forEach(l=>{this.appendBuffer.apply(this,l)})}}audioBuffered(){return iu(this.mediaSource,this.audioBuffer)&&this.audioBuffer.buffered?this.audioBuffer.buffered:vs()}videoBuffered(){return iu(this.mediaSource,this.videoBuffer)&&this.videoBuffer.buffered?this.videoBuffer.buffered:vs()}buffered(){const e=iu(this.mediaSource,this.videoBuffer)?this.videoBuffer:null,t=iu(this.mediaSource,this.audioBuffer)?this.audioBuffer:null;return t&&!e?this.audioBuffered():e&&!t?this.videoBuffered():Tle(this.audioBuffered(),this.videoBuffered())}setDuration(e,t=fc){to({type:"mediaSource",sourceUpdater:this,action:eo.duration(e),name:"duration",doneFn:t})}endOfStream(e=null,t=fc){typeof e!="string"&&(e=void 0),to({type:"mediaSource",sourceUpdater:this,action:eo.endOfStream(e),name:"endOfStream",doneFn:t})}removeAudio(e,t,n=fc){if(!this.audioBuffered().length||this.audioBuffered().end(0)===0){n();return}to({type:"audio",sourceUpdater:this,action:eo.remove(e,t),doneFn:n,name:"remove"})}removeVideo(e,t,n=fc){if(!this.videoBuffered().length||this.videoBuffered().end(0)===0){n();return}to({type:"video",sourceUpdater:this,action:eo.remove(e,t),doneFn:n,name:"remove"})}updating(){return!!(Gw("audio",this)||Gw("video",this))}audioTimestampOffset(e){return typeof e<"u"&&this.audioBuffer&&this.audioTimestampOffset_!==e&&(to({type:"audio",sourceUpdater:this,action:eo.timestampOffset(e),name:"timestampOffset"}),this.audioTimestampOffset_=e),this.audioTimestampOffset_}videoTimestampOffset(e){return typeof e<"u"&&this.videoBuffer&&this.videoTimestampOffset_!==e&&(to({type:"video",sourceUpdater:this,action:eo.timestampOffset(e),name:"timestampOffset"}),this.videoTimestampOffset_=e),this.videoTimestampOffset_}audioQueueCallback(e){this.audioBuffer&&to({type:"audio",sourceUpdater:this,action:eo.callback(e),name:"callback"})}videoQueueCallback(e){this.videoBuffer&&to({type:"video",sourceUpdater:this,action:eo.callback(e),name:"callback"})}dispose(){this.trigger("dispose"),oce.forEach(e=>{this.abort(e),this.canRemoveSourceBuffer()?this.removeSourceBuffer(e):this[`${e}QueueCallback`](()=>I6(e,this))}),this.videoAppendQueued_=!1,this.delayedAudioAppendQueue_.length=0,this.sourceopenListener_&&this.mediaSource.removeEventListener("sourceopen",this.sourceopenListener_),this.off()}};const _M=r=>decodeURIComponent(escape(String.fromCharCode.apply(null,r))),uce=r=>{const e=new Uint8Array(r);return Array.from(e).map(t=>t.toString(16).padStart(2,"0")).join("")},xM=new Uint8Array(`

`.split("").map(r=>r.charCodeAt(0)));let cce=class extends Error{constructor(){super("Trying to parse received VTT cues, but there is no WebVTT. Make sure vtt.js is loaded.")}},dce=class extends qw{constructor(e,t={}){super(e,t),this.mediaSource_=null,this.subtitlesTrack_=null,this.featuresNativeTextTracks_=e.featuresNativeTextTracks,this.loadVttJs=e.loadVttJs,this.shouldSaveSegmentTimingInfo_=!1}createTransmuxer_(){return null}buffered_(){if(!this.subtitlesTrack_||!this.subtitlesTrack_.cues||!this.subtitlesTrack_.cues.length)return vs();const e=this.subtitlesTrack_.cues,t=e[0].startTime,n=e[e.length-1].startTime;return vs([[t,n]])}initSegmentForMap(e,t=!1){if(!e)return null;const n=yx(e);let i=this.initSegments_[n];if(t&&!i&&e.bytes){const s=xM.byteLength+e.bytes.byteLength,a=new Uint8Array(s);a.set(e.bytes),a.set(xM,e.bytes.byteLength),this.initSegments_[n]=i={resolvedUri:e.resolvedUri,byterange:e.byterange,bytes:a}}return i||e}couldBeginLoading_(){return this.playlist_&&this.subtitlesTrack_&&!this.paused()}init_(){return this.state="READY",this.resetEverything(),this.monitorBuffer_()}track(e){return typeof e>"u"?this.subtitlesTrack_:(this.subtitlesTrack_=e,this.state==="INIT"&&this.couldBeginLoading_()&&this.init_(),this.subtitlesTrack_)}remove(e,t){p0(e,t,this.subtitlesTrack_)}fillBuffer_(){const e=this.chooseNextRequest_();if(e){if(this.syncController_.timestampOffsetForTimeline(e.timeline)===null){const t=()=>{this.state="READY",this.paused()||this.monitorBuffer_()};this.syncController_.one("timestampoffset",t),this.state="WAITING_ON_TIMELINE";return}this.loadSegment_(e)}}timestampOffsetForSegment_(){return null}chooseNextRequest_(){return this.skipEmptySegments_(super.chooseNextRequest_())}skipEmptySegments_(e){for(;e&&e.segment.empty;){if(e.mediaIndex+1>=e.playlist.segments.length){e=null;break}e=this.generateSegmentInfo_({playlist:e.playlist,mediaIndex:e.mediaIndex+1,startOfSegment:e.startOfSegment+e.duration,isSyncRequest:e.isSyncRequest})}return e}stopForError(e){this.error(e),this.state="READY",this.pause(),this.trigger("error")}segmentRequestFinished_(e,t,n){if(!this.subtitlesTrack_){this.state="READY";return}if(this.saveTransferStats_(t.stats),!this.pendingSegment_){this.state="READY",this.mediaRequestsAborted+=1;return}if(e){e.code===du.TIMEOUT&&this.handleTimeout_(),e.code===du.ABORTED?this.mediaRequestsAborted+=1:this.mediaRequestsErrored+=1,this.stopForError(e);return}const i=this.pendingSegment_;this.saveBandwidthRelatedStats_(i.duration,t.stats),t.key&&this.segmentKey(t.key,!0),this.state="APPENDING",this.trigger("appending");const s=i.segment;if(s.map&&(s.map.bytes=t.map.bytes),i.bytes=t.bytes,typeof X.WebVTT!="function"&&typeof this.loadVttJs=="function"){this.state="WAITING_ON_VTTJS",this.loadVttJs().then(()=>this.segmentRequestFinished_(e,t,n),()=>this.stopForError({message:"Error loading vtt.js"}));return}s.requested=!0;try{this.parseVTTCues_(i)}catch(a){this.stopForError({message:a.message,metadata:{errorType:Se.Error.StreamingVttParserError,error:a}});return}if(this.updateTimeMapping_(i,this.syncController_.timelines[i.timeline],this.playlist_),i.cues.length?i.timingInfo={start:i.cues[0].startTime,end:i.cues[i.cues.length-1].endTime}:i.timingInfo={start:i.startOfSegment,end:i.startOfSegment+i.duration},i.isSyncRequest){this.trigger("syncinfoupdate"),this.pendingSegment_=null,this.state="READY";return}i.byteLength=i.bytes.byteLength,this.mediaSecondsLoaded+=s.duration,i.cues.forEach(a=>{this.subtitlesTrack_.addCue(this.featuresNativeTextTracks_?new X.VTTCue(a.startTime,a.endTime,a.text):a)}),que(this.subtitlesTrack_),this.handleAppendsDone_()}handleData_(){}updateTimingInfoEnd_(){}parseVTTCues_(e){let t,n=!1;if(typeof X.WebVTT!="function")throw new cce;typeof X.TextDecoder=="function"?t=new X.TextDecoder("utf8"):(t=X.WebVTT.StringDecoder(),n=!0);const i=new X.WebVTT.Parser(X,X.vttjs,t);if(e.cues=[],e.timestampmap={MPEGTS:0,LOCAL:0},i.oncue=e.cues.push.bind(e.cues),i.ontimestampmap=a=>{e.timestampmap=a},i.onparsingerror=a=>{Se.log.warn("Error encountered when parsing cues: "+a.message)},e.segment.map){let a=e.segment.map.bytes;n&&(a=_M(a)),i.parse(a)}let s=e.bytes;n&&(s=_M(s)),i.parse(s),i.flush()}updateTimeMapping_(e,t,n){const i=e.segment;if(!t)return;if(!e.cues.length){i.empty=!0;return}const{MPEGTS:s,LOCAL:a}=e.timestampmap,l=s/Fa.ONE_SECOND_IN_TS-a+t.mapping;if(e.cues.forEach(u=>{const c=u.endTime-u.startTime,h=this.handleRollover_(u.startTime+l,t.time);u.startTime=Math.max(h,0),u.endTime=Math.max(h+c,0)}),!n.syncInfo){const u=e.cues[0].startTime,c=e.cues[e.cues.length-1].startTime;n.syncInfo={mediaSequence:n.mediaSequence+e.mediaIndex,time:Math.min(u,c-i.duration)}}}handleRollover_(e,t){if(t===null)return e;let n=e*Fa.ONE_SECOND_IN_TS;const i=t*Fa.ONE_SECOND_IN_TS;let s;for(i<n?s=-8589934592:s=8589934592;Math.abs(n-i)>4294967296;)n+=s;return n/Fa.ONE_SECOND_IN_TS}};const hce=function(r,e){const t=r.cues;for(let n=0;n<t.length;n++){const i=t[n];if(e>=i.adStartTime&&e<=i.adEndTime)return i}return null},fce=function(r,e,t=0){if(!r.segments)return;let n=t,i;for(let s=0;s<r.segments.length;s++){const a=r.segments[s];if(i||(i=hce(e,n+a.duration/2)),i){if("cueIn"in a){i.endTime=n,i.adEndTime=n,n+=a.duration,i=null;continue}if(n<i.endTime){n+=a.duration;continue}i.endTime+=a.duration}else if("cueOut"in a&&(i=new X.VTTCue(n,n+a.duration,a.cueOut),i.adStartTime=n,i.adEndTime=n+parseFloat(a.cueOut),e.addCue(i)),"cueOutCont"in a){const[o,l]=a.cueOutCont.split("/").map(parseFloat);i=new X.VTTCue(n,n+a.duration,""),i.adStartTime=n-o,i.adEndTime=i.adStartTime+l,e.addCue(i)}n+=a.duration}};let bM=class{constructor({start:e,end:t,segmentIndex:n,partIndex:i=null,appended:s=!1}){this.start_=e,this.end_=t,this.segmentIndex_=n,this.partIndex_=i,this.appended_=s}isInRange(e){return e>=this.start&&e<this.end}markAppended(){this.appended_=!0}resetAppendedStatus(){this.appended_=!1}get isAppended(){return this.appended_}get start(){return this.start_}get end(){return this.end_}get segmentIndex(){return this.segmentIndex_}get partIndex(){return this.partIndex_}},pce=class{constructor(e,t=[]){this.segmentSyncInfo_=e,this.partsSyncInfo_=t}get segmentSyncInfo(){return this.segmentSyncInfo_}get partsSyncInfo(){return this.partsSyncInfo_}get hasPartsSyncInfo(){return this.partsSyncInfo_.length>0}resetAppendStatus(){this.segmentSyncInfo_.resetAppendedStatus(),this.partsSyncInfo_.forEach(e=>e.resetAppendedStatus())}},R6=class{constructor(){this.storage_=new Map,this.diagnostics_="",this.isReliable_=!1,this.start_=-1/0,this.end_=1/0}get start(){return this.start_}get end(){return this.end_}get diagnostics(){return this.diagnostics_}get isReliable(){return this.isReliable_}resetAppendedStatus(){this.storage_.forEach(e=>e.resetAppendStatus())}update(e,t){const{mediaSequence:n,segments:i}=e;if(this.isReliable_=this.isReliablePlaylist_(n,i),!!this.isReliable_)return this.updateStorage_(i,n,this.calculateBaseTime_(n,t))}getSyncInfoForTime(e){for(const{segmentSyncInfo:t,partsSyncInfo:n}of this.storage_.values())if(n.length){for(const i of n)if(i.isInRange(e))return i}else if(t.isInRange(e))return t;return null}getSyncInfoForMediaSequence(e){return this.storage_.get(e)}updateStorage_(e,t,n){const i=new Map;let s=`
`,a=n,o=t;this.start_=a,e.forEach((l,u)=>{const c=this.storage_.get(o),h=a,m=h+l.duration,g=!!(c&&c.segmentSyncInfo&&c.segmentSyncInfo.isAppended),y=new bM({start:h,end:m,appended:g,segmentIndex:u});l.syncInfo=y;let v=a;const x=(l.parts||[]).map((w,E)=>{const D=v,I=v+w.duration,A=!!(c&&c.partsSyncInfo&&c.partsSyncInfo[E]&&c.partsSyncInfo[E].isAppended),L=new bM({start:D,end:I,appended:A,segmentIndex:u,partIndex:E});return v=I,s+=`Media Sequence: ${o}.${E} | Range: ${D} --> ${I} | Appended: ${A}
`,w.syncInfo=L,L});i.set(o,new pce(y,x)),s+=`${A6(l.resolvedUri)} | Media Sequence: ${o} | Range: ${h} --> ${m} | Appended: ${g}
`,o++,a=m}),this.end_=a,this.storage_=i,this.diagnostics_=s}calculateBaseTime_(e,t){return this.storage_.size?this.storage_.has(e)?this.storage_.get(e).segmentSyncInfo.start:t:0}isReliablePlaylist_(e,t){return e!=null&&Array.isArray(t)&&t.length}},SM=class extends R6{constructor(e){super(),this.parent_=e}calculateBaseTime_(e,t){if(!this.storage_.size){const n=this.parent_.getSyncInfoForMediaSequence(e);return n?n.segmentSyncInfo.start:0}return super.calculateBaseTime_(e,t)}};const mce=86400,Q1=[{name:"VOD",run:(r,e,t,n,i)=>t!==1/0?{time:0,segmentIndex:0,partIndex:null}:null},{name:"MediaSequence",run:(r,e,t,n,i,s)=>{const a=r.getMediaSequenceSync(s);if(!a||!a.isReliable)return null;const o=a.getSyncInfoForTime(i);return o?{time:o.start,partIndex:o.partIndex,segmentIndex:o.segmentIndex}:null}},{name:"ProgramDateTime",run:(r,e,t,n,i)=>{if(!Object.keys(r.timelineToDatetimeMappings).length)return null;let s=null,a=null;const o=Bw(e);i=i||0;for(let l=0;l<o.length;l++){const u=e.endList||i===0?l:o.length-(l+1),c=o[u],h=c.segment,m=r.timelineToDatetimeMappings[h.timeline];if(!m||!h.dateTimeObject)continue;let y=h.dateTimeObject.getTime()/1e3+m;if(h.parts&&typeof c.partIndex=="number")for(let x=0;x<c.partIndex;x++)y+=h.parts[x].duration;const v=Math.abs(i-y);if(a!==null&&(v===0||a<v))break;a=v,s={time:y,segmentIndex:c.segmentIndex,partIndex:c.partIndex}}return s}},{name:"Segment",run:(r,e,t,n,i)=>{let s=null,a=null;i=i||0;const o=Bw(e);for(let l=0;l<o.length;l++){const u=e.endList||i===0?l:o.length-(l+1),c=o[u],h=c.segment,m=c.part&&c.part.start||h&&h.start;if(h.timeline===n&&typeof m<"u"){const g=Math.abs(i-m);if(a!==null&&a<g)break;(!s||a===null||a>=g)&&(a=g,s={time:m,segmentIndex:c.segmentIndex,partIndex:c.partIndex})}}return s}},{name:"Discontinuity",run:(r,e,t,n,i)=>{let s=null;if(i=i||0,e.discontinuityStarts&&e.discontinuityStarts.length){let a=null;for(let o=0;o<e.discontinuityStarts.length;o++){const l=e.discontinuityStarts[o],u=e.discontinuitySequence+o+1,c=r.discontinuities[u];if(c){const h=Math.abs(i-c.time);if(a!==null&&a<h)break;(!s||a===null||a>=h)&&(a=h,s={time:c.time,segmentIndex:l,partIndex:null})}}}return s}},{name:"Playlist",run:(r,e,t,n,i)=>e.syncInfo?{time:e.syncInfo.time,segmentIndex:e.syncInfo.mediaSequence-e.mediaSequence,partIndex:null}:null}];let gce=class extends Se.EventTarget{constructor(e={}){super(),this.timelines=[],this.discontinuities=[],this.timelineToDatetimeMappings={};const t=new R6,n=new SM(t),i=new SM(t);this.mediaSequenceStorage_={main:t,audio:n,vtt:i},this.logger_=el("SyncController")}getMediaSequenceSync(e){return this.mediaSequenceStorage_[e]||null}getSyncPoint(e,t,n,i,s){if(t!==1/0)return Q1.find(({name:l})=>l==="VOD").run(this,e,t);const a=this.runStrategies_(e,t,n,i,s);if(!a.length)return null;for(const o of a){const{syncPoint:l,strategy:u}=o,{segmentIndex:c,time:h}=l;if(c<0)continue;const m=e.segments[c],g=h,y=g+m.duration;if(this.logger_(`Strategy: ${u}. Current time: ${i}. selected segment: ${c}. Time: [${g} -> ${y}]}`),i>=g&&i<y)return this.logger_("Found sync point with exact match: ",l),l}return this.selectSyncPoint_(a,{key:"time",value:i})}getExpiredTime(e,t){if(!e||!e.segments)return null;const n=this.runStrategies_(e,t,e.discontinuitySequence,0);if(!n.length)return null;const i=this.selectSyncPoint_(n,{key:"segmentIndex",value:0});return i.segmentIndex>0&&(i.time*=-1),Math.abs(i.time+A0({defaultDuration:e.targetDuration,durationList:e.segments,startIndex:i.segmentIndex,endIndex:0}))}runStrategies_(e,t,n,i,s){const a=[];for(let o=0;o<Q1.length;o++){const l=Q1[o],u=l.run(this,e,t,n,i,s);u&&(u.strategy=l.name,a.push({strategy:l.name,syncPoint:u}))}return a}selectSyncPoint_(e,t){let n=e[0].syncPoint,i=Math.abs(e[0].syncPoint[t.key]-t.value),s=e[0].strategy;for(let a=1;a<e.length;a++){const o=Math.abs(e[a].syncPoint[t.key]-t.value);o<i&&(i=o,n=e[a].syncPoint,s=e[a].strategy)}return this.logger_(`syncPoint for [${t.key}: ${t.value}] chosen with strategy [${s}]: [time:${n.time}, segmentIndex:${n.segmentIndex}`+(typeof n.partIndex=="number"?`,partIndex:${n.partIndex}`:"")+"]"),n}saveExpiredSegmentInfo(e,t){const n=t.mediaSequence-e.mediaSequence;if(n>mce){Se.log.warn(`Not saving expired segment info. Media sequence gap ${n} is too large.`);return}for(let i=n-1;i>=0;i--){const s=e.segments[i];if(s&&typeof s.start<"u"){t.syncInfo={mediaSequence:e.mediaSequence+i,time:s.start},this.logger_(`playlist refresh sync: [time:${t.syncInfo.time}, mediaSequence: ${t.syncInfo.mediaSequence}]`),this.trigger("syncinfoupdate");break}}}setDateTimeMappingForStart(e){if(this.timelineToDatetimeMappings={},e.segments&&e.segments.length&&e.segments[0].dateTimeObject){const t=e.segments[0],n=t.dateTimeObject.getTime()/1e3;this.timelineToDatetimeMappings[t.timeline]=-n}}saveSegmentTimingInfo({segmentInfo:e,shouldSaveTimelineMapping:t}){const n=this.calculateSegmentTimeMapping_(e,e.timingInfo,t),i=e.segment;n&&(this.saveDiscontinuitySyncInfo_(e),e.playlist.syncInfo||(e.playlist.syncInfo={mediaSequence:e.playlist.mediaSequence+e.mediaIndex,time:i.start}));const s=i.dateTimeObject;i.discontinuity&&t&&s&&(this.timelineToDatetimeMappings[i.timeline]=-(s.getTime()/1e3))}timestampOffsetForTimeline(e){return typeof this.timelines[e]>"u"?null:this.timelines[e].time}mappingForTimeline(e){return typeof this.timelines[e]>"u"?null:this.timelines[e].mapping}calculateSegmentTimeMapping_(e,t,n){const i=e.segment,s=e.part;let a=this.timelines[e.timeline],o,l;if(typeof e.timestampOffset=="number")a={time:e.startOfSegment,mapping:e.startOfSegment-t.start},n&&(this.timelines[e.timeline]=a,this.trigger("timestampoffset"),this.logger_(`time mapping for timeline ${e.timeline}: [time: ${a.time}] [mapping: ${a.mapping}]`)),o=e.startOfSegment,l=t.end+a.mapping;else if(a)o=t.start+a.mapping,l=t.end+a.mapping;else return!1;return s&&(s.start=o,s.end=l),(!i.start||o<i.start)&&(i.start=o),i.end=l,!0}saveDiscontinuitySyncInfo_(e){const t=e.playlist,n=e.segment;if(n.discontinuity)this.discontinuities[n.timeline]={time:n.start,accuracy:0};else if(t.discontinuityStarts&&t.discontinuityStarts.length)for(let i=0;i<t.discontinuityStarts.length;i++){const s=t.discontinuityStarts[i],a=t.discontinuitySequence+i+1,o=s-e.mediaIndex,l=Math.abs(o);if(!this.discontinuities[a]||this.discontinuities[a].accuracy>l){let u;o<0?u=n.start-A0({defaultDuration:t.targetDuration,durationList:t.segments,startIndex:e.mediaIndex,endIndex:s}):u=n.end+A0({defaultDuration:t.targetDuration,durationList:t.segments,startIndex:e.mediaIndex+1,endIndex:s}),this.discontinuities[a]={time:u,accuracy:l}}}}dispose(){this.trigger("dispose"),this.off()}},vce=class extends Se.EventTarget{constructor(){super(),this.pendingTimelineChanges_={},this.lastTimelineChanges_={}}clearPendingTimelineChange(e){this.pendingTimelineChanges_[e]=null,this.trigger("pendingtimelinechange")}pendingTimelineChange({type:e,from:t,to:n}){return typeof t=="number"&&typeof n=="number"&&(this.pendingTimelineChanges_[e]={type:e,from:t,to:n},this.trigger("pendingtimelinechange")),this.pendingTimelineChanges_[e]}lastTimelineChange({type:e,from:t,to:n}){if(typeof t=="number"&&typeof n=="number"){this.lastTimelineChanges_[e]={type:e,from:t,to:n},delete this.pendingTimelineChanges_[e];const i={timelineChangeInfo:{from:t,to:n}};this.trigger({type:"timelinechange",metadata:i})}return this.lastTimelineChanges_[e]}dispose(){this.trigger("dispose"),this.pendingTimelineChanges_={},this.lastTimelineChanges_={},this.off()}};const yce=v6(y6(function(){var r=(function(){function v(){this.listeners={}}var x=v.prototype;return x.on=function(E,D){this.listeners[E]||(this.listeners[E]=[]),this.listeners[E].push(D)},x.off=function(E,D){if(!this.listeners[E])return!1;var I=this.listeners[E].indexOf(D);return this.listeners[E]=this.listeners[E].slice(0),this.listeners[E].splice(I,1),I>-1},x.trigger=function(E){var D=this.listeners[E];if(D)if(arguments.length===2)for(var I=D.length,A=0;A<I;++A)D[A].call(this,arguments[1]);else for(var L=Array.prototype.slice.call(arguments,1),N=D.length,U=0;U<N;++U)D[U].apply(this,L)},x.dispose=function(){this.listeners={}},x.pipe=function(E){this.on("data",function(D){E.push(D)})},v})();/*! @name pkcs7 @version 1.0.4 @license Apache-2.0 */function e(v){return v.subarray(0,v.byteLength-v[v.byteLength-1])}/*! @name aes-decrypter @version 4.0.2 @license Apache-2.0 */const t=function(){const v=[[[],[],[],[],[]],[[],[],[],[],[]]],x=v[0],w=v[1],E=x[4],D=w[4];let I,A,L;const N=[],U=[];let B,k,H,q,V,Q;for(I=0;I<256;I++)U[(N[I]=I<<1^(I>>7)*283)^I]=I;for(A=L=0;!E[A];A^=B||1,L=U[L]||1)for(q=L^L<<1^L<<2^L<<3^L<<4,q=q>>8^q&255^99,E[A]=q,D[q]=A,H=N[k=N[B=N[A]]],Q=H*16843009^k*65537^B*257^A*16843008,V=N[q]*257^q*16843008,I=0;I<4;I++)x[I][A]=V=V<<24^V>>>8,w[I][q]=Q=Q<<24^Q>>>8;for(I=0;I<5;I++)x[I]=x[I].slice(0),w[I]=w[I].slice(0);return v};let n=null;class i{constructor(x){n||(n=t()),this._tables=[[n[0][0].slice(),n[0][1].slice(),n[0][2].slice(),n[0][3].slice(),n[0][4].slice()],[n[1][0].slice(),n[1][1].slice(),n[1][2].slice(),n[1][3].slice(),n[1][4].slice()]];let w,E,D;const I=this._tables[0][4],A=this._tables[1],L=x.length;let N=1;if(L!==4&&L!==6&&L!==8)throw new Error("Invalid aes key size");const U=x.slice(0),B=[];for(this._key=[U,B],w=L;w<4*L+28;w++)D=U[w-1],(w%L===0||L===8&&w%L===4)&&(D=I[D>>>24]<<24^I[D>>16&255]<<16^I[D>>8&255]<<8^I[D&255],w%L===0&&(D=D<<8^D>>>24^N<<24,N=N<<1^(N>>7)*283)),U[w]=U[w-L]^D;for(E=0;w;E++,w--)D=U[E&3?w:w-4],w<=4||E<4?B[E]=D:B[E]=A[0][I[D>>>24]]^A[1][I[D>>16&255]]^A[2][I[D>>8&255]]^A[3][I[D&255]]}decrypt(x,w,E,D,I,A){const L=this._key[1];let N=x^L[0],U=D^L[1],B=E^L[2],k=w^L[3],H,q,V;const Q=L.length/4-2;let ie,le=4;const he=this._tables[1],ae=he[0],ne=he[1],ue=he[2],ee=he[3],pe=he[4];for(ie=0;ie<Q;ie++)H=ae[N>>>24]^ne[U>>16&255]^ue[B>>8&255]^ee[k&255]^L[le],q=ae[U>>>24]^ne[B>>16&255]^ue[k>>8&255]^ee[N&255]^L[le+1],V=ae[B>>>24]^ne[k>>16&255]^ue[N>>8&255]^ee[U&255]^L[le+2],k=ae[k>>>24]^ne[N>>16&255]^ue[U>>8&255]^ee[B&255]^L[le+3],le+=4,N=H,U=q,B=V;for(ie=0;ie<4;ie++)I[(3&-ie)+A]=pe[N>>>24]<<24^pe[U>>16&255]<<16^pe[B>>8&255]<<8^pe[k&255]^L[le++],H=N,N=U,U=B,B=k,k=H}}class s extends r{constructor(){super(r),this.jobs=[],this.delay=1,this.timeout_=null}processJob_(){this.jobs.shift()(),this.jobs.length?this.timeout_=setTimeout(this.processJob_.bind(this),this.delay):this.timeout_=null}push(x){this.jobs.push(x),this.timeout_||(this.timeout_=setTimeout(this.processJob_.bind(this),this.delay))}}const a=function(v){return v<<24|(v&65280)<<8|(v&16711680)>>8|v>>>24},o=function(v,x,w){const E=new Int32Array(v.buffer,v.byteOffset,v.byteLength>>2),D=new i(Array.prototype.slice.call(x)),I=new Uint8Array(v.byteLength),A=new Int32Array(I.buffer);let L,N,U,B,k,H,q,V,Q;for(L=w[0],N=w[1],U=w[2],B=w[3],Q=0;Q<E.length;Q+=4)k=a(E[Q]),H=a(E[Q+1]),q=a(E[Q+2]),V=a(E[Q+3]),D.decrypt(k,H,q,V,A,Q),A[Q]=a(A[Q]^L),A[Q+1]=a(A[Q+1]^N),A[Q+2]=a(A[Q+2]^U),A[Q+3]=a(A[Q+3]^B),L=k,N=H,U=q,B=V;return I};class l{constructor(x,w,E,D){const I=l.STEP,A=new Int32Array(x.buffer),L=new Uint8Array(x.byteLength);let N=0;for(this.asyncStream_=new s,this.asyncStream_.push(this.decryptChunk_(A.subarray(N,N+I),w,E,L)),N=I;N<A.length;N+=I)E=new Uint32Array([a(A[N-4]),a(A[N-3]),a(A[N-2]),a(A[N-1])]),this.asyncStream_.push(this.decryptChunk_(A.subarray(N,N+I),w,E,L));this.asyncStream_.push(function(){D(null,e(L))})}static get STEP(){return 32e3}decryptChunk_(x,w,E,D){return function(){const I=o(x,w,E);D.set(I,x.byteOffset)}}}var u=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},c;typeof window<"u"?c=window:typeof u<"u"?c=u:typeof self<"u"?c=self:c={};var h=c,m=function(x){return ArrayBuffer.isView==="function"?ArrayBuffer.isView(x):x&&x.buffer instanceof ArrayBuffer},g=h.BigInt||Number;g("0x1"),g("0x100"),g("0x10000"),g("0x1000000"),g("0x100000000"),g("0x10000000000"),g("0x1000000000000"),g("0x100000000000000"),g("0x10000000000000000"),(function(){var v=new Uint16Array([65484]),x=new Uint8Array(v.buffer,v.byteOffset,v.byteLength);return x[0]===255?"big":x[0]===204?"little":"unknown"})();const y=function(v){const x={};return Object.keys(v).forEach(w=>{const E=v[w];m(E)?x[w]={bytes:E.buffer,byteOffset:E.byteOffset,byteLength:E.byteLength}:x[w]=E}),x};self.onmessage=function(v){const x=v.data,w=new Uint8Array(x.encrypted.bytes,x.encrypted.byteOffset,x.encrypted.byteLength),E=new Uint32Array(x.key.bytes,x.key.byteOffset,x.key.byteLength/4),D=new Uint32Array(x.iv.bytes,x.iv.byteOffset,x.iv.byteLength/4);new l(w,E,D,function(I,A){self.postMessage(y({source:x.source,decrypted:A}),[A.buffer])})}}));var _ce=g6(yce);const xce=r=>{let e=r.default?"main":"alternative";return r.characteristics&&r.characteristics.indexOf("public.accessibility.describes-video")>=0&&(e="main-desc"),e},L6=(r,e)=>{r.abort(),r.pause(),e&&e.activePlaylistLoader&&(e.activePlaylistLoader.pause(),e.activePlaylistLoader=null)},Kw=(r,e)=>{e.activePlaylistLoader=r,r.load()},bce=(r,e)=>()=>{const{segmentLoaders:{[r]:t,main:n},mediaTypes:{[r]:i}}=e,s=i.activeTrack(),a=i.getActiveGroup(),o=i.activePlaylistLoader,l=i.lastGroup_;if(!(a&&l&&a.id===l.id)&&(i.lastGroup_=a,i.lastTrack_=s,L6(t,i),!(!a||a.isMainPlaylist))){if(!a.playlistLoader){o&&n.resetEverything();return}t.resyncLoader(),Kw(a.playlistLoader,i)}},Sce=(r,e)=>()=>{const{segmentLoaders:{[r]:t},mediaTypes:{[r]:n}}=e;n.lastGroup_=null,t.abort(),t.pause()},Tce=(r,e)=>()=>{const{mainPlaylistLoader:t,segmentLoaders:{[r]:n,main:i},mediaTypes:{[r]:s}}=e,a=s.activeTrack(),o=s.getActiveGroup(),l=s.activePlaylistLoader,u=s.lastTrack_;if(!(u&&a&&u.id===a.id)&&(s.lastGroup_=o,s.lastTrack_=a,L6(n,s),!!o)){if(o.isMainPlaylist){if(!a||!u||a.id===u.id)return;const c=e.vhs.playlistController_,h=c.selectPlaylist();if(c.media()===h)return;s.logger_(`track change. Switching main audio from ${u.id} to ${a.id}`),t.pause(),i.resetEverything(),c.fastQualityChange_(h);return}if(r==="AUDIO"){if(!o.playlistLoader){i.setAudio(!0),i.resetEverything();return}n.setAudio(!0),i.setAudio(!1)}if(l===o.playlistLoader){Kw(o.playlistLoader,s);return}n.track&&n.track(a),n.resetEverything(),Kw(o.playlistLoader,s)}},bx={AUDIO:(r,e)=>()=>{const{mediaTypes:{[r]:t},excludePlaylist:n}=e,i=t.activeTrack(),s=t.activeGroup(),a=(s.filter(l=>l.default)[0]||s[0]).id,o=t.tracks[a];if(i===o){n({error:{message:"Problem encountered loading the default audio track."}});return}Se.log.warn("Problem encountered loading the alternate audio track.Switching back to default.");for(const l in t.tracks)t.tracks[l].enabled=t.tracks[l]===o;t.onTrackChanged()},SUBTITLES:(r,e)=>()=>{const{mediaTypes:{[r]:t}}=e;Se.log.warn("Problem encountered loading the subtitle track.Disabling subtitle track.");const n=t.activeTrack();n&&(n.mode="disabled"),t.onTrackChanged()}},TM={AUDIO:(r,e,t)=>{if(!e)return;const{tech:n,requestOptions:i,segmentLoaders:{[r]:s}}=t;e.on("loadedmetadata",()=>{const a=e.media();s.playlist(a,i),(!n.paused()||a.endList&&n.preload()!=="none")&&s.load()}),e.on("loadedplaylist",()=>{s.playlist(e.media(),i),n.paused()||s.load()}),e.on("error",bx[r](r,t))},SUBTITLES:(r,e,t)=>{const{tech:n,requestOptions:i,segmentLoaders:{[r]:s},mediaTypes:{[r]:a}}=t;e.on("loadedmetadata",()=>{const o=e.media();s.playlist(o,i),s.track(a.activeTrack()),(!n.paused()||o.endList&&n.preload()!=="none")&&s.load()}),e.on("loadedplaylist",()=>{s.playlist(e.media(),i),n.paused()||s.load()}),e.on("error",bx[r](r,t))}},Cce={AUDIO:(r,e)=>{const{vhs:t,sourceType:n,segmentLoaders:{[r]:i},requestOptions:s,main:{mediaGroups:a},mediaTypes:{[r]:{groups:o,tracks:l,logger_:u}},mainPlaylistLoader:c}=e,h=Ng(c.main);(!a[r]||Object.keys(a[r]).length===0)&&(a[r]={main:{default:{default:!0}}},h&&(a[r].main.default.playlists=c.main.playlists));for(const m in a[r]){o[m]||(o[m]=[]);for(const g in a[r][m]){let y=a[r][m][g],v;if(h?(u(`AUDIO group '${m}' label '${g}' is a main playlist`),y.isMainPlaylist=!0,v=null):n==="vhs-json"&&y.playlists?v=new Kf(y.playlists[0],t,s):y.resolvedUri?v=new Kf(y.resolvedUri,t,s):y.playlists&&n==="dash"?v=new Hw(y.playlists[0],t,s,c):v=null,y=Cn({id:g,playlistLoader:v},y),TM[r](r,y.playlistLoader,e),o[m].push(y),typeof l[g]>"u"){const x=new Se.AudioTrack({id:g,kind:xce(y),enabled:!1,language:y.language,default:y.default,label:g});l[g]=x}}}i.on("error",bx[r](r,e))},SUBTITLES:(r,e)=>{const{tech:t,vhs:n,sourceType:i,segmentLoaders:{[r]:s},requestOptions:a,main:{mediaGroups:o},mediaTypes:{[r]:{groups:l,tracks:u}},mainPlaylistLoader:c}=e;for(const h in o[r]){l[h]||(l[h]=[]);for(const m in o[r][h]){if(!n.options_.useForcedSubtitles&&o[r][h][m].forced)continue;let g=o[r][h][m],y;if(i==="hls")y=new Kf(g.resolvedUri,n,a);else if(i==="dash"){if(!g.playlists.filter(x=>x.excludeUntil!==1/0).length)return;y=new Hw(g.playlists[0],n,a,c)}else i==="vhs-json"&&(y=new Kf(g.playlists?g.playlists[0]:g.resolvedUri,n,a));if(g=Cn({id:m,playlistLoader:y},g),TM[r](r,g.playlistLoader,e),l[h].push(g),typeof u[m]>"u"){const v=t.addRemoteTextTrack({id:m,kind:"subtitles",default:g.default&&g.autoselect,language:g.language,label:m},!1).track;u[m]=v}}}s.on("error",bx[r](r,e))},"CLOSED-CAPTIONS":(r,e)=>{const{tech:t,main:{mediaGroups:n},mediaTypes:{[r]:{groups:i,tracks:s}}}=e;for(const a in n[r]){i[a]||(i[a]=[]);for(const o in n[r][a]){const l=n[r][a][o];if(!/^(?:CC|SERVICE)/.test(l.instreamId))continue;const u=t.options_.vhs&&t.options_.vhs.captionServices||{};let c={label:o,language:l.language,instreamId:l.instreamId,default:l.default&&l.autoselect};if(u[c.instreamId]&&(c=Cn(c,u[c.instreamId])),c.default===void 0&&delete c.default,i[a].push(Cn({id:o},l)),typeof s[o]>"u"){const h=t.addRemoteTextTrack({id:c.instreamId,kind:"captions",default:c.default,language:c.language,label:c.label},!1).track;s[o]=h}}}}},O6=(r,e)=>{for(let t=0;t<r.length;t++)if(bk(e,r[t])||r[t].playlists&&O6(r[t].playlists,e))return!0;return!1},wce=(r,e)=>t=>{const{mainPlaylistLoader:n,mediaTypes:{[r]:{groups:i}}}=e,s=n.media();if(!s)return null;let a=null;s.attributes[r]&&(a=i[s.attributes[r]]);const o=Object.keys(i);if(!a)if(r==="AUDIO"&&o.length>1&&Ng(e.main))for(let l=0;l<o.length;l++){const u=i[o[l]];if(O6(u,s)){a=u;break}}else i.main?a=i.main:o.length===1&&(a=i[o[0]]);return typeof t>"u"?a:t===null||!a?null:a.filter(l=>l.id===t.id)[0]||null},Ece={AUDIO:(r,e)=>()=>{const{mediaTypes:{[r]:{tracks:t}}}=e;for(const n in t)if(t[n].enabled)return t[n];return null},SUBTITLES:(r,e)=>()=>{const{mediaTypes:{[r]:{tracks:t}}}=e;for(const n in t)if(t[n].mode==="showing"||t[n].mode==="hidden")return t[n];return null}},kce=(r,{mediaTypes:e})=>()=>{const t=e[r].activeTrack();return t?e[r].activeGroup(t):null},Ace=r=>{["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(u=>{Cce[u](u,r)});const{mediaTypes:e,mainPlaylistLoader:t,tech:n,vhs:i,segmentLoaders:{["AUDIO"]:s,main:a}}=r;["AUDIO","SUBTITLES"].forEach(u=>{e[u].activeGroup=wce(u,r),e[u].activeTrack=Ece[u](u,r),e[u].onGroupChanged=bce(u,r),e[u].onGroupChanging=Sce(u,r),e[u].onTrackChanged=Tce(u,r),e[u].getActiveGroup=kce(u,r)});const o=e.AUDIO.activeGroup();if(o){const u=(o.filter(h=>h.default)[0]||o[0]).id;e.AUDIO.tracks[u].enabled=!0,e.AUDIO.onGroupChanged(),e.AUDIO.onTrackChanged(),e.AUDIO.getActiveGroup().playlistLoader?(a.setAudio(!1),s.setAudio(!0)):a.setAudio(!0)}t.on("mediachange",()=>{["AUDIO","SUBTITLES"].forEach(u=>e[u].onGroupChanged())}),t.on("mediachanging",()=>{["AUDIO","SUBTITLES"].forEach(u=>e[u].onGroupChanging())});const l=()=>{e.AUDIO.onTrackChanged(),n.trigger({type:"usage",name:"vhs-audio-change"})};n.audioTracks().addEventListener("change",l),n.remoteTextTracks().addEventListener("change",e.SUBTITLES.onTrackChanged),i.on("dispose",()=>{n.audioTracks().removeEventListener("change",l),n.remoteTextTracks().removeEventListener("change",e.SUBTITLES.onTrackChanged)}),n.clearTracks("audio");for(const u in e.AUDIO.tracks)n.audioTracks().addTrack(e.AUDIO.tracks[u])},Dce=()=>{const r={};return["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(e=>{r[e]={groups:{},tracks:{},activePlaylistLoader:null,activeGroup:fc,activeTrack:fc,getActiveGroup:fc,onGroupChanged:fc,onTrackChanged:fc,lastTrack_:null,logger_:el(`MediaGroups[${e}]`)}}),r};let CM=class{constructor(){this.priority_=[],this.pathwayClones_=new Map}set version(e){e===1&&(this.version_=e)}set ttl(e){this.ttl_=e||300}set reloadUri(e){e&&(this.reloadUri_=Pa(this.reloadUri_,e))}set priority(e){e&&e.length&&(this.priority_=e)}set pathwayClones(e){e&&e.length&&(this.pathwayClones_=new Map(e.map(t=>[t.ID,t])))}get version(){return this.version_}get ttl(){return this.ttl_}get reloadUri(){return this.reloadUri_}get priority(){return this.priority_}get pathwayClones(){return this.pathwayClones_}},Ice=class extends Se.EventTarget{constructor(e,t){super(),this.currentPathway=null,this.defaultPathway=null,this.queryBeforeStart=!1,this.availablePathways_=new Set,this.steeringManifest=new CM,this.proxyServerUrl_=null,this.manifestType_=null,this.ttlTimeout_=null,this.request_=null,this.currentPathwayClones=new Map,this.nextPathwayClones=new Map,this.excludedSteeringManifestURLs=new Set,this.logger_=el("Content Steering"),this.xhr_=e,this.getBandwidth_=t}assignTagProperties(e,t){this.manifestType_=t.serverUri?"HLS":"DASH";const n=t.serverUri||t.serverURL;if(!n){this.logger_(`steering manifest URL is ${n}, cannot request steering manifest.`),this.trigger("error");return}if(n.startsWith("data:")){this.decodeDataUriManifest_(n.substring(n.indexOf(",")+1));return}this.steeringManifest.reloadUri=Pa(e,n),this.defaultPathway=t.pathwayId||t.defaultServiceLocation,this.queryBeforeStart=t.queryBeforeStart,this.proxyServerUrl_=t.proxyServerURL,this.defaultPathway&&!this.queryBeforeStart&&this.trigger("content-steering")}requestSteeringManifest(e){const t=this.steeringManifest.reloadUri;if(!t)return;const n=e?t:this.getRequestURI(t);if(!n){this.logger_("No valid content steering manifest URIs. Stopping content steering."),this.trigger("error"),this.dispose();return}const i={contentSteeringInfo:{uri:n}};this.trigger({type:"contentsteeringloadstart",metadata:i}),this.request_=this.xhr_({uri:n,requestType:"content-steering-manifest"},(s,a)=>{if(s){if(a.status===410){this.logger_(`manifest request 410 ${s}.`),this.logger_(`There will be no more content steering requests to ${n} this session.`),this.excludedSteeringManifestURLs.add(n);return}if(a.status===429){const u=a.responseHeaders["retry-after"];this.logger_(`manifest request 429 ${s}.`),this.logger_(`content steering will retry in ${u} seconds.`),this.startTTLTimeout_(parseInt(u,10));return}this.logger_(`manifest failed to load ${s}.`),this.startTTLTimeout_();return}this.trigger({type:"contentsteeringloadcomplete",metadata:i});let o;try{o=JSON.parse(this.request_.responseText)}catch(u){const c={errorType:Se.Error.StreamingContentSteeringParserError,error:u};this.trigger({type:"error",metadata:c})}this.assignSteeringProperties_(o);const l={contentSteeringInfo:i.contentSteeringInfo,contentSteeringManifest:{version:this.steeringManifest.version,reloadUri:this.steeringManifest.reloadUri,priority:this.steeringManifest.priority}};this.trigger({type:"contentsteeringparsed",metadata:l}),this.startTTLTimeout_()})}setProxyServerUrl_(e){const t=new X.URL(e),n=new X.URL(this.proxyServerUrl_);return n.searchParams.set("url",encodeURI(t.toString())),this.setSteeringParams_(n.toString())}decodeDataUriManifest_(e){const t=JSON.parse(X.atob(e));this.assignSteeringProperties_(t)}setSteeringParams_(e){const t=new X.URL(e),n=this.getPathway(),i=this.getBandwidth_();if(n){const s=`_${this.manifestType_}_pathway`;t.searchParams.set(s,n)}if(i){const s=`_${this.manifestType_}_throughput`;t.searchParams.set(s,i)}return t.toString()}assignSteeringProperties_(e){if(this.steeringManifest.version=e.VERSION,!this.steeringManifest.version){this.logger_(`manifest version is ${e.VERSION}, which is not supported.`),this.trigger("error");return}this.steeringManifest.ttl=e.TTL,this.steeringManifest.reloadUri=e["RELOAD-URI"],this.steeringManifest.priority=e["PATHWAY-PRIORITY"]||e["SERVICE-LOCATION-PRIORITY"],this.steeringManifest.pathwayClones=e["PATHWAY-CLONES"],this.nextPathwayClones=this.steeringManifest.pathwayClones,this.availablePathways_.size||(this.logger_("There are no available pathways for content steering. Ending content steering."),this.trigger("error"),this.dispose());const n=(i=>{for(const s of i)if(this.availablePathways_.has(s))return s;return[...this.availablePathways_][0]})(this.steeringManifest.priority);this.currentPathway!==n&&(this.currentPathway=n,this.trigger("content-steering"))}getPathway(){return this.currentPathway||this.defaultPathway}getRequestURI(e){if(!e)return null;const t=i=>this.excludedSteeringManifestURLs.has(i);if(this.proxyServerUrl_){const i=this.setProxyServerUrl_(e);if(!t(i))return i}const n=this.setSteeringParams_(e);return t(n)?null:n}startTTLTimeout_(e=this.steeringManifest.ttl){const t=e*1e3;this.ttlTimeout_=X.setTimeout(()=>{this.requestSteeringManifest()},t)}clearTTLTimeout_(){X.clearTimeout(this.ttlTimeout_),this.ttlTimeout_=null}abort(){this.request_&&this.request_.abort(),this.request_=null}dispose(){this.off("content-steering"),this.off("error"),this.abort(),this.clearTTLTimeout_(),this.currentPathway=null,this.defaultPathway=null,this.queryBeforeStart=null,this.proxyServerUrl_=null,this.manifestType_=null,this.ttlTimeout_=null,this.request_=null,this.excludedSteeringManifestURLs=new Set,this.availablePathways_=new Set,this.steeringManifest=new CM}addAvailablePathway(e){e&&this.availablePathways_.add(e)}clearAvailablePathways(){this.availablePathways_.clear()}excludePathway(e){return this.availablePathways_.delete(e)}didDASHTagChange(e,t){return!t&&this.steeringManifest.reloadUri||t&&(Pa(e,t.serverURL)!==this.steeringManifest.reloadUri||t.defaultServiceLocation!==this.defaultPathway||t.queryBeforeStart!==this.queryBeforeStart||t.proxyServerURL!==this.proxyServerUrl_)}getAvailablePathways(){return this.availablePathways_}};const Pce=10;let oc;const Rce=["mediaRequests","mediaRequestsAborted","mediaRequestsTimedout","mediaRequestsErrored","mediaTransferDuration","mediaBytesTransferred","mediaAppends"],Lce=function(r){return this.audioSegmentLoader_[r]+this.mainSegmentLoader_[r]},Oce=function({currentPlaylist:r,buffered:e,currentTime:t,nextPlaylist:n,bufferLowWaterLine:i,bufferHighWaterLine:s,duration:a,bufferBasedABR:o,log:l}){if(!n)return Se.log.warn("We received no playlist to switch to. Please check your stream."),!1;const u=`allowing switch ${r&&r.id||"null"} -> ${n.id}`;if(!r)return l(`${u} as current playlist is not set`),!0;if(n.id===r.id)return!1;const c=!!Gf(e,t).length;if(!r.endList)return!c&&typeof r.partTargetDuration=="number"?(l(`not ${u} as current playlist is live llhls, but currentTime isn't in buffered.`),!1):(l(`${u} as current playlist is live`),!0);const h=yk(e,t),m=o?Xi.EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE:Xi.MAX_BUFFER_LOW_WATER_LINE;if(a<m)return l(`${u} as duration < max low water line (${a} < ${m})`),!0;const g=n.attributes.BANDWIDTH,y=r.attributes.BANDWIDTH;if(g<y&&(!o||h<s)){let v=`${u} as next bandwidth < current bandwidth (${g} < ${y})`;return o&&(v+=` and forwardBuffer < bufferHighWaterLine (${h} < ${s})`),l(v),!0}if((!o||g>y)&&h>=i){let v=`${u} as forwardBuffer >= bufferLowWaterLine (${h} >= ${i})`;return o&&(v+=` and next bandwidth > current bandwidth (${g} > ${y})`),l(v),!0}return l(`not ${u} as no switching criteria met`),!1};let Mce=class extends Se.EventTarget{constructor(e){super();const{src:t,withCredentials:n,tech:i,bandwidth:s,externVhs:a,useCueTags:o,playlistExclusionDuration:l,enableLowInitialPlaylist:u,sourceType:c,cacheEncryptionKeys:h,bufferBasedABR:m,leastPixelDiffSelector:g,captionServices:y,experimentalUseMMS:v}=e;if(!t)throw new Error("A non-empty playlist URL or JSON manifest string is required");let{maxPlaylistRetries:x}=e;(x===null||typeof x>"u")&&(x=1/0),oc=a,this.bufferBasedABR=!!m,this.leastPixelDiffSelector=!!g,this.withCredentials=n,this.tech_=i,this.vhs_=i.vhs,this.player_=e.player_,this.sourceType_=c,this.useCueTags_=o,this.playlistExclusionDuration=l,this.maxPlaylistRetries=x,this.enableLowInitialPlaylist=u,this.useCueTags_&&(this.cueTagsTrack_=this.tech_.addTextTrack("metadata","ad-cues"),this.cueTagsTrack_.inBandMetadataTrackDispatchType=""),this.requestOptions_={withCredentials:n,maxPlaylistRetries:x,timeout:null},this.on("error",this.pauseLoading),this.mediaTypes_=Dce(),v&&X.ManagedMediaSource?(this.tech_.el_.disableRemotePlayback=!0,this.mediaSource=new X.ManagedMediaSource,Se.log("Using ManagedMediaSource")):X.MediaSource&&(this.mediaSource=new X.MediaSource),this.handleDurationChange_=this.handleDurationChange_.bind(this),this.handleSourceOpen_=this.handleSourceOpen_.bind(this),this.handleSourceEnded_=this.handleSourceEnded_.bind(this),this.load=this.load.bind(this),this.pause=this.pause.bind(this),this.mediaSource.addEventListener("durationchange",this.handleDurationChange_),this.mediaSource.addEventListener("sourceopen",this.handleSourceOpen_),this.mediaSource.addEventListener("sourceended",this.handleSourceEnded_),this.mediaSource.addEventListener("startstreaming",this.load),this.mediaSource.addEventListener("endstreaming",this.pause),this.seekable_=vs(),this.hasPlayed_=!1,this.syncController_=new gce(e),this.segmentMetadataTrack_=i.addRemoteTextTrack({kind:"metadata",label:"segment-metadata"},!1).track,this.decrypter_=new _ce,this.sourceUpdater_=new P6(this.mediaSource),this.inbandTextTracks_={},this.timelineChangeController_=new vce,this.keyStatusMap_=new Map;const w={vhs:this.vhs_,parse708captions:e.parse708captions,useDtsForTimestampOffset:e.useDtsForTimestampOffset,captionServices:y,mediaSource:this.mediaSource,currentTime:this.tech_.currentTime.bind(this.tech_),seekable:()=>this.seekable(),seeking:()=>this.tech_.seeking(),duration:()=>this.duration(),hasPlayed:()=>this.hasPlayed_,goalBufferLength:()=>this.goalBufferLength(),bandwidth:s,syncController:this.syncController_,decrypter:this.decrypter_,sourceType:this.sourceType_,inbandTextTracks:this.inbandTextTracks_,cacheEncryptionKeys:h,sourceUpdater:this.sourceUpdater_,timelineChangeController:this.timelineChangeController_,exactManifestTimings:e.exactManifestTimings,addMetadataToTextTrack:this.addMetadataToTextTrack.bind(this)};this.mainPlaylistLoader_=this.sourceType_==="dash"?new Hw(t,this.vhs_,Cn(this.requestOptions_,{addMetadataToTextTrack:this.addMetadataToTextTrack.bind(this)})):new Kf(t,this.vhs_,Cn(this.requestOptions_,{addDateRangesToTextTrack:this.addDateRangesToTextTrack_.bind(this)})),this.setupMainPlaylistLoaderListeners_(),this.mainSegmentLoader_=new qw(Cn(w,{segmentMetadataTrack:this.segmentMetadataTrack_,loaderType:"main"}),e),this.audioSegmentLoader_=new qw(Cn(w,{loaderType:"audio"}),e),this.subtitleSegmentLoader_=new dce(Cn(w,{loaderType:"vtt",featuresNativeTextTracks:this.tech_.featuresNativeTextTracks,loadVttJs:()=>new Promise((I,A)=>{function L(){i.off("vttjserror",N),I()}function N(){i.off("vttjsloaded",L),A()}i.one("vttjsloaded",L),i.one("vttjserror",N),i.addWebVttScript_()})}),e);const E=()=>this.mainSegmentLoader_.bandwidth;this.contentSteeringController_=new Ice(this.vhs_.xhr,E),this.setupSegmentLoaderListeners_(),this.bufferBasedABR&&(this.mainPlaylistLoader_.one("loadedplaylist",()=>this.startABRTimer_()),this.tech_.on("pause",()=>this.stopABRTimer_()),this.tech_.on("play",()=>this.startABRTimer_())),Rce.forEach(I=>{this[I+"_"]=Lce.bind(this,I)}),this.logger_=el("pc"),this.triggeredFmp4Usage=!1,this.tech_.preload()==="none"?(this.loadOnPlay_=()=>{this.loadOnPlay_=null,this.mainPlaylistLoader_.load()},this.tech_.one("play",this.loadOnPlay_)):this.mainPlaylistLoader_.load(),this.timeToLoadedData__=-1,this.mainAppendsToLoadedData__=-1,this.audioAppendsToLoadedData__=-1;const D=this.tech_.preload()==="none"?"play":"loadstart";this.tech_.one(D,()=>{const I=Date.now();this.tech_.one("loadeddata",()=>{this.timeToLoadedData__=Date.now()-I,this.mainAppendsToLoadedData__=this.mainSegmentLoader_.mediaAppends,this.audioAppendsToLoadedData__=this.audioSegmentLoader_.mediaAppends})})}mainAppendsToLoadedData_(){return this.mainAppendsToLoadedData__}audioAppendsToLoadedData_(){return this.audioAppendsToLoadedData__}appendsToLoadedData_(){const e=this.mainAppendsToLoadedData_(),t=this.audioAppendsToLoadedData_();return e===-1||t===-1?-1:e+t}timeToLoadedData_(){return this.timeToLoadedData__}checkABR_(e="abr"){const t=this.selectPlaylist();t&&this.shouldSwitchToMedia_(t)&&this.switchMedia_(t,e)}switchMedia_(e,t,n){const i=this.media(),s=i&&(i.id||i.uri),a=e&&(e.id||e.uri);if(s&&s!==a){this.logger_(`switch media ${s} -> ${a} from ${t}`);const o={renditionInfo:{id:a,bandwidth:e.attributes.BANDWIDTH,resolution:e.attributes.RESOLUTION,codecs:e.attributes.CODECS},cause:t};this.trigger({type:"renditionselected",metadata:o}),this.tech_.trigger({type:"usage",name:`vhs-rendition-change-${t}`})}this.mainPlaylistLoader_.media(e,n)}switchMediaForDASHContentSteering_(){["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(e=>{const t=this.mediaTypes_[e],n=t?t.activeGroup():null,i=this.contentSteeringController_.getPathway();if(n&&i){const a=(n.length?n[0].playlists:n.playlists).filter(o=>o.attributes.serviceLocation===i);a.length&&this.mediaTypes_[e].activePlaylistLoader.media(a[0])}})}startABRTimer_(){this.stopABRTimer_(),this.abrTimer_=X.setInterval(()=>this.checkABR_(),250)}stopABRTimer_(){this.tech_.scrubbing&&this.tech_.scrubbing()||(X.clearInterval(this.abrTimer_),this.abrTimer_=null)}getAudioTrackPlaylists_(){const e=this.main(),t=e&&e.playlists||[];if(!e||!e.mediaGroups||!e.mediaGroups.AUDIO)return t;const n=e.mediaGroups.AUDIO,i=Object.keys(n);let s;if(Object.keys(this.mediaTypes_.AUDIO.groups).length)s=this.mediaTypes_.AUDIO.activeTrack();else{const o=n.main||i.length&&n[i[0]];for(const l in o)if(o[l].default){s={label:l};break}}if(!s)return t;const a=[];for(const o in n)if(n[o][s.label]){const l=n[o][s.label];if(l.playlists&&l.playlists.length)a.push.apply(a,l.playlists);else if(l.uri)a.push(l);else if(e.playlists.length)for(let u=0;u<e.playlists.length;u++){const c=e.playlists[u];c.attributes&&c.attributes.AUDIO&&c.attributes.AUDIO===o&&a.push(c)}}return a.length?a:t}setupMainPlaylistLoaderListeners_(){this.mainPlaylistLoader_.on("loadedmetadata",()=>{const t=this.mainPlaylistLoader_.media(),n=t.targetDuration*1.5*1e3;Nw(this.mainPlaylistLoader_.main,this.mainPlaylistLoader_.media())?this.requestOptions_.timeout=0:this.requestOptions_.timeout=n,t.endList&&this.tech_.preload()!=="none"&&(this.mainSegmentLoader_.playlist(t,this.requestOptions_),this.mainSegmentLoader_.load()),Ace({sourceType:this.sourceType_,segmentLoaders:{AUDIO:this.audioSegmentLoader_,SUBTITLES:this.subtitleSegmentLoader_,main:this.mainSegmentLoader_},tech:this.tech_,requestOptions:this.requestOptions_,mainPlaylistLoader:this.mainPlaylistLoader_,vhs:this.vhs_,main:this.main(),mediaTypes:this.mediaTypes_,excludePlaylist:this.excludePlaylist.bind(this)}),this.triggerPresenceUsage_(this.main(),t),this.setupFirstPlay(),!this.mediaTypes_.AUDIO.activePlaylistLoader||this.mediaTypes_.AUDIO.activePlaylistLoader.media()?this.trigger("selectedinitialmedia"):this.mediaTypes_.AUDIO.activePlaylistLoader.one("loadedmetadata",()=>{this.trigger("selectedinitialmedia")})}),this.mainPlaylistLoader_.on("loadedplaylist",()=>{this.loadOnPlay_&&this.tech_.off("play",this.loadOnPlay_);let t=this.mainPlaylistLoader_.media();if(!t){this.attachContentSteeringListeners_(),this.initContentSteeringController_(),this.excludeUnsupportedVariants_();let n;if(this.enableLowInitialPlaylist&&(n=this.selectInitialPlaylist()),n||(n=this.selectPlaylist()),!n||!this.shouldSwitchToMedia_(n)||(this.initialMedia_=n,this.switchMedia_(this.initialMedia_,"initial"),!(this.sourceType_==="vhs-json"&&this.initialMedia_.segments)))return;t=this.initialMedia_}this.handleUpdatedMediaPlaylist(t)}),this.mainPlaylistLoader_.on("error",()=>{const t=this.mainPlaylistLoader_.error;this.excludePlaylist({playlistToExclude:t.playlist,error:t})}),this.mainPlaylistLoader_.on("mediachanging",()=>{this.mainSegmentLoader_.abort(),this.mainSegmentLoader_.pause()}),this.mainPlaylistLoader_.on("mediachange",()=>{const t=this.mainPlaylistLoader_.media(),n=t.targetDuration*1.5*1e3;Nw(this.mainPlaylistLoader_.main,this.mainPlaylistLoader_.media())?this.requestOptions_.timeout=0:this.requestOptions_.timeout=n,this.sourceType_==="dash"&&this.mainPlaylistLoader_.load(),this.mainSegmentLoader_.pause(),this.mainSegmentLoader_.playlist(t,this.requestOptions_),this.waitingForFastQualityPlaylistReceived_?this.runFastQualitySwitch_():this.mainSegmentLoader_.load(),this.tech_.trigger({type:"mediachange",bubbles:!0})}),this.mainPlaylistLoader_.on("playlistunchanged",()=>{const t=this.mainPlaylistLoader_.media();if(t.lastExcludeReason_==="playlist-unchanged")return;this.stuckAtPlaylistEnd_(t)&&(this.excludePlaylist({error:{message:"Playlist no longer updating.",reason:"playlist-unchanged"}}),this.tech_.trigger("playliststuck"))}),this.mainPlaylistLoader_.on("renditiondisabled",()=>{this.tech_.trigger({type:"usage",name:"vhs-rendition-disabled"})}),this.mainPlaylistLoader_.on("renditionenabled",()=>{this.tech_.trigger({type:"usage",name:"vhs-rendition-enabled"})}),["manifestrequeststart","manifestrequestcomplete","manifestparsestart","manifestparsecomplete","playlistrequeststart","playlistrequestcomplete","playlistparsestart","playlistparsecomplete","renditiondisabled","renditionenabled"].forEach(t=>{this.mainPlaylistLoader_.on(t,n=>{this.player_.trigger(tr({},n))})})}handleUpdatedMediaPlaylist(e){this.useCueTags_&&this.updateAdCues_(e),this.mainSegmentLoader_.pause(),this.mainSegmentLoader_.playlist(e,this.requestOptions_),this.waitingForFastQualityPlaylistReceived_&&this.runFastQualitySwitch_(),this.updateDuration(!e.endList),this.tech_.paused()||(this.mainSegmentLoader_.load(),this.audioSegmentLoader_&&this.audioSegmentLoader_.load())}triggerPresenceUsage_(e,t){const n=e.mediaGroups||{};let i=!0;const s=Object.keys(n.AUDIO);for(const a in n.AUDIO)for(const o in n.AUDIO[a])n.AUDIO[a][o].uri||(i=!1);i&&this.tech_.trigger({type:"usage",name:"vhs-demuxed"}),Object.keys(n.SUBTITLES).length&&this.tech_.trigger({type:"usage",name:"vhs-webvtt"}),oc.Playlist.isAes(t)&&this.tech_.trigger({type:"usage",name:"vhs-aes"}),s.length&&Object.keys(n.AUDIO[s[0]]).length>1&&this.tech_.trigger({type:"usage",name:"vhs-alternate-audio"}),this.useCueTags_&&this.tech_.trigger({type:"usage",name:"vhs-playlist-cue-tags"})}shouldSwitchToMedia_(e){const t=this.mainPlaylistLoader_.media()||this.mainPlaylistLoader_.pendingMedia_,n=this.tech_.currentTime(),i=this.bufferLowWaterLine(),s=this.bufferHighWaterLine(),a=this.tech_.buffered();return Oce({buffered:a,currentTime:n,currentPlaylist:t,nextPlaylist:e,bufferLowWaterLine:i,bufferHighWaterLine:s,duration:this.duration(),bufferBasedABR:this.bufferBasedABR,log:this.logger_})}setupSegmentLoaderListeners_(){this.mainSegmentLoader_.on("bandwidthupdate",()=>{this.checkABR_("bandwidthupdate"),this.tech_.trigger("bandwidthupdate")}),this.mainSegmentLoader_.on("timeout",()=>{this.bufferBasedABR&&this.mainSegmentLoader_.load()}),this.bufferBasedABR||this.mainSegmentLoader_.on("progress",()=>{this.trigger("progress")}),this.mainSegmentLoader_.on("error",()=>{const n=this.mainSegmentLoader_.error();this.excludePlaylist({playlistToExclude:n.playlist,error:n})}),this.mainSegmentLoader_.on("appenderror",()=>{this.error=this.mainSegmentLoader_.error_,this.trigger("error")}),this.mainSegmentLoader_.on("syncinfoupdate",()=>{this.onSyncInfoUpdate_()}),this.mainSegmentLoader_.on("timestampoffset",()=>{this.tech_.trigger({type:"usage",name:"vhs-timestamp-offset"})}),this.audioSegmentLoader_.on("syncinfoupdate",()=>{this.onSyncInfoUpdate_()}),this.audioSegmentLoader_.on("appenderror",()=>{this.error=this.audioSegmentLoader_.error_,this.trigger("error")}),this.mainSegmentLoader_.on("ended",()=>{this.logger_("main segment loader ended"),this.onEndOfStream()}),this.timelineChangeController_.on("audioTimelineBehind",()=>{const n=this.audioSegmentLoader_.pendingSegment_;if(!n||!n.segment||!n.segment.syncInfo)return;const i=n.segment.syncInfo.end+.01;this.tech_.setCurrentTime(i)}),this.mainSegmentLoader_.on("earlyabort",n=>{this.bufferBasedABR||(this.delegateLoaders_("all",["abort"]),this.excludePlaylist({error:{message:"Aborted early because there isn't enough bandwidth to complete the request without rebuffering."},playlistExclusionDuration:Pce}))});const e=()=>{if(!this.sourceUpdater_.hasCreatedSourceBuffers())return this.tryToCreateSourceBuffers_();const n=this.getCodecsOrExclude_();n&&this.sourceUpdater_.addOrChangeSourceBuffers(n)};this.mainSegmentLoader_.on("trackinfo",e),this.audioSegmentLoader_.on("trackinfo",e),this.mainSegmentLoader_.on("fmp4",()=>{this.triggeredFmp4Usage||(this.tech_.trigger({type:"usage",name:"vhs-fmp4"}),this.triggeredFmp4Usage=!0)}),this.audioSegmentLoader_.on("fmp4",()=>{this.triggeredFmp4Usage||(this.tech_.trigger({type:"usage",name:"vhs-fmp4"}),this.triggeredFmp4Usage=!0)}),this.audioSegmentLoader_.on("ended",()=>{this.logger_("audioSegmentLoader ended"),this.onEndOfStream()}),["segmentselected","segmentloadstart","segmentloaded","segmentkeyloadstart","segmentkeyloadcomplete","segmentdecryptionstart","segmentdecryptioncomplete","segmenttransmuxingstart","segmenttransmuxingcomplete","segmenttransmuxingtrackinfoavailable","segmenttransmuxingtiminginfoavailable","segmentappendstart","appendsdone","bandwidthupdated","timelinechange","codecschange"].forEach(n=>{this.mainSegmentLoader_.on(n,i=>{this.player_.trigger(tr({},i))}),this.audioSegmentLoader_.on(n,i=>{this.player_.trigger(tr({},i))}),this.subtitleSegmentLoader_.on(n,i=>{this.player_.trigger(tr({},i))})})}mediaSecondsLoaded_(){return Math.max(this.audioSegmentLoader_.mediaSecondsLoaded+this.mainSegmentLoader_.mediaSecondsLoaded)}load(){this.mainSegmentLoader_.load(),this.mediaTypes_.AUDIO.activePlaylistLoader&&this.audioSegmentLoader_.load(),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&this.subtitleSegmentLoader_.load()}pause(){this.mainSegmentLoader_.pause(),this.mediaTypes_.AUDIO.activePlaylistLoader&&this.audioSegmentLoader_.pause(),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&this.subtitleSegmentLoader_.pause()}fastQualityChange_(e=this.selectPlaylist()){if(e&&e===this.mainPlaylistLoader_.media()){this.logger_("skipping fastQualityChange because new media is same as old");return}this.switchMedia_(e,"fast-quality"),this.waitingForFastQualityPlaylistReceived_=!0}runFastQualitySwitch_(){this.waitingForFastQualityPlaylistReceived_=!1,this.mainSegmentLoader_.pause(),this.mainSegmentLoader_.resetEverything(()=>{this.mainSegmentLoader_.load()})}play(){if(this.setupFirstPlay())return;this.tech_.ended()&&this.tech_.setCurrentTime(0),this.hasPlayed_&&this.load();const e=this.tech_.seekable();if(this.tech_.duration()===1/0&&this.tech_.currentTime()<e.start(0))return this.tech_.setCurrentTime(e.end(e.length-1))}setupFirstPlay(){const e=this.mainPlaylistLoader_.media();if(!e||this.tech_.paused()||this.hasPlayed_)return!1;if(!e.endList||e.start){const t=this.seekable();if(!t.length)return!1;const n=t.end(0);let i=n;if(e.start){const s=e.start.timeOffset;s<0?i=Math.max(n+s,t.start(0)):i=Math.min(n,s)}this.trigger("firstplay"),this.tech_.setCurrentTime(i)}return this.hasPlayed_=!0,this.load(),!0}handleSourceOpen_(){if(this.tryToCreateSourceBuffers_(),this.tech_.autoplay()){const e=this.tech_.play();typeof e<"u"&&typeof e.then=="function"&&e.then(null,t=>{})}this.trigger("sourceopen")}handleSourceEnded_(){if(!this.inbandTextTracks_.metadataTrack_)return;const e=this.inbandTextTracks_.metadataTrack_.cues;if(!e||!e.length)return;const t=this.duration();e[e.length-1].endTime=isNaN(t)||Math.abs(t)===1/0?Number.MAX_VALUE:t}handleDurationChange_(){this.tech_.trigger("durationchange")}onEndOfStream(){let e=this.mainSegmentLoader_.ended_;if(this.mediaTypes_.AUDIO.activePlaylistLoader){const t=this.mainSegmentLoader_.getCurrentMediaInfo_();!t||t.hasVideo?e=e&&this.audioSegmentLoader_.ended_:e=this.audioSegmentLoader_.ended_}e&&(this.stopABRTimer_(),this.sourceUpdater_.endOfStream())}stuckAtPlaylistEnd_(e){if(!this.seekable().length)return!1;const n=this.syncController_.getExpiredTime(e,this.duration());if(n===null)return!1;const i=oc.Playlist.playlistEnd(e,n),s=this.tech_.currentTime(),a=this.tech_.buffered();if(!a.length)return i-s<=cu;const o=a.end(a.length-1);return o-s<=cu&&i-o<=cu}excludePlaylist({playlistToExclude:e=this.mainPlaylistLoader_.media(),error:t={},playlistExclusionDuration:n}){if(e=e||this.mainPlaylistLoader_.media(),n=n||t.playlistExclusionDuration||this.playlistExclusionDuration,!e){this.error=t,this.mediaSource.readyState!=="open"?this.trigger("error"):this.sourceUpdater_.endOfStream("network");return}e.playlistErrors_++;const i=this.mainPlaylistLoader_.main.playlists,s=i.filter(nS),a=s.length===1&&s[0]===e;if(i.length===1&&n!==1/0)return Se.log.warn(`Problem encountered with playlist ${e.id}. Trying again since it is the only playlist.`),this.tech_.trigger("retryplaylist"),this.mainPlaylistLoader_.load(a);if(a){if(this.main().contentSteering){const y=this.pathwayAttribute_(e),v=this.contentSteeringController_.steeringManifest.ttl*1e3;this.contentSteeringController_.excludePathway(y),this.excludeThenChangePathway_(),setTimeout(()=>{this.contentSteeringController_.addAvailablePathway(y)},v);return}let g=!1;i.forEach(y=>{if(y===e)return;const v=y.excludeUntil;typeof v<"u"&&v!==1/0&&(g=!0,delete y.excludeUntil)}),g&&(Se.log.warn("Removing other playlists from the exclusion list because the last rendition is about to be excluded."),this.tech_.trigger("retryplaylist"))}let o;e.playlistErrors_>this.maxPlaylistRetries?o=1/0:o=Date.now()+n*1e3,e.excludeUntil=o,t.reason&&(e.lastExcludeReason_=t.reason),this.tech_.trigger("excludeplaylist"),this.tech_.trigger({type:"usage",name:"vhs-rendition-excluded"});const l=this.selectPlaylist();if(!l){this.error="Playback cannot continue. No available working or supported playlists.",this.trigger("error");return}const u=t.internal?this.logger_:Se.log.warn,c=t.message?" "+t.message:"";u(`${t.internal?"Internal problem":"Problem"} encountered with playlist ${e.id}.${c} Switching to playlist ${l.id}.`),l.attributes.AUDIO!==e.attributes.AUDIO&&this.delegateLoaders_("audio",["abort","pause"]),l.attributes.SUBTITLES!==e.attributes.SUBTITLES&&this.delegateLoaders_("subtitle",["abort","pause"]),this.delegateLoaders_("main",["abort","pause"]);const h=l.targetDuration/2*1e3||5*1e3,m=typeof l.lastRequest=="number"&&Date.now()-l.lastRequest<=h;return this.switchMedia_(l,"exclude",a||m)}pauseLoading(){this.delegateLoaders_("all",["abort","pause"]),this.stopABRTimer_()}delegateLoaders_(e,t){const n=[],i=e==="all";(i||e==="main")&&n.push(this.mainPlaylistLoader_);const s=[];(i||e==="audio")&&s.push("AUDIO"),(i||e==="subtitle")&&(s.push("CLOSED-CAPTIONS"),s.push("SUBTITLES")),s.forEach(a=>{const o=this.mediaTypes_[a]&&this.mediaTypes_[a].activePlaylistLoader;o&&n.push(o)}),["main","audio","subtitle"].forEach(a=>{const o=this[`${a}SegmentLoader_`];o&&(e===a||e==="all")&&n.push(o)}),n.forEach(a=>t.forEach(o=>{typeof a[o]=="function"&&a[o]()}))}setCurrentTime(e){const t=Gf(this.tech_.buffered(),e);if(!(this.mainPlaylistLoader_&&this.mainPlaylistLoader_.media())||!this.mainPlaylistLoader_.media().segments)return 0;if(t&&t.length)return e;this.mainSegmentLoader_.pause(),this.mainSegmentLoader_.resetEverything(),this.mediaTypes_.AUDIO.activePlaylistLoader&&(this.audioSegmentLoader_.pause(),this.audioSegmentLoader_.resetEverything()),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&(this.subtitleSegmentLoader_.pause(),this.subtitleSegmentLoader_.resetEverything()),this.load()}duration(){if(!this.mainPlaylistLoader_)return 0;const e=this.mainPlaylistLoader_.media();return e?e.endList?this.mediaSource?this.mediaSource.duration:oc.Playlist.duration(e):1/0:0}seekable(){return this.seekable_}onSyncInfoUpdate_(){let e;if(!this.mainPlaylistLoader_)return;let t=this.mainPlaylistLoader_.media();if(!t)return;let n=this.syncController_.getExpiredTime(t,this.duration());if(n===null)return;const i=this.mainPlaylistLoader_.main,s=oc.Playlist.seekable(t,n,oc.Playlist.liveEdgeDelay(i,t));if(s.length===0||this.mediaTypes_.AUDIO.activePlaylistLoader&&(t=this.mediaTypes_.AUDIO.activePlaylistLoader.media(),n=this.syncController_.getExpiredTime(t,this.duration()),n===null||(e=oc.Playlist.seekable(t,n,oc.Playlist.liveEdgeDelay(i,t)),e.length===0)))return;let a,o;if(this.seekable_&&this.seekable_.length&&(a=this.seekable_.end(0),o=this.seekable_.start(0)),e?e.start(0)>s.end(0)||s.start(0)>e.end(0)?this.seekable_=s:this.seekable_=vs([[e.start(0)>s.start(0)?e.start(0):s.start(0),e.end(0)<s.end(0)?e.end(0):s.end(0)]]):this.seekable_=s,this.seekable_&&this.seekable_.length&&this.seekable_.end(0)===a&&this.seekable_.start(0)===o)return;this.logger_(`seekable updated [${q5(this.seekable_)}]`);const l={seekableRanges:this.seekable_};this.trigger({type:"seekablerangeschanged",metadata:l}),this.tech_.trigger("seekablechanged")}updateDuration(e){if(this.updateDuration_&&(this.mediaSource.removeEventListener("sourceopen",this.updateDuration_),this.updateDuration_=null),this.mediaSource.readyState!=="open"){this.updateDuration_=this.updateDuration.bind(this,e),this.mediaSource.addEventListener("sourceopen",this.updateDuration_);return}if(e){const i=this.seekable();if(!i.length)return;(isNaN(this.mediaSource.duration)||this.mediaSource.duration<i.end(i.length-1))&&this.sourceUpdater_.setDuration(i.end(i.length-1));return}const t=this.tech_.buffered();let n=oc.Playlist.duration(this.mainPlaylistLoader_.media());t.length>0&&(n=Math.max(n,t.end(t.length-1))),this.mediaSource.duration!==n&&this.sourceUpdater_.setDuration(n)}dispose(){this.trigger("dispose"),this.decrypter_.terminate(),this.mainPlaylistLoader_.dispose(),this.mainSegmentLoader_.dispose(),this.contentSteeringController_.dispose(),this.keyStatusMap_.clear(),this.loadOnPlay_&&this.tech_.off("play",this.loadOnPlay_),["AUDIO","SUBTITLES"].forEach(e=>{const t=this.mediaTypes_[e].groups;for(const n in t)t[n].forEach(i=>{i.playlistLoader&&i.playlistLoader.dispose()})}),this.audioSegmentLoader_.dispose(),this.subtitleSegmentLoader_.dispose(),this.sourceUpdater_.dispose(),this.timelineChangeController_.dispose(),this.stopABRTimer_(),this.updateDuration_&&this.mediaSource.removeEventListener("sourceopen",this.updateDuration_),this.mediaSource.removeEventListener("durationchange",this.handleDurationChange_),this.mediaSource.removeEventListener("sourceopen",this.handleSourceOpen_),this.mediaSource.removeEventListener("sourceended",this.handleSourceEnded_),this.off()}main(){return this.mainPlaylistLoader_.main}media(){return this.mainPlaylistLoader_.media()||this.initialMedia_}areMediaTypesKnown_(){const e=!!this.mediaTypes_.AUDIO.activePlaylistLoader,t=!!this.mainSegmentLoader_.getCurrentMediaInfo_(),n=e?!!this.audioSegmentLoader_.getCurrentMediaInfo_():!0;return!(!t||!n)}getCodecsOrExclude_(){const e={main:this.mainSegmentLoader_.getCurrentMediaInfo_()||{},audio:this.audioSegmentLoader_.getCurrentMediaInfo_()||{}},t=this.mainSegmentLoader_.getPendingSegmentPlaylist()||this.media();e.video=e.main;const n=I0(this.main(),t),i={},s=!!this.mediaTypes_.AUDIO.activePlaylistLoader;if(e.main.hasVideo&&(i.video=n.video||e.main.videoCodec||uN),e.main.isMuxed&&(i.video+=`,${n.audio||e.main.audioCodec||tx}`),(e.main.hasAudio&&!e.main.isMuxed||e.audio.hasAudio||s)&&(i.audio=n.audio||e.main.audioCodec||e.audio.audioCodec||tx,e.audio.isFmp4=e.main.hasAudio&&!e.main.isMuxed?e.main.isFmp4:e.audio.isFmp4),!i.audio&&!i.video){this.excludePlaylist({playlistToExclude:t,error:{message:"Could not determine codecs for playlist."},playlistExclusionDuration:1/0});return}const a=(u,c)=>u?bu(c):ap(c),o={};let l;if(["video","audio"].forEach(function(u){if(i.hasOwnProperty(u)&&!a(e[u].isFmp4,i[u])){const c=e[u].isFmp4?"browser":"muxer";o[c]=o[c]||[],o[c].push(i[u]),u==="audio"&&(l=c)}}),s&&l&&t.attributes.AUDIO){const u=t.attributes.AUDIO;this.main().playlists.forEach(c=>{(c.attributes&&c.attributes.AUDIO)===u&&c!==t&&(c.excludeUntil=1/0)}),this.logger_(`excluding audio group ${u} as ${l} does not support codec(s): "${i.audio}"`)}if(Object.keys(o).length){const u=Object.keys(o).reduce((c,h)=>(c&&(c+=", "),c+=`${h} does not support codec(s): "${o[h].join(",")}"`,c),"")+".";this.excludePlaylist({playlistToExclude:t,error:{internal:!0,message:u},playlistExclusionDuration:1/0});return}if(this.sourceUpdater_.hasCreatedSourceBuffers()&&!this.sourceUpdater_.canChangeType()){const u=[];if(["video","audio"].forEach(c=>{const h=(Mi(this.sourceUpdater_.codecs[c]||"")[0]||{}).type,m=(Mi(i[c]||"")[0]||{}).type;h&&m&&h.toLowerCase()!==m.toLowerCase()&&u.push(`"${this.sourceUpdater_.codecs[c]}" -> "${i[c]}"`)}),u.length){this.excludePlaylist({playlistToExclude:t,error:{message:`Codec switching not supported: ${u.join(", ")}.`,internal:!0},playlistExclusionDuration:1/0});return}}return i}tryToCreateSourceBuffers_(){if(this.mediaSource.readyState!=="open"||this.sourceUpdater_.hasCreatedSourceBuffers()||!this.areMediaTypesKnown_())return;const e=this.getCodecsOrExclude_();if(!e)return;this.sourceUpdater_.createSourceBuffers(e);const t=[e.video,e.audio].filter(Boolean).join(",");this.excludeIncompatibleVariants_(t)}excludeUnsupportedVariants_(){const e=this.main().playlists,t=[];Object.keys(e).forEach(n=>{const i=e[n];if(t.indexOf(i.id)!==-1)return;t.push(i.id);const s=I0(this.main,i),a=[];s.audio&&!ap(s.audio)&&!bu(s.audio)&&a.push(`audio codec ${s.audio}`),s.video&&!ap(s.video)&&!bu(s.video)&&a.push(`video codec ${s.video}`),s.text&&s.text==="stpp.ttml.im1t"&&a.push(`text codec ${s.text}`),a.length&&(i.excludeUntil=1/0,this.logger_(`excluding ${i.id} for unsupported: ${a.join(", ")}`))})}excludeIncompatibleVariants_(e){const t=[],n=this.main().playlists,i=_x(Mi(e)),s=dM(i),a=i.video&&Mi(i.video)[0]||null,o=i.audio&&Mi(i.audio)[0]||null;Object.keys(n).forEach(l=>{const u=n[l];if(t.indexOf(u.id)!==-1||u.excludeUntil===1/0)return;t.push(u.id);const c=[],h=I0(this.mainPlaylistLoader_.main,u),m=dM(h);if(!(!h.audio&&!h.video)){if(m!==s&&c.push(`codec count "${m}" !== "${s}"`),!this.sourceUpdater_.canChangeType()){const g=h.video&&Mi(h.video)[0]||null,y=h.audio&&Mi(h.audio)[0]||null;g&&a&&g.type.toLowerCase()!==a.type.toLowerCase()&&c.push(`video codec "${g.type}" !== "${a.type}"`),y&&o&&y.type.toLowerCase()!==o.type.toLowerCase()&&c.push(`audio codec "${y.type}" !== "${o.type}"`)}c.length&&(u.excludeUntil=1/0,this.logger_(`excluding ${u.id}: ${c.join(" && ")}`))}})}updateAdCues_(e){let t=0;const n=this.seekable();n.length&&(t=n.start(0)),fce(e,this.cueTagsTrack_,t)}goalBufferLength(){const e=this.tech_.currentTime(),t=Xi.GOAL_BUFFER_LENGTH,n=Xi.GOAL_BUFFER_LENGTH_RATE,i=Math.max(t,Xi.MAX_GOAL_BUFFER_LENGTH);return Math.min(t+e*n,i)}bufferLowWaterLine(){const e=this.tech_.currentTime(),t=Xi.BUFFER_LOW_WATER_LINE,n=Xi.BUFFER_LOW_WATER_LINE_RATE,i=Math.max(t,Xi.MAX_BUFFER_LOW_WATER_LINE),s=Math.max(t,Xi.EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE);return Math.min(t+e*n,this.bufferBasedABR?s:i)}bufferHighWaterLine(){return Xi.BUFFER_HIGH_WATER_LINE}addDateRangesToTextTrack_(e){pM(this.inbandTextTracks_,"com.apple.streaming",this.tech_),Wue({inbandTextTracks:this.inbandTextTracks_,dateRanges:e})}addMetadataToTextTrack(e,t,n){const i=this.sourceUpdater_.videoBuffer?this.sourceUpdater_.videoTimestampOffset():this.sourceUpdater_.audioTimestampOffset();pM(this.inbandTextTracks_,e,this.tech_),zue({inbandTextTracks:this.inbandTextTracks_,metadataArray:t,timestampOffset:i,videoDuration:n})}pathwayAttribute_(e){return e.attributes["PATHWAY-ID"]||e.attributes.serviceLocation}initContentSteeringController_(){const e=this.main();if(e.contentSteering){for(const t of e.playlists)this.contentSteeringController_.addAvailablePathway(this.pathwayAttribute_(t));if(this.contentSteeringController_.assignTagProperties(e.uri,e.contentSteering),this.contentSteeringController_.queryBeforeStart){this.contentSteeringController_.requestSteeringManifest(!0);return}this.tech_.one("canplay",()=>{this.contentSteeringController_.requestSteeringManifest()})}}resetContentSteeringController_(){this.contentSteeringController_.clearAvailablePathways(),this.contentSteeringController_.dispose(),this.initContentSteeringController_()}attachContentSteeringListeners_(){this.contentSteeringController_.on("content-steering",this.excludeThenChangePathway_.bind(this)),["contentsteeringloadstart","contentsteeringloadcomplete","contentsteeringparsed"].forEach(t=>{this.contentSteeringController_.on(t,n=>{this.trigger(tr({},n))})}),this.sourceType_==="dash"&&this.mainPlaylistLoader_.on("loadedplaylist",()=>{const t=this.main();(this.contentSteeringController_.didDASHTagChange(t.uri,t.contentSteering)||(()=>{const s=this.contentSteeringController_.getAvailablePathways(),a=[];for(const o of t.playlists){const l=o.attributes.serviceLocation;if(l&&(a.push(l),!s.has(l)))return!0}return!!(!a.length&&s.size)})())&&this.resetContentSteeringController_()})}excludeThenChangePathway_(){const e=this.contentSteeringController_.getPathway();if(!e)return;this.handlePathwayClones_();const n=this.main().playlists,i=new Set;let s=!1;Object.keys(n).forEach(a=>{const o=n[a],l=this.pathwayAttribute_(o),u=l&&e!==l;o.excludeUntil===1/0&&o.lastExcludeReason_==="content-steering"&&!u&&(delete o.excludeUntil,delete o.lastExcludeReason_,s=!0);const h=!o.excludeUntil&&o.excludeUntil!==1/0;!i.has(o.id)&&u&&h&&(i.add(o.id),o.excludeUntil=1/0,o.lastExcludeReason_="content-steering",this.logger_(`excluding ${o.id} for ${o.lastExcludeReason_}`))}),this.contentSteeringController_.manifestType_==="DASH"&&Object.keys(this.mediaTypes_).forEach(a=>{const o=this.mediaTypes_[a];if(o.activePlaylistLoader){const l=o.activePlaylistLoader.media_;l&&l.attributes.serviceLocation!==e&&(s=!0)}}),s&&this.changeSegmentPathway_()}handlePathwayClones_(){const t=this.main().playlists,n=this.contentSteeringController_.currentPathwayClones,i=this.contentSteeringController_.nextPathwayClones;if(n&&n.size||i&&i.size){for(const[a,o]of n.entries())i.get(a)||(this.mainPlaylistLoader_.updateOrDeleteClone(o),this.contentSteeringController_.excludePathway(a));for(const[a,o]of i.entries()){const l=n.get(a);if(!l){t.filter(c=>c.attributes["PATHWAY-ID"]===o["BASE-ID"]).forEach(c=>{this.mainPlaylistLoader_.addClonePathway(o,c)}),this.contentSteeringController_.addAvailablePathway(a);continue}this.equalPathwayClones_(l,o)||(this.mainPlaylistLoader_.updateOrDeleteClone(o,!0),this.contentSteeringController_.addAvailablePathway(a))}this.contentSteeringController_.currentPathwayClones=new Map(JSON.parse(JSON.stringify([...i])))}}equalPathwayClones_(e,t){if(e["BASE-ID"]!==t["BASE-ID"]||e.ID!==t.ID||e["URI-REPLACEMENT"].HOST!==t["URI-REPLACEMENT"].HOST)return!1;const n=e["URI-REPLACEMENT"].PARAMS,i=t["URI-REPLACEMENT"].PARAMS;for(const s in n)if(n[s]!==i[s])return!1;for(const s in i)if(n[s]!==i[s])return!1;return!0}changeSegmentPathway_(){const e=this.selectPlaylist();this.pauseLoading(),this.contentSteeringController_.manifestType_==="DASH"&&this.switchMediaForDASHContentSteering_(),this.switchMedia_(e,"content-steering")}excludeNonUsablePlaylistsByKeyId_(){if(!this.mainPlaylistLoader_||!this.mainPlaylistLoader_.main)return;let e=0;const t="non-usable";this.mainPlaylistLoader_.main.playlists.forEach(n=>{const i=this.mainPlaylistLoader_.getKeyIdSet(n);!i||!i.size||i.forEach(s=>{const a="usable",o=this.keyStatusMap_.has(s)&&this.keyStatusMap_.get(s)===a,l=n.lastExcludeReason_===t&&n.excludeUntil===1/0;o?o&&l&&(delete n.excludeUntil,delete n.lastExcludeReason_,this.logger_(`enabling playlist ${n.id} because key ID ${s} is ${a}`)):(n.excludeUntil!==1/0&&n.lastExcludeReason_!==t&&(n.excludeUntil=1/0,n.lastExcludeReason_=t,this.logger_(`excluding playlist ${n.id} because the key ID ${s} doesn't exist in the keyStatusMap or is not ${a}`)),e++)})}),e>=this.mainPlaylistLoader_.main.playlists.length&&this.mainPlaylistLoader_.main.playlists.forEach(n=>{const i=n&&n.attributes&&n.attributes.RESOLUTION&&n.attributes.RESOLUTION.height<720,s=n.excludeUntil===1/0&&n.lastExcludeReason_===t;i&&s&&(delete n.excludeUntil,Se.log.warn(`enabling non-HD playlist ${n.id} because all playlists were excluded due to ${t} key IDs`))})}addKeyStatus_(e,t){const s=(typeof e=="string"?e:uce(e)).slice(0,32).toLowerCase();this.logger_(`KeyStatus '${t}' with key ID ${s} added to the keyStatusMap`),this.keyStatusMap_.set(s,t)}updatePlaylistByKeyStatus(e,t){this.addKeyStatus_(e,t),this.waitingForFastQualityPlaylistReceived_||this.excludeNonUsableThenChangePlaylist_(),this.mainPlaylistLoader_.off("loadedplaylist",this.excludeNonUsableThenChangePlaylist_.bind(this)),this.mainPlaylistLoader_.on("loadedplaylist",this.excludeNonUsableThenChangePlaylist_.bind(this))}excludeNonUsableThenChangePlaylist_(){this.excludeNonUsablePlaylistsByKeyId_(),this.fastQualityChange_()}};const Fce=(r,e,t)=>n=>{const i=r.main.playlists[e],s=xk(i),a=nS(i);if(typeof n>"u")return a;n?delete i.disabled:i.disabled=!0;const o={renditionInfo:{id:e,bandwidth:i.attributes.BANDWIDTH,resolution:i.attributes.RESOLUTION,codecs:i.attributes.CODECS},cause:"fast-quality"};return n!==a&&!s&&(t(i),n?r.trigger({type:"renditionenabled",metadata:o}):r.trigger({type:"renditiondisabled",metadata:o})),n};let Bce=class{constructor(e,t,n){const{playlistController_:i}=e,s=i.fastQualityChange_.bind(i);if(t.attributes){const a=t.attributes.RESOLUTION;this.width=a&&a.width,this.height=a&&a.height,this.bandwidth=t.attributes.BANDWIDTH,this.frameRate=t.attributes["FRAME-RATE"]}this.codecs=I0(i.main(),t),this.playlist=t,this.id=n,this.enabled=Fce(e.playlists,t.id,s)}};const Nce=function(r){r.representations=()=>{const e=r.playlistController_.main(),t=Ng(e)?r.playlistController_.getAudioTrackPlaylists_():e.playlists;return t?t.filter(n=>!xk(n)).map((n,i)=>new Bce(r,n,n.id)):[]}},wM=["seeking","seeked","pause","playing","error"];let Uce=class extends Se.EventTarget{constructor(e){super(),this.playlistController_=e.playlistController,this.tech_=e.tech,this.seekable=e.seekable,this.allowSeeksWithinUnsafeLiveWindow=e.allowSeeksWithinUnsafeLiveWindow,this.liveRangeSafeTimeDelta=e.liveRangeSafeTimeDelta,this.media=e.media,this.playedRanges_=[],this.consecutiveUpdates=0,this.lastRecordedTime=null,this.checkCurrentTimeTimeout_=null,this.logger_=el("PlaybackWatcher"),this.logger_("initialize");const t=()=>this.monitorCurrentTime_(),n=()=>this.monitorCurrentTime_(),i=()=>this.techWaiting_(),s=()=>this.resetTimeUpdate_(),a=this.playlistController_,o=["main","subtitle","audio"],l={};o.forEach(c=>{l[c]={reset:()=>this.resetSegmentDownloads_(c),updateend:()=>this.checkSegmentDownloads_(c)},a[`${c}SegmentLoader_`].on("appendsdone",l[c].updateend),a[`${c}SegmentLoader_`].on("playlistupdate",l[c].reset),this.tech_.on(["seeked","seeking"],l[c].reset)});const u=c=>{["main","audio"].forEach(h=>{a[`${h}SegmentLoader_`][c]("appended",this.seekingAppendCheck_)})};this.seekingAppendCheck_=()=>{this.fixesBadSeeks_()&&(this.consecutiveUpdates=0,this.lastRecordedTime=this.tech_.currentTime(),u("off"))},this.clearSeekingAppendCheck_=()=>u("off"),this.watchForBadSeeking_=()=>{this.clearSeekingAppendCheck_(),u("on")},this.tech_.on("seeked",this.clearSeekingAppendCheck_),this.tech_.on("seeking",this.watchForBadSeeking_),this.tech_.on("waiting",i),this.tech_.on(wM,s),this.tech_.on("canplay",n),this.tech_.one("play",t),this.dispose=()=>{this.clearSeekingAppendCheck_(),this.logger_("dispose"),this.tech_.off("waiting",i),this.tech_.off(wM,s),this.tech_.off("canplay",n),this.tech_.off("play",t),this.tech_.off("seeking",this.watchForBadSeeking_),this.tech_.off("seeked",this.clearSeekingAppendCheck_),o.forEach(c=>{a[`${c}SegmentLoader_`].off("appendsdone",l[c].updateend),a[`${c}SegmentLoader_`].off("playlistupdate",l[c].reset),this.tech_.off(["seeked","seeking"],l[c].reset)}),this.checkCurrentTimeTimeout_&&X.clearTimeout(this.checkCurrentTimeTimeout_),this.resetTimeUpdate_()}}monitorCurrentTime_(){this.checkCurrentTime_(),this.checkCurrentTimeTimeout_&&X.clearTimeout(this.checkCurrentTimeTimeout_),this.checkCurrentTimeTimeout_=X.setTimeout(this.monitorCurrentTime_.bind(this),250)}resetSegmentDownloads_(e){const t=this.playlistController_[`${e}SegmentLoader_`];this[`${e}StalledDownloads_`]>0&&this.logger_(`resetting possible stalled download count for ${e} loader`),this[`${e}StalledDownloads_`]=0,this[`${e}Buffered_`]=t.buffered_()}checkSegmentDownloads_(e){const t=this.playlistController_,n=t[`${e}SegmentLoader_`],i=n.buffered_(),s=wle(this[`${e}Buffered_`],i);if(this[`${e}Buffered_`]=i,s){const a={bufferedRanges:i};t.trigger({type:"bufferedrangeschanged",metadata:a}),this.resetSegmentDownloads_(e);return}this[`${e}StalledDownloads_`]++,this.logger_(`found #${this[`${e}StalledDownloads_`]} ${e} appends that did not increase buffer (possible stalled download)`,{playlistId:n.playlist_&&n.playlist_.id,buffered:Eh(i)}),!(this[`${e}StalledDownloads_`]<10)&&(this.logger_(`${e} loader stalled download exclusion`),this.resetSegmentDownloads_(e),this.tech_.trigger({type:"usage",name:`vhs-${e}-download-exclusion`}),e!=="subtitle"&&t.excludePlaylist({error:{message:`Excessive ${e} segment downloading detected.`},playlistExclusionDuration:1/0}))}checkCurrentTime_(){if(this.tech_.paused()||this.tech_.seeking())return;const e=this.tech_.currentTime(),t=this.tech_.buffered();if(this.lastRecordedTime===e&&(!t.length||e+cu>=t.end(t.length-1)))return this.techWaiting_();if(this.consecutiveUpdates>=5&&e===this.lastRecordedTime)this.consecutiveUpdates++,this.waiting_();else if(e===this.lastRecordedTime)this.consecutiveUpdates++;else{this.playedRanges_.push(vs([this.lastRecordedTime,e]));const n={playedRanges:this.playedRanges_};this.playlistController_.trigger({type:"playedrangeschanged",metadata:n}),this.consecutiveUpdates=0,this.lastRecordedTime=e}}resetTimeUpdate_(){this.consecutiveUpdates=0}fixesBadSeeks_(){if(!this.tech_.seeking())return!1;const t=this.seekable(),n=this.tech_.currentTime(),i=this.afterSeekableWindow_(t,n,this.media(),this.allowSeeksWithinUnsafeLiveWindow);let s;if(i&&(s=t.end(t.length-1)),this.beforeSeekableWindow_(t,n)){const y=t.start(0);s=y+(y===t.end(0)?0:cu)}if(typeof s<"u")return this.logger_(`Trying to seek outside of seekable at time ${n} with seekable range ${q5(t)}. Seeking to ${s}.`),this.tech_.setCurrentTime(s),!0;const a=this.playlistController_.sourceUpdater_,o=this.tech_.buffered(),l=a.audioBuffer?a.audioBuffered():null,u=a.videoBuffer?a.videoBuffered():null,c=this.media(),h=c.partTargetDuration?c.partTargetDuration:(c.targetDuration-uu)*2,m=[l,u];for(let y=0;y<m.length;y++){if(!m[y])continue;if(yk(m[y],n)<h)return!1}const g=ry(o,n);return g.length===0?!1:(s=g.start(0)+cu,this.logger_(`Buffered region starts (${g.start(0)})  just beyond seek point (${n}). Seeking to ${s}.`),this.tech_.setCurrentTime(s),!0)}waiting_(){if(this.techWaiting_())return;const e=this.tech_.currentTime(),t=this.tech_.buffered(),n=Gf(t,e);if(n.length&&e+3<=n.end(0)){this.resetTimeUpdate_(),this.tech_.setCurrentTime(e),this.logger_(`Stopped at ${e} while inside a buffered region [${n.start(0)} -> ${n.end(0)}]. Attempting to resume playback by seeking to the current time.`),this.tech_.trigger({type:"usage",name:"vhs-unknown-waiting"});return}}techWaiting_(){const e=this.seekable(),t=this.tech_.currentTime();if(this.tech_.seeking())return!0;if(this.beforeSeekableWindow_(e,t)){const o=e.end(e.length-1);return this.logger_(`Fell out of live window at time ${t}. Seeking to live point (seekable end) ${o}`),this.resetTimeUpdate_(),this.tech_.setCurrentTime(o),this.tech_.trigger({type:"usage",name:"vhs-live-resync"}),!0}const n=this.tech_.vhs.playlistController_.sourceUpdater_,i=this.tech_.buffered();if(this.videoUnderflow_({audioBuffered:n.audioBuffered(),videoBuffered:n.videoBuffered(),currentTime:t}))return this.resetTimeUpdate_(),this.tech_.setCurrentTime(t),this.tech_.trigger({type:"usage",name:"vhs-video-underflow"}),!0;const a=ry(i,t);return a.length>0?(this.logger_(`Stopped at ${t} and seeking to ${a.start(0)}`),this.resetTimeUpdate_(),this.skipTheGap_(t),!0):!1}afterSeekableWindow_(e,t,n,i=!1){if(!e.length)return!1;let s=e.end(e.length-1)+cu;const a=!n.endList,o=typeof n.partTargetDuration=="number";return a&&(o||i)&&(s=e.end(e.length-1)+n.targetDuration*3),t>s}beforeSeekableWindow_(e,t){return!!(e.length&&e.start(0)>0&&t<e.start(0)-this.liveRangeSafeTimeDelta)}videoUnderflow_({videoBuffered:e,audioBuffered:t,currentTime:n}){if(!e)return;let i;if(e.length&&t.length){const s=Gf(e,n-3),a=Gf(e,n),o=Gf(t,n);o.length&&!a.length&&s.length&&(i={start:s.end(0),end:o.end(0)})}else ry(e,n).length||(i=this.gapFromVideoUnderflow_(e,n));return i?(this.logger_(`Encountered a gap in video from ${i.start} to ${i.end}. Seeking to current time ${n}`),!0):!1}skipTheGap_(e){const t=this.tech_.buffered(),n=this.tech_.currentTime(),i=ry(t,n);if(this.resetTimeUpdate_(),i.length===0||n!==e)return;this.logger_("skipTheGap_:","currentTime:",n,"scheduled currentTime:",e,"nextRange start:",i.start(0)),this.tech_.setCurrentTime(i.start(0)+uu);const s={gapInfo:{from:n,to:i.start(0)}};this.playlistController_.trigger({type:"gapjumped",metadata:s}),this.tech_.trigger({type:"usage",name:"vhs-gap-skip"})}gapFromVideoUnderflow_(e,t){const n=Sle(e);for(let i=0;i<n.length;i++){const s=n.start(i),a=n.end(i);if(t-s<4&&t-s>2)return{start:s,end:a}}return null}};const $ce={errorInterval:30,getSource(r){const t=this.tech({IWillNotUseThisInPlugins:!0}).currentSource_||this.currentSource();return r(t)}},M6=function(r,e){let t=0,n=0;const i=Cn($ce,e);r.ready(()=>{r.trigger({type:"usage",name:"vhs-error-reload-initialized"})});const s=function(){n&&r.currentTime(n)},a=function(c){c!=null&&(n=r.duration()!==1/0&&r.currentTime()||0,r.one("loadedmetadata",s),r.src(c),r.trigger({type:"usage",name:"vhs-error-reload"}),r.play())},o=function(){if(Date.now()-t<i.errorInterval*1e3){r.trigger({type:"usage",name:"vhs-error-reload-canceled"});return}if(!i.getSource||typeof i.getSource!="function"){Se.log.error("ERROR: reloadSourceOnError - The option getSource must be a function!");return}return t=Date.now(),i.getSource.call(r,a)},l=function(){r.off("loadedmetadata",s),r.off("error",o),r.off("dispose",l)},u=function(c){l(),M6(r,c)};r.on("error",o),r.on("dispose",l),r.reloadSourceOnError=u},jce=function(r){M6(this,r)};var F6="3.15.0",zce="7.0.3",Hce="1.3.1",Vce="7.2.0",Wce="4.0.2";const ti={PlaylistLoader:Kf,Playlist:La,utils:Xle,STANDARD_PLAYLIST_SELECTOR:fM,INITIAL_PLAYLIST_SELECTOR:Bue,lastBandwidthSelector:fM,movingAverageBandwidthSelector:Mue,comparePlaylistBandwidth:Tk,comparePlaylistResolution:Oue,xhr:u6()};Object.keys(Xi).forEach(r=>{Object.defineProperty(ti,r,{get(){return Se.log.warn(`using Vhs.${r} is UNSAFE be sure you know what you are doing`),Xi[r]},set(e){if(Se.log.warn(`using Vhs.${r} is UNSAFE be sure you know what you are doing`),typeof e!="number"||e<0){Se.log.warn(`value of Vhs.${r} must be greater than or equal to 0`);return}Xi[r]=e}})});const B6="videojs-vhs",N6=function(r,e){const t=e.media();let n=-1;for(let i=0;i<r.length;i++)if(r[i].id===t.id){n=i;break}r.selectedIndex_=n,r.trigger({selectedIndex:n,type:"change"})},qce=function(r,e){e.representations().forEach(t=>{r.addQualityLevel(t)}),N6(r,e.playlists)};ti.canPlaySource=function(){return Se.log.warn("VHS is no longer a tech. Please remove it from your player's techOrder.")};const Gce=(r,e,t)=>{if(!r)return r;let n={};e&&e.attributes&&e.attributes.CODECS&&(n=_x(Mi(e.attributes.CODECS))),t&&t.attributes&&t.attributes.CODECS&&(n.audio=t.attributes.CODECS);const i=Eu(n.video),s=Eu(n.audio),a={};for(const o in r)a[o]={},s&&(a[o].audioContentType=s),i&&(a[o].videoContentType=i),e.contentProtection&&e.contentProtection[o]&&e.contentProtection[o].pssh&&(a[o].pssh=e.contentProtection[o].pssh),typeof r[o]=="string"&&(a[o].url=r[o]);return Cn(r,a)},Kce=(r,e)=>r.reduce((t,n)=>{if(!n.contentProtection)return t;const i=e.reduce((s,a)=>{const o=n.contentProtection[a];return o&&o.pssh&&(s[a]={pssh:o.pssh}),s},{});return Object.keys(i).length&&t.push(i),t},[]),Xce=({player:r,sourceKeySystems:e,audioMedia:t,mainPlaylists:n})=>{if(!r.eme.initializeMediaKeys)return Promise.resolve();const i=t?n.concat([t]):n,s=Kce(i,Object.keys(e)),a=[],o=[];return s.forEach(l=>{o.push(new Promise((u,c)=>{r.tech_.one("keysessioncreated",u)})),a.push(new Promise((u,c)=>{r.eme.initializeMediaKeys({keySystems:l},h=>{if(h){c(h);return}u()})}))}),Promise.race([Promise.all(a),Promise.race(o)])},Yce=({player:r,sourceKeySystems:e,media:t,audioMedia:n})=>{const i=Gce(e,t,n);return i?(r.currentSource().keySystems=i,i&&!r.eme?(Se.log.warn("DRM encrypted source cannot be decrypted without a DRM plugin"),!1):!0):!1},U6=()=>{if(!X.localStorage)return null;const r=X.localStorage.getItem(B6);if(!r)return null;try{return JSON.parse(r)}catch{return null}},Qce=r=>{if(!X.localStorage)return!1;let e=U6();e=e?Cn(e,r):r;try{X.localStorage.setItem(B6,JSON.stringify(e))}catch{return!1}return e},Jce=r=>r.toLowerCase().indexOf("data:application/vnd.videojs.vhs+json,")===0?JSON.parse(r.substring(r.indexOf(",")+1)):r,$6=(r,e)=>{r._requestCallbackSet||(r._requestCallbackSet=new Set),r._requestCallbackSet.add(e)},j6=(r,e)=>{r._responseCallbackSet||(r._responseCallbackSet=new Set),r._responseCallbackSet.add(e)},z6=(r,e)=>{r._requestCallbackSet&&(r._requestCallbackSet.delete(e),r._requestCallbackSet.size||delete r._requestCallbackSet)},H6=(r,e)=>{r._responseCallbackSet&&(r._responseCallbackSet.delete(e),r._responseCallbackSet.size||delete r._responseCallbackSet)};ti.supportsNativeHls=(function(){if(!Fe||!Fe.createElement)return!1;const r=Fe.createElement("video");return Se.getTech("Html5").isSupported()?["application/vnd.apple.mpegurl","audio/mpegurl","audio/x-mpegurl","application/x-mpegurl","video/x-mpegurl","video/mpegurl","application/mpegurl"].some(function(t){return/maybe|probably/i.test(r.canPlayType(t))}):!1})();ti.supportsNativeDash=(function(){return!Fe||!Fe.createElement||!Se.getTech("Html5").isSupported()?!1:/maybe|probably/i.test(Fe.createElement("video").canPlayType("application/dash+xml"))})();ti.supportsTypeNatively=r=>r==="hls"?ti.supportsNativeHls:r==="dash"?ti.supportsNativeDash:!1;ti.isSupported=function(){return Se.log.warn("VHS is no longer a tech. Please remove it from your player's techOrder.")};ti.xhr.onRequest=function(r){$6(ti.xhr,r)};ti.xhr.onResponse=function(r){j6(ti.xhr,r)};ti.xhr.offRequest=function(r){z6(ti.xhr,r)};ti.xhr.offResponse=function(r){H6(ti.xhr,r)};const Zce=Se.getComponent("Component");let V6=class extends Zce{constructor(e,t,n){if(super(t,n.vhs),typeof n.initialBandwidth=="number"&&(this.options_.bandwidth=n.initialBandwidth),this.logger_=el("VhsHandler"),t.options_&&t.options_.playerId){const i=Se.getPlayer(t.options_.playerId);this.player_=i}if(this.tech_=t,this.source_=e,this.stats={},this.ignoreNextSeekingEvent_=!1,this.setOptions_(),this.options_.overrideNative&&t.overrideNativeAudioTracks&&t.overrideNativeVideoTracks)t.overrideNativeAudioTracks(!0),t.overrideNativeVideoTracks(!0);else if(this.options_.overrideNative&&(t.featuresNativeVideoTracks||t.featuresNativeAudioTracks))throw new Error("Overriding native VHS requires emulated tracks. See https://git.io/vMpjB");this.on(Fe,["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","MSFullscreenChange"],i=>{const s=Fe.fullscreenElement||Fe.webkitFullscreenElement||Fe.mozFullScreenElement||Fe.msFullscreenElement;s&&s.contains(this.tech_.el())?this.playlistController_.fastQualityChange_():this.playlistController_.checkABR_()}),this.on(this.tech_,"seeking",function(){if(this.ignoreNextSeekingEvent_){this.ignoreNextSeekingEvent_=!1;return}this.setCurrentTime(this.tech_.currentTime())}),this.on(this.tech_,"error",function(){this.tech_.error()&&this.playlistController_&&this.playlistController_.pauseLoading()}),this.on(this.tech_,"play",this.play)}setOptions_(e={}){if(this.options_=Cn(this.options_,e),this.options_.withCredentials=this.options_.withCredentials||!1,this.options_.limitRenditionByPlayerDimensions=this.options_.limitRenditionByPlayerDimensions!==!1,this.options_.useDevicePixelRatio=this.options_.useDevicePixelRatio||!1,this.options_.useBandwidthFromLocalStorage=typeof this.source_.useBandwidthFromLocalStorage<"u"?this.source_.useBandwidthFromLocalStorage:this.options_.useBandwidthFromLocalStorage||!1,this.options_.useForcedSubtitles=this.options_.useForcedSubtitles||!1,this.options_.useNetworkInformationApi=this.options_.useNetworkInformationApi||!1,this.options_.useDtsForTimestampOffset=this.options_.useDtsForTimestampOffset||!1,this.options_.customTagParsers=this.options_.customTagParsers||[],this.options_.customTagMappers=this.options_.customTagMappers||[],this.options_.cacheEncryptionKeys=this.options_.cacheEncryptionKeys||!1,this.options_.llhls=this.options_.llhls!==!1,this.options_.bufferBasedABR=this.options_.bufferBasedABR||!1,typeof this.options_.playlistExclusionDuration!="number"&&(this.options_.playlistExclusionDuration=60),typeof this.options_.bandwidth!="number"&&this.options_.useBandwidthFromLocalStorage){const n=U6();n&&n.bandwidth&&(this.options_.bandwidth=n.bandwidth,this.tech_.trigger({type:"usage",name:"vhs-bandwidth-from-local-storage"})),n&&n.throughput&&(this.options_.throughput=n.throughput,this.tech_.trigger({type:"usage",name:"vhs-throughput-from-local-storage"}))}typeof this.options_.bandwidth!="number"&&(this.options_.bandwidth=Xi.INITIAL_BANDWIDTH),this.options_.enableLowInitialPlaylist=this.options_.enableLowInitialPlaylist&&this.options_.bandwidth===Xi.INITIAL_BANDWIDTH,["withCredentials","useDevicePixelRatio","customPixelRatio","limitRenditionByPlayerDimensions","bandwidth","customTagParsers","customTagMappers","cacheEncryptionKeys","playlistSelector","initialPlaylistSelector","bufferBasedABR","liveRangeSafeTimeDelta","llhls","useForcedSubtitles","useNetworkInformationApi","useDtsForTimestampOffset","exactManifestTimings","leastPixelDiffSelector"].forEach(n=>{typeof this.source_[n]<"u"&&(this.options_[n]=this.source_[n])}),this.limitRenditionByPlayerDimensions=this.options_.limitRenditionByPlayerDimensions,this.useDevicePixelRatio=this.options_.useDevicePixelRatio;const t=this.options_.customPixelRatio;typeof t=="number"&&t>=0&&(this.customPixelRatio=t)}setOptions(e={}){this.setOptions_(e)}src(e,t){if(!e)return;this.setOptions_(),this.options_.src=Jce(this.source_.src),this.options_.tech=this.tech_,this.options_.externVhs=ti,this.options_.sourceType=Ub(t),this.options_.seekTo=s=>{this.tech_.setCurrentTime(s)},this.options_.player_=this.player_,this.playlistController_=new Mce(this.options_);const n=Cn({liveRangeSafeTimeDelta:cu},this.options_,{seekable:()=>this.seekable(),media:()=>this.playlistController_.media(),playlistController:this.playlistController_});this.playbackWatcher_=new Uce(n),this.attachStreamingEventListeners_(),this.playlistController_.on("error",()=>{const s=Se.players[this.tech_.options_.playerId];let a=this.playlistController_.error;typeof a=="object"&&!a.code?a.code=3:typeof a=="string"&&(a={message:a,code:3}),s.error(a)});const i=this.options_.bufferBasedABR?ti.movingAverageBandwidthSelector(.55):ti.STANDARD_PLAYLIST_SELECTOR;this.playlistController_.selectPlaylist=this.selectPlaylist?this.selectPlaylist.bind(this):i.bind(this),this.playlistController_.selectInitialPlaylist=ti.INITIAL_PLAYLIST_SELECTOR.bind(this),this.playlists=this.playlistController_.mainPlaylistLoader_,this.mediaSource=this.playlistController_.mediaSource,Object.defineProperties(this,{selectPlaylist:{get(){return this.playlistController_.selectPlaylist},set(s){this.playlistController_.selectPlaylist=s.bind(this)}},throughput:{get(){return this.playlistController_.mainSegmentLoader_.throughput.rate},set(s){this.playlistController_.mainSegmentLoader_.throughput.rate=s,this.playlistController_.mainSegmentLoader_.throughput.count=1}},bandwidth:{get(){let s=this.playlistController_.mainSegmentLoader_.bandwidth;const a=X.navigator.connection||X.navigator.mozConnection||X.navigator.webkitConnection,o=1e7;if(this.options_.useNetworkInformationApi&&a){const l=a.downlink*1e3*1e3;l>=o&&s>=o?s=Math.max(s,l):s=l}return s},set(s){this.playlistController_.mainSegmentLoader_.bandwidth=s,this.playlistController_.mainSegmentLoader_.throughput={rate:0,count:0}}},systemBandwidth:{get(){const s=1/(this.bandwidth||1);let a;return this.throughput>0?a=1/this.throughput:a=0,Math.floor(1/(s+a))},set(){Se.log.error('The "systemBandwidth" property is read-only')}}}),this.options_.bandwidth&&(this.bandwidth=this.options_.bandwidth),this.options_.throughput&&(this.throughput=this.options_.throughput),Object.defineProperties(this.stats,{bandwidth:{get:()=>this.bandwidth||0,enumerable:!0},mediaRequests:{get:()=>this.playlistController_.mediaRequests_()||0,enumerable:!0},mediaRequestsAborted:{get:()=>this.playlistController_.mediaRequestsAborted_()||0,enumerable:!0},mediaRequestsTimedout:{get:()=>this.playlistController_.mediaRequestsTimedout_()||0,enumerable:!0},mediaRequestsErrored:{get:()=>this.playlistController_.mediaRequestsErrored_()||0,enumerable:!0},mediaTransferDuration:{get:()=>this.playlistController_.mediaTransferDuration_()||0,enumerable:!0},mediaBytesTransferred:{get:()=>this.playlistController_.mediaBytesTransferred_()||0,enumerable:!0},mediaSecondsLoaded:{get:()=>this.playlistController_.mediaSecondsLoaded_()||0,enumerable:!0},mediaAppends:{get:()=>this.playlistController_.mediaAppends_()||0,enumerable:!0},mainAppendsToLoadedData:{get:()=>this.playlistController_.mainAppendsToLoadedData_()||0,enumerable:!0},audioAppendsToLoadedData:{get:()=>this.playlistController_.audioAppendsToLoadedData_()||0,enumerable:!0},appendsToLoadedData:{get:()=>this.playlistController_.appendsToLoadedData_()||0,enumerable:!0},timeToLoadedData:{get:()=>this.playlistController_.timeToLoadedData_()||0,enumerable:!0},buffered:{get:()=>Eh(this.tech_.buffered()),enumerable:!0},currentTime:{get:()=>this.tech_.currentTime(),enumerable:!0},currentSource:{get:()=>this.tech_.currentSource_,enumerable:!0},currentTech:{get:()=>this.tech_.name_,enumerable:!0},duration:{get:()=>this.tech_.duration(),enumerable:!0},main:{get:()=>this.playlists.main,enumerable:!0},playerDimensions:{get:()=>this.tech_.currentDimensions(),enumerable:!0},seekable:{get:()=>Eh(this.tech_.seekable()),enumerable:!0},timestamp:{get:()=>Date.now(),enumerable:!0},videoPlaybackQuality:{get:()=>this.tech_.getVideoPlaybackQuality(),enumerable:!0}}),this.tech_.one("canplay",this.playlistController_.setupFirstPlay.bind(this.playlistController_)),this.tech_.on("bandwidthupdate",()=>{this.options_.useBandwidthFromLocalStorage&&Qce({bandwidth:this.bandwidth,throughput:Math.round(this.throughput)})}),this.playlistController_.on("selectedinitialmedia",()=>{Nce(this)}),this.playlistController_.sourceUpdater_.on("createdsourcebuffers",()=>{this.setupEme_()}),this.on(this.playlistController_,"progress",function(){this.tech_.trigger("progress")}),this.on(this.playlistController_,"firstplay",function(){this.ignoreNextSeekingEvent_=!0}),this.setupQualityLevels_(),this.tech_.el()&&(this.mediaSourceUrl_=X.URL.createObjectURL(this.playlistController_.mediaSource),(Se.browser.IS_ANY_SAFARI||Se.browser.IS_IOS)&&this.options_.overrideNative&&this.options_.sourceType==="hls"&&typeof this.tech_.addSourceElement=="function"?(this.tech_.addSourceElement(this.mediaSourceUrl_),this.tech_.addSourceElement(this.source_.src)):this.tech_.src(this.mediaSourceUrl_))}createKeySessions_(){const e=this.playlistController_.mediaTypes_.AUDIO.activePlaylistLoader;this.logger_("waiting for EME key session creation"),Xce({player:this.player_,sourceKeySystems:this.source_.keySystems,audioMedia:e&&e.media(),mainPlaylists:this.playlists.main.playlists}).then(()=>{this.logger_("created EME key session"),this.playlistController_.sourceUpdater_.initializedEme()}).catch(t=>{this.logger_("error while creating EME key session",t),this.player_.error({message:"Failed to initialize media keys for EME",code:3})})}handleWaitingForKey_(){this.logger_("waitingforkey fired, attempting to create any new key sessions"),this.createKeySessions_()}setupEme_(){const e=this.playlistController_.mediaTypes_.AUDIO.activePlaylistLoader,t=Yce({player:this.player_,sourceKeySystems:this.source_.keySystems,media:this.playlists.media(),audioMedia:e&&e.media()});if(this.player_.tech_.on("keystatuschange",n=>{this.playlistController_.updatePlaylistByKeyStatus(n.keyId,n.status)}),this.handleWaitingForKey_=this.handleWaitingForKey_.bind(this),this.player_.tech_.on("waitingforkey",this.handleWaitingForKey_),!t){this.playlistController_.sourceUpdater_.initializedEme();return}this.createKeySessions_()}setupQualityLevels_(){const e=Se.players[this.tech_.options_.playerId];!e||!e.qualityLevels||this.qualityLevels_||(this.qualityLevels_=e.qualityLevels(),this.playlistController_.on("selectedinitialmedia",()=>{qce(this.qualityLevels_,this)}),this.playlists.on("mediachange",()=>{N6(this.qualityLevels_,this.playlists)}))}static version(){return{"@videojs/http-streaming":F6,"mux.js":zce,"mpd-parser":Hce,"m3u8-parser":Vce,"aes-decrypter":Wce}}version(){return this.constructor.version()}canChangeType(){return P6.canChangeType()}play(){this.playlistController_.play()}setCurrentTime(e){this.playlistController_.setCurrentTime(e)}duration(){return this.playlistController_.duration()}seekable(){return this.playlistController_.seekable()}dispose(){this.playbackWatcher_&&this.playbackWatcher_.dispose(),this.playlistController_&&this.playlistController_.dispose(),this.qualityLevels_&&this.qualityLevels_.dispose(),this.tech_&&this.tech_.vhs&&delete this.tech_.vhs,this.mediaSourceUrl_&&X.URL.revokeObjectURL&&(X.URL.revokeObjectURL(this.mediaSourceUrl_),this.mediaSourceUrl_=null),this.tech_&&this.tech_.off("waitingforkey",this.handleWaitingForKey_),super.dispose()}convertToProgramTime(e,t){return rue({playlist:this.playlistController_.media(),time:e,callback:t})}seekToProgramTime(e,t,n=!0,i=2){return p6({programTime:e,playlist:this.playlistController_.media(),retryCount:i,pauseAfterSeek:n,seekTo:this.options_.seekTo,tech:this.options_.tech,callback:t})}setupXhrHooks_(){this.xhr.onRequest=e=>{$6(this.xhr,e)},this.xhr.onResponse=e=>{j6(this.xhr,e)},this.xhr.offRequest=e=>{z6(this.xhr,e)},this.xhr.offResponse=e=>{H6(this.xhr,e)},this.player_.trigger("xhr-hooks-ready")}attachStreamingEventListeners_(){const e=["seekablerangeschanged","bufferedrangeschanged","contentsteeringloadstart","contentsteeringloadcomplete","contentsteeringparsed"],t=["gapjumped","playedrangeschanged"];e.forEach(n=>{this.playlistController_.on(n,i=>{this.player_.trigger(tr({},i))})}),t.forEach(n=>{this.playbackWatcher_.on(n,i=>{this.player_.trigger(tr({},i))})})}};const Sx={name:"videojs-http-streaming",VERSION:F6,canHandleSource(r,e={}){const t=Cn(Se.options,e);return!t.vhs.experimentalUseMMS&&!bu("avc1.4d400d,mp4a.40.2",!1)?!1:Sx.canPlayType(r.type,t)},handleSource(r,e,t={}){const n=Cn(Se.options,t);return e.vhs=new V6(r,e,n),e.vhs.xhr=u6(),e.vhs.setupXhrHooks_(),e.vhs.src(r.src,r.type),e.vhs},canPlayType(r,e){const t=Ub(r);if(!t)return"";const n=Sx.getOverrideNative(e);return!ti.supportsTypeNatively(t)||n?"maybe":""},getOverrideNative(r={}){const{vhs:e={}}=r,t=!(Se.browser.IS_ANY_SAFARI||Se.browser.IS_IOS),{overrideNative:n=t}=e;return n}},ede=()=>bu("avc1.4d400d,mp4a.40.2",!0);ede()&&Se.getTech("Html5").registerSourceHandler(Sx,0);Se.VhsHandler=V6;Se.VhsSourceHandler=Sx;Se.Vhs=ti;Se.use||Se.registerComponent("Vhs",ti);Se.options.vhs=Se.options.vhs||{};(!Se.getPlugin||!Se.getPlugin("reloadSourceOnError"))&&Se.registerPlugin("reloadSourceOnError",jce);/*! @name @videojs/http-streaming @version 3.15.0 @license Apache-2.0 */const Ra=Pg,Tx=(r,e)=>e&&e.responseURL&&r!==e.responseURL?e.responseURL:r,tl=r=>Se.log.debug?Se.log.debug.bind(Se,"VHS:",`${r} >`):function(){};function wn(...r){const e=Se.obj||Se;return(e.merge||e.mergeOptions).apply(e,r)}function ys(...r){const e=Se.time||Se;return(e.createTimeRanges||e.createTimeRanges).apply(e,r)}function tde(r){if(r.length===0)return"Buffered Ranges are empty";let e=`Buffered Ranges: 
`;for(let t=0;t<r.length;t++){const n=r.start(t),i=r.end(t);e+=`${n} --> ${i}. Duration (${i-n})
`}return e}const hu=1/30,fu=hu*3,W6=function(r,e){const t=[];let n;if(r&&r.length)for(n=0;n<r.length;n++)e(r.start(n),r.end(n))&&t.push([r.start(n),r.end(n)]);return ys(t)},Xf=function(r,e){return W6(r,function(t,n){return t-fu<=e&&n+fu>=e})},sy=function(r,e){return W6(r,function(t){return t-hu>=e})},rde=function(r){if(r.length<2)return ys();const e=[];for(let t=1;t<r.length;t++){const n=r.end(t-1),i=r.start(t);e.push([n,i])}return ys(e)},nde=function(r,e){let t=null,n=null,i=0;const s=[],a=[];if(!r||!r.length||!e||!e.length)return ys();let o=r.length;for(;o--;)s.push({time:r.start(o),type:"start"}),s.push({time:r.end(o),type:"end"});for(o=e.length;o--;)s.push({time:e.start(o),type:"start"}),s.push({time:e.end(o),type:"end"});for(s.sort(function(l,u){return l.time-u.time}),o=0;o<s.length;o++)s[o].type==="start"?(i++,i===2&&(t=s[o].time)):s[o].type==="end"&&(i--,i===1&&(n=s[o].time)),t!==null&&n!==null&&(a.push([t,n]),t=null,n=null);return ys(a)},q6=r=>{const e=[];if(!r||!r.length)return"";for(let t=0;t<r.length;t++)e.push(r.start(t)+" => "+r.end(t));return e.join(", ")},ide=function(r,e,t=1){return((r.length?r.end(r.length-1):0)-e)/t},kh=r=>{const e=[];for(let t=0;t<r.length;t++)e.push({start:r.start(t),end:r.end(t)});return e},sde=function(r,e){if(r===e)return!1;if(!r&&e||!e&&r||r.length!==e.length)return!0;for(let t=0;t<r.length;t++)if(r.start(t)!==e.start(t)||r.end(t)!==e.end(t))return!0;return!1},J1=function(r){if(!(!r||!r.length||!r.end))return r.end(r.length-1)},Ck=function(r,e){let t=0;if(!r||!r.length)return t;for(let n=0;n<r.length;n++){const i=r.start(n),s=r.end(n);if(!(e>s)){if(e>i&&e<=s){t+=s-e;continue}t+=s-i}}return t},wk=(r,e)=>{if(!e.preload)return e.duration;let t=0;return(e.parts||[]).forEach(function(n){t+=n.duration}),(e.preloadHints||[]).forEach(function(n){n.type==="PART"&&(t+=r.partTargetDuration)}),t},Xw=r=>(r.segments||[]).reduce((e,t,n)=>(t.parts?t.parts.forEach(function(i,s){e.push({duration:i.duration,segmentIndex:n,partIndex:s,part:i,segment:t})}):e.push({duration:t.duration,segmentIndex:n,partIndex:null,segment:t,part:null}),e),[]),G6=r=>{const e=r.segments&&r.segments.length&&r.segments[r.segments.length-1];return e&&e.parts||[]},K6=({preloadSegment:r})=>{if(!r)return;const{parts:e,preloadHints:t}=r;let n=(t||[]).reduce((i,s)=>i+(s.type==="PART"?1:0),0);return n+=e&&e.length?e.length:0,n},X6=(r,e)=>{if(e.endList)return 0;if(r&&r.suggestedPresentationDelay)return r.suggestedPresentationDelay;const t=G6(e).length>0;return t&&e.serverControl&&e.serverControl.partHoldBack?e.serverControl.partHoldBack:t&&e.partTargetDuration?e.partTargetDuration*3:e.serverControl&&e.serverControl.holdBack?e.serverControl.holdBack:e.targetDuration?e.targetDuration*3:0},ade=function(r,e){let t=0,n=e-r.mediaSequence,i=r.segments[n];if(i){if(typeof i.start<"u")return{result:i.start,precise:!0};if(typeof i.end<"u")return{result:i.end-i.duration,precise:!0}}for(;n--;){if(i=r.segments[n],typeof i.end<"u")return{result:t+i.end,precise:!0};if(t+=wk(r,i),typeof i.start<"u")return{result:t+i.start,precise:!0}}return{result:t,precise:!1}},ode=function(r,e){let t=0,n,i=e-r.mediaSequence;for(;i<r.segments.length;i++){if(n=r.segments[i],typeof n.start<"u")return{result:n.start-t,precise:!0};if(t+=wk(r,n),typeof n.end<"u")return{result:n.end-t,precise:!0}}return{result:-1,precise:!1}},Y6=function(r,e,t){if(typeof e>"u"&&(e=r.mediaSequence+r.segments.length),e<r.mediaSequence)return 0;const n=ade(r,e);if(n.precise)return n.result;const i=ode(r,e);return i.precise?i.result:n.result+t},Q6=function(r,e,t){if(!r)return 0;if(typeof t!="number"&&(t=0),typeof e>"u"){if(r.totalDuration)return r.totalDuration;if(!r.endList)return X.Infinity}return Y6(r,e,t)},P0=function({defaultDuration:r,durationList:e,startIndex:t,endIndex:n}){let i=0;if(t>n&&([t,n]=[n,t]),t<0){for(let s=t;s<Math.min(0,n);s++)i+=r;t=0}for(let s=t;s<n;s++)i+=e[s].duration;return i},J6=function(r,e,t,n){if(!r||!r.segments)return null;if(r.endList)return Q6(r);if(e===null)return null;e=e||0;let i=Y6(r,r.mediaSequence+r.segments.length,e);return t&&(n=typeof n=="number"?n:X6(null,r),i-=n),Math.max(0,i)},lde=function(r,e,t){const i=e||0;let s=J6(r,e,!0,t);return s===null?ys():(s<i&&(s=i),ys(i,s))},ude=function({playlist:r,currentTime:e,startingSegmentIndex:t,startingPartIndex:n,startTime:i,exactManifestTimings:s}){let a=e-i;const o=Xw(r);let l=0;for(let u=0;u<o.length;u++){const c=o[u];if(t===c.segmentIndex&&!(typeof n=="number"&&typeof c.partIndex=="number"&&n!==c.partIndex)){l=u;break}}if(a<0){if(l>0)for(let u=l-1;u>=0;u--){const c=o[u];if(a+=c.duration,s){if(a<0)continue}else if(a+hu<=0)continue;return{partIndex:c.partIndex,segmentIndex:c.segmentIndex,startTime:i-P0({defaultDuration:r.targetDuration,durationList:o,startIndex:l,endIndex:u})}}return{partIndex:o[0]&&o[0].partIndex||null,segmentIndex:o[0]&&o[0].segmentIndex||0,startTime:e}}if(l<0){for(let u=l;u<0;u++)if(a-=r.targetDuration,a<0)return{partIndex:o[0]&&o[0].partIndex||null,segmentIndex:o[0]&&o[0].segmentIndex||0,startTime:e};l=0}for(let u=l;u<o.length;u++){const c=o[u];a-=c.duration;const h=c.duration>hu,m=a===0,g=h&&a+hu>=0;if(!((m||g)&&u!==o.length-1)){if(s){if(a>0)continue}else if(a-hu>=0)continue;return{partIndex:c.partIndex,segmentIndex:c.segmentIndex,startTime:i+P0({defaultDuration:r.targetDuration,durationList:o,startIndex:l,endIndex:u})}}}return{segmentIndex:o[o.length-1].segmentIndex,partIndex:o[o.length-1].partIndex,startTime:e}},Z6=function(r){return r.excludeUntil&&r.excludeUntil>Date.now()},Ek=function(r){return r.excludeUntil&&r.excludeUntil===1/0},iS=function(r){const e=Z6(r);return!r.disabled&&!e},cde=function(r){return r.disabled},dde=function(r){for(let e=0;e<r.segments.length;e++)if(r.segments[e].key)return!0;return!1},eU=function(r,e){return e.attributes&&e.attributes[r]},hde=function(r,e,t,n=0){return eU("BANDWIDTH",t)?(r*t.attributes.BANDWIDTH-n*8)/e:NaN},Yw=(r,e)=>{if(r.playlists.length===1)return!0;const t=e.attributes.BANDWIDTH||Number.MAX_VALUE;return r.playlists.filter(n=>iS(n)?(n.attributes.BANDWIDTH||0)<t:!1).length===0},kk=(r,e)=>!r&&!e||!r&&e||r&&!e?!1:!!(r===e||r.id&&e.id&&r.id===e.id||r.resolvedUri&&e.resolvedUri&&r.resolvedUri===e.resolvedUri||r.uri&&e.uri&&r.uri===e.uri),EM=function(r,e){const t=r&&r.mediaGroups&&r.mediaGroups.AUDIO||{};let n=!1;for(const i in t){for(const s in t[i])if(n=e(t[i][s]),n)break;if(n)break}return!!n},Ug=r=>{if(!r||!r.playlists||!r.playlists.length)return EM(r,t=>t.playlists&&t.playlists.length||t.uri);for(let e=0;e<r.playlists.length;e++){const t=r.playlists[e],n=t.attributes&&t.attributes.CODECS;if(!(n&&n.split(",").every(s=>$2(s))||EM(r,s=>kk(t,s))))return!1}return!0};var Oa={liveEdgeDelay:X6,duration:Q6,seekable:lde,getMediaInfoForTime:ude,isEnabled:iS,isDisabled:cde,isExcluded:Z6,isIncompatible:Ek,playlistEnd:J6,isAes:dde,hasAttribute:eU,estimateSegmentRequestTime:hde,isLowestEnabledRendition:Yw,isAudioOnly:Ug,playlistMatch:kk,segmentDurationWithParts:wk};const{log:tU}=Se,pp=(r,e)=>`${r}-${e}`,rU=(r,e,t)=>`placeholder-uri-${r}-${e}-${t}`,fde=({onwarn:r,oninfo:e,manifestString:t,customTagParsers:n=[],customTagMappers:i=[],llhls:s})=>{const a=new oN;r&&a.on("warn",r),e&&a.on("info",e),n.forEach(u=>a.addParser(u)),i.forEach(u=>a.addTagMapper(u)),a.push(t),a.end();const o=a.manifest;if(s||(["preloadSegment","skip","serverControl","renditionReports","partInf","partTargetDuration"].forEach(function(u){o.hasOwnProperty(u)&&delete o[u]}),o.segments&&o.segments.forEach(function(u){["parts","preloadHints"].forEach(function(c){u.hasOwnProperty(c)&&delete u[c]})})),!o.targetDuration){let u=10;o.segments&&o.segments.length&&(u=o.segments.reduce((c,h)=>Math.max(c,h.duration),0)),r&&r({message:`manifest has no targetDuration defaulting to ${u}`}),o.targetDuration=u}const l=G6(o);if(l.length&&!o.partTargetDuration){const u=l.reduce((c,h)=>Math.max(c,h.duration),0);r&&(r({message:`manifest has no partTargetDuration defaulting to ${u}`}),tU.error("LL-HLS manifest has parts but lacks required #EXT-X-PART-INF:PART-TARGET value. See https://datatracker.ietf.org/doc/html/draft-pantos-hls-rfc8216bis-09#section-4.4.3.7. Playback is not guaranteed.")),o.partTargetDuration=u}return o},sm=(r,e)=>{r.mediaGroups&&["AUDIO","SUBTITLES"].forEach(t=>{if(r.mediaGroups[t])for(const n in r.mediaGroups[t])for(const i in r.mediaGroups[t][n]){const s=r.mediaGroups[t][n][i];e(s,t,n,i)}})},nU=({playlist:r,uri:e,id:t})=>{r.id=t,r.playlistErrors_=0,e&&(r.uri=e),r.attributes=r.attributes||{}},pde=r=>{let e=r.playlists.length;for(;e--;){const t=r.playlists[e];nU({playlist:t,id:pp(e,t.uri)}),t.resolvedUri=Ra(r.uri,t.uri),r.playlists[t.id]=t,r.playlists[t.uri]=t,t.attributes.BANDWIDTH||tU.warn("Invalid playlist STREAM-INF detected. Missing BANDWIDTH attribute.")}},mde=r=>{sm(r,e=>{e.uri&&(e.resolvedUri=Ra(r.uri,e.uri))})},gde=(r,e)=>{const t=pp(0,e),n={mediaGroups:{AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},uri:X.location.href,resolvedUri:X.location.href,playlists:[{uri:e,id:t,resolvedUri:e,attributes:{}}]};return n.playlists[t]=n.playlists[0],n.playlists[e]=n.playlists[0],n},iU=(r,e,t=rU)=>{r.uri=e;for(let i=0;i<r.playlists.length;i++)if(!r.playlists[i].uri){const s=`placeholder-uri-${i}`;r.playlists[i].uri=s}const n=Ug(r);sm(r,(i,s,a,o)=>{if(!i.playlists||!i.playlists.length){if(n&&s==="AUDIO"&&!i.uri)for(let l=0;l<r.playlists.length;l++){const u=r.playlists[l];if(u.attributes&&u.attributes.AUDIO&&u.attributes.AUDIO===a)return}i.playlists=[tr({},i)]}i.playlists.forEach(function(l,u){const c=t(s,a,o,l),h=pp(u,c);l.uri?l.resolvedUri=l.resolvedUri||Ra(r.uri,l.uri):(l.uri=u===0?c:h,l.resolvedUri=l.uri),l.id=l.id||h,l.attributes=l.attributes||{},r.playlists[l.id]=l,r.playlists[l.uri]=l})}),pde(r),mde(r)};class kM{constructor(){this.offset_=null,this.pendingDateRanges_=new Map,this.processedDateRanges_=new Map}setOffset(e=[]){if(this.offset_!==null||!e.length)return;const[t]=e;t.programDateTime!==void 0&&(this.offset_=t.programDateTime/1e3)}setPendingDateRanges(e=[]){if(!e.length)return;const[t]=e,n=t.startDate.getTime();this.trimProcessedDateRanges_(n),this.pendingDateRanges_=e.reduce((i,s)=>(i.set(s.id,s),i),new Map)}processDateRange(e){this.pendingDateRanges_.delete(e.id),this.processedDateRanges_.set(e.id,e)}getDateRangesToProcess(){if(this.offset_===null)return[];const e={},t=[];this.pendingDateRanges_.forEach((n,i)=>{if(!this.processedDateRanges_.has(i)&&(n.startTime=n.startDate.getTime()/1e3-this.offset_,n.processDateRange=()=>this.processDateRange(n),t.push(n),!!n.class))if(e[n.class]){const s=e[n.class].push(n);n.classListIndex=s-1}else e[n.class]=[n],n.classListIndex=0});for(const n of t){const i=e[n.class]||[];n.endDate?n.endTime=n.endDate.getTime()/1e3-this.offset_:n.endOnNext&&i[n.classListIndex+1]?n.endTime=i[n.classListIndex+1].startTime:n.duration?n.endTime=n.startTime+n.duration:n.plannedDuration?n.endTime=n.startTime+n.plannedDuration:n.endTime=n.startTime}return t}trimProcessedDateRanges_(e){new Map(this.processedDateRanges_).forEach((n,i)=>{n.startDate.getTime()<e&&this.processedDateRanges_.delete(i)})}}const sU=22,Bh=({requestType:r,request:e,error:t,parseFailure:n})=>{const i=e.status<200||e.status>299,s=e.status>=400&&e.status<=499,a={uri:e.uri,requestType:r},o=i&&!s||n;if(t&&s)a.error=tr({},t),a.errorType=Se.Error.NetworkRequestFailed;else if(e.aborted)a.errorType=Se.Error.NetworkRequestAborted;else if(e.timedout)a.erroType=Se.Error.NetworkRequestTimeout;else if(o){const l=n?Se.Error.NetworkBodyParserFailed:Se.Error.NetworkBadStatus;a.errorType=l,a.status=e.status,a.headers=e.headers}return a},{EventTarget:vde}=Se,yde=(r,e)=>{if(e.endList||!e.serverControl)return r;const t={};if(e.serverControl.canBlockReload){const{preloadSegment:n}=e;let i=e.mediaSequence+e.segments.length;if(n){const s=n.parts||[],a=K6(e)-1;a>-1&&a!==s.length-1&&(t._HLS_part=a),(a>-1||s.length)&&i--}t._HLS_msn=i}if(e.serverControl&&e.serverControl.canSkipUntil&&(t._HLS_skip=e.serverControl.canSkipDateranges?"v2":"YES"),Object.keys(t).length){const n=new X.URL(r);["_HLS_skip","_HLS_msn","_HLS_part"].forEach(function(i){t.hasOwnProperty(i)&&n.searchParams.set(i,t[i])}),r=n.toString()}return r},_de=(r,e)=>{if(!r)return e;const t=wn(r,e);if(r.preloadHints&&!e.preloadHints&&delete t.preloadHints,r.parts&&!e.parts)delete t.parts;else if(r.parts&&e.parts)for(let n=0;n<e.parts.length;n++)r.parts&&r.parts[n]&&(t.parts[n]=wn(r.parts[n],e.parts[n]));return!r.skipped&&e.skipped&&(t.skipped=!1),r.preload&&!e.preload&&(t.preload=!1),t},xde=(r,e,t)=>{const n=r.slice(),i=e.slice();t=t||0;const s=[];let a;for(let o=0;o<i.length;o++){const l=n[o+t],u=i[o];l?(a=l.map||a,s.push(_de(l,u))):(a&&!u.map&&(u.map=a),s.push(u))}return s},aU=(r,e)=>{!r.resolvedUri&&r.uri&&(r.resolvedUri=Ra(e,r.uri)),r.key&&!r.key.resolvedUri&&(r.key.resolvedUri=Ra(e,r.key.uri)),r.map&&!r.map.resolvedUri&&(r.map.resolvedUri=Ra(e,r.map.uri)),r.map&&r.map.key&&!r.map.key.resolvedUri&&(r.map.key.resolvedUri=Ra(e,r.map.key.uri)),r.parts&&r.parts.length&&r.parts.forEach(t=>{t.resolvedUri||(t.resolvedUri=Ra(e,t.uri))}),r.preloadHints&&r.preloadHints.length&&r.preloadHints.forEach(t=>{t.resolvedUri||(t.resolvedUri=Ra(e,t.uri))})},oU=function(r){const e=r.segments||[],t=r.preloadSegment;if(t&&t.parts&&t.parts.length){if(t.preloadHints){for(let n=0;n<t.preloadHints.length;n++)if(t.preloadHints[n].type==="MAP")return e}t.duration=r.targetDuration,t.preload=!0,e.push(t)}return e},lU=(r,e)=>r===e||r.segments&&e.segments&&r.segments.length===e.segments.length&&r.endList===e.endList&&r.mediaSequence===e.mediaSequence&&r.preloadSegment===e.preloadSegment,Qw=(r,e,t=lU)=>{const n=wn(r,{}),i=n.playlists[e.id];if(!i||t(i,e))return null;e.segments=oU(e);const s=wn(i,e);if(s.preloadSegment&&!e.preloadSegment&&delete s.preloadSegment,i.segments){if(e.skip){e.segments=e.segments||[];for(let a=0;a<e.skip.skippedSegments;a++)e.segments.unshift({skipped:!0})}s.segments=xde(i.segments,e.segments,e.mediaSequence-i.mediaSequence)}s.segments.forEach(a=>{aU(a,s.resolvedUri)});for(let a=0;a<n.playlists.length;a++)n.playlists[a].id===e.id&&(n.playlists[a]=s);return n.playlists[e.id]=s,n.playlists[e.uri]=s,sm(r,(a,o,l,u)=>{if(a.playlists)for(let c=0;c<a.playlists.length;c++)e.id===a.playlists[c].id&&(a.playlists[c]=s)}),n},Jw=(r,e)=>{const t=r.segments||[],n=t[t.length-1],i=n&&n.parts&&n.parts[n.parts.length-1],s=i&&i.duration||n&&n.duration;return e&&s?s*1e3:(r.partTargetDuration||r.targetDuration||10)*500},AM=(r,e,t)=>{if(!r)return;const n=[];return r.forEach(i=>{if(!i.attributes)return;const{BANDWIDTH:s,RESOLUTION:a,CODECS:o}=i.attributes;n.push({id:i.id,bandwidth:s,resolution:a,codecs:o})}),{type:e,isLive:t,renditions:n}};let Yf=class extends vde{constructor(e,t,n={}){if(super(),!e)throw new Error("A non-empty playlist URL or object is required");this.logger_=tl("PlaylistLoader");const{withCredentials:i=!1}=n;this.src=e,this.vhs_=t,this.withCredentials=i,this.addDateRangesToTextTrack_=n.addDateRangesToTextTrack;const s=t.options_;this.customTagParsers=s&&s.customTagParsers||[],this.customTagMappers=s&&s.customTagMappers||[],this.llhls=s&&s.llhls,this.dateRangesStorage_=new kM,this.state="HAVE_NOTHING",this.handleMediaupdatetimeout_=this.handleMediaupdatetimeout_.bind(this),this.on("mediaupdatetimeout",this.handleMediaupdatetimeout_),this.on("loadedplaylist",this.handleLoadedPlaylist_.bind(this))}handleLoadedPlaylist_(){const e=this.media();if(!e)return;this.dateRangesStorage_.setOffset(e.segments),this.dateRangesStorage_.setPendingDateRanges(e.dateRanges);const t=this.dateRangesStorage_.getDateRangesToProcess();!t.length||!this.addDateRangesToTextTrack_||this.addDateRangesToTextTrack_(t)}handleMediaupdatetimeout_(){if(this.state!=="HAVE_METADATA")return;const e=this.media();let t=Ra(this.main.uri,e.uri);this.llhls&&(t=yde(t,e)),this.state="HAVE_CURRENT_METADATA",this.request=this.vhs_.xhr({uri:t,withCredentials:this.withCredentials,requestType:"hls-playlist"},(n,i)=>{if(this.request){if(n)return this.playlistRequestError(this.request,this.media(),"HAVE_METADATA");this.haveMetadata({playlistString:this.request.responseText,url:this.media().uri,id:this.media().id})}})}playlistRequestError(e,t,n){const{uri:i,id:s}=t;this.request=null,n&&(this.state=n),this.error={playlist:this.main.playlists[s],status:e.status,message:`HLS playlist request error at URL: ${i}.`,responseText:e.responseText,code:e.status>=500?4:2,metadata:Bh({requestType:e.requestType,request:e,error:e.error})},this.trigger("error")}parseManifest_({url:e,manifestString:t}){try{return fde({onwarn:({message:n})=>this.logger_(`m3u8-parser warn for ${e}: ${n}`),oninfo:({message:n})=>this.logger_(`m3u8-parser info for ${e}: ${n}`),manifestString:t,customTagParsers:this.customTagParsers,customTagMappers:this.customTagMappers,llhls:this.llhls})}catch(n){this.error=n,this.error.metadata={errorType:Se.Error.StreamingHlsPlaylistParserError,error:n}}}haveMetadata({playlistString:e,playlistObject:t,url:n,id:i}){this.request=null,this.state="HAVE_METADATA";const s={playlistInfo:{type:"media",uri:n}};this.trigger({type:"playlistparsestart",metadata:s});const a=t||this.parseManifest_({url:n,manifestString:e});a.lastRequest=Date.now(),nU({playlist:a,uri:n,id:i});const o=Qw(this.main,a);this.targetDuration=a.partTargetDuration||a.targetDuration,this.pendingMedia_=null,o?(this.main=o,this.media_=this.main.playlists[i]):this.trigger("playlistunchanged"),this.updateMediaUpdateTimeout_(Jw(this.media(),!!o)),s.parsedPlaylist=AM(this.main.playlists,s.playlistInfo.type,!this.media_.endList),this.trigger({type:"playlistparsecomplete",metadata:s}),this.trigger("loadedplaylist")}dispose(){this.trigger("dispose"),this.stopRequest(),X.clearTimeout(this.mediaUpdateTimeout),X.clearTimeout(this.finalRenditionTimeout),this.dateRangesStorage_=new kM,this.off()}stopRequest(){if(this.request){const e=this.request;this.request=null,e.onreadystatechange=null,e.abort()}}media(e,t){if(!e)return this.media_;if(this.state==="HAVE_NOTHING")throw new Error("Cannot switch media playlist from "+this.state);if(typeof e=="string"){if(!this.main.playlists[e])throw new Error("Unknown playlist URI: "+e);e=this.main.playlists[e]}if(X.clearTimeout(this.finalRenditionTimeout),t){const o=(e.partTargetDuration||e.targetDuration)/2*1e3||5e3;this.finalRenditionTimeout=X.setTimeout(this.media.bind(this,e,!1),o);return}const n=this.state,i=!this.media_||e.id!==this.media_.id,s=this.main.playlists[e.id];if(s&&s.endList||e.endList&&e.segments.length){this.request&&(this.request.onreadystatechange=null,this.request.abort(),this.request=null),this.state="HAVE_METADATA",this.media_=e,i&&(this.trigger("mediachanging"),n==="HAVE_MAIN_MANIFEST"?this.trigger("loadedmetadata"):this.trigger("mediachange"));return}if(this.updateMediaUpdateTimeout_(Jw(e,!0)),!i)return;if(this.state="SWITCHING_MEDIA",this.request){if(e.resolvedUri===this.request.url)return;this.request.onreadystatechange=null,this.request.abort(),this.request=null}this.media_&&this.trigger("mediachanging"),this.pendingMedia_=e;const a={playlistInfo:{type:"media",uri:e.uri}};this.trigger({type:"playlistrequeststart",metadata:a}),this.request=this.vhs_.xhr({uri:e.resolvedUri,withCredentials:this.withCredentials,requestType:"hls-playlist"},(o,l)=>{if(this.request){if(e.lastRequest=Date.now(),e.resolvedUri=Tx(e.resolvedUri,l),o)return this.playlistRequestError(this.request,e,n);this.trigger({type:"playlistrequestcomplete",metadata:a}),this.haveMetadata({playlistString:l.responseText,url:e.uri,id:e.id}),n==="HAVE_MAIN_MANIFEST"?this.trigger("loadedmetadata"):this.trigger("mediachange")}})}pause(){this.mediaUpdateTimeout&&(X.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null),this.stopRequest(),this.state==="HAVE_NOTHING"&&(this.started=!1),this.state==="SWITCHING_MEDIA"?this.media_?this.state="HAVE_METADATA":this.state="HAVE_MAIN_MANIFEST":this.state==="HAVE_CURRENT_METADATA"&&(this.state="HAVE_METADATA")}load(e){this.mediaUpdateTimeout&&(X.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null);const t=this.media();if(e){const n=t?(t.partTargetDuration||t.targetDuration)/2*1e3:5e3;this.mediaUpdateTimeout=X.setTimeout(()=>{this.mediaUpdateTimeout=null,this.load()},n);return}if(!this.started){this.start();return}t&&!t.endList?this.trigger("mediaupdatetimeout"):this.trigger("loadedplaylist")}updateMediaUpdateTimeout_(e){this.mediaUpdateTimeout&&(X.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null),!(!this.media()||this.media().endList)&&(this.mediaUpdateTimeout=X.setTimeout(()=>{this.mediaUpdateTimeout=null,this.trigger("mediaupdatetimeout"),this.updateMediaUpdateTimeout_(e)},e))}start(){if(this.started=!0,typeof this.src=="object"){this.src.uri||(this.src.uri=X.location.href),this.src.resolvedUri=this.src.uri,setTimeout(()=>{this.setupInitialPlaylist(this.src)},0);return}const e={playlistInfo:{type:"multivariant",uri:this.src}};this.trigger({type:"playlistrequeststart",metadata:e}),this.request=this.vhs_.xhr({uri:this.src,withCredentials:this.withCredentials,requestType:"hls-playlist"},(t,n)=>{if(!this.request)return;if(this.request=null,t)return this.error={status:n.status,message:`HLS playlist request error at URL: ${this.src}.`,responseText:n.responseText,code:2,metadata:Bh({requestType:n.requestType,request:n,error:t})},this.state==="HAVE_NOTHING"&&(this.started=!1),this.trigger("error");this.trigger({type:"playlistrequestcomplete",metadata:e}),this.src=Tx(this.src,n),this.trigger({type:"playlistparsestart",metadata:e});const i=this.parseManifest_({manifestString:n.responseText,url:this.src});e.parsedPlaylist=AM(i.playlists,e.playlistInfo.type,!1),this.trigger({type:"playlistparsecomplete",metadata:e}),this.setupInitialPlaylist(i)})}srcUri(){return typeof this.src=="string"?this.src:this.src.uri}setupInitialPlaylist(e){if(this.state="HAVE_MAIN_MANIFEST",e.playlists){this.main=e,iU(this.main,this.srcUri()),e.playlists.forEach(n=>{n.segments=oU(n),n.segments.forEach(i=>{aU(i,n.resolvedUri)})}),this.trigger("loadedplaylist"),this.request||this.media(this.main.playlists[0]);return}const t=this.srcUri()||X.location.href;this.main=gde(e,t),this.haveMetadata({playlistObject:e,url:t,id:this.main.playlists[0].id}),this.trigger("loadedmetadata")}updateOrDeleteClone(e,t){const n=this.main,i=e.ID;let s=n.playlists.length;for(;s--;){const a=n.playlists[s];if(a.attributes["PATHWAY-ID"]===i){const o=a.resolvedUri,l=a.id;if(t){const u=this.createCloneURI_(a.resolvedUri,e),c=pp(i,u),h=this.createCloneAttributes_(i,a.attributes),m=this.createClonePlaylist_(a,c,e,h);n.playlists[s]=m,n.playlists[c]=m,n.playlists[u]=m}else n.playlists.splice(s,1);delete n.playlists[l],delete n.playlists[o]}}this.updateOrDeleteCloneMedia(e,t)}updateOrDeleteCloneMedia(e,t){const n=this.main,i=e.ID;["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(s=>{if(!(!n.mediaGroups[s]||!n.mediaGroups[s][i])){for(const a in n.mediaGroups[s])if(a===i){for(const o in n.mediaGroups[s][a])n.mediaGroups[s][a][o].playlists.forEach((u,c)=>{const h=n.playlists[u.id],m=h.id,g=h.resolvedUri;delete n.playlists[m],delete n.playlists[g]});delete n.mediaGroups[s][a]}}}),t&&this.createClonedMediaGroups_(e)}addClonePathway(e,t={}){const n=this.main,i=n.playlists.length,s=this.createCloneURI_(t.resolvedUri,e),a=pp(e.ID,s),o=this.createCloneAttributes_(e.ID,t.attributes),l=this.createClonePlaylist_(t,a,e,o);n.playlists[i]=l,n.playlists[a]=l,n.playlists[s]=l,this.createClonedMediaGroups_(e)}createClonedMediaGroups_(e){const t=e.ID,n=e["BASE-ID"],i=this.main;["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(s=>{if(!(!i.mediaGroups[s]||i.mediaGroups[s][t]))for(const a in i.mediaGroups[s]){if(a===n)i.mediaGroups[s][t]={};else continue;for(const o in i.mediaGroups[s][a]){const l=i.mediaGroups[s][a][o];i.mediaGroups[s][t][o]=tr({},l);const u=i.mediaGroups[s][t][o],c=this.createCloneURI_(l.resolvedUri,e);u.resolvedUri=c,u.uri=c,u.playlists=[],l.playlists.forEach((h,m)=>{const g=i.playlists[h.id],y=rU(s,t,o),v=pp(t,y);if(g&&!i.playlists[v]){const x=this.createClonePlaylist_(g,v,e),w=x.resolvedUri;i.playlists[v]=x,i.playlists[w]=x}u.playlists[m]=this.createClonePlaylist_(h,v,e)})}}})}createClonePlaylist_(e,t,n,i){const s=this.createCloneURI_(e.resolvedUri,n),a={resolvedUri:s,uri:s,id:t};return e.segments&&(a.segments=[]),i&&(a.attributes=i),wn(e,a)}createCloneURI_(e,t){const n=new URL(e);n.hostname=t["URI-REPLACEMENT"].HOST;const i=t["URI-REPLACEMENT"].PARAMS;for(const s of Object.keys(i))n.searchParams.set(s,i[s]);return n.href}createCloneAttributes_(e,t){const n={"PATHWAY-ID":e};return["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(i=>{t[i]&&(n[i]=e)}),n}getKeyIdSet(e){if(e.contentProtection){const t=new Set;for(const n in e.contentProtection){const i=e.contentProtection[n].attributes.keyId;i&&t.add(i.toLowerCase())}return t}}};const Zw=function(r,e,t,n){const i=r.responseType==="arraybuffer"?r.response:r.responseText;!e&&i&&(r.responseTime=Date.now(),r.roundTripTime=r.responseTime-r.requestTime,r.bytesReceived=i.byteLength||i.length,r.bandwidth||(r.bandwidth=Math.floor(r.bytesReceived/r.roundTripTime*8*1e3))),t.headers&&(r.responseHeaders=t.headers),e&&e.code==="ETIMEDOUT"&&(r.timedout=!0),!e&&!r.aborted&&t.statusCode!==200&&t.statusCode!==206&&t.statusCode!==0&&(e=new Error("XHR Failed with a response of: "+(r&&(i||r.responseText)))),n(e,r)},bde=(r,e)=>{if(!r||!r.size)return;let t=e;return r.forEach(n=>{t=n(t)}),t},Sde=(r,e,t,n)=>{!r||!r.size||r.forEach(i=>{i(e,t,n)})},uU=function(){const r=function e(t,n){t=wn({timeout:45e3},t);const i=e.beforeRequest||Se.Vhs.xhr.beforeRequest,s=e._requestCallbackSet||Se.Vhs.xhr._requestCallbackSet||new Set,a=e._responseCallbackSet||Se.Vhs.xhr._responseCallbackSet;i&&typeof i=="function"&&(Se.log.warn("beforeRequest is deprecated, use onRequest instead."),s.add(i));const o=Se.Vhs.xhr.original===!0?Se.xhr:Se.Vhs.xhr,l=bde(s,t);s.delete(i);const u=o(l||t,function(h,m){return Sde(a,u,h,m),Zw(u,h,m,n)}),c=u.abort;return u.abort=function(){return u.aborted=!0,c.apply(u,arguments)},u.uri=t.uri,u.requestType=t.requestType,u.requestTime=Date.now(),u};return r.original=!0,r},Tde=function(r){let e;const t=r.offset;return typeof r.offset=="bigint"||typeof r.length=="bigint"?e=X.BigInt(r.offset)+X.BigInt(r.length)-X.BigInt(1):e=r.offset+r.length-1,"bytes="+t+"-"+e},eE=function(r){const e={};return r.byterange&&(e.Range=Tde(r.byterange)),e},Cde=function(r,e){return r.start(e)+"-"+r.end(e)},wde=function(r,e){const t=r.toString(16);return"00".substring(0,2-t.length)+t+(e%2?" ":"")},Ede=function(r){return r>=32&&r<126?String.fromCharCode(r):"."},cU=function(r){const e={};return Object.keys(r).forEach(t=>{const n=r[t];j2(n)?e[t]={bytes:n.buffer,byteOffset:n.byteOffset,byteLength:n.byteLength}:e[t]=n}),e},Cx=function(r){const e=r.byterange||{length:1/0,offset:0};return[e.length,e.offset,r.resolvedUri].join(",")},dU=function(r){return r.resolvedUri},hU=r=>{const e=Array.prototype.slice.call(r),t=16;let n="",i,s;for(let a=0;a<e.length/t;a++)i=e.slice(a*t,a*t+t).map(wde).join(""),s=e.slice(a*t,a*t+t).map(Ede).join(""),n+=i+" "+s+`
`;return n},kde=({bytes:r})=>hU(r),Ade=r=>{let e="",t;for(t=0;t<r.length;t++)e+=Cde(r,t)+" ";return e};var Dde=Object.freeze({__proto__:null,createTransferableMessage:cU,initSegmentId:Cx,segmentKeyId:dU,hexDump:hU,tagDump:kde,textRanges:Ade});const fU=.25,Ide=(r,e)=>{if(!e.dateTimeObject)return null;const t=e.videoTimingInfo.transmuxerPrependedSeconds,i=e.videoTimingInfo.transmuxedPresentationStart+t,s=r-i;return new Date(e.dateTimeObject.getTime()+s*1e3)},Pde=r=>r.transmuxedPresentationEnd-r.transmuxedPresentationStart-r.transmuxerPrependedSeconds,Rde=(r,e)=>{let t;try{t=new Date(r)}catch{return null}if(!e||!e.segments||e.segments.length===0)return null;let n=e.segments[0];if(t<new Date(n.dateTimeObject))return null;for(let l=0;l<e.segments.length-1;l++){n=e.segments[l];const u=new Date(e.segments[l+1].dateTimeObject);if(t<u)break}const i=e.segments[e.segments.length-1],s=i.dateTimeObject,a=i.videoTimingInfo?Pde(i.videoTimingInfo):i.duration+i.duration*fU,o=new Date(s.getTime()+a*1e3);return t>o?null:(t>new Date(s)&&(n=i),{segment:n,estimatedStart:n.videoTimingInfo?n.videoTimingInfo.transmuxedPresentationStart:Oa.duration(e,e.mediaSequence+e.segments.indexOf(n)),type:n.videoTimingInfo?"accurate":"estimate"})},Lde=(r,e)=>{if(!e||!e.segments||e.segments.length===0)return null;let t=0,n;for(let s=0;s<e.segments.length&&(n=e.segments[s],t=n.videoTimingInfo?n.videoTimingInfo.transmuxedPresentationEnd:t+n.duration,!(r<=t));s++);const i=e.segments[e.segments.length-1];if(i.videoTimingInfo&&i.videoTimingInfo.transmuxedPresentationEnd<r)return null;if(r>t){if(r>t+i.duration*fU)return null;n=i}return{segment:n,estimatedStart:n.videoTimingInfo?n.videoTimingInfo.transmuxedPresentationStart:t-n.duration,type:n.videoTimingInfo?"accurate":"estimate"}},Ode=(r,e)=>{let t,n;try{t=new Date(r),n=new Date(e)}catch{}const i=t.getTime();return(n.getTime()-i)/1e3},Mde=r=>{if(!r.segments||r.segments.length===0)return!1;for(let e=0;e<r.segments.length;e++)if(!r.segments[e].dateTimeObject)return!1;return!0},Fde=({playlist:r,time:e=void 0,callback:t})=>{if(!t)throw new Error("getProgramTime: callback must be provided");if(!r||e===void 0)return t({message:"getProgramTime: playlist and time must be provided"});const n=Lde(e,r);if(!n)return t({message:"valid programTime was not found"});if(n.type==="estimate")return t({message:"Accurate programTime could not be determined. Please seek to e.seekTime and try again",seekTime:n.estimatedStart});const i={mediaSeconds:e},s=Ide(e,n.segment);return s&&(i.programDateTime=s.toISOString()),t(null,i)},pU=({programTime:r,playlist:e,retryCount:t=2,seekTo:n,pauseAfterSeek:i=!0,tech:s,callback:a})=>{if(!a)throw new Error("seekToProgramTime: callback must be provided");if(typeof r>"u"||!e||!n)return a({message:"seekToProgramTime: programTime, seekTo and playlist must be provided"});if(!e.endList&&!s.hasStarted_)return a({message:"player must be playing a live stream to start buffering"});if(!Mde(e))return a({message:"programDateTime tags must be provided in the manifest "+e.resolvedUri});const o=Rde(r,e);if(!o)return a({message:`${r} was not found in the stream`});const l=o.segment,u=Ode(l.dateTimeObject,r);if(o.type==="estimate"){if(t===0)return a({message:`${r} is not buffered yet. Try again`});n(o.estimatedStart+u),s.one("seeked",()=>{pU({programTime:r,playlist:e,retryCount:t-1,seekTo:n,pauseAfterSeek:i,tech:s,callback:a})});return}const c=l.start+u,h=()=>a(null,s.currentTime());s.one("seeked",h),i&&s.pause(),n(c)},Z1=(r,e)=>{if(r.readyState===4)return e()},Bde=(r,e,t,n)=>{let i=[],s,a=!1;const o=function(h,m,g,y){return m.abort(),a=!0,t(h,m,g,y)},l=function(h,m){if(a)return;if(h)return h.metadata=Bh({requestType:n,request:m,error:h}),o(h,m,"",i);const g=m.responseText.substring(i&&i.byteLength||0,m.responseText.length);if(i=cN(i,z2(g,!0)),s=s||Wf(i),i.length<10||s&&i.length<s+2)return Z1(m,()=>o(h,m,"",i));const y=Yp(i);return y==="ts"&&i.length<188?Z1(m,()=>o(h,m,"",i)):!y&&i.length<376?Z1(m,()=>o(h,m,"",i)):o(null,m,y,i)},c=e({uri:r,beforeSend(h){h.overrideMimeType("text/plain; charset=x-user-defined"),h.addEventListener("progress",function({total:m,loaded:g}){return Zw(h,null,{statusCode:h.status},l)})}},function(h,m){return Zw(c,h,m,l)});return c},{EventTarget:Nde}=Se,DM=function(r,e){if(!lU(r,e)||r.sidx&&e.sidx&&(r.sidx.offset!==e.sidx.offset||r.sidx.length!==e.sidx.length))return!1;if(!r.sidx&&e.sidx||r.sidx&&!e.sidx||r.segments&&!e.segments||!r.segments&&e.segments)return!1;if(!r.segments&&!e.segments)return!0;for(let t=0;t<r.segments.length;t++){const n=r.segments[t],i=e.segments[t];if(n.uri!==i.uri)return!1;if(!n.byterange&&!i.byterange)continue;const s=n.byterange,a=i.byterange;if(s&&!a||!s&&a||s.offset!==a.offset||s.length!==a.length)return!1}return!0},Ude=(r,e,t,n)=>{const i=n.attributes.NAME||t;return`placeholder-uri-${r}-${e}-${i}`},$de=({mainXml:r,srcUrl:e,clientOffset:t,sidxMapping:n,previousManifest:i})=>{const s=_N(r,{manifestUri:e,clientOffset:t,sidxMapping:n,previousManifest:i});return iU(s,e,Ude),s},jde=(r,e)=>{sm(r,(t,n,i,s)=>{(!e.mediaGroups[n][i]||!(s in e.mediaGroups[n][i]))&&delete r.mediaGroups[n][i][s]})},zde=(r,e,t)=>{let n=!0,i=wn(r,{duration:e.duration,minimumUpdatePeriod:e.minimumUpdatePeriod,timelineStarts:e.timelineStarts});for(let s=0;s<e.playlists.length;s++){const a=e.playlists[s];if(a.sidx){const l=ef(a.sidx);t&&t[l]&&t[l].sidx&&Rg(a,t[l].sidx,a.sidx.resolvedUri)}const o=Qw(i,a,DM);o&&(i=o,n=!1)}return sm(e,(s,a,o,l)=>{if(s.playlists&&s.playlists.length){const u=s.playlists[0].id,c=Qw(i,s.playlists[0],DM);c&&(i=c,l in i.mediaGroups[a][o]||(i.mediaGroups[a][o][l]=s),i.mediaGroups[a][o][l].playlists[0]=i.playlists[u],n=!1)}}),jde(i,e),e.minimumUpdatePeriod!==r.minimumUpdatePeriod&&(n=!1),n?null:i},Hde=(r,e)=>(!r.map&&!e.map||!!(r.map&&e.map&&r.map.byterange.offset===e.map.byterange.offset&&r.map.byterange.length===e.map.byterange.length))&&r.uri===e.uri&&r.byterange.offset===e.byterange.offset&&r.byterange.length===e.byterange.length,IM=(r,e)=>{const t={};for(const n in r){const s=r[n].sidx;if(s){const a=ef(s);if(!e[a])break;const o=e[a].sidxInfo;Hde(o,s)&&(t[a]=e[a])}}return t},Vde=(r,e)=>{let n=IM(r.playlists,e);return sm(r,(i,s,a,o)=>{if(i.playlists&&i.playlists.length){const l=i.playlists;n=wn(n,IM(l,e))}}),n};let tE=class extends Nde{constructor(e,t,n={},i){super(),this.mainPlaylistLoader_=i||this,i||(this.isMain_=!0);const{withCredentials:s=!1}=n;if(this.vhs_=t,this.withCredentials=s,this.addMetadataToTextTrack=n.addMetadataToTextTrack,!e)throw new Error("A non-empty playlist URL or object is required");this.on("minimumUpdatePeriod",()=>{this.refreshXml_()}),this.on("mediaupdatetimeout",()=>{this.refreshMedia_(this.media().id)}),this.state="HAVE_NOTHING",this.loadedPlaylists_={},this.logger_=tl("DashPlaylistLoader"),this.isMain_?(this.mainPlaylistLoader_.srcUrl=e,this.mainPlaylistLoader_.sidxMapping_={}):this.childPlaylist_=e}requestErrored_(e,t,n){if(!this.request)return!0;if(this.request=null,e)return this.error=typeof e=="object"&&!(e instanceof Error)?e:{status:t.status,message:"DASH request error at URL: "+t.uri,response:t.response,code:2,metadata:e.metadata},n&&(this.state=n),this.trigger("error"),!0}addSidxSegments_(e,t,n){const i=e.sidx&&ef(e.sidx);if(!e.sidx||!i||this.mainPlaylistLoader_.sidxMapping_[i]){this.mediaRequest_=X.setTimeout(()=>n(!1),0);return}const s=Tx(e.sidx.resolvedUri),a=(l,u)=>{if(this.requestErrored_(l,u,t))return;const c=this.mainPlaylistLoader_.sidxMapping_,{requestType:h}=u;let m;try{m=bN(gr(u.response).subarray(8))}catch(g){g.metadata=Bh({requestType:h,request:u,parseFailure:!0}),this.requestErrored_(g,u,t);return}return c[i]={sidxInfo:e.sidx,sidx:m},Rg(e,m,e.sidx.resolvedUri),n(!0)},o="dash-sidx";this.request=Bde(s,this.vhs_.xhr,(l,u,c,h)=>{if(l)return a(l,u);if(!c||c!=="mp4"){const y=c||"unknown";return a({status:u.status,message:`Unsupported ${y} container type for sidx segment at URL: ${s}`,response:"",playlist:e,internal:!0,playlistExclusionDuration:1/0,code:2},u)}const{offset:m,length:g}=e.sidx.byterange;if(h.length>=g+m)return a(l,{response:h.subarray(m,m+g),status:u.status,uri:u.uri});this.request=this.vhs_.xhr({uri:s,responseType:"arraybuffer",requestType:"dash-sidx",headers:eE({byterange:e.sidx.byterange})},a)},o)}dispose(){this.trigger("dispose"),this.stopRequest(),this.loadedPlaylists_={},X.clearTimeout(this.minimumUpdatePeriodTimeout_),X.clearTimeout(this.mediaRequest_),X.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null,this.mediaRequest_=null,this.minimumUpdatePeriodTimeout_=null,this.mainPlaylistLoader_.createMupOnMedia_&&(this.off("loadedmetadata",this.mainPlaylistLoader_.createMupOnMedia_),this.mainPlaylistLoader_.createMupOnMedia_=null),this.off()}hasPendingRequest(){return this.request||this.mediaRequest_}stopRequest(){if(this.request){const e=this.request;this.request=null,e.onreadystatechange=null,e.abort()}}media(e){if(!e)return this.media_;if(this.state==="HAVE_NOTHING")throw new Error("Cannot switch media playlist from "+this.state);const t=this.state;if(typeof e=="string"){if(!this.mainPlaylistLoader_.main.playlists[e])throw new Error("Unknown playlist URI: "+e);e=this.mainPlaylistLoader_.main.playlists[e]}const n=!this.media_||e.id!==this.media_.id;if(n&&this.loadedPlaylists_[e.id]&&this.loadedPlaylists_[e.id].endList){this.state="HAVE_METADATA",this.media_=e,n&&(this.trigger("mediachanging"),this.trigger("mediachange"));return}n&&(this.media_&&this.trigger("mediachanging"),this.addSidxSegments_(e,t,i=>{this.haveMetadata({startingState:t,playlist:e})}))}haveMetadata({startingState:e,playlist:t}){this.state="HAVE_METADATA",this.loadedPlaylists_[t.id]=t,this.mediaRequest_=null,this.refreshMedia_(t.id),e==="HAVE_MAIN_MANIFEST"?this.trigger("loadedmetadata"):this.trigger("mediachange")}pause(){this.mainPlaylistLoader_.createMupOnMedia_&&(this.off("loadedmetadata",this.mainPlaylistLoader_.createMupOnMedia_),this.mainPlaylistLoader_.createMupOnMedia_=null),this.stopRequest(),X.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null,this.isMain_&&(X.clearTimeout(this.mainPlaylistLoader_.minimumUpdatePeriodTimeout_),this.mainPlaylistLoader_.minimumUpdatePeriodTimeout_=null),this.state==="HAVE_NOTHING"&&(this.started=!1)}load(e){X.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null;const t=this.media();if(e){const n=t?t.targetDuration/2*1e3:5e3;this.mediaUpdateTimeout=X.setTimeout(()=>this.load(),n);return}if(!this.started){this.start();return}t&&!t.endList?(this.isMain_&&!this.minimumUpdatePeriodTimeout_&&(this.trigger("minimumUpdatePeriod"),this.updateMinimumUpdatePeriodTimeout_()),this.trigger("mediaupdatetimeout")):this.trigger("loadedplaylist")}start(){if(this.started=!0,!this.isMain_){this.mediaRequest_=X.setTimeout(()=>this.haveMain_(),0);return}this.requestMain_((e,t)=>{this.haveMain_(),!this.hasPendingRequest()&&!this.media_&&this.media(this.mainPlaylistLoader_.main.playlists[0])})}requestMain_(e){const t={manifestInfo:{uri:this.mainPlaylistLoader_.srcUrl}};this.trigger({type:"manifestrequeststart",metadata:t}),this.request=this.vhs_.xhr({uri:this.mainPlaylistLoader_.srcUrl,withCredentials:this.withCredentials,requestType:"dash-manifest"},(n,i)=>{if(n){const{requestType:a}=i;n.metadata=Bh({requestType:a,request:i,error:n})}if(this.requestErrored_(n,i)){this.state==="HAVE_NOTHING"&&(this.started=!1);return}this.trigger({type:"manifestrequestcomplete",metadata:t});const s=i.responseText!==this.mainPlaylistLoader_.mainXml_;if(this.mainPlaylistLoader_.mainXml_=i.responseText,i.responseHeaders&&i.responseHeaders.date?this.mainLoaded_=Date.parse(i.responseHeaders.date):this.mainLoaded_=Date.now(),this.mainPlaylistLoader_.srcUrl=Tx(this.mainPlaylistLoader_.srcUrl,i),s){this.handleMain_(),this.syncClientServerClock_(()=>e(i,s));return}return e(i,s)})}syncClientServerClock_(e){const t=xN(this.mainPlaylistLoader_.mainXml_);if(t===null)return this.mainPlaylistLoader_.clientOffset_=this.mainLoaded_-Date.now(),e();if(t.method==="DIRECT")return this.mainPlaylistLoader_.clientOffset_=t.value-Date.now(),e();this.request=this.vhs_.xhr({uri:Ra(this.mainPlaylistLoader_.srcUrl,t.value),method:t.method,withCredentials:this.withCredentials,requestType:"dash-clock-sync"},(n,i)=>{if(!this.request)return;if(n){const{requestType:a}=i;return this.error.metadata=Bh({requestType:a,request:i,error:n}),this.mainPlaylistLoader_.clientOffset_=this.mainLoaded_-Date.now(),e()}let s;t.method==="HEAD"?!i.responseHeaders||!i.responseHeaders.date?s=this.mainLoaded_:s=Date.parse(i.responseHeaders.date):s=Date.parse(i.responseText),this.mainPlaylistLoader_.clientOffset_=s-Date.now(),e()})}haveMain_(){this.state="HAVE_MAIN_MANIFEST",this.isMain_?this.trigger("loadedplaylist"):this.media_||this.media(this.childPlaylist_)}handleMain_(){this.mediaRequest_=null;const e=this.mainPlaylistLoader_.main,t={manifestInfo:{uri:this.mainPlaylistLoader_.srcUrl}};this.trigger({type:"manifestparsestart",metadata:t});let n;try{n=$de({mainXml:this.mainPlaylistLoader_.mainXml_,srcUrl:this.mainPlaylistLoader_.srcUrl,clientOffset:this.mainPlaylistLoader_.clientOffset_,sidxMapping:this.mainPlaylistLoader_.sidxMapping_,previousManifest:e})}catch(s){this.error=s,this.error.metadata={errorType:Se.Error.StreamingDashManifestParserError,error:s},this.trigger("error")}e&&(n=zde(e,n,this.mainPlaylistLoader_.sidxMapping_)),this.mainPlaylistLoader_.main=n||e;const i=this.mainPlaylistLoader_.main.locations&&this.mainPlaylistLoader_.main.locations[0];if(i&&i!==this.mainPlaylistLoader_.srcUrl&&(this.mainPlaylistLoader_.srcUrl=i),(!e||n&&n.minimumUpdatePeriod!==e.minimumUpdatePeriod)&&this.updateMinimumUpdatePeriodTimeout_(),this.addEventStreamToMetadataTrack_(n),n){const{duration:s,endList:a}=n,o=[];n.playlists.forEach(u=>{o.push({id:u.id,bandwidth:u.attributes.BANDWIDTH,resolution:u.attributes.RESOLUTION,codecs:u.attributes.CODECS})});const l={duration:s,isLive:!a,renditions:o};t.parsedManifest=l,this.trigger({type:"manifestparsecomplete",metadata:t})}return!!n}updateMinimumUpdatePeriodTimeout_(){const e=this.mainPlaylistLoader_;e.createMupOnMedia_&&(e.off("loadedmetadata",e.createMupOnMedia_),e.createMupOnMedia_=null),e.minimumUpdatePeriodTimeout_&&(X.clearTimeout(e.minimumUpdatePeriodTimeout_),e.minimumUpdatePeriodTimeout_=null);let t=e.main&&e.main.minimumUpdatePeriod;if(t===0&&(e.media()?t=e.media().targetDuration*1e3:(e.createMupOnMedia_=e.updateMinimumUpdatePeriodTimeout_,e.one("loadedmetadata",e.createMupOnMedia_))),typeof t!="number"||t<=0){t<0&&this.logger_(`found invalid minimumUpdatePeriod of ${t}, not setting a timeout`);return}this.createMUPTimeout_(t)}createMUPTimeout_(e){const t=this.mainPlaylistLoader_;t.minimumUpdatePeriodTimeout_=X.setTimeout(()=>{t.minimumUpdatePeriodTimeout_=null,t.trigger("minimumUpdatePeriod"),t.createMUPTimeout_(e)},e)}refreshXml_(){this.requestMain_((e,t)=>{t&&(this.media_&&(this.media_=this.mainPlaylistLoader_.main.playlists[this.media_.id]),this.mainPlaylistLoader_.sidxMapping_=Vde(this.mainPlaylistLoader_.main,this.mainPlaylistLoader_.sidxMapping_),this.addSidxSegments_(this.media(),this.state,n=>{this.refreshMedia_(this.media().id)}))})}refreshMedia_(e){if(!e)throw new Error("refreshMedia_ must take a media id");this.media_&&this.isMain_&&this.handleMain_();const t=this.mainPlaylistLoader_.main.playlists,n=!this.media_||this.media_!==t[e];if(n?this.media_=t[e]:this.trigger("playlistunchanged"),!this.mediaUpdateTimeout){const i=()=>{this.media().endList||(this.mediaUpdateTimeout=X.setTimeout(()=>{this.trigger("mediaupdatetimeout"),i()},Jw(this.media(),!!n)))};i()}this.trigger("loadedplaylist")}addEventStreamToMetadataTrack_(e){if(e&&this.mainPlaylistLoader_.main.eventStream){const t=this.mainPlaylistLoader_.main.eventStream.map(n=>({cueTime:n.start,frames:[{data:n.messageData}]}));this.addMetadataToTextTrack("EventStream",t,this.mainPlaylistLoader_.main.duration)}}getKeyIdSet(e){if(e.contentProtection){const t=new Set;for(const n in e.contentProtection){const i=e.contentProtection[n].attributes["cenc:default_KID"];i&&t.add(i.replace(/-/g,"").toLowerCase())}return t}}};var Yi={GOAL_BUFFER_LENGTH:30,MAX_GOAL_BUFFER_LENGTH:60,BACK_BUFFER_LENGTH:30,GOAL_BUFFER_LENGTH_RATE:1,INITIAL_BANDWIDTH:4194304,BANDWIDTH_VARIANCE:1.2,BUFFER_LOW_WATER_LINE:0,MAX_BUFFER_LOW_WATER_LINE:30,EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE:16,BUFFER_LOW_WATER_LINE_RATE:1,BUFFER_HIGH_WATER_LINE:30};const Wde=r=>{const e=new Uint8Array(new ArrayBuffer(r.length));for(let t=0;t<r.length;t++)e[t]=r.charCodeAt(t);return e.buffer},mU=function(r){return r.on=r.addEventListener,r.off=r.removeEventListener,r},qde=function(r){try{return URL.createObjectURL(new Blob([r],{type:"application/javascript"}))}catch{const t=new BlobBuilder;return t.append(r),URL.createObjectURL(t.getBlob())}},gU=function(r){return function(){const e=qde(r),t=mU(new Worker(e));t.objURL=e;const n=t.terminate;return t.on=t.addEventListener,t.off=t.removeEventListener,t.terminate=function(){return URL.revokeObjectURL(e),n.call(this)},t}},vU=function(r){return`var browserWorkerPolyFill = ${mU.toString()};
browserWorkerPolyFill(self);
`+r},yU=function(r){return r.toString().replace(/^function.+?{/,"").slice(0,-1)},Gde=vU(yU(function(){var r=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},e=function(){this.init=function(){var f={};this.on=function(_,S){f[_]||(f[_]=[]),f[_]=f[_].concat(S)},this.off=function(_,S){var b;return f[_]?(b=f[_].indexOf(S),f[_]=f[_].slice(),f[_].splice(b,1),b>-1):!1},this.trigger=function(_){var S,b,C,P;if(S=f[_],!!S)if(arguments.length===2)for(C=S.length,b=0;b<C;++b)S[b].call(this,arguments[1]);else{for(P=[],b=arguments.length,b=1;b<arguments.length;++b)P.push(arguments[b]);for(C=S.length,b=0;b<C;++b)S[b].apply(this,P)}},this.dispose=function(){f={}}}};e.prototype.pipe=function(f){return this.on("data",function(_){f.push(_)}),this.on("done",function(_){f.flush(_)}),this.on("partialdone",function(_){f.partialFlush(_)}),this.on("endedtimeline",function(_){f.endTimeline(_)}),this.on("reset",function(_){f.reset(_)}),f},e.prototype.push=function(f){this.trigger("data",f)},e.prototype.flush=function(f){this.trigger("done",f)},e.prototype.partialFlush=function(f){this.trigger("partialdone",f)},e.prototype.endTimeline=function(f){this.trigger("endedtimeline",f)},e.prototype.reset=function(f){this.trigger("reset",f)};var t=e,n=Math.pow(2,32),i=function(f){var _=new DataView(f.buffer,f.byteOffset,f.byteLength),S;return _.getBigUint64?(S=_.getBigUint64(0),S<Number.MAX_SAFE_INTEGER?Number(S):S):_.getUint32(0)*n+_.getUint32(4)},s={getUint64:i,MAX_UINT32:n},a=s.MAX_UINT32,o,l,u,c,h,m,g,y,v,x,w,E,D,I,A,L,N,U,B,k,H,q,V,Q,ie,le,he,ae,ne,ue,ee,pe,me,xe,Be,Oe;(function(){var f;if(V={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],mvex:[],mvhd:[],pasp:[],sdtp:[],smhd:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],styp:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[]},!(typeof Uint8Array>"u")){for(f in V)V.hasOwnProperty(f)&&(V[f]=[f.charCodeAt(0),f.charCodeAt(1),f.charCodeAt(2),f.charCodeAt(3)]);Q=new Uint8Array([105,115,111,109]),le=new Uint8Array([97,118,99,49]),ie=new Uint8Array([0,0,0,1]),he=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),ae=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]),ne={video:he,audio:ae},pe=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),ee=new Uint8Array([0,0,0,0,0,0,0,0]),me=new Uint8Array([0,0,0,0,0,0,0,0]),xe=me,Be=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),Oe=me,ue=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0])}})(),o=function(f){var _=[],S=0,b,C,P;for(b=1;b<arguments.length;b++)_.push(arguments[b]);for(b=_.length;b--;)S+=_[b].byteLength;for(C=new Uint8Array(S+8),P=new DataView(C.buffer,C.byteOffset,C.byteLength),P.setUint32(0,C.byteLength),C.set(f,4),b=0,S=8;b<_.length;b++)C.set(_[b],S),S+=_[b].byteLength;return C},l=function(){return o(V.dinf,o(V.dref,pe))},u=function(f){return o(V.esds,new Uint8Array([0,0,0,0,3,25,0,0,0,4,17,64,21,0,6,0,0,0,218,192,0,0,218,192,5,2,f.audioobjecttype<<3|f.samplingfrequencyindex>>>1,f.samplingfrequencyindex<<7|f.channelcount<<3,6,1,2]))},c=function(){return o(V.ftyp,Q,ie,Q,le)},L=function(f){return o(V.hdlr,ne[f])},h=function(f){return o(V.mdat,f)},A=function(f){var _=new Uint8Array([0,0,0,0,0,0,0,2,0,0,0,3,0,1,95,144,f.duration>>>24&255,f.duration>>>16&255,f.duration>>>8&255,f.duration&255,85,196,0,0]);return f.samplerate&&(_[12]=f.samplerate>>>24&255,_[13]=f.samplerate>>>16&255,_[14]=f.samplerate>>>8&255,_[15]=f.samplerate&255),o(V.mdhd,_)},I=function(f){return o(V.mdia,A(f),L(f.type),g(f))},m=function(f){return o(V.mfhd,new Uint8Array([0,0,0,0,(f&4278190080)>>24,(f&16711680)>>16,(f&65280)>>8,f&255]))},g=function(f){return o(V.minf,f.type==="video"?o(V.vmhd,ue):o(V.smhd,ee),l(),U(f))},y=function(f,_){for(var S=[],b=_.length;b--;)S[b]=k(_[b]);return o.apply(null,[V.moof,m(f)].concat(S))},v=function(f){for(var _=f.length,S=[];_--;)S[_]=E(f[_]);return o.apply(null,[V.moov,w(4294967295)].concat(S).concat(x(f)))},x=function(f){for(var _=f.length,S=[];_--;)S[_]=H(f[_]);return o.apply(null,[V.mvex].concat(S))},w=function(f){var _=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,2,0,1,95,144,(f&4278190080)>>24,(f&16711680)>>16,(f&65280)>>8,f&255,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return o(V.mvhd,_)},N=function(f){var _=f.samples||[],S=new Uint8Array(4+_.length),b,C;for(C=0;C<_.length;C++)b=_[C].flags,S[C+4]=b.dependsOn<<4|b.isDependedOn<<2|b.hasRedundancy;return o(V.sdtp,S)},U=function(f){return o(V.stbl,B(f),o(V.stts,Oe),o(V.stsc,xe),o(V.stsz,Be),o(V.stco,me))},(function(){var f,_;B=function(S){return o(V.stsd,new Uint8Array([0,0,0,0,0,0,0,1]),S.type==="video"?f(S):_(S))},f=function(S){var b=S.sps||[],C=S.pps||[],P=[],G=[],Y,J;for(Y=0;Y<b.length;Y++)P.push((b[Y].byteLength&65280)>>>8),P.push(b[Y].byteLength&255),P=P.concat(Array.prototype.slice.call(b[Y]));for(Y=0;Y<C.length;Y++)G.push((C[Y].byteLength&65280)>>>8),G.push(C[Y].byteLength&255),G=G.concat(Array.prototype.slice.call(C[Y]));if(J=[V.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,(S.width&65280)>>8,S.width&255,(S.height&65280)>>8,S.height&255,0,72,0,0,0,72,0,0,0,0,0,0,0,1,19,118,105,100,101,111,106,115,45,99,111,110,116,114,105,98,45,104,108,115,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),o(V.avcC,new Uint8Array([1,S.profileIdc,S.profileCompatibility,S.levelIdc,255].concat([b.length],P,[C.length],G))),o(V.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192]))],S.sarRatio){var re=S.sarRatio[0],de=S.sarRatio[1];J.push(o(V.pasp,new Uint8Array([(re&4278190080)>>24,(re&16711680)>>16,(re&65280)>>8,re&255,(de&4278190080)>>24,(de&16711680)>>16,(de&65280)>>8,de&255])))}return o.apply(null,J)},_=function(S){return o(V.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,(S.channelcount&65280)>>8,S.channelcount&255,(S.samplesize&65280)>>8,S.samplesize&255,0,0,0,0,(S.samplerate&65280)>>8,S.samplerate&255,0,0]),u(S))}})(),D=function(f){var _=new Uint8Array([0,0,0,7,0,0,0,0,0,0,0,0,(f.id&4278190080)>>24,(f.id&16711680)>>16,(f.id&65280)>>8,f.id&255,0,0,0,0,(f.duration&4278190080)>>24,(f.duration&16711680)>>16,(f.duration&65280)>>8,f.duration&255,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,(f.width&65280)>>8,f.width&255,0,0,(f.height&65280)>>8,f.height&255,0,0]);return o(V.tkhd,_)},k=function(f){var _,S,b,C,P,G,Y;return _=o(V.tfhd,new Uint8Array([0,0,0,58,(f.id&4278190080)>>24,(f.id&16711680)>>16,(f.id&65280)>>8,f.id&255,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0])),G=Math.floor(f.baseMediaDecodeTime/a),Y=Math.floor(f.baseMediaDecodeTime%a),S=o(V.tfdt,new Uint8Array([1,0,0,0,G>>>24&255,G>>>16&255,G>>>8&255,G&255,Y>>>24&255,Y>>>16&255,Y>>>8&255,Y&255])),P=92,f.type==="audio"?(b=q(f,P),o(V.traf,_,S,b)):(C=N(f),b=q(f,C.length+P),o(V.traf,_,S,b,C))},E=function(f){return f.duration=f.duration||4294967295,o(V.trak,D(f),I(f))},H=function(f){var _=new Uint8Array([0,0,0,0,(f.id&4278190080)>>24,(f.id&16711680)>>16,(f.id&65280)>>8,f.id&255,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]);return f.type!=="video"&&(_[_.length-1]=0),o(V.trex,_)},(function(){var f,_,S;S=function(b,C){var P=0,G=0,Y=0,J=0;return b.length&&(b[0].duration!==void 0&&(P=1),b[0].size!==void 0&&(G=2),b[0].flags!==void 0&&(Y=4),b[0].compositionTimeOffset!==void 0&&(J=8)),[0,0,P|G|Y|J,1,(b.length&4278190080)>>>24,(b.length&16711680)>>>16,(b.length&65280)>>>8,b.length&255,(C&4278190080)>>>24,(C&16711680)>>>16,(C&65280)>>>8,C&255]},_=function(b,C){var P,G,Y,J,re,de;for(J=b.samples||[],C+=20+16*J.length,Y=S(J,C),G=new Uint8Array(Y.length+J.length*16),G.set(Y),P=Y.length,de=0;de<J.length;de++)re=J[de],G[P++]=(re.duration&4278190080)>>>24,G[P++]=(re.duration&16711680)>>>16,G[P++]=(re.duration&65280)>>>8,G[P++]=re.duration&255,G[P++]=(re.size&4278190080)>>>24,G[P++]=(re.size&16711680)>>>16,G[P++]=(re.size&65280)>>>8,G[P++]=re.size&255,G[P++]=re.flags.isLeading<<2|re.flags.dependsOn,G[P++]=re.flags.isDependedOn<<6|re.flags.hasRedundancy<<4|re.flags.paddingValue<<1|re.flags.isNonSyncSample,G[P++]=re.flags.degradationPriority&61440,G[P++]=re.flags.degradationPriority&15,G[P++]=(re.compositionTimeOffset&4278190080)>>>24,G[P++]=(re.compositionTimeOffset&16711680)>>>16,G[P++]=(re.compositionTimeOffset&65280)>>>8,G[P++]=re.compositionTimeOffset&255;return o(V.trun,G)},f=function(b,C){var P,G,Y,J,re,de;for(J=b.samples||[],C+=20+8*J.length,Y=S(J,C),P=new Uint8Array(Y.length+J.length*8),P.set(Y),G=Y.length,de=0;de<J.length;de++)re=J[de],P[G++]=(re.duration&4278190080)>>>24,P[G++]=(re.duration&16711680)>>>16,P[G++]=(re.duration&65280)>>>8,P[G++]=re.duration&255,P[G++]=(re.size&4278190080)>>>24,P[G++]=(re.size&16711680)>>>16,P[G++]=(re.size&65280)>>>8,P[G++]=re.size&255;return o(V.trun,P)},q=function(b,C){return b.type==="audio"?f(b,C):_(b,C)}})();var dt={ftyp:c,mdat:h,moof:y,moov:v,initSegment:function(f){var _=c(),S=v(f),b;return b=new Uint8Array(_.byteLength+S.byteLength),b.set(_),b.set(S,_.byteLength),b}},Ke=function(f){var _,S,b=[],C=[];for(C.byteLength=0,C.nalCount=0,C.duration=0,b.byteLength=0,_=0;_<f.length;_++)S=f[_],S.nalUnitType==="access_unit_delimiter_rbsp"?(b.length&&(b.duration=S.dts-b.dts,C.byteLength+=b.byteLength,C.nalCount+=b.length,C.duration+=b.duration,C.push(b)),b=[S],b.byteLength=S.data.byteLength,b.pts=S.pts,b.dts=S.dts):(S.nalUnitType==="slice_layer_without_partitioning_rbsp_idr"&&(b.keyFrame=!0),b.duration=S.dts-b.dts,b.byteLength+=S.data.byteLength,b.push(S));return C.length&&(!b.duration||b.duration<=0)&&(b.duration=C[C.length-1].duration),C.byteLength+=b.byteLength,C.nalCount+=b.length,C.duration+=b.duration,C.push(b),C},_t=function(f){var _,S,b=[],C=[];for(b.byteLength=0,b.nalCount=0,b.duration=0,b.pts=f[0].pts,b.dts=f[0].dts,C.byteLength=0,C.nalCount=0,C.duration=0,C.pts=f[0].pts,C.dts=f[0].dts,_=0;_<f.length;_++)S=f[_],S.keyFrame?(b.length&&(C.push(b),C.byteLength+=b.byteLength,C.nalCount+=b.nalCount,C.duration+=b.duration),b=[S],b.nalCount=S.length,b.byteLength=S.byteLength,b.pts=S.pts,b.dts=S.dts,b.duration=S.duration):(b.duration+=S.duration,b.nalCount+=S.length,b.byteLength+=S.byteLength,b.push(S));return C.length&&b.duration<=0&&(b.duration=C[C.length-1].duration),C.byteLength+=b.byteLength,C.nalCount+=b.nalCount,C.duration+=b.duration,C.push(b),C},Ze=function(f){var _;return!f[0][0].keyFrame&&f.length>1&&(_=f.shift(),f.byteLength-=_.byteLength,f.nalCount-=_.nalCount,f[0][0].dts=_.dts,f[0][0].pts=_.pts,f[0][0].duration+=_.duration),f},Ot=function(){return{size:0,flags:{isLeading:0,dependsOn:1,isDependedOn:0,hasRedundancy:0,degradationPriority:0,isNonSyncSample:1}}},Nt=function(f,_){var S=Ot();return S.dataOffset=_,S.compositionTimeOffset=f.pts-f.dts,S.duration=f.duration,S.size=4*f.length,S.size+=f.byteLength,f.keyFrame&&(S.flags.dependsOn=2,S.flags.isNonSyncSample=0),S},qe=function(f,_){var S,b,C,P,G,Y=_||0,J=[];for(S=0;S<f.length;S++)for(P=f[S],b=0;b<P.length;b++)G=P[b],C=Nt(G,Y),Y+=C.size,J.push(C);return J},Ue=function(f){var _,S,b,C,P,G,Y=0,J=f.byteLength,re=f.nalCount,de=J+4*re,ve=new Uint8Array(de),Ve=new DataView(ve.buffer);for(_=0;_<f.length;_++)for(C=f[_],S=0;S<C.length;S++)for(P=C[S],b=0;b<P.length;b++)G=P[b],Ve.setUint32(Y,G.data.byteLength),Y+=4,ve.set(G.data,Y),Y+=G.data.byteLength;return ve},Pe=function(f,_){var S,b=_||0,C=[];return S=Nt(f,b),C.push(S),C},$e=function(f){var _,S,b=0,C=f.byteLength,P=f.length,G=C+4*P,Y=new Uint8Array(G),J=new DataView(Y.buffer);for(_=0;_<f.length;_++)S=f[_],J.setUint32(b,S.data.byteLength),b+=4,Y.set(S.data,b),b+=S.data.byteLength;return Y},rt={groupNalsIntoFrames:Ke,groupFramesIntoGops:_t,extendFirstKeyFrame:Ze,generateSampleTable:qe,concatenateNalData:Ue,generateSampleTableForFrame:Pe,concatenateNalDataForFrame:$e},lt=[33,16,5,32,164,27],ht=[33,65,108,84,1,2,4,8,168,2,4,8,17,191,252],ut=function(f){for(var _=[];f--;)_.push(0);return _},St=function(f){return Object.keys(f).reduce(function(_,S){return _[S]=new Uint8Array(f[S].reduce(function(b,C){return b.concat(C)},[])),_},{})},ot,yr=function(){if(!ot){var f={96e3:[lt,[227,64],ut(154),[56]],88200:[lt,[231],ut(170),[56]],64e3:[lt,[248,192],ut(240),[56]],48e3:[lt,[255,192],ut(268),[55,148,128],ut(54),[112]],44100:[lt,[255,192],ut(268),[55,163,128],ut(84),[112]],32e3:[lt,[255,192],ut(268),[55,234],ut(226),[112]],24e3:[lt,[255,192],ut(268),[55,255,128],ut(268),[111,112],ut(126),[224]],16e3:[lt,[255,192],ut(268),[55,255,128],ut(268),[111,255],ut(269),[223,108],ut(195),[1,192]],12e3:[ht,ut(268),[3,127,248],ut(268),[6,255,240],ut(268),[13,255,224],ut(268),[27,253,128],ut(259),[56]],11025:[ht,ut(268),[3,127,248],ut(268),[6,255,240],ut(268),[13,255,224],ut(268),[27,255,192],ut(268),[55,175,128],ut(108),[112]],8e3:[ht,ut(268),[3,121,16],ut(47),[7]]};ot=St(f)}return ot},pr=9e4,jr,ur,Wt,mr,Tr,Nr,Tt;jr=function(f){return f*pr},ur=function(f,_){return f*_},Wt=function(f){return f/pr},mr=function(f,_){return f/_},Tr=function(f,_){return jr(mr(f,_))},Nr=function(f,_){return ur(Wt(f),_)},Tt=function(f,_,S){return Wt(S?f:f-_)};var Ht={ONE_SECOND_IN_TS:pr,secondsToVideoTs:jr,secondsToAudioTs:ur,videoTsToSeconds:Wt,audioTsToSeconds:mr,audioTsToVideoTs:Tr,videoTsToAudioTs:Nr,metadataTsToSeconds:Tt},An=yr,Vt=Ht,Cr=function(f){var _,S,b=0;for(_=0;_<f.length;_++)S=f[_],b+=S.data.byteLength;return b},Ur=function(f,_,S,b){var C,P=0,G=0,Y=0,J=0,re,de,ve;if(_.length&&(C=Vt.audioTsToVideoTs(f.baseMediaDecodeTime,f.samplerate),P=Math.ceil(Vt.ONE_SECOND_IN_TS/(f.samplerate/1024)),S&&b&&(G=C-Math.max(S,b),Y=Math.floor(G/P),J=Y*P),!(Y<1||J>Vt.ONE_SECOND_IN_TS/2))){for(re=An()[f.samplerate],re||(re=_[0].data),de=0;de<Y;de++)ve=_[0],_.splice(0,0,{data:re,dts:ve.dts-P,pts:ve.pts-P});return f.baseMediaDecodeTime-=Math.floor(Vt.videoTsToAudioTs(J,f.samplerate)),J}},qr=function(f,_,S){return _.minSegmentDts>=S?f:(_.minSegmentDts=1/0,f.filter(function(b){return b.dts>=S?(_.minSegmentDts=Math.min(_.minSegmentDts,b.dts),_.minSegmentPts=_.minSegmentDts,!0):!1}))},En=function(f){var _,S,b=[];for(_=0;_<f.length;_++)S=f[_],b.push({size:S.data.byteLength,duration:1024});return b},Dn=function(f){var _,S,b=0,C=new Uint8Array(Cr(f));for(_=0;_<f.length;_++)S=f[_],C.set(S.data,b),b+=S.data.byteLength;return C},In={prefixWithSilence:Ur,trimAdtsFramesByEarliestDts:qr,generateSampleTable:En,concatenateFrameData:Dn},Mr=Ht.ONE_SECOND_IN_TS,se=function(f,_){typeof _.pts=="number"&&(f.timelineStartInfo.pts===void 0&&(f.timelineStartInfo.pts=_.pts),f.minSegmentPts===void 0?f.minSegmentPts=_.pts:f.minSegmentPts=Math.min(f.minSegmentPts,_.pts),f.maxSegmentPts===void 0?f.maxSegmentPts=_.pts:f.maxSegmentPts=Math.max(f.maxSegmentPts,_.pts)),typeof _.dts=="number"&&(f.timelineStartInfo.dts===void 0&&(f.timelineStartInfo.dts=_.dts),f.minSegmentDts===void 0?f.minSegmentDts=_.dts:f.minSegmentDts=Math.min(f.minSegmentDts,_.dts),f.maxSegmentDts===void 0?f.maxSegmentDts=_.dts:f.maxSegmentDts=Math.max(f.maxSegmentDts,_.dts))},fe=function(f){delete f.minSegmentDts,delete f.maxSegmentDts,delete f.minSegmentPts,delete f.maxSegmentPts},Te=function(f,_){var S,b,C=f.minSegmentDts;return _||(C-=f.timelineStartInfo.dts),S=f.timelineStartInfo.baseMediaDecodeTime,S+=C,S=Math.max(0,S),f.type==="audio"&&(b=f.samplerate/Mr,S*=b,S=Math.floor(S)),S},je={clearDtsInfo:fe,calculateTrackBaseMediaDecodeTime:Te,collectDtsInfo:se},pt=4,Gt=128,be=function(f){for(var _=0,S={payloadType:-1,payloadSize:0},b=0,C=0;_<f.byteLength&&f[_]!==Gt;){for(;f[_]===255;)b+=255,_++;for(b+=f[_++];f[_]===255;)C+=255,_++;if(C+=f[_++],!S.payload&&b===pt){var P=String.fromCharCode(f[_+3],f[_+4],f[_+5],f[_+6]);if(P==="GA94"){S.payloadType=b,S.payloadSize=C,S.payload=f.subarray(_,_+C);break}else S.payload=void 0}_+=C,b=0,C=0}return S},ye=function(f){return f.payload[0]!==181||(f.payload[1]<<8|f.payload[2])!==49||String.fromCharCode(f.payload[3],f.payload[4],f.payload[5],f.payload[6])!=="GA94"||f.payload[7]!==3?null:f.payload.subarray(8,f.payload.length-1)},Ae=function(f,_){var S=[],b,C,P,G;if(!(_[0]&64))return S;for(C=_[0]&31,b=0;b<C;b++)P=b*3,G={type:_[P+2]&3,pts:f},_[P+2]&4&&(G.ccData=_[P+3]<<8|_[P+4],S.push(G));return S},Ge=function(f){for(var _=f.byteLength,S=[],b=1,C,P;b<_-2;)f[b]===0&&f[b+1]===0&&f[b+2]===3?(S.push(b+2),b+=2):b++;if(S.length===0)return f;C=_-S.length,P=new Uint8Array(C);var G=0;for(b=0;b<C;G++,b++)G===S[0]&&(G++,S.shift()),P[b]=f[G];return P},Xe={parseSei:be,parseUserData:ye,parseCaptionPackets:Ae,discardEmulationPreventionBytes:Ge,USER_DATA_REGISTERED_ITU_T_T35:pt},yt=t,At=Xe,st=function(f){f=f||{},st.prototype.init.call(this),this.parse708captions_=typeof f.parse708captions=="boolean"?f.parse708captions:!0,this.captionPackets_=[],this.ccStreams_=[new er(0,0),new er(0,1),new er(1,0),new er(1,1)],this.parse708captions_&&(this.cc708Stream_=new xt({captionServices:f.captionServices})),this.reset(),this.ccStreams_.forEach(function(_){_.on("data",this.trigger.bind(this,"data")),_.on("partialdone",this.trigger.bind(this,"partialdone")),_.on("done",this.trigger.bind(this,"done"))},this),this.parse708captions_&&(this.cc708Stream_.on("data",this.trigger.bind(this,"data")),this.cc708Stream_.on("partialdone",this.trigger.bind(this,"partialdone")),this.cc708Stream_.on("done",this.trigger.bind(this,"done")))};st.prototype=new yt,st.prototype.push=function(f){var _,S,b;if(f.nalUnitType==="sei_rbsp"&&(_=At.parseSei(f.escapedRBSP),!!_.payload&&_.payloadType===At.USER_DATA_REGISTERED_ITU_T_T35&&(S=At.parseUserData(_),!!S))){if(f.dts<this.latestDts_){this.ignoreNextEqualDts_=!0;return}else if(f.dts===this.latestDts_&&this.ignoreNextEqualDts_){this.numSameDts_--,this.numSameDts_||(this.ignoreNextEqualDts_=!1);return}b=At.parseCaptionPackets(f.pts,S),this.captionPackets_=this.captionPackets_.concat(b),this.latestDts_!==f.dts&&(this.numSameDts_=0),this.numSameDts_++,this.latestDts_=f.dts}},st.prototype.flushCCStreams=function(f){this.ccStreams_.forEach(function(_){return f==="flush"?_.flush():_.partialFlush()},this)},st.prototype.flushStream=function(f){if(!this.captionPackets_.length){this.flushCCStreams(f);return}this.captionPackets_.forEach(function(_,S){_.presortIndex=S}),this.captionPackets_.sort(function(_,S){return _.pts===S.pts?_.presortIndex-S.presortIndex:_.pts-S.pts}),this.captionPackets_.forEach(function(_){_.type<2?this.dispatchCea608Packet(_):this.dispatchCea708Packet(_)},this),this.captionPackets_.length=0,this.flushCCStreams(f)},st.prototype.flush=function(){return this.flushStream("flush")},st.prototype.partialFlush=function(){return this.flushStream("partialFlush")},st.prototype.reset=function(){this.latestDts_=null,this.ignoreNextEqualDts_=!1,this.numSameDts_=0,this.activeCea608Channel_=[null,null],this.ccStreams_.forEach(function(f){f.reset()})},st.prototype.dispatchCea608Packet=function(f){this.setsTextOrXDSActive(f)?this.activeCea608Channel_[f.type]=null:this.setsChannel1Active(f)?this.activeCea608Channel_[f.type]=0:this.setsChannel2Active(f)&&(this.activeCea608Channel_[f.type]=1),this.activeCea608Channel_[f.type]!==null&&this.ccStreams_[(f.type<<1)+this.activeCea608Channel_[f.type]].push(f)},st.prototype.setsChannel1Active=function(f){return(f.ccData&30720)===4096},st.prototype.setsChannel2Active=function(f){return(f.ccData&30720)===6144},st.prototype.setsTextOrXDSActive=function(f){return(f.ccData&28928)===256||(f.ccData&30974)===4138||(f.ccData&30974)===6186},st.prototype.dispatchCea708Packet=function(f){this.parse708captions_&&this.cc708Stream_.push(f)};var gt={127:9834,4128:32,4129:160,4133:8230,4138:352,4140:338,4144:9608,4145:8216,4146:8217,4147:8220,4148:8221,4149:8226,4153:8482,4154:353,4156:339,4157:8480,4159:376,4214:8539,4215:8540,4216:8541,4217:8542,4218:9168,4219:9124,4220:9123,4221:9135,4222:9126,4223:9121,4256:12600},jt=function(f){var _=gt[f]||f;return f&4096&&f===_?"":String.fromCharCode(_)},Kt=function(f){return 32<=f&&f<=127||160<=f&&f<=255},Ft=function(f){this.windowNum=f,this.reset()};Ft.prototype.reset=function(){this.clearText(),this.pendingNewLine=!1,this.winAttr={},this.penAttr={},this.penLoc={},this.penColor={},this.visible=0,this.rowLock=0,this.columnLock=0,this.priority=0,this.relativePositioning=0,this.anchorVertical=0,this.anchorHorizontal=0,this.anchorPoint=0,this.rowCount=1,this.virtualRowCount=this.rowCount+1,this.columnCount=41,this.windowStyle=0,this.penStyle=0},Ft.prototype.getText=function(){return this.rows.join(`
`)},Ft.prototype.clearText=function(){this.rows=[""],this.rowIdx=0},Ft.prototype.newLine=function(f){for(this.rows.length>=this.virtualRowCount&&typeof this.beforeRowOverflow=="function"&&this.beforeRowOverflow(f),this.rows.length>0&&(this.rows.push(""),this.rowIdx++);this.rows.length>this.virtualRowCount;)this.rows.shift(),this.rowIdx--},Ft.prototype.isEmpty=function(){return this.rows.length===0?!0:this.rows.length===1?this.rows[0]==="":!1},Ft.prototype.addText=function(f){this.rows[this.rowIdx]+=f},Ft.prototype.backspace=function(){if(!this.isEmpty()){var f=this.rows[this.rowIdx];this.rows[this.rowIdx]=f.substr(0,f.length-1)}};var dr=function(f,_,S){this.serviceNum=f,this.text="",this.currentWindow=new Ft(-1),this.windows=[],this.stream=S,typeof _=="string"&&this.createTextDecoder(_)};dr.prototype.init=function(f,_){this.startPts=f;for(var S=0;S<8;S++)this.windows[S]=new Ft(S),typeof _=="function"&&(this.windows[S].beforeRowOverflow=_)},dr.prototype.setCurrentWindow=function(f){this.currentWindow=this.windows[f]},dr.prototype.createTextDecoder=function(f){if(typeof TextDecoder>"u")this.stream.trigger("log",{level:"warn",message:"The `encoding` option is unsupported without TextDecoder support"});else try{this.textDecoder_=new TextDecoder(f)}catch(_){this.stream.trigger("log",{level:"warn",message:"TextDecoder could not be created with "+f+" encoding. "+_})}};var xt=function(f){f=f||{},xt.prototype.init.call(this);var _=this,S=f.captionServices||{},b={},C;Object.keys(S).forEach(P=>{C=S[P],/^SERVICE/.test(P)&&(b[P]=C.encoding)}),this.serviceEncodings=b,this.current708Packet=null,this.services={},this.push=function(P){P.type===3?(_.new708Packet(),_.add708Bytes(P)):(_.current708Packet===null&&_.new708Packet(),_.add708Bytes(P))}};xt.prototype=new yt,xt.prototype.new708Packet=function(){this.current708Packet!==null&&this.push708Packet(),this.current708Packet={data:[],ptsVals:[]}},xt.prototype.add708Bytes=function(f){var _=f.ccData,S=_>>>8,b=_&255;this.current708Packet.ptsVals.push(f.pts),this.current708Packet.data.push(S),this.current708Packet.data.push(b)},xt.prototype.push708Packet=function(){var f=this.current708Packet,_=f.data,S=null,b=null,C=0,P=_[C++];for(f.seq=P>>6,f.sizeCode=P&63;C<_.length;C++)P=_[C++],S=P>>5,b=P&31,S===7&&b>0&&(P=_[C++],S=P),this.pushServiceBlock(S,C,b),b>0&&(C+=b-1)},xt.prototype.pushServiceBlock=function(f,_,S){var b,C=_,P=this.current708Packet.data,G=this.services[f];for(G||(G=this.initService(f,C));C<_+S&&C<P.length;C++)b=P[C],Kt(b)?C=this.handleText(C,G):b===24?C=this.multiByteCharacter(C,G):b===16?C=this.extendedCommands(C,G):128<=b&&b<=135?C=this.setCurrentWindow(C,G):152<=b&&b<=159?C=this.defineWindow(C,G):b===136?C=this.clearWindows(C,G):b===140?C=this.deleteWindows(C,G):b===137?C=this.displayWindows(C,G):b===138?C=this.hideWindows(C,G):b===139?C=this.toggleWindows(C,G):b===151?C=this.setWindowAttributes(C,G):b===144?C=this.setPenAttributes(C,G):b===145?C=this.setPenColor(C,G):b===146?C=this.setPenLocation(C,G):b===143?G=this.reset(C,G):b===8?G.currentWindow.backspace():b===12?G.currentWindow.clearText():b===13?G.currentWindow.pendingNewLine=!0:b===14?G.currentWindow.clearText():b===141&&C++},xt.prototype.extendedCommands=function(f,_){var S=this.current708Packet.data,b=S[++f];return Kt(b)&&(f=this.handleText(f,_,{isExtended:!0})),f},xt.prototype.getPts=function(f){return this.current708Packet.ptsVals[Math.floor(f/2)]},xt.prototype.initService=function(f,_){var b="SERVICE"+f,S=this,b,C;return b in this.serviceEncodings&&(C=this.serviceEncodings[b]),this.services[f]=new dr(f,C,S),this.services[f].init(this.getPts(_),function(P){S.flushDisplayed(P,S.services[f])}),this.services[f]},xt.prototype.handleText=function(f,_,S){var b=S&&S.isExtended,C=S&&S.isMultiByte,P=this.current708Packet.data,G=b?4096:0,Y=P[f],J=P[f+1],re=_.currentWindow,de,ve;function Ve(Ee){return Ee.map(bt=>("0"+(bt&255).toString(16)).slice(-2)).join("")}if(C?(ve=[Y,J],f++):ve=[Y],_.textDecoder_&&!b)de=_.textDecoder_.decode(new Uint8Array(ve));else if(C){const Ee=Ve(ve);de=String.fromCharCode(parseInt(Ee,16))}else de=jt(G|Y);return re.pendingNewLine&&!re.isEmpty()&&re.newLine(this.getPts(f)),re.pendingNewLine=!1,re.addText(de),f},xt.prototype.multiByteCharacter=function(f,_){var S=this.current708Packet.data,b=S[f+1],C=S[f+2];return Kt(b)&&Kt(C)&&(f=this.handleText(++f,_,{isMultiByte:!0})),f},xt.prototype.setCurrentWindow=function(f,_){var S=this.current708Packet.data,b=S[f],C=b&7;return _.setCurrentWindow(C),f},xt.prototype.defineWindow=function(f,_){var S=this.current708Packet.data,b=S[f],C=b&7;_.setCurrentWindow(C);var P=_.currentWindow;return b=S[++f],P.visible=(b&32)>>5,P.rowLock=(b&16)>>4,P.columnLock=(b&8)>>3,P.priority=b&7,b=S[++f],P.relativePositioning=(b&128)>>7,P.anchorVertical=b&127,b=S[++f],P.anchorHorizontal=b,b=S[++f],P.anchorPoint=(b&240)>>4,P.rowCount=b&15,b=S[++f],P.columnCount=b&63,b=S[++f],P.windowStyle=(b&56)>>3,P.penStyle=b&7,P.virtualRowCount=P.rowCount+1,f},xt.prototype.setWindowAttributes=function(f,_){var S=this.current708Packet.data,b=S[f],C=_.currentWindow.winAttr;return b=S[++f],C.fillOpacity=(b&192)>>6,C.fillRed=(b&48)>>4,C.fillGreen=(b&12)>>2,C.fillBlue=b&3,b=S[++f],C.borderType=(b&192)>>6,C.borderRed=(b&48)>>4,C.borderGreen=(b&12)>>2,C.borderBlue=b&3,b=S[++f],C.borderType+=(b&128)>>5,C.wordWrap=(b&64)>>6,C.printDirection=(b&48)>>4,C.scrollDirection=(b&12)>>2,C.justify=b&3,b=S[++f],C.effectSpeed=(b&240)>>4,C.effectDirection=(b&12)>>2,C.displayEffect=b&3,f},xt.prototype.flushDisplayed=function(f,_){for(var S=[],b=0;b<8;b++)_.windows[b].visible&&!_.windows[b].isEmpty()&&S.push(_.windows[b].getText());_.endPts=f,_.text=S.join(`

`),this.pushCaption(_),_.startPts=f},xt.prototype.pushCaption=function(f){f.text!==""&&(this.trigger("data",{startPts:f.startPts,endPts:f.endPts,text:f.text,stream:"cc708_"+f.serviceNum}),f.text="",f.startPts=f.endPts)},xt.prototype.displayWindows=function(f,_){var S=this.current708Packet.data,b=S[++f],C=this.getPts(f);this.flushDisplayed(C,_);for(var P=0;P<8;P++)b&1<<P&&(_.windows[P].visible=1);return f},xt.prototype.hideWindows=function(f,_){var S=this.current708Packet.data,b=S[++f],C=this.getPts(f);this.flushDisplayed(C,_);for(var P=0;P<8;P++)b&1<<P&&(_.windows[P].visible=0);return f},xt.prototype.toggleWindows=function(f,_){var S=this.current708Packet.data,b=S[++f],C=this.getPts(f);this.flushDisplayed(C,_);for(var P=0;P<8;P++)b&1<<P&&(_.windows[P].visible^=1);return f},xt.prototype.clearWindows=function(f,_){var S=this.current708Packet.data,b=S[++f],C=this.getPts(f);this.flushDisplayed(C,_);for(var P=0;P<8;P++)b&1<<P&&_.windows[P].clearText();return f},xt.prototype.deleteWindows=function(f,_){var S=this.current708Packet.data,b=S[++f],C=this.getPts(f);this.flushDisplayed(C,_);for(var P=0;P<8;P++)b&1<<P&&_.windows[P].reset();return f},xt.prototype.setPenAttributes=function(f,_){var S=this.current708Packet.data,b=S[f],C=_.currentWindow.penAttr;return b=S[++f],C.textTag=(b&240)>>4,C.offset=(b&12)>>2,C.penSize=b&3,b=S[++f],C.italics=(b&128)>>7,C.underline=(b&64)>>6,C.edgeType=(b&56)>>3,C.fontStyle=b&7,f},xt.prototype.setPenColor=function(f,_){var S=this.current708Packet.data,b=S[f],C=_.currentWindow.penColor;return b=S[++f],C.fgOpacity=(b&192)>>6,C.fgRed=(b&48)>>4,C.fgGreen=(b&12)>>2,C.fgBlue=b&3,b=S[++f],C.bgOpacity=(b&192)>>6,C.bgRed=(b&48)>>4,C.bgGreen=(b&12)>>2,C.bgBlue=b&3,b=S[++f],C.edgeRed=(b&48)>>4,C.edgeGreen=(b&12)>>2,C.edgeBlue=b&3,f},xt.prototype.setPenLocation=function(f,_){var S=this.current708Packet.data,b=S[f],C=_.currentWindow.penLoc;return _.currentWindow.pendingNewLine=!0,b=S[++f],C.row=b&15,b=S[++f],C.column=b&63,f},xt.prototype.reset=function(f,_){var S=this.getPts(f);return this.flushDisplayed(S,_),this.initService(_.serviceNum,f)};var fr={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,304:174,305:176,306:189,307:191,308:8482,309:162,310:163,311:9834,312:224,313:160,314:232,315:226,316:234,317:238,318:244,319:251,544:193,545:201,546:211,547:218,548:220,549:252,550:8216,551:161,552:42,553:39,554:8212,555:169,556:8480,557:8226,558:8220,559:8221,560:192,561:194,562:199,563:200,564:202,565:203,566:235,567:206,568:207,569:239,570:212,571:217,572:249,573:219,574:171,575:187,800:195,801:227,802:205,803:204,804:236,805:210,806:242,807:213,808:245,809:123,810:125,811:92,812:94,813:95,814:124,815:126,816:196,817:228,818:214,819:246,820:223,821:165,822:164,823:9474,824:197,825:229,826:216,827:248,828:9484,829:9488,830:9492,831:9496},Jr=function(f){return f===null?"":(f=fr[f]||f,String.fromCharCode(f))},Pr=14,Fr=[4352,4384,4608,4640,5376,5408,5632,5664,5888,5920,4096,4864,4896,5120,5152],Pn=function(){for(var f=[],_=Pr+1;_--;)f.push({text:"",indent:0,offset:0});return f},er=function(f,_){er.prototype.init.call(this),this.field_=f||0,this.dataChannel_=_||0,this.name_="CC"+((this.field_<<1|this.dataChannel_)+1),this.setConstants(),this.reset(),this.push=function(S){var b,C,P,G,Y;if(b=S.ccData&32639,b===this.lastControlCode_){this.lastControlCode_=null;return}if((b&61440)===4096?this.lastControlCode_=b:b!==this.PADDING_&&(this.lastControlCode_=null),P=b>>>8,G=b&255,b!==this.PADDING_)if(b===this.RESUME_CAPTION_LOADING_)this.mode_="popOn";else if(b===this.END_OF_CAPTION_)this.mode_="popOn",this.clearFormatting(S.pts),this.flushDisplayed(S.pts),C=this.displayed_,this.displayed_=this.nonDisplayed_,this.nonDisplayed_=C,this.startPts_=S.pts;else if(b===this.ROLL_UP_2_ROWS_)this.rollUpRows_=2,this.setRollUp(S.pts);else if(b===this.ROLL_UP_3_ROWS_)this.rollUpRows_=3,this.setRollUp(S.pts);else if(b===this.ROLL_UP_4_ROWS_)this.rollUpRows_=4,this.setRollUp(S.pts);else if(b===this.CARRIAGE_RETURN_)this.clearFormatting(S.pts),this.flushDisplayed(S.pts),this.shiftRowsUp_(),this.startPts_=S.pts;else if(b===this.BACKSPACE_)this.mode_==="popOn"?this.nonDisplayed_[this.row_].text=this.nonDisplayed_[this.row_].text.slice(0,-1):this.displayed_[this.row_].text=this.displayed_[this.row_].text.slice(0,-1);else if(b===this.ERASE_DISPLAYED_MEMORY_)this.flushDisplayed(S.pts),this.displayed_=Pn();else if(b===this.ERASE_NON_DISPLAYED_MEMORY_)this.nonDisplayed_=Pn();else if(b===this.RESUME_DIRECT_CAPTIONING_)this.mode_!=="paintOn"&&(this.flushDisplayed(S.pts),this.displayed_=Pn()),this.mode_="paintOn",this.startPts_=S.pts;else if(this.isSpecialCharacter(P,G))P=(P&3)<<8,Y=Jr(P|G),this[this.mode_](S.pts,Y),this.column_++;else if(this.isExtCharacter(P,G))this.mode_==="popOn"?this.nonDisplayed_[this.row_].text=this.nonDisplayed_[this.row_].text.slice(0,-1):this.displayed_[this.row_].text=this.displayed_[this.row_].text.slice(0,-1),P=(P&3)<<8,Y=Jr(P|G),this[this.mode_](S.pts,Y),this.column_++;else if(this.isMidRowCode(P,G))this.clearFormatting(S.pts),this[this.mode_](S.pts," "),this.column_++,(G&14)===14&&this.addFormatting(S.pts,["i"]),(G&1)===1&&this.addFormatting(S.pts,["u"]);else if(this.isOffsetControlCode(P,G)){const re=G&3;this.nonDisplayed_[this.row_].offset=re,this.column_+=re}else if(this.isPAC(P,G)){var J=Fr.indexOf(b&7968);if(this.mode_==="rollUp"&&(J-this.rollUpRows_+1<0&&(J=this.rollUpRows_-1),this.setRollUp(S.pts,J)),J!==this.row_&&J>=0&&J<=14&&(this.clearFormatting(S.pts),this.row_=J),G&1&&this.formatting_.indexOf("u")===-1&&this.addFormatting(S.pts,["u"]),(b&16)===16){const re=(b&14)>>1;this.column_=re*4,this.nonDisplayed_[this.row_].indent+=re}this.isColorPAC(G)&&(G&14)===14&&this.addFormatting(S.pts,["i"])}else this.isNormalChar(P)&&(G===0&&(G=null),Y=Jr(P),Y+=Jr(G),this[this.mode_](S.pts,Y),this.column_+=Y.length)}};er.prototype=new yt,er.prototype.flushDisplayed=function(f){const _=b=>{this.trigger("log",{level:"warn",message:"Skipping a malformed 608 caption at index "+b+"."})},S=[];this.displayed_.forEach((b,C)=>{if(b&&b.text&&b.text.length){try{b.text=b.text.trim()}catch{_(C)}b.text.length&&S.push({text:b.text,line:C+1,position:10+Math.min(70,b.indent*10)+b.offset*2.5})}else b==null&&_(C)}),S.length&&this.trigger("data",{startPts:this.startPts_,endPts:f,content:S,stream:this.name_})},er.prototype.reset=function(){this.mode_="popOn",this.topRow_=0,this.startPts_=0,this.displayed_=Pn(),this.nonDisplayed_=Pn(),this.lastControlCode_=null,this.column_=0,this.row_=Pr,this.rollUpRows_=2,this.formatting_=[]},er.prototype.setConstants=function(){this.dataChannel_===0?(this.BASE_=16,this.EXT_=17,this.CONTROL_=(20|this.field_)<<8,this.OFFSET_=23):this.dataChannel_===1&&(this.BASE_=24,this.EXT_=25,this.CONTROL_=(28|this.field_)<<8,this.OFFSET_=31),this.PADDING_=0,this.RESUME_CAPTION_LOADING_=this.CONTROL_|32,this.END_OF_CAPTION_=this.CONTROL_|47,this.ROLL_UP_2_ROWS_=this.CONTROL_|37,this.ROLL_UP_3_ROWS_=this.CONTROL_|38,this.ROLL_UP_4_ROWS_=this.CONTROL_|39,this.CARRIAGE_RETURN_=this.CONTROL_|45,this.RESUME_DIRECT_CAPTIONING_=this.CONTROL_|41,this.BACKSPACE_=this.CONTROL_|33,this.ERASE_DISPLAYED_MEMORY_=this.CONTROL_|44,this.ERASE_NON_DISPLAYED_MEMORY_=this.CONTROL_|46},er.prototype.isSpecialCharacter=function(f,_){return f===this.EXT_&&_>=48&&_<=63},er.prototype.isExtCharacter=function(f,_){return(f===this.EXT_+1||f===this.EXT_+2)&&_>=32&&_<=63},er.prototype.isMidRowCode=function(f,_){return f===this.EXT_&&_>=32&&_<=47},er.prototype.isOffsetControlCode=function(f,_){return f===this.OFFSET_&&_>=33&&_<=35},er.prototype.isPAC=function(f,_){return f>=this.BASE_&&f<this.BASE_+8&&_>=64&&_<=127},er.prototype.isColorPAC=function(f){return f>=64&&f<=79||f>=96&&f<=127},er.prototype.isNormalChar=function(f){return f>=32&&f<=127},er.prototype.setRollUp=function(f,_){if(this.mode_!=="rollUp"&&(this.row_=Pr,this.mode_="rollUp",this.flushDisplayed(f),this.nonDisplayed_=Pn(),this.displayed_=Pn()),_!==void 0&&_!==this.row_)for(var S=0;S<this.rollUpRows_;S++)this.displayed_[_-S]=this.displayed_[this.row_-S],this.displayed_[this.row_-S]={text:"",indent:0,offset:0};_===void 0&&(_=this.row_),this.topRow_=_-this.rollUpRows_+1},er.prototype.addFormatting=function(f,_){this.formatting_=this.formatting_.concat(_);var S=_.reduce(function(b,C){return b+"<"+C+">"},"");this[this.mode_](f,S)},er.prototype.clearFormatting=function(f){if(this.formatting_.length){var _=this.formatting_.reverse().reduce(function(S,b){return S+"</"+b+">"},"");this.formatting_=[],this[this.mode_](f,_)}},er.prototype.popOn=function(f,_){var S=this.nonDisplayed_[this.row_].text;S+=_,this.nonDisplayed_[this.row_].text=S},er.prototype.rollUp=function(f,_){var S=this.displayed_[this.row_].text;S+=_,this.displayed_[this.row_].text=S},er.prototype.shiftRowsUp_=function(){var f;for(f=0;f<this.topRow_;f++)this.displayed_[f]={text:"",indent:0,offset:0};for(f=this.row_+1;f<Pr+1;f++)this.displayed_[f]={text:"",indent:0,offset:0};for(f=this.topRow_;f<this.row_;f++)this.displayed_[f]=this.displayed_[f+1];this.displayed_[this.row_]={text:"",indent:0,offset:0}},er.prototype.paintOn=function(f,_){var S=this.displayed_[this.row_].text;S+=_,this.displayed_[this.row_].text=S};var bi={CaptionStream:st,Cea608Stream:er,Cea708Stream:xt},mn={H264_STREAM_TYPE:27,ADTS_STREAM_TYPE:15,METADATA_STREAM_TYPE:21},Ss=t,tn=8589934592,Ts=4294967296,di="shared",ii=function(f,_){var S=1;for(f>_&&(S=-1);Math.abs(_-f)>Ts;)f+=S*tn;return f},Dr=function(f){var _,S;Dr.prototype.init.call(this),this.type_=f||di,this.push=function(b){if(b.type==="metadata"){this.trigger("data",b);return}this.type_!==di&&b.type!==this.type_||(S===void 0&&(S=b.dts),b.dts=ii(b.dts,S),b.pts=ii(b.pts,S),_=b.dts,this.trigger("data",b))},this.flush=function(){S=_,this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")},this.discontinuity=function(){S=void 0,_=void 0},this.reset=function(){this.discontinuity(),this.trigger("reset")}};Dr.prototype=new Ss;var ke={TimestampRolloverStream:Dr,handleRollover:ii},Ne=(f,_,S)=>{if(!f)return-1;for(var b=S;b<f.length;b++)if(f[b]===_)return b;return-1},Qe={typedArrayIndexOf:Ne},et=Qe.typedArrayIndexOf,vt={Utf8:3},wt=function(f,_,S){var b,C="";for(b=_;b<S;b++)C+="%"+("00"+f[b].toString(16)).slice(-2);return C},Mt=function(f,_,S){return decodeURIComponent(wt(f,_,S))},_r=function(f,_,S){return unescape(wt(f,_,S))},zr=function(f){return f[0]<<21|f[1]<<14|f[2]<<7|f[3]},gn={APIC:function(f){var _=1,S,b,C="-->";f.data[0]===vt.Utf8&&(S=et(f.data,0,_),!(S<0)&&(f.mimeType=_r(f.data,_,S),_=S+1,f.pictureType=f.data[_],_++,b=et(f.data,0,_),!(b<0)&&(f.description=Mt(f.data,_,b),_=b+1,f.mimeType===C?f.url=_r(f.data,_,f.data.length):f.pictureData=f.data.subarray(_,f.data.length))))},"T*":function(f){f.data[0]===vt.Utf8&&(f.value=Mt(f.data,1,f.data.length).replace(/\0*$/,""),f.values=f.value.split("\0"))},TXXX:function(f){var _;f.data[0]===vt.Utf8&&(_=et(f.data,0,1),_!==-1&&(f.description=Mt(f.data,1,_),f.value=Mt(f.data,_+1,f.data.length).replace(/\0*$/,""),f.data=f.value))},"W*":function(f){f.url=_r(f.data,0,f.data.length).replace(/\0.*$/,"")},WXXX:function(f){var _;f.data[0]===vt.Utf8&&(_=et(f.data,0,1),_!==-1&&(f.description=Mt(f.data,1,_),f.url=_r(f.data,_+1,f.data.length).replace(/\0.*$/,"")))},PRIV:function(f){var _;for(_=0;_<f.data.length;_++)if(f.data[_]===0){f.owner=_r(f.data,0,_);break}f.privateData=f.data.subarray(_+1),f.data=f.privateData}},wr=function(f){var _,S,b=10,C=0,P=[];if(!(f.length<10||f[0]!==73||f[1]!==68||f[2]!==51)){C=zr(f.subarray(6,10)),C+=10;var G=f[5]&64;G&&(b+=4,b+=zr(f.subarray(10,14)),C-=zr(f.subarray(16,20)));do{if(_=zr(f.subarray(b+4,b+8)),_<1)break;S=String.fromCharCode(f[b],f[b+1],f[b+2],f[b+3]);var Y={id:S,data:f.subarray(b+10,b+_+10)};Y.key=Y.id,gn[Y.id]?gn[Y.id](Y):Y.id[0]==="T"?gn["T*"](Y):Y.id[0]==="W"&&gn["W*"](Y),P.push(Y),b+=10,b+=_}while(b<C);return P}},hi={parseId3Frames:wr,parseSyncSafeInteger:zr,frameParsers:gn},Br=t,On=mn,$n=hi,Cs;Cs=function(f){var _={descriptor:f&&f.descriptor},S=0,b=[],C=0,P;if(Cs.prototype.init.call(this),this.dispatchType=On.METADATA_STREAM_TYPE.toString(16),_.descriptor)for(P=0;P<_.descriptor.length;P++)this.dispatchType+=("00"+_.descriptor[P].toString(16)).slice(-2);this.push=function(G){var Y,J,re,de,ve,Ve;if(G.type==="timed-metadata"){if(G.dataAlignmentIndicator&&(C=0,b.length=0),b.length===0&&(G.data.length<10||G.data[0]!==73||G.data[1]!==68||G.data[2]!==51)){this.trigger("log",{level:"warn",message:"Skipping unrecognized metadata packet"});return}if(b.push(G),C+=G.data.byteLength,b.length===1&&(S=$n.parseSyncSafeInteger(G.data.subarray(6,10)),S+=10),!(C<S)){for(Y={data:new Uint8Array(S),frames:[],pts:b[0].pts,dts:b[0].dts},ve=0;ve<S;)Y.data.set(b[0].data.subarray(0,S-ve),ve),ve+=b[0].data.byteLength,C-=b[0].data.byteLength,b.shift();J=10,Y.data[5]&64&&(J+=4,J+=$n.parseSyncSafeInteger(Y.data.subarray(10,14)),S-=$n.parseSyncSafeInteger(Y.data.subarray(16,20)));do{if(re=$n.parseSyncSafeInteger(Y.data.subarray(J+4,J+8)),re<1){this.trigger("log",{level:"warn",message:"Malformed ID3 frame encountered. Skipping remaining metadata parsing."});break}if(Ve=String.fromCharCode(Y.data[J],Y.data[J+1],Y.data[J+2],Y.data[J+3]),de={id:Ve,data:Y.data.subarray(J+10,J+re+10)},de.key=de.id,$n.frameParsers[de.id]?$n.frameParsers[de.id](de):de.id[0]==="T"?$n.frameParsers["T*"](de):de.id[0]==="W"&&$n.frameParsers["W*"](de),de.owner==="com.apple.streaming.transportStreamTimestamp"){var Ee=de.data,bt=(Ee[3]&1)<<30|Ee[4]<<22|Ee[5]<<14|Ee[6]<<6|Ee[7]>>>2;bt*=4,bt+=Ee[7]&3,de.timeStamp=bt,Y.pts===void 0&&Y.dts===void 0&&(Y.pts=de.timeStamp,Y.dts=de.timeStamp),this.trigger("timestamp",de)}Y.frames.push(de),J+=10,J+=re}while(J<S);this.trigger("data",Y)}}}},Cs.prototype=new Br;var Pc=Cs,ws=t,Ui=bi,Rn=mn,Fu=ke.TimestampRolloverStream,Hr,as,da,Ai=188,ja=71;Hr=function(){var f=new Uint8Array(Ai),_=0;Hr.prototype.init.call(this),this.push=function(S){var b=0,C=Ai,P;for(_?(P=new Uint8Array(S.byteLength+_),P.set(f.subarray(0,_)),P.set(S,_),_=0):P=S;C<P.byteLength;){if(P[b]===ja&&P[C]===ja){this.trigger("data",P.subarray(b,C)),b+=Ai,C+=Ai;continue}b++,C++}b<P.byteLength&&(f.set(P.subarray(b),0),_=P.byteLength-b)},this.flush=function(){_===Ai&&f[0]===ja&&(this.trigger("data",f),_=0),this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")},this.reset=function(){_=0,this.trigger("reset")}},Hr.prototype=new ws,as=function(){var f,_,S,b;as.prototype.init.call(this),b=this,this.packetsWaitingForPmt=[],this.programMapTable=void 0,f=function(C,P){var G=0;P.payloadUnitStartIndicator&&(G+=C[G]+1),P.type==="pat"?_(C.subarray(G),P):S(C.subarray(G),P)},_=function(C,P){P.section_number=C[7],P.last_section_number=C[8],b.pmtPid=(C[10]&31)<<8|C[11],P.pmtPid=b.pmtPid},S=function(C,P){var G,Y,J,re;if(C[5]&1){for(b.programMapTable={video:null,audio:null,"timed-metadata":{}},G=(C[1]&15)<<8|C[2],Y=3+G-4,J=(C[10]&15)<<8|C[11],re=12+J;re<Y;){var de=C[re],ve=(C[re+1]&31)<<8|C[re+2];de===Rn.H264_STREAM_TYPE&&b.programMapTable.video===null?b.programMapTable.video=ve:de===Rn.ADTS_STREAM_TYPE&&b.programMapTable.audio===null?b.programMapTable.audio=ve:de===Rn.METADATA_STREAM_TYPE&&(b.programMapTable["timed-metadata"][ve]=de),re+=((C[re+3]&15)<<8|C[re+4])+5}P.programMapTable=b.programMapTable}},this.push=function(C){var P={},G=4;if(P.payloadUnitStartIndicator=!!(C[1]&64),P.pid=C[1]&31,P.pid<<=8,P.pid|=C[2],(C[3]&48)>>>4>1&&(G+=C[G]+1),P.pid===0)P.type="pat",f(C.subarray(G),P),this.trigger("data",P);else if(P.pid===this.pmtPid)for(P.type="pmt",f(C.subarray(G),P),this.trigger("data",P);this.packetsWaitingForPmt.length;)this.processPes_.apply(this,this.packetsWaitingForPmt.shift());else this.programMapTable===void 0?this.packetsWaitingForPmt.push([C,G,P]):this.processPes_(C,G,P)},this.processPes_=function(C,P,G){G.pid===this.programMapTable.video?G.streamType=Rn.H264_STREAM_TYPE:G.pid===this.programMapTable.audio?G.streamType=Rn.ADTS_STREAM_TYPE:G.streamType=this.programMapTable["timed-metadata"][G.pid],G.type="pes",G.data=C.subarray(P),this.trigger("data",G)}},as.prototype=new ws,as.STREAM_TYPES={h264:27,adts:15},da=function(){var f=this,_=!1,S={data:[],size:0},b={data:[],size:0},C={data:[],size:0},P,G=function(J,re){var de;const ve=J[0]<<16|J[1]<<8|J[2];re.data=new Uint8Array,ve===1&&(re.packetLength=6+(J[4]<<8|J[5]),re.dataAlignmentIndicator=(J[6]&4)!==0,de=J[7],de&192&&(re.pts=(J[9]&14)<<27|(J[10]&255)<<20|(J[11]&254)<<12|(J[12]&255)<<5|(J[13]&254)>>>3,re.pts*=4,re.pts+=(J[13]&6)>>>1,re.dts=re.pts,de&64&&(re.dts=(J[14]&14)<<27|(J[15]&255)<<20|(J[16]&254)<<12|(J[17]&255)<<5|(J[18]&254)>>>3,re.dts*=4,re.dts+=(J[18]&6)>>>1)),re.data=J.subarray(9+J[8]))},Y=function(J,re,de){var ve=new Uint8Array(J.size),Ve={type:re},Ee=0,bt=0,zt=!1,Vr;if(!(!J.data.length||J.size<9)){for(Ve.trackId=J.data[0].pid,Ee=0;Ee<J.data.length;Ee++)Vr=J.data[Ee],ve.set(Vr.data,bt),bt+=Vr.data.byteLength;G(ve,Ve),zt=re==="video"||Ve.packetLength<=J.size,(de||zt)&&(J.size=0,J.data.length=0),zt&&f.trigger("data",Ve)}};da.prototype.init.call(this),this.push=function(J){({pat:function(){},pes:function(){var re,de;switch(J.streamType){case Rn.H264_STREAM_TYPE:re=S,de="video";break;case Rn.ADTS_STREAM_TYPE:re=b,de="audio";break;case Rn.METADATA_STREAM_TYPE:re=C,de="timed-metadata";break;default:return}J.payloadUnitStartIndicator&&Y(re,de,!0),re.data.push(J),re.size+=J.data.byteLength},pmt:function(){var re={type:"metadata",tracks:[]};P=J.programMapTable,P.video!==null&&re.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+P.video,codec:"avc",type:"video"}),P.audio!==null&&re.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+P.audio,codec:"adts",type:"audio"}),_=!0,f.trigger("data",re)}})[J.type]()},this.reset=function(){S.size=0,S.data.length=0,b.size=0,b.data.length=0,this.trigger("reset")},this.flushStreams_=function(){Y(S,"video"),Y(b,"audio"),Y(C,"timed-metadata")},this.flush=function(){if(!_&&P){var J={type:"metadata",tracks:[]};P.video!==null&&J.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+P.video,codec:"avc",type:"video"}),P.audio!==null&&J.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+P.audio,codec:"adts",type:"audio"}),f.trigger("data",J)}_=!1,this.flushStreams_(),this.trigger("done")}},da.prototype=new ws;var Ll={PAT_PID:0,MP2T_PACKET_LENGTH:Ai,TransportPacketStream:Hr,TransportParseStream:as,ElementaryStream:da,TimestampRolloverStream:Fu,CaptionStream:Ui.CaptionStream,Cea608Stream:Ui.Cea608Stream,Cea708Stream:Ui.Cea708Stream,MetadataStream:Pc};for(var _o in Rn)Rn.hasOwnProperty(_o)&&(Ll[_o]=Rn[_o]);var Bu=Ll,Ol=t,ha=Ht.ONE_SECOND_IN_TS,Si,Di=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];Si=function(f){var _,S=0;Si.prototype.init.call(this),this.skipWarn_=function(b,C){this.trigger("log",{level:"warn",message:`adts skiping bytes ${b} to ${C} in frame ${S} outside syncword`})},this.push=function(b){var C=0,P,G,Y,J,re;if(f||(S=0),b.type==="audio"){_&&_.length?(Y=_,_=new Uint8Array(Y.byteLength+b.data.byteLength),_.set(Y),_.set(b.data,Y.byteLength)):_=b.data;for(var de;C+7<_.length;){if(_[C]!==255||(_[C+1]&246)!==240){typeof de!="number"&&(de=C),C++;continue}if(typeof de=="number"&&(this.skipWarn_(de,C),de=null),G=(~_[C+1]&1)*2,P=(_[C+3]&3)<<11|_[C+4]<<3|(_[C+5]&224)>>5,J=((_[C+6]&3)+1)*1024,re=J*ha/Di[(_[C+2]&60)>>>2],_.byteLength-C<P)break;this.trigger("data",{pts:b.pts+S*re,dts:b.dts+S*re,sampleCount:J,audioobjecttype:(_[C+2]>>>6&3)+1,channelcount:(_[C+2]&1)<<2|(_[C+3]&192)>>>6,samplerate:Di[(_[C+2]&60)>>>2],samplingfrequencyindex:(_[C+2]&60)>>>2,samplesize:16,data:_.subarray(C+7+G,C+P)}),S++,C+=P}typeof de=="number"&&(this.skipWarn_(de,C),de=null),_=_.subarray(C)}},this.flush=function(){S=0,this.trigger("done")},this.reset=function(){_=void 0,this.trigger("reset")},this.endTimeline=function(){_=void 0,this.trigger("endedtimeline")}},Si.prototype=new Ol;var fa=Si,za;za=function(f){var _=f.byteLength,S=0,b=0;this.length=function(){return 8*_},this.bitsAvailable=function(){return 8*_+b},this.loadWord=function(){var C=f.byteLength-_,P=new Uint8Array(4),G=Math.min(4,_);if(G===0)throw new Error("no bytes available");P.set(f.subarray(C,C+G)),S=new DataView(P.buffer).getUint32(0),b=G*8,_-=G},this.skipBits=function(C){var P;b>C?(S<<=C,b-=C):(C-=b,P=Math.floor(C/8),C-=P*8,_-=P,this.loadWord(),S<<=C,b-=C)},this.readBits=function(C){var P=Math.min(b,C),G=S>>>32-P;return b-=P,b>0?S<<=P:_>0&&this.loadWord(),P=C-P,P>0?G<<P|this.readBits(P):G},this.skipLeadingZeros=function(){var C;for(C=0;C<b;++C)if((S&2147483648>>>C)!==0)return S<<=C,b-=C,C;return this.loadWord(),C+this.skipLeadingZeros()},this.skipUnsignedExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.skipExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.readUnsignedExpGolomb=function(){var C=this.skipLeadingZeros();return this.readBits(C+1)-1},this.readExpGolomb=function(){var C=this.readUnsignedExpGolomb();return 1&C?1+C>>>1:-1*(C>>>1)},this.readBoolean=function(){return this.readBits(1)===1},this.readUnsignedByte=function(){return this.readBits(8)},this.loadWord()};var pa=za,Ml=t,Rc=pa,$i,Ha,Fl;Ha=function(){var f=0,_,S;Ha.prototype.init.call(this),this.push=function(b){var C;S?(C=new Uint8Array(S.byteLength+b.data.byteLength),C.set(S),C.set(b.data,S.byteLength),S=C):S=b.data;for(var P=S.byteLength;f<P-3;f++)if(S[f+2]===1){_=f+5;break}for(;_<P;)switch(S[_]){case 0:if(S[_-1]!==0){_+=2;break}else if(S[_-2]!==0){_++;break}f+3!==_-2&&this.trigger("data",S.subarray(f+3,_-2));do _++;while(S[_]!==1&&_<P);f=_-2,_+=3;break;case 1:if(S[_-1]!==0||S[_-2]!==0){_+=3;break}this.trigger("data",S.subarray(f+3,_-2)),f=_-2,_+=3;break;default:_+=3;break}S=S.subarray(f),_-=f,f=0},this.reset=function(){S=null,f=0,this.trigger("reset")},this.flush=function(){S&&S.byteLength>3&&this.trigger("data",S.subarray(f+3)),S=null,f=0,this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")}},Ha.prototype=new Ml,Fl={100:!0,110:!0,122:!0,244:!0,44:!0,83:!0,86:!0,118:!0,128:!0,138:!0,139:!0,134:!0},$i=function(){var f=new Ha,_,S,b,C,P,G,Y;$i.prototype.init.call(this),_=this,this.push=function(J){J.type==="video"&&(S=J.trackId,b=J.pts,C=J.dts,f.push(J))},f.on("data",function(J){var re={trackId:S,pts:b,dts:C,data:J,nalUnitTypeCode:J[0]&31};switch(re.nalUnitTypeCode){case 5:re.nalUnitType="slice_layer_without_partitioning_rbsp_idr";break;case 6:re.nalUnitType="sei_rbsp",re.escapedRBSP=P(J.subarray(1));break;case 7:re.nalUnitType="seq_parameter_set_rbsp",re.escapedRBSP=P(J.subarray(1)),re.config=G(re.escapedRBSP);break;case 8:re.nalUnitType="pic_parameter_set_rbsp";break;case 9:re.nalUnitType="access_unit_delimiter_rbsp";break}_.trigger("data",re)}),f.on("done",function(){_.trigger("done")}),f.on("partialdone",function(){_.trigger("partialdone")}),f.on("reset",function(){_.trigger("reset")}),f.on("endedtimeline",function(){_.trigger("endedtimeline")}),this.flush=function(){f.flush()},this.partialFlush=function(){f.partialFlush()},this.reset=function(){f.reset()},this.endTimeline=function(){f.endTimeline()},Y=function(J,re){var de=8,ve=8,Ve,Ee;for(Ve=0;Ve<J;Ve++)ve!==0&&(Ee=re.readExpGolomb(),ve=(de+Ee+256)%256),de=ve===0?de:ve},P=function(J){for(var re=J.byteLength,de=[],ve=1,Ve,Ee;ve<re-2;)J[ve]===0&&J[ve+1]===0&&J[ve+2]===3?(de.push(ve+2),ve+=2):ve++;if(de.length===0)return J;Ve=re-de.length,Ee=new Uint8Array(Ve);var bt=0;for(ve=0;ve<Ve;bt++,ve++)bt===de[0]&&(bt++,de.shift()),Ee[ve]=J[bt];return Ee},G=function(J){var re=0,de=0,ve=0,Ve=0,Ee,bt,zt,Vr,dn,mi,Ao,Kl,Xu,_a,xa,Yt=[1,1],fn,qn;if(Ee=new Rc(J),bt=Ee.readUnsignedByte(),Vr=Ee.readUnsignedByte(),zt=Ee.readUnsignedByte(),Ee.skipUnsignedExpGolomb(),Fl[bt]&&(dn=Ee.readUnsignedExpGolomb(),dn===3&&Ee.skipBits(1),Ee.skipUnsignedExpGolomb(),Ee.skipUnsignedExpGolomb(),Ee.skipBits(1),Ee.readBoolean()))for(xa=dn!==3?8:12,qn=0;qn<xa;qn++)Ee.readBoolean()&&(qn<6?Y(16,Ee):Y(64,Ee));if(Ee.skipUnsignedExpGolomb(),mi=Ee.readUnsignedExpGolomb(),mi===0)Ee.readUnsignedExpGolomb();else if(mi===1)for(Ee.skipBits(1),Ee.skipExpGolomb(),Ee.skipExpGolomb(),Ao=Ee.readUnsignedExpGolomb(),qn=0;qn<Ao;qn++)Ee.skipExpGolomb();if(Ee.skipUnsignedExpGolomb(),Ee.skipBits(1),Kl=Ee.readUnsignedExpGolomb(),Xu=Ee.readUnsignedExpGolomb(),_a=Ee.readBits(1),_a===0&&Ee.skipBits(1),Ee.skipBits(1),Ee.readBoolean()&&(re=Ee.readUnsignedExpGolomb(),de=Ee.readUnsignedExpGolomb(),ve=Ee.readUnsignedExpGolomb(),Ve=Ee.readUnsignedExpGolomb()),Ee.readBoolean()&&Ee.readBoolean()){switch(fn=Ee.readUnsignedByte(),fn){case 1:Yt=[1,1];break;case 2:Yt=[12,11];break;case 3:Yt=[10,11];break;case 4:Yt=[16,11];break;case 5:Yt=[40,33];break;case 6:Yt=[24,11];break;case 7:Yt=[20,11];break;case 8:Yt=[32,11];break;case 9:Yt=[80,33];break;case 10:Yt=[18,11];break;case 11:Yt=[15,11];break;case 12:Yt=[64,33];break;case 13:Yt=[160,99];break;case 14:Yt=[4,3];break;case 15:Yt=[3,2];break;case 16:Yt=[2,1];break;case 255:{Yt=[Ee.readUnsignedByte()<<8|Ee.readUnsignedByte(),Ee.readUnsignedByte()<<8|Ee.readUnsignedByte()];break}}Yt&&Yt[0]/Yt[1]}return{profileIdc:bt,levelIdc:zt,profileCompatibility:Vr,width:(Kl+1)*16-re*2-de*2,height:(2-_a)*(Xu+1)*16-ve*2-Ve*2,sarRatio:Yt}}},$i.prototype=new Ml;var Bl={H264Stream:$i},rl=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],Va=function(f,_){var S=f[_+6]<<21|f[_+7]<<14|f[_+8]<<7|f[_+9],b=f[_+5],C=(b&16)>>4;return S=S>=0?S:0,C?S+20:S+10},Es=function(f,_){return f.length-_<10||f[_]!==73||f[_+1]!==68||f[_+2]!==51?_:(_+=Va(f,_),Es(f,_))},os=function(f){var _=Es(f,0);return f.length>=_+2&&(f[_]&255)===255&&(f[_+1]&240)===240&&(f[_+1]&22)===16},ma=function(f){return f[0]<<21|f[1]<<14|f[2]<<7|f[3]},nl=function(f,_,S){var b,C="";for(b=_;b<S;b++)C+="%"+("00"+f[b].toString(16)).slice(-2);return C},Lc=function(f,_,S){return unescape(nl(f,_,S))},Oc=function(f,_){var S=(f[_+5]&224)>>5,b=f[_+4]<<3,C=f[_+3]&6144;return C|b|S},Nu=function(f,_){return f[_]===73&&f[_+1]===68&&f[_+2]===51?"timed-metadata":f[_]&!0&&(f[_+1]&240)===240?"audio":null},Nl=function(f){for(var _=0;_+5<f.length;){if(f[_]!==255||(f[_+1]&246)!==240){_++;continue}return rl[(f[_+2]&60)>>>2]}return null},Uu=function(f){var _,S,b,C;_=10,f[5]&64&&(_+=4,_+=ma(f.subarray(10,14)));do{if(S=ma(f.subarray(_+4,_+8)),S<1)return null;if(C=String.fromCharCode(f[_],f[_+1],f[_+2],f[_+3]),C==="PRIV"){b=f.subarray(_+10,_+S+10);for(var P=0;P<b.byteLength;P++)if(b[P]===0){var G=Lc(b,0,P);if(G==="com.apple.streaming.transportStreamTimestamp"){var Y=b.subarray(P+1),J=(Y[3]&1)<<30|Y[4]<<22|Y[5]<<14|Y[6]<<6|Y[7]>>>2;return J*=4,J+=Y[7]&3,J}break}}_+=10,_+=S}while(_<f.byteLength);return null},zs={isLikelyAacData:os,parseId3TagSize:Va,parseAdtsSize:Oc,parseType:Nu,parseSampleRate:Nl,parseAacTimestamp:Uu},ga=t,ls=zs,ks;ks=function(){var f=new Uint8Array,_=0;ks.prototype.init.call(this),this.setTimestamp=function(S){_=S},this.push=function(S){var b=0,C=0,P,G,Y,J;for(f.length?(J=f.length,f=new Uint8Array(S.byteLength+J),f.set(f.subarray(0,J)),f.set(S,J)):f=S;f.length-C>=3;){if(f[C]===73&&f[C+1]===68&&f[C+2]===51){if(f.length-C<10||(b=ls.parseId3TagSize(f,C),C+b>f.length))break;G={type:"timed-metadata",data:f.subarray(C,C+b)},this.trigger("data",G),C+=b;continue}else if((f[C]&255)===255&&(f[C+1]&240)===240){if(f.length-C<7||(b=ls.parseAdtsSize(f,C),C+b>f.length))break;Y={type:"audio",data:f.subarray(C,C+b),pts:_,dts:_},this.trigger("data",Y),C+=b;continue}C++}P=f.length-C,P>0?f=f.subarray(C):f=new Uint8Array},this.reset=function(){f=new Uint8Array,this.trigger("reset")},this.endTimeline=function(){f=new Uint8Array,this.trigger("endedtimeline")}},ks.prototype=new ga;var Mc=ks,an=["audioobjecttype","channelcount","samplerate","samplingfrequencyindex","samplesize"],Ul=an,Fc=["width","height","profileIdc","levelIdc","profileCompatibility","sarRatio"],Ii=Fc,Pi=t,us=dt,Ti=rt,Wa=In,Sn=je,zn=Bu,ji=Ht,qa=fa,xo=Bl.H264Stream,il=Mc,$d=zs.isLikelyAacData,jd=Ht.ONE_SECOND_IN_TS,sl=Ul,$u=Ii,Ga,Hs,Ka,Ri,Bc=function(f,_){_.stream=f,this.trigger("log",_)},bo=function(f,_){for(var S=Object.keys(_),b=0;b<S.length;b++){var C=S[b];C==="headOfPipeline"||!_[C].on||_[C].on("log",Bc.bind(f,C))}},Xa=function(f,_){var S;if(f.length!==_.length)return!1;for(S=0;S<f.length;S++)if(f[S]!==_[S])return!1;return!0},ju=function(f,_,S,b,C,P){var G=S-_,Y=b-_,J=C-S;return{start:{dts:f,pts:f+G},end:{dts:f+Y,pts:f+J},prependedContentDuration:P,baseMediaDecodeTime:f}};Hs=function(f,_){var S=[],b,C=0,P=0,G=1/0;_=_||{},b=_.firstSequenceNumber||0,Hs.prototype.init.call(this),this.push=function(Y){Sn.collectDtsInfo(f,Y),f&&sl.forEach(function(J){f[J]=Y[J]}),S.push(Y)},this.setEarliestDts=function(Y){C=Y},this.setVideoBaseMediaDecodeTime=function(Y){G=Y},this.setAudioAppendStart=function(Y){P=Y},this.flush=function(){var Y,J,re,de,ve,Ve,Ee;if(S.length===0){this.trigger("done","AudioSegmentStream");return}Y=Wa.trimAdtsFramesByEarliestDts(S,f,C),f.baseMediaDecodeTime=Sn.calculateTrackBaseMediaDecodeTime(f,_.keepOriginalTimestamps),Ee=Wa.prefixWithSilence(f,Y,P,G),f.samples=Wa.generateSampleTable(Y),re=us.mdat(Wa.concatenateFrameData(Y)),S=[],J=us.moof(b,[f]),de=new Uint8Array(J.byteLength+re.byteLength),b++,de.set(J),de.set(re,J.byteLength),Sn.clearDtsInfo(f),ve=Math.ceil(jd*1024/f.samplerate),Y.length&&(Ve=Y.length*ve,this.trigger("segmentTimingInfo",ju(ji.audioTsToVideoTs(f.baseMediaDecodeTime,f.samplerate),Y[0].dts,Y[0].pts,Y[0].dts+Ve,Y[0].pts+Ve,Ee||0)),this.trigger("timingInfo",{start:Y[0].pts,end:Y[0].pts+Ve})),this.trigger("data",{track:f,boxes:de}),this.trigger("done","AudioSegmentStream")},this.reset=function(){Sn.clearDtsInfo(f),S=[],this.trigger("reset")}},Hs.prototype=new Pi,Ga=function(f,_){var S,b=[],C=[],P,G;_=_||{},S=_.firstSequenceNumber||0,Ga.prototype.init.call(this),delete f.minPTS,this.gopCache_=[],this.push=function(Y){Sn.collectDtsInfo(f,Y),Y.nalUnitType==="seq_parameter_set_rbsp"&&!P&&(P=Y.config,f.sps=[Y.data],$u.forEach(function(J){f[J]=P[J]},this)),Y.nalUnitType==="pic_parameter_set_rbsp"&&!G&&(G=Y.data,f.pps=[Y.data]),b.push(Y)},this.flush=function(){for(var Y,J,re,de,ve,Ve,Ee=0,bt,zt;b.length&&b[0].nalUnitType!=="access_unit_delimiter_rbsp";)b.shift();if(b.length===0){this.resetStream_(),this.trigger("done","VideoSegmentStream");return}if(Y=Ti.groupNalsIntoFrames(b),re=Ti.groupFramesIntoGops(Y),re[0][0].keyFrame||(J=this.getGopForFusion_(b[0],f),J?(Ee=J.duration,re.unshift(J),re.byteLength+=J.byteLength,re.nalCount+=J.nalCount,re.pts=J.pts,re.dts=J.dts,re.duration+=J.duration):re=Ti.extendFirstKeyFrame(re)),C.length){var Vr;if(_.alignGopsAtEnd?Vr=this.alignGopsAtEnd_(re):Vr=this.alignGopsAtStart_(re),!Vr){this.gopCache_.unshift({gop:re.pop(),pps:f.pps,sps:f.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),b=[],this.resetStream_(),this.trigger("done","VideoSegmentStream");return}Sn.clearDtsInfo(f),re=Vr}Sn.collectDtsInfo(f,re),f.samples=Ti.generateSampleTable(re),ve=us.mdat(Ti.concatenateNalData(re)),f.baseMediaDecodeTime=Sn.calculateTrackBaseMediaDecodeTime(f,_.keepOriginalTimestamps),this.trigger("processedGopsInfo",re.map(function(dn){return{pts:dn.pts,dts:dn.dts,byteLength:dn.byteLength}})),bt=re[0],zt=re[re.length-1],this.trigger("segmentTimingInfo",ju(f.baseMediaDecodeTime,bt.dts,bt.pts,zt.dts+zt.duration,zt.pts+zt.duration,Ee)),this.trigger("timingInfo",{start:re[0].pts,end:re[re.length-1].pts+re[re.length-1].duration}),this.gopCache_.unshift({gop:re.pop(),pps:f.pps,sps:f.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),b=[],this.trigger("baseMediaDecodeTime",f.baseMediaDecodeTime),this.trigger("timelineStartInfo",f.timelineStartInfo),de=us.moof(S,[f]),Ve=new Uint8Array(de.byteLength+ve.byteLength),S++,Ve.set(de),Ve.set(ve,de.byteLength),this.trigger("data",{track:f,boxes:Ve}),this.resetStream_(),this.trigger("done","VideoSegmentStream")},this.reset=function(){this.resetStream_(),b=[],this.gopCache_.length=0,C.length=0,this.trigger("reset")},this.resetStream_=function(){Sn.clearDtsInfo(f),P=void 0,G=void 0},this.getGopForFusion_=function(Y){var J=45e3,re=1/0,de,ve,Ve,Ee,bt;for(bt=0;bt<this.gopCache_.length;bt++)Ee=this.gopCache_[bt],Ve=Ee.gop,!(!(f.pps&&Xa(f.pps[0],Ee.pps[0]))||!(f.sps&&Xa(f.sps[0],Ee.sps[0])))&&(Ve.dts<f.timelineStartInfo.dts||(de=Y.dts-Ve.dts-Ve.duration,de>=-1e4&&de<=J&&(!ve||re>de)&&(ve=Ee,re=de)));return ve?ve.gop:null},this.alignGopsAtStart_=function(Y){var J,re,de,ve,Ve,Ee,bt,zt;for(Ve=Y.byteLength,Ee=Y.nalCount,bt=Y.duration,J=re=0;J<C.length&&re<Y.length&&(de=C[J],ve=Y[re],de.pts!==ve.pts);){if(ve.pts>de.pts){J++;continue}re++,Ve-=ve.byteLength,Ee-=ve.nalCount,bt-=ve.duration}return re===0?Y:re===Y.length?null:(zt=Y.slice(re),zt.byteLength=Ve,zt.duration=bt,zt.nalCount=Ee,zt.pts=zt[0].pts,zt.dts=zt[0].dts,zt)},this.alignGopsAtEnd_=function(Y){var J,re,de,ve,Ve,Ee;for(J=C.length-1,re=Y.length-1,Ve=null,Ee=!1;J>=0&&re>=0;){if(de=C[J],ve=Y[re],de.pts===ve.pts){Ee=!0;break}if(de.pts>ve.pts){J--;continue}J===C.length-1&&(Ve=re),re--}if(!Ee&&Ve===null)return null;var bt;if(Ee?bt=re:bt=Ve,bt===0)return Y;var zt=Y.slice(bt),Vr=zt.reduce(function(dn,mi){return dn.byteLength+=mi.byteLength,dn.duration+=mi.duration,dn.nalCount+=mi.nalCount,dn},{byteLength:0,duration:0,nalCount:0});return zt.byteLength=Vr.byteLength,zt.duration=Vr.duration,zt.nalCount=Vr.nalCount,zt.pts=zt[0].pts,zt.dts=zt[0].dts,zt},this.alignGopsWith=function(Y){C=Y}},Ga.prototype=new Pi,Ri=function(f,_){this.numberOfTracks=0,this.metadataStream=_,f=f||{},typeof f.remux<"u"?this.remuxTracks=!!f.remux:this.remuxTracks=!0,typeof f.keepOriginalTimestamps=="boolean"?this.keepOriginalTimestamps=f.keepOriginalTimestamps:this.keepOriginalTimestamps=!1,this.pendingTracks=[],this.videoTrack=null,this.pendingBoxes=[],this.pendingCaptions=[],this.pendingMetadata=[],this.pendingBytes=0,this.emittedTracks=0,Ri.prototype.init.call(this),this.push=function(S){if(S.content||S.text)return this.pendingCaptions.push(S);if(S.frames)return this.pendingMetadata.push(S);this.pendingTracks.push(S.track),this.pendingBytes+=S.boxes.byteLength,S.track.type==="video"&&(this.videoTrack=S.track,this.pendingBoxes.push(S.boxes)),S.track.type==="audio"&&(this.audioTrack=S.track,this.pendingBoxes.unshift(S.boxes))}},Ri.prototype=new Pi,Ri.prototype.flush=function(f){var _=0,S={captions:[],captionStreams:{},metadata:[],info:{}},b,C,P,G=0,Y;if(this.pendingTracks.length<this.numberOfTracks){if(f!=="VideoSegmentStream"&&f!=="AudioSegmentStream")return;if(this.remuxTracks)return;if(this.pendingTracks.length===0){this.emittedTracks++,this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0);return}}if(this.videoTrack?(G=this.videoTrack.timelineStartInfo.pts,$u.forEach(function(J){S.info[J]=this.videoTrack[J]},this)):this.audioTrack&&(G=this.audioTrack.timelineStartInfo.pts,sl.forEach(function(J){S.info[J]=this.audioTrack[J]},this)),this.videoTrack||this.audioTrack){for(this.pendingTracks.length===1?S.type=this.pendingTracks[0].type:S.type="combined",this.emittedTracks+=this.pendingTracks.length,P=us.initSegment(this.pendingTracks),S.initSegment=new Uint8Array(P.byteLength),S.initSegment.set(P),S.data=new Uint8Array(this.pendingBytes),Y=0;Y<this.pendingBoxes.length;Y++)S.data.set(this.pendingBoxes[Y],_),_+=this.pendingBoxes[Y].byteLength;for(Y=0;Y<this.pendingCaptions.length;Y++)b=this.pendingCaptions[Y],b.startTime=ji.metadataTsToSeconds(b.startPts,G,this.keepOriginalTimestamps),b.endTime=ji.metadataTsToSeconds(b.endPts,G,this.keepOriginalTimestamps),S.captionStreams[b.stream]=!0,S.captions.push(b);for(Y=0;Y<this.pendingMetadata.length;Y++)C=this.pendingMetadata[Y],C.cueTime=ji.metadataTsToSeconds(C.pts,G,this.keepOriginalTimestamps),S.metadata.push(C);for(S.metadata.dispatchType=this.metadataStream.dispatchType,this.pendingTracks.length=0,this.videoTrack=null,this.pendingBoxes.length=0,this.pendingCaptions.length=0,this.pendingBytes=0,this.pendingMetadata.length=0,this.trigger("data",S),Y=0;Y<S.captions.length;Y++)b=S.captions[Y],this.trigger("caption",b);for(Y=0;Y<S.metadata.length;Y++)C=S.metadata[Y],this.trigger("id3Frame",C)}this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0)},Ri.prototype.setRemux=function(f){this.remuxTracks=f},Ka=function(f){var _=this,S=!0,b,C;Ka.prototype.init.call(this),f=f||{},this.baseMediaDecodeTime=f.baseMediaDecodeTime||0,this.transmuxPipeline_={},this.setupAacPipeline=function(){var P={};this.transmuxPipeline_=P,P.type="aac",P.metadataStream=new zn.MetadataStream,P.aacStream=new il,P.audioTimestampRolloverStream=new zn.TimestampRolloverStream("audio"),P.timedMetadataTimestampRolloverStream=new zn.TimestampRolloverStream("timed-metadata"),P.adtsStream=new qa,P.coalesceStream=new Ri(f,P.metadataStream),P.headOfPipeline=P.aacStream,P.aacStream.pipe(P.audioTimestampRolloverStream).pipe(P.adtsStream),P.aacStream.pipe(P.timedMetadataTimestampRolloverStream).pipe(P.metadataStream).pipe(P.coalesceStream),P.metadataStream.on("timestamp",function(G){P.aacStream.setTimestamp(G.timeStamp)}),P.aacStream.on("data",function(G){G.type!=="timed-metadata"&&G.type!=="audio"||P.audioSegmentStream||(C=C||{timelineStartInfo:{baseMediaDecodeTime:_.baseMediaDecodeTime},codec:"adts",type:"audio"},P.coalesceStream.numberOfTracks++,P.audioSegmentStream=new Hs(C,f),P.audioSegmentStream.on("log",_.getLogTrigger_("audioSegmentStream")),P.audioSegmentStream.on("timingInfo",_.trigger.bind(_,"audioTimingInfo")),P.adtsStream.pipe(P.audioSegmentStream).pipe(P.coalesceStream),_.trigger("trackinfo",{hasAudio:!!C,hasVideo:!!b}))}),P.coalesceStream.on("data",this.trigger.bind(this,"data")),P.coalesceStream.on("done",this.trigger.bind(this,"done")),bo(this,P)},this.setupTsPipeline=function(){var P={};this.transmuxPipeline_=P,P.type="ts",P.metadataStream=new zn.MetadataStream,P.packetStream=new zn.TransportPacketStream,P.parseStream=new zn.TransportParseStream,P.elementaryStream=new zn.ElementaryStream,P.timestampRolloverStream=new zn.TimestampRolloverStream,P.adtsStream=new qa,P.h264Stream=new xo,P.captionStream=new zn.CaptionStream(f),P.coalesceStream=new Ri(f,P.metadataStream),P.headOfPipeline=P.packetStream,P.packetStream.pipe(P.parseStream).pipe(P.elementaryStream).pipe(P.timestampRolloverStream),P.timestampRolloverStream.pipe(P.h264Stream),P.timestampRolloverStream.pipe(P.adtsStream),P.timestampRolloverStream.pipe(P.metadataStream).pipe(P.coalesceStream),P.h264Stream.pipe(P.captionStream).pipe(P.coalesceStream),P.elementaryStream.on("data",function(G){var Y;if(G.type==="metadata"){for(Y=G.tracks.length;Y--;)!b&&G.tracks[Y].type==="video"?(b=G.tracks[Y],b.timelineStartInfo.baseMediaDecodeTime=_.baseMediaDecodeTime):!C&&G.tracks[Y].type==="audio"&&(C=G.tracks[Y],C.timelineStartInfo.baseMediaDecodeTime=_.baseMediaDecodeTime);b&&!P.videoSegmentStream&&(P.coalesceStream.numberOfTracks++,P.videoSegmentStream=new Ga(b,f),P.videoSegmentStream.on("log",_.getLogTrigger_("videoSegmentStream")),P.videoSegmentStream.on("timelineStartInfo",function(J){C&&!f.keepOriginalTimestamps&&(C.timelineStartInfo=J,P.audioSegmentStream.setEarliestDts(J.dts-_.baseMediaDecodeTime))}),P.videoSegmentStream.on("processedGopsInfo",_.trigger.bind(_,"gopInfo")),P.videoSegmentStream.on("segmentTimingInfo",_.trigger.bind(_,"videoSegmentTimingInfo")),P.videoSegmentStream.on("baseMediaDecodeTime",function(J){C&&P.audioSegmentStream.setVideoBaseMediaDecodeTime(J)}),P.videoSegmentStream.on("timingInfo",_.trigger.bind(_,"videoTimingInfo")),P.h264Stream.pipe(P.videoSegmentStream).pipe(P.coalesceStream)),C&&!P.audioSegmentStream&&(P.coalesceStream.numberOfTracks++,P.audioSegmentStream=new Hs(C,f),P.audioSegmentStream.on("log",_.getLogTrigger_("audioSegmentStream")),P.audioSegmentStream.on("timingInfo",_.trigger.bind(_,"audioTimingInfo")),P.audioSegmentStream.on("segmentTimingInfo",_.trigger.bind(_,"audioSegmentTimingInfo")),P.adtsStream.pipe(P.audioSegmentStream).pipe(P.coalesceStream)),_.trigger("trackinfo",{hasAudio:!!C,hasVideo:!!b})}}),P.coalesceStream.on("data",this.trigger.bind(this,"data")),P.coalesceStream.on("id3Frame",function(G){G.dispatchType=P.metadataStream.dispatchType,_.trigger("id3Frame",G)}),P.coalesceStream.on("caption",this.trigger.bind(this,"caption")),P.coalesceStream.on("done",this.trigger.bind(this,"done")),bo(this,P)},this.setBaseMediaDecodeTime=function(P){var G=this.transmuxPipeline_;f.keepOriginalTimestamps||(this.baseMediaDecodeTime=P),C&&(C.timelineStartInfo.dts=void 0,C.timelineStartInfo.pts=void 0,Sn.clearDtsInfo(C),G.audioTimestampRolloverStream&&G.audioTimestampRolloverStream.discontinuity()),b&&(G.videoSegmentStream&&(G.videoSegmentStream.gopCache_=[]),b.timelineStartInfo.dts=void 0,b.timelineStartInfo.pts=void 0,Sn.clearDtsInfo(b),G.captionStream.reset()),G.timestampRolloverStream&&G.timestampRolloverStream.discontinuity()},this.setAudioAppendStart=function(P){C&&this.transmuxPipeline_.audioSegmentStream.setAudioAppendStart(P)},this.setRemux=function(P){var G=this.transmuxPipeline_;f.remux=P,G&&G.coalesceStream&&G.coalesceStream.setRemux(P)},this.alignGopsWith=function(P){b&&this.transmuxPipeline_.videoSegmentStream&&this.transmuxPipeline_.videoSegmentStream.alignGopsWith(P)},this.getLogTrigger_=function(P){var G=this;return function(Y){Y.stream=P,G.trigger("log",Y)}},this.push=function(P){if(S){var G=$d(P);G&&this.transmuxPipeline_.type!=="aac"?this.setupAacPipeline():!G&&this.transmuxPipeline_.type!=="ts"&&this.setupTsPipeline(),S=!1}this.transmuxPipeline_.headOfPipeline.push(P)},this.flush=function(){S=!0,this.transmuxPipeline_.headOfPipeline.flush()},this.endTimeline=function(){this.transmuxPipeline_.headOfPipeline.endTimeline()},this.reset=function(){this.transmuxPipeline_.headOfPipeline&&this.transmuxPipeline_.headOfPipeline.reset()},this.resetCaptions=function(){this.transmuxPipeline_.captionStream&&this.transmuxPipeline_.captionStream.reset()}},Ka.prototype=new Pi;var Nc={Transmuxer:Ka},$l=function(f){return f>>>0},Uc=function(f){return("00"+f.toString(16)).slice(-2)},va={toUnsigned:$l,toHexString:Uc},$c=function(f){var _="";return _+=String.fromCharCode(f[0]),_+=String.fromCharCode(f[1]),_+=String.fromCharCode(f[2]),_+=String.fromCharCode(f[3]),_},So=$c,jc=va.toUnsigned,zc=So,To=function(f,_){var S=[],b,C,P,G,Y;if(!_.length)return null;for(b=0;b<f.byteLength;)C=jc(f[b]<<24|f[b+1]<<16|f[b+2]<<8|f[b+3]),P=zc(f.subarray(b+4,b+8)),G=C>1?b+C:f.byteLength,P===_[0]&&(_.length===1?S.push(f.subarray(b+8,G)):(Y=To(f.subarray(b+8,G),_.slice(1)),Y.length&&(S=S.concat(Y)))),b=G;return S},Co=To,zd=va.toUnsigned,Hd=s.getUint64,Vd=function(f){var _={version:f[0],flags:new Uint8Array(f.subarray(1,4))};return _.version===1?_.baseMediaDecodeTime=Hd(f.subarray(4)):_.baseMediaDecodeTime=zd(f[4]<<24|f[5]<<16|f[6]<<8|f[7]),_},al=Vd,ol=function(f){return{isLeading:(f[0]&12)>>>2,dependsOn:f[0]&3,isDependedOn:(f[1]&192)>>>6,hasRedundancy:(f[1]&48)>>>4,paddingValue:(f[1]&14)>>>1,isNonSyncSample:f[1]&1,degradationPriority:f[2]<<8|f[3]}},zu=ol,jl=zu,Hc=function(f){var _={version:f[0],flags:new Uint8Array(f.subarray(1,4)),samples:[]},S=new DataView(f.buffer,f.byteOffset,f.byteLength),b=_.flags[2]&1,C=_.flags[2]&4,P=_.flags[1]&1,G=_.flags[1]&2,Y=_.flags[1]&4,J=_.flags[1]&8,re=S.getUint32(4),de=8,ve;for(b&&(_.dataOffset=S.getInt32(de),de+=4),C&&re&&(ve={flags:jl(f.subarray(de,de+4))},de+=4,P&&(ve.duration=S.getUint32(de),de+=4),G&&(ve.size=S.getUint32(de),de+=4),J&&(_.version===1?ve.compositionTimeOffset=S.getInt32(de):ve.compositionTimeOffset=S.getUint32(de),de+=4),_.samples.push(ve),re--);re--;)ve={},P&&(ve.duration=S.getUint32(de),de+=4),G&&(ve.size=S.getUint32(de),de+=4),Y&&(ve.flags=jl(f.subarray(de,de+4)),de+=4),J&&(_.version===1?ve.compositionTimeOffset=S.getInt32(de):ve.compositionTimeOffset=S.getUint32(de),de+=4),_.samples.push(ve);return _},Vs=Hc,rn=function(f){var _=new DataView(f.buffer,f.byteOffset,f.byteLength),S={version:f[0],flags:new Uint8Array(f.subarray(1,4)),trackId:_.getUint32(4)},b=S.flags[2]&1,C=S.flags[2]&2,P=S.flags[2]&8,G=S.flags[2]&16,Y=S.flags[2]&32,J=S.flags[0]&65536,re=S.flags[0]&131072,de;return de=8,b&&(de+=4,S.baseDataOffset=_.getUint32(12),de+=4),C&&(S.sampleDescriptionIndex=_.getUint32(de),de+=4),P&&(S.defaultSampleDuration=_.getUint32(de),de+=4),G&&(S.defaultSampleSize=_.getUint32(de),de+=4),Y&&(S.defaultSampleFlags=_.getUint32(de)),J&&(S.durationIsEmpty=!0),!b&&re&&(S.baseDataOffsetIsMoof=!0),S},As=rn,on;typeof window<"u"?on=window:typeof r<"u"?on=r:typeof self<"u"?on=self:on={};var zi=on,Wd=Xe.discardEmulationPreventionBytes,Vc=bi.CaptionStream,Ds=Co,Wc=al,ll=Vs,ul=As,Hu=zi,zl=function(f,_){for(var S=f,b=0;b<_.length;b++){var C=_[b];if(S<C.size)return C;S-=C.size}return null},qd=function(f,_,S){var b=new DataView(f.buffer,f.byteOffset,f.byteLength),C={logs:[],seiNals:[]},P,G,Y,J;for(G=0;G+4<f.length;G+=Y)if(Y=b.getUint32(G),G+=4,!(Y<=0))switch(f[G]&31){case 6:var re=f.subarray(G+1,G+1+Y),de=zl(G,_);if(P={nalUnitType:"sei_rbsp",size:Y,data:re,escapedRBSP:Wd(re),trackId:S},de)P.pts=de.pts,P.dts=de.dts,J=de;else if(J)P.pts=J.pts,P.dts=J.dts;else{C.logs.push({level:"warn",message:"We've encountered a nal unit without data at "+G+" for trackId "+S+". See mux.js#223."});break}C.seiNals.push(P);break}return C},Vu=function(f,_,S){var b=_,C=S.defaultSampleDuration||0,P=S.defaultSampleSize||0,G=S.trackId,Y=[];return f.forEach(function(J){var re=ll(J),de=re.samples;de.forEach(function(ve){ve.duration===void 0&&(ve.duration=C),ve.size===void 0&&(ve.size=P),ve.trackId=G,ve.dts=b,ve.compositionTimeOffset===void 0&&(ve.compositionTimeOffset=0),typeof b=="bigint"?(ve.pts=b+Hu.BigInt(ve.compositionTimeOffset),b+=Hu.BigInt(ve.duration)):(ve.pts=b+ve.compositionTimeOffset,b+=ve.duration)}),Y=Y.concat(de)}),Y},oe=function(f,_){var S=Ds(f,["moof","traf"]),b=Ds(f,["mdat"]),C={},P=[];return b.forEach(function(G,Y){var J=S[Y];P.push({mdat:G,traf:J})}),P.forEach(function(G){var Y=G.mdat,J=G.traf,re=Ds(J,["tfhd"]),de=ul(re[0]),ve=de.trackId,Ve=Ds(J,["tfdt"]),Ee=Ve.length>0?Wc(Ve[0]).baseMediaDecodeTime:0,bt=Ds(J,["trun"]),zt,Vr;_===ve&&bt.length>0&&(zt=Vu(bt,Ee,de),Vr=qd(Y,zt,ve),C[ve]||(C[ve]={seiNals:[],logs:[]}),C[ve].seiNals=C[ve].seiNals.concat(Vr.seiNals),C[ve].logs=C[ve].logs.concat(Vr.logs))}),C},O=function(f,_,S){var b;if(_===null)return null;b=oe(f,_);var C=b[_]||{};return{seiNals:C.seiNals,logs:C.logs,timescale:S}},z=function(){var f=!1,_,S,b,C,P,G;this.isInitialized=function(){return f},this.init=function(Y){_=new Vc,f=!0,G=Y?Y.isPartial:!1,_.on("data",function(J){J.startTime=J.startPts/C,J.endTime=J.endPts/C,P.captions.push(J),P.captionStreams[J.stream]=!0}),_.on("log",function(J){P.logs.push(J)})},this.isNewInit=function(Y,J){return Y&&Y.length===0||J&&typeof J=="object"&&Object.keys(J).length===0?!1:b!==Y[0]||C!==J[b]},this.parse=function(Y,J,re){var de;if(this.isInitialized()){if(!J||!re)return null;if(this.isNewInit(J,re))b=J[0],C=re[b];else if(b===null||!C)return S.push(Y),null}else return null;for(;S.length>0;){var ve=S.shift();this.parse(ve,J,re)}return de=O(Y,b,C),de&&de.logs&&(P.logs=P.logs.concat(de.logs)),de===null||!de.seiNals?P.logs.length?{logs:P.logs,captions:[],captionStreams:[]}:null:(this.pushNals(de.seiNals),this.flushStream(),P)},this.pushNals=function(Y){if(!this.isInitialized()||!Y||Y.length===0)return null;Y.forEach(function(J){_.push(J)})},this.flushStream=function(){if(!this.isInitialized())return null;G?_.partialFlush():_.flush()},this.clearParsedCaptions=function(){P.captions=[],P.captionStreams={},P.logs=[]},this.resetCaptionStream=function(){if(!this.isInitialized())return null;_.reset()},this.clearAllCaptions=function(){this.clearParsedCaptions(),this.resetCaptionStream()},this.reset=function(){S=[],b=null,C=null,P?this.clearParsedCaptions():P={captions:[],captionStreams:{},logs:[]},this.resetCaptionStream()},this.reset()},j=z,W=function(f){for(var _=0,S=String.fromCharCode(f[_]),b="";S!=="\0";)b+=S,_++,S=String.fromCharCode(f[_]);return b+=S,b},Z={uint8ToCString:W},te=Z.uint8ToCString,ge=s.getUint64,_e=function(f){var _=4,S=f[0],b,C,P,G,Y,J,re,de;if(S===0){b=te(f.subarray(_)),_+=b.length,C=te(f.subarray(_)),_+=C.length;var ve=new DataView(f.buffer);P=ve.getUint32(_),_+=4,Y=ve.getUint32(_),_+=4,J=ve.getUint32(_),_+=4,re=ve.getUint32(_),_+=4}else if(S===1){var ve=new DataView(f.buffer);P=ve.getUint32(_),_+=4,G=ge(f.subarray(_)),_+=8,J=ve.getUint32(_),_+=4,re=ve.getUint32(_),_+=4,b=te(f.subarray(_)),_+=b.length,C=te(f.subarray(_)),_+=C.length}de=new Uint8Array(f.subarray(_,f.byteLength));var Ve={scheme_id_uri:b,value:C,timescale:P||1,presentation_time:G,presentation_time_delta:Y,event_duration:J,id:re,message_data:de};return we(S,Ve)?Ve:void 0},De=function(f,_,S,b){return f||f===0?f/_:b+S/_},we=function(f,_){var S=_.scheme_id_uri!=="\0",b=f===0&&Re(_.presentation_time_delta)&&S,C=f===1&&Re(_.presentation_time)&&S;return!(f>1)&&b||C},Re=function(f){return f!==void 0||f!==null},nt={parseEmsgBox:_e,scaleTime:De},Pt=va.toUnsigned,Ut=va.toHexString,tt=Co,sr=So,kn=nt,fi=As,Hi=Vs,cl=al,wo=s.getUint64,Eo,dl,ya,Ws,vn,Ya,Vi,Hl=zi,rf=hi.parseId3Frames;Eo=function(f){var _={},S=tt(f,["moov","trak"]);return S.reduce(function(b,C){var P,G,Y,J,re;return P=tt(C,["tkhd"])[0],!P||(G=P[0],Y=G===0?12:20,J=Pt(P[Y]<<24|P[Y+1]<<16|P[Y+2]<<8|P[Y+3]),re=tt(C,["mdia","mdhd"])[0],!re)?null:(G=re[0],Y=G===0?12:20,b[J]=Pt(re[Y]<<24|re[Y+1]<<16|re[Y+2]<<8|re[Y+3]),b)},_)},dl=function(f,_){var S;S=tt(_,["moof","traf"]);var b=S.reduce(function(C,P){var G=tt(P,["tfhd"])[0],Y=Pt(G[4]<<24|G[5]<<16|G[6]<<8|G[7]),J=f[Y]||9e4,re=tt(P,["tfdt"])[0],de=new DataView(re.buffer,re.byteOffset,re.byteLength),ve;re[0]===1?ve=wo(re.subarray(4,12)):ve=de.getUint32(4);let Ve;return typeof ve=="bigint"?Ve=ve/Hl.BigInt(J):typeof ve=="number"&&!isNaN(ve)&&(Ve=ve/J),Ve<Number.MAX_SAFE_INTEGER&&(Ve=Number(Ve)),Ve<C&&(C=Ve),C},1/0);return typeof b=="bigint"||isFinite(b)?b:0},ya=function(f,_){var S=tt(_,["moof","traf"]),b=0,C=0,P;if(S&&S.length){var G=tt(S[0],["tfhd"])[0],Y=tt(S[0],["trun"])[0],J=tt(S[0],["tfdt"])[0];if(G){var re=fi(G);P=re.trackId}if(J){var de=cl(J);b=de.baseMediaDecodeTime}if(Y){var ve=Hi(Y);ve.samples&&ve.samples.length&&(C=ve.samples[0].compositionTimeOffset||0)}}var Ve=f[P]||9e4;typeof b=="bigint"&&(C=Hl.BigInt(C),Ve=Hl.BigInt(Ve));var Ee=(b+C)/Ve;return typeof Ee=="bigint"&&Ee<Number.MAX_SAFE_INTEGER&&(Ee=Number(Ee)),Ee},Ws=function(f){var _=tt(f,["moov","trak"]),S=[];return _.forEach(function(b){var C=tt(b,["mdia","hdlr"]),P=tt(b,["tkhd"]);C.forEach(function(G,Y){var J=sr(G.subarray(8,12)),re=P[Y],de,ve,Ve;J==="vide"&&(de=new DataView(re.buffer,re.byteOffset,re.byteLength),ve=de.getUint8(0),Ve=ve===0?de.getUint32(12):de.getUint32(20),S.push(Ve))})}),S},Ya=function(f){var _=f[0],S=_===0?12:20;return Pt(f[S]<<24|f[S+1]<<16|f[S+2]<<8|f[S+3])},vn=function(f){var _=tt(f,["moov","trak"]),S=[];return _.forEach(function(b){var C={},P=tt(b,["tkhd"])[0],G,Y;P&&(G=new DataView(P.buffer,P.byteOffset,P.byteLength),Y=G.getUint8(0),C.id=Y===0?G.getUint32(12):G.getUint32(20));var J=tt(b,["mdia","hdlr"])[0];if(J){var re=sr(J.subarray(8,12));re==="vide"?C.type="video":re==="soun"?C.type="audio":C.type=re}var de=tt(b,["mdia","minf","stbl","stsd"])[0];if(de){var ve=de.subarray(8);C.codec=sr(ve.subarray(4,8));var Ve=tt(ve,[C.codec])[0],Ee,bt;Ve&&(/^[asm]vc[1-9]$/i.test(C.codec)?(Ee=Ve.subarray(78),bt=sr(Ee.subarray(4,8)),bt==="avcC"&&Ee.length>11?(C.codec+=".",C.codec+=Ut(Ee[9]),C.codec+=Ut(Ee[10]),C.codec+=Ut(Ee[11])):C.codec="avc1.4d400d"):/^mp4[a,v]$/i.test(C.codec)?(Ee=Ve.subarray(28),bt=sr(Ee.subarray(4,8)),bt==="esds"&&Ee.length>20&&Ee[19]!==0?(C.codec+="."+Ut(Ee[19]),C.codec+="."+Ut(Ee[20]>>>2&63).replace(/^0/,"")):C.codec="mp4a.40.2"):C.codec=C.codec.toLowerCase())}var zt=tt(b,["mdia","mdhd"])[0];zt&&(C.timescale=Ya(zt)),S.push(C)}),S},Vi=function(f,_=0){var S=tt(f,["emsg"]);return S.map(b=>{var C=kn.parseEmsgBox(new Uint8Array(b)),P=rf(C.message_data);return{cueTime:kn.scaleTime(C.presentation_time,C.timescale,C.presentation_time_delta,_),duration:kn.scaleTime(C.event_duration,C.timescale),frames:P}})};var Vl={findBox:tt,parseType:sr,timescale:Eo,startTime:dl,compositionStartTime:ya,videoTrackIds:Ws,tracks:vn,getTimescaleFromMediaHeader:Ya,getEmsgID3:Vi},Wl=mn,qc=function(f){var _=f[1]&31;return _<<=8,_|=f[2],_},ko=function(f){return!!(f[1]&64)},Wi=function(f){var _=0;return(f[3]&48)>>>4>1&&(_+=f[4]+1),_},Gd=function(f,_){var S=qc(f);return S===0?"pat":S===_?"pmt":_?"pes":null},Kd=function(f){var _=ko(f),S=4+Wi(f);return _&&(S+=f[S]+1),(f[S+10]&31)<<8|f[S+11]},ym=function(f){var _={},S=ko(f),b=4+Wi(f);if(S&&(b+=f[b]+1),!!(f[b+5]&1)){var C,P,G;C=(f[b+1]&15)<<8|f[b+2],P=3+C-4,G=(f[b+10]&15)<<8|f[b+11];for(var Y=12+G;Y<P;){var J=b+Y;_[(f[J+1]&31)<<8|f[J+2]]=f[J],Y+=((f[J+3]&15)<<8|f[J+4])+5}return _}},_m=function(f,_){var S=qc(f),b=_[S];switch(b){case Wl.H264_STREAM_TYPE:return"video";case Wl.ADTS_STREAM_TYPE:return"audio";case Wl.METADATA_STREAM_TYPE:return"timed-metadata";default:return null}},Wu=function(f){var _=ko(f);if(!_)return null;var S=4+Wi(f);if(S>=f.byteLength)return null;var b=null,C;return C=f[S+7],C&192&&(b={},b.pts=(f[S+9]&14)<<27|(f[S+10]&255)<<20|(f[S+11]&254)<<12|(f[S+12]&255)<<5|(f[S+13]&254)>>>3,b.pts*=4,b.pts+=(f[S+13]&6)>>>1,b.dts=b.pts,C&64&&(b.dts=(f[S+14]&14)<<27|(f[S+15]&255)<<20|(f[S+16]&254)<<12|(f[S+17]&255)<<5|(f[S+18]&254)>>>3,b.dts*=4,b.dts+=(f[S+18]&6)>>>1)),b},qu=function(f){switch(f){case 5:return"slice_layer_without_partitioning_rbsp_idr";case 6:return"sei_rbsp";case 7:return"seq_parameter_set_rbsp";case 8:return"pic_parameter_set_rbsp";case 9:return"access_unit_delimiter_rbsp";default:return null}},nf=function(f){for(var _=4+Wi(f),S=f.subarray(_),b=0,C=0,P=!1,G;C<S.byteLength-3;C++)if(S[C+2]===1){b=C+5;break}for(;b<S.byteLength;)switch(S[b]){case 0:if(S[b-1]!==0){b+=2;break}else if(S[b-2]!==0){b++;break}C+3!==b-2&&(G=qu(S[C+3]&31),G==="slice_layer_without_partitioning_rbsp_idr"&&(P=!0));do b++;while(S[b]!==1&&b<S.length);C=b-2,b+=3;break;case 1:if(S[b-1]!==0||S[b-2]!==0){b+=3;break}G=qu(S[C+3]&31),G==="slice_layer_without_partitioning_rbsp_idr"&&(P=!0),C=b-2,b+=3;break;default:b+=3;break}return S=S.subarray(C),b-=C,C=0,S&&S.byteLength>3&&(G=qu(S[C+3]&31),G==="slice_layer_without_partitioning_rbsp_idr"&&(P=!0)),P},sf={parseType:Gd,parsePat:Kd,parsePmt:ym,parsePayloadUnitStartIndicator:ko,parsePesType:_m,parsePesTime:Wu,videoPacketContainsKeyFrame:nf},yn=mn,cs=ke.handleRollover,ar={};ar.ts=sf,ar.aac=zs;var pi=Ht.ONE_SECOND_IN_TS,ln=188,Hn=71,Gu=function(f,_){for(var S=0,b=ln,C,P;b<f.byteLength;){if(f[S]===Hn&&f[b]===Hn){switch(C=f.subarray(S,b),P=ar.ts.parseType(C,_.pid),P){case"pat":_.pid=ar.ts.parsePat(C);break;case"pmt":var G=ar.ts.parsePmt(C);_.table=_.table||{},Object.keys(G).forEach(function(Y){_.table[Y]=G[Y]});break}S+=ln,b+=ln;continue}S++,b++}},ql=function(f,_,S){for(var b=0,C=ln,P,G,Y,J,re,de=!1;C<=f.byteLength;){if(f[b]===Hn&&(f[C]===Hn||C===f.byteLength)){switch(P=f.subarray(b,C),G=ar.ts.parseType(P,_.pid),G){case"pes":Y=ar.ts.parsePesType(P,_.table),J=ar.ts.parsePayloadUnitStartIndicator(P),Y==="audio"&&J&&(re=ar.ts.parsePesTime(P),re&&(re.type="audio",S.audio.push(re),de=!0));break}if(de)break;b+=ln,C+=ln;continue}b++,C++}for(C=f.byteLength,b=C-ln,de=!1;b>=0;){if(f[b]===Hn&&(f[C]===Hn||C===f.byteLength)){switch(P=f.subarray(b,C),G=ar.ts.parseType(P,_.pid),G){case"pes":Y=ar.ts.parsePesType(P,_.table),J=ar.ts.parsePayloadUnitStartIndicator(P),Y==="audio"&&J&&(re=ar.ts.parsePesTime(P),re&&(re.type="audio",S.audio.push(re),de=!0));break}if(de)break;b-=ln,C-=ln;continue}b--,C--}},Gl=function(f,_,S){for(var b=0,C=ln,P,G,Y,J,re,de,ve,Ve,Ee=!1,bt={data:[],size:0};C<f.byteLength;){if(f[b]===Hn&&f[C]===Hn){switch(P=f.subarray(b,C),G=ar.ts.parseType(P,_.pid),G){case"pes":if(Y=ar.ts.parsePesType(P,_.table),J=ar.ts.parsePayloadUnitStartIndicator(P),Y==="video"&&(J&&!Ee&&(re=ar.ts.parsePesTime(P),re&&(re.type="video",S.video.push(re),Ee=!0)),!S.firstKeyFrame)){if(J&&bt.size!==0){for(de=new Uint8Array(bt.size),ve=0;bt.data.length;)Ve=bt.data.shift(),de.set(Ve,ve),ve+=Ve.byteLength;if(ar.ts.videoPacketContainsKeyFrame(de)){var zt=ar.ts.parsePesTime(de);zt?(S.firstKeyFrame=zt,S.firstKeyFrame.type="video"):console.warn("Failed to extract PTS/DTS from PES at first keyframe. This could be an unusual TS segment, or else mux.js did not parse your TS segment correctly. If you know your TS segments do contain PTS/DTS on keyframes please file a bug report! You can try ffprobe to double check for yourself.")}bt.size=0}bt.data.push(P),bt.size+=P.byteLength}break}if(Ee&&S.firstKeyFrame)break;b+=ln,C+=ln;continue}b++,C++}for(C=f.byteLength,b=C-ln,Ee=!1;b>=0;){if(f[b]===Hn&&f[C]===Hn){switch(P=f.subarray(b,C),G=ar.ts.parseType(P,_.pid),G){case"pes":Y=ar.ts.parsePesType(P,_.table),J=ar.ts.parsePayloadUnitStartIndicator(P),Y==="video"&&J&&(re=ar.ts.parsePesTime(P),re&&(re.type="video",S.video.push(re),Ee=!0));break}if(Ee)break;b-=ln,C-=ln;continue}b--,C--}},af=function(f,_){if(f.audio&&f.audio.length){var S=_;(typeof S>"u"||isNaN(S))&&(S=f.audio[0].dts),f.audio.forEach(function(P){P.dts=cs(P.dts,S),P.pts=cs(P.pts,S),P.dtsTime=P.dts/pi,P.ptsTime=P.pts/pi})}if(f.video&&f.video.length){var b=_;if((typeof b>"u"||isNaN(b))&&(b=f.video[0].dts),f.video.forEach(function(P){P.dts=cs(P.dts,b),P.pts=cs(P.pts,b),P.dtsTime=P.dts/pi,P.ptsTime=P.pts/pi}),f.firstKeyFrame){var C=f.firstKeyFrame;C.dts=cs(C.dts,b),C.pts=cs(C.pts,b),C.dtsTime=C.dts/pi,C.ptsTime=C.pts/pi}}},xm=function(f){for(var _=!1,S=0,b=null,C=null,P=0,G=0,Y;f.length-G>=3;){var J=ar.aac.parseType(f,G);switch(J){case"timed-metadata":if(f.length-G<10){_=!0;break}if(P=ar.aac.parseId3TagSize(f,G),P>f.length){_=!0;break}C===null&&(Y=f.subarray(G,G+P),C=ar.aac.parseAacTimestamp(Y)),G+=P;break;case"audio":if(f.length-G<7){_=!0;break}if(P=ar.aac.parseAdtsSize(f,G),P>f.length){_=!0;break}b===null&&(Y=f.subarray(G,G+P),b=ar.aac.parseSampleRate(Y)),S++,G+=P;break;default:G++;break}if(_)return null}if(b===null||C===null)return null;var re=pi/b,de={audio:[{type:"audio",dts:C,pts:C},{type:"audio",dts:C+S*1024*re,pts:C+S*1024*re}]};return de},bm=function(f){var _={pid:null,table:null},S={};Gu(f,_);for(var b in _.table)if(_.table.hasOwnProperty(b)){var C=_.table[b];switch(C){case yn.H264_STREAM_TYPE:S.video=[],Gl(f,_,S),S.video.length===0&&delete S.video;break;case yn.ADTS_STREAM_TYPE:S.audio=[],ql(f,_,S),S.audio.length===0&&delete S.audio;break}}return S},of=function(f,_){var S=ar.aac.isLikelyAacData(f),b;return S?b=xm(f):b=bm(f),!b||!b.audio&&!b.video?null:(af(b,_),b)},Gc={inspect:of,parseAudioPes_:ql};const Kc=function(f,_){_.on("data",function(S){const b=S.initSegment;S.initSegment={data:b.buffer,byteOffset:b.byteOffset,byteLength:b.byteLength};const C=S.data;S.data=C.buffer,f.postMessage({action:"data",segment:S,byteOffset:C.byteOffset,byteLength:C.byteLength},[S.data])}),_.on("done",function(S){f.postMessage({action:"done"})}),_.on("gopInfo",function(S){f.postMessage({action:"gopInfo",gopInfo:S})}),_.on("videoSegmentTimingInfo",function(S){const b={start:{decode:Ht.videoTsToSeconds(S.start.dts),presentation:Ht.videoTsToSeconds(S.start.pts)},end:{decode:Ht.videoTsToSeconds(S.end.dts),presentation:Ht.videoTsToSeconds(S.end.pts)},baseMediaDecodeTime:Ht.videoTsToSeconds(S.baseMediaDecodeTime)};S.prependedContentDuration&&(b.prependedContentDuration=Ht.videoTsToSeconds(S.prependedContentDuration)),f.postMessage({action:"videoSegmentTimingInfo",videoSegmentTimingInfo:b})}),_.on("audioSegmentTimingInfo",function(S){const b={start:{decode:Ht.videoTsToSeconds(S.start.dts),presentation:Ht.videoTsToSeconds(S.start.pts)},end:{decode:Ht.videoTsToSeconds(S.end.dts),presentation:Ht.videoTsToSeconds(S.end.pts)},baseMediaDecodeTime:Ht.videoTsToSeconds(S.baseMediaDecodeTime)};S.prependedContentDuration&&(b.prependedContentDuration=Ht.videoTsToSeconds(S.prependedContentDuration)),f.postMessage({action:"audioSegmentTimingInfo",audioSegmentTimingInfo:b})}),_.on("id3Frame",function(S){f.postMessage({action:"id3Frame",id3Frame:S})}),_.on("caption",function(S){f.postMessage({action:"caption",caption:S})}),_.on("trackinfo",function(S){f.postMessage({action:"trackinfo",trackInfo:S})}),_.on("audioTimingInfo",function(S){f.postMessage({action:"audioTimingInfo",audioTimingInfo:{start:Ht.videoTsToSeconds(S.start),end:Ht.videoTsToSeconds(S.end)}})}),_.on("videoTimingInfo",function(S){f.postMessage({action:"videoTimingInfo",videoTimingInfo:{start:Ht.videoTsToSeconds(S.start),end:Ht.videoTsToSeconds(S.end)}})}),_.on("log",function(S){f.postMessage({action:"log",log:S})})};class Ku{constructor(_,S){this.options=S||{},this.self=_,this.init()}init(){this.transmuxer&&this.transmuxer.dispose(),this.transmuxer=new Nc.Transmuxer(this.options),Kc(this.self,this.transmuxer)}pushMp4Captions(_){this.captionParser||(this.captionParser=new j,this.captionParser.init());const S=new Uint8Array(_.data,_.byteOffset,_.byteLength),b=this.captionParser.parse(S,_.trackIds,_.timescales);this.self.postMessage({action:"mp4Captions",captions:b&&b.captions||[],logs:b&&b.logs||[],data:S.buffer},[S.buffer])}probeMp4StartTime({timescales:_,data:S}){const b=Vl.startTime(_,S);this.self.postMessage({action:"probeMp4StartTime",startTime:b,data:S},[S.buffer])}probeMp4Tracks({data:_}){const S=Vl.tracks(_);this.self.postMessage({action:"probeMp4Tracks",tracks:S,data:_},[_.buffer])}probeEmsgID3({data:_,offset:S}){const b=Vl.getEmsgID3(_,S);this.self.postMessage({action:"probeEmsgID3",id3Frames:b,emsgData:_},[_.buffer])}probeTs({data:_,baseStartTime:S}){const b=typeof S=="number"&&!isNaN(S)?S*Ht.ONE_SECOND_IN_TS:void 0,C=Gc.inspect(_,b);let P=null;C&&(P={hasVideo:C.video&&C.video.length===2||!1,hasAudio:C.audio&&C.audio.length===2||!1},P.hasVideo&&(P.videoStart=C.video[0].ptsTime),P.hasAudio&&(P.audioStart=C.audio[0].ptsTime)),this.self.postMessage({action:"probeTs",result:P,data:_},[_.buffer])}clearAllMp4Captions(){this.captionParser&&this.captionParser.clearAllCaptions()}clearParsedMp4Captions(){this.captionParser&&this.captionParser.clearParsedCaptions()}push(_){const S=new Uint8Array(_.data,_.byteOffset,_.byteLength);this.transmuxer.push(S)}reset(){this.transmuxer.reset()}setTimestampOffset(_){const S=_.timestampOffset||0;this.transmuxer.setBaseMediaDecodeTime(Math.round(Ht.secondsToVideoTs(S)))}setAudioAppendStart(_){this.transmuxer.setAudioAppendStart(Math.ceil(Ht.secondsToVideoTs(_.appendStart)))}setRemux(_){this.transmuxer.setRemux(_.remux)}flush(_){this.transmuxer.flush(),self.postMessage({action:"done",type:"transmuxed"})}endTimeline(){this.transmuxer.endTimeline(),self.postMessage({action:"endedtimeline",type:"transmuxed"})}alignGopsWith(_){this.transmuxer.alignGopsWith(_.gopsToAlignWith.slice())}}self.onmessage=function(f){if(f.data.action==="init"&&f.data.options){this.messageHandlers=new Ku(self,f.data.options);return}this.messageHandlers||(this.messageHandlers=new Ku(self)),f.data&&f.data.action&&f.data.action!=="init"&&this.messageHandlers[f.data.action]&&this.messageHandlers[f.data.action](f.data)}}));var Kde=gU(Gde);const Xde=(r,e,t)=>{const{type:n,initSegment:i,captions:s,captionStreams:a,metadata:o,videoFrameDtsTime:l,videoFramePtsTime:u}=r.data.segment;e.buffer.push({captions:s,captionStreams:a,metadata:o});const c=r.data.segment.boxes||{data:r.data.segment.data},h={type:n,data:new Uint8Array(c.data,c.data.byteOffset,c.data.byteLength),initSegment:new Uint8Array(i.data,i.byteOffset,i.byteLength)};typeof l<"u"&&(h.videoFrameDtsTime=l),typeof u<"u"&&(h.videoFramePtsTime=u),t(h)},Yde=({transmuxedData:r,callback:e})=>{r.buffer=[],e(r)},Qde=(r,e)=>{e.gopInfo=r.data.gopInfo},_U=r=>{const{transmuxer:e,bytes:t,audioAppendStart:n,gopsToAlignWith:i,remux:s,onData:a,onTrackInfo:o,onAudioTimingInfo:l,onVideoTimingInfo:u,onVideoSegmentTimingInfo:c,onAudioSegmentTimingInfo:h,onId3:m,onCaptions:g,onDone:y,onEndedTimeline:v,onTransmuxerLog:x,isEndOfTimeline:w,segment:E,triggerSegmentEventFn:D}=r,I={buffer:[]};let A=w;const L=U=>{e.currentTransmux===r&&(U.data.action==="data"&&Xde(U,I,a),U.data.action==="trackinfo"&&o(U.data.trackInfo),U.data.action==="gopInfo"&&Qde(U,I),U.data.action==="audioTimingInfo"&&l(U.data.audioTimingInfo),U.data.action==="videoTimingInfo"&&u(U.data.videoTimingInfo),U.data.action==="videoSegmentTimingInfo"&&c(U.data.videoSegmentTimingInfo),U.data.action==="audioSegmentTimingInfo"&&h(U.data.audioSegmentTimingInfo),U.data.action==="id3Frame"&&m([U.data.id3Frame],U.data.id3Frame.dispatchType),U.data.action==="caption"&&g(U.data.caption),U.data.action==="endedtimeline"&&(A=!1,v()),U.data.action==="log"&&x(U.data.log),U.data.type==="transmuxed"&&(A||(e.onmessage=null,Yde({transmuxedData:I,callback:y}),xU(e))))},N=()=>{const U={message:"Received an error message from the transmuxer worker",metadata:{errorType:Se.Error.StreamingFailedToTransmuxSegment,segmentInfo:bh({segment:E})}};y(null,U)};if(e.onmessage=L,e.onerror=N,n&&e.postMessage({action:"setAudioAppendStart",appendStart:n}),Array.isArray(i)&&e.postMessage({action:"alignGopsWith",gopsToAlignWith:i}),typeof s<"u"&&e.postMessage({action:"setRemux",remux:s}),t.byteLength){const U=t instanceof ArrayBuffer?t:t.buffer,B=t instanceof ArrayBuffer?0:t.byteOffset;D({type:"segmenttransmuxingstart",segment:E}),e.postMessage({action:"push",data:U,byteOffset:B,byteLength:t.byteLength},[U])}w&&e.postMessage({action:"endTimeline"}),e.postMessage({action:"flush"})},xU=r=>{r.currentTransmux=null,r.transmuxQueue.length&&(r.currentTransmux=r.transmuxQueue.shift(),typeof r.currentTransmux=="function"?r.currentTransmux():_U(r.currentTransmux))},PM=(r,e)=>{r.postMessage({action:e}),xU(r)},bU=(r,e)=>{if(!e.currentTransmux){e.currentTransmux=r,PM(e,r);return}e.transmuxQueue.push(PM.bind(null,e,r))},Jde=r=>{bU("reset",r)},Zde=r=>{bU("endTimeline",r)},SU=r=>{if(!r.transmuxer.currentTransmux){r.transmuxer.currentTransmux=r,_U(r);return}r.transmuxer.transmuxQueue.push(r)},ehe=r=>{const e=new Kde;e.currentTransmux=null,e.transmuxQueue=[];const t=e.terminate;return e.terminate=()=>(e.currentTransmux=null,e.transmuxQueue.length=0,t.call(e)),e.postMessage({action:"init",options:r}),e};var eC={reset:Jde,endTimeline:Zde,transmux:SU,createTransmuxer:ehe};const R0=function(r){const e=r.transmuxer,t=r.endAction||r.action,n=r.callback,i=tr({},r,{endAction:null,transmuxer:null,callback:null}),s=a=>{a.data.action===t&&(e.removeEventListener("message",s),a.data.data&&(a.data.data=new Uint8Array(a.data.data,r.byteOffset||0,r.byteLength||a.data.data.byteLength),r.data&&(r.data=a.data.data)),n(a.data))};if(e.addEventListener("message",s),r.data){const a=r.data instanceof ArrayBuffer;i.byteOffset=a?0:r.data.byteOffset,i.byteLength=r.data.byteLength;const o=[a?r.data:r.data.buffer];e.postMessage(i,o)}else e.postMessage(i)},pu={FAILURE:2,TIMEOUT:-101,ABORTED:-102},rE=r=>{r.forEach(e=>{e.abort()})},the=r=>({bandwidth:r.bandwidth,bytesReceived:r.bytesReceived||0,roundTripTime:r.roundTripTime||0}),rhe=r=>{const e=r.target,n={bandwidth:1/0,bytesReceived:0,roundTripTime:Date.now()-e.requestTime||0};return n.bytesReceived=r.loaded,n.bandwidth=Math.floor(n.bytesReceived/n.roundTripTime*8*1e3),n},Ak=(r,e)=>{const{requestType:t}=e,n=Bh({requestType:t,request:e,error:r});return e.timedout?{status:e.status,message:"HLS request timed-out at URL: "+e.uri,code:pu.TIMEOUT,xhr:e,metadata:n}:e.aborted?{status:e.status,message:"HLS request aborted at URL: "+e.uri,code:pu.ABORTED,xhr:e,metadata:n}:r?{status:e.status,message:"HLS request errored at URL: "+e.uri,code:pu.FAILURE,xhr:e,metadata:n}:e.responseType==="arraybuffer"&&e.response.byteLength===0?{status:e.status,message:"Empty HLS response at URL: "+e.uri,code:pu.FAILURE,xhr:e,metadata:n}:null},RM=(r,e,t,n)=>(i,s)=>{const a=s.response,o=Ak(i,s);if(o)return t(o,r);if(a.byteLength!==16)return t({status:s.status,message:"Invalid HLS key at URL: "+s.uri,code:pu.FAILURE,xhr:s},r);const l=new DataView(a),u=new Uint32Array([l.getUint32(0),l.getUint32(4),l.getUint32(8),l.getUint32(12)]);for(let h=0;h<e.length;h++)e[h].bytes=u;const c={uri:s.uri};return n({type:"segmentkeyloadcomplete",segment:r,keyInfo:c}),t(null,r)},TU=(r,e)=>{const t=Yp(r.map.bytes);if(t!=="mp4"){const n=r.map.resolvedUri||r.map.uri,i=t||"unknown";return e({internal:!0,message:`Found unsupported ${i} container for initialization segment at URL: ${n}`,code:pu.FAILURE,metadata:{mediaType:i}})}R0({action:"probeMp4Tracks",data:r.map.bytes,transmuxer:r.transmuxer,callback:({tracks:n,data:i})=>(r.map.bytes=i,n.forEach(function(s){r.map.tracks=r.map.tracks||{},!r.map.tracks[s.type]&&(r.map.tracks[s.type]=s,typeof s.id=="number"&&s.timescale&&(r.map.timescales=r.map.timescales||{},r.map.timescales[s.id]=s.timescale))}),e(null))})},nhe=({segment:r,finishProcessingFn:e,triggerSegmentEventFn:t})=>(n,i)=>{const s=Ak(n,i);if(s)return e(s,r);const a=new Uint8Array(i.response);if(t({type:"segmentloaded",segment:r}),r.map.key)return r.map.encryptedBytes=a,e(null,r);r.map.bytes=a,TU(r,function(o){if(o)return o.xhr=i,o.status=i.status,e(o,r);e(null,r)})},ihe=({segment:r,finishProcessingFn:e,responseType:t,triggerSegmentEventFn:n})=>(i,s)=>{const a=Ak(i,s);if(a)return e(a,r);n({type:"segmentloaded",segment:r});const o=t==="arraybuffer"||!s.responseText?s.response:Wde(s.responseText.substring(r.lastReachedChar||0));return r.stats=the(s),r.key?r.encryptedBytes=new Uint8Array(o):r.bytes=new Uint8Array(o),e(null,r)},she=({segment:r,bytes:e,trackInfoFn:t,timingInfoFn:n,videoSegmentTimingInfoFn:i,audioSegmentTimingInfoFn:s,id3Fn:a,captionsFn:o,isEndOfTimeline:l,endedTimelineFn:u,dataFn:c,doneFn:h,onTransmuxerLog:m,triggerSegmentEventFn:g})=>{const y=r.map&&r.map.tracks||{},v=!!(y.audio&&y.video);let x=n.bind(null,r,"audio","start");const w=n.bind(null,r,"audio","end");let E=n.bind(null,r,"video","start");const D=n.bind(null,r,"video","end"),I=()=>SU({bytes:e,transmuxer:r.transmuxer,audioAppendStart:r.audioAppendStart,gopsToAlignWith:r.gopsToAlignWith,remux:v,onData:A=>{A.type=A.type==="combined"?"video":A.type,c(r,A)},onTrackInfo:A=>{t&&(v&&(A.isMuxed=!0),t(r,A))},onAudioTimingInfo:A=>{x&&typeof A.start<"u"&&(x(A.start),x=null),w&&typeof A.end<"u"&&w(A.end)},onVideoTimingInfo:A=>{E&&typeof A.start<"u"&&(E(A.start),E=null),D&&typeof A.end<"u"&&D(A.end)},onVideoSegmentTimingInfo:A=>{const L={pts:{start:A.start.presentation,end:A.end.presentation},dts:{start:A.start.decode,end:A.end.decode}};g({type:"segmenttransmuxingtiminginfoavailable",segment:r,timingInfo:L}),i(A)},onAudioSegmentTimingInfo:A=>{const L={pts:{start:A.start.pts,end:A.end.pts},dts:{start:A.start.dts,end:A.end.dts}};g({type:"segmenttransmuxingtiminginfoavailable",segment:r,timingInfo:L}),s(A)},onId3:(A,L)=>{a(r,A,L)},onCaptions:A=>{o(r,[A])},isEndOfTimeline:l,onEndedTimeline:()=>{u()},onTransmuxerLog:m,onDone:(A,L)=>{h&&(A.type=A.type==="combined"?"video":A.type,g({type:"segmenttransmuxingcomplete",segment:r}),h(L,r,A))},segment:r,triggerSegmentEventFn:g});R0({action:"probeTs",transmuxer:r.transmuxer,data:e,baseStartTime:r.baseStartTime,callback:A=>{r.bytes=e=A.data;const L=A.result;L&&(t(r,{hasAudio:L.hasAudio,hasVideo:L.hasVideo,isMuxed:v}),t=null),I()}})},CU=({segment:r,bytes:e,trackInfoFn:t,timingInfoFn:n,videoSegmentTimingInfoFn:i,audioSegmentTimingInfoFn:s,id3Fn:a,captionsFn:o,isEndOfTimeline:l,endedTimelineFn:u,dataFn:c,doneFn:h,onTransmuxerLog:m,triggerSegmentEventFn:g})=>{let y=new Uint8Array(e);if(TN(y)){r.isFmp4=!0;const{tracks:v}=r.map,x={isFmp4:!0,hasVideo:!!v.video,hasAudio:!!v.audio};v.audio&&v.audio.codec&&v.audio.codec!=="enca"&&(x.audioCodec=v.audio.codec),v.video&&v.video.codec&&v.video.codec!=="encv"&&(x.videoCodec=v.video.codec),v.video&&v.audio&&(x.isMuxed=!0),t(r,x);const w=(E,D)=>{c(r,{data:y,type:x.hasAudio&&!x.isMuxed?"audio":"video"}),D&&D.length&&a(r,D),E&&E.length&&o(r,E),h(null,r,{})};R0({action:"probeMp4StartTime",timescales:r.map.timescales,data:y,transmuxer:r.transmuxer,callback:({data:E,startTime:D})=>{e=E.buffer,r.bytes=y=E,x.hasAudio&&!x.isMuxed&&n(r,"audio","start",D),x.hasVideo&&n(r,"video","start",D),R0({action:"probeEmsgID3",data:y,transmuxer:r.transmuxer,offset:D,callback:({emsgData:I,id3Frames:A})=>{if(e=I.buffer,r.bytes=y=I,!v.video||!I.byteLength||!r.transmuxer){w(void 0,A);return}R0({action:"pushMp4Captions",endAction:"mp4Captions",transmuxer:r.transmuxer,data:y,timescales:r.map.timescales,trackIds:[v.video.id],callback:L=>{e=L.data.buffer,r.bytes=y=L.data,L.logs.forEach(function(N){m(wn(N,{stream:"mp4CaptionParser"}))}),w(L.captions,A)}})}})}});return}if(!r.transmuxer){h(null,r,{});return}if(typeof r.container>"u"&&(r.container=Yp(y)),r.container!=="ts"&&r.container!=="aac"){t(r,{hasAudio:!1,hasVideo:!1}),h(null,r,{});return}she({segment:r,bytes:e,trackInfoFn:t,timingInfoFn:n,videoSegmentTimingInfoFn:i,audioSegmentTimingInfoFn:s,id3Fn:a,captionsFn:o,isEndOfTimeline:l,endedTimelineFn:u,dataFn:c,doneFn:h,onTransmuxerLog:m,triggerSegmentEventFn:g})},wU=function({id:r,key:e,encryptedBytes:t,decryptionWorker:n,segment:i,doneFn:s},a){const o=u=>{if(u.data.source===r){n.removeEventListener("message",o);const c=u.data.decrypted;a(new Uint8Array(c.bytes,c.byteOffset,c.byteLength))}};n.onerror=()=>{const u="An error occurred in the decryption worker",c=bh({segment:i}),h={message:u,metadata:{error:new Error(u),errorType:Se.Error.StreamingFailedToDecryptSegment,segmentInfo:c,keyInfo:{uri:i.key.resolvedUri||i.map.key.resolvedUri}}};s(h,i)},n.addEventListener("message",o);let l;e.bytes.slice?l=e.bytes.slice():l=new Uint32Array(Array.prototype.slice.call(e.bytes)),n.postMessage(cU({source:r,encrypted:t,key:l,iv:e.iv}),[t.buffer,l.buffer])},ahe=({decryptionWorker:r,segment:e,trackInfoFn:t,timingInfoFn:n,videoSegmentTimingInfoFn:i,audioSegmentTimingInfoFn:s,id3Fn:a,captionsFn:o,isEndOfTimeline:l,endedTimelineFn:u,dataFn:c,doneFn:h,onTransmuxerLog:m,triggerSegmentEventFn:g})=>{g({type:"segmentdecryptionstart"}),wU({id:e.requestId,key:e.key,encryptedBytes:e.encryptedBytes,decryptionWorker:r,segment:e,doneFn:h},y=>{e.bytes=y,g({type:"segmentdecryptioncomplete",segment:e}),CU({segment:e,bytes:e.bytes,trackInfoFn:t,timingInfoFn:n,videoSegmentTimingInfoFn:i,audioSegmentTimingInfoFn:s,id3Fn:a,captionsFn:o,isEndOfTimeline:l,endedTimelineFn:u,dataFn:c,doneFn:h,onTransmuxerLog:m,triggerSegmentEventFn:g})})},ohe=({activeXhrs:r,decryptionWorker:e,trackInfoFn:t,timingInfoFn:n,videoSegmentTimingInfoFn:i,audioSegmentTimingInfoFn:s,id3Fn:a,captionsFn:o,isEndOfTimeline:l,endedTimelineFn:u,dataFn:c,doneFn:h,onTransmuxerLog:m,triggerSegmentEventFn:g})=>{let y=0,v=!1;return(x,w)=>{if(!v){if(x)return v=!0,rE(r),h(x,w);if(y+=1,y===r.length){const E=function(){if(w.encryptedBytes)return ahe({decryptionWorker:e,segment:w,trackInfoFn:t,timingInfoFn:n,videoSegmentTimingInfoFn:i,audioSegmentTimingInfoFn:s,id3Fn:a,captionsFn:o,isEndOfTimeline:l,endedTimelineFn:u,dataFn:c,doneFn:h,onTransmuxerLog:m,triggerSegmentEventFn:g});CU({segment:w,bytes:w.bytes,trackInfoFn:t,timingInfoFn:n,videoSegmentTimingInfoFn:i,audioSegmentTimingInfoFn:s,id3Fn:a,captionsFn:o,isEndOfTimeline:l,endedTimelineFn:u,dataFn:c,doneFn:h,onTransmuxerLog:m,triggerSegmentEventFn:g})};if(w.endOfAllRequests=Date.now(),w.map&&w.map.encryptedBytes&&!w.map.bytes)return g({type:"segmentdecryptionstart",segment:w}),wU({decryptionWorker:e,id:w.requestId+"-init",encryptedBytes:w.map.encryptedBytes,key:w.map.key,segment:w,doneFn:h},D=>{w.map.bytes=D,g({type:"segmentdecryptioncomplete",segment:w}),TU(w,I=>{if(I)return rE(r),h(I,w);E()})});E()}}}},lhe=({loadendState:r,abortFn:e})=>t=>{t.target.aborted&&e&&!r.calledAbortFn&&(e(),r.calledAbortFn=!0)},uhe=({segment:r,progressFn:e,trackInfoFn:t,timingInfoFn:n,videoSegmentTimingInfoFn:i,audioSegmentTimingInfoFn:s,id3Fn:a,captionsFn:o,isEndOfTimeline:l,endedTimelineFn:u,dataFn:c})=>h=>{if(!h.target.aborted)return r.stats=wn(r.stats,rhe(h)),!r.stats.firstBytesReceivedAt&&r.stats.bytesReceived&&(r.stats.firstBytesReceivedAt=Date.now()),e(h,r)},che=({xhr:r,xhrOptions:e,decryptionWorker:t,segment:n,abortFn:i,progressFn:s,trackInfoFn:a,timingInfoFn:o,videoSegmentTimingInfoFn:l,audioSegmentTimingInfoFn:u,id3Fn:c,captionsFn:h,isEndOfTimeline:m,endedTimelineFn:g,dataFn:y,doneFn:v,onTransmuxerLog:x,triggerSegmentEventFn:w})=>{const E=[],D=ohe({activeXhrs:E,decryptionWorker:t,trackInfoFn:a,timingInfoFn:o,videoSegmentTimingInfoFn:l,audioSegmentTimingInfoFn:u,id3Fn:c,captionsFn:h,isEndOfTimeline:m,endedTimelineFn:g,dataFn:y,doneFn:v,onTransmuxerLog:x,triggerSegmentEventFn:w});if(n.key&&!n.key.bytes){const U=[n.key];n.map&&!n.map.bytes&&n.map.key&&n.map.key.resolvedUri===n.key.resolvedUri&&U.push(n.map.key);const B=wn(e,{uri:n.key.resolvedUri,responseType:"arraybuffer",requestType:"segment-key"}),k=RM(n,U,D,w),H={uri:n.key.resolvedUri};w({type:"segmentkeyloadstart",segment:n,keyInfo:H});const q=r(B,k);E.push(q)}if(n.map&&!n.map.bytes){if(n.map.key&&(!n.key||n.key.resolvedUri!==n.map.key.resolvedUri)){const q=wn(e,{uri:n.map.key.resolvedUri,responseType:"arraybuffer",requestType:"segment-key"}),V=RM(n,[n.map.key],D,w),Q={uri:n.map.key.resolvedUri};w({type:"segmentkeyloadstart",segment:n,keyInfo:Q});const ie=r(q,V);E.push(ie)}const B=wn(e,{uri:n.map.resolvedUri,responseType:"arraybuffer",headers:eE(n.map),requestType:"segment-media-initialization"}),k=nhe({segment:n,finishProcessingFn:D,triggerSegmentEventFn:w});w({type:"segmentloadstart",segment:n});const H=r(B,k);E.push(H)}const I=wn(e,{uri:n.part&&n.part.resolvedUri||n.resolvedUri,responseType:"arraybuffer",headers:eE(n),requestType:"segment"}),A=ihe({segment:n,finishProcessingFn:D,responseType:I.responseType,triggerSegmentEventFn:w});w({type:"segmentloadstart",segment:n});const L=r(I,A);L.addEventListener("progress",uhe({segment:n,progressFn:s,trackInfoFn:a,timingInfoFn:o,videoSegmentTimingInfoFn:l,audioSegmentTimingInfoFn:u,id3Fn:c,captionsFn:h,isEndOfTimeline:m,endedTimelineFn:g,dataFn:y})),E.push(L);const N={};return E.forEach(U=>{U.addEventListener("loadend",lhe({loadendState:N,abortFn:i}))}),()=>rE(E)},dhe=tl("CodecUtils"),hhe=function(r){const e=r.attributes||{};if(e.CODECS)return Mi(e.CODECS)},EU=(r,e)=>{const t=e.attributes||{};return r&&r.mediaGroups&&r.mediaGroups.AUDIO&&t.AUDIO&&r.mediaGroups.AUDIO[t.AUDIO]},fhe=(r,e)=>{if(!EU(r,e))return!0;const t=e.attributes||{},n=r.mediaGroups.AUDIO[t.AUDIO];for(const i in n)if(!n[i].uri&&!n[i].playlists)return!0;return!1},wx=function(r){const e={};return r.forEach(({mediaType:t,type:n,details:i})=>{e[t]=e[t]||[],e[t].push(U2(`${n}${i}`))}),Object.keys(e).forEach(function(t){if(e[t].length>1){dhe(`multiple ${t} codecs found as attributes: ${e[t].join(", ")}. Setting playlist codecs to null so that we wait for mux.js to probe segments for real codecs.`),e[t]=null;return}e[t]=e[t][0]}),e},LM=function(r){let e=0;return r.audio&&e++,r.video&&e++,e},L0=function(r,e){const t=e.attributes||{},n=wx(hhe(e)||[]);if(EU(r,e)&&!n.audio&&!fhe(r,e)){const i=wx(lN(r,t.AUDIO)||[]);i.audio&&(n.audio=i.audio)}return n},ay=tl("PlaylistSelector"),OM=function(r){if(!r||!r.playlist)return;const e=r.playlist;return JSON.stringify({id:e.id,bandwidth:r.bandwidth,width:r.width,height:r.height,codecs:e.attributes&&e.attributes.CODECS||""})},Ex=function(r,e){if(!r)return"";const t=X.getComputedStyle(r);return t?t[e]:""},mp=function(r,e){const t=r.slice();r.sort(function(n,i){const s=e(n,i);return s===0?t.indexOf(n)-t.indexOf(i):s})},Dk=function(r,e){let t,n;return r.attributes.BANDWIDTH&&(t=r.attributes.BANDWIDTH),t=t||X.Number.MAX_VALUE,e.attributes.BANDWIDTH&&(n=e.attributes.BANDWIDTH),n=n||X.Number.MAX_VALUE,t-n},phe=function(r,e){let t,n;return r.attributes.RESOLUTION&&r.attributes.RESOLUTION.width&&(t=r.attributes.RESOLUTION.width),t=t||X.Number.MAX_VALUE,e.attributes.RESOLUTION&&e.attributes.RESOLUTION.width&&(n=e.attributes.RESOLUTION.width),n=n||X.Number.MAX_VALUE,t===n&&r.attributes.BANDWIDTH&&e.attributes.BANDWIDTH?r.attributes.BANDWIDTH-e.attributes.BANDWIDTH:t-n};let kU=function(r,e,t,n,i,s){if(!r)return;const a={bandwidth:e,width:t,height:n,limitRenditionByPlayerDimensions:i};let o=r.playlists;Oa.isAudioOnly(r)&&(o=s.getAudioTrackPlaylists_(),a.audioOnly=!0);let l=o.map(A=>{let L;const N=A.attributes&&A.attributes.RESOLUTION&&A.attributes.RESOLUTION.width,U=A.attributes&&A.attributes.RESOLUTION&&A.attributes.RESOLUTION.height;return L=A.attributes&&A.attributes.BANDWIDTH,L=L||X.Number.MAX_VALUE,{bandwidth:L,width:N,height:U,playlist:A}});mp(l,(A,L)=>A.bandwidth-L.bandwidth),l=l.filter(A=>!Oa.isIncompatible(A.playlist));let u=l.filter(A=>Oa.isEnabled(A.playlist));u.length||(u=l.filter(A=>!Oa.isDisabled(A.playlist)));const c=u.filter(A=>A.bandwidth*Yi.BANDWIDTH_VARIANCE<e);let h=c[c.length-1];const m=c.filter(A=>A.bandwidth===h.bandwidth)[0];if(i===!1){const A=m||u[0]||l[0];if(A&&A.playlist){let L="sortedPlaylistReps";return m&&(L="bandwidthBestRep"),u[0]&&(L="enabledPlaylistReps"),ay(`choosing ${OM(A)} using ${L} with options`,a),A.playlist}return ay("could not choose a playlist with options",a),null}const g=c.filter(A=>A.width&&A.height);mp(g,(A,L)=>A.width-L.width);const y=g.filter(A=>A.width===t&&A.height===n);h=y[y.length-1];const v=y.filter(A=>A.bandwidth===h.bandwidth)[0];let x,w,E;v||(x=g.filter(A=>A.width>t||A.height>n),w=x.filter(A=>A.width===x[0].width&&A.height===x[0].height),h=w[w.length-1],E=w.filter(A=>A.bandwidth===h.bandwidth)[0]);let D;if(s.leastPixelDiffSelector){const A=g.map(L=>(L.pixelDiff=Math.abs(L.width-t)+Math.abs(L.height-n),L));mp(A,(L,N)=>L.pixelDiff===N.pixelDiff?N.bandwidth-L.bandwidth:L.pixelDiff-N.pixelDiff),D=A[0]}const I=D||E||v||m||u[0]||l[0];if(I&&I.playlist){let A="sortedPlaylistReps";return D?A="leastPixelDiffRep":E?A="resolutionPlusOneRep":v?A="resolutionBestRep":m?A="bandwidthBestRep":u[0]&&(A="enabledPlaylistReps"),ay(`choosing ${OM(I)} using ${A} with options`,a),I.playlist}return ay("could not choose a playlist with options",a),null};const MM=function(){let r=this.useDevicePixelRatio&&X.devicePixelRatio||1;return isNaN(this.customPixelRatio)||(r=this.customPixelRatio),kU(this.playlists.main,this.systemBandwidth,parseInt(Ex(this.tech_.el(),"width"),10)*r,parseInt(Ex(this.tech_.el(),"height"),10)*r,this.limitRenditionByPlayerDimensions,this.playlistController_)},mhe=function(r){let e=-1,t=-1;if(r<0||r>1)throw new Error("Moving average bandwidth decay must be between 0 and 1.");return function(){let n=this.useDevicePixelRatio&&X.devicePixelRatio||1;return isNaN(this.customPixelRatio)||(n=this.customPixelRatio),e<0&&(e=this.systemBandwidth,t=this.systemBandwidth),this.systemBandwidth>0&&this.systemBandwidth!==t&&(e=r*this.systemBandwidth+(1-r)*e,t=this.systemBandwidth),kU(this.playlists.main,e,parseInt(Ex(this.tech_.el(),"width"),10)*n,parseInt(Ex(this.tech_.el(),"height"),10)*n,this.limitRenditionByPlayerDimensions,this.playlistController_)}},ghe=function(r){const{main:e,currentTime:t,bandwidth:n,duration:i,segmentDuration:s,timeUntilRebuffer:a,currentTimeline:o,syncController:l}=r,u=e.playlists.filter(y=>!Oa.isIncompatible(y));let c=u.filter(Oa.isEnabled);c.length||(c=u.filter(y=>!Oa.isDisabled(y)));const m=c.filter(Oa.hasAttribute.bind(null,"BANDWIDTH")).map(y=>{const x=l.getSyncPoint(y,i,o,t)?1:2,E=Oa.estimateSegmentRequestTime(s,n,y)*x-a;return{playlist:y,rebufferingImpact:E}}),g=m.filter(y=>y.rebufferingImpact<=0);return mp(g,(y,v)=>Dk(v.playlist,y.playlist)),g.length?g[0]:(mp(m,(y,v)=>y.rebufferingImpact-v.rebufferingImpact),m[0]||null)},vhe=function(){const r=this.playlists.main.playlists.filter(Oa.isEnabled);return mp(r,(t,n)=>Dk(t,n)),r.filter(t=>!!L0(this.playlists.main,t).video)[0]||null},yhe=r=>{let e=0,t;return r.bytes&&(t=new Uint8Array(r.bytes),r.segments.forEach(n=>{t.set(n,e),e+=n.byteLength})),t};function AU(r){try{return new URL(r).pathname.split("/").slice(-2).join("/")}catch{return""}}const _he=function(r,e,t){if(!r[t]){e.trigger({type:"usage",name:"vhs-608"});let n=t;/^cc708_/.test(t)&&(n="SERVICE"+t.split("_")[1]);const i=e.textTracks().getTrackById(n);if(i)r[t]=i;else{const s=e.options_.vhs&&e.options_.vhs.captionServices||{};let a=t,o=t,l=!1;const u=s[n];u&&(a=u.label,o=u.language,l=u.default),r[t]=e.addRemoteTextTrack({kind:"captions",id:n,default:l,label:a,language:o},!1).track}}},xhe=function({inbandTextTracks:r,captionArray:e,timestampOffset:t}){if(!e)return;const n=X.WebKitDataCue||X.VTTCue;e.forEach(i=>{const s=i.stream;i.content?i.content.forEach(a=>{const o=new n(i.startTime+t,i.endTime+t,a.text);o.line=a.line,o.align="left",o.position=a.position,o.positionAlign="line-left",r[s].addCue(o)}):r[s].addCue(new n(i.startTime+t,i.endTime+t,i.text))})},bhe=function(r){Object.defineProperties(r.frame,{id:{get(){return Se.log.warn("cue.frame.id is deprecated. Use cue.value.key instead."),r.value.key}},value:{get(){return Se.log.warn("cue.frame.value is deprecated. Use cue.value.data instead."),r.value.data}},privateData:{get(){return Se.log.warn("cue.frame.privateData is deprecated. Use cue.value.data instead."),r.value.data}}})},She=({inbandTextTracks:r,metadataArray:e,timestampOffset:t,videoDuration:n})=>{if(!e)return;const i=X.WebKitDataCue||X.VTTCue,s=r.metadataTrack_;if(!s||(e.forEach(c=>{const h=c.cueTime+t;typeof h!="number"||X.isNaN(h)||h<0||!(h<1/0)||!c.frames||!c.frames.length||c.frames.forEach(m=>{const g=new i(h,h,m.value||m.url||m.data||"");g.frame=m,g.value=m,bhe(g),s.addCue(g)})}),!s.cues||!s.cues.length))return;const a=s.cues,o=[];for(let c=0;c<a.length;c++)a[c]&&o.push(a[c]);const l=o.reduce((c,h)=>{const m=c[h.startTime]||[];return m.push(h),c[h.startTime]=m,c},{}),u=Object.keys(l).sort((c,h)=>Number(c)-Number(h));u.forEach((c,h)=>{const m=l[c],g=isFinite(n)?n:c,y=Number(u[h+1])||g;m.forEach(v=>{v.endTime=y})})},The={id:"ID",class:"CLASS",startDate:"START-DATE",duration:"DURATION",endDate:"END-DATE",endOnNext:"END-ON-NEXT",plannedDuration:"PLANNED-DURATION",scte35Out:"SCTE35-OUT",scte35In:"SCTE35-IN"},Che=new Set(["id","class","startDate","duration","endDate","endOnNext","startTime","endTime","processDateRange"]),whe=({inbandTextTracks:r,dateRanges:e})=>{const t=r.metadataTrack_;if(!t)return;const n=X.WebKitDataCue||X.VTTCue;e.forEach(i=>{for(const s of Object.keys(i)){if(Che.has(s))continue;const a=new n(i.startTime,i.endTime,"");a.id=i.id,a.type="com.apple.quicktime.HLS",a.value={key:The[s],data:i[s]},(s==="scte35Out"||s==="scte35In")&&(a.value.data=new Uint8Array(a.value.data.match(/[\da-f]{2}/gi)).buffer),t.addCue(a)}i.processDateRange()})},FM=(r,e,t)=>{r.metadataTrack_||(r.metadataTrack_=t.addRemoteTextTrack({kind:"metadata",label:"Timed Metadata"},!1).track,Se.browser.IS_ANY_SAFARI||(r.metadataTrack_.inBandMetadataTrackDispatchType=e))},m0=function(r,e,t){let n,i;if(t&&t.cues)for(n=t.cues.length;n--;)i=t.cues[n],i.startTime>=r&&i.endTime<=e&&t.removeCue(i)},Ehe=function(r){const e=r.cues;if(!e)return;const t={};for(let n=e.length-1;n>=0;n--){const i=e[n],s=`${i.startTime}-${i.endTime}-${i.text}`;t[s]?r.removeCue(i):t[s]=i}},khe=(r,e,t)=>{if(typeof e>"u"||e===null||!r.length)return[];const n=Math.ceil((e-t+3)*Fa.ONE_SECOND_IN_TS);let i;for(i=0;i<r.length&&!(r[i].pts>n);i++);return r.slice(i)},Ahe=(r,e,t)=>{if(!e.length)return r;if(t)return e.slice();const n=e[0].pts;let i=0;for(i;i<r.length&&!(r[i].pts>=n);i++);return r.slice(0,i).concat(e)},Dhe=(r,e,t,n)=>{const i=Math.ceil((e-n)*Fa.ONE_SECOND_IN_TS),s=Math.ceil((t-n)*Fa.ONE_SECOND_IN_TS),a=r.slice();let o=r.length;for(;o--&&!(r[o].pts<=s););if(o===-1)return a;let l=o+1;for(;l--&&!(r[l].pts<=i););return l=Math.max(l,0),a.splice(l,o-l+1),a},Ihe=function(r,e){if(!r&&!e||!r&&e||r&&!e)return!1;if(r===e)return!0;const t=Object.keys(r).sort(),n=Object.keys(e).sort();if(t.length!==n.length)return!1;for(let i=0;i<t.length;i++){const s=t[i];if(s!==n[i]||r[s]!==e[s])return!1}return!0},Phe=function(r,e,t){e=e||[];const n=[];let i=0;for(let s=0;s<e.length;s++){const a=e[s];if(r===a.timeline&&(n.push(s),i+=a.duration,i>t))return s}return n.length===0?0:n[n.length-1]},r0=1,Rhe=500,BM=r=>typeof r=="number"&&isFinite(r),oy=1/60,Lhe=(r,e,t)=>r!=="main"||!e||!t?null:!t.hasAudio&&!t.hasVideo?"Neither audio nor video found in segment.":e.hasVideo&&!t.hasVideo?"Only audio found in segment when we expected video. We can't switch to audio only from a stream that had video. To get rid of this message, please add codec information to the manifest.":!e.hasVideo&&t.hasVideo?"Video found in segment when we expected only audio. We can't switch to a stream with video from an audio only stream. To get rid of this message, please add codec information to the manifest.":null,Ohe=(r,e,t)=>{let n=e-Yi.BACK_BUFFER_LENGTH;r.length&&(n=Math.max(n,r.start(0)));const i=e-t;return Math.min(i,n)},Pf=r=>{const{startOfSegment:e,duration:t,segment:n,part:i,playlist:{mediaSequence:s,id:a,segments:o=[]},mediaIndex:l,partIndex:u,timeline:c}=r,h=o.length-1;let m="mediaIndex/partIndex increment";r.getMediaInfoForTime?m=`getMediaInfoForTime (${r.getMediaInfoForTime})`:r.isSyncRequest&&(m="getSyncSegmentCandidate (isSyncRequest)"),r.independent&&(m+=` with independent ${r.independent}`);const g=typeof u=="number",y=r.segment.uri?"segment":"pre-segment",v=g?K6({preloadSegment:n})-1:0;return`${y} [${s+l}/${s+h}]`+(g?` part [${u}/${v}]`:"")+` segment start/end [${n.start} => ${n.end}]`+(g?` part start/end [${i.start} => ${i.end}]`:"")+` startOfSegment [${e}] duration [${t}] timeline [${c}] selected by [${m}] playlist [${a}]`},NM=r=>`${r}TimingInfo`,Mhe=({segmentTimeline:r,currentTimeline:e,startOfSegment:t,buffered:n,overrideCheck:i})=>!i&&r===e?null:r<e?t:n.length?n.end(n.length-1):t,nE=({timelineChangeController:r,currentTimeline:e,segmentTimeline:t,loaderType:n,audioDisabled:i})=>{if(e===t)return!1;if(n==="audio"){const s=r.lastTimelineChange({type:"main"});return!s||s.to!==t}if(n==="main"&&i){const s=r.pendingTimelineChange({type:"audio"});return!(s&&s.to===t)}return!1},Fhe=r=>{if(!r)return!1;const e=r.pendingTimelineChange({type:"audio"}),t=r.pendingTimelineChange({type:"main"}),n=e&&t,i=n&&e.to!==t.to;return!!(n&&e.from!==-1&&t.from!==-1&&i)},Bhe=r=>{r&&(r.pause(),r.resetEverything(),r.load())},Nhe=r=>{const e=r.timelineChangeController_.pendingTimelineChange({type:"audio"}),t=r.timelineChangeController_.pendingTimelineChange({type:"main"});return e&&t&&e.to<t.to},cd=r=>{const e=r.pendingSegment_;if(!e)return;if(nE({timelineChangeController:r.timelineChangeController_,currentTimeline:r.currentTimeline_,segmentTimeline:e.timeline,loaderType:r.loaderType_,audioDisabled:r.audioDisabled_})&&Fhe(r.timelineChangeController_)){if(Nhe(r)){r.timelineChangeController_.trigger("audioTimelineBehind");return}Bhe(r)}},Uhe=r=>{let e=0;return["video","audio"].forEach(function(t){const n=r[`${t}TimingInfo`];if(!n)return;const{start:i,end:s}=n;let a;typeof i=="bigint"||typeof s=="bigint"?a=X.BigInt(s)-X.BigInt(i):typeof i=="number"&&typeof s=="number"&&(a=s-i),typeof a<"u"&&a>e&&(e=a)}),typeof e=="bigint"&&e<Number.MAX_SAFE_INTEGER&&(e=Number(e)),e},UM=({segmentDuration:r,maxDuration:e})=>r?Math.round(r)>e+hu:!1,$he=(r,e)=>{if(e!=="hls")return null;const t=Uhe({audioTimingInfo:r.audioTimingInfo,videoTimingInfo:r.videoTimingInfo});if(!t)return null;const n=r.playlist.targetDuration,i=UM({segmentDuration:t,maxDuration:n*2}),s=UM({segmentDuration:t,maxDuration:n}),a=`Segment with index ${r.mediaIndex} from playlist ${r.playlist.id} has a duration of ${t} when the reported duration is ${r.duration} and the target duration is ${n}. For HLS content, a duration in excess of the target duration may result in playback issues. See the HLS specification section on EXT-X-TARGETDURATION for more details: https://tools.ietf.org/html/draft-pantos-http-live-streaming-23#section-4.3.3.1`;return i||s?{severity:i?"warn":"info",message:a}:null},bh=({type:r,segment:e})=>{if(!e)return;const t=!!(e.key||e.map&&e.map.ke),n=!!(e.map&&!e.map.bytes),i=e.startOfSegment===void 0?e.start:e.startOfSegment;return{type:r||e.type,uri:e.resolvedUri||e.uri,start:i,duration:e.duration,isEncrypted:t,isMediaInitialization:n}};let iE=class extends Se.EventTarget{constructor(e,t={}){if(super(),!e)throw new TypeError("Initialization settings are required");if(typeof e.currentTime!="function")throw new TypeError("No currentTime getter specified");if(!e.mediaSource)throw new TypeError("No MediaSource specified");this.bandwidth=e.bandwidth,this.throughput={rate:0,count:0},this.roundTrip=NaN,this.resetStats_(),this.mediaIndex=null,this.partIndex=null,this.hasPlayed_=e.hasPlayed,this.currentTime_=e.currentTime,this.seekable_=e.seekable,this.seeking_=e.seeking,this.duration_=e.duration,this.mediaSource_=e.mediaSource,this.vhs_=e.vhs,this.loaderType_=e.loaderType,this.currentMediaInfo_=void 0,this.startingMediaInfo_=void 0,this.segmentMetadataTrack_=e.segmentMetadataTrack,this.goalBufferLength_=e.goalBufferLength,this.sourceType_=e.sourceType,this.sourceUpdater_=e.sourceUpdater,this.inbandTextTracks_=e.inbandTextTracks,this.state_="INIT",this.timelineChangeController_=e.timelineChangeController,this.shouldSaveSegmentTimingInfo_=!0,this.parse708captions_=e.parse708captions,this.useDtsForTimestampOffset_=e.useDtsForTimestampOffset,this.captionServices_=e.captionServices,this.exactManifestTimings=e.exactManifestTimings,this.addMetadataToTextTrack=e.addMetadataToTextTrack,this.checkBufferTimeout_=null,this.error_=void 0,this.currentTimeline_=-1,this.shouldForceTimestampOffsetAfterResync_=!1,this.pendingSegment_=null,this.xhrOptions_=null,this.pendingSegments_=[],this.audioDisabled_=!1,this.isPendingTimestampOffset_=!1,this.gopBuffer_=[],this.timeMapping_=0,this.safeAppend_=!1,this.appendInitSegment_={audio:!0,video:!0},this.playlistOfLastInitSegment_={audio:null,video:null},this.callQueue_=[],this.loadQueue_=[],this.metadataQueue_={id3:[],caption:[]},this.waitingOnRemove_=!1,this.quotaExceededErrorRetryTimeout_=null,this.activeInitSegmentId_=null,this.initSegments_={},this.cacheEncryptionKeys_=e.cacheEncryptionKeys,this.keyCache_={},this.decrypter_=e.decrypter,this.syncController_=e.syncController,this.syncPoint_={segmentIndex:0,time:0},this.transmuxer_=this.createTransmuxer_(),this.triggerSyncInfoUpdate_=()=>this.trigger("syncinfoupdate"),this.syncController_.on("syncinfoupdate",this.triggerSyncInfoUpdate_),this.mediaSource_.addEventListener("sourceopen",()=>{this.isEndOfStream_()||(this.ended_=!1)}),this.fetchAtBuffer_=!1,this.logger_=tl(`SegmentLoader[${this.loaderType_}]`),Object.defineProperty(this,"state",{get(){return this.state_},set(n){n!==this.state_&&(this.logger_(`${this.state_} -> ${n}`),this.state_=n,this.trigger("statechange"))}}),this.sourceUpdater_.on("ready",()=>{this.hasEnoughInfoToAppend_()?this.processCallQueue_():cd(this)}),this.sourceUpdater_.on("codecschange",n=>{this.trigger(tr({type:"codecschange"},n))}),this.loaderType_==="main"&&this.timelineChangeController_.on("pendingtimelinechange",()=>{this.hasEnoughInfoToAppend_()?this.processCallQueue_():cd(this)}),this.loaderType_==="audio"&&this.timelineChangeController_.on("timelinechange",n=>{this.trigger(tr({type:"timelinechange"},n)),this.hasEnoughInfoToLoad_()?this.processLoadQueue_():cd(this),this.hasEnoughInfoToAppend_()?this.processCallQueue_():cd(this)})}get mediaSequenceSync_(){return this.syncController_.getMediaSequenceSync(this.loaderType_)}createTransmuxer_(){return eC.createTransmuxer({remux:!1,alignGopsAtEnd:this.safeAppend_,keepOriginalTimestamps:!0,parse708captions:this.parse708captions_,captionServices:this.captionServices_})}resetStats_(){this.mediaBytesTransferred=0,this.mediaRequests=0,this.mediaRequestsAborted=0,this.mediaRequestsTimedout=0,this.mediaRequestsErrored=0,this.mediaTransferDuration=0,this.mediaSecondsLoaded=0,this.mediaAppends=0}dispose(){this.trigger("dispose"),this.state="DISPOSED",this.pause(),this.abort_(),this.transmuxer_&&this.transmuxer_.terminate(),this.resetStats_(),this.checkBufferTimeout_&&X.clearTimeout(this.checkBufferTimeout_),this.syncController_&&this.triggerSyncInfoUpdate_&&this.syncController_.off("syncinfoupdate",this.triggerSyncInfoUpdate_),this.off()}setAudio(e){this.audioDisabled_=!e,e?this.appendInitSegment_.audio=!0:this.sourceUpdater_.removeAudio(0,this.duration_())}abort(){if(this.state!=="WAITING"){this.pendingSegment_&&(this.pendingSegment_=null);return}this.abort_(),this.state="READY",this.paused()||this.monitorBuffer_()}abort_(){this.pendingSegment_&&this.pendingSegment_.abortRequests&&this.pendingSegment_.abortRequests(),this.pendingSegment_=null,this.callQueue_=[],this.loadQueue_=[],this.metadataQueue_.id3=[],this.metadataQueue_.caption=[],this.timelineChangeController_.clearPendingTimelineChange(this.loaderType_),this.waitingOnRemove_=!1,X.clearTimeout(this.quotaExceededErrorRetryTimeout_),this.quotaExceededErrorRetryTimeout_=null}checkForAbort_(e){return this.state==="APPENDING"&&!this.pendingSegment_?(this.state="READY",!0):!this.pendingSegment_||this.pendingSegment_.requestId!==e}error(e){return typeof e<"u"&&(this.logger_("error occurred:",e),this.error_=e),this.pendingSegment_=null,this.error_}endOfStream(){this.ended_=!0,this.transmuxer_&&eC.reset(this.transmuxer_),this.gopBuffer_.length=0,this.pause(),this.trigger("ended")}buffered_(){const e=this.getMediaInfo_();if(!this.sourceUpdater_||!e)return ys();if(this.loaderType_==="main"){const{hasAudio:t,hasVideo:n,isMuxed:i}=e;if(n&&t&&!this.audioDisabled_&&!i)return this.sourceUpdater_.buffered();if(n)return this.sourceUpdater_.videoBuffered()}return this.sourceUpdater_.audioBuffered()}initSegmentForMap(e,t=!1){if(!e)return null;const n=Cx(e);let i=this.initSegments_[n];return t&&!i&&e.bytes&&(this.initSegments_[n]=i={resolvedUri:e.resolvedUri,byterange:e.byterange,bytes:e.bytes,tracks:e.tracks,timescales:e.timescales}),i||e}segmentKey(e,t=!1){if(!e)return null;const n=dU(e);let i=this.keyCache_[n];this.cacheEncryptionKeys_&&t&&!i&&e.bytes&&(this.keyCache_[n]=i={resolvedUri:e.resolvedUri,bytes:e.bytes});const s={resolvedUri:(i||e).resolvedUri};return i&&(s.bytes=i.bytes),s}couldBeginLoading_(){return this.playlist_&&!this.paused()}load(){if(this.monitorBuffer_(),!!this.playlist_){if(this.state==="INIT"&&this.couldBeginLoading_())return this.init_();!this.couldBeginLoading_()||this.state!=="READY"&&this.state!=="INIT"||(this.state="READY")}}init_(){return this.state="READY",this.resetEverything(),this.monitorBuffer_()}playlist(e,t={}){if(!e)return;const n=this.playlist_,i=this.pendingSegment_;this.playlist_=e,this.xhrOptions_=t,this.state==="INIT"&&(e.syncInfo={mediaSequence:e.mediaSequence,time:0},this.loaderType_==="main"&&this.syncController_.setDateTimeMappingForStart(e));let s=null;if(n&&(n.id?s=n.id:n.uri&&(s=n.uri)),this.logger_(`playlist update [${s} => ${e.id||e.uri}]`),this.mediaSequenceSync_&&(this.mediaSequenceSync_.update(e,this.currentTime_()),this.logger_(`Playlist update:
currentTime: ${this.currentTime_()}
bufferedEnd: ${J1(this.buffered_())}
`,this.mediaSequenceSync_.diagnostics)),this.trigger("syncinfoupdate"),this.state==="INIT"&&this.couldBeginLoading_())return this.init_();if(!n||n.uri!==e.uri){this.mediaIndex!==null&&(!e.endList&&typeof e.partTargetDuration=="number"?this.resetLoader():this.resyncLoader()),this.currentMediaInfo_=void 0,this.trigger("playlistupdate");return}const a=e.mediaSequence-n.mediaSequence;if(this.logger_(`live window shift [${a}]`),this.mediaIndex!==null)if(this.mediaIndex-=a,this.mediaIndex<0)this.mediaIndex=null,this.partIndex=null;else{const o=this.playlist_.segments[this.mediaIndex];if(this.partIndex&&(!o.parts||!o.parts.length||!o.parts[this.partIndex])){const l=this.mediaIndex;this.logger_(`currently processing part (index ${this.partIndex}) no longer exists.`),this.resetLoader(),this.mediaIndex=l}}i&&(i.mediaIndex-=a,i.mediaIndex<0?(i.mediaIndex=null,i.partIndex=null):(i.mediaIndex>=0&&(i.segment=e.segments[i.mediaIndex]),i.partIndex>=0&&i.segment.parts&&(i.part=i.segment.parts[i.partIndex]))),this.syncController_.saveExpiredSegmentInfo(n,e)}pause(){this.checkBufferTimeout_&&(X.clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=null)}paused(){return this.checkBufferTimeout_===null}resetEverything(e){this.ended_=!1,this.activeInitSegmentId_=null,this.appendInitSegment_={audio:!0,video:!0},this.resetLoader(),this.remove(0,1/0,e),this.transmuxer_&&(this.transmuxer_.postMessage({action:"clearAllMp4Captions"}),this.transmuxer_.postMessage({action:"reset"}))}resetLoader(){this.fetchAtBuffer_=!1,this.mediaSequenceSync_&&this.mediaSequenceSync_.resetAppendedStatus(),this.resyncLoader()}resyncLoader(){this.transmuxer_&&eC.reset(this.transmuxer_),this.mediaIndex=null,this.partIndex=null,this.syncPoint_=null,this.isPendingTimestampOffset_=!1;const e=this.currentMediaInfo_&&this.currentMediaInfo_.isFmp4;this.sourceType_==="hls"&&!e&&(this.shouldForceTimestampOffsetAfterResync_=!0),this.callQueue_=[],this.loadQueue_=[],this.metadataQueue_.id3=[],this.metadataQueue_.caption=[],this.abort(),this.transmuxer_&&this.transmuxer_.postMessage({action:"clearParsedMp4Captions"})}remove(e,t,n=()=>{},i=!1){if(t===1/0&&(t=this.duration_()),t<=e){this.logger_("skipping remove because end ${end} is <= start ${start}");return}if(!this.sourceUpdater_||!this.getMediaInfo_()){this.logger_("skipping remove because no source updater or starting media info");return}let s=1;const a=()=>{s--,s===0&&n()};(i||!this.audioDisabled_)&&(s++,this.sourceUpdater_.removeAudio(e,t,a)),(i||this.loaderType_==="main")&&(this.gopBuffer_=Dhe(this.gopBuffer_,e,t,this.timeMapping_),s++,this.sourceUpdater_.removeVideo(e,t,a));for(const o in this.inbandTextTracks_)m0(e,t,this.inbandTextTracks_[o]);m0(e,t,this.segmentMetadataTrack_),a()}monitorBuffer_(){this.checkBufferTimeout_&&X.clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=X.setTimeout(this.monitorBufferTick_.bind(this),1)}monitorBufferTick_(){this.state==="READY"&&this.fillBuffer_(),this.checkBufferTimeout_&&X.clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=X.setTimeout(this.monitorBufferTick_.bind(this),Rhe)}fillBuffer_(){if(this.sourceUpdater_.updating())return;const e=this.chooseNextRequest_();if(!e)return;const t={segmentInfo:bh({type:this.loaderType_,segment:e})};this.trigger({type:"segmentselected",metadata:t}),typeof e.timestampOffset=="number"&&(this.isPendingTimestampOffset_=!1,this.timelineChangeController_.pendingTimelineChange({type:this.loaderType_,from:this.currentTimeline_,to:e.timeline})),this.loadSegment_(e)}isEndOfStream_(e=this.mediaIndex,t=this.playlist_,n=this.partIndex){if(!t||!this.mediaSource_)return!1;const i=typeof e=="number"&&t.segments[e],s=e+1===t.segments.length,a=!i||!i.parts||n+1===i.parts.length;return t.endList&&this.mediaSource_.readyState==="open"&&s&&a}chooseNextRequest_(){const e=this.buffered_(),t=J1(e)||0,n=Ck(e,this.currentTime_()),i=!this.hasPlayed_()&&n>=1,s=n>=this.goalBufferLength_(),a=this.playlist_.segments;if(!a.length||i||s)return null;this.syncPoint_=this.syncPoint_||this.syncController_.getSyncPoint(this.playlist_,this.duration_(),this.currentTimeline_,this.currentTime_(),this.loaderType_);const o={partIndex:null,mediaIndex:null,startOfSegment:null,playlist:this.playlist_,isSyncRequest:!this.syncPoint_};if(o.isSyncRequest)o.mediaIndex=Phe(this.currentTimeline_,a,t),this.logger_(`choose next request. Can not find sync point. Fallback to media Index: ${o.mediaIndex}`);else if(this.mediaIndex!==null){const m=a[this.mediaIndex],g=typeof this.partIndex=="number"?this.partIndex:-1;o.startOfSegment=m.end?m.end:t,m.parts&&m.parts[g+1]?(o.mediaIndex=this.mediaIndex,o.partIndex=g+1):o.mediaIndex=this.mediaIndex+1}else{let m,g,y;const v=this.fetchAtBuffer_?t:this.currentTime_();if(this.mediaSequenceSync_&&this.logger_(`chooseNextRequest_ request after Quality Switch:
For TargetTime: ${v}.
CurrentTime: ${this.currentTime_()}
BufferedEnd: ${t}
Fetch At Buffer: ${this.fetchAtBuffer_}
`,this.mediaSequenceSync_.diagnostics),this.mediaSequenceSync_&&this.mediaSequenceSync_.isReliable){const x=this.getSyncInfoFromMediaSequenceSync_(v);if(!x){const w="No sync info found while using media sequence sync";return this.error({message:w,metadata:{errorType:Se.Error.StreamingFailedToSelectNextSegment,error:new Error(w)}}),this.logger_("chooseNextRequest_ - no sync info found using media sequence sync"),null}this.logger_(`chooseNextRequest_ mediaSequence syncInfo (${x.start} --> ${x.end})`),m=x.segmentIndex,g=x.partIndex,y=x.start}else{this.logger_("chooseNextRequest_ - fallback to a regular segment selection algorithm, based on a syncPoint.");const x=Oa.getMediaInfoForTime({exactManifestTimings:this.exactManifestTimings,playlist:this.playlist_,currentTime:v,startingPartIndex:this.syncPoint_.partIndex,startingSegmentIndex:this.syncPoint_.segmentIndex,startTime:this.syncPoint_.time});m=x.segmentIndex,g=x.partIndex,y=x.startTime}o.getMediaInfoForTime=this.fetchAtBuffer_?`bufferedEnd ${v}`:`currentTime ${v}`,o.mediaIndex=m,o.startOfSegment=y,o.partIndex=g,this.logger_(`choose next request. Playlist switched and we have a sync point. Media Index: ${o.mediaIndex} `)}const l=a[o.mediaIndex];let u=l&&typeof o.partIndex=="number"&&l.parts&&l.parts[o.partIndex];if(!l||typeof o.partIndex=="number"&&!u)return null;typeof o.partIndex!="number"&&l.parts&&(o.partIndex=0,u=l.parts[0]);const c=this.vhs_.playlists&&this.vhs_.playlists.main&&this.vhs_.playlists.main.independentSegments||this.playlist_.independentSegments;if(!n&&u&&!c&&!u.independent)if(o.partIndex===0){const m=a[o.mediaIndex-1],g=m.parts&&m.parts.length&&m.parts[m.parts.length-1];g&&g.independent&&(o.mediaIndex-=1,o.partIndex=m.parts.length-1,o.independent="previous segment")}else l.parts[o.partIndex-1].independent&&(o.partIndex-=1,o.independent="previous part");const h=this.mediaSource_&&this.mediaSource_.readyState==="ended";return o.mediaIndex>=a.length-1&&h&&!this.seeking_()?null:(this.shouldForceTimestampOffsetAfterResync_&&(this.shouldForceTimestampOffsetAfterResync_=!1,o.forceTimestampOffset=!0,this.logger_("choose next request. Force timestamp offset after loader resync")),this.generateSegmentInfo_(o))}getSyncInfoFromMediaSequenceSync_(e){if(!this.mediaSequenceSync_)return null;const t=Math.max(e,this.mediaSequenceSync_.start);e!==t&&this.logger_(`getSyncInfoFromMediaSequenceSync_. Pulled target time from ${e} to ${t}`);const n=this.mediaSequenceSync_.getSyncInfoForTime(t);if(!n)return null;if(!n.isAppended)return n;const i=this.mediaSequenceSync_.getSyncInfoForTime(n.end);return i?(i.isAppended&&this.logger_("getSyncInfoFromMediaSequenceSync_: We encounter unexpected scenario where next media sequence sync info is also appended!"),i):null}generateSegmentInfo_(e){const{independent:t,playlist:n,mediaIndex:i,startOfSegment:s,isSyncRequest:a,partIndex:o,forceTimestampOffset:l,getMediaInfoForTime:u}=e,c=n.segments[i],h=typeof o=="number"&&c.parts[o],m={requestId:"segment-loader-"+Math.random(),uri:h&&h.resolvedUri||c.resolvedUri,mediaIndex:i,partIndex:h?o:null,isSyncRequest:a,startOfSegment:s,playlist:n,bytes:null,encryptedBytes:null,timestampOffset:null,timeline:c.timeline,duration:h&&h.duration||c.duration,segment:c,part:h,byteLength:0,transmuxer:this.transmuxer_,getMediaInfoForTime:u,independent:t},g=typeof l<"u"?l:this.isPendingTimestampOffset_;m.timestampOffset=this.timestampOffsetForSegment_({segmentTimeline:c.timeline,currentTimeline:this.currentTimeline_,startOfSegment:s,buffered:this.buffered_(),overrideCheck:g});const y=J1(this.sourceUpdater_.audioBuffered());return typeof y=="number"&&(m.audioAppendStart=y-this.sourceUpdater_.audioTimestampOffset()),this.sourceUpdater_.videoBuffered().length&&(m.gopsToAlignWith=khe(this.gopBuffer_,this.currentTime_()-this.sourceUpdater_.videoTimestampOffset(),this.timeMapping_)),m}timestampOffsetForSegment_(e){return Mhe(e)}earlyAbortWhenNeeded_(e){if(this.vhs_.tech_.paused()||!this.xhrOptions_.timeout||!this.playlist_.attributes.BANDWIDTH||Date.now()-(e.firstBytesReceivedAt||Date.now())<1e3)return;const t=this.currentTime_(),n=e.bandwidth,i=this.pendingSegment_.duration,s=Oa.estimateSegmentRequestTime(i,n,this.playlist_,e.bytesReceived),a=ide(this.buffered_(),t,this.vhs_.tech_.playbackRate())-1;if(s<=a)return;const o=ghe({main:this.vhs_.playlists.main,currentTime:t,bandwidth:n,duration:this.duration_(),segmentDuration:i,timeUntilRebuffer:a,currentTimeline:this.currentTimeline_,syncController:this.syncController_});if(!o)return;const u=s-a-o.rebufferingImpact;let c=.5;a<=hu&&(c=1),!(!o.playlist||o.playlist.uri===this.playlist_.uri||u<c)&&(this.bandwidth=o.playlist.attributes.BANDWIDTH*Yi.BANDWIDTH_VARIANCE+1,this.trigger("earlyabort"))}handleAbort_(e){this.logger_(`Aborting ${Pf(e)}`),this.mediaRequestsAborted+=1}handleProgress_(e,t){this.earlyAbortWhenNeeded_(t.stats),!this.checkForAbort_(t.requestId)&&this.trigger("progress")}handleTrackInfo_(e,t){const{hasAudio:n,hasVideo:i}=t,s={segmentInfo:bh({type:this.loaderType_,segment:e}),trackInfo:{hasAudio:n,hasVideo:i}};this.trigger({type:"segmenttransmuxingtrackinfoavailable",metadata:s}),this.earlyAbortWhenNeeded_(e.stats),!this.checkForAbort_(e.requestId)&&(this.checkForIllegalMediaSwitch(t)||(t=t||{},Ihe(this.currentMediaInfo_,t)||(this.appendInitSegment_={audio:!0,video:!0},this.startingMediaInfo_=t,this.currentMediaInfo_=t,this.logger_("trackinfo update",t),this.trigger("trackinfo")),!this.checkForAbort_(e.requestId)&&(this.pendingSegment_.trackInfo=t,this.hasEnoughInfoToAppend_()?this.processCallQueue_():cd(this))))}handleTimingInfo_(e,t,n,i){if(this.earlyAbortWhenNeeded_(e.stats),this.checkForAbort_(e.requestId))return;const s=this.pendingSegment_,a=NM(t);s[a]=s[a]||{},s[a][n]=i,this.logger_(`timinginfo: ${t} - ${n} - ${i}`),this.hasEnoughInfoToAppend_()?this.processCallQueue_():cd(this)}handleCaptions_(e,t){if(this.earlyAbortWhenNeeded_(e.stats),this.checkForAbort_(e.requestId))return;if(t.length===0){this.logger_("SegmentLoader received no captions from a caption event");return}if(!this.pendingSegment_.hasAppendedData_){this.metadataQueue_.caption.push(this.handleCaptions_.bind(this,e,t));return}const i=this.sourceUpdater_.videoTimestampOffset()===null?this.sourceUpdater_.audioTimestampOffset():this.sourceUpdater_.videoTimestampOffset(),s={};t.forEach(a=>{s[a.stream]=s[a.stream]||{startTime:1/0,captions:[],endTime:0};const o=s[a.stream];o.startTime=Math.min(o.startTime,a.startTime+i),o.endTime=Math.max(o.endTime,a.endTime+i),o.captions.push(a)}),Object.keys(s).forEach(a=>{const{startTime:o,endTime:l,captions:u}=s[a],c=this.inbandTextTracks_;this.logger_(`adding cues from ${o} -> ${l} for ${a}`),_he(c,this.vhs_.tech_,a),m0(o,l,c[a]),xhe({captionArray:u,inbandTextTracks:c,timestampOffset:i})}),this.transmuxer_&&this.transmuxer_.postMessage({action:"clearParsedMp4Captions"})}handleId3_(e,t,n){if(this.earlyAbortWhenNeeded_(e.stats),this.checkForAbort_(e.requestId))return;if(!this.pendingSegment_.hasAppendedData_){this.metadataQueue_.id3.push(this.handleId3_.bind(this,e,t,n));return}this.addMetadataToTextTrack(n,t,this.duration_())}processMetadataQueue_(){this.metadataQueue_.id3.forEach(e=>e()),this.metadataQueue_.caption.forEach(e=>e()),this.metadataQueue_.id3=[],this.metadataQueue_.caption=[]}processCallQueue_(){const e=this.callQueue_;this.callQueue_=[],e.forEach(t=>t())}processLoadQueue_(){const e=this.loadQueue_;this.loadQueue_=[],e.forEach(t=>t())}hasEnoughInfoToLoad_(){if(this.loaderType_!=="audio")return!0;const e=this.pendingSegment_;return e?this.getCurrentMediaInfo_()?!nE({timelineChangeController:this.timelineChangeController_,currentTimeline:this.currentTimeline_,segmentTimeline:e.timeline,loaderType:this.loaderType_,audioDisabled:this.audioDisabled_}):!0:!1}getCurrentMediaInfo_(e=this.pendingSegment_){return e&&e.trackInfo||this.currentMediaInfo_}getMediaInfo_(e=this.pendingSegment_){return this.getCurrentMediaInfo_(e)||this.startingMediaInfo_}getPendingSegmentPlaylist(){return this.pendingSegment_?this.pendingSegment_.playlist:null}hasEnoughInfoToAppend_(){if(!this.sourceUpdater_.ready()||this.waitingOnRemove_||this.quotaExceededErrorRetryTimeout_)return!1;const e=this.pendingSegment_,t=this.getCurrentMediaInfo_();if(!e||!t)return!1;const{hasAudio:n,hasVideo:i,isMuxed:s}=t;return!(i&&!e.videoTimingInfo||n&&!this.audioDisabled_&&!s&&!e.audioTimingInfo||nE({timelineChangeController:this.timelineChangeController_,currentTimeline:this.currentTimeline_,segmentTimeline:e.timeline,loaderType:this.loaderType_,audioDisabled:this.audioDisabled_}))}handleData_(e,t){if(this.earlyAbortWhenNeeded_(e.stats),this.checkForAbort_(e.requestId))return;if(this.callQueue_.length||!this.hasEnoughInfoToAppend_()){cd(this),this.callQueue_.push(this.handleData_.bind(this,e,t));return}const n=this.pendingSegment_;if(this.setTimeMapping_(n.timeline),this.updateMediaSecondsLoaded_(n.part||n.segment),this.mediaSource_.readyState!=="closed"){if(e.map&&(e.map=this.initSegmentForMap(e.map,!0),n.segment.map=e.map),e.key&&this.segmentKey(e.key,!0),n.isFmp4=e.isFmp4,n.timingInfo=n.timingInfo||{},n.isFmp4)this.trigger("fmp4"),n.timingInfo.start=n[NM(t.type)].start;else{const i=this.getCurrentMediaInfo_(),s=this.loaderType_==="main"&&i&&i.hasVideo;let a;s&&(a=n.videoTimingInfo.start),n.timingInfo.start=this.trueSegmentStart_({currentStart:n.timingInfo.start,playlist:n.playlist,mediaIndex:n.mediaIndex,currentVideoTimestampOffset:this.sourceUpdater_.videoTimestampOffset(),useVideoTimingInfo:s,firstVideoFrameTimeForData:a,videoTimingInfo:n.videoTimingInfo,audioTimingInfo:n.audioTimingInfo})}if(this.updateAppendInitSegmentStatus(n,t.type),this.updateSourceBufferTimestampOffset_(n),n.isSyncRequest){this.updateTimingInfoEnd_(n),this.syncController_.saveSegmentTimingInfo({segmentInfo:n,shouldSaveTimelineMapping:this.loaderType_==="main"});const i=this.chooseNextRequest_();if(i.mediaIndex!==n.mediaIndex||i.partIndex!==n.partIndex){this.logger_("sync segment was incorrect, not appending");return}this.logger_("sync segment was correct, appending")}n.hasAppendedData_=!0,this.processMetadataQueue_(),this.appendData_(n,t)}}updateAppendInitSegmentStatus(e,t){this.loaderType_==="main"&&typeof e.timestampOffset=="number"&&!e.changedTimestampOffset&&(this.appendInitSegment_={audio:!0,video:!0}),this.playlistOfLastInitSegment_[t]!==e.playlist&&(this.appendInitSegment_[t]=!0)}getInitSegmentAndUpdateState_({type:e,initSegment:t,map:n,playlist:i}){if(n){const s=Cx(n);if(this.activeInitSegmentId_===s)return null;t=this.initSegmentForMap(n,!0).bytes,this.activeInitSegmentId_=s}return t&&this.appendInitSegment_[e]?(this.playlistOfLastInitSegment_[e]=i,this.appendInitSegment_[e]=!1,this.activeInitSegmentId_=null,t):null}handleQuotaExceededError_({segmentInfo:e,type:t,bytes:n},i){const s=this.sourceUpdater_.audioBuffered(),a=this.sourceUpdater_.videoBuffered();s.length>1&&this.logger_("On QUOTA_EXCEEDED_ERR, found gaps in the audio buffer: "+kh(s).join(", ")),a.length>1&&this.logger_("On QUOTA_EXCEEDED_ERR, found gaps in the video buffer: "+kh(a).join(", "));const o=s.length?s.start(0):0,l=s.length?s.end(s.length-1):0,u=a.length?a.start(0):0,c=a.length?a.end(a.length-1):0;if(l-o<=r0&&c-u<=r0){this.logger_(`On QUOTA_EXCEEDED_ERR, single segment too large to append to buffer, triggering an error. Appended byte length: ${n.byteLength}, audio buffer: ${kh(s).join(", ")}, video buffer: ${kh(a).join(", ")}, `),this.error({message:"Quota exceeded error with append of a single segment of content",excludeUntil:1/0}),this.trigger("error");return}this.waitingOnRemove_=!0,this.callQueue_.push(this.appendToSourceBuffer_.bind(this,{segmentInfo:e,type:t,bytes:n}));const m=this.currentTime_()-r0;this.logger_(`On QUOTA_EXCEEDED_ERR, removing audio/video from 0 to ${m}`),this.remove(0,m,()=>{this.logger_(`On QUOTA_EXCEEDED_ERR, retrying append in ${r0}s`),this.waitingOnRemove_=!1,this.quotaExceededErrorRetryTimeout_=X.setTimeout(()=>{this.logger_("On QUOTA_EXCEEDED_ERR, re-processing call queue"),this.quotaExceededErrorRetryTimeout_=null,this.processCallQueue_()},r0*1e3)},!0)}handleAppendError_({segmentInfo:e,type:t,bytes:n},i){if(i){if(i.code===sU){this.handleQuotaExceededError_({segmentInfo:e,type:t,bytes:n});return}this.logger_("Received non QUOTA_EXCEEDED_ERR on append",i),this.error({message:`${t} append of ${n.length}b failed for segment #${e.mediaIndex} in playlist ${e.playlist.id}`,metadata:{errorType:Se.Error.StreamingFailedToAppendSegment}}),this.trigger("appenderror")}}appendToSourceBuffer_({segmentInfo:e,type:t,initSegment:n,data:i,bytes:s}){if(!s){const o=[i];let l=i.byteLength;n&&(o.unshift(n),l+=n.byteLength),s=yhe({bytes:l,segments:o})}const a={segmentInfo:bh({type:this.loaderType_,segment:e})};this.trigger({type:"segmentappendstart",metadata:a}),this.sourceUpdater_.appendBuffer({segmentInfo:e,type:t,bytes:s},this.handleAppendError_.bind(this,{segmentInfo:e,type:t,bytes:s}))}handleSegmentTimingInfo_(e,t,n){if(!this.pendingSegment_||t!==this.pendingSegment_.requestId)return;const i=this.pendingSegment_.segment,s=`${e}TimingInfo`;i[s]||(i[s]={}),i[s].transmuxerPrependedSeconds=n.prependedContentDuration||0,i[s].transmuxedPresentationStart=n.start.presentation,i[s].transmuxedDecodeStart=n.start.decode,i[s].transmuxedPresentationEnd=n.end.presentation,i[s].transmuxedDecodeEnd=n.end.decode,i[s].baseMediaDecodeTime=n.baseMediaDecodeTime}appendData_(e,t){const{type:n,data:i}=t;if(!i||!i.byteLength||n==="audio"&&this.audioDisabled_)return;const s=this.getInitSegmentAndUpdateState_({type:n,initSegment:t.initSegment,playlist:e.playlist,map:e.isFmp4?e.segment.map:null});this.appendToSourceBuffer_({segmentInfo:e,type:n,initSegment:s,data:i})}loadSegment_(e){if(this.state="WAITING",this.pendingSegment_=e,this.trimBackBuffer_(e),typeof e.timestampOffset=="number"&&this.transmuxer_&&this.transmuxer_.postMessage({action:"clearAllMp4Captions"}),!this.hasEnoughInfoToLoad_()){cd(this),this.loadQueue_.push(()=>{const t=tr({},e,{forceTimestampOffset:!0});tr(e,this.generateSegmentInfo_(t)),this.isPendingTimestampOffset_=!1,this.updateTransmuxerAndRequestSegment_(e)});return}this.updateTransmuxerAndRequestSegment_(e)}updateTransmuxerAndRequestSegment_(e){this.shouldUpdateTransmuxerTimestampOffset_(e.timestampOffset)&&(this.gopBuffer_.length=0,e.gopsToAlignWith=[],this.timeMapping_=0,this.transmuxer_.postMessage({action:"reset"}),this.transmuxer_.postMessage({action:"setTimestampOffset",timestampOffset:e.timestampOffset}));const t=this.createSimplifiedSegmentObj_(e),n=this.isEndOfStream_(e.mediaIndex,e.playlist,e.partIndex),i=this.mediaIndex!==null,s=e.timeline!==this.currentTimeline_&&e.timeline>0,a=n||i&&s;this.logger_(`Requesting
${AU(e.uri)}
${Pf(e)}`),t.map&&!t.map.bytes&&(this.logger_("going to request init segment."),this.appendInitSegment_={video:!0,audio:!0}),e.abortRequests=che({xhr:this.vhs_.xhr,xhrOptions:this.xhrOptions_,decryptionWorker:this.decrypter_,segment:t,abortFn:this.handleAbort_.bind(this,e),progressFn:this.handleProgress_.bind(this),trackInfoFn:this.handleTrackInfo_.bind(this),timingInfoFn:this.handleTimingInfo_.bind(this),videoSegmentTimingInfoFn:this.handleSegmentTimingInfo_.bind(this,"video",e.requestId),audioSegmentTimingInfoFn:this.handleSegmentTimingInfo_.bind(this,"audio",e.requestId),captionsFn:this.handleCaptions_.bind(this),isEndOfTimeline:a,endedTimelineFn:()=>{this.logger_("received endedtimeline callback")},id3Fn:this.handleId3_.bind(this),dataFn:this.handleData_.bind(this),doneFn:this.segmentRequestFinished_.bind(this),onTransmuxerLog:({message:o,level:l,stream:u})=>{this.logger_(`${Pf(e)} logged from transmuxer stream ${u} as a ${l}: ${o}`)},triggerSegmentEventFn:({type:o,segment:l,keyInfo:u,trackInfo:c,timingInfo:h})=>{const g={segmentInfo:bh({segment:l})};u&&(g.keyInfo=u),c&&(g.trackInfo=c),h&&(g.timingInfo=h),this.trigger({type:o,metadata:g})}})}trimBackBuffer_(e){const t=Ohe(this.seekable_(),this.currentTime_(),this.playlist_.targetDuration||10);t>0&&this.remove(0,t)}createSimplifiedSegmentObj_(e){const t=e.segment,n=e.part,i=e.segment.key||e.segment.map&&e.segment.map.key,s=e.segment.map&&!e.segment.map.bytes,a={resolvedUri:n?n.resolvedUri:t.resolvedUri,byterange:n?n.byterange:t.byterange,requestId:e.requestId,transmuxer:e.transmuxer,audioAppendStart:e.audioAppendStart,gopsToAlignWith:e.gopsToAlignWith,part:e.part,type:this.loaderType_,start:e.startOfSegment,duration:e.duration,isEncrypted:i,isMediaInitialization:s},o=e.playlist.segments[e.mediaIndex-1];if(o&&o.timeline===t.timeline&&(o.videoTimingInfo?a.baseStartTime=o.videoTimingInfo.transmuxedDecodeEnd:o.audioTimingInfo&&(a.baseStartTime=o.audioTimingInfo.transmuxedDecodeEnd)),t.key){const l=t.key.iv||new Uint32Array([0,0,0,e.mediaIndex+e.playlist.mediaSequence]);a.key=this.segmentKey(t.key),a.key.iv=l}return t.map&&(a.map=this.initSegmentForMap(t.map)),a}saveTransferStats_(e){this.mediaRequests+=1,e&&(this.mediaBytesTransferred+=e.bytesReceived,this.mediaTransferDuration+=e.roundTripTime)}saveBandwidthRelatedStats_(e,t){if(this.pendingSegment_.byteLength=t.bytesReceived,e<oy){this.logger_(`Ignoring segment's bandwidth because its duration of ${e} is less than the min to record ${oy}`);return}const n={bandwidthInfo:{from:this.bandwidth,to:t.bandwidth}};this.trigger({type:"bandwidthupdated",metadata:n}),this.bandwidth=t.bandwidth,this.roundTrip=t.roundTripTime}handleTimeout_(){this.mediaRequestsTimedout+=1,this.bandwidth=1,this.roundTrip=NaN,this.trigger("bandwidthupdate"),this.trigger("timeout")}segmentRequestFinished_(e,t,n){if(this.callQueue_.length){this.callQueue_.push(this.segmentRequestFinished_.bind(this,e,t,n));return}if(this.saveTransferStats_(t.stats),!this.pendingSegment_||t.requestId!==this.pendingSegment_.requestId)return;if(e){if(this.pendingSegment_=null,this.state="READY",e.code===pu.ABORTED)return;if(this.pause(),e.code===pu.TIMEOUT){this.handleTimeout_();return}this.mediaRequestsErrored+=1,this.error(e),this.trigger("error");return}const i=this.pendingSegment_;this.saveBandwidthRelatedStats_(i.duration,t.stats),i.endOfAllRequests=t.endOfAllRequests,n.gopInfo&&(this.gopBuffer_=Ahe(this.gopBuffer_,n.gopInfo,this.safeAppend_)),this.state="APPENDING",this.trigger("appending"),this.waitForAppendsToComplete_(i)}setTimeMapping_(e){const t=this.syncController_.mappingForTimeline(e);t!==null&&(this.timeMapping_=t)}updateMediaSecondsLoaded_(e){typeof e.start=="number"&&typeof e.end=="number"?this.mediaSecondsLoaded+=e.end-e.start:this.mediaSecondsLoaded+=e.duration}shouldUpdateTransmuxerTimestampOffset_(e){return e===null?!1:this.loaderType_==="main"&&e!==this.sourceUpdater_.videoTimestampOffset()||!this.audioDisabled_&&e!==this.sourceUpdater_.audioTimestampOffset()}trueSegmentStart_({currentStart:e,playlist:t,mediaIndex:n,firstVideoFrameTimeForData:i,currentVideoTimestampOffset:s,useVideoTimingInfo:a,videoTimingInfo:o,audioTimingInfo:l}){if(typeof e<"u")return e;if(!a)return l.start;const u=t.segments[n-1];return n===0||!u||typeof u.start>"u"||u.end!==i+s?i:o.start}waitForAppendsToComplete_(e){const t=this.getCurrentMediaInfo_(e);if(!t){this.error({message:"No starting media returned, likely due to an unsupported media format.",playlistExclusionDuration:1/0}),this.trigger("error");return}const{hasAudio:n,hasVideo:i,isMuxed:s}=t,a=this.loaderType_==="main"&&i,o=!this.audioDisabled_&&n&&!s;if(e.waitingOnAppends=0,!e.hasAppendedData_){!e.timingInfo&&typeof e.timestampOffset=="number"&&(this.isPendingTimestampOffset_=!0),e.timingInfo={start:0},e.waitingOnAppends++,this.isPendingTimestampOffset_||(this.updateSourceBufferTimestampOffset_(e),this.processMetadataQueue_()),this.checkAppendsDone_(e);return}a&&e.waitingOnAppends++,o&&e.waitingOnAppends++,a&&this.sourceUpdater_.videoQueueCallback(this.checkAppendsDone_.bind(this,e)),o&&this.sourceUpdater_.audioQueueCallback(this.checkAppendsDone_.bind(this,e))}checkAppendsDone_(e){this.checkForAbort_(e.requestId)||(e.waitingOnAppends--,e.waitingOnAppends===0&&this.handleAppendsDone_())}checkForIllegalMediaSwitch(e){const t=Lhe(this.loaderType_,this.getCurrentMediaInfo_(),e);return t?(this.error({message:t,playlistExclusionDuration:1/0}),this.trigger("error"),!0):!1}updateSourceBufferTimestampOffset_(e){if(e.timestampOffset===null||typeof e.timingInfo.start!="number"||e.changedTimestampOffset||this.loaderType_!=="main")return;let t=!1;e.timestampOffset-=this.getSegmentStartTimeForTimestampOffsetCalculation_({videoTimingInfo:e.segment.videoTimingInfo,audioTimingInfo:e.segment.audioTimingInfo,timingInfo:e.timingInfo}),e.changedTimestampOffset=!0,e.timestampOffset!==this.sourceUpdater_.videoTimestampOffset()&&(this.sourceUpdater_.videoTimestampOffset(e.timestampOffset),t=!0),e.timestampOffset!==this.sourceUpdater_.audioTimestampOffset()&&(this.sourceUpdater_.audioTimestampOffset(e.timestampOffset),t=!0),t&&this.trigger("timestampoffset")}getSegmentStartTimeForTimestampOffsetCalculation_({videoTimingInfo:e,audioTimingInfo:t,timingInfo:n}){return this.useDtsForTimestampOffset_?e&&typeof e.transmuxedDecodeStart=="number"?e.transmuxedDecodeStart:t&&typeof t.transmuxedDecodeStart=="number"?t.transmuxedDecodeStart:n.start:n.start}updateTimingInfoEnd_(e){e.timingInfo=e.timingInfo||{};const t=this.getMediaInfo_(),i=this.loaderType_==="main"&&t&&t.hasVideo&&e.videoTimingInfo?e.videoTimingInfo:e.audioTimingInfo;i&&(e.timingInfo.end=typeof i.end=="number"?i.end:i.start+e.duration)}handleAppendsDone_(){if(this.pendingSegment_){const l={segmentInfo:bh({type:this.loaderType_,segment:this.pendingSegment_})};this.trigger({type:"appendsdone",metadata:l})}if(!this.pendingSegment_){this.state="READY",this.paused()||this.monitorBuffer_();return}const e=this.pendingSegment_;e.part&&e.part.syncInfo?e.part.syncInfo.markAppended():e.segment.syncInfo&&e.segment.syncInfo.markAppended(),this.updateTimingInfoEnd_(e),this.shouldSaveSegmentTimingInfo_&&this.syncController_.saveSegmentTimingInfo({segmentInfo:e,shouldSaveTimelineMapping:this.loaderType_==="main"});const t=$he(e,this.sourceType_);if(t&&(t.severity==="warn"?Se.log.warn(t.message):this.logger_(t.message)),this.recordThroughput_(e),this.pendingSegment_=null,this.state="READY",e.isSyncRequest&&(this.trigger("syncinfoupdate"),!e.hasAppendedData_)){this.logger_(`Throwing away un-appended sync request ${Pf(e)}`);return}this.logger_(`Appended ${Pf(e)}`),this.addSegmentMetadataCue_(e),this.fetchAtBuffer_=!0,this.currentTimeline_!==e.timeline&&(this.timelineChangeController_.lastTimelineChange({type:this.loaderType_,from:this.currentTimeline_,to:e.timeline}),this.loaderType_==="main"&&!this.audioDisabled_&&this.timelineChangeController_.lastTimelineChange({type:"audio",from:this.currentTimeline_,to:e.timeline})),this.currentTimeline_=e.timeline,this.trigger("syncinfoupdate");const n=e.segment,i=e.part,s=n.end&&this.currentTime_()-n.end>e.playlist.targetDuration*3,a=i&&i.end&&this.currentTime_()-i.end>e.playlist.partTargetDuration*3;if(s||a){this.logger_(`bad ${s?"segment":"part"} ${Pf(e)}`),this.resetEverything();return}this.mediaIndex!==null&&this.trigger("bandwidthupdate"),this.trigger("progress"),this.mediaIndex=e.mediaIndex,this.partIndex=e.partIndex,this.isEndOfStream_(e.mediaIndex,e.playlist,e.partIndex)&&this.endOfStream(),this.trigger("appended"),e.hasAppendedData_&&this.mediaAppends++,this.paused()||this.monitorBuffer_()}recordThroughput_(e){if(e.duration<oy){this.logger_(`Ignoring segment's throughput because its duration of ${e.duration} is less than the min to record ${oy}`);return}const t=this.throughput.rate,n=Date.now()-e.endOfAllRequests+1,i=Math.floor(e.byteLength/n*8*1e3);this.throughput.rate+=(i-t)/++this.throughput.count}addSegmentMetadataCue_(e){if(!this.segmentMetadataTrack_)return;const t=e.segment,n=t.start,i=t.end;if(!BM(n)||!BM(i))return;m0(n,i,this.segmentMetadataTrack_);const s=X.WebKitDataCue||X.VTTCue,a={custom:t.custom,dateTimeObject:t.dateTimeObject,dateTimeString:t.dateTimeString,programDateTime:t.programDateTime,bandwidth:e.playlist.attributes.BANDWIDTH,resolution:e.playlist.attributes.RESOLUTION,codecs:e.playlist.attributes.CODECS,byteLength:e.byteLength,uri:e.uri,timeline:e.timeline,playlist:e.playlist.id,start:n,end:i},o=JSON.stringify(a),l=new s(n,i,o);l.value=a,this.segmentMetadataTrack_.addCue(l)}};function pc(){}const DU=function(r){return typeof r!="string"?r:r.replace(/./,e=>e.toUpperCase())},jhe=["video","audio"],sE=(r,e)=>{const t=e[`${r}Buffer`];return t&&t.updating||e.queuePending[r]},zhe=(r,e)=>{for(let t=0;t<e.length;t++){const n=e[t];if(n.type==="mediaSource")return null;if(n.type===r)return t}return null},gp=(r,e)=>{if(e.queue.length===0)return;let t=0,n=e.queue[t];if(n.type==="mediaSource"){!e.updating()&&e.mediaSource.readyState!=="closed"&&(e.queue.shift(),n.action(e),n.doneFn&&n.doneFn(),gp("audio",e),gp("video",e));return}if(r!=="mediaSource"&&!(!e.ready()||e.mediaSource.readyState==="closed"||sE(r,e))){if(n.type!==r){if(t=zhe(r,e.queue),t===null)return;n=e.queue[t]}if(e.queue.splice(t,1),e.queuePending[r]=n,n.action(r,e),!n.doneFn){e.queuePending[r]=null,gp(r,e);return}}},IU=(r,e)=>{const t=e[`${r}Buffer`],n=DU(r);t&&(t.removeEventListener("updateend",e[`on${n}UpdateEnd_`]),t.removeEventListener("error",e[`on${n}Error_`]),e.codecs[r]=null,e[`${r}Buffer`]=null)},su=(r,e)=>r&&e&&Array.prototype.indexOf.call(r.sourceBuffers,e)!==-1,ro={appendBuffer:(r,e,t)=>(n,i)=>{const s=i[`${n}Buffer`];if(su(i.mediaSource,s)){i.logger_(`Appending segment ${e.mediaIndex}'s ${r.length} bytes to ${n}Buffer`);try{s.appendBuffer(r)}catch(a){i.logger_(`Error with code ${a.code} `+(a.code===sU?"(QUOTA_EXCEEDED_ERR) ":"")+`when appending segment ${e.mediaIndex} to ${n}Buffer`),i.queuePending[n]=null,t(a)}}},remove:(r,e)=>(t,n)=>{const i=n[`${t}Buffer`];if(su(n.mediaSource,i)){n.logger_(`Removing ${r} to ${e} from ${t}Buffer`);try{i.remove(r,e)}catch{n.logger_(`Remove ${r} to ${e} from ${t}Buffer failed`)}}},timestampOffset:r=>(e,t)=>{const n=t[`${e}Buffer`];su(t.mediaSource,n)&&(t.logger_(`Setting ${e}timestampOffset to ${r}`),n.timestampOffset=r)},callback:r=>(e,t)=>{r()},endOfStream:r=>e=>{if(e.mediaSource.readyState==="open"){e.logger_(`Calling mediaSource endOfStream(${r||""})`);try{e.mediaSource.endOfStream(r)}catch(t){Se.log.warn("Failed to call media source endOfStream",t)}}},duration:r=>e=>{e.logger_(`Setting mediaSource duration to ${r}`);try{e.mediaSource.duration=r}catch(t){Se.log.warn("Failed to set media source duration",t)}},abort:()=>(r,e)=>{if(e.mediaSource.readyState!=="open")return;const t=e[`${r}Buffer`];if(su(e.mediaSource,t)){e.logger_(`calling abort on ${r}Buffer`);try{t.abort()}catch(n){Se.log.warn(`Failed to abort on ${r}Buffer`,n)}}},addSourceBuffer:(r,e)=>t=>{const n=DU(r),i=Eu(e);t.logger_(`Adding ${r}Buffer with codec ${e} to mediaSource`);const s=t.mediaSource.addSourceBuffer(i);s.addEventListener("updateend",t[`on${n}UpdateEnd_`]),s.addEventListener("error",t[`on${n}Error_`]),t.codecs[r]=e,t[`${r}Buffer`]=s},removeSourceBuffer:r=>e=>{const t=e[`${r}Buffer`];if(IU(r,e),!!su(e.mediaSource,t)){e.logger_(`Removing ${r}Buffer with codec ${e.codecs[r]} from mediaSource`);try{e.mediaSource.removeSourceBuffer(t)}catch(n){Se.log.warn(`Failed to removeSourceBuffer ${r}Buffer`,n)}}},changeType:r=>(e,t)=>{const n=t[`${e}Buffer`],i=Eu(r);if(!su(t.mediaSource,n))return;const s=r.substring(0,r.indexOf(".")),a=t.codecs[e];if(a.substring(0,a.indexOf("."))===s)return;const l={codecsChangeInfo:{from:a,to:r}};t.trigger({type:"codecschange",metadata:l}),t.logger_(`changing ${e}Buffer codec from ${a} to ${r}`);try{n.changeType(i),t.codecs[e]=r}catch(u){l.errorType=Se.Error.StreamingCodecsChangeError,l.error=u,u.metadata=l,t.error_=u,t.trigger("error"),Se.log.warn(`Failed to changeType on ${e}Buffer`,u)}}},no=({type:r,sourceUpdater:e,action:t,doneFn:n,name:i})=>{e.queue.push({type:r,action:t,doneFn:n,name:i}),gp(r,e)},$M=(r,e)=>t=>{const n=e[`${r}Buffered`](),i=tde(n);if(e.logger_(`received "updateend" event for ${r} Source Buffer: `,i),e.queuePending[r]){const s=e.queuePending[r].doneFn;e.queuePending[r]=null,s&&s(e[`${r}Error_`])}gp(r,e)};let PU=class extends Se.EventTarget{constructor(e){super(),this.mediaSource=e,this.sourceopenListener_=()=>gp("mediaSource",this),this.mediaSource.addEventListener("sourceopen",this.sourceopenListener_),this.logger_=tl("SourceUpdater"),this.audioTimestampOffset_=0,this.videoTimestampOffset_=0,this.queue=[],this.queuePending={audio:null,video:null},this.delayedAudioAppendQueue_=[],this.videoAppendQueued_=!1,this.codecs={},this.onVideoUpdateEnd_=$M("video",this),this.onAudioUpdateEnd_=$M("audio",this),this.onVideoError_=t=>{this.videoError_=t},this.onAudioError_=t=>{this.audioError_=t},this.createdSourceBuffers_=!1,this.initializedEme_=!1,this.triggeredReady_=!1}initializedEme(){this.initializedEme_=!0,this.triggerReady()}hasCreatedSourceBuffers(){return this.createdSourceBuffers_}hasInitializedAnyEme(){return this.initializedEme_}ready(){return this.hasCreatedSourceBuffers()&&this.hasInitializedAnyEme()}createSourceBuffers(e){this.hasCreatedSourceBuffers()||(this.addOrChangeSourceBuffers(e),this.createdSourceBuffers_=!0,this.trigger("createdsourcebuffers"),this.triggerReady())}triggerReady(){this.ready()&&!this.triggeredReady_&&(this.triggeredReady_=!0,this.trigger("ready"))}addSourceBuffer(e,t){no({type:"mediaSource",sourceUpdater:this,action:ro.addSourceBuffer(e,t),name:"addSourceBuffer"})}abort(e){no({type:e,sourceUpdater:this,action:ro.abort(e),name:"abort"})}removeSourceBuffer(e){if(!this.canRemoveSourceBuffer()){Se.log.error("removeSourceBuffer is not supported!");return}no({type:"mediaSource",sourceUpdater:this,action:ro.removeSourceBuffer(e),name:"removeSourceBuffer"})}canRemoveSourceBuffer(){return!Se.browser.IS_FIREFOX&&X.MediaSource&&X.MediaSource.prototype&&typeof X.MediaSource.prototype.removeSourceBuffer=="function"}static canChangeType(){return X.SourceBuffer&&X.SourceBuffer.prototype&&typeof X.SourceBuffer.prototype.changeType=="function"}canChangeType(){return this.constructor.canChangeType()}changeType(e,t){if(!this.canChangeType()){Se.log.error("changeType is not supported!");return}no({type:e,sourceUpdater:this,action:ro.changeType(t),name:"changeType"})}addOrChangeSourceBuffers(e){if(!e||typeof e!="object"||Object.keys(e).length===0)throw new Error("Cannot addOrChangeSourceBuffers to undefined codecs");Object.keys(e).forEach(t=>{const n=e[t];if(!this.hasCreatedSourceBuffers())return this.addSourceBuffer(t,n);this.canChangeType()&&this.changeType(t,n)})}appendBuffer(e,t){const{segmentInfo:n,type:i,bytes:s}=e;if(this.processedAppend_=!0,i==="audio"&&this.videoBuffer&&!this.videoAppendQueued_){this.delayedAudioAppendQueue_.push([e,t]),this.logger_(`delayed audio append of ${s.length} until video append`);return}const a=t;if(no({type:i,sourceUpdater:this,action:ro.appendBuffer(s,n||{mediaIndex:-1},a),doneFn:t,name:"appendBuffer"}),i==="video"){if(this.videoAppendQueued_=!0,!this.delayedAudioAppendQueue_.length)return;const o=this.delayedAudioAppendQueue_.slice();this.logger_(`queuing delayed audio ${o.length} appendBuffers`),this.delayedAudioAppendQueue_.length=0,o.forEach(l=>{this.appendBuffer.apply(this,l)})}}audioBuffered(){return su(this.mediaSource,this.audioBuffer)&&this.audioBuffer.buffered?this.audioBuffer.buffered:ys()}videoBuffered(){return su(this.mediaSource,this.videoBuffer)&&this.videoBuffer.buffered?this.videoBuffer.buffered:ys()}buffered(){const e=su(this.mediaSource,this.videoBuffer)?this.videoBuffer:null,t=su(this.mediaSource,this.audioBuffer)?this.audioBuffer:null;return t&&!e?this.audioBuffered():e&&!t?this.videoBuffered():nde(this.audioBuffered(),this.videoBuffered())}setDuration(e,t=pc){no({type:"mediaSource",sourceUpdater:this,action:ro.duration(e),name:"duration",doneFn:t})}endOfStream(e=null,t=pc){typeof e!="string"&&(e=void 0),no({type:"mediaSource",sourceUpdater:this,action:ro.endOfStream(e),name:"endOfStream",doneFn:t})}removeAudio(e,t,n=pc){if(!this.audioBuffered().length||this.audioBuffered().end(0)===0){n();return}no({type:"audio",sourceUpdater:this,action:ro.remove(e,t),doneFn:n,name:"remove"})}removeVideo(e,t,n=pc){if(!this.videoBuffered().length||this.videoBuffered().end(0)===0){n();return}no({type:"video",sourceUpdater:this,action:ro.remove(e,t),doneFn:n,name:"remove"})}updating(){return!!(sE("audio",this)||sE("video",this))}audioTimestampOffset(e){return typeof e<"u"&&this.audioBuffer&&this.audioTimestampOffset_!==e&&(no({type:"audio",sourceUpdater:this,action:ro.timestampOffset(e),name:"timestampOffset"}),this.audioTimestampOffset_=e),this.audioTimestampOffset_}videoTimestampOffset(e){return typeof e<"u"&&this.videoBuffer&&this.videoTimestampOffset_!==e&&(no({type:"video",sourceUpdater:this,action:ro.timestampOffset(e),name:"timestampOffset"}),this.videoTimestampOffset_=e),this.videoTimestampOffset_}audioQueueCallback(e){this.audioBuffer&&no({type:"audio",sourceUpdater:this,action:ro.callback(e),name:"callback"})}videoQueueCallback(e){this.videoBuffer&&no({type:"video",sourceUpdater:this,action:ro.callback(e),name:"callback"})}dispose(){this.trigger("dispose"),jhe.forEach(e=>{this.abort(e),this.canRemoveSourceBuffer()?this.removeSourceBuffer(e):this[`${e}QueueCallback`](()=>IU(e,this))}),this.videoAppendQueued_=!1,this.delayedAudioAppendQueue_.length=0,this.sourceopenListener_&&this.mediaSource.removeEventListener("sourceopen",this.sourceopenListener_),this.off()}};const jM=r=>decodeURIComponent(escape(String.fromCharCode.apply(null,r))),Hhe=r=>{const e=new Uint8Array(r);return Array.from(e).map(t=>t.toString(16).padStart(2,"0")).join("")},zM=new Uint8Array(`

`.split("").map(r=>r.charCodeAt(0)));let Vhe=class extends Error{constructor(){super("Trying to parse received VTT cues, but there is no WebVTT. Make sure vtt.js is loaded.")}},Whe=class extends iE{constructor(e,t={}){super(e,t),this.mediaSource_=null,this.subtitlesTrack_=null,this.featuresNativeTextTracks_=e.featuresNativeTextTracks,this.loadVttJs=e.loadVttJs,this.shouldSaveSegmentTimingInfo_=!1}createTransmuxer_(){return null}buffered_(){if(!this.subtitlesTrack_||!this.subtitlesTrack_.cues||!this.subtitlesTrack_.cues.length)return ys();const e=this.subtitlesTrack_.cues,t=e[0].startTime,n=e[e.length-1].startTime;return ys([[t,n]])}initSegmentForMap(e,t=!1){if(!e)return null;const n=Cx(e);let i=this.initSegments_[n];if(t&&!i&&e.bytes){const s=zM.byteLength+e.bytes.byteLength,a=new Uint8Array(s);a.set(e.bytes),a.set(zM,e.bytes.byteLength),this.initSegments_[n]=i={resolvedUri:e.resolvedUri,byterange:e.byterange,bytes:a}}return i||e}couldBeginLoading_(){return this.playlist_&&this.subtitlesTrack_&&!this.paused()}init_(){return this.state="READY",this.resetEverything(),this.monitorBuffer_()}track(e){return typeof e>"u"?this.subtitlesTrack_:(this.subtitlesTrack_=e,this.state==="INIT"&&this.couldBeginLoading_()&&this.init_(),this.subtitlesTrack_)}remove(e,t){m0(e,t,this.subtitlesTrack_)}fillBuffer_(){const e=this.chooseNextRequest_();if(e){if(this.syncController_.timestampOffsetForTimeline(e.timeline)===null){const t=()=>{this.state="READY",this.paused()||this.monitorBuffer_()};this.syncController_.one("timestampoffset",t),this.state="WAITING_ON_TIMELINE";return}this.loadSegment_(e)}}timestampOffsetForSegment_(){return null}chooseNextRequest_(){return this.skipEmptySegments_(super.chooseNextRequest_())}skipEmptySegments_(e){for(;e&&e.segment.empty;){if(e.mediaIndex+1>=e.playlist.segments.length){e=null;break}e=this.generateSegmentInfo_({playlist:e.playlist,mediaIndex:e.mediaIndex+1,startOfSegment:e.startOfSegment+e.duration,isSyncRequest:e.isSyncRequest})}return e}stopForError(e){this.error(e),this.state="READY",this.pause(),this.trigger("error")}segmentRequestFinished_(e,t,n){if(!this.subtitlesTrack_){this.state="READY";return}if(this.saveTransferStats_(t.stats),!this.pendingSegment_){this.state="READY",this.mediaRequestsAborted+=1;return}if(e){e.code===pu.TIMEOUT&&this.handleTimeout_(),e.code===pu.ABORTED?this.mediaRequestsAborted+=1:this.mediaRequestsErrored+=1,this.stopForError(e);return}const i=this.pendingSegment_;this.saveBandwidthRelatedStats_(i.duration,t.stats),t.key&&this.segmentKey(t.key,!0),this.state="APPENDING",this.trigger("appending");const s=i.segment;if(s.map&&(s.map.bytes=t.map.bytes),i.bytes=t.bytes,typeof X.WebVTT!="function"&&typeof this.loadVttJs=="function"){this.state="WAITING_ON_VTTJS",this.loadVttJs().then(()=>this.segmentRequestFinished_(e,t,n),()=>this.stopForError({message:"Error loading vtt.js"}));return}s.requested=!0;try{this.parseVTTCues_(i)}catch(a){this.stopForError({message:a.message,metadata:{errorType:Se.Error.StreamingVttParserError,error:a}});return}if(this.updateTimeMapping_(i,this.syncController_.timelines[i.timeline],this.playlist_),i.cues.length?i.timingInfo={start:i.cues[0].startTime,end:i.cues[i.cues.length-1].endTime}:i.timingInfo={start:i.startOfSegment,end:i.startOfSegment+i.duration},i.isSyncRequest){this.trigger("syncinfoupdate"),this.pendingSegment_=null,this.state="READY";return}i.byteLength=i.bytes.byteLength,this.mediaSecondsLoaded+=s.duration,i.cues.forEach(a=>{this.subtitlesTrack_.addCue(this.featuresNativeTextTracks_?new X.VTTCue(a.startTime,a.endTime,a.text):a)}),Ehe(this.subtitlesTrack_),this.handleAppendsDone_()}handleData_(){}updateTimingInfoEnd_(){}parseVTTCues_(e){let t,n=!1;if(typeof X.WebVTT!="function")throw new Vhe;typeof X.TextDecoder=="function"?t=new X.TextDecoder("utf8"):(t=X.WebVTT.StringDecoder(),n=!0);const i=new X.WebVTT.Parser(X,X.vttjs,t);if(e.cues=[],e.timestampmap={MPEGTS:0,LOCAL:0},i.oncue=e.cues.push.bind(e.cues),i.ontimestampmap=a=>{e.timestampmap=a},i.onparsingerror=a=>{Se.log.warn("Error encountered when parsing cues: "+a.message)},e.segment.map){let a=e.segment.map.bytes;n&&(a=jM(a)),i.parse(a)}let s=e.bytes;n&&(s=jM(s)),i.parse(s),i.flush()}updateTimeMapping_(e,t,n){const i=e.segment;if(!t)return;if(!e.cues.length){i.empty=!0;return}const{MPEGTS:s,LOCAL:a}=e.timestampmap,l=s/Fa.ONE_SECOND_IN_TS-a+t.mapping;if(e.cues.forEach(u=>{const c=u.endTime-u.startTime,h=this.handleRollover_(u.startTime+l,t.time);u.startTime=Math.max(h,0),u.endTime=Math.max(h+c,0)}),!n.syncInfo){const u=e.cues[0].startTime,c=e.cues[e.cues.length-1].startTime;n.syncInfo={mediaSequence:n.mediaSequence+e.mediaIndex,time:Math.min(u,c-i.duration)}}}handleRollover_(e,t){if(t===null)return e;let n=e*Fa.ONE_SECOND_IN_TS;const i=t*Fa.ONE_SECOND_IN_TS;let s;for(i<n?s=-8589934592:s=8589934592;Math.abs(n-i)>4294967296;)n+=s;return n/Fa.ONE_SECOND_IN_TS}};const qhe=function(r,e){const t=r.cues;for(let n=0;n<t.length;n++){const i=t[n];if(e>=i.adStartTime&&e<=i.adEndTime)return i}return null},Ghe=function(r,e,t=0){if(!r.segments)return;let n=t,i;for(let s=0;s<r.segments.length;s++){const a=r.segments[s];if(i||(i=qhe(e,n+a.duration/2)),i){if("cueIn"in a){i.endTime=n,i.adEndTime=n,n+=a.duration,i=null;continue}if(n<i.endTime){n+=a.duration;continue}i.endTime+=a.duration}else if("cueOut"in a&&(i=new X.VTTCue(n,n+a.duration,a.cueOut),i.adStartTime=n,i.adEndTime=n+parseFloat(a.cueOut),e.addCue(i)),"cueOutCont"in a){const[o,l]=a.cueOutCont.split("/").map(parseFloat);i=new X.VTTCue(n,n+a.duration,""),i.adStartTime=n-o,i.adEndTime=i.adStartTime+l,e.addCue(i)}n+=a.duration}};class HM{constructor({start:e,end:t,segmentIndex:n,partIndex:i=null,appended:s=!1}){this.start_=e,this.end_=t,this.segmentIndex_=n,this.partIndex_=i,this.appended_=s}isInRange(e){return e>=this.start&&e<this.end}markAppended(){this.appended_=!0}resetAppendedStatus(){this.appended_=!1}get isAppended(){return this.appended_}get start(){return this.start_}get end(){return this.end_}get segmentIndex(){return this.segmentIndex_}get partIndex(){return this.partIndex_}}class Khe{constructor(e,t=[]){this.segmentSyncInfo_=e,this.partsSyncInfo_=t}get segmentSyncInfo(){return this.segmentSyncInfo_}get partsSyncInfo(){return this.partsSyncInfo_}get hasPartsSyncInfo(){return this.partsSyncInfo_.length>0}resetAppendStatus(){this.segmentSyncInfo_.resetAppendedStatus(),this.partsSyncInfo_.forEach(e=>e.resetAppendedStatus())}}class RU{constructor(){this.storage_=new Map,this.diagnostics_="",this.isReliable_=!1,this.start_=-1/0,this.end_=1/0}get start(){return this.start_}get end(){return this.end_}get diagnostics(){return this.diagnostics_}get isReliable(){return this.isReliable_}resetAppendedStatus(){this.storage_.forEach(e=>e.resetAppendStatus())}update(e,t){const{mediaSequence:n,segments:i}=e;if(this.isReliable_=this.isReliablePlaylist_(n,i),!!this.isReliable_)return this.updateStorage_(i,n,this.calculateBaseTime_(n,t))}getSyncInfoForTime(e){for(const{segmentSyncInfo:t,partsSyncInfo:n}of this.storage_.values())if(n.length){for(const i of n)if(i.isInRange(e))return i}else if(t.isInRange(e))return t;return null}getSyncInfoForMediaSequence(e){return this.storage_.get(e)}updateStorage_(e,t,n){const i=new Map;let s=`
`,a=n,o=t;this.start_=a,e.forEach((l,u)=>{const c=this.storage_.get(o),h=a,m=h+l.duration,g=!!(c&&c.segmentSyncInfo&&c.segmentSyncInfo.isAppended),y=new HM({start:h,end:m,appended:g,segmentIndex:u});l.syncInfo=y;let v=a;const x=(l.parts||[]).map((w,E)=>{const D=v,I=v+w.duration,A=!!(c&&c.partsSyncInfo&&c.partsSyncInfo[E]&&c.partsSyncInfo[E].isAppended),L=new HM({start:D,end:I,appended:A,segmentIndex:u,partIndex:E});return v=I,s+=`Media Sequence: ${o}.${E} | Range: ${D} --> ${I} | Appended: ${A}
`,w.syncInfo=L,L});i.set(o,new Khe(y,x)),s+=`${AU(l.resolvedUri)} | Media Sequence: ${o} | Range: ${h} --> ${m} | Appended: ${g}
`,o++,a=m}),this.end_=a,this.storage_=i,this.diagnostics_=s}calculateBaseTime_(e,t){return this.storage_.size?this.storage_.has(e)?this.storage_.get(e).segmentSyncInfo.start:t:0}isReliablePlaylist_(e,t){return e!=null&&Array.isArray(t)&&t.length}}class VM extends RU{constructor(e){super(),this.parent_=e}calculateBaseTime_(e,t){if(!this.storage_.size){const n=this.parent_.getSyncInfoForMediaSequence(e);return n?n.segmentSyncInfo.start:0}return super.calculateBaseTime_(e,t)}}const Xhe=86400,tC=[{name:"VOD",run:(r,e,t,n,i)=>t!==1/0?{time:0,segmentIndex:0,partIndex:null}:null},{name:"MediaSequence",run:(r,e,t,n,i,s)=>{const a=r.getMediaSequenceSync(s);if(!a||!a.isReliable)return null;const o=a.getSyncInfoForTime(i);return o?{time:o.start,partIndex:o.partIndex,segmentIndex:o.segmentIndex}:null}},{name:"ProgramDateTime",run:(r,e,t,n,i)=>{if(!Object.keys(r.timelineToDatetimeMappings).length)return null;let s=null,a=null;const o=Xw(e);i=i||0;for(let l=0;l<o.length;l++){const u=e.endList||i===0?l:o.length-(l+1),c=o[u],h=c.segment,m=r.timelineToDatetimeMappings[h.timeline];if(!m||!h.dateTimeObject)continue;let y=h.dateTimeObject.getTime()/1e3+m;if(h.parts&&typeof c.partIndex=="number")for(let x=0;x<c.partIndex;x++)y+=h.parts[x].duration;const v=Math.abs(i-y);if(a!==null&&(v===0||a<v))break;a=v,s={time:y,segmentIndex:c.segmentIndex,partIndex:c.partIndex}}return s}},{name:"Segment",run:(r,e,t,n,i)=>{let s=null,a=null;i=i||0;const o=Xw(e);for(let l=0;l<o.length;l++){const u=e.endList||i===0?l:o.length-(l+1),c=o[u],h=c.segment,m=c.part&&c.part.start||h&&h.start;if(h.timeline===n&&typeof m<"u"){const g=Math.abs(i-m);if(a!==null&&a<g)break;(!s||a===null||a>=g)&&(a=g,s={time:m,segmentIndex:c.segmentIndex,partIndex:c.partIndex})}}return s}},{name:"Discontinuity",run:(r,e,t,n,i)=>{let s=null;if(i=i||0,e.discontinuityStarts&&e.discontinuityStarts.length){let a=null;for(let o=0;o<e.discontinuityStarts.length;o++){const l=e.discontinuityStarts[o],u=e.discontinuitySequence+o+1,c=r.discontinuities[u];if(c){const h=Math.abs(i-c.time);if(a!==null&&a<h)break;(!s||a===null||a>=h)&&(a=h,s={time:c.time,segmentIndex:l,partIndex:null})}}}return s}},{name:"Playlist",run:(r,e,t,n,i)=>e.syncInfo?{time:e.syncInfo.time,segmentIndex:e.syncInfo.mediaSequence-e.mediaSequence,partIndex:null}:null}];let Yhe=class extends Se.EventTarget{constructor(e={}){super(),this.timelines=[],this.discontinuities=[],this.timelineToDatetimeMappings={};const t=new RU,n=new VM(t),i=new VM(t);this.mediaSequenceStorage_={main:t,audio:n,vtt:i},this.logger_=tl("SyncController")}getMediaSequenceSync(e){return this.mediaSequenceStorage_[e]||null}getSyncPoint(e,t,n,i,s){if(t!==1/0)return tC.find(({name:l})=>l==="VOD").run(this,e,t);const a=this.runStrategies_(e,t,n,i,s);if(!a.length)return null;for(const o of a){const{syncPoint:l,strategy:u}=o,{segmentIndex:c,time:h}=l;if(c<0)continue;const m=e.segments[c],g=h,y=g+m.duration;if(this.logger_(`Strategy: ${u}. Current time: ${i}. selected segment: ${c}. Time: [${g} -> ${y}]}`),i>=g&&i<y)return this.logger_("Found sync point with exact match: ",l),l}return this.selectSyncPoint_(a,{key:"time",value:i})}getExpiredTime(e,t){if(!e||!e.segments)return null;const n=this.runStrategies_(e,t,e.discontinuitySequence,0);if(!n.length)return null;const i=this.selectSyncPoint_(n,{key:"segmentIndex",value:0});return i.segmentIndex>0&&(i.time*=-1),Math.abs(i.time+P0({defaultDuration:e.targetDuration,durationList:e.segments,startIndex:i.segmentIndex,endIndex:0}))}runStrategies_(e,t,n,i,s){const a=[];for(let o=0;o<tC.length;o++){const l=tC[o],u=l.run(this,e,t,n,i,s);u&&(u.strategy=l.name,a.push({strategy:l.name,syncPoint:u}))}return a}selectSyncPoint_(e,t){let n=e[0].syncPoint,i=Math.abs(e[0].syncPoint[t.key]-t.value),s=e[0].strategy;for(let a=1;a<e.length;a++){const o=Math.abs(e[a].syncPoint[t.key]-t.value);o<i&&(i=o,n=e[a].syncPoint,s=e[a].strategy)}return this.logger_(`syncPoint for [${t.key}: ${t.value}] chosen with strategy [${s}]: [time:${n.time}, segmentIndex:${n.segmentIndex}`+(typeof n.partIndex=="number"?`,partIndex:${n.partIndex}`:"")+"]"),n}saveExpiredSegmentInfo(e,t){const n=t.mediaSequence-e.mediaSequence;if(n>Xhe){Se.log.warn(`Not saving expired segment info. Media sequence gap ${n} is too large.`);return}for(let i=n-1;i>=0;i--){const s=e.segments[i];if(s&&typeof s.start<"u"){t.syncInfo={mediaSequence:e.mediaSequence+i,time:s.start},this.logger_(`playlist refresh sync: [time:${t.syncInfo.time}, mediaSequence: ${t.syncInfo.mediaSequence}]`),this.trigger("syncinfoupdate");break}}}setDateTimeMappingForStart(e){if(this.timelineToDatetimeMappings={},e.segments&&e.segments.length&&e.segments[0].dateTimeObject){const t=e.segments[0],n=t.dateTimeObject.getTime()/1e3;this.timelineToDatetimeMappings[t.timeline]=-n}}saveSegmentTimingInfo({segmentInfo:e,shouldSaveTimelineMapping:t}){const n=this.calculateSegmentTimeMapping_(e,e.timingInfo,t),i=e.segment;n&&(this.saveDiscontinuitySyncInfo_(e),e.playlist.syncInfo||(e.playlist.syncInfo={mediaSequence:e.playlist.mediaSequence+e.mediaIndex,time:i.start}));const s=i.dateTimeObject;i.discontinuity&&t&&s&&(this.timelineToDatetimeMappings[i.timeline]=-(s.getTime()/1e3))}timestampOffsetForTimeline(e){return typeof this.timelines[e]>"u"?null:this.timelines[e].time}mappingForTimeline(e){return typeof this.timelines[e]>"u"?null:this.timelines[e].mapping}calculateSegmentTimeMapping_(e,t,n){const i=e.segment,s=e.part;let a=this.timelines[e.timeline],o,l;if(typeof e.timestampOffset=="number")a={time:e.startOfSegment,mapping:e.startOfSegment-t.start},n&&(this.timelines[e.timeline]=a,this.trigger("timestampoffset"),this.logger_(`time mapping for timeline ${e.timeline}: [time: ${a.time}] [mapping: ${a.mapping}]`)),o=e.startOfSegment,l=t.end+a.mapping;else if(a)o=t.start+a.mapping,l=t.end+a.mapping;else return!1;return s&&(s.start=o,s.end=l),(!i.start||o<i.start)&&(i.start=o),i.end=l,!0}saveDiscontinuitySyncInfo_(e){const t=e.playlist,n=e.segment;if(n.discontinuity)this.discontinuities[n.timeline]={time:n.start,accuracy:0};else if(t.discontinuityStarts&&t.discontinuityStarts.length)for(let i=0;i<t.discontinuityStarts.length;i++){const s=t.discontinuityStarts[i],a=t.discontinuitySequence+i+1,o=s-e.mediaIndex,l=Math.abs(o);if(!this.discontinuities[a]||this.discontinuities[a].accuracy>l){let u;o<0?u=n.start-P0({defaultDuration:t.targetDuration,durationList:t.segments,startIndex:e.mediaIndex,endIndex:s}):u=n.end+P0({defaultDuration:t.targetDuration,durationList:t.segments,startIndex:e.mediaIndex+1,endIndex:s}),this.discontinuities[a]={time:u,accuracy:l}}}}dispose(){this.trigger("dispose"),this.off()}},Qhe=class extends Se.EventTarget{constructor(){super(),this.pendingTimelineChanges_={},this.lastTimelineChanges_={}}clearPendingTimelineChange(e){this.pendingTimelineChanges_[e]=null,this.trigger("pendingtimelinechange")}pendingTimelineChange({type:e,from:t,to:n}){return typeof t=="number"&&typeof n=="number"&&(this.pendingTimelineChanges_[e]={type:e,from:t,to:n},this.trigger("pendingtimelinechange")),this.pendingTimelineChanges_[e]}lastTimelineChange({type:e,from:t,to:n}){if(typeof t=="number"&&typeof n=="number"){this.lastTimelineChanges_[e]={type:e,from:t,to:n},delete this.pendingTimelineChanges_[e];const i={timelineChangeInfo:{from:t,to:n}};this.trigger({type:"timelinechange",metadata:i})}return this.lastTimelineChanges_[e]}dispose(){this.trigger("dispose"),this.pendingTimelineChanges_={},this.lastTimelineChanges_={},this.off()}};const Jhe=vU(yU(function(){var r=(function(){function v(){this.listeners={}}var x=v.prototype;return x.on=function(E,D){this.listeners[E]||(this.listeners[E]=[]),this.listeners[E].push(D)},x.off=function(E,D){if(!this.listeners[E])return!1;var I=this.listeners[E].indexOf(D);return this.listeners[E]=this.listeners[E].slice(0),this.listeners[E].splice(I,1),I>-1},x.trigger=function(E){var D=this.listeners[E];if(D)if(arguments.length===2)for(var I=D.length,A=0;A<I;++A)D[A].call(this,arguments[1]);else for(var L=Array.prototype.slice.call(arguments,1),N=D.length,U=0;U<N;++U)D[U].apply(this,L)},x.dispose=function(){this.listeners={}},x.pipe=function(E){this.on("data",function(D){E.push(D)})},v})();/*! @name pkcs7 @version 1.0.4 @license Apache-2.0 */function e(v){return v.subarray(0,v.byteLength-v[v.byteLength-1])}/*! @name aes-decrypter @version 4.0.2 @license Apache-2.0 */const t=function(){const v=[[[],[],[],[],[]],[[],[],[],[],[]]],x=v[0],w=v[1],E=x[4],D=w[4];let I,A,L;const N=[],U=[];let B,k,H,q,V,Q;for(I=0;I<256;I++)U[(N[I]=I<<1^(I>>7)*283)^I]=I;for(A=L=0;!E[A];A^=B||1,L=U[L]||1)for(q=L^L<<1^L<<2^L<<3^L<<4,q=q>>8^q&255^99,E[A]=q,D[q]=A,H=N[k=N[B=N[A]]],Q=H*16843009^k*65537^B*257^A*16843008,V=N[q]*257^q*16843008,I=0;I<4;I++)x[I][A]=V=V<<24^V>>>8,w[I][q]=Q=Q<<24^Q>>>8;for(I=0;I<5;I++)x[I]=x[I].slice(0),w[I]=w[I].slice(0);return v};let n=null;class i{constructor(x){n||(n=t()),this._tables=[[n[0][0].slice(),n[0][1].slice(),n[0][2].slice(),n[0][3].slice(),n[0][4].slice()],[n[1][0].slice(),n[1][1].slice(),n[1][2].slice(),n[1][3].slice(),n[1][4].slice()]];let w,E,D;const I=this._tables[0][4],A=this._tables[1],L=x.length;let N=1;if(L!==4&&L!==6&&L!==8)throw new Error("Invalid aes key size");const U=x.slice(0),B=[];for(this._key=[U,B],w=L;w<4*L+28;w++)D=U[w-1],(w%L===0||L===8&&w%L===4)&&(D=I[D>>>24]<<24^I[D>>16&255]<<16^I[D>>8&255]<<8^I[D&255],w%L===0&&(D=D<<8^D>>>24^N<<24,N=N<<1^(N>>7)*283)),U[w]=U[w-L]^D;for(E=0;w;E++,w--)D=U[E&3?w:w-4],w<=4||E<4?B[E]=D:B[E]=A[0][I[D>>>24]]^A[1][I[D>>16&255]]^A[2][I[D>>8&255]]^A[3][I[D&255]]}decrypt(x,w,E,D,I,A){const L=this._key[1];let N=x^L[0],U=D^L[1],B=E^L[2],k=w^L[3],H,q,V;const Q=L.length/4-2;let ie,le=4;const he=this._tables[1],ae=he[0],ne=he[1],ue=he[2],ee=he[3],pe=he[4];for(ie=0;ie<Q;ie++)H=ae[N>>>24]^ne[U>>16&255]^ue[B>>8&255]^ee[k&255]^L[le],q=ae[U>>>24]^ne[B>>16&255]^ue[k>>8&255]^ee[N&255]^L[le+1],V=ae[B>>>24]^ne[k>>16&255]^ue[N>>8&255]^ee[U&255]^L[le+2],k=ae[k>>>24]^ne[N>>16&255]^ue[U>>8&255]^ee[B&255]^L[le+3],le+=4,N=H,U=q,B=V;for(ie=0;ie<4;ie++)I[(3&-ie)+A]=pe[N>>>24]<<24^pe[U>>16&255]<<16^pe[B>>8&255]<<8^pe[k&255]^L[le++],H=N,N=U,U=B,B=k,k=H}}class s extends r{constructor(){super(r),this.jobs=[],this.delay=1,this.timeout_=null}processJob_(){this.jobs.shift()(),this.jobs.length?this.timeout_=setTimeout(this.processJob_.bind(this),this.delay):this.timeout_=null}push(x){this.jobs.push(x),this.timeout_||(this.timeout_=setTimeout(this.processJob_.bind(this),this.delay))}}const a=function(v){return v<<24|(v&65280)<<8|(v&16711680)>>8|v>>>24},o=function(v,x,w){const E=new Int32Array(v.buffer,v.byteOffset,v.byteLength>>2),D=new i(Array.prototype.slice.call(x)),I=new Uint8Array(v.byteLength),A=new Int32Array(I.buffer);let L,N,U,B,k,H,q,V,Q;for(L=w[0],N=w[1],U=w[2],B=w[3],Q=0;Q<E.length;Q+=4)k=a(E[Q]),H=a(E[Q+1]),q=a(E[Q+2]),V=a(E[Q+3]),D.decrypt(k,H,q,V,A,Q),A[Q]=a(A[Q]^L),A[Q+1]=a(A[Q+1]^N),A[Q+2]=a(A[Q+2]^U),A[Q+3]=a(A[Q+3]^B),L=k,N=H,U=q,B=V;return I};class l{constructor(x,w,E,D){const I=l.STEP,A=new Int32Array(x.buffer),L=new Uint8Array(x.byteLength);let N=0;for(this.asyncStream_=new s,this.asyncStream_.push(this.decryptChunk_(A.subarray(N,N+I),w,E,L)),N=I;N<A.length;N+=I)E=new Uint32Array([a(A[N-4]),a(A[N-3]),a(A[N-2]),a(A[N-1])]),this.asyncStream_.push(this.decryptChunk_(A.subarray(N,N+I),w,E,L));this.asyncStream_.push(function(){D(null,e(L))})}static get STEP(){return 32e3}decryptChunk_(x,w,E,D){return function(){const I=o(x,w,E);D.set(I,x.byteOffset)}}}var u=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},c;typeof window<"u"?c=window:typeof u<"u"?c=u:typeof self<"u"?c=self:c={};var h=c,m=function(x){return ArrayBuffer.isView==="function"?ArrayBuffer.isView(x):x&&x.buffer instanceof ArrayBuffer},g=h.BigInt||Number;g("0x1"),g("0x100"),g("0x10000"),g("0x1000000"),g("0x100000000"),g("0x10000000000"),g("0x1000000000000"),g("0x100000000000000"),g("0x10000000000000000"),(function(){var v=new Uint16Array([65484]),x=new Uint8Array(v.buffer,v.byteOffset,v.byteLength);return x[0]===255?"big":x[0]===204?"little":"unknown"})();const y=function(v){const x={};return Object.keys(v).forEach(w=>{const E=v[w];m(E)?x[w]={bytes:E.buffer,byteOffset:E.byteOffset,byteLength:E.byteLength}:x[w]=E}),x};self.onmessage=function(v){const x=v.data,w=new Uint8Array(x.encrypted.bytes,x.encrypted.byteOffset,x.encrypted.byteLength),E=new Uint32Array(x.key.bytes,x.key.byteOffset,x.key.byteLength/4),D=new Uint32Array(x.iv.bytes,x.iv.byteOffset,x.iv.byteLength/4);new l(w,E,D,function(I,A){self.postMessage(y({source:x.source,decrypted:A}),[A.buffer])})}}));var Zhe=gU(Jhe);const efe=r=>{let e=r.default?"main":"alternative";return r.characteristics&&r.characteristics.indexOf("public.accessibility.describes-video")>=0&&(e="main-desc"),e},LU=(r,e)=>{r.abort(),r.pause(),e&&e.activePlaylistLoader&&(e.activePlaylistLoader.pause(),e.activePlaylistLoader=null)},aE=(r,e)=>{e.activePlaylistLoader=r,r.load()},tfe=(r,e)=>()=>{const{segmentLoaders:{[r]:t,main:n},mediaTypes:{[r]:i}}=e,s=i.activeTrack(),a=i.getActiveGroup(),o=i.activePlaylistLoader,l=i.lastGroup_;if(!(a&&l&&a.id===l.id)&&(i.lastGroup_=a,i.lastTrack_=s,LU(t,i),!(!a||a.isMainPlaylist))){if(!a.playlistLoader){o&&n.resetEverything();return}t.resyncLoader(),aE(a.playlistLoader,i)}},rfe=(r,e)=>()=>{const{segmentLoaders:{[r]:t},mediaTypes:{[r]:n}}=e;n.lastGroup_=null,t.abort(),t.pause()},nfe=(r,e)=>()=>{const{mainPlaylistLoader:t,segmentLoaders:{[r]:n,main:i},mediaTypes:{[r]:s}}=e,a=s.activeTrack(),o=s.getActiveGroup(),l=s.activePlaylistLoader,u=s.lastTrack_;if(!(u&&a&&u.id===a.id)&&(s.lastGroup_=o,s.lastTrack_=a,LU(n,s),!!o)){if(o.isMainPlaylist){if(!a||!u||a.id===u.id)return;const c=e.vhs.playlistController_,h=c.selectPlaylist();if(c.media()===h)return;s.logger_(`track change. Switching main audio from ${u.id} to ${a.id}`),t.pause(),i.resetEverything(),c.fastQualityChange_(h);return}if(r==="AUDIO"){if(!o.playlistLoader){i.setAudio(!0),i.resetEverything();return}n.setAudio(!0),i.setAudio(!1)}if(l===o.playlistLoader){aE(o.playlistLoader,s);return}n.track&&n.track(a),n.resetEverything(),aE(o.playlistLoader,s)}},kx={AUDIO:(r,e)=>()=>{const{mediaTypes:{[r]:t},excludePlaylist:n}=e,i=t.activeTrack(),s=t.activeGroup(),a=(s.filter(l=>l.default)[0]||s[0]).id,o=t.tracks[a];if(i===o){n({error:{message:"Problem encountered loading the default audio track."}});return}Se.log.warn("Problem encountered loading the alternate audio track.Switching back to default.");for(const l in t.tracks)t.tracks[l].enabled=t.tracks[l]===o;t.onTrackChanged()},SUBTITLES:(r,e)=>()=>{const{mediaTypes:{[r]:t}}=e;Se.log.warn("Problem encountered loading the subtitle track.Disabling subtitle track.");const n=t.activeTrack();n&&(n.mode="disabled"),t.onTrackChanged()}},WM={AUDIO:(r,e,t)=>{if(!e)return;const{tech:n,requestOptions:i,segmentLoaders:{[r]:s}}=t;e.on("loadedmetadata",()=>{const a=e.media();s.playlist(a,i),(!n.paused()||a.endList&&n.preload()!=="none")&&s.load()}),e.on("loadedplaylist",()=>{s.playlist(e.media(),i),n.paused()||s.load()}),e.on("error",kx[r](r,t))},SUBTITLES:(r,e,t)=>{const{tech:n,requestOptions:i,segmentLoaders:{[r]:s},mediaTypes:{[r]:a}}=t;e.on("loadedmetadata",()=>{const o=e.media();s.playlist(o,i),s.track(a.activeTrack()),(!n.paused()||o.endList&&n.preload()!=="none")&&s.load()}),e.on("loadedplaylist",()=>{s.playlist(e.media(),i),n.paused()||s.load()}),e.on("error",kx[r](r,t))}},ife={AUDIO:(r,e)=>{const{vhs:t,sourceType:n,segmentLoaders:{[r]:i},requestOptions:s,main:{mediaGroups:a},mediaTypes:{[r]:{groups:o,tracks:l,logger_:u}},mainPlaylistLoader:c}=e,h=Ug(c.main);(!a[r]||Object.keys(a[r]).length===0)&&(a[r]={main:{default:{default:!0}}},h&&(a[r].main.default.playlists=c.main.playlists));for(const m in a[r]){o[m]||(o[m]=[]);for(const g in a[r][m]){let y=a[r][m][g],v;if(h?(u(`AUDIO group '${m}' label '${g}' is a main playlist`),y.isMainPlaylist=!0,v=null):n==="vhs-json"&&y.playlists?v=new Yf(y.playlists[0],t,s):y.resolvedUri?v=new Yf(y.resolvedUri,t,s):y.playlists&&n==="dash"?v=new tE(y.playlists[0],t,s,c):v=null,y=wn({id:g,playlistLoader:v},y),WM[r](r,y.playlistLoader,e),o[m].push(y),typeof l[g]>"u"){const x=new Se.AudioTrack({id:g,kind:efe(y),enabled:!1,language:y.language,default:y.default,label:g});l[g]=x}}}i.on("error",kx[r](r,e))},SUBTITLES:(r,e)=>{const{tech:t,vhs:n,sourceType:i,segmentLoaders:{[r]:s},requestOptions:a,main:{mediaGroups:o},mediaTypes:{[r]:{groups:l,tracks:u}},mainPlaylistLoader:c}=e;for(const h in o[r]){l[h]||(l[h]=[]);for(const m in o[r][h]){if(!n.options_.useForcedSubtitles&&o[r][h][m].forced)continue;let g=o[r][h][m],y;if(i==="hls")y=new Yf(g.resolvedUri,n,a);else if(i==="dash"){if(!g.playlists.filter(x=>x.excludeUntil!==1/0).length)return;y=new tE(g.playlists[0],n,a,c)}else i==="vhs-json"&&(y=new Yf(g.playlists?g.playlists[0]:g.resolvedUri,n,a));if(g=wn({id:m,playlistLoader:y},g),WM[r](r,g.playlistLoader,e),l[h].push(g),typeof u[m]>"u"){const v=t.addRemoteTextTrack({id:m,kind:"subtitles",default:g.default&&g.autoselect,language:g.language,label:m},!1).track;u[m]=v}}}s.on("error",kx[r](r,e))},"CLOSED-CAPTIONS":(r,e)=>{const{tech:t,main:{mediaGroups:n},mediaTypes:{[r]:{groups:i,tracks:s}}}=e;for(const a in n[r]){i[a]||(i[a]=[]);for(const o in n[r][a]){const l=n[r][a][o];if(!/^(?:CC|SERVICE)/.test(l.instreamId))continue;const u=t.options_.vhs&&t.options_.vhs.captionServices||{};let c={label:o,language:l.language,instreamId:l.instreamId,default:l.default&&l.autoselect};if(u[c.instreamId]&&(c=wn(c,u[c.instreamId])),c.default===void 0&&delete c.default,i[a].push(wn({id:o},l)),typeof s[o]>"u"){const h=t.addRemoteTextTrack({id:c.instreamId,kind:"captions",default:c.default,language:c.language,label:c.label},!1).track;s[o]=h}}}}},OU=(r,e)=>{for(let t=0;t<r.length;t++)if(kk(e,r[t])||r[t].playlists&&OU(r[t].playlists,e))return!0;return!1},sfe=(r,e)=>t=>{const{mainPlaylistLoader:n,mediaTypes:{[r]:{groups:i}}}=e,s=n.media();if(!s)return null;let a=null;s.attributes[r]&&(a=i[s.attributes[r]]);const o=Object.keys(i);if(!a)if(r==="AUDIO"&&o.length>1&&Ug(e.main))for(let l=0;l<o.length;l++){const u=i[o[l]];if(OU(u,s)){a=u;break}}else i.main?a=i.main:o.length===1&&(a=i[o[0]]);return typeof t>"u"?a:t===null||!a?null:a.filter(l=>l.id===t.id)[0]||null},afe={AUDIO:(r,e)=>()=>{const{mediaTypes:{[r]:{tracks:t}}}=e;for(const n in t)if(t[n].enabled)return t[n];return null},SUBTITLES:(r,e)=>()=>{const{mediaTypes:{[r]:{tracks:t}}}=e;for(const n in t)if(t[n].mode==="showing"||t[n].mode==="hidden")return t[n];return null}},ofe=(r,{mediaTypes:e})=>()=>{const t=e[r].activeTrack();return t?e[r].activeGroup(t):null},lfe=r=>{["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(u=>{ife[u](u,r)});const{mediaTypes:e,mainPlaylistLoader:t,tech:n,vhs:i,segmentLoaders:{["AUDIO"]:s,main:a}}=r;["AUDIO","SUBTITLES"].forEach(u=>{e[u].activeGroup=sfe(u,r),e[u].activeTrack=afe[u](u,r),e[u].onGroupChanged=tfe(u,r),e[u].onGroupChanging=rfe(u,r),e[u].onTrackChanged=nfe(u,r),e[u].getActiveGroup=ofe(u,r)});const o=e.AUDIO.activeGroup();if(o){const u=(o.filter(h=>h.default)[0]||o[0]).id;e.AUDIO.tracks[u].enabled=!0,e.AUDIO.onGroupChanged(),e.AUDIO.onTrackChanged(),e.AUDIO.getActiveGroup().playlistLoader?(a.setAudio(!1),s.setAudio(!0)):a.setAudio(!0)}t.on("mediachange",()=>{["AUDIO","SUBTITLES"].forEach(u=>e[u].onGroupChanged())}),t.on("mediachanging",()=>{["AUDIO","SUBTITLES"].forEach(u=>e[u].onGroupChanging())});const l=()=>{e.AUDIO.onTrackChanged(),n.trigger({type:"usage",name:"vhs-audio-change"})};n.audioTracks().addEventListener("change",l),n.remoteTextTracks().addEventListener("change",e.SUBTITLES.onTrackChanged),i.on("dispose",()=>{n.audioTracks().removeEventListener("change",l),n.remoteTextTracks().removeEventListener("change",e.SUBTITLES.onTrackChanged)}),n.clearTracks("audio");for(const u in e.AUDIO.tracks)n.audioTracks().addTrack(e.AUDIO.tracks[u])},ufe=()=>{const r={};return["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(e=>{r[e]={groups:{},tracks:{},activePlaylistLoader:null,activeGroup:pc,activeTrack:pc,getActiveGroup:pc,onGroupChanged:pc,onTrackChanged:pc,lastTrack_:null,logger_:tl(`MediaGroups[${e}]`)}}),r};class qM{constructor(){this.priority_=[],this.pathwayClones_=new Map}set version(e){e===1&&(this.version_=e)}set ttl(e){this.ttl_=e||300}set reloadUri(e){e&&(this.reloadUri_=Ra(this.reloadUri_,e))}set priority(e){e&&e.length&&(this.priority_=e)}set pathwayClones(e){e&&e.length&&(this.pathwayClones_=new Map(e.map(t=>[t.ID,t])))}get version(){return this.version_}get ttl(){return this.ttl_}get reloadUri(){return this.reloadUri_}get priority(){return this.priority_}get pathwayClones(){return this.pathwayClones_}}class cfe extends Se.EventTarget{constructor(e,t){super(),this.currentPathway=null,this.defaultPathway=null,this.queryBeforeStart=!1,this.availablePathways_=new Set,this.steeringManifest=new qM,this.proxyServerUrl_=null,this.manifestType_=null,this.ttlTimeout_=null,this.request_=null,this.currentPathwayClones=new Map,this.nextPathwayClones=new Map,this.excludedSteeringManifestURLs=new Set,this.logger_=tl("Content Steering"),this.xhr_=e,this.getBandwidth_=t}assignTagProperties(e,t){this.manifestType_=t.serverUri?"HLS":"DASH";const n=t.serverUri||t.serverURL;if(!n){this.logger_(`steering manifest URL is ${n}, cannot request steering manifest.`),this.trigger("error");return}if(n.startsWith("data:")){this.decodeDataUriManifest_(n.substring(n.indexOf(",")+1));return}this.steeringManifest.reloadUri=Ra(e,n),this.defaultPathway=t.pathwayId||t.defaultServiceLocation,this.queryBeforeStart=t.queryBeforeStart,this.proxyServerUrl_=t.proxyServerURL,this.defaultPathway&&!this.queryBeforeStart&&this.trigger("content-steering")}requestSteeringManifest(e){const t=this.steeringManifest.reloadUri;if(!t)return;const n=e?t:this.getRequestURI(t);if(!n){this.logger_("No valid content steering manifest URIs. Stopping content steering."),this.trigger("error"),this.dispose();return}const i={contentSteeringInfo:{uri:n}};this.trigger({type:"contentsteeringloadstart",metadata:i}),this.request_=this.xhr_({uri:n,requestType:"content-steering-manifest"},(s,a)=>{if(s){if(a.status===410){this.logger_(`manifest request 410 ${s}.`),this.logger_(`There will be no more content steering requests to ${n} this session.`),this.excludedSteeringManifestURLs.add(n);return}if(a.status===429){const u=a.responseHeaders["retry-after"];this.logger_(`manifest request 429 ${s}.`),this.logger_(`content steering will retry in ${u} seconds.`),this.startTTLTimeout_(parseInt(u,10));return}this.logger_(`manifest failed to load ${s}.`),this.startTTLTimeout_();return}this.trigger({type:"contentsteeringloadcomplete",metadata:i});let o;try{o=JSON.parse(this.request_.responseText)}catch(u){const c={errorType:Se.Error.StreamingContentSteeringParserError,error:u};this.trigger({type:"error",metadata:c})}this.assignSteeringProperties_(o);const l={contentSteeringInfo:i.contentSteeringInfo,contentSteeringManifest:{version:this.steeringManifest.version,reloadUri:this.steeringManifest.reloadUri,priority:this.steeringManifest.priority}};this.trigger({type:"contentsteeringparsed",metadata:l}),this.startTTLTimeout_()})}setProxyServerUrl_(e){const t=new X.URL(e),n=new X.URL(this.proxyServerUrl_);return n.searchParams.set("url",encodeURI(t.toString())),this.setSteeringParams_(n.toString())}decodeDataUriManifest_(e){const t=JSON.parse(X.atob(e));this.assignSteeringProperties_(t)}setSteeringParams_(e){const t=new X.URL(e),n=this.getPathway(),i=this.getBandwidth_();if(n){const s=`_${this.manifestType_}_pathway`;t.searchParams.set(s,n)}if(i){const s=`_${this.manifestType_}_throughput`;t.searchParams.set(s,i)}return t.toString()}assignSteeringProperties_(e){if(this.steeringManifest.version=e.VERSION,!this.steeringManifest.version){this.logger_(`manifest version is ${e.VERSION}, which is not supported.`),this.trigger("error");return}this.steeringManifest.ttl=e.TTL,this.steeringManifest.reloadUri=e["RELOAD-URI"],this.steeringManifest.priority=e["PATHWAY-PRIORITY"]||e["SERVICE-LOCATION-PRIORITY"],this.steeringManifest.pathwayClones=e["PATHWAY-CLONES"],this.nextPathwayClones=this.steeringManifest.pathwayClones,this.availablePathways_.size||(this.logger_("There are no available pathways for content steering. Ending content steering."),this.trigger("error"),this.dispose());const n=(i=>{for(const s of i)if(this.availablePathways_.has(s))return s;return[...this.availablePathways_][0]})(this.steeringManifest.priority);this.currentPathway!==n&&(this.currentPathway=n,this.trigger("content-steering"))}getPathway(){return this.currentPathway||this.defaultPathway}getRequestURI(e){if(!e)return null;const t=i=>this.excludedSteeringManifestURLs.has(i);if(this.proxyServerUrl_){const i=this.setProxyServerUrl_(e);if(!t(i))return i}const n=this.setSteeringParams_(e);return t(n)?null:n}startTTLTimeout_(e=this.steeringManifest.ttl){const t=e*1e3;this.ttlTimeout_=X.setTimeout(()=>{this.requestSteeringManifest()},t)}clearTTLTimeout_(){X.clearTimeout(this.ttlTimeout_),this.ttlTimeout_=null}abort(){this.request_&&this.request_.abort(),this.request_=null}dispose(){this.off("content-steering"),this.off("error"),this.abort(),this.clearTTLTimeout_(),this.currentPathway=null,this.defaultPathway=null,this.queryBeforeStart=null,this.proxyServerUrl_=null,this.manifestType_=null,this.ttlTimeout_=null,this.request_=null,this.excludedSteeringManifestURLs=new Set,this.availablePathways_=new Set,this.steeringManifest=new qM}addAvailablePathway(e){e&&this.availablePathways_.add(e)}clearAvailablePathways(){this.availablePathways_.clear()}excludePathway(e){return this.availablePathways_.delete(e)}didDASHTagChange(e,t){return!t&&this.steeringManifest.reloadUri||t&&(Ra(e,t.serverURL)!==this.steeringManifest.reloadUri||t.defaultServiceLocation!==this.defaultPathway||t.queryBeforeStart!==this.queryBeforeStart||t.proxyServerURL!==this.proxyServerUrl_)}getAvailablePathways(){return this.availablePathways_}}const dfe=10;let lc;const hfe=["mediaRequests","mediaRequestsAborted","mediaRequestsTimedout","mediaRequestsErrored","mediaTransferDuration","mediaBytesTransferred","mediaAppends"],ffe=function(r){return this.audioSegmentLoader_[r]+this.mainSegmentLoader_[r]},pfe=function({currentPlaylist:r,buffered:e,currentTime:t,nextPlaylist:n,bufferLowWaterLine:i,bufferHighWaterLine:s,duration:a,bufferBasedABR:o,log:l}){if(!n)return Se.log.warn("We received no playlist to switch to. Please check your stream."),!1;const u=`allowing switch ${r&&r.id||"null"} -> ${n.id}`;if(!r)return l(`${u} as current playlist is not set`),!0;if(n.id===r.id)return!1;const c=!!Xf(e,t).length;if(!r.endList)return!c&&typeof r.partTargetDuration=="number"?(l(`not ${u} as current playlist is live llhls, but currentTime isn't in buffered.`),!1):(l(`${u} as current playlist is live`),!0);const h=Ck(e,t),m=o?Yi.EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE:Yi.MAX_BUFFER_LOW_WATER_LINE;if(a<m)return l(`${u} as duration < max low water line (${a} < ${m})`),!0;const g=n.attributes.BANDWIDTH,y=r.attributes.BANDWIDTH;if(g<y&&(!o||h<s)){let v=`${u} as next bandwidth < current bandwidth (${g} < ${y})`;return o&&(v+=` and forwardBuffer < bufferHighWaterLine (${h} < ${s})`),l(v),!0}if((!o||g>y)&&h>=i){let v=`${u} as forwardBuffer >= bufferLowWaterLine (${h} >= ${i})`;return o&&(v+=` and next bandwidth > current bandwidth (${g} > ${y})`),l(v),!0}return l(`not ${u} as no switching criteria met`),!1};class mfe extends Se.EventTarget{constructor(e){super();const{src:t,withCredentials:n,tech:i,bandwidth:s,externVhs:a,useCueTags:o,playlistExclusionDuration:l,enableLowInitialPlaylist:u,sourceType:c,cacheEncryptionKeys:h,bufferBasedABR:m,leastPixelDiffSelector:g,captionServices:y,experimentalUseMMS:v}=e;if(!t)throw new Error("A non-empty playlist URL or JSON manifest string is required");let{maxPlaylistRetries:x}=e;(x===null||typeof x>"u")&&(x=1/0),lc=a,this.bufferBasedABR=!!m,this.leastPixelDiffSelector=!!g,this.withCredentials=n,this.tech_=i,this.vhs_=i.vhs,this.player_=e.player_,this.sourceType_=c,this.useCueTags_=o,this.playlistExclusionDuration=l,this.maxPlaylistRetries=x,this.enableLowInitialPlaylist=u,this.useCueTags_&&(this.cueTagsTrack_=this.tech_.addTextTrack("metadata","ad-cues"),this.cueTagsTrack_.inBandMetadataTrackDispatchType=""),this.requestOptions_={withCredentials:n,maxPlaylistRetries:x,timeout:null},this.on("error",this.pauseLoading),this.mediaTypes_=ufe(),v&&X.ManagedMediaSource?(this.tech_.el_.disableRemotePlayback=!0,this.mediaSource=new X.ManagedMediaSource,Se.log("Using ManagedMediaSource")):X.MediaSource&&(this.mediaSource=new X.MediaSource),this.handleDurationChange_=this.handleDurationChange_.bind(this),this.handleSourceOpen_=this.handleSourceOpen_.bind(this),this.handleSourceEnded_=this.handleSourceEnded_.bind(this),this.load=this.load.bind(this),this.pause=this.pause.bind(this),this.mediaSource.addEventListener("durationchange",this.handleDurationChange_),this.mediaSource.addEventListener("sourceopen",this.handleSourceOpen_),this.mediaSource.addEventListener("sourceended",this.handleSourceEnded_),this.mediaSource.addEventListener("startstreaming",this.load),this.mediaSource.addEventListener("endstreaming",this.pause),this.seekable_=ys(),this.hasPlayed_=!1,this.syncController_=new Yhe(e),this.segmentMetadataTrack_=i.addRemoteTextTrack({kind:"metadata",label:"segment-metadata"},!1).track,this.decrypter_=new Zhe,this.sourceUpdater_=new PU(this.mediaSource),this.inbandTextTracks_={},this.timelineChangeController_=new Qhe,this.keyStatusMap_=new Map;const w={vhs:this.vhs_,parse708captions:e.parse708captions,useDtsForTimestampOffset:e.useDtsForTimestampOffset,captionServices:y,mediaSource:this.mediaSource,currentTime:this.tech_.currentTime.bind(this.tech_),seekable:()=>this.seekable(),seeking:()=>this.tech_.seeking(),duration:()=>this.duration(),hasPlayed:()=>this.hasPlayed_,goalBufferLength:()=>this.goalBufferLength(),bandwidth:s,syncController:this.syncController_,decrypter:this.decrypter_,sourceType:this.sourceType_,inbandTextTracks:this.inbandTextTracks_,cacheEncryptionKeys:h,sourceUpdater:this.sourceUpdater_,timelineChangeController:this.timelineChangeController_,exactManifestTimings:e.exactManifestTimings,addMetadataToTextTrack:this.addMetadataToTextTrack.bind(this)};this.mainPlaylistLoader_=this.sourceType_==="dash"?new tE(t,this.vhs_,wn(this.requestOptions_,{addMetadataToTextTrack:this.addMetadataToTextTrack.bind(this)})):new Yf(t,this.vhs_,wn(this.requestOptions_,{addDateRangesToTextTrack:this.addDateRangesToTextTrack_.bind(this)})),this.setupMainPlaylistLoaderListeners_(),this.mainSegmentLoader_=new iE(wn(w,{segmentMetadataTrack:this.segmentMetadataTrack_,loaderType:"main"}),e),this.audioSegmentLoader_=new iE(wn(w,{loaderType:"audio"}),e),this.subtitleSegmentLoader_=new Whe(wn(w,{loaderType:"vtt",featuresNativeTextTracks:this.tech_.featuresNativeTextTracks,loadVttJs:()=>new Promise((I,A)=>{function L(){i.off("vttjserror",N),I()}function N(){i.off("vttjsloaded",L),A()}i.one("vttjsloaded",L),i.one("vttjserror",N),i.addWebVttScript_()})}),e);const E=()=>this.mainSegmentLoader_.bandwidth;this.contentSteeringController_=new cfe(this.vhs_.xhr,E),this.setupSegmentLoaderListeners_(),this.bufferBasedABR&&(this.mainPlaylistLoader_.one("loadedplaylist",()=>this.startABRTimer_()),this.tech_.on("pause",()=>this.stopABRTimer_()),this.tech_.on("play",()=>this.startABRTimer_())),hfe.forEach(I=>{this[I+"_"]=ffe.bind(this,I)}),this.logger_=tl("pc"),this.triggeredFmp4Usage=!1,this.tech_.preload()==="none"?(this.loadOnPlay_=()=>{this.loadOnPlay_=null,this.mainPlaylistLoader_.load()},this.tech_.one("play",this.loadOnPlay_)):this.mainPlaylistLoader_.load(),this.timeToLoadedData__=-1,this.mainAppendsToLoadedData__=-1,this.audioAppendsToLoadedData__=-1;const D=this.tech_.preload()==="none"?"play":"loadstart";this.tech_.one(D,()=>{const I=Date.now();this.tech_.one("loadeddata",()=>{this.timeToLoadedData__=Date.now()-I,this.mainAppendsToLoadedData__=this.mainSegmentLoader_.mediaAppends,this.audioAppendsToLoadedData__=this.audioSegmentLoader_.mediaAppends})})}mainAppendsToLoadedData_(){return this.mainAppendsToLoadedData__}audioAppendsToLoadedData_(){return this.audioAppendsToLoadedData__}appendsToLoadedData_(){const e=this.mainAppendsToLoadedData_(),t=this.audioAppendsToLoadedData_();return e===-1||t===-1?-1:e+t}timeToLoadedData_(){return this.timeToLoadedData__}checkABR_(e="abr"){const t=this.selectPlaylist();t&&this.shouldSwitchToMedia_(t)&&this.switchMedia_(t,e)}switchMedia_(e,t,n){const i=this.media(),s=i&&(i.id||i.uri),a=e&&(e.id||e.uri);if(s&&s!==a){this.logger_(`switch media ${s} -> ${a} from ${t}`);const o={renditionInfo:{id:a,bandwidth:e.attributes.BANDWIDTH,resolution:e.attributes.RESOLUTION,codecs:e.attributes.CODECS},cause:t};this.trigger({type:"renditionselected",metadata:o}),this.tech_.trigger({type:"usage",name:`vhs-rendition-change-${t}`})}this.mainPlaylistLoader_.media(e,n)}switchMediaForDASHContentSteering_(){["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(e=>{const t=this.mediaTypes_[e],n=t?t.activeGroup():null,i=this.contentSteeringController_.getPathway();if(n&&i){const a=(n.length?n[0].playlists:n.playlists).filter(o=>o.attributes.serviceLocation===i);a.length&&this.mediaTypes_[e].activePlaylistLoader.media(a[0])}})}startABRTimer_(){this.stopABRTimer_(),this.abrTimer_=X.setInterval(()=>this.checkABR_(),250)}stopABRTimer_(){this.tech_.scrubbing&&this.tech_.scrubbing()||(X.clearInterval(this.abrTimer_),this.abrTimer_=null)}getAudioTrackPlaylists_(){const e=this.main(),t=e&&e.playlists||[];if(!e||!e.mediaGroups||!e.mediaGroups.AUDIO)return t;const n=e.mediaGroups.AUDIO,i=Object.keys(n);let s;if(Object.keys(this.mediaTypes_.AUDIO.groups).length)s=this.mediaTypes_.AUDIO.activeTrack();else{const o=n.main||i.length&&n[i[0]];for(const l in o)if(o[l].default){s={label:l};break}}if(!s)return t;const a=[];for(const o in n)if(n[o][s.label]){const l=n[o][s.label];if(l.playlists&&l.playlists.length)a.push.apply(a,l.playlists);else if(l.uri)a.push(l);else if(e.playlists.length)for(let u=0;u<e.playlists.length;u++){const c=e.playlists[u];c.attributes&&c.attributes.AUDIO&&c.attributes.AUDIO===o&&a.push(c)}}return a.length?a:t}setupMainPlaylistLoaderListeners_(){this.mainPlaylistLoader_.on("loadedmetadata",()=>{const t=this.mainPlaylistLoader_.media(),n=t.targetDuration*1.5*1e3;Yw(this.mainPlaylistLoader_.main,this.mainPlaylistLoader_.media())?this.requestOptions_.timeout=0:this.requestOptions_.timeout=n,t.endList&&this.tech_.preload()!=="none"&&(this.mainSegmentLoader_.playlist(t,this.requestOptions_),this.mainSegmentLoader_.load()),lfe({sourceType:this.sourceType_,segmentLoaders:{AUDIO:this.audioSegmentLoader_,SUBTITLES:this.subtitleSegmentLoader_,main:this.mainSegmentLoader_},tech:this.tech_,requestOptions:this.requestOptions_,mainPlaylistLoader:this.mainPlaylistLoader_,vhs:this.vhs_,main:this.main(),mediaTypes:this.mediaTypes_,excludePlaylist:this.excludePlaylist.bind(this)}),this.triggerPresenceUsage_(this.main(),t),this.setupFirstPlay(),!this.mediaTypes_.AUDIO.activePlaylistLoader||this.mediaTypes_.AUDIO.activePlaylistLoader.media()?this.trigger("selectedinitialmedia"):this.mediaTypes_.AUDIO.activePlaylistLoader.one("loadedmetadata",()=>{this.trigger("selectedinitialmedia")})}),this.mainPlaylistLoader_.on("loadedplaylist",()=>{this.loadOnPlay_&&this.tech_.off("play",this.loadOnPlay_);let t=this.mainPlaylistLoader_.media();if(!t){this.attachContentSteeringListeners_(),this.initContentSteeringController_(),this.excludeUnsupportedVariants_();let n;if(this.enableLowInitialPlaylist&&(n=this.selectInitialPlaylist()),n||(n=this.selectPlaylist()),!n||!this.shouldSwitchToMedia_(n)||(this.initialMedia_=n,this.switchMedia_(this.initialMedia_,"initial"),!(this.sourceType_==="vhs-json"&&this.initialMedia_.segments)))return;t=this.initialMedia_}this.handleUpdatedMediaPlaylist(t)}),this.mainPlaylistLoader_.on("error",()=>{const t=this.mainPlaylistLoader_.error;this.excludePlaylist({playlistToExclude:t.playlist,error:t})}),this.mainPlaylistLoader_.on("mediachanging",()=>{this.mainSegmentLoader_.abort(),this.mainSegmentLoader_.pause()}),this.mainPlaylistLoader_.on("mediachange",()=>{const t=this.mainPlaylistLoader_.media(),n=t.targetDuration*1.5*1e3;Yw(this.mainPlaylistLoader_.main,this.mainPlaylistLoader_.media())?this.requestOptions_.timeout=0:this.requestOptions_.timeout=n,this.sourceType_==="dash"&&this.mainPlaylistLoader_.load(),this.mainSegmentLoader_.pause(),this.mainSegmentLoader_.playlist(t,this.requestOptions_),this.waitingForFastQualityPlaylistReceived_?this.runFastQualitySwitch_():this.mainSegmentLoader_.load(),this.tech_.trigger({type:"mediachange",bubbles:!0})}),this.mainPlaylistLoader_.on("playlistunchanged",()=>{const t=this.mainPlaylistLoader_.media();if(t.lastExcludeReason_==="playlist-unchanged")return;this.stuckAtPlaylistEnd_(t)&&(this.excludePlaylist({error:{message:"Playlist no longer updating.",reason:"playlist-unchanged"}}),this.tech_.trigger("playliststuck"))}),this.mainPlaylistLoader_.on("renditiondisabled",()=>{this.tech_.trigger({type:"usage",name:"vhs-rendition-disabled"})}),this.mainPlaylistLoader_.on("renditionenabled",()=>{this.tech_.trigger({type:"usage",name:"vhs-rendition-enabled"})}),["manifestrequeststart","manifestrequestcomplete","manifestparsestart","manifestparsecomplete","playlistrequeststart","playlistrequestcomplete","playlistparsestart","playlistparsecomplete","renditiondisabled","renditionenabled"].forEach(t=>{this.mainPlaylistLoader_.on(t,n=>{this.player_.trigger(tr({},n))})})}handleUpdatedMediaPlaylist(e){this.useCueTags_&&this.updateAdCues_(e),this.mainSegmentLoader_.pause(),this.mainSegmentLoader_.playlist(e,this.requestOptions_),this.waitingForFastQualityPlaylistReceived_&&this.runFastQualitySwitch_(),this.updateDuration(!e.endList),this.tech_.paused()||(this.mainSegmentLoader_.load(),this.audioSegmentLoader_&&this.audioSegmentLoader_.load())}triggerPresenceUsage_(e,t){const n=e.mediaGroups||{};let i=!0;const s=Object.keys(n.AUDIO);for(const a in n.AUDIO)for(const o in n.AUDIO[a])n.AUDIO[a][o].uri||(i=!1);i&&this.tech_.trigger({type:"usage",name:"vhs-demuxed"}),Object.keys(n.SUBTITLES).length&&this.tech_.trigger({type:"usage",name:"vhs-webvtt"}),lc.Playlist.isAes(t)&&this.tech_.trigger({type:"usage",name:"vhs-aes"}),s.length&&Object.keys(n.AUDIO[s[0]]).length>1&&this.tech_.trigger({type:"usage",name:"vhs-alternate-audio"}),this.useCueTags_&&this.tech_.trigger({type:"usage",name:"vhs-playlist-cue-tags"})}shouldSwitchToMedia_(e){const t=this.mainPlaylistLoader_.media()||this.mainPlaylistLoader_.pendingMedia_,n=this.tech_.currentTime(),i=this.bufferLowWaterLine(),s=this.bufferHighWaterLine(),a=this.tech_.buffered();return pfe({buffered:a,currentTime:n,currentPlaylist:t,nextPlaylist:e,bufferLowWaterLine:i,bufferHighWaterLine:s,duration:this.duration(),bufferBasedABR:this.bufferBasedABR,log:this.logger_})}setupSegmentLoaderListeners_(){this.mainSegmentLoader_.on("bandwidthupdate",()=>{this.checkABR_("bandwidthupdate"),this.tech_.trigger("bandwidthupdate")}),this.mainSegmentLoader_.on("timeout",()=>{this.bufferBasedABR&&this.mainSegmentLoader_.load()}),this.bufferBasedABR||this.mainSegmentLoader_.on("progress",()=>{this.trigger("progress")}),this.mainSegmentLoader_.on("error",()=>{const n=this.mainSegmentLoader_.error();this.excludePlaylist({playlistToExclude:n.playlist,error:n})}),this.mainSegmentLoader_.on("appenderror",()=>{this.error=this.mainSegmentLoader_.error_,this.trigger("error")}),this.mainSegmentLoader_.on("syncinfoupdate",()=>{this.onSyncInfoUpdate_()}),this.mainSegmentLoader_.on("timestampoffset",()=>{this.tech_.trigger({type:"usage",name:"vhs-timestamp-offset"})}),this.audioSegmentLoader_.on("syncinfoupdate",()=>{this.onSyncInfoUpdate_()}),this.audioSegmentLoader_.on("appenderror",()=>{this.error=this.audioSegmentLoader_.error_,this.trigger("error")}),this.mainSegmentLoader_.on("ended",()=>{this.logger_("main segment loader ended"),this.onEndOfStream()}),this.timelineChangeController_.on("audioTimelineBehind",()=>{const n=this.audioSegmentLoader_.pendingSegment_;if(!n||!n.segment||!n.segment.syncInfo)return;const i=n.segment.syncInfo.end+.01;this.tech_.setCurrentTime(i)}),this.mainSegmentLoader_.on("earlyabort",n=>{this.bufferBasedABR||(this.delegateLoaders_("all",["abort"]),this.excludePlaylist({error:{message:"Aborted early because there isn't enough bandwidth to complete the request without rebuffering."},playlistExclusionDuration:dfe}))});const e=()=>{if(!this.sourceUpdater_.hasCreatedSourceBuffers())return this.tryToCreateSourceBuffers_();const n=this.getCodecsOrExclude_();n&&this.sourceUpdater_.addOrChangeSourceBuffers(n)};this.mainSegmentLoader_.on("trackinfo",e),this.audioSegmentLoader_.on("trackinfo",e),this.mainSegmentLoader_.on("fmp4",()=>{this.triggeredFmp4Usage||(this.tech_.trigger({type:"usage",name:"vhs-fmp4"}),this.triggeredFmp4Usage=!0)}),this.audioSegmentLoader_.on("fmp4",()=>{this.triggeredFmp4Usage||(this.tech_.trigger({type:"usage",name:"vhs-fmp4"}),this.triggeredFmp4Usage=!0)}),this.audioSegmentLoader_.on("ended",()=>{this.logger_("audioSegmentLoader ended"),this.onEndOfStream()}),["segmentselected","segmentloadstart","segmentloaded","segmentkeyloadstart","segmentkeyloadcomplete","segmentdecryptionstart","segmentdecryptioncomplete","segmenttransmuxingstart","segmenttransmuxingcomplete","segmenttransmuxingtrackinfoavailable","segmenttransmuxingtiminginfoavailable","segmentappendstart","appendsdone","bandwidthupdated","timelinechange","codecschange"].forEach(n=>{this.mainSegmentLoader_.on(n,i=>{this.player_.trigger(tr({},i))}),this.audioSegmentLoader_.on(n,i=>{this.player_.trigger(tr({},i))}),this.subtitleSegmentLoader_.on(n,i=>{this.player_.trigger(tr({},i))})})}mediaSecondsLoaded_(){return Math.max(this.audioSegmentLoader_.mediaSecondsLoaded+this.mainSegmentLoader_.mediaSecondsLoaded)}load(){this.mainSegmentLoader_.load(),this.mediaTypes_.AUDIO.activePlaylistLoader&&this.audioSegmentLoader_.load(),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&this.subtitleSegmentLoader_.load()}pause(){this.mainSegmentLoader_.pause(),this.mediaTypes_.AUDIO.activePlaylistLoader&&this.audioSegmentLoader_.pause(),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&this.subtitleSegmentLoader_.pause()}fastQualityChange_(e=this.selectPlaylist()){if(e&&e===this.mainPlaylistLoader_.media()){this.logger_("skipping fastQualityChange because new media is same as old");return}this.switchMedia_(e,"fast-quality"),this.waitingForFastQualityPlaylistReceived_=!0}runFastQualitySwitch_(){this.waitingForFastQualityPlaylistReceived_=!1,this.mainSegmentLoader_.pause(),this.mainSegmentLoader_.resetEverything(()=>{this.mainSegmentLoader_.load()})}play(){if(this.setupFirstPlay())return;this.tech_.ended()&&this.tech_.setCurrentTime(0),this.hasPlayed_&&this.load();const e=this.tech_.seekable();if(this.tech_.duration()===1/0&&this.tech_.currentTime()<e.start(0))return this.tech_.setCurrentTime(e.end(e.length-1))}setupFirstPlay(){const e=this.mainPlaylistLoader_.media();if(!e||this.tech_.paused()||this.hasPlayed_)return!1;if(!e.endList||e.start){const t=this.seekable();if(!t.length)return!1;const n=t.end(0);let i=n;if(e.start){const s=e.start.timeOffset;s<0?i=Math.max(n+s,t.start(0)):i=Math.min(n,s)}this.trigger("firstplay"),this.tech_.setCurrentTime(i)}return this.hasPlayed_=!0,this.load(),!0}handleSourceOpen_(){if(this.tryToCreateSourceBuffers_(),this.tech_.autoplay()){const e=this.tech_.play();typeof e<"u"&&typeof e.then=="function"&&e.then(null,t=>{})}this.trigger("sourceopen")}handleSourceEnded_(){if(!this.inbandTextTracks_.metadataTrack_)return;const e=this.inbandTextTracks_.metadataTrack_.cues;if(!e||!e.length)return;const t=this.duration();e[e.length-1].endTime=isNaN(t)||Math.abs(t)===1/0?Number.MAX_VALUE:t}handleDurationChange_(){this.tech_.trigger("durationchange")}onEndOfStream(){let e=this.mainSegmentLoader_.ended_;if(this.mediaTypes_.AUDIO.activePlaylistLoader){const t=this.mainSegmentLoader_.getCurrentMediaInfo_();!t||t.hasVideo?e=e&&this.audioSegmentLoader_.ended_:e=this.audioSegmentLoader_.ended_}e&&(this.stopABRTimer_(),this.sourceUpdater_.endOfStream())}stuckAtPlaylistEnd_(e){if(!this.seekable().length)return!1;const n=this.syncController_.getExpiredTime(e,this.duration());if(n===null)return!1;const i=lc.Playlist.playlistEnd(e,n),s=this.tech_.currentTime(),a=this.tech_.buffered();if(!a.length)return i-s<=fu;const o=a.end(a.length-1);return o-s<=fu&&i-o<=fu}excludePlaylist({playlistToExclude:e=this.mainPlaylistLoader_.media(),error:t={},playlistExclusionDuration:n}){if(e=e||this.mainPlaylistLoader_.media(),n=n||t.playlistExclusionDuration||this.playlistExclusionDuration,!e){this.error=t,this.mediaSource.readyState!=="open"?this.trigger("error"):this.sourceUpdater_.endOfStream("network");return}e.playlistErrors_++;const i=this.mainPlaylistLoader_.main.playlists,s=i.filter(iS),a=s.length===1&&s[0]===e;if(i.length===1&&n!==1/0)return Se.log.warn(`Problem encountered with playlist ${e.id}. Trying again since it is the only playlist.`),this.tech_.trigger("retryplaylist"),this.mainPlaylistLoader_.load(a);if(a){if(this.main().contentSteering){const y=this.pathwayAttribute_(e),v=this.contentSteeringController_.steeringManifest.ttl*1e3;this.contentSteeringController_.excludePathway(y),this.excludeThenChangePathway_(),setTimeout(()=>{this.contentSteeringController_.addAvailablePathway(y)},v);return}let g=!1;i.forEach(y=>{if(y===e)return;const v=y.excludeUntil;typeof v<"u"&&v!==1/0&&(g=!0,delete y.excludeUntil)}),g&&(Se.log.warn("Removing other playlists from the exclusion list because the last rendition is about to be excluded."),this.tech_.trigger("retryplaylist"))}let o;e.playlistErrors_>this.maxPlaylistRetries?o=1/0:o=Date.now()+n*1e3,e.excludeUntil=o,t.reason&&(e.lastExcludeReason_=t.reason),this.tech_.trigger("excludeplaylist"),this.tech_.trigger({type:"usage",name:"vhs-rendition-excluded"});const l=this.selectPlaylist();if(!l){this.error="Playback cannot continue. No available working or supported playlists.",this.trigger("error");return}const u=t.internal?this.logger_:Se.log.warn,c=t.message?" "+t.message:"";u(`${t.internal?"Internal problem":"Problem"} encountered with playlist ${e.id}.${c} Switching to playlist ${l.id}.`),l.attributes.AUDIO!==e.attributes.AUDIO&&this.delegateLoaders_("audio",["abort","pause"]),l.attributes.SUBTITLES!==e.attributes.SUBTITLES&&this.delegateLoaders_("subtitle",["abort","pause"]),this.delegateLoaders_("main",["abort","pause"]);const h=l.targetDuration/2*1e3||5*1e3,m=typeof l.lastRequest=="number"&&Date.now()-l.lastRequest<=h;return this.switchMedia_(l,"exclude",a||m)}pauseLoading(){this.delegateLoaders_("all",["abort","pause"]),this.stopABRTimer_()}delegateLoaders_(e,t){const n=[],i=e==="all";(i||e==="main")&&n.push(this.mainPlaylistLoader_);const s=[];(i||e==="audio")&&s.push("AUDIO"),(i||e==="subtitle")&&(s.push("CLOSED-CAPTIONS"),s.push("SUBTITLES")),s.forEach(a=>{const o=this.mediaTypes_[a]&&this.mediaTypes_[a].activePlaylistLoader;o&&n.push(o)}),["main","audio","subtitle"].forEach(a=>{const o=this[`${a}SegmentLoader_`];o&&(e===a||e==="all")&&n.push(o)}),n.forEach(a=>t.forEach(o=>{typeof a[o]=="function"&&a[o]()}))}setCurrentTime(e){const t=Xf(this.tech_.buffered(),e);if(!(this.mainPlaylistLoader_&&this.mainPlaylistLoader_.media())||!this.mainPlaylistLoader_.media().segments)return 0;if(t&&t.length)return e;this.mainSegmentLoader_.pause(),this.mainSegmentLoader_.resetEverything(),this.mediaTypes_.AUDIO.activePlaylistLoader&&(this.audioSegmentLoader_.pause(),this.audioSegmentLoader_.resetEverything()),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&(this.subtitleSegmentLoader_.pause(),this.subtitleSegmentLoader_.resetEverything()),this.load()}duration(){if(!this.mainPlaylistLoader_)return 0;const e=this.mainPlaylistLoader_.media();return e?e.endList?this.mediaSource?this.mediaSource.duration:lc.Playlist.duration(e):1/0:0}seekable(){return this.seekable_}onSyncInfoUpdate_(){let e;if(!this.mainPlaylistLoader_)return;let t=this.mainPlaylistLoader_.media();if(!t)return;let n=this.syncController_.getExpiredTime(t,this.duration());if(n===null)return;const i=this.mainPlaylistLoader_.main,s=lc.Playlist.seekable(t,n,lc.Playlist.liveEdgeDelay(i,t));if(s.length===0||this.mediaTypes_.AUDIO.activePlaylistLoader&&(t=this.mediaTypes_.AUDIO.activePlaylistLoader.media(),n=this.syncController_.getExpiredTime(t,this.duration()),n===null||(e=lc.Playlist.seekable(t,n,lc.Playlist.liveEdgeDelay(i,t)),e.length===0)))return;let a,o;if(this.seekable_&&this.seekable_.length&&(a=this.seekable_.end(0),o=this.seekable_.start(0)),e?e.start(0)>s.end(0)||s.start(0)>e.end(0)?this.seekable_=s:this.seekable_=ys([[e.start(0)>s.start(0)?e.start(0):s.start(0),e.end(0)<s.end(0)?e.end(0):s.end(0)]]):this.seekable_=s,this.seekable_&&this.seekable_.length&&this.seekable_.end(0)===a&&this.seekable_.start(0)===o)return;this.logger_(`seekable updated [${q6(this.seekable_)}]`);const l={seekableRanges:this.seekable_};this.trigger({type:"seekablerangeschanged",metadata:l}),this.tech_.trigger("seekablechanged")}updateDuration(e){if(this.updateDuration_&&(this.mediaSource.removeEventListener("sourceopen",this.updateDuration_),this.updateDuration_=null),this.mediaSource.readyState!=="open"){this.updateDuration_=this.updateDuration.bind(this,e),this.mediaSource.addEventListener("sourceopen",this.updateDuration_);return}if(e){const i=this.seekable();if(!i.length)return;(isNaN(this.mediaSource.duration)||this.mediaSource.duration<i.end(i.length-1))&&this.sourceUpdater_.setDuration(i.end(i.length-1));return}const t=this.tech_.buffered();let n=lc.Playlist.duration(this.mainPlaylistLoader_.media());t.length>0&&(n=Math.max(n,t.end(t.length-1))),this.mediaSource.duration!==n&&this.sourceUpdater_.setDuration(n)}dispose(){this.trigger("dispose"),this.decrypter_.terminate(),this.mainPlaylistLoader_.dispose(),this.mainSegmentLoader_.dispose(),this.contentSteeringController_.dispose(),this.keyStatusMap_.clear(),this.loadOnPlay_&&this.tech_.off("play",this.loadOnPlay_),["AUDIO","SUBTITLES"].forEach(e=>{const t=this.mediaTypes_[e].groups;for(const n in t)t[n].forEach(i=>{i.playlistLoader&&i.playlistLoader.dispose()})}),this.audioSegmentLoader_.dispose(),this.subtitleSegmentLoader_.dispose(),this.sourceUpdater_.dispose(),this.timelineChangeController_.dispose(),this.stopABRTimer_(),this.updateDuration_&&this.mediaSource.removeEventListener("sourceopen",this.updateDuration_),this.mediaSource.removeEventListener("durationchange",this.handleDurationChange_),this.mediaSource.removeEventListener("sourceopen",this.handleSourceOpen_),this.mediaSource.removeEventListener("sourceended",this.handleSourceEnded_),this.off()}main(){return this.mainPlaylistLoader_.main}media(){return this.mainPlaylistLoader_.media()||this.initialMedia_}areMediaTypesKnown_(){const e=!!this.mediaTypes_.AUDIO.activePlaylistLoader,t=!!this.mainSegmentLoader_.getCurrentMediaInfo_(),n=e?!!this.audioSegmentLoader_.getCurrentMediaInfo_():!0;return!(!t||!n)}getCodecsOrExclude_(){const e={main:this.mainSegmentLoader_.getCurrentMediaInfo_()||{},audio:this.audioSegmentLoader_.getCurrentMediaInfo_()||{}},t=this.mainSegmentLoader_.getPendingSegmentPlaylist()||this.media();e.video=e.main;const n=L0(this.main(),t),i={},s=!!this.mediaTypes_.AUDIO.activePlaylistLoader;if(e.main.hasVideo&&(i.video=n.video||e.main.videoCodec||uN),e.main.isMuxed&&(i.video+=`,${n.audio||e.main.audioCodec||tx}`),(e.main.hasAudio&&!e.main.isMuxed||e.audio.hasAudio||s)&&(i.audio=n.audio||e.main.audioCodec||e.audio.audioCodec||tx,e.audio.isFmp4=e.main.hasAudio&&!e.main.isMuxed?e.main.isFmp4:e.audio.isFmp4),!i.audio&&!i.video){this.excludePlaylist({playlistToExclude:t,error:{message:"Could not determine codecs for playlist."},playlistExclusionDuration:1/0});return}const a=(u,c)=>u?bu(c):ap(c),o={};let l;if(["video","audio"].forEach(function(u){if(i.hasOwnProperty(u)&&!a(e[u].isFmp4,i[u])){const c=e[u].isFmp4?"browser":"muxer";o[c]=o[c]||[],o[c].push(i[u]),u==="audio"&&(l=c)}}),s&&l&&t.attributes.AUDIO){const u=t.attributes.AUDIO;this.main().playlists.forEach(c=>{(c.attributes&&c.attributes.AUDIO)===u&&c!==t&&(c.excludeUntil=1/0)}),this.logger_(`excluding audio group ${u} as ${l} does not support codec(s): "${i.audio}"`)}if(Object.keys(o).length){const u=Object.keys(o).reduce((c,h)=>(c&&(c+=", "),c+=`${h} does not support codec(s): "${o[h].join(",")}"`,c),"")+".";this.excludePlaylist({playlistToExclude:t,error:{internal:!0,message:u},playlistExclusionDuration:1/0});return}if(this.sourceUpdater_.hasCreatedSourceBuffers()&&!this.sourceUpdater_.canChangeType()){const u=[];if(["video","audio"].forEach(c=>{const h=(Mi(this.sourceUpdater_.codecs[c]||"")[0]||{}).type,m=(Mi(i[c]||"")[0]||{}).type;h&&m&&h.toLowerCase()!==m.toLowerCase()&&u.push(`"${this.sourceUpdater_.codecs[c]}" -> "${i[c]}"`)}),u.length){this.excludePlaylist({playlistToExclude:t,error:{message:`Codec switching not supported: ${u.join(", ")}.`,internal:!0},playlistExclusionDuration:1/0});return}}return i}tryToCreateSourceBuffers_(){if(this.mediaSource.readyState!=="open"||this.sourceUpdater_.hasCreatedSourceBuffers()||!this.areMediaTypesKnown_())return;const e=this.getCodecsOrExclude_();if(!e)return;this.sourceUpdater_.createSourceBuffers(e);const t=[e.video,e.audio].filter(Boolean).join(",");this.excludeIncompatibleVariants_(t)}excludeUnsupportedVariants_(){const e=this.main().playlists,t=[];Object.keys(e).forEach(n=>{const i=e[n];if(t.indexOf(i.id)!==-1)return;t.push(i.id);const s=L0(this.main,i),a=[];s.audio&&!ap(s.audio)&&!bu(s.audio)&&a.push(`audio codec ${s.audio}`),s.video&&!ap(s.video)&&!bu(s.video)&&a.push(`video codec ${s.video}`),s.text&&s.text==="stpp.ttml.im1t"&&a.push(`text codec ${s.text}`),a.length&&(i.excludeUntil=1/0,this.logger_(`excluding ${i.id} for unsupported: ${a.join(", ")}`))})}excludeIncompatibleVariants_(e){const t=[],n=this.main().playlists,i=wx(Mi(e)),s=LM(i),a=i.video&&Mi(i.video)[0]||null,o=i.audio&&Mi(i.audio)[0]||null;Object.keys(n).forEach(l=>{const u=n[l];if(t.indexOf(u.id)!==-1||u.excludeUntil===1/0)return;t.push(u.id);const c=[],h=L0(this.mainPlaylistLoader_.main,u),m=LM(h);if(!(!h.audio&&!h.video)){if(m!==s&&c.push(`codec count "${m}" !== "${s}"`),!this.sourceUpdater_.canChangeType()){const g=h.video&&Mi(h.video)[0]||null,y=h.audio&&Mi(h.audio)[0]||null;g&&a&&g.type.toLowerCase()!==a.type.toLowerCase()&&c.push(`video codec "${g.type}" !== "${a.type}"`),y&&o&&y.type.toLowerCase()!==o.type.toLowerCase()&&c.push(`audio codec "${y.type}" !== "${o.type}"`)}c.length&&(u.excludeUntil=1/0,this.logger_(`excluding ${u.id}: ${c.join(" && ")}`))}})}updateAdCues_(e){let t=0;const n=this.seekable();n.length&&(t=n.start(0)),Ghe(e,this.cueTagsTrack_,t)}goalBufferLength(){const e=this.tech_.currentTime(),t=Yi.GOAL_BUFFER_LENGTH,n=Yi.GOAL_BUFFER_LENGTH_RATE,i=Math.max(t,Yi.MAX_GOAL_BUFFER_LENGTH);return Math.min(t+e*n,i)}bufferLowWaterLine(){const e=this.tech_.currentTime(),t=Yi.BUFFER_LOW_WATER_LINE,n=Yi.BUFFER_LOW_WATER_LINE_RATE,i=Math.max(t,Yi.MAX_BUFFER_LOW_WATER_LINE),s=Math.max(t,Yi.EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE);return Math.min(t+e*n,this.bufferBasedABR?s:i)}bufferHighWaterLine(){return Yi.BUFFER_HIGH_WATER_LINE}addDateRangesToTextTrack_(e){FM(this.inbandTextTracks_,"com.apple.streaming",this.tech_),whe({inbandTextTracks:this.inbandTextTracks_,dateRanges:e})}addMetadataToTextTrack(e,t,n){const i=this.sourceUpdater_.videoBuffer?this.sourceUpdater_.videoTimestampOffset():this.sourceUpdater_.audioTimestampOffset();FM(this.inbandTextTracks_,e,this.tech_),She({inbandTextTracks:this.inbandTextTracks_,metadataArray:t,timestampOffset:i,videoDuration:n})}pathwayAttribute_(e){return e.attributes["PATHWAY-ID"]||e.attributes.serviceLocation}initContentSteeringController_(){const e=this.main();if(e.contentSteering){for(const t of e.playlists)this.contentSteeringController_.addAvailablePathway(this.pathwayAttribute_(t));if(this.contentSteeringController_.assignTagProperties(e.uri,e.contentSteering),this.contentSteeringController_.queryBeforeStart){this.contentSteeringController_.requestSteeringManifest(!0);return}this.tech_.one("canplay",()=>{this.contentSteeringController_.requestSteeringManifest()})}}resetContentSteeringController_(){this.contentSteeringController_.clearAvailablePathways(),this.contentSteeringController_.dispose(),this.initContentSteeringController_()}attachContentSteeringListeners_(){this.contentSteeringController_.on("content-steering",this.excludeThenChangePathway_.bind(this)),["contentsteeringloadstart","contentsteeringloadcomplete","contentsteeringparsed"].forEach(t=>{this.contentSteeringController_.on(t,n=>{this.trigger(tr({},n))})}),this.sourceType_==="dash"&&this.mainPlaylistLoader_.on("loadedplaylist",()=>{const t=this.main();(this.contentSteeringController_.didDASHTagChange(t.uri,t.contentSteering)||(()=>{const s=this.contentSteeringController_.getAvailablePathways(),a=[];for(const o of t.playlists){const l=o.attributes.serviceLocation;if(l&&(a.push(l),!s.has(l)))return!0}return!!(!a.length&&s.size)})())&&this.resetContentSteeringController_()})}excludeThenChangePathway_(){const e=this.contentSteeringController_.getPathway();if(!e)return;this.handlePathwayClones_();const n=this.main().playlists,i=new Set;let s=!1;Object.keys(n).forEach(a=>{const o=n[a],l=this.pathwayAttribute_(o),u=l&&e!==l;o.excludeUntil===1/0&&o.lastExcludeReason_==="content-steering"&&!u&&(delete o.excludeUntil,delete o.lastExcludeReason_,s=!0);const h=!o.excludeUntil&&o.excludeUntil!==1/0;!i.has(o.id)&&u&&h&&(i.add(o.id),o.excludeUntil=1/0,o.lastExcludeReason_="content-steering",this.logger_(`excluding ${o.id} for ${o.lastExcludeReason_}`))}),this.contentSteeringController_.manifestType_==="DASH"&&Object.keys(this.mediaTypes_).forEach(a=>{const o=this.mediaTypes_[a];if(o.activePlaylistLoader){const l=o.activePlaylistLoader.media_;l&&l.attributes.serviceLocation!==e&&(s=!0)}}),s&&this.changeSegmentPathway_()}handlePathwayClones_(){const t=this.main().playlists,n=this.contentSteeringController_.currentPathwayClones,i=this.contentSteeringController_.nextPathwayClones;if(n&&n.size||i&&i.size){for(const[a,o]of n.entries())i.get(a)||(this.mainPlaylistLoader_.updateOrDeleteClone(o),this.contentSteeringController_.excludePathway(a));for(const[a,o]of i.entries()){const l=n.get(a);if(!l){t.filter(c=>c.attributes["PATHWAY-ID"]===o["BASE-ID"]).forEach(c=>{this.mainPlaylistLoader_.addClonePathway(o,c)}),this.contentSteeringController_.addAvailablePathway(a);continue}this.equalPathwayClones_(l,o)||(this.mainPlaylistLoader_.updateOrDeleteClone(o,!0),this.contentSteeringController_.addAvailablePathway(a))}this.contentSteeringController_.currentPathwayClones=new Map(JSON.parse(JSON.stringify([...i])))}}equalPathwayClones_(e,t){if(e["BASE-ID"]!==t["BASE-ID"]||e.ID!==t.ID||e["URI-REPLACEMENT"].HOST!==t["URI-REPLACEMENT"].HOST)return!1;const n=e["URI-REPLACEMENT"].PARAMS,i=t["URI-REPLACEMENT"].PARAMS;for(const s in n)if(n[s]!==i[s])return!1;for(const s in i)if(n[s]!==i[s])return!1;return!0}changeSegmentPathway_(){const e=this.selectPlaylist();this.pauseLoading(),this.contentSteeringController_.manifestType_==="DASH"&&this.switchMediaForDASHContentSteering_(),this.switchMedia_(e,"content-steering")}excludeNonUsablePlaylistsByKeyId_(){if(!this.mainPlaylistLoader_||!this.mainPlaylistLoader_.main)return;let e=0;const t="non-usable";this.mainPlaylistLoader_.main.playlists.forEach(n=>{const i=this.mainPlaylistLoader_.getKeyIdSet(n);!i||!i.size||i.forEach(s=>{const a="usable",o=this.keyStatusMap_.has(s)&&this.keyStatusMap_.get(s)===a,l=n.lastExcludeReason_===t&&n.excludeUntil===1/0;o?o&&l&&(delete n.excludeUntil,delete n.lastExcludeReason_,this.logger_(`enabling playlist ${n.id} because key ID ${s} is ${a}`)):(n.excludeUntil!==1/0&&n.lastExcludeReason_!==t&&(n.excludeUntil=1/0,n.lastExcludeReason_=t,this.logger_(`excluding playlist ${n.id} because the key ID ${s} doesn't exist in the keyStatusMap or is not ${a}`)),e++)})}),e>=this.mainPlaylistLoader_.main.playlists.length&&this.mainPlaylistLoader_.main.playlists.forEach(n=>{const i=n&&n.attributes&&n.attributes.RESOLUTION&&n.attributes.RESOLUTION.height<720,s=n.excludeUntil===1/0&&n.lastExcludeReason_===t;i&&s&&(delete n.excludeUntil,Se.log.warn(`enabling non-HD playlist ${n.id} because all playlists were excluded due to ${t} key IDs`))})}addKeyStatus_(e,t){const s=(typeof e=="string"?e:Hhe(e)).slice(0,32).toLowerCase();this.logger_(`KeyStatus '${t}' with key ID ${s} added to the keyStatusMap`),this.keyStatusMap_.set(s,t)}updatePlaylistByKeyStatus(e,t){this.addKeyStatus_(e,t),this.waitingForFastQualityPlaylistReceived_||this.excludeNonUsableThenChangePlaylist_(),this.mainPlaylistLoader_.off("loadedplaylist",this.excludeNonUsableThenChangePlaylist_.bind(this)),this.mainPlaylistLoader_.on("loadedplaylist",this.excludeNonUsableThenChangePlaylist_.bind(this))}excludeNonUsableThenChangePlaylist_(){this.excludeNonUsablePlaylistsByKeyId_(),this.fastQualityChange_()}}const gfe=(r,e,t)=>n=>{const i=r.main.playlists[e],s=Ek(i),a=iS(i);if(typeof n>"u")return a;n?delete i.disabled:i.disabled=!0;const o={renditionInfo:{id:e,bandwidth:i.attributes.BANDWIDTH,resolution:i.attributes.RESOLUTION,codecs:i.attributes.CODECS},cause:"fast-quality"};return n!==a&&!s&&(t(i),n?r.trigger({type:"renditionenabled",metadata:o}):r.trigger({type:"renditiondisabled",metadata:o})),n};let vfe=class{constructor(e,t,n){const{playlistController_:i}=e,s=i.fastQualityChange_.bind(i);if(t.attributes){const a=t.attributes.RESOLUTION;this.width=a&&a.width,this.height=a&&a.height,this.bandwidth=t.attributes.BANDWIDTH,this.frameRate=t.attributes["FRAME-RATE"]}this.codecs=L0(i.main(),t),this.playlist=t,this.id=n,this.enabled=gfe(e.playlists,t.id,s)}};const yfe=function(r){r.representations=()=>{const e=r.playlistController_.main(),t=Ug(e)?r.playlistController_.getAudioTrackPlaylists_():e.playlists;return t?t.filter(n=>!Ek(n)).map((n,i)=>new vfe(r,n,n.id)):[]}},GM=["seeking","seeked","pause","playing","error"];let _fe=class extends Se.EventTarget{constructor(e){super(),this.playlistController_=e.playlistController,this.tech_=e.tech,this.seekable=e.seekable,this.allowSeeksWithinUnsafeLiveWindow=e.allowSeeksWithinUnsafeLiveWindow,this.liveRangeSafeTimeDelta=e.liveRangeSafeTimeDelta,this.media=e.media,this.playedRanges_=[],this.consecutiveUpdates=0,this.lastRecordedTime=null,this.checkCurrentTimeTimeout_=null,this.logger_=tl("PlaybackWatcher"),this.logger_("initialize");const t=()=>this.monitorCurrentTime_(),n=()=>this.monitorCurrentTime_(),i=()=>this.techWaiting_(),s=()=>this.resetTimeUpdate_(),a=this.playlistController_,o=["main","subtitle","audio"],l={};o.forEach(c=>{l[c]={reset:()=>this.resetSegmentDownloads_(c),updateend:()=>this.checkSegmentDownloads_(c)},a[`${c}SegmentLoader_`].on("appendsdone",l[c].updateend),a[`${c}SegmentLoader_`].on("playlistupdate",l[c].reset),this.tech_.on(["seeked","seeking"],l[c].reset)});const u=c=>{["main","audio"].forEach(h=>{a[`${h}SegmentLoader_`][c]("appended",this.seekingAppendCheck_)})};this.seekingAppendCheck_=()=>{this.fixesBadSeeks_()&&(this.consecutiveUpdates=0,this.lastRecordedTime=this.tech_.currentTime(),u("off"))},this.clearSeekingAppendCheck_=()=>u("off"),this.watchForBadSeeking_=()=>{this.clearSeekingAppendCheck_(),u("on")},this.tech_.on("seeked",this.clearSeekingAppendCheck_),this.tech_.on("seeking",this.watchForBadSeeking_),this.tech_.on("waiting",i),this.tech_.on(GM,s),this.tech_.on("canplay",n),this.tech_.one("play",t),this.dispose=()=>{this.clearSeekingAppendCheck_(),this.logger_("dispose"),this.tech_.off("waiting",i),this.tech_.off(GM,s),this.tech_.off("canplay",n),this.tech_.off("play",t),this.tech_.off("seeking",this.watchForBadSeeking_),this.tech_.off("seeked",this.clearSeekingAppendCheck_),o.forEach(c=>{a[`${c}SegmentLoader_`].off("appendsdone",l[c].updateend),a[`${c}SegmentLoader_`].off("playlistupdate",l[c].reset),this.tech_.off(["seeked","seeking"],l[c].reset)}),this.checkCurrentTimeTimeout_&&X.clearTimeout(this.checkCurrentTimeTimeout_),this.resetTimeUpdate_()}}monitorCurrentTime_(){this.checkCurrentTime_(),this.checkCurrentTimeTimeout_&&X.clearTimeout(this.checkCurrentTimeTimeout_),this.checkCurrentTimeTimeout_=X.setTimeout(this.monitorCurrentTime_.bind(this),250)}resetSegmentDownloads_(e){const t=this.playlistController_[`${e}SegmentLoader_`];this[`${e}StalledDownloads_`]>0&&this.logger_(`resetting possible stalled download count for ${e} loader`),this[`${e}StalledDownloads_`]=0,this[`${e}Buffered_`]=t.buffered_()}checkSegmentDownloads_(e){const t=this.playlistController_,n=t[`${e}SegmentLoader_`],i=n.buffered_(),s=sde(this[`${e}Buffered_`],i);if(this[`${e}Buffered_`]=i,s){const a={bufferedRanges:i};t.trigger({type:"bufferedrangeschanged",metadata:a}),this.resetSegmentDownloads_(e);return}this[`${e}StalledDownloads_`]++,this.logger_(`found #${this[`${e}StalledDownloads_`]} ${e} appends that did not increase buffer (possible stalled download)`,{playlistId:n.playlist_&&n.playlist_.id,buffered:kh(i)}),!(this[`${e}StalledDownloads_`]<10)&&(this.logger_(`${e} loader stalled download exclusion`),this.resetSegmentDownloads_(e),this.tech_.trigger({type:"usage",name:`vhs-${e}-download-exclusion`}),e!=="subtitle"&&t.excludePlaylist({error:{message:`Excessive ${e} segment downloading detected.`},playlistExclusionDuration:1/0}))}checkCurrentTime_(){if(this.tech_.paused()||this.tech_.seeking())return;const e=this.tech_.currentTime(),t=this.tech_.buffered();if(this.lastRecordedTime===e&&(!t.length||e+fu>=t.end(t.length-1)))return this.techWaiting_();if(this.consecutiveUpdates>=5&&e===this.lastRecordedTime)this.consecutiveUpdates++,this.waiting_();else if(e===this.lastRecordedTime)this.consecutiveUpdates++;else{this.playedRanges_.push(ys([this.lastRecordedTime,e]));const n={playedRanges:this.playedRanges_};this.playlistController_.trigger({type:"playedrangeschanged",metadata:n}),this.consecutiveUpdates=0,this.lastRecordedTime=e}}resetTimeUpdate_(){this.consecutiveUpdates=0}fixesBadSeeks_(){if(!this.tech_.seeking())return!1;const t=this.seekable(),n=this.tech_.currentTime(),i=this.afterSeekableWindow_(t,n,this.media(),this.allowSeeksWithinUnsafeLiveWindow);let s;if(i&&(s=t.end(t.length-1)),this.beforeSeekableWindow_(t,n)){const y=t.start(0);s=y+(y===t.end(0)?0:fu)}if(typeof s<"u")return this.logger_(`Trying to seek outside of seekable at time ${n} with seekable range ${q6(t)}. Seeking to ${s}.`),this.tech_.setCurrentTime(s),!0;const a=this.playlistController_.sourceUpdater_,o=this.tech_.buffered(),l=a.audioBuffer?a.audioBuffered():null,u=a.videoBuffer?a.videoBuffered():null,c=this.media(),h=c.partTargetDuration?c.partTargetDuration:(c.targetDuration-hu)*2,m=[l,u];for(let y=0;y<m.length;y++){if(!m[y])continue;if(Ck(m[y],n)<h)return!1}const g=sy(o,n);return g.length===0?!1:(s=g.start(0)+fu,this.logger_(`Buffered region starts (${g.start(0)})  just beyond seek point (${n}). Seeking to ${s}.`),this.tech_.setCurrentTime(s),!0)}waiting_(){if(this.techWaiting_())return;const e=this.tech_.currentTime(),t=this.tech_.buffered(),n=Xf(t,e);if(n.length&&e+3<=n.end(0)){this.resetTimeUpdate_(),this.tech_.setCurrentTime(e),this.logger_(`Stopped at ${e} while inside a buffered region [${n.start(0)} -> ${n.end(0)}]. Attempting to resume playback by seeking to the current time.`),this.tech_.trigger({type:"usage",name:"vhs-unknown-waiting"});return}}techWaiting_(){const e=this.seekable(),t=this.tech_.currentTime();if(this.tech_.seeking())return!0;if(this.beforeSeekableWindow_(e,t)){const o=e.end(e.length-1);return this.logger_(`Fell out of live window at time ${t}. Seeking to live point (seekable end) ${o}`),this.resetTimeUpdate_(),this.tech_.setCurrentTime(o),this.tech_.trigger({type:"usage",name:"vhs-live-resync"}),!0}const n=this.tech_.vhs.playlistController_.sourceUpdater_,i=this.tech_.buffered();if(this.videoUnderflow_({audioBuffered:n.audioBuffered(),videoBuffered:n.videoBuffered(),currentTime:t}))return this.resetTimeUpdate_(),this.tech_.setCurrentTime(t),this.tech_.trigger({type:"usage",name:"vhs-video-underflow"}),!0;const a=sy(i,t);return a.length>0?(this.logger_(`Stopped at ${t} and seeking to ${a.start(0)}`),this.resetTimeUpdate_(),this.skipTheGap_(t),!0):!1}afterSeekableWindow_(e,t,n,i=!1){if(!e.length)return!1;let s=e.end(e.length-1)+fu;const a=!n.endList,o=typeof n.partTargetDuration=="number";return a&&(o||i)&&(s=e.end(e.length-1)+n.targetDuration*3),t>s}beforeSeekableWindow_(e,t){return!!(e.length&&e.start(0)>0&&t<e.start(0)-this.liveRangeSafeTimeDelta)}videoUnderflow_({videoBuffered:e,audioBuffered:t,currentTime:n}){if(!e)return;let i;if(e.length&&t.length){const s=Xf(e,n-3),a=Xf(e,n),o=Xf(t,n);o.length&&!a.length&&s.length&&(i={start:s.end(0),end:o.end(0)})}else sy(e,n).length||(i=this.gapFromVideoUnderflow_(e,n));return i?(this.logger_(`Encountered a gap in video from ${i.start} to ${i.end}. Seeking to current time ${n}`),!0):!1}skipTheGap_(e){const t=this.tech_.buffered(),n=this.tech_.currentTime(),i=sy(t,n);if(this.resetTimeUpdate_(),i.length===0||n!==e)return;this.logger_("skipTheGap_:","currentTime:",n,"scheduled currentTime:",e,"nextRange start:",i.start(0)),this.tech_.setCurrentTime(i.start(0)+hu);const s={gapInfo:{from:n,to:i.start(0)}};this.playlistController_.trigger({type:"gapjumped",metadata:s}),this.tech_.trigger({type:"usage",name:"vhs-gap-skip"})}gapFromVideoUnderflow_(e,t){const n=rde(e);for(let i=0;i<n.length;i++){const s=n.start(i),a=n.end(i);if(t-s<4&&t-s>2)return{start:s,end:a}}return null}};const xfe={errorInterval:30,getSource(r){const t=this.tech({IWillNotUseThisInPlugins:!0}).currentSource_||this.currentSource();return r(t)}},MU=function(r,e){let t=0,n=0;const i=wn(xfe,e);r.ready(()=>{r.trigger({type:"usage",name:"vhs-error-reload-initialized"})});const s=function(){n&&r.currentTime(n)},a=function(c){c!=null&&(n=r.duration()!==1/0&&r.currentTime()||0,r.one("loadedmetadata",s),r.src(c),r.trigger({type:"usage",name:"vhs-error-reload"}),r.play())},o=function(){if(Date.now()-t<i.errorInterval*1e3){r.trigger({type:"usage",name:"vhs-error-reload-canceled"});return}if(!i.getSource||typeof i.getSource!="function"){Se.log.error("ERROR: reloadSourceOnError - The option getSource must be a function!");return}return t=Date.now(),i.getSource.call(r,a)},l=function(){r.off("loadedmetadata",s),r.off("error",o),r.off("dispose",l)},u=function(c){l(),MU(r,c)};r.on("error",o),r.on("dispose",l),r.reloadSourceOnError=u},bfe=function(r){MU(this,r)};var FU="3.15.0",Sfe="7.0.3",Tfe="1.3.1",Cfe="7.2.0",wfe="4.0.2";const ri={PlaylistLoader:Yf,Playlist:Oa,utils:Dde,STANDARD_PLAYLIST_SELECTOR:MM,INITIAL_PLAYLIST_SELECTOR:vhe,lastBandwidthSelector:MM,movingAverageBandwidthSelector:mhe,comparePlaylistBandwidth:Dk,comparePlaylistResolution:phe,xhr:uU()};Object.keys(Yi).forEach(r=>{Object.defineProperty(ri,r,{get(){return Se.log.warn(`using Vhs.${r} is UNSAFE be sure you know what you are doing`),Yi[r]},set(e){if(Se.log.warn(`using Vhs.${r} is UNSAFE be sure you know what you are doing`),typeof e!="number"||e<0){Se.log.warn(`value of Vhs.${r} must be greater than or equal to 0`);return}Yi[r]=e}})});const BU="videojs-vhs",NU=function(r,e){const t=e.media();let n=-1;for(let i=0;i<r.length;i++)if(r[i].id===t.id){n=i;break}r.selectedIndex_=n,r.trigger({selectedIndex:n,type:"change"})},Efe=function(r,e){e.representations().forEach(t=>{r.addQualityLevel(t)}),NU(r,e.playlists)};ri.canPlaySource=function(){return Se.log.warn("VHS is no longer a tech. Please remove it from your player's techOrder.")};const kfe=(r,e,t)=>{if(!r)return r;let n={};e&&e.attributes&&e.attributes.CODECS&&(n=wx(Mi(e.attributes.CODECS))),t&&t.attributes&&t.attributes.CODECS&&(n.audio=t.attributes.CODECS);const i=Eu(n.video),s=Eu(n.audio),a={};for(const o in r)a[o]={},s&&(a[o].audioContentType=s),i&&(a[o].videoContentType=i),e.contentProtection&&e.contentProtection[o]&&e.contentProtection[o].pssh&&(a[o].pssh=e.contentProtection[o].pssh),typeof r[o]=="string"&&(a[o].url=r[o]);return wn(r,a)},Afe=(r,e)=>r.reduce((t,n)=>{if(!n.contentProtection)return t;const i=e.reduce((s,a)=>{const o=n.contentProtection[a];return o&&o.pssh&&(s[a]={pssh:o.pssh}),s},{});return Object.keys(i).length&&t.push(i),t},[]),Dfe=({player:r,sourceKeySystems:e,audioMedia:t,mainPlaylists:n})=>{if(!r.eme.initializeMediaKeys)return Promise.resolve();const i=t?n.concat([t]):n,s=Afe(i,Object.keys(e)),a=[],o=[];return s.forEach(l=>{o.push(new Promise((u,c)=>{r.tech_.one("keysessioncreated",u)})),a.push(new Promise((u,c)=>{r.eme.initializeMediaKeys({keySystems:l},h=>{if(h){c(h);return}u()})}))}),Promise.race([Promise.all(a),Promise.race(o)])},Ife=({player:r,sourceKeySystems:e,media:t,audioMedia:n})=>{const i=kfe(e,t,n);return i?(r.currentSource().keySystems=i,i&&!r.eme?(Se.log.warn("DRM encrypted source cannot be decrypted without a DRM plugin"),!1):!0):!1},UU=()=>{if(!X.localStorage)return null;const r=X.localStorage.getItem(BU);if(!r)return null;try{return JSON.parse(r)}catch{return null}},Pfe=r=>{if(!X.localStorage)return!1;let e=UU();e=e?wn(e,r):r;try{X.localStorage.setItem(BU,JSON.stringify(e))}catch{return!1}return e},Rfe=r=>r.toLowerCase().indexOf("data:application/vnd.videojs.vhs+json,")===0?JSON.parse(r.substring(r.indexOf(",")+1)):r,$U=(r,e)=>{r._requestCallbackSet||(r._requestCallbackSet=new Set),r._requestCallbackSet.add(e)},jU=(r,e)=>{r._responseCallbackSet||(r._responseCallbackSet=new Set),r._responseCallbackSet.add(e)},zU=(r,e)=>{r._requestCallbackSet&&(r._requestCallbackSet.delete(e),r._requestCallbackSet.size||delete r._requestCallbackSet)},HU=(r,e)=>{r._responseCallbackSet&&(r._responseCallbackSet.delete(e),r._responseCallbackSet.size||delete r._responseCallbackSet)};ri.supportsNativeHls=(function(){if(!Fe||!Fe.createElement)return!1;const r=Fe.createElement("video");return Se.getTech("Html5").isSupported()?["application/vnd.apple.mpegurl","audio/mpegurl","audio/x-mpegurl","application/x-mpegurl","video/x-mpegurl","video/mpegurl","application/mpegurl"].some(function(t){return/maybe|probably/i.test(r.canPlayType(t))}):!1})();ri.supportsNativeDash=(function(){return!Fe||!Fe.createElement||!Se.getTech("Html5").isSupported()?!1:/maybe|probably/i.test(Fe.createElement("video").canPlayType("application/dash+xml"))})();ri.supportsTypeNatively=r=>r==="hls"?ri.supportsNativeHls:r==="dash"?ri.supportsNativeDash:!1;ri.isSupported=function(){return Se.log.warn("VHS is no longer a tech. Please remove it from your player's techOrder.")};ri.xhr.onRequest=function(r){$U(ri.xhr,r)};ri.xhr.onResponse=function(r){jU(ri.xhr,r)};ri.xhr.offRequest=function(r){zU(ri.xhr,r)};ri.xhr.offResponse=function(r){HU(ri.xhr,r)};const Lfe=Se.getComponent("Component");let VU=class extends Lfe{constructor(e,t,n){if(super(t,n.vhs),typeof n.initialBandwidth=="number"&&(this.options_.bandwidth=n.initialBandwidth),this.logger_=tl("VhsHandler"),t.options_&&t.options_.playerId){const i=Se.getPlayer(t.options_.playerId);this.player_=i}if(this.tech_=t,this.source_=e,this.stats={},this.ignoreNextSeekingEvent_=!1,this.setOptions_(),this.options_.overrideNative&&t.overrideNativeAudioTracks&&t.overrideNativeVideoTracks)t.overrideNativeAudioTracks(!0),t.overrideNativeVideoTracks(!0);else if(this.options_.overrideNative&&(t.featuresNativeVideoTracks||t.featuresNativeAudioTracks))throw new Error("Overriding native VHS requires emulated tracks. See https://git.io/vMpjB");this.on(Fe,["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","MSFullscreenChange"],i=>{const s=Fe.fullscreenElement||Fe.webkitFullscreenElement||Fe.mozFullScreenElement||Fe.msFullscreenElement;s&&s.contains(this.tech_.el())?this.playlistController_.fastQualityChange_():this.playlistController_.checkABR_()}),this.on(this.tech_,"seeking",function(){if(this.ignoreNextSeekingEvent_){this.ignoreNextSeekingEvent_=!1;return}this.setCurrentTime(this.tech_.currentTime())}),this.on(this.tech_,"error",function(){this.tech_.error()&&this.playlistController_&&this.playlistController_.pauseLoading()}),this.on(this.tech_,"play",this.play)}setOptions_(e={}){if(this.options_=wn(this.options_,e),this.options_.withCredentials=this.options_.withCredentials||!1,this.options_.limitRenditionByPlayerDimensions=this.options_.limitRenditionByPlayerDimensions!==!1,this.options_.useDevicePixelRatio=this.options_.useDevicePixelRatio||!1,this.options_.useBandwidthFromLocalStorage=typeof this.source_.useBandwidthFromLocalStorage<"u"?this.source_.useBandwidthFromLocalStorage:this.options_.useBandwidthFromLocalStorage||!1,this.options_.useForcedSubtitles=this.options_.useForcedSubtitles||!1,this.options_.useNetworkInformationApi=this.options_.useNetworkInformationApi||!1,this.options_.useDtsForTimestampOffset=this.options_.useDtsForTimestampOffset||!1,this.options_.customTagParsers=this.options_.customTagParsers||[],this.options_.customTagMappers=this.options_.customTagMappers||[],this.options_.cacheEncryptionKeys=this.options_.cacheEncryptionKeys||!1,this.options_.llhls=this.options_.llhls!==!1,this.options_.bufferBasedABR=this.options_.bufferBasedABR||!1,typeof this.options_.playlistExclusionDuration!="number"&&(this.options_.playlistExclusionDuration=60),typeof this.options_.bandwidth!="number"&&this.options_.useBandwidthFromLocalStorage){const n=UU();n&&n.bandwidth&&(this.options_.bandwidth=n.bandwidth,this.tech_.trigger({type:"usage",name:"vhs-bandwidth-from-local-storage"})),n&&n.throughput&&(this.options_.throughput=n.throughput,this.tech_.trigger({type:"usage",name:"vhs-throughput-from-local-storage"}))}typeof this.options_.bandwidth!="number"&&(this.options_.bandwidth=Yi.INITIAL_BANDWIDTH),this.options_.enableLowInitialPlaylist=this.options_.enableLowInitialPlaylist&&this.options_.bandwidth===Yi.INITIAL_BANDWIDTH,["withCredentials","useDevicePixelRatio","customPixelRatio","limitRenditionByPlayerDimensions","bandwidth","customTagParsers","customTagMappers","cacheEncryptionKeys","playlistSelector","initialPlaylistSelector","bufferBasedABR","liveRangeSafeTimeDelta","llhls","useForcedSubtitles","useNetworkInformationApi","useDtsForTimestampOffset","exactManifestTimings","leastPixelDiffSelector"].forEach(n=>{typeof this.source_[n]<"u"&&(this.options_[n]=this.source_[n])}),this.limitRenditionByPlayerDimensions=this.options_.limitRenditionByPlayerDimensions,this.useDevicePixelRatio=this.options_.useDevicePixelRatio;const t=this.options_.customPixelRatio;typeof t=="number"&&t>=0&&(this.customPixelRatio=t)}setOptions(e={}){this.setOptions_(e)}src(e,t){if(!e)return;this.setOptions_(),this.options_.src=Rfe(this.source_.src),this.options_.tech=this.tech_,this.options_.externVhs=ri,this.options_.sourceType=Ub(t),this.options_.seekTo=s=>{this.tech_.setCurrentTime(s)},this.options_.player_=this.player_,this.playlistController_=new mfe(this.options_);const n=wn({liveRangeSafeTimeDelta:fu},this.options_,{seekable:()=>this.seekable(),media:()=>this.playlistController_.media(),playlistController:this.playlistController_});this.playbackWatcher_=new _fe(n),this.attachStreamingEventListeners_(),this.playlistController_.on("error",()=>{const s=Se.players[this.tech_.options_.playerId];let a=this.playlistController_.error;typeof a=="object"&&!a.code?a.code=3:typeof a=="string"&&(a={message:a,code:3}),s.error(a)});const i=this.options_.bufferBasedABR?ri.movingAverageBandwidthSelector(.55):ri.STANDARD_PLAYLIST_SELECTOR;this.playlistController_.selectPlaylist=this.selectPlaylist?this.selectPlaylist.bind(this):i.bind(this),this.playlistController_.selectInitialPlaylist=ri.INITIAL_PLAYLIST_SELECTOR.bind(this),this.playlists=this.playlistController_.mainPlaylistLoader_,this.mediaSource=this.playlistController_.mediaSource,Object.defineProperties(this,{selectPlaylist:{get(){return this.playlistController_.selectPlaylist},set(s){this.playlistController_.selectPlaylist=s.bind(this)}},throughput:{get(){return this.playlistController_.mainSegmentLoader_.throughput.rate},set(s){this.playlistController_.mainSegmentLoader_.throughput.rate=s,this.playlistController_.mainSegmentLoader_.throughput.count=1}},bandwidth:{get(){let s=this.playlistController_.mainSegmentLoader_.bandwidth;const a=X.navigator.connection||X.navigator.mozConnection||X.navigator.webkitConnection,o=1e7;if(this.options_.useNetworkInformationApi&&a){const l=a.downlink*1e3*1e3;l>=o&&s>=o?s=Math.max(s,l):s=l}return s},set(s){this.playlistController_.mainSegmentLoader_.bandwidth=s,this.playlistController_.mainSegmentLoader_.throughput={rate:0,count:0}}},systemBandwidth:{get(){const s=1/(this.bandwidth||1);let a;return this.throughput>0?a=1/this.throughput:a=0,Math.floor(1/(s+a))},set(){Se.log.error('The "systemBandwidth" property is read-only')}}}),this.options_.bandwidth&&(this.bandwidth=this.options_.bandwidth),this.options_.throughput&&(this.throughput=this.options_.throughput),Object.defineProperties(this.stats,{bandwidth:{get:()=>this.bandwidth||0,enumerable:!0},mediaRequests:{get:()=>this.playlistController_.mediaRequests_()||0,enumerable:!0},mediaRequestsAborted:{get:()=>this.playlistController_.mediaRequestsAborted_()||0,enumerable:!0},mediaRequestsTimedout:{get:()=>this.playlistController_.mediaRequestsTimedout_()||0,enumerable:!0},mediaRequestsErrored:{get:()=>this.playlistController_.mediaRequestsErrored_()||0,enumerable:!0},mediaTransferDuration:{get:()=>this.playlistController_.mediaTransferDuration_()||0,enumerable:!0},mediaBytesTransferred:{get:()=>this.playlistController_.mediaBytesTransferred_()||0,enumerable:!0},mediaSecondsLoaded:{get:()=>this.playlistController_.mediaSecondsLoaded_()||0,enumerable:!0},mediaAppends:{get:()=>this.playlistController_.mediaAppends_()||0,enumerable:!0},mainAppendsToLoadedData:{get:()=>this.playlistController_.mainAppendsToLoadedData_()||0,enumerable:!0},audioAppendsToLoadedData:{get:()=>this.playlistController_.audioAppendsToLoadedData_()||0,enumerable:!0},appendsToLoadedData:{get:()=>this.playlistController_.appendsToLoadedData_()||0,enumerable:!0},timeToLoadedData:{get:()=>this.playlistController_.timeToLoadedData_()||0,enumerable:!0},buffered:{get:()=>kh(this.tech_.buffered()),enumerable:!0},currentTime:{get:()=>this.tech_.currentTime(),enumerable:!0},currentSource:{get:()=>this.tech_.currentSource_,enumerable:!0},currentTech:{get:()=>this.tech_.name_,enumerable:!0},duration:{get:()=>this.tech_.duration(),enumerable:!0},main:{get:()=>this.playlists.main,enumerable:!0},playerDimensions:{get:()=>this.tech_.currentDimensions(),enumerable:!0},seekable:{get:()=>kh(this.tech_.seekable()),enumerable:!0},timestamp:{get:()=>Date.now(),enumerable:!0},videoPlaybackQuality:{get:()=>this.tech_.getVideoPlaybackQuality(),enumerable:!0}}),this.tech_.one("canplay",this.playlistController_.setupFirstPlay.bind(this.playlistController_)),this.tech_.on("bandwidthupdate",()=>{this.options_.useBandwidthFromLocalStorage&&Pfe({bandwidth:this.bandwidth,throughput:Math.round(this.throughput)})}),this.playlistController_.on("selectedinitialmedia",()=>{yfe(this)}),this.playlistController_.sourceUpdater_.on("createdsourcebuffers",()=>{this.setupEme_()}),this.on(this.playlistController_,"progress",function(){this.tech_.trigger("progress")}),this.on(this.playlistController_,"firstplay",function(){this.ignoreNextSeekingEvent_=!0}),this.setupQualityLevels_(),this.tech_.el()&&(this.mediaSourceUrl_=X.URL.createObjectURL(this.playlistController_.mediaSource),(Se.browser.IS_ANY_SAFARI||Se.browser.IS_IOS)&&this.options_.overrideNative&&this.options_.sourceType==="hls"&&typeof this.tech_.addSourceElement=="function"?(this.tech_.addSourceElement(this.mediaSourceUrl_),this.tech_.addSourceElement(this.source_.src)):this.tech_.src(this.mediaSourceUrl_))}createKeySessions_(){const e=this.playlistController_.mediaTypes_.AUDIO.activePlaylistLoader;this.logger_("waiting for EME key session creation"),Dfe({player:this.player_,sourceKeySystems:this.source_.keySystems,audioMedia:e&&e.media(),mainPlaylists:this.playlists.main.playlists}).then(()=>{this.logger_("created EME key session"),this.playlistController_.sourceUpdater_.initializedEme()}).catch(t=>{this.logger_("error while creating EME key session",t),this.player_.error({message:"Failed to initialize media keys for EME",code:3})})}handleWaitingForKey_(){this.logger_("waitingforkey fired, attempting to create any new key sessions"),this.createKeySessions_()}setupEme_(){const e=this.playlistController_.mediaTypes_.AUDIO.activePlaylistLoader,t=Ife({player:this.player_,sourceKeySystems:this.source_.keySystems,media:this.playlists.media(),audioMedia:e&&e.media()});if(this.player_.tech_.on("keystatuschange",n=>{this.playlistController_.updatePlaylistByKeyStatus(n.keyId,n.status)}),this.handleWaitingForKey_=this.handleWaitingForKey_.bind(this),this.player_.tech_.on("waitingforkey",this.handleWaitingForKey_),!t){this.playlistController_.sourceUpdater_.initializedEme();return}this.createKeySessions_()}setupQualityLevels_(){const e=Se.players[this.tech_.options_.playerId];!e||!e.qualityLevels||this.qualityLevels_||(this.qualityLevels_=e.qualityLevels(),this.playlistController_.on("selectedinitialmedia",()=>{Efe(this.qualityLevels_,this)}),this.playlists.on("mediachange",()=>{NU(this.qualityLevels_,this.playlists)}))}static version(){return{"@videojs/http-streaming":FU,"mux.js":Sfe,"mpd-parser":Tfe,"m3u8-parser":Cfe,"aes-decrypter":wfe}}version(){return this.constructor.version()}canChangeType(){return PU.canChangeType()}play(){this.playlistController_.play()}setCurrentTime(e){this.playlistController_.setCurrentTime(e)}duration(){return this.playlistController_.duration()}seekable(){return this.playlistController_.seekable()}dispose(){this.playbackWatcher_&&this.playbackWatcher_.dispose(),this.playlistController_&&this.playlistController_.dispose(),this.qualityLevels_&&this.qualityLevels_.dispose(),this.tech_&&this.tech_.vhs&&delete this.tech_.vhs,this.mediaSourceUrl_&&X.URL.revokeObjectURL&&(X.URL.revokeObjectURL(this.mediaSourceUrl_),this.mediaSourceUrl_=null),this.tech_&&this.tech_.off("waitingforkey",this.handleWaitingForKey_),super.dispose()}convertToProgramTime(e,t){return Fde({playlist:this.playlistController_.media(),time:e,callback:t})}seekToProgramTime(e,t,n=!0,i=2){return pU({programTime:e,playlist:this.playlistController_.media(),retryCount:i,pauseAfterSeek:n,seekTo:this.options_.seekTo,tech:this.options_.tech,callback:t})}setupXhrHooks_(){this.xhr.onRequest=e=>{$U(this.xhr,e)},this.xhr.onResponse=e=>{jU(this.xhr,e)},this.xhr.offRequest=e=>{zU(this.xhr,e)},this.xhr.offResponse=e=>{HU(this.xhr,e)},this.player_.trigger("xhr-hooks-ready")}attachStreamingEventListeners_(){const e=["seekablerangeschanged","bufferedrangeschanged","contentsteeringloadstart","contentsteeringloadcomplete","contentsteeringparsed"],t=["gapjumped","playedrangeschanged"];e.forEach(n=>{this.playlistController_.on(n,i=>{this.player_.trigger(tr({},i))})}),t.forEach(n=>{this.playbackWatcher_.on(n,i=>{this.player_.trigger(tr({},i))})})}};const Ax={name:"videojs-http-streaming",VERSION:FU,canHandleSource(r,e={}){const t=wn(Se.options,e);return!t.vhs.experimentalUseMMS&&!bu("avc1.4d400d,mp4a.40.2",!1)?!1:Ax.canPlayType(r.type,t)},handleSource(r,e,t={}){const n=wn(Se.options,t);return e.vhs=new VU(r,e,n),e.vhs.xhr=uU(),e.vhs.setupXhrHooks_(),e.vhs.src(r.src,r.type),e.vhs},canPlayType(r,e){const t=Ub(r);if(!t)return"";const n=Ax.getOverrideNative(e);return!ri.supportsTypeNatively(t)||n?"maybe":""},getOverrideNative(r={}){const{vhs:e={}}=r,t=!(Se.browser.IS_ANY_SAFARI||Se.browser.IS_IOS),{overrideNative:n=t}=e;return n}},Ofe=()=>bu("avc1.4d400d,mp4a.40.2",!0);Ofe()&&Se.getTech("Html5").registerSourceHandler(Ax,0);Se.VhsHandler=VU;Se.VhsSourceHandler=Ax;Se.Vhs=ri;Se.use||Se.registerComponent("Vhs",ri);Se.options.vhs=Se.options.vhs||{};(!Se.getPlugin||!Se.getPlugin("reloadSourceOnError"))&&Se.registerPlugin("reloadSourceOnError",bfe);var ly={exports:{}},KM;function Mfe(){return KM||(KM=1,(function(r,e){function t(l){if(l&&typeof l=="object"){var u=l.which||l.keyCode||l.charCode;u&&(l=u)}if(typeof l=="number")return a[l];var c=String(l),h=n[c.toLowerCase()];if(h)return h;var h=i[c.toLowerCase()];if(h)return h;if(c.length===1)return c.charCodeAt(0)}t.isEventKey=function(u,c){if(u&&typeof u=="object"){var h=u.which||u.keyCode||u.charCode;if(h==null)return!1;if(typeof c=="string"){var m=n[c.toLowerCase()];if(m)return m===h;var m=i[c.toLowerCase()];if(m)return m===h}else if(typeof c=="number")return c===h;return!1}},e=r.exports=t;var n=e.code=e.codes={backspace:8,tab:9,enter:13,shift:16,ctrl:17,alt:18,"pause/break":19,"caps lock":20,esc:27,space:32,"page up":33,"page down":34,end:35,home:36,left:37,up:38,right:39,down:40,insert:45,delete:46,command:91,"left command":91,"right command":93,"numpad *":106,"numpad +":107,"numpad -":109,"numpad .":110,"numpad /":111,"num lock":144,"scroll lock":145,"my computer":182,"my calculator":183,";":186,"=":187,",":188,"-":189,".":190,"/":191,"`":192,"[":219,"\\":220,"]":221,"'":222},i=e.aliases={windows:91,"":16,"":18,"":17,"":91,ctl:17,control:17,option:18,pause:19,break:19,caps:20,return:13,escape:27,spc:32,spacebar:32,pgup:33,pgdn:34,ins:45,del:46,cmd:91};/*!
 * Programatically add the following
 */for(s=97;s<123;s++)n[String.fromCharCode(s)]=s-32;for(var s=48;s<58;s++)n[s-48]=s;for(s=1;s<13;s++)n["f"+s]=s+111;for(s=0;s<10;s++)n["numpad "+s]=s+96;var a=e.names=e.title={};for(s in n)a[n[s]]=s;for(var o in i)n[o]=i[o]})(ly,ly.exports)),ly.exports}var Ffe=Mfe();const Or=ua(Ffe);var rC,XM;function Bfe(){if(XM)return rC;XM=1,rC=r;function r(e,t){var n,i=null;try{n=JSON.parse(e,t)}catch(s){i=s}return[i,n]}return rC}var Nfe=Bfe();const Ufe=ua(Nfe);var uy={exports:{}},nC,YM;function $fe(){if(YM)return nC;YM=1;var r=Xp(),e=function(i,s){return s===void 0&&(s=!1),function(a,o,l){if(a){i(a);return}if(o.statusCode>=400&&o.statusCode<=599){var u=l;if(s)if(r.TextDecoder){var c=t(o.headers&&o.headers["content-type"]);try{u=new TextDecoder(c).decode(l)}catch{}}else u=String.fromCharCode.apply(null,new Uint8Array(l));i({cause:u});return}i(null,l)}};function t(n){return n===void 0&&(n=""),n.toLowerCase().split(";").reduce(function(i,s){var a=s.split("="),o=a[0],l=a[1];return o.trim()==="charset"?l.trim():i},"utf-8")}return nC=e,nC}var QM;function jfe(){if(QM)return uy.exports;QM=1;var r=Xp(),e=nN(),t=iN();o.httpHandler=$fe();/**
 * @license
 * slighly modified parse-headers 2.0.2 <https://github.com/kesla/parse-headers/>
 * Copyright (c) 2014 David Bjrklund
 * Available under the MIT license
 * <https://github.com/kesla/parse-headers/blob/master/LICENCE>
 */var n=function(m){var g={};return m&&m.trim().split(`
`).forEach(function(y){var v=y.indexOf(":"),x=y.slice(0,v).trim().toLowerCase(),w=y.slice(v+1).trim();typeof g[x]>"u"?g[x]=w:Array.isArray(g[x])?g[x].push(w):g[x]=[g[x],w]}),g};uy.exports=o,uy.exports.default=o,o.XMLHttpRequest=r.XMLHttpRequest||c,o.XDomainRequest="withCredentials"in new o.XMLHttpRequest?o.XMLHttpRequest:r.XDomainRequest,i(["get","put","post","patch","head","delete"],function(h){o[h==="delete"?"del":h]=function(m,g,y){return g=a(m,g,y),g.method=h.toUpperCase(),l(g)}});function i(h,m){for(var g=0;g<h.length;g++)m(h[g])}function s(h){for(var m in h)if(h.hasOwnProperty(m))return!1;return!0}function a(h,m,g){var y=h;return t(m)?(g=m,typeof h=="string"&&(y={uri:h})):y=e({},m,{uri:h}),y.callback=g,y}function o(h,m,g){return m=a(h,m,g),l(m)}function l(h){if(typeof h.callback>"u")throw new Error("callback argument missing");var m=!1,g=function(Q,ie,le){m||(m=!0,h.callback(Q,ie,le))};function y(){E.readyState===4&&setTimeout(w,0)}function v(){var V=void 0;if(E.response?V=E.response:V=E.responseText||u(E),k)try{V=JSON.parse(V)}catch{}return V}function x(V){return clearTimeout(H),V instanceof Error||(V=new Error(""+(V||"Unknown XMLHttpRequest Error"))),V.statusCode=0,g(V,q)}function w(){if(!I){var V;clearTimeout(H),h.useXDR&&E.status===void 0?V=200:V=E.status===1223?204:E.status;var Q=q,ie=null;return V!==0?(Q={body:v(),statusCode:V,method:L,headers:{},url:A,rawRequest:E},E.getAllResponseHeaders&&(Q.headers=n(E.getAllResponseHeaders()))):ie=new Error("Internal XMLHttpRequest Error"),g(ie,Q,Q.body)}}var E=h.xhr||null;E||(h.cors||h.useXDR?E=new o.XDomainRequest:E=new o.XMLHttpRequest);var D,I,A=E.url=h.uri||h.url,L=E.method=h.method||"GET",N=h.body||h.data,U=E.headers=h.headers||{},B=!!h.sync,k=!1,H,q={body:void 0,headers:{},statusCode:0,method:L,url:A,rawRequest:E};if("json"in h&&h.json!==!1&&(k=!0,U.accept||U.Accept||(U.Accept="application/json"),L!=="GET"&&L!=="HEAD"&&(U["content-type"]||U["Content-Type"]||(U["Content-Type"]="application/json"),N=JSON.stringify(h.json===!0?N:h.json))),E.onreadystatechange=y,E.onload=w,E.onerror=x,E.onprogress=function(){},E.onabort=function(){I=!0},E.ontimeout=x,E.open(L,A,!B,h.username,h.password),B||(E.withCredentials=!!h.withCredentials),!B&&h.timeout>0&&(H=setTimeout(function(){if(!I){I=!0,E.abort("timeout");var V=new Error("XMLHttpRequest timeout");V.code="ETIMEDOUT",x(V)}},h.timeout)),E.setRequestHeader)for(D in U)U.hasOwnProperty(D)&&E.setRequestHeader(D,U[D]);else if(h.headers&&!s(h.headers))throw new Error("Headers cannot be set on an XDomainRequest object");return"responseType"in h&&(E.responseType=h.responseType),"beforeSend"in h&&typeof h.beforeSend=="function"&&h.beforeSend(E),E.send(N||null),E}function u(h){try{if(h.responseType==="document")return h.responseXML;var m=h.responseXML&&h.responseXML.documentElement.nodeName==="parsererror";if(h.responseType===""&&!m)return h.responseXML}catch{}return null}function c(){}return uy.exports}var zfe=jfe();const WU=ua(zfe);function qU(){try{var r=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(qU=function(){return!!r})()}function GU(r,e,t){if(qU())return Reflect.construct.apply(null,arguments);var n=[null];n.push.apply(n,e);var i=new(r.bind.apply(r,n));return t&&Sp(i,t.prototype),i}function $a(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(e&&e.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),Object.defineProperty(r,"prototype",{writable:!1}),e&&Sp(r,e)}var iC={exports:{}},JM;function Hfe(){return JM||(JM=1,(function(r,e){(function(t){var n=/^(?=((?:[a-zA-Z0-9+\-.]+:)?))\1(?=((?:\/\/[^\/?#]*)?))\2(?=((?:(?:[^?#\/]*\/)*[^;?#\/]*)?))\3((?:;[^?#]*)?)(\?[^#]*)?(#[^]*)?$/,i=/^(?=([^\/?#]*))\1([^]*)$/,s=/(?:\/|^)\.(?=\/)/g,a=/(?:\/|^)\.\.\/(?!\.\.\/)[^\/]*(?=\/)/g,o={buildAbsoluteURL:function(l,u,c){if(c=c||{},l=l.trim(),u=u.trim(),!u){if(!c.alwaysNormalize)return l;var h=o.parseURL(l);if(!h)throw new Error("Error trying to parse base URL.");return h.path=o.normalizePath(h.path),o.buildURLFromParts(h)}var m=o.parseURL(u);if(!m)throw new Error("Error trying to parse relative URL.");if(m.scheme)return c.alwaysNormalize?(m.path=o.normalizePath(m.path),o.buildURLFromParts(m)):u;var g=o.parseURL(l);if(!g)throw new Error("Error trying to parse base URL.");if(!g.netLoc&&g.path&&g.path[0]!=="/"){var y=i.exec(g.path);g.netLoc=y[1],g.path=y[2]}g.netLoc&&!g.path&&(g.path="/");var v={scheme:g.scheme,netLoc:m.netLoc,path:null,params:m.params,query:m.query,fragment:m.fragment};if(!m.netLoc&&(v.netLoc=g.netLoc,m.path[0]!=="/"))if(!m.path)v.path=g.path,m.params||(v.params=g.params,m.query||(v.query=g.query));else{var x=g.path,w=x.substring(0,x.lastIndexOf("/")+1)+m.path;v.path=o.normalizePath(w)}return v.path===null&&(v.path=c.alwaysNormalize?o.normalizePath(m.path):m.path),o.buildURLFromParts(v)},parseURL:function(l){var u=n.exec(l);return u?{scheme:u[1]||"",netLoc:u[2]||"",path:u[3]||"",params:u[4]||"",query:u[5]||"",fragment:u[6]||""}:null},normalizePath:function(l){for(l=l.split("").reverse().join("").replace(s,"");l.length!==(l=l.replace(a,"")).length;);return l.split("").reverse().join("")},buildURLFromParts:function(l){return l.scheme+l.netLoc+l.path+l.params+l.query+l.fragment}};r.exports=o})()})(iC)),iC.exports}var Vfe=Hfe();const ZM=ua(Vfe);var e4="http://example.com",sS=function(e,t){if(/^[a-z]+:/i.test(t))return t;/^data:/.test(e)&&(e=X.location&&X.location.href||"");var n=typeof X.URL=="function",i=/^\/\//.test(e),s=!X.location&&!/\/\//i.test(e);if(n?e=new X.URL(e,X.location||e4):/\/\//i.test(e)||(e=ZM.buildAbsoluteURL(X.location&&X.location.href||"",e)),n){var a=new URL(t,e);return s?a.href.slice(e4.length):i?a.href.slice(a.protocol.length):a.href}return ZM.buildAbsoluteURL(e,t)},Ik=(function(){function r(){this.listeners={}}var e=r.prototype;return e.on=function(n,i){this.listeners[n]||(this.listeners[n]=[]),this.listeners[n].push(i)},e.off=function(n,i){if(!this.listeners[n])return!1;var s=this.listeners[n].indexOf(i);return this.listeners[n]=this.listeners[n].slice(0),this.listeners[n].splice(s,1),s>-1},e.trigger=function(n){var i=this.listeners[n];if(i)if(arguments.length===2)for(var s=i.length,a=0;a<s;++a)i[a].call(this,arguments[1]);else for(var o=Array.prototype.slice.call(arguments,1),l=i.length,u=0;u<l;++u)i[u].apply(this,o)},e.dispose=function(){this.listeners={}},e.pipe=function(n){this.on("data",function(i){n.push(i)})},r})(),Wfe=function(e){return X.atob?X.atob(e):Buffer.from(e,"base64").toString("binary")};function KU(r){for(var e=Wfe(r),t=new Uint8Array(e.length),n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}/*! @name m3u8-parser @version 4.8.0 @license Apache-2.0 */var qfe=(function(r){$t(e,r);function e(){var n;return n=r.call(this)||this,n.buffer="",n}var t=e.prototype;return t.push=function(i){var s;for(this.buffer+=i,s=this.buffer.indexOf(`
`);s>-1;s=this.buffer.indexOf(`
`))this.trigger("data",this.buffer.substring(0,s)),this.buffer=this.buffer.substring(s+1)},e})(Ik),Gfe="	",sC=function(e){var t=/([0-9.]*)?@?([0-9.]*)?/.exec(e||""),n={};return t[1]&&(n.length=parseInt(t[1],10)),t[2]&&(n.offset=parseInt(t[2],10)),n},Kfe=function(){var e="[^=]*",t='"[^"]*"|[^,]*',n="(?:"+e+")=(?:"+t+")";return new RegExp("(?:^|,)("+n+")")},vl=function(e){for(var t=e.split(Kfe()),n={},i=t.length,s;i--;)t[i]!==""&&(s=/([^=]*)=(.*)/.exec(t[i]).slice(1),s[0]=s[0].replace(/^\s+|\s+$/g,""),s[1]=s[1].replace(/^\s+|\s+$/g,""),s[1]=s[1].replace(/^['"](.*)['"]$/g,"$1"),n[s[0]]=s[1]);return n},Xfe=(function(r){$t(e,r);function e(){var n;return n=r.call(this)||this,n.customParsers=[],n.tagMappers=[],n}var t=e.prototype;return t.push=function(i){var s=this,a,o;if(i=i.trim(),i.length!==0){if(i[0]!=="#"){this.trigger("data",{type:"uri",uri:i});return}var l=this.tagMappers.reduce(function(u,c){var h=c(i);return h===i?u:u.concat([h])},[i]);l.forEach(function(u){for(var c=0;c<s.customParsers.length;c++)if(s.customParsers[c].call(s,u))return;if(u.indexOf("#EXT")!==0){s.trigger("data",{type:"comment",text:u.slice(1)});return}if(u=u.replace("\r",""),a=/^#EXTM3U/.exec(u),a){s.trigger("data",{type:"tag",tagType:"m3u"});return}if(a=/^#EXTINF:?([0-9\.]*)?,?(.*)?$/.exec(u),a){o={type:"tag",tagType:"inf"},a[1]&&(o.duration=parseFloat(a[1])),a[2]&&(o.title=a[2]),s.trigger("data",o);return}if(a=/^#EXT-X-TARGETDURATION:?([0-9.]*)?/.exec(u),a){o={type:"tag",tagType:"targetduration"},a[1]&&(o.duration=parseInt(a[1],10)),s.trigger("data",o);return}if(a=/^#EXT-X-VERSION:?([0-9.]*)?/.exec(u),a){o={type:"tag",tagType:"version"},a[1]&&(o.version=parseInt(a[1],10)),s.trigger("data",o);return}if(a=/^#EXT-X-MEDIA-SEQUENCE:?(\-?[0-9.]*)?/.exec(u),a){o={type:"tag",tagType:"media-sequence"},a[1]&&(o.number=parseInt(a[1],10)),s.trigger("data",o);return}if(a=/^#EXT-X-DISCONTINUITY-SEQUENCE:?(\-?[0-9.]*)?/.exec(u),a){o={type:"tag",tagType:"discontinuity-sequence"},a[1]&&(o.number=parseInt(a[1],10)),s.trigger("data",o);return}if(a=/^#EXT-X-PLAYLIST-TYPE:?(.*)?$/.exec(u),a){o={type:"tag",tagType:"playlist-type"},a[1]&&(o.playlistType=a[1]),s.trigger("data",o);return}if(a=/^#EXT-X-BYTERANGE:?(.*)?$/.exec(u),a){o=tr(sC(a[1]),{type:"tag",tagType:"byterange"}),s.trigger("data",o);return}if(a=/^#EXT-X-ALLOW-CACHE:?(YES|NO)?/.exec(u),a){o={type:"tag",tagType:"allow-cache"},a[1]&&(o.allowed=!/NO/.test(a[1])),s.trigger("data",o);return}if(a=/^#EXT-X-MAP:?(.*)$/.exec(u),a){if(o={type:"tag",tagType:"map"},a[1]){var h=vl(a[1]);h.URI&&(o.uri=h.URI),h.BYTERANGE&&(o.byterange=sC(h.BYTERANGE))}s.trigger("data",o);return}if(a=/^#EXT-X-STREAM-INF:?(.*)$/.exec(u),a){if(o={type:"tag",tagType:"stream-inf"},a[1]){if(o.attributes=vl(a[1]),o.attributes.RESOLUTION){var m=o.attributes.RESOLUTION.split("x"),g={};m[0]&&(g.width=parseInt(m[0],10)),m[1]&&(g.height=parseInt(m[1],10)),o.attributes.RESOLUTION=g}o.attributes.BANDWIDTH&&(o.attributes.BANDWIDTH=parseInt(o.attributes.BANDWIDTH,10)),o.attributes["FRAME-RATE"]&&(o.attributes["FRAME-RATE"]=parseFloat(o.attributes["FRAME-RATE"])),o.attributes["PROGRAM-ID"]&&(o.attributes["PROGRAM-ID"]=parseInt(o.attributes["PROGRAM-ID"],10))}s.trigger("data",o);return}if(a=/^#EXT-X-MEDIA:?(.*)$/.exec(u),a){o={type:"tag",tagType:"media"},a[1]&&(o.attributes=vl(a[1])),s.trigger("data",o);return}if(a=/^#EXT-X-ENDLIST/.exec(u),a){s.trigger("data",{type:"tag",tagType:"endlist"});return}if(a=/^#EXT-X-DISCONTINUITY/.exec(u),a){s.trigger("data",{type:"tag",tagType:"discontinuity"});return}if(a=/^#EXT-X-PROGRAM-DATE-TIME:?(.*)$/.exec(u),a){o={type:"tag",tagType:"program-date-time"},a[1]&&(o.dateTimeString=a[1],o.dateTimeObject=new Date(a[1])),s.trigger("data",o);return}if(a=/^#EXT-X-KEY:?(.*)$/.exec(u),a){o={type:"tag",tagType:"key"},a[1]&&(o.attributes=vl(a[1]),o.attributes.IV&&(o.attributes.IV.substring(0,2).toLowerCase()==="0x"&&(o.attributes.IV=o.attributes.IV.substring(2)),o.attributes.IV=o.attributes.IV.match(/.{8}/g),o.attributes.IV[0]=parseInt(o.attributes.IV[0],16),o.attributes.IV[1]=parseInt(o.attributes.IV[1],16),o.attributes.IV[2]=parseInt(o.attributes.IV[2],16),o.attributes.IV[3]=parseInt(o.attributes.IV[3],16),o.attributes.IV=new Uint32Array(o.attributes.IV))),s.trigger("data",o);return}if(a=/^#EXT-X-START:?(.*)$/.exec(u),a){o={type:"tag",tagType:"start"},a[1]&&(o.attributes=vl(a[1]),o.attributes["TIME-OFFSET"]=parseFloat(o.attributes["TIME-OFFSET"]),o.attributes.PRECISE=/YES/.test(o.attributes.PRECISE)),s.trigger("data",o);return}if(a=/^#EXT-X-CUE-OUT-CONT:?(.*)?$/.exec(u),a){o={type:"tag",tagType:"cue-out-cont"},a[1]?o.data=a[1]:o.data="",s.trigger("data",o);return}if(a=/^#EXT-X-CUE-OUT:?(.*)?$/.exec(u),a){o={type:"tag",tagType:"cue-out"},a[1]?o.data=a[1]:o.data="",s.trigger("data",o);return}if(a=/^#EXT-X-CUE-IN:?(.*)?$/.exec(u),a){o={type:"tag",tagType:"cue-in"},a[1]?o.data=a[1]:o.data="",s.trigger("data",o);return}if(a=/^#EXT-X-SKIP:(.*)$/.exec(u),a&&a[1]){o={type:"tag",tagType:"skip"},o.attributes=vl(a[1]),o.attributes.hasOwnProperty("SKIPPED-SEGMENTS")&&(o.attributes["SKIPPED-SEGMENTS"]=parseInt(o.attributes["SKIPPED-SEGMENTS"],10)),o.attributes.hasOwnProperty("RECENTLY-REMOVED-DATERANGES")&&(o.attributes["RECENTLY-REMOVED-DATERANGES"]=o.attributes["RECENTLY-REMOVED-DATERANGES"].split(Gfe)),s.trigger("data",o);return}if(a=/^#EXT-X-PART:(.*)$/.exec(u),a&&a[1]){o={type:"tag",tagType:"part"},o.attributes=vl(a[1]),["DURATION"].forEach(function(y){o.attributes.hasOwnProperty(y)&&(o.attributes[y]=parseFloat(o.attributes[y]))}),["INDEPENDENT","GAP"].forEach(function(y){o.attributes.hasOwnProperty(y)&&(o.attributes[y]=/YES/.test(o.attributes[y]))}),o.attributes.hasOwnProperty("BYTERANGE")&&(o.attributes.byterange=sC(o.attributes.BYTERANGE)),s.trigger("data",o);return}if(a=/^#EXT-X-SERVER-CONTROL:(.*)$/.exec(u),a&&a[1]){o={type:"tag",tagType:"server-control"},o.attributes=vl(a[1]),["CAN-SKIP-UNTIL","PART-HOLD-BACK","HOLD-BACK"].forEach(function(y){o.attributes.hasOwnProperty(y)&&(o.attributes[y]=parseFloat(o.attributes[y]))}),["CAN-SKIP-DATERANGES","CAN-BLOCK-RELOAD"].forEach(function(y){o.attributes.hasOwnProperty(y)&&(o.attributes[y]=/YES/.test(o.attributes[y]))}),s.trigger("data",o);return}if(a=/^#EXT-X-PART-INF:(.*)$/.exec(u),a&&a[1]){o={type:"tag",tagType:"part-inf"},o.attributes=vl(a[1]),["PART-TARGET"].forEach(function(y){o.attributes.hasOwnProperty(y)&&(o.attributes[y]=parseFloat(o.attributes[y]))}),s.trigger("data",o);return}if(a=/^#EXT-X-PRELOAD-HINT:(.*)$/.exec(u),a&&a[1]){o={type:"tag",tagType:"preload-hint"},o.attributes=vl(a[1]),["BYTERANGE-START","BYTERANGE-LENGTH"].forEach(function(y){if(o.attributes.hasOwnProperty(y)){o.attributes[y]=parseInt(o.attributes[y],10);var v=y==="BYTERANGE-LENGTH"?"length":"offset";o.attributes.byterange=o.attributes.byterange||{},o.attributes.byterange[v]=o.attributes[y],delete o.attributes[y]}}),s.trigger("data",o);return}if(a=/^#EXT-X-RENDITION-REPORT:(.*)$/.exec(u),a&&a[1]){o={type:"tag",tagType:"rendition-report"},o.attributes=vl(a[1]),["LAST-MSN","LAST-PART"].forEach(function(y){o.attributes.hasOwnProperty(y)&&(o.attributes[y]=parseInt(o.attributes[y],10))}),s.trigger("data",o);return}s.trigger("data",{type:"tag",data:u.slice(4)})})}},t.addParser=function(i){var s=this,a=i.expression,o=i.customType,l=i.dataParser,u=i.segment;typeof l!="function"&&(l=function(h){return h}),this.customParsers.push(function(c){var h=a.exec(c);if(h)return s.trigger("data",{type:"custom",data:l(c),customType:o,segment:u}),!0})},t.addTagMapper=function(i){var s=i.expression,a=i.map,o=function(u){return s.test(u)?a(u):u};this.tagMappers.push(o)},e})(Ik),Yfe=function(e){return e.toLowerCase().replace(/-(\w)/g,function(t){return t[1].toUpperCase()})},Rf=function(e){var t={};return Object.keys(e).forEach(function(n){t[Yfe(n)]=e[n]}),t},aC=function(e){var t=e.serverControl,n=e.targetDuration,i=e.partTargetDuration;if(t){var s="#EXT-X-SERVER-CONTROL",a="holdBack",o="partHoldBack",l=n&&n*3,u=i&&i*2;n&&!t.hasOwnProperty(a)&&(t[a]=l,this.trigger("info",{message:s+" defaulting HOLD-BACK to targetDuration * 3 ("+l+")."})),l&&t[a]<l&&(this.trigger("warn",{message:s+" clamping HOLD-BACK ("+t[a]+") to targetDuration * 3 ("+l+")"}),t[a]=l),i&&!t.hasOwnProperty(o)&&(t[o]=i*3,this.trigger("info",{message:s+" defaulting PART-HOLD-BACK to partTargetDuration * 3 ("+t[o]+")."})),i&&t[o]<u&&(this.trigger("warn",{message:s+" clamping PART-HOLD-BACK ("+t[o]+") to partTargetDuration * 2 ("+u+")."}),t[o]=u)}},Qfe=(function(r){$t(e,r);function e(){var n;n=r.call(this)||this,n.lineStream=new qfe,n.parseStream=new Xfe,n.lineStream.pipe(n.parseStream);var i=He(n),s=[],a={},o,l,u=!1,c=function(){},h={AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},m="urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed",g=0;n.manifest={allowCache:!0,discontinuityStarts:[],segments:[]};var y=0,v=0;return n.on("end",function(){a.uri||!a.parts&&!a.preloadHints||(!a.map&&o&&(a.map=o),!a.key&&l&&(a.key=l),!a.timeline&&typeof g=="number"&&(a.timeline=g),n.manifest.preloadSegment=a)}),n.parseStream.on("data",function(x){var w,E;({tag:function(){({version:function(){x.version&&(this.manifest.version=x.version)},"allow-cache":function(){this.manifest.allowCache=x.allowed,"allowed"in x||(this.trigger("info",{message:"defaulting allowCache to YES"}),this.manifest.allowCache=!0)},byterange:function(){var A={};"length"in x&&(a.byterange=A,A.length=x.length,"offset"in x||(x.offset=y)),"offset"in x&&(a.byterange=A,A.offset=x.offset),y=A.offset+A.length},endlist:function(){this.manifest.endList=!0},inf:function(){"mediaSequence"in this.manifest||(this.manifest.mediaSequence=0,this.trigger("info",{message:"defaulting media sequence to zero"})),"discontinuitySequence"in this.manifest||(this.manifest.discontinuitySequence=0,this.trigger("info",{message:"defaulting discontinuity sequence to zero"})),x.duration>0&&(a.duration=x.duration),x.duration===0&&(a.duration=.01,this.trigger("info",{message:"updating zero segment duration to a small value"})),this.manifest.segments=s},key:function(){if(!x.attributes){this.trigger("warn",{message:"ignoring key declaration without attribute list"});return}if(x.attributes.METHOD==="NONE"){l=null;return}if(!x.attributes.URI){this.trigger("warn",{message:"ignoring key declaration without URI"});return}if(x.attributes.KEYFORMAT==="com.apple.streamingkeydelivery"){this.manifest.contentProtection=this.manifest.contentProtection||{},this.manifest.contentProtection["com.apple.fps.1_0"]={attributes:x.attributes};return}if(x.attributes.KEYFORMAT==="com.microsoft.playready"){this.manifest.contentProtection=this.manifest.contentProtection||{},this.manifest.contentProtection["com.microsoft.playready"]={uri:x.attributes.URI};return}if(x.attributes.KEYFORMAT===m){var A=["SAMPLE-AES","SAMPLE-AES-CTR","SAMPLE-AES-CENC"];if(A.indexOf(x.attributes.METHOD)===-1){this.trigger("warn",{message:"invalid key method provided for Widevine"});return}if(x.attributes.METHOD==="SAMPLE-AES-CENC"&&this.trigger("warn",{message:"SAMPLE-AES-CENC is deprecated, please use SAMPLE-AES-CTR instead"}),x.attributes.URI.substring(0,23)!=="data:text/plain;base64,"){this.trigger("warn",{message:"invalid key URI provided for Widevine"});return}if(!(x.attributes.KEYID&&x.attributes.KEYID.substring(0,2)==="0x")){this.trigger("warn",{message:"invalid key ID provided for Widevine"});return}this.manifest.contentProtection=this.manifest.contentProtection||{},this.manifest.contentProtection["com.widevine.alpha"]={attributes:{schemeIdUri:x.attributes.KEYFORMAT,keyId:x.attributes.KEYID.substring(2)},pssh:KU(x.attributes.URI.split(",")[1])};return}x.attributes.METHOD||this.trigger("warn",{message:"defaulting key method to AES-128"}),l={method:x.attributes.METHOD||"AES-128",uri:x.attributes.URI},typeof x.attributes.IV<"u"&&(l.iv=x.attributes.IV)},"media-sequence":function(){if(!isFinite(x.number)){this.trigger("warn",{message:"ignoring invalid media sequence: "+x.number});return}this.manifest.mediaSequence=x.number},"discontinuity-sequence":function(){if(!isFinite(x.number)){this.trigger("warn",{message:"ignoring invalid discontinuity sequence: "+x.number});return}this.manifest.discontinuitySequence=x.number,g=x.number},"playlist-type":function(){if(!/VOD|EVENT/.test(x.playlistType)){this.trigger("warn",{message:"ignoring unknown playlist type: "+x.playlist});return}this.manifest.playlistType=x.playlistType},map:function(){o={},x.uri&&(o.uri=x.uri),x.byterange&&(o.byterange=x.byterange),l&&(o.key=l)},"stream-inf":function(){if(this.manifest.playlists=s,this.manifest.mediaGroups=this.manifest.mediaGroups||h,!x.attributes){this.trigger("warn",{message:"ignoring empty stream-inf attributes"});return}a.attributes||(a.attributes={}),tr(a.attributes,x.attributes)},media:function(){if(this.manifest.mediaGroups=this.manifest.mediaGroups||h,!(x.attributes&&x.attributes.TYPE&&x.attributes["GROUP-ID"]&&x.attributes.NAME)){this.trigger("warn",{message:"ignoring incomplete or missing media group"});return}var A=this.manifest.mediaGroups[x.attributes.TYPE];A[x.attributes["GROUP-ID"]]=A[x.attributes["GROUP-ID"]]||{},w=A[x.attributes["GROUP-ID"]],E={default:/yes/i.test(x.attributes.DEFAULT)},E.default?E.autoselect=!0:E.autoselect=/yes/i.test(x.attributes.AUTOSELECT),x.attributes.LANGUAGE&&(E.language=x.attributes.LANGUAGE),x.attributes.URI&&(E.uri=x.attributes.URI),x.attributes["INSTREAM-ID"]&&(E.instreamId=x.attributes["INSTREAM-ID"]),x.attributes.CHARACTERISTICS&&(E.characteristics=x.attributes.CHARACTERISTICS),x.attributes.FORCED&&(E.forced=/yes/i.test(x.attributes.FORCED)),w[x.attributes.NAME]=E},discontinuity:function(){g+=1,a.discontinuity=!0,this.manifest.discontinuityStarts.push(s.length)},"program-date-time":function(){typeof this.manifest.dateTimeString>"u"&&(this.manifest.dateTimeString=x.dateTimeString,this.manifest.dateTimeObject=x.dateTimeObject),a.dateTimeString=x.dateTimeString,a.dateTimeObject=x.dateTimeObject},targetduration:function(){if(!isFinite(x.duration)||x.duration<0){this.trigger("warn",{message:"ignoring invalid target duration: "+x.duration});return}this.manifest.targetDuration=x.duration,aC.call(this,this.manifest)},start:function(){if(!x.attributes||isNaN(x.attributes["TIME-OFFSET"])){this.trigger("warn",{message:"ignoring start declaration without appropriate attribute list"});return}this.manifest.start={timeOffset:x.attributes["TIME-OFFSET"],precise:x.attributes.PRECISE}},"cue-out":function(){a.cueOut=x.data},"cue-out-cont":function(){a.cueOutCont=x.data},"cue-in":function(){a.cueIn=x.data},skip:function(){this.manifest.skip=Rf(x.attributes),this.warnOnMissingAttributes_("#EXT-X-SKIP",x.attributes,["SKIPPED-SEGMENTS"])},part:function(){var A=this;u=!0;var L=this.manifest.segments.length,N=Rf(x.attributes);a.parts=a.parts||[],a.parts.push(N),N.byterange&&(N.byterange.hasOwnProperty("offset")||(N.byterange.offset=v),v=N.byterange.offset+N.byterange.length);var U=a.parts.length-1;this.warnOnMissingAttributes_("#EXT-X-PART #"+U+" for segment #"+L,x.attributes,["URI","DURATION"]),this.manifest.renditionReports&&this.manifest.renditionReports.forEach(function(B,k){B.hasOwnProperty("lastPart")||A.trigger("warn",{message:"#EXT-X-RENDITION-REPORT #"+k+" lacks required attribute(s): LAST-PART"})})},"server-control":function(){var A=this.manifest.serverControl=Rf(x.attributes);A.hasOwnProperty("canBlockReload")||(A.canBlockReload=!1,this.trigger("info",{message:"#EXT-X-SERVER-CONTROL defaulting CAN-BLOCK-RELOAD to false"})),aC.call(this,this.manifest),A.canSkipDateranges&&!A.hasOwnProperty("canSkipUntil")&&this.trigger("warn",{message:"#EXT-X-SERVER-CONTROL lacks required attribute CAN-SKIP-UNTIL which is required when CAN-SKIP-DATERANGES is set"})},"preload-hint":function(){var A=this.manifest.segments.length,L=Rf(x.attributes),N=L.type&&L.type==="PART";a.preloadHints=a.preloadHints||[],a.preloadHints.push(L),L.byterange&&(L.byterange.hasOwnProperty("offset")||(L.byterange.offset=N?v:0,N&&(v=L.byterange.offset+L.byterange.length)));var U=a.preloadHints.length-1;if(this.warnOnMissingAttributes_("#EXT-X-PRELOAD-HINT #"+U+" for segment #"+A,x.attributes,["TYPE","URI"]),!!L.type)for(var B=0;B<a.preloadHints.length-1;B++){var k=a.preloadHints[B];k.type&&k.type===L.type&&this.trigger("warn",{message:"#EXT-X-PRELOAD-HINT #"+U+" for segment #"+A+" has the same TYPE "+L.type+" as preload hint #"+B})}},"rendition-report":function(){var A=Rf(x.attributes);this.manifest.renditionReports=this.manifest.renditionReports||[],this.manifest.renditionReports.push(A);var L=this.manifest.renditionReports.length-1,N=["LAST-MSN","URI"];u&&N.push("LAST-PART"),this.warnOnMissingAttributes_("#EXT-X-RENDITION-REPORT #"+L,x.attributes,N)},"part-inf":function(){this.manifest.partInf=Rf(x.attributes),this.warnOnMissingAttributes_("#EXT-X-PART-INF",x.attributes,["PART-TARGET"]),this.manifest.partInf.partTarget&&(this.manifest.partTargetDuration=this.manifest.partInf.partTarget),aC.call(this,this.manifest)}}[x.tagType]||c).call(i)},uri:function(){a.uri=x.uri,s.push(a),this.manifest.targetDuration&&!("duration"in a)&&(this.trigger("warn",{message:"defaulting segment duration to the target duration"}),a.duration=this.manifest.targetDuration),l&&(a.key=l),a.timeline=g,o&&(a.map=o),v=0,a={}},comment:function(){},custom:function(){x.segment?(a.custom=a.custom||{},a.custom[x.customType]=x.data):(this.manifest.custom=this.manifest.custom||{},this.manifest.custom[x.customType]=x.data)}})[x.type].call(i)}),n}var t=e.prototype;return t.warnOnMissingAttributes_=function(i,s,a){var o=[];a.forEach(function(l){s.hasOwnProperty(l)||o.push(l)}),o.length&&this.trigger("warn",{message:i+" lacks required attribute(s): "+o.join(", ")})},t.push=function(i){this.lineStream.push(i)},t.end=function(){this.lineStream.push(`
`),this.trigger("end")},t.addParser=function(i){this.parseStream.addParser(i)},t.addTagMapper=function(i){this.parseStream.addTagMapper(i)},e})(Ik),Nh={mp4:/^(av0?1|avc0?[1234]|vp0?9|flac|opus|mp3|mp4a|mp4v|stpp.ttml.im1t)/,webm:/^(vp0?[89]|av0?1|opus|vorbis)/,ogg:/^(vp0?[89]|theora|flac|opus|vorbis)/,video:/^(av0?1|avc0?[1234]|vp0?[89]|hvc1|hev1|theora|mp4v)/,audio:/^(mp4a|flac|vorbis|opus|ac-[34]|ec-3|alac|mp3|speex|aac)/,text:/^(stpp.ttml.im1t)/,muxerVideo:/^(avc0?1)/,muxerAudio:/^(mp4a)/,muxerText:/a^/},Jfe=["video","audio","text"],t4=["Video","Audio","Text"],XU=function(e){return e&&e.replace(/avc1\.(\d+)\.(\d+)/i,function(t,n,i){var s=("00"+Number(n).toString(16)).slice(-2),a=("00"+Number(i).toString(16)).slice(-2);return"avc1."+s+"00"+a})},tu=function(e){e===void 0&&(e="");var t=e.split(","),n=[];return t.forEach(function(i){i=i.trim();var s;Jfe.forEach(function(a){var o=Nh[a].exec(i.toLowerCase());if(!(!o||o.length<=1)){s=a;var l=i.substring(0,o[1].length),u=i.replace(l,"");n.push({type:l,details:u,mediaType:a})}}),s||n.push({type:i,details:"",mediaType:"unknown"})}),n},Zfe=function(e,t){if(!e.mediaGroups.AUDIO||!t)return null;var n=e.mediaGroups.AUDIO[t];if(!n)return null;for(var i in n){var s=n[i];if(s.default&&s.playlists)return tu(s.playlists[0].attributes.CODECS)}return null},YU=function(e){return e===void 0&&(e=""),Nh.audio.test(e.trim().toLowerCase())},epe=function(e){return e===void 0&&(e=""),Nh.text.test(e.trim().toLowerCase())},ng=function(e){if(!(!e||typeof e!="string")){var t=e.toLowerCase().split(",").map(function(s){return XU(s.trim())}),n="video";t.length===1&&YU(t[0])?n="audio":t.length===1&&epe(t[0])&&(n="application");var i="mp4";return t.every(function(s){return Nh.mp4.test(s)})?i="mp4":t.every(function(s){return Nh.webm.test(s)})?i="webm":t.every(function(s){return Nh.ogg.test(s)})&&(i="ogg"),n+"/"+i+';codecs="'+e+'"'}},C_=function(e){return e===void 0&&(e=""),X.MediaSource&&X.MediaSource.isTypeSupported&&X.MediaSource.isTypeSupported(ng(e))||!1},oC=function(e){return e===void 0&&(e=""),e.toLowerCase().split(",").every(function(t){t=t.trim();for(var n=0;n<t4.length;n++){var i=t4[n];if(Nh["muxer"+i].test(t))return!0}return!1})},r4="mp4a.40.2",tpe="avc1.4d400d",rpe=/^(audio|video|application)\/(x-|vnd\.apple\.)?mpegurl/i,npe=/^application\/dash\+xml/i,QU=function(e){return rpe.test(e)?"hls":npe.test(e)?"dash":e==="application/vnd.videojs.vhs+json"?"vhs-json":null},ipe=function(e){return e.toString(2).length},spe=function(e){return Math.ceil(ipe(e)/8)},JU=function(e){return ArrayBuffer.isView==="function"?ArrayBuffer.isView(e):e&&e.buffer instanceof ArrayBuffer},ape=function(e){return JU(e)},vr=function(e){return e instanceof Uint8Array?e:(!Array.isArray(e)&&!ape(e)&&!(e instanceof ArrayBuffer)&&(typeof e!="number"||typeof e=="number"&&e!==e?e=0:e=[e]),new Uint8Array(e&&e.buffer||e,e&&e.byteOffset||0,e&&e.byteLength||0))},ms=X.BigInt||Number,oE=[ms("0x1"),ms("0x100"),ms("0x10000"),ms("0x1000000"),ms("0x100000000"),ms("0x10000000000"),ms("0x1000000000000"),ms("0x100000000000000"),ms("0x10000000000000000")];(function(){var r=new Uint16Array([65484]),e=new Uint8Array(r.buffer,r.byteOffset,r.byteLength);return e[0]===255?"big":e[0]===204?"little":"unknown"})();var ope=function(e,t){var n=t===void 0?{}:t,i=n.signed,s=i===void 0?!1:i,a=n.le,o=a===void 0?!1:a;e=vr(e);var l=o?"reduce":"reduceRight",u=e[l]?e[l]:Array.prototype[l],c=u.call(e,function(m,g,y){var v=o?y:Math.abs(y+1-e.length);return m+ms(g)*oE[v]},ms(0));if(s){var h=oE[e.length]/ms(2)-ms(1);c=ms(c),c>h&&(c-=h,c-=h,c-=ms(2))}return Number(c)},lpe=function(e,t){var n={},i=n.le,s=i===void 0?!1:i;(typeof e!="bigint"&&typeof e!="number"||typeof e=="number"&&e!==e)&&(e=0),e=ms(e);for(var a=spe(e),o=new Uint8Array(new ArrayBuffer(a)),l=0;l<a;l++){var u=s?l:Math.abs(l+1-o.length);o[u]=Number(e/oE[l]&ms(255)),e<0&&(o[u]=Math.abs(~o[u]),o[u]-=l===0?1:2)}return o},ZU=function(e,t){if(typeof e!="string"&&e&&typeof e.toString=="function"&&(e=e.toString()),typeof e!="string")return new Uint8Array;t||(e=unescape(encodeURIComponent(e)));for(var n=new Uint8Array(e.length),i=0;i<e.length;i++)n[i]=e.charCodeAt(i);return n},upe=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(t=t.filter(function(o){return o&&(o.byteLength||o.length)&&typeof o!="string"}),t.length<=1)return vr(t[0]);var i=t.reduce(function(o,l,u){return o+(l.byteLength||l.length)},0),s=new Uint8Array(i),a=0;return t.forEach(function(o){o=vr(o),s.set(o,a),a+=o.byteLength}),s},Yn=function(e,t,n){var i=n===void 0?{}:n,s=i.offset,a=s===void 0?0:s,o=i.mask,l=o===void 0?[]:o;e=vr(e),t=vr(t);var u=t.every?t.every:Array.prototype.every;return t.length&&e.length-a>=t.length&&u.call(t,function(c,h){var m=l[h]?l[h]&e[a+h]:e[a+h];return c===m})},cpe=function(e,t,n){t.forEach(function(i){for(var s in e.mediaGroups[i])for(var a in e.mediaGroups[i][s]){var o=e.mediaGroups[i][s][a];n(o,i,s,a)}})};/*! @name mpd-parser @version 0.22.1 @license Apache-2.0 */var n4=function(e){return!!e&&typeof e=="object"},na=function r(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce(function(i,s){return typeof s!="object"||Object.keys(s).forEach(function(a){Array.isArray(i[a])&&Array.isArray(s[a])?i[a]=i[a].concat(s[a]):n4(i[a])&&n4(s[a])?i[a]=r(i[a],s[a]):i[a]=s[a]}),i},{})},e$=function(e){return Object.keys(e).map(function(t){return e[t]})},dpe=function(e,t){for(var n=[],i=e;i<t;i++)n.push(i);return n},aS=function(e){return e.reduce(function(t,n){return t.concat(n)},[])},t$=function(e){if(!e.length)return[];for(var t=[],n=0;n<e.length;n++)t.push(e[n]);return t},hpe=function(e,t){return e.reduce(function(n,i,s){return i[t]&&n.push(s),n},[])},lE=function(e,t){for(var n=0;n<e.length;n++)if(t(e[n]))return n;return-1},fpe=function(e,t){return e$(e.reduce(function(n,i){return i.forEach(function(s){n[t(s)]=s}),n},{}))},Op={INVALID_NUMBER_OF_PERIOD:"INVALID_NUMBER_OF_PERIOD",DASH_EMPTY_MANIFEST:"DASH_EMPTY_MANIFEST",DASH_INVALID_XML:"DASH_INVALID_XML",NO_BASE_URL:"NO_BASE_URL",SEGMENT_TIME_UNSPECIFIED:"SEGMENT_TIME_UNSPECIFIED",UNSUPPORTED_UTC_TIMING_SCHEME:"UNSUPPORTED_UTC_TIMING_SCHEME"},ig=function(e){var t=e.baseUrl,n=t===void 0?"":t,i=e.source,s=i===void 0?"":i,a=e.range,o=a===void 0?"":a,l=e.indexRange,u=l===void 0?"":l,c={uri:s,resolvedUri:sS(n||"",s)};if(o||u){var h=o||u,m=h.split("-"),g=X.BigInt?X.BigInt(m[0]):parseInt(m[0],10),y=X.BigInt?X.BigInt(m[1]):parseInt(m[1],10);g<Number.MAX_SAFE_INTEGER&&typeof g=="bigint"&&(g=Number(g)),y<Number.MAX_SAFE_INTEGER&&typeof y=="bigint"&&(y=Number(y));var v;typeof y=="bigint"||typeof g=="bigint"?v=X.BigInt(y)-X.BigInt(g)+X.BigInt(1):v=y-g+1,typeof v=="bigint"&&v<Number.MAX_SAFE_INTEGER&&(v=Number(v)),c.byterange={length:v,offset:g}}return c},ppe=function(e){var t;return typeof e.offset=="bigint"||typeof e.length=="bigint"?t=X.BigInt(e.offset)+X.BigInt(e.length)-X.BigInt(1):t=e.offset+e.length-1,e.offset+"-"+t},i4=function(e){return e&&typeof e!="number"&&(e=parseInt(e,10)),isNaN(e)?null:e},mpe={static:function(e){var t=e.duration,n=e.timescale,i=n===void 0?1:n,s=e.sourceDuration,a=e.periodDuration,o=i4(e.endNumber),l=t/i;return typeof o=="number"?{start:0,end:o}:typeof a=="number"?{start:0,end:a/l}:{start:0,end:s/l}},dynamic:function(e){var t=e.NOW,n=e.clientOffset,i=e.availabilityStartTime,s=e.timescale,a=s===void 0?1:s,o=e.duration,l=e.periodStart,u=l===void 0?0:l,c=e.minimumUpdatePeriod,h=c===void 0?0:c,m=e.timeShiftBufferDepth,g=m===void 0?1/0:m,y=i4(e.endNumber),v=(t+n)/1e3,x=i+u,w=v+h,E=w-x,D=Math.ceil(E*a/o),I=Math.floor((v-x-g)*a/o),A=Math.floor((v-x)*a/o);return{start:Math.max(0,I),end:typeof y=="number"?y:Math.min(D,A)}}},gpe=function(e){return function(t){var n=e.duration,i=e.timescale,s=i===void 0?1:i,a=e.periodStart,o=e.startNumber,l=o===void 0?1:o;return{number:l+t,duration:n/s,timeline:a,time:t*n}}},Pk=function(e){var t=e.type,n=e.duration,i=e.timescale,s=i===void 0?1:i,a=e.periodDuration,o=e.sourceDuration,l=mpe[t](e),u=l.start,c=l.end,h=dpe(u,c).map(gpe(e));if(t==="static"){var m=h.length-1,g=typeof a=="number"?a:o;h[m].duration=g-n/s*m}return h},r$=function(e){var t=e.baseUrl,n=e.initialization,i=n===void 0?{}:n,s=e.sourceDuration,a=e.indexRange,o=a===void 0?"":a,l=e.periodStart,u=e.presentationTime,c=e.number,h=c===void 0?0:c,m=e.duration;if(!t)throw new Error(Op.NO_BASE_URL);var g=ig({baseUrl:t,source:i.sourceURL,range:i.range}),y=ig({baseUrl:t,source:t,indexRange:o});if(y.map=g,m){var v=Pk(e);v.length&&(y.duration=v[0].duration,y.timeline=v[0].timeline)}else s&&(y.duration=s,y.timeline=l);return y.presentationTime=u||l,y.number=h,[y]},Rk=function(e,t,n){var i=e.sidx.map?e.sidx.map:null,s=e.sidx.duration,a=e.timeline||0,o=e.sidx.byterange,l=o.offset+o.length,u=t.timescale,c=t.references.filter(function(B){return B.referenceType!==1}),h=[],m=e.endList?"static":"dynamic",g=e.sidx.timeline,y=g,v=e.mediaSequence||0,x;typeof t.firstOffset=="bigint"?x=X.BigInt(l)+t.firstOffset:x=l+t.firstOffset;for(var w=0;w<c.length;w++){var E=t.references[w],D=E.referencedSize,I=E.subsegmentDuration,A=void 0;typeof x=="bigint"?A=x+X.BigInt(D)-X.BigInt(1):A=x+D-1;var L=x+"-"+A,N={baseUrl:n,timescale:u,timeline:a,periodStart:g,presentationTime:y,number:v,duration:I,sourceDuration:s,indexRange:L,type:m},U=r$(N)[0];i&&(U.map=i),h.push(U),typeof x=="bigint"?x+=X.BigInt(D):x+=D,y+=I/u,v++}return e.segments=h,e},vpe=["AUDIO","SUBTITLES"],ype=1/60,n$=function(e){return fpe(e,function(t){var n=t.timeline;return n}).sort(function(t,n){return t.timeline>n.timeline?1:-1})},_pe=function(e,t){for(var n=0;n<e.length;n++)if(e[n].attributes.NAME===t)return e[n];return null},s4=function(e){var t=[];return cpe(e,vpe,function(n,i,s,a){t=t.concat(n.playlists||[])}),t},a4=function(e){var t=e.playlist,n=e.mediaSequence;t.mediaSequence=n,t.segments.forEach(function(i,s){i.number=t.mediaSequence+s})},xpe=function(e){var t=e.oldPlaylists,n=e.newPlaylists,i=e.timelineStarts;n.forEach(function(s){s.discontinuitySequence=lE(i,function(c){var h=c.timeline;return h===s.timeline});var a=_pe(t,s.attributes.NAME);if(a&&!s.sidx){var o=s.segments[0],l=lE(a.segments,function(c){return Math.abs(c.presentationTime-o.presentationTime)<ype});if(l===-1){a4({playlist:s,mediaSequence:a.mediaSequence+a.segments.length}),s.segments[0].discontinuity=!0,s.discontinuityStarts.unshift(0),(!a.segments.length&&s.timeline>a.timeline||a.segments.length&&s.timeline>a.segments[a.segments.length-1].timeline)&&s.discontinuitySequence--;return}var u=a.segments[l];u.discontinuity&&!o.discontinuity&&(o.discontinuity=!0,s.discontinuityStarts.unshift(0),s.discontinuitySequence--),a4({playlist:s,mediaSequence:a.segments[l].number})}})},bpe=function(e){var t=e.oldManifest,n=e.newManifest,i=t.playlists.concat(s4(t)),s=n.playlists.concat(s4(n));return n.timelineStarts=n$([t.timelineStarts,n.timelineStarts]),xpe({oldPlaylists:i,newPlaylists:s,timelineStarts:n.timelineStarts}),n},oS=function(e){return e&&e.uri+"-"+ppe(e.byterange)},lC=function(e){var t=e$(e.reduce(function(n,i){var s=i.attributes.id+(i.attributes.lang||"");if(!n[s])n[s]=i,n[s].attributes.timelineStarts=[];else{if(i.segments){var a;i.segments[0]&&(i.segments[0].discontinuity=!0),(a=n[s].segments).push.apply(a,i.segments)}i.attributes.contentProtection&&(n[s].attributes.contentProtection=i.attributes.contentProtection)}return n[s].attributes.timelineStarts.push({start:i.attributes.periodStart,timeline:i.attributes.periodStart}),n},{}));return t.map(function(n){return n.discontinuityStarts=hpe(n.segments||[],"discontinuity"),n})},Lk=function(e,t){var n=oS(e.sidx),i=n&&t[n]&&t[n].sidx;return i&&Rk(e,i,e.sidx.resolvedUri),e},Spe=function(e,t){if(t===void 0&&(t={}),!Object.keys(t).length)return e;for(var n in e)e[n]=Lk(e[n],t);return e},Tpe=function(e,t){var n,i=e.attributes,s=e.segments,a=e.sidx,o=e.mediaSequence,l=e.discontinuitySequence,u=e.discontinuityStarts,c={attributes:(n={NAME:i.id,BANDWIDTH:i.bandwidth,CODECS:i.codecs},n["PROGRAM-ID"]=1,n),uri:"",endList:i.type==="static",timeline:i.periodStart,resolvedUri:"",targetDuration:i.duration,discontinuitySequence:l,discontinuityStarts:u,timelineStarts:i.timelineStarts,mediaSequence:o,segments:s};return i.contentProtection&&(c.contentProtection=i.contentProtection),a&&(c.sidx=a),t&&(c.attributes.AUDIO="audio",c.attributes.SUBTITLES="subs"),c},Cpe=function(e){var t,n=e.attributes,i=e.segments,s=e.mediaSequence,a=e.discontinuityStarts,o=e.discontinuitySequence;typeof i>"u"&&(i=[{uri:n.baseUrl,timeline:n.periodStart,resolvedUri:n.baseUrl||"",duration:n.sourceDuration,number:0}],n.duration=n.sourceDuration);var l=(t={NAME:n.id,BANDWIDTH:n.bandwidth},t["PROGRAM-ID"]=1,t);return n.codecs&&(l.CODECS=n.codecs),{attributes:l,uri:"",endList:n.type==="static",timeline:n.periodStart,resolvedUri:n.baseUrl||"",targetDuration:n.duration,timelineStarts:n.timelineStarts,discontinuityStarts:a,discontinuitySequence:o,mediaSequence:s,segments:i}},wpe=function(e,t,n){t===void 0&&(t={}),n===void 0&&(n=!1);var i,s=e.reduce(function(o,l){var u=l.attributes.role&&l.attributes.role.value||"",c=l.attributes.lang||"",h=l.attributes.label||"main";if(c&&!l.attributes.label){var m=u?" ("+u+")":"";h=""+l.attributes.lang+m}o[h]||(o[h]={language:c,autoselect:!0,default:u==="main",playlists:[],uri:""});var g=Lk(Tpe(l,n),t);return o[h].playlists.push(g),typeof i>"u"&&u==="main"&&(i=l,i.default=!0),o},{});if(!i){var a=Object.keys(s)[0];s[a].default=!0}return s},Epe=function(e,t){return t===void 0&&(t={}),e.reduce(function(n,i){var s=i.attributes.lang||"text";return n[s]||(n[s]={language:s,default:!1,autoselect:!1,playlists:[],uri:""}),n[s].playlists.push(Lk(Cpe(i),t)),n},{})},kpe=function(e){return e.reduce(function(t,n){return n&&n.forEach(function(i){var s=i.channel,a=i.language;t[a]={autoselect:!1,default:!1,instreamId:s,language:a},i.hasOwnProperty("aspectRatio")&&(t[a].aspectRatio=i.aspectRatio),i.hasOwnProperty("easyReader")&&(t[a].easyReader=i.easyReader),i.hasOwnProperty("3D")&&(t[a]["3D"]=i["3D"])}),t},{})},Ape=function(e){var t,n=e.attributes,i=e.segments,s=e.sidx,a=e.discontinuityStarts,o={attributes:(t={NAME:n.id,AUDIO:"audio",SUBTITLES:"subs",RESOLUTION:{width:n.width,height:n.height},CODECS:n.codecs,BANDWIDTH:n.bandwidth},t["PROGRAM-ID"]=1,t),uri:"",endList:n.type==="static",timeline:n.periodStart,resolvedUri:"",targetDuration:n.duration,discontinuityStarts:a,timelineStarts:n.timelineStarts,segments:i};return n.frameRate&&(o.attributes["FRAME-RATE"]=n.frameRate),n.contentProtection&&(o.contentProtection=n.contentProtection),s&&(o.sidx=s),o},Dpe=function(e){var t=e.attributes;return t.mimeType==="video/mp4"||t.mimeType==="video/webm"||t.contentType==="video"},Ipe=function(e){var t=e.attributes;return t.mimeType==="audio/mp4"||t.mimeType==="audio/webm"||t.contentType==="audio"},Ppe=function(e){var t=e.attributes;return t.mimeType==="text/vtt"||t.contentType==="text"},Rpe=function(e,t){e.forEach(function(n){n.mediaSequence=0,n.discontinuitySequence=lE(t,function(i){var s=i.timeline;return s===n.timeline}),n.segments&&n.segments.forEach(function(i,s){i.number=s})})},o4=function(e){return e?Object.keys(e).reduce(function(t,n){var i=e[n];return t.concat(i.playlists)},[]):[]},Lpe=function(e){var t,n=e.dashPlaylists,i=e.locations,s=e.sidxMapping,a=s===void 0?{}:s,o=e.previousManifest;if(!n.length)return{};var l=n[0].attributes,u=l.sourceDuration,c=l.type,h=l.suggestedPresentationDelay,m=l.minimumUpdatePeriod,g=lC(n.filter(Dpe)).map(Ape),y=lC(n.filter(Ipe)),v=lC(n.filter(Ppe)),x=n.map(function(N){return N.attributes.captionServices}).filter(Boolean),w={allowCache:!0,discontinuityStarts:[],segments:[],endList:!0,mediaGroups:(t={AUDIO:{},VIDEO:{}},t["CLOSED-CAPTIONS"]={},t.SUBTITLES={},t),uri:"",duration:u,playlists:Spe(g,a)};m>=0&&(w.minimumUpdatePeriod=m*1e3),i&&(w.locations=i),c==="dynamic"&&(w.suggestedPresentationDelay=h);var E=w.playlists.length===0,D=y.length?wpe(y,a,E):null,I=v.length?Epe(v,a):null,A=g.concat(o4(D),o4(I)),L=A.map(function(N){var U=N.timelineStarts;return U});return w.timelineStarts=n$(L),Rpe(A,w.timelineStarts),D&&(w.mediaGroups.AUDIO.audio=D),I&&(w.mediaGroups.SUBTITLES.subs=I),x.length&&(w.mediaGroups["CLOSED-CAPTIONS"].cc=kpe(x)),o?bpe({oldManifest:o,newManifest:w}):w},Ope=function(e,t,n){var i=e.NOW,s=e.clientOffset,a=e.availabilityStartTime,o=e.timescale,l=o===void 0?1:o,u=e.periodStart,c=u===void 0?0:u,h=e.minimumUpdatePeriod,m=h===void 0?0:h,g=(i+s)/1e3,y=a+c,v=g+m,x=v-y;return Math.ceil((x*l-t)/n)},i$=function(e,t){for(var n=e.type,i=e.minimumUpdatePeriod,s=i===void 0?0:i,a=e.media,o=a===void 0?"":a,l=e.sourceDuration,u=e.timescale,c=u===void 0?1:u,h=e.startNumber,m=h===void 0?1:h,g=e.periodStart,y=[],v=-1,x=0;x<t.length;x++){var w=t[x],E=w.d,D=w.r||0,I=w.t||0;v<0&&(v=I),I&&I>v&&(v=I);var A=void 0;if(D<0){var L=x+1;L===t.length?n==="dynamic"&&s>0&&o.indexOf("$Number$")>0?A=Ope(e,v,E):A=(l*c-v)/E:A=(t[L].t-v)/E}else A=D+1;for(var N=m+y.length+A,U=m+y.length;U<N;)y.push({number:U,duration:E/c,time:v,timeline:g}),v+=E,U++}return y},Mpe=/\$([A-z]*)(?:(%0)([0-9]+)d)?\$/g,Fpe=function(e){return function(t,n,i,s){if(t==="$$")return"$";if(typeof e[n]>"u")return t;var a=""+e[n];return n==="RepresentationID"||(i?s=parseInt(s,10):s=1,a.length>=s)?a:""+new Array(s-a.length+1).join("0")+a}},l4=function(e,t){return e.replace(Mpe,Fpe(t))},Bpe=function(e,t){return!e.duration&&!t?[{number:e.startNumber||1,duration:e.sourceDuration,time:0,timeline:e.periodStart}]:e.duration?Pk(e):i$(e,t)},Npe=function(e,t){var n={RepresentationID:e.id,Bandwidth:e.bandwidth||0},i=e.initialization,s=i===void 0?{sourceURL:"",range:""}:i,a=ig({baseUrl:e.baseUrl,source:l4(s.sourceURL,n),range:s.range}),o=Bpe(e,t);return o.map(function(l){n.Number=l.number,n.Time=l.time;var u=l4(e.media||"",n),c=e.timescale||1,h=e.presentationTimeOffset||0,m=e.periodStart+(l.time-h)/c,g={uri:u,timeline:l.timeline,duration:l.duration,resolvedUri:sS(e.baseUrl||"",u),map:a,number:l.number,presentationTime:m};return g})},Upe=function(e,t){var n=e.baseUrl,i=e.initialization,s=i===void 0?{}:i,a=ig({baseUrl:n,source:s.sourceURL,range:s.range}),o=ig({baseUrl:n,source:t.media,range:t.mediaRange});return o.map=a,o},$pe=function(e,t){var n=e.duration,i=e.segmentUrls,s=i===void 0?[]:i,a=e.periodStart;if(!n&&!t||n&&t)throw new Error(Op.SEGMENT_TIME_UNSPECIFIED);var o=s.map(function(c){return Upe(e,c)}),l;n&&(l=Pk(e)),t&&(l=i$(e,t));var u=l.map(function(c,h){if(o[h]){var m=o[h],g=e.timescale||1,y=e.presentationTimeOffset||0;return m.timeline=c.timeline,m.duration=c.duration,m.number=c.number,m.presentationTime=a+(c.time-y)/g,m}}).filter(function(c){return c});return u},jpe=function(e){var t=e.attributes,n=e.segmentInfo,i,s;n.template?(s=Npe,i=na(t,n.template)):n.base?(s=r$,i=na(t,n.base)):n.list&&(s=$pe,i=na(t,n.list));var a={attributes:t};if(!s)return a;var o=s(i,n.segmentTimeline);if(i.duration){var l=i,u=l.duration,c=l.timescale,h=c===void 0?1:c;i.duration=u/h}else o.length?i.duration=o.reduce(function(m,g){return Math.max(m,Math.ceil(g.duration))},0):i.duration=0;return a.attributes=i,a.segments=o,n.base&&i.indexRange&&(a.sidx=o[0],a.segments=[]),a},zpe=function(e){return e.map(jpe)},vi=function(e,t){return t$(e.childNodes).filter(function(n){var i=n.tagName;return i===t})},Ok=function(e){return e.textContent.trim()},Hpe=function(e){return parseFloat(e.split("/").reduce(function(t,n){return t/n}))},Lf=function(e){var t=31536e3,n=720*60*60,i=1440*60,s=3600,a=60,o=/P(?:(\d*)Y)?(?:(\d*)M)?(?:(\d*)D)?(?:T(?:(\d*)H)?(?:(\d*)M)?(?:([\d.]*)S)?)?/,l=o.exec(e);if(!l)return 0;var u=l.slice(1),c=u[0],h=u[1],m=u[2],g=u[3],y=u[4],v=u[5];return parseFloat(c||0)*t+parseFloat(h||0)*n+parseFloat(m||0)*i+parseFloat(g||0)*s+parseFloat(y||0)*a+parseFloat(v||0)},Vpe=function(e){var t=/^\d+-\d+-\d+T\d+:\d+:\d+(\.\d+)?$/;return t.test(e)&&(e+="Z"),Date.parse(e)},u4={mediaPresentationDuration:function(e){return Lf(e)},availabilityStartTime:function(e){return Vpe(e)/1e3},minimumUpdatePeriod:function(e){return Lf(e)},suggestedPresentationDelay:function(e){return Lf(e)},type:function(e){return e},timeShiftBufferDepth:function(e){return Lf(e)},start:function(e){return Lf(e)},width:function(e){return parseInt(e,10)},height:function(e){return parseInt(e,10)},bandwidth:function(e){return parseInt(e,10)},frameRate:function(e){return Hpe(e)},startNumber:function(e){return parseInt(e,10)},timescale:function(e){return parseInt(e,10)},presentationTimeOffset:function(e){return parseInt(e,10)},duration:function(e){var t=parseInt(e,10);return isNaN(t)?Lf(e):t},d:function(e){return parseInt(e,10)},t:function(e){return parseInt(e,10)},r:function(e){return parseInt(e,10)},DEFAULT:function(e){return e}},Bs=function(e){return e&&e.attributes?t$(e.attributes).reduce(function(t,n){var i=u4[n.name]||u4.DEFAULT;return t[n.name]=i(n.value),t},{}):{}},Wpe={"urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b":"org.w3.clearkey","urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":"com.widevine.alpha","urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95":"com.microsoft.playready","urn:uuid:f239e769-efa3-4850-9c16-a903c6932efb":"com.adobe.primetime"},lS=function(e,t){return t.length?aS(e.map(function(n){return t.map(function(i){return sS(n,Ok(i))})})):e},Mk=function(e){var t=vi(e,"SegmentTemplate")[0],n=vi(e,"SegmentList")[0],i=n&&vi(n,"SegmentURL").map(function(m){return na({tag:"SegmentURL"},Bs(m))}),s=vi(e,"SegmentBase")[0],a=n||t,o=a&&vi(a,"SegmentTimeline")[0],l=n||s||t,u=l&&vi(l,"Initialization")[0],c=t&&Bs(t);c&&u?c.initialization=u&&Bs(u):c&&c.initialization&&(c.initialization={sourceURL:c.initialization});var h={template:c,segmentTimeline:o&&vi(o,"S").map(function(m){return Bs(m)}),list:n&&na(Bs(n),{segmentUrls:i,initialization:Bs(u)}),base:s&&na(Bs(s),{initialization:Bs(u)})};return Object.keys(h).forEach(function(m){h[m]||delete h[m]}),h},qpe=function(e,t,n){return function(i){var s=vi(i,"BaseURL"),a=lS(t,s),o=na(e,Bs(i)),l=Mk(i);return a.map(function(u){return{segmentInfo:na(n,l),attributes:na(o,{baseUrl:u})}})}},Gpe=function(e){return e.reduce(function(t,n){var i=Bs(n);i.schemeIdUri&&(i.schemeIdUri=i.schemeIdUri.toLowerCase());var s=Wpe[i.schemeIdUri];if(s){t[s]={attributes:i};var a=vi(n,"cenc:pssh")[0];if(a){var o=Ok(a);t[s].pssh=o&&KU(o)}}return t},{})},Kpe=function(e){if(e.schemeIdUri==="urn:scte:dash:cc:cea-608:2015"){var t=typeof e.value!="string"?[]:e.value.split(";");return t.map(function(i){var s,a;if(a=i,/^CC\d=/.test(i)){var o=i.split("=");s=o[0],a=o[1]}else/^CC\d$/.test(i)&&(s=i);return{channel:s,language:a}})}else if(e.schemeIdUri==="urn:scte:dash:cc:cea-708:2015"){var n=typeof e.value!="string"?[]:e.value.split(";");return n.map(function(i){var s={channel:void 0,language:void 0,aspectRatio:1,easyReader:0,"3D":0};if(/=/.test(i)){var a=i.split("="),o=a[0],l=a[1],u=l===void 0?"":l;s.channel=o,s.language=i,u.split(",").forEach(function(c){var h=c.split(":"),m=h[0],g=h[1];m==="lang"?s.language=g:m==="er"?s.easyReader=Number(g):m==="war"?s.aspectRatio=Number(g):m==="3D"&&(s["3D"]=Number(g))})}else s.language=i;return s.channel&&(s.channel="SERVICE"+s.channel),s})}},Xpe=function(e,t,n){return function(i){var s=Bs(i),a=lS(t,vi(i,"BaseURL")),o=vi(i,"Role")[0],l={role:Bs(o)},u=na(e,s,l),c=vi(i,"Accessibility")[0],h=Kpe(Bs(c));h&&(u=na(u,{captionServices:h}));var m=vi(i,"Label")[0];if(m&&m.childNodes.length){var g=m.childNodes[0].nodeValue.trim();u=na(u,{label:g})}var y=Gpe(vi(i,"ContentProtection"));Object.keys(y).length&&(u=na(u,{contentProtection:y}));var v=Mk(i),x=vi(i,"Representation"),w=na(n,v);return aS(x.map(qpe(u,a,w)))}},Ype=function(e,t){return function(n,i){var s=lS(t,vi(n.node,"BaseURL")),a=na(e,{periodStart:n.attributes.start});typeof n.attributes.duration=="number"&&(a.periodDuration=n.attributes.duration);var o=vi(n.node,"AdaptationSet"),l=Mk(n.node);return aS(o.map(Xpe(a,s,l)))}},Qpe=function(e){var t=e.attributes,n=e.priorPeriodAttributes,i=e.mpdType;return typeof t.start=="number"?t.start:n&&typeof n.start=="number"&&typeof n.duration=="number"?n.start+n.duration:!n&&i==="static"?0:null},Jpe=function(e,t){t===void 0&&(t={});var n=t,i=n.manifestUri,s=i===void 0?"":i,a=n.NOW,o=a===void 0?Date.now():a,l=n.clientOffset,u=l===void 0?0:l,c=vi(e,"Period");if(!c.length)throw new Error(Op.INVALID_NUMBER_OF_PERIOD);var h=vi(e,"Location"),m=Bs(e),g=lS([s],vi(e,"BaseURL"));m.type=m.type||"static",m.sourceDuration=m.mediaPresentationDuration||0,m.NOW=o,m.clientOffset=u,h.length&&(m.locations=h.map(Ok));var y=[];return c.forEach(function(v,x){var w=Bs(v),E=y[x-1];w.start=Qpe({attributes:w,priorPeriodAttributes:E?E.attributes:null,mpdType:m.type}),y.push({node:v,attributes:w})}),{locations:m.locations,representationInfo:aS(y.map(Ype(m,g)))}},s$=function(e){if(e==="")throw new Error(Op.DASH_EMPTY_MANIFEST);var t=new hN.DOMParser,n,i;try{n=t.parseFromString(e,"application/xml"),i=n&&n.documentElement.tagName==="MPD"?n.documentElement:null}catch{}if(!i||i&&i.getElementsByTagName("parsererror").length>0)throw new Error(Op.DASH_INVALID_XML);return i},Zpe=function(e){var t=vi(e,"UTCTiming")[0];if(!t)return null;var n=Bs(t);switch(n.schemeIdUri){case"urn:mpeg:dash:utc:http-head:2014":case"urn:mpeg:dash:utc:http-head:2012":n.method="HEAD";break;case"urn:mpeg:dash:utc:http-xsdate:2014":case"urn:mpeg:dash:utc:http-iso:2014":case"urn:mpeg:dash:utc:http-xsdate:2012":case"urn:mpeg:dash:utc:http-iso:2012":n.method="GET";break;case"urn:mpeg:dash:utc:direct:2014":case"urn:mpeg:dash:utc:direct:2012":n.method="DIRECT",n.value=Date.parse(n.value);break;case"urn:mpeg:dash:utc:http-ntp:2014":case"urn:mpeg:dash:utc:ntp:2014":case"urn:mpeg:dash:utc:sntp:2014":default:throw new Error(Op.UNSUPPORTED_UTC_TIMING_SCHEME)}return n},eme=function(e,t){t===void 0&&(t={});var n=Jpe(s$(e),t),i=zpe(n.representationInfo);return Lpe({dashPlaylists:i,locations:n.locations,sidxMapping:t.sidxMapping,previousManifest:t.previousManifest})},tme=function(e){return Zpe(s$(e))},uC,c4;function rme(){if(c4)return uC;c4=1;var r=Math.pow(2,32),e=function(t){var n=new DataView(t.buffer,t.byteOffset,t.byteLength),i;return n.getBigUint64?(i=n.getBigUint64(0),i<Number.MAX_SAFE_INTEGER?Number(i):i):n.getUint32(0)*r+n.getUint32(4)};return uC={getUint64:e,MAX_UINT32:r},uC}var cC,d4;function nme(){if(d4)return cC;d4=1;var r=rme().getUint64,e=function(t){var n=new DataView(t.buffer,t.byteOffset,t.byteLength),i={version:t[0],flags:new Uint8Array(t.subarray(1,4)),references:[],referenceId:n.getUint32(4),timescale:n.getUint32(8)},s=12;i.version===0?(i.earliestPresentationTime=n.getUint32(s),i.firstOffset=n.getUint32(s+4),s+=8):(i.earliestPresentationTime=r(t.subarray(s)),i.firstOffset=r(t.subarray(s+8)),s+=16),s+=2;var a=n.getUint16(s);for(s+=2;a>0;s+=12,a--)i.references.push({referenceType:(t[s]&128)>>>7,referencedSize:n.getUint32(s)&2147483647,subsegmentDuration:n.getUint32(s+4),startsWithSap:!!(t[s+8]&128),sapType:(t[s+8]&112)>>>4,sapDeltaTime:n.getUint32(s+8)&268435455});return i};return cC=e,cC}var ime=nme();const sme=ua(ime);var ame=vr([73,68,51]),ome=function(e,t){t===void 0&&(t=0),e=vr(e);var n=e[t+5],i=e[t+6]<<21|e[t+7]<<14|e[t+8]<<7|e[t+9],s=(n&16)>>4;return s?i+20:i+10},g0=function r(e,t){return t===void 0&&(t=0),e=vr(e),e.length-t<10||!Yn(e,ame,{offset:t})?t:(t+=ome(e,t),r(e,t))},h4=function(e){return typeof e=="string"?ZU(e):e},lme=function(e){return Array.isArray(e)?e.map(function(t){return h4(t)}):[h4(e)]},ume=function r(e,t,n){n===void 0&&(n=!1),t=lme(t),e=vr(e);var i=[];if(!t.length)return i;for(var s=0;s<e.length;){var a=(e[s]<<24|e[s+1]<<16|e[s+2]<<8|e[s+3])>>>0,o=e.subarray(s+4,s+8);if(a===0)break;var l=s+a;if(l>e.length){if(n)break;l=e.length}var u=e.subarray(s+8,l);Yn(o,t[0])&&(t.length===1?i.push(u):i.push.apply(i,r(u,t.slice(1),n))),s=l}return i},cy={EBML:vr([26,69,223,163]),DocType:vr([66,130]),Segment:vr([24,83,128,103]),SegmentInfo:vr([21,73,169,102]),Tracks:vr([22,84,174,107]),Track:vr([174]),TrackNumber:vr([215]),DefaultDuration:vr([35,227,131]),TrackEntry:vr([174]),TrackType:vr([131]),FlagDefault:vr([136]),CodecID:vr([134]),CodecPrivate:vr([99,162]),VideoTrack:vr([224]),AudioTrack:vr([225]),Cluster:vr([31,67,182,117]),Timestamp:vr([231]),TimestampScale:vr([42,215,177]),BlockGroup:vr([160]),BlockDuration:vr([155]),Block:vr([161]),SimpleBlock:vr([163])},uE=[128,64,32,16,8,4,2,1],cme=function(e){for(var t=1,n=0;n<uE.length&&!(e&uE[n]);n++)t++;return t},Dx=function(e,t,n,i){n===void 0&&(n=!0),i===void 0&&(i=!1);var s=cme(e[t]),a=e.subarray(t,t+s);return n&&(a=Array.prototype.slice.call(e,t,t+s),a[0]^=uE[s-1]),{length:s,value:ope(a,{signed:i}),bytes:a}},f4=function r(e){return typeof e=="string"?e.match(/.{1,2}/g).map(function(t){return r(t)}):typeof e=="number"?lpe(e):e},dme=function(e){return Array.isArray(e)?e.map(function(t){return f4(t)}):[f4(e)]},hme=function r(e,t,n){if(n>=t.length)return t.length;var i=Dx(t,n,!1);if(Yn(e.bytes,i.bytes))return n;var s=Dx(t,n+i.length);return r(e,t,n+s.length+s.value+i.length)},p4=function r(e,t){t=dme(t),e=vr(e);var n=[];if(!t.length)return n;for(var i=0;i<e.length;){var s=Dx(e,i,!1),a=Dx(e,i+s.length),o=i+s.length+a.length;a.value===127&&(a.value=hme(s,e,o),a.value!==e.length&&(a.value-=o));var l=o+a.value>e.length?e.length:o+a.value,u=e.subarray(o,l);Yn(t[0],s.bytes)&&(t.length===1?n.push(u):n=n.concat(r(u,t.slice(1))));var c=s.length+a.length+u.length;i+=c}return n},fme=vr([0,0,0,1]),pme=vr([0,0,1]),mme=vr([0,0,3]),gme=function(e){for(var t=[],n=1;n<e.length-2;)Yn(e.subarray(n,n+3),mme)&&(t.push(n+2),n++),n++;if(t.length===0)return e;var i=e.length-t.length,s=new Uint8Array(i),a=0;for(n=0;n<i;a++,n++)a===t[0]&&(a++,t.shift()),s[n]=e[a];return s},a$=function(e,t,n,i){e=vr(e),n=[].concat(n);for(var s=0,a,o=0;s<e.length&&(o<i||a);){var l=void 0;if(Yn(e.subarray(s),fme)?l=4:Yn(e.subarray(s),pme)&&(l=3),!l){s++;continue}if(o++,a)return gme(e.subarray(a,s));var u=void 0;t==="h264"?u=e[s+l]&31:t==="h265"&&(u=e[s+l]>>1&63),n.indexOf(u)!==-1&&(a=s+l),s+=l+(t==="h264"?1:2)}return e.subarray(0,0)},vme=function(e,t,n){return a$(e,"h264",t,n)},yme=function(e,t,n){return a$(e,"h265",t,n)},Ys={webm:vr([119,101,98,109]),matroska:vr([109,97,116,114,111,115,107,97]),flac:vr([102,76,97,67]),ogg:vr([79,103,103,83]),ac3:vr([11,119]),riff:vr([82,73,70,70]),avi:vr([65,86,73]),wav:vr([87,65,86,69]),"3gp":vr([102,116,121,112,51,103]),mp4:vr([102,116,121,112]),fmp4:vr([115,116,121,112]),mov:vr([102,116,121,112,113,116]),moov:vr([109,111,111,118]),moof:vr([109,111,111,102])},Mp={aac:function(e){var t=g0(e);return Yn(e,[255,16],{offset:t,mask:[255,22]})},mp3:function(e){var t=g0(e);return Yn(e,[255,2],{offset:t,mask:[255,6]})},webm:function(e){var t=p4(e,[cy.EBML,cy.DocType])[0];return Yn(t,Ys.webm)},mkv:function(e){var t=p4(e,[cy.EBML,cy.DocType])[0];return Yn(t,Ys.matroska)},mp4:function(e){if(Mp["3gp"](e)||Mp.mov(e))return!1;if(Yn(e,Ys.mp4,{offset:4})||Yn(e,Ys.fmp4,{offset:4})||Yn(e,Ys.moof,{offset:4})||Yn(e,Ys.moov,{offset:4}))return!0},mov:function(e){return Yn(e,Ys.mov,{offset:4})},"3gp":function(e){return Yn(e,Ys["3gp"],{offset:4})},ac3:function(e){var t=g0(e);return Yn(e,Ys.ac3,{offset:t})},ts:function(e){if(e.length<189&&e.length>=1)return e[0]===71;for(var t=0;t+188<e.length&&t<188;){if(e[t]===71&&e[t+188]===71)return!0;t+=1}return!1},flac:function(e){var t=g0(e);return Yn(e,Ys.flac,{offset:t})},ogg:function(e){return Yn(e,Ys.ogg)},avi:function(e){return Yn(e,Ys.riff)&&Yn(e,Ys.avi,{offset:8})},wav:function(e){return Yn(e,Ys.riff)&&Yn(e,Ys.wav,{offset:8})},h264:function(e){return vme(e,7,3).length},h265:function(e){return yme(e,[32,33],3).length}},cE=Object.keys(Mp).filter(function(r){return r!=="ts"&&r!=="h264"&&r!=="h265"}).concat(["ts","h264","h265"]);cE.forEach(function(r){var e=Mp[r];Mp[r]=function(t){return e(vr(t))}});var _me=Mp,Fk=function(e){e=vr(e);for(var t=0;t<cE.length;t++){var n=cE[t];if(_me[n](e))return n}return""},xme=function(e){return ume(e,["moof"]).length>0},dC,m4;function bme(){if(m4)return dC;m4=1;var r=9e4,e,t,n,i,s,a,o;return e=function(l){return l*r},t=function(l,u){return l*u},n=function(l){return l/r},i=function(l,u){return l/u},s=function(l,u){return e(i(l,u))},a=function(l,u){return t(n(l),u)},o=function(l,u,c){return n(c?l:l-u)},dC={ONE_SECOND_IN_TS:r,secondsToVideoTs:e,secondsToAudioTs:t,videoTsToSeconds:n,audioTsToSeconds:i,audioTsToVideoTs:s,videoTsToAudioTs:a,metadataTsToSeconds:o},dC}var Ix=bme();function js(r){return js=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},js(r)}function Sme(r){try{return Function.toString.call(r).indexOf("[native code]")!==-1}catch{return typeof r=="function"}}function dE(r){var e=typeof Map=="function"?new Map:void 0;return dE=function(n){if(n===null||!Sme(n))return n;if(typeof n!="function")throw new TypeError("Super expression must either be null or a function");if(e!==void 0){if(e.has(n))return e.get(n);e.set(n,i)}function i(){return GU(n,arguments,js(this).constructor)}return i.prototype=Object.create(n.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),Sp(i,n)},dE(r)}/**
 * @license
 * Video.js 7.21.6 <http://videojs.com/>
 * Copyright Brightcove, Inc. <https://www.brightcove.com/>
 * Available under Apache License Version 2.0
 * <https://github.com/videojs/video.js/blob/main/LICENSE>
 *
 * Includes vtt.js <https://github.com/mozilla/vtt.js>
 * Available under Apache License Version 2.0
 * <https://github.com/mozilla/vtt.js/blob/main/LICENSE>
 */var o$="7.21.6",mc={},Ld=function(e,t){return mc[e]=mc[e]||[],t&&(mc[e]=mc[e].concat(t)),mc[e]},Tme=function(e,t){Ld(e,t)},l$=function(e,t){var n=Ld(e).indexOf(t);return n<=-1?!1:(mc[e]=mc[e].slice(),mc[e].splice(n,1),!0)},Cme=function(e,t){Ld(e,[].concat(t).map(function(n){var i=function s(){return l$(e,s),n.apply(void 0,arguments)};return i}))},Px={prefixed:!0},w_=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror","fullscreen"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror","-webkit-full-screen"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror","-moz-full-screen"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError","-ms-fullscreen"]],g4=w_[0],v0;for(var dy=0;dy<w_.length;dy++)if(w_[dy][1]in Fe){v0=w_[dy];break}if(v0){for(var hy=0;hy<v0.length;hy++)Px[g4[hy]]=v0[hy];Px.prefixed=v0[0]!==g4[0]}var Ia=[],wme=function(e,t){return function(n,i,s){var a=t.levels[i],o=new RegExp("^("+a+")$");if(n!=="log"&&s.unshift(n.toUpperCase()+":"),s.unshift(e+":"),Ia){Ia.push([].concat(s));var l=Ia.length-1e3;Ia.splice(0,l>0?l:0)}if(X.console){var u=X.console[n];!u&&n==="debug"&&(u=X.console.info||X.console.log),!(!u||!a||!o.test(n))&&u[Array.isArray(s)?"apply":"call"](X.console,s)}}};function u$(r){var e="info",t,n=function(){for(var s=arguments.length,a=new Array(s),o=0;o<s;o++)a[o]=arguments[o];t("log",e,a)};return t=wme(r,n),n.createLogger=function(i){return u$(r+": "+i)},n.levels={all:"debug|log|warn|error",off:"",debug:"debug|log|warn|error",info:"log|warn|error",warn:"warn|error",error:"error",DEFAULT:e},n.level=function(i){if(typeof i=="string"){if(!n.levels.hasOwnProperty(i))throw new Error('"'+i+'" in not a valid log level');e=i}return e},n.history=function(){return Ia?[].concat(Ia):[]},n.history.filter=function(i){return(Ia||[]).filter(function(s){return new RegExp(".*"+i+".*").test(s[0])})},n.history.clear=function(){Ia&&(Ia.length=0)},n.history.disable=function(){Ia!==null&&(Ia.length=0,Ia=null)},n.history.enable=function(){Ia===null&&(Ia=[])},n.error=function(){for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return t("error",e,s)},n.warn=function(){for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return t("warn",e,s)},n.debug=function(){for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return t("debug",e,s)},n}var Gr=u$("VIDEOJS"),c$=Gr.createLogger,Eme=Object.prototype.toString,d$=function(e){return Tc(e)?Object.keys(e):[]};function vp(r,e){d$(r).forEach(function(t){return e(r[t],t)})}function kme(r,e,t){return t===void 0&&(t=0),d$(r).reduce(function(n,i){return e(n,r[i],i)},t)}function li(r){for(var e=arguments.length,t=new Array(e>1?e-1:0),n=1;n<e;n++)t[n-1]=arguments[n];return Object.assign?tr.apply(void 0,[r].concat(t)):(t.forEach(function(i){i&&vp(i,function(s,a){r[a]=s})}),r)}function Tc(r){return!!r&&typeof r=="object"}function sg(r){return Tc(r)&&Eme.call(r)==="[object Object]"&&r.constructor===Object}function ag(r,e){if(!r||!e)return"";if(typeof X.getComputedStyle=="function"){var t;try{t=X.getComputedStyle(r)}catch{return""}return t?t.getPropertyValue(e)||t[e]:""}return""}var ts=X.navigator&&X.navigator.userAgent||"",v4=/AppleWebKit\/([\d.]+)/i.exec(ts),Ame=v4?parseFloat(v4.pop()):null,h$=/iPod/i.test(ts),Dme=(function(){var r=ts.match(/OS (\d+)_/i);return r&&r[1]?r[1]:null})(),Ac=/Android/i.test(ts),Bk=(function(){var r=ts.match(/Android (\d+)(?:\.(\d+))?(?:\.(\d+))*/i);if(!r)return null;var e=r[1]&&parseFloat(r[1]),t=r[2]&&parseFloat(r[2]);return e&&t?parseFloat(r[1]+"."+r[2]):e||null})(),f$=Ac&&Bk<5&&Ame<537,p$=/Firefox/i.test(ts),$g=/Edg/i.test(ts),Dc=!$g&&(/Chrome/i.test(ts)||/CriOS/i.test(ts)),m$=(function(){var r=ts.match(/(Chrome|CriOS)\/(\d+)/);return r&&r[2]?parseFloat(r[2]):null})(),jg=(function(){var r=/MSIE\s(\d+)\.\d/.exec(ts),e=r&&parseFloat(r[1]);return!e&&/Trident\/7.0/i.test(ts)&&/rv:11.0/.test(ts)&&(e=11),e})(),Nk=/Safari/i.test(ts)&&!Dc&&!Ac&&!$g,g$=/Windows/i.test(ts),Fp=!!(am()&&("ontouchstart"in X||X.navigator.maxTouchPoints||X.DocumentTouch&&X.document instanceof X.DocumentTouch)),Uk=/iPad/i.test(ts)||Nk&&Fp&&!/iPhone/i.test(ts),$k=/iPhone/i.test(ts)&&!Uk,la=$k||Uk||h$,uS=(Nk||la)&&!Dc,Ime=Object.freeze({__proto__:null,IS_IPOD:h$,IOS_VERSION:Dme,IS_ANDROID:Ac,ANDROID_VERSION:Bk,IS_NATIVE_ANDROID:f$,IS_FIREFOX:p$,IS_EDGE:$g,IS_CHROME:Dc,CHROME_VERSION:m$,IE_VERSION:jg,IS_SAFARI:Nk,IS_WINDOWS:g$,TOUCH_ENABLED:Fp,IS_IPAD:Uk,IS_IPHONE:$k,IS_IOS:la,IS_ANY_SAFARI:uS});function y4(r){return typeof r=="string"&&!!r.trim()}function v$(r){if(r.indexOf(" ")>=0)throw new Error("class has illegal whitespace characters")}function Pme(r){return new RegExp("(^|\\s)"+r+"($|\\s)")}function am(){return Fe===X.document}function om(r){return Tc(r)&&r.nodeType===1}function y$(){try{return X.parent!==X.self}catch{return!0}}function _$(r){return function(e,t){if(!y4(e))return Fe[r](null);y4(t)&&(t=Fe.querySelector(t));var n=om(t)?t:Fe;return n[r]&&n[r](e)}}function cn(r,e,t,n){r===void 0&&(r="div"),e===void 0&&(e={}),t===void 0&&(t={});var i=Fe.createElement(r);return Object.getOwnPropertyNames(e).forEach(function(s){var a=e[s];s.indexOf("aria-")!==-1||s==="role"||s==="type"?(Gr.warn(`Setting attributes in the second argument of createEl()
has been deprecated. Use the third argument instead.
`+("createEl(type, properties, attributes). Attempting to set "+s+" to "+a+".")),i.setAttribute(s,a)):s==="textContent"?tf(i,a):(i[s]!==a||s==="tabIndex")&&(i[s]=a)}),Object.getOwnPropertyNames(t).forEach(function(s){i.setAttribute(s,t[s])}),n&&zk(i,n),i}function tf(r,e){return typeof r.textContent>"u"?r.innerText=e:r.textContent=e,r}function hE(r,e){e.firstChild?e.insertBefore(r,e.firstChild):e.appendChild(r)}function Uh(r,e){return v$(e),r.classList?r.classList.contains(e):Pme(e).test(r.className)}function _c(r,e){return r.classList?r.classList.add(e):Uh(r,e)||(r.className=(r.className+" "+e).trim()),r}function zg(r,e){return r?(r.classList?r.classList.remove(e):(v$(e),r.className=r.className.split(/\s+/).filter(function(t){return t!==e}).join(" ")),r):(Gr.warn("removeClass was called with an element that doesn't exist"),null)}function x$(r,e,t){var n=Uh(r,e);if(typeof t=="function"&&(t=t(r,e)),typeof t!="boolean"&&(t=!n),t!==n)return t?_c(r,e):zg(r,e),r}function b$(r,e){Object.getOwnPropertyNames(e).forEach(function(t){var n=e[t];n===null||typeof n>"u"||n===!1?r.removeAttribute(t):r.setAttribute(t,n===!0?"":n)})}function dc(r){var e={},t=",autoplay,controls,playsinline,loop,muted,default,defaultMuted,";if(r&&r.attributes&&r.attributes.length>0)for(var n=r.attributes,i=n.length-1;i>=0;i--){var s=n[i].name,a=n[i].value;(typeof r[s]=="boolean"||t.indexOf(","+s+",")!==-1)&&(a=a!==null),e[s]=a}return e}function S$(r,e){return r.getAttribute(e)}function Bp(r,e,t){r.setAttribute(e,t)}function cS(r,e){r.removeAttribute(e)}function T$(){Fe.body.focus(),Fe.onselectstart=function(){return!1}}function C$(){Fe.onselectstart=function(){return!0}}function Np(r){if(r&&r.getBoundingClientRect&&r.parentNode){var e=r.getBoundingClientRect(),t={};return["bottom","height","left","right","top","width"].forEach(function(n){e[n]!==void 0&&(t[n]=e[n])}),t.height||(t.height=parseFloat(ag(r,"height"))),t.width||(t.width=parseFloat(ag(r,"width"))),t}}function og(r){if(!r||r&&!r.offsetParent)return{left:0,top:0,width:0,height:0};for(var e=r.offsetWidth,t=r.offsetHeight,n=0,i=0;r.offsetParent&&r!==Fe[Px.fullscreenElement];)n+=r.offsetLeft,i+=r.offsetTop,r=r.offsetParent;return{left:n,top:i,width:e,height:t}}function dS(r,e){var t={x:0,y:0};if(la)for(var n=r;n&&n.nodeName.toLowerCase()!=="html";){var i=ag(n,"transform");if(/^matrix/.test(i)){var s=i.slice(7,-1).split(/,\s/).map(Number);t.x+=s[4],t.y+=s[5]}else if(/^matrix3d/.test(i)){var a=i.slice(9,-1).split(/,\s/).map(Number);t.x+=a[12],t.y+=a[13]}n=n.parentNode}var o={},l=og(e.target),u=og(r),c=u.width,h=u.height,m=e.offsetY-(u.top-l.top),g=e.offsetX-(u.left-l.left);return e.changedTouches&&(g=e.changedTouches[0].pageX-u.left,m=e.changedTouches[0].pageY+u.top,la&&(g-=t.x,m-=t.y)),o.y=1-Math.max(0,Math.min(1,m/h)),o.x=Math.max(0,Math.min(1,g/c)),o}function w$(r){return Tc(r)&&r.nodeType===3}function jk(r){for(;r.firstChild;)r.removeChild(r.firstChild);return r}function E$(r){return typeof r=="function"&&(r=r()),(Array.isArray(r)?r:[r]).map(function(e){if(typeof e=="function"&&(e=e()),om(e)||w$(e))return e;if(typeof e=="string"&&/\S/.test(e))return Fe.createTextNode(e)}).filter(function(e){return e})}function zk(r,e){return E$(e).forEach(function(t){return r.appendChild(t)}),r}function k$(r,e){return zk(jk(r),e)}function lg(r){return r.button===void 0&&r.buttons===void 0||r.button===0&&r.buttons===void 0||r.type==="mouseup"&&r.button===0&&r.buttons===0?!0:!(r.button!==0||r.buttons!==1)}var Od=_$("querySelector"),A$=_$("querySelectorAll"),D$=Object.freeze({__proto__:null,isReal:am,isEl:om,isInFrame:y$,createEl:cn,textContent:tf,prependTo:hE,hasClass:Uh,addClass:_c,removeClass:zg,toggleClass:x$,setAttributes:b$,getAttributes:dc,getAttribute:S$,setAttribute:Bp,removeAttribute:cS,blockTextSelection:T$,unblockTextSelection:C$,getBoundingClientRect:Np,findPosition:og,getPointerPosition:dS,isTextNode:w$,emptyEl:jk,normalizeContent:E$,appendContent:zk,insertContent:k$,isSingleLeftClick:lg,$:Od,$$:A$}),I$=!1,fE,Rme=function(){if(fE.options.autoSetup!==!1){var e=Array.prototype.slice.call(Fe.getElementsByTagName("video")),t=Array.prototype.slice.call(Fe.getElementsByTagName("audio")),n=Array.prototype.slice.call(Fe.getElementsByTagName("video-js")),i=e.concat(t,n);if(i&&i.length>0)for(var s=0,a=i.length;s<a;s++){var o=i[s];if(o&&o.getAttribute){if(o.player===void 0){var l=o.getAttribute("data-setup");l!==null&&fE(o)}}else{pE(1);break}}else I$||pE(1)}};function pE(r,e){am()&&(e&&(fE=e),X.setTimeout(Rme,r))}function mE(){I$=!0,X.removeEventListener("load",mE)}am()&&(Fe.readyState==="complete"?mE():X.addEventListener("load",mE));var P$=function(e){var t=Fe.createElement("style");return t.className=e,t},R$=function(e,t){e.styleSheet?e.styleSheet.cssText=t:e.textContent=t},Lme=3,Ome=Lme;function Ic(){return Ome++}var L$;X.WeakMap||(L$=(function(){function r(){this.vdata="vdata"+Math.floor(X.performance&&X.performance.now()||Date.now()),this.data={}}var e=r.prototype;return e.set=function(n,i){var s=n[this.vdata]||Ic();return n[this.vdata]||(n[this.vdata]=s),this.data[s]=i,this},e.get=function(n){var i=n[this.vdata];if(i)return this.data[i];Gr("We have no data for this element",n)},e.has=function(n){var i=n[this.vdata];return i in this.data},e.delete=function(n){var i=n[this.vdata];i&&(delete this.data[i],delete n[this.vdata])},r})());var ia=X.WeakMap?new WeakMap:new L$;function _4(r,e){if(ia.has(r)){var t=ia.get(r);t.handlers[e].length===0&&(delete t.handlers[e],r.removeEventListener?r.removeEventListener(e,t.dispatcher,!1):r.detachEvent&&r.detachEvent("on"+e,t.dispatcher)),Object.getOwnPropertyNames(t.handlers).length<=0&&(delete t.handlers,delete t.dispatcher,delete t.disabled),Object.getOwnPropertyNames(t).length===0&&ia.delete(r)}}function Hk(r,e,t,n){t.forEach(function(i){r(e,i,n)})}function hS(r){if(r.fixed_)return r;function e(){return!0}function t(){return!1}if(!r||!r.isPropagationStopped||!r.isImmediatePropagationStopped){var n=r||X.event;r={};for(var i in n)i!=="layerX"&&i!=="layerY"&&i!=="keyLocation"&&i!=="webkitMovementX"&&i!=="webkitMovementY"&&i!=="path"&&(i==="returnValue"&&n.preventDefault||(r[i]=n[i]));if(r.target||(r.target=r.srcElement||Fe),r.relatedTarget||(r.relatedTarget=r.fromElement===r.target?r.toElement:r.fromElement),r.preventDefault=function(){n.preventDefault&&n.preventDefault(),r.returnValue=!1,n.returnValue=!1,r.defaultPrevented=!0},r.defaultPrevented=!1,r.stopPropagation=function(){n.stopPropagation&&n.stopPropagation(),r.cancelBubble=!0,n.cancelBubble=!0,r.isPropagationStopped=e},r.isPropagationStopped=t,r.stopImmediatePropagation=function(){n.stopImmediatePropagation&&n.stopImmediatePropagation(),r.isImmediatePropagationStopped=e,r.stopPropagation()},r.isImmediatePropagationStopped=t,r.clientX!==null&&r.clientX!==void 0){var s=Fe.documentElement,a=Fe.body;r.pageX=r.clientX+(s&&s.scrollLeft||a&&a.scrollLeft||0)-(s&&s.clientLeft||a&&a.clientLeft||0),r.pageY=r.clientY+(s&&s.scrollTop||a&&a.scrollTop||0)-(s&&s.clientTop||a&&a.clientTop||0)}r.which=r.charCode||r.keyCode,r.button!==null&&r.button!==void 0&&(r.button=r.button&1?0:r.button&4?1:r.button&2?2:0)}return r.fixed_=!0,r}var fy,Mme=function(){if(typeof fy!="boolean"){fy=!1;try{var e=Object.defineProperty({},"passive",{get:function(){fy=!0}});X.addEventListener("test",null,e),X.removeEventListener("test",null,e)}catch{}}return fy},Fme=["touchstart","touchmove"];function go(r,e,t){if(Array.isArray(e))return Hk(go,r,e,t);ia.has(r)||ia.set(r,{});var n=ia.get(r);if(n.handlers||(n.handlers={}),n.handlers[e]||(n.handlers[e]=[]),t.guid||(t.guid=Ic()),n.handlers[e].push(t),n.dispatcher||(n.disabled=!1,n.dispatcher=function(s,a){if(!n.disabled){s=hS(s);var o=n.handlers[s.type];if(o)for(var l=o.slice(0),u=0,c=l.length;u<c&&!s.isImmediatePropagationStopped();u++)try{l[u].call(r,s,a)}catch(h){Gr.error(h)}}}),n.handlers[e].length===1)if(r.addEventListener){var i=!1;Mme()&&Fme.indexOf(e)>-1&&(i={passive:!0}),r.addEventListener(e,n.dispatcher,i)}else r.attachEvent&&r.attachEvent("on"+e,n.dispatcher)}function $s(r,e,t){if(ia.has(r)){var n=ia.get(r);if(n.handlers){if(Array.isArray(e))return Hk($s,r,e,t);var i=function(u,c){n.handlers[c]=[],_4(u,c)};if(e===void 0){for(var s in n.handlers)Object.prototype.hasOwnProperty.call(n.handlers||{},s)&&i(r,s);return}var a=n.handlers[e];if(a){if(!t){i(r,e);return}if(t.guid)for(var o=0;o<a.length;o++)a[o].guid===t.guid&&a.splice(o--,1);_4(r,e)}}}}function lm(r,e,t){var n=ia.has(r)?ia.get(r):{},i=r.parentNode||r.ownerDocument;if(typeof e=="string"?e={type:e,target:r}:e.target||(e.target=r),e=hS(e),n.dispatcher&&n.dispatcher.call(r,e,t),i&&!e.isPropagationStopped()&&e.bubbles===!0)lm.call(null,i,e,t);else if(!i&&!e.defaultPrevented&&e.target&&e.target[e.type]){ia.has(e.target)||ia.set(e.target,{});var s=ia.get(e.target);e.target[e.type]&&(s.disabled=!0,typeof e.target[e.type]=="function"&&e.target[e.type](),s.disabled=!1)}return!e.defaultPrevented}function fS(r,e,t){if(Array.isArray(e))return Hk(fS,r,e,t);var n=function i(){$s(r,e,i),t.apply(this,arguments)};n.guid=t.guid=t.guid||Ic(),go(r,e,n)}function O$(r,e,t){var n=function i(){$s(r,e,i),t.apply(this,arguments)};n.guid=t.guid=t.guid||Ic(),go(r,e,n)}var Bme=Object.freeze({__proto__:null,fixEvent:hS,on:go,off:$s,trigger:lm,one:fS,any:O$}),kl=30,Wn=function(e,t,n){t.guid||(t.guid=Ic());var i=t.bind(e);return i.guid=n?n+"_"+t.guid:t.guid,i},Cc=function(e,t){var n=X.performance.now(),i=function(){var a=X.performance.now();a-n>=t&&(e.apply(void 0,arguments),n=a)};return i},Nme=function(e,t,n,i){i===void 0&&(i=X);var s,a=function(){i.clearTimeout(s),s=null},o=function(){var u=this,c=arguments,h=function(){s=null,h=null,e.apply(u,c)};i.clearTimeout(s),s=i.setTimeout(h,t)};return o.cancel=a,o},rs=function(){};rs.prototype.allowedEvents_={};rs.prototype.on=function(r,e){var t=this.addEventListener;this.addEventListener=function(){},go(this,r,e),this.addEventListener=t};rs.prototype.addEventListener=rs.prototype.on;rs.prototype.off=function(r,e){$s(this,r,e)};rs.prototype.removeEventListener=rs.prototype.off;rs.prototype.one=function(r,e){var t=this.addEventListener;this.addEventListener=function(){},fS(this,r,e),this.addEventListener=t};rs.prototype.any=function(r,e){var t=this.addEventListener;this.addEventListener=function(){},O$(this,r,e),this.addEventListener=t};rs.prototype.trigger=function(r){var e=r.type||r;typeof r=="string"&&(r={type:e}),r=hS(r),this.allowedEvents_[e]&&this["on"+e]&&this["on"+e](r),lm(this,r)};rs.prototype.dispatchEvent=rs.prototype.trigger;var n0;rs.prototype.queueTrigger=function(r){var e=this;n0||(n0=new Map);var t=r.type||r,n=n0.get(this);n||(n=new Map,n0.set(this,n));var i=n.get(t);n.delete(t),X.clearTimeout(i);var s=X.setTimeout(function(){n.delete(t),n.size===0&&(n=null,n0.delete(e)),e.trigger(r)},0);n.set(t,s)};var pS=function(e){return typeof e.name=="function"?e.name():typeof e.name=="string"?e.name:e.name_?e.name_:e.constructor&&e.constructor.name?e.constructor.name:typeof e},xc=function(e){return e instanceof rs||!!e.eventBusEl_&&["on","one","off","trigger"].every(function(t){return typeof e[t]=="function"})},Ume=function(e,t){xc(e)?t():(e.eventedCallbacks||(e.eventedCallbacks=[]),e.eventedCallbacks.push(t))},gE=function(e){return typeof e=="string"&&/\S/.test(e)||Array.isArray(e)&&!!e.length},Rx=function(e,t,n){if(!e||!e.nodeName&&!xc(e))throw new Error("Invalid target for "+pS(t)+"#"+n+"; must be a DOM node or evented object.")},M$=function(e,t,n){if(!gE(e))throw new Error("Invalid event type for "+pS(t)+"#"+n+"; must be a non-empty string or array.")},F$=function(e,t,n){if(typeof e!="function")throw new Error("Invalid listener for "+pS(t)+"#"+n+"; must be a function.")},hC=function(e,t,n){var i=t.length<3||t[0]===e||t[0]===e.eventBusEl_,s,a,o;return i?(s=e.eventBusEl_,t.length>=3&&t.shift(),a=t[0],o=t[1]):(s=t[0],a=t[1],o=t[2]),Rx(s,e,n),M$(a,e,n),F$(o,e,n),o=Wn(e,o),{isTargetingSelf:i,target:s,type:a,listener:o}},hh=function(e,t,n,i){Rx(e,e,t),e.nodeName?Bme[t](e,n,i):e[t](n,i)},$me={on:function(){for(var e=this,t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];var s=hC(this,n,"on"),a=s.isTargetingSelf,o=s.target,l=s.type,u=s.listener;if(hh(o,"on",l,u),!a){var c=function(){return e.off(o,l,u)};c.guid=u.guid;var h=function(){return e.off("dispose",c)};h.guid=u.guid,hh(this,"on","dispose",c),hh(o,"on","dispose",h)}},one:function(){for(var e=this,t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];var s=hC(this,n,"one"),a=s.isTargetingSelf,o=s.target,l=s.type,u=s.listener;if(a)hh(o,"one",l,u);else{var c=function h(){e.off(o,l,h);for(var m=arguments.length,g=new Array(m),y=0;y<m;y++)g[y]=arguments[y];u.apply(null,g)};c.guid=u.guid,hh(o,"one",l,c)}},any:function(){for(var e=this,t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];var s=hC(this,n,"any"),a=s.isTargetingSelf,o=s.target,l=s.type,u=s.listener;if(a)hh(o,"any",l,u);else{var c=function h(){e.off(o,l,h);for(var m=arguments.length,g=new Array(m),y=0;y<m;y++)g[y]=arguments[y];u.apply(null,g)};c.guid=u.guid,hh(o,"any",l,c)}},off:function(e,t,n){if(!e||gE(e))$s(this.eventBusEl_,e,t);else{var i=e,s=t;Rx(i,this,"off"),M$(s,this,"off"),F$(n,this,"off"),n=Wn(this,n),this.off("dispose",n),i.nodeName?($s(i,s,n),$s(i,"dispose",n)):xc(i)&&(i.off(s,n),i.off("dispose",n))}},trigger:function(e,t){Rx(this.eventBusEl_,this,"trigger");var n=e&&typeof e!="string"?e.type:e;if(!gE(n)){var i="Invalid event type for "+pS(this)+"#trigger; must be a non-empty string or object with a type key that has a non-empty value.";if(e)(this.log||Gr).error(i);else throw new Error(i)}return lm(this.eventBusEl_,e,t)}};function Vk(r,e){e===void 0&&(e={});var t=e,n=t.eventBusKey;if(n){if(!r[n].nodeName)throw new Error('The eventBusKey "'+n+'" does not refer to an element.');r.eventBusEl_=r[n]}else r.eventBusEl_=cn("span",{className:"vjs-event-bus"});return li(r,$me),r.eventedCallbacks&&r.eventedCallbacks.forEach(function(i){i()}),r.on("dispose",function(){r.off(),[r,r.el_,r.eventBusEl_].forEach(function(i){i&&ia.has(i)&&ia.delete(i)}),X.setTimeout(function(){r.eventBusEl_=null},0)}),r}var jme={state:{},setState:function(e){var t=this;typeof e=="function"&&(e=e());var n;return vp(e,function(i,s){t.state[s]!==i&&(n=n||{},n[s]={from:t.state[s],to:i}),t.state[s]=i}),n&&xc(this)&&this.trigger({changes:n,type:"statechanged"}),n}};function B$(r,e){return li(r,jme),r.state=li({},r.state,e),typeof r.handleStateChanged=="function"&&xc(r)&&r.on("statechanged",r.handleStateChanged),r}var E_=function(e){return typeof e!="string"?e:e.replace(/./,function(t){return t.toLowerCase()})},yi=function(e){return typeof e!="string"?e:e.replace(/./,function(t){return t.toUpperCase()})},zme=function(e,t){return yi(e)===yi(t)};function Vn(){for(var r={},e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.forEach(function(i){i&&vp(i,function(s,a){if(!sg(s)){r[a]=s;return}sg(r[a])||(r[a]={}),r[a]=Vn(r[a],s)})}),r}var Hme=(function(){function r(){this.map_={}}var e=r.prototype;return e.has=function(n){return n in this.map_},e.delete=function(n){var i=this.has(n);return delete this.map_[n],i},e.set=function(n,i){return this.map_[n]=i,this},e.forEach=function(n,i){for(var s in this.map_)n.call(i,this.map_[s],s,this)},r})(),Vme=X.Map?X.Map:Hme,Wme=(function(){function r(){this.set_={}}var e=r.prototype;return e.has=function(n){return n in this.set_},e.delete=function(n){var i=this.has(n);return delete this.set_[n],i},e.add=function(n){return this.set_[n]=1,this},e.forEach=function(n,i){for(var s in this.set_)n.call(i,s,s,this)},r})(),fC=X.Set?X.Set:Wme,Ct=(function(){function r(t,n,i){var s=this;if(!t&&this.play?this.player_=t=this:this.player_=t,this.isDisposed_=!1,this.parentComponent_=null,this.options_=Vn({},this.options_),n=this.options_=Vn(this.options_,n),this.id_=n.id||n.el&&n.el.id,!this.id_){var a=t&&t.id&&t.id()||"no_player";this.id_=a+"_component_"+Ic()}this.name_=n.name||null,n.el?this.el_=n.el:n.createEl!==!1&&(this.el_=this.createEl()),n.className&&this.el_&&n.className.split(" ").forEach(function(o){return s.addClass(o)}),n.evented!==!1&&(Vk(this,{eventBusKey:this.el_?"el_":null}),this.handleLanguagechange=this.handleLanguagechange.bind(this),this.on(this.player_,"languagechange",this.handleLanguagechange)),B$(this,this.constructor.defaultState),this.children_=[],this.childIndex_={},this.childNameIndex_={},this.setTimeoutIds_=new fC,this.setIntervalIds_=new fC,this.rafIds_=new fC,this.namedRafs_=new Vme,this.clearingTimersOnDispose_=!1,n.initChildren!==!1&&this.initChildren(),this.ready(i),n.reportTouchActivity!==!1&&this.enableTouchActivity()}var e=r.prototype;return e.dispose=function(n){if(n===void 0&&(n={}),!this.isDisposed_){if(this.readyQueue_&&(this.readyQueue_.length=0),this.trigger({type:"dispose",bubbles:!1}),this.isDisposed_=!0,this.children_)for(var i=this.children_.length-1;i>=0;i--)this.children_[i].dispose&&this.children_[i].dispose();this.children_=null,this.childIndex_=null,this.childNameIndex_=null,this.parentComponent_=null,this.el_&&(this.el_.parentNode&&(n.restoreEl?this.el_.parentNode.replaceChild(n.restoreEl,this.el_):this.el_.parentNode.removeChild(this.el_)),this.el_=null),this.player_=null}},e.isDisposed=function(){return!!this.isDisposed_},e.player=function(){return this.player_},e.options=function(n){return n?(this.options_=Vn(this.options_,n),this.options_):this.options_},e.el=function(){return this.el_},e.createEl=function(n,i,s){return cn(n,i,s)},e.localize=function(n,i,s){s===void 0&&(s=n);var a=this.player_.language&&this.player_.language(),o=this.player_.languages&&this.player_.languages(),l=o&&o[a],u=a&&a.split("-")[0],c=o&&o[u],h=s;return l&&l[n]?h=l[n]:c&&c[n]&&(h=c[n]),i&&(h=h.replace(/\{(\d+)\}/g,function(m,g){var y=i[g-1],v=y;return typeof y>"u"&&(v=m),v})),h},e.handleLanguagechange=function(){},e.contentEl=function(){return this.contentEl_||this.el_},e.id=function(){return this.id_},e.name=function(){return this.name_},e.children=function(){return this.children_},e.getChildById=function(n){return this.childIndex_[n]},e.getChild=function(n){if(n)return this.childNameIndex_[n]},e.getDescendant=function(){for(var n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];i=i.reduce(function(l,u){return l.concat(u)},[]);for(var a=this,o=0;o<i.length;o++)if(a=a.getChild(i[o]),!a||!a.getChild)return;return a},e.addChild=function(n,i,s){i===void 0&&(i={}),s===void 0&&(s=this.children_.length);var a,o;if(typeof n=="string"){o=yi(n);var l=i.componentClass||o;i.name=o;var u=r.getComponent(l);if(!u)throw new Error("Component "+l+" does not exist");if(typeof u!="function")return null;a=new u(this.player_||this,i)}else a=n;if(a.parentComponent_&&a.parentComponent_.removeChild(a),this.children_.splice(s,0,a),a.parentComponent_=this,typeof a.id=="function"&&(this.childIndex_[a.id()]=a),o=o||a.name&&yi(a.name()),o&&(this.childNameIndex_[o]=a,this.childNameIndex_[E_(o)]=a),typeof a.el=="function"&&a.el()){var c=null;this.children_[s+1]&&(this.children_[s+1].el_?c=this.children_[s+1].el_:om(this.children_[s+1])&&(c=this.children_[s+1])),this.contentEl().insertBefore(a.el(),c)}return a},e.removeChild=function(n){if(typeof n=="string"&&(n=this.getChild(n)),!(!n||!this.children_)){for(var i=!1,s=this.children_.length-1;s>=0;s--)if(this.children_[s]===n){i=!0,this.children_.splice(s,1);break}if(i){n.parentComponent_=null,this.childIndex_[n.id()]=null,this.childNameIndex_[yi(n.name())]=null,this.childNameIndex_[E_(n.name())]=null;var a=n.el();a&&a.parentNode===this.contentEl()&&this.contentEl().removeChild(n.el())}}},e.initChildren=function(){var n=this,i=this.options_.children;if(i){var s=this.options_,a=function(c){var h=c.name,m=c.opts;if(s[h]!==void 0&&(m=s[h]),m!==!1){m===!0&&(m={}),m.playerOptions=n.options_.playerOptions;var g=n.addChild(h,m);g&&(n[h]=g)}},o,l=r.getComponent("Tech");Array.isArray(i)?o=i:o=Object.keys(i),o.concat(Object.keys(this.options_).filter(function(u){return!o.some(function(c){return typeof c=="string"?u===c:u===c.name})})).map(function(u){var c,h;return typeof u=="string"?(c=u,h=i[c]||n.options_[c]||{}):(c=u.name,h=u),{name:c,opts:h}}).filter(function(u){var c=r.getComponent(u.opts.componentClass||yi(u.name));return c&&!l.isTech(c)}).forEach(a)}},e.buildCSSClass=function(){return""},e.ready=function(n,i){if(i===void 0&&(i=!1),!!n){if(!this.isReady_){this.readyQueue_=this.readyQueue_||[],this.readyQueue_.push(n);return}i?n.call(this):this.setTimeout(n,1)}},e.triggerReady=function(){this.isReady_=!0,this.setTimeout(function(){var n=this.readyQueue_;this.readyQueue_=[],n&&n.length>0&&n.forEach(function(i){i.call(this)},this),this.trigger("ready")},1)},e.$=function(n,i){return Od(n,i||this.contentEl())},e.$$=function(n,i){return A$(n,i||this.contentEl())},e.hasClass=function(n){return Uh(this.el_,n)},e.addClass=function(n){_c(this.el_,n)},e.removeClass=function(n){zg(this.el_,n)},e.toggleClass=function(n,i){x$(this.el_,n,i)},e.show=function(){this.removeClass("vjs-hidden")},e.hide=function(){this.addClass("vjs-hidden")},e.lockShowing=function(){this.addClass("vjs-lock-showing")},e.unlockShowing=function(){this.removeClass("vjs-lock-showing")},e.getAttribute=function(n){return S$(this.el_,n)},e.setAttribute=function(n,i){Bp(this.el_,n,i)},e.removeAttribute=function(n){cS(this.el_,n)},e.width=function(n,i){return this.dimension("width",n,i)},e.height=function(n,i){return this.dimension("height",n,i)},e.dimensions=function(n,i){this.width(n,!0),this.height(i)},e.dimension=function(n,i,s){if(i!==void 0){(i===null||i!==i)&&(i=0),(""+i).indexOf("%")!==-1||(""+i).indexOf("px")!==-1?this.el_.style[n]=i:i==="auto"?this.el_.style[n]="":this.el_.style[n]=i+"px",s||this.trigger("componentresize");return}if(!this.el_)return 0;var a=this.el_.style[n],o=a.indexOf("px");return parseInt(o!==-1?a.slice(0,o):this.el_["offset"+yi(n)],10)},e.currentDimension=function(n){var i=0;if(n!=="width"&&n!=="height")throw new Error("currentDimension only accepts width or height value");if(i=ag(this.el_,n),i=parseFloat(i),i===0||isNaN(i)){var s="offset"+yi(n);i=this.el_[s]}return i},e.currentDimensions=function(){return{width:this.currentDimension("width"),height:this.currentDimension("height")}},e.currentWidth=function(){return this.currentDimension("width")},e.currentHeight=function(){return this.currentDimension("height")},e.focus=function(){this.el_.focus()},e.blur=function(){this.el_.blur()},e.handleKeyDown=function(n){this.player_&&(Or.isEventKey(n,"Tab")||n.stopPropagation(),this.player_.handleKeyDown(n))},e.handleKeyPress=function(n){this.handleKeyDown(n)},e.emitTapEvents=function(){var n=0,i=null,s=10,a=200,o;this.on("touchstart",function(u){u.touches.length===1&&(i={pageX:u.touches[0].pageX,pageY:u.touches[0].pageY},n=X.performance.now(),o=!0)}),this.on("touchmove",function(u){if(u.touches.length>1)o=!1;else if(i){var c=u.touches[0].pageX-i.pageX,h=u.touches[0].pageY-i.pageY,m=Math.sqrt(c*c+h*h);m>s&&(o=!1)}});var l=function(){o=!1};this.on("touchleave",l),this.on("touchcancel",l),this.on("touchend",function(u){if(i=null,o===!0){var c=X.performance.now()-n;c<a&&(u.preventDefault(),this.trigger("tap"))}})},e.enableTouchActivity=function(){if(!(!this.player()||!this.player().reportUserActivity)){var n=Wn(this.player(),this.player().reportUserActivity),i;this.on("touchstart",function(){n(),this.clearInterval(i),i=this.setInterval(n,250)});var s=function(o){n(),this.clearInterval(i)};this.on("touchmove",n),this.on("touchend",s),this.on("touchcancel",s)}},e.setTimeout=function(n,i){var s=this,a;return n=Wn(this,n),this.clearTimersOnDispose_(),a=X.setTimeout(function(){s.setTimeoutIds_.has(a)&&s.setTimeoutIds_.delete(a),n()},i),this.setTimeoutIds_.add(a),a},e.clearTimeout=function(n){return this.setTimeoutIds_.has(n)&&(this.setTimeoutIds_.delete(n),X.clearTimeout(n)),n},e.setInterval=function(n,i){n=Wn(this,n),this.clearTimersOnDispose_();var s=X.setInterval(n,i);return this.setIntervalIds_.add(s),s},e.clearInterval=function(n){return this.setIntervalIds_.has(n)&&(this.setIntervalIds_.delete(n),X.clearInterval(n)),n},e.requestAnimationFrame=function(n){var i=this;if(!this.supportsRaf_)return this.setTimeout(n,1e3/60);this.clearTimersOnDispose_();var s;return n=Wn(this,n),s=X.requestAnimationFrame(function(){i.rafIds_.has(s)&&i.rafIds_.delete(s),n()}),this.rafIds_.add(s),s},e.requestNamedAnimationFrame=function(n,i){var s=this;if(!this.namedRafs_.has(n)){this.clearTimersOnDispose_(),i=Wn(this,i);var a=this.requestAnimationFrame(function(){i(),s.namedRafs_.has(n)&&s.namedRafs_.delete(n)});return this.namedRafs_.set(n,a),n}},e.cancelNamedAnimationFrame=function(n){this.namedRafs_.has(n)&&(this.cancelAnimationFrame(this.namedRafs_.get(n)),this.namedRafs_.delete(n))},e.cancelAnimationFrame=function(n){return this.supportsRaf_?(this.rafIds_.has(n)&&(this.rafIds_.delete(n),X.cancelAnimationFrame(n)),n):this.clearTimeout(n)},e.clearTimersOnDispose_=function(){var n=this;this.clearingTimersOnDispose_||(this.clearingTimersOnDispose_=!0,this.one("dispose",function(){[["namedRafs_","cancelNamedAnimationFrame"],["rafIds_","cancelAnimationFrame"],["setTimeoutIds_","clearTimeout"],["setIntervalIds_","clearInterval"]].forEach(function(i){var s=i[0],a=i[1];n[s].forEach(function(o,l){return n[a](l)})}),n.clearingTimersOnDispose_=!1}))},r.registerComponent=function(n,i){if(typeof n!="string"||!n)throw new Error('Illegal component name, "'+n+'"; must be a non-empty string.');var s=r.getComponent("Tech"),a=s&&s.isTech(i),o=r===i||r.prototype.isPrototypeOf(i.prototype);if(a||!o){var l;throw a?l="techs must be registered using Tech.registerTech()":l="must be a Component subclass",new Error('Illegal component, "'+n+'"; '+l+".")}n=yi(n),r.components_||(r.components_={});var u=r.getComponent("Player");if(n==="Player"&&u&&u.players){var c=u.players,h=Object.keys(c);if(c&&h.length>0&&h.map(function(m){return c[m]}).every(Boolean))throw new Error("Can not register Player component after player has been created.")}return r.components_[n]=i,r.components_[E_(n)]=i,i},r.getComponent=function(n){if(!(!n||!r.components_))return r.components_[n]},r})();Ct.prototype.supportsRaf_=typeof X.requestAnimationFrame=="function"&&typeof X.cancelAnimationFrame=="function";Ct.registerComponent("Component",Ct);function qme(r,e,t){if(typeof e!="number"||e<0||e>t)throw new Error("Failed to execute '"+r+"' on 'TimeRanges': The index provided ("+e+") is non-numeric or out of bounds (0-"+t+").")}function x4(r,e,t,n){return qme(r,n,t.length-1),t[n][e]}function pC(r){var e;return r===void 0||r.length===0?e={length:0,start:function(){throw new Error("This TimeRanges object is empty")},end:function(){throw new Error("This TimeRanges object is empty")}}:e={length:r.length,start:x4.bind(null,"start",0,r),end:x4.bind(null,"end",1,r)},X.Symbol&&X.Symbol.iterator&&(e[X.Symbol.iterator]=function(){return(r||[]).values()}),e}function $h(r,e){return Array.isArray(r)?pC(r):r===void 0||e===void 0?pC():pC([[r,e]])}function N$(r,e){var t=0,n,i;if(!e)return 0;(!r||!r.length)&&(r=$h(0,0));for(var s=0;s<r.length;s++)n=r.start(s),i=r.end(s),i>e&&(i=e),t+=i-n;return t/e}function sa(r){if(r instanceof sa)return r;typeof r=="number"?this.code=r:typeof r=="string"?this.message=r:Tc(r)&&(typeof r.code=="number"&&(this.code=r.code),li(this,r)),this.message||(this.message=sa.defaultMessages[this.code]||"")}sa.prototype.code=0;sa.prototype.message="";sa.prototype.status=null;sa.errorTypes=["MEDIA_ERR_CUSTOM","MEDIA_ERR_ABORTED","MEDIA_ERR_NETWORK","MEDIA_ERR_DECODE","MEDIA_ERR_SRC_NOT_SUPPORTED","MEDIA_ERR_ENCRYPTED"];sa.defaultMessages={1:"You aborted the media playback",2:"A network error caused the media download to fail part-way.",3:"The media playback was aborted due to a corruption problem or because the media used features your browser did not support.",4:"The media could not be loaded, either because the server or network failed or because the format is not supported.",5:"The media is encrypted and we do not have the keys to decrypt it."};for(var Of=0;Of<sa.errorTypes.length;Of++)sa[sa.errorTypes[Of]]=Of,sa.prototype[sa.errorTypes[Of]]=Of;function O0(r){return r!=null&&typeof r.then=="function"}function mu(r){O0(r)&&r.then(null,function(e){})}var vE=function(e){var t=["kind","label","language","id","inBandMetadataTrackDispatchType","mode","src"].reduce(function(n,i,s){return e[i]&&(n[i]=e[i]),n},{cues:e.cues&&Array.prototype.map.call(e.cues,function(n){return{startTime:n.startTime,endTime:n.endTime,text:n.text,id:n.id}})});return t},Gme=function(e){var t=e.$$("track"),n=Array.prototype.map.call(t,function(s){return s.track}),i=Array.prototype.map.call(t,function(s){var a=vE(s.track);return s.src&&(a.src=s.src),a});return i.concat(Array.prototype.filter.call(e.textTracks(),function(s){return n.indexOf(s)===-1}).map(vE))},Kme=function(e,t){return e.forEach(function(n){var i=t.addRemoteTextTrack(n).track;!n.src&&n.cues&&n.cues.forEach(function(s){return i.addCue(s)})}),t.textTracks()},b4={textTracksToJson:Gme,jsonToTextTracks:Kme,trackToJson_:vE},mC="vjs-modal-dialog",um=(function(r){$t(e,r);function e(n,i){var s;return s=r.call(this,n,i)||this,s.handleKeyDown_=function(a){return s.handleKeyDown(a)},s.close_=function(a){return s.close(a)},s.opened_=s.hasBeenOpened_=s.hasBeenFilled_=!1,s.closeable(!s.options_.uncloseable),s.content(s.options_.content),s.contentEl_=cn("div",{className:mC+"-content"},{role:"document"}),s.descEl_=cn("p",{className:mC+"-description vjs-control-text",id:s.el().getAttribute("aria-describedby")}),tf(s.descEl_,s.description()),s.el_.appendChild(s.descEl_),s.el_.appendChild(s.contentEl_),s}var t=e.prototype;return t.createEl=function(){return r.prototype.createEl.call(this,"div",{className:this.buildCSSClass(),tabIndex:-1},{"aria-describedby":this.id()+"_description","aria-hidden":"true","aria-label":this.label(),role:"dialog"})},t.dispose=function(){this.contentEl_=null,this.descEl_=null,this.previouslyActiveEl_=null,r.prototype.dispose.call(this)},t.buildCSSClass=function(){return mC+" vjs-hidden "+r.prototype.buildCSSClass.call(this)},t.label=function(){return this.localize(this.options_.label||"Modal Window")},t.description=function(){var i=this.options_.description||this.localize("This is a modal window.");return this.closeable()&&(i+=" "+this.localize("This modal can be closed by pressing the Escape key or activating the close button.")),i},t.open=function(){if(!this.opened_){var i=this.player();this.trigger("beforemodalopen"),this.opened_=!0,(this.options_.fillAlways||!this.hasBeenOpened_&&!this.hasBeenFilled_)&&this.fill(),this.wasPlaying_=!i.paused(),this.options_.pauseOnOpen&&this.wasPlaying_&&i.pause(),this.on("keydown",this.handleKeyDown_),this.hadControls_=i.controls(),i.controls(!1),this.show(),this.conditionalFocus_(),this.el().setAttribute("aria-hidden","false"),this.trigger("modalopen"),this.hasBeenOpened_=!0}},t.opened=function(i){return typeof i=="boolean"&&this[i?"open":"close"](),this.opened_},t.close=function(){if(this.opened_){var i=this.player();this.trigger("beforemodalclose"),this.opened_=!1,this.wasPlaying_&&this.options_.pauseOnOpen&&i.play(),this.off("keydown",this.handleKeyDown_),this.hadControls_&&i.controls(!0),this.hide(),this.el().setAttribute("aria-hidden","true"),this.trigger("modalclose"),this.conditionalBlur_(),this.options_.temporary&&this.dispose()}},t.closeable=function(i){if(typeof i=="boolean"){var s=this.closeable_=!!i,a=this.getChild("closeButton");if(s&&!a){var o=this.contentEl_;this.contentEl_=this.el_,a=this.addChild("closeButton",{controlText:"Close Modal Dialog"}),this.contentEl_=o,this.on(a,"close",this.close_)}!s&&a&&(this.off(a,"close",this.close_),this.removeChild(a),a.dispose())}return this.closeable_},t.fill=function(){this.fillWith(this.content())},t.fillWith=function(i){var s=this.contentEl(),a=s.parentNode,o=s.nextSibling;this.trigger("beforemodalfill"),this.hasBeenFilled_=!0,a.removeChild(s),this.empty(),k$(s,i),this.trigger("modalfill"),o?a.insertBefore(s,o):a.appendChild(s);var l=this.getChild("closeButton");l&&a.appendChild(l.el_)},t.empty=function(){this.trigger("beforemodalempty"),jk(this.contentEl()),this.trigger("modalempty")},t.content=function(i){return typeof i<"u"&&(this.content_=i),this.content_},t.conditionalFocus_=function(){var i=Fe.activeElement,s=this.player_.el_;this.previouslyActiveEl_=null,(s.contains(i)||s===i)&&(this.previouslyActiveEl_=i,this.focus())},t.conditionalBlur_=function(){this.previouslyActiveEl_&&(this.previouslyActiveEl_.focus(),this.previouslyActiveEl_=null)},t.handleKeyDown=function(i){if(i.stopPropagation(),Or.isEventKey(i,"Escape")&&this.closeable()){i.preventDefault(),this.close();return}if(Or.isEventKey(i,"Tab")){for(var s=this.focusableEls_(),a=this.el_.querySelector(":focus"),o,l=0;l<s.length;l++)if(a===s[l]){o=l;break}Fe.activeElement===this.el_&&(o=0),i.shiftKey&&o===0?(s[s.length-1].focus(),i.preventDefault()):!i.shiftKey&&o===s.length-1&&(s[0].focus(),i.preventDefault())}},t.focusableEls_=function(){var i=this.el_.querySelectorAll("*");return Array.prototype.filter.call(i,function(s){return(s instanceof X.HTMLAnchorElement||s instanceof X.HTMLAreaElement)&&s.hasAttribute("href")||(s instanceof X.HTMLInputElement||s instanceof X.HTMLSelectElement||s instanceof X.HTMLTextAreaElement||s instanceof X.HTMLButtonElement)&&!s.hasAttribute("disabled")||s instanceof X.HTMLIFrameElement||s instanceof X.HTMLObjectElement||s instanceof X.HTMLEmbedElement||s.hasAttribute("tabindex")&&s.getAttribute("tabindex")!==-1||s.hasAttribute("contenteditable")})},e})(Ct);um.prototype.options_={pauseOnOpen:!0,temporary:!0};Ct.registerComponent("ModalDialog",um);var Up=(function(r){$t(e,r);function e(n){var i;n===void 0&&(n=[]),i=r.call(this)||this,i.tracks_=[],Object.defineProperty(He(i),"length",{get:function(){return this.tracks_.length}});for(var s=0;s<n.length;s++)i.addTrack(n[s]);return i}var t=e.prototype;return t.addTrack=function(i){var s=this,a=this.tracks_.length;""+a in this||Object.defineProperty(this,a,{get:function(){return this.tracks_[a]}}),this.tracks_.indexOf(i)===-1&&(this.tracks_.push(i),this.trigger({track:i,type:"addtrack",target:this})),i.labelchange_=function(){s.trigger({track:i,type:"labelchange",target:s})},xc(i)&&i.addEventListener("labelchange",i.labelchange_)},t.removeTrack=function(i){for(var s,a=0,o=this.length;a<o;a++)if(this[a]===i){s=this[a],s.off&&s.off(),this.tracks_.splice(a,1);break}s&&this.trigger({track:s,type:"removetrack",target:this})},t.getTrackById=function(i){for(var s=null,a=0,o=this.length;a<o;a++){var l=this[a];if(l.id===i){s=l;break}}return s},e})(rs);Up.prototype.allowedEvents_={change:"change",addtrack:"addtrack",removetrack:"removetrack",labelchange:"labelchange"};for(var Xme in Up.prototype.allowedEvents_)Up.prototype["on"+Xme]=null;var gC=function(e,t){for(var n=0;n<e.length;n++)!Object.keys(e[n]).length||t.id===e[n].id||(e[n].enabled=!1)},Yme=(function(r){$t(e,r);function e(n){var i;n===void 0&&(n=[]);for(var s=n.length-1;s>=0;s--)if(n[s].enabled){gC(n,n[s]);break}return i=r.call(this,n)||this,i.changing_=!1,i}var t=e.prototype;return t.addTrack=function(i){var s=this;i.enabled&&gC(this,i),r.prototype.addTrack.call(this,i),i.addEventListener&&(i.enabledChange_=function(){s.changing_||(s.changing_=!0,gC(s,i),s.changing_=!1,s.trigger("change"))},i.addEventListener("enabledchange",i.enabledChange_))},t.removeTrack=function(i){r.prototype.removeTrack.call(this,i),i.removeEventListener&&i.enabledChange_&&(i.removeEventListener("enabledchange",i.enabledChange_),i.enabledChange_=null)},e})(Up),vC=function(e,t){for(var n=0;n<e.length;n++)!Object.keys(e[n]).length||t.id===e[n].id||(e[n].selected=!1)},Qme=(function(r){$t(e,r);function e(n){var i;n===void 0&&(n=[]);for(var s=n.length-1;s>=0;s--)if(n[s].selected){vC(n,n[s]);break}return i=r.call(this,n)||this,i.changing_=!1,Object.defineProperty(He(i),"selectedIndex",{get:function(){for(var o=0;o<this.length;o++)if(this[o].selected)return o;return-1},set:function(){}}),i}var t=e.prototype;return t.addTrack=function(i){var s=this;i.selected&&vC(this,i),r.prototype.addTrack.call(this,i),i.addEventListener&&(i.selectedChange_=function(){s.changing_||(s.changing_=!0,vC(s,i),s.changing_=!1,s.trigger("change"))},i.addEventListener("selectedchange",i.selectedChange_))},t.removeTrack=function(i){r.prototype.removeTrack.call(this,i),i.removeEventListener&&i.selectedChange_&&(i.removeEventListener("selectedchange",i.selectedChange_),i.selectedChange_=null)},e})(Up),U$=(function(r){$t(e,r);function e(){return r.apply(this,arguments)||this}var t=e.prototype;return t.addTrack=function(i){var s=this;r.prototype.addTrack.call(this,i),this.queueChange_||(this.queueChange_=function(){return s.queueTrigger("change")}),this.triggerSelectedlanguagechange||(this.triggerSelectedlanguagechange_=function(){return s.trigger("selectedlanguagechange")}),i.addEventListener("modechange",this.queueChange_);var a=["metadata","chapters"];a.indexOf(i.kind)===-1&&i.addEventListener("modechange",this.triggerSelectedlanguagechange_)},t.removeTrack=function(i){r.prototype.removeTrack.call(this,i),i.removeEventListener&&(this.queueChange_&&i.removeEventListener("modechange",this.queueChange_),this.selectedlanguagechange_&&i.removeEventListener("modechange",this.triggerSelectedlanguagechange_))},e})(Up),Jme=(function(){function r(t){t===void 0&&(t=[]),this.trackElements_=[],Object.defineProperty(this,"length",{get:function(){return this.trackElements_.length}});for(var n=0,i=t.length;n<i;n++)this.addTrackElement_(t[n])}var e=r.prototype;return e.addTrackElement_=function(n){var i=this.trackElements_.length;""+i in this||Object.defineProperty(this,i,{get:function(){return this.trackElements_[i]}}),this.trackElements_.indexOf(n)===-1&&this.trackElements_.push(n)},e.getTrackElementByTrack_=function(n){for(var i,s=0,a=this.trackElements_.length;s<a;s++)if(n===this.trackElements_[s].track){i=this.trackElements_[s];break}return i},e.removeTrackElement_=function(n){for(var i=0,s=this.trackElements_.length;i<s;i++)if(n===this.trackElements_[i]){this.trackElements_[i].track&&typeof this.trackElements_[i].track.off=="function"&&this.trackElements_[i].track.off(),typeof this.trackElements_[i].off=="function"&&this.trackElements_[i].off(),this.trackElements_.splice(i,1);break}},r})(),S4=(function(){function r(t){r.prototype.setCues_.call(this,t),Object.defineProperty(this,"length",{get:function(){return this.length_}})}var e=r.prototype;return e.setCues_=function(n){var i=this.length||0,s=0,a=n.length;this.cues_=n,this.length_=n.length;var o=function(u){""+u in this||Object.defineProperty(this,""+u,{get:function(){return this.cues_[u]}})};if(i<a)for(s=i;s<a;s++)o.call(this,s)},e.getCueById=function(n){for(var i=null,s=0,a=this.length;s<a;s++){var o=this[s];if(o.id===n){i=o;break}}return i},r})(),Zme={alternative:"alternative",captions:"captions",main:"main",sign:"sign",subtitles:"subtitles",commentary:"commentary"},e0e={alternative:"alternative",descriptions:"descriptions",main:"main","main-desc":"main-desc",translation:"translation",commentary:"commentary"},t0e={subtitles:"subtitles",captions:"captions",descriptions:"descriptions",chapters:"chapters",metadata:"metadata"},T4={disabled:"disabled",hidden:"hidden",showing:"showing"},Wk=(function(r){$t(e,r);function e(t){var n;t===void 0&&(t={}),n=r.call(this)||this;var i={id:t.id||"vjs_track_"+Ic(),kind:t.kind||"",language:t.language||""},s=t.label||"",a=function(u){Object.defineProperty(He(n),u,{get:function(){return i[u]},set:function(){}})};for(var o in i)a(o);return Object.defineProperty(He(n),"label",{get:function(){return s},set:function(u){u!==s&&(s=u,this.trigger("labelchange"))}}),n}return e})(rs),qk=function(e){var t=["protocol","hostname","port","pathname","search","hash","host"],n=Fe.createElement("a");n.href=e;for(var i={},s=0;s<t.length;s++)i[t[s]]=n[t[s]];return i.protocol==="http:"&&(i.host=i.host.replace(/:80$/,"")),i.protocol==="https:"&&(i.host=i.host.replace(/:443$/,"")),i.protocol||(i.protocol=X.location.protocol),i.host||(i.host=X.location.host),i},$$=function(e){if(!e.match(/^https?:\/\//)){var t=Fe.createElement("a");t.href=e,e=t.href}return e},Gk=function(e){if(typeof e=="string"){var t=/^(\/?)([\s\S]*?)((?:\.{1,2}|[^\/]+?)(\.([^\.\/\?]+)))(?:[\/]*|[\?].*)$/,n=t.exec(e);if(n)return n.pop().toLowerCase()}return""},mS=function(e,t){t===void 0&&(t=X.location);var n=qk(e),i=n.protocol===":"?t.protocol:n.protocol,s=i+n.host!==t.protocol+t.host;return s},r0e=Object.freeze({__proto__:null,parseUrl:qk,getAbsoluteURL:$$,getFileExtension:Gk,isCrossOrigin:mS}),C4=function(e,t){var n=new X.WebVTT.Parser(X,X.vttjs,X.WebVTT.StringDecoder()),i=[];n.oncue=function(s){t.addCue(s)},n.onparsingerror=function(s){i.push(s)},n.onflush=function(){t.trigger({type:"loadeddata",target:t})},n.parse(e),i.length>0&&(X.console&&X.console.groupCollapsed&&X.console.groupCollapsed("Text Track parsing errors for "+t.src),i.forEach(function(s){return Gr.error(s)}),X.console&&X.console.groupEnd&&X.console.groupEnd()),n.flush()},w4=function(e,t){var n={uri:e},i=mS(e);i&&(n.cors=i);var s=t.tech_.crossOrigin()==="use-credentials";s&&(n.withCredentials=s),WU(n,Wn(this,function(a,o,l){if(a)return Gr.error(a,o);t.loaded_=!0,typeof X.WebVTT!="function"?t.tech_&&t.tech_.any(["vttjsloaded","vttjserror"],function(u){if(u.type==="vttjserror"){Gr.error("vttjs failed to load, stopping trying to process "+t.src);return}return C4(l,t)}):C4(l,t)}))},Hg=(function(r){$t(e,r);function e(n){var i;if(n===void 0&&(n={}),!n.tech)throw new Error("A tech was not provided.");var s=Vn(n,{kind:t0e[n.kind]||"subtitles",language:n.language||n.srclang||""}),a=T4[s.mode]||"disabled",o=s.default;(s.kind==="metadata"||s.kind==="chapters")&&(a="hidden"),i=r.call(this,s)||this,i.tech_=s.tech,i.cues_=[],i.activeCues_=[],i.preload_=i.tech_.preloadTextTracks!==!1;var l=new S4(i.cues_),u=new S4(i.activeCues_),c=!1;i.timeupdateHandler=Wn(He(i),function(m){if(m===void 0&&(m={}),!this.tech_.isDisposed()){if(!this.tech_.isReady_){m.type!=="timeupdate"&&(this.rvf_=this.tech_.requestVideoFrameCallback(this.timeupdateHandler));return}this.activeCues=this.activeCues,c&&(this.trigger("cuechange"),c=!1),m.type!=="timeupdate"&&(this.rvf_=this.tech_.requestVideoFrameCallback(this.timeupdateHandler))}});var h=function(){i.stopTracking()};return i.tech_.one("dispose",h),a!=="disabled"&&i.startTracking(),Object.defineProperties(He(i),{default:{get:function(){return o},set:function(){}},mode:{get:function(){return a},set:function(g){T4[g]&&a!==g&&(a=g,!this.preload_&&a!=="disabled"&&this.cues.length===0&&w4(this.src,this),this.stopTracking(),a!=="disabled"&&this.startTracking(),this.trigger("modechange"))}},cues:{get:function(){return this.loaded_?l:null},set:function(){}},activeCues:{get:function(){if(!this.loaded_)return null;if(this.cues.length===0)return u;for(var g=this.tech_.currentTime(),y=[],v=0,x=this.cues.length;v<x;v++){var w=this.cues[v];(w.startTime<=g&&w.endTime>=g||w.startTime===w.endTime&&w.startTime<=g&&w.startTime+.5>=g)&&y.push(w)}if(c=!1,y.length!==this.activeCues_.length)c=!0;else for(var E=0;E<y.length;E++)this.activeCues_.indexOf(y[E])===-1&&(c=!0);return this.activeCues_=y,u.setCues_(this.activeCues_),u},set:function(){}}}),s.src?(i.src=s.src,i.preload_||(i.loaded_=!0),(i.preload_||s.kind!=="subtitles"&&s.kind!=="captions")&&w4(i.src,He(i))):i.loaded_=!0,i}var t=e.prototype;return t.startTracking=function(){this.rvf_=this.tech_.requestVideoFrameCallback(this.timeupdateHandler),this.tech_.on("timeupdate",this.timeupdateHandler)},t.stopTracking=function(){this.rvf_&&(this.tech_.cancelVideoFrameCallback(this.rvf_),this.rvf_=void 0),this.tech_.off("timeupdate",this.timeupdateHandler)},t.addCue=function(i){var s=i;if(s.constructor&&s.constructor.name!=="VTTCue"){s=new X.vttjs.VTTCue(i.startTime,i.endTime,i.text);for(var a in i)a in s||(s[a]=i[a]);s.id=i.id,s.originalCue_=i}for(var o=this.tech_.textTracks(),l=0;l<o.length;l++)o[l]!==this&&o[l].removeCue(s);this.cues_.push(s),this.cues.setCues_(this.cues_)},t.removeCue=function(i){for(var s=this.cues_.length;s--;){var a=this.cues_[s];if(a===i||a.originalCue_&&a.originalCue_===i){this.cues_.splice(s,1),this.cues.setCues_(this.cues_);break}}},e})(Wk);Hg.prototype.allowedEvents_={cuechange:"cuechange"};var j$=(function(r){$t(e,r);function e(t){var n;t===void 0&&(t={});var i=Vn(t,{kind:e0e[t.kind]||""});n=r.call(this,i)||this;var s=!1;return Object.defineProperty(He(n),"enabled",{get:function(){return s},set:function(o){typeof o!="boolean"||o===s||(s=o,this.trigger("enabledchange"))}}),i.enabled&&(n.enabled=i.enabled),n.loaded_=!0,n}return e})(Wk),z$=(function(r){$t(e,r);function e(t){var n;t===void 0&&(t={});var i=Vn(t,{kind:Zme[t.kind]||""});n=r.call(this,i)||this;var s=!1;return Object.defineProperty(He(n),"selected",{get:function(){return s},set:function(o){typeof o!="boolean"||o===s||(s=o,this.trigger("selectedchange"))}}),i.selected&&(n.selected=i.selected),n}return e})(Wk),H$=0,n0e=1,V$=2,i0e=3,cm=(function(r){$t(e,r);function e(t){var n;t===void 0&&(t={}),n=r.call(this)||this;var i,s=new Hg(t);return n.kind=s.kind,n.src=s.src,n.srclang=s.language,n.label=s.label,n.default=s.default,Object.defineProperties(He(n),{readyState:{get:function(){return i}},track:{get:function(){return s}}}),i=H$,s.addEventListener("loadeddata",function(){i=V$,n.trigger({type:"load",target:He(n)})}),n}return e})(rs);cm.prototype.allowedEvents_={load:"load"};cm.NONE=H$;cm.LOADING=n0e;cm.LOADED=V$;cm.ERROR=i0e;var qo={audio:{ListClass:Yme,TrackClass:j$,capitalName:"Audio"},video:{ListClass:Qme,TrackClass:z$,capitalName:"Video"},text:{ListClass:U$,TrackClass:Hg,capitalName:"Text"}};Object.keys(qo).forEach(function(r){qo[r].getterName=r+"Tracks",qo[r].privateName=r+"Tracks_"});var $p={remoteText:{ListClass:U$,TrackClass:Hg,capitalName:"RemoteText",getterName:"remoteTextTracks",privateName:"remoteTextTracks_"},remoteTextEl:{ListClass:Jme,TrackClass:cm,capitalName:"RemoteTextTrackEls",getterName:"remoteTextTrackEls",privateName:"remoteTextTrackEls_"}},ea=tr({},qo,$p);$p.names=Object.keys($p);qo.names=Object.keys(qo);ea.names=[].concat($p.names).concat(qo.names);function s0e(r,e,t,n,i){i===void 0&&(i={});var s=r.textTracks();i.kind=e,t&&(i.label=t),n&&(i.language=n),i.tech=r;var a=new ea.text.TrackClass(i);return s.addTrack(a),a}var Un=(function(r){$t(e,r);function e(n,i){var s;return n===void 0&&(n={}),i===void 0&&(i=function(){}),n.reportTouchActivity=!1,s=r.call(this,null,n,i)||this,s.onDurationChange_=function(a){return s.onDurationChange(a)},s.trackProgress_=function(a){return s.trackProgress(a)},s.trackCurrentTime_=function(a){return s.trackCurrentTime(a)},s.stopTrackingCurrentTime_=function(a){return s.stopTrackingCurrentTime(a)},s.disposeSourceHandler_=function(a){return s.disposeSourceHandler(a)},s.queuedHanders_=new Set,s.hasStarted_=!1,s.on("playing",function(){this.hasStarted_=!0}),s.on("loadstart",function(){this.hasStarted_=!1}),ea.names.forEach(function(a){var o=ea[a];n&&n[o.getterName]&&(s[o.privateName]=n[o.getterName])}),s.featuresProgressEvents||s.manualProgressOn(),s.featuresTimeupdateEvents||s.manualTimeUpdatesOn(),["Text","Audio","Video"].forEach(function(a){n["native"+a+"Tracks"]===!1&&(s["featuresNative"+a+"Tracks"]=!1)}),n.nativeCaptions===!1||n.nativeTextTracks===!1?s.featuresNativeTextTracks=!1:(n.nativeCaptions===!0||n.nativeTextTracks===!0)&&(s.featuresNativeTextTracks=!0),s.featuresNativeTextTracks||s.emulateTextTracks(),s.preloadTextTracks=n.preloadTextTracks!==!1,s.autoRemoteTextTracks_=new ea.text.ListClass,s.initTrackListeners(),n.nativeControlsForTouch||s.emitTapEvents(),s.constructor&&(s.name_=s.constructor.name||"Unknown Tech"),s}var t=e.prototype;return t.triggerSourceset=function(i){var s=this;this.isReady_||this.one("ready",function(){return s.setTimeout(function(){return s.triggerSourceset(i)},1)}),this.trigger({src:i,type:"sourceset"})},t.manualProgressOn=function(){this.on("durationchange",this.onDurationChange_),this.manualProgress=!0,this.one("ready",this.trackProgress_)},t.manualProgressOff=function(){this.manualProgress=!1,this.stopTrackingProgress(),this.off("durationchange",this.onDurationChange_)},t.trackProgress=function(i){this.stopTrackingProgress(),this.progressInterval=this.setInterval(Wn(this,function(){var s=this.bufferedPercent();this.bufferedPercent_!==s&&this.trigger("progress"),this.bufferedPercent_=s,s===1&&this.stopTrackingProgress()}),500)},t.onDurationChange=function(i){this.duration_=this.duration()},t.buffered=function(){return $h(0,0)},t.bufferedPercent=function(){return N$(this.buffered(),this.duration_)},t.stopTrackingProgress=function(){this.clearInterval(this.progressInterval)},t.manualTimeUpdatesOn=function(){this.manualTimeUpdates=!0,this.on("play",this.trackCurrentTime_),this.on("pause",this.stopTrackingCurrentTime_)},t.manualTimeUpdatesOff=function(){this.manualTimeUpdates=!1,this.stopTrackingCurrentTime(),this.off("play",this.trackCurrentTime_),this.off("pause",this.stopTrackingCurrentTime_)},t.trackCurrentTime=function(){this.currentTimeInterval&&this.stopTrackingCurrentTime(),this.currentTimeInterval=this.setInterval(function(){this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},250)},t.stopTrackingCurrentTime=function(){this.clearInterval(this.currentTimeInterval),this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},t.dispose=function(){this.clearTracks(qo.names),this.manualProgress&&this.manualProgressOff(),this.manualTimeUpdates&&this.manualTimeUpdatesOff(),r.prototype.dispose.call(this)},t.clearTracks=function(i){var s=this;i=[].concat(i),i.forEach(function(a){for(var o=s[a+"Tracks"]()||[],l=o.length;l--;){var u=o[l];a==="text"&&s.removeRemoteTextTrack(u),o.removeTrack(u)}})},t.cleanupAutoTextTracks=function(){for(var i=this.autoRemoteTextTracks_||[],s=i.length;s--;){var a=i[s];this.removeRemoteTextTrack(a)}},t.reset=function(){},t.crossOrigin=function(){},t.setCrossOrigin=function(){},t.error=function(i){return i!==void 0&&(this.error_=new sa(i),this.trigger("error")),this.error_},t.played=function(){return this.hasStarted_?$h(0,0):$h()},t.play=function(){},t.setScrubbing=function(){},t.scrubbing=function(){},t.setCurrentTime=function(){this.manualTimeUpdates&&this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},t.initTrackListeners=function(){var i=this;qo.names.forEach(function(s){var a=qo[s],o=function(){i.trigger(s+"trackchange")},l=i[a.getterName]();l.addEventListener("removetrack",o),l.addEventListener("addtrack",o),i.on("dispose",function(){l.removeEventListener("removetrack",o),l.removeEventListener("addtrack",o)})})},t.addWebVttScript_=function(){var i=this;if(!X.WebVTT)if(Fe.body.contains(this.el())){if(!this.options_["vtt.js"]&&sg(ex)&&Object.keys(ex).length>0){this.trigger("vttjsloaded");return}var s=Fe.createElement("script");s.src=this.options_["vtt.js"]||"https://vjs.zencdn.net/vttjs/0.14.1/vtt.min.js",s.onload=function(){i.trigger("vttjsloaded")},s.onerror=function(){i.trigger("vttjserror")},this.on("dispose",function(){s.onload=null,s.onerror=null}),X.WebVTT=!0,this.el().parentNode.appendChild(s)}else this.ready(this.addWebVttScript_)},t.emulateTextTracks=function(){var i=this,s=this.textTracks(),a=this.remoteTextTracks(),o=function(m){return s.addTrack(m.track)},l=function(m){return s.removeTrack(m.track)};a.on("addtrack",o),a.on("removetrack",l),this.addWebVttScript_();var u=function(){return i.trigger("texttrackchange")},c=function(){u();for(var m=0;m<s.length;m++){var g=s[m];g.removeEventListener("cuechange",u),g.mode==="showing"&&g.addEventListener("cuechange",u)}};c(),s.addEventListener("change",c),s.addEventListener("addtrack",c),s.addEventListener("removetrack",c),this.on("dispose",function(){a.off("addtrack",o),a.off("removetrack",l),s.removeEventListener("change",c),s.removeEventListener("addtrack",c),s.removeEventListener("removetrack",c);for(var h=0;h<s.length;h++){var m=s[h];m.removeEventListener("cuechange",u)}})},t.addTextTrack=function(i,s,a){if(!i)throw new Error("TextTrack kind is required but was not provided");return s0e(this,i,s,a)},t.createRemoteTextTrack=function(i){var s=Vn(i,{tech:this});return new $p.remoteTextEl.TrackClass(s)},t.addRemoteTextTrack=function(i,s){var a=this;i===void 0&&(i={});var o=this.createRemoteTextTrack(i);return s!==!0&&s!==!1&&(Gr.warn('Calling addRemoteTextTrack without explicitly setting the "manualCleanup" parameter to `true` is deprecated and default to `false` in future version of video.js'),s=!0),this.remoteTextTrackEls().addTrackElement_(o),this.remoteTextTracks().addTrack(o.track),s!==!0&&this.ready(function(){return a.autoRemoteTextTracks_.addTrack(o.track)}),o},t.removeRemoteTextTrack=function(i){var s=this.remoteTextTrackEls().getTrackElementByTrack_(i);this.remoteTextTrackEls().removeTrackElement_(s),this.remoteTextTracks().removeTrack(i),this.autoRemoteTextTracks_.removeTrack(i)},t.getVideoPlaybackQuality=function(){return{}},t.requestPictureInPicture=function(){var i=this.options_.Promise||X.Promise;if(i)return i.reject()},t.disablePictureInPicture=function(){return!0},t.setDisablePictureInPicture=function(){},t.requestVideoFrameCallback=function(i){var s=this,a=Ic();return!this.isReady_||this.paused()?(this.queuedHanders_.add(a),this.one("playing",function(){s.queuedHanders_.has(a)&&(s.queuedHanders_.delete(a),i())})):this.requestNamedAnimationFrame(a,i),a},t.cancelVideoFrameCallback=function(i){this.queuedHanders_.has(i)?this.queuedHanders_.delete(i):this.cancelNamedAnimationFrame(i)},t.setPoster=function(){},t.playsinline=function(){},t.setPlaysinline=function(){},t.overrideNativeAudioTracks=function(){},t.overrideNativeVideoTracks=function(){},t.canPlayType=function(){return""},e.canPlayType=function(){return""},e.canPlaySource=function(i,s){return e.canPlayType(i.type)},e.isTech=function(i){return i.prototype instanceof e||i instanceof e||i===e},e.registerTech=function(i,s){if(e.techs_||(e.techs_={}),!e.isTech(s))throw new Error("Tech "+i+" must be a Tech");if(!e.canPlayType)throw new Error("Techs must have a static canPlayType method on them");if(!e.canPlaySource)throw new Error("Techs must have a static canPlaySource method on them");return i=yi(i),e.techs_[i]=s,e.techs_[E_(i)]=s,i!=="Tech"&&e.defaultTechOrder_.push(i),s},e.getTech=function(i){if(i){if(e.techs_&&e.techs_[i])return e.techs_[i];if(i=yi(i),X&&X.videojs&&X.videojs[i])return Gr.warn("The "+i+" tech was added to the videojs object when it should be registered using videojs.registerTech(name, tech)"),X.videojs[i]}},e})(Ct);ea.names.forEach(function(r){var e=ea[r];Un.prototype[e.getterName]=function(){return this[e.privateName]=this[e.privateName]||new e.ListClass,this[e.privateName]}});Un.prototype.featuresVolumeControl=!0;Un.prototype.featuresMuteControl=!0;Un.prototype.featuresFullscreenResize=!1;Un.prototype.featuresPlaybackRate=!1;Un.prototype.featuresProgressEvents=!1;Un.prototype.featuresSourceset=!1;Un.prototype.featuresTimeupdateEvents=!1;Un.prototype.featuresNativeTextTracks=!1;Un.prototype.featuresVideoFrameCallback=!1;Un.withSourceHandlers=function(r){r.registerSourceHandler=function(t,n){var i=r.sourceHandlers;i||(i=r.sourceHandlers=[]),n===void 0&&(n=i.length),i.splice(n,0,t)},r.canPlayType=function(t){for(var n=r.sourceHandlers||[],i,s=0;s<n.length;s++)if(i=n[s].canPlayType(t),i)return i;return""},r.selectSourceHandler=function(t,n){for(var i=r.sourceHandlers||[],s,a=0;a<i.length;a++)if(s=i[a].canHandleSource(t,n),s)return i[a];return null},r.canPlaySource=function(t,n){var i=r.selectSourceHandler(t,n);return i?i.canHandleSource(t,n):""};var e=["seekable","seeking","duration"];e.forEach(function(t){var n=this[t];typeof n=="function"&&(this[t]=function(){return this.sourceHandler_&&this.sourceHandler_[t]?this.sourceHandler_[t].apply(this.sourceHandler_,arguments):n.apply(this,arguments)})},r.prototype),r.prototype.setSource=function(t){var n=r.selectSourceHandler(t,this.options_);n||(r.nativeSourceHandler?n=r.nativeSourceHandler:Gr.error("No source handler found for the current source.")),this.disposeSourceHandler(),this.off("dispose",this.disposeSourceHandler_),n!==r.nativeSourceHandler&&(this.currentSource_=t),this.sourceHandler_=n.handleSource(t,this,this.options_),this.one("dispose",this.disposeSourceHandler_)},r.prototype.disposeSourceHandler=function(){this.currentSource_&&(this.clearTracks(["audio","video"]),this.currentSource_=null),this.cleanupAutoTextTracks(),this.sourceHandler_&&(this.sourceHandler_.dispose&&this.sourceHandler_.dispose(),this.sourceHandler_=null)}};Ct.registerComponent("Tech",Un);Un.registerTech("Tech",Un);Un.defaultTechOrder_=[];var jh={},yE={},Lx={};function a0e(r,e){jh[r]=jh[r]||[],jh[r].push(e)}function o0e(r,e,t){r.setTimeout(function(){return vh(e,jh[e.type],t,r)},1)}function l0e(r,e){r.forEach(function(t){return t.setTech&&t.setTech(e)})}function u0e(r,e,t){return r.reduceRight(Kk(t),e[t]())}function c0e(r,e,t,n){return e[t](r.reduce(Kk(t),n))}function E4(r,e,t,n){n===void 0&&(n=null);var i="call"+yi(t),s=r.reduce(Kk(i),n),a=s===Lx,o=a?null:e[t](s);return f0e(r,t,o,a),o}var d0e={buffered:1,currentTime:1,duration:1,muted:1,played:1,paused:1,seekable:1,volume:1,ended:1},h0e={setCurrentTime:1,setMuted:1,setVolume:1},k4={play:1,pause:1};function Kk(r){return function(e,t){return e===Lx?Lx:t[r]?t[r](e):e}}function f0e(r,e,t,n){for(var i=r.length-1;i>=0;i--){var s=r[i];s[e]&&s[e](n,t)}}function p0e(r){yE[r.id()]=null}function m0e(r,e){var t=yE[r.id()],n=null;if(t==null)return n=e(r),yE[r.id()]=[[e,n]],n;for(var i=0;i<t.length;i++){var s=t[i],a=s[0],o=s[1];a===e&&(n=o)}return n===null&&(n=e(r),t.push([e,n])),n}function vh(r,e,t,n,i,s){r===void 0&&(r={}),e===void 0&&(e=[]),i===void 0&&(i=[]),s===void 0&&(s=!1);var a=e,o=a[0],l=a.slice(1);if(typeof o=="string")vh(r,jh[o],t,n,i,s);else if(o){var u=m0e(n,o);if(!u.setSource)return i.push(u),vh(r,l,t,n,i,s);u.setSource(li({},r),function(c,h){if(c)return vh(r,l,t,n,i,s);i.push(u),vh(h,r.type===h.type?l:jh[h.type],t,n,i,s)})}else l.length?vh(r,l,t,n,i,s):s?t(r,i):vh(r,jh["*"],t,n,i,!0)}var g0e={opus:"video/ogg",ogv:"video/ogg",mp4:"video/mp4",mov:"video/mp4",m4v:"video/mp4",mkv:"video/x-matroska",m4a:"audio/mp4",mp3:"audio/mpeg",aac:"audio/aac",caf:"audio/x-caf",flac:"audio/flac",oga:"audio/ogg",wav:"audio/wav",m3u8:"application/x-mpegURL",mpd:"application/dash+xml",jpg:"image/jpeg",jpeg:"image/jpeg",gif:"image/gif",png:"image/png",svg:"image/svg+xml",webp:"image/webp"},Ox=function(e){e===void 0&&(e="");var t=Gk(e),n=g0e[t.toLowerCase()];return n||""},v0e=function(e,t){if(!t)return"";if(e.cache_.source.src===t&&e.cache_.source.type)return e.cache_.source.type;var n=e.cache_.sources.filter(function(o){return o.src===t});if(n.length)return n[0].type;for(var i=e.$$("source"),s=0;s<i.length;s++){var a=i[s];if(a.type&&a.src&&a.src===t)return a.type}return Ox(t)},y0e=function r(e){if(Array.isArray(e)){var t=[];e.forEach(function(n){n=r(n),Array.isArray(n)?t=t.concat(n):Tc(n)&&t.push(n)}),e=t}else typeof e=="string"&&e.trim()?e=[A4({src:e})]:Tc(e)&&typeof e.src=="string"&&e.src&&e.src.trim()?e=[A4(e)]:e=[];return e};function A4(r){if(!r.type){var e=Ox(r.src);e&&(r.type=e)}return r}var _0e=(function(r){$t(e,r);function e(t,n,i){var s,a=Vn({createEl:!1},n);if(s=r.call(this,t,a,i)||this,!n.playerOptions.sources||n.playerOptions.sources.length===0)for(var o=0,l=n.playerOptions.techOrder;o<l.length;o++){var u=yi(l[o]),c=Un.getTech(u);if(u||(c=Ct.getComponent(u)),c&&c.isSupported()){t.loadTech_(u);break}}else t.src(n.playerOptions.sources);return s}return e})(Ct);Ct.registerComponent("MediaLoader",_0e);var gS=(function(r){$t(e,r);function e(n,i){var s;return s=r.call(this,n,i)||this,s.options_.controlText&&s.controlText(s.options_.controlText),s.handleMouseOver_=function(a){return s.handleMouseOver(a)},s.handleMouseOut_=function(a){return s.handleMouseOut(a)},s.handleClick_=function(a){return s.handleClick(a)},s.handleKeyDown_=function(a){return s.handleKeyDown(a)},s.emitTapEvents(),s.enable(),s}var t=e.prototype;return t.createEl=function(i,s,a){i===void 0&&(i="div"),s===void 0&&(s={}),a===void 0&&(a={}),s=li({className:this.buildCSSClass(),tabIndex:0},s),i==="button"&&Gr.error("Creating a ClickableComponent with an HTML element of "+i+" is not supported; use a Button instead."),a=li({role:"button"},a),this.tabIndex_=s.tabIndex;var o=cn(i,s,a);return o.appendChild(cn("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),this.createControlTextEl(o),o},t.dispose=function(){this.controlTextEl_=null,r.prototype.dispose.call(this)},t.createControlTextEl=function(i){return this.controlTextEl_=cn("span",{className:"vjs-control-text"},{"aria-live":"polite"}),i&&i.appendChild(this.controlTextEl_),this.controlText(this.controlText_,i),this.controlTextEl_},t.controlText=function(i,s){if(s===void 0&&(s=this.el()),i===void 0)return this.controlText_||"Need Text";var a=this.localize(i);this.controlText_=i,tf(this.controlTextEl_,a),!this.nonIconControl&&!this.player_.options_.noUITitleAttributes&&s.setAttribute("title",a)},t.buildCSSClass=function(){return"vjs-control vjs-button "+r.prototype.buildCSSClass.call(this)},t.enable=function(){this.enabled_||(this.enabled_=!0,this.removeClass("vjs-disabled"),this.el_.setAttribute("aria-disabled","false"),typeof this.tabIndex_<"u"&&this.el_.setAttribute("tabIndex",this.tabIndex_),this.on(["tap","click"],this.handleClick_),this.on("keydown",this.handleKeyDown_))},t.disable=function(){this.enabled_=!1,this.addClass("vjs-disabled"),this.el_.setAttribute("aria-disabled","true"),typeof this.tabIndex_<"u"&&this.el_.removeAttribute("tabIndex"),this.off("mouseover",this.handleMouseOver_),this.off("mouseout",this.handleMouseOut_),this.off(["tap","click"],this.handleClick_),this.off("keydown",this.handleKeyDown_)},t.handleLanguagechange=function(){this.controlText(this.controlText_)},t.handleClick=function(i){this.options_.clickHandler&&this.options_.clickHandler.call(this,arguments)},t.handleKeyDown=function(i){Or.isEventKey(i,"Space")||Or.isEventKey(i,"Enter")?(i.preventDefault(),i.stopPropagation(),this.trigger("click")):r.prototype.handleKeyDown.call(this,i)},e})(Ct);Ct.registerComponent("ClickableComponent",gS);var x0e=(function(r){$t(e,r);function e(n,i){var s;return s=r.call(this,n,i)||this,s.update(),s.update_=function(a){return s.update(a)},n.on("posterchange",s.update_),s}var t=e.prototype;return t.dispose=function(){this.player().off("posterchange",this.update_),r.prototype.dispose.call(this)},t.createEl=function(){var i=cn("div",{className:"vjs-poster",tabIndex:-1});return i},t.update=function(i){var s=this.player().poster();this.setSrc(s),s?this.show():this.hide()},t.setSrc=function(i){var s="";i&&(s='url("'+i+'")'),this.el_.style.backgroundImage=s},t.handleClick=function(i){if(this.player_.controls()){var s=this.player_.usingPlugin("eme")&&this.player_.eme.sessions&&this.player_.eme.sessions.length>0;this.player_.tech(!0)&&!((jg||$g)&&s)&&this.player_.tech(!0).focus(),this.player_.paused()?mu(this.player_.play()):this.player_.pause()}},e})(gS);Ct.registerComponent("PosterImage",x0e);var Bo="#222",D4="#ccc",b0e={monospace:"monospace",sansSerif:"sans-serif",serif:"serif",monospaceSansSerif:'"Andale Mono", "Lucida Console", monospace',monospaceSerif:'"Courier New", monospace',proportionalSansSerif:"sans-serif",proportionalSerif:"serif",casual:'"Comic Sans MS", Impact, fantasy',script:'"Monotype Corsiva", cursive',smallcaps:'"Andale Mono", "Lucida Console", monospace, sans-serif'};function yC(r,e){var t;if(r.length===4)t=r[1]+r[1]+r[2]+r[2]+r[3]+r[3];else if(r.length===7)t=r.slice(1);else throw new Error("Invalid color code provided, "+r+"; must be formatted as e.g. #f0e or #f604e2.");return"rgba("+parseInt(t.slice(0,2),16)+","+parseInt(t.slice(2,4),16)+","+parseInt(t.slice(4,6),16)+","+e+")"}function _C(r,e,t){try{r.style[e]=t}catch{return}}var S0e=(function(r){$t(e,r);function e(n,i,s){var a;a=r.call(this,n,i,s)||this;var o=function(u){return a.updateDisplay(u)};return n.on("loadstart",function(l){return a.toggleDisplay(l)}),n.on("texttrackchange",o),n.on("loadedmetadata",function(l){return a.preselectTrack(l)}),n.ready(Wn(He(a),function(){if(n.tech_&&n.tech_.featuresNativeTextTracks){this.hide();return}n.on("fullscreenchange",o),n.on("playerresize",o),X.addEventListener("orientationchange",o),n.on("dispose",function(){return X.removeEventListener("orientationchange",o)});for(var l=this.options_.playerOptions.tracks||[],u=0;u<l.length;u++)this.player_.addRemoteTextTrack(l[u],!0);this.preselectTrack()})),a}var t=e.prototype;return t.preselectTrack=function(){for(var i={captions:1,subtitles:1},s=this.player_.textTracks(),a=this.player_.cache_.selectedLanguage,o,l,u,c=0;c<s.length;c++){var h=s[c];a&&a.enabled&&a.language&&a.language===h.language&&h.kind in i?h.kind===a.kind?u=h:u||(u=h):a&&!a.enabled?(u=null,o=null,l=null):h.default&&(h.kind==="descriptions"&&!o?o=h:h.kind in i&&!l&&(l=h))}u?u.mode="showing":l?l.mode="showing":o&&(o.mode="showing")},t.toggleDisplay=function(){this.player_.tech_&&this.player_.tech_.featuresNativeTextTracks?this.hide():this.show()},t.createEl=function(){return r.prototype.createEl.call(this,"div",{className:"vjs-text-track-display"},{translate:"yes","aria-live":"off","aria-atomic":"true"})},t.clearDisplay=function(){typeof X.WebVTT=="function"&&X.WebVTT.processCues(X,[],this.el_)},t.updateDisplay=function(){var i=this.player_.textTracks(),s=this.options_.allowMultipleShowingTracks;if(this.clearDisplay(),s){for(var a=[],o=0;o<i.length;++o){var l=i[o];l.mode==="showing"&&a.push(l)}this.updateForTrack(a);return}for(var u=null,c=null,h=i.length;h--;){var m=i[h];m.mode==="showing"&&(m.kind==="descriptions"?u=m:c=m)}c?(this.getAttribute("aria-live")!=="off"&&this.setAttribute("aria-live","off"),this.updateForTrack(c)):u&&(this.getAttribute("aria-live")!=="assertive"&&this.setAttribute("aria-live","assertive"),this.updateForTrack(u))},t.updateDisplayState=function(i){for(var s=this.player_.textTrackSettings.getValues(),a=i.activeCues,o=a.length;o--;){var l=a[o];if(l){var u=l.displayState;if(s.color&&(u.firstChild.style.color=s.color),s.textOpacity&&_C(u.firstChild,"color",yC(s.color||"#fff",s.textOpacity)),s.backgroundColor&&(u.firstChild.style.backgroundColor=s.backgroundColor),s.backgroundOpacity&&_C(u.firstChild,"backgroundColor",yC(s.backgroundColor||"#000",s.backgroundOpacity)),s.windowColor&&(s.windowOpacity?_C(u,"backgroundColor",yC(s.windowColor,s.windowOpacity)):u.style.backgroundColor=s.windowColor),s.edgeStyle&&(s.edgeStyle==="dropshadow"?u.firstChild.style.textShadow="2px 2px 3px "+Bo+", 2px 2px 4px "+Bo+", 2px 2px 5px "+Bo:s.edgeStyle==="raised"?u.firstChild.style.textShadow="1px 1px "+Bo+", 2px 2px "+Bo+", 3px 3px "+Bo:s.edgeStyle==="depressed"?u.firstChild.style.textShadow="1px 1px "+D4+", 0 1px "+D4+", -1px -1px "+Bo+", 0 -1px "+Bo:s.edgeStyle==="uniform"&&(u.firstChild.style.textShadow="0 0 4px "+Bo+", 0 0 4px "+Bo+", 0 0 4px "+Bo+", 0 0 4px "+Bo)),s.fontPercent&&s.fontPercent!==1){var c=X.parseFloat(u.style.fontSize);u.style.fontSize=c*s.fontPercent+"px",u.style.height="auto",u.style.top="auto"}s.fontFamily&&s.fontFamily!=="default"&&(s.fontFamily==="small-caps"?u.firstChild.style.fontVariant="small-caps":u.firstChild.style.fontFamily=b0e[s.fontFamily])}}},t.updateForTrack=function(i){if(Array.isArray(i)||(i=[i]),!(typeof X.WebVTT!="function"||i.every(function(g){return!g.activeCues}))){for(var s=[],a=0;a<i.length;++a)for(var o=i[a],l=0;l<o.activeCues.length;++l)s.push(o.activeCues[l]);X.WebVTT.processCues(X,s,this.el_);for(var u=0;u<i.length;++u){for(var c=i[u],h=0;h<c.activeCues.length;++h){var m=c.activeCues[h].displayState;_c(m,"vjs-text-track-cue"),_c(m,"vjs-text-track-cue-"+(c.language?c.language:u)),c.language&&Bp(m,"lang",c.language)}this.player_.textTrackSettings&&this.updateDisplayState(c)}}},e})(Ct);Ct.registerComponent("TextTrackDisplay",S0e);var T0e=(function(r){$t(e,r);function e(){return r.apply(this,arguments)||this}var t=e.prototype;return t.createEl=function(){var i=this.player_.isAudio(),s=this.localize(i?"Audio Player":"Video Player"),a=cn("span",{className:"vjs-control-text",textContent:this.localize("{1} is loading.",[s])}),o=r.prototype.createEl.call(this,"div",{className:"vjs-loading-spinner",dir:"ltr"});return o.appendChild(a),o},e})(Ct);Ct.registerComponent("LoadingSpinner",T0e);var wl=(function(r){$t(e,r);function e(){return r.apply(this,arguments)||this}var t=e.prototype;return t.createEl=function(i,s,a){s===void 0&&(s={}),a===void 0&&(a={}),i="button",s=li({className:this.buildCSSClass()},s),a=li({type:"button"},a);var o=cn(i,s,a);return o.appendChild(cn("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),this.createControlTextEl(o),o},t.addChild=function(i,s){s===void 0&&(s={});var a=this.constructor.name;return Gr.warn("Adding an actionable (user controllable) child to a Button ("+a+") is not supported; use a ClickableComponent instead."),Ct.prototype.addChild.call(this,i,s)},t.enable=function(){r.prototype.enable.call(this),this.el_.removeAttribute("disabled")},t.disable=function(){r.prototype.disable.call(this),this.el_.setAttribute("disabled","disabled")},t.handleKeyDown=function(i){if(Or.isEventKey(i,"Space")||Or.isEventKey(i,"Enter")){i.stopPropagation();return}r.prototype.handleKeyDown.call(this,i)},e})(gS);Ct.registerComponent("Button",wl);var W$=(function(r){$t(e,r);function e(n,i){var s;return s=r.call(this,n,i)||this,s.mouseused_=!1,s.on("mousedown",function(a){return s.handleMouseDown(a)}),s}var t=e.prototype;return t.buildCSSClass=function(){return"vjs-big-play-button"},t.handleClick=function(i){var s=this.player_.play();if(this.mouseused_&&i.clientX&&i.clientY){var a=this.player_.usingPlugin("eme")&&this.player_.eme.sessions&&this.player_.eme.sessions.length>0;mu(s),this.player_.tech(!0)&&!((jg||$g)&&a)&&this.player_.tech(!0).focus();return}var o=this.player_.getChild("controlBar"),l=o&&o.getChild("playToggle");if(!l){this.player_.tech(!0).focus();return}var u=function(){return l.focus()};O0(s)?s.then(u,function(){}):this.setTimeout(u,1)},t.handleKeyDown=function(i){this.mouseused_=!1,r.prototype.handleKeyDown.call(this,i)},t.handleMouseDown=function(i){this.mouseused_=!0},e})(wl);W$.prototype.controlText_="Play Video";Ct.registerComponent("BigPlayButton",W$);var C0e=(function(r){$t(e,r);function e(n,i){var s;return s=r.call(this,n,i)||this,s.controlText(i&&i.controlText||s.localize("Close")),s}var t=e.prototype;return t.buildCSSClass=function(){return"vjs-close-button "+r.prototype.buildCSSClass.call(this)},t.handleClick=function(i){this.trigger({type:"close",bubbles:!1})},t.handleKeyDown=function(i){Or.isEventKey(i,"Esc")?(i.preventDefault(),i.stopPropagation(),this.trigger("click")):r.prototype.handleKeyDown.call(this,i)},e})(wl);Ct.registerComponent("CloseButton",C0e);var q$=(function(r){$t(e,r);function e(n,i){var s;return i===void 0&&(i={}),s=r.call(this,n,i)||this,i.replay=i.replay===void 0||i.replay,s.on(n,"play",function(a){return s.handlePlay(a)}),s.on(n,"pause",function(a){return s.handlePause(a)}),i.replay&&s.on(n,"ended",function(a){return s.handleEnded(a)}),s}var t=e.prototype;return t.buildCSSClass=function(){return"vjs-play-control "+r.prototype.buildCSSClass.call(this)},t.handleClick=function(i){this.player_.paused()?mu(this.player_.play()):this.player_.pause()},t.handleSeeked=function(i){this.removeClass("vjs-ended"),this.player_.paused()?this.handlePause(i):this.handlePlay(i)},t.handlePlay=function(i){this.removeClass("vjs-ended"),this.removeClass("vjs-paused"),this.addClass("vjs-playing"),this.controlText("Pause")},t.handlePause=function(i){this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.controlText("Play")},t.handleEnded=function(i){var s=this;this.removeClass("vjs-playing"),this.addClass("vjs-ended"),this.controlText("Replay"),this.one(this.player_,"seeked",function(a){return s.handleSeeked(a)})},e})(wl);q$.prototype.controlText_="Play";Ct.registerComponent("PlayToggle",q$);var G$=function(e,t){e=e<0?0:e;var n=Math.floor(e%60),i=Math.floor(e/60%60),s=Math.floor(e/3600),a=Math.floor(t/60%60),o=Math.floor(t/3600);return(isNaN(e)||e===1/0)&&(s=i=n="-"),s=s>0||o>0?s+":":"",i=((s||a>=10)&&i<10?"0"+i:i)+":",n=n<10?"0"+n:n,s+i+n},Xk=G$;function w0e(r){Xk=r}function E0e(){Xk=G$}function jp(r,e){return e===void 0&&(e=r),Xk(r,e)}var dm=(function(r){$t(e,r);function e(n,i){var s;return s=r.call(this,n,i)||this,s.on(n,["timeupdate","ended"],function(a){return s.updateContent(a)}),s.updateTextNode_(),s}var t=e.prototype;return t.createEl=function(){var i=this.buildCSSClass(),s=r.prototype.createEl.call(this,"div",{className:i+" vjs-time-control vjs-control"}),a=cn("span",{className:"vjs-control-text",textContent:this.localize(this.labelText_)+""},{role:"presentation"});return s.appendChild(a),this.contentEl_=cn("span",{className:i+"-display"},{"aria-live":"off",role:"presentation"}),s.appendChild(this.contentEl_),s},t.dispose=function(){this.contentEl_=null,this.textNode_=null,r.prototype.dispose.call(this)},t.updateTextNode_=function(i){var s=this;i===void 0&&(i=0),i=jp(i),this.formattedTime_!==i&&(this.formattedTime_=i,this.requestNamedAnimationFrame("TimeDisplay#updateTextNode_",function(){if(s.contentEl_){var a=s.textNode_;a&&s.contentEl_.firstChild!==a&&(a=null,Gr.warn("TimeDisplay#updateTextnode_: Prevented replacement of text node element since it was no longer a child of this node. Appending a new node instead.")),s.textNode_=Fe.createTextNode(s.formattedTime_),s.textNode_&&(a?s.contentEl_.replaceChild(s.textNode_,a):s.contentEl_.appendChild(s.textNode_))}}))},t.updateContent=function(i){},e})(Ct);dm.prototype.labelText_="Time";dm.prototype.controlText_="Time";Ct.registerComponent("TimeDisplay",dm);var Yk=(function(r){$t(e,r);function e(){return r.apply(this,arguments)||this}var t=e.prototype;return t.buildCSSClass=function(){return"vjs-current-time"},t.updateContent=function(i){var s;this.player_.ended()?s=this.player_.duration():s=this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime(),this.updateTextNode_(s)},e})(dm);Yk.prototype.labelText_="Current Time";Yk.prototype.controlText_="Current Time";Ct.registerComponent("CurrentTimeDisplay",Yk);var Qk=(function(r){$t(e,r);function e(n,i){var s;s=r.call(this,n,i)||this;var a=function(l){return s.updateContent(l)};return s.on(n,"durationchange",a),s.on(n,"loadstart",a),s.on(n,"loadedmetadata",a),s}var t=e.prototype;return t.buildCSSClass=function(){return"vjs-duration"},t.updateContent=function(i){var s=this.player_.duration();this.updateTextNode_(s)},e})(dm);Qk.prototype.labelText_="Duration";Qk.prototype.controlText_="Duration";Ct.registerComponent("DurationDisplay",Qk);var k0e=(function(r){$t(e,r);function e(){return r.apply(this,arguments)||this}var t=e.prototype;return t.createEl=function(){var i=r.prototype.createEl.call(this,"div",{className:"vjs-time-control vjs-time-divider"},{"aria-hidden":!0}),s=r.prototype.createEl.call(this,"div"),a=r.prototype.createEl.call(this,"span",{textContent:"/"});return s.appendChild(a),i.appendChild(s),i},e})(Ct);Ct.registerComponent("TimeDivider",k0e);var Jk=(function(r){$t(e,r);function e(n,i){var s;return s=r.call(this,n,i)||this,s.on(n,"durationchange",function(a){return s.updateContent(a)}),s}var t=e.prototype;return t.buildCSSClass=function(){return"vjs-remaining-time"},t.createEl=function(){var i=r.prototype.createEl.call(this);return this.options_.displayNegative!==!1&&i.insertBefore(cn("span",{},{"aria-hidden":!0},"-"),this.contentEl_),i},t.updateContent=function(i){if(typeof this.player_.duration()=="number"){var s;this.player_.ended()?s=0:this.player_.remainingTimeDisplay?s=this.player_.remainingTimeDisplay():s=this.player_.remainingTime(),this.updateTextNode_(s)}},e})(dm);Jk.prototype.labelText_="Remaining Time";Jk.prototype.controlText_="Remaining Time";Ct.registerComponent("RemainingTimeDisplay",Jk);var A0e=(function(r){$t(e,r);function e(n,i){var s;return s=r.call(this,n,i)||this,s.updateShowing(),s.on(s.player(),"durationchange",function(a){return s.updateShowing(a)}),s}var t=e.prototype;return t.createEl=function(){var i=r.prototype.createEl.call(this,"div",{className:"vjs-live-control vjs-control"});return this.contentEl_=cn("div",{className:"vjs-live-display"},{"aria-live":"off"}),this.contentEl_.appendChild(cn("span",{className:"vjs-control-text",textContent:this.localize("Stream Type")+""})),this.contentEl_.appendChild(Fe.createTextNode(this.localize("LIVE"))),i.appendChild(this.contentEl_),i},t.dispose=function(){this.contentEl_=null,r.prototype.dispose.call(this)},t.updateShowing=function(i){this.player().duration()===1/0?this.show():this.hide()},e})(Ct);Ct.registerComponent("LiveDisplay",A0e);var K$=(function(r){$t(e,r);function e(n,i){var s;return s=r.call(this,n,i)||this,s.updateLiveEdgeStatus(),s.player_.liveTracker&&(s.updateLiveEdgeStatusHandler_=function(a){return s.updateLiveEdgeStatus(a)},s.on(s.player_.liveTracker,"liveedgechange",s.updateLiveEdgeStatusHandler_)),s}var t=e.prototype;return t.createEl=function(){var i=r.prototype.createEl.call(this,"button",{className:"vjs-seek-to-live-control vjs-control"});return this.textEl_=cn("span",{className:"vjs-seek-to-live-text",textContent:this.localize("LIVE")},{"aria-hidden":"true"}),i.appendChild(this.textEl_),i},t.updateLiveEdgeStatus=function(){!this.player_.liveTracker||this.player_.liveTracker.atLiveEdge()?(this.setAttribute("aria-disabled",!0),this.addClass("vjs-at-live-edge"),this.controlText("Seek to live, currently playing live")):(this.setAttribute("aria-disabled",!1),this.removeClass("vjs-at-live-edge"),this.controlText("Seek to live, currently behind live"))},t.handleClick=function(){this.player_.liveTracker.seekToLiveEdge()},t.dispose=function(){this.player_.liveTracker&&this.off(this.player_.liveTracker,"liveedgechange",this.updateLiveEdgeStatusHandler_),this.textEl_=null,r.prototype.dispose.call(this)},e})(wl);K$.prototype.controlText_="Seek to live, currently playing live";Ct.registerComponent("SeekToLive",K$);var vS=function(e,t,n){return e=Number(e),Math.min(n,Math.max(t,isNaN(e)?t:e))},Zk=(function(r){$t(e,r);function e(n,i){var s;return s=r.call(this,n,i)||this,s.handleMouseDown_=function(a){return s.handleMouseDown(a)},s.handleMouseUp_=function(a){return s.handleMouseUp(a)},s.handleKeyDown_=function(a){return s.handleKeyDown(a)},s.handleClick_=function(a){return s.handleClick(a)},s.handleMouseMove_=function(a){return s.handleMouseMove(a)},s.update_=function(a){return s.update(a)},s.bar=s.getChild(s.options_.barName),s.vertical(!!s.options_.vertical),s.enable(),s}var t=e.prototype;return t.enabled=function(){return this.enabled_},t.enable=function(){this.enabled()||(this.on("mousedown",this.handleMouseDown_),this.on("touchstart",this.handleMouseDown_),this.on("keydown",this.handleKeyDown_),this.on("click",this.handleClick_),this.on(this.player_,"controlsvisible",this.update),this.playerEvent&&this.on(this.player_,this.playerEvent,this.update),this.removeClass("disabled"),this.setAttribute("tabindex",0),this.enabled_=!0)},t.disable=function(){if(this.enabled()){var i=this.bar.el_.ownerDocument;this.off("mousedown",this.handleMouseDown_),this.off("touchstart",this.handleMouseDown_),this.off("keydown",this.handleKeyDown_),this.off("click",this.handleClick_),this.off(this.player_,"controlsvisible",this.update_),this.off(i,"mousemove",this.handleMouseMove_),this.off(i,"mouseup",this.handleMouseUp_),this.off(i,"touchmove",this.handleMouseMove_),this.off(i,"touchend",this.handleMouseUp_),this.removeAttribute("tabindex"),this.addClass("disabled"),this.playerEvent&&this.off(this.player_,this.playerEvent,this.update),this.enabled_=!1}},t.createEl=function(i,s,a){return s===void 0&&(s={}),a===void 0&&(a={}),s.className=s.className+" vjs-slider",s=li({tabIndex:0},s),a=li({role:"slider","aria-valuenow":0,"aria-valuemin":0,"aria-valuemax":100,tabIndex:0},a),r.prototype.createEl.call(this,i,s,a)},t.handleMouseDown=function(i){var s=this.bar.el_.ownerDocument;i.type==="mousedown"&&i.preventDefault(),i.type==="touchstart"&&!Dc&&i.preventDefault(),T$(),this.addClass("vjs-sliding"),this.trigger("slideractive"),this.on(s,"mousemove",this.handleMouseMove_),this.on(s,"mouseup",this.handleMouseUp_),this.on(s,"touchmove",this.handleMouseMove_),this.on(s,"touchend",this.handleMouseUp_),this.handleMouseMove(i,!0)},t.handleMouseMove=function(i){},t.handleMouseUp=function(){var i=this.bar.el_.ownerDocument;C$(),this.removeClass("vjs-sliding"),this.trigger("sliderinactive"),this.off(i,"mousemove",this.handleMouseMove_),this.off(i,"mouseup",this.handleMouseUp_),this.off(i,"touchmove",this.handleMouseMove_),this.off(i,"touchend",this.handleMouseUp_),this.update()},t.update=function(){var i=this;if(!(!this.el_||!this.bar)){var s=this.getProgress();return s===this.progress_||(this.progress_=s,this.requestNamedAnimationFrame("Slider#update",function(){var a=i.vertical()?"height":"width";i.bar.el().style[a]=(s*100).toFixed(2)+"%"})),s}},t.getProgress=function(){return Number(vS(this.getPercent(),0,1).toFixed(4))},t.calculateDistance=function(i){var s=dS(this.el_,i);return this.vertical()?s.y:s.x},t.handleKeyDown=function(i){Or.isEventKey(i,"Left")||Or.isEventKey(i,"Down")?(i.preventDefault(),i.stopPropagation(),this.stepBack()):Or.isEventKey(i,"Right")||Or.isEventKey(i,"Up")?(i.preventDefault(),i.stopPropagation(),this.stepForward()):r.prototype.handleKeyDown.call(this,i)},t.handleClick=function(i){i.stopPropagation(),i.preventDefault()},t.vertical=function(i){if(i===void 0)return this.vertical_||!1;this.vertical_=!!i,this.vertical_?this.addClass("vjs-slider-vertical"):this.addClass("vjs-slider-horizontal")},e})(Ct);Ct.registerComponent("Slider",Zk);var xC=function(e,t){return vS(e/t*100,0,100).toFixed(2)+"%"},D0e=(function(r){$t(e,r);function e(n,i){var s;return s=r.call(this,n,i)||this,s.partEls_=[],s.on(n,"progress",function(a){return s.update(a)}),s}var t=e.prototype;return t.createEl=function(){var i=r.prototype.createEl.call(this,"div",{className:"vjs-load-progress"}),s=cn("span",{className:"vjs-control-text"}),a=cn("span",{textContent:this.localize("Loaded")}),o=Fe.createTextNode(": ");return this.percentageEl_=cn("span",{className:"vjs-control-text-loaded-percentage",textContent:"0%"}),i.appendChild(s),s.appendChild(a),s.appendChild(o),s.appendChild(this.percentageEl_),i},t.dispose=function(){this.partEls_=null,this.percentageEl_=null,r.prototype.dispose.call(this)},t.update=function(i){var s=this;this.requestNamedAnimationFrame("LoadProgressBar#update",function(){var a=s.player_.liveTracker,o=s.player_.buffered(),l=a&&a.isLive()?a.seekableEnd():s.player_.duration(),u=s.player_.bufferedEnd(),c=s.partEls_,h=xC(u,l);s.percent_!==h&&(s.el_.style.width=h,tf(s.percentageEl_,h),s.percent_=h);for(var m=0;m<o.length;m++){var g=o.start(m),y=o.end(m),v=c[m];v||(v=s.el_.appendChild(cn()),c[m]=v),!(v.dataset.start===g&&v.dataset.end===y)&&(v.dataset.start=g,v.dataset.end=y,v.style.left=xC(g,u),v.style.width=xC(y-g,u))}for(var x=c.length;x>o.length;x--)s.el_.removeChild(c[x-1]);c.length=o.length})},e})(Ct);Ct.registerComponent("LoadProgressBar",D0e);var I0e=(function(r){$t(e,r);function e(n,i){var s;return s=r.call(this,n,i)||this,s.update=Cc(Wn(He(s),s.update),kl),s}var t=e.prototype;return t.createEl=function(){return r.prototype.createEl.call(this,"div",{className:"vjs-time-tooltip"},{"aria-hidden":"true"})},t.update=function(i,s,a){var o=og(this.el_),l=Np(this.player_.el()),u=i.width*s;if(!(!l||!o)){var c=i.left-l.left+u,h=i.width-u+(l.right-i.right),m=o.width/2;c<m?m+=m-c:h<m&&(m=h),m<0?m=0:m>o.width&&(m=o.width),m=Math.round(m),this.el_.style.right="-"+m+"px",this.write(a)}},t.write=function(i){tf(this.el_,i)},t.updateTime=function(i,s,a,o){var l=this;this.requestNamedAnimationFrame("TimeTooltip#updateTime",function(){var u,c=l.player_.duration();if(l.player_.liveTracker&&l.player_.liveTracker.isLive()){var h=l.player_.liveTracker.liveWindow(),m=h-s*h;u=(m<1?"":"-")+jp(m,h)}else u=jp(a,c);l.update(i,s,u),o&&o()})},e})(Ct);Ct.registerComponent("TimeTooltip",I0e);var eA=(function(r){$t(e,r);function e(n,i){var s;return s=r.call(this,n,i)||this,s.update=Cc(Wn(He(s),s.update),kl),s}var t=e.prototype;return t.createEl=function(){return r.prototype.createEl.call(this,"div",{className:"vjs-play-progress vjs-slider-bar"},{"aria-hidden":"true"})},t.update=function(i,s){var a=this.getChild("timeTooltip");if(a){var o=this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime();a.updateTime(i,s,o)}},e})(Ct);eA.prototype.options_={children:[]};!la&&!Ac&&eA.prototype.options_.children.push("timeTooltip");Ct.registerComponent("PlayProgressBar",eA);var X$=(function(r){$t(e,r);function e(n,i){var s;return s=r.call(this,n,i)||this,s.update=Cc(Wn(He(s),s.update),kl),s}var t=e.prototype;return t.createEl=function(){return r.prototype.createEl.call(this,"div",{className:"vjs-mouse-display"})},t.update=function(i,s){var a=this,o=s*this.player_.duration();this.getChild("timeTooltip").updateTime(i,s,o,function(){a.el_.style.left=i.width*s+"px"})},e})(Ct);X$.prototype.options_={children:["timeTooltip"]};Ct.registerComponent("MouseTimeDisplay",X$);var py=5,I4=12,tA=(function(r){$t(e,r);function e(n,i){var s;return s=r.call(this,n,i)||this,s.setEventHandlers_(),s}var t=e.prototype;return t.setEventHandlers_=function(){var i=this;this.update_=Wn(this,this.update),this.update=Cc(this.update_,kl),this.on(this.player_,["ended","durationchange","timeupdate"],this.update),this.player_.liveTracker&&this.on(this.player_.liveTracker,"liveedgechange",this.update),this.updateInterval=null,this.enableIntervalHandler_=function(s){return i.enableInterval_(s)},this.disableIntervalHandler_=function(s){return i.disableInterval_(s)},this.on(this.player_,["playing"],this.enableIntervalHandler_),this.on(this.player_,["ended","pause","waiting"],this.disableIntervalHandler_),"hidden"in Fe&&"visibilityState"in Fe&&this.on(Fe,"visibilitychange",this.toggleVisibility_)},t.toggleVisibility_=function(i){Fe.visibilityState==="hidden"?(this.cancelNamedAnimationFrame("SeekBar#update"),this.cancelNamedAnimationFrame("Slider#update"),this.disableInterval_(i)):(!this.player_.ended()&&!this.player_.paused()&&this.enableInterval_(),this.update())},t.enableInterval_=function(){this.updateInterval||(this.updateInterval=this.setInterval(this.update,kl))},t.disableInterval_=function(i){this.player_.liveTracker&&this.player_.liveTracker.isLive()&&i&&i.type!=="ended"||this.updateInterval&&(this.clearInterval(this.updateInterval),this.updateInterval=null)},t.createEl=function(){return r.prototype.createEl.call(this,"div",{className:"vjs-progress-holder"},{"aria-label":this.localize("Progress Bar")})},t.update=function(i){var s=this;if(Fe.visibilityState!=="hidden"){var a=r.prototype.update.call(this);return this.requestNamedAnimationFrame("SeekBar#update",function(){var o=s.player_.ended()?s.player_.duration():s.getCurrentTime_(),l=s.player_.liveTracker,u=s.player_.duration();l&&l.isLive()&&(u=s.player_.liveTracker.liveCurrentTime()),s.percent_!==a&&(s.el_.setAttribute("aria-valuenow",(a*100).toFixed(2)),s.percent_=a),(s.currentTime_!==o||s.duration_!==u)&&(s.el_.setAttribute("aria-valuetext",s.localize("progress bar timing: currentTime={1} duration={2}",[jp(o,u),jp(u,u)],"{1} of {2}")),s.currentTime_=o,s.duration_=u),s.bar&&s.bar.update(Np(s.el()),s.getProgress())}),a}},t.userSeek_=function(i){this.player_.liveTracker&&this.player_.liveTracker.isLive()&&this.player_.liveTracker.nextSeekedFromUser(),this.player_.currentTime(i)},t.getCurrentTime_=function(){return this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime()},t.getPercent=function(){var i=this.getCurrentTime_(),s,a=this.player_.liveTracker;return a&&a.isLive()?(s=(i-a.seekableStart())/a.liveWindow(),a.atLiveEdge()&&(s=1)):s=i/this.player_.duration(),s},t.handleMouseDown=function(i){lg(i)&&(i.stopPropagation(),this.videoWasPlaying=!this.player_.paused(),this.player_.pause(),r.prototype.handleMouseDown.call(this,i))},t.handleMouseMove=function(i,s){if(s===void 0&&(s=!1),!!lg(i)){!s&&!this.player_.scrubbing()&&this.player_.scrubbing(!0);var a,o=this.calculateDistance(i),l=this.player_.liveTracker;if(!l||!l.isLive())a=o*this.player_.duration(),a===this.player_.duration()&&(a=a-.1);else{if(o>=.99){l.seekToLiveEdge();return}var u=l.seekableStart(),c=l.liveCurrentTime();if(a=u+o*l.liveWindow(),a>=c&&(a=c),a<=u&&(a=u+.1),a===1/0)return}this.userSeek_(a)}},t.enable=function(){r.prototype.enable.call(this);var i=this.getChild("mouseTimeDisplay");i&&i.show()},t.disable=function(){r.prototype.disable.call(this);var i=this.getChild("mouseTimeDisplay");i&&i.hide()},t.handleMouseUp=function(i){r.prototype.handleMouseUp.call(this,i),i&&i.stopPropagation(),this.player_.scrubbing(!1),this.player_.trigger({type:"timeupdate",target:this,manuallyTriggered:!0}),this.videoWasPlaying?mu(this.player_.play()):this.update_()},t.stepForward=function(){this.userSeek_(this.player_.currentTime()+py)},t.stepBack=function(){this.userSeek_(this.player_.currentTime()-py)},t.handleAction=function(i){this.player_.paused()?this.player_.play():this.player_.pause()},t.handleKeyDown=function(i){var s=this.player_.liveTracker;if(Or.isEventKey(i,"Space")||Or.isEventKey(i,"Enter"))i.preventDefault(),i.stopPropagation(),this.handleAction(i);else if(Or.isEventKey(i,"Home"))i.preventDefault(),i.stopPropagation(),this.userSeek_(0);else if(Or.isEventKey(i,"End"))i.preventDefault(),i.stopPropagation(),s&&s.isLive()?this.userSeek_(s.liveCurrentTime()):this.userSeek_(this.player_.duration());else if(/^[0-9]$/.test(Or(i))){i.preventDefault(),i.stopPropagation();var a=(Or.codes[Or(i)]-Or.codes[0])*10/100;s&&s.isLive()?this.userSeek_(s.seekableStart()+s.liveWindow()*a):this.userSeek_(this.player_.duration()*a)}else Or.isEventKey(i,"PgDn")?(i.preventDefault(),i.stopPropagation(),this.userSeek_(this.player_.currentTime()-py*I4)):Or.isEventKey(i,"PgUp")?(i.preventDefault(),i.stopPropagation(),this.userSeek_(this.player_.currentTime()+py*I4)):r.prototype.handleKeyDown.call(this,i)},t.dispose=function(){this.disableInterval_(),this.off(this.player_,["ended","durationchange","timeupdate"],this.update),this.player_.liveTracker&&this.off(this.player_.liveTracker,"liveedgechange",this.update),this.off(this.player_,["playing"],this.enableIntervalHandler_),this.off(this.player_,["ended","pause","waiting"],this.disableIntervalHandler_),"hidden"in Fe&&"visibilityState"in Fe&&this.off(Fe,"visibilitychange",this.toggleVisibility_),r.prototype.dispose.call(this)},e})(Zk);tA.prototype.options_={children:["loadProgressBar","playProgressBar"],barName:"playProgressBar"};!la&&!Ac&&tA.prototype.options_.children.splice(1,0,"mouseTimeDisplay");Ct.registerComponent("SeekBar",tA);var Y$=(function(r){$t(e,r);function e(n,i){var s;return s=r.call(this,n,i)||this,s.handleMouseMove=Cc(Wn(He(s),s.handleMouseMove),kl),s.throttledHandleMouseSeek=Cc(Wn(He(s),s.handleMouseSeek),kl),s.handleMouseUpHandler_=function(a){return s.handleMouseUp(a)},s.handleMouseDownHandler_=function(a){return s.handleMouseDown(a)},s.enable(),s}var t=e.prototype;return t.createEl=function(){return r.prototype.createEl.call(this,"div",{className:"vjs-progress-control vjs-control"})},t.handleMouseMove=function(i){var s=this.getChild("seekBar");if(s){var a=s.getChild("playProgressBar"),o=s.getChild("mouseTimeDisplay");if(!(!a&&!o)){var l=s.el(),u=og(l),c=dS(l,i).x;c=vS(c,0,1),o&&o.update(u,c),a&&a.update(u,s.getProgress())}}},t.handleMouseSeek=function(i){var s=this.getChild("seekBar");s&&s.handleMouseMove(i)},t.enabled=function(){return this.enabled_},t.disable=function(){if(this.children().forEach(function(s){return s.disable&&s.disable()}),!!this.enabled()&&(this.off(["mousedown","touchstart"],this.handleMouseDownHandler_),this.off(this.el_,"mousemove",this.handleMouseMove),this.removeListenersAddedOnMousedownAndTouchstart(),this.addClass("disabled"),this.enabled_=!1,this.player_.scrubbing())){var i=this.getChild("seekBar");this.player_.scrubbing(!1),i.videoWasPlaying&&mu(this.player_.play())}},t.enable=function(){this.children().forEach(function(i){return i.enable&&i.enable()}),!this.enabled()&&(this.on(["mousedown","touchstart"],this.handleMouseDownHandler_),this.on(this.el_,"mousemove",this.handleMouseMove),this.removeClass("disabled"),this.enabled_=!0)},t.removeListenersAddedOnMousedownAndTouchstart=function(){var i=this.el_.ownerDocument;this.off(i,"mousemove",this.throttledHandleMouseSeek),this.off(i,"touchmove",this.throttledHandleMouseSeek),this.off(i,"mouseup",this.handleMouseUpHandler_),this.off(i,"touchend",this.handleMouseUpHandler_)},t.handleMouseDown=function(i){var s=this.el_.ownerDocument,a=this.getChild("seekBar");a&&a.handleMouseDown(i),this.on(s,"mousemove",this.throttledHandleMouseSeek),this.on(s,"touchmove",this.throttledHandleMouseSeek),this.on(s,"mouseup",this.handleMouseUpHandler_),this.on(s,"touchend",this.handleMouseUpHandler_)},t.handleMouseUp=function(i){var s=this.getChild("seekBar");s&&s.handleMouseUp(i),this.removeListenersAddedOnMousedownAndTouchstart()},e})(Ct);Y$.prototype.options_={children:["seekBar"]};Ct.registerComponent("ProgressControl",Y$);var Q$=(function(r){$t(e,r);function e(n,i){var s;return s=r.call(this,n,i)||this,s.on(n,["enterpictureinpicture","leavepictureinpicture"],function(a){return s.handlePictureInPictureChange(a)}),s.on(n,["disablepictureinpicturechanged","loadedmetadata"],function(a){return s.handlePictureInPictureEnabledChange(a)}),s.on(n,["loadedmetadata","audioonlymodechange","audiopostermodechange"],function(){var a=n.currentType().substring(0,5)==="audio";a||n.audioPosterMode()||n.audioOnlyMode()?(n.isInPictureInPicture()&&n.exitPictureInPicture(),s.hide()):s.show()}),s.disable(),s}var t=e.prototype;return t.buildCSSClass=function(){return"vjs-picture-in-picture-control "+r.prototype.buildCSSClass.call(this)},t.handlePictureInPictureEnabledChange=function(){Fe.pictureInPictureEnabled&&this.player_.disablePictureInPicture()===!1?this.enable():this.disable()},t.handlePictureInPictureChange=function(i){this.player_.isInPictureInPicture()?this.controlText("Exit Picture-in-Picture"):this.controlText("Picture-in-Picture"),this.handlePictureInPictureEnabledChange()},t.handleClick=function(i){this.player_.isInPictureInPicture()?this.player_.exitPictureInPicture():this.player_.requestPictureInPicture()},e})(wl);Q$.prototype.controlText_="Picture-in-Picture";Ct.registerComponent("PictureInPictureToggle",Q$);var J$=(function(r){$t(e,r);function e(n,i){var s;return s=r.call(this,n,i)||this,s.on(n,"fullscreenchange",function(a){return s.handleFullscreenChange(a)}),Fe[n.fsApi_.fullscreenEnabled]===!1&&s.disable(),s}var t=e.prototype;return t.buildCSSClass=function(){return"vjs-fullscreen-control "+r.prototype.buildCSSClass.call(this)},t.handleFullscreenChange=function(i){this.player_.isFullscreen()?this.controlText("Non-Fullscreen"):this.controlText("Fullscreen")},t.handleClick=function(i){this.player_.isFullscreen()?this.player_.exitFullscreen():this.player_.requestFullscreen()},e})(wl);J$.prototype.controlText_="Fullscreen";Ct.registerComponent("FullscreenToggle",J$);var P0e=function(e,t){t.tech_&&!t.tech_.featuresVolumeControl&&e.addClass("vjs-hidden"),e.on(t,"loadstart",function(){t.tech_.featuresVolumeControl?e.removeClass("vjs-hidden"):e.addClass("vjs-hidden")})},R0e=(function(r){$t(e,r);function e(){return r.apply(this,arguments)||this}var t=e.prototype;return t.createEl=function(){var i=r.prototype.createEl.call(this,"div",{className:"vjs-volume-level"});return i.appendChild(r.prototype.createEl.call(this,"span",{className:"vjs-control-text"})),i},e})(Ct);Ct.registerComponent("VolumeLevel",R0e);var L0e=(function(r){$t(e,r);function e(n,i){var s;return s=r.call(this,n,i)||this,s.update=Cc(Wn(He(s),s.update),kl),s}var t=e.prototype;return t.createEl=function(){return r.prototype.createEl.call(this,"div",{className:"vjs-volume-tooltip"},{"aria-hidden":"true"})},t.update=function(i,s,a,o){if(!a){var l=Np(this.el_),u=Np(this.player_.el()),c=i.width*s;if(!u||!l)return;var h=i.left-u.left+c,m=i.width-c+(u.right-i.right),g=l.width/2;h<g?g+=g-h:m<g&&(g=m),g<0?g=0:g>l.width&&(g=l.width),this.el_.style.right="-"+g+"px"}this.write(o+"%")},t.write=function(i){tf(this.el_,i)},t.updateVolume=function(i,s,a,o,l){var u=this;this.requestNamedAnimationFrame("VolumeLevelTooltip#updateVolume",function(){u.update(i,s,a,o.toFixed(0)),l&&l()})},e})(Ct);Ct.registerComponent("VolumeLevelTooltip",L0e);var Z$=(function(r){$t(e,r);function e(n,i){var s;return s=r.call(this,n,i)||this,s.update=Cc(Wn(He(s),s.update),kl),s}var t=e.prototype;return t.createEl=function(){return r.prototype.createEl.call(this,"div",{className:"vjs-mouse-display"})},t.update=function(i,s,a){var o=this,l=100*s;this.getChild("volumeLevelTooltip").updateVolume(i,s,a,l,function(){a?o.el_.style.bottom=i.height*s+"px":o.el_.style.left=i.width*s+"px"})},e})(Ct);Z$.prototype.options_={children:["volumeLevelTooltip"]};Ct.registerComponent("MouseVolumeLevelDisplay",Z$);var yS=(function(r){$t(e,r);function e(n,i){var s;return s=r.call(this,n,i)||this,s.on("slideractive",function(a){return s.updateLastVolume_(a)}),s.on(n,"volumechange",function(a){return s.updateARIAAttributes(a)}),n.ready(function(){return s.updateARIAAttributes()}),s}var t=e.prototype;return t.createEl=function(){return r.prototype.createEl.call(this,"div",{className:"vjs-volume-bar vjs-slider-bar"},{"aria-label":this.localize("Volume Level"),"aria-live":"polite"})},t.handleMouseDown=function(i){lg(i)&&r.prototype.handleMouseDown.call(this,i)},t.handleMouseMove=function(i){var s=this.getChild("mouseVolumeLevelDisplay");if(s){var a=this.el(),o=Np(a),l=this.vertical(),u=dS(a,i);u=l?u.y:u.x,u=vS(u,0,1),s.update(o,u,l)}lg(i)&&(this.checkMuted(),this.player_.volume(this.calculateDistance(i)))},t.checkMuted=function(){this.player_.muted()&&this.player_.muted(!1)},t.getPercent=function(){return this.player_.muted()?0:this.player_.volume()},t.stepForward=function(){this.checkMuted(),this.player_.volume(this.player_.volume()+.1)},t.stepBack=function(){this.checkMuted(),this.player_.volume(this.player_.volume()-.1)},t.updateARIAAttributes=function(i){var s=this.player_.muted()?0:this.volumeAsPercentage_();this.el_.setAttribute("aria-valuenow",s),this.el_.setAttribute("aria-valuetext",s+"%")},t.volumeAsPercentage_=function(){return Math.round(this.player_.volume()*100)},t.updateLastVolume_=function(){var i=this,s=this.player_.volume();this.one("sliderinactive",function(){i.player_.volume()===0&&i.player_.lastVolume_(s)})},e})(Zk);yS.prototype.options_={children:["volumeLevel"],barName:"volumeLevel"};!la&&!Ac&&yS.prototype.options_.children.splice(0,0,"mouseVolumeLevelDisplay");yS.prototype.playerEvent="volumechange";Ct.registerComponent("VolumeBar",yS);var ej=(function(r){$t(e,r);function e(n,i){var s;return i===void 0&&(i={}),i.vertical=i.vertical||!1,(typeof i.volumeBar>"u"||sg(i.volumeBar))&&(i.volumeBar=i.volumeBar||{},i.volumeBar.vertical=i.vertical),s=r.call(this,n,i)||this,P0e(He(s),n),s.throttledHandleMouseMove=Cc(Wn(He(s),s.handleMouseMove),kl),s.handleMouseUpHandler_=function(a){return s.handleMouseUp(a)},s.on("mousedown",function(a){return s.handleMouseDown(a)}),s.on("touchstart",function(a){return s.handleMouseDown(a)}),s.on("mousemove",function(a){return s.handleMouseMove(a)}),s.on(s.volumeBar,["focus","slideractive"],function(){s.volumeBar.addClass("vjs-slider-active"),s.addClass("vjs-slider-active"),s.trigger("slideractive")}),s.on(s.volumeBar,["blur","sliderinactive"],function(){s.volumeBar.removeClass("vjs-slider-active"),s.removeClass("vjs-slider-active"),s.trigger("sliderinactive")}),s}var t=e.prototype;return t.createEl=function(){var i="vjs-volume-horizontal";return this.options_.vertical&&(i="vjs-volume-vertical"),r.prototype.createEl.call(this,"div",{className:"vjs-volume-control vjs-control "+i})},t.handleMouseDown=function(i){var s=this.el_.ownerDocument;this.on(s,"mousemove",this.throttledHandleMouseMove),this.on(s,"touchmove",this.throttledHandleMouseMove),this.on(s,"mouseup",this.handleMouseUpHandler_),this.on(s,"touchend",this.handleMouseUpHandler_)},t.handleMouseUp=function(i){var s=this.el_.ownerDocument;this.off(s,"mousemove",this.throttledHandleMouseMove),this.off(s,"touchmove",this.throttledHandleMouseMove),this.off(s,"mouseup",this.handleMouseUpHandler_),this.off(s,"touchend",this.handleMouseUpHandler_)},t.handleMouseMove=function(i){this.volumeBar.handleMouseMove(i)},e})(Ct);ej.prototype.options_={children:["volumeBar"]};Ct.registerComponent("VolumeControl",ej);var O0e=function(e,t){t.tech_&&!t.tech_.featuresMuteControl&&e.addClass("vjs-hidden"),e.on(t,"loadstart",function(){t.tech_.featuresMuteControl?e.removeClass("vjs-hidden"):e.addClass("vjs-hidden")})},tj=(function(r){$t(e,r);function e(n,i){var s;return s=r.call(this,n,i)||this,O0e(He(s),n),s.on(n,["loadstart","volumechange"],function(a){return s.update(a)}),s}var t=e.prototype;return t.buildCSSClass=function(){return"vjs-mute-control "+r.prototype.buildCSSClass.call(this)},t.handleClick=function(i){var s=this.player_.volume(),a=this.player_.lastVolume_();if(s===0){var o=a<.1?.1:a;this.player_.volume(o),this.player_.muted(!1)}else this.player_.muted(!this.player_.muted())},t.update=function(i){this.updateIcon_(),this.updateControlText_()},t.updateIcon_=function(){var i=this.player_.volume(),s=3;la&&this.player_.tech_&&this.player_.tech_.el_&&this.player_.muted(this.player_.tech_.el_.muted),i===0||this.player_.muted()?s=0:i<.33?s=1:i<.67&&(s=2);for(var a=0;a<4;a++)zg(this.el_,"vjs-vol-"+a);_c(this.el_,"vjs-vol-"+s)},t.updateControlText_=function(){var i=this.player_.muted()||this.player_.volume()===0,s=i?"Unmute":"Mute";this.controlText()!==s&&this.controlText(s)},e})(wl);tj.prototype.controlText_="Mute";Ct.registerComponent("MuteToggle",tj);var rj=(function(r){$t(e,r);function e(n,i){var s;return i===void 0&&(i={}),typeof i.inline<"u"?i.inline=i.inline:i.inline=!0,(typeof i.volumeControl>"u"||sg(i.volumeControl))&&(i.volumeControl=i.volumeControl||{},i.volumeControl.vertical=!i.inline),s=r.call(this,n,i)||this,s.handleKeyPressHandler_=function(a){return s.handleKeyPress(a)},s.on(n,["loadstart"],function(a){return s.volumePanelState_(a)}),s.on(s.muteToggle,"keyup",function(a){return s.handleKeyPress(a)}),s.on(s.volumeControl,"keyup",function(a){return s.handleVolumeControlKeyUp(a)}),s.on("keydown",function(a){return s.handleKeyPress(a)}),s.on("mouseover",function(a){return s.handleMouseOver(a)}),s.on("mouseout",function(a){return s.handleMouseOut(a)}),s.on(s.volumeControl,["slideractive"],s.sliderActive_),s.on(s.volumeControl,["sliderinactive"],s.sliderInactive_),s}var t=e.prototype;return t.sliderActive_=function(){this.addClass("vjs-slider-active")},t.sliderInactive_=function(){this.removeClass("vjs-slider-active")},t.volumePanelState_=function(){this.volumeControl.hasClass("vjs-hidden")&&this.muteToggle.hasClass("vjs-hidden")&&this.addClass("vjs-hidden"),this.volumeControl.hasClass("vjs-hidden")&&!this.muteToggle.hasClass("vjs-hidden")&&this.addClass("vjs-mute-toggle-only")},t.createEl=function(){var i="vjs-volume-panel-horizontal";return this.options_.inline||(i="vjs-volume-panel-vertical"),r.prototype.createEl.call(this,"div",{className:"vjs-volume-panel vjs-control "+i})},t.dispose=function(){this.handleMouseOut(),r.prototype.dispose.call(this)},t.handleVolumeControlKeyUp=function(i){Or.isEventKey(i,"Esc")&&this.muteToggle.focus()},t.handleMouseOver=function(i){this.addClass("vjs-hover"),go(Fe,"keyup",this.handleKeyPressHandler_)},t.handleMouseOut=function(i){this.removeClass("vjs-hover"),$s(Fe,"keyup",this.handleKeyPressHandler_)},t.handleKeyPress=function(i){Or.isEventKey(i,"Esc")&&this.handleMouseOut()},e})(Ct);rj.prototype.options_={children:["muteToggle","volumeControl"]};Ct.registerComponent("VolumePanel",rj);var nj=(function(r){$t(e,r);function e(n,i){var s;return s=r.call(this,n,i)||this,i&&(s.menuButton_=i.menuButton),s.focusedChild_=-1,s.on("keydown",function(a){return s.handleKeyDown(a)}),s.boundHandleBlur_=function(a){return s.handleBlur(a)},s.boundHandleTapClick_=function(a){return s.handleTapClick(a)},s}var t=e.prototype;return t.addEventListenerForItem=function(i){i instanceof Ct&&(this.on(i,"blur",this.boundHandleBlur_),this.on(i,["tap","click"],this.boundHandleTapClick_))},t.removeEventListenerForItem=function(i){i instanceof Ct&&(this.off(i,"blur",this.boundHandleBlur_),this.off(i,["tap","click"],this.boundHandleTapClick_))},t.removeChild=function(i){typeof i=="string"&&(i=this.getChild(i)),this.removeEventListenerForItem(i),r.prototype.removeChild.call(this,i)},t.addItem=function(i){var s=this.addChild(i);s&&this.addEventListenerForItem(s)},t.createEl=function(){var i=this.options_.contentElType||"ul";this.contentEl_=cn(i,{className:"vjs-menu-content"}),this.contentEl_.setAttribute("role","menu");var s=r.prototype.createEl.call(this,"div",{append:this.contentEl_,className:"vjs-menu"});return s.appendChild(this.contentEl_),go(s,"click",function(a){a.preventDefault(),a.stopImmediatePropagation()}),s},t.dispose=function(){this.contentEl_=null,this.boundHandleBlur_=null,this.boundHandleTapClick_=null,r.prototype.dispose.call(this)},t.handleBlur=function(i){var s=i.relatedTarget||Fe.activeElement;if(!this.children().some(function(o){return o.el()===s})){var a=this.menuButton_;a&&a.buttonPressed_&&s!==a.el().firstChild&&a.unpressButton()}},t.handleTapClick=function(i){if(this.menuButton_){this.menuButton_.unpressButton();var s=this.children();if(!Array.isArray(s))return;var a=s.filter(function(o){return o.el()===i.target})[0];if(!a)return;a.name()!=="CaptionSettingsMenuItem"&&this.menuButton_.focus()}},t.handleKeyDown=function(i){Or.isEventKey(i,"Left")||Or.isEventKey(i,"Down")?(i.preventDefault(),i.stopPropagation(),this.stepForward()):(Or.isEventKey(i,"Right")||Or.isEventKey(i,"Up"))&&(i.preventDefault(),i.stopPropagation(),this.stepBack())},t.stepForward=function(){var i=0;this.focusedChild_!==void 0&&(i=this.focusedChild_+1),this.focus(i)},t.stepBack=function(){var i=0;this.focusedChild_!==void 0&&(i=this.focusedChild_-1),this.focus(i)},t.focus=function(i){i===void 0&&(i=0);var s=this.children().slice(),a=s.length&&s[0].hasClass("vjs-menu-title");a&&s.shift(),s.length>0&&(i<0?i=0:i>=s.length&&(i=s.length-1),this.focusedChild_=i,s[i].el_.focus())},e})(Ct);Ct.registerComponent("Menu",nj);var rA=(function(r){$t(e,r);function e(n,i){var s;i===void 0&&(i={}),s=r.call(this,n,i)||this,s.menuButton_=new wl(n,i),s.menuButton_.controlText(s.controlText_),s.menuButton_.el_.setAttribute("aria-haspopup","true");var a=wl.prototype.buildCSSClass();s.menuButton_.el_.className=s.buildCSSClass()+" "+a,s.menuButton_.removeClass("vjs-control"),s.addChild(s.menuButton_),s.update(),s.enabled_=!0;var o=function(u){return s.handleClick(u)};return s.handleMenuKeyUp_=function(l){return s.handleMenuKeyUp(l)},s.on(s.menuButton_,"tap",o),s.on(s.menuButton_,"click",o),s.on(s.menuButton_,"keydown",function(l){return s.handleKeyDown(l)}),s.on(s.menuButton_,"mouseenter",function(){s.addClass("vjs-hover"),s.menu.show(),go(Fe,"keyup",s.handleMenuKeyUp_)}),s.on("mouseleave",function(l){return s.handleMouseLeave(l)}),s.on("keydown",function(l){return s.handleSubmenuKeyDown(l)}),s}var t=e.prototype;return t.update=function(){var i=this.createMenu();this.menu&&(this.menu.dispose(),this.removeChild(this.menu)),this.menu=i,this.addChild(i),this.buttonPressed_=!1,this.menuButton_.el_.setAttribute("aria-expanded","false"),this.items&&this.items.length<=this.hideThreshold_?(this.hide(),this.menu.contentEl_.removeAttribute("role")):(this.show(),this.menu.contentEl_.setAttribute("role","menu"))},t.createMenu=function(){var i=new nj(this.player_,{menuButton:this});if(this.hideThreshold_=0,this.options_.title){var s=cn("li",{className:"vjs-menu-title",textContent:yi(this.options_.title),tabIndex:-1}),a=new Ct(this.player_,{el:s});i.addItem(a)}if(this.items=this.createItems(),this.items)for(var o=0;o<this.items.length;o++)i.addItem(this.items[o]);return i},t.createItems=function(){},t.createEl=function(){return r.prototype.createEl.call(this,"div",{className:this.buildWrapperCSSClass()},{})},t.buildWrapperCSSClass=function(){var i="vjs-menu-button";this.options_.inline===!0?i+="-inline":i+="-popup";var s=wl.prototype.buildCSSClass();return"vjs-menu-button "+i+" "+s+" "+r.prototype.buildCSSClass.call(this)},t.buildCSSClass=function(){var i="vjs-menu-button";return this.options_.inline===!0?i+="-inline":i+="-popup","vjs-menu-button "+i+" "+r.prototype.buildCSSClass.call(this)},t.controlText=function(i,s){return s===void 0&&(s=this.menuButton_.el()),this.menuButton_.controlText(i,s)},t.dispose=function(){this.handleMouseLeave(),r.prototype.dispose.call(this)},t.handleClick=function(i){this.buttonPressed_?this.unpressButton():this.pressButton()},t.handleMouseLeave=function(i){this.removeClass("vjs-hover"),$s(Fe,"keyup",this.handleMenuKeyUp_)},t.focus=function(){this.menuButton_.focus()},t.blur=function(){this.menuButton_.blur()},t.handleKeyDown=function(i){Or.isEventKey(i,"Esc")||Or.isEventKey(i,"Tab")?(this.buttonPressed_&&this.unpressButton(),Or.isEventKey(i,"Tab")||(i.preventDefault(),this.menuButton_.focus())):(Or.isEventKey(i,"Up")||Or.isEventKey(i,"Down"))&&(this.buttonPressed_||(i.preventDefault(),this.pressButton()))},t.handleMenuKeyUp=function(i){(Or.isEventKey(i,"Esc")||Or.isEventKey(i,"Tab"))&&this.removeClass("vjs-hover")},t.handleSubmenuKeyPress=function(i){this.handleSubmenuKeyDown(i)},t.handleSubmenuKeyDown=function(i){(Or.isEventKey(i,"Esc")||Or.isEventKey(i,"Tab"))&&(this.buttonPressed_&&this.unpressButton(),Or.isEventKey(i,"Tab")||(i.preventDefault(),this.menuButton_.focus()))},t.pressButton=function(){if(this.enabled_){if(this.buttonPressed_=!0,this.menu.show(),this.menu.lockShowing(),this.menuButton_.el_.setAttribute("aria-expanded","true"),la&&y$())return;this.menu.focus()}},t.unpressButton=function(){this.enabled_&&(this.buttonPressed_=!1,this.menu.unlockShowing(),this.menu.hide(),this.menuButton_.el_.setAttribute("aria-expanded","false"))},t.disable=function(){this.unpressButton(),this.enabled_=!1,this.addClass("vjs-disabled"),this.menuButton_.disable()},t.enable=function(){this.enabled_=!0,this.removeClass("vjs-disabled"),this.menuButton_.enable()},e})(Ct);Ct.registerComponent("MenuButton",rA);var nA=(function(r){$t(e,r);function e(t,n){var i,s=n.tracks;if(i=r.call(this,t,n)||this,i.items.length<=1&&i.hide(),!s)return He(i);var a=Wn(He(i),i.update);return s.addEventListener("removetrack",a),s.addEventListener("addtrack",a),s.addEventListener("labelchange",a),i.player_.on("ready",a),i.player_.on("dispose",function(){s.removeEventListener("removetrack",a),s.removeEventListener("addtrack",a),s.removeEventListener("labelchange",a)}),i}return e})(rA);Ct.registerComponent("TrackButton",nA);var M0e=["Tab","Esc","Up","Down","Right","Left"],Vg=(function(r){$t(e,r);function e(n,i){var s;return s=r.call(this,n,i)||this,s.selectable=i.selectable,s.isSelected_=i.selected||!1,s.multiSelectable=i.multiSelectable,s.selected(s.isSelected_),s.selectable?s.multiSelectable?s.el_.setAttribute("role","menuitemcheckbox"):s.el_.setAttribute("role","menuitemradio"):s.el_.setAttribute("role","menuitem"),s}var t=e.prototype;return t.createEl=function(i,s,a){this.nonIconControl=!0;var o=r.prototype.createEl.call(this,"li",li({className:"vjs-menu-item",tabIndex:-1},s),a);return o.replaceChild(cn("span",{className:"vjs-menu-item-text",textContent:this.localize(this.options_.label)}),o.querySelector(".vjs-icon-placeholder")),o},t.handleKeyDown=function(i){M0e.some(function(s){return Or.isEventKey(i,s)})||r.prototype.handleKeyDown.call(this,i)},t.handleClick=function(i){this.selected(!0)},t.selected=function(i){this.selectable&&(i?(this.addClass("vjs-selected"),this.el_.setAttribute("aria-checked","true"),this.controlText(", selected"),this.isSelected_=!0):(this.removeClass("vjs-selected"),this.el_.setAttribute("aria-checked","false"),this.controlText(""),this.isSelected_=!1))},e})(gS);Ct.registerComponent("MenuItem",Vg);var Wg=(function(r){$t(e,r);function e(n,i){var s,a=i.track,o=n.textTracks();i.label=a.label||a.language||"Unknown",i.selected=a.mode==="showing",s=r.call(this,n,i)||this,s.track=a,s.kinds=(i.kinds||[i.kind||s.track.kind]).filter(Boolean);var l=function(){for(var m=arguments.length,g=new Array(m),y=0;y<m;y++)g[y]=arguments[y];s.handleTracksChange.apply(He(s),g)},u=function(){for(var m=arguments.length,g=new Array(m),y=0;y<m;y++)g[y]=arguments[y];s.handleSelectedLanguageChange.apply(He(s),g)};if(n.on(["loadstart","texttrackchange"],l),o.addEventListener("change",l),o.addEventListener("selectedlanguagechange",u),s.on("dispose",function(){n.off(["loadstart","texttrackchange"],l),o.removeEventListener("change",l),o.removeEventListener("selectedlanguagechange",u)}),o.onchange===void 0){var c;s.on(["tap","click"],function(){if(typeof X.Event!="object")try{c=new X.Event("change")}catch{}c||(c=Fe.createEvent("Event"),c.initEvent("change",!0,!0)),o.dispatchEvent(c)})}return s.handleTracksChange(),s}var t=e.prototype;return t.handleClick=function(i){var s=this.track,a=this.player_.textTracks();if(r.prototype.handleClick.call(this,i),!!a)for(var o=0;o<a.length;o++){var l=a[o];this.kinds.indexOf(l.kind)!==-1&&(l===s?l.mode!=="showing"&&(l.mode="showing"):l.mode!=="disabled"&&(l.mode="disabled"))}},t.handleTracksChange=function(i){var s=this.track.mode==="showing";s!==this.isSelected_&&this.selected(s)},t.handleSelectedLanguageChange=function(i){if(this.track.mode==="showing"){var s=this.player_.cache_.selectedLanguage;if(s&&s.enabled&&s.language===this.track.language&&s.kind!==this.track.kind)return;this.player_.cache_.selectedLanguage={enabled:!0,language:this.track.language,kind:this.track.kind}}},t.dispose=function(){this.track=null,r.prototype.dispose.call(this)},e})(Vg);Ct.registerComponent("TextTrackMenuItem",Wg);var ij=(function(r){$t(e,r);function e(n,i){return i.track={player:n,kind:i.kind,kinds:i.kinds,default:!1,mode:"disabled"},i.kinds||(i.kinds=[i.kind]),i.label?i.track.label=i.label:i.track.label=i.kinds.join(" and ")+" off",i.selectable=!0,i.multiSelectable=!1,r.call(this,n,i)||this}var t=e.prototype;return t.handleTracksChange=function(i){for(var s=this.player().textTracks(),a=!0,o=0,l=s.length;o<l;o++){var u=s[o];if(this.options_.kinds.indexOf(u.kind)>-1&&u.mode==="showing"){a=!1;break}}a!==this.isSelected_&&this.selected(a)},t.handleSelectedLanguageChange=function(i){for(var s=this.player().textTracks(),a=!0,o=0,l=s.length;o<l;o++){var u=s[o];if(["captions","descriptions","subtitles"].indexOf(u.kind)>-1&&u.mode==="showing"){a=!1;break}}a&&(this.player_.cache_.selectedLanguage={enabled:!1})},e})(Wg);Ct.registerComponent("OffTextTrackMenuItem",ij);var hm=(function(r){$t(e,r);function e(n,i){return i===void 0&&(i={}),i.tracks=n.textTracks(),r.call(this,n,i)||this}var t=e.prototype;return t.createItems=function(i,s){i===void 0&&(i=[]),s===void 0&&(s=Wg);var a;this.label_&&(a=this.label_+" off"),i.push(new ij(this.player_,{kinds:this.kinds_,kind:this.kind_,label:a})),this.hideThreshold_+=1;var o=this.player_.textTracks();Array.isArray(this.kinds_)||(this.kinds_=[this.kind_]);for(var l=0;l<o.length;l++){var u=o[l];if(this.kinds_.indexOf(u.kind)>-1){var c=new s(this.player_,{track:u,kinds:this.kinds_,kind:this.kind_,selectable:!0,multiSelectable:!1});c.addClass("vjs-"+u.kind+"-menu-item"),i.push(c)}}return i},e})(nA);Ct.registerComponent("TextTrackButton",hm);var sj=(function(r){$t(e,r);function e(n,i){var s,a=i.track,o=i.cue,l=n.currentTime();return i.selectable=!0,i.multiSelectable=!1,i.label=o.text,i.selected=o.startTime<=l&&l<o.endTime,s=r.call(this,n,i)||this,s.track=a,s.cue=o,s}var t=e.prototype;return t.handleClick=function(i){r.prototype.handleClick.call(this),this.player_.currentTime(this.cue.startTime)},e})(Vg);Ct.registerComponent("ChaptersTrackMenuItem",sj);var iA=(function(r){$t(e,r);function e(n,i,s){var a;return a=r.call(this,n,i,s)||this,a.selectCurrentItem_=function(){a.items.forEach(function(o){o.selected(a.track_.activeCues[0]===o.cue)})},a}var t=e.prototype;return t.buildCSSClass=function(){return"vjs-chapters-button "+r.prototype.buildCSSClass.call(this)},t.buildWrapperCSSClass=function(){return"vjs-chapters-button "+r.prototype.buildWrapperCSSClass.call(this)},t.update=function(i){if(!(i&&i.track&&i.track.kind!=="chapters")){var s=this.findChaptersTrack();s!==this.track_?(this.setTrack(s),r.prototype.update.call(this)):(!this.items||s&&s.cues&&s.cues.length!==this.items.length)&&r.prototype.update.call(this)}},t.setTrack=function(i){if(this.track_!==i){if(this.updateHandler_||(this.updateHandler_=this.update.bind(this)),this.track_){var s=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_);s&&s.removeEventListener("load",this.updateHandler_),this.track_.removeEventListener("cuechange",this.selectCurrentItem_),this.track_=null}if(this.track_=i,this.track_){this.track_.mode="hidden";var a=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_);a&&a.addEventListener("load",this.updateHandler_),this.track_.addEventListener("cuechange",this.selectCurrentItem_)}}},t.findChaptersTrack=function(){for(var i=this.player_.textTracks()||[],s=i.length-1;s>=0;s--){var a=i[s];if(a.kind===this.kind_)return a}},t.getMenuCaption=function(){return this.track_&&this.track_.label?this.track_.label:this.localize(yi(this.kind_))},t.createMenu=function(){return this.options_.title=this.getMenuCaption(),r.prototype.createMenu.call(this)},t.createItems=function(){var i=[];if(!this.track_)return i;var s=this.track_.cues;if(!s)return i;for(var a=0,o=s.length;a<o;a++){var l=s[a],u=new sj(this.player_,{track:this.track_,cue:l});i.push(u)}return i},e})(hm);iA.prototype.kind_="chapters";iA.prototype.controlText_="Chapters";Ct.registerComponent("ChaptersButton",iA);var sA=(function(r){$t(e,r);function e(n,i,s){var a;a=r.call(this,n,i,s)||this;var o=n.textTracks(),l=Wn(He(a),a.handleTracksChange);return o.addEventListener("change",l),a.on("dispose",function(){o.removeEventListener("change",l)}),a}var t=e.prototype;return t.handleTracksChange=function(i){for(var s=this.player().textTracks(),a=!1,o=0,l=s.length;o<l;o++){var u=s[o];if(u.kind!==this.kind_&&u.mode==="showing"){a=!0;break}}a?this.disable():this.enable()},t.buildCSSClass=function(){return"vjs-descriptions-button "+r.prototype.buildCSSClass.call(this)},t.buildWrapperCSSClass=function(){return"vjs-descriptions-button "+r.prototype.buildWrapperCSSClass.call(this)},e})(hm);sA.prototype.kind_="descriptions";sA.prototype.controlText_="Descriptions";Ct.registerComponent("DescriptionsButton",sA);var aA=(function(r){$t(e,r);function e(n,i,s){return r.call(this,n,i,s)||this}var t=e.prototype;return t.buildCSSClass=function(){return"vjs-subtitles-button "+r.prototype.buildCSSClass.call(this)},t.buildWrapperCSSClass=function(){return"vjs-subtitles-button "+r.prototype.buildWrapperCSSClass.call(this)},e})(hm);aA.prototype.kind_="subtitles";aA.prototype.controlText_="Subtitles";Ct.registerComponent("SubtitlesButton",aA);var oA=(function(r){$t(e,r);function e(n,i){var s;return i.track={player:n,kind:i.kind,label:i.kind+" settings",selectable:!1,default:!1,mode:"disabled"},i.selectable=!1,i.name="CaptionSettingsMenuItem",s=r.call(this,n,i)||this,s.addClass("vjs-texttrack-settings"),s.controlText(", opens "+i.kind+" settings dialog"),s}var t=e.prototype;return t.handleClick=function(i){this.player().getChild("textTrackSettings").open()},e})(Wg);Ct.registerComponent("CaptionSettingsMenuItem",oA);var lA=(function(r){$t(e,r);function e(n,i,s){return r.call(this,n,i,s)||this}var t=e.prototype;return t.buildCSSClass=function(){return"vjs-captions-button "+r.prototype.buildCSSClass.call(this)},t.buildWrapperCSSClass=function(){return"vjs-captions-button "+r.prototype.buildWrapperCSSClass.call(this)},t.createItems=function(){var i=[];return!(this.player().tech_&&this.player().tech_.featuresNativeTextTracks)&&this.player().getChild("textTrackSettings")&&(i.push(new oA(this.player_,{kind:this.kind_})),this.hideThreshold_+=1),r.prototype.createItems.call(this,i)},e})(hm);lA.prototype.kind_="captions";lA.prototype.controlText_="Captions";Ct.registerComponent("CaptionsButton",lA);var aj=(function(r){$t(e,r);function e(){return r.apply(this,arguments)||this}var t=e.prototype;return t.createEl=function(i,s,a){var o=r.prototype.createEl.call(this,i,s,a),l=o.querySelector(".vjs-menu-item-text");return this.options_.track.kind==="captions"&&(l.appendChild(cn("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),l.appendChild(cn("span",{className:"vjs-control-text",textContent:" "+this.localize("Captions")}))),o},e})(Wg);Ct.registerComponent("SubsCapsMenuItem",aj);var uA=(function(r){$t(e,r);function e(n,i){var s;return i===void 0&&(i={}),s=r.call(this,n,i)||this,s.label_="subtitles",["en","en-us","en-ca","fr-ca"].indexOf(s.player_.language_)>-1&&(s.label_="captions"),s.menuButton_.controlText(yi(s.label_)),s}var t=e.prototype;return t.buildCSSClass=function(){return"vjs-subs-caps-button "+r.prototype.buildCSSClass.call(this)},t.buildWrapperCSSClass=function(){return"vjs-subs-caps-button "+r.prototype.buildWrapperCSSClass.call(this)},t.createItems=function(){var i=[];return!(this.player().tech_&&this.player().tech_.featuresNativeTextTracks)&&this.player().getChild("textTrackSettings")&&(i.push(new oA(this.player_,{kind:this.label_})),this.hideThreshold_+=1),i=r.prototype.createItems.call(this,i,aj),i},e})(hm);uA.prototype.kinds_=["captions","subtitles"];uA.prototype.controlText_="Subtitles";Ct.registerComponent("SubsCapsButton",uA);var oj=(function(r){$t(e,r);function e(n,i){var s,a=i.track,o=n.audioTracks();i.label=a.label||a.language||"Unknown",i.selected=a.enabled,s=r.call(this,n,i)||this,s.track=a,s.addClass("vjs-"+a.kind+"-menu-item");var l=function(){for(var c=arguments.length,h=new Array(c),m=0;m<c;m++)h[m]=arguments[m];s.handleTracksChange.apply(He(s),h)};return o.addEventListener("change",l),s.on("dispose",function(){o.removeEventListener("change",l)}),s}var t=e.prototype;return t.createEl=function(i,s,a){var o=r.prototype.createEl.call(this,i,s,a),l=o.querySelector(".vjs-menu-item-text");return this.options_.track.kind==="main-desc"&&(l.appendChild(cn("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),l.appendChild(cn("span",{className:"vjs-control-text",textContent:" "+this.localize("Descriptions")}))),o},t.handleClick=function(i){if(r.prototype.handleClick.call(this,i),this.track.enabled=!0,this.player_.tech_.featuresNativeAudioTracks)for(var s=this.player_.audioTracks(),a=0;a<s.length;a++){var o=s[a];o!==this.track&&(o.enabled=o===this.track)}},t.handleTracksChange=function(i){this.selected(this.track.enabled)},e})(Vg);Ct.registerComponent("AudioTrackMenuItem",oj);var lj=(function(r){$t(e,r);function e(n,i){return i===void 0&&(i={}),i.tracks=n.audioTracks(),r.call(this,n,i)||this}var t=e.prototype;return t.buildCSSClass=function(){return"vjs-audio-button "+r.prototype.buildCSSClass.call(this)},t.buildWrapperCSSClass=function(){return"vjs-audio-button "+r.prototype.buildWrapperCSSClass.call(this)},t.createItems=function(i){i===void 0&&(i=[]),this.hideThreshold_=1;for(var s=this.player_.audioTracks(),a=0;a<s.length;a++){var o=s[a];i.push(new oj(this.player_,{track:o,selectable:!0,multiSelectable:!1}))}return i},e})(nA);lj.prototype.controlText_="Audio Track";Ct.registerComponent("AudioTrackButton",lj);var cA=(function(r){$t(e,r);function e(n,i){var s,a=i.rate,o=parseFloat(a,10);return i.label=a,i.selected=o===n.playbackRate(),i.selectable=!0,i.multiSelectable=!1,s=r.call(this,n,i)||this,s.label=a,s.rate=o,s.on(n,"ratechange",function(l){return s.update(l)}),s}var t=e.prototype;return t.handleClick=function(i){r.prototype.handleClick.call(this),this.player().playbackRate(this.rate)},t.update=function(i){this.selected(this.player().playbackRate()===this.rate)},e})(Vg);cA.prototype.contentElType="button";Ct.registerComponent("PlaybackRateMenuItem",cA);var uj=(function(r){$t(e,r);function e(n,i){var s;return s=r.call(this,n,i)||this,s.menuButton_.el_.setAttribute("aria-describedby",s.labelElId_),s.updateVisibility(),s.updateLabel(),s.on(n,"loadstart",function(a){return s.updateVisibility(a)}),s.on(n,"ratechange",function(a){return s.updateLabel(a)}),s.on(n,"playbackrateschange",function(a){return s.handlePlaybackRateschange(a)}),s}var t=e.prototype;return t.createEl=function(){var i=r.prototype.createEl.call(this);return this.labelElId_="vjs-playback-rate-value-label-"+this.id_,this.labelEl_=cn("div",{className:"vjs-playback-rate-value",id:this.labelElId_,textContent:"1x"}),i.appendChild(this.labelEl_),i},t.dispose=function(){this.labelEl_=null,r.prototype.dispose.call(this)},t.buildCSSClass=function(){return"vjs-playback-rate "+r.prototype.buildCSSClass.call(this)},t.buildWrapperCSSClass=function(){return"vjs-playback-rate "+r.prototype.buildWrapperCSSClass.call(this)},t.createItems=function(){for(var i=this.playbackRates(),s=[],a=i.length-1;a>=0;a--)s.push(new cA(this.player(),{rate:i[a]+"x"}));return s},t.updateARIAAttributes=function(){this.el().setAttribute("aria-valuenow",this.player().playbackRate())},t.handleClick=function(i){var s=this.player().playbackRate(),a=this.playbackRates(),o=a.indexOf(s),l=(o+1)%a.length;this.player().playbackRate(a[l])},t.handlePlaybackRateschange=function(i){this.update()},t.playbackRates=function(){var i=this.player();return i.playbackRates&&i.playbackRates()||[]},t.playbackRateSupported=function(){return this.player().tech_&&this.player().tech_.featuresPlaybackRate&&this.playbackRates()&&this.playbackRates().length>0},t.updateVisibility=function(i){this.playbackRateSupported()?this.removeClass("vjs-hidden"):this.addClass("vjs-hidden")},t.updateLabel=function(i){this.playbackRateSupported()&&(this.labelEl_.textContent=this.player().playbackRate()+"x")},e})(rA);uj.prototype.controlText_="Playback Rate";Ct.registerComponent("PlaybackRateMenuButton",uj);var cj=(function(r){$t(e,r);function e(){return r.apply(this,arguments)||this}var t=e.prototype;return t.buildCSSClass=function(){return"vjs-spacer "+r.prototype.buildCSSClass.call(this)},t.createEl=function(i,s,a){return i===void 0&&(i="div"),s===void 0&&(s={}),a===void 0&&(a={}),s.className||(s.className=this.buildCSSClass()),r.prototype.createEl.call(this,i,s,a)},e})(Ct);Ct.registerComponent("Spacer",cj);var F0e=(function(r){$t(e,r);function e(){return r.apply(this,arguments)||this}var t=e.prototype;return t.buildCSSClass=function(){return"vjs-custom-control-spacer "+r.prototype.buildCSSClass.call(this)},t.createEl=function(){return r.prototype.createEl.call(this,"div",{className:this.buildCSSClass(),textContent:""})},e})(cj);Ct.registerComponent("CustomControlSpacer",F0e);var Mx=(function(r){$t(e,r);function e(){return r.apply(this,arguments)||this}var t=e.prototype;return t.createEl=function(){return r.prototype.createEl.call(this,"div",{className:"vjs-control-bar",dir:"ltr"})},e})(Ct);Mx.prototype.options_={children:["playToggle","volumePanel","currentTimeDisplay","timeDivider","durationDisplay","progressControl","liveDisplay","seekToLive","remainingTimeDisplay","customControlSpacer","playbackRateMenuButton","chaptersButton","descriptionsButton","subsCapsButton","audioTrackButton","fullscreenToggle"]};"exitPictureInPicture"in Fe&&Mx.prototype.options_.children.splice(Mx.prototype.options_.children.length-1,0,"pictureInPictureToggle");Ct.registerComponent("ControlBar",Mx);var dj=(function(r){$t(e,r);function e(n,i){var s;return s=r.call(this,n,i)||this,s.on(n,"error",function(a){return s.open(a)}),s}var t=e.prototype;return t.buildCSSClass=function(){return"vjs-error-display "+r.prototype.buildCSSClass.call(this)},t.content=function(){var i=this.player().error();return i?this.localize(i.message):""},e})(um);dj.prototype.options_=tr({},um.prototype.options_,{pauseOnOpen:!1,fillAlways:!0,temporary:!1,uncloseable:!0});Ct.registerComponent("ErrorDisplay",dj);var bC="vjs-text-track-settings",P4=["#000","Black"],R4=["#00F","Blue"],L4=["#0FF","Cyan"],O4=["#0F0","Green"],M4=["#F0F","Magenta"],F4=["#F00","Red"],B4=["#FFF","White"],N4=["#FF0","Yellow"],SC=["1","Opaque"],TC=["0.5","Semi-Transparent"],U4=["0","Transparent"],Sh={backgroundColor:{selector:".vjs-bg-color > select",id:"captions-background-color-%s",label:"Color",options:[P4,B4,F4,O4,R4,N4,M4,L4]},backgroundOpacity:{selector:".vjs-bg-opacity > select",id:"captions-background-opacity-%s",label:"Transparency",options:[SC,TC,U4]},color:{selector:".vjs-fg-color > select",id:"captions-foreground-color-%s",label:"Color",options:[B4,P4,F4,O4,R4,N4,M4,L4]},edgeStyle:{selector:".vjs-edge-style > select",id:"%s",label:"Text Edge Style",options:[["none","None"],["raised","Raised"],["depressed","Depressed"],["uniform","Uniform"],["dropshadow","Dropshadow"]]},fontFamily:{selector:".vjs-font-family > select",id:"captions-font-family-%s",label:"Font Family",options:[["proportionalSansSerif","Proportional Sans-Serif"],["monospaceSansSerif","Monospace Sans-Serif"],["proportionalSerif","Proportional Serif"],["monospaceSerif","Monospace Serif"],["casual","Casual"],["script","Script"],["small-caps","Small Caps"]]},fontPercent:{selector:".vjs-font-percent > select",id:"captions-font-size-%s",label:"Font Size",options:[["0.50","50%"],["0.75","75%"],["1.00","100%"],["1.25","125%"],["1.50","150%"],["1.75","175%"],["2.00","200%"],["3.00","300%"],["4.00","400%"]],default:2,parser:function(e){return e==="1.00"?null:Number(e)}},textOpacity:{selector:".vjs-text-opacity > select",id:"captions-foreground-opacity-%s",label:"Transparency",options:[SC,TC]},windowColor:{selector:".vjs-window-color > select",id:"captions-window-color-%s",label:"Color"},windowOpacity:{selector:".vjs-window-opacity > select",id:"captions-window-opacity-%s",label:"Transparency",options:[U4,TC,SC]}};Sh.windowColor.options=Sh.backgroundColor.options;function hj(r,e){if(e&&(r=e(r)),r&&r!=="none")return r}function B0e(r,e){var t=r.options[r.options.selectedIndex].value;return hj(t,e)}function N0e(r,e,t){if(e){for(var n=0;n<r.options.length;n++)if(hj(r.options[n].value,t)===e){r.selectedIndex=n;break}}}var U0e=(function(r){$t(e,r);function e(n,i){var s;return i.temporary=!1,s=r.call(this,n,i)||this,s.updateDisplay=s.updateDisplay.bind(He(s)),s.fill(),s.hasBeenOpened_=s.hasBeenFilled_=!0,s.endDialog=cn("p",{className:"vjs-control-text",textContent:s.localize("End of dialog window.")}),s.el().appendChild(s.endDialog),s.setDefaults(),i.persistTextTrackSettings===void 0&&(s.options_.persistTextTrackSettings=s.options_.playerOptions.persistTextTrackSettings),s.on(s.$(".vjs-done-button"),"click",function(){s.saveSettings(),s.close()}),s.on(s.$(".vjs-default-button"),"click",function(){s.setDefaults(),s.updateDisplay()}),vp(Sh,function(a){s.on(s.$(a.selector),"change",s.updateDisplay)}),s.options_.persistTextTrackSettings&&s.restoreSettings(),s}var t=e.prototype;return t.dispose=function(){this.endDialog=null,r.prototype.dispose.call(this)},t.createElSelect_=function(i,s,a){var o=this;s===void 0&&(s=""),a===void 0&&(a="label");var l=Sh[i],u=l.id.replace("%s",this.id_),c=[s,u].join(" ").trim();return["<"+a+' id="'+u+'" class="'+(a==="label"?"vjs-label":"")+'">',this.localize(l.label),"</"+a+">",'<select aria-labelledby="'+c+'">'].concat(l.options.map(function(h){var m=u+"-"+h[1].replace(/\W+/g,"");return['<option id="'+m+'" value="'+h[0]+'" ','aria-labelledby="'+c+" "+m+'">',o.localize(h[1]),"</option>"].join("")})).concat("</select>").join("")},t.createElFgColor_=function(){var i="captions-text-legend-"+this.id_;return['<fieldset class="vjs-fg-color vjs-track-setting">','<legend id="'+i+'">',this.localize("Text"),"</legend>",this.createElSelect_("color",i),'<span class="vjs-text-opacity vjs-opacity">',this.createElSelect_("textOpacity",i),"</span>","</fieldset>"].join("")},t.createElBgColor_=function(){var i="captions-background-"+this.id_;return['<fieldset class="vjs-bg-color vjs-track-setting">','<legend id="'+i+'">',this.localize("Background"),"</legend>",this.createElSelect_("backgroundColor",i),'<span class="vjs-bg-opacity vjs-opacity">',this.createElSelect_("backgroundOpacity",i),"</span>","</fieldset>"].join("")},t.createElWinColor_=function(){var i="captions-window-"+this.id_;return['<fieldset class="vjs-window-color vjs-track-setting">','<legend id="'+i+'">',this.localize("Window"),"</legend>",this.createElSelect_("windowColor",i),'<span class="vjs-window-opacity vjs-opacity">',this.createElSelect_("windowOpacity",i),"</span>","</fieldset>"].join("")},t.createElColors_=function(){return cn("div",{className:"vjs-track-settings-colors",innerHTML:[this.createElFgColor_(),this.createElBgColor_(),this.createElWinColor_()].join("")})},t.createElFont_=function(){return cn("div",{className:"vjs-track-settings-font",innerHTML:['<fieldset class="vjs-font-percent vjs-track-setting">',this.createElSelect_("fontPercent","","legend"),"</fieldset>",'<fieldset class="vjs-edge-style vjs-track-setting">',this.createElSelect_("edgeStyle","","legend"),"</fieldset>",'<fieldset class="vjs-font-family vjs-track-setting">',this.createElSelect_("fontFamily","","legend"),"</fieldset>"].join("")})},t.createElControls_=function(){var i=this.localize("restore all settings to the default values");return cn("div",{className:"vjs-track-settings-controls",innerHTML:['<button type="button" class="vjs-default-button" title="'+i+'">',this.localize("Reset"),'<span class="vjs-control-text"> '+i+"</span>","</button>",'<button type="button" class="vjs-done-button">'+this.localize("Done")+"</button>"].join("")})},t.content=function(){return[this.createElColors_(),this.createElFont_(),this.createElControls_()]},t.label=function(){return this.localize("Caption Settings Dialog")},t.description=function(){return this.localize("Beginning of dialog window. Escape will cancel and close the window.")},t.buildCSSClass=function(){return r.prototype.buildCSSClass.call(this)+" vjs-text-track-settings"},t.getValues=function(){var i=this;return kme(Sh,function(s,a,o){var l=B0e(i.$(a.selector),a.parser);return l!==void 0&&(s[o]=l),s},{})},t.setValues=function(i){var s=this;vp(Sh,function(a,o){N0e(s.$(a.selector),i[o],a.parser)})},t.setDefaults=function(){var i=this;vp(Sh,function(s){var a=s.hasOwnProperty("default")?s.default:0;i.$(s.selector).selectedIndex=a})},t.restoreSettings=function(){var i;try{i=JSON.parse(X.localStorage.getItem(bC))}catch(s){Gr.warn(s)}i&&this.setValues(i)},t.saveSettings=function(){if(this.options_.persistTextTrackSettings){var i=this.getValues();try{Object.keys(i).length?X.localStorage.setItem(bC,JSON.stringify(i)):X.localStorage.removeItem(bC)}catch(s){Gr.warn(s)}}},t.updateDisplay=function(){var i=this.player_.getChild("textTrackDisplay");i&&i.updateDisplay()},t.conditionalBlur_=function(){this.previouslyActiveEl_=null;var i=this.player_.controlBar,s=i&&i.subsCapsButton,a=i&&i.captionsButton;s?s.focus():a&&a.focus()},e})(um);Ct.registerComponent("TextTrackSettings",U0e);var $0e=(function(r){$t(e,r);function e(n,i){var s,a=i.ResizeObserver||X.ResizeObserver;i.ResizeObserver===null&&(a=!1);var o=Vn({createEl:!a,reportTouchActivity:!1},i);return s=r.call(this,n,o)||this,s.ResizeObserver=i.ResizeObserver||X.ResizeObserver,s.loadListener_=null,s.resizeObserver_=null,s.debouncedHandler_=Nme(function(){s.resizeHandler()},100,!1,He(s)),a?(s.resizeObserver_=new s.ResizeObserver(s.debouncedHandler_),s.resizeObserver_.observe(n.el())):(s.loadListener_=function(){if(!(!s.el_||!s.el_.contentWindow)){var l=s.debouncedHandler_,u=s.unloadListener_=function(){$s(this,"resize",l),$s(this,"unload",u),u=null};go(s.el_.contentWindow,"unload",u),go(s.el_.contentWindow,"resize",l)}},s.one("load",s.loadListener_)),s}var t=e.prototype;return t.createEl=function(){return r.prototype.createEl.call(this,"iframe",{className:"vjs-resize-manager",tabIndex:-1,title:this.localize("No content")},{"aria-hidden":"true"})},t.resizeHandler=function(){!this.player_||!this.player_.trigger||this.player_.trigger("playerresize")},t.dispose=function(){this.debouncedHandler_&&this.debouncedHandler_.cancel(),this.resizeObserver_&&(this.player_.el()&&this.resizeObserver_.unobserve(this.player_.el()),this.resizeObserver_.disconnect()),this.loadListener_&&this.off("load",this.loadListener_),this.el_&&this.el_.contentWindow&&this.unloadListener_&&this.unloadListener_.call(this.el_.contentWindow),this.ResizeObserver=null,this.resizeObserver=null,this.debouncedHandler_=null,this.loadListener_=null,r.prototype.dispose.call(this)},e})(Ct);Ct.registerComponent("ResizeManager",$0e);var j0e={trackingThreshold:20,liveTolerance:15},z0e=(function(r){$t(e,r);function e(n,i){var s,a=Vn(j0e,i,{createEl:!1});return s=r.call(this,n,a)||this,s.handleVisibilityChange_=function(o){return s.handleVisibilityChange(o)},s.trackLiveHandler_=function(){return s.trackLive_()},s.handlePlay_=function(o){return s.handlePlay(o)},s.handleFirstTimeupdate_=function(o){return s.handleFirstTimeupdate(o)},s.handleSeeked_=function(o){return s.handleSeeked(o)},s.seekToLiveEdge_=function(o){return s.seekToLiveEdge(o)},s.reset_(),s.on(s.player_,"durationchange",function(o){return s.handleDurationchange(o)}),s.on(s.player_,"canplay",function(){return s.toggleTracking()}),jg&&"hidden"in Fe&&"visibilityState"in Fe&&s.on(Fe,"visibilitychange",s.handleVisibilityChange_),s}var t=e.prototype;return t.handleVisibilityChange=function(){this.player_.duration()===1/0&&(Fe.hidden?this.stopTracking():this.startTracking())},t.trackLive_=function(){var i=this.player_.seekable();if(!(!i||!i.length)){var s=Number(X.performance.now().toFixed(4)),a=this.lastTime_===-1?0:(s-this.lastTime_)/1e3;this.lastTime_=s,this.pastSeekEnd_=this.pastSeekEnd()+a;var o=this.liveCurrentTime(),l=this.player_.currentTime(),u=this.player_.paused()||this.seekedBehindLive_||Math.abs(o-l)>this.options_.liveTolerance;(!this.timeupdateSeen_||o===1/0)&&(u=!1),u!==this.behindLiveEdge_&&(this.behindLiveEdge_=u,this.trigger("liveedgechange"))}},t.handleDurationchange=function(){this.toggleTracking()},t.toggleTracking=function(){this.player_.duration()===1/0&&this.liveWindow()>=this.options_.trackingThreshold?(this.player_.options_.liveui&&this.player_.addClass("vjs-liveui"),this.startTracking()):(this.player_.removeClass("vjs-liveui"),this.stopTracking())},t.startTracking=function(){this.isTracking()||(this.timeupdateSeen_||(this.timeupdateSeen_=this.player_.hasStarted()),this.trackingInterval_=this.setInterval(this.trackLiveHandler_,kl),this.trackLive_(),this.on(this.player_,["play","pause"],this.trackLiveHandler_),this.timeupdateSeen_?this.on(this.player_,"seeked",this.handleSeeked_):(this.one(this.player_,"play",this.handlePlay_),this.one(this.player_,"timeupdate",this.handleFirstTimeupdate_)))},t.handleFirstTimeupdate=function(){this.timeupdateSeen_=!0,this.on(this.player_,"seeked",this.handleSeeked_)},t.handleSeeked=function(){var i=Math.abs(this.liveCurrentTime()-this.player_.currentTime());this.seekedBehindLive_=this.nextSeekedFromUser_&&i>2,this.nextSeekedFromUser_=!1,this.trackLive_()},t.handlePlay=function(){this.one(this.player_,"timeupdate",this.seekToLiveEdge_)},t.reset_=function(){this.lastTime_=-1,this.pastSeekEnd_=0,this.lastSeekEnd_=-1,this.behindLiveEdge_=!0,this.timeupdateSeen_=!1,this.seekedBehindLive_=!1,this.nextSeekedFromUser_=!1,this.clearInterval(this.trackingInterval_),this.trackingInterval_=null,this.off(this.player_,["play","pause"],this.trackLiveHandler_),this.off(this.player_,"seeked",this.handleSeeked_),this.off(this.player_,"play",this.handlePlay_),this.off(this.player_,"timeupdate",this.handleFirstTimeupdate_),this.off(this.player_,"timeupdate",this.seekToLiveEdge_)},t.nextSeekedFromUser=function(){this.nextSeekedFromUser_=!0},t.stopTracking=function(){this.isTracking()&&(this.reset_(),this.trigger("liveedgechange"))},t.seekableEnd=function(){for(var i=this.player_.seekable(),s=[],a=i?i.length:0;a--;)s.push(i.end(a));return s.length?s.sort()[s.length-1]:1/0},t.seekableStart=function(){for(var i=this.player_.seekable(),s=[],a=i?i.length:0;a--;)s.push(i.start(a));return s.length?s.sort()[0]:0},t.liveWindow=function(){var i=this.liveCurrentTime();return i===1/0?0:i-this.seekableStart()},t.isLive=function(){return this.isTracking()},t.atLiveEdge=function(){return!this.behindLiveEdge()},t.liveCurrentTime=function(){return this.pastSeekEnd()+this.seekableEnd()},t.pastSeekEnd=function(){var i=this.seekableEnd();return this.lastSeekEnd_!==-1&&i!==this.lastSeekEnd_&&(this.pastSeekEnd_=0),this.lastSeekEnd_=i,this.pastSeekEnd_},t.behindLiveEdge=function(){return this.behindLiveEdge_},t.isTracking=function(){return typeof this.trackingInterval_=="number"},t.seekToLiveEdge=function(){this.seekedBehindLive_=!1,!this.atLiveEdge()&&(this.nextSeekedFromUser_=!1,this.player_.currentTime(this.liveCurrentTime()))},t.dispose=function(){this.off(Fe,"visibilitychange",this.handleVisibilityChange_),this.stopTracking(),r.prototype.dispose.call(this)},e})(Ct);Ct.registerComponent("LiveTracker",z0e);var _E=function(e){var t=e.el();if(t.hasAttribute("src"))return e.triggerSourceset(t.src),!0;var n=e.$$("source"),i=[],s="";if(!n.length)return!1;for(var a=0;a<n.length;a++){var o=n[a].src;o&&i.indexOf(o)===-1&&i.push(o)}return i.length?(i.length===1&&(s=i[0]),e.triggerSourceset(s),!0):!1},H0e=Object.defineProperty({},"innerHTML",{get:function(){return this.cloneNode(!0).innerHTML},set:function(e){var t=Fe.createElement(this.nodeName.toLowerCase());t.innerHTML=e;for(var n=Fe.createDocumentFragment();t.childNodes.length;)n.appendChild(t.childNodes[0]);return this.innerText="",X.Element.prototype.appendChild.call(this,n),this.innerHTML}}),fj=function(e,t){for(var n={},i=0;i<e.length&&(n=Object.getOwnPropertyDescriptor(e[i],t),!(n&&n.set&&n.get));i++);return n.enumerable=!0,n.configurable=!0,n},V0e=function(e){return fj([e.el(),X.HTMLMediaElement.prototype,X.Element.prototype,H0e],"innerHTML")},$4=function(e){var t=e.el();if(!t.resetSourceWatch_){var n={},i=V0e(e),s=function(o){return function(){for(var l=arguments.length,u=new Array(l),c=0;c<l;c++)u[c]=arguments[c];var h=o.apply(t,u);return _E(e),h}};["append","appendChild","insertAdjacentHTML"].forEach(function(a){t[a]&&(n[a]=t[a],t[a]=s(n[a]))}),Object.defineProperty(t,"innerHTML",Vn(i,{set:s(i.set)})),t.resetSourceWatch_=function(){t.resetSourceWatch_=null,Object.keys(n).forEach(function(a){t[a]=n[a]}),Object.defineProperty(t,"innerHTML",i)},e.one("sourceset",t.resetSourceWatch_)}},W0e=Object.defineProperty({},"src",{get:function(){return this.hasAttribute("src")?$$(X.Element.prototype.getAttribute.call(this,"src")):""},set:function(e){return X.Element.prototype.setAttribute.call(this,"src",e),e}}),q0e=function(e){return fj([e.el(),X.HTMLMediaElement.prototype,W0e],"src")},G0e=function(e){if(e.featuresSourceset){var t=e.el();if(!t.resetSourceset_){var n=q0e(e),i=t.setAttribute,s=t.load;Object.defineProperty(t,"src",Vn(n,{set:function(o){var l=n.set.call(t,o);return e.triggerSourceset(t.src),l}})),t.setAttribute=function(a,o){var l=i.call(t,a,o);return/src/i.test(a)&&e.triggerSourceset(t.src),l},t.load=function(){var a=s.call(t);return _E(e)||(e.triggerSourceset(""),$4(e)),a},t.currentSrc?e.triggerSourceset(t.currentSrc):_E(e)||$4(e),t.resetSourceset_=function(){t.resetSourceset_=null,t.load=s,t.setAttribute=i,Object.defineProperty(t,"src",n),t.resetSourceWatch_&&t.resetSourceWatch_()}}}},dA=function(e,t,n,i){i===void 0&&(i=!0);var s=function(l){return Object.defineProperty(e,t,{value:l,enumerable:!0,writable:!0})},a={configurable:!0,enumerable:!0,get:function(){var l=n();return s(l),l}};return i&&(a.set=s),Object.defineProperty(e,t,a)},qt=(function(r){$t(e,r);function e(n,i){var s;s=r.call(this,n,i)||this;var a=n.source,o=!1;if(s.featuresVideoFrameCallback=s.featuresVideoFrameCallback&&s.el_.tagName==="VIDEO",a&&(s.el_.currentSrc!==a.src||n.tag&&n.tag.initNetworkState_===3)?s.setSource(a):s.handleLateInit_(s.el_),n.enableSourceset&&s.setupSourcesetHandling_(),s.isScrubbing_=!1,s.el_.hasChildNodes()){for(var l=s.el_.childNodes,u=l.length,c=[];u--;){var h=l[u],m=h.nodeName.toLowerCase();m==="track"&&(s.featuresNativeTextTracks?(s.remoteTextTrackEls().addTrackElement_(h),s.remoteTextTracks().addTrack(h.track),s.textTracks().addTrack(h.track),!o&&!s.el_.hasAttribute("crossorigin")&&mS(h.src)&&(o=!0)):c.push(h))}for(var g=0;g<c.length;g++)s.el_.removeChild(c[g])}return s.proxyNativeTracks_(),s.featuresNativeTextTracks&&o&&Gr.warn(`Text Tracks are being loaded from another origin but the crossorigin attribute isn't used.
This may prevent text tracks from loading.`),s.restoreMetadataTracksInIOSNativePlayer_(),(Fp||$k||f$)&&n.nativeControlsForTouch===!0&&s.setControls(!0),s.proxyWebkitFullscreen_(),s.triggerReady(),s}var t=e.prototype;return t.dispose=function(){this.el_&&this.el_.resetSourceset_&&this.el_.resetSourceset_(),e.disposeMediaElement(this.el_),this.options_=null,r.prototype.dispose.call(this)},t.setupSourcesetHandling_=function(){G0e(this)},t.restoreMetadataTracksInIOSNativePlayer_=function(){var i=this.textTracks(),s,a=function(){s=[];for(var u=0;u<i.length;u++){var c=i[u];c.kind==="metadata"&&s.push({track:c,storedMode:c.mode})}};a(),i.addEventListener("change",a),this.on("dispose",function(){return i.removeEventListener("change",a)});var o=function l(){for(var u=0;u<s.length;u++){var c=s[u];c.track.mode==="disabled"&&c.track.mode!==c.storedMode&&(c.track.mode=c.storedMode)}i.removeEventListener("change",l)};this.on("webkitbeginfullscreen",function(){i.removeEventListener("change",a),i.removeEventListener("change",o),i.addEventListener("change",o)}),this.on("webkitendfullscreen",function(){i.removeEventListener("change",a),i.addEventListener("change",a),i.removeEventListener("change",o)})},t.overrideNative_=function(i,s){var a=this;if(s===this["featuresNative"+i+"Tracks"]){var o=i.toLowerCase();this[o+"TracksListeners_"]&&Object.keys(this[o+"TracksListeners_"]).forEach(function(l){var u=a.el()[o+"Tracks"];u.removeEventListener(l,a[o+"TracksListeners_"][l])}),this["featuresNative"+i+"Tracks"]=!s,this[o+"TracksListeners_"]=null,this.proxyNativeTracksForType_(o)}},t.overrideNativeAudioTracks=function(i){this.overrideNative_("Audio",i)},t.overrideNativeVideoTracks=function(i){this.overrideNative_("Video",i)},t.proxyNativeTracksForType_=function(i){var s=this,a=qo[i],o=this.el()[a.getterName],l=this[a.getterName]();if(!(!this["featuresNative"+a.capitalName+"Tracks"]||!o||!o.addEventListener)){var u={change:function(m){var g={type:"change",target:l,currentTarget:l,srcElement:l};l.trigger(g),i==="text"&&s[$p.remoteText.getterName]().trigger(g)},addtrack:function(m){l.addTrack(m.track)},removetrack:function(m){l.removeTrack(m.track)}},c=function(){for(var m=[],g=0;g<l.length;g++){for(var y=!1,v=0;v<o.length;v++)if(o[v]===l[g]){y=!0;break}y||m.push(l[g])}for(;m.length;)l.removeTrack(m.shift())};this[a.getterName+"Listeners_"]=u,Object.keys(u).forEach(function(h){var m=u[h];o.addEventListener(h,m),s.on("dispose",function(g){return o.removeEventListener(h,m)})}),this.on("loadstart",c),this.on("dispose",function(h){return s.off("loadstart",c)})}},t.proxyNativeTracks_=function(){var i=this;qo.names.forEach(function(s){i.proxyNativeTracksForType_(s)})},t.createEl=function(){var i=this.options_.tag;if(!i||!(this.options_.playerElIngest||this.movingMediaElementInDOM)){if(i){var s=i.cloneNode(!0);i.parentNode&&i.parentNode.insertBefore(s,i),e.disposeMediaElement(i),i=s}else{i=Fe.createElement("video");var a=this.options_.tag&&dc(this.options_.tag),o=Vn({},a);(!Fp||this.options_.nativeControlsForTouch!==!0)&&delete o.controls,b$(i,li(o,{id:this.options_.techId,class:"vjs-tech"}))}i.playerId=this.options_.playerId}typeof this.options_.preload<"u"&&Bp(i,"preload",this.options_.preload),this.options_.disablePictureInPicture!==void 0&&(i.disablePictureInPicture=this.options_.disablePictureInPicture);for(var l=["loop","muted","playsinline","autoplay"],u=0;u<l.length;u++){var c=l[u],h=this.options_[c];typeof h<"u"&&(h?Bp(i,c,c):cS(i,c),i[c]=h)}return i},t.handleLateInit_=function(i){if(!(i.networkState===0||i.networkState===3)){if(i.readyState===0){var s=!1,a=function(){s=!0};this.on("loadstart",a);var o=function(){s||this.trigger("loadstart")};this.on("loadedmetadata",o),this.ready(function(){this.off("loadstart",a),this.off("loadedmetadata",o),s||this.trigger("loadstart")});return}var l=["loadstart"];l.push("loadedmetadata"),i.readyState>=2&&l.push("loadeddata"),i.readyState>=3&&l.push("canplay"),i.readyState>=4&&l.push("canplaythrough"),this.ready(function(){l.forEach(function(u){this.trigger(u)},this)})}},t.setScrubbing=function(i){this.isScrubbing_=i},t.scrubbing=function(){return this.isScrubbing_},t.setCurrentTime=function(i){try{this.isScrubbing_&&this.el_.fastSeek&&uS?this.el_.fastSeek(i):this.el_.currentTime=i}catch(s){Gr(s,"Video is not ready. (Video.js)")}},t.duration=function(){var i=this;if(this.el_.duration===1/0&&Ac&&Dc&&this.el_.currentTime===0){var s=function a(){i.el_.currentTime>0&&(i.el_.duration===1/0&&i.trigger("durationchange"),i.off("timeupdate",a))};return this.on("timeupdate",s),NaN}return this.el_.duration||NaN},t.width=function(){return this.el_.offsetWidth},t.height=function(){return this.el_.offsetHeight},t.proxyWebkitFullscreen_=function(){var i=this;if("webkitDisplayingFullscreen"in this.el_){var s=function(){this.trigger("fullscreenchange",{isFullscreen:!1}),this.el_.controls&&!this.options_.nativeControlsForTouch&&this.controls()&&(this.el_.controls=!1)},a=function(){"webkitPresentationMode"in this.el_&&this.el_.webkitPresentationMode!=="picture-in-picture"&&(this.one("webkitendfullscreen",s),this.trigger("fullscreenchange",{isFullscreen:!0,nativeIOSFullscreen:!0}))};this.on("webkitbeginfullscreen",a),this.on("dispose",function(){i.off("webkitbeginfullscreen",a),i.off("webkitendfullscreen",s)})}},t.supportsFullScreen=function(){if(typeof this.el_.webkitEnterFullScreen=="function"){var i=X.navigator&&X.navigator.userAgent||"";if(/Android/.test(i)||!/Chrome|Mac OS X 10.5/.test(i))return!0}return!1},t.enterFullScreen=function(){var i=this.el_;if(i.paused&&i.networkState<=i.HAVE_METADATA)mu(this.el_.play()),this.setTimeout(function(){i.pause();try{i.webkitEnterFullScreen()}catch(s){this.trigger("fullscreenerror",s)}},0);else try{i.webkitEnterFullScreen()}catch(s){this.trigger("fullscreenerror",s)}},t.exitFullScreen=function(){if(!this.el_.webkitDisplayingFullscreen){this.trigger("fullscreenerror",new Error("The video is not fullscreen"));return}this.el_.webkitExitFullScreen()},t.requestPictureInPicture=function(){return this.el_.requestPictureInPicture()},t.requestVideoFrameCallback=function(i){return this.featuresVideoFrameCallback&&!this.el_.webkitKeys?this.el_.requestVideoFrameCallback(i):r.prototype.requestVideoFrameCallback.call(this,i)},t.cancelVideoFrameCallback=function(i){this.featuresVideoFrameCallback&&!this.el_.webkitKeys?this.el_.cancelVideoFrameCallback(i):r.prototype.cancelVideoFrameCallback.call(this,i)},t.src=function(i){if(i===void 0)return this.el_.src;this.setSrc(i)},t.reset=function(){e.resetMediaElement(this.el_)},t.currentSrc=function(){return this.currentSource_?this.currentSource_.src:this.el_.currentSrc},t.setControls=function(i){this.el_.controls=!!i},t.addTextTrack=function(i,s,a){return this.featuresNativeTextTracks?this.el_.addTextTrack(i,s,a):r.prototype.addTextTrack.call(this,i,s,a)},t.createRemoteTextTrack=function(i){if(!this.featuresNativeTextTracks)return r.prototype.createRemoteTextTrack.call(this,i);var s=Fe.createElement("track");return i.kind&&(s.kind=i.kind),i.label&&(s.label=i.label),(i.language||i.srclang)&&(s.srclang=i.language||i.srclang),i.default&&(s.default=i.default),i.id&&(s.id=i.id),i.src&&(s.src=i.src),s},t.addRemoteTextTrack=function(i,s){var a=r.prototype.addRemoteTextTrack.call(this,i,s);return this.featuresNativeTextTracks&&this.el().appendChild(a),a},t.removeRemoteTextTrack=function(i){if(r.prototype.removeRemoteTextTrack.call(this,i),this.featuresNativeTextTracks)for(var s=this.$$("track"),a=s.length;a--;)(i===s[a]||i===s[a].track)&&this.el().removeChild(s[a])},t.getVideoPlaybackQuality=function(){if(typeof this.el().getVideoPlaybackQuality=="function")return this.el().getVideoPlaybackQuality();var i={};return typeof this.el().webkitDroppedFrameCount<"u"&&typeof this.el().webkitDecodedFrameCount<"u"&&(i.droppedVideoFrames=this.el().webkitDroppedFrameCount,i.totalVideoFrames=this.el().webkitDecodedFrameCount),X.performance&&typeof X.performance.now=="function"?i.creationTime=X.performance.now():X.performance&&X.performance.timing&&typeof X.performance.timing.navigationStart=="number"&&(i.creationTime=X.Date.now()-X.performance.timing.navigationStart),i},e})(Un);dA(qt,"TEST_VID",function(){if(am()){var r=Fe.createElement("video"),e=Fe.createElement("track");return e.kind="captions",e.srclang="en",e.label="English",r.appendChild(e),r}});qt.isSupported=function(){try{qt.TEST_VID.volume=.5}catch{return!1}return!!(qt.TEST_VID&&qt.TEST_VID.canPlayType)};qt.canPlayType=function(r){return qt.TEST_VID.canPlayType(r)};qt.canPlaySource=function(r,e){return qt.canPlayType(r.type)};qt.canControlVolume=function(){try{var r=qt.TEST_VID.volume;qt.TEST_VID.volume=r/2+.1;var e=r!==qt.TEST_VID.volume;return e&&la?(X.setTimeout(function(){qt&&qt.prototype&&(qt.prototype.featuresVolumeControl=r!==qt.TEST_VID.volume)}),!1):e}catch{return!1}};qt.canMuteVolume=function(){try{var r=qt.TEST_VID.muted;return qt.TEST_VID.muted=!r,qt.TEST_VID.muted?Bp(qt.TEST_VID,"muted","muted"):cS(qt.TEST_VID,"muted","muted"),r!==qt.TEST_VID.muted}catch{return!1}};qt.canControlPlaybackRate=function(){if(Ac&&Dc&&m$<58)return!1;try{var r=qt.TEST_VID.playbackRate;return qt.TEST_VID.playbackRate=r/2+.1,r!==qt.TEST_VID.playbackRate}catch{return!1}};qt.canOverrideAttributes=function(){try{var r=function(){};Object.defineProperty(Fe.createElement("video"),"src",{get:r,set:r}),Object.defineProperty(Fe.createElement("audio"),"src",{get:r,set:r}),Object.defineProperty(Fe.createElement("video"),"innerHTML",{get:r,set:r}),Object.defineProperty(Fe.createElement("audio"),"innerHTML",{get:r,set:r})}catch{return!1}return!0};qt.supportsNativeTextTracks=function(){return uS||la&&Dc};qt.supportsNativeVideoTracks=function(){return!!(qt.TEST_VID&&qt.TEST_VID.videoTracks)};qt.supportsNativeAudioTracks=function(){return!!(qt.TEST_VID&&qt.TEST_VID.audioTracks)};qt.Events=["loadstart","suspend","abort","error","emptied","stalled","loadedmetadata","loadeddata","canplay","canplaythrough","playing","waiting","seeking","seeked","ended","durationchange","timeupdate","progress","play","pause","ratechange","resize","volumechange"];[["featuresMuteControl","canMuteVolume"],["featuresPlaybackRate","canControlPlaybackRate"],["featuresSourceset","canOverrideAttributes"],["featuresNativeTextTracks","supportsNativeTextTracks"],["featuresNativeVideoTracks","supportsNativeVideoTracks"],["featuresNativeAudioTracks","supportsNativeAudioTracks"]].forEach(function(r){var e=r[0],t=r[1];dA(qt.prototype,e,function(){return qt[t]()},!0)});qt.prototype.featuresVolumeControl=qt.canControlVolume();qt.prototype.movingMediaElementInDOM=!la;qt.prototype.featuresFullscreenResize=!0;qt.prototype.featuresProgressEvents=!0;qt.prototype.featuresTimeupdateEvents=!0;qt.prototype.featuresVideoFrameCallback=!!(qt.TEST_VID&&qt.TEST_VID.requestVideoFrameCallback);var Fx;qt.patchCanPlayType=function(){Bk>=4&&!p$&&!Dc&&(Fx=qt.TEST_VID&&qt.TEST_VID.constructor.prototype.canPlayType,qt.TEST_VID.constructor.prototype.canPlayType=function(r){var e=/^application\/(?:x-|vnd\.apple\.)mpegurl/i;return r&&e.test(r)?"maybe":Fx.call(this,r)})};qt.unpatchCanPlayType=function(){var r=qt.TEST_VID.constructor.prototype.canPlayType;return Fx&&(qt.TEST_VID.constructor.prototype.canPlayType=Fx),r};qt.patchCanPlayType();qt.disposeMediaElement=function(r){if(r){for(r.parentNode&&r.parentNode.removeChild(r);r.hasChildNodes();)r.removeChild(r.firstChild);r.removeAttribute("src"),typeof r.load=="function"&&(function(){try{r.load()}catch{}})()}};qt.resetMediaElement=function(r){if(r){for(var e=r.querySelectorAll("source"),t=e.length;t--;)r.removeChild(e[t]);r.removeAttribute("src"),typeof r.load=="function"&&(function(){try{r.load()}catch{}})()}};["muted","defaultMuted","autoplay","controls","loop","playsinline"].forEach(function(r){qt.prototype[r]=function(){return this.el_[r]||this.el_.hasAttribute(r)}});["muted","defaultMuted","autoplay","loop","playsinline"].forEach(function(r){qt.prototype["set"+yi(r)]=function(e){this.el_[r]=e,e?this.el_.setAttribute(r,r):this.el_.removeAttribute(r)}});["paused","currentTime","buffered","volume","poster","preload","error","seeking","seekable","ended","playbackRate","defaultPlaybackRate","disablePictureInPicture","played","networkState","readyState","videoWidth","videoHeight","crossOrigin"].forEach(function(r){qt.prototype[r]=function(){return this.el_[r]}});["volume","src","poster","preload","playbackRate","defaultPlaybackRate","disablePictureInPicture","crossOrigin"].forEach(function(r){qt.prototype["set"+yi(r)]=function(e){this.el_[r]=e}});["pause","load","play"].forEach(function(r){qt.prototype[r]=function(){return this.el_[r]()}});Un.withSourceHandlers(qt);qt.nativeSourceHandler={};qt.nativeSourceHandler.canPlayType=function(r){try{return qt.TEST_VID.canPlayType(r)}catch{return""}};qt.nativeSourceHandler.canHandleSource=function(r,e){if(r.type)return qt.nativeSourceHandler.canPlayType(r.type);if(r.src){var t=Gk(r.src);return qt.nativeSourceHandler.canPlayType("video/"+t)}return""};qt.nativeSourceHandler.handleSource=function(r,e,t){e.setSrc(r.src)};qt.nativeSourceHandler.dispose=function(){};qt.registerSourceHandler(qt.nativeSourceHandler);Un.registerTech("Html5",qt);var pj=["progress","abort","suspend","emptied","stalled","loadedmetadata","loadeddata","timeupdate","resize","volumechange","texttrackchange"],CC={canplay:"CanPlay",canplaythrough:"CanPlayThrough",playing:"Playing",seeked:"Seeked"},xE=["tiny","xsmall","small","medium","large","xlarge","huge"],k_={};xE.forEach(function(r){var e=r.charAt(0)==="x"?"x-"+r.substring(1):r;k_[r]="vjs-layout-"+e});var K0e={tiny:210,xsmall:320,small:425,medium:768,large:1440,xlarge:2560,huge:1/0},ki=(function(r){$t(e,r);function e(n,i,s){var a;if(n.id=n.id||i.id||"vjs_video_"+Ic(),i=li(e.getTagSettings(n),i),i.initChildren=!1,i.createEl=!1,i.evented=!1,i.reportTouchActivity=!1,!i.language)if(typeof n.closest=="function"){var o=n.closest("[lang]");o&&o.getAttribute&&(i.language=o.getAttribute("lang"))}else for(var l=n;l&&l.nodeType===1;){if(dc(l).hasOwnProperty("lang")){i.language=l.getAttribute("lang");break}l=l.parentNode}if(a=r.call(this,null,i,s)||this,a.boundDocumentFullscreenChange_=function(m){return a.documentFullscreenChange_(m)},a.boundFullWindowOnEscKey_=function(m){return a.fullWindowOnEscKey(m)},a.boundUpdateStyleEl_=function(m){return a.updateStyleEl_(m)},a.boundApplyInitTime_=function(m){return a.applyInitTime_(m)},a.boundUpdateCurrentBreakpoint_=function(m){return a.updateCurrentBreakpoint_(m)},a.boundHandleTechClick_=function(m){return a.handleTechClick_(m)},a.boundHandleTechDoubleClick_=function(m){return a.handleTechDoubleClick_(m)},a.boundHandleTechTouchStart_=function(m){return a.handleTechTouchStart_(m)},a.boundHandleTechTouchMove_=function(m){return a.handleTechTouchMove_(m)},a.boundHandleTechTouchEnd_=function(m){return a.handleTechTouchEnd_(m)},a.boundHandleTechTap_=function(m){return a.handleTechTap_(m)},a.isFullscreen_=!1,a.log=c$(a.id_),a.fsApi_=Px,a.isPosterFromTech_=!1,a.queuedCallbacks_=[],a.isReady_=!1,a.hasStarted_=!1,a.userActive_=!1,a.debugEnabled_=!1,a.audioOnlyMode_=!1,a.audioPosterMode_=!1,a.audioOnlyCache_={playerHeight:null,hiddenChildren:[]},!a.options_||!a.options_.techOrder||!a.options_.techOrder.length)throw new Error("No techOrder specified. Did you overwrite videojs.options instead of just changing the properties you want to override?");if(a.tag=n,a.tagAttributes=n&&dc(n),a.language(a.options_.language),i.languages){var u={};Object.getOwnPropertyNames(i.languages).forEach(function(m){u[m.toLowerCase()]=i.languages[m]}),a.languages_=u}else a.languages_=e.prototype.options_.languages;a.resetCache_(),a.poster_=i.poster||"",a.controls_=!!i.controls,n.controls=!1,n.removeAttribute("controls"),a.changingSrc_=!1,a.playCallbacks_=[],a.playTerminatedQueue_=[],n.hasAttribute("autoplay")?a.autoplay(!0):a.autoplay(a.options_.autoplay),i.plugins&&Object.keys(i.plugins).forEach(function(m){if(typeof a[m]!="function")throw new Error('plugin "'+m+'" does not exist')}),a.scrubbing_=!1,a.el_=a.createEl(),Vk(He(a),{eventBusKey:"el_"}),a.fsApi_.requestFullscreen&&(go(Fe,a.fsApi_.fullscreenchange,a.boundDocumentFullscreenChange_),a.on(a.fsApi_.fullscreenchange,a.boundDocumentFullscreenChange_)),a.fluid_&&a.on(["playerreset","resize"],a.boundUpdateStyleEl_);var c=Vn(a.options_);i.plugins&&Object.keys(i.plugins).forEach(function(m){a[m](i.plugins[m])}),i.debug&&a.debug(!0),a.options_.playerOptions=c,a.middleware_=[],a.playbackRates(i.playbackRates),a.initChildren(),a.isAudio(n.nodeName.toLowerCase()==="audio"),a.controls()?a.addClass("vjs-controls-enabled"):a.addClass("vjs-controls-disabled"),a.el_.setAttribute("role","region"),a.isAudio()?a.el_.setAttribute("aria-label",a.localize("Audio Player")):a.el_.setAttribute("aria-label",a.localize("Video Player")),a.isAudio()&&a.addClass("vjs-audio"),a.flexNotSupported_()&&a.addClass("vjs-no-flex"),Fp&&a.addClass("vjs-touch-enabled"),la||a.addClass("vjs-workinghover"),e.players[a.id_]=He(a);var h=o$.split(".")[0];return a.addClass("vjs-v"+h),a.userActive(!0),a.reportUserActivity(),a.one("play",function(m){return a.listenForUserActivity_(m)}),a.on("stageclick",function(m){return a.handleStageClick_(m)}),a.on("keydown",function(m){return a.handleKeyDown(m)}),a.on("languagechange",function(m){return a.handleLanguagechange(m)}),a.breakpoints(a.options_.breakpoints),a.responsive(a.options_.responsive),a.on("ready",function(){a.audioPosterMode(a.options_.audioPosterMode),a.audioOnlyMode(a.options_.audioOnlyMode)}),a}var t=e.prototype;return t.dispose=function(){var i=this;this.trigger("dispose"),this.off("dispose"),$s(Fe,this.fsApi_.fullscreenchange,this.boundDocumentFullscreenChange_),$s(Fe,"keydown",this.boundFullWindowOnEscKey_),this.styleEl_&&this.styleEl_.parentNode&&(this.styleEl_.parentNode.removeChild(this.styleEl_),this.styleEl_=null),e.players[this.id_]=null,this.tag&&this.tag.player&&(this.tag.player=null),this.el_&&this.el_.player&&(this.el_.player=null),this.tech_&&(this.tech_.dispose(),this.isPosterFromTech_=!1,this.poster_=""),this.playerElIngest_&&(this.playerElIngest_=null),this.tag&&(this.tag=null),p0e(this),ea.names.forEach(function(s){var a=ea[s],o=i[a.getterName]();o&&o.off&&o.off()}),r.prototype.dispose.call(this,{restoreEl:this.options_.restoreEl})},t.createEl=function(){var i=this.tag,s,a=this.playerElIngest_=i.parentNode&&i.parentNode.hasAttribute&&i.parentNode.hasAttribute("data-vjs-player"),o=this.tag.tagName.toLowerCase()==="video-js";a?s=this.el_=i.parentNode:o||(s=this.el_=r.prototype.createEl.call(this,"div"));var l=dc(i);if(o){for(s=this.el_=i,i=this.tag=Fe.createElement("video");s.children.length;)i.appendChild(s.firstChild);Uh(s,"video-js")||_c(s,"video-js"),s.appendChild(i),a=this.playerElIngest_=s,Object.keys(s).forEach(function(y){try{i[y]=s[y]}catch{}})}if(i.setAttribute("tabindex","-1"),l.tabindex="-1",(jg||Dc&&g$)&&(i.setAttribute("role","application"),l.role="application"),i.removeAttribute("width"),i.removeAttribute("height"),"width"in l&&delete l.width,"height"in l&&delete l.height,Object.getOwnPropertyNames(l).forEach(function(y){o&&y==="class"||s.setAttribute(y,l[y]),o&&i.setAttribute(y,l[y])}),i.playerId=i.id,i.id+="_html5_api",i.className="vjs-tech",i.player=s.player=this,this.addClass("vjs-paused"),X.VIDEOJS_NO_DYNAMIC_STYLE!==!0){this.styleEl_=P$("vjs-styles-dimensions");var u=Od(".vjs-styles-defaults"),c=Od("head");c.insertBefore(this.styleEl_,u?u.nextSibling:c.firstChild)}this.fill_=!1,this.fluid_=!1,this.width(this.options_.width),this.height(this.options_.height),this.fill(this.options_.fill),this.fluid(this.options_.fluid),this.aspectRatio(this.options_.aspectRatio),this.crossOrigin(this.options_.crossOrigin||this.options_.crossorigin);for(var h=i.getElementsByTagName("a"),m=0;m<h.length;m++){var g=h.item(m);_c(g,"vjs-hidden"),g.setAttribute("hidden","hidden")}return i.initNetworkState_=i.networkState,i.parentNode&&!a&&i.parentNode.insertBefore(s,i),hE(i,s),this.children_.unshift(i),this.el_.setAttribute("lang",this.language_),this.el_.setAttribute("translate","no"),this.el_=s,s},t.crossOrigin=function(i){if(!i)return this.techGet_("crossOrigin");if(i!=="anonymous"&&i!=="use-credentials"){Gr.warn('crossOrigin must be "anonymous" or "use-credentials", given "'+i+'"');return}this.techCall_("setCrossOrigin",i)},t.width=function(i){return this.dimension("width",i)},t.height=function(i){return this.dimension("height",i)},t.dimension=function(i,s){var a=i+"_";if(s===void 0)return this[a]||0;if(s===""||s==="auto"){this[a]=void 0,this.updateStyleEl_();return}var o=parseFloat(s);if(isNaN(o)){Gr.error('Improper value "'+s+'" supplied for for '+i);return}this[a]=o,this.updateStyleEl_()},t.fluid=function(i){var s=this;if(i===void 0)return!!this.fluid_;this.fluid_=!!i,xc(this)&&this.off(["playerreset","resize"],this.boundUpdateStyleEl_),i?(this.addClass("vjs-fluid"),this.fill(!1),Ume(this,function(){s.on(["playerreset","resize"],s.boundUpdateStyleEl_)})):this.removeClass("vjs-fluid"),this.updateStyleEl_()},t.fill=function(i){if(i===void 0)return!!this.fill_;this.fill_=!!i,i?(this.addClass("vjs-fill"),this.fluid(!1)):this.removeClass("vjs-fill")},t.aspectRatio=function(i){if(i===void 0)return this.aspectRatio_;if(!/^\d+\:\d+$/.test(i))throw new Error("Improper value supplied for aspect ratio. The format should be width:height, for example 16:9.");this.aspectRatio_=i,this.fluid(!0),this.updateStyleEl_()},t.updateStyleEl_=function(){if(X.VIDEOJS_NO_DYNAMIC_STYLE===!0){var i=typeof this.width_=="number"?this.width_:this.options_.width,s=typeof this.height_=="number"?this.height_:this.options_.height,a=this.tech_&&this.tech_.el();a&&(i>=0&&(a.width=i),s>=0&&(a.height=s));return}var o,l,u,c;this.aspectRatio_!==void 0&&this.aspectRatio_!=="auto"?u=this.aspectRatio_:this.videoWidth()>0?u=this.videoWidth()+":"+this.videoHeight():u="16:9";var h=u.split(":"),m=h[1]/h[0];this.width_!==void 0?o=this.width_:this.height_!==void 0?o=this.height_/m:o=this.videoWidth()||300,this.height_!==void 0?l=this.height_:l=o*m,/^[^a-zA-Z]/.test(this.id())?c="dimensions-"+this.id():c=this.id()+"-dimensions",this.addClass(c),R$(this.styleEl_,`
      .`+c+` {
        width: `+o+`px;
        height: `+l+`px;
      }

      .`+c+`.vjs-fluid:not(.vjs-audio-only-mode) {
        padding-top: `+m*100+`%;
      }
    `)},t.loadTech_=function(i,s){var a=this;this.tech_&&this.unloadTech_();var o=yi(i),l=i.charAt(0).toLowerCase()+i.slice(1);o!=="Html5"&&this.tag&&(Un.getTech("Html5").disposeMediaElement(this.tag),this.tag.player=null,this.tag=null),this.techName_=o,this.isReady_=!1;var u=this.autoplay();(typeof this.autoplay()=="string"||this.autoplay()===!0&&this.options_.normalizeAutoplay)&&(u=!1);var c={source:s,autoplay:u,nativeControlsForTouch:this.options_.nativeControlsForTouch,playerId:this.id(),techId:this.id()+"_"+l+"_api",playsinline:this.options_.playsinline,preload:this.options_.preload,loop:this.options_.loop,disablePictureInPicture:this.options_.disablePictureInPicture,muted:this.options_.muted,poster:this.poster(),language:this.language(),playerElIngest:this.playerElIngest_||!1,"vtt.js":this.options_["vtt.js"],canOverridePoster:!!this.options_.techCanOverridePoster,enableSourceset:this.options_.enableSourceset,Promise:this.options_.Promise};ea.names.forEach(function(m){var g=ea[m];c[g.getterName]=a[g.privateName]}),li(c,this.options_[o]),li(c,this.options_[l]),li(c,this.options_[i.toLowerCase()]),this.tag&&(c.tag=this.tag),s&&s.src===this.cache_.src&&this.cache_.currentTime>0&&(c.startTime=this.cache_.currentTime);var h=Un.getTech(i);if(!h)throw new Error("No Tech named '"+o+"' exists! '"+o+"' should be registered using videojs.registerTech()'");this.tech_=new h(c),this.tech_.ready(Wn(this,this.handleTechReady_),!0),b4.jsonToTextTracks(this.textTracksJson_||[],this.tech_),pj.forEach(function(m){a.on(a.tech_,m,function(g){return a["handleTech"+yi(m)+"_"](g)})}),Object.keys(CC).forEach(function(m){a.on(a.tech_,m,function(g){if(a.tech_.playbackRate()===0&&a.tech_.seeking()){a.queuedCallbacks_.push({callback:a["handleTech"+CC[m]+"_"].bind(a),event:g});return}a["handleTech"+CC[m]+"_"](g)})}),this.on(this.tech_,"loadstart",function(m){return a.handleTechLoadStart_(m)}),this.on(this.tech_,"sourceset",function(m){return a.handleTechSourceset_(m)}),this.on(this.tech_,"waiting",function(m){return a.handleTechWaiting_(m)}),this.on(this.tech_,"ended",function(m){return a.handleTechEnded_(m)}),this.on(this.tech_,"seeking",function(m){return a.handleTechSeeking_(m)}),this.on(this.tech_,"play",function(m){return a.handleTechPlay_(m)}),this.on(this.tech_,"firstplay",function(m){return a.handleTechFirstPlay_(m)}),this.on(this.tech_,"pause",function(m){return a.handleTechPause_(m)}),this.on(this.tech_,"durationchange",function(m){return a.handleTechDurationChange_(m)}),this.on(this.tech_,"fullscreenchange",function(m,g){return a.handleTechFullscreenChange_(m,g)}),this.on(this.tech_,"fullscreenerror",function(m,g){return a.handleTechFullscreenError_(m,g)}),this.on(this.tech_,"enterpictureinpicture",function(m){return a.handleTechEnterPictureInPicture_(m)}),this.on(this.tech_,"leavepictureinpicture",function(m){return a.handleTechLeavePictureInPicture_(m)}),this.on(this.tech_,"error",function(m){return a.handleTechError_(m)}),this.on(this.tech_,"posterchange",function(m){return a.handleTechPosterChange_(m)}),this.on(this.tech_,"textdata",function(m){return a.handleTechTextData_(m)}),this.on(this.tech_,"ratechange",function(m){return a.handleTechRateChange_(m)}),this.on(this.tech_,"loadedmetadata",this.boundUpdateStyleEl_),this.usingNativeControls(this.techGet_("controls")),this.controls()&&!this.usingNativeControls()&&this.addTechControlsListeners_(),this.tech_.el().parentNode!==this.el()&&(o!=="Html5"||!this.tag)&&hE(this.tech_.el(),this.el()),this.tag&&(this.tag.player=null,this.tag=null)},t.unloadTech_=function(){var i=this;ea.names.forEach(function(s){var a=ea[s];i[a.privateName]=i[a.getterName]()}),this.textTracksJson_=b4.textTracksToJson(this.tech_),this.isReady_=!1,this.tech_.dispose(),this.tech_=!1,this.isPosterFromTech_&&(this.poster_="",this.trigger("posterchange")),this.isPosterFromTech_=!1},t.tech=function(i){return i===void 0&&Gr.warn(`Using the tech directly can be dangerous. I hope you know what you're doing.
See https://github.com/videojs/video.js/issues/2617 for more info.
`),this.tech_},t.addTechControlsListeners_=function(){this.removeTechControlsListeners_(),this.on(this.tech_,"click",this.boundHandleTechClick_),this.on(this.tech_,"dblclick",this.boundHandleTechDoubleClick_),this.on(this.tech_,"touchstart",this.boundHandleTechTouchStart_),this.on(this.tech_,"touchmove",this.boundHandleTechTouchMove_),this.on(this.tech_,"touchend",this.boundHandleTechTouchEnd_),this.on(this.tech_,"tap",this.boundHandleTechTap_)},t.removeTechControlsListeners_=function(){this.off(this.tech_,"tap",this.boundHandleTechTap_),this.off(this.tech_,"touchstart",this.boundHandleTechTouchStart_),this.off(this.tech_,"touchmove",this.boundHandleTechTouchMove_),this.off(this.tech_,"touchend",this.boundHandleTechTouchEnd_),this.off(this.tech_,"click",this.boundHandleTechClick_),this.off(this.tech_,"dblclick",this.boundHandleTechDoubleClick_)},t.handleTechReady_=function(){this.triggerReady(),this.cache_.volume&&this.techCall_("setVolume",this.cache_.volume),this.handleTechPosterChange_(),this.handleTechDurationChange_()},t.handleTechLoadStart_=function(){this.removeClass("vjs-ended"),this.removeClass("vjs-seeking"),this.error(null),this.handleTechDurationChange_(),this.paused()?(this.hasStarted(!1),this.trigger("loadstart")):(this.trigger("loadstart"),this.trigger("firstplay")),this.manualAutoplay_(this.autoplay()===!0&&this.options_.normalizeAutoplay?"play":this.autoplay())},t.manualAutoplay_=function(i){var s=this;if(!(!this.tech_||typeof i!="string")){var a=function(){var u=s.muted();s.muted(!0);var c=function(){s.muted(u)};s.playTerminatedQueue_.push(c);var h=s.play();if(O0(h))return h.catch(function(m){throw c(),new Error("Rejection at manualAutoplay. Restoring muted value. "+(m||""))})},o;if(i==="any"&&!this.muted()?(o=this.play(),O0(o)&&(o=o.catch(a))):i==="muted"&&!this.muted()?o=a():o=this.play(),!!O0(o))return o.then(function(){s.trigger({type:"autoplay-success",autoplay:i})}).catch(function(){s.trigger({type:"autoplay-failure",autoplay:i})})}},t.updateSourceCaches_=function(i){i===void 0&&(i="");var s=i,a="";typeof s!="string"&&(s=i.src,a=i.type),this.cache_.source=this.cache_.source||{},this.cache_.sources=this.cache_.sources||[],s&&!a&&(a=v0e(this,s)),this.cache_.source=Vn({},i,{src:s,type:a});for(var o=this.cache_.sources.filter(function(g){return g.src&&g.src===s}),l=[],u=this.$$("source"),c=[],h=0;h<u.length;h++){var m=dc(u[h]);l.push(m),m.src&&m.src===s&&c.push(m.src)}c.length&&!o.length?this.cache_.sources=l:o.length||(this.cache_.sources=[this.cache_.source]),this.cache_.src=s},t.handleTechSourceset_=function(i){var s=this;if(!this.changingSrc_){var a=function(c){return s.updateSourceCaches_(c)},o=this.currentSource().src,l=i.src;o&&!/^blob:/.test(o)&&/^blob:/.test(l)&&(!this.lastSource_||this.lastSource_.tech!==l&&this.lastSource_.player!==o)&&(a=function(){}),a(l),i.src||this.tech_.any(["sourceset","loadstart"],function(u){if(u.type!=="sourceset"){var c=s.techGet("currentSrc");s.lastSource_.tech=c,s.updateSourceCaches_(c)}})}this.lastSource_={player:this.currentSource().src,tech:i.src},this.trigger({src:i.src,type:"sourceset"})},t.hasStarted=function(i){if(i===void 0)return this.hasStarted_;i!==this.hasStarted_&&(this.hasStarted_=i,this.hasStarted_?(this.addClass("vjs-has-started"),this.trigger("firstplay")):this.removeClass("vjs-has-started"))},t.handleTechPlay_=function(){this.removeClass("vjs-ended"),this.removeClass("vjs-paused"),this.addClass("vjs-playing"),this.hasStarted(!0),this.trigger("play")},t.handleTechRateChange_=function(){this.tech_.playbackRate()>0&&this.cache_.lastPlaybackRate===0&&(this.queuedCallbacks_.forEach(function(i){return i.callback(i.event)}),this.queuedCallbacks_=[]),this.cache_.lastPlaybackRate=this.tech_.playbackRate(),this.trigger("ratechange")},t.handleTechWaiting_=function(){var i=this;this.addClass("vjs-waiting"),this.trigger("waiting");var s=this.currentTime(),a=function o(){s!==i.currentTime()&&(i.removeClass("vjs-waiting"),i.off("timeupdate",o))};this.on("timeupdate",a)},t.handleTechCanPlay_=function(){this.removeClass("vjs-waiting"),this.trigger("canplay")},t.handleTechCanPlayThrough_=function(){this.removeClass("vjs-waiting"),this.trigger("canplaythrough")},t.handleTechPlaying_=function(){this.removeClass("vjs-waiting"),this.trigger("playing")},t.handleTechSeeking_=function(){this.addClass("vjs-seeking"),this.trigger("seeking")},t.handleTechSeeked_=function(){this.removeClass("vjs-seeking"),this.removeClass("vjs-ended"),this.trigger("seeked")},t.handleTechFirstPlay_=function(){this.options_.starttime&&(Gr.warn("Passing the `starttime` option to the player will be deprecated in 6.0"),this.currentTime(this.options_.starttime)),this.addClass("vjs-has-started"),this.trigger("firstplay")},t.handleTechPause_=function(){this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.trigger("pause")},t.handleTechEnded_=function(){this.addClass("vjs-ended"),this.removeClass("vjs-waiting"),this.options_.loop?(this.currentTime(0),this.play()):this.paused()||this.pause(),this.trigger("ended")},t.handleTechDurationChange_=function(){this.duration(this.techGet_("duration"))},t.handleTechClick_=function(i){this.controls_&&(this.options_===void 0||this.options_.userActions===void 0||this.options_.userActions.click===void 0||this.options_.userActions.click!==!1)&&(this.options_!==void 0&&this.options_.userActions!==void 0&&typeof this.options_.userActions.click=="function"?this.options_.userActions.click.call(this,i):this.paused()?mu(this.play()):this.pause())},t.handleTechDoubleClick_=function(i){if(this.controls_){var s=Array.prototype.some.call(this.$$(".vjs-control-bar, .vjs-modal-dialog"),function(a){return a.contains(i.target)});s||(this.options_===void 0||this.options_.userActions===void 0||this.options_.userActions.doubleClick===void 0||this.options_.userActions.doubleClick!==!1)&&(this.options_!==void 0&&this.options_.userActions!==void 0&&typeof this.options_.userActions.doubleClick=="function"?this.options_.userActions.doubleClick.call(this,i):this.isFullscreen()?this.exitFullscreen():this.requestFullscreen())}},t.handleTechTap_=function(){this.userActive(!this.userActive())},t.handleTechTouchStart_=function(){this.userWasActive=this.userActive()},t.handleTechTouchMove_=function(){this.userWasActive&&this.reportUserActivity()},t.handleTechTouchEnd_=function(i){i.cancelable&&i.preventDefault()},t.handleStageClick_=function(){this.reportUserActivity()},t.toggleFullscreenClass_=function(){this.isFullscreen()?this.addClass("vjs-fullscreen"):this.removeClass("vjs-fullscreen")},t.documentFullscreenChange_=function(i){var s=i.target.player;if(!(s&&s!==this)){var a=this.el(),o=Fe[this.fsApi_.fullscreenElement]===a;!o&&a.matches?o=a.matches(":"+this.fsApi_.fullscreen):!o&&a.msMatchesSelector&&(o=a.msMatchesSelector(":"+this.fsApi_.fullscreen)),this.isFullscreen(o)}},t.handleTechFullscreenChange_=function(i,s){var a=this;s&&(s.nativeIOSFullscreen&&(this.addClass("vjs-ios-native-fs"),this.tech_.one("webkitendfullscreen",function(){a.removeClass("vjs-ios-native-fs")})),this.isFullscreen(s.isFullscreen))},t.handleTechFullscreenError_=function(i,s){this.trigger("fullscreenerror",s)},t.togglePictureInPictureClass_=function(){this.isInPictureInPicture()?this.addClass("vjs-picture-in-picture"):this.removeClass("vjs-picture-in-picture")},t.handleTechEnterPictureInPicture_=function(i){this.isInPictureInPicture(!0)},t.handleTechLeavePictureInPicture_=function(i){this.isInPictureInPicture(!1)},t.handleTechError_=function(){var i=this.tech_.error();this.error(i)},t.handleTechTextData_=function(){var i=null;arguments.length>1&&(i=arguments[1]),this.trigger("textdata",i)},t.getCache=function(){return this.cache_},t.resetCache_=function(){this.cache_={currentTime:0,initTime:0,inactivityTimeout:this.options_.inactivityTimeout,duration:NaN,lastVolume:1,lastPlaybackRate:this.defaultPlaybackRate(),media:null,src:"",source:{},sources:[],playbackRates:[],volume:1}},t.techCall_=function(i,s){this.ready(function(){if(i in h0e)return c0e(this.middleware_,this.tech_,i,s);if(i in k4)return E4(this.middleware_,this.tech_,i,s);try{this.tech_&&this.tech_[i](s)}catch(a){throw Gr(a),a}},!0)},t.techGet_=function(i){if(!(!this.tech_||!this.tech_.isReady_)){if(i in d0e)return u0e(this.middleware_,this.tech_,i);if(i in k4)return E4(this.middleware_,this.tech_,i);try{return this.tech_[i]()}catch(s){throw this.tech_[i]===void 0?(Gr("Video.js: "+i+" method not defined for "+this.techName_+" playback technology.",s),s):s.name==="TypeError"?(Gr("Video.js: "+i+" unavailable on "+this.techName_+" playback technology element.",s),this.tech_.isReady_=!1,s):(Gr(s),s)}}},t.play=function(){var i=this,s=this.options_.Promise||X.Promise;return s?new s(function(a){i.play_(a)}):this.play_()},t.play_=function(i){var s=this;i===void 0&&(i=mu),this.playCallbacks_.push(i);var a=!!(!this.changingSrc_&&(this.src()||this.currentSrc())),o=!!(uS||la);if(this.waitToPlay_&&(this.off(["ready","loadstart"],this.waitToPlay_),this.waitToPlay_=null),!this.isReady_||!a){this.waitToPlay_=function(c){s.play_()},this.one(["ready","loadstart"],this.waitToPlay_),!a&&o&&this.load();return}var l=this.techGet_("play"),u=o&&this.hasClass("vjs-ended");u&&this.resetProgressBar_(),l===null?this.runPlayTerminatedQueue_():this.runPlayCallbacks_(l)},t.runPlayTerminatedQueue_=function(){var i=this.playTerminatedQueue_.slice(0);this.playTerminatedQueue_=[],i.forEach(function(s){s()})},t.runPlayCallbacks_=function(i){var s=this.playCallbacks_.slice(0);this.playCallbacks_=[],this.playTerminatedQueue_=[],s.forEach(function(a){a(i)})},t.pause=function(){this.techCall_("pause")},t.paused=function(){return this.techGet_("paused")!==!1},t.played=function(){return this.techGet_("played")||$h(0,0)},t.scrubbing=function(i){if(typeof i>"u")return this.scrubbing_;this.scrubbing_=!!i,this.techCall_("setScrubbing",this.scrubbing_),i?this.addClass("vjs-scrubbing"):this.removeClass("vjs-scrubbing")},t.currentTime=function(i){if(typeof i<"u"){if(i<0&&(i=0),!this.isReady_||this.changingSrc_||!this.tech_||!this.tech_.isReady_){this.cache_.initTime=i,this.off("canplay",this.boundApplyInitTime_),this.one("canplay",this.boundApplyInitTime_);return}this.techCall_("setCurrentTime",i),this.cache_.initTime=0;return}return this.cache_.currentTime=this.techGet_("currentTime")||0,this.cache_.currentTime},t.applyInitTime_=function(){this.currentTime(this.cache_.initTime)},t.duration=function(i){if(i===void 0)return this.cache_.duration!==void 0?this.cache_.duration:NaN;i=parseFloat(i),i<0&&(i=1/0),i!==this.cache_.duration&&(this.cache_.duration=i,i===1/0?this.addClass("vjs-live"):this.removeClass("vjs-live"),isNaN(i)||this.trigger("durationchange"))},t.remainingTime=function(){return this.duration()-this.currentTime()},t.remainingTimeDisplay=function(){return Math.floor(this.duration())-Math.floor(this.currentTime())},t.buffered=function(){var i=this.techGet_("buffered");return(!i||!i.length)&&(i=$h(0,0)),i},t.bufferedPercent=function(){return N$(this.buffered(),this.duration())},t.bufferedEnd=function(){var i=this.buffered(),s=this.duration(),a=i.end(i.length-1);return a>s&&(a=s),a},t.volume=function(i){var s;if(i!==void 0){s=Math.max(0,Math.min(1,parseFloat(i))),this.cache_.volume=s,this.techCall_("setVolume",s),s>0&&this.lastVolume_(s);return}return s=parseFloat(this.techGet_("volume")),isNaN(s)?1:s},t.muted=function(i){if(i!==void 0){this.techCall_("setMuted",i);return}return this.techGet_("muted")||!1},t.defaultMuted=function(i){return i!==void 0?this.techCall_("setDefaultMuted",i):this.techGet_("defaultMuted")||!1},t.lastVolume_=function(i){if(i!==void 0&&i!==0){this.cache_.lastVolume=i;return}return this.cache_.lastVolume},t.supportsFullScreen=function(){return this.techGet_("supportsFullScreen")||!1},t.isFullscreen=function(i){if(i!==void 0){var s=this.isFullscreen_;this.isFullscreen_=!!i,this.isFullscreen_!==s&&this.fsApi_.prefixed&&this.trigger("fullscreenchange"),this.toggleFullscreenClass_();return}return this.isFullscreen_},t.requestFullscreen=function(i){var s=this.options_.Promise||X.Promise;if(s){var a=this;return new s(function(o,l){function u(){a.off("fullscreenerror",h),a.off("fullscreenchange",c)}function c(){u(),o()}function h(g,y){u(),l(y)}a.one("fullscreenchange",c),a.one("fullscreenerror",h);var m=a.requestFullscreenHelper_(i);m&&(m.then(u,u),m.then(o,l))})}return this.requestFullscreenHelper_()},t.requestFullscreenHelper_=function(i){var s=this,a;if(this.fsApi_.prefixed||(a=this.options_.fullscreen&&this.options_.fullscreen.options||{},i!==void 0&&(a=i)),this.fsApi_.requestFullscreen){var o=this.el_[this.fsApi_.requestFullscreen](a);return o&&o.then(function(){return s.isFullscreen(!0)},function(){return s.isFullscreen(!1)}),o}else this.tech_.supportsFullScreen()&&!this.options_.preferFullWindow?this.techCall_("enterFullScreen"):this.enterFullWindow()},t.exitFullscreen=function(){var i=this.options_.Promise||X.Promise;if(i){var s=this;return new i(function(a,o){function l(){s.off("fullscreenerror",c),s.off("fullscreenchange",u)}function u(){l(),a()}function c(m,g){l(),o(g)}s.one("fullscreenchange",u),s.one("fullscreenerror",c);var h=s.exitFullscreenHelper_();h&&(h.then(l,l),h.then(a,o))})}return this.exitFullscreenHelper_()},t.exitFullscreenHelper_=function(){var i=this;if(this.fsApi_.requestFullscreen){var s=Fe[this.fsApi_.exitFullscreen]();return s&&mu(s.then(function(){return i.isFullscreen(!1)})),s}else this.tech_.supportsFullScreen()&&!this.options_.preferFullWindow?this.techCall_("exitFullScreen"):this.exitFullWindow()},t.enterFullWindow=function(){this.isFullscreen(!0),this.isFullWindow=!0,this.docOrigOverflow=Fe.documentElement.style.overflow,go(Fe,"keydown",this.boundFullWindowOnEscKey_),Fe.documentElement.style.overflow="hidden",_c(Fe.body,"vjs-full-window"),this.trigger("enterFullWindow")},t.fullWindowOnEscKey=function(i){Or.isEventKey(i,"Esc")&&this.isFullscreen()===!0&&(this.isFullWindow?this.exitFullWindow():this.exitFullscreen())},t.exitFullWindow=function(){this.isFullscreen(!1),this.isFullWindow=!1,$s(Fe,"keydown",this.boundFullWindowOnEscKey_),Fe.documentElement.style.overflow=this.docOrigOverflow,zg(Fe.body,"vjs-full-window"),this.trigger("exitFullWindow")},t.disablePictureInPicture=function(i){if(i===void 0)return this.techGet_("disablePictureInPicture");this.techCall_("setDisablePictureInPicture",i),this.options_.disablePictureInPicture=i,this.trigger("disablepictureinpicturechanged")},t.isInPictureInPicture=function(i){if(i!==void 0){this.isInPictureInPicture_=!!i,this.togglePictureInPictureClass_();return}return!!this.isInPictureInPicture_},t.requestPictureInPicture=function(){if("pictureInPictureEnabled"in Fe&&this.disablePictureInPicture()===!1)return this.techGet_("requestPictureInPicture")},t.exitPictureInPicture=function(){if("pictureInPictureEnabled"in Fe)return Fe.exitPictureInPicture()},t.handleKeyDown=function(i){var s=this.options_.userActions;if(!(!s||!s.hotkeys)){var a=function(l){var u=l.tagName.toLowerCase();if(l.isContentEditable)return!0;var c=["button","checkbox","hidden","radio","reset","submit"];if(u==="input")return c.indexOf(l.type)===-1;var h=["textarea"];return h.indexOf(u)!==-1};a(this.el_.ownerDocument.activeElement)||(typeof s.hotkeys=="function"?s.hotkeys.call(this,i):this.handleHotkeys(i))}},t.handleHotkeys=function(i){var s=this.options_.userActions?this.options_.userActions.hotkeys:{},a=s.fullscreenKey,o=a===void 0?function(v){return Or.isEventKey(v,"f")}:a,l=s.muteKey,u=l===void 0?function(v){return Or.isEventKey(v,"m")}:l,c=s.playPauseKey,h=c===void 0?function(v){return Or.isEventKey(v,"k")||Or.isEventKey(v,"Space")}:c;if(o.call(this,i)){i.preventDefault(),i.stopPropagation();var m=Ct.getComponent("FullscreenToggle");Fe[this.fsApi_.fullscreenEnabled]!==!1&&m.prototype.handleClick.call(this,i)}else if(u.call(this,i)){i.preventDefault(),i.stopPropagation();var g=Ct.getComponent("MuteToggle");g.prototype.handleClick.call(this,i)}else if(h.call(this,i)){i.preventDefault(),i.stopPropagation();var y=Ct.getComponent("PlayToggle");y.prototype.handleClick.call(this,i)}},t.canPlayType=function(i){for(var s,a=0,o=this.options_.techOrder;a<o.length;a++){var l=o[a],u=Un.getTech(l);if(u||(u=Ct.getComponent(l)),!u){Gr.error('The "'+l+'" tech is undefined. Skipped browser support check for that tech.');continue}if(u.isSupported()&&(s=u.canPlayType(i),s))return s}return""},t.selectSource=function(i){var s=this,a=this.options_.techOrder.map(function(h){return[h,Un.getTech(h)]}).filter(function(h){var m=h[0],g=h[1];return g?g.isSupported():(Gr.error('The "'+m+'" tech is undefined. Skipped browser support check for that tech.'),!1)}),o=function(m,g,y){var v;return m.some(function(x){return g.some(function(w){if(v=y(x,w),v)return!0})}),v},l,u=function(m){return function(g,y){return m(y,g)}},c=function(m,g){var y=m[0],v=m[1];if(v.canPlaySource(g,s.options_[y.toLowerCase()]))return{source:g,tech:y}};return this.options_.sourceOrder?l=o(i,a,u(c)):l=o(a,i,c),l||!1},t.handleSrc_=function(i,s){var a=this;if(typeof i>"u")return this.cache_.src||"";this.resetRetryOnError_&&this.resetRetryOnError_();var o=y0e(i);if(!o.length){this.setTimeout(function(){this.error({code:4,message:this.options_.notSupportedMessage})},0);return}if(this.changingSrc_=!0,s||(this.cache_.sources=o),this.updateSourceCaches_(o[0]),o0e(this,o[0],function(c,h){a.middleware_=h,s||(a.cache_.sources=o),a.updateSourceCaches_(c);var m=a.src_(c);if(m){if(o.length>1)return a.handleSrc_(o.slice(1));a.changingSrc_=!1,a.setTimeout(function(){this.error({code:4,message:this.options_.notSupportedMessage})},0),a.triggerReady();return}l0e(h,a.tech_)}),this.options_.retryOnError&&o.length>1){var l=function(){a.error(null),a.handleSrc_(o.slice(1),!0)},u=function(){a.off("error",l)};this.one("error",l),this.one("playing",u),this.resetRetryOnError_=function(){a.off("error",l),a.off("playing",u)}}},t.src=function(i){return this.handleSrc_(i,!1)},t.src_=function(i){var s=this,a=this.selectSource([i]);return a?zme(a.tech,this.techName_)?(this.ready(function(){this.tech_.constructor.prototype.hasOwnProperty("setSource")?this.techCall_("setSource",i):this.techCall_("src",i.src),this.changingSrc_=!1},!0),!1):(this.changingSrc_=!0,this.loadTech_(a.tech,a.source),this.tech_.ready(function(){s.changingSrc_=!1}),!1):!0},t.load=function(){this.techCall_("load")},t.reset=function(){var i=this,s=this.options_.Promise||X.Promise;if(this.paused()||!s)this.doReset_();else{var a=this.play();mu(a.then(function(){return i.doReset_()}))}},t.doReset_=function(){this.tech_&&this.tech_.clearTracks("text"),this.resetCache_(),this.poster(""),this.loadTech_(this.options_.techOrder[0],null),this.techCall_("reset"),this.resetControlBarUI_(),xc(this)&&this.trigger("playerreset")},t.resetControlBarUI_=function(){this.resetProgressBar_(),this.resetPlaybackRate_(),this.resetVolumeBar_()},t.resetProgressBar_=function(){this.currentTime(0);var i=this.controlBar||{},s=i.durationDisplay,a=i.remainingTimeDisplay;s&&s.updateContent(),a&&a.updateContent()},t.resetPlaybackRate_=function(){this.playbackRate(this.defaultPlaybackRate()),this.handleTechRateChange_()},t.resetVolumeBar_=function(){this.volume(1),this.trigger("volumechange")},t.currentSources=function(){var i=this.currentSource(),s=[];return Object.keys(i).length!==0&&s.push(i),this.cache_.sources||s},t.currentSource=function(){return this.cache_.source||{}},t.currentSrc=function(){return this.currentSource()&&this.currentSource().src||""},t.currentType=function(){return this.currentSource()&&this.currentSource().type||""},t.preload=function(i){if(i!==void 0){this.techCall_("setPreload",i),this.options_.preload=i;return}return this.techGet_("preload")},t.autoplay=function(i){if(i===void 0)return this.options_.autoplay||!1;var s;typeof i=="string"&&/(any|play|muted)/.test(i)||i===!0&&this.options_.normalizeAutoplay?(this.options_.autoplay=i,this.manualAutoplay_(typeof i=="string"?i:"play"),s=!1):i?this.options_.autoplay=!0:this.options_.autoplay=!1,s=typeof s>"u"?this.options_.autoplay:s,this.tech_&&this.techCall_("setAutoplay",s)},t.playsinline=function(i){return i!==void 0?(this.techCall_("setPlaysinline",i),this.options_.playsinline=i,this):this.techGet_("playsinline")},t.loop=function(i){if(i!==void 0){this.techCall_("setLoop",i),this.options_.loop=i;return}return this.techGet_("loop")},t.poster=function(i){if(i===void 0)return this.poster_;i||(i=""),i!==this.poster_&&(this.poster_=i,this.techCall_("setPoster",i),this.isPosterFromTech_=!1,this.trigger("posterchange"))},t.handleTechPosterChange_=function(){if((!this.poster_||this.options_.techCanOverridePoster)&&this.tech_&&this.tech_.poster){var i=this.tech_.poster()||"";i!==this.poster_&&(this.poster_=i,this.isPosterFromTech_=!0,this.trigger("posterchange"))}},t.controls=function(i){if(i===void 0)return!!this.controls_;i=!!i,this.controls_!==i&&(this.controls_=i,this.usingNativeControls()&&this.techCall_("setControls",i),this.controls_?(this.removeClass("vjs-controls-disabled"),this.addClass("vjs-controls-enabled"),this.trigger("controlsenabled"),this.usingNativeControls()||this.addTechControlsListeners_()):(this.removeClass("vjs-controls-enabled"),this.addClass("vjs-controls-disabled"),this.trigger("controlsdisabled"),this.usingNativeControls()||this.removeTechControlsListeners_()))},t.usingNativeControls=function(i){if(i===void 0)return!!this.usingNativeControls_;i=!!i,this.usingNativeControls_!==i&&(this.usingNativeControls_=i,this.usingNativeControls_?(this.addClass("vjs-using-native-controls"),this.trigger("usingnativecontrols")):(this.removeClass("vjs-using-native-controls"),this.trigger("usingcustomcontrols")))},t.error=function(i){var s=this;if(i===void 0)return this.error_||null;if(Ld("beforeerror").forEach(function(o){var l=o(s,i);if(!(Tc(l)&&!Array.isArray(l)||typeof l=="string"||typeof l=="number"||l===null)){s.log.error("please return a value that MediaError expects in beforeerror hooks");return}i=l}),this.options_.suppressNotSupportedError&&i&&i.code===4){var a=function(){this.error(i)};this.options_.suppressNotSupportedError=!1,this.any(["click","touchstart"],a),this.one("loadstart",function(){this.off(["click","touchstart"],a)});return}if(i===null){this.error_=i,this.removeClass("vjs-error"),this.errorDisplay&&this.errorDisplay.close();return}this.error_=new sa(i),this.addClass("vjs-error"),Gr.error("(CODE:"+this.error_.code+" "+sa.errorTypes[this.error_.code]+")",this.error_.message,this.error_),this.trigger("error"),Ld("error").forEach(function(o){return o(s,s.error_)})},t.reportUserActivity=function(i){this.userActivity_=!0},t.userActive=function(i){if(i===void 0)return this.userActive_;if(i=!!i,i!==this.userActive_){if(this.userActive_=i,this.userActive_){this.userActivity_=!0,this.removeClass("vjs-user-inactive"),this.addClass("vjs-user-active"),this.trigger("useractive");return}this.tech_&&this.tech_.one("mousemove",function(s){s.stopPropagation(),s.preventDefault()}),this.userActivity_=!1,this.removeClass("vjs-user-active"),this.addClass("vjs-user-inactive"),this.trigger("userinactive")}},t.listenForUserActivity_=function(){var i,s,a,o=Wn(this,this.reportUserActivity),l=function(y){(y.screenX!==s||y.screenY!==a)&&(s=y.screenX,a=y.screenY,o())},u=function(){o(),this.clearInterval(i),i=this.setInterval(o,250)},c=function(y){o(),this.clearInterval(i)};this.on("mousedown",u),this.on("mousemove",l),this.on("mouseup",c),this.on("mouseleave",c);var h=this.getChild("controlBar");h&&!la&&!Ac&&(h.on("mouseenter",function(g){this.player().options_.inactivityTimeout!==0&&(this.player().cache_.inactivityTimeout=this.player().options_.inactivityTimeout),this.player().options_.inactivityTimeout=0}),h.on("mouseleave",function(g){this.player().options_.inactivityTimeout=this.player().cache_.inactivityTimeout})),this.on("keydown",o),this.on("keyup",o);var m;this.setInterval(function(){if(this.userActivity_){this.userActivity_=!1,this.userActive(!0),this.clearTimeout(m);var g=this.options_.inactivityTimeout;g<=0||(m=this.setTimeout(function(){this.userActivity_||this.userActive(!1)},g))}},250)},t.playbackRate=function(i){if(i!==void 0){this.techCall_("setPlaybackRate",i);return}return this.tech_&&this.tech_.featuresPlaybackRate?this.cache_.lastPlaybackRate||this.techGet_("playbackRate"):1},t.defaultPlaybackRate=function(i){return i!==void 0?this.techCall_("setDefaultPlaybackRate",i):this.tech_&&this.tech_.featuresPlaybackRate?this.techGet_("defaultPlaybackRate"):1},t.isAudio=function(i){if(i!==void 0){this.isAudio_=!!i;return}return!!this.isAudio_},t.enableAudioOnlyUI_=function(){var i=this;this.addClass("vjs-audio-only-mode");var s=this.children(),a=this.getChild("ControlBar"),o=a&&a.currentHeight();s.forEach(function(l){l!==a&&l.el_&&!l.hasClass("vjs-hidden")&&(l.hide(),i.audioOnlyCache_.hiddenChildren.push(l))}),this.audioOnlyCache_.playerHeight=this.currentHeight(),this.height(o),this.trigger("audioonlymodechange")},t.disableAudioOnlyUI_=function(){this.removeClass("vjs-audio-only-mode"),this.audioOnlyCache_.hiddenChildren.forEach(function(i){return i.show()}),this.height(this.audioOnlyCache_.playerHeight),this.trigger("audioonlymodechange")},t.audioOnlyMode=function(i){var s=this;if(typeof i!="boolean"||i===this.audioOnlyMode_)return this.audioOnlyMode_;this.audioOnlyMode_=i;var a=this.options_.Promise||X.Promise;if(a){if(i){var o=[];return this.isInPictureInPicture()&&o.push(this.exitPictureInPicture()),this.isFullscreen()&&o.push(this.exitFullscreen()),this.audioPosterMode()&&o.push(this.audioPosterMode(!1)),a.all(o).then(function(){return s.enableAudioOnlyUI_()})}return a.resolve().then(function(){return s.disableAudioOnlyUI_()})}i?(this.isInPictureInPicture()&&this.exitPictureInPicture(),this.isFullscreen()&&this.exitFullscreen(),this.enableAudioOnlyUI_()):this.disableAudioOnlyUI_()},t.enablePosterModeUI_=function(){var i=this.tech_&&this.tech_;i.hide(),this.addClass("vjs-audio-poster-mode"),this.trigger("audiopostermodechange")},t.disablePosterModeUI_=function(){var i=this.tech_&&this.tech_;i.show(),this.removeClass("vjs-audio-poster-mode"),this.trigger("audiopostermodechange")},t.audioPosterMode=function(i){var s=this;if(typeof i!="boolean"||i===this.audioPosterMode_)return this.audioPosterMode_;this.audioPosterMode_=i;var a=this.options_.Promise||X.Promise;if(a){if(i){if(this.audioOnlyMode()){var o=this.audioOnlyMode(!1);return o.then(function(){s.enablePosterModeUI_()})}return a.resolve().then(function(){s.enablePosterModeUI_()})}return a.resolve().then(function(){s.disablePosterModeUI_()})}if(i){this.audioOnlyMode()&&this.audioOnlyMode(!1),this.enablePosterModeUI_();return}this.disablePosterModeUI_()},t.addTextTrack=function(i,s,a){if(this.tech_)return this.tech_.addTextTrack(i,s,a)},t.addRemoteTextTrack=function(i,s){if(this.tech_)return this.tech_.addRemoteTextTrack(i,s)},t.removeRemoteTextTrack=function(i){i===void 0&&(i={});var s=i,a=s.track;if(a||(a=i),this.tech_)return this.tech_.removeRemoteTextTrack(a)},t.getVideoPlaybackQuality=function(){return this.techGet_("getVideoPlaybackQuality")},t.videoWidth=function(){return this.tech_&&this.tech_.videoWidth&&this.tech_.videoWidth()||0},t.videoHeight=function(){return this.tech_&&this.tech_.videoHeight&&this.tech_.videoHeight()||0},t.language=function(i){if(i===void 0)return this.language_;this.language_!==String(i).toLowerCase()&&(this.language_=String(i).toLowerCase(),xc(this)&&this.trigger("languagechange"))},t.languages=function(){return Vn(e.prototype.options_.languages,this.languages_)},t.toJSON=function(){var i=Vn(this.options_),s=i.tracks;i.tracks=[];for(var a=0;a<s.length;a++){var o=s[a];o=Vn(o),o.player=void 0,i.tracks[a]=o}return i},t.createModal=function(i,s){var a=this;s=s||{},s.content=i||"";var o=new um(this,s);return this.addChild(o),o.on("dispose",function(){a.removeChild(o)}),o.open(),o},t.updateCurrentBreakpoint_=function(){if(this.responsive())for(var i=this.currentBreakpoint(),s=this.currentWidth(),a=0;a<xE.length;a++){var o=xE[a],l=this.breakpoints_[o];if(s<=l){if(i===o)return;i&&this.removeClass(k_[i]),this.addClass(k_[o]),this.breakpoint_=o;break}}},t.removeCurrentBreakpoint_=function(){var i=this.currentBreakpointClass();this.breakpoint_="",i&&this.removeClass(i)},t.breakpoints=function(i){return i===void 0?li(this.breakpoints_):(this.breakpoint_="",this.breakpoints_=li({},K0e,i),this.updateCurrentBreakpoint_(),li(this.breakpoints_))},t.responsive=function(i){if(i===void 0)return this.responsive_;i=!!i;var s=this.responsive_;if(i!==s)return this.responsive_=i,i?(this.on("playerresize",this.boundUpdateCurrentBreakpoint_),this.updateCurrentBreakpoint_()):(this.off("playerresize",this.boundUpdateCurrentBreakpoint_),this.removeCurrentBreakpoint_()),i},t.currentBreakpoint=function(){return this.breakpoint_},t.currentBreakpointClass=function(){return k_[this.breakpoint_]||""},t.loadMedia=function(i,s){var a=this;if(!(!i||typeof i!="object")){this.reset(),this.cache_.media=Vn(i);var o=this.cache_.media,l=o.artwork,u=o.poster,c=o.src,h=o.textTracks;!l&&u&&(this.cache_.media.artwork=[{src:u,type:Ox(u)}]),c&&this.src(c),u&&this.poster(u),Array.isArray(h)&&h.forEach(function(m){return a.addRemoteTextTrack(m,!1)}),this.ready(s)}},t.getMedia=function(){if(!this.cache_.media){var i=this.poster(),s=this.currentSources(),a=Array.prototype.map.call(this.remoteTextTracks(),function(l){return{kind:l.kind,label:l.label,language:l.language,src:l.src}}),o={src:s,textTracks:a};return i&&(o.poster=i,o.artwork=[{src:o.poster,type:Ox(o.poster)}]),o}return Vn(this.cache_.media)},e.getTagSettings=function(i){var s={sources:[],tracks:[]},a=dc(i),o=a["data-setup"];if(Uh(i,"vjs-fill")&&(a.fill=!0),Uh(i,"vjs-fluid")&&(a.fluid=!0),o!==null){var l=Ufe(o||"{}"),u=l[0],c=l[1];u&&Gr.error(u),li(a,c)}if(li(s,a),i.hasChildNodes())for(var h=i.childNodes,m=0,g=h.length;m<g;m++){var y=h[m],v=y.nodeName.toLowerCase();v==="source"?s.sources.push(dc(y)):v==="track"&&s.tracks.push(dc(y))}return s},t.flexNotSupported_=function(){var i=Fe.createElement("i");return!("flexBasis"in i.style||"webkitFlexBasis"in i.style||"mozFlexBasis"in i.style||"msFlexBasis"in i.style||"msFlexOrder"in i.style)},t.debug=function(i){if(i===void 0)return this.debugEnabled_;i?(this.trigger("debugon"),this.previousLogLevel_=this.log.level,this.log.level("debug"),this.debugEnabled_=!0):(this.trigger("debugoff"),this.log.level(this.previousLogLevel_),this.previousLogLevel_=void 0,this.debugEnabled_=!1)},t.playbackRates=function(i){if(i===void 0)return this.cache_.playbackRates;Array.isArray(i)&&i.every(function(s){return typeof s=="number"})&&(this.cache_.playbackRates=i,this.trigger("playbackrateschange"))},e})(Ct);ea.names.forEach(function(r){var e=ea[r];ki.prototype[e.getterName]=function(){return this.tech_?this.tech_[e.getterName]():(this[e.privateName]=this[e.privateName]||new e.ListClass,this[e.privateName])}});ki.prototype.crossorigin=ki.prototype.crossOrigin;ki.players={};var i0=X.navigator;ki.prototype.options_={techOrder:Un.defaultTechOrder_,html5:{},inactivityTimeout:2e3,playbackRates:[],liveui:!1,children:["mediaLoader","posterImage","textTrackDisplay","loadingSpinner","bigPlayButton","liveTracker","controlBar","errorDisplay","textTrackSettings","resizeManager"],language:i0&&(i0.languages&&i0.languages[0]||i0.userLanguage||i0.language)||"en",languages:{},notSupportedMessage:"No compatible source was found for this media.",normalizeAutoplay:!1,fullscreen:{options:{navigationUI:"hide"}},breakpoints:{},responsive:!1,audioOnlyMode:!1,audioPosterMode:!1};["ended","seeking","seekable","networkState","readyState"].forEach(function(r){ki.prototype[r]=function(){return this.techGet_(r)}});pj.forEach(function(r){ki.prototype["handleTech"+yi(r)+"_"]=function(){return this.trigger(r)}});Ct.registerComponent("Player",ki);var Bx="plugin",yp="activePlugins_",Qf={},Nx=function(e){return Qf.hasOwnProperty(e)},A_=function(e){return Nx(e)?Qf[e]:void 0},mj=function(e,t){e[yp]=e[yp]||{},e[yp][t]=!0},Ux=function(e,t,n){var i=(n?"before":"")+"pluginsetup";e.trigger(i,t),e.trigger(i+":"+t.name,t)},X0e=function(e,t){var n=function(){Ux(this,{name:e,plugin:t,instance:null},!0);var s=t.apply(this,arguments);return mj(this,e),Ux(this,{name:e,plugin:t,instance:s}),s};return Object.keys(t).forEach(function(i){n[i]=t[i]}),n},j4=function(e,t){return t.prototype.name=e,function(){Ux(this,{name:e,plugin:t,instance:null},!0);for(var n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];var a=GU(t,[this].concat(i));return this[e]=function(){return a},Ux(this,a.getEventHash()),a}},Ru=(function(){function r(t){if(this.constructor===r)throw new Error("Plugin must be sub-classed; not directly instantiated.");this.player=t,this.log||(this.log=this.player.log.createLogger(this.name)),Vk(this),delete this.trigger,B$(this,this.constructor.defaultState),mj(t,this.name),this.dispose=this.dispose.bind(this),t.on("dispose",this.dispose)}var e=r.prototype;return e.version=function(){return this.constructor.VERSION},e.getEventHash=function(n){return n===void 0&&(n={}),n.name=this.name,n.plugin=this.constructor,n.instance=this,n},e.trigger=function(n,i){return i===void 0&&(i={}),lm(this.eventBusEl_,n,this.getEventHash(i))},e.handleStateChanged=function(n){},e.dispose=function(){var n=this.name,i=this.player;this.trigger("dispose"),this.off(),i.off("dispose",this.dispose),i[yp][n]=!1,this.player=this.state=null,i[n]=j4(n,Qf[n])},r.isBasic=function(n){var i=typeof n=="string"?A_(n):n;return typeof i=="function"&&!r.prototype.isPrototypeOf(i.prototype)},r.registerPlugin=function(n,i){if(typeof n!="string")throw new Error('Illegal plugin name, "'+n+'", must be a string, was '+typeof n+".");if(Nx(n))Gr.warn('A plugin named "'+n+'" already exists. You may want to avoid re-registering plugins!');else if(ki.prototype.hasOwnProperty(n))throw new Error('Illegal plugin name, "'+n+'", cannot share a name with an existing player method!');if(typeof i!="function")throw new Error('Illegal plugin for "'+n+'", must be a function, was '+typeof i+".");return Qf[n]=i,n!==Bx&&(r.isBasic(i)?ki.prototype[n]=X0e(n,i):ki.prototype[n]=j4(n,i)),i},r.deregisterPlugin=function(n){if(n===Bx)throw new Error("Cannot de-register base plugin.");Nx(n)&&(delete Qf[n],delete ki.prototype[n])},r.getPlugins=function(n){n===void 0&&(n=Object.keys(Qf));var i;return n.forEach(function(s){var a=A_(s);a&&(i=i||{},i[s]=a)}),i},r.getPluginVersion=function(n){var i=A_(n);return i&&i.VERSION||""},r})();Ru.getPlugin=A_;Ru.BASE_PLUGIN_NAME=Bx;Ru.registerPlugin(Bx,Ru);ki.prototype.usingPlugin=function(r){return!!this[yp]&&this[yp][r]===!0};ki.prototype.hasPlugin=function(r){return!!Nx(r)};var z4=!1,Y0e=function(e,t){t===void 0&&(t={}),z4||(Gr.warn("videojs.extend is deprecated as of Video.js 7.22.0 and will be removed in Video.js 8.0.0"),z4=!0);var n=function(){e.apply(this,arguments)},i={};typeof t=="object"?(t.constructor!==Object.prototype.constructor&&(n=t.constructor),i=t):typeof t=="function"&&(n=t),$a(n,e),e&&(n.super_=e);for(var s in i)i.hasOwnProperty(s)&&(n.prototype[s]=i[s]);return n},gj=function(e){return e.indexOf("#")===0?e.slice(1):e};function Le(r,e,t){var n=Le.getPlayer(r);if(n)return e&&Gr.warn('Player "'+r+'" is already initialised. Options will not be applied.'),t&&n.ready(t),n;var i=typeof r=="string"?Od("#"+gj(r)):r;if(!om(i))throw new TypeError("The element or ID supplied is not valid. (videojs)");(!i.ownerDocument.defaultView||!i.ownerDocument.body.contains(i))&&Gr.warn("The element supplied is not included in the DOM"),e=e||{},e.restoreEl===!0&&(e.restoreEl=(i.parentNode&&i.parentNode.hasAttribute("data-vjs-player")?i.parentNode:i).cloneNode(!0)),Ld("beforesetup").forEach(function(a){var o=a(i,Vn(e));if(!Tc(o)||Array.isArray(o)){Gr.error("please return an object in beforesetup hooks");return}e=Vn(e,o)});var s=Ct.getComponent("Player");return n=new s(i,e,t),Ld("setup").forEach(function(a){return a(n)}),n}Le.hooks_=mc;Le.hooks=Ld;Le.hook=Tme;Le.hookOnce=Cme;Le.removeHook=l$;if(X.VIDEOJS_NO_DYNAMIC_STYLE!==!0&&am()){var my=Od(".vjs-styles-defaults");if(!my){my=P$("vjs-styles-defaults");var wC=Od("head");wC&&wC.insertBefore(my,wC.firstChild),R$(my,`
      .video-js {
        width: 300px;
        height: 150px;
      }

      .vjs-fluid:not(.vjs-audio-only-mode) {
        padding-top: 56.25%
      }
    `)}}pE(1,Le);Le.VERSION=o$;Le.options=ki.prototype.options_;Le.getPlayers=function(){return ki.players};Le.getPlayer=function(r){var e=ki.players,t;if(typeof r=="string"){var n=gj(r),i=e[n];if(i)return i;t=Od("#"+n)}else t=r;if(om(t)){var s=t,a=s.player,o=s.playerId;if(a||e[o])return a||e[o]}};Le.getAllPlayers=function(){return Object.keys(ki.players).map(function(r){return ki.players[r]}).filter(Boolean)};Le.players=ki.players;Le.getComponent=Ct.getComponent;Le.registerComponent=function(r,e){Un.isTech(e)&&Gr.warn("The "+r+" tech was registered as a component. It should instead be registered using videojs.registerTech(name, tech)"),Ct.registerComponent.call(Ct,r,e)};Le.getTech=Un.getTech;Le.registerTech=Un.registerTech;Le.use=a0e;Object.defineProperty(Le,"middleware",{value:{},writeable:!1,enumerable:!0});Object.defineProperty(Le.middleware,"TERMINATOR",{value:Lx,writeable:!1,enumerable:!0});Le.browser=Ime;Le.TOUCH_ENABLED=Fp;Le.extend=Y0e;Le.mergeOptions=Vn;Le.bind=Wn;Le.registerPlugin=Ru.registerPlugin;Le.deregisterPlugin=Ru.deregisterPlugin;Le.plugin=function(r,e){return Gr.warn("videojs.plugin() is deprecated; use videojs.registerPlugin() instead"),Ru.registerPlugin(r,e)};Le.getPlugins=Ru.getPlugins;Le.getPlugin=Ru.getPlugin;Le.getPluginVersion=Ru.getPluginVersion;Le.addLanguage=function(r,e){var t;return r=(""+r).toLowerCase(),Le.options.languages=Vn(Le.options.languages,(t={},t[r]=e,t)),Le.options.languages[r]};Le.log=Gr;Le.createLogger=c$;Le.createTimeRange=Le.createTimeRanges=$h;Le.formatTime=jp;Le.setFormatTime=w0e;Le.resetFormatTime=E0e;Le.parseUrl=qk;Le.isCrossOrigin=mS;Le.EventTarget=rs;Le.on=go;Le.one=fS;Le.off=$s;Le.trigger=lm;Le.xhr=WU;Le.TextTrack=Hg;Le.AudioTrack=j$;Le.VideoTrack=z$;["isEl","isTextNode","createEl","hasClass","addClass","removeClass","toggleClass","setAttributes","getAttributes","emptyEl","appendContent","insertContent"].forEach(function(r){Le[r]=function(){return Gr.warn("videojs."+r+"() is deprecated; use videojs.dom."+r+"() instead"),D$[r].apply(null,arguments)}});Le.computedStyle=ag;Le.dom=D$;Le.url=r0e;Le.defineLazyProperty=dA;Le.addLanguage("en",{"Non-Fullscreen":"Exit Fullscreen"});/*! @name @videojs/http-streaming @version 2.16.3 @license Apache-2.0 */var xl=sS,$x=function(e,t,n){return e&&n&&n.responseURL&&t!==n.responseURL?n.responseURL:t},Rl=function(e){return Le.log.debug?Le.log.debug.bind(Le,"VHS:",e+" >"):function(){}},Md=1/30,gu=Md*3,vj=function(e,t){var n=[],i;if(e&&e.length)for(i=0;i<e.length;i++)t(e.start(i),e.end(i))&&n.push([e.start(i),e.end(i)]);return Le.createTimeRanges(n)},Jf=function(e,t){return vj(e,function(n,i){return n-gu<=t&&i+gu>=t})},gy=function(e,t){return vj(e,function(n){return n-Md>=t})},Q0e=function(e){if(e.length<2)return Le.createTimeRanges();for(var t=[],n=1;n<e.length;n++){var i=e.end(n-1),s=e.start(n);t.push([i,s])}return Le.createTimeRanges(t)},J0e=function(e,t){var n=null,i=null,s=0,a=[],o=[];if(!e||!e.length||!t||!t.length)return Le.createTimeRange();for(var l=e.length;l--;)a.push({time:e.start(l),type:"start"}),a.push({time:e.end(l),type:"end"});for(l=t.length;l--;)a.push({time:t.start(l),type:"start"}),a.push({time:t.end(l),type:"end"});for(a.sort(function(u,c){return u.time-c.time}),l=0;l<a.length;l++)a[l].type==="start"?(s++,s===2&&(n=a[l].time)):a[l].type==="end"&&(s--,s===1&&(i=a[l].time)),n!==null&&i!==null&&(o.push([n,i]),n=null,i=null);return Le.createTimeRanges(o)},yj=function(e){var t=[];if(!e||!e.length)return"";for(var n=0;n<e.length;n++)t.push(e.start(n)+" => "+e.end(n));return t.join(", ")},Z0e=function(e,t,n){n===void 0&&(n=1);var i=e.length?e.end(e.length-1):0;return(i-t)/n},Ah=function(e){for(var t=[],n=0;n<e.length;n++)t.push({start:e.start(n),end:e.end(n)});return t},ege=function(e,t){if(e===t)return!1;if(!e&&t||!t&&e||e.length!==t.length)return!0;for(var n=0;n<e.length;n++)if(e.start(n)!==t.start(n)||e.end(n)!==t.end(n))return!0;return!1},H4=function(e){if(!(!e||!e.length||!e.end))return e.end(e.length-1)},hA=function(e,t){var n=0;if(!e||!e.length)return n;for(var i=0;i<e.length;i++){var s=e.start(i),a=e.end(i);if(!(t>a)){if(t>s&&t<=a){n+=a-t;continue}n+=a-s}}return n},V4=Le.createTimeRange,fA=function(e,t){if(!t.preload)return t.duration;var n=0;return(t.parts||[]).forEach(function(i){n+=i.duration}),(t.preloadHints||[]).forEach(function(i){i.type==="PART"&&(n+=e.partTargetDuration)}),n},bE=function(e){return(e.segments||[]).reduce(function(t,n,i){return n.parts?n.parts.forEach(function(s,a){t.push({duration:s.duration,segmentIndex:i,partIndex:a,part:s,segment:n})}):t.push({duration:n.duration,segmentIndex:i,partIndex:null,segment:n,part:null}),t},[])},_j=function(e){var t=e.segments&&e.segments.length&&e.segments[e.segments.length-1];return t&&t.parts||[]},xj=function(e){var t=e.preloadSegment;if(t){var n=t.parts,i=t.preloadHints,s=(i||[]).reduce(function(a,o){return a+(o.type==="PART"?1:0)},0);return s+=n&&n.length?n.length:0,s}},bj=function(e,t){if(t.endList)return 0;if(e&&e.suggestedPresentationDelay)return e.suggestedPresentationDelay;var n=_j(t).length>0;return n&&t.serverControl&&t.serverControl.partHoldBack?t.serverControl.partHoldBack:n&&t.partTargetDuration?t.partTargetDuration*3:t.serverControl&&t.serverControl.holdBack?t.serverControl.holdBack:t.targetDuration?t.targetDuration*3:0},tge=function(e,t){var n=0,i=t-e.mediaSequence,s=e.segments[i];if(s){if(typeof s.start<"u")return{result:s.start,precise:!0};if(typeof s.end<"u")return{result:s.end-s.duration,precise:!0}}for(;i--;){if(s=e.segments[i],typeof s.end<"u")return{result:n+s.end,precise:!0};if(n+=fA(e,s),typeof s.start<"u")return{result:n+s.start,precise:!0}}return{result:n,precise:!1}},rge=function(e,t){for(var n=0,i,s=t-e.mediaSequence;s<e.segments.length;s++){if(i=e.segments[s],typeof i.start<"u")return{result:i.start-n,precise:!0};if(n+=fA(e,i),typeof i.end<"u")return{result:i.end-n,precise:!0}}return{result:-1,precise:!1}},Sj=function(e,t,n){if(typeof t>"u"&&(t=e.mediaSequence+e.segments.length),t<e.mediaSequence)return 0;var i=tge(e,t);if(i.precise)return i.result;var s=rge(e,t);return s.precise?s.result:i.result+n},Tj=function(e,t,n){if(!e)return 0;if(typeof n!="number"&&(n=0),typeof t>"u"){if(e.totalDuration)return e.totalDuration;if(!e.endList)return X.Infinity}return Sj(e,t,n)},M0=function(e){var t=e.defaultDuration,n=e.durationList,i=e.startIndex,s=e.endIndex,a=0;if(i>s){var o=[s,i];i=o[0],s=o[1]}if(i<0){for(var l=i;l<Math.min(0,s);l++)a+=t;i=0}for(var u=i;u<s;u++)a+=n[u].duration;return a},Cj=function(e,t,n,i){if(!e||!e.segments)return null;if(e.endList)return Tj(e);if(t===null)return null;t=t||0;var s=Sj(e,e.mediaSequence+e.segments.length,t);return n&&(i=typeof i=="number"?i:bj(null,e),s-=i),Math.max(0,s)},nge=function(e,t,n){var i=!0,s=t||0,a=Cj(e,t,i,n);return a===null?V4():V4(s,a)},ige=function(e){for(var t=e.playlist,n=e.currentTime,i=e.startingSegmentIndex,s=e.startingPartIndex,a=e.startTime,o=e.experimentalExactManifestTimings,l=n-a,u=bE(t),c=0,h=0;h<u.length;h++){var m=u[h];if(i===m.segmentIndex&&!(typeof s=="number"&&typeof m.partIndex=="number"&&s!==m.partIndex)){c=h;break}}if(l<0){if(c>0)for(var g=c-1;g>=0;g--){var y=u[g];if(l+=y.duration,o){if(l<0)continue}else if(l+Md<=0)continue;return{partIndex:y.partIndex,segmentIndex:y.segmentIndex,startTime:a-M0({defaultDuration:t.targetDuration,durationList:u,startIndex:c,endIndex:g})}}return{partIndex:u[0]&&u[0].partIndex||null,segmentIndex:u[0]&&u[0].segmentIndex||0,startTime:n}}if(c<0){for(var v=c;v<0;v++)if(l-=t.targetDuration,l<0)return{partIndex:u[0]&&u[0].partIndex||null,segmentIndex:u[0]&&u[0].segmentIndex||0,startTime:n};c=0}for(var x=c;x<u.length;x++){var w=u[x];if(l-=w.duration,o){if(l>0)continue}else if(l-Md>=0)continue;return{partIndex:w.partIndex,segmentIndex:w.segmentIndex,startTime:a+M0({defaultDuration:t.targetDuration,durationList:u,startIndex:c,endIndex:x})}}return{segmentIndex:u[u.length-1].segmentIndex,partIndex:u[u.length-1].partIndex,startTime:n}},wj=function(e){return e.excludeUntil&&e.excludeUntil>Date.now()},pA=function(e){return e.excludeUntil&&e.excludeUntil===1/0},_S=function(e){var t=wj(e);return!e.disabled&&!t},sge=function(e){return e.disabled},age=function(e){for(var t=0;t<e.segments.length;t++)if(e.segments[t].key)return!0;return!1},Ej=function(e,t){return t.attributes&&t.attributes[e]},oge=function(e,t,n,i){if(i===void 0&&(i=0),!Ej("BANDWIDTH",n))return NaN;var s=e*n.attributes.BANDWIDTH;return(s-i*8)/t},SE=function(e,t){if(e.playlists.length===1)return!0;var n=t.attributes.BANDWIDTH||Number.MAX_VALUE;return e.playlists.filter(function(i){return _S(i)?(i.attributes.BANDWIDTH||0)<n:!1}).length===0},mA=function(e,t){return!e&&!t||!e&&t||e&&!t?!1:!!(e===t||e.id&&t.id&&e.id===t.id||e.resolvedUri&&t.resolvedUri&&e.resolvedUri===t.resolvedUri||e.uri&&t.uri&&e.uri===t.uri)},W4=function(e,t){var n=e&&e.mediaGroups&&e.mediaGroups.AUDIO||{},i=!1;for(var s in n){for(var a in n[s])if(i=t(n[s][a]),i)break;if(i)break}return!!i},qg=function(e){if(!e||!e.playlists||!e.playlists.length){var t=W4(e,function(a){return a.playlists&&a.playlists.length||a.uri});return t}for(var n=function(o){var l=e.playlists[o],u=l.attributes&&l.attributes.CODECS;if(u&&u.split(",").every(function(h){return YU(h)}))return"continue";var c=W4(e,function(h){return mA(l,h)});return c?"continue":{v:!1}},i=0;i<e.playlists.length;i++){var s=n(i);if(s!=="continue"&&typeof s=="object")return s.v}return!0},Ma={liveEdgeDelay:bj,duration:Tj,seekable:nge,getMediaInfoForTime:ige,isEnabled:_S,isDisabled:sge,isBlacklisted:wj,isIncompatible:pA,playlistEnd:Cj,isAes:age,hasAttribute:Ej,estimateSegmentRequestTime:oge,isLowestEnabledRendition:SE,isAudioOnly:qg,playlistMatch:mA,segmentDurationWithParts:fA},kj=Le.log,gA=function(e,t){return e+"-"+t},lge=function(e,t,n){return"placeholder-uri-"+e+"-"+t+"-"+n},uge=function(e){var t=e.onwarn,n=e.oninfo,i=e.manifestString,s=e.customTagParsers,a=s===void 0?[]:s,o=e.customTagMappers,l=o===void 0?[]:o,u=e.experimentalLLHLS,c=new Qfe;t&&c.on("warn",t),n&&c.on("info",n),a.forEach(function(v){return c.addParser(v)}),l.forEach(function(v){return c.addTagMapper(v)}),c.push(i),c.end();var h=c.manifest;if(u||(["preloadSegment","skip","serverControl","renditionReports","partInf","partTargetDuration"].forEach(function(v){h.hasOwnProperty(v)&&delete h[v]}),h.segments&&h.segments.forEach(function(v){["parts","preloadHints"].forEach(function(x){v.hasOwnProperty(x)&&delete v[x]})})),!h.targetDuration){var m=10;h.segments&&h.segments.length&&(m=h.segments.reduce(function(v,x){return Math.max(v,x.duration)},0)),t&&t("manifest has no targetDuration defaulting to "+m),h.targetDuration=m}var g=_j(h);if(g.length&&!h.partTargetDuration){var y=g.reduce(function(v,x){return Math.max(v,x.duration)},0);t&&(t("manifest has no partTargetDuration defaulting to "+y),kj.error("LL-HLS manifest has parts but lacks required #EXT-X-PART-INF:PART-TARGET value. See https://datatracker.ietf.org/doc/html/draft-pantos-hls-rfc8216bis-09#section-4.4.3.7. Playback is not guaranteed.")),h.partTargetDuration=y}return h},fm=function(e,t){e.mediaGroups&&["AUDIO","SUBTITLES"].forEach(function(n){if(e.mediaGroups[n])for(var i in e.mediaGroups[n])for(var s in e.mediaGroups[n][i]){var a=e.mediaGroups[n][i][s];t(a,n,i,s)}})},Aj=function(e){var t=e.playlist,n=e.uri,i=e.id;t.id=i,t.playlistErrors_=0,n&&(t.uri=n),t.attributes=t.attributes||{}},cge=function(e){for(var t=e.playlists.length;t--;){var n=e.playlists[t];Aj({playlist:n,id:gA(t,n.uri)}),n.resolvedUri=xl(e.uri,n.uri),e.playlists[n.id]=n,e.playlists[n.uri]=n,n.attributes.BANDWIDTH||kj.warn("Invalid playlist STREAM-INF detected. Missing BANDWIDTH attribute.")}},dge=function(e){fm(e,function(t){t.uri&&(t.resolvedUri=xl(e.uri,t.uri))})},hge=function(e,t){var n=gA(0,t),i={mediaGroups:{AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},uri:X.location.href,resolvedUri:X.location.href,playlists:[{uri:t,id:n,resolvedUri:t,attributes:{}}]};return i.playlists[n]=i.playlists[0],i.playlists[t]=i.playlists[0],i},Dj=function(e,t,n){n===void 0&&(n=lge),e.uri=t;for(var i=0;i<e.playlists.length;i++)if(!e.playlists[i].uri){var s="placeholder-uri-"+i;e.playlists[i].uri=s}var a=qg(e);fm(e,function(o,l,u,c){if(!o.playlists||!o.playlists.length){if(a&&l==="AUDIO"&&!o.uri)for(var h=0;h<e.playlists.length;h++){var m=e.playlists[h];if(m.attributes&&m.attributes.AUDIO&&m.attributes.AUDIO===u)return}o.playlists=[tr({},o)]}o.playlists.forEach(function(g,y){var v=n(l,u,c,g),x=gA(y,v);g.uri?g.resolvedUri=g.resolvedUri||xl(e.uri,g.uri):(g.uri=y===0?v:x,g.resolvedUri=g.uri),g.id=g.id||x,g.attributes=g.attributes||{},e.playlists[g.id]=g,e.playlists[g.uri]=g})}),cge(e),dge(e)},jx=Le.mergeOptions,fge=Le.EventTarget,pge=function(e,t){if(t.endList||!t.serverControl)return e;var n={};if(t.serverControl.canBlockReload){var i=t.preloadSegment,s=t.mediaSequence+t.segments.length;if(i){var a=i.parts||[],o=xj(t)-1;o>-1&&o!==a.length-1&&(n._HLS_part=o),(o>-1||a.length)&&s--}n._HLS_msn=s}if(t.serverControl&&t.serverControl.canSkipUntil&&(n._HLS_skip=t.serverControl.canSkipDateranges?"v2":"YES"),Object.keys(n).length){var l=new X.URL(e);["_HLS_skip","_HLS_msn","_HLS_part"].forEach(function(u){n.hasOwnProperty(u)&&l.searchParams.set(u,n[u])}),e=l.toString()}return e},mge=function(e,t){if(!e)return t;var n=jx(e,t);if(e.preloadHints&&!t.preloadHints&&delete n.preloadHints,e.parts&&!t.parts)delete n.parts;else if(e.parts&&t.parts)for(var i=0;i<t.parts.length;i++)e.parts&&e.parts[i]&&(n.parts[i]=jx(e.parts[i],t.parts[i]));return!e.skipped&&t.skipped&&(n.skipped=!1),e.preload&&!t.preload&&(n.preload=!1),n},gge=function(e,t,n){var i=e.slice(),s=t.slice();n=n||0;for(var a=[],o,l=0;l<s.length;l++){var u=i[l+n],c=s[l];u?(o=u.map||o,a.push(mge(u,c))):(o&&!c.map&&(c.map=o),a.push(c))}return a},Ij=function(e,t){!e.resolvedUri&&e.uri&&(e.resolvedUri=xl(t,e.uri)),e.key&&!e.key.resolvedUri&&(e.key.resolvedUri=xl(t,e.key.uri)),e.map&&!e.map.resolvedUri&&(e.map.resolvedUri=xl(t,e.map.uri)),e.map&&e.map.key&&!e.map.key.resolvedUri&&(e.map.key.resolvedUri=xl(t,e.map.key.uri)),e.parts&&e.parts.length&&e.parts.forEach(function(n){n.resolvedUri||(n.resolvedUri=xl(t,n.uri))}),e.preloadHints&&e.preloadHints.length&&e.preloadHints.forEach(function(n){n.resolvedUri||(n.resolvedUri=xl(t,n.uri))})},Pj=function(e){var t=e.segments||[],n=e.preloadSegment;if(n&&n.parts&&n.parts.length){if(n.preloadHints){for(var i=0;i<n.preloadHints.length;i++)if(n.preloadHints[i].type==="MAP")return t}n.duration=e.targetDuration,n.preload=!0,t.push(n)}return t},Rj=function(e,t){return e===t||e.segments&&t.segments&&e.segments.length===t.segments.length&&e.endList===t.endList&&e.mediaSequence===t.mediaSequence&&e.preloadSegment===t.preloadSegment},TE=function(e,t,n){n===void 0&&(n=Rj);var i=jx(e,{}),s=i.playlists[t.id];if(!s||n(s,t))return null;t.segments=Pj(t);var a=jx(s,t);if(a.preloadSegment&&!t.preloadSegment&&delete a.preloadSegment,s.segments){if(t.skip){t.segments=t.segments||[];for(var o=0;o<t.skip.skippedSegments;o++)t.segments.unshift({skipped:!0})}a.segments=gge(s.segments,t.segments,t.mediaSequence-s.mediaSequence)}a.segments.forEach(function(u){Ij(u,a.resolvedUri)});for(var l=0;l<i.playlists.length;l++)i.playlists[l].id===t.id&&(i.playlists[l]=a);return i.playlists[t.id]=a,i.playlists[t.uri]=a,fm(e,function(u,c,h,m){if(u.playlists)for(var g=0;g<u.playlists.length;g++)t.id===u.playlists[g].id&&(u.playlists[g]=a)}),i},CE=function(e,t){var n=e.segments||[],i=n[n.length-1],s=i&&i.parts&&i.parts[i.parts.length-1],a=s&&s.duration||i&&i.duration;return t&&a?a*1e3:(e.partTargetDuration||e.targetDuration||10)*500},Zf=(function(r){$t(e,r);function e(n,i,s){var a;if(s===void 0&&(s={}),a=r.call(this)||this,!n)throw new Error("A non-empty playlist URL or object is required");a.logger_=Rl("PlaylistLoader");var o=s,l=o.withCredentials,u=l===void 0?!1:l,c=o.handleManifestRedirects,h=c===void 0?!1:c;a.src=n,a.vhs_=i,a.withCredentials=u,a.handleManifestRedirects=h;var m=i.options_;return a.customTagParsers=m&&m.customTagParsers||[],a.customTagMappers=m&&m.customTagMappers||[],a.experimentalLLHLS=m&&m.experimentalLLHLS||!1,Le.browser.IE_VERSION&&(a.experimentalLLHLS=!1),a.state="HAVE_NOTHING",a.handleMediaupdatetimeout_=a.handleMediaupdatetimeout_.bind(He(a)),a.on("mediaupdatetimeout",a.handleMediaupdatetimeout_),a}var t=e.prototype;return t.handleMediaupdatetimeout_=function(){var i=this;if(this.state==="HAVE_METADATA"){var s=this.media(),a=xl(this.master.uri,s.uri);this.experimentalLLHLS&&(a=pge(a,s)),this.state="HAVE_CURRENT_METADATA",this.request=this.vhs_.xhr({uri:a,withCredentials:this.withCredentials},function(o,l){if(i.request){if(o)return i.playlistRequestError(i.request,i.media(),"HAVE_METADATA");i.haveMetadata({playlistString:i.request.responseText,url:i.media().uri,id:i.media().id})}})}},t.playlistRequestError=function(i,s,a){var o=s.uri,l=s.id;this.request=null,a&&(this.state=a),this.error={playlist:this.master.playlists[l],status:i.status,message:"HLS playlist request error at URL: "+o+".",responseText:i.responseText,code:i.status>=500?4:2},this.trigger("error")},t.parseManifest_=function(i){var s=this,a=i.url,o=i.manifestString;return uge({onwarn:function(u){var c=u.message;return s.logger_("m3u8-parser warn for "+a+": "+c)},oninfo:function(u){var c=u.message;return s.logger_("m3u8-parser info for "+a+": "+c)},manifestString:o,customTagParsers:this.customTagParsers,customTagMappers:this.customTagMappers,experimentalLLHLS:this.experimentalLLHLS})},t.haveMetadata=function(i){var s=i.playlistString,a=i.playlistObject,o=i.url,l=i.id;this.request=null,this.state="HAVE_METADATA";var u=a||this.parseManifest_({url:o,manifestString:s});u.lastRequest=Date.now(),Aj({playlist:u,uri:o,id:l});var c=TE(this.master,u);this.targetDuration=u.partTargetDuration||u.targetDuration,this.pendingMedia_=null,c?(this.master=c,this.media_=this.master.playlists[l]):this.trigger("playlistunchanged"),this.updateMediaUpdateTimeout_(CE(this.media(),!!c)),this.trigger("loadedplaylist")},t.dispose=function(){this.trigger("dispose"),this.stopRequest(),X.clearTimeout(this.mediaUpdateTimeout),X.clearTimeout(this.finalRenditionTimeout),this.off()},t.stopRequest=function(){if(this.request){var i=this.request;this.request=null,i.onreadystatechange=null,i.abort()}},t.media=function(i,s){var a=this;if(!i)return this.media_;if(this.state==="HAVE_NOTHING")throw new Error("Cannot switch media playlist from "+this.state);if(typeof i=="string"){if(!this.master.playlists[i])throw new Error("Unknown playlist URI: "+i);i=this.master.playlists[i]}if(X.clearTimeout(this.finalRenditionTimeout),s){var o=(i.partTargetDuration||i.targetDuration)/2*1e3||5e3;this.finalRenditionTimeout=X.setTimeout(this.media.bind(this,i,!1),o);return}var l=this.state,u=!this.media_||i.id!==this.media_.id,c=this.master.playlists[i.id];if(c&&c.endList||i.endList&&i.segments.length){this.request&&(this.request.onreadystatechange=null,this.request.abort(),this.request=null),this.state="HAVE_METADATA",this.media_=i,u&&(this.trigger("mediachanging"),l==="HAVE_MASTER"?this.trigger("loadedmetadata"):this.trigger("mediachange"));return}if(this.updateMediaUpdateTimeout_(CE(i,!0)),!!u){if(this.state="SWITCHING_MEDIA",this.request){if(i.resolvedUri===this.request.url)return;this.request.onreadystatechange=null,this.request.abort(),this.request=null}this.media_&&this.trigger("mediachanging"),this.pendingMedia_=i,this.request=this.vhs_.xhr({uri:i.resolvedUri,withCredentials:this.withCredentials},function(h,m){if(a.request){if(i.lastRequest=Date.now(),i.resolvedUri=$x(a.handleManifestRedirects,i.resolvedUri,m),h)return a.playlistRequestError(a.request,i,l);a.haveMetadata({playlistString:m.responseText,url:i.uri,id:i.id}),l==="HAVE_MASTER"?a.trigger("loadedmetadata"):a.trigger("mediachange")}})}},t.pause=function(){this.mediaUpdateTimeout&&(X.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null),this.stopRequest(),this.state==="HAVE_NOTHING"&&(this.started=!1),this.state==="SWITCHING_MEDIA"?this.media_?this.state="HAVE_METADATA":this.state="HAVE_MASTER":this.state==="HAVE_CURRENT_METADATA"&&(this.state="HAVE_METADATA")},t.load=function(i){var s=this;this.mediaUpdateTimeout&&(X.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null);var a=this.media();if(i){var o=a?(a.partTargetDuration||a.targetDuration)/2*1e3:5e3;this.mediaUpdateTimeout=X.setTimeout(function(){s.mediaUpdateTimeout=null,s.load()},o);return}if(!this.started){this.start();return}a&&!a.endList?this.trigger("mediaupdatetimeout"):this.trigger("loadedplaylist")},t.updateMediaUpdateTimeout_=function(i){var s=this;this.mediaUpdateTimeout&&(X.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null),!(!this.media()||this.media().endList)&&(this.mediaUpdateTimeout=X.setTimeout(function(){s.mediaUpdateTimeout=null,s.trigger("mediaupdatetimeout"),s.updateMediaUpdateTimeout_(i)},i))},t.start=function(){var i=this;if(this.started=!0,typeof this.src=="object"){this.src.uri||(this.src.uri=X.location.href),this.src.resolvedUri=this.src.uri,setTimeout(function(){i.setupInitialPlaylist(i.src)},0);return}this.request=this.vhs_.xhr({uri:this.src,withCredentials:this.withCredentials},function(s,a){if(i.request){if(i.request=null,s)return i.error={status:a.status,message:"HLS playlist request error at URL: "+i.src+".",responseText:a.responseText,code:2},i.state==="HAVE_NOTHING"&&(i.started=!1),i.trigger("error");i.src=$x(i.handleManifestRedirects,i.src,a);var o=i.parseManifest_({manifestString:a.responseText,url:i.src});i.setupInitialPlaylist(o)}})},t.srcUri=function(){return typeof this.src=="string"?this.src:this.src.uri},t.setupInitialPlaylist=function(i){if(this.state="HAVE_MASTER",i.playlists){this.master=i,Dj(this.master,this.srcUri()),i.playlists.forEach(function(a){a.segments=Pj(a),a.segments.forEach(function(o){Ij(o,a.resolvedUri)})}),this.trigger("loadedplaylist"),this.request||this.media(this.master.playlists[0]);return}var s=this.srcUri()||X.location.href;this.master=hge(i,s),this.haveMetadata({playlistObject:i,url:s,id:this.master.playlists[0].id}),this.trigger("loadedmetadata")},e})(fge),vge=Le.xhr,yge=Le.mergeOptions,wE=function(e,t,n,i){var s=e.responseType==="arraybuffer"?e.response:e.responseText;!t&&s&&(e.responseTime=Date.now(),e.roundTripTime=e.responseTime-e.requestTime,e.bytesReceived=s.byteLength||s.length,e.bandwidth||(e.bandwidth=Math.floor(e.bytesReceived/e.roundTripTime*8*1e3))),n.headers&&(e.responseHeaders=n.headers),t&&t.code==="ETIMEDOUT"&&(e.timedout=!0),!t&&!e.aborted&&n.statusCode!==200&&n.statusCode!==206&&n.statusCode!==0&&(t=new Error("XHR Failed with a response of: "+(e&&(s||e.responseText)))),i(t,e)},Lj=function(){var e=function t(n,i){n=yge({timeout:45e3},n);var s=t.beforeRequest||Le.Vhs.xhr.beforeRequest;if(s&&typeof s=="function"){var a=s(n);a&&(n=a)}var o=Le.Vhs.xhr.original===!0?vge:Le.Vhs.xhr,l=o(n,function(c,h){return wE(l,c,h,i)}),u=l.abort;return l.abort=function(){return l.aborted=!0,u.apply(l,arguments)},l.uri=n.uri,l.requestTime=Date.now(),l};return e.original=!0,e},_ge=function(e){var t,n=e.offset;return typeof e.offset=="bigint"||typeof e.length=="bigint"?t=X.BigInt(e.offset)+X.BigInt(e.length)-X.BigInt(1):t=e.offset+e.length-1,"bytes="+n+"-"+t},EE=function(e){var t={};return e.byterange&&(t.Range=_ge(e.byterange)),t},xge=function(e,t){return e.start(t)+"-"+e.end(t)},bge=function(e,t){var n=e.toString(16);return"00".substring(0,2-n.length)+n+(t%2?" ":"")},Sge=function(e){return e>=32&&e<126?String.fromCharCode(e):"."},Oj=function(e){var t={};return Object.keys(e).forEach(function(n){var i=e[n];JU(i)?t[n]={bytes:i.buffer,byteOffset:i.byteOffset,byteLength:i.byteLength}:t[n]=i}),t},zx=function(e){var t=e.byterange||{length:1/0,offset:0};return[t.length,t.offset,e.resolvedUri].join(",")},Mj=function(e){return e.resolvedUri},Fj=function(e){for(var t=Array.prototype.slice.call(e),n=16,i="",s,a,o=0;o<t.length/n;o++)s=t.slice(o*n,o*n+n).map(bge).join(""),a=t.slice(o*n,o*n+n).map(Sge).join(""),i+=s+" "+a+`
`;return i},Tge=function(e){var t=e.bytes;return Fj(t)},Cge=function(e){var t="",n;for(n=0;n<e.length;n++)t+=xge(e,n)+" ";return t},wge=Object.freeze({__proto__:null,createTransferableMessage:Oj,initSegmentId:zx,segmentKeyId:Mj,hexDump:Fj,tagDump:Tge,textRanges:Cge}),Bj=.25,Ege=function(e,t){if(!t.dateTimeObject)return null;var n=t.videoTimingInfo.transmuxerPrependedSeconds,i=t.videoTimingInfo.transmuxedPresentationStart,s=i+n,a=e-s;return new Date(t.dateTimeObject.getTime()+a*1e3)},kge=function(e){return e.transmuxedPresentationEnd-e.transmuxedPresentationStart-e.transmuxerPrependedSeconds},Age=function(e,t){var n;try{n=new Date(e)}catch{return null}if(!t||!t.segments||t.segments.length===0)return null;var i=t.segments[0];if(n<i.dateTimeObject)return null;for(var s=0;s<t.segments.length-1;s++){i=t.segments[s];var a=t.segments[s+1].dateTimeObject;if(n<a)break}var o=t.segments[t.segments.length-1],l=o.dateTimeObject,u=o.videoTimingInfo?kge(o.videoTimingInfo):o.duration+o.duration*Bj,c=new Date(l.getTime()+u*1e3);return n>c?null:(n>l&&(i=o),{segment:i,estimatedStart:i.videoTimingInfo?i.videoTimingInfo.transmuxedPresentationStart:Ma.duration(t,t.mediaSequence+t.segments.indexOf(i)),type:i.videoTimingInfo?"accurate":"estimate"})},Dge=function(e,t){if(!t||!t.segments||t.segments.length===0)return null;for(var n=0,i,s=0;s<t.segments.length&&(i=t.segments[s],n=i.videoTimingInfo?i.videoTimingInfo.transmuxedPresentationEnd:n+i.duration,!(e<=n));s++);var a=t.segments[t.segments.length-1];if(a.videoTimingInfo&&a.videoTimingInfo.transmuxedPresentationEnd<e)return null;if(e>n){if(e>n+a.duration*Bj)return null;i=a}return{segment:i,estimatedStart:i.videoTimingInfo?i.videoTimingInfo.transmuxedPresentationStart:n-i.duration,type:i.videoTimingInfo?"accurate":"estimate"}},Ige=function(e,t){var n,i;try{n=new Date(e),i=new Date(t)}catch{}var s=n.getTime(),a=i.getTime();return(a-s)/1e3},Pge=function(e){if(!e.segments||e.segments.length===0)return!1;for(var t=0;t<e.segments.length;t++){var n=e.segments[t];if(!n.dateTimeObject)return!1}return!0},Rge=function(e){var t=e.playlist,n=e.time,i=n===void 0?void 0:n,s=e.callback;if(!s)throw new Error("getProgramTime: callback must be provided");if(!t||i===void 0)return s({message:"getProgramTime: playlist and time must be provided"});var a=Dge(i,t);if(!a)return s({message:"valid programTime was not found"});if(a.type==="estimate")return s({message:"Accurate programTime could not be determined. Please seek to e.seekTime and try again",seekTime:a.estimatedStart});var o={mediaSeconds:i},l=Ege(i,a.segment);return l&&(o.programDateTime=l.toISOString()),s(null,o)},Lge=function r(e){var t=e.programTime,n=e.playlist,i=e.retryCount,s=i===void 0?2:i,a=e.seekTo,o=e.pauseAfterSeek,l=o===void 0?!0:o,u=e.tech,c=e.callback;if(!c)throw new Error("seekToProgramTime: callback must be provided");if(typeof t>"u"||!n||!a)return c({message:"seekToProgramTime: programTime, seekTo and playlist must be provided"});if(!n.endList&&!u.hasStarted_)return c({message:"player must be playing a live stream to start buffering"});if(!Pge(n))return c({message:"programDateTime tags must be provided in the manifest "+n.resolvedUri});var h=Age(t,n);if(!h)return c({message:t+" was not found in the stream"});var m=h.segment,g=Ige(m.dateTimeObject,t);if(h.type==="estimate"){if(s===0)return c({message:t+" is not buffered yet. Try again"});a(h.estimatedStart+g),u.one("seeked",function(){r({programTime:t,playlist:n,retryCount:s-1,seekTo:a,pauseAfterSeek:l,tech:u,callback:c})});return}var y=m.start+g,v=function(){return c(null,u.currentTime())};u.one("seeked",v),l&&u.pause(),a(y)},EC=function(e,t){if(e.readyState===4)return t()},Oge=function(e,t,n){var i=[],s,a=!1,o=function(m,g,y,v){return g.abort(),a=!0,n(m,g,y,v)},l=function(m,g){if(!a){if(m)return o(m,g,"",i);var y=g.responseText.substring(i&&i.byteLength||0,g.responseText.length);if(i=upe(i,ZU(y,!0)),s=s||g0(i),i.length<10||s&&i.length<s+2)return EC(g,function(){return o(m,g,"",i)});var v=Fk(i);return v==="ts"&&i.length<188?EC(g,function(){return o(m,g,"",i)}):!v&&i.length<376?EC(g,function(){return o(m,g,"",i)}):o(null,g,v,i)}},u={uri:e,beforeSend:function(m){m.overrideMimeType("text/plain; charset=x-user-defined"),m.addEventListener("progress",function(g){return g.total,g.loaded,wE(m,null,{statusCode:m.status},l)})}},c=t(u,function(h,m){return wE(c,h,m,l)});return c},Mge=Le.EventTarget,Nj=Le.mergeOptions,q4=function(e,t){if(!Rj(e,t)||e.sidx&&t.sidx&&(e.sidx.offset!==t.sidx.offset||e.sidx.length!==t.sidx.length))return!1;if(!e.sidx&&t.sidx||e.sidx&&!t.sidx||e.segments&&!t.segments||!e.segments&&t.segments)return!1;if(!e.segments&&!t.segments)return!0;for(var n=0;n<e.segments.length;n++){var i=e.segments[n],s=t.segments[n];if(i.uri!==s.uri)return!1;if(!(!i.byterange&&!s.byterange)){var a=i.byterange,o=s.byterange;if(a&&!o||!a&&o||a.offset!==o.offset||a.length!==o.length)return!1}}return!0},Fge=function(e,t,n,i){var s=i.attributes.NAME||n;return"placeholder-uri-"+e+"-"+t+"-"+s},Bge=function(e){var t=e.masterXml,n=e.srcUrl,i=e.clientOffset,s=e.sidxMapping,a=e.previousManifest,o=eme(t,{manifestUri:n,clientOffset:i,sidxMapping:s,previousManifest:a});return Dj(o,n,Fge),o},Nge=function(e,t){fm(e,function(n,i,s,a){a in t.mediaGroups[i][s]||delete e.mediaGroups[i][s][a]})},Uge=function(e,t,n){for(var i=!0,s=Nj(e,{duration:t.duration,minimumUpdatePeriod:t.minimumUpdatePeriod,timelineStarts:t.timelineStarts}),a=0;a<t.playlists.length;a++){var o=t.playlists[a];if(o.sidx){var l=oS(o.sidx);n&&n[l]&&n[l].sidx&&Rk(o,n[l].sidx,o.sidx.resolvedUri)}var u=TE(s,o,q4);u&&(s=u,i=!1)}return fm(t,function(c,h,m,g){if(c.playlists&&c.playlists.length){var y=c.playlists[0].id,v=TE(s,c.playlists[0],q4);v&&(s=v,g in s.mediaGroups[h][m]||(s.mediaGroups[h][m][g]=c),s.mediaGroups[h][m][g].playlists[0]=s.playlists[y],i=!1)}}),Nge(s,t),t.minimumUpdatePeriod!==e.minimumUpdatePeriod&&(i=!1),i?null:s},$ge=function(e,t){var n=!e.map&&!t.map,i=n||!!(e.map&&t.map&&e.map.byterange.offset===t.map.byterange.offset&&e.map.byterange.length===t.map.byterange.length);return i&&e.uri===t.uri&&e.byterange.offset===t.byterange.offset&&e.byterange.length===t.byterange.length},G4=function(e,t){var n={};for(var i in e){var s=e[i],a=s.sidx;if(a){var o=oS(a);if(!t[o])break;var l=t[o].sidxInfo;$ge(l,a)&&(n[o]=t[o])}}return n},jge=function(e,t){var n=G4(e.playlists,t),i=n;return fm(e,function(s,a,o,l){if(s.playlists&&s.playlists.length){var u=s.playlists;i=Nj(i,G4(u,t))}}),i},kE=(function(r){$t(e,r);function e(n,i,s,a){var o;s===void 0&&(s={}),o=r.call(this)||this,o.masterPlaylistLoader_=a||He(o),a||(o.isMaster_=!0);var l=s,u=l.withCredentials,c=u===void 0?!1:u,h=l.handleManifestRedirects,m=h===void 0?!1:h;if(o.vhs_=i,o.withCredentials=c,o.handleManifestRedirects=m,!n)throw new Error("A non-empty playlist URL or object is required");return o.on("minimumUpdatePeriod",function(){o.refreshXml_()}),o.on("mediaupdatetimeout",function(){o.refreshMedia_(o.media().id)}),o.state="HAVE_NOTHING",o.loadedPlaylists_={},o.logger_=Rl("DashPlaylistLoader"),o.isMaster_?(o.masterPlaylistLoader_.srcUrl=n,o.masterPlaylistLoader_.sidxMapping_={}):o.childPlaylist_=n,o}var t=e.prototype;return t.requestErrored_=function(i,s,a){if(!this.request)return!0;if(this.request=null,i)return this.error=typeof i=="object"&&!(i instanceof Error)?i:{status:s.status,message:"DASH request error at URL: "+s.uri,response:s.response,code:2},a&&(this.state=a),this.trigger("error"),!0},t.addSidxSegments_=function(i,s,a){var o=this,l=i.sidx&&oS(i.sidx);if(!i.sidx||!l||this.masterPlaylistLoader_.sidxMapping_[l]){this.mediaRequest_=X.setTimeout(function(){return a(!1)},0);return}var u=$x(this.handleManifestRedirects,i.sidx.resolvedUri),c=function(m,g){if(!o.requestErrored_(m,g,s)){var y=o.masterPlaylistLoader_.sidxMapping_,v;try{v=sme(vr(g.response).subarray(8))}catch(x){o.requestErrored_(x,g,s);return}return y[l]={sidxInfo:i.sidx,sidx:v},Rk(i,v,i.sidx.resolvedUri),a(!0)}};this.request=Oge(u,this.vhs_.xhr,function(h,m,g,y){if(h)return c(h,m);if(!g||g!=="mp4")return c({status:m.status,message:"Unsupported "+(g||"unknown")+" container type for sidx segment at URL: "+u,response:"",playlist:i,internal:!0,blacklistDuration:1/0,code:2},m);var v=i.sidx.byterange,x=v.offset,w=v.length;if(y.length>=w+x)return c(h,{response:y.subarray(x,x+w),status:m.status,uri:m.uri});o.request=o.vhs_.xhr({uri:u,responseType:"arraybuffer",headers:EE({byterange:i.sidx.byterange})},c)})},t.dispose=function(){this.trigger("dispose"),this.stopRequest(),this.loadedPlaylists_={},X.clearTimeout(this.minimumUpdatePeriodTimeout_),X.clearTimeout(this.mediaRequest_),X.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null,this.mediaRequest_=null,this.minimumUpdatePeriodTimeout_=null,this.masterPlaylistLoader_.createMupOnMedia_&&(this.off("loadedmetadata",this.masterPlaylistLoader_.createMupOnMedia_),this.masterPlaylistLoader_.createMupOnMedia_=null),this.off()},t.hasPendingRequest=function(){return this.request||this.mediaRequest_},t.stopRequest=function(){if(this.request){var i=this.request;this.request=null,i.onreadystatechange=null,i.abort()}},t.media=function(i){var s=this;if(!i)return this.media_;if(this.state==="HAVE_NOTHING")throw new Error("Cannot switch media playlist from "+this.state);var a=this.state;if(typeof i=="string"){if(!this.masterPlaylistLoader_.master.playlists[i])throw new Error("Unknown playlist URI: "+i);i=this.masterPlaylistLoader_.master.playlists[i]}var o=!this.media_||i.id!==this.media_.id;if(o&&this.loadedPlaylists_[i.id]&&this.loadedPlaylists_[i.id].endList){this.state="HAVE_METADATA",this.media_=i,o&&(this.trigger("mediachanging"),this.trigger("mediachange"));return}o&&(this.media_&&this.trigger("mediachanging"),this.addSidxSegments_(i,a,function(l){s.haveMetadata({startingState:a,playlist:i})}))},t.haveMetadata=function(i){var s=i.startingState,a=i.playlist;this.state="HAVE_METADATA",this.loadedPlaylists_[a.id]=a,this.mediaRequest_=null,this.refreshMedia_(a.id),s==="HAVE_MASTER"?this.trigger("loadedmetadata"):this.trigger("mediachange")},t.pause=function(){this.masterPlaylistLoader_.createMupOnMedia_&&(this.off("loadedmetadata",this.masterPlaylistLoader_.createMupOnMedia_),this.masterPlaylistLoader_.createMupOnMedia_=null),this.stopRequest(),X.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null,this.isMaster_&&(X.clearTimeout(this.masterPlaylistLoader_.minimumUpdatePeriodTimeout_),this.masterPlaylistLoader_.minimumUpdatePeriodTimeout_=null),this.state==="HAVE_NOTHING"&&(this.started=!1)},t.load=function(i){var s=this;X.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null;var a=this.media();if(i){var o=a?a.targetDuration/2*1e3:5e3;this.mediaUpdateTimeout=X.setTimeout(function(){return s.load()},o);return}if(!this.started){this.start();return}a&&!a.endList?(this.isMaster_&&!this.minimumUpdatePeriodTimeout_&&(this.trigger("minimumUpdatePeriod"),this.updateMinimumUpdatePeriodTimeout_()),this.trigger("mediaupdatetimeout")):this.trigger("loadedplaylist")},t.start=function(){var i=this;if(this.started=!0,!this.isMaster_){this.mediaRequest_=X.setTimeout(function(){return i.haveMaster_()},0);return}this.requestMaster_(function(s,a){i.haveMaster_(),!i.hasPendingRequest()&&!i.media_&&i.media(i.masterPlaylistLoader_.master.playlists[0])})},t.requestMaster_=function(i){var s=this;this.request=this.vhs_.xhr({uri:this.masterPlaylistLoader_.srcUrl,withCredentials:this.withCredentials},function(a,o){if(s.requestErrored_(a,o)){s.state==="HAVE_NOTHING"&&(s.started=!1);return}var l=o.responseText!==s.masterPlaylistLoader_.masterXml_;if(s.masterPlaylistLoader_.masterXml_=o.responseText,o.responseHeaders&&o.responseHeaders.date?s.masterLoaded_=Date.parse(o.responseHeaders.date):s.masterLoaded_=Date.now(),s.masterPlaylistLoader_.srcUrl=$x(s.handleManifestRedirects,s.masterPlaylistLoader_.srcUrl,o),l){s.handleMaster_(),s.syncClientServerClock_(function(){return i(o,l)});return}return i(o,l)})},t.syncClientServerClock_=function(i){var s=this,a=tme(this.masterPlaylistLoader_.masterXml_);if(a===null)return this.masterPlaylistLoader_.clientOffset_=this.masterLoaded_-Date.now(),i();if(a.method==="DIRECT")return this.masterPlaylistLoader_.clientOffset_=a.value-Date.now(),i();this.request=this.vhs_.xhr({uri:xl(this.masterPlaylistLoader_.srcUrl,a.value),method:a.method,withCredentials:this.withCredentials},function(o,l){if(s.request){if(o)return s.masterPlaylistLoader_.clientOffset_=s.masterLoaded_-Date.now(),i();var u;a.method==="HEAD"?!l.responseHeaders||!l.responseHeaders.date?u=s.masterLoaded_:u=Date.parse(l.responseHeaders.date):u=Date.parse(l.responseText),s.masterPlaylistLoader_.clientOffset_=u-Date.now(),i()}})},t.haveMaster_=function(){this.state="HAVE_MASTER",this.isMaster_?this.trigger("loadedplaylist"):this.media_||this.media(this.childPlaylist_)},t.handleMaster_=function(){this.mediaRequest_=null;var i=this.masterPlaylistLoader_.master,s=Bge({masterXml:this.masterPlaylistLoader_.masterXml_,srcUrl:this.masterPlaylistLoader_.srcUrl,clientOffset:this.masterPlaylistLoader_.clientOffset_,sidxMapping:this.masterPlaylistLoader_.sidxMapping_,previousManifest:i});i&&(s=Uge(i,s,this.masterPlaylistLoader_.sidxMapping_)),this.masterPlaylistLoader_.master=s||i;var a=this.masterPlaylistLoader_.master.locations&&this.masterPlaylistLoader_.master.locations[0];return a&&a!==this.masterPlaylistLoader_.srcUrl&&(this.masterPlaylistLoader_.srcUrl=a),(!i||s&&s.minimumUpdatePeriod!==i.minimumUpdatePeriod)&&this.updateMinimumUpdatePeriodTimeout_(),!!s},t.updateMinimumUpdatePeriodTimeout_=function(){var i=this.masterPlaylistLoader_;i.createMupOnMedia_&&(i.off("loadedmetadata",i.createMupOnMedia_),i.createMupOnMedia_=null),i.minimumUpdatePeriodTimeout_&&(X.clearTimeout(i.minimumUpdatePeriodTimeout_),i.minimumUpdatePeriodTimeout_=null);var s=i.master&&i.master.minimumUpdatePeriod;if(s===0&&(i.media()?s=i.media().targetDuration*1e3:(i.createMupOnMedia_=i.updateMinimumUpdatePeriodTimeout_,i.one("loadedmetadata",i.createMupOnMedia_))),typeof s!="number"||s<=0){s<0&&this.logger_("found invalid minimumUpdatePeriod of "+s+", not setting a timeout");return}this.createMUPTimeout_(s)},t.createMUPTimeout_=function(i){var s=this.masterPlaylistLoader_;s.minimumUpdatePeriodTimeout_=X.setTimeout(function(){s.minimumUpdatePeriodTimeout_=null,s.trigger("minimumUpdatePeriod"),s.createMUPTimeout_(i)},i)},t.refreshXml_=function(){var i=this;this.requestMaster_(function(s,a){a&&(i.media_&&(i.media_=i.masterPlaylistLoader_.master.playlists[i.media_.id]),i.masterPlaylistLoader_.sidxMapping_=jge(i.masterPlaylistLoader_.master,i.masterPlaylistLoader_.sidxMapping_),i.addSidxSegments_(i.media(),i.state,function(o){i.refreshMedia_(i.media().id)}))})},t.refreshMedia_=function(i){var s=this;if(!i)throw new Error("refreshMedia_ must take a media id");this.media_&&this.isMaster_&&this.handleMaster_();var a=this.masterPlaylistLoader_.master.playlists,o=!this.media_||this.media_!==a[i];if(o?this.media_=a[i]:this.trigger("playlistunchanged"),!this.mediaUpdateTimeout){var l=function u(){s.media().endList||(s.mediaUpdateTimeout=X.setTimeout(function(){s.trigger("mediaupdatetimeout"),u()},CE(s.media(),!!o)))};l()}this.trigger("loadedplaylist")},e})(Mge),Qi={GOAL_BUFFER_LENGTH:30,MAX_GOAL_BUFFER_LENGTH:60,BACK_BUFFER_LENGTH:30,GOAL_BUFFER_LENGTH_RATE:1,INITIAL_BANDWIDTH:4194304,BANDWIDTH_VARIANCE:1.2,BUFFER_LOW_WATER_LINE:0,MAX_BUFFER_LOW_WATER_LINE:30,EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE:16,BUFFER_LOW_WATER_LINE_RATE:1,BUFFER_HIGH_WATER_LINE:30},zge=function(e){for(var t=new Uint8Array(new ArrayBuffer(e.length)),n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t.buffer},Uj=function(e){return e.on=e.addEventListener,e.off=e.removeEventListener,e},Hge=function(e){try{return URL.createObjectURL(new Blob([e],{type:"application/javascript"}))}catch{var t=new BlobBuilder;return t.append(e),URL.createObjectURL(t.getBlob())}},$j=function(e){return function(){var t=Hge(e),n=Uj(new Worker(t));n.objURL=t;var i=n.terminate;return n.on=n.addEventListener,n.off=n.removeEventListener,n.terminate=function(){return URL.revokeObjectURL(t),i.call(this)},n}},jj=function(e){return"var browserWorkerPolyFill = "+Uj.toString()+`;
browserWorkerPolyFill(self);
`+e},zj=function(e){return e.toString().replace(/^function.+?{/,"").slice(0,-1)},Vge=jj(zj(function(){var r=function(){this.init=function(){var O={};this.on=function(z,j){O[z]||(O[z]=[]),O[z]=O[z].concat(j)},this.off=function(z,j){var W;return O[z]?(W=O[z].indexOf(j),O[z]=O[z].slice(),O[z].splice(W,1),W>-1):!1},this.trigger=function(z){var j,W,Z,te;if(j=O[z],!!j)if(arguments.length===2)for(Z=j.length,W=0;W<Z;++W)j[W].call(this,arguments[1]);else{for(te=[],W=arguments.length,W=1;W<arguments.length;++W)te.push(arguments[W]);for(Z=j.length,W=0;W<Z;++W)j[W].apply(this,te)}},this.dispose=function(){O={}}}};r.prototype.pipe=function(oe){return this.on("data",function(O){oe.push(O)}),this.on("done",function(O){oe.flush(O)}),this.on("partialdone",function(O){oe.partialFlush(O)}),this.on("endedtimeline",function(O){oe.endTimeline(O)}),this.on("reset",function(O){oe.reset(O)}),oe},r.prototype.push=function(oe){this.trigger("data",oe)},r.prototype.flush=function(oe){this.trigger("done",oe)},r.prototype.partialFlush=function(oe){this.trigger("partialdone",oe)},r.prototype.endTimeline=function(oe){this.trigger("endedtimeline",oe)},r.prototype.reset=function(oe){this.trigger("reset",oe)};var e=r,t=Math.pow(2,32),n=function(O){var z=new DataView(O.buffer,O.byteOffset,O.byteLength),j;return z.getBigUint64?(j=z.getBigUint64(0),j<Number.MAX_SAFE_INTEGER?Number(j):j):z.getUint32(0)*t+z.getUint32(4)},i={getUint64:n,MAX_UINT32:t},s=i.MAX_UINT32,a,o,l,u,c,h,m,g,y,v,x,w,E,D,I,A,L,N,U,B,k,H,q,V,Q,ie,le,he,ae,ne,ue,ee,pe,me,xe,Be;(function(){var oe;if(q={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],mvex:[],mvhd:[],pasp:[],sdtp:[],smhd:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],styp:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[]},!(typeof Uint8Array>"u")){for(oe in q)q.hasOwnProperty(oe)&&(q[oe]=[oe.charCodeAt(0),oe.charCodeAt(1),oe.charCodeAt(2),oe.charCodeAt(3)]);V=new Uint8Array([105,115,111,109]),ie=new Uint8Array([97,118,99,49]),Q=new Uint8Array([0,0,0,1]),le=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),he=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]),ae={video:le,audio:he},ee=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),ue=new Uint8Array([0,0,0,0,0,0,0,0]),pe=new Uint8Array([0,0,0,0,0,0,0,0]),me=pe,xe=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),Be=pe,ne=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0])}})(),a=function(O){var z=[],j=0,W,Z,te;for(W=1;W<arguments.length;W++)z.push(arguments[W]);for(W=z.length;W--;)j+=z[W].byteLength;for(Z=new Uint8Array(j+8),te=new DataView(Z.buffer,Z.byteOffset,Z.byteLength),te.setUint32(0,Z.byteLength),Z.set(O,4),W=0,j=8;W<z.length;W++)Z.set(z[W],j),j+=z[W].byteLength;return Z},o=function(){return a(q.dinf,a(q.dref,ee))},l=function(O){return a(q.esds,new Uint8Array([0,0,0,0,3,25,0,0,0,4,17,64,21,0,6,0,0,0,218,192,0,0,218,192,5,2,O.audioobjecttype<<3|O.samplingfrequencyindex>>>1,O.samplingfrequencyindex<<7|O.channelcount<<3,6,1,2]))},u=function(){return a(q.ftyp,V,Q,V,ie)},A=function(O){return a(q.hdlr,ae[O])},c=function(O){return a(q.mdat,O)},I=function(O){var z=new Uint8Array([0,0,0,0,0,0,0,2,0,0,0,3,0,1,95,144,O.duration>>>24&255,O.duration>>>16&255,O.duration>>>8&255,O.duration&255,85,196,0,0]);return O.samplerate&&(z[12]=O.samplerate>>>24&255,z[13]=O.samplerate>>>16&255,z[14]=O.samplerate>>>8&255,z[15]=O.samplerate&255),a(q.mdhd,z)},D=function(O){return a(q.mdia,I(O),A(O.type),m(O))},h=function(O){return a(q.mfhd,new Uint8Array([0,0,0,0,(O&4278190080)>>24,(O&16711680)>>16,(O&65280)>>8,O&255]))},m=function(O){return a(q.minf,O.type==="video"?a(q.vmhd,ne):a(q.smhd,ue),o(),N(O))},g=function(O,z){for(var j=[],W=z.length;W--;)j[W]=B(z[W]);return a.apply(null,[q.moof,h(O)].concat(j))},y=function(O){for(var z=O.length,j=[];z--;)j[z]=w(O[z]);return a.apply(null,[q.moov,x(4294967295)].concat(j).concat(v(O)))},v=function(O){for(var z=O.length,j=[];z--;)j[z]=k(O[z]);return a.apply(null,[q.mvex].concat(j))},x=function(O){var z=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,2,0,1,95,144,(O&4278190080)>>24,(O&16711680)>>16,(O&65280)>>8,O&255,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return a(q.mvhd,z)},L=function(O){var z=O.samples||[],j=new Uint8Array(4+z.length),W,Z;for(Z=0;Z<z.length;Z++)W=z[Z].flags,j[Z+4]=W.dependsOn<<4|W.isDependedOn<<2|W.hasRedundancy;return a(q.sdtp,j)},N=function(O){return a(q.stbl,U(O),a(q.stts,Be),a(q.stsc,me),a(q.stsz,xe),a(q.stco,pe))},(function(){var oe,O;U=function(j){return a(q.stsd,new Uint8Array([0,0,0,0,0,0,0,1]),j.type==="video"?oe(j):O(j))},oe=function(j){var W=j.sps||[],Z=j.pps||[],te=[],ge=[],_e,De;for(_e=0;_e<W.length;_e++)te.push((W[_e].byteLength&65280)>>>8),te.push(W[_e].byteLength&255),te=te.concat(Array.prototype.slice.call(W[_e]));for(_e=0;_e<Z.length;_e++)ge.push((Z[_e].byteLength&65280)>>>8),ge.push(Z[_e].byteLength&255),ge=ge.concat(Array.prototype.slice.call(Z[_e]));if(De=[q.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,(j.width&65280)>>8,j.width&255,(j.height&65280)>>8,j.height&255,0,72,0,0,0,72,0,0,0,0,0,0,0,1,19,118,105,100,101,111,106,115,45,99,111,110,116,114,105,98,45,104,108,115,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),a(q.avcC,new Uint8Array([1,j.profileIdc,j.profileCompatibility,j.levelIdc,255].concat([W.length],te,[Z.length],ge))),a(q.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192]))],j.sarRatio){var we=j.sarRatio[0],Re=j.sarRatio[1];De.push(a(q.pasp,new Uint8Array([(we&4278190080)>>24,(we&16711680)>>16,(we&65280)>>8,we&255,(Re&4278190080)>>24,(Re&16711680)>>16,(Re&65280)>>8,Re&255])))}return a.apply(null,De)},O=function(j){return a(q.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,(j.channelcount&65280)>>8,j.channelcount&255,(j.samplesize&65280)>>8,j.samplesize&255,0,0,0,0,(j.samplerate&65280)>>8,j.samplerate&255,0,0]),l(j))}})(),E=function(O){var z=new Uint8Array([0,0,0,7,0,0,0,0,0,0,0,0,(O.id&4278190080)>>24,(O.id&16711680)>>16,(O.id&65280)>>8,O.id&255,0,0,0,0,(O.duration&4278190080)>>24,(O.duration&16711680)>>16,(O.duration&65280)>>8,O.duration&255,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,(O.width&65280)>>8,O.width&255,0,0,(O.height&65280)>>8,O.height&255,0,0]);return a(q.tkhd,z)},B=function(O){var z,j,W,Z,te,ge,_e;return z=a(q.tfhd,new Uint8Array([0,0,0,58,(O.id&4278190080)>>24,(O.id&16711680)>>16,(O.id&65280)>>8,O.id&255,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0])),ge=Math.floor(O.baseMediaDecodeTime/s),_e=Math.floor(O.baseMediaDecodeTime%s),j=a(q.tfdt,new Uint8Array([1,0,0,0,ge>>>24&255,ge>>>16&255,ge>>>8&255,ge&255,_e>>>24&255,_e>>>16&255,_e>>>8&255,_e&255])),te=92,O.type==="audio"?(W=H(O,te),a(q.traf,z,j,W)):(Z=L(O),W=H(O,Z.length+te),a(q.traf,z,j,W,Z))},w=function(O){return O.duration=O.duration||4294967295,a(q.trak,E(O),D(O))},k=function(O){var z=new Uint8Array([0,0,0,0,(O.id&4278190080)>>24,(O.id&16711680)>>16,(O.id&65280)>>8,O.id&255,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]);return O.type!=="video"&&(z[z.length-1]=0),a(q.trex,z)},(function(){var oe,O,z;z=function(W,Z){var te=0,ge=0,_e=0,De=0;return W.length&&(W[0].duration!==void 0&&(te=1),W[0].size!==void 0&&(ge=2),W[0].flags!==void 0&&(_e=4),W[0].compositionTimeOffset!==void 0&&(De=8)),[0,0,te|ge|_e|De,1,(W.length&4278190080)>>>24,(W.length&16711680)>>>16,(W.length&65280)>>>8,W.length&255,(Z&4278190080)>>>24,(Z&16711680)>>>16,(Z&65280)>>>8,Z&255]},O=function(W,Z){var te,ge,_e,De,we,Re;for(De=W.samples||[],Z+=20+16*De.length,_e=z(De,Z),ge=new Uint8Array(_e.length+De.length*16),ge.set(_e),te=_e.length,Re=0;Re<De.length;Re++)we=De[Re],ge[te++]=(we.duration&4278190080)>>>24,ge[te++]=(we.duration&16711680)>>>16,ge[te++]=(we.duration&65280)>>>8,ge[te++]=we.duration&255,ge[te++]=(we.size&4278190080)>>>24,ge[te++]=(we.size&16711680)>>>16,ge[te++]=(we.size&65280)>>>8,ge[te++]=we.size&255,ge[te++]=we.flags.isLeading<<2|we.flags.dependsOn,ge[te++]=we.flags.isDependedOn<<6|we.flags.hasRedundancy<<4|we.flags.paddingValue<<1|we.flags.isNonSyncSample,ge[te++]=we.flags.degradationPriority&61440,ge[te++]=we.flags.degradationPriority&15,ge[te++]=(we.compositionTimeOffset&4278190080)>>>24,ge[te++]=(we.compositionTimeOffset&16711680)>>>16,ge[te++]=(we.compositionTimeOffset&65280)>>>8,ge[te++]=we.compositionTimeOffset&255;return a(q.trun,ge)},oe=function(W,Z){var te,ge,_e,De,we,Re;for(De=W.samples||[],Z+=20+8*De.length,_e=z(De,Z),te=new Uint8Array(_e.length+De.length*8),te.set(_e),ge=_e.length,Re=0;Re<De.length;Re++)we=De[Re],te[ge++]=(we.duration&4278190080)>>>24,te[ge++]=(we.duration&16711680)>>>16,te[ge++]=(we.duration&65280)>>>8,te[ge++]=we.duration&255,te[ge++]=(we.size&4278190080)>>>24,te[ge++]=(we.size&16711680)>>>16,te[ge++]=(we.size&65280)>>>8,te[ge++]=we.size&255;return a(q.trun,te)},H=function(W,Z){return W.type==="audio"?oe(W,Z):O(W,Z)}})();var Oe={ftyp:u,mdat:c,moof:g,moov:y,initSegment:function(O){var z=u(),j=y(O),W;return W=new Uint8Array(z.byteLength+j.byteLength),W.set(z),W.set(j,z.byteLength),W}},dt=function(O){var z,j,W=[],Z=[];for(Z.byteLength=0,Z.nalCount=0,Z.duration=0,W.byteLength=0,z=0;z<O.length;z++)j=O[z],j.nalUnitType==="access_unit_delimiter_rbsp"?(W.length&&(W.duration=j.dts-W.dts,Z.byteLength+=W.byteLength,Z.nalCount+=W.length,Z.duration+=W.duration,Z.push(W)),W=[j],W.byteLength=j.data.byteLength,W.pts=j.pts,W.dts=j.dts):(j.nalUnitType==="slice_layer_without_partitioning_rbsp_idr"&&(W.keyFrame=!0),W.duration=j.dts-W.dts,W.byteLength+=j.data.byteLength,W.push(j));return Z.length&&(!W.duration||W.duration<=0)&&(W.duration=Z[Z.length-1].duration),Z.byteLength+=W.byteLength,Z.nalCount+=W.length,Z.duration+=W.duration,Z.push(W),Z},Ke=function(O){var z,j,W=[],Z=[];for(W.byteLength=0,W.nalCount=0,W.duration=0,W.pts=O[0].pts,W.dts=O[0].dts,Z.byteLength=0,Z.nalCount=0,Z.duration=0,Z.pts=O[0].pts,Z.dts=O[0].dts,z=0;z<O.length;z++)j=O[z],j.keyFrame?(W.length&&(Z.push(W),Z.byteLength+=W.byteLength,Z.nalCount+=W.nalCount,Z.duration+=W.duration),W=[j],W.nalCount=j.length,W.byteLength=j.byteLength,W.pts=j.pts,W.dts=j.dts,W.duration=j.duration):(W.duration+=j.duration,W.nalCount+=j.length,W.byteLength+=j.byteLength,W.push(j));return Z.length&&W.duration<=0&&(W.duration=Z[Z.length-1].duration),Z.byteLength+=W.byteLength,Z.nalCount+=W.nalCount,Z.duration+=W.duration,Z.push(W),Z},_t=function(O){var z;return!O[0][0].keyFrame&&O.length>1&&(z=O.shift(),O.byteLength-=z.byteLength,O.nalCount-=z.nalCount,O[0][0].dts=z.dts,O[0][0].pts=z.pts,O[0][0].duration+=z.duration),O},Ze=function(){return{size:0,flags:{isLeading:0,dependsOn:1,isDependedOn:0,hasRedundancy:0,degradationPriority:0,isNonSyncSample:1}}},Ot=function(O,z){var j=Ze();return j.dataOffset=z,j.compositionTimeOffset=O.pts-O.dts,j.duration=O.duration,j.size=4*O.length,j.size+=O.byteLength,O.keyFrame&&(j.flags.dependsOn=2,j.flags.isNonSyncSample=0),j},Nt=function(O,z){var j,W,Z,te,ge,_e=z||0,De=[];for(j=0;j<O.length;j++)for(te=O[j],W=0;W<te.length;W++)ge=te[W],Z=Ot(ge,_e),_e+=Z.size,De.push(Z);return De},qe=function(O){var z,j,W,Z,te,ge,_e=0,De=O.byteLength,we=O.nalCount,Re=De+4*we,nt=new Uint8Array(Re),Pt=new DataView(nt.buffer);for(z=0;z<O.length;z++)for(Z=O[z],j=0;j<Z.length;j++)for(te=Z[j],W=0;W<te.length;W++)ge=te[W],Pt.setUint32(_e,ge.data.byteLength),_e+=4,nt.set(ge.data,_e),_e+=ge.data.byteLength;return nt},Ue=function(O,z){var j,W=z||0,Z=[];return j=Ot(O,W),Z.push(j),Z},Pe=function(O){var z,j,W=0,Z=O.byteLength,te=O.length,ge=Z+4*te,_e=new Uint8Array(ge),De=new DataView(_e.buffer);for(z=0;z<O.length;z++)j=O[z],De.setUint32(W,j.data.byteLength),W+=4,_e.set(j.data,W),W+=j.data.byteLength;return _e},$e={groupNalsIntoFrames:dt,groupFramesIntoGops:Ke,extendFirstKeyFrame:_t,generateSampleTable:Nt,concatenateNalData:qe,generateSampleTableForFrame:Ue,concatenateNalDataForFrame:Pe},rt=[33,16,5,32,164,27],lt=[33,65,108,84,1,2,4,8,168,2,4,8,17,191,252],ht=function(O){for(var z=[];O--;)z.push(0);return z},ut=function(O){return Object.keys(O).reduce(function(z,j){return z[j]=new Uint8Array(O[j].reduce(function(W,Z){return W.concat(Z)},[])),z},{})},St,ot=function(){if(!St){var O={96e3:[rt,[227,64],ht(154),[56]],88200:[rt,[231],ht(170),[56]],64e3:[rt,[248,192],ht(240),[56]],48e3:[rt,[255,192],ht(268),[55,148,128],ht(54),[112]],44100:[rt,[255,192],ht(268),[55,163,128],ht(84),[112]],32e3:[rt,[255,192],ht(268),[55,234],ht(226),[112]],24e3:[rt,[255,192],ht(268),[55,255,128],ht(268),[111,112],ht(126),[224]],16e3:[rt,[255,192],ht(268),[55,255,128],ht(268),[111,255],ht(269),[223,108],ht(195),[1,192]],12e3:[lt,ht(268),[3,127,248],ht(268),[6,255,240],ht(268),[13,255,224],ht(268),[27,253,128],ht(259),[56]],11025:[lt,ht(268),[3,127,248],ht(268),[6,255,240],ht(268),[13,255,224],ht(268),[27,255,192],ht(268),[55,175,128],ht(108),[112]],8e3:[lt,ht(268),[3,121,16],ht(47),[7]]};St=ut(O)}return St},yr=9e4,pr,jr,ur,Wt,mr,Tr,Nr;pr=function(O){return O*yr},jr=function(O,z){return O*z},ur=function(O){return O/yr},Wt=function(O,z){return O/z},mr=function(O,z){return pr(Wt(O,z))},Tr=function(O,z){return jr(ur(O),z)},Nr=function(O,z,j){return ur(j?O:O-z)};var Tt={ONE_SECOND_IN_TS:yr,secondsToVideoTs:pr,secondsToAudioTs:jr,videoTsToSeconds:ur,audioTsToSeconds:Wt,audioTsToVideoTs:mr,videoTsToAudioTs:Tr,metadataTsToSeconds:Nr},Ht=function(O){var z,j,W=0;for(z=0;z<O.length;z++)j=O[z],W+=j.data.byteLength;return W},An=function(O,z,j,W){var Z,te=0,ge=0,_e=0,De=0,we,Re,nt;if(z.length&&(Z=Tt.audioTsToVideoTs(O.baseMediaDecodeTime,O.samplerate),te=Math.ceil(Tt.ONE_SECOND_IN_TS/(O.samplerate/1024)),j&&W&&(ge=Z-Math.max(j,W),_e=Math.floor(ge/te),De=_e*te),!(_e<1||De>Tt.ONE_SECOND_IN_TS/2))){for(we=ot()[O.samplerate],we||(we=z[0].data),Re=0;Re<_e;Re++)nt=z[0],z.splice(0,0,{data:we,dts:nt.dts-te,pts:nt.pts-te});return O.baseMediaDecodeTime-=Math.floor(Tt.videoTsToAudioTs(De,O.samplerate)),De}},Vt=function(O,z,j){return z.minSegmentDts>=j?O:(z.minSegmentDts=1/0,O.filter(function(W){return W.dts>=j?(z.minSegmentDts=Math.min(z.minSegmentDts,W.dts),z.minSegmentPts=z.minSegmentDts,!0):!1}))},Cr=function(O){var z,j,W=[];for(z=0;z<O.length;z++)j=O[z],W.push({size:j.data.byteLength,duration:1024});return W},Ur=function(O){var z,j,W=0,Z=new Uint8Array(Ht(O));for(z=0;z<O.length;z++)j=O[z],Z.set(j.data,W),W+=j.data.byteLength;return Z},qr={prefixWithSilence:An,trimAdtsFramesByEarliestDts:Vt,generateSampleTable:Cr,concatenateFrameData:Ur},En=Tt.ONE_SECOND_IN_TS,Dn=function(O,z){typeof z.pts=="number"&&(O.timelineStartInfo.pts===void 0&&(O.timelineStartInfo.pts=z.pts),O.minSegmentPts===void 0?O.minSegmentPts=z.pts:O.minSegmentPts=Math.min(O.minSegmentPts,z.pts),O.maxSegmentPts===void 0?O.maxSegmentPts=z.pts:O.maxSegmentPts=Math.max(O.maxSegmentPts,z.pts)),typeof z.dts=="number"&&(O.timelineStartInfo.dts===void 0&&(O.timelineStartInfo.dts=z.dts),O.minSegmentDts===void 0?O.minSegmentDts=z.dts:O.minSegmentDts=Math.min(O.minSegmentDts,z.dts),O.maxSegmentDts===void 0?O.maxSegmentDts=z.dts:O.maxSegmentDts=Math.max(O.maxSegmentDts,z.dts))},In=function(O){delete O.minSegmentDts,delete O.maxSegmentDts,delete O.minSegmentPts,delete O.maxSegmentPts},Mr=function(O,z){var j,W,Z=O.minSegmentDts;return z||(Z-=O.timelineStartInfo.dts),j=O.timelineStartInfo.baseMediaDecodeTime,j+=Z,j=Math.max(0,j),O.type==="audio"&&(W=O.samplerate/En,j*=W,j=Math.floor(j)),j},se={clearDtsInfo:In,calculateTrackBaseMediaDecodeTime:Mr,collectDtsInfo:Dn},fe=4,Te=128,je=function(O){for(var z=0,j={payloadType:-1,payloadSize:0},W=0,Z=0;z<O.byteLength&&O[z]!==Te;){for(;O[z]===255;)W+=255,z++;for(W+=O[z++];O[z]===255;)Z+=255,z++;if(Z+=O[z++],!j.payload&&W===fe){var te=String.fromCharCode(O[z+3],O[z+4],O[z+5],O[z+6]);if(te==="GA94"){j.payloadType=W,j.payloadSize=Z,j.payload=O.subarray(z,z+Z);break}else j.payload=void 0}z+=Z,W=0,Z=0}return j},pt=function(O){return O.payload[0]!==181||(O.payload[1]<<8|O.payload[2])!==49||String.fromCharCode(O.payload[3],O.payload[4],O.payload[5],O.payload[6])!=="GA94"||O.payload[7]!==3?null:O.payload.subarray(8,O.payload.length-1)},Gt=function(O,z){var j=[],W,Z,te,ge;if(!(z[0]&64))return j;for(Z=z[0]&31,W=0;W<Z;W++)te=W*3,ge={type:z[te+2]&3,pts:O},z[te+2]&4&&(ge.ccData=z[te+3]<<8|z[te+4],j.push(ge));return j},be=function(O){for(var z=O.byteLength,j=[],W=1,Z,te;W<z-2;)O[W]===0&&O[W+1]===0&&O[W+2]===3?(j.push(W+2),W+=2):W++;if(j.length===0)return O;Z=z-j.length,te=new Uint8Array(Z);var ge=0;for(W=0;W<Z;ge++,W++)ge===j[0]&&(ge++,j.shift()),te[W]=O[ge];return te},ye={parseSei:je,parseUserData:pt,parseCaptionPackets:Gt,discardEmulationPreventionBytes:be,USER_DATA_REGISTERED_ITU_T_T35:fe},Ae=function oe(O){O=O||{},oe.prototype.init.call(this),this.parse708captions_=typeof O.parse708captions=="boolean"?O.parse708captions:!0,this.captionPackets_=[],this.ccStreams_=[new fr(0,0),new fr(0,1),new fr(1,0),new fr(1,1)],this.parse708captions_&&(this.cc708Stream_=new gt({captionServices:O.captionServices})),this.reset(),this.ccStreams_.forEach(function(z){z.on("data",this.trigger.bind(this,"data")),z.on("partialdone",this.trigger.bind(this,"partialdone")),z.on("done",this.trigger.bind(this,"done"))},this),this.parse708captions_&&(this.cc708Stream_.on("data",this.trigger.bind(this,"data")),this.cc708Stream_.on("partialdone",this.trigger.bind(this,"partialdone")),this.cc708Stream_.on("done",this.trigger.bind(this,"done")))};Ae.prototype=new e,Ae.prototype.push=function(oe){var O,z,j;if(oe.nalUnitType==="sei_rbsp"&&(O=ye.parseSei(oe.escapedRBSP),!!O.payload&&O.payloadType===ye.USER_DATA_REGISTERED_ITU_T_T35&&(z=ye.parseUserData(O),!!z))){if(oe.dts<this.latestDts_){this.ignoreNextEqualDts_=!0;return}else if(oe.dts===this.latestDts_&&this.ignoreNextEqualDts_){this.numSameDts_--,this.numSameDts_||(this.ignoreNextEqualDts_=!1);return}j=ye.parseCaptionPackets(oe.pts,z),this.captionPackets_=this.captionPackets_.concat(j),this.latestDts_!==oe.dts&&(this.numSameDts_=0),this.numSameDts_++,this.latestDts_=oe.dts}},Ae.prototype.flushCCStreams=function(oe){this.ccStreams_.forEach(function(O){return oe==="flush"?O.flush():O.partialFlush()},this)},Ae.prototype.flushStream=function(oe){if(!this.captionPackets_.length){this.flushCCStreams(oe);return}this.captionPackets_.forEach(function(O,z){O.presortIndex=z}),this.captionPackets_.sort(function(O,z){return O.pts===z.pts?O.presortIndex-z.presortIndex:O.pts-z.pts}),this.captionPackets_.forEach(function(O){O.type<2?this.dispatchCea608Packet(O):this.dispatchCea708Packet(O)},this),this.captionPackets_.length=0,this.flushCCStreams(oe)},Ae.prototype.flush=function(){return this.flushStream("flush")},Ae.prototype.partialFlush=function(){return this.flushStream("partialFlush")},Ae.prototype.reset=function(){this.latestDts_=null,this.ignoreNextEqualDts_=!1,this.numSameDts_=0,this.activeCea608Channel_=[null,null],this.ccStreams_.forEach(function(oe){oe.reset()})},Ae.prototype.dispatchCea608Packet=function(oe){this.setsTextOrXDSActive(oe)?this.activeCea608Channel_[oe.type]=null:this.setsChannel1Active(oe)?this.activeCea608Channel_[oe.type]=0:this.setsChannel2Active(oe)&&(this.activeCea608Channel_[oe.type]=1),this.activeCea608Channel_[oe.type]!==null&&this.ccStreams_[(oe.type<<1)+this.activeCea608Channel_[oe.type]].push(oe)},Ae.prototype.setsChannel1Active=function(oe){return(oe.ccData&30720)===4096},Ae.prototype.setsChannel2Active=function(oe){return(oe.ccData&30720)===6144},Ae.prototype.setsTextOrXDSActive=function(oe){return(oe.ccData&28928)===256||(oe.ccData&30974)===4138||(oe.ccData&30974)===6186},Ae.prototype.dispatchCea708Packet=function(oe){this.parse708captions_&&this.cc708Stream_.push(oe)};var Ge={127:9834,4128:32,4129:160,4133:8230,4138:352,4140:338,4144:9608,4145:8216,4146:8217,4147:8220,4148:8221,4149:8226,4153:8482,4154:353,4156:339,4157:8480,4159:376,4214:8539,4215:8540,4216:8541,4217:8542,4218:9168,4219:9124,4220:9123,4221:9135,4222:9126,4223:9121,4256:12600},Xe=function(O){var z=Ge[O]||O;return O&4096&&O===z?"":String.fromCharCode(z)},yt=function(O){return 32<=O&&O<=127||160<=O&&O<=255},At=function(O){this.windowNum=O,this.reset()};At.prototype.reset=function(){this.clearText(),this.pendingNewLine=!1,this.winAttr={},this.penAttr={},this.penLoc={},this.penColor={},this.visible=0,this.rowLock=0,this.columnLock=0,this.priority=0,this.relativePositioning=0,this.anchorVertical=0,this.anchorHorizontal=0,this.anchorPoint=0,this.rowCount=1,this.virtualRowCount=this.rowCount+1,this.columnCount=41,this.windowStyle=0,this.penStyle=0},At.prototype.getText=function(){return this.rows.join(`
`)},At.prototype.clearText=function(){this.rows=[""],this.rowIdx=0},At.prototype.newLine=function(oe){for(this.rows.length>=this.virtualRowCount&&typeof this.beforeRowOverflow=="function"&&this.beforeRowOverflow(oe),this.rows.length>0&&(this.rows.push(""),this.rowIdx++);this.rows.length>this.virtualRowCount;)this.rows.shift(),this.rowIdx--},At.prototype.isEmpty=function(){return this.rows.length===0?!0:this.rows.length===1?this.rows[0]==="":!1},At.prototype.addText=function(oe){this.rows[this.rowIdx]+=oe},At.prototype.backspace=function(){if(!this.isEmpty()){var oe=this.rows[this.rowIdx];this.rows[this.rowIdx]=oe.substr(0,oe.length-1)}};var st=function(O,z,j){this.serviceNum=O,this.text="",this.currentWindow=new At(-1),this.windows=[],this.stream=j,typeof z=="string"&&this.createTextDecoder(z)};st.prototype.init=function(oe,O){this.startPts=oe;for(var z=0;z<8;z++)this.windows[z]=new At(z),typeof O=="function"&&(this.windows[z].beforeRowOverflow=O)},st.prototype.setCurrentWindow=function(oe){this.currentWindow=this.windows[oe]},st.prototype.createTextDecoder=function(oe){if(typeof TextDecoder>"u")this.stream.trigger("log",{level:"warn",message:"The `encoding` option is unsupported without TextDecoder support"});else try{this.textDecoder_=new TextDecoder(oe)}catch(O){this.stream.trigger("log",{level:"warn",message:"TextDecoder could not be created with "+oe+" encoding. "+O})}};var gt=function oe(O){O=O||{},oe.prototype.init.call(this);var z=this,j=O.captionServices||{},W={},Z;Object.keys(j).forEach(function(te){Z=j[te],/^SERVICE/.test(te)&&(W[te]=Z.encoding)}),this.serviceEncodings=W,this.current708Packet=null,this.services={},this.push=function(te){te.type===3?(z.new708Packet(),z.add708Bytes(te)):(z.current708Packet===null&&z.new708Packet(),z.add708Bytes(te))}};gt.prototype=new e,gt.prototype.new708Packet=function(){this.current708Packet!==null&&this.push708Packet(),this.current708Packet={data:[],ptsVals:[]}},gt.prototype.add708Bytes=function(oe){var O=oe.ccData,z=O>>>8,j=O&255;this.current708Packet.ptsVals.push(oe.pts),this.current708Packet.data.push(z),this.current708Packet.data.push(j)},gt.prototype.push708Packet=function(){var oe=this.current708Packet,O=oe.data,z=null,j=null,W=0,Z=O[W++];for(oe.seq=Z>>6,oe.sizeCode=Z&63;W<O.length;W++)Z=O[W++],z=Z>>5,j=Z&31,z===7&&j>0&&(Z=O[W++],z=Z),this.pushServiceBlock(z,W,j),j>0&&(W+=j-1)},gt.prototype.pushServiceBlock=function(oe,O,z){var j,W=O,Z=this.current708Packet.data,te=this.services[oe];for(te||(te=this.initService(oe,W));W<O+z&&W<Z.length;W++)j=Z[W],yt(j)?W=this.handleText(W,te):j===24?W=this.multiByteCharacter(W,te):j===16?W=this.extendedCommands(W,te):128<=j&&j<=135?W=this.setCurrentWindow(W,te):152<=j&&j<=159?W=this.defineWindow(W,te):j===136?W=this.clearWindows(W,te):j===140?W=this.deleteWindows(W,te):j===137?W=this.displayWindows(W,te):j===138?W=this.hideWindows(W,te):j===139?W=this.toggleWindows(W,te):j===151?W=this.setWindowAttributes(W,te):j===144?W=this.setPenAttributes(W,te):j===145?W=this.setPenColor(W,te):j===146?W=this.setPenLocation(W,te):j===143?te=this.reset(W,te):j===8?te.currentWindow.backspace():j===12?te.currentWindow.clearText():j===13?te.currentWindow.pendingNewLine=!0:j===14?te.currentWindow.clearText():j===141&&W++},gt.prototype.extendedCommands=function(oe,O){var z=this.current708Packet.data,j=z[++oe];return yt(j)&&(oe=this.handleText(oe,O,{isExtended:!0})),oe},gt.prototype.getPts=function(oe){return this.current708Packet.ptsVals[Math.floor(oe/2)]},gt.prototype.initService=function(oe,O){var j="SERVICE"+oe,z=this,j,W;return j in this.serviceEncodings&&(W=this.serviceEncodings[j]),this.services[oe]=new st(oe,W,z),this.services[oe].init(this.getPts(O),function(Z){z.flushDisplayed(Z,z.services[oe])}),this.services[oe]},gt.prototype.handleText=function(oe,O,z){var j=z&&z.isExtended,W=z&&z.isMultiByte,Z=this.current708Packet.data,te=j?4096:0,ge=Z[oe],_e=Z[oe+1],De=O.currentWindow,we,Re;return O.textDecoder_&&!j?(W?(Re=[ge,_e],oe++):Re=[ge],we=O.textDecoder_.decode(new Uint8Array(Re))):we=Xe(te|ge),De.pendingNewLine&&!De.isEmpty()&&De.newLine(this.getPts(oe)),De.pendingNewLine=!1,De.addText(we),oe},gt.prototype.multiByteCharacter=function(oe,O){var z=this.current708Packet.data,j=z[oe+1],W=z[oe+2];return yt(j)&&yt(W)&&(oe=this.handleText(++oe,O,{isMultiByte:!0})),oe},gt.prototype.setCurrentWindow=function(oe,O){var z=this.current708Packet.data,j=z[oe],W=j&7;return O.setCurrentWindow(W),oe},gt.prototype.defineWindow=function(oe,O){var z=this.current708Packet.data,j=z[oe],W=j&7;O.setCurrentWindow(W);var Z=O.currentWindow;return j=z[++oe],Z.visible=(j&32)>>5,Z.rowLock=(j&16)>>4,Z.columnLock=(j&8)>>3,Z.priority=j&7,j=z[++oe],Z.relativePositioning=(j&128)>>7,Z.anchorVertical=j&127,j=z[++oe],Z.anchorHorizontal=j,j=z[++oe],Z.anchorPoint=(j&240)>>4,Z.rowCount=j&15,j=z[++oe],Z.columnCount=j&63,j=z[++oe],Z.windowStyle=(j&56)>>3,Z.penStyle=j&7,Z.virtualRowCount=Z.rowCount+1,oe},gt.prototype.setWindowAttributes=function(oe,O){var z=this.current708Packet.data,j=z[oe],W=O.currentWindow.winAttr;return j=z[++oe],W.fillOpacity=(j&192)>>6,W.fillRed=(j&48)>>4,W.fillGreen=(j&12)>>2,W.fillBlue=j&3,j=z[++oe],W.borderType=(j&192)>>6,W.borderRed=(j&48)>>4,W.borderGreen=(j&12)>>2,W.borderBlue=j&3,j=z[++oe],W.borderType+=(j&128)>>5,W.wordWrap=(j&64)>>6,W.printDirection=(j&48)>>4,W.scrollDirection=(j&12)>>2,W.justify=j&3,j=z[++oe],W.effectSpeed=(j&240)>>4,W.effectDirection=(j&12)>>2,W.displayEffect=j&3,oe},gt.prototype.flushDisplayed=function(oe,O){for(var z=[],j=0;j<8;j++)O.windows[j].visible&&!O.windows[j].isEmpty()&&z.push(O.windows[j].getText());O.endPts=oe,O.text=z.join(`

`),this.pushCaption(O),O.startPts=oe},gt.prototype.pushCaption=function(oe){oe.text!==""&&(this.trigger("data",{startPts:oe.startPts,endPts:oe.endPts,text:oe.text,stream:"cc708_"+oe.serviceNum}),oe.text="",oe.startPts=oe.endPts)},gt.prototype.displayWindows=function(oe,O){var z=this.current708Packet.data,j=z[++oe],W=this.getPts(oe);this.flushDisplayed(W,O);for(var Z=0;Z<8;Z++)j&1<<Z&&(O.windows[Z].visible=1);return oe},gt.prototype.hideWindows=function(oe,O){var z=this.current708Packet.data,j=z[++oe],W=this.getPts(oe);this.flushDisplayed(W,O);for(var Z=0;Z<8;Z++)j&1<<Z&&(O.windows[Z].visible=0);return oe},gt.prototype.toggleWindows=function(oe,O){var z=this.current708Packet.data,j=z[++oe],W=this.getPts(oe);this.flushDisplayed(W,O);for(var Z=0;Z<8;Z++)j&1<<Z&&(O.windows[Z].visible^=1);return oe},gt.prototype.clearWindows=function(oe,O){var z=this.current708Packet.data,j=z[++oe],W=this.getPts(oe);this.flushDisplayed(W,O);for(var Z=0;Z<8;Z++)j&1<<Z&&O.windows[Z].clearText();return oe},gt.prototype.deleteWindows=function(oe,O){var z=this.current708Packet.data,j=z[++oe],W=this.getPts(oe);this.flushDisplayed(W,O);for(var Z=0;Z<8;Z++)j&1<<Z&&O.windows[Z].reset();return oe},gt.prototype.setPenAttributes=function(oe,O){var z=this.current708Packet.data,j=z[oe],W=O.currentWindow.penAttr;return j=z[++oe],W.textTag=(j&240)>>4,W.offset=(j&12)>>2,W.penSize=j&3,j=z[++oe],W.italics=(j&128)>>7,W.underline=(j&64)>>6,W.edgeType=(j&56)>>3,W.fontStyle=j&7,oe},gt.prototype.setPenColor=function(oe,O){var z=this.current708Packet.data,j=z[oe],W=O.currentWindow.penColor;return j=z[++oe],W.fgOpacity=(j&192)>>6,W.fgRed=(j&48)>>4,W.fgGreen=(j&12)>>2,W.fgBlue=j&3,j=z[++oe],W.bgOpacity=(j&192)>>6,W.bgRed=(j&48)>>4,W.bgGreen=(j&12)>>2,W.bgBlue=j&3,j=z[++oe],W.edgeRed=(j&48)>>4,W.edgeGreen=(j&12)>>2,W.edgeBlue=j&3,oe},gt.prototype.setPenLocation=function(oe,O){var z=this.current708Packet.data,j=z[oe],W=O.currentWindow.penLoc;return O.currentWindow.pendingNewLine=!0,j=z[++oe],W.row=j&15,j=z[++oe],W.column=j&63,oe},gt.prototype.reset=function(oe,O){var z=this.getPts(oe);return this.flushDisplayed(z,O),this.initService(O.serviceNum,oe)};var jt={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,304:174,305:176,306:189,307:191,308:8482,309:162,310:163,311:9834,312:224,313:160,314:232,315:226,316:234,317:238,318:244,319:251,544:193,545:201,546:211,547:218,548:220,549:252,550:8216,551:161,552:42,553:39,554:8212,555:169,556:8480,557:8226,558:8220,559:8221,560:192,561:194,562:199,563:200,564:202,565:203,566:235,567:206,568:207,569:239,570:212,571:217,572:249,573:219,574:171,575:187,800:195,801:227,802:205,803:204,804:236,805:210,806:242,807:213,808:245,809:123,810:125,811:92,812:94,813:95,814:124,815:126,816:196,817:228,818:214,819:246,820:223,821:165,822:164,823:9474,824:197,825:229,826:216,827:248,828:9484,829:9488,830:9492,831:9496},Kt=function(O){return O===null?"":(O=jt[O]||O,String.fromCharCode(O))},Ft=14,dr=[4352,4384,4608,4640,5376,5408,5632,5664,5888,5920,4096,4864,4896,5120,5152],xt=function(){for(var O=[],z=Ft+1;z--;)O.push("");return O},fr=function oe(O,z){oe.prototype.init.call(this),this.field_=O||0,this.dataChannel_=z||0,this.name_="CC"+((this.field_<<1|this.dataChannel_)+1),this.setConstants(),this.reset(),this.push=function(j){var W,Z,te,ge,_e;if(W=j.ccData&32639,W===this.lastControlCode_){this.lastControlCode_=null;return}if((W&61440)===4096?this.lastControlCode_=W:W!==this.PADDING_&&(this.lastControlCode_=null),te=W>>>8,ge=W&255,W!==this.PADDING_)if(W===this.RESUME_CAPTION_LOADING_)this.mode_="popOn";else if(W===this.END_OF_CAPTION_)this.mode_="popOn",this.clearFormatting(j.pts),this.flushDisplayed(j.pts),Z=this.displayed_,this.displayed_=this.nonDisplayed_,this.nonDisplayed_=Z,this.startPts_=j.pts;else if(W===this.ROLL_UP_2_ROWS_)this.rollUpRows_=2,this.setRollUp(j.pts);else if(W===this.ROLL_UP_3_ROWS_)this.rollUpRows_=3,this.setRollUp(j.pts);else if(W===this.ROLL_UP_4_ROWS_)this.rollUpRows_=4,this.setRollUp(j.pts);else if(W===this.CARRIAGE_RETURN_)this.clearFormatting(j.pts),this.flushDisplayed(j.pts),this.shiftRowsUp_(),this.startPts_=j.pts;else if(W===this.BACKSPACE_)this.mode_==="popOn"?this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,-1):this.displayed_[this.row_]=this.displayed_[this.row_].slice(0,-1);else if(W===this.ERASE_DISPLAYED_MEMORY_)this.flushDisplayed(j.pts),this.displayed_=xt();else if(W===this.ERASE_NON_DISPLAYED_MEMORY_)this.nonDisplayed_=xt();else if(W===this.RESUME_DIRECT_CAPTIONING_)this.mode_!=="paintOn"&&(this.flushDisplayed(j.pts),this.displayed_=xt()),this.mode_="paintOn",this.startPts_=j.pts;else if(this.isSpecialCharacter(te,ge))te=(te&3)<<8,_e=Kt(te|ge),this[this.mode_](j.pts,_e),this.column_++;else if(this.isExtCharacter(te,ge))this.mode_==="popOn"?this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,-1):this.displayed_[this.row_]=this.displayed_[this.row_].slice(0,-1),te=(te&3)<<8,_e=Kt(te|ge),this[this.mode_](j.pts,_e),this.column_++;else if(this.isMidRowCode(te,ge))this.clearFormatting(j.pts),this[this.mode_](j.pts," "),this.column_++,(ge&14)===14&&this.addFormatting(j.pts,["i"]),(ge&1)===1&&this.addFormatting(j.pts,["u"]);else if(this.isOffsetControlCode(te,ge))this.column_+=ge&3;else if(this.isPAC(te,ge)){var De=dr.indexOf(W&7968);this.mode_==="rollUp"&&(De-this.rollUpRows_+1<0&&(De=this.rollUpRows_-1),this.setRollUp(j.pts,De)),De!==this.row_&&(this.clearFormatting(j.pts),this.row_=De),ge&1&&this.formatting_.indexOf("u")===-1&&this.addFormatting(j.pts,["u"]),(W&16)===16&&(this.column_=((W&14)>>1)*4),this.isColorPAC(ge)&&(ge&14)===14&&this.addFormatting(j.pts,["i"])}else this.isNormalChar(te)&&(ge===0&&(ge=null),_e=Kt(te),_e+=Kt(ge),this[this.mode_](j.pts,_e),this.column_+=_e.length)}};fr.prototype=new e,fr.prototype.flushDisplayed=function(oe){var O=this.displayed_.map(function(z,j){try{return z.trim()}catch{return this.trigger("log",{level:"warn",message:"Skipping a malformed 608 caption at index "+j+"."}),""}},this).join(`
`).replace(/^\n+|\n+$/g,"");O.length&&this.trigger("data",{startPts:this.startPts_,endPts:oe,text:O,stream:this.name_})},fr.prototype.reset=function(){this.mode_="popOn",this.topRow_=0,this.startPts_=0,this.displayed_=xt(),this.nonDisplayed_=xt(),this.lastControlCode_=null,this.column_=0,this.row_=Ft,this.rollUpRows_=2,this.formatting_=[]},fr.prototype.setConstants=function(){this.dataChannel_===0?(this.BASE_=16,this.EXT_=17,this.CONTROL_=(20|this.field_)<<8,this.OFFSET_=23):this.dataChannel_===1&&(this.BASE_=24,this.EXT_=25,this.CONTROL_=(28|this.field_)<<8,this.OFFSET_=31),this.PADDING_=0,this.RESUME_CAPTION_LOADING_=this.CONTROL_|32,this.END_OF_CAPTION_=this.CONTROL_|47,this.ROLL_UP_2_ROWS_=this.CONTROL_|37,this.ROLL_UP_3_ROWS_=this.CONTROL_|38,this.ROLL_UP_4_ROWS_=this.CONTROL_|39,this.CARRIAGE_RETURN_=this.CONTROL_|45,this.RESUME_DIRECT_CAPTIONING_=this.CONTROL_|41,this.BACKSPACE_=this.CONTROL_|33,this.ERASE_DISPLAYED_MEMORY_=this.CONTROL_|44,this.ERASE_NON_DISPLAYED_MEMORY_=this.CONTROL_|46},fr.prototype.isSpecialCharacter=function(oe,O){return oe===this.EXT_&&O>=48&&O<=63},fr.prototype.isExtCharacter=function(oe,O){return(oe===this.EXT_+1||oe===this.EXT_+2)&&O>=32&&O<=63},fr.prototype.isMidRowCode=function(oe,O){return oe===this.EXT_&&O>=32&&O<=47},fr.prototype.isOffsetControlCode=function(oe,O){return oe===this.OFFSET_&&O>=33&&O<=35},fr.prototype.isPAC=function(oe,O){return oe>=this.BASE_&&oe<this.BASE_+8&&O>=64&&O<=127},fr.prototype.isColorPAC=function(oe){return oe>=64&&oe<=79||oe>=96&&oe<=127},fr.prototype.isNormalChar=function(oe){return oe>=32&&oe<=127},fr.prototype.setRollUp=function(oe,O){if(this.mode_!=="rollUp"&&(this.row_=Ft,this.mode_="rollUp",this.flushDisplayed(oe),this.nonDisplayed_=xt(),this.displayed_=xt()),O!==void 0&&O!==this.row_)for(var z=0;z<this.rollUpRows_;z++)this.displayed_[O-z]=this.displayed_[this.row_-z],this.displayed_[this.row_-z]="";O===void 0&&(O=this.row_),this.topRow_=O-this.rollUpRows_+1},fr.prototype.addFormatting=function(oe,O){this.formatting_=this.formatting_.concat(O);var z=O.reduce(function(j,W){return j+"<"+W+">"},"");this[this.mode_](oe,z)},fr.prototype.clearFormatting=function(oe){if(this.formatting_.length){var O=this.formatting_.reverse().reduce(function(z,j){return z+"</"+j+">"},"");this.formatting_=[],this[this.mode_](oe,O)}},fr.prototype.popOn=function(oe,O){var z=this.nonDisplayed_[this.row_];z+=O,this.nonDisplayed_[this.row_]=z},fr.prototype.rollUp=function(oe,O){var z=this.displayed_[this.row_];z+=O,this.displayed_[this.row_]=z},fr.prototype.shiftRowsUp_=function(){var oe;for(oe=0;oe<this.topRow_;oe++)this.displayed_[oe]="";for(oe=this.row_+1;oe<Ft+1;oe++)this.displayed_[oe]="";for(oe=this.topRow_;oe<this.row_;oe++)this.displayed_[oe]=this.displayed_[oe+1];this.displayed_[this.row_]=""},fr.prototype.paintOn=function(oe,O){var z=this.displayed_[this.row_];z+=O,this.displayed_[this.row_]=z};var Jr={CaptionStream:Ae,Cea608Stream:fr,Cea708Stream:gt},Pr={H264_STREAM_TYPE:27,ADTS_STREAM_TYPE:15,METADATA_STREAM_TYPE:21},Fr=8589934592,Pn=4294967296,er="shared",bi=function(O,z){var j=1;for(O>z&&(j=-1);Math.abs(z-O)>Pn;)O+=j*Fr;return O},mn=function oe(O){var z,j;oe.prototype.init.call(this),this.type_=O||er,this.push=function(W){this.type_!==er&&W.type!==this.type_||(j===void 0&&(j=W.dts),W.dts=bi(W.dts,j),W.pts=bi(W.pts,j),z=W.dts,this.trigger("data",W))},this.flush=function(){j=z,this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")},this.discontinuity=function(){j=void 0,z=void 0},this.reset=function(){this.discontinuity(),this.trigger("reset")}};mn.prototype=new e;var Ss={TimestampRolloverStream:mn,handleRollover:bi},tn=function(O,z,j){var W,Z="";for(W=z;W<j;W++)Z+="%"+("00"+O[W].toString(16)).slice(-2);return Z},Ts=function(O,z,j){return decodeURIComponent(tn(O,z,j))},di=function(O,z,j){return unescape(tn(O,z,j))},ii=function(O){return O[0]<<21|O[1]<<14|O[2]<<7|O[3]},Dr={TXXX:function(O){var z;if(O.data[0]===3){for(z=1;z<O.data.length;z++)if(O.data[z]===0){O.description=Ts(O.data,1,z),O.value=Ts(O.data,z+1,O.data.length).replace(/\0*$/,"");break}O.data=O.value}},WXXX:function(O){var z;if(O.data[0]===3){for(z=1;z<O.data.length;z++)if(O.data[z]===0){O.description=Ts(O.data,1,z),O.url=Ts(O.data,z+1,O.data.length);break}}},PRIV:function(O){var z;for(z=0;z<O.data.length;z++)if(O.data[z]===0){O.owner=di(O.data,0,z);break}O.privateData=O.data.subarray(z+1),O.data=O.privateData}},ke;ke=function(O){var z={descriptor:O&&O.descriptor},j=0,W=[],Z=0,te;if(ke.prototype.init.call(this),this.dispatchType=Pr.METADATA_STREAM_TYPE.toString(16),z.descriptor)for(te=0;te<z.descriptor.length;te++)this.dispatchType+=("00"+z.descriptor[te].toString(16)).slice(-2);this.push=function(ge){var _e,De,we,Re,nt,Pt;if(ge.type==="timed-metadata"){if(ge.dataAlignmentIndicator&&(Z=0,W.length=0),W.length===0&&(ge.data.length<10||ge.data[0]!==73||ge.data[1]!==68||ge.data[2]!==51)){this.trigger("log",{level:"warn",message:"Skipping unrecognized metadata packet"});return}if(W.push(ge),Z+=ge.data.byteLength,W.length===1&&(j=ii(ge.data.subarray(6,10)),j+=10),!(Z<j)){for(_e={data:new Uint8Array(j),frames:[],pts:W[0].pts,dts:W[0].dts},nt=0;nt<j;)_e.data.set(W[0].data.subarray(0,j-nt),nt),nt+=W[0].data.byteLength,Z-=W[0].data.byteLength,W.shift();De=10,_e.data[5]&64&&(De+=4,De+=ii(_e.data.subarray(10,14)),j-=ii(_e.data.subarray(16,20)));do{if(we=ii(_e.data.subarray(De+4,De+8)),we<1){this.trigger("log",{level:"warn",message:"Malformed ID3 frame encountered. Skipping metadata parsing."});return}if(Pt=String.fromCharCode(_e.data[De],_e.data[De+1],_e.data[De+2],_e.data[De+3]),Re={id:Pt,data:_e.data.subarray(De+10,De+we+10)},Re.key=Re.id,Dr[Re.id]&&(Dr[Re.id](Re),Re.owner==="com.apple.streaming.transportStreamTimestamp")){var Ut=Re.data,tt=(Ut[3]&1)<<30|Ut[4]<<22|Ut[5]<<14|Ut[6]<<6|Ut[7]>>>2;tt*=4,tt+=Ut[7]&3,Re.timeStamp=tt,_e.pts===void 0&&_e.dts===void 0&&(_e.pts=Re.timeStamp,_e.dts=Re.timeStamp),this.trigger("timestamp",Re)}_e.frames.push(Re),De+=10,De+=we}while(De<j);this.trigger("data",_e)}}}},ke.prototype=new e;var Ne=ke,Qe=Ss.TimestampRolloverStream,et,vt,wt,Mt=188,_r=71;et=function(){var O=new Uint8Array(Mt),z=0;et.prototype.init.call(this),this.push=function(j){var W=0,Z=Mt,te;for(z?(te=new Uint8Array(j.byteLength+z),te.set(O.subarray(0,z)),te.set(j,z),z=0):te=j;Z<te.byteLength;){if(te[W]===_r&&te[Z]===_r){this.trigger("data",te.subarray(W,Z)),W+=Mt,Z+=Mt;continue}W++,Z++}W<te.byteLength&&(O.set(te.subarray(W),0),z=te.byteLength-W)},this.flush=function(){z===Mt&&O[0]===_r&&(this.trigger("data",O),z=0),this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")},this.reset=function(){z=0,this.trigger("reset")}},et.prototype=new e,vt=function(){var O,z,j,W;vt.prototype.init.call(this),W=this,this.packetsWaitingForPmt=[],this.programMapTable=void 0,O=function(te,ge){var _e=0;ge.payloadUnitStartIndicator&&(_e+=te[_e]+1),ge.type==="pat"?z(te.subarray(_e),ge):j(te.subarray(_e),ge)},z=function(te,ge){ge.section_number=te[7],ge.last_section_number=te[8],W.pmtPid=(te[10]&31)<<8|te[11],ge.pmtPid=W.pmtPid},j=function(te,ge){var _e,De,we,Re;if(te[5]&1){for(W.programMapTable={video:null,audio:null,"timed-metadata":{}},_e=(te[1]&15)<<8|te[2],De=3+_e-4,we=(te[10]&15)<<8|te[11],Re=12+we;Re<De;){var nt=te[Re],Pt=(te[Re+1]&31)<<8|te[Re+2];nt===Pr.H264_STREAM_TYPE&&W.programMapTable.video===null?W.programMapTable.video=Pt:nt===Pr.ADTS_STREAM_TYPE&&W.programMapTable.audio===null?W.programMapTable.audio=Pt:nt===Pr.METADATA_STREAM_TYPE&&(W.programMapTable["timed-metadata"][Pt]=nt),Re+=((te[Re+3]&15)<<8|te[Re+4])+5}ge.programMapTable=W.programMapTable}},this.push=function(Z){var te={},ge=4;if(te.payloadUnitStartIndicator=!!(Z[1]&64),te.pid=Z[1]&31,te.pid<<=8,te.pid|=Z[2],(Z[3]&48)>>>4>1&&(ge+=Z[ge]+1),te.pid===0)te.type="pat",O(Z.subarray(ge),te),this.trigger("data",te);else if(te.pid===this.pmtPid)for(te.type="pmt",O(Z.subarray(ge),te),this.trigger("data",te);this.packetsWaitingForPmt.length;)this.processPes_.apply(this,this.packetsWaitingForPmt.shift());else this.programMapTable===void 0?this.packetsWaitingForPmt.push([Z,ge,te]):this.processPes_(Z,ge,te)},this.processPes_=function(Z,te,ge){ge.pid===this.programMapTable.video?ge.streamType=Pr.H264_STREAM_TYPE:ge.pid===this.programMapTable.audio?ge.streamType=Pr.ADTS_STREAM_TYPE:ge.streamType=this.programMapTable["timed-metadata"][ge.pid],ge.type="pes",ge.data=Z.subarray(te),this.trigger("data",ge)}},vt.prototype=new e,vt.STREAM_TYPES={h264:27,adts:15},wt=function(){var O=this,z=!1,j={data:[],size:0},W={data:[],size:0},Z={data:[],size:0},te,ge=function(we,Re){var nt,Pt=we[0]<<16|we[1]<<8|we[2];Re.data=new Uint8Array,Pt===1&&(Re.packetLength=6+(we[4]<<8|we[5]),Re.dataAlignmentIndicator=(we[6]&4)!==0,nt=we[7],nt&192&&(Re.pts=(we[9]&14)<<27|(we[10]&255)<<20|(we[11]&254)<<12|(we[12]&255)<<5|(we[13]&254)>>>3,Re.pts*=4,Re.pts+=(we[13]&6)>>>1,Re.dts=Re.pts,nt&64&&(Re.dts=(we[14]&14)<<27|(we[15]&255)<<20|(we[16]&254)<<12|(we[17]&255)<<5|(we[18]&254)>>>3,Re.dts*=4,Re.dts+=(we[18]&6)>>>1)),Re.data=we.subarray(9+we[8]))},_e=function(we,Re,nt){var Pt=new Uint8Array(we.size),Ut={type:Re},tt=0,sr=0,kn=!1,fi;if(!(!we.data.length||we.size<9)){for(Ut.trackId=we.data[0].pid,tt=0;tt<we.data.length;tt++)fi=we.data[tt],Pt.set(fi.data,sr),sr+=fi.data.byteLength;ge(Pt,Ut),kn=Re==="video"||Ut.packetLength<=we.size,(nt||kn)&&(we.size=0,we.data.length=0),kn&&O.trigger("data",Ut)}};wt.prototype.init.call(this),this.push=function(De){({pat:function(){},pes:function(){var Re,nt;switch(De.streamType){case Pr.H264_STREAM_TYPE:Re=j,nt="video";break;case Pr.ADTS_STREAM_TYPE:Re=W,nt="audio";break;case Pr.METADATA_STREAM_TYPE:Re=Z,nt="timed-metadata";break;default:return}De.payloadUnitStartIndicator&&_e(Re,nt,!0),Re.data.push(De),Re.size+=De.data.byteLength},pmt:function(){var Re={type:"metadata",tracks:[]};te=De.programMapTable,te.video!==null&&Re.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+te.video,codec:"avc",type:"video"}),te.audio!==null&&Re.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+te.audio,codec:"adts",type:"audio"}),z=!0,O.trigger("data",Re)}})[De.type]()},this.reset=function(){j.size=0,j.data.length=0,W.size=0,W.data.length=0,this.trigger("reset")},this.flushStreams_=function(){_e(j,"video"),_e(W,"audio"),_e(Z,"timed-metadata")},this.flush=function(){if(!z&&te){var De={type:"metadata",tracks:[]};te.video!==null&&De.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+te.video,codec:"avc",type:"video"}),te.audio!==null&&De.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+te.audio,codec:"adts",type:"audio"}),O.trigger("data",De)}z=!1,this.flushStreams_(),this.trigger("done")}},wt.prototype=new e;var zr={PAT_PID:0,MP2T_PACKET_LENGTH:Mt,TransportPacketStream:et,TransportParseStream:vt,ElementaryStream:wt,TimestampRolloverStream:Qe,CaptionStream:Jr.CaptionStream,Cea608Stream:Jr.Cea608Stream,Cea708Stream:Jr.Cea708Stream,MetadataStream:Ne};for(var gn in Pr)Pr.hasOwnProperty(gn)&&(zr[gn]=Pr[gn]);var wr=zr,hi=Tt.ONE_SECOND_IN_TS,Br,On=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];Br=function(O){var z,j=0;Br.prototype.init.call(this),this.skipWarn_=function(W,Z){this.trigger("log",{level:"warn",message:"adts skiping bytes "+W+" to "+Z+" in frame "+j+" outside syncword"})},this.push=function(W){var Z=0,te,ge,_e,De,we;if(O||(j=0),W.type==="audio"){z&&z.length?(_e=z,z=new Uint8Array(_e.byteLength+W.data.byteLength),z.set(_e),z.set(W.data,_e.byteLength)):z=W.data;for(var Re;Z+7<z.length;){if(z[Z]!==255||(z[Z+1]&246)!==240){typeof Re!="number"&&(Re=Z),Z++;continue}if(typeof Re=="number"&&(this.skipWarn_(Re,Z),Re=null),ge=(~z[Z+1]&1)*2,te=(z[Z+3]&3)<<11|z[Z+4]<<3|(z[Z+5]&224)>>5,De=((z[Z+6]&3)+1)*1024,we=De*hi/On[(z[Z+2]&60)>>>2],z.byteLength-Z<te)break;this.trigger("data",{pts:W.pts+j*we,dts:W.dts+j*we,sampleCount:De,audioobjecttype:(z[Z+2]>>>6&3)+1,channelcount:(z[Z+2]&1)<<2|(z[Z+3]&192)>>>6,samplerate:On[(z[Z+2]&60)>>>2],samplingfrequencyindex:(z[Z+2]&60)>>>2,samplesize:16,data:z.subarray(Z+7+ge,Z+te)}),j++,Z+=te}typeof Re=="number"&&(this.skipWarn_(Re,Z),Re=null),z=z.subarray(Z)}},this.flush=function(){j=0,this.trigger("done")},this.reset=function(){z=void 0,this.trigger("reset")},this.endTimeline=function(){z=void 0,this.trigger("endedtimeline")}},Br.prototype=new e;var $n=Br,Cs;Cs=function(O){var z=O.byteLength,j=0,W=0;this.length=function(){return 8*z},this.bitsAvailable=function(){return 8*z+W},this.loadWord=function(){var Z=O.byteLength-z,te=new Uint8Array(4),ge=Math.min(4,z);if(ge===0)throw new Error("no bytes available");te.set(O.subarray(Z,Z+ge)),j=new DataView(te.buffer).getUint32(0),W=ge*8,z-=ge},this.skipBits=function(Z){var te;W>Z?(j<<=Z,W-=Z):(Z-=W,te=Math.floor(Z/8),Z-=te*8,z-=te,this.loadWord(),j<<=Z,W-=Z)},this.readBits=function(Z){var te=Math.min(W,Z),ge=j>>>32-te;return W-=te,W>0?j<<=te:z>0&&this.loadWord(),te=Z-te,te>0?ge<<te|this.readBits(te):ge},this.skipLeadingZeros=function(){var Z;for(Z=0;Z<W;++Z)if((j&2147483648>>>Z)!==0)return j<<=Z,W-=Z,Z;return this.loadWord(),Z+this.skipLeadingZeros()},this.skipUnsignedExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.skipExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.readUnsignedExpGolomb=function(){var Z=this.skipLeadingZeros();return this.readBits(Z+1)-1},this.readExpGolomb=function(){var Z=this.readUnsignedExpGolomb();return 1&Z?1+Z>>>1:-1*(Z>>>1)},this.readBoolean=function(){return this.readBits(1)===1},this.readUnsignedByte=function(){return this.readBits(8)},this.loadWord()};var Pc=Cs,ws,Ui,Rn;Ui=function(){var O=0,z,j;Ui.prototype.init.call(this),this.push=function(W){var Z;j?(Z=new Uint8Array(j.byteLength+W.data.byteLength),Z.set(j),Z.set(W.data,j.byteLength),j=Z):j=W.data;for(var te=j.byteLength;O<te-3;O++)if(j[O+2]===1){z=O+5;break}for(;z<te;)switch(j[z]){case 0:if(j[z-1]!==0){z+=2;break}else if(j[z-2]!==0){z++;break}O+3!==z-2&&this.trigger("data",j.subarray(O+3,z-2));do z++;while(j[z]!==1&&z<te);O=z-2,z+=3;break;case 1:if(j[z-1]!==0||j[z-2]!==0){z+=3;break}this.trigger("data",j.subarray(O+3,z-2)),O=z-2,z+=3;break;default:z+=3;break}j=j.subarray(O),z-=O,O=0},this.reset=function(){j=null,O=0,this.trigger("reset")},this.flush=function(){j&&j.byteLength>3&&this.trigger("data",j.subarray(O+3)),j=null,O=0,this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")}},Ui.prototype=new e,Rn={100:!0,110:!0,122:!0,244:!0,44:!0,83:!0,86:!0,118:!0,128:!0,138:!0,139:!0,134:!0},ws=function(){var O=new Ui,z,j,W,Z,te,ge,_e;ws.prototype.init.call(this),z=this,this.push=function(De){De.type==="video"&&(j=De.trackId,W=De.pts,Z=De.dts,O.push(De))},O.on("data",function(De){var we={trackId:j,pts:W,dts:Z,data:De,nalUnitTypeCode:De[0]&31};switch(we.nalUnitTypeCode){case 5:we.nalUnitType="slice_layer_without_partitioning_rbsp_idr";break;case 6:we.nalUnitType="sei_rbsp",we.escapedRBSP=te(De.subarray(1));break;case 7:we.nalUnitType="seq_parameter_set_rbsp",we.escapedRBSP=te(De.subarray(1)),we.config=ge(we.escapedRBSP);break;case 8:we.nalUnitType="pic_parameter_set_rbsp";break;case 9:we.nalUnitType="access_unit_delimiter_rbsp";break}z.trigger("data",we)}),O.on("done",function(){z.trigger("done")}),O.on("partialdone",function(){z.trigger("partialdone")}),O.on("reset",function(){z.trigger("reset")}),O.on("endedtimeline",function(){z.trigger("endedtimeline")}),this.flush=function(){O.flush()},this.partialFlush=function(){O.partialFlush()},this.reset=function(){O.reset()},this.endTimeline=function(){O.endTimeline()},_e=function(we,Re){var nt=8,Pt=8,Ut,tt;for(Ut=0;Ut<we;Ut++)Pt!==0&&(tt=Re.readExpGolomb(),Pt=(nt+tt+256)%256),nt=Pt===0?nt:Pt},te=function(we){for(var Re=we.byteLength,nt=[],Pt=1,Ut,tt;Pt<Re-2;)we[Pt]===0&&we[Pt+1]===0&&we[Pt+2]===3?(nt.push(Pt+2),Pt+=2):Pt++;if(nt.length===0)return we;Ut=Re-nt.length,tt=new Uint8Array(Ut);var sr=0;for(Pt=0;Pt<Ut;sr++,Pt++)sr===nt[0]&&(sr++,nt.shift()),tt[Pt]=we[sr];return tt},ge=function(we){var Re=0,nt=0,Pt=0,Ut=0,tt,sr,kn,fi,Hi,cl,wo,Eo,dl,ya,Ws,vn=[1,1],Ya,Vi;if(tt=new Pc(we),sr=tt.readUnsignedByte(),fi=tt.readUnsignedByte(),kn=tt.readUnsignedByte(),tt.skipUnsignedExpGolomb(),Rn[sr]&&(Hi=tt.readUnsignedExpGolomb(),Hi===3&&tt.skipBits(1),tt.skipUnsignedExpGolomb(),tt.skipUnsignedExpGolomb(),tt.skipBits(1),tt.readBoolean()))for(Ws=Hi!==3?8:12,Vi=0;Vi<Ws;Vi++)tt.readBoolean()&&(Vi<6?_e(16,tt):_e(64,tt));if(tt.skipUnsignedExpGolomb(),cl=tt.readUnsignedExpGolomb(),cl===0)tt.readUnsignedExpGolomb();else if(cl===1)for(tt.skipBits(1),tt.skipExpGolomb(),tt.skipExpGolomb(),wo=tt.readUnsignedExpGolomb(),Vi=0;Vi<wo;Vi++)tt.skipExpGolomb();if(tt.skipUnsignedExpGolomb(),tt.skipBits(1),Eo=tt.readUnsignedExpGolomb(),dl=tt.readUnsignedExpGolomb(),ya=tt.readBits(1),ya===0&&tt.skipBits(1),tt.skipBits(1),tt.readBoolean()&&(Re=tt.readUnsignedExpGolomb(),nt=tt.readUnsignedExpGolomb(),Pt=tt.readUnsignedExpGolomb(),Ut=tt.readUnsignedExpGolomb()),tt.readBoolean()&&tt.readBoolean()){switch(Ya=tt.readUnsignedByte(),Ya){case 1:vn=[1,1];break;case 2:vn=[12,11];break;case 3:vn=[10,11];break;case 4:vn=[16,11];break;case 5:vn=[40,33];break;case 6:vn=[24,11];break;case 7:vn=[20,11];break;case 8:vn=[32,11];break;case 9:vn=[80,33];break;case 10:vn=[18,11];break;case 11:vn=[15,11];break;case 12:vn=[64,33];break;case 13:vn=[160,99];break;case 14:vn=[4,3];break;case 15:vn=[3,2];break;case 16:vn=[2,1];break;case 255:{vn=[tt.readUnsignedByte()<<8|tt.readUnsignedByte(),tt.readUnsignedByte()<<8|tt.readUnsignedByte()];break}}vn&&vn[0]/vn[1]}return{profileIdc:sr,levelIdc:kn,profileCompatibility:fi,width:(Eo+1)*16-Re*2-nt*2,height:(2-ya)*(dl+1)*16-Pt*2-Ut*2,sarRatio:vn}}},ws.prototype=new e;var Fu={H264Stream:ws},Hr=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],as=function(O,z){var j=O[z+6]<<21|O[z+7]<<14|O[z+8]<<7|O[z+9],W=O[z+5],Z=(W&16)>>4;return j=j>=0?j:0,Z?j+20:j+10},da=function oe(O,z){return O.length-z<10||O[z]!==73||O[z+1]!==68||O[z+2]!==51?z:(z+=as(O,z),oe(O,z))},Ai=function(O){var z=da(O,0);return O.length>=z+2&&(O[z]&255)===255&&(O[z+1]&240)===240&&(O[z+1]&22)===16},ja=function(O){return O[0]<<21|O[1]<<14|O[2]<<7|O[3]},Ll=function(O,z,j){var W,Z="";for(W=z;W<j;W++)Z+="%"+("00"+O[W].toString(16)).slice(-2);return Z},_o=function(O,z,j){return unescape(Ll(O,z,j))},Bu=function(O,z){var j=(O[z+5]&224)>>5,W=O[z+4]<<3,Z=O[z+3]&6144;return Z|W|j},Ol=function(O,z){return O[z]===73&&O[z+1]===68&&O[z+2]===51?"timed-metadata":O[z]&!0&&(O[z+1]&240)===240?"audio":null},ha=function(O){for(var z=0;z+5<O.length;){if(O[z]!==255||(O[z+1]&246)!==240){z++;continue}return Hr[(O[z+2]&60)>>>2]}return null},Si=function(O){var z,j,W,Z;z=10,O[5]&64&&(z+=4,z+=ja(O.subarray(10,14)));do{if(j=ja(O.subarray(z+4,z+8)),j<1)return null;if(Z=String.fromCharCode(O[z],O[z+1],O[z+2],O[z+3]),Z==="PRIV"){W=O.subarray(z+10,z+j+10);for(var te=0;te<W.byteLength;te++)if(W[te]===0){var ge=_o(W,0,te);if(ge==="com.apple.streaming.transportStreamTimestamp"){var _e=W.subarray(te+1),De=(_e[3]&1)<<30|_e[4]<<22|_e[5]<<14|_e[6]<<6|_e[7]>>>2;return De*=4,De+=_e[7]&3,De}break}}z+=10,z+=j}while(z<O.byteLength);return null},Di={isLikelyAacData:Ai,parseId3TagSize:as,parseAdtsSize:Bu,parseType:Ol,parseSampleRate:ha,parseAacTimestamp:Si},fa;fa=function(){var O=new Uint8Array,z=0;fa.prototype.init.call(this),this.setTimestamp=function(j){z=j},this.push=function(j){var W=0,Z=0,te,ge,_e,De;for(O.length?(De=O.length,O=new Uint8Array(j.byteLength+De),O.set(O.subarray(0,De)),O.set(j,De)):O=j;O.length-Z>=3;){if(O[Z]===73&&O[Z+1]===68&&O[Z+2]===51){if(O.length-Z<10||(W=Di.parseId3TagSize(O,Z),Z+W>O.length))break;ge={type:"timed-metadata",data:O.subarray(Z,Z+W)},this.trigger("data",ge),Z+=W;continue}else if((O[Z]&255)===255&&(O[Z+1]&240)===240){if(O.length-Z<7||(W=Di.parseAdtsSize(O,Z),Z+W>O.length))break;_e={type:"audio",data:O.subarray(Z,Z+W),pts:z,dts:z},this.trigger("data",_e),Z+=W;continue}Z++}te=O.length-Z,te>0?O=O.subarray(Z):O=new Uint8Array},this.reset=function(){O=new Uint8Array,this.trigger("reset")},this.endTimeline=function(){O=new Uint8Array,this.trigger("endedtimeline")}},fa.prototype=new e;var za=fa,pa=["audioobjecttype","channelcount","samplerate","samplingfrequencyindex","samplesize"],Ml=pa,Rc=["width","height","profileIdc","levelIdc","profileCompatibility","sarRatio"],$i=Rc,Ha=Fu.H264Stream,Fl=Di.isLikelyAacData,Bl=Tt.ONE_SECOND_IN_TS,rl,Va,Es,os,ma=function(O,z){z.stream=O,this.trigger("log",z)},nl=function(O,z){for(var j=Object.keys(z),W=0;W<j.length;W++){var Z=j[W];Z==="headOfPipeline"||!z[Z].on||z[Z].on("log",ma.bind(O,Z))}},Lc=function(O,z){var j;if(O.length!==z.length)return!1;for(j=0;j<O.length;j++)if(O[j]!==z[j])return!1;return!0},Oc=function(O,z,j,W,Z,te){var ge=j-z,_e=W-z,De=Z-j;return{start:{dts:O,pts:O+ge},end:{dts:O+_e,pts:O+De},prependedContentDuration:te,baseMediaDecodeTime:O}};Va=function(O,z){var j=[],W,Z=0,te=0,ge=1/0;z=z||{},W=z.firstSequenceNumber||0,Va.prototype.init.call(this),this.push=function(_e){se.collectDtsInfo(O,_e),O&&Ml.forEach(function(De){O[De]=_e[De]}),j.push(_e)},this.setEarliestDts=function(_e){Z=_e},this.setVideoBaseMediaDecodeTime=function(_e){ge=_e},this.setAudioAppendStart=function(_e){te=_e},this.flush=function(){var _e,De,we,Re,nt,Pt,Ut;if(j.length===0){this.trigger("done","AudioSegmentStream");return}_e=qr.trimAdtsFramesByEarliestDts(j,O,Z),O.baseMediaDecodeTime=se.calculateTrackBaseMediaDecodeTime(O,z.keepOriginalTimestamps),Ut=qr.prefixWithSilence(O,_e,te,ge),O.samples=qr.generateSampleTable(_e),we=Oe.mdat(qr.concatenateFrameData(_e)),j=[],De=Oe.moof(W,[O]),Re=new Uint8Array(De.byteLength+we.byteLength),W++,Re.set(De),Re.set(we,De.byteLength),se.clearDtsInfo(O),nt=Math.ceil(Bl*1024/O.samplerate),_e.length&&(Pt=_e.length*nt,this.trigger("segmentTimingInfo",Oc(Tt.audioTsToVideoTs(O.baseMediaDecodeTime,O.samplerate),_e[0].dts,_e[0].pts,_e[0].dts+Pt,_e[0].pts+Pt,Ut||0)),this.trigger("timingInfo",{start:_e[0].pts,end:_e[0].pts+Pt})),this.trigger("data",{track:O,boxes:Re}),this.trigger("done","AudioSegmentStream")},this.reset=function(){se.clearDtsInfo(O),j=[],this.trigger("reset")}},Va.prototype=new e,rl=function(O,z){var j,W=[],Z=[],te,ge;z=z||{},j=z.firstSequenceNumber||0,rl.prototype.init.call(this),delete O.minPTS,this.gopCache_=[],this.push=function(_e){se.collectDtsInfo(O,_e),_e.nalUnitType==="seq_parameter_set_rbsp"&&!te&&(te=_e.config,O.sps=[_e.data],$i.forEach(function(De){O[De]=te[De]},this)),_e.nalUnitType==="pic_parameter_set_rbsp"&&!ge&&(ge=_e.data,O.pps=[_e.data]),W.push(_e)},this.flush=function(){for(var _e,De,we,Re,nt,Pt,Ut=0,tt,sr;W.length&&W[0].nalUnitType!=="access_unit_delimiter_rbsp";)W.shift();if(W.length===0){this.resetStream_(),this.trigger("done","VideoSegmentStream");return}if(_e=$e.groupNalsIntoFrames(W),we=$e.groupFramesIntoGops(_e),we[0][0].keyFrame||(De=this.getGopForFusion_(W[0],O),De?(Ut=De.duration,we.unshift(De),we.byteLength+=De.byteLength,we.nalCount+=De.nalCount,we.pts=De.pts,we.dts=De.dts,we.duration+=De.duration):we=$e.extendFirstKeyFrame(we)),Z.length){var kn;if(z.alignGopsAtEnd?kn=this.alignGopsAtEnd_(we):kn=this.alignGopsAtStart_(we),!kn){this.gopCache_.unshift({gop:we.pop(),pps:O.pps,sps:O.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),W=[],this.resetStream_(),this.trigger("done","VideoSegmentStream");return}se.clearDtsInfo(O),we=kn}se.collectDtsInfo(O,we),O.samples=$e.generateSampleTable(we),nt=Oe.mdat($e.concatenateNalData(we)),O.baseMediaDecodeTime=se.calculateTrackBaseMediaDecodeTime(O,z.keepOriginalTimestamps),this.trigger("processedGopsInfo",we.map(function(fi){return{pts:fi.pts,dts:fi.dts,byteLength:fi.byteLength}})),tt=we[0],sr=we[we.length-1],this.trigger("segmentTimingInfo",Oc(O.baseMediaDecodeTime,tt.dts,tt.pts,sr.dts+sr.duration,sr.pts+sr.duration,Ut)),this.trigger("timingInfo",{start:we[0].pts,end:we[we.length-1].pts+we[we.length-1].duration}),this.gopCache_.unshift({gop:we.pop(),pps:O.pps,sps:O.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),W=[],this.trigger("baseMediaDecodeTime",O.baseMediaDecodeTime),this.trigger("timelineStartInfo",O.timelineStartInfo),Re=Oe.moof(j,[O]),Pt=new Uint8Array(Re.byteLength+nt.byteLength),j++,Pt.set(Re),Pt.set(nt,Re.byteLength),this.trigger("data",{track:O,boxes:Pt}),this.resetStream_(),this.trigger("done","VideoSegmentStream")},this.reset=function(){this.resetStream_(),W=[],this.gopCache_.length=0,Z.length=0,this.trigger("reset")},this.resetStream_=function(){se.clearDtsInfo(O),te=void 0,ge=void 0},this.getGopForFusion_=function(_e){var De=45e3,we=1/0,Re,nt,Pt,Ut,tt;for(tt=0;tt<this.gopCache_.length;tt++)Ut=this.gopCache_[tt],Pt=Ut.gop,!(!(O.pps&&Lc(O.pps[0],Ut.pps[0]))||!(O.sps&&Lc(O.sps[0],Ut.sps[0])))&&(Pt.dts<O.timelineStartInfo.dts||(Re=_e.dts-Pt.dts-Pt.duration,Re>=-1e4&&Re<=De&&(!nt||we>Re)&&(nt=Ut,we=Re)));return nt?nt.gop:null},this.alignGopsAtStart_=function(_e){var De,we,Re,nt,Pt,Ut,tt,sr;for(Pt=_e.byteLength,Ut=_e.nalCount,tt=_e.duration,De=we=0;De<Z.length&&we<_e.length&&(Re=Z[De],nt=_e[we],Re.pts!==nt.pts);){if(nt.pts>Re.pts){De++;continue}we++,Pt-=nt.byteLength,Ut-=nt.nalCount,tt-=nt.duration}return we===0?_e:we===_e.length?null:(sr=_e.slice(we),sr.byteLength=Pt,sr.duration=tt,sr.nalCount=Ut,sr.pts=sr[0].pts,sr.dts=sr[0].dts,sr)},this.alignGopsAtEnd_=function(_e){var De,we,Re,nt,Pt,Ut;for(De=Z.length-1,we=_e.length-1,Pt=null,Ut=!1;De>=0&&we>=0;){if(Re=Z[De],nt=_e[we],Re.pts===nt.pts){Ut=!0;break}if(Re.pts>nt.pts){De--;continue}De===Z.length-1&&(Pt=we),we--}if(!Ut&&Pt===null)return null;var tt;if(Ut?tt=we:tt=Pt,tt===0)return _e;var sr=_e.slice(tt),kn=sr.reduce(function(fi,Hi){return fi.byteLength+=Hi.byteLength,fi.duration+=Hi.duration,fi.nalCount+=Hi.nalCount,fi},{byteLength:0,duration:0,nalCount:0});return sr.byteLength=kn.byteLength,sr.duration=kn.duration,sr.nalCount=kn.nalCount,sr.pts=sr[0].pts,sr.dts=sr[0].dts,sr},this.alignGopsWith=function(_e){Z=_e}},rl.prototype=new e,os=function(O,z){this.numberOfTracks=0,this.metadataStream=z,O=O||{},typeof O.remux<"u"?this.remuxTracks=!!O.remux:this.remuxTracks=!0,typeof O.keepOriginalTimestamps=="boolean"?this.keepOriginalTimestamps=O.keepOriginalTimestamps:this.keepOriginalTimestamps=!1,this.pendingTracks=[],this.videoTrack=null,this.pendingBoxes=[],this.pendingCaptions=[],this.pendingMetadata=[],this.pendingBytes=0,this.emittedTracks=0,os.prototype.init.call(this),this.push=function(j){if(j.text)return this.pendingCaptions.push(j);if(j.frames)return this.pendingMetadata.push(j);this.pendingTracks.push(j.track),this.pendingBytes+=j.boxes.byteLength,j.track.type==="video"&&(this.videoTrack=j.track,this.pendingBoxes.push(j.boxes)),j.track.type==="audio"&&(this.audioTrack=j.track,this.pendingBoxes.unshift(j.boxes))}},os.prototype=new e,os.prototype.flush=function(oe){var O=0,z={captions:[],captionStreams:{},metadata:[],info:{}},j,W,Z,te=0,ge;if(this.pendingTracks.length<this.numberOfTracks){if(oe!=="VideoSegmentStream"&&oe!=="AudioSegmentStream")return;if(this.remuxTracks)return;if(this.pendingTracks.length===0){this.emittedTracks++,this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0);return}}if(this.videoTrack?(te=this.videoTrack.timelineStartInfo.pts,$i.forEach(function(_e){z.info[_e]=this.videoTrack[_e]},this)):this.audioTrack&&(te=this.audioTrack.timelineStartInfo.pts,Ml.forEach(function(_e){z.info[_e]=this.audioTrack[_e]},this)),this.videoTrack||this.audioTrack){for(this.pendingTracks.length===1?z.type=this.pendingTracks[0].type:z.type="combined",this.emittedTracks+=this.pendingTracks.length,Z=Oe.initSegment(this.pendingTracks),z.initSegment=new Uint8Array(Z.byteLength),z.initSegment.set(Z),z.data=new Uint8Array(this.pendingBytes),ge=0;ge<this.pendingBoxes.length;ge++)z.data.set(this.pendingBoxes[ge],O),O+=this.pendingBoxes[ge].byteLength;for(ge=0;ge<this.pendingCaptions.length;ge++)j=this.pendingCaptions[ge],j.startTime=Tt.metadataTsToSeconds(j.startPts,te,this.keepOriginalTimestamps),j.endTime=Tt.metadataTsToSeconds(j.endPts,te,this.keepOriginalTimestamps),z.captionStreams[j.stream]=!0,z.captions.push(j);for(ge=0;ge<this.pendingMetadata.length;ge++)W=this.pendingMetadata[ge],W.cueTime=Tt.metadataTsToSeconds(W.pts,te,this.keepOriginalTimestamps),z.metadata.push(W);for(z.metadata.dispatchType=this.metadataStream.dispatchType,this.pendingTracks.length=0,this.videoTrack=null,this.pendingBoxes.length=0,this.pendingCaptions.length=0,this.pendingBytes=0,this.pendingMetadata.length=0,this.trigger("data",z),ge=0;ge<z.captions.length;ge++)j=z.captions[ge],this.trigger("caption",j);for(ge=0;ge<z.metadata.length;ge++)W=z.metadata[ge],this.trigger("id3Frame",W)}this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0)},os.prototype.setRemux=function(oe){this.remuxTracks=oe},Es=function(O){var z=this,j=!0,W,Z;Es.prototype.init.call(this),O=O||{},this.baseMediaDecodeTime=O.baseMediaDecodeTime||0,this.transmuxPipeline_={},this.setupAacPipeline=function(){var te={};this.transmuxPipeline_=te,te.type="aac",te.metadataStream=new wr.MetadataStream,te.aacStream=new za,te.audioTimestampRolloverStream=new wr.TimestampRolloverStream("audio"),te.timedMetadataTimestampRolloverStream=new wr.TimestampRolloverStream("timed-metadata"),te.adtsStream=new $n,te.coalesceStream=new os(O,te.metadataStream),te.headOfPipeline=te.aacStream,te.aacStream.pipe(te.audioTimestampRolloverStream).pipe(te.adtsStream),te.aacStream.pipe(te.timedMetadataTimestampRolloverStream).pipe(te.metadataStream).pipe(te.coalesceStream),te.metadataStream.on("timestamp",function(ge){te.aacStream.setTimestamp(ge.timeStamp)}),te.aacStream.on("data",function(ge){ge.type!=="timed-metadata"&&ge.type!=="audio"||te.audioSegmentStream||(Z=Z||{timelineStartInfo:{baseMediaDecodeTime:z.baseMediaDecodeTime},codec:"adts",type:"audio"},te.coalesceStream.numberOfTracks++,te.audioSegmentStream=new Va(Z,O),te.audioSegmentStream.on("log",z.getLogTrigger_("audioSegmentStream")),te.audioSegmentStream.on("timingInfo",z.trigger.bind(z,"audioTimingInfo")),te.adtsStream.pipe(te.audioSegmentStream).pipe(te.coalesceStream),z.trigger("trackinfo",{hasAudio:!!Z,hasVideo:!!W}))}),te.coalesceStream.on("data",this.trigger.bind(this,"data")),te.coalesceStream.on("done",this.trigger.bind(this,"done")),nl(this,te)},this.setupTsPipeline=function(){var te={};this.transmuxPipeline_=te,te.type="ts",te.metadataStream=new wr.MetadataStream,te.packetStream=new wr.TransportPacketStream,te.parseStream=new wr.TransportParseStream,te.elementaryStream=new wr.ElementaryStream,te.timestampRolloverStream=new wr.TimestampRolloverStream,te.adtsStream=new $n,te.h264Stream=new Ha,te.captionStream=new wr.CaptionStream(O),te.coalesceStream=new os(O,te.metadataStream),te.headOfPipeline=te.packetStream,te.packetStream.pipe(te.parseStream).pipe(te.elementaryStream).pipe(te.timestampRolloverStream),te.timestampRolloverStream.pipe(te.h264Stream),te.timestampRolloverStream.pipe(te.adtsStream),te.timestampRolloverStream.pipe(te.metadataStream).pipe(te.coalesceStream),te.h264Stream.pipe(te.captionStream).pipe(te.coalesceStream),te.elementaryStream.on("data",function(ge){var _e;if(ge.type==="metadata"){for(_e=ge.tracks.length;_e--;)!W&&ge.tracks[_e].type==="video"?(W=ge.tracks[_e],W.timelineStartInfo.baseMediaDecodeTime=z.baseMediaDecodeTime):!Z&&ge.tracks[_e].type==="audio"&&(Z=ge.tracks[_e],Z.timelineStartInfo.baseMediaDecodeTime=z.baseMediaDecodeTime);W&&!te.videoSegmentStream&&(te.coalesceStream.numberOfTracks++,te.videoSegmentStream=new rl(W,O),te.videoSegmentStream.on("log",z.getLogTrigger_("videoSegmentStream")),te.videoSegmentStream.on("timelineStartInfo",function(De){Z&&!O.keepOriginalTimestamps&&(Z.timelineStartInfo=De,te.audioSegmentStream.setEarliestDts(De.dts-z.baseMediaDecodeTime))}),te.videoSegmentStream.on("processedGopsInfo",z.trigger.bind(z,"gopInfo")),te.videoSegmentStream.on("segmentTimingInfo",z.trigger.bind(z,"videoSegmentTimingInfo")),te.videoSegmentStream.on("baseMediaDecodeTime",function(De){Z&&te.audioSegmentStream.setVideoBaseMediaDecodeTime(De)}),te.videoSegmentStream.on("timingInfo",z.trigger.bind(z,"videoTimingInfo")),te.h264Stream.pipe(te.videoSegmentStream).pipe(te.coalesceStream)),Z&&!te.audioSegmentStream&&(te.coalesceStream.numberOfTracks++,te.audioSegmentStream=new Va(Z,O),te.audioSegmentStream.on("log",z.getLogTrigger_("audioSegmentStream")),te.audioSegmentStream.on("timingInfo",z.trigger.bind(z,"audioTimingInfo")),te.audioSegmentStream.on("segmentTimingInfo",z.trigger.bind(z,"audioSegmentTimingInfo")),te.adtsStream.pipe(te.audioSegmentStream).pipe(te.coalesceStream)),z.trigger("trackinfo",{hasAudio:!!Z,hasVideo:!!W})}}),te.coalesceStream.on("data",this.trigger.bind(this,"data")),te.coalesceStream.on("id3Frame",function(ge){ge.dispatchType=te.metadataStream.dispatchType,z.trigger("id3Frame",ge)}),te.coalesceStream.on("caption",this.trigger.bind(this,"caption")),te.coalesceStream.on("done",this.trigger.bind(this,"done")),nl(this,te)},this.setBaseMediaDecodeTime=function(te){var ge=this.transmuxPipeline_;O.keepOriginalTimestamps||(this.baseMediaDecodeTime=te),Z&&(Z.timelineStartInfo.dts=void 0,Z.timelineStartInfo.pts=void 0,se.clearDtsInfo(Z),ge.audioTimestampRolloverStream&&ge.audioTimestampRolloverStream.discontinuity()),W&&(ge.videoSegmentStream&&(ge.videoSegmentStream.gopCache_=[]),W.timelineStartInfo.dts=void 0,W.timelineStartInfo.pts=void 0,se.clearDtsInfo(W),ge.captionStream.reset()),ge.timestampRolloverStream&&ge.timestampRolloverStream.discontinuity()},this.setAudioAppendStart=function(te){Z&&this.transmuxPipeline_.audioSegmentStream.setAudioAppendStart(te)},this.setRemux=function(te){var ge=this.transmuxPipeline_;O.remux=te,ge&&ge.coalesceStream&&ge.coalesceStream.setRemux(te)},this.alignGopsWith=function(te){W&&this.transmuxPipeline_.videoSegmentStream&&this.transmuxPipeline_.videoSegmentStream.alignGopsWith(te)},this.getLogTrigger_=function(te){var ge=this;return function(_e){_e.stream=te,ge.trigger("log",_e)}},this.push=function(te){if(j){var ge=Fl(te);ge&&this.transmuxPipeline_.type!=="aac"?this.setupAacPipeline():!ge&&this.transmuxPipeline_.type!=="ts"&&this.setupTsPipeline(),j=!1}this.transmuxPipeline_.headOfPipeline.push(te)},this.flush=function(){j=!0,this.transmuxPipeline_.headOfPipeline.flush()},this.endTimeline=function(){this.transmuxPipeline_.headOfPipeline.endTimeline()},this.reset=function(){this.transmuxPipeline_.headOfPipeline&&this.transmuxPipeline_.headOfPipeline.reset()},this.resetCaptions=function(){this.transmuxPipeline_.captionStream&&this.transmuxPipeline_.captionStream.reset()}},Es.prototype=new e;var Nu={Transmuxer:Es},Nl=function(O){return O>>>0},Uu=function(O){return("00"+O.toString(16)).slice(-2)},zs={toUnsigned:Nl,toHexString:Uu},ga=function(O){var z="";return z+=String.fromCharCode(O[0]),z+=String.fromCharCode(O[1]),z+=String.fromCharCode(O[2]),z+=String.fromCharCode(O[3]),z},ls=ga,ks=zs.toUnsigned,Mc=function oe(O,z){var j=[],W,Z,te,ge,_e;if(!z.length)return null;for(W=0;W<O.byteLength;)Z=ks(O[W]<<24|O[W+1]<<16|O[W+2]<<8|O[W+3]),te=ls(O.subarray(W+4,W+8)),ge=Z>1?W+Z:O.byteLength,te===z[0]&&(z.length===1?j.push(O.subarray(W+8,ge)):(_e=oe(O.subarray(W+8,ge),z.slice(1)),_e.length&&(j=j.concat(_e)))),W=ge;return j},an=Mc,Ul=zs.toUnsigned,Fc=i.getUint64,Ii=function(O){var z={version:O[0],flags:new Uint8Array(O.subarray(1,4))};return z.version===1?z.baseMediaDecodeTime=Fc(O.subarray(4)):z.baseMediaDecodeTime=Ul(O[4]<<24|O[5]<<16|O[6]<<8|O[7]),z},Pi=Ii,us=function(O){return{isLeading:(O[0]&12)>>>2,dependsOn:O[0]&3,isDependedOn:(O[1]&192)>>>6,hasRedundancy:(O[1]&48)>>>4,paddingValue:(O[1]&14)>>>1,isNonSyncSample:O[1]&1,degradationPriority:O[2]<<8|O[3]}},Ti=us,Wa=function(O){var z={version:O[0],flags:new Uint8Array(O.subarray(1,4)),samples:[]},j=new DataView(O.buffer,O.byteOffset,O.byteLength),W=z.flags[2]&1,Z=z.flags[2]&4,te=z.flags[1]&1,ge=z.flags[1]&2,_e=z.flags[1]&4,De=z.flags[1]&8,we=j.getUint32(4),Re=8,nt;for(W&&(z.dataOffset=j.getInt32(Re),Re+=4),Z&&we&&(nt={flags:Ti(O.subarray(Re,Re+4))},Re+=4,te&&(nt.duration=j.getUint32(Re),Re+=4),ge&&(nt.size=j.getUint32(Re),Re+=4),De&&(z.version===1?nt.compositionTimeOffset=j.getInt32(Re):nt.compositionTimeOffset=j.getUint32(Re),Re+=4),z.samples.push(nt),we--);we--;)nt={},te&&(nt.duration=j.getUint32(Re),Re+=4),ge&&(nt.size=j.getUint32(Re),Re+=4),_e&&(nt.flags=Ti(O.subarray(Re,Re+4)),Re+=4),De&&(z.version===1?nt.compositionTimeOffset=j.getInt32(Re):nt.compositionTimeOffset=j.getUint32(Re),Re+=4),z.samples.push(nt);return z},Sn=Wa,zn=function(O){var z=new DataView(O.buffer,O.byteOffset,O.byteLength),j={version:O[0],flags:new Uint8Array(O.subarray(1,4)),trackId:z.getUint32(4)},W=j.flags[2]&1,Z=j.flags[2]&2,te=j.flags[2]&8,ge=j.flags[2]&16,_e=j.flags[2]&32,De=j.flags[0]&65536,we=j.flags[0]&131072,Re;return Re=8,W&&(Re+=4,j.baseDataOffset=z.getUint32(12),Re+=4),Z&&(j.sampleDescriptionIndex=z.getUint32(Re),Re+=4),te&&(j.defaultSampleDuration=z.getUint32(Re),Re+=4),ge&&(j.defaultSampleSize=z.getUint32(Re),Re+=4),_e&&(j.defaultSampleFlags=z.getUint32(Re)),De&&(j.durationIsEmpty=!0),!W&&we&&(j.baseDataOffsetIsMoof=!0),j},ji=zn,qa=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},xo;typeof window<"u"?xo=window:typeof qa<"u"?xo=qa:typeof self<"u"?xo=self:xo={};var il=xo,$d=ye.discardEmulationPreventionBytes,jd=Jr.CaptionStream,sl=function(O,z){for(var j=O,W=0;W<z.length;W++){var Z=z[W];if(j<Z.size)return Z;j-=Z.size}return null},$u=function(O,z,j){var W=new DataView(O.buffer,O.byteOffset,O.byteLength),Z={logs:[],seiNals:[]},te,ge,_e,De;for(ge=0;ge+4<O.length;ge+=_e)if(_e=W.getUint32(ge),ge+=4,!(_e<=0))switch(O[ge]&31){case 6:var we=O.subarray(ge+1,ge+1+_e),Re=sl(ge,z);if(te={nalUnitType:"sei_rbsp",size:_e,data:we,escapedRBSP:$d(we),trackId:j},Re)te.pts=Re.pts,te.dts=Re.dts,De=Re;else if(De)te.pts=De.pts,te.dts=De.dts;else{Z.logs.push({level:"warn",message:"We've encountered a nal unit without data at "+ge+" for trackId "+j+". See mux.js#223."});break}Z.seiNals.push(te);break}return Z},Ga=function(O,z,j){var W=z,Z=j.defaultSampleDuration||0,te=j.defaultSampleSize||0,ge=j.trackId,_e=[];return O.forEach(function(De){var we=Sn(De),Re=we.samples;Re.forEach(function(nt){nt.duration===void 0&&(nt.duration=Z),nt.size===void 0&&(nt.size=te),nt.trackId=ge,nt.dts=W,nt.compositionTimeOffset===void 0&&(nt.compositionTimeOffset=0),typeof W=="bigint"?(nt.pts=W+il.BigInt(nt.compositionTimeOffset),W+=il.BigInt(nt.duration)):(nt.pts=W+nt.compositionTimeOffset,W+=nt.duration)}),_e=_e.concat(Re)}),_e},Hs=function(O,z){var j=an(O,["moof","traf"]),W=an(O,["mdat"]),Z={},te=[];return W.forEach(function(ge,_e){var De=j[_e];te.push({mdat:ge,traf:De})}),te.forEach(function(ge){var _e=ge.mdat,De=ge.traf,we=an(De,["tfhd"]),Re=ji(we[0]),nt=Re.trackId,Pt=an(De,["tfdt"]),Ut=Pt.length>0?Pi(Pt[0]).baseMediaDecodeTime:0,tt=an(De,["trun"]),sr,kn;z===nt&&tt.length>0&&(sr=Ga(tt,Ut,Re),kn=$u(_e,sr,nt),Z[nt]||(Z[nt]={seiNals:[],logs:[]}),Z[nt].seiNals=Z[nt].seiNals.concat(kn.seiNals),Z[nt].logs=Z[nt].logs.concat(kn.logs))}),Z},Ka=function(O,z,j){var W;if(z===null)return null;W=Hs(O,z);var Z=W[z]||{};return{seiNals:Z.seiNals,logs:Z.logs,timescale:j}},Ri=function(){var O=!1,z,j,W,Z,te,ge;this.isInitialized=function(){return O},this.init=function(_e){z=new jd,O=!0,ge=_e?_e.isPartial:!1,z.on("data",function(De){De.startTime=De.startPts/Z,De.endTime=De.endPts/Z,te.captions.push(De),te.captionStreams[De.stream]=!0}),z.on("log",function(De){te.logs.push(De)})},this.isNewInit=function(_e,De){return _e&&_e.length===0||De&&typeof De=="object"&&Object.keys(De).length===0?!1:W!==_e[0]||Z!==De[W]},this.parse=function(_e,De,we){var Re;if(this.isInitialized()){if(!De||!we)return null;if(this.isNewInit(De,we))W=De[0],Z=we[W];else if(W===null||!Z)return j.push(_e),null}else return null;for(;j.length>0;){var nt=j.shift();this.parse(nt,De,we)}return Re=Ka(_e,W,Z),Re&&Re.logs&&(te.logs=te.logs.concat(Re.logs)),Re===null||!Re.seiNals?te.logs.length?{logs:te.logs,captions:[],captionStreams:[]}:null:(this.pushNals(Re.seiNals),this.flushStream(),te)},this.pushNals=function(_e){if(!this.isInitialized()||!_e||_e.length===0)return null;_e.forEach(function(De){z.push(De)})},this.flushStream=function(){if(!this.isInitialized())return null;ge?z.partialFlush():z.flush()},this.clearParsedCaptions=function(){te.captions=[],te.captionStreams={},te.logs=[]},this.resetCaptionStream=function(){if(!this.isInitialized())return null;z.reset()},this.clearAllCaptions=function(){this.clearParsedCaptions(),this.resetCaptionStream()},this.reset=function(){j=[],W=null,Z=null,te?this.clearParsedCaptions():te={captions:[],captionStreams:{},logs:[]},this.resetCaptionStream()},this.reset()},Bc=Ri,bo=zs.toUnsigned,Xa=zs.toHexString,ju=i.getUint64,Nc,$l,Uc,va,$c,So;Nc=function(O){var z={},j=an(O,["moov","trak"]);return j.reduce(function(W,Z){var te,ge,_e,De,we;return te=an(Z,["tkhd"])[0],!te||(ge=te[0],_e=ge===0?12:20,De=bo(te[_e]<<24|te[_e+1]<<16|te[_e+2]<<8|te[_e+3]),we=an(Z,["mdia","mdhd"])[0],!we)?null:(ge=we[0],_e=ge===0?12:20,W[De]=bo(we[_e]<<24|we[_e+1]<<16|we[_e+2]<<8|we[_e+3]),W)},z)},$l=function(O,z){var j;j=an(z,["moof","traf"]);var W=j.reduce(function(Z,te){var ge=an(te,["tfhd"])[0],_e=bo(ge[4]<<24|ge[5]<<16|ge[6]<<8|ge[7]),De=O[_e]||9e4,we=an(te,["tfdt"])[0],Re=new DataView(we.buffer,we.byteOffset,we.byteLength),nt;we[0]===1?nt=ju(we.subarray(4,12)):nt=Re.getUint32(4);var Pt;return typeof nt=="bigint"?Pt=nt/il.BigInt(De):typeof nt=="number"&&!isNaN(nt)&&(Pt=nt/De),Pt<Number.MAX_SAFE_INTEGER&&(Pt=Number(Pt)),Pt<Z&&(Z=Pt),Z},1/0);return typeof W=="bigint"||isFinite(W)?W:0},Uc=function(O,z){var j=an(z,["moof","traf"]),W=0,Z=0,te;if(j&&j.length){var ge=an(j[0],["tfhd"])[0],_e=an(j[0],["trun"])[0],De=an(j[0],["tfdt"])[0];if(ge){var we=ji(ge);te=we.trackId}if(De){var Re=Pi(De);W=Re.baseMediaDecodeTime}if(_e){var nt=Sn(_e);nt.samples&&nt.samples.length&&(Z=nt.samples[0].compositionTimeOffset||0)}}var Pt=O[te]||9e4;typeof W=="bigint"&&(Z=il.BigInt(Z),Pt=il.BigInt(Pt));var Ut=(W+Z)/Pt;return typeof Ut=="bigint"&&Ut<Number.MAX_SAFE_INTEGER&&(Ut=Number(Ut)),Ut},va=function(O){var z=an(O,["moov","trak"]),j=[];return z.forEach(function(W){var Z=an(W,["mdia","hdlr"]),te=an(W,["tkhd"]);Z.forEach(function(ge,_e){var De=ls(ge.subarray(8,12)),we=te[_e],Re,nt,Pt;De==="vide"&&(Re=new DataView(we.buffer,we.byteOffset,we.byteLength),nt=Re.getUint8(0),Pt=nt===0?Re.getUint32(12):Re.getUint32(20),j.push(Pt))})}),j},So=function(O){var z=O[0],j=z===0?12:20;return bo(O[j]<<24|O[j+1]<<16|O[j+2]<<8|O[j+3])},$c=function(O){var z=an(O,["moov","trak"]),j=[];return z.forEach(function(W){var Z={},te=an(W,["tkhd"])[0],ge,_e;te&&(ge=new DataView(te.buffer,te.byteOffset,te.byteLength),_e=ge.getUint8(0),Z.id=_e===0?ge.getUint32(12):ge.getUint32(20));var De=an(W,["mdia","hdlr"])[0];if(De){var we=ls(De.subarray(8,12));we==="vide"?Z.type="video":we==="soun"?Z.type="audio":Z.type=we}var Re=an(W,["mdia","minf","stbl","stsd"])[0];if(Re){var nt=Re.subarray(8);Z.codec=ls(nt.subarray(4,8));var Pt=an(nt,[Z.codec])[0],Ut,tt;Pt&&(/^[asm]vc[1-9]$/i.test(Z.codec)?(Ut=Pt.subarray(78),tt=ls(Ut.subarray(4,8)),tt==="avcC"&&Ut.length>11?(Z.codec+=".",Z.codec+=Xa(Ut[9]),Z.codec+=Xa(Ut[10]),Z.codec+=Xa(Ut[11])):Z.codec="avc1.4d400d"):/^mp4[a,v]$/i.test(Z.codec)?(Ut=Pt.subarray(28),tt=ls(Ut.subarray(4,8)),tt==="esds"&&Ut.length>20&&Ut[19]!==0?(Z.codec+="."+Xa(Ut[19]),Z.codec+="."+Xa(Ut[20]>>>2&63).replace(/^0/,"")):Z.codec="mp4a.40.2"):Z.codec=Z.codec.toLowerCase())}var sr=an(W,["mdia","mdhd"])[0];sr&&(Z.timescale=So(sr)),j.push(Z)}),j};var jc={findBox:an,parseType:ls,timescale:Nc,startTime:$l,compositionStartTime:Uc,videoTrackIds:va,tracks:$c,getTimescaleFromMediaHeader:So},zc=function(O){var z=O[1]&31;return z<<=8,z|=O[2],z},To=function(O){return!!(O[1]&64)},Co=function(O){var z=0;return(O[3]&48)>>>4>1&&(z+=O[4]+1),z},zd=function(O,z){var j=zc(O);return j===0?"pat":j===z?"pmt":z?"pes":null},Hd=function(O){var z=To(O),j=4+Co(O);return z&&(j+=O[j]+1),(O[j+10]&31)<<8|O[j+11]},Vd=function(O){var z={},j=To(O),W=4+Co(O);if(j&&(W+=O[W]+1),!!(O[W+5]&1)){var Z,te,ge;Z=(O[W+1]&15)<<8|O[W+2],te=3+Z-4,ge=(O[W+10]&15)<<8|O[W+11];for(var _e=12+ge;_e<te;){var De=W+_e;z[(O[De+1]&31)<<8|O[De+2]]=O[De],_e+=((O[De+3]&15)<<8|O[De+4])+5}return z}},al=function(O,z){var j=zc(O),W=z[j];switch(W){case Pr.H264_STREAM_TYPE:return"video";case Pr.ADTS_STREAM_TYPE:return"audio";case Pr.METADATA_STREAM_TYPE:return"timed-metadata";default:return null}},ol=function(O){var z=To(O);if(!z)return null;var j=4+Co(O);if(j>=O.byteLength)return null;var W=null,Z;return Z=O[j+7],Z&192&&(W={},W.pts=(O[j+9]&14)<<27|(O[j+10]&255)<<20|(O[j+11]&254)<<12|(O[j+12]&255)<<5|(O[j+13]&254)>>>3,W.pts*=4,W.pts+=(O[j+13]&6)>>>1,W.dts=W.pts,Z&64&&(W.dts=(O[j+14]&14)<<27|(O[j+15]&255)<<20|(O[j+16]&254)<<12|(O[j+17]&255)<<5|(O[j+18]&254)>>>3,W.dts*=4,W.dts+=(O[j+18]&6)>>>1)),W},zu=function(O){switch(O){case 5:return"slice_layer_without_partitioning_rbsp_idr";case 6:return"sei_rbsp";case 7:return"seq_parameter_set_rbsp";case 8:return"pic_parameter_set_rbsp";case 9:return"access_unit_delimiter_rbsp";default:return null}},jl=function(O){for(var z=4+Co(O),j=O.subarray(z),W=0,Z=0,te=!1,ge;Z<j.byteLength-3;Z++)if(j[Z+2]===1){W=Z+5;break}for(;W<j.byteLength;)switch(j[W]){case 0:if(j[W-1]!==0){W+=2;break}else if(j[W-2]!==0){W++;break}Z+3!==W-2&&(ge=zu(j[Z+3]&31),ge==="slice_layer_without_partitioning_rbsp_idr"&&(te=!0));do W++;while(j[W]!==1&&W<j.length);Z=W-2,W+=3;break;case 1:if(j[W-1]!==0||j[W-2]!==0){W+=3;break}ge=zu(j[Z+3]&31),ge==="slice_layer_without_partitioning_rbsp_idr"&&(te=!0),Z=W-2,W+=3;break;default:W+=3;break}return j=j.subarray(Z),W-=Z,Z=0,j&&j.byteLength>3&&(ge=zu(j[Z+3]&31),ge==="slice_layer_without_partitioning_rbsp_idr"&&(te=!0)),te},Hc={parseType:zd,parsePat:Hd,parsePmt:Vd,parsePayloadUnitStartIndicator:To,parsePesType:al,parsePesTime:ol,videoPacketContainsKeyFrame:jl},Vs=Ss.handleRollover,rn={};rn.ts=Hc,rn.aac=Di;var As=Tt.ONE_SECOND_IN_TS,on=188,zi=71,Wd=function(O,z){for(var j=0,W=on,Z,te;W<O.byteLength;){if(O[j]===zi&&O[W]===zi){switch(Z=O.subarray(j,W),te=rn.ts.parseType(Z,z.pid),te){case"pat":z.pid=rn.ts.parsePat(Z);break;case"pmt":var ge=rn.ts.parsePmt(Z);z.table=z.table||{},Object.keys(ge).forEach(function(_e){z.table[_e]=ge[_e]});break}j+=on,W+=on;continue}j++,W++}},Vc=function(O,z,j){for(var W=0,Z=on,te,ge,_e,De,we,Re=!1;Z<=O.byteLength;){if(O[W]===zi&&(O[Z]===zi||Z===O.byteLength)){switch(te=O.subarray(W,Z),ge=rn.ts.parseType(te,z.pid),ge){case"pes":_e=rn.ts.parsePesType(te,z.table),De=rn.ts.parsePayloadUnitStartIndicator(te),_e==="audio"&&De&&(we=rn.ts.parsePesTime(te),we&&(we.type="audio",j.audio.push(we),Re=!0));break}if(Re)break;W+=on,Z+=on;continue}W++,Z++}for(Z=O.byteLength,W=Z-on,Re=!1;W>=0;){if(O[W]===zi&&(O[Z]===zi||Z===O.byteLength)){switch(te=O.subarray(W,Z),ge=rn.ts.parseType(te,z.pid),ge){case"pes":_e=rn.ts.parsePesType(te,z.table),De=rn.ts.parsePayloadUnitStartIndicator(te),_e==="audio"&&De&&(we=rn.ts.parsePesTime(te),we&&(we.type="audio",j.audio.push(we),Re=!0));break}if(Re)break;W-=on,Z-=on;continue}W--,Z--}},Ds=function(O,z,j){for(var W=0,Z=on,te,ge,_e,De,we,Re,nt,Pt,Ut=!1,tt={data:[],size:0};Z<O.byteLength;){if(O[W]===zi&&O[Z]===zi){switch(te=O.subarray(W,Z),ge=rn.ts.parseType(te,z.pid),ge){case"pes":if(_e=rn.ts.parsePesType(te,z.table),De=rn.ts.parsePayloadUnitStartIndicator(te),_e==="video"&&(De&&!Ut&&(we=rn.ts.parsePesTime(te),we&&(we.type="video",j.video.push(we),Ut=!0)),!j.firstKeyFrame)){if(De&&tt.size!==0){for(Re=new Uint8Array(tt.size),nt=0;tt.data.length;)Pt=tt.data.shift(),Re.set(Pt,nt),nt+=Pt.byteLength;if(rn.ts.videoPacketContainsKeyFrame(Re)){var sr=rn.ts.parsePesTime(Re);sr?(j.firstKeyFrame=sr,j.firstKeyFrame.type="video"):console.warn("Failed to extract PTS/DTS from PES at first keyframe. This could be an unusual TS segment, or else mux.js did not parse your TS segment correctly. If you know your TS segments do contain PTS/DTS on keyframes please file a bug report! You can try ffprobe to double check for yourself.")}tt.size=0}tt.data.push(te),tt.size+=te.byteLength}break}if(Ut&&j.firstKeyFrame)break;W+=on,Z+=on;continue}W++,Z++}for(Z=O.byteLength,W=Z-on,Ut=!1;W>=0;){if(O[W]===zi&&O[Z]===zi){switch(te=O.subarray(W,Z),ge=rn.ts.parseType(te,z.pid),ge){case"pes":_e=rn.ts.parsePesType(te,z.table),De=rn.ts.parsePayloadUnitStartIndicator(te),_e==="video"&&De&&(we=rn.ts.parsePesTime(te),we&&(we.type="video",j.video.push(we),Ut=!0));break}if(Ut)break;W-=on,Z-=on;continue}W--,Z--}},Wc=function(O,z){if(O.audio&&O.audio.length){var j=z;(typeof j>"u"||isNaN(j))&&(j=O.audio[0].dts),O.audio.forEach(function(te){te.dts=Vs(te.dts,j),te.pts=Vs(te.pts,j),te.dtsTime=te.dts/As,te.ptsTime=te.pts/As})}if(O.video&&O.video.length){var W=z;if((typeof W>"u"||isNaN(W))&&(W=O.video[0].dts),O.video.forEach(function(te){te.dts=Vs(te.dts,W),te.pts=Vs(te.pts,W),te.dtsTime=te.dts/As,te.ptsTime=te.pts/As}),O.firstKeyFrame){var Z=O.firstKeyFrame;Z.dts=Vs(Z.dts,W),Z.pts=Vs(Z.pts,W),Z.dtsTime=Z.dts/As,Z.ptsTime=Z.pts/As}}},ll=function(O){for(var z=!1,j=0,W=null,Z=null,te=0,ge=0,_e;O.length-ge>=3;){var De=rn.aac.parseType(O,ge);switch(De){case"timed-metadata":if(O.length-ge<10){z=!0;break}if(te=rn.aac.parseId3TagSize(O,ge),te>O.length){z=!0;break}Z===null&&(_e=O.subarray(ge,ge+te),Z=rn.aac.parseAacTimestamp(_e)),ge+=te;break;case"audio":if(O.length-ge<7){z=!0;break}if(te=rn.aac.parseAdtsSize(O,ge),te>O.length){z=!0;break}W===null&&(_e=O.subarray(ge,ge+te),W=rn.aac.parseSampleRate(_e)),j++,ge+=te;break;default:ge++;break}if(z)return null}if(W===null||Z===null)return null;var we=As/W,Re={audio:[{type:"audio",dts:Z,pts:Z},{type:"audio",dts:Z+j*1024*we,pts:Z+j*1024*we}]};return Re},ul=function(O){var z={pid:null,table:null},j={};Wd(O,z);for(var W in z.table)if(z.table.hasOwnProperty(W)){var Z=z.table[W];switch(Z){case Pr.H264_STREAM_TYPE:j.video=[],Ds(O,z,j),j.video.length===0&&delete j.video;break;case Pr.ADTS_STREAM_TYPE:j.audio=[],Vc(O,z,j),j.audio.length===0&&delete j.audio;break}}return j},Hu=function(O,z){var j=rn.aac.isLikelyAacData(O),W;return j?W=ll(O):W=ul(O),!W||!W.audio&&!W.video?null:(Wc(W,z),W)},zl={inspect:Hu,parseAudioPes_:Vc},qd=function(O,z){z.on("data",function(j){var W=j.initSegment;j.initSegment={data:W.buffer,byteOffset:W.byteOffset,byteLength:W.byteLength};var Z=j.data;j.data=Z.buffer,O.postMessage({action:"data",segment:j,byteOffset:Z.byteOffset,byteLength:Z.byteLength},[j.data])}),z.on("done",function(j){O.postMessage({action:"done"})}),z.on("gopInfo",function(j){O.postMessage({action:"gopInfo",gopInfo:j})}),z.on("videoSegmentTimingInfo",function(j){var W={start:{decode:Tt.videoTsToSeconds(j.start.dts),presentation:Tt.videoTsToSeconds(j.start.pts)},end:{decode:Tt.videoTsToSeconds(j.end.dts),presentation:Tt.videoTsToSeconds(j.end.pts)},baseMediaDecodeTime:Tt.videoTsToSeconds(j.baseMediaDecodeTime)};j.prependedContentDuration&&(W.prependedContentDuration=Tt.videoTsToSeconds(j.prependedContentDuration)),O.postMessage({action:"videoSegmentTimingInfo",videoSegmentTimingInfo:W})}),z.on("audioSegmentTimingInfo",function(j){var W={start:{decode:Tt.videoTsToSeconds(j.start.dts),presentation:Tt.videoTsToSeconds(j.start.pts)},end:{decode:Tt.videoTsToSeconds(j.end.dts),presentation:Tt.videoTsToSeconds(j.end.pts)},baseMediaDecodeTime:Tt.videoTsToSeconds(j.baseMediaDecodeTime)};j.prependedContentDuration&&(W.prependedContentDuration=Tt.videoTsToSeconds(j.prependedContentDuration)),O.postMessage({action:"audioSegmentTimingInfo",audioSegmentTimingInfo:W})}),z.on("id3Frame",function(j){O.postMessage({action:"id3Frame",id3Frame:j})}),z.on("caption",function(j){O.postMessage({action:"caption",caption:j})}),z.on("trackinfo",function(j){O.postMessage({action:"trackinfo",trackInfo:j})}),z.on("audioTimingInfo",function(j){O.postMessage({action:"audioTimingInfo",audioTimingInfo:{start:Tt.videoTsToSeconds(j.start),end:Tt.videoTsToSeconds(j.end)}})}),z.on("videoTimingInfo",function(j){O.postMessage({action:"videoTimingInfo",videoTimingInfo:{start:Tt.videoTsToSeconds(j.start),end:Tt.videoTsToSeconds(j.end)}})}),z.on("log",function(j){O.postMessage({action:"log",log:j})})},Vu=(function(){function oe(z,j){this.options=j||{},this.self=z,this.init()}var O=oe.prototype;return O.init=function(){this.transmuxer&&this.transmuxer.dispose(),this.transmuxer=new Nu.Transmuxer(this.options),qd(this.self,this.transmuxer)},O.pushMp4Captions=function(j){this.captionParser||(this.captionParser=new Bc,this.captionParser.init());var W=new Uint8Array(j.data,j.byteOffset,j.byteLength),Z=this.captionParser.parse(W,j.trackIds,j.timescales);this.self.postMessage({action:"mp4Captions",captions:Z&&Z.captions||[],logs:Z&&Z.logs||[],data:W.buffer},[W.buffer])},O.probeMp4StartTime=function(j){var W=j.timescales,Z=j.data,te=jc.startTime(W,Z);this.self.postMessage({action:"probeMp4StartTime",startTime:te,data:Z},[Z.buffer])},O.probeMp4Tracks=function(j){var W=j.data,Z=jc.tracks(W);this.self.postMessage({action:"probeMp4Tracks",tracks:Z,data:W},[W.buffer])},O.probeTs=function(j){var W=j.data,Z=j.baseStartTime,te=typeof Z=="number"&&!isNaN(Z)?Z*Tt.ONE_SECOND_IN_TS:void 0,ge=zl.inspect(W,te),_e=null;ge&&(_e={hasVideo:ge.video&&ge.video.length===2||!1,hasAudio:ge.audio&&ge.audio.length===2||!1},_e.hasVideo&&(_e.videoStart=ge.video[0].ptsTime),_e.hasAudio&&(_e.audioStart=ge.audio[0].ptsTime)),this.self.postMessage({action:"probeTs",result:_e,data:W},[W.buffer])},O.clearAllMp4Captions=function(){this.captionParser&&this.captionParser.clearAllCaptions()},O.clearParsedMp4Captions=function(){this.captionParser&&this.captionParser.clearParsedCaptions()},O.push=function(j){var W=new Uint8Array(j.data,j.byteOffset,j.byteLength);this.transmuxer.push(W)},O.reset=function(){this.transmuxer.reset()},O.setTimestampOffset=function(j){var W=j.timestampOffset||0;this.transmuxer.setBaseMediaDecodeTime(Math.round(Tt.secondsToVideoTs(W)))},O.setAudioAppendStart=function(j){this.transmuxer.setAudioAppendStart(Math.ceil(Tt.secondsToVideoTs(j.appendStart)))},O.setRemux=function(j){this.transmuxer.setRemux(j.remux)},O.flush=function(j){this.transmuxer.flush(),self.postMessage({action:"done",type:"transmuxed"})},O.endTimeline=function(){this.transmuxer.endTimeline(),self.postMessage({action:"endedtimeline",type:"transmuxed"})},O.alignGopsWith=function(j){this.transmuxer.alignGopsWith(j.gopsToAlignWith.slice())},oe})();self.onmessage=function(oe){if(oe.data.action==="init"&&oe.data.options){this.messageHandlers=new Vu(self,oe.data.options);return}this.messageHandlers||(this.messageHandlers=new Vu(self)),oe.data&&oe.data.action&&oe.data.action!=="init"&&this.messageHandlers[oe.data.action]&&this.messageHandlers[oe.data.action](oe.data)}})),Wge=$j(Vge),qge=function(e,t,n){var i=e.data.segment,s=i.type,a=i.initSegment,o=i.captions,l=i.captionStreams,u=i.metadata,c=i.videoFrameDtsTime,h=i.videoFramePtsTime;t.buffer.push({captions:o,captionStreams:l,metadata:u});var m=e.data.segment.boxes||{data:e.data.segment.data},g={type:s,data:new Uint8Array(m.data,m.data.byteOffset,m.data.byteLength),initSegment:new Uint8Array(a.data,a.byteOffset,a.byteLength)};typeof c<"u"&&(g.videoFrameDtsTime=c),typeof h<"u"&&(g.videoFramePtsTime=h),n(g)},Gge=function(e){var t=e.transmuxedData,n=e.callback;t.buffer=[],n(t)},Kge=function(e,t){t.gopInfo=e.data.gopInfo},Hj=function(e){var t=e.transmuxer,n=e.bytes,i=e.audioAppendStart,s=e.gopsToAlignWith,a=e.remux,o=e.onData,l=e.onTrackInfo,u=e.onAudioTimingInfo,c=e.onVideoTimingInfo,h=e.onVideoSegmentTimingInfo,m=e.onAudioSegmentTimingInfo,g=e.onId3,y=e.onCaptions,v=e.onDone,x=e.onEndedTimeline,w=e.onTransmuxerLog,E=e.isEndOfTimeline,D={buffer:[]},I=E,A=function(B){t.currentTransmux===e&&(B.data.action==="data"&&qge(B,D,o),B.data.action==="trackinfo"&&l(B.data.trackInfo),B.data.action==="gopInfo"&&Kge(B,D),B.data.action==="audioTimingInfo"&&u(B.data.audioTimingInfo),B.data.action==="videoTimingInfo"&&c(B.data.videoTimingInfo),B.data.action==="videoSegmentTimingInfo"&&h(B.data.videoSegmentTimingInfo),B.data.action==="audioSegmentTimingInfo"&&m(B.data.audioSegmentTimingInfo),B.data.action==="id3Frame"&&g([B.data.id3Frame],B.data.id3Frame.dispatchType),B.data.action==="caption"&&y(B.data.caption),B.data.action==="endedtimeline"&&(I=!1,x()),B.data.action==="log"&&w(B.data.log),B.data.type==="transmuxed"&&(I||(t.onmessage=null,Gge({transmuxedData:D,callback:v}),Vj(t))))};if(t.onmessage=A,i&&t.postMessage({action:"setAudioAppendStart",appendStart:i}),Array.isArray(s)&&t.postMessage({action:"alignGopsWith",gopsToAlignWith:s}),typeof a<"u"&&t.postMessage({action:"setRemux",remux:a}),n.byteLength){var L=n instanceof ArrayBuffer?n:n.buffer,N=n instanceof ArrayBuffer?0:n.byteOffset;t.postMessage({action:"push",data:L,byteOffset:N,byteLength:n.byteLength},[L])}E&&t.postMessage({action:"endTimeline"}),t.postMessage({action:"flush"})},Vj=function(e){e.currentTransmux=null,e.transmuxQueue.length&&(e.currentTransmux=e.transmuxQueue.shift(),typeof e.currentTransmux=="function"?e.currentTransmux():Hj(e.currentTransmux))},K4=function(e,t){e.postMessage({action:t}),Vj(e)},Wj=function(e,t){if(!t.currentTransmux){t.currentTransmux=e,K4(t,e);return}t.transmuxQueue.push(K4.bind(null,t,e))},Xge=function(e){Wj("reset",e)},Yge=function(e){Wj("endTimeline",e)},qj=function(e){if(!e.transmuxer.currentTransmux){e.transmuxer.currentTransmux=e,Hj(e);return}e.transmuxer.transmuxQueue.push(e)},Qge=function(e){var t=new Wge;t.currentTransmux=null,t.transmuxQueue=[];var n=t.terminate;return t.terminate=function(){return t.currentTransmux=null,t.transmuxQueue.length=0,n.call(t)},t.postMessage({action:"init",options:e}),t},kC={reset:Xge,endTimeline:Yge,transmux:qj,createTransmuxer:Qge},Hx=function(e){var t=e.transmuxer,n=e.endAction||e.action,i=e.callback,s=tr({},e,{endAction:null,transmuxer:null,callback:null}),a=function u(c){c.data.action===n&&(t.removeEventListener("message",u),c.data.data&&(c.data.data=new Uint8Array(c.data.data,e.byteOffset||0,e.byteLength||c.data.data.byteLength),e.data&&(e.data=c.data.data)),i(c.data))};if(t.addEventListener("message",a),e.data){var o=e.data instanceof ArrayBuffer;s.byteOffset=o?0:e.data.byteOffset,s.byteLength=e.data.byteLength;var l=[o?e.data:e.data.buffer];t.postMessage(s,l)}else t.postMessage(s)},vu={FAILURE:2,TIMEOUT:-101,ABORTED:-102},AE=function(e){e.forEach(function(t){t.abort()})},Jge=function(e){return{bandwidth:e.bandwidth,bytesReceived:e.bytesReceived||0,roundTripTime:e.roundTripTime||0}},Zge=function(e){var t=e.target,n=Date.now()-t.requestTime,i={bandwidth:1/0,bytesReceived:0,roundTripTime:n||0};return i.bytesReceived=e.loaded,i.bandwidth=Math.floor(i.bytesReceived/i.roundTripTime*8*1e3),i},vA=function(e,t){return t.timedout?{status:t.status,message:"HLS request timed-out at URL: "+t.uri,code:vu.TIMEOUT,xhr:t}:t.aborted?{status:t.status,message:"HLS request aborted at URL: "+t.uri,code:vu.ABORTED,xhr:t}:e?{status:t.status,message:"HLS request errored at URL: "+t.uri,code:vu.FAILURE,xhr:t}:t.responseType==="arraybuffer"&&t.response.byteLength===0?{status:t.status,message:"Empty HLS response at URL: "+t.uri,code:vu.FAILURE,xhr:t}:null},X4=function(e,t,n){return function(i,s){var a=s.response,o=vA(i,s);if(o)return n(o,e);if(a.byteLength!==16)return n({status:s.status,message:"Invalid HLS key at URL: "+s.uri,code:vu.FAILURE,xhr:s},e);for(var l=new DataView(a),u=new Uint32Array([l.getUint32(0),l.getUint32(4),l.getUint32(8),l.getUint32(12)]),c=0;c<t.length;c++)t[c].bytes=u;return n(null,e)}},Gj=function(e,t){var n=Fk(e.map.bytes);if(n!=="mp4"){var i=e.map.resolvedUri||e.map.uri;return t({internal:!0,message:"Found unsupported "+(n||"unknown")+" container for initialization segment at URL: "+i,code:vu.FAILURE})}Hx({action:"probeMp4Tracks",data:e.map.bytes,transmuxer:e.transmuxer,callback:function(a){var o=a.tracks,l=a.data;return e.map.bytes=l,o.forEach(function(u){e.map.tracks=e.map.tracks||{},!e.map.tracks[u.type]&&(e.map.tracks[u.type]=u,typeof u.id=="number"&&u.timescale&&(e.map.timescales=e.map.timescales||{},e.map.timescales[u.id]=u.timescale))}),t(null)}})},eve=function(e){var t=e.segment,n=e.finishProcessingFn;return function(i,s){var a=vA(i,s);if(a)return n(a,t);var o=new Uint8Array(s.response);if(t.map.key)return t.map.encryptedBytes=o,n(null,t);t.map.bytes=o,Gj(t,function(l){if(l)return l.xhr=s,l.status=s.status,n(l,t);n(null,t)})}},tve=function(e){var t=e.segment,n=e.finishProcessingFn,i=e.responseType;return function(s,a){var o=vA(s,a);if(o)return n(o,t);var l=i==="arraybuffer"||!a.responseText?a.response:zge(a.responseText.substring(t.lastReachedChar||0));return t.stats=Jge(a),t.key?t.encryptedBytes=new Uint8Array(l):t.bytes=new Uint8Array(l),n(null,t)}},rve=function(e){var t=e.segment,n=e.bytes,i=e.trackInfoFn,s=e.timingInfoFn,a=e.videoSegmentTimingInfoFn,o=e.audioSegmentTimingInfoFn,l=e.id3Fn,u=e.captionsFn,c=e.isEndOfTimeline,h=e.endedTimelineFn,m=e.dataFn,g=e.doneFn,y=e.onTransmuxerLog,v=t.map&&t.map.tracks||{},x=!!(v.audio&&v.video),w=s.bind(null,t,"audio","start"),E=s.bind(null,t,"audio","end"),D=s.bind(null,t,"video","start"),I=s.bind(null,t,"video","end"),A=function(){return qj({bytes:n,transmuxer:t.transmuxer,audioAppendStart:t.audioAppendStart,gopsToAlignWith:t.gopsToAlignWith,remux:x,onData:function(U){U.type=U.type==="combined"?"video":U.type,m(t,U)},onTrackInfo:function(U){i&&(x&&(U.isMuxed=!0),i(t,U))},onAudioTimingInfo:function(U){w&&typeof U.start<"u"&&(w(U.start),w=null),E&&typeof U.end<"u"&&E(U.end)},onVideoTimingInfo:function(U){D&&typeof U.start<"u"&&(D(U.start),D=null),I&&typeof U.end<"u"&&I(U.end)},onVideoSegmentTimingInfo:function(U){a(U)},onAudioSegmentTimingInfo:function(U){o(U)},onId3:function(U,B){l(t,U,B)},onCaptions:function(U){u(t,[U])},isEndOfTimeline:c,onEndedTimeline:function(){h()},onTransmuxerLog:y,onDone:function(U){g&&(U.type=U.type==="combined"?"video":U.type,g(null,t,U))}})};Hx({action:"probeTs",transmuxer:t.transmuxer,data:n,baseStartTime:t.baseStartTime,callback:function(N){t.bytes=n=N.data;var U=N.result;U&&(i(t,{hasAudio:U.hasAudio,hasVideo:U.hasVideo,isMuxed:x}),i=null,U.hasAudio&&!x&&w(U.audioStart),U.hasVideo&&D(U.videoStart),w=null,D=null),A()}})},Kj=function(e){var t=e.segment,n=e.bytes,i=e.trackInfoFn,s=e.timingInfoFn,a=e.videoSegmentTimingInfoFn,o=e.audioSegmentTimingInfoFn,l=e.id3Fn,u=e.captionsFn,c=e.isEndOfTimeline,h=e.endedTimelineFn,m=e.dataFn,g=e.doneFn,y=e.onTransmuxerLog,v=new Uint8Array(n);if(xme(v)){t.isFmp4=!0;var x=t.map.tracks,w={isFmp4:!0,hasVideo:!!x.video,hasAudio:!!x.audio};x.audio&&x.audio.codec&&x.audio.codec!=="enca"&&(w.audioCodec=x.audio.codec),x.video&&x.video.codec&&x.video.codec!=="encv"&&(w.videoCodec=x.video.codec),x.video&&x.audio&&(w.isMuxed=!0),i(t,w);var E=function(I){m(t,{data:v,type:w.hasAudio&&!w.isMuxed?"audio":"video"}),I&&I.length&&u(t,I),g(null,t,{})};Hx({action:"probeMp4StartTime",timescales:t.map.timescales,data:v,transmuxer:t.transmuxer,callback:function(I){var A=I.data,L=I.startTime;if(n=A.buffer,t.bytes=v=A,w.hasAudio&&!w.isMuxed&&s(t,"audio","start",L),w.hasVideo&&s(t,"video","start",L),!x.video||!A.byteLength||!t.transmuxer){E();return}Hx({action:"pushMp4Captions",endAction:"mp4Captions",transmuxer:t.transmuxer,data:v,timescales:t.map.timescales,trackIds:[x.video.id],callback:function(U){n=U.data.buffer,t.bytes=v=U.data,U.logs.forEach(function(B){y(Le.mergeOptions(B,{stream:"mp4CaptionParser"}))}),E(U.captions)}})}});return}if(!t.transmuxer){g(null,t,{});return}if(typeof t.container>"u"&&(t.container=Fk(v)),t.container!=="ts"&&t.container!=="aac"){i(t,{hasAudio:!1,hasVideo:!1}),g(null,t,{});return}rve({segment:t,bytes:n,trackInfoFn:i,timingInfoFn:s,videoSegmentTimingInfoFn:a,audioSegmentTimingInfoFn:o,id3Fn:l,captionsFn:u,isEndOfTimeline:c,endedTimelineFn:h,dataFn:m,doneFn:g,onTransmuxerLog:y})},Xj=function(e,t){var n=e.id,i=e.key,s=e.encryptedBytes,a=e.decryptionWorker,o=function u(c){if(c.data.source===n){a.removeEventListener("message",u);var h=c.data.decrypted;t(new Uint8Array(h.bytes,h.byteOffset,h.byteLength))}};a.addEventListener("message",o);var l;i.bytes.slice?l=i.bytes.slice():l=new Uint32Array(Array.prototype.slice.call(i.bytes)),a.postMessage(Oj({source:n,encrypted:s,key:l,iv:i.iv}),[s.buffer,l.buffer])},nve=function(e){var t=e.decryptionWorker,n=e.segment,i=e.trackInfoFn,s=e.timingInfoFn,a=e.videoSegmentTimingInfoFn,o=e.audioSegmentTimingInfoFn,l=e.id3Fn,u=e.captionsFn,c=e.isEndOfTimeline,h=e.endedTimelineFn,m=e.dataFn,g=e.doneFn,y=e.onTransmuxerLog;Xj({id:n.requestId,key:n.key,encryptedBytes:n.encryptedBytes,decryptionWorker:t},function(v){n.bytes=v,Kj({segment:n,bytes:n.bytes,trackInfoFn:i,timingInfoFn:s,videoSegmentTimingInfoFn:a,audioSegmentTimingInfoFn:o,id3Fn:l,captionsFn:u,isEndOfTimeline:c,endedTimelineFn:h,dataFn:m,doneFn:g,onTransmuxerLog:y})})},ive=function(e){var t=e.activeXhrs,n=e.decryptionWorker,i=e.trackInfoFn,s=e.timingInfoFn,a=e.videoSegmentTimingInfoFn,o=e.audioSegmentTimingInfoFn,l=e.id3Fn,u=e.captionsFn,c=e.isEndOfTimeline,h=e.endedTimelineFn,m=e.dataFn,g=e.doneFn,y=e.onTransmuxerLog,v=0,x=!1;return function(w,E){if(!x){if(w)return x=!0,AE(t),g(w,E);if(v+=1,v===t.length){var D=function(){if(E.encryptedBytes)return nve({decryptionWorker:n,segment:E,trackInfoFn:i,timingInfoFn:s,videoSegmentTimingInfoFn:a,audioSegmentTimingInfoFn:o,id3Fn:l,captionsFn:u,isEndOfTimeline:c,endedTimelineFn:h,dataFn:m,doneFn:g,onTransmuxerLog:y});Kj({segment:E,bytes:E.bytes,trackInfoFn:i,timingInfoFn:s,videoSegmentTimingInfoFn:a,audioSegmentTimingInfoFn:o,id3Fn:l,captionsFn:u,isEndOfTimeline:c,endedTimelineFn:h,dataFn:m,doneFn:g,onTransmuxerLog:y})};if(E.endOfAllRequests=Date.now(),E.map&&E.map.encryptedBytes&&!E.map.bytes)return Xj({decryptionWorker:n,id:E.requestId+"-init",encryptedBytes:E.map.encryptedBytes,key:E.map.key},function(I){E.map.bytes=I,Gj(E,function(A){if(A)return AE(t),g(A,E);D()})});D()}}}},sve=function(e){var t=e.loadendState,n=e.abortFn;return function(i){var s=i.target;s.aborted&&n&&!t.calledAbortFn&&(n(),t.calledAbortFn=!0)}},ave=function(e){var t=e.segment,n=e.progressFn;return function(i){var s=i.target;if(!s.aborted)return t.stats=Le.mergeOptions(t.stats,Zge(i)),!t.stats.firstBytesReceivedAt&&t.stats.bytesReceived&&(t.stats.firstBytesReceivedAt=Date.now()),n(i,t)}},ove=function(e){var t=e.xhr,n=e.xhrOptions,i=e.decryptionWorker,s=e.segment,a=e.abortFn,o=e.progressFn,l=e.trackInfoFn,u=e.timingInfoFn,c=e.videoSegmentTimingInfoFn,h=e.audioSegmentTimingInfoFn,m=e.id3Fn,g=e.captionsFn,y=e.isEndOfTimeline,v=e.endedTimelineFn,x=e.dataFn,w=e.doneFn,E=e.onTransmuxerLog,D=[],I=ive({activeXhrs:D,decryptionWorker:i,trackInfoFn:l,timingInfoFn:u,videoSegmentTimingInfoFn:c,audioSegmentTimingInfoFn:h,id3Fn:m,captionsFn:g,isEndOfTimeline:y,endedTimelineFn:v,dataFn:x,doneFn:w,onTransmuxerLog:E});if(s.key&&!s.key.bytes){var A=[s.key];s.map&&!s.map.bytes&&s.map.key&&s.map.key.resolvedUri===s.key.resolvedUri&&A.push(s.map.key);var L=Le.mergeOptions(n,{uri:s.key.resolvedUri,responseType:"arraybuffer"}),N=X4(s,A,I),U=t(L,N);D.push(U)}if(s.map&&!s.map.bytes){var B=s.map.key&&(!s.key||s.key.resolvedUri!==s.map.key.resolvedUri);if(B){var k=Le.mergeOptions(n,{uri:s.map.key.resolvedUri,responseType:"arraybuffer"}),H=X4(s,[s.map.key],I),q=t(k,H);D.push(q)}var V=Le.mergeOptions(n,{uri:s.map.resolvedUri,responseType:"arraybuffer",headers:EE(s.map)}),Q=eve({segment:s,finishProcessingFn:I}),ie=t(V,Q);D.push(ie)}var le=Le.mergeOptions(n,{uri:s.part&&s.part.resolvedUri||s.resolvedUri,responseType:"arraybuffer",headers:EE(s)}),he=tve({segment:s,finishProcessingFn:I,responseType:le.responseType}),ae=t(le,he);ae.addEventListener("progress",ave({segment:s,progressFn:o})),D.push(ae);var ne={};return D.forEach(function(ue){ue.addEventListener("loadend",sve({loadendState:ne,abortFn:a}))}),function(){return AE(D)}},lve=Rl("CodecUtils"),uve=function(e){var t=e.attributes||{};if(t.CODECS)return tu(t.CODECS)},Yj=function(e,t){var n=t.attributes||{};return e&&e.mediaGroups&&e.mediaGroups.AUDIO&&n.AUDIO&&e.mediaGroups.AUDIO[n.AUDIO]},cve=function(e,t){if(!Yj(e,t))return!0;var n=t.attributes||{},i=e.mediaGroups.AUDIO[n.AUDIO];for(var s in i)if(!i[s].uri&&!i[s].playlists)return!0;return!1},Vx=function(e){var t={};return e.forEach(function(n){var i=n.mediaType,s=n.type,a=n.details;t[i]=t[i]||[],t[i].push(XU(""+s+a))}),Object.keys(t).forEach(function(n){if(t[n].length>1){lve("multiple "+n+" codecs found as attributes: "+t[n].join(", ")+". Setting playlist codecs to null so that we wait for mux.js to probe segments for real codecs."),t[n]=null;return}t[n]=t[n][0]}),t},Y4=function(e){var t=0;return e.audio&&t++,e.video&&t++,t},F0=function(e,t){var n=t.attributes||{},i=Vx(uve(t)||[]);if(Yj(e,t)&&!i.audio&&!cve(e,t)){var s=Vx(Zfe(e,n.AUDIO)||[]);s.audio&&(i.audio=s.audio)}return i},vy=Rl("PlaylistSelector"),Q4=function(e){if(!(!e||!e.playlist)){var t=e.playlist;return JSON.stringify({id:t.id,bandwidth:e.bandwidth,width:e.width,height:e.height,codecs:t.attributes&&t.attributes.CODECS||""})}},Wx=function(e,t){if(!e)return"";var n=X.getComputedStyle(e);return n?n[t]:""},_p=function(e,t){var n=e.slice();e.sort(function(i,s){var a=t(i,s);return a===0?n.indexOf(i)-n.indexOf(s):a})},yA=function(e,t){var n,i;return e.attributes.BANDWIDTH&&(n=e.attributes.BANDWIDTH),n=n||X.Number.MAX_VALUE,t.attributes.BANDWIDTH&&(i=t.attributes.BANDWIDTH),i=i||X.Number.MAX_VALUE,n-i},dve=function(e,t){var n,i;return e.attributes.RESOLUTION&&e.attributes.RESOLUTION.width&&(n=e.attributes.RESOLUTION.width),n=n||X.Number.MAX_VALUE,t.attributes.RESOLUTION&&t.attributes.RESOLUTION.width&&(i=t.attributes.RESOLUTION.width),i=i||X.Number.MAX_VALUE,n===i&&e.attributes.BANDWIDTH&&t.attributes.BANDWIDTH?e.attributes.BANDWIDTH-t.attributes.BANDWIDTH:n-i},Qj=function(e,t,n,i,s,a){if(e){var o={bandwidth:t,width:n,height:i,limitRenditionByPlayerDimensions:s},l=e.playlists;Ma.isAudioOnly(e)&&(l=a.getAudioTrackPlaylists_(),o.audioOnly=!0);var u=l.map(function(k){var H,q=k.attributes&&k.attributes.RESOLUTION&&k.attributes.RESOLUTION.width,V=k.attributes&&k.attributes.RESOLUTION&&k.attributes.RESOLUTION.height;return H=k.attributes&&k.attributes.BANDWIDTH,H=H||X.Number.MAX_VALUE,{bandwidth:H,width:q,height:V,playlist:k}});_p(u,function(k,H){return k.bandwidth-H.bandwidth}),u=u.filter(function(k){return!Ma.isIncompatible(k.playlist)});var c=u.filter(function(k){return Ma.isEnabled(k.playlist)});c.length||(c=u.filter(function(k){return!Ma.isDisabled(k.playlist)}));var h=c.filter(function(k){return k.bandwidth*Qi.BANDWIDTH_VARIANCE<t}),m=h[h.length-1],g=h.filter(function(k){return k.bandwidth===m.bandwidth})[0];if(s===!1){var y=g||c[0]||u[0];if(y&&y.playlist){var v="sortedPlaylistReps";return g&&(v="bandwidthBestRep"),c[0]&&(v="enabledPlaylistReps"),vy("choosing "+Q4(y)+" using "+v+" with options",o),y.playlist}return vy("could not choose a playlist with options",o),null}var x=h.filter(function(k){return k.width&&k.height});_p(x,function(k,H){return k.width-H.width});var w=x.filter(function(k){return k.width===n&&k.height===i});m=w[w.length-1];var E=w.filter(function(k){return k.bandwidth===m.bandwidth})[0],D,I,A;E||(D=x.filter(function(k){return k.width>n||k.height>i}),I=D.filter(function(k){return k.width===D[0].width&&k.height===D[0].height}),m=I[I.length-1],A=I.filter(function(k){return k.bandwidth===m.bandwidth})[0]);var L;if(a.experimentalLeastPixelDiffSelector){var N=x.map(function(k){return k.pixelDiff=Math.abs(k.width-n)+Math.abs(k.height-i),k});_p(N,function(k,H){return k.pixelDiff===H.pixelDiff?H.bandwidth-k.bandwidth:k.pixelDiff-H.pixelDiff}),L=N[0]}var U=L||A||E||g||c[0]||u[0];if(U&&U.playlist){var B="sortedPlaylistReps";return L?B="leastPixelDiffRep":A?B="resolutionPlusOneRep":E?B="resolutionBestRep":g?B="bandwidthBestRep":c[0]&&(B="enabledPlaylistReps"),vy("choosing "+Q4(U)+" using "+B+" with options",o),U.playlist}return vy("could not choose a playlist with options",o),null}},J4=function(){var e=this.useDevicePixelRatio&&X.devicePixelRatio||1;return Qj(this.playlists.master,this.systemBandwidth,parseInt(Wx(this.tech_.el(),"width"),10)*e,parseInt(Wx(this.tech_.el(),"height"),10)*e,this.limitRenditionByPlayerDimensions,this.masterPlaylistController_)},hve=function(e){var t=-1,n=-1;if(e<0||e>1)throw new Error("Moving average bandwidth decay must be between 0 and 1.");return function(){var i=this.useDevicePixelRatio&&X.devicePixelRatio||1;return t<0&&(t=this.systemBandwidth,n=this.systemBandwidth),this.systemBandwidth>0&&this.systemBandwidth!==n&&(t=e*this.systemBandwidth+(1-e)*t,n=this.systemBandwidth),Qj(this.playlists.master,t,parseInt(Wx(this.tech_.el(),"width"),10)*i,parseInt(Wx(this.tech_.el(),"height"),10)*i,this.limitRenditionByPlayerDimensions,this.masterPlaylistController_)}},fve=function(e){var t=e.master,n=e.currentTime,i=e.bandwidth,s=e.duration,a=e.segmentDuration,o=e.timeUntilRebuffer,l=e.currentTimeline,u=e.syncController,c=t.playlists.filter(function(v){return!Ma.isIncompatible(v)}),h=c.filter(Ma.isEnabled);h.length||(h=c.filter(function(v){return!Ma.isDisabled(v)}));var m=h.filter(Ma.hasAttribute.bind(null,"BANDWIDTH")),g=m.map(function(v){var x=u.getSyncPoint(v,s,l,n),w=x?1:2,E=Ma.estimateSegmentRequestTime(a,i,v),D=E*w-o;return{playlist:v,rebufferingImpact:D}}),y=g.filter(function(v){return v.rebufferingImpact<=0});return _p(y,function(v,x){return yA(x.playlist,v.playlist)}),y.length?y[0]:(_p(g,function(v,x){return v.rebufferingImpact-x.rebufferingImpact}),g[0]||null)},pve=function(){var e=this,t=this.playlists.master.playlists.filter(Ma.isEnabled);_p(t,function(i,s){return yA(i,s)});var n=t.filter(function(i){return!!F0(e.playlists.master,i).video});return n[0]||null},mve=function(e){var t=0,n;return e.bytes&&(n=new Uint8Array(e.bytes),e.segments.forEach(function(i){n.set(i,t),t+=i.byteLength})),n},gve=function(e,t,n){if(!e[n]){t.trigger({type:"usage",name:"vhs-608"}),t.trigger({type:"usage",name:"hls-608"});var i=n;/^cc708_/.test(n)&&(i="SERVICE"+n.split("_")[1]);var s=t.textTracks().getTrackById(i);if(s)e[n]=s;else{var a=t.options_.vhs&&t.options_.vhs.captionServices||{},o=n,l=n,u=!1,c=a[i];c&&(o=c.label,l=c.language,u=c.default),e[n]=t.addRemoteTextTrack({kind:"captions",id:i,default:u,label:o,language:l},!1).track}}},vve=function(e){var t=e.inbandTextTracks,n=e.captionArray,i=e.timestampOffset;if(n){var s=X.WebKitDataCue||X.VTTCue;n.forEach(function(a){var o=a.stream;t[o].addCue(new s(a.startTime+i,a.endTime+i,a.text))})}},yve=function(e){Object.defineProperties(e.frame,{id:{get:function(){return Le.log.warn("cue.frame.id is deprecated. Use cue.value.key instead."),e.value.key}},value:{get:function(){return Le.log.warn("cue.frame.value is deprecated. Use cue.value.data instead."),e.value.data}},privateData:{get:function(){return Le.log.warn("cue.frame.privateData is deprecated. Use cue.value.data instead."),e.value.data}}})},_ve=function(e){var t=e.inbandTextTracks,n=e.metadataArray,i=e.timestampOffset,s=e.videoDuration;if(n){var a=X.WebKitDataCue||X.VTTCue,o=t.metadataTrack_;if(o&&(n.forEach(function(g){var y=g.cueTime+i;typeof y!="number"||X.isNaN(y)||y<0||!(y<1/0)||g.frames.forEach(function(v){var x=new a(y,y,v.value||v.url||v.data||"");x.frame=v,x.value=v,yve(x),o.addCue(x)})}),!(!o.cues||!o.cues.length))){for(var l=o.cues,u=[],c=0;c<l.length;c++)l[c]&&u.push(l[c]);var h=u.reduce(function(g,y){var v=g[y.startTime]||[];return v.push(y),g[y.startTime]=v,g},{}),m=Object.keys(h).sort(function(g,y){return Number(g)-Number(y)});m.forEach(function(g,y){var v=h[g],x=Number(m[y+1])||s;v.forEach(function(w){w.endTime=x})})}}},xve=function(e,t,n){e.metadataTrack_||(e.metadataTrack_=n.addRemoteTextTrack({kind:"metadata",label:"Timed Metadata"},!1).track,e.metadataTrack_.inBandMetadataTrackDispatchType=t)},y0=function(e,t,n){var i,s;if(n&&n.cues)for(i=n.cues.length;i--;)s=n.cues[i],s.startTime>=e&&s.endTime<=t&&n.removeCue(s)},bve=function(e){var t=e.cues;if(t)for(var n=0;n<t.length;n++){for(var i=[],s=0,a=0;a<t.length;a++)t[n].startTime===t[a].startTime&&t[n].endTime===t[a].endTime&&t[n].text===t[a].text&&(s++,s>1&&i.push(t[a]));i.length&&i.forEach(function(o){return e.removeCue(o)})}},Sve=function(e,t,n){if(typeof t>"u"||t===null||!e.length)return[];var i=Math.ceil((t-n+3)*Ix.ONE_SECOND_IN_TS),s;for(s=0;s<e.length&&!(e[s].pts>i);s++);return e.slice(s)},Tve=function(e,t,n){if(!t.length)return e;if(n)return t.slice();var i=t[0].pts,s=0;for(s;s<e.length&&!(e[s].pts>=i);s++);return e.slice(0,s).concat(t)},Cve=function(e,t,n,i){for(var s=Math.ceil((t-i)*Ix.ONE_SECOND_IN_TS),a=Math.ceil((n-i)*Ix.ONE_SECOND_IN_TS),o=e.slice(),l=e.length;l--&&!(e[l].pts<=a););if(l===-1)return o;for(var u=l+1;u--&&!(e[u].pts<=s););return u=Math.max(u,0),o.splice(u,l-u+1),o},wve=function(e,t){if(!e&&!t||!e&&t||e&&!t)return!1;if(e===t)return!0;var n=Object.keys(e).sort(),i=Object.keys(t).sort();if(n.length!==i.length)return!1;for(var s=0;s<n.length;s++){var a=n[s];if(a!==i[s]||e[a]!==t[a])return!1}return!0},Jj=22,Eve=function(e,t,n){t=t||[];for(var i=[],s=0,a=0;a<t.length;a++){var o=t[a];if(e===o.timeline&&(i.push(a),s+=o.duration,s>n))return a}return i.length===0?0:i[i.length-1]},s0=1,kve=500,Z4=function(e){return typeof e=="number"&&isFinite(e)},yy=1/60,Ave=function(e,t,n){return e!=="main"||!t||!n?null:!n.hasAudio&&!n.hasVideo?"Neither audio nor video found in segment.":t.hasVideo&&!n.hasVideo?"Only audio found in segment when we expected video. We can't switch to audio only from a stream that had video. To get rid of this message, please add codec information to the manifest.":!t.hasVideo&&n.hasVideo?"Video found in segment when we expected only audio. We can't switch to a stream with video from an audio only stream. To get rid of this message, please add codec information to the manifest.":null},Dve=function(e,t,n){var i=t-Qi.BACK_BUFFER_LENGTH;e.length&&(i=Math.max(i,e.start(0)));var s=t-n;return Math.min(s,i)},Mf=function(e){var t=e.startOfSegment,n=e.duration,i=e.segment,s=e.part,a=e.playlist,o=a.mediaSequence,l=a.id,u=a.segments,c=u===void 0?[]:u,h=e.mediaIndex,m=e.partIndex,g=e.timeline,y=c.length-1,v="mediaIndex/partIndex increment";e.getMediaInfoForTime?v="getMediaInfoForTime ("+e.getMediaInfoForTime+")":e.isSyncRequest&&(v="getSyncSegmentCandidate (isSyncRequest)"),e.independent&&(v+=" with independent "+e.independent);var x=typeof m=="number",w=e.segment.uri?"segment":"pre-segment",E=x?xj({preloadSegment:i})-1:0;return w+" ["+(o+h)+"/"+(o+y)+"]"+(x?" part ["+m+"/"+E+"]":"")+(" segment start/end ["+i.start+" => "+i.end+"]")+(x?" part start/end ["+s.start+" => "+s.end+"]":"")+(" startOfSegment ["+t+"]")+(" duration ["+n+"]")+(" timeline ["+g+"]")+(" selected by ["+v+"]")+(" playlist ["+l+"]")},e3=function(e){return e+"TimingInfo"},Ive=function(e){var t=e.segmentTimeline,n=e.currentTimeline,i=e.startOfSegment,s=e.buffered,a=e.overrideCheck;return!a&&t===n?null:t<n?i:s.length?s.end(s.length-1):i},t3=function(e){var t=e.timelineChangeController,n=e.currentTimeline,i=e.segmentTimeline,s=e.loaderType,a=e.audioDisabled;if(n===i)return!1;if(s==="audio"){var o=t.lastTimelineChange({type:"main"});return!o||o.to!==i}if(s==="main"&&a){var l=t.pendingTimelineChange({type:"audio"});return!(l&&l.to===i)}return!1},Pve=function(e){var t=0;return["video","audio"].forEach(function(n){var i=e[n+"TimingInfo"];if(i){var s=i.start,a=i.end,o;typeof s=="bigint"||typeof a=="bigint"?o=X.BigInt(a)-X.BigInt(s):typeof s=="number"&&typeof a=="number"&&(o=a-s),typeof o<"u"&&o>t&&(t=o)}}),typeof t=="bigint"&&t<Number.MAX_SAFE_INTEGER&&(t=Number(t)),t},r3=function(e){var t=e.segmentDuration,n=e.maxDuration;return t?Math.round(t)>n+Md:!1},Rve=function(e,t){if(t!=="hls")return null;var n=Pve({audioTimingInfo:e.audioTimingInfo,videoTimingInfo:e.videoTimingInfo});if(!n)return null;var i=e.playlist.targetDuration,s=r3({segmentDuration:n,maxDuration:i*2}),a=r3({segmentDuration:n,maxDuration:i}),o="Segment with index "+e.mediaIndex+" "+("from playlist "+e.playlist.id+" ")+("has a duration of "+n+" ")+("when the reported duration is "+e.duration+" ")+("and the target duration is "+i+". ")+"For HLS content, a duration in excess of the target duration may result in playback issues. See the HLS specification section on EXT-X-TARGETDURATION for more details: https://tools.ietf.org/html/draft-pantos-http-live-streaming-23#section-4.3.3.1";return s||a?{severity:s?"warn":"info",message:o}:null},DE=(function(r){$t(e,r);function e(n,i){var s;if(s=r.call(this)||this,!n)throw new TypeError("Initialization settings are required");if(typeof n.currentTime!="function")throw new TypeError("No currentTime getter specified");if(!n.mediaSource)throw new TypeError("No MediaSource specified");return s.bandwidth=n.bandwidth,s.throughput={rate:0,count:0},s.roundTrip=NaN,s.resetStats_(),s.mediaIndex=null,s.partIndex=null,s.hasPlayed_=n.hasPlayed,s.currentTime_=n.currentTime,s.seekable_=n.seekable,s.seeking_=n.seeking,s.duration_=n.duration,s.mediaSource_=n.mediaSource,s.vhs_=n.vhs,s.loaderType_=n.loaderType,s.currentMediaInfo_=void 0,s.startingMediaInfo_=void 0,s.segmentMetadataTrack_=n.segmentMetadataTrack,s.goalBufferLength_=n.goalBufferLength,s.sourceType_=n.sourceType,s.sourceUpdater_=n.sourceUpdater,s.inbandTextTracks_=n.inbandTextTracks,s.state_="INIT",s.timelineChangeController_=n.timelineChangeController,s.shouldSaveSegmentTimingInfo_=!0,s.parse708captions_=n.parse708captions,s.useDtsForTimestampOffset_=n.useDtsForTimestampOffset,s.captionServices_=n.captionServices,s.experimentalExactManifestTimings=n.experimentalExactManifestTimings,s.checkBufferTimeout_=null,s.error_=void 0,s.currentTimeline_=-1,s.pendingSegment_=null,s.xhrOptions_=null,s.pendingSegments_=[],s.audioDisabled_=!1,s.isPendingTimestampOffset_=!1,s.gopBuffer_=[],s.timeMapping_=0,s.safeAppend_=Le.browser.IE_VERSION>=11,s.appendInitSegment_={audio:!0,video:!0},s.playlistOfLastInitSegment_={audio:null,video:null},s.callQueue_=[],s.loadQueue_=[],s.metadataQueue_={id3:[],caption:[]},s.waitingOnRemove_=!1,s.quotaExceededErrorRetryTimeout_=null,s.activeInitSegmentId_=null,s.initSegments_={},s.cacheEncryptionKeys_=n.cacheEncryptionKeys,s.keyCache_={},s.decrypter_=n.decrypter,s.syncController_=n.syncController,s.syncPoint_={segmentIndex:0,time:0},s.transmuxer_=s.createTransmuxer_(),s.triggerSyncInfoUpdate_=function(){return s.trigger("syncinfoupdate")},s.syncController_.on("syncinfoupdate",s.triggerSyncInfoUpdate_),s.mediaSource_.addEventListener("sourceopen",function(){s.isEndOfStream_()||(s.ended_=!1)}),s.fetchAtBuffer_=!1,s.logger_=Rl("SegmentLoader["+s.loaderType_+"]"),Object.defineProperty(He(s),"state",{get:function(){return this.state_},set:function(o){o!==this.state_&&(this.logger_(this.state_+" -> "+o),this.state_=o,this.trigger("statechange"))}}),s.sourceUpdater_.on("ready",function(){s.hasEnoughInfoToAppend_()&&s.processCallQueue_()}),s.loaderType_==="main"&&s.timelineChangeController_.on("pendingtimelinechange",function(){s.hasEnoughInfoToAppend_()&&s.processCallQueue_()}),s.loaderType_==="audio"&&s.timelineChangeController_.on("timelinechange",function(){s.hasEnoughInfoToLoad_()&&s.processLoadQueue_(),s.hasEnoughInfoToAppend_()&&s.processCallQueue_()}),s}var t=e.prototype;return t.createTransmuxer_=function(){return kC.createTransmuxer({remux:!1,alignGopsAtEnd:this.safeAppend_,keepOriginalTimestamps:!0,parse708captions:this.parse708captions_,captionServices:this.captionServices_})},t.resetStats_=function(){this.mediaBytesTransferred=0,this.mediaRequests=0,this.mediaRequestsAborted=0,this.mediaRequestsTimedout=0,this.mediaRequestsErrored=0,this.mediaTransferDuration=0,this.mediaSecondsLoaded=0,this.mediaAppends=0},t.dispose=function(){this.trigger("dispose"),this.state="DISPOSED",this.pause(),this.abort_(),this.transmuxer_&&this.transmuxer_.terminate(),this.resetStats_(),this.checkBufferTimeout_&&X.clearTimeout(this.checkBufferTimeout_),this.syncController_&&this.triggerSyncInfoUpdate_&&this.syncController_.off("syncinfoupdate",this.triggerSyncInfoUpdate_),this.off()},t.setAudio=function(i){this.audioDisabled_=!i,i?this.appendInitSegment_.audio=!0:this.sourceUpdater_.removeAudio(0,this.duration_())},t.abort=function(){if(this.state!=="WAITING"){this.pendingSegment_&&(this.pendingSegment_=null);return}this.abort_(),this.state="READY",this.paused()||this.monitorBuffer_()},t.abort_=function(){this.pendingSegment_&&this.pendingSegment_.abortRequests&&this.pendingSegment_.abortRequests(),this.pendingSegment_=null,this.callQueue_=[],this.loadQueue_=[],this.metadataQueue_.id3=[],this.metadataQueue_.caption=[],this.timelineChangeController_.clearPendingTimelineChange(this.loaderType_),this.waitingOnRemove_=!1,X.clearTimeout(this.quotaExceededErrorRetryTimeout_),this.quotaExceededErrorRetryTimeout_=null},t.checkForAbort_=function(i){return this.state==="APPENDING"&&!this.pendingSegment_?(this.state="READY",!0):!this.pendingSegment_||this.pendingSegment_.requestId!==i},t.error=function(i){return typeof i<"u"&&(this.logger_("error occurred:",i),this.error_=i),this.pendingSegment_=null,this.error_},t.endOfStream=function(){this.ended_=!0,this.transmuxer_&&kC.reset(this.transmuxer_),this.gopBuffer_.length=0,this.pause(),this.trigger("ended")},t.buffered_=function(){var i=this.getMediaInfo_();if(!this.sourceUpdater_||!i)return Le.createTimeRanges();if(this.loaderType_==="main"){var s=i.hasAudio,a=i.hasVideo,o=i.isMuxed;if(a&&s&&!this.audioDisabled_&&!o)return this.sourceUpdater_.buffered();if(a)return this.sourceUpdater_.videoBuffered()}return this.sourceUpdater_.audioBuffered()},t.initSegmentForMap=function(i,s){if(s===void 0&&(s=!1),!i)return null;var a=zx(i),o=this.initSegments_[a];return s&&!o&&i.bytes&&(this.initSegments_[a]=o={resolvedUri:i.resolvedUri,byterange:i.byterange,bytes:i.bytes,tracks:i.tracks,timescales:i.timescales}),o||i},t.segmentKey=function(i,s){if(s===void 0&&(s=!1),!i)return null;var a=Mj(i),o=this.keyCache_[a];this.cacheEncryptionKeys_&&s&&!o&&i.bytes&&(this.keyCache_[a]=o={resolvedUri:i.resolvedUri,bytes:i.bytes});var l={resolvedUri:(o||i).resolvedUri};return o&&(l.bytes=o.bytes),l},t.couldBeginLoading_=function(){return this.playlist_&&!this.paused()},t.load=function(){if(this.monitorBuffer_(),!!this.playlist_){if(this.state==="INIT"&&this.couldBeginLoading_())return this.init_();!this.couldBeginLoading_()||this.state!=="READY"&&this.state!=="INIT"||(this.state="READY")}},t.init_=function(){return this.state="READY",this.resetEverything(),this.monitorBuffer_()},t.playlist=function(i,s){if(s===void 0&&(s={}),!!i){var a=this.playlist_,o=this.pendingSegment_;this.playlist_=i,this.xhrOptions_=s,this.state==="INIT"&&(i.syncInfo={mediaSequence:i.mediaSequence,time:0},this.loaderType_==="main"&&this.syncController_.setDateTimeMappingForStart(i));var l=null;if(a&&(a.id?l=a.id:a.uri&&(l=a.uri)),this.logger_("playlist update ["+l+" => "+(i.id||i.uri)+"]"),this.trigger("syncinfoupdate"),this.state==="INIT"&&this.couldBeginLoading_())return this.init_();if(!a||a.uri!==i.uri){this.mediaIndex!==null&&(i.endList?this.resyncLoader():this.resetLoader()),this.currentMediaInfo_=void 0,this.trigger("playlistupdate");return}var u=i.mediaSequence-a.mediaSequence;if(this.logger_("live window shift ["+u+"]"),this.mediaIndex!==null)if(this.mediaIndex-=u,this.mediaIndex<0)this.mediaIndex=null,this.partIndex=null;else{var c=this.playlist_.segments[this.mediaIndex];if(this.partIndex&&(!c.parts||!c.parts.length||!c.parts[this.partIndex])){var h=this.mediaIndex;this.logger_("currently processing part (index "+this.partIndex+") no longer exists."),this.resetLoader(),this.mediaIndex=h}}o&&(o.mediaIndex-=u,o.mediaIndex<0?(o.mediaIndex=null,o.partIndex=null):(o.mediaIndex>=0&&(o.segment=i.segments[o.mediaIndex]),o.partIndex>=0&&o.segment.parts&&(o.part=o.segment.parts[o.partIndex]))),this.syncController_.saveExpiredSegmentInfo(a,i)}},t.pause=function(){this.checkBufferTimeout_&&(X.clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=null)},t.paused=function(){return this.checkBufferTimeout_===null},t.resetEverything=function(i){this.ended_=!1,this.activeInitSegmentId_=null,this.appendInitSegment_={audio:!0,video:!0},this.resetLoader(),this.remove(0,1/0,i),this.transmuxer_&&(this.transmuxer_.postMessage({action:"clearAllMp4Captions"}),this.transmuxer_.postMessage({action:"reset"}))},t.resetLoader=function(){this.fetchAtBuffer_=!1,this.resyncLoader()},t.resyncLoader=function(){this.transmuxer_&&kC.reset(this.transmuxer_),this.mediaIndex=null,this.partIndex=null,this.syncPoint_=null,this.isPendingTimestampOffset_=!1,this.callQueue_=[],this.loadQueue_=[],this.metadataQueue_.id3=[],this.metadataQueue_.caption=[],this.abort(),this.transmuxer_&&this.transmuxer_.postMessage({action:"clearParsedMp4Captions"})},t.remove=function(i,s,a,o){if(a===void 0&&(a=function(){}),o===void 0&&(o=!1),s===1/0&&(s=this.duration_()),s<=i){this.logger_("skipping remove because end ${end} is <= start ${start}");return}if(!this.sourceUpdater_||!this.getMediaInfo_()){this.logger_("skipping remove because no source updater or starting media info");return}var l=1,u=function(){l--,l===0&&a()};(o||!this.audioDisabled_)&&(l++,this.sourceUpdater_.removeAudio(i,s,u)),(o||this.loaderType_==="main")&&(this.gopBuffer_=Cve(this.gopBuffer_,i,s,this.timeMapping_),l++,this.sourceUpdater_.removeVideo(i,s,u));for(var c in this.inbandTextTracks_)y0(i,s,this.inbandTextTracks_[c]);y0(i,s,this.segmentMetadataTrack_),u()},t.monitorBuffer_=function(){this.checkBufferTimeout_&&X.clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=X.setTimeout(this.monitorBufferTick_.bind(this),1)},t.monitorBufferTick_=function(){this.state==="READY"&&this.fillBuffer_(),this.checkBufferTimeout_&&X.clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=X.setTimeout(this.monitorBufferTick_.bind(this),kve)},t.fillBuffer_=function(){if(!this.sourceUpdater_.updating()){var i=this.chooseNextRequest_();i&&(typeof i.timestampOffset=="number"&&(this.isPendingTimestampOffset_=!1,this.timelineChangeController_.pendingTimelineChange({type:this.loaderType_,from:this.currentTimeline_,to:i.timeline})),this.loadSegment_(i))}},t.isEndOfStream_=function(i,s,a){if(i===void 0&&(i=this.mediaIndex),s===void 0&&(s=this.playlist_),a===void 0&&(a=this.partIndex),!s||!this.mediaSource_)return!1;var o=typeof i=="number"&&s.segments[i],l=i+1===s.segments.length,u=!o||!o.parts||a+1===o.parts.length;return s.endList&&this.mediaSource_.readyState==="open"&&l&&u},t.chooseNextRequest_=function(){var i=this.buffered_(),s=H4(i)||0,a=hA(i,this.currentTime_()),o=!this.hasPlayed_()&&a>=1,l=a>=this.goalBufferLength_(),u=this.playlist_.segments;if(!u.length||o||l)return null;this.syncPoint_=this.syncPoint_||this.syncController_.getSyncPoint(this.playlist_,this.duration_(),this.currentTimeline_,this.currentTime_());var c={partIndex:null,mediaIndex:null,startOfSegment:null,playlist:this.playlist_,isSyncRequest:!this.syncPoint_};if(c.isSyncRequest)c.mediaIndex=Eve(this.currentTimeline_,u,s);else if(this.mediaIndex!==null){var h=u[this.mediaIndex],m=typeof this.partIndex=="number"?this.partIndex:-1;c.startOfSegment=h.end?h.end:s,h.parts&&h.parts[m+1]?(c.mediaIndex=this.mediaIndex,c.partIndex=m+1):c.mediaIndex=this.mediaIndex+1}else{var g=Ma.getMediaInfoForTime({experimentalExactManifestTimings:this.experimentalExactManifestTimings,playlist:this.playlist_,currentTime:this.fetchAtBuffer_?s:this.currentTime_(),startingPartIndex:this.syncPoint_.partIndex,startingSegmentIndex:this.syncPoint_.segmentIndex,startTime:this.syncPoint_.time}),y=g.segmentIndex,v=g.startTime,x=g.partIndex;c.getMediaInfoForTime=this.fetchAtBuffer_?"bufferedEnd "+s:"currentTime "+this.currentTime_(),c.mediaIndex=y,c.startOfSegment=v,c.partIndex=x}var w=u[c.mediaIndex],E=w&&typeof c.partIndex=="number"&&w.parts&&w.parts[c.partIndex];if(!w||typeof c.partIndex=="number"&&!E)return null;if(typeof c.partIndex!="number"&&w.parts&&(c.partIndex=0,E=w.parts[0]),!a&&E&&!E.independent)if(c.partIndex===0){var D=u[c.mediaIndex-1],I=D.parts&&D.parts.length&&D.parts[D.parts.length-1];I&&I.independent&&(c.mediaIndex-=1,c.partIndex=D.parts.length-1,c.independent="previous segment")}else w.parts[c.partIndex-1].independent&&(c.partIndex-=1,c.independent="previous part");var A=this.mediaSource_&&this.mediaSource_.readyState==="ended";return c.mediaIndex>=u.length-1&&A&&!this.seeking_()?null:this.generateSegmentInfo_(c)},t.generateSegmentInfo_=function(i){var s=i.independent,a=i.playlist,o=i.mediaIndex,l=i.startOfSegment,u=i.isSyncRequest,c=i.partIndex,h=i.forceTimestampOffset,m=i.getMediaInfoForTime,g=a.segments[o],y=typeof c=="number"&&g.parts[c],v={requestId:"segment-loader-"+Math.random(),uri:y&&y.resolvedUri||g.resolvedUri,mediaIndex:o,partIndex:y?c:null,isSyncRequest:u,startOfSegment:l,playlist:a,bytes:null,encryptedBytes:null,timestampOffset:null,timeline:g.timeline,duration:y&&y.duration||g.duration,segment:g,part:y,byteLength:0,transmuxer:this.transmuxer_,getMediaInfoForTime:m,independent:s},x=typeof h<"u"?h:this.isPendingTimestampOffset_;v.timestampOffset=this.timestampOffsetForSegment_({segmentTimeline:g.timeline,currentTimeline:this.currentTimeline_,startOfSegment:l,buffered:this.buffered_(),overrideCheck:x});var w=H4(this.sourceUpdater_.audioBuffered());return typeof w=="number"&&(v.audioAppendStart=w-this.sourceUpdater_.audioTimestampOffset()),this.sourceUpdater_.videoBuffered().length&&(v.gopsToAlignWith=Sve(this.gopBuffer_,this.currentTime_()-this.sourceUpdater_.videoTimestampOffset(),this.timeMapping_)),v},t.timestampOffsetForSegment_=function(i){return Ive(i)},t.earlyAbortWhenNeeded_=function(i){if(!(this.vhs_.tech_.paused()||!this.xhrOptions_.timeout||!this.playlist_.attributes.BANDWIDTH)&&!(Date.now()-(i.firstBytesReceivedAt||Date.now())<1e3)){var s=this.currentTime_(),a=i.bandwidth,o=this.pendingSegment_.duration,l=Ma.estimateSegmentRequestTime(o,a,this.playlist_,i.bytesReceived),u=Z0e(this.buffered_(),s,this.vhs_.tech_.playbackRate())-1;if(!(l<=u)){var c=fve({master:this.vhs_.playlists.master,currentTime:s,bandwidth:a,duration:this.duration_(),segmentDuration:o,timeUntilRebuffer:u,currentTimeline:this.currentTimeline_,syncController:this.syncController_});if(c){var h=l-u,m=h-c.rebufferingImpact,g=.5;u<=Md&&(g=1),!(!c.playlist||c.playlist.uri===this.playlist_.uri||m<g)&&(this.bandwidth=c.playlist.attributes.BANDWIDTH*Qi.BANDWIDTH_VARIANCE+1,this.trigger("earlyabort"))}}}},t.handleAbort_=function(i){this.logger_("Aborting "+Mf(i)),this.mediaRequestsAborted+=1},t.handleProgress_=function(i,s){this.earlyAbortWhenNeeded_(s.stats),!this.checkForAbort_(s.requestId)&&this.trigger("progress")},t.handleTrackInfo_=function(i,s){this.earlyAbortWhenNeeded_(i.stats),!this.checkForAbort_(i.requestId)&&(this.checkForIllegalMediaSwitch(s)||(s=s||{},wve(this.currentMediaInfo_,s)||(this.appendInitSegment_={audio:!0,video:!0},this.startingMediaInfo_=s,this.currentMediaInfo_=s,this.logger_("trackinfo update",s),this.trigger("trackinfo")),!this.checkForAbort_(i.requestId)&&(this.pendingSegment_.trackInfo=s,this.hasEnoughInfoToAppend_()&&this.processCallQueue_())))},t.handleTimingInfo_=function(i,s,a,o){if(this.earlyAbortWhenNeeded_(i.stats),!this.checkForAbort_(i.requestId)){var l=this.pendingSegment_,u=e3(s);l[u]=l[u]||{},l[u][a]=o,this.logger_("timinginfo: "+s+" - "+a+" - "+o),this.hasEnoughInfoToAppend_()&&this.processCallQueue_()}},t.handleCaptions_=function(i,s){var a=this;if(this.earlyAbortWhenNeeded_(i.stats),!this.checkForAbort_(i.requestId)){if(s.length===0){this.logger_("SegmentLoader received no captions from a caption event");return}var o=this.pendingSegment_;if(!o.hasAppendedData_){this.metadataQueue_.caption.push(this.handleCaptions_.bind(this,i,s));return}var l=this.sourceUpdater_.videoTimestampOffset()===null?this.sourceUpdater_.audioTimestampOffset():this.sourceUpdater_.videoTimestampOffset(),u={};s.forEach(function(c){u[c.stream]=u[c.stream]||{startTime:1/0,captions:[],endTime:0};var h=u[c.stream];h.startTime=Math.min(h.startTime,c.startTime+l),h.endTime=Math.max(h.endTime,c.endTime+l),h.captions.push(c)}),Object.keys(u).forEach(function(c){var h=u[c],m=h.startTime,g=h.endTime,y=h.captions,v=a.inbandTextTracks_;a.logger_("adding cues from "+m+" -> "+g+" for "+c),gve(v,a.vhs_.tech_,c),y0(m,g,v[c]),vve({captionArray:y,inbandTextTracks:v,timestampOffset:l})}),this.transmuxer_&&this.transmuxer_.postMessage({action:"clearParsedMp4Captions"})}},t.handleId3_=function(i,s,a){if(this.earlyAbortWhenNeeded_(i.stats),!this.checkForAbort_(i.requestId)){var o=this.pendingSegment_;if(!o.hasAppendedData_){this.metadataQueue_.id3.push(this.handleId3_.bind(this,i,s,a));return}var l=this.sourceUpdater_.videoTimestampOffset()===null?this.sourceUpdater_.audioTimestampOffset():this.sourceUpdater_.videoTimestampOffset();xve(this.inbandTextTracks_,a,this.vhs_.tech_),_ve({inbandTextTracks:this.inbandTextTracks_,metadataArray:s,timestampOffset:l,videoDuration:this.duration_()})}},t.processMetadataQueue_=function(){this.metadataQueue_.id3.forEach(function(i){return i()}),this.metadataQueue_.caption.forEach(function(i){return i()}),this.metadataQueue_.id3=[],this.metadataQueue_.caption=[]},t.processCallQueue_=function(){var i=this.callQueue_;this.callQueue_=[],i.forEach(function(s){return s()})},t.processLoadQueue_=function(){var i=this.loadQueue_;this.loadQueue_=[],i.forEach(function(s){return s()})},t.hasEnoughInfoToLoad_=function(){if(this.loaderType_!=="audio")return!0;var i=this.pendingSegment_;return i?this.getCurrentMediaInfo_()?!t3({timelineChangeController:this.timelineChangeController_,currentTimeline:this.currentTimeline_,segmentTimeline:i.timeline,loaderType:this.loaderType_,audioDisabled:this.audioDisabled_}):!0:!1},t.getCurrentMediaInfo_=function(i){return i===void 0&&(i=this.pendingSegment_),i&&i.trackInfo||this.currentMediaInfo_},t.getMediaInfo_=function(i){return i===void 0&&(i=this.pendingSegment_),this.getCurrentMediaInfo_(i)||this.startingMediaInfo_},t.getPendingSegmentPlaylist=function(){return this.pendingSegment_?this.pendingSegment_.playlist:null},t.hasEnoughInfoToAppend_=function(){if(!this.sourceUpdater_.ready()||this.waitingOnRemove_||this.quotaExceededErrorRetryTimeout_)return!1;var i=this.pendingSegment_,s=this.getCurrentMediaInfo_();if(!i||!s)return!1;var a=s.hasAudio,o=s.hasVideo,l=s.isMuxed;return!(o&&!i.videoTimingInfo||a&&!this.audioDisabled_&&!l&&!i.audioTimingInfo||t3({timelineChangeController:this.timelineChangeController_,currentTimeline:this.currentTimeline_,segmentTimeline:i.timeline,loaderType:this.loaderType_,audioDisabled:this.audioDisabled_}))},t.handleData_=function(i,s){if(this.earlyAbortWhenNeeded_(i.stats),!this.checkForAbort_(i.requestId)){if(this.callQueue_.length||!this.hasEnoughInfoToAppend_()){this.callQueue_.push(this.handleData_.bind(this,i,s));return}var a=this.pendingSegment_;if(this.setTimeMapping_(a.timeline),this.updateMediaSecondsLoaded_(a.part||a.segment),this.mediaSource_.readyState!=="closed"){if(i.map&&(i.map=this.initSegmentForMap(i.map,!0),a.segment.map=i.map),i.key&&this.segmentKey(i.key,!0),a.isFmp4=i.isFmp4,a.timingInfo=a.timingInfo||{},a.isFmp4)this.trigger("fmp4"),a.timingInfo.start=a[e3(s.type)].start;else{var o=this.getCurrentMediaInfo_(),l=this.loaderType_==="main"&&o&&o.hasVideo,u;l&&(u=a.videoTimingInfo.start),a.timingInfo.start=this.trueSegmentStart_({currentStart:a.timingInfo.start,playlist:a.playlist,mediaIndex:a.mediaIndex,currentVideoTimestampOffset:this.sourceUpdater_.videoTimestampOffset(),useVideoTimingInfo:l,firstVideoFrameTimeForData:u,videoTimingInfo:a.videoTimingInfo,audioTimingInfo:a.audioTimingInfo})}if(this.updateAppendInitSegmentStatus(a,s.type),this.updateSourceBufferTimestampOffset_(a),a.isSyncRequest){this.updateTimingInfoEnd_(a),this.syncController_.saveSegmentTimingInfo({segmentInfo:a,shouldSaveTimelineMapping:this.loaderType_==="main"});var c=this.chooseNextRequest_();if(c.mediaIndex!==a.mediaIndex||c.partIndex!==a.partIndex){this.logger_("sync segment was incorrect, not appending");return}this.logger_("sync segment was correct, appending")}a.hasAppendedData_=!0,this.processMetadataQueue_(),this.appendData_(a,s)}}},t.updateAppendInitSegmentStatus=function(i,s){this.loaderType_==="main"&&typeof i.timestampOffset=="number"&&!i.changedTimestampOffset&&(this.appendInitSegment_={audio:!0,video:!0}),this.playlistOfLastInitSegment_[s]!==i.playlist&&(this.appendInitSegment_[s]=!0)},t.getInitSegmentAndUpdateState_=function(i){var s=i.type,a=i.initSegment,o=i.map,l=i.playlist;if(o){var u=zx(o);if(this.activeInitSegmentId_===u)return null;a=this.initSegmentForMap(o,!0).bytes,this.activeInitSegmentId_=u}return a&&this.appendInitSegment_[s]?(this.playlistOfLastInitSegment_[s]=l,this.appendInitSegment_[s]=!1,this.activeInitSegmentId_=null,a):null},t.handleQuotaExceededError_=function(i,s){var a=this,o=i.segmentInfo,l=i.type,u=i.bytes,c=this.sourceUpdater_.audioBuffered(),h=this.sourceUpdater_.videoBuffered();c.length>1&&this.logger_("On QUOTA_EXCEEDED_ERR, found gaps in the audio buffer: "+Ah(c).join(", ")),h.length>1&&this.logger_("On QUOTA_EXCEEDED_ERR, found gaps in the video buffer: "+Ah(h).join(", "));var m=c.length?c.start(0):0,g=c.length?c.end(c.length-1):0,y=h.length?h.start(0):0,v=h.length?h.end(h.length-1):0;if(g-m<=s0&&v-y<=s0){this.logger_("On QUOTA_EXCEEDED_ERR, single segment too large to append to buffer, triggering an error. "+("Appended byte length: "+u.byteLength+", ")+("audio buffer: "+Ah(c).join(", ")+", ")+("video buffer: "+Ah(h).join(", ")+", ")),this.error({message:"Quota exceeded error with append of a single segment of content",excludeUntil:1/0}),this.trigger("error");return}this.waitingOnRemove_=!0,this.callQueue_.push(this.appendToSourceBuffer_.bind(this,{segmentInfo:o,type:l,bytes:u}));var x=this.currentTime_(),w=x-s0;this.logger_("On QUOTA_EXCEEDED_ERR, removing audio/video from 0 to "+w),this.remove(0,w,function(){a.logger_("On QUOTA_EXCEEDED_ERR, retrying append in "+s0+"s"),a.waitingOnRemove_=!1,a.quotaExceededErrorRetryTimeout_=X.setTimeout(function(){a.logger_("On QUOTA_EXCEEDED_ERR, re-processing call queue"),a.quotaExceededErrorRetryTimeout_=null,a.processCallQueue_()},s0*1e3)},!0)},t.handleAppendError_=function(i,s){var a=i.segmentInfo,o=i.type,l=i.bytes;if(s){if(s.code===Jj){this.handleQuotaExceededError_({segmentInfo:a,type:o,bytes:l});return}this.logger_("Received non QUOTA_EXCEEDED_ERR on append",s),this.error(o+" append of "+l.length+"b failed for segment "+("#"+a.mediaIndex+" in playlist "+a.playlist.id)),this.trigger("appenderror")}},t.appendToSourceBuffer_=function(i){var s=i.segmentInfo,a=i.type,o=i.initSegment,l=i.data,u=i.bytes;if(!u){var c=[l],h=l.byteLength;o&&(c.unshift(o),h+=o.byteLength),u=mve({bytes:h,segments:c})}this.sourceUpdater_.appendBuffer({segmentInfo:s,type:a,bytes:u},this.handleAppendError_.bind(this,{segmentInfo:s,type:a,bytes:u}))},t.handleSegmentTimingInfo_=function(i,s,a){if(!(!this.pendingSegment_||s!==this.pendingSegment_.requestId)){var o=this.pendingSegment_.segment,l=i+"TimingInfo";o[l]||(o[l]={}),o[l].transmuxerPrependedSeconds=a.prependedContentDuration||0,o[l].transmuxedPresentationStart=a.start.presentation,o[l].transmuxedDecodeStart=a.start.decode,o[l].transmuxedPresentationEnd=a.end.presentation,o[l].transmuxedDecodeEnd=a.end.decode,o[l].baseMediaDecodeTime=a.baseMediaDecodeTime}},t.appendData_=function(i,s){var a=s.type,o=s.data;if(!(!o||!o.byteLength)&&!(a==="audio"&&this.audioDisabled_)){var l=this.getInitSegmentAndUpdateState_({type:a,initSegment:s.initSegment,playlist:i.playlist,map:i.isFmp4?i.segment.map:null});this.appendToSourceBuffer_({segmentInfo:i,type:a,initSegment:l,data:o})}},t.loadSegment_=function(i){var s=this;if(this.state="WAITING",this.pendingSegment_=i,this.trimBackBuffer_(i),typeof i.timestampOffset=="number"&&this.transmuxer_&&this.transmuxer_.postMessage({action:"clearAllMp4Captions"}),!this.hasEnoughInfoToLoad_()){this.loadQueue_.push(function(){var a=tr({},i,{forceTimestampOffset:!0});tr(i,s.generateSegmentInfo_(a)),s.isPendingTimestampOffset_=!1,s.updateTransmuxerAndRequestSegment_(i)});return}this.updateTransmuxerAndRequestSegment_(i)},t.updateTransmuxerAndRequestSegment_=function(i){var s=this;this.shouldUpdateTransmuxerTimestampOffset_(i.timestampOffset)&&(this.gopBuffer_.length=0,i.gopsToAlignWith=[],this.timeMapping_=0,this.transmuxer_.postMessage({action:"reset"}),this.transmuxer_.postMessage({action:"setTimestampOffset",timestampOffset:i.timestampOffset}));var a=this.createSimplifiedSegmentObj_(i),o=this.isEndOfStream_(i.mediaIndex,i.playlist,i.partIndex),l=this.mediaIndex!==null,u=i.timeline!==this.currentTimeline_&&i.timeline>0,c=o||l&&u;this.logger_("Requesting "+Mf(i)),a.map&&!a.map.bytes&&(this.logger_("going to request init segment."),this.appendInitSegment_={video:!0,audio:!0}),i.abortRequests=ove({xhr:this.vhs_.xhr,xhrOptions:this.xhrOptions_,decryptionWorker:this.decrypter_,segment:a,abortFn:this.handleAbort_.bind(this,i),progressFn:this.handleProgress_.bind(this),trackInfoFn:this.handleTrackInfo_.bind(this),timingInfoFn:this.handleTimingInfo_.bind(this),videoSegmentTimingInfoFn:this.handleSegmentTimingInfo_.bind(this,"video",i.requestId),audioSegmentTimingInfoFn:this.handleSegmentTimingInfo_.bind(this,"audio",i.requestId),captionsFn:this.handleCaptions_.bind(this),isEndOfTimeline:c,endedTimelineFn:function(){s.logger_("received endedtimeline callback")},id3Fn:this.handleId3_.bind(this),dataFn:this.handleData_.bind(this),doneFn:this.segmentRequestFinished_.bind(this),onTransmuxerLog:function(m){var g=m.message,y=m.level,v=m.stream;s.logger_(Mf(i)+" logged from transmuxer stream "+v+" as a "+y+": "+g)}})},t.trimBackBuffer_=function(i){var s=Dve(this.seekable_(),this.currentTime_(),this.playlist_.targetDuration||10);s>0&&this.remove(0,s)},t.createSimplifiedSegmentObj_=function(i){var s=i.segment,a=i.part,o={resolvedUri:a?a.resolvedUri:s.resolvedUri,byterange:a?a.byterange:s.byterange,requestId:i.requestId,transmuxer:i.transmuxer,audioAppendStart:i.audioAppendStart,gopsToAlignWith:i.gopsToAlignWith,part:i.part},l=i.playlist.segments[i.mediaIndex-1];if(l&&l.timeline===s.timeline&&(l.videoTimingInfo?o.baseStartTime=l.videoTimingInfo.transmuxedDecodeEnd:l.audioTimingInfo&&(o.baseStartTime=l.audioTimingInfo.transmuxedDecodeEnd)),s.key){var u=s.key.iv||new Uint32Array([0,0,0,i.mediaIndex+i.playlist.mediaSequence]);o.key=this.segmentKey(s.key),o.key.iv=u}return s.map&&(o.map=this.initSegmentForMap(s.map)),o},t.saveTransferStats_=function(i){this.mediaRequests+=1,i&&(this.mediaBytesTransferred+=i.bytesReceived,this.mediaTransferDuration+=i.roundTripTime)},t.saveBandwidthRelatedStats_=function(i,s){if(this.pendingSegment_.byteLength=s.bytesReceived,i<yy){this.logger_("Ignoring segment's bandwidth because its duration of "+i+(" is less than the min to record "+yy));return}this.bandwidth=s.bandwidth,this.roundTrip=s.roundTripTime},t.handleTimeout_=function(){this.mediaRequestsTimedout+=1,this.bandwidth=1,this.roundTrip=NaN,this.trigger("bandwidthupdate"),this.trigger("timeout")},t.segmentRequestFinished_=function(i,s,a){if(this.callQueue_.length){this.callQueue_.push(this.segmentRequestFinished_.bind(this,i,s,a));return}if(this.saveTransferStats_(s.stats),!!this.pendingSegment_&&s.requestId===this.pendingSegment_.requestId){if(i){if(this.pendingSegment_=null,this.state="READY",i.code===vu.ABORTED)return;if(this.pause(),i.code===vu.TIMEOUT){this.handleTimeout_();return}this.mediaRequestsErrored+=1,this.error(i),this.trigger("error");return}var o=this.pendingSegment_;this.saveBandwidthRelatedStats_(o.duration,s.stats),o.endOfAllRequests=s.endOfAllRequests,a.gopInfo&&(this.gopBuffer_=Tve(this.gopBuffer_,a.gopInfo,this.safeAppend_)),this.state="APPENDING",this.trigger("appending"),this.waitForAppendsToComplete_(o)}},t.setTimeMapping_=function(i){var s=this.syncController_.mappingForTimeline(i);s!==null&&(this.timeMapping_=s)},t.updateMediaSecondsLoaded_=function(i){typeof i.start=="number"&&typeof i.end=="number"?this.mediaSecondsLoaded+=i.end-i.start:this.mediaSecondsLoaded+=i.duration},t.shouldUpdateTransmuxerTimestampOffset_=function(i){return i===null?!1:this.loaderType_==="main"&&i!==this.sourceUpdater_.videoTimestampOffset()||!this.audioDisabled_&&i!==this.sourceUpdater_.audioTimestampOffset()},t.trueSegmentStart_=function(i){var s=i.currentStart,a=i.playlist,o=i.mediaIndex,l=i.firstVideoFrameTimeForData,u=i.currentVideoTimestampOffset,c=i.useVideoTimingInfo,h=i.videoTimingInfo,m=i.audioTimingInfo;if(typeof s<"u")return s;if(!c)return m.start;var g=a.segments[o-1];return o===0||!g||typeof g.start>"u"||g.end!==l+u?l:h.start},t.waitForAppendsToComplete_=function(i){var s=this.getCurrentMediaInfo_(i);if(!s){this.error({message:"No starting media returned, likely due to an unsupported media format.",blacklistDuration:1/0}),this.trigger("error");return}var a=s.hasAudio,o=s.hasVideo,l=s.isMuxed,u=this.loaderType_==="main"&&o,c=!this.audioDisabled_&&a&&!l;if(i.waitingOnAppends=0,!i.hasAppendedData_){!i.timingInfo&&typeof i.timestampOffset=="number"&&(this.isPendingTimestampOffset_=!0),i.timingInfo={start:0},i.waitingOnAppends++,this.isPendingTimestampOffset_||(this.updateSourceBufferTimestampOffset_(i),this.processMetadataQueue_()),this.checkAppendsDone_(i);return}u&&i.waitingOnAppends++,c&&i.waitingOnAppends++,u&&this.sourceUpdater_.videoQueueCallback(this.checkAppendsDone_.bind(this,i)),c&&this.sourceUpdater_.audioQueueCallback(this.checkAppendsDone_.bind(this,i))},t.checkAppendsDone_=function(i){this.checkForAbort_(i.requestId)||(i.waitingOnAppends--,i.waitingOnAppends===0&&this.handleAppendsDone_())},t.checkForIllegalMediaSwitch=function(i){var s=Ave(this.loaderType_,this.getCurrentMediaInfo_(),i);return s?(this.error({message:s,blacklistDuration:1/0}),this.trigger("error"),!0):!1},t.updateSourceBufferTimestampOffset_=function(i){if(!(i.timestampOffset===null||typeof i.timingInfo.start!="number"||i.changedTimestampOffset||this.loaderType_!=="main")){var s=!1;i.timestampOffset-=this.getSegmentStartTimeForTimestampOffsetCalculation_({videoTimingInfo:i.segment.videoTimingInfo,audioTimingInfo:i.segment.audioTimingInfo,timingInfo:i.timingInfo}),i.changedTimestampOffset=!0,i.timestampOffset!==this.sourceUpdater_.videoTimestampOffset()&&(this.sourceUpdater_.videoTimestampOffset(i.timestampOffset),s=!0),i.timestampOffset!==this.sourceUpdater_.audioTimestampOffset()&&(this.sourceUpdater_.audioTimestampOffset(i.timestampOffset),s=!0),s&&this.trigger("timestampoffset")}},t.getSegmentStartTimeForTimestampOffsetCalculation_=function(i){var s=i.videoTimingInfo,a=i.audioTimingInfo,o=i.timingInfo;return this.useDtsForTimestampOffset_?s&&typeof s.transmuxedDecodeStart=="number"?s.transmuxedDecodeStart:a&&typeof a.transmuxedDecodeStart=="number"?a.transmuxedDecodeStart:o.start:o.start},t.updateTimingInfoEnd_=function(i){i.timingInfo=i.timingInfo||{};var s=this.getMediaInfo_(),a=this.loaderType_==="main"&&s&&s.hasVideo,o=a&&i.videoTimingInfo?i.videoTimingInfo:i.audioTimingInfo;o&&(i.timingInfo.end=typeof o.end=="number"?o.end:o.start+i.duration)},t.handleAppendsDone_=function(){if(this.pendingSegment_&&this.trigger("appendsdone"),!this.pendingSegment_){this.state="READY",this.paused()||this.monitorBuffer_();return}var i=this.pendingSegment_;this.updateTimingInfoEnd_(i),this.shouldSaveSegmentTimingInfo_&&this.syncController_.saveSegmentTimingInfo({segmentInfo:i,shouldSaveTimelineMapping:this.loaderType_==="main"});var s=Rve(i,this.sourceType_);if(s&&(s.severity==="warn"?Le.log.warn(s.message):this.logger_(s.message)),this.recordThroughput_(i),this.pendingSegment_=null,this.state="READY",i.isSyncRequest&&(this.trigger("syncinfoupdate"),!i.hasAppendedData_)){this.logger_("Throwing away un-appended sync request "+Mf(i));return}this.logger_("Appended "+Mf(i)),this.addSegmentMetadataCue_(i),this.fetchAtBuffer_=!0,this.currentTimeline_!==i.timeline&&(this.timelineChangeController_.lastTimelineChange({type:this.loaderType_,from:this.currentTimeline_,to:i.timeline}),this.loaderType_==="main"&&!this.audioDisabled_&&this.timelineChangeController_.lastTimelineChange({type:"audio",from:this.currentTimeline_,to:i.timeline})),this.currentTimeline_=i.timeline,this.trigger("syncinfoupdate");var a=i.segment,o=i.part,l=a.end&&this.currentTime_()-a.end>i.playlist.targetDuration*3,u=o&&o.end&&this.currentTime_()-o.end>i.playlist.partTargetDuration*3;if(l||u){this.logger_("bad "+(l?"segment":"part")+" "+Mf(i)),this.resetEverything();return}var c=this.mediaIndex!==null;c&&this.trigger("bandwidthupdate"),this.trigger("progress"),this.mediaIndex=i.mediaIndex,this.partIndex=i.partIndex,this.isEndOfStream_(i.mediaIndex,i.playlist,i.partIndex)&&this.endOfStream(),this.trigger("appended"),i.hasAppendedData_&&this.mediaAppends++,this.paused()||this.monitorBuffer_()},t.recordThroughput_=function(i){if(i.duration<yy){this.logger_("Ignoring segment's throughput because its duration of "+i.duration+(" is less than the min to record "+yy));return}var s=this.throughput.rate,a=Date.now()-i.endOfAllRequests+1,o=Math.floor(i.byteLength/a*8*1e3);this.throughput.rate+=(o-s)/++this.throughput.count},t.addSegmentMetadataCue_=function(i){if(this.segmentMetadataTrack_){var s=i.segment,a=s.start,o=s.end;if(!(!Z4(a)||!Z4(o))){y0(a,o,this.segmentMetadataTrack_);var l=X.WebKitDataCue||X.VTTCue,u={custom:s.custom,dateTimeObject:s.dateTimeObject,dateTimeString:s.dateTimeString,bandwidth:i.playlist.attributes.BANDWIDTH,resolution:i.playlist.attributes.RESOLUTION,codecs:i.playlist.attributes.CODECS,byteLength:i.byteLength,uri:i.uri,timeline:i.timeline,playlist:i.playlist.id,start:a,end:o},c=JSON.stringify(u),h=new l(a,o,c);h.value=u,this.segmentMetadataTrack_.addCue(h)}}},e})(Le.EventTarget);function gc(){}var Zj=function(e){return typeof e!="string"?e:e.replace(/./,function(t){return t.toUpperCase()})},Lve=["video","audio"],IE=function(e,t){var n=t[e+"Buffer"];return n&&n.updating||t.queuePending[e]},Ove=function(e,t){for(var n=0;n<t.length;n++){var i=t[n];if(i.type==="mediaSource")return null;if(i.type===e)return n}return null},_A=function r(e,t){if(t.queue.length!==0){var n=0,i=t.queue[n];if(i.type==="mediaSource"){!t.updating()&&t.mediaSource.readyState!=="closed"&&(t.queue.shift(),i.action(t),i.doneFn&&i.doneFn(),r("audio",t),r("video",t));return}if(e!=="mediaSource"&&!(!t.ready()||t.mediaSource.readyState==="closed"||IE(e,t))){if(i.type!==e){if(n=Ove(e,t.queue),n===null)return;i=t.queue[n]}if(t.queue.splice(n,1),t.queuePending[e]=i,i.action(e,t),!i.doneFn){t.queuePending[e]=null,r(e,t);return}}}},e7=function(e,t){var n=t[e+"Buffer"],i=Zj(e);n&&(n.removeEventListener("updateend",t["on"+i+"UpdateEnd_"]),n.removeEventListener("error",t["on"+i+"Error_"]),t.codecs[e]=null,t[e+"Buffer"]=null)},au=function(e,t){return e&&t&&Array.prototype.indexOf.call(e.sourceBuffers,t)!==-1},io={appendBuffer:function(e,t,n){return function(i,s){var a=s[i+"Buffer"];if(au(s.mediaSource,a)){s.logger_("Appending segment "+t.mediaIndex+"'s "+e.length+" bytes to "+i+"Buffer");try{a.appendBuffer(e)}catch(o){s.logger_("Error with code "+o.code+" "+(o.code===Jj?"(QUOTA_EXCEEDED_ERR) ":"")+("when appending segment "+t.mediaIndex+" to "+i+"Buffer")),s.queuePending[i]=null,n(o)}}}},remove:function(e,t){return function(n,i){var s=i[n+"Buffer"];if(au(i.mediaSource,s)){i.logger_("Removing "+e+" to "+t+" from "+n+"Buffer");try{s.remove(e,t)}catch{i.logger_("Remove "+e+" to "+t+" from "+n+"Buffer failed")}}}},timestampOffset:function(e){return function(t,n){var i=n[t+"Buffer"];au(n.mediaSource,i)&&(n.logger_("Setting "+t+"timestampOffset to "+e),i.timestampOffset=e)}},callback:function(e){return function(t,n){e()}},endOfStream:function(e){return function(t){if(t.mediaSource.readyState==="open"){t.logger_("Calling mediaSource endOfStream("+(e||"")+")");try{t.mediaSource.endOfStream(e)}catch(n){Le.log.warn("Failed to call media source endOfStream",n)}}}},duration:function(e){return function(t){t.logger_("Setting mediaSource duration to "+e);try{t.mediaSource.duration=e}catch(n){Le.log.warn("Failed to set media source duration",n)}}},abort:function(){return function(e,t){if(t.mediaSource.readyState==="open"){var n=t[e+"Buffer"];if(au(t.mediaSource,n)){t.logger_("calling abort on "+e+"Buffer");try{n.abort()}catch(i){Le.log.warn("Failed to abort on "+e+"Buffer",i)}}}}},addSourceBuffer:function(e,t){return function(n){var i=Zj(e),s=ng(t);n.logger_("Adding "+e+"Buffer with codec "+t+" to mediaSource");var a=n.mediaSource.addSourceBuffer(s);a.addEventListener("updateend",n["on"+i+"UpdateEnd_"]),a.addEventListener("error",n["on"+i+"Error_"]),n.codecs[e]=t,n[e+"Buffer"]=a}},removeSourceBuffer:function(e){return function(t){var n=t[e+"Buffer"];if(e7(e,t),!!au(t.mediaSource,n)){t.logger_("Removing "+e+"Buffer with codec "+t.codecs[e]+" from mediaSource");try{t.mediaSource.removeSourceBuffer(n)}catch(i){Le.log.warn("Failed to removeSourceBuffer "+e+"Buffer",i)}}}},changeType:function(e){return function(t,n){var i=n[t+"Buffer"],s=ng(e);if(au(n.mediaSource,i)&&n.codecs[t]!==e){n.logger_("changing "+t+"Buffer codec from "+n.codecs[t]+" to "+e);try{i.changeType(s),n.codecs[t]=e}catch(a){Le.log.warn("Failed to changeType on "+t+"Buffer",a)}}}}},so=function(e){var t=e.type,n=e.sourceUpdater,i=e.action,s=e.doneFn,a=e.name;n.queue.push({type:t,action:i,doneFn:s,name:a}),_A(t,n)},n3=function(e,t){return function(n){if(t.queuePending[e]){var i=t.queuePending[e].doneFn;t.queuePending[e]=null,i&&i(t[e+"Error_"])}_A(e,t)}},t7=(function(r){$t(e,r);function e(n){var i;return i=r.call(this)||this,i.mediaSource=n,i.sourceopenListener_=function(){return _A("mediaSource",He(i))},i.mediaSource.addEventListener("sourceopen",i.sourceopenListener_),i.logger_=Rl("SourceUpdater"),i.audioTimestampOffset_=0,i.videoTimestampOffset_=0,i.queue=[],i.queuePending={audio:null,video:null},i.delayedAudioAppendQueue_=[],i.videoAppendQueued_=!1,i.codecs={},i.onVideoUpdateEnd_=n3("video",He(i)),i.onAudioUpdateEnd_=n3("audio",He(i)),i.onVideoError_=function(s){i.videoError_=s},i.onAudioError_=function(s){i.audioError_=s},i.createdSourceBuffers_=!1,i.initializedEme_=!1,i.triggeredReady_=!1,i}var t=e.prototype;return t.initializedEme=function(){this.initializedEme_=!0,this.triggerReady()},t.hasCreatedSourceBuffers=function(){return this.createdSourceBuffers_},t.hasInitializedAnyEme=function(){return this.initializedEme_},t.ready=function(){return this.hasCreatedSourceBuffers()&&this.hasInitializedAnyEme()},t.createSourceBuffers=function(i){this.hasCreatedSourceBuffers()||(this.addOrChangeSourceBuffers(i),this.createdSourceBuffers_=!0,this.trigger("createdsourcebuffers"),this.triggerReady())},t.triggerReady=function(){this.ready()&&!this.triggeredReady_&&(this.triggeredReady_=!0,this.trigger("ready"))},t.addSourceBuffer=function(i,s){so({type:"mediaSource",sourceUpdater:this,action:io.addSourceBuffer(i,s),name:"addSourceBuffer"})},t.abort=function(i){so({type:i,sourceUpdater:this,action:io.abort(i),name:"abort"})},t.removeSourceBuffer=function(i){if(!this.canRemoveSourceBuffer()){Le.log.error("removeSourceBuffer is not supported!");return}so({type:"mediaSource",sourceUpdater:this,action:io.removeSourceBuffer(i),name:"removeSourceBuffer"})},t.canRemoveSourceBuffer=function(){return!Le.browser.IE_VERSION&&!Le.browser.IS_FIREFOX&&X.MediaSource&&X.MediaSource.prototype&&typeof X.MediaSource.prototype.removeSourceBuffer=="function"},e.canChangeType=function(){return X.SourceBuffer&&X.SourceBuffer.prototype&&typeof X.SourceBuffer.prototype.changeType=="function"},t.canChangeType=function(){return this.constructor.canChangeType()},t.changeType=function(i,s){if(!this.canChangeType()){Le.log.error("changeType is not supported!");return}so({type:i,sourceUpdater:this,action:io.changeType(s),name:"changeType"})},t.addOrChangeSourceBuffers=function(i){var s=this;if(!i||typeof i!="object"||Object.keys(i).length===0)throw new Error("Cannot addOrChangeSourceBuffers to undefined codecs");Object.keys(i).forEach(function(a){var o=i[a];if(!s.hasCreatedSourceBuffers())return s.addSourceBuffer(a,o);s.canChangeType()&&s.changeType(a,o)})},t.appendBuffer=function(i,s){var a=this,o=i.segmentInfo,l=i.type,u=i.bytes;if(this.processedAppend_=!0,l==="audio"&&this.videoBuffer&&!this.videoAppendQueued_){this.delayedAudioAppendQueue_.push([i,s]),this.logger_("delayed audio append of "+u.length+" until video append");return}var c=s;if(so({type:l,sourceUpdater:this,action:io.appendBuffer(u,o||{mediaIndex:-1},c),doneFn:s,name:"appendBuffer"}),l==="video"){if(this.videoAppendQueued_=!0,!this.delayedAudioAppendQueue_.length)return;var h=this.delayedAudioAppendQueue_.slice();this.logger_("queuing delayed audio "+h.length+" appendBuffers"),this.delayedAudioAppendQueue_.length=0,h.forEach(function(m){a.appendBuffer.apply(a,m)})}},t.audioBuffered=function(){return au(this.mediaSource,this.audioBuffer)&&this.audioBuffer.buffered?this.audioBuffer.buffered:Le.createTimeRange()},t.videoBuffered=function(){return au(this.mediaSource,this.videoBuffer)&&this.videoBuffer.buffered?this.videoBuffer.buffered:Le.createTimeRange()},t.buffered=function(){var i=au(this.mediaSource,this.videoBuffer)?this.videoBuffer:null,s=au(this.mediaSource,this.audioBuffer)?this.audioBuffer:null;return s&&!i?this.audioBuffered():i&&!s?this.videoBuffered():J0e(this.audioBuffered(),this.videoBuffered())},t.setDuration=function(i,s){s===void 0&&(s=gc),so({type:"mediaSource",sourceUpdater:this,action:io.duration(i),name:"duration",doneFn:s})},t.endOfStream=function(i,s){i===void 0&&(i=null),s===void 0&&(s=gc),typeof i!="string"&&(i=void 0),so({type:"mediaSource",sourceUpdater:this,action:io.endOfStream(i),name:"endOfStream",doneFn:s})},t.removeAudio=function(i,s,a){if(a===void 0&&(a=gc),!this.audioBuffered().length||this.audioBuffered().end(0)===0){a();return}so({type:"audio",sourceUpdater:this,action:io.remove(i,s),doneFn:a,name:"remove"})},t.removeVideo=function(i,s,a){if(a===void 0&&(a=gc),!this.videoBuffered().length||this.videoBuffered().end(0)===0){a();return}so({type:"video",sourceUpdater:this,action:io.remove(i,s),doneFn:a,name:"remove"})},t.updating=function(){return!!(IE("audio",this)||IE("video",this))},t.audioTimestampOffset=function(i){return typeof i<"u"&&this.audioBuffer&&this.audioTimestampOffset_!==i&&(so({type:"audio",sourceUpdater:this,action:io.timestampOffset(i),name:"timestampOffset"}),this.audioTimestampOffset_=i),this.audioTimestampOffset_},t.videoTimestampOffset=function(i){return typeof i<"u"&&this.videoBuffer&&this.videoTimestampOffset!==i&&(so({type:"video",sourceUpdater:this,action:io.timestampOffset(i),name:"timestampOffset"}),this.videoTimestampOffset_=i),this.videoTimestampOffset_},t.audioQueueCallback=function(i){this.audioBuffer&&so({type:"audio",sourceUpdater:this,action:io.callback(i),name:"callback"})},t.videoQueueCallback=function(i){this.videoBuffer&&so({type:"video",sourceUpdater:this,action:io.callback(i),name:"callback"})},t.dispose=function(){var i=this;this.trigger("dispose"),Lve.forEach(function(s){i.abort(s),i.canRemoveSourceBuffer()?i.removeSourceBuffer(s):i[s+"QueueCallback"](function(){return e7(s,i)})}),this.videoAppendQueued_=!1,this.delayedAudioAppendQueue_.length=0,this.sourceopenListener_&&this.mediaSource.removeEventListener("sourceopen",this.sourceopenListener_),this.off()},e})(Le.EventTarget),i3=function(e){return decodeURIComponent(escape(String.fromCharCode.apply(null,e)))},s3=new Uint8Array(`

`.split("").map(function(r){return r.charCodeAt(0)})),Mve=(function(r){$t(e,r);function e(){return r.call(this,"Trying to parse received VTT cues, but there is no WebVTT. Make sure vtt.js is loaded.")||this}return e})(dE(Error)),Fve=(function(r){$t(e,r);function e(n,i){var s;return i===void 0&&(i={}),s=r.call(this,n,i)||this,s.mediaSource_=null,s.subtitlesTrack_=null,s.loaderType_="subtitle",s.featuresNativeTextTracks_=n.featuresNativeTextTracks,s.loadVttJs=n.loadVttJs,s.shouldSaveSegmentTimingInfo_=!1,s}var t=e.prototype;return t.createTransmuxer_=function(){return null},t.buffered_=function(){if(!this.subtitlesTrack_||!this.subtitlesTrack_.cues||!this.subtitlesTrack_.cues.length)return Le.createTimeRanges();var i=this.subtitlesTrack_.cues,s=i[0].startTime,a=i[i.length-1].startTime;return Le.createTimeRanges([[s,a]])},t.initSegmentForMap=function(i,s){if(s===void 0&&(s=!1),!i)return null;var a=zx(i),o=this.initSegments_[a];if(s&&!o&&i.bytes){var l=s3.byteLength+i.bytes.byteLength,u=new Uint8Array(l);u.set(i.bytes),u.set(s3,i.bytes.byteLength),this.initSegments_[a]=o={resolvedUri:i.resolvedUri,byterange:i.byterange,bytes:u}}return o||i},t.couldBeginLoading_=function(){return this.playlist_&&this.subtitlesTrack_&&!this.paused()},t.init_=function(){return this.state="READY",this.resetEverything(),this.monitorBuffer_()},t.track=function(i){return typeof i>"u"?this.subtitlesTrack_:(this.subtitlesTrack_=i,this.state==="INIT"&&this.couldBeginLoading_()&&this.init_(),this.subtitlesTrack_)},t.remove=function(i,s){y0(i,s,this.subtitlesTrack_)},t.fillBuffer_=function(){var i=this,s=this.chooseNextRequest_();if(s){if(this.syncController_.timestampOffsetForTimeline(s.timeline)===null){var a=function(){i.state="READY",i.paused()||i.monitorBuffer_()};this.syncController_.one("timestampoffset",a),this.state="WAITING_ON_TIMELINE";return}this.loadSegment_(s)}},t.timestampOffsetForSegment_=function(){return null},t.chooseNextRequest_=function(){return this.skipEmptySegments_(r.prototype.chooseNextRequest_.call(this))},t.skipEmptySegments_=function(i){for(;i&&i.segment.empty;){if(i.mediaIndex+1>=i.playlist.segments.length){i=null;break}i=this.generateSegmentInfo_({playlist:i.playlist,mediaIndex:i.mediaIndex+1,startOfSegment:i.startOfSegment+i.duration,isSyncRequest:i.isSyncRequest})}return i},t.stopForError=function(i){this.error(i),this.state="READY",this.pause(),this.trigger("error")},t.segmentRequestFinished_=function(i,s,a){var o=this;if(!this.subtitlesTrack_){this.state="READY";return}if(this.saveTransferStats_(s.stats),!this.pendingSegment_){this.state="READY",this.mediaRequestsAborted+=1;return}if(i){i.code===vu.TIMEOUT&&this.handleTimeout_(),i.code===vu.ABORTED?this.mediaRequestsAborted+=1:this.mediaRequestsErrored+=1,this.stopForError(i);return}var l=this.pendingSegment_;this.saveBandwidthRelatedStats_(l.duration,s.stats),s.key&&this.segmentKey(s.key,!0),this.state="APPENDING",this.trigger("appending");var u=l.segment;if(u.map&&(u.map.bytes=s.map.bytes),l.bytes=s.bytes,typeof X.WebVTT!="function"&&typeof this.loadVttJs=="function"){this.state="WAITING_ON_VTTJS",this.loadVttJs().then(function(){return o.segmentRequestFinished_(i,s,a)},function(){return o.stopForError({message:"Error loading vtt.js"})});return}u.requested=!0;try{this.parseVTTCues_(l)}catch(c){this.stopForError({message:c.message});return}if(this.updateTimeMapping_(l,this.syncController_.timelines[l.timeline],this.playlist_),l.cues.length?l.timingInfo={start:l.cues[0].startTime,end:l.cues[l.cues.length-1].endTime}:l.timingInfo={start:l.startOfSegment,end:l.startOfSegment+l.duration},l.isSyncRequest){this.trigger("syncinfoupdate"),this.pendingSegment_=null,this.state="READY";return}l.byteLength=l.bytes.byteLength,this.mediaSecondsLoaded+=u.duration,l.cues.forEach(function(c){o.subtitlesTrack_.addCue(o.featuresNativeTextTracks_?new X.VTTCue(c.startTime,c.endTime,c.text):c)}),bve(this.subtitlesTrack_),this.handleAppendsDone_()},t.handleData_=function(){},t.updateTimingInfoEnd_=function(){},t.parseVTTCues_=function(i){var s,a=!1;if(typeof X.WebVTT!="function")throw new Mve;typeof X.TextDecoder=="function"?s=new X.TextDecoder("utf8"):(s=X.WebVTT.StringDecoder(),a=!0);var o=new X.WebVTT.Parser(X,X.vttjs,s);if(i.cues=[],i.timestampmap={MPEGTS:0,LOCAL:0},o.oncue=i.cues.push.bind(i.cues),o.ontimestampmap=function(c){i.timestampmap=c},o.onparsingerror=function(c){Le.log.warn("Error encountered when parsing cues: "+c.message)},i.segment.map){var l=i.segment.map.bytes;a&&(l=i3(l)),o.parse(l)}var u=i.bytes;a&&(u=i3(u)),o.parse(u),o.flush()},t.updateTimeMapping_=function(i,s,a){var o=i.segment;if(s){if(!i.cues.length){o.empty=!0;return}var l=i.timestampmap,u=l.MPEGTS/Ix.ONE_SECOND_IN_TS-l.LOCAL+s.mapping;if(i.cues.forEach(function(m){m.startTime+=u,m.endTime+=u}),!a.syncInfo){var c=i.cues[0].startTime,h=i.cues[i.cues.length-1].startTime;a.syncInfo={mediaSequence:a.mediaSequence+i.mediaIndex,time:Math.min(c,h-o.duration)}}}},e})(DE),Bve=function(e,t){for(var n=e.cues,i=0;i<n.length;i++){var s=n[i];if(t>=s.adStartTime&&t<=s.adEndTime)return s}return null},Nve=function(e,t,n){if(n===void 0&&(n=0),!!e.segments)for(var i=n,s,a=0;a<e.segments.length;a++){var o=e.segments[a];if(s||(s=Bve(t,i+o.duration/2)),s){if("cueIn"in o){s.endTime=i,s.adEndTime=i,i+=o.duration,s=null;continue}if(i<s.endTime){i+=o.duration;continue}s.endTime+=o.duration}else if("cueOut"in o&&(s=new X.VTTCue(i,i+o.duration,o.cueOut),s.adStartTime=i,s.adEndTime=i+parseFloat(o.cueOut),t.addCue(s)),"cueOutCont"in o){var l=o.cueOutCont.split("/").map(parseFloat),u=l[0],c=l[1];s=new X.VTTCue(i,i+o.duration,""),s.adStartTime=i-u,s.adEndTime=s.adStartTime+c,t.addCue(s)}i+=o.duration}},Uve=86400,a3=[{name:"VOD",run:function(e,t,n,i,s){if(n!==1/0){var a={time:0,segmentIndex:0,partIndex:null};return a}return null}},{name:"ProgramDateTime",run:function(e,t,n,i,s){if(!Object.keys(e.timelineToDatetimeMappings).length)return null;var a=null,o=null,l=bE(t);s=s||0;for(var u=0;u<l.length;u++){var c=t.endList||s===0?u:l.length-(u+1),h=l[c],m=h.segment,g=e.timelineToDatetimeMappings[m.timeline];if(!(!g||!m.dateTimeObject)){var y=m.dateTimeObject.getTime()/1e3,v=y+g;if(m.parts&&typeof h.partIndex=="number")for(var x=0;x<h.partIndex;x++)v+=m.parts[x].duration;var w=Math.abs(s-v);if(o!==null&&(w===0||o<w))break;o=w,a={time:v,segmentIndex:h.segmentIndex,partIndex:h.partIndex}}}return a}},{name:"Segment",run:function(e,t,n,i,s){var a=null,o=null;s=s||0;for(var l=bE(t),u=0;u<l.length;u++){var c=t.endList||s===0?u:l.length-(u+1),h=l[c],m=h.segment,g=h.part&&h.part.start||m&&m.start;if(m.timeline===i&&typeof g<"u"){var y=Math.abs(s-g);if(o!==null&&o<y)break;(!a||o===null||o>=y)&&(o=y,a={time:g,segmentIndex:h.segmentIndex,partIndex:h.partIndex})}}return a}},{name:"Discontinuity",run:function(e,t,n,i,s){var a=null;if(s=s||0,t.discontinuityStarts&&t.discontinuityStarts.length)for(var o=null,l=0;l<t.discontinuityStarts.length;l++){var u=t.discontinuityStarts[l],c=t.discontinuitySequence+l+1,h=e.discontinuities[c];if(h){var m=Math.abs(s-h.time);if(o!==null&&o<m)break;(!a||o===null||o>=m)&&(o=m,a={time:h.time,segmentIndex:u,partIndex:null})}}return a}},{name:"Playlist",run:function(e,t,n,i,s){if(t.syncInfo){var a={time:t.syncInfo.time,segmentIndex:t.syncInfo.mediaSequence-t.mediaSequence,partIndex:null};return a}return null}}],$ve=(function(r){$t(e,r);function e(n){var i;return i=r.call(this)||this,i.timelines=[],i.discontinuities=[],i.timelineToDatetimeMappings={},i.logger_=Rl("SyncController"),i}var t=e.prototype;return t.getSyncPoint=function(i,s,a,o){var l=this.runStrategies_(i,s,a,o);return l.length?this.selectSyncPoint_(l,{key:"time",value:o}):null},t.getExpiredTime=function(i,s){if(!i||!i.segments)return null;var a=this.runStrategies_(i,s,i.discontinuitySequence,0);if(!a.length)return null;var o=this.selectSyncPoint_(a,{key:"segmentIndex",value:0});return o.segmentIndex>0&&(o.time*=-1),Math.abs(o.time+M0({defaultDuration:i.targetDuration,durationList:i.segments,startIndex:o.segmentIndex,endIndex:0}))},t.runStrategies_=function(i,s,a,o){for(var l=[],u=0;u<a3.length;u++){var c=a3[u],h=c.run(this,i,s,a,o);h&&(h.strategy=c.name,l.push({strategy:c.name,syncPoint:h}))}return l},t.selectSyncPoint_=function(i,s){for(var a=i[0].syncPoint,o=Math.abs(i[0].syncPoint[s.key]-s.value),l=i[0].strategy,u=1;u<i.length;u++){var c=Math.abs(i[u].syncPoint[s.key]-s.value);c<o&&(o=c,a=i[u].syncPoint,l=i[u].strategy)}return this.logger_("syncPoint for ["+s.key+": "+s.value+"] chosen with strategy"+(" ["+l+"]: [time:"+a.time+",")+(" segmentIndex:"+a.segmentIndex)+(typeof a.partIndex=="number"?",partIndex:"+a.partIndex:"")+"]"),a},t.saveExpiredSegmentInfo=function(i,s){var a=s.mediaSequence-i.mediaSequence;if(a>Uve){Le.log.warn("Not saving expired segment info. Media sequence gap "+a+" is too large.");return}for(var o=a-1;o>=0;o--){var l=i.segments[o];if(l&&typeof l.start<"u"){s.syncInfo={mediaSequence:i.mediaSequence+o,time:l.start},this.logger_("playlist refresh sync: [time:"+s.syncInfo.time+","+(" mediaSequence: "+s.syncInfo.mediaSequence+"]")),this.trigger("syncinfoupdate");break}}},t.setDateTimeMappingForStart=function(i){if(this.timelineToDatetimeMappings={},i.segments&&i.segments.length&&i.segments[0].dateTimeObject){var s=i.segments[0],a=s.dateTimeObject.getTime()/1e3;this.timelineToDatetimeMappings[s.timeline]=-a}},t.saveSegmentTimingInfo=function(i){var s=i.segmentInfo,a=i.shouldSaveTimelineMapping,o=this.calculateSegmentTimeMapping_(s,s.timingInfo,a),l=s.segment;o&&(this.saveDiscontinuitySyncInfo_(s),s.playlist.syncInfo||(s.playlist.syncInfo={mediaSequence:s.playlist.mediaSequence+s.mediaIndex,time:l.start}));var u=l.dateTimeObject;l.discontinuity&&a&&u&&(this.timelineToDatetimeMappings[l.timeline]=-(u.getTime()/1e3))},t.timestampOffsetForTimeline=function(i){return typeof this.timelines[i]>"u"?null:this.timelines[i].time},t.mappingForTimeline=function(i){return typeof this.timelines[i]>"u"?null:this.timelines[i].mapping},t.calculateSegmentTimeMapping_=function(i,s,a){var o=i.segment,l=i.part,u=this.timelines[i.timeline],c,h;if(typeof i.timestampOffset=="number")u={time:i.startOfSegment,mapping:i.startOfSegment-s.start},a&&(this.timelines[i.timeline]=u,this.trigger("timestampoffset"),this.logger_("time mapping for timeline "+i.timeline+": "+("[time: "+u.time+"] [mapping: "+u.mapping+"]"))),c=i.startOfSegment,h=s.end+u.mapping;else if(u)c=s.start+u.mapping,h=s.end+u.mapping;else return!1;return l&&(l.start=c,l.end=h),(!o.start||c<o.start)&&(o.start=c),o.end=h,!0},t.saveDiscontinuitySyncInfo_=function(i){var s=i.playlist,a=i.segment;if(a.discontinuity)this.discontinuities[a.timeline]={time:a.start,accuracy:0};else if(s.discontinuityStarts&&s.discontinuityStarts.length)for(var o=0;o<s.discontinuityStarts.length;o++){var l=s.discontinuityStarts[o],u=s.discontinuitySequence+o+1,c=l-i.mediaIndex,h=Math.abs(c);if(!this.discontinuities[u]||this.discontinuities[u].accuracy>h){var m=void 0;c<0?m=a.start-M0({defaultDuration:s.targetDuration,durationList:s.segments,startIndex:i.mediaIndex,endIndex:l}):m=a.end+M0({defaultDuration:s.targetDuration,durationList:s.segments,startIndex:i.mediaIndex+1,endIndex:l}),this.discontinuities[u]={time:m,accuracy:h}}}},t.dispose=function(){this.trigger("dispose"),this.off()},e})(Le.EventTarget),jve=(function(r){$t(e,r);function e(){var n;return n=r.call(this)||this,n.pendingTimelineChanges_={},n.lastTimelineChanges_={},n}var t=e.prototype;return t.clearPendingTimelineChange=function(i){this.pendingTimelineChanges_[i]=null,this.trigger("pendingtimelinechange")},t.pendingTimelineChange=function(i){var s=i.type,a=i.from,o=i.to;return typeof a=="number"&&typeof o=="number"&&(this.pendingTimelineChanges_[s]={type:s,from:a,to:o},this.trigger("pendingtimelinechange")),this.pendingTimelineChanges_[s]},t.lastTimelineChange=function(i){var s=i.type,a=i.from,o=i.to;return typeof a=="number"&&typeof o=="number"&&(this.lastTimelineChanges_[s]={type:s,from:a,to:o},delete this.pendingTimelineChanges_[s],this.trigger("timelinechange")),this.lastTimelineChanges_[s]},t.dispose=function(){this.trigger("dispose"),this.pendingTimelineChanges_={},this.lastTimelineChanges_={},this.off()},e})(Le.EventTarget),zve=jj(zj(function(){var r=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function e(I,A,L){return L={path:A,exports:{},require:function(U,B){return t(U,B??L.path)}},I(L,L.exports),L.exports}function t(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}var n=e(function(I){function A(N,U){for(var B=0;B<U.length;B++){var k=U[B];k.enumerable=k.enumerable||!1,k.configurable=!0,"value"in k&&(k.writable=!0),Object.defineProperty(N,k.key,k)}}function L(N,U,B){return U&&A(N.prototype,U),B&&A(N,B),N}I.exports=L,I.exports.default=I.exports,I.exports.__esModule=!0}),i=e(function(I){function A(L,N){return I.exports=A=Object.setPrototypeOf||function(B,k){return B.__proto__=k,B},I.exports.default=I.exports,I.exports.__esModule=!0,A(L,N)}I.exports=A,I.exports.default=I.exports,I.exports.__esModule=!0}),s=e(function(I){function A(L,N){L.prototype=Object.create(N.prototype),L.prototype.constructor=L,i(L,N)}I.exports=A,I.exports.default=I.exports,I.exports.__esModule=!0}),a=(function(){function I(){this.listeners={}}var A=I.prototype;return A.on=function(N,U){this.listeners[N]||(this.listeners[N]=[]),this.listeners[N].push(U)},A.off=function(N,U){if(!this.listeners[N])return!1;var B=this.listeners[N].indexOf(U);return this.listeners[N]=this.listeners[N].slice(0),this.listeners[N].splice(B,1),B>-1},A.trigger=function(N){var U=this.listeners[N];if(U)if(arguments.length===2)for(var B=U.length,k=0;k<B;++k)U[k].call(this,arguments[1]);else for(var H=Array.prototype.slice.call(arguments,1),q=U.length,V=0;V<q;++V)U[V].apply(this,H)},A.dispose=function(){this.listeners={}},A.pipe=function(N){this.on("data",function(U){N.push(U)})},I})();/*! @name pkcs7 @version 1.0.4 @license Apache-2.0 */function o(I){return I.subarray(0,I.byteLength-I[I.byteLength-1])}/*! @name aes-decrypter @version 3.1.3 @license Apache-2.0 */var l=function(){var A=[[[],[],[],[],[]],[[],[],[],[],[]]],L=A[0],N=A[1],U=L[4],B=N[4],k,H,q,V=[],Q=[],ie,le,he,ae,ne,ue;for(k=0;k<256;k++)Q[(V[k]=k<<1^(k>>7)*283)^k]=k;for(H=q=0;!U[H];H^=ie||1,q=Q[q]||1)for(ae=q^q<<1^q<<2^q<<3^q<<4,ae=ae>>8^ae&255^99,U[H]=ae,B[ae]=H,he=V[le=V[ie=V[H]]],ue=he*16843009^le*65537^ie*257^H*16843008,ne=V[ae]*257^ae*16843008,k=0;k<4;k++)L[k][H]=ne=ne<<24^ne>>>8,N[k][ae]=ue=ue<<24^ue>>>8;for(k=0;k<5;k++)L[k]=L[k].slice(0),N[k]=N[k].slice(0);return A},u=null,c=(function(){function I(L){u||(u=l()),this._tables=[[u[0][0].slice(),u[0][1].slice(),u[0][2].slice(),u[0][3].slice(),u[0][4].slice()],[u[1][0].slice(),u[1][1].slice(),u[1][2].slice(),u[1][3].slice(),u[1][4].slice()]];var N,U,B,k=this._tables[0][4],H=this._tables[1],q=L.length,V=1;if(q!==4&&q!==6&&q!==8)throw new Error("Invalid aes key size");var Q=L.slice(0),ie=[];for(this._key=[Q,ie],N=q;N<4*q+28;N++)B=Q[N-1],(N%q===0||q===8&&N%q===4)&&(B=k[B>>>24]<<24^k[B>>16&255]<<16^k[B>>8&255]<<8^k[B&255],N%q===0&&(B=B<<8^B>>>24^V<<24,V=V<<1^(V>>7)*283)),Q[N]=Q[N-q]^B;for(U=0;N;U++,N--)B=Q[U&3?N:N-4],N<=4||U<4?ie[U]=B:ie[U]=H[0][k[B>>>24]]^H[1][k[B>>16&255]]^H[2][k[B>>8&255]]^H[3][k[B&255]]}var A=I.prototype;return A.decrypt=function(N,U,B,k,H,q){var V=this._key[1],Q=N^V[0],ie=k^V[1],le=B^V[2],he=U^V[3],ae,ne,ue,ee=V.length/4-2,pe,me=4,xe=this._tables[1],Be=xe[0],Oe=xe[1],dt=xe[2],Ke=xe[3],_t=xe[4];for(pe=0;pe<ee;pe++)ae=Be[Q>>>24]^Oe[ie>>16&255]^dt[le>>8&255]^Ke[he&255]^V[me],ne=Be[ie>>>24]^Oe[le>>16&255]^dt[he>>8&255]^Ke[Q&255]^V[me+1],ue=Be[le>>>24]^Oe[he>>16&255]^dt[Q>>8&255]^Ke[ie&255]^V[me+2],he=Be[he>>>24]^Oe[Q>>16&255]^dt[ie>>8&255]^Ke[le&255]^V[me+3],me+=4,Q=ae,ie=ne,le=ue;for(pe=0;pe<4;pe++)H[(3&-pe)+q]=_t[Q>>>24]<<24^_t[ie>>16&255]<<16^_t[le>>8&255]<<8^_t[he&255]^V[me++],ae=Q,Q=ie,ie=le,le=he,he=ae},I})(),h=(function(I){s(A,I);function A(){var N;return N=I.call(this,a)||this,N.jobs=[],N.delay=1,N.timeout_=null,N}var L=A.prototype;return L.processJob_=function(){this.jobs.shift()(),this.jobs.length?this.timeout_=setTimeout(this.processJob_.bind(this),this.delay):this.timeout_=null},L.push=function(U){this.jobs.push(U),this.timeout_||(this.timeout_=setTimeout(this.processJob_.bind(this),this.delay))},A})(a),m=function(A){return A<<24|(A&65280)<<8|(A&16711680)>>8|A>>>24},g=function(A,L,N){var U=new Int32Array(A.buffer,A.byteOffset,A.byteLength>>2),B=new c(Array.prototype.slice.call(L)),k=new Uint8Array(A.byteLength),H=new Int32Array(k.buffer),q,V,Q,ie,le,he,ae,ne,ue;for(q=N[0],V=N[1],Q=N[2],ie=N[3],ue=0;ue<U.length;ue+=4)le=m(U[ue]),he=m(U[ue+1]),ae=m(U[ue+2]),ne=m(U[ue+3]),B.decrypt(le,he,ae,ne,H,ue),H[ue]=m(H[ue]^q),H[ue+1]=m(H[ue+1]^V),H[ue+2]=m(H[ue+2]^Q),H[ue+3]=m(H[ue+3]^ie),q=le,V=he,Q=ae,ie=ne;return k},y=(function(){function I(L,N,U,B){var k=I.STEP,H=new Int32Array(L.buffer),q=new Uint8Array(L.byteLength),V=0;for(this.asyncStream_=new h,this.asyncStream_.push(this.decryptChunk_(H.subarray(V,V+k),N,U,q)),V=k;V<H.length;V+=k)U=new Uint32Array([m(H[V-4]),m(H[V-3]),m(H[V-2]),m(H[V-1])]),this.asyncStream_.push(this.decryptChunk_(H.subarray(V,V+k),N,U,q));this.asyncStream_.push(function(){B(null,o(q))})}var A=I.prototype;return A.decryptChunk_=function(N,U,B,k){return function(){var H=g(N,U,B);k.set(H,N.byteOffset)}},n(I,null,[{key:"STEP",get:function(){return 32e3}}]),I})(),v;typeof window<"u"?v=window:typeof r<"u"?v=r:typeof self<"u"?v=self:v={};var x=v,w=function(A){return ArrayBuffer.isView==="function"?ArrayBuffer.isView(A):A&&A.buffer instanceof ArrayBuffer},E=x.BigInt||Number;E("0x1"),E("0x100"),E("0x10000"),E("0x1000000"),E("0x100000000"),E("0x10000000000"),E("0x1000000000000"),E("0x100000000000000"),E("0x10000000000000000");var D=function(A){var L={};return Object.keys(A).forEach(function(N){var U=A[N];w(U)?L[N]={bytes:U.buffer,byteOffset:U.byteOffset,byteLength:U.byteLength}:L[N]=U}),L};self.onmessage=function(I){var A=I.data,L=new Uint8Array(A.encrypted.bytes,A.encrypted.byteOffset,A.encrypted.byteLength),N=new Uint32Array(A.key.bytes,A.key.byteOffset,A.key.byteLength/4),U=new Uint32Array(A.iv.bytes,A.iv.byteOffset,A.iv.byteLength/4);new y(L,N,U,function(B,k){self.postMessage(D({source:A.source,decrypted:k}),[k.buffer])})}})),Hve=$j(zve),Vve=function(e){var t=e.default?"main":"alternative";return e.characteristics&&e.characteristics.indexOf("public.accessibility.describes-video")>=0&&(t="main-desc"),t},qx=function(e,t){e.abort(),e.pause(),t&&t.activePlaylistLoader&&(t.activePlaylistLoader.pause(),t.activePlaylistLoader=null)},PE=function(e,t){t.activePlaylistLoader=e,e.load()},Wve=function(e,t){return function(){var n=t.segmentLoaders,i=n[e],s=n.main,a=t.mediaTypes[e],o=a.activeTrack(),l=a.getActiveGroup(),u=a.activePlaylistLoader,c=a.lastGroup_;if(!(l&&c&&l.id===c.id)&&(a.lastGroup_=l,a.lastTrack_=o,qx(i,a),!(!l||l.isMasterPlaylist))){if(!l.playlistLoader){u&&s.resetEverything();return}i.resyncLoader(),PE(l.playlistLoader,a)}}},qve=function(e,t){return function(){var n=t.segmentLoaders[e],i=t.mediaTypes[e];i.lastGroup_=null,n.abort(),n.pause()}},Gve=function(e,t){return function(){var n=t.masterPlaylistLoader,i=t.segmentLoaders,s=i[e],a=i.main,o=t.mediaTypes[e],l=o.activeTrack(),u=o.getActiveGroup(),c=o.activePlaylistLoader,h=o.lastTrack_;if(!(h&&l&&h.id===l.id)&&(o.lastGroup_=u,o.lastTrack_=l,qx(s,o),!!u)){if(u.isMasterPlaylist){if(!l||!h||l.id===h.id)return;var m=t.vhs.masterPlaylistController_,g=m.selectPlaylist();if(m.media()===g)return;o.logger_("track change. Switching master audio from "+h.id+" to "+l.id),n.pause(),a.resetEverything(),m.fastQualityChange_(g);return}if(e==="AUDIO"){if(!u.playlistLoader){a.setAudio(!0),a.resetEverything();return}s.setAudio(!0),a.setAudio(!1)}if(c===u.playlistLoader){PE(u.playlistLoader,o);return}s.track&&s.track(l),s.resetEverything(),PE(u.playlistLoader,o)}}},Gx={AUDIO:function(e,t){return function(){var n=t.segmentLoaders[e],i=t.mediaTypes[e],s=t.blacklistCurrentPlaylist;qx(n,i);var a=i.activeTrack(),o=i.activeGroup(),l=(o.filter(function(h){return h.default})[0]||o[0]).id,u=i.tracks[l];if(a===u){s({message:"Problem encountered loading the default audio track."});return}Le.log.warn("Problem encountered loading the alternate audio track.Switching back to default.");for(var c in i.tracks)i.tracks[c].enabled=i.tracks[c]===u;i.onTrackChanged()}},SUBTITLES:function(e,t){return function(){var n=t.segmentLoaders[e],i=t.mediaTypes[e];Le.log.warn("Problem encountered loading the subtitle track.Disabling subtitle track."),qx(n,i);var s=i.activeTrack();s&&(s.mode="disabled"),i.onTrackChanged()}}},o3={AUDIO:function(e,t,n){if(t){var i=n.tech,s=n.requestOptions,a=n.segmentLoaders[e];t.on("loadedmetadata",function(){var o=t.media();a.playlist(o,s),(!i.paused()||o.endList&&i.preload()!=="none")&&a.load()}),t.on("loadedplaylist",function(){a.playlist(t.media(),s),i.paused()||a.load()}),t.on("error",Gx[e](e,n))}},SUBTITLES:function(e,t,n){var i=n.tech,s=n.requestOptions,a=n.segmentLoaders[e],o=n.mediaTypes[e];t.on("loadedmetadata",function(){var l=t.media();a.playlist(l,s),a.track(o.activeTrack()),(!i.paused()||l.endList&&i.preload()!=="none")&&a.load()}),t.on("loadedplaylist",function(){a.playlist(t.media(),s),i.paused()||a.load()}),t.on("error",Gx[e](e,n))}},Kve={AUDIO:function(e,t){var n=t.vhs,i=t.sourceType,s=t.segmentLoaders[e],a=t.requestOptions,o=t.master.mediaGroups,l=t.mediaTypes[e],u=l.groups,c=l.tracks,h=l.logger_,m=t.masterPlaylistLoader,g=qg(m.master);(!o[e]||Object.keys(o[e]).length===0)&&(o[e]={main:{default:{default:!0}}},g&&(o[e].main.default.playlists=m.master.playlists));for(var y in o[e]){u[y]||(u[y]=[]);for(var v in o[e][y]){var x=o[e][y][v],w=void 0;if(g?(h("AUDIO group '"+y+"' label '"+v+"' is a master playlist"),x.isMasterPlaylist=!0,w=null):i==="vhs-json"&&x.playlists?w=new Zf(x.playlists[0],n,a):x.resolvedUri?w=new Zf(x.resolvedUri,n,a):x.playlists&&i==="dash"?w=new kE(x.playlists[0],n,a,m):w=null,x=Le.mergeOptions({id:v,playlistLoader:w},x),o3[e](e,x.playlistLoader,t),u[y].push(x),typeof c[v]>"u"){var E=new Le.AudioTrack({id:v,kind:Vve(x),enabled:!1,language:x.language,default:x.default,label:v});c[v]=E}}}s.on("error",Gx[e](e,t))},SUBTITLES:function(e,t){var n=t.tech,i=t.vhs,s=t.sourceType,a=t.segmentLoaders[e],o=t.requestOptions,l=t.master.mediaGroups,u=t.mediaTypes[e],c=u.groups,h=u.tracks,m=t.masterPlaylistLoader;for(var g in l[e]){c[g]||(c[g]=[]);for(var y in l[e][g])if(!l[e][g][y].forced){var v=l[e][g][y],x=void 0;if(s==="hls")x=new Zf(v.resolvedUri,i,o);else if(s==="dash"){var w=v.playlists.filter(function(D){return D.excludeUntil!==1/0});if(!w.length)return;x=new kE(v.playlists[0],i,o,m)}else s==="vhs-json"&&(x=new Zf(v.playlists?v.playlists[0]:v.resolvedUri,i,o));if(v=Le.mergeOptions({id:y,playlistLoader:x},v),o3[e](e,v.playlistLoader,t),c[g].push(v),typeof h[y]>"u"){var E=n.addRemoteTextTrack({id:y,kind:"subtitles",default:v.default&&v.autoselect,language:v.language,label:y},!1).track;h[y]=E}}}a.on("error",Gx[e](e,t))},"CLOSED-CAPTIONS":function(e,t){var n=t.tech,i=t.master.mediaGroups,s=t.mediaTypes[e],a=s.groups,o=s.tracks;for(var l in i[e]){a[l]||(a[l]=[]);for(var u in i[e][l]){var c=i[e][l][u];if(/^(?:CC|SERVICE)/.test(c.instreamId)){var h=n.options_.vhs&&n.options_.vhs.captionServices||{},m={label:u,language:c.language,instreamId:c.instreamId,default:c.default&&c.autoselect};if(h[m.instreamId]&&(m=Le.mergeOptions(m,h[m.instreamId])),m.default===void 0&&delete m.default,a[l].push(Le.mergeOptions({id:u},c)),typeof o[u]>"u"){var g=n.addRemoteTextTrack({id:m.instreamId,kind:"captions",default:m.default,language:m.language,label:m.label},!1).track;o[u]=g}}}}}},Xve=function r(e,t){for(var n=0;n<e.length;n++)if(mA(t,e[n])||e[n].playlists&&r(e[n].playlists,t))return!0;return!1},Yve=function(e,t){return function(n){var i=t.masterPlaylistLoader,s=t.mediaTypes[e].groups,a=i.media();if(!a)return null;var o=null;a.attributes[e]&&(o=s[a.attributes[e]]);var l=Object.keys(s);if(!o)if(e==="AUDIO"&&l.length>1&&qg(t.master))for(var u=0;u<l.length;u++){var c=s[l[u]];if(Xve(c,a)){o=c;break}}else s.main?o=s.main:l.length===1&&(o=s[l[0]]);return typeof n>"u"?o:n===null||!o?null:o.filter(function(h){return h.id===n.id})[0]||null}},Qve={AUDIO:function(e,t){return function(){var n=t.mediaTypes[e].tracks;for(var i in n)if(n[i].enabled)return n[i];return null}},SUBTITLES:function(e,t){return function(){var n=t.mediaTypes[e].tracks;for(var i in n)if(n[i].mode==="showing"||n[i].mode==="hidden")return n[i];return null}}},Jve=function(e,t){var n=t.mediaTypes;return function(){var i=n[e].activeTrack();return i?n[e].activeGroup(i):null}},Zve=function(e){["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(function(y){Kve[y](y,e)});var t=e.mediaTypes,n=e.masterPlaylistLoader,i=e.tech,s=e.vhs,a=e.segmentLoaders,o=a.AUDIO,l=a.main;["AUDIO","SUBTITLES"].forEach(function(y){t[y].activeGroup=Yve(y,e),t[y].activeTrack=Qve[y](y,e),t[y].onGroupChanged=Wve(y,e),t[y].onGroupChanging=qve(y,e),t[y].onTrackChanged=Gve(y,e),t[y].getActiveGroup=Jve(y,e)});var u=t.AUDIO.activeGroup();if(u){var c=(u.filter(function(y){return y.default})[0]||u[0]).id;t.AUDIO.tracks[c].enabled=!0,t.AUDIO.onGroupChanged(),t.AUDIO.onTrackChanged();var h=t.AUDIO.getActiveGroup();h.playlistLoader?(l.setAudio(!1),o.setAudio(!0)):l.setAudio(!0)}n.on("mediachange",function(){["AUDIO","SUBTITLES"].forEach(function(y){return t[y].onGroupChanged()})}),n.on("mediachanging",function(){["AUDIO","SUBTITLES"].forEach(function(y){return t[y].onGroupChanging()})});var m=function(){t.AUDIO.onTrackChanged(),i.trigger({type:"usage",name:"vhs-audio-change"}),i.trigger({type:"usage",name:"hls-audio-change"})};i.audioTracks().addEventListener("change",m),i.remoteTextTracks().addEventListener("change",t.SUBTITLES.onTrackChanged),s.on("dispose",function(){i.audioTracks().removeEventListener("change",m),i.remoteTextTracks().removeEventListener("change",t.SUBTITLES.onTrackChanged)}),i.clearTracks("audio");for(var g in t.AUDIO.tracks)i.audioTracks().addTrack(t.AUDIO.tracks[g])},eye=function(){var e={};return["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(function(t){e[t]={groups:{},tracks:{},activePlaylistLoader:null,activeGroup:gc,activeTrack:gc,getActiveGroup:gc,onGroupChanged:gc,onTrackChanged:gc,lastTrack_:null,logger_:Rl("MediaGroups["+t+"]")}}),e},tye=120,uc,rye=["mediaRequests","mediaRequestsAborted","mediaRequestsTimedout","mediaRequestsErrored","mediaTransferDuration","mediaBytesTransferred","mediaAppends"],nye=function(e){return this.audioSegmentLoader_[e]+this.mainSegmentLoader_[e]},iye=function(e){var t=e.currentPlaylist,n=e.buffered,i=e.currentTime,s=e.nextPlaylist,a=e.bufferLowWaterLine,o=e.bufferHighWaterLine,l=e.duration,u=e.experimentalBufferBasedABR,c=e.log;if(!s)return Le.log.warn("We received no playlist to switch to. Please check your stream."),!1;var h="allowing switch "+(t&&t.id||"null")+" -> "+s.id;if(!t)return c(h+" as current playlist is not set"),!0;if(s.id===t.id)return!1;var m=!!Jf(n,i).length;if(!t.endList)return!m&&typeof t.partTargetDuration=="number"?(c("not "+h+" as current playlist is live llhls, but currentTime isn't in buffered."),!1):(c(h+" as current playlist is live"),!0);var g=hA(n,i),y=u?Qi.EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE:Qi.MAX_BUFFER_LOW_WATER_LINE;if(l<y)return c(h+" as duration < max low water line ("+l+" < "+y+")"),!0;var v=s.attributes.BANDWIDTH,x=t.attributes.BANDWIDTH;if(v<x&&(!u||g<o)){var w=h+" as next bandwidth < current bandwidth ("+v+" < "+x+")";return u&&(w+=" and forwardBuffer < bufferHighWaterLine ("+g+" < "+o+")"),c(w),!0}if((!u||v>x)&&g>=a){var E=h+" as forwardBuffer >= bufferLowWaterLine ("+g+" >= "+a+")";return u&&(E+=" and next bandwidth > current bandwidth ("+v+" > "+x+")"),c(E),!0}return c("not "+h+" as no switching criteria met"),!1},sye=(function(r){$t(e,r);function e(n){var i;i=r.call(this)||this;var s=n.src,a=n.handleManifestRedirects,o=n.withCredentials,l=n.tech,u=n.bandwidth,c=n.externVhs,h=n.useCueTags,m=n.blacklistDuration,g=n.enableLowInitialPlaylist,y=n.sourceType,v=n.cacheEncryptionKeys,x=n.experimentalBufferBasedABR,w=n.experimentalLeastPixelDiffSelector,E=n.captionServices;if(!s)throw new Error("A non-empty playlist URL or JSON manifest string is required");var D=n.maxPlaylistRetries;(D===null||typeof D>"u")&&(D=1/0),uc=c,i.experimentalBufferBasedABR=!!x,i.experimentalLeastPixelDiffSelector=!!w,i.withCredentials=o,i.tech_=l,i.vhs_=l.vhs,i.sourceType_=y,i.useCueTags_=h,i.blacklistDuration=m,i.maxPlaylistRetries=D,i.enableLowInitialPlaylist=g,i.useCueTags_&&(i.cueTagsTrack_=i.tech_.addTextTrack("metadata","ad-cues"),i.cueTagsTrack_.inBandMetadataTrackDispatchType=""),i.requestOptions_={withCredentials:o,handleManifestRedirects:a,maxPlaylistRetries:D,timeout:null},i.on("error",i.pauseLoading),i.mediaTypes_=eye(),i.mediaSource=new X.MediaSource,i.handleDurationChange_=i.handleDurationChange_.bind(He(i)),i.handleSourceOpen_=i.handleSourceOpen_.bind(He(i)),i.handleSourceEnded_=i.handleSourceEnded_.bind(He(i)),i.mediaSource.addEventListener("durationchange",i.handleDurationChange_),i.mediaSource.addEventListener("sourceopen",i.handleSourceOpen_),i.mediaSource.addEventListener("sourceended",i.handleSourceEnded_),i.seekable_=Le.createTimeRanges(),i.hasPlayed_=!1,i.syncController_=new $ve(n),i.segmentMetadataTrack_=l.addRemoteTextTrack({kind:"metadata",label:"segment-metadata"},!1).track,i.decrypter_=new Hve,i.sourceUpdater_=new t7(i.mediaSource),i.inbandTextTracks_={},i.timelineChangeController_=new jve;var I={vhs:i.vhs_,parse708captions:n.parse708captions,useDtsForTimestampOffset:n.useDtsForTimestampOffset,captionServices:E,mediaSource:i.mediaSource,currentTime:i.tech_.currentTime.bind(i.tech_),seekable:function(){return i.seekable()},seeking:function(){return i.tech_.seeking()},duration:function(){return i.duration()},hasPlayed:function(){return i.hasPlayed_},goalBufferLength:function(){return i.goalBufferLength()},bandwidth:u,syncController:i.syncController_,decrypter:i.decrypter_,sourceType:i.sourceType_,inbandTextTracks:i.inbandTextTracks_,cacheEncryptionKeys:v,sourceUpdater:i.sourceUpdater_,timelineChangeController:i.timelineChangeController_,experimentalExactManifestTimings:n.experimentalExactManifestTimings};i.masterPlaylistLoader_=i.sourceType_==="dash"?new kE(s,i.vhs_,i.requestOptions_):new Zf(s,i.vhs_,i.requestOptions_),i.setupMasterPlaylistLoaderListeners_(),i.mainSegmentLoader_=new DE(Le.mergeOptions(I,{segmentMetadataTrack:i.segmentMetadataTrack_,loaderType:"main"}),n),i.audioSegmentLoader_=new DE(Le.mergeOptions(I,{loaderType:"audio"}),n),i.subtitleSegmentLoader_=new Fve(Le.mergeOptions(I,{loaderType:"vtt",featuresNativeTextTracks:i.tech_.featuresNativeTextTracks,loadVttJs:function(){return new Promise(function(N,U){function B(){l.off("vttjserror",k),N()}function k(){l.off("vttjsloaded",B),U()}l.one("vttjsloaded",B),l.one("vttjserror",k),l.addWebVttScript_()})}}),n),i.setupSegmentLoaderListeners_(),i.experimentalBufferBasedABR&&(i.masterPlaylistLoader_.one("loadedplaylist",function(){return i.startABRTimer_()}),i.tech_.on("pause",function(){return i.stopABRTimer_()}),i.tech_.on("play",function(){return i.startABRTimer_()})),rye.forEach(function(L){i[L+"_"]=nye.bind(He(i),L)}),i.logger_=Rl("MPC"),i.triggeredFmp4Usage=!1,i.tech_.preload()==="none"?(i.loadOnPlay_=function(){i.loadOnPlay_=null,i.masterPlaylistLoader_.load()},i.tech_.one("play",i.loadOnPlay_)):i.masterPlaylistLoader_.load(),i.timeToLoadedData__=-1,i.mainAppendsToLoadedData__=-1,i.audioAppendsToLoadedData__=-1;var A=i.tech_.preload()==="none"?"play":"loadstart";return i.tech_.one(A,function(){var L=Date.now();i.tech_.one("loadeddata",function(){i.timeToLoadedData__=Date.now()-L,i.mainAppendsToLoadedData__=i.mainSegmentLoader_.mediaAppends,i.audioAppendsToLoadedData__=i.audioSegmentLoader_.mediaAppends})}),i}var t=e.prototype;return t.mainAppendsToLoadedData_=function(){return this.mainAppendsToLoadedData__},t.audioAppendsToLoadedData_=function(){return this.audioAppendsToLoadedData__},t.appendsToLoadedData_=function(){var i=this.mainAppendsToLoadedData_(),s=this.audioAppendsToLoadedData_();return i===-1||s===-1?-1:i+s},t.timeToLoadedData_=function(){return this.timeToLoadedData__},t.checkABR_=function(i){i===void 0&&(i="abr");var s=this.selectPlaylist();s&&this.shouldSwitchToMedia_(s)&&this.switchMedia_(s,i)},t.switchMedia_=function(i,s,a){var o=this.media(),l=o&&(o.id||o.uri),u=i.id||i.uri;l&&l!==u&&(this.logger_("switch media "+l+" -> "+u+" from "+s),this.tech_.trigger({type:"usage",name:"vhs-rendition-change-"+s})),this.masterPlaylistLoader_.media(i,a)},t.startABRTimer_=function(){var i=this;this.stopABRTimer_(),this.abrTimer_=X.setInterval(function(){return i.checkABR_()},250)},t.stopABRTimer_=function(){this.tech_.scrubbing&&this.tech_.scrubbing()||(X.clearInterval(this.abrTimer_),this.abrTimer_=null)},t.getAudioTrackPlaylists_=function(){var i=this.master(),s=i&&i.playlists||[];if(!i||!i.mediaGroups||!i.mediaGroups.AUDIO)return s;var a=i.mediaGroups.AUDIO,o=Object.keys(a),l;if(Object.keys(this.mediaTypes_.AUDIO.groups).length)l=this.mediaTypes_.AUDIO.activeTrack();else{var u=a.main||o.length&&a[o[0]];for(var c in u)if(u[c].default){l={label:c};break}}if(!l)return s;var h=[];for(var m in a)if(a[m][l.label]){var g=a[m][l.label];if(g.playlists&&g.playlists.length)h.push.apply(h,g.playlists);else if(g.uri)h.push(g);else if(i.playlists.length)for(var y=0;y<i.playlists.length;y++){var v=i.playlists[y];v.attributes&&v.attributes.AUDIO&&v.attributes.AUDIO===m&&h.push(v)}}return h.length?h:s},t.setupMasterPlaylistLoaderListeners_=function(){var i=this;this.masterPlaylistLoader_.on("loadedmetadata",function(){var s=i.masterPlaylistLoader_.media(),a=s.targetDuration*1.5*1e3;SE(i.masterPlaylistLoader_.master,i.masterPlaylistLoader_.media())?i.requestOptions_.timeout=0:i.requestOptions_.timeout=a,s.endList&&i.tech_.preload()!=="none"&&(i.mainSegmentLoader_.playlist(s,i.requestOptions_),i.mainSegmentLoader_.load()),Zve({sourceType:i.sourceType_,segmentLoaders:{AUDIO:i.audioSegmentLoader_,SUBTITLES:i.subtitleSegmentLoader_,main:i.mainSegmentLoader_},tech:i.tech_,requestOptions:i.requestOptions_,masterPlaylistLoader:i.masterPlaylistLoader_,vhs:i.vhs_,master:i.master(),mediaTypes:i.mediaTypes_,blacklistCurrentPlaylist:i.blacklistCurrentPlaylist.bind(i)}),i.triggerPresenceUsage_(i.master(),s),i.setupFirstPlay(),!i.mediaTypes_.AUDIO.activePlaylistLoader||i.mediaTypes_.AUDIO.activePlaylistLoader.media()?i.trigger("selectedinitialmedia"):i.mediaTypes_.AUDIO.activePlaylistLoader.one("loadedmetadata",function(){i.trigger("selectedinitialmedia")})}),this.masterPlaylistLoader_.on("loadedplaylist",function(){i.loadOnPlay_&&i.tech_.off("play",i.loadOnPlay_);var s=i.masterPlaylistLoader_.media();if(!s){i.excludeUnsupportedVariants_();var a;if(i.enableLowInitialPlaylist&&(a=i.selectInitialPlaylist()),a||(a=i.selectPlaylist()),!a||!i.shouldSwitchToMedia_(a))return;i.initialMedia_=a,i.switchMedia_(i.initialMedia_,"initial");var o=i.sourceType_==="vhs-json"&&i.initialMedia_.segments;if(!o)return;s=i.initialMedia_}i.handleUpdatedMediaPlaylist(s)}),this.masterPlaylistLoader_.on("error",function(){i.blacklistCurrentPlaylist(i.masterPlaylistLoader_.error)}),this.masterPlaylistLoader_.on("mediachanging",function(){i.mainSegmentLoader_.abort(),i.mainSegmentLoader_.pause()}),this.masterPlaylistLoader_.on("mediachange",function(){var s=i.masterPlaylistLoader_.media(),a=s.targetDuration*1.5*1e3;SE(i.masterPlaylistLoader_.master,i.masterPlaylistLoader_.media())?i.requestOptions_.timeout=0:i.requestOptions_.timeout=a,i.masterPlaylistLoader_.load(),i.mainSegmentLoader_.playlist(s,i.requestOptions_),i.mainSegmentLoader_.load(),i.tech_.trigger({type:"mediachange",bubbles:!0})}),this.masterPlaylistLoader_.on("playlistunchanged",function(){var s=i.masterPlaylistLoader_.media();if(s.lastExcludeReason_!=="playlist-unchanged"){var a=i.stuckAtPlaylistEnd_(s);a&&(i.blacklistCurrentPlaylist({message:"Playlist no longer updating.",reason:"playlist-unchanged"}),i.tech_.trigger("playliststuck"))}}),this.masterPlaylistLoader_.on("renditiondisabled",function(){i.tech_.trigger({type:"usage",name:"vhs-rendition-disabled"}),i.tech_.trigger({type:"usage",name:"hls-rendition-disabled"})}),this.masterPlaylistLoader_.on("renditionenabled",function(){i.tech_.trigger({type:"usage",name:"vhs-rendition-enabled"}),i.tech_.trigger({type:"usage",name:"hls-rendition-enabled"})})},t.handleUpdatedMediaPlaylist=function(i){this.useCueTags_&&this.updateAdCues_(i),this.mainSegmentLoader_.playlist(i,this.requestOptions_),this.updateDuration(!i.endList),this.tech_.paused()||(this.mainSegmentLoader_.load(),this.audioSegmentLoader_&&this.audioSegmentLoader_.load())},t.triggerPresenceUsage_=function(i,s){var a=i.mediaGroups||{},o=!0,l=Object.keys(a.AUDIO);for(var u in a.AUDIO)for(var c in a.AUDIO[u]){var h=a.AUDIO[u][c];h.uri||(o=!1)}o&&(this.tech_.trigger({type:"usage",name:"vhs-demuxed"}),this.tech_.trigger({type:"usage",name:"hls-demuxed"})),Object.keys(a.SUBTITLES).length&&(this.tech_.trigger({type:"usage",name:"vhs-webvtt"}),this.tech_.trigger({type:"usage",name:"hls-webvtt"})),uc.Playlist.isAes(s)&&(this.tech_.trigger({type:"usage",name:"vhs-aes"}),this.tech_.trigger({type:"usage",name:"hls-aes"})),l.length&&Object.keys(a.AUDIO[l[0]]).length>1&&(this.tech_.trigger({type:"usage",name:"vhs-alternate-audio"}),this.tech_.trigger({type:"usage",name:"hls-alternate-audio"})),this.useCueTags_&&(this.tech_.trigger({type:"usage",name:"vhs-playlist-cue-tags"}),this.tech_.trigger({type:"usage",name:"hls-playlist-cue-tags"}))},t.shouldSwitchToMedia_=function(i){var s=this.masterPlaylistLoader_.media()||this.masterPlaylistLoader_.pendingMedia_,a=this.tech_.currentTime(),o=this.bufferLowWaterLine(),l=this.bufferHighWaterLine(),u=this.tech_.buffered();return iye({buffered:u,currentTime:a,currentPlaylist:s,nextPlaylist:i,bufferLowWaterLine:o,bufferHighWaterLine:l,duration:this.duration(),experimentalBufferBasedABR:this.experimentalBufferBasedABR,log:this.logger_})},t.setupSegmentLoaderListeners_=function(){var i=this;this.mainSegmentLoader_.on("bandwidthupdate",function(){i.checkABR_("bandwidthupdate"),i.tech_.trigger("bandwidthupdate")}),this.mainSegmentLoader_.on("timeout",function(){i.experimentalBufferBasedABR&&i.mainSegmentLoader_.load()}),this.experimentalBufferBasedABR||this.mainSegmentLoader_.on("progress",function(){i.trigger("progress")}),this.mainSegmentLoader_.on("error",function(){i.blacklistCurrentPlaylist(i.mainSegmentLoader_.error())}),this.mainSegmentLoader_.on("appenderror",function(){i.error=i.mainSegmentLoader_.error_,i.trigger("error")}),this.mainSegmentLoader_.on("syncinfoupdate",function(){i.onSyncInfoUpdate_()}),this.mainSegmentLoader_.on("timestampoffset",function(){i.tech_.trigger({type:"usage",name:"vhs-timestamp-offset"}),i.tech_.trigger({type:"usage",name:"hls-timestamp-offset"})}),this.audioSegmentLoader_.on("syncinfoupdate",function(){i.onSyncInfoUpdate_()}),this.audioSegmentLoader_.on("appenderror",function(){i.error=i.audioSegmentLoader_.error_,i.trigger("error")}),this.mainSegmentLoader_.on("ended",function(){i.logger_("main segment loader ended"),i.onEndOfStream()}),this.mainSegmentLoader_.on("earlyabort",function(a){i.experimentalBufferBasedABR||(i.delegateLoaders_("all",["abort"]),i.blacklistCurrentPlaylist({message:"Aborted early because there isn't enough bandwidth to complete the request without rebuffering."},tye))});var s=function(){if(!i.sourceUpdater_.hasCreatedSourceBuffers())return i.tryToCreateSourceBuffers_();var o=i.getCodecsOrExclude_();o&&i.sourceUpdater_.addOrChangeSourceBuffers(o)};this.mainSegmentLoader_.on("trackinfo",s),this.audioSegmentLoader_.on("trackinfo",s),this.mainSegmentLoader_.on("fmp4",function(){i.triggeredFmp4Usage||(i.tech_.trigger({type:"usage",name:"vhs-fmp4"}),i.tech_.trigger({type:"usage",name:"hls-fmp4"}),i.triggeredFmp4Usage=!0)}),this.audioSegmentLoader_.on("fmp4",function(){i.triggeredFmp4Usage||(i.tech_.trigger({type:"usage",name:"vhs-fmp4"}),i.tech_.trigger({type:"usage",name:"hls-fmp4"}),i.triggeredFmp4Usage=!0)}),this.audioSegmentLoader_.on("ended",function(){i.logger_("audioSegmentLoader ended"),i.onEndOfStream()})},t.mediaSecondsLoaded_=function(){return Math.max(this.audioSegmentLoader_.mediaSecondsLoaded+this.mainSegmentLoader_.mediaSecondsLoaded)},t.load=function(){this.mainSegmentLoader_.load(),this.mediaTypes_.AUDIO.activePlaylistLoader&&this.audioSegmentLoader_.load(),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&this.subtitleSegmentLoader_.load()},t.smoothQualityChange_=function(i){i===void 0&&(i=this.selectPlaylist()),this.fastQualityChange_(i)},t.fastQualityChange_=function(i){var s=this;if(i===void 0&&(i=this.selectPlaylist()),i===this.masterPlaylistLoader_.media()){this.logger_("skipping fastQualityChange because new media is same as old");return}this.switchMedia_(i,"fast-quality"),this.mainSegmentLoader_.resetEverything(function(){Le.browser.IE_VERSION||Le.browser.IS_EDGE?s.tech_.setCurrentTime(s.tech_.currentTime()+.04):s.tech_.setCurrentTime(s.tech_.currentTime())})},t.play=function(){if(!this.setupFirstPlay()){this.tech_.ended()&&this.tech_.setCurrentTime(0),this.hasPlayed_&&this.load();var i=this.tech_.seekable();if(this.tech_.duration()===1/0&&this.tech_.currentTime()<i.start(0))return this.tech_.setCurrentTime(i.end(i.length-1))}},t.setupFirstPlay=function(){var i=this,s=this.masterPlaylistLoader_.media();if(!s||this.tech_.paused()||this.hasPlayed_)return!1;if(!s.endList){var a=this.seekable();if(!a.length)return!1;if(Le.browser.IE_VERSION&&this.tech_.readyState()===0)return this.tech_.one("loadedmetadata",function(){i.trigger("firstplay"),i.tech_.setCurrentTime(a.end(0)),i.hasPlayed_=!0}),!1;this.trigger("firstplay"),this.tech_.setCurrentTime(a.end(0))}return this.hasPlayed_=!0,this.load(),!0},t.handleSourceOpen_=function(){if(this.tryToCreateSourceBuffers_(),this.tech_.autoplay()){var i=this.tech_.play();typeof i<"u"&&typeof i.then=="function"&&i.then(null,function(s){})}this.trigger("sourceopen")},t.handleSourceEnded_=function(){if(this.inbandTextTracks_.metadataTrack_){var i=this.inbandTextTracks_.metadataTrack_.cues;if(!(!i||!i.length)){var s=this.duration();i[i.length-1].endTime=isNaN(s)||Math.abs(s)===1/0?Number.MAX_VALUE:s}}},t.handleDurationChange_=function(){this.tech_.trigger("durationchange")},t.onEndOfStream=function(){var i=this.mainSegmentLoader_.ended_;if(this.mediaTypes_.AUDIO.activePlaylistLoader){var s=this.mainSegmentLoader_.getCurrentMediaInfo_();!s||s.hasVideo?i=i&&this.audioSegmentLoader_.ended_:i=this.audioSegmentLoader_.ended_}i&&(this.stopABRTimer_(),this.sourceUpdater_.endOfStream())},t.stuckAtPlaylistEnd_=function(i){var s=this.seekable();if(!s.length)return!1;var a=this.syncController_.getExpiredTime(i,this.duration());if(a===null)return!1;var o=uc.Playlist.playlistEnd(i,a),l=this.tech_.currentTime(),u=this.tech_.buffered();if(!u.length)return o-l<=gu;var c=u.end(u.length-1);return c-l<=gu&&o-c<=gu},t.blacklistCurrentPlaylist=function(i,s){i===void 0&&(i={});var a=i.playlist||this.masterPlaylistLoader_.media();if(s=s||i.blacklistDuration||this.blacklistDuration,!a){this.error=i,this.mediaSource.readyState!=="open"?this.trigger("error"):this.sourceUpdater_.endOfStream("network");return}a.playlistErrors_++;var o=this.masterPlaylistLoader_.master.playlists,l=o.filter(_S),u=l.length===1&&l[0]===a;if(o.length===1&&s!==1/0)return Le.log.warn("Problem encountered with playlist "+a.id+". Trying again since it is the only playlist."),this.tech_.trigger("retryplaylist"),this.masterPlaylistLoader_.load(u);if(u){var c=!1;o.forEach(function(w){if(w!==a){var E=w.excludeUntil;typeof E<"u"&&E!==1/0&&(c=!0,delete w.excludeUntil)}}),c&&(Le.log.warn("Removing other playlists from the exclusion list because the last rendition is about to be excluded."),this.tech_.trigger("retryplaylist"))}var h;a.playlistErrors_>this.maxPlaylistRetries?h=1/0:h=Date.now()+s*1e3,a.excludeUntil=h,i.reason&&(a.lastExcludeReason_=i.reason),this.tech_.trigger("blacklistplaylist"),this.tech_.trigger({type:"usage",name:"vhs-rendition-blacklisted"}),this.tech_.trigger({type:"usage",name:"hls-rendition-blacklisted"});var m=this.selectPlaylist();if(!m){this.error="Playback cannot continue. No available working or supported playlists.",this.trigger("error");return}var g=i.internal?this.logger_:Le.log.warn,y=i.message?" "+i.message:"";g((i.internal?"Internal problem":"Problem")+" encountered with playlist "+a.id+"."+(y+" Switching to playlist "+m.id+".")),m.attributes.AUDIO!==a.attributes.AUDIO&&this.delegateLoaders_("audio",["abort","pause"]),m.attributes.SUBTITLES!==a.attributes.SUBTITLES&&this.delegateLoaders_("subtitle",["abort","pause"]),this.delegateLoaders_("main",["abort","pause"]);var v=m.targetDuration/2*1e3||5*1e3,x=typeof m.lastRequest=="number"&&Date.now()-m.lastRequest<=v;return this.switchMedia_(m,"exclude",u||x)},t.pauseLoading=function(){this.delegateLoaders_("all",["abort","pause"]),this.stopABRTimer_()},t.delegateLoaders_=function(i,s){var a=this,o=[],l=i==="all";(l||i==="main")&&o.push(this.masterPlaylistLoader_);var u=[];(l||i==="audio")&&u.push("AUDIO"),(l||i==="subtitle")&&(u.push("CLOSED-CAPTIONS"),u.push("SUBTITLES")),u.forEach(function(c){var h=a.mediaTypes_[c]&&a.mediaTypes_[c].activePlaylistLoader;h&&o.push(h)}),["main","audio","subtitle"].forEach(function(c){var h=a[c+"SegmentLoader_"];h&&(i===c||i==="all")&&o.push(h)}),o.forEach(function(c){return s.forEach(function(h){typeof c[h]=="function"&&c[h]()})})},t.setCurrentTime=function(i){var s=Jf(this.tech_.buffered(),i);if(!(this.masterPlaylistLoader_&&this.masterPlaylistLoader_.media())||!this.masterPlaylistLoader_.media().segments)return 0;if(s&&s.length)return i;this.mainSegmentLoader_.resetEverything(),this.mainSegmentLoader_.abort(),this.mediaTypes_.AUDIO.activePlaylistLoader&&(this.audioSegmentLoader_.resetEverything(),this.audioSegmentLoader_.abort()),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&(this.subtitleSegmentLoader_.resetEverything(),this.subtitleSegmentLoader_.abort()),this.load()},t.duration=function(){if(!this.masterPlaylistLoader_)return 0;var i=this.masterPlaylistLoader_.media();return i?i.endList?this.mediaSource?this.mediaSource.duration:uc.Playlist.duration(i):1/0:0},t.seekable=function(){return this.seekable_},t.onSyncInfoUpdate_=function(){var i;if(this.masterPlaylistLoader_){var s=this.masterPlaylistLoader_.media();if(s){var a=this.syncController_.getExpiredTime(s,this.duration());if(a!==null){var o=this.masterPlaylistLoader_.master,l=uc.Playlist.seekable(s,a,uc.Playlist.liveEdgeDelay(o,s));if(l.length!==0&&!(this.mediaTypes_.AUDIO.activePlaylistLoader&&(s=this.mediaTypes_.AUDIO.activePlaylistLoader.media(),a=this.syncController_.getExpiredTime(s,this.duration()),a===null||(i=uc.Playlist.seekable(s,a,uc.Playlist.liveEdgeDelay(o,s)),i.length===0)))){var u,c;this.seekable_&&this.seekable_.length&&(u=this.seekable_.end(0),c=this.seekable_.start(0)),i?i.start(0)>l.end(0)||l.start(0)>i.end(0)?this.seekable_=l:this.seekable_=Le.createTimeRanges([[i.start(0)>l.start(0)?i.start(0):l.start(0),i.end(0)<l.end(0)?i.end(0):l.end(0)]]):this.seekable_=l,!(this.seekable_&&this.seekable_.length&&this.seekable_.end(0)===u&&this.seekable_.start(0)===c)&&(this.logger_("seekable updated ["+yj(this.seekable_)+"]"),this.tech_.trigger("seekablechanged"))}}}}},t.updateDuration=function(i){if(this.updateDuration_&&(this.mediaSource.removeEventListener("sourceopen",this.updateDuration_),this.updateDuration_=null),this.mediaSource.readyState!=="open"){this.updateDuration_=this.updateDuration.bind(this,i),this.mediaSource.addEventListener("sourceopen",this.updateDuration_);return}if(i){var s=this.seekable();if(!s.length)return;(isNaN(this.mediaSource.duration)||this.mediaSource.duration<s.end(s.length-1))&&this.sourceUpdater_.setDuration(s.end(s.length-1));return}var a=this.tech_.buffered(),o=uc.Playlist.duration(this.masterPlaylistLoader_.media());a.length>0&&(o=Math.max(o,a.end(a.length-1))),this.mediaSource.duration!==o&&this.sourceUpdater_.setDuration(o)},t.dispose=function(){var i=this;this.trigger("dispose"),this.decrypter_.terminate(),this.masterPlaylistLoader_.dispose(),this.mainSegmentLoader_.dispose(),this.loadOnPlay_&&this.tech_.off("play",this.loadOnPlay_),["AUDIO","SUBTITLES"].forEach(function(s){var a=i.mediaTypes_[s].groups;for(var o in a)a[o].forEach(function(l){l.playlistLoader&&l.playlistLoader.dispose()})}),this.audioSegmentLoader_.dispose(),this.subtitleSegmentLoader_.dispose(),this.sourceUpdater_.dispose(),this.timelineChangeController_.dispose(),this.stopABRTimer_(),this.updateDuration_&&this.mediaSource.removeEventListener("sourceopen",this.updateDuration_),this.mediaSource.removeEventListener("durationchange",this.handleDurationChange_),this.mediaSource.removeEventListener("sourceopen",this.handleSourceOpen_),this.mediaSource.removeEventListener("sourceended",this.handleSourceEnded_),this.off()},t.master=function(){return this.masterPlaylistLoader_.master},t.media=function(){return this.masterPlaylistLoader_.media()||this.initialMedia_},t.areMediaTypesKnown_=function(){var i=!!this.mediaTypes_.AUDIO.activePlaylistLoader,s=!!this.mainSegmentLoader_.getCurrentMediaInfo_(),a=i?!!this.audioSegmentLoader_.getCurrentMediaInfo_():!0;return!(!s||!a)},t.getCodecsOrExclude_=function(){var i=this,s={main:this.mainSegmentLoader_.getCurrentMediaInfo_()||{},audio:this.audioSegmentLoader_.getCurrentMediaInfo_()||{}},a=this.mainSegmentLoader_.getPendingSegmentPlaylist()||this.media();s.video=s.main;var o=F0(this.master(),a),l={},u=!!this.mediaTypes_.AUDIO.activePlaylistLoader;if(s.main.hasVideo&&(l.video=o.video||s.main.videoCodec||tpe),s.main.isMuxed&&(l.video+=","+(o.audio||s.main.audioCodec||r4)),(s.main.hasAudio&&!s.main.isMuxed||s.audio.hasAudio||u)&&(l.audio=o.audio||s.main.audioCodec||s.audio.audioCodec||r4,s.audio.isFmp4=s.main.hasAudio&&!s.main.isMuxed?s.main.isFmp4:s.audio.isFmp4),!l.audio&&!l.video){this.blacklistCurrentPlaylist({playlist:a,message:"Could not determine codecs for playlist.",blacklistDuration:1/0});return}var c=function(w,E){return w?C_(E):oC(E)},h={},m;if(["video","audio"].forEach(function(x){if(l.hasOwnProperty(x)&&!c(s[x].isFmp4,l[x])){var w=s[x].isFmp4?"browser":"muxer";h[w]=h[w]||[],h[w].push(l[x]),x==="audio"&&(m=w)}}),u&&m&&a.attributes.AUDIO){var g=a.attributes.AUDIO;this.master().playlists.forEach(function(x){var w=x.attributes&&x.attributes.AUDIO;w===g&&x!==a&&(x.excludeUntil=1/0)}),this.logger_("excluding audio group "+g+" as "+m+' does not support codec(s): "'+l.audio+'"')}if(Object.keys(h).length){var y=Object.keys(h).reduce(function(x,w){return x&&(x+=", "),x+=w+' does not support codec(s): "'+h[w].join(",")+'"',x},"")+".";this.blacklistCurrentPlaylist({playlist:a,internal:!0,message:y,blacklistDuration:1/0});return}if(this.sourceUpdater_.hasCreatedSourceBuffers()&&!this.sourceUpdater_.canChangeType()){var v=[];if(["video","audio"].forEach(function(x){var w=(tu(i.sourceUpdater_.codecs[x]||"")[0]||{}).type,E=(tu(l[x]||"")[0]||{}).type;w&&E&&w.toLowerCase()!==E.toLowerCase()&&v.push('"'+i.sourceUpdater_.codecs[x]+'" -> "'+l[x]+'"')}),v.length){this.blacklistCurrentPlaylist({playlist:a,message:"Codec switching not supported: "+v.join(", ")+".",blacklistDuration:1/0,internal:!0});return}}return l},t.tryToCreateSourceBuffers_=function(){if(!(this.mediaSource.readyState!=="open"||this.sourceUpdater_.hasCreatedSourceBuffers())&&this.areMediaTypesKnown_()){var i=this.getCodecsOrExclude_();if(i){this.sourceUpdater_.createSourceBuffers(i);var s=[i.video,i.audio].filter(Boolean).join(",");this.excludeIncompatibleVariants_(s)}}},t.excludeUnsupportedVariants_=function(){var i=this,s=this.master().playlists,a=[];Object.keys(s).forEach(function(o){var l=s[o];if(a.indexOf(l.id)===-1){a.push(l.id);var u=F0(i.master,l),c=[];u.audio&&!oC(u.audio)&&!C_(u.audio)&&c.push("audio codec "+u.audio),u.video&&!oC(u.video)&&!C_(u.video)&&c.push("video codec "+u.video),u.text&&u.text==="stpp.ttml.im1t"&&c.push("text codec "+u.text),c.length&&(l.excludeUntil=1/0,i.logger_("excluding "+l.id+" for unsupported: "+c.join(", ")))}})},t.excludeIncompatibleVariants_=function(i){var s=this,a=[],o=this.master().playlists,l=Vx(tu(i)),u=Y4(l),c=l.video&&tu(l.video)[0]||null,h=l.audio&&tu(l.audio)[0]||null;Object.keys(o).forEach(function(m){var g=o[m];if(!(a.indexOf(g.id)!==-1||g.excludeUntil===1/0)){a.push(g.id);var y=[],v=F0(s.masterPlaylistLoader_.master,g),x=Y4(v);if(!(!v.audio&&!v.video)){if(x!==u&&y.push('codec count "'+x+'" !== "'+u+'"'),!s.sourceUpdater_.canChangeType()){var w=v.video&&tu(v.video)[0]||null,E=v.audio&&tu(v.audio)[0]||null;w&&c&&w.type.toLowerCase()!==c.type.toLowerCase()&&y.push('video codec "'+w.type+'" !== "'+c.type+'"'),E&&h&&E.type.toLowerCase()!==h.type.toLowerCase()&&y.push('audio codec "'+E.type+'" !== "'+h.type+'"')}y.length&&(g.excludeUntil=1/0,s.logger_("blacklisting "+g.id+": "+y.join(" && ")))}}})},t.updateAdCues_=function(i){var s=0,a=this.seekable();a.length&&(s=a.start(0)),Nve(i,this.cueTagsTrack_,s)},t.goalBufferLength=function(){var i=this.tech_.currentTime(),s=Qi.GOAL_BUFFER_LENGTH,a=Qi.GOAL_BUFFER_LENGTH_RATE,o=Math.max(s,Qi.MAX_GOAL_BUFFER_LENGTH);return Math.min(s+i*a,o)},t.bufferLowWaterLine=function(){var i=this.tech_.currentTime(),s=Qi.BUFFER_LOW_WATER_LINE,a=Qi.BUFFER_LOW_WATER_LINE_RATE,o=Math.max(s,Qi.MAX_BUFFER_LOW_WATER_LINE),l=Math.max(s,Qi.EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE);return Math.min(s+i*a,this.experimentalBufferBasedABR?l:o)},t.bufferHighWaterLine=function(){return Qi.BUFFER_HIGH_WATER_LINE},e})(Le.EventTarget),aye=function(e,t,n){return function(i){var s=e.master.playlists[t],a=pA(s),o=_S(s);return typeof i>"u"?o:(i?delete s.disabled:s.disabled=!0,i!==o&&!a&&(n(),i?e.trigger("renditionenabled"):e.trigger("renditiondisabled")),i)}},oye=function(e,t,n){var i=e.masterPlaylistController_,s=e.options_.smoothQualityChange,a=s?"smooth":"fast",o=i[a+"QualityChange_"].bind(i);if(t.attributes){var l=t.attributes.RESOLUTION;this.width=l&&l.width,this.height=l&&l.height,this.bandwidth=t.attributes.BANDWIDTH,this.frameRate=t.attributes["FRAME-RATE"]}this.codecs=F0(i.master(),t),this.playlist=t,this.id=n,this.enabled=aye(e.playlists,t.id,o)},lye=function(e){e.representations=function(){var t=e.masterPlaylistController_.master(),n=qg(t)?e.masterPlaylistController_.getAudioTrackPlaylists_():t.playlists;return n?n.filter(function(i){return!pA(i)}).map(function(i,s){return new oye(e,i,i.id)}):[]}},l3=["seeking","seeked","pause","playing","error"],uye=(function(){function r(t){var n=this;this.masterPlaylistController_=t.masterPlaylistController,this.tech_=t.tech,this.seekable=t.seekable,this.allowSeeksWithinUnsafeLiveWindow=t.allowSeeksWithinUnsafeLiveWindow,this.liveRangeSafeTimeDelta=t.liveRangeSafeTimeDelta,this.media=t.media,this.consecutiveUpdates=0,this.lastRecordedTime=null,this.timer_=null,this.checkCurrentTimeTimeout_=null,this.logger_=Rl("PlaybackWatcher"),this.logger_("initialize");var i=function(){return n.monitorCurrentTime_()},s=function(){return n.monitorCurrentTime_()},a=function(){return n.techWaiting_()},o=function(){return n.cancelTimer_()},l=this.masterPlaylistController_,u=["main","subtitle","audio"],c={};u.forEach(function(m){c[m]={reset:function(){return n.resetSegmentDownloads_(m)},updateend:function(){return n.checkSegmentDownloads_(m)}},l[m+"SegmentLoader_"].on("appendsdone",c[m].updateend),l[m+"SegmentLoader_"].on("playlistupdate",c[m].reset),n.tech_.on(["seeked","seeking"],c[m].reset)});var h=function(g){["main","audio"].forEach(function(y){l[y+"SegmentLoader_"][g]("appended",n.seekingAppendCheck_)})};this.seekingAppendCheck_=function(){n.fixesBadSeeks_()&&(n.consecutiveUpdates=0,n.lastRecordedTime=n.tech_.currentTime(),h("off"))},this.clearSeekingAppendCheck_=function(){return h("off")},this.watchForBadSeeking_=function(){n.clearSeekingAppendCheck_(),h("on")},this.tech_.on("seeked",this.clearSeekingAppendCheck_),this.tech_.on("seeking",this.watchForBadSeeking_),this.tech_.on("waiting",a),this.tech_.on(l3,o),this.tech_.on("canplay",s),this.tech_.one("play",i),this.dispose=function(){n.clearSeekingAppendCheck_(),n.logger_("dispose"),n.tech_.off("waiting",a),n.tech_.off(l3,o),n.tech_.off("canplay",s),n.tech_.off("play",i),n.tech_.off("seeking",n.watchForBadSeeking_),n.tech_.off("seeked",n.clearSeekingAppendCheck_),u.forEach(function(m){l[m+"SegmentLoader_"].off("appendsdone",c[m].updateend),l[m+"SegmentLoader_"].off("playlistupdate",c[m].reset),n.tech_.off(["seeked","seeking"],c[m].reset)}),n.checkCurrentTimeTimeout_&&X.clearTimeout(n.checkCurrentTimeTimeout_),n.cancelTimer_()}}var e=r.prototype;return e.monitorCurrentTime_=function(){this.checkCurrentTime_(),this.checkCurrentTimeTimeout_&&X.clearTimeout(this.checkCurrentTimeTimeout_),this.checkCurrentTimeTimeout_=X.setTimeout(this.monitorCurrentTime_.bind(this),250)},e.resetSegmentDownloads_=function(n){var i=this.masterPlaylistController_[n+"SegmentLoader_"];this[n+"StalledDownloads_"]>0&&this.logger_("resetting possible stalled download count for "+n+" loader"),this[n+"StalledDownloads_"]=0,this[n+"Buffered_"]=i.buffered_()},e.checkSegmentDownloads_=function(n){var i=this.masterPlaylistController_,s=i[n+"SegmentLoader_"],a=s.buffered_(),o=ege(this[n+"Buffered_"],a);if(this[n+"Buffered_"]=a,o){this.resetSegmentDownloads_(n);return}this[n+"StalledDownloads_"]++,this.logger_("found #"+this[n+"StalledDownloads_"]+" "+n+" appends that did not increase buffer (possible stalled download)",{playlistId:s.playlist_&&s.playlist_.id,buffered:Ah(a)}),!(this[n+"StalledDownloads_"]<10)&&(this.logger_(n+" loader stalled download exclusion"),this.resetSegmentDownloads_(n),this.tech_.trigger({type:"usage",name:"vhs-"+n+"-download-exclusion"}),n!=="subtitle"&&i.blacklistCurrentPlaylist({message:"Excessive "+n+" segment downloading detected."},1/0))},e.checkCurrentTime_=function(){if(!(this.tech_.paused()||this.tech_.seeking())){var n=this.tech_.currentTime(),i=this.tech_.buffered();if(this.lastRecordedTime===n&&(!i.length||n+gu>=i.end(i.length-1)))return this.techWaiting_();this.consecutiveUpdates>=5&&n===this.lastRecordedTime?(this.consecutiveUpdates++,this.waiting_()):n===this.lastRecordedTime?this.consecutiveUpdates++:(this.consecutiveUpdates=0,this.lastRecordedTime=n)}},e.cancelTimer_=function(){this.consecutiveUpdates=0,this.timer_&&(this.logger_("cancelTimer_"),clearTimeout(this.timer_)),this.timer_=null},e.fixesBadSeeks_=function(){var n=this.tech_.seeking();if(!n)return!1;var i=this.seekable(),s=this.tech_.currentTime(),a=this.afterSeekableWindow_(i,s,this.media(),this.allowSeeksWithinUnsafeLiveWindow),o;if(a){var l=i.end(i.length-1);o=l}if(this.beforeSeekableWindow_(i,s)){var u=i.start(0);o=u+(u===i.end(0)?0:gu)}if(typeof o<"u")return this.logger_("Trying to seek outside of seekable at time "+s+" with "+("seekable range "+yj(i)+". Seeking to ")+(o+".")),this.tech_.setCurrentTime(o),!0;for(var c=this.masterPlaylistController_.sourceUpdater_,h=this.tech_.buffered(),m=c.audioBuffer?c.audioBuffered():null,g=c.videoBuffer?c.videoBuffered():null,y=this.media(),v=y.partTargetDuration?y.partTargetDuration:(y.targetDuration-Md)*2,x=[m,g],w=0;w<x.length;w++)if(x[w]){var E=hA(x[w],s);if(E<v)return!1}var D=gy(h,s);return D.length===0?!1:(o=D.start(0)+gu,this.logger_("Buffered region starts ("+D.start(0)+") "+(" just beyond seek point ("+s+"). Seeking to "+o+".")),this.tech_.setCurrentTime(o),!0)},e.waiting_=function(){if(!this.techWaiting_()){var n=this.tech_.currentTime(),i=this.tech_.buffered(),s=Jf(i,n);if(s.length&&n+3<=s.end(0)){this.cancelTimer_(),this.tech_.setCurrentTime(n),this.logger_("Stopped at "+n+" while inside a buffered region "+("["+s.start(0)+" -> "+s.end(0)+"]. Attempting to resume ")+"playback by seeking to the current time."),this.tech_.trigger({type:"usage",name:"vhs-unknown-waiting"}),this.tech_.trigger({type:"usage",name:"hls-unknown-waiting"});return}}},e.techWaiting_=function(){var n=this.seekable(),i=this.tech_.currentTime();if(this.tech_.seeking()||this.timer_!==null)return!0;if(this.beforeSeekableWindow_(n,i)){var s=n.end(n.length-1);return this.logger_("Fell out of live window at time "+i+". Seeking to "+("live point (seekable end) "+s)),this.cancelTimer_(),this.tech_.setCurrentTime(s),this.tech_.trigger({type:"usage",name:"vhs-live-resync"}),this.tech_.trigger({type:"usage",name:"hls-live-resync"}),!0}var a=this.tech_.vhs.masterPlaylistController_.sourceUpdater_,o=this.tech_.buffered(),l=this.videoUnderflow_({audioBuffered:a.audioBuffered(),videoBuffered:a.videoBuffered(),currentTime:i});if(l)return this.cancelTimer_(),this.tech_.setCurrentTime(i),this.tech_.trigger({type:"usage",name:"vhs-video-underflow"}),this.tech_.trigger({type:"usage",name:"hls-video-underflow"}),!0;var u=gy(o,i);if(u.length>0){var c=u.start(0)-i;return this.logger_("Stopped at "+i+", setting timer for "+c+", seeking "+("to "+u.start(0))),this.cancelTimer_(),this.timer_=setTimeout(this.skipTheGap_.bind(this),c*1e3,i),!0}return!1},e.afterSeekableWindow_=function(n,i,s,a){if(a===void 0&&(a=!1),!n.length)return!1;var o=n.end(n.length-1)+gu,l=!s.endList;return l&&a&&(o=n.end(n.length-1)+s.targetDuration*3),i>o},e.beforeSeekableWindow_=function(n,i){return!!(n.length&&n.start(0)>0&&i<n.start(0)-this.liveRangeSafeTimeDelta)},e.videoUnderflow_=function(n){var i=n.videoBuffered,s=n.audioBuffered,a=n.currentTime;if(i){var o;if(i.length&&s.length){var l=Jf(i,a-3),u=Jf(i,a),c=Jf(s,a);c.length&&!u.length&&l.length&&(o={start:l.end(0),end:c.end(0)})}else{var h=gy(i,a);h.length||(o=this.gapFromVideoUnderflow_(i,a))}return o?(this.logger_("Encountered a gap in video from "+o.start+" to "+o.end+". "+("Seeking to current time "+a)),!0):!1}},e.skipTheGap_=function(n){var i=this.tech_.buffered(),s=this.tech_.currentTime(),a=gy(i,s);this.cancelTimer_(),!(a.length===0||s!==n)&&(this.logger_("skipTheGap_:","currentTime:",s,"scheduled currentTime:",n,"nextRange start:",a.start(0)),this.tech_.setCurrentTime(a.start(0)+Md),this.tech_.trigger({type:"usage",name:"vhs-gap-skip"}),this.tech_.trigger({type:"usage",name:"hls-gap-skip"}))},e.gapFromVideoUnderflow_=function(n,i){for(var s=Q0e(n),a=0;a<s.length;a++){var o=s.start(a),l=s.end(a);if(i-o<4&&i-o>2)return{start:o,end:l}}return null},r})(),cye={errorInterval:30,getSource:function(e){var t=this.tech({IWillNotUseThisInPlugins:!0}),n=t.currentSource_||this.currentSource();return e(n)}},dye=function r(e,t){var n=0,i=0,s=Le.mergeOptions(cye,t);e.ready(function(){e.trigger({type:"usage",name:"vhs-error-reload-initialized"}),e.trigger({type:"usage",name:"hls-error-reload-initialized"})});var a=function(){i&&e.currentTime(i)},o=function(m){m!=null&&(i=e.duration()!==1/0&&e.currentTime()||0,e.one("loadedmetadata",a),e.src(m),e.trigger({type:"usage",name:"vhs-error-reload"}),e.trigger({type:"usage",name:"hls-error-reload"}),e.play())},l=function(){if(Date.now()-n<s.errorInterval*1e3){e.trigger({type:"usage",name:"vhs-error-reload-canceled"}),e.trigger({type:"usage",name:"hls-error-reload-canceled"});return}if(!s.getSource||typeof s.getSource!="function"){Le.log.error("ERROR: reloadSourceOnError - The option getSource must be a function!");return}return n=Date.now(),s.getSource.call(e,o)},u=function h(){e.off("loadedmetadata",a),e.off("error",l),e.off("dispose",h)},c=function(m){u(),r(e,m)};e.on("error",l),e.on("dispose",u),e.reloadSourceOnError=c},hye=function(e){dye(this,e)},r7="2.16.3",fye="6.0.1",pye="0.22.1",mye="4.8.0",gye="3.1.3",_s={PlaylistLoader:Zf,Playlist:Ma,utils:wge,STANDARD_PLAYLIST_SELECTOR:J4,INITIAL_PLAYLIST_SELECTOR:pve,lastBandwidthSelector:J4,movingAverageBandwidthSelector:hve,comparePlaylistBandwidth:yA,comparePlaylistResolution:dve,xhr:Lj()};Object.keys(Qi).forEach(function(r){Object.defineProperty(_s,r,{get:function(){return Le.log.warn("using Vhs."+r+" is UNSAFE be sure you know what you are doing"),Qi[r]},set:function(t){if(Le.log.warn("using Vhs."+r+" is UNSAFE be sure you know what you are doing"),typeof t!="number"||t<0){Le.log.warn("value of Vhs."+r+" must be greater than or equal to 0");return}Qi[r]=t}})});var n7="videojs-vhs",i7=function(e,t){for(var n=t.media(),i=-1,s=0;s<e.length;s++)if(e[s].id===n.id){i=s;break}e.selectedIndex_=i,e.trigger({selectedIndex:i,type:"change"})},vye=function(e,t){t.representations().forEach(function(n){e.addQualityLevel(n)}),i7(e,t.playlists)};_s.canPlaySource=function(){return Le.log.warn("HLS is no longer a tech. Please remove it from your player's techOrder.")};var yye=function(e,t,n){if(!e)return e;var i={};t&&t.attributes&&t.attributes.CODECS&&(i=Vx(tu(t.attributes.CODECS))),n&&n.attributes&&n.attributes.CODECS&&(i.audio=n.attributes.CODECS);var s=ng(i.video),a=ng(i.audio),o={};for(var l in e)o[l]={},a&&(o[l].audioContentType=a),s&&(o[l].videoContentType=s),t.contentProtection&&t.contentProtection[l]&&t.contentProtection[l].pssh&&(o[l].pssh=t.contentProtection[l].pssh),typeof e[l]=="string"&&(o[l].url=e[l]);return Le.mergeOptions(e,o)},_ye=function(e,t){return e.reduce(function(n,i){if(!i.contentProtection)return n;var s=t.reduce(function(a,o){var l=i.contentProtection[o];return l&&l.pssh&&(a[o]={pssh:l.pssh}),a},{});return Object.keys(s).length&&n.push(s),n},[])},xye=function(e){var t=e.player,n=e.sourceKeySystems,i=e.audioMedia,s=e.mainPlaylists;if(!t.eme.initializeMediaKeys)return Promise.resolve();var a=i?s.concat([i]):s,o=_ye(a,Object.keys(n)),l=[],u=[];return o.forEach(function(c){u.push(new Promise(function(h,m){t.tech_.one("keysessioncreated",h)})),l.push(new Promise(function(h,m){t.eme.initializeMediaKeys({keySystems:c},function(g){if(g){m(g);return}h()})}))}),Promise.race([Promise.all(l),Promise.race(u)])},bye=function(e){var t=e.player,n=e.sourceKeySystems,i=e.media,s=e.audioMedia,a=yye(n,i,s);return a?(t.currentSource().keySystems=a,a&&!t.eme?(Le.log.warn("DRM encrypted source cannot be decrypted without a DRM plugin"),!1):!0):!1},s7=function(){if(!X.localStorage)return null;var e=X.localStorage.getItem(n7);if(!e)return null;try{return JSON.parse(e)}catch{return null}},Sye=function(e){if(!X.localStorage)return!1;var t=s7();t=t?Le.mergeOptions(t,e):e;try{X.localStorage.setItem(n7,JSON.stringify(t))}catch{return!1}return t},Tye=function(e){return e.toLowerCase().indexOf("data:application/vnd.videojs.vhs+json,")===0?JSON.parse(e.substring(e.indexOf(",")+1)):e};_s.supportsNativeHls=(function(){if(!Fe||!Fe.createElement)return!1;var r=Fe.createElement("video");if(!Le.getTech("Html5").isSupported())return!1;var e=["application/vnd.apple.mpegurl","audio/mpegurl","audio/x-mpegurl","application/x-mpegurl","video/x-mpegurl","video/mpegurl","application/mpegurl"];return e.some(function(t){return/maybe|probably/i.test(r.canPlayType(t))})})();_s.supportsNativeDash=(function(){return!Fe||!Fe.createElement||!Le.getTech("Html5").isSupported()?!1:/maybe|probably/i.test(Fe.createElement("video").canPlayType("application/dash+xml"))})();_s.supportsTypeNatively=function(r){return r==="hls"?_s.supportsNativeHls:r==="dash"?_s.supportsNativeDash:!1};_s.isSupported=function(){return Le.log.warn("HLS is no longer a tech. Please remove it from your player's techOrder.")};var Cye=Le.getComponent("Component"),xA=(function(r){$t(e,r);function e(n,i,s){var a;if(a=r.call(this,i,Le.mergeOptions(s.hls,s.vhs))||this,s.hls&&Object.keys(s.hls).length&&Le.log.warn("Using hls options is deprecated. Please rename `hls` to `vhs` in your options object."),typeof s.initialBandwidth=="number"&&(a.options_.bandwidth=s.initialBandwidth),a.logger_=Rl("VhsHandler"),i.options_&&i.options_.playerId){var o=Le(i.options_.playerId);o.hasOwnProperty("hls")||Object.defineProperty(o,"hls",{get:function(){return Le.log.warn("player.hls is deprecated. Use player.tech().vhs instead."),i.trigger({type:"usage",name:"hls-player-access"}),He(a)},configurable:!0}),o.hasOwnProperty("vhs")||Object.defineProperty(o,"vhs",{get:function(){return Le.log.warn("player.vhs is deprecated. Use player.tech().vhs instead."),i.trigger({type:"usage",name:"vhs-player-access"}),He(a)},configurable:!0}),o.hasOwnProperty("dash")||Object.defineProperty(o,"dash",{get:function(){return Le.log.warn("player.dash is deprecated. Use player.tech().vhs instead."),He(a)},configurable:!0}),a.player_=o}if(a.tech_=i,a.source_=n,a.stats={},a.ignoreNextSeekingEvent_=!1,a.setOptions_(),a.options_.overrideNative&&i.overrideNativeAudioTracks&&i.overrideNativeVideoTracks)i.overrideNativeAudioTracks(!0),i.overrideNativeVideoTracks(!0);else if(a.options_.overrideNative&&(i.featuresNativeVideoTracks||i.featuresNativeAudioTracks))throw new Error("Overriding native HLS requires emulated tracks. See https://git.io/vMpjB");return a.on(Fe,["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","MSFullscreenChange"],function(l){var u=Fe.fullscreenElement||Fe.webkitFullscreenElement||Fe.mozFullScreenElement||Fe.msFullscreenElement;u&&u.contains(a.tech_.el())?a.masterPlaylistController_.fastQualityChange_():a.masterPlaylistController_.checkABR_()}),a.on(a.tech_,"seeking",function(){if(this.ignoreNextSeekingEvent_){this.ignoreNextSeekingEvent_=!1;return}this.setCurrentTime(this.tech_.currentTime())}),a.on(a.tech_,"error",function(){this.tech_.error()&&this.masterPlaylistController_&&this.masterPlaylistController_.pauseLoading()}),a.on(a.tech_,"play",a.play),a}var t=e.prototype;return t.setOptions_=function(){var i=this;if(this.options_.withCredentials=this.options_.withCredentials||!1,this.options_.handleManifestRedirects=this.options_.handleManifestRedirects!==!1,this.options_.limitRenditionByPlayerDimensions=this.options_.limitRenditionByPlayerDimensions!==!1,this.options_.useDevicePixelRatio=this.options_.useDevicePixelRatio||!1,this.options_.smoothQualityChange=this.options_.smoothQualityChange||!1,this.options_.useBandwidthFromLocalStorage=typeof this.source_.useBandwidthFromLocalStorage<"u"?this.source_.useBandwidthFromLocalStorage:this.options_.useBandwidthFromLocalStorage||!1,this.options_.useNetworkInformationApi=this.options_.useNetworkInformationApi||!1,this.options_.useDtsForTimestampOffset=this.options_.useDtsForTimestampOffset||!1,this.options_.customTagParsers=this.options_.customTagParsers||[],this.options_.customTagMappers=this.options_.customTagMappers||[],this.options_.cacheEncryptionKeys=this.options_.cacheEncryptionKeys||!1,typeof this.options_.blacklistDuration!="number"&&(this.options_.blacklistDuration=300),typeof this.options_.bandwidth!="number"&&this.options_.useBandwidthFromLocalStorage){var s=s7();s&&s.bandwidth&&(this.options_.bandwidth=s.bandwidth,this.tech_.trigger({type:"usage",name:"vhs-bandwidth-from-local-storage"}),this.tech_.trigger({type:"usage",name:"hls-bandwidth-from-local-storage"})),s&&s.throughput&&(this.options_.throughput=s.throughput,this.tech_.trigger({type:"usage",name:"vhs-throughput-from-local-storage"}),this.tech_.trigger({type:"usage",name:"hls-throughput-from-local-storage"}))}typeof this.options_.bandwidth!="number"&&(this.options_.bandwidth=Qi.INITIAL_BANDWIDTH),this.options_.enableLowInitialPlaylist=this.options_.enableLowInitialPlaylist&&this.options_.bandwidth===Qi.INITIAL_BANDWIDTH,["withCredentials","useDevicePixelRatio","limitRenditionByPlayerDimensions","bandwidth","smoothQualityChange","customTagParsers","customTagMappers","handleManifestRedirects","cacheEncryptionKeys","playlistSelector","initialPlaylistSelector","experimentalBufferBasedABR","liveRangeSafeTimeDelta","experimentalLLHLS","useNetworkInformationApi","useDtsForTimestampOffset","experimentalExactManifestTimings","experimentalLeastPixelDiffSelector"].forEach(function(a){typeof i.source_[a]<"u"&&(i.options_[a]=i.source_[a])}),this.limitRenditionByPlayerDimensions=this.options_.limitRenditionByPlayerDimensions,this.useDevicePixelRatio=this.options_.useDevicePixelRatio},t.src=function(i,s){var a=this;if(i){this.setOptions_(),this.options_.src=Tye(this.source_.src),this.options_.tech=this.tech_,this.options_.externVhs=_s,this.options_.sourceType=QU(s),this.options_.seekTo=function(u){a.tech_.setCurrentTime(u)},this.options_.smoothQualityChange&&Le.log.warn("smoothQualityChange is deprecated and will be removed in the next major version"),this.masterPlaylistController_=new sye(this.options_);var o=Le.mergeOptions({liveRangeSafeTimeDelta:gu},this.options_,{seekable:function(){return a.seekable()},media:function(){return a.masterPlaylistController_.media()},masterPlaylistController:this.masterPlaylistController_});this.playbackWatcher_=new uye(o),this.masterPlaylistController_.on("error",function(){var u=Le.players[a.tech_.options_.playerId],c=a.masterPlaylistController_.error;typeof c=="object"&&!c.code?c.code=3:typeof c=="string"&&(c={message:c,code:3}),u.error(c)});var l=this.options_.experimentalBufferBasedABR?_s.movingAverageBandwidthSelector(.55):_s.STANDARD_PLAYLIST_SELECTOR;this.masterPlaylistController_.selectPlaylist=this.selectPlaylist?this.selectPlaylist.bind(this):l.bind(this),this.masterPlaylistController_.selectInitialPlaylist=_s.INITIAL_PLAYLIST_SELECTOR.bind(this),this.playlists=this.masterPlaylistController_.masterPlaylistLoader_,this.mediaSource=this.masterPlaylistController_.mediaSource,Object.defineProperties(this,{selectPlaylist:{get:function(){return this.masterPlaylistController_.selectPlaylist},set:function(c){this.masterPlaylistController_.selectPlaylist=c.bind(this)}},throughput:{get:function(){return this.masterPlaylistController_.mainSegmentLoader_.throughput.rate},set:function(c){this.masterPlaylistController_.mainSegmentLoader_.throughput.rate=c,this.masterPlaylistController_.mainSegmentLoader_.throughput.count=1}},bandwidth:{get:function(){var c=this.masterPlaylistController_.mainSegmentLoader_.bandwidth,h=X.navigator.connection||X.navigator.mozConnection||X.navigator.webkitConnection,m=1e7;if(this.options_.useNetworkInformationApi&&h){var g=h.downlink*1e3*1e3;g>=m&&c>=m?c=Math.max(c,g):c=g}return c},set:function(c){this.masterPlaylistController_.mainSegmentLoader_.bandwidth=c,this.masterPlaylistController_.mainSegmentLoader_.throughput={rate:0,count:0}}},systemBandwidth:{get:function(){var c=1/(this.bandwidth||1),h;this.throughput>0?h=1/this.throughput:h=0;var m=Math.floor(1/(c+h));return m},set:function(){Le.log.error('The "systemBandwidth" property is read-only')}}}),this.options_.bandwidth&&(this.bandwidth=this.options_.bandwidth),this.options_.throughput&&(this.throughput=this.options_.throughput),Object.defineProperties(this.stats,{bandwidth:{get:function(){return a.bandwidth||0},enumerable:!0},mediaRequests:{get:function(){return a.masterPlaylistController_.mediaRequests_()||0},enumerable:!0},mediaRequestsAborted:{get:function(){return a.masterPlaylistController_.mediaRequestsAborted_()||0},enumerable:!0},mediaRequestsTimedout:{get:function(){return a.masterPlaylistController_.mediaRequestsTimedout_()||0},enumerable:!0},mediaRequestsErrored:{get:function(){return a.masterPlaylistController_.mediaRequestsErrored_()||0},enumerable:!0},mediaTransferDuration:{get:function(){return a.masterPlaylistController_.mediaTransferDuration_()||0},enumerable:!0},mediaBytesTransferred:{get:function(){return a.masterPlaylistController_.mediaBytesTransferred_()||0},enumerable:!0},mediaSecondsLoaded:{get:function(){return a.masterPlaylistController_.mediaSecondsLoaded_()||0},enumerable:!0},mediaAppends:{get:function(){return a.masterPlaylistController_.mediaAppends_()||0},enumerable:!0},mainAppendsToLoadedData:{get:function(){return a.masterPlaylistController_.mainAppendsToLoadedData_()||0},enumerable:!0},audioAppendsToLoadedData:{get:function(){return a.masterPlaylistController_.audioAppendsToLoadedData_()||0},enumerable:!0},appendsToLoadedData:{get:function(){return a.masterPlaylistController_.appendsToLoadedData_()||0},enumerable:!0},timeToLoadedData:{get:function(){return a.masterPlaylistController_.timeToLoadedData_()||0},enumerable:!0},buffered:{get:function(){return Ah(a.tech_.buffered())},enumerable:!0},currentTime:{get:function(){return a.tech_.currentTime()},enumerable:!0},currentSource:{get:function(){return a.tech_.currentSource_},enumerable:!0},currentTech:{get:function(){return a.tech_.name_},enumerable:!0},duration:{get:function(){return a.tech_.duration()},enumerable:!0},master:{get:function(){return a.playlists.master},enumerable:!0},playerDimensions:{get:function(){return a.tech_.currentDimensions()},enumerable:!0},seekable:{get:function(){return Ah(a.tech_.seekable())},enumerable:!0},timestamp:{get:function(){return Date.now()},enumerable:!0},videoPlaybackQuality:{get:function(){return a.tech_.getVideoPlaybackQuality()},enumerable:!0}}),this.tech_.one("canplay",this.masterPlaylistController_.setupFirstPlay.bind(this.masterPlaylistController_)),this.tech_.on("bandwidthupdate",function(){a.options_.useBandwidthFromLocalStorage&&Sye({bandwidth:a.bandwidth,throughput:Math.round(a.throughput)})}),this.masterPlaylistController_.on("selectedinitialmedia",function(){lye(a)}),this.masterPlaylistController_.sourceUpdater_.on("createdsourcebuffers",function(){a.setupEme_()}),this.on(this.masterPlaylistController_,"progress",function(){this.tech_.trigger("progress")}),this.on(this.masterPlaylistController_,"firstplay",function(){this.ignoreNextSeekingEvent_=!0}),this.setupQualityLevels_(),this.tech_.el()&&(this.mediaSourceUrl_=X.URL.createObjectURL(this.masterPlaylistController_.mediaSource),this.tech_.src(this.mediaSourceUrl_))}},t.createKeySessions_=function(){var i=this,s=this.masterPlaylistController_.mediaTypes_.AUDIO.activePlaylistLoader;this.logger_("waiting for EME key session creation"),xye({player:this.player_,sourceKeySystems:this.source_.keySystems,audioMedia:s&&s.media(),mainPlaylists:this.playlists.master.playlists}).then(function(){i.logger_("created EME key session"),i.masterPlaylistController_.sourceUpdater_.initializedEme()}).catch(function(a){i.logger_("error while creating EME key session",a),i.player_.error({message:"Failed to initialize media keys for EME",code:3})})},t.handleWaitingForKey_=function(){this.logger_("waitingforkey fired, attempting to create any new key sessions"),this.createKeySessions_()},t.setupEme_=function(){var i=this,s=this.masterPlaylistController_.mediaTypes_.AUDIO.activePlaylistLoader,a=bye({player:this.player_,sourceKeySystems:this.source_.keySystems,media:this.playlists.media(),audioMedia:s&&s.media()});if(this.player_.tech_.on("keystatuschange",function(o){if(o.status==="output-restricted"){var l=i.masterPlaylistController_.master();if(!(!l||!l.playlists)){var u=[];if(l.playlists.forEach(function(h){h&&h.attributes&&h.attributes.RESOLUTION&&h.attributes.RESOLUTION.height>=720&&(!h.excludeUntil||h.excludeUntil<1/0)&&(h.excludeUntil=1/0,u.push(h))}),u.length){var c;(c=Le.log).warn.apply(c,['DRM keystatus changed to "output-restricted." Removing the following HD playlists that will most likely fail to play and clearing the buffer. This may be due to HDCP restrictions on the stream and the capabilities of the current device.'].concat(u)),i.masterPlaylistController_.fastQualityChange_()}}}}),this.handleWaitingForKey_=this.handleWaitingForKey_.bind(this),this.player_.tech_.on("waitingforkey",this.handleWaitingForKey_),Le.browser.IE_VERSION===11||!a){this.masterPlaylistController_.sourceUpdater_.initializedEme();return}this.createKeySessions_()},t.setupQualityLevels_=function(){var i=this,s=Le.players[this.tech_.options_.playerId];!s||!s.qualityLevels||this.qualityLevels_||(this.qualityLevels_=s.qualityLevels(),this.masterPlaylistController_.on("selectedinitialmedia",function(){vye(i.qualityLevels_,i)}),this.playlists.on("mediachange",function(){i7(i.qualityLevels_,i.playlists)}))},e.version=function(){return{"@videojs/http-streaming":r7,"mux.js":fye,"mpd-parser":pye,"m3u8-parser":mye,"aes-decrypter":gye}},t.version=function(){return this.constructor.version()},t.canChangeType=function(){return t7.canChangeType()},t.play=function(){this.masterPlaylistController_.play()},t.setCurrentTime=function(i){this.masterPlaylistController_.setCurrentTime(i)},t.duration=function(){return this.masterPlaylistController_.duration()},t.seekable=function(){return this.masterPlaylistController_.seekable()},t.dispose=function(){this.playbackWatcher_&&this.playbackWatcher_.dispose(),this.masterPlaylistController_&&this.masterPlaylistController_.dispose(),this.qualityLevels_&&this.qualityLevels_.dispose(),this.player_&&(delete this.player_.vhs,delete this.player_.dash,delete this.player_.hls),this.tech_&&this.tech_.vhs&&delete this.tech_.vhs,this.tech_&&delete this.tech_.hls,this.mediaSourceUrl_&&X.URL.revokeObjectURL&&(X.URL.revokeObjectURL(this.mediaSourceUrl_),this.mediaSourceUrl_=null),this.tech_&&this.tech_.off("waitingforkey",this.handleWaitingForKey_),r.prototype.dispose.call(this)},t.convertToProgramTime=function(i,s){return Rge({playlist:this.masterPlaylistController_.media(),time:i,callback:s})},t.seekToProgramTime=function(i,s,a,o){return a===void 0&&(a=!0),o===void 0&&(o=2),Lge({programTime:i,playlist:this.masterPlaylistController_.media(),retryCount:o,pauseAfterSeek:a,seekTo:this.options_.seekTo,tech:this.options_.tech,callback:s})},e})(Cye),ug={name:"videojs-http-streaming",VERSION:r7,canHandleSource:function(e,t){t===void 0&&(t={});var n=Le.mergeOptions(Le.options,t);return ug.canPlayType(e.type,n)},handleSource:function(e,t,n){n===void 0&&(n={});var i=Le.mergeOptions(Le.options,n);return t.vhs=new xA(e,t,i),Le.hasOwnProperty("hls")||Object.defineProperty(t,"hls",{get:function(){return Le.log.warn("player.tech().hls is deprecated. Use player.tech().vhs instead."),t.vhs},configurable:!0}),t.vhs.xhr=Lj(),t.vhs.src(e.src,e.type),t.vhs},canPlayType:function(e,t){var n=QU(e);if(!n)return"";var i=ug.getOverrideNative(t),s=_s.supportsTypeNatively(n),a=!s||i;return a?"maybe":""},getOverrideNative:function(e){e===void 0&&(e={});var t=e,n=t.vhs,i=n===void 0?{}:n,s=t.hls,a=s===void 0?{}:s,o=!(Le.browser.IS_ANY_SAFARI||Le.browser.IS_IOS),l=i.overrideNative,u=l===void 0?o:l,c=a.overrideNative,h=c===void 0?!1:c;return h||u}},wye=function(){return C_("avc1.4d400d,mp4a.40.2")};wye()&&Le.getTech("Html5").registerSourceHandler(ug,0);Le.VhsHandler=xA;Object.defineProperty(Le,"HlsHandler",{get:function(){return Le.log.warn("videojs.HlsHandler is deprecated. Use videojs.VhsHandler instead."),xA},configurable:!0});Le.VhsSourceHandler=ug;Object.defineProperty(Le,"HlsSourceHandler",{get:function(){return Le.log.warn("videojs.HlsSourceHandler is deprecated. Use videojs.VhsSourceHandler instead."),ug},configurable:!0});Le.Vhs=_s;Object.defineProperty(Le,"Hls",{get:function(){return Le.log.warn("videojs.Hls is deprecated. Use videojs.Vhs instead."),_s},configurable:!0});Le.use||(Le.registerComponent("Hls",_s),Le.registerComponent("Vhs",_s));Le.options.vhs=Le.options.vhs||{};Le.options.hls=Le.options.hls||{};if(!Le.getPlugin||!Le.getPlugin("reloadSourceOnError")){var Eye=Le.registerPlugin||Le.plugin;Eye("reloadSourceOnError",hye)}var kye="1.1.6";function a7(r,e){r.prototype=Object.create(e.prototype),r.prototype.constructor=r,r.__proto__=e}function u3(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}var Aye=Le.getComponent("MenuItem"),Dye=Le.getComponent("Component"),Kx=(function(r){a7(e,r);function e(n,i){return i.selectable=!0,i.multiSelectable=!1,r.call(this,n,i)||this}var t=e.prototype;return t.handleClick=function(){var i=this.options_;console.log("Changing quality to:",i.label),r.prototype.handleClick.call(this);for(var s=this.player().qualityLevels(),a=0;a<s.length;a++)i.index==s.length||i.index==a?s[a].enabled=!0:s[a].enabled=!1},t.update=function(){var i=this.player().qualityLevels().selectedIndex;this.selected(this.options_.index==i)},e})(Aye);Dye.registerComponent("SourceMenuItem",Kx);var _y=Le.getComponent("MenuButton"),Iye=(function(r){a7(e,r);function e(n,i){var s;s=r.call(this,n,i)||this,_y.apply(u3(s),arguments);var a=s.player().qualityLevels();if(i&&i.default){if(i.default=="low")for(var o=0;o<a.length;o++)a[o].enabled=o==0;else if(i.default="high")for(var o=0;o<a.length;o++)a[o].enabled=o==a.length-1}return s.player().qualityLevels().on(["change","addqualitylevel"],Le.bind(u3(s),s.update)),s}var t=e.prototype;return t.createEl=function(){return Le.dom.createEl("div",{className:"vjs-http-source-selector vjs-menu-button vjs-menu-button-popup vjs-control vjs-button"})},t.buildCSSClass=function(){return _y.prototype.buildCSSClass.call(this)+" vjs-icon-cog"},t.update=function(){return _y.prototype.update.call(this)},t.createItems=function(){for(var i=[],s=this.player().qualityLevels(),a=[],o=0;o<s.length;o++){var l=s.length-(o+1),u=l===s.selectedIndex,c=""+l,h=l;s[l].height?(c=s[l].height+"p",h=parseInt(s[l].height,10)):s[l].bitrate&&(c=Math.floor(s[l].bitrate/1e3)+" kbps",h=parseInt(s[l].bitrate,10)),!(a.indexOf(c)>=0)&&(a.push(c),i.push(new Kx(this.player_,{label:c,index:l,selected:u,sortVal:h})))}return s.length>1&&i.push(new Kx(this.player_,{label:"Auto",index:s.length,selected:!1,sortVal:99999})),i.sort(function(m,g){return m.options_.sortVal<g.options_.sortVal?1:m.options_.sortVal>g.options_.sortVal?-1:0}),i},e})(_y),Pye={},Rye=Le.registerPlugin||Le.plugin,Lye=function(e,t){if(e.addClass("vjs-http-source-selector"),console.log("videojs-http-source-selector initialized!"),console.log("player.techName_:"+e.techName_),e.techName_!="Html5")return!1;e.on(["loadedmetadata"],function(n){if(e.qualityLevels(),Le.log("loadmetadata event"),e.videojs_http_source_selector_initialized=="undefined"||e.videojs_http_source_selector_initialized==!0)console.log("player.videojs_http_source_selector_initialized == true");else{console.log("player.videojs_http_source_selector_initialized == false"),e.videojs_http_source_selector_initialized=!0;var i=e.controlBar,s=i.getChild("fullscreenToggle").el();i.el().insertBefore(i.addChild("SourceMenuButton").el(),s)}})},o7=function(e){var t=this;this.ready(function(){Lye(t,Le.mergeOptions(Pye,e))}),Le.registerComponent("SourceMenuButton",Iye),Le.registerComponent("SourceMenuItem",Kx)};Rye("httpSourceSelector",o7);o7.VERSION=kye;const l7=r=>{const e=Yr.useRef(null),t=Yr.useRef(null),{options:n,onReady:i,headers:s}=r;return Yr.useEffect(()=>{if(t.current){const a=t.current;typeof a.httpSourceSelector=="function"&&a&&a.httpSourceSelector(),a.autoplay(n.autoplay),a.src(n.sources)}else{const a=document.createElement("video-js");a.classList.add("vjs-big-play-centered"),e.current.appendChild(a),Se.Vhs.xhr.onRequest=l=>{if(l.headers||(l.headers={}),s.length>0)for(let u=0;u<s.length;u++)s[u].key!==""&&s[u].key!=="User-Agent"&&(l.headers[s[u].key]=s[u].value)};const o=t.current=Se(a,n,()=>{Se.log("player is ready"),i&&i(o)});typeof o.httpSourceSelector=="function"&&o&&o.httpSourceSelector()}},[n,e]),Yr.useEffect(()=>{const a=t.current;return()=>{a&&!a.isDisposed()&&(a.dispose(),t.current=null)}},[t]),F.jsx("div",{"data-vjs-player":!0,children:F.jsx("div",{ref:e})})};function Oye(){const{t:r}=bs(),e=M.useContext(vo);Mu();const[t,n]=M.useState(null),i=q=>{let V=e.settings.playerSource;console.log("os_type",V);let Q={autoplay:!0,controls:!0,responsive:!0,fluid:!0,muted:!0,playsinline:!0,html5:{vhs:{overrideNative:!0}},sources:[{src:q,type:V}]};console.log("data",Q),n(Q)},s=M.useRef(null),[a,o]=M.useState([]),[l,u]=M.useState(""),[c,h]=M.useState(""),[m,g]=M.useState(""),[y,v]=M.useState(!1),[x,w]=M.useState([]);M.useEffect(()=>{let q={},V=new URLSearchParams(window.location.search).entries();for(let[Q,ie]of V)q[Q]=ie;q.url!==void 0&&(g(q.url),I(q.url))},[]);const E=q=>{g(q.target.value)},D=()=>{i(m),s.current!==null&&s.current.play()},I=q=>{i(q),s.current!==null&&s.current.play()},A=()=>{L()},L=()=>{v(!1)},N=(q,V,Q)=>{w(ie=>ie.map((le,he)=>he===V?{...le,key:Q.target.value}:le))},U=(q,V,Q)=>{w(ie=>ie.map((le,he)=>he===V?{...le,value:Q.target.value}:le))},B=q=>{w(V=>V.filter((Q,ie)=>ie!==q))},k=()=>{w([...x,{key:"",value:""}])},H=q=>{s.current=q,o([q.error()]),q.on("waiting",()=>{console.log("player is waiting")}),q.on("error",V=>{console.log("error",V)}),q.on("dispose",()=>{console.log("player will dispose")})};return F.jsxs(Lt,{style:{padding:"0 20px"},children:[F.jsxs(Lt,{style:{display:"flex",alignItems:"center"},children:[F.jsx(Rr,{sx:{width:550,margin:"10px"},children:F.jsx(Qn,{sx:{fontSize:"11px"},label:r("m3u8"),size:"small",id:"standard-multiline-static",value:m,onChange:E})}),m!==""&&!y?F.jsx(Vo,{size:"small",onClick:D,variant:"contained",startIcon:F.jsx(ose,{}),children:r("")}):"",m!==""&&y?F.jsx(Vo,{size:"small",onClick:A,variant:"contained",startIcon:F.jsx(lse,{}),children:r("")}):""]}),F.jsx(Lt,{children:F.jsxs(Rr,{sx:{width:550,margin:"10px"},children:[F.jsx(Lt,{sx:{marginBottom:"10px"},children:F.jsxs(Wr,{size:"small",onClick:k,variant:"contained",children:["+ ",r("")]})}),x.map((q,V)=>F.jsxs(Lt,{sx:{marginBottom:"10px",display:"flex",alignItems:"center"},children:[F.jsx(Qn,{sx:{fontSize:"11px",marginRight:"5px"},label:"key",size:"small",id:"standard-multiline-static",value:q.key,onChange:N.bind(this,q,V)}),F.jsx(Qn,{sx:{fontSize:"11px"},label:"value",size:"small",id:"standard-multiline-static",value:q.value,onChange:U.bind(this,q,V)}),F.jsx(Id,{color:"disabled",onClick:()=>B(V)})]},V))]})}),F.jsxs(Lt,{sx:{display:"flex",flexDirection:"column"},children:[F.jsxs(Lt,{sx:{display:"flex",alignItems:"center"},children:[F.jsx(Lt,{sx:{marginLeft:"10px"},children:c!==""?F.jsx("img",{src:c,height:"50"}):""}),F.jsx("h2",{style:{display:"flex",alignItems:"center"},children:l})]}),F.jsx(Rr,{sx:{margin:"10px"},children:t===null?"":F.jsx(l7,{options:t,onReady:H,headers:x})})]})]})}class xS{constructor(e=""){this.baseUrl=e}async getTaskList(){return(await Ar.get(`${this.baseUrl}/tasks/list?page=1`)).data}async uploadFile(e){const t=await Ar.post(`${this.baseUrl}/media/upload`,e,{headers:{"Content-Type":"multipart/form-data"}});return console.log("response---",t.data),t.data}async getReplaceList(){const e=await Ar.get(`${this.baseUrl}/system/replace`);if(e.status!==200)throw new Error(e.data.msg);return e.data}async updateReplaceList(e){const t=await Ar.post(`${this.baseUrl}/system/replace`,e);if(t.status!==200)throw new Error(t.data.msg);return t.data}async addTask(e){const t=await Ar.post(`${this.baseUrl}/tasks/add`,e);if(t.data.code!=="200")throw new Error(t.data.msg);return t.data}async updateTask(e,t){const n=await Ar.post(`${this.baseUrl}/tasks/update?task_id=${e}`,t);if(n.data.code!=="200")throw new Error(n.data.msg);return n.data}async deleteTask(e){const t=await Ar.delete(`${this.baseUrl}/tasks/delete/${e}`);if(t.data.code!=="200")throw new Error(t.data.msg);return t.data}async runTask(e){return(await Ar.get(`${this.baseUrl}/tasks/run?task_id=${e}`)).data}async getDownloadBody(e){return(await Ar.get(`${this.baseUrl}/tasks/get-download-body?task_id=${e}`)).data}async exportTasks(){return(await Ar.get(`${this.baseUrl}/system/tasks/export`)).data}async importTasks(e){return(await Ar.post(`${this.baseUrl}/system/tasks/import`,e)).data}async getSearchConfig(){const e=await Ar.get(`${this.baseUrl}/system/info`);if(e.status!==200)throw new Error(e.data.msg);return e.data}async updateSearchConfig(e){const t=await Ar.post(`${this.baseUrl}/system/global-config`,e);if(t.status!==200)throw new Error(t.data.msg);return t.data}async runSpider(){return(await Ar.post(`${this.baseUrl}/system/spider/run`)).data}async getSpiderStatus(){return(await Ar.get(`${this.baseUrl}/system/spider/status`)).data}async getTodayFiles(){return(await Ar.get(`${this.baseUrl}/system/list-today-files`)).data}async clearSearchFolder(){return(await Ar.get(`${this.baseUrl}/system/clear-search-folder`)).data}async initSearchData(){return(await Ar.get(`${this.baseUrl}/system/init-search-data`)).data}async getFavourite(){return(await Ar.get(`${this.baseUrl}/system/get-favourite`)).data}async saveFavourite(e){return(await Ar.post(`${this.baseUrl}/system/save-favourite`,e)).data}async openUrl(e){return(await Ar.get(`${this.baseUrl}/system/open-url`,{params:{url:e}})).data}}function Mye(){M.useContext(vo);const{t:r}=bs(),[e]=M.useState(()=>new xS),[t,n]=M.useState(!1),[i,s]=M.useState(null),[a,o]=M.useState([]),[l,u]=M.useState(!1),[c,h]=M.useState(""),[m,g]=M.useState(!1),[y,v]=M.useState({content:"",url:""}),[x,w]=M.useState(!1),[E,D]=M.useState(!1),[I,A]=M.useState(""),[L,N]=M.useState("");M.useEffect(()=>{V()},[]);const U=me=>{s(me),n(!0)},B=()=>{n(!1),s(null)},k=async me=>{try{me.id===""?await e.addTask(H(me)):await e.updateTask(me.id,H(me)),V()}catch(xe){Q(xe.message)}},H=me=>({urls:me.original.urls,result_name:"static/output/"+me.original.result_name+".m3u",md5:"",run_type:me.original.run_type,keyword_dislike:me.original.keyword_dislike,keyword_like:me.original.keyword_like,http_timeout:me.original.http_timeout,check_timeout:me.original.check_timeout,sort:me.original.sort,no_check:me.original.no_check,concurrent:me.original.concurrent,rename:me.original.rename,ffmpeg_check:me.original.ffmpeg_check,not_http_skip:me.original.not_http_skip,same_save_num:me.original.same_save_num}),q=async me=>{try{await e.deleteTask(me.id),V()}catch(xe){Q(xe.message)}},V=async()=>{try{let me=await e.getTaskList();o(me.list),N(me.now_id)}catch{o([]),Q(r(""))}},Q=me=>{h(me),u(!0)},ie=()=>{h(""),u(!1)},le=async me=>{try{await e.runTask(me),V()}catch{Q(r(""))}},he=async me=>{try{const xe=await e.getDownloadBody(me);g(!0),v({content:xe.content,url:xe.url})}catch{Q(r(""))}},ae=me=>{g(me)},ne=()=>{o([]),V()},ue=me=>{w(me)},ee=async me=>{if(me)try{const xe=await e.exportTasks();D(!0),A(JSON.stringify(xe))}catch{Q(r(""))}else D(!1)},pe=async me=>{try{const xe=JSON.parse(me);await e.importTasks(xe),w(!1),ne()}catch{Q(r(""))}};return F.jsxs(Lt,{style:{padding:"0 20px"},children:[F.jsxs(Lt,{style:{marginBottom:"10px",display:"flex",justifyContent:"space-between"},children:[F.jsxs(Lt,{children:[F.jsx(Wr,{variant:"contained",size:"small",startIcon:F.jsx(Ig,{}),onClick:()=>U(null),style:{marginRight:"10px"},children:r("")}),F.jsx(Wr,{variant:"outlined",size:"small",startIcon:F.jsx(rre,{}),onClick:ne,style:{marginRight:"10px"},children:r("")})]}),F.jsxs(Lt,{children:[F.jsx(Wr,{variant:"outlined",size:"small",startIcon:F.jsx(nre,{}),style:{marginRight:"10px"},onClick:()=>ue(!0),children:r("")}),F.jsx(Wr,{variant:"outlined",size:"small",startIcon:F.jsx(xw,{}),onClick:()=>ee(!0),children:r("")})]})]}),F.jsx(Kp,{open:l,autoHideDuration:6e3,onClose:ie,message:c}),F.jsx(Q8,{taskService:e,formValue:i,open:t,onClose:B,handleSave:k,handleDelete:q,checkType:"server",output_folder:"static/output/"}),F.jsx(Z8,{formValue:y,open:m,onClose:ae}),F.jsx(eN,{open:x,onClose:ue,onSave:pe}),F.jsx(tN,{open:E,formValue:I,onClose:ee}),F.jsx(kc,{sx:{overflow:"hidden"},children:F.jsx(U8,{children:F.jsxs(B8,{"aria-label":"simple table",children:[F.jsx($8,{children:F.jsxs(P2,{children:[F.jsx(Dd,{children:r("id")}),F.jsx(Dd,{align:"right",children:r("")})]})}),F.jsx(N8,{children:a.map(me=>F.jsx(J8,{row:me,doTaskRightNow:le,showDownloadDialog:he,clickTask:()=>U(me),source:"task",isNowHandle:me.id===L},me.id))})]})})})]})}function Fye(r){const{t:e}=bs(),{onClose:t,open:n,saveData:i}=r,[s,a]=M.useState(""),o=()=>{t(!1)},l=c=>{a(c.target.value)},u=()=>{i(s)};return F.jsxs(Tu,{onClose:o,open:n,children:[F.jsx(Ag,{children:e("")}),F.jsxs("div",{style:{padding:"20px",display:"flex",justifyContent:"center",flexDirection:"column"},children:[F.jsx(Rr,{style:{width:"550px"},children:F.jsx(Qn,{id:"demo-simple-select-standard",value:s,multiline:!0,rows:10,onChange:l})}),F.jsx(Rr,{style:{margin:"10px 0"},children:F.jsx(Vo,{onClick:u,variant:"outlined",children:e("")})}),F.jsx(Lt,{children:e(",https://xxxx.m3u + ")}),F.jsx(Lt,{children:"star movies,http://srtarmovies.m3u8"}),F.jsx(Lt,{children:"star plus,https://plus.m3u"})]})]})}function c3(){const r=M.useContext(vo),[e,t]=M.useState(!1),[n,i]=M.useState(8e3),[s,a]=M.useState(1),[o,l]=M.useState("zh"),[u,c]=M.useState([]),[h,m]=M.useState(""),[g,y]=M.useState(""),[v,x]=M.useState(""),[w,E]=M.useState(!1),[D,I]=M.useState(""),{t:A}=bs();M.useEffect(()=>{let q=r.settings;r.check_version(),r.nowMod===1?I(r.configInfo.app_version):I(r.configInfo.version),q!==null&&(i(q.httpRequestTimeout??1e3),c(q.customLink??[]),a(q.concurrent??1),l(q.language??"zh"),m(q.privateHost??""),x(q.playerSource??"video/mp2t"))},[r]);const L=q=>{const{name:V,value:Q}=q.target;let ie=parseInt(q.target.value,10);V==="httpRequestTimeout"?i(ie):V==="concurrent"?(ie===0&&(ie=1),a(ie)):V==="language"?l(q.target.value):V==="privateHost"?m(q.target.value):V==="playerSource"&&x(q.target.value)},N=()=>{r.onChangeSettings({httpRequestTimeout:n,customLink:u,concurrent:s,language:o,privateHost:h,playerSource:v}),r.changeLanguage(o),E(!0),y(A(""))},U=q=>{t(q)},B=q=>{let V=u,Q=q.split(`
`);if(Q.length>0){for(let ie=0;ie<Q.length;ie++){let le=Q[ie].split(",");V.push({name:le[0],url:le[1]})}c(V)}t(!1)},k=u_.version,H=()=>{E(!1),y("")};return F.jsxs(Lt,{style:{padding:"0 20px"},children:[F.jsx(Fye,{open:e,onClose:()=>U(!1),saveData:B}),F.jsx(Kp,{open:w,autoHideDuration:3e3,message:g,onClose:H}),F.jsxs(Lt,{children:[F.jsxs(Lt,{sx:{display:"flex",flexDirection:"column",padding:"20px",width:"400px"},children:[F.jsxs(Rr,{sx:{marginBottom:"20px"},children:[F.jsx(Cu,{id:"demo-row-radio-buttons-group-label",children:A("")}),F.jsx(wu,{name:"language",value:o,label:A(""),onChange:L,children:r.languageList.map((q,V)=>F.jsx(Sc,{value:q.code,children:q.name},V))})]}),F.jsxs(Rr,{sx:{marginBottom:"20px"},children:[F.jsx(Cu,{id:"demo-row-radio-buttons-group-label",children:A("")}),F.jsx(wu,{name:"playerSource",value:v,label:A(""),onChange:L,children:r.videoPlayTypes.map((q,V)=>F.jsx(Sc,{value:q.value,children:q.name},V))})]}),F.jsx(Vo,{onClick:N,variant:"outlined",children:A("")})]}),F.jsxs(Rr,{sx:{marginTop:"20px"},children:[F.jsxs(Lt,{children:[A(""),": ",k]}),r.showNewVersion?F.jsxs(Lt,{style:{color:"green",fontWeight:"bold"},children:[A(""),": ",D]}):"",F.jsxs(Lt,{children:[A("Github"),"",F.jsx("a",{href:u_.homepage_url,children:u_.homepage_url})]}),F.jsx(Lt,{children:A("STAR")})]})]})]})}function Bye(r){const e=M.useContext(vo),{nowPlatform:t}=r,[n,i]=M.useState(!1),[s,a]=M.useState(null),o=x=>{let w=e.settings.playerSource;console.log(w),a({autoplay:!0,controls:!0,responsive:!0,fluid:!0,muted:!0,playsinline:!0,html5:{vhs:{overrideNative:!0}},sources:[{src:x,type:w}]})},l=M.useRef(null),[u,c]=M.useState(""),[h,m]=M.useState([]),g=async()=>{const x=N_();await gg("changeWatchUrl",w=>{w.event==="changeWatchUrl"&&(c(w.payload.data.url),y(w.payload.data.url),x.setTitle(w.payload.data.name))})};M.useEffect(()=>{let x={},w=new URLSearchParams(window.location.search).entries();for(let[E,D]of w)x[E]=D;x.url!==void 0&&(c(x.url),y(x.url)),g()},[]);const y=x=>{o(x),l.current!==null&&l.current.play()},v=x=>{console.log("load video"),l.current=x,x.on("waiting",()=>{console.log("player is waiting"),console.log(l.current)}),x.on("canplay",()=>{console.log("videojs canplay")}),x.on("dispose",()=>{console.log("player will dispose")}),x.on("fullscreenchange",w=>{console.log("full s",w)}),x.on("error",w=>{console.log("videojs error",w)}),x.ready(function(){console.log(x.controlBar);var w=x.controlBar.fullscreenToggle;const E=N_();w.on("click",function(){console.log("user click full"),E.isFullscreen().then(D=>{if(console.log("now fullscreen status",D,window.screen),D){E.setFullscreen(!1),console.log("---exit full screen");const I=x.el().parentElement;I.style.width="",I.style.height="",I.style.alignContent="",I.style.backgroundColor="",x.el().style.width="",x.el().style.height=""}else{E.setFullscreen(!0);const I=x.el().parentElement;I.style.width=window.screen.width+"px",I.style.height=window.screen.height+"px",I.style.alignContent="center",I.style.backgroundColor="#000",x.el().style.width=window.screen.width+"px",x.el().style.height=window.screen.height+"px"}})})})};return F.jsx(F.Fragment,{children:s===null?"":F.jsx("div",{children:F.jsx(l7,{options:s,onReady:v,headers:h})})})}const d3=({values:r,onChange:e,label:t,t:n,placeholder:i,validation:s})=>{const a=(u,c)=>{const h=[...r];h[u]=c,e(h)},o=()=>e([...r,""]),l=u=>e(r.filter((c,h)=>h!==u));return F.jsxs(Lt,{sx:{mb:2},children:[F.jsx(bn,{variant:"caption",color:"textSecondary",sx:{mb:1,display:"block"},children:t}),r.map((u,c)=>{const h=s?s(u):null;return F.jsxs(Lt,{sx:{display:"flex",gap:1,mb:1,alignItems:"flex-start"},children:[F.jsx(Qn,{value:u,onChange:m=>a(c,m.target.value),size:"small",fullWidth:!0,placeholder:i,error:!!h,helperText:h}),F.jsx(Zh,{onClick:()=>l(c),size:"small",sx:{mt:.5},children:F.jsx(Id,{fontSize:"small"})})]},c)}),F.jsx(Wr,{startIcon:F.jsx(Ig,{}),onClick:o,size:"small",variant:"outlined",children:n("")})]})};function Nye(){const{t:r}=bs(),[e,t]=M.useState(!1),[n,i]=M.useState({remote_url2local_images:!1,search:{source:[],extensions:[],search_list:[]},today_fetch:!1}),[s]=M.useState(()=>new xS),[a,o]=M.useState(!1),[l,u]=M.useState(""),[c,h]=M.useState(!1),[m,g]=M.useState(0),[y,v]=M.useState([]),[x,w]=M.useState(!1),E=[".txt",".m3u"];M.useEffect(()=>{D()},[]);const D=async()=>{try{const Q=await s.getSearchConfig();Q&&i({remote_url2local_images:Q.remote_url2local_images??!1,search:{source:Q.search?.source??[],extensions:Q.search?.extensions??[],search_list:Q.search?.search_list??[]},today_fetch:Q.today_fetch??!1})}catch(Q){console.error("Error fetching search config:",Q)}},I=async()=>{w(!0);try{n.today_fetch?(await s.clearSearchFolder(),u(r(""))):(await s.initSearchData(),u(r(""))),o(!0),await D()}catch{u(r("")),o(!0)}finally{w(!1)}},A=async()=>{try{const Q=await s.getTodayFiles();v(Q||[]),h(!0)}catch(Q){console.error("Error fetching results:",Q),u(r("")),o(!0)}},L=async()=>{const Q={...n,search:{...n.search,source:n.search.source.map(ie=>({...ie,urls:ie.urls.filter(le=>le.trim()),include_files:ie.include_files.filter(le=>le.trim())}))}};try{await s.updateSearchConfig(Q),i(Q),u(r("")),o(!0)}catch(ie){console.error("Error saving search config:",ie),u(r("")),o(!0)}},N=Q=>{i(ie=>({...ie,remote_url2local_images:Q.target.checked}))},U=[{value:"github-home-page",label:r("GitHub ")},{value:"raw-source",label:r("")},{value:"github-sub-page",label:r("GitHub ")}],B=n.search.source.length<U.length,k=()=>{if(!B)return;const Q=n.search.source.map(le=>le.parse_type),ie=U.find(le=>!Q.includes(le.value))?.value||"raw-source";i(le=>({...le,search:{...le.search,source:[...le.search.source,{urls:[],include_files:[],parse_type:ie}]}}))},H=Q=>{i(ie=>({...ie,search:{...ie.search,source:ie.search.source.filter((le,he)=>he!==Q)}}))},q=(Q,ie,le)=>{i(he=>{const ae=[...he.search.source],ne={...ae[Q]};return ne[ie]=le,ae[Q]=ne,{...he,search:{...he.search,source:ae}}})},V=Q=>{if(!Q)return null;try{return new URL(Q),null}catch{return r("")||"Invalid URL"}};return F.jsxs(Lt,{style:{padding:"0 20px",width:"100%",maxWidth:"1000px"},children:[F.jsx(Kp,{open:a,autoHideDuration:3e3,onClose:()=>o(!1),message:l}),F.jsx(Lt,{sx:{mb:3,p:2,bgcolor:"#f5f5f5",borderRadius:1,display:"flex",justifyContent:"space-between",alignItems:"center"},children:F.jsx(Lt,{children:n.today_fetch?F.jsxs(Lt,{sx:{display:"flex",alignItems:"center",gap:2},children:[x?F.jsx(Y0,{size:24}):F.jsx(Wr,{variant:"contained",color:"warning",onClick:I,children:r("")}),F.jsx(Wr,{variant:"outlined",onClick:A,children:r("")})]}):x?F.jsx(Y0,{size:24}):F.jsx(Wr,{variant:"contained",onClick:I,children:r("")})})}),e?F.jsx(Lt,{sx:{mb:3},children:F.jsx(Aa,{control:F.jsx(Iie,{checked:n.remote_url2local_images,onChange:N}),label:r("")})}):null,F.jsx(bn,{variant:"h6",gutterBottom:!0,children:r("")}),F.jsx(Lt,{sx:{mb:3},children:F.jsx(L8,{row:!0,children:E.map(Q=>F.jsx(Aa,{control:F.jsx(sp,{checked:n.search.extensions.includes(Q),onChange:ie=>{const le=ie.target.checked;i(he=>{const ae=le?[...he.search.extensions,Q]:he.search.extensions.filter(ne=>ne!==Q);return{...he,search:{...he.search,extensions:ae}}})}}),label:Q},Q))})}),F.jsxs(Lt,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2},children:[F.jsx(bn,{variant:"h6",children:r("")}),B&&F.jsx(Wr,{variant:"contained",startIcon:F.jsx(Ig,{}),onClick:k,children:r("")})]}),F.jsx(Lt,{sx:{display:"flex",flexDirection:"column",gap:2,mb:4},children:n.search.source.map((Q,ie)=>F.jsx(j8,{variant:"outlined",children:F.jsxs(z8,{children:[F.jsxs(Lt,{sx:{display:"flex",justifyContent:"space-between",mb:2},children:[F.jsxs(Rr,{size:"small",sx:{width:200},children:[F.jsx(Cu,{children:r("")}),F.jsx(wu,{value:Q.parse_type,label:r(""),onChange:le=>q(ie,"parse_type",le.target.value),children:U.map(le=>{const ae=n.search.source.some(ne=>ne.parse_type===le.value)&&le.value!==Q.parse_type;return F.jsx(Sc,{value:le.value,disabled:ae,children:le.label},le.value)})})]}),F.jsx(Zh,{onClick:()=>H(ie),color:"error",children:F.jsx(Id,{})})]}),F.jsx(d3,{label:r("URL"),values:Q.urls||[],placeholder:"http://...",onChange:le=>q(ie,"urls",le),t:r,validation:V}),Q.parse_type!=="raw-source"&&F.jsx(d3,{label:r(""),values:Q.include_files||[],placeholder:"xxx.m3u8",onChange:le=>q(ie,"include_files",le),t:r})]})},ie))}),F.jsx(Lt,{sx:{display:"flex",justifyContent:"flex-end",pb:4},children:F.jsx(Wr,{variant:"contained",color:"primary",onClick:L,size:"large",children:r("")})}),F.jsxs(Tu,{open:c,onClose:()=>h(!1),maxWidth:"md",fullWidth:!0,children:[F.jsx(Ag,{children:r("")}),F.jsxs(H8,{children:[F.jsx(Y8,{value:m,onChange:(Q,ie)=>g(ie),sx:{borderBottom:1,borderColor:"divider"},variant:"scrollable",scrollButtons:"auto",children:y.map((Q,ie)=>F.jsx(bw,{label:Q.name||Q.label||`Result ${ie+1}`},ie))}),F.jsx(Lt,{sx:{p:2,height:400,overflow:"auto",whiteSpace:"pre-wrap"},children:y[m]?.content||r("")})]})]})]})}function Uye(){const{t:r}=bs(),[e,t]=M.useState([]),[n,i]=M.useState([]),[s]=M.useState(()=>new xS),[a,o]=M.useState(!1),[l,u]=M.useState("");M.useEffect(()=>{c()},[]);const c=async()=>{try{const v=await s.getReplaceList();t(v)}catch(v){console.error("Error fetching data:",v)}};M.useEffect(()=>{if(!e){i([]);return}Array.isArray(e)?i(e.map(v=>({key:v.key??"",value:v.value??""}))):i(typeof e=="object"?Object.entries(e).map(([v,x])=>({key:v,value:x??""})):[])},[e]);const h=(v,x,w)=>{i(E=>{const D=E.map(I=>({...I}));return D[v][x]=w,D})},m=()=>{i(v=>[...v,{key:"",value:""}])},g=v=>{i(x=>x.filter((w,E)=>E!==v))},y=async()=>{const v={};n.forEach(w=>{w.key!==void 0&&w.key!==""&&(v[w.key]=w.value??"")}),t(v);let x={content:JSON.stringify(v)};try{await s.updateReplaceList(x),u(r("")),o(!0)}catch(w){console.error("Error saving replace list:",w),u(r("")),o(!0)}};return F.jsxs(Lt,{style:{padding:"0 20px",width:"800px"},children:[F.jsx(Kp,{open:a,autoHideDuration:3e3,onClose:()=>o(!1),message:l}),F.jsxs("div",{style:{padding:"0 0 10px",fontSize:"12px",color:"#666"},children:[F.jsx("p",{style:{padding:"0",margin:"0"},children:r("")}),F.jsx("p",{style:{padding:"0",margin:"0"},children:r("[HD][HD]")})]}),F.jsx("div",{style:{padding:"10px 0"},children:F.jsx(Wr,{variant:"contained",onClick:m,children:r("")})}),F.jsx("div",{style:{padding:"10px 0"},children:F.jsxs("div",{style:{overflow:"hidden"},children:[F.jsx("div",{style:{maxHeight:"calc(100vh - 200px)",overflow:"auto",padding:"12px 0"},children:n.length===0?F.jsx("div",{style:{padding:"8px 0",color:"#666"},children:r("")}):n.map((v,x)=>F.jsxs("div",{style:{display:"flex",gap:8,alignItems:"center",marginBottom:8},children:[F.jsx(Qn,{label:r(""),value:v.key,onChange:w=>h(x,"key",w.target.value),size:"small",style:{width:220}}),F.jsx(Qn,{label:r(""),value:v.value,onChange:w=>h(x,"value",w.target.value),size:"small",style:{flex:1}}),F.jsx(Zh,{"aria-label":"delete",onClick:()=>g(x),children:F.jsx(Id,{})})]},x))}),F.jsxs("div",{style:{display:"flex",gap:8,padding:"12px 0",alignItems:"center"},children:[F.jsx("div",{style:{flex:1}}),F.jsx(Wr,{variant:"contained",color:"success",onClick:y,children:r("")})]})]})})]})}function $ye(){const{t:r}=bs(),[e,t]=M.useState({favorite_rules:[]}),n=new xS,[i,s]=M.useState(!1),[a,o]=M.useState(""),[l,u]=M.useState(""),[c,h]=M.useState("include"),[m,g]=M.useState(!1),[y,v]=M.useState(""),[x,w]=M.useState("");M.useEffect(()=>{E()},[]);const E=async()=>{try{const H=await n.getFavourite();if(H){const q=[];(H.like||[]).forEach(V=>q.push({name:V,match_mode:"include"})),(H.equal||[]).forEach(V=>q.push({name:V,match_mode:"exact"})),t(V=>({...V,favorite_rules:q,all_channel_url:H.all_channel_url,liked_channel_url:H.liked_channel_url,checked_liked_channel_url:H.checked_liked_channel_url}))}}catch(H){console.error("Error fetching config:",H)}},D=()=>{if(!l.trim()){o(r("")),s(!0);return}t(H=>({...H,favorite_rules:[{name:l,match_mode:c},...H.favorite_rules]})),u("")},I=H=>{t(q=>({...q,favorite_rules:q.favorite_rules.filter((V,Q)=>Q!==H)}))},A=async(H,q)=>{try{const V=await n.openUrl(q);v(H),w(typeof V=="string"?V:JSON.stringify(V,null,2)),g(!0)}catch(V){console.error("Error opening file:",V),o(r("")),s(!0)}},L=async()=>{const H=[],q=[];e.favorite_rules.forEach(V=>{!V.name||!V.name.trim()||(V.match_mode==="include"?H.push(V.name.trim()):V.match_mode==="exact"&&q.push(V.name.trim()))});try{await n.saveFavourite({like:H,equal:q}),o(r("")),s(!0)}catch(V){console.error("Error saving config:",V),o(r("")),s(!0)}},N=e.favorite_rules.map((H,q)=>({...H,originalIndex:q})),U=N.filter(H=>H.match_mode==="include"),B=N.filter(H=>H.match_mode==="exact"),k=(H,q)=>F.jsxs(Lt,{sx:{mb:4},children:[F.jsxs(bn,{variant:"subtitle1",gutterBottom:!0,sx:{fontWeight:"bold",borderLeft:"4px solid #1976d2",pl:1},children:[q," (",H.length,")"]}),H.length===0?F.jsx(bn,{variant:"body2",color:"textSecondary",sx:{pl:2},children:r("")}):F.jsx(Lt,{sx:{display:"flex",flexDirection:"column",gap:1},children:H.map(V=>F.jsx(j8,{variant:"outlined",children:F.jsxs(z8,{sx:{display:"flex",gap:2,alignItems:"center",p:"8px 16px !important"},children:[F.jsx(bn,{sx:{flexGrow:1},children:V.name}),F.jsx(Zh,{onClick:()=>I(V.originalIndex),color:"error",size:"small",children:F.jsx(Id,{})})]})},V.originalIndex))})]});return F.jsxs(Lt,{style:{padding:"0 20px",width:"100%",maxWidth:"800px"},children:[F.jsx(Kp,{open:i,autoHideDuration:3e3,onClose:()=>s(!1),message:a}),F.jsxs(Lt,{sx:{display:"flex",flexDirection:"column",gap:1,mb:4},children:[F.jsxs(Lt,{sx:{display:"flex",gap:1,alignItems:"center"},children:[F.jsxs(bn,{children:[r(""),""]}),F.jsx(bn,{component:"span",sx:{cursor:"pointer",color:"primary.main",textDecoration:"underline"},onClick:()=>A(r(""),window.document.location.origin+e.all_channel_url),children:window.document.location.origin+e.all_channel_url||r("")})]}),F.jsxs(Lt,{sx:{display:"flex",gap:1,alignItems:"center"},children:[F.jsxs(bn,{children:[r(""),""]}),F.jsx(bn,{component:"span",sx:{cursor:"pointer",color:"primary.main",textDecoration:"underline"},onClick:()=>A(r(""),window.document.location.origin+e.liked_channel_url),children:window.document.location.origin+e.liked_channel_url||r("")})]})]}),F.jsxs(Lt,{sx:{display:"flex",gap:2,alignItems:"center",mb:4,p:2,bgcolor:"#f5f5f5",borderRadius:1},children:[F.jsx(Qn,{label:r(""),value:l,onChange:H=>u(H.target.value),size:"small",sx:{flexGrow:1,bgcolor:"white"},placeholder:r("")}),F.jsxs(Rr,{size:"small",sx:{minWidth:150,bgcolor:"white"},children:[F.jsx(Cu,{children:r("")}),F.jsxs(wu,{value:c,label:r(""),onChange:H=>h(H.target.value),children:[F.jsx(Sc,{value:"include",children:r("")}),F.jsx(Sc,{value:"exact",children:r("")})]})]}),F.jsx(Wr,{variant:"contained",color:"success",startIcon:F.jsx(Ig,{}),onClick:D,disabled:!l.trim(),children:r("")})]}),k(U,r("")),k(B,r("")),F.jsx(Lt,{sx:{display:"flex",justifyContent:"flex-end",pb:4},children:F.jsx(Wr,{variant:"contained",color:"primary",onClick:L,size:"large",children:r("")})}),F.jsxs(Tu,{open:m,onClose:()=>g(!1),maxWidth:"lg",fullWidth:!0,children:[F.jsx(Ag,{children:y}),F.jsx(H8,{children:F.jsx("pre",{style:{whiteSpace:"pre-wrap",wordBreak:"break-all",maxHeight:"60vh",overflow:"auto"},children:x})})]})]})}function jye(){for(var r=arguments.length,e=new Array(r),t=0;t<r;t++)e[t]=arguments[t];return M.useMemo(()=>n=>{e.forEach(i=>i(n))},e)}const bS=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function pm(r){const e=Object.prototype.toString.call(r);return e==="[object Window]"||e==="[object global]"}function bA(r){return"nodeType"in r}function ca(r){var e,t;return r?pm(r)?r:bA(r)&&(e=(t=r.ownerDocument)==null?void 0:t.defaultView)!=null?e:window:window}function SA(r){const{Document:e}=ca(r);return r instanceof e}function Gg(r){return pm(r)?!1:r instanceof ca(r).HTMLElement}function u7(r){return r instanceof ca(r).SVGElement}function mm(r){return r?pm(r)?r.document:bA(r)?SA(r)?r:Gg(r)||u7(r)?r.ownerDocument:document:document:document}const Qo=bS?M.useLayoutEffect:M.useEffect;function SS(r){const e=M.useRef(r);return Qo(()=>{e.current=r}),M.useCallback(function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return e.current==null?void 0:e.current(...n)},[])}function zye(){const r=M.useRef(null),e=M.useCallback((n,i)=>{r.current=setInterval(n,i)},[]),t=M.useCallback(()=>{r.current!==null&&(clearInterval(r.current),r.current=null)},[]);return[e,t]}function cg(r,e){e===void 0&&(e=[r]);const t=M.useRef(r);return Qo(()=>{t.current!==r&&(t.current=r)},e),t}function Kg(r,e){const t=M.useRef();return M.useMemo(()=>{const n=r(t.current);return t.current=n,n},[...e])}function Xx(r){const e=SS(r),t=M.useRef(null),n=M.useCallback(i=>{i!==t.current&&e?.(i,t.current),t.current=i},[]);return[t,n]}function Yx(r){const e=M.useRef();return M.useEffect(()=>{e.current=r},[r]),e.current}let AC={};function Xg(r,e){return M.useMemo(()=>{if(e)return e;const t=AC[r]==null?0:AC[r]+1;return AC[r]=t,r+"-"+t},[r,e])}function c7(r){return function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return n.reduce((s,a)=>{const o=Object.entries(a);for(const[l,u]of o){const c=s[l];c!=null&&(s[l]=c+r*u)}return s},{...e})}}const xp=c7(1),dg=c7(-1);function Hye(r){return"clientX"in r&&"clientY"in r}function TS(r){if(!r)return!1;const{KeyboardEvent:e}=ca(r.target);return e&&r instanceof e}function Vye(r){if(!r)return!1;const{TouchEvent:e}=ca(r.target);return e&&r instanceof e}function Qx(r){if(Vye(r)){if(r.touches&&r.touches.length){const{clientX:e,clientY:t}=r.touches[0];return{x:e,y:t}}else if(r.changedTouches&&r.changedTouches.length){const{clientX:e,clientY:t}=r.changedTouches[0];return{x:e,y:t}}}return Hye(r)?{x:r.clientX,y:r.clientY}:null}const Fd=Object.freeze({Translate:{toString(r){if(!r)return;const{x:e,y:t}=r;return"translate3d("+(e?Math.round(e):0)+"px, "+(t?Math.round(t):0)+"px, 0)"}},Scale:{toString(r){if(!r)return;const{scaleX:e,scaleY:t}=r;return"scaleX("+e+") scaleY("+t+")"}},Transform:{toString(r){if(r)return[Fd.Translate.toString(r),Fd.Scale.toString(r)].join(" ")}},Transition:{toString(r){let{property:e,duration:t,easing:n}=r;return e+" "+t+"ms "+n}}}),h3="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function Wye(r){return r.matches(h3)?r:r.querySelector(h3)}const qye={display:"none"};function Gye(r){let{id:e,value:t}=r;return Yr.createElement("div",{id:e,style:qye},t)}function Kye(r){let{id:e,announcement:t,ariaLiveType:n="assertive"}=r;const i={position:"fixed",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return Yr.createElement("div",{id:e,style:i,role:"status","aria-live":n,"aria-atomic":!0},t)}function Xye(){const[r,e]=M.useState("");return{announce:M.useCallback(n=>{n!=null&&e(n)},[]),announcement:r}}const d7=M.createContext(null);function Yye(r){const e=M.useContext(d7);M.useEffect(()=>{if(!e)throw new Error("useDndMonitor must be used within a children of <DndContext>");return e(r)},[r,e])}function Qye(){const[r]=M.useState(()=>new Set),e=M.useCallback(n=>(r.add(n),()=>r.delete(n)),[r]);return[M.useCallback(n=>{let{type:i,event:s}=n;r.forEach(a=>{var o;return(o=a[i])==null?void 0:o.call(a,s)})},[r]),e]}const Jye={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},Zye={onDragStart(r){let{active:e}=r;return"Picked up draggable item "+e.id+"."},onDragOver(r){let{active:e,over:t}=r;return t?"Draggable item "+e.id+" was moved over droppable area "+t.id+".":"Draggable item "+e.id+" is no longer over a droppable area."},onDragEnd(r){let{active:e,over:t}=r;return t?"Draggable item "+e.id+" was dropped over droppable area "+t.id:"Draggable item "+e.id+" was dropped."},onDragCancel(r){let{active:e}=r;return"Dragging was cancelled. Draggable item "+e.id+" was dropped."}};function e_e(r){let{announcements:e=Zye,container:t,hiddenTextDescribedById:n,screenReaderInstructions:i=Jye}=r;const{announce:s,announcement:a}=Xye(),o=Xg("DndLiveRegion"),[l,u]=M.useState(!1);if(M.useEffect(()=>{u(!0)},[]),Yye(M.useMemo(()=>({onDragStart(h){let{active:m}=h;s(e.onDragStart({active:m}))},onDragMove(h){let{active:m,over:g}=h;e.onDragMove&&s(e.onDragMove({active:m,over:g}))},onDragOver(h){let{active:m,over:g}=h;s(e.onDragOver({active:m,over:g}))},onDragEnd(h){let{active:m,over:g}=h;s(e.onDragEnd({active:m,over:g}))},onDragCancel(h){let{active:m,over:g}=h;s(e.onDragCancel({active:m,over:g}))}}),[s,e])),!l)return null;const c=Yr.createElement(Yr.Fragment,null,Yr.createElement(Gye,{id:n,value:i.draggable}),Yr.createElement(Kye,{id:o,announcement:a}));return t?Ho.createPortal(c,t):c}var Fi;(function(r){r.DragStart="dragStart",r.DragMove="dragMove",r.DragEnd="dragEnd",r.DragCancel="dragCancel",r.DragOver="dragOver",r.RegisterDroppable="registerDroppable",r.SetDroppableDisabled="setDroppableDisabled",r.UnregisterDroppable="unregisterDroppable"})(Fi||(Fi={}));function Jx(){}function f3(r,e){return M.useMemo(()=>({sensor:r,options:e??{}}),[r,e])}function t_e(){for(var r=arguments.length,e=new Array(r),t=0;t<r;t++)e[t]=arguments[t];return M.useMemo(()=>[...e].filter(n=>n!=null),[...e])}const Al=Object.freeze({x:0,y:0});function r_e(r,e){return Math.sqrt(Math.pow(r.x-e.x,2)+Math.pow(r.y-e.y,2))}function n_e(r,e){const t=Qx(r);if(!t)return"0 0";const n={x:(t.x-e.left)/e.width*100,y:(t.y-e.top)/e.height*100};return n.x+"% "+n.y+"%"}function i_e(r,e){let{data:{value:t}}=r,{data:{value:n}}=e;return t-n}function s_e(r,e){let{data:{value:t}}=r,{data:{value:n}}=e;return n-t}function p3(r){let{left:e,top:t,height:n,width:i}=r;return[{x:e,y:t},{x:e+i,y:t},{x:e,y:t+n},{x:e+i,y:t+n}]}function h7(r,e){if(!r||r.length===0)return null;const[t]=r;return t[e]}const a_e=r=>{let{collisionRect:e,droppableRects:t,droppableContainers:n}=r;const i=p3(e),s=[];for(const a of n){const{id:o}=a,l=t.get(o);if(l){const u=p3(l),c=i.reduce((m,g,y)=>m+r_e(u[y],g),0),h=Number((c/4).toFixed(4));s.push({id:o,data:{droppableContainer:a,value:h}})}}return s.sort(i_e)};function o_e(r,e){const t=Math.max(e.top,r.top),n=Math.max(e.left,r.left),i=Math.min(e.left+e.width,r.left+r.width),s=Math.min(e.top+e.height,r.top+r.height),a=i-n,o=s-t;if(n<i&&t<s){const l=e.width*e.height,u=r.width*r.height,c=a*o,h=c/(l+u-c);return Number(h.toFixed(4))}return 0}const l_e=r=>{let{collisionRect:e,droppableRects:t,droppableContainers:n}=r;const i=[];for(const s of n){const{id:a}=s,o=t.get(a);if(o){const l=o_e(o,e);l>0&&i.push({id:a,data:{droppableContainer:s,value:l}})}}return i.sort(s_e)};function u_e(r,e,t){return{...r,scaleX:e&&t?e.width/t.width:1,scaleY:e&&t?e.height/t.height:1}}function f7(r,e){return r&&e?{x:r.left-e.left,y:r.top-e.top}:Al}function c_e(r){return function(t){for(var n=arguments.length,i=new Array(n>1?n-1:0),s=1;s<n;s++)i[s-1]=arguments[s];return i.reduce((a,o)=>({...a,top:a.top+r*o.y,bottom:a.bottom+r*o.y,left:a.left+r*o.x,right:a.right+r*o.x}),{...t})}}const d_e=c_e(1);function p7(r){if(r.startsWith("matrix3d(")){const e=r.slice(9,-1).split(/, /);return{x:+e[12],y:+e[13],scaleX:+e[0],scaleY:+e[5]}}else if(r.startsWith("matrix(")){const e=r.slice(7,-1).split(/, /);return{x:+e[4],y:+e[5],scaleX:+e[0],scaleY:+e[3]}}return null}function h_e(r,e,t){const n=p7(e);if(!n)return r;const{scaleX:i,scaleY:s,x:a,y:o}=n,l=r.left-a-(1-i)*parseFloat(t),u=r.top-o-(1-s)*parseFloat(t.slice(t.indexOf(" ")+1)),c=i?r.width/i:r.width,h=s?r.height/s:r.height;return{width:c,height:h,top:u,right:l+c,bottom:u+h,left:l}}const f_e={ignoreTransform:!1};function gm(r,e){e===void 0&&(e=f_e);let t=r.getBoundingClientRect();if(e.ignoreTransform){const{transform:u,transformOrigin:c}=ca(r).getComputedStyle(r);u&&(t=h_e(t,u,c))}const{top:n,left:i,width:s,height:a,bottom:o,right:l}=t;return{top:n,left:i,width:s,height:a,bottom:o,right:l}}function m3(r){return gm(r,{ignoreTransform:!0})}function p_e(r){const e=r.innerWidth,t=r.innerHeight;return{top:0,left:0,right:e,bottom:t,width:e,height:t}}function m_e(r,e){return e===void 0&&(e=ca(r).getComputedStyle(r)),e.position==="fixed"}function g_e(r,e){e===void 0&&(e=ca(r).getComputedStyle(r));const t=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(i=>{const s=e[i];return typeof s=="string"?t.test(s):!1})}function CS(r,e){const t=[];function n(i){if(e!=null&&t.length>=e||!i)return t;if(SA(i)&&i.scrollingElement!=null&&!t.includes(i.scrollingElement))return t.push(i.scrollingElement),t;if(!Gg(i)||u7(i)||t.includes(i))return t;const s=ca(r).getComputedStyle(i);return i!==r&&g_e(i,s)&&t.push(i),m_e(i,s)?t:n(i.parentNode)}return r?n(r):t}function m7(r){const[e]=CS(r,1);return e??null}function DC(r){return!bS||!r?null:pm(r)?r:bA(r)?SA(r)||r===mm(r).scrollingElement?window:Gg(r)?r:null:null}function g7(r){return pm(r)?r.scrollX:r.scrollLeft}function v7(r){return pm(r)?r.scrollY:r.scrollTop}function RE(r){return{x:g7(r),y:v7(r)}}var Ji;(function(r){r[r.Forward=1]="Forward",r[r.Backward=-1]="Backward"})(Ji||(Ji={}));function y7(r){return!bS||!r?!1:r===document.scrollingElement}function _7(r){const e={x:0,y:0},t=y7(r)?{height:window.innerHeight,width:window.innerWidth}:{height:r.clientHeight,width:r.clientWidth},n={x:r.scrollWidth-t.width,y:r.scrollHeight-t.height},i=r.scrollTop<=e.y,s=r.scrollLeft<=e.x,a=r.scrollTop>=n.y,o=r.scrollLeft>=n.x;return{isTop:i,isLeft:s,isBottom:a,isRight:o,maxScroll:n,minScroll:e}}const v_e={x:.2,y:.2};function y_e(r,e,t,n,i){let{top:s,left:a,right:o,bottom:l}=t;n===void 0&&(n=10),i===void 0&&(i=v_e);const{isTop:u,isBottom:c,isLeft:h,isRight:m}=_7(r),g={x:0,y:0},y={x:0,y:0},v={height:e.height*i.y,width:e.width*i.x};return!u&&s<=e.top+v.height?(g.y=Ji.Backward,y.y=n*Math.abs((e.top+v.height-s)/v.height)):!c&&l>=e.bottom-v.height&&(g.y=Ji.Forward,y.y=n*Math.abs((e.bottom-v.height-l)/v.height)),!m&&o>=e.right-v.width?(g.x=Ji.Forward,y.x=n*Math.abs((e.right-v.width-o)/v.width)):!h&&a<=e.left+v.width&&(g.x=Ji.Backward,y.x=n*Math.abs((e.left+v.width-a)/v.width)),{direction:g,speed:y}}function __e(r){if(r===document.scrollingElement){const{innerWidth:s,innerHeight:a}=window;return{top:0,left:0,right:s,bottom:a,width:s,height:a}}const{top:e,left:t,right:n,bottom:i}=r.getBoundingClientRect();return{top:e,left:t,right:n,bottom:i,width:r.clientWidth,height:r.clientHeight}}function x7(r){return r.reduce((e,t)=>xp(e,RE(t)),Al)}function x_e(r){return r.reduce((e,t)=>e+g7(t),0)}function b_e(r){return r.reduce((e,t)=>e+v7(t),0)}function b7(r,e){if(e===void 0&&(e=gm),!r)return;const{top:t,left:n,bottom:i,right:s}=e(r);m7(r)&&(i<=0||s<=0||t>=window.innerHeight||n>=window.innerWidth)&&r.scrollIntoView({block:"center",inline:"center"})}const S_e=[["x",["left","right"],x_e],["y",["top","bottom"],b_e]];class TA{constructor(e,t){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const n=CS(t),i=x7(n);this.rect={...e},this.width=e.width,this.height=e.height;for(const[s,a,o]of S_e)for(const l of a)Object.defineProperty(this,l,{get:()=>{const u=o(n),c=i[s]-u;return this.rect[l]+c},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class B0{constructor(e){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(t=>{var n;return(n=this.target)==null?void 0:n.removeEventListener(...t)})},this.target=e}add(e,t,n){var i;(i=this.target)==null||i.addEventListener(e,t,n),this.listeners.push([e,t,n])}}function T_e(r){const{EventTarget:e}=ca(r);return r instanceof e?r:mm(r)}function IC(r,e){const t=Math.abs(r.x),n=Math.abs(r.y);return typeof e=="number"?Math.sqrt(t**2+n**2)>e:"x"in e&&"y"in e?t>e.x&&n>e.y:"x"in e?t>e.x:"y"in e?n>e.y:!1}var $o;(function(r){r.Click="click",r.DragStart="dragstart",r.Keydown="keydown",r.ContextMenu="contextmenu",r.Resize="resize",r.SelectionChange="selectionchange",r.VisibilityChange="visibilitychange"})($o||($o={}));function g3(r){r.preventDefault()}function C_e(r){r.stopPropagation()}var un;(function(r){r.Space="Space",r.Down="ArrowDown",r.Right="ArrowRight",r.Left="ArrowLeft",r.Up="ArrowUp",r.Esc="Escape",r.Enter="Enter"})(un||(un={}));const S7={start:[un.Space,un.Enter],cancel:[un.Esc],end:[un.Space,un.Enter]},w_e=(r,e)=>{let{currentCoordinates:t}=e;switch(r.code){case un.Right:return{...t,x:t.x+25};case un.Left:return{...t,x:t.x-25};case un.Down:return{...t,y:t.y+25};case un.Up:return{...t,y:t.y-25}}};class CA{constructor(e){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=e;const{event:{target:t}}=e;this.props=e,this.listeners=new B0(mm(t)),this.windowListeners=new B0(ca(t)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add($o.Resize,this.handleCancel),this.windowListeners.add($o.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add($o.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:e,onStart:t}=this.props,n=e.node.current;n&&b7(n),t(Al)}handleKeyDown(e){if(TS(e)){const{active:t,context:n,options:i}=this.props,{keyboardCodes:s=S7,coordinateGetter:a=w_e,scrollBehavior:o="smooth"}=i,{code:l}=e;if(s.end.includes(l)){this.handleEnd(e);return}if(s.cancel.includes(l)){this.handleCancel(e);return}const{collisionRect:u}=n.current,c=u?{x:u.left,y:u.top}:Al;this.referenceCoordinates||(this.referenceCoordinates=c);const h=a(e,{active:t,context:n.current,currentCoordinates:c});if(h){const m=dg(h,c),g={x:0,y:0},{scrollableAncestors:y}=n.current;for(const v of y){const x=e.code,{isTop:w,isRight:E,isLeft:D,isBottom:I,maxScroll:A,minScroll:L}=_7(v),N=__e(v),U={x:Math.min(x===un.Right?N.right-N.width/2:N.right,Math.max(x===un.Right?N.left:N.left+N.width/2,h.x)),y:Math.min(x===un.Down?N.bottom-N.height/2:N.bottom,Math.max(x===un.Down?N.top:N.top+N.height/2,h.y))},B=x===un.Right&&!E||x===un.Left&&!D,k=x===un.Down&&!I||x===un.Up&&!w;if(B&&U.x!==h.x){const H=v.scrollLeft+m.x,q=x===un.Right&&H<=A.x||x===un.Left&&H>=L.x;if(q&&!m.y){v.scrollTo({left:H,behavior:o});return}q?g.x=v.scrollLeft-H:g.x=x===un.Right?v.scrollLeft-A.x:v.scrollLeft-L.x,g.x&&v.scrollBy({left:-g.x,behavior:o});break}else if(k&&U.y!==h.y){const H=v.scrollTop+m.y,q=x===un.Down&&H<=A.y||x===un.Up&&H>=L.y;if(q&&!m.x){v.scrollTo({top:H,behavior:o});return}q?g.y=v.scrollTop-H:g.y=x===un.Down?v.scrollTop-A.y:v.scrollTop-L.y,g.y&&v.scrollBy({top:-g.y,behavior:o});break}}this.handleMove(e,xp(dg(h,this.referenceCoordinates),g))}}}handleMove(e,t){const{onMove:n}=this.props;e.preventDefault(),n(t)}handleEnd(e){const{onEnd:t}=this.props;e.preventDefault(),this.detach(),t()}handleCancel(e){const{onCancel:t}=this.props;e.preventDefault(),this.detach(),t()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}CA.activators=[{eventName:"onKeyDown",handler:(r,e,t)=>{let{keyboardCodes:n=S7,onActivation:i}=e,{active:s}=t;const{code:a}=r.nativeEvent;if(n.start.includes(a)){const o=s.activatorNode.current;return o&&r.target!==o?!1:(r.preventDefault(),i?.({event:r.nativeEvent}),!0)}return!1}}];function v3(r){return!!(r&&"distance"in r)}function y3(r){return!!(r&&"delay"in r)}class wA{constructor(e,t,n){var i;n===void 0&&(n=T_e(e.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=e,this.events=t;const{event:s}=e,{target:a}=s;this.props=e,this.events=t,this.document=mm(a),this.documentListeners=new B0(this.document),this.listeners=new B0(n),this.windowListeners=new B0(ca(a)),this.initialCoordinates=(i=Qx(s))!=null?i:Al,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:e,props:{options:{activationConstraint:t,bypassActivationConstraint:n}}}=this;if(this.listeners.add(e.move.name,this.handleMove,{passive:!1}),this.listeners.add(e.end.name,this.handleEnd),this.windowListeners.add($o.Resize,this.handleCancel),this.windowListeners.add($o.DragStart,g3),this.windowListeners.add($o.VisibilityChange,this.handleCancel),this.windowListeners.add($o.ContextMenu,g3),this.documentListeners.add($o.Keydown,this.handleKeydown),t){if(n!=null&&n({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(y3(t)){this.timeoutId=setTimeout(this.handleStart,t.delay);return}if(v3(t))return}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handleStart(){const{initialCoordinates:e}=this,{onStart:t}=this.props;e&&(this.activated=!0,this.documentListeners.add($o.Click,C_e,{capture:!0}),this.removeTextSelection(),this.documentListeners.add($o.SelectionChange,this.removeTextSelection),t(e))}handleMove(e){var t;const{activated:n,initialCoordinates:i,props:s}=this,{onMove:a,options:{activationConstraint:o}}=s;if(!i)return;const l=(t=Qx(e))!=null?t:Al,u=dg(i,l);if(!n&&o){if(v3(o)){if(o.tolerance!=null&&IC(u,o.tolerance))return this.handleCancel();if(IC(u,o.distance))return this.handleStart()}return y3(o)&&IC(u,o.tolerance)?this.handleCancel():void 0}e.cancelable&&e.preventDefault(),a(l)}handleEnd(){const{onEnd:e}=this.props;this.detach(),e()}handleCancel(){const{onCancel:e}=this.props;this.detach(),e()}handleKeydown(e){e.code===un.Esc&&this.handleCancel()}removeTextSelection(){var e;(e=this.document.getSelection())==null||e.removeAllRanges()}}const E_e={move:{name:"pointermove"},end:{name:"pointerup"}};class EA extends wA{constructor(e){const{event:t}=e,n=mm(t.target);super(e,E_e,n)}}EA.activators=[{eventName:"onPointerDown",handler:(r,e)=>{let{nativeEvent:t}=r,{onActivation:n}=e;return!t.isPrimary||t.button!==0?!1:(n?.({event:t}),!0)}}];const k_e={move:{name:"mousemove"},end:{name:"mouseup"}};var LE;(function(r){r[r.RightClick=2]="RightClick"})(LE||(LE={}));class A_e extends wA{constructor(e){super(e,k_e,mm(e.event.target))}}A_e.activators=[{eventName:"onMouseDown",handler:(r,e)=>{let{nativeEvent:t}=r,{onActivation:n}=e;return t.button===LE.RightClick?!1:(n?.({event:t}),!0)}}];const PC={move:{name:"touchmove"},end:{name:"touchend"}};class D_e extends wA{constructor(e){super(e,PC)}static setup(){return window.addEventListener(PC.move.name,e,{capture:!1,passive:!1}),function(){window.removeEventListener(PC.move.name,e)};function e(){}}}D_e.activators=[{eventName:"onTouchStart",handler:(r,e)=>{let{nativeEvent:t}=r,{onActivation:n}=e;const{touches:i}=t;return i.length>1?!1:(n?.({event:t}),!0)}}];var N0;(function(r){r[r.Pointer=0]="Pointer",r[r.DraggableRect=1]="DraggableRect"})(N0||(N0={}));var Zx;(function(r){r[r.TreeOrder=0]="TreeOrder",r[r.ReversedTreeOrder=1]="ReversedTreeOrder"})(Zx||(Zx={}));function I_e(r){let{acceleration:e,activator:t=N0.Pointer,canScroll:n,draggingRect:i,enabled:s,interval:a=5,order:o=Zx.TreeOrder,pointerCoordinates:l,scrollableAncestors:u,scrollableAncestorRects:c,delta:h,threshold:m}=r;const g=R_e({delta:h,disabled:!s}),[y,v]=zye(),x=M.useRef({x:0,y:0}),w=M.useRef({x:0,y:0}),E=M.useMemo(()=>{switch(t){case N0.Pointer:return l?{top:l.y,bottom:l.y,left:l.x,right:l.x}:null;case N0.DraggableRect:return i}},[t,i,l]),D=M.useRef(null),I=M.useCallback(()=>{const L=D.current;if(!L)return;const N=x.current.x*w.current.x,U=x.current.y*w.current.y;L.scrollBy(N,U)},[]),A=M.useMemo(()=>o===Zx.TreeOrder?[...u].reverse():u,[o,u]);M.useEffect(()=>{if(!s||!u.length||!E){v();return}for(const L of A){if(n?.(L)===!1)continue;const N=u.indexOf(L),U=c[N];if(!U)continue;const{direction:B,speed:k}=y_e(L,U,E,e,m);for(const H of["x","y"])g[H][B[H]]||(k[H]=0,B[H]=0);if(k.x>0||k.y>0){v(),D.current=L,y(I,a),x.current=k,w.current=B;return}}x.current={x:0,y:0},w.current={x:0,y:0},v()},[e,I,n,v,s,a,JSON.stringify(E),JSON.stringify(g),y,u,A,c,JSON.stringify(m)])}const P_e={x:{[Ji.Backward]:!1,[Ji.Forward]:!1},y:{[Ji.Backward]:!1,[Ji.Forward]:!1}};function R_e(r){let{delta:e,disabled:t}=r;const n=Yx(e);return Kg(i=>{if(t||!n||!i)return P_e;const s={x:Math.sign(e.x-n.x),y:Math.sign(e.y-n.y)};return{x:{[Ji.Backward]:i.x[Ji.Backward]||s.x===-1,[Ji.Forward]:i.x[Ji.Forward]||s.x===1},y:{[Ji.Backward]:i.y[Ji.Backward]||s.y===-1,[Ji.Forward]:i.y[Ji.Forward]||s.y===1}}},[t,e,n])}function L_e(r,e){const t=e!==null?r.get(e):void 0,n=t?t.node.current:null;return Kg(i=>{var s;return e===null?null:(s=n??i)!=null?s:null},[n,e])}function O_e(r,e){return M.useMemo(()=>r.reduce((t,n)=>{const{sensor:i}=n,s=i.activators.map(a=>({eventName:a.eventName,handler:e(a.handler,n)}));return[...t,...s]},[]),[r,e])}var hg;(function(r){r[r.Always=0]="Always",r[r.BeforeDragging=1]="BeforeDragging",r[r.WhileDragging=2]="WhileDragging"})(hg||(hg={}));var OE;(function(r){r.Optimized="optimized"})(OE||(OE={}));const _3=new Map;function M_e(r,e){let{dragging:t,dependencies:n,config:i}=e;const[s,a]=M.useState(null),{frequency:o,measure:l,strategy:u}=i,c=M.useRef(r),h=x(),m=cg(h),g=M.useCallback(function(w){w===void 0&&(w=[]),!m.current&&a(E=>E===null?w:E.concat(w.filter(D=>!E.includes(D))))},[m]),y=M.useRef(null),v=Kg(w=>{if(h&&!t)return _3;if(!w||w===_3||c.current!==r||s!=null){const E=new Map;for(let D of r){if(!D)continue;if(s&&s.length>0&&!s.includes(D.id)&&D.rect.current){E.set(D.id,D.rect.current);continue}const I=D.node.current,A=I?new TA(l(I),I):null;D.rect.current=A,A&&E.set(D.id,A)}return E}return w},[r,s,t,h,l]);return M.useEffect(()=>{c.current=r},[r]),M.useEffect(()=>{h||g()},[t,h]),M.useEffect(()=>{s&&s.length>0&&a(null)},[JSON.stringify(s)]),M.useEffect(()=>{h||typeof o!="number"||y.current!==null||(y.current=setTimeout(()=>{g(),y.current=null},o))},[o,h,g,...n]),{droppableRects:v,measureDroppableContainers:g,measuringScheduled:s!=null};function x(){switch(u){case hg.Always:return!1;case hg.BeforeDragging:return t;default:return!t}}}function kA(r,e){return Kg(t=>r?t||(typeof e=="function"?e(r):r):null,[e,r])}function F_e(r,e){return kA(r,e)}function B_e(r){let{callback:e,disabled:t}=r;const n=SS(e),i=M.useMemo(()=>{if(t||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:s}=window;return new s(n)},[n,t]);return M.useEffect(()=>()=>i?.disconnect(),[i]),i}function wS(r){let{callback:e,disabled:t}=r;const n=SS(e),i=M.useMemo(()=>{if(t||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:s}=window;return new s(n)},[t]);return M.useEffect(()=>()=>i?.disconnect(),[i]),i}function N_e(r){return new TA(gm(r),r)}function x3(r,e,t){e===void 0&&(e=N_e);const[n,i]=M.useReducer(o,null),s=B_e({callback(l){if(r)for(const u of l){const{type:c,target:h}=u;if(c==="childList"&&h instanceof HTMLElement&&h.contains(r)){i();break}}}}),a=wS({callback:i});return Qo(()=>{i(),r?(a?.observe(r),s?.observe(document.body,{childList:!0,subtree:!0})):(a?.disconnect(),s?.disconnect())},[r]),n;function o(l){if(!r)return null;if(r.isConnected===!1){var u;return(u=l??t)!=null?u:null}const c=e(r);return JSON.stringify(l)===JSON.stringify(c)?l:c}}function U_e(r){const e=kA(r);return f7(r,e)}const b3=[];function $_e(r){const e=M.useRef(r),t=Kg(n=>r?n&&n!==b3&&r&&e.current&&r.parentNode===e.current.parentNode?n:CS(r):b3,[r]);return M.useEffect(()=>{e.current=r},[r]),t}function j_e(r){const[e,t]=M.useState(null),n=M.useRef(r),i=M.useCallback(s=>{const a=DC(s.target);a&&t(o=>o?(o.set(a,RE(a)),new Map(o)):null)},[]);return M.useEffect(()=>{const s=n.current;if(r!==s){a(s);const o=r.map(l=>{const u=DC(l);return u?(u.addEventListener("scroll",i,{passive:!0}),[u,RE(u)]):null}).filter(l=>l!=null);t(o.length?new Map(o):null),n.current=r}return()=>{a(r),a(s)};function a(o){o.forEach(l=>{const u=DC(l);u?.removeEventListener("scroll",i)})}},[i,r]),M.useMemo(()=>r.length?e?Array.from(e.values()).reduce((s,a)=>xp(s,a),Al):x7(r):Al,[r,e])}function S3(r,e){e===void 0&&(e=[]);const t=M.useRef(null);return M.useEffect(()=>{t.current=null},e),M.useEffect(()=>{const n=r!==Al;n&&!t.current&&(t.current=r),!n&&t.current&&(t.current=null)},[r]),t.current?dg(r,t.current):Al}function z_e(r){M.useEffect(()=>{if(!bS)return;const e=r.map(t=>{let{sensor:n}=t;return n.setup==null?void 0:n.setup()});return()=>{for(const t of e)t?.()}},r.map(e=>{let{sensor:t}=e;return t}))}function H_e(r,e){return M.useMemo(()=>r.reduce((t,n)=>{let{eventName:i,handler:s}=n;return t[i]=a=>{s(a,e)},t},{}),[r,e])}function T7(r){return M.useMemo(()=>r?p_e(r):null,[r])}const RC=[];function V_e(r,e){e===void 0&&(e=gm);const[t]=r,n=T7(t?ca(t):null),[i,s]=M.useReducer(o,RC),a=wS({callback:s});return r.length>0&&i===RC&&s(),Qo(()=>{r.length?r.forEach(l=>a?.observe(l)):(a?.disconnect(),s())},[r]),i;function o(){return r.length?r.map(l=>y7(l)?n:new TA(e(l),l)):RC}}function C7(r){if(!r)return null;if(r.children.length>1)return r;const e=r.children[0];return Gg(e)?e:r}function W_e(r){let{measure:e}=r;const[t,n]=M.useState(null),i=M.useCallback(u=>{for(const{target:c}of u)if(Gg(c)){n(h=>{const m=e(c);return h?{...h,width:m.width,height:m.height}:m});break}},[e]),s=wS({callback:i}),a=M.useCallback(u=>{const c=C7(u);s?.disconnect(),c&&s?.observe(c),n(c?e(c):null)},[e,s]),[o,l]=Xx(a);return M.useMemo(()=>({nodeRef:o,rect:t,setRef:l}),[t,o,l])}const q_e=[{sensor:EA,options:{}},{sensor:CA,options:{}}],G_e={current:{}},D_={draggable:{measure:m3},droppable:{measure:m3,strategy:hg.WhileDragging,frequency:OE.Optimized},dragOverlay:{measure:gm}};class U0 extends Map{get(e){var t;return e!=null&&(t=super.get(e))!=null?t:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(e=>{let{disabled:t}=e;return!t})}getNodeFor(e){var t,n;return(t=(n=this.get(e))==null?void 0:n.node.current)!=null?t:void 0}}const K_e={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new U0,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:Jx},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:D_,measureDroppableContainers:Jx,windowRect:null,measuringScheduled:!1},w7={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:Jx,draggableNodes:new Map,over:null,measureDroppableContainers:Jx},Yg=M.createContext(w7),E7=M.createContext(K_e);function X_e(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new U0}}}function Y_e(r,e){switch(e.type){case Fi.DragStart:return{...r,draggable:{...r.draggable,initialCoordinates:e.initialCoordinates,active:e.active}};case Fi.DragMove:return r.draggable.active?{...r,draggable:{...r.draggable,translate:{x:e.coordinates.x-r.draggable.initialCoordinates.x,y:e.coordinates.y-r.draggable.initialCoordinates.y}}}:r;case Fi.DragEnd:case Fi.DragCancel:return{...r,draggable:{...r.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case Fi.RegisterDroppable:{const{element:t}=e,{id:n}=t,i=new U0(r.droppable.containers);return i.set(n,t),{...r,droppable:{...r.droppable,containers:i}}}case Fi.SetDroppableDisabled:{const{id:t,key:n,disabled:i}=e,s=r.droppable.containers.get(t);if(!s||n!==s.key)return r;const a=new U0(r.droppable.containers);return a.set(t,{...s,disabled:i}),{...r,droppable:{...r.droppable,containers:a}}}case Fi.UnregisterDroppable:{const{id:t,key:n}=e,i=r.droppable.containers.get(t);if(!i||n!==i.key)return r;const s=new U0(r.droppable.containers);return s.delete(t),{...r,droppable:{...r.droppable,containers:s}}}default:return r}}function Q_e(r){let{disabled:e}=r;const{active:t,activatorEvent:n,draggableNodes:i}=M.useContext(Yg),s=Yx(n),a=Yx(t?.id);return M.useEffect(()=>{if(!e&&!n&&s&&a!=null){if(!TS(s)||document.activeElement===s.target)return;const o=i.get(a);if(!o)return;const{activatorNode:l,node:u}=o;if(!l.current&&!u.current)return;requestAnimationFrame(()=>{for(const c of[l.current,u.current]){if(!c)continue;const h=Wye(c);if(h){h.focus();break}}})}},[n,e,i,a,s]),null}function k7(r,e){let{transform:t,...n}=e;return r!=null&&r.length?r.reduce((i,s)=>s({transform:i,...n}),t):t}function J_e(r){return M.useMemo(()=>({draggable:{...D_.draggable,...r?.draggable},droppable:{...D_.droppable,...r?.droppable},dragOverlay:{...D_.dragOverlay,...r?.dragOverlay}}),[r?.draggable,r?.droppable,r?.dragOverlay])}function Z_e(r){let{activeNode:e,measure:t,initialRect:n,config:i=!0}=r;const s=M.useRef(!1),{x:a,y:o}=typeof i=="boolean"?{x:i,y:i}:i;Qo(()=>{if(!a&&!o||!e){s.current=!1;return}if(s.current||!n)return;const u=e?.node.current;if(!u||u.isConnected===!1)return;const c=t(u),h=f7(c,n);if(a||(h.x=0),o||(h.y=0),s.current=!0,Math.abs(h.x)>0||Math.abs(h.y)>0){const m=m7(u);m&&m.scrollBy({top:h.y,left:h.x})}},[e,a,o,n,t])}const ES=M.createContext({...Al,scaleX:1,scaleY:1});var vd;(function(r){r[r.Uninitialized=0]="Uninitialized",r[r.Initializing=1]="Initializing",r[r.Initialized=2]="Initialized"})(vd||(vd={}));const exe=M.memo(function(e){var t,n,i,s;let{id:a,accessibility:o,autoScroll:l=!0,children:u,sensors:c=q_e,collisionDetection:h=l_e,measuring:m,modifiers:g,...y}=e;const v=M.useReducer(Y_e,void 0,X_e),[x,w]=v,[E,D]=Qye(),[I,A]=M.useState(vd.Uninitialized),L=I===vd.Initialized,{draggable:{active:N,nodes:U,translate:B},droppable:{containers:k}}=x,H=N?U.get(N):null,q=M.useRef({initial:null,translated:null}),V=M.useMemo(()=>{var Mr;return N!=null?{id:N,data:(Mr=H?.data)!=null?Mr:G_e,rect:q}:null},[N,H]),Q=M.useRef(null),[ie,le]=M.useState(null),[he,ae]=M.useState(null),ne=cg(y,Object.values(y)),ue=Xg("DndDescribedBy",a),ee=M.useMemo(()=>k.getEnabled(),[k]),pe=J_e(m),{droppableRects:me,measureDroppableContainers:xe,measuringScheduled:Be}=M_e(ee,{dragging:L,dependencies:[B.x,B.y],config:pe.droppable}),Oe=L_e(U,N),dt=M.useMemo(()=>he?Qx(he):null,[he]),Ke=In(),_t=F_e(Oe,pe.draggable.measure);Z_e({activeNode:N?U.get(N):null,config:Ke.layoutShiftCompensation,initialRect:_t,measure:pe.draggable.measure});const Ze=x3(Oe,pe.draggable.measure,_t),Ot=x3(Oe?Oe.parentElement:null),Nt=M.useRef({activatorEvent:null,active:null,activeNode:Oe,collisionRect:null,collisions:null,droppableRects:me,draggableNodes:U,draggingNode:null,draggingNodeRect:null,droppableContainers:k,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),qe=k.getNodeFor((t=Nt.current.over)==null?void 0:t.id),Ue=W_e({measure:pe.dragOverlay.measure}),Pe=(n=Ue.nodeRef.current)!=null?n:Oe,$e=L?(i=Ue.rect)!=null?i:Ze:null,rt=!!(Ue.nodeRef.current&&Ue.rect),lt=U_e(rt?null:Ze),ht=T7(Pe?ca(Pe):null),ut=$_e(L?qe??Oe:null),St=V_e(ut),ot=k7(g,{transform:{x:B.x-lt.x,y:B.y-lt.y,scaleX:1,scaleY:1},activatorEvent:he,active:V,activeNodeRect:Ze,containerNodeRect:Ot,draggingNodeRect:$e,over:Nt.current.over,overlayNodeRect:Ue.rect,scrollableAncestors:ut,scrollableAncestorRects:St,windowRect:ht}),yr=dt?xp(dt,B):null,pr=j_e(ut),jr=S3(pr),ur=S3(pr,[Ze]),Wt=xp(ot,jr),mr=$e?d_e($e,ot):null,Tr=V&&mr?h({active:V,collisionRect:mr,droppableRects:me,droppableContainers:ee,pointerCoordinates:yr}):null,Nr=h7(Tr,"id"),[Tt,Ht]=M.useState(null),An=rt?ot:xp(ot,ur),Vt=u_e(An,(s=Tt?.rect)!=null?s:null,Ze),Cr=M.useCallback((Mr,se)=>{let{sensor:fe,options:Te}=se;if(Q.current==null)return;const je=U.get(Q.current);if(!je)return;const pt=Mr.nativeEvent,Gt=new fe({active:Q.current,activeNode:je,event:pt,options:Te,context:Nt,onStart(ye){const Ae=Q.current;if(Ae==null)return;const Ge=U.get(Ae);if(!Ge)return;const{onDragStart:Xe}=ne.current,yt={active:{id:Ae,data:Ge.data,rect:q}};Ho.unstable_batchedUpdates(()=>{Xe?.(yt),A(vd.Initializing),w({type:Fi.DragStart,initialCoordinates:ye,active:Ae}),E({type:"onDragStart",event:yt})})},onMove(ye){w({type:Fi.DragMove,coordinates:ye})},onEnd:be(Fi.DragEnd),onCancel:be(Fi.DragCancel)});Ho.unstable_batchedUpdates(()=>{le(Gt),ae(Mr.nativeEvent)});function be(ye){return async function(){const{active:Ge,collisions:Xe,over:yt,scrollAdjustedTranslate:At}=Nt.current;let st=null;if(Ge&&At){const{cancelDrop:gt}=ne.current;st={activatorEvent:pt,active:Ge,collisions:Xe,delta:At,over:yt},ye===Fi.DragEnd&&typeof gt=="function"&&await Promise.resolve(gt(st))&&(ye=Fi.DragCancel)}Q.current=null,Ho.unstable_batchedUpdates(()=>{w({type:ye}),A(vd.Uninitialized),Ht(null),le(null),ae(null);const gt=ye===Fi.DragEnd?"onDragEnd":"onDragCancel";if(st){const jt=ne.current[gt];jt?.(st),E({type:gt,event:st})}})}}},[U]),Ur=M.useCallback((Mr,se)=>(fe,Te)=>{const je=fe.nativeEvent,pt=U.get(Te);if(Q.current!==null||!pt||je.dndKit||je.defaultPrevented)return;const Gt={active:pt};Mr(fe,se.options,Gt)===!0&&(je.dndKit={capturedBy:se.sensor},Q.current=Te,Cr(fe,se))},[U,Cr]),qr=O_e(c,Ur);z_e(c),Qo(()=>{Ze&&I===vd.Initializing&&A(vd.Initialized)},[Ze,I]),M.useEffect(()=>{const{onDragMove:Mr}=ne.current,{active:se,activatorEvent:fe,collisions:Te,over:je}=Nt.current;if(!se||!fe)return;const pt={active:se,activatorEvent:fe,collisions:Te,delta:{x:Wt.x,y:Wt.y},over:je};Ho.unstable_batchedUpdates(()=>{Mr?.(pt),E({type:"onDragMove",event:pt})})},[Wt.x,Wt.y]),M.useEffect(()=>{const{active:Mr,activatorEvent:se,collisions:fe,droppableContainers:Te,scrollAdjustedTranslate:je}=Nt.current;if(!Mr||Q.current==null||!se||!je)return;const{onDragOver:pt}=ne.current,Gt=Te.get(Nr),be=Gt&&Gt.rect.current?{id:Gt.id,rect:Gt.rect.current,data:Gt.data,disabled:Gt.disabled}:null,ye={active:Mr,activatorEvent:se,collisions:fe,delta:{x:je.x,y:je.y},over:be};Ho.unstable_batchedUpdates(()=>{Ht(be),pt?.(ye),E({type:"onDragOver",event:ye})})},[Nr]),Qo(()=>{Nt.current={activatorEvent:he,active:V,activeNode:Oe,collisionRect:mr,collisions:Tr,droppableRects:me,draggableNodes:U,draggingNode:Pe,draggingNodeRect:$e,droppableContainers:k,over:Tt,scrollableAncestors:ut,scrollAdjustedTranslate:Wt},q.current={initial:$e,translated:mr}},[V,Oe,Tr,mr,U,Pe,$e,me,k,Tt,ut,Wt]),I_e({...Ke,delta:B,draggingRect:mr,pointerCoordinates:yr,scrollableAncestors:ut,scrollableAncestorRects:St});const En=M.useMemo(()=>({active:V,activeNode:Oe,activeNodeRect:Ze,activatorEvent:he,collisions:Tr,containerNodeRect:Ot,dragOverlay:Ue,draggableNodes:U,droppableContainers:k,droppableRects:me,over:Tt,measureDroppableContainers:xe,scrollableAncestors:ut,scrollableAncestorRects:St,measuringConfiguration:pe,measuringScheduled:Be,windowRect:ht}),[V,Oe,Ze,he,Tr,Ot,Ue,U,k,me,Tt,xe,ut,St,pe,Be,ht]),Dn=M.useMemo(()=>({activatorEvent:he,activators:qr,active:V,activeNodeRect:Ze,ariaDescribedById:{draggable:ue},dispatch:w,draggableNodes:U,over:Tt,measureDroppableContainers:xe}),[he,qr,V,Ze,w,ue,U,Tt,xe]);return Yr.createElement(d7.Provider,{value:D},Yr.createElement(Yg.Provider,{value:Dn},Yr.createElement(E7.Provider,{value:En},Yr.createElement(ES.Provider,{value:Vt},u)),Yr.createElement(Q_e,{disabled:o?.restoreFocus===!1})),Yr.createElement(e_e,{...o,hiddenTextDescribedById:ue}));function In(){const Mr=ie?.autoScrollEnabled===!1,se=typeof l=="object"?l.enabled===!1:l===!1,fe=L&&!Mr&&!se;return typeof l=="object"?{...l,enabled:fe}:{enabled:fe}}}),txe=M.createContext(null),T3="button",rxe="Droppable";function nxe(r){let{id:e,data:t,disabled:n=!1,attributes:i}=r;const s=Xg(rxe),{activators:a,activatorEvent:o,active:l,activeNodeRect:u,ariaDescribedById:c,draggableNodes:h,over:m}=M.useContext(Yg),{role:g=T3,roleDescription:y="draggable",tabIndex:v=0}=i??{},x=l?.id===e,w=M.useContext(x?ES:txe),[E,D]=Xx(),[I,A]=Xx(),L=H_e(a,e),N=cg(t);Qo(()=>(h.set(e,{id:e,key:s,node:E,activatorNode:I,data:N}),()=>{const B=h.get(e);B&&B.key===s&&h.delete(e)}),[h,e]);const U=M.useMemo(()=>({role:g,tabIndex:v,"aria-disabled":n,"aria-pressed":x&&g===T3?!0:void 0,"aria-roledescription":y,"aria-describedby":c.draggable}),[n,g,v,x,y,c.draggable]);return{active:l,activatorEvent:o,activeNodeRect:u,attributes:U,isDragging:x,listeners:n?void 0:L,node:E,over:m,setNodeRef:D,setActivatorNodeRef:A,transform:w}}function A7(){return M.useContext(E7)}const ixe="Droppable",sxe={timeout:25};function axe(r){let{data:e,disabled:t=!1,id:n,resizeObserverConfig:i}=r;const s=Xg(ixe),{active:a,dispatch:o,over:l,measureDroppableContainers:u}=M.useContext(Yg),c=M.useRef({disabled:t}),h=M.useRef(!1),m=M.useRef(null),g=M.useRef(null),{disabled:y,updateMeasurementsFor:v,timeout:x}={...sxe,...i},w=cg(v??n),E=M.useCallback(()=>{if(!h.current){h.current=!0;return}g.current!=null&&clearTimeout(g.current),g.current=setTimeout(()=>{u(Array.isArray(w.current)?w.current:[w.current]),g.current=null},x)},[x]),D=wS({callback:E,disabled:y||!a}),I=M.useCallback((U,B)=>{D&&(B&&(D.unobserve(B),h.current=!1),U&&D.observe(U))},[D]),[A,L]=Xx(I),N=cg(e);return M.useEffect(()=>{!D||!A.current||(D.disconnect(),h.current=!1,D.observe(A.current))},[A,D]),Qo(()=>(o({type:Fi.RegisterDroppable,element:{id:n,key:s,disabled:t,node:A,rect:m,data:N}}),()=>o({type:Fi.UnregisterDroppable,key:s,id:n})),[n]),M.useEffect(()=>{t!==c.current.disabled&&(o({type:Fi.SetDroppableDisabled,id:n,key:s,disabled:t}),c.current.disabled=t)},[n,s,t,o]),{active:a,rect:m,isOver:l?.id===n,node:A,over:l,setNodeRef:L}}function oxe(r){let{animation:e,children:t}=r;const[n,i]=M.useState(null),[s,a]=M.useState(null),o=Yx(t);return!t&&!n&&o&&i(o),Qo(()=>{if(!s)return;const l=n?.key,u=n?.props.id;if(l==null||u==null){i(null);return}Promise.resolve(e(u,s)).then(()=>{i(null)})},[e,n,s]),Yr.createElement(Yr.Fragment,null,t,n?M.cloneElement(n,{ref:a}):null)}const lxe={x:0,y:0,scaleX:1,scaleY:1};function uxe(r){let{children:e}=r;return Yr.createElement(Yg.Provider,{value:w7},Yr.createElement(ES.Provider,{value:lxe},e))}const cxe={position:"fixed",touchAction:"none"},dxe=r=>TS(r)?"transform 250ms ease":void 0,hxe=M.forwardRef((r,e)=>{let{as:t,activatorEvent:n,adjustScale:i,children:s,className:a,rect:o,style:l,transform:u,transition:c=dxe}=r;if(!o)return null;const h=i?u:{...u,scaleX:1,scaleY:1},m={...cxe,width:o.width,height:o.height,top:o.top,left:o.left,transform:Fd.Transform.toString(h),transformOrigin:i&&n?n_e(n,o):void 0,transition:typeof c=="function"?c(n):c,...l};return Yr.createElement(t,{className:a,style:m,ref:e},s)}),fxe=r=>e=>{let{active:t,dragOverlay:n}=e;const i={},{styles:s,className:a}=r;if(s!=null&&s.active)for(const[o,l]of Object.entries(s.active))l!==void 0&&(i[o]=t.node.style.getPropertyValue(o),t.node.style.setProperty(o,l));if(s!=null&&s.dragOverlay)for(const[o,l]of Object.entries(s.dragOverlay))l!==void 0&&n.node.style.setProperty(o,l);return a!=null&&a.active&&t.node.classList.add(a.active),a!=null&&a.dragOverlay&&n.node.classList.add(a.dragOverlay),function(){for(const[l,u]of Object.entries(i))t.node.style.setProperty(l,u);a!=null&&a.active&&t.node.classList.remove(a.active)}},pxe=r=>{let{transform:{initial:e,final:t}}=r;return[{transform:Fd.Transform.toString(e)},{transform:Fd.Transform.toString(t)}]},mxe={duration:250,easing:"ease",keyframes:pxe,sideEffects:fxe({styles:{active:{opacity:"0"}}})};function gxe(r){let{config:e,draggableNodes:t,droppableContainers:n,measuringConfiguration:i}=r;return SS((s,a)=>{if(e===null)return;const o=t.get(s);if(!o)return;const l=o.node.current;if(!l)return;const u=C7(a);if(!u)return;const{transform:c}=ca(a).getComputedStyle(a),h=p7(c);if(!h)return;const m=typeof e=="function"?e:vxe(e);return b7(l,i.draggable.measure),m({active:{id:s,data:o.data,node:l,rect:i.draggable.measure(l)},draggableNodes:t,dragOverlay:{node:a,rect:i.dragOverlay.measure(u)},droppableContainers:n,measuringConfiguration:i,transform:h})})}function vxe(r){const{duration:e,easing:t,sideEffects:n,keyframes:i}={...mxe,...r};return s=>{let{active:a,dragOverlay:o,transform:l,...u}=s;if(!e)return;const c={x:o.rect.left-a.rect.left,y:o.rect.top-a.rect.top},h={scaleX:l.scaleX!==1?a.rect.width*l.scaleX/o.rect.width:1,scaleY:l.scaleY!==1?a.rect.height*l.scaleY/o.rect.height:1},m={x:l.x-c.x,y:l.y-c.y,...h},g=i({...u,active:a,dragOverlay:o,transform:{initial:l,final:m}}),[y]=g,v=g[g.length-1];if(JSON.stringify(y)===JSON.stringify(v))return;const x=n?.({active:a,dragOverlay:o,...u}),w=o.node.animate(g,{duration:e,easing:t,fill:"forwards"});return new Promise(E=>{w.onfinish=()=>{x?.(),E()}})}}let C3=0;function yxe(r){return M.useMemo(()=>{if(r!=null)return C3++,C3},[r])}const _xe=Yr.memo(r=>{let{adjustScale:e=!1,children:t,dropAnimation:n,style:i,transition:s,modifiers:a,wrapperElement:o="div",className:l,zIndex:u=999}=r;const{activatorEvent:c,active:h,activeNodeRect:m,containerNodeRect:g,draggableNodes:y,droppableContainers:v,dragOverlay:x,over:w,measuringConfiguration:E,scrollableAncestors:D,scrollableAncestorRects:I,windowRect:A}=A7(),L=M.useContext(ES),N=yxe(h?.id),U=k7(a,{activatorEvent:c,active:h,activeNodeRect:m,containerNodeRect:g,draggingNodeRect:x.rect,over:w,overlayNodeRect:x.rect,scrollableAncestors:D,scrollableAncestorRects:I,transform:L,windowRect:A}),B=kA(m),k=gxe({config:n,draggableNodes:y,droppableContainers:v,measuringConfiguration:E}),H=B?x.setRef:void 0;return Yr.createElement(uxe,null,Yr.createElement(oxe,{animation:k},h&&N?Yr.createElement(hxe,{key:N,id:h.id,ref:H,as:o,activatorEvent:c,adjustScale:e,className:l,transition:s,rect:B,style:{zIndex:u,...i},transform:U},t):null))});function AA(r,e,t){const n=r.slice();return n.splice(t<0?n.length+t:t,0,n.splice(e,1)[0]),n}function xxe(r,e){return r.reduce((t,n,i)=>{const s=e.get(n);return s&&(t[i]=s),t},Array(r.length))}function xy(r){return r!==null&&r>=0}function bxe(r,e){if(r===e)return!0;if(r.length!==e.length)return!1;for(let t=0;t<r.length;t++)if(r[t]!==e[t])return!1;return!0}function Sxe(r){return typeof r=="boolean"?{draggable:r,droppable:r}:r}const D7=r=>{let{rects:e,activeIndex:t,overIndex:n,index:i}=r;const s=AA(e,n,t),a=e[i],o=s[i];return!o||!a?null:{x:o.left-a.left,y:o.top-a.top,scaleX:o.width/a.width,scaleY:o.height/a.height}},I7="Sortable",P7=Yr.createContext({activeIndex:-1,containerId:I7,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:D7,disabled:{draggable:!1,droppable:!1}});function Txe(r){let{children:e,id:t,items:n,strategy:i=D7,disabled:s=!1}=r;const{active:a,dragOverlay:o,droppableRects:l,over:u,measureDroppableContainers:c}=A7(),h=Xg(I7,t),m=o.rect!==null,g=M.useMemo(()=>n.map(L=>typeof L=="object"&&"id"in L?L.id:L),[n]),y=a!=null,v=a?g.indexOf(a.id):-1,x=u?g.indexOf(u.id):-1,w=M.useRef(g),E=!bxe(g,w.current),D=x!==-1&&v===-1||E,I=Sxe(s);Qo(()=>{E&&y&&c(g)},[E,g,y,c]),M.useEffect(()=>{w.current=g},[g]);const A=M.useMemo(()=>({activeIndex:v,containerId:h,disabled:I,disableTransforms:D,items:g,overIndex:x,useDragOverlay:m,sortedRects:xxe(g,l),strategy:i}),[v,h,I.draggable,I.droppable,D,g,x,l,m,i]);return Yr.createElement(P7.Provider,{value:A},e)}const Cxe=r=>{let{id:e,items:t,activeIndex:n,overIndex:i}=r;return AA(t,n,i).indexOf(e)},wxe=r=>{let{containerId:e,isSorting:t,wasDragging:n,index:i,items:s,newIndex:a,previousItems:o,previousContainerId:l,transition:u}=r;return!u||!n||o!==s&&i===a?!1:t?!0:a!==i&&e===l},Exe={duration:200,easing:"ease"},R7="transform",kxe=Fd.Transition.toString({property:R7,duration:0,easing:"linear"}),Axe={roleDescription:"sortable"};function Dxe(r){let{disabled:e,index:t,node:n,rect:i}=r;const[s,a]=M.useState(null),o=M.useRef(t);return Qo(()=>{if(!e&&t!==o.current&&n.current){const l=i.current;if(l){const u=gm(n.current,{ignoreTransform:!0}),c={x:l.left-u.left,y:l.top-u.top,scaleX:l.width/u.width,scaleY:l.height/u.height};(c.x||c.y)&&a(c)}}t!==o.current&&(o.current=t)},[e,t,n,i]),M.useEffect(()=>{s&&a(null)},[s]),s}function Ixe(r){let{animateLayoutChanges:e=wxe,attributes:t,disabled:n,data:i,getNewIndex:s=Cxe,id:a,strategy:o,resizeObserverConfig:l,transition:u=Exe}=r;const{items:c,containerId:h,activeIndex:m,disabled:g,disableTransforms:y,sortedRects:v,overIndex:x,useDragOverlay:w,strategy:E}=M.useContext(P7),D=Pxe(n,g),I=c.indexOf(a),A=M.useMemo(()=>({sortable:{containerId:h,index:I,items:c},...i}),[h,i,I,c]),L=M.useMemo(()=>c.slice(c.indexOf(a)),[c,a]),{rect:N,node:U,isOver:B,setNodeRef:k}=axe({id:a,data:A,disabled:D.droppable,resizeObserverConfig:{updateMeasurementsFor:L,...l}}),{active:H,activatorEvent:q,activeNodeRect:V,attributes:Q,setNodeRef:ie,listeners:le,isDragging:he,over:ae,setActivatorNodeRef:ne,transform:ue}=nxe({id:a,data:A,attributes:{...Axe,...t},disabled:D.draggable}),ee=jye(k,ie),pe=!!H,me=pe&&!y&&xy(m)&&xy(x),xe=!w&&he,Be=xe&&me?ue:null,dt=me?Be??(o??E)({rects:v,activeNodeRect:V,activeIndex:m,overIndex:x,index:I}):null,Ke=xy(m)&&xy(x)?s({id:a,items:c,activeIndex:m,overIndex:x}):I,_t=H?.id,Ze=M.useRef({activeId:_t,items:c,newIndex:Ke,containerId:h}),Ot=c!==Ze.current.items,Nt=e({active:H,containerId:h,isDragging:he,isSorting:pe,id:a,index:I,items:c,newIndex:Ze.current.newIndex,previousItems:Ze.current.items,previousContainerId:Ze.current.containerId,transition:u,wasDragging:Ze.current.activeId!=null}),qe=Dxe({disabled:!Nt,index:I,node:U,rect:N});return M.useEffect(()=>{pe&&Ze.current.newIndex!==Ke&&(Ze.current.newIndex=Ke),h!==Ze.current.containerId&&(Ze.current.containerId=h),c!==Ze.current.items&&(Ze.current.items=c)},[pe,Ke,h,c]),M.useEffect(()=>{if(_t===Ze.current.activeId)return;if(_t&&!Ze.current.activeId){Ze.current.activeId=_t;return}const Pe=setTimeout(()=>{Ze.current.activeId=_t},50);return()=>clearTimeout(Pe)},[_t]),{active:H,activeIndex:m,attributes:Q,data:A,rect:N,index:I,newIndex:Ke,items:c,isOver:B,isSorting:pe,isDragging:he,listeners:le,node:U,overIndex:x,over:ae,setNodeRef:ee,setActivatorNodeRef:ne,setDroppableNodeRef:k,setDraggableNodeRef:ie,transform:qe??dt,transition:Ue()};function Ue(){if(qe||Ot&&Ze.current.newIndex===I)return kxe;if(!(xe&&!TS(q)||!u)&&(pe||Nt))return Fd.Transition.toString({...u,property:R7})}}function Pxe(r,e){var t,n;return typeof r=="boolean"?{draggable:r,droppable:!1}:{draggable:(t=r?.draggable)!=null?t:e.draggable,droppable:(n=r?.droppable)!=null?n:e.droppable}}function eb(r){if(!r)return!1;const e=r.data.current;return!!(e&&"sortable"in e&&typeof e.sortable=="object"&&"containerId"in e.sortable&&"items"in e.sortable&&"index"in e.sortable)}const Rxe=[un.Down,un.Right,un.Up,un.Left],Lxe=(r,e)=>{let{context:{active:t,collisionRect:n,droppableRects:i,droppableContainers:s,over:a,scrollableAncestors:o}}=e;if(Rxe.includes(r.code)){if(r.preventDefault(),!t||!n)return;const l=[];s.getEnabled().forEach(h=>{if(!h||h!=null&&h.disabled)return;const m=i.get(h.id);if(m)switch(r.code){case un.Down:n.top<m.top&&l.push(h);break;case un.Up:n.top>m.top&&l.push(h);break;case un.Left:n.left>m.left&&l.push(h);break;case un.Right:n.left<m.left&&l.push(h);break}});const u=a_e({collisionRect:n,droppableRects:i,droppableContainers:l});let c=h7(u,"id");if(c===a?.id&&u.length>1&&(c=u[1].id),c!=null){const h=s.get(t.id),m=s.get(c),g=m?i.get(m.id):null,y=m?.node.current;if(y&&g&&h&&m){const x=CS(y).some((L,N)=>o[N]!==L),w=L7(h,m),E=Oxe(h,m),D=x||!w?{x:0,y:0}:{x:E?n.width-g.width:0,y:E?n.height-g.height:0},I={x:g.left,y:g.top};return D.x&&D.y?I:dg(I,D)}}}};function L7(r,e){return!eb(r)||!eb(e)?!1:r.data.current.sortable.containerId===e.data.current.sortable.containerId}function Oxe(r,e){return!eb(r)||!eb(e)||!L7(r,e)?!1:r.data.current.sortable.index<e.data.current.sortable.index}const O7=M.createContext({attributes:{},listeners:void 0,ref(){}});function Mxe(){const{attributes:r,listeners:e,ref:t}=M.useContext(O7);return F.jsx("button",{className:"DragHandle",...r,...e,ref:t,children:F.jsx("svg",{viewBox:"0 0 20 20",width:"12",children:F.jsx("path",{d:"M7 2a2 2 0 1 0 .001 4.001A2 2 0 0 0 7 2zm0 6a2 2 0 1 0 .001 4.001A2 2 0 0 0 7 8zm0 6a2 2 0 1 0 .001 4.001A2 2 0 0 0 7 14zm6-8a2 2 0 1 0-.001-4.001A2 2 0 0 0 13 6zm0 2a2 2 0 1 0 .001 4.001A2 2 0 0 0 13 8zm0 6a2 2 0 1 0 .001 4.001A2 2 0 0 0 13 14z"})})})}function Fxe(r){const{children:e,id:t}=r,{attributes:n,isDragging:i,listeners:s,setNodeRef:a,setActivatorNodeRef:o,transform:l,transition:u}=Ixe({id:t}),c=M.useMemo(()=>({attributes:n,listeners:s,ref:o}),[n,s,o]),h={opacity:i?.4:void 0,transform:Fd.Translate.toString(l),transition:u};return F.jsx(O7.Provider,{value:c,children:F.jsx("li",{className:"SortableItem",ref:a,style:h,children:e})})}function $0(r){const{items:e,onChange:t,renderItem:n}=r,[i,s]=M.useState(null),a=M.useMemo(()=>e.find(l=>l.index===i?.id),[i,e]),o=t_e(f3(EA),f3(CA,{coordinateGetter:Lxe}));return F.jsxs(exe,{sensors:o,onDragStart:({active:l})=>{s(l)},onDragEnd:({active:l,over:u})=>{if(u&&l.id!==u?.id){const c=e.findIndex(({index:m})=>m===l.id),h=e.findIndex(({index:m})=>m===u.id);t(AA(e,c,h))}s(null)},onDragCancel:()=>{s(null)},children:[F.jsx(Txe,{items:e,children:F.jsx("ul",{className:"SortableList",role:"application",children:e.map(l=>F.jsx(Yr.Fragment,{children:n(l)},l.index))})}),F.jsx(Bxe,{children:a?n(a):null})]})}function Bxe({children:r}){return F.jsx(_xe,{children:r})}$0.Item=Fxe;$0.DragHandle=Mxe;function Nxe(r){const e=M.useContext(vo);return F.jsx($0,{items:e.detailList,onChange:e.onChangeExportData,renderItem:t=>F.jsxs($0.Item,{id:t.index,children:[t.name,F.jsx($0.DragHandle,{})]})})}const Uxe=Ir(F.jsx("path",{d:"m6 18 8.5-6L6 6zM16 6v12h2V6z"})),$xe=Ir(F.jsx("path",{d:"M6 6h2v12H6zm3.5 6 8.5 6V6z"}));function w3(r){const{children:e,value:t,index:n,...i}=r;return F.jsx("div",{role:"tabpanel",hidden:t!==n,id:`simple-tabpanel-${n}`,"aria-labelledby":`simple-tab-${n}`,...i,children:t===n&&F.jsx(Lt,{sx:{p:3},children:F.jsx(bn,{children:e})})})}function M7(r){const{t:e}=bs(),t=M.useContext(vo),{onClose:n,open:i,mod:s,clearSelectedArrFunc:a,setDialogMod:o,selectedArr:l}=r,[u,c]=M.useState(""),[h,m]=M.useState(""),[g,y]=M.useState(0),[v,x]=M.useState("");M.useEffect(()=>{y(0),m(""),s===1?c(e("m3u")):s===2?c(e("")):s===3?c(e("")):s===4?c(e("(,,)")):s===5&&c(e(""))},[s]);const w=()=>{n()},E=()=>{t.nowMod===1?t.clientSaveFile(t.detailList,"m3u"):t.webSaveFile(t.detailList,"m3u")},D=()=>{o(1),t.onChangeExportStr()},I=()=>{o(4)},A=k=>{m(k.target.value)},L=()=>{g===0?(t.batchChangeGroupName(l,h),n()):(t.addGroupName(v),y(0))},N=(k,H)=>{y(H)},U=k=>{x(k.target.value)},B=()=>{t.nowMod===1?t.clientSaveFile(t.detailList,"txt"):t.webSaveFile(t.detailList,"txt")};return F.jsxs(Tu,{onClose:w,open:i,children:[F.jsx(Lt,{style:{minWidth:s!==3?"800px":"",paddingTop:"10px",overflow:"hidden"},children:F.jsx("span",{style:{paddingLeft:"10px"},children:u})}),s===1||s===2?F.jsx(Rr,{sx:{width:550,margin:"10px"},children:F.jsx(Qn,{multiline:!0,sx:{fontSize:"11px"},size:"small",id:"standard-multiline-static",rows:4,value:t.exportDataStr})}):"",s===4?F.jsxs(Lt,{style:{padding:"5px"},children:[F.jsx(Nxe,{}),F.jsx(Lt,{children:F.jsx(Rr,{sx:{width:550,margin:"10px",display:"flex",flexDirection:"revert"},children:F.jsx(Vo,{size:"small",onClick:D,variant:"outlined",style:{marginRight:"10px"},startIcon:F.jsx(Uxe,{}),children:e("")})})})]}):"",s===1?F.jsxs(Rr,{sx:{width:550,margin:"10px",display:"flex",flexDirection:"revert"},children:[F.jsx(Vo,{size:"small",onClick:I,variant:"outlined",style:{marginRight:"10px"},startIcon:F.jsx($xe,{}),children:e("")}),F.jsx(Vo,{size:"small",onClick:E,variant:"contained",style:{marginRight:"10px"},startIcon:F.jsx(xw,{}),children:e("m3u")}),F.jsx(Vo,{size:"small",onClick:B,variant:"outlined",style:{marginRight:"10px"},startIcon:F.jsx(xw,{}),children:e("txt")})]}):"",s===5?F.jsxs(Lt,{sx:{width:550,margin:"10px"},children:[F.jsx(Lt,{sx:{borderBottom:1,borderColor:"divider"},children:F.jsxs(Y8,{value:g,onChange:N,"aria-label":"basic tabs example",children:[F.jsx(bw,{label:e("")}),F.jsx(bw,{label:e("")})]})}),F.jsx(w3,{value:g,index:0,children:F.jsxs(Rr,{fullWidth:!0,children:[F.jsx(Cu,{id:"demo-simple-select-label",children:e("")}),F.jsx(wu,{labelId:"demo-simple-select-label",id:"demo-simple-select",value:h,label:e(""),onChange:A,children:t.detailMenu.groups.map((k,H)=>F.jsx(Sc,{value:k,children:k},H))})]})}),F.jsx(w3,{value:g,index:1,children:F.jsx(Rr,{fullWidth:!0,children:F.jsx(Qn,{id:"standard-basic",label:e(""),value:v,variant:"standard",onChange:U})})}),F.jsx(Lt,{sx:{display:"flex",justifyContent:"flex-end",marginTop:"5px"},children:F.jsx(Wr,{variant:"outlined",onClick:L,children:e(g===0?"":"")})})]}):""]})}M7.propTypes={onClose:_l.func.isRequired,open:_l.bool.isRequired,mod:_l.number.isRequired};const jxe=Ir(F.jsx("path",{d:"M10.09 15.59 11.5 17l5-5-5-5-1.41 1.41L12.67 11H3v2h9.67zM19 3H5c-1.11 0-2 .9-2 2v4h2V5h14v14H5v-4H3v4c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2"})),zxe=Ir(F.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m.06 17v-2.01H12c-1.28 0-2.56-.49-3.54-1.46-1.71-1.71-1.92-4.35-.64-6.29l1.1 1.1c-.71 1.33-.53 3.01.59 4.13.7.7 1.62 1.03 2.54 1.01v-2.14l2.83 2.83zm4.11-4.24-1.1-1.1c.71-1.33.53-3.01-.59-4.13C13.79 8.84 12.9 8.5 12 8.5h-.06v2.15L9.11 7.83 11.94 5v2.02c1.3-.02 2.61.45 3.6 1.45 1.7 1.7 1.91 4.35.63 6.29"}));at("li")(({theme:r})=>({margin:r.spacing(.5),listStyle:"none",display:"initial"}));const Hxe=40,E3={PaperProps:{style:{maxHeight:Hxe*5,width:200}}};function Vxe(r){db();const{t:e}=bs(),t=M.useContext(vo),{selectedArr:n,setSelectedArr:i,showMultiSelect:s,changeShowMultiSelect:a}=r,[o,l]=M.useState([]),[u,c]=M.useState(""),[h,m]=M.useState([]),[g,y]=M.useState(1),[v,x]=M.useState(!1),[w,E]=M.useState([]),D=Q=>{E(Q.target.value);let ie={};for(let he=0;he<Q.target.value.length;he++)ie[Q.target.value[he]]=Q.target.value[he];let le=t.videoResolution;for(let he=0;he<le.length;he++){let ae=!1;ie[le[he].value]!==void 0&&(ae=!0),le[he].checked=ae}t.changeVideoResolution(le)};M.useEffect(()=>{I()},[]);const I=()=>{let Q=nn.getVideoResolutionList(),ie=[];for(let le=0;le<Q.length;le++)ie.push({...Q[le],checked:!1});t.changeVideoResolution(ie)},A=Q=>{c(Q.target.value)},L=()=>{let Q=[];u!==""&&Q.push(u),t.filterM3u(Q,o,w)},N=()=>{t.onExportValidM3uData(),y(4),x(!0)},U=Q=>{x(!1)},B=()=>{i([])},k=Q=>{l(Q.target.value)},H=()=>{y(5),x(!0)},q=()=>{console.log("selectedArr---",n),t.deleteShowM3uRow(n),i([])},V=Q=>{a(Q.target.checked)};return F.jsxs(Lt,{sx:{border:"1px solid #868686",padding:"8px",borderRadius:"5px"},children:[F.jsx(M7,{open:v,onClose:U,clearSelectedArrFunc:B,setDialogMod:y,selectedArr:n,mod:g}),F.jsx(Lt,{sx:{display:"flex",justifyContent:"space-between"},children:F.jsxs(Lt,{children:[F.jsxs(Lt,{sx:{marginBottom:"10px"},children:[F.jsx(Aa,{control:F.jsx(sp,{}),onChange:V,label:""}),n.length>0?F.jsx(Rr,{sx:{marginRight:"5px"},children:F.jsx(Vo,{size:"small",color:"error",onClick:q,variant:"outlined",startIcon:F.jsx(Id,{}),children:e("")})}):"",n.length>0?F.jsx(Rr,{sx:{marginRight:"5px"},children:F.jsx(Vo,{size:"small",onClick:H,variant:"outlined",startIcon:F.jsx(zxe,{}),children:e("")})}):"",s?"":F.jsx(Rr,{sx:{marginRight:"5px"},children:F.jsx(Vo,{size:"small",onClick:N,variant:"contained",startIcon:F.jsx(jxe,{}),children:e("()")})})]}),s?F.jsx("div",{children:F.jsx(Lt,{sx:{display:"flex"},children:F.jsxs(Lt,{component:"form",sx:{marginBottom:"5px",display:"flex",alignItems:"flex-end"},children:[F.jsx(Rr,{sx:{marginRight:"5px",width:200},children:F.jsx(Qn,{id:"outlined-name",variant:"outlined",size:"small",value:u,onChange:A,label:e("")})}),F.jsxs(Rr,{sx:{width:200,margin:0,marginRight:"5px"},size:"small",children:[F.jsx(Cu,{id:"demo-select-small",size:"small",children:e("")}),F.jsx(wu,{labelId:"demo-select-small",id:"demo-select-small",size:"small",multiple:!0,value:o,onChange:k,input:F.jsx(Cp,{size:"small",label:e("")}),renderValue:Q=>Q.join(", "),MenuProps:E3,children:t.detailMenu.groups&&t.detailMenu.groups.map((Q,ie)=>F.jsxs(Sc,{value:Q,children:[F.jsx(sp,{checked:o.indexOf(Q)!==-1}),F.jsx(Q_,{primary:Q})]},ie))})]}),t.detailMenu.videoRevolution&&t.detailMenu.videoRevolution.length>0?F.jsxs(Rr,{sx:{width:200,margin:0,marginRight:"5px"},size:"small",children:[F.jsx(Cu,{id:"demo-select-small",size:"small",children:e("")}),F.jsx(wu,{labelId:"demo-select-small",id:"demo-select-small",size:"small",multiple:!0,value:w,onChange:D,input:F.jsx(Cp,{size:"small",label:e("")}),renderValue:Q=>Q.join(", "),MenuProps:E3,children:t.detailMenu.videoRevolution.map((Q,ie)=>F.jsxs(Sc,{value:Q.value,children:[F.jsx(sp,{checked:Q.checked}),F.jsx(Q_,{primary:Q.name})]},ie))})]}):"",F.jsx(Rr,{sx:{marginRight:"5px"},children:F.jsx(Vo,{size:"small",onClick:L,variant:"contained",color:"success",startIcon:F.jsx(C8,{}),children:e("")})})]})})}):""]})})]})}const Wxe=Ir(F.jsx("path",{fillRule:"evenodd",d:"M4 11h16v2H4z"}));function Ni(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function zp(r){"@babel/helpers - typeof";return zp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},zp(r)}function qxe(r,e){if(zp(r)!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e);if(zp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}function F7(r){var e=qxe(r,"string");return zp(e)=="symbol"?e:e+""}function k3(r,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,F7(n.key),n)}}function ss(r,e,t){return e&&k3(r.prototype,e),t&&k3(r,t),Object.defineProperty(r,"prototype",{writable:!1}),r}function yo(r,e){if(e&&(zp(e)=="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return He(r)}function Ye(r,e,t){return(e=F7(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function B7(){var r=this.constructor.getDerivedStateFromProps(this.props,this.state);r!=null&&this.setState(r)}function N7(r){function e(t){var n=this.constructor.getDerivedStateFromProps(r,t);return n??null}this.setState(e.bind(this))}function U7(r,e){try{var t=this.props,n=this.state;this.props=r,this.state=e,this.__reactInternalSnapshotFlag=!0,this.__reactInternalSnapshot=this.getSnapshotBeforeUpdate(t,n)}finally{this.props=t,this.state=n}}B7.__suppressDeprecationWarning=!0;N7.__suppressDeprecationWarning=!0;U7.__suppressDeprecationWarning=!0;function Qg(r){var e=r.prototype;if(!e||!e.isReactComponent)throw new Error("Can only polyfill class components");if(typeof r.getDerivedStateFromProps!="function"&&typeof e.getSnapshotBeforeUpdate!="function")return r;var t=null,n=null,i=null;if(typeof e.componentWillMount=="function"?t="componentWillMount":typeof e.UNSAFE_componentWillMount=="function"&&(t="UNSAFE_componentWillMount"),typeof e.componentWillReceiveProps=="function"?n="componentWillReceiveProps":typeof e.UNSAFE_componentWillReceiveProps=="function"&&(n="UNSAFE_componentWillReceiveProps"),typeof e.componentWillUpdate=="function"?i="componentWillUpdate":typeof e.UNSAFE_componentWillUpdate=="function"&&(i="UNSAFE_componentWillUpdate"),t!==null||n!==null||i!==null){var s=r.displayName||r.name,a=typeof r.getDerivedStateFromProps=="function"?"getDerivedStateFromProps()":"getSnapshotBeforeUpdate()";throw Error(`Unsafe legacy lifecycles will not be called for components using new component APIs.

`+s+" uses "+a+" but also contains the following legacy lifecycles:"+(t!==null?`
  `+t:"")+(n!==null?`
  `+n:"")+(i!==null?`
  `+i:"")+`

The above lifecycles should be removed. Learn more about this warning here:
https://fb.me/react-async-component-lifecycle-hooks`)}if(typeof r.getDerivedStateFromProps=="function"&&(e.componentWillMount=B7,e.componentWillReceiveProps=N7),typeof e.getSnapshotBeforeUpdate=="function"){if(typeof e.componentDidUpdate!="function")throw new Error("Cannot polyfill getSnapshotBeforeUpdate() for components that do not define componentDidUpdate() on the prototype");e.componentWillUpdate=U7;var o=e.componentDidUpdate;e.componentDidUpdate=function(u,c,h){var m=this.__reactInternalSnapshotFlag?this.__reactInternalSnapshot:h;o.call(this,u,c,m)}}return r}function $7(r){var e,t,n="";if(typeof r=="string"||typeof r=="number")n+=r;else if(typeof r=="object")if(Array.isArray(r))for(e=0;e<r.length;e++)r[e]&&(t=$7(r[e]))&&(n&&(n+=" "),n+=t);else for(e in r)r[e]&&(n&&(n+=" "),n+=e);return n}function bl(){for(var r,e,t=0,n="";t<arguments.length;)(r=arguments[t++])&&(e=$7(r))&&(n&&(n+=" "),n+=e);return n}function A3(r){var e=r.cellCount,t=r.cellSize,n=r.computeMetadataCallback,i=r.computeMetadataCallbackProps,s=r.nextCellsCount,a=r.nextCellSize,o=r.nextScrollToIndex,l=r.scrollToIndex,u=r.updateScrollOffsetForScrollToIndex;(e!==s||(typeof t=="number"||typeof a=="number")&&t!==a)&&(n(i),l>=0&&l===o&&u())}function _0(r,e){if(r==null)return{};var t,n,i=Ib(r,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(r);for(n=0;n<s.length;n++)t=s[n],e.indexOf(t)===-1&&{}.propertyIsEnumerable.call(r,t)&&(i[t]=r[t])}return i}var Gxe=(function(){function r(e){var t=e.cellCount,n=e.cellSizeGetter,i=e.estimatedCellSize;Ni(this,r),Ye(this,"_cellSizeAndPositionData",{}),Ye(this,"_lastMeasuredIndex",-1),Ye(this,"_lastBatchedIndex",-1),Ye(this,"_cellCount",void 0),Ye(this,"_cellSizeGetter",void 0),Ye(this,"_estimatedCellSize",void 0),this._cellSizeGetter=n,this._cellCount=t,this._estimatedCellSize=i}return ss(r,[{key:"areOffsetsAdjusted",value:function(){return!1}},{key:"configure",value:function(t){var n=t.cellCount,i=t.estimatedCellSize,s=t.cellSizeGetter;this._cellCount=n,this._estimatedCellSize=i,this._cellSizeGetter=s}},{key:"getCellCount",value:function(){return this._cellCount}},{key:"getEstimatedCellSize",value:function(){return this._estimatedCellSize}},{key:"getLastMeasuredIndex",value:function(){return this._lastMeasuredIndex}},{key:"getOffsetAdjustment",value:function(){return 0}},{key:"getSizeAndPositionOfCell",value:function(t){if(t<0||t>=this._cellCount)throw Error("Requested index ".concat(t," is outside of range 0..").concat(this._cellCount));if(t>this._lastMeasuredIndex)for(var n=this.getSizeAndPositionOfLastMeasuredCell(),i=n.offset+n.size,s=this._lastMeasuredIndex+1;s<=t;s++){var a=this._cellSizeGetter({index:s});if(a===void 0||isNaN(a))throw Error("Invalid size returned for cell ".concat(s," of value ").concat(a));a===null?(this._cellSizeAndPositionData[s]={offset:i,size:0},this._lastBatchedIndex=t):(this._cellSizeAndPositionData[s]={offset:i,size:a},i+=a,this._lastMeasuredIndex=t)}return this._cellSizeAndPositionData[t]}},{key:"getSizeAndPositionOfLastMeasuredCell",value:function(){return this._lastMeasuredIndex>=0?this._cellSizeAndPositionData[this._lastMeasuredIndex]:{offset:0,size:0}}},{key:"getTotalSize",value:function(){var t=this.getSizeAndPositionOfLastMeasuredCell(),n=t.offset+t.size,i=this._cellCount-this._lastMeasuredIndex-1,s=i*this._estimatedCellSize;return n+s}},{key:"getUpdatedOffsetForIndex",value:function(t){var n=t.align,i=n===void 0?"auto":n,s=t.containerSize,a=t.currentOffset,o=t.targetIndex;if(s<=0)return 0;var l=this.getSizeAndPositionOfCell(o),u=l.offset,c=u-s+l.size,h;switch(i){case"start":h=u;break;case"end":h=c;break;case"center":h=u-(s-l.size)/2;break;default:h=Math.max(c,Math.min(u,a));break}var m=this.getTotalSize();return Math.max(0,Math.min(m-s,h))}},{key:"getVisibleCellRange",value:function(t){var n=t.containerSize,i=t.offset,s=this.getTotalSize();if(s===0)return{};var a=i+n,o=this._findNearestCell(i),l=this.getSizeAndPositionOfCell(o);i=l.offset+l.size;for(var u=o;i<a&&u<this._cellCount-1;)u++,i+=this.getSizeAndPositionOfCell(u).size;return{start:o,stop:u}}},{key:"resetCell",value:function(t){this._lastMeasuredIndex=Math.min(this._lastMeasuredIndex,t-1)}},{key:"_binarySearch",value:function(t,n,i){for(;n<=t;){var s=n+Math.floor((t-n)/2),a=this.getSizeAndPositionOfCell(s).offset;if(a===i)return s;a<i?n=s+1:a>i&&(t=s-1)}return n>0?n-1:0}},{key:"_exponentialSearch",value:function(t,n){for(var i=1;t<this._cellCount&&this.getSizeAndPositionOfCell(t).offset<n;)t+=i,i*=2;return this._binarySearch(Math.min(t,this._cellCount-1),Math.floor(t/2),n)}},{key:"_findNearestCell",value:function(t){if(isNaN(t))throw Error("Invalid offset ".concat(t," specified"));t=Math.max(0,t);var n=this.getSizeAndPositionOfLastMeasuredCell(),i=Math.max(0,this._lastMeasuredIndex);return n.offset>=t?this._binarySearch(i,0,t):this._exponentialSearch(i,t)}}]),r})(),Kxe=15e5,Xxe=16777100,Yxe=function(){return typeof window<"u"},Qxe=function(){return!!window.chrome},Jxe=function(){return Yxe()&&Qxe()?Xxe:Kxe},D3=(function(){function r(e){var t=e.maxScrollSize,n=t===void 0?Jxe():t,i=_0(e,["maxScrollSize"]);Ni(this,r),Ye(this,"_cellSizeAndPositionManager",void 0),Ye(this,"_maxScrollSize",void 0),this._cellSizeAndPositionManager=new Gxe(i),this._maxScrollSize=n}return ss(r,[{key:"areOffsetsAdjusted",value:function(){return this._cellSizeAndPositionManager.getTotalSize()>this._maxScrollSize}},{key:"configure",value:function(t){this._cellSizeAndPositionManager.configure(t)}},{key:"getCellCount",value:function(){return this._cellSizeAndPositionManager.getCellCount()}},{key:"getEstimatedCellSize",value:function(){return this._cellSizeAndPositionManager.getEstimatedCellSize()}},{key:"getLastMeasuredIndex",value:function(){return this._cellSizeAndPositionManager.getLastMeasuredIndex()}},{key:"getOffsetAdjustment",value:function(t){var n=t.containerSize,i=t.offset,s=this._cellSizeAndPositionManager.getTotalSize(),a=this.getTotalSize(),o=this._getOffsetPercentage({containerSize:n,offset:i,totalSize:a});return Math.round(o*(a-s))}},{key:"getSizeAndPositionOfCell",value:function(t){return this._cellSizeAndPositionManager.getSizeAndPositionOfCell(t)}},{key:"getSizeAndPositionOfLastMeasuredCell",value:function(){return this._cellSizeAndPositionManager.getSizeAndPositionOfLastMeasuredCell()}},{key:"getTotalSize",value:function(){return Math.min(this._maxScrollSize,this._cellSizeAndPositionManager.getTotalSize())}},{key:"getUpdatedOffsetForIndex",value:function(t){var n=t.align,i=n===void 0?"auto":n,s=t.containerSize,a=t.currentOffset,o=t.targetIndex;a=this._safeOffsetToOffset({containerSize:s,offset:a});var l=this._cellSizeAndPositionManager.getUpdatedOffsetForIndex({align:i,containerSize:s,currentOffset:a,targetIndex:o});return this._offsetToSafeOffset({containerSize:s,offset:l})}},{key:"getVisibleCellRange",value:function(t){var n=t.containerSize,i=t.offset;return i=this._safeOffsetToOffset({containerSize:n,offset:i}),this._cellSizeAndPositionManager.getVisibleCellRange({containerSize:n,offset:i})}},{key:"resetCell",value:function(t){this._cellSizeAndPositionManager.resetCell(t)}},{key:"_getOffsetPercentage",value:function(t){var n=t.containerSize,i=t.offset,s=t.totalSize;return s<=n?0:i/(s-n)}},{key:"_offsetToSafeOffset",value:function(t){var n=t.containerSize,i=t.offset,s=this._cellSizeAndPositionManager.getTotalSize(),a=this.getTotalSize();if(s===a)return i;var o=this._getOffsetPercentage({containerSize:n,offset:i,totalSize:s});return Math.round(o*(a-n))}},{key:"_safeOffsetToOffset",value:function(t){var n=t.containerSize,i=t.offset,s=this._cellSizeAndPositionManager.getTotalSize(),a=this.getTotalSize();if(s===a)return i;var o=this._getOffsetPercentage({containerSize:n,offset:i,totalSize:a});return Math.round(o*(s-n))}}]),r})();function Hp(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,e={};return function(t){var n=t.callback,i=t.indices,s=Object.keys(i),a=!r||s.every(function(l){var u=i[l];return Array.isArray(u)?u.length>0:u>=0}),o=s.length!==Object.keys(e).length||s.some(function(l){var u=e[l],c=i[l];return Array.isArray(c)?u.join(",")!==c.join(","):u!==c});e=i,a&&o&&n(i)}}var by=-1,cc=1;function Zxe(r){var e=r.cellCount,t=r.overscanCellsCount,n=r.scrollDirection,i=r.startIndex,s=r.stopIndex;return n===cc?{overscanStartIndex:Math.max(0,i),overscanStopIndex:Math.min(e-1,s+t)}:{overscanStartIndex:Math.max(0,i-t),overscanStopIndex:Math.min(e-1,s)}}function I3(r){var e=r.cellSize,t=r.cellSizeAndPositionManager,n=r.previousCellsCount,i=r.previousCellSize,s=r.previousScrollToAlignment,a=r.previousScrollToIndex,o=r.previousSize,l=r.scrollOffset,u=r.scrollToAlignment,c=r.scrollToIndex,h=r.size,m=r.sizeJustIncreasedFromZero,g=r.updateScrollIndexCallback,y=t.getCellCount(),v=c>=0&&c<y,x=h!==o||m||!i||typeof e=="number"&&e!==i;v&&(x||u!==s||c!==a)?g(c):!v&&y>0&&(h<o||y<n)&&l>t.getTotalSize()-h&&g(y-1)}function ebe(r){for(var e=r.cellCache,t=r.cellRenderer,n=r.columnSizeAndPositionManager,i=r.columnStartIndex,s=r.columnStopIndex,a=r.deferredMeasurementCache,o=r.horizontalOffsetAdjustment,l=r.isScrolling,u=r.isScrollingOptOut,c=r.parent,h=r.rowSizeAndPositionManager,m=r.rowStartIndex,g=r.rowStopIndex,y=r.styleCache,v=r.verticalOffsetAdjustment,x=r.visibleColumnIndices,w=r.visibleRowIndices,E=[],D=n.areOffsetsAdjusted()||h.areOffsetsAdjusted(),I=!l&&!D,A=m;A<=g;A++)for(var L=h.getSizeAndPositionOfCell(A),N=i;N<=s;N++){var U=n.getSizeAndPositionOfCell(N),B=N>=x.start&&N<=x.stop&&A>=w.start&&A<=w.stop,k="".concat(A,"-").concat(N),H=void 0;I&&y[k]?H=y[k]:a&&!a.has(A,N)?H={height:"auto",left:0,position:"absolute",top:0,width:"auto"}:(H={height:L.size,left:U.offset+o,position:"absolute",top:L.offset+v,width:U.size},y[k]=H);var q={columnIndex:N,isScrolling:l,isVisible:B,key:k,parent:c,rowIndex:A,style:H},V=void 0;(u||l)&&!o&&!v?(e[k]||(e[k]=t(q)),V=e[k]):V=t(q),!(V==null||V===!1)&&E.push(V)}return E}const tbe=!!(typeof window<"u"&&window.document&&window.document.createElement);var Sy;function ME(r){if((!Sy&&Sy!==0||r)&&tbe){var e=document.createElement("div");e.style.position="absolute",e.style.top="-9999px",e.style.width="50px",e.style.height="50px",e.style.overflow="scroll",document.body.appendChild(e),Sy=e.offsetWidth-e.clientWidth,document.body.removeChild(e)}return Sy}var ta;typeof window<"u"?ta=window:typeof self<"u"?ta=self:ta={};var rbe=ta.requestAnimationFrame||ta.webkitRequestAnimationFrame||ta.mozRequestAnimationFrame||ta.oRequestAnimationFrame||ta.msRequestAnimationFrame||function(r){return ta.setTimeout(r,1e3/60)},nbe=ta.cancelAnimationFrame||ta.webkitCancelAnimationFrame||ta.mozCancelAnimationFrame||ta.oCancelAnimationFrame||ta.msCancelAnimationFrame||function(r){ta.clearTimeout(r)},P3=rbe,ibe=nbe,Vp=function(e){return ibe(e.id)},DA=function(e,t){var n;Promise.resolve().then(function(){n=Date.now()});var i=function a(){Date.now()-n>=t?e.call():s.id=P3(a)},s={id:P3(i)};return s},R3,L3;function O3(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function fh(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?O3(t,!0).forEach(function(n){Ye(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):O3(t).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}var sbe=150,LC={OBSERVED:"observed",REQUESTED:"requested"},abe=function(){return null},Sd=(L3=R3=(function(r){$a(e,r);function e(t){var n;Ni(this,e),n=yo(this,js(e).call(this,t)),Ye(He(n),"_onGridRenderedMemoizer",Hp()),Ye(He(n),"_onScrollMemoizer",Hp(!1)),Ye(He(n),"_deferredInvalidateColumnIndex",null),Ye(He(n),"_deferredInvalidateRowIndex",null),Ye(He(n),"_recomputeScrollLeftFlag",!1),Ye(He(n),"_recomputeScrollTopFlag",!1),Ye(He(n),"_horizontalScrollBarSize",0),Ye(He(n),"_verticalScrollBarSize",0),Ye(He(n),"_scrollbarPresenceChanged",!1),Ye(He(n),"_scrollingContainer",void 0),Ye(He(n),"_childrenToDisplay",void 0),Ye(He(n),"_columnStartIndex",void 0),Ye(He(n),"_columnStopIndex",void 0),Ye(He(n),"_rowStartIndex",void 0),Ye(He(n),"_rowStopIndex",void 0),Ye(He(n),"_renderedColumnStartIndex",0),Ye(He(n),"_renderedColumnStopIndex",0),Ye(He(n),"_renderedRowStartIndex",0),Ye(He(n),"_renderedRowStopIndex",0),Ye(He(n),"_initialScrollTop",void 0),Ye(He(n),"_initialScrollLeft",void 0),Ye(He(n),"_disablePointerEventsTimeoutId",void 0),Ye(He(n),"_styleCache",{}),Ye(He(n),"_cellCache",{}),Ye(He(n),"_debounceScrollEndedCallback",function(){n._disablePointerEventsTimeoutId=null,n.setState({isScrolling:!1,needToResetStyleCache:!1})}),Ye(He(n),"_invokeOnGridRenderedHelper",function(){var a=n.props.onSectionRendered;n._onGridRenderedMemoizer({callback:a,indices:{columnOverscanStartIndex:n._columnStartIndex,columnOverscanStopIndex:n._columnStopIndex,columnStartIndex:n._renderedColumnStartIndex,columnStopIndex:n._renderedColumnStopIndex,rowOverscanStartIndex:n._rowStartIndex,rowOverscanStopIndex:n._rowStopIndex,rowStartIndex:n._renderedRowStartIndex,rowStopIndex:n._renderedRowStopIndex}})}),Ye(He(n),"_setScrollingContainerRef",function(a){n._scrollingContainer=a}),Ye(He(n),"_onScroll",function(a){a.target===n._scrollingContainer&&n.handleScrollEvent(a.target)});var i=new D3({cellCount:t.columnCount,cellSizeGetter:function(o){return e._wrapSizeGetter(t.columnWidth)(o)},estimatedCellSize:e._getEstimatedColumnSize(t)}),s=new D3({cellCount:t.rowCount,cellSizeGetter:function(o){return e._wrapSizeGetter(t.rowHeight)(o)},estimatedCellSize:e._getEstimatedRowSize(t)});return n.state={instanceProps:{columnSizeAndPositionManager:i,rowSizeAndPositionManager:s,prevColumnWidth:t.columnWidth,prevRowHeight:t.rowHeight,prevColumnCount:t.columnCount,prevRowCount:t.rowCount,prevIsScrolling:t.isScrolling===!0,prevScrollToColumn:t.scrollToColumn,prevScrollToRow:t.scrollToRow,scrollbarSize:0,scrollbarSizeMeasured:!1},isScrolling:!1,scrollDirectionHorizontal:cc,scrollDirectionVertical:cc,scrollLeft:0,scrollTop:0,scrollPositionChangeReason:null,needToResetStyleCache:!1},t.scrollToRow>0&&(n._initialScrollTop=n._getCalculatedScrollTop(t,n.state)),t.scrollToColumn>0&&(n._initialScrollLeft=n._getCalculatedScrollLeft(t,n.state)),n}return ss(e,[{key:"getOffsetForCell",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=n.alignment,s=i===void 0?this.props.scrollToAlignment:i,a=n.columnIndex,o=a===void 0?this.props.scrollToColumn:a,l=n.rowIndex,u=l===void 0?this.props.scrollToRow:l,c=fh({},this.props,{scrollToAlignment:s,scrollToColumn:o,scrollToRow:u});return{scrollLeft:this._getCalculatedScrollLeft(c),scrollTop:this._getCalculatedScrollTop(c)}}},{key:"getTotalRowsHeight",value:function(){return this.state.instanceProps.rowSizeAndPositionManager.getTotalSize()}},{key:"getTotalColumnsWidth",value:function(){return this.state.instanceProps.columnSizeAndPositionManager.getTotalSize()}},{key:"handleScrollEvent",value:function(n){var i=n.scrollLeft,s=i===void 0?0:i,a=n.scrollTop,o=a===void 0?0:a;if(!(o<0)){this._debounceScrollEnded();var l=this.props,u=l.autoHeight,c=l.autoWidth,h=l.height,m=l.width,g=this.state.instanceProps,y=g.scrollbarSize,v=g.rowSizeAndPositionManager.getTotalSize(),x=g.columnSizeAndPositionManager.getTotalSize(),w=Math.min(Math.max(0,x-m+y),s),E=Math.min(Math.max(0,v-h+y),o);if(this.state.scrollLeft!==w||this.state.scrollTop!==E){var D=w!==this.state.scrollLeft?w>this.state.scrollLeft?cc:by:this.state.scrollDirectionHorizontal,I=E!==this.state.scrollTop?E>this.state.scrollTop?cc:by:this.state.scrollDirectionVertical,A={isScrolling:!0,scrollDirectionHorizontal:D,scrollDirectionVertical:I,scrollPositionChangeReason:LC.OBSERVED};u||(A.scrollTop=E),c||(A.scrollLeft=w),A.needToResetStyleCache=!1,this.setState(A)}this._invokeOnScrollMemoizer({scrollLeft:w,scrollTop:E,totalColumnsWidth:x,totalRowsHeight:v})}}},{key:"invalidateCellSizeAfterRender",value:function(n){var i=n.columnIndex,s=n.rowIndex;this._deferredInvalidateColumnIndex=typeof this._deferredInvalidateColumnIndex=="number"?Math.min(this._deferredInvalidateColumnIndex,i):i,this._deferredInvalidateRowIndex=typeof this._deferredInvalidateRowIndex=="number"?Math.min(this._deferredInvalidateRowIndex,s):s}},{key:"measureAllCells",value:function(){var n=this.props,i=n.columnCount,s=n.rowCount,a=this.state.instanceProps;a.columnSizeAndPositionManager.getSizeAndPositionOfCell(i-1),a.rowSizeAndPositionManager.getSizeAndPositionOfCell(s-1)}},{key:"recomputeGridSize",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=n.columnIndex,s=i===void 0?0:i,a=n.rowIndex,o=a===void 0?0:a,l=this.props,u=l.scrollToColumn,c=l.scrollToRow,h=this.state.instanceProps;h.columnSizeAndPositionManager.resetCell(s),h.rowSizeAndPositionManager.resetCell(o),this._recomputeScrollLeftFlag=u>=0&&(this.state.scrollDirectionHorizontal===cc?s<=u:s>=u),this._recomputeScrollTopFlag=c>=0&&(this.state.scrollDirectionVertical===cc?o<=c:o>=c),this._styleCache={},this._cellCache={},this.forceUpdate()}},{key:"scrollToCell",value:function(n){var i=n.columnIndex,s=n.rowIndex,a=this.props.columnCount,o=this.props;a>1&&i!==void 0&&this._updateScrollLeftForScrollToColumn(fh({},o,{scrollToColumn:i})),s!==void 0&&this._updateScrollTopForScrollToRow(fh({},o,{scrollToRow:s}))}},{key:"componentDidMount",value:function(){var n=this.props,i=n.getScrollbarSize,s=n.height,a=n.scrollLeft,o=n.scrollToColumn,l=n.scrollTop,u=n.scrollToRow,c=n.width,h=this.state.instanceProps;if(this._initialScrollTop=0,this._initialScrollLeft=0,this._handleInvalidatedGridSize(),h.scrollbarSizeMeasured||this.setState(function(y){var v=fh({},y,{needToResetStyleCache:!1});return v.instanceProps.scrollbarSize=i(),v.instanceProps.scrollbarSizeMeasured=!0,v}),typeof a=="number"&&a>=0||typeof l=="number"&&l>=0){var m=e._getScrollToPositionStateUpdate({prevState:this.state,scrollLeft:a,scrollTop:l});m&&(m.needToResetStyleCache=!1,this.setState(m))}this._scrollingContainer&&(this._scrollingContainer.scrollLeft!==this.state.scrollLeft&&(this._scrollingContainer.scrollLeft=this.state.scrollLeft),this._scrollingContainer.scrollTop!==this.state.scrollTop&&(this._scrollingContainer.scrollTop=this.state.scrollTop));var g=s>0&&c>0;o>=0&&g&&this._updateScrollLeftForScrollToColumn(),u>=0&&g&&this._updateScrollTopForScrollToRow(),this._invokeOnGridRenderedHelper(),this._invokeOnScrollMemoizer({scrollLeft:a||0,scrollTop:l||0,totalColumnsWidth:h.columnSizeAndPositionManager.getTotalSize(),totalRowsHeight:h.rowSizeAndPositionManager.getTotalSize()}),this._maybeCallOnScrollbarPresenceChange()}},{key:"componentDidUpdate",value:function(n,i){var s=this,a=this.props,o=a.autoHeight,l=a.autoWidth,u=a.columnCount,c=a.height,h=a.rowCount,m=a.scrollToAlignment,g=a.scrollToColumn,y=a.scrollToRow,v=a.width,x=this.state,w=x.scrollLeft,E=x.scrollPositionChangeReason,D=x.scrollTop,I=x.instanceProps;this._handleInvalidatedGridSize();var A=u>0&&n.columnCount===0||h>0&&n.rowCount===0;E===LC.REQUESTED&&(!l&&w>=0&&(w!==this._scrollingContainer.scrollLeft||A)&&(this._scrollingContainer.scrollLeft=w),!o&&D>=0&&(D!==this._scrollingContainer.scrollTop||A)&&(this._scrollingContainer.scrollTop=D));var L=(n.width===0||n.height===0)&&c>0&&v>0;if(this._recomputeScrollLeftFlag?(this._recomputeScrollLeftFlag=!1,this._updateScrollLeftForScrollToColumn(this.props)):I3({cellSizeAndPositionManager:I.columnSizeAndPositionManager,previousCellsCount:n.columnCount,previousCellSize:n.columnWidth,previousScrollToAlignment:n.scrollToAlignment,previousScrollToIndex:n.scrollToColumn,previousSize:n.width,scrollOffset:w,scrollToAlignment:m,scrollToIndex:g,size:v,sizeJustIncreasedFromZero:L,updateScrollIndexCallback:function(){return s._updateScrollLeftForScrollToColumn(s.props)}}),this._recomputeScrollTopFlag?(this._recomputeScrollTopFlag=!1,this._updateScrollTopForScrollToRow(this.props)):I3({cellSizeAndPositionManager:I.rowSizeAndPositionManager,previousCellsCount:n.rowCount,previousCellSize:n.rowHeight,previousScrollToAlignment:n.scrollToAlignment,previousScrollToIndex:n.scrollToRow,previousSize:n.height,scrollOffset:D,scrollToAlignment:m,scrollToIndex:y,size:c,sizeJustIncreasedFromZero:L,updateScrollIndexCallback:function(){return s._updateScrollTopForScrollToRow(s.props)}}),this._invokeOnGridRenderedHelper(),w!==i.scrollLeft||D!==i.scrollTop){var N=I.rowSizeAndPositionManager.getTotalSize(),U=I.columnSizeAndPositionManager.getTotalSize();this._invokeOnScrollMemoizer({scrollLeft:w,scrollTop:D,totalColumnsWidth:U,totalRowsHeight:N})}this._maybeCallOnScrollbarPresenceChange()}},{key:"componentWillUnmount",value:function(){this._disablePointerEventsTimeoutId&&Vp(this._disablePointerEventsTimeoutId)}},{key:"render",value:function(){var n=this.props,i=n.autoContainerWidth,s=n.autoHeight,a=n.autoWidth,o=n.className,l=n.containerProps,u=n.containerRole,c=n.containerStyle,h=n.height,m=n.id,g=n.noContentRenderer,y=n.role,v=n.style,x=n.tabIndex,w=n.width,E=this.state,D=E.instanceProps,I=E.needToResetStyleCache,A=this._isScrolling(),L={boxSizing:"border-box",direction:"ltr",height:s?"auto":h,position:"relative",width:a?"auto":w,WebkitOverflowScrolling:"touch",willChange:"transform"};I&&(this._styleCache={}),this.state.isScrolling||this._resetStyleCache(),this._calculateChildrenToRender(this.props,this.state);var N=D.columnSizeAndPositionManager.getTotalSize(),U=D.rowSizeAndPositionManager.getTotalSize(),B=U>h?D.scrollbarSize:0,k=N>w?D.scrollbarSize:0;(k!==this._horizontalScrollBarSize||B!==this._verticalScrollBarSize)&&(this._horizontalScrollBarSize=k,this._verticalScrollBarSize=B,this._scrollbarPresenceChanged=!0),L.overflowX=N+B<=w?"hidden":"auto",L.overflowY=U+k<=h?"hidden":"auto";var H=this._childrenToDisplay,q=H.length===0&&h>0&&w>0;return M.createElement("div",tr({ref:this._setScrollingContainerRef},l,{"aria-label":this.props["aria-label"],"aria-readonly":this.props["aria-readonly"],className:bl("ReactVirtualized__Grid",o),id:m,onScroll:this._onScroll,role:y,style:fh({},L,{},v),tabIndex:x}),H.length>0&&M.createElement("div",{className:"ReactVirtualized__Grid__innerScrollContainer",role:u,style:fh({width:i?"auto":N,height:U,maxWidth:N,maxHeight:U,overflow:"hidden",pointerEvents:A?"none":"",position:"relative"},c)},H),q&&g())}},{key:"_calculateChildrenToRender",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.props,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.state,s=n.cellRenderer,a=n.cellRangeRenderer,o=n.columnCount,l=n.deferredMeasurementCache,u=n.height,c=n.overscanColumnCount,h=n.overscanIndicesGetter,m=n.overscanRowCount,g=n.rowCount,y=n.width,v=n.isScrollingOptOut,x=i.scrollDirectionHorizontal,w=i.scrollDirectionVertical,E=i.instanceProps,D=this._initialScrollTop>0?this._initialScrollTop:i.scrollTop,I=this._initialScrollLeft>0?this._initialScrollLeft:i.scrollLeft,A=this._isScrolling(n,i);if(this._childrenToDisplay=[],u>0&&y>0){var L=E.columnSizeAndPositionManager.getVisibleCellRange({containerSize:y,offset:I}),N=E.rowSizeAndPositionManager.getVisibleCellRange({containerSize:u,offset:D}),U=E.columnSizeAndPositionManager.getOffsetAdjustment({containerSize:y,offset:I}),B=E.rowSizeAndPositionManager.getOffsetAdjustment({containerSize:u,offset:D});this._renderedColumnStartIndex=L.start,this._renderedColumnStopIndex=L.stop,this._renderedRowStartIndex=N.start,this._renderedRowStopIndex=N.stop;var k=h({direction:"horizontal",cellCount:o,overscanCellsCount:c,scrollDirection:x,startIndex:typeof L.start=="number"?L.start:0,stopIndex:typeof L.stop=="number"?L.stop:-1}),H=h({direction:"vertical",cellCount:g,overscanCellsCount:m,scrollDirection:w,startIndex:typeof N.start=="number"?N.start:0,stopIndex:typeof N.stop=="number"?N.stop:-1}),q=k.overscanStartIndex,V=k.overscanStopIndex,Q=H.overscanStartIndex,ie=H.overscanStopIndex;if(l){if(!l.hasFixedHeight()){for(var le=Q;le<=ie;le++)if(!l.has(le,0)){q=0,V=o-1;break}}if(!l.hasFixedWidth()){for(var he=q;he<=V;he++)if(!l.has(0,he)){Q=0,ie=g-1;break}}}this._childrenToDisplay=a({cellCache:this._cellCache,cellRenderer:s,columnSizeAndPositionManager:E.columnSizeAndPositionManager,columnStartIndex:q,columnStopIndex:V,deferredMeasurementCache:l,horizontalOffsetAdjustment:U,isScrolling:A,isScrollingOptOut:v,parent:this,rowSizeAndPositionManager:E.rowSizeAndPositionManager,rowStartIndex:Q,rowStopIndex:ie,scrollLeft:I,scrollTop:D,styleCache:this._styleCache,verticalOffsetAdjustment:B,visibleColumnIndices:L,visibleRowIndices:N}),this._columnStartIndex=q,this._columnStopIndex=V,this._rowStartIndex=Q,this._rowStopIndex=ie}}},{key:"_debounceScrollEnded",value:function(){var n=this.props.scrollingResetTimeInterval;this._disablePointerEventsTimeoutId&&Vp(this._disablePointerEventsTimeoutId),this._disablePointerEventsTimeoutId=DA(this._debounceScrollEndedCallback,n)}},{key:"_handleInvalidatedGridSize",value:function(){if(typeof this._deferredInvalidateColumnIndex=="number"&&typeof this._deferredInvalidateRowIndex=="number"){var n=this._deferredInvalidateColumnIndex,i=this._deferredInvalidateRowIndex;this._deferredInvalidateColumnIndex=null,this._deferredInvalidateRowIndex=null,this.recomputeGridSize({columnIndex:n,rowIndex:i})}}},{key:"_invokeOnScrollMemoizer",value:function(n){var i=this,s=n.scrollLeft,a=n.scrollTop,o=n.totalColumnsWidth,l=n.totalRowsHeight;this._onScrollMemoizer({callback:function(c){var h=c.scrollLeft,m=c.scrollTop,g=i.props,y=g.height,v=g.onScroll,x=g.width;v({clientHeight:y,clientWidth:x,scrollHeight:l,scrollLeft:h,scrollTop:m,scrollWidth:o})},indices:{scrollLeft:s,scrollTop:a}})}},{key:"_isScrolling",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.props,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.state;return Object.hasOwnProperty.call(n,"isScrolling")?!!n.isScrolling:!!i.isScrolling}},{key:"_maybeCallOnScrollbarPresenceChange",value:function(){if(this._scrollbarPresenceChanged){var n=this.props.onScrollbarPresenceChange;this._scrollbarPresenceChanged=!1,n({horizontal:this._horizontalScrollBarSize>0,size:this.state.instanceProps.scrollbarSize,vertical:this._verticalScrollBarSize>0})}}},{key:"scrollToPosition",value:function(n){var i=n.scrollLeft,s=n.scrollTop,a=e._getScrollToPositionStateUpdate({prevState:this.state,scrollLeft:i,scrollTop:s});a&&(a.needToResetStyleCache=!1,this.setState(a))}},{key:"_getCalculatedScrollLeft",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.props,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.state;return e._getCalculatedScrollLeft(n,i)}},{key:"_updateScrollLeftForScrollToColumn",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.props,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.state,s=e._getScrollLeftForScrollToColumnStateUpdate(n,i);s&&(s.needToResetStyleCache=!1,this.setState(s))}},{key:"_getCalculatedScrollTop",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.props,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.state;return e._getCalculatedScrollTop(n,i)}},{key:"_resetStyleCache",value:function(){var n=this._styleCache,i=this._cellCache,s=this.props.isScrollingOptOut;this._cellCache={},this._styleCache={};for(var a=this._rowStartIndex;a<=this._rowStopIndex;a++)for(var o=this._columnStartIndex;o<=this._columnStopIndex;o++){var l="".concat(a,"-").concat(o);this._styleCache[l]=n[l],s&&(this._cellCache[l]=i[l])}}},{key:"_updateScrollTopForScrollToRow",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.props,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.state,s=e._getScrollTopForScrollToRowStateUpdate(n,i);s&&(s.needToResetStyleCache=!1,this.setState(s))}}],[{key:"getDerivedStateFromProps",value:function(n,i){var s={};n.columnCount===0&&i.scrollLeft!==0||n.rowCount===0&&i.scrollTop!==0?(s.scrollLeft=0,s.scrollTop=0):(n.scrollLeft!==i.scrollLeft&&n.scrollToColumn<0||n.scrollTop!==i.scrollTop&&n.scrollToRow<0)&&Object.assign(s,e._getScrollToPositionStateUpdate({prevState:i,scrollLeft:n.scrollLeft,scrollTop:n.scrollTop}));var a=i.instanceProps;s.needToResetStyleCache=!1,(n.columnWidth!==a.prevColumnWidth||n.rowHeight!==a.prevRowHeight)&&(s.needToResetStyleCache=!0),a.columnSizeAndPositionManager.configure({cellCount:n.columnCount,estimatedCellSize:e._getEstimatedColumnSize(n),cellSizeGetter:e._wrapSizeGetter(n.columnWidth)}),a.rowSizeAndPositionManager.configure({cellCount:n.rowCount,estimatedCellSize:e._getEstimatedRowSize(n),cellSizeGetter:e._wrapSizeGetter(n.rowHeight)}),(a.prevColumnCount===0||a.prevRowCount===0)&&(a.prevColumnCount=0,a.prevRowCount=0),n.autoHeight&&n.isScrolling===!1&&a.prevIsScrolling===!0&&Object.assign(s,{isScrolling:!1});var o,l;return A3({cellCount:a.prevColumnCount,cellSize:typeof a.prevColumnWidth=="number"?a.prevColumnWidth:null,computeMetadataCallback:function(){return a.columnSizeAndPositionManager.resetCell(0)},computeMetadataCallbackProps:n,nextCellsCount:n.columnCount,nextCellSize:typeof n.columnWidth=="number"?n.columnWidth:null,nextScrollToIndex:n.scrollToColumn,scrollToIndex:a.prevScrollToColumn,updateScrollOffsetForScrollToIndex:function(){o=e._getScrollLeftForScrollToColumnStateUpdate(n,i)}}),A3({cellCount:a.prevRowCount,cellSize:typeof a.prevRowHeight=="number"?a.prevRowHeight:null,computeMetadataCallback:function(){return a.rowSizeAndPositionManager.resetCell(0)},computeMetadataCallbackProps:n,nextCellsCount:n.rowCount,nextCellSize:typeof n.rowHeight=="number"?n.rowHeight:null,nextScrollToIndex:n.scrollToRow,scrollToIndex:a.prevScrollToRow,updateScrollOffsetForScrollToIndex:function(){l=e._getScrollTopForScrollToRowStateUpdate(n,i)}}),a.prevColumnCount=n.columnCount,a.prevColumnWidth=n.columnWidth,a.prevIsScrolling=n.isScrolling===!0,a.prevRowCount=n.rowCount,a.prevRowHeight=n.rowHeight,a.prevScrollToColumn=n.scrollToColumn,a.prevScrollToRow=n.scrollToRow,a.scrollbarSize=n.getScrollbarSize(),a.scrollbarSize===void 0?(a.scrollbarSizeMeasured=!1,a.scrollbarSize=0):a.scrollbarSizeMeasured=!0,s.instanceProps=a,fh({},s,{},o,{},l)}},{key:"_getEstimatedColumnSize",value:function(n){return typeof n.columnWidth=="number"?n.columnWidth:n.estimatedColumnSize}},{key:"_getEstimatedRowSize",value:function(n){return typeof n.rowHeight=="number"?n.rowHeight:n.estimatedRowSize}},{key:"_getScrollToPositionStateUpdate",value:function(n){var i=n.prevState,s=n.scrollLeft,a=n.scrollTop,o={scrollPositionChangeReason:LC.REQUESTED};return typeof s=="number"&&s>=0&&(o.scrollDirectionHorizontal=s>i.scrollLeft?cc:by,o.scrollLeft=s),typeof a=="number"&&a>=0&&(o.scrollDirectionVertical=a>i.scrollTop?cc:by,o.scrollTop=a),typeof s=="number"&&s>=0&&s!==i.scrollLeft||typeof a=="number"&&a>=0&&a!==i.scrollTop?o:{}}},{key:"_wrapSizeGetter",value:function(n){return typeof n=="function"?n:function(){return n}}},{key:"_getCalculatedScrollLeft",value:function(n,i){var s=n.columnCount,a=n.height,o=n.scrollToAlignment,l=n.scrollToColumn,u=n.width,c=i.scrollLeft,h=i.instanceProps;if(s>0){var m=s-1,g=l<0?m:Math.min(m,l),y=h.rowSizeAndPositionManager.getTotalSize(),v=h.scrollbarSizeMeasured&&y>a?h.scrollbarSize:0;return h.columnSizeAndPositionManager.getUpdatedOffsetForIndex({align:o,containerSize:u-v,currentOffset:c,targetIndex:g})}return 0}},{key:"_getScrollLeftForScrollToColumnStateUpdate",value:function(n,i){var s=i.scrollLeft,a=e._getCalculatedScrollLeft(n,i);return typeof a=="number"&&a>=0&&s!==a?e._getScrollToPositionStateUpdate({prevState:i,scrollLeft:a,scrollTop:-1}):{}}},{key:"_getCalculatedScrollTop",value:function(n,i){var s=n.height,a=n.rowCount,o=n.scrollToAlignment,l=n.scrollToRow,u=n.width,c=i.scrollTop,h=i.instanceProps;if(a>0){var m=a-1,g=l<0?m:Math.min(m,l),y=h.columnSizeAndPositionManager.getTotalSize(),v=h.scrollbarSizeMeasured&&y>u?h.scrollbarSize:0;return h.rowSizeAndPositionManager.getUpdatedOffsetForIndex({align:o,containerSize:s-v,currentOffset:c,targetIndex:g})}return 0}},{key:"_getScrollTopForScrollToRowStateUpdate",value:function(n,i){var s=i.scrollTop,a=e._getCalculatedScrollTop(n,i);return typeof a=="number"&&a>=0&&s!==a?e._getScrollToPositionStateUpdate({prevState:i,scrollLeft:-1,scrollTop:a}):{}}}]),e})(M.PureComponent),Ye(R3,"propTypes",null),L3);Ye(Sd,"defaultProps",{"aria-label":"grid","aria-readonly":!0,autoContainerWidth:!1,autoHeight:!1,autoWidth:!1,cellRangeRenderer:ebe,containerRole:"rowgroup",containerStyle:{},estimatedColumnSize:100,estimatedRowSize:30,getScrollbarSize:ME,noContentRenderer:abe,onScroll:function(){},onScrollbarPresenceChange:function(){},onSectionRendered:function(){},overscanColumnCount:0,overscanIndicesGetter:Zxe,overscanRowCount:10,role:"grid",scrollingResetTimeInterval:sbe,scrollToAlignment:"auto",scrollToColumn:-1,scrollToRow:-1,style:{},tabIndex:0,isScrollingOptOut:!1});Qg(Sd);var obe=1;function j7(r){var e=r.cellCount,t=r.overscanCellsCount,n=r.scrollDirection,i=r.startIndex,s=r.stopIndex;return t=Math.max(1,t),n===obe?{overscanStartIndex:Math.max(0,i-1),overscanStopIndex:Math.min(e-1,s+t)}:{overscanStartIndex:Math.max(0,i-t),overscanStopIndex:Math.min(e-1,s+1)}}var M3,F3;function B3(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function lbe(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?B3(t,!0).forEach(function(n){Ye(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):B3(t).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}var z7=(F3=M3=(function(r){$a(e,r);function e(){var t,n;Ni(this,e);for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return n=yo(this,(t=js(e)).call.apply(t,[this].concat(s))),Ye(He(n),"state",{scrollToColumn:0,scrollToRow:0,instanceProps:{prevScrollToColumn:0,prevScrollToRow:0}}),Ye(He(n),"_columnStartIndex",0),Ye(He(n),"_columnStopIndex",0),Ye(He(n),"_rowStartIndex",0),Ye(He(n),"_rowStopIndex",0),Ye(He(n),"_onKeyDown",function(o){var l=n.props,u=l.columnCount,c=l.disabled,h=l.mode,m=l.rowCount;if(!c){var g=n._getScrollState(),y=g.scrollToColumn,v=g.scrollToRow,x=n._getScrollState(),w=x.scrollToColumn,E=x.scrollToRow;switch(o.key){case"ArrowDown":E=Math.min(h==="cells"?E+1:n._rowStopIndex+1,m-1);break;case"ArrowLeft":w=Math.max(h==="cells"?w-1:n._columnStartIndex-1,0);break;case"ArrowRight":w=Math.min(h==="cells"?w+1:n._columnStopIndex+1,u-1);break;case"ArrowUp":E=Math.max(h==="cells"?E-1:n._rowStartIndex-1,0);break}(w!==y||E!==v)&&(o.preventDefault(),n._updateScrollState({scrollToColumn:w,scrollToRow:E}))}}),Ye(He(n),"_onSectionRendered",function(o){var l=o.columnStartIndex,u=o.columnStopIndex,c=o.rowStartIndex,h=o.rowStopIndex;n._columnStartIndex=l,n._columnStopIndex=u,n._rowStartIndex=c,n._rowStopIndex=h}),n}return ss(e,[{key:"setScrollIndexes",value:function(n){var i=n.scrollToColumn,s=n.scrollToRow;this.setState({scrollToRow:s,scrollToColumn:i})}},{key:"render",value:function(){var n=this.props,i=n.className,s=n.children,a=this._getScrollState(),o=a.scrollToColumn,l=a.scrollToRow;return M.createElement("div",{className:i,onKeyDown:this._onKeyDown},s({onSectionRendered:this._onSectionRendered,scrollToColumn:o,scrollToRow:l}))}},{key:"_getScrollState",value:function(){return this.props.isControlled?this.props:this.state}},{key:"_updateScrollState",value:function(n){var i=n.scrollToColumn,s=n.scrollToRow,a=this.props,o=a.isControlled,l=a.onScrollToChange;typeof l=="function"&&l({scrollToColumn:i,scrollToRow:s}),o||this.setState({scrollToColumn:i,scrollToRow:s})}}],[{key:"getDerivedStateFromProps",value:function(n,i){return n.isControlled?{}:n.scrollToColumn!==i.instanceProps.prevScrollToColumn||n.scrollToRow!==i.instanceProps.prevScrollToRow?lbe({},i,{scrollToColumn:n.scrollToColumn,scrollToRow:n.scrollToRow,instanceProps:{prevScrollToColumn:n.scrollToColumn,prevScrollToRow:n.scrollToRow}}):{}}}]),e})(M.PureComponent),Ye(M3,"propTypes",null),F3);Ye(z7,"defaultProps",{disabled:!1,isControlled:!1,mode:"edges",scrollToColumn:0,scrollToRow:0});Qg(z7);function H7(r,e){var t;typeof e<"u"?t=e:typeof window<"u"?t=window:typeof self<"u"?t=self:t=global;var n=typeof t.document<"u"&&t.document.attachEvent;if(!n){var i=(function(){var N=t.requestAnimationFrame||t.mozRequestAnimationFrame||t.webkitRequestAnimationFrame||function(U){return t.setTimeout(U,20)};return function(U){return N(U)}})(),s=(function(){var N=t.cancelAnimationFrame||t.mozCancelAnimationFrame||t.webkitCancelAnimationFrame||t.clearTimeout;return function(U){return N(U)}})(),a=function(U){var B=U.__resizeTriggers__,k=B.firstElementChild,H=B.lastElementChild,q=k.firstElementChild;H.scrollLeft=H.scrollWidth,H.scrollTop=H.scrollHeight,q.style.width=k.offsetWidth+1+"px",q.style.height=k.offsetHeight+1+"px",k.scrollLeft=k.scrollWidth,k.scrollTop=k.scrollHeight},o=function(U){return U.offsetWidth!=U.__resizeLast__.width||U.offsetHeight!=U.__resizeLast__.height},l=function(U){if(!(U.target.className&&typeof U.target.className.indexOf=="function"&&U.target.className.indexOf("contract-trigger")<0&&U.target.className.indexOf("expand-trigger")<0)){var B=this;a(this),this.__resizeRAF__&&s(this.__resizeRAF__),this.__resizeRAF__=i(function(){o(B)&&(B.__resizeLast__.width=B.offsetWidth,B.__resizeLast__.height=B.offsetHeight,B.__resizeListeners__.forEach(function(k){k.call(B,U)}))})}},u=!1,c="",h="animationstart",m="Webkit Moz O ms".split(" "),g="webkitAnimationStart animationstart oAnimationStart MSAnimationStart".split(" "),y="";{var v=t.document.createElement("fakeelement");if(v.style.animationName!==void 0&&(u=!0),u===!1){for(var x=0;x<m.length;x++)if(v.style[m[x]+"AnimationName"]!==void 0){y=m[x],c="-"+y.toLowerCase()+"-",h=g[x],u=!0;break}}}var w="resizeanim",E="@"+c+"keyframes "+w+" { from { opacity: 0; } to { opacity: 0; } } ",D=c+"animation: 1ms "+w+"; "}var I=function(U){if(!U.getElementById("detectElementResize")){var B=(E||"")+".resize-triggers { "+(D||"")+'visibility: hidden; opacity: 0; } .resize-triggers, .resize-triggers > div, .contract-trigger:before { content: " "; display: block; position: absolute; top: 0; left: 0; height: 100%; width: 100%; overflow: hidden; z-index: -1; } .resize-triggers > div { background: #eee; overflow: auto; } .contract-trigger:before { width: 200%; height: 200%; }',k=U.head||U.getElementsByTagName("head")[0],H=U.createElement("style");H.id="detectElementResize",H.type="text/css",r!=null&&H.setAttribute("nonce",r),H.styleSheet?H.styleSheet.cssText=B:H.appendChild(U.createTextNode(B)),k.appendChild(H)}},A=function(U,B){if(n)U.attachEvent("onresize",B);else{if(!U.__resizeTriggers__){var k=U.ownerDocument,H=t.getComputedStyle(U);H&&H.position=="static"&&(U.style.position="relative"),I(k),U.__resizeLast__={},U.__resizeListeners__=[],(U.__resizeTriggers__=k.createElement("div")).className="resize-triggers";var q='<div class="expand-trigger"><div></div></div><div class="contract-trigger"></div>';if(window.trustedTypes){var V=trustedTypes.createPolicy("react-virtualized-auto-sizer",{createHTML:function(){return q}});U.__resizeTriggers__.innerHTML=V.createHTML("")}else U.__resizeTriggers__.innerHTML=q;U.appendChild(U.__resizeTriggers__),a(U),U.addEventListener("scroll",l,!0),h&&(U.__resizeTriggers__.__animationListener__=function(ie){ie.animationName==w&&a(U)},U.__resizeTriggers__.addEventListener(h,U.__resizeTriggers__.__animationListener__))}U.__resizeListeners__.push(B)}},L=function(U,B){if(n)U.detachEvent("onresize",B);else if(U.__resizeListeners__.splice(U.__resizeListeners__.indexOf(B),1),!U.__resizeListeners__.length){U.removeEventListener("scroll",l,!0),U.__resizeTriggers__.__animationListener__&&(U.__resizeTriggers__.removeEventListener(h,U.__resizeTriggers__.__animationListener__),U.__resizeTriggers__.__animationListener__=null);try{U.__resizeTriggers__=!U.removeChild(U.__resizeTriggers__)}catch{}}};return{addResizeListener:A,removeResizeListener:L}}var N3,U3;function $3(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function ube(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?$3(t,!0).forEach(function(n){Ye(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):$3(t).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}var V7=(U3=N3=(function(r){$a(e,r);function e(){var t,n;Ni(this,e);for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return n=yo(this,(t=js(e)).call.apply(t,[this].concat(s))),Ye(He(n),"state",{height:n.props.defaultHeight||0,width:n.props.defaultWidth||0}),Ye(He(n),"_parentNode",void 0),Ye(He(n),"_autoSizer",void 0),Ye(He(n),"_window",void 0),Ye(He(n),"_detectElementResize",void 0),Ye(He(n),"_onResize",function(){var o=n.props,l=o.disableHeight,u=o.disableWidth,c=o.onResize;if(n._parentNode){var h=n._parentNode.offsetHeight||0,m=n._parentNode.offsetWidth||0,g=n._window||window,y=g.getComputedStyle(n._parentNode)||{},v=parseInt(y.paddingLeft,10)||0,x=parseInt(y.paddingRight,10)||0,w=parseInt(y.paddingTop,10)||0,E=parseInt(y.paddingBottom,10)||0,D=h-w-E,I=m-v-x;(!l&&n.state.height!==D||!u&&n.state.width!==I)&&(n.setState({height:h-w-E,width:m-v-x}),c({height:h,width:m}))}}),Ye(He(n),"_setRef",function(o){n._autoSizer=o}),n}return ss(e,[{key:"componentDidMount",value:function(){var n=this.props.nonce;this._autoSizer&&this._autoSizer.parentNode&&this._autoSizer.parentNode.ownerDocument&&this._autoSizer.parentNode.ownerDocument.defaultView&&this._autoSizer.parentNode instanceof this._autoSizer.parentNode.ownerDocument.defaultView.HTMLElement&&(this._parentNode=this._autoSizer.parentNode,this._window=this._autoSizer.parentNode.ownerDocument.defaultView,this._detectElementResize=H7(n,this._window),this._detectElementResize.addResizeListener(this._parentNode,this._onResize),this._onResize())}},{key:"componentWillUnmount",value:function(){this._detectElementResize&&this._parentNode&&this._detectElementResize.removeResizeListener(this._parentNode,this._onResize)}},{key:"render",value:function(){var n=this.props,i=n.children,s=n.className,a=n.disableHeight,o=n.disableWidth,l=n.style,u=this.state,c=u.height,h=u.width,m={overflow:"visible"},g={};return a||(m.height=0,g.height=c),o||(m.width=0,g.width=h),M.createElement("div",{className:s,ref:this._setRef,style:ube({},m,{},l)},i(g))}}]),e})(M.Component),Ye(N3,"propTypes",null),U3);Ye(V7,"defaultProps",{onResize:function(){},disableHeight:!1,disableWidth:!1,style:{}});var j3,z3,cbe=(z3=j3=(function(r){$a(e,r);function e(){var t,n;Ni(this,e);for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return n=yo(this,(t=js(e)).call.apply(t,[this].concat(s))),Ye(He(n),"_child",void 0),Ye(He(n),"_measure",function(){var o=n.props,l=o.cache,u=o.columnIndex,c=u===void 0?0:u,h=o.parent,m=o.rowIndex,g=m===void 0?n.props.index||0:m,y=n._getCellMeasurements(),v=y.height,x=y.width;(v!==l.getHeight(g,c)||x!==l.getWidth(g,c))&&(l.set(g,c,x,v),h&&typeof h.recomputeGridSize=="function"&&h.recomputeGridSize({columnIndex:c,rowIndex:g}))}),Ye(He(n),"_registerChild",function(o){o&&!(o instanceof Element)&&console.warn("CellMeasurer registerChild expects to be passed Element or null"),n._child=o,o&&n._maybeMeasureCell()}),n}return ss(e,[{key:"componentDidMount",value:function(){this._maybeMeasureCell()}},{key:"componentDidUpdate",value:function(){this._maybeMeasureCell()}},{key:"render",value:function(){var n=this.props.children;return typeof n=="function"?n({measure:this._measure,registerChild:this._registerChild}):n}},{key:"_getCellMeasurements",value:function(){var n=this.props.cache,i=this._child||Ho.findDOMNode(this);if(i&&i.ownerDocument&&i.ownerDocument.defaultView&&i instanceof i.ownerDocument.defaultView.HTMLElement){var s=i.style.width,a=i.style.height;n.hasFixedWidth()||(i.style.width="auto"),n.hasFixedHeight()||(i.style.height="auto");var o=Math.ceil(i.offsetHeight),l=Math.ceil(i.offsetWidth);return s&&(i.style.width=s),a&&(i.style.height=a),{height:o,width:l}}else return{height:0,width:0}}},{key:"_maybeMeasureCell",value:function(){var n=this.props,i=n.cache,s=n.columnIndex,a=s===void 0?0:s,o=n.parent,l=n.rowIndex,u=l===void 0?this.props.index||0:l;if(!i.has(u,a)){var c=this._getCellMeasurements(),h=c.height,m=c.width;i.set(u,a,m,h),o&&typeof o.invalidateCellSizeAfterRender=="function"&&o.invalidateCellSizeAfterRender({columnIndex:a,rowIndex:u})}}}]),e})(M.PureComponent),Ye(j3,"propTypes",null),z3);Ye(cbe,"__internalCellMeasurerFlag",!1);function H3(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function dbe(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?H3(t,!0).forEach(function(n){Ye(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):H3(t).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}var hbe=150,Ff={OBSERVED:"observed",REQUESTED:"requested"},kS=(function(r){$a(e,r);function e(){var t,n;Ni(this,e);for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return n=yo(this,(t=js(e)).call.apply(t,[this].concat(s))),Ye(He(n),"state",{isScrolling:!1,scrollLeft:0,scrollTop:0}),Ye(He(n),"_calculateSizeAndPositionDataOnNextUpdate",!1),Ye(He(n),"_onSectionRenderedMemoizer",Hp()),Ye(He(n),"_onScrollMemoizer",Hp(!1)),Ye(He(n),"_invokeOnSectionRenderedHelper",function(){var o=n.props,l=o.cellLayoutManager,u=o.onSectionRendered;n._onSectionRenderedMemoizer({callback:u,indices:{indices:l.getLastRenderedIndices()}})}),Ye(He(n),"_setScrollingContainerRef",function(o){n._scrollingContainer=o}),Ye(He(n),"_updateScrollPositionForScrollToCell",function(){var o=n.props,l=o.cellLayoutManager,u=o.height,c=o.scrollToAlignment,h=o.scrollToCell,m=o.width,g=n.state,y=g.scrollLeft,v=g.scrollTop;if(h>=0){var x=l.getScrollPositionForCell({align:c,cellIndex:h,height:u,scrollLeft:y,scrollTop:v,width:m});(x.scrollLeft!==y||x.scrollTop!==v)&&n._setScrollPosition(x)}}),Ye(He(n),"_onScroll",function(o){if(o.target===n._scrollingContainer){n._enablePointerEventsAfterDelay();var l=n.props,u=l.cellLayoutManager,c=l.height,h=l.isScrollingChange,m=l.width,g=n._scrollbarSize,y=u.getTotalSize(),v=y.height,x=y.width,w=Math.max(0,Math.min(x-m+g,o.target.scrollLeft)),E=Math.max(0,Math.min(v-c+g,o.target.scrollTop));if(n.state.scrollLeft!==w||n.state.scrollTop!==E){var D=o.cancelable?Ff.OBSERVED:Ff.REQUESTED;n.state.isScrolling||h(!0),n.setState({isScrolling:!0,scrollLeft:w,scrollPositionChangeReason:D,scrollTop:E})}n._invokeOnScrollMemoizer({scrollLeft:w,scrollTop:E,totalWidth:x,totalHeight:v})}}),n._scrollbarSize=ME(),n._scrollbarSize===void 0?(n._scrollbarSizeMeasured=!1,n._scrollbarSize=0):n._scrollbarSizeMeasured=!0,n}return ss(e,[{key:"recomputeCellSizesAndPositions",value:function(){this._calculateSizeAndPositionDataOnNextUpdate=!0,this.forceUpdate()}},{key:"componentDidMount",value:function(){var n=this.props,i=n.cellLayoutManager,s=n.scrollLeft,a=n.scrollToCell,o=n.scrollTop;this._scrollbarSizeMeasured||(this._scrollbarSize=ME(),this._scrollbarSizeMeasured=!0,this.setState({})),a>=0?this._updateScrollPositionForScrollToCell():(s>=0||o>=0)&&this._setScrollPosition({scrollLeft:s,scrollTop:o}),this._invokeOnSectionRenderedHelper();var l=i.getTotalSize(),u=l.height,c=l.width;this._invokeOnScrollMemoizer({scrollLeft:s||0,scrollTop:o||0,totalHeight:u,totalWidth:c})}},{key:"componentDidUpdate",value:function(n,i){var s=this.props,a=s.height,o=s.scrollToAlignment,l=s.scrollToCell,u=s.width,c=this.state,h=c.scrollLeft,m=c.scrollPositionChangeReason,g=c.scrollTop;m===Ff.REQUESTED&&(h>=0&&h!==i.scrollLeft&&h!==this._scrollingContainer.scrollLeft&&(this._scrollingContainer.scrollLeft=h),g>=0&&g!==i.scrollTop&&g!==this._scrollingContainer.scrollTop&&(this._scrollingContainer.scrollTop=g)),(a!==n.height||o!==n.scrollToAlignment||l!==n.scrollToCell||u!==n.width)&&this._updateScrollPositionForScrollToCell(),this._invokeOnSectionRenderedHelper()}},{key:"componentWillUnmount",value:function(){this._disablePointerEventsTimeoutId&&clearTimeout(this._disablePointerEventsTimeoutId)}},{key:"render",value:function(){var n=this.props,i=n.autoHeight,s=n.cellCount,a=n.cellLayoutManager,o=n.className,l=n.height,u=n.horizontalOverscanSize,c=n.id,h=n.noContentRenderer,m=n.style,g=n.verticalOverscanSize,y=n.width,v=this.state,x=v.isScrolling,w=v.scrollLeft,E=v.scrollTop;(this._lastRenderedCellCount!==s||this._lastRenderedCellLayoutManager!==a||this._calculateSizeAndPositionDataOnNextUpdate)&&(this._lastRenderedCellCount=s,this._lastRenderedCellLayoutManager=a,this._calculateSizeAndPositionDataOnNextUpdate=!1,a.calculateSizeAndPositionData());var D=a.getTotalSize(),I=D.height,A=D.width,L=Math.max(0,w-u),N=Math.max(0,E-g),U=Math.min(A,w+y+u),B=Math.min(I,E+l+g),k=l>0&&y>0?a.cellRenderers({height:B-N,isScrolling:x,width:U-L,x:L,y:N}):[],H={boxSizing:"border-box",direction:"ltr",height:i?"auto":l,position:"relative",WebkitOverflowScrolling:"touch",width:y,willChange:"transform"},q=I>l?this._scrollbarSize:0,V=A>y?this._scrollbarSize:0;return H.overflowX=A+q<=y?"hidden":"auto",H.overflowY=I+V<=l?"hidden":"auto",M.createElement("div",{ref:this._setScrollingContainerRef,"aria-label":this.props["aria-label"],className:bl("ReactVirtualized__Collection",o),id:c,onScroll:this._onScroll,role:"grid",style:dbe({},H,{},m),tabIndex:0},s>0&&M.createElement("div",{className:"ReactVirtualized__Collection__innerScrollContainer",style:{height:I,maxHeight:I,maxWidth:A,overflow:"hidden",pointerEvents:x?"none":"",width:A}},k),s===0&&h())}},{key:"_enablePointerEventsAfterDelay",value:function(){var n=this;this._disablePointerEventsTimeoutId&&clearTimeout(this._disablePointerEventsTimeoutId),this._disablePointerEventsTimeoutId=setTimeout(function(){var i=n.props.isScrollingChange;i(!1),n._disablePointerEventsTimeoutId=null,n.setState({isScrolling:!1})},hbe)}},{key:"_invokeOnScrollMemoizer",value:function(n){var i=this,s=n.scrollLeft,a=n.scrollTop,o=n.totalHeight,l=n.totalWidth;this._onScrollMemoizer({callback:function(c){var h=c.scrollLeft,m=c.scrollTop,g=i.props,y=g.height,v=g.onScroll,x=g.width;v({clientHeight:y,clientWidth:x,scrollHeight:o,scrollLeft:h,scrollTop:m,scrollWidth:l})},indices:{scrollLeft:s,scrollTop:a}})}},{key:"_setScrollPosition",value:function(n){var i=n.scrollLeft,s=n.scrollTop,a={scrollPositionChangeReason:Ff.REQUESTED};i>=0&&(a.scrollLeft=i),s>=0&&(a.scrollTop=s),(i>=0&&i!==this.state.scrollLeft||s>=0&&s!==this.state.scrollTop)&&this.setState(a)}}],[{key:"getDerivedStateFromProps",value:function(n,i){return n.cellCount===0&&(i.scrollLeft!==0||i.scrollTop!==0)?{scrollLeft:0,scrollTop:0,scrollPositionChangeReason:Ff.REQUESTED}:n.scrollLeft!==i.scrollLeft||n.scrollTop!==i.scrollTop?{scrollLeft:n.scrollLeft!=null?n.scrollLeft:i.scrollLeft,scrollTop:n.scrollTop!=null?n.scrollTop:i.scrollTop,scrollPositionChangeReason:Ff.REQUESTED}:null}}]),e})(M.PureComponent);Ye(kS,"defaultProps",{"aria-label":"grid",horizontalOverscanSize:0,noContentRenderer:function(){return null},onScroll:function(){return null},onSectionRendered:function(){return null},scrollToAlignment:"auto",scrollToCell:-1,style:{},verticalOverscanSize:0});kS.propTypes={};Qg(kS);var fbe=(function(){function r(e){var t=e.height,n=e.width,i=e.x,s=e.y;Ni(this,r),this.height=t,this.width=n,this.x=i,this.y=s,this._indexMap={},this._indices=[]}return ss(r,[{key:"addCellIndex",value:function(t){var n=t.index;this._indexMap[n]||(this._indexMap[n]=!0,this._indices.push(n))}},{key:"getCellIndices",value:function(){return this._indices}},{key:"toString",value:function(){return"".concat(this.x,",").concat(this.y," ").concat(this.width,"x").concat(this.height)}}]),r})(),pbe=100,mbe=(function(){function r(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:pbe;Ni(this,r),this._sectionSize=e,this._cellMetadata=[],this._sections={}}return ss(r,[{key:"getCellIndices",value:function(t){var n=t.height,i=t.width,s=t.x,a=t.y,o={};return this.getSections({height:n,width:i,x:s,y:a}).forEach(function(l){return l.getCellIndices().forEach(function(u){o[u]=u})}),Object.keys(o).map(function(l){return o[l]})}},{key:"getCellMetadata",value:function(t){var n=t.index;return this._cellMetadata[n]}},{key:"getSections",value:function(t){for(var n=t.height,i=t.width,s=t.x,a=t.y,o=Math.floor(s/this._sectionSize),l=Math.floor((s+i-1)/this._sectionSize),u=Math.floor(a/this._sectionSize),c=Math.floor((a+n-1)/this._sectionSize),h=[],m=o;m<=l;m++)for(var g=u;g<=c;g++){var y="".concat(m,".").concat(g);this._sections[y]||(this._sections[y]=new fbe({height:this._sectionSize,width:this._sectionSize,x:m*this._sectionSize,y:g*this._sectionSize})),h.push(this._sections[y])}return h}},{key:"getTotalSectionCount",value:function(){return Object.keys(this._sections).length}},{key:"toString",value:function(){var t=this;return Object.keys(this._sections).map(function(n){return t._sections[n].toString()})}},{key:"registerCell",value:function(t){var n=t.cellMetadatum,i=t.index;this._cellMetadata[i]=n,this.getSections(n).forEach(function(s){return s.addCellIndex({index:i})})}}]),r})();function gbe(r){for(var e=r.cellCount,t=r.cellSizeAndPositionGetter,n=r.sectionSize,i=[],s=new mbe(n),a=0,o=0,l=0;l<e;l++){var u=t({index:l});if(u.height==null||isNaN(u.height)||u.width==null||isNaN(u.width)||u.x==null||isNaN(u.x)||u.y==null||isNaN(u.y))throw Error("Invalid metadata returned for cell ".concat(l,`:
        x:`).concat(u.x,", y:").concat(u.y,", width:").concat(u.width,", height:").concat(u.height));a=Math.max(a,u.y+u.height),o=Math.max(o,u.x+u.width),i[l]=u,s.registerCell({cellMetadatum:u,index:l})}return{cellMetadata:i,height:a,sectionManager:s,width:o}}function V3(r){var e=r.align,t=e===void 0?"auto":e,n=r.cellOffset,i=r.cellSize,s=r.containerSize,a=r.currentOffset,o=n,l=o-s+i;switch(t){case"start":return o;case"end":return l;case"center":return o-(s-i)/2;default:return Math.max(l,Math.min(o,a))}}var W7=(function(r){$a(e,r);function e(t,n){var i;return Ni(this,e),i=yo(this,js(e).call(this,t,n)),i._cellMetadata=[],i._lastRenderedCellIndices=[],i._cellCache=[],i._isScrollingChange=i._isScrollingChange.bind(He(i)),i._setCollectionViewRef=i._setCollectionViewRef.bind(He(i)),i}return ss(e,[{key:"forceUpdate",value:function(){this._collectionView!==void 0&&this._collectionView.forceUpdate()}},{key:"recomputeCellSizesAndPositions",value:function(){this._cellCache=[],this._collectionView.recomputeCellSizesAndPositions()}},{key:"render",value:function(){var n=tr({},this.props);return M.createElement(kS,tr({cellLayoutManager:this,isScrollingChange:this._isScrollingChange,ref:this._setCollectionViewRef},n))}},{key:"calculateSizeAndPositionData",value:function(){var n=this.props,i=n.cellCount,s=n.cellSizeAndPositionGetter,a=n.sectionSize,o=gbe({cellCount:i,cellSizeAndPositionGetter:s,sectionSize:a});this._cellMetadata=o.cellMetadata,this._sectionManager=o.sectionManager,this._height=o.height,this._width=o.width}},{key:"getLastRenderedIndices",value:function(){return this._lastRenderedCellIndices}},{key:"getScrollPositionForCell",value:function(n){var i=n.align,s=n.cellIndex,a=n.height,o=n.scrollLeft,l=n.scrollTop,u=n.width,c=this.props.cellCount;if(s>=0&&s<c){var h=this._cellMetadata[s];o=V3({align:i,cellOffset:h.x,cellSize:h.width,containerSize:u,currentOffset:o}),l=V3({align:i,cellOffset:h.y,cellSize:h.height,containerSize:a,currentOffset:l})}return{scrollLeft:o,scrollTop:l}}},{key:"getTotalSize",value:function(){return{height:this._height,width:this._width}}},{key:"cellRenderers",value:function(n){var i=this,s=n.height,a=n.isScrolling,o=n.width,l=n.x,u=n.y,c=this.props,h=c.cellGroupRenderer,m=c.cellRenderer;return this._lastRenderedCellIndices=this._sectionManager.getCellIndices({height:s,width:o,x:l,y:u}),h({cellCache:this._cellCache,cellRenderer:m,cellSizeAndPositionGetter:function(y){var v=y.index;return i._sectionManager.getCellMetadata({index:v})},indices:this._lastRenderedCellIndices,isScrolling:a})}},{key:"_isScrollingChange",value:function(n){n||(this._cellCache=[])}},{key:"_setCollectionViewRef",value:function(n){this._collectionView=n}}]),e})(M.PureComponent);Ye(W7,"defaultProps",{"aria-label":"grid",cellGroupRenderer:vbe});W7.propTypes={};function vbe(r){var e=r.cellCache,t=r.cellRenderer,n=r.cellSizeAndPositionGetter,i=r.indices,s=r.isScrolling;return i.map(function(a){var o=n({index:a}),l={index:a,isScrolling:s,key:a,style:{height:o.height,left:o.x,position:"absolute",top:o.y,width:o.width}};return s?(a in e||(e[a]=t(l)),e[a]):t(l)}).filter(function(a){return!!a})}function FE(r,e){(e==null||e>r.length)&&(e=r.length);for(var t=0,n=Array(e);t<e;t++)n[t]=r[t];return n}function ybe(r){if(Array.isArray(r))return FE(r)}function _be(r){if(typeof Symbol<"u"&&r[Symbol.iterator]!=null||r["@@iterator"]!=null)return Array.from(r)}function q7(r,e){if(r){if(typeof r=="string")return FE(r,e);var t={}.toString.call(r).slice(8,-1);return t==="Object"&&r.constructor&&(t=r.constructor.name),t==="Map"||t==="Set"?Array.from(r):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?FE(r,e):void 0}}function xbe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function bbe(r){return ybe(r)||_be(r)||q7(r)||xbe()}var G7=(function(r){$a(e,r);function e(t,n){var i;return Ni(this,e),i=yo(this,js(e).call(this,t,n)),i._loadMoreRowsMemoizer=Hp(),i._onRowsRendered=i._onRowsRendered.bind(He(i)),i._registerChild=i._registerChild.bind(He(i)),i}return ss(e,[{key:"resetLoadMoreRowsCache",value:function(n){this._loadMoreRowsMemoizer=Hp(),n&&this._doStuff(this._lastRenderedStartIndex,this._lastRenderedStopIndex)}},{key:"render",value:function(){var n=this.props.children;return n({onRowsRendered:this._onRowsRendered,registerChild:this._registerChild})}},{key:"_loadUnloadedRanges",value:function(n){var i=this,s=this.props.loadMoreRows;n.forEach(function(a){var o=s(a);o&&o.then(function(){Sbe({lastRenderedStartIndex:i._lastRenderedStartIndex,lastRenderedStopIndex:i._lastRenderedStopIndex,startIndex:a.startIndex,stopIndex:a.stopIndex})&&i._registeredChild&&Cbe(i._registeredChild,i._lastRenderedStartIndex)})})}},{key:"_onRowsRendered",value:function(n){var i=n.startIndex,s=n.stopIndex;this._lastRenderedStartIndex=i,this._lastRenderedStopIndex=s,this._doStuff(i,s)}},{key:"_doStuff",value:function(n,i){var s,a=this,o=this.props,l=o.isRowLoaded,u=o.minimumBatchSize,c=o.rowCount,h=o.threshold,m=Tbe({isRowLoaded:l,minimumBatchSize:u,rowCount:c,startIndex:Math.max(0,n-h),stopIndex:Math.min(c-1,i+h)}),g=(s=[]).concat.apply(s,bbe(m.map(function(y){var v=y.startIndex,x=y.stopIndex;return[v,x]})));this._loadMoreRowsMemoizer({callback:function(){a._loadUnloadedRanges(m)},indices:{squashedUnloadedRanges:g}})}},{key:"_registerChild",value:function(n){this._registeredChild=n}}]),e})(M.PureComponent);Ye(G7,"defaultProps",{minimumBatchSize:10,rowCount:0,threshold:15});G7.propTypes={};function Sbe(r){var e=r.lastRenderedStartIndex,t=r.lastRenderedStopIndex,n=r.startIndex,i=r.stopIndex;return!(n>t||i<e)}function Tbe(r){for(var e=r.isRowLoaded,t=r.minimumBatchSize,n=r.rowCount,i=r.startIndex,s=r.stopIndex,a=[],o=null,l=null,u=i;u<=s;u++){var c=e({index:u});c?l!==null&&(a.push({startIndex:o,stopIndex:l}),o=l=null):(l=u,o===null&&(o=u))}if(l!==null){for(var h=Math.min(Math.max(l,o+t-1),n-1),m=l+1;m<=h&&!e({index:m});m++)l=m;a.push({startIndex:o,stopIndex:l})}if(a.length)for(var g=a[0];g.stopIndex-g.startIndex+1<t&&g.startIndex>0;){var y=g.startIndex-1;if(!e({index:y}))g.startIndex=y;else break}return a}function Cbe(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,t=typeof r.recomputeGridSize=="function"?r.recomputeGridSize:r.recomputeRowHeights;t?t.call(r,e):r.forceUpdate()}var W3,q3,wbe=(q3=W3=(function(r){$a(e,r);function e(){var t,n;Ni(this,e);for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return n=yo(this,(t=js(e)).call.apply(t,[this].concat(s))),Ye(He(n),"Grid",void 0),Ye(He(n),"_cellRenderer",function(o){var l=o.parent,u=o.rowIndex,c=o.style,h=o.isScrolling,m=o.isVisible,g=o.key,y=n.props.rowRenderer,v=Object.getOwnPropertyDescriptor(c,"width");return v&&v.writable&&(c.width="100%"),y({index:u,style:c,isScrolling:h,isVisible:m,key:g,parent:l})}),Ye(He(n),"_setRef",function(o){n.Grid=o}),Ye(He(n),"_onScroll",function(o){var l=o.clientHeight,u=o.scrollHeight,c=o.scrollTop,h=n.props.onScroll;h({clientHeight:l,scrollHeight:u,scrollTop:c})}),Ye(He(n),"_onSectionRendered",function(o){var l=o.rowOverscanStartIndex,u=o.rowOverscanStopIndex,c=o.rowStartIndex,h=o.rowStopIndex,m=n.props.onRowsRendered;m({overscanStartIndex:l,overscanStopIndex:u,startIndex:c,stopIndex:h})}),n}return ss(e,[{key:"forceUpdateGrid",value:function(){this.Grid&&this.Grid.forceUpdate()}},{key:"getOffsetForRow",value:function(n){var i=n.alignment,s=n.index;if(this.Grid){var a=this.Grid.getOffsetForCell({alignment:i,rowIndex:s,columnIndex:0}),o=a.scrollTop;return o}return 0}},{key:"invalidateCellSizeAfterRender",value:function(n){var i=n.columnIndex,s=n.rowIndex;this.Grid&&this.Grid.invalidateCellSizeAfterRender({rowIndex:s,columnIndex:i})}},{key:"measureAllRows",value:function(){this.Grid&&this.Grid.measureAllCells()}},{key:"recomputeGridSize",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=n.columnIndex,s=i===void 0?0:i,a=n.rowIndex,o=a===void 0?0:a;this.Grid&&this.Grid.recomputeGridSize({rowIndex:o,columnIndex:s})}},{key:"recomputeRowHeights",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;this.Grid&&this.Grid.recomputeGridSize({rowIndex:n,columnIndex:0})}},{key:"scrollToPosition",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;this.Grid&&this.Grid.scrollToPosition({scrollTop:n})}},{key:"scrollToRow",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;this.Grid&&this.Grid.scrollToCell({columnIndex:0,rowIndex:n})}},{key:"render",value:function(){var n=this.props,i=n.className,s=n.noRowsRenderer,a=n.scrollToIndex,o=n.width,l=bl("ReactVirtualized__List",i);return M.createElement(Sd,tr({},this.props,{autoContainerWidth:!0,cellRenderer:this._cellRenderer,className:l,columnWidth:o,columnCount:1,noContentRenderer:s,onScroll:this._onScroll,onSectionRendered:this._onSectionRendered,ref:this._setRef,scrollToRow:a}))}}]),e})(M.PureComponent),Ye(W3,"propTypes",null),q3);Ye(wbe,"defaultProps",{autoHeight:!1,estimatedRowSize:30,onScroll:function(){},noRowsRenderer:function(){return null},onRowsRendered:function(){},overscanIndicesGetter:j7,overscanRowCount:10,scrollToAlignment:"auto",scrollToIndex:-1,style:{}});function Ebe(r){if(Array.isArray(r))return r}function kbe(r,e){var t=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(t!=null){var n,i,s,a,o=[],l=!0,u=!1;try{if(s=(t=t.call(r)).next,e!==0)for(;!(l=(n=s.call(t)).done)&&(o.push(n.value),o.length!==e);l=!0);}catch(c){u=!0,i=c}finally{try{if(!l&&t.return!=null&&(a=t.return(),Object(a)!==a))return}finally{if(u)throw i}}return o}}function Abe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Dbe(r,e){return Ebe(r)||kbe(r,e)||q7(r,e)||Abe()}function Ibe(r,e,t,n){for(var i=t+1;e<=t;){var s=e+t>>>1,a=r[s];a>=n?(i=s,t=s-1):e=s+1}return i}function Pbe(r,e,t,n,i){for(var s=t+1;e<=t;){var a=e+t>>>1,o=r[a];i(o,n)>=0?(s=a,t=a-1):e=a+1}return s}function Rbe(r,e,t,n,i){return typeof t=="function"?Pbe(r,n===void 0?0:n|0,i===void 0?r.length-1:i|0,e,t):Ibe(r,t===void 0?0:t|0,n===void 0?r.length-1:n|0,e)}function Lbe(r,e,t,n){for(var i=t+1;e<=t;){var s=e+t>>>1,a=r[s];a>n?(i=s,t=s-1):e=s+1}return i}function Obe(r,e,t,n,i){for(var s=t+1;e<=t;){var a=e+t>>>1,o=r[a];i(o,n)>0?(s=a,t=a-1):e=a+1}return s}function Mbe(r,e,t,n,i){return typeof t=="function"?Obe(r,n===void 0?0:n|0,i===void 0?r.length-1:i|0,e,t):Lbe(r,t===void 0?0:t|0,n===void 0?r.length-1:n|0,e)}function Fbe(r,e,t,n){for(var i=e-1;e<=t;){var s=e+t>>>1,a=r[s];a<n?(i=s,e=s+1):t=s-1}return i}function Bbe(r,e,t,n,i){for(var s=e-1;e<=t;){var a=e+t>>>1,o=r[a];i(o,n)<0?(s=a,e=a+1):t=a-1}return s}function Nbe(r,e,t,n,i){return typeof t=="function"?Bbe(r,n===void 0?0:n|0,i===void 0?r.length-1:i|0,e,t):Fbe(r,t===void 0?0:t|0,n===void 0?r.length-1:n|0,e)}function Ube(r,e,t,n){for(var i=e-1;e<=t;){var s=e+t>>>1,a=r[s];a<=n?(i=s,e=s+1):t=s-1}return i}function $be(r,e,t,n,i){for(var s=e-1;e<=t;){var a=e+t>>>1,o=r[a];i(o,n)<=0?(s=a,e=a+1):t=a-1}return s}function jbe(r,e,t,n,i){return typeof t=="function"?$be(r,n===void 0?0:n|0,i===void 0?r.length-1:i|0,e,t):Ube(r,t===void 0?0:t|0,n===void 0?r.length-1:n|0,e)}function zbe(r,e,t,n){for(;e<=t;){var i=e+t>>>1,s=r[i];if(s===n)return i;s<=n?e=i+1:t=i-1}return-1}function Hbe(r,e,t,n,i){for(;e<=t;){var s=e+t>>>1,a=r[s],o=i(a,n);if(o===0)return s;o<=0?e=s+1:t=s-1}return-1}function Vbe(r,e,t,n,i){return typeof t=="function"?Hbe(r,n===void 0?0:n|0,i===void 0?r.length-1:i|0,e,t):zbe(r,t===void 0?0:t|0,n===void 0?r.length-1:n|0,e)}const tb={ge:Rbe,gt:Mbe,lt:Nbe,le:jbe,eq:Vbe};var ep=0,yh=1,I_=2;function IA(r,e,t,n,i){this.mid=r,this.left=e,this.right=t,this.leftPoints=n,this.rightPoints=i,this.count=(e?e.count:0)+(t?t.count:0)+n.length}var Jg=IA.prototype;function OC(r,e){r.mid=e.mid,r.left=e.left,r.right=e.right,r.leftPoints=e.leftPoints,r.rightPoints=e.rightPoints,r.count=e.count}function K7(r,e){var t=fg(e);r.mid=t.mid,r.left=t.left,r.right=t.right,r.leftPoints=t.leftPoints,r.rightPoints=t.rightPoints,r.count=t.count}function G3(r,e){var t=r.intervals([]);t.push(e),K7(r,t)}function K3(r,e){var t=r.intervals([]),n=t.indexOf(e);return n<0?ep:(t.splice(n,1),K7(r,t),yh)}Jg.intervals=function(r){return r.push.apply(r,this.leftPoints),this.left&&this.left.intervals(r),this.right&&this.right.intervals(r),r};Jg.insert=function(r){var e=this.count-this.leftPoints.length;if(this.count+=1,r[1]<this.mid)this.left?4*(this.left.count+1)>3*(e+1)?G3(this,r):this.left.insert(r):this.left=fg([r]);else if(r[0]>this.mid)this.right?4*(this.right.count+1)>3*(e+1)?G3(this,r):this.right.insert(r):this.right=fg([r]);else{var t=tb.ge(this.leftPoints,r,PA),n=tb.ge(this.rightPoints,r,RA);this.leftPoints.splice(t,0,r),this.rightPoints.splice(n,0,r)}};Jg.remove=function(r){var e=this.count-this.leftPoints;if(r[1]<this.mid){if(!this.left)return ep;var t=this.right?this.right.count:0;if(4*t>3*(e-1))return K3(this,r);var n=this.left.remove(r);return n===I_?(this.left=null,this.count-=1,yh):(n===yh&&(this.count-=1),n)}else if(r[0]>this.mid){if(!this.right)return ep;var i=this.left?this.left.count:0;if(4*i>3*(e-1))return K3(this,r);var n=this.right.remove(r);return n===I_?(this.right=null,this.count-=1,yh):(n===yh&&(this.count-=1),n)}else{if(this.count===1)return this.leftPoints[0]===r?I_:ep;if(this.leftPoints.length===1&&this.leftPoints[0]===r){if(this.left&&this.right){for(var s=this,a=this.left;a.right;)s=a,a=a.right;if(s===this)a.right=this.right;else{var o=this.left,n=this.right;s.count-=a.count,s.right=a.left,a.left=o,a.right=n}OC(this,a),this.count=(this.left?this.left.count:0)+(this.right?this.right.count:0)+this.leftPoints.length}else this.left?OC(this,this.left):OC(this,this.right);return yh}for(var o=tb.ge(this.leftPoints,r,PA);o<this.leftPoints.length&&this.leftPoints[o][0]===r[0];++o)if(this.leftPoints[o]===r){this.count-=1,this.leftPoints.splice(o,1);for(var n=tb.ge(this.rightPoints,r,RA);n<this.rightPoints.length&&this.rightPoints[n][1]===r[1];++n)if(this.rightPoints[n]===r)return this.rightPoints.splice(n,1),yh}return ep}};function X7(r,e,t){for(var n=0;n<r.length&&r[n][0]<=e;++n){var i=t(r[n]);if(i)return i}}function Y7(r,e,t){for(var n=r.length-1;n>=0&&r[n][1]>=e;--n){var i=t(r[n]);if(i)return i}}function Q7(r,e){for(var t=0;t<r.length;++t){var n=e(r[t]);if(n)return n}}Jg.queryPoint=function(r,e){if(r<this.mid){if(this.left){var t=this.left.queryPoint(r,e);if(t)return t}return X7(this.leftPoints,r,e)}else if(r>this.mid){if(this.right){var t=this.right.queryPoint(r,e);if(t)return t}return Y7(this.rightPoints,r,e)}else return Q7(this.leftPoints,e)};Jg.queryInterval=function(r,e,t){if(r<this.mid&&this.left){var n=this.left.queryInterval(r,e,t);if(n)return n}if(e>this.mid&&this.right){var n=this.right.queryInterval(r,e,t);if(n)return n}return e<this.mid?X7(this.leftPoints,e,t):r>this.mid?Y7(this.rightPoints,r,t):Q7(this.leftPoints,t)};function Wbe(r,e){return r-e}function PA(r,e){var t=r[0]-e[0];return t||r[1]-e[1]}function RA(r,e){var t=r[1]-e[1];return t||r[0]-e[0]}function fg(r){if(r.length===0)return null;for(var e=[],t=0;t<r.length;++t)e.push(r[t][0],r[t][1]);e.sort(Wbe);for(var n=e[e.length>>1],i=[],s=[],a=[],t=0;t<r.length;++t){var o=r[t];o[1]<n?i.push(o):n<o[0]?s.push(o):a.push(o)}var l=a,u=a.slice();return l.sort(PA),u.sort(RA),new IA(n,fg(i),fg(s),l,u)}function J7(r){this.root=r}var vm=J7.prototype;vm.insert=function(r){this.root?this.root.insert(r):this.root=new IA(r[0],null,null,[r],[r])};vm.remove=function(r){if(this.root){var e=this.root.remove(r);return e===I_&&(this.root=null),e!==ep}return!1};vm.queryPoint=function(r,e){if(this.root)return this.root.queryPoint(r,e)};vm.queryInterval=function(r,e,t){if(r<=e&&this.root)return this.root.queryInterval(r,e,t)};Object.defineProperty(vm,"count",{get:function(){return this.root?this.root.count:0}});Object.defineProperty(vm,"intervals",{get:function(){return this.root?this.root.intervals([]):[]}});function qbe(r){return new J7(null)}var MC=(function(){function r(){Ni(this,r),Ye(this,"_columnSizeMap",{}),Ye(this,"_intervalTree",qbe()),Ye(this,"_leftMap",{})}return ss(r,[{key:"estimateTotalHeight",value:function(t,n,i){var s=t-this.count;return this.tallestColumnSize+Math.ceil(s/n)*i}},{key:"range",value:function(t,n,i){var s=this;this._intervalTree.queryInterval(t,t+n,function(a){var o=Dbe(a,3),l=o[0];o[1];var u=o[2];return i(u,s._leftMap[u],l)})}},{key:"setPosition",value:function(t,n,i,s){this._intervalTree.insert([i,i+s,t]),this._leftMap[t]=n;var a=this._columnSizeMap,o=a[n];o===void 0?a[n]=i+s:a[n]=Math.max(o,i+s)}},{key:"count",get:function(){return this._intervalTree.count}},{key:"shortestColumnSize",get:function(){var t=this._columnSizeMap,n=0;for(var i in t){var s=t[i];n=n===0?s:Math.min(n,s)}return n}},{key:"tallestColumnSize",get:function(){var t=this._columnSizeMap,n=0;for(var i in t){var s=t[i];n=Math.max(n,s)}return n}}]),r})(),X3,Y3;function Q3(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function Gbe(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Q3(t,!0).forEach(function(n){Ye(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):Q3(t).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}var Kbe={},Xbe=150,Z7=(Y3=X3=(function(r){$a(e,r);function e(){var t,n;Ni(this,e);for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return n=yo(this,(t=js(e)).call.apply(t,[this].concat(s))),Ye(He(n),"state",{isScrolling:!1,scrollTop:0}),Ye(He(n),"_debounceResetIsScrollingId",void 0),Ye(He(n),"_invalidateOnUpdateStartIndex",null),Ye(He(n),"_invalidateOnUpdateStopIndex",null),Ye(He(n),"_positionCache",new MC),Ye(He(n),"_startIndex",null),Ye(He(n),"_startIndexMemoized",null),Ye(He(n),"_stopIndex",null),Ye(He(n),"_stopIndexMemoized",null),Ye(He(n),"_debounceResetIsScrollingCallback",function(){n.setState({isScrolling:!1})}),Ye(He(n),"_setScrollingContainerRef",function(o){n._scrollingContainer=o}),Ye(He(n),"_onScroll",function(o){var l=n.props.height,u=o.currentTarget.scrollTop,c=Math.min(Math.max(0,n._getEstimatedTotalHeight()-l),u);u===c&&(n._debounceResetIsScrolling(),n.state.scrollTop!==c&&n.setState({isScrolling:!0,scrollTop:c}))}),n}return ss(e,[{key:"clearCellPositions",value:function(){this._positionCache=new MC,this.forceUpdate()}},{key:"invalidateCellSizeAfterRender",value:function(n){var i=n.rowIndex;this._invalidateOnUpdateStartIndex===null?(this._invalidateOnUpdateStartIndex=i,this._invalidateOnUpdateStopIndex=i):(this._invalidateOnUpdateStartIndex=Math.min(this._invalidateOnUpdateStartIndex,i),this._invalidateOnUpdateStopIndex=Math.max(this._invalidateOnUpdateStopIndex,i))}},{key:"recomputeCellPositions",value:function(){var n=this._positionCache.count-1;this._positionCache=new MC,this._populatePositionCache(0,n),this.forceUpdate()}},{key:"componentDidMount",value:function(){this._checkInvalidateOnUpdate(),this._invokeOnScrollCallback(),this._invokeOnCellsRenderedCallback()}},{key:"componentDidUpdate",value:function(n,i){this._checkInvalidateOnUpdate(),this._invokeOnScrollCallback(),this._invokeOnCellsRenderedCallback(),this.props.scrollTop!==n.scrollTop&&this._debounceResetIsScrolling()}},{key:"componentWillUnmount",value:function(){this._debounceResetIsScrollingId&&Vp(this._debounceResetIsScrollingId)}},{key:"render",value:function(){var n=this,i=this.props,s=i.autoHeight,a=i.cellCount,o=i.cellMeasurerCache,l=i.cellRenderer,u=i.className,c=i.height,h=i.id,m=i.keyMapper,g=i.overscanByPixels,y=i.role,v=i.style,x=i.tabIndex,w=i.width,E=i.rowDirection,D=this.state,I=D.isScrolling,A=D.scrollTop,L=[],N=this._getEstimatedTotalHeight(),U=this._positionCache.shortestColumnSize,B=this._positionCache.count,k=0,H;if(this._positionCache.range(Math.max(0,A-g),c+g*2,function(Q,ie,le){var he;typeof H>"u"?(k=Q,H=Q):(k=Math.min(k,Q),H=Math.max(H,Q)),L.push(l({index:Q,isScrolling:I,key:m(Q),parent:n,style:(he={height:o.getHeight(Q)},Ye(he,E==="ltr"?"left":"right",ie),Ye(he,"position","absolute"),Ye(he,"top",le),Ye(he,"width",o.getWidth(Q)),he)}))}),U<A+c+g&&B<a)for(var q=Math.min(a-B,Math.ceil((A+c+g-U)/o.defaultHeight*w/o.defaultWidth)),V=B;V<B+q;V++)H=V,L.push(l({index:V,isScrolling:I,key:m(V),parent:this,style:{width:o.getWidth(V)}}));return this._startIndex=k,this._stopIndex=H,M.createElement("div",{ref:this._setScrollingContainerRef,"aria-label":this.props["aria-label"],className:bl("ReactVirtualized__Masonry",u),id:h,onScroll:this._onScroll,role:y,style:Gbe({boxSizing:"border-box",direction:"ltr",height:s?"auto":c,overflowX:"hidden",overflowY:N<c?"hidden":"auto",position:"relative",width:w,WebkitOverflowScrolling:"touch",willChange:"transform"},v),tabIndex:x},M.createElement("div",{className:"ReactVirtualized__Masonry__innerScrollContainer",style:{width:"100%",height:N,maxWidth:"100%",maxHeight:N,overflow:"hidden",pointerEvents:I?"none":"",position:"relative"}},L))}},{key:"_checkInvalidateOnUpdate",value:function(){if(typeof this._invalidateOnUpdateStartIndex=="number"){var n=this._invalidateOnUpdateStartIndex,i=this._invalidateOnUpdateStopIndex;this._invalidateOnUpdateStartIndex=null,this._invalidateOnUpdateStopIndex=null,this._populatePositionCache(n,i),this.forceUpdate()}}},{key:"_debounceResetIsScrolling",value:function(){var n=this.props.scrollingResetTimeInterval;this._debounceResetIsScrollingId&&Vp(this._debounceResetIsScrollingId),this._debounceResetIsScrollingId=DA(this._debounceResetIsScrollingCallback,n)}},{key:"_getEstimatedTotalHeight",value:function(){var n=this.props,i=n.cellCount,s=n.cellMeasurerCache,a=n.width,o=Math.max(1,Math.floor(a/s.defaultWidth));return this._positionCache.estimateTotalHeight(i,o,s.defaultHeight)}},{key:"_invokeOnScrollCallback",value:function(){var n=this.props,i=n.height,s=n.onScroll,a=this.state.scrollTop;this._onScrollMemoized!==a&&(s({clientHeight:i,scrollHeight:this._getEstimatedTotalHeight(),scrollTop:a}),this._onScrollMemoized=a)}},{key:"_invokeOnCellsRenderedCallback",value:function(){if(this._startIndexMemoized!==this._startIndex||this._stopIndexMemoized!==this._stopIndex){var n=this.props.onCellsRendered;n({startIndex:this._startIndex,stopIndex:this._stopIndex}),this._startIndexMemoized=this._startIndex,this._stopIndexMemoized=this._stopIndex}}},{key:"_populatePositionCache",value:function(n,i){for(var s=this.props,a=s.cellMeasurerCache,o=s.cellPositioner,l=n;l<=i;l++){var u=o(l),c=u.left,h=u.top;this._positionCache.setPosition(l,c,h,a.getHeight(l))}}}],[{key:"getDerivedStateFromProps",value:function(n,i){return n.scrollTop!==void 0&&i.scrollTop!==n.scrollTop?{isScrolling:!0,scrollTop:n.scrollTop}:null}}]),e})(M.PureComponent),Ye(X3,"propTypes",null),Y3);Ye(Z7,"defaultProps",{autoHeight:!1,keyMapper:Ybe,onCellsRendered:J3,onScroll:J3,overscanByPixels:20,role:"grid",scrollingResetTimeInterval:Xbe,style:Kbe,tabIndex:0,rowDirection:"ltr"});function Ybe(r){return r}function J3(){}Qg(Z7);var FC=(function(){function r(){var e=this,t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Ni(this,r),Ye(this,"_cellMeasurerCache",void 0),Ye(this,"_columnIndexOffset",void 0),Ye(this,"_rowIndexOffset",void 0),Ye(this,"columnWidth",function(l){var u=l.index;e._cellMeasurerCache.columnWidth({index:u+e._columnIndexOffset})}),Ye(this,"rowHeight",function(l){var u=l.index;e._cellMeasurerCache.rowHeight({index:u+e._rowIndexOffset})});var n=t.cellMeasurerCache,i=t.columnIndexOffset,s=i===void 0?0:i,a=t.rowIndexOffset,o=a===void 0?0:a;this._cellMeasurerCache=n,this._columnIndexOffset=s,this._rowIndexOffset=o}return ss(r,[{key:"clear",value:function(t,n){this._cellMeasurerCache.clear(t+this._rowIndexOffset,n+this._columnIndexOffset)}},{key:"clearAll",value:function(){this._cellMeasurerCache.clearAll()}},{key:"hasFixedHeight",value:function(){return this._cellMeasurerCache.hasFixedHeight()}},{key:"hasFixedWidth",value:function(){return this._cellMeasurerCache.hasFixedWidth()}},{key:"getHeight",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return this._cellMeasurerCache.getHeight(t+this._rowIndexOffset,n+this._columnIndexOffset)}},{key:"getWidth",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return this._cellMeasurerCache.getWidth(t+this._rowIndexOffset,n+this._columnIndexOffset)}},{key:"has",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return this._cellMeasurerCache.has(t+this._rowIndexOffset,n+this._columnIndexOffset)}},{key:"set",value:function(t,n,i,s){this._cellMeasurerCache.set(t+this._rowIndexOffset,n+this._columnIndexOffset,i,s)}},{key:"defaultHeight",get:function(){return this._cellMeasurerCache.defaultHeight}},{key:"defaultWidth",get:function(){return this._cellMeasurerCache.defaultWidth}}]),r})();function Z3(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function Os(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Z3(t,!0).forEach(function(n){Ye(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):Z3(t).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}var eF=20,LA=(function(r){$a(e,r);function e(t,n){var i;Ni(this,e),i=yo(this,js(e).call(this,t,n)),Ye(He(i),"state",{scrollLeft:0,scrollTop:0,scrollbarSize:0,showHorizontalScrollbar:!1,showVerticalScrollbar:!1}),Ye(He(i),"_deferredInvalidateColumnIndex",null),Ye(He(i),"_deferredInvalidateRowIndex",null),Ye(He(i),"_bottomLeftGridRef",function(l){i._bottomLeftGrid=l}),Ye(He(i),"_bottomRightGridRef",function(l){i._bottomRightGrid=l}),Ye(He(i),"_cellRendererBottomLeftGrid",function(l){var u=l.rowIndex,c=_0(l,["rowIndex"]),h=i.props,m=h.cellRenderer,g=h.fixedRowCount,y=h.rowCount;return u===y-g?M.createElement("div",{key:c.key,style:Os({},c.style,{height:eF})}):m(Os({},c,{parent:He(i),rowIndex:u+g}))}),Ye(He(i),"_cellRendererBottomRightGrid",function(l){var u=l.columnIndex,c=l.rowIndex,h=_0(l,["columnIndex","rowIndex"]),m=i.props,g=m.cellRenderer,y=m.fixedColumnCount,v=m.fixedRowCount;return g(Os({},h,{columnIndex:u+y,parent:He(i),rowIndex:c+v}))}),Ye(He(i),"_cellRendererTopRightGrid",function(l){var u=l.columnIndex,c=_0(l,["columnIndex"]),h=i.props,m=h.cellRenderer,g=h.columnCount,y=h.fixedColumnCount;return u===g-y?M.createElement("div",{key:c.key,style:Os({},c.style,{width:eF})}):m(Os({},c,{columnIndex:u+y,parent:He(i)}))}),Ye(He(i),"_columnWidthRightGrid",function(l){var u=l.index,c=i.props,h=c.columnCount,m=c.fixedColumnCount,g=c.columnWidth,y=i.state,v=y.scrollbarSize,x=y.showHorizontalScrollbar;return x&&u===h-m?v:typeof g=="function"?g({index:u+m}):g}),Ye(He(i),"_onScroll",function(l){var u=l.scrollLeft,c=l.scrollTop;i.setState({scrollLeft:u,scrollTop:c});var h=i.props.onScroll;h&&h(l)}),Ye(He(i),"_onScrollbarPresenceChange",function(l){var u=l.horizontal,c=l.size,h=l.vertical,m=i.state,g=m.showHorizontalScrollbar,y=m.showVerticalScrollbar;if(u!==g||h!==y){i.setState({scrollbarSize:c,showHorizontalScrollbar:u,showVerticalScrollbar:h});var v=i.props.onScrollbarPresenceChange;typeof v=="function"&&v({horizontal:u,size:c,vertical:h})}}),Ye(He(i),"_onScrollLeft",function(l){var u=l.scrollLeft;i._onScroll({scrollLeft:u,scrollTop:i.state.scrollTop})}),Ye(He(i),"_onScrollTop",function(l){var u=l.scrollTop;i._onScroll({scrollTop:u,scrollLeft:i.state.scrollLeft})}),Ye(He(i),"_rowHeightBottomGrid",function(l){var u=l.index,c=i.props,h=c.fixedRowCount,m=c.rowCount,g=c.rowHeight,y=i.state,v=y.scrollbarSize,x=y.showVerticalScrollbar;return x&&u===m-h?v:typeof g=="function"?g({index:u+h}):g}),Ye(He(i),"_topLeftGridRef",function(l){i._topLeftGrid=l}),Ye(He(i),"_topRightGridRef",function(l){i._topRightGrid=l});var s=t.deferredMeasurementCache,a=t.fixedColumnCount,o=t.fixedRowCount;return i._maybeCalculateCachedStyles(!0),s&&(i._deferredMeasurementCacheBottomLeftGrid=o>0?new FC({cellMeasurerCache:s,columnIndexOffset:0,rowIndexOffset:o}):s,i._deferredMeasurementCacheBottomRightGrid=a>0||o>0?new FC({cellMeasurerCache:s,columnIndexOffset:a,rowIndexOffset:o}):s,i._deferredMeasurementCacheTopRightGrid=a>0?new FC({cellMeasurerCache:s,columnIndexOffset:a,rowIndexOffset:0}):s),i}return ss(e,[{key:"forceUpdateGrids",value:function(){this._bottomLeftGrid&&this._bottomLeftGrid.forceUpdate(),this._bottomRightGrid&&this._bottomRightGrid.forceUpdate(),this._topLeftGrid&&this._topLeftGrid.forceUpdate(),this._topRightGrid&&this._topRightGrid.forceUpdate()}},{key:"invalidateCellSizeAfterRender",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=n.columnIndex,s=i===void 0?0:i,a=n.rowIndex,o=a===void 0?0:a;this._deferredInvalidateColumnIndex=typeof this._deferredInvalidateColumnIndex=="number"?Math.min(this._deferredInvalidateColumnIndex,s):s,this._deferredInvalidateRowIndex=typeof this._deferredInvalidateRowIndex=="number"?Math.min(this._deferredInvalidateRowIndex,o):o}},{key:"measureAllCells",value:function(){this._bottomLeftGrid&&this._bottomLeftGrid.measureAllCells(),this._bottomRightGrid&&this._bottomRightGrid.measureAllCells(),this._topLeftGrid&&this._topLeftGrid.measureAllCells(),this._topRightGrid&&this._topRightGrid.measureAllCells()}},{key:"recomputeGridSize",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=n.columnIndex,s=i===void 0?0:i,a=n.rowIndex,o=a===void 0?0:a,l=this.props,u=l.fixedColumnCount,c=l.fixedRowCount,h=Math.max(0,s-u),m=Math.max(0,o-c);this._bottomLeftGrid&&this._bottomLeftGrid.recomputeGridSize({columnIndex:s,rowIndex:m}),this._bottomRightGrid&&this._bottomRightGrid.recomputeGridSize({columnIndex:h,rowIndex:m}),this._topLeftGrid&&this._topLeftGrid.recomputeGridSize({columnIndex:s,rowIndex:o}),this._topRightGrid&&this._topRightGrid.recomputeGridSize({columnIndex:h,rowIndex:o}),this._leftGridWidth=null,this._topGridHeight=null,this._maybeCalculateCachedStyles(!0)}},{key:"componentDidMount",value:function(){var n=this.props,i=n.scrollLeft,s=n.scrollTop;if(i>0||s>0){var a={};i>0&&(a.scrollLeft=i),s>0&&(a.scrollTop=s),this.setState(a)}this._handleInvalidatedGridSize()}},{key:"componentDidUpdate",value:function(){this._handleInvalidatedGridSize()}},{key:"render",value:function(){var n=this.props,i=n.onScroll,s=n.onSectionRendered;n.onScrollbarPresenceChange,n.scrollLeft;var a=n.scrollToColumn;n.scrollTop;var o=n.scrollToRow,l=_0(n,["onScroll","onSectionRendered","onScrollbarPresenceChange","scrollLeft","scrollToColumn","scrollTop","scrollToRow"]);if(this._prepareForRender(),this.props.width===0||this.props.height===0)return null;var u=this.state,c=u.scrollLeft,h=u.scrollTop;return M.createElement("div",{style:this._containerOuterStyle},M.createElement("div",{style:this._containerTopStyle},this._renderTopLeftGrid(l),this._renderTopRightGrid(Os({},l,{onScroll:i,scrollLeft:c}))),M.createElement("div",{style:this._containerBottomStyle},this._renderBottomLeftGrid(Os({},l,{onScroll:i,scrollTop:h})),this._renderBottomRightGrid(Os({},l,{onScroll:i,onSectionRendered:s,scrollLeft:c,scrollToColumn:a,scrollToRow:o,scrollTop:h}))))}},{key:"_getBottomGridHeight",value:function(n){var i=n.height,s=this._getTopGridHeight(n);return i-s}},{key:"_getLeftGridWidth",value:function(n){var i=n.fixedColumnCount,s=n.columnWidth;if(this._leftGridWidth==null)if(typeof s=="function"){for(var a=0,o=0;o<i;o++)a+=s({index:o});this._leftGridWidth=a}else this._leftGridWidth=s*i;return this._leftGridWidth}},{key:"_getRightGridWidth",value:function(n){var i=n.width,s=this._getLeftGridWidth(n);return i-s}},{key:"_getTopGridHeight",value:function(n){var i=n.fixedRowCount,s=n.rowHeight;if(this._topGridHeight==null)if(typeof s=="function"){for(var a=0,o=0;o<i;o++)a+=s({index:o});this._topGridHeight=a}else this._topGridHeight=s*i;return this._topGridHeight}},{key:"_handleInvalidatedGridSize",value:function(){if(typeof this._deferredInvalidateColumnIndex=="number"){var n=this._deferredInvalidateColumnIndex,i=this._deferredInvalidateRowIndex;this._deferredInvalidateColumnIndex=null,this._deferredInvalidateRowIndex=null,this.recomputeGridSize({columnIndex:n,rowIndex:i}),this.forceUpdate()}}},{key:"_maybeCalculateCachedStyles",value:function(n){var i=this.props,s=i.columnWidth,a=i.enableFixedColumnScroll,o=i.enableFixedRowScroll,l=i.height,u=i.fixedColumnCount,c=i.fixedRowCount,h=i.rowHeight,m=i.style,g=i.styleBottomLeftGrid,y=i.styleBottomRightGrid,v=i.styleTopLeftGrid,x=i.styleTopRightGrid,w=i.width,E=n||l!==this._lastRenderedHeight||w!==this._lastRenderedWidth,D=n||s!==this._lastRenderedColumnWidth||u!==this._lastRenderedFixedColumnCount,I=n||c!==this._lastRenderedFixedRowCount||h!==this._lastRenderedRowHeight;(n||E||m!==this._lastRenderedStyle)&&(this._containerOuterStyle=Os({height:l,overflow:"visible",width:w},m)),(n||E||I)&&(this._containerTopStyle={height:this._getTopGridHeight(this.props),position:"relative",width:w},this._containerBottomStyle={height:l-this._getTopGridHeight(this.props),overflow:"visible",position:"relative",width:w}),(n||g!==this._lastRenderedStyleBottomLeftGrid)&&(this._bottomLeftGridStyle=Os({left:0,overflowX:"hidden",overflowY:a?"auto":"hidden",position:"absolute"},g)),(n||D||y!==this._lastRenderedStyleBottomRightGrid)&&(this._bottomRightGridStyle=Os({left:this._getLeftGridWidth(this.props),position:"absolute"},y)),(n||v!==this._lastRenderedStyleTopLeftGrid)&&(this._topLeftGridStyle=Os({left:0,overflowX:"hidden",overflowY:"hidden",position:"absolute",top:0},v)),(n||D||x!==this._lastRenderedStyleTopRightGrid)&&(this._topRightGridStyle=Os({left:this._getLeftGridWidth(this.props),overflowX:o?"auto":"hidden",overflowY:"hidden",position:"absolute",top:0},x)),this._lastRenderedColumnWidth=s,this._lastRenderedFixedColumnCount=u,this._lastRenderedFixedRowCount=c,this._lastRenderedHeight=l,this._lastRenderedRowHeight=h,this._lastRenderedStyle=m,this._lastRenderedStyleBottomLeftGrid=g,this._lastRenderedStyleBottomRightGrid=y,this._lastRenderedStyleTopLeftGrid=v,this._lastRenderedStyleTopRightGrid=x,this._lastRenderedWidth=w}},{key:"_prepareForRender",value:function(){(this._lastRenderedColumnWidth!==this.props.columnWidth||this._lastRenderedFixedColumnCount!==this.props.fixedColumnCount)&&(this._leftGridWidth=null),(this._lastRenderedFixedRowCount!==this.props.fixedRowCount||this._lastRenderedRowHeight!==this.props.rowHeight)&&(this._topGridHeight=null),this._maybeCalculateCachedStyles(),this._lastRenderedColumnWidth=this.props.columnWidth,this._lastRenderedFixedColumnCount=this.props.fixedColumnCount,this._lastRenderedFixedRowCount=this.props.fixedRowCount,this._lastRenderedRowHeight=this.props.rowHeight}},{key:"_renderBottomLeftGrid",value:function(n){var i=n.enableFixedColumnScroll,s=n.fixedColumnCount,a=n.fixedRowCount,o=n.rowCount,l=n.hideBottomLeftGridScrollbar,u=this.state.showVerticalScrollbar;if(!s)return null;var c=u?1:0,h=this._getBottomGridHeight(n),m=this._getLeftGridWidth(n),g=this.state.showVerticalScrollbar?this.state.scrollbarSize:0,y=l?m+g:m,v=M.createElement(Sd,tr({},n,{cellRenderer:this._cellRendererBottomLeftGrid,className:this.props.classNameBottomLeftGrid,columnCount:s,deferredMeasurementCache:this._deferredMeasurementCacheBottomLeftGrid,height:h,onScroll:i?this._onScrollTop:void 0,ref:this._bottomLeftGridRef,rowCount:Math.max(0,o-a)+c,rowHeight:this._rowHeightBottomGrid,style:this._bottomLeftGridStyle,tabIndex:null,width:y}));return l?M.createElement("div",{className:"BottomLeftGrid_ScrollWrapper",style:Os({},this._bottomLeftGridStyle,{height:h,width:m,overflowY:"hidden"})},v):v}},{key:"_renderBottomRightGrid",value:function(n){var i=n.columnCount,s=n.fixedColumnCount,a=n.fixedRowCount,o=n.rowCount,l=n.scrollToColumn,u=n.scrollToRow;return M.createElement(Sd,tr({},n,{cellRenderer:this._cellRendererBottomRightGrid,className:this.props.classNameBottomRightGrid,columnCount:Math.max(0,i-s),columnWidth:this._columnWidthRightGrid,deferredMeasurementCache:this._deferredMeasurementCacheBottomRightGrid,height:this._getBottomGridHeight(n),onScroll:this._onScroll,onScrollbarPresenceChange:this._onScrollbarPresenceChange,ref:this._bottomRightGridRef,rowCount:Math.max(0,o-a),rowHeight:this._rowHeightBottomGrid,scrollToColumn:l-s,scrollToRow:u-a,style:this._bottomRightGridStyle,width:this._getRightGridWidth(n)}))}},{key:"_renderTopLeftGrid",value:function(n){var i=n.fixedColumnCount,s=n.fixedRowCount;return!i||!s?null:M.createElement(Sd,tr({},n,{className:this.props.classNameTopLeftGrid,columnCount:i,height:this._getTopGridHeight(n),ref:this._topLeftGridRef,rowCount:s,style:this._topLeftGridStyle,tabIndex:null,width:this._getLeftGridWidth(n)}))}},{key:"_renderTopRightGrid",value:function(n){var i=n.columnCount,s=n.enableFixedRowScroll,a=n.fixedColumnCount,o=n.fixedRowCount,l=n.scrollLeft,u=n.hideTopRightGridScrollbar,c=this.state,h=c.showHorizontalScrollbar,m=c.scrollbarSize;if(!o)return null;var g=h?1:0,y=this._getTopGridHeight(n),v=this._getRightGridWidth(n),x=h?m:0,w=y,E=this._topRightGridStyle;u&&(w=y+x,E=Os({},this._topRightGridStyle,{left:0}));var D=M.createElement(Sd,tr({},n,{cellRenderer:this._cellRendererTopRightGrid,className:this.props.classNameTopRightGrid,columnCount:Math.max(0,i-a)+g,columnWidth:this._columnWidthRightGrid,deferredMeasurementCache:this._deferredMeasurementCacheTopRightGrid,height:w,onScroll:s?this._onScrollLeft:void 0,ref:this._topRightGridRef,rowCount:o,scrollLeft:l,style:E,tabIndex:null,width:v}));return u?M.createElement("div",{className:"TopRightGrid_ScrollWrapper",style:Os({},this._topRightGridStyle,{height:y,width:v,overflowX:"hidden"})},D):D}}],[{key:"getDerivedStateFromProps",value:function(n,i){return n.scrollLeft!==i.scrollLeft||n.scrollTop!==i.scrollTop?{scrollLeft:n.scrollLeft!=null&&n.scrollLeft>=0?n.scrollLeft:i.scrollLeft,scrollTop:n.scrollTop!=null&&n.scrollTop>=0?n.scrollTop:i.scrollTop}:null}}]),e})(M.PureComponent);Ye(LA,"defaultProps",{classNameBottomLeftGrid:"",classNameBottomRightGrid:"",classNameTopLeftGrid:"",classNameTopRightGrid:"",enableFixedColumnScroll:!1,enableFixedRowScroll:!1,fixedColumnCount:0,fixedRowCount:0,scrollToColumn:-1,scrollToRow:-1,style:{},styleBottomLeftGrid:{},styleBottomRightGrid:{},styleTopLeftGrid:{},styleTopRightGrid:{},hideTopRightGridScrollbar:!1,hideBottomLeftGridScrollbar:!1});LA.propTypes={};Qg(LA);function Qbe(r){var e=r.dataKey,t=r.rowData;return typeof t.get=="function"?t.get(e):t[e]}function Jbe(r){var e=r.cellData;return e==null?"":String(e)}function e9(r){var e=r.className,t=r.columns,n=r.style;return M.createElement("div",{className:e,role:"row",style:n},t)}e9.propTypes=null;var Td={ASC:"ASC",DESC:"DESC"};function t9(r){var e=r.sortDirection,t=bl("ReactVirtualized__Table__sortableHeaderIcon",{"ReactVirtualized__Table__sortableHeaderIcon--ASC":e===Td.ASC,"ReactVirtualized__Table__sortableHeaderIcon--DESC":e===Td.DESC});return M.createElement("svg",{className:t,width:18,height:18,viewBox:"0 0 24 24"},e===Td.ASC?M.createElement("path",{d:"M7 14l5-5 5 5z"}):M.createElement("path",{d:"M7 10l5 5 5-5z"}),M.createElement("path",{d:"M0 0h24v24H0z",fill:"none"}))}t9.propTypes={};function r9(r){var e=r.dataKey,t=r.label,n=r.sortBy,i=r.sortDirection,s=n===e,a=[M.createElement("span",{className:"ReactVirtualized__Table__headerTruncatedText",key:"label",title:typeof t=="string"?t:null},t)];return s&&a.push(M.createElement(t9,{key:"SortIndicator",sortDirection:i})),a}r9.propTypes=null;function n9(r){var e=r.className,t=r.columns,n=r.index,i=r.key,s=r.onRowClick,a=r.onRowDoubleClick,o=r.onRowMouseOut,l=r.onRowMouseOver,u=r.onRowRightClick,c=r.rowData,h=r.style,m={"aria-rowindex":n+1};return(s||a||o||l||u)&&(m["aria-label"]="row",m.tabIndex=0,s&&(m.onClick=function(g){return s({event:g,index:n,rowData:c})}),a&&(m.onDoubleClick=function(g){return a({event:g,index:n,rowData:c})}),o&&(m.onMouseOut=function(g){return o({event:g,index:n,rowData:c})}),l&&(m.onMouseOver=function(g){return l({event:g,index:n,rowData:c})}),u&&(m.onContextMenu=function(g){return u({event:g,index:n,rowData:c})})),M.createElement("div",tr({},m,{className:e,key:i,role:"row",style:h}),t)}n9.propTypes=null;var OA=(function(r){$a(e,r);function e(){return Ni(this,e),yo(this,js(e).apply(this,arguments))}return e})(M.Component);Ye(OA,"defaultProps",{cellDataGetter:Qbe,cellRenderer:Jbe,defaultSortDirection:Td.ASC,flexGrow:0,flexShrink:1,headerRenderer:r9,style:{}});OA.propTypes={};function tF(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function Bf(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?tF(t,!0).forEach(function(n){Ye(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):tF(t).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}var MA=(function(r){$a(e,r);function e(t){var n;return Ni(this,e),n=yo(this,js(e).call(this,t)),n.state={scrollbarWidth:0},n._createColumn=n._createColumn.bind(He(n)),n._createRow=n._createRow.bind(He(n)),n._onScroll=n._onScroll.bind(He(n)),n._onSectionRendered=n._onSectionRendered.bind(He(n)),n._setRef=n._setRef.bind(He(n)),n}return ss(e,[{key:"forceUpdateGrid",value:function(){this.Grid&&this.Grid.forceUpdate()}},{key:"getOffsetForRow",value:function(n){var i=n.alignment,s=n.index;if(this.Grid){var a=this.Grid.getOffsetForCell({alignment:i,rowIndex:s}),o=a.scrollTop;return o}return 0}},{key:"invalidateCellSizeAfterRender",value:function(n){var i=n.columnIndex,s=n.rowIndex;this.Grid&&this.Grid.invalidateCellSizeAfterRender({rowIndex:s,columnIndex:i})}},{key:"measureAllRows",value:function(){this.Grid&&this.Grid.measureAllCells()}},{key:"recomputeGridSize",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=n.columnIndex,s=i===void 0?0:i,a=n.rowIndex,o=a===void 0?0:a;this.Grid&&this.Grid.recomputeGridSize({rowIndex:o,columnIndex:s})}},{key:"recomputeRowHeights",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;this.Grid&&this.Grid.recomputeGridSize({rowIndex:n})}},{key:"scrollToPosition",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;this.Grid&&this.Grid.scrollToPosition({scrollTop:n})}},{key:"scrollToRow",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;this.Grid&&this.Grid.scrollToCell({columnIndex:0,rowIndex:n})}},{key:"getScrollbarWidth",value:function(){if(this.Grid){var n=Ho.findDOMNode(this.Grid),i=n.clientWidth||0,s=n.offsetWidth||0;return s-i}return 0}},{key:"componentDidMount",value:function(){this._setScrollbarWidth()}},{key:"componentDidUpdate",value:function(){this._setScrollbarWidth()}},{key:"render",value:function(){var n=this,i=this.props,s=i.children,a=i.className,o=i.disableHeader,l=i.gridClassName,u=i.gridStyle,c=i.headerHeight,h=i.headerRowRenderer,m=i.height,g=i.id,y=i.noRowsRenderer,v=i.rowClassName,x=i.rowStyle,w=i.scrollToIndex,E=i.style,D=i.width,I=this.state.scrollbarWidth,A=o?m:m-c,L=typeof v=="function"?v({index:-1}):v,N=typeof x=="function"?x({index:-1}):x;return this._cachedColumnStyles=[],M.Children.toArray(s).forEach(function(U,B){var k=n._getFlexStyleForColumn(U,U.props.style);n._cachedColumnStyles[B]=Bf({overflow:"hidden"},k)}),M.createElement("div",{"aria-label":this.props["aria-label"],"aria-labelledby":this.props["aria-labelledby"],"aria-colcount":M.Children.toArray(s).length,"aria-rowcount":this.props.rowCount,className:bl("ReactVirtualized__Table",a),id:g,role:"grid",style:E},!o&&h({className:bl("ReactVirtualized__Table__headerRow",L),columns:this._getHeaderColumns(),style:Bf({height:c,overflow:"hidden",paddingRight:I,width:D},N)}),M.createElement(Sd,tr({},this.props,{"aria-readonly":null,autoContainerWidth:!0,className:bl("ReactVirtualized__Table__Grid",l),cellRenderer:this._createRow,columnWidth:D,columnCount:1,height:A,id:void 0,noContentRenderer:y,onScroll:this._onScroll,onSectionRendered:this._onSectionRendered,ref:this._setRef,role:"rowgroup",scrollbarWidth:I,scrollToRow:w,style:Bf({},u,{overflowX:"hidden"})})))}},{key:"_createColumn",value:function(n){var i=n.column,s=n.columnIndex,a=n.isScrolling,o=n.parent,l=n.rowData,u=n.rowIndex,c=this.props.onColumnClick,h=i.props,m=h.cellDataGetter,g=h.cellRenderer,y=h.className,v=h.columnData,x=h.dataKey,w=h.id,E=m({columnData:v,dataKey:x,rowData:l}),D=g({cellData:E,columnData:v,columnIndex:s,dataKey:x,isScrolling:a,parent:o,rowData:l,rowIndex:u}),I=function(U){c&&c({columnData:v,dataKey:x,event:U})},A=this._cachedColumnStyles[s],L=typeof D=="string"?D:null;return M.createElement("div",{"aria-colindex":s+1,"aria-describedby":w,className:bl("ReactVirtualized__Table__rowColumn",y),key:"Row"+u+"-Col"+s,onClick:I,role:"gridcell",style:A,title:L},D)}},{key:"_createHeader",value:function(n){var i=n.column,s=n.index,a=this.props,o=a.headerClassName,l=a.headerStyle,u=a.onHeaderClick,c=a.sort,h=a.sortBy,m=a.sortDirection,g=i.props,y=g.columnData,v=g.dataKey,x=g.defaultSortDirection,w=g.disableSort,E=g.headerRenderer,D=g.id,I=g.label,A=!w&&c,L=bl("ReactVirtualized__Table__headerColumn",o,i.props.headerClassName,{ReactVirtualized__Table__sortableHeaderColumn:A}),N=this._getFlexStyleForColumn(i,Bf({},l,{},i.props.headerStyle)),U=E({columnData:y,dataKey:v,disableSort:w,label:I,sortBy:h,sortDirection:m}),B,k,H,q,V;if(A||u){var Q=h!==v,ie=Q?x:m===Td.DESC?Td.ASC:Td.DESC,le=function(ne){A&&c({defaultSortDirection:x,event:ne,sortBy:v,sortDirection:ie}),u&&u({columnData:y,dataKey:v,event:ne})},he=function(ne){(ne.key==="Enter"||ne.key===" ")&&le(ne)};V=i.props["aria-label"]||I||v,q="none",H=0,B=le,k=he}return h===v&&(q=m===Td.ASC?"ascending":"descending"),M.createElement("div",{"aria-label":V,"aria-sort":q,className:L,id:D,key:"Header-Col"+s,onClick:B,onKeyDown:k,role:"columnheader",style:N,tabIndex:H},U)}},{key:"_createRow",value:function(n){var i=this,s=n.rowIndex,a=n.isScrolling,o=n.key,l=n.parent,u=n.style,c=this.props,h=c.children,m=c.onRowClick,g=c.onRowDoubleClick,y=c.onRowRightClick,v=c.onRowMouseOver,x=c.onRowMouseOut,w=c.rowClassName,E=c.rowGetter,D=c.rowRenderer,I=c.rowStyle,A=this.state.scrollbarWidth,L=typeof w=="function"?w({index:s}):w,N=typeof I=="function"?I({index:s}):I,U=E({index:s}),B=M.Children.toArray(h).map(function(q,V){return i._createColumn({column:q,columnIndex:V,isScrolling:a,parent:l,rowData:U,rowIndex:s,scrollbarWidth:A})}),k=bl("ReactVirtualized__Table__row",L),H=Bf({},u,{height:this._getRowHeight(s),overflow:"hidden",paddingRight:A},N);return D({className:k,columns:B,index:s,isScrolling:a,key:o,onRowClick:m,onRowDoubleClick:g,onRowRightClick:y,onRowMouseOver:v,onRowMouseOut:x,rowData:U,style:H})}},{key:"_getFlexStyleForColumn",value:function(n){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s="".concat(n.props.flexGrow," ").concat(n.props.flexShrink," ").concat(n.props.width,"px"),a=Bf({},i,{flex:s,msFlex:s,WebkitFlex:s});return n.props.maxWidth&&(a.maxWidth=n.props.maxWidth),n.props.minWidth&&(a.minWidth=n.props.minWidth),a}},{key:"_getHeaderColumns",value:function(){var n=this,i=this.props,s=i.children,a=i.disableHeader,o=a?[]:M.Children.toArray(s);return o.map(function(l,u){return n._createHeader({column:l,index:u})})}},{key:"_getRowHeight",value:function(n){var i=this.props.rowHeight;return typeof i=="function"?i({index:n}):i}},{key:"_onScroll",value:function(n){var i=n.clientHeight,s=n.scrollHeight,a=n.scrollTop,o=this.props.onScroll;o({clientHeight:i,scrollHeight:s,scrollTop:a})}},{key:"_onSectionRendered",value:function(n){var i=n.rowOverscanStartIndex,s=n.rowOverscanStopIndex,a=n.rowStartIndex,o=n.rowStopIndex,l=this.props.onRowsRendered;l({overscanStartIndex:i,overscanStopIndex:s,startIndex:a,stopIndex:o})}},{key:"_setRef",value:function(n){this.Grid=n}},{key:"_setScrollbarWidth",value:function(){var n=this.getScrollbarWidth();this.setState({scrollbarWidth:n})}}]),e})(M.PureComponent);Ye(MA,"defaultProps",{disableHeader:!1,estimatedRowSize:30,headerHeight:0,headerStyle:{},noRowsRenderer:function(){return null},onRowsRendered:function(){return null},onScroll:function(){return null},overscanIndicesGetter:j7,overscanRowCount:10,rowRenderer:n9,headerRowRenderer:e9,rowStyle:{},scrollToAlignment:"auto",scrollToIndex:-1,style:{}});MA.propTypes={};var Cd=[],j0=null,zh=null;function i9(){zh&&(zh=null,document.body&&j0!=null&&(document.body.style.pointerEvents=j0),j0=null)}function Zbe(){i9(),Cd.forEach(function(r){return r.__resetIsScrolling()})}function eSe(){zh&&Vp(zh);var r=0;Cd.forEach(function(e){r=Math.max(r,e.props.scrollingResetTimeInterval)}),zh=DA(Zbe,r)}function s9(r){r.currentTarget===window&&j0==null&&document.body&&(j0=document.body.style.pointerEvents,document.body.style.pointerEvents="none"),eSe(),Cd.forEach(function(e){e.props.scrollElement===r.currentTarget&&e.__handleWindowScrollEvent()})}function rF(r,e){Cd.some(function(t){return t.props.scrollElement===e})||e.addEventListener("scroll",s9),Cd.push(r)}function nF(r,e){Cd=Cd.filter(function(t){return t!==r}),Cd.length||(e.removeEventListener("scroll",s9),zh&&(Vp(zh),i9()))}var FA=function(e){return e===window},x0=function(e){return e.getBoundingClientRect()};function iF(r,e){if(r)if(FA(r)){var t=window,n=t.innerHeight,i=t.innerWidth;return{height:typeof n=="number"?n:0,width:typeof i=="number"?i:0}}else return x0(r);else return{height:e.serverHeight,width:e.serverWidth}}function tSe(r,e){if(FA(e)&&document.documentElement){var t=document.documentElement,n=x0(r),i=x0(t);return{top:n.top-i.top,left:n.left-i.left}}else{var s=a9(e),a=x0(r),o=x0(e);return{top:a.top+s.top-o.top,left:a.left+s.left-o.left}}}function a9(r){return FA(r)&&document.documentElement?{top:"scrollY"in window?window.scrollY:document.documentElement.scrollTop,left:"scrollX"in window?window.scrollX:document.documentElement.scrollLeft}:{top:r.scrollTop,left:r.scrollLeft}}var sF,aF;function oF(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function rSe(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?oF(t,!0).forEach(function(n){Ye(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):oF(t).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}var nSe=150,o9=function(){return typeof window<"u"?window:void 0},iSe=(aF=sF=(function(r){$a(e,r);function e(){var t,n;Ni(this,e);for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return n=yo(this,(t=js(e)).call.apply(t,[this].concat(s))),Ye(He(n),"_window",o9()),Ye(He(n),"_isMounted",!1),Ye(He(n),"_positionFromTop",0),Ye(He(n),"_positionFromLeft",0),Ye(He(n),"_detectElementResize",void 0),Ye(He(n),"_child",void 0),Ye(He(n),"state",rSe({},iF(n.props.scrollElement,n.props),{isScrolling:!1,scrollLeft:0,scrollTop:0})),Ye(He(n),"_registerChild",function(o){o&&!(o instanceof Element)&&console.warn("WindowScroller registerChild expects to be passed Element or null"),n._child=o,n.updatePosition()}),Ye(He(n),"_onChildScroll",function(o){var l=o.scrollTop;if(n.state.scrollTop!==l){var u=n.props.scrollElement;u&&(typeof u.scrollTo=="function"?u.scrollTo(0,l+n._positionFromTop):u.scrollTop=l+n._positionFromTop)}}),Ye(He(n),"_registerResizeListener",function(o){o===window?window.addEventListener("resize",n._onResize,!1):n._detectElementResize.addResizeListener(o,n._onResize)}),Ye(He(n),"_unregisterResizeListener",function(o){o===window?window.removeEventListener("resize",n._onResize,!1):o&&n._detectElementResize.removeResizeListener(o,n._onResize)}),Ye(He(n),"_onResize",function(){n.updatePosition()}),Ye(He(n),"__handleWindowScrollEvent",function(){if(n._isMounted){var o=n.props.onScroll,l=n.props.scrollElement;if(l){var u=a9(l),c=Math.max(0,u.left-n._positionFromLeft),h=Math.max(0,u.top-n._positionFromTop);n.setState({isScrolling:!0,scrollLeft:c,scrollTop:h}),o({scrollLeft:c,scrollTop:h})}}}),Ye(He(n),"__resetIsScrolling",function(){n.setState({isScrolling:!1})}),n}return ss(e,[{key:"updatePosition",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.props.scrollElement,i=this.props.onResize,s=this.state,a=s.height,o=s.width,l=this._child||Ho.findDOMNode(this);if(l instanceof Element&&n){var u=tSe(l,n);this._positionFromTop=u.top,this._positionFromLeft=u.left}var c=iF(n,this.props);(a!==c.height||o!==c.width)&&(this.setState({height:c.height,width:c.width}),i({height:c.height,width:c.width}))}},{key:"componentDidMount",value:function(){var n=this.props.scrollElement;this._detectElementResize=H7(),this.updatePosition(n),n&&(rF(this,n),this._registerResizeListener(n)),this._isMounted=!0}},{key:"componentDidUpdate",value:function(n,i){var s=this.props.scrollElement,a=n.scrollElement;a!==s&&a!=null&&s!=null&&(this.updatePosition(s),nF(this,a),rF(this,s),this._unregisterResizeListener(a),this._registerResizeListener(s))}},{key:"componentWillUnmount",value:function(){var n=this.props.scrollElement;n&&(nF(this,n),this._unregisterResizeListener(n)),this._isMounted=!1}},{key:"render",value:function(){var n=this.props.children,i=this.state,s=i.isScrolling,a=i.scrollTop,o=i.scrollLeft,l=i.height,u=i.width;return n({onChildScroll:this._onChildScroll,registerChild:this._registerChild,height:l,isScrolling:s,scrollLeft:o,scrollTop:a,width:u})}}]),e})(M.PureComponent),Ye(sF,"propTypes",null),aF);Ye(iSe,"defaultProps",{onResize:function(){},onScroll:function(){},scrollingResetTimeInterval:nSe,scrollElement:o9(),serverHeight:0,serverWidth:0});const sSe=Ir(F.jsx("path",{d:"M21 6h-7.59l3.29-3.29L16 2l-4 4-4-4-.71.71L10.59 6H3c-1.1 0-2 .89-2 2v12c0 1.1.9 2 2 2h18c1.1 0 2-.9 2-2V8c0-1.11-.9-2-2-2m0 14H3V8h18zM9 10v8l7-4z"})),aSe=Ir([F.jsx("circle",{cx:"15.5",cy:"9.5",r:"1.5"},"0"),F.jsx("circle",{cx:"8.5",cy:"9.5",r:"1.5"},"1"),F.jsx("path",{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2M12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8m0-6c-2.33 0-4.32 1.45-5.12 3.5h1.67c.69-1.19 1.97-2 3.45-2s2.75.81 3.45 2h1.67c-.8-2.05-2.79-3.5-5.12-3.5"},"2")]),oSe=Ir(F.jsx("path",{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2M12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8m3.5-9c.83 0 1.5-.67 1.5-1.5S16.33 8 15.5 8 14 8.67 14 9.5s.67 1.5 1.5 1.5m-7 0c.83 0 1.5-.67 1.5-1.5S9.33 8 8.5 8 7 8.67 7 9.5 7.67 11 8.5 11m3.5 6.5c2.33 0 4.31-1.46 5.11-3.5H6.89c.8 2.04 2.78 3.5 5.11 3.5"})),Js={flexContainer:"ReactVirtualizedDemo-flexContainer",tableRow:"ReactVirtualizedDemo-tableRow",tableRowHover:"ReactVirtualizedDemo-tableRowHover",tableCell:"ReactVirtualizedDemo-tableCell",noClick:"ReactVirtualizedDemo-noClick"},lSe=({theme:r})=>({"& .ReactVirtualized__Table__headerRow":{...r.direction==="rtl"&&{paddingLeft:"0 !important"},...r.direction!=="rtl"&&{paddingRight:void 0}},[`& .${Js.flexContainer}`]:{display:"flex",alignItems:"center",boxSizing:"border-box"},[`& .${Js.tableRow}`]:{cursor:"pointer"},[`& .${Js.tableRowHover}`]:{"&:hover":{backgroundColor:r.palette.grey[200]}},[`& .${Js.tableCell}`]:{flex:1},[`& .${Js.noClick}`]:{cursor:"initial"}});class l9 extends M.PureComponent{static defaultProps={headerHeight:48,rowHeight:80};getRowClassName=({index:e})=>{const{onRowClick:t}=this.props;return It(Js.tableRow,Js.flexContainer,{[Js.tableRowHover]:e!==-1&&t!=null})};getObjectIndexIndex=e=>{const{originalData:t}=this.props;for(let n=0;n<t.length;n++)if(t[n].index===e)return n;return 0};cellRenderer=({cellData:e,columnIndex:t})=>{const{t:n,rowHeight:i,onRowClick:s,showMultiSelect:a,selectRow:o,watchRow:l,originalData:u,columns:c,seeDetail:h,nowMod:m}=this.props;return F.jsxs(Dd,{component:"div",className:It(Js.tableCell,Js.flexContainer,{[Js.noClick]:s==null}),variant:"body",style:{height:i,width:c[t].width+" !important",flex:"auto"},children:[t===0?a?F.jsx(sp,{color:"primary",checked:u[this.getObjectIndexIndex(e)].checked,onClick:()=>o(e),inputProps:{"aria-labelledby":t}}):F.jsx(F.Fragment,{}):"",t===1?F.jsxs("div",{children:[F.jsxs("div",{style:{fontWeight:"600",cursor:"pointer"},children:[e," - ",F.jsx("span",{onClick:()=>h(u[this.getObjectIndexIndex(e)]),children:u[this.getObjectIndexIndex(e)].name}),m===1?F.jsx(Zh,{size:"small",onClick:()=>l(u[this.getObjectIndexIndex(e)]),children:F.jsx(sSe,{fontSize:"small",sx:{color:pd[400]}})}):""]}),F.jsx("div",{style:{fontSize:"12px",color:"#7a7a7a",overflow:"hidden",height:"16px"},children:F.jsx("i",{children:u[this.getObjectIndexIndex(e)].url})}),F.jsxs("div",{style:{fontSize:"12px",color:"#7a7a7a"},children:[u[this.getObjectIndexIndex(e)].video?""+u[this.getObjectIndexIndex(e)].video.width+"x"+u[this.getObjectIndexIndex(e)].video.height+"-"+u[this.getObjectIndexIndex(e)].video.codec:"","-",u[this.getObjectIndexIndex(e)].audio?""+u[this.getObjectIndexIndex(e)].audio.codec+"-"+u[this.getObjectIndexIndex(e)].audio.channels+" audio channels":""]})]}):"",t===2?F.jsxs(Lt,{children:[u[this.getObjectIndexIndex(e)].status===0?F.jsx(h1,{sx:{width:24,height:24},children:F.jsx(Wxe,{})}):"",u[this.getObjectIndexIndex(e)].status===1?m===0?F.jsxs("div",{style:{color:u[this.getObjectIndexIndex(e)].delay<500?"green":"red",fontWeight:"bold"},children:[u[this.getObjectIndexIndex(e)].delay,"ms"]}):F.jsx(h1,{sx:{bgcolor:pd[500],width:24,height:24},children:F.jsx(oSe,{})}):"",u[this.getObjectIndexIndex(e)].status===2?F.jsx(h1,{sx:{bgcolor:are[500],width:24,height:24},children:F.jsx(aSe,{})}):""]}):""]})};headerRenderer=({label:e,columnIndex:t})=>{const{selectedArr:n,originalData:i,showMultiSelect:s,selectAll:a,columns:o}=this.props;return F.jsxs(Dd,{component:"div",className:It(Js.tableCell,Js.flexContainer,Js.noClick),variant:"head",style:{width:o[t].width+" !important",flex:"auto"},children:[t===0?s?F.jsx(sp,{color:"primary",checked:n.length>0&&n.length===i.length,onClick:a,indeterminate:n.length>0&&n.length!==i.length,inputProps:{"aria-labelledby":-1}}):F.jsx("div",{children:""}):"",t!==0?F.jsx("span",{children:e}):""]})};render(){const{columns:e,rowHeight:t,headerHeight:n,...i}=this.props;return F.jsx(V7,{children:({height:s,width:a})=>F.jsx(MA,{height:s,width:a,rowHeight:t,gridStyle:{direction:"inherit"},headerHeight:n,...i,rowClassName:this.getRowClassName,children:e.map(({dataKey:o,...l},u)=>F.jsx(OA,{headerRenderer:c=>this.headerRenderer({...c,columnIndex:u}),className:Js.flexContainer,cellRenderer:this.cellRenderer,dataKey:o,...l},o))})})}}l9.propTypes={columns:_l.arrayOf(_l.shape({dataKey:_l.string.isRequired,label:_l.string.isRequired,width:_l.number.isRequired})).isRequired,headerHeight:_l.number,onRowClick:_l.func,rowHeight:_l.number};const uSe=at(l9)(lSe);function cSe(){const{t:r}=bs(),e=Mu(),t=M.useContext(vo),[n,i]=M.useState(550);db();const[s,a]=M.useState([]),[o,l]=M.useState(0),[u,c]=M.useState(null),[h,m]=M.useState(!1),g=N=>{const{name:U,value:B}=N.target;c(k=>({...k,[U]:B}))},y=(N,U)=>new URLSearchParams(N.search).get(U);M.useEffect(()=>{let N=y(e,"md5");e.pathname==="/detail"&&t.updateDetailMd5(N),console.log("-----",e)},[e]);const v=()=>{t.updateDataByIndex([u.index],{name:u.name,tvgLogo:u.tvgLogo,url:u.url,groupTitle:u.groupTitle}),l(1)};M.useEffect(()=>{i(window.innerHeight-t.headerHeight-50),window.addEventListener("resize",N=>{i(N.currentTarget.innerHeight-t.headerHeight-50)})},[]);const x=async N=>{let U=t.nowPlatform;if(t.nowMod===1){let B="watch";if(await Vh.getByLabel(B)!==null){VE("changeWatchUrl",{data:N});return}const H=new Vh(B,{url:"/watch/single?platform="+U+"&url="+N.url,x:0,y:0,width:1024,height:600,title:N.name,center:!0,maximizable:!1});console.log("webview",H),H.once("tauri://created",function(){}),H.once("tauri://error",function(q){console.log("traui error ",q)})}else console.log("-------22222"),window.open("/watch/single?platform="+U+"&url="+N.url)},w=()=>{let N=1;s.length>0&&(N=0);let U=[];if(N===1)for(let B=0;B<t.detailList.length;B++)U.push(t.detailList[B].index);t.onSelectedOrNotAll(N),a(U)},E=N=>{t.onSelectedRow(N);let U=1;for(let B=0;B<s.length;B++)s[B]===N&&(U=0);a(U===1?B=>[...B,N]:B=>B.filter(k=>k!==N))},D=N=>{if(o!==0&&u!==null&&N.index===u.index){l(0);return}l(1),c(N)},I=()=>{l(0)},A=()=>{l(2)},L=N=>{m(N)};return F.jsxs(Lt,{style:{padding:"0 20px"},children:[F.jsx(Vxe,{setSelectedArr:a,showMultiSelect:h,selectedArr:s,changeShowMultiSelect:L}),F.jsx(kc,{style:{height:n,marginTop:"10px"},children:F.jsx(uSe,{rowCount:t.detailList.length,rowGetter:({index:N})=>t.detailList[N],originalData:t.detailList,selectAllRow:w,showMultiSelect:h,selectRow:E,seeDetail:D,watchRow:x,nowMod:t.nowMod,t:()=>r,selectedArr:s,selectAll:w,columns:[{width:80,label:"checkBox",dataKey:"index"},{width:600,label:r(""),dataKey:"index"},{width:100,label:r(""),dataKey:"index"}]})}),o!==0?F.jsx(Lt,{sx:{backgroundColor:"#fff",borderRadius:"10px"},children:F.jsx(Lt,{children:F.jsxs(Lt,{sx:{display:"flex",flexDirection:"column"},children:[F.jsx(Rr,{sx:{marginBottom:"25px",marginTop:"10px"},fullWidth:!0,children:F.jsx(Qn,{disabled:o===1,sx:{fontSize:"11px"},label:r(""),name:"name",size:"small",id:"standard-multiline-static",value:u.name,onChange:g})}),F.jsx(Rr,{sx:{marginBottom:"25px"},fullWidth:!0,children:F.jsx(Qn,{disabled:o===1,sx:{fontSize:"11px"},label:r("m3u8"),name:"url",size:"small",id:"standard-multiline-static",value:u.url,onChange:g})}),F.jsx(Rr,{sx:{marginBottom:"25px"},fullWidth:!0,children:F.jsx(Qn,{disabled:o===1,sx:{fontSize:"11px"},label:r("logoUrl"),name:"tvgLogo",size:"small",id:"standard-multiline-static",value:u.tvgLogo,onChange:g})}),F.jsx(Rr,{sx:{marginBottom:"15px"},fullWidth:!0,children:F.jsx(Qn,{disabled:o===1,sx:{fontSize:"11px"},label:r(""),name:"groupTitle",size:"small",id:"standard-multiline-static",value:u.groupTitle,onChange:g})}),F.jsxs(Lt,{sx:{display:"flex",justifyContent:"flex-end"},children:[o===2?F.jsx(Wr,{size:"small",onClick:v,variant:"contained",sx:{marginRight:"5px"},children:r("")}):"",o===1?F.jsx(Wr,{size:"small",onClick:A,variant:"contained",sx:{marginRight:"5px"},children:r("")}):"",F.jsx(Wr,{size:"small",onClick:I,variant:"contained",children:r("/")})]})]})})}):""]})}const u9=[{path:"/",name:"",icon:"LaptopIcon",element:F.jsx(ase,{}),handle:{showMod:[1],showHeader:!0,showSidebar:!0}},{path:"/watch",name:"",icon:"RemoveRedEyeIcon",element:F.jsx(Oye,{}),handle:{showMod:[1],showHeader:!0,showSidebar:!0}},{path:"/task",name:"",icon:"CloudQueueIcon",element:F.jsx(Mye,{}),handle:{showMod:[0],showHeader:!0,showSidebar:!0}},{path:"/favorite",name:"",icon:"FavoriteBorderIcon",element:F.jsx($ye,{}),handle:{showMod:[0],showHeader:!0,showSidebar:!0}},{path:"/settings",name:"",icon:"SettingsIcon",handle:{showMod:[0,1],showHeader:!0,showSidebar:!0},children:[{path:"/settings",index:!0,element:F.jsx(c3,{}),hideInMenu:!0,handle:{showHeader:!0,showSidebar:!0}},{path:"/settings/basic",name:"",icon:"PublicIcon",element:F.jsx(c3,{}),handle:{showHeader:!0,showSidebar:!0}},{path:"/settings/keywords",name:"",icon:"StickyNote2Icon",element:F.jsx(Uye,{}),handle:{showHeader:!0,showSidebar:!0}},{path:"/settings/search",name:"",icon:"SearchIcon",element:F.jsx(Nye,{}),handle:{showHeader:!0,showSidebar:!0}}]},{path:"/detail",element:F.jsx(cSe,{}),hideInMenu:!0,handle:{showHeader:!1,showSidebar:!0}},{path:"/watch/single",element:F.jsx(Bye,{}),hideInMenu:!0,handle:{showHeader:!1,showSidebar:!1}}],a0="/detail",lF=240;function dSe(){const{t:r}=bs();let e=Mu();const t=Kq(),n=M.useContext(vo),i=db(),s=u9.filter(ne=>!ne.hideInMenu),[a,o]=M.useState(s[0]),[l,u]=M.useState(!1),[c,h]=M.useState(!1),[m,g]=M.useState(null),[y,v]=M.useState(!1),[x,w]=M.useState(!0),[E,D]=M.useState(!1),[I,A]=M.useState(""),[L,N]=M.useState(null),B=(t.find(ne=>ne.handle?.showHeader!==void 0)||t[t.length-1])?.handle||{showHeader:!0,showSidebar:!0};M.useEffect(()=>{if(e.pathname!=a0){n.updateDetailMd5("");for(let ne=0;ne<s.length;ne++)if((e.pathname==s[ne].path||e.pathname==s[ne].uri)&&o(s[ne]),s[ne].children)for(let ue=0;ue<s[ne].children.length;ue++){const ee=s[ne].children[ue].path||s[ne].children[ue].uri;e.pathname==ee&&(o(s[ne].children[ue]),h(!0))}}},[e,s]);const k=ne=>{const ue=ne.path||ne.uri;ue===a0?u(!l):ne.children?h(!c):(o(ne),i(ue))},H=ne=>()=>{w(ne)},q=ne=>{D(!0);let ue=null;for(let ee=0;ee<n.configInfo.sponsor.length;ee++)n.configInfo.sponsor[ee].name===ne&&(ue=n.configInfo.sponsor[ee]);N(ue)},V=()=>{D(!1)},Q=ne=>{A(ne.target.value),q(ne.target.value)},ie=()=>{v(!y)},le=Fee("(prefers-color-scheme: dark)"),he=M.useMemo(()=>Db({palette:{mode:le?"dark":"light",sideBarBgColor:{dark:"#021d2a",light:"antiquewhite"}}}),[le]),ae=F.jsxs(Lt,{className:"side-bar",style:{backgroundColor:he.palette.sideBarBgColor[le?"dark":"light"]},sx:{width:lF},role:"presentation",children:[F.jsxs(fw,{children:[F.jsx(Lt,{className:"side-bar-logo",children:F.jsxs(Lt,{className:"side-bar-logo-item",children:[F.jsx("img",{src:yZ,height:"60"}),F.jsxs(Lt,{className:"go-github",children:["iptv-checker",n.showNewVersion?F.jsx("a",{href:"/#/settings",style:{color:"green"},children:r("")}):""]})]})}),s.map((ne,ue)=>ne.handle?.showMod?.includes(n.nowMod)?F.jsx(Lt,{children:ne.path!==a0||ne.path===a0&&n.subCheckMenuList.length>0?F.jsxs(F.Fragment,{children:[F.jsx(FZ,{disablePadding:!0,onClick:()=>k(ne),children:F.jsxs(oL,{children:[F.jsxs(uL,{children:[ne.icon==="LaptopIcon"?F.jsx(EJ,{}):"",ne.icon==="SettingsIcon"?F.jsx(cL,{}):"",ne.icon==="AdjustIcon"?F.jsx(VZ,{}):"",ne.icon==="CloudQueueIcon"?F.jsx(WZ,{}):"",ne.icon==="RemoveRedEyeIcon"?F.jsx(T8,{}):"",ne.icon==="BoltIcon"?F.jsx(HZ,{}):"",ne.icon==="PublicIcon"?F.jsx(hw,{}):"",ne.icon==="StickyNote2Icon"?F.jsx(aL,{}):"",ne.icon==="FavoriteIcon"?F.jsx(dL,{}):"",ne.icon==="FavoriteBorderIcon"?F.jsx(GZ,{}):""]}),F.jsx(Q_,{primary:r(ne.name)}),ne.path===a0?l?F.jsx(gL,{}):F.jsx(vL,{}):"",ne.children?c?F.jsx(gL,{}):F.jsx(vL,{}):""]})},ue),ne.children?F.jsx(pw,{in:c,timeout:"auto",unmountOnExit:!0,children:F.jsx(fw,{component:"div",disablePadding:!0,children:ne.children.map((ee,pe)=>!ee.hideInMenu&&F.jsxs(oL,{sx:{pl:4},onClick:()=>k(ee),children:[F.jsxs(uL,{children:[ee.icon==="PublicIcon"?F.jsx(hw,{}):"",ee.icon==="StickyNote2Icon"?F.jsx(aL,{}):"",ee.icon==="SettingsIcon"?F.jsx(cL,{}):"",ee.icon==="SearchIcon"?F.jsx(C8,{}):"",ee.icon==="ManageSearchIcon"?F.jsx(qZ,{}):"",ee.icon==="FavoriteIcon"?F.jsx(dL,{}):""]}),F.jsx(Q_,{primary:r(ee.name)})]},pe))})}):""]}):""},ue):"")]}),n.configInfo.sponsor.length>0?F.jsxs(Rr,{sx:{display:"flex",justifyContent:"center",alignItems:"center",fontSize:"12px"},children:[F.jsx(O8,{sx:{fontSize:"12px",cursor:"pointer"},onClick:ie,id:"demo-radio-buttons-group-label",children:r("")}),y?F.jsx(F.Fragment,{children:F.jsx(jf,{"aria-labelledby":"demo-radio-buttons-group-label",name:"radio-buttons-group",onChange:Q,value:I,sx:{fontSize:"12px"},children:n.configInfo.sponsor.map((ne,ue)=>F.jsx(Aa,{sx:{fontSize:"12px"},value:ne.name,control:F.jsx(yl,{size:"small"}),label:ne.name},ue))})}):""]}):""]});return F.jsxs(MJ,{theme:he,children:[F.jsx(jee,{}),F.jsx(hSe,{open:E,sponsorInfo:L,onClose:V}),F.jsxs(Lt,{className:"layout",children:[B.showSidebar&&F.jsx(Iee,{sx:{".MuiPaper-root":{borderTopLeftRadius:"12px",borderBottomLeftRadius:"12px",backgroundColor:"transparent"}},open:x,anchor:"left",variant:x?"permanent":"temporary",children:ae}),F.jsxs(Lt,{className:"container-inner",style:{marginLeft:B.showSidebar&&x?lF+"px":""},children:[F.jsx(Lt,{"data-tauri-drag-region":!0,style:{width:"100%",height:"20px"}}),B.showHeader&&F.jsx(Lt,{style:{padding:"0 20px",display:"flex",justifyContent:"space-between",height:"60px"},children:F.jsxs(Lt,{style:{display:"flex",justifyContent:"space-between",height:"60px",width:"100%"},children:[F.jsxs(Lt,{style:{display:"flex",justifyContent:"center",alignItems:"center"},children:[B.showSidebar&&F.jsx(Lt,{children:F.jsx(Zh,{"aria-label":"delete",size:"small",onClick:H(!x),children:F.jsx(Mee,{})})}),F.jsx(Lt,{style:{fontWeight:"bold",fontSize:"20px"},children:a.name!==null&&a.name!==void 0?r(a.name):n.detailMd5})]}),F.jsxs(Lt,{"data-tauri-drag-region":!0,style:{display:n.nowMod===1?"flex":"none",justifyContent:"center",alignItems:"center"},children:[F.jsx(Lt,{className:"titlebar-button",id:"titlebar-minimize",children:F.jsx("img",{src:"https://api.iconify.design/mdi:window-minimize.svg",alt:"minimize"})}),F.jsx(Lt,{className:"titlebar-button",id:"titlebar-close",children:F.jsx("img",{src:"https://api.iconify.design/mdi:close.svg",alt:"close"})})]})]})}),F.jsx(Lt,{style:{width:"100%",height:"20px"}}),F.jsx(vw,{style:{marginBottom:"10px"}}),F.jsx(nG,{})]})]})]})}function hSe(r){const{t:e}=bs(),{onClose:t,sponsorInfo:n,open:i}=r,s=()=>{t()};return F.jsxs(Tu,{onClose:s,open:i,children:[F.jsx(Ag,{children:e("")}),n!==null&&n.url!==""?F.jsx(Lt,{sx:{display:"flex",justifyContent:"center"},children:F.jsx("img",{src:n.url,height:"400"})}):""]})}const fSe={"Welcome to React":"iptv-checker","System Setting":"","menu source check":"","menu public source":"","menu watch online":"","menu background task":"","menu system settings":"","Please enter the data to be checked":"",:"",:"",:"",:"","":"",:"",:"",:"","URL":"URL","":"","":"",:"","GitHub ":"GitHub ",:"","GitHub ":"GitHub ",:"",:"",:"",:"",:"",:"",:"","":"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",URL:"URL",:"",:"",:"",:"",:"",:"",:""},pSe={translation:fSe},mSe={ffmpeg:"ffmpeg check",:"Support developers to develop and continue to maintain the project",:"Run Time Info",:"Task Info",:"Output files",:"donate",".txt":"Download the results .txt format",".m3u":"Download the results .m3u format",:"edit data",:"Checking",:"records",:"total",:"Local Tasks",:"status",:"create time",:"File Type",:"And",:"New Version",:"Only Support",:"Check",Github:"Github link",:"Now version","STAR":" If you think the project is good, please open the link above and give it a STAR",:"Public Source",:"Check Again",:"Detection history",:"Data Check",:"Data preparation",:"Needs to be checked?",",.m3u.txt":"Please enter the link, only .m3u and .txt suffix links are supported",:"Please select a detection file",:"Local",:"Network",:"File Type","":"Buy me a drink",:"Fast Check",:"Please enter the data you want to check",m3u:"M3U information of your choice",:"raw data",:"Settings",:"Previous",csv:"Download CSV",:"Deal with it again",:"There are already groups",:"A new group has been added",m3u:"Download m3u",:"change",:"Or",:"Filter groups",:"Only the grouping is displayed",:"Resume checks",:"data",:"Filter video clarity",:"And",:"keyword",:"Start checking",:"Search",:"The save was successful",:"Multi-keyword search",:"Pause the check",:"The link is empty",:"After refreshing, you will be redirected to the home page",:"Valid links",:"Delay",:"Replaces the selected group",:"The channel name contains",:"Invalid link",:"Invalid",:"Check the progress","":"You need to click the [Search] button to filter","()":"Export (next step)",:"Select the source with the lowest latency",:"Edit",:"Delete the selection","/":"Cancel/Close",:"Watch",:"Custom source additions",m3u8:"m3u8 link",:"The name of the channel",:"Invalid",:"Valid",:"Save and close",:"Group name",:"Enter a new group name",:"System Settings","(,,)":"Sorting (If there is a large amount of data, the performance of the sorted list may be affected, so it is recommended to operate in batches)",:"Change the grouping",:"Check configuration",:"Previous",:"Next",:"Checking methods",http:"http fast check",http:"If it's a non-http link, skip it",'("[HD]CCTV1""[HD]")':'Should the extra characters in the channel name be removed (for example, "[HD]CCTV1" will remove the "[HD]" characters)',"(0 0)":"Number of channels to save with the same name (default 0 means save all; if set greater than 0, it will save the specified number of channels)",:"Basic configuration",:"Output file name",:"online link",:"local file",:"every day",:"Add",:"Waiting",:"Checking",:"Completed",:"Stopped",:"Operation failed",:"Channel Name Replacement Configuration",:"Character Replacement Configuration",:"Search Value",:"Replace Value",:"Cancel",:"Add a line","":"There are often some special characters before and after the channel name on the Internet. You can add this configuration to replace these characters and improve the tidiness of the channel name.","[HD][HD]":'For example, if "[HD]" appears in the channel name and you need to remove this character, add a line: fill in "[HD]" for the search value and leave the replacement value blank.',:"Basic configuration is empty",:"Favorite Channel Name",:"Dislike channel Name",:"Favorite Channel",:"Dislike channel",:"every hour",:"Timed check time",:"Add keywords",:"The name of the resulting file",:"Add not to see",:"No",:"Check the number of concurrent transactions",:"Yes",:"Execute it now","(ms)":"Check timeout (millisecond)","http(ms)":"HTTP Timeout (millisecond)",:"Add just look",:"Check the list of files",:"Need Sort",:"No need to check",:"Just look at the channel keywords",:"Subscribe link",:"Click Download",:"The operation failed",:"Don't look at channel keywords","":"If the fetch task fails, check whether the service starts normally",:"Not yet generated",id:"Task ID",:"Creation time",:"Run type",:"Love keywords",:"Play",:"Stop",:"Request header",m3u8:"Please enter the M3U8 playback address",:"Don't like keywords",m3u:"Upload the m3u file locally",:"Last run time",:"Next run time",:"Personalized configuration",:"Operational status",:"System configuration",:"Source Check",:"Public Source",:"Watch Online",:"Background Tasks",:"Please enter the data to be checked",:"New",:"Language",:"Remove",:"Example",:"name",:"Custom network source",:"Check concurrency","":"Check timeout (milliseconds)",:"Save",:"Player platform",:"Get data failed",:"Save failed",:"invalid parameters",:"Import tasks",:"Export tasks",:"Refetch Data",:"detail",:"Continue",:"Check Again",:"Refresh",:"last run time",:"Next Step",:"The input box supports the following formats","m3u,":"Supports standard format m3u links, if there are multiple, please use a comma as the separator, for example",:"Support similar","m3u":"Support original content of m3u files, similar to",:"Please select the source","githubiptv-org":"The current source is from iptv-org on GitHub. If you have relevant source links, please add them in the settings.","server":"The current setting for Background check server domain is",server:"Background check server domain","server":"I'm sorry, you haven't set the Background check server domain yet. Please go to the settings page to set it up before checking again.",:"Remote URL to Local Images",:"Extensions","":"Extensions (One per line)",:"Search Sources",:"Add Source",:"Parse Type","URL":"URLs (One per line)","":"Include Files (One per line)","":"Optional: Filter specific files",:"Save Configuration","GitHub ":"GitHub Home Page",:"Raw Source","GitHub ":"GitHub Sub Page",:"Spider Config",:"No Data",:"My Favorite Config",:"Add Rule",:"Match Logic",:"Include",:"Exact Match","":"No rules yet, please add from top right",:"Please enter channel name",:"Enter favorite channel name",:"Include Match",:"Exact Match",:"Add Favorite Channel Name",:"Subscription URL",:"All Crawled Channels",:"Favorite Channels",:"Checked Favorite Channels",:"Failed to open file",:"No link available",:"Special Character Replacement",:"Favorite Channels",:"Clear Results",:"Cleared Successfully",:"Start Crawling",:"Failed to fetch results",URL:"URLs",:"Include Files",:"Crawl Now",:"View Results",:"Crawl Results",:"No Content",:"Basic Settings",:"Spider Config"},gSe={translation:mSe},vSe={en:gSe,zh:pSe};xs.use(dee).init({resources:vSe,lng:"zh",interpolation:{escapeValue:!1}});const ySe=AG([{element:F.jsx(dSe,{}),children:u9}]);tz.createRoot(document.getElementById("root")).render(F.jsx(Yr.StrictMode,{children:F.jsx(LW,{children:F.jsx(bte,{children:F.jsx($G,{router:ySe})})})}));
